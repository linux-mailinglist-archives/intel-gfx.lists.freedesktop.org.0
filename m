Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2FF2C43A10
	for <lists+intel-gfx@lfdr.de>; Thu, 13 Jun 2019 17:18:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8B7BF89B20;
	Thu, 13 Jun 2019 15:18:44 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EE7CD89B20
 for <Intel-gfx@lists.freedesktop.org>; Thu, 13 Jun 2019 15:18:42 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 13 Jun 2019 08:18:42 -0700
X-ExtLoop1: 1
Received: from yyosef-mobl.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.23.42])
 by orsmga004.jf.intel.com with ESMTP; 13 Jun 2019 08:18:40 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Thu, 13 Jun 2019 16:18:36 +0100
Message-Id: <20190613151836.16093-1-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190613133539.12620-1-tvrtko.ursulin@linux.intel.com>
References: <20190613133539.12620-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC 22/28] drm/i915: Convert
 i915_gem_flush_ggtt_writes to intel_gt
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCkhhdmluZyBp
bnRyb2R1Y2VkIHN0cnVjdCBpbnRlbF9ndCAobmFtZWQgdGhlIGFub255bW91cyBzdHJ1Y3R1cmUg
aW4gaTkxNSkKd2UgY2FuIHN0YXJ0IHVzaW5nIGl0IHRvIGNvbXBhcnRtZW50YWxpemUgb3VyIGNv
ZGUgYmV0dGVyLiBJdCBtYWtlcyBtb3JlCnNlbnNlIGxvZ2ljYWxseSB0byBoYXZlIHRoZSBjb2Rl
IGludGVybmFsbHkgbGlrZSB0aGlzIGFuZCBpdCB3aWxsIGFsc28KaGVscCB3aXRoIGZ1dHVyZSBz
cGxpdCBiZXR3ZWVuIGd0IGFuZCBkaXNwbGF5IGluIGk5MTUuCgpTaWduZWQtb2ZmLWJ5OiBUdnJ0
a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYyAgICB8ICA1ICstLQogLi4uL2RybS9pOTE1L2dl
bS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1hbi5jICAgIHwgIDMgKy0KIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2d0LmMgICAgICAgICAgICB8IDQxICsrKysrKysrKysrKysrKysrKysKIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmggICAgICAgICAgICB8ICAyICsKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAgICAgICB8ICAyIC0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMgICAgICAgICAgICAgICB8IDQwIC0tLS0tLS0tLS0tLS0t
LS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYyAgICAgICAgICAgICAgIHwgIDMg
Ky0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ndHQuYyB8ICAyICst
CiA4IGZpbGVzIGNoYW5nZWQsIDUwIGluc2VydGlvbnMoKyksIDQ4IGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYwppbmRleCAzNmI3NmM2YTBh
OWQuLjlhZTc3NDMzNDhmMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX29iamVjdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9v
YmplY3QuYwpAQCAtMjcsNiArMjcsNyBAQAogI2luY2x1ZGUgImk5MTVfZ2VtX2NvbnRleHQuaCIK
ICNpbmNsdWRlICJpOTE1X2dlbV9vYmplY3QuaCIKICNpbmNsdWRlICJpOTE1X2dsb2JhbHMuaCIK
KyNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgogI2luY2x1ZGUgImludGVsX2Zyb250YnVmZmVyLmgi
CiAKIHN0YXRpYyBzdHJ1Y3QgaTkxNV9nbG9iYWxfb2JqZWN0IHsKQEAgLTM2Nyw3ICszNjgsNiBA
QCB2b2lkCiBpOTE1X2dlbV9vYmplY3RfZmx1c2hfd3JpdGVfZG9tYWluKHN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0ICpvYmosCiAJCQkJICAgdW5zaWduZWQgaW50IGZsdXNoX2RvbWFpbnMpCiB7
Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShvYmotPmJhc2Uu
ZGV2KTsKIAlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKIAogCWFzc2VydF9vYmplY3RfaGVsZChvYmop
OwpAQCAtMzc3LDggKzM3Nyw2IEBAIGk5MTVfZ2VtX29iamVjdF9mbHVzaF93cml0ZV9kb21haW4o
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAogCXN3aXRjaCAob2JqLT53cml0ZV9k
b21haW4pIHsKIAljYXNlIEk5MTVfR0VNX0RPTUFJTl9HVFQ6Ci0JCWk5MTVfZ2VtX2ZsdXNoX2dn
dHRfd3JpdGVzKGRldl9wcml2KTsKLQogCQlpbnRlbF9mYl9vYmpfZmx1c2gob2JqLAogCQkJCSAg
IGZiX3dyaXRlX29yaWdpbihvYmosIEk5MTVfR0VNX0RPTUFJTl9HVFQpKTsKIApAQCAtMzg2LDYg
KzM4NCw3IEBAIGk5MTVfZ2VtX29iamVjdF9mbHVzaF93cml0ZV9kb21haW4oc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJCWlmICh2bWEtPmlvbWFwKQogCQkJCWNvbnRpbnVlOwog
CisJCQlpbnRlbF9ndF9mbHVzaF9nZ3R0X3dyaXRlcyh2bWEtPnZtLT5ndCk7CiAJCQlpOTE1X3Zt
YV91bnNldF9nZ3R0X3dyaXRlKHZtYSk7CiAJCX0KIAkJYnJlYWs7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1hbi5jCmluZGV4IGI5MjgwOTQx
ODcyOS4uYjQ2ZDU3OTY3YmZhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
c2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
c2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYwpAQCAtNiw2ICs2LDcgQEAKIAogI2luY2x1ZGUgPGxp
bnV4L3ByaW1lX251bWJlcnMuaD4KIAorI2luY2x1ZGUgImd0L2ludGVsX2d0LmgiCiAjaW5jbHVk
ZSAiZ3QvaW50ZWxfZ3RfcG0uaCIKICNpbmNsdWRlICJodWdlX2dlbV9vYmplY3QuaCIKICNpbmNs
dWRlICJpOTE1X3NlbGZ0ZXN0LmgiCkBAIC0xNDMsNyArMTQ0LDcgQEAgc3RhdGljIGludCBjaGVj
a19wYXJ0aWFsX21hcHBpbmcoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJaWYg
KG9mZnNldCA+PSBvYmotPmJhc2Uuc2l6ZSkKIAkJCWNvbnRpbnVlOwogCi0JCWk5MTVfZ2VtX2Zs
dXNoX2dndHRfd3JpdGVzKHRvX2k5MTUob2JqLT5iYXNlLmRldikpOworCQlpbnRlbF9ndF9mbHVz
aF9nZ3R0X3dyaXRlcygmdG9faTkxNShvYmotPmJhc2UuZGV2KS0+Z3QpOwogCiAJCXAgPSBpOTE1
X2dlbV9vYmplY3RfZ2V0X3BhZ2Uob2JqLCBvZmZzZXQgPj4gUEFHRV9TSElGVCk7CiAJCWNwdSA9
IGttYXAocCkgKyBvZmZzZXRfaW5fcGFnZShvZmZzZXQpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2d0LmMKaW5kZXggYzZhNjczOTNlZTcyLi43YmYwMTM2NTU3M2EgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZ3QuYwpAQCAtMTg4LDMgKzE4OCw0NCBAQCB2b2lkIGludGVsX2d0X2luaXRfc3dp
enpsaW5nKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiAJZWxzZQogCQlNSVNTSU5HX0NBU0UoSU5URUxf
R0VOKGk5MTUpKTsKIH0KKwordm9pZCBpbnRlbF9ndF9mbHVzaF9nZ3R0X3dyaXRlcyhzdHJ1Y3Qg
aW50ZWxfZ3QgKmd0KQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gZ3QtPmk5
MTU7CisJaW50ZWxfd2FrZXJlZl90IHdha2VyZWY7CisKKwkvKgorCSAqIE5vIGFjdHVhbCBmbHVz
aGluZyBpcyByZXF1aXJlZCBmb3IgdGhlIEdUVCB3cml0ZSBkb21haW4gZm9yIHJlYWRzCisJICog
ZnJvbSB0aGUgR1RUIGRvbWFpbi4gV3JpdGVzIHRvIGl0ICJpbW1lZGlhdGVseSIgZ28gdG8gbWFp
biBtZW1vcnkKKwkgKiBhcyBmYXIgYXMgd2Uga25vdywgc28gdGhlcmUncyBubyBjaGlwc2V0IGZs
dXNoLiBJdCBhbHNvIGRvZXNuJ3QKKwkgKiBsYW5kIGluIHRoZSBHUFUgcmVuZGVyIGNhY2hlLgor
CSAqCisJICogSG93ZXZlciwgd2UgZG8gaGF2ZSB0byBlbmZvcmNlIHRoZSBvcmRlciBzbyB0aGF0
IGFsbCB3cml0ZXMgdGhyb3VnaAorCSAqIHRoZSBHVFQgbGFuZCBiZWZvcmUgYW55IHdyaXRlcyB0
byB0aGUgZGV2aWNlLCBzdWNoIGFzIHVwZGF0ZXMgdG8KKwkgKiB0aGUgR0FUVCBpdHNlbGYuCisJ
ICoKKwkgKiBXZSBhbHNvIGhhdmUgdG8gd2FpdCBhIGJpdCBmb3IgdGhlIHdyaXRlcyB0byBsYW5k
IGZyb20gdGhlIEdUVC4KKwkgKiBBbiB1bmNhY2hlZCByZWFkIChpLmUuIG1taW8pIHNlZW1zIHRv
IGJlIGlkZWFsIGZvciB0aGUgcm91bmQtdHJpcAorCSAqIHRpbWluZy4gVGhpcyBpc3N1ZSBoYXMg
b25seSBiZWVuIG9ic2VydmVkIHdoZW4gc3dpdGNoaW5nIHF1aWNrbHkKKwkgKiBiZXR3ZWVuIEdU
VCB3cml0ZXMgYW5kIENQVSByZWFkcyBmcm9tIGluc2lkZSB0aGUga2VybmVsIG9uIHJlY2VudCBo
dywKKwkgKiBhbmQgaXQgYXBwZWFycyB0byBvbmx5IGFmZmVjdCBkaXNjcmV0ZSBHVFQgYmxvY2tz
IChpLmUuIG9uIExMQworCSAqIHN5c3RlbSBhZ2VudHMgd2UgY2Fubm90IHJlcHJvZHVjZSB0aGlz
IGJlaGF2aW91ciwgdW50aWwgQ2Fubm9ubGFrZQorCSAqIHRoYXQgd2FzISkuCisJICovCisKKwl3
bWIoKTsKKworCWlmIChJTlRFTF9JTkZPKGk5MTUpLT5oYXNfY29oZXJlbnRfZ2d0dCkKKwkJcmV0
dXJuOworCisJaTkxNV9nZW1fY2hpcHNldF9mbHVzaChpOTE1KTsKKworCXdpdGhfaW50ZWxfcnVu
dGltZV9wbShpOTE1LCB3YWtlcmVmKSB7CisJCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSA9
IGd0LT51bmNvcmU7CisKKwkJc3Bpbl9sb2NrX2lycSgmdW5jb3JlLT5sb2NrKTsKKwkJaW50ZWxf
dW5jb3JlX3Bvc3RpbmdfcmVhZF9mdyh1bmNvcmUsCisJCQkJCSAgICAgUklOR19IRUFEKFJFTkRF
Ul9SSU5HX0JBU0UpKTsKKwkJc3Bpbl91bmxvY2tfaXJxKCZ1bmNvcmUtPmxvY2spOworCX0KK30K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmggYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5oCmluZGV4IGUwMjZiMmRjMTExNS4uNzAwYmI1NmQx
ZTliIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5oCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmgKQEAgLTIwLDQgKzIwLDYgQEAgdm9p
ZCBpbnRlbF9ndF9jbGVhcl9lcnJvcl9yZWdpc3RlcnMoc3RydWN0IGludGVsX2d0ICpndCwKIAog
dm9pZCBpbnRlbF9ndF9pbml0X3N3aXp6bGluZyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKIAordm9p
ZCBpbnRlbF9ndF9mbHVzaF9nZ3R0X3dyaXRlcyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKKwogI2Vu
ZGlmIC8qIF9fSU5URUxfR1RfSF9fICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRleCAxZWIy
MDNmZGVlNjAuLjQ5ODdhMDQ4YjNkMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBAIC0yNjQ4
LDggKzI2NDgsNiBAQCBpbnQgX19tdXN0X2NoZWNrIGk5MTVfZ2VtX2V2aWN0X2Zvcl9ub2RlKHN0
cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAogCQkJCQkgdW5zaWduZWQgaW50IGZsYWdzKTsK
IGludCBpOTE1X2dlbV9ldmljdF92bShzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSk7CiAK
LXZvaWQgaTkxNV9nZW1fZmx1c2hfZ2d0dF93cml0ZXMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KTsKLQogLyogYmVsb25ncyBpbiBpOTE1X2dlbV9ndHQuaCAqLwogc3RhdGljIGlu
bGluZSB2b2lkIGk5MTVfZ2VtX2NoaXBzZXRfZmx1c2goc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KQogewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0u
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKaW5kZXggYjdmODhlMmJkN2RmLi40
ZjlhYWM2MmE4YTQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwpAQCAtMjMzLDQ2ICsyMzMsNiBA
QCBpOTE1X2dlbV9jcmVhdGVfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0
YSwKIAkJCSAgICAgICAmYXJncy0+c2l6ZSwgJmFyZ3MtPmhhbmRsZSk7CiB9CiAKLXZvaWQgaTkx
NV9nZW1fZmx1c2hfZ2d0dF93cml0ZXMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
KQotewotCWludGVsX3dha2VyZWZfdCB3YWtlcmVmOwotCi0JLyoKLQkgKiBObyBhY3R1YWwgZmx1
c2hpbmcgaXMgcmVxdWlyZWQgZm9yIHRoZSBHVFQgd3JpdGUgZG9tYWluIGZvciByZWFkcwotCSAq
IGZyb20gdGhlIEdUVCBkb21haW4uIFdyaXRlcyB0byBpdCAiaW1tZWRpYXRlbHkiIGdvIHRvIG1h
aW4gbWVtb3J5Ci0JICogYXMgZmFyIGFzIHdlIGtub3csIHNvIHRoZXJlJ3Mgbm8gY2hpcHNldCBm
bHVzaC4gSXQgYWxzbyBkb2Vzbid0Ci0JICogbGFuZCBpbiB0aGUgR1BVIHJlbmRlciBjYWNoZS4K
LQkgKgotCSAqIEhvd2V2ZXIsIHdlIGRvIGhhdmUgdG8gZW5mb3JjZSB0aGUgb3JkZXIgc28gdGhh
dCBhbGwgd3JpdGVzIHRocm91Z2gKLQkgKiB0aGUgR1RUIGxhbmQgYmVmb3JlIGFueSB3cml0ZXMg
dG8gdGhlIGRldmljZSwgc3VjaCBhcyB1cGRhdGVzIHRvCi0JICogdGhlIEdBVFQgaXRzZWxmLgot
CSAqCi0JICogV2UgYWxzbyBoYXZlIHRvIHdhaXQgYSBiaXQgZm9yIHRoZSB3cml0ZXMgdG8gbGFu
ZCBmcm9tIHRoZSBHVFQuCi0JICogQW4gdW5jYWNoZWQgcmVhZCAoaS5lLiBtbWlvKSBzZWVtcyB0
byBiZSBpZGVhbCBmb3IgdGhlIHJvdW5kLXRyaXAKLQkgKiB0aW1pbmcuIFRoaXMgaXNzdWUgaGFz
IG9ubHkgYmVlbiBvYnNlcnZlZCB3aGVuIHN3aXRjaGluZyBxdWlja2x5Ci0JICogYmV0d2VlbiBH
VFQgd3JpdGVzIGFuZCBDUFUgcmVhZHMgZnJvbSBpbnNpZGUgdGhlIGtlcm5lbCBvbiByZWNlbnQg
aHcsCi0JICogYW5kIGl0IGFwcGVhcnMgdG8gb25seSBhZmZlY3QgZGlzY3JldGUgR1RUIGJsb2Nr
cyAoaS5lLiBvbiBMTEMKLQkgKiBzeXN0ZW0gYWdlbnRzIHdlIGNhbm5vdCByZXByb2R1Y2UgdGhp
cyBiZWhhdmlvdXIsIHVudGlsIENhbm5vbmxha2UKLQkgKiB0aGF0IHdhcyEpLgotCSAqLwotCi0J
d21iKCk7Ci0KLQlpZiAoSU5URUxfSU5GTyhkZXZfcHJpdiktPmhhc19jb2hlcmVudF9nZ3R0KQot
CQlyZXR1cm47Ci0KLQlpOTE1X2dlbV9jaGlwc2V0X2ZsdXNoKGRldl9wcml2KTsKLQotCXdpdGhf
aW50ZWxfcnVudGltZV9wbShkZXZfcHJpdiwgd2FrZXJlZikgewotCQlzdHJ1Y3QgaW50ZWxfdW5j
b3JlICp1bmNvcmUgPSAmZGV2X3ByaXYtPnVuY29yZTsKLQotCQlzcGluX2xvY2tfaXJxKCZ1bmNv
cmUtPmxvY2spOwotCQlpbnRlbF91bmNvcmVfcG9zdGluZ19yZWFkX2Z3KHVuY29yZSwKLQkJCQkJ
ICAgICBSSU5HX0hFQUQoUkVOREVSX1JJTkdfQkFTRSkpOwotCQlzcGluX3VubG9ja19pcnEoJnVu
Y29yZS0+bG9jayk7Ci0JfQotfQotCiBzdGF0aWMgaW50CiBzaG1lbV9wcmVhZChzdHJ1Y3QgcGFn
ZSAqcGFnZSwgaW50IG9mZnNldCwgaW50IGxlbiwgY2hhciBfX3VzZXIgKnVzZXJfZGF0YSwKIAkg
ICAgYm9vbCBuZWVkc19jbGZsdXNoKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV92bWEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmMKaW5kZXggY2IzNDFl
NGFjZjk5Li40ZjQ2OTVjMzUxYWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfdm1hLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYwpAQCAtMjMsNiAr
MjMsNyBAQAogICovCiAKICNpbmNsdWRlICJndC9pbnRlbF9lbmdpbmUuaCIKKyNpbmNsdWRlICJn
dC9pbnRlbF9ndC5oIgogCiAjaW5jbHVkZSAiaTkxNV92bWEuaCIKIApAQCAtNDA4LDcgKzQwOSw3
IEBAIHZvaWQgaTkxNV92bWFfZmx1c2hfd3JpdGVzKHN0cnVjdCBpOTE1X3ZtYSAqdm1hKQogCWlm
ICghaTkxNV92bWFfaGFzX2dndHRfd3JpdGUodm1hKSkKIAkJcmV0dXJuOwogCi0JaTkxNV9nZW1f
Zmx1c2hfZ2d0dF93cml0ZXModm1hLT52bS0+aTkxNSk7CisJaW50ZWxfZ3RfZmx1c2hfZ2d0dF93
cml0ZXModm1hLT52bS0+Z3QpOwogCiAJaTkxNV92bWFfdW5zZXRfZ2d0dF93cml0ZSh2bWEpOwog
fQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2d0
dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2d0dC5jCmluZGV4
IDIwOTNkMDhhNzU2OS4uYTY3ZjBlOWI0ZDVmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZ3R0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
c2VsZnRlc3RzL2k5MTVfZ2VtX2d0dC5jCkBAIC0xMTk1LDcgKzExOTUsNyBAQCBzdGF0aWMgaW50
IGlndF9nZ3R0X3BhZ2Uodm9pZCAqYXJnKQogCQlpb3dyaXRlMzIobiwgdmFkZHIgKyBuKTsKIAkJ
aW9fbWFwcGluZ191bm1hcF9hdG9taWModmFkZHIpOwogCX0KLQlpOTE1X2dlbV9mbHVzaF9nZ3R0
X3dyaXRlcyhpOTE1KTsKKwlpbnRlbF9ndF9mbHVzaF9nZ3R0X3dyaXRlcyhnZ3R0LT52bS5ndCk7
CiAKIAlpOTE1X3JhbmRvbV9yZW9yZGVyKG9yZGVyLCBjb3VudCwgJnBybmcpOwogCWZvciAobiA9
IDA7IG4gPCBjb3VudDsgbisrKSB7Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

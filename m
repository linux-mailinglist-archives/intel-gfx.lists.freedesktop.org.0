Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 325F22E1EB
	for <lists+intel-gfx@lfdr.de>; Wed, 29 May 2019 18:06:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7E2F18905E;
	Wed, 29 May 2019 16:06:34 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4894E8905E
 for <intel-gfx@lists.freedesktop.org>; Wed, 29 May 2019 16:06:33 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 29 May 2019 09:06:32 -0700
X-ExtLoop1: 1
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga001.jf.intel.com with SMTP; 29 May 2019 09:06:31 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Wed, 29 May 2019 19:06:30 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 29 May 2019 19:06:04 +0300
Message-Id: <20190529160605.28739-9-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190529160605.28739-1-ville.syrjala@linux.intel.com>
References: <20190529160605.28739-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 09/10] drm/i915: Add support for half float
 framebuffers for ivb+ sprites
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCml2
Yisgc3VwcG9ydHMgZnAxNiBwaXhlbCBmb3JtYXRzIG9uIHRoZSBzcHJpdGUgcGxhbmVzIHBsYW5l
cy4gRXhwb3NlCnRoYXQgY2FwYWJpbGl0eS4KCk9uIGl2Yi9oc3cgZnAxNiBzY2Fub3V0IGlzIHNs
aWdodGx5IGJ1c3RlZC4gVGhlIG91dHB1dCBmcm9tIHRoZSBwbGFuZQp3aWxsIGhhdmUgMS80IHRo
ZSBleHBlY3RlZCB2YWx1ZS4gRm9yIHRoZSBzcHJpdGUgcGxhbmUgd2UgY2FuIGZpeCB0aGF0CnVw
IHdpdGggdGhlIHBsYW5lIGdhbW1hIHVuaXQuIFRoaXMgd2FzIGZpeGVkIG9uIGJkdy4KCnYyOiBS
ZWJhc2Ugb24gdG9wIG9mIGljbCBmcDE2CiAgICBTcGxpdCB0aGUgaXZiKyBzcHJpdGUgYmlycyBp
bnRvIGEgc2VwYXJhdGUgcGF0Y2gKClNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmls
bGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfc3ByaXRlLmMgfCA0OCArKysrKysrKysrKysrKysrKysrKysrKysrLS0tLQogMSBmaWxlIGNo
YW5nZWQsIDQyIGluc2VydGlvbnMoKyksIDYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfc3ByaXRlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
bnRlbF9zcHJpdGUuYwppbmRleCBmNWQ1MTE1ZjFiOTAuLjE5ZmQ3MWQ0NDU3YiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfc3ByaXRlLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfc3ByaXRlLmMKQEAgLTEwMTAsNiArMTAxMCwxNiBAQCBzdGF0aWMgdTMy
IGl2Yl9zcHJpdGVfY3RsX2NydGMoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNf
c3RhdGUpCiAJcmV0dXJuIHNwcmN0bDsKIH0KIAorc3RhdGljIGJvb2wgaXZiX25lZWRfc3ByaXRl
X2dhbW1hKGNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGUpCit7CisJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0KKwkJdG9faTkxNShwbGFuZV9zdGF0
ZS0+YmFzZS5wbGFuZS0+ZGV2KTsKKwljb25zdCBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiA9
IHBsYW5lX3N0YXRlLT5iYXNlLmZiOworCisJcmV0dXJuIGZiLT5mb3JtYXQtPmNwcFswXSA9PSA4
ICYmCisJCShJU19JVllCUklER0UoZGV2X3ByaXYpIHx8IElTX0hBU1dFTEwoZGV2X3ByaXYpKTsK
K30KKwogc3RhdGljIHUzMiBpdmJfc3ByaXRlX2N0bChjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZSAqY3J0Y19zdGF0ZSwKIAkJCSAgY29uc3Qgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpw
bGFuZV9zdGF0ZSkKIHsKQEAgLTEwMzIsNiArMTA0MiwxMiBAQCBzdGF0aWMgdTMyIGl2Yl9zcHJp
dGVfY3RsKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCWNhc2Ug
RFJNX0ZPUk1BVF9YUkdCODg4ODoKIAkJc3ByY3RsIHw9IFNQUklURV9GT1JNQVRfUkdCWDg4ODsK
IAkJYnJlYWs7CisJY2FzZSBEUk1fRk9STUFUX1hCR1IxNjE2MTYxNkY6CisJCXNwcmN0bCB8PSBT
UFJJVEVfRk9STUFUX1JHQlgxNjE2MTYgfCBTUFJJVEVfUkdCX09SREVSX1JHQlg7CisJCWJyZWFr
OworCWNhc2UgRFJNX0ZPUk1BVF9YUkdCMTYxNjE2MTZGOgorCQlzcHJjdGwgfD0gU1BSSVRFX0ZP
Uk1BVF9SR0JYMTYxNjE2OworCQlicmVhazsKIAljYXNlIERSTV9GT1JNQVRfWVVZVjoKIAkJc3By
Y3RsIHw9IFNQUklURV9GT1JNQVRfWVVWNDIyIHwgU1BSSVRFX1lVVl9PUkRFUl9ZVVlWOwogCQli
cmVhazsKQEAgLTEwNDksNyArMTA2NSw4IEBAIHN0YXRpYyB1MzIgaXZiX3Nwcml0ZV9jdGwoY29u
c3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJCXJldHVybiAwOwogCX0K
IAotCXNwcmN0bCB8PSBTUFJJVEVfSU5UX0dBTU1BX0RJU0FCTEU7CisJaWYgKCFpdmJfbmVlZF9z
cHJpdGVfZ2FtbWEocGxhbmVfc3RhdGUpKQorCQlzcHJjdGwgfD0gU1BSSVRFX0lOVF9HQU1NQV9E
SVNBQkxFOwogCiAJaWYgKHBsYW5lX3N0YXRlLT5iYXNlLmNvbG9yX2VuY29kaW5nID09IERSTV9D
T0xPUl9ZQ0JDUl9CVDcwOSkKIAkJc3ByY3RsIHw9IFNQUklURV9ZVVZfVE9fUkdCX0NTQ19GT1JN
QVRfQlQ3MDk7CkBAIC0xMDcxLDEyICsxMDg4LDI5IEBAIHN0YXRpYyB1MzIgaXZiX3Nwcml0ZV9j
dGwoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJcmV0dXJuIHNw
cmN0bDsKIH0KIAotc3RhdGljIHZvaWQgaXZiX3Nwcml0ZV9saW5lYXJfZ2FtbWEodTE2IGdhbW1h
WzE4XSkKK3N0YXRpYyB2b2lkIGl2Yl9zcHJpdGVfbGluZWFyX2dhbW1hKGNvbnN0IHN0cnVjdCBp
bnRlbF9wbGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGUsCisJCQkJICAgIHUxNiBnYW1tYVsxOF0pCiB7
Ci0JaW50IGk7CisJaW50IHNjYWxlLCBpOwogCi0JZm9yIChpID0gMDsgaSA8IDE3OyBpKyspCi0J
CWdhbW1hW2ldID0gKGkgPDwgMTApIC8gMTY7CisJaWYgKCFpdmJfbmVlZF9zcHJpdGVfZ2FtbWEo
cGxhbmVfc3RhdGUpKQorCQlyZXR1cm47CisKKwkvKgorCSAqIFdhRlAxNkdhbW1hRW5hYmxpbmc6
aXZiLGhzdworCSAqICJXb3JrYXJvdW5kIDogV2hlbiB1c2luZyB0aGUgNjQtYml0IGZvcm1hdCwg
dGhlIHNwcml0ZSBvdXRwdXQKKwkgKiAgb24gZWFjaCBjb2xvciBjaGFubmVsIGhhcyBvbmUgcXVh
cnRlciBhbXBsaXR1ZGUuIEl0IGNhbiBiZQorCSAqICBicm91Z2h0IHVwIHRvIGZ1bGwgYW1wbGl0
dWRlIGJ5IHVzaW5nIHNwcml0ZSBpbnRlcm5hbCBnYW1tYQorCSAqICBjb3JyZWN0aW9uLCBwaXBl
IGdhbW1hIGNvcnJlY3Rpb24sIG9yIHBpcGUgY29sb3Igc3BhY2UKKwkgKiAgY29udmVyc2lvbiB0
byBtdWx0aXBseSB0aGUgc3ByaXRlIG91dHB1dCBieSBmb3VyLiIKKwkgKi8KKwlzY2FsZSA9IDQ7
CisKKwlmb3IgKGkgPSAwOyBpIDwgMTY7IGkrKykKKwkJZ2FtbWFbaV0gPSBtaW4oKHNjYWxlICog
aSA8PCAxMCkgLyAxNiwgKDEgPDwgMTApIC0gMSk7CisKKwlnYW1tYVtpXSA9IG1pbigoc2NhbGUg
KiBpIDw8IDEwKSAvIDE2LCAxIDw8IDEwKTsKKwlpKys7CiAKIAlnYW1tYVtpXSA9IDMgPDwgMTA7
CiAJaSsrOwpAQCAtMTA5MCw3ICsxMTI0LDcgQEAgc3RhdGljIHZvaWQgaXZiX3VwZGF0ZV9nYW1t
YShjb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlKQogCXUxNiBnYW1t
YVsxOF07CiAJaW50IGk7CiAKLQlpdmJfc3ByaXRlX2xpbmVhcl9nYW1tYShnYW1tYSk7CisJaXZi
X3Nwcml0ZV9saW5lYXJfZ2FtbWEocGxhbmVfc3RhdGUsIGdhbW1hKTsKIAogCS8qIEZJWE1FIHRo
ZXNlIHJlZ2lzdGVyIGFyZSBzaW5nbGUgYnVmZmVyZWQgOiggKi8KIAlmb3IgKGkgPSAwOyBpIDwg
MTY7IGkrKykKQEAgLTIxNzUsNiArMjIwOSw4IEBAIHN0YXRpYyBib29sIHNuYl9zcHJpdGVfZm9y
bWF0X21vZF9zdXBwb3J0ZWQoc3RydWN0IGRybV9wbGFuZSAqX3BsYW5lLAogCXN3aXRjaCAoZm9y
bWF0KSB7CiAJY2FzZSBEUk1fRk9STUFUX1hSR0I4ODg4OgogCWNhc2UgRFJNX0ZPUk1BVF9YQkdS
ODg4ODoKKwljYXNlIERSTV9GT1JNQVRfWFJHQjE2MTYxNjE2RjoKKwljYXNlIERSTV9GT1JNQVRf
WEJHUjE2MTYxNjE2RjoKIAljYXNlIERSTV9GT1JNQVRfWVVZVjoKIAljYXNlIERSTV9GT1JNQVRf
WVZZVToKIAljYXNlIERSTV9GT1JNQVRfVVlWWToKLS0gCjIuMjEuMAoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJ
bnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 97663367094
	for <lists+intel-gfx@lfdr.de>; Wed, 21 Apr 2021 18:49:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DA1686E99B;
	Wed, 21 Apr 2021 16:49:24 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B39966E99B
 for <intel-gfx@lists.freedesktop.org>; Wed, 21 Apr 2021 16:49:22 +0000 (UTC)
IronPort-SDR: HLkEc4lSiNXS5pKgci+kkFNpHxs4bxxi+Q8nAH5sp7w3KAO9s+rme3e2OQRWOUNWKXeFGiEoYo
 4/akGStqzSgg==
X-IronPort-AV: E=McAfee;i="6200,9189,9961"; a="259686751"
X-IronPort-AV: E=Sophos;i="5.82,240,1613462400"; d="scan'208";a="259686751"
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by orsmga105.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 21 Apr 2021 09:49:20 -0700
IronPort-SDR: FGqoAuhWap6591/AmmAMStybgTJ9hgziHbEg9b+OTlQRHvsh3eCMZpb17Gs+t8TgKjkqRQ4Mdz
 ESgZokI/Y5Gw==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.82,240,1613462400"; d="scan'208";a="452993505"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.171])
 by FMSMGA003.fm.intel.com with SMTP; 21 Apr 2021 09:49:18 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Wed, 21 Apr 2021 19:49:16 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 21 Apr 2021 19:48:41 +0300
Message-Id: <20210421164849.12806-10-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.26.3
In-Reply-To: <20210421164849.12806-1-ville.syrjala@linux.intel.com>
References: <20210421164849.12806-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 09/17] drm/i915: Introduce
 encoder->get_buf_trans()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkNv
bnZlcnQgdGhlIGdldF9idWZfdHJhbnMoKSBmdW5jdGlvbnMgaW50byBhbiBlbmNvZGVyIHZmdW5j
LgpBbGxvd3MgdXMgdG8gZ2V0IHJpZCBvZiBidW5jaCBvZiBwbGF0Zm9ybSBpZi1sYWRkZXJzLgoK
U2lnbmVkLW9mZi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVs
LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NydC5jICAgICAg
fCAgMyArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jICAgICAgfCA1
NiArKystLS0tLS0tLS0tLS0KIC4uLi9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaV9idWZfdHJh
bnMuYyAgICB8IDY4ICsrKysrKysrKysrLS0tLS0tLS0KIC4uLi9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2RkaV9idWZfdHJhbnMuaCAgICB8IDM5ICstLS0tLS0tLS0tCiAuLi4vZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmggICAgfCAgNCArKwogZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9mZGkuYyAgICAgIHwgIDMgKy0KIDYgZmlsZXMgY2hhbmdlZCwgNTkg
aW5zZXJ0aW9ucygrKSwgMTE0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3J0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2NydC5jCmluZGV4IGM4NTA5MmVhYTVjMi4uNDJkYTJlMzViYzdjIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NydC5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3J0LmMKQEAgLTM3LDYgKzM3LDcgQEAKICNp
bmNsdWRlICJpbnRlbF9jb25uZWN0b3IuaCIKICNpbmNsdWRlICJpbnRlbF9jcnQuaCIKICNpbmNs
dWRlICJpbnRlbF9kZGkuaCIKKyNpbmNsdWRlICJpbnRlbF9kZGlfYnVmX3RyYW5zLmgiCiAjaW5j
bHVkZSAiaW50ZWxfZGlzcGxheV90eXBlcy5oIgogI2luY2x1ZGUgImludGVsX2ZkaS5oIgogI2lu
Y2x1ZGUgImludGVsX2ZpZm9fdW5kZXJydW4uaCIKQEAgLTEwNzksNiArMTA4MCw4IEBAIHZvaWQg
aW50ZWxfY3J0X2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQljcnQt
PmJhc2UuZW5hYmxlX2Nsb2NrID0gaHN3X2RkaV9lbmFibGVfY2xvY2s7CiAJCWNydC0+YmFzZS5k
aXNhYmxlX2Nsb2NrID0gaHN3X2RkaV9kaXNhYmxlX2Nsb2NrOwogCQljcnQtPmJhc2UuaXNfY2xv
Y2tfZW5hYmxlZCA9IGhzd19kZGlfaXNfY2xvY2tfZW5hYmxlZDsKKworCQlpbnRlbF9kZGlfYnVm
X3RyYW5zX2luaXQoJmNydC0+YmFzZSk7CiAJfSBlbHNlIHsKIAkJaWYgKEhBU19QQ0hfU1BMSVQo
ZGV2X3ByaXYpKSB7CiAJCQljcnQtPmJhc2UuY29tcHV0ZV9jb25maWcgPSBwY2hfY3J0X2NvbXB1
dGVfY29uZmlnOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kZGkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKaW5kZXgg
NWFjMzFiZDEzYjNlLi45MDZmZWEyNDllYWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kZGkuYwpAQCAtMTAyLDggKzEwMiw3IEBAIHZvaWQgaHN3X3ByZXBhcmVfZHBfZGRp
X2J1ZmZlcnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJZW51bSBwb3J0IHBvcnQg
PSBlbmNvZGVyLT5wb3J0OwogCWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICpkZGlf
dHJhbnNsYXRpb25zOwogCi0JZGRpX3RyYW5zbGF0aW9ucyA9IGhzd19nZXRfYnVmX3RyYW5zKGVu
Y29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwotCisJZGRpX3RyYW5zbGF0aW9ucyA9IGVu
Y29kZXItPmdldF9idWZfdHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7CiAJ
aWYgKGRybV9XQVJOX09OX09OQ0UoJmRldl9wcml2LT5kcm0sICFkZGlfdHJhbnNsYXRpb25zKSkK
IAkJcmV0dXJuOwogCkBAIC0xMzUsOCArMTM0LDcgQEAgc3RhdGljIHZvaWQgaHN3X3ByZXBhcmVf
aGRtaV9kZGlfYnVmZmVycyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAllbnVtIHBv
cnQgcG9ydCA9IGVuY29kZXItPnBvcnQ7CiAJY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJh
bnMgKmRkaV90cmFuc2xhdGlvbnM7CiAKLQlkZGlfdHJhbnNsYXRpb25zID0gaHN3X2dldF9idWZf
dHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgICZuX2VudHJpZXMpOwotCisJZGRpX3RyYW5zbGF0
aW9ucyA9IGVuY29kZXItPmdldF9idWZfdHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50
cmllcyk7CiAJaWYgKGRybV9XQVJOX09OX09OQ0UoJmRldl9wcml2LT5kcm0sICFkZGlfdHJhbnNs
YXRpb25zKSkKIAkJcmV0dXJuOwogCWlmIChkcm1fV0FSTl9PTl9PTkNFKCZkZXZfcHJpdi0+ZHJt
LCBsZXZlbCA+PSBuX2VudHJpZXMpKQpAQCAtOTExLDggKzkwOSw3IEBAIHN0YXRpYyB2b2lkIHNr
bF9kZGlfc2V0X2lib29zdChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJY29uc3Qg
c3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKmRkaV90cmFuc2xhdGlvbnM7CiAJCWludCBuX2Vu
dHJpZXM7CiAKLQkJZGRpX3RyYW5zbGF0aW9ucyA9IGhzd19nZXRfYnVmX3RyYW5zKGVuY29kZXIs
IGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwotCisJCWRkaV90cmFuc2xhdGlvbnMgPSBlbmNvZGVy
LT5nZXRfYnVmX3RyYW5zKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwogCQlpZiAo
ZHJtX1dBUk5fT05fT05DRSgmZGV2X3ByaXYtPmRybSwgIWRkaV90cmFuc2xhdGlvbnMpKQogCQkJ
cmV0dXJuOwogCQlpZiAoZHJtX1dBUk5fT05fT05DRSgmZGV2X3ByaXYtPmRybSwgbGV2ZWwgPj0g
bl9lbnRyaWVzKSkKQEAgLTk0Miw3ICs5MzksNyBAQCBzdGF0aWMgdm9pZCBieHRfZGRpX3Zzd2lu
Z19zZXF1ZW5jZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAllbnVtIHBvcnQgcG9y
dCA9IGVuY29kZXItPnBvcnQ7CiAJaW50IG5fZW50cmllczsKIAotCWRkaV90cmFuc2xhdGlvbnMg
PSBieHRfZ2V0X2J1Zl90cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKKwlk
ZGlfdHJhbnNsYXRpb25zID0gZW5jb2Rlci0+Z2V0X2J1Zl90cmFucyhlbmNvZGVyLCBjcnRjX3N0
YXRlLCAmbl9lbnRyaWVzKTsKIAlpZiAoZHJtX1dBUk5fT05fT05DRSgmZGV2X3ByaXYtPmRybSwg
IWRkaV90cmFuc2xhdGlvbnMpKQogCQlyZXR1cm47CiAJaWYgKGRybV9XQVJOX09OX09OQ0UoJmRl
dl9wcml2LT5kcm0sIGxldmVsID49IG5fZW50cmllcykpCkBAIC05NjAsMzEgKzk1Nyw5IEBAIHN0
YXRpYyB1OCBpbnRlbF9kZGlfZHBfdm9sdGFnZV9tYXgoc3RydWN0IGludGVsX2RwICppbnRlbF9k
cCwKIHsKIAlzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciA9ICZkcF90b19kaWdfcG9ydChp
bnRlbF9kcCktPmJhc2U7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9f
aTkxNShlbmNvZGVyLT5iYXNlLmRldik7Ci0JZW51bSBwb3J0IHBvcnQgPSBlbmNvZGVyLT5wb3J0
OwotCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBwb3J0KTsKIAlp
bnQgbl9lbnRyaWVzOwogCi0JaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMikgewotCQlp
ZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKQotCQkJdGdsX2dldF9jb21ib19i
dWZfdHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7Ci0JCWVsc2UKLQkJCXRn
bF9nZXRfZGtsX2J1Zl90cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKLQl9
IGVsc2UgaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA9PSAxMSkgewotCQlpZiAoSVNfUExBVEZP
Uk0oZGV2X3ByaXYsIElOVEVMX0pBU1BFUkxBS0UpKQotCQkJanNsX2dldF9jb21ib19idWZfdHJh
bnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7Ci0JCWVsc2UgaWYgKElTX1BMQVRG
T1JNKGRldl9wcml2LCBJTlRFTF9FTEtIQVJUTEFLRSkpCi0JCQllaGxfZ2V0X2NvbWJvX2J1Zl90
cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKLQkJZWxzZSBpZiAoaW50ZWxf
cGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKQotCQkJaWNsX2dldF9jb21ib19idWZfdHJhbnMo
ZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7Ci0JCWVsc2UKLQkJCWljbF9nZXRfbWdf
YnVmX3RyYW5zKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwotCX0gZWxzZSBpZiAo
SVNfQ0FOTk9OTEFLRShkZXZfcHJpdikpIHsKLQkJY25sX2dldF9idWZfdHJhbnMoZW5jb2Rlciwg
Y3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7Ci0JfSBlbHNlIGlmIChJU19HRU1JTklMQUtFKGRldl9w
cml2KSB8fCBJU19CUk9YVE9OKGRldl9wcml2KSkgewotCQlieHRfZ2V0X2J1Zl90cmFucyhlbmNv
ZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKLQl9IGVsc2UgewotCQloc3dfZ2V0X2J1Zl90
cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKLQl9CisJZW5jb2Rlci0+Z2V0
X2J1Zl90cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKIAogCWlmIChkcm1f
V0FSTl9PTigmZGV2X3ByaXYtPmRybSwgbl9lbnRyaWVzIDwgMSkpCiAJCW5fZW50cmllcyA9IDE7
CkBAIC0xMDE2LDggKzk5MSw3IEBAIHN0YXRpYyB2b2lkIGNubF9kZGlfdnN3aW5nX3Byb2dyYW0o
c3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJaW50IG5fZW50cmllcywgbG47CiAJdTMy
IHZhbDsKIAotCWRkaV90cmFuc2xhdGlvbnMgPSBjbmxfZ2V0X2J1Zl90cmFucyhlbmNvZGVyLCBj
cnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKLQorCWRkaV90cmFuc2xhdGlvbnMgPSBlbmNvZGVyLT5n
ZXRfYnVmX3RyYW5zKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwogCWlmIChkcm1f
V0FSTl9PTl9PTkNFKCZkZXZfcHJpdi0+ZHJtLCAhZGRpX3RyYW5zbGF0aW9ucykpCiAJCXJldHVy
bjsKIAlpZiAoZHJtX1dBUk5fT05fT05DRSgmZGV2X3ByaXYtPmRybSwgbGV2ZWwgPj0gbl9lbnRy
aWVzKSkKQEAgLTExMzcsMTUgKzExMTEsNyBAQCBzdGF0aWMgdm9pZCBpY2xfZGRpX2NvbWJvX3Zz
d2luZ19wcm9ncmFtKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCWludCBuX2VudHJp
ZXMsIGxuOwogCXUzMiB2YWw7CiAKLQlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEyKQot
CQlkZGlfdHJhbnNsYXRpb25zID0gdGdsX2dldF9jb21ib19idWZfdHJhbnMoZW5jb2RlciwgY3J0
Y19zdGF0ZSwgJm5fZW50cmllcyk7Ci0JZWxzZSBpZiAoSVNfUExBVEZPUk0oZGV2X3ByaXYsIElO
VEVMX0pBU1BFUkxBS0UpKQotCQlkZGlfdHJhbnNsYXRpb25zID0ganNsX2dldF9jb21ib19idWZf
dHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7Ci0JZWxzZSBpZiAoSVNfUExB
VEZPUk0oZGV2X3ByaXYsIElOVEVMX0VMS0hBUlRMQUtFKSkKLQkJZGRpX3RyYW5zbGF0aW9ucyA9
IGVobF9nZXRfY29tYm9fYnVmX3RyYW5zKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMp
OwotCWVsc2UKLQkJZGRpX3RyYW5zbGF0aW9ucyA9IGljbF9nZXRfY29tYm9fYnVmX3RyYW5zKGVu
Y29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwotCisJZGRpX3RyYW5zbGF0aW9ucyA9IGVu
Y29kZXItPmdldF9idWZfdHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7CiAJ
aWYgKGRybV9XQVJOX09OX09OQ0UoJmRldl9wcml2LT5kcm0sICFkZGlfdHJhbnNsYXRpb25zKSkK
IAkJcmV0dXJuOwogCWlmIChkcm1fV0FSTl9PTl9PTkNFKCZkZXZfcHJpdi0+ZHJtLCBsZXZlbCA+
PSBuX2VudHJpZXMpKQpAQCAtMTI3Miw4ICsxMjM4LDcgQEAgc3RhdGljIHZvaWQgaWNsX21nX3Bo
eV9kZGlfdnN3aW5nX3NlcXVlbmNlKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCWlm
IChlbmNfdG9fZGlnX3BvcnQoZW5jb2RlciktPnRjX21vZGUgPT0gVENfUE9SVF9UQlRfQUxUKQog
CQlyZXR1cm47CiAKLQlkZGlfdHJhbnNsYXRpb25zID0gaWNsX2dldF9tZ19idWZfdHJhbnMoZW5j
b2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7Ci0KKwlkZGlfdHJhbnNsYXRpb25zID0gZW5j
b2Rlci0+Z2V0X2J1Zl90cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKIAlp
ZiAoZHJtX1dBUk5fT05fT05DRSgmZGV2X3ByaXYtPmRybSwgIWRkaV90cmFuc2xhdGlvbnMpKQog
CQlyZXR1cm47CiAJaWYgKGRybV9XQVJOX09OX09OQ0UoJmRldl9wcml2LT5kcm0sIGxldmVsID49
IG5fZW50cmllcykpCkBAIC0xNDEwLDggKzEzNzUsNyBAQCB0Z2xfZGtsX3BoeV9kZGlfdnN3aW5n
X3NlcXVlbmNlKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCWlmIChlbmNfdG9fZGln
X3BvcnQoZW5jb2RlciktPnRjX21vZGUgPT0gVENfUE9SVF9UQlRfQUxUKQogCQlyZXR1cm47CiAK
LQlkZGlfdHJhbnNsYXRpb25zID0gdGdsX2dldF9ka2xfYnVmX3RyYW5zKGVuY29kZXIsIGNydGNf
c3RhdGUsICZuX2VudHJpZXMpOwotCisJZGRpX3RyYW5zbGF0aW9ucyA9IGVuY29kZXItPmdldF9i
dWZfdHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7CiAJaWYgKGRybV9XQVJO
X09OX09OQ0UoJmRldl9wcml2LT5kcm0sICFkZGlfdHJhbnNsYXRpb25zKSkKIAkJcmV0dXJuOwog
CWlmIChkcm1fV0FSTl9PTl9PTkNFKCZkZXZfcHJpdi0+ZHJtLCBsZXZlbCA+PSBuX2VudHJpZXMp
KQpAQCAtNDU5MCw2ICs0NTU0LDggQEAgdm9pZCBpbnRlbF9kZGlfaW5pdChzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGVudW0gcG9ydCBwb3J0KQogCQllbmNvZGVyLT5nZXRfY29u
ZmlnID0gaHN3X2RkaV9nZXRfY29uZmlnOwogCX0KIAorCWludGVsX2RkaV9idWZfdHJhbnNfaW5p
dChlbmNvZGVyKTsKKwogCWlmIChJU19ERzEoZGV2X3ByaXYpKQogCQllbmNvZGVyLT5ocGRfcGlu
ID0gZGcxX2hwZF9waW4oZGV2X3ByaXYsIHBvcnQpOwogCWVsc2UgaWYgKElTX1JPQ0tFVExBS0Uo
ZGV2X3ByaXYpKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kZGlfYnVmX3RyYW5zLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rk
aV9idWZfdHJhbnMuYwppbmRleCA3NTc0ZDYzOTBhMzkuLjM3YTljM2IyYzAzYyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGlfYnVmX3RyYW5zLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGlfYnVmX3RyYW5zLmMKQEAg
LTEyMDcsNyArMTIwNyw3IEBAIGhzd19nZXRfYnVmX3RyYW5zX2hkbWkoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIsCiAJcmV0dXJuIE5VTEw7CiB9CiAKLWNvbnN0IHN0cnVjdCBpbnRlbF9k
ZGlfYnVmX3RyYW5zICoKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAq
CiBoc3dfZ2V0X2J1Zl90cmFucyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJICBj
b25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJICBpbnQgKm5fZW50
cmllcykKQEAgLTEyNDcsNyArMTI0Nyw3IEBAIGJ4dF9nZXRfYnVmX3RyYW5zX2hkbWkoc3RydWN0
IGludGVsX2VuY29kZXIgKmVuY29kZXIsIGludCAqbl9lbnRyaWVzKQogCXJldHVybiBpbnRlbF9n
ZXRfYnVmX3RyYW5zKCZieHRfZGRpX3RyYW5zbGF0aW9uc19oZG1pLCBuX2VudHJpZXMpOwogfQog
Ci1jb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCitzdGF0aWMgY29uc3Qgc3RydWN0
IGludGVsX2RkaV9idWZfdHJhbnMgKgogYnh0X2dldF9idWZfdHJhbnMoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIsCiAJCSAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNf
c3RhdGUsCiAJCSAgaW50ICpuX2VudHJpZXMpCkBAIC0xMzI5LDcgKzEzMjksNyBAQCBjbmxfZ2V0
X2J1Zl90cmFuc19lZHAoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsIGludCAqbl9lbnRy
aWVzKQogCX0KIH0KIAotY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgorc3RhdGlj
IGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKIGNubF9nZXRfYnVmX3RyYW5zKHN0
cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRj
X3N0YXRlICpjcnRjX3N0YXRlLAogCQkgIGludCAqbl9lbnRyaWVzKQpAQCAtMTM4Myw3ICsxMzgz
LDcgQEAgaWNsX2dldF9jb21ib19idWZfdHJhbnNfZWRwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyLAogCXJldHVybiBpY2xfZ2V0X2NvbWJvX2J1Zl90cmFuc19kcChlbmNvZGVyLCBjcnRj
X3N0YXRlLCBuX2VudHJpZXMpOwogfQogCi1jb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFu
cyAqCitzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgogaWNsX2dldF9j
b21ib19idWZfdHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQljb25zdCBz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJCWludCAqbl9lbnRyaWVzKQpA
QCAtMTQxOSw3ICsxNDE5LDcgQEAgaWNsX2dldF9tZ19idWZfdHJhbnNfZHAoc3RydWN0IGludGVs
X2VuY29kZXIgKmVuY29kZXIsCiAJfQogfQogCi1jb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90
cmFucyAqCitzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgogaWNsX2dl
dF9tZ19idWZfdHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCSAgICAgY29u
c3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJCSAgICAgaW50ICpuX2Vu
dHJpZXMpCkBAIC0xNDYzLDcgKzE0NjMsNyBAQCBlaGxfZ2V0X2NvbWJvX2J1Zl90cmFuc19lZHAo
c3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJcmV0dXJuIGVobF9nZXRfY29tYm9fYnVm
X3RyYW5zX2RwKGVuY29kZXIsIGNydGNfc3RhdGUsIG5fZW50cmllcyk7CiB9CiAKLWNvbnN0IHN0
cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRp
X2J1Zl90cmFucyAqCiBlaGxfZ2V0X2NvbWJvX2J1Zl90cmFucyhzdHJ1Y3QgaW50ZWxfZW5jb2Rl
ciAqZW5jb2RlciwKIAkJCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
LAogCQkJaW50ICpuX2VudHJpZXMpCkBAIC0xNTE0LDcgKzE1MTQsNyBAQCBqc2xfZ2V0X2NvbWJv
X2J1Zl90cmFuc19lZHAoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJcmV0dXJuIGpz
bF9nZXRfY29tYm9fYnVmX3RyYW5zX2RwKGVuY29kZXIsIGNydGNfc3RhdGUsIG5fZW50cmllcyk7
CiB9CiAKLWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKK3N0YXRpYyBjb25zdCBz
dHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCiBqc2xfZ2V0X2NvbWJvX2J1Zl90cmFucyhzdHJ1
Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpjcnRjX3N0YXRlLAogCQkJaW50ICpuX2VudHJpZXMpCkBAIC0xNTg3LDcgKzE1ODcsNyBA
QCB0Z2xfZ2V0X2NvbWJvX2J1Zl90cmFuc19lZHAoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29k
ZXIsCiAJcmV0dXJuIHRnbF9nZXRfY29tYm9fYnVmX3RyYW5zX2RwKGVuY29kZXIsIGNydGNfc3Rh
dGUsIG5fZW50cmllcyk7CiB9CiAKLWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoK
K3N0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCiB0Z2xfZ2V0X2NvbWJv
X2J1Zl90cmFucyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJCWNvbnN0IHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCQkJaW50ICpuX2VudHJpZXMpCkBAIC0x
NjIzLDcgKzE2MjMsNyBAQCB0Z2xfZ2V0X2RrbF9idWZfdHJhbnNfZHAoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIsCiAJfQogfQogCi1jb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFu
cyAqCitzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgogdGdsX2dldF9k
a2xfYnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkgICAgICBjb25z
dCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJICAgICAgaW50ICpuX2Vu
dHJpZXMpCkBAIC0xNjM5LDI4ICsxNjM5LDEwIEBAIGludCBpbnRlbF9kZGlfaGRtaV9udW1fZW50
cmllcyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJCSAgICAgICBpbnQgKmRlZmF1
bHRfZW50cnkpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkx
NShlbmNvZGVyLT5iYXNlLmRldik7Ci0JZW51bSBwaHkgcGh5ID0gaW50ZWxfcG9ydF90b19waHko
ZGV2X3ByaXYsIGVuY29kZXItPnBvcnQpOwotCWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3Ry
YW5zICpkZGlfdHJhbnNsYXRpb25zID0gTlVMTDsKKwljb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1
Zl90cmFucyAqZGRpX3RyYW5zbGF0aW9uczsKIAlpbnQgbl9lbnRyaWVzOwogCi0JaWYgKERJU1BM
QVlfVkVSKGRldl9wcml2KSA+PSAxMikgewotCQlpZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9w
cml2LCBwaHkpKQotCQkJZGRpX3RyYW5zbGF0aW9ucyA9IHRnbF9nZXRfY29tYm9fYnVmX3RyYW5z
X2hkbWkoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7Ci0JCWVsc2UKLQkJCWRkaV90
cmFuc2xhdGlvbnMgPSB0Z2xfZ2V0X2RrbF9idWZfdHJhbnNfaGRtaShlbmNvZGVyLCBjcnRjX3N0
YXRlLCAmbl9lbnRyaWVzKTsKLQl9IGVsc2UgaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA9PSAx
MSkgewotCQlpZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKQotCQkJZGRpX3Ry
YW5zbGF0aW9ucyA9IGljbF9nZXRfY29tYm9fYnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgY3J0Y19z
dGF0ZSwgJm5fZW50cmllcyk7Ci0JCWVsc2UKLQkJCWRkaV90cmFuc2xhdGlvbnMgPSBpY2xfZ2V0
X21nX2J1Zl90cmFuc19oZG1pKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwotCX0g
ZWxzZSBpZiAoSVNfQ0FOTk9OTEFLRShkZXZfcHJpdikpIHsKLQkJZGRpX3RyYW5zbGF0aW9ucyA9
IGNubF9nZXRfYnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgJm5fZW50cmllcyk7Ci0JfSBlbHNlIGlm
IChJU19HRU1JTklMQUtFKGRldl9wcml2KSB8fCBJU19CUk9YVE9OKGRldl9wcml2KSkgewotCQlk
ZGlfdHJhbnNsYXRpb25zID0gYnh0X2dldF9idWZfdHJhbnNfaGRtaShlbmNvZGVyLCAmbl9lbnRy
aWVzKTsKLQl9IGVsc2UgaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA9PSA5IHx8Ci0JCSAgIElT
X0JST0FEV0VMTChkZXZfcHJpdikgfHwgSVNfSEFTV0VMTChkZXZfcHJpdikpIHsKLQkJZGRpX3Ry
YW5zbGF0aW9ucyA9IGhzd19nZXRfYnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgJm5fZW50cmllcyk7
Ci0JfQorCWRkaV90cmFuc2xhdGlvbnMgPSBlbmNvZGVyLT5nZXRfYnVmX3RyYW5zKGVuY29kZXIs
IGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwogCiAJaWYgKGRybV9XQVJOX09OKCZkZXZfcHJpdi0+
ZHJtLCAhZGRpX3RyYW5zbGF0aW9ucykpIHsKIAkJKmRlZmF1bHRfZW50cnkgPSAwOwpAQCAtMTY3
MSwzICsxNjUzLDMxIEBAIGludCBpbnRlbF9kZGlfaGRtaV9udW1fZW50cmllcyhzdHJ1Y3QgaW50
ZWxfZW5jb2RlciAqZW5jb2RlciwKIAogCXJldHVybiBuX2VudHJpZXM7CiB9CisKK3ZvaWQgaW50
ZWxfZGRpX2J1Zl90cmFuc19pbml0KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQorewor
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRl
dik7CisJZW51bSBwaHkgcGh5ID0gaW50ZWxfcG9ydF90b19waHkoaTkxNSwgZW5jb2Rlci0+cG9y
dCk7CisKKwlpZiAoRElTUExBWV9WRVIoaTkxNSkgPj0gMTIpIHsKKwkJaWYgKGludGVsX3BoeV9p
c19jb21ibyhpOTE1LCBwaHkpKQorCQkJZW5jb2Rlci0+Z2V0X2J1Zl90cmFucyA9IHRnbF9nZXRf
Y29tYm9fYnVmX3RyYW5zOworCQllbHNlCisJCQllbmNvZGVyLT5nZXRfYnVmX3RyYW5zID0gdGds
X2dldF9ka2xfYnVmX3RyYW5zOworCX0gZWxzZSBpZiAoRElTUExBWV9WRVIoaTkxNSkgPT0gMTEp
IHsKKwkJaWYgKElTX1BMQVRGT1JNKGk5MTUsIElOVEVMX0pBU1BFUkxBS0UpKQorCQkJZW5jb2Rl
ci0+Z2V0X2J1Zl90cmFucyA9IGpzbF9nZXRfY29tYm9fYnVmX3RyYW5zOworCQllbHNlIGlmIChJ
U19QTEFURk9STShpOTE1LCBJTlRFTF9FTEtIQVJUTEFLRSkpCisJCQllbmNvZGVyLT5nZXRfYnVm
X3RyYW5zID0gZWhsX2dldF9jb21ib19idWZfdHJhbnM7CisJCWVsc2UgaWYgKGludGVsX3BoeV9p
c19jb21ibyhpOTE1LCBwaHkpKQorCQkJZW5jb2Rlci0+Z2V0X2J1Zl90cmFucyA9IGljbF9nZXRf
Y29tYm9fYnVmX3RyYW5zOworCQllbHNlCisJCQllbmNvZGVyLT5nZXRfYnVmX3RyYW5zID0gaWNs
X2dldF9tZ19idWZfdHJhbnM7CisJfSBlbHNlIGlmIChJU19DQU5OT05MQUtFKGk5MTUpKSB7CisJ
CWVuY29kZXItPmdldF9idWZfdHJhbnMgPSBjbmxfZ2V0X2J1Zl90cmFuczsKKwl9IGVsc2UgaWYg
KElTX0dFTUlOSUxBS0UoaTkxNSkgfHwgSVNfQlJPWFRPTihpOTE1KSkgeworCQllbmNvZGVyLT5n
ZXRfYnVmX3RyYW5zID0gYnh0X2dldF9idWZfdHJhbnM7CisJfSBlbHNlIHsKKwkJZW5jb2Rlci0+
Z2V0X2J1Zl90cmFucyA9IGhzd19nZXRfYnVmX3RyYW5zOworCX0KK30KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGlfYnVmX3RyYW5zLmgKaW5kZXggOTQwMTQw
ZTY0Yzc2Li41ZjQ2YWYzNjc5NGIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5oCkBAIC02NSw0NCArNjUsNyBAQCBpbnQgaW50ZWxf
ZGRpX2hkbWlfbnVtX2VudHJpZXMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQkg
ICAgICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJCQkgICAg
ICAgaW50ICpkZWZhdWx0X2VudHJ5KTsKIAotY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJh
bnMgKgotaHN3X2dldF9idWZfdHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCi0J
CSAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCi0JCSAgaW50ICpu
X2VudHJpZXMpOwordm9pZCBpbnRlbF9kZGlfYnVmX3RyYW5zX2luaXQoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIpOwogCi1jb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCi1i
eHRfZ2V0X2J1Zl90cmFucyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKLQkJICBjb25z
dCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKLQkJICBpbnQgKm5fZW50cmll
cyk7Ci0KLWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKLXRnbF9nZXRfY29tYm9f
YnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAotCQkJY29uc3Qgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCi0JCQlpbnQgKm5fZW50cmllcyk7Ci1jb25z
dCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCi10Z2xfZ2V0X2RrbF9idWZfdHJhbnMoc3Ry
dWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCi0JCSAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlICpjcnRjX3N0YXRlLAotCQkgICAgICBpbnQgKm5fZW50cmllcyk7Ci1jb25zdCBz
dHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCi1qc2xfZ2V0X2NvbWJvX2J1Zl90cmFucyhzdHJ1
Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKLQkJCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpjcnRjX3N0YXRlLAotCQkJaW50ICpuX2VudHJpZXMpOwotY29uc3Qgc3RydWN0IGludGVs
X2RkaV9idWZfdHJhbnMgKgotZWhsX2dldF9jb21ib19idWZfdHJhbnMoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIsCi0JCQljb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19z
dGF0ZSwKLQkJCWludCAqbl9lbnRyaWVzKTsKLWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3Ry
YW5zICoKLWljbF9nZXRfY29tYm9fYnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNv
ZGVyLAotCQkJY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCi0JCQlp
bnQgKm5fZW50cmllcyk7Ci1jb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCi1pY2xf
Z2V0X21nX2J1Zl90cmFucyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKLQkJICAgICBj
b25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKLQkJICAgICBpbnQgKm5f
ZW50cmllcyk7Ci0KLWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKLWNubF9nZXRf
YnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAotCQkgIGNvbnN0IHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAotCQkgIGludCAqbl9lbnRyaWVzKTsKIAog
I2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eV90eXBlcy5oCmluZGV4IGUyZTcwN2M0ZGZmNS4uMzQ1MWQ3ZDY1NzBkIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAorKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaApAQCAtNDks
NiArNDksNyBAQAogCiBzdHJ1Y3QgZHJtX3ByaW50ZXI7CiBzdHJ1Y3QgX19pbnRlbF9nbG9iYWxf
b2Jqc19zdGF0ZTsKK3N0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zOwogCiAvKgogICogRGlzcGxh
eSByZWxhdGVkIHN0dWZmCkBAIC0yNjAsNiArMjYxLDkgQEAgc3RydWN0IGludGVsX2VuY29kZXIg
ewogCSAqIFJldHVybnMgd2hldGhlciB0aGUgcG9ydCBjbG9jayBpcyBlbmFibGVkIG9yIG5vdC4K
IAkgKi8KIAlib29sICgqaXNfY2xvY2tfZW5hYmxlZCkoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIpOworCWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICooKmdldF9idWZfdHJh
bnMpKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAorCQkJCQkJCSAgIGNvbnN0IHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAorCQkJCQkJCSAgIGludCAqbl9lbnRyaWVz
KTsKIAllbnVtIGhwZF9waW4gaHBkX3BpbjsKIAllbnVtIGludGVsX2Rpc3BsYXlfcG93ZXJfZG9t
YWluIHBvd2VyX2RvbWFpbjsKIAkvKiBmb3IgY29tbXVuaWNhdGlvbiB3aXRoIGF1ZGlvIGNvbXBv
bmVudDsgcHJvdGVjdGVkIGJ5IGF2X211dGV4ICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZkaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9mZGkuYwppbmRleCAyMjM3NjIwMjBhZmUuLmI2MWY2Yjc0ZjgxYSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mZGkuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZkaS5jCkBAIC00LDcgKzQsNiBAQAogICovCiAj
aW5jbHVkZSAiaW50ZWxfYXRvbWljLmgiCiAjaW5jbHVkZSAiaW50ZWxfZGRpLmgiCi0jaW5jbHVk
ZSAiaW50ZWxfZGRpX2J1Zl90cmFucy5oIgogI2luY2x1ZGUgImludGVsX2Rpc3BsYXlfdHlwZXMu
aCIKICNpbmNsdWRlICJpbnRlbF9mZGkuaCIKIApAQCAtNTY4LDcgKzU2Nyw3IEBAIHZvaWQgaHN3
X2ZkaV9saW5rX3RyYWluKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCXUzMiB0ZW1w
LCBpLCByeF9jdGxfdmFsOwogCWludCBuX2VudHJpZXM7CiAKLQloc3dfZ2V0X2J1Zl90cmFucyhl
bmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKKwllbmNvZGVyLT5nZXRfYnVmX3RyYW5z
KGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwogCiAJaHN3X3ByZXBhcmVfZHBfZGRp
X2J1ZmZlcnMoZW5jb2RlciwgY3J0Y19zdGF0ZSk7CiAKLS0gCjIuMjYuMwoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlz
dApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 467642791B
	for <lists+intel-gfx@lfdr.de>; Thu, 23 May 2019 11:21:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 95BA089D58;
	Thu, 23 May 2019 09:21:21 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2916A89D58
 for <intel-gfx@lists.freedesktop.org>; Thu, 23 May 2019 09:21:20 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 23 May 2019 02:21:19 -0700
X-ExtLoop1: 1
Received: from dmironox-mobl5.ccr.corp.intel.com (HELO [10.252.20.122])
 ([10.252.20.122])
 by orsmga005.jf.intel.com with ESMTP; 23 May 2019 02:21:18 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20190523064933.23604-1-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <d482e1a9-a485-d513-bb7d-cb2e39f7bb24@linux.intel.com>
Date: Thu, 23 May 2019 10:21:17 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <20190523064933.23604-1-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH] drm/i915/gtt: Always acquire struct_mutex
 for gen6_ppgtt_cleanup
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDIzLzA1LzIwMTkgMDc6NDksIENocmlzIFdpbHNvbiB3cm90ZToKPiBXZSByZWFycmFuZ2Vk
IHRoZSB2bV9kZXN0cm95X2lvY3RsIHRvIGF2b2lkIHRha2luZyBzdHJ1Y3RfbXV0ZXgsIGxpdHRs
ZQo+IHJlYWxpc2luZyB0aGF0IGJ1cmllZCB1bmRlcm5lYXRoIHRoZSBnZW42IHBwZ3R0IHJlbGVh
c2UgcGF0aCB3YXMgYQo+IHN0cnVjdF9tdXRleCByZXF1aXJlbWVudCAodG8gcmVtb3ZlIGl0cyBH
R1RUIHZtYSkuIFVudGlsIHRoYXQKPiBzdHJ1Y3RfbXV0ZXggaXMgdmFucXVpc2hlZCwgdGFrZSBh
IGRldG91ciBpbiBnZW42X3BwZ3R0X2NsZWFudXAgdG8gZG8KPiB0aGUgaTkxNV92bWFfZGVzdHJv
eSBmcm9tIGluc2lkZSBhIHdvcmtlciB1bmRlciB0aGUgc3RydWN0X211dGV4Lgo+IAo+IDw0PiBb
MjU3Ljc0MDE2MF0gV0FSTl9PTihkZWJ1Z19sb2NrcyAmJiAhbG9ja19pc19oZWxkKCYoJnZtYS0+
dm0tPmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpLT5kZXBfbWFwKSkKPiA8ND4gWzI1Ny43NDAyMTNd
IFdBUk5JTkc6IENQVTogMyBQSUQ6IDE1MDcgYXQgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92
bWEuYzo4NDEgaTkxNV92bWFfZGVzdHJveSsweDFhZS8weDNhMCBbaTkxNV0KPiA8ND4gWzI1Ny43
NDAyMTRdIE1vZHVsZXMgbGlua2VkIGluOiBzbmRfaGRhX2NvZGVjX2hkbWkgaTkxNSB4ODZfcGtn
X3RlbXBfdGhlcm1hbCBtZWlfaGRjcCBjb3JldGVtcCBjcmN0MTBkaWZfcGNsbXVsIGNyYzMyX3Bj
bG11bCBnaGFzaF9jbG11bG5pX2ludGVsIHNuZF9oZGFfY29kZWNfcmVhbHRlayBzbmRfaGRhX2Nv
ZGVjX2dlbmVyaWMgc25kX2hkYV9pbnRlbCBzbmRfaGRhX2NvZGVjIHNuZF9od2RlcCBzbmRfaGRh
X2NvcmUgcjgxNjkgcmVhbHRlayBzbmRfcGNtIG1laV9tZSBtZWkgcHJpbWVfbnVtYmVycyBscGNf
aWNoCj4gPDQ+IFsyNTcuNzQwMjI0XSBDUFU6IDMgUElEOiAxNTA3IENvbW06IGdlbV92bV9jcmVh
dGUgVGFpbnRlZDogRyAgICAgVSAgICAgICAgICAgIDUuMi4wLXJjMS1DSS1DSV9EUk1fNjExOCsg
IzEKPiA8ND4gWzI1Ny43NDAyMjVdIEhhcmR3YXJlIG5hbWU6IE1TSSBNUy03OTI0L1o5N00tRzQz
KE1TLTc5MjQpLCBCSU9TIFYxLjEyIDAyLzE1LzIwMTYKPiA8ND4gWzI1Ny43NDAyNDldIFJJUDog
MDAxMDppOTE1X3ZtYV9kZXN0cm95KzB4MWFlLzB4M2EwIFtpOTE1XQo+IDw0PiBbMjU3Ljc0MDI1
MF0gQ29kZTogMDAgMDAgMDAgNDggODEgYzcgYzggMDAgMDAgMDAgZTggZWQgMDggZjAgZTAgODUg
YzAgMGYgODUgNzggZmUgZmYgZmYgNDggYzcgYzYgZTggZWMgMzAgYTAgNDggYzcgYzcgZGEgNTUg
MzMgYTAgZTggNDIgOGMgZTkgZTAgPDBmPiAwYiA4YiA4MyA0MCAwMSAwMCAwMCA4NSBjMCAwZiA4
NCA2MyBmZSBmZiBmZiA0OCBjNyBjMSBjMSA1OCAzMwo+IDw0PiBbMjU3Ljc0MDI1MV0gUlNQOiAw
MDE4OmZmZmZjOTAwMDBhYWZjNjggRUZMQUdTOiAwMDAxMDI4Mgo+IDw0PiBbMjU3Ljc0MDI1Ml0g
UkFYOiAwMDAwMDAwMDAwMDAwMDAwIFJCWDogZmZmZjg4ODNmNzk1Nzg0MCBSQ1g6IDAwMDAwMDAw
MDAwMDAwMDMKPiA8ND4gWzI1Ny43NDAyNTNdIFJEWDogMDAwMDAwMDAwMDAwMDA0NiBSU0k6IDAw
MDAwMDAwMDAwMDAwMDYgUkRJOiBmZmZmZmZmZjgyMTJkMWI5Cj4gPDQ+IFsyNTcuNzQwMjU0XSBS
QlA6IGZmZmZjOTAwMDBhYWZjYzggUjA4OiAwMDAwMDAwMDAwMDAwMDAwIFIwOTogMDAwMDAwMDAw
MDAwMDAwMAo+IDw0PiBbMjU3Ljc0MDI1NV0gUjEwOiAwMDAwMDAwMDAwMDAwMDAwIFIxMTogMDAw
MDAwMDAwMDAwMDAwMCBSMTI6IGZmZmY4ODgzZjRkNWMyYTgKPiA8ND4gWzI1Ny43NDAyNTZdIFIx
MzogZmZmZjg4ODNmNGQ1ZDY4MCBSMTQ6IGZmZmY4ODgzZjRkNWM2NjggUjE1OiBmZmZmODg4M2Y0
ZDVjMmYwCj4gPDQ+IFsyNTcuNzQwMjU3XSBGUzogIDAwMDA3Zjc3N2ZhOGZlNDAoMDAwMCkgR1M6
ZmZmZjg4ODQwZjc4MDAwMCgwMDAwKSBrbmxHUzowMDAwMDAwMDAwMDAwMDAwCj4gPDQ+IFsyNTcu
NzQwMjU4XSBDUzogIDAwMTAgRFM6IDAwMDAgRVM6IDAwMDAgQ1IwOiAwMDAwMDAwMDgwMDUwMDMz
Cj4gPDQ+IFsyNTcuNzQwMjU5XSBDUjI6IDAwMDA3Zjc3N2Y2NTIyYjAgQ1IzOiAwMDAwMDAwM2M2
MTJhMDA2IENSNDogMDAwMDAwMDAwMDE2MDZlMAo+IDw0PiBbMjU3Ljc0MDI2MF0gQ2FsbCBUcmFj
ZToKPiA8ND4gWzI1Ny43NDAyODNdICBnZW42X3BwZ3R0X2NsZWFudXArMHgyNS8weDYwIFtpOTE1
XQo+IDw0PiBbMjU3Ljc0MDMwNl0gIGk5MTVfcHBndHRfcmVsZWFzZSsweDEwMi8weDI5MCBbaTkx
NV0KPiA8ND4gWzI1Ny43NDAzMzBdICBpOTE1X2dlbV92bV9kZXN0cm95X2lvY3RsKzB4N2MvMHhh
MCBbaTkxNV0KPiA8ND4gWzI1Ny43NDAzNzZdICA/IGk5MTVfZ2VtX3ZtX2NyZWF0ZV9pb2N0bCsw
eDE2MC8weDE2MCBbaTkxNV0KPiA8ND4gWzI1Ny43NDAzNzldICBkcm1faW9jdGxfa2VybmVsKzB4
ODMvMHhmMAo+IDw0PiBbMjU3Ljc0MDM4Ml0gIGRybV9pb2N0bCsweDJmMy8weDNiMAo+IDw0PiBb
MjU3Ljc0MDQyMl0gID8gaTkxNV9nZW1fdm1fY3JlYXRlX2lvY3RsKzB4MTYwLzB4MTYwIFtpOTE1
XQo+IDw0PiBbMjU3Ljc0MDQyNl0gID8gX3Jhd19zcGluX3VubG9ja19pcnFyZXN0b3JlKzB4Mzkv
MHg2MAo+IDw0PiBbMjU3Ljc0MDQzMF0gIGRvX3Zmc19pb2N0bCsweGEwLzB4NmUwCj4gPDQ+IFsy
NTcuNzQwNDMzXSAgPyBsb2NrX2FjcXVpcmUrMHhhNi8weDFjMAo+IDw0PiBbMjU3Ljc0MDQzNl0g
ID8gX190YXNrX3BpZF9ucl9ucysweGI5LzB4MWYwCj4gPDQ+IFsyNTcuNzQwNDM5XSAga3N5c19p
b2N0bCsweDM1LzB4NjAKPiA8ND4gWzI1Ny43NDA0NDFdICBfX3g2NF9zeXNfaW9jdGwrMHgxMS8w
eDIwCj4gPDQ+IFsyNTcuNzQwNDQzXSAgZG9fc3lzY2FsbF82NCsweDU1LzB4MWMwCj4gPDQ+IFsy
NTcuNzQwNDQ1XSAgZW50cnlfU1lTQ0FMTF82NF9hZnRlcl9od2ZyYW1lKzB4NDkvMHhiZQo+IAo+
IFJlZmVyZW5jZXM6IGUwNjk1ZGI3Mjk4ZSAoImRybS9pOTE1OiBDcmVhdGUvZGVzdHJveSBWTSAo
cHBHVFQpIGZvciB1c2Ugd2l0aCBjb250ZXh0cyIpCj4gRml4ZXM6IDdmM2YzMTdhNjZjYSAoImRy
bS9pOTE1OiBSZXN0b3JlIGNvbnRyb2wgb3ZlciBwcGd0dCBmb3IgY29udGV4dCBjcmVhdGlvbiBB
QkkiKQo+IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNv
LnVrPgo+IENjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgo+IC0t
LQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMgfCAzMiArKysrKysrKysr
KysrKysrKysrKysrKysrKystLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0
LmggfCAgMiArKwo+ICAgMiBmaWxlcyBjaGFuZ2VkLCAzMiBpbnNlcnRpb25zKCspLCAyIGRlbGV0
aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9n
dHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCj4gaW5kZXggOWVkNDFh
ZWZiNDU2Li41YTM1MDI1MTc2NmEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW1fZ3R0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQu
Ywo+IEBAIC0xODI4LDExICsxODI4LDMzIEBAIHN0YXRpYyB2b2lkIGdlbjZfcHBndHRfZnJlZV9w
ZChzdHJ1Y3QgZ2VuNl9od19wcGd0dCAqcHBndHQpCj4gICAJCQlmcmVlX3B0KCZwcGd0dC0+YmFz
ZS52bSwgcHQpOwo+ICAgfQo+ICAgCj4gK3N0cnVjdCBnZW42X3BwZ3R0X2NsZWFudXBfd29yayB7
Cj4gKwlzdHJ1Y3Qgd29ya19zdHJ1Y3QgYmFzZTsKPiArCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOwo+
ICt9Owo+ICsKPiArc3RhdGljIHZvaWQgZ2VuNl9wcGd0dF9jbGVhbnVwX3dvcmsoc3RydWN0IHdv
cmtfc3RydWN0ICp3cmspCj4gK3sKPiArCXN0cnVjdCBnZW42X3BwZ3R0X2NsZWFudXBfd29yayAq
d29yayA9Cj4gKwkJY29udGFpbmVyX29mKHdyaywgdHlwZW9mKCp3b3JrKSwgYmFzZSk7Cj4gKwlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHdvcmstPnZtYS0+dm0tPmk5MTU7CgpEb2Vz
IHRoZSBzZXF1ZW5jZSBuZWVkIGFuIGV4dHJhIHJlZmVyZW5jZSBvbiBwcGd0dCBmb3IgZGVyZWZl
cmVuY2luZyB0aGUgCnZtIGhlcmU/IEFsdGVybmF0aXZlbHkgc3RvcmluZyBpOTE1IGluIHRoZSB3
b3JrIHN0cnVjdCBjb3VsZCB3b3JrIGFyb3VuZCAKdGhhdC4KClJlZ2FyZHMsCgpUdnJ0a28KCj4g
Kwo+ICsJbXV0ZXhfbG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7Cj4gKwlpOTE1X3ZtYV9k
ZXN0cm95KHdvcmstPnZtYSk7Cj4gKwltdXRleF91bmxvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0
ZXgpOwo+ICsKPiArCWtmcmVlKHdvcmspOwo+ICt9Cj4gKwo+ICAgc3RhdGljIHZvaWQgZ2VuNl9w
cGd0dF9jbGVhbnVwKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtKQo+ICAgewo+ICAgCXN0
cnVjdCBnZW42X2h3X3BwZ3R0ICpwcGd0dCA9IHRvX2dlbjZfcHBndHQoaTkxNV92bV90b19wcGd0
dCh2bSkpOwo+ICsJc3RydWN0IGdlbjZfcHBndHRfY2xlYW51cF93b3JrICp3b3JrID0gcHBndHQt
Pndvcms7Cj4gICAKPiAtCWk5MTVfdm1hX2Rlc3Ryb3kocHBndHQtPnZtYSk7Cj4gKwkvKiBGSVhN
RSByZW1vdmUgdGhlIHN0cnVjdF9tdXRleCB0byBicmluZyB0aGUgbG9ja2luZyB1bmRlciBjb250
cm9sICovCj4gKwlJTklUX1dPUksoJndvcmstPmJhc2UsIGdlbjZfcHBndHRfY2xlYW51cF93b3Jr
KTsKPiArCXdvcmstPnZtYSA9IHBwZ3R0LT52bWE7Cj4gKwlzY2hlZHVsZV93b3JrKCZ3b3JrLT5i
YXNlKTsKPiAgIAo+ICAgCWdlbjZfcHBndHRfZnJlZV9wZChwcGd0dCk7Cj4gICAJZ2VuNl9wcGd0
dF9mcmVlX3NjcmF0Y2godm0pOwo+IEBAIC0yMDExLDkgKzIwMzMsMTMgQEAgc3RhdGljIHN0cnVj
dCBpOTE1X2h3X3BwZ3R0ICpnZW42X3BwZ3R0X2NyZWF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSkKPiAgIAo+ICAgCXBwZ3R0LT5iYXNlLnZtLnB0ZV9lbmNvZGUgPSBnZ3R0LT52bS5w
dGVfZW5jb2RlOwo+ICAgCj4gKwlwcGd0dC0+d29yayA9IGttYWxsb2Moc2l6ZW9mKCpwcGd0dC0+
d29yayksIEdGUF9LRVJORUwpOwo+ICsJaWYgKCFwcGd0dC0+d29yaykKPiArCQlnb3RvIGVycl9m
cmVlOwo+ICsKPiAgIAllcnIgPSBnZW42X3BwZ3R0X2luaXRfc2NyYXRjaChwcGd0dCk7Cj4gICAJ
aWYgKGVycikKPiAtCQlnb3RvIGVycl9mcmVlOwo+ICsJCWdvdG8gZXJyX3dvcms7Cj4gICAKPiAg
IAlwcGd0dC0+dm1hID0gcGRfdm1hX2NyZWF0ZShwcGd0dCwgR0VONl9QRF9TSVpFKTsKPiAgIAlp
ZiAoSVNfRVJSKHBwZ3R0LT52bWEpKSB7Cj4gQEAgLTIwMjUsNiArMjA1MSw4IEBAIHN0YXRpYyBz
dHJ1Y3QgaTkxNV9od19wcGd0dCAqZ2VuNl9wcGd0dF9jcmVhdGUoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTUpCj4gICAKPiAgIGVycl9zY3JhdGNoOgo+ICAgCWdlbjZfcHBndHRfZnJlZV9z
Y3JhdGNoKCZwcGd0dC0+YmFzZS52bSk7Cj4gK2Vycl93b3JrOgo+ICsJa2ZyZWUocHBndHQtPndv
cmspOwo+ICAgZXJyX2ZyZWU6Cj4gICAJa2ZyZWUocHBndHQpOwo+ICAgCXJldHVybiBFUlJfUFRS
KGVycik7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5o
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmgKPiBpbmRleCA5OGZjNzEwNTNm
N2MuLjM4NDk2MDM5NDU2YiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dlbV9ndHQuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5oCj4g
QEAgLTQyNCw2ICs0MjQsOCBAQCBzdHJ1Y3QgZ2VuNl9od19wcGd0dCB7Cj4gICAKPiAgIAl1bnNp
Z25lZCBpbnQgcGluX2NvdW50Owo+ICAgCWJvb2wgc2Nhbl9mb3JfdW51c2VkX3B0Owo+ICsKPiAr
CXN0cnVjdCBnZW42X3BwZ3R0X2NsZWFudXBfd29yayAqd29yazsKPiAgIH07Cj4gICAKPiAgICNk
ZWZpbmUgX190b19nZW42X3BwZ3R0KGJhc2UpIGNvbnRhaW5lcl9vZihiYXNlLCBzdHJ1Y3QgZ2Vu
Nl9od19wcGd0dCwgYmFzZSkKPiAKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
aW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 32DA789FE5
	for <lists+intel-gfx@lfdr.de>; Mon, 12 Aug 2019 15:41:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 838D46E51D;
	Mon, 12 Aug 2019 13:41:15 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A69356E523
 for <intel-gfx@lists.freedesktop.org>; Mon, 12 Aug 2019 13:41:09 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 17969928-1500050 
 for multiple; Mon, 12 Aug 2019 14:39:19 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 12 Aug 2019 14:39:11 +0100
Message-Id: <20190812133915.18824-14-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0.rc1
In-Reply-To: <20190812133915.18824-1-chris@chris-wilson.co.uk>
References: <20190812133915.18824-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 14/18] drm/i915: Remove logical HW ID
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2l0aCB0aGUgaW50cm9kdWN0aW9uIG9mIGN0eC0+ZW5naW5lc1tdIHdlIGFsbG93IG11bHRpcGxl
IGxvZ2ljYWwKY29udGV4dHMgdG8gYmUgdXNlZCBvbiB0aGUgc2FtZSBlbmdpbmUgKGUuZy4gd2l0
aCB2aXJ0dWFsIGVuZ2luZXMpLiBFYWNoCmxvZ2ljYWwgY29udGV4dCByZXF1aXJlcyBhIHVuaXF1
ZSB0YWcgaW4gb3JkZXIgZm9yIGNvbnRleHQtc3dpdGNoaW5nIHRvCm9jY3VyIGNvcnJlY3RseSBi
ZXR3ZWVuIHRoZW0uCgpXZSBvbmx5IG5lZWQgdG8ga2VlcCBhIHVuaXF1ZSB0YWcgZm9yIHRoZSBh
Y3RpdmUgbGlmZXRpbWUgb2YgdGhlCmNvbnRleHQsIGFuZCBmb3IgYXMgbG9uZyBhcyB3ZSBuZWVk
IHRvIGlkZW50aWZ5IHRoYXQgY29udGV4dC4gVGhlIEhXCnVzZXMgdGhlIHRhZyB0byBkZXRlcm1p
bmUgaWYgaXQgc2hvdWxkIHVzZSBhIGxpdGUtcmVzdG9yZSAod2h5IG5vdCB0aGUKTFJDQT8pIGFu
ZCBwYXNzZXMgdGhlIHRhZyBiYWNrIGZvciB2YXJpb3VzIHN0YXR1cyBpZGVudGlmaWVzLiBUaGUg
b25seQpzdGF0dXMgd2UgbmVlZCB0byB0cmFjayBpcyBmb3IgT0EsIHNvIHdoZW4gdXNpbmcgcGVy
Ziwgd2UgYXNzaWduIHRoZQpzcGVjaWZpYyBjb250ZXh0IGEgdW5pcXVlIHRhZy4KCk5vdGUgdGhh
dCBhbHRob3VnaCB3ZSBpdCBjYWxsIGl0IHRoZSBIVyBJRCwgdGhlIGhhcmR3YXJlIGNhbGxzIGl0
IHRoZSBTVwpJRCEgVGhhdCdzIGFsbCBpdCBpcyBhIGNvb2tpZSB3ZSBnaXZlIHRvIHRoZSBIVyB0
aGF0IGl0IHBhc3NlcyBiYWNrIG9uCmV2ZW50IG5vdGlmaWNhdGlvbnMgc28gd2UgY2FuIGlkZW50
aWZ5IHRoZSBzb3VyY2UgY29udGV4dC4KCkZpeGVzOiA5NzZiNTVmMGUxZGIgKCJkcm0vaTkxNTog
QWxsb3cgYSBjb250ZXh0IHRvIGRlZmluZSBpdHMgc2V0IG9mIGVuZ2luZXMiKQpTaWduZWQtb2Zm
LWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jICAgfCAxNDQgLS0tLS0tLS0tLS0t
LS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5oICAgfCAg
MTUgLS0KIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaCB8ICAx
OCAtLS0KIC4uLi9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYyB8ICAx
MyArLQogLi4uL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5jIHwgICA4
IC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaCB8ICAgMSAr
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaCAgfCAgIDQgKy0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAgICAgICAgICB8ICAyOSArKy0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3QuYyAgICAgICAgICAgICAgfCAgMTcgLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyAgICAgICAgICAgfCAgIDMgLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYyAgICAgICAgIHwgICA3ICstCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5oICAgICAgICAgfCAgIDEgLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMgICAgICAgICAgICAgIHwgIDMwICsrLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdHJhY2UuaCAgICAgICAgICAgICB8ICAzOCArKy0tLQog
Li4uL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYyAgIHwgICA0ICstCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV92bWEuYyAgICAgfCAgIDIgKy0KIDE2
IGZpbGVzIGNoYW5nZWQsIDUwIGluc2VydGlvbnMoKyksIDI4NCBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwppbmRleCBjZDFmZDJlNTQy
M2EuLjc3NGEzYWM4NTNhOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
Y29udGV4dC5jCkBAIC0xNjcsOTUgKzE2Nyw2IEBAIGxvb2t1cF91c2VyX2VuZ2luZShzdHJ1Y3Qg
aTkxNV9nZW1fY29udGV4dCAqY3R4LAogCXJldHVybiBpOTE1X2dlbV9jb250ZXh0X2dldF9lbmdp
bmUoY3R4LCBpZHgpOwogfQogCi1zdGF0aWMgaW5saW5lIGludCBuZXdfaHdfaWQoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUsIGdmcF90IGdmcCkKLXsKLQl1bnNpZ25lZCBpbnQgbWF4Owot
Ci0JbG9ja2RlcF9hc3NlcnRfaGVsZCgmaTkxNS0+Y29udGV4dHMubXV0ZXgpOwotCi0JaWYgKElO
VEVMX0dFTihpOTE1KSA+PSAxMSkKLQkJbWF4ID0gR0VOMTFfTUFYX0NPTlRFWFRfSFdfSUQ7Ci0J
ZWxzZSBpZiAoVVNFU19HVUNfU1VCTUlTU0lPTihpOTE1KSkKLQkJLyoKLQkJICogV2hlbiB1c2lu
ZyBHdUMgaW4gcHJveHkgc3VibWlzc2lvbiwgR3VDIGNvbnN1bWVzIHRoZQotCQkgKiBoaWdoZXN0
IGJpdCBpbiB0aGUgY29udGV4dCBpZCB0byBpbmRpY2F0ZSBwcm94eSBzdWJtaXNzaW9uLgotCQkg
Ki8KLQkJbWF4ID0gTUFYX0dVQ19DT05URVhUX0hXX0lEOwotCWVsc2UKLQkJbWF4ID0gTUFYX0NP
TlRFWFRfSFdfSUQ7Ci0KLQlyZXR1cm4gaWRhX3NpbXBsZV9nZXQoJmk5MTUtPmNvbnRleHRzLmh3
X2lkYSwgMCwgbWF4LCBnZnApOwotfQotCi1zdGF0aWMgaW50IHN0ZWFsX2h3X2lkKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1KQotewotCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgs
ICpjbjsKLQlMSVNUX0hFQUQocGlubmVkKTsKLQlpbnQgaWQgPSAtRU5PU1BDOwotCi0JbG9ja2Rl
cF9hc3NlcnRfaGVsZCgmaTkxNS0+Y29udGV4dHMubXV0ZXgpOwotCi0JbGlzdF9mb3JfZWFjaF9l
bnRyeV9zYWZlKGN0eCwgY24sCi0JCQkJICZpOTE1LT5jb250ZXh0cy5od19pZF9saXN0LCBod19p
ZF9saW5rKSB7Ci0JCWlmIChhdG9taWNfcmVhZCgmY3R4LT5od19pZF9waW5fY291bnQpKSB7Ci0J
CQlsaXN0X21vdmVfdGFpbCgmY3R4LT5od19pZF9saW5rLCAmcGlubmVkKTsKLQkJCWNvbnRpbnVl
OwotCQl9Ci0KLQkJR0VNX0JVR19PTighY3R4LT5od19pZCk7IC8qIHBlcm1hLXBpbm5lZCBrZXJu
ZWwgY29udGV4dCAqLwotCQlsaXN0X2RlbF9pbml0KCZjdHgtPmh3X2lkX2xpbmspOwotCQlpZCA9
IGN0eC0+aHdfaWQ7Ci0JCWJyZWFrOwotCX0KLQotCS8qCi0JICogUmVtZW1iZXIgaG93IGZhciB3
ZSBnb3QgdXAgb24gdGhlIGxhc3QgcmVwb3NzZXNpb24gc2Nhbiwgc28gdGhlCi0JICogbGlzdCBp
cyBrZXB0IGluIGEgImxlYXN0IHJlY2VudGx5IHNjYW5uZWQiIG9yZGVyLgotCSAqLwotCWxpc3Rf
c3BsaWNlX3RhaWwoJnBpbm5lZCwgJmk5MTUtPmNvbnRleHRzLmh3X2lkX2xpc3QpOwotCXJldHVy
biBpZDsKLX0KLQotc3RhdGljIGludCBhc3NpZ25faHdfaWQoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUsIHVuc2lnbmVkIGludCAqb3V0KQotewotCWludCByZXQ7Ci0KLQlsb2NrZGVwX2Fz
c2VydF9oZWxkKCZpOTE1LT5jb250ZXh0cy5tdXRleCk7Ci0KLQkvKgotCSAqIFdlIHByZWZlciB0
byBzdGVhbC9zdGFsbCBvdXJzZWx2ZXMgYW5kIG91ciB1c2VycyBvdmVyIHRoYXQgb2YgdGhlCi0J
ICogZW50aXJlIHN5c3RlbS4gVGhhdCBtYXkgYmUgYSBsaXR0bGUgdW5mYWlyIHRvIG91ciB1c2Vy
cywgYW5kCi0JICogZXZlbiBodXJ0IGhpZ2ggcHJpb3JpdHkgY2xpZW50cy4gVGhlIGNob2ljZSBp
cyB3aGV0aGVyIHRvIG9vbWtpbGwKLQkgKiBzb21ldGhpbmcgZWxzZSwgb3Igc3RlYWwgYSBjb250
ZXh0IGlkLgotCSAqLwotCXJldCA9IG5ld19od19pZChpOTE1LCBHRlBfS0VSTkVMIHwgX19HRlBf
UkVUUllfTUFZRkFJTCB8IF9fR0ZQX05PV0FSTik7Ci0JaWYgKHVubGlrZWx5KHJldCA8IDApKSB7
Ci0JCXJldCA9IHN0ZWFsX2h3X2lkKGk5MTUpOwotCQlpZiAocmV0IDwgMCkgLyogb25jZSBhZ2Fp
biBmb3IgdGhlIGNvcnJlY3QgZXJybm8gY29kZSAqLwotCQkJcmV0ID0gbmV3X2h3X2lkKGk5MTUs
IEdGUF9LRVJORUwpOwotCQlpZiAocmV0IDwgMCkKLQkJCXJldHVybiByZXQ7Ci0JfQotCi0JKm91
dCA9IHJldDsKLQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIHZvaWQgcmVsZWFzZV9od19pZChzdHJ1
Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KQotewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpp
OTE1ID0gY3R4LT5pOTE1OwotCi0JaWYgKGxpc3RfZW1wdHkoJmN0eC0+aHdfaWRfbGluaykpCi0J
CXJldHVybjsKLQotCW11dGV4X2xvY2soJmk5MTUtPmNvbnRleHRzLm11dGV4KTsKLQlpZiAoIWxp
c3RfZW1wdHkoJmN0eC0+aHdfaWRfbGluaykpIHsKLQkJaWRhX3NpbXBsZV9yZW1vdmUoJmk5MTUt
PmNvbnRleHRzLmh3X2lkYSwgY3R4LT5od19pZCk7Ci0JCWxpc3RfZGVsX2luaXQoJmN0eC0+aHdf
aWRfbGluayk7Ci0JfQotCW11dGV4X3VubG9jaygmaTkxNS0+Y29udGV4dHMubXV0ZXgpOwotfQot
CiBzdGF0aWMgdm9pZCBfX2ZyZWVfZW5naW5lcyhzdHJ1Y3QgaTkxNV9nZW1fZW5naW5lcyAqZSwg
dW5zaWduZWQgaW50IGNvdW50KQogewogCXdoaWxlIChjb3VudC0tKSB7CkBAIC0zMTAsNyArMjIx
LDYgQEAgc3RhdGljIHZvaWQgaTkxNV9nZW1fY29udGV4dF9mcmVlKHN0cnVjdCBpOTE1X2dlbV9j
b250ZXh0ICpjdHgpCiAJbG9ja2RlcF9hc3NlcnRfaGVsZCgmY3R4LT5pOTE1LT5kcm0uc3RydWN0
X211dGV4KTsKIAlHRU1fQlVHX09OKCFpOTE1X2dlbV9jb250ZXh0X2lzX2Nsb3NlZChjdHgpKTsK
IAotCXJlbGVhc2VfaHdfaWQoY3R4KTsKIAlpZiAoY3R4LT52bSkKIAkJaTkxNV92bV9wdXQoY3R4
LT52bSk7CiAKQEAgLTM4MiwxMiArMjkyLDYgQEAgc3RhdGljIHZvaWQgY29udGV4dF9jbG9zZShz
dHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KQogCWk5MTVfZ2VtX2NvbnRleHRfc2V0X2Nsb3Nl
ZChjdHgpOwogCWN0eC0+ZmlsZV9wcml2ID0gRVJSX1BUUigtRUJBREYpOwogCi0JLyoKLQkgKiBU
aGlzIGNvbnRleHQgd2lsbCBuZXZlciBhZ2FpbiBiZSBhc3NpbmdlZCB0byBIVywgc28gd2UgY2Fu
Ci0JICogcmV1c2UgaXRzIElEIGZvciB0aGUgbmV4dCBjb250ZXh0LgotCSAqLwotCXJlbGVhc2Vf
aHdfaWQoY3R4KTsKLQogCS8qCiAJICogVGhlIExVVCB1c2VzIHRoZSBWTUEgYXMgYSBiYWNrcG9p
bnRlciB0byB1bnJlZiB0aGUgb2JqZWN0LAogCSAqIHNvIHdlIG5lZWQgdG8gY2xlYXIgdGhlIExV
VCBiZWZvcmUgd2UgY2xvc2UgYWxsIHRoZSBWTUEgKGluc2lkZQpAQCAtNDI2LDcgKzMzMCw2IEBA
IF9fY3JlYXRlX2NvbnRleHQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJUkNVX0lO
SVRfUE9JTlRFUihjdHgtPmVuZ2luZXMsIGUpOwogCiAJSU5JVF9SQURJWF9UUkVFKCZjdHgtPmhh
bmRsZXNfdm1hLCBHRlBfS0VSTkVMKTsKLQlJTklUX0xJU1RfSEVBRCgmY3R4LT5od19pZF9saW5r
KTsKIAogCS8qIE5COiBNYXJrIGFsbCBzbGljZXMgYXMgbmVlZGluZyBhIHJlbWFwIHNvIHRoYXQg
d2hlbiB0aGUgY29udGV4dCBmaXJzdAogCSAqIGxvYWRzIGl0IHdpbGwgcmVzdG9yZSB3aGF0ZXZl
ciByZW1hcCBzdGF0ZSBhbHJlYWR5IGV4aXN0cy4gSWYgdGhlcmUKQEAgLTU4MCwxOCArNDgzLDEx
IEBAIHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICoKIGk5MTVfZ2VtX2NvbnRleHRfY3JlYXRlX2tl
cm5lbChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgaW50IHByaW8pCiB7CiAJc3RydWN0
IGk5MTVfZ2VtX2NvbnRleHQgKmN0eDsKLQlpbnQgZXJyOwogCiAJY3R4ID0gaTkxNV9nZW1fY3Jl
YXRlX2NvbnRleHQoaTkxNSwgMCk7CiAJaWYgKElTX0VSUihjdHgpKQogCQlyZXR1cm4gY3R4Owog
Ci0JZXJyID0gaTkxNV9nZW1fY29udGV4dF9waW5faHdfaWQoY3R4KTsKLQlpZiAoZXJyKSB7Ci0J
CWRlc3Ryb3lfa2VybmVsX2NvbnRleHQoJmN0eCk7Ci0JCXJldHVybiBFUlJfUFRSKGVycik7Ci0J
fQotCiAJaTkxNV9nZW1fY29udGV4dF9jbGVhcl9iYW5uYWJsZShjdHgpOwogCWN0eC0+c2NoZWQu
cHJpb3JpdHkgPSBJOTE1X1VTRVJfUFJJT1JJVFkocHJpbyk7CiAKQEAgLTYzMCwxNSArNTI2LDYg
QEAgaW50IGk5MTVfZ2VtX2NvbnRleHRzX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2KQogCQlEUk1fRVJST1IoIkZhaWxlZCB0byBjcmVhdGUgZGVmYXVsdCBnbG9iYWwgY29u
dGV4dFxuIik7CiAJCXJldHVybiBQVFJfRVJSKGN0eCk7CiAJfQotCS8qCi0JICogRm9yIGVhc3kg
cmVjb2duaXNhYmxpdHksIHdlIHdhbnQgdGhlIGtlcm5lbCBjb250ZXh0IHRvIGJlIDAgYW5kIHRo
ZW4KLQkgKiBhbGwgdXNlciBjb250ZXh0cyB3aWxsIGhhdmUgbm9uLXplcm8gaHdfaWQuIEtlcm5l
bCBjb250ZXh0cyBhcmUKLQkgKiBwZXJtYW5lbnRseSBwaW5uZWQsIHNvIHRoYXQgd2UgbmV2ZXIg
c3VmZmVyIGEgc3RhbGwgYW5kIGNhbgotCSAqIHVzZSB0aGVtIGZyb20gYW55IGFsbG9jYXRpb24g
Y29udGV4dCAoZS5nLiBmb3IgZXZpY3Rpbmcgb3RoZXIKLQkgKiBjb250ZXh0cyBhbmQgZnJvbSBp
bnNpZGUgdGhlIHNocmlua2VyKS4KLQkgKi8KLQlHRU1fQlVHX09OKGN0eC0+aHdfaWQpOwotCUdF
TV9CVUdfT04oIWF0b21pY19yZWFkKCZjdHgtPmh3X2lkX3Bpbl9jb3VudCkpOwogCWRldl9wcml2
LT5rZXJuZWxfY29udGV4dCA9IGN0eDsKIAogCURSTV9ERUJVR19EUklWRVIoIiVzIGNvbnRleHQg
c3VwcG9ydCBpbml0aWFsaXplZFxuIiwKQEAgLTY1MiwxMCArNTM5LDYgQEAgdm9pZCBpOTE1X2dl
bV9jb250ZXh0c19maW5pKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCWxvY2tkZXBf
YXNzZXJ0X2hlbGQoJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwogCiAJZGVzdHJveV9rZXJuZWxf
Y29udGV4dCgmaTkxNS0+a2VybmVsX2NvbnRleHQpOwotCi0JLyogTXVzdCBmcmVlIGFsbCBkZWZl
cnJlZCBjb250ZXh0cyAodmlhIGZsdXNoX3dvcmtxdWV1ZSkgZmlyc3QgKi8KLQlHRU1fQlVHX09O
KCFsaXN0X2VtcHR5KCZpOTE1LT5jb250ZXh0cy5od19pZF9saXN0KSk7Ci0JaWRhX2Rlc3Ryb3ko
Jmk5MTUtPmNvbnRleHRzLmh3X2lkYSk7CiB9CiAKIHN0YXRpYyBpbnQgY29udGV4dF9pZHJfY2xl
YW51cChpbnQgaWQsIHZvaWQgKnAsIHZvaWQgKmRhdGEpCkBAIC0yMzMwLDMzICsyMjEzLDYgQEAg
aW50IGk5MTVfZ2VtX2NvbnRleHRfcmVzZXRfc3RhdHNfaW9jdGwoc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwKIAlyZXR1cm4gcmV0OwogfQogCi1pbnQgX19pOTE1X2dlbV9jb250ZXh0X3Bpbl9od19p
ZChzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KQotewotCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1ID0gY3R4LT5pOTE1OwotCWludCBlcnIgPSAwOwotCi0JbXV0ZXhfbG9jaygmaTkx
NS0+Y29udGV4dHMubXV0ZXgpOwotCi0JR0VNX0JVR19PTihpOTE1X2dlbV9jb250ZXh0X2lzX2Ns
b3NlZChjdHgpKTsKLQotCWlmIChsaXN0X2VtcHR5KCZjdHgtPmh3X2lkX2xpbmspKSB7Ci0JCUdF
TV9CVUdfT04oYXRvbWljX3JlYWQoJmN0eC0+aHdfaWRfcGluX2NvdW50KSk7Ci0KLQkJZXJyID0g
YXNzaWduX2h3X2lkKGk5MTUsICZjdHgtPmh3X2lkKTsKLQkJaWYgKGVycikKLQkJCWdvdG8gb3V0
X3VubG9jazsKLQotCQlsaXN0X2FkZF90YWlsKCZjdHgtPmh3X2lkX2xpbmssICZpOTE1LT5jb250
ZXh0cy5od19pZF9saXN0KTsKLQl9Ci0KLQlHRU1fQlVHX09OKGF0b21pY19yZWFkKCZjdHgtPmh3
X2lkX3Bpbl9jb3VudCkgPT0gfjB1KTsKLQlhdG9taWNfaW5jKCZjdHgtPmh3X2lkX3Bpbl9jb3Vu
dCk7Ci0KLW91dF91bmxvY2s6Ci0JbXV0ZXhfdW5sb2NrKCZpOTE1LT5jb250ZXh0cy5tdXRleCk7
Ci0JcmV0dXJuIGVycjsKLX0KLQogLyogR0VNIGNvbnRleHQtZW5naW5lcyBpdGVyYXRvcjogZm9y
X2VhY2hfZ2VtX2VuZ2luZSgpICovCiBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqCiBpOTE1X2dlbV9l
bmdpbmVzX2l0ZXJfbmV4dChzdHJ1Y3QgaTkxNV9nZW1fZW5naW5lc19pdGVyICppdCkKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmggYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5oCmluZGV4IDE3Njk3ODYwOGI2
Zi4uNTBiYzI3ZDMwYzAzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fY29udGV4dC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9j
b250ZXh0LmgKQEAgLTExMiwyMSArMTEyLDYgQEAgaTkxNV9nZW1fY29udGV4dF9jbGVhcl91c2Vy
X2VuZ2luZXMoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCkKIAljbGVhcl9iaXQoQ09OVEVY
VF9VU0VSX0VOR0lORVMsICZjdHgtPmZsYWdzKTsKIH0KIAotaW50IF9faTkxNV9nZW1fY29udGV4
dF9waW5faHdfaWQoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCk7Ci1zdGF0aWMgaW5saW5l
IGludCBpOTE1X2dlbV9jb250ZXh0X3Bpbl9od19pZChzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAq
Y3R4KQotewotCWlmIChhdG9taWNfaW5jX25vdF96ZXJvKCZjdHgtPmh3X2lkX3Bpbl9jb3VudCkp
Ci0JCXJldHVybiAwOwotCi0JcmV0dXJuIF9faTkxNV9nZW1fY29udGV4dF9waW5faHdfaWQoY3R4
KTsKLX0KLQotc3RhdGljIGlubGluZSB2b2lkIGk5MTVfZ2VtX2NvbnRleHRfdW5waW5faHdfaWQo
c3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCkKLXsKLQlHRU1fQlVHX09OKGF0b21pY19yZWFk
KCZjdHgtPmh3X2lkX3Bpbl9jb3VudCkgPT0gMHUpOwotCWF0b21pY19kZWMoJmN0eC0+aHdfaWRf
cGluX2NvdW50KTsKLX0KLQogc3RhdGljIGlubGluZSBib29sIGk5MTVfZ2VtX2NvbnRleHRfaXNf
a2VybmVsKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCiB7CiAJcmV0dXJuICFjdHgtPmZp
bGVfcHJpdjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9j
b250ZXh0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4
dF90eXBlcy5oCmluZGV4IDI2MGQ1OWNjM2RlOC4uODdiZTI3ODc3ZTIyIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dF90eXBlcy5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0X3R5cGVzLmgKQEAgLTE0Nywy
NCArMTQ3LDYgQEAgc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgewogI2RlZmluZSBDT05URVhUX0ZP
UkNFX1NJTkdMRV9TVUJNSVNTSU9OCTIKICNkZWZpbmUgQ09OVEVYVF9VU0VSX0VOR0lORVMJCTMK
IAotCS8qKgotCSAqIEBod19pZDogLSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbnRleHQK
LQkgKgotCSAqIFRoZSBoYXJkd2FyZSBuZWVkcyB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgY29u
dGV4dCBmb3IgYSBmZXcKLQkgKiBmdW5jdGlvbnMgbGlrZSBmYXVsdCByZXBvcnRpbmcsIFBBU0lE
LCBzY2hlZHVsaW5nLiBUaGUKLQkgKiAmZHJtX2k5MTVfcHJpdmF0ZS5jb250ZXh0X2h3X2lkYSBp
cyB1c2VkIHRvIGFzc2lnbiBhIHVucWl1ZQotCSAqIGlkIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhl
IGNvbnRleHQuCi0JICoKLQkgKiBAaHdfaWRfcGluX2NvdW50OiAtIG51bWJlciBvZiB0aW1lcyB0
aGlzIGNvbnRleHQgaGFkIGJlZW4gcGlubmVkCi0JICogZm9yIHVzZSAoc2hvdWxkIGJlLCBhdCBt
b3N0LCBvbmNlIHBlciBlbmdpbmUpLgotCSAqCi0JICogQGh3X2lkX2xpbms6IC0gYWxsIGNvbnRl
eHRzIHdpdGggYW4gYXNzaWduZWQgaWQgYXJlIHRyYWNrZWQKLQkgKiBmb3IgcG9zc2libGUgcmVw
b3NzZXNzaW9uLgotCSAqLwotCXVuc2lnbmVkIGludCBod19pZDsKLQlhdG9taWNfdCBod19pZF9w
aW5fY291bnQ7Ci0Jc3RydWN0IGxpc3RfaGVhZCBod19pZF9saW5rOwotCiAJc3RydWN0IG11dGV4
IG11dGV4OwogCiAJc3RydWN0IGk5MTVfc2NoZWRfYXR0ciBzY2hlZDsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0LmMKaW5kZXgg
ZGQ4N2U2Y2Q2MTJlLi5lNGZlYzM0MjI4YmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jCkBAIC00MTAsOSArNDEwLDkg
QEAgc3RhdGljIGludCBpZ3RfY3R4X2V4ZWModm9pZCAqYXJnKQogCiAJCQllcnIgPSBncHVfZmls
bChvYmosIGN0eCwgZW5naW5lLCBkdyk7CiAJCQlpZiAoZXJyKSB7Ci0JCQkJcHJfZXJyKCJGYWls
ZWQgdG8gZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGggZ3B1ICglcykgaW4gY3R4ICV1IFtm
dWxsLXBwZ3R0PyAlc10sIGVycj0lZFxuIiwKKwkJCQlwcl9lcnIoIkZhaWxlZCB0byBmaWxsIGR3
b3JkICVsdSBbJWx1LyVsdV0gd2l0aCBncHUgKCVzKSBbZnVsbC1wcGd0dD8gJXNdLCBlcnI9JWRc
biIsCiAJCQkJICAgICAgIG5kd29yZHMsIGR3LCBtYXhfZHdvcmRzKG9iaiksCi0JCQkJICAgICAg
IGVuZ2luZS0+bmFtZSwgY3R4LT5od19pZCwKKwkJCQkgICAgICAgZW5naW5lLT5uYW1lLAogCQkJ
CSAgICAgICB5ZXNubyghIWN0eC0+dm0pLCBlcnIpOwogCQkJCWdvdG8gb3V0X3VubG9jazsKIAkJ
CX0KQEAgLTUyOSw5ICs1MjksOSBAQCBzdGF0aWMgaW50IGlndF9zaGFyZWRfY3R4X2V4ZWModm9p
ZCAqYXJnKQogCiAJCQllcnIgPSBncHVfZmlsbChvYmosIGN0eCwgZW5naW5lLCBkdyk7CiAJCQlp
ZiAoZXJyKSB7Ci0JCQkJcHJfZXJyKCJGYWlsZWQgdG8gZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVd
IHdpdGggZ3B1ICglcykgaW4gY3R4ICV1IFtmdWxsLXBwZ3R0PyAlc10sIGVycj0lZFxuIiwKKwkJ
CQlwcl9lcnIoIkZhaWxlZCB0byBmaWxsIGR3b3JkICVsdSBbJWx1LyVsdV0gd2l0aCBncHUgKCVz
KSBbZnVsbC1wcGd0dD8gJXNdLCBlcnI9JWRcbiIsCiAJCQkJICAgICAgIG5kd29yZHMsIGR3LCBt
YXhfZHdvcmRzKG9iaiksCi0JCQkJICAgICAgIGVuZ2luZS0+bmFtZSwgY3R4LT5od19pZCwKKwkJ
CQkgICAgICAgZW5naW5lLT5uYW1lLAogCQkJCSAgICAgICB5ZXNubyghIWN0eC0+dm0pLCBlcnIp
OwogCQkJCWtlcm5lbF9jb250ZXh0X2Nsb3NlKGN0eCk7CiAJCQkJZ290byBvdXRfdGVzdDsKQEAg
LTEwOTgsMTAgKzEwOTgsOSBAQCBzdGF0aWMgaW50IGlndF9jdHhfcmVhZG9ubHkodm9pZCAqYXJn
KQogCiAJCQllcnIgPSBncHVfZmlsbChvYmosIGN0eCwgZW5naW5lLCBkdyk7CiAJCQlpZiAoZXJy
KSB7Ci0JCQkJcHJfZXJyKCJGYWlsZWQgdG8gZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGgg
Z3B1ICglcykgaW4gY3R4ICV1IFtmdWxsLXBwZ3R0PyAlc10sIGVycj0lZFxuIiwKKwkJCQlwcl9l
cnIoIkZhaWxlZCB0byBmaWxsIGR3b3JkICVsdSBbJWx1LyVsdV0gd2l0aCBncHUgKCVzKSBbZnVs
bC1wcGd0dD8gJXNdLCBlcnI9JWRcbiIsCiAJCQkJICAgICAgIG5kd29yZHMsIGR3LCBtYXhfZHdv
cmRzKG9iaiksCi0JCQkJICAgICAgIGVuZ2luZS0+bmFtZSwgY3R4LT5od19pZCwKLQkJCQkgICAg
ICAgeWVzbm8oISFjdHgtPnZtKSwgZXJyKTsKKwkJCQkgICAgICAgZW5naW5lLT5uYW1lLCB5ZXNu
byghIWN0eC0+dm0pLCBlcnIpOwogCQkJCWdvdG8gb3V0X3VubG9jazsKIAkJCX0KIApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRleHQuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmMKaW5kZXgg
YmU4OTc0Y2NmZjI0Li4wMTA0ZjE2YjEzMjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRleHQuYwpAQCAtMTMsNyArMTMsNiBAQCBtb2NrX2Nv
bnRleHQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiB7CiAJc3RydWN0IGk5MTVfZ2Vt
X2NvbnRleHQgKmN0eDsKIAlzdHJ1Y3QgaTkxNV9nZW1fZW5naW5lcyAqZTsKLQlpbnQgcmV0Owog
CiAJY3R4ID0ga3phbGxvYyhzaXplb2YoKmN0eCksIEdGUF9LRVJORUwpOwogCWlmICghY3R4KQpA
QCAtMzAsMTMgKzI5LDggQEAgbW9ja19jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpp
OTE1LAogCVJDVV9JTklUX1BPSU5URVIoY3R4LT5lbmdpbmVzLCBlKTsKIAogCUlOSVRfUkFESVhf
VFJFRSgmY3R4LT5oYW5kbGVzX3ZtYSwgR0ZQX0tFUk5FTCk7Ci0JSU5JVF9MSVNUX0hFQUQoJmN0
eC0+aHdfaWRfbGluayk7CiAJbXV0ZXhfaW5pdCgmY3R4LT5tdXRleCk7CiAKLQlyZXQgPSBpOTE1
X2dlbV9jb250ZXh0X3Bpbl9od19pZChjdHgpOwotCWlmIChyZXQgPCAwKQotCQlnb3RvIGVycl9l
bmdpbmVzOwotCiAJaWYgKG5hbWUpIHsKIAkJc3RydWN0IGk5MTVfcHBndHQgKnBwZ3R0OwogCkBA
IC01NCw4ICs0OCw2IEBAIG1vY2tfY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSwKIAogCXJldHVybiBjdHg7CiAKLWVycl9lbmdpbmVzOgotCWZyZWVfZW5naW5lcyhyY3VfYWNj
ZXNzX3BvaW50ZXIoY3R4LT5lbmdpbmVzKSk7CiBlcnJfZnJlZToKIAlrZnJlZShjdHgpOwogCXJl
dHVybiBOVUxMOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29u
dGV4dF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBl
cy5oCmluZGV4IGJmOWNlZGZjY2JmMC4uYTM1NzhlZjI0MDc5IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBlcy5oCkBAIC01OCw2ICs1OCw3IEBAIHN0cnVj
dCBpbnRlbF9jb250ZXh0IHsKIAogCXUzMiAqbHJjX3JlZ19zdGF0ZTsKIAl1NjQgbHJjX2Rlc2M7
CisJdTMyIGh3X3RhZzsKIAogCXVuc2lnbmVkIGludCBhY3RpdmVfY291bnQ7IC8qIHByb3RlY3Rl
ZCBieSB0aW1lbGluZS0+bXV0ZXggKi8KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9lbmdpbmVfdHlwZXMuaAppbmRleCA5OTY1YTMyNjAxZDYuLjAwNDZhYmVmMjk4ZCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKQEAgLTI3MywxMCAr
MjczLDEyIEBAIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgewogCXU4IHVhYmlfY2xhc3M7CiAJdTgg
dWFiaV9pbnN0YW5jZTsKIAorCXUzMiB1YWJpX2NhcGFiaWxpdGllczsKIAl1MzIgY29udGV4dF9z
aXplOwogCXUzMiBtbWlvX2Jhc2U7CiAKLQl1MzIgdWFiaV9jYXBhYmlsaXRpZXM7CisJdW5zaWdu
ZWQgaW50IGh3X3RhZzsKKyNkZWZpbmUgTlVNX0hXX1RBRyAoMjU2KQogCiAJc3RydWN0IHJiX25v
ZGUgdWFiaV9ub2RlOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCmluZGV4IDcxYzY5
MzgxYTFhYS4uOTQ3YmY5OTRkNTg2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9scmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpA
QCAtNDE1LDEyICs0MTUsOCBAQCBhc3NlcnRfcHJpb3JpdHlfcXVldWUoY29uc3Qgc3RydWN0IGk5
MTVfcmVxdWVzdCAqcHJldiwKIHN0YXRpYyB1NjQKIGxyY19kZXNjcmlwdG9yKHN0cnVjdCBpbnRl
bF9jb250ZXh0ICpjZSwgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogewotCXN0cnVj
dCBpOTE1X2dlbV9jb250ZXh0ICpjdHggPSBjZS0+Z2VtX2NvbnRleHQ7CiAJdTY0IGRlc2M7CiAK
LQlCVUlMRF9CVUdfT04oTUFYX0NPTlRFWFRfSFdfSUQgPiAoQklUKEdFTjhfQ1RYX0lEX1dJRFRI
KSkpOwotCUJVSUxEX0JVR19PTihHRU4xMV9NQVhfQ09OVEVYVF9IV19JRCA+IChCSVQoR0VOMTFf
U1dfQ1RYX0lEX1dJRFRIKSkpOwotCiAJZGVzYyA9IElOVEVMX0xFR0FDWV8zMkJfQ09OVEVYVDsK
IAlpZiAoaTkxNV92bV9pc180bHZsKGNlLT52bSkpCiAJCWRlc2MgPSBJTlRFTF9MRUdBQ1lfNjRC
X0NPTlRFWFQ7CkBAIC00MzgsMjAgKzQzNCwxMSBAQCBscmNfZGVzY3JpcHRvcihzdHJ1Y3QgaW50
ZWxfY29udGV4dCAqY2UsIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAkgKiBhbnl0
aGluZyBiZWxvdy4KIAkgKi8KIAlpZiAoSU5URUxfR0VOKGVuZ2luZS0+aTkxNSkgPj0gMTEpIHsK
LQkJR0VNX0JVR19PTihjdHgtPmh3X2lkID49IEJJVChHRU4xMV9TV19DVFhfSURfV0lEVEgpKTsK
LQkJZGVzYyB8PSAodTY0KWN0eC0+aHdfaWQgPDwgR0VOMTFfU1dfQ1RYX0lEX1NISUZUOwotCQkJ
CQkJCQkvKiBiaXRzIDM3LTQ3ICovCi0KIAkJZGVzYyB8PSAodTY0KWVuZ2luZS0+aW5zdGFuY2Ug
PDwgR0VOMTFfRU5HSU5FX0lOU1RBTkNFX1NISUZUOwogCQkJCQkJCQkvKiBiaXRzIDQ4LTUzICov
CiAKLQkJLyogVE9ETzogZGVjaWRlIHdoYXQgdG8gZG8gd2l0aCBTVyBjb3VudGVyIChiaXRzIDU1
LTYwKSAqLwotCiAJCWRlc2MgfD0gKHU2NCllbmdpbmUtPmNsYXNzIDw8IEdFTjExX0VOR0lORV9D
TEFTU19TSElGVDsKIAkJCQkJCQkJLyogYml0cyA2MS02MyAqLwotCX0gZWxzZSB7Ci0JCUdFTV9C
VUdfT04oY3R4LT5od19pZCA+PSBCSVQoR0VOOF9DVFhfSURfV0lEVEgpKTsKLQkJZGVzYyB8PSAo
dTY0KWN0eC0+aHdfaWQgPDwgR0VOOF9DVFhfSURfU0hJRlQ7CS8qIGJpdHMgMzItNTIgKi8KIAl9
CiAKIAlyZXR1cm4gZGVzYzsKQEAgLTU1NSw2ICs1NDIsMTUgQEAgX19leGVjbGlzdHNfc2NoZWR1
bGVfaW4oc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEpCiAKIAlpbnRlbF9jb250ZXh0X2dldChjZSk7
CiAKKwlpZiAoY2UtPmh3X3RhZykgeworCQljZS0+bHJjX2Rlc2MgfD0gKHU2NCljZS0+aHdfdGFn
IDw8IDMyOworCX0gZWxzZSB7CisJCWNlLT5scmNfZGVzYyAmPSB+R0VOTUFTS19VTEwoNDcsIDM3
KTsKKwkJY2UtPmxyY19kZXNjIHw9CisJCQkodTY0KShlbmdpbmUtPmh3X3RhZysrICUgTlVNX0hX
X1RBRykgPDwKKwkJCUdFTjExX1NXX0NUWF9JRF9TSElGVDsKKwl9CisKIAlpbnRlbF9ndF9wbV9n
ZXQoZW5naW5lLT5ndCk7CiAJZXhlY2xpc3RzX2NvbnRleHRfc3RhdHVzX2NoYW5nZShycSwgSU5U
RUxfQ09OVEVYVF9TQ0hFRFVMRV9JTik7CiAJaW50ZWxfZW5naW5lX2NvbnRleHRfaW4oZW5naW5l
KTsKQEAgLTE2MTcsNyArMTYxMyw2IEBAIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19jb250ZXh0X2Rl
c3Ryb3koc3RydWN0IGtyZWYgKmtyZWYpCiAKIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19jb250ZXh0
X3VucGluKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKIHsKLQlpOTE1X2dlbV9jb250ZXh0X3Vu
cGluX2h3X2lkKGNlLT5nZW1fY29udGV4dCk7CiAJaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChj
ZS0+c3RhdGUtPm9iaik7CiAJaW50ZWxfcmluZ19yZXNldChjZS0+cmluZywgY2UtPnJpbmctPnRh
aWwpOwogfQpAQCAtMTY2NywxOCArMTY2MiwxMiBAQCBfX2V4ZWNsaXN0c19jb250ZXh0X3Bpbihz
dHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCiAJCWdvdG8gdW5waW5fYWN0aXZlOwogCX0KIAotCXJl
dCA9IGk5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lkKGNlLT5nZW1fY29udGV4dCk7Ci0JaWYgKHJl
dCkKLQkJZ290byB1bnBpbl9tYXA7Ci0KIAljZS0+bHJjX2Rlc2MgPSBscmNfZGVzY3JpcHRvcihj
ZSwgZW5naW5lKTsKIAljZS0+bHJjX3JlZ19zdGF0ZSA9IHZhZGRyICsgTFJDX1NUQVRFX1BOICog
UEFHRV9TSVpFOwogCV9fZXhlY2xpc3RzX3VwZGF0ZV9yZWdfc3RhdGUoY2UsIGVuZ2luZSk7CiAK
IAlyZXR1cm4gMDsKIAotdW5waW5fbWFwOgotCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAoY2Ut
PnN0YXRlLT5vYmopOwogdW5waW5fYWN0aXZlOgogCWludGVsX2NvbnRleHRfYWN0aXZlX3JlbGVh
c2UoY2UpOwogZXJyOgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2t2bWd0
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3QuYwppbmRleCAyM2FhM2U1MGNiZjgu
Ljg5NWRkZmY3ZmE0MiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2t2bWd0
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2t2bWd0LmMKQEAgLTE1NjYsMjcgKzE1
NjYsMTAgQEAgdmdwdV9pZF9zaG93KHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZV9h
dHRyaWJ1dGUgKmF0dHIsCiAJcmV0dXJuIHNwcmludGYoYnVmLCAiXG4iKTsKIH0KIAotc3RhdGlj
IHNzaXplX3QKLWh3X2lkX3Nob3coc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlX2F0
dHJpYnV0ZSAqYXR0ciwKLQkgICBjaGFyICpidWYpCi17Ci0Jc3RydWN0IG1kZXZfZGV2aWNlICpt
ZGV2ID0gbWRldl9mcm9tX2RldihkZXYpOwotCi0JaWYgKG1kZXYpIHsKLQkJc3RydWN0IGludGVs
X3ZncHUgKnZncHUgPSAoc3RydWN0IGludGVsX3ZncHUgKikKLQkJCW1kZXZfZ2V0X2RydmRhdGEo
bWRldik7Ci0JCXJldHVybiBzcHJpbnRmKGJ1ZiwgIiV1XG4iLAotCQkJICAgICAgIHZncHUtPnN1
Ym1pc3Npb24uc2hhZG93WzBdLT5nZW1fY29udGV4dC0+aHdfaWQpOwotCX0KLQlyZXR1cm4gc3By
aW50ZihidWYsICJcbiIpOwotfQotCiBzdGF0aWMgREVWSUNFX0FUVFJfUk8odmdwdV9pZCk7Ci1z
dGF0aWMgREVWSUNFX0FUVFJfUk8oaHdfaWQpOwogCiBzdGF0aWMgc3RydWN0IGF0dHJpYnV0ZSAq
aW50ZWxfdmdwdV9hdHRyc1tdID0gewogCSZkZXZfYXR0cl92Z3B1X2lkLmF0dHIsCi0JJmRldl9h
dHRyX2h3X2lkLmF0dHIsCiAJTlVMTAogfTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMu
YwppbmRleCBhYzY2YmFlNmUyZjIuLmEzMzkzZDlmYTg0ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kZWJ1Z2ZzLmMKQEAgLTE1NzcsOSArMTU3Nyw2IEBAIHN0YXRpYyBpbnQgaTkxNV9jb250ZXh0
X3N0YXR1cyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIAkJc3RydWN0IGludGVs
X2NvbnRleHQgKmNlOwogCiAJCXNlcV9wdXRzKG0sICJIVyBjb250ZXh0ICIpOwotCQlpZiAoIWxp
c3RfZW1wdHkoJmN0eC0+aHdfaWRfbGluaykpCi0JCQlzZXFfcHJpbnRmKG0sICIleCBbcGluICV1
XSIsIGN0eC0+aHdfaWQsCi0JCQkJICAgYXRvbWljX3JlYWQoJmN0eC0+aHdfaWRfcGluX2NvdW50
KSk7CiAJCWlmIChjdHgtPnBpZCkgewogCQkJc3RydWN0IHRhc2tfc3RydWN0ICp0YXNrOwogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYwppbmRleCA5Mjk4NmQzZjY5OTUuLjNiNWJm
ZTUwZTAwYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3Iu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jCkBAIC00NzAsOSAr
NDcwLDkgQEAgc3RhdGljIHZvaWQgZXJyb3JfcHJpbnRfY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVf
ZXJyb3Jfc3RhdGVfYnVmICptLAogCQkJCWNvbnN0IGNoYXIgKmhlYWRlciwKIAkJCQljb25zdCBz
dHJ1Y3QgZHJtX2k5MTVfZXJyb3JfY29udGV4dCAqY3R4KQogewotCWVycl9wcmludGYobSwgIiVz
JXNbJWRdIGh3X2lkICVkLCBwcmlvICVkLCBndWlsdHkgJWQgYWN0aXZlICVkXG4iLAotCQkgICBo
ZWFkZXIsIGN0eC0+Y29tbSwgY3R4LT5waWQsIGN0eC0+aHdfaWQsCi0JCSAgIGN0eC0+c2NoZWRf
YXR0ci5wcmlvcml0eSwgY3R4LT5ndWlsdHksIGN0eC0+YWN0aXZlKTsKKwllcnJfcHJpbnRmKG0s
ICIlcyVzWyVkXSBwcmlvICVkLCBndWlsdHkgJWQgYWN0aXZlICVkXG4iLAorCQkgICBoZWFkZXIs
IGN0eC0+Y29tbSwgY3R4LT5waWQsIGN0eC0+c2NoZWRfYXR0ci5wcmlvcml0eSwKKwkJICAgY3R4
LT5ndWlsdHksIGN0eC0+YWN0aXZlKTsKIH0KIAogc3RhdGljIHZvaWQgZXJyb3JfcHJpbnRfZW5n
aW5lKHN0cnVjdCBkcm1faTkxNV9lcnJvcl9zdGF0ZV9idWYgKm0sCkBAIC0xMjYzLDcgKzEyNjMs
NiBAQCBzdGF0aWMgYm9vbCByZWNvcmRfY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVfZXJyb3JfY29u
dGV4dCAqZSwKIAkJcmN1X3JlYWRfdW5sb2NrKCk7CiAJfQogCi0JZS0+aHdfaWQgPSBjdHgtPmh3
X2lkOwogCWUtPnNjaGVkX2F0dHIgPSBjdHgtPnNjaGVkOwogCWUtPmd1aWx0eSA9IGF0b21pY19y
ZWFkKCZjdHgtPmd1aWx0eV9jb3VudCk7CiAJZS0+YWN0aXZlID0gYXRvbWljX3JlYWQoJmN0eC0+
YWN0aXZlX2NvdW50KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1
X2Vycm9yLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5oCmluZGV4IGRm
OWY1Nzc2NjYyNi4uNmIzYmE5NGY3MzM3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dwdV9lcnJvci5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vy
cm9yLmgKQEAgLTExOCw3ICsxMTgsNiBAQCBzdHJ1Y3QgaTkxNV9ncHVfc3RhdGUgewogCQlzdHJ1
Y3QgZHJtX2k5MTVfZXJyb3JfY29udGV4dCB7CiAJCQljaGFyIGNvbW1bVEFTS19DT01NX0xFTl07
CiAJCQlwaWRfdCBwaWQ7Ci0JCQl1MzIgaHdfaWQ7CiAJCQlpbnQgYWN0aXZlOwogCQkJaW50IGd1
aWx0eTsKIAkJCXN0cnVjdCBpOTE1X3NjaGVkX2F0dHIgc2NoZWRfYXR0cjsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wZXJmLmMKaW5kZXggZTQyYjg2ODI3ZDZiLi4zZDQzY2RlM2VjNTAgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcGVyZi5jCkBAIC0xMjkyLDIxICsxMjkyLDE0IEBAIHN0YXRpYyBpbnQgb2FfZ2V0
X3JlbmRlcl9jdHhfaWQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAkJfSBlbHNl
IHsKIAkJCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkX21hc2sgPQogCQkJCSgxVSA8PCBHRU44X0NU
WF9JRF9XSURUSCkgLSAxOwotCQkJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWQgPQotCQkJCXVwcGVy
XzMyX2JpdHMoY2UtPmxyY19kZXNjKTsKLQkJCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkICY9Ci0J
CQkJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWRfbWFzazsKKwkJCXN0cmVhbS0+c3BlY2lmaWNfY3R4
X2lkID0gc3RyZWFtLT5zcGVjaWZpY19jdHhfaWRfbWFzazsKIAkJfQogCQlicmVhazsKIAogCWNh
c2UgMTE6IHsKIAkJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWRfbWFzayA9Ci0JCQkoKDFVIDw8IEdF
TjExX1NXX0NUWF9JRF9XSURUSCkgLSAxKSA8PCAoR0VOMTFfU1dfQ1RYX0lEX1NISUZUIC0gMzIp
IHwKLQkJCSgoMVUgPDwgR0VOMTFfRU5HSU5FX0lOU1RBTkNFX1dJRFRIKSAtIDEpIDw8IChHRU4x
MV9FTkdJTkVfSU5TVEFOQ0VfU0hJRlQgLSAzMikgfAotCQkJKCgxIDw8IEdFTjExX0VOR0lORV9D
TEFTU19XSURUSCkgLSAxKSA8PCAoR0VOMTFfRU5HSU5FX0NMQVNTX1NISUZUIC0gMzIpOwotCQlz
dHJlYW0tPnNwZWNpZmljX2N0eF9pZCA9IHVwcGVyXzMyX2JpdHMoY2UtPmxyY19kZXNjKTsKLQkJ
c3RyZWFtLT5zcGVjaWZpY19jdHhfaWQgJj0KLQkJCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkX21h
c2s7CisJCQkoKDFVIDw8IEdFTjExX1NXX0NUWF9JRF9XSURUSCkgLSAxKSA8PCAoR0VOMTFfU1df
Q1RYX0lEX1NISUZUIC0gMzIpOworCQlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZCA9IHN0cmVhbS0+
c3BlY2lmaWNfY3R4X2lkX21hc2s7CiAJCWJyZWFrOwogCX0KIApAQCAtMTMxNCw2ICsxMzA3LDgg
QEAgc3RhdGljIGludCBvYV9nZXRfcmVuZGVyX2N0eF9pZChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVh
bSAqc3RyZWFtKQogCQlNSVNTSU5HX0NBU0UoSU5URUxfR0VOKGk5MTUpKTsKIAl9CiAKKwljZS0+
aHdfdGFnID0gc3RyZWFtLT5zcGVjaWZpY19jdHhfaWRfbWFzazsKKwogCURSTV9ERUJVR19EUklW
RVIoImZpbHRlcmluZyBvbiBjdHhfaWQ9MHgleCBjdHhfaWRfbWFzaz0weCV4XG4iLAogCQkJIHN0
cmVhbS0+c3BlY2lmaWNfY3R4X2lkLAogCQkJIHN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkX21hc2sp
OwpAQCAtMTMzMCwxOCArMTMyNSwxOSBAQCBzdGF0aWMgaW50IG9hX2dldF9yZW5kZXJfY3R4X2lk
KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiAgKi8KIHN0YXRpYyB2b2lkIG9hX3B1
dF9yZW5kZXJfY3R4X2lkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiB7Ci0Jc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gc3RyZWFtLT5kZXZfcHJpdjsKKwlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHN0cmVhbS0+ZGV2X3ByaXY7CiAJc3RydWN0IGlu
dGVsX2NvbnRleHQgKmNlOwogCi0Jc3RyZWFtLT5zcGVjaWZpY19jdHhfaWQgPSBJTlZBTElEX0NU
WF9JRDsKLQlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZF9tYXNrID0gMDsKLQogCWNlID0gZmV0Y2hf
YW5kX3plcm8oJnN0cmVhbS0+cGlubmVkX2N0eCk7Ci0JaWYgKGNlKSB7Ci0JCW11dGV4X2xvY2so
JmRldl9wcml2LT5kcm0uc3RydWN0X211dGV4KTsKKwlpZiAoY2UpICB7CisJCW11dGV4X2xvY2so
Jmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOworCQljZS0+aHdfdGFnID0gMDsKIAkJaW50ZWxfY29u
dGV4dF91bnBpbihjZSk7Ci0JCW11dGV4X3VubG9jaygmZGV2X3ByaXYtPmRybS5zdHJ1Y3RfbXV0
ZXgpOworCQltdXRleF91bmxvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwogCX0KKworCXN0
cmVhbS0+c3BlY2lmaWNfY3R4X2lkID0gSU5WQUxJRF9DVFhfSUQ7CisJc3RyZWFtLT5zcGVjaWZp
Y19jdHhfaWRfbWFzayA9IDA7CiB9CiAKIHN0YXRpYyB2b2lkCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3RyYWNlLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Ry
YWNlLmgKaW5kZXggMjRmMjk0NGRhMDlkLi4xZjJjZjZjZmFmYjUgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfdHJhY2UuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3RyYWNlLmgKQEAgLTY2NSw3ICs2NjUsNiBAQCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3Rf
cXVldWUsCiAKIAkgICAgVFBfU1RSVUNUX19lbnRyeSgKIAkJCSAgICAgX19maWVsZCh1MzIsIGRl
dikKLQkJCSAgICAgX19maWVsZCh1MzIsIGh3X2lkKQogCQkJICAgICBfX2ZpZWxkKHU2NCwgY3R4
KQogCQkJICAgICBfX2ZpZWxkKHUxNiwgY2xhc3MpCiAJCQkgICAgIF9fZmllbGQodTE2LCBpbnN0
YW5jZSkKQEAgLTY3NSw3ICs2NzQsNiBAQCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3RfcXVldWUs
CiAKIAkgICAgVFBfZmFzdF9hc3NpZ24oCiAJCQkgICBfX2VudHJ5LT5kZXYgPSBycS0+aTkxNS0+
ZHJtLnByaW1hcnktPmluZGV4OwotCQkJICAgX19lbnRyeS0+aHdfaWQgPSBycS0+Z2VtX2NvbnRl
eHQtPmh3X2lkOwogCQkJICAgX19lbnRyeS0+Y2xhc3MgPSBycS0+ZW5naW5lLT51YWJpX2NsYXNz
OwogCQkJICAgX19lbnRyeS0+aW5zdGFuY2UgPSBycS0+ZW5naW5lLT51YWJpX2luc3RhbmNlOwog
CQkJICAgX19lbnRyeS0+Y3R4ID0gcnEtPmZlbmNlLmNvbnRleHQ7CkBAIC02ODMsMTAgKzY4MSw5
IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF9xdWV1ZSwKIAkJCSAgIF9fZW50cnktPmZsYWdz
ID0gZmxhZ3M7CiAJCQkgICApLAogCi0JICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9JXU6
JXUsIGh3X2lkPSV1LCBjdHg9JWxsdSwgc2Vxbm89JXUsIGZsYWdzPTB4JXgiLAorCSAgICBUUF9w
cmludGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBjdHg9JWxsdSwgc2Vxbm89JXUsIGZsYWdzPTB4
JXgiLAogCQkgICAgICBfX2VudHJ5LT5kZXYsIF9fZW50cnktPmNsYXNzLCBfX2VudHJ5LT5pbnN0
YW5jZSwKLQkJICAgICAgX19lbnRyeS0+aHdfaWQsIF9fZW50cnktPmN0eCwgX19lbnRyeS0+c2Vx
bm8sCi0JCSAgICAgIF9fZW50cnktPmZsYWdzKQorCQkgICAgICBfX2VudHJ5LT5jdHgsIF9fZW50
cnktPnNlcW5vLCBfX2VudHJ5LT5mbGFncykKICk7CiAKIERFQ0xBUkVfRVZFTlRfQ0xBU1MoaTkx
NV9yZXF1ZXN0LApAQCAtNjk1LDcgKzY5Miw2IEBAIERFQ0xBUkVfRVZFTlRfQ0xBU1MoaTkxNV9y
ZXF1ZXN0LAogCiAJICAgIFRQX1NUUlVDVF9fZW50cnkoCiAJCQkgICAgIF9fZmllbGQodTMyLCBk
ZXYpCi0JCQkgICAgIF9fZmllbGQodTMyLCBod19pZCkKIAkJCSAgICAgX19maWVsZCh1NjQsIGN0
eCkKIAkJCSAgICAgX19maWVsZCh1MTYsIGNsYXNzKQogCQkJICAgICBfX2ZpZWxkKHUxNiwgaW5z
dGFuY2UpCkBAIC03MDQsMTYgKzcwMCwxNSBAQCBERUNMQVJFX0VWRU5UX0NMQVNTKGk5MTVfcmVx
dWVzdCwKIAogCSAgICBUUF9mYXN0X2Fzc2lnbigKIAkJCSAgIF9fZW50cnktPmRldiA9IHJxLT5p
OTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7Ci0JCQkgICBfX2VudHJ5LT5od19pZCA9IHJxLT5nZW1f
Y29udGV4dC0+aHdfaWQ7CiAJCQkgICBfX2VudHJ5LT5jbGFzcyA9IHJxLT5lbmdpbmUtPnVhYmlf
Y2xhc3M7CiAJCQkgICBfX2VudHJ5LT5pbnN0YW5jZSA9IHJxLT5lbmdpbmUtPnVhYmlfaW5zdGFu
Y2U7CiAJCQkgICBfX2VudHJ5LT5jdHggPSBycS0+ZmVuY2UuY29udGV4dDsKIAkJCSAgIF9fZW50
cnktPnNlcW5vID0gcnEtPmZlbmNlLnNlcW5vOwogCQkJICAgKSwKIAotCSAgICBUUF9wcmludGso
ImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUsIHNlcW5vPSV1IiwKKwkg
ICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgY3R4PSVsbHUsIHNlcW5vPSV1IiwK
IAkJICAgICAgX19lbnRyeS0+ZGV2LCBfX2VudHJ5LT5jbGFzcywgX19lbnRyeS0+aW5zdGFuY2Us
Ci0JCSAgICAgIF9fZW50cnktPmh3X2lkLCBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vKQor
CQkgICAgICBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vKQogKTsKIAogREVGSU5FX0VWRU5U
KGk5MTVfcmVxdWVzdCwgaTkxNV9yZXF1ZXN0X2FkZCwKQEAgLTczOCw3ICs3MzMsNiBAQCBUUkFD
RV9FVkVOVChpOTE1X3JlcXVlc3RfaW4sCiAKIAkgICAgVFBfU1RSVUNUX19lbnRyeSgKIAkJCSAg
ICAgX19maWVsZCh1MzIsIGRldikKLQkJCSAgICAgX19maWVsZCh1MzIsIGh3X2lkKQogCQkJICAg
ICBfX2ZpZWxkKHU2NCwgY3R4KQogCQkJICAgICBfX2ZpZWxkKHUxNiwgY2xhc3MpCiAJCQkgICAg
IF9fZmllbGQodTE2LCBpbnN0YW5jZSkKQEAgLTc0OSw3ICs3NDMsNiBAQCBUUkFDRV9FVkVOVChp
OTE1X3JlcXVlc3RfaW4sCiAKIAkgICAgVFBfZmFzdF9hc3NpZ24oCiAJCQkgICBfX2VudHJ5LT5k
ZXYgPSBycS0+aTkxNS0+ZHJtLnByaW1hcnktPmluZGV4OwotCQkJICAgX19lbnRyeS0+aHdfaWQg
PSBycS0+Z2VtX2NvbnRleHQtPmh3X2lkOwogCQkJICAgX19lbnRyeS0+Y2xhc3MgPSBycS0+ZW5n
aW5lLT51YWJpX2NsYXNzOwogCQkJICAgX19lbnRyeS0+aW5zdGFuY2UgPSBycS0+ZW5naW5lLT51
YWJpX2luc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0gcnEtPmZlbmNlLmNvbnRleHQ7CkBA
IC03NTgsOSArNzUxLDkgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X2luLAogCQkJICAgX19l
bnRyeS0+cG9ydCA9IHBvcnQ7CiAJCQkgICApLAogCi0JICAgIFRQX3ByaW50aygiZGV2PSV1LCBl
bmdpbmU9JXU6JXUsIGh3X2lkPSV1LCBjdHg9JWxsdSwgc2Vxbm89JXUsIHByaW89JXUsIHBvcnQ9
JXUiLAorCSAgICBUUF9wcmludGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBjdHg9JWxsdSwgc2Vx
bm89JXUsIHByaW89JXUsIHBvcnQ9JXUiLAogCQkgICAgICBfX2VudHJ5LT5kZXYsIF9fZW50cnkt
PmNsYXNzLCBfX2VudHJ5LT5pbnN0YW5jZSwKLQkJICAgICAgX19lbnRyeS0+aHdfaWQsIF9fZW50
cnktPmN0eCwgX19lbnRyeS0+c2Vxbm8sCisJCSAgICAgIF9fZW50cnktPmN0eCwgX19lbnRyeS0+
c2Vxbm8sCiAJCSAgICAgIF9fZW50cnktPnByaW8sIF9fZW50cnktPnBvcnQpCiApOwogCkBAIC03
NzAsNyArNzYzLDYgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X291dCwKIAogCSAgICBUUF9T
VFJVQ1RfX2VudHJ5KAogCQkJICAgICBfX2ZpZWxkKHUzMiwgZGV2KQotCQkJICAgICBfX2ZpZWxk
KHUzMiwgaHdfaWQpCiAJCQkgICAgIF9fZmllbGQodTY0LCBjdHgpCiAJCQkgICAgIF9fZmllbGQo
dTE2LCBjbGFzcykKIAkJCSAgICAgX19maWVsZCh1MTYsIGluc3RhbmNlKQpAQCAtNzgwLDcgKzc3
Miw2IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF9vdXQsCiAKIAkgICAgVFBfZmFzdF9hc3Np
Z24oCiAJCQkgICBfX2VudHJ5LT5kZXYgPSBycS0+aTkxNS0+ZHJtLnByaW1hcnktPmluZGV4Owot
CQkJICAgX19lbnRyeS0+aHdfaWQgPSBycS0+Z2VtX2NvbnRleHQtPmh3X2lkOwogCQkJICAgX19l
bnRyeS0+Y2xhc3MgPSBycS0+ZW5naW5lLT51YWJpX2NsYXNzOwogCQkJICAgX19lbnRyeS0+aW5z
dGFuY2UgPSBycS0+ZW5naW5lLT51YWJpX2luc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0g
cnEtPmZlbmNlLmNvbnRleHQ7CkBAIC03ODgsMTAgKzc3OSw5IEBAIFRSQUNFX0VWRU5UKGk5MTVf
cmVxdWVzdF9vdXQsCiAJCQkgICBfX2VudHJ5LT5jb21wbGV0ZWQgPSBpOTE1X3JlcXVlc3RfY29t
cGxldGVkKHJxKTsKIAkJCSAgICksCiAKLQkJICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9
JXU6JXUsIGh3X2lkPSV1LCBjdHg9JWxsdSwgc2Vxbm89JXUsIGNvbXBsZXRlZD89JXUiLAorCQkg
ICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBj
b21wbGV0ZWQ/PSV1IiwKIAkJCSAgICAgIF9fZW50cnktPmRldiwgX19lbnRyeS0+Y2xhc3MsIF9f
ZW50cnktPmluc3RhbmNlLAotCQkJICAgICAgX19lbnRyeS0+aHdfaWQsIF9fZW50cnktPmN0eCwg
X19lbnRyeS0+c2Vxbm8sCi0JCQkgICAgICBfX2VudHJ5LT5jb21wbGV0ZWQpCisJCQkgICAgICBf
X2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLCBfX2VudHJ5LT5jb21wbGV0ZWQpCiApOwogCiAj
ZWxzZQpAQCAtODI5LDcgKzgxOSw2IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF93YWl0X2Jl
Z2luLAogCiAJICAgIFRQX1NUUlVDVF9fZW50cnkoCiAJCQkgICAgIF9fZmllbGQodTMyLCBkZXYp
Ci0JCQkgICAgIF9fZmllbGQodTMyLCBod19pZCkKIAkJCSAgICAgX19maWVsZCh1NjQsIGN0eCkK
IAkJCSAgICAgX19maWVsZCh1MTYsIGNsYXNzKQogCQkJICAgICBfX2ZpZWxkKHUxNiwgaW5zdGFu
Y2UpCkBAIC04NDUsNyArODM0LDYgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X3dhaXRfYmVn
aW4sCiAJICAgICAqLwogCSAgICBUUF9mYXN0X2Fzc2lnbigKIAkJCSAgIF9fZW50cnktPmRldiA9
IHJxLT5pOTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7Ci0JCQkgICBfX2VudHJ5LT5od19pZCA9IHJx
LT5nZW1fY29udGV4dC0+aHdfaWQ7CiAJCQkgICBfX2VudHJ5LT5jbGFzcyA9IHJxLT5lbmdpbmUt
PnVhYmlfY2xhc3M7CiAJCQkgICBfX2VudHJ5LT5pbnN0YW5jZSA9IHJxLT5lbmdpbmUtPnVhYmlf
aW5zdGFuY2U7CiAJCQkgICBfX2VudHJ5LT5jdHggPSBycS0+ZmVuY2UuY29udGV4dDsKQEAgLTg1
Myw5ICs4NDEsOSBAQCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3Rfd2FpdF9iZWdpbiwKIAkJCSAg
IF9fZW50cnktPmZsYWdzID0gZmxhZ3M7CiAJCQkgICApLAogCi0JICAgIFRQX3ByaW50aygiZGV2
PSV1LCBlbmdpbmU9JXU6JXUsIGh3X2lkPSV1LCBjdHg9JWxsdSwgc2Vxbm89JXUsIGZsYWdzPTB4
JXgiLAorCSAgICBUUF9wcmludGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBjdHg9JWxsdSwgc2Vx
bm89JXUsIGZsYWdzPTB4JXgiLAogCQkgICAgICBfX2VudHJ5LT5kZXYsIF9fZW50cnktPmNsYXNz
LCBfX2VudHJ5LT5pbnN0YW5jZSwKLQkJICAgICAgX19lbnRyeS0+aHdfaWQsIF9fZW50cnktPmN0
eCwgX19lbnRyeS0+c2Vxbm8sCisJCSAgICAgIF9fZW50cnktPmN0eCwgX19lbnRyeS0+c2Vxbm8s
CiAJCSAgICAgIF9fZW50cnktPmZsYWdzKQogKTsKIApAQCAtOTU4LDE5ICs5NDYsMTcgQEAgREVD
TEFSRV9FVkVOVF9DTEFTUyhpOTE1X2NvbnRleHQsCiAJVFBfU1RSVUNUX19lbnRyeSgKIAkJCV9f
ZmllbGQodTMyLCBkZXYpCiAJCQlfX2ZpZWxkKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICosIGN0
eCkKLQkJCV9fZmllbGQodTMyLCBod19pZCkKIAkJCV9fZmllbGQoc3RydWN0IGk5MTVfYWRkcmVz
c19zcGFjZSAqLCB2bSkKIAkpLAogCiAJVFBfZmFzdF9hc3NpZ24oCiAJCQlfX2VudHJ5LT5kZXYg
PSBjdHgtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRleDsKIAkJCV9fZW50cnktPmN0eCA9IGN0eDsK
LQkJCV9fZW50cnktPmh3X2lkID0gY3R4LT5od19pZDsKIAkJCV9fZW50cnktPnZtID0gY3R4LT52
bTsKIAkpLAogCi0JVFBfcHJpbnRrKCJkZXY9JXUsIGN0eD0lcCwgY3R4X3ZtPSVwLCBod19pZD0l
dSIsCi0JCSAgX19lbnRyeS0+ZGV2LCBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnZtLCBfX2VudHJ5
LT5od19pZCkKKwlUUF9wcmludGsoImRldj0ldSwgY3R4PSVwLCBjdHhfdm09JXAiLAorCQkgIF9f
ZW50cnktPmRldiwgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT52bSkKICkKIAogREVGSU5FX0VWRU5U
KGk5MTVfY29udGV4dCwgaTkxNV9jb250ZXh0X2NyZWF0ZSwKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ldmljdC5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2V2aWN0LmMKaW5kZXggY2IzMGM2NjliMWI3Li44YjMx
ZmRmNmE2ZjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1
X2dlbV9ldmljdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dl
bV9ldmljdC5jCkBAIC00NzgsOCArNDc4LDggQEAgc3RhdGljIGludCBpZ3RfZXZpY3RfY29udGV4
dHModm9pZCAqYXJnKQogCQkJaWYgKElTX0VSUihycSkpIHsKIAkJCQkvKiBXaGVuIGZ1bGwsIGZh
aWxfaWZfYnVzeSB3aWxsIHRyaWdnZXIgRUJVU1kgKi8KIAkJCQlpZiAoUFRSX0VSUihycSkgIT0g
LUVCVVNZKSB7Ci0JCQkJCXByX2VycigiVW5leHBlY3RlZCBlcnJvciBmcm9tIHJlcXVlc3QgYWxs
b2MgKGN0eCBodyBpZCAldSwgb24gJXMpOiAlZFxuIiwKLQkJCQkJICAgICAgIGN0eC0+aHdfaWQs
IGVuZ2luZS0+bmFtZSwKKwkJCQkJcHJfZXJyKCJVbmV4cGVjdGVkIGVycm9yIGZyb20gcmVxdWVz
dCBhbGxvYyAob24gJXMpOiAlZFxuIiwKKwkJCQkJICAgICAgIGVuZ2luZS0+bmFtZSwKIAkJCQkJ
ICAgICAgIChpbnQpUFRSX0VSUihycSkpOwogCQkJCQllcnIgPSBQVFJfRVJSKHJxKTsKIAkJCQl9
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV92bWEuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5jCmluZGV4IGE1YmVjMGE0
Y2RjYy4uNzM4NDhhNzI4MzdjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvaTkxNV92bWEuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkx
NV92bWEuYwpAQCAtMTcwLDcgKzE3MCw3IEBAIHN0YXRpYyBpbnQgaWd0X3ZtYV9jcmVhdGUodm9p
ZCAqYXJnKQogCQl9CiAKIAkJbmMgPSAwOwotCQlmb3JfZWFjaF9wcmltZV9udW1iZXIobnVtX2N0
eCwgTUFYX0NPTlRFWFRfSFdfSUQpIHsKKwkJZm9yX2VhY2hfcHJpbWVfbnVtYmVyKG51bV9jdHgs
IE5VTV9IV19UQUcpIHsKIAkJCWZvciAoOyBuYyA8IG51bV9jdHg7IG5jKyspIHsKIAkJCQljdHgg
PSBtb2NrX2NvbnRleHQoaTkxNSwgIm1vY2siKTsKIAkJCQlpZiAoIWN0eCkKLS0gCjIuMjMuMC5y
YzEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

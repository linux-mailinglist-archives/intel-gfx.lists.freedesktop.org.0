Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 67F7710546C
	for <lists+intel-gfx@lfdr.de>; Thu, 21 Nov 2019 15:29:31 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8244F6F375;
	Thu, 21 Nov 2019 14:29:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7C93F6F375
 for <intel-gfx@lists.freedesktop.org>; Thu, 21 Nov 2019 14:29:28 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 21 Nov 2019 06:29:27 -0800
X-IronPort-AV: E=Sophos;i="5.69,226,1571727600"; d="scan'208";a="201137734"
Received: from aburk3x-mobl1.ger.corp.intel.com (HELO [10.252.19.231])
 ([10.252.19.231])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 21 Nov 2019 06:29:27 -0800
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191121135131.338984-1-chris@chris-wilson.co.uk>
 <20191121135131.338984-5-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <10b9e818-31fe-493b-699d-340ce4b61c0d@linux.intel.com>
Date: Thu, 21 Nov 2019 14:29:25 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191121135131.338984-5-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 5/5] drm/i915/gt: Schedule request
 retirement when timeline idles
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDIxLzExLzIwMTkgMTM6NTEsIENocmlzIFdpbHNvbiB3cm90ZToKPiBUaGUgbWFqb3IgZHJh
d2JhY2sgb2YgY29tbWl0IDdlMzRmNGU0YWFkMyAoImRybS9pOTE1L2dlbjgrOiBBZGQgUkM2IENU
WAo+IGNvcnJ1cHRpb24gV0EiKSBpcyB0aGF0IGl0IGRpc2FibGVzIFJDNiB3aGlsZSBTa3lsYWtl
IChhbmQgZnJpZW5kcykgaXMKPiBhY3RpdmUsIGFuZCB3ZSBkbyBub3QgY29uc2lkZXIgdGhlIEdQ
VSBpZGxlIHVudGlsIGFsbCBvdXRzdGFuZGluZwo+IHJlcXVlc3RzIGhhdmUgYmVlbiByZXRpcmVk
IGFuZCB0aGUgZW5naW5lIHN3aXRjaGVkIG92ZXIgdG8gdGhlIGtlcm5lbAo+IGNvbnRleHQuIElm
IHVzZXJzcGFjZSBpcyBpZGxlLCB0aGlzIHRhc2sgZmFsbHMgb250byBvdXIgYmFja2dyb3VuZCBp
ZGxlCj4gd29ya2VyLCB3aGljaCBvbmx5IHJ1bnMgcm91Z2hseSBvbmNlIGEgc2Vjb25kLCBtZWFu
aW5nIHRoYXQgdXNlcnNwYWNlIGhhcwo+IHRvIGhhdmUgYmVlbiBpZGxlIGZvciBhIGNvdXBsZSBv
ZiBzZWNvbmRzIGJlZm9yZSB3ZSBlbmFibGUgUkM2IGFnYWluLgo+IE5hdHVyYWxseSwgdGhpcyBj
YXVzZXMgdXMgdG8gY29uc3VtZSBjb25zaWRlcmFibHkgbW9yZSBlbmVyZ3kgdGhhbgo+IGJlZm9y
ZSBhcyBwb3dlcnNhdmluZyBpcyBlZmZlY3RpdmVseSBkaXNhYmxlZCB3aGlsZSBhIGRpc3BsYXkg
c2VydmVyCj4gKGhlcmUncyBsb29raW5nIGF0IHlvdSBYb3JnKSBpcyBydW5uaW5nLgo+IAo+IEFz
IGV4ZWNsaXN0cyB3aWxsIGdldCBhIGNvbXBsZXRpb24gZXZlbnQgYXMgZWFjaCBjb250ZXh0IGlz
IGNvbXBsZXRlZCwKPiB3ZSBjYW4gdXNlIHRoaXMgaW50ZXJydXB0IHRvIHF1ZXVlIGEgcmV0aXJl
IHdvcmtlciBib3VuZCB0byB0aGlzIGVuZ2luZQo+IHRvIGNsZWFudXAgaWRsZSB0aW1lbGluZXMu
IFdlIHdpbGwgdGhlbiBpbW1lZGlhdGVseSBub3RpY2UgdGhlIGlkbGUKPiBlbmdpbmUgKHdpdGhv
dXQgdXNlcnNwYWNlIGludGVydmVudGlvbiBvciB0aGUgYWlkIG9mIHRoZSBiYWNrZ3JvdW5kCj4g
cmV0aXJlIHdvcmtlcikgYW5kIHN0YXJ0IHBhcmtpbmcgdGhlIEdQVS4gVGh1cyBkdXJpbmcgbGln
aHQgd29ya2xvYWRzLAo+IHdlIHdpbGwgZG8gbXVjaCBtb3JlIHdvcmsgdG8gaWRsZSB0aGUgR1BV
IGZhc3Rlci4uLiAgSG9wZWZ1bGx5IHdpdGgKPiBjb21tZW5zdXJhdGUgcG93ZXIgc2F2aW5nIQo+
IAo+IHYyOiBXYXRjaCBjb250ZXh0IGNvbXBsZXRpb25zIGFuZCBvbmx5IGxvb2sgYXQgdGhvc2Ug
bG9jYWwgdG8gdGhlIGVuZ2luZQo+IHdoZW4gcmV0aXJpbmcgdG8gcmVkdWNlIHRoZSBhbW91bnQg
b2YgZXhjZXNzIHdvcmsgd2UgcGVyZm9ybS4KPiAKPiBSZWZlcmVuY2VzOiBodHRwczovL2J1Z3Mu
ZnJlZWRlc2t0b3Aub3JnL3Nob3dfYnVnLmNnaT9pZD0xMTIzMTUKPiBSZWZlcmVuY2VzOiA3ZTM0
ZjRlNGFhZDMgKCJkcm0vaTkxNS9nZW44KzogQWRkIFJDNiBDVFggY29ycnVwdGlvbiBXQSIpCj4g
UmVmZXJlbmNlczogMjI0OGEyODM4NGZlICgiZHJtL2k5MTUvZ2VuOCs6IEFkZCBSQzYgQ1RYIGNv
cnJ1cHRpb24gV0EiKQo+IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMt
d2lsc29uLmNvLnVrPgo+IENjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwu
Y29tPgo+IC0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMg
ICAgIHwgIDggKy0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBl
cy5oICB8ICA4ICsrCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9yZXF1ZXN0
cy5jICAgfCA3MyArKysrKysrKysrKysrKysrKysrCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ndF9yZXF1ZXN0cy5oICAgfCAxMiArKy0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2xyYy5jICAgICAgICAgICB8ICA5ICsrKwo+ICAgZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfdGltZWxpbmUuYyAgICAgIHwgIDEgKwo+ICAgLi4uL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF90aW1lbGluZV90eXBlcy5oICAgIHwgIDMgKwo+ICAgNyBmaWxlcyBjaGFuZ2VkLCAx
MTAgaW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9lbmdpbmVfY3MuYwo+IGluZGV4IGI5NjEzZDA0NDM5My4uOGY2ZTM1M2NhYTY2
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKPiBAQCAt
MjgsMTMgKzI4LDEzIEBACj4gICAKPiAgICNpbmNsdWRlICJpOTE1X2Rydi5oIgo+ICAgCj4gLSNp
bmNsdWRlICJndC9pbnRlbF9ndC5oIgo+IC0KPiArI2luY2x1ZGUgImludGVsX2NvbnRleHQuaCIK
PiAgICNpbmNsdWRlICJpbnRlbF9lbmdpbmUuaCIKPiAgICNpbmNsdWRlICJpbnRlbF9lbmdpbmVf
cG0uaCIKPiAgICNpbmNsdWRlICJpbnRlbF9lbmdpbmVfcG9vbC5oIgo+ICAgI2luY2x1ZGUgImlu
dGVsX2VuZ2luZV91c2VyLmgiCj4gLSNpbmNsdWRlICJpbnRlbF9jb250ZXh0LmgiCj4gKyNpbmNs
dWRlICJpbnRlbF9ndC5oIgo+ICsjaW5jbHVkZSAiaW50ZWxfZ3RfcmVxdWVzdHMuaCIKPiAgICNp
bmNsdWRlICJpbnRlbF9scmMuaCIKPiAgICNpbmNsdWRlICJpbnRlbF9yZXNldC5oIgo+ICAgI2lu
Y2x1ZGUgImludGVsX3JpbmcuaCIKPiBAQCAtNjE3LDYgKzYxNyw3IEBAIHN0YXRpYyBpbnQgaW50
ZWxfZW5naW5lX3NldHVwX2NvbW1vbihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCj4g
ICAJaW50ZWxfZW5naW5lX2luaXRfZXhlY2xpc3RzKGVuZ2luZSk7Cj4gICAJaW50ZWxfZW5naW5l
X2luaXRfY21kX3BhcnNlcihlbmdpbmUpOwo+ICAgCWludGVsX2VuZ2luZV9pbml0X19wbShlbmdp
bmUpOwo+ICsJaW50ZWxfZW5naW5lX2luaXRfcmV0aXJlKGVuZ2luZSk7Cj4gICAKPiAgIAlpbnRl
bF9lbmdpbmVfcG9vbF9pbml0KCZlbmdpbmUtPnBvb2wpOwo+ICAgCj4gQEAgLTgzOSw2ICs4NDAs
NyBAQCB2b2lkIGludGVsX2VuZ2luZV9jbGVhbnVwX2NvbW1vbihzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmUpCj4gICAKPiAgIAljbGVhbnVwX3N0YXR1c19wYWdlKGVuZ2luZSk7Cj4gICAK
PiArCWludGVsX2VuZ2luZV9maW5pX3JldGlyZShlbmdpbmUpOwo+ICAgCWludGVsX2VuZ2luZV9w
b29sX2ZpbmkoJmVuZ2luZS0+cG9vbCk7Cj4gICAJaW50ZWxfZW5naW5lX2ZpbmlfYnJlYWRjcnVt
YnMoZW5naW5lKTsKPiAgIAlpbnRlbF9lbmdpbmVfY2xlYW51cF9jbWRfcGFyc2VyKGVuZ2luZSk7
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBl
cy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKPiBpbmRl
eCA3NThmMGU4ZWM2NzIuLjE3ZjFmMTQ0MWVmYyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCj4gQEAgLTQ1MSw2ICs0NTEsMTQgQEAgc3RydWN0
IGludGVsX2VuZ2luZV9jcyB7Cj4gICAKPiAgIAlzdHJ1Y3QgaW50ZWxfZW5naW5lX2V4ZWNsaXN0
cyBleGVjbGlzdHM7Cj4gICAKPiArCS8qCj4gKwkgKiBLZWVwIHRyYWNrIG9mIGNvbXBsZXRlZCB0
aW1lbGluZXMgb24gdGhpcyBlbmdpbmUgZm9yIGVhcmx5Cj4gKwkgKiByZXRpcmVtZW50IHdpdGgg
dGhlIGdvYWwgb2YgcXVpY2tseSBlbmFibGluZyBwb3dlcnNhdmluZyBhcwo+ICsJICogc29vbiBh
cyB0aGUgZW5naW5lIGlzIGlkbGUuCj4gKwkgKi8KPiArCXN0cnVjdCBpbnRlbF90aW1lbGluZSAq
cmV0aXJlOwo+ICsJc3RydWN0IHdvcmtfc3RydWN0IHJldGlyZV93b3JrOwo+ICsKPiAgIAkvKiBz
dGF0dXNfbm90aWZpZXI6IGxpc3Qgb2YgY2FsbGJhY2tzIGZvciBjb250ZXh0LXN3aXRjaCBjaGFu
Z2VzICovCj4gICAJc3RydWN0IGF0b21pY19ub3RpZmllcl9oZWFkIGNvbnRleHRfc3RhdHVzX25v
dGlmaWVyOwo+ICAgCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2d0X3JlcXVlc3RzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9yZXF1ZXN0
cy5jCj4gaW5kZXggODE5YTI2NmE4ZjI5Li41NjM5Mzk4ZTlmNjAgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcmVxdWVzdHMuYwo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3JlcXVlc3RzLmMKPiBAQCAtMjksNiArMjksNzkgQEAg
c3RhdGljIHZvaWQgZmx1c2hfc3VibWlzc2lvbihzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQo+ICAgCQlp
bnRlbF9lbmdpbmVfZmx1c2hfc3VibWlzc2lvbihlbmdpbmUpOwo+ICAgfQo+ICAgCj4gK3N0YXRp
YyB2b2lkIGVuZ2luZV9yZXRpcmUoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQo+ICt7Cj4gKwlz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUgPQo+ICsJCWNvbnRhaW5lcl9vZih3b3JrLCB0
eXBlb2YoKmVuZ2luZSksIHJldGlyZV93b3JrKTsKPiArCXN0cnVjdCBpbnRlbF90aW1lbGluZSAq
dGwgPSB4Y2hnKCZlbmdpbmUtPnJldGlyZSwgTlVMTCk7Cj4gKwo+ICsJZG8gewo+ICsJCXN0cnVj
dCBpbnRlbF90aW1lbGluZSAqbmV4dCA9IHhjaGcoJnRsLT5yZXRpcmUsIE5VTEwpOwo+ICsKPiAr
CQkvKgo+ICsJCSAqIE91ciBnb2FsIGhlcmUgaXMgdG8gcmV0aXJlIF9pZGxlXyB0aW1lbGluZXMg
YXMgc29vbiBhcwo+ICsJCSAqIHBvc3NpYmxlIChhcyB0aGV5IGFyZSBpZGxlLCB3ZSBkbyBub3Qg
ZXhwZWN0IHVzZXJzcGFjZQo+ICsJCSAqIHRvIGJlIGNsZWFuaW5nIHVwIGFueXRpbWUgc29vbiku
Cj4gKwkJICoKPiArCQkgKiBJZiB0aGUgdGltZWxpbmUgaXMgY3VycmVudGx5IGxvY2tlZCwgZWl0
aGVyIGl0IGlzIGJlaW5nCj4gKwkJICogcmV0aXJlZCBlbHNld2hlcmUgb3IgYWJvdXQgdG8gYmUh
Cj4gKwkJICovCj4gKwkJaWYgKG11dGV4X3RyeWxvY2soJnRsLT5tdXRleCkpIHsKPiArCQkJcmV0
aXJlX3JlcXVlc3RzKHRsKTsKPiArCQkJbXV0ZXhfdW5sb2NrKCZ0bC0+bXV0ZXgpOwo+ICsJCX0K
PiArCQlpbnRlbF90aW1lbGluZV9wdXQodGwpOwo+ICsKPiArCQlHRU1fQlVHX09OKCFuZXh0KTsK
PiArCQl0bCA9IHB0cl9tYXNrX2JpdHMobmV4dCwgMSk7Cj4gKwl9IHdoaWxlICh0bCk7Cj4gK30K
PiArCj4gK3N0YXRpYyBib29sIGFkZF9yZXRpcmUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5n
aW5lLAo+ICsJCSAgICAgICBzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRsKQo+ICt7Cj4gKwlzdHJ1
Y3QgaW50ZWxfdGltZWxpbmUgKmZpcnN0Owo+ICsKPiArCS8qCj4gKwkgKiBXZSBvcGVuLWNvZGUg
YSBsbGlzdCBoZXJlIHRvIGluY2x1ZGUgdGhlIGFkZGl0aW9uYWwgdGFnIFtCSVQoMCldCj4gKwkg
KiBzbyB0aGF0IHdlIGtub3cgd2hlbiB0aGUgdGltZWxpbmUgaXMgYWxyZWFkeSBvbiBhCj4gKwkg
KiByZXRpcmVtZW50IHF1ZXVlOiBlaXRoZXIgdGhpcyBlbmdpbmUgb3IgYW5vdGhlci4KPiArCSAq
Cj4gKwkgKiBIb3dldmVyLCB3ZSByZWx5IG9uIHRoYXQgYSB0aW1lbGluZSBjYW4gb25seSBiZSBh
Y3RpdmUgb24gYSBzaW5nbGUKPiArCSAqIGVuZ2luZSBhdCBhbnkgb25lIHRpbWUgYW5kIHRoYXQg
YWRkX3JldGlyZSgpIGlzIGNhbGxlZCBiZWZvcmUgdGhlCj4gKwkgKiBlbmdpbmUgcmVsZWFzZXMg
dGhlIHRpbWVsaW5lIGFuZCB0cmFuc2ZlcnJlZCB0byBhbm90aGVyIHRvIHJldGlyZS4KPiArCSAq
Lwo+ICsKPiArCWlmIChSRUFEX09OQ0UodGwtPnJldGlyZSkpIC8qIGFscmVhZHkgcXVldWVkICov
Cj4gKwkJcmV0dXJuIGZhbHNlOwo+ICsKPiArCWludGVsX3RpbWVsaW5lX2dldCh0bCk7Cj4gKwlm
aXJzdCA9IFJFQURfT05DRShlbmdpbmUtPnJldGlyZSk7Cj4gKwlkbwo+ICsJCXRsLT5yZXRpcmUg
PSBwdHJfcGFja19iaXRzKGZpcnN0LCAxLCAxKTsKPiArCXdoaWxlICghdHJ5X2NtcHhjaGcoJmVu
Z2luZS0+cmV0aXJlLCAmZmlyc3QsIHRsKSk7Cj4gKwo+ICsJcmV0dXJuICFmaXJzdDsKPiArfQo+
ICsKPiArdm9pZCBpbnRlbF9lbmdpbmVfYWRkX3JldGlyZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICplbmdpbmUsCj4gKwkJCSAgICAgc3RydWN0IGludGVsX3RpbWVsaW5lICp0bCkKPiArewo+ICsJ
aWYgKGFkZF9yZXRpcmUoZW5naW5lLCB0bCkpCj4gKwkJc2NoZWR1bGVfd29yaygmZW5naW5lLT5y
ZXRpcmVfd29yayk7Cj4gK30KPiArCj4gK3ZvaWQgaW50ZWxfZW5naW5lX2luaXRfcmV0aXJlKHN0
cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiArewo+ICsJSU5JVF9XT1JLKCZlbmdpbmUt
PnJldGlyZV93b3JrLCBlbmdpbmVfcmV0aXJlKTsKPiArfQo+ICsKPiArdm9pZCBpbnRlbF9lbmdp
bmVfZmluaV9yZXRpcmUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQo+ICt7Cj4gKwlm
bHVzaF93b3JrKCZlbmdpbmUtPnJldGlyZV93b3JrKTsKPiArCUdFTV9CVUdfT04oZW5naW5lLT5y
ZXRpcmUpOwo+ICt9Cj4gKwo+ICAgbG9uZyBpbnRlbF9ndF9yZXRpcmVfcmVxdWVzdHNfdGltZW91
dChzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCBsb25nIHRpbWVvdXQpCj4gICB7Cj4gICAJc3RydWN0IGlu
dGVsX2d0X3RpbWVsaW5lcyAqdGltZWxpbmVzID0gJmd0LT50aW1lbGluZXM7Cj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3JlcXVlc3RzLmggYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9yZXF1ZXN0cy5oCj4gaW5kZXggZmRlNTQ2NDI0YzYz
Li4yNTJjNjA2NDk4OWMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZ3RfcmVxdWVzdHMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0
X3JlcXVlc3RzLmgKPiBAQCAtNyw3ICs3LDEyIEBACj4gICAjaWZuZGVmIElOVEVMX0dUX1JFUVVF
U1RTX0gKPiAgICNkZWZpbmUgSU5URUxfR1RfUkVRVUVTVFNfSAo+ICAgCj4gLXN0cnVjdCBpbnRl
bF9ndDsKPiArI2luY2x1ZGUgPGxpbnV4L3dvcmtxdWV1ZS5oPgo+ICsKPiArI2luY2x1ZGUgImlu
dGVsX2d0X3R5cGVzLmgiCj4gKwo+ICtzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzOwo+ICtzdHJ1Y3Qg
aW50ZWxfdGltZWxpbmU7Cj4gICAKPiAgIGxvbmcgaW50ZWxfZ3RfcmV0aXJlX3JlcXVlc3RzX3Rp
bWVvdXQoc3RydWN0IGludGVsX2d0ICpndCwgbG9uZyB0aW1lb3V0KTsKPiAgIHN0YXRpYyBpbmxp
bmUgdm9pZCBpbnRlbF9ndF9yZXRpcmVfcmVxdWVzdHMoc3RydWN0IGludGVsX2d0ICpndCkKPiBA
QCAtMTUsNiArMjAsMTEgQEAgc3RhdGljIGlubGluZSB2b2lkIGludGVsX2d0X3JldGlyZV9yZXF1
ZXN0cyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQo+ICAgCWludGVsX2d0X3JldGlyZV9yZXF1ZXN0c190
aW1lb3V0KGd0LCAwKTsKPiAgIH0KPiAgIAo+ICt2b2lkIGludGVsX2VuZ2luZV9pbml0X3JldGly
ZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwo+ICt2b2lkIGludGVsX2VuZ2luZV9h
ZGRfcmV0aXJlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKPiArCQkJICAgICBzdHJ1
Y3QgaW50ZWxfdGltZWxpbmUgKnRsKTsKPiArdm9pZCBpbnRlbF9lbmdpbmVfZmluaV9yZXRpcmUo
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKPiArCj4gICBpbnQgaW50ZWxfZ3Rfd2Fp
dF9mb3JfaWRsZShzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCBsb25nIHRpbWVvdXQpOwo+ICAgCj4gICB2
b2lkIGludGVsX2d0X2luaXRfcmVxdWVzdHMoc3RydWN0IGludGVsX2d0ICpndCk7Cj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiBpbmRleCAwZTIwNjVhMTNmMjQuLjA2MmRkOGFjNDcy
YSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCj4gQEAgLTE0Miw2ICsxNDIs
NyBAQAo+ICAgI2luY2x1ZGUgImludGVsX2VuZ2luZV9wbS5oIgo+ICAgI2luY2x1ZGUgImludGVs
X2d0LmgiCj4gICAjaW5jbHVkZSAiaW50ZWxfZ3RfcG0uaCIKPiArI2luY2x1ZGUgImludGVsX2d0
X3JlcXVlc3RzLmgiCj4gICAjaW5jbHVkZSAiaW50ZWxfbHJjX3JlZy5oIgo+ICAgI2luY2x1ZGUg
ImludGVsX21vY3MuaCIKPiAgICNpbmNsdWRlICJpbnRlbF9yZXNldC5oIgo+IEBAIC0xMTcwLDYg
KzExNzEsMTQgQEAgX19leGVjbGlzdHNfc2NoZWR1bGVfb3V0KHN0cnVjdCBpOTE1X3JlcXVlc3Qg
KnJxLAo+ICAgCSAqIHJlZnJhaW4gZnJvbSBkb2luZyBub24tdHJpdmlhbCB3b3JrIGhlcmUuCj4g
ICAJICovCj4gICAKPiArCS8qCj4gKwkgKiBJZiB3ZSBoYXZlIGp1c3QgY29tcGxldGVkIHRoaXMg
Y29udGV4dCwgdGhlIGVuZ2luZSBtYXkgbm93IGJlCj4gKwkgKiBpZGxlIGFuZCB3ZSB3YW50IHRv
IHJlLWVudGVyIHBvd2Vyc2F2aW5nLgo+ICsJICovCj4gKwlpZiAobGlzdF9pc19sYXN0KCZycS0+
bGluaywgJmNlLT50aW1lbGluZS0+cmVxdWVzdHMpICYmCj4gKwkgICAgaTkxNV9yZXF1ZXN0X2Nv
bXBsZXRlZChycSkpCj4gKwkJaW50ZWxfZW5naW5lX2FkZF9yZXRpcmUoZW5naW5lLCBjZS0+dGlt
ZWxpbmUpOwo+ICsKPiAgIAlpbnRlbF9lbmdpbmVfY29udGV4dF9vdXQoZW5naW5lKTsKPiAgIAll
eGVjbGlzdHNfY29udGV4dF9zdGF0dXNfY2hhbmdlKHJxLCBJTlRFTF9DT05URVhUX1NDSEVEVUxF
X09VVCk7Cj4gICAJaW50ZWxfZ3RfcG1fcHV0X2FzeW5jKGVuZ2luZS0+Z3QpOwo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZS5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuYwo+IGluZGV4IGIxOTBhNWQ5YWIwMi4uYzFk
MjQxOTQ0NGY4IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Rp
bWVsaW5lLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZS5j
Cj4gQEAgLTI3Nyw2ICsyNzcsNyBAQCB2b2lkIGludGVsX3RpbWVsaW5lX2Zpbmkoc3RydWN0IGlu
dGVsX3RpbWVsaW5lICp0aW1lbGluZSkKPiAgIHsKPiAgIAlHRU1fQlVHX09OKGF0b21pY19yZWFk
KCZ0aW1lbGluZS0+cGluX2NvdW50KSk7Cj4gICAJR0VNX0JVR19PTighbGlzdF9lbXB0eSgmdGlt
ZWxpbmUtPnJlcXVlc3RzKSk7Cj4gKwlHRU1fQlVHX09OKHRpbWVsaW5lLT5yZXRpcmUpOwo+ICAg
Cj4gICAJaWYgKHRpbWVsaW5lLT5od3NwX2NhY2hlbGluZSkKPiAgIAkJY2FjaGVsaW5lX2ZyZWUo
dGltZWxpbmUtPmh3c3BfY2FjaGVsaW5lKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfdGltZWxpbmVfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX3RpbWVsaW5lX3R5cGVzLmgKPiBpbmRleCA1MjQ0NjE1ZWQxY2IuLmFhZjE1Y2JlMWNl
MSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZV90
eXBlcy5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmVfdHlw
ZXMuaAo+IEBAIC02Niw2ICs2Niw5IEBAIHN0cnVjdCBpbnRlbF90aW1lbGluZSB7Cj4gICAJICov
Cj4gICAJc3RydWN0IGk5MTVfYWN0aXZlX2ZlbmNlIGxhc3RfcmVxdWVzdDsKPiAgIAo+ICsJLyoq
IEEgY2hhaW4gb2YgY29tcGxldGVkIHRpbWVsaW5lcyByZWFkeSBmb3IgZWFybHkgcmV0aXJlbWVu
dC4gKi8KPiArCXN0cnVjdCBpbnRlbF90aW1lbGluZSAqcmV0aXJlOwo+ICsKPiAgIAkvKioKPiAg
IAkgKiBXZSB0cmFjayB0aGUgbW9zdCByZWNlbnQgc2Vxbm8gdGhhdCB3ZSB3YWl0IG9uIGluIGV2
ZXJ5IGNvbnRleHQgc28KPiAgIAkgKiB0aGF0IHdlIG9ubHkgaGF2ZSB0byBlbWl0IGEgbmV3IGF3
YWl0IGFuZCBkZXBlbmRlbmN5IG9uIGEgbW9yZQo+IAoKUmV2aWV3ZWQtYnk6IFR2cnRrbyBVcnN1
bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+CgpSZWdhcmRzLAoKVHZydGtvCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5n
IGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

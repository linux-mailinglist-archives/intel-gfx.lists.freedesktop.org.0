Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 80E474627D
	for <lists+intel-gfx@lfdr.de>; Fri, 14 Jun 2019 17:18:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E71EA89A86;
	Fri, 14 Jun 2019 15:18:08 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B165E89A62
 for <Intel-gfx@lists.freedesktop.org>; Fri, 14 Jun 2019 15:18:01 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 14 Jun 2019 08:18:01 -0700
X-ExtLoop1: 1
Received: from yyosef-mobl.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.23.42])
 by orsmga004.jf.intel.com with ESMTP; 14 Jun 2019 08:18:00 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Fri, 14 Jun 2019 16:17:15 +0100
Message-Id: <20190614151731.17608-16-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190614151731.17608-1-tvrtko.ursulin@linux.intel.com>
References: <20190614151731.17608-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC 15/31] drm/i915: Stop using I915_READ/WRITE in
 intel_wopcm_init_hw
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCk1vcmUgbGVn
YWN5IG1taW8gYWNjZXNzb3IgcmVtb3ZhbC4gV2UgcGFzcyBpbiBpbnRlbF9ndCBleHBsaWNpdGx5
IGFsbG93aW5nCmNvZGUgdG8gdXNlIG5ldyBpbnRlbF91bmNvcmVfcmVhZC93cml0ZSBoZWxwZXJz
LgoKU2lnbmVkLW9mZi1ieTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNv
bT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jICAgIHwgIDIgKy0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2ludGVsX3dvcGNtLmMgfCAzMSArKysrKysrKysrKysrKysrLS0tLS0t
LS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3dvcGNtLmggfCAgNCArKystCiAz
IGZpbGVzIGNoYW5nZWQsIDIxIGluc2VydGlvbnMoKyksIDE2IGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2dlbS5jCmluZGV4IDc3ZDlkMDkyYjJmNC4uYjdmODhlMmJkN2RmIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2VtLmMKQEAgLTEyNzUsNyArMTI3NSw3IEBAIHN0YXRpYyBpbnQgaW5pdF9o
dyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQogCQlnb3RvIG91dDsKIAl9CiAKLQlyZXQgPSBpbnRlbF93
b3BjbV9pbml0X2h3KCZpOTE1LT53b3BjbSk7CisJcmV0ID0gaW50ZWxfd29wY21faW5pdF9odygm
aTkxNS0+d29wY20sIGd0KTsKIAlpZiAocmV0KSB7CiAJCURSTV9FUlJPUigiRW5hYmxpbmcgV09Q
Q00gZmFpbGVkICglZClcbiIsIHJldCk7CiAJCWdvdG8gb3V0OwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfd29wY20uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X3dvcGNtLmMKaW5kZXggN2I0YmE4NGI5ZmI4Li45MzE5ODdlMzcyNDEgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3dvcGNtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfd29wY20uYwpAQCAtMjI1LDE3ICsyMjUsMTggQEAgaW50IGludGVsX3dvcGNtX2lu
aXQoc3RydWN0IGludGVsX3dvcGNtICp3b3BjbSkKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIGlu
bGluZSBpbnQgd3JpdGVfYW5kX3ZlcmlmeShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsCi0JCQkJICAgaTkxNV9yZWdfdCByZWcsIHUzMiB2YWwsIHUzMiBtYXNrLAotCQkJCSAgIHUz
MiBsb2NrZWRfYml0KQorc3RhdGljIGludAord3JpdGVfYW5kX3ZlcmlmeShzdHJ1Y3QgaW50ZWxf
Z3QgKmd0LAorCQkgaTkxNV9yZWdfdCByZWcsIHUzMiB2YWwsIHUzMiBtYXNrLCB1MzIgbG9ja2Vk
X2JpdCkKIHsKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSBndC0+dW5jb3JlOwogCXUz
MiByZWdfdmFsOwogCiAJR0VNX0JVR19PTih2YWwgJiB+bWFzayk7CiAKLQlJOTE1X1dSSVRFKHJl
ZywgdmFsKTsKKwlpbnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLCByZWcsIHZhbCk7CiAKLQlyZWdf
dmFsID0gSTkxNV9SRUFEKHJlZyk7CisJcmVnX3ZhbCA9IGludGVsX3VuY29yZV9yZWFkKHVuY29y
ZSwgcmVnKTsKIAogCXJldHVybiAocmVnX3ZhbCAmIG1hc2spICE9ICh2YWwgfCBsb2NrZWRfYml0
KSA/IC1FSU8gOiAwOwogfQpAQCAtMjUwLDI5ICsyNTEsMzAgQEAgc3RhdGljIGlubGluZSBpbnQg
d3JpdGVfYW5kX3ZlcmlmeShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAgKgog
ICogUmV0dXJuOiAwIG9uIHN1Y2Nlc3MuIC1FSU8gaWYgcmVnaXN0ZXJzIHdlcmUgbG9ja2VkIHdp
dGggaW5jb3JyZWN0IHZhbHVlcy4KICAqLwotaW50IGludGVsX3dvcGNtX2luaXRfaHcoc3RydWN0
IGludGVsX3dvcGNtICp3b3BjbSkKK2ludCBpbnRlbF93b3BjbV9pbml0X2h3KHN0cnVjdCBpbnRl
bF93b3BjbSAqd29wY20sIHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiB7Ci0Jc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2ID0gd29wY21fdG9faTkxNSh3b3BjbSk7CisJc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmk5MTUgPSB3b3BjbV90b19pOTE1KHdvcGNtKTsKKwlzdHJ1Y3QgaW50ZWxf
dW5jb3JlICp1bmNvcmUgPSBndC0+dW5jb3JlOwogCXUzMiBodWNfYWdlbnQ7CiAJdTMyIG1hc2s7
CiAJaW50IGVycjsKIAotCWlmICghVVNFU19HVUMoZGV2X3ByaXYpKQorCWlmICghVVNFU19HVUMo
aTkxNSkpCiAJCXJldHVybiAwOwogCi0JR0VNX0JVR19PTighSEFTX0dVQyhkZXZfcHJpdikpOwor
CUdFTV9CVUdfT04oIUhBU19HVUMoaTkxNSkpOwogCUdFTV9CVUdfT04oIXdvcGNtLT5ndWMuc2l6
ZSk7CiAJR0VNX0JVR19PTighd29wY20tPmd1Yy5iYXNlKTsKIAotCWVyciA9IHdyaXRlX2FuZF92
ZXJpZnkoZGV2X3ByaXYsIEdVQ19XT1BDTV9TSVpFLCB3b3BjbS0+Z3VjLnNpemUsCisJZXJyID0g
d3JpdGVfYW5kX3ZlcmlmeShndCwgR1VDX1dPUENNX1NJWkUsIHdvcGNtLT5ndWMuc2l6ZSwKIAkJ
CSAgICAgICBHVUNfV09QQ01fU0laRV9NQVNLIHwgR1VDX1dPUENNX1NJWkVfTE9DS0VELAogCQkJ
ICAgICAgIEdVQ19XT1BDTV9TSVpFX0xPQ0tFRCk7CiAJaWYgKGVycikKIAkJZ290byBlcnJfb3V0
OwogCi0JaHVjX2FnZW50ID0gVVNFU19IVUMoZGV2X3ByaXYpID8gSFVDX0xPQURJTkdfQUdFTlRf
R1VDIDogMDsKKwlodWNfYWdlbnQgPSBVU0VTX0hVQyhpOTE1KSA/IEhVQ19MT0FESU5HX0FHRU5U
X0dVQyA6IDA7CiAJbWFzayA9IEdVQ19XT1BDTV9PRkZTRVRfTUFTSyB8IEdVQ19XT1BDTV9PRkZT
RVRfVkFMSUQgfCBodWNfYWdlbnQ7Ci0JZXJyID0gd3JpdGVfYW5kX3ZlcmlmeShkZXZfcHJpdiwg
RE1BX0dVQ19XT1BDTV9PRkZTRVQsCisJZXJyID0gd3JpdGVfYW5kX3ZlcmlmeShndCwgRE1BX0dV
Q19XT1BDTV9PRkZTRVQsCiAJCQkgICAgICAgd29wY20tPmd1Yy5iYXNlIHwgaHVjX2FnZW50LCBt
YXNrLAogCQkJICAgICAgIEdVQ19XT1BDTV9PRkZTRVRfVkFMSUQpOwogCWlmIChlcnIpCkBAIC0y
ODMsOCArMjg1LDkgQEAgaW50IGludGVsX3dvcGNtX2luaXRfaHcoc3RydWN0IGludGVsX3dvcGNt
ICp3b3BjbSkKIGVycl9vdXQ6CiAJRFJNX0VSUk9SKCJGYWlsZWQgdG8gaW5pdCBXT1BDTSByZWdp
c3RlcnM6XG4iKTsKIAlEUk1fRVJST1IoIkRNQV9HVUNfV09QQ01fT0ZGU0VUPSUjeFxuIiwKLQkJ
ICBJOTE1X1JFQUQoRE1BX0dVQ19XT1BDTV9PRkZTRVQpKTsKLQlEUk1fRVJST1IoIkdVQ19XT1BD
TV9TSVpFPSUjeFxuIiwgSTkxNV9SRUFEKEdVQ19XT1BDTV9TSVpFKSk7CisJCSAgaW50ZWxfdW5j
b3JlX3JlYWQodW5jb3JlLCBETUFfR1VDX1dPUENNX09GRlNFVCkpOworCURSTV9FUlJPUigiR1VD
X1dPUENNX1NJWkU9JSN4XG4iLAorCQkgIGludGVsX3VuY29yZV9yZWFkKHVuY29yZSwgR1VDX1dP
UENNX1NJWkUpKTsKIAogCXJldHVybiBlcnI7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF93b3BjbS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfd29wY20u
aAppbmRleCAxMTQ0MDE5NzE1MjAuLjU2YWFlZDRkNjRmZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaW50ZWxfd29wY20uaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF93b3BjbS5oCkBAIC05LDYgKzksOCBAQAogCiAjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4KIAor
c3RydWN0IGludGVsX2d0OworCiAvKioKICAqIHN0cnVjdCBpbnRlbF93b3BjbSAtIE92ZXJhbGwg
V09QQ00gaW5mbyBhbmQgV09QQ00gcmVnaW9ucy4KICAqIEBzaXplOiBTaXplIG9mIG92ZXJhbGwg
V09QQ00uCkBAIC00MSw2ICs0Myw2IEBAIHN0YXRpYyBpbmxpbmUgdTMyIGludGVsX3dvcGNtX2d1
Y19zaXplKHN0cnVjdCBpbnRlbF93b3BjbSAqd29wY20pCiAKIHZvaWQgaW50ZWxfd29wY21faW5p
dF9lYXJseShzdHJ1Y3QgaW50ZWxfd29wY20gKndvcGNtKTsKIGludCBpbnRlbF93b3BjbV9pbml0
KHN0cnVjdCBpbnRlbF93b3BjbSAqd29wY20pOwotaW50IGludGVsX3dvcGNtX2luaXRfaHcoc3Ry
dWN0IGludGVsX3dvcGNtICp3b3BjbSk7CitpbnQgaW50ZWxfd29wY21faW5pdF9odyhzdHJ1Y3Qg
aW50ZWxfd29wY20gKndvcGNtLCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKIAogI2VuZGlmCi0tIAoy
LjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCklu
dGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

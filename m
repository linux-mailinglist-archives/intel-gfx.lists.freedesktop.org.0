Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 51ED25C455
	for <lists+intel-gfx@lfdr.de>; Mon,  1 Jul 2019 22:29:10 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A434B89D00;
	Mon,  1 Jul 2019 20:29:08 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A291589BFC
 for <intel-gfx@lists.freedesktop.org>; Mon,  1 Jul 2019 20:29:06 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 01 Jul 2019 13:29:06 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,440,1557212400"; d="scan'208";a="190383948"
Received: from dceraolo-linux.fm.intel.com ([10.1.27.145])
 by fmsmga002.fm.intel.com with ESMTP; 01 Jul 2019 13:29:05 -0700
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon,  1 Jul 2019 13:28:38 -0700
Message-Id: <20190701202838.8396-1-daniele.ceraolospurio@intel.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2] drm/i915/guc: Remove preemption support for
 current fw
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CgpQcmVlbXB0aW9u
IHZpYSBHdUMgc3VibWlzc2lvbiBpcyBub3QgYmVpbmcgc3VwcG9ydGVkIHdpdGggaXRzIGN1cnJl
bnQKbGVnYWN5IGluY2FybmF0aW9uLiBUaGUgY3VycmVudCBGVyBkb2VzIHN1cHBvcnQgYSBzaW1p
bGFyIHByZS1lbXB0aW9uCmZsb3cgdmlhIEgyRywgYnV0IGl0IGlzIGNsYXNzLWJhc2VkIGluc3Rl
YWQgb2YgYmVpbmcgaW5zdGFuY2UtYmFzZWQsCndoaWNoIGRvZXNuJ3QgZml0IHdlbGwgd2l0aCB0
aGUgaTkxNSB0cmFja2luZy4gVG8gZml4IHRoaXMsIHRoZQpmaXJtd2FyZSBpcyBiZWluZyB1cGRh
dGVkIHRvIGJldHRlciBzdXBwb3J0IG91ciBuZWVkcyB3aXRoIGEgbmV3IGZsb3csCnNvIHdlIGNh
biBzYWZlbHkgcmVtb3ZlIHRoZSBvbGQgY29kZS4KCnYyIChEYW5pZWxlKTogcmVzdXJyZWN0ICYg
cmViYXNlLCByZXdvcmQgY29tbWl0IG1lc3NhZ2UsIHJlbW92ZQpwcmVlbXB0X2NvbnRleHQgYXMg
d2VsbAoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28u
dWs+ClNpZ25lZC1vZmYtYnk6IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUuY2VyYW9s
b3NwdXJpb0BpbnRlbC5jb20+CkNjOiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5j
by51az4KQ2M6IE1pY2hhbCBXYWpkZWN6a28gPG1pY2hhbC53YWpkZWN6a29AaW50ZWwuY29tPgpD
YzogTWF0dGhldyBCcm9zdCA8bWF0dGhldy5icm9zdEBpbnRlbC5jb20+CkNjOiBKb2huIEhhcnJp
c29uIDxKb2huLkMuSGFycmlzb25ASW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMgIHwgIDE3IC0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9lbmdpbmVfY3MuYyAgICB8ICAxMyAtLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfZW5naW5lX3R5cGVzLmggfCAgIDEgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZ3RfcG0uYyAgICAgICAgfCAgIDQgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1
Z2ZzLmMgICAgICAgICAgfCAgIDUgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAg
ICAgICAgICAgICAgfCAgIDIgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3VjLmMgICAg
ICAgICAgICAgfCAgMzEgLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWMuaCAgICAg
ICAgICAgICB8ICAgOSAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfc3VibWlzc2lv
bi5jICB8IDIyMCArLS0tLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvaW50ZWxfZ3VjLmMgICB8ICAzMSArLS0KIDEwIGZpbGVzIGNoYW5nZWQsIDE0IGluc2Vy
dGlvbnMoKyksIDMxOSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2NvbnRleHQuYwppbmRleCA4YTk3ODdjZjBjZDAuLjljNjk1OTEwYmM0MyAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCkBAIC02NDQsMTggKzY0
NCwxMiBAQCBzdGF0aWMgdm9pZCBpbml0X2NvbnRleHRzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1KQogCWluaXRfbGxpc3RfaGVhZCgmaTkxNS0+Y29udGV4dHMuZnJlZV9saXN0KTsKIH0K
IAotc3RhdGljIGJvb2wgbmVlZHNfcHJlZW1wdF9jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1KQotewotCXJldHVybiBVU0VTX0dVQ19TVUJNSVNTSU9OKGk5MTUpOwotfQotCiBp
bnQgaTkxNV9nZW1fY29udGV4dHNfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYpCiB7CiAJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eDsKIAogCS8qIFJlYXNzdXJlIG91
cnNlbHZlcyB3ZSBhcmUgb25seSBjYWxsZWQgb25jZSAqLwogCUdFTV9CVUdfT04oZGV2X3ByaXYt
Pmtlcm5lbF9jb250ZXh0KTsKLQlHRU1fQlVHX09OKGRldl9wcml2LT5wcmVlbXB0X2NvbnRleHQp
OwogCiAJaW50ZWxfZW5naW5lX2luaXRfY3R4X3dhKGRldl9wcml2LT5lbmdpbmVbUkNTMF0pOwog
CWluaXRfY29udGV4dHMoZGV2X3ByaXYpOwpAQCAtNjc3LDE1ICs2NzEsNiBAQCBpbnQgaTkxNV9n
ZW1fY29udGV4dHNfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJR0VN
X0JVR19PTighYXRvbWljX3JlYWQoJmN0eC0+aHdfaWRfcGluX2NvdW50KSk7CiAJZGV2X3ByaXYt
Pmtlcm5lbF9jb250ZXh0ID0gY3R4OwogCi0JLyogaGlnaGVzdCBwcmlvcml0eTsgcHJlZW1wdGlu
ZyB0YXNrICovCi0JaWYgKG5lZWRzX3ByZWVtcHRfY29udGV4dChkZXZfcHJpdikpIHsKLQkJY3R4
ID0gaTkxNV9nZW1fY29udGV4dF9jcmVhdGVfa2VybmVsKGRldl9wcml2LCBJTlRfTUFYKTsKLQkJ
aWYgKCFJU19FUlIoY3R4KSkKLQkJCWRldl9wcml2LT5wcmVlbXB0X2NvbnRleHQgPSBjdHg7Ci0J
CWVsc2UKLQkJCURSTV9FUlJPUigiRmFpbGVkIHRvIGNyZWF0ZSBwcmVlbXB0IGNvbnRleHQ7IGRp
c2FibGluZyBwcmVlbXB0aW9uXG4iKTsKLQl9Ci0KIAlEUk1fREVCVUdfRFJJVkVSKCIlcyBjb250
ZXh0IHN1cHBvcnQgaW5pdGlhbGl6ZWRcbiIsCiAJCQkgRFJJVkVSX0NBUFMoZGV2X3ByaXYpLT5o
YXNfbG9naWNhbF9jb250ZXh0cyA/CiAJCQkgImxvZ2ljYWwiIDogImZha2UiKTsKQEAgLTY5Niw4
ICs2ODEsNiBAQCB2b2lkIGk5MTVfZ2VtX2NvbnRleHRzX2Zpbmkoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTUpCiB7CiAJbG9ja2RlcF9hc3NlcnRfaGVsZCgmaTkxNS0+ZHJtLnN0cnVjdF9t
dXRleCk7CiAKLQlpZiAoaTkxNS0+cHJlZW1wdF9jb250ZXh0KQotCQlkZXN0cm95X2tlcm5lbF9j
b250ZXh0KCZpOTE1LT5wcmVlbXB0X2NvbnRleHQpOwogCWRlc3Ryb3lfa2VybmVsX2NvbnRleHQo
Jmk5MTUtPmtlcm5lbF9jb250ZXh0KTsKIAogCS8qIE11c3QgZnJlZSBhbGwgZGVmZXJyZWQgY29u
dGV4dHMgKHZpYSBmbHVzaF93b3JrcXVldWUpIGZpcnN0ICovCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2VuZ2luZV9jcy5jCmluZGV4IGQxNTA4ZjBiNGM4NC4uNTViMTE0MDljMWYwIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwpAQCAtODQyLDE1ICs4
NDIsNiBAQCBpbnQgaW50ZWxfZW5naW5lX2luaXRfY29tbW9uKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSkKIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCi0JLyoKLQkgKiBTaW1pbGFy
bHkgdGhlIHByZWVtcHQgY29udGV4dCBtdXN0IGFsd2F5cyBiZSBhdmFpbGFibGUgc28gdGhhdAot
CSAqIHdlIGNhbiBpbnRlcnJ1cHQgdGhlIGVuZ2luZSBhdCBhbnkgdGltZS4gSG93ZXZlciwgYXMg
cHJlZW1wdGlvbgotCSAqIGlzIG9wdGlvbmFsLCB3ZSBhbGxvdyBpdCB0byBmYWlsLgotCSAqLwot
CWlmIChpOTE1LT5wcmVlbXB0X2NvbnRleHQpCi0JCXBpbl9jb250ZXh0KGk5MTUtPnByZWVtcHRf
Y29udGV4dCwgZW5naW5lLAotCQkJICAgICZlbmdpbmUtPnByZWVtcHRfY29udGV4dCk7Ci0KIAly
ZXQgPSBtZWFzdXJlX2JyZWFkY3J1bWJfZHcoZW5naW5lKTsKIAlpZiAocmV0IDwgMCkKIAkJZ290
byBlcnJfdW5waW47CkBAIC04NjIsOCArODUzLDYgQEAgaW50IGludGVsX2VuZ2luZV9pbml0X2Nv
bW1vbihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJcmV0dXJuIDA7CiAKIGVycl91
bnBpbjoKLQlpZiAoZW5naW5lLT5wcmVlbXB0X2NvbnRleHQpCi0JCWludGVsX2NvbnRleHRfdW5w
aW4oZW5naW5lLT5wcmVlbXB0X2NvbnRleHQpOwogCWludGVsX2NvbnRleHRfdW5waW4oZW5naW5l
LT5rZXJuZWxfY29udGV4dCk7CiAJcmV0dXJuIHJldDsKIH0KQEAgLTg4OCw4ICs4NzcsNiBAQCB2
b2lkIGludGVsX2VuZ2luZV9jbGVhbnVwX2NvbW1vbihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUpCiAJaWYgKGVuZ2luZS0+ZGVmYXVsdF9zdGF0ZSkKIAkJaTkxNV9nZW1fb2JqZWN0X3B1
dChlbmdpbmUtPmRlZmF1bHRfc3RhdGUpOwogCi0JaWYgKGVuZ2luZS0+cHJlZW1wdF9jb250ZXh0
KQotCQlpbnRlbF9jb250ZXh0X3VucGluKGVuZ2luZS0+cHJlZW1wdF9jb250ZXh0KTsKIAlpbnRl
bF9jb250ZXh0X3VucGluKGVuZ2luZS0+a2VybmVsX2NvbnRleHQpOwogCUdFTV9CVUdfT04oIWxs
aXN0X2VtcHR5KCZlbmdpbmUtPmJhcnJpZXJfdGFza3MpKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAppbmRleCA3ZTA1NjExNDM0NGUuLjhiZTYzMDE5
ZDcwNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5
cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgK
QEAgLTI4OCw3ICsyODgsNiBAQCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzIHsKIAlzdHJ1Y3QgbGxp
c3RfaGVhZCBiYXJyaWVyX3Rhc2tzOwogCiAJc3RydWN0IGludGVsX2NvbnRleHQgKmtlcm5lbF9j
b250ZXh0OyAvKiBwaW5uZWQgKi8KLQlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqcHJlZW1wdF9jb250
ZXh0OyAvKiBwaW5uZWQ7IG9wdGlvbmFsICovCiAKIAlpbnRlbF9lbmdpbmVfbWFza190IHNhdHVy
YXRlZDsgLyogc3VibWl0dGluZyBzZW1hcGhvcmVzIHRvbyBsYXRlPyAqLwogCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYwppbmRleCAzNmJhODBlNmEwYjcuLmRhODFiM2E5MmQxNiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jCkBAIC0xNDUsMTAgKzE0NSw2IEBA
IGludCBpbnRlbF9ndF9yZXN1bWUoc3RydWN0IGludGVsX2d0ICpndCkKIAkJaWYgKGNlKQogCQkJ
Y2UtPm9wcy0+cmVzZXQoY2UpOwogCi0JCWNlID0gZW5naW5lLT5wcmVlbXB0X2NvbnRleHQ7Ci0J
CWlmIChjZSkKLQkJCWNlLT5vcHMtPnJlc2V0KGNlKTsKLQogCQllbmdpbmUtPnNlcmlhbCsrOyAv
KiBrZXJuZWwgY29udGV4dCBsb3N0ICovCiAJCWVyciA9IGVuZ2luZS0+cmVzdW1lKGVuZ2luZSk7
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKaW5kZXggZWVlY2RhZDBlM2NhLi4wMmVh
YTE1ZDQ3YzAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCkBAIC0yMDE3LDExICsy
MDE3LDYgQEAgc3RhdGljIGludCBpOTE1X2d1Y19pbmZvKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9p
ZCAqZGF0YSkKIAogCXNlcV9wcmludGYobSwgIlxuR3VDIGV4ZWNidWYgY2xpZW50IEAgJXA6XG4i
LCBndWMtPmV4ZWNidWZfY2xpZW50KTsKIAlpOTE1X2d1Y19jbGllbnRfaW5mbyhtLCBkZXZfcHJp
diwgZ3VjLT5leGVjYnVmX2NsaWVudCk7Ci0JaWYgKGd1Yy0+cHJlZW1wdF9jbGllbnQpIHsKLQkJ
c2VxX3ByaW50ZihtLCAiXG5HdUMgcHJlZW1wdCBjbGllbnQgQCAlcDpcbiIsCi0JCQkgICBndWMt
PnByZWVtcHRfY2xpZW50KTsKLQkJaTkxNV9ndWNfY2xpZW50X2luZm8obSwgZGV2X3ByaXYsIGd1
Yy0+cHJlZW1wdF9jbGllbnQpOwotCX0KIAogCS8qIEFkZCBtb3JlIGFzIHJlcXVpcmVkIC4uLiAq
LwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRleCAwMmRkOWY5ZjNhODkuLjFjZGQwNjUzOWRj
NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBAIC0xMzc4LDggKzEzNzgsNiBAQCBzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSB7CiAJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lW0k5MTVf
TlVNX0VOR0lORVNdOwogCS8qIENvbnRleHQgdXNlZCBpbnRlcm5hbGx5IHRvIGlkbGUgdGhlIEdQ
VSBhbmQgc2V0dXAgaW5pdGlhbCBzdGF0ZSAqLwogCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpr
ZXJuZWxfY29udGV4dDsKLQkvKiBDb250ZXh0IG9ubHkgdG8gYmUgdXNlZCBmb3IgaW5qZWN0aW5n
IHByZWVtcHRpb24gY29tbWFuZHMgKi8KLQlzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqcHJlZW1w
dF9jb250ZXh0OwogCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZV9jbGFzc1tNQVhfRU5H
SU5FX0NMQVNTICsgMV0KIAkJCQkJICAgIFtNQVhfRU5HSU5FX0lOU1RBTkNFICsgMV07CiAKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Yy5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfZ3VjLmMKaW5kZXggYzQwYTZlZmRkMzNhLi41MDFiNzRmNDQzNzQgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Yy5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX2d1Yy5jCkBAIC0xMDEsOCArMTAxLDYgQEAgdm9pZCBpbnRlbF9n
dWNfaW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAKIHN0YXRpYyBpbnQgZ3VjX2lu
aXRfd3Eoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiA9IGd1Y190b19pOTE1KGd1Yyk7Ci0KIAkvKgogCSAqIEd1QyBsb2cgYnVmZmVy
IGZsdXNoIHdvcmsgaXRlbSBoYXMgdG8gZG8gcmVnaXN0ZXIgYWNjZXNzIHRvCiAJICogc2VuZCB0
aGUgYWNrIHRvIEd1QyBhbmQgdGhpcyB3b3JrIGl0ZW0sIGlmIG5vdCBzeW5jZWQgYmVmb3JlCkBA
IC0xMjIsMzEgKzEyMCw2IEBAIHN0YXRpYyBpbnQgZ3VjX2luaXRfd3Eoc3RydWN0IGludGVsX2d1
YyAqZ3VjKQogCQlyZXR1cm4gLUVOT01FTTsKIAl9CiAKLQkvKgotCSAqIEV2ZW4gdGhvdWdoIGJv
dGggc2VuZGluZyBHdUMgYWN0aW9uLCBhbmQgYWRkaW5nIGEgbmV3IHdvcmtpdGVtIHRvCi0JICog
R3VDIHdvcmtxdWV1ZSBhcmUgc2VyaWFsaXplZCAoZWFjaCB3aXRoIGl0cyBvd24gbG9ja2luZyks
IHNpbmNlCi0JICogd2UncmUgdXNpbmcgbXV0bGlwbGUgZW5naW5lcywgaXQncyBwb3NzaWJsZSB0
aGF0IHdlJ3JlIGdvaW5nIHRvCi0JICogaXNzdWUgYSBwcmVlbXB0IHJlcXVlc3Qgd2l0aCB0d28g
KG9yIG1vcmUgLSBlYWNoIGZvciBkaWZmZXJlbnQKLQkgKiBlbmdpbmUpIHdvcmtpdGVtcyBpbiBH
dUMgcXVldWUuIEluIHRoaXMgc2l0dWF0aW9uLCBHdUMgbWF5IHN1Ym1pdAotCSAqIGFsbCBvZiB0
aGVtLCB3aGljaCB3aWxsIG1ha2UgdXMgdmVyeSBjb25mdXNlZC4KLQkgKiBPdXIgcHJlZW1wdGlv
biBjb250ZXh0cyBtYXkgZXZlbiBhbHJlYWR5IGJlIGNvbXBsZXRlIC0gYmVmb3JlIHdlCi0JICog
ZXZlbiBoYWQgdGhlIGNoYW5jZSB0byBzZW50IHRoZSBwcmVlbXB0IGFjdGlvbiB0byBHdUMhLiBS
YXRoZXIKLQkgKiB0aGFuIGludHJvZHVjaW5nIHlldCBhbm90aGVyIGxvY2ssIHdlIGNhbiBqdXN0
IHVzZSBvcmRlcmVkIHdvcmtxdWV1ZQotCSAqIHRvIG1ha2Ugc3VyZSB3ZSdyZSBhbHdheXMgc2Vu
ZGluZyBhIHNpbmdsZSBwcmVlbXB0aW9uIHJlcXVlc3Qgd2l0aCBhCi0JICogc2luZ2xlIHdvcmtp
dGVtLgotCSAqLwotCWlmIChIQVNfTE9HSUNBTF9SSU5HX1BSRUVNUFRJT04oZGV2X3ByaXYpICYm
Ci0JICAgIFVTRVNfR1VDX1NVQk1JU1NJT04oZGV2X3ByaXYpKSB7Ci0JCWd1Yy0+cHJlZW1wdF93
cSA9IGFsbG9jX29yZGVyZWRfd29ya3F1ZXVlKCJpOTE1LWd1Y19wcmVlbXB0IiwKLQkJCQkJCQkg
IFdRX0hJR0hQUkkpOwotCQlpZiAoIWd1Yy0+cHJlZW1wdF93cSkgewotCQkJZGVzdHJveV93b3Jr
cXVldWUoZ3VjLT5sb2cucmVsYXkuZmx1c2hfd3EpOwotCQkJRFJNX0VSUk9SKCJDb3VsZG4ndCBh
bGxvY2F0ZSB3b3JrcXVldWUgZm9yIEd1QyAiCi0JCQkJICAicHJlZW1wdGlvblxuIik7Ci0JCQly
ZXR1cm4gLUVOT01FTTsKLQkJfQotCX0KLQogCXJldHVybiAwOwogfQogCkBAIC0xNTQsMTAgKzEy
Nyw2IEBAIHN0YXRpYyB2b2lkIGd1Y19maW5pX3dxKHN0cnVjdCBpbnRlbF9ndWMgKmd1YykKIHsK
IAlzdHJ1Y3Qgd29ya3F1ZXVlX3N0cnVjdCAqd3E7CiAKLQl3cSA9IGZldGNoX2FuZF96ZXJvKCZn
dWMtPnByZWVtcHRfd3EpOwotCWlmICh3cSkKLQkJZGVzdHJveV93b3JrcXVldWUod3EpOwotCiAJ
d3EgPSBmZXRjaF9hbmRfemVybygmZ3VjLT5sb2cucmVsYXkuZmx1c2hfd3EpOwogCWlmICh3cSkK
IAkJZGVzdHJveV93b3JrcXVldWUod3EpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfZ3VjLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWMuaAppbmRleCBk
OTFjOTY2NzlkYmIuLmVjMTAzOGMxZjUwZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfZ3VjLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3VjLmgKQEAg
LTM3LDExICszNyw2IEBACiAKIHN0cnVjdCBfX2d1Y19hZHNfYmxvYjsKIAotc3RydWN0IGd1Y19w
cmVlbXB0X3dvcmsgewotCXN0cnVjdCB3b3JrX3N0cnVjdCB3b3JrOwotCXN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZTsKLX07Ci0KIC8qCiAgKiBUb3AgbGV2ZWwgc3RydWN0dXJlIG9mIEd1
Qy4gSXQgaGFuZGxlcyBmaXJtd2FyZSBsb2FkaW5nIGFuZCBtYW5hZ2VzIGNsaWVudAogICogcG9v
bCBhbmQgZG9vcmJlbGxzLiBpbnRlbF9ndWMgb3ducyBhIGludGVsX2d1Y19jbGllbnQgdG8gcmVw
bGFjZSB0aGUgbGVnYWN5CkBAIC03NiwxMCArNzEsNiBAQCBzdHJ1Y3QgaW50ZWxfZ3VjIHsKIAl2
b2lkICpzaGFyZWRfZGF0YV92YWRkcjsKIAogCXN0cnVjdCBpbnRlbF9ndWNfY2xpZW50ICpleGVj
YnVmX2NsaWVudDsKLQlzdHJ1Y3QgaW50ZWxfZ3VjX2NsaWVudCAqcHJlZW1wdF9jbGllbnQ7Ci0K
LQlzdHJ1Y3QgZ3VjX3ByZWVtcHRfd29yayBwcmVlbXB0X3dvcmtbSTkxNV9OVU1fRU5HSU5FU107
Ci0Jc3RydWN0IHdvcmtxdWV1ZV9zdHJ1Y3QgKnByZWVtcHRfd3E7CiAKIAlERUNMQVJFX0JJVE1B
UChkb29yYmVsbF9iaXRtYXAsIEdVQ19OVU1fRE9PUkJFTExTKTsKIAkvKiBDeWNsaWMgY291bnRl
ciBtb2QgcGFnZXNpemUJKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X2d1Y19zdWJtaXNzaW9uLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfc3VibWlz
c2lvbi5jCmluZGV4IDEyYzIyMzU5ZmRhYy4uODUyMGJiMjI0MTc1IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfc3VibWlzc2lvbi5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX2d1Y19zdWJtaXNzaW9uLmMKQEAgLTQ2LDExICs0NiwxMCBAQCBlbnVt
IHsKICAqCiAgKiBHdUMgY2xpZW50OgogICogQSBpbnRlbF9ndWNfY2xpZW50IHJlZmVycyB0byBh
IHN1Ym1pc3Npb24gcGF0aCB0aHJvdWdoIEd1Qy4gQ3VycmVudGx5LCB0aGVyZQotICogYXJlIHR3
byBjbGllbnRzLiBPbmUgb2YgdGhlbSAodGhlIGV4ZWNidWZfY2xpZW50KSBpcyBjaGFyZ2VkIHdp
dGggYWxsCi0gKiBzdWJtaXNzaW9ucyB0byB0aGUgR3VDLCB0aGUgb3RoZXIgb25lIChwcmVlbXB0
X2NsaWVudCkgaXMgcmVzcG9uc2libGUgZm9yCi0gKiBwcmVlbXB0aW5nIHRoZSBleGVjYnVmX2Ns
aWVudC4gVGhpcyBzdHJ1Y3QgaXMgdGhlIG93bmVyIG9mIGEgZG9vcmJlbGwsIGEKLSAqIHByb2Nl
c3MgZGVzY3JpcHRvciBhbmQgYSB3b3JrcXVldWUgKGFsbCBvZiB0aGVtIGluc2lkZSBhIHNpbmds
ZSBnZW0gb2JqZWN0Ci0gKiB0aGF0IGNvbnRhaW5zIGFsbCByZXF1aXJlZCBwYWdlcyBmb3IgdGhl
c2UgZWxlbWVudHMpLgorICogaXMgb25seSBvbmUgY2xpZW50LCB3aGljaCBpcyBjaGFyZ2VkIHdp
dGggYWxsIHN1Ym1pc3Npb25zIHRvIHRoZSBHdUMuIFRoaXMKKyAqIHN0cnVjdCBpcyB0aGUgb3du
ZXIgb2YgYSBkb29yYmVsbCwgYSBwcm9jZXNzIGRlc2NyaXB0b3IgYW5kIGEgd29ya3F1ZXVlIChh
bGwKKyAqIG9mIHRoZW0gaW5zaWRlIGEgc2luZ2xlIGdlbSBvYmplY3QgdGhhdCBjb250YWlucyBh
bGwgcmVxdWlyZWQgcGFnZXMgZm9yIHRoZXNlCisgKiBlbGVtZW50cykuCiAgKgogICogR3VDIHN0
YWdlIGRlc2NyaXB0b3I6CiAgKiBEdXJpbmcgaW5pdGlhbGl6YXRpb24sIHRoZSBkcml2ZXIgYWxs
b2NhdGVzIGEgc3RhdGljIHBvb2wgb2YgMTAyNCBzdWNoCkBAIC04OCwxMiArODcsNiBAQCBlbnVt
IHsKICAqCiAgKi8KIAotc3RhdGljIGlubGluZSB1MzIgaW50ZWxfaHdzX3ByZWVtcHRfZG9uZV9h
ZGRyZXNzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKLXsKLQlyZXR1cm4gKGk5MTVf
Z2d0dF9vZmZzZXQoZW5naW5lLT5zdGF0dXNfcGFnZS52bWEpICsKLQkJSTkxNV9HRU1fSFdTX1BS
RUVNUFRfQUREUik7Ci19Ci0KIHN0YXRpYyBpbmxpbmUgc3RydWN0IGk5MTVfcHJpb2xpc3QgKnRv
X3ByaW9saXN0KHN0cnVjdCByYl9ub2RlICpyYikKIHsKIAlyZXR1cm4gcmJfZW50cnkocmIsIHN0
cnVjdCBpOTE1X3ByaW9saXN0LCBub2RlKTsKQEAgLTU2MywxMjYgKzU1Niw2IEBAIHN0YXRpYyB2
b2lkIGZsdXNoX2dndHRfd3JpdGVzKHN0cnVjdCBpOTE1X3ZtYSAqdm1hKQogCQlpbnRlbF91bmNv
cmVfcG9zdGluZ19yZWFkX2Z3KCZpOTE1LT51bmNvcmUsIEdVQ19TVEFUVVMpOwogfQogCi1zdGF0
aWMgdm9pZCBpbmplY3RfcHJlZW1wdF9jb250ZXh0KHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykK
LXsKLQlzdHJ1Y3QgZ3VjX3ByZWVtcHRfd29yayAqcHJlZW1wdF93b3JrID0KLQkJY29udGFpbmVy
X29mKHdvcmssIHR5cGVvZigqcHJlZW1wdF93b3JrKSwgd29yayk7Ci0Jc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lID0gcHJlZW1wdF93b3JrLT5lbmdpbmU7Ci0Jc3RydWN0IGludGVsX2d1
YyAqZ3VjID0gY29udGFpbmVyX29mKHByZWVtcHRfd29yaywgdHlwZW9mKCpndWMpLAotCQkJCQkg
ICAgIHByZWVtcHRfd29ya1tlbmdpbmUtPmlkXSk7Ci0Jc3RydWN0IGludGVsX2d1Y19jbGllbnQg
KmNsaWVudCA9IGd1Yy0+cHJlZW1wdF9jbGllbnQ7Ci0Jc3RydWN0IGd1Y19zdGFnZV9kZXNjICpz
dGFnZV9kZXNjID0gX19nZXRfc3RhZ2VfZGVzYyhjbGllbnQpOwotCXN0cnVjdCBpbnRlbF9jb250
ZXh0ICpjZSA9IGVuZ2luZS0+cHJlZW1wdF9jb250ZXh0OwotCXUzMiBkYXRhWzddOwotCi0JaWYg
KCFjZS0+cmluZy0+ZW1pdCkgeyAvKiByZWNyZWF0ZSB1cG9uIGxvYWQvcmVzdW1lICovCi0JCXUz
MiBhZGRyID0gaW50ZWxfaHdzX3ByZWVtcHRfZG9uZV9hZGRyZXNzKGVuZ2luZSk7Ci0JCXUzMiAq
Y3M7Ci0KLQkJY3MgPSBjZS0+cmluZy0+dmFkZHI7Ci0JCWlmIChlbmdpbmUtPmNsYXNzID09IFJF
TkRFUl9DTEFTUykgewotCQkJY3MgPSBnZW44X2VtaXRfZ2d0dF93cml0ZV9yY3MoY3MsCi0JCQkJ
CQkgICAgICBHVUNfUFJFRU1QVF9GSU5JU0hFRCwKLQkJCQkJCSAgICAgIGFkZHIsCi0JCQkJCQkg
ICAgICBQSVBFX0NPTlRST0xfQ1NfU1RBTEwpOwotCQl9IGVsc2UgewotCQkJY3MgPSBnZW44X2Vt
aXRfZ2d0dF93cml0ZShjcywKLQkJCQkJCSAgR1VDX1BSRUVNUFRfRklOSVNIRUQsCi0JCQkJCQkg
IGFkZHIsCi0JCQkJCQkgIDApOwotCQkJKmNzKysgPSBNSV9OT09QOwotCQkJKmNzKysgPSBNSV9O
T09QOwotCQl9Ci0JCSpjcysrID0gTUlfVVNFUl9JTlRFUlJVUFQ7Ci0JCSpjcysrID0gTUlfTk9P
UDsKLQotCQljZS0+cmluZy0+ZW1pdCA9IEdVQ19QUkVFTVBUX0JSRUFEQ1JVTUJfQllURVM7Ci0J
CUdFTV9CVUdfT04oKHZvaWQgKiljcyAtIGNlLT5yaW5nLT52YWRkciAhPSBjZS0+cmluZy0+ZW1p
dCk7Ci0KLQkJZmx1c2hfZ2d0dF93cml0ZXMoY2UtPnJpbmctPnZtYSk7Ci0JfQotCi0Jc3Bpbl9s
b2NrX2lycSgmY2xpZW50LT53cV9sb2NrKTsKLQlndWNfd3FfaXRlbV9hcHBlbmQoY2xpZW50LCBl
bmdpbmUtPmd1Y19pZCwgbG93ZXJfMzJfYml0cyhjZS0+bHJjX2Rlc2MpLAotCQkJICAgR1VDX1BS
RUVNUFRfQlJFQURDUlVNQl9CWVRFUyAvIHNpemVvZih1NjQpLCAwKTsKLQlzcGluX3VubG9ja19p
cnEoJmNsaWVudC0+d3FfbG9jayk7Ci0KLQkvKgotCSAqIElmIEd1QyBmaXJtd2FyZSBwZXJmb3Jt
cyBhbiBlbmdpbmUgcmVzZXQgd2hpbGUgdGhhdCBlbmdpbmUgaGFkCi0JICogYSBwcmVlbXB0aW9u
IHBlbmRpbmcsIGl0IHdpbGwgc2V0IHRoZSB0ZXJtaW5hdGVkIGF0dHJpYnV0ZSBiaXQKLQkgKiBv
biBvdXIgcHJlZW1wdGlvbiBzdGFnZSBkZXNjcmlwdG9yLiBHdUMgZmlybXdhcmUgcmV0YWlucyBh
bGwKLQkgKiBwZW5kaW5nIHdvcmsgaXRlbXMgZm9yIGEgaGlnaC1wcmlvcml0eSBHdUMgY2xpZW50
LCB1bmxpa2UgdGhlCi0JICogbm9ybWFsLXByaW9yaXR5IEd1QyBjbGllbnQgd2hlcmUgd29yayBp
dGVtcyBhcmUgZHJvcHBlZC4gSXQKLQkgKiB3YW50cyB0byBtYWtlIHN1cmUgdGhlIHByZWVtcHQt
dG8taWRsZSB3b3JrIGRvZXNuJ3QgcnVuIHdoZW4KLQkgKiBzY2hlZHVsaW5nIHJlc3VtZXMsIGFu
ZCB1c2VzIHRoaXMgYml0IHRvIGluZm9ybSBpdHMgc2NoZWR1bGVyCi0JICogYW5kIHByZXN1bWFi
bHkgdXMgYXMgd2VsbC4gT3VyIGpvYiBpcyB0byBjbGVhciBpdCBmb3IgdGhlIG5leHQKLQkgKiBw
cmVlbXB0aW9uIGFmdGVyIHJlc2V0LCBvdGhlcndpc2UgdGhhdCBhbmQgZnV0dXJlIHByZWVtcHRp
b25zCi0JICogd2lsbCBuZXZlciBjb21wbGV0ZS4gV2UnbGwganVzdCBjbGVhciBpdCBldmVyeSB0
aW1lLgotCSAqLwotCXN0YWdlX2Rlc2MtPmF0dHJpYnV0ZSAmPSB+R1VDX1NUQUdFX0RFU0NfQVRU
Ul9URVJNSU5BVEVEOwotCi0JZGF0YVswXSA9IElOVEVMX0dVQ19BQ1RJT05fUkVRVUVTVF9QUkVF
TVBUSU9OOwotCWRhdGFbMV0gPSBjbGllbnQtPnN0YWdlX2lkOwotCWRhdGFbMl0gPSBJTlRFTF9H
VUNfUFJFRU1QVF9PUFRJT05fRFJPUF9XT1JLX1EgfAotCQkgIElOVEVMX0dVQ19QUkVFTVBUX09Q
VElPTl9EUk9QX1NVQk1JVF9ROwotCWRhdGFbM10gPSBlbmdpbmUtPmd1Y19pZDsKLQlkYXRhWzRd
ID0gZ3VjLT5leGVjYnVmX2NsaWVudC0+cHJpb3JpdHk7Ci0JZGF0YVs1XSA9IGd1Yy0+ZXhlY2J1
Zl9jbGllbnQtPnN0YWdlX2lkOwotCWRhdGFbNl0gPSBpbnRlbF9ndWNfZ2d0dF9vZmZzZXQoZ3Vj
LCBndWMtPnNoYXJlZF9kYXRhKTsKLQotCWlmIChXQVJOX09OKGludGVsX2d1Y19zZW5kKGd1Yywg
ZGF0YSwgQVJSQVlfU0laRShkYXRhKSkpKSB7Ci0JCWludGVsX3dyaXRlX3N0YXR1c19wYWdlKGVu
Z2luZSwKLQkJCQkJSTkxNV9HRU1fSFdTX1BSRUVNUFQsCi0JCQkJCUdVQ19QUkVFTVBUX05PTkUp
OwotCQl0YXNrbGV0X3NjaGVkdWxlKCZlbmdpbmUtPmV4ZWNsaXN0cy50YXNrbGV0KTsKLQl9Ci0K
LQkodm9pZClJOTE1X1NFTEZURVNUX09OTFkoZW5naW5lLT5leGVjbGlzdHMucHJlZW1wdF9oYW5n
LmNvdW50KyspOwotfQotCi0vKgotICogV2UncmUgdXNpbmcgdXNlciBpbnRlcnJ1cHQgYW5kIEhX
U1AgdmFsdWUgdG8gbWFyayB0aGF0IHByZWVtcHRpb24gaGFzCi0gKiBmaW5pc2hlZCBhbmQgR1BV
IGlzIGlkbGUuIE5vcm1hbGx5LCB3ZSBjb3VsZCB1bndpbmQgYW5kIGNvbnRpbnVlIHNpbWlsYXIg
dG8KLSAqIGV4ZWNsaXN0cyBzdWJtaXNzaW9uIHBhdGguIFVuZm9ydHVuYXRlbHksIHdpdGggR3VD
IHdlIGFsc28gbmVlZCB0byB3YWl0IGZvcgotICogaXQgdG8gZmluaXNoIGl0cyBvd24gcG9zdHBy
b2Nlc3NpbmcsIGJlZm9yZSBhdHRlbXB0aW5nIHRvIHN1Ym1pdC4gT3RoZXJ3aXNlCi0gKiBHdUMg
bWF5IHNpbGVudGx5IGlnbm9yZSBvdXIgc3VibWlzc2lvbnMsIGFuZCB0aHVzIHdlIHJpc2sgbG9z
aW5nIHJlcXVlc3QgYXQKLSAqIGJlc3QsIGV4ZWN1dGluZyBvdXQtb2Ytb3JkZXIgYW5kIGNhdXNp
bmcga2VybmVsIHBhbmljIGF0IHdvcnN0LgotICovCi0jZGVmaW5lIEdVQ19QUkVFTVBUX1BPU1RQ
Uk9DRVNTX0RFTEFZX01TIDEwCi1zdGF0aWMgdm9pZCB3YWl0X2Zvcl9ndWNfcHJlZW1wdF9yZXBv
cnQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQotewotCXN0cnVjdCBpbnRlbF9ndWMg
Kmd1YyA9ICZlbmdpbmUtPmk5MTUtPmd1YzsKLQlzdHJ1Y3QgZ3VjX3NoYXJlZF9jdHhfZGF0YSAq
ZGF0YSA9IGd1Yy0+c2hhcmVkX2RhdGFfdmFkZHI7Ci0Jc3RydWN0IGd1Y19jdHhfcmVwb3J0ICpy
ZXBvcnQgPQotCQkmZGF0YS0+cHJlZW1wdF9jdHhfcmVwb3J0W2VuZ2luZS0+Z3VjX2lkXTsKLQot
CWlmICh3YWl0X2Zvcl9hdG9taWMocmVwb3J0LT5yZXBvcnRfcmV0dXJuX3N0YXR1cyA9PQotCQkJ
ICAgIElOVEVMX0dVQ19SRVBPUlRfU1RBVFVTX0NPTVBMRVRFLAotCQkJICAgIEdVQ19QUkVFTVBU
X1BPU1RQUk9DRVNTX0RFTEFZX01TKSkKLQkJRFJNX0VSUk9SKCJUaW1lZCBvdXQgd2FpdGluZyBm
b3IgR3VDIHByZWVtcHRpb24gcmVwb3J0XG4iKTsKLQkvKgotCSAqIEd1QyBpcyBleHBlY3Rpbmcg
dGhhdCB3ZSdyZSBhbHNvIGdvaW5nIHRvIGNsZWFyIHRoZSBhZmZlY3RlZCBjb250ZXh0Ci0JICog
Y291bnRlciwgbGV0J3MgYWxzbyByZXNldCB0aGUgcmV0dXJuIHN0YXR1cyB0byBub3QgZGVwZW5k
IG9uIEd1QwotCSAqIHJlc2V0dGluZyBpdCBhZnRlciByZWNpZXZpbmcgYW5vdGhlciBwcmVlbXB0
IGFjdGlvbgotCSAqLwotCXJlcG9ydC0+YWZmZWN0ZWRfY291bnQgPSAwOwotCXJlcG9ydC0+cmVw
b3J0X3JldHVybl9zdGF0dXMgPSBJTlRFTF9HVUNfUkVQT1JUX1NUQVRVU19VTktOT1dOOwotfQot
Ci1zdGF0aWMgdm9pZCBjb21wbGV0ZV9wcmVlbXB0X2NvbnRleHQoc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lKQotewotCXN0cnVjdCBpbnRlbF9lbmdpbmVfZXhlY2xpc3RzICpleGVjbGlz
dHMgPSAmZW5naW5lLT5leGVjbGlzdHM7Ci0KLQlpZiAoaW5qZWN0X3ByZWVtcHRfaGFuZyhleGVj
bGlzdHMpKQotCQlyZXR1cm47Ci0KLQlleGVjbGlzdHNfY2FuY2VsX3BvcnRfcmVxdWVzdHMoZXhl
Y2xpc3RzKTsKLQlleGVjbGlzdHNfdW53aW5kX2luY29tcGxldGVfcmVxdWVzdHMoZXhlY2xpc3Rz
KTsKLQotCXdhaXRfZm9yX2d1Y19wcmVlbXB0X3JlcG9ydChlbmdpbmUpOwotCWludGVsX3dyaXRl
X3N0YXR1c19wYWdlKGVuZ2luZSwgSTkxNV9HRU1fSFdTX1BSRUVNUFQsIEdVQ19QUkVFTVBUX05P
TkUpOwotfQotCiBzdGF0aWMgdm9pZCBndWNfc3VibWl0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSwKIAkJICAgICAgIHN0cnVjdCBpOTE1X3JlcXVlc3QgKipvdXQsCiAJCSAgICAgICBz
dHJ1Y3QgaTkxNV9yZXF1ZXN0ICoqZW5kKQpAQCAtNzQyLDIxICs2MTUsNiBAQCBzdGF0aWMgdm9p
ZCBfX2d1Y19kZXF1ZXVlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAlsb2NrZGVw
X2Fzc2VydF9oZWxkKCZlbmdpbmUtPmFjdGl2ZS5sb2NrKTsKIAogCWlmIChsYXN0KSB7Ci0JCWlm
IChpbnRlbF9lbmdpbmVfaGFzX3ByZWVtcHRpb24oZW5naW5lKSkgewotCQkJc3RydWN0IGd1Y19w
cmVlbXB0X3dvcmsgKnByZWVtcHRfd29yayA9Ci0JCQkJJmVuZ2luZS0+aTkxNS0+Z3VjLnByZWVt
cHRfd29ya1tlbmdpbmUtPmlkXTsKLQkJCWludCBwcmlvID0gZXhlY2xpc3RzLT5xdWV1ZV9wcmlv
cml0eV9oaW50OwotCi0JCQlpZiAoaTkxNV9zY2hlZHVsZXJfbmVlZF9wcmVlbXB0KHByaW8sIHJx
X3ByaW8obGFzdCkpKSB7Ci0JCQkJaW50ZWxfd3JpdGVfc3RhdHVzX3BhZ2UoZW5naW5lLAotCQkJ
CQkJCUk5MTVfR0VNX0hXU19QUkVFTVBULAotCQkJCQkJCUdVQ19QUkVFTVBUX0lOUFJPR1JFU1Mp
OwotCQkJCXF1ZXVlX3dvcmsoZW5naW5lLT5pOTE1LT5ndWMucHJlZW1wdF93cSwKLQkJCQkJICAg
JnByZWVtcHRfd29yay0+d29yayk7Ci0JCQkJcmV0dXJuOwotCQkJfQotCQl9Ci0KIAkJaWYgKCor
K2ZpcnN0KQogCQkJcmV0dXJuOwogCkBAIC04MjAsMTIgKzY3OCw3IEBAIHN0YXRpYyB2b2lkIGd1
Y19zdWJtaXNzaW9uX3Rhc2tsZXQodW5zaWduZWQgbG9uZyBkYXRhKQogCQltZW1tb3ZlKGV4ZWNs
aXN0cy0+aW5mbGlnaHQsIHBvcnQsIHJlbSAqIHNpemVvZigqcG9ydCkpOwogCX0KIAotCWlmIChp
bnRlbF9yZWFkX3N0YXR1c19wYWdlKGVuZ2luZSwgSTkxNV9HRU1fSFdTX1BSRUVNUFQpID09Ci0J
ICAgIEdVQ19QUkVFTVBUX0ZJTklTSEVEKQotCQljb21wbGV0ZV9wcmVlbXB0X2NvbnRleHQoZW5n
aW5lKTsKLQotCWlmICghaW50ZWxfcmVhZF9zdGF0dXNfcGFnZShlbmdpbmUsIEk5MTVfR0VNX0hX
U19QUkVFTVBUKSkKLQkJX19ndWNfZGVxdWV1ZShlbmdpbmUpOworCV9fZ3VjX2RlcXVldWUoZW5n
aW5lKTsKIAogCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmVuZ2luZS0+YWN0aXZlLmxvY2ssIGZs
YWdzKTsKIH0KQEAgLTg0NiwxNiArNjk5LDYgQEAgc3RhdGljIHZvaWQgZ3VjX3Jlc2V0X3ByZXBh
cmUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCSAqIHByZXZlbnRzIHRoZSByYWNl
LgogCSAqLwogCV9fdGFza2xldF9kaXNhYmxlX3N5bmNfb25jZSgmZXhlY2xpc3RzLT50YXNrbGV0
KTsKLQotCS8qCi0JICogV2UncmUgdXNpbmcgd29ya2VyIHRvIHF1ZXVlIHByZWVtcHRpb24gcmVx
dWVzdHMgZnJvbSB0aGUgdGFza2xldCBpbgotCSAqIEd1QyBzdWJtaXNzaW9uIG1vZGUuCi0JICog
RXZlbiB0aG91Z2ggdGFza2xldCB3YXMgZGlzYWJsZWQsIHdlIG1heSBzdGlsbCBoYXZlIGEgd29y
a2VyIHF1ZXVlZC4KLQkgKiBMZXQncyBtYWtlIHN1cmUgdGhhdCBhbGwgd29ya2VycyBzY2hlZHVs
ZWQgYmVmb3JlIGRpc2FibGluZyB0aGUKLQkgKiB0YXNrbGV0IGFyZSBjb21wbGV0ZWQgYmVmb3Jl
IGNvbnRpbnVpbmcgd2l0aCB0aGUgcmVzZXQuCi0JICovCi0JaWYgKGVuZ2luZS0+aTkxNS0+Z3Vj
LnByZWVtcHRfd3EpCi0JCWZsdXNoX3dvcmtxdWV1ZShlbmdpbmUtPmk5MTUtPmd1Yy5wcmVlbXB0
X3dxKTsKIH0KIAogc3RhdGljIHZvaWQgZ3VjX3Jlc2V0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSwgYm9vbCBzdGFsbGVkKQpAQCAtMTExMiw3ICs5NTUsNiBAQCBzdGF0aWMgaW50IGd1
Y19jbGllbnRzX2NyZWF0ZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAJc3RydWN0IGludGVsX2d1
Y19jbGllbnQgKmNsaWVudDsKIAogCUdFTV9CVUdfT04oZ3VjLT5leGVjYnVmX2NsaWVudCk7Ci0J
R0VNX0JVR19PTihndWMtPnByZWVtcHRfY2xpZW50KTsKIAogCWNsaWVudCA9IGd1Y19jbGllbnRf
YWxsb2MoZGV2X3ByaXYsCiAJCQkJICBJTlRFTF9JTkZPKGRldl9wcml2KS0+ZW5naW5lX21hc2ss
CkBAIC0xMTI0LDIwICs5NjYsNiBAQCBzdGF0aWMgaW50IGd1Y19jbGllbnRzX2NyZWF0ZShzdHJ1
Y3QgaW50ZWxfZ3VjICpndWMpCiAJfQogCWd1Yy0+ZXhlY2J1Zl9jbGllbnQgPSBjbGllbnQ7CiAK
LQlpZiAoZGV2X3ByaXYtPnByZWVtcHRfY29udGV4dCkgewotCQljbGllbnQgPSBndWNfY2xpZW50
X2FsbG9jKGRldl9wcml2LAotCQkJCQkgIElOVEVMX0lORk8oZGV2X3ByaXYpLT5lbmdpbmVfbWFz
aywKLQkJCQkJICBHVUNfQ0xJRU5UX1BSSU9SSVRZX0tNRF9ISUdILAotCQkJCQkgIGRldl9wcml2
LT5wcmVlbXB0X2NvbnRleHQpOwotCQlpZiAoSVNfRVJSKGNsaWVudCkpIHsKLQkJCURSTV9FUlJP
UigiRmFpbGVkIHRvIGNyZWF0ZSBHdUMgY2xpZW50IGZvciBwcmVlbXB0aW9uIVxuIik7Ci0JCQln
dWNfY2xpZW50X2ZyZWUoZ3VjLT5leGVjYnVmX2NsaWVudCk7Ci0JCQlndWMtPmV4ZWNidWZfY2xp
ZW50ID0gTlVMTDsKLQkJCXJldHVybiBQVFJfRVJSKGNsaWVudCk7Ci0JCX0KLQkJZ3VjLT5wcmVl
bXB0X2NsaWVudCA9IGNsaWVudDsKLQl9Ci0KIAlyZXR1cm4gMDsKIH0KIApAQCAtMTE0NSwxMCAr
OTczLDYgQEAgc3RhdGljIHZvaWQgZ3VjX2NsaWVudHNfZGVzdHJveShzdHJ1Y3QgaW50ZWxfZ3Vj
ICpndWMpCiB7CiAJc3RydWN0IGludGVsX2d1Y19jbGllbnQgKmNsaWVudDsKIAotCWNsaWVudCA9
IGZldGNoX2FuZF96ZXJvKCZndWMtPnByZWVtcHRfY2xpZW50KTsKLQlpZiAoY2xpZW50KQotCQln
dWNfY2xpZW50X2ZyZWUoY2xpZW50KTsKLQogCWNsaWVudCA9IGZldGNoX2FuZF96ZXJvKCZndWMt
PmV4ZWNidWZfY2xpZW50KTsKIAlpZiAoY2xpZW50KQogCQlndWNfY2xpZW50X2ZyZWUoY2xpZW50
KTsKQEAgLTExOTEsMjggKzEwMTUsMTEgQEAgc3RhdGljIHZvaWQgX19ndWNfY2xpZW50X2Rpc2Fi
bGUoc3RydWN0IGludGVsX2d1Y19jbGllbnQgKmNsaWVudCkKIAogc3RhdGljIGludCBndWNfY2xp
ZW50c19lbmFibGUoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogewotCWludCByZXQ7Ci0KLQlyZXQg
PSBfX2d1Y19jbGllbnRfZW5hYmxlKGd1Yy0+ZXhlY2J1Zl9jbGllbnQpOwotCWlmIChyZXQpCi0J
CXJldHVybiByZXQ7Ci0KLQlpZiAoZ3VjLT5wcmVlbXB0X2NsaWVudCkgewotCQlyZXQgPSBfX2d1
Y19jbGllbnRfZW5hYmxlKGd1Yy0+cHJlZW1wdF9jbGllbnQpOwotCQlpZiAocmV0KSB7Ci0JCQlf
X2d1Y19jbGllbnRfZGlzYWJsZShndWMtPmV4ZWNidWZfY2xpZW50KTsKLQkJCXJldHVybiByZXQ7
Ci0JCX0KLQl9Ci0KLQlyZXR1cm4gMDsKKwlyZXR1cm4gX19ndWNfY2xpZW50X2VuYWJsZShndWMt
PmV4ZWNidWZfY2xpZW50KTsKIH0KIAogc3RhdGljIHZvaWQgZ3VjX2NsaWVudHNfZGlzYWJsZShz
dHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiB7Ci0JaWYgKGd1Yy0+cHJlZW1wdF9jbGllbnQpCi0JCV9f
Z3VjX2NsaWVudF9kaXNhYmxlKGd1Yy0+cHJlZW1wdF9jbGllbnQpOwotCiAJaWYgKGd1Yy0+ZXhl
Y2J1Zl9jbGllbnQpCiAJCV9fZ3VjX2NsaWVudF9kaXNhYmxlKGd1Yy0+ZXhlY2J1Zl9jbGllbnQp
OwogfQpAQCAtMTIyMyw5ICsxMDMwLDYgQEAgc3RhdGljIHZvaWQgZ3VjX2NsaWVudHNfZGlzYWJs
ZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAgKi8KIGludCBpbnRlbF9ndWNfc3VibWlzc2lvbl9p
bml0KHN0cnVjdCBpbnRlbF9ndWMgKmd1YykKIHsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYgPSBndWNfdG9faTkxNShndWMpOwotCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZTsKLQllbnVtIGludGVsX2VuZ2luZV9pZCBpZDsKIAlpbnQgcmV0OwogCiAJaWYgKGd1Yy0+
c3RhZ2VfZGVzY19wb29sKQpAQCAtMTI0NSwxMSArMTA0OSw2IEBAIGludCBpbnRlbF9ndWNfc3Vi
bWlzc2lvbl9pbml0KHN0cnVjdCBpbnRlbF9ndWMgKmd1YykKIAlpZiAocmV0KQogCQlnb3RvIGVy
cl9wb29sOwogCi0JZm9yX2VhY2hfZW5naW5lKGVuZ2luZSwgZGV2X3ByaXYsIGlkKSB7Ci0JCWd1
Yy0+cHJlZW1wdF93b3JrW2lkXS5lbmdpbmUgPSBlbmdpbmU7Ci0JCUlOSVRfV09SSygmZ3VjLT5w
cmVlbXB0X3dvcmtbaWRdLndvcmssIGluamVjdF9wcmVlbXB0X2NvbnRleHQpOwotCX0KLQogCXJl
dHVybiAwOwogCiBlcnJfcG9vbDoKQEAgLTEyNTksMTMgKzEwNTgsNiBAQCBpbnQgaW50ZWxfZ3Vj
X3N1Ym1pc3Npb25faW5pdChzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAKIHZvaWQgaW50ZWxfZ3Vj
X3N1Ym1pc3Npb25fZmluaShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiB7Ci0Jc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2ID0gZ3VjX3RvX2k5MTUoZ3VjKTsKLQlzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmU7Ci0JZW51bSBpbnRlbF9lbmdpbmVfaWQgaWQ7Ci0KLQlmb3JfZWFj
aF9lbmdpbmUoZW5naW5lLCBkZXZfcHJpdiwgaWQpCi0JCWNhbmNlbF93b3JrX3N5bmMoJmd1Yy0+
cHJlZW1wdF93b3JrW2lkXS53b3JrKTsKLQogCWd1Y19jbGllbnRzX2Rlc3Ryb3koZ3VjKTsKIAlX
QVJOX09OKCFndWNfdmVyaWZ5X2Rvb3JiZWxscyhndWMpKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX2d1Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvc2VsZnRlc3RzL2ludGVsX2d1Yy5jCmluZGV4IDZjYTg1ODRjZDY0Yy4uMWExOTE1ZTQ0ZjZi
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaW50ZWxfZ3VjLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX2d1Yy5jCkBAIC0xMDMs
MTMgKzEwMywxMCBAQCBzdGF0aWMgaW50IHJpbmdfZG9vcmJlbGxfbm9wKHN0cnVjdCBpbnRlbF9n
dWNfY2xpZW50ICpjbGllbnQpCiAvKgogICogQmFzaWMgY2xpZW50IHNhbml0eSBjaGVjaywgaGFu
ZHkgdG8gdmFsaWRhdGUgY3JlYXRlX2NsaWVudHMuCiAgKi8KLXN0YXRpYyBpbnQgdmFsaWRhdGVf
Y2xpZW50KHN0cnVjdCBpbnRlbF9ndWNfY2xpZW50ICpjbGllbnQsCi0JCQkgICBpbnQgY2xpZW50
X3ByaW9yaXR5LAotCQkJICAgYm9vbCBpc19wcmVlbXB0X2NsaWVudCkKK3N0YXRpYyBpbnQgdmFs
aWRhdGVfY2xpZW50KHN0cnVjdCBpbnRlbF9ndWNfY2xpZW50ICpjbGllbnQsIGludCBjbGllbnRf
cHJpb3JpdHkpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gZ3VjX3Rv
X2k5MTUoY2xpZW50LT5ndWMpOwotCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHhfb3duZXIg
PSBpc19wcmVlbXB0X2NsaWVudCA/Ci0JCQlkZXZfcHJpdi0+cHJlZW1wdF9jb250ZXh0IDogZGV2
X3ByaXYtPmtlcm5lbF9jb250ZXh0OworCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHhfb3du
ZXIgPSBkZXZfcHJpdi0+a2VybmVsX2NvbnRleHQ7CiAKIAlpZiAoY2xpZW50LT5vd25lciAhPSBj
dHhfb3duZXIgfHwKIAkgICAgY2xpZW50LT5lbmdpbmVzICE9IElOVEVMX0lORk8oZGV2X3ByaXYp
LT5lbmdpbmVfbWFzayB8fApAQCAtMTYzLDcgKzE2MCw3IEBAIHN0YXRpYyBpbnQgaWd0X2d1Y19j
bGllbnRzKHZvaWQgKmFyZ3MpCiAJICovCiAJZ3VjX2NsaWVudHNfZGlzYWJsZShndWMpOwogCWd1
Y19jbGllbnRzX2Rlc3Ryb3koZ3VjKTsKLQlpZiAoZ3VjLT5leGVjYnVmX2NsaWVudCB8fCBndWMt
PnByZWVtcHRfY2xpZW50KSB7CisJaWYgKGd1Yy0+ZXhlY2J1Zl9jbGllbnQpIHsKIAkJcHJfZXJy
KCJndWNfY2xpZW50c19kZXN0cm95IGxpZWQhXG4iKTsKIAkJZXJyID0gLUVJTlZBTDsKIAkJZ290
byB1bmxvY2s7CkBAIC0xNzcsMjQgKzE3NCwxNCBAQCBzdGF0aWMgaW50IGlndF9ndWNfY2xpZW50
cyh2b2lkICphcmdzKQogCUdFTV9CVUdfT04oIWd1Yy0+ZXhlY2J1Zl9jbGllbnQpOwogCiAJZXJy
ID0gdmFsaWRhdGVfY2xpZW50KGd1Yy0+ZXhlY2J1Zl9jbGllbnQsCi0JCQkgICAgICBHVUNfQ0xJ
RU5UX1BSSU9SSVRZX0tNRF9OT1JNQUwsIGZhbHNlKTsKKwkJCSAgICAgIEdVQ19DTElFTlRfUFJJ
T1JJVFlfS01EX05PUk1BTCk7CiAJaWYgKGVycikgewogCQlwcl9lcnIoImV4ZWNidWcgY2xpZW50
IHZhbGlkYXRpb24gZmFpbGVkXG4iKTsKIAkJZ290byBvdXQ7CiAJfQogCi0JaWYgKGd1Yy0+cHJl
ZW1wdF9jbGllbnQpIHsKLQkJZXJyID0gdmFsaWRhdGVfY2xpZW50KGd1Yy0+cHJlZW1wdF9jbGll
bnQsCi0JCQkJICAgICAgR1VDX0NMSUVOVF9QUklPUklUWV9LTURfSElHSCwgdHJ1ZSk7Ci0JCWlm
IChlcnIpIHsKLQkJCXByX2VycigicHJlZW1wdCBjbGllbnQgdmFsaWRhdGlvbiBmYWlsZWRcbiIp
OwotCQkJZ290byBvdXQ7Ci0JCX0KLQl9Ci0KLQkvKiBlYWNoIGNsaWVudCBzaG91bGQgbm93IGhh
dmUgcmVzZXJ2ZWQgYSBkb29yYmVsbCAqLwotCWlmICghaGFzX2Rvb3JiZWxsKGd1Yy0+ZXhlY2J1
Zl9jbGllbnQpIHx8Ci0JICAgIChndWMtPnByZWVtcHRfY2xpZW50ICYmICFoYXNfZG9vcmJlbGwo
Z3VjLT5wcmVlbXB0X2NsaWVudCkpKSB7CisJLyogdGhlIGNsaWVudCBzaG91bGQgbm93IGhhdmUg
cmVzZXJ2ZWQgYSBkb29yYmVsbCAqLworCWlmICghaGFzX2Rvb3JiZWxsKGd1Yy0+ZXhlY2J1Zl9j
bGllbnQpKSB7CiAJCXByX2VycigiZ3VjX2NsaWVudHNfY3JlYXRlIGRpZG4ndCByZXNlcnZlIGRv
b3JiZWxsc1xuIik7CiAJCWVyciA9IC1FSU5WQUw7CiAJCWdvdG8gb3V0OwpAQCAtMjA0LDggKzE5
MSw3IEBAIHN0YXRpYyBpbnQgaWd0X2d1Y19jbGllbnRzKHZvaWQgKmFyZ3MpCiAJZ3VjX2NsaWVu
dHNfZW5hYmxlKGd1Yyk7CiAKIAkvKiBlYWNoIGNsaWVudCBzaG91bGQgbm93IGhhdmUgcmVjZWl2
ZWQgYSBkb29yYmVsbCAqLwotCWlmICghY2xpZW50X2Rvb3JiZWxsX2luX3N5bmMoZ3VjLT5leGVj
YnVmX2NsaWVudCkgfHwKLQkgICAgIWNsaWVudF9kb29yYmVsbF9pbl9zeW5jKGd1Yy0+cHJlZW1w
dF9jbGllbnQpKSB7CisJaWYgKCFjbGllbnRfZG9vcmJlbGxfaW5fc3luYyhndWMtPmV4ZWNidWZf
Y2xpZW50KSkgewogCQlwcl9lcnIoImZhaWxlZCB0byBpbml0aWFsaXplIHRoZSBkb29yYmVsbHNc
biIpOwogCQllcnIgPSAtRUlOVkFMOwogCQlnb3RvIG91dDsKQEAgLTMwMCw4ICsyODYsNyBAQCBz
dGF0aWMgaW50IGlndF9ndWNfZG9vcmJlbGxzKHZvaWQgKmFyZykKIAkJCWdvdG8gb3V0OwogCQl9
CiAKLQkJZXJyID0gdmFsaWRhdGVfY2xpZW50KGNsaWVudHNbaV0sCi0JCQkJICAgICAgaSAlIEdV
Q19DTElFTlRfUFJJT1JJVFlfTlVNLCBmYWxzZSk7CisJCWVyciA9IHZhbGlkYXRlX2NsaWVudChj
bGllbnRzW2ldLCBpICUgR1VDX0NMSUVOVF9QUklPUklUWV9OVU0pOwogCQlpZiAoZXJyKSB7CiAJ
CQlwcl9lcnIoIlslZF0gY2xpZW50X2FsbG9jIHNhbml0eSBjaGVjayBmYWlsZWQhXG4iLCBpKTsK
IAkJCWVyciA9IC1FSU5WQUw7Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeA==

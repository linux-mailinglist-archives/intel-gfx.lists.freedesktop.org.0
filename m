Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BD3349FA88
	for <lists+intel-gfx@lfdr.de>; Wed, 28 Aug 2019 08:30:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 03F4E89A77;
	Wed, 28 Aug 2019 06:30:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5919989A77
 for <intel-gfx@lists.freedesktop.org>; Wed, 28 Aug 2019 06:30:27 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 27 Aug 2019 23:30:26 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,440,1559545200"; d="scan'208";a="171441138"
Received: from aborowie-mobl.ger.corp.intel.com (HELO [10.249.35.21])
 ([10.249.35.21])
 by orsmga007.jf.intel.com with ESMTP; 27 Aug 2019 23:30:24 -0700
To: Manasi Navare <manasi.d.navare@intel.com>, intel-gfx@lists.freedesktop.org
References: <20190827221735.29351-1-manasi.d.navare@intel.com>
 <20190827221735.29351-3-manasi.d.navare@intel.com>
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Message-ID: <af763463-d321-901d-3bad-1fa6de598dba@linux.intel.com>
Date: Wed, 28 Aug 2019 08:30:23 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.2
MIME-Version: 1.0
In-Reply-To: <20190827221735.29351-3-manasi.d.navare@intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 2/2] drm/i915/display: Move the
 commit_tail() disable sequence to commit_modeset_disables() hook
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T3AgMjgtMDgtMjAxOSBvbSAwMDoxNyBzY2hyZWVmIE1hbmFzaSBOYXZhcmU6Cj4gQ3JlYXRlIGEg
bmV3IGhvb2sgY29tbWl0X21vZGVzZXRfZGlzYWJsZXMoKSBjb25zaXN0ZW50IHdpdGggdGhlIG5h
bWluZwo+IGluIGRybSBhdG9taWMgaGVscGVycyBhbmQgc2ltaWxhciB0byB0aGUgY29tbWl0X21v
ZGVzZXRfZW5hYmxlcygpIGhvb2suCj4gVGhpcyBoZWxwcyBiZXR0ZXIgb3JnYW5pemUgdGhlIGRp
c2FibGUgc2VxdWVuY2UgaW4gYXRvbWljX2NvbW1pdF90YWlsKCkKPiBhbmQgbW92ZSB0aGF0IHRv
IHRoaXMgZGlzYWJsZSBob29rLgo+Cj4gTm8gZnVuY3Rpb25hbCBjaGFuZ2UKPgo+IHYzOgo+ICog
UmViYXNlIChNYW5hc2kpCj4gdjI6Cj4gKiBDcmVhdGUgYSBoZWxwZXIgZm9yIG9sZF9jcnRjX3N0
YXRlIGRpc2FibGVzIChMdWNhcykKPgo+IFN1Z2dlc3RlZC1ieTogRGFuaWVsIFZldHRlciA8ZGFu
aWVsLnZldHRlckBpbnRlbC5jb20+Cj4gQ2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFs
YUBsaW51eC5pbnRlbC5jb20+Cj4gQ2M6IE1hYXJ0ZW4gTGFua2hvcnN0IDxtYWFydGVuLmxhbmto
b3JzdEBsaW51eC5pbnRlbC5jb20+Cj4gQ2M6IE1hdHQgUm9wZXIgPG1hdHRoZXcuZC5yb3BlckBp
bnRlbC5jb20+Cj4gQ2M6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBpbnRlbC5jb20+Cj4gU2ln
bmVkLW9mZi1ieTogTWFuYXNpIE5hdmFyZSA8bWFuYXNpLmQubmF2YXJlQGludGVsLmNvbT4KPiAt
LS0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgfCA5NCAr
KysrKysrKysrKysrLS0tLS0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oICAg
ICAgICAgICAgICB8ICAxICsKPiAgMiBmaWxlcyBjaGFuZ2VkLCA2MSBpbnNlcnRpb25zKCspLCAz
NCBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheS5jCj4gaW5kZXggMjNjOGM3ZjVjNDdhLi43ZjBhYjAxMDE1NjkgMTAwNjQ0Cj4gLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwo+IEBAIC0xMzc1OCw2
ICsxMzc1OCw2MSBAQCBzdGF0aWMgdm9pZCBpbnRlbF91cGRhdGVfY3J0YyhzdHJ1Y3QgaW50ZWxf
Y3J0YyAqY3J0YywKPiAgCWludGVsX2ZpbmlzaF9jcnRjX2NvbW1pdChzdGF0ZSwgY3J0Yyk7Cj4g
IH0KPiAgCj4gK3N0YXRpYyB2b2lkIGludGVsX29sZF9jcnRjX3N0YXRlX2Rpc2FibGVzKHN0cnVj
dCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAo+ICsJCQkJCSAgc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKm9sZF9jcnRjX3N0YXRlLAo+ICsJCQkJCSAgc3RydWN0IGludGVsX2NydGNfc3RhdGUg
Km5ld19jcnRjX3N0YXRlLAo+ICsJCQkJCSAgc3RydWN0IGludGVsX2NydGMgKmNydGMpCj4gK3sK
PiArCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoc3RhdGUtPmJh
c2UuZGV2KTsKPiArCj4gKwlpbnRlbF9jcnRjX2Rpc2FibGVfcGxhbmVzKHN0YXRlLCBjcnRjKTsK
PiArCj4gKwkvKgo+ICsJICogV2UgbmVlZCB0byBkaXNhYmxlIHBpcGUgQ1JDIGJlZm9yZSBkaXNh
YmxpbmcgdGhlIHBpcGUsCj4gKwkgKiBvciB3ZSByYWNlIGFnYWluc3QgdmJsYW5rIG9mZi4KPiAr
CSAqLwo+ICsJaW50ZWxfY3J0Y19kaXNhYmxlX3BpcGVfY3JjKGNydGMpOwo+ICsKPiArCWRldl9w
cml2LT5kaXNwbGF5LmNydGNfZGlzYWJsZShvbGRfY3J0Y19zdGF0ZSwgc3RhdGUpOwo+ICsJY3J0
Yy0+YWN0aXZlID0gZmFsc2U7Cj4gKwlpbnRlbF9mYmNfZGlzYWJsZShjcnRjKTsKPiArCWludGVs
X2Rpc2FibGVfc2hhcmVkX2RwbGwob2xkX2NydGNfc3RhdGUpOwo+ICsKPiArCS8qCj4gKwkgKiBV
bmRlcnJ1bnMgZG9uJ3QgYWx3YXlzIHJhaXNlIGludGVycnVwdHMsCj4gKwkgKiBzbyBjaGVjayBt
YW51YWxseS4KPiArCSAqLwo+ICsJaW50ZWxfY2hlY2tfY3B1X2ZpZm9fdW5kZXJydW5zKGRldl9w
cml2KTsKPiArCWludGVsX2NoZWNrX3BjaF9maWZvX3VuZGVycnVucyhkZXZfcHJpdik7Cj4gKwo+
ICsJLyogRklYTUUgdW5pZnkgdGhpcyBmb3IgYWxsIHBsYXRmb3JtcyAqLwo+ICsJaWYgKCFuZXdf
Y3J0Y19zdGF0ZS0+YmFzZS5hY3RpdmUgJiYKPiArCSAgICAhSEFTX0dNQ0goZGV2X3ByaXYpICYm
Cj4gKwkgICAgZGV2X3ByaXYtPmRpc3BsYXkuaW5pdGlhbF93YXRlcm1hcmtzKQo+ICsJCWRldl9w
cml2LT5kaXNwbGF5LmluaXRpYWxfd2F0ZXJtYXJrcyhzdGF0ZSwKPiArCQkJCQkJICAgICBuZXdf
Y3J0Y19zdGF0ZSk7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGludGVsX2NvbW1pdF9tb2Rlc2V0
X2Rpc2FibGVzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQo+ICt7Cj4gKwlzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqbmV3X2NydGNfc3RhdGUsICpvbGRfY3J0Y19zdGF0ZTsKPiAr
CXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjOwo+ICsJaW50IGk7Cj4gKwo+ICsJZm9yX2VhY2hfb2xk
bmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsIG9sZF9jcnRjX3N0YXRlLCBuZXdf
Y3J0Y19zdGF0ZSwgaSkgewo+ICsJCWlmICghbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkp
Cj4gKwkJCWNvbnRpbnVlOwo+ICsKPiArCQlpbnRlbF9wcmVfcGxhbmVfdXBkYXRlKG9sZF9jcnRj
X3N0YXRlLCBuZXdfY3J0Y19zdGF0ZSk7Cj4gKwo+ICsJCWlmIChvbGRfY3J0Y19zdGF0ZS0+YmFz
ZS5hY3RpdmUpCj4gKwkJCWludGVsX29sZF9jcnRjX3N0YXRlX2Rpc2FibGVzKHN0YXRlLAo+ICsJ
CQkJCQkgICAgICBvbGRfY3J0Y19zdGF0ZSwKPiArCQkJCQkJICAgICAgbmV3X2NydGNfc3RhdGUs
Cj4gKwkJCQkJCSAgICAgIGNydGMpOwo+ICsJfQo+ICt9Cj4gKwo+ICBzdGF0aWMgdm9pZCBpbnRl
bF9jb21taXRfbW9kZXNldF9lbmFibGVzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRl
KQo+ICB7Cj4gIAlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YzsKPiBAQCAtMTM5MzgsNDIgKzEzOTkz
LDEwIEBAIHN0YXRpYyB2b2lkIGludGVsX2F0b21pY19jb21taXRfdGFpbChzdHJ1Y3QgaW50ZWxf
YXRvbWljX3N0YXRlICpzdGF0ZSkKPiAgCQkJcHV0X2RvbWFpbnNbY3J0Yy0+cGlwZV0gPQo+ICAJ
CQkJbW9kZXNldF9nZXRfY3J0Y19wb3dlcl9kb21haW5zKG5ld19jcnRjX3N0YXRlKTsKPiAgCQl9
Cj4gLQo+IC0JCWlmICghbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkpCj4gLQkJCWNvbnRp
bnVlOwo+IC0KPiAtCQlpbnRlbF9wcmVfcGxhbmVfdXBkYXRlKG9sZF9jcnRjX3N0YXRlLCBuZXdf
Y3J0Y19zdGF0ZSk7Cj4gLQo+IC0JCWlmIChvbGRfY3J0Y19zdGF0ZS0+YmFzZS5hY3RpdmUpIHsK
PiAtCQkJaW50ZWxfY3J0Y19kaXNhYmxlX3BsYW5lcyhzdGF0ZSwgY3J0Yyk7Cj4gLQo+IC0JCQkv
Kgo+IC0JCQkgKiBXZSBuZWVkIHRvIGRpc2FibGUgcGlwZSBDUkMgYmVmb3JlIGRpc2FibGluZyB0
aGUgcGlwZSwKPiAtCQkJICogb3Igd2UgcmFjZSBhZ2FpbnN0IHZibGFuayBvZmYuCj4gLQkJCSAq
Lwo+IC0JCQlpbnRlbF9jcnRjX2Rpc2FibGVfcGlwZV9jcmMoY3J0Yyk7Cj4gLQo+IC0JCQlkZXZf
cHJpdi0+ZGlzcGxheS5jcnRjX2Rpc2FibGUob2xkX2NydGNfc3RhdGUsIHN0YXRlKTsKPiAtCQkJ
Y3J0Yy0+YWN0aXZlID0gZmFsc2U7Cj4gLQkJCWludGVsX2ZiY19kaXNhYmxlKGNydGMpOwo+IC0J
CQlpbnRlbF9kaXNhYmxlX3NoYXJlZF9kcGxsKG9sZF9jcnRjX3N0YXRlKTsKPiAtCj4gLQkJCS8q
Cj4gLQkJCSAqIFVuZGVycnVucyBkb24ndCBhbHdheXMgcmFpc2UKPiAtCQkJICogaW50ZXJydXB0
cywgc28gY2hlY2sgbWFudWFsbHkuCj4gLQkJCSAqLwo+IC0JCQlpbnRlbF9jaGVja19jcHVfZmlm
b191bmRlcnJ1bnMoZGV2X3ByaXYpOwo+IC0JCQlpbnRlbF9jaGVja19wY2hfZmlmb191bmRlcnJ1
bnMoZGV2X3ByaXYpOwo+IC0KPiAtCQkJLyogRklYTUUgdW5pZnkgdGhpcyBmb3IgYWxsIHBsYXRm
b3JtcyAqLwo+IC0JCQlpZiAoIW5ld19jcnRjX3N0YXRlLT5iYXNlLmFjdGl2ZSAmJgo+IC0JCQkg
ICAgIUhBU19HTUNIKGRldl9wcml2KSAmJgo+IC0JCQkgICAgZGV2X3ByaXYtPmRpc3BsYXkuaW5p
dGlhbF93YXRlcm1hcmtzKQo+IC0JCQkJZGV2X3ByaXYtPmRpc3BsYXkuaW5pdGlhbF93YXRlcm1h
cmtzKHN0YXRlLAo+IC0JCQkJCQkJCSAgICAgbmV3X2NydGNfc3RhdGUpOwo+IC0JCX0KPiAgCX0K
PiAgCj4gKwlkZXZfcHJpdi0+ZGlzcGxheS5jb21taXRfbW9kZXNldF9kaXNhYmxlcyhzdGF0ZSk7
Cj4gKwo+ICAJLyogRklYTUU6IEV2ZW50dWFsbHkgZ2V0IHJpZCBvZiBvdXIgY3J0Yy0+Y29uZmln
IHBvaW50ZXIgKi8KPiAgCWZvcl9lYWNoX25ld19pbnRlbF9jcnRjX2luX3N0YXRlKHN0YXRlLCBj
cnRjLCBuZXdfY3J0Y19zdGF0ZSwgaSkKPiAgCQljcnRjLT5jb25maWcgPSBuZXdfY3J0Y19zdGF0
ZTsKPiBAQCAtMTU5MjksNiArMTU5NTIsOSBAQCB2b2lkIGludGVsX2luaXRfZGlzcGxheV9ob29r
cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCj4gIAkJZGV2X3ByaXYtPmRpc3Bs
YXkuY29tbWl0X21vZGVzZXRfZW5hYmxlcyA9IHNrbF9jb21taXRfbW9kZXNldF9lbmFibGVzOwo+
ICAJZWxzZQo+ICAJCWRldl9wcml2LT5kaXNwbGF5LmNvbW1pdF9tb2Rlc2V0X2VuYWJsZXMgPSBp
bnRlbF9jb21taXRfbW9kZXNldF9lbmFibGVzOwo+ICsKPiArCWRldl9wcml2LT5kaXNwbGF5LmNv
bW1pdF9tb2Rlc2V0X2Rpc2FibGVzID0gaW50ZWxfY29tbWl0X21vZGVzZXRfZGlzYWJsZXM7Cj4g
Kwo+ICB9Cj4gIAo+ICBzdGF0aWMgaTkxNV9yZWdfdCBpOTE1X3ZnYWNudHJsX3JlZyhzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCj4gaW5k
ZXggNzVhNDJlOGRmNjdlLi5kYjc0ODA4MzFlNTIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kcnYuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmgKPiBAQCAtMjg5LDYgKzI4OSw3IEBAIHN0cnVjdCBkcm1faTkxNV9kaXNwbGF5X2Z1bmNzIHsK
PiAgCXZvaWQgKCpjcnRjX2Rpc2FibGUpKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0
Y19zdGF0ZSwKPiAgCQkJICAgICBzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpvbGRfc3RhdGUp
Owo+ICAJdm9pZCAoKmNvbW1pdF9tb2Rlc2V0X2VuYWJsZXMpKHN0cnVjdCBpbnRlbF9hdG9taWNf
c3RhdGUgKnN0YXRlKTsKPiArCXZvaWQgKCpjb21taXRfbW9kZXNldF9kaXNhYmxlcykoc3RydWN0
IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpOwo+ICAJdm9pZCAoKmF1ZGlvX2NvZGVjX2VuYWJs
ZSkoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCj4gIAkJCQkgICBjb25zdCBzdHJ1Y3Qg
aW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKPiAgCQkJCSAgIGNvbnN0IHN0cnVjdCBkcm1f
Y29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRlKTsKCkhleSwKCk5hY2ssIHRoZXJlIGlzIG5vIG5l
ZWQgdG8gc3RhcnQgaW50cm9kdWNpbmcgYSBzcGVjaWFsIGNhc2UgaGVyZS4gVGhlIHNhbWUgZW5h
YmxlIGFuZCBkaXNhYmxlIHNlcXVlbmNlIGZvciBnZW4xMSB3aWxsIHN0aWxsIHdvcmsgYWxsIHRo
ZSB3YXkgYmFjayB0byBnZW45IGlmIHRyYW5zY29kZXIgc3luYyBpcyBub3QgdXNlZC4gOikgRm9y
IGRpc2FibGUgYWxsIHRoZSB3YXkgYmFjayB0byBnZW4yLgoKSXQgY291bGQgc3RpbGwgYmUgYmVu
ZWZpY2lhbCB0byBtYWtlIHRob3NlIHNlcGFyYXRlIGZ1bmN0aW9ucywganVzdCBubyBmdW5jdGlv
biBwb2ludGVyLgoKaW50ZWxfb2xkX2NydGNfc3RhdGVfZGlzYWJsZXMoCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0
CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

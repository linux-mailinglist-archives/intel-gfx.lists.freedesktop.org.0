Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3A1FFBB9DE
	for <lists+intel-gfx@lfdr.de>; Mon, 23 Sep 2019 18:47:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8A6A36E977;
	Mon, 23 Sep 2019 16:47:38 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D0D3B6E977
 for <intel-gfx@lists.freedesktop.org>; Mon, 23 Sep 2019 16:47:37 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 23 Sep 2019 09:47:37 -0700
X-IronPort-AV: E=Sophos;i="5.64,541,1559545200"; d="scan'208";a="339782121"
Received: from ideak-desk.fi.intel.com ([10.237.68.142])
 by orsmga004-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 23 Sep 2019 09:47:34 -0700
Date: Mon, 23 Sep 2019 19:46:37 +0300
From: Imre Deak <imre.deak@intel.com>
To: Anshuman Gupta <anshuman.gupta@intel.com>
Message-ID: <20190923164637.GE26457@ideak-desk.fi.intel.com>
References: <20190913082339.1785-1-anshuman.gupta@intel.com>
 <20190913082339.1785-7-anshuman.gupta@intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190913082339.1785-7-anshuman.gupta@intel.com>
User-Agent: Mutt/1.9.4 (2018-02-28)
Subject: Re: [Intel-gfx] [PATCH v8 6/7] drm/i915/tgl: switch between dc3co
 and dc5 based on display idleness
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: imre.deak@intel.com
Cc: jani.nikula@intel.com, intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCBTZXAgMTMsIDIwMTkgYXQgMDE6NTM6MzhQTSArMDUzMCwgQW5zaHVtYW4gR3VwdGEg
d3JvdGU6Cj4gREMzQ08gaXMgdXNlZnVsIHBvd2VyIHN0YXRlLCB3aGVuIERNQyBkZXRlY3RzIFBT
UjIgaWRsZSBmcmFtZQo+IHdoaWxlIGFuIGFjdGl2ZSB2aWRlbyBwbGF5YmFjaywgcGxheWluZyAz
MGZwcyB2aWRlbyBvbiA2MGh6IHBhbmVsCj4gaXMgdGhlIGNsYXNzaWMgZXhhbXBsZSBvZiB0aGlz
IHVzZSBjYXNlLgo+IAo+IEIuU3BlY3M6NDkxOTYgaGFzIGEgcmVzdHJpY3Rpb24gdG8gZW5hYmxl
IERDM0NPIG9ubHkgZm9yIFZpZGVvIFBsYXliYWNrLgo+IEl0IHdpbGwgYmUgd29ydGh5IHRvIGVu
YWJsZSBEQzNDTyBhZnRlciBjb21wbGV0aW9uIG9mIGVhY2ggcGFnZWZsaXAKPiBhbmQgc3dpdGNo
IGJhY2sgdG8gREM1IHdoZW4gZGlzcGxheSBpcyBpZGxlIGJlY2F1c2UgZHJpdmVyIGRvZXNuJ3QK
PiBkaWZmZXJlbnRpYXRlIGJldHdlZW4gdmlkZW8gcGxheWJhY2sgYW5kIGEgbm9ybWFsIHBhZ2Vm
bGlwLgo+IFdlIHdpbGwgdXNlIEZyb250YnVmZmVyIGZsdXNoIGNhbGwgdGdsX2RjM2NvX2ZsdXNo
KCkgdG8gZW5hYmxlIERDM0NPCj4gc3RhdGUgb25seSBmb3IgT1JJR0lOX0ZMSVAgZmx1c2ggY2Fs
bCwgYmVjYXVzZSBEQzNDTyBzdGF0ZSBoYXMgcHJpbWFyaWx5Cj4gdGFyZ2V0ZWQgZm9yIFZQQiB1
c2UgY2FzZS4gV2UgYXJlIG5vdCBpbnRlcmVzdGVkIGhlcmUgZm9yIGZyb250YnVmZmVyCj4gaW52
YWxpZGF0ZXMgY2FsbHMgYmVjYXVzZSB0aGF0IHRyaWdnZXJzIFBTUjIgZXhpdCwgd2hpY2ggd2ls
bAo+IGV4cGxpY2l0bHkgZGlzYWJsZSBEQzNDTy4KPiAKPiBEQzUgYW5kIERDNiBzYXZlcyBtb3Jl
IHBvd2VyLCBidXQgY2FuJ3QgYmUgZW50ZXJlZCBkdXJpbmcgdmlkZW8KPiBwbGF5YmFjayBiZWNh
dXNlIHRoZXJlIGFyZSBub3QgZW5vdWdoIGlkbGUgZnJhbWVzIGluIGEgcm93IHRvIG1lZXQKPiBt
b3N0IFBTUjIgcGFuZWwgZGVlcCBzbGVlcCBlbnRyeSByZXF1aXJlbWVudCB0eXBpY2FsbHkgNCBm
cmFtZXMuCj4gQXMgUFNSMiBleGlzdGluZyBpbXBsZW1lbnRhdGlvbiBpcyB1c2luZyBtaW5pbXVt
IDYgaWRsZSBmcmFtZXMgZm9yCj4gZGVlcCBzbGVlcCwgaXQgaXMgc2FmZXIgdG8gZW5hYmxlIERD
NS82IGFmdGVyIDYgaWRsZSBmcmFtZXMKPiAoQnkgc2NoZWR1bGluZyBhIGRlbGF5ZWQgd29yayBv
ZiA2IGlkbGUgZnJhbWVzLCBvbmNlIERDM0NPIGhhcyBiZWVuCj4gZW5hYmxlZCBhZnRlciBhIHBh
Z2VmbGlwKS4KPiAKPiBBZnRlciBtYW51YWxseSB3YWl0aW5nIGZvciA2IGlkbGUgZnJhbWVzIERD
NS82IHdpbGwgYmUgZW5hYmxlZCBhbmQKPiBQU1IyIGRlZXAgc2xlZXAgaWRsZSBmcmFtZXMgd2ls
bCBiZSByZXN0b3JlZCB0byA2IGlkbGUgZnJhbWVzLCBhdCB0aGlzCj4gcG9pbnQgRE1DIHdpbGwg
dHJpZ2dlcnMgREM1LzYgb25jZSBQU1IyIGVudGVycyB0byBkZWVwIHNsZWVwIGFmdGVyCj4gNiBp
ZGxlIGZyYW1lcy4KPiBJbiBmdXR1cmUgd2hlbiB3ZSB3aWxsIGVuYWJsZSBTL1cgUFNSMiB0cmFj
a2luZywgd2UgY2FuIGNoYW5nZSB0aGUKPiBQU1IyIHJlcXVpcmVkIGRlZXAgc2xlZXAgaWRsZSBm
cmFtZXMgdG8gMSBzbyBETUMgY2FuIHRyaWdnZXIgdGhlCj4gREM1LzYgaW1tZWRpYXRlbHkgYWZ0
ZXIgUy9XIG1hbnVhbCB3YWl0aW5nIG9mIDYgaWRsZSBmcmFtZXMgZ2V0Cj4gY29tcGxldGUuCj4g
Cj4gdjI6IGNhbGN1bGF0ZWQgcy93IHN0YXRlIHRvIHN3aXRjaCBvdmVyIGRjM2NvIHdoZW4gdGhl
cmUgaXMgYW4KPiAgICAgdXBkYXRlLiBbSW1yZV0KPiAgICAgVXNlZCBjYW5jZWxfZGVsYXllZF93
b3JrX3N5bmMoKSBpbiBvcmRlciB0byBhdm9pZCBhbnkgcmFjZQo+ICAgICB3aXRoIGFscmVhZHkg
c2NoZWR1bGVkIGRlbGF5ZWQgd29yay4gW0ltcmVdCj4gdjM6IENhbmNlbF9kZWxheWVkX3dvcmtf
c3luYygpIG1heSBibG9ja2VkIHRoZSBjb21taXQgd29yay4KPiAgICAgaGVuY2UgZHJvcHBpbmcg
aXQsIGRjNV9pZGxlX3RocmVhZCgpIGNoZWNrcyB0aGUgdmFsaWQgd2FrZXJlZiBiZWZvcmUKPiAg
ICAgcHV0dGluZyB0aGUgcmVmZXJlbmNlIGNvdW50LCB3aGljaCBhdm9pZHMgYW55IGNoYW5jZXMg
b2YgZHJvcHBpbmcKPiAgICAgYSB6ZXJvIHdha2VyZWYuIFtJbXJlIChJUkMpXQo+IHY0OiBVc2Vk
IGZyb250YnVmZmVyIGZsdXNoIG1lY2hhbmlzbS4gW0ltcmVdCj4gdjU6IFVzZWQgcHNyLnBpcGUg
dG8gZXh0cmFjdCBmcm9udGJ1ZmZlciBidXN5IGJpdHMuIFtJbXJlXQo+ICAgICBVc2VkIGNhbmNl
bF9kZWxheWVkX3dvcmtfc3luYygpIGluIGVuY29kZXIgZGlzYWJsZSBwYXRoLiBbSW1yZV0KPiAg
ICAgVXNlZCBtb2RfZGVsYXllZF93b3JrKCkgaW5zdGVhZCBvZiBjYW5jZWxsaW5nIGFuZCBzY2hl
ZHVsaW5nIGEKPiAgICAgZGVsYXllZCB3b3JrLiBbSW1yZV0KPiAgICAgVXNlZCBwc3IubG9jayBp
biB0Z2xfZGM1X2lkbGVfdGhyZWFkKCkgdG8gZW5hYmxlIHBzcjIgZGVlcAo+ICAgICBzbGVlcC4g
W0ltcmVdCj4gICAgIFJlbW92ZWQgREM1X1JFUV9JRExFX0ZSQU1FUyBtYWNyby4gW0ltcmVdCj4g
Cj4gQ2M6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBpbnRlbC5jb20+Cj4gQ2M6IEltcmUgRGVh
ayA8aW1yZS5kZWFrQGludGVsLmNvbT4KPiBDYzogQW5pbWVzaCBNYW5uYSA8YW5pbWVzaC5tYW5u
YUBpbnRlbC5jb20+Cj4gU2lnbmVkLW9mZi1ieTogQW5zaHVtYW4gR3VwdGEgPGFuc2h1bWFuLmd1
cHRhQGludGVsLmNvbT4KPiAtLS0KPiAgLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eV9wb3dlci5jICAgIHwgOTcgKysrKysrKysrKysrKysrKysrKwo+ICAuLi4vZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmggICAgfCAgNCArCj4gIC4uLi9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9mcm9udGJ1ZmZlci5jICB8ICAxICsKPiAgZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9wc3IuYyAgICAgIHwgIDEgKwo+ICBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Rydi5oICAgICAgICAgICAgICAgfCAgMSArCj4gIDUgZmlsZXMgY2hhbmdlZCwgMTA0
IGluc2VydGlvbnMoKykKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXlfcG93ZXIuYwo+IGluZGV4IDQyZWFiY2RlY2YwMC4uYTYwNTA0N2NiMjhh
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eV9wb3dlci5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5X3Bvd2VyLmMKPiBAQCAtMjAsNiArMjAsNyBAQAo+ICAjaW5jbHVkZSAiaW50ZWxfc2lkZWJh
bmQuaCIKPiAgI2luY2x1ZGUgImludGVsX3RjLmgiCj4gICNpbmNsdWRlICJpbnRlbF9wbS5oIgo+
ICsjaW5jbHVkZSAiaW50ZWxfcHNyLmgiCj4gIAo+ICBib29sIGludGVsX2Rpc3BsYXlfcG93ZXJf
d2VsbF9pc19lbmFibGVkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiAgCQkJ
CQkgZW51bSBpOTE1X3Bvd2VyX3dlbGxfaWQgcG93ZXJfd2VsbF9pZCk7Cj4gQEAgLTc3Myw2ICs3
NzQsMjcgQEAgc3RhdGljIHZvaWQgZ2VuOV9zZXRfZGNfc3RhdGUoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2LCB1MzIgc3RhdGUpCj4gIAlkZXZfcHJpdi0+Y3NyLmRjX3N0YXRlID0g
dmFsICYgbWFzazsKPiAgfQo+ICAKPiArc3RhdGljIHUzMiBpbnRlbF9nZXRfZnJhbWVfdGltZV91
cyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3N0YXRlKQo+ICt7Cj4gKwl1MzIgcGl4
ZWxfcmF0ZSwgY3J0Y19odG90YWwsIGNydGNfdnRvdGFsOwo+ICsJdTMyIGZyYW1ldGltZV91czsK
PiArCj4gKwlpZiAoIWNzdGF0ZSB8fCAhY3N0YXRlLT5iYXNlLmFjdGl2ZSkKPiArCQlyZXR1cm4g
MDsKPiArCj4gKwlwaXhlbF9yYXRlID0gY3N0YXRlLT5waXhlbF9yYXRlOwo+ICsKPiArCWlmIChX
QVJOX09OKHBpeGVsX3JhdGUgPT0gMCkpCj4gKwkJcmV0dXJuIDA7Cj4gKwo+ICsJY3J0Y19odG90
YWwgPSBjc3RhdGUtPmJhc2UuYWRqdXN0ZWRfbW9kZS5jcnRjX2h0b3RhbDsKPiArCWNydGNfdnRv
dGFsID0gY3N0YXRlLT5iYXNlLmFkanVzdGVkX21vZGUuY3J0Y192dG90YWw7Cj4gKwlmcmFtZXRp
bWVfdXMgPSBESVZfUk9VTkRfVVAoY3J0Y19odG90YWwgKiBjcnRjX3Z0b3RhbCAqIDEwMDBVTEws
Cj4gKwkJCQkgICAgcGl4ZWxfcmF0ZSk7Cj4gKwo+ICsJcmV0dXJuIGZyYW1ldGltZV91czsKPiAr
fQo+ICsKPiAgdm9pZCB0Z2xfZGlzYWJsZV9wc3IyX3RyYW5zY29kZXJfZXhpdGxpbmUoY29uc3Qg
c3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNzdGF0ZSkKPiAgewo+ICAJc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShjc3RhdGUtPmJhc2UuY3J0Yy0+ZGV2KTsKPiBA
QCAtNzg0LDYgKzgwNiw5IEBAIHZvaWQgdGdsX2Rpc2FibGVfcHNyMl90cmFuc2NvZGVyX2V4aXRs
aW5lKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjc3RhdGUpCj4gIAl2YWwgPSBJOTE1
X1JFQUQoRVhJVExJTkUoY3N0YXRlLT5jcHVfdHJhbnNjb2RlcikpOwo+ICAJdmFsICY9IH5FWElU
TElORV9FTkFCTEU7Cj4gIAlJOTE1X1dSSVRFKEVYSVRMSU5FKGNzdGF0ZS0+Y3B1X3RyYW5zY29k
ZXIpLCB2YWwpOwo+ICsKPiArCS8qIEFzIHBzcjIgZW5jb2RlciBoYXMgZGlzYWJsZWQsIGNhbmNl
bCB0aGUgZGM1IGlkbGUgZGVsYXllZCB3b3JrICovCj4gKwljYW5jZWxfZGVsYXllZF93b3JrX3N5
bmMoJmRldl9wcml2LT5jc3IuaWRsZV93b3JrKTsKPiAgfQo+ICAKPiAgdm9pZCB0Z2xfZW5hYmxl
X3BzcjJfdHJhbnNjb2Rlcl9leGl0bGluZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
Y3N0YXRlKQo+IEBAIC04MTcsNiArODQyLDYwIEBAIHZvaWQgdGdsX2VuYWJsZV9wc3IyX3RyYW5z
Y29kZXJfZXhpdGxpbmUoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNzdGF0ZSkKPiAg
CUk5MTVfV1JJVEUoRVhJVExJTkUoY3N0YXRlLT5jcHVfdHJhbnNjb2RlciksIHZhbCk7Cj4gIH0K
PiAgCj4gKy8qCj4gKyAqIFdoZW4gd2Ugd2lsbCBlbmFibGUgbWFudWFsIFBTUjIgUy9XIHRyYWNr
aW5nIGluIGZ1dHVyZQo+ICsgKiB3ZSB3aWxsIGltcGxlbWVudCB0aGlzIGVudGlyZSBEQzNDTyBm
bHVzaCBsb2dpYyBpbgo+ICsgKiBpbnRlbF9wc3JfZmx1c2goKS4KPiArICovCj4gK3ZvaWQgdGds
X2RjM2NvX2ZsdXNoKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiArCQkgICAg
IHVuc2lnbmVkIGludCBmcm9udGJ1ZmZlcl9iaXRzLCBlbnVtIGZiX29wX29yaWdpbiBvcmlnaW4p
Cj4gK3sKPiArCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjc3RhdGU7Cj4gKwlzdHJ1Y3QgaW50
ZWxfY3J0YyAqY3J0YzsKPiArCXUzMiBkZWxheTsKPiArCXVuc2lnbmVkIGludCBidXN5X2Zyb250
YnVmZmVyX2JpdHM7Cj4gKwo+ICsJaWYgKCFJU19USUdFUkxBS0UoZGV2X3ByaXYpKQo+ICsJCXJl
dHVybjsKPiArCj4gKwlpZiAoIShkZXZfcHJpdi0+Y3NyLmFsbG93ZWRfZGNfbWFzayAmIERDX1NU
QVRFX0VOX0RDM0NPKSkKPiArCQlyZXR1cm47CgpDb3VsZCB3ZSB1c2UgY3J0Y19zdGF0ZS0+ZGMz
Y29fZXhpdGxpbmUgaW5zdGVhZCBvZiB0aGUgdHdvIGNoZWNrcyBhYm92ZT8KCj4gKwo+ICsJaWYg
KG9yaWdpbiAhPSBPUklHSU5fRkxJUCkKPiArCQlyZXR1cm47Cj4gKwo+ICsJbXV0ZXhfbG9jaygm
ZGV2X3ByaXYtPnBzci5sb2NrKTsKPiArCWNydGMgPSBpbnRlbF9nZXRfY3J0Y19mb3JfcGlwZShk
ZXZfcHJpdiwgZGV2X3ByaXYtPnBzci5waXBlKTsKPiArCWNzdGF0ZSA9IHRvX2ludGVsX2NydGNf
c3RhdGUoY3J0Yy0+YmFzZS5zdGF0ZSk7Cj4gKwo+ICsJZnJvbnRidWZmZXJfYml0cyAmPQo+ICsJ
CUlOVEVMX0ZST05UQlVGRkVSX0FMTF9NQVNLKGRldl9wcml2LT5wc3IucGlwZSk7Cj4gKwo+ICsJ
YnVzeV9mcm9udGJ1ZmZlcl9iaXRzICY9IH5mcm9udGJ1ZmZlcl9iaXRzOwoKVGhpcyBpcyBzdGls
bCB3cm9uZywgYnVzeV9mcm9udGJ1ZmZlcl9iaXRzIGlzIG5vdCBpbml0ZWQuCgo+ICsKPiArCWlm
ICghZGV2X3ByaXYtPnBzci5wc3IyX2VuYWJsZWQgfHwgIWRldl9wcml2LT5wc3IuYWN0aXZlKQo+
ICsJCWdvdG8gdW5sb2NrOwo+ICsKPiArCS8qCj4gKwkgKiBBdCBldmVyeSBmbGlwIGZyb250YnVm
ZmVyIGZsdXNoIG1vZGlmaWVkIGRlbGF5IG9mIGRlbGF5ZWQgd29yaywKPiArCSAqIHdoZW4gZGVs
YXllZCBzY2hlZHVsZXMgdGhhdCBtZWFucyBkaXNwbGF5IGhhcyBiZWVuIGlkbGUuCj4gKwkgKi8K
PiArCWlmICghYnVzeV9mcm9udGJ1ZmZlcl9iaXRzKSB7Cj4gKwkJaWYgKCFkZXZfcHJpdi0+cHNy
LnBzcjJfZGVlcF9zbHBfZGlzYWJsZWQpIHsKCkkgdGhpbmsgcmVlbmFibGluZyBQU1IgZGVlcCBz
bGVlcCBpZiBpdCB3YXMgYWxyZWFkeSBlbmFibGVkIGlzIG5vdCBhCnByb2JsZW0sIHdlIGRvbid0
IG5lZWQgYSBmbGFnIGp1c3QgdG8gYXZvaWQgdGhhdC4KCj4gKwkJCXRnbF9wc3IyX2RlZXBfc2xl
ZXBfZGlzYWJsZShkZXZfcHJpdik7Cj4gKwkJCWRldl9wcml2LT5wc3IucHNyMl9kZWVwX3NscF9k
aXNhYmxlZCA9IHRydWU7Cj4gKwkJfQo+ICsJCXRnbF9zZXRfdGFyZ2V0X2RjX3N0YXRlKGRldl9w
cml2LCBEQ19TVEFURV9FTl9EQzNDTyk7Cj4gKwkJLyogREM1L0RDNiByZXF1aXJlZCBpZGxlIGZy
YW1lcyA9IDYgKi8KPiArCQlkZWxheSA9IDYgKiBpbnRlbF9nZXRfZnJhbWVfdGltZV91cyhjc3Rh
dGUpOwo+ICsJCW1vZF9kZWxheWVkX3dvcmsoc3lzdGVtX3dxLCAmZGV2X3ByaXYtPmNzci5pZGxl
X3dvcmssCj4gKwkJCQkgdXNlY3NfdG9famlmZmllcyhkZWxheSkpOwo+ICsJfQo+ICsKPiArdW5s
b2NrOgo+ICsJbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+cHNyLmxvY2spOwo+ICt9Cj4gKwo+ICBz
dGF0aWMgYm9vbCB0Z2xfZGMzY29faXNfZWRwX2Nvbm5lY3RlZChzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZSAgKmNydGNfc3RhdGUpCj4gIHsKPiAgCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0
ZSA9IGNydGNfc3RhdGUtPmJhc2Uuc3RhdGU7Cj4gQEAgLTg3Niw2ICs5NTUsMjMgQEAgdm9pZCB0
Z2xfZGMzY29fY3J0Y19nZXRfY29uZmlnKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0
YXRlKQo+ICAJCWNydGNfc3RhdGUtPmhhc19kYzNjb19leGl0bGluZSA9IHRydWU7Cj4gIH0KPiAg
Cj4gK3ZvaWQgdGdsX2RjNV9pZGxlX3RocmVhZChzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCj4g
K3sKPiArCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9Cj4gKwkJY29udGFpbmVy
X29mKHdvcmssIHR5cGVvZigqZGV2X3ByaXYpLCBjc3IuaWRsZV93b3JrLndvcmspOwo+ICsKPiAr
CS8qIElmIGRlbGF5ZWQgd29yayBpcyBwZW5kaW5nLCBpdCBpcyBub3QgaWRsZSAqLwo+ICsJaWYg
KGRlbGF5ZWRfd29ya19wZW5kaW5nKCZkZXZfcHJpdi0+Y3NyLmlkbGVfd29yaykpCj4gKwkJcmV0
dXJuOwoKVGhlIGFib3ZlIHNob3VsZCBiZSBjaGVja2VkIHdpdGggdGhlIHBzci5sb2NrIGhlbGQg
dG8gYXZvaWQgYSByYWNlLgoKPiArCj4gKwlEUk1fREVCVUdfS01TKCJEQzUvNiBpZGxlIHRocmVh
ZFxuIik7Cj4gKwltdXRleF9sb2NrKCZkZXZfcHJpdi0+cHNyLmxvY2spOwo+ICsJdGdsX3NldF90
YXJnZXRfZGNfc3RhdGUoZGV2X3ByaXYsIERDX1NUQVRFX0VOX1VQVE9fREM2KTsKPiArCXRnbF9w
c3IyX2RlZXBfc2xlZXBfZW5hYmxlKGRldl9wcml2KTsKPiArCWRldl9wcml2LT5wc3IucHNyMl9k
ZWVwX3NscF9kaXNhYmxlZCA9IGZhbHNlOwo+ICsJbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+cHNy
LmxvY2spOwo+ICt9Cj4gKwo+ICBzdGF0aWMgdm9pZAo+ICBhbGxvd2VkX2RjX21hc2tfdG9fdGFy
Z2V0X2RjX3N0YXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgewo+IEBA
IC00MjM3LDYgKzQzMzMsNyBAQCBpbnQgaW50ZWxfcG93ZXJfZG9tYWluc19pbml0KHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgCj4gIAlJTklUX0RFTEFZRURfV09SSygmcG93
ZXJfZG9tYWlucy0+YXN5bmNfcHV0X3dvcmssCj4gIAkJCSAgaW50ZWxfZGlzcGxheV9wb3dlcl9w
dXRfYXN5bmNfd29yayk7Cj4gKwlJTklUX0RFTEFZRURfV09SSygmZGV2X3ByaXYtPmNzci5pZGxl
X3dvcmssIHRnbF9kYzVfaWRsZV90aHJlYWQpOwo+ICAKPiAgCS8qCj4gIAkgKiBUaGUgZW5hYmxp
bmcgb3JkZXIgd2lsbCBiZSBmcm9tIGxvd2VyIHRvIGhpZ2hlciBpbmRleGVkIHdlbGxzLAo+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93
ZXIuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5o
Cj4gaW5kZXggYmY2OGYyNmE1YTM3Li44NzcyNWEyM2ZlYWQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmgKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuaAo+IEBAIC05LDYg
KzksNyBAQAo+ICAjaW5jbHVkZSAiaW50ZWxfZGlzcGxheS5oIgo+ICAjaW5jbHVkZSAiaW50ZWxf
cnVudGltZV9wbS5oIgo+ICAjaW5jbHVkZSAiaTkxNV9yZWcuaCIKPiArI2luY2x1ZGUgImludGVs
X2Zyb250YnVmZmVyLmgiCj4gIAo+ICBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZTsKPiAgc3RydWN0
IGludGVsX2VuY29kZXI7Cj4gQEAgLTI2NSw2ICsyNjYsOSBAQCB2b2lkIHRnbF9kYzNjb19jcnRj
X2NvbXB1dGVfY29uZmlnKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiAgdm9p
ZCB0Z2xfZGMzY29fY3J0Y19nZXRfY29uZmlnKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlKTsKPiAgdm9pZCB0Z2xfZGlzYWJsZV9wc3IyX3RyYW5zY29kZXJfZXhpdGxpbmUoY29u
c3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnN0YXRlKTsKPiAgdm9pZCB0Z2xfZW5hYmxlX3Bz
cjJfdHJhbnNjb2Rlcl9leGl0bGluZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqc3Rh
dGUpOwo+ICt2b2lkIHRnbF9kYzNjb19mbHVzaChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYsCj4gKwkJICAgICB1bnNpZ25lZCBpbnQgZnJvbnRidWZmZXJfYml0cywgZW51bSBmYl9v
cF9vcmlnaW4gb3JpZ2luKTsKPiArdm9pZCB0Z2xfZGM1X2lkbGVfdGhyZWFkKHN0cnVjdCB3b3Jr
X3N0cnVjdCAqd29yayk7Cj4gIAo+ICBjb25zdCBjaGFyICoKPiAgaW50ZWxfZGlzcGxheV9wb3dl
cl9kb21haW5fc3RyKGVudW0gaW50ZWxfZGlzcGxheV9wb3dlcl9kb21haW4gZG9tYWluKTsKPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mcm9udGJ1ZmZl
ci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mcm9udGJ1ZmZlci5jCj4g
aW5kZXggZmM0MGRjMWZkYmNjLi5jM2IxMGY2ZTQzODIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mcm9udGJ1ZmZlci5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mcm9udGJ1ZmZlci5jCj4gQEAgLTkwLDYgKzkwLDcg
QEAgc3RhdGljIHZvaWQgZnJvbnRidWZmZXJfZmx1c2goc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUsCj4gIAltaWdodF9zbGVlcCgpOwo+ICAJaW50ZWxfZWRwX2RycnNfZmx1c2goaTkxNSwg
ZnJvbnRidWZmZXJfYml0cyk7Cj4gIAlpbnRlbF9wc3JfZmx1c2goaTkxNSwgZnJvbnRidWZmZXJf
Yml0cywgb3JpZ2luKTsKPiArCXRnbF9kYzNjb19mbHVzaChpOTE1LCBmcm9udGJ1ZmZlcl9iaXRz
LCBvcmlnaW4pOwo+ICAJaW50ZWxfZmJjX2ZsdXNoKGk5MTUsIGZyb250YnVmZmVyX2JpdHMsIG9y
aWdpbik7Cj4gIH0KPiAgCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfcHNyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Bzci5j
Cj4gaW5kZXggMTFkMzdmOTZjZTcxLi41NTJlYWYyYmQxNmYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wc3IuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHNyLmMKPiBAQCAtNTc0LDYgKzU3NCw3IEBAIHN0YXRpYyB2
b2lkIHRnbF9kaXNhbGxvd19kYzNjb19vbl9wc3IyX2V4aXQoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2KQo+ICAJY2FuY2VsX2RlbGF5ZWRfd29yaygmZGV2X3ByaXYtPmNzci5pZGxl
X3dvcmspOwo+ICAJLyogQmVmb3JlIFBTUjIgZXhpdCBkaXNhbGxvdyBkYzNjbyovCj4gIAl0Z2xf
c2V0X3RhcmdldF9kY19zdGF0ZShkZXZfcHJpdiwgRENfU1RBVEVfRU5fVVBUT19EQzYpOwo+ICsJ
ZGV2X3ByaXYtPnBzci5wc3IyX2RlZXBfc2xwX2Rpc2FibGVkID0gZmFsc2U7Cj4gIH0KPiAgCj4g
IHN0YXRpYyBib29sIGludGVsX3BzcjJfY29uZmlnX3ZhbGlkKHN0cnVjdCBpbnRlbF9kcCAqaW50
ZWxfZHAsCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCj4gaW5kZXggNDUyMWI5MzgxZGIzLi4yNTU5
MWMxMjhjNTkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKPiBAQCAtMzM5LDYgKzMzOSw3
IEBAIHN0cnVjdCBpbnRlbF9jc3Igewo+ICAJdTMyIGRjX3N0YXRlOwo+ICAJdTMyIHRhcmdldF9k
Y19zdGF0ZTsKPiAgCXUzMiBhbGxvd2VkX2RjX21hc2s7Cj4gKwlzdHJ1Y3QgZGVsYXllZF93b3Jr
IGlkbGVfd29yazsKPiAgCWludGVsX3dha2VyZWZfdCB3YWtlcmVmOwo+ICB9Owo+ICAKPiAtLSAK
PiAyLjIxLjAKPiAKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

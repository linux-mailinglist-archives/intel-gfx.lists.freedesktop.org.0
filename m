Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AC55ACBD03
	for <lists+intel-gfx@lfdr.de>; Fri,  4 Oct 2019 16:22:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7D8416EBAB;
	Fri,  4 Oct 2019 14:22:49 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CA7956EBAB
 for <intel-gfx@lists.freedesktop.org>; Fri,  4 Oct 2019 14:22:47 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18724672-1500050 
 for multiple; Fri, 04 Oct 2019 15:22:27 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  4 Oct 2019 15:22:26 +0100
Message-Id: <20191004142226.13711-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915: Use helpers for drm_mm_node booleans
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QSBzdWJzZXQgb2YgNzE3MjRmNzA4OTk3ICgiZHJtL21tOiBVc2UgaGVscGVycyBmb3IgZHJtX21t
X25vZGUgYm9vbGVhbnMiKQppbiBvcmRlciB0byBwcmVwYXJlIGRybS1pbnRlbC1uZXh0LXF1ZXVl
ZCBmb3Igc3Vic2VxdWVudCBwYXRjaGVzIGJlZm9yZQp3ZSBjYW4gYmFja21lcmdlIDcxNzI0Zjcw
ODk5NyBpdHNlbGYuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdp
bHNvbi5jby51az4KQ2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYyB8ICA0
ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjX2Z3LmMgICAgICAgfCAg
MiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyAgICAgICAgICAgICAgICB8IDEy
ICsrKysrKy0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZXZpY3QuYyAgICAg
ICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jICAgICAgICAgICAg
ICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmggICAgICAgICAgICAg
ICAgfCAgNCArKy0tCiA2IGZpbGVzIGNoYW5nZWQsIDEzIGluc2VydGlvbnMoKyksIDEzIGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9l
eGVjYnVmZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZl
ci5jCmluZGV4IDhmYmI0NTRjZmQ2Yi4uMjI4Y2UyNGVhMjgwIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMKQEAgLTk2OCw3ICs5NjgsNyBAQCBz
dGF0aWMgdm9pZCByZWxvY19jYWNoZV9yZXNldChzdHJ1Y3QgcmVsb2NfY2FjaGUgKmNhY2hlKQog
CQlpbnRlbF9ndF9mbHVzaF9nZ3R0X3dyaXRlcyhnZ3R0LT52bS5ndCk7CiAJCWlvX21hcHBpbmdf
dW5tYXBfYXRvbWljKCh2b2lkIF9faW9tZW0gKil2YWRkcik7CiAKLQkJaWYgKGNhY2hlLT5ub2Rl
LmFsbG9jYXRlZCkgeworCQlpZiAoZHJtX21tX25vZGVfYWxsb2NhdGVkKCZjYWNoZS0+bm9kZSkp
IHsKIAkJCWdndHQtPnZtLmNsZWFyX3JhbmdlKCZnZ3R0LT52bSwKIAkJCQkJICAgICBjYWNoZS0+
bm9kZS5zdGFydCwKIAkJCQkJICAgICBjYWNoZS0+bm9kZS5zaXplKTsKQEAgLTEwNjEsNyArMTA2
MSw3IEBAIHN0YXRpYyB2b2lkICpyZWxvY19pb21hcChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqLAogCX0KIAogCW9mZnNldCA9IGNhY2hlLT5ub2RlLnN0YXJ0OwotCWlmIChjYWNoZS0+
bm9kZS5hbGxvY2F0ZWQpIHsKKwlpZiAoZHJtX21tX25vZGVfYWxsb2NhdGVkKCZjYWNoZS0+bm9k
ZSkpIHsKIAkJZ2d0dC0+dm0uaW5zZXJ0X3BhZ2UoJmdndHQtPnZtLAogCQkJCSAgICAgaTkxNV9n
ZW1fb2JqZWN0X2dldF9kbWFfYWRkcmVzcyhvYmosIHBhZ2UpLAogCQkJCSAgICAgb2Zmc2V0LCBJ
OTE1X0NBQ0hFX05PTkUsIDApOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
dWMvaW50ZWxfdWNfZncuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjX2Z3
LmMKaW5kZXggYmI4NzgxMTlmMDZjLi5iYjQ4ODlkMjM0NmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjX2Z3LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvdWMvaW50ZWxfdWNfZncuYwpAQCAtMzg3LDcgKzM4Nyw3IEBAIHN0YXRpYyB1MzIgdWNf
ZndfZ2d0dF9vZmZzZXQoc3RydWN0IGludGVsX3VjX2Z3ICp1Y19mdywgc3RydWN0IGk5MTVfZ2d0
dCAqZ2d0dCkKIHsKIAlzdHJ1Y3QgZHJtX21tX25vZGUgKm5vZGUgPSAmZ2d0dC0+dWNfZnc7CiAK
LQlHRU1fQlVHX09OKCFub2RlLT5hbGxvY2F0ZWQpOworCUdFTV9CVUdfT04oIWRybV9tbV9ub2Rl
X2FsbG9jYXRlZChub2RlKSk7CiAJR0VNX0JVR19PTih1cHBlcl8zMl9iaXRzKG5vZGUtPnN0YXJ0
KSk7CiAJR0VNX0JVR19PTih1cHBlcl8zMl9iaXRzKG5vZGUtPnN0YXJ0ICsgbm9kZS0+c2l6ZSAt
IDEpKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKaW5kZXggMTQyNmU1MDY3MDBkLi5mYThlMDI4
YWMwYjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwpAQCAtMzU2LDcgKzM1Niw3IEBAIGk5MTVf
Z2VtX2d0dF9wcmVhZChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCQlyZXQgPSBp
bnNlcnRfbWFwcGFibGVfbm9kZShnZ3R0LCAmbm9kZSwgUEFHRV9TSVpFKTsKIAkJaWYgKHJldCkK
IAkJCWdvdG8gb3V0X3VubG9jazsKLQkJR0VNX0JVR19PTighbm9kZS5hbGxvY2F0ZWQpOworCQlH
RU1fQlVHX09OKCFkcm1fbW1fbm9kZV9hbGxvY2F0ZWQoJm5vZGUpKTsKIAl9CiAKIAltdXRleF91
bmxvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwpAQCAtMzkzLDcgKzM5Myw3IEBAIGk5MTVf
Z2VtX2d0dF9wcmVhZChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCQl1bnNpZ25l
ZCBwYWdlX29mZnNldCA9IG9mZnNldF9pbl9wYWdlKG9mZnNldCk7CiAJCXVuc2lnbmVkIHBhZ2Vf
bGVuZ3RoID0gUEFHRV9TSVpFIC0gcGFnZV9vZmZzZXQ7CiAJCXBhZ2VfbGVuZ3RoID0gcmVtYWlu
IDwgcGFnZV9sZW5ndGggPyByZW1haW4gOiBwYWdlX2xlbmd0aDsKLQkJaWYgKG5vZGUuYWxsb2Nh
dGVkKSB7CisJCWlmIChkcm1fbW1fbm9kZV9hbGxvY2F0ZWQoJm5vZGUpKSB7CiAJCQlnZ3R0LT52
bS5pbnNlcnRfcGFnZSgmZ2d0dC0+dm0sCiAJCQkJCSAgICAgaTkxNV9nZW1fb2JqZWN0X2dldF9k
bWFfYWRkcmVzcyhvYmosIG9mZnNldCA+PiBQQUdFX1NISUZUKSwKIAkJCQkJICAgICBub2RlLnN0
YXJ0LCBJOTE1X0NBQ0hFX05PTkUsIDApOwpAQCAtNDE1LDcgKzQxNSw3IEBAIGk5MTVfZ2VtX2d0
dF9wcmVhZChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCWk5MTVfZ2VtX29iamVj
dF91bmxvY2tfZmVuY2Uob2JqLCBmZW5jZSk7CiBvdXRfdW5waW46CiAJbXV0ZXhfbG9jaygmaTkx
NS0+ZHJtLnN0cnVjdF9tdXRleCk7Ci0JaWYgKG5vZGUuYWxsb2NhdGVkKSB7CisJaWYgKGRybV9t
bV9ub2RlX2FsbG9jYXRlZCgmbm9kZSkpIHsKIAkJZ2d0dC0+dm0uY2xlYXJfcmFuZ2UoJmdndHQt
PnZtLCBub2RlLnN0YXJ0LCBub2RlLnNpemUpOwogCQlyZW1vdmVfbWFwcGFibGVfbm9kZSgmbm9k
ZSk7CiAJfSBlbHNlIHsKQEAgLTU2Niw3ICs1NjYsNyBAQCBpOTE1X2dlbV9ndHRfcHdyaXRlX2Zh
c3Qoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJcmV0ID0gaW5zZXJ0X21hcHBh
YmxlX25vZGUoZ2d0dCwgJm5vZGUsIFBBR0VfU0laRSk7CiAJCWlmIChyZXQpCiAJCQlnb3RvIG91
dF9ycG07Ci0JCUdFTV9CVUdfT04oIW5vZGUuYWxsb2NhdGVkKTsKKwkJR0VNX0JVR19PTighZHJt
X21tX25vZGVfYWxsb2NhdGVkKCZub2RlKSk7CiAJfQogCiAJbXV0ZXhfdW5sb2NrKCZpOTE1LT5k
cm0uc3RydWN0X211dGV4KTsKQEAgLTYwNCw3ICs2MDQsNyBAQCBpOTE1X2dlbV9ndHRfcHdyaXRl
X2Zhc3Qoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJdW5zaWduZWQgaW50IHBh
Z2Vfb2Zmc2V0ID0gb2Zmc2V0X2luX3BhZ2Uob2Zmc2V0KTsKIAkJdW5zaWduZWQgaW50IHBhZ2Vf
bGVuZ3RoID0gUEFHRV9TSVpFIC0gcGFnZV9vZmZzZXQ7CiAJCXBhZ2VfbGVuZ3RoID0gcmVtYWlu
IDwgcGFnZV9sZW5ndGggPyByZW1haW4gOiBwYWdlX2xlbmd0aDsKLQkJaWYgKG5vZGUuYWxsb2Nh
dGVkKSB7CisJCWlmIChkcm1fbW1fbm9kZV9hbGxvY2F0ZWQoJm5vZGUpKSB7CiAJCQkvKiBmbHVz
aCB0aGUgd3JpdGUgYmVmb3JlIHdlIG1vZGlmeSB0aGUgR0dUVCAqLwogCQkJaW50ZWxfZ3RfZmx1
c2hfZ2d0dF93cml0ZXMoZ2d0dC0+dm0uZ3QpOwogCQkJZ2d0dC0+dm0uaW5zZXJ0X3BhZ2UoJmdn
dHQtPnZtLApAQCAtNjM2LDcgKzYzNiw3IEBAIGk5MTVfZ2VtX2d0dF9wd3JpdGVfZmFzdChzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogb3V0X3VucGluOgogCW11dGV4X2xvY2soJmk5
MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwogCWludGVsX2d0X2ZsdXNoX2dndHRfd3JpdGVzKGdndHQt
PnZtLmd0KTsKLQlpZiAobm9kZS5hbGxvY2F0ZWQpIHsKKwlpZiAoZHJtX21tX25vZGVfYWxsb2Nh
dGVkKCZub2RlKSkgewogCQlnZ3R0LT52bS5jbGVhcl9yYW5nZSgmZ2d0dC0+dm0sIG5vZGUuc3Rh
cnQsIG5vZGUuc2l6ZSk7CiAJCXJlbW92ZV9tYXBwYWJsZV9ub2RlKCZub2RlKTsKIAl9IGVsc2Ug
ewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZXZpY3QuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2V2aWN0LmMKaW5kZXggZTc2YzlkYTk5OTJkLi44
YzFlMDRmNDAyYmMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2V2
aWN0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZXZpY3QuYwpAQCAtMjk5
LDcgKzI5OSw3IEBAIGludCBpOTE1X2dlbV9ldmljdF9mb3Jfbm9kZShzdHJ1Y3QgaTkxNV9hZGRy
ZXNzX3NwYWNlICp2bSwKIAkJCWJyZWFrOwogCQl9CiAKLQkJR0VNX0JVR19PTighbm9kZS0+YWxs
b2NhdGVkKTsKKwkJR0VNX0JVR19PTighZHJtX21tX25vZGVfYWxsb2NhdGVkKG5vZGUpKTsKIAkJ
dm1hID0gY29udGFpbmVyX29mKG5vZGUsIHR5cGVvZigqdm1hKSwgbm9kZSk7CiAKIAkJLyogSWYg
d2UgYXJlIHVzaW5nIGNvbG9yaW5nIHRvIGluc2VydCBndWFyZCBwYWdlcyBiZXR3ZWVuCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV92bWEuYwppbmRleCA5ZDViMGY4N2MyMTAuLjY4YzM0YjFhMjBlNCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X3ZtYS5jCkBAIC03OTUsNyArNzk1LDcgQEAgdm9pZCBpOTE1X3ZtYV9yZW9w
ZW4oc3RydWN0IGk5MTVfdm1hICp2bWEpCiAKIHN0YXRpYyB2b2lkIF9faTkxNV92bWFfZGVzdHJv
eShzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKIHsKLQlHRU1fQlVHX09OKHZtYS0+bm9kZS5hbGxvY2F0
ZWQpOworCUdFTV9CVUdfT04oZHJtX21tX25vZGVfYWxsb2NhdGVkKCZ2bWEtPm5vZGUpKTsKIAlH
RU1fQlVHX09OKHZtYS0+ZmVuY2UpOwogCiAJbXV0ZXhfbG9jaygmdm1hLT52bS0+bXV0ZXgpOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfdm1hLmgKaW5kZXggOGJjYjU4MTJjNDQ2Li5lNDliMTk5ZjdkZTcgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmgKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV92bWEuaApAQCAtMjI4LDcgKzIyOCw3IEBAIHN0YXRpYyBpbmxpbmUg
Ym9vbCBpOTE1X3ZtYV9pc19jbG9zZWQoY29uc3Qgc3RydWN0IGk5MTVfdm1hICp2bWEpCiBzdGF0
aWMgaW5saW5lIHUzMiBpOTE1X2dndHRfb2Zmc2V0KGNvbnN0IHN0cnVjdCBpOTE1X3ZtYSAqdm1h
KQogewogCUdFTV9CVUdfT04oIWk5MTVfdm1hX2lzX2dndHQodm1hKSk7Ci0JR0VNX0JVR19PTigh
dm1hLT5ub2RlLmFsbG9jYXRlZCk7CisJR0VNX0JVR19PTighZHJtX21tX25vZGVfYWxsb2NhdGVk
KCZ2bWEtPm5vZGUpKTsKIAlHRU1fQlVHX09OKHVwcGVyXzMyX2JpdHModm1hLT5ub2RlLnN0YXJ0
KSk7CiAJR0VNX0JVR19PTih1cHBlcl8zMl9iaXRzKHZtYS0+bm9kZS5zdGFydCArIHZtYS0+bm9k
ZS5zaXplIC0gMSkpOwogCXJldHVybiBsb3dlcl8zMl9iaXRzKHZtYS0+bm9kZS5zdGFydCk7CkBA
IC0zOTAsNyArMzkwLDcgQEAgc3RhdGljIGlubGluZSBib29sIGk5MTVfdm1hX2lzX2JvdW5kKGNv
bnN0IHN0cnVjdCBpOTE1X3ZtYSAqdm1hLAogc3RhdGljIGlubGluZSBib29sIGk5MTVfbm9kZV9j
b2xvcl9kaWZmZXJzKGNvbnN0IHN0cnVjdCBkcm1fbW1fbm9kZSAqbm9kZSwKIAkJCQkJICAgdW5z
aWduZWQgbG9uZyBjb2xvcikKIHsKLQlyZXR1cm4gbm9kZS0+YWxsb2NhdGVkICYmIG5vZGUtPmNv
bG9yICE9IGNvbG9yOworCXJldHVybiBkcm1fbW1fbm9kZV9hbGxvY2F0ZWQobm9kZSkgJiYgbm9k
ZS0+Y29sb3IgIT0gY29sb3I7CiB9CiAKIC8qKgotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0Cklu
dGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

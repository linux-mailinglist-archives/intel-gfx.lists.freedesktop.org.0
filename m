Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2D36444FF3
	for <lists+intel-gfx@lfdr.de>; Fri, 14 Jun 2019 01:22:24 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5B206892FE;
	Thu, 13 Jun 2019 23:22:22 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 304FB892FB
 for <intel-gfx@lists.freedesktop.org>; Thu, 13 Jun 2019 23:22:21 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 13 Jun 2019 16:22:20 -0700
X-ExtLoop1: 1
Received: from dceraolo-linux.fm.intel.com ([10.1.27.145])
 by orsmga007.jf.intel.com with ESMTP; 13 Jun 2019 16:22:20 -0700
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 13 Jun 2019 16:21:50 -0700
Message-Id: <20190613232156.34940-3-daniele.ceraolospurio@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190613232156.34940-1-daniele.ceraolospurio@intel.com>
References: <20190613232156.34940-1-daniele.ceraolospurio@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 2/8] drm/i915: Remove rpm asserts that use
 i915
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVpdGUgYSBmZXcgb2YgdGhlIGNhbGwgcG9pbnRzIGhhdmUgYWxyZWFkeSBzd2l0Y2hlZCB0byB0
aGUgdmVyc2lvbgp3b3JraW5nIGRpcmVjdGx5IG9uIHRoZSBydW50aW1lX3BtIHN0cnVjdHVyZSwg
c28gbGV0J3Mgc3dpdGNoIG92ZXIgdGhlCnJlc3QgYW5kIGtpbGwgdGhlIGk5MTUtYmFzZWQgYXNz
ZXJ0cy4KCnYyOiByZWJhc2UKClNpZ25lZC1vZmYtYnk6IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8g
PGRhbmllbGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5jb20+CkNjOiBJbXJlIERlYWsgPGltcmUuZGVh
a0BpbnRlbC5jb20+ClJldmlld2VkLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNv
bi5jby51az4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5jICAg
fCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2FwZXJ0dXJlX2dtLmMgICAgIHwgIDIg
Ky0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2ZlbmNlX3JlZy5jICB8ICAyICstCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5jICAgICAgICAgICAgfCAgNiArKy0tLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYyAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX2Nzci5jICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMgfCAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9kcnYuaCAgICAgICAgICAgfCAyNiArKysrKystLS0tLS0tLS0tLS0tLS0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ydW50aW1lX3BtLmMgICAgfCAxMCArKysrLS0tLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5jICAgICAgICB8IDEyICsrKysrLS0t
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3dha2VyZWYuYyAgICAgICB8ICAyICstCiAx
MSBmaWxlcyBjaGFuZ2VkLCAyOSBpbnNlcnRpb25zKCspLCA0MSBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX21tYW4uYwppbmRleCBhOGI4YjljMjgxZjEuLjdi
NTg0MWI3MzU4OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X21tYW4uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5jCkBA
IC0zMDgsNyArMzA4LDcgQEAgdm1fZmF1bHRfdCBpOTE1X2dlbV9mYXVsdChzdHJ1Y3Qgdm1fZmF1
bHQgKnZtZikKIAkJZ290byBlcnJfZmVuY2U7CiAKIAkvKiBNYXJrIGFzIGJlaW5nIG1tYXBwZWQg
aW50byB1c2Vyc3BhY2UgZm9yIGxhdGVyIHJldm9jYXRpb24gKi8KLQlhc3NlcnRfcnBtX3dha2Vs
b2NrX2hlbGQoaTkxNSk7CisJYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKCZpOTE1LT5ydW50aW1l
X3BtKTsKIAlpZiAoIWk5MTVfdm1hX3NldF91c2VyZmF1bHQodm1hKSAmJiAhb2JqLT51c2VyZmF1
bHRfY291bnQrKykKIAkJbGlzdF9hZGQoJm9iai0+dXNlcmZhdWx0X2xpbmssICZpOTE1LT5nZ3R0
LnVzZXJmYXVsdF9saXN0KTsKIAlpZiAoQ09ORklHX0RSTV9JOTE1X1VTRVJGQVVMVF9BVVRPU1VT
UEVORCkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9hcGVydHVyZV9nbS5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2FwZXJ0dXJlX2dtLmMKaW5kZXggNDA5ODkwMmJm
YWViLi43MTY2MjIyNjZmYTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9h
cGVydHVyZV9nbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9hcGVydHVyZV9nbS5j
CkBAIC0xMzIsNyArMTMyLDcgQEAgdm9pZCBpbnRlbF92Z3B1X3dyaXRlX2ZlbmNlKHN0cnVjdCBp
bnRlbF92Z3B1ICp2Z3B1LAogCXN0cnVjdCBpOTE1X2ZlbmNlX3JlZyAqcmVnOwogCWk5MTVfcmVn
X3QgZmVuY2VfcmVnX2xvLCBmZW5jZV9yZWdfaGk7CiAKLQlhc3NlcnRfcnBtX3dha2Vsb2NrX2hl
bGQoZGV2X3ByaXYpOworCWFzc2VydF9ycG1fd2FrZWxvY2tfaGVsZCgmZGV2X3ByaXYtPnJ1bnRp
bWVfcG0pOwogCiAJaWYgKFdBUk5fT04oZmVuY2UgPj0gdmdwdV9mZW5jZV9zeih2Z3B1KSkpCiAJ
CXJldHVybjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2ZlbmNl
X3JlZy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2VfcmVnLmMKaW5kZXgg
MWM5NDY2Njc2Y2FmLi5mYzRjZjkwOGFmYzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZ2VtX2ZlbmNlX3JlZy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2VtX2ZlbmNlX3JlZy5jCkBAIC0zNjAsNyArMzYwLDcgQEAgaW50IGk5MTVfdm1hX3Bpbl9mZW5j
ZShzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKIAkgKiBOb3RlIHRoYXQgd2UgcmV2b2tlIGZlbmNlcyBv
biBydW50aW1lIHN1c3BlbmQuIFRoZXJlZm9yZSB0aGUgdXNlcgogCSAqIG11c3Qga2VlcCB0aGUg
ZGV2aWNlIGF3YWtlIHdoaWxzdCB1c2luZyB0aGUgZmVuY2UuCiAJICovCi0JYXNzZXJ0X3JwbV93
YWtlbG9ja19oZWxkKHZtYS0+dm0tPmk5MTUpOworCWFzc2VydF9ycG1fd2FrZWxvY2tfaGVsZCgm
dm1hLT52bS0+aTkxNS0+cnVudGltZV9wbSk7CiAKIAkvKiBKdXN0IHVwZGF0ZSBvdXIgcGxhY2Ug
aW4gdGhlIExSVSBpZiBvdXIgZmVuY2UgaXMgZ2V0dGluZyByZXVzZWQuICovCiAJaWYgKHZtYS0+
ZmVuY2UpIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5jCmluZGV4IGNkOWVkZGRkNjcxOC4uM2YwODMw
MmExNGU1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKQEAgLTU4OSw3ICs1ODksNyBAQCB2b2lk
IGdlbjZfZGlzYWJsZV9ycHNfaW50ZXJydXB0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYpCiAKIHZvaWQgZ2VuOV9yZXNldF9ndWNfaW50ZXJydXB0cyhzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYpCiB7Ci0JYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKGRldl9wcml2
KTsKKwlhc3NlcnRfcnBtX3dha2Vsb2NrX2hlbGQoJmRldl9wcml2LT5ydW50aW1lX3BtKTsKIAog
CXNwaW5fbG9ja19pcnEoJmRldl9wcml2LT5pcnFfbG9jayk7CiAJZ2VuNl9yZXNldF9wbV9paXIo
ZGV2X3ByaXYsIGRldl9wcml2LT5wbV9ndWNfZXZlbnRzKTsKQEAgLTU5OCw3ICs1OTgsNyBAQCB2
b2lkIGdlbjlfcmVzZXRfZ3VjX2ludGVycnVwdHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2KQogCiB2b2lkIGdlbjlfZW5hYmxlX2d1Y19pbnRlcnJ1cHRzKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdikKIHsKLQlhc3NlcnRfcnBtX3dha2Vsb2NrX2hlbGQoZGV2X3By
aXYpOworCWFzc2VydF9ycG1fd2FrZWxvY2tfaGVsZCgmZGV2X3ByaXYtPnJ1bnRpbWVfcG0pOwog
CiAJc3Bpbl9sb2NrX2lycSgmZGV2X3ByaXYtPmlycV9sb2NrKTsKIAlpZiAoIWRldl9wcml2LT5n
dWMuaW50ZXJydXB0cy5lbmFibGVkKSB7CkBAIC02MTIsNyArNjEyLDcgQEAgdm9pZCBnZW45X2Vu
YWJsZV9ndWNfaW50ZXJydXB0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAK
IHZvaWQgZ2VuOV9kaXNhYmxlX2d1Y19pbnRlcnJ1cHRzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdikKIHsKLQlhc3NlcnRfcnBtX3dha2Vsb2NrX2hlbGQoZGV2X3ByaXYpOworCWFz
c2VydF9ycG1fd2FrZWxvY2tfaGVsZCgmZGV2X3ByaXYtPnJ1bnRpbWVfcG0pOwogCiAJc3Bpbl9s
b2NrX2lycSgmZGV2X3ByaXYtPmlycV9sb2NrKTsKIAlkZXZfcHJpdi0+Z3VjLmludGVycnVwdHMu
ZW5hYmxlZCA9IGZhbHNlOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92
bWEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmMKaW5kZXggY2IzNDFlNGFjZjk5
Li5iMjk1YzUzMDg1ZWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1h
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYwpAQCAtMzY0LDcgKzM2NCw3
IEBAIHZvaWQgX19pb21lbSAqaTkxNV92bWFfcGluX2lvbWFwKHN0cnVjdCBpOTE1X3ZtYSAqdm1h
KQogCWludCBlcnI7CiAKIAkvKiBBY2Nlc3MgdGhyb3VnaCB0aGUgR1RUIHJlcXVpcmVzIHRoZSBk
ZXZpY2UgdG8gYmUgYXdha2UuICovCi0JYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKHZtYS0+dm0t
Pmk5MTUpOworCWFzc2VydF9ycG1fd2FrZWxvY2tfaGVsZCgmdm1hLT52bS0+aTkxNS0+cnVudGlt
ZV9wbSk7CiAKIAlsb2NrZGVwX2Fzc2VydF9oZWxkKCZ2bWEtPnZtLT5pOTE1LT5kcm0uc3RydWN0
X211dGV4KTsKIAlpZiAoV0FSTl9PTighaTkxNV92bWFfaXNfbWFwX2FuZF9mZW5jZWFibGUodm1h
KSkpIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Nzci5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfY3NyLmMKaW5kZXggYmYwZWViZDM4NWI5Li4wOTcxNTNj
N2YzZDQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Nzci5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Nzci5jCkBAIC0yNzMsNyArMjczLDcgQEAgdm9p
ZCBpbnRlbF9jc3JfbG9hZF9wcm9ncmFtKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dikKIAl9CiAKIAlmd19zaXplID0gZGV2X3ByaXYtPmNzci5kbWNfZndfc2l6ZTsKLQlhc3NlcnRf
cnBtX3dha2Vsb2NrX2hlbGQoZGV2X3ByaXYpOworCWFzc2VydF9ycG1fd2FrZWxvY2tfaGVsZCgm
ZGV2X3ByaXYtPnJ1bnRpbWVfcG0pOwogCiAJcHJlZW1wdF9kaXNhYmxlKCk7CiAKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rpc3BsYXlfcG93ZXIuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX2Rpc3BsYXlfcG93ZXIuYwppbmRleCBiYjllZjFjZWE1ZGIuLjNl
NTI0NTMxODllZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGlzcGxh
eV9wb3dlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rpc3BsYXlfcG93ZXIu
YwpAQCAtNjk2LDcgKzY5Niw3IEBAIHN0YXRpYyB2b2lkIGFzc2VydF9jYW5fZW5hYmxlX2RjNShz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAKIAlXQVJOX09OQ0UoKEk5MTVfUkVB
RChEQ19TVEFURV9FTikgJiBEQ19TVEFURV9FTl9VUFRPX0RDNSksCiAJCSAgIkRDNSBhbHJlYWR5
IHByb2dyYW1tZWQgdG8gYmUgZW5hYmxlZC5cbiIpOwotCWFzc2VydF9ycG1fd2FrZWxvY2tfaGVs
ZChkZXZfcHJpdik7CisJYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKCZkZXZfcHJpdi0+cnVudGlt
ZV9wbSk7CiAKIAlhc3NlcnRfY3NyX2xvYWRlZChkZXZfcHJpdik7CiB9CkBAIC0xODE0LDcgKzE4
MTQsNyBAQCByZWxlYXNlX2FzeW5jX3B1dF9kb21haW5zKHN0cnVjdCBpOTE1X3Bvd2VyX2RvbWFp
bnMgKnBvd2VyX2RvbWFpbnMsIHU2NCBtYXNrKQogCSAqIHdha2VyZWYgdG8gbWFrZSB0aGUgc3Rh
dGUgY2hlY2tlciBoYXBweSBhYm91dCB0aGUgSFcgYWNjZXNzIGR1cmluZwogCSAqIHBvd2VyIHdl
bGwgZGlzYWJsaW5nLgogCSAqLwotCWFzc2VydF9ycG1fcmF3X3dha2VyZWZfaGVsZChkZXZfcHJp
dik7CisJYXNzZXJ0X3JwbV9yYXdfd2FrZXJlZl9oZWxkKCZkZXZfcHJpdi0+cnVudGltZV9wbSk7
CiAJd2FrZXJlZiA9IGludGVsX3J1bnRpbWVfcG1fZ2V0KGRldl9wcml2KTsKIAogCWZvcl9lYWNo
X3Bvd2VyX2RvbWFpbihkb21haW4sIG1hc2spIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2ludGVsX2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJ2LmgKaW5k
ZXggYWVjNDBhZGY0ODc2Li5hYzBiZDYwNjc4NjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2ludGVsX2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rydi5o
CkBAIC0xNjQwLDcgKzE2NDAsNyBAQCBhc3NlcnRfcnBtX2RldmljZV9ub3Rfc3VzcGVuZGVkKHN0
cnVjdCBpOTE1X3J1bnRpbWVfcG0gKnJwbSkKIH0KIAogc3RhdGljIGlubGluZSB2b2lkCi1fX19f
YXNzZXJ0X3JwbV9yYXdfd2FrZXJlZl9oZWxkKHN0cnVjdCBpOTE1X3J1bnRpbWVfcG0gKnJwbSwg
aW50IHdha2VyZWZfY291bnQpCitfX2Fzc2VydF9ycG1fcmF3X3dha2VyZWZfaGVsZChzdHJ1Y3Qg
aTkxNV9ydW50aW1lX3BtICpycG0sIGludCB3YWtlcmVmX2NvdW50KQogewogCWFzc2VydF9ycG1f
ZGV2aWNlX25vdF9zdXNwZW5kZWQocnBtKTsKIAlXQVJOX09OQ0UoIWludGVsX3JwbV9yYXdfd2Fr
ZXJlZl9jb3VudCh3YWtlcmVmX2NvdW50KSwKQEAgLTE2NDgsMzUgKzE2NDgsMjMgQEAgX19fX2Fz
c2VydF9ycG1fcmF3X3dha2VyZWZfaGVsZChzdHJ1Y3QgaTkxNV9ydW50aW1lX3BtICpycG0sIGlu
dCB3YWtlcmVmX2NvdW50KQogfQogCiBzdGF0aWMgaW5saW5lIHZvaWQKLV9fX19hc3NlcnRfcnBt
X3dha2Vsb2NrX2hlbGQoc3RydWN0IGk5MTVfcnVudGltZV9wbSAqcnBtLCBpbnQgd2FrZXJlZl9j
b3VudCkKK19fYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKHN0cnVjdCBpOTE1X3J1bnRpbWVfcG0g
KnJwbSwgaW50IHdha2VyZWZfY291bnQpCiB7Ci0JX19fX2Fzc2VydF9ycG1fcmF3X3dha2VyZWZf
aGVsZChycG0sIHdha2VyZWZfY291bnQpOworCV9fYXNzZXJ0X3JwbV9yYXdfd2FrZXJlZl9oZWxk
KHJwbSwgd2FrZXJlZl9jb3VudCk7CiAJV0FSTl9PTkNFKCFpbnRlbF9ycG1fd2FrZWxvY2tfY291
bnQod2FrZXJlZl9jb3VudCksCiAJCSAgIlJQTSB3YWtlbG9jayByZWYgbm90IGhlbGQgZHVyaW5n
IEhXIGFjY2Vzc1xuIik7CiB9CiAKIHN0YXRpYyBpbmxpbmUgdm9pZAotX19hc3NlcnRfcnBtX3Jh
d193YWtlcmVmX2hlbGQoc3RydWN0IGk5MTVfcnVudGltZV9wbSAqcnBtKQorYXNzZXJ0X3JwbV9y
YXdfd2FrZXJlZl9oZWxkKHN0cnVjdCBpOTE1X3J1bnRpbWVfcG0gKnJwbSkKIHsKLQlfX19fYXNz
ZXJ0X3JwbV9yYXdfd2FrZXJlZl9oZWxkKHJwbSwgYXRvbWljX3JlYWQoJnJwbS0+d2FrZXJlZl9j
b3VudCkpOworCV9fYXNzZXJ0X3JwbV9yYXdfd2FrZXJlZl9oZWxkKHJwbSwgYXRvbWljX3JlYWQo
JnJwbS0+d2FrZXJlZl9jb3VudCkpOwogfQogCiBzdGF0aWMgaW5saW5lIHZvaWQKLWFzc2VydF9y
cG1fcmF3X3dha2VyZWZfaGVsZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKK2Fzc2Vy
dF9ycG1fd2FrZWxvY2tfaGVsZChzdHJ1Y3QgaTkxNV9ydW50aW1lX3BtICpycG0pCiB7Ci0JX19h
c3NlcnRfcnBtX3Jhd193YWtlcmVmX2hlbGQoJmk5MTUtPnJ1bnRpbWVfcG0pOwotfQotCi1zdGF0
aWMgaW5saW5lIHZvaWQKLV9fYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKHN0cnVjdCBpOTE1X3J1
bnRpbWVfcG0gKnJwbSkKLXsKLQlfX19fYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKHJwbSwgYXRv
bWljX3JlYWQoJnJwbS0+d2FrZXJlZl9jb3VudCkpOwotfQotCi1zdGF0aWMgaW5saW5lIHZvaWQK
LWFzc2VydF9ycG1fd2FrZWxvY2tfaGVsZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkK
LXsKLQlfX2Fzc2VydF9ycG1fd2FrZWxvY2tfaGVsZCgmaTkxNS0+cnVudGltZV9wbSk7CisJX19h
c3NlcnRfcnBtX3dha2Vsb2NrX2hlbGQocnBtLCBhdG9taWNfcmVhZCgmcnBtLT53YWtlcmVmX2Nv
dW50KSk7CiB9CiAKIC8qKgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
cnVudGltZV9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcnVudGltZV9wbS5jCmlu
ZGV4IDdjNjAyZjVjNzQ4ZC4uYWU2MGFlMWM5NzBlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9ydW50aW1lX3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfcnVudGltZV9wbS5jCkBAIC0zMzUsMTAgKzMzNSwxMCBAQCBpbnRlbF9ydW50aW1lX3BtX2Fj
cXVpcmUoc3RydWN0IGk5MTVfcnVudGltZV9wbSAqcnBtLCBib29sIHdha2Vsb2NrKQogewogCWlm
ICh3YWtlbG9jaykgewogCQlhdG9taWNfYWRkKDEgKyBJTlRFTF9SUE1fV0FLRUxPQ0tfQklBUywg
JnJwbS0+d2FrZXJlZl9jb3VudCk7Ci0JCV9fYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKHJwbSk7
CisJCWFzc2VydF9ycG1fd2FrZWxvY2tfaGVsZChycG0pOwogCX0gZWxzZSB7CiAJCWF0b21pY19p
bmMoJnJwbS0+d2FrZXJlZl9jb3VudCk7Ci0JCV9fYXNzZXJ0X3JwbV9yYXdfd2FrZXJlZl9oZWxk
KHJwbSk7CisJCWFzc2VydF9ycG1fcmF3X3dha2VyZWZfaGVsZChycG0pOwogCX0KIH0KIApAQCAt
MzQ2LDEwICszNDYsMTAgQEAgc3RhdGljIHZvaWQKIGludGVsX3J1bnRpbWVfcG1fcmVsZWFzZShz
dHJ1Y3QgaTkxNV9ydW50aW1lX3BtICpycG0sIGludCB3YWtlbG9jaykKIHsKIAlpZiAod2FrZWxv
Y2spIHsKLQkJX19hc3NlcnRfcnBtX3dha2Vsb2NrX2hlbGQocnBtKTsKKwkJYXNzZXJ0X3JwbV93
YWtlbG9ja19oZWxkKHJwbSk7CiAJCWF0b21pY19zdWIoSU5URUxfUlBNX1dBS0VMT0NLX0JJQVMs
ICZycG0tPndha2VyZWZfY291bnQpOwogCX0gZWxzZSB7Ci0JCV9fYXNzZXJ0X3JwbV9yYXdfd2Fr
ZXJlZl9oZWxkKHJwbSk7CisJCWFzc2VydF9ycG1fcmF3X3dha2VyZWZfaGVsZChycG0pOwogCX0K
IAogCV9faW50ZWxfd2FrZXJlZl9kZWNfYW5kX2NoZWNrX3RyYWNraW5nKHJwbSk7CkBAIC00NjUs
NyArNDY1LDcgQEAgaW50ZWxfd2FrZXJlZl90IGludGVsX3J1bnRpbWVfcG1fZ2V0X25vcmVzdW1l
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewogCXN0cnVjdCBpOTE1X3J1bnRpbWVf
cG0gKnJwbSA9ICZpOTE1LT5ydW50aW1lX3BtOwogCi0JX19hc3NlcnRfcnBtX3dha2Vsb2NrX2hl
bGQocnBtKTsKKwlhc3NlcnRfcnBtX3dha2Vsb2NrX2hlbGQocnBtKTsKIAlwbV9ydW50aW1lX2dl
dF9ub3Jlc3VtZShycG0tPmtkZXYpOwogCiAJaW50ZWxfcnVudGltZV9wbV9hY3F1aXJlKHJwbSwg
dHJ1ZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5jCmluZGV4IDg1MTcxYThiODY2YS4u
ZTFkZTUxYzRkODRkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNv
cmUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuYwpAQCAtNTgzLDcg
KzU4Myw3IEBAIHZvaWQgaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9nZXQoc3RydWN0IGludGVsX3Vu
Y29yZSAqdW5jb3JlLAogCWlmICghdW5jb3JlLT5mdW5jcy5mb3JjZV93YWtlX2dldCkKIAkJcmV0
dXJuOwogCi0JX19hc3NlcnRfcnBtX3dha2Vsb2NrX2hlbGQodW5jb3JlLT5ycG0pOworCWFzc2Vy
dF9ycG1fd2FrZWxvY2tfaGVsZCh1bmNvcmUtPnJwbSk7CiAKIAlzcGluX2xvY2tfaXJxc2F2ZSgm
dW5jb3JlLT5sb2NrLCBpcnFmbGFncyk7CiAJX19pbnRlbF91bmNvcmVfZm9yY2V3YWtlX2dldCh1
bmNvcmUsIGZ3X2RvbWFpbnMpOwpAQCAtNzM3LDcgKzczNyw3IEBAIHZvaWQgYXNzZXJ0X2ZvcmNl
d2FrZXNfYWN0aXZlKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSwKIAlpZiAoIXVuY29yZS0+
ZnVuY3MuZm9yY2Vfd2FrZV9nZXQpCiAJCXJldHVybjsKIAotCV9fYXNzZXJ0X3JwbV93YWtlbG9j
a19oZWxkKHVuY29yZS0+cnBtKTsKKwlhc3NlcnRfcnBtX3dha2Vsb2NrX2hlbGQodW5jb3JlLT5y
cG0pOwogCiAJZndfZG9tYWlucyAmPSB1bmNvcmUtPmZ3X2RvbWFpbnM7CiAJV0FSTihmd19kb21h
aW5zICYgfnVuY29yZS0+ZndfZG9tYWluc19hY3RpdmUsCkBAIC0xMDU0LDcgKzEwNTQsNyBAQCB1
bmNsYWltZWRfcmVnX2RlYnVnKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSwKIAogI2RlZmlu
ZSBHRU4yX1JFQURfSEVBREVSKHgpIFwKIAl1IyN4IHZhbCA9IDA7IFwKLQlfX2Fzc2VydF9ycG1f
d2FrZWxvY2tfaGVsZCh1bmNvcmUtPnJwbSk7CisJYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKHVu
Y29yZS0+cnBtKTsKIAogI2RlZmluZSBHRU4yX1JFQURfRk9PVEVSIFwKIAl0cmFjZV9pOTE1X3Jl
Z19ydyhmYWxzZSwgcmVnLCB2YWwsIHNpemVvZih2YWwpLCB0cmFjZSk7IFwKQEAgLTEwOTYsNyAr
MTA5Niw3IEBAIF9fZ2VuMl9yZWFkKDY0KQogCXUzMiBvZmZzZXQgPSBpOTE1X21taW9fcmVnX29m
ZnNldChyZWcpOyBcCiAJdW5zaWduZWQgbG9uZyBpcnFmbGFnczsgXAogCXUjI3ggdmFsID0gMDsg
XAotCV9fYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKHVuY29yZS0+cnBtKTsgXAorCWFzc2VydF9y
cG1fd2FrZWxvY2tfaGVsZCh1bmNvcmUtPnJwbSk7IFwKIAlzcGluX2xvY2tfaXJxc2F2ZSgmdW5j
b3JlLT5sb2NrLCBpcnFmbGFncyk7IFwKIAl1bmNsYWltZWRfcmVnX2RlYnVnKHVuY29yZSwgcmVn
LCB0cnVlLCB0cnVlKQogCkBAIC0xMTcwLDcgKzExNzAsNyBAQCBfX2dlbjZfcmVhZCg2NCkKIAog
I2RlZmluZSBHRU4yX1dSSVRFX0hFQURFUiBcCiAJdHJhY2VfaTkxNV9yZWdfcncodHJ1ZSwgcmVn
LCB2YWwsIHNpemVvZih2YWwpLCB0cmFjZSk7IFwKLQlfX2Fzc2VydF9ycG1fd2FrZWxvY2tfaGVs
ZCh1bmNvcmUtPnJwbSk7IFwKKwlhc3NlcnRfcnBtX3dha2Vsb2NrX2hlbGQodW5jb3JlLT5ycG0p
OyBcCiAKICNkZWZpbmUgR0VOMl9XUklURV9GT09URVIKIApAQCAtMTIwOCw3ICsxMjA4LDcgQEAg
X19nZW4yX3dyaXRlKDMyKQogCXUzMiBvZmZzZXQgPSBpOTE1X21taW9fcmVnX29mZnNldChyZWcp
OyBcCiAJdW5zaWduZWQgbG9uZyBpcnFmbGFnczsgXAogCXRyYWNlX2k5MTVfcmVnX3J3KHRydWUs
IHJlZywgdmFsLCBzaXplb2YodmFsKSwgdHJhY2UpOyBcCi0JX19hc3NlcnRfcnBtX3dha2Vsb2Nr
X2hlbGQodW5jb3JlLT5ycG0pOyBcCisJYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKHVuY29yZS0+
cnBtKTsgXAogCXNwaW5fbG9ja19pcnFzYXZlKCZ1bmNvcmUtPmxvY2ssIGlycWZsYWdzKTsgXAog
CXVuY2xhaW1lZF9yZWdfZGVidWcodW5jb3JlLCByZWcsIGZhbHNlLCB0cnVlKQogCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF93YWtlcmVmLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF93YWtlcmVmLmMKaW5kZXggYzI1YmExYjVlOGJhLi5iNmM3MTY3Y2UxNTQg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3dha2VyZWYuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF93YWtlcmVmLmMKQEAgLTExMCw3ICsxMTAsNyBAQCB2
b2lkIGludGVsX3dha2VyZWZfYXV0byhzdHJ1Y3QgaW50ZWxfd2FrZXJlZl9hdXRvICp3ZiwgdW5z
aWduZWQgbG9uZyB0aW1lb3V0KQogCX0KIAogCS8qIE91ciBtaXNzaW9uIGlzIHRoYXQgd2Ugb25s
eSBleHRlbmQgYW4gYWxyZWFkeSBhY3RpdmUgd2FrZXJlZiAqLwotCWFzc2VydF9ycG1fd2FrZWxv
Y2tfaGVsZCh3Zi0+aTkxNSk7CisJYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKCZ3Zi0+aTkxNS0+
cnVudGltZV9wbSk7CiAKIAlpZiAoIXJlZmNvdW50X2luY19ub3RfemVybygmd2YtPmNvdW50KSkg
ewogCQlzcGluX2xvY2tfaXJxc2F2ZSgmd2YtPmxvY2ssIGZsYWdzKTsKLS0gCjIuMjAuMQoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1h
aWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

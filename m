Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C4B7B2FFF1
	for <lists+intel-gfx@lfdr.de>; Thu, 30 May 2019 18:10:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B8C6C89DB7;
	Thu, 30 May 2019 16:10:44 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-vs1-xe44.google.com (mail-vs1-xe44.google.com
 [IPv6:2607:f8b0:4864:20::e44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8F2E989DB7
 for <intel-gfx@lists.freedesktop.org>; Thu, 30 May 2019 16:10:43 +0000 (UTC)
Received: by mail-vs1-xe44.google.com with SMTP id o5so4763371vsq.4
 for <intel-gfx@lists.freedesktop.org>; Thu, 30 May 2019 09:10:43 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=1l58iAjXY8VieHSJtA/pVOnYELW9eST8j8BhmtDiJD0=;
 b=B/0k/SpXpC6zQznIgiWgWbiPvVSKjexl1AM3ApRh5RetfyByGAWfSMDYTPIl6BMeNj
 hUIGFmUZ1S4rG6k4ZT2TkM3fJL1OL8D9ru7y4iLqMPNIt+PZbLfSSU8IZIKjR0XMa0QL
 P1ls4EJGz5OY8jr2H8Od+j2P2iXnLRlD8U2nl3aWJ2zLlLI0viXf92DPMRr4rpy/KQJ9
 RXWe8H/EL5lnW3aj0nL8aRr6ys0Prm0JqVQ4uaYNqUizNSdi5SnyKjQWn3HQ1wuSUkM+
 m8bFtQsusNluz3+vo+iYetvEWSQtl/hCCNzIRJ//zHExd3PaItFI0jqye0bUaiQ8j2rl
 U5oQ==
X-Gm-Message-State: APjAAAVotQdu6YuHk3rKCWtEorgv6DnOcsp0kLtAaN/23ffdK3hkWHYS
 bHsQXoHyi7Elv8iXSaYfOmVEtfBuAc32n7JAFTk=
X-Google-Smtp-Source: APXvYqyhjsOkMj57VFbcwPnyc9LeGehpwJWpbEflOEaFm0dsJWXS4vp7teDu6Vf5bFL5T48To+DSsTLLyjhJxrtrwXQ=
X-Received: by 2002:a67:6904:: with SMTP id e4mr2537480vsc.119.1559232642583; 
 Thu, 30 May 2019 09:10:42 -0700 (PDT)
MIME-Version: 1.0
References: <20190528195022.11531-1-chris@chris-wilson.co.uk>
 <20190528195022.11531-2-chris@chris-wilson.co.uk>
In-Reply-To: <20190528195022.11531-2-chris@chris-wilson.co.uk>
From: Matthew Auld <matthew.william.auld@gmail.com>
Date: Thu, 30 May 2019 17:10:16 +0100
Message-ID: <CAM0jSHMLGJ8KYcy4HZBXScZgCN0h_xhYv4BGmi+6CBrcoXZ3Qg@mail.gmail.com>
To: Chris Wilson <chris@chris-wilson.co.uk>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=1l58iAjXY8VieHSJtA/pVOnYELW9eST8j8BhmtDiJD0=;
 b=We26nphDIVfe4rEr0HTn0hr8hvXNB2zuFo+a1ssZn5tHaX2qdjjiFmds0oWptjFjPA
 FBDHk35KdjJjD3iMnOtHU1fFyf24WT03n8+yp76WXGQOqD9d7Dw3GGBHk8XoKlFuBOrF
 YV0L2oeo9uQmAYtDl0k5NgrEJhP8gk6HKjWDPrj1fBeLA5HW/kfRotP89AkfDSo9YIty
 TIDGc+rbswaNzStAAf+Iy3pOrtB6EEOaIFGAJtmkAgRUm03Hjtkk+7HqTwHW4KzoPit7
 zL6DQx6Og+srJ+lJ1rR259M5ID+aadr/5d75XmPeDU+zOIhv3Qn7emT7q2/JU5aCICV7
 37MQ==
Subject: Re: [Intel-gfx] [PATCH 2/2] drm/i915: Report all objects with
 allocated pages to the shrinker
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVHVlLCAyOCBNYXkgMjAxOSBhdCAyMDo1MCwgQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13
aWxzb24uY28udWs+IHdyb3RlOgo+Cj4gQ3VycmVudGx5LCB3ZSB0cnkgdG8gcmVwb3J0IHRvIHRo
ZSBzaHJpbmtlciB0aGUgcHJlY2lzZSBudW1iZXIgb2YKPiBvYmplY3RzIChwYWdlcykgdGhhdCBh
cmUgYXZhaWxhYmxlIHRvIGJlIHJlYXBlZCBhdCB0aGlzIG1vbWVudC4gVGhpcwo+IHJlcXVpcmVz
IHNlYXJjaGluZyBhbGwgb2JqZWN0cyB3aXRoIGFsbG9jYXRlZCBwYWdlcyB0byBzZWUgaWYgdGhl
eQo+IGZ1bGZpbGwgdGhlIHNlYXJjaCBjcml0ZXJpYSwgYW5kIHRoaXMgY291bnQgaXMgcGVyZm9y
bWVkIHF1aXRlCj4gZnJlcXVlbnRseS4gKFRoZSBzaHJpbmtlciB0cmllcyB0byBmcmVlIH4xMjgg
cGFnZXMgb24gZWFjaCBpbnZvY2F0aW9uLAo+IGJlZm9yZSB3aGljaCB3ZSBjb3VudCBhbGwgdGhl
IG9iamVjdHM7IGNvdW50aW5nIHRha2VzIGxvbmdlciB0aGFuCj4gdW5iaW5kaW5nIHRoZSBvYmpl
Y3RzISkgSWYgd2UgdGFrZSB0aGUgcHJhZ21hdGljIHZpZXcgdGhhdCB3aXRoCj4gc3VmZmljaWVu
dCBkZXNpcmUsIGFsbCBvYmplY3RzIGFyZSBldmVudHVhbGx5IHJlYXBhYmxlICh0aGV5IGJlY29t
ZQo+IGluYWN0aXZlLCBvciBubyBsb25nZXIgdXNlZCBhcyBmcmFtZWJ1ZmZlciBldGMpLCB3ZSBj
YW4gc2ltcGx5IHJldHVybgo+IHRoZSBjb3VudCBvZiBwaW5uZWQgcGFnZXMgbWFpbnRhaW5lZCBk
dXJpbmcgZ2V0X3BhZ2VzL3B1dF9wYWdlcyByYXRoZXIKPiB0aGFuIHdhbGsgdGhlIGxpc3RzIGV2
ZXJ5IHRpbWUuCj4KPiBUaGUgZG93bnNpZGUgaXMgdGhhdCB3ZSBtYXkgKHNsaWdodGx5KSBvdmVy
LXJlcG9ydCB0aGUgbnVtYmVyIG9mCj4gb2JqZWN0cy9wYWdlcyB3ZSBjb3VsZCBzaHJpbmsgYW5k
IHNvIHBlbmFsaXplIG91cnNlbHZlcyBieSBzaHJpbmtpbmcKPiBtb3JlIHRoYW4gcmVxdWlyZWQu
IFRoaXMgaXMgbWl0aWdhdGVkIGJ5IGtlZXBpbmcgdGhlIG9yZGVyIGluIHdoaWNoIHdlCj4gc2hy
aW5rIG9iamVjdHMgc3VjaCB0aGF0IHdlIGF2b2lkIHBlbmFsaXppbmcgYWN0aXZlIGFuZCBmcmVx
dWVudGx5IHVzZWQKPiBvYmplY3RzLCBhbmQgaWYgbWVtb3J5IGlzIHNvIHRpZ2h0IHRoYXQgd2Ug
bmVlZCB0byBmcmVlIHRoZW0gd2Ugd291bGQKPiBuZWVkIHRvIGFueXdheS4KPgo+IHYyOiBPbmx5
IGV4cG9zZSBzaHJpbmthYmxlIG9iamVjdHMgdG8gdGhlIHNocmlua2VyOyBhIHNtYWxsIHJlZHVj
dGlvbiBpbgo+IG5vdCBjb25zaWRlcmluZyBzdG9sZW4gYW5kIGZvcmVpZ24gb2JqZWN0cy4KPgo+
IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+
IENjOiBKb29uYXMgTGFodGluZW4gPGpvb25hcy5sYWh0aW5lbkBsaW51eC5pbnRlbC5jb20+Cj4g
Q2M6IE1hdHRoZXcgQXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KPiAtLS0KPiAgZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RvbWFpbi5jICAgfCAgMyArLQo+ICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMgICB8IDIyIC0tLS0tLS0tCj4gIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaHJpbmtlci5jIHwgMjggKystLS0tLS0t
LQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fc3RvbGVuLmMgICB8ICAzICst
Cj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jICAgICAgICAgIHwgNTggKyst
LS0tLS0tLS0tLS0tLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAg
ICAgICAgICAgfCAgNyArLS0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyAgICAg
ICAgICAgICAgfCAyMyArKysrLS0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5j
ICAgICAgICAgICAgICB8IDE2ICsrKystLQo+ICA4IGZpbGVzIGNoYW5nZWQsIDQxIGluc2VydGlv
bnMoKyksIDExOSBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fZG9tYWluLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fZG9tYWluLmMKPiBpbmRleCA1MmI3M2U5MGM5ZjQuLmU1ZGVhZTYyNjgxZiAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG9tYWluLmMKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG9tYWluLmMKPiBAQCAtNDc1LDcg
KzQ3NSw4IEBAIHN0YXRpYyB2b2lkIGk5MTVfZ2VtX29iamVjdF9idW1wX2luYWN0aXZlX2dndHQo
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKPiAgICAgICAgIH0KPiAgICAgICAgIG11
dGV4X3VubG9jaygmaTkxNS0+Z2d0dC52bS5tdXRleCk7Cj4KPiAtICAgICAgIGlmIChvYmotPm1t
Lm1hZHYgPT0gSTkxNV9NQURWX1dJTExORUVEKSB7Cj4gKyAgICAgICBpZiAoaTkxNV9nZW1fb2Jq
ZWN0X2lzX3Nocmlua2FibGUob2JqKSAmJgo+ICsgICAgICAgICAgIG9iai0+bW0ubWFkdiA9PSBJ
OTE1X01BRFZfV0lMTE5FRUQpIHsKPiAgICAgICAgICAgICAgICAgc3RydWN0IGxpc3RfaGVhZCAq
bGlzdDsKPgo+ICAgICAgICAgICAgICAgICBzcGluX2xvY2soJmk5MTUtPm1tLm9ial9sb2NrKTsK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5jCj4gaW5kZXggZjA2
NDg3NmYxMjE0Li4xZmNjYjFkZTU4NTEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX29iamVjdC5jCj4gQEAgLTQ0LDI1ICs0NCw2IEBAIHZvaWQgaTkxNV9nZW1fb2Jq
ZWN0X2ZyZWUoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKPiAgICAgICAgIHJldHVy
biBrbWVtX2NhY2hlX2ZyZWUoZ2xvYmFsLnNsYWJfb2JqZWN0cywgb2JqKTsKPiAgfQo+Cj4gLS8q
IHNvbWUgYm9va2tlZXBpbmcgKi8KPiAtc3RhdGljIHZvaWQgaTkxNV9nZW1faW5mb19hZGRfb2Jq
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAo+IC0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB1NjQgc2l6ZSkKPiAtewo+IC0gICAgICAgc3Bpbl9sb2NrKCZpOTE1LT5tbS5v
YmplY3Rfc3RhdF9sb2NrKTsKPiAtICAgICAgIGk5MTUtPm1tLm9iamVjdF9jb3VudCsrOwo+IC0g
ICAgICAgaTkxNS0+bW0ub2JqZWN0X21lbW9yeSArPSBzaXplOwo+IC0gICAgICAgc3Bpbl91bmxv
Y2soJmk5MTUtPm1tLm9iamVjdF9zdGF0X2xvY2spOwo+IC19Cj4gLQo+IC1zdGF0aWMgdm9pZCBp
OTE1X2dlbV9pbmZvX3JlbW92ZV9vYmooc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCj4g
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHU2NCBzaXplKQo+IC17Cj4gLSAg
ICAgICBzcGluX2xvY2soJmk5MTUtPm1tLm9iamVjdF9zdGF0X2xvY2spOwo+IC0gICAgICAgaTkx
NS0+bW0ub2JqZWN0X2NvdW50LS07Cj4gLSAgICAgICBpOTE1LT5tbS5vYmplY3RfbWVtb3J5IC09
IHNpemU7Cj4gLSAgICAgICBzcGluX3VubG9jaygmaTkxNS0+bW0ub2JqZWN0X3N0YXRfbG9jayk7
Cj4gLX0KPiAtCj4gIHN0YXRpYyB2b2lkCj4gIGZyb250YnVmZmVyX3JldGlyZShzdHJ1Y3QgaTkx
NV9hY3RpdmVfcmVxdWVzdCAqYWN0aXZlLAo+ICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaTkx
NV9yZXF1ZXN0ICpyZXF1ZXN0KQo+IEBAIC05OCw4ICs3OSw2IEBAIHZvaWQgaTkxNV9nZW1fb2Jq
ZWN0X2luaXQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKPiAgICAgICAgIG9iai0+
bW0ubWFkdiA9IEk5MTVfTUFEVl9XSUxMTkVFRDsKPiAgICAgICAgIElOSVRfUkFESVhfVFJFRSgm
b2JqLT5tbS5nZXRfcGFnZS5yYWRpeCwgR0ZQX0tFUk5FTCB8IF9fR0ZQX05PV0FSTik7Cj4gICAg
ICAgICBtdXRleF9pbml0KCZvYmotPm1tLmdldF9wYWdlLmxvY2spOwo+IC0KPiAtICAgICAgIGk5
MTVfZ2VtX2luZm9fYWRkX29iaih0b19pOTE1KG9iai0+YmFzZS5kZXYpLCBvYmotPmJhc2Uuc2l6
ZSk7Cj4gIH0KPgo+ICAvKioKPiBAQCAtMjQwLDcgKzIxOSw2IEBAIHN0YXRpYyB2b2lkIF9faTkx
NV9nZW1fZnJlZV9vYmplY3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAo+Cj4gICAg
ICAgICAgICAgICAgIHJlc2VydmF0aW9uX29iamVjdF9maW5pKCZvYmotPl9fYnVpbHRpbl9yZXN2
KTsKPiAgICAgICAgICAgICAgICAgZHJtX2dlbV9vYmplY3RfcmVsZWFzZSgmb2JqLT5iYXNlKTsK
PiAtICAgICAgICAgICAgICAgaTkxNV9nZW1faW5mb19yZW1vdmVfb2JqKGk5MTUsIG9iai0+YmFz
ZS5zaXplKTsKPgo+ICAgICAgICAgICAgICAgICBiaXRtYXBfZnJlZShvYmotPmJpdF8xNyk7Cj4g
ICAgICAgICAgICAgICAgIGk5MTVfZ2VtX29iamVjdF9mcmVlKG9iaik7Cj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaHJpbmtlci5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3Nocmlua2VyLmMKPiBpbmRleCA2YTkzZTMyNmFiZjMu
LmQ3MWU2MzBjNmZiOCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fc2hyaW5rZXIuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9zaHJpbmtlci5jCj4gQEAgLTMwOSwzMCArMzA5LDE0IEBAIGk5MTVfZ2VtX3Nocmlua2VyX2Nv
dW50KHN0cnVjdCBzaHJpbmtlciAqc2hyaW5rZXIsIHN0cnVjdCBzaHJpbmtfY29udHJvbCAqc2Mp
Cj4gIHsKPiAgICAgICAgIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0KPiAgICAgICAg
ICAgICAgICAgY29udGFpbmVyX29mKHNocmlua2VyLCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSwg
bW0uc2hyaW5rZXIpOwo+IC0gICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsK
PiAtICAgICAgIHVuc2lnbmVkIGxvbmcgbnVtX29iamVjdHMgPSAwOwo+IC0gICAgICAgdW5zaWdu
ZWQgbG9uZyBjb3VudCA9IDA7Cj4gKyAgICAgICB1bnNpZ25lZCBsb25nIG51bV9vYmplY3RzOwo+
ICsgICAgICAgdW5zaWduZWQgbG9uZyBjb3VudDsKPgo+IC0gICAgICAgc3Bpbl9sb2NrKCZpOTE1
LT5tbS5vYmpfbG9jayk7Cj4gLSAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5KG9iaiwgJmk5MTUt
Pm1tLnVuYm91bmRfbGlzdCwgbW0ubGluaykKPiAtICAgICAgICAgICAgICAgaWYgKGNhbl9yZWxl
YXNlX3BhZ2VzKG9iaikpIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICBjb3VudCArPSBvYmot
PmJhc2Uuc2l6ZSA+PiBQQUdFX1NISUZUOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIG51bV9v
YmplY3RzKys7Cj4gLSAgICAgICAgICAgICAgIH0KPiArICAgICAgIGNvdW50ID0gUkVBRF9PTkNF
KGk5MTUtPm1tLnNocmlua19tZW1vcnkpID4+IFBBR0VfU0hJRlQ7Cj4gKyAgICAgICBudW1fb2Jq
ZWN0cyA9IFJFQURfT05DRShpOTE1LT5tbS5zaHJpbmtfY291bnQpOwo+Cj4gLSAgICAgICBsaXN0
X2Zvcl9lYWNoX2VudHJ5KG9iaiwgJmk5MTUtPm1tLmJvdW5kX2xpc3QsIG1tLmxpbmspCj4gLSAg
ICAgICAgICAgICAgIGlmICghaTkxNV9nZW1fb2JqZWN0X2lzX2FjdGl2ZShvYmopICYmIGNhbl9y
ZWxlYXNlX3BhZ2VzKG9iaikpIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICBjb3VudCArPSBv
YmotPmJhc2Uuc2l6ZSA+PiBQQUdFX1NISUZUOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIG51
bV9vYmplY3RzKys7Cj4gLSAgICAgICAgICAgICAgIH0KPiAtICAgICAgIGxpc3RfZm9yX2VhY2hf
ZW50cnkob2JqLCAmaTkxNS0+bW0ucHVyZ2VfbGlzdCwgbW0ubGluaykKPiAtICAgICAgICAgICAg
ICAgaWYgKCFpOTE1X2dlbV9vYmplY3RfaXNfYWN0aXZlKG9iaikgJiYgY2FuX3JlbGVhc2VfcGFn
ZXMob2JqKSkgewo+IC0gICAgICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IG9iai0+YmFzZS5z
aXplID4+IFBBR0VfU0hJRlQ7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgbnVtX29iamVjdHMr
KzsKPiAtICAgICAgICAgICAgICAgfQo+IC0gICAgICAgc3Bpbl91bmxvY2soJmk5MTUtPm1tLm9i
al9sb2NrKTsKPiAtCj4gLSAgICAgICAvKiBVcGRhdGUgb3VyIHByZWZlcnJlZCB2bXNjYW4gYmF0
Y2ggc2l6ZSBmb3IgdGhlIG5leHQgcGFzcy4KPiArICAgICAgIC8qCj4gKyAgICAgICAgKiBVcGRh
dGUgb3VyIHByZWZlcnJlZCB2bXNjYW4gYmF0Y2ggc2l6ZSBmb3IgdGhlIG5leHQgcGFzcy4KPiAg
ICAgICAgICAqIE91ciByb3VnaCBndWVzcyBmb3IgYW4gZWZmZWN0aXZlIGJhdGNoIHNpemUgaXMg
cm91Z2hseSAyCj4gICAgICAgICAgKiBhdmFpbGFibGUgR0VNIG9iamVjdHMgd29ydGggb2YgcGFn
ZXMuIFRoYXQgaXMgd2UgZG9uJ3Qgd2FudAo+ICAgICAgICAgICogdGhlIHNocmlua2VyIHRvIGZp
cmUsIHVudGlsIGl0IGlzIHdvcnRoIHRoZSBjb3N0IG9mIGZyZWVpbmcgYW4KPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3N0b2xlbi5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3N0b2xlbi5jCj4gaW5kZXggOTA4MGE3MzY2NjNhLi44
YjNhMjNiZmY3ZjYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX3N0b2xlbi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3N0
b2xlbi5jCj4gQEAgLTY5MCw3ICs2OTAsOCBAQCBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX3N0b2xl
bl9mb3JfcHJlYWxsb2NhdGVkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdgo+ICAg
ICAgICAgbXV0ZXhfdW5sb2NrKCZnZ3R0LT52bS5tdXRleCk7Cj4KPiAgICAgICAgIHNwaW5fbG9j
aygmZGV2X3ByaXYtPm1tLm9ial9sb2NrKTsKPiAtICAgICAgIGxpc3RfbW92ZV90YWlsKCZvYmot
Pm1tLmxpbmssICZkZXZfcHJpdi0+bW0uYm91bmRfbGlzdCk7Cj4gKyAgICAgICBpZiAoaTkxNV9n
ZW1fb2JqZWN0X2lzX3Nocmlua2FibGUob2JqKSkKPiArICAgICAgICAgICAgICAgbGlzdF9tb3Zl
X3RhaWwoJm9iai0+bW0ubGluaywgJmRldl9wcml2LT5tbS5ib3VuZF9saXN0KTsKPiAgICAgICAg
IG9iai0+YmluZF9jb3VudCsrOwo+ICAgICAgICAgc3Bpbl91bmxvY2soJmRldl9wcml2LT5tbS5v
YmpfbG9jayk7Cj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1
Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYwo+IGluZGV4IGU0MTVk
N2VmOTBmMi4uMjE0ZGJkNjk4ZDhlIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZGVidWdmcy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2Zz
LmMKPiBAQCAtMjcxLDcgKzI3MSw3IEBAIHN0YXRpYyBpbnQgaTkxNV9nZW1fc3RvbGVuX2xpc3Rf
aW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpCj4gICAgICAgICB1bnNpZ25lZCBs
b25nIHRvdGFsLCBjb3VudCwgbjsKPiAgICAgICAgIGludCByZXQ7Cj4KPiAtICAgICAgIHRvdGFs
ID0gUkVBRF9PTkNFKGRldl9wcml2LT5tbS5vYmplY3RfY291bnQpOwo+ICsgICAgICAgdG90YWwg
PSBSRUFEX09OQ0UoZGV2X3ByaXYtPm1tLnNocmlua19jb3VudCk7Cj4gICAgICAgICBvYmplY3Rz
ID0ga3ZtYWxsb2NfYXJyYXkodG90YWwsIHNpemVvZigqb2JqZWN0cyksIEdGUF9LRVJORUwpOwo+
ICAgICAgICAgaWYgKCFvYmplY3RzKQo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsK
PiBAQCAtNDYwLDkgKzQ2MCw5IEBAIHN0YXRpYyBpbnQgaTkxNV9nZW1fb2JqZWN0X2luZm8oc3Ry
dWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQo+ICAgICAgICAgY2hhciBidWZbODBdOwo+ICAg
ICAgICAgaW50IHJldDsKPgo+IC0gICAgICAgc2VxX3ByaW50ZihtLCAiJXUgb2JqZWN0cywgJWxs
dSBieXRlc1xuIiwKPiAtICAgICAgICAgICAgICAgICAgZGV2X3ByaXYtPm1tLm9iamVjdF9jb3Vu
dCwKPiAtICAgICAgICAgICAgICAgICAgZGV2X3ByaXYtPm1tLm9iamVjdF9tZW1vcnkpOwo+ICsg
ICAgICAgc2VxX3ByaW50ZihtLCAiJXUgc2hyaW5rYWJsZSBvYmplY3RzLCAlbGx1IGJ5dGVzXG4i
LAo+ICsgICAgICAgICAgICAgICAgICBkZXZfcHJpdi0+bW0uc2hyaW5rX2NvdW50LAo+ICsgICAg
ICAgICAgICAgICAgICBkZXZfcHJpdi0+bW0uc2hyaW5rX21lbW9yeSk7Cj4KPiAgICAgICAgIHNp
emUgPSBjb3VudCA9IDA7Cj4gICAgICAgICBtYXBwZWRfc2l6ZSA9IG1hcHBlZF9jb3VudCA9IDA7
Cj4gQEAgLTU1Miw1NSArNTUyLDYgQEAgc3RhdGljIGludCBpOTE1X2dlbV9vYmplY3RfaW5mbyhz
dHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpCj4gICAgICAgICByZXR1cm4gMDsKPiAgfQo+
Cj4gLXN0YXRpYyBpbnQgaTkxNV9nZW1fZ3R0X2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lk
ICpkYXRhKQo+IC17Cj4gLSAgICAgICBzdHJ1Y3QgZHJtX2luZm9fbm9kZSAqbm9kZSA9IG0tPnBy
aXZhdGU7Cj4gLSAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSBub2Rl
X3RvX2k5MTUobm9kZSk7Cj4gLSAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gJmRldl9w
cml2LT5kcm07Cj4gLSAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqKm9iamVjdHM7
Cj4gLSAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwo+IC0gICAgICAgdTY0
IHRvdGFsX29ial9zaXplLCB0b3RhbF9ndHRfc2l6ZTsKPiAtICAgICAgIHVuc2lnbmVkIGxvbmcg
bm9iamVjdCwgbjsKPiAtICAgICAgIGludCBjb3VudCwgcmV0Owo+IC0KPiAtICAgICAgIG5vYmpl
Y3QgPSBSRUFEX09OQ0UoZGV2X3ByaXYtPm1tLm9iamVjdF9jb3VudCk7Cj4gLSAgICAgICBvYmpl
Y3RzID0ga3ZtYWxsb2NfYXJyYXkobm9iamVjdCwgc2l6ZW9mKCpvYmplY3RzKSwgR0ZQX0tFUk5F
TCk7Cj4gLSAgICAgICBpZiAoIW9iamVjdHMpCj4gLSAgICAgICAgICAgICAgIHJldHVybiAtRU5P
TUVNOwo+IC0KPiAtICAgICAgIHJldCA9IG11dGV4X2xvY2tfaW50ZXJydXB0aWJsZSgmZGV2LT5z
dHJ1Y3RfbXV0ZXgpOwo+IC0gICAgICAgaWYgKHJldCkKPiAtICAgICAgICAgICAgICAgcmV0dXJu
IHJldDsKPiAtCj4gLSAgICAgICBjb3VudCA9IDA7Cj4gLSAgICAgICBzcGluX2xvY2soJmRldl9w
cml2LT5tbS5vYmpfbG9jayk7Cj4gLSAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5KG9iaiwgJmRl
dl9wcml2LT5tbS5ib3VuZF9saXN0LCBtbS5saW5rKSB7Cj4gLSAgICAgICAgICAgICAgIG9iamVj
dHNbY291bnQrK10gPSBvYmo7Cj4gLSAgICAgICAgICAgICAgIGlmIChjb3VudCA9PSBub2JqZWN0
KQo+IC0gICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+IC0gICAgICAgfQo+IC0gICAgICAg
c3Bpbl91bmxvY2soJmRldl9wcml2LT5tbS5vYmpfbG9jayk7Cj4gLQo+IC0gICAgICAgdG90YWxf
b2JqX3NpemUgPSB0b3RhbF9ndHRfc2l6ZSA9IDA7Cj4gLSAgICAgICBmb3IgKG4gPSAwOyAgbiA8
IGNvdW50OyBuKyspIHsKPiAtICAgICAgICAgICAgICAgb2JqID0gb2JqZWN0c1tuXTsKPiAtCj4g
LSAgICAgICAgICAgICAgIHNlcV9wdXRzKG0sICIgICAiKTsKPiAtICAgICAgICAgICAgICAgZGVz
Y3JpYmVfb2JqKG0sIG9iaik7Cj4gLSAgICAgICAgICAgICAgIHNlcV9wdXRjKG0sICdcbicpOwo+
IC0gICAgICAgICAgICAgICB0b3RhbF9vYmpfc2l6ZSArPSBvYmotPmJhc2Uuc2l6ZTsKPiAtICAg
ICAgICAgICAgICAgdG90YWxfZ3R0X3NpemUgKz0gaTkxNV9nZW1fb2JqX3RvdGFsX2dndHRfc2l6
ZShvYmopOwo+IC0gICAgICAgfQo+IC0KPiAtICAgICAgIG11dGV4X3VubG9jaygmZGV2LT5zdHJ1
Y3RfbXV0ZXgpOwo+IC0KPiAtICAgICAgIHNlcV9wcmludGYobSwgIlRvdGFsICVkIG9iamVjdHMs
ICVsbHUgYnl0ZXMsICVsbHUgR1RUIHNpemVcbiIsCj4gLSAgICAgICAgICAgICAgICAgIGNvdW50
LCB0b3RhbF9vYmpfc2l6ZSwgdG90YWxfZ3R0X3NpemUpOwo+IC0gICAgICAga3ZmcmVlKG9iamVj
dHMpOwo+IC0KPiAtICAgICAgIHJldHVybiAwOwo+IC19Cj4gLQo+ICBzdGF0aWMgaW50IGk5MTVf
Z2VtX2JhdGNoX3Bvb2xfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpCj4gIHsK
PiAgICAgICAgIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IG5vZGVfdG9faTkx
NShtLT5wcml2YXRlKTsKPiBAQCAtNDU4NCw3ICs0NTM1LDYgQEAgc3RhdGljIGNvbnN0IHN0cnVj
dCBmaWxlX29wZXJhdGlvbnMgaTkxNV9maWZvX3VuZGVycnVuX3Jlc2V0X29wcyA9IHsKPiAgc3Rh
dGljIGNvbnN0IHN0cnVjdCBkcm1faW5mb19saXN0IGk5MTVfZGVidWdmc19saXN0W10gPSB7Cj4g
ICAgICAgICB7Imk5MTVfY2FwYWJpbGl0aWVzIiwgaTkxNV9jYXBhYmlsaXRpZXMsIDB9LAo+ICAg
ICAgICAgeyJpOTE1X2dlbV9vYmplY3RzIiwgaTkxNV9nZW1fb2JqZWN0X2luZm8sIDB9LAo+IC0g
ICAgICAgeyJpOTE1X2dlbV9ndHQiLCBpOTE1X2dlbV9ndHRfaW5mbywgMH0sCj4gICAgICAgICB7
Imk5MTVfZ2VtX3N0b2xlbiIsIGk5MTVfZ2VtX3N0b2xlbl9saXN0X2luZm8gfSwKPiAgICAgICAg
IHsiaTkxNV9nZW1fZmVuY2VfcmVncyIsIGk5MTVfZ2VtX2ZlbmNlX3JlZ3NfaW5mbywgMH0sCj4g
ICAgICAgICB7Imk5MTVfZ2VtX2ludGVycnVwdCIsIGk5MTVfaW50ZXJydXB0X2luZm8sIDB9LAo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaAo+IGluZGV4IGZiMmU4OTEzM2U3OC4uNzcwYzU0Yjg3ZGU2
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCj4gQEAgLTkyNiwxMCArOTI2LDkgQEAgc3Ry
dWN0IGk5MTVfZ2VtX21tIHsKPiAgICAgICAgIC8qKiBCaXQgNiBzd2l6emxpbmcgcmVxdWlyZWQg
Zm9yIFkgdGlsaW5nICovCj4gICAgICAgICB1MzIgYml0XzZfc3dpenpsZV95Owo+Cj4gLSAgICAg
ICAvKiBhY2NvdW50aW5nLCB1c2VmdWwgZm9yIHVzZXJsYW5kIGRlYnVnZ2luZyAqLwo+IC0gICAg
ICAgc3BpbmxvY2tfdCBvYmplY3Rfc3RhdF9sb2NrOwo+IC0gICAgICAgdTY0IG9iamVjdF9tZW1v
cnk7Cj4gLSAgICAgICB1MzIgb2JqZWN0X2NvdW50Owo+ICsgICAgICAgLyogc2hyaW5rZXIgYWNj
b3VudGluZywgYWxzbyB1c2VmdWwgZm9yIHVzZXJsYW5kIGRlYnVnZ2luZyAqLwo+ICsgICAgICAg
dTY0IHNocmlua19tZW1vcnk7Cj4gKyAgICAgICB1MzIgc2hyaW5rX2NvdW50OwoKQ29sb3VyIG1l
IGNvbmZ1c2VkLiBJIGNhbid0IHNlZSB3aGVyZSB3ZSBzZXQgdGhlc2U/IE9yIGlzIG15IGJyYWlu
IGZyaWVkPwoKPiAgfTsKPgo+ICAjZGVmaW5lIEk5MTVfSURMRV9FTkdJTkVTX1RJTUVPVVQgKDIw
MCkgLyogaW4gbXMgKi8KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKPiBpbmRleCBkOThjY2JiZGU1
M2MuLjBhNTA0OWFlYzE0NCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dlbS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwo+IEBAIC0xMTM3
LDE1ICsxMTM3LDE3IEBAIGk5MTVfZ2VtX21hZHZpc2VfaW9jdGwoc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwgdm9pZCAqZGF0YSwKPiAgICAgICAgIGlmIChpOTE1X2dlbV9vYmplY3RfaGFzX3BhZ2Vz
KG9iaikpIHsKPiAgICAgICAgICAgICAgICAgc3RydWN0IGxpc3RfaGVhZCAqbGlzdDsKPgo+IC0g
ICAgICAgICAgICAgICBzcGluX2xvY2soJmk5MTUtPm1tLm9ial9sb2NrKTsKPiAtICAgICAgICAg
ICAgICAgaWYgKG9iai0+bW0ubWFkdiAhPSBJOTE1X01BRFZfV0lMTE5FRUQpCj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgbGlzdCA9ICZpOTE1LT5tbS5wdXJnZV9saXN0Owo+IC0gICAgICAgICAg
ICAgICBlbHNlIGlmIChvYmotPmJpbmRfY291bnQpCj4gLSAgICAgICAgICAgICAgICAgICAgICAg
bGlzdCA9ICZpOTE1LT5tbS5ib3VuZF9saXN0Owo+IC0gICAgICAgICAgICAgICBlbHNlCj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgbGlzdCA9ICZpOTE1LT5tbS51bmJvdW5kX2xpc3Q7Cj4gLSAg
ICAgICAgICAgICAgIGxpc3RfbW92ZV90YWlsKCZvYmotPm1tLmxpbmssIGxpc3QpOwo+IC0gICAg
ICAgICAgICAgICBzcGluX3VubG9jaygmaTkxNS0+bW0ub2JqX2xvY2spOwo+ICsgICAgICAgICAg
ICAgICBpZiAoaTkxNV9nZW1fb2JqZWN0X2lzX3Nocmlua2FibGUob2JqKSkgewo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIHNwaW5fbG9jaygmaTkxNS0+bW0ub2JqX2xvY2spOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIGlmIChvYmotPm1tLm1hZHYgIT0gSTkxNV9NQURWX1dJTExORUVEKQo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdCA9ICZpOTE1LT5tbS5wdXJnZV9s
aXN0Owo+ICsgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9iai0+YmluZF9jb3VudCkK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QgPSAmaTkxNS0+bW0uYm91bmRf
bGlzdDsKPiArICAgICAgICAgICAgICAgICAgICAgICBlbHNlCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBsaXN0ID0gJmk5MTUtPm1tLnVuYm91bmRfbGlzdDsKPiArICAgICAgICAg
ICAgICAgICAgICAgICBsaXN0X21vdmVfdGFpbCgmb2JqLT5tbS5saW5rLCBsaXN0KTsKPiArICAg
ICAgICAgICAgICAgICAgICAgICBzcGluX3VubG9jaygmaTkxNS0+bW0ub2JqX2xvY2spOwo+ICsg
ICAgICAgICAgICAgICB9Cj4gICAgICAgICB9Cj4KPiAgICAgICAgIC8qIGlmIHRoZSBvYmplY3Qg
aXMgbm8gbG9uZ2VyIGF0dGFjaGVkLCBkaXNjYXJkIGl0cyBiYWNraW5nIHN0b3JhZ2UgKi8KPiBA
QCAtMTc1MCw3ICsxNzUyLDYgQEAgaTkxNV9nZW1fbG9hZF9pbml0X2ZlbmNlcyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCj4KPiAgc3RhdGljIHZvaWQgaTkxNV9nZW1faW5pdF9f
bW0oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCj4gIHsKPiAtICAgICAgIHNwaW5fbG9j
a19pbml0KCZpOTE1LT5tbS5vYmplY3Rfc3RhdF9sb2NrKTsKPiAgICAgICAgIHNwaW5fbG9ja19p
bml0KCZpOTE1LT5tbS5vYmpfbG9jayk7Cj4gICAgICAgICBzcGluX2xvY2tfaW5pdCgmaTkxNS0+
bW0uZnJlZV9sb2NrKTsKPgo+IEBAIC0xODAwLDcgKzE4MDEsNyBAQCB2b2lkIGk5MTVfZ2VtX2Ns
ZWFudXBfZWFybHkoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+ICAgICAgICAg
aTkxNV9nZW1fZHJhaW5fZnJlZWRfb2JqZWN0cyhkZXZfcHJpdik7Cj4gICAgICAgICBHRU1fQlVH
X09OKCFsbGlzdF9lbXB0eSgmZGV2X3ByaXYtPm1tLmZyZWVfbGlzdCkpOwo+ICAgICAgICAgR0VN
X0JVR19PTihhdG9taWNfcmVhZCgmZGV2X3ByaXYtPm1tLmZyZWVfY291bnQpKTsKPiAtICAgICAg
IFdBUk5fT04oZGV2X3ByaXYtPm1tLm9iamVjdF9jb3VudCk7Cj4gKyAgICAgICBXQVJOX09OKGRl
dl9wcml2LT5tbS5zaHJpbmtfY291bnQpOwo+Cj4gICAgICAgICBjbGVhbnVwX3NyY3Vfc3RydWN0
KCZkZXZfcHJpdi0+Z3B1X2Vycm9yLnJlc2V0X2JhY2tvZmZfc3JjdSk7Cj4KPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfdm1hLmMKPiBpbmRleCBmNjQwY2FlYzRiYWUuLmI3ZmI3ZDIxNmY3NyAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV92bWEuYwo+IEBAIC0xMTAsNyArMTEwLDggQEAgc3RhdGljIHZvaWQgX19p
OTE1X3ZtYV9yZXRpcmUoc3RydWN0IGk5MTVfYWN0aXZlICpyZWYpCj4gICAgICAgICAgKiBzbyB0
aGF0IHdlIGRvbid0IHN0ZWFsIGZyb20gcmVjZW50bHkgdXNlZCBidXQgaW5hY3RpdmUgb2JqZWN0
cwo+ICAgICAgICAgICogKHVubGVzcyB3ZSBhcmUgZm9yY2VkIHRvIG9mYyEpCj4gICAgICAgICAg
Ki8KPiAtICAgICAgIG9ial9idW1wX21ydShvYmopOwo+ICsgICAgICAgaWYgKGk5MTVfZ2VtX29i
amVjdF9pc19zaHJpbmthYmxlKG9iaikpCj4gKyAgICAgICAgICAgICAgIG9ial9idW1wX21ydShv
YmopOwo+Cj4gICAgICAgICBpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7IC8qIGFuZCBkcm9wIHRo
ZSBhY3RpdmUgcmVmZXJlbmNlICovCj4gIH0KPiBAQCAtNjc3LDExICs2NzgsMTQgQEAgaTkxNV92
bWFfaW5zZXJ0KHN0cnVjdCBpOTE1X3ZtYSAqdm1hLCB1NjQgc2l6ZSwgdTY0IGFsaWdubWVudCwg
dTY0IGZsYWdzKQo+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAq
b2JqID0gdm1hLT5vYmo7Cj4KPiAgICAgICAgICAgICAgICAgc3Bpbl9sb2NrKCZkZXZfcHJpdi0+
bW0ub2JqX2xvY2spOwo+IC0gICAgICAgICAgICAgICBsaXN0X21vdmVfdGFpbCgmb2JqLT5tbS5s
aW5rLCAmZGV2X3ByaXYtPm1tLmJvdW5kX2xpc3QpOwo+IC0gICAgICAgICAgICAgICBvYmotPmJp
bmRfY291bnQrKzsKPiAtICAgICAgICAgICAgICAgc3Bpbl91bmxvY2soJmRldl9wcml2LT5tbS5v
YmpfbG9jayk7Cj4KPiArICAgICAgICAgICAgICAgaWYgKGk5MTVfZ2VtX29iamVjdF9pc19zaHJp
bmthYmxlKG9iaikpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgbGlzdF9tb3ZlX3RhaWwoJm9i
ai0+bW0ubGluaywgJmRldl9wcml2LT5tbS5ib3VuZF9saXN0KTsKPiArCj4gKyAgICAgICAgICAg
ICAgIG9iai0+YmluZF9jb3VudCsrOwo+ICAgICAgICAgICAgICAgICBhc3NlcnRfYmluZF9jb3Vu
dChvYmopOwo+ICsKPiArICAgICAgICAgICAgICAgc3Bpbl91bmxvY2soJmRldl9wcml2LT5tbS5v
YmpfbG9jayk7Cj4gICAgICAgICB9Cj4KPiAgICAgICAgIHJldHVybiAwOwo+IEBAIC03MTcsOSAr
NzIxLDEzIEBAIGk5MTVfdm1hX3JlbW92ZShzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKPiAgICAgICAg
ICAgICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiA9IHZtYS0+b2JqOwo+Cj4g
ICAgICAgICAgICAgICAgIHNwaW5fbG9jaygmaTkxNS0+bW0ub2JqX2xvY2spOwo+ICsKPiArICAg
ICAgICAgICAgICAgR0VNX0JVR19PTihvYmotPmJpbmRfY291bnQgPT0gMCk7Cj4gICAgICAgICAg
ICAgICAgIGlmICgtLW9iai0+YmluZF9jb3VudCA9PSAwICYmCj4gKyAgICAgICAgICAgICAgICAg
ICBpOTE1X2dlbV9vYmplY3RfaXNfc2hyaW5rYWJsZShvYmopICYmCj4gICAgICAgICAgICAgICAg
ICAgICBvYmotPm1tLm1hZHYgPT0gSTkxNV9NQURWX1dJTExORUVEKQo+ICAgICAgICAgICAgICAg
ICAgICAgICAgIGxpc3RfbW92ZV90YWlsKCZvYmotPm1tLmxpbmssICZpOTE1LT5tbS51bmJvdW5k
X2xpc3QpOwo+ICsKPiAgICAgICAgICAgICAgICAgc3Bpbl91bmxvY2soJmk5MTUtPm1tLm9ial9s
b2NrKTsKPgo+ICAgICAgICAgICAgICAgICAvKgo+IC0tCj4gMi4yMC4xCj4KPiBfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+IEludGVsLWdmeCBtYWlsaW5n
IGxpc3QKPiBJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJ
bnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

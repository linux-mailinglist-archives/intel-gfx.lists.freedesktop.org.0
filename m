Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 90C9AD7137
	for <lists+intel-gfx@lfdr.de>; Tue, 15 Oct 2019 10:37:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B482C6E785;
	Tue, 15 Oct 2019 08:37:45 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4CF446E783
 for <intel-gfx@lists.freedesktop.org>; Tue, 15 Oct 2019 08:37:43 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 15 Oct 2019 01:37:43 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,298,1566889200"; d="scan'208";a="395460401"
Received: from yanghuib-mobl.ger.corp.intel.com (HELO
 skylake-nuc.ger.corp.intel.com) ([10.249.254.242])
 by fmsmga005.fm.intel.com with ESMTP; 15 Oct 2019 01:37:41 -0700
From: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 15 Oct 2019 11:37:22 +0300
Message-Id: <20191015083724.24390-3-abdiel.janulgue@linux.intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191015083724.24390-1-abdiel.janulgue@linux.intel.com>
References: <20191015083724.24390-1-abdiel.janulgue@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 3/5] drm/i915: Introduce
 DRM_I915_GEM_MMAP_OFFSET
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhpcyBpcyByZWFsbHkganVzdCBhbiBhbGlhcyBvZiBtbWFwX2d0dC4gVGhlICdtbWFwIG9mZnNl
dCcgbm9tZW5jbGF0dXJlCmNvbWVzIHRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGlzIGlvY3RsIHdo
aWNoIGlzIHRoZSBvZmZzZXQgaW50byB0aGUKZGV2aWNlIGZkIHdoaWNoIHVzZXJwYWNlIHVzZXMg
d2l0aCBtbWFwKDIpLgoKbW1hcF9ndHQgd2FzIG91ciBpbml0aWFsIG1tYXBfb2Zmc2V0IGltcGxl
bWVudGF0aW9uLCB0aGlzIGV4dGVuZHMKb3VyIENQVSBtbWFwIHN1cHBvcnQgdG8gYWxsb3cgYWRk
aXRpb25hbCBmYXVsdCBoYW5kbGVycyB0aGF0IGRlcGVuZHMgb24KdGhlIG9iamVjdCdzIGJhY2tp
bmcgcGFnZXMuCgpOb3RlIHRoYXQgd2UgbXVsdGlwbGV4IG1tYXBfZ3R0IGFuZCBtbWFwX29mZnNl
dCB0aHJvdWdoIHRoZSBzYW1lIGlvY3RsLAphbmQgdXNlIHRoZSB6ZXJvIGV4dGVuZGluZyBiZWhh
dmlvdXIgb2YgZHJtIHRvIGRpZmZlcmVudGlhdGUgYmV0d2Vlbgp0aGVtLCB3aGVuIHdlIGluc3Bl
Y3QgdGhlIGZsYWdzLgoKdjI6Ci0gRHJvcCB0aGUgYWxpYXMsIGp1c3QgcmVuYW1lIHRoZSBzdHJ1
Y3QgKENocmlzKQotIERvbid0IGJhaWwgb3V0IG9uIG5vIFBBVCB3aGVuIGRvaW5nIFdCIG1tYXBz
Ci0gUHJlcGFyZSB1QVBJIGZvciBmdXJ0aGVyIGV4dGVuc2lvbnMKClNpZ25lZC1vZmYtYnk6IEFi
ZGllbCBKYW51bGd1ZSA8YWJkaWVsLmphbnVsZ3VlQGxpbnV4LmludGVsLmNvbT4KU2lnbmVkLW9m
Zi1ieTogTWF0dGhldyBBdWxkIDxtYXR0aGV3LmF1bGRAaW50ZWwuY29tPgpDYzogSm9vbmFzIExh
aHRpbmVuIDxqb29uYXMubGFodGluZW5AbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmMgICAgICB8IDM2ICsrKysrKysrKysrKysrKysr
LS0KIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oICB8ICAzICsr
CiBpbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmggICAgICAgICAgICAgICAgICAgfCAzMCArKysr
KysrKysrKysrKystCiAzIGZpbGVzIGNoYW5nZWQsIDY2IGluc2VydGlvbnMoKyksIDMgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX21t
YW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmMKaW5kZXggNGZi
NDZjYmYxYmNjLi43NjNmM2JkNzhlNjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9tbWFuLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX21tYW4uYwpAQCAtMTQ0LDYgKzE0NCw5IEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgdGlsZV9y
b3dfcGFnZXMoY29uc3Qgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKICAqIDMgLSBS
ZW1vdmUgaW1wbGljaXQgc2V0LWRvbWFpbihHVFQpIGFuZCBzeW5jaHJvbmlzYXRpb24gb24gaW5p
dGlhbAogICogICAgIHBhZ2VmYXVsdDsgc3dhcGluIHJlbWFpbnMgdHJhbnNwYXJlbnQuCiAgKgor
ICogNCAtIFN1cHBvcnQgbXVsdGlwbGUgZmF1bHQgaGFuZGxlcnMgcGVyIG9iamVjdCBkZXBlbmRp
bmcgb24gb2JqZWN0J3MKKyAqICAgICBiYWNraW5nIHN0b3JhZ2UgKGEuay5hLiBNTUFQX09GRlNF
VCkuCisgKgogICogUmVzdHJpY3Rpb25zOgogICoKICAqICAqIHNub29wYWJsZSBvYmplY3RzIGNh
bm5vdCBiZSBhY2Nlc3NlZCB2aWEgdGhlIEdUVC4gSXQgY2FuIGNhdXNlIG1hY2hpbmUKQEAgLTE3
MSw3ICsxNzQsNyBAQCBzdGF0aWMgdW5zaWduZWQgaW50IHRpbGVfcm93X3BhZ2VzKGNvbnN0IHN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAgKi8KIGludCBpOTE1X2dlbV9tbWFwX2d0
dF92ZXJzaW9uKHZvaWQpCiB7Ci0JcmV0dXJuIDM7CisJcmV0dXJuIDQ7CiB9CiAKIHN0YXRpYyBp
bmxpbmUgc3RydWN0IGk5MTVfZ2d0dF92aWV3CkBAIC01MzksNiArNTQyLDI3IEBAIF9fYXNzaWdu
X2dlbV9vYmplY3RfbW1hcF9kYXRhKHN0cnVjdCBkcm1fZmlsZSAqZmlsZSwKIAlyZXR1cm4gcmV0
OwogfQogCitzdGF0aWMgaW50IGdlbV9tbWFwX29mZnNldChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LCB2b2lkICpkYXRhLAorCQkJICAgc3RydWN0IGRybV9maWxlICpmaWxlKQoreworCXN0cnVjdCBk
cm1faTkxNV9nZW1fbW1hcF9vZmZzZXQgKmFyZ3MgPSBkYXRhOworCWVudW0gaTkxNV9tbWFwX3R5
cGUgdHlwZTsKKworCWlmICgoYXJncy0+ZmxhZ3MgJiAoSTkxNV9NTUFQX09GRlNFVF9XQyB8IEk5
MTVfTU1BUF9PRkZTRVRfVUMpKSAmJgorCSAgICAhYm9vdF9jcHVfaGFzKFg4Nl9GRUFUVVJFX1BB
VCkpCisJCXJldHVybiAtRU5PREVWOworCisJaWYgKGFyZ3MtPmZsYWdzICYgSTkxNV9NTUFQX09G
RlNFVF9XQykKKwkJdHlwZSA9IEk5MTVfTU1BUF9UWVBFX1dDOworCWVsc2UgaWYgKGFyZ3MtPmZs
YWdzICYgSTkxNV9NTUFQX09GRlNFVF9XQikKKwkJdHlwZSA9IEk5MTVfTU1BUF9UWVBFX1dCOwor
CWVsc2UgaWYgKGFyZ3MtPmZsYWdzICYgSTkxNV9NTUFQX09GRlNFVF9VQykKKwkJdHlwZSA9IEk5
MTVfTU1BUF9UWVBFX1VDOworCisJcmV0dXJuIF9fYXNzaWduX2dlbV9vYmplY3RfbW1hcF9kYXRh
KGZpbGUsIGFyZ3MtPmhhbmRsZSwgdHlwZSwKKwkJCQkJICAgICAmYXJncy0+b2Zmc2V0KTsKK30K
KwogLyoqCiAgKiBpOTE1X2dlbV9tbWFwX2d0dF9pb2N0bCAtIHByZXBhcmUgYW4gb2JqZWN0IGZv
ciBHVFQgbW1hcCdpbmcKICAqIEBkZXY6IERSTSBkZXZpY2UKQEAgLTU1OCw3ICs1ODIsMTUgQEAg
aW50CiBpOTE1X2dlbV9tbWFwX2d0dF9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lk
ICpkYXRhLAogCQkJc3RydWN0IGRybV9maWxlICpmaWxlKQogewotCXN0cnVjdCBkcm1faTkxNV9n
ZW1fbW1hcF9ndHQgKmFyZ3MgPSBkYXRhOworCXN0cnVjdCBkcm1faTkxNV9nZW1fbW1hcF9vZmZz
ZXQgKmFyZ3MgPSBkYXRhOworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkx
NShkZXYpOworCisJaWYgKGFyZ3MtPmZsYWdzICYgSTkxNV9NTUFQX09GRlNFVF9GTEFHUykKKwkJ
cmV0dXJuIGdlbV9tbWFwX29mZnNldChkZXYsIGRhdGEsIGZpbGUpOworCisJaWYgKCFIQVNfTUFQ
UEFCTEVfQVBFUlRVUkUoaTkxNSkpCisJCS8qIE5vIGFwZXJ0dXJlLCBjYW5ub3QgbW1hcCB2aWEg
bGVnYWN5IEdUVCAqLworCQlyZXR1cm4gLUVOT0RFVjsKIAogCXJldHVybiBfX2Fzc2lnbl9nZW1f
b2JqZWN0X21tYXBfZGF0YShmaWxlLCBhcmdzLT5oYW5kbGUsCiAJCQkJCSAgICAgSTkxNV9NTUFQ
X1RZUEVfR1RULApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X29iamVjdF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVj
dF90eXBlcy5oCmluZGV4IGM1YzMwNWJkOTkyNy4uYzY0M2Q0NWY1YzBkIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVzLmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oCkBAIC02NCw2ICs2
NCw5IEBAIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0X29wcyB7CiAKIGVudW0gaTkxNV9tbWFw
X3R5cGUgewogCUk5MTVfTU1BUF9UWVBFX0dUVCA9IDAsCisJSTkxNV9NTUFQX1RZUEVfV0MsCisJ
STkxNV9NTUFQX1RZUEVfV0IsCisJSTkxNV9NTUFQX1RZUEVfVUMsCiB9OwogCiBzdHJ1Y3QgaTkx
NV9tbWFwX29mZnNldCB7CmRpZmYgLS1naXQgYS9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgg
Yi9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgKaW5kZXggNjNkNDBjYmE5N2UwLi4wOWU3Nzcx
MzNjODEgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAorKysgYi9pbmNs
dWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgKQEAgLTM5NCw3ICszOTQsNyBAQCB0eXBlZGVmIHN0cnVj
dCBfZHJtX2k5MTVfc2FyZWEgewogI2RlZmluZSBEUk1fSU9DVExfSTkxNV9HRU1fUFJFQUQJRFJN
X0lPVyAoRFJNX0NPTU1BTkRfQkFTRSArIERSTV9JOTE1X0dFTV9QUkVBRCwgc3RydWN0IGRybV9p
OTE1X2dlbV9wcmVhZCkKICNkZWZpbmUgRFJNX0lPQ1RMX0k5MTVfR0VNX1BXUklURQlEUk1fSU9X
IChEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX1BXUklURSwgc3RydWN0IGRybV9pOTE1
X2dlbV9wd3JpdGUpCiAjZGVmaW5lIERSTV9JT0NUTF9JOTE1X0dFTV9NTUFQCQlEUk1fSU9XUihE
Uk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX01NQVAsIHN0cnVjdCBkcm1faTkxNV9nZW1f
bW1hcCkKLSNkZWZpbmUgRFJNX0lPQ1RMX0k5MTVfR0VNX01NQVBfR1RUCURSTV9JT1dSKERSTV9D
T01NQU5EX0JBU0UgKyBEUk1fSTkxNV9HRU1fTU1BUF9HVFQsIHN0cnVjdCBkcm1faTkxNV9nZW1f
bW1hcF9ndHQpCisjZGVmaW5lIERSTV9JT0NUTF9JOTE1X0dFTV9NTUFQX0dUVAlEUk1fSU9XUihE
Uk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX01NQVBfR1RULCBzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX21tYXBfb2Zmc2V0KQogI2RlZmluZSBEUk1fSU9DVExfSTkxNV9HRU1fU0VUX0RPTUFJTglE
Uk1fSU9XIChEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX1NFVF9ET01BSU4sIHN0cnVj
dCBkcm1faTkxNV9nZW1fc2V0X2RvbWFpbikKICNkZWZpbmUgRFJNX0lPQ1RMX0k5MTVfR0VNX1NX
X0ZJTklTSAlEUk1fSU9XIChEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX1NXX0ZJTklT
SCwgc3RydWN0IGRybV9pOTE1X2dlbV9zd19maW5pc2gpCiAjZGVmaW5lIERSTV9JT0NUTF9JOTE1
X0dFTV9TRVRfVElMSU5HCURSTV9JT1dSIChEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VN
X1NFVF9USUxJTkcsIHN0cnVjdCBkcm1faTkxNV9nZW1fc2V0X3RpbGluZykKQEAgLTc5Myw2ICs3
OTMsMzQgQEAgc3RydWN0IGRybV9pOTE1X2dlbV9tbWFwX2d0dCB7CiAJX191NjQgb2Zmc2V0Owog
fTsKIAorc3RydWN0IGRybV9pOTE1X2dlbV9tbWFwX29mZnNldCB7CisJLyoqIEhhbmRsZSBmb3Ig
dGhlIG9iamVjdCBiZWluZyBtYXBwZWQuICovCisJX191MzIgaGFuZGxlOworCV9fdTMyIHBhZDsK
KwkvKioKKwkgKiBGYWtlIG9mZnNldCB0byB1c2UgZm9yIHN1YnNlcXVlbnQgbW1hcCBjYWxsCisJ
ICoKKwkgKiBUaGlzIGlzIGEgZml4ZWQtc2l6ZSB0eXBlIGZvciAzMi82NCBjb21wYXRpYmlsaXR5
LgorCSAqLworCV9fdTY0IG9mZnNldDsKKworCS8qKgorCSAqIEZsYWdzIGZvciBleHRlbmRlZCBi
ZWhhdmlvdXIuCisJICoKKwkgKiBJdCBpcyBtYW5kYXRvcnkgdGhhdCBlaXRoZXIgb25lIG9mIHRo
ZSBNTUFQX09GRlNFVCBmbGFncworCSAqIHNob3VsZCBiZSBwYXNzZWQgaGVyZS4KKwkgKi8KKwlf
X3U2NCBmbGFnczsKKyNkZWZpbmUgSTkxNV9NTUFQX09GRlNFVF9FWFRFTlNJT04gKDF1IDw8IDAp
CisjZGVmaW5lIEk5MTVfTU1BUF9PRkZTRVRfV0MgKDF1IDw8IDEpCisjZGVmaW5lIEk5MTVfTU1B
UF9PRkZTRVRfV0IgKDF1IDw8IDIpCisjZGVmaW5lIEk5MTVfTU1BUF9PRkZTRVRfVUMgKDF1IDw8
IDMpCisjZGVmaW5lIEk5MTVfTU1BUF9PRkZTRVRfRkxBR1MgXAorCShJOTE1X01NQVBfT0ZGU0VU
X0VYVEVOU0lPTiB8IEk5MTVfTU1BUF9PRkZTRVRfV0MgfCBcCisJIEk5MTVfTU1BUF9PRkZTRVRf
V0IgfCBJOTE1X01NQVBfT0ZGU0VUX1VDKQorCV9fdTY0IGV4dGVuc2lvbnM7Cit9OworCiBzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX3NldF9kb21haW4gewogCS8qKiBIYW5kbGUgZm9yIHRoZSBvYmplY3Qg
Ki8KIAlfX3UzMiBoYW5kbGU7Ci0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeA==

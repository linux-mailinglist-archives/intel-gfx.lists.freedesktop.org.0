Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7C81AE4B3A
	for <lists+intel-gfx@lfdr.de>; Fri, 25 Oct 2019 14:38:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 46F9F6E9F8;
	Fri, 25 Oct 2019 12:38:19 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 850F389CBE;
 Fri, 25 Oct 2019 12:38:17 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 25 Oct 2019 05:38:17 -0700
X-IronPort-AV: E=Sophos;i="5.68,228,1569308400"; d="scan'208";a="192528237"
Received: from mdlugoke-mobl1.ger.corp.intel.com (HELO [10.251.81.75])
 ([10.251.81.75])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 25 Oct 2019 05:38:15 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191025105910.14287-1-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <88f8dcbd-b31f-a078-2940-c0f179b81913@linux.intel.com>
Date: Fri, 25 Oct 2019 13:38:13 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191025105910.14287-1-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH i-g-t] benchmarks/gem_wsim: Cleanup register
 access on exit
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDI1LzEwLzIwMTkgMTE6NTksIENocmlzIFdpbHNvbiB3cm90ZToKPiBEcm9wIHRoZSBmb3Jj
ZXdha2UgYmVmb3JlIGxpYmlndCB0cmllcyB0byB3YWl0IG9uIGl0Lgo+IAo+IFNpZ25lZC1vZmYt
Ynk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+IENjOiBUdnJ0a28g
VXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgo+IC0tLQo+ICAgYmVuY2htYXJrcy9n
ZW1fd3NpbS5jIHwgNDcgKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tLS0t
LQo+ICAgMSBmaWxlIGNoYW5nZWQsIDI1IGluc2VydGlvbnMoKyksIDIyIGRlbGV0aW9ucygtKQo+
IAo+IGRpZmYgLS1naXQgYS9iZW5jaG1hcmtzL2dlbV93c2ltLmMgYi9iZW5jaG1hcmtzL2dlbV93
c2ltLmMKPiBpbmRleCA4N2Y4NzNiMGUuLjMzN2UxM2Y5MSAxMDA2NDQKPiAtLS0gYS9iZW5jaG1h
cmtzL2dlbV93c2ltLmMKPiArKysgYi9iZW5jaG1hcmtzL2dlbV93c2ltLmMKPiBAQCAtMzA3Miw4
ICszMDcyLDYgQEAgc3RhdGljIHZvaWQgaW5pdF9jbG9ja3Modm9pZCkKPiAgIAl1aW50MzJfdCBy
Y3Nfc3RhcnQsIHJjc19lbmQ7Cj4gICAJZG91YmxlIG92ZXJoZWFkLCB0Owo+ICAgCj4gLQlpbnRl
bF9yZWdpc3Rlcl9hY2Nlc3NfaW5pdCgmbW1pb19kYXRhLCBpbnRlbF9nZXRfcGNpX2RldmljZSgp
LCBmYWxzZSwgZmQpOwo+IC0KPiAgIAlpZiAodmVyYm9zZSA8PSAxKQo+ICAgCQlyZXR1cm47Cj4g
ICAKPiBAQCAtMzExNCw2ICszMTEyLDcgQEAgaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKiphcmd2
KQo+ICAgCXN0cnVjdCB3X2FyZyAqd19hcmdzID0gTlVMTDsKPiAgIAl1bnNpZ25lZCBpbnQgdG9s
ZXJhbmNlX3BjdCA9IDE7Cj4gICAJY29uc3Qgc3RydWN0IHdvcmtsb2FkX2JhbGFuY2VyICpiYWxh
bmNlciA9IE5VTEw7Cj4gKwlpbnQgZXhpdGNvZGUgPSBFWElUX0ZBSUxVUkU7Cj4gICAJY2hhciAq
ZW5kcHRyID0gTlVMTDsKPiAgIAlpbnQgcHJpbyA9IDA7Cj4gICAJZG91YmxlIHQ7Cj4gQEAgLTMx
MjgsNiArMzEyNyw4IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJndikKPiAgIAlmZCA9
IF9fZHJtX29wZW5fZHJpdmVyKERSSVZFUl9JTlRFTCk7Cj4gICAJaWd0X3JlcXVpcmUoZmQpOwo+
ICAgCj4gKwlpbnRlbF9yZWdpc3Rlcl9hY2Nlc3NfaW5pdCgmbW1pb19kYXRhLCBpbnRlbF9nZXRf
cGNpX2RldmljZSgpLCBmYWxzZSwgZmQpOwo+ICsKPiAgIAlpbml0X2Nsb2NrcygpOwo+ICAgCj4g
ICAJbWFzdGVyX3BybmcgPSB0aW1lKE5VTEwpOwo+IEBAIC0zMTM4LDcgKzMxMzksNyBAQCBpbnQg
bWFpbihpbnQgYXJnYywgY2hhciAqKmFyZ3YpCj4gICAJCWNhc2UgJ1cnOgo+ICAgCQkJaWYgKG1h
c3Rlcl93b3JrbG9hZCA+PSAwKSB7Cj4gICAJCQkJd3NpbV9lcnIoIk9ubHkgb25lIG1hc3RlciB3
b3JrbG9hZCBjYW4gYmUgZ2l2ZW4hXG4iKTsKPiAtCQkJCXJldHVybiAxOwo+ICsJCQkJZ290byBl
cnI7Cj4gICAJCQl9Cj4gICAJCQltYXN0ZXJfd29ya2xvYWQgPSBucl93X2FyZ3M7Cj4gICAJCQkv
KiBGYWxsIHRocm91Z2ggKi8KPiBAQCAtMzE1Miw3ICszMTUzLDcgQEAgaW50IG1haW4oaW50IGFy
Z2MsIGNoYXIgKiphcmd2KQo+ICAgCQljYXNlICdhJzoKPiAgIAkJCWlmIChhcHBlbmRfd29ya2xv
YWRfYXJnKSB7Cj4gICAJCQkJd3NpbV9lcnIoIk9ubHkgb25lIGFwcGVuZCB3b3JrbG9hZCBjYW4g
YmUgZ2l2ZW4hXG4iKTsKPiAtCQkJCXJldHVybiAxOwo+ICsJCQkJZ290byBlcnI7Cj4gICAJCQl9
Cj4gICAJCQlhcHBlbmRfd29ya2xvYWRfYXJnID0gb3B0YXJnOwo+ICAgCQkJYnJlYWs7Cj4gQEAg
LTMyMTcsNyArMzIxOCw3IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJndikKPiAgIAkJ
CWlmICghYmFsYW5jZXIpIHsKPiAgIAkJCQl3c2ltX2VycigiVW5rbm93biBiYWxhbmNpbmcgbW9k
ZSAnJXMnIVxuIiwKPiAgIAkJCQkJIG9wdGFyZyk7Cj4gLQkJCQlyZXR1cm4gMTsKPiArCQkJCWdv
dG8gZXJyOwo+ICAgCQkJfQo+ICAgCQkJYnJlYWs7Cj4gICAJCWNhc2UgJ0knOgo+IEBAIC0zMjI1
LDIwICszMjI2LDIwIEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJndikKPiAgIAkJCWJy
ZWFrOwo+ICAgCQljYXNlICdoJzoKPiAgIAkJCXByaW50X2hlbHAoKTsKPiAtCQkJcmV0dXJuIDA7
Cj4gKwkJCWdvdG8gb3V0Owo+ICAgCQlkZWZhdWx0Ogo+IC0JCQlyZXR1cm4gMTsKPiArCQkJZ290
byBlcnI7Cj4gICAJCX0KPiAgIAl9Cj4gICAKPiAgIAlpZiAoKGZsYWdzICYgSEVBUlRCRUFUKSAm
JiAhKGZsYWdzICYgU0VRTk8pKSB7Cj4gICAJCXdzaW1fZXJyKCJIZWFydGJlYXQgbmVlZHMgYSBz
ZXFubyBiYXNlZCBiYWxhbmNlciFcbiIpOwo+IC0JCXJldHVybiAxOwo+ICsJCWdvdG8gZXJyOwo+
ICAgCX0KPiAgIAo+ICAgCWlmICgoZmxhZ3MgJiBWQ1MyUkVNQVApICYmIChmbGFncyAmIEk5MTUp
KSB7Cj4gICAJCXdzaW1fZXJyKCJWQ1MgcmVtYXBwaW5nIG5vdCBzdXBwb3J0ZWQgd2l0aCBpOTE1
IGJhbGFuY2luZyFcbiIpOwo+IC0JCXJldHVybiAxOwo+ICsJCWdvdG8gZXJyOwo+ICAgCX0KPiAg
IAo+ICAgCWlmICghbm9wX2NhbGlicmF0aW9uKSB7Cj4gQEAgLTMyNTAsMjkgKzMyNTEsMjkgQEAg
aW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKiphcmd2KQo+ICAgCQkJcHJpbnRmKCJOb3AgY2FsaWJy
YXRpb24gZm9yICV1dXMgZGVsYXkgaXMgJWx1LlxuIiwKPiAgIAkJCSAgICAgICBub3BfY2FsaWJy
YXRpb25fdXMsIG5vcF9jYWxpYnJhdGlvbik7Cj4gICAKPiAtCQlyZXR1cm4gMDsKPiArCQlnb3Rv
IG91dDsKPiAgIAl9Cj4gICAKPiAgIAlpZiAoIW5yX3dfYXJncykgewo+ICAgCQl3c2ltX2Vycigi
Tm8gd29ya2xvYWQgZGVzY3JpcHRvcihzKSFcbiIpOwo+IC0JCXJldHVybiAxOwo+ICsJCWdvdG8g
ZXJyOwo+ICAgCX0KPiAgIAo+ICAgCWlmIChucl93X2FyZ3MgPiAxICYmIGNsaWVudHMgPiAxKSB7
Cj4gICAJCXdzaW1fZXJyKCJDbG9uZWQgY2xpZW50cyBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCBt
dWx0aXBsZSB3b3JrbG9hZHMhXG4iKTsKPiAtCQlyZXR1cm4gMTsKPiArCQlnb3RvIGVycjsKPiAg
IAl9Cj4gICAKPiAgIAlpZiAoKGZsYWdzICYgR0xPQkFMX0JBTEFOQ0UpICYmICFiYWxhbmNlcikg
ewo+ICAgCQl3c2ltX2VycigiQmFsYW5jZXIgbm90IHNwZWNpZmllZCBpbiBnbG9iYWwgYmFsYW5j
aW5nIG1vZGUhXG4iKTsKPiAtCQlyZXR1cm4gMTsKPiArCQlnb3RvIGVycjsKPiAgIAl9Cj4gICAK
PiAgIAlpZiAoYXBwZW5kX3dvcmtsb2FkX2FyZykgewo+ICAgCQlhcHBlbmRfd29ya2xvYWRfYXJn
ID0gbG9hZF93b3JrbG9hZF9kZXNjcmlwdG9yKGFwcGVuZF93b3JrbG9hZF9hcmcpOwo+ICAgCQlp
ZiAoIWFwcGVuZF93b3JrbG9hZF9hcmcpIHsKPiAgIAkJCXdzaW1fZXJyKCJGYWlsZWQgdG8gbG9h
ZCBhcHBlbmQgd29ya2xvYWQgZGVzY3JpcHRvciFcbiIpOwo+IC0JCQlyZXR1cm4gMTsKPiArCQkJ
Z290byBlcnI7Cj4gICAJCX0KPiAgIAl9Cj4gICAKPiBAQCAtMzI4MSw3ICszMjgyLDcgQEAgaW50
IG1haW4oaW50IGFyZ2MsIGNoYXIgKiphcmd2KQo+ICAgCQlhcHBfdyA9IHBhcnNlX3dvcmtsb2Fk
KCZhcmcsIGZsYWdzLCBOVUxMKTsKPiAgIAkJaWYgKCFhcHBfdykgewo+ICAgCQkJd3NpbV9lcnIo
IkZhaWxlZCB0byBwYXJzZSBhcHBlbmQgd29ya2xvYWQhXG4iKTsKPiAtCQkJcmV0dXJuIDE7Cj4g
KwkJCWdvdG8gZXJyOwo+ICAgCQl9Cj4gICAJfQo+ICAgCj4gQEAgLTMyOTMsMTMgKzMyOTQsMTMg
QEAgaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKiphcmd2KQo+ICAgCj4gICAJCWlmICghd19hcmdz
W2ldLmRlc2MpIHsKPiAgIAkJCXdzaW1fZXJyKCJGYWlsZWQgdG8gbG9hZCB3b3JrbG9hZCBkZXNj
cmlwdG9yICV1IVxuIiwgaSk7Cj4gLQkJCXJldHVybiAxOwo+ICsJCQlnb3RvIGVycjsKPiAgIAkJ
fQo+ICAgCj4gICAJCXdya1tpXSA9IHBhcnNlX3dvcmtsb2FkKCZ3X2FyZ3NbaV0sIGZsYWdzLCBh
cHBfdyk7Cj4gICAJCWlmICghd3JrW2ldKSB7Cj4gICAJCQl3c2ltX2VycigiRmFpbGVkIHRvIHBh
cnNlIHdvcmtsb2FkICV1IVxuIiwgaSk7Cj4gLQkJCXJldHVybiAxOwo+ICsJCQlnb3RvIGVycjsK
PiAgIAkJfQo+ICAgCX0KPiAgIAo+IEBAIC0zMzU5LDcgKzMzNjAsNyBAQCBpbnQgbWFpbihpbnQg
YXJnYywgY2hhciAqKmFyZ3YpCj4gICAKPiAgIAkJaWYgKHByZXBhcmVfd29ya2xvYWQoaSwgd1tp
XSwgZmxhZ3NfKSkgewo+ICAgCQkJd3NpbV9lcnIoIkZhaWxlZCB0byBwcmVwYXJlIHdvcmtsb2Fk
ICV1IVxuIiwgaSk7Cj4gLQkJCXJldHVybiAxOwo+ICsJCQlnb3RvIGVycjsKPiAgIAkJfQo+ICAg
Cj4gICAKPiBAQCAtMzM2OCwxMyArMzM2OSwxMSBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAq
KmFyZ3YpCj4gICAJCQlpZiAocmV0KSB7Cj4gICAJCQkJd3NpbV9lcnIoIkZhaWxlZCB0byBpbml0
aWFsaXplIGJhbGFuY2luZyEgKCV1PSVkKVxuIiwKPiAgIAkJCQkJIGksIHJldCk7Cj4gLQkJCQly
ZXR1cm4gMTsKPiArCQkJCWdvdG8gZXJyOwo+ICAgCQkJfQo+ICAgCQl9Cj4gICAJfQo+ICAgCj4g
LQlnZW1fcXVpZXNjZW50X2dwdShmZCk7Cj4gLQo+ICAgCWNsb2NrX2dldHRpbWUoQ0xPQ0tfTU9O
T1RPTklDLCAmdF9zdGFydCk7Cj4gICAKPiAgIAlmb3IgKGkgPSAwOyBpIDwgY2xpZW50czsgaSsr
KSB7Cj4gQEAgLTM0MTQsNSArMzQxMyw5IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJn
dikKPiAgIAkJZmluaV93b3JrbG9hZCh3cmtbaV0pOwo+ICAgCWZyZWUod19hcmdzKTsKPiAgIAo+
IC0JcmV0dXJuIDA7Cj4gK291dDoKPiArCWV4aXRjb2RlID0gRVhJVF9TVUNDRVNTOwo+ICtlcnI6
Cj4gKwlpbnRlbF9yZWdpc3Rlcl9hY2Nlc3NfZmluaSgmbW1pb19kYXRhKTsKPiArCXJldHVybiBl
eGl0Y29kZTsKPiAgIH0KPiAKClJldmlld2VkLWJ5OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVy
c3VsaW5AaW50ZWwuY29tPgoKUmVnYXJkcywKClR2cnRrbwpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9pbnRlbC1nZng=

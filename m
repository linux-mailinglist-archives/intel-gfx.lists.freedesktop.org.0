Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6F74D4B9C8
	for <lists+intel-gfx@lfdr.de>; Wed, 19 Jun 2019 15:25:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 069586E3E1;
	Wed, 19 Jun 2019 13:25:18 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 13D5D6E3DD
 for <Intel-gfx@lists.freedesktop.org>; Wed, 19 Jun 2019 13:25:16 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 19 Jun 2019 06:25:16 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,392,1557212400"; d="scan'208";a="153806419"
Received: from yyosef-mobl.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.23.42])
 by orsmga008.jf.intel.com with ESMTP; 19 Jun 2019 06:25:14 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Wed, 19 Jun 2019 14:24:33 +0100
Message-Id: <20190619132459.25351-8-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190619132459.25351-1-tvrtko.ursulin@linux.intel.com>
References: <20190619132459.25351-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 07/33] drm/i915: Convert i915_gem_init_swizzling
 to intel_gt
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KClN0YXJ0IHVz
aW5nIHRoZSBuZXdseSBpbnRyb2R1Y2VkIHN0cnVjdCBpbnRlbF9ndCB0byBmdXNlIHRvZ2V0aGVy
IGNvcnJlY3QKbG9naWNhbCBpbml0IGZsb3cgd2l0aCB1bmNvcmUgZm9yIG1vcmUgcmVtb3ZhbCBv
ZiBpbXBsaWNpdCBkZXZfcHJpdiBpbgptbWlvIGFjY2Vzcy4KCnYyOgogKiBNb3ZlIGNvZGUgdG8g
aTkxNV9nZW1fZmVuY2VfcmVnLiAoQ2hyaXMpCgpTaWduZWQtb2ZmLWJ5OiBUdnJ0a28gVXJzdWxp
biA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogUm9kcmlnbyBWaXZpIDxy
b2RyaWdvLnZpdmlAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmMgICAgICAgICAgIHwgIDQgKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oICAg
ICAgICAgICB8ICAxIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMgICAgICAgICAg
IHwgMjUgKy0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9mZW5j
ZV9yZWcuYyB8IDM3ICsrKysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dlbV9mZW5jZV9yZWcuaCB8ICAzICsrCiA1IGZpbGVzIGNoYW5nZWQsIDQzIGluc2Vy
dGlvbnMoKyksIDI3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCmluZGV4IGZl
NDY3ODFmYTcxNC4uYzVkYzZhNjcyZjdjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKQEAgLTI5
NDcsNyArMjk0Nyw3IEBAIHN0YXRpYyBpbnQgaW50ZWxfcnVudGltZV9zdXNwZW5kKHN0cnVjdCBk
ZXZpY2UgKmtkZXYpCiAKIAkJaW50ZWxfdWNfcmVzdW1lKGRldl9wcml2KTsKIAotCQlpOTE1X2dl
bV9pbml0X3N3aXp6bGluZyhkZXZfcHJpdik7CisJCWludGVsX2d0X2luaXRfc3dpenpsaW5nKCZk
ZXZfcHJpdi0+Z3QpOwogCQlpOTE1X2dlbV9yZXN0b3JlX2ZlbmNlcyhkZXZfcHJpdik7CiAKIAkJ
ZW5hYmxlX3JwbV93YWtlcmVmX2Fzc2VydHMocnBtKTsKQEAgLTMwNDksNyArMzA0OSw3IEBAIHN0
YXRpYyBpbnQgaW50ZWxfcnVudGltZV9yZXN1bWUoc3RydWN0IGRldmljZSAqa2RldikKIAkgKiBO
byBwb2ludCBvZiByb2xsaW5nIGJhY2sgdGhpbmdzIGluIGNhc2Ugb2YgYW4gZXJyb3IsIGFzIHRo
ZSBiZXN0CiAJICogd2UgY2FuIGRvIGlzIHRvIGhvcGUgdGhhdCB0aGluZ3Mgd2lsbCBzdGlsbCB3
b3JrIChhbmQgZGlzYWJsZSBSUE0pLgogCSAqLwotCWk5MTVfZ2VtX2luaXRfc3dpenpsaW5nKGRl
dl9wcml2KTsKKwlpbnRlbF9ndF9pbml0X3N3aXp6bGluZygmZGV2X3ByaXYtPmd0KTsKIAlpOTE1
X2dlbV9yZXN0b3JlX2ZlbmNlcyhkZXZfcHJpdik7CiAKIAkvKgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmgKaW5kZXggYmU0MzM4OTRlYTI4Li4xN2ZjNWE5OTI5NTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuaApAQCAtMjU0Miw3ICsyNTQyLDYgQEAgYm9vbCBpOTE1X2dlbV91bnNldF93ZWRnZWQoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIHZvaWQgaTkxNV9nZW1faW5pdF9tbWlv
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKIGludCBfX211c3RfY2hlY2sgaTkxNV9n
ZW1faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogaW50IF9fbXVzdF9j
aGVjayBpOTE1X2dlbV9pbml0X2h3KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7
Ci12b2lkIGk5MTVfZ2VtX2luaXRfc3dpenpsaW5nKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdik7CiB2b2lkIGk5MTVfZ2VtX2ZpbmlfaHcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KTsKIHZvaWQgaTkxNV9nZW1fZmluaShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpOwogaW50IGk5MTVfZ2VtX3dhaXRfZm9yX2lkbGUoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKaW5kZXggOWRlMWIxZTg4OTQ5
Li4zMGRhNjAzZWU3ZmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2Vt
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwpAQCAtMTIwMiwyOSArMTIw
Miw2IEBAIHZvaWQgaTkxNV9nZW1fc2FuaXRpemUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUpCiAJaW50ZWxfcnVudGltZV9wbV9wdXQoJmk5MTUtPnJ1bnRpbWVfcG0sIHdha2VyZWYpOwog
fQogCi12b2lkIGk5MTVfZ2VtX2luaXRfc3dpenpsaW5nKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdikKLXsKLQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA8IDUgfHwKLQkgICAgZGV2
X3ByaXYtPm1tLmJpdF82X3N3aXp6bGVfeCA9PSBJOTE1X0JJVF82X1NXSVpaTEVfTk9ORSkKLQkJ
cmV0dXJuOwotCi0JSTkxNV9XUklURShESVNQX0FSQl9DVEwsIEk5MTVfUkVBRChESVNQX0FSQl9D
VEwpIHwKLQkJCQkgRElTUF9USUxFX1NVUkZBQ0VfU1dJWlpMSU5HKTsKLQotCWlmIChJU19HRU4o
ZGV2X3ByaXYsIDUpKQotCQlyZXR1cm47Ci0KLQlJOTE1X1dSSVRFKFRJTEVDVEwsIEk5MTVfUkVB
RChUSUxFQ1RMKSB8IFRJTEVDVExfU1daQ1RMKTsKLQlpZiAoSVNfR0VOKGRldl9wcml2LCA2KSkK
LQkJSTkxNV9XUklURShBUkJfTU9ERSwgX01BU0tFRF9CSVRfRU5BQkxFKEFSQl9NT0RFX1NXSVpa
TEVfU05CKSk7Ci0JZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCA3KSkKLQkJSTkxNV9XUklURShB
UkJfTU9ERSwgX01BU0tFRF9CSVRfRU5BQkxFKEFSQl9NT0RFX1NXSVpaTEVfSVZCKSk7Ci0JZWxz
ZSBpZiAoSVNfR0VOKGRldl9wcml2LCA4KSkKLQkJSTkxNV9XUklURShHQU1UQVJCTU9ERSwgX01B
U0tFRF9CSVRfRU5BQkxFKEFSQl9NT0RFX1NXSVpaTEVfQkRXKSk7Ci0JZWxzZQotCQlCVUcoKTsK
LX0KLQogc3RhdGljIHZvaWQgaW5pdF91bnVzZWRfcmluZyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsIHUzMiBiYXNlKQogewogCUk5MTVfV1JJVEUoUklOR19DVEwoYmFzZSksIDAp
OwpAQCAtMTI3MSw3ICsxMjQ4LDcgQEAgaW50IGk5MTVfZ2VtX2luaXRfaHcoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2KQogCS8qIC4uLmFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGV5
IGFyZSBzdGlja2luZy4gKi8KIAlpbnRlbF9ndF92ZXJpZnlfd29ya2Fyb3VuZHMoZGV2X3ByaXYs
ICJpbml0Iik7CiAKLQlpOTE1X2dlbV9pbml0X3N3aXp6bGluZyhkZXZfcHJpdik7CisJaW50ZWxf
Z3RfaW5pdF9zd2l6emxpbmcoJmRldl9wcml2LT5ndCk7CiAKIAkvKgogCSAqIEF0IGxlYXN0IDgz
MCBjYW4gbGVhdmUgc29tZSBvZiB0aGUgdW51c2VkIHJpbmdzCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9mZW5jZV9yZWcuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZ2VtX2ZlbmNlX3JlZy5jCmluZGV4IDBiZjUzYWMxYzgzNS4uZGQwOTc5MGM0MjBkIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9mZW5jZV9yZWcuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9mZW5jZV9yZWcuYwpAQCAtODM0LDMgKzgz
NCw0MCBAQCB2b2lkIGk5MTVfZ2d0dF9pbml0X2ZlbmNlcyhzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0
KQogCiAJaTkxNV9nZW1fcmVzdG9yZV9mZW5jZXMoaTkxNSk7CiB9CisKK3ZvaWQgaW50ZWxfZ3Rf
aW5pdF9zd2l6emxpbmcoc3RydWN0IGludGVsX2d0ICpndCkKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSA9IGd0LT5pOTE1OworCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSA9
IGd0LT51bmNvcmU7CisKKwlpZiAoSU5URUxfR0VOKGk5MTUpIDwgNSB8fAorCSAgICBpOTE1LT5t
bS5iaXRfNl9zd2l6emxlX3ggPT0gSTkxNV9CSVRfNl9TV0laWkxFX05PTkUpCisJCXJldHVybjsK
KworCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCisJCQkgICBESVNQX0FSQl9DVEwsCisJCQkg
ICBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIERJU1BfQVJCX0NUTCkgfAorCQkJICAgRElTUF9U
SUxFX1NVUkZBQ0VfU1dJWlpMSU5HKTsKKworCWlmIChJU19HRU4oaTkxNSwgNSkpCisJCXJldHVy
bjsKKworCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCisJCQkgICBUSUxFQ1RMLAorCQkJICAg
aW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBUSUxFQ1RMKSB8IFRJTEVDVExfU1daQ1RMKTsKKwor
CWlmIChJU19HRU4oaTkxNSwgNikpCisJCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCisJCQkJ
ICAgQVJCX01PREUsCisJCQkJICAgX01BU0tFRF9CSVRfRU5BQkxFKEFSQl9NT0RFX1NXSVpaTEVf
U05CKSk7CisJZWxzZSBpZiAoSVNfR0VOKGk5MTUsIDcpKQorCQlpbnRlbF91bmNvcmVfd3JpdGUo
dW5jb3JlLAorCQkJCSAgIEFSQl9NT0RFLAorCQkJCSAgIF9NQVNLRURfQklUX0VOQUJMRShBUkJf
TU9ERV9TV0laWkxFX0lWQikpOworCWVsc2UgaWYgKElTX0dFTihpOTE1LCA4KSkKKwkJaW50ZWxf
dW5jb3JlX3dyaXRlKHVuY29yZSwKKwkJCQkgICBHQU1UQVJCTU9ERSwKKwkJCQkgICBfTUFTS0VE
X0JJVF9FTkFCTEUoQVJCX01PREVfU1dJWlpMRV9CRFcpKTsKKwllbHNlCisJCU1JU1NJTkdfQ0FT
RShJTlRFTF9HRU4oaTkxNSkpOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW1fZmVuY2VfcmVnLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9mZW5j
ZV9yZWcuaAppbmRleCBkMmRhOTg4MjgxNzkuLjM3ZTRmMTA0ZjdjMCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2VfcmVnLmgKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2VfcmVnLmgKQEAgLTMyLDYgKzMyLDcgQEAgc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3Q7CiBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZTsKIHN0cnVjdCBpOTE1
X2dndHQ7CiBzdHJ1Y3QgaTkxNV92bWE7CitzdHJ1Y3QgaW50ZWxfZ3Q7CiBzdHJ1Y3Qgc2dfdGFi
bGU7CiAKICNkZWZpbmUgSTk2NV9GRU5DRV9QQUdFIDQwOTZVTApAQCAtNjYsNCArNjcsNiBAQCB2
b2lkIGk5MTVfZ2VtX29iamVjdF9zYXZlX2JpdF8xN19zd2l6emxlKHN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmosCiAKIHZvaWQgaTkxNV9nZ3R0X2luaXRfZmVuY2VzKHN0cnVjdCBpOTE1
X2dndHQgKmdndHQpOwogCit2b2lkIGludGVsX2d0X2luaXRfc3dpenpsaW5nKHN0cnVjdCBpbnRl
bF9ndCAqZ3QpOworCiAjZW5kaWYKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vaW50ZWwtZ2Z4

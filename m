Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3521711BC18
	for <lists+intel-gfx@lfdr.de>; Wed, 11 Dec 2019 19:45:36 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D896B6EBB8;
	Wed, 11 Dec 2019 18:45:31 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3CA156EBB4
 for <intel-gfx@lists.freedesktop.org>; Wed, 11 Dec 2019 18:45:30 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 11 Dec 2019 10:45:29 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,302,1571727600"; d="scan'208";a="216016742"
Received: from josouza-mobl.jf.intel.com (HELO josouza-MOBL.intel.com)
 ([10.24.8.163])
 by orsmga003.jf.intel.com with ESMTP; 11 Dec 2019 10:45:28 -0800
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 11 Dec 2019 10:45:22 -0800
Message-Id: <20191211184526.142413-7-jose.souza@intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20191211184526.142413-1-jose.souza@intel.com>
References: <20191211184526.142413-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 rebased 07/11] drm/i915/tgl: Select master
 transcoder for MST stream
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVEdMIHRoZSBibGVuZGluZyBvZiBhbGwgdGhlIHN0cmVhbXMgaGF2ZSBtb3ZlZCBmcm9tIERE
SSB0bwp0cmFuc2NvZGVyLCBzbyBub3cgZXZlcnkgdHJhbnNjb2RlciB3b3JraW5nIG92ZXIgdGhl
IHNhbWUgTVNUIHBvcnQgbXVzdApzZW5kIGl0cyBzdHJlYW0gdG8gYSBtYXN0ZXIgdHJhbnNjb2Rl
ciBhbmQgbWFzdGVyIHdpbGwgc2VuZCB0byBEREkKcmVzcGVjdGluZyB0aGUgdGltZSBzbG90cy4K
ClNvIGhlcmUgYWRkaW5nIGFsbCB0aGUgQ1JUQ3MgdGhhdCBzaGFyZXMgdGhlIHNhbWUgTVNUIHN0
cmVhbSBpZgpuZWVkZWQgYW5kIGNvbXB1dGluZyB0aGVpciBzdGF0ZSBhZ2FpbiwgaXQgd2lsbCBw
aWNrIHRoZSBsb3dlc3QKcGlwZS90cmFuc2NvZGVyIGFtb25nIHRoZSBvbmVzIGluIHRoZSBzYW1l
IHN0cmVhbSB0byBiZSBtYXN0ZXIuCgpNb3N0IG9mIHRoZSB0aW1lIHNrbF9jb21taXRfbW9kZXNl
dF9lbmFibGVzKCkgZW5hYmxlcyBwaXBlcyBpbiBhCmNyZXNjZW50IG9yZGVyIGJ1dCBkdWUgRERC
IG92ZXJsYXBwaW5nIGl0IG1pZ2h0IG5vdCBoYXBwZW4sIHRoaXMKc2NlbmFyaW9zIHdpbGwgYmUg
aGFuZGxlZCBpbiB0aGUgbmV4dCBwYXRjaC4KCnYyOgotIFVzaW5nIHJlY2VudGx5IGFkZGVkIGlu
dGVsX2NydGNfc3RhdGVfcmVzZXQoKSB0byBzZXQKbXN0X21hc3Rlcl90cmFuc2NvZGVyIHRvIGlu
dmFsaWQgdHJhbnNjb2RlciBmb3IgYWxsIG5vbiBnZW4xMiAmIE1TVApjb2RlIHBhdGhzCi0gU2V0
dGluZyBsb3dlc3QgcGlwZS90cmFuc2NvZGVyIGFzIG1hc3RlciwgcHJldmlvdXNseSBpdCB3YXMg
dGhlCmZpcnN0IG9uZSBidXQgc2V0dGluZyBhIHByZWRpY3RhYmxlIG9uZSB3aWxsIGhlbHAgaW4g
ZnV0dXJlIE1TVCBlCnBvcnQgc3luYyBpbnRlZ3JhdGlvbgotIE1vdmluZyB0byBpbnRlbCB0eXBl
IGFzIG11Y2ggYXMgd2UgY2FuCgpCU3BlYzogNTA0OTMKQlNwZWM6IDQ5MTkwCkNjOiBWaWxsZSBT
eXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgpDYzogTHVjYXMgRGUgTWFy
Y2hpIDxsdWNhcy5kZW1hcmNoaUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEpvc8OpIFJvYmVy
dG8gZGUgU291emEgPGpvc2Uuc291emFAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmMgICB8ICAxNCArKwogZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9hdG9taWMuaCAgIHwgICAzICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGRpLmMgICAgICB8ICAxNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgIHwgIDEzICstCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kaXNwbGF5X3R5cGVzLmggICAgfCAgIDMgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kcF9tc3QuYyAgIHwgMTM5ICsrKysrKysrKysrKysrKystLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcF9tc3QuaCAgIHwgICA1ICsKIDcgZmlsZXMgY2hh
bmdlZCwgMTc4IGluc2VydGlvbnMoKyksIDEzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pYy5jCmluZGV4IDZlOTNhMzlhNmZlYy4uNjlhMDQz
MGM0NjM4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0
b21pYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmMK
QEAgLTIwNiw2ICsyMDYsMjAgQEAgaW50ZWxfZGlnaXRhbF9jb25uZWN0b3JfbmVlZHNfbW9kZXNl
dChzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKIAkgICAgICAgKG5ld19jcnRjICYm
IGRybV9hdG9taWNfY3J0Y19uZWVkc19tb2Rlc2V0KCZuZXdfY3J0Y19zdGF0ZS0+dWFwaSkpOwog
fQogCitzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9jb25uZWN0b3Jfc3RhdGUgKgoraW50ZWxfYXRvbWlj
X2dldF9kaWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpz
dGF0ZSwKKwkJCQkJIHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKK3sKKwlzdHJ1
Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubmVjdG9yX3N0YXRlOworCisJY29ubmVjdG9yX3N0
YXRlID0gZHJtX2F0b21pY19nZXRfY29ubmVjdG9yX3N0YXRlKCZzdGF0ZS0+YmFzZSwKKwkJCQkJ
CQkgJmNvbm5lY3Rvci0+YmFzZSk7CisJaWYgKElTX0VSUihjb25uZWN0b3Jfc3RhdGUpKQorCQly
ZXR1cm4gRVJSX0NBU1QoY29ubmVjdG9yX3N0YXRlKTsKKworCXJldHVybiB0b19pbnRlbF9kaWdp
dGFsX2Nvbm5lY3Rvcl9zdGF0ZShjb25uZWN0b3Jfc3RhdGUpOworfQorCiAvKioKICAqIGludGVs
X2NydGNfZHVwbGljYXRlX3N0YXRlIC0gZHVwbGljYXRlIGNydGMgc3RhdGUKICAqIEBjcnRjOiBk
cm0gY3J0YwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9h
dG9taWMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmgKaW5k
ZXggYmE5Y2MyOWE1ODY1Li42ZTg2MzhkODNkMjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9hdG9taWMuaApAQCAtMzUsNiArMzUsOSBAQCBzdHJ1Y3QgZHJtX2Nvbm5l
Y3Rvcl9zdGF0ZSAqCiBpbnRlbF9kaWdpdGFsX2Nvbm5lY3Rvcl9kdXBsaWNhdGVfc3RhdGUoc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3Rvcik7CiBib29sIGludGVsX2RpZ2l0YWxfY29ubmVj
dG9yX25lZWRzX21vZGVzZXQoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsCiAJCQkJ
CSAgIHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3Rvcik7CitzdHJ1Y3QgaW50ZWxfZGln
aXRhbF9jb25uZWN0b3Jfc3RhdGUgKgoraW50ZWxfYXRvbWljX2dldF9kaWdpdGFsX2Nvbm5lY3Rv
cl9zdGF0ZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKKwkJCQkJIHN0cnVjdCBp
bnRlbF9jb25uZWN0b3IgKmNvbm5lY3Rvcik7CiAKIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqaW50
ZWxfY3J0Y19kdXBsaWNhdGVfc3RhdGUoc3RydWN0IGRybV9jcnRjICpjcnRjKTsKIHZvaWQgaW50
ZWxfY3J0Y19kZXN0cm95X3N0YXRlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCmluZGV4IDViNmYzMjUxN2M3NS4uNmVlNTIzMDA0
NWViIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKQEAgLTE5MDMs
OCArMTkwMywxMyBAQCBpbnRlbF9kZGlfdHJhbnNjb2Rlcl9mdW5jX3JlZ192YWxfZ2V0KGNvbnN0
IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogCQl0ZW1wIHw9IFRSQU5TX0RE
SV9NT0RFX1NFTEVDVF9EUF9NU1Q7CiAJCXRlbXAgfD0gRERJX1BPUlRfV0lEVEgoY3J0Y19zdGF0
ZS0+bGFuZV9jb3VudCk7CiAKLQkJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIpCi0JCQl0
ZW1wIHw9IFRSQU5TX0RESV9NU1RfVFJBTlNQT1JUX1NFTEVDVChjcnRjX3N0YXRlLT5jcHVfdHJh
bnNjb2Rlcik7CisJCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDEyKSB7CisJCQllbnVtIHRy
YW5zY29kZXIgbWFzdGVyOworCisJCQltYXN0ZXIgPSBjcnRjX3N0YXRlLT5tc3RfbWFzdGVyX3Ry
YW5zY29kZXI7CisJCQlXQVJOX09OKG1hc3RlciA9PSBJTlZBTElEX1RSQU5TQ09ERVIpOworCQkJ
dGVtcCB8PSBUUkFOU19ERElfTVNUX1RSQU5TUE9SVF9TRUxFQ1QobWFzdGVyKTsKKwkJfQogCX0g
ZWxzZSB7CiAJCXRlbXAgfD0gVFJBTlNfRERJX01PREVfU0VMRUNUX0RQX1NTVDsKIAkJdGVtcCB8
PSBERElfUE9SVF9XSURUSChjcnRjX3N0YXRlLT5sYW5lX2NvdW50KTsKQEAgLTQzNzcsNiArNDM4
MiwxMSBAQCB2b2lkIGludGVsX2RkaV9nZXRfY29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyLAogCQlwaXBlX2NvbmZpZy0+b3V0cHV0X3R5cGVzIHw9IEJJVChJTlRFTF9PVVRQVVRf
RFBfTVNUKTsKIAkJcGlwZV9jb25maWctPmxhbmVfY291bnQgPQogCQkJKCh0ZW1wICYgRERJX1BP
UlRfV0lEVEhfTUFTSykgPj4gRERJX1BPUlRfV0lEVEhfU0hJRlQpICsgMTsKKworCQlpZiAoSU5U
RUxfR0VOKGRldl9wcml2KSA+PSAxMikKKwkJCXBpcGVfY29uZmlnLT5tc3RfbWFzdGVyX3RyYW5z
Y29kZXIgPQorCQkJCQlSRUdfRklFTERfR0VUKFRSQU5TX0RESV9NU1RfVFJBTlNQT1JUX1NFTEVD
VF9NQVNLLCB0ZW1wKTsKKwogCQlpbnRlbF9kcF9nZXRfbV9uKGludGVsX2NydGMsIHBpcGVfY29u
ZmlnKTsKIAkJYnJlYWs7CiAJZGVmYXVsdDoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggMzliMDBhMTlkNzUyLi4xY2VjY2UyZjU0ZjggMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC00Niw2ICs0
Niw3IEBACiAjaW5jbHVkZSAiZGlzcGxheS9pbnRlbF9jcnQuaCIKICNpbmNsdWRlICJkaXNwbGF5
L2ludGVsX2RkaS5oIgogI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxfZHAuaCIKKyNpbmNsdWRlICJk
aXNwbGF5L2ludGVsX2RwX21zdC5oIgogI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxfZHNpLmgiCiAj
aW5jbHVkZSAiZGlzcGxheS9pbnRlbF9kdm8uaCIKICNpbmNsdWRlICJkaXNwbGF5L2ludGVsX2dt
YnVzLmgiCkBAIC0xMTY2Myw2ICsxMTY2NCw3IEBAIHN0YXRpYyB2b2lkIGludGVsX2NydGNfc3Rh
dGVfcmVzZXQoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJY3J0Y19zdGF0
ZS0+aHN3X3dvcmthcm91bmRfcGlwZSA9IElOVkFMSURfUElQRTsKIAljcnRjX3N0YXRlLT5vdXRw
dXRfZm9ybWF0ID0gSU5URUxfT1VUUFVUX0ZPUk1BVF9JTlZBTElEOwogCWNydGNfc3RhdGUtPnNj
YWxlcl9zdGF0ZS5zY2FsZXJfaWQgPSAtMTsKKwljcnRjX3N0YXRlLT5tc3RfbWFzdGVyX3RyYW5z
Y29kZXIgPSBJTlZBTElEX1RSQU5TQ09ERVI7CiB9CiAKIC8qIFJldHVybnMgdGhlIGN1cnJlbnRs
eSBwcm9ncmFtbWVkIG1vZGUgb2YgdGhlIGdpdmVuIGVuY29kZXIuICovCkBAIC0xMjUxMCw2ICsx
MjUxMiw5IEBAIHN0YXRpYyB2b2lkIGludGVsX2R1bXBfcGlwZV9jb25maWcoY29uc3Qgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCQkJICAgICAgcGlwZV9jb25maWctPmNz
Y19tb2RlLCBwaXBlX2NvbmZpZy0+Z2FtbWFfbW9kZSwKIAkJCSAgICAgIHBpcGVfY29uZmlnLT5n
YW1tYV9lbmFibGUsIHBpcGVfY29uZmlnLT5jc2NfZW5hYmxlKTsKIAorCURSTV9ERUJVR19LTVMo
Ik1TVCBtYXN0ZXIgdHJhbnNjb2RlcjogJXNcbiIsCisJCSAgICAgIHRyYW5zY29kZXJfbmFtZShw
aXBlX2NvbmZpZy0+bXN0X21hc3Rlcl90cmFuc2NvZGVyKSk7CisKIGR1bXBfcGxhbmVzOgogCWlm
ICghc3RhdGUpCiAJCXJldHVybjsKQEAgLTEyNjUxLDYgKzEyNjU2LDcgQEAgaW50ZWxfY3J0Y19w
cmVwYXJlX2NsZWFyZWRfc3RhdGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUp
CiAJbWVtY3B5KHNhdmVkX3N0YXRlLT5pY2xfcG9ydF9kcGxscywgY3J0Y19zdGF0ZS0+aWNsX3Bv
cnRfZHBsbHMsCiAJICAgICAgIHNpemVvZihzYXZlZF9zdGF0ZS0+aWNsX3BvcnRfZHBsbHMpKTsK
IAlzYXZlZF9zdGF0ZS0+Y3JjX2VuYWJsZWQgPSBjcnRjX3N0YXRlLT5jcmNfZW5hYmxlZDsKKwlz
YXZlZF9zdGF0ZS0+bXN0X21hc3Rlcl90cmFuc2NvZGVyID0gSU5WQUxJRF9UUkFOU0NPREVSOwog
CWlmIChJU19HNFgoZGV2X3ByaXYpIHx8CiAJICAgIElTX1ZBTExFWVZJRVcoZGV2X3ByaXYpIHx8
IElTX0NIRVJSWVZJRVcoZGV2X3ByaXYpKQogCQlzYXZlZF9zdGF0ZS0+d20gPSBjcnRjX3N0YXRl
LT53bTsKQEAgLTEzMjkwLDYgKzEzMjk2LDggQEAgaW50ZWxfcGlwZV9jb25maWdfY29tcGFyZShj
b25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3VycmVudF9jb25maWcsCiAJUElQRV9DT05G
X0NIRUNLX0koZHNjLmRzY19zcGxpdCk7CiAJUElQRV9DT05GX0NIRUNLX0koZHNjLmNvbXByZXNz
ZWRfYnBwKTsKIAorCVBJUEVfQ09ORl9DSEVDS19JKG1zdF9tYXN0ZXJfdHJhbnNjb2Rlcik7CisK
ICN1bmRlZiBQSVBFX0NPTkZfQ0hFQ0tfWAogI3VuZGVmIFBJUEVfQ09ORl9DSEVDS19JCiAjdW5k
ZWYgUElQRV9DT05GX0NIRUNLX0JPT0wKQEAgLTE0Mzc0LDcgKzE0MzgyLDcgQEAgc3RhdGljIHZv
aWQgaW50ZWxfY29tbWl0X21vZGVzZXRfZGlzYWJsZXMoc3RydWN0IGludGVsX2F0b21pY19zdGF0
ZSAqc3RhdGUpCiAJdTMyIGhhbmRsZWQgPSAwOwogCWludCBpOwogCi0JLyogT25seSBkaXNhYmxl
IHBvcnQgc3luYyBzbGF2ZXMgKi8KKwkvKiBPbmx5IGRpc2FibGUgcG9ydCBzeW5jIGFuZCBNU1Qg
c2xhdmVzICovCiAJZm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNy
dGMsIG9sZF9jcnRjX3N0YXRlLAogCQkJCQkgICAgbmV3X2NydGNfc3RhdGUsIGkpIHsKIAkJaWYg
KCFuZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSkKQEAgLTE0Mzg4LDcgKzE0Mzk2LDggQEAg
c3RhdGljIHZvaWQgaW50ZWxfY29tbWl0X21vZGVzZXRfZGlzYWJsZXMoc3RydWN0IGludGVsX2F0
b21pY19zdGF0ZSAqc3RhdGUpCiAJCSAqIHNsYXZlIENSVENzIGFyZSBkaXNhYmxlZCBmaXJzdCBh
bmQgdGhlbiBtYXN0ZXIgQ1JUQyBzaW5jZQogCQkgKiBTbGF2ZSB2YmxhbmtzIGFyZSBtYXNrZWQg
dGlsbCBNYXN0ZXIgVmJsYW5rcy4KIAkJICovCi0JCWlmICghaXNfdHJhbnNfcG9ydF9zeW5jX3Ns
YXZlKG9sZF9jcnRjX3N0YXRlKSkKKwkJaWYgKCFpc190cmFuc19wb3J0X3N5bmNfc2xhdmUob2xk
X2NydGNfc3RhdGUpICYmCisJCSAgICAhaW50ZWxfZHBfbXN0X2lzX3NsYXZlX3RyYW5zKG9sZF9j
cnRjX3N0YXRlKSkKIAkJCWNvbnRpbnVlOwogCiAJCWludGVsX3ByZV9wbGFuZV91cGRhdGUoc3Rh
dGUsIGNydGMpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXlfdHlwZXMuaAppbmRleCA4M2VhMDQxNDliNzcuLjYzMGE5NDg5MmI3YiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgKQEAg
LTEwNTQsNiArMTA1NCw5IEBAIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlIHsKIAogCS8qIEJpdG1h
c2sgdG8gaW5kaWNhdGUgc2xhdmVzIGF0dGFjaGVkICovCiAJdTggc3luY19tb2RlX3NsYXZlc19t
YXNrOworCisJLyogT25seSB2YWxpZCBvbiBUR0wrICovCisJZW51bSB0cmFuc2NvZGVyIG1zdF9t
YXN0ZXJfdHJhbnNjb2RlcjsKIH07CiAKIHN0cnVjdCBpbnRlbF9jcnRjIHsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5jCmluZGV4IDkyNmU0OWY0NDlhNi4uMTJm
NWU3OTlkOTFmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2RwX21zdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0
LmMKQEAgLTg3LDYgKzg3LDQ5IEBAIHN0YXRpYyBpbnQgaW50ZWxfZHBfbXN0X2NvbXB1dGVfbGlu
a19jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJcmV0dXJuIDA7CiB9CiAK
Ky8qCisgKiBJdGVyYXRlIG92ZXIgYWxsIGNvbm5lY3RvcnMgYW5kIHNldCBtc3RfbWFzdGVyX3Ry
YW5zY29kZXIgdG8gdGhlIHNtYWxsZXN0CisgKiB0cmFuc2NvZGVyIGlkIHRoYXQgc2hhcmVzIHRo
ZSBzYW1lIE1TVCBjb25uZWN0b3IuCisgKi8KK3N0YXRpYyBpbnQKK2ludGVsX2RwX21zdF9tYXN0
ZXJfdHJhbnNfY29tcHV0ZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKKwkJCQkgIHN0
cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAorCQkJCSAgc3RydWN0IGRybV9jb25u
ZWN0b3Jfc3RhdGUgKmNvbm5lY3Rvcl9zdGF0ZSkKK3sKKwlzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0
YXRlICpzdGF0ZSA9IHRvX2ludGVsX2F0b21pY19zdGF0ZShjcnRjX3N0YXRlLT51YXBpLnN0YXRl
KTsKKwlzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IgPSB0b19pbnRlbF9jb25uZWN0
b3IoY29ubmVjdG9yX3N0YXRlLT5jb25uZWN0b3IpOworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOworCXN0cnVjdCBpbnRlbF9k
aWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZSAqaXRlcl9jb25uZWN0b3Jfc3RhdGU7CisJc3RydWN0IGlu
dGVsX2Nvbm5lY3RvciAqaXRlcl9jb25uZWN0b3I7CisJaW50IGk7CisKKwlpZiAoSU5URUxfR0VO
KGRldl9wcml2KSA8IDEyKQorCQlyZXR1cm4gMDsKKworCWNydGNfc3RhdGUtPm1zdF9tYXN0ZXJf
dHJhbnNjb2RlciA9IEk5MTVfTUFYX1RSQU5TQ09ERVJTOworCisJZm9yX2VhY2hfbmV3X2ludGVs
X2Nvbm5lY3Rvcl9pbl9zdGF0ZShzdGF0ZSwgaXRlcl9jb25uZWN0b3IsCisJCQkJCSAgICAgIGl0
ZXJfY29ubmVjdG9yX3N0YXRlLCBpKSB7CisJCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICppdGVy
X2NydGNfc3RhdGU7CisJCXN0cnVjdCBpbnRlbF9jcnRjICppdGVyX2NydGM7CisKKwkJaWYgKGNv
bm5lY3Rvci0+bXN0X3BvcnQgIT0gaXRlcl9jb25uZWN0b3ItPm1zdF9wb3J0IHx8CisJCSAgICAh
aXRlcl9jb25uZWN0b3Jfc3RhdGUtPmJhc2UuY3J0YykKKwkJCWNvbnRpbnVlOworCisJCWl0ZXJf
Y3J0YyA9IHRvX2ludGVsX2NydGMoaXRlcl9jb25uZWN0b3Jfc3RhdGUtPmJhc2UuY3J0Yyk7CisJ
CWl0ZXJfY3J0Y19zdGF0ZSA9IGludGVsX2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUoc3RhdGUs
CisJCQkJCQkJCSAgaXRlcl9jcnRjKTsKKwkJaWYgKCFpdGVyX2NydGNfc3RhdGUtPnVhcGkuYWN0
aXZlKQorCQkJY29udGludWU7CisKKwkJaWYgKGl0ZXJfY3J0Y19zdGF0ZS0+Y3B1X3RyYW5zY29k
ZXIgPCBjcnRjX3N0YXRlLT5tc3RfbWFzdGVyX3RyYW5zY29kZXIpCisJCQljcnRjX3N0YXRlLT5t
c3RfbWFzdGVyX3RyYW5zY29kZXIgPSBpdGVyX2NydGNfc3RhdGUtPmNwdV90cmFuc2NvZGVyOwor
CX0KKworCXJldHVybiAwOworfQorCiBzdGF0aWMgaW50IGludGVsX2RwX21zdF9jb21wdXRlX2Nv
bmZpZyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJCQkgICAgICAgc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCQkJCSAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5l
Y3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZSkKQEAgLTE1NCwyNCArMTk3LDg4IEBAIHN0YXRpYyBpbnQg
aW50ZWxfZHBfbXN0X2NvbXB1dGVfY29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVy
LAogCiAJaW50ZWxfZGRpX2NvbXB1dGVfbWluX3ZvbHRhZ2VfbGV2ZWwoZGV2X3ByaXYsIHBpcGVf
Y29uZmlnKTsKIAorCXJldCA9IGludGVsX2RwX21zdF9tYXN0ZXJfdHJhbnNfY29tcHV0ZShlbmNv
ZGVyLCBwaXBlX2NvbmZpZywKKwkJCQkJCWNvbm5fc3RhdGUpOworCWlmIChyZXQpCisJCXJldHVy
biByZXQ7CisKKwlyZXR1cm4gMDsKK30KKworLyoKKyAqIElmIG9uZSBvZiB0aGUgY29ubmVjdG9y
cyBpbiBhIE1TVCBzdHJlYW0gbmVlZHMgYSBtb2Rlc2V0LCBtYXJrIGFsbCBDUlRDcworICogdGhh
dCBoYXZlIGEgY29ubmVjdG9yIGluIHRoZSBzYW1lIE1TVCBzdHJlYW0gYXMgbW9kZSBjaGFuZ2Vk
LAorICogaW50ZWxfbW9kZXNldF9waXBlX2NvbmZpZygpK2ludGVsX2NydGNfY2hlY2tfZmFzdHNl
dCgpIHdpbGwgdGFrZSB0byBkbyBhCisgKiBmYXN0c2V0IHdoZW4gcG9zc2libGUuCisgKi8KK3N0
YXRpYyBpbnQKK2ludGVsX2RwX21zdF9hdG9taWNfbWFzdGVyX3RyYW5zX2NoZWNrKHN0cnVjdCBp
bnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvciwKKwkJCQkgICAgICAgc3RydWN0IGludGVsX2F0b21p
Y19zdGF0ZSAqc3RhdGUpCit7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0g
dG9faTkxNShzdGF0ZS0+YmFzZS5kZXYpOworCXN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRl
ciBjb25uZWN0b3JfbGlzdF9pdGVyOworCXN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3Rv
cl9pdGVyOworCisJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPCAxMikKKwkJcmV0dXJuICAwOwor
CisJaWYgKCFpbnRlbF9kaWdpdGFsX2Nvbm5lY3Rvcl9uZWVkc19tb2Rlc2V0KHN0YXRlLCBjb25u
ZWN0b3IpKQorCQlyZXR1cm4gMDsKKworCWRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKCZk
ZXZfcHJpdi0+ZHJtLCAmY29ubmVjdG9yX2xpc3RfaXRlcik7CisJZm9yX2VhY2hfaW50ZWxfY29u
bmVjdG9yX2l0ZXIoY29ubmVjdG9yX2l0ZXIsICZjb25uZWN0b3JfbGlzdF9pdGVyKSB7CisJCXN0
cnVjdCBpbnRlbF9kaWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubmVjdG9yX2l0ZXJfc3RhdGU7
CisJCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlOworCQlzdHJ1Y3QgaW50ZWxf
Y3J0YyAqY3J0YzsKKworCQlpZiAoY29ubmVjdG9yX2l0ZXItPm1zdF9wb3J0ICE9IGNvbm5lY3Rv
ci0+bXN0X3BvcnQpCisJCQljb250aW51ZTsKKworCQljb25uZWN0b3JfaXRlcl9zdGF0ZSA9CisJ
CQlpbnRlbF9hdG9taWNfZ2V0X2RpZ2l0YWxfY29ubmVjdG9yX3N0YXRlKHN0YXRlLAorCQkJCQkJ
CQkgY29ubmVjdG9yX2l0ZXIpOworCQlpZiAoSVNfRVJSKGNvbm5lY3Rvcl9pdGVyX3N0YXRlKSkg
eworCQkJZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZjb25uZWN0b3JfbGlzdF9pdGVyKTsK
KwkJCXJldHVybiBQVFJfRVJSKGNvbm5lY3Rvcl9pdGVyX3N0YXRlKTsKKwkJfQorCisJCWlmICgh
Y29ubmVjdG9yX2l0ZXJfc3RhdGUtPmJhc2UuY3J0YykKKwkJCWNvbnRpbnVlOworCisJCWNydGMg
PSB0b19pbnRlbF9jcnRjKGNvbm5lY3Rvcl9pdGVyX3N0YXRlLT5iYXNlLmNydGMpOworCQljcnRj
X3N0YXRlID0gaW50ZWxfYXRvbWljX2dldF9jcnRjX3N0YXRlKCZzdGF0ZS0+YmFzZSwgY3J0Yyk7
CisJCWlmIChJU19FUlIoY3J0Y19zdGF0ZSkpIHsKKwkJCWRybV9jb25uZWN0b3JfbGlzdF9pdGVy
X2VuZCgmY29ubmVjdG9yX2xpc3RfaXRlcik7CisJCQlyZXR1cm4gUFRSX0VSUihjcnRjX3N0YXRl
KTsKKwkJfQorCisJCWNydGNfc3RhdGUtPnVhcGkubW9kZV9jaGFuZ2VkID0gdHJ1ZTsKKwl9CisJ
ZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZjb25uZWN0b3JfbGlzdF9pdGVyKTsKKwogCXJl
dHVybiAwOwogfQogCiBzdGF0aWMgaW50CiBpbnRlbF9kcF9tc3RfYXRvbWljX2NoZWNrKHN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCi0JCQkgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRl
ICpzdGF0ZSkKKwkJCSAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKl9zdGF0ZSkKIHsKKwlzdHJ1
Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSA9IHRvX2ludGVsX2F0b21pY19zdGF0ZShfc3Rh
dGUpOwogCXN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpuZXdfY29ubl9zdGF0ZSA9Ci0JCWRy
bV9hdG9taWNfZ2V0X25ld19jb25uZWN0b3Jfc3RhdGUoc3RhdGUsIGNvbm5lY3Rvcik7CisJCWRy
bV9hdG9taWNfZ2V0X25ld19jb25uZWN0b3Jfc3RhdGUoJnN0YXRlLT5iYXNlLCBjb25uZWN0b3Ip
OwogCXN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpvbGRfY29ubl9zdGF0ZSA9Ci0JCWRybV9h
dG9taWNfZ2V0X29sZF9jb25uZWN0b3Jfc3RhdGUoc3RhdGUsIGNvbm5lY3Rvcik7CisJCWRybV9h
dG9taWNfZ2V0X29sZF9jb25uZWN0b3Jfc3RhdGUoJnN0YXRlLT5iYXNlLCBjb25uZWN0b3IpOwog
CXN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmludGVsX2Nvbm5lY3RvciA9CiAJCXRvX2ludGVsX2Nv
bm5lY3Rvcihjb25uZWN0b3IpOwogCXN0cnVjdCBkcm1fY3J0YyAqbmV3X2NydGMgPSBuZXdfY29u
bl9zdGF0ZS0+Y3J0YzsKIAlzdHJ1Y3QgZHJtX2RwX21zdF90b3BvbG9neV9tZ3IgKm1ncjsKIAlp
bnQgcmV0OwogCi0JcmV0ID0gaW50ZWxfZGlnaXRhbF9jb25uZWN0b3JfYXRvbWljX2NoZWNrKGNv
bm5lY3Rvciwgc3RhdGUpOworCXJldCA9IGludGVsX2RpZ2l0YWxfY29ubmVjdG9yX2F0b21pY19j
aGVjayhjb25uZWN0b3IsICZzdGF0ZS0+YmFzZSk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsK
KworCXJldCA9IGludGVsX2RwX21zdF9hdG9taWNfbWFzdGVyX3RyYW5zX2NoZWNrKGludGVsX2Nv
bm5lY3Rvciwgc3RhdGUpOwogCWlmIChyZXQpCiAJCXJldHVybiByZXQ7CiAKQEAgLTE4MiwxMiAr
Mjg5LDkgQEAgaW50ZWxfZHBfbXN0X2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAq
Y29ubmVjdG9yLAogCSAqIGNvbm5lY3RvcgogCSAqLwogCWlmIChuZXdfY3J0YykgewotCQlzdHJ1
Y3QgaW50ZWxfYXRvbWljX3N0YXRlICppbnRlbF9zdGF0ZSA9Ci0JCQl0b19pbnRlbF9hdG9taWNf
c3RhdGUoc3RhdGUpOwogCQlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0YyA9IHRvX2ludGVs
X2NydGMobmV3X2NydGMpOwogCQlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSA9
Ci0JCQlpbnRlbF9hdG9taWNfZ2V0X25ld19jcnRjX3N0YXRlKGludGVsX3N0YXRlLAotCQkJCQkJ
CWludGVsX2NydGMpOworCQkJaW50ZWxfYXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShzdGF0ZSwg
aW50ZWxfY3J0Yyk7CiAKIAkJaWYgKCFjcnRjX3N0YXRlIHx8CiAJCSAgICAhZHJtX2F0b21pY19j
cnRjX25lZWRzX21vZGVzZXQoJmNydGNfc3RhdGUtPnVhcGkpIHx8CkBAIC0xOTYsNyArMzAwLDcg
QEAgaW50ZWxfZHBfbXN0X2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVj
dG9yLAogCX0KIAogCW1nciA9ICZlbmNfdG9fbXN0KG9sZF9jb25uX3N0YXRlLT5iZXN0X2VuY29k
ZXIpLT5wcmltYXJ5LT5kcC5tc3RfbWdyOwotCXJldCA9IGRybV9kcF9hdG9taWNfcmVsZWFzZV92
Y3BpX3Nsb3RzKHN0YXRlLCBtZ3IsCisJcmV0ID0gZHJtX2RwX2F0b21pY19yZWxlYXNlX3ZjcGlf
c2xvdHMoJnN0YXRlLT5iYXNlLCBtZ3IsCiAJCQkJCSAgICAgICBpbnRlbF9jb25uZWN0b3ItPnBv
cnQpOwogCiAJcmV0dXJuIHJldDsKQEAgLTI0MSw2ICszNDUsOSBAQCBzdGF0aWMgdm9pZCBpbnRl
bF9tc3RfcG9zdF9kaXNhYmxlX2RwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCWlu
dGVsX2RwLT5hY3RpdmVfbXN0X2xpbmtzLS07CiAJbGFzdF9tc3Rfc3RyZWFtID0gaW50ZWxfZHAt
PmFjdGl2ZV9tc3RfbGlua3MgPT0gMDsKIAorCVdBUk5fT04oSU5URUxfR0VOKGRldl9wcml2KSA+
PSAxMiAmJiBsYXN0X21zdF9zdHJlYW0gJiYKKwkJIWludGVsX2RwX21zdF9pc19tYXN0ZXJfdHJh
bnMob2xkX2NydGNfc3RhdGUpKTsKKwogCS8qCiAJICogRnJvbSBUR0wgc3BlYzogIklmIG11bHRp
LXN0cmVhbSBzbGF2ZSB0cmFuc2NvZGVyOiBDb25maWd1cmUKIAkgKiBUcmFuc2NvZGVyIENsb2Nr
IFNlbGVjdCB0byBkaXJlY3Qgbm8gY2xvY2sgdG8gdGhlIHRyYW5zY29kZXIiCkBAIC0zMjEsNiAr
NDI4LDkgQEAgc3RhdGljIHZvaWQgaW50ZWxfbXN0X3ByZV9lbmFibGVfZHAoc3RydWN0IGludGVs
X2VuY29kZXIgKmVuY29kZXIsCiAJaW50ZWxfbXN0LT5jb25uZWN0b3IgPSBjb25uZWN0b3I7CiAJ
Zmlyc3RfbXN0X3N0cmVhbSA9IGludGVsX2RwLT5hY3RpdmVfbXN0X2xpbmtzID09IDA7CiAKKwlX
QVJOX09OKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIgJiYgZmlyc3RfbXN0X3N0cmVhbSAmJgor
CQkhaW50ZWxfZHBfbXN0X2lzX21hc3Rlcl90cmFucyhwaXBlX2NvbmZpZykpOworCiAJRFJNX0RF
QlVHX0tNUygiYWN0aXZlIGxpbmtzICVkXG4iLCBpbnRlbF9kcC0+YWN0aXZlX21zdF9saW5rcyk7
CiAKIAlpZiAoZmlyc3RfbXN0X3N0cmVhbSkKQEAgLTcyNiwzICs4MzYsMTQgQEAgaW50ZWxfZHBf
bXN0X2VuY29kZXJfY2xlYW51cChzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICppbnRlbF9kaWdf
cG9ydCkKIAlkcm1fZHBfbXN0X3RvcG9sb2d5X21ncl9kZXN0cm95KCZpbnRlbF9kcC0+bXN0X21n
cik7CiAJLyogZW5jb2RlcnMgd2lsbCBnZXQga2lsbGVkIGJ5IG5vcm1hbCBjbGVhbnVwICovCiB9
CisKK2Jvb2wgaW50ZWxfZHBfbXN0X2lzX21hc3Rlcl90cmFucyhjb25zdCBzdHJ1Y3QgaW50ZWxf
Y3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKK3sKKwlyZXR1cm4gY3J0Y19zdGF0ZS0+bXN0X21hc3Rl
cl90cmFuc2NvZGVyID09IGNydGNfc3RhdGUtPmNwdV90cmFuc2NvZGVyOworfQorCitib29sIGlu
dGVsX2RwX21zdF9pc19zbGF2ZV90cmFucyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
Y3J0Y19zdGF0ZSkKK3sKKwlyZXR1cm4gY3J0Y19zdGF0ZS0+bXN0X21hc3Rlcl90cmFuc2NvZGVy
ICE9IElOVkFMSURfVFJBTlNDT0RFUiAmJgorCSAgICAgICBjcnRjX3N0YXRlLT5tc3RfbWFzdGVy
X3RyYW5zY29kZXIgIT0gY3J0Y19zdGF0ZS0+Y3B1X3RyYW5zY29kZXI7Cit9CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcF9tc3QuaAppbmRleCBmNjYwYWQ4MGRiMDQuLmU0
MDc2N2Y3ODM0MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kcF9tc3QuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21z
dC5oCkBAIC02LDEwICs2LDE1IEBACiAjaWZuZGVmIF9fSU5URUxfRFBfTVNUX0hfXwogI2RlZmlu
ZSBfX0lOVEVMX0RQX01TVF9IX18KIAorI2luY2x1ZGUgPHN0ZGJvb2wuaD4KKwogc3RydWN0IGlu
dGVsX2RpZ2l0YWxfcG9ydDsKK3N0cnVjdCBpbnRlbF9jcnRjX3N0YXRlOwogCiBpbnQgaW50ZWxf
ZHBfbXN0X2VuY29kZXJfaW5pdChzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICppbnRlbF9kaWdf
cG9ydCwgaW50IGNvbm5faWQpOwogdm9pZCBpbnRlbF9kcF9tc3RfZW5jb2Rlcl9jbGVhbnVwKHN0
cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0KTsKIGludCBpbnRlbF9kcF9t
c3RfZW5jb2Rlcl9hY3RpdmVfbGlua3Moc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxf
ZGlnX3BvcnQpOworYm9vbCBpbnRlbF9kcF9tc3RfaXNfbWFzdGVyX3RyYW5zKGNvbnN0IHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKTsKK2Jvb2wgaW50ZWxfZHBfbXN0X2lzX3Ns
YXZlX3RyYW5zKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKTsKIAog
I2VuZGlmIC8qIF9fSU5URUxfRFBfTVNUX0hfXyAqLwotLSAKMi4yNC4xCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0
CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

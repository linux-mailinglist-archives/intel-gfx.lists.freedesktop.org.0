Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2D7269F0B6
	for <lists+intel-gfx@lfdr.de>; Tue, 27 Aug 2019 18:50:30 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A88198905E;
	Tue, 27 Aug 2019 16:50:28 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C8F9F8905E
 for <intel-gfx@lists.freedesktop.org>; Tue, 27 Aug 2019 16:50:26 +0000 (UTC)
X-Amp-Result: UNSCANNABLE
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 27 Aug 2019 09:50:26 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,437,1559545200"; d="scan'208";a="185348703"
Received: from ldmartin-desk1.jf.intel.com (HELO ldmartin-desk1)
 ([10.24.10.106])
 by orsmga006.jf.intel.com with ESMTP; 27 Aug 2019 09:50:26 -0700
Date: Tue, 27 Aug 2019 09:50:24 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: Imre Deak <imre.deak@intel.com>
Message-ID: <20190827165024.lwevu6e6sohr6lnh@ldmartin-desk1>
References: <20190823082055.5992-1-lucas.demarchi@intel.com>
 <20190823082055.5992-4-lucas.demarchi@intel.com>
 <20190826172833.GC27192@ideak-desk.fi.intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190826172833.GC27192@ideak-desk.fi.intel.com>
User-Agent: NeoMutt/20180716
Subject: Re: [Intel-gfx] [PATCH v3 03/23] drm/i915/psr: Only handle
 interruptions of the transcoder in use
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org,
 Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gTW9uLCBBdWcgMjYsIDIwMTkgYXQgMDg6Mjg6MzNQTSArMDMwMCwgSW1yZSBEZWFrIHdyb3Rl
Ogo+T24gRnJpLCBBdWcgMjMsIDIwMTkgYXQgMDE6MjA6MzVBTSAtMDcwMCwgTHVjYXMgRGUgTWFy
Y2hpIHdyb3RlOgo+PiBGcm9tOiBKb3PDqSBSb2JlcnRvIGRlIFNvdXphIDxqb3NlLnNvdXphQGlu
dGVsLmNvbT4KPj4KPj4gSXQgd2FzIGVuYWJsaW5nIGFuZCBjaGVja2luZyBQU1IgaW50ZXJydXB0
aW9ucyBpbiBldmVyeSB0cmFuc2NvZGVyCj4+IHdoaWxlIGl0IHNob3VsZCBrZWVwIHRoZSBpbnRl
cnJ1cHRpb25zIG9uIHRoZSBub24tdXNlZCB0cmFuc2NvZGVycwo+PiBtYXNrZWQuCj4+Cj4+IFRo
aXMgYWxzbyBhbHJlYWR5IHByZXBhcmVzIGZvciBmdXR1cmUgd2hlbiBtb3JlIHRoYW4gb25lIFBT
UiBpbnN0YW5jZQo+PiB3aWxsIGJlIGFsbG93ZWQuCj4+Cj4+IENjOiBEaGluYWthcmFuIFBhbmRp
eWFuIDxkaGluYWthcmFuLnBhbmRpeWFuQGludGVsLmNvbT4KPj4gU2lnbmVkLW9mZi1ieTogSm9z
w6kgUm9iZXJ0byBkZSBTb3V6YSA8am9zZS5zb3V6YUBpbnRlbC5jb20+Cj4+IFNpZ25lZC1vZmYt
Ynk6IEx1Y2FzIERlIE1hcmNoaSA8bHVjYXMuZGVtYXJjaGlAaW50ZWwuY29tPgo+PiAtLS0KPj4g
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHNyLmMgfCAxNDAgKysrKysrKysr
LS0tLS0tLS0tLS0tLS0KPj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggICAgICAg
ICAgfCAgMTMgKy0tCj4+ICAyIGZpbGVzIGNoYW5nZWQsIDU5IGluc2VydGlvbnMoKyksIDk0IGRl
bGV0aW9ucygtKQo+Pgo+PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9wc3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHNyLmMK
Pj4gaW5kZXggMjhiNjJlNTg3MjA0Li44MWUzNjE5Y2Q5MDUgMTAwNjQ0Cj4+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHNyLmMKPj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wc3IuYwo+PiBAQCAtODgsNDggKzg4LDIzIEBAIHN0YXRp
YyBib29sIGludGVsX3BzcjJfZW5hYmxlZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsCj4+ICAJfQo+PiAgfQo+Pgo+PiAtc3RhdGljIGludCBlZHBfcHNyX3NoaWZ0KGVudW0gdHJh
bnNjb2RlciBjcHVfdHJhbnNjb2RlcikKPj4gK3N0YXRpYyB2b2lkIHBzcl9pcnFfY29udHJvbChz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCj4+ICB7Cj4+IC0Jc3dpdGNoIChjcHVf
dHJhbnNjb2Rlcikgewo+PiAtCWNhc2UgVFJBTlNDT0RFUl9BOgo+PiAtCQlyZXR1cm4gRURQX1BT
Ul9UUkFOU0NPREVSX0FfU0hJRlQ7Cj4+IC0JY2FzZSBUUkFOU0NPREVSX0I6Cj4+IC0JCXJldHVy
biBFRFBfUFNSX1RSQU5TQ09ERVJfQl9TSElGVDsKPj4gLQljYXNlIFRSQU5TQ09ERVJfQzoKPj4g
LQkJcmV0dXJuIEVEUF9QU1JfVFJBTlNDT0RFUl9DX1NISUZUOwo+PiAtCWRlZmF1bHQ6Cj4+IC0J
CU1JU1NJTkdfQ0FTRShjcHVfdHJhbnNjb2Rlcik7Cj4+IC0JCS8qIGZhbGx0aHJvdWdoICovCj4+
IC0JY2FzZSBUUkFOU0NPREVSX0VEUDoKPj4gLQkJcmV0dXJuIEVEUF9QU1JfVFJBTlNDT0RFUl9F
RFBfU0hJRlQ7Cj4+IC0JfQo+PiAtfQo+PiArCWVudW0gdHJhbnNjb2RlciB0cmFucyA9IGRldl9w
cml2LT5wc3IudHJhbnNjb2RlcjsKPgo+VGhpcyBpcyBjYWxsZWQgZnJvbSBpbnRlbF9wc3JfZGVi
dWdfc2V0KCkgd2hlcmUgcHNyLnRyYW5zY29kZXIgbWF5IGJlCj51bmluaXRlZC4KPgo+PiArCXUz
MiB2YWwsIG1hc2s7Cj4+Cj4+IC1zdGF0aWMgdm9pZCBwc3JfaXJxX2NvbnRyb2woc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCB1MzIgZGVidWcpCj4+IC17Cj4+IC0JdTMyIGRlYnVn
X21hc2ssIG1hc2s7Cj4+IC0JZW51bSB0cmFuc2NvZGVyIGNwdV90cmFuc2NvZGVyOwo+PiAtCXUz
MiB0cmFuc2NvZGVycyA9IEJJVChUUkFOU0NPREVSX0VEUCk7Cj4+IC0KPj4gLQlpZiAoSU5URUxf
R0VOKGRldl9wcml2KSA+PSA4KQo+PiAtCQl0cmFuc2NvZGVycyB8PSBCSVQoVFJBTlNDT0RFUl9B
KSB8Cj4+IC0JCQkgICAgICAgQklUKFRSQU5TQ09ERVJfQikgfAo+PiAtCQkJICAgICAgIEJJVChU
UkFOU0NPREVSX0MpOwo+PiAtCj4+IC0JZGVidWdfbWFzayA9IDA7Cj4+IC0JbWFzayA9IDA7Cj4+
IC0JZm9yX2VhY2hfY3B1X3RyYW5zY29kZXJfbWFza2VkKGRldl9wcml2LCBjcHVfdHJhbnNjb2Rl
ciwgdHJhbnNjb2RlcnMpIHsKPj4gLQkJaW50IHNoaWZ0ID0gZWRwX3Bzcl9zaGlmdChjcHVfdHJh
bnNjb2Rlcik7Cj4+IC0KPj4gLQkJbWFzayB8PSBFRFBfUFNSX0VSUk9SKHNoaWZ0KTsKPj4gLQkJ
ZGVidWdfbWFzayB8PSBFRFBfUFNSX1BPU1RfRVhJVChzaGlmdCkgfAo+PiAtCQkJICAgICAgRURQ
X1BTUl9QUkVfRU5UUlkoc2hpZnQpOwo+PiAtCX0KPj4gKwltYXNrID0gRURQX1BTUl9FUlJPUih0
cmFucyk7Cj4+ICsJaWYgKGRldl9wcml2LT5wc3IuZGVidWcgJiBJOTE1X1BTUl9ERUJVR19JUlEp
Cj4+ICsJCW1hc2sgfD0gRURQX1BTUl9QT1NUX0VYSVQodHJhbnMpIHwgRURQX1BTUl9QUkVfRU5U
UlkodHJhbnMpOwo+Pgo+PiAtCWlmIChkZWJ1ZyAmIEk5MTVfUFNSX0RFQlVHX0lSUSkKPj4gLQkJ
bWFzayB8PSBkZWJ1Z19tYXNrOwo+PiAtCj4+IC0JSTkxNV9XUklURShFRFBfUFNSX0lNUiwgfm1h
c2spOwo+PiArCS8qCj4+ICsJICogVE9ETzogd2hlbiBoYW5kbGluZyBtdWx0aXBsZSBQU1IgaW5z
dGFuY2VzIGEgZ2xvYmFsIHNwaW5sb2NrIHdpbGwgYmUKPj4gKwkgKiBuZWVkZWQgdG8gc3luY2hy
b25pemUgdGhlIHZhbHVlIG9mIHNoYXJlZCByZWdpc3Rlcgo+PiArCSAqLwo+PiArCXZhbCA9IEk5
MTVfUkVBRChFRFBfUFNSX0lNUik7Cj4+ICsJdmFsICY9IH5FRFBfUFNSX1RSQU5TX01BU0sodHJh
bnMpOwo+PiArCXZhbCB8PSB+bWFzazsKPj4gKwlJOTE1X1dSSVRFKEVEUF9QU1JfSU1SLCB2YWwp
Owo+PiAgfQo+Pgo+PiAgc3RhdGljIHZvaWQgcHNyX2V2ZW50X3ByaW50KHUzMiB2YWwsIGJvb2wg
cHNyMl9lbmFibGVkKQo+PiBAQCAtMTcxLDYzICsxNDYsNTQgQEAgc3RhdGljIHZvaWQgcHNyX2V2
ZW50X3ByaW50KHUzMiB2YWwsIGJvb2wgcHNyMl9lbmFibGVkKQo+Pgo+PiAgdm9pZCBpbnRlbF9w
c3JfaXJxX2hhbmRsZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCB1MzIgcHNy
X2lpcikKPj4gIHsKPj4gLQl1MzIgdHJhbnNjb2RlcnMgPSBCSVQoVFJBTlNDT0RFUl9FRFApOwo+
PiAtCWVudW0gdHJhbnNjb2RlciBjcHVfdHJhbnNjb2RlcjsKPj4gKwllbnVtIHRyYW5zY29kZXIg
Y3B1X3RyYW5zY29kZXIgPSBkZXZfcHJpdi0+cHNyLnRyYW5zY29kZXI7Cj4+ICAJa3RpbWVfdCB0
aW1lX25zID0gIGt0aW1lX2dldCgpOwo+PiAtCXUzMiBtYXNrID0gMDsKPj4KPj4gLQlpZiAoSU5U
RUxfR0VOKGRldl9wcml2KSA+PSA4KQo+PiAtCQl0cmFuc2NvZGVycyB8PSBCSVQoVFJBTlNDT0RF
Ul9BKSB8Cj4+IC0JCQkgICAgICAgQklUKFRSQU5TQ09ERVJfQikgfAo+PiAtCQkJICAgICAgIEJJ
VChUUkFOU0NPREVSX0MpOwo+PiArCWlmIChwc3JfaWlyICYgRURQX1BTUl9FUlJPUihjcHVfdHJh
bnNjb2RlcikpIHsKPj4gKwkJdTMyIHZhbDsKPj4KPj4gLQlmb3JfZWFjaF9jcHVfdHJhbnNjb2Rl
cl9tYXNrZWQoZGV2X3ByaXYsIGNwdV90cmFuc2NvZGVyLCB0cmFuc2NvZGVycykgewo+Cj5JIHRo
aW5rIHdlIHNob3VsZCBzdGlsbCBjYXRjaCBhbGwgaW50ZXJydXB0cywgbG9nIHRoZSB1bmV4cGVj
dGVkIG9uZXMKPmFuZCByZWFjdCBvbmx5IG9uIHRoZSBleHBlY3RlZCBvbmUgaW4gaW50ZWxfcHNy
X3dvcmsoKS4KCmNvdWxkIHlvdSBleHBhbmQgbW9yZSBvbiB0aGlzPyB0aGVyZSBpcyBvbmx5IG9u
ZSBQU1IgaW5zdGFuY2UgaGVuY2Ugb25seQpvbmUgcG9zc2libGUgdHJhbnNjb2RlciBjb21pbmcg
ZnJvbSBkZXZfcHJpdi0+cHNyLnRyYW5zY29kZXIuIExvb3BpbmcgaGVyZSBqdXN0IHRvCndhcm4g
c2VlbXMgd2FzdGVmdWwuCgo+Cj4+IC0JCWludCBzaGlmdCA9IGVkcF9wc3Jfc2hpZnQoY3B1X3Ry
YW5zY29kZXIpOwo+PiArCQlEUk1fV0FSTigiW3RyYW5zY29kZXIgJXNdIFBTUiBhdXggZXJyb3Jc
biIsCj4+ICsJCQkgdHJhbnNjb2Rlcl9uYW1lKGNwdV90cmFuc2NvZGVyKSk7Cj4+Cj4+IC0JCWlm
IChwc3JfaWlyICYgRURQX1BTUl9FUlJPUihzaGlmdCkpIHsKPj4gLQkJCURSTV9XQVJOKCJbdHJh
bnNjb2RlciAlc10gUFNSIGF1eCBlcnJvclxuIiwKPj4gLQkJCQkgdHJhbnNjb2Rlcl9uYW1lKGNw
dV90cmFuc2NvZGVyKSk7Cj4+ICsJCWRldl9wcml2LT5wc3IuaXJxX2F1eF9lcnJvciA9IHRydWU7
Cj4+Cj4+IC0JCQlkZXZfcHJpdi0+cHNyLmlycV9hdXhfZXJyb3IgPSB0cnVlOwo+PiArCQkvKgo+
PiArCQkgKiBJZiB0aGlzIGludGVycnVwdGlvbiBpcyBub3QgbWFza2VkIGl0IHdpbGwga2VlcAo+
PiArCQkgKiBpbnRlcnJ1cHRpbmcgc28gZmFzdCB0aGF0IGl0IHByZXZlbnRzIHRoZSBzY2hlZHVs
ZWQKPj4gKwkJICogd29yayB0byBydW4uCj4+ICsJCSAqIEFsc28gYWZ0ZXIgYSBQU1IgZXJyb3Is
IHdlIGRvbid0IHdhbnQgdG8gYXJtIFBTUgo+PiArCQkgKiBhZ2FpbiBzbyB3ZSBkb24ndCBjYXJl
IGFib3V0IHVubWFzayB0aGUgaW50ZXJydXB0aW9uCj4+ICsJCSAqIG9yIHVuc2V0IGlycV9hdXhf
ZXJyb3IuCj4+ICsJCSAqCj4+ICsJCSAqIFRPRE86IHdoZW4gaGFuZGxpbmcgbXVsdGlwbGUgUFNS
IGluc3RhbmNlcyBhIGdsb2JhbCBzcGlubG9jawo+PiArCQkgKiB3aWxsIGJlIG5lZWRlZCB0byBz
eW5jaHJvbml6ZSB0aGUgdmFsdWUgb2Ygc2hhcmVkIHJlZ2lzdGVyCgpJJ20gbm90IHJlYWxseSBh
IGZhbiBvZiB0aGVzZSBUT0RPIGZvciBtdWx0aXBsZSBQU1IgaW5zdGFuY2VzLiBXaGVuL2lmCndl
IGFkZCB0aGVtLCB3ZSB3b24ndCByZWFsbHkgYmUgYWJsZSB0byByZWx5IG9uIHRoZXNlIFRPRE8g
Y29tbWVudHMgYW5kCndpbGwgcmF0aGVyIG5lZWQgdG8gZXZhbHVhdGUgdGhlIHdob2xlIHNjZW5h
cmlvLgoKPj4gKwkJICovCj4+ICsJCXZhbCA9IEk5MTVfUkVBRChFRFBfUFNSX0lNUik7Cj4+ICsJ
CXZhbCB8PSBFRFBfUFNSX0VSUk9SKGNwdV90cmFuc2NvZGVyKTsKPj4gKwkJSTkxNV9XUklURShF
RFBfUFNSX0lNUiwgdmFsKTsKPj4KPj4gLQkJCS8qCj4+IC0JCQkgKiBJZiB0aGlzIGludGVycnVw
dGlvbiBpcyBub3QgbWFza2VkIGl0IHdpbGwga2VlcAo+PiAtCQkJICogaW50ZXJydXB0aW5nIHNv
IGZhc3QgdGhhdCBpdCBwcmV2ZW50cyB0aGUgc2NoZWR1bGVkCj4+IC0JCQkgKiB3b3JrIHRvIHJ1
bi4KPj4gLQkJCSAqIEFsc28gYWZ0ZXIgYSBQU1IgZXJyb3IsIHdlIGRvbid0IHdhbnQgdG8gYXJt
IFBTUgo+PiAtCQkJICogYWdhaW4gc28gd2UgZG9uJ3QgY2FyZSBhYm91dCB1bm1hc2sgdGhlIGlu
dGVycnVwdGlvbgo+PiAtCQkJICogb3IgdW5zZXQgaXJxX2F1eF9lcnJvci4KPj4gLQkJCSAqLwo+
PiAtCQkJbWFzayB8PSBFRFBfUFNSX0VSUk9SKHNoaWZ0KTsKPj4gLQkJfQo+PiArCQlzY2hlZHVs
ZV93b3JrKCZkZXZfcHJpdi0+cHNyLndvcmspOwo+Cj5Xb3VsZCBiZSBiZXR0ZXIgbm90IHRvIHJl
b3JkZXIgaW50ZWxfcHNyX3dvcmsoKSBhbmQgcHJpbnRpbmcgdGhlIGV2ZW50cwo+YmVsb3cuCj4K
Pj4gKwl9Cj4+Cj4+IC0JCWlmIChwc3JfaWlyICYgRURQX1BTUl9QUkVfRU5UUlkoc2hpZnQpKSB7
Cj4+IC0JCQlkZXZfcHJpdi0+cHNyLmxhc3RfZW50cnlfYXR0ZW1wdCA9IHRpbWVfbnM7Cj4+IC0J
CQlEUk1fREVCVUdfS01TKCJbdHJhbnNjb2RlciAlc10gUFNSIGVudHJ5IGF0dGVtcHQgaW4gMiB2
YmxhbmtzXG4iLAo+PiAtCQkJCSAgICAgIHRyYW5zY29kZXJfbmFtZShjcHVfdHJhbnNjb2Rlcikp
Owo+PiAtCQl9Cj4+ICsJaWYgKHBzcl9paXIgJiBFRFBfUFNSX1BSRV9FTlRSWShjcHVfdHJhbnNj
b2RlcikpIHsKPj4gKwkJZGV2X3ByaXYtPnBzci5sYXN0X2VudHJ5X2F0dGVtcHQgPSB0aW1lX25z
Owo+PiArCQlEUk1fREVCVUdfS01TKCJbdHJhbnNjb2RlciAlc10gUFNSIGVudHJ5IGF0dGVtcHQg
aW4gMiB2YmxhbmtzXG4iLAo+PiArCQkJICAgICAgdHJhbnNjb2Rlcl9uYW1lKGNwdV90cmFuc2Nv
ZGVyKSk7Cj4+ICsJfQo+Pgo+PiAtCQlpZiAocHNyX2lpciAmIEVEUF9QU1JfUE9TVF9FWElUKHNo
aWZ0KSkgewo+PiAtCQkJZGV2X3ByaXYtPnBzci5sYXN0X2V4aXQgPSB0aW1lX25zOwo+PiAtCQkJ
RFJNX0RFQlVHX0tNUygiW3RyYW5zY29kZXIgJXNdIFBTUiBleGl0IGNvbXBsZXRlZFxuIiwKPj4g
LQkJCQkgICAgICB0cmFuc2NvZGVyX25hbWUoY3B1X3RyYW5zY29kZXIpKTsKPj4gKwlpZiAocHNy
X2lpciAmIEVEUF9QU1JfUE9TVF9FWElUKGNwdV90cmFuc2NvZGVyKSkgewo+PiArCQlkZXZfcHJp
di0+cHNyLmxhc3RfZXhpdCA9IHRpbWVfbnM7Cj4+ICsJCURSTV9ERUJVR19LTVMoIlt0cmFuc2Nv
ZGVyICVzXSBQU1IgZXhpdCBjb21wbGV0ZWRcbiIsCj4+ICsJCQkgICAgICB0cmFuc2NvZGVyX25h
bWUoY3B1X3RyYW5zY29kZXIpKTsKPj4KPj4gLQkJCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49
IDkpIHsKPj4gLQkJCQl1MzIgdmFsID0gSTkxNV9SRUFEKFBTUl9FVkVOVChjcHVfdHJhbnNjb2Rl
cikpOwo+PiAtCQkJCWJvb2wgcHNyMl9lbmFibGVkID0gZGV2X3ByaXYtPnBzci5wc3IyX2VuYWJs
ZWQ7Cj4+ICsJCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDkpIHsKPj4gKwkJCXUzMiB2YWwg
PSBJOTE1X1JFQUQoUFNSX0VWRU5UKGNwdV90cmFuc2NvZGVyKSk7Cj4+ICsJCQlib29sIHBzcjJf
ZW5hYmxlZCA9IGRldl9wcml2LT5wc3IucHNyMl9lbmFibGVkOwo+Pgo+PiAtCQkJCUk5MTVfV1JJ
VEUoUFNSX0VWRU5UKGNwdV90cmFuc2NvZGVyKSwgdmFsKTsKPj4gLQkJCQlwc3JfZXZlbnRfcHJp
bnQodmFsLCBwc3IyX2VuYWJsZWQpOwo+PiAtCQkJfQo+PiArCQkJSTkxNV9XUklURShQU1JfRVZF
TlQoY3B1X3RyYW5zY29kZXIpLCB2YWwpOwo+PiArCQkJcHNyX2V2ZW50X3ByaW50KHZhbCwgcHNy
Ml9lbmFibGVkKTsKPj4gIAkJfQo+PiAgCX0KPj4gLQo+PiAtCWlmIChtYXNrKSB7Cj4+IC0JCW1h
c2sgfD0gSTkxNV9SRUFEKEVEUF9QU1JfSU1SKTsKPj4gLQkJSTkxNV9XUklURShFRFBfUFNSX0lN
UiwgbWFzayk7Cj4+IC0KPj4gLQkJc2NoZWR1bGVfd29yaygmZGV2X3ByaXYtPnBzci53b3JrKTsK
Pj4gLQl9Cj4+ICB9Cj4+Cj4+ICBzdGF0aWMgYm9vbCBpbnRlbF9kcF9nZXRfYWxwbV9zdGF0dXMo
c3RydWN0IGludGVsX2RwICppbnRlbF9kcCkKPj4gQEAgLTczNyw3ICs3MDMsNyBAQCBzdGF0aWMg
dm9pZCBpbnRlbF9wc3JfZW5hYmxlX3NvdXJjZShzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAo+
Pgo+PiAgCUk5MTVfV1JJVEUoRURQX1BTUl9ERUJVRyhkZXZfcHJpdi0+cHNyLnRyYW5zY29kZXIp
LCBtYXNrKTsKPj4KPj4gLQlwc3JfaXJxX2NvbnRyb2woZGV2X3ByaXYsIGRldl9wcml2LT5wc3Iu
ZGVidWcpOwo+PiArCXBzcl9pcnFfY29udHJvbChkZXZfcHJpdik7Cj4+ICB9Cj4+Cj4+ICBzdGF0
aWMgdm9pZCBpbnRlbF9wc3JfZW5hYmxlX2xvY2tlZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYsCj4+IEBAIC03NjIsNyArNzI4LDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfcHNyX2Vu
YWJsZV9sb2NrZWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAo+PiAgCSAqIHRv
IGF2b2lkIGFueSByZW5kZXJpbmcgcHJvYmxlbXMuCj4+ICAJICovCj4+ICAJdmFsID0gSTkxNV9S
RUFEKEVEUF9QU1JfSUlSKTsKPj4gLQl2YWwgJj0gRURQX1BTUl9FUlJPUihlZHBfcHNyX3NoaWZ0
KGRldl9wcml2LT5wc3IudHJhbnNjb2RlcikpOwo+PiArCXZhbCAmPSBFRFBfUFNSX0VSUk9SKGRl
dl9wcml2LT5wc3IudHJhbnNjb2Rlcik7Cj4+ICAJaWYgKHZhbCkgewo+PiAgCQlkZXZfcHJpdi0+
cHNyLnNpbmtfbm90X3JlbGlhYmxlID0gdHJ1ZTsKPj4gIAkJRFJNX0RFQlVHX0tNUygiUFNSIGlu
dGVycnVwdGlvbiBlcnJvciBzZXQsIG5vdCBlbmFibGluZyBQU1JcbiIpOwo+PiBAQCAtMTExMCw3
ICsxMDc2LDcgQEAgaW50IGludGVsX3Bzcl9kZWJ1Z19zZXQoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2LCB1NjQgdmFsKQo+Pgo+PiAgCW9sZF9tb2RlID0gZGV2X3ByaXYtPnBzci5k
ZWJ1ZyAmIEk5MTVfUFNSX0RFQlVHX01PREVfTUFTSzsKPj4gIAlkZXZfcHJpdi0+cHNyLmRlYnVn
ID0gdmFsOwo+PiAtCXBzcl9pcnFfY29udHJvbChkZXZfcHJpdiwgZGV2X3ByaXYtPnBzci5kZWJ1
Zyk7Cj4+ICsJcHNyX2lycV9jb250cm9sKGRldl9wcml2KTsKPj4KPj4gIAltdXRleF91bmxvY2so
JmRldl9wcml2LT5wc3IubG9jayk7Cj4+Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X3JlZy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAo+PiBpbmRl
eCAwMmUxZWYxMGM0N2UuLjFjNmQ5OTk0NDYzMCAxMDA2NDQKPj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9yZWcuaAo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Jl
Zy5oCj4+IEBAIC00MjI1LDEzICs0MjI1LDEyIEBAIGVudW0gewo+PiAgLyogQnNwZWMgY2xhaW1z
IHRob3NlIGFyZW4ndCBzaGlmdGVkIGJ1dCBzdGF5IGF0IDB4NjQ4MDAgKi8KPj4gICNkZWZpbmUg
RURQX1BTUl9JTVIJCQkJX01NSU8oMHg2NDgzNCkKPj4gICNkZWZpbmUgRURQX1BTUl9JSVIJCQkJ
X01NSU8oMHg2NDgzOCkKPj4gLSNkZWZpbmUgICBFRFBfUFNSX0VSUk9SKHNoaWZ0KQkJCSgxIDw8
ICgoc2hpZnQpICsgMikpCj4+IC0jZGVmaW5lICAgRURQX1BTUl9QT1NUX0VYSVQoc2hpZnQpCQko
MSA8PCAoKHNoaWZ0KSArIDEpKQo+PiAtI2RlZmluZSAgIEVEUF9QU1JfUFJFX0VOVFJZKHNoaWZ0
KQkJKDEgPDwgKHNoaWZ0KSkKPj4gLSNkZWZpbmUgICBFRFBfUFNSX1RSQU5TQ09ERVJfQ19TSElG
VAkJMjQKPj4gLSNkZWZpbmUgICBFRFBfUFNSX1RSQU5TQ09ERVJfQl9TSElGVAkJMTYKPj4gLSNk
ZWZpbmUgICBFRFBfUFNSX1RSQU5TQ09ERVJfQV9TSElGVAkJOAo+PiAtI2RlZmluZSAgIEVEUF9Q
U1JfVFJBTlNDT0RFUl9FRFBfU0hJRlQJCTAKPj4gKyNkZWZpbmUgICBfRURQX1BTUl9UUkFOU19T
SElGVCh0cmFucykJCSgodHJhbnMpID09IFRSQU5TQ09ERVJfRURQID8gXAo+PiArCQkJCQkJIDAg
OiAoKHRyYW5zKSArIDEpICogOCkKPgo+KHRyYW5zIC0gVFJBTlNDT0RFUl9BKSArIDEKPgo+dG8g
bm90IGRlcGVuZCBvbiB0aGUgZW51bSB2YWx1ZSBvZiBUUkFOU0NPREVSX0EuCgphZ3JlZWQKCnRo
YW5rcwpMdWNhcyBEZSBNYXJjaGkKCj4KPj4gKyNkZWZpbmUgICBFRFBfUFNSX1RSQU5TX01BU0so
dHJhbnMpCQkoMHg3IDw8IF9FRFBfUFNSX1RSQU5TX1NISUZUKHRyYW5zKSkKPj4gKyNkZWZpbmUg
ICBFRFBfUFNSX0VSUk9SKHRyYW5zKQkJCSgweDQgPDwgX0VEUF9QU1JfVFJBTlNfU0hJRlQodHJh
bnMpKQo+PiArI2RlZmluZSAgIEVEUF9QU1JfUE9TVF9FWElUKHRyYW5zKQkJKDB4MiA8PCBfRURQ
X1BTUl9UUkFOU19TSElGVCh0cmFucykpCj4+ICsjZGVmaW5lICAgRURQX1BTUl9QUkVfRU5UUlko
dHJhbnMpCQkoMHgxIDw8IF9FRFBfUFNSX1RSQU5TX1NISUZUKHRyYW5zKSkKPj4KPj4gICNkZWZp
bmUgX1NSRF9BVVhfQ1RMX0EJCQkJMHg2MDgxMAo+PiAgI2RlZmluZSBfU1JEX0FVWF9DVExfRURQ
CQkJMHg2ZjgxMAo+PiAtLQo+PiAyLjIzLjAKPj4KPj4gX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KPj4gSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdAo+PiBJbnRl
bC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DB3E676131
	for <lists+intel-gfx@lfdr.de>; Fri, 26 Jul 2019 10:46:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 325026E8BA;
	Fri, 26 Jul 2019 08:46:49 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D9C2F6E8AC
 for <intel-gfx@lists.freedesktop.org>; Fri, 26 Jul 2019 08:46:27 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 17621090-1500050 
 for multiple; Fri, 26 Jul 2019 09:46:17 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 26 Jul 2019 09:46:01 +0100
Message-Id: <20190726084613.22129-15-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190726084613.22129-1-chris@chris-wilson.co.uk>
References: <20190726084613.22129-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 15/27] drm/i915: Isolate i915_getparam_ioctl()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhpcyBnaWFudCBzd2l0Y2ggaGFzIHRlbmRyaWxzIGFsbCBvdGhlciB0aGUgc3RydWN0IGFuZCBk
b2VzIG5vdCBmaXQKaW50byB0aGUgcmVzdCBvZiB0aGUgZHJpdmVyIGJyaW5nIHVwIGFuZCBjb250
cm9sIG9mIGk5MTVfZHJ2LmMuIFB1c2ggaXQKdG8gb25lIHNpZGUgc28gdGhhdCBpdCBjYW4gZ3Jv
dyBpbiBwZWFjZS4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2ls
c29uLmNvLnVrPgpBY2tlZC1ieTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVs
LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgfCAgIDEgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyAgICAgIHwgMTY4IC0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgIHwgICAz
ICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYyB8IDE2NyArKysrKysrKysr
KysrKysrKysrKysrKysrKwogNCBmaWxlcyBjaGFuZ2VkLCAxNzEgaW5zZXJ0aW9ucygrKSwgMTY4
IGRlbGV0aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2V0cGFyYW0uYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxl
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKaW5kZXggZDNmYjJlMzc4MWFmLi40ZDY4
NTI5YTI3MGUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCkBAIC00Miw2ICs0Miw3IEBAIHN1YmRpci1j
Y2ZsYWdzLXkgKz0gLUkkKHNyY3RyZWUpLyQoc3JjKQogIyBjb3JlIGRyaXZlciBjb2RlCiBpOTE1
LXkgKz0gaTkxNV9kcnYubyBcCiAJICBpOTE1X2lycS5vIFwKKwkgIGk5MTVfZ2V0cGFyYW0ubyBc
CiAJICBpOTE1X3BhcmFtcy5vIFwKIAkgIGk5MTVfcGNpLm8gXAogCSAgaTkxNV9zY2F0dGVybGlz
dC5vIFwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCmluZGV4IDAzNmVmNGJjNGZlYy4uNzMzZjllOWQy
NGFhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKQEAgLTYxLDIyICs2MSwxNSBAQAogCiAjaW5j
bHVkZSAiZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCIKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1faW9j
dGxzLmgiCi0jaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3VzZXIuaCIKICNpbmNsdWRlICJndC9p
bnRlbF9ndC5oIgogI2luY2x1ZGUgImd0L2ludGVsX2d0X3BtLmgiCi0jaW5jbHVkZSAiZ3QvaW50
ZWxfcmVzZXQuaCIKLSNpbmNsdWRlICJndC9pbnRlbF93b3JrYXJvdW5kcy5oIgotI2luY2x1ZGUg
Imd0L3VjL2ludGVsX3VjLmgiCiAKICNpbmNsdWRlICJpOTE1X2RlYnVnZnMuaCIKICNpbmNsdWRl
ICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImk5MTVfaXJxLmgiCi0jaW5jbHVkZSAiaTkxNV9wbXUu
aCIKICNpbmNsdWRlICJpOTE1X3F1ZXJ5LmgiCi0jaW5jbHVkZSAiaTkxNV90cmFjZS5oIgogI2lu
Y2x1ZGUgImk5MTVfdmdwdS5oIgogI2luY2x1ZGUgImludGVsX2Nzci5oIgotI2luY2x1ZGUgImlu
dGVsX2Rydi5oIgogI2luY2x1ZGUgImludGVsX3BtLmgiCiAKIHN0YXRpYyBzdHJ1Y3QgZHJtX2Ry
aXZlciBkcml2ZXI7CkBAIC0zNDMsMTY3ICszMzYsNiBAQCBzdGF0aWMgdm9pZCBpbnRlbF9kZXRl
Y3RfcGNoKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlwY2lfZGV2X3B1dChw
Y2gpOwogfQogCi1zdGF0aWMgaW50IGk5MTVfZ2V0cGFyYW1faW9jdGwoc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwgdm9pZCAqZGF0YSwKLQkJCSAgICAgICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJp
dikKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGRldik7
Ci0Jc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBkZXZfcHJpdi0+ZHJtLnBkZXY7Ci0JY29uc3Qgc3Ry
dWN0IHNzZXVfZGV2X2luZm8gKnNzZXUgPSAmUlVOVElNRV9JTkZPKGRldl9wcml2KS0+c3NldTsK
LQlkcm1faTkxNV9nZXRwYXJhbV90ICpwYXJhbSA9IGRhdGE7Ci0JaW50IHZhbHVlOwotCi0Jc3dp
dGNoIChwYXJhbS0+cGFyYW0pIHsKLQljYXNlIEk5MTVfUEFSQU1fSVJRX0FDVElWRToKLQljYXNl
IEk5MTVfUEFSQU1fQUxMT1dfQkFUQ0hCVUZGRVI6Ci0JY2FzZSBJOTE1X1BBUkFNX0xBU1RfRElT
UEFUQ0g6Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX0NPTlNUQU5UUzoKLQkJLyogUmVqZWN0
IGFsbCBvbGQgdW1zL2RyaSBwYXJhbXMuICovCi0JCXJldHVybiAtRU5PREVWOwotCWNhc2UgSTkx
NV9QQVJBTV9DSElQU0VUX0lEOgotCQl2YWx1ZSA9IHBkZXYtPmRldmljZTsKLQkJYnJlYWs7Ci0J
Y2FzZSBJOTE1X1BBUkFNX1JFVklTSU9OOgotCQl2YWx1ZSA9IHBkZXYtPnJldmlzaW9uOwotCQli
cmVhazsKLQljYXNlIEk5MTVfUEFSQU1fTlVNX0ZFTkNFU19BVkFJTDoKLQkJdmFsdWUgPSBkZXZf
cHJpdi0+Z2d0dC5udW1fZmVuY2VzOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fSEFTX09W
RVJMQVk6Ci0JCXZhbHVlID0gZGV2X3ByaXYtPm92ZXJsYXkgPyAxIDogMDsKLQkJYnJlYWs7Ci0J
Y2FzZSBJOTE1X1BBUkFNX0hBU19CU0Q6Ci0JCXZhbHVlID0gISFpbnRlbF9lbmdpbmVfbG9va3Vw
X3VzZXIoZGV2X3ByaXYsCi0JCQkJCQkgICBJOTE1X0VOR0lORV9DTEFTU19WSURFTywgMCk7Ci0J
CWJyZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfQkxUOgotCQl2YWx1ZSA9ICEhaW50ZWxfZW5n
aW5lX2xvb2t1cF91c2VyKGRldl9wcml2LAotCQkJCQkJICAgSTkxNV9FTkdJTkVfQ0xBU1NfQ09Q
WSwgMCk7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfVkVCT1g6Ci0JCXZhbHVlID0g
ISFpbnRlbF9lbmdpbmVfbG9va3VwX3VzZXIoZGV2X3ByaXYsCi0JCQkJCQkgICBJOTE1X0VOR0lO
RV9DTEFTU19WSURFT19FTkhBTkNFLCAwKTsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFNX0hB
U19CU0QyOgotCQl2YWx1ZSA9ICEhaW50ZWxfZW5naW5lX2xvb2t1cF91c2VyKGRldl9wcml2LAot
CQkJCQkJICAgSTkxNV9FTkdJTkVfQ0xBU1NfVklERU8sIDEpOwotCQlicmVhazsKLQljYXNlIEk5
MTVfUEFSQU1fSEFTX0xMQzoKLQkJdmFsdWUgPSBIQVNfTExDKGRldl9wcml2KTsKLQkJYnJlYWs7
Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19XVDoKLQkJdmFsdWUgPSBIQVNfV1QoZGV2X3ByaXYpOwot
CQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fSEFTX0FMSUFTSU5HX1BQR1RUOgotCQl2YWx1ZSA9
IElOVEVMX1BQR1RUKGRldl9wcml2KTsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19T
RU1BUEhPUkVTOgotCQl2YWx1ZSA9ICEhKGRldl9wcml2LT5jYXBzLnNjaGVkdWxlciAmIEk5MTVf
U0NIRURVTEVSX0NBUF9TRU1BUEhPUkVTKTsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFNX0hB
U19TRUNVUkVfQkFUQ0hFUzoKLQkJdmFsdWUgPSBjYXBhYmxlKENBUF9TWVNfQURNSU4pOwotCQli
cmVhazsKLQljYXNlIEk5MTVfUEFSQU1fQ01EX1BBUlNFUl9WRVJTSU9OOgotCQl2YWx1ZSA9IGk5
MTVfY21kX3BhcnNlcl9nZXRfdmVyc2lvbihkZXZfcHJpdik7Ci0JCWJyZWFrOwotCWNhc2UgSTkx
NV9QQVJBTV9TVUJTTElDRV9UT1RBTDoKLQkJdmFsdWUgPSBpbnRlbF9zc2V1X3N1YnNsaWNlX3Rv
dGFsKHNzZXUpOwotCQlpZiAoIXZhbHVlKQotCQkJcmV0dXJuIC1FTk9ERVY7Ci0JCWJyZWFrOwot
CWNhc2UgSTkxNV9QQVJBTV9FVV9UT1RBTDoKLQkJdmFsdWUgPSBzc2V1LT5ldV90b3RhbDsKLQkJ
aWYgKCF2YWx1ZSkKLQkJCXJldHVybiAtRU5PREVWOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFS
QU1fSEFTX0dQVV9SRVNFVDoKLQkJdmFsdWUgPSBpbnRlbF9oYXNfZ3B1X3Jlc2V0KGRldl9wcml2
KTsKLQkJaWYgKHZhbHVlICYmIGludGVsX2hhc19yZXNldF9lbmdpbmUoZGV2X3ByaXYpKQotCQkJ
dmFsdWUgPSAyOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fSEFTX1JFU09VUkNFX1NUUkVB
TUVSOgotCQl2YWx1ZSA9IDA7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfUE9PTEVE
X0VVOgotCQl2YWx1ZSA9IEhBU19QT09MRURfRVUoZGV2X3ByaXYpOwotCQlicmVhazsKLQljYXNl
IEk5MTVfUEFSQU1fTUlOX0VVX0lOX1BPT0w6Ci0JCXZhbHVlID0gc3NldS0+bWluX2V1X2luX3Bv
b2w7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IVUNfU1RBVFVTOgotCQl2YWx1ZSA9IGlu
dGVsX2h1Y19jaGVja19zdGF0dXMoJmRldl9wcml2LT5ndC51Yy5odWMpOwotCQlpZiAodmFsdWUg
PCAwKQotCQkJcmV0dXJuIHZhbHVlOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fTU1BUF9H
VFRfVkVSU0lPTjoKLQkJLyogVGhvdWdoIHdlJ3ZlIHN0YXJ0ZWQgb3VyIG51bWJlcmluZyBmcm9t
IDEsIGFuZCBzbyBjbGFzcyBhbGwKLQkJICogZWFybGllciB2ZXJzaW9ucyBhcyAwLCBpbiBlZmZl
Y3QgdGhlaXIgdmFsdWUgaXMgdW5kZWZpbmVkIGFzCi0JCSAqIHRoZSBpb2N0bCB3aWxsIHJlcG9y
dCBFSU5WQUwgZm9yIHRoZSB1bmtub3duIHBhcmFtIQotCQkgKi8KLQkJdmFsdWUgPSBpOTE1X2dl
bV9tbWFwX2d0dF92ZXJzaW9uKCk7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfU0NI
RURVTEVSOgotCQl2YWx1ZSA9IGRldl9wcml2LT5jYXBzLnNjaGVkdWxlcjsKLQkJYnJlYWs7Ci0K
LQljYXNlIEk5MTVfUEFSQU1fTU1BUF9WRVJTSU9OOgotCQkvKiBSZW1lbWJlciB0byBidW1wIHRo
aXMgaWYgdGhlIHZlcnNpb24gY2hhbmdlcyEgKi8KLQljYXNlIEk5MTVfUEFSQU1fSEFTX0dFTToK
LQljYXNlIEk5MTVfUEFSQU1fSEFTX1BBR0VGTElQUElORzoKLQljYXNlIEk5MTVfUEFSQU1fSEFT
X0VYRUNCVUYyOiAvKiBkZXBlbmRzIG9uIEdFTSAqLwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfUkVM
QVhFRF9GRU5DSU5HOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfQ09IRVJFTlRfUklOR1M6Ci0JY2Fz
ZSBJOTE1X1BBUkFNX0hBU19SRUxBWEVEX0RFTFRBOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfR0VO
N19TT0xfUkVTRVQ6Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19XQUlUX1RJTUVPVVQ6Ci0JY2FzZSBJ
OTE1X1BBUkFNX0hBU19QUklNRV9WTUFQX0ZMVVNIOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfUElO
TkVEX0JBVENIRVM6Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX05PX1JFTE9DOgotCWNhc2Ug
STkxNV9QQVJBTV9IQVNfRVhFQ19IQU5ETEVfTFVUOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfQ09I
RVJFTlRfUEhZU19HVFQ6Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX1NPRlRQSU46Ci0JY2Fz
ZSBJOTE1X1BBUkFNX0hBU19FWEVDX0FTWU5DOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19G
RU5DRToKLQljYXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfQ0FQVFVSRToKLQljYXNlIEk5MTVfUEFS
QU1fSEFTX0VYRUNfQkFUQ0hfRklSU1Q6Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX0ZFTkNF
X0FSUkFZOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19TVUJNSVRfRkVOQ0U6Ci0JCS8qIEZv
ciB0aGUgdGltZSBiZWluZyBhbGwgb2YgdGhlc2UgYXJlIGFsd2F5cyB0cnVlOwotCQkgKiBpZiBz
b21lIHN1cHBvcnRlZCBoYXJkd2FyZSBkb2VzIG5vdCBoYXZlIG9uZSBvZiB0aGVzZQotCQkgKiBm
ZWF0dXJlcyB0aGlzIHZhbHVlIG5lZWRzIHRvIGJlIHByb3ZpZGVkIGZyb20KLQkJICogSU5URUxf
SU5GTygpLCBhIGZlYXR1cmUgbWFjcm8sIG9yIHNpbWlsYXIuCi0JCSAqLwotCQl2YWx1ZSA9IDE7
Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfQ09OVEVYVF9JU09MQVRJT046Ci0JCXZh
bHVlID0gaW50ZWxfZW5naW5lc19oYXNfY29udGV4dF9pc29sYXRpb24oZGV2X3ByaXYpOwotCQli
cmVhazsKLQljYXNlIEk5MTVfUEFSQU1fU0xJQ0VfTUFTSzoKLQkJdmFsdWUgPSBzc2V1LT5zbGlj
ZV9tYXNrOwotCQlpZiAoIXZhbHVlKQotCQkJcmV0dXJuIC1FTk9ERVY7Ci0JCWJyZWFrOwotCWNh
c2UgSTkxNV9QQVJBTV9TVUJTTElDRV9NQVNLOgotCQl2YWx1ZSA9IHNzZXUtPnN1YnNsaWNlX21h
c2tbMF07Ci0JCWlmICghdmFsdWUpCi0JCQlyZXR1cm4gLUVOT0RFVjsKLQkJYnJlYWs7Ci0JY2Fz
ZSBJOTE1X1BBUkFNX0NTX1RJTUVTVEFNUF9GUkVRVUVOQ1k6Ci0JCXZhbHVlID0gMTAwMCAqIFJV
TlRJTUVfSU5GTyhkZXZfcHJpdiktPmNzX3RpbWVzdGFtcF9mcmVxdWVuY3lfa2h6OwotCQlicmVh
azsKLQljYXNlIEk5MTVfUEFSQU1fTU1BUF9HVFRfQ09IRVJFTlQ6Ci0JCXZhbHVlID0gSU5URUxf
SU5GTyhkZXZfcHJpdiktPmhhc19jb2hlcmVudF9nZ3R0OwotCQlicmVhazsKLQlkZWZhdWx0Ogot
CQlEUk1fREVCVUcoIlVua25vd24gcGFyYW1ldGVyICVkXG4iLCBwYXJhbS0+cGFyYW0pOwotCQly
ZXR1cm4gLUVJTlZBTDsKLQl9Ci0KLQlpZiAocHV0X3VzZXIodmFsdWUsIHBhcmFtLT52YWx1ZSkp
Ci0JCXJldHVybiAtRUZBVUxUOwotCi0JcmV0dXJuIDA7Ci19Ci0KIHN0YXRpYyBpbnQgaTkxNV9n
ZXRfYnJpZGdlX2RldihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiB7CiAJaW50
IGRvbWFpbiA9IHBjaV9kb21haW5fbnIoZGV2X3ByaXYtPmRybS5wZGV2LT5idXMpOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZHJ2LmgKaW5kZXggNzZiOTBkN2JlMjMxLi4xOGUxMTBmOWRmOTIgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kcnYuaApAQCAtMjM5Myw2ICsyMzkzLDkgQEAgc3RhdGljIGlubGluZSBib29s
IGludGVsX3ZncHVfYWN0aXZlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAly
ZXR1cm4gZGV2X3ByaXYtPnZncHUuYWN0aXZlOwogfQogCitpbnQgaTkxNV9nZXRwYXJhbV9pb2N0
bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAorCQkJc3RydWN0IGRybV9maWxl
ICpmaWxlX3ByaXYpOworCiAvKiBpOTE1X2dlbS5jICovCiBpbnQgaTkxNV9nZW1faW5pdF91c2Vy
cHRyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIGk5MTVfZ2VtX2Ns
ZWFudXBfdXNlcnB0cihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAwMDAwMC4uZTZjMzUxMDgwNTkzCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9nZXRwYXJhbS5jCkBAIC0wLDAgKzEsMTY3IEBACisvKgorICogU1BEWC1MaWNl
bnNlLUlkZW50aWZpZXI6IE1JVAorICovCisKKyNpbmNsdWRlICJndC9pbnRlbF9lbmdpbmVfdXNl
ci5oIgorCisjaW5jbHVkZSAiaTkxNV9kcnYuaCIKKworaW50IGk5MTVfZ2V0cGFyYW1faW9jdGwo
c3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKKwkJCXN0cnVjdCBkcm1fZmlsZSAq
ZmlsZV9wcml2KQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShk
ZXYpOworCWNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1ID0gJlJVTlRJTUVfSU5GTyhp
OTE1KS0+c3NldTsKKwlkcm1faTkxNV9nZXRwYXJhbV90ICpwYXJhbSA9IGRhdGE7CisJaW50IHZh
bHVlOworCisJc3dpdGNoIChwYXJhbS0+cGFyYW0pIHsKKwljYXNlIEk5MTVfUEFSQU1fSVJRX0FD
VElWRToKKwljYXNlIEk5MTVfUEFSQU1fQUxMT1dfQkFUQ0hCVUZGRVI6CisJY2FzZSBJOTE1X1BB
UkFNX0xBU1RfRElTUEFUQ0g6CisJY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX0NPTlNUQU5UUzoK
KwkJLyogUmVqZWN0IGFsbCBvbGQgdW1zL2RyaSBwYXJhbXMuICovCisJCXJldHVybiAtRU5PREVW
OworCWNhc2UgSTkxNV9QQVJBTV9DSElQU0VUX0lEOgorCQl2YWx1ZSA9IGk5MTUtPmRybS5wZGV2
LT5kZXZpY2U7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9SRVZJU0lPTjoKKwkJdmFsdWUg
PSBpOTE1LT5kcm0ucGRldi0+cmV2aXNpb247CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9O
VU1fRkVOQ0VTX0FWQUlMOgorCQl2YWx1ZSA9IGk5MTUtPmdndHQubnVtX2ZlbmNlczsKKwkJYnJl
YWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19PVkVSTEFZOgorCQl2YWx1ZSA9ICEhaTkxNS0+b3Zl
cmxheTsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19CU0Q6CisJCXZhbHVlID0gISFp
bnRlbF9lbmdpbmVfbG9va3VwX3VzZXIoaTkxNSwKKwkJCQkJCSAgIEk5MTVfRU5HSU5FX0NMQVNT
X1ZJREVPLCAwKTsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19CTFQ6CisJCXZhbHVl
ID0gISFpbnRlbF9lbmdpbmVfbG9va3VwX3VzZXIoaTkxNSwKKwkJCQkJCSAgIEk5MTVfRU5HSU5F
X0NMQVNTX0NPUFksIDApOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fSEFTX1ZFQk9YOgor
CQl2YWx1ZSA9ICEhaW50ZWxfZW5naW5lX2xvb2t1cF91c2VyKGk5MTUsCisJCQkJCQkgICBJOTE1
X0VOR0lORV9DTEFTU19WSURFT19FTkhBTkNFLCAwKTsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BB
UkFNX0hBU19CU0QyOgorCQl2YWx1ZSA9ICEhaW50ZWxfZW5naW5lX2xvb2t1cF91c2VyKGk5MTUs
CisJCQkJCQkgICBJOTE1X0VOR0lORV9DTEFTU19WSURFTywgMSk7CisJCWJyZWFrOworCWNhc2Ug
STkxNV9QQVJBTV9IQVNfTExDOgorCQl2YWx1ZSA9IEhBU19MTEMoaTkxNSk7CisJCWJyZWFrOwor
CWNhc2UgSTkxNV9QQVJBTV9IQVNfV1Q6CisJCXZhbHVlID0gSEFTX1dUKGk5MTUpOworCQlicmVh
azsKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0FMSUFTSU5HX1BQR1RUOgorCQl2YWx1ZSA9IElOVEVM
X1BQR1RUKGk5MTUpOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fSEFTX1NFTUFQSE9SRVM6
CisJCXZhbHVlID0gISEoaTkxNS0+Y2Fwcy5zY2hlZHVsZXIgJiBJOTE1X1NDSEVEVUxFUl9DQVBf
U0VNQVBIT1JFUyk7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9IQVNfU0VDVVJFX0JBVENI
RVM6CisJCXZhbHVlID0gY2FwYWJsZShDQVBfU1lTX0FETUlOKTsKKwkJYnJlYWs7CisJY2FzZSBJ
OTE1X1BBUkFNX0NNRF9QQVJTRVJfVkVSU0lPTjoKKwkJdmFsdWUgPSBpOTE1X2NtZF9wYXJzZXJf
Z2V0X3ZlcnNpb24oaTkxNSk7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9TVUJTTElDRV9U
T1RBTDoKKwkJdmFsdWUgPSBpbnRlbF9zc2V1X3N1YnNsaWNlX3RvdGFsKHNzZXUpOworCQlpZiAo
IXZhbHVlKQorCQkJcmV0dXJuIC1FTk9ERVY7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9F
VV9UT1RBTDoKKwkJdmFsdWUgPSBzc2V1LT5ldV90b3RhbDsKKwkJaWYgKCF2YWx1ZSkKKwkJCXJl
dHVybiAtRU5PREVWOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0dQVV9SRVNFVDoK
KwkJdmFsdWUgPSBpbnRlbF9oYXNfZ3B1X3Jlc2V0KGk5MTUpOworCQlpZiAodmFsdWUgJiYgaW50
ZWxfaGFzX3Jlc2V0X2VuZ2luZShpOTE1KSkKKwkJCXZhbHVlID0gMjsKKwkJYnJlYWs7CisJY2Fz
ZSBJOTE1X1BBUkFNX0hBU19SRVNPVVJDRV9TVFJFQU1FUjoKKwkJdmFsdWUgPSAwOworCQlicmVh
azsKKwljYXNlIEk5MTVfUEFSQU1fSEFTX1BPT0xFRF9FVToKKwkJdmFsdWUgPSBIQVNfUE9PTEVE
X0VVKGk5MTUpOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fTUlOX0VVX0lOX1BPT0w6CisJ
CXZhbHVlID0gc3NldS0+bWluX2V1X2luX3Bvb2w7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJB
TV9IVUNfU1RBVFVTOgorCQl2YWx1ZSA9IGludGVsX2h1Y19jaGVja19zdGF0dXMoJmk5MTUtPmd0
LnVjLmh1Yyk7CisJCWlmICh2YWx1ZSA8IDApCisJCQlyZXR1cm4gdmFsdWU7CisJCWJyZWFrOwor
CWNhc2UgSTkxNV9QQVJBTV9NTUFQX0dUVF9WRVJTSU9OOgorCQkvKiBUaG91Z2ggd2UndmUgc3Rh
cnRlZCBvdXIgbnVtYmVyaW5nIGZyb20gMSwgYW5kIHNvIGNsYXNzIGFsbAorCQkgKiBlYXJsaWVy
IHZlcnNpb25zIGFzIDAsIGluIGVmZmVjdCB0aGVpciB2YWx1ZSBpcyB1bmRlZmluZWQgYXMKKwkJ
ICogdGhlIGlvY3RsIHdpbGwgcmVwb3J0IEVJTlZBTCBmb3IgdGhlIHVua25vd24gcGFyYW0hCisJ
CSAqLworCQl2YWx1ZSA9IGk5MTVfZ2VtX21tYXBfZ3R0X3ZlcnNpb24oKTsKKwkJYnJlYWs7CisJ
Y2FzZSBJOTE1X1BBUkFNX0hBU19TQ0hFRFVMRVI6CisJCXZhbHVlID0gaTkxNS0+Y2Fwcy5zY2hl
ZHVsZXI7CisJCWJyZWFrOworCisJY2FzZSBJOTE1X1BBUkFNX01NQVBfVkVSU0lPTjoKKwkJLyog
UmVtZW1iZXIgdG8gYnVtcCB0aGlzIGlmIHRoZSB2ZXJzaW9uIGNoYW5nZXMhICovCisJY2FzZSBJ
OTE1X1BBUkFNX0hBU19HRU06CisJY2FzZSBJOTE1X1BBUkFNX0hBU19QQUdFRkxJUFBJTkc6CisJ
Y2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDQlVGMjogLyogZGVwZW5kcyBvbiBHRU0gKi8KKwljYXNl
IEk5MTVfUEFSQU1fSEFTX1JFTEFYRURfRkVOQ0lORzoKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0NP
SEVSRU5UX1JJTkdTOgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfUkVMQVhFRF9ERUxUQToKKwljYXNl
IEk5MTVfUEFSQU1fSEFTX0dFTjdfU09MX1JFU0VUOgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfV0FJ
VF9USU1FT1VUOgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfUFJJTUVfVk1BUF9GTFVTSDoKKwljYXNl
IEk5MTVfUEFSQU1fSEFTX1BJTk5FRF9CQVRDSEVTOgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhF
Q19OT19SRUxPQzoKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfSEFORExFX0xVVDoKKwljYXNl
IEk5MTVfUEFSQU1fSEFTX0NPSEVSRU5UX1BIWVNfR1RUOgorCWNhc2UgSTkxNV9QQVJBTV9IQVNf
RVhFQ19TT0ZUUElOOgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19BU1lOQzoKKwljYXNlIEk5
MTVfUEFSQU1fSEFTX0VYRUNfRkVOQ0U6CisJY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX0NBUFRV
UkU6CisJY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX0JBVENIX0ZJUlNUOgorCWNhc2UgSTkxNV9Q
QVJBTV9IQVNfRVhFQ19GRU5DRV9BUlJBWToKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfU1VC
TUlUX0ZFTkNFOgorCQkvKiBGb3IgdGhlIHRpbWUgYmVpbmcgYWxsIG9mIHRoZXNlIGFyZSBhbHdh
eXMgdHJ1ZTsKKwkJICogaWYgc29tZSBzdXBwb3J0ZWQgaGFyZHdhcmUgZG9lcyBub3QgaGF2ZSBv
bmUgb2YgdGhlc2UKKwkJICogZmVhdHVyZXMgdGhpcyB2YWx1ZSBuZWVkcyB0byBiZSBwcm92aWRl
ZCBmcm9tCisJCSAqIElOVEVMX0lORk8oKSwgYSBmZWF0dXJlIG1hY3JvLCBvciBzaW1pbGFyLgor
CQkgKi8KKwkJdmFsdWUgPSAxOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0NPTlRF
WFRfSVNPTEFUSU9OOgorCQl2YWx1ZSA9IGludGVsX2VuZ2luZXNfaGFzX2NvbnRleHRfaXNvbGF0
aW9uKGk5MTUpOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fU0xJQ0VfTUFTSzoKKwkJdmFs
dWUgPSBzc2V1LT5zbGljZV9tYXNrOworCQlpZiAoIXZhbHVlKQorCQkJcmV0dXJuIC1FTk9ERVY7
CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9TVUJTTElDRV9NQVNLOgorCQl2YWx1ZSA9IHNz
ZXUtPnN1YnNsaWNlX21hc2tbMF07CisJCWlmICghdmFsdWUpCisJCQlyZXR1cm4gLUVOT0RFVjsK
KwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0NTX1RJTUVTVEFNUF9GUkVRVUVOQ1k6CisJCXZh
bHVlID0gMTAwMCAqIFJVTlRJTUVfSU5GTyhpOTE1KS0+Y3NfdGltZXN0YW1wX2ZyZXF1ZW5jeV9r
aHo7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9NTUFQX0dUVF9DT0hFUkVOVDoKKwkJdmFs
dWUgPSBJTlRFTF9JTkZPKGk5MTUpLT5oYXNfY29oZXJlbnRfZ2d0dDsKKwkJYnJlYWs7CisJZGVm
YXVsdDoKKwkJRFJNX0RFQlVHKCJVbmtub3duIHBhcmFtZXRlciAlZFxuIiwgcGFyYW0tPnBhcmFt
KTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCisJaWYgKHB1dF91c2VyKHZhbHVlLCBwYXJhbS0+
dmFsdWUpKQorCQlyZXR1cm4gLUVGQVVMVDsKKworCXJldHVybiAwOworfQotLSAKMi4yMi4wCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A4005801FE
	for <lists+intel-gfx@lfdr.de>; Fri,  2 Aug 2019 22:51:41 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B3A296E48C;
	Fri,  2 Aug 2019 20:51:37 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4AE056E4AF
 for <intel-gfx@lists.freedesktop.org>; Fri,  2 Aug 2019 20:51:36 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 02 Aug 2019 13:51:35 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,339,1559545200"; d="scan'208";a="175021806"
Received: from jssummer-desk.jf.intel.com ([10.165.21.197])
 by fmsmga007.fm.intel.com with ESMTP; 02 Aug 2019 13:51:35 -0700
From: Stuart Summers <stuart.summers@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  2 Aug 2019 13:51:30 -0700
Message-Id: <20190802205134.303-7-stuart.summers@intel.com>
X-Mailer: git-send-email 2.21.0.5.gaeb582a983
In-Reply-To: <20190802205134.303-1-stuart.summers@intel.com>
References: <20190802205134.303-1-stuart.summers@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 06/10] drm/i915: Add function to set subslices
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWRkIGEgbmV3IGZ1bmN0aW9uIHRvIHNldCBhIHJhbmdlIG9mIHN1YnNsaWNlcyBmb3IgYQpzcGVj
aWZpZWQgc2xpY2UgYmFzZWQgb24gYSBnaXZlbiBtYXNrLgoKU2lnbmVkLW9mZi1ieTogU3R1YXJ0
IFN1bW1lcnMgPHN0dWFydC5zdW1tZXJzQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9zc2V1LmMgICAgIHwgMTAgKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9zc2V1LmggICAgIHwgIDMgKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X2RldmljZV9pbmZvLmMgfCA0NiArKysrKysrKysrKysrKy0tLS0tLS0tLS0KIDMgZmlsZXMgY2hh
bmdlZCwgNDEgaW5zZXJ0aW9ucygrKSwgMTggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfc3NldS5jCmluZGV4IDcxYWJmMGM5YTQ2Yi4uNjA3YzE0NDcyODdjIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5jCkBAIC0zMCw2ICszMCwxNiBAQCBpbnRlbF9zc2V1
X3N1YnNsaWNlX3RvdGFsKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1KQogCXJldHVy
biB0b3RhbDsKIH0KIAordm9pZCBpbnRlbF9zc2V1X3NldF9zdWJzbGljZXMoc3RydWN0IHNzZXVf
ZGV2X2luZm8gKnNzZXUsIGludCBzbGljZSwKKwkJCSAgICAgIHUzMiBzc19tYXNrKQoreworCWlu
dCBpLCBvZmZzZXQgPSBzbGljZSAqIHNzZXUtPnNzX3N0cmlkZTsKKworCWZvciAoaSA9IDA7IGkg
PCBzc2V1LT5zc19zdHJpZGU7IGkrKykKKwkJc3NldS0+c3Vic2xpY2VfbWFza1tvZmZzZXQgKyBp
XSA9CisJCQkoc3NfbWFzayA+PiAoQklUU19QRVJfQllURSAqIGkpKSAmIDB4ZmY7Cit9CisKIHVu
c2lnbmVkIGludAogaW50ZWxfc3NldV9zdWJzbGljZXNfcGVyX3NsaWNlKGNvbnN0IHN0cnVjdCBz
c2V1X2Rldl9pbmZvICpzc2V1LCB1OCBzbGljZSkKIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X3NzZXUuaAppbmRleCBmZTIyZDViMThlNjcuLjIyNjFkNGU3ZDk4YiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX3NzZXUuaApAQCAtNzUsNiArNzUsOSBAQCBpbnRlbF9zc2V1X3N1YnNsaWNl
X3RvdGFsKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1KTsKIHVuc2lnbmVkIGludAog
aW50ZWxfc3NldV9zdWJzbGljZXNfcGVyX3NsaWNlKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZv
ICpzc2V1LCB1OCBzbGljZSk7CiAKK3ZvaWQgaW50ZWxfc3NldV9zZXRfc3Vic2xpY2VzKHN0cnVj
dCBzc2V1X2Rldl9pbmZvICpzc2V1LCBpbnQgc2xpY2UsCisJCQkgICAgICB1MzIgc3NfbWFzayk7
CisKIHUzMiBpbnRlbF9zc2V1X21ha2VfcnBjcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSwKIAkJCSBjb25zdCBzdHJ1Y3QgaW50ZWxfc3NldSAqcmVxX3NzZXUpOwogCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uYwppbmRleCBlNzA4OTk1NDYzNTkuLjJlY2YyZTUw
Y2VlZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8u
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jCkBAIC0yMDYs
NyArMjA2LDEwIEBAIHN0YXRpYyB2b2lkIGdlbjExX3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkJCWludCBzczsKIAogCQkJc3NldS0+c2xpY2VfbWFz
ayB8PSBCSVQocyk7Ci0JCQlzc2V1LT5zdWJzbGljZV9tYXNrW3NdID0gKHNzX2VuID4+IHNzX2lk
eCkgJiBzc19lbl9tYXNrOworCisJCQlpbnRlbF9zc2V1X3NldF9zdWJzbGljZXMoc3NldSwgcywg
KHNzX2VuID4+IHNzX2lkeCkgJgorCQkJCQkJCSAgc3NfZW5fbWFzayk7CisKIAkJCWZvciAoc3Mg
PSAwOyBzcyA8IHNzZXUtPm1heF9zdWJzbGljZXM7IHNzKyspIHsKIAkJCQlpZiAoc3NldS0+c3Vi
c2xpY2VfbWFza1tzXSAmIEJJVChzcykpCiAJCQkJCXNzZXVfc2V0X2V1cyhzc2V1LCBzLCBzcywg
ZXVfZW4pOwpAQCAtMjM1LDE0ICsyMzgsNiBAQCBzdGF0aWMgdm9pZCBnZW4xMF9zc2V1X2luZm9f
aW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJc3NldS0+c2xpY2VfbWFz
ayA9IChmdXNlMiAmIEdFTjEwX0YyX1NfRU5BX01BU0spID4+CiAJCQkgICAgR0VOMTBfRjJfU19F
TkFfU0hJRlQ7CiAKLQlzdWJzbGljZV9tYXNrID0gKDEgPDwgNCkgLSAxOwotCXN1YnNsaWNlX21h
c2sgJj0gfigoZnVzZTIgJiBHRU4xMF9GMl9TU19ESVNfTUFTSykgPj4KLQkJCSAgIEdFTjEwX0Yy
X1NTX0RJU19TSElGVCk7Ci0KLQkvKgotCSAqIFNsaWNlMCBjYW4gaGF2ZSB1cCB0byAzIHN1YnNs
aWNlcywgYnV0IHRoZXJlIGFyZSBvbmx5IDIgaW4KLQkgKiBzbGljZTEvMi4KLQkgKi8KIAlzc2V1
LT5zdWJzbGljZV9tYXNrWzBdID0gc3Vic2xpY2VfbWFzazsKIAlmb3IgKHMgPSAxOyBzIDwgc3Nl
dS0+bWF4X3NsaWNlczsgcysrKQogCQlzc2V1LT5zdWJzbGljZV9tYXNrW3NdID0gc3Vic2xpY2Vf
bWFzayAmIDB4MzsKQEAgLTI3MCwxNCArMjY1LDI1IEBAIHN0YXRpYyB2b2lkIGdlbjEwX3NzZXVf
aW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlldV9lbiA9IH5J
OTE1X1JFQUQoR0VOMTBfRVVfRElTQUJMRTMpOwogCXNzZXVfc2V0X2V1cyhzc2V1LCA1LCAxLCBl
dV9lbiAmIGV1X21hc2spOwogCi0JLyogRG8gYSBzZWNvbmQgcGFzcyB3aGVyZSB3ZSBtYXJrIHRo
ZSBzdWJzbGljZXMgZGlzYWJsZWQgaWYgYWxsIHRoZWlyCi0JICogZXVzIGFyZSBvZmYuCi0JICov
CisJc3Vic2xpY2VfbWFzayA9ICgxIDw8IDQpIC0gMTsKKwlzdWJzbGljZV9tYXNrICY9IH4oKGZ1
c2UyICYgR0VOMTBfRjJfU1NfRElTX01BU0spID4+CisJCQkgICBHRU4xMF9GMl9TU19ESVNfU0hJ
RlQpOworCiAJZm9yIChzID0gMDsgcyA8IHNzZXUtPm1heF9zbGljZXM7IHMrKykgeworCQl1MzIg
c3Vic2xpY2VfbWFza193aXRoX2V1cyA9IHN1YnNsaWNlX21hc2s7CisKIAkJZm9yIChzcyA9IDA7
IHNzIDwgc3NldS0+bWF4X3N1YnNsaWNlczsgc3MrKykgewogCQkJaWYgKHNzZXVfZ2V0X2V1cyhz
c2V1LCBzLCBzcykgPT0gMCkKLQkJCQlzc2V1LT5zdWJzbGljZV9tYXNrW3NdICY9IH5CSVQoc3Mp
OworCQkJCXN1YnNsaWNlX21hc2tfd2l0aF9ldXMgJj0gfkJJVChzcyk7CiAJCX0KKworCQkvKgor
CQkgKiBTbGljZTAgY2FuIGhhdmUgdXAgdG8gMyBzdWJzbGljZXMsIGJ1dCB0aGVyZSBhcmUgb25s
eSAyIGluCisJCSAqIHNsaWNlMS8yLgorCQkgKi8KKwkJaW50ZWxfc3NldV9zZXRfc3Vic2xpY2Vz
KHNzZXUsIHMsIHMgPT0gMCA/CisJCQkJCQkgIHN1YnNsaWNlX21hc2tfd2l0aF9ldXMgOgorCQkJ
CQkJICBzdWJzbGljZV9tYXNrX3dpdGhfZXVzICYgMHgzKTsKIAl9CiAKIAlzc2V1LT5ldV90b3Rh
bCA9IGNvbXB1dGVfZXVfdG90YWwoc3NldSk7CkBAIC0zMDMsNiArMzA5LDcgQEAgc3RhdGljIHZv
aWQgY2hlcnJ5dmlld19zc2V1X2luZm9faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYpCiB7CiAJc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUgPSAmUlVOVElNRV9JTkZPKGRl
dl9wcml2KS0+c3NldTsKIAl1MzIgZnVzZTsKKwl1OCBzdWJzbGljZV9tYXNrOwogCiAJZnVzZSA9
IEk5MTVfUkVBRChDSFZfRlVTRV9HVCk7CiAKQEAgLTMxNiw3ICszMjMsNyBAQCBzdGF0aWMgdm9p
ZCBjaGVycnl2aWV3X3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdikKIAkJCSgoKGZ1c2UgJiBDSFZfRkdUX0VVX0RJU19TUzBfUjFfTUFTSykgPj4KIAkJCSAg
Q0hWX0ZHVF9FVV9ESVNfU1MwX1IxX1NISUZUKSA8PCA0KTsKIAotCQlzc2V1LT5zdWJzbGljZV9t
YXNrWzBdIHw9IEJJVCgwKTsKKwkJc3Vic2xpY2VfbWFzayB8PSBCSVQoMCk7CiAJCXNzZXVfc2V0
X2V1cyhzc2V1LCAwLCAwLCB+ZGlzYWJsZWRfbWFzayk7CiAJfQogCkBAIC0zMjcsMTAgKzMzNCwx
MiBAQCBzdGF0aWMgdm9pZCBjaGVycnl2aWV3X3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdikKIAkJCSgoKGZ1c2UgJiBDSFZfRkdUX0VVX0RJU19TUzFfUjFf
TUFTSykgPj4KIAkJCSAgQ0hWX0ZHVF9FVV9ESVNfU1MxX1IxX1NISUZUKSA8PCA0KTsKIAotCQlz
c2V1LT5zdWJzbGljZV9tYXNrWzBdIHw9IEJJVCgxKTsKKwkJc3Vic2xpY2VfbWFzayB8PSBCSVQo
MSk7CiAJCXNzZXVfc2V0X2V1cyhzc2V1LCAwLCAxLCB+ZGlzYWJsZWRfbWFzayk7CiAJfQogCisJ
aW50ZWxfc3NldV9zZXRfc3Vic2xpY2VzKHNzZXUsIDAsIHN1YnNsaWNlX21hc2spOworCiAJc3Nl
dS0+ZXVfdG90YWwgPSBjb21wdXRlX2V1X3RvdGFsKHNzZXUpOwogCiAJLyoKQEAgLTM4Myw3ICsz
OTIsNyBAQCBzdGF0aWMgdm9pZCBnZW45X3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdikKIAkJCS8qIHNraXAgZGlzYWJsZWQgc2xpY2UgKi8KIAkJCWNvbnRp
bnVlOwogCi0JCXNzZXUtPnN1YnNsaWNlX21hc2tbc10gPSBzdWJzbGljZV9tYXNrOworCQlpbnRl
bF9zc2V1X3NldF9zdWJzbGljZXMoc3NldSwgcywgc3Vic2xpY2VfbWFzayk7CiAKIAkJZXVfZGlz
YWJsZSA9IEk5MTVfUkVBRChHRU45X0VVX0RJU0FCTEUocykpOwogCQlmb3IgKHNzID0gMDsgc3Mg
PCBzc2V1LT5tYXhfc3Vic2xpY2VzOyBzcysrKSB7CkBAIC00OTAsNyArNDk5LDcgQEAgc3RhdGlj
IHZvaWQgYnJvYWR3ZWxsX3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdikKIAkJCS8qIHNraXAgZGlzYWJsZWQgc2xpY2UgKi8KIAkJCWNvbnRpbnVlOwogCi0J
CXNzZXUtPnN1YnNsaWNlX21hc2tbc10gPSBzdWJzbGljZV9tYXNrOworCQlpbnRlbF9zc2V1X3Nl
dF9zdWJzbGljZXMoc3NldSwgcywgc3Vic2xpY2VfbWFzayk7CiAKIAkJZm9yIChzcyA9IDA7IHNz
IDwgc3NldS0+bWF4X3N1YnNsaWNlczsgc3MrKykgewogCQkJdTggZXVfZGlzYWJsZWRfbWFzazsK
QEAgLTU2Miw3ICs1NzEsNiBAQCBzdGF0aWMgdm9pZCBoYXN3ZWxsX3NzZXVfaW5mb19pbml0KHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAljYXNlIDM6CiAJCXNzZXUtPnNsaWNl
X21hc2sgPSBCSVQoMCkgfCBCSVQoMSk7CiAJCXN1YnNsaWNlX21hc2sgPSBCSVQoMCkgfCBCSVQo
MSk7Ci0JCXN1YnNsaWNlX21hc2sgPSBCSVQoMCkgfCBCSVQoMSk7CiAJCWJyZWFrOwogCX0KIApA
QCAtNTg4LDYgKzU5Niw4IEBAIHN0YXRpYyB2b2lkIGhhc3dlbGxfc3NldV9pbmZvX2luaXQoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQkJICAgIHNzZXUtPmV1X3Blcl9zdWJz
bGljZSk7CiAKIAlmb3IgKHMgPSAwOyBzIDwgc3NldS0+bWF4X3NsaWNlczsgcysrKSB7CisJCWlu
dGVsX3NzZXVfc2V0X3N1YnNsaWNlcyhzc2V1LCBzLCBzdWJzbGljZV9tYXNrKTsKKwogCQlmb3Ig
KHNzID0gMDsgc3MgPCBzc2V1LT5tYXhfc3Vic2xpY2VzOyBzcysrKSB7CiAJCQlzc2V1X3NldF9l
dXMoc3NldSwgcywgc3MsCiAJCQkJICAgICAoMVVMIDw8IHNzZXUtPmV1X3Blcl9zdWJzbGljZSkg
LSAxKTsKLS0gCjIuMjEuMC41LmdhZWI1ODJhOTgzCgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8A9F284B21
	for <lists+intel-gfx@lfdr.de>; Wed,  7 Aug 2019 14:00:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 94CFF6E6BE;
	Wed,  7 Aug 2019 12:00:07 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7AC2D6E6BE
 for <intel-gfx@lists.freedesktop.org>; Wed,  7 Aug 2019 12:00:06 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 07 Aug 2019 05:00:05 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,357,1559545200"; d="scan'208";a="192902371"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.150])
 by fmsmga001.fm.intel.com with ESMTP; 07 Aug 2019 05:00:03 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  7 Aug 2019 15:04:15 +0300
Message-Id: <20190807120415.17917-1-jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH] drm/i915: split out intel_pch.[ch] from
 i915_drv.[ch]
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWJzdHJhY3QgdGhlIHJhdGhlciBzZWxmLWNvbnRhaW5lZCBwaWVjZSBvZiBjb2RlIGZyb20gaTkx
NV9kcnYuW2NoXS4gTm8KZnVuY3Rpb25hbCBjaGFuZ2VzLgoKQ2M6IEpvc8OpIFJvYmVydG8gZGUg
U291emEgPGpvc2Uuc291emFAaW50ZWwuY29tPgpDYzogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8
ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogSmFuaSBOaWt1
bGEgPGphbmkubmlrdWxhQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtl
ZmlsZSAgICB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jICB8IDE5NCAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuaCAgfCAgNjAgKy0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wY2guYyB8
IDIwMSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9pbnRlbF9wY2guaCB8ICA3MyArKysrKysrKysrKwogNSBmaWxlcyBjaGFuZ2VkLCAyNzYgaW5z
ZXJ0aW9ucygrKSwgMjUzIGRlbGV0aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX3BjaC5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfcGNoLmgKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9N
YWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCmluZGV4IDhmZTE1N2Y3MTYx
Ny4uN2Y3MTA0MTVhNTI1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmls
ZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQpAQCAtNDgsNiArNDgsNyBAQCBp
OTE1LXkgKz0gaTkxNV9kcnYubyBcCiAJICBpOTE1X3N5c2ZzLm8gXAogCSAgaW50ZWxfY3NyLm8g
XAogCSAgaW50ZWxfZGV2aWNlX2luZm8ubyBcCisJICBpbnRlbF9wY2gubyBcCiAJICBpbnRlbF9w
bS5vIFwKIAkgIGludGVsX3J1bnRpbWVfcG0ubyBcCiAJICBpbnRlbF9zaWRlYmFuZC5vIFwKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5jCmluZGV4IDUzNTIwOWVlNDc0MS4uNTgwN2MxYTBkYWIxIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZHJ2LmMKQEAgLTE1MCwyMDAgKzE1MCw2IEBAIF9faTkxNV9wcmludGso
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBjb25zdCBjaGFyICpsZXZlbCwKIAl9
CiB9CiAKLS8qIE1hcCBQQ0ggZGV2aWNlIGlkIHRvIFBDSCB0eXBlLCBvciBQQ0hfTk9ORSBpZiB1
bmtub3duLiAqLwotc3RhdGljIGVudW0gaW50ZWxfcGNoCi1pbnRlbF9wY2hfdHlwZShjb25zdCBz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIHVuc2lnbmVkIHNob3J0IGlkKQotewot
CXN3aXRjaCAoaWQpIHsKLQljYXNlIElOVEVMX1BDSF9JQlhfREVWSUNFX0lEX1RZUEU6Ci0JCURS
TV9ERUJVR19LTVMoIkZvdW5kIEliZXggUGVhayBQQ0hcbiIpOwotCQlXQVJOX09OKCFJU19HRU4o
ZGV2X3ByaXYsIDUpKTsKLQkJcmV0dXJuIFBDSF9JQlg7Ci0JY2FzZSBJTlRFTF9QQ0hfQ1BUX0RF
VklDRV9JRF9UWVBFOgotCQlEUk1fREVCVUdfS01TKCJGb3VuZCBDb3VnYXJQb2ludCBQQ0hcbiIp
OwotCQlXQVJOX09OKCFJU19HRU4oZGV2X3ByaXYsIDYpICYmICFJU19JVllCUklER0UoZGV2X3By
aXYpKTsKLQkJcmV0dXJuIFBDSF9DUFQ7Ci0JY2FzZSBJTlRFTF9QQ0hfUFBUX0RFVklDRV9JRF9U
WVBFOgotCQlEUk1fREVCVUdfS01TKCJGb3VuZCBQYW50aGVyUG9pbnQgUENIXG4iKTsKLQkJV0FS
Tl9PTighSVNfR0VOKGRldl9wcml2LCA2KSAmJiAhSVNfSVZZQlJJREdFKGRldl9wcml2KSk7Ci0J
CS8qIFBhbnRoZXJQb2ludCBpcyBDUFQgY29tcGF0aWJsZSAqLwotCQlyZXR1cm4gUENIX0NQVDsK
LQljYXNlIElOVEVMX1BDSF9MUFRfREVWSUNFX0lEX1RZUEU6Ci0JCURSTV9ERUJVR19LTVMoIkZv
dW5kIEx5bnhQb2ludCBQQ0hcbiIpOwotCQlXQVJOX09OKCFJU19IQVNXRUxMKGRldl9wcml2KSAm
JiAhSVNfQlJPQURXRUxMKGRldl9wcml2KSk7Ci0JCVdBUk5fT04oSVNfSFNXX1VMVChkZXZfcHJp
dikgfHwgSVNfQkRXX1VMVChkZXZfcHJpdikpOwotCQlyZXR1cm4gUENIX0xQVDsKLQljYXNlIElO
VEVMX1BDSF9MUFRfTFBfREVWSUNFX0lEX1RZUEU6Ci0JCURSTV9ERUJVR19LTVMoIkZvdW5kIEx5
bnhQb2ludCBMUCBQQ0hcbiIpOwotCQlXQVJOX09OKCFJU19IQVNXRUxMKGRldl9wcml2KSAmJiAh
SVNfQlJPQURXRUxMKGRldl9wcml2KSk7Ci0JCVdBUk5fT04oIUlTX0hTV19VTFQoZGV2X3ByaXYp
ICYmICFJU19CRFdfVUxUKGRldl9wcml2KSk7Ci0JCXJldHVybiBQQ0hfTFBUOwotCWNhc2UgSU5U
RUxfUENIX1dQVF9ERVZJQ0VfSURfVFlQRToKLQkJRFJNX0RFQlVHX0tNUygiRm91bmQgV2lsZGNh
dFBvaW50IFBDSFxuIik7Ci0JCVdBUk5fT04oIUlTX0hBU1dFTEwoZGV2X3ByaXYpICYmICFJU19C
Uk9BRFdFTEwoZGV2X3ByaXYpKTsKLQkJV0FSTl9PTihJU19IU1dfVUxUKGRldl9wcml2KSB8fCBJ
U19CRFdfVUxUKGRldl9wcml2KSk7Ci0JCS8qIFdpbGRjYXRQb2ludCBpcyBMUFQgY29tcGF0aWJs
ZSAqLwotCQlyZXR1cm4gUENIX0xQVDsKLQljYXNlIElOVEVMX1BDSF9XUFRfTFBfREVWSUNFX0lE
X1RZUEU6Ci0JCURSTV9ERUJVR19LTVMoIkZvdW5kIFdpbGRjYXRQb2ludCBMUCBQQ0hcbiIpOwot
CQlXQVJOX09OKCFJU19IQVNXRUxMKGRldl9wcml2KSAmJiAhSVNfQlJPQURXRUxMKGRldl9wcml2
KSk7Ci0JCVdBUk5fT04oIUlTX0hTV19VTFQoZGV2X3ByaXYpICYmICFJU19CRFdfVUxUKGRldl9w
cml2KSk7Ci0JCS8qIFdpbGRjYXRQb2ludCBpcyBMUFQgY29tcGF0aWJsZSAqLwotCQlyZXR1cm4g
UENIX0xQVDsKLQljYXNlIElOVEVMX1BDSF9TUFRfREVWSUNFX0lEX1RZUEU6Ci0JCURSTV9ERUJV
R19LTVMoIkZvdW5kIFN1bnJpc2VQb2ludCBQQ0hcbiIpOwotCQlXQVJOX09OKCFJU19TS1lMQUtF
KGRldl9wcml2KSAmJiAhSVNfS0FCWUxBS0UoZGV2X3ByaXYpKTsKLQkJcmV0dXJuIFBDSF9TUFQ7
Ci0JY2FzZSBJTlRFTF9QQ0hfU1BUX0xQX0RFVklDRV9JRF9UWVBFOgotCQlEUk1fREVCVUdfS01T
KCJGb3VuZCBTdW5yaXNlUG9pbnQgTFAgUENIXG4iKTsKLQkJV0FSTl9PTighSVNfU0tZTEFLRShk
ZXZfcHJpdikgJiYgIUlTX0tBQllMQUtFKGRldl9wcml2KSk7Ci0JCXJldHVybiBQQ0hfU1BUOwot
CWNhc2UgSU5URUxfUENIX0tCUF9ERVZJQ0VfSURfVFlQRToKLQkJRFJNX0RFQlVHX0tNUygiRm91
bmQgS2FieSBMYWtlIFBDSCAoS0JQKVxuIik7Ci0JCVdBUk5fT04oIUlTX1NLWUxBS0UoZGV2X3By
aXYpICYmICFJU19LQUJZTEFLRShkZXZfcHJpdikgJiYKLQkJCSFJU19DT0ZGRUVMQUtFKGRldl9w
cml2KSk7Ci0JCS8qIEtCUCBpcyBTUFQgY29tcGF0aWJsZSAqLwotCQlyZXR1cm4gUENIX1NQVDsK
LQljYXNlIElOVEVMX1BDSF9DTlBfREVWSUNFX0lEX1RZUEU6Ci0JCURSTV9ERUJVR19LTVMoIkZv
dW5kIENhbm5vbiBMYWtlIFBDSCAoQ05QKVxuIik7Ci0JCVdBUk5fT04oIUlTX0NBTk5PTkxBS0Uo
ZGV2X3ByaXYpICYmICFJU19DT0ZGRUVMQUtFKGRldl9wcml2KSk7Ci0JCXJldHVybiBQQ0hfQ05Q
OwotCWNhc2UgSU5URUxfUENIX0NOUF9MUF9ERVZJQ0VfSURfVFlQRToKLQkJRFJNX0RFQlVHX0tN
UygiRm91bmQgQ2Fubm9uIExha2UgTFAgUENIIChDTlAtTFApXG4iKTsKLQkJV0FSTl9PTighSVNf
Q0FOTk9OTEFLRShkZXZfcHJpdikgJiYgIUlTX0NPRkZFRUxBS0UoZGV2X3ByaXYpKTsKLQkJcmV0
dXJuIFBDSF9DTlA7Ci0JY2FzZSBJTlRFTF9QQ0hfQ01QX0RFVklDRV9JRF9UWVBFOgotCQlEUk1f
REVCVUdfS01TKCJGb3VuZCBDb21ldCBMYWtlIFBDSCAoQ01QKVxuIik7Ci0JCVdBUk5fT04oIUlT
X0NPRkZFRUxBS0UoZGV2X3ByaXYpKTsKLQkJLyogQ29tZXRQb2ludCBpcyBDTlAgQ29tcGF0aWJs
ZSAqLwotCQlyZXR1cm4gUENIX0NOUDsKLQljYXNlIElOVEVMX1BDSF9JQ1BfREVWSUNFX0lEX1RZ
UEU6Ci0JCURSTV9ERUJVR19LTVMoIkZvdW5kIEljZSBMYWtlIFBDSFxuIik7Ci0JCVdBUk5fT04o
IUlTX0lDRUxBS0UoZGV2X3ByaXYpKTsKLQkJcmV0dXJuIFBDSF9JQ1A7Ci0JY2FzZSBJTlRFTF9Q
Q0hfTUNDX0RFVklDRV9JRF9UWVBFOgotCWNhc2UgSU5URUxfUENIX01DQzJfREVWSUNFX0lEX1RZ
UEU6Ci0JCURSTV9ERUJVR19LTVMoIkZvdW5kIE11bGUgQ3JlZWsgQ2FueW9uIFBDSFxuIik7Ci0J
CVdBUk5fT04oIUlTX0VMS0hBUlRMQUtFKGRldl9wcml2KSk7Ci0JCXJldHVybiBQQ0hfTUNDOwot
CWNhc2UgSU5URUxfUENIX1RHUF9ERVZJQ0VfSURfVFlQRToKLQkJRFJNX0RFQlVHX0tNUygiRm91
bmQgVGlnZXIgTGFrZSBMUCBQQ0hcbiIpOwotCQlXQVJOX09OKCFJU19USUdFUkxBS0UoZGV2X3By
aXYpKTsKLQkJcmV0dXJuIFBDSF9UR1A7Ci0JZGVmYXVsdDoKLQkJcmV0dXJuIFBDSF9OT05FOwot
CX0KLX0KLQotc3RhdGljIGJvb2wgaW50ZWxfaXNfdmlydF9wY2godW5zaWduZWQgc2hvcnQgaWQs
Ci0JCQkgICAgICB1bnNpZ25lZCBzaG9ydCBzdmVuZG9yLCB1bnNpZ25lZCBzaG9ydCBzZGV2aWNl
KQotewotCXJldHVybiAoaWQgPT0gSU5URUxfUENIX1AyWF9ERVZJQ0VfSURfVFlQRSB8fAotCQlp
ZCA9PSBJTlRFTF9QQ0hfUDNYX0RFVklDRV9JRF9UWVBFIHx8Ci0JCShpZCA9PSBJTlRFTF9QQ0hf
UUVNVV9ERVZJQ0VfSURfVFlQRSAmJgotCQkgc3ZlbmRvciA9PSBQQ0lfU1VCVkVORE9SX0lEX1JF
REhBVF9RVU1SQU5FVCAmJgotCQkgc2RldmljZSA9PSBQQ0lfU1VCREVWSUNFX0lEX1FFTVUpKTsK
LX0KLQotc3RhdGljIHVuc2lnbmVkIHNob3J0Ci1pbnRlbF92aXJ0X2RldGVjdF9wY2goY29uc3Qg
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQotewotCXVuc2lnbmVkIHNob3J0IGlk
ID0gMDsKLQotCS8qCi0JICogSW4gYSB2aXJ0dWFsaXplZCBwYXNzdGhyb3VnaCBlbnZpcm9ubWVu
dCB3ZSBjYW4gYmUgaW4gYQotCSAqIHNldHVwIHdoZXJlIHRoZSBJU0EgYnJpZGdlIGlzIG5vdCBh
YmxlIHRvIGJlIHBhc3NlZCB0aHJvdWdoLgotCSAqIEluIHRoaXMgY2FzZSwgYSBzb3V0aCBicmlk
Z2UgY2FuIGJlIGVtdWxhdGVkIGFuZCB3ZSBoYXZlIHRvCi0JICogbWFrZSBhbiBlZHVjYXRlZCBn
dWVzcyBhcyB0byB3aGljaCBQQ0ggaXMgcmVhbGx5IHRoZXJlLgotCSAqLwotCi0JaWYgKElTX1RJ
R0VSTEFLRShkZXZfcHJpdikpCi0JCWlkID0gSU5URUxfUENIX1RHUF9ERVZJQ0VfSURfVFlQRTsK
LQllbHNlIGlmIChJU19FTEtIQVJUTEFLRShkZXZfcHJpdikpCi0JCWlkID0gSU5URUxfUENIX01D
Q19ERVZJQ0VfSURfVFlQRTsKLQllbHNlIGlmIChJU19JQ0VMQUtFKGRldl9wcml2KSkKLQkJaWQg
PSBJTlRFTF9QQ0hfSUNQX0RFVklDRV9JRF9UWVBFOwotCWVsc2UgaWYgKElTX0NBTk5PTkxBS0Uo
ZGV2X3ByaXYpIHx8IElTX0NPRkZFRUxBS0UoZGV2X3ByaXYpKQotCQlpZCA9IElOVEVMX1BDSF9D
TlBfREVWSUNFX0lEX1RZUEU7Ci0JZWxzZSBpZiAoSVNfS0FCWUxBS0UoZGV2X3ByaXYpIHx8IElT
X1NLWUxBS0UoZGV2X3ByaXYpKQotCQlpZCA9IElOVEVMX1BDSF9TUFRfREVWSUNFX0lEX1RZUEU7
Ci0JZWxzZSBpZiAoSVNfSFNXX1VMVChkZXZfcHJpdikgfHwgSVNfQkRXX1VMVChkZXZfcHJpdikp
Ci0JCWlkID0gSU5URUxfUENIX0xQVF9MUF9ERVZJQ0VfSURfVFlQRTsKLQllbHNlIGlmIChJU19I
QVNXRUxMKGRldl9wcml2KSB8fCBJU19CUk9BRFdFTEwoZGV2X3ByaXYpKQotCQlpZCA9IElOVEVM
X1BDSF9MUFRfREVWSUNFX0lEX1RZUEU7Ci0JZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCA2KSB8
fCBJU19JVllCUklER0UoZGV2X3ByaXYpKQotCQlpZCA9IElOVEVMX1BDSF9DUFRfREVWSUNFX0lE
X1RZUEU7Ci0JZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCA1KSkKLQkJaWQgPSBJTlRFTF9QQ0hf
SUJYX0RFVklDRV9JRF9UWVBFOwotCi0JaWYgKGlkKQotCQlEUk1fREVCVUdfS01TKCJBc3N1bWlu
ZyBQQ0ggSUQgJTA0eFxuIiwgaWQpOwotCWVsc2UKLQkJRFJNX0RFQlVHX0tNUygiQXNzdW1pbmcg
bm8gUENIXG4iKTsKLQotCXJldHVybiBpZDsKLX0KLQotc3RhdGljIHZvaWQgaW50ZWxfZGV0ZWN0
X3BjaChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCi17Ci0Jc3RydWN0IHBjaV9k
ZXYgKnBjaCA9IE5VTEw7Ci0KLQkvKgotCSAqIFRoZSByZWFzb24gdG8gcHJvYmUgSVNBIGJyaWRn
ZSBpbnN0ZWFkIG9mIERldjMxOkZ1bjAgaXMgdG8KLQkgKiBtYWtlIGdyYXBoaWNzIGRldmljZSBw
YXNzdGhyb3VnaCB3b3JrIGVhc3kgZm9yIFZNTSwgdGhhdCBvbmx5Ci0JICogbmVlZCB0byBleHBv
c2UgSVNBIGJyaWRnZSB0byBsZXQgZHJpdmVyIGtub3cgdGhlIHJlYWwgaGFyZHdhcmUKLQkgKiB1
bmRlcm5lYXRoLiBUaGlzIGlzIGEgcmVxdWlyZW1lbnQgZnJvbSB2aXJ0dWFsaXphdGlvbiB0ZWFt
LgotCSAqCi0JICogSW4gc29tZSB2aXJ0dWFsaXplZCBlbnZpcm9ubWVudHMgKGUuZy4gWEVOKSwg
dGhlcmUgaXMgaXJyZWxldmFudAotCSAqIElTQSBicmlkZ2UgaW4gdGhlIHN5c3RlbS4gVG8gd29y
ayByZWxpYWJseSwgd2Ugc2hvdWxkIHNjYW4gdHJob3VnaAotCSAqIGFsbCB0aGUgSVNBIGJyaWRn
ZSBkZXZpY2VzIGFuZCBjaGVjayBmb3IgdGhlIGZpcnN0IG1hdGNoLCBpbnN0ZWFkCi0JICogb2Yg
b25seSBjaGVja2luZyB0aGUgZmlyc3Qgb25lLgotCSAqLwotCXdoaWxlICgocGNoID0gcGNpX2dl
dF9jbGFzcyhQQ0lfQ0xBU1NfQlJJREdFX0lTQSA8PCA4LCBwY2gpKSkgewotCQl1bnNpZ25lZCBz
aG9ydCBpZDsKLQkJZW51bSBpbnRlbF9wY2ggcGNoX3R5cGU7Ci0KLQkJaWYgKHBjaC0+dmVuZG9y
ICE9IFBDSV9WRU5ET1JfSURfSU5URUwpCi0JCQljb250aW51ZTsKLQotCQlpZCA9IHBjaC0+ZGV2
aWNlICYgSU5URUxfUENIX0RFVklDRV9JRF9NQVNLOwotCi0JCXBjaF90eXBlID0gaW50ZWxfcGNo
X3R5cGUoZGV2X3ByaXYsIGlkKTsKLQkJaWYgKHBjaF90eXBlICE9IFBDSF9OT05FKSB7Ci0JCQlk
ZXZfcHJpdi0+cGNoX3R5cGUgPSBwY2hfdHlwZTsKLQkJCWRldl9wcml2LT5wY2hfaWQgPSBpZDsK
LQkJCWJyZWFrOwotCQl9IGVsc2UgaWYgKGludGVsX2lzX3ZpcnRfcGNoKGlkLCBwY2gtPnN1YnN5
c3RlbV92ZW5kb3IsCi0JCQkJCSBwY2gtPnN1YnN5c3RlbV9kZXZpY2UpKSB7Ci0JCQlpZCA9IGlu
dGVsX3ZpcnRfZGV0ZWN0X3BjaChkZXZfcHJpdik7Ci0JCQlwY2hfdHlwZSA9IGludGVsX3BjaF90
eXBlKGRldl9wcml2LCBpZCk7Ci0KLQkJCS8qIFNhbml0eSBjaGVjayB2aXJ0dWFsIFBDSCBpZCAq
LwotCQkJaWYgKFdBUk5fT04oaWQgJiYgcGNoX3R5cGUgPT0gUENIX05PTkUpKQotCQkJCWlkID0g
MDsKLQotCQkJZGV2X3ByaXYtPnBjaF90eXBlID0gcGNoX3R5cGU7Ci0JCQlkZXZfcHJpdi0+cGNo
X2lkID0gaWQ7Ci0JCQlicmVhazsKLQkJfQotCX0KLQotCS8qCi0JICogVXNlIFBDSF9OT1AgKFBD
SCBidXQgbm8gU291dGggRGlzcGxheSkgZm9yIFBDSCBwbGF0Zm9ybXMgd2l0aG91dAotCSAqIGRp
c3BsYXkuCi0JICovCi0JaWYgKHBjaCAmJiAhSEFTX0RJU1BMQVkoZGV2X3ByaXYpKSB7Ci0JCURS
TV9ERUJVR19LTVMoIkRpc3BsYXkgZGlzYWJsZWQsIHJldmVydGluZyB0byBOT1AgUENIXG4iKTsK
LQkJZGV2X3ByaXYtPnBjaF90eXBlID0gUENIX05PUDsKLQkJZGV2X3ByaXYtPnBjaF9pZCA9IDA7
Ci0JfQotCi0JaWYgKCFwY2gpCi0JCURSTV9ERUJVR19LTVMoIk5vIFBDSCBmb3VuZC5cbiIpOwot
Ci0JcGNpX2Rldl9wdXQocGNoKTsKLX0KLQogc3RhdGljIGludCBpOTE1X2dldHBhcmFtX2lvY3Rs
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJCQkgICAgICAgc3RydWN0IGRy
bV9maWxlICpmaWxlX3ByaXYpCiB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRleCA3ZDQyNGRk
ZDM1MjMuLjQzYjBkMTQ5ZDExNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBAIC03Nyw2ICs3
Nyw3IEBACiAjaW5jbHVkZSAiZ3QvdWMvaW50ZWxfdWMuaCIKIAogI2luY2x1ZGUgImludGVsX2Rl
dmljZV9pbmZvLmgiCisjaW5jbHVkZSAiaW50ZWxfcGNoLmgiCiAjaW5jbHVkZSAiaW50ZWxfcnVu
dGltZV9wbS5oIgogI2luY2x1ZGUgImludGVsX3VuY29yZS5oIgogI2luY2x1ZGUgImludGVsX3dh
a2VyZWYuaCIKQEAgLTUyOCwyNSArNTI5LDYgQEAgc3RydWN0IGk5MTVfcHNyIHsKIAl1MTYgc3Vf
eF9ncmFudWxhcml0eTsKIH07CiAKLS8qCi0gKiBTb3J0ZWQgYnkgc291dGggZGlzcGxheSBlbmdp
bmUgY29tcGF0aWJpbGl0eS4KLSAqIElmIHRoZSBuZXcgUENIIGNvbWVzIHdpdGggYSBzb3V0aCBk
aXNwbGF5IGVuZ2luZSB0aGF0IGlzIG5vdAotICogaW5oZXJpdGVkIGZyb20gdGhlIGxhdGVzdCBp
dGVtLCBwbGVhc2UgZG8gbm90IGFkZCBpdCB0byB0aGUKLSAqIGVuZC4gSW5zdGVhZCwgYWRkIGl0
IHJpZ2h0IGFmdGVyIGl0cyAicGFyZW50IiBQQ0guCi0gKi8KLWVudW0gaW50ZWxfcGNoIHsKLQlQ
Q0hfTk9QID0gLTEsCS8qIFBDSCB3aXRob3V0IHNvdXRoIGRpc3BsYXkgKi8KLQlQQ0hfTk9ORSA9
IDAsCS8qIE5vIFBDSCBwcmVzZW50ICovCi0JUENIX0lCWCwJLyogSWJleHBlYWsgUENIICovCi0J
UENIX0NQVCwJLyogQ291Z2FycG9pbnQvUGFudGhlcnBvaW50IFBDSCAqLwotCVBDSF9MUFQsCS8q
IEx5bnhwb2ludC9XaWxkY2F0cG9pbnQgUENIICovCi0JUENIX1NQVCwgICAgICAgIC8qIFN1bnJp
c2Vwb2ludC9LYWJ5IExha2UgUENIICovCi0JUENIX0NOUCwgICAgICAgIC8qIENhbm5vbi9Db21l
dCBMYWtlIFBDSCAqLwotCVBDSF9JQ1AsCS8qIEljZSBMYWtlIFBDSCAqLwotCVBDSF9NQ0MsICAg
ICAgICAvKiBNdWxlIENyZWVrIENhbnlvbiBQQ0ggKi8KLQlQQ0hfVEdQLAkvKiBUaWdlciBMYWtl
IFBDSCAqLwotfTsKLQogI2RlZmluZSBRVUlSS19MVkRTX1NTQ19ESVNBQkxFICgxPDwxKQogI2Rl
ZmluZSBRVUlSS19JTlZFUlRfQlJJR0hUTkVTUyAoMTw8MikKICNkZWZpbmUgUVVJUktfQkFDS0xJ
R0hUX1BSRVNFTlQgKDE8PDMpCkBAIC0yMjkxLDQ2ICsyMjczLDYgQEAgSVNfU1VCUExBVEZPUk0o
Y29uc3Qgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAKICNkZWZpbmUgSEFTX0dMT0JB
TF9NT0NTX1JFR0lTVEVSUyhkZXZfcHJpdikJKElOVEVMX0lORk8oZGV2X3ByaXYpLT5oYXNfZ2xv
YmFsX21vY3MpCiAKLSNkZWZpbmUgSU5URUxfUENIX0RFVklDRV9JRF9NQVNLCQkweGZmODAKLSNk
ZWZpbmUgSU5URUxfUENIX0lCWF9ERVZJQ0VfSURfVFlQRQkJMHgzYjAwCi0jZGVmaW5lIElOVEVM
X1BDSF9DUFRfREVWSUNFX0lEX1RZUEUJCTB4MWMwMAotI2RlZmluZSBJTlRFTF9QQ0hfUFBUX0RF
VklDRV9JRF9UWVBFCQkweDFlMDAKLSNkZWZpbmUgSU5URUxfUENIX0xQVF9ERVZJQ0VfSURfVFlQ
RQkJMHg4YzAwCi0jZGVmaW5lIElOVEVMX1BDSF9MUFRfTFBfREVWSUNFX0lEX1RZUEUJCTB4OWMw
MAotI2RlZmluZSBJTlRFTF9QQ0hfV1BUX0RFVklDRV9JRF9UWVBFCQkweDhjODAKLSNkZWZpbmUg
SU5URUxfUENIX1dQVF9MUF9ERVZJQ0VfSURfVFlQRQkJMHg5YzgwCi0jZGVmaW5lIElOVEVMX1BD
SF9TUFRfREVWSUNFX0lEX1RZUEUJCTB4QTEwMAotI2RlZmluZSBJTlRFTF9QQ0hfU1BUX0xQX0RF
VklDRV9JRF9UWVBFCQkweDlEMDAKLSNkZWZpbmUgSU5URUxfUENIX0tCUF9ERVZJQ0VfSURfVFlQ
RQkJMHhBMjgwCi0jZGVmaW5lIElOVEVMX1BDSF9DTlBfREVWSUNFX0lEX1RZUEUJCTB4QTMwMAot
I2RlZmluZSBJTlRFTF9QQ0hfQ05QX0xQX0RFVklDRV9JRF9UWVBFCQkweDlEODAKLSNkZWZpbmUg
SU5URUxfUENIX0NNUF9ERVZJQ0VfSURfVFlQRQkJMHgwMjgwCi0jZGVmaW5lIElOVEVMX1BDSF9J
Q1BfREVWSUNFX0lEX1RZUEUJCTB4MzQ4MAotI2RlZmluZSBJTlRFTF9QQ0hfTUNDX0RFVklDRV9J
RF9UWVBFCQkweDRCMDAKLSNkZWZpbmUgSU5URUxfUENIX01DQzJfREVWSUNFX0lEX1RZUEUJCTB4
Mzg4MAotI2RlZmluZSBJTlRFTF9QQ0hfVEdQX0RFVklDRV9JRF9UWVBFCQkweEEwODAKLSNkZWZp
bmUgSU5URUxfUENIX1AyWF9ERVZJQ0VfSURfVFlQRQkJMHg3MTAwCi0jZGVmaW5lIElOVEVMX1BD
SF9QM1hfREVWSUNFX0lEX1RZUEUJCTB4NzAwMAotI2RlZmluZSBJTlRFTF9QQ0hfUUVNVV9ERVZJ
Q0VfSURfVFlQRQkJMHgyOTAwIC8qIHFlbXUgcTM1IGhhcyAyOTE4ICovCi0KLSNkZWZpbmUgSU5U
RUxfUENIX1RZUEUoZGV2X3ByaXYpICgoZGV2X3ByaXYpLT5wY2hfdHlwZSkKLSNkZWZpbmUgSU5U
RUxfUENIX0lEKGRldl9wcml2KSAoKGRldl9wcml2KS0+cGNoX2lkKQotI2RlZmluZSBIQVNfUENI
X01DQyhkZXZfcHJpdikgKElOVEVMX1BDSF9UWVBFKGRldl9wcml2KSA9PSBQQ0hfTUNDKQotI2Rl
ZmluZSBIQVNfUENIX1RHUChkZXZfcHJpdikgKElOVEVMX1BDSF9UWVBFKGRldl9wcml2KSA9PSBQ
Q0hfVEdQKQotI2RlZmluZSBIQVNfUENIX0lDUChkZXZfcHJpdikgKElOVEVMX1BDSF9UWVBFKGRl
dl9wcml2KSA9PSBQQ0hfSUNQKQotI2RlZmluZSBIQVNfUENIX0NOUChkZXZfcHJpdikgKElOVEVM
X1BDSF9UWVBFKGRldl9wcml2KSA9PSBQQ0hfQ05QKQotI2RlZmluZSBIQVNfUENIX1NQVChkZXZf
cHJpdikgKElOVEVMX1BDSF9UWVBFKGRldl9wcml2KSA9PSBQQ0hfU1BUKQotI2RlZmluZSBIQVNf
UENIX0xQVChkZXZfcHJpdikgKElOVEVMX1BDSF9UWVBFKGRldl9wcml2KSA9PSBQQ0hfTFBUKQot
I2RlZmluZSBIQVNfUENIX0xQVF9MUChkZXZfcHJpdikgXAotCShJTlRFTF9QQ0hfSUQoZGV2X3By
aXYpID09IElOVEVMX1BDSF9MUFRfTFBfREVWSUNFX0lEX1RZUEUgfHwgXAotCSBJTlRFTF9QQ0hf
SUQoZGV2X3ByaXYpID09IElOVEVMX1BDSF9XUFRfTFBfREVWSUNFX0lEX1RZUEUpCi0jZGVmaW5l
IEhBU19QQ0hfTFBUX0goZGV2X3ByaXYpIFwKLQkoSU5URUxfUENIX0lEKGRldl9wcml2KSA9PSBJ
TlRFTF9QQ0hfTFBUX0RFVklDRV9JRF9UWVBFIHx8IFwKLQkgSU5URUxfUENIX0lEKGRldl9wcml2
KSA9PSBJTlRFTF9QQ0hfV1BUX0RFVklDRV9JRF9UWVBFKQotI2RlZmluZSBIQVNfUENIX0NQVChk
ZXZfcHJpdikgKElOVEVMX1BDSF9UWVBFKGRldl9wcml2KSA9PSBQQ0hfQ1BUKQotI2RlZmluZSBI
QVNfUENIX0lCWChkZXZfcHJpdikgKElOVEVMX1BDSF9UWVBFKGRldl9wcml2KSA9PSBQQ0hfSUJY
KQotI2RlZmluZSBIQVNfUENIX05PUChkZXZfcHJpdikgKElOVEVMX1BDSF9UWVBFKGRldl9wcml2
KSA9PSBQQ0hfTk9QKQotI2RlZmluZSBIQVNfUENIX1NQTElUKGRldl9wcml2KSAoSU5URUxfUENI
X1RZUEUoZGV2X3ByaXYpICE9IFBDSF9OT05FKQogCiAjZGVmaW5lIEhBU19HTUNIKGRldl9wcml2
KSAoSU5URUxfSU5GTyhkZXZfcHJpdiktPmRpc3BsYXkuaGFzX2dtY2gpCiAKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BjaC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfcGNoLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5mYTg2
NGQ4ZjJiNzMKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9w
Y2guYwpAQCAtMCwwICsxLDIwMSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVAor
LyoKKyAqIENvcHlyaWdodCAyMDE5IEludGVsIENvcnBvcmF0aW9uLgorICovCisKKyNpbmNsdWRl
ICJpOTE1X2Rydi5oIgorI2luY2x1ZGUgImludGVsX3BjaC5oIgorCisvKiBNYXAgUENIIGRldmlj
ZSBpZCB0byBQQ0ggdHlwZSwgb3IgUENIX05PTkUgaWYgdW5rbm93bi4gKi8KK3N0YXRpYyBlbnVt
IGludGVsX3BjaAoraW50ZWxfcGNoX3R5cGUoY29uc3Qgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2LCB1bnNpZ25lZCBzaG9ydCBpZCkKK3sKKwlzd2l0Y2ggKGlkKSB7CisJY2FzZSBJ
TlRFTF9QQ0hfSUJYX0RFVklDRV9JRF9UWVBFOgorCQlEUk1fREVCVUdfS01TKCJGb3VuZCBJYmV4
IFBlYWsgUENIXG4iKTsKKwkJV0FSTl9PTighSVNfR0VOKGRldl9wcml2LCA1KSk7CisJCXJldHVy
biBQQ0hfSUJYOworCWNhc2UgSU5URUxfUENIX0NQVF9ERVZJQ0VfSURfVFlQRToKKwkJRFJNX0RF
QlVHX0tNUygiRm91bmQgQ291Z2FyUG9pbnQgUENIXG4iKTsKKwkJV0FSTl9PTighSVNfR0VOKGRl
dl9wcml2LCA2KSAmJiAhSVNfSVZZQlJJREdFKGRldl9wcml2KSk7CisJCXJldHVybiBQQ0hfQ1BU
OworCWNhc2UgSU5URUxfUENIX1BQVF9ERVZJQ0VfSURfVFlQRToKKwkJRFJNX0RFQlVHX0tNUygi
Rm91bmQgUGFudGhlclBvaW50IFBDSFxuIik7CisJCVdBUk5fT04oIUlTX0dFTihkZXZfcHJpdiwg
NikgJiYgIUlTX0lWWUJSSURHRShkZXZfcHJpdikpOworCQkvKiBQYW50aGVyUG9pbnQgaXMgQ1BU
IGNvbXBhdGlibGUgKi8KKwkJcmV0dXJuIFBDSF9DUFQ7CisJY2FzZSBJTlRFTF9QQ0hfTFBUX0RF
VklDRV9JRF9UWVBFOgorCQlEUk1fREVCVUdfS01TKCJGb3VuZCBMeW54UG9pbnQgUENIXG4iKTsK
KwkJV0FSTl9PTighSVNfSEFTV0VMTChkZXZfcHJpdikgJiYgIUlTX0JST0FEV0VMTChkZXZfcHJp
dikpOworCQlXQVJOX09OKElTX0hTV19VTFQoZGV2X3ByaXYpIHx8IElTX0JEV19VTFQoZGV2X3By
aXYpKTsKKwkJcmV0dXJuIFBDSF9MUFQ7CisJY2FzZSBJTlRFTF9QQ0hfTFBUX0xQX0RFVklDRV9J
RF9UWVBFOgorCQlEUk1fREVCVUdfS01TKCJGb3VuZCBMeW54UG9pbnQgTFAgUENIXG4iKTsKKwkJ
V0FSTl9PTighSVNfSEFTV0VMTChkZXZfcHJpdikgJiYgIUlTX0JST0FEV0VMTChkZXZfcHJpdikp
OworCQlXQVJOX09OKCFJU19IU1dfVUxUKGRldl9wcml2KSAmJiAhSVNfQkRXX1VMVChkZXZfcHJp
dikpOworCQlyZXR1cm4gUENIX0xQVDsKKwljYXNlIElOVEVMX1BDSF9XUFRfREVWSUNFX0lEX1RZ
UEU6CisJCURSTV9ERUJVR19LTVMoIkZvdW5kIFdpbGRjYXRQb2ludCBQQ0hcbiIpOworCQlXQVJO
X09OKCFJU19IQVNXRUxMKGRldl9wcml2KSAmJiAhSVNfQlJPQURXRUxMKGRldl9wcml2KSk7CisJ
CVdBUk5fT04oSVNfSFNXX1VMVChkZXZfcHJpdikgfHwgSVNfQkRXX1VMVChkZXZfcHJpdikpOwor
CQkvKiBXaWxkY2F0UG9pbnQgaXMgTFBUIGNvbXBhdGlibGUgKi8KKwkJcmV0dXJuIFBDSF9MUFQ7
CisJY2FzZSBJTlRFTF9QQ0hfV1BUX0xQX0RFVklDRV9JRF9UWVBFOgorCQlEUk1fREVCVUdfS01T
KCJGb3VuZCBXaWxkY2F0UG9pbnQgTFAgUENIXG4iKTsKKwkJV0FSTl9PTighSVNfSEFTV0VMTChk
ZXZfcHJpdikgJiYgIUlTX0JST0FEV0VMTChkZXZfcHJpdikpOworCQlXQVJOX09OKCFJU19IU1df
VUxUKGRldl9wcml2KSAmJiAhSVNfQkRXX1VMVChkZXZfcHJpdikpOworCQkvKiBXaWxkY2F0UG9p
bnQgaXMgTFBUIGNvbXBhdGlibGUgKi8KKwkJcmV0dXJuIFBDSF9MUFQ7CisJY2FzZSBJTlRFTF9Q
Q0hfU1BUX0RFVklDRV9JRF9UWVBFOgorCQlEUk1fREVCVUdfS01TKCJGb3VuZCBTdW5yaXNlUG9p
bnQgUENIXG4iKTsKKwkJV0FSTl9PTighSVNfU0tZTEFLRShkZXZfcHJpdikgJiYgIUlTX0tBQllM
QUtFKGRldl9wcml2KSk7CisJCXJldHVybiBQQ0hfU1BUOworCWNhc2UgSU5URUxfUENIX1NQVF9M
UF9ERVZJQ0VfSURfVFlQRToKKwkJRFJNX0RFQlVHX0tNUygiRm91bmQgU3VucmlzZVBvaW50IExQ
IFBDSFxuIik7CisJCVdBUk5fT04oIUlTX1NLWUxBS0UoZGV2X3ByaXYpICYmICFJU19LQUJZTEFL
RShkZXZfcHJpdikpOworCQlyZXR1cm4gUENIX1NQVDsKKwljYXNlIElOVEVMX1BDSF9LQlBfREVW
SUNFX0lEX1RZUEU6CisJCURSTV9ERUJVR19LTVMoIkZvdW5kIEthYnkgTGFrZSBQQ0ggKEtCUClc
biIpOworCQlXQVJOX09OKCFJU19TS1lMQUtFKGRldl9wcml2KSAmJiAhSVNfS0FCWUxBS0UoZGV2
X3ByaXYpICYmCisJCQkhSVNfQ09GRkVFTEFLRShkZXZfcHJpdikpOworCQkvKiBLQlAgaXMgU1BU
IGNvbXBhdGlibGUgKi8KKwkJcmV0dXJuIFBDSF9TUFQ7CisJY2FzZSBJTlRFTF9QQ0hfQ05QX0RF
VklDRV9JRF9UWVBFOgorCQlEUk1fREVCVUdfS01TKCJGb3VuZCBDYW5ub24gTGFrZSBQQ0ggKENO
UClcbiIpOworCQlXQVJOX09OKCFJU19DQU5OT05MQUtFKGRldl9wcml2KSAmJiAhSVNfQ09GRkVF
TEFLRShkZXZfcHJpdikpOworCQlyZXR1cm4gUENIX0NOUDsKKwljYXNlIElOVEVMX1BDSF9DTlBf
TFBfREVWSUNFX0lEX1RZUEU6CisJCURSTV9ERUJVR19LTVMoIkZvdW5kIENhbm5vbiBMYWtlIExQ
IFBDSCAoQ05QLUxQKVxuIik7CisJCVdBUk5fT04oIUlTX0NBTk5PTkxBS0UoZGV2X3ByaXYpICYm
ICFJU19DT0ZGRUVMQUtFKGRldl9wcml2KSk7CisJCXJldHVybiBQQ0hfQ05QOworCWNhc2UgSU5U
RUxfUENIX0NNUF9ERVZJQ0VfSURfVFlQRToKKwkJRFJNX0RFQlVHX0tNUygiRm91bmQgQ29tZXQg
TGFrZSBQQ0ggKENNUClcbiIpOworCQlXQVJOX09OKCFJU19DT0ZGRUVMQUtFKGRldl9wcml2KSk7
CisJCS8qIENvbWV0UG9pbnQgaXMgQ05QIENvbXBhdGlibGUgKi8KKwkJcmV0dXJuIFBDSF9DTlA7
CisJY2FzZSBJTlRFTF9QQ0hfSUNQX0RFVklDRV9JRF9UWVBFOgorCQlEUk1fREVCVUdfS01TKCJG
b3VuZCBJY2UgTGFrZSBQQ0hcbiIpOworCQlXQVJOX09OKCFJU19JQ0VMQUtFKGRldl9wcml2KSk7
CisJCXJldHVybiBQQ0hfSUNQOworCWNhc2UgSU5URUxfUENIX01DQ19ERVZJQ0VfSURfVFlQRToK
KwljYXNlIElOVEVMX1BDSF9NQ0MyX0RFVklDRV9JRF9UWVBFOgorCQlEUk1fREVCVUdfS01TKCJG
b3VuZCBNdWxlIENyZWVrIENhbnlvbiBQQ0hcbiIpOworCQlXQVJOX09OKCFJU19FTEtIQVJUTEFL
RShkZXZfcHJpdikpOworCQlyZXR1cm4gUENIX01DQzsKKwljYXNlIElOVEVMX1BDSF9UR1BfREVW
SUNFX0lEX1RZUEU6CisJCURSTV9ERUJVR19LTVMoIkZvdW5kIFRpZ2VyIExha2UgTFAgUENIXG4i
KTsKKwkJV0FSTl9PTighSVNfVElHRVJMQUtFKGRldl9wcml2KSk7CisJCXJldHVybiBQQ0hfVEdQ
OworCWRlZmF1bHQ6CisJCXJldHVybiBQQ0hfTk9ORTsKKwl9Cit9CisKK3N0YXRpYyBib29sIGlu
dGVsX2lzX3ZpcnRfcGNoKHVuc2lnbmVkIHNob3J0IGlkLAorCQkJICAgICAgdW5zaWduZWQgc2hv
cnQgc3ZlbmRvciwgdW5zaWduZWQgc2hvcnQgc2RldmljZSkKK3sKKwlyZXR1cm4gKGlkID09IElO
VEVMX1BDSF9QMlhfREVWSUNFX0lEX1RZUEUgfHwKKwkJaWQgPT0gSU5URUxfUENIX1AzWF9ERVZJ
Q0VfSURfVFlQRSB8fAorCQkoaWQgPT0gSU5URUxfUENIX1FFTVVfREVWSUNFX0lEX1RZUEUgJiYK
KwkJIHN2ZW5kb3IgPT0gUENJX1NVQlZFTkRPUl9JRF9SRURIQVRfUVVNUkFORVQgJiYKKwkJIHNk
ZXZpY2UgPT0gUENJX1NVQkRFVklDRV9JRF9RRU1VKSk7Cit9CisKK3N0YXRpYyB1bnNpZ25lZCBz
aG9ydAoraW50ZWxfdmlydF9kZXRlY3RfcGNoKGNvbnN0IHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdikKK3sKKwl1bnNpZ25lZCBzaG9ydCBpZCA9IDA7CisKKwkvKgorCSAqIEluIGEg
dmlydHVhbGl6ZWQgcGFzc3Rocm91Z2ggZW52aXJvbm1lbnQgd2UgY2FuIGJlIGluIGEKKwkgKiBz
ZXR1cCB3aGVyZSB0aGUgSVNBIGJyaWRnZSBpcyBub3QgYWJsZSB0byBiZSBwYXNzZWQgdGhyb3Vn
aC4KKwkgKiBJbiB0aGlzIGNhc2UsIGEgc291dGggYnJpZGdlIGNhbiBiZSBlbXVsYXRlZCBhbmQg
d2UgaGF2ZSB0bworCSAqIG1ha2UgYW4gZWR1Y2F0ZWQgZ3Vlc3MgYXMgdG8gd2hpY2ggUENIIGlz
IHJlYWxseSB0aGVyZS4KKwkgKi8KKworCWlmIChJU19USUdFUkxBS0UoZGV2X3ByaXYpKQorCQlp
ZCA9IElOVEVMX1BDSF9UR1BfREVWSUNFX0lEX1RZUEU7CisJZWxzZSBpZiAoSVNfRUxLSEFSVExB
S0UoZGV2X3ByaXYpKQorCQlpZCA9IElOVEVMX1BDSF9NQ0NfREVWSUNFX0lEX1RZUEU7CisJZWxz
ZSBpZiAoSVNfSUNFTEFLRShkZXZfcHJpdikpCisJCWlkID0gSU5URUxfUENIX0lDUF9ERVZJQ0Vf
SURfVFlQRTsKKwllbHNlIGlmIChJU19DQU5OT05MQUtFKGRldl9wcml2KSB8fCBJU19DT0ZGRUVM
QUtFKGRldl9wcml2KSkKKwkJaWQgPSBJTlRFTF9QQ0hfQ05QX0RFVklDRV9JRF9UWVBFOworCWVs
c2UgaWYgKElTX0tBQllMQUtFKGRldl9wcml2KSB8fCBJU19TS1lMQUtFKGRldl9wcml2KSkKKwkJ
aWQgPSBJTlRFTF9QQ0hfU1BUX0RFVklDRV9JRF9UWVBFOworCWVsc2UgaWYgKElTX0hTV19VTFQo
ZGV2X3ByaXYpIHx8IElTX0JEV19VTFQoZGV2X3ByaXYpKQorCQlpZCA9IElOVEVMX1BDSF9MUFRf
TFBfREVWSUNFX0lEX1RZUEU7CisJZWxzZSBpZiAoSVNfSEFTV0VMTChkZXZfcHJpdikgfHwgSVNf
QlJPQURXRUxMKGRldl9wcml2KSkKKwkJaWQgPSBJTlRFTF9QQ0hfTFBUX0RFVklDRV9JRF9UWVBF
OworCWVsc2UgaWYgKElTX0dFTihkZXZfcHJpdiwgNikgfHwgSVNfSVZZQlJJREdFKGRldl9wcml2
KSkKKwkJaWQgPSBJTlRFTF9QQ0hfQ1BUX0RFVklDRV9JRF9UWVBFOworCWVsc2UgaWYgKElTX0dF
TihkZXZfcHJpdiwgNSkpCisJCWlkID0gSU5URUxfUENIX0lCWF9ERVZJQ0VfSURfVFlQRTsKKwor
CWlmIChpZCkKKwkJRFJNX0RFQlVHX0tNUygiQXNzdW1pbmcgUENIIElEICUwNHhcbiIsIGlkKTsK
KwllbHNlCisJCURSTV9ERUJVR19LTVMoIkFzc3VtaW5nIG5vIFBDSFxuIik7CisKKwlyZXR1cm4g
aWQ7Cit9CisKK3ZvaWQgaW50ZWxfZGV0ZWN0X3BjaChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpCit7CisJc3RydWN0IHBjaV9kZXYgKnBjaCA9IE5VTEw7CisKKwkvKgorCSAqIFRo
ZSByZWFzb24gdG8gcHJvYmUgSVNBIGJyaWRnZSBpbnN0ZWFkIG9mIERldjMxOkZ1bjAgaXMgdG8K
KwkgKiBtYWtlIGdyYXBoaWNzIGRldmljZSBwYXNzdGhyb3VnaCB3b3JrIGVhc3kgZm9yIFZNTSwg
dGhhdCBvbmx5CisJICogbmVlZCB0byBleHBvc2UgSVNBIGJyaWRnZSB0byBsZXQgZHJpdmVyIGtu
b3cgdGhlIHJlYWwgaGFyZHdhcmUKKwkgKiB1bmRlcm5lYXRoLiBUaGlzIGlzIGEgcmVxdWlyZW1l
bnQgZnJvbSB2aXJ0dWFsaXphdGlvbiB0ZWFtLgorCSAqCisJICogSW4gc29tZSB2aXJ0dWFsaXpl
ZCBlbnZpcm9ubWVudHMgKGUuZy4gWEVOKSwgdGhlcmUgaXMgaXJyZWxldmFudAorCSAqIElTQSBi
cmlkZ2UgaW4gdGhlIHN5c3RlbS4gVG8gd29yayByZWxpYWJseSwgd2Ugc2hvdWxkIHNjYW4gdHJo
b3VnaAorCSAqIGFsbCB0aGUgSVNBIGJyaWRnZSBkZXZpY2VzIGFuZCBjaGVjayBmb3IgdGhlIGZp
cnN0IG1hdGNoLCBpbnN0ZWFkCisJICogb2Ygb25seSBjaGVja2luZyB0aGUgZmlyc3Qgb25lLgor
CSAqLworCXdoaWxlICgocGNoID0gcGNpX2dldF9jbGFzcyhQQ0lfQ0xBU1NfQlJJREdFX0lTQSA8
PCA4LCBwY2gpKSkgeworCQl1bnNpZ25lZCBzaG9ydCBpZDsKKwkJZW51bSBpbnRlbF9wY2ggcGNo
X3R5cGU7CisKKwkJaWYgKHBjaC0+dmVuZG9yICE9IFBDSV9WRU5ET1JfSURfSU5URUwpCisJCQlj
b250aW51ZTsKKworCQlpZCA9IHBjaC0+ZGV2aWNlICYgSU5URUxfUENIX0RFVklDRV9JRF9NQVNL
OworCisJCXBjaF90eXBlID0gaW50ZWxfcGNoX3R5cGUoZGV2X3ByaXYsIGlkKTsKKwkJaWYgKHBj
aF90eXBlICE9IFBDSF9OT05FKSB7CisJCQlkZXZfcHJpdi0+cGNoX3R5cGUgPSBwY2hfdHlwZTsK
KwkJCWRldl9wcml2LT5wY2hfaWQgPSBpZDsKKwkJCWJyZWFrOworCQl9IGVsc2UgaWYgKGludGVs
X2lzX3ZpcnRfcGNoKGlkLCBwY2gtPnN1YnN5c3RlbV92ZW5kb3IsCisJCQkJCSAgICAgcGNoLT5z
dWJzeXN0ZW1fZGV2aWNlKSkgeworCQkJaWQgPSBpbnRlbF92aXJ0X2RldGVjdF9wY2goZGV2X3By
aXYpOworCQkJcGNoX3R5cGUgPSBpbnRlbF9wY2hfdHlwZShkZXZfcHJpdiwgaWQpOworCisJCQkv
KiBTYW5pdHkgY2hlY2sgdmlydHVhbCBQQ0ggaWQgKi8KKwkJCWlmIChXQVJOX09OKGlkICYmIHBj
aF90eXBlID09IFBDSF9OT05FKSkKKwkJCQlpZCA9IDA7CisKKwkJCWRldl9wcml2LT5wY2hfdHlw
ZSA9IHBjaF90eXBlOworCQkJZGV2X3ByaXYtPnBjaF9pZCA9IGlkOworCQkJYnJlYWs7CisJCX0K
Kwl9CisKKwkvKgorCSAqIFVzZSBQQ0hfTk9QIChQQ0ggYnV0IG5vIFNvdXRoIERpc3BsYXkpIGZv
ciBQQ0ggcGxhdGZvcm1zIHdpdGhvdXQKKwkgKiBkaXNwbGF5LgorCSAqLworCWlmIChwY2ggJiYg
IUhBU19ESVNQTEFZKGRldl9wcml2KSkgeworCQlEUk1fREVCVUdfS01TKCJEaXNwbGF5IGRpc2Fi
bGVkLCByZXZlcnRpbmcgdG8gTk9QIFBDSFxuIik7CisJCWRldl9wcml2LT5wY2hfdHlwZSA9IFBD
SF9OT1A7CisJCWRldl9wcml2LT5wY2hfaWQgPSAwOworCX0KKworCWlmICghcGNoKQorCQlEUk1f
REVCVUdfS01TKCJObyBQQ0ggZm91bmQuXG4iKTsKKworCXBjaV9kZXZfcHV0KHBjaCk7Cit9CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wY2guaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX3BjaC5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAw
MDAwMC4uZTZhMmQ2NWYxOWM2Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfcGNoLmgKQEAgLTAsMCArMSw3MyBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZp
ZXI6IE1JVCAqLworLyoKKyAqIENvcHlyaWdodCAyMDE5IEludGVsIENvcnBvcmF0aW9uLgorICov
CisKKyNpZm5kZWYgX19JTlRFTF9QQ0hfXworI2RlZmluZSBfX0lOVEVMX1BDSF9fCisKK3N0cnVj
dCBkcm1faTkxNV9wcml2YXRlOworCisvKgorICogU29ydGVkIGJ5IHNvdXRoIGRpc3BsYXkgZW5n
aW5lIGNvbXBhdGliaWxpdHkuCisgKiBJZiB0aGUgbmV3IFBDSCBjb21lcyB3aXRoIGEgc291dGgg
ZGlzcGxheSBlbmdpbmUgdGhhdCBpcyBub3QKKyAqIGluaGVyaXRlZCBmcm9tIHRoZSBsYXRlc3Qg
aXRlbSwgcGxlYXNlIGRvIG5vdCBhZGQgaXQgdG8gdGhlCisgKiBlbmQuIEluc3RlYWQsIGFkZCBp
dCByaWdodCBhZnRlciBpdHMgInBhcmVudCIgUENILgorICovCitlbnVtIGludGVsX3BjaCB7CisJ
UENIX05PUCA9IC0xLAkvKiBQQ0ggd2l0aG91dCBzb3V0aCBkaXNwbGF5ICovCisJUENIX05PTkUg
PSAwLAkvKiBObyBQQ0ggcHJlc2VudCAqLworCVBDSF9JQlgsCS8qIEliZXhwZWFrIFBDSCAqLwor
CVBDSF9DUFQsCS8qIENvdWdhcnBvaW50L1BhbnRoZXJwb2ludCBQQ0ggKi8KKwlQQ0hfTFBULAkv
KiBMeW54cG9pbnQvV2lsZGNhdHBvaW50IFBDSCAqLworCVBDSF9TUFQsICAgICAgICAvKiBTdW5y
aXNlcG9pbnQvS2FieSBMYWtlIFBDSCAqLworCVBDSF9DTlAsICAgICAgICAvKiBDYW5ub24vQ29t
ZXQgTGFrZSBQQ0ggKi8KKwlQQ0hfSUNQLAkvKiBJY2UgTGFrZSBQQ0ggKi8KKwlQQ0hfTUNDLCAg
ICAgICAgLyogTXVsZSBDcmVlayBDYW55b24gUENIICovCisJUENIX1RHUCwJLyogVGlnZXIgTGFr
ZSBQQ0ggKi8KK307CisKKyNkZWZpbmUgSU5URUxfUENIX0RFVklDRV9JRF9NQVNLCQkweGZmODAK
KyNkZWZpbmUgSU5URUxfUENIX0lCWF9ERVZJQ0VfSURfVFlQRQkJMHgzYjAwCisjZGVmaW5lIElO
VEVMX1BDSF9DUFRfREVWSUNFX0lEX1RZUEUJCTB4MWMwMAorI2RlZmluZSBJTlRFTF9QQ0hfUFBU
X0RFVklDRV9JRF9UWVBFCQkweDFlMDAKKyNkZWZpbmUgSU5URUxfUENIX0xQVF9ERVZJQ0VfSURf
VFlQRQkJMHg4YzAwCisjZGVmaW5lIElOVEVMX1BDSF9MUFRfTFBfREVWSUNFX0lEX1RZUEUJCTB4
OWMwMAorI2RlZmluZSBJTlRFTF9QQ0hfV1BUX0RFVklDRV9JRF9UWVBFCQkweDhjODAKKyNkZWZp
bmUgSU5URUxfUENIX1dQVF9MUF9ERVZJQ0VfSURfVFlQRQkJMHg5YzgwCisjZGVmaW5lIElOVEVM
X1BDSF9TUFRfREVWSUNFX0lEX1RZUEUJCTB4QTEwMAorI2RlZmluZSBJTlRFTF9QQ0hfU1BUX0xQ
X0RFVklDRV9JRF9UWVBFCQkweDlEMDAKKyNkZWZpbmUgSU5URUxfUENIX0tCUF9ERVZJQ0VfSURf
VFlQRQkJMHhBMjgwCisjZGVmaW5lIElOVEVMX1BDSF9DTlBfREVWSUNFX0lEX1RZUEUJCTB4QTMw
MAorI2RlZmluZSBJTlRFTF9QQ0hfQ05QX0xQX0RFVklDRV9JRF9UWVBFCQkweDlEODAKKyNkZWZp
bmUgSU5URUxfUENIX0NNUF9ERVZJQ0VfSURfVFlQRQkJMHgwMjgwCisjZGVmaW5lIElOVEVMX1BD
SF9JQ1BfREVWSUNFX0lEX1RZUEUJCTB4MzQ4MAorI2RlZmluZSBJTlRFTF9QQ0hfTUNDX0RFVklD
RV9JRF9UWVBFCQkweDRCMDAKKyNkZWZpbmUgSU5URUxfUENIX01DQzJfREVWSUNFX0lEX1RZUEUJ
CTB4Mzg4MAorI2RlZmluZSBJTlRFTF9QQ0hfVEdQX0RFVklDRV9JRF9UWVBFCQkweEEwODAKKyNk
ZWZpbmUgSU5URUxfUENIX1AyWF9ERVZJQ0VfSURfVFlQRQkJMHg3MTAwCisjZGVmaW5lIElOVEVM
X1BDSF9QM1hfREVWSUNFX0lEX1RZUEUJCTB4NzAwMAorI2RlZmluZSBJTlRFTF9QQ0hfUUVNVV9E
RVZJQ0VfSURfVFlQRQkJMHgyOTAwIC8qIHFlbXUgcTM1IGhhcyAyOTE4ICovCisKKyNkZWZpbmUg
SU5URUxfUENIX1RZUEUoZGV2X3ByaXYpCQkoKGRldl9wcml2KS0+cGNoX3R5cGUpCisjZGVmaW5l
IElOVEVMX1BDSF9JRChkZXZfcHJpdikJCQkoKGRldl9wcml2KS0+cGNoX2lkKQorI2RlZmluZSBI
QVNfUENIX01DQyhkZXZfcHJpdikJCQkoSU5URUxfUENIX1RZUEUoZGV2X3ByaXYpID09IFBDSF9N
Q0MpCisjZGVmaW5lIEhBU19QQ0hfVEdQKGRldl9wcml2KQkJCShJTlRFTF9QQ0hfVFlQRShkZXZf
cHJpdikgPT0gUENIX1RHUCkKKyNkZWZpbmUgSEFTX1BDSF9JQ1AoZGV2X3ByaXYpCQkJKElOVEVM
X1BDSF9UWVBFKGRldl9wcml2KSA9PSBQQ0hfSUNQKQorI2RlZmluZSBIQVNfUENIX0NOUChkZXZf
cHJpdikJCQkoSU5URUxfUENIX1RZUEUoZGV2X3ByaXYpID09IFBDSF9DTlApCisjZGVmaW5lIEhB
U19QQ0hfU1BUKGRldl9wcml2KQkJCShJTlRFTF9QQ0hfVFlQRShkZXZfcHJpdikgPT0gUENIX1NQ
VCkKKyNkZWZpbmUgSEFTX1BDSF9MUFQoZGV2X3ByaXYpCQkJKElOVEVMX1BDSF9UWVBFKGRldl9w
cml2KSA9PSBQQ0hfTFBUKQorI2RlZmluZSBIQVNfUENIX0xQVF9MUChkZXZfcHJpdikgXAorCShJ
TlRFTF9QQ0hfSUQoZGV2X3ByaXYpID09IElOVEVMX1BDSF9MUFRfTFBfREVWSUNFX0lEX1RZUEUg
fHwgXAorCSBJTlRFTF9QQ0hfSUQoZGV2X3ByaXYpID09IElOVEVMX1BDSF9XUFRfTFBfREVWSUNF
X0lEX1RZUEUpCisjZGVmaW5lIEhBU19QQ0hfTFBUX0goZGV2X3ByaXYpIFwKKwkoSU5URUxfUENI
X0lEKGRldl9wcml2KSA9PSBJTlRFTF9QQ0hfTFBUX0RFVklDRV9JRF9UWVBFIHx8IFwKKwkgSU5U
RUxfUENIX0lEKGRldl9wcml2KSA9PSBJTlRFTF9QQ0hfV1BUX0RFVklDRV9JRF9UWVBFKQorI2Rl
ZmluZSBIQVNfUENIX0NQVChkZXZfcHJpdikJCQkoSU5URUxfUENIX1RZUEUoZGV2X3ByaXYpID09
IFBDSF9DUFQpCisjZGVmaW5lIEhBU19QQ0hfSUJYKGRldl9wcml2KQkJCShJTlRFTF9QQ0hfVFlQ
RShkZXZfcHJpdikgPT0gUENIX0lCWCkKKyNkZWZpbmUgSEFTX1BDSF9OT1AoZGV2X3ByaXYpCQkJ
KElOVEVMX1BDSF9UWVBFKGRldl9wcml2KSA9PSBQQ0hfTk9QKQorI2RlZmluZSBIQVNfUENIX1NQ
TElUKGRldl9wcml2KQkJCShJTlRFTF9QQ0hfVFlQRShkZXZfcHJpdikgIT0gUENIX05PTkUpCisK
K3ZvaWQgaW50ZWxfZGV0ZWN0X3BjaChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYp
OworCisjZW5kaWYgLyogX19JTlRFTF9QQ0hfXyAqLwotLSAKMi4yMC4xCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0
CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

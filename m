Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D138FC9AD7
	for <lists+intel-gfx@lfdr.de>; Thu,  3 Oct 2019 11:36:56 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 23FC86E98D;
	Thu,  3 Oct 2019 09:36:54 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EA1416E989
 for <intel-gfx@lists.freedesktop.org>; Thu,  3 Oct 2019 09:36:51 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18704190-1500050 
 for multiple; Thu, 03 Oct 2019 10:36:44 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu,  3 Oct 2019 10:36:32 +0100
Message-Id: <20191003093639.10186-16-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191003093639.10186-1-chris@chris-wilson.co.uk>
References: <20191003093639.10186-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 15/22] drm/i915: Remove logical HW ID
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2l0aCB0aGUgaW50cm9kdWN0aW9uIG9mIGN0eC0+ZW5naW5lc1tdIHdlIGFsbG93IG11bHRpcGxl
IGxvZ2ljYWwKY29udGV4dHMgdG8gYmUgdXNlZCBvbiB0aGUgc2FtZSBlbmdpbmUgKGUuZy4gd2l0
aCB2aXJ0dWFsIGVuZ2luZXMpLgpBY2NvcmRpbmcgdG8gYnNwZWMsIGFhY2ggbG9naWNhbCBjb250
ZXh0IHJlcXVpcmVzIGEgdW5pcXVlIHRhZyBpbiBvcmRlcgpmb3IgY29udGV4dC1zd2l0Y2hpbmcg
dG8gb2NjdXIgY29ycmVjdGx5IGJldHdlZW4gdGhlbS4gW1NpbXBsZQpleHBlcmltZW50cyBzaG93
IHRoYXQgaXQgaXMgbm90IHNvIGVhc3kgdG8gdHJpY2sgdGhlIEhXIGludG8gcGVyZm9ybWluZwph
IGxpdGUtcmVzdG9yZSB3aXRoIG1hdGNoaW5nIGxvZ2ljYWwgSURzLCB0aG91Z2ggbXkgbWVtb3J5
IGZyb20gZWFybHkKQnJvYWR3ZWxsIGV4cGVyaW1lbnRzIGRvIHN1Z2dlc3QgdGhhdCBpdCBzaG91
bGQgYmUgZ2VuZXJhdGluZwpsaXRlLXJlc3RvcmVzLl0KCldlIG9ubHkgbmVlZCB0byBrZWVwIGEg
dW5pcXVlIHRhZyBmb3IgdGhlIGFjdGl2ZSBsaWZldGltZSBvZiB0aGUKY29udGV4dCwgYW5kIGZv
ciBhcyBsb25nIGFzIHdlIG5lZWQgdG8gaWRlbnRpZnkgdGhhdCBjb250ZXh0LiBUaGUgSFcKdXNl
cyB0aGUgdGFnIHRvIGRldGVybWluZSBpZiBpdCBzaG91bGQgdXNlIGEgbGl0ZS1yZXN0b3JlICh3
aHkgbm90IHRoZQpMUkNBPykgYW5kIHBhc3NlcyB0aGUgdGFnIGJhY2sgZm9yIHZhcmlvdXMgc3Rh
dHVzIGlkZW50aWZpZXMuIFRoZSBvbmx5CnN0YXR1cyB3ZSBuZWVkIHRvIHRyYWNrIGlzIGZvciBP
QSwgc28gd2hlbiB1c2luZyBwZXJmLCB3ZSBhc3NpZ24gdGhlCnNwZWNpZmljIGNvbnRleHQgYSB1
bmlxdWUgdGFnLgoKdjI6IENhbGN1bGF0ZSByZXF1aXJlZCBudW1iZXIgb2YgdGFncyB0byBmaWxs
IEVMU1AuCgpGaXhlczogOTc2YjU1ZjBlMWRiICgiZHJtL2k5MTU6IEFsbG93IGEgY29udGV4dCB0
byBkZWZpbmUgaXRzIHNldCBvZiBlbmdpbmVzIikKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29u
IDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CkFja2VkLWJ5OiBEYW5pZWxlIENlcmFvbG8gU3B1
cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogVHZydGtv
IFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jICAgfCAxNDcgLS0tLS0tLS0tLS0tLS0tLS0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5oICAgfCAgMTUgLS0KIC4u
Li9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaCB8ICAxOCAtLS0KIC4u
Li9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYyB8ICAxMyArLQogLi4u
L2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5jIHwgICA4IC0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaCB8ICAgMSArCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaCAgfCAgIDQgKy0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAgICAgICAgICB8ICAzMiArKy0tCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3QuYyAgICAgICAgICAgICAgfCAgMTcgLS0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jICAgICAgICAgICB8ICAgMyAtCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jICAgICAgICAgfCAgIDcgKy0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmggICAgICAgICB8ICAgMSAtCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X3BlcmYuYyAgICAgICAgICAgICAgfCAgMjUgKystCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X3RyYWNlLmggICAgICAgICAgICAgfCAgMzggKystLS0KIC4uLi9ncHUvZHJt
L2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2V2aWN0LmMgICB8ICAgNCArLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMgICAgIHwgICAyICstCiAxNiBmaWxlcyBjaGFu
Z2VkLCA1MSBpbnNlcnRpb25zKCspLCAyODQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMKaW5kZXggMGFiNDE2ODg3ZmMyLi5hZTU4ODU0
NGJmM2EgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250
ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwpA
QCAtMTY3LDk3ICsxNjcsNiBAQCBsb29rdXBfdXNlcl9lbmdpbmUoc3RydWN0IGk5MTVfZ2VtX2Nv
bnRleHQgKmN0eCwKIAlyZXR1cm4gaTkxNV9nZW1fY29udGV4dF9nZXRfZW5naW5lKGN0eCwgaWR4
KTsKIH0KIAotc3RhdGljIGlubGluZSBpbnQgbmV3X2h3X2lkKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1LCBnZnBfdCBnZnApCi17Ci0JdW5zaWduZWQgaW50IG1heDsKLQotCWxvY2tkZXBf
YXNzZXJ0X2hlbGQoJmk5MTUtPmNvbnRleHRzLm11dGV4KTsKLQotCWlmIChJTlRFTF9HRU4oaTkx
NSkgPj0gMTIpCi0JCW1heCA9IEdFTjEyX01BWF9DT05URVhUX0hXX0lEOwotCWVsc2UgaWYgKElO
VEVMX0dFTihpOTE1KSA+PSAxMSkKLQkJbWF4ID0gR0VOMTFfTUFYX0NPTlRFWFRfSFdfSUQ7Ci0J
ZWxzZSBpZiAoVVNFU19HVUNfU1VCTUlTU0lPTihpOTE1KSkKLQkJLyoKLQkJICogV2hlbiB1c2lu
ZyBHdUMgaW4gcHJveHkgc3VibWlzc2lvbiwgR3VDIGNvbnN1bWVzIHRoZQotCQkgKiBoaWdoZXN0
IGJpdCBpbiB0aGUgY29udGV4dCBpZCB0byBpbmRpY2F0ZSBwcm94eSBzdWJtaXNzaW9uLgotCQkg
Ki8KLQkJbWF4ID0gTUFYX0dVQ19DT05URVhUX0hXX0lEOwotCWVsc2UKLQkJbWF4ID0gTUFYX0NP
TlRFWFRfSFdfSUQ7Ci0KLQlyZXR1cm4gaWRhX3NpbXBsZV9nZXQoJmk5MTUtPmNvbnRleHRzLmh3
X2lkYSwgMCwgbWF4LCBnZnApOwotfQotCi1zdGF0aWMgaW50IHN0ZWFsX2h3X2lkKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1KQotewotCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgs
ICpjbjsKLQlMSVNUX0hFQUQocGlubmVkKTsKLQlpbnQgaWQgPSAtRU5PU1BDOwotCi0JbG9ja2Rl
cF9hc3NlcnRfaGVsZCgmaTkxNS0+Y29udGV4dHMubXV0ZXgpOwotCi0JbGlzdF9mb3JfZWFjaF9l
bnRyeV9zYWZlKGN0eCwgY24sCi0JCQkJICZpOTE1LT5jb250ZXh0cy5od19pZF9saXN0LCBod19p
ZF9saW5rKSB7Ci0JCWlmIChhdG9taWNfcmVhZCgmY3R4LT5od19pZF9waW5fY291bnQpKSB7Ci0J
CQlsaXN0X21vdmVfdGFpbCgmY3R4LT5od19pZF9saW5rLCAmcGlubmVkKTsKLQkJCWNvbnRpbnVl
OwotCQl9Ci0KLQkJR0VNX0JVR19PTighY3R4LT5od19pZCk7IC8qIHBlcm1hLXBpbm5lZCBrZXJu
ZWwgY29udGV4dCAqLwotCQlsaXN0X2RlbF9pbml0KCZjdHgtPmh3X2lkX2xpbmspOwotCQlpZCA9
IGN0eC0+aHdfaWQ7Ci0JCWJyZWFrOwotCX0KLQotCS8qCi0JICogUmVtZW1iZXIgaG93IGZhciB3
ZSBnb3QgdXAgb24gdGhlIGxhc3QgcmVwb3NzZXNpb24gc2Nhbiwgc28gdGhlCi0JICogbGlzdCBp
cyBrZXB0IGluIGEgImxlYXN0IHJlY2VudGx5IHNjYW5uZWQiIG9yZGVyLgotCSAqLwotCWxpc3Rf
c3BsaWNlX3RhaWwoJnBpbm5lZCwgJmk5MTUtPmNvbnRleHRzLmh3X2lkX2xpc3QpOwotCXJldHVy
biBpZDsKLX0KLQotc3RhdGljIGludCBhc3NpZ25faHdfaWQoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUsIHVuc2lnbmVkIGludCAqb3V0KQotewotCWludCByZXQ7Ci0KLQlsb2NrZGVwX2Fz
c2VydF9oZWxkKCZpOTE1LT5jb250ZXh0cy5tdXRleCk7Ci0KLQkvKgotCSAqIFdlIHByZWZlciB0
byBzdGVhbC9zdGFsbCBvdXJzZWx2ZXMgYW5kIG91ciB1c2VycyBvdmVyIHRoYXQgb2YgdGhlCi0J
ICogZW50aXJlIHN5c3RlbS4gVGhhdCBtYXkgYmUgYSBsaXR0bGUgdW5mYWlyIHRvIG91ciB1c2Vy
cywgYW5kCi0JICogZXZlbiBodXJ0IGhpZ2ggcHJpb3JpdHkgY2xpZW50cy4gVGhlIGNob2ljZSBp
cyB3aGV0aGVyIHRvIG9vbWtpbGwKLQkgKiBzb21ldGhpbmcgZWxzZSwgb3Igc3RlYWwgYSBjb250
ZXh0IGlkLgotCSAqLwotCXJldCA9IG5ld19od19pZChpOTE1LCBHRlBfS0VSTkVMIHwgX19HRlBf
UkVUUllfTUFZRkFJTCB8IF9fR0ZQX05PV0FSTik7Ci0JaWYgKHVubGlrZWx5KHJldCA8IDApKSB7
Ci0JCXJldCA9IHN0ZWFsX2h3X2lkKGk5MTUpOwotCQlpZiAocmV0IDwgMCkgLyogb25jZSBhZ2Fp
biBmb3IgdGhlIGNvcnJlY3QgZXJybm8gY29kZSAqLwotCQkJcmV0ID0gbmV3X2h3X2lkKGk5MTUs
IEdGUF9LRVJORUwpOwotCQlpZiAocmV0IDwgMCkKLQkJCXJldHVybiByZXQ7Ci0JfQotCi0JKm91
dCA9IHJldDsKLQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIHZvaWQgcmVsZWFzZV9od19pZChzdHJ1
Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KQotewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpp
OTE1ID0gY3R4LT5pOTE1OwotCi0JaWYgKGxpc3RfZW1wdHkoJmN0eC0+aHdfaWRfbGluaykpCi0J
CXJldHVybjsKLQotCW11dGV4X2xvY2soJmk5MTUtPmNvbnRleHRzLm11dGV4KTsKLQlpZiAoIWxp
c3RfZW1wdHkoJmN0eC0+aHdfaWRfbGluaykpIHsKLQkJaWRhX3NpbXBsZV9yZW1vdmUoJmk5MTUt
PmNvbnRleHRzLmh3X2lkYSwgY3R4LT5od19pZCk7Ci0JCWxpc3RfZGVsX2luaXQoJmN0eC0+aHdf
aWRfbGluayk7Ci0JfQotCW11dGV4X3VubG9jaygmaTkxNS0+Y29udGV4dHMubXV0ZXgpOwotfQot
CiBzdGF0aWMgdm9pZCBfX2ZyZWVfZW5naW5lcyhzdHJ1Y3QgaTkxNV9nZW1fZW5naW5lcyAqZSwg
dW5zaWduZWQgaW50IGNvdW50KQogewogCXdoaWxlIChjb3VudC0tKSB7CkBAIC0zMTIsOCArMjIx
LDYgQEAgc3RhdGljIHZvaWQgaTkxNV9nZW1fY29udGV4dF9mcmVlKHN0cnVjdCBpOTE1X2dlbV9j
b250ZXh0ICpjdHgpCiAJbG9ja2RlcF9hc3NlcnRfaGVsZCgmY3R4LT5pOTE1LT5kcm0uc3RydWN0
X211dGV4KTsKIAlHRU1fQlVHX09OKCFpOTE1X2dlbV9jb250ZXh0X2lzX2Nsb3NlZChjdHgpKTsK
IAotCXJlbGVhc2VfaHdfaWQoY3R4KTsKLQogCWZyZWVfZW5naW5lcyhyY3VfYWNjZXNzX3BvaW50
ZXIoY3R4LT5lbmdpbmVzKSk7CiAJbXV0ZXhfZGVzdHJveSgmY3R4LT5lbmdpbmVzX211dGV4KTsK
IApAQCAtMzg2LDEyICsyOTMsNiBAQCBzdGF0aWMgdm9pZCBjb250ZXh0X2Nsb3NlKHN0cnVjdCBp
OTE1X2dlbV9jb250ZXh0ICpjdHgpCiAKIAljdHgtPmZpbGVfcHJpdiA9IEVSUl9QVFIoLUVCQURG
KTsKIAotCS8qCi0JICogVGhpcyBjb250ZXh0IHdpbGwgbmV2ZXIgYWdhaW4gYmUgYXNzaW5nZWQg
dG8gSFcsIHNvIHdlIGNhbgotCSAqIHJldXNlIGl0cyBJRCBmb3IgdGhlIG5leHQgY29udGV4dC4K
LQkgKi8KLQlyZWxlYXNlX2h3X2lkKGN0eCk7Ci0KIAkvKgogCSAqIFRoZSBMVVQgdXNlcyB0aGUg
Vk1BIGFzIGEgYmFja3BvaW50ZXIgdG8gdW5yZWYgdGhlIG9iamVjdCwKIAkgKiBzbyB3ZSBuZWVk
IHRvIGNsZWFyIHRoZSBMVVQgYmVmb3JlIHdlIGNsb3NlIGFsbCB0aGUgVk1BIChpbnNpZGUKQEAg
LTQzMCw3ICszMzEsNiBAQCBfX2NyZWF0ZV9jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1KQogCVJDVV9JTklUX1BPSU5URVIoY3R4LT5lbmdpbmVzLCBlKTsKIAogCUlOSVRfUkFE
SVhfVFJFRSgmY3R4LT5oYW5kbGVzX3ZtYSwgR0ZQX0tFUk5FTCk7Ci0JSU5JVF9MSVNUX0hFQUQo
JmN0eC0+aHdfaWRfbGluayk7CiAKIAkvKiBOQjogTWFyayBhbGwgc2xpY2VzIGFzIG5lZWRpbmcg
YSByZW1hcCBzbyB0aGF0IHdoZW4gdGhlIGNvbnRleHQgZmlyc3QKIAkgKiBsb2FkcyBpdCB3aWxs
IHJlc3RvcmUgd2hhdGV2ZXIgcmVtYXAgc3RhdGUgYWxyZWFkeSBleGlzdHMuIElmIHRoZXJlCkBA
IC01ODQsMTggKzQ4NCwxMSBAQCBzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqCiBpOTE1X2dlbV9j
b250ZXh0X2NyZWF0ZV9rZXJuZWwoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIGludCBw
cmlvKQogewogCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHg7Ci0JaW50IGVycjsKIAogCWN0
eCA9IGk5MTVfZ2VtX2NyZWF0ZV9jb250ZXh0KGk5MTUsIDApOwogCWlmIChJU19FUlIoY3R4KSkK
IAkJcmV0dXJuIGN0eDsKIAotCWVyciA9IGk5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lkKGN0eCk7
Ci0JaWYgKGVycikgewotCQlkZXN0cm95X2tlcm5lbF9jb250ZXh0KCZjdHgpOwotCQlyZXR1cm4g
RVJSX1BUUihlcnIpOwotCX0KLQogCWk5MTVfZ2VtX2NvbnRleHRfY2xlYXJfYmFubmFibGUoY3R4
KTsKIAljdHgtPnNjaGVkLnByaW9yaXR5ID0gSTkxNV9VU0VSX1BSSU9SSVRZKHByaW8pOwogCkBA
IC02MzQsMTUgKzUyNyw2IEBAIGludCBpOTE1X2dlbV9jb250ZXh0c19pbml0KHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gY3JlYXRlIGRl
ZmF1bHQgZ2xvYmFsIGNvbnRleHRcbiIpOwogCQlyZXR1cm4gUFRSX0VSUihjdHgpOwogCX0KLQkv
KgotCSAqIEZvciBlYXN5IHJlY29nbmlzYWJsaXR5LCB3ZSB3YW50IHRoZSBrZXJuZWwgY29udGV4
dCB0byBiZSAwIGFuZCB0aGVuCi0JICogYWxsIHVzZXIgY29udGV4dHMgd2lsbCBoYXZlIG5vbi16
ZXJvIGh3X2lkLiBLZXJuZWwgY29udGV4dHMgYXJlCi0JICogcGVybWFuZW50bHkgcGlubmVkLCBz
byB0aGF0IHdlIG5ldmVyIHN1ZmZlciBhIHN0YWxsIGFuZCBjYW4KLQkgKiB1c2UgdGhlbSBmcm9t
IGFueSBhbGxvY2F0aW9uIGNvbnRleHQgKGUuZy4gZm9yIGV2aWN0aW5nIG90aGVyCi0JICogY29u
dGV4dHMgYW5kIGZyb20gaW5zaWRlIHRoZSBzaHJpbmtlcikuCi0JICovCi0JR0VNX0JVR19PTihj
dHgtPmh3X2lkKTsKLQlHRU1fQlVHX09OKCFhdG9taWNfcmVhZCgmY3R4LT5od19pZF9waW5fY291
bnQpKTsKIAlkZXZfcHJpdi0+a2VybmVsX2NvbnRleHQgPSBjdHg7CiAKIAlEUk1fREVCVUdfRFJJ
VkVSKCIlcyBjb250ZXh0IHN1cHBvcnQgaW5pdGlhbGl6ZWRcbiIsCkBAIC02NTYsMTAgKzU0MCw2
IEBAIHZvaWQgaTkxNV9nZW1fY29udGV4dHNfZmluaShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSkKIAlsb2NrZGVwX2Fzc2VydF9oZWxkKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKIAog
CWRlc3Ryb3lfa2VybmVsX2NvbnRleHQoJmk5MTUtPmtlcm5lbF9jb250ZXh0KTsKLQotCS8qIE11
c3QgZnJlZSBhbGwgZGVmZXJyZWQgY29udGV4dHMgKHZpYSBmbHVzaF93b3JrcXVldWUpIGZpcnN0
ICovCi0JR0VNX0JVR19PTighbGlzdF9lbXB0eSgmaTkxNS0+Y29udGV4dHMuaHdfaWRfbGlzdCkp
OwotCWlkYV9kZXN0cm95KCZpOTE1LT5jb250ZXh0cy5od19pZGEpOwogfQogCiBzdGF0aWMgaW50
IGNvbnRleHRfaWRyX2NsZWFudXAoaW50IGlkLCB2b2lkICpwLCB2b2lkICpkYXRhKQpAQCAtMjMx
NiwzMyArMjE5Niw2IEBAIGludCBpOTE1X2dlbV9jb250ZXh0X3Jlc2V0X3N0YXRzX2lvY3RsKHN0
cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJcmV0dXJuIHJldDsKIH0KIAotaW50IF9faTkxNV9nZW1f
Y29udGV4dF9waW5faHdfaWQoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCkKLXsKLQlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGN0eC0+aTkxNTsKLQlpbnQgZXJyID0gMDsKLQot
CW11dGV4X2xvY2soJmk5MTUtPmNvbnRleHRzLm11dGV4KTsKLQotCUdFTV9CVUdfT04oaTkxNV9n
ZW1fY29udGV4dF9pc19jbG9zZWQoY3R4KSk7Ci0KLQlpZiAobGlzdF9lbXB0eSgmY3R4LT5od19p
ZF9saW5rKSkgewotCQlHRU1fQlVHX09OKGF0b21pY19yZWFkKCZjdHgtPmh3X2lkX3Bpbl9jb3Vu
dCkpOwotCi0JCWVyciA9IGFzc2lnbl9od19pZChpOTE1LCAmY3R4LT5od19pZCk7Ci0JCWlmIChl
cnIpCi0JCQlnb3RvIG91dF91bmxvY2s7Ci0KLQkJbGlzdF9hZGRfdGFpbCgmY3R4LT5od19pZF9s
aW5rLCAmaTkxNS0+Y29udGV4dHMuaHdfaWRfbGlzdCk7Ci0JfQotCi0JR0VNX0JVR19PTihhdG9t
aWNfcmVhZCgmY3R4LT5od19pZF9waW5fY291bnQpID09IH4wdSk7Ci0JYXRvbWljX2luYygmY3R4
LT5od19pZF9waW5fY291bnQpOwotCi1vdXRfdW5sb2NrOgotCW11dGV4X3VubG9jaygmaTkxNS0+
Y29udGV4dHMubXV0ZXgpOwotCXJldHVybiBlcnI7Ci19Ci0KIC8qIEdFTSBjb250ZXh0LWVuZ2lu
ZXMgaXRlcmF0b3I6IGZvcl9lYWNoX2dlbV9lbmdpbmUoKSAqLwogc3RydWN0IGludGVsX2NvbnRl
eHQgKgogaTkxNV9nZW1fZW5naW5lc19pdGVyX25leHQoc3RydWN0IGk5MTVfZ2VtX2VuZ2luZXNf
aXRlciAqaXQpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
Y29udGV4dC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaApp
bmRleCAxNzY5Nzg2MDhiNmYuLjUwYmMyN2QzMGMwMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fY29udGV4dC5oCkBAIC0xMTIsMjEgKzExMiw2IEBAIGk5MTVfZ2VtX2Nv
bnRleHRfY2xlYXJfdXNlcl9lbmdpbmVzKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCiAJ
Y2xlYXJfYml0KENPTlRFWFRfVVNFUl9FTkdJTkVTLCAmY3R4LT5mbGFncyk7CiB9CiAKLWludCBf
X2k5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lkKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgp
Owotc3RhdGljIGlubGluZSBpbnQgaTkxNV9nZW1fY29udGV4dF9waW5faHdfaWQoc3RydWN0IGk5
MTVfZ2VtX2NvbnRleHQgKmN0eCkKLXsKLQlpZiAoYXRvbWljX2luY19ub3RfemVybygmY3R4LT5o
d19pZF9waW5fY291bnQpKQotCQlyZXR1cm4gMDsKLQotCXJldHVybiBfX2k5MTVfZ2VtX2NvbnRl
eHRfcGluX2h3X2lkKGN0eCk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCBpOTE1X2dlbV9jb250
ZXh0X3VucGluX2h3X2lkKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCi17Ci0JR0VNX0JV
R19PTihhdG9taWNfcmVhZCgmY3R4LT5od19pZF9waW5fY291bnQpID09IDB1KTsKLQlhdG9taWNf
ZGVjKCZjdHgtPmh3X2lkX3Bpbl9jb3VudCk7Ci19Ci0KIHN0YXRpYyBpbmxpbmUgYm9vbCBpOTE1
X2dlbV9jb250ZXh0X2lzX2tlcm5lbChzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KQogewog
CXJldHVybiAhY3R4LT5maWxlX3ByaXY7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fY29udGV4dF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaAppbmRleCAyNjBkNTljYzNkZTguLjg3YmUyNzg3N2Uy
MiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRf
dHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dF90
eXBlcy5oCkBAIC0xNDcsMjQgKzE0Nyw2IEBAIHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0IHsKICNk
ZWZpbmUgQ09OVEVYVF9GT1JDRV9TSU5HTEVfU1VCTUlTU0lPTgkyCiAjZGVmaW5lIENPTlRFWFRf
VVNFUl9FTkdJTkVTCQkzCiAKLQkvKioKLQkgKiBAaHdfaWQ6IC0gdW5pcXVlIGlkZW50aWZpZXIg
Zm9yIHRoZSBjb250ZXh0Ci0JICoKLQkgKiBUaGUgaGFyZHdhcmUgbmVlZHMgdG8gdW5pcXVlbHkg
aWRlbnRpZnkgdGhlIGNvbnRleHQgZm9yIGEgZmV3Ci0JICogZnVuY3Rpb25zIGxpa2UgZmF1bHQg
cmVwb3J0aW5nLCBQQVNJRCwgc2NoZWR1bGluZy4gVGhlCi0JICogJmRybV9pOTE1X3ByaXZhdGUu
Y29udGV4dF9od19pZGEgaXMgdXNlZCB0byBhc3NpZ24gYSB1bnFpdWUKLQkgKiBpZCBmb3IgdGhl
IGxpZmV0aW1lIG9mIHRoZSBjb250ZXh0LgotCSAqCi0JICogQGh3X2lkX3Bpbl9jb3VudDogLSBu
dW1iZXIgb2YgdGltZXMgdGhpcyBjb250ZXh0IGhhZCBiZWVuIHBpbm5lZAotCSAqIGZvciB1c2Ug
KHNob3VsZCBiZSwgYXQgbW9zdCwgb25jZSBwZXIgZW5naW5lKS4KLQkgKgotCSAqIEBod19pZF9s
aW5rOiAtIGFsbCBjb250ZXh0cyB3aXRoIGFuIGFzc2lnbmVkIGlkIGFyZSB0cmFja2VkCi0JICog
Zm9yIHBvc3NpYmxlIHJlcG9zc2Vzc2lvbi4KLQkgKi8KLQl1bnNpZ25lZCBpbnQgaHdfaWQ7Ci0J
YXRvbWljX3QgaHdfaWRfcGluX2NvdW50OwotCXN0cnVjdCBsaXN0X2hlYWQgaHdfaWRfbGluazsK
LQogCXN0cnVjdCBtdXRleCBtdXRleDsKIAogCXN0cnVjdCBpOTE1X3NjaGVkX2F0dHIgc2NoZWQ7
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2Vt
X2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1f
Y29udGV4dC5jCmluZGV4IDIyODg3NTc4MDhhZS4uMmZiMzFhZGEyZmE3IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYwpA
QCAtNjYwLDkgKzY2MCw5IEBAIHN0YXRpYyBpbnQgaWd0X2N0eF9leGVjKHZvaWQgKmFyZykKIAog
CQkJZXJyID0gZ3B1X2ZpbGwoY2UsIG9iaiwgZHcpOwogCQkJaWYgKGVycikgewotCQkJCXByX2Vy
cigiRmFpbGVkIHRvIGZpbGwgZHdvcmQgJWx1IFslbHUvJWx1XSB3aXRoIGdwdSAoJXMpIGluIGN0
eCAldSBbZnVsbC1wcGd0dD8gJXNdLCBlcnI9JWRcbiIsCisJCQkJcHJfZXJyKCJGYWlsZWQgdG8g
ZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGggZ3B1ICglcykgW2Z1bGwtcHBndHQ/ICVzXSwg
ZXJyPSVkXG4iLAogCQkJCSAgICAgICBuZHdvcmRzLCBkdywgbWF4X2R3b3JkcyhvYmopLAotCQkJ
CSAgICAgICBlbmdpbmUtPm5hbWUsIGN0eC0+aHdfaWQsCisJCQkJICAgICAgIGVuZ2luZS0+bmFt
ZSwKIAkJCQkgICAgICAgeWVzbm8oISFjdHgtPnZtKSwgZXJyKTsKIAkJCQlpbnRlbF9jb250ZXh0
X3B1dChjZSk7CiAJCQkJa2VybmVsX2NvbnRleHRfY2xvc2UoY3R4KTsKQEAgLTc5OCw5ICs3OTgs
OSBAQCBzdGF0aWMgaW50IGlndF9zaGFyZWRfY3R4X2V4ZWModm9pZCAqYXJnKQogCiAJCQllcnIg
PSBncHVfZmlsbChjZSwgb2JqLCBkdyk7CiAJCQlpZiAoZXJyKSB7Ci0JCQkJcHJfZXJyKCJGYWls
ZWQgdG8gZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGggZ3B1ICglcykgaW4gY3R4ICV1IFtm
dWxsLXBwZ3R0PyAlc10sIGVycj0lZFxuIiwKKwkJCQlwcl9lcnIoIkZhaWxlZCB0byBmaWxsIGR3
b3JkICVsdSBbJWx1LyVsdV0gd2l0aCBncHUgKCVzKSBbZnVsbC1wcGd0dD8gJXNdLCBlcnI9JWRc
biIsCiAJCQkJICAgICAgIG5kd29yZHMsIGR3LCBtYXhfZHdvcmRzKG9iaiksCi0JCQkJICAgICAg
IGVuZ2luZS0+bmFtZSwgY3R4LT5od19pZCwKKwkJCQkgICAgICAgZW5naW5lLT5uYW1lLAogCQkJ
CSAgICAgICB5ZXNubyghIWN0eC0+dm0pLCBlcnIpOwogCQkJCWludGVsX2NvbnRleHRfcHV0KGNl
KTsKIAkJCQlrZXJuZWxfY29udGV4dF9jbG9zZShjdHgpOwpAQCAtMTM4MiwxMCArMTM4Miw5IEBA
IHN0YXRpYyBpbnQgaWd0X2N0eF9yZWFkb25seSh2b2lkICphcmcpCiAKIAkJCWVyciA9IGdwdV9m
aWxsKGNlLCBvYmosIGR3KTsKIAkJCWlmIChlcnIpIHsKLQkJCQlwcl9lcnIoIkZhaWxlZCB0byBm
aWxsIGR3b3JkICVsdSBbJWx1LyVsdV0gd2l0aCBncHUgKCVzKSBpbiBjdHggJXUgW2Z1bGwtcHBn
dHQ/ICVzXSwgZXJyPSVkXG4iLAorCQkJCXByX2VycigiRmFpbGVkIHRvIGZpbGwgZHdvcmQgJWx1
IFslbHUvJWx1XSB3aXRoIGdwdSAoJXMpIFtmdWxsLXBwZ3R0PyAlc10sIGVycj0lZFxuIiwKIAkJ
CQkgICAgICAgbmR3b3JkcywgZHcsIG1heF9kd29yZHMob2JqKSwKLQkJCQkgICAgICAgY2UtPmVu
Z2luZS0+bmFtZSwgY3R4LT5od19pZCwKLQkJCQkgICAgICAgeWVzbm8oISFjdHgtPnZtKSwgZXJy
KTsKKwkJCQkgICAgICAgY2UtPmVuZ2luZS0+bmFtZSwgeWVzbm8oISFjdHgtPnZtKSwgZXJyKTsK
IAkJCQlpOTE1X2dlbV9jb250ZXh0X3VubG9ja19lbmdpbmVzKGN0eCk7CiAJCQkJZ290byBvdXRf
dW5sb2NrOwogCQkJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0
ZXN0cy9tb2NrX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMv
bW9ja19jb250ZXh0LmMKaW5kZXggYmU4OTc0Y2NmZjI0Li4wMTA0ZjE2YjEzMjcgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRleHQuYwpAQCAt
MTMsNyArMTMsNiBAQCBtb2NrX2NvbnRleHQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUs
CiB7CiAJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eDsKIAlzdHJ1Y3QgaTkxNV9nZW1fZW5n
aW5lcyAqZTsKLQlpbnQgcmV0OwogCiAJY3R4ID0ga3phbGxvYyhzaXplb2YoKmN0eCksIEdGUF9L
RVJORUwpOwogCWlmICghY3R4KQpAQCAtMzAsMTMgKzI5LDggQEAgbW9ja19jb250ZXh0KHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCVJDVV9JTklUX1BPSU5URVIoY3R4LT5lbmdpbmVz
LCBlKTsKIAogCUlOSVRfUkFESVhfVFJFRSgmY3R4LT5oYW5kbGVzX3ZtYSwgR0ZQX0tFUk5FTCk7
Ci0JSU5JVF9MSVNUX0hFQUQoJmN0eC0+aHdfaWRfbGluayk7CiAJbXV0ZXhfaW5pdCgmY3R4LT5t
dXRleCk7CiAKLQlyZXQgPSBpOTE1X2dlbV9jb250ZXh0X3Bpbl9od19pZChjdHgpOwotCWlmIChy
ZXQgPCAwKQotCQlnb3RvIGVycl9lbmdpbmVzOwotCiAJaWYgKG5hbWUpIHsKIAkJc3RydWN0IGk5
MTVfcHBndHQgKnBwZ3R0OwogCkBAIC01NCw4ICs0OCw2IEBAIG1vY2tfY29udGV4dChzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKIAogCXJldHVybiBjdHg7CiAKLWVycl9lbmdpbmVzOgot
CWZyZWVfZW5naW5lcyhyY3VfYWNjZXNzX3BvaW50ZXIoY3R4LT5lbmdpbmVzKSk7CiBlcnJfZnJl
ZToKIAlrZnJlZShjdHgpOwogCXJldHVybiBOVUxMOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfY29udGV4dF90eXBlcy5oCmluZGV4IGJmOWNlZGZjY2JmMC4uNjk1OWIwNWFlNWY4
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0X3R5cGVz
LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBlcy5oCkBA
IC01OCw2ICs1OCw3IEBAIHN0cnVjdCBpbnRlbF9jb250ZXh0IHsKIAogCXUzMiAqbHJjX3JlZ19z
dGF0ZTsKIAl1NjQgbHJjX2Rlc2M7CisJdTMyIHRhZzsgLyogY29va2llIHBhc3NlZCB0byBIVyB0
byB0cmFjayB0aGlzIGNvbnRleHQgb24gc3VibWlzc2lvbiAqLwogCiAJdW5zaWduZWQgaW50IGFj
dGl2ZV9jb3VudDsgLyogcHJvdGVjdGVkIGJ5IHRpbWVsaW5lLT5tdXRleCAqLwogCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaCBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCmluZGV4IDk0M2YwNjYzODM3
ZS4uNjE5OTA2NGYzMzJiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9lbmdpbmVfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdp
bmVfdHlwZXMuaApAQCAtMzAzLDEwICszMDMsMTIgQEAgc3RydWN0IGludGVsX2VuZ2luZV9jcyB7
CiAJdTggdWFiaV9jbGFzczsKIAl1OCB1YWJpX2luc3RhbmNlOwogCisJdTMyIHVhYmlfY2FwYWJp
bGl0aWVzOwogCXUzMiBjb250ZXh0X3NpemU7CiAJdTMyIG1taW9fYmFzZTsKIAotCXUzMiB1YWJp
X2NhcGFiaWxpdGllczsKKwl1bnNpZ25lZCBpbnQgY29udGV4dF90YWc7CisjZGVmaW5lIE5VTV9D
T05URVhUX1RBRyByb3VuZHVwX3Bvd19vZl90d28oMiAqIEVYRUNMSVNUX01BWF9QT1JUUykKIAog
CXN0cnVjdCByYl9ub2RlIHVhYmlfbm9kZTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMu
YwppbmRleCA0MzFkM2I4YzMzNzEuLmZjOGM5M2RmNDIzNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfbHJjLmMKQEAgLTQ0MCwxMiArNDQwLDggQEAgYXNzZXJ0X3ByaW9yaXR5X3F1ZXVlKGNv
bnN0IHN0cnVjdCBpOTE1X3JlcXVlc3QgKnByZXYsCiBzdGF0aWMgdTY0CiBscmNfZGVzY3JpcHRv
cihzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZSkKIHsKLQlzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4ID0gY2UtPmdlbV9jb250ZXh0Owog
CXU2NCBkZXNjOwogCi0JQlVJTERfQlVHX09OKE1BWF9DT05URVhUX0hXX0lEID4gKEJJVChHRU44
X0NUWF9JRF9XSURUSCkpKTsKLQlCVUlMRF9CVUdfT04oR0VOMTFfTUFYX0NPTlRFWFRfSFdfSUQg
PiAoQklUKEdFTjExX1NXX0NUWF9JRF9XSURUSCkpKTsKLQogCWRlc2MgPSBJTlRFTF9MRUdBQ1lf
MzJCX0NPTlRFWFQ7CiAJaWYgKGk5MTVfdm1faXNfNGx2bChjZS0+dm0pKQogCQlkZXNjID0gSU5U
RUxfTEVHQUNZXzY0Ql9DT05URVhUOwpAQCAtNDYzLDIwICs0NTksMTEgQEAgbHJjX2Rlc2NyaXB0
b3Ioc3RydWN0IGludGVsX2NvbnRleHQgKmNlLCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdp
bmUpCiAJICogYW55dGhpbmcgYmVsb3cuCiAJICovCiAJaWYgKElOVEVMX0dFTihlbmdpbmUtPmk5
MTUpID49IDExKSB7Ci0JCUdFTV9CVUdfT04oY3R4LT5od19pZCA+PSBCSVQoR0VOMTFfU1dfQ1RY
X0lEX1dJRFRIKSk7Ci0JCWRlc2MgfD0gKHU2NCljdHgtPmh3X2lkIDw8IEdFTjExX1NXX0NUWF9J
RF9TSElGVDsKLQkJCQkJCQkJLyogYml0cyAzNy00NyAqLwotCiAJCWRlc2MgfD0gKHU2NCllbmdp
bmUtPmluc3RhbmNlIDw8IEdFTjExX0VOR0lORV9JTlNUQU5DRV9TSElGVDsKIAkJCQkJCQkJLyog
Yml0cyA0OC01MyAqLwogCi0JCS8qIFRPRE86IGRlY2lkZSB3aGF0IHRvIGRvIHdpdGggU1cgY291
bnRlciAoYml0cyA1NS02MCkgKi8KLQogCQlkZXNjIHw9ICh1NjQpZW5naW5lLT5jbGFzcyA8PCBH
RU4xMV9FTkdJTkVfQ0xBU1NfU0hJRlQ7CiAJCQkJCQkJCS8qIGJpdHMgNjEtNjMgKi8KLQl9IGVs
c2UgewotCQlHRU1fQlVHX09OKGN0eC0+aHdfaWQgPj0gQklUKEdFTjhfQ1RYX0lEX1dJRFRIKSk7
Ci0JCWRlc2MgfD0gKHU2NCljdHgtPmh3X2lkIDw8IEdFTjhfQ1RYX0lEX1NISUZUOwkvKiBiaXRz
IDMyLTUyICovCiAJfQogCiAJcmV0dXJuIGRlc2M7CkBAIC05ODUsNiArOTcyLDE4IEBAIF9fZXhl
Y2xpc3RzX3NjaGVkdWxlX2luKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQogCiAJaW50ZWxfY29u
dGV4dF9nZXQoY2UpOwogCisJaWYgKGNlLT50YWcpIHsKKwkJLyogVXNlIGEgZml4ZWQgdGFnIGZv
ciBPQSBhbmQgZnJpZW5kcyAqLworCQljZS0+bHJjX2Rlc2MgfD0gKHU2NCljZS0+dGFnIDw8IDMy
OworCX0gZWxzZSB7CisJCS8qIFdlIGRvbid0IG5lZWQgYSBzdHJpY3QgbWF0Y2hpbmcgdGFnLCBq
dXN0IGRpZmZlcmVudCB2YWx1ZXMgKi8KKwkJY2UtPmxyY19kZXNjICY9IH5HRU5NQVNLX1VMTCg0
NywgMzcpOworCQljZS0+bHJjX2Rlc2MgfD0KKwkJCSh1NjQpKGVuZ2luZS0+Y29udGV4dF90YWcr
KyAlIE5VTV9DT05URVhUX1RBRykgPDwKKwkJCUdFTjExX1NXX0NUWF9JRF9TSElGVDsKKwkJQlVJ
TERfQlVHX09OKE5VTV9DT05URVhUX1RBRyA+IEdFTjEyX01BWF9DT05URVhUX0hXX0lEKTsKKwl9
CisKIAlpbnRlbF9ndF9wbV9nZXQoZW5naW5lLT5ndCk7CiAJZXhlY2xpc3RzX2NvbnRleHRfc3Rh
dHVzX2NoYW5nZShycSwgSU5URUxfQ09OVEVYVF9TQ0hFRFVMRV9JTik7CiAJaW50ZWxfZW5naW5l
X2NvbnRleHRfaW4oZW5naW5lKTsKQEAgLTIwOTksNyArMjA5OCw2IEBAIHN0YXRpYyB2b2lkIGV4
ZWNsaXN0c19jb250ZXh0X3VucGluKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKIAljaGVja19y
ZWR6b25lKCh2b2lkICopY2UtPmxyY19yZWdfc3RhdGUgLSBMUkNfU1RBVEVfUE4gKiBQQUdFX1NJ
WkUsCiAJCSAgICAgIGNlLT5lbmdpbmUpOwogCi0JaTkxNV9nZW1fY29udGV4dF91bnBpbl9od19p
ZChjZS0+Z2VtX2NvbnRleHQpOwogCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAoY2UtPnN0YXRl
LT5vYmopOwogCWludGVsX3JpbmdfcmVzZXQoY2UtPnJpbmcsIGNlLT5yaW5nLT50YWlsKTsKIH0K
QEAgLTIxNDksMTggKzIxNDcsMTIgQEAgX19leGVjbGlzdHNfY29udGV4dF9waW4oc3RydWN0IGlu
dGVsX2NvbnRleHQgKmNlLAogCQlnb3RvIHVucGluX2FjdGl2ZTsKIAl9CiAKLQlyZXQgPSBpOTE1
X2dlbV9jb250ZXh0X3Bpbl9od19pZChjZS0+Z2VtX2NvbnRleHQpOwotCWlmIChyZXQpCi0JCWdv
dG8gdW5waW5fbWFwOwotCiAJY2UtPmxyY19kZXNjID0gbHJjX2Rlc2NyaXB0b3IoY2UsIGVuZ2lu
ZSk7CiAJY2UtPmxyY19yZWdfc3RhdGUgPSB2YWRkciArIExSQ19TVEFURV9QTiAqIFBBR0VfU0la
RTsKIAlfX2V4ZWNsaXN0c191cGRhdGVfcmVnX3N0YXRlKGNlLCBlbmdpbmUpOwogCiAJcmV0dXJu
IDA7CiAKLXVucGluX21hcDoKLQlpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKGNlLT5zdGF0ZS0+
b2JqKTsKIHVucGluX2FjdGl2ZToKIAlpbnRlbF9jb250ZXh0X2FjdGl2ZV9yZWxlYXNlKGNlKTsK
IGVycjoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9rdm1ndC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2t2bWd0LmMKaW5kZXggMzQzZDc5YzFjYjdlLi4wNGE1YTBk
OTA4MjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9rdm1ndC5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9rdm1ndC5jCkBAIC0xNTY0LDI3ICsxNTY0LDEwIEBA
IHZncHVfaWRfc2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRl
ICphdHRyLAogCXJldHVybiBzcHJpbnRmKGJ1ZiwgIlxuIik7CiB9CiAKLXN0YXRpYyBzc2l6ZV90
Ci1od19pZF9zaG93KHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZV9hdHRyaWJ1dGUg
KmF0dHIsCi0JICAgY2hhciAqYnVmKQotewotCXN0cnVjdCBtZGV2X2RldmljZSAqbWRldiA9IG1k
ZXZfZnJvbV9kZXYoZGV2KTsKLQotCWlmIChtZGV2KSB7Ci0JCXN0cnVjdCBpbnRlbF92Z3B1ICp2
Z3B1ID0gKHN0cnVjdCBpbnRlbF92Z3B1ICopCi0JCQltZGV2X2dldF9kcnZkYXRhKG1kZXYpOwot
CQlyZXR1cm4gc3ByaW50ZihidWYsICIldVxuIiwKLQkJCSAgICAgICB2Z3B1LT5zdWJtaXNzaW9u
LnNoYWRvd1swXS0+Z2VtX2NvbnRleHQtPmh3X2lkKTsKLQl9Ci0JcmV0dXJuIHNwcmludGYoYnVm
LCAiXG4iKTsKLX0KLQogc3RhdGljIERFVklDRV9BVFRSX1JPKHZncHVfaWQpOwotc3RhdGljIERF
VklDRV9BVFRSX1JPKGh3X2lkKTsKIAogc3RhdGljIHN0cnVjdCBhdHRyaWJ1dGUgKmludGVsX3Zn
cHVfYXR0cnNbXSA9IHsKIAkmZGV2X2F0dHJfdmdwdV9pZC5hdHRyLAotCSZkZXZfYXR0cl9od19p
ZC5hdHRyLAogCU5VTEwKIH07CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZGVidWdmcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKaW5kZXgg
MmFmYzQxZTQzYjZlLi4wZTkwYWM2MDhlMDcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZGVidWdmcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdm
cy5jCkBAIC0xNTkzLDkgKzE1OTMsNiBAQCBzdGF0aWMgaW50IGk5MTVfY29udGV4dF9zdGF0dXMo
c3RydWN0IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpCiAJCXN0cnVjdCBpbnRlbF9jb250ZXh0
ICpjZTsKIAogCQlzZXFfcHV0cyhtLCAiSFcgY29udGV4dCAiKTsKLQkJaWYgKCFsaXN0X2VtcHR5
KCZjdHgtPmh3X2lkX2xpbmspKQotCQkJc2VxX3ByaW50ZihtLCAiJXggW3BpbiAldV0iLCBjdHgt
Pmh3X2lkLAotCQkJCSAgIGF0b21pY19yZWFkKCZjdHgtPmh3X2lkX3Bpbl9jb3VudCkpOwogCQlp
ZiAoY3R4LT5waWQpIHsKIAkJCXN0cnVjdCB0YXNrX3N0cnVjdCAqdGFzazsKIApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMKaW5kZXggYTI4ZWU3NTRiN2I0Li41Y2Y0ZWVkNWFkZDgg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYwpAQCAtNDcxLDkgKzQ3MSw5IEBA
IHN0YXRpYyB2b2lkIGVycm9yX3ByaW50X2NvbnRleHQoc3RydWN0IGRybV9pOTE1X2Vycm9yX3N0
YXRlX2J1ZiAqbSwKIAkJCQljb25zdCBjaGFyICpoZWFkZXIsCiAJCQkJY29uc3Qgc3RydWN0IGRy
bV9pOTE1X2Vycm9yX2NvbnRleHQgKmN0eCkKIHsKLQllcnJfcHJpbnRmKG0sICIlcyVzWyVkXSBo
d19pZCAlZCwgcHJpbyAlZCwgZ3VpbHR5ICVkIGFjdGl2ZSAlZFxuIiwKLQkJICAgaGVhZGVyLCBj
dHgtPmNvbW0sIGN0eC0+cGlkLCBjdHgtPmh3X2lkLAotCQkgICBjdHgtPnNjaGVkX2F0dHIucHJp
b3JpdHksIGN0eC0+Z3VpbHR5LCBjdHgtPmFjdGl2ZSk7CisJZXJyX3ByaW50ZihtLCAiJXMlc1sl
ZF0gcHJpbyAlZCwgZ3VpbHR5ICVkIGFjdGl2ZSAlZFxuIiwKKwkJICAgaGVhZGVyLCBjdHgtPmNv
bW0sIGN0eC0+cGlkLCBjdHgtPnNjaGVkX2F0dHIucHJpb3JpdHksCisJCSAgIGN0eC0+Z3VpbHR5
LCBjdHgtPmFjdGl2ZSk7CiB9CiAKIHN0YXRpYyB2b2lkIGVycm9yX3ByaW50X2VuZ2luZShzdHJ1
Y3QgZHJtX2k5MTVfZXJyb3Jfc3RhdGVfYnVmICptLApAQCAtMTI3MSw3ICsxMjcxLDYgQEAgc3Rh
dGljIGJvb2wgcmVjb3JkX2NvbnRleHQoc3RydWN0IGRybV9pOTE1X2Vycm9yX2NvbnRleHQgKmUs
CiAJCXJjdV9yZWFkX3VubG9jaygpOwogCX0KIAotCWUtPmh3X2lkID0gY3R4LT5od19pZDsKIAll
LT5zY2hlZF9hdHRyID0gY3R4LT5zY2hlZDsKIAllLT5ndWlsdHkgPSBhdG9taWNfcmVhZCgmY3R4
LT5ndWlsdHlfY291bnQpOwogCWUtPmFjdGl2ZSA9IGF0b21pY19yZWFkKCZjdHgtPmFjdGl2ZV9j
b3VudCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5o
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuaAppbmRleCA2M2NmMzg3NDEx
ZTAuLjdmMWNkMGIxZmVmNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
cHVfZXJyb3IuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5oCkBA
IC0xMTksNyArMTE5LDYgQEAgc3RydWN0IGk5MTVfZ3B1X3N0YXRlIHsKIAkJc3RydWN0IGRybV9p
OTE1X2Vycm9yX2NvbnRleHQgewogCQkJY2hhciBjb21tW1RBU0tfQ09NTV9MRU5dOwogCQkJcGlk
X3QgcGlkOwotCQkJdTMyIGh3X2lkOwogCQkJaW50IGFjdGl2ZTsKIAkJCWludCBndWlsdHk7CiAJ
CQlzdHJ1Y3QgaTkxNV9zY2hlZF9hdHRyIHNjaGVkX2F0dHI7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVy
Zi5jCmluZGV4IDgwMDU1NTAxZWNjYi4uZWNmYmMzN2I3MzhiIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X3BlcmYuYwpAQCAtMTI4MywyMiArMTI4MywxNSBAQCBzdGF0aWMgaW50IG9hX2dldF9yZW5kZXJf
Y3R4X2lkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiAJCX0gZWxzZSB7CiAJCQlz
dHJlYW0tPnNwZWNpZmljX2N0eF9pZF9tYXNrID0KIAkJCQkoMVUgPDwgR0VOOF9DVFhfSURfV0lE
VEgpIC0gMTsKLQkJCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkID0KLQkJCQl1cHBlcl8zMl9iaXRz
KGNlLT5scmNfZGVzYyk7Ci0JCQlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZCAmPQotCQkJCXN0cmVh
bS0+c3BlY2lmaWNfY3R4X2lkX21hc2s7CisJCQlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZCA9IHN0
cmVhbS0+c3BlY2lmaWNfY3R4X2lkX21hc2s7CiAJCX0KIAkJYnJlYWs7CiAKIAljYXNlIDExOgog
CWNhc2UgMTI6IHsKIAkJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWRfbWFzayA9Ci0JCQkoKDFVIDw8
IEdFTjExX1NXX0NUWF9JRF9XSURUSCkgLSAxKSA8PCAoR0VOMTFfU1dfQ1RYX0lEX1NISUZUIC0g
MzIpIHwKLQkJCSgoMVUgPDwgR0VOMTFfRU5HSU5FX0lOU1RBTkNFX1dJRFRIKSAtIDEpIDw8IChH
RU4xMV9FTkdJTkVfSU5TVEFOQ0VfU0hJRlQgLSAzMikgfAotCQkJKCgxIDw8IEdFTjExX0VOR0lO
RV9DTEFTU19XSURUSCkgLSAxKSA8PCAoR0VOMTFfRU5HSU5FX0NMQVNTX1NISUZUIC0gMzIpOwot
CQlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZCA9IHVwcGVyXzMyX2JpdHMoY2UtPmxyY19kZXNjKTsK
LQkJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWQgJj0KLQkJCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lk
X21hc2s7CisJCQkoKDFVIDw8IEdFTjExX1NXX0NUWF9JRF9XSURUSCkgLSAxKSA8PCAoR0VOMTFf
U1dfQ1RYX0lEX1NISUZUIC0gMzIpOworCQlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZCA9IHN0cmVh
bS0+c3BlY2lmaWNfY3R4X2lkX21hc2s7CiAJCWJyZWFrOwogCX0KIApAQCAtMTMwNiw2ICsxMjk5
LDggQEAgc3RhdGljIGludCBvYV9nZXRfcmVuZGVyX2N0eF9pZChzdHJ1Y3QgaTkxNV9wZXJmX3N0
cmVhbSAqc3RyZWFtKQogCQlNSVNTSU5HX0NBU0UoSU5URUxfR0VOKGk5MTUpKTsKIAl9CiAKKwlj
ZS0+dGFnID0gc3RyZWFtLT5zcGVjaWZpY19jdHhfaWRfbWFzazsKKwogCURSTV9ERUJVR19EUklW
RVIoImZpbHRlcmluZyBvbiBjdHhfaWQ9MHgleCBjdHhfaWRfbWFzaz0weCV4XG4iLAogCQkJIHN0
cmVhbS0+c3BlY2lmaWNfY3R4X2lkLAogCQkJIHN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkX21hc2sp
OwpAQCAtMTMyNCwxMiArMTMxOSwxNCBAQCBzdGF0aWMgdm9pZCBvYV9wdXRfcmVuZGVyX2N0eF9p
ZChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQogewogCXN0cnVjdCBpbnRlbF9jb250
ZXh0ICpjZTsKIAotCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkID0gSU5WQUxJRF9DVFhfSUQ7Ci0J
c3RyZWFtLT5zcGVjaWZpY19jdHhfaWRfbWFzayA9IDA7Ci0KIAljZSA9IGZldGNoX2FuZF96ZXJv
KCZzdHJlYW0tPnBpbm5lZF9jdHgpOwotCWlmIChjZSkKKwlpZiAoY2UpIHsKKwkJY2UtPnRhZyA9
IDA7IC8qIHJlY29tcHV0ZWQgb24gbmV4dCBzdWJtaXNzaW9uIGFmdGVyIHBhcmtpbmcgKi8KIAkJ
aW50ZWxfY29udGV4dF91bnBpbihjZSk7CisJfQorCisJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWQg
PSBJTlZBTElEX0NUWF9JRDsKKwlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZF9tYXNrID0gMDsKIH0K
IAogc3RhdGljIHZvaWQKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdHJh
Y2UuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdHJhY2UuaAppbmRleCAyNGYyOTQ0ZGEw
OWQuLjFmMmNmNmNmYWZiNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90
cmFjZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdHJhY2UuaApAQCAtNjY1LDcg
KzY2NSw2IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF9xdWV1ZSwKIAogCSAgICBUUF9TVFJV
Q1RfX2VudHJ5KAogCQkJICAgICBfX2ZpZWxkKHUzMiwgZGV2KQotCQkJICAgICBfX2ZpZWxkKHUz
MiwgaHdfaWQpCiAJCQkgICAgIF9fZmllbGQodTY0LCBjdHgpCiAJCQkgICAgIF9fZmllbGQodTE2
LCBjbGFzcykKIAkJCSAgICAgX19maWVsZCh1MTYsIGluc3RhbmNlKQpAQCAtNjc1LDcgKzY3NCw2
IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF9xdWV1ZSwKIAogCSAgICBUUF9mYXN0X2Fzc2ln
bigKIAkJCSAgIF9fZW50cnktPmRldiA9IHJxLT5pOTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7Ci0J
CQkgICBfX2VudHJ5LT5od19pZCA9IHJxLT5nZW1fY29udGV4dC0+aHdfaWQ7CiAJCQkgICBfX2Vu
dHJ5LT5jbGFzcyA9IHJxLT5lbmdpbmUtPnVhYmlfY2xhc3M7CiAJCQkgICBfX2VudHJ5LT5pbnN0
YW5jZSA9IHJxLT5lbmdpbmUtPnVhYmlfaW5zdGFuY2U7CiAJCQkgICBfX2VudHJ5LT5jdHggPSBy
cS0+ZmVuY2UuY29udGV4dDsKQEAgLTY4MywxMCArNjgxLDkgQEAgVFJBQ0VfRVZFTlQoaTkxNV9y
ZXF1ZXN0X3F1ZXVlLAogCQkJICAgX19lbnRyeS0+ZmxhZ3MgPSBmbGFnczsKIAkJCSAgICksCiAK
LQkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgaHdfaWQ9JXUsIGN0eD0lbGx1
LCBzZXFubz0ldSwgZmxhZ3M9MHgleCIsCisJICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9
JXU6JXUsIGN0eD0lbGx1LCBzZXFubz0ldSwgZmxhZ3M9MHgleCIsCiAJCSAgICAgIF9fZW50cnkt
PmRldiwgX19lbnRyeS0+Y2xhc3MsIF9fZW50cnktPmluc3RhbmNlLAotCQkgICAgICBfX2VudHJ5
LT5od19pZCwgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywKLQkJICAgICAgX19lbnRyeS0+
ZmxhZ3MpCisJCSAgICAgIF9fZW50cnktPmN0eCwgX19lbnRyeS0+c2Vxbm8sIF9fZW50cnktPmZs
YWdzKQogKTsKIAogREVDTEFSRV9FVkVOVF9DTEFTUyhpOTE1X3JlcXVlc3QsCkBAIC02OTUsNyAr
NjkyLDYgQEAgREVDTEFSRV9FVkVOVF9DTEFTUyhpOTE1X3JlcXVlc3QsCiAKIAkgICAgVFBfU1RS
VUNUX19lbnRyeSgKIAkJCSAgICAgX19maWVsZCh1MzIsIGRldikKLQkJCSAgICAgX19maWVsZCh1
MzIsIGh3X2lkKQogCQkJICAgICBfX2ZpZWxkKHU2NCwgY3R4KQogCQkJICAgICBfX2ZpZWxkKHUx
NiwgY2xhc3MpCiAJCQkgICAgIF9fZmllbGQodTE2LCBpbnN0YW5jZSkKQEAgLTcwNCwxNiArNzAw
LDE1IEBAIERFQ0xBUkVfRVZFTlRfQ0xBU1MoaTkxNV9yZXF1ZXN0LAogCiAJICAgIFRQX2Zhc3Rf
YXNzaWduKAogCQkJICAgX19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRl
eDsKLQkJCSAgIF9fZW50cnktPmh3X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsKIAkJCSAg
IF9fZW50cnktPmNsYXNzID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFzczsKIAkJCSAgIF9fZW50cnkt
Pmluc3RhbmNlID0gcnEtPmVuZ2luZS0+dWFiaV9pbnN0YW5jZTsKIAkJCSAgIF9fZW50cnktPmN0
eCA9IHJxLT5mZW5jZS5jb250ZXh0OwogCQkJICAgX19lbnRyeS0+c2Vxbm8gPSBycS0+ZmVuY2Uu
c2Vxbm87CiAJCQkgICApLAogCi0JICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9JXU6JXUs
IGh3X2lkPSV1LCBjdHg9JWxsdSwgc2Vxbm89JXUiLAorCSAgICBUUF9wcmludGsoImRldj0ldSwg
ZW5naW5lPSV1OiV1LCBjdHg9JWxsdSwgc2Vxbm89JXUiLAogCQkgICAgICBfX2VudHJ5LT5kZXYs
IF9fZW50cnktPmNsYXNzLCBfX2VudHJ5LT5pbnN0YW5jZSwKLQkJICAgICAgX19lbnRyeS0+aHdf
aWQsIF9fZW50cnktPmN0eCwgX19lbnRyeS0+c2Vxbm8pCisJCSAgICAgIF9fZW50cnktPmN0eCwg
X19lbnRyeS0+c2Vxbm8pCiApOwogCiBERUZJTkVfRVZFTlQoaTkxNV9yZXF1ZXN0LCBpOTE1X3Jl
cXVlc3RfYWRkLApAQCAtNzM4LDcgKzczMyw2IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF9p
biwKIAogCSAgICBUUF9TVFJVQ1RfX2VudHJ5KAogCQkJICAgICBfX2ZpZWxkKHUzMiwgZGV2KQot
CQkJICAgICBfX2ZpZWxkKHUzMiwgaHdfaWQpCiAJCQkgICAgIF9fZmllbGQodTY0LCBjdHgpCiAJ
CQkgICAgIF9fZmllbGQodTE2LCBjbGFzcykKIAkJCSAgICAgX19maWVsZCh1MTYsIGluc3RhbmNl
KQpAQCAtNzQ5LDcgKzc0Myw2IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF9pbiwKIAogCSAg
ICBUUF9mYXN0X2Fzc2lnbigKIAkJCSAgIF9fZW50cnktPmRldiA9IHJxLT5pOTE1LT5kcm0ucHJp
bWFyeS0+aW5kZXg7Ci0JCQkgICBfX2VudHJ5LT5od19pZCA9IHJxLT5nZW1fY29udGV4dC0+aHdf
aWQ7CiAJCQkgICBfX2VudHJ5LT5jbGFzcyA9IHJxLT5lbmdpbmUtPnVhYmlfY2xhc3M7CiAJCQkg
ICBfX2VudHJ5LT5pbnN0YW5jZSA9IHJxLT5lbmdpbmUtPnVhYmlfaW5zdGFuY2U7CiAJCQkgICBf
X2VudHJ5LT5jdHggPSBycS0+ZmVuY2UuY29udGV4dDsKQEAgLTc1OCw5ICs3NTEsOSBAQCBUUkFD
RV9FVkVOVChpOTE1X3JlcXVlc3RfaW4sCiAJCQkgICBfX2VudHJ5LT5wb3J0ID0gcG9ydDsKIAkJ
CSAgICksCiAKLQkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgaHdfaWQ9JXUs
IGN0eD0lbGx1LCBzZXFubz0ldSwgcHJpbz0ldSwgcG9ydD0ldSIsCisJICAgIFRQX3ByaW50aygi
ZGV2PSV1LCBlbmdpbmU9JXU6JXUsIGN0eD0lbGx1LCBzZXFubz0ldSwgcHJpbz0ldSwgcG9ydD0l
dSIsCiAJCSAgICAgIF9fZW50cnktPmRldiwgX19lbnRyeS0+Y2xhc3MsIF9fZW50cnktPmluc3Rh
bmNlLAotCQkgICAgICBfX2VudHJ5LT5od19pZCwgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFu
bywKKwkJICAgICAgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywKIAkJICAgICAgX19lbnRy
eS0+cHJpbywgX19lbnRyeS0+cG9ydCkKICk7CiAKQEAgLTc3MCw3ICs3NjMsNiBAQCBUUkFDRV9F
VkVOVChpOTE1X3JlcXVlc3Rfb3V0LAogCiAJICAgIFRQX1NUUlVDVF9fZW50cnkoCiAJCQkgICAg
IF9fZmllbGQodTMyLCBkZXYpCi0JCQkgICAgIF9fZmllbGQodTMyLCBod19pZCkKIAkJCSAgICAg
X19maWVsZCh1NjQsIGN0eCkKIAkJCSAgICAgX19maWVsZCh1MTYsIGNsYXNzKQogCQkJICAgICBf
X2ZpZWxkKHUxNiwgaW5zdGFuY2UpCkBAIC03ODAsNyArNzcyLDYgQEAgVFJBQ0VfRVZFTlQoaTkx
NV9yZXF1ZXN0X291dCwKIAogCSAgICBUUF9mYXN0X2Fzc2lnbigKIAkJCSAgIF9fZW50cnktPmRl
diA9IHJxLT5pOTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7Ci0JCQkgICBfX2VudHJ5LT5od19pZCA9
IHJxLT5nZW1fY29udGV4dC0+aHdfaWQ7CiAJCQkgICBfX2VudHJ5LT5jbGFzcyA9IHJxLT5lbmdp
bmUtPnVhYmlfY2xhc3M7CiAJCQkgICBfX2VudHJ5LT5pbnN0YW5jZSA9IHJxLT5lbmdpbmUtPnVh
YmlfaW5zdGFuY2U7CiAJCQkgICBfX2VudHJ5LT5jdHggPSBycS0+ZmVuY2UuY29udGV4dDsKQEAg
LTc4OCwxMCArNzc5LDkgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X291dCwKIAkJCSAgIF9f
ZW50cnktPmNvbXBsZXRlZCA9IGk5MTVfcmVxdWVzdF9jb21wbGV0ZWQocnEpOwogCQkJICAgKSwK
IAotCQkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgaHdfaWQ9JXUsIGN0eD0l
bGx1LCBzZXFubz0ldSwgY29tcGxldGVkPz0ldSIsCisJCSAgICBUUF9wcmludGsoImRldj0ldSwg
ZW5naW5lPSV1OiV1LCBjdHg9JWxsdSwgc2Vxbm89JXUsIGNvbXBsZXRlZD89JXUiLAogCQkJICAg
ICAgX19lbnRyeS0+ZGV2LCBfX2VudHJ5LT5jbGFzcywgX19lbnRyeS0+aW5zdGFuY2UsCi0JCQkg
ICAgICBfX2VudHJ5LT5od19pZCwgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywKLQkJCSAg
ICAgIF9fZW50cnktPmNvbXBsZXRlZCkKKwkJCSAgICAgIF9fZW50cnktPmN0eCwgX19lbnRyeS0+
c2Vxbm8sIF9fZW50cnktPmNvbXBsZXRlZCkKICk7CiAKICNlbHNlCkBAIC04MjksNyArODE5LDYg
QEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X3dhaXRfYmVnaW4sCiAKIAkgICAgVFBfU1RSVUNU
X19lbnRyeSgKIAkJCSAgICAgX19maWVsZCh1MzIsIGRldikKLQkJCSAgICAgX19maWVsZCh1MzIs
IGh3X2lkKQogCQkJICAgICBfX2ZpZWxkKHU2NCwgY3R4KQogCQkJICAgICBfX2ZpZWxkKHUxNiwg
Y2xhc3MpCiAJCQkgICAgIF9fZmllbGQodTE2LCBpbnN0YW5jZSkKQEAgLTg0NSw3ICs4MzQsNiBA
QCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3Rfd2FpdF9iZWdpbiwKIAkgICAgICovCiAJICAgIFRQ
X2Zhc3RfYXNzaWduKAogCQkJICAgX19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5
LT5pbmRleDsKLQkJCSAgIF9fZW50cnktPmh3X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsK
IAkJCSAgIF9fZW50cnktPmNsYXNzID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFzczsKIAkJCSAgIF9f
ZW50cnktPmluc3RhbmNlID0gcnEtPmVuZ2luZS0+dWFiaV9pbnN0YW5jZTsKIAkJCSAgIF9fZW50
cnktPmN0eCA9IHJxLT5mZW5jZS5jb250ZXh0OwpAQCAtODUzLDkgKzg0MSw5IEBAIFRSQUNFX0VW
RU5UKGk5MTVfcmVxdWVzdF93YWl0X2JlZ2luLAogCQkJICAgX19lbnRyeS0+ZmxhZ3MgPSBmbGFn
czsKIAkJCSAgICksCiAKLQkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgaHdf
aWQ9JXUsIGN0eD0lbGx1LCBzZXFubz0ldSwgZmxhZ3M9MHgleCIsCisJICAgIFRQX3ByaW50aygi
ZGV2PSV1LCBlbmdpbmU9JXU6JXUsIGN0eD0lbGx1LCBzZXFubz0ldSwgZmxhZ3M9MHgleCIsCiAJ
CSAgICAgIF9fZW50cnktPmRldiwgX19lbnRyeS0+Y2xhc3MsIF9fZW50cnktPmluc3RhbmNlLAot
CQkgICAgICBfX2VudHJ5LT5od19pZCwgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywKKwkJ
ICAgICAgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywKIAkJICAgICAgX19lbnRyeS0+Zmxh
Z3MpCiApOwogCkBAIC05NTgsMTkgKzk0NiwxNyBAQCBERUNMQVJFX0VWRU5UX0NMQVNTKGk5MTVf
Y29udGV4dCwKIAlUUF9TVFJVQ1RfX2VudHJ5KAogCQkJX19maWVsZCh1MzIsIGRldikKIAkJCV9f
ZmllbGQoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKiwgY3R4KQotCQkJX19maWVsZCh1MzIsIGh3
X2lkKQogCQkJX19maWVsZChzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICosIHZtKQogCSksCiAK
IAlUUF9mYXN0X2Fzc2lnbigKIAkJCV9fZW50cnktPmRldiA9IGN0eC0+aTkxNS0+ZHJtLnByaW1h
cnktPmluZGV4OwogCQkJX19lbnRyeS0+Y3R4ID0gY3R4OwotCQkJX19lbnRyeS0+aHdfaWQgPSBj
dHgtPmh3X2lkOwogCQkJX19lbnRyeS0+dm0gPSBjdHgtPnZtOwogCSksCiAKLQlUUF9wcmludGso
ImRldj0ldSwgY3R4PSVwLCBjdHhfdm09JXAsIGh3X2lkPSV1IiwKLQkJICBfX2VudHJ5LT5kZXYs
IF9fZW50cnktPmN0eCwgX19lbnRyeS0+dm0sIF9fZW50cnktPmh3X2lkKQorCVRQX3ByaW50aygi
ZGV2PSV1LCBjdHg9JXAsIGN0eF92bT0lcCIsCisJCSAgX19lbnRyeS0+ZGV2LCBfX2VudHJ5LT5j
dHgsIF9fZW50cnktPnZtKQogKQogCiBERUZJTkVfRVZFTlQoaTkxNV9jb250ZXh0LCBpOTE1X2Nv
bnRleHRfY3JlYXRlLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3Rz
L2k5MTVfZ2VtX2V2aWN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9n
ZW1fZXZpY3QuYwppbmRleCA1MmQyZGY4NDMxNDguLmYzOWYwMjgyZTc4YyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2V2aWN0LmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2V2aWN0LmMKQEAgLTQ5MSw4ICs0
OTEsOCBAQCBzdGF0aWMgaW50IGlndF9ldmljdF9jb250ZXh0cyh2b2lkICphcmcpCiAJCQlpZiAo
SVNfRVJSKHJxKSkgewogCQkJCS8qIFdoZW4gZnVsbCwgZmFpbF9pZl9idXN5IHdpbGwgdHJpZ2dl
ciBFQlVTWSAqLwogCQkJCWlmIChQVFJfRVJSKHJxKSAhPSAtRUJVU1kpIHsKLQkJCQkJcHJfZXJy
KCJVbmV4cGVjdGVkIGVycm9yIGZyb20gcmVxdWVzdCBhbGxvYyAoY3R4IGh3IGlkICV1LCBvbiAl
cyk6ICVkXG4iLAotCQkJCQkgICAgICAgY3R4LT5od19pZCwgZW5naW5lLT5uYW1lLAorCQkJCQlw
cl9lcnIoIlVuZXhwZWN0ZWQgZXJyb3IgZnJvbSByZXF1ZXN0IGFsbG9jIChvbiAlcyk6ICVkXG4i
LAorCQkJCQkgICAgICAgZW5naW5lLT5uYW1lLAogCQkJCQkgICAgICAgKGludClQVFJfRVJSKHJx
KSk7CiAJCQkJCWVyciA9IFBUUl9FUlIocnEpOwogCQkJCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
c2VsZnRlc3RzL2k5MTVfdm1hLmMKaW5kZXggMWM5ZGIwOGY3YzI4Li5hYzFmZjU1OGViOTAgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5jCkBAIC0xNzAsNyArMTcw
LDcgQEAgc3RhdGljIGludCBpZ3Rfdm1hX2NyZWF0ZSh2b2lkICphcmcpCiAJCX0KIAogCQluYyA9
IDA7Ci0JCWZvcl9lYWNoX3ByaW1lX251bWJlcihudW1fY3R4LCBNQVhfQ09OVEVYVF9IV19JRCkg
eworCQlmb3JfZWFjaF9wcmltZV9udW1iZXIobnVtX2N0eCwgMiAqIE5VTV9DT05URVhUX1RBRykg
ewogCQkJZm9yICg7IG5jIDwgbnVtX2N0eDsgbmMrKykgewogCQkJCWN0eCA9IG1vY2tfY29udGV4
dChpOTE1LCAibW9jayIpOwogCQkJCWlmICghY3R4KQotLSAKMi4yMy4wCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0
CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

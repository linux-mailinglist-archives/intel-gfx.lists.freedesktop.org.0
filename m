Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A7926734BB
	for <lists+intel-gfx@lfdr.de>; Wed, 24 Jul 2019 19:12:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 953A76E600;
	Wed, 24 Jul 2019 17:12:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 897326E5FC
 for <intel-gfx@lists.freedesktop.org>; Wed, 24 Jul 2019 17:12:22 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga105.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 24 Jul 2019 10:12:22 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,303,1559545200"; d="scan'208";a="171556941"
Received: from jssummer-desk.ra.intel.com ([10.54.134.159])
 by fmsmga007.fm.intel.com with ESMTP; 24 Jul 2019 10:12:21 -0700
From: Stuart Summers <stuart.summers@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 24 Jul 2019 10:12:20 -0700
Message-Id: <20190724171220.22986-10-stuart.summers@intel.com>
X-Mailer: git-send-email 2.21.0.5.gaeb582a983
In-Reply-To: <20190724171220.22986-1-stuart.summers@intel.com>
References: <20190724171220.22986-1-stuart.summers@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 9/9] drm/i915: Expand subslice mask
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Q3VycmVudGx5LCB0aGUgc3Vic2xpY2VfbWFzayBydW50aW1lIHBhcmFtZXRlciBpcyBzdG9yZWQg
YXMgYW4KYXJyYXkgb2Ygc3Vic2xpY2VzIHBlciBzbGljZS4gRXhwYW5kIHRoZSBzdWJzbGljZSBt
YXNrIGFycmF5IHRvCmJldHRlciBtYXRjaCB3aGF0IGlzIHByZXNlbnRlZCB0byB1c2Vyc3BhY2Ug
dGhyb3VnaCB0aGUKSTkxNV9RVUVSWV9UT1BPTE9HWV9JTkZPIGlvY3RsLiBUaGUgaW5kZXggaW50
byB0aGlzIGFycmF5IGlzCnRoZW4gY2FsY3VsYXRlZDoKICBzbGljZSAqIHN1YnNsaWNlIHN0cmlk
ZSArIHN1YnNsaWNlIGluZGV4IC8gOAoKdjI6IEZpeCAzMi1iaXQgYnVpbGQKClNpZ25lZC1vZmYt
Ynk6IFN0dWFydCBTdW1tZXJzIDxzdHVhcnQuc3VtbWVyc0BpbnRlbC5jb20+Ci0tLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5jICAgICAgICB8IDI3ICsrKysrKysrKysrKysr
KysrKysrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5oICAgICAgICB8ICA1
ICsrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMgfCAgMyAr
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jICAgICAgICAgfCAgNSArKyst
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jICAgIHwgIDggKysrLS0t
CiA1IGZpbGVzIGNoYW5nZWQsIDM5IGluc2VydGlvbnMoKyksIDkgZGVsZXRpb25zKC0pCgpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5jCmluZGV4IDYwN2MxNDQ3Mjg3Yy4uZTQyNmYzNGI0
ZGQ2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5jCkBAIC0zMCw2ICszMCwzMSBA
QCBpbnRlbF9zc2V1X3N1YnNsaWNlX3RvdGFsKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpz
c2V1KQogCXJldHVybiB0b3RhbDsKIH0KIAordTMyIGludGVsX3NzZXVfZ2V0X3N1YnNsaWNlcyhj
b25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSwgdTggc2xpY2UpCit7CisJaW50IGksIG9m
ZnNldCA9IHNsaWNlICogc3NldS0+c3Nfc3RyaWRlOworCXUzMiBtYXNrID0gMDsKKworCWlmIChz
bGljZSA+PSBzc2V1LT5tYXhfc2xpY2VzKSB7CisJCURSTV9FUlJPUigiJXM6IGludmFsaWQgc2xp
Y2UgJWQsIG1heDogJWRcbiIsCisJCQkgIF9fZnVuY19fLCBzbGljZSwgc3NldS0+bWF4X3NsaWNl
cyk7CisJCXJldHVybiAwOworCX0KKworCWlmIChzc2V1LT5zc19zdHJpZGUgPiBzaXplb2YobWFz
aykpIHsKKwkJRFJNX0VSUk9SKCIlczogaW52YWxpZCBzdWJzbGljZSBzdHJpZGUgJWQsIG1heDog
JXVcbiIsCisJCQkgIF9fZnVuY19fLCBzc2V1LT5zc19zdHJpZGUsCisJCQkgKHVuc2lnbmVkIGlu
dClzaXplb2YobWFzaykpOworCQlyZXR1cm4gMDsKKwl9CisKKwlmb3IgKGkgPSAwOyBpIDwgc3Nl
dS0+c3Nfc3RyaWRlOyBpKyspCisJCW1hc2sgfD0gKHUzMilzc2V1LT5zdWJzbGljZV9tYXNrW29m
ZnNldCArIGldIDw8CisJCQlpICogQklUU19QRVJfQllURTsKKworCXJldHVybiBtYXNrOworfQor
CiB2b2lkIGludGVsX3NzZXVfc2V0X3N1YnNsaWNlcyhzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3Nl
dSwgaW50IHNsaWNlLAogCQkJICAgICAgdTMyIHNzX21hc2spCiB7CkBAIC00Myw3ICs2OCw3IEBA
IHZvaWQgaW50ZWxfc3NldV9zZXRfc3Vic2xpY2VzKHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1
LCBpbnQgc2xpY2UsCiB1bnNpZ25lZCBpbnQKIGludGVsX3NzZXVfc3Vic2xpY2VzX3Blcl9zbGlj
ZShjb25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSwgdTggc2xpY2UpCiB7Ci0JcmV0dXJu
IGh3ZWlnaHQ4KHNzZXUtPnN1YnNsaWNlX21hc2tbc2xpY2VdKTsKKwlyZXR1cm4gaHdlaWdodDMy
KGludGVsX3NzZXVfZ2V0X3N1YnNsaWNlcyhzc2V1LCBzbGljZSkpOwogfQogCiB1MzIgaW50ZWxf
c3NldV9tYWtlX3JwY3Moc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmggYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9zc2V1LmgKaW5kZXggMGVjYzFjMzVhN2ExLi4yMjkxNzY0YjdkYjUgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmgKQEAgLTE1LDEwICsxNSwxMSBAQCBzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZTsKICNkZWZpbmUgR0VOX01BWF9TTElDRVMJCSg2KSAvKiBDTkwg
dXBwZXIgYm91bmQgKi8KICNkZWZpbmUgR0VOX01BWF9TVUJTTElDRVMJKDgpIC8qIElDTCB1cHBl
ciBib3VuZCAqLwogI2RlZmluZSBHRU5fU1NFVV9TVFJJREUobWF4X2VudHJpZXMpIERJVl9ST1VO
RF9VUChtYXhfZW50cmllcywgQklUU19QRVJfQllURSkKKyNkZWZpbmUgR0VOX01BWF9TVUJTTElD
RV9TVFJJREUgR0VOX1NTRVVfU1RSSURFKEdFTl9NQVhfU1VCU0xJQ0VTKQogCiBzdHJ1Y3Qgc3Nl
dV9kZXZfaW5mbyB7CiAJdTggc2xpY2VfbWFzazsKLQl1OCBzdWJzbGljZV9tYXNrW0dFTl9NQVhf
U0xJQ0VTXTsKKwl1OCBzdWJzbGljZV9tYXNrW0dFTl9NQVhfU0xJQ0VTICogR0VOX01BWF9TVUJT
TElDRV9TVFJJREVdOwogCXUxNiBldV90b3RhbDsKIAl1OCBldV9wZXJfc3Vic2xpY2U7CiAJdTgg
bWluX2V1X2luX3Bvb2w7CkBAIC04NSw2ICs4Niw4IEBAIGludGVsX3NzZXVfc3Vic2xpY2VfdG90
YWwoY29uc3Qgc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUpOwogdW5zaWduZWQgaW50CiBpbnRl
bF9zc2V1X3N1YnNsaWNlc19wZXJfc2xpY2UoY29uc3Qgc3RydWN0IHNzZXVfZGV2X2luZm8gKnNz
ZXUsIHU4IHNsaWNlKTsKIAordTMyICBpbnRlbF9zc2V1X2dldF9zdWJzbGljZXMoY29uc3Qgc3Ry
dWN0IHNzZXVfZGV2X2luZm8gKnNzZXUsIHU4IHNsaWNlKTsKKwogdm9pZCBpbnRlbF9zc2V1X3Nl
dF9zdWJzbGljZXMoc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUsIGludCBzbGljZSwKIAkJCSAg
ICAgIHUzMiBzc19tYXNrKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfd29ya2Fyb3VuZHMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmth
cm91bmRzLmMKaW5kZXggNzA0YWNlMDFlN2Y1Li43ZWM2MDQzNWQ4NzEgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYwpAQCAtNzk0LDggKzc5NCw3IEBAIHdh
X2luaXRfbWNyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBzdHJ1Y3QgaTkxNV93YV9s
aXN0ICp3YWwpCiAJfQogCiAJc2xpY2UgPSBmbHMoc3NldS0+c2xpY2VfbWFzaykgLSAxOwotCUdF
TV9CVUdfT04oc2xpY2UgPj0gQVJSQVlfU0laRShzc2V1LT5zdWJzbGljZV9tYXNrKSk7Ci0Jc3Vi
c2xpY2UgPSBmbHMobDNfZW4gJiBzc2V1LT5zdWJzbGljZV9tYXNrW3NsaWNlXSk7CisJc3Vic2xp
Y2UgPSBmbHMobDNfZW4gJiBpbnRlbF9zc2V1X2dldF9zdWJzbGljZXMoc3NldSwgc2xpY2UpKTsK
IAlpZiAoIXN1YnNsaWNlKSB7CiAJCURSTV9XQVJOKCJObyBjb21tb24gaW5kZXggZm91bmQgYmV0
d2VlbiBzdWJzbGljZSBtYXNrICV4IGFuZCBMMyBiYW5rIG1hc2sgJXghXG4iLAogCQkJIHNzZXUt
PnN1YnNsaWNlX21hc2tbc2xpY2VdLCBsM19lbik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2RlYnVnZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdm
cy5jCmluZGV4IDdmODQyNTA2YjllYS4uOTZhMjVhNzcwYWRlIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2RlYnVnZnMuYwpAQCAtMzk0NCwxMyArMzk0NCwxNiBAQCBzdGF0aWMgdm9pZCBnZW45X3Nz
ZXVfZGV2aWNlX3N0YXR1cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAKIAkJ
Zm9yIChzcyA9IDA7IHNzIDwgaW5mby0+c3NldS5tYXhfc3Vic2xpY2VzOyBzcysrKSB7CiAJCQl1
bnNpZ25lZCBpbnQgZXVfY250OworCQkJdTggc3NfaWR4ID0gcyAqIGluZm8tPnNzZXUuc3Nfc3Ry
aWRlICsKKwkJCQkgICAgc3MgLyBCSVRTX1BFUl9CWVRFOwogCiAJCQlpZiAoSVNfR0VOOV9MUChk
ZXZfcHJpdikpIHsKIAkJCQlpZiAoIShzX3JlZ1tzXSAmIChHRU45X1BHQ1RMX1NTX0FDSyhzcykp
KSkKIAkJCQkJLyogc2tpcCBkaXNhYmxlZCBzdWJzbGljZSAqLwogCQkJCQljb250aW51ZTsKIAot
CQkJCXNzZXUtPnN1YnNsaWNlX21hc2tbc10gfD0gQklUKHNzKTsKKwkJCQlzc2V1LT5zdWJzbGlj
ZV9tYXNrW3NzX2lkeF0gfD0KKwkJCQkJQklUKHNzICUgQklUU19QRVJfQllURSk7CiAJCQl9CiAK
IAkJCWV1X2NudCA9IDIgKiBod2VpZ2h0MzIoZXVfcmVnWzIqcyArIHNzLzJdICYKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jCmluZGV4IDcyM2IxZmRlNWZjNC4uMDRkZGU0
ZjIwNGMzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5m
by5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMKQEAgLTkz
LDkgKzkzLDkgQEAgc3RhdGljIHZvaWQgc3NldV9kdW1wKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9p
bmZvICpzc2V1LCBzdHJ1Y3QgZHJtX3ByaW50ZXIgKnApCiAJCSAgIGh3ZWlnaHQ4KHNzZXUtPnNs
aWNlX21hc2spLCBzc2V1LT5zbGljZV9tYXNrKTsKIAlkcm1fcHJpbnRmKHAsICJzdWJzbGljZSB0
b3RhbDogJXVcbiIsIGludGVsX3NzZXVfc3Vic2xpY2VfdG90YWwoc3NldSkpOwogCWZvciAocyA9
IDA7IHMgPCBzc2V1LT5tYXhfc2xpY2VzOyBzKyspIHsKLQkJZHJtX3ByaW50ZihwLCAic2xpY2Ul
ZDogJXUgc3Vic2xpY2VzLCBtYXNrPSUwNHhcbiIsCisJCWRybV9wcmludGYocCwgInNsaWNlJWQ6
ICV1IHN1YnNsaWNlcywgbWFzaz0lMDh4XG4iLAogCQkJICAgcywgaW50ZWxfc3NldV9zdWJzbGlj
ZXNfcGVyX3NsaWNlKHNzZXUsIHMpLAotCQkJICAgc3NldS0+c3Vic2xpY2VfbWFza1tzXSk7CisJ
CQkgICBpbnRlbF9zc2V1X2dldF9zdWJzbGljZXMoc3NldSwgcykpOwogCX0KIAlkcm1fcHJpbnRm
KHAsICJFVSB0b3RhbDogJXVcbiIsIHNzZXUtPmV1X3RvdGFsKTsKIAlkcm1fcHJpbnRmKHAsICJF
VSBwZXIgc3Vic2xpY2U6ICV1XG4iLCBzc2V1LT5ldV9wZXJfc3Vic2xpY2UpOwpAQCAtMTU5LDkg
KzE1OSw5IEBAIHZvaWQgaW50ZWxfZGV2aWNlX2luZm9fZHVtcF90b3BvbG9neShjb25zdCBzdHJ1
Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSwKIAl9CiAKIAlmb3IgKHMgPSAwOyBzIDwgc3NldS0+bWF4
X3NsaWNlczsgcysrKSB7Ci0JCWRybV9wcmludGYocCwgInNsaWNlJWQ6ICV1IHN1YnNsaWNlKHMp
ICgweCVoaHgpOlxuIiwKKwkJZHJtX3ByaW50ZihwLCAic2xpY2UlZDogJXUgc3Vic2xpY2Uocykg
KDB4JTA4eCk6XG4iLAogCQkJICAgcywgaW50ZWxfc3NldV9zdWJzbGljZXNfcGVyX3NsaWNlKHNz
ZXUsIHMpLAotCQkJICAgc3NldS0+c3Vic2xpY2VfbWFza1tzXSk7CisJCQkgICBpbnRlbF9zc2V1
X2dldF9zdWJzbGljZXMoc3NldSwgcykpOwogCiAJCWZvciAoc3MgPSAwOyBzcyA8IHNzZXUtPm1h
eF9zdWJzbGljZXM7IHNzKyspIHsKIAkJCXUxNiBlbmFibGVkX2V1cyA9IHNzZXVfZ2V0X2V1cyhz
c2V1LCBzLCBzcyk7Ci0tIAoyLjIxLjAuNS5nYWViNTgyYTk4MwoKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRl
bC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

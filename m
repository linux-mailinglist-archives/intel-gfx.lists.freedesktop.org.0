Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 56FE770D3E
	for <lists+intel-gfx@lfdr.de>; Tue, 23 Jul 2019 01:21:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6B35A89F49;
	Mon, 22 Jul 2019 23:21:23 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 16AB989F45
 for <intel-gfx@lists.freedesktop.org>; Mon, 22 Jul 2019 23:21:21 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 Jul 2019 16:21:20 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,296,1559545200"; d="scan'208";a="188709305"
Received: from dceraolo-linux.fm.intel.com ([10.1.27.145])
 by fmsmga001.fm.intel.com with ESMTP; 22 Jul 2019 16:21:20 -0700
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 22 Jul 2019 16:20:42 -0700
Message-Id: <20190722232048.9970-4-daniele.ceraolospurio@intel.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190722232048.9970-1-daniele.ceraolospurio@intel.com>
References: <20190722232048.9970-1-daniele.ceraolospurio@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 3/9] drm/i915/uc: Unify uC FW selection
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SW5zdGVhZCBvZiBoYXZpbmcgMiBpZGVudGljYWwgZnVuY3Rpb25zIGZvciBHdUMgYW5kIEh1QyBm
aXJtd2FyZQpzZWxlY3Rpb24sIHdlIGNhbiB1bmlmeSB0aGUgc2VsZWN0aW9uIGxvZ2ljIGFuZCBq
dXN0IHVzZSBkaWZmZXJlbnQgbGlzdHMKYmFzZWQgb24gRlcgdHlwZS4KCk5vdGUgdGhhdCB0aGUg
cmV2aWQgaXMgbm90IHJlbGV2YW50IGZvciBjdXJyZW50IGJsb2JzLCBidXQgdGhlIHVwY29taW5n
CkNNTCB3aWxsIGJlIGlkZW50aWZpZWQgYXMgQ0ZMIHJldiA1LCBzbyBieSBjb25zaWRlcmluZyB0
aGUgcmV2aWQgd2UncmUKcmVhZHkgZm9yIHRoYXQuCgpTaWduZWQtb2ZmLWJ5OiBEYW5pZWxlIENl
cmFvbG8gU3B1cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29tPgpDYzogTWljaGFs
IFdhamRlY3prbyA8bWljaGFsLndhamRlY3prb0BpbnRlbC5jb20+CkNjOiBBbnVzaGEgU3JpdmF0
c2EgPGFudXNoYS5zcml2YXRzYUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvdWMvaW50ZWxfZ3VjX2Z3LmMgfCAxMDkgKysrKysrLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfaHVjX2Z3LmMgfCAxMDIgKysrKystLS0tLS0tLS0t
LS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjX2Z3LmMgIHwgIDQ3ICsr
KysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjX2Z3LmggIHwgIDI3
ICsrKysrLQogNCBmaWxlcyBjaGFuZ2VkLCAxMjEgaW5zZXJ0aW9ucygrKSwgMTY0IGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19m
dy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2Z3LmMKaW5kZXggZGRk
M2IyMTYyNTI4Li44NmRmNTE0N2ZjMGEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3VjL2ludGVsX2d1Y19mdy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2lu
dGVsX2d1Y19mdy5jCkBAIC0zMSw4OCArMzEsMzIgQEAKICNpbmNsdWRlICJpbnRlbF9ndWNfZncu
aCIKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogCi0jZGVmaW5lIF9fTUFLRV9HVUNfRldfUEFUSChL
RVkpIFwKKyNkZWZpbmUgX19NQUtFX0dVQ19GV19QQVRIKHByZWZpeF8sIG1ham9yXywgbWlub3Jf
LCBwYXRjaF8pIFwKIAkiaTkxNS8iIFwKLQlfX3N0cmluZ2lmeShLRVkjI19HVUNfRldfUFJFRklY
KSAiX2d1Y18iIFwKLQlfX3N0cmluZ2lmeShLRVkjI19HVUNfRldfTUFKT1IpICIuIiBcCi0JX19z
dHJpbmdpZnkoS0VZIyNfR1VDX0ZXX01JTk9SKSAiLiIgXAotCV9fc3RyaW5naWZ5KEtFWSMjX0dV
Q19GV19QQVRDSCkgIi5iaW4iCi0KLSNkZWZpbmUgU0tMX0dVQ19GV19QUkVGSVggc2tsCi0jZGVm
aW5lIFNLTF9HVUNfRldfTUFKT1IgMzMKLSNkZWZpbmUgU0tMX0dVQ19GV19NSU5PUiAwCi0jZGVm
aW5lIFNLTF9HVUNfRldfUEFUQ0ggMAotI2RlZmluZSBTS0xfR1VDX0ZJUk1XQVJFX1BBVEggX19N
QUtFX0dVQ19GV19QQVRIKFNLTCkKLU1PRFVMRV9GSVJNV0FSRShTS0xfR1VDX0ZJUk1XQVJFX1BB
VEgpOwotCi0jZGVmaW5lIEJYVF9HVUNfRldfUFJFRklYIGJ4dAotI2RlZmluZSBCWFRfR1VDX0ZX
X01BSk9SIDMzCi0jZGVmaW5lIEJYVF9HVUNfRldfTUlOT1IgMAotI2RlZmluZSBCWFRfR1VDX0ZX
X1BBVENIIDAKLSNkZWZpbmUgQlhUX0dVQ19GSVJNV0FSRV9QQVRIIF9fTUFLRV9HVUNfRldfUEFU
SChCWFQpCi1NT0RVTEVfRklSTVdBUkUoQlhUX0dVQ19GSVJNV0FSRV9QQVRIKTsKLQotI2RlZmlu
ZSBLQkxfR1VDX0ZXX1BSRUZJWCBrYmwKLSNkZWZpbmUgS0JMX0dVQ19GV19NQUpPUiAzMwotI2Rl
ZmluZSBLQkxfR1VDX0ZXX01JTk9SIDAKLSNkZWZpbmUgS0JMX0dVQ19GV19QQVRDSCAwCi0jZGVm
aW5lIEtCTF9HVUNfRklSTVdBUkVfUEFUSCBfX01BS0VfR1VDX0ZXX1BBVEgoS0JMKQotTU9EVUxF
X0ZJUk1XQVJFKEtCTF9HVUNfRklSTVdBUkVfUEFUSCk7Ci0KLSNkZWZpbmUgR0xLX0dVQ19GV19Q
UkVGSVggZ2xrCi0jZGVmaW5lIEdMS19HVUNfRldfTUFKT1IgMzMKLSNkZWZpbmUgR0xLX0dVQ19G
V19NSU5PUiAwCi0jZGVmaW5lIEdMS19HVUNfRldfUEFUQ0ggMAotI2RlZmluZSBHTEtfR1VDX0ZJ
Uk1XQVJFX1BBVEggX19NQUtFX0dVQ19GV19QQVRIKEdMSykKLU1PRFVMRV9GSVJNV0FSRShHTEtf
R1VDX0ZJUk1XQVJFX1BBVEgpOwotCi0jZGVmaW5lIElDTF9HVUNfRldfUFJFRklYIGljbAotI2Rl
ZmluZSBJQ0xfR1VDX0ZXX01BSk9SIDMzCi0jZGVmaW5lIElDTF9HVUNfRldfTUlOT1IgMAotI2Rl
ZmluZSBJQ0xfR1VDX0ZXX1BBVENIIDAKLSNkZWZpbmUgSUNMX0dVQ19GSVJNV0FSRV9QQVRIIF9f
TUFLRV9HVUNfRldfUEFUSChJQ0wpCi1NT0RVTEVfRklSTVdBUkUoSUNMX0dVQ19GSVJNV0FSRV9Q
QVRIKTsKLQotc3RhdGljIHZvaWQgZ3VjX2Z3X3NlbGVjdChzdHJ1Y3QgaW50ZWxfdWNfZncgKmd1
Y19mdykKLXsKLQlzdHJ1Y3QgaW50ZWxfZ3VjICpndWMgPSBjb250YWluZXJfb2YoZ3VjX2Z3LCBz
dHJ1Y3QgaW50ZWxfZ3VjLCBmdyk7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBn
dWNfdG9fZ3QoZ3VjKS0+aTkxNTsKLQotCUdFTV9CVUdfT04oZ3VjX2Z3LT50eXBlICE9IElOVEVM
X1VDX0ZXX1RZUEVfR1VDKTsKLQotCWlmICghSEFTX1VDKGk5MTUpKSB7Ci0JCWd1Y19mdy0+ZmV0
Y2hfc3RhdHVzID0gSU5URUxfVUNfRklSTVdBUkVfTk9UX1NVUFBPUlRFRDsKLQkJcmV0dXJuOwot
CX0KLQotCWd1Y19mdy0+ZmV0Y2hfc3RhdHVzID0gSU5URUxfVUNfRklSTVdBUkVfTk9UX1NUQVJU
RUQ7Ci0KLQlpZiAoaTkxNV9tb2RwYXJhbXMuZ3VjX2Zpcm13YXJlX3BhdGgpIHsKLQkJZ3VjX2Z3
LT5wYXRoID0gaTkxNV9tb2RwYXJhbXMuZ3VjX2Zpcm13YXJlX3BhdGg7Ci0JCWd1Y19mdy0+bWFq
b3JfdmVyX3dhbnRlZCA9IDA7Ci0JCWd1Y19mdy0+bWlub3JfdmVyX3dhbnRlZCA9IDA7Ci0JfSBl
bHNlIGlmIChJU19JQ0VMQUtFKGk5MTUpKSB7Ci0JCWd1Y19mdy0+cGF0aCA9IElDTF9HVUNfRklS
TVdBUkVfUEFUSDsKLQkJZ3VjX2Z3LT5tYWpvcl92ZXJfd2FudGVkID0gSUNMX0dVQ19GV19NQUpP
UjsKLQkJZ3VjX2Z3LT5taW5vcl92ZXJfd2FudGVkID0gSUNMX0dVQ19GV19NSU5PUjsKLQl9IGVs
c2UgaWYgKElTX0dFTUlOSUxBS0UoaTkxNSkpIHsKLQkJZ3VjX2Z3LT5wYXRoID0gR0xLX0dVQ19G
SVJNV0FSRV9QQVRIOwotCQlndWNfZnctPm1ham9yX3Zlcl93YW50ZWQgPSBHTEtfR1VDX0ZXX01B
Sk9SOwotCQlndWNfZnctPm1pbm9yX3Zlcl93YW50ZWQgPSBHTEtfR1VDX0ZXX01JTk9SOwotCX0g
ZWxzZSBpZiAoSVNfS0FCWUxBS0UoaTkxNSkgfHwgSVNfQ09GRkVFTEFLRShpOTE1KSkgewotCQln
dWNfZnctPnBhdGggPSBLQkxfR1VDX0ZJUk1XQVJFX1BBVEg7Ci0JCWd1Y19mdy0+bWFqb3JfdmVy
X3dhbnRlZCA9IEtCTF9HVUNfRldfTUFKT1I7Ci0JCWd1Y19mdy0+bWlub3JfdmVyX3dhbnRlZCA9
IEtCTF9HVUNfRldfTUlOT1I7Ci0JfSBlbHNlIGlmIChJU19CUk9YVE9OKGk5MTUpKSB7Ci0JCWd1
Y19mdy0+cGF0aCA9IEJYVF9HVUNfRklSTVdBUkVfUEFUSDsKLQkJZ3VjX2Z3LT5tYWpvcl92ZXJf
d2FudGVkID0gQlhUX0dVQ19GV19NQUpPUjsKLQkJZ3VjX2Z3LT5taW5vcl92ZXJfd2FudGVkID0g
QlhUX0dVQ19GV19NSU5PUjsKLQl9IGVsc2UgaWYgKElTX1NLWUxBS0UoaTkxNSkpIHsKLQkJZ3Vj
X2Z3LT5wYXRoID0gU0tMX0dVQ19GSVJNV0FSRV9QQVRIOwotCQlndWNfZnctPm1ham9yX3Zlcl93
YW50ZWQgPSBTS0xfR1VDX0ZXX01BSk9SOwotCQlndWNfZnctPm1pbm9yX3Zlcl93YW50ZWQgPSBT
S0xfR1VDX0ZXX01JTk9SOwotCX0KLX0KKwlfX3N0cmluZ2lmeShwcmVmaXhfKSAiX2d1Y18iIFwK
KwlfX3N0cmluZ2lmeShtYWpvcl8pICIuIiBcCisJX19zdHJpbmdpZnkobWlub3JfKSAiLiIgXAor
CV9fc3RyaW5naWZ5KHBhdGNoXykgIi5iaW4iCisKKyNkZWZpbmUgR1VDX0ZXX0JMT0IocHJlZml4
XywgbWFqb3JfLCBtaW5vcl8sIHBhdGNoXykgXAorVUNfRldfQkxPQihwcmVmaXhfIyNfZ3VjLCBt
YWpvcl8sIG1pbm9yXywgXAorCSAgIF9fTUFLRV9HVUNfRldfUEFUSChwcmVmaXhfLCBtYWpvcl8s
IG1pbm9yXywgcGF0Y2hfKSkKKworR1VDX0ZXX0JMT0Ioc2tsLCAzMywgMCwgMCk7CitHVUNfRldf
QkxPQihieHQsIDMzLCAwLCAwKTsKK0dVQ19GV19CTE9CKGtibCwgMzMsIDAsIDApOworR1VDX0ZX
X0JMT0IoZ2xrLCAzMywgMCwgMCk7CitHVUNfRldfQkxPQihpY2wsIDMzLCAwLCAwKTsKKworLyog
bXVzdCBiZSBvcmRlcmVkIGJhc2Ugb24gcGxhdGZvcm0gKyByZXZpZCwgZnJvbSBuZXdlciB0byBv
bGRlciAqLworc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF91Y19wbGF0Zm9ybV9yZXF1aXJlbWVu
dCBndWNfZndfYmxvYnNbXSA9IHsKKwl7IElOVEVMX0lDRUxBS0UsCTAsCSZpY2xfZ3VjX2Z3X2Js
b2IgfSwKKwl7IElOVEVMX0NPRkZFRUxBS0UsCTAsCSZrYmxfZ3VjX2Z3X2Jsb2IgfSwKKwl7IElO
VEVMX0dFTUlOSUxBS0UsCTAsCSZnbGtfZ3VjX2Z3X2Jsb2IgfSwKKwl7IElOVEVMX0tBQllMQUtF
LAkwLAkma2JsX2d1Y19md19ibG9iIH0sCisJeyBJTlRFTF9CUk9YVE9OLAkwLAkmYnh0X2d1Y19m
d19ibG9iIH0sCisJeyBJTlRFTF9TS1lMQUtFLAkwLAkmc2tsX2d1Y19md19ibG9iIH0sCit9Owog
CiAvKioKICAqIGludGVsX2d1Y19md19pbml0X2Vhcmx5KCkgLSBpbml0aWFsaXplcyBHdUMgZmly
bXdhcmUgc3RydWN0CkBAIC0xMjUsNyArNjksOCBAQCB2b2lkIGludGVsX2d1Y19md19pbml0X2Vh
cmx5KHN0cnVjdCBpbnRlbF9ndWMgKmd1YykKIAlzdHJ1Y3QgaW50ZWxfdWNfZncgKmd1Y19mdyA9
ICZndWMtPmZ3OwogCiAJaW50ZWxfdWNfZndfaW5pdF9lYXJseShndWNfZncsIElOVEVMX1VDX0ZX
X1RZUEVfR1VDKTsKLQlndWNfZndfc2VsZWN0KGd1Y19mdyk7CisJaW50ZWxfdWNfZndfc2VsZWN0
KGd1Y190b19ndChndWMpLT5pOTE1LCBndWNfZncsCisJCQkgICBndWNfZndfYmxvYnMsIEFSUkFZ
X1NJWkUoZ3VjX2Z3X2Jsb2JzKSk7CiB9CiAKIHN0YXRpYyB2b2lkIGd1Y19wcmVwYXJlX3hmZXIo
c3RydWN0IGludGVsX2d1YyAqZ3VjKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvdWMvaW50ZWxfaHVjX2Z3LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9o
dWNfZncuYwppbmRleCAxNTg5MWNmNGJiMmMuLjI2Mzk3NzI5NGVmMCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfaHVjX2Z3LmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvdWMvaW50ZWxfaHVjX2Z3LmMKQEAgLTIzLDkwICsyMywyOSBAQAogICogTm90
ZSB0aGF0IEh1QyBmaXJtd2FyZSBsb2FkaW5nIG11c3QgYmUgZG9uZSBiZWZvcmUgR3VDIGxvYWRp
bmcuCiAgKi8KIAotI2RlZmluZSBCWFRfSFVDX0ZXX01BSk9SIDAxCi0jZGVmaW5lIEJYVF9IVUNf
RldfTUlOT1IgOAotI2RlZmluZSBCWFRfQkxEX05VTSAyODkzCi0KLSNkZWZpbmUgU0tMX0hVQ19G
V19NQUpPUiAwMQotI2RlZmluZSBTS0xfSFVDX0ZXX01JTk9SIDA3Ci0jZGVmaW5lIFNLTF9CTERf
TlVNIDEzOTgKLQotI2RlZmluZSBLQkxfSFVDX0ZXX01BSk9SIDAyCi0jZGVmaW5lIEtCTF9IVUNf
RldfTUlOT1IgMDAKLSNkZWZpbmUgS0JMX0JMRF9OVU0gMTgxMAotCi0jZGVmaW5lIEdMS19IVUNf
RldfTUFKT1IgMDMKLSNkZWZpbmUgR0xLX0hVQ19GV19NSU5PUiAwMQotI2RlZmluZSBHTEtfQkxE
X05VTSAyODkzCi0KLSNkZWZpbmUgSUNMX0hVQ19GV19NQUpPUiA4Ci0jZGVmaW5lIElDTF9IVUNf
RldfTUlOT1IgNAotI2RlZmluZSBJQ0xfQkxEX05VTSAzMjM4Ci0KICNkZWZpbmUgSFVDX0ZXX1BB
VEgocGxhdGZvcm0sIG1ham9yLCBtaW5vciwgYmxkX251bSkgXAogCSJpOTE1LyIgX19zdHJpbmdp
ZnkocGxhdGZvcm0pICJfaHVjX3ZlciIgX19zdHJpbmdpZnkobWFqb3IpICJfIiBcCiAJX19zdHJp
bmdpZnkobWlub3IpICJfIiBfX3N0cmluZ2lmeShibGRfbnVtKSAiLmJpbiIKIAotI2RlZmluZSBJ
OTE1X1NLTF9IVUNfVUNPREUgSFVDX0ZXX1BBVEgoc2tsLCBTS0xfSFVDX0ZXX01BSk9SLCBcCi0J
U0tMX0hVQ19GV19NSU5PUiwgU0tMX0JMRF9OVU0pCi1NT0RVTEVfRklSTVdBUkUoSTkxNV9TS0xf
SFVDX1VDT0RFKTsKLQotI2RlZmluZSBJOTE1X0JYVF9IVUNfVUNPREUgSFVDX0ZXX1BBVEgoYnh0
LCBCWFRfSFVDX0ZXX01BSk9SLCBcCi0JQlhUX0hVQ19GV19NSU5PUiwgQlhUX0JMRF9OVU0pCi1N
T0RVTEVfRklSTVdBUkUoSTkxNV9CWFRfSFVDX1VDT0RFKTsKLQotI2RlZmluZSBJOTE1X0tCTF9I
VUNfVUNPREUgSFVDX0ZXX1BBVEgoa2JsLCBLQkxfSFVDX0ZXX01BSk9SLCBcCi0JS0JMX0hVQ19G
V19NSU5PUiwgS0JMX0JMRF9OVU0pCi1NT0RVTEVfRklSTVdBUkUoSTkxNV9LQkxfSFVDX1VDT0RF
KTsKLQotI2RlZmluZSBJOTE1X0dMS19IVUNfVUNPREUgSFVDX0ZXX1BBVEgoZ2xrLCBHTEtfSFVD
X0ZXX01BSk9SLCBcCi0JR0xLX0hVQ19GV19NSU5PUiwgR0xLX0JMRF9OVU0pCi1NT0RVTEVfRklS
TVdBUkUoSTkxNV9HTEtfSFVDX1VDT0RFKTsKLQotI2RlZmluZSBJOTE1X0lDTF9IVUNfVUNPREUg
SFVDX0ZXX1BBVEgoaWNsLCBJQ0xfSFVDX0ZXX01BSk9SLCBcCi0JSUNMX0hVQ19GV19NSU5PUiwg
SUNMX0JMRF9OVU0pCi1NT0RVTEVfRklSTVdBUkUoSTkxNV9JQ0xfSFVDX1VDT0RFKTsKLQotc3Rh
dGljIHZvaWQgaHVjX2Z3X3NlbGVjdChzdHJ1Y3QgaW50ZWxfdWNfZncgKmh1Y19mdykKLXsKLQlz
dHJ1Y3QgaW50ZWxfaHVjICpodWMgPSBjb250YWluZXJfb2YoaHVjX2Z3LCBzdHJ1Y3QgaW50ZWxf
aHVjLCBmdyk7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gaHVjX3RvX2d0
KGh1YyktPmk5MTU7Ci0KLQlHRU1fQlVHX09OKGh1Y19mdy0+dHlwZSAhPSBJTlRFTF9VQ19GV19U
WVBFX0hVQyk7Ci0KLQlpZiAoIUhBU19VQyhkZXZfcHJpdikpIHsKLQkJaHVjX2Z3LT5mZXRjaF9z
dGF0dXMgPSBJTlRFTF9VQ19GSVJNV0FSRV9OT1RfU1VQUE9SVEVEOwotCQlyZXR1cm47Ci0JfQot
Ci0JaHVjX2Z3LT5mZXRjaF9zdGF0dXMgPSBJTlRFTF9VQ19GSVJNV0FSRV9OT1RfU1RBUlRFRDsK
LQotCWlmIChpOTE1X21vZHBhcmFtcy5odWNfZmlybXdhcmVfcGF0aCkgewotCQlodWNfZnctPnBh
dGggPSBpOTE1X21vZHBhcmFtcy5odWNfZmlybXdhcmVfcGF0aDsKLQkJaHVjX2Z3LT5tYWpvcl92
ZXJfd2FudGVkID0gMDsKLQkJaHVjX2Z3LT5taW5vcl92ZXJfd2FudGVkID0gMDsKLQl9IGVsc2Ug
aWYgKElTX1NLWUxBS0UoZGV2X3ByaXYpKSB7Ci0JCWh1Y19mdy0+cGF0aCA9IEk5MTVfU0tMX0hV
Q19VQ09ERTsKLQkJaHVjX2Z3LT5tYWpvcl92ZXJfd2FudGVkID0gU0tMX0hVQ19GV19NQUpPUjsK
LQkJaHVjX2Z3LT5taW5vcl92ZXJfd2FudGVkID0gU0tMX0hVQ19GV19NSU5PUjsKLQl9IGVsc2Ug
aWYgKElTX0JST1hUT04oZGV2X3ByaXYpKSB7Ci0JCWh1Y19mdy0+cGF0aCA9IEk5MTVfQlhUX0hV
Q19VQ09ERTsKLQkJaHVjX2Z3LT5tYWpvcl92ZXJfd2FudGVkID0gQlhUX0hVQ19GV19NQUpPUjsK
LQkJaHVjX2Z3LT5taW5vcl92ZXJfd2FudGVkID0gQlhUX0hVQ19GV19NSU5PUjsKLQl9IGVsc2Ug
aWYgKElTX0tBQllMQUtFKGRldl9wcml2KSB8fCBJU19DT0ZGRUVMQUtFKGRldl9wcml2KSkgewot
CQlodWNfZnctPnBhdGggPSBJOTE1X0tCTF9IVUNfVUNPREU7Ci0JCWh1Y19mdy0+bWFqb3JfdmVy
X3dhbnRlZCA9IEtCTF9IVUNfRldfTUFKT1I7Ci0JCWh1Y19mdy0+bWlub3JfdmVyX3dhbnRlZCA9
IEtCTF9IVUNfRldfTUlOT1I7Ci0JfSBlbHNlIGlmIChJU19HRU1JTklMQUtFKGRldl9wcml2KSkg
ewotCQlodWNfZnctPnBhdGggPSBJOTE1X0dMS19IVUNfVUNPREU7Ci0JCWh1Y19mdy0+bWFqb3Jf
dmVyX3dhbnRlZCA9IEdMS19IVUNfRldfTUFKT1I7Ci0JCWh1Y19mdy0+bWlub3JfdmVyX3dhbnRl
ZCA9IEdMS19IVUNfRldfTUlOT1I7Ci0JfSBlbHNlIGlmIChJU19JQ0VMQUtFKGRldl9wcml2KSkg
ewotCQlodWNfZnctPnBhdGggPSBJOTE1X0lDTF9IVUNfVUNPREU7Ci0JCWh1Y19mdy0+bWFqb3Jf
dmVyX3dhbnRlZCA9IElDTF9IVUNfRldfTUFKT1I7Ci0JCWh1Y19mdy0+bWlub3JfdmVyX3dhbnRl
ZCA9IElDTF9IVUNfRldfTUlOT1I7Ci0JfQotfQorI2RlZmluZSBIVUNfRldfQkxPQihwcmVmaXhf
LCBtYWpvcl8sIG1pbm9yXywgYmxkX251bV8pIFwKK1VDX0ZXX0JMT0IocHJlZml4XyMjX2h1Yywg
bWFqb3JfLCBtaW5vcl8sIFwKKwkgICBIVUNfRldfUEFUSChwcmVmaXhfLCBtYWpvcl8sIG1pbm9y
XywgYmxkX251bV8pKQorCitIVUNfRldfQkxPQihza2wsIDAxLCAwNywgMTM5OCk7CitIVUNfRldf
QkxPQihieHQsIDAxLCAgOCwgMjg5Myk7CitIVUNfRldfQkxPQihrYmwsIDAyLCAwMCwgMTgxMCk7
CitIVUNfRldfQkxPQihnbGssIDAzLCAwMSwgMjg5Myk7CitIVUNfRldfQkxPQihpY2wsICA4LCAg
NCwgMzIzOCk7CisKKy8qIG11c3QgYmUgb3JkZXJlZCBiYXNlIG9uIHBsYXRmb3JtICsgcmV2aWQs
IGZyb20gbmV3ZXIgdG8gb2xkZXIgKi8KK3N0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfdWNfcGxh
dGZvcm1fcmVxdWlyZW1lbnQgaHVjX2Z3X2Jsb2JzW10gPSB7CisJeyBJTlRFTF9JQ0VMQUtFLAkw
LAkmaWNsX2h1Y19md19ibG9iIH0sCisJeyBJTlRFTF9DT0ZGRUVMQUtFLAkwLAkma2JsX2h1Y19m
d19ibG9iIH0sCisJeyBJTlRFTF9HRU1JTklMQUtFLAkwLAkmZ2xrX2h1Y19md19ibG9iIH0sCisJ
eyBJTlRFTF9LQUJZTEFLRSwJMCwJJmtibF9odWNfZndfYmxvYiB9LAorCXsgSU5URUxfQlJPWFRP
TiwJMCwJJmJ4dF9odWNfZndfYmxvYiB9LAorCXsgSU5URUxfU0tZTEFLRSwJMCwJJnNrbF9odWNf
ZndfYmxvYiB9LAorfTsKIAogLyoqCiAgKiBpbnRlbF9odWNfZndfaW5pdF9lYXJseSgpIC0gaW5p
dGlhbGl6ZXMgSHVDIGZpcm13YXJlIHN0cnVjdApAQCAtMTE5LDcgKzU4LDggQEAgdm9pZCBpbnRl
bF9odWNfZndfaW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfaHVjICpodWMpCiAJc3RydWN0IGludGVs
X3VjX2Z3ICpodWNfZncgPSAmaHVjLT5mdzsKIAogCWludGVsX3VjX2Z3X2luaXRfZWFybHkoaHVj
X2Z3LCBJTlRFTF9VQ19GV19UWVBFX0hVQyk7Ci0JaHVjX2Z3X3NlbGVjdChodWNfZncpOworCWlu
dGVsX3VjX2Z3X3NlbGVjdChodWNfdG9fZ3QoaHVjKS0+aTkxNSwgaHVjX2Z3LAorCQkJICAgaHVj
X2Z3X2Jsb2JzLCBBUlJBWV9TSVpFKGh1Y19md19ibG9icykpOwogfQogCiBzdGF0aWMgdm9pZCBo
dWNfeGZlcl9yc2Eoc3RydWN0IGludGVsX2h1YyAqaHVjKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWNfZncuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L3VjL2ludGVsX3VjX2Z3LmMKaW5kZXggOGNlNzIxMDkwN2MwLi5mYWE5Njc0OGFlZDMgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjX2Z3LmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWNfZncuYwpAQCAtMjksNiArMjksNTMgQEAK
ICNpbmNsdWRlICJpbnRlbF91Y19mdy5oIgogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAKKy8qKgor
ICogaW50ZWxfdWNfZndfc2VsZWN0IC0gc2VsZWN0IHRoZSB1QyBmaXJtd2FyZSB0byBmZXRjaCAm
IGxvYWQKKyAqIEBpOTE1OiBkZXZpY2UgcHJpdmF0ZQorICogQHVjX2Z3OiB1QyBmaXJtd2FyZQor
ICogQGxpc3Q6IGxpc3Qgb2YgcmVxdWlyZWQgZmlybXdhcmUgZm9yIGVhY2ggcGxhdGZvcm0KKyAq
IEBsZW5ndGg6IG51bWJlciBvZiBlbnRyaWVzIGluIHRoZSBsaXN0CisgKgorICogU2VsZWN0IHRo
ZSB1QyBmaXJtd2FyZSBmcm9tIHRoZSBwcm92aWRlZCBsaXN0IGJhc2VkIG9uIHBsYXRmb3JtIGFu
ZCByZXZpZCBvZgorICogdGhlIGRldmljZSB3ZSdyZSBvbi4gSWYgdGhlIGZpcm13YXJlX3BhdGgg
bW9kcGFyYW0gb3ZlcnJpZGUgaXMgc2V0LCBpdCB0YWtlcworICogcHJlY2VkZW5jZSBvdmVyIHRo
ZSBlbnRyaWVzIGluIHRoZSBsaXN0LgorICovCit2b2lkIGludGVsX3VjX2Z3X3NlbGVjdChzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKKwkJCXN0cnVjdCBpbnRlbF91Y19mdyAqdWNfZncs
CisJCQljb25zdCBzdHJ1Y3QgaW50ZWxfdWNfcGxhdGZvcm1fcmVxdWlyZW1lbnQgKmxpc3QsCisJ
CQl1bnNpZ25lZCBpbnQgbGVuZ3RoKQoreworCUdFTV9CVUdfT04odWNfZnctPmZldGNoX3N0YXR1
cyAhPSBJTlRFTF9VQ19GSVJNV0FSRV9VTklOSVRJQUxJWkVEKTsKKworCWlmICghSEFTX1VDKGk5
MTUpKSB7CisJCXVjX2Z3LT5mZXRjaF9zdGF0dXMgPSBJTlRFTF9VQ19GSVJNV0FSRV9OT1RfU1VQ
UE9SVEVEOworCQlyZXR1cm47CisJfQorCisJdWNfZnctPmZldGNoX3N0YXR1cyA9IElOVEVMX1VD
X0ZJUk1XQVJFX05PVF9TVEFSVEVEOworCisJaWYgKHVubGlrZWx5KGk5MTVfbW9kcGFyYW1zLmd1
Y19maXJtd2FyZV9wYXRoICYmCisJCSAgICAgdWNfZnctPnR5cGUgPT0gSU5URUxfVUNfRldfVFlQ
RV9HVUMpKSB7CisJCXVjX2Z3LT5wYXRoID0gaTkxNV9tb2RwYXJhbXMuZ3VjX2Zpcm13YXJlX3Bh
dGg7CisJfSBlbHNlIGlmICh1bmxpa2VseShpOTE1X21vZHBhcmFtcy5odWNfZmlybXdhcmVfcGF0
aCAmJgorCQkJICAgIHVjX2Z3LT50eXBlID09IElOVEVMX1VDX0ZXX1RZUEVfSFVDKSkgeworCQl1
Y19mdy0+cGF0aCA9IGk5MTVfbW9kcGFyYW1zLmh1Y19maXJtd2FyZV9wYXRoOworCX0gZWxzZSB7
CisJCWVudW0gaW50ZWxfcGxhdGZvcm0gcCA9IElOVEVMX0lORk8oaTkxNSktPnBsYXRmb3JtOwor
CQl1OCByZXYgPSBJTlRFTF9SRVZJRChpOTE1KTsKKwkJaW50IGk7CisKKwkJZm9yIChpID0gMDsg
aSA8IGxlbmd0aCAmJiBwIDw9IGxpc3RbaV0ucDsgaSsrKSB7CisJCQlpZiAocCA9PSBsaXN0W2ld
LnAgJiYgcmV2ID49IGxpc3RbaV0uZmlyc3RfcmV2KSB7CisJCQkJdWNfZnctPnBhdGggPSBsaXN0
W2ldLmJsb2ItPnBhdGg7CisJCQkJdWNfZnctPm1ham9yX3Zlcl93YW50ZWQgPSBsaXN0W2ldLmJs
b2ItPm1ham9yOworCQkJCXVjX2Z3LT5taW5vcl92ZXJfd2FudGVkID0gbGlzdFtpXS5ibG9iLT5t
aW5vcjsKKwkJCQlicmVhazsKKwkJCX0KKwkJfQorCX0KK30KKwogLyoqCiAgKiBpbnRlbF91Y19m
d19mZXRjaCAtIGZldGNoIHVDIGZpcm13YXJlCiAgKgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWNfZncuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Vj
L2ludGVsX3VjX2Z3LmgKaW5kZXggODMzZDA0ZDA2NTc2Li41NTBiNjI2YWZiMTUgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjX2Z3LmgKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWNfZncuaApAQCAtMjYsNiArMjYsNyBAQAogI2Rl
ZmluZSBfSU5URUxfVUNfRldfSF8KIAogI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+CisjaW5jbHVk
ZSAiaW50ZWxfZGV2aWNlX2luZm8uaCIKICNpbmNsdWRlICJpOTE1X2dlbS5oIgogCiBzdHJ1Y3Qg
ZHJtX3ByaW50ZXI7CkBAIC00OCw2ICs0OSwyNiBAQCBlbnVtIGludGVsX3VjX2Z3X3R5cGUgewog
CUlOVEVMX1VDX0ZXX1RZUEVfSFVDCiB9OwogCitzdHJ1Y3QgX19wYWNrZWQgaW50ZWxfdWNfZndf
YmxvYiB7CisJdTggbWFqb3I7CisJdTggbWlub3I7CisJY29uc3QgY2hhciAqcGF0aDsKK307CisK
KyNkZWZpbmUgVUNfRldfQkxPQihwcmVmaXhfLCBtYWpvcl8sIG1pbm9yXywgcGF0aF8pIFwKK3N0
YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfdWNfZndfYmxvYiBwcmVmaXhfIyNfZndfYmxvYiA9IHsg
XAorCS5tYWpvciA9IChtYWpvcl8pLCBcCisJLm1pbm9yID0gKG1pbm9yXyksIFwKKwkucGF0aCA9
IHBhdGhfIFwKK307IFwKK01PRFVMRV9GSVJNV0FSRShwYXRoXykKKworc3RydWN0IF9fcGFja2Vk
IGludGVsX3VjX3BsYXRmb3JtX3JlcXVpcmVtZW50IHsKKwllbnVtIGludGVsX3BsYXRmb3JtIHA7
CisJdTggZmlyc3RfcmV2OworCWNvbnN0IHN0cnVjdCBpbnRlbF91Y19md19ibG9iICpibG9iOwor
fTsKKwogLyoKICAqIFRoaXMgc3RydWN0dXJlIGVuY2Fwc3VsYXRlcyBhbGwgdGhlIGRhdGEgbmVl
ZGVkIGR1cmluZyB0aGUgcHJvY2VzcwogICogb2YgZmV0Y2hpbmcsIGNhY2hpbmcsIGFuZCBsb2Fk
aW5nIHRoZSBmaXJtd2FyZSBpbWFnZSBpbnRvIHRoZSB1Qy4KQEAgLTE2NCw3ICsxODUsMTEgQEAg
c3RhdGljIGlubGluZSB1MzIgaW50ZWxfdWNfZndfZ2V0X3VwbG9hZF9zaXplKHN0cnVjdCBpbnRl
bF91Y19mdyAqdWNfZncpCiAJcmV0dXJuIHVjX2Z3LT5oZWFkZXJfc2l6ZSArIHVjX2Z3LT51Y29k
ZV9zaXplOwogfQogCi12b2lkIGludGVsX3VjX2Z3X2ZldGNoKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiwKK3ZvaWQgaW50ZWxfdWNfZndfc2VsZWN0KHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1LAorCQkJc3RydWN0IGludGVsX3VjX2Z3ICp1Y19mdywKKwkJCWNvbnN0IHN0
cnVjdCBpbnRlbF91Y19wbGF0Zm9ybV9yZXF1aXJlbWVudCAqYmxvYnNfbGlzdCwKKwkJCXVuc2ln
bmVkIGludCBsZW5ndGgpOwordm9pZCBpbnRlbF91Y19md19mZXRjaChzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSwKIAkJICAgICAgIHN0cnVjdCBpbnRlbF91Y19mdyAqdWNfZncpOwogdm9p
ZCBpbnRlbF91Y19md19jbGVhbnVwX2ZldGNoKHN0cnVjdCBpbnRlbF91Y19mdyAqdWNfZncpOwog
aW50IGludGVsX3VjX2Z3X3VwbG9hZChzdHJ1Y3QgaW50ZWxfdWNfZncgKnVjX2Z3LAotLSAKMi4y
Mi4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRl
bC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

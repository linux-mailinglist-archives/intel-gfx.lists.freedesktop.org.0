Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CF2C7C8714
	for <lists+intel-gfx@lfdr.de>; Wed,  2 Oct 2019 13:20:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E26EA6E931;
	Wed,  2 Oct 2019 11:20:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1390B6E934
 for <intel-gfx@lists.freedesktop.org>; Wed,  2 Oct 2019 11:20:27 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18692037-1500050 
 for multiple; Wed, 02 Oct 2019 12:20:10 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  2 Oct 2019 12:19:52 +0100
Message-Id: <20191002112000.12280-22-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191002112000.12280-1-chris@chris-wilson.co.uk>
References: <20191002112000.12280-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 22/30] drm/i915: Remove logical HW ID
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2l0aCB0aGUgaW50cm9kdWN0aW9uIG9mIGN0eC0+ZW5naW5lc1tdIHdlIGFsbG93IG11bHRpcGxl
IGxvZ2ljYWwKY29udGV4dHMgdG8gYmUgdXNlZCBvbiB0aGUgc2FtZSBlbmdpbmUgKGUuZy4gd2l0
aCB2aXJ0dWFsIGVuZ2luZXMpLgpBY2NvcmRpbmcgdG8gYnNwZWMsIGFhY2ggbG9naWNhbCBjb250
ZXh0IHJlcXVpcmVzIGEgdW5pcXVlIHRhZyBpbiBvcmRlcgpmb3IgY29udGV4dC1zd2l0Y2hpbmcg
dG8gb2NjdXIgY29ycmVjdGx5IGJldHdlZW4gdGhlbS4gW1NpbXBsZQpleHBlcmltZW50cyBzaG93
IHRoYXQgaXQgaXMgbm90IHNvIGVhc3kgdG8gdHJpY2sgdGhlIEhXIGludG8gcGVyZm9ybWluZwph
IGxpdGUtcmVzdG9yZSB3aXRoIG1hdGNoaW5nIGxvZ2ljYWwgSURzLCB0aG91Z2ggbXkgbWVtb3J5
IGZyb20gZWFybHkKQnJvYWR3ZWxsIGV4cGVyaW1lbnRzIGRvIHN1Z2dlc3QgdGhhdCBpdCBzaG91
bGQgYmUgZ2VuZXJhdGluZwpsaXRlLXJlc3RvcmVzLl0KCldlIG9ubHkgbmVlZCB0byBrZWVwIGEg
dW5pcXVlIHRhZyBmb3IgdGhlIGFjdGl2ZSBsaWZldGltZSBvZiB0aGUKY29udGV4dCwgYW5kIGZv
ciBhcyBsb25nIGFzIHdlIG5lZWQgdG8gaWRlbnRpZnkgdGhhdCBjb250ZXh0LiBUaGUgSFcKdXNl
cyB0aGUgdGFnIHRvIGRldGVybWluZSBpZiBpdCBzaG91bGQgdXNlIGEgbGl0ZS1yZXN0b3JlICh3
aHkgbm90IHRoZQpMUkNBPykgYW5kIHBhc3NlcyB0aGUgdGFnIGJhY2sgZm9yIHZhcmlvdXMgc3Rh
dHVzIGlkZW50aWZpZXMuIFRoZSBvbmx5CnN0YXR1cyB3ZSBuZWVkIHRvIHRyYWNrIGlzIGZvciBP
QSwgc28gd2hlbiB1c2luZyBwZXJmLCB3ZSBhc3NpZ24gdGhlCnNwZWNpZmljIGNvbnRleHQgYSB1
bmlxdWUgdGFnLgoKdjI6IENhbGN1bGF0ZSByZXF1aXJlZCBudW1iZXIgb2YgdGFncyB0byBmaWxs
IEVMU1AuCgpGaXhlczogOTc2YjU1ZjBlMWRiICgiZHJtL2k5MTU6IEFsbG93IGEgY29udGV4dCB0
byBkZWZpbmUgaXRzIHNldCBvZiBlbmdpbmVzIikKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29u
IDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CkFja2VkLWJ5OiBEYW5pZWxlIENlcmFvbG8gU3B1
cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMgICB8IDE0NyAtLS0tLS0tLS0tLS0tLS0tLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmggICB8ICAxNSAtLQog
Li4uL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dF90eXBlcy5oIHwgIDE4IC0tLQog
Li4uL2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jIHwgIDEzICstCiAu
Li4vZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmMgfCAgIDggLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBlcy5oIHwgICAxICsKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oICB8ICAgNCArLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgICAgICAgICAgIHwgIDMyICsrLS0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2d2dC9rdm1ndC5jICAgICAgICAgICAgICB8ICAxNyAtLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgICAgICAgICAgIHwgICAzIC0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMgICAgICAgICB8ICAgNyArLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuaCAgICAgICAgIHwgICAxIC0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfcGVyZi5jICAgICAgICAgICAgICB8ICAyNSArKy0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfdHJhY2UuaCAgICAgICAgICAgICB8ICAzOCArKy0tLQogLi4uL2dwdS9k
cm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYyAgIHwgICA0ICstCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV92bWEuYyAgICAgfCAgIDIgKy0KIDE2IGZpbGVzIGNo
YW5nZWQsIDUxIGluc2VydGlvbnMoKyksIDI4NCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwppbmRleCBlODMyMjM4YTcyZTUuLjRlNTli
ODA5ZDkwMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2Nv
bnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5j
CkBAIC0xNjgsOTcgKzE2OCw2IEBAIGxvb2t1cF91c2VyX2VuZ2luZShzdHJ1Y3QgaTkxNV9nZW1f
Y29udGV4dCAqY3R4LAogCXJldHVybiBpOTE1X2dlbV9jb250ZXh0X2dldF9lbmdpbmUoY3R4LCBp
ZHgpOwogfQogCi1zdGF0aWMgaW5saW5lIGludCBuZXdfaHdfaWQoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTUsIGdmcF90IGdmcCkKLXsKLQl1bnNpZ25lZCBpbnQgbWF4OwotCi0JbG9ja2Rl
cF9hc3NlcnRfaGVsZCgmaTkxNS0+Y29udGV4dHMubXV0ZXgpOwotCi0JaWYgKElOVEVMX0dFTihp
OTE1KSA+PSAxMikKLQkJbWF4ID0gR0VOMTJfTUFYX0NPTlRFWFRfSFdfSUQ7Ci0JZWxzZSBpZiAo
SU5URUxfR0VOKGk5MTUpID49IDExKQotCQltYXggPSBHRU4xMV9NQVhfQ09OVEVYVF9IV19JRDsK
LQllbHNlIGlmIChVU0VTX0dVQ19TVUJNSVNTSU9OKGk5MTUpKQotCQkvKgotCQkgKiBXaGVuIHVz
aW5nIEd1QyBpbiBwcm94eSBzdWJtaXNzaW9uLCBHdUMgY29uc3VtZXMgdGhlCi0JCSAqIGhpZ2hl
c3QgYml0IGluIHRoZSBjb250ZXh0IGlkIHRvIGluZGljYXRlIHByb3h5IHN1Ym1pc3Npb24uCi0J
CSAqLwotCQltYXggPSBNQVhfR1VDX0NPTlRFWFRfSFdfSUQ7Ci0JZWxzZQotCQltYXggPSBNQVhf
Q09OVEVYVF9IV19JRDsKLQotCXJldHVybiBpZGFfc2ltcGxlX2dldCgmaTkxNS0+Y29udGV4dHMu
aHdfaWRhLCAwLCBtYXgsIGdmcCk7Ci19Ci0KLXN0YXRpYyBpbnQgc3RlYWxfaHdfaWQoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCi17Ci0Jc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0
eCwgKmNuOwotCUxJU1RfSEVBRChwaW5uZWQpOwotCWludCBpZCA9IC1FTk9TUEM7Ci0KLQlsb2Nr
ZGVwX2Fzc2VydF9oZWxkKCZpOTE1LT5jb250ZXh0cy5tdXRleCk7Ci0KLQlsaXN0X2Zvcl9lYWNo
X2VudHJ5X3NhZmUoY3R4LCBjbiwKLQkJCQkgJmk5MTUtPmNvbnRleHRzLmh3X2lkX2xpc3QsIGh3
X2lkX2xpbmspIHsKLQkJaWYgKGF0b21pY19yZWFkKCZjdHgtPmh3X2lkX3Bpbl9jb3VudCkpIHsK
LQkJCWxpc3RfbW92ZV90YWlsKCZjdHgtPmh3X2lkX2xpbmssICZwaW5uZWQpOwotCQkJY29udGlu
dWU7Ci0JCX0KLQotCQlHRU1fQlVHX09OKCFjdHgtPmh3X2lkKTsgLyogcGVybWEtcGlubmVkIGtl
cm5lbCBjb250ZXh0ICovCi0JCWxpc3RfZGVsX2luaXQoJmN0eC0+aHdfaWRfbGluayk7Ci0JCWlk
ID0gY3R4LT5od19pZDsKLQkJYnJlYWs7Ci0JfQotCi0JLyoKLQkgKiBSZW1lbWJlciBob3cgZmFy
IHdlIGdvdCB1cCBvbiB0aGUgbGFzdCByZXBvc3Nlc2lvbiBzY2FuLCBzbyB0aGUKLQkgKiBsaXN0
IGlzIGtlcHQgaW4gYSAibGVhc3QgcmVjZW50bHkgc2Nhbm5lZCIgb3JkZXIuCi0JICovCi0JbGlz
dF9zcGxpY2VfdGFpbCgmcGlubmVkLCAmaTkxNS0+Y29udGV4dHMuaHdfaWRfbGlzdCk7Ci0JcmV0
dXJuIGlkOwotfQotCi1zdGF0aWMgaW50IGFzc2lnbl9od19pZChzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSwgdW5zaWduZWQgaW50ICpvdXQpCi17Ci0JaW50IHJldDsKLQotCWxvY2tkZXBf
YXNzZXJ0X2hlbGQoJmk5MTUtPmNvbnRleHRzLm11dGV4KTsKLQotCS8qCi0JICogV2UgcHJlZmVy
IHRvIHN0ZWFsL3N0YWxsIG91cnNlbHZlcyBhbmQgb3VyIHVzZXJzIG92ZXIgdGhhdCBvZiB0aGUK
LQkgKiBlbnRpcmUgc3lzdGVtLiBUaGF0IG1heSBiZSBhIGxpdHRsZSB1bmZhaXIgdG8gb3VyIHVz
ZXJzLCBhbmQKLQkgKiBldmVuIGh1cnQgaGlnaCBwcmlvcml0eSBjbGllbnRzLiBUaGUgY2hvaWNl
IGlzIHdoZXRoZXIgdG8gb29ta2lsbAotCSAqIHNvbWV0aGluZyBlbHNlLCBvciBzdGVhbCBhIGNv
bnRleHQgaWQuCi0JICovCi0JcmV0ID0gbmV3X2h3X2lkKGk5MTUsIEdGUF9LRVJORUwgfCBfX0dG
UF9SRVRSWV9NQVlGQUlMIHwgX19HRlBfTk9XQVJOKTsKLQlpZiAodW5saWtlbHkocmV0IDwgMCkp
IHsKLQkJcmV0ID0gc3RlYWxfaHdfaWQoaTkxNSk7Ci0JCWlmIChyZXQgPCAwKSAvKiBvbmNlIGFn
YWluIGZvciB0aGUgY29ycmVjdCBlcnJubyBjb2RlICovCi0JCQlyZXQgPSBuZXdfaHdfaWQoaTkx
NSwgR0ZQX0tFUk5FTCk7Ci0JCWlmIChyZXQgPCAwKQotCQkJcmV0dXJuIHJldDsKLQl9Ci0KLQkq
b3V0ID0gcmV0OwotCXJldHVybiAwOwotfQotCi1zdGF0aWMgdm9pZCByZWxlYXNlX2h3X2lkKHN0
cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUgPSBjdHgtPmk5MTU7Ci0KLQlpZiAobGlzdF9lbXB0eSgmY3R4LT5od19pZF9saW5rKSkK
LQkJcmV0dXJuOwotCi0JbXV0ZXhfbG9jaygmaTkxNS0+Y29udGV4dHMubXV0ZXgpOwotCWlmICgh
bGlzdF9lbXB0eSgmY3R4LT5od19pZF9saW5rKSkgewotCQlpZGFfc2ltcGxlX3JlbW92ZSgmaTkx
NS0+Y29udGV4dHMuaHdfaWRhLCBjdHgtPmh3X2lkKTsKLQkJbGlzdF9kZWxfaW5pdCgmY3R4LT5o
d19pZF9saW5rKTsKLQl9Ci0JbXV0ZXhfdW5sb2NrKCZpOTE1LT5jb250ZXh0cy5tdXRleCk7Ci19
Ci0KIHN0YXRpYyB2b2lkIF9fZnJlZV9lbmdpbmVzKHN0cnVjdCBpOTE1X2dlbV9lbmdpbmVzICpl
LCB1bnNpZ25lZCBpbnQgY291bnQpCiB7CiAJd2hpbGUgKGNvdW50LS0pIHsKQEAgLTMxMyw4ICsy
MjIsNiBAQCBzdGF0aWMgdm9pZCBpOTE1X2dlbV9jb250ZXh0X2ZyZWUoc3RydWN0IGk5MTVfZ2Vt
X2NvbnRleHQgKmN0eCkKIAlsb2NrZGVwX2Fzc2VydF9oZWxkKCZjdHgtPmk5MTUtPmRybS5zdHJ1
Y3RfbXV0ZXgpOwogCUdFTV9CVUdfT04oIWk5MTVfZ2VtX2NvbnRleHRfaXNfY2xvc2VkKGN0eCkp
OwogCi0JcmVsZWFzZV9od19pZChjdHgpOwotCiAJZnJlZV9lbmdpbmVzKHJjdV9hY2Nlc3NfcG9p
bnRlcihjdHgtPmVuZ2luZXMpKTsKIAltdXRleF9kZXN0cm95KCZjdHgtPmVuZ2luZXNfbXV0ZXgp
OwogCkBAIC00NTksMTIgKzM2Niw2IEBAIHN0YXRpYyB2b2lkIGNvbnRleHRfY2xvc2Uoc3RydWN0
IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCkKIAogCWN0eC0+ZmlsZV9wcml2ID0gRVJSX1BUUigtRUJB
REYpOwogCi0JLyoKLQkgKiBUaGlzIGNvbnRleHQgd2lsbCBuZXZlciBhZ2FpbiBiZSBhc3Npbmdl
ZCB0byBIVywgc28gd2UgY2FuCi0JICogcmV1c2UgaXRzIElEIGZvciB0aGUgbmV4dCBjb250ZXh0
LgotCSAqLwotCXJlbGVhc2VfaHdfaWQoY3R4KTsKLQogCS8qCiAJICogVGhlIExVVCB1c2VzIHRo
ZSBWTUEgYXMgYSBiYWNrcG9pbnRlciB0byB1bnJlZiB0aGUgb2JqZWN0LAogCSAqIHNvIHdlIG5l
ZWQgdG8gY2xlYXIgdGhlIExVVCBiZWZvcmUgd2UgY2xvc2UgYWxsIHRoZSBWTUEgKGluc2lkZQpA
QCAtNTA3LDcgKzQwOCw2IEBAIF9fY3JlYXRlX2NvbnRleHQoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUpCiAJUkNVX0lOSVRfUE9JTlRFUihjdHgtPmVuZ2luZXMsIGUpOwogCiAJSU5JVF9S
QURJWF9UUkVFKCZjdHgtPmhhbmRsZXNfdm1hLCBHRlBfS0VSTkVMKTsKLQlJTklUX0xJU1RfSEVB
RCgmY3R4LT5od19pZF9saW5rKTsKIAogCS8qIE5COiBNYXJrIGFsbCBzbGljZXMgYXMgbmVlZGlu
ZyBhIHJlbWFwIHNvIHRoYXQgd2hlbiB0aGUgY29udGV4dCBmaXJzdAogCSAqIGxvYWRzIGl0IHdp
bGwgcmVzdG9yZSB3aGF0ZXZlciByZW1hcCBzdGF0ZSBhbHJlYWR5IGV4aXN0cy4gSWYgdGhlcmUK
QEAgLTY3NiwxOCArNTc2LDExIEBAIHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICoKIGk5MTVfZ2Vt
X2NvbnRleHRfY3JlYXRlX2tlcm5lbChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgaW50
IHByaW8pCiB7CiAJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eDsKLQlpbnQgZXJyOwogCiAJ
Y3R4ID0gaTkxNV9nZW1fY3JlYXRlX2NvbnRleHQoaTkxNSwgMCk7CiAJaWYgKElTX0VSUihjdHgp
KQogCQlyZXR1cm4gY3R4OwogCi0JZXJyID0gaTkxNV9nZW1fY29udGV4dF9waW5faHdfaWQoY3R4
KTsKLQlpZiAoZXJyKSB7Ci0JCWRlc3Ryb3lfa2VybmVsX2NvbnRleHQoJmN0eCk7Ci0JCXJldHVy
biBFUlJfUFRSKGVycik7Ci0JfQotCiAJaTkxNV9nZW1fY29udGV4dF9jbGVhcl9iYW5uYWJsZShj
dHgpOwogCWk5MTVfZ2VtX2NvbnRleHRfc2V0X3BlcnNpc3RlbmNlKGN0eCk7CiAJY3R4LT5zY2hl
ZC5wcmlvcml0eSA9IEk5MTVfVVNFUl9QUklPUklUWShwcmlvKTsKQEAgLTcyNywxNSArNjIwLDYg
QEAgaW50IGk5MTVfZ2VtX2NvbnRleHRzX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2KQogCQlEUk1fRVJST1IoIkZhaWxlZCB0byBjcmVhdGUgZGVmYXVsdCBnbG9iYWwgY29u
dGV4dFxuIik7CiAJCXJldHVybiBQVFJfRVJSKGN0eCk7CiAJfQotCS8qCi0JICogRm9yIGVhc3kg
cmVjb2duaXNhYmxpdHksIHdlIHdhbnQgdGhlIGtlcm5lbCBjb250ZXh0IHRvIGJlIDAgYW5kIHRo
ZW4KLQkgKiBhbGwgdXNlciBjb250ZXh0cyB3aWxsIGhhdmUgbm9uLXplcm8gaHdfaWQuIEtlcm5l
bCBjb250ZXh0cyBhcmUKLQkgKiBwZXJtYW5lbnRseSBwaW5uZWQsIHNvIHRoYXQgd2UgbmV2ZXIg
c3VmZmVyIGEgc3RhbGwgYW5kIGNhbgotCSAqIHVzZSB0aGVtIGZyb20gYW55IGFsbG9jYXRpb24g
Y29udGV4dCAoZS5nLiBmb3IgZXZpY3Rpbmcgb3RoZXIKLQkgKiBjb250ZXh0cyBhbmQgZnJvbSBp
bnNpZGUgdGhlIHNocmlua2VyKS4KLQkgKi8KLQlHRU1fQlVHX09OKGN0eC0+aHdfaWQpOwotCUdF
TV9CVUdfT04oIWF0b21pY19yZWFkKCZjdHgtPmh3X2lkX3Bpbl9jb3VudCkpOwogCWRldl9wcml2
LT5rZXJuZWxfY29udGV4dCA9IGN0eDsKIAogCURSTV9ERUJVR19EUklWRVIoIiVzIGNvbnRleHQg
c3VwcG9ydCBpbml0aWFsaXplZFxuIiwKQEAgLTc0OSwxMCArNjMzLDYgQEAgdm9pZCBpOTE1X2dl
bV9jb250ZXh0c19maW5pKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCWxvY2tkZXBf
YXNzZXJ0X2hlbGQoJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwogCiAJZGVzdHJveV9rZXJuZWxf
Y29udGV4dCgmaTkxNS0+a2VybmVsX2NvbnRleHQpOwotCi0JLyogTXVzdCBmcmVlIGFsbCBkZWZl
cnJlZCBjb250ZXh0cyAodmlhIGZsdXNoX3dvcmtxdWV1ZSkgZmlyc3QgKi8KLQlHRU1fQlVHX09O
KCFsaXN0X2VtcHR5KCZpOTE1LT5jb250ZXh0cy5od19pZF9saXN0KSk7Ci0JaWRhX2Rlc3Ryb3ko
Jmk5MTUtPmNvbnRleHRzLmh3X2lkYSk7CiB9CiAKIHN0YXRpYyBpbnQgY29udGV4dF9pZHJfY2xl
YW51cChpbnQgaWQsIHZvaWQgKnAsIHZvaWQgKmRhdGEpCkBAIC0yNDM4LDMzICsyMzE4LDYgQEAg
aW50IGk5MTVfZ2VtX2NvbnRleHRfcmVzZXRfc3RhdHNfaW9jdGwoc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwKIAlyZXR1cm4gcmV0OwogfQogCi1pbnQgX19pOTE1X2dlbV9jb250ZXh0X3Bpbl9od19p
ZChzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KQotewotCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1ID0gY3R4LT5pOTE1OwotCWludCBlcnIgPSAwOwotCi0JbXV0ZXhfbG9jaygmaTkx
NS0+Y29udGV4dHMubXV0ZXgpOwotCi0JR0VNX0JVR19PTihpOTE1X2dlbV9jb250ZXh0X2lzX2Ns
b3NlZChjdHgpKTsKLQotCWlmIChsaXN0X2VtcHR5KCZjdHgtPmh3X2lkX2xpbmspKSB7Ci0JCUdF
TV9CVUdfT04oYXRvbWljX3JlYWQoJmN0eC0+aHdfaWRfcGluX2NvdW50KSk7Ci0KLQkJZXJyID0g
YXNzaWduX2h3X2lkKGk5MTUsICZjdHgtPmh3X2lkKTsKLQkJaWYgKGVycikKLQkJCWdvdG8gb3V0
X3VubG9jazsKLQotCQlsaXN0X2FkZF90YWlsKCZjdHgtPmh3X2lkX2xpbmssICZpOTE1LT5jb250
ZXh0cy5od19pZF9saXN0KTsKLQl9Ci0KLQlHRU1fQlVHX09OKGF0b21pY19yZWFkKCZjdHgtPmh3
X2lkX3Bpbl9jb3VudCkgPT0gfjB1KTsKLQlhdG9taWNfaW5jKCZjdHgtPmh3X2lkX3Bpbl9jb3Vu
dCk7Ci0KLW91dF91bmxvY2s6Ci0JbXV0ZXhfdW5sb2NrKCZpOTE1LT5jb250ZXh0cy5tdXRleCk7
Ci0JcmV0dXJuIGVycjsKLX0KLQogLyogR0VNIGNvbnRleHQtZW5naW5lcyBpdGVyYXRvcjogZm9y
X2VhY2hfZ2VtX2VuZ2luZSgpICovCiBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqCiBpOTE1X2dlbV9l
bmdpbmVzX2l0ZXJfbmV4dChzdHJ1Y3QgaTkxNV9nZW1fZW5naW5lc19pdGVyICppdCkKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmggYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5oCmluZGV4IGUwZjViNmM2YTMz
MS4uMWIwZGY1MzQzNmNmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fY29udGV4dC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9j
b250ZXh0LmgKQEAgLTEyNywyMSArMTI3LDYgQEAgaTkxNV9nZW1fY29udGV4dF9jbGVhcl91c2Vy
X2VuZ2luZXMoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCkKIAljbGVhcl9iaXQoQ09OVEVY
VF9VU0VSX0VOR0lORVMsICZjdHgtPmZsYWdzKTsKIH0KIAotaW50IF9faTkxNV9nZW1fY29udGV4
dF9waW5faHdfaWQoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCk7Ci1zdGF0aWMgaW5saW5l
IGludCBpOTE1X2dlbV9jb250ZXh0X3Bpbl9od19pZChzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAq
Y3R4KQotewotCWlmIChhdG9taWNfaW5jX25vdF96ZXJvKCZjdHgtPmh3X2lkX3Bpbl9jb3VudCkp
Ci0JCXJldHVybiAwOwotCi0JcmV0dXJuIF9faTkxNV9nZW1fY29udGV4dF9waW5faHdfaWQoY3R4
KTsKLX0KLQotc3RhdGljIGlubGluZSB2b2lkIGk5MTVfZ2VtX2NvbnRleHRfdW5waW5faHdfaWQo
c3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCkKLXsKLQlHRU1fQlVHX09OKGF0b21pY19yZWFk
KCZjdHgtPmh3X2lkX3Bpbl9jb3VudCkgPT0gMHUpOwotCWF0b21pY19kZWMoJmN0eC0+aHdfaWRf
cGluX2NvdW50KTsKLX0KLQogc3RhdGljIGlubGluZSBib29sIGk5MTVfZ2VtX2NvbnRleHRfaXNf
a2VybmVsKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCiB7CiAJcmV0dXJuICFjdHgtPmZp
bGVfcHJpdjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9j
b250ZXh0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4
dF90eXBlcy5oCmluZGV4IGRhZjFlYTUwNzVhNi4uNjQxOWRhN2M5ZjkwIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dF90eXBlcy5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0X3R5cGVzLmgKQEAgLTE0OCwy
NCArMTQ4LDYgQEAgc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgewogI2RlZmluZSBDT05URVhUX0ZP
UkNFX1NJTkdMRV9TVUJNSVNTSU9OCTIKICNkZWZpbmUgQ09OVEVYVF9VU0VSX0VOR0lORVMJCTMK
IAotCS8qKgotCSAqIEBod19pZDogLSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbnRleHQK
LQkgKgotCSAqIFRoZSBoYXJkd2FyZSBuZWVkcyB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgY29u
dGV4dCBmb3IgYSBmZXcKLQkgKiBmdW5jdGlvbnMgbGlrZSBmYXVsdCByZXBvcnRpbmcsIFBBU0lE
LCBzY2hlZHVsaW5nLiBUaGUKLQkgKiAmZHJtX2k5MTVfcHJpdmF0ZS5jb250ZXh0X2h3X2lkYSBp
cyB1c2VkIHRvIGFzc2lnbiBhIHVucWl1ZQotCSAqIGlkIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhl
IGNvbnRleHQuCi0JICoKLQkgKiBAaHdfaWRfcGluX2NvdW50OiAtIG51bWJlciBvZiB0aW1lcyB0
aGlzIGNvbnRleHQgaGFkIGJlZW4gcGlubmVkCi0JICogZm9yIHVzZSAoc2hvdWxkIGJlLCBhdCBt
b3N0LCBvbmNlIHBlciBlbmdpbmUpLgotCSAqCi0JICogQGh3X2lkX2xpbms6IC0gYWxsIGNvbnRl
eHRzIHdpdGggYW4gYXNzaWduZWQgaWQgYXJlIHRyYWNrZWQKLQkgKiBmb3IgcG9zc2libGUgcmVw
b3NzZXNzaW9uLgotCSAqLwotCXVuc2lnbmVkIGludCBod19pZDsKLQlhdG9taWNfdCBod19pZF9w
aW5fY291bnQ7Ci0Jc3RydWN0IGxpc3RfaGVhZCBod19pZF9saW5rOwotCiAJc3RydWN0IG11dGV4
IG11dGV4OwogCiAJc3RydWN0IGk5MTVfc2NoZWRfYXR0ciBzY2hlZDsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0LmMKaW5kZXgg
MjI4ODc1NzgwOGFlLi4yZmIzMWFkYTJmYTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jCkBAIC02NjAsOSArNjYwLDkg
QEAgc3RhdGljIGludCBpZ3RfY3R4X2V4ZWModm9pZCAqYXJnKQogCiAJCQllcnIgPSBncHVfZmls
bChjZSwgb2JqLCBkdyk7CiAJCQlpZiAoZXJyKSB7Ci0JCQkJcHJfZXJyKCJGYWlsZWQgdG8gZmls
bCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGggZ3B1ICglcykgaW4gY3R4ICV1IFtmdWxsLXBwZ3R0
PyAlc10sIGVycj0lZFxuIiwKKwkJCQlwcl9lcnIoIkZhaWxlZCB0byBmaWxsIGR3b3JkICVsdSBb
JWx1LyVsdV0gd2l0aCBncHUgKCVzKSBbZnVsbC1wcGd0dD8gJXNdLCBlcnI9JWRcbiIsCiAJCQkJ
ICAgICAgIG5kd29yZHMsIGR3LCBtYXhfZHdvcmRzKG9iaiksCi0JCQkJICAgICAgIGVuZ2luZS0+
bmFtZSwgY3R4LT5od19pZCwKKwkJCQkgICAgICAgZW5naW5lLT5uYW1lLAogCQkJCSAgICAgICB5
ZXNubyghIWN0eC0+dm0pLCBlcnIpOwogCQkJCWludGVsX2NvbnRleHRfcHV0KGNlKTsKIAkJCQlr
ZXJuZWxfY29udGV4dF9jbG9zZShjdHgpOwpAQCAtNzk4LDkgKzc5OCw5IEBAIHN0YXRpYyBpbnQg
aWd0X3NoYXJlZF9jdHhfZXhlYyh2b2lkICphcmcpCiAKIAkJCWVyciA9IGdwdV9maWxsKGNlLCBv
YmosIGR3KTsKIAkJCWlmIChlcnIpIHsKLQkJCQlwcl9lcnIoIkZhaWxlZCB0byBmaWxsIGR3b3Jk
ICVsdSBbJWx1LyVsdV0gd2l0aCBncHUgKCVzKSBpbiBjdHggJXUgW2Z1bGwtcHBndHQ/ICVzXSwg
ZXJyPSVkXG4iLAorCQkJCXByX2VycigiRmFpbGVkIHRvIGZpbGwgZHdvcmQgJWx1IFslbHUvJWx1
XSB3aXRoIGdwdSAoJXMpIFtmdWxsLXBwZ3R0PyAlc10sIGVycj0lZFxuIiwKIAkJCQkgICAgICAg
bmR3b3JkcywgZHcsIG1heF9kd29yZHMob2JqKSwKLQkJCQkgICAgICAgZW5naW5lLT5uYW1lLCBj
dHgtPmh3X2lkLAorCQkJCSAgICAgICBlbmdpbmUtPm5hbWUsCiAJCQkJICAgICAgIHllc25vKCEh
Y3R4LT52bSksIGVycik7CiAJCQkJaW50ZWxfY29udGV4dF9wdXQoY2UpOwogCQkJCWtlcm5lbF9j
b250ZXh0X2Nsb3NlKGN0eCk7CkBAIC0xMzgyLDEwICsxMzgyLDkgQEAgc3RhdGljIGludCBpZ3Rf
Y3R4X3JlYWRvbmx5KHZvaWQgKmFyZykKIAogCQkJZXJyID0gZ3B1X2ZpbGwoY2UsIG9iaiwgZHcp
OwogCQkJaWYgKGVycikgewotCQkJCXByX2VycigiRmFpbGVkIHRvIGZpbGwgZHdvcmQgJWx1IFsl
bHUvJWx1XSB3aXRoIGdwdSAoJXMpIGluIGN0eCAldSBbZnVsbC1wcGd0dD8gJXNdLCBlcnI9JWRc
biIsCisJCQkJcHJfZXJyKCJGYWlsZWQgdG8gZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGgg
Z3B1ICglcykgW2Z1bGwtcHBndHQ/ICVzXSwgZXJyPSVkXG4iLAogCQkJCSAgICAgICBuZHdvcmRz
LCBkdywgbWF4X2R3b3JkcyhvYmopLAotCQkJCSAgICAgICBjZS0+ZW5naW5lLT5uYW1lLCBjdHgt
Pmh3X2lkLAotCQkJCSAgICAgICB5ZXNubyghIWN0eC0+dm0pLCBlcnIpOworCQkJCSAgICAgICBj
ZS0+ZW5naW5lLT5uYW1lLCB5ZXNubyghIWN0eC0+dm0pLCBlcnIpOwogCQkJCWk5MTVfZ2VtX2Nv
bnRleHRfdW5sb2NrX2VuZ2luZXMoY3R4KTsKIAkJCQlnb3RvIG91dF91bmxvY2s7CiAJCQl9CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4
dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRleHQuYwpp
bmRleCAwZDFhMjc1ZWMzMTYuLmViYzQ2ZjA5ODU2MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5jCkBAIC0xMyw3ICsxMyw2IEBAIG1v
Y2tfY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKIHsKIAlzdHJ1Y3QgaTkx
NV9nZW1fY29udGV4dCAqY3R4OwogCXN0cnVjdCBpOTE1X2dlbV9lbmdpbmVzICplOwotCWludCBy
ZXQ7CiAKIAljdHggPSBremFsbG9jKHNpemVvZigqY3R4KSwgR0ZQX0tFUk5FTCk7CiAJaWYgKCFj
dHgpCkBAIC0zMiwxMyArMzEsOCBAQCBtb2NrX2NvbnRleHQoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUsCiAJUkNVX0lOSVRfUE9JTlRFUihjdHgtPmVuZ2luZXMsIGUpOwogCiAJSU5JVF9S
QURJWF9UUkVFKCZjdHgtPmhhbmRsZXNfdm1hLCBHRlBfS0VSTkVMKTsKLQlJTklUX0xJU1RfSEVB
RCgmY3R4LT5od19pZF9saW5rKTsKIAltdXRleF9pbml0KCZjdHgtPm11dGV4KTsKIAotCXJldCA9
IGk5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lkKGN0eCk7Ci0JaWYgKHJldCA8IDApCi0JCWdvdG8g
ZXJyX2VuZ2luZXM7Ci0KIAlpZiAobmFtZSkgewogCQlzdHJ1Y3QgaTkxNV9wcGd0dCAqcHBndHQ7
CiAKQEAgLTU2LDggKzUwLDYgQEAgbW9ja19jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1LAogCiAJcmV0dXJuIGN0eDsKIAotZXJyX2VuZ2luZXM6Ci0JZnJlZV9lbmdpbmVzKHJj
dV9hY2Nlc3NfcG9pbnRlcihjdHgtPmVuZ2luZXMpKTsKIGVycl9mcmVlOgogCWtmcmVlKGN0eCk7
CiAJcmV0dXJuIE5VTEw7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9jb250ZXh0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0
X3R5cGVzLmgKaW5kZXggYmY5Y2VkZmNjYmYwLi42OTU5YjA1YWU1ZjggMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaAorKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0X3R5cGVzLmgKQEAgLTU4LDYgKzU4LDcgQEAg
c3RydWN0IGludGVsX2NvbnRleHQgewogCiAJdTMyICpscmNfcmVnX3N0YXRlOwogCXU2NCBscmNf
ZGVzYzsKKwl1MzIgdGFnOyAvKiBjb29raWUgcGFzc2VkIHRvIEhXIHRvIHRyYWNrIHRoaXMgY29u
dGV4dCBvbiBzdWJtaXNzaW9uICovCiAKIAl1bnNpZ25lZCBpbnQgYWN0aXZlX2NvdW50OyAvKiBw
cm90ZWN0ZWQgYnkgdGltZWxpbmUtPm11dGV4ICovCiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKaW5kZXggMjVhZjY2NTQwYTFiLi5hZDNiZTJmYmQ3MWEg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5o
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCkBAIC0z
MDEsMTAgKzMwMSwxMiBAQCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzIHsKIAl1OCB1YWJpX2NsYXNz
OwogCXU4IHVhYmlfaW5zdGFuY2U7CiAKKwl1MzIgdWFiaV9jYXBhYmlsaXRpZXM7CiAJdTMyIGNv
bnRleHRfc2l6ZTsKIAl1MzIgbW1pb19iYXNlOwogCi0JdTMyIHVhYmlfY2FwYWJpbGl0aWVzOwor
CXVuc2lnbmVkIGludCBjb250ZXh0X3RhZzsKKyNkZWZpbmUgTlVNX0NPTlRFWFRfVEFHIHJvdW5k
dXBfcG93X29mX3R3bygyICogRVhFQ0xJU1RfTUFYX1BPUlRTKQogCiAJc3RydWN0IHJiX25vZGUg
dWFiaV9ub2RlOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9s
cmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCmluZGV4IDZkY2NlYWYw
MmUwMC4uODkwY2Q5YWIwN2EwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9scmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpAQCAt
NDQzLDEyICs0NDMsOCBAQCBhc3NlcnRfcHJpb3JpdHlfcXVldWUoY29uc3Qgc3RydWN0IGk5MTVf
cmVxdWVzdCAqcHJldiwKIHN0YXRpYyB1NjQKIGxyY19kZXNjcmlwdG9yKHN0cnVjdCBpbnRlbF9j
b250ZXh0ICpjZSwgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogewotCXN0cnVjdCBp
OTE1X2dlbV9jb250ZXh0ICpjdHggPSBjZS0+Z2VtX2NvbnRleHQ7CiAJdTY0IGRlc2M7CiAKLQlC
VUlMRF9CVUdfT04oTUFYX0NPTlRFWFRfSFdfSUQgPiAoQklUKEdFTjhfQ1RYX0lEX1dJRFRIKSkp
OwotCUJVSUxEX0JVR19PTihHRU4xMV9NQVhfQ09OVEVYVF9IV19JRCA+IChCSVQoR0VOMTFfU1df
Q1RYX0lEX1dJRFRIKSkpOwotCiAJZGVzYyA9IElOVEVMX0xFR0FDWV8zMkJfQ09OVEVYVDsKIAlp
ZiAoaTkxNV92bV9pc180bHZsKGNlLT52bSkpCiAJCWRlc2MgPSBJTlRFTF9MRUdBQ1lfNjRCX0NP
TlRFWFQ7CkBAIC00NjYsMjAgKzQ2MiwxMSBAQCBscmNfZGVzY3JpcHRvcihzdHJ1Y3QgaW50ZWxf
Y29udGV4dCAqY2UsIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAkgKiBhbnl0aGlu
ZyBiZWxvdy4KIAkgKi8KIAlpZiAoSU5URUxfR0VOKGVuZ2luZS0+aTkxNSkgPj0gMTEpIHsKLQkJ
R0VNX0JVR19PTihjdHgtPmh3X2lkID49IEJJVChHRU4xMV9TV19DVFhfSURfV0lEVEgpKTsKLQkJ
ZGVzYyB8PSAodTY0KWN0eC0+aHdfaWQgPDwgR0VOMTFfU1dfQ1RYX0lEX1NISUZUOwotCQkJCQkJ
CQkvKiBiaXRzIDM3LTQ3ICovCi0KIAkJZGVzYyB8PSAodTY0KWVuZ2luZS0+aW5zdGFuY2UgPDwg
R0VOMTFfRU5HSU5FX0lOU1RBTkNFX1NISUZUOwogCQkJCQkJCQkvKiBiaXRzIDQ4LTUzICovCiAK
LQkJLyogVE9ETzogZGVjaWRlIHdoYXQgdG8gZG8gd2l0aCBTVyBjb3VudGVyIChiaXRzIDU1LTYw
KSAqLwotCiAJCWRlc2MgfD0gKHU2NCllbmdpbmUtPmNsYXNzIDw8IEdFTjExX0VOR0lORV9DTEFT
U19TSElGVDsKIAkJCQkJCQkJLyogYml0cyA2MS02MyAqLwotCX0gZWxzZSB7Ci0JCUdFTV9CVUdf
T04oY3R4LT5od19pZCA+PSBCSVQoR0VOOF9DVFhfSURfV0lEVEgpKTsKLQkJZGVzYyB8PSAodTY0
KWN0eC0+aHdfaWQgPDwgR0VOOF9DVFhfSURfU0hJRlQ7CS8qIGJpdHMgMzItNTIgKi8KIAl9CiAK
IAlyZXR1cm4gZGVzYzsKQEAgLTk4OCw2ICs5NzUsMTggQEAgX19leGVjbGlzdHNfc2NoZWR1bGVf
aW4oc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEpCiAKIAlpbnRlbF9jb250ZXh0X2dldChjZSk7CiAK
KwlpZiAoY2UtPnRhZykgeworCQkvKiBVc2UgYSBmaXhlZCB0YWcgZm9yIE9BIGFuZCBmcmllbmRz
ICovCisJCWNlLT5scmNfZGVzYyB8PSAodTY0KWNlLT50YWcgPDwgMzI7CisJfSBlbHNlIHsKKwkJ
LyogV2UgZG9uJ3QgbmVlZCBhIHN0cmljdCBtYXRjaGluZyB0YWcsIGp1c3QgZGlmZmVyZW50IHZh
bHVlcyAqLworCQljZS0+bHJjX2Rlc2MgJj0gfkdFTk1BU0tfVUxMKDQ3LCAzNyk7CisJCWNlLT5s
cmNfZGVzYyB8PQorCQkJKHU2NCkoZW5naW5lLT5jb250ZXh0X3RhZysrICUgTlVNX0NPTlRFWFRf
VEFHKSA8PAorCQkJR0VOMTFfU1dfQ1RYX0lEX1NISUZUOworCQlCVUlMRF9CVUdfT04oTlVNX0NP
TlRFWFRfVEFHID4gR0VOMTJfTUFYX0NPTlRFWFRfSFdfSUQpOworCX0KKwogCWludGVsX2d0X3Bt
X2dldChlbmdpbmUtPmd0KTsKIAlleGVjbGlzdHNfY29udGV4dF9zdGF0dXNfY2hhbmdlKHJxLCBJ
TlRFTF9DT05URVhUX1NDSEVEVUxFX0lOKTsKIAlpbnRlbF9lbmdpbmVfY29udGV4dF9pbihlbmdp
bmUpOwpAQCAtMjIzNSw3ICsyMjM0LDYgQEAgc3RhdGljIHZvaWQgZXhlY2xpc3RzX2NvbnRleHRf
dW5waW4oc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQogCWNoZWNrX3JlZHpvbmUoKHZvaWQgKilj
ZS0+bHJjX3JlZ19zdGF0ZSAtIExSQ19TVEFURV9QTiAqIFBBR0VfU0laRSwKIAkJICAgICAgY2Ut
PmVuZ2luZSk7CiAKLQlpOTE1X2dlbV9jb250ZXh0X3VucGluX2h3X2lkKGNlLT5nZW1fY29udGV4
dCk7CiAJaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChjZS0+c3RhdGUtPm9iaik7CiAJaW50ZWxf
cmluZ19yZXNldChjZS0+cmluZywgY2UtPnJpbmctPnRhaWwpOwogfQpAQCAtMjI4NSwxOCArMjI4
MywxMiBAQCBfX2V4ZWNsaXN0c19jb250ZXh0X3BpbihzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2Us
CiAJCWdvdG8gdW5waW5fYWN0aXZlOwogCX0KIAotCXJldCA9IGk5MTVfZ2VtX2NvbnRleHRfcGlu
X2h3X2lkKGNlLT5nZW1fY29udGV4dCk7Ci0JaWYgKHJldCkKLQkJZ290byB1bnBpbl9tYXA7Ci0K
IAljZS0+bHJjX2Rlc2MgPSBscmNfZGVzY3JpcHRvcihjZSwgZW5naW5lKTsKIAljZS0+bHJjX3Jl
Z19zdGF0ZSA9IHZhZGRyICsgTFJDX1NUQVRFX1BOICogUEFHRV9TSVpFOwogCV9fZXhlY2xpc3Rz
X3VwZGF0ZV9yZWdfc3RhdGUoY2UsIGVuZ2luZSk7CiAKIAlyZXR1cm4gMDsKIAotdW5waW5fbWFw
OgotCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAoY2UtPnN0YXRlLT5vYmopOwogdW5waW5fYWN0
aXZlOgogCWludGVsX2NvbnRleHRfYWN0aXZlX3JlbGVhc2UoY2UpOwogZXJyOgpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2t2bWd0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndnQva3ZtZ3QuYwppbmRleCAzNDNkNzljMWNiN2UuLjA0YTVhMGQ5MDgyMyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2t2bWd0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3Z0L2t2bWd0LmMKQEAgLTE1NjQsMjcgKzE1NjQsMTAgQEAgdmdwdV9pZF9zaG93KHN0
cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmF0dHIsCiAJcmV0dXJu
IHNwcmludGYoYnVmLCAiXG4iKTsKIH0KIAotc3RhdGljIHNzaXplX3QKLWh3X2lkX3Nob3coc3Ry
dWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwKLQkgICBjaGFy
ICpidWYpCi17Ci0Jc3RydWN0IG1kZXZfZGV2aWNlICptZGV2ID0gbWRldl9mcm9tX2RldihkZXYp
OwotCi0JaWYgKG1kZXYpIHsKLQkJc3RydWN0IGludGVsX3ZncHUgKnZncHUgPSAoc3RydWN0IGlu
dGVsX3ZncHUgKikKLQkJCW1kZXZfZ2V0X2RydmRhdGEobWRldik7Ci0JCXJldHVybiBzcHJpbnRm
KGJ1ZiwgIiV1XG4iLAotCQkJICAgICAgIHZncHUtPnN1Ym1pc3Npb24uc2hhZG93WzBdLT5nZW1f
Y29udGV4dC0+aHdfaWQpOwotCX0KLQlyZXR1cm4gc3ByaW50ZihidWYsICJcbiIpOwotfQotCiBz
dGF0aWMgREVWSUNFX0FUVFJfUk8odmdwdV9pZCk7Ci1zdGF0aWMgREVWSUNFX0FUVFJfUk8oaHdf
aWQpOwogCiBzdGF0aWMgc3RydWN0IGF0dHJpYnV0ZSAqaW50ZWxfdmdwdV9hdHRyc1tdID0gewog
CSZkZXZfYXR0cl92Z3B1X2lkLmF0dHIsCi0JJmRldl9hdHRyX2h3X2lkLmF0dHIsCiAJTlVMTAog
fTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYwppbmRleCAxNWM3Y2MzYTIzYjMuLjQ1
NGRlMjdjNDkxMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2Zz
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKQEAgLTE1MDcsOSAr
MTUwNyw2IEBAIHN0YXRpYyBpbnQgaTkxNV9jb250ZXh0X3N0YXR1cyhzdHJ1Y3Qgc2VxX2ZpbGUg
Km0sIHZvaWQgKnVudXNlZCkKIAkJc3RydWN0IGludGVsX2NvbnRleHQgKmNlOwogCiAJCXNlcV9w
dXRzKG0sICJIVyBjb250ZXh0ICIpOwotCQlpZiAoIWxpc3RfZW1wdHkoJmN0eC0+aHdfaWRfbGlu
aykpCi0JCQlzZXFfcHJpbnRmKG0sICIleCBbcGluICV1XSIsIGN0eC0+aHdfaWQsCi0JCQkJICAg
YXRvbWljX3JlYWQoJmN0eC0+aHdfaWRfcGluX2NvdW50KSk7CiAJCWlmIChjdHgtPnBpZCkgewog
CQkJc3RydWN0IHRhc2tfc3RydWN0ICp0YXNrOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVf
ZXJyb3IuYwppbmRleCBhODZkMjhiZGE2ZGQuLjQ3MjM5ZGY2NTNmMiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2dwdV9lcnJvci5jCkBAIC00NzEsOSArNDcxLDkgQEAgc3RhdGljIHZvaWQgZXJy
b3JfcHJpbnRfY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVfZXJyb3Jfc3RhdGVfYnVmICptLAogCQkJ
CWNvbnN0IGNoYXIgKmhlYWRlciwKIAkJCQljb25zdCBzdHJ1Y3QgZHJtX2k5MTVfZXJyb3JfY29u
dGV4dCAqY3R4KQogewotCWVycl9wcmludGYobSwgIiVzJXNbJWRdIGh3X2lkICVkLCBwcmlvICVk
LCBndWlsdHkgJWQgYWN0aXZlICVkXG4iLAotCQkgICBoZWFkZXIsIGN0eC0+Y29tbSwgY3R4LT5w
aWQsIGN0eC0+aHdfaWQsCi0JCSAgIGN0eC0+c2NoZWRfYXR0ci5wcmlvcml0eSwgY3R4LT5ndWls
dHksIGN0eC0+YWN0aXZlKTsKKwllcnJfcHJpbnRmKG0sICIlcyVzWyVkXSBwcmlvICVkLCBndWls
dHkgJWQgYWN0aXZlICVkXG4iLAorCQkgICBoZWFkZXIsIGN0eC0+Y29tbSwgY3R4LT5waWQsIGN0
eC0+c2NoZWRfYXR0ci5wcmlvcml0eSwKKwkJICAgY3R4LT5ndWlsdHksIGN0eC0+YWN0aXZlKTsK
IH0KIAogc3RhdGljIHZvaWQgZXJyb3JfcHJpbnRfZW5naW5lKHN0cnVjdCBkcm1faTkxNV9lcnJv
cl9zdGF0ZV9idWYgKm0sCkBAIC0xMjYyLDcgKzEyNjIsNiBAQCBzdGF0aWMgYm9vbCByZWNvcmRf
Y29udGV4dChzdHJ1Y3QgZHJtX2k5MTVfZXJyb3JfY29udGV4dCAqZSwKIAkJcmN1X3JlYWRfdW5s
b2NrKCk7CiAJfQogCi0JZS0+aHdfaWQgPSBjdHgtPmh3X2lkOwogCWUtPnNjaGVkX2F0dHIgPSBj
dHgtPnNjaGVkOwogCWUtPmd1aWx0eSA9IGF0b21pY19yZWFkKCZjdHgtPmd1aWx0eV9jb3VudCk7
CiAJZS0+YWN0aXZlID0gYXRvbWljX3JlYWQoJmN0eC0+YWN0aXZlX2NvdW50KTsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmggYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dwdV9lcnJvci5oCmluZGV4IGNhYWVkNTA5M2Q5NS4uNGRjMzZkNmVlM2Ey
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5oCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmgKQEAgLTExNyw3ICsxMTcsNiBA
QCBzdHJ1Y3QgaTkxNV9ncHVfc3RhdGUgewogCQlzdHJ1Y3QgZHJtX2k5MTVfZXJyb3JfY29udGV4
dCB7CiAJCQljaGFyIGNvbW1bVEFTS19DT01NX0xFTl07CiAJCQlwaWRfdCBwaWQ7Ci0JCQl1MzIg
aHdfaWQ7CiAJCQlpbnQgYWN0aXZlOwogCQkJaW50IGd1aWx0eTsKIAkJCXN0cnVjdCBpOTE1X3Nj
aGVkX2F0dHIgc2NoZWRfYXR0cjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcGVyZi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKaW5kZXggODAwNTU1
MDFlY2NiLi5lY2ZiYzM3YjczOGIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcGVyZi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCkBAIC0xMjgz
LDIyICsxMjgzLDE1IEBAIHN0YXRpYyBpbnQgb2FfZ2V0X3JlbmRlcl9jdHhfaWQoc3RydWN0IGk5
MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAkJfSBlbHNlIHsKIAkJCXN0cmVhbS0+c3BlY2lmaWNf
Y3R4X2lkX21hc2sgPQogCQkJCSgxVSA8PCBHRU44X0NUWF9JRF9XSURUSCkgLSAxOwotCQkJc3Ry
ZWFtLT5zcGVjaWZpY19jdHhfaWQgPQotCQkJCXVwcGVyXzMyX2JpdHMoY2UtPmxyY19kZXNjKTsK
LQkJCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkICY9Ci0JCQkJc3RyZWFtLT5zcGVjaWZpY19jdHhf
aWRfbWFzazsKKwkJCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkID0gc3RyZWFtLT5zcGVjaWZpY19j
dHhfaWRfbWFzazsKIAkJfQogCQlicmVhazsKIAogCWNhc2UgMTE6CiAJY2FzZSAxMjogewogCQlz
dHJlYW0tPnNwZWNpZmljX2N0eF9pZF9tYXNrID0KLQkJCSgoMVUgPDwgR0VOMTFfU1dfQ1RYX0lE
X1dJRFRIKSAtIDEpIDw8IChHRU4xMV9TV19DVFhfSURfU0hJRlQgLSAzMikgfAotCQkJKCgxVSA8
PCBHRU4xMV9FTkdJTkVfSU5TVEFOQ0VfV0lEVEgpIC0gMSkgPDwgKEdFTjExX0VOR0lORV9JTlNU
QU5DRV9TSElGVCAtIDMyKSB8Ci0JCQkoKDEgPDwgR0VOMTFfRU5HSU5FX0NMQVNTX1dJRFRIKSAt
IDEpIDw8IChHRU4xMV9FTkdJTkVfQ0xBU1NfU0hJRlQgLSAzMik7Ci0JCXN0cmVhbS0+c3BlY2lm
aWNfY3R4X2lkID0gdXBwZXJfMzJfYml0cyhjZS0+bHJjX2Rlc2MpOwotCQlzdHJlYW0tPnNwZWNp
ZmljX2N0eF9pZCAmPQotCQkJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWRfbWFzazsKKwkJCSgoMVUg
PDwgR0VOMTFfU1dfQ1RYX0lEX1dJRFRIKSAtIDEpIDw8IChHRU4xMV9TV19DVFhfSURfU0hJRlQg
LSAzMik7CisJCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkID0gc3RyZWFtLT5zcGVjaWZpY19jdHhf
aWRfbWFzazsKIAkJYnJlYWs7CiAJfQogCkBAIC0xMzA2LDYgKzEyOTksOCBAQCBzdGF0aWMgaW50
IG9hX2dldF9yZW5kZXJfY3R4X2lkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiAJ
CU1JU1NJTkdfQ0FTRShJTlRFTF9HRU4oaTkxNSkpOwogCX0KIAorCWNlLT50YWcgPSBzdHJlYW0t
PnNwZWNpZmljX2N0eF9pZF9tYXNrOworCiAJRFJNX0RFQlVHX0RSSVZFUigiZmlsdGVyaW5nIG9u
IGN0eF9pZD0weCV4IGN0eF9pZF9tYXNrPTB4JXhcbiIsCiAJCQkgc3RyZWFtLT5zcGVjaWZpY19j
dHhfaWQsCiAJCQkgc3RyZWFtLT5zcGVjaWZpY19jdHhfaWRfbWFzayk7CkBAIC0xMzI0LDEyICsx
MzE5LDE0IEBAIHN0YXRpYyB2b2lkIG9hX3B1dF9yZW5kZXJfY3R4X2lkKHN0cnVjdCBpOTE1X3Bl
cmZfc3RyZWFtICpzdHJlYW0pCiB7CiAJc3RydWN0IGludGVsX2NvbnRleHQgKmNlOwogCi0Jc3Ry
ZWFtLT5zcGVjaWZpY19jdHhfaWQgPSBJTlZBTElEX0NUWF9JRDsKLQlzdHJlYW0tPnNwZWNpZmlj
X2N0eF9pZF9tYXNrID0gMDsKLQogCWNlID0gZmV0Y2hfYW5kX3plcm8oJnN0cmVhbS0+cGlubmVk
X2N0eCk7Ci0JaWYgKGNlKQorCWlmIChjZSkgeworCQljZS0+dGFnID0gMDsgLyogcmVjb21wdXRl
ZCBvbiBuZXh0IHN1Ym1pc3Npb24gYWZ0ZXIgcGFya2luZyAqLwogCQlpbnRlbF9jb250ZXh0X3Vu
cGluKGNlKTsKKwl9CisKKwlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZCA9IElOVkFMSURfQ1RYX0lE
OworCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkX21hc2sgPSAwOwogfQogCiBzdGF0aWMgdm9pZApk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90cmFjZS5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV90cmFjZS5oCmluZGV4IDI0ZjI5NDRkYTA5ZC4uMWYyY2Y2Y2ZhZmI1
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3RyYWNlLmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV90cmFjZS5oCkBAIC02NjUsNyArNjY1LDYgQEAgVFJBQ0Vf
RVZFTlQoaTkxNV9yZXF1ZXN0X3F1ZXVlLAogCiAJICAgIFRQX1NUUlVDVF9fZW50cnkoCiAJCQkg
ICAgIF9fZmllbGQodTMyLCBkZXYpCi0JCQkgICAgIF9fZmllbGQodTMyLCBod19pZCkKIAkJCSAg
ICAgX19maWVsZCh1NjQsIGN0eCkKIAkJCSAgICAgX19maWVsZCh1MTYsIGNsYXNzKQogCQkJICAg
ICBfX2ZpZWxkKHUxNiwgaW5zdGFuY2UpCkBAIC02NzUsNyArNjc0LDYgQEAgVFJBQ0VfRVZFTlQo
aTkxNV9yZXF1ZXN0X3F1ZXVlLAogCiAJICAgIFRQX2Zhc3RfYXNzaWduKAogCQkJICAgX19lbnRy
eS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRleDsKLQkJCSAgIF9fZW50cnktPmh3
X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsKIAkJCSAgIF9fZW50cnktPmNsYXNzID0gcnEt
PmVuZ2luZS0+dWFiaV9jbGFzczsKIAkJCSAgIF9fZW50cnktPmluc3RhbmNlID0gcnEtPmVuZ2lu
ZS0+dWFiaV9pbnN0YW5jZTsKIAkJCSAgIF9fZW50cnktPmN0eCA9IHJxLT5mZW5jZS5jb250ZXh0
OwpAQCAtNjgzLDEwICs2ODEsOSBAQCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3RfcXVldWUsCiAJ
CQkgICBfX2VudHJ5LT5mbGFncyA9IGZsYWdzOwogCQkJICAgKSwKIAotCSAgICBUUF9wcmludGso
ImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBmbGFn
cz0weCV4IiwKKwkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgY3R4PSVsbHUs
IHNlcW5vPSV1LCBmbGFncz0weCV4IiwKIAkJICAgICAgX19lbnRyeS0+ZGV2LCBfX2VudHJ5LT5j
bGFzcywgX19lbnRyeS0+aW5zdGFuY2UsCi0JCSAgICAgIF9fZW50cnktPmh3X2lkLCBfX2VudHJ5
LT5jdHgsIF9fZW50cnktPnNlcW5vLAotCQkgICAgICBfX2VudHJ5LT5mbGFncykKKwkJICAgICAg
X19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywgX19lbnRyeS0+ZmxhZ3MpCiApOwogCiBERUNM
QVJFX0VWRU5UX0NMQVNTKGk5MTVfcmVxdWVzdCwKQEAgLTY5NSw3ICs2OTIsNiBAQCBERUNMQVJF
X0VWRU5UX0NMQVNTKGk5MTVfcmVxdWVzdCwKIAogCSAgICBUUF9TVFJVQ1RfX2VudHJ5KAogCQkJ
ICAgICBfX2ZpZWxkKHUzMiwgZGV2KQotCQkJICAgICBfX2ZpZWxkKHUzMiwgaHdfaWQpCiAJCQkg
ICAgIF9fZmllbGQodTY0LCBjdHgpCiAJCQkgICAgIF9fZmllbGQodTE2LCBjbGFzcykKIAkJCSAg
ICAgX19maWVsZCh1MTYsIGluc3RhbmNlKQpAQCAtNzA0LDE2ICs3MDAsMTUgQEAgREVDTEFSRV9F
VkVOVF9DTEFTUyhpOTE1X3JlcXVlc3QsCiAKIAkgICAgVFBfZmFzdF9hc3NpZ24oCiAJCQkgICBf
X2VudHJ5LT5kZXYgPSBycS0+aTkxNS0+ZHJtLnByaW1hcnktPmluZGV4OwotCQkJICAgX19lbnRy
eS0+aHdfaWQgPSBycS0+Z2VtX2NvbnRleHQtPmh3X2lkOwogCQkJICAgX19lbnRyeS0+Y2xhc3Mg
PSBycS0+ZW5naW5lLT51YWJpX2NsYXNzOwogCQkJICAgX19lbnRyeS0+aW5zdGFuY2UgPSBycS0+
ZW5naW5lLT51YWJpX2luc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0gcnEtPmZlbmNlLmNv
bnRleHQ7CiAJCQkgICBfX2VudHJ5LT5zZXFubyA9IHJxLT5mZW5jZS5zZXFubzsKIAkJCSAgICks
CiAKLQkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgaHdfaWQ9JXUsIGN0eD0l
bGx1LCBzZXFubz0ldSIsCisJICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9JXU6JXUsIGN0
eD0lbGx1LCBzZXFubz0ldSIsCiAJCSAgICAgIF9fZW50cnktPmRldiwgX19lbnRyeS0+Y2xhc3Ms
IF9fZW50cnktPmluc3RhbmNlLAotCQkgICAgICBfX2VudHJ5LT5od19pZCwgX19lbnRyeS0+Y3R4
LCBfX2VudHJ5LT5zZXFubykKKwkJICAgICAgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubykK
ICk7CiAKIERFRklORV9FVkVOVChpOTE1X3JlcXVlc3QsIGk5MTVfcmVxdWVzdF9hZGQsCkBAIC03
MzgsNyArNzMzLDYgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X2luLAogCiAJICAgIFRQX1NU
UlVDVF9fZW50cnkoCiAJCQkgICAgIF9fZmllbGQodTMyLCBkZXYpCi0JCQkgICAgIF9fZmllbGQo
dTMyLCBod19pZCkKIAkJCSAgICAgX19maWVsZCh1NjQsIGN0eCkKIAkJCSAgICAgX19maWVsZCh1
MTYsIGNsYXNzKQogCQkJICAgICBfX2ZpZWxkKHUxNiwgaW5zdGFuY2UpCkBAIC03NDksNyArNzQz
LDYgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X2luLAogCiAJICAgIFRQX2Zhc3RfYXNzaWdu
KAogCQkJICAgX19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRleDsKLQkJ
CSAgIF9fZW50cnktPmh3X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsKIAkJCSAgIF9fZW50
cnktPmNsYXNzID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFzczsKIAkJCSAgIF9fZW50cnktPmluc3Rh
bmNlID0gcnEtPmVuZ2luZS0+dWFiaV9pbnN0YW5jZTsKIAkJCSAgIF9fZW50cnktPmN0eCA9IHJx
LT5mZW5jZS5jb250ZXh0OwpAQCAtNzU4LDkgKzc1MSw5IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVx
dWVzdF9pbiwKIAkJCSAgIF9fZW50cnktPnBvcnQgPSBwb3J0OwogCQkJICAgKSwKIAotCSAgICBU
UF9wcmludGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUsIHNlcW5v
PSV1LCBwcmlvPSV1LCBwb3J0PSV1IiwKKwkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0l
dToldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBwcmlvPSV1LCBwb3J0PSV1IiwKIAkJICAgICAgX19l
bnRyeS0+ZGV2LCBfX2VudHJ5LT5jbGFzcywgX19lbnRyeS0+aW5zdGFuY2UsCi0JCSAgICAgIF9f
ZW50cnktPmh3X2lkLCBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAorCQkgICAgICBfX2Vu
dHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAogCQkgICAgICBfX2VudHJ5LT5wcmlvLCBfX2VudHJ5
LT5wb3J0KQogKTsKIApAQCAtNzcwLDcgKzc2Myw2IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVz
dF9vdXQsCiAKIAkgICAgVFBfU1RSVUNUX19lbnRyeSgKIAkJCSAgICAgX19maWVsZCh1MzIsIGRl
dikKLQkJCSAgICAgX19maWVsZCh1MzIsIGh3X2lkKQogCQkJICAgICBfX2ZpZWxkKHU2NCwgY3R4
KQogCQkJICAgICBfX2ZpZWxkKHUxNiwgY2xhc3MpCiAJCQkgICAgIF9fZmllbGQodTE2LCBpbnN0
YW5jZSkKQEAgLTc4MCw3ICs3NzIsNiBAQCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3Rfb3V0LAog
CiAJICAgIFRQX2Zhc3RfYXNzaWduKAogCQkJICAgX19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRy
bS5wcmltYXJ5LT5pbmRleDsKLQkJCSAgIF9fZW50cnktPmh3X2lkID0gcnEtPmdlbV9jb250ZXh0
LT5od19pZDsKIAkJCSAgIF9fZW50cnktPmNsYXNzID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFzczsK
IAkJCSAgIF9fZW50cnktPmluc3RhbmNlID0gcnEtPmVuZ2luZS0+dWFiaV9pbnN0YW5jZTsKIAkJ
CSAgIF9fZW50cnktPmN0eCA9IHJxLT5mZW5jZS5jb250ZXh0OwpAQCAtNzg4LDEwICs3NzksOSBA
QCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3Rfb3V0LAogCQkJICAgX19lbnRyeS0+Y29tcGxldGVk
ID0gaTkxNV9yZXF1ZXN0X2NvbXBsZXRlZChycSk7CiAJCQkgICApLAogCi0JCSAgICBUUF9wcmlu
dGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBj
b21wbGV0ZWQ/PSV1IiwKKwkJICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9JXU6JXUsIGN0
eD0lbGx1LCBzZXFubz0ldSwgY29tcGxldGVkPz0ldSIsCiAJCQkgICAgICBfX2VudHJ5LT5kZXYs
IF9fZW50cnktPmNsYXNzLCBfX2VudHJ5LT5pbnN0YW5jZSwKLQkJCSAgICAgIF9fZW50cnktPmh3
X2lkLCBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAotCQkJICAgICAgX19lbnRyeS0+Y29t
cGxldGVkKQorCQkJICAgICAgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywgX19lbnRyeS0+
Y29tcGxldGVkKQogKTsKIAogI2Vsc2UKQEAgLTgyOSw3ICs4MTksNiBAQCBUUkFDRV9FVkVOVChp
OTE1X3JlcXVlc3Rfd2FpdF9iZWdpbiwKIAogCSAgICBUUF9TVFJVQ1RfX2VudHJ5KAogCQkJICAg
ICBfX2ZpZWxkKHUzMiwgZGV2KQotCQkJICAgICBfX2ZpZWxkKHUzMiwgaHdfaWQpCiAJCQkgICAg
IF9fZmllbGQodTY0LCBjdHgpCiAJCQkgICAgIF9fZmllbGQodTE2LCBjbGFzcykKIAkJCSAgICAg
X19maWVsZCh1MTYsIGluc3RhbmNlKQpAQCAtODQ1LDcgKzgzNCw2IEBAIFRSQUNFX0VWRU5UKGk5
MTVfcmVxdWVzdF93YWl0X2JlZ2luLAogCSAgICAgKi8KIAkgICAgVFBfZmFzdF9hc3NpZ24oCiAJ
CQkgICBfX2VudHJ5LT5kZXYgPSBycS0+aTkxNS0+ZHJtLnByaW1hcnktPmluZGV4OwotCQkJICAg
X19lbnRyeS0+aHdfaWQgPSBycS0+Z2VtX2NvbnRleHQtPmh3X2lkOwogCQkJICAgX19lbnRyeS0+
Y2xhc3MgPSBycS0+ZW5naW5lLT51YWJpX2NsYXNzOwogCQkJICAgX19lbnRyeS0+aW5zdGFuY2Ug
PSBycS0+ZW5naW5lLT51YWJpX2luc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0gcnEtPmZl
bmNlLmNvbnRleHQ7CkBAIC04NTMsOSArODQxLDkgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0
X3dhaXRfYmVnaW4sCiAJCQkgICBfX2VudHJ5LT5mbGFncyA9IGZsYWdzOwogCQkJICAgKSwKIAot
CSAgICBUUF9wcmludGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUs
IHNlcW5vPSV1LCBmbGFncz0weCV4IiwKKwkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0l
dToldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBmbGFncz0weCV4IiwKIAkJICAgICAgX19lbnRyeS0+
ZGV2LCBfX2VudHJ5LT5jbGFzcywgX19lbnRyeS0+aW5zdGFuY2UsCi0JCSAgICAgIF9fZW50cnkt
Pmh3X2lkLCBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAorCQkgICAgICBfX2VudHJ5LT5j
dHgsIF9fZW50cnktPnNlcW5vLAogCQkgICAgICBfX2VudHJ5LT5mbGFncykKICk7CiAKQEAgLTk1
OCwxOSArOTQ2LDE3IEBAIERFQ0xBUkVfRVZFTlRfQ0xBU1MoaTkxNV9jb250ZXh0LAogCVRQX1NU
UlVDVF9fZW50cnkoCiAJCQlfX2ZpZWxkKHUzMiwgZGV2KQogCQkJX19maWVsZChzdHJ1Y3QgaTkx
NV9nZW1fY29udGV4dCAqLCBjdHgpCi0JCQlfX2ZpZWxkKHUzMiwgaHdfaWQpCiAJCQlfX2ZpZWxk
KHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKiwgdm0pCiAJKSwKIAogCVRQX2Zhc3RfYXNzaWdu
KAogCQkJX19lbnRyeS0+ZGV2ID0gY3R4LT5pOTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7CiAJCQlf
X2VudHJ5LT5jdHggPSBjdHg7Ci0JCQlfX2VudHJ5LT5od19pZCA9IGN0eC0+aHdfaWQ7CiAJCQlf
X2VudHJ5LT52bSA9IGN0eC0+dm07CiAJKSwKIAotCVRQX3ByaW50aygiZGV2PSV1LCBjdHg9JXAs
IGN0eF92bT0lcCwgaHdfaWQ9JXUiLAotCQkgIF9fZW50cnktPmRldiwgX19lbnRyeS0+Y3R4LCBf
X2VudHJ5LT52bSwgX19lbnRyeS0+aHdfaWQpCisJVFBfcHJpbnRrKCJkZXY9JXUsIGN0eD0lcCwg
Y3R4X3ZtPSVwIiwKKwkJICBfX2VudHJ5LT5kZXYsIF9fZW50cnktPmN0eCwgX19lbnRyeS0+dm0p
CiApCiAKIERFRklORV9FVkVOVChpOTE1X2NvbnRleHQsIGk5MTVfY29udGV4dF9jcmVhdGUsCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3Qu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ldmljdC5jCmluZGV4
IDUyZDJkZjg0MzE0OC4uZjM5ZjAyODJlNzhjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYwpAQCAtNDkxLDggKzQ5MSw4IEBAIHN0YXRpYyBp
bnQgaWd0X2V2aWN0X2NvbnRleHRzKHZvaWQgKmFyZykKIAkJCWlmIChJU19FUlIocnEpKSB7CiAJ
CQkJLyogV2hlbiBmdWxsLCBmYWlsX2lmX2J1c3kgd2lsbCB0cmlnZ2VyIEVCVVNZICovCiAJCQkJ
aWYgKFBUUl9FUlIocnEpICE9IC1FQlVTWSkgewotCQkJCQlwcl9lcnIoIlVuZXhwZWN0ZWQgZXJy
b3IgZnJvbSByZXF1ZXN0IGFsbG9jIChjdHggaHcgaWQgJXUsIG9uICVzKTogJWRcbiIsCi0JCQkJ
CSAgICAgICBjdHgtPmh3X2lkLCBlbmdpbmUtPm5hbWUsCisJCQkJCXByX2VycigiVW5leHBlY3Rl
ZCBlcnJvciBmcm9tIHJlcXVlc3QgYWxsb2MgKG9uICVzKTogJWRcbiIsCisJCQkJCSAgICAgICBl
bmdpbmUtPm5hbWUsCiAJCQkJCSAgICAgICAoaW50KVBUUl9FUlIocnEpKTsKIAkJCQkJZXJyID0g
UFRSX0VSUihycSk7CiAJCQkJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2Vs
ZnRlc3RzL2k5MTVfdm1hLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV92
bWEuYwppbmRleCAxYzlkYjA4ZjdjMjguLmFjMWZmNTU4ZWI5MCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMKQEAgLTE3MCw3ICsxNzAsNyBAQCBzdGF0aWMgaW50
IGlndF92bWFfY3JlYXRlKHZvaWQgKmFyZykKIAkJfQogCiAJCW5jID0gMDsKLQkJZm9yX2VhY2hf
cHJpbWVfbnVtYmVyKG51bV9jdHgsIE1BWF9DT05URVhUX0hXX0lEKSB7CisJCWZvcl9lYWNoX3By
aW1lX251bWJlcihudW1fY3R4LCAyICogTlVNX0NPTlRFWFRfVEFHKSB7CiAJCQlmb3IgKDsgbmMg
PCBudW1fY3R4OyBuYysrKSB7CiAJCQkJY3R4ID0gbW9ja19jb250ZXh0KGk5MTUsICJtb2NrIik7
CiAJCQkJaWYgKCFjdHgpCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeA==

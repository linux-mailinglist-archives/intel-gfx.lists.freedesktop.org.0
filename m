Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 55B95225B5C
	for <lists+intel-gfx@lfdr.de>; Mon, 20 Jul 2020 11:23:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 178CB6E271;
	Mon, 20 Jul 2020 09:23:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (unknown [77.68.26.236])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DADC66E245
 for <intel-gfx@lists.freedesktop.org>; Mon, 20 Jul 2020 09:23:26 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 21870902-1500050 
 for multiple; Mon, 20 Jul 2020 10:23:15 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 20 Jul 2020 10:23:07 +0100
Message-Id: <20200720092312.16975-5-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20200720092312.16975-1-chris@chris-wilson.co.uk>
References: <20200720092312.16975-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 05/10] drm/i915/gt: Distinguish the virtual
 breadcrumbs from the irq breadcrumbs
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Chris Wilson <chris@chris-wilson.co.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gdGhlIHZpcnR1YWwgZW5naW5lcywgd2Ugb25seSB1c2UgdGhlIGludGVsX2JyZWFkY3J1bWJz
IGZvciB0cmFja2luZwpzaWduYWxpbmcgb2Ygc3RhbGUgYnJlYWRjcnVtYnMgZnJvbSB0aGUgaXJx
X3dvcmtlcnMuIFRoZXkgZG8gbm90IGhhdmUKYW55IGFzc29jaWF0ZWQgaW50ZXJydXB0IGhhbmRs
aW5nLCBhY3RpdmUgcmVxdWVzdHMgYXJlIHBhc3NlZCB0byBhCnBoeXNpY2FsIGVuZ2luZSBhbmQg
YXNzb2NpYXRlZCBicmVhZGNydW1iIGludGVycnVwdCBoYW5kbGVyLiBUaGlzIGNhdXNlcwppc3N1
ZXMgZm9yIHVzIGFzIHdlIG5lZWQgdG8gZW5zdXJlIHRoYXQgd2UgZG8gbm90IGFjdHVhbGx5IHRy
eSBhbmQKZW5hYmxlIGludGVycnVwdHMgYW5kIHRoZSBwb3dlcm1hbmFnZW1lbnQgcmVxdWlyZWQg
Zm9yIHRoZW0gb24gdGhlCnZpcnR1YWwgZW5naW5lLCBhcyB0aGV5IHdpbGwgbmV2ZXIgYmUgZGlz
YWJsZWQuIEluc3RlYWQsIGxldCdzCnNwZWNpZnkgdGhlIHBoeXNpY2FsIGVuZ2luZSB1c2VkIGZv
ciBpbnRlcnJ1cHQgaGFuZGxlciBvbiBhIHBhcnRpY3VsYXIKYnJlYWRjcnVtYi4KClNpZ25lZC1v
ZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogVHZydGtv
IFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5jICAgfCA3MiArKysrKysrKysrLS0tLS0tLS0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5oICAgfCAzNiArKysrKysr
KysrCiAuLi4vZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzX3R5cGVzLmggfCA0NyAr
KysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oICAgICAg
ICB8IDE3IC0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyAg
ICAgfCAxNCArKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYyAg
ICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgg
IHwgMzEgKy0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2lycS5jICAg
ICAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAgICAgICAg
ICB8IDExICsrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYyAgICAgICAg
IHwgIDEgKwogLi4uL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1Ym1pc3Npb24uYyAgIHwg
IDMgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jwcy5jICAgICAgICAgICB8ICAx
ICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMgICAgICAgICB8IDEwICsr
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYyAgICAgICAgICAgICAgIHwgIDEgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMgICAgICAgICAgIHwgIDEgKwogZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmggICAgICAgICAgIHwgIDQgLS0KIDE2IGZp
bGVzIGNoYW5nZWQsIDE2MiBpbnNlcnRpb25zKCspLCA5MSBkZWxldGlvbnMoLSkKIGNyZWF0ZSBt
b2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5oCiBj
cmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVt
YnNfdHlwZXMuaAoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Jy
ZWFkY3J1bWJzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5j
CmluZGV4IGZiZGM0NjVhNTg3MC4uNjIxY2Y5ZDFkN2FkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmMKQEAgLTI4LDYgKzI4LDcgQEAKIAogI2luY2x1ZGUg
Imk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV90cmFjZS5oIgorI2luY2x1ZGUgImludGVsX2Jy
ZWFkY3J1bWJzLmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3RfcG0uaCIKICNpbmNsdWRlICJpbnRlbF9n
dF9yZXF1ZXN0cy5oIgogCkBAIC01NSwyMiArNTYsMjEgQEAgc3RhdGljIHZvaWQgaXJxX2Rpc2Fi
bGUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCiBzdGF0aWMgdm9pZCBfX2ludGVs
X2JyZWFkY3J1bWJzX2Rpc2FybV9pcnEoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiKQogewot
CXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9Ci0JCWNvbnRhaW5lcl9vZihiLCBzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzLCBicmVhZGNydW1icyk7Ci0KIAlsb2NrZGVwX2Fzc2VydF9oZWxk
KCZiLT5pcnFfbG9jayk7CiAKKwlpZiAoIWItPmlycV9lbmdpbmUpCisJCXJldHVybjsKKwogCUdF
TV9CVUdfT04oIWItPmlycV9lbmFibGVkKTsKIAlpZiAoIS0tYi0+aXJxX2VuYWJsZWQpCi0JCWly
cV9kaXNhYmxlKGVuZ2luZSk7CisJCWlycV9kaXNhYmxlKGItPmlycV9lbmdpbmUpOwogCiAJV1JJ
VEVfT05DRShiLT5pcnFfYXJtZWQsIGZhbHNlKTsKLQlpbnRlbF9ndF9wbV9wdXRfYXN5bmMoZW5n
aW5lLT5ndCk7CisJaW50ZWxfZ3RfcG1fcHV0X2FzeW5jKGItPmlycV9lbmdpbmUtPmd0KTsKIH0K
IAotdm9pZCBpbnRlbF9lbmdpbmVfZGlzYXJtX2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZSkKK3ZvaWQgaW50ZWxfYnJlYWRjcnVtYnNfcGFyayhzdHJ1Y3QgaW50ZWxf
YnJlYWRjcnVtYnMgKmIpCiB7Ci0Jc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiID0gJmVuZ2lu
ZS0+YnJlYWRjcnVtYnM7CiAJdW5zaWduZWQgbG9uZyBmbGFnczsKIAogCWlmICghUkVBRF9PTkNF
KGItPmlycV9hcm1lZCkpCkBAIC0xMzMsMTMgKzEzMyw4IEBAIF9fZG1hX2ZlbmNlX3NpZ25hbF9f
bm90aWZ5KHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLAogCiBzdGF0aWMgdm9pZCBhZGRfcmV0aXJl
KHN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYiwgc3RydWN0IGludGVsX3RpbWVsaW5lICp0bCkK
IHsKLQlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUgPQotCQljb250YWluZXJfb2YoYiwg
c3RydWN0IGludGVsX2VuZ2luZV9jcywgYnJlYWRjcnVtYnMpOwotCi0JaWYgKHVubGlrZWx5KGlu
dGVsX2VuZ2luZV9pc192aXJ0dWFsKGVuZ2luZSkpKQotCQllbmdpbmUgPSBpbnRlbF92aXJ0dWFs
X2VuZ2luZV9nZXRfc2libGluZyhlbmdpbmUsIDApOwotCi0JaW50ZWxfZW5naW5lX2FkZF9yZXRp
cmUoZW5naW5lLCB0bCk7CisJaWYgKGItPmlycV9lbmdpbmUpCisJCWludGVsX2VuZ2luZV9hZGRf
cmV0aXJlKGItPmlycV9lbmdpbmUsIHRsKTsKIH0KIAogc3RhdGljIGJvb2wgX19zaWduYWxfcmVx
dWVzdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgc3RydWN0IGxpc3RfaGVhZCAqc2lnbmFscykK
QEAgLTIyMiwxNCArMjE3LDEzIEBAIHN0YXRpYyB2b2lkIHNpZ25hbF9pcnFfd29yayhzdHJ1Y3Qg
aXJxX3dvcmsgKndvcmspCiAKIHN0YXRpYyB2b2lkIF9faW50ZWxfYnJlYWRjcnVtYnNfYXJtX2ly
cShzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKmIpCiB7Ci0Jc3RydWN0IGludGVsX2VuZ2luZV9j
cyAqZW5naW5lID0KLQkJY29udGFpbmVyX29mKGIsIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MsIGJy
ZWFkY3J1bWJzKTsKLQogCWxvY2tkZXBfYXNzZXJ0X2hlbGQoJmItPmlycV9sb2NrKTsKKwogCWlm
IChiLT5pcnFfYXJtZWQpCiAJCXJldHVybjsKIAotCWlmICghaW50ZWxfZ3RfcG1fZ2V0X2lmX2F3
YWtlKGVuZ2luZS0+Z3QpKQorCUdFTV9CVUdfT04oIWItPmlycV9lbmdpbmUpOworCWlmICghaW50
ZWxfZ3RfcG1fZ2V0X2lmX2F3YWtlKGItPmlycV9lbmdpbmUtPmd0KSkKIAkJcmV0dXJuOwogCiAJ
LyoKQEAgLTI0OSwzNyArMjQzLDUxIEBAIHN0YXRpYyB2b2lkIF9faW50ZWxfYnJlYWRjcnVtYnNf
YXJtX2lycShzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKmIpCiAJICovCiAKIAlpZiAoIWItPmly
cV9lbmFibGVkKyspCi0JCWlycV9lbmFibGUoZW5naW5lKTsKKwkJaXJxX2VuYWJsZShiLT5pcnFf
ZW5naW5lKTsKIH0KIAotdm9pZCBpbnRlbF9lbmdpbmVfaW5pdF9icmVhZGNydW1icyhzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUpCitzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKgoraW50
ZWxfYnJlYWRjcnVtYnNfY3JlYXRlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmlycV9lbmdpbmUp
CiB7Ci0Jc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiID0gJmVuZ2luZS0+YnJlYWRjcnVtYnM7
CisJc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiOworCisJYiA9IGt6YWxsb2Moc2l6ZW9mKCpi
KSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFiKQorCQlyZXR1cm4gTlVMTDsKIAogCXNwaW5fbG9ja19p
bml0KCZiLT5pcnFfbG9jayk7CiAJSU5JVF9MSVNUX0hFQUQoJmItPnNpZ25hbGVycyk7CiAJSU5J
VF9MSVNUX0hFQUQoJmItPnNpZ25hbGVkX3JlcXVlc3RzKTsKIAogCWluaXRfaXJxX3dvcmsoJmIt
PmlycV93b3JrLCBzaWduYWxfaXJxX3dvcmspOworCisJYi0+aXJxX2VuZ2luZSA9IGlycV9lbmdp
bmU7CisJaWYgKCFpcnFfZW5naW5lKQorCQliLT5pcnFfYXJtZWQgPSB0cnVlOyAvKiBmYWtlIEhX
LCB1c2VkIGZvciBpcnFfd29yayAqLworCisJcmV0dXJuIGI7CiB9CiAKLXZvaWQgaW50ZWxfZW5n
aW5lX3Jlc2V0X2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKK3Zv
aWQgaW50ZWxfYnJlYWRjcnVtYnNfcmVzZXQoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiKQog
ewotCXN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYiA9ICZlbmdpbmUtPmJyZWFkY3J1bWJzOwog
CXVuc2lnbmVkIGxvbmcgZmxhZ3M7CiAKKwlpZiAoIWItPmlycV9lbmdpbmUpCisJCXJldHVybjsK
KwogCXNwaW5fbG9ja19pcnFzYXZlKCZiLT5pcnFfbG9jaywgZmxhZ3MpOwogCiAJaWYgKGItPmly
cV9lbmFibGVkKQotCQlpcnFfZW5hYmxlKGVuZ2luZSk7CisJCWlycV9lbmFibGUoYi0+aXJxX2Vu
Z2luZSk7CiAJZWxzZQotCQlpcnFfZGlzYWJsZShlbmdpbmUpOworCQlpcnFfZGlzYWJsZShiLT5p
cnFfZW5naW5lKTsKIAogCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmItPmlycV9sb2NrLCBmbGFn
cyk7CiB9CiAKLXZvaWQgaW50ZWxfZW5naW5lX2ZpbmlfYnJlYWRjcnVtYnMoc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqZW5naW5lKQordm9pZCBpbnRlbF9icmVhZGNydW1ic19mcmVlKHN0cnVjdCBp
bnRlbF9icmVhZGNydW1icyAqYikKIHsKKwlrZnJlZShiKTsKIH0KIAogc3RhdGljIHZvaWQgaW5z
ZXJ0X2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCkBAIC0zNjksMTEgKzM3Nywx
MSBAQCBib29sIGk5MTVfcmVxdWVzdF9lbmFibGVfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1
ZXN0ICpycSkKIAkgKiByZXF1ZXN0IHN1Ym1pdC91bnN1Ym1pdCBwYXRoLCBhbmQgc28gd2UgbXVz
dCBiZSBtb3JlIGNhcmVmdWwgdG8KIAkgKiBhY3F1aXJlIHRoZSByaWdodCBsb2NrLgogCSAqLwot
CWIgPSAmUkVBRF9PTkNFKHJxLT5lbmdpbmUpLT5icmVhZGNydW1iczsKKwliID0gUkVBRF9PTkNF
KHJxLT5lbmdpbmUpLT5icmVhZGNydW1iczsKIAlzcGluX2xvY2soJmItPmlycV9sb2NrKTsKLQl3
aGlsZSAodW5saWtlbHkoYiAhPSAmUkVBRF9PTkNFKHJxLT5lbmdpbmUpLT5icmVhZGNydW1icykp
IHsKKwl3aGlsZSAodW5saWtlbHkoYiAhPSBSRUFEX09OQ0UocnEtPmVuZ2luZSktPmJyZWFkY3J1
bWJzKSkgewogCQlzcGluX3VubG9jaygmYi0+aXJxX2xvY2spOwotCQliID0gJlJFQURfT05DRShy
cS0+ZW5naW5lKS0+YnJlYWRjcnVtYnM7CisJCWIgPSBSRUFEX09OQ0UocnEtPmVuZ2luZSktPmJy
ZWFkY3J1bWJzOwogCQlzcGluX2xvY2soJmItPmlycV9sb2NrKTsKIAl9CiAKQEAgLTM5NCw3ICs0
MDIsNyBAQCBib29sIGk5MTVfcmVxdWVzdF9lbmFibGVfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9y
ZXF1ZXN0ICpycSkKIAogdm9pZCBpOTE1X3JlcXVlc3RfY2FuY2VsX2JyZWFkY3J1bWIoc3RydWN0
IGk5MTVfcmVxdWVzdCAqcnEpCiB7Ci0Jc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiID0gJnJx
LT5lbmdpbmUtPmJyZWFkY3J1bWJzOworCXN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYiA9IHJx
LT5lbmdpbmUtPmJyZWFkY3J1bWJzOwogCiAJLyoKIAkgKiBXZSBtdXN0IHdhaXQgZm9yIGItPmly
cV9sb2NrIHNvIHRoYXQgd2Uga25vdyB0aGUgaW50ZXJydXB0IGhhbmRsZXIKQEAgLTQxOCwxMSAr
NDI2LDExIEBAIHZvaWQgaTkxNV9yZXF1ZXN0X2NhbmNlbF9icmVhZGNydW1iKHN0cnVjdCBpOTE1
X3JlcXVlc3QgKnJxKQogdm9pZCBpbnRlbF9lbmdpbmVfcHJpbnRfYnJlYWRjcnVtYnMoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCQkJCSAgICBzdHJ1Y3QgZHJtX3ByaW50ZXIgKnAp
CiB7Ci0Jc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiID0gJmVuZ2luZS0+YnJlYWRjcnVtYnM7
CisJc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiID0gZW5naW5lLT5icmVhZGNydW1iczsKIAlz
dHJ1Y3QgaW50ZWxfY29udGV4dCAqY2U7CiAJc3RydWN0IGk5MTVfcmVxdWVzdCAqcnE7CiAKLQlp
ZiAobGlzdF9lbXB0eSgmYi0+c2lnbmFsZXJzKSkKKwlpZiAoIWIgfHwgbGlzdF9lbXB0eSgmYi0+
c2lnbmFsZXJzKSkKIAkJcmV0dXJuOwogCiAJZHJtX3ByaW50ZihwLCAiU2lnbmFsczpcbiIpOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuaCBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmgKbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi4wZDI1Zjc5MzE1OWUKLS0tIC9kZXYvbnVsbAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5oCkBAIC0wLDAg
KzEsMzYgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQgKi8KKy8qCisgKiBDb3B5
cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpZm5kZWYgX19JTlRFTF9C
UkVBRENSVU1CU19fXworI2RlZmluZSBfX0lOVEVMX0JSRUFEQ1JVTUJTX18KKworI2luY2x1ZGUg
PGxpbnV4L2lycV93b3JrLmg+CisKKyNpbmNsdWRlICJpbnRlbF9lbmdpbmVfdHlwZXMuaCIKKwor
c3RydWN0IGRybV9wcmludGVyOworc3RydWN0IGk5MTVfcmVxdWVzdDsKK3N0cnVjdCBpbnRlbF9i
cmVhZGNydW1iczsKKworc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICoKK2ludGVsX2JyZWFkY3J1
bWJzX2NyZWF0ZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICppcnFfZW5naW5lKTsKK3ZvaWQgaW50
ZWxfYnJlYWRjcnVtYnNfZnJlZShzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKmIpOworCit2b2lk
IGludGVsX2JyZWFkY3J1bWJzX3Jlc2V0KHN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYik7Cit2
b2lkIGludGVsX2JyZWFkY3J1bWJzX3Bhcmsoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiKTsK
Kworc3RhdGljIGlubGluZSB2b2lkCitpbnRlbF9lbmdpbmVfc2lnbmFsX2JyZWFkY3J1bWJzKHN0
cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKK3sKKwlpcnFfd29ya19xdWV1ZSgmZW5naW5l
LT5icmVhZGNydW1icy0+aXJxX3dvcmspOworfQorCit2b2lkIGludGVsX2VuZ2luZV9wcmludF9i
cmVhZGNydW1icyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCisJCQkJICAgIHN0cnVj
dCBkcm1fcHJpbnRlciAqcCk7CisKK2Jvb2wgaTkxNV9yZXF1ZXN0X2VuYWJsZV9icmVhZGNydW1i
KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJlcXVlc3QpOwordm9pZCBpOTE1X3JlcXVlc3RfY2FuY2Vs
X2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCk7CisKKyNlbmRpZiAvKiBf
X0lOVEVMX0JSRUFEQ1JVTUJTX18gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2JyZWFkY3J1bWJzX3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9icmVhZGNydW1ic190eXBlcy5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAwMDAwMC4uOGU1M2I5OTQyNjk1Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnNfdHlwZXMuaApAQCAtMCwwICsxLDQ3IEBACisvKiBT
UERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUICovCisvKgorICogQ29weXJpZ2h0IMKpIDIwMTkg
SW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaWZuZGVmIF9fSU5URUxfQlJFQURDUlVNQlNfVFlQ
RVNfXworI2RlZmluZSBfX0lOVEVMX0JSRUFEQ1JVTUJTX1RZUEVTX18KKworI2luY2x1ZGUgPGxp
bnV4L2lycV93b3JrLmg+CisjaW5jbHVkZSA8bGludXgvbGlzdC5oPgorI2luY2x1ZGUgPGxpbnV4
L3NwaW5sb2NrLmg+CisjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4KKworLyoKKyAqIFJhdGhlciB0
aGFuIGhhdmUgZXZlcnkgY2xpZW50IHdhaXQgdXBvbiBhbGwgdXNlciBpbnRlcnJ1cHRzLAorICog
d2l0aCB0aGUgaGVyZCB3YWtpbmcgYWZ0ZXIgZXZlcnkgaW50ZXJydXB0IGFuZCBlYWNoIGRvaW5n
IHRoZQorICogaGVhdnl3ZWlnaHQgc2Vxbm8gZGFuY2UsIHdlIGRlbGVnYXRlIHRoZSB0YXNrIChv
ZiBiZWluZyB0aGUKKyAqIGJvdHRvbS1oYWxmIG9mIHRoZSB1c2VyIGludGVycnVwdCkgdG8gdGhl
IGZpcnN0IGNsaWVudC4gQWZ0ZXIKKyAqIGV2ZXJ5IGludGVycnVwdCwgd2Ugd2FrZSB1cCBvbmUg
Y2xpZW50LCB3aG8gZG9lcyB0aGUgaGVhdnl3ZWlnaHQKKyAqIGNvaGVyZW50IHNlcW5vIHJlYWQg
YW5kIGVpdGhlciBnb2VzIGJhY2sgdG8gc2xlZXAgKGlmIGluY29tcGxldGUpLAorICogb3Igd2Fr
ZXMgdXAgYWxsIHRoZSBjb21wbGV0ZWQgY2xpZW50cyBpbiBwYXJhbGxlbCwgYmVmb3JlIHRoZW4K
KyAqIHRyYW5zZmVycmluZyB0aGUgYm90dG9tLWhhbGYgc3RhdHVzIHRvIHRoZSBuZXh0IGNsaWVu
dCBpbiB0aGUgcXVldWUuCisgKgorICogQ29tcGFyZWQgdG8gd2Fsa2luZyB0aGUgZW50aXJlIGxp
c3Qgb2Ygd2FpdGVycyBpbiBhIHNpbmdsZSBkZWRpY2F0ZWQKKyAqIGJvdHRvbS1oYWxmLCB3ZSBy
ZWR1Y2UgdGhlIGxhdGVuY3kgb2YgdGhlIGZpcnN0IHdhaXRlciBieSBhdm9pZGluZworICogYSBj
b250ZXh0IHN3aXRjaCwgYnV0IGluY3VyIGFkZGl0aW9uYWwgY29oZXJlbnQgc2Vxbm8gcmVhZHMg
d2hlbgorICogZm9sbG93aW5nIHRoZSBjaGFpbiBvZiByZXF1ZXN0IGJyZWFkY3J1bWJzLiBTaW5j
ZSBpdCBpcyBtb3N0IGxpa2VseQorICogdGhhdCB3ZSBoYXZlIGEgc2luZ2xlIGNsaWVudCB3YWl0
aW5nIG9uIGVhY2ggc2Vxbm8sIHRoZW4gcmVkdWNpbmcKKyAqIHRoZSBvdmVyaGVhZCBvZiB3YWtp
bmcgdGhhdCBjbGllbnQgaXMgbXVjaCBwcmVmZXJyZWQuCisgKi8KK3N0cnVjdCBpbnRlbF9icmVh
ZGNydW1icyB7CisJc3BpbmxvY2tfdCBpcnFfbG9jazsgLyogcHJvdGVjdHMgdGhlIGxpc3RzIHVz
ZWQgaW4gaGFyZGlycSBjb250ZXh0ICovCisKKwkvKiBOb3QgYWxsIGJyZWFkY3J1bWJzIGFyZSBh
dHRhY2hlZCB0byBwaHlzaWNhbCBIVyAqLworCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmlycV9l
bmdpbmU7CisKKwlzdHJ1Y3QgbGlzdF9oZWFkIHNpZ25hbGVyczsKKwlzdHJ1Y3QgbGlzdF9oZWFk
IHNpZ25hbGVkX3JlcXVlc3RzOworCisJc3RydWN0IGlycV93b3JrIGlycV93b3JrOyAvKiBmb3Ig
dXNlIGZyb20gaW5zaWRlIGlycV9sb2NrICovCisKKwl1bnNpZ25lZCBpbnQgaXJxX2VuYWJsZWQ7
CisKKwlib29sIGlycV9hcm1lZDsKK307CisKKyNlbmRpZiAvKiBfX0lOVEVMX0JSRUFEQ1JVTUJT
X1RZUEVTX18gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Vu
Z2luZS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKaW5kZXggZmFm
MDBhMzUzZTI1Li4wOGUyYzAwMGRjYzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2VuZ2luZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Vu
Z2luZS5oCkBAIC0yMjMsMjMgKzIyMyw2IEBAIHZvaWQgaW50ZWxfZW5naW5lX2dldF9pbnN0ZG9u
ZShjb25zdCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAKIHZvaWQgaW50ZWxfZW5n
aW5lX2luaXRfZXhlY2xpc3RzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7CiAKLXZv
aWQgaW50ZWxfZW5naW5lX2luaXRfYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lKTsKLXZvaWQgaW50ZWxfZW5naW5lX2ZpbmlfYnJlYWRjcnVtYnMoc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqZW5naW5lKTsKLQotdm9pZCBpbnRlbF9lbmdpbmVfZGlzYXJtX2JyZWFkY3J1
bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7Ci0KLXN0YXRpYyBpbmxpbmUgdm9p
ZAotaW50ZWxfZW5naW5lX3NpZ25hbF9icmVhZGNydW1icyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICplbmdpbmUpCi17Ci0JaXJxX3dvcmtfcXVldWUoJmVuZ2luZS0+YnJlYWRjcnVtYnMuaXJxX3dv
cmspOwotfQotCi12b2lkIGludGVsX2VuZ2luZV9yZXNldF9icmVhZGNydW1icyhzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzICplbmdpbmUpOwotdm9pZCBpbnRlbF9lbmdpbmVfZmluaV9icmVhZGNydW1i
cyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwotCi12b2lkIGludGVsX2VuZ2luZV9w
cmludF9icmVhZGNydW1icyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCi0JCQkJICAg
IHN0cnVjdCBkcm1fcHJpbnRlciAqcCk7Ci0KIHN0YXRpYyBpbmxpbmUgdTMyICpfX2dlbjhfZW1p
dF9waXBlX2NvbnRyb2wodTMyICpiYXRjaCwgdTMyIGZsYWdzMCwgdTMyIGZsYWdzMSwgdTMyIG9m
ZnNldCkKIHsKIAltZW1zZXQoYmF0Y2gsIDAsIDYgKiBzaXplb2YodTMyKSk7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCmluZGV4IGRkMWE0MmM0ZDM0NC4uYzIwYTkx
YzEzMThmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVf
Y3MuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwpAQCAt
MjgsNiArMjgsNyBAQAogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKIAorI2luY2x1ZGUgImludGVs
X2JyZWFkY3J1bWJzLmgiCiAjaW5jbHVkZSAiaW50ZWxfY29udGV4dC5oIgogI2luY2x1ZGUgImlu
dGVsX2VuZ2luZS5oIgogI2luY2x1ZGUgImludGVsX2VuZ2luZV9wbS5oIgpAQCAtNzAwLDggKzcw
MSwxMyBAQCBzdGF0aWMgaW50IGVuZ2luZV9zZXR1cF9jb21tb24oc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lKQogCWlmIChlcnIpCiAJCXJldHVybiBlcnI7CiAKKwllbmdpbmUtPmJyZWFk
Y3J1bWJzID0gaW50ZWxfYnJlYWRjcnVtYnNfY3JlYXRlKGVuZ2luZSk7CisJaWYgKCFlbmdpbmUt
PmJyZWFkY3J1bWJzKSB7CisJCWVyciA9IC1FTk9NRU07CisJCWdvdG8gZXJyX3N0YXR1czsKKwl9
CisKIAlpbnRlbF9lbmdpbmVfaW5pdF9hY3RpdmUoZW5naW5lLCBFTkdJTkVfUEhZU0lDQUwpOwot
CWludGVsX2VuZ2luZV9pbml0X2JyZWFkY3J1bWJzKGVuZ2luZSk7CiAJaW50ZWxfZW5naW5lX2lu
aXRfZXhlY2xpc3RzKGVuZ2luZSk7CiAJaW50ZWxfZW5naW5lX2luaXRfY21kX3BhcnNlcihlbmdp
bmUpOwogCWludGVsX2VuZ2luZV9pbml0X19wbShlbmdpbmUpOwpAQCAtNzE2LDYgKzcyMiwxMCBA
QCBzdGF0aWMgaW50IGVuZ2luZV9zZXR1cF9jb21tb24oc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lKQogCWludGVsX2VuZ2luZV9pbml0X2N0eF93YShlbmdpbmUpOwogCiAJcmV0dXJuIDA7
CisKK2Vycl9zdGF0dXM6CisJY2xlYW51cF9zdGF0dXNfcGFnZShlbmdpbmUpOworCXJldHVybiBl
cnI7CiB9CiAKIHN0cnVjdCBtZWFzdXJlX2JyZWFkY3J1bWIgewpAQCAtOTAyLDkgKzkxMiw5IEBA
IHZvaWQgaW50ZWxfZW5naW5lX2NsZWFudXBfY29tbW9uKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSkKIAl0YXNrbGV0X2tpbGwoJmVuZ2luZS0+ZXhlY2xpc3RzLnRhc2tsZXQpOyAvKiBm
bHVzaCB0aGUgY2FsbGJhY2sgKi8KIAogCWNsZWFudXBfc3RhdHVzX3BhZ2UoZW5naW5lKTsKKwlp
bnRlbF9icmVhZGNydW1ic19mcmVlKGVuZ2luZS0+YnJlYWRjcnVtYnMpOwogCiAJaW50ZWxfZW5n
aW5lX2ZpbmlfcmV0aXJlKGVuZ2luZSk7Ci0JaW50ZWxfZW5naW5lX2ZpbmlfYnJlYWRjcnVtYnMo
ZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVfY2xlYW51cF9jbWRfcGFyc2VyKGVuZ2luZSk7CiAKIAlp
ZiAoZW5naW5lLT5kZWZhdWx0X3N0YXRlKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZW5naW5lX3BtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfcG0uYwppbmRleCA4ZWMzZWVjZjNlMzkuLmY3YjJlMDdlMjIyOSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3BtLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3BtLmMKQEAgLTYsNiArNiw3IEBACiAKICNpbmNs
dWRlICJpOTE1X2Rydi5oIgogCisjaW5jbHVkZSAiaW50ZWxfYnJlYWRjcnVtYnMuaCIKICNpbmNs
dWRlICJpbnRlbF9jb250ZXh0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZW5naW5lLmgiCiAjaW5jbHVk
ZSAiaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5oIgpAQCAtMjQ3LDcgKzI0OCw3IEBAIHN0YXRpYyBp
bnQgX19lbmdpbmVfcGFyayhzdHJ1Y3QgaW50ZWxfd2FrZXJlZiAqd2YpCiAJY2FsbF9pZGxlX2Jh
cnJpZXJzKGVuZ2luZSk7IC8qIGNsZWFudXAgYWZ0ZXIgd2VkZ2luZyAqLwogCiAJaW50ZWxfZW5n
aW5lX3BhcmtfaGVhcnRiZWF0KGVuZ2luZSk7Ci0JaW50ZWxfZW5naW5lX2Rpc2FybV9icmVhZGNy
dW1icyhlbmdpbmUpOworCWludGVsX2JyZWFkY3J1bWJzX3BhcmsoZW5naW5lLT5icmVhZGNydW1i
cyk7CiAKIAkvKiBNdXN0IGJlIHJlc2V0IHVwb24gaWRsaW5nLCBvciB3ZSBtYXkgbWlzcyB0aGUg
YnVzeSB3YWtldXAuICovCiAJR0VNX0JVR19PTihlbmdpbmUtPmV4ZWNsaXN0cy5xdWV1ZV9wcmlv
cml0eV9oaW50ICE9IElOVF9NSU4pOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZW5naW5lX3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfdHlwZXMuaAppbmRleCA4ZGU5MmZkN2QzOTIuLmM0MDBhYWEyMjg3YiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKQEAgLTIyLDYgKzIyLDcg
QEAKICNpbmNsdWRlICJpOTE1X3BtdS5oIgogI2luY2x1ZGUgImk5MTVfcHJpb2xpc3RfdHlwZXMu
aCIKICNpbmNsdWRlICJpOTE1X3NlbGZ0ZXN0LmgiCisjaW5jbHVkZSAiaW50ZWxfYnJlYWRjcnVt
YnNfdHlwZXMuaCIKICNpbmNsdWRlICJpbnRlbF9zc2V1LmgiCiAjaW5jbHVkZSAiaW50ZWxfdGlt
ZWxpbmVfdHlwZXMuaCIKICNpbmNsdWRlICJpbnRlbF91bmNvcmUuaCIKQEAgLTM3MywzNCArMzc0
LDggQEAgc3RydWN0IGludGVsX2VuZ2luZV9jcyB7CiAJICovCiAJc3RydWN0IGV3bWFfX2VuZ2lu
ZV9sYXRlbmN5IGxhdGVuY3k7CiAKLQkvKiBSYXRoZXIgdGhhbiBoYXZlIGV2ZXJ5IGNsaWVudCB3
YWl0IHVwb24gYWxsIHVzZXIgaW50ZXJydXB0cywKLQkgKiB3aXRoIHRoZSBoZXJkIHdha2luZyBh
ZnRlciBldmVyeSBpbnRlcnJ1cHQgYW5kIGVhY2ggZG9pbmcgdGhlCi0JICogaGVhdnl3ZWlnaHQg
c2Vxbm8gZGFuY2UsIHdlIGRlbGVnYXRlIHRoZSB0YXNrIChvZiBiZWluZyB0aGUKLQkgKiBib3R0
b20taGFsZiBvZiB0aGUgdXNlciBpbnRlcnJ1cHQpIHRvIHRoZSBmaXJzdCBjbGllbnQuIEFmdGVy
Ci0JICogZXZlcnkgaW50ZXJydXB0LCB3ZSB3YWtlIHVwIG9uZSBjbGllbnQsIHdobyBkb2VzIHRo
ZSBoZWF2eXdlaWdodAotCSAqIGNvaGVyZW50IHNlcW5vIHJlYWQgYW5kIGVpdGhlciBnb2VzIGJh
Y2sgdG8gc2xlZXAgKGlmIGluY29tcGxldGUpLAotCSAqIG9yIHdha2VzIHVwIGFsbCB0aGUgY29t
cGxldGVkIGNsaWVudHMgaW4gcGFyYWxsZWwsIGJlZm9yZSB0aGVuCi0JICogdHJhbnNmZXJyaW5n
IHRoZSBib3R0b20taGFsZiBzdGF0dXMgdG8gdGhlIG5leHQgY2xpZW50IGluIHRoZSBxdWV1ZS4K
LQkgKgotCSAqIENvbXBhcmVkIHRvIHdhbGtpbmcgdGhlIGVudGlyZSBsaXN0IG9mIHdhaXRlcnMg
aW4gYSBzaW5nbGUgZGVkaWNhdGVkCi0JICogYm90dG9tLWhhbGYsIHdlIHJlZHVjZSB0aGUgbGF0
ZW5jeSBvZiB0aGUgZmlyc3Qgd2FpdGVyIGJ5IGF2b2lkaW5nCi0JICogYSBjb250ZXh0IHN3aXRj
aCwgYnV0IGluY3VyIGFkZGl0aW9uYWwgY29oZXJlbnQgc2Vxbm8gcmVhZHMgd2hlbgotCSAqIGZv
bGxvd2luZyB0aGUgY2hhaW4gb2YgcmVxdWVzdCBicmVhZGNydW1icy4gU2luY2UgaXQgaXMgbW9z
dCBsaWtlbHkKLQkgKiB0aGF0IHdlIGhhdmUgYSBzaW5nbGUgY2xpZW50IHdhaXRpbmcgb24gZWFj
aCBzZXFubywgdGhlbiByZWR1Y2luZwotCSAqIHRoZSBvdmVyaGVhZCBvZiB3YWtpbmcgdGhhdCBj
bGllbnQgaXMgbXVjaCBwcmVmZXJyZWQuCi0JICovCi0Jc3RydWN0IGludGVsX2JyZWFkY3J1bWJz
IHsKLQkJc3BpbmxvY2tfdCBpcnFfbG9jazsKLQkJc3RydWN0IGxpc3RfaGVhZCBzaWduYWxlcnM7
Ci0KLQkJc3RydWN0IGxpc3RfaGVhZCBzaWduYWxlZF9yZXF1ZXN0czsKLQotCQlzdHJ1Y3QgaXJx
X3dvcmsgaXJxX3dvcms7IC8qIGZvciB1c2UgZnJvbSBpbnNpZGUgaXJxX2xvY2sgKi8KLQotCQl1
bnNpZ25lZCBpbnQgaXJxX2VuYWJsZWQ7Ci0KLQkJYm9vbCBpcnFfYXJtZWQ7Ci0JfSBicmVhZGNy
dW1iczsKKwkvKiBLZWVwIHRyYWNrIG9mIGFsbCB0aGUgc2Vxbm8gdXNlZCwgYSB0cmFpbCBvZiBi
cmVhZGNydW1icyAqLworCXN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYnJlYWRjcnVtYnM7CiAK
IAlzdHJ1Y3QgaW50ZWxfZW5naW5lX3BtdSB7CiAJCS8qKgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfaXJxLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9ndF9pcnEuYwppbmRleCBiMDVkYTY4ZTUyZjQuLjI1NzA2M2E1NzEwMSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfaXJxLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfaXJxLmMKQEAgLTgsNiArOCw3IEBACiAKICNpbmNsdWRl
ICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImk5MTVfaXJxLmgiCisjaW5jbHVkZSAiaW50ZWxfYnJl
YWRjcnVtYnMuaCIKICNpbmNsdWRlICJpbnRlbF9ndC5oIgogI2luY2x1ZGUgImludGVsX2d0X2ly
cS5oIgogI2luY2x1ZGUgImludGVsX3VuY29yZS5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9s
cmMuYwppbmRleCA1ZTgyNzhlOGFjNzkuLjkxMTJiYjA3YTA2OCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfbHJjLmMKQEAgLTEzNyw2ICsxMzcsNyBAQAogI2luY2x1ZGUgImk5MTVfcGVyZi5o
IgogI2luY2x1ZGUgImk5MTVfdHJhY2UuaCIKICNpbmNsdWRlICJpOTE1X3ZncHUuaCIKKyNpbmNs
dWRlICJpbnRlbF9icmVhZGNydW1icy5oIgogI2luY2x1ZGUgImludGVsX2NvbnRleHQuaCIKICNp
bmNsdWRlICJpbnRlbF9lbmdpbmVfcG0uaCIKICNpbmNsdWRlICJpbnRlbF9ndC5oIgpAQCAtNDEx
OSw3ICs0MTIwLDcgQEAgc3RhdGljIGludCBleGVjbGlzdHNfcmVzdW1lKHN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZSkKIHsKIAlpbnRlbF9tb2NzX2luaXRfZW5naW5lKGVuZ2luZSk7CiAK
LQlpbnRlbF9lbmdpbmVfcmVzZXRfYnJlYWRjcnVtYnMoZW5naW5lKTsKKwlpbnRlbF9icmVhZGNy
dW1ic19yZXNldChlbmdpbmUtPmJyZWFkY3J1bWJzKTsKIAogCWlmIChHRU1fU0hPV19ERUJVRygp
ICYmIHVuZXhwZWN0ZWRfc3RhcnRpbmdfc3RhdGUoZW5naW5lKSkgewogCQlzdHJ1Y3QgZHJtX3By
aW50ZXIgcCA9IGRybV9kZWJ1Z19wcmludGVyKF9fZnVuY19fKTsKQEAgLTU3MDQsOSArNTcwNSw3
IEBAIGludGVsX2V4ZWNsaXN0c19jcmVhdGVfdmlydHVhbChzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICoqc2libGluZ3MsCiAJc25wcmludGYodmUtPmJhc2UubmFtZSwgc2l6ZW9mKHZlLT5iYXNlLm5h
bWUpLCAidmlydHVhbCIpOwogCiAJaW50ZWxfZW5naW5lX2luaXRfYWN0aXZlKCZ2ZS0+YmFzZSwg
RU5HSU5FX1ZJUlRVQUwpOwotCWludGVsX2VuZ2luZV9pbml0X2JyZWFkY3J1bWJzKCZ2ZS0+YmFz
ZSk7CiAJaW50ZWxfZW5naW5lX2luaXRfZXhlY2xpc3RzKCZ2ZS0+YmFzZSk7Ci0JdmUtPmJhc2Uu
YnJlYWRjcnVtYnMuaXJxX2FybWVkID0gdHJ1ZTsgLyogZmFrZSBIVywgdXNlZCBmb3IgaXJxX3dv
cmsgKi8KIAogCXZlLT5iYXNlLmNvcHMgPSAmdmlydHVhbF9jb250ZXh0X29wczsKIAl2ZS0+YmFz
ZS5yZXF1ZXN0X2FsbG9jID0gZXhlY2xpc3RzX3JlcXVlc3RfYWxsb2M7CkBAIC01NzIzLDYgKzU3
MjIsMTIgQEAgaW50ZWxfZXhlY2xpc3RzX2NyZWF0ZV92aXJ0dWFsKHN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKipzaWJsaW5ncywKIAogCWludGVsX2NvbnRleHRfaW5pdCgmdmUtPmNvbnRleHQsICZ2
ZS0+YmFzZSk7CiAKKwl2ZS0+YmFzZS5icmVhZGNydW1icyA9IGludGVsX2JyZWFkY3J1bWJzX2Ny
ZWF0ZShOVUxMKTsKKwlpZiAoIXZlLT5iYXNlLmJyZWFkY3J1bWJzKSB7CisJCWVyciA9IC1FTk9N
RU07CisJCWdvdG8gZXJyX3B1dDsKKwl9CisKIAlmb3IgKG4gPSAwOyBuIDwgY291bnQ7IG4rKykg
ewogCQlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpzaWJsaW5nID0gc2libGluZ3Nbbl07CiAKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNldC5jCmluZGV4IDQ2YTVjZWZmYzIyZi4uYWMzNmI2
N2ZiNDZiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNldC5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKQEAgLTE1LDYgKzE1
LDcgQEAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImk5MTVfZ3B1X2Vycm9yLmgi
CiAjaW5jbHVkZSAiaTkxNV9pcnEuaCIKKyNpbmNsdWRlICJpbnRlbF9icmVhZGNydW1icy5oIgog
I2luY2x1ZGUgImludGVsX2VuZ2luZV9wbS5oIgogI2luY2x1ZGUgImludGVsX2d0LmgiCiAjaW5j
bHVkZSAiaW50ZWxfZ3RfcG0uaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX3Jpbmdfc3VibWlzc2lvbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
cmluZ19zdWJtaXNzaW9uLmMKaW5kZXggOTQ5MTVmNjY4NzE1Li4xODZhYTJkM2E4M2UgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jpbmdfc3VibWlzc2lvbi5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jpbmdfc3VibWlzc2lvbi5jCkBAIC0z
Miw2ICszMiw3IEBACiAjaW5jbHVkZSAiZ2VuNl9wcGd0dC5oIgogI2luY2x1ZGUgImdlbjdfcmVu
ZGVyY2xlYXIuaCIKICNpbmNsdWRlICJpOTE1X2Rydi5oIgorI2luY2x1ZGUgImludGVsX2JyZWFk
Y3J1bWJzLmgiCiAjaW5jbHVkZSAiaW50ZWxfY29udGV4dC5oIgogI2luY2x1ZGUgImludGVsX2d0
LmgiCiAjaW5jbHVkZSAiaW50ZWxfcmVzZXQuaCIKQEAgLTI1NSw3ICsyNTYsNyBAQCBzdGF0aWMg
aW50IHhjc19yZXN1bWUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCWVsc2UKIAkJ
cmluZ19zZXR1cF9zdGF0dXNfcGFnZShlbmdpbmUpOwogCi0JaW50ZWxfZW5naW5lX3Jlc2V0X2Jy
ZWFkY3J1bWJzKGVuZ2luZSk7CisJaW50ZWxfYnJlYWRjcnVtYnNfcmVzZXQoZW5naW5lLT5icmVh
ZGNydW1icyk7CiAKIAkvKiBFbmZvcmNlIG9yZGVyaW5nIGJ5IHJlYWRpbmcgSEVBRCByZWdpc3Rl
ciBiYWNrICovCiAJRU5HSU5FX1BPU1RJTkdfUkVBRChlbmdpbmUsIFJJTkdfSEVBRCk7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ycHMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX3Jwcy5jCmluZGV4IDk3YmExNGFkNTJlNC4uZTZhMDBlZWEwNjMx
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ycHMuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ycHMuYwpAQCAtNyw2ICs3LDcgQEAKICNpbmNs
dWRlIDxkcm0vaTkxNV9kcm0uaD4KIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCisjaW5jbHVkZSAi
aW50ZWxfYnJlYWRjcnVtYnMuaCIKICNpbmNsdWRlICJpbnRlbF9ndC5oIgogI2luY2x1ZGUgImlu
dGVsX2d0X2Nsb2NrX3V0aWxzLmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3RfaXJxLmgiCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9tb2NrX2VuZ2luZS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvbW9ja19lbmdpbmUuYwppbmRleCAwNjMwM2JhOThjMTkuLmQxOTcxZmZkY2E0
MiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvbW9ja19lbmdpbmUuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9tb2NrX2VuZ2luZS5jCkBAIC0yNjEsMTEgKzI2MSwx
MiBAQCBzdGF0aWMgdm9pZCBtb2NrX2VuZ2luZV9yZWxlYXNlKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSkKIAogCUdFTV9CVUdfT04odGltZXJfcGVuZGluZygmbW9jay0+aHdfZGVsYXkp
KTsKIAorCWludGVsX2JyZWFkY3J1bWJzX2ZyZWUoZW5naW5lLT5icmVhZGNydW1icyk7CisKIAlp
bnRlbF9jb250ZXh0X3VucGluKGVuZ2luZS0+a2VybmVsX2NvbnRleHQpOwogCWludGVsX2NvbnRl
eHRfcHV0KGVuZ2luZS0+a2VybmVsX2NvbnRleHQpOwogCiAJaW50ZWxfZW5naW5lX2ZpbmlfcmV0
aXJlKGVuZ2luZSk7Ci0JaW50ZWxfZW5naW5lX2ZpbmlfYnJlYWRjcnVtYnMoZW5naW5lKTsKIH0K
IAogc3RydWN0IGludGVsX2VuZ2luZV9jcyAqbW9ja19lbmdpbmUoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTUsCkBAIC0zMjMsMTEgKzMyNCwxNCBAQCBpbnQgbW9ja19lbmdpbmVfaW5pdChz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJc3RydWN0IGludGVsX2NvbnRleHQgKmNl
OwogCiAJaW50ZWxfZW5naW5lX2luaXRfYWN0aXZlKGVuZ2luZSwgRU5HSU5FX01PQ0spOwotCWlu
dGVsX2VuZ2luZV9pbml0X2JyZWFkY3J1bWJzKGVuZ2luZSk7CiAJaW50ZWxfZW5naW5lX2luaXRf
ZXhlY2xpc3RzKGVuZ2luZSk7CiAJaW50ZWxfZW5naW5lX2luaXRfX3BtKGVuZ2luZSk7CiAJaW50
ZWxfZW5naW5lX2luaXRfcmV0aXJlKGVuZ2luZSk7CiAKKwllbmdpbmUtPmJyZWFkY3J1bWJzID0g
aW50ZWxfYnJlYWRjcnVtYnNfY3JlYXRlKE5VTEwpOworCWlmICghZW5naW5lLT5icmVhZGNydW1i
cykKKwkJcmV0dXJuIC1FTk9NRU07CisKIAljZSA9IGNyZWF0ZV9rZXJuZWxfY29udGV4dChlbmdp
bmUpOwogCWlmIChJU19FUlIoY2UpKQogCQlnb3RvIGVycl9icmVhZGNydW1iczsKQEAgLTMzOSw3
ICszNDMsNyBAQCBpbnQgbW9ja19lbmdpbmVfaW5pdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUpCiAJcmV0dXJuIDA7CiAKIGVycl9icmVhZGNydW1iczoKLQlpbnRlbF9lbmdpbmVfZmlu
aV9icmVhZGNydW1icyhlbmdpbmUpOworCWludGVsX2JyZWFkY3J1bWJzX2ZyZWUoZW5naW5lLT5i
cmVhZGNydW1icyk7CiAJcmV0dXJuIC1FTk9NRU07CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfaXJxLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5j
CmluZGV4IDFmYTY3NzAwZDhmNC4uZjExM2ZlNDQ1NzJiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2lycS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJx
LmMKQEAgLTQxLDYgKzQxLDcgQEAKICNpbmNsdWRlICJkaXNwbGF5L2ludGVsX2xwZV9hdWRpby5o
IgogI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxfcHNyLmgiCiAKKyNpbmNsdWRlICJndC9pbnRlbF9i
cmVhZGNydW1icy5oIgogI2luY2x1ZGUgImd0L2ludGVsX2d0LmgiCiAjaW5jbHVkZSAiZ3QvaW50
ZWxfZ3RfaXJxLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZ3RfcG1faXJxLmgiCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVxdWVzdC5jCmluZGV4IGFkYTYzMDY3N2NmMy4uMzk0NTg3ZTcwYTJkIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYwpAQCAtMzEsNiArMzEsNyBAQAogI2luY2x1ZGUg
PGxpbnV4L3NjaGVkL3NpZ25hbC5oPgogCiAjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX2NvbnRleHQu
aCIKKyNpbmNsdWRlICJndC9pbnRlbF9icmVhZGNydW1icy5oIgogI2luY2x1ZGUgImd0L2ludGVs
X2NvbnRleHQuaCIKICNpbmNsdWRlICJndC9pbnRlbF9yaW5nLmgiCiAjaW5jbHVkZSAiZ3QvaW50
ZWxfcnBzLmgiCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3Qu
aCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5oCmluZGV4IGZjMTgzNzhjNjg1
ZC4uMTZiNzIxMDgwMTk1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Jl
cXVlc3QuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuaApAQCAtMzYx
LDEwICszNjEsNiBAQCB2b2lkIGk5MTVfcmVxdWVzdF9zdWJtaXQoc3RydWN0IGk5MTVfcmVxdWVz
dCAqcmVxdWVzdCk7CiB2b2lkIF9faTkxNV9yZXF1ZXN0X3Vuc3VibWl0KHN0cnVjdCBpOTE1X3Jl
cXVlc3QgKnJlcXVlc3QpOwogdm9pZCBpOTE1X3JlcXVlc3RfdW5zdWJtaXQoc3RydWN0IGk5MTVf
cmVxdWVzdCAqcmVxdWVzdCk7CiAKLS8qIE5vdGU6IHBhcnQgb2YgdGhlIGludGVsX2JyZWFkY3J1
bWJzIGZhbWlseSAqLwotYm9vbCBpOTE1X3JlcXVlc3RfZW5hYmxlX2JyZWFkY3J1bWIoc3RydWN0
IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCk7Ci12b2lkIGk5MTVfcmVxdWVzdF9jYW5jZWxfYnJlYWRj
cnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KTsKLQogbG9uZyBpOTE1X3JlcXVlc3Rf
d2FpdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwKIAkJICAgICAgIHVuc2lnbmVkIGludCBmbGFn
cywKIAkJICAgICAgIGxvbmcgdGltZW91dCkKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRl
bC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

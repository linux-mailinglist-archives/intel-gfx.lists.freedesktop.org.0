Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B67AEE0E4E
	for <lists+intel-gfx@lfdr.de>; Wed, 23 Oct 2019 00:39:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1A7926E928;
	Tue, 22 Oct 2019 22:39:37 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B05A36E919
 for <intel-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 22:39:04 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18930832-1500050 
 for multiple; Tue, 22 Oct 2019 23:38:53 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 22 Oct 2019 23:38:20 +0100
Message-Id: <20191022223831.22677-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0.rc0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 01/12] drm/i915/gt: Expose engine properties via
 sysfs
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UHJlbGltaW5hcnkgc3R1YiB0byBhZGQgZW5naW5lcyB1bmRlcm5lYXRoIC9zeXMvY2xhc3MvZHJt
L2NhcmROLywgc28KdGhhdCB3ZSBjYW4gZXhwb3NlIHByb3BlcnRpZXMgb24gZWFjaCBlbmdpbmUg
dG8gdGhlIHN5c2FkbWluLgoKVG8gc3RhcnQgd2l0aCB3ZSBoYXZlIGJhc2ljIGFuYWxvZ3VlcyBv
ZiB0aGUgaTkxNV9xdWVyeSBpb2N0bCBzbyB0aGF0IHdlCmNhbiBwcmV0dHkgcHJpbnQgZW5naW5l
IGRpc2NvdmVyeSBmcm9tIHRoZSBzaGVsbCwgYW5kIGZsZXNoIG91dCB0aGUKZGlyZWN0b3J5IHN0
cnVjdHVyZS4gTGF0ZXIgd2Ugd2lsbCBhZGQgd3JpdGVhYmxlIHN5c2FkbWluIHByb3BlcnRpZXMg
c3VjaAphcyBwZXItZW5naW5lIHRpbWVvdXQgY29udHJvbHMuCgpBbiBleGFtcGxlIHRyZWUgb2Yg
dGhlIGVuZ2luZSBwcm9wZXJ0aWVzIG9uIEJyYXN3ZWxsOgogICAgL3N5cy9jbGFzcy9kcm0vY2Fy
ZDAKICAgIOKUlOKUgOKUgCBlbmdpbmUKICAgICDCoMKgIOKUnOKUgOKUgCBiY3MwCiAgICAgwqDC
oCDilILCoMKgIOKUnOKUgOKUgCBjYXBhYmlsaXRpZXMKICAgICDCoMKgIOKUgsKgwqAg4pSc4pSA
4pSAIGNsYXNzCiAgICAgwqDCoCDilILCoMKgIOKUnOKUgOKUgCBpbnN0YW5jZQogICAgIMKgwqAg
4pSCwqDCoCDilJzilIDilIAga25vd25fY2FwYWJpbGl0aWVzCiAgICAgwqDCoCDilILCoMKgIOKU
lOKUgOKUgCBuYW1lCiAgICAgwqDCoCDilJzilIDilIAgcmNzMAogICAgIMKgwqAg4pSCwqDCoCDi
lJzilIDilIAgY2FwYWJpbGl0aWVzCiAgICAgwqDCoCDilILCoMKgIOKUnOKUgOKUgCBjbGFzcwog
ICAgIMKgwqAg4pSCwqDCoCDilJzilIDilIAgaW5zdGFuY2UKICAgICDCoMKgIOKUgsKgwqAg4pSc
4pSA4pSAIGtub3duX2NhcGFiaWxpdGllcwogICAgIMKgwqAg4pSCwqDCoCDilJTilIDilIAgbmFt
ZQogICAgIMKgwqAg4pSc4pSA4pSAIHZjczAKICAgICDCoMKgIOKUgsKgwqAg4pSc4pSA4pSAIGNh
cGFiaWxpdGllcwogICAgIMKgwqAg4pSCwqDCoCDilJzilIDilIAgY2xhc3MKICAgICDCoMKgIOKU
gsKgwqAg4pSc4pSA4pSAIGluc3RhbmNlCiAgICAgwqDCoCDilILCoMKgIOKUnOKUgOKUgCBrbm93
bl9jYXBhYmlsaXRpZXMKICAgICDCoMKgIOKUgsKgwqAg4pSU4pSA4pSAIG5hbWUKICAgICDCoMKg
IOKUlOKUgOKUgCB2ZWNzMAogICAgIMKgwqAgIMKgwqAg4pSc4pSA4pSAIGNhcGFiaWxpdGllcwog
ICAgIMKgwqAgICAgIOKUnOKUgOKUgCBjbGFzcwogICAgIMKgwqAgICAgIOKUnOKUgOKUgCBpbnN0
YW5jZQogICAgIMKgwqAgIMKgwqAg4pSc4pSA4pSAIGtub3duX2NhcGFiaWxpdGllcwogICAgIMKg
wqAgICAgIOKUlOKUgOKUgCBuYW1lCgp2MjogSW5jbHVkZSBzdHJpbmdpZmllZCBjYXBhYmlsaXRp
ZXMKdjM6IEluY2x1ZGUgYWxsIGtub3duIGNhcGFiaWxpdGllcyBmb3IgZnV0dXJlcHJvb2Zpbmcu
CnY0OiBDb21iaW5lIHRoZSB0d28gY2FwcyBsb29wcyBpbnRvIG9uZQoKU2lnbmVkLW9mZi1ieTog
Q2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CkNjOiBKb29uYXMgTGFodGlu
ZW4gPGpvb25hcy5sYWh0aW5lbkBsaW51eC5pbnRlbC5jb20+CkNjOiBUdnJ0a28gVXJzdWxpbiA8
dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgpDYzogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFu
aWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNvbT4KQ2M6IFJvZHJpZ28gVml2aSA8cm9kcmlnby52
aXZpQGludGVsLmNvbT4KQWNrZWQtYnk6IFJvZHJpZ28gVml2aSA8cm9kcmlnby52aXZpQGludGVs
LmNvbT4KUmV2aWV3ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5j
b20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgICAgICAgICAgICAgICAgfCAg
IDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLmMgfCAyMDUg
KysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5l
X3N5c2ZzLmggfCAgMTQgKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3lzZnMuYyAgICAg
ICAgICAgIHwgICAzICsKIDQgZmlsZXMgY2hhbmdlZCwgMjIzIGluc2VydGlvbnMoKykKIGNyZWF0
ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMu
YwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2lu
ZV9zeXNmcy5oCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQppbmRleCAyZmQ0YmVkMTg4ZTUuLjliMzI2ODAz
ODUzNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKQEAgLTgxLDYgKzgxLDcgQEAgZ3QteSArPSBcCiAJ
Z3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5vIFwKIAlndC9pbnRlbF9lbmdpbmVfcG0ubyBcCiAJ
Z3QvaW50ZWxfZW5naW5lX3Bvb2wubyBcCisJZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLm8gXAogCWd0
L2ludGVsX2VuZ2luZV91c2VyLm8gXAogCWd0L2ludGVsX2d0Lm8gXAogCWd0L2ludGVsX2d0X2ly
cS5vIFwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9z
eXNmcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLmMKbmV3
IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi44MjMxNTNlNTZjNjcKLS0tIC9k
ZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMu
YwpAQCAtMCwwICsxLDIwNSBAQAorLyoKKyAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQK
KyAqCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpbmNs
dWRlIDxsaW51eC9rb2JqZWN0Lmg+CisjaW5jbHVkZSA8bGludXgvc3lzZnMuaD4KKworI2luY2x1
ZGUgImk5MTVfZHJ2LmgiCisjaW5jbHVkZSAiaW50ZWxfZW5naW5lLmgiCisjaW5jbHVkZSAiaW50
ZWxfZW5naW5lX3N5c2ZzLmgiCisKK3N0cnVjdCBrb2JqX2VuZ2luZSB7CisJc3RydWN0IGtvYmpl
Y3QgYmFzZTsKKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7Cit9OworCitzdGF0aWMg
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqa29ial90b19lbmdpbmUoc3RydWN0IGtvYmplY3QgKmtv
YmopCit7CisJcmV0dXJuIGNvbnRhaW5lcl9vZihrb2JqLCBzdHJ1Y3Qga29ial9lbmdpbmUsIGJh
c2UpLT5lbmdpbmU7Cit9CisKK3N0YXRpYyBzc2l6ZV90CituYW1lX3Nob3coc3RydWN0IGtvYmpl
Y3QgKmtvYmosIHN0cnVjdCBrb2JqX2F0dHJpYnV0ZSAqYXR0ciwgY2hhciAqYnVmKQoreworCXJl
dHVybiBzcHJpbnRmKGJ1ZiwgIiVzXG4iLCBrb2JqX3RvX2VuZ2luZShrb2JqKS0+bmFtZSk7Cit9
CisKK3N0YXRpYyBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgbmFtZV9hdHRyID0KK19fQVRUUihuYW1l
LCAwNDQ0LCBuYW1lX3Nob3csIE5VTEwpOworCitzdGF0aWMgc3NpemVfdAorY2xhc3Nfc2hvdyhz
dHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IGtvYmpfYXR0cmlidXRlICphdHRyLCBjaGFyICpi
dWYpCit7CisJcmV0dXJuIHNwcmludGYoYnVmLCAiJWRcbiIsIGtvYmpfdG9fZW5naW5lKGtvYmop
LT51YWJpX2NsYXNzKTsKK30KKworc3RhdGljIHN0cnVjdCBrb2JqX2F0dHJpYnV0ZSBjbGFzc19h
dHRyID0KK19fQVRUUihjbGFzcywgMDQ0NCwgY2xhc3Nfc2hvdywgTlVMTCk7CisKK3N0YXRpYyBz
c2l6ZV90CitpbnN0X3Nob3coc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBrb2JqX2F0dHJp
YnV0ZSAqYXR0ciwgY2hhciAqYnVmKQoreworCXJldHVybiBzcHJpbnRmKGJ1ZiwgIiVkXG4iLCBr
b2JqX3RvX2VuZ2luZShrb2JqKS0+dWFiaV9pbnN0YW5jZSk7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qg
a29ial9hdHRyaWJ1dGUgaW5zdF9hdHRyID0KK19fQVRUUihpbnN0YW5jZSwgMDQ0NCwgaW5zdF9z
aG93LCBOVUxMKTsKKworc3RhdGljIGNvbnN0IGNoYXIgKiBjb25zdCB2Y3NfY2Fwc1tdID0gewor
CVtpbG9nMihJOTE1X1ZJREVPX0NMQVNTX0NBUEFCSUxJVFlfSEVWQyldID0gImhldmMiLAorCVtp
bG9nMihJOTE1X1ZJREVPX0FORF9FTkhBTkNFX0NMQVNTX0NBUEFCSUxJVFlfU0ZDKV0gPSAic2Zj
IiwKK307CisKK3N0YXRpYyBjb25zdCBjaGFyICogY29uc3QgdmVjc19jYXBzW10gPSB7CisJW2ls
b2cyKEk5MTVfVklERU9fQU5EX0VOSEFOQ0VfQ0xBU1NfQ0FQQUJJTElUWV9TRkMpXSA9ICJzZmMi
LAorfTsKKworc3RhdGljIHNzaXplX3QgcmVwcl90cmltKGNoYXIgKmJ1Ziwgc3NpemVfdCBsZW4p
Cit7CisJLyogVHJpbSBvZmYgdGhlIHRyYWlsaW5nIHNwYWNlIGFuZCByZXBsYWNlIHdpdGggYSBu
ZXdsaW5lICovCisJaWYgKGxlbiA+IFBBR0VfU0laRSkKKwkJbGVuID0gUEFHRV9TSVpFOworCWlm
IChsZW4gPiAwKQorCQlidWZbbGVuIC0gMV0gPSAnXG4nOworCisJcmV0dXJuIGxlbjsKK30KKwor
c3RhdGljIHNzaXplX3QKK19fY2Fwc19zaG93KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZSwKKwkgICAgdHlwZW9mKGVuZ2luZS0+dWFiaV9jYXBhYmlsaXRpZXMpIGNhcHMsCisJICAgIGNo
YXIgKmJ1ZiwgYm9vbCBzaG93X3Vua25vd24pCit7CisJY29uc3QgY2hhciAqIGNvbnN0ICpyZXBy
OworCWludCBjb3VudCwgbjsKKwlzc2l6ZV90IGxlbjsKKworCXN3aXRjaCAoZW5naW5lLT5jbGFz
cykgeworCWNhc2UgVklERU9fREVDT0RFX0NMQVNTOgorCQlyZXByID0gdmNzX2NhcHM7CisJCWNv
dW50ID0gQVJSQVlfU0laRSh2Y3NfY2Fwcyk7CisJCWJyZWFrOworCisJY2FzZSBWSURFT19FTkhB
TkNFTUVOVF9DTEFTUzoKKwkJcmVwciA9IHZlY3NfY2FwczsKKwkJY291bnQgPSBBUlJBWV9TSVpF
KHZlY3NfY2Fwcyk7CisJCWJyZWFrOworCisJZGVmYXVsdDoKKwkJcmVwciA9IE5VTEw7CisJCWNv
dW50ID0gMDsKKwkJYnJlYWs7CisJfQorCUdFTV9CVUdfT04oY291bnQgPiBCSVRTX1BFUl9UWVBF
KHR5cGVvZihjYXBzKSkpOworCisJbGVuID0gMDsKKwlmb3JfZWFjaF9zZXRfYml0KG4sCisJCQkg
KHVuc2lnbmVkIGxvbmcgKikmY2FwcywKKwkJCSBzaG93X3Vua25vd24gPyBCSVRTX1BFUl9UWVBF
KHR5cGVvZihjYXBzKSkgOiBjb3VudCkgeworCQlpZiAobiA+PSBjb3VudCB8fCAhcmVwcltuXSkg
eworCQkJaWYgKEdFTV9XQVJOX09OKHNob3dfdW5rbm93bikpCisJCQkJbGVuICs9IHNucHJpbnRm
KGJ1ZiArIGxlbiwgUEFHRV9TSVpFIC0gbGVuLAorCQkJCQkJIlsleF0gIiwgbik7CisJCX0gZWxz
ZSB7CisJCQlsZW4gKz0gc25wcmludGYoYnVmICsgbGVuLCBQQUdFX1NJWkUgLSBsZW4sCisJCQkJ
CSIlcyAiLCByZXByW25dKTsKKwkJfQorCQlpZiAoR0VNX1dBUk5fT04obGVuID49IFBBR0VfU0la
RSkpCisJCQlicmVhazsKKwl9CisJcmV0dXJuIHJlcHJfdHJpbShidWYsIGxlbik7Cit9CisKK3N0
YXRpYyBzc2l6ZV90CitjYXBzX3Nob3coc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBrb2Jq
X2F0dHJpYnV0ZSAqYXR0ciwgY2hhciAqYnVmKQoreworCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSA9IGtvYmpfdG9fZW5naW5lKGtvYmopOworCisJcmV0dXJuIF9fY2Fwc19zaG93KGVu
Z2luZSwgZW5naW5lLT51YWJpX2NhcGFiaWxpdGllcywgYnVmLCB0cnVlKTsKK30KKworc3RhdGlj
IHN0cnVjdCBrb2JqX2F0dHJpYnV0ZSBjYXBzX2F0dHIgPQorX19BVFRSKGNhcGFiaWxpdGllcywg
MDQ0NCwgY2Fwc19zaG93LCBOVUxMKTsKKworc3RhdGljIHNzaXplX3QKK2FsbF9jYXBzX3Nob3co
c3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBrb2JqX2F0dHJpYnV0ZSAqYXR0ciwgY2hhciAq
YnVmKQoreworCXJldHVybiBfX2NhcHNfc2hvdyhrb2JqX3RvX2VuZ2luZShrb2JqKSwgLTEsIGJ1
ZiwgZmFsc2UpOworfQorCitzdGF0aWMgc3RydWN0IGtvYmpfYXR0cmlidXRlIGFsbF9jYXBzX2F0
dHIgPQorX19BVFRSKGtub3duX2NhcGFiaWxpdGllcywgMDQ0NCwgYWxsX2NhcHNfc2hvdywgTlVM
TCk7CisKK3N0YXRpYyB2b2lkIGtvYmpfZW5naW5lX3JlbGVhc2Uoc3RydWN0IGtvYmplY3QgKmtv
YmopCit7CisJa2ZyZWUoa29iaik7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qga29ial90eXBlIGtvYmpf
ZW5naW5lX3R5cGUgPSB7CisJLnJlbGVhc2UgPSBrb2JqX2VuZ2luZV9yZWxlYXNlLAorCS5zeXNm
c19vcHMgPSAma29ial9zeXNmc19vcHMKK307CisKK3N0YXRpYyBzdHJ1Y3Qga29iamVjdCAqCitr
b2JqX2VuZ2luZShzdHJ1Y3Qga29iamVjdCAqZGlyLCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUpCit7CisJc3RydWN0IGtvYmpfZW5naW5lICprZTsKKworCWtlID0ga3phbGxvYyhzaXpl
b2YoKmtlKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFrZSkKKwkJcmV0dXJuIE5VTEw7CisKKwlrb2Jq
ZWN0X2luaXQoJmtlLT5iYXNlLCAma29ial9lbmdpbmVfdHlwZSk7CisJa2UtPmVuZ2luZSA9IGVu
Z2luZTsKKworCWlmIChrb2JqZWN0X2FkZCgma2UtPmJhc2UsIGRpciwgIiVzIiwgZW5naW5lLT5u
YW1lKSkgeworCQlrb2JqZWN0X3B1dCgma2UtPmJhc2UpOworCQlyZXR1cm4gTlVMTDsKKwl9CisK
KwkvKiB4ZmVyIG93bmVyc2hpcCB0byBzeXNmcyB0cmVlICovCisJcmV0dXJuICZrZS0+YmFzZTsK
K30KKwordm9pZCBpbnRlbF9lbmdpbmVzX2FkZF9zeXNmcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSkKK3sKKwlzdGF0aWMgY29uc3Qgc3RydWN0IGF0dHJpYnV0ZSAqZmlsZXNbXSA9IHsK
KwkJJm5hbWVfYXR0ci5hdHRyLAorCQkmY2xhc3NfYXR0ci5hdHRyLAorCQkmaW5zdF9hdHRyLmF0
dHIsCisJCSZjYXBzX2F0dHIuYXR0ciwKKwkJJmFsbF9jYXBzX2F0dHIuYXR0ciwKKwkJTlVMTAor
CX07CisKKwlzdHJ1Y3QgZGV2aWNlICprZGV2ID0gaTkxNS0+ZHJtLnByaW1hcnktPmtkZXY7CisJ
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOworCXN0cnVjdCBrb2JqZWN0ICpkaXI7CisK
KwlkaXIgPSBrb2JqZWN0X2NyZWF0ZV9hbmRfYWRkKCJlbmdpbmUiLCAma2Rldi0+a29iaik7CisJ
aWYgKCFkaXIpCisJCXJldHVybjsKKworCWZvcl9lYWNoX3VhYmlfZW5naW5lKGVuZ2luZSwgaTkx
NSkgeworCQlzdHJ1Y3Qga29iamVjdCAqa29iajsKKworCQlrb2JqID0ga29ial9lbmdpbmUoZGly
LCBlbmdpbmUpOworCQlpZiAoIWtvYmopCisJCQlnb3RvIGVycl9lbmdpbmU7CisKKwkJaWYgKHN5
c2ZzX2NyZWF0ZV9maWxlcyhrb2JqLCBmaWxlcykpCisJCQlnb3RvIGVycl9vYmplY3Q7CisKKwkJ
aWYgKDApIHsKK2Vycl9vYmplY3Q6CisJCQlrb2JqZWN0X3B1dChrb2JqKTsKK2Vycl9lbmdpbmU6
CisJCQlkZXZfZXJyKGtkZXYsICJGYWlsZWQgdG8gYWRkIHN5c2ZzIGVuZ2luZSAnJXMnXG4iLAor
CQkJCWVuZ2luZS0+bmFtZSk7CisJCQlicmVhazsKKwkJfQorCX0KK30KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9zeXNmcy5oIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5k
ZXggMDAwMDAwMDAwMDAwLi5lZjQ0YTc0NWI3MGEKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMuaApAQCAtMCwwICsxLDE0IEBACisv
KgorICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVAorICoKKyAqIENvcHlyaWdodCDCqSAy
MDE5IEludGVsIENvcnBvcmF0aW9uCisgKi8KKworI2lmbmRlZiBJTlRFTF9FTkdJTkVfU1lTRlNf
SAorI2RlZmluZSBJTlRFTF9FTkdJTkVfU1lTRlNfSAorCitzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZTsKKwordm9pZCBpbnRlbF9lbmdpbmVzX2FkZF9zeXNmcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSk7CisKKyNlbmRpZiAvKiBJTlRFTF9FTkdJTkVfU1lTRlNfSCAqLwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zeXNmcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9zeXNmcy5jCmluZGV4IGJmMDM5YjhiYTU5My4uN2I2NjVmNjlmMzAxIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3N5c2ZzLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9zeXNmcy5jCkBAIC0zMCw2ICszMCw3IEBACiAjaW5jbHVkZSA8bGludXgv
c3RhdC5oPgogI2luY2x1ZGUgPGxpbnV4L3N5c2ZzLmg+CiAKKyNpbmNsdWRlICJndC9pbnRlbF9l
bmdpbmVfc3lzZnMuaCIKICNpbmNsdWRlICJndC9pbnRlbF9yYzYuaCIKIAogI2luY2x1ZGUgImk5
MTVfZHJ2LmgiCkBAIC02MTYsNiArNjE3LDggQEAgdm9pZCBpOTE1X3NldHVwX3N5c2ZzKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkJRFJNX0VSUk9SKCJSUFMgc3lzZnMgc2V0
dXAgZmFpbGVkXG4iKTsKIAogCWk5MTVfc2V0dXBfZXJyb3JfY2FwdHVyZShrZGV2KTsKKworCWlu
dGVsX2VuZ2luZXNfYWRkX3N5c2ZzKGRldl9wcml2KTsKIH0KIAogdm9pZCBpOTE1X3RlYXJkb3du
X3N5c2ZzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKLS0gCjIuMjQuMC5yYzAK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdm
eCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

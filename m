Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0713630FAD4
	for <lists+intel-gfx@lfdr.de>; Thu,  4 Feb 2021 19:11:07 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A95D76EE14;
	Thu,  4 Feb 2021 18:11:04 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7AA456EE10
 for <intel-gfx@lists.freedesktop.org>; Thu,  4 Feb 2021 18:11:03 +0000 (UTC)
IronPort-SDR: 8D21YbXijOMnt+WtHh7vGchgy1nWLo+NVgOK1rEFCw0V+NeXh89YgXAYdDHS0c4+i9F4bnsOiR
 CmdJlTOtBpBw==
X-IronPort-AV: E=McAfee;i="6000,8403,9885"; a="160460356"
X-IronPort-AV: E=Sophos;i="5.81,153,1610438400"; d="scan'208";a="160460356"
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga106.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 04 Feb 2021 10:11:03 -0800
IronPort-SDR: /NPLA0eHReH2sg+KlsNGtBWMDFtSbDqB/ln9EQCpwreesyDy5b3h9WQr5/fVAm2p1VgtcJkQc5
 uKvxgVsTAHXg==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.81,153,1610438400"; d="scan'208";a="372907789"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.171])
 by fmsmga008.fm.intel.com with SMTP; 04 Feb 2021 10:11:01 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Thu, 04 Feb 2021 20:11:00 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu,  4 Feb 2021 20:10:38 +0200
Message-Id: <20210204181048.24202-5-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20210204181048.24202-1-ville.syrjala@linux.intel.com>
References: <20210204181048.24202-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 04/14] drm/i195: Extract cnl_ddi_{enable,
 disable}_clock()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkV4
dHJhY3QgdGhlIERESSBjbG9jayByb3V0aW5nIGZvciBDTkwgaW50byB0aGUgbmV3IHZmdW5jcy4K
CnYyOiBzL2Rldl9wcml2L2k5MTUvIChMdWNhcykKClJldmlld2VkLWJ5OiBMdWNhcyBEZSBNYXJj
aGkgPGx1Y2FzLmRlbWFyY2hpQGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogVmlsbGUgU3lyasOk
bMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jIHwgNjIgKysrKysrKysrKysrKysrKy0tLS0tLS0tCiAx
IGZpbGUgY2hhbmdlZCwgNDIgaW5zZXJ0aW9ucygrKSwgMjAgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKaW5kZXggMmE4ZTQ3YTNhODc4Li45ZWE0
MDhmZjI1NGIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGRpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYwpAQCAt
MzM4MSw3ICszMzgxLDYgQEAgc3RhdGljIHZvaWQgaW50ZWxfZGRpX2Nsa19zZWxlY3Qoc3RydWN0
IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CiAJZW51bSBwb3J0IHBvcnQgPSBlbmNv
ZGVyLT5wb3J0OwogCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBw
b3J0KTsKLQl1MzIgdmFsOwogCWNvbnN0IHN0cnVjdCBpbnRlbF9zaGFyZWRfZHBsbCAqcGxsID0g
Y3J0Y19zdGF0ZS0+c2hhcmVkX2RwbGw7CiAKIAlpZiAoZHJtX1dBUk5fT04oJmRldl9wcml2LT5k
cm0sICFwbGwpKQpAQCAtMzQwMCwyMSArMzM5OSw2IEBAIHN0YXRpYyB2b2lkIGludGVsX2RkaV9j
bGtfc2VsZWN0KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkJICovCiAJCQlpbnRl
bF9kZV93cml0ZShkZXZfcHJpdiwgRERJX0NMS19TRUwocG9ydCksCiAJCQkJICAgICAgIERESV9D
TEtfU0VMX01HKTsKLQl9IGVsc2UgaWYgKElTX0NBTk5PTkxBS0UoZGV2X3ByaXYpKSB7Ci0JCS8q
IENvbmZpZ3VyZSBEUENMS0FfQ0ZHQ1IwIHRvIG1hcCB0aGUgRFBMTCB0byB0aGUgRERJLiAqLwot
CQl2YWwgPSBpbnRlbF9kZV9yZWFkKGRldl9wcml2LCBEUENMS0FfQ0ZHQ1IwKTsKLQkJdmFsICY9
IH5EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX01BU0socG9ydCk7Ci0JCXZhbCB8PSBEUENMS0Ff
Q0ZHQ1IwX0RESV9DTEtfU0VMKHBsbC0+aW5mby0+aWQsIHBvcnQpOwotCQlpbnRlbF9kZV93cml0
ZShkZXZfcHJpdiwgRFBDTEtBX0NGR0NSMCwgdmFsKTsKLQotCQkvKgotCQkgKiBDb25maWd1cmUg
RFBDTEtBX0NGR0NSMCB0byB0dXJuIG9uIHRoZSBjbG9jayBmb3IgdGhlIERESS4KLQkJICogVGhp
cyBzdGVwIGFuZCB0aGUgc3RlcCBiZWZvcmUgbXVzdCBiZSBkb25lIHdpdGggc2VwYXJhdGUKLQkJ
ICogcmVnaXN0ZXIgd3JpdGVzLgotCQkgKi8KLQkJdmFsID0gaW50ZWxfZGVfcmVhZChkZXZfcHJp
diwgRFBDTEtBX0NGR0NSMCk7Ci0JCXZhbCAmPSB+RFBDTEtBX0NGR0NSMF9ERElfQ0xLX09GRihw
b3J0KTsKLQkJaW50ZWxfZGVfd3JpdGUoZGV2X3ByaXYsIERQQ0xLQV9DRkdDUjAsIHZhbCk7CiAJ
fQogCiAJbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+ZHBsbC5sb2NrKTsKQEAgLTM0MzEsMTIgKzM0
MTUsNDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfZGRpX2Nsa19kaXNhYmxlKHN0cnVjdCBpbnRlbF9l
bmNvZGVyICplbmNvZGVyKQogCQkgICAgKElTX0pTTF9FSEwoZGV2X3ByaXYpICYmIHBvcnQgPj0g
UE9SVF9DKSkKIAkJCWludGVsX2RlX3dyaXRlKGRldl9wcml2LCBERElfQ0xLX1NFTChwb3J0KSwK
IAkJCQkgICAgICAgRERJX0NMS19TRUxfTk9ORSk7Ci0JfSBlbHNlIGlmIChJU19DQU5OT05MQUtF
KGRldl9wcml2KSkgewotCQlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwgRFBDTEtBX0NGR0NSMCwK
LQkJCSAgICAgICBpbnRlbF9kZV9yZWFkKGRldl9wcml2LCBEUENMS0FfQ0ZHQ1IwKSB8IERQQ0xL
QV9DRkdDUjBfRERJX0NMS19PRkYocG9ydCkpOwogCX0KIH0KIAorc3RhdGljIHZvaWQgY25sX2Rk
aV9lbmFibGVfY2xvY2soc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCisJCQkJIGNvbnN0
IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQoreworCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CisJY29uc3Qgc3Ry
dWN0IGludGVsX3NoYXJlZF9kcGxsICpwbGwgPSBjcnRjX3N0YXRlLT5zaGFyZWRfZHBsbDsKKwll
bnVtIHBvcnQgcG9ydCA9IGVuY29kZXItPnBvcnQ7CisJdTMyIHZhbDsKKworCWlmIChkcm1fV0FS
Tl9PTigmaTkxNS0+ZHJtLCAhcGxsKSkKKwkJcmV0dXJuOworCisJbXV0ZXhfbG9jaygmaTkxNS0+
ZHBsbC5sb2NrKTsKKworCXZhbCA9IGludGVsX2RlX3JlYWQoaTkxNSwgRFBDTEtBX0NGR0NSMCk7
CisJdmFsICY9IH5EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX01BU0socG9ydCk7CisJdmFsIHw9
IERQQ0xLQV9DRkdDUjBfRERJX0NMS19TRUwocGxsLT5pbmZvLT5pZCwgcG9ydCk7CisJaW50ZWxf
ZGVfd3JpdGUoaTkxNSwgRFBDTEtBX0NGR0NSMCwgdmFsKTsKKworCS8qCisJICogIlRoaXMgc3Rl
cCBhbmQgdGhlIHN0ZXAgYmVmb3JlIG11c3QgYmUKKwkgKiAgZG9uZSB3aXRoIHNlcGFyYXRlIHJl
Z2lzdGVyIHdyaXRlcy4iCisJICovCisJdmFsID0gaW50ZWxfZGVfcmVhZChpOTE1LCBEUENMS0Ff
Q0ZHQ1IwKTsKKwl2YWwgJj0gfkRQQ0xLQV9DRkdDUjBfRERJX0NMS19PRkYocG9ydCk7CisJaW50
ZWxfZGVfd3JpdGUoaTkxNSwgRFBDTEtBX0NGR0NSMCwgdmFsKTsKKworCW11dGV4X3VubG9jaygm
aTkxNS0+ZHBsbC5sb2NrKTsKK30KKworc3RhdGljIHZvaWQgY25sX2RkaV9kaXNhYmxlX2Nsb2Nr
KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CisJZW51bSBwb3J0IHBvcnQg
PSBlbmNvZGVyLT5wb3J0OworCisJaW50ZWxfZGVfd3JpdGUoaTkxNSwgRFBDTEtBX0NGR0NSMCwK
KwkJICAgICAgIGludGVsX2RlX3JlYWQoaTkxNSwgRFBDTEtBX0NGR0NSMCkgfCBEUENMS0FfQ0ZH
Q1IwX0RESV9DTEtfT0ZGKHBvcnQpKTsKK30KKwogc3RhdGljIHZvaWQgc2tsX2RkaV9lbmFibGVf
Y2xvY2soc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQkJIGNvbnN0IHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogewpAQCAtNTYzOCw3ICs1NjU3LDEwIEBAIHZv
aWQgaW50ZWxfZGRpX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBlbnVt
IHBvcnQgcG9ydCkKIAllbmNvZGVyLT5jbG9uZWFibGUgPSAwOwogCWVuY29kZXItPnBpcGVfbWFz
ayA9IH4wOwogCi0JaWYgKElTX0dFTjlfQkMoZGV2X3ByaXYpKSB7CisJaWYgKElTX0NBTk5PTkxB
S0UoZGV2X3ByaXYpKSB7CisJCWVuY29kZXItPmVuYWJsZV9jbG9jayA9IGNubF9kZGlfZW5hYmxl
X2Nsb2NrOworCQllbmNvZGVyLT5kaXNhYmxlX2Nsb2NrID0gY25sX2RkaV9kaXNhYmxlX2Nsb2Nr
OworCX0gZWxzZSBpZiAoSVNfR0VOOV9CQyhkZXZfcHJpdikpIHsKIAkJZW5jb2Rlci0+ZW5hYmxl
X2Nsb2NrID0gc2tsX2RkaV9lbmFibGVfY2xvY2s7CiAJCWVuY29kZXItPmRpc2FibGVfY2xvY2sg
PSBza2xfZGRpX2Rpc2FibGVfY2xvY2s7CiAJfSBlbHNlIGlmIChJU19CUk9BRFdFTEwoZGV2X3By
aXYpIHx8IElTX0hBU1dFTEwoZGV2X3ByaXYpKSB7Ci0tIAoyLjI2LjIKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QK
SW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

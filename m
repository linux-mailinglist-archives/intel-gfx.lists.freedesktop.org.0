Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9931826735
	for <lists+intel-gfx@lfdr.de>; Wed, 22 May 2019 17:49:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EBE6989C05;
	Wed, 22 May 2019 15:49:03 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2381D89C08
 for <intel-gfx@lists.freedesktop.org>; Wed, 22 May 2019 15:48:56 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16643215-1500050 
 for <intel-gfx@lists.freedesktop.org>; Wed, 22 May 2019 16:48:50 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 22 May 2019 16:48:43 +0100
Message-Id: <20190522154849.7960-9-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190522154849.7960-1-chris@chris-wilson.co.uk>
References: <20190522154849.7960-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 09/15] drm/i915: Pull scatterlist utils out of
 i915_gem.h
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T3V0IHNjYXR0ZXJsaXN0IHV0aWxpdHkgcm91dGluZXMgY2FuIGJlIHB1bGxlZCBvdXQgb2YgaTkx
NV9nZW0uaCBmb3IgYQpiaXQgbW9yZSBkZWNsdXR0ZXJpbmcuCgp2MjogUHVzaCBJOTE1X0dUVF9Q
QUdFX1NJWkUgb3V0IG9mIGk5MTVfc2NhdHRlcmxpc3QgaXRzZWxmIGFuZCBpbnRvIHRoZQpjYWxs
ZXIuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51
az4KUmV2aWV3ZWQtYnk6IE1hdHRoZXcgQXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgICAgICAgICAgfCAgIDEgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jICAgIHwgICAxICsKIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9pbnRlcm5hbC5jICB8ICAgMSArCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGFnZXMuYyAgICAgfCAgIDEgKwogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BoeXMuYyAgICAgIHwgICAxICsKIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaG1lbS5jICAgICB8ICAgMSArCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0ci5jICAgfCAgIDEgKwogLi4uL2RybS9pOTE1
L2dlbS9zZWxmdGVzdHMvaHVnZV9nZW1fb2JqZWN0LmMgIHwgICAyICsKIC4uLi9kcm0vaTkxNS9n
ZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2RtYWJ1Zi5jICB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5oICAgICAgICAgICAgICAgfCAxMTAgLS0tLS0tLS0tLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jICAgICAgICAgICAgICAgfCAgMzAgKy0tLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2ZlbmNlX3JlZy5jICAgICB8ICAgMiArCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyAgICAgICAgICAgfCAgIDMgKy0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5oICAgICAgICAgICB8ICAgNCArLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYyAgICAgICAgIHwgICAxICsKIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfc2NhdHRlcmxpc3QuYyAgICAgICB8ICAzOSArKysrKysKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NhdHRlcmxpc3QuaCAgICAgICB8IDEyNyArKysrKysrKysr
KysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5jICAgICB8
ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvc2NhdHRlcmxpc3QuYyAgfCAg
IDMgKy0KIDE5IGZpbGVzIGNoYW5nZWQsIDE4OCBpbnNlcnRpb25zKCspLCAxNDIgZGVsZXRpb25z
KC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2F0dGVy
bGlzdC5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2F0
dGVybGlzdC5oCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQppbmRleCAwYzM5ZWY5NjdjZjAuLjlmNWY0YWNh
Y2FlNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKQEAgLTQ0LDYgKzQ0LDcgQEAgaTkxNS15ICs9IGk5
MTVfZHJ2Lm8gXAogCSAgaTkxNV9pcnEubyBcCiAJICBpOTE1X3BhcmFtcy5vIFwKIAkgIGk5MTVf
cGNpLm8gXAorCSAgaTkxNV9zY2F0dGVybGlzdC5vIFwKIAkgIGk5MTVfc3VzcGVuZC5vIFwKIAkg
IGk5MTVfc3lzZnMubyBcCiAJICBpbnRlbF9jc3IubyBcCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG1hYnVmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fZG1hYnVmLmMKaW5kZXggNjAwZmM5MjZmODFlLi42MjUzOTdkZWI3MDEgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG1hYnVmLmMKQEAgLTEwLDYgKzEw
LDcgQEAKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1fb2JqZWN0
LmgiCisjaW5jbHVkZSAiaTkxNV9zY2F0dGVybGlzdC5oIgogCiBzdGF0aWMgc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKmRtYV9idWZfdG9fb2JqKHN0cnVjdCBkbWFfYnVmICpidWYpCiB7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1faW50ZXJuYWwuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9pbnRlcm5hbC5jCmluZGV4IDQ2ZjVl
OGRlZDAwYy4uNWE5ODgwYThlNjBiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1faW50ZXJuYWwuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1faW50ZXJuYWwuYwpAQCAtMTMsNiArMTMsNyBAQAogI2luY2x1ZGUgImk5MTVfZHJ2Lmgi
CiAjaW5jbHVkZSAiaTkxNV9nZW0uaCIKICNpbmNsdWRlICJpOTE1X2dlbV9vYmplY3QuaCIKKyNp
bmNsdWRlICJpOTE1X3NjYXR0ZXJsaXN0LmgiCiAjaW5jbHVkZSAiaTkxNV91dGlscy5oIgogCiAj
ZGVmaW5lIFFVSUVUIChfX0dGUF9OT1JFVFJZIHwgX19HRlBfTk9XQVJOKQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BhZ2VzLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fcGFnZXMuYwppbmRleCAzODc5YjM2NjlkZWEuLmU1Mzg2MDE0
N2YyMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BhZ2Vz
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BhZ2VzLmMKQEAgLTYs
NiArNiw3IEBACiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX29i
amVjdC5oIgorI2luY2x1ZGUgImk5MTVfc2NhdHRlcmxpc3QuaCIKIAogdm9pZCBfX2k5MTVfZ2Vt
X29iamVjdF9zZXRfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJCQkg
c3RydWN0IHNnX3RhYmxlICpwYWdlcywKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9waHlzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
cGh5cy5jCmluZGV4IDFjMGNlNjlmNzY1Yi4uMmRlYWM5MzNjZjU5IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGh5cy5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9waHlzLmMKQEAgLTE1LDYgKzE1LDcgQEAKIAogI2luY2x1ZGUg
Imk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1fb2JqZWN0LmgiCisjaW5jbHVkZSAiaTkx
NV9zY2F0dGVybGlzdC5oIgogCiBzdGF0aWMgaW50IGk5MTVfZ2VtX29iamVjdF9nZXRfcGFnZXNf
cGh5cyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogewpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3NobWVtLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fc2htZW0uYwppbmRleCA1NjgxNjRjYTY2ZmQuLjY2NWYyMmViZjhl
OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3NobWVtLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3NobWVtLmMKQEAgLTksNiAr
OSw3IEBACiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX29iamVj
dC5oIgorI2luY2x1ZGUgImk5MTVfc2NhdHRlcmxpc3QuaCIKIAogLyoKICAqIE1vdmUgcGFnZXMg
dG8gYXBwcm9wcmlhdGUgbHJ1IGFuZCByZWxlYXNlIHRoZSBwYWdldmVjLCBkZWNyZW1lbnRpbmcg
dGhlCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0
ci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3VzZXJwdHIuYwppbmRleCBj
Y2FjNzNiNzI1OTcuLmNmYTk5MGVkYjM1MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX3VzZXJwdHIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fdXNlcnB0ci5jCkBAIC0xNCw2ICsxNCw3IEBACiAKICNpbmNsdWRlICJpOTE1X2dl
bV9pb2N0bHMuaCIKICNpbmNsdWRlICJpOTE1X2dlbV9vYmplY3QuaCIKKyNpbmNsdWRlICJpOTE1
X3NjYXR0ZXJsaXN0LmgiCiAjaW5jbHVkZSAiaTkxNV90cmFjZS5oIgogI2luY2x1ZGUgImludGVs
X2Rydi5oIgogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3Rz
L2h1Z2VfZ2VtX29iamVjdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9o
dWdlX2dlbV9vYmplY3QuYwppbmRleCA4MjRmMzc2MTMxNGMuLjNjNWQxN2IyYjY3MCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX2dlbV9vYmplY3Qu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfZ2VtX29iamVj
dC5jCkBAIC00LDYgKzQsOCBAQAogICogQ29weXJpZ2h0IMKpIDIwMTYgSW50ZWwgQ29ycG9yYXRp
b24KICAqLwogCisjaW5jbHVkZSAiaTkxNV9zY2F0dGVybGlzdC5oIgorCiAjaW5jbHVkZSAiaHVn
ZV9nZW1fb2JqZWN0LmgiCiAKIHN0YXRpYyB2b2lkIGh1Z2VfZnJlZV9wYWdlcyhzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX29iamVjdCAqb2JqLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9kbWFidWYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9zZWxmdGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMKaW5kZXggYjc0MzE3MTJkZTY2Li5lM2E2NGVk
ZWY5MTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkx
NV9nZW1fZG1hYnVmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9p
OTE1X2dlbV9kbWFidWYuYwpAQCAtNCw2ICs0LDcgQEAKICAqIENvcHlyaWdodCDCqSAyMDE2IElu
dGVsIENvcnBvcmF0aW9uCiAgKi8KIAorI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAi
aTkxNV9zZWxmdGVzdC5oIgogCiAjaW5jbHVkZSAibW9ja19kbWFidWYuaCIKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2Rydi5oCmluZGV4IGViYTdlZmY3NDE4NC4uODlmYmY5OTI3ZTZjIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZHJ2LmgKQEAgLTIxNTgsMTExICsyMTU4LDYgQEAgZW51bSBoZG1pX2ZvcmNlX2F1ZGlv
IHsKIAlHRU5NQVNLKElOVEVMX0ZST05UQlVGRkVSX0JJVFNfUEVSX1BJUEUgKiAoKHBpcGUpICsg
MSkgLSAxLCBcCiAJCUlOVEVMX0ZST05UQlVGRkVSX0JJVFNfUEVSX1BJUEUgKiAocGlwZSkpCiAK
LS8qCi0gKiBPcHRpbWlzZWQgU0dMIGl0ZXJhdG9yIGZvciBHRU0gb2JqZWN0cwotICovCi1zdGF0
aWMgX19hbHdheXNfaW5saW5lIHN0cnVjdCBzZ3RfaXRlciB7Ci0Jc3RydWN0IHNjYXR0ZXJsaXN0
ICpzZ3A7Ci0JdW5pb24gewotCQl1bnNpZ25lZCBsb25nIHBmbjsKLQkJZG1hX2FkZHJfdCBkbWE7
Ci0JfTsKLQl1bnNpZ25lZCBpbnQgY3VycjsKLQl1bnNpZ25lZCBpbnQgbWF4OwotfSBfX3NndF9p
dGVyKHN0cnVjdCBzY2F0dGVybGlzdCAqc2dsLCBib29sIGRtYSkgewotCXN0cnVjdCBzZ3RfaXRl
ciBzID0geyAuc2dwID0gc2dsIH07Ci0KLQlpZiAocy5zZ3ApIHsKLQkJcy5tYXggPSBzLmN1cnIg
PSBzLnNncC0+b2Zmc2V0OwotCQlzLm1heCArPSBzLnNncC0+bGVuZ3RoOwotCQlpZiAoZG1hKQot
CQkJcy5kbWEgPSBzZ19kbWFfYWRkcmVzcyhzLnNncCk7Ci0JCWVsc2UKLQkJCXMucGZuID0gcGFn
ZV90b19wZm4oc2dfcGFnZShzLnNncCkpOwotCX0KLQotCXJldHVybiBzOwotfQotCi1zdGF0aWMg
aW5saW5lIHN0cnVjdCBzY2F0dGVybGlzdCAqX19fX3NnX25leHQoc3RydWN0IHNjYXR0ZXJsaXN0
ICpzZykKLXsKLQkrK3NnOwotCWlmICh1bmxpa2VseShzZ19pc19jaGFpbihzZykpKQotCQlzZyA9
IHNnX2NoYWluX3B0cihzZyk7Ci0JcmV0dXJuIHNnOwotfQotCi0vKioKLSAqIF9fc2dfbmV4dCAt
IHJldHVybiB0aGUgbmV4dCBzY2F0dGVybGlzdCBlbnRyeSBpbiBhIGxpc3QKLSAqIEBzZzoJCVRo
ZSBjdXJyZW50IHNnIGVudHJ5Ci0gKgotICogRGVzY3JpcHRpb246Ci0gKiAgIElmIHRoZSBlbnRy
eSBpcyB0aGUgbGFzdCwgcmV0dXJuIE5VTEw7IG90aGVyd2lzZSwgc3RlcCB0byB0aGUgbmV4dAot
ICogICBlbGVtZW50IGluIHRoZSBhcnJheSAoQHNnQCsxKS4gSWYgdGhhdCdzIGEgY2hhaW4gcG9p
bnRlciwgZm9sbG93IGl0OwotICogICBvdGhlcndpc2UganVzdCByZXR1cm4gdGhlIHBvaW50ZXIg
dG8gdGhlIGN1cnJlbnQgZWxlbWVudC4KLSAqKi8KLXN0YXRpYyBpbmxpbmUgc3RydWN0IHNjYXR0
ZXJsaXN0ICpfX3NnX25leHQoc3RydWN0IHNjYXR0ZXJsaXN0ICpzZykKLXsKLQlyZXR1cm4gc2df
aXNfbGFzdChzZykgPyBOVUxMIDogX19fX3NnX25leHQoc2cpOwotfQotCi0vKioKLSAqIGZvcl9l
YWNoX3NndF9kbWEgLSBpdGVyYXRlIG92ZXIgdGhlIERNQSBhZGRyZXNzZXMgb2YgdGhlIGdpdmVu
IHNnX3RhYmxlCi0gKiBAX19kbWFwOglETUEgYWRkcmVzcyAob3V0cHV0KQotICogQF9faXRlcjoJ
J3N0cnVjdCBzZ3RfaXRlcicgKGl0ZXJhdG9yIHN0YXRlLCBpbnRlcm5hbCkKLSAqIEBfX3NndDoJ
c2dfdGFibGUgdG8gaXRlcmF0ZSBvdmVyIChpbnB1dCkKLSAqLwotI2RlZmluZSBmb3JfZWFjaF9z
Z3RfZG1hKF9fZG1hcCwgX19pdGVyLCBfX3NndCkJCQkJXAotCWZvciAoKF9faXRlcikgPSBfX3Nn
dF9pdGVyKChfX3NndCktPnNnbCwgdHJ1ZSk7CQkJXAotCSAgICAgKChfX2RtYXApID0gKF9faXRl
cikuZG1hICsgKF9faXRlcikuY3Vycik7CQkJXAotCSAgICAgKCgoX19pdGVyKS5jdXJyICs9IEk5
MTVfR1RUX1BBR0VfU0laRSkgPj0gKF9faXRlcikubWF4KSA/CVwKLQkgICAgIChfX2l0ZXIpID0g
X19zZ3RfaXRlcihfX3NnX25leHQoKF9faXRlcikuc2dwKSwgdHJ1ZSksIDAgOiAwKQotCi0vKioK
LSAqIGZvcl9lYWNoX3NndF9wYWdlIC0gaXRlcmF0ZSBvdmVyIHRoZSBwYWdlcyBvZiB0aGUgZ2l2
ZW4gc2dfdGFibGUKLSAqIEBfX3BwOglwYWdlIHBvaW50ZXIgKG91dHB1dCkKLSAqIEBfX2l0ZXI6
CSdzdHJ1Y3Qgc2d0X2l0ZXInIChpdGVyYXRvciBzdGF0ZSwgaW50ZXJuYWwpCi0gKiBAX19zZ3Q6
CXNnX3RhYmxlIHRvIGl0ZXJhdGUgb3ZlciAoaW5wdXQpCi0gKi8KLSNkZWZpbmUgZm9yX2VhY2hf
c2d0X3BhZ2UoX19wcCwgX19pdGVyLCBfX3NndCkJCQkJXAotCWZvciAoKF9faXRlcikgPSBfX3Nn
dF9pdGVyKChfX3NndCktPnNnbCwgZmFsc2UpOwkJXAotCSAgICAgKChfX3BwKSA9IChfX2l0ZXIp
LnBmbiA9PSAwID8gTlVMTCA6CQkJXAotCSAgICAgIHBmbl90b19wYWdlKChfX2l0ZXIpLnBmbiAr
ICgoX19pdGVyKS5jdXJyID4+IFBBR0VfU0hJRlQpKSk7IFwKLQkgICAgICgoKF9faXRlcikuY3Vy
ciArPSBQQUdFX1NJWkUpID49IChfX2l0ZXIpLm1heCkgPwkJXAotCSAgICAgKF9faXRlcikgPSBf
X3NndF9pdGVyKF9fc2dfbmV4dCgoX19pdGVyKS5zZ3ApLCBmYWxzZSksIDAgOiAwKQotCi1ib29s
IGk5MTVfc2dfdHJpbShzdHJ1Y3Qgc2dfdGFibGUgKm9yaWdfc3QpOwotCi1zdGF0aWMgaW5saW5l
IHVuc2lnbmVkIGludCBpOTE1X3NnX3BhZ2Vfc2l6ZXMoc3RydWN0IHNjYXR0ZXJsaXN0ICpzZykK
LXsKLQl1bnNpZ25lZCBpbnQgcGFnZV9zaXplczsKLQotCXBhZ2Vfc2l6ZXMgPSAwOwotCXdoaWxl
IChzZykgewotCQlHRU1fQlVHX09OKHNnLT5vZmZzZXQpOwotCQlHRU1fQlVHX09OKCFJU19BTElH
TkVEKHNnLT5sZW5ndGgsIFBBR0VfU0laRSkpOwotCQlwYWdlX3NpemVzIHw9IHNnLT5sZW5ndGg7
Ci0JCXNnID0gX19zZ19uZXh0KHNnKTsKLQl9Ci0KLQlyZXR1cm4gcGFnZV9zaXplczsKLX0KLQot
c3RhdGljIGlubGluZSB1bnNpZ25lZCBpbnQgaTkxNV9zZ19zZWdtZW50X3NpemUodm9pZCkKLXsK
LQl1bnNpZ25lZCBpbnQgc2l6ZSA9IHN3aW90bGJfbWF4X3NlZ21lbnQoKTsKLQotCWlmIChzaXpl
ID09IDApCi0JCXJldHVybiBTQ0FUVEVSTElTVF9NQVhfU0VHTUVOVDsKLQotCXNpemUgPSByb3Vu
ZGRvd24oc2l6ZSwgUEFHRV9TSVpFKTsKLQkvKiBzd2lvdGxiX21heF9zZWdtZW50X3NpemUgY2Fu
IHJldHVybiAxIGJ5dGUgd2hlbiBpdCBtZWFucyBvbmUgcGFnZS4gKi8KLQlpZiAoc2l6ZSA8IFBB
R0VfU0laRSkKLQkJc2l6ZSA9IFBBR0VfU0laRTsKLQotCXJldHVybiBzaXplOwotfQotCiAjZGVm
aW5lIElOVEVMX0lORk8oZGV2X3ByaXYpCSgmKGRldl9wcml2KS0+X19pbmZvKQogI2RlZmluZSBS
VU5USU1FX0lORk8oZGV2X3ByaXYpCSgmKGRldl9wcml2KS0+X19ydW50aW1lKQogI2RlZmluZSBE
UklWRVJfQ0FQUyhkZXZfcHJpdikJKCYoZGV2X3ByaXYpLT5jYXBzKQpAQCAtMjc5OCwxMSArMjY5
Myw2IEBAIGludCBpOTE1X2dlbV9vYmplY3RfdW5iaW5kKHN0cnVjdCBkcm1faTkxNV9nZW1fb2Jq
ZWN0ICpvYmopOwogCiB2b2lkIGk5MTVfZ2VtX3J1bnRpbWVfc3VzcGVuZChzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogCi1zdGF0aWMgaW5saW5lIGludCBfX3NnX3BhZ2VfY291
bnQoY29uc3Qgc3RydWN0IHNjYXR0ZXJsaXN0ICpzZykKLXsKLQlyZXR1cm4gc2ctPmxlbmd0aCA+
PiBQQUdFX1NISUZUOwotfQotCiBzdGF0aWMgaW5saW5lIGludCBfX211c3RfY2hlY2sKIGk5MTVf
bXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiB7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9nZW0uYwppbmRleCA4NzlkZDM4MmQzZTguLjkxZGY5MzU0MmE2OCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dlbS5jCkBAIC01MCw2ICs1MCw3IEBACiAjaW5jbHVkZSAiZ3QvaW50ZWxf
d29ya2Fyb3VuZHMuaCIKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCisjaW5jbHVkZSAiaTkxNV9z
Y2F0dGVybGlzdC5oIgogI2luY2x1ZGUgImk5MTVfdHJhY2UuaCIKICNpbmNsdWRlICJpOTE1X3Zn
cHUuaCIKIApAQCAtMTA4NSwzNCArMTA4Niw2IEBAIHZvaWQgaTkxNV9nZW1fcnVudGltZV9zdXNw
ZW5kKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAl9CiB9CiAKLWJvb2wgaTkx
NV9zZ190cmltKHN0cnVjdCBzZ190YWJsZSAqb3JpZ19zdCkKLXsKLQlzdHJ1Y3Qgc2dfdGFibGUg
bmV3X3N0OwotCXN0cnVjdCBzY2F0dGVybGlzdCAqc2csICpuZXdfc2c7Ci0JdW5zaWduZWQgaW50
IGk7Ci0KLQlpZiAob3JpZ19zdC0+bmVudHMgPT0gb3JpZ19zdC0+b3JpZ19uZW50cykKLQkJcmV0
dXJuIGZhbHNlOwotCi0JaWYgKHNnX2FsbG9jX3RhYmxlKCZuZXdfc3QsIG9yaWdfc3QtPm5lbnRz
LCBHRlBfS0VSTkVMIHwgX19HRlBfTk9XQVJOKSkKLQkJcmV0dXJuIGZhbHNlOwotCi0JbmV3X3Nn
ID0gbmV3X3N0LnNnbDsKLQlmb3JfZWFjaF9zZyhvcmlnX3N0LT5zZ2wsIHNnLCBvcmlnX3N0LT5u
ZW50cywgaSkgewotCQlzZ19zZXRfcGFnZShuZXdfc2csIHNnX3BhZ2Uoc2cpLCBzZy0+bGVuZ3Ro
LCAwKTsKLQkJc2dfZG1hX2FkZHJlc3MobmV3X3NnKSA9IHNnX2RtYV9hZGRyZXNzKHNnKTsKLQkJ
c2dfZG1hX2xlbihuZXdfc2cpID0gc2dfZG1hX2xlbihzZyk7Ci0KLQkJbmV3X3NnID0gc2dfbmV4
dChuZXdfc2cpOwotCX0KLQlHRU1fQlVHX09OKG5ld19zZyk7IC8qIFNob3VsZCB3YWxrIGV4YWN0
bHkgbmVudHMgYW5kIGhpdCB0aGUgZW5kICovCi0KLQlzZ19mcmVlX3RhYmxlKG9yaWdfc3QpOwot
Ci0JKm9yaWdfc3QgPSBuZXdfc3Q7Ci0JcmV0dXJuIHRydWU7Ci19Ci0KIHN0YXRpYyB1bnNpZ25l
ZCBsb25nIHRvX3dhaXRfdGltZW91dChzNjQgdGltZW91dF9ucykKIHsKIAlpZiAodGltZW91dF9u
cyA8IDApCkBAIC0yMzY2LDcgKzIzMzksNiBAQCB2b2lkIGk5MTVfZ2VtX3RyYWNrX2ZiKHN0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvbGQsCiB9CiAKICNpZiBJU19FTkFCTEVEKENPTkZJR19E
Uk1fSTkxNV9TRUxGVEVTVCkKLSNpbmNsdWRlICJzZWxmdGVzdHMvc2NhdHRlcmxpc3QuYyIKICNp
bmNsdWRlICJzZWxmdGVzdHMvbW9ja19nZW1fZGV2aWNlLmMiCiAjaW5jbHVkZSAic2VsZnRlc3Rz
L2k5MTVfZ2VtLmMiCiAjZW5kaWYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2VtX2ZlbmNlX3JlZy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2Vf
cmVnLmMKaW5kZXggMzA4NGY1MmUzMzcyLi4yZTllMzIzMzBhYWEgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2ZlbmNlX3JlZy5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2VtX2ZlbmNlX3JlZy5jCkBAIC0yMiw3ICsyMiw5IEBACiAgKi8KIAogI2lu
Y2x1ZGUgPGRybS9pOTE1X2RybS5oPgorCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKKyNpbmNsdWRl
ICJpOTE1X3NjYXR0ZXJsaXN0LmgiCiAKIC8qKgogICogRE9DOiBmZW5jZSByZWdpc3RlciBoYW5k
bGluZwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYwppbmRleCA5ZWQ0MWFlZmI0NTYuLjJh
Zjc2MmEzNmFiMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKQEAgLTM2LDggKzM2
LDkgQEAKICNpbmNsdWRlIDxkcm0vaTkxNV9kcm0uaD4KIAogI2luY2x1ZGUgImk5MTVfZHJ2Lmgi
Ci0jaW5jbHVkZSAiaTkxNV92Z3B1LmgiCisjaW5jbHVkZSAiaTkxNV9zY2F0dGVybGlzdC5oIgog
I2luY2x1ZGUgImk5MTVfdHJhY2UuaCIKKyNpbmNsdWRlICJpOTE1X3ZncHUuaCIKICNpbmNsdWRl
ICJpbnRlbF9kcnYuaCIKICNpbmNsdWRlICJpbnRlbF9mcm9udGJ1ZmZlci5oIgogCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2VtX2d0dC5oCmluZGV4IDI0OGEyNmIxYmIwNC4uNTE2Yjg5MTE1ODk4IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuaApAQCAtNDAsNiArNDAsNyBAQAogCiAjaW5j
bHVkZSAiZ3QvaW50ZWxfcmVzZXQuaCIKICNpbmNsdWRlICJpOTE1X3JlcXVlc3QuaCIKKyNpbmNs
dWRlICJpOTE1X3NjYXR0ZXJsaXN0LmgiCiAjaW5jbHVkZSAiaTkxNV9zZWxmdGVzdC5oIgogI2lu
Y2x1ZGUgImk5MTVfdGltZWxpbmUuaCIKIApAQCAtMTYyLDcgKzE2Myw4IEBAIHR5cGVkZWYgdTY0
IGdlbjhfcHBndHRfcG1sNGVfdDsKICNkZWZpbmUgR0VOOF9QREVfSVBTXzY0SyBCSVQoMTEpCiAj
ZGVmaW5lIEdFTjhfUERFX1BTXzJNICAgQklUKDcpCiAKLXN0cnVjdCBzZ190YWJsZTsKKyNkZWZp
bmUgZm9yX2VhY2hfc2d0X2RtYShfX2RtYXAsIF9faXRlciwgX19zZ3QpIFwKKwlfX2Zvcl9lYWNo
X3NndF9kbWEoX19kbWFwLCBfX2l0ZXIsIF9fc2d0LCBJOTE1X0dUVF9QQUdFX1NJWkUpCiAKIHN0
cnVjdCBpbnRlbF9yZW1hcHBlZF9wbGFuZV9pbmZvIHsKIAkvKiBpbiBndHQgcGFnZXMgKi8KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jCmluZGV4IGM4Njg2NWEzNDk3Mi4uNzA3ODEx
MjU2NTAxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMKQEAgLTQwLDYgKzQw
LDcgQEAKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9ncHVfZXJyb3Iu
aCIKKyNpbmNsdWRlICJpOTE1X3NjYXR0ZXJsaXN0LmgiCiAjaW5jbHVkZSAiaW50ZWxfYXRvbWlj
LmgiCiAjaW5jbHVkZSAiaW50ZWxfY3NyLmgiCiAjaW5jbHVkZSAiaW50ZWxfb3ZlcmxheS5oIgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2F0dGVybGlzdC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2F0dGVybGlzdC5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAwMDAwMC4uY2M2YjM4NDZhOGM3Ci0tLSAvZGV2L251bGwKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2F0dGVybGlzdC5jCkBAIC0wLDAgKzEsMzkgQEAKKy8q
CisgKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCisgKgorICogQ29weXJpZ2h0IMKpIDIw
MTYgSW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaW5jbHVkZSAiaTkxNV9zY2F0dGVybGlzdC5o
IgorCitib29sIGk5MTVfc2dfdHJpbShzdHJ1Y3Qgc2dfdGFibGUgKm9yaWdfc3QpCit7CisJc3Ry
dWN0IHNnX3RhYmxlIG5ld19zdDsKKwlzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNnLCAqbmV3X3NnOwor
CXVuc2lnbmVkIGludCBpOworCisJaWYgKG9yaWdfc3QtPm5lbnRzID09IG9yaWdfc3QtPm9yaWdf
bmVudHMpCisJCXJldHVybiBmYWxzZTsKKworCWlmIChzZ19hbGxvY190YWJsZSgmbmV3X3N0LCBv
cmlnX3N0LT5uZW50cywgR0ZQX0tFUk5FTCB8IF9fR0ZQX05PV0FSTikpCisJCXJldHVybiBmYWxz
ZTsKKworCW5ld19zZyA9IG5ld19zdC5zZ2w7CisJZm9yX2VhY2hfc2cob3JpZ19zdC0+c2dsLCBz
Zywgb3JpZ19zdC0+bmVudHMsIGkpIHsKKwkJc2dfc2V0X3BhZ2UobmV3X3NnLCBzZ19wYWdlKHNn
KSwgc2ctPmxlbmd0aCwgMCk7CisJCXNnX2RtYV9hZGRyZXNzKG5ld19zZykgPSBzZ19kbWFfYWRk
cmVzcyhzZyk7CisJCXNnX2RtYV9sZW4obmV3X3NnKSA9IHNnX2RtYV9sZW4oc2cpOworCisJCW5l
d19zZyA9IHNnX25leHQobmV3X3NnKTsKKwl9CisJR0VNX0JVR19PTihuZXdfc2cpOyAvKiBTaG91
bGQgd2FsayBleGFjdGx5IG5lbnRzIGFuZCBoaXQgdGhlIGVuZCAqLworCisJc2dfZnJlZV90YWJs
ZShvcmlnX3N0KTsKKworCSpvcmlnX3N0ID0gbmV3X3N0OworCXJldHVybiB0cnVlOworfQorCisj
aWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VMRlRFU1QpCisjaW5jbHVkZSAic2VsZnRl
c3RzL3NjYXR0ZXJsaXN0LmMiCisjZW5kaWYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfc2NhdHRlcmxpc3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NhdHRl
cmxpc3QuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjY2MTc5NjNk
ZjllZAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NhdHRl
cmxpc3QuaApAQCAtMCwwICsxLDEyNyBAQAorLyoKKyAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVy
OiBNSVQKKyAqCisgKiBDb3B5cmlnaHQgwqkgMjAxNiBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisK
KyNpZm5kZWYgSTkxNV9TQ0FUVEVSTElTVF9ICisjZGVmaW5lIEk5MTVfU0NBVFRFUkxJU1RfSAor
CisjaW5jbHVkZSA8bGludXgvcGZuLmg+CisjaW5jbHVkZSA8bGludXgvc2NhdHRlcmxpc3QuaD4K
KyNpbmNsdWRlIDxsaW51eC9zd2lvdGxiLmg+CisKKyNpbmNsdWRlICJpOTE1X2dlbS5oIgorCisv
KgorICogT3B0aW1pc2VkIFNHTCBpdGVyYXRvciBmb3IgR0VNIG9iamVjdHMKKyAqLworc3RhdGlj
IF9fYWx3YXlzX2lubGluZSBzdHJ1Y3Qgc2d0X2l0ZXIgeworCXN0cnVjdCBzY2F0dGVybGlzdCAq
c2dwOworCXVuaW9uIHsKKwkJdW5zaWduZWQgbG9uZyBwZm47CisJCWRtYV9hZGRyX3QgZG1hOwor
CX07CisJdW5zaWduZWQgaW50IGN1cnI7CisJdW5zaWduZWQgaW50IG1heDsKK30gX19zZ3RfaXRl
cihzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNnbCwgYm9vbCBkbWEpIHsKKwlzdHJ1Y3Qgc2d0X2l0ZXIg
cyA9IHsgLnNncCA9IHNnbCB9OworCisJaWYgKHMuc2dwKSB7CisJCXMubWF4ID0gcy5jdXJyID0g
cy5zZ3AtPm9mZnNldDsKKwkJcy5tYXggKz0gcy5zZ3AtPmxlbmd0aDsKKwkJaWYgKGRtYSkKKwkJ
CXMuZG1hID0gc2dfZG1hX2FkZHJlc3Mocy5zZ3ApOworCQllbHNlCisJCQlzLnBmbiA9IHBhZ2Vf
dG9fcGZuKHNnX3BhZ2Uocy5zZ3ApKTsKKwl9CisKKwlyZXR1cm4gczsKK30KKworc3RhdGljIGlu
bGluZSBpbnQgX19zZ19wYWdlX2NvdW50KGNvbnN0IHN0cnVjdCBzY2F0dGVybGlzdCAqc2cpCit7
CisJcmV0dXJuIHNnLT5sZW5ndGggPj4gUEFHRV9TSElGVDsKK30KKworc3RhdGljIGlubGluZSBz
dHJ1Y3Qgc2NhdHRlcmxpc3QgKl9fX19zZ19uZXh0KHN0cnVjdCBzY2F0dGVybGlzdCAqc2cpCit7
CisJKytzZzsKKwlpZiAodW5saWtlbHkoc2dfaXNfY2hhaW4oc2cpKSkKKwkJc2cgPSBzZ19jaGFp
bl9wdHIoc2cpOworCXJldHVybiBzZzsKK30KKworLyoqCisgKiBfX3NnX25leHQgLSByZXR1cm4g
dGhlIG5leHQgc2NhdHRlcmxpc3QgZW50cnkgaW4gYSBsaXN0CisgKiBAc2c6CQlUaGUgY3VycmVu
dCBzZyBlbnRyeQorICoKKyAqIERlc2NyaXB0aW9uOgorICogICBJZiB0aGUgZW50cnkgaXMgdGhl
IGxhc3QsIHJldHVybiBOVUxMOyBvdGhlcndpc2UsIHN0ZXAgdG8gdGhlIG5leHQKKyAqICAgZWxl
bWVudCBpbiB0aGUgYXJyYXkgKEBzZ0ArMSkuIElmIHRoYXQncyBhIGNoYWluIHBvaW50ZXIsIGZv
bGxvdyBpdDsKKyAqICAgb3RoZXJ3aXNlIGp1c3QgcmV0dXJuIHRoZSBwb2ludGVyIHRvIHRoZSBj
dXJyZW50IGVsZW1lbnQuCisgKiovCitzdGF0aWMgaW5saW5lIHN0cnVjdCBzY2F0dGVybGlzdCAq
X19zZ19uZXh0KHN0cnVjdCBzY2F0dGVybGlzdCAqc2cpCit7CisJcmV0dXJuIHNnX2lzX2xhc3Qo
c2cpID8gTlVMTCA6IF9fX19zZ19uZXh0KHNnKTsKK30KKworLyoqCisgKiBfX2Zvcl9lYWNoX3Nn
dF9kbWEgLSBpdGVyYXRlIG92ZXIgdGhlIERNQSBhZGRyZXNzZXMgb2YgdGhlIGdpdmVuIHNnX3Rh
YmxlCisgKiBAX19kbWFwOglETUEgYWRkcmVzcyAob3V0cHV0KQorICogQF9faXRlcjoJJ3N0cnVj
dCBzZ3RfaXRlcicgKGl0ZXJhdG9yIHN0YXRlLCBpbnRlcm5hbCkKKyAqIEBfX3NndDoJc2dfdGFi
bGUgdG8gaXRlcmF0ZSBvdmVyIChpbnB1dCkKKyAqIEBfX3N0ZXA6CXN0ZXAgc2l6ZQorICovCisj
ZGVmaW5lIF9fZm9yX2VhY2hfc2d0X2RtYShfX2RtYXAsIF9faXRlciwgX19zZ3QsIF9fc3RlcCkJ
CVwKKwlmb3IgKChfX2l0ZXIpID0gX19zZ3RfaXRlcigoX19zZ3QpLT5zZ2wsIHRydWUpOwkJCVwK
KwkgICAgICgoX19kbWFwKSA9IChfX2l0ZXIpLmRtYSArIChfX2l0ZXIpLmN1cnIpOwkJCVwKKwkg
ICAgICgoKF9faXRlcikuY3VyciArPSAoX19zdGVwKSkgPj0gKF9faXRlcikubWF4KSA/CQlcCisJ
ICAgICAoX19pdGVyKSA9IF9fc2d0X2l0ZXIoX19zZ19uZXh0KChfX2l0ZXIpLnNncCksIHRydWUp
LCAwIDogMCkKKworLyoqCisgKiBmb3JfZWFjaF9zZ3RfcGFnZSAtIGl0ZXJhdGUgb3ZlciB0aGUg
cGFnZXMgb2YgdGhlIGdpdmVuIHNnX3RhYmxlCisgKiBAX19wcDoJcGFnZSBwb2ludGVyIChvdXRw
dXQpCisgKiBAX19pdGVyOgknc3RydWN0IHNndF9pdGVyJyAoaXRlcmF0b3Igc3RhdGUsIGludGVy
bmFsKQorICogQF9fc2d0OglzZ190YWJsZSB0byBpdGVyYXRlIG92ZXIgKGlucHV0KQorICovCisj
ZGVmaW5lIGZvcl9lYWNoX3NndF9wYWdlKF9fcHAsIF9faXRlciwgX19zZ3QpCQkJCVwKKwlmb3Ig
KChfX2l0ZXIpID0gX19zZ3RfaXRlcigoX19zZ3QpLT5zZ2wsIGZhbHNlKTsJCVwKKwkgICAgICgo
X19wcCkgPSAoX19pdGVyKS5wZm4gPT0gMCA/IE5VTEwgOgkJCVwKKwkgICAgICBwZm5fdG9fcGFn
ZSgoX19pdGVyKS5wZm4gKyAoKF9faXRlcikuY3VyciA+PiBQQUdFX1NISUZUKSkpOyBcCisJICAg
ICAoKChfX2l0ZXIpLmN1cnIgKz0gUEFHRV9TSVpFKSA+PSAoX19pdGVyKS5tYXgpID8JCVwKKwkg
ICAgIChfX2l0ZXIpID0gX19zZ3RfaXRlcihfX3NnX25leHQoKF9faXRlcikuc2dwKSwgZmFsc2Up
LCAwIDogMCkKKworc3RhdGljIGlubGluZSB1bnNpZ25lZCBpbnQgaTkxNV9zZ19wYWdlX3NpemVz
KHN0cnVjdCBzY2F0dGVybGlzdCAqc2cpCit7CisJdW5zaWduZWQgaW50IHBhZ2Vfc2l6ZXM7CisK
KwlwYWdlX3NpemVzID0gMDsKKwl3aGlsZSAoc2cpIHsKKwkJR0VNX0JVR19PTihzZy0+b2Zmc2V0
KTsKKwkJR0VNX0JVR19PTighSVNfQUxJR05FRChzZy0+bGVuZ3RoLCBQQUdFX1NJWkUpKTsKKwkJ
cGFnZV9zaXplcyB8PSBzZy0+bGVuZ3RoOworCQlzZyA9IF9fc2dfbmV4dChzZyk7CisJfQorCisJ
cmV0dXJuIHBhZ2Vfc2l6ZXM7Cit9CisKK3N0YXRpYyBpbmxpbmUgdW5zaWduZWQgaW50IGk5MTVf
c2dfc2VnbWVudF9zaXplKHZvaWQpCit7CisJdW5zaWduZWQgaW50IHNpemUgPSBzd2lvdGxiX21h
eF9zZWdtZW50KCk7CisKKwlpZiAoc2l6ZSA9PSAwKQorCQlyZXR1cm4gU0NBVFRFUkxJU1RfTUFY
X1NFR01FTlQ7CisKKwlzaXplID0gcm91bmRkb3duKHNpemUsIFBBR0VfU0laRSk7CisJLyogc3dp
b3RsYl9tYXhfc2VnbWVudF9zaXplIGNhbiByZXR1cm4gMSBieXRlIHdoZW4gaXQgbWVhbnMgb25l
IHBhZ2UuICovCisJaWYgKHNpemUgPCBQQUdFX1NJWkUpCisJCXNpemUgPSBQQUdFX1NJWkU7CisK
KwlyZXR1cm4gc2l6ZTsKK30KKworYm9vbCBpOTE1X3NnX3RyaW0oc3RydWN0IHNnX3RhYmxlICpv
cmlnX3N0KTsKKworI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvaTkxNV92bWEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3Zt
YS5jCmluZGV4IDQyNWI3NjEzMzg1MC4uNjkxOTIwNzg4M2Y2IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV92bWEuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9zZWxmdGVzdHMvaTkxNV92bWEuYwpAQCAtMjYsNiArMjYsNyBAQAogCiAjaW5jbHVkZSAi
Z2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRleHQuaCIKIAorI2luY2x1ZGUgImk5MTVfc2NhdHRlcmxp
c3QuaCIKICNpbmNsdWRlICJpOTE1X3NlbGZ0ZXN0LmgiCiAKICNpbmNsdWRlICJtb2NrX2dlbV9k
ZXZpY2UuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9zY2F0
dGVybGlzdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL3NjYXR0ZXJsaXN0LmMK
aW5kZXggY2Q2ZDJhMTYwNzFmLi5kNTk5MTg2ZDViNzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L3NlbGZ0ZXN0cy9zY2F0dGVybGlzdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L3NlbGZ0ZXN0cy9zY2F0dGVybGlzdC5jCkBAIC0yNCw3ICsyNCw4IEBACiAjaW5jbHVkZSA8
bGludXgvcHJpbWVfbnVtYmVycy5oPgogI2luY2x1ZGUgPGxpbnV4L3JhbmRvbS5oPgogCi0jaW5j
bHVkZSAiLi4vaTkxNV9zZWxmdGVzdC5oIgorI2luY2x1ZGUgImk5MTVfc2VsZnRlc3QuaCIKKyNp
bmNsdWRlICJpOTE1X3V0aWxzLmgiCiAKICNkZWZpbmUgUEZOX0JJQVMgKDEgPDwgMTApCiAKLS0g
CjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
SW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

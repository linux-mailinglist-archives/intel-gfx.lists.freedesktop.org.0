Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 77F81E948E
	for <lists+intel-gfx@lfdr.de>; Wed, 30 Oct 2019 02:25:19 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3A7C96EC70;
	Wed, 30 Oct 2019 01:25:13 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 99CC86E875
 for <intel-gfx@lists.freedesktop.org>; Wed, 30 Oct 2019 01:25:11 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 29 Oct 2019 18:25:11 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,245,1569308400"; d="scan'208";a="211945561"
Received: from ldmartin-desk1.jf.intel.com ([10.7.200.70])
 by orsmga002.jf.intel.com with ESMTP; 29 Oct 2019 18:25:10 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 29 Oct 2019 18:24:46 -0700
Message-Id: <20191030012448.14937-4-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191030012448.14937-1-lucas.demarchi@intel.com>
References: <20191030012448.14937-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 3/5] drm/i915/tgl: do not enable transcoder
 clock twice on MST
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Rm9yIE1TVCBvbiBUaWdlciBMYWtlIHRoZXJlIGFyZSBkaWZmZXJlbnQgbW9tZW50cyB3aGVuIHdl
IG5lZWQgdG8KY29uZmlndXJlIHRoZSB0cmFuc2NvZGVyIGNsb2NrIHNlbGVjdC4gRm9yIHRoZSBm
aXJzdCBsaW5rIHRoaXMgaXMgaW4gc3RlcAo3LmEgb2YgdGhlIHNwZWMsIGJlZm9yZSB0cmFpbmlu
ZyB0aGUgbGluay4gIEZvciBhZGRpdGlvbmFsIHN0cmVhbXMgdGhpcwpzaG91bGQgYmUgZG9uZSBh
cyBwYXJ0IG9mIHN0ZXAgOC5iIGFmdGVyIHByb2dyYW1taW5nIHJlY2VpdmVyIFZDIFBheWxvYWQK
SUQuCgpCc3BlYzogNDkxOTAKClNpZ25lZC1vZmYtYnk6IEx1Y2FzIERlIE1hcmNoaSA8bHVjYXMu
ZGVtYXJjaGlAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGRpLmMgICAgfCAgNyArKysrLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2RwX21zdC5jIHwgMTYgKysrKysrKysrKysrKy0tLQogMiBmaWxlcyBjaGFuZ2VkLCAxNyBp
bnNlcnRpb25zKCspLCA2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2RkaS5jCmluZGV4IGZlZDdmYzU2ZGQ5Mi4uMmNlOTk4NTI5ZDA4IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKQEAgLTM0NjIsOSArMzQ2MiwxMCBAQCBz
dGF0aWMgdm9pZCB0Z2xfZGRpX3ByZV9lbmFibGVfZHAoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIsCiAJaWNsX3Byb2dyYW1fbWdfZHBfbW9kZShkaWdfcG9ydCwgY3J0Y19zdGF0ZSk7CiAK
IAkvKgotCSAqIDcuYSAtIFN0ZXBzIGluIHRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUgZXhl
Y3V0ZWQgb3ZlciBNU1QKLQkgKiBtYXN0ZXIsIHdoYXQgd2lsbCBiZSB0YWtlbiBpbiBjYXJlIGJ5
IE1TVCBob29rCi0JICogaW50ZWxfbXN0X3ByZV9lbmFibGVfZHAoKQorCSAqIDcuYSAtIHNpbmds
ZSBzdHJlYW0gb3IgbXVsdGktc3RyZWFtIG1hc3RlciB0cmFuc2NvZGVyOiBDb25maWd1cmUKKwkg
KiBUcmFuc2NvZGVyIENsb2NrIFNlbGVjdC4gRm9yIGFkZGl0aW9uYWwgTVNUIHN0cmVhbXMgdGhp
cyB3aWxsIGJlIGRvbmUKKwkgKiBieSBpbnRlbF9tc3RfcHJlX2VuYWJsZV9kcCgpIGFmdGVyIHBy
b2dyYW1taW5nIFZDIFBheWxvYWQgSUQgdGhyb3VnaAorCSAqIEFVWC4KIAkgKi8KIAlpbnRlbF9k
ZGlfZW5hYmxlX3BpcGVfY2xvY2soY3J0Y19zdGF0ZSk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2RwX21zdC5jCmluZGV4IGE5OTYyODQ2YTUwMy4uYWQ1NDYxOGY2MTQy
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMKQEAgLTI5
OSwyMSArMjk5LDIzIEBAIHN0YXRpYyB2b2lkIGludGVsX21zdF9wcmVfZW5hYmxlX2RwKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQl0b19pbnRlbF9jb25uZWN0b3IoY29ubl9zdGF0
ZS0+Y29ubmVjdG9yKTsKIAlpbnQgcmV0OwogCXUzMiB0ZW1wOworCWJvb2wgZmlyc3RfbXN0X3N0
cmVhbTsKIAogCS8qIE1TVCBlbmNvZGVycyBhcmUgYm91bmQgdG8gYSBjcnRjLCBub3QgdG8gYSBj
b25uZWN0b3IsCiAJICogZm9yY2UgdGhlIG1hcHBpbmcgaGVyZSBmb3IgZ2V0X2h3X3N0YXRlLgog
CSAqLwogCWNvbm5lY3Rvci0+ZW5jb2RlciA9IGVuY29kZXI7CiAJaW50ZWxfbXN0LT5jb25uZWN0
b3IgPSBjb25uZWN0b3I7CisJZmlyc3RfbXN0X3N0cmVhbSA9IGludGVsX2RwLT5hY3RpdmVfbXN0
X2xpbmtzID09IDA7CiAKIAlEUk1fREVCVUdfS01TKCJhY3RpdmUgbGlua3MgJWRcbiIsIGludGVs
X2RwLT5hY3RpdmVfbXN0X2xpbmtzKTsKIAotCWlmIChpbnRlbF9kcC0+YWN0aXZlX21zdF9saW5r
cyA9PSAwKQorCWlmIChmaXJzdF9tc3Rfc3RyZWFtKQogCQlpbnRlbF9kcF9zaW5rX2RwbXMoaW50
ZWxfZHAsIERSTV9NT0RFX0RQTVNfT04pOwogCiAJZHJtX2RwX3NlbmRfcG93ZXJfdXBkb3duX3Bo
eSgmaW50ZWxfZHAtPm1zdF9tZ3IsIGNvbm5lY3Rvci0+cG9ydCwgdHJ1ZSk7CiAKLQlpZiAoaW50
ZWxfZHAtPmFjdGl2ZV9tc3RfbGlua3MgPT0gMCkKKwlpZiAoZmlyc3RfbXN0X3N0cmVhbSkKIAkJ
aW50ZWxfZGlnX3BvcnQtPmJhc2UucHJlX2VuYWJsZSgmaW50ZWxfZGlnX3BvcnQtPmJhc2UsCiAJ
CQkJCQlwaXBlX2NvbmZpZywgTlVMTCk7CiAKQEAgLTMzMCw3ICszMzIsMTUgQEAgc3RhdGljIHZv
aWQgaW50ZWxfbXN0X3ByZV9lbmFibGVfZHAoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIs
CiAKIAlyZXQgPSBkcm1fZHBfdXBkYXRlX3BheWxvYWRfcGFydDEoJmludGVsX2RwLT5tc3RfbWdy
KTsKIAotCWludGVsX2RkaV9lbmFibGVfcGlwZV9jbG9jayhwaXBlX2NvbmZpZyk7CisJLyoKKwkg
KiBCZWZvcmUgR2VuIDEyIHRoaXMgaXMgbm90IGRvbmUgYXMgcGFydCBvZgorCSAqIGludGVsX2Rp
Z19wb3J0LT5iYXNlLnByZV9lbmFibGUoKSBhbmQgc2hvdWxkIGJlIGRvbmUgaGVyZS4gRm9yCisJ
ICogR2VuIDEyKyB0aGUgc3RlcCBpbiB3aGljaCB0aGlzIHNob3VsZCBiZSBkb25lIGlzIGRpZmZl
cmVudCBmb3IgdGhlCisJICogZmlyc3QgTVNUIHN0cmVhbSwgc28gaXQncyBkb25lIG9uIHRoZSBE
REkgZm9yIHRoZSBmaXJzdCBzdHJlYW0gYW5kCisJICogaGVyZSBmb3IgdGhlIGZvbGxvd2luZyBv
bmVzLgorCSAqLworCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwgMTIgfHwgIWZpcnN0X21zdF9z
dHJlYW0pCisJCWludGVsX2RkaV9lbmFibGVfcGlwZV9jbG9jayhwaXBlX2NvbmZpZyk7CiB9CiAK
IHN0YXRpYyB2b2lkIGludGVsX21zdF9lbmFibGVfZHAoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIsCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2lu
dGVsLWdmeA==

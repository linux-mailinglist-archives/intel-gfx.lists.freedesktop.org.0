Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7FBB567227
	for <lists+intel-gfx@lfdr.de>; Fri, 12 Jul 2019 17:16:29 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8F3976E0BA;
	Fri, 12 Jul 2019 15:16:27 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 27DF96E0BA
 for <intel-gfx@lists.freedesktop.org>; Fri, 12 Jul 2019 15:16:26 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 12 Jul 2019 08:16:25 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,483,1557212400"; d="scan'208";a="186619532"
Received: from acriddle-mobl2.ger.corp.intel.com ([10.249.254.212])
 by fmsmga001.fm.intel.com with ESMTP; 12 Jul 2019 08:16:23 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20190712112725.2892-1-chris@chris-wilson.co.uk>
 <20190712112725.2892-3-chris@chris-wilson.co.uk>
From: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Message-ID: <54f961fc-ae00-71c9-d3ed-7c7d19681abb@linux.intel.com>
Date: Fri, 12 Jul 2019 18:16:21 +0300
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:60.0)
 Gecko/20100101 Thunderbird/60.7.2
MIME-Version: 1.0
In-Reply-To: <20190712112725.2892-3-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 2/4] drm/i915/gtt: Recursive ppgtt clear for
 gen8
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

CgpPbiAxMi8wNy8yMDE5IDE0LjI3LCBDaHJpcyBXaWxzb24gd3JvdGU6Cj4gV2l0aCBhbiBleHBs
aWNpdCBsZXZlbCwgd2UgY2FuIHJlZmFjdG9yIHRoZSBzZXBhcmF0ZSBjbGVhciBmdW5jdGlvbnMK
PiBhcyBhIHNpbXBsZSByZWN1cnNpdmUgZnVuY3Rpb24uIFRoZSBhZGRpdGlvbmFsIGtub3dsZWRn
ZSBvZiB0aGUgbGV2ZWwKPiBhbGxvd3MgdXMgdG8gc3BvdCB3aGVuIHdlIGNhbiBmcmVlIGFuIGVu
dGlyZSBzdWJ0cmVlIGF0IG9uY2UuCj4gCj4gU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxj
aHJpc0BjaHJpcy13aWxzb24uY28udWs+Cj4gLS0tCgpSZXZpZXdlZC1ieTogQWJkaWVsIEphbnVs
Z3VlIDxhYmRpZWwuamFudWxndWVAbGludXguaW50ZWwuY29tPgoKPiAgZHJpdmVycy9ncHUvZHJt
L2k5MTUvS2NvbmZpZy5kZWJ1ZyAgfCAgMTUgKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2VtX2d0dC5jIHwgMTU0ICsrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0KPiAgMiBmaWxl
cyBjaGFuZ2VkLCAxMDUgaW5zZXJ0aW9ucygrKSwgNjQgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcuZGVidWcgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9LY29uZmlnLmRlYnVnCj4gaW5kZXggOGQ5MjJiYjRkOTUzLi5lZDhjNzg3MDU4YTUg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvS2NvbmZpZy5kZWJ1Zwo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcuZGVidWcKPiBAQCAtOTQsNiArOTQsMjEgQEAg
Y29uZmlnIERSTV9JOTE1X1RSQUNFX0dFTQo+ICAKPiAgCSAgSWYgaW4gZG91YnQsIHNheSAiTiIu
Cj4gIAo+ICtjb25maWcgRFJNX0k5MTVfVFJBQ0VfR1RUCj4gKwlib29sICJJbnNlcnQgZXh0cmEg
ZnRyYWNlIG91dHB1dCBmcm9tIHRoZSBHVFQgaW50ZXJuYWxzIgo+ICsJZGVwZW5kcyBvbiBEUk1f
STkxNV9ERUJVR19HRU0KPiArCXNlbGVjdCBUUkFDSU5HCj4gKwlkZWZhdWx0IG4KPiArCWhlbHAK
PiArCSAgRW5hYmxlIGFkZGl0aW9uYWwgYW5kIHZlcmJvc2UgZGVidWdnaW5nIG91dHB1dCB0aGF0
IHdpbGwgc3BhbQo+ICsJICBvcmRpbmFyeSB0ZXN0cywgYnV0IG1heSBiZSB2aXRhbCBmb3IgcG9z
dC1tb3J0ZW0gZGVidWdnaW5nIHdoZW4KPiArCSAgdXNlZCB3aXRoIC9wcm9jL3N5cy9rZXJuZWwv
ZnRyYWNlX2R1bXBfb25fb29wcwo+ICsKPiArCSAgUmVjb21tZW5kZWQgZm9yIGRyaXZlciBkZXZl
bG9wZXJzIG9ubHkuCj4gKwo+ICsJICBJZiBpbiBkb3VidCwgc2F5ICJOIi4KPiArCj4gKwo+ICBj
b25maWcgRFJNX0k5MTVfU1dfRkVOQ0VfREVCVUdfT0JKRUNUUwo+ICAgICAgICAgIGJvb2wgIkVu
YWJsZSBhZGRpdGlvbmFsIGRyaXZlciBkZWJ1Z2dpbmcgZm9yIGZlbmNlIG9iamVjdHMiCj4gICAg
ICAgICAgZGVwZW5kcyBvbiBEUk1fSTkxNQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2dlbV9ndHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5j
Cj4gaW5kZXggMzA1YzY1YzA4YTZhLi43YjJmMzE4OGQ0MzUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dlbV9ndHQuYwo+IEBAIC00Niw2ICs0NiwxMiBAQAo+ICAKPiAgI2RlZmluZSBJOTE1
X0dGUF9BTExPV19GQUlMIChHRlBfS0VSTkVMIHwgX19HRlBfUkVUUllfTUFZRkFJTCB8IF9fR0ZQ
X05PV0FSTikKPiAgCj4gKyNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9UUkFDRV9HVFQp
Cj4gKyNkZWZpbmUgREJHKC4uLikgdHJhY2VfcHJpbnRrKF9fVkFfQVJHU19fKQo+ICsjZWxzZQo+
ICsjZGVmaW5lIERCRyguLi4pCj4gKyNlbmRpZgo+ICsKPiAgLyoqCj4gICAqIERPQzogR2xvYmFs
IEdUVCB2aWV3cwo+ICAgKgo+IEBAIC03OTYsNiArODAyLDkgQEAgcmVsZWFzZV9wZF9lbnRyeShz
dHJ1Y3QgaTkxNV9wYWdlX2RpcmVjdG9yeSAqIGNvbnN0IHBkLAo+ICB7Cj4gIAlib29sIGZyZWUg
PSBmYWxzZTsKPiAgCj4gKwlpZiAoYXRvbWljX2FkZF91bmxlc3MoJnB0LT51c2VkLCAtMSwgMSkp
Cj4gKwkJcmV0dXJuIGZhbHNlOwo+ICsKPiAgCXNwaW5fbG9jaygmcGQtPmxvY2spOwo+ICAJaWYg
KGF0b21pY19kZWNfYW5kX3Rlc3QoJnB0LT51c2VkKSkgewo+ICAJCWNsZWFyX3BkX2VudHJ5KHBk
LCBpZHgsIHNjcmF0Y2gpOwo+IEBAIC05MjcsODYgKzkzNiwxMDEgQEAgc3RhdGljIHZvaWQgZ2Vu
OF9wcGd0dF9jbGVhbnVwKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtKQo+ICAJZnJlZV9z
Y3JhdGNoKHZtKTsKPiAgfQo+ICAKPiAtLyogUmVtb3ZlcyBlbnRyaWVzIGZyb20gYSBzaW5nbGUg
cGFnZSB0YWJsZSwgcmVsZWFzaW5nIGl0IGlmIGl0J3MgZW1wdHkuCj4gLSAqIENhbGxlciBjYW4g
dXNlIHRoZSByZXR1cm4gdmFsdWUgdG8gdXBkYXRlIGhpZ2hlci1sZXZlbCBlbnRyaWVzLgo+IC0g
Ki8KPiAtc3RhdGljIHZvaWQgZ2VuOF9wcGd0dF9jbGVhcl9wdChjb25zdCBzdHJ1Y3QgaTkxNV9h
ZGRyZXNzX3NwYWNlICp2bSwKPiAtCQkJCXN0cnVjdCBpOTE1X3BhZ2VfdGFibGUgKnB0LAo+IC0J
CQkJdTY0IHN0YXJ0LCB1NjQgbGVuZ3RoKQo+ICtzdGF0aWMgdTY0IF9fZ2VuOF9wcGd0dF9jbGVh
cihzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICogY29uc3Qgdm0sCj4gKwkJCSAgICAgIHN0cnVj
dCBpOTE1X3BhZ2VfZGlyZWN0b3J5ICogY29uc3QgcGQsCj4gKwkJCSAgICAgIHU2NCBzdGFydCwg
Y29uc3QgdTY0IGVuZCwgaW50IGx2bCkKPiAgewo+IC0JY29uc3QgdW5zaWduZWQgaW50IG51bV9l
bnRyaWVzID0gZ2VuOF9wdGVfY291bnQoc3RhcnQsIGxlbmd0aCk7Cj4gLQlnZW44X3B0ZV90ICp2
YWRkcjsKPiArCWNvbnN0IHN0cnVjdCBpOTE1X3BhZ2Vfc2NyYXRjaCAqIGNvbnN0IHNjcmF0Y2gg
PSAmdm0tPnNjcmF0Y2hbbHZsXTsKPiArCXVuc2lnbmVkIGludCBpZHgsIGxlbjsKPiAgCj4gLQl2
YWRkciA9IGttYXBfYXRvbWljX3B4KHB0KTsKPiAtCW1lbXNldDY0KHZhZGRyICsgZ2VuOF9wdGVf
aW5kZXgoc3RhcnQpLAo+IC0JCSB2bS0+c2NyYXRjaFswXS5lbmNvZGUsCj4gLQkJIG51bV9lbnRy
aWVzKTsKPiAtCWt1bm1hcF9hdG9taWModmFkZHIpOwo+ICsJbGVuID0gZ2VuOF9wZF9yYW5nZShz
dGFydCwgZW5kLCBsdmwtLSwgJmlkeCk7Cj4gKwlEQkcoIiVzKCVwKTp7IGx2bDolZCwgc3RhcnQ6
JWxseCwgZW5kOiVsbHgsIGlkeDolZCwgbGVuOiVkLCB1c2VkOiVkfVxuIiwKPiArCSAgICBfX2Z1
bmNfXywgdm0sIGx2bCArIDEsIHN0YXJ0LCBlbmQsCj4gKwkgICAgaWR4LCBsZW4sIGF0b21pY19y
ZWFkKHB4X3VzZWQocGQpKSk7Cj4gKwlHRU1fQlVHX09OKCFsZW4gfHwgbGVuID49IGF0b21pY19y
ZWFkKHB4X3VzZWQocGQpKSk7Cj4gIAo+IC0JR0VNX0JVR19PTihudW1fZW50cmllcyA+IGF0b21p
Y19yZWFkKCZwdC0+dXNlZCkpOwo+ICsJZG8gewo+ICsJCXN0cnVjdCBpOTE1X3BhZ2VfdGFibGUg
KnB0ID0gcGQtPmVudHJ5W2lkeF07Cj4gKwo+ICsJCWlmIChhdG9taWNfZmV0Y2hfaW5jKCZwdC0+
dXNlZCkgPj4gZ2VuOF9wZF9zaGlmdCgxKSAmJgo+ICsJCSAgICBnZW44X3BkX2NvbnRhaW5zKHN0
YXJ0LCBlbmQsIGx2bCkpIHsKPiArCQkJREJHKCIlcyglcCk6eyBsdmw6JWQsIGlkeDolZCwgc3Rh
cnQ6JWxseCwgZW5kOiVsbHggfSByZW1vdmluZyBwZFxuIiwKPiArCQkJICAgIF9fZnVuY19fLCB2
bSwgbHZsICsgMSwgaWR4LCBzdGFydCwgZW5kKTsKPiArCQkJY2xlYXJfcGRfZW50cnkocGQsIGlk
eCwgc2NyYXRjaCk7Cj4gKwkJCV9fZ2VuOF9wcGd0dF9jbGVhbnVwKHZtLCBhc19wZChwdCksIEk5
MTVfUERFUywgbHZsKTsKPiArCQkJc3RhcnQgKz0gKHU2NClJOTE1X1BERVMgPDwgZ2VuOF9wZF9z
aGlmdChsdmwpOwo+ICsJCQljb250aW51ZTsKPiArCQl9Cj4gIAo+IC0JYXRvbWljX3N1YihudW1f
ZW50cmllcywgJnB0LT51c2VkKTsKPiAtfQo+ICsJCWlmIChsdmwpIHsKPiArCQkJc3RhcnQgPSBf
X2dlbjhfcHBndHRfY2xlYXIodm0sIGFzX3BkKHB0KSwKPiArCQkJCQkJICAgc3RhcnQsIGVuZCwg
bHZsKTsKPiArCQl9IGVsc2Ugewo+ICsJCQl1bnNpZ25lZCBpbnQgY291bnQ7Cj4gKwkJCXU2NCAq
dmFkZHI7Cj4gIAo+IC1zdGF0aWMgdm9pZCBnZW44X3BwZ3R0X2NsZWFyX3BkKHN0cnVjdCBpOTE1
X2FkZHJlc3Nfc3BhY2UgKnZtLAo+IC0JCQkJc3RydWN0IGk5MTVfcGFnZV9kaXJlY3RvcnkgKnBk
LAo+IC0JCQkJdTY0IHN0YXJ0LCB1NjQgbGVuZ3RoKQo+IC17Cj4gLQlzdHJ1Y3QgaTkxNV9wYWdl
X3RhYmxlICpwdDsKPiAtCXUzMiBwZGU7Cj4gKwkJCWNvdW50ID0gZ2VuOF9wdF9jb3VudChzdGFy
dCwgZW5kKTsKPiArCQkJREJHKCIlcyglcCk6eyBsdmw6JWQsIHN0YXJ0OiVsbHgsIGVuZDolbGx4
LCBpZHg6JWQsIGxlbjolZCwgdXNlZDolZH0gcmVtb3ZpbmcgcHRlXG4iLAo+ICsJCQkgICAgX19m
dW5jX18sIHZtLCBsdmwsIHN0YXJ0LCBlbmQsCj4gKwkJCSAgICBnZW44X3BkX2luZGV4KHN0YXJ0
LCAwKSwgY291bnQsCj4gKwkJCSAgICBhdG9taWNfcmVhZCgmcHQtPnVzZWQpKTsKPiArCQkJR0VN
X0JVR19PTighY291bnQgfHwgY291bnQgPj0gYXRvbWljX3JlYWQoJnB0LT51c2VkKSk7Cj4gIAo+
IC0JZ2VuOF9mb3JfZWFjaF9wZGUocHQsIHBkLCBzdGFydCwgbGVuZ3RoLCBwZGUpIHsKPiAtCQlh
dG9taWNfaW5jKCZwdC0+dXNlZCk7Cj4gLQkJZ2VuOF9wcGd0dF9jbGVhcl9wdCh2bSwgcHQsIHN0
YXJ0LCBsZW5ndGgpOwo+IC0JCWlmIChyZWxlYXNlX3BkX2VudHJ5KHBkLCBwZGUsIHB0LCAmdm0t
PnNjcmF0Y2hbMV0pKQo+ICsJCQl2YWRkciA9IGttYXBfYXRvbWljX3B4KHB0KTsKPiArCQkJbWVt
c2V0NjQodmFkZHIgKyBnZW44X3BkX2luZGV4KHN0YXJ0LCAwKSwKPiArCQkJCSB2bS0+c2NyYXRj
aFswXS5lbmNvZGUsCj4gKwkJCQkgY291bnQpOwo+ICsJCQlrdW5tYXBfYXRvbWljKHZhZGRyKTsK
PiArCj4gKwkJCWF0b21pY19zdWIoY291bnQsICZwdC0+dXNlZCk7Cj4gKwkJCXN0YXJ0ICs9IGNv
dW50Owo+ICsJCX0KPiArCj4gKwkJaWYgKHJlbGVhc2VfcGRfZW50cnkocGQsIGlkeCwgcHQsIHNj
cmF0Y2gpKQo+ICAJCQlmcmVlX3B4KHZtLCBwdCk7Cj4gLQl9Cj4gKwl9IHdoaWxlIChpZHgrKywg
LS1sZW4pOwo+ICsKPiArCXJldHVybiBzdGFydDsKPiAgfQo+ICAKPiAtLyogUmVtb3ZlcyBlbnRy
aWVzIGZyb20gYSBzaW5nbGUgcGFnZSBkaXIgcG9pbnRlciwgcmVsZWFzaW5nIGl0IGlmIGl0J3Mg
ZW1wdHkuCj4gLSAqIENhbGxlciBjYW4gdXNlIHRoZSByZXR1cm4gdmFsdWUgdG8gdXBkYXRlIGhp
Z2hlci1sZXZlbCBlbnRyaWVzCj4gLSAqLwo+IC1zdGF0aWMgdm9pZCBnZW44X3BwZ3R0X2NsZWFy
X3BkcChzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKPiAtCQkJCSBzdHJ1Y3QgaTkxNV9w
YWdlX2RpcmVjdG9yeSAqIGNvbnN0IHBkcCwKPiAtCQkJCSB1NjQgc3RhcnQsIHU2NCBsZW5ndGgp
Cj4gK3N0YXRpYyB2b2lkIGdlbjhfcHBndHRfY2xlYXIoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFj
ZSAqdm0sCj4gKwkJCSAgICAgdTY0IHN0YXJ0LCB1NjQgbGVuZ3RoKQo+ICB7Cj4gLQlzdHJ1Y3Qg
aTkxNV9wYWdlX2RpcmVjdG9yeSAqcGQ7Cj4gLQl1bnNpZ25lZCBpbnQgcGRwZTsKPiArCUdFTV9C
VUdfT04oIUlTX0FMSUdORUQoc3RhcnQsIEJJVF9VTEwoR0VOOF9QVEVfU0hJRlQpKSk7Cj4gKwlH
RU1fQlVHX09OKCFJU19BTElHTkVEKGxlbmd0aCwgQklUX1VMTChHRU44X1BURV9TSElGVCkpKTsK
PiAgCj4gLQlnZW44X2Zvcl9lYWNoX3BkcGUocGQsIHBkcCwgc3RhcnQsIGxlbmd0aCwgcGRwZSkg
ewo+IC0JCWF0b21pY19pbmMocHhfdXNlZChwZCkpOwo+IC0JCWdlbjhfcHBndHRfY2xlYXJfcGQo
dm0sIHBkLCBzdGFydCwgbGVuZ3RoKTsKPiAtCQlpZiAocmVsZWFzZV9wZF9lbnRyeShwZHAsIHBk
cGUsICZwZC0+cHQsICZ2bS0+c2NyYXRjaFsyXSkpCj4gLQkJCWZyZWVfcHgodm0sIHBkKTsKPiAt
CX0KPiArCXN0YXJ0ID4+PSBHRU44X1BURV9TSElGVDsKPiArCWxlbmd0aCA+Pj0gR0VOOF9QVEVf
U0hJRlQ7Cj4gKwlHRU1fQlVHX09OKGxlbmd0aCA9PSAwKTsKPiArCj4gKwlfX2dlbjhfcHBndHRf
Y2xlYXIodm0sIGk5MTVfdm1fdG9fcHBndHQodm0pLT5wZCwKPiArCQkJICAgc3RhcnQsIHN0YXJ0
ICsgbGVuZ3RoLCB2bS0+dG9wKTsKPiAgfQo+ICAKPiAtc3RhdGljIHZvaWQgZ2VuOF9wcGd0dF9j
bGVhcl8zbHZsKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+IC0JCQkJICB1NjQgc3Rh
cnQsIHU2NCBsZW5ndGgpCj4gK3N0YXRpYyB2b2lkIGdlbjhfcHBndHRfY2xlYXJfcGQoc3RydWN0
IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0sCj4gKwkJCQlzdHJ1Y3QgaTkxNV9wYWdlX2RpcmVjdG9y
eSAqcGQsCj4gKwkJCQl1NjQgc3RhcnQsIHU2NCBsZW5ndGgpCj4gIHsKPiAtCWdlbjhfcHBndHRf
Y2xlYXJfcGRwKHZtLCBpOTE1X3ZtX3RvX3BwZ3R0KHZtKS0+cGQsIHN0YXJ0LCBsZW5ndGgpOwo+
ICsJR0VNX0JVR19PTighSVNfQUxJR05FRChzdGFydCwgQklUX1VMTChHRU44X1BURV9TSElGVCkp
KTsKPiArCUdFTV9CVUdfT04oIUlTX0FMSUdORUQobGVuZ3RoLCBCSVRfVUxMKEdFTjhfUFRFX1NI
SUZUKSkpOwo+ICsKPiArCXN0YXJ0ID4+PSBHRU44X1BURV9TSElGVDsKPiArCWxlbmd0aCA+Pj0g
R0VOOF9QVEVfU0hJRlQ7Cj4gKwo+ICsJX19nZW44X3BwZ3R0X2NsZWFyKHZtLCBwZCwgc3RhcnQs
IHN0YXJ0ICsgbGVuZ3RoLCAxKTsKPiAgfQo+ICAKPiAtLyogUmVtb3ZlcyBlbnRyaWVzIGZyb20g
YSBzaW5nbGUgcG1sNC4KPiAtICogVGhpcyBpcyB0aGUgdG9wLWxldmVsIHN0cnVjdHVyZSBpbiA0
LWxldmVsIHBhZ2UgdGFibGVzIHVzZWQgb24gZ2VuOCsuCj4gLSAqIEVtcHR5IGVudHJpZXMgYXJl
IGFsd2F5cyBzY3JhdGNoIHBtbDRlLgo+IC0gKi8KPiAtc3RhdGljIHZvaWQgZ2VuOF9wcGd0dF9j
bGVhcl80bHZsKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+IC0JCQkJICB1NjQgc3Rh
cnQsIHU2NCBsZW5ndGgpCj4gK3N0YXRpYyB2b2lkIGdlbjhfcHBndHRfY2xlYXJfcGRwKHN0cnVj
dCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+ICsJCQkJIHN0cnVjdCBpOTE1X3BhZ2VfZGlyZWN0
b3J5ICogY29uc3QgcGRwLAo+ICsJCQkJIHU2NCBzdGFydCwgdTY0IGxlbmd0aCkKPiAgewo+IC0J
c3RydWN0IGk5MTVfcHBndHQgKnBwZ3R0ID0gaTkxNV92bV90b19wcGd0dCh2bSk7Cj4gLQlzdHJ1
Y3QgaTkxNV9wYWdlX2RpcmVjdG9yeSAqIGNvbnN0IHBtbDQgPSBwcGd0dC0+cGQ7Cj4gLQlzdHJ1
Y3QgaTkxNV9wYWdlX2RpcmVjdG9yeSAqcGRwOwo+IC0JdW5zaWduZWQgaW50IHBtbDRlOwo+ICsJ
R0VNX0JVR19PTighSVNfQUxJR05FRChzdGFydCwgQklUX1VMTChHRU44X1BURV9TSElGVCkpKTsK
PiArCUdFTV9CVUdfT04oIUlTX0FMSUdORUQobGVuZ3RoLCBCSVRfVUxMKEdFTjhfUFRFX1NISUZU
KSkpOwo+ICAKPiAtCUdFTV9CVUdfT04oIWk5MTVfdm1faXNfNGx2bCh2bSkpOwo+ICsJc3RhcnQg
Pj49IEdFTjhfUFRFX1NISUZUOwo+ICsJbGVuZ3RoID4+PSBHRU44X1BURV9TSElGVDsKPiAgCj4g
LQlnZW44X2Zvcl9lYWNoX3BtbDRlKHBkcCwgcG1sNCwgc3RhcnQsIGxlbmd0aCwgcG1sNGUpIHsK
PiAtCQlhdG9taWNfaW5jKHB4X3VzZWQocGRwKSk7Cj4gLQkJZ2VuOF9wcGd0dF9jbGVhcl9wZHAo
dm0sIHBkcCwgc3RhcnQsIGxlbmd0aCk7Cj4gLQkJaWYgKHJlbGVhc2VfcGRfZW50cnkocG1sNCwg
cG1sNGUsICZwZHAtPnB0LCAmdm0tPnNjcmF0Y2hbM10pKQo+IC0JCQlmcmVlX3B4KHZtLCBwZHAp
Owo+IC0JfQo+ICsJX19nZW44X3BwZ3R0X2NsZWFyKHZtLCBwZHAsIHN0YXJ0LCBzdGFydCArIGxl
bmd0aCwgMik7Cj4gIH0KPiAgCj4gIHN0YXRpYyBpbnQgZ2VuOF9wcGd0dF9hbGxvY19wZChzdHJ1
Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKPiBAQCAtMTE3MSw3ICsxMTk1LDcgQEAgc3RhdGlj
IGludCBnZW44X3BwZ3R0X2FsbG9jXzRsdmwoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0s
Cj4gIAlpZiAocmVsZWFzZV9wZF9lbnRyeShwbWw0LCBwbWw0ZSwgJnBkcC0+cHQsICZ2bS0+c2Ny
YXRjaFszXSkpCj4gIAkJZnJlZV9weCh2bSwgcGRwKTsKPiAgdW53aW5kOgo+IC0JZ2VuOF9wcGd0
dF9jbGVhcl80bHZsKHZtLCBmcm9tLCBzdGFydCAtIGZyb20pOwo+ICsJZ2VuOF9wcGd0dF9jbGVh
cih2bSwgZnJvbSwgc3RhcnQgLSBmcm9tKTsKPiAgb3V0Ogo+ICAJaWYgKGFsbG9jKQo+ICAJCWZy
ZWVfcHgodm0sIGFsbG9jKTsKPiBAQCAtMTQ4NCw2ICsxNTA4LDcgQEAgc3RhdGljIGludCBnZW44
X3ByZWFsbG9jYXRlX3RvcF9sZXZlbF9wZHAoc3RydWN0IGk5MTVfcHBndHQgKnBwZ3R0KQo+ICAK
PiAgCQlmaWxsX3B4KHBkLCB2bS0+c2NyYXRjaFsxXS5lbmNvZGUpOwo+ICAJCXNldF9wZF9lbnRy
eShwZHAsIHBkcGUsIHBkKTsKPiArCQlhdG9taWNfaW5jKHB4X3VzZWQocGQpKTsgLyoga2VlcCBw
aW5uZWQgKi8KPiAgCX0KPiAgCj4gIAlyZXR1cm4gMDsKPiBAQCAtMTUyNCw2ICsxNTQ5LDcgQEAg
Z2VuOF9hbGxvY190b3BfcGQoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0pCj4gIAl9Cj4g
IAo+ICAJZmlsbF9wYWdlX2RtYShweF9iYXNlKHBkKSwgdm0tPnNjcmF0Y2hbdm0tPnRvcF0uZW5j
b2RlLCBjb3VudCk7Cj4gKwlhdG9taWNfaW5jKHB4X3VzZWQocGQpKTsgLyogbWFyayBhcyBwaW5u
ZWQgKi8KPiAgCXJldHVybiBwZDsKPiAgfQo+ICAKPiBAQCAtMTU3Myw3ICsxNTk5LDYgQEAgc3Rh
dGljIHN0cnVjdCBpOTE1X3BwZ3R0ICpnZW44X3BwZ3R0X2NyZWF0ZShzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSkKPiAgCWlmIChpOTE1X3ZtX2lzXzRsdmwoJnBwZ3R0LT52bSkpIHsKPiAg
CQlwcGd0dC0+dm0uYWxsb2NhdGVfdmFfcmFuZ2UgPSBnZW44X3BwZ3R0X2FsbG9jXzRsdmw7Cj4g
IAkJcHBndHQtPnZtLmluc2VydF9lbnRyaWVzID0gZ2VuOF9wcGd0dF9pbnNlcnRfNGx2bDsKPiAt
CQlwcGd0dC0+dm0uY2xlYXJfcmFuZ2UgPSBnZW44X3BwZ3R0X2NsZWFyXzRsdmw7Cj4gIAl9IGVs
c2Ugewo+ICAJCWlmIChpbnRlbF92Z3B1X2FjdGl2ZShpOTE1KSkgewo+ICAJCQllcnIgPSBnZW44
X3ByZWFsbG9jYXRlX3RvcF9sZXZlbF9wZHAocHBndHQpOwo+IEBAIC0xNTgzLDkgKzE2MDgsMTAg
QEAgc3RhdGljIHN0cnVjdCBpOTE1X3BwZ3R0ICpnZW44X3BwZ3R0X2NyZWF0ZShzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKPiAgCj4gIAkJcHBndHQtPnZtLmFsbG9jYXRlX3ZhX3Jhbmdl
ID0gZ2VuOF9wcGd0dF9hbGxvY18zbHZsOwo+ICAJCXBwZ3R0LT52bS5pbnNlcnRfZW50cmllcyA9
IGdlbjhfcHBndHRfaW5zZXJ0XzNsdmw7Cj4gLQkJcHBndHQtPnZtLmNsZWFyX3JhbmdlID0gZ2Vu
OF9wcGd0dF9jbGVhcl8zbHZsOwo+ICAJfQo+ICAKPiArCXBwZ3R0LT52bS5jbGVhcl9yYW5nZSA9
IGdlbjhfcHBndHRfY2xlYXI7Cj4gKwo+ICAJaWYgKGludGVsX3ZncHVfYWN0aXZlKGk5MTUpKQo+
ICAJCWdlbjhfcHBndHRfbm90aWZ5X3ZndChwcGd0dCwgdHJ1ZSk7Cj4gIAo+IApfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBs
aXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

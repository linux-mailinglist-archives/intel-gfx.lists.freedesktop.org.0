Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8624474BA0
	for <lists+intel-gfx@lfdr.de>; Thu, 25 Jul 2019 12:33:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E07876E6E4;
	Thu, 25 Jul 2019 10:33:46 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DE74F6E6E4
 for <intel-gfx@lists.freedesktop.org>; Thu, 25 Jul 2019 10:33:44 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 25 Jul 2019 03:33:44 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,306,1559545200"; d="scan'208";a="175170960"
Received: from roszkopf-mobl.ger.corp.intel.com (HELO
 delly.ger.corp.intel.com) ([10.249.32.173])
 by orsmga006.jf.intel.com with ESMTP; 25 Jul 2019 03:33:42 -0700
From: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 25 Jul 2019 13:33:22 +0300
Message-Id: <20190725103327.27010-5-lionel.g.landwerlin@intel.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190725103327.27010-1-lionel.g.landwerlin@intel.com>
References: <20190725103327.27010-1-lionel.g.landwerlin@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v10 4/9] drm/i915: introduce a mechanism to
 extend execbuf2
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UncmUgcGxhbm5pbmcgdG8gdXNlIHRoaXMgZm9yIGEgY291cGxlIG9mIG5ldyBmZWF0dXJlIHdo
ZXJlIHdlIG5lZWQKdG8gcHJvdmlkZSBhZGRpdGlvbmFsIHBhcmFtZXRlcnMgdG8gZXhlY2J1Zi4K
ClNpZ25lZC1vZmYtYnk6IExpb25lbCBMYW5kd2VybGluIDxsaW9uZWwuZy5sYW5kd2VybGluQGlu
dGVsLmNvbT4KUmV2aWV3ZWQtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNv
LnVrPgotLS0KIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYyAgICB8
IDMyICsrKysrKysrKysrKysrKysrKy0KIGluY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaCAgICAg
ICAgICAgICAgICAgICB8IDI1ICsrKysrKysrKysrKystLQogMiBmaWxlcyBjaGFuZ2VkLCA1MyBp
bnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCmluZGV4IDhhMjA0N2M0ZTdjMy4uYTBjMDlmYmZhNzE0
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZl
ci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMK
QEAgLTIzLDYgKzIzLDcgQEAKICNpbmNsdWRlICJpOTE1X2dlbV9jbGZsdXNoLmgiCiAjaW5jbHVk
ZSAiaTkxNV9nZW1fY29udGV4dC5oIgogI2luY2x1ZGUgImk5MTVfdHJhY2UuaCIKKyNpbmNsdWRl
ICJpOTE1X3VzZXJfZXh0ZW5zaW9ucy5oIgogI2luY2x1ZGUgImludGVsX2Rydi5oIgogCiBlbnVt
IHsKQEAgLTI3MSw2ICsyNzIsMTAgQEAgc3RydWN0IGk5MTVfZXhlY2J1ZmZlciB7CiAJICovCiAJ
aW50IGx1dF9zaXplOwogCXN0cnVjdCBobGlzdF9oZWFkICpidWNrZXRzOyAvKiogaHQgZm9yIHJl
bG9jYXRpb24gaGFuZGxlcyAqLworCisJc3RydWN0IHsKKwkJdTY0IGZsYWdzOyAvKiogQXZhaWxh
YmxlIGV4dGVuc2lvbnMgcGFyYW1ldGVycyAqLworCX0gZXh0ZW5zaW9uczsKIH07CiAKICNkZWZp
bmUgZXhlY19lbnRyeShFQiwgVk1BKSAoJihFQiktPmV4ZWNbKFZNQSktPmV4ZWNfZmxhZ3MgLSAo
RUIpLT5mbGFnc10pCkBAIC0xOTY5LDcgKzE5NzQsNyBAQCBzdGF0aWMgYm9vbCBpOTE1X2dlbV9j
aGVja19leGVjYnVmZmVyKHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcjIgKmV4ZWMpCiAJ
CXJldHVybiBmYWxzZTsKIAogCS8qIEtlcm5lbCBjbGlwcGluZyB3YXMgYSBEUkkxIG1pc2ZlYXR1
cmUgKi8KLQlpZiAoIShleGVjLT5mbGFncyAmIEk5MTVfRVhFQ19GRU5DRV9BUlJBWSkpIHsKKwlp
ZiAoIShleGVjLT5mbGFncyAmIChJOTE1X0VYRUNfRkVOQ0VfQVJSQVkgfCBJOTE1X0VYRUNfRVhU
KSkpIHsKIAkJaWYgKGV4ZWMtPm51bV9jbGlwcmVjdHMgfHwgZXhlYy0+Y2xpcHJlY3RzX3B0cikK
IAkJCXJldHVybiBmYWxzZTsKIAl9CkBAIC0yMzQ3LDYgKzIzNTIsMjcgQEAgc2lnbmFsX2ZlbmNl
X2FycmF5KHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgKmViLAogCX0KIH0KIAorc3RhdGljIGNvbnN0
IGk5MTVfdXNlcl9leHRlbnNpb25fZm4gZXhlY2J1Zl9leHRlbnNpb25zW10gPSB7Cit9OworCitz
dGF0aWMgaW50CitwYXJzZV9leGVjYnVmMl9leHRlbnNpb25zKHN0cnVjdCBkcm1faTkxNV9nZW1f
ZXhlY2J1ZmZlcjIgKmFyZ3MsCisJCQkgIHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgKmViKQorewor
CWViLT5leHRlbnNpb25zLmZsYWdzID0gMDsKKworCWlmICghKGFyZ3MtPmZsYWdzICYgSTkxNV9F
WEVDX0VYVCkpCisJCXJldHVybiAwOworCisJaWYgKGFyZ3MtPm51bV9jbGlwcmVjdHMgIT0gMCkK
KwkJcmV0dXJuIC1FSU5WQUw7CisKKwlyZXR1cm4gaTkxNV91c2VyX2V4dGVuc2lvbnModTY0X3Rv
X3VzZXJfcHRyKGFyZ3MtPmNsaXByZWN0c19wdHIpLAorCQkJCSAgICBleGVjYnVmX2V4dGVuc2lv
bnMsCisJCQkJICAgIEFSUkFZX1NJWkUoZXhlY2J1Zl9leHRlbnNpb25zKSwKKwkJCQkgICAgZWIp
OworfQorCiBzdGF0aWMgaW50CiBpOTE1X2dlbV9kb19leGVjYnVmZmVyKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsCiAJCSAgICAgICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUsCkBAIC0yMzkzLDYgKzI0
MTksMTAgQEAgaTkxNV9nZW1fZG9fZXhlY2J1ZmZlcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAog
CWlmIChhcmdzLT5mbGFncyAmIEk5MTVfRVhFQ19JU19QSU5ORUQpCiAJCWViLmJhdGNoX2ZsYWdz
IHw9IEk5MTVfRElTUEFUQ0hfUElOTkVEOwogCisJZXJyID0gcGFyc2VfZXhlY2J1ZjJfZXh0ZW5z
aW9ucyhhcmdzLCAmZWIpOworCWlmIChlcnIpCisJCXJldHVybiBlcnI7CisKIAlpZiAoYXJncy0+
ZmxhZ3MgJiBJOTE1X0VYRUNfRkVOQ0VfSU4pIHsKIAkJaW5fZmVuY2UgPSBzeW5jX2ZpbGVfZ2V0
X2ZlbmNlKGxvd2VyXzMyX2JpdHMoYXJncy0+cnN2ZDIpKTsKIAkJaWYgKCFpbl9mZW5jZSkKZGlm
ZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaCBiL2luY2x1ZGUvdWFwaS9kcm0v
aTkxNV9kcm0uaAppbmRleCBlYTAyYjE2OGFjM2EuLjdkNjFmNTNhMWMxNSAxMDA2NDQKLS0tIGEv
aW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCisrKyBiL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9k
cm0uaApAQCAtMTAxNCw2ICsxMDE0LDEwIEBAIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19mZW5j
ZSB7CiAJX191MzIgZmxhZ3M7CiB9OwogCitlbnVtIGRybV9pOTE1X2dlbV9leGVjYnVmZmVyX2V4
dCB7CisJRFJNX0k5MTVfR0VNX0VYRUNCVUZGRVJfRVhUX01BWCAvKiBub24tQUJJICovCit9Owor
CiBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyIHsKIAkvKioKIAkgKiBMaXN0IG9mIGdl
bV9leGVjX29iamVjdDIgc3RydWN0cwpAQCAtMTAzMCw4ICsxMDM0LDE0IEBAIHN0cnVjdCBkcm1f
aTkxNV9nZW1fZXhlY2J1ZmZlcjIgewogCV9fdTMyIG51bV9jbGlwcmVjdHM7CiAJLyoqCiAJICog
VGhpcyBpcyBhIHN0cnVjdCBkcm1fY2xpcF9yZWN0ICpjbGlwcmVjdHMgaWYgSTkxNV9FWEVDX0ZF
TkNFX0FSUkFZCi0JICogaXMgbm90IHNldC4gIElmIEk5MTVfRVhFQ19GRU5DRV9BUlJBWSBpcyBz
ZXQsIHRoZW4gdGhpcyBpcyBhCi0JICogc3RydWN0IGRybV9pOTE1X2dlbV9leGVjX2ZlbmNlICpm
ZW5jZXMuCisJICogJiBJOTE1X0VYRUNfRVhUIGFyZSBub3Qgc2V0LgorCSAqCisJICogSWYgSTkx
NV9FWEVDX0ZFTkNFX0FSUkFZIGlzIHNldCwgdGhlbiB0aGlzIGlzIGEgcG9pbnRlciB0byBhbiBh
cnJheQorCSAqIG9mIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19mZW5jZSBhbmQgbnVtX2NsaXBy
ZWN0cyBpcyB0aGUgbGVuZ3RoCisJICogb2YgdGhlIGFycmF5LgorCSAqCisJICogSWYgSTkxNV9F
WEVDX0VYVCBpcyBzZXQsIHRoZW4gdGhpcyBpcyBhIHBvaW50ZXIgdG8gYSBzaW5nbGUgc3RydWN0
CisJICogZHJtX2k5MTVfZ2VtX2Jhc2VfZXhlY2J1ZmZlcl9leHQgYW5kIG51bV9jbGlwcmVjdHMg
aXMgMC4KIAkgKi8KIAlfX3U2NCBjbGlwcmVjdHNfcHRyOwogI2RlZmluZSBJOTE1X0VYRUNfUklO
R19NQVNLICAgICAgICAgICAgICAoMHgzZikKQEAgLTExNDksNyArMTE1OSwxNiBAQCBzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyIHsKICAqLwogI2RlZmluZSBJOTE1X0VYRUNfRkVOQ0Vf
U1VCTUlUCQkoMSA8PCAyMCkKIAotI2RlZmluZSBfX0k5MTVfRVhFQ19VTktOT1dOX0ZMQUdTICgt
KEk5MTVfRVhFQ19GRU5DRV9TVUJNSVQgPDwgMSkpCisvKgorICogU2V0dGluZyBJOTE1X0VYRUNf
RVhUIGltcGxpZXMgdGhhdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcjIuY2xpcHJlY3RzX3B0cgor
ICogaXMgdHJlYXRlZCBhcyBhIHBvaW50ZXIgdG8gYW4gbGlua2VkIGxpc3Qgb2YgaTkxNV91c2Vy
X2V4dGVuc2lvbi4gRWFjaAorICogaTkxNV91c2VyX2V4dGVuc2lvbiBub2RlIGlzIHRoZSBiYXNl
IG9mIGEgbGFyZ2VyIHN0cnVjdHVyZS4gVGhlIGxpc3Qgb2YKKyAqIHN1cHBvcnRlZCBzdHJ1Y3R1
cmVzIGFyZSBsaXN0ZWQgaW4gdGhlIGRybV9pOTE1X2dlbV9leGVjYnVmZmVyX2V4dAorICogZW51
bS4KKyAqLworI2RlZmluZSBJOTE1X0VYRUNfRVhUCQkoMSA8PCAyMSkKKworI2RlZmluZSBfX0k5
MTVfRVhFQ19VTktOT1dOX0ZMQUdTICgtKEk5MTVfRVhFQ19FWFQ8PDEpKQogCiAjZGVmaW5lIEk5
MTVfRVhFQ19DT05URVhUX0lEX01BU0sJKDB4ZmZmZmZmZmYpCiAjZGVmaW5lIGk5MTVfZXhlY2J1
ZmZlcjJfc2V0X2NvbnRleHRfaWQoZWIyLCBjb250ZXh0KSBcCi0tIAoyLjIyLjAKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5n
IGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

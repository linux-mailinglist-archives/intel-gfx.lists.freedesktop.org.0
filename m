Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9FB3F10ECCA
	for <lists+intel-gfx@lfdr.de>; Mon,  2 Dec 2019 17:01:52 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 997716E223;
	Mon,  2 Dec 2019 16:01:50 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 78E026E221
 for <intel-gfx@lists.freedesktop.org>; Mon,  2 Dec 2019 16:01:49 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 02 Dec 2019 08:01:49 -0800
X-IronPort-AV: E=Sophos;i="5.69,268,1571727600"; d="scan'208";a="222474629"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga002-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 02 Dec 2019 08:01:47 -0800
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon,  2 Dec 2019 18:00:55 +0200
Message-Id: <933c79e962875a6568efd5f89df064ab89b35215.1575302334.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1575302334.git.jani.nikula@intel.com>
References: <cover.1575302334.git.jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH 07/10] drm/i915/gmbus: use intel de functions
 for forcewake register access
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TW92ZSBhd2F5IGZyb20gSTkxNV9SRUFEX0ZXKCkgYW5kIEk5MTVfV1JJVEVfRlcoKSBpbiBkaXNw
bGF5IGNvZGUsIGFuZApzd2l0Y2ggdG8gdXNpbmcgaW50ZWxfZGVfcmVhZF9mdygpIGFuZCBpbnRl
bF9kZV93cml0ZV9mdygpLApyZXNwZWN0aXZlbHkuIEFsc28gc3dpdGNoIEk5MTVfUkVBRCgpIGFu
ZCBJOTE1X1dSSVRFKCkgb3ZlciBpbiB0aGlzIGZpbGUKd2hpbGUgYXQgaXQuCgpObyBmdW5jdGlv
bmFsIGNoYW5nZXMuCgpTaWduZWQtb2ZmLWJ5OiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1bGFAaW50
ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZ21idXMuYyB8
IDc0ICsrKysrKysrKystLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAzNSBpbnNlcnRpb25z
KCspLCAzOSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2dtYnVzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2dtYnVzLmMKaW5kZXggM2Q0ZDE5YWMxZDE0Li41MDgzMDg1NTVkYzYgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZ21idXMuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2dtYnVzLmMKQEAgLTE0Myw4ICsxNDMsOCBAQCB0b19p
bnRlbF9nbWJ1cyhzdHJ1Y3QgaTJjX2FkYXB0ZXIgKmkyYykKIHZvaWQKIGludGVsX2dtYnVzX3Jl
c2V0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIHsKLQlJOTE1X1dSSVRFKEdN
QlVTMCwgMCk7Ci0JSTkxNV9XUklURShHTUJVUzQsIDApOworCWludGVsX2RlX3dyaXRlKGRldl9w
cml2LCBHTUJVUzAsIDApOworCWludGVsX2RlX3dyaXRlKGRldl9wcml2LCBHTUJVUzQsIDApOwog
fQogCiBzdGF0aWMgdm9pZCBwbnZfZ21idXNfY2xvY2tfZ2F0aW5nKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdiwKQEAgLTE1MywxMiArMTUzLDEyIEBAIHN0YXRpYyB2b2lkIHBudl9n
bWJ1c19jbG9ja19nYXRpbmcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCXUz
MiB2YWw7CiAKIAkvKiBXaGVuIHVzaW5nIGJpdCBiYXNoaW5nIGZvciBJMkMsIHRoaXMgYml0IG5l
ZWRzIHRvIGJlIHNldCB0byAxICovCi0JdmFsID0gSTkxNV9SRUFEKERTUENMS19HQVRFX0QpOwor
CXZhbCA9IGludGVsX2RlX3JlYWQoZGV2X3ByaXYsIERTUENMS19HQVRFX0QpOwogCWlmICghZW5h
YmxlKQogCQl2YWwgfD0gUE5WX0dNQlVTVU5JVF9DTE9DS19HQVRFX0RJU0FCTEU7CiAJZWxzZQog
CQl2YWwgJj0gflBOVl9HTUJVU1VOSVRfQ0xPQ0tfR0FURV9ESVNBQkxFOwotCUk5MTVfV1JJVEUo
RFNQQ0xLX0dBVEVfRCwgdmFsKTsKKwlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwgRFNQQ0xLX0dB
VEVfRCwgdmFsKTsKIH0KIAogc3RhdGljIHZvaWQgcGNoX2dtYnVzX2Nsb2NrX2dhdGluZyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCkBAIC0xNjYsMTIgKzE2NiwxMiBAQCBzdGF0
aWMgdm9pZCBwY2hfZ21idXNfY2xvY2tfZ2F0aW5nKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiwKIHsKIAl1MzIgdmFsOwogCi0JdmFsID0gSTkxNV9SRUFEKFNPVVRIX0RTUENMS19H
QVRFX0QpOworCXZhbCA9IGludGVsX2RlX3JlYWQoZGV2X3ByaXYsIFNPVVRIX0RTUENMS19HQVRF
X0QpOwogCWlmICghZW5hYmxlKQogCQl2YWwgfD0gUENIX0dNQlVTVU5JVF9DTE9DS19HQVRFX0RJ
U0FCTEU7CiAJZWxzZQogCQl2YWwgJj0gflBDSF9HTUJVU1VOSVRfQ0xPQ0tfR0FURV9ESVNBQkxF
OwotCUk5MTVfV1JJVEUoU09VVEhfRFNQQ0xLX0dBVEVfRCwgdmFsKTsKKwlpbnRlbF9kZV93cml0
ZShkZXZfcHJpdiwgU09VVEhfRFNQQ0xLX0dBVEVfRCwgdmFsKTsKIH0KIAogc3RhdGljIHZvaWQg
Ynh0X2dtYnVzX2Nsb2NrX2dhdGluZyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYs
CkBAIC0xNzksMTIgKzE3OSwxMiBAQCBzdGF0aWMgdm9pZCBieHRfZ21idXNfY2xvY2tfZ2F0aW5n
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIHsKIAl1MzIgdmFsOwogCi0JdmFs
ID0gSTkxNV9SRUFEKEdFTjlfQ0xLR0FURV9ESVNfNCk7CisJdmFsID0gaW50ZWxfZGVfcmVhZChk
ZXZfcHJpdiwgR0VOOV9DTEtHQVRFX0RJU180KTsKIAlpZiAoIWVuYWJsZSkKIAkJdmFsIHw9IEJY
VF9HTUJVU19HQVRJTkdfRElTOwogCWVsc2UKIAkJdmFsICY9IH5CWFRfR01CVVNfR0FUSU5HX0RJ
UzsKLQlJOTE1X1dSSVRFKEdFTjlfQ0xLR0FURV9ESVNfNCwgdmFsKTsKKwlpbnRlbF9kZV93cml0
ZShkZXZfcHJpdiwgR0VOOV9DTEtHQVRFX0RJU180LCB2YWwpOwogfQogCiBzdGF0aWMgdTMyIGdl
dF9yZXNlcnZlZChzdHJ1Y3QgaW50ZWxfZ21idXMgKmJ1cykKQEAgLTMzNywxNCArMzM3LDE2IEBA
IHN0YXRpYyBpbnQgZ21idXNfd2FpdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYs
IHUzMiBzdGF0dXMsIHUzMiBpcnFfZW4pCiAJCWlycV9lbiA9IDA7CiAKIAlhZGRfd2FpdF9xdWV1
ZSgmZGV2X3ByaXYtPmdtYnVzX3dhaXRfcXVldWUsICZ3YWl0KTsKLQlJOTE1X1dSSVRFX0ZXKEdN
QlVTNCwgaXJxX2VuKTsKKwlpbnRlbF9kZV93cml0ZV9mdyhkZXZfcHJpdiwgR01CVVM0LCBpcnFf
ZW4pOwogCiAJc3RhdHVzIHw9IEdNQlVTX1NBVE9FUjsKLQlyZXQgPSB3YWl0X2Zvcl91cygoZ21i
dXMyID0gSTkxNV9SRUFEX0ZXKEdNQlVTMikpICYgc3RhdHVzLCAyKTsKKwlyZXQgPSB3YWl0X2Zv
cl91cygoZ21idXMyID0gaW50ZWxfZGVfcmVhZF9mdyhkZXZfcHJpdiwgR01CVVMyKSkgJiBzdGF0
dXMsCisJCQkgIDIpOwogCWlmIChyZXQpCi0JCXJldCA9IHdhaXRfZm9yKChnbWJ1czIgPSBJOTE1
X1JFQURfRlcoR01CVVMyKSkgJiBzdGF0dXMsIDUwKTsKKwkJcmV0ID0gd2FpdF9mb3IoKGdtYnVz
MiA9IGludGVsX2RlX3JlYWRfZncoZGV2X3ByaXYsIEdNQlVTMikpICYgc3RhdHVzLAorCQkJICAg
ICAgIDUwKTsKIAotCUk5MTVfV1JJVEVfRlcoR01CVVM0LCAwKTsKKwlpbnRlbF9kZV93cml0ZV9m
dyhkZXZfcHJpdiwgR01CVVM0LCAwKTsKIAlyZW1vdmVfd2FpdF9xdWV1ZSgmZGV2X3ByaXYtPmdt
YnVzX3dhaXRfcXVldWUsICZ3YWl0KTsKIAogCWlmIChnbWJ1czIgJiBHTUJVU19TQVRPRVIpCkBA
IC0zNjYsMTMgKzM2OCwxMyBAQCBnbWJ1c193YWl0X2lkbGUoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2KQogCQlpcnFfZW5hYmxlID0gR01CVVNfSURMRV9FTjsKIAogCWFkZF93YWl0
X3F1ZXVlKCZkZXZfcHJpdi0+Z21idXNfd2FpdF9xdWV1ZSwgJndhaXQpOwotCUk5MTVfV1JJVEVf
RlcoR01CVVM0LCBpcnFfZW5hYmxlKTsKKwlpbnRlbF9kZV93cml0ZV9mdyhkZXZfcHJpdiwgR01C
VVM0LCBpcnFfZW5hYmxlKTsKIAogCXJldCA9IGludGVsX3dhaXRfZm9yX3JlZ2lzdGVyX2Z3KCZk
ZXZfcHJpdi0+dW5jb3JlLAogCQkJCQkgR01CVVMyLCBHTUJVU19BQ1RJVkUsIDAsCiAJCQkJCSAx
MCk7CiAKLQlJOTE1X1dSSVRFX0ZXKEdNQlVTNCwgMCk7CisJaW50ZWxfZGVfd3JpdGVfZncoZGV2
X3ByaXYsIEdNQlVTNCwgMCk7CiAJcmVtb3ZlX3dhaXRfcXVldWUoJmRldl9wcml2LT5nbWJ1c193
YWl0X3F1ZXVlLCAmd2FpdCk7CiAKIAlyZXR1cm4gcmV0OwpAQCAtNDA0LDE1ICs0MDYsMTIgQEAg
Z21idXNfeGZlcl9yZWFkX2NodW5rKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwK
IAkJCWxlbisrOwogCQl9CiAJCXNpemUgPSBsZW4gJSAyNTYgKyAyNTY7Ci0JCUk5MTVfV1JJVEVf
RlcoR01CVVMwLCBnbWJ1czBfcmVnIHwgR01CVVNfQllURV9DTlRfT1ZFUlJJREUpOworCQlpbnRl
bF9kZV93cml0ZV9mdyhkZXZfcHJpdiwgR01CVVMwLAorCQkJCSAgZ21idXMwX3JlZyB8IEdNQlVT
X0JZVEVfQ05UX09WRVJSSURFKTsKIAl9CiAKLQlJOTE1X1dSSVRFX0ZXKEdNQlVTMSwKLQkJICAg
ICAgZ21idXMxX2luZGV4IHwKLQkJICAgICAgR01CVVNfQ1lDTEVfV0FJVCB8Ci0JCSAgICAgIChz
aXplIDw8IEdNQlVTX0JZVEVfQ09VTlRfU0hJRlQpIHwKLQkJICAgICAgKGFkZHIgPDwgR01CVVNf
U0xBVkVfQUREUl9TSElGVCkgfAotCQkgICAgICBHTUJVU19TTEFWRV9SRUFEIHwgR01CVVNfU1df
UkRZKTsKKwlpbnRlbF9kZV93cml0ZV9mdyhkZXZfcHJpdiwgR01CVVMxLAorCQkJICBnbWJ1czFf
aW5kZXggfCBHTUJVU19DWUNMRV9XQUlUIHwgKHNpemUgPDwgR01CVVNfQllURV9DT1VOVF9TSElG
VCkgfCAoYWRkciA8PCBHTUJVU19TTEFWRV9BRERSX1NISUZUKSB8IEdNQlVTX1NMQVZFX1JFQUQg
fCBHTUJVU19TV19SRFkpOwogCXdoaWxlIChsZW4pIHsKIAkJaW50IHJldDsKIAkJdTMyIHZhbCwg
bG9vcCA9IDA7CkBAIC00MjEsNyArNDIwLDcgQEAgZ21idXNfeGZlcl9yZWFkX2NodW5rKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJaWYgKHJldCkKIAkJCXJldHVybiByZXQ7
CiAKLQkJdmFsID0gSTkxNV9SRUFEX0ZXKEdNQlVTMyk7CisJCXZhbCA9IGludGVsX2RlX3JlYWRf
ZncoZGV2X3ByaXYsIEdNQlVTMyk7CiAJCWRvIHsKIAkJCWlmIChleHRyYV9ieXRlX2FkZGVkICYm
IGxlbiA9PSAxKQogCQkJCWJyZWFrOwpAQCAtNDMyLDcgKzQzMSw3IEBAIGdtYnVzX3hmZXJfcmVh
ZF9jaHVuayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAKIAkJaWYgKGJ1cnN0
X3JlYWQgJiYgbGVuID09IHNpemUgLSA0KQogCQkJLyogUmVzZXQgdGhlIG92ZXJyaWRlIGJpdCAq
LwotCQkJSTkxNV9XUklURV9GVyhHTUJVUzAsIGdtYnVzMF9yZWcpOworCQkJaW50ZWxfZGVfd3Jp
dGVfZncoZGV2X3ByaXYsIEdNQlVTMCwgZ21idXMwX3JlZyk7CiAJfQogCiAJcmV0dXJuIDA7CkBA
IC00ODksMTIgKzQ4OCw5IEBAIGdtYnVzX3hmZXJfd3JpdGVfY2h1bmsoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2LAogCQlsZW4gLT0gMTsKIAl9CiAKLQlJOTE1X1dSSVRFX0ZXKEdN
QlVTMywgdmFsKTsKLQlJOTE1X1dSSVRFX0ZXKEdNQlVTMSwKLQkJICAgICAgZ21idXMxX2luZGV4
IHwgR01CVVNfQ1lDTEVfV0FJVCB8Ci0JCSAgICAgIChjaHVua19zaXplIDw8IEdNQlVTX0JZVEVf
Q09VTlRfU0hJRlQpIHwKLQkJICAgICAgKGFkZHIgPDwgR01CVVNfU0xBVkVfQUREUl9TSElGVCkg
fAotCQkgICAgICBHTUJVU19TTEFWRV9XUklURSB8IEdNQlVTX1NXX1JEWSk7CisJaW50ZWxfZGVf
d3JpdGVfZncoZGV2X3ByaXYsIEdNQlVTMywgdmFsKTsKKwlpbnRlbF9kZV93cml0ZV9mdyhkZXZf
cHJpdiwgR01CVVMxLAorCQkJICBnbWJ1czFfaW5kZXggfCBHTUJVU19DWUNMRV9XQUlUIHwgKGNo
dW5rX3NpemUgPDwgR01CVVNfQllURV9DT1VOVF9TSElGVCkgfCAoYWRkciA8PCBHTUJVU19TTEFW
RV9BRERSX1NISUZUKSB8IEdNQlVTX1NMQVZFX1dSSVRFIHwgR01CVVNfU1dfUkRZKTsKIAl3aGls
ZSAobGVuKSB7CiAJCWludCByZXQ7CiAKQEAgLTUwMyw3ICs0OTksNyBAQCBnbWJ1c194ZmVyX3dy
aXRlX2NodW5rKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJCXZhbCB8PSAq
YnVmKysgPDwgKDggKiBsb29wKTsKIAkJfSB3aGlsZSAoLS1sZW4gJiYgKytsb29wIDwgNCk7CiAK
LQkJSTkxNV9XUklURV9GVyhHTUJVUzMsIHZhbCk7CisJCWludGVsX2RlX3dyaXRlX2Z3KGRldl9w
cml2LCBHTUJVUzMsIHZhbCk7CiAKIAkJcmV0ID0gZ21idXNfd2FpdChkZXZfcHJpdiwgR01CVVNf
SFdfUkRZLCBHTUJVU19IV19SRFlfRU4pOwogCQlpZiAocmV0KQpAQCAtNTY4LDcgKzU2NCw3IEBA
IGdtYnVzX2luZGV4X3hmZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBzdHJ1
Y3QgaTJjX21zZyAqbXNncywKIAogCS8qIEdNQlVTNSBob2xkcyAxNi1iaXQgaW5kZXggKi8KIAlp
ZiAoZ21idXM1KQotCQlJOTE1X1dSSVRFX0ZXKEdNQlVTNSwgZ21idXM1KTsKKwkJaW50ZWxfZGVf
d3JpdGVfZncoZGV2X3ByaXYsIEdNQlVTNSwgZ21idXM1KTsKIAogCWlmIChtc2dzWzFdLmZsYWdz
ICYgSTJDX01fUkQpCiAJCXJldCA9IGdtYnVzX3hmZXJfcmVhZChkZXZfcHJpdiwgJm1zZ3NbMV0s
IGdtYnVzMF9yZWcsCkBAIC01NzgsNyArNTc0LDcgQEAgZ21idXNfaW5kZXhfeGZlcihzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIHN0cnVjdCBpMmNfbXNnICptc2dzLAogCiAJLyog
Q2xlYXIgR01CVVM1IGFmdGVyIGVhY2ggaW5kZXggdHJhbnNmZXIgKi8KIAlpZiAoZ21idXM1KQot
CQlJOTE1X1dSSVRFX0ZXKEdNQlVTNSwgMCk7CisJCWludGVsX2RlX3dyaXRlX2Z3KGRldl9wcml2
LCBHTUJVUzUsIDApOwogCiAJcmV0dXJuIHJldDsKIH0KQEAgLTYwMSw3ICs1OTcsNyBAQCBkb19n
bWJ1c194ZmVyKHN0cnVjdCBpMmNfYWRhcHRlciAqYWRhcHRlciwgc3RydWN0IGkyY19tc2cgKm1z
Z3MsIGludCBudW0sCiAJCXBjaF9nbWJ1c19jbG9ja19nYXRpbmcoZGV2X3ByaXYsIGZhbHNlKTsK
IAogcmV0cnk6Ci0JSTkxNV9XUklURV9GVyhHTUJVUzAsIGdtYnVzMF9zb3VyY2UgfCBidXMtPnJl
ZzApOworCWludGVsX2RlX3dyaXRlX2Z3KGRldl9wcml2LCBHTUJVUzAsIGdtYnVzMF9zb3VyY2Ug
fCBidXMtPnJlZzApOwogCiAJZm9yICg7IGkgPCBudW07IGkgKz0gaW5jKSB7CiAJCWluYyA9IDE7
CkBAIC02MjksNyArNjI1LDcgQEAgZG9fZ21idXNfeGZlcihzdHJ1Y3QgaTJjX2FkYXB0ZXIgKmFk
YXB0ZXIsIHN0cnVjdCBpMmNfbXNnICptc2dzLCBpbnQgbnVtLAogCSAqIGEgU1RPUCBvbiB0aGUg
dmVyeSBmaXJzdCBjeWNsZS4gVG8gc2ltcGxpZnkgdGhlIGNvZGUgd2UKIAkgKiB1bmNvbmRpdGlv
bmFsbHkgZ2VuZXJhdGUgdGhlIFNUT1AgY29uZGl0aW9uIHdpdGggYW4gYWRkaXRpb25hbCBnbWJ1
cwogCSAqIGN5Y2xlLiAqLwotCUk5MTVfV1JJVEVfRlcoR01CVVMxLCBHTUJVU19DWUNMRV9TVE9Q
IHwgR01CVVNfU1dfUkRZKTsKKwlpbnRlbF9kZV93cml0ZV9mdyhkZXZfcHJpdiwgR01CVVMxLCBH
TUJVU19DWUNMRV9TVE9QIHwgR01CVVNfU1dfUkRZKTsKIAogCS8qIE1hcmsgdGhlIEdNQlVTIGlu
dGVyZmFjZSBhcyBkaXNhYmxlZCBhZnRlciB3YWl0aW5nIGZvciBpZGxlLgogCSAqIFdlIHdpbGwg
cmUtZW5hYmxlIGl0IGF0IHRoZSBzdGFydCBvZiB0aGUgbmV4dCB4ZmVyLApAQCAtNjQwLDcgKzYz
Niw3IEBAIGRvX2dtYnVzX3hmZXIoc3RydWN0IGkyY19hZGFwdGVyICphZGFwdGVyLCBzdHJ1Y3Qg
aTJjX21zZyAqbXNncywgaW50IG51bSwKIAkJCSBhZGFwdGVyLT5uYW1lKTsKIAkJcmV0ID0gLUVU
SU1FRE9VVDsKIAl9Ci0JSTkxNV9XUklURV9GVyhHTUJVUzAsIDApOworCWludGVsX2RlX3dyaXRl
X2Z3KGRldl9wcml2LCBHTUJVUzAsIDApOwogCXJldCA9IHJldCA/OiBpOwogCWdvdG8gb3V0Owog
CkBAIC02NjksOSArNjY1LDkgQEAgZG9fZ21idXNfeGZlcihzdHJ1Y3QgaTJjX2FkYXB0ZXIgKmFk
YXB0ZXIsIHN0cnVjdCBpMmNfbXNnICptc2dzLCBpbnQgbnVtLAogCSAqIG9mIHJlc2V0dGluZyB0
aGUgR01CVVMgY29udHJvbGxlciBhbmQgc28gY2xlYXJpbmcgdGhlCiAJICogQlVTX0VSUk9SIHJh
aXNlZCBieSB0aGUgc2xhdmUncyBOQUsuCiAJICovCi0JSTkxNV9XUklURV9GVyhHTUJVUzEsIEdN
QlVTX1NXX0NMUl9JTlQpOwotCUk5MTVfV1JJVEVfRlcoR01CVVMxLCAwKTsKLQlJOTE1X1dSSVRF
X0ZXKEdNQlVTMCwgMCk7CisJaW50ZWxfZGVfd3JpdGVfZncoZGV2X3ByaXYsIEdNQlVTMSwgR01C
VVNfU1dfQ0xSX0lOVCk7CisJaW50ZWxfZGVfd3JpdGVfZncoZGV2X3ByaXYsIEdNQlVTMSwgMCk7
CisJaW50ZWxfZGVfd3JpdGVfZncoZGV2X3ByaXYsIEdNQlVTMCwgMCk7CiAKIAlEUk1fREVCVUdf
S01TKCJHTUJVUyBbJXNdIE5BSyBmb3IgYWRkcjogJTA0eCAlYyglZClcbiIsCiAJCQkgYWRhcHRl
ci0+bmFtZSwgbXNnc1tpXS5hZGRyLApAQCAtNjk0LDcgKzY5MCw3IEBAIGRvX2dtYnVzX3hmZXIo
c3RydWN0IGkyY19hZGFwdGVyICphZGFwdGVyLCBzdHJ1Y3QgaTJjX21zZyAqbXNncywgaW50IG51
bSwKIHRpbWVvdXQ6CiAJRFJNX0RFQlVHX0tNUygiR01CVVMgWyVzXSB0aW1lZCBvdXQsIGZhbGxp
bmcgYmFjayB0byBiaXQgYmFuZ2luZyBvbiBwaW4gJWRcbiIsCiAJCSAgICAgIGJ1cy0+YWRhcHRl
ci5uYW1lLCBidXMtPnJlZzAgJiAweGZmKTsKLQlJOTE1X1dSSVRFX0ZXKEdNQlVTMCwgMCk7CisJ
aW50ZWxfZGVfd3JpdGVfZncoZGV2X3ByaXYsIEdNQlVTMCwgMCk7CiAKIAkvKgogCSAqIEhhcmR3
YXJlIG1heSBub3Qgc3VwcG9ydCBHTUJVUyBvdmVyIHRoZXNlIHBpbnM/IFRyeSBHUElPIGJpdGJh
bmdpbmcKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0
b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50
ZWwtZ2Z4

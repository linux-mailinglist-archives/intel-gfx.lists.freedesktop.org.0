Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DB1723ACACE
	for <lists+intel-gfx@lfdr.de>; Fri, 18 Jun 2021 14:28:34 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4A5A16E9FA;
	Fri, 18 Jun 2021 12:28:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6EB436E9FA
 for <intel-gfx@lists.freedesktop.org>; Fri, 18 Jun 2021 12:28:32 +0000 (UTC)
IronPort-SDR: kv6MV1niwIUm4H357XUD5WlY8DS3VFkPAEbiR29aCNAafLP+o/OMw0h3p+lljGWQI0VNrtDLM2
 k8dEBQeDrTUA==
X-IronPort-AV: E=McAfee;i="6200,9189,10018"; a="206363657"
X-IronPort-AV: E=Sophos;i="5.83,283,1616482800"; d="scan'208";a="206363657"
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by fmsmga103.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 18 Jun 2021 05:28:31 -0700
IronPort-SDR: 7GUNcra1Kfz0EXMUtzeT5CsOgTn+99VujXZ139MCimrBOQgGGr/wNGJcMbI7O2N7wN09Dp6Qax
 WLrTKRkQ6HGw==
X-IronPort-AV: E=Sophos;i="5.83,283,1616482800"; d="scan'208";a="485667755"
Received: from shoriyac-mobl.ger.corp.intel.com (HELO localhost)
 ([10.252.36.148])
 by orsmga001-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 18 Jun 2021 05:28:29 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: Ville Syrjala <ville.syrjala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
In-Reply-To: <20210608073603.2408-13-ville.syrjala@linux.intel.com>
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
References: <20210608073603.2408-1-ville.syrjala@linux.intel.com>
 <20210608073603.2408-13-ville.syrjala@linux.intel.com>
Date: Fri, 18 Jun 2021 15:28:25 +0300
Message-ID: <871r8zwe52.fsf@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH v2 12/17] drm/i915: Fix dg1 buf trans tables
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVHVlLCAwOCBKdW4gMjAyMSwgVmlsbGUgU3lyamFsYSA8dmlsbGUuc3lyamFsYUBsaW51eC5p
bnRlbC5jb20+IHdyb3RlOgo+IEZyb206IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBs
aW51eC5pbnRlbC5jb20+Cj4KPiBGb3Igc29tZSByZWFzb24gdGhlIGRnMSBidWYgdHJhbnMgdGFi
bGVzIGhhdmUgYmVlbiBzdHVmZmVkIGludG8KPiBpY2xfZ2V0X2NvbWJvX2J1Zl90cmFuc19lZHAo
KSB3aGljaCBkb2Vzbid0IGV2ZW4gZ2V0IGNhbGxlZAo+IG9uIGRnMS4gU3BsaXQgdGhlbSBvdXQg
aW50byBhIHByb3BlciBkZzEgc3BlY2lmaWMgZnVuY3Rpb24sCj4gYW5kIGFsc28gbWFrZSBzdXJl
IHdlIHVzZSB0aGUgcHJvcGVyIGJ1ZiB0cmFucyB0YWJsZXMgZm9yCj4gRFAgYXMgd2VsbCBhcyBl
RFAuCj4KPiB2MjogQWRkIHRoZSBob2JsIHN0dWZmCj4KPiBSZXZpZXdlZC1ieTogSmFuaSBOaWt1
bGEgPGphbmkubmlrdWxhQGludGVsLmNvbT4KCkhvbGRzIGZvciB2Mi4KCj4gU2lnbmVkLW9mZi1i
eTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KPiAtLS0K
PiAgLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5jICAgIHwgNTUgKysr
KysrKysrKysrKysrKystLQo+ICAxIGZpbGUgY2hhbmdlZCwgNDkgaW5zZXJ0aW9ucygrKSwgNiBk
ZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2RkaV9idWZfdHJhbnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGRpX2J1Zl90cmFucy5jCj4gaW5kZXggZmNiNjdkZWI0NmRkLi41MmJjNmNiZTM2Y2YgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGlfYnVmX3Ry
YW5zLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaV9idWZf
dHJhbnMuYwo+IEBAIC0xMzI1LDEyICsxMzI1LDYgQEAgaWNsX2dldF9jb21ib19idWZfdHJhbnNf
ZWRwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAo+ICAJfSBlbHNlIGlmIChkZXZfcHJp
di0+dmJ0LmVkcC5sb3dfdnN3aW5nKSB7Cj4gIAkJcmV0dXJuIGludGVsX2dldF9idWZfdHJhbnMo
JmljbF9jb21ib19waHlfZGRpX3RyYW5zbGF0aW9uc19lZHBfaGJyMiwKPiAgCQkJCQkgICBuX2Vu
dHJpZXMpOwo+IC0JfSBlbHNlIGlmIChJU19ERzEoZGV2X3ByaXYpICYmIGNydGNfc3RhdGUtPnBv
cnRfY2xvY2sgPiAyNzAwMDApIHsKPiAtCQlyZXR1cm4gaW50ZWxfZ2V0X2J1Zl90cmFucygmZGcx
X2NvbWJvX3BoeV9kZGlfdHJhbnNsYXRpb25zX2RwX2hicjJfaGJyMywKPiAtCQkJCQkgICBuX2Vu
dHJpZXMpOwo+IC0JfSBlbHNlIGlmIChJU19ERzEoZGV2X3ByaXYpKSB7Cj4gLQkJcmV0dXJuIGlu
dGVsX2dldF9idWZfdHJhbnMoJmRnMV9jb21ib19waHlfZGRpX3RyYW5zbGF0aW9uc19kcF9yYnJf
aGJyLAo+IC0JCQkJCSAgIG5fZW50cmllcyk7Cj4gIAl9Cj4gIAo+ICAJcmV0dXJuIGljbF9nZXRf
Y29tYm9fYnVmX3RyYW5zX2RwKGVuY29kZXIsIGNydGNfc3RhdGUsIG5fZW50cmllcyk7Cj4gQEAg
LTE1NDUsNiArMTUzOSw1MyBAQCB0Z2xfZ2V0X2NvbWJvX2J1Zl90cmFucyhzdHJ1Y3QgaW50ZWxf
ZW5jb2RlciAqZW5jb2RlciwKPiAgCQlyZXR1cm4gdGdsX2dldF9jb21ib19idWZfdHJhbnNfZHAo
ZW5jb2RlciwgY3J0Y19zdGF0ZSwgbl9lbnRyaWVzKTsKPiAgfQo+ICAKPiArc3RhdGljIGNvbnN0
IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKPiArZGcxX2dldF9jb21ib19idWZfdHJhbnNf
ZHAoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCj4gKwkJCSAgIGNvbnN0IHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+ICsJCQkgICBpbnQgKm5fZW50cmllcykKPiAr
ewo+ICsJaWYgKGNydGNfc3RhdGUtPnBvcnRfY2xvY2sgPiAyNzAwMDApCj4gKwkJcmV0dXJuIGlu
dGVsX2dldF9idWZfdHJhbnMoJmRnMV9jb21ib19waHlfZGRpX3RyYW5zbGF0aW9uc19kcF9oYnIy
X2hicjMsCj4gKwkJCQkJICAgbl9lbnRyaWVzKTsKPiArCWVsc2UKPiArCQlyZXR1cm4gaW50ZWxf
Z2V0X2J1Zl90cmFucygmZGcxX2NvbWJvX3BoeV9kZGlfdHJhbnNsYXRpb25zX2RwX3Jicl9oYnIs
Cj4gKwkJCQkJICAgbl9lbnRyaWVzKTsKPiArfQo+ICsKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBp
bnRlbF9kZGlfYnVmX3RyYW5zICoKPiArZGcxX2dldF9jb21ib19idWZfdHJhbnNfZWRwKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAo+ICsJCQkgICAgY29uc3Qgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUsCj4gKwkJCSAgICBpbnQgKm5fZW50cmllcykKPiArewo+ICsJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNl
LmRldik7Cj4gKwlzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwID0gZW5jX3RvX2ludGVsX2RwKGVu
Y29kZXIpOwo+ICsKPiArCWlmIChjcnRjX3N0YXRlLT5wb3J0X2Nsb2NrID4gNTQwMDAwKQo+ICsJ
CXJldHVybiBpbnRlbF9nZXRfYnVmX3RyYW5zKCZpY2xfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlv
bnNfZWRwX2hicjMsCj4gKwkJCQkJICAgbl9lbnRyaWVzKTsKPiArCWVsc2UgaWYgKGRldl9wcml2
LT52YnQuZWRwLmhvYmwgJiYgIWludGVsX2RwLT5ob2JsX2ZhaWxlZCkKPiArCQlyZXR1cm4gaW50
ZWxfZ2V0X2J1Zl90cmFucygmdGdsX2NvbWJvX3BoeV9kZGlfdHJhbnNsYXRpb25zX2VkcF9oYnIy
X2hvYmwsCj4gKwkJCQkJICAgbl9lbnRyaWVzKTsKPiArCWVsc2UgaWYgKGRldl9wcml2LT52YnQu
ZWRwLmxvd192c3dpbmcpCj4gKwkJcmV0dXJuIGludGVsX2dldF9idWZfdHJhbnMoJmljbF9jb21i
b19waHlfZGRpX3RyYW5zbGF0aW9uc19lZHBfaGJyMiwKPiArCQkJCQkgICBuX2VudHJpZXMpOwo+
ICsJZWxzZQo+ICsJCXJldHVybiBkZzFfZ2V0X2NvbWJvX2J1Zl90cmFuc19kcChlbmNvZGVyLCBj
cnRjX3N0YXRlLCBuX2VudHJpZXMpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IGlu
dGVsX2RkaV9idWZfdHJhbnMgKgo+ICtkZzFfZ2V0X2NvbWJvX2J1Zl90cmFucyhzdHJ1Y3QgaW50
ZWxfZW5jb2RlciAqZW5jb2RlciwKPiArCQkJY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUg
KmNydGNfc3RhdGUsCj4gKwkJCWludCAqbl9lbnRyaWVzKQo+ICt7Cj4gKwlpZiAoaW50ZWxfY3J0
Y19oYXNfdHlwZShjcnRjX3N0YXRlLCBJTlRFTF9PVVRQVVRfSERNSSkpCj4gKwkJcmV0dXJuIGlj
bF9nZXRfY29tYm9fYnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgY3J0Y19zdGF0ZSwgbl9lbnRyaWVz
KTsKPiArCWVsc2UgaWYgKGludGVsX2NydGNfaGFzX3R5cGUoY3J0Y19zdGF0ZSwgSU5URUxfT1VU
UFVUX0VEUCkpCj4gKwkJcmV0dXJuIGRnMV9nZXRfY29tYm9fYnVmX3RyYW5zX2VkcChlbmNvZGVy
LCBjcnRjX3N0YXRlLCBuX2VudHJpZXMpOwo+ICsJZWxzZQo+ICsJCXJldHVybiBkZzFfZ2V0X2Nv
bWJvX2J1Zl90cmFuc19kcChlbmNvZGVyLCBjcnRjX3N0YXRlLCBuX2VudHJpZXMpOwo+ICt9Cj4g
Kwo+ICBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgo+ICBya2xfZ2V0
X2NvbWJvX2J1Zl90cmFuc19kcChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKPiAgCQkJ
ICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCj4gQEAgLTE2ODIs
NiArMTcyMyw4IEBAIHZvaWQgaW50ZWxfZGRpX2J1Zl90cmFuc19pbml0KHN0cnVjdCBpbnRlbF9l
bmNvZGVyICplbmNvZGVyKQo+ICAJCQllbmNvZGVyLT5nZXRfYnVmX3RyYW5zID0gYWRscF9nZXRf
ZGtsX2J1Zl90cmFuczsKPiAgCX0gZWxzZSBpZiAoSVNfUk9DS0VUTEFLRShpOTE1KSkgewo+ICAJ
CWVuY29kZXItPmdldF9idWZfdHJhbnMgPSBya2xfZ2V0X2NvbWJvX2J1Zl90cmFuczsKPiArCX0g
ZWxzZSBpZiAoSVNfREcxKGk5MTUpKSB7Cj4gKwkJZW5jb2Rlci0+Z2V0X2J1Zl90cmFucyA9IGRn
MV9nZXRfY29tYm9fYnVmX3RyYW5zOwo+ICAJfSBlbHNlIGlmIChESVNQTEFZX1ZFUihpOTE1KSA+
PSAxMikgewo+ICAJCWlmIChpbnRlbF9waHlfaXNfY29tYm8oaTkxNSwgcGh5KSkKPiAgCQkJZW5j
b2Rlci0+Z2V0X2J1Zl90cmFucyA9IHRnbF9nZXRfY29tYm9fYnVmX3RyYW5zOwoKLS0gCkphbmkg
TmlrdWxhLCBJbnRlbCBPcGVuIFNvdXJjZSBHcmFwaGljcyBDZW50ZXIKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJ
bnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

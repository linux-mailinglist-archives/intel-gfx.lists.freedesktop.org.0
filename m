Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 812FF177D84
	for <lists+intel-gfx@lfdr.de>; Tue,  3 Mar 2020 18:33:23 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E0D036E926;
	Tue,  3 Mar 2020 17:33:20 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 183E76E926
 for <intel-gfx@lists.freedesktop.org>; Tue,  3 Mar 2020 17:33:20 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 03 Mar 2020 09:33:19 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,511,1574150400"; d="scan'208";a="258446775"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga002.jf.intel.com with SMTP; 03 Mar 2020 09:33:17 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Tue, 03 Mar 2020 19:33:16 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  3 Mar 2020 19:33:05 +0200
Message-Id: <20200303173313.28117-2-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200303173313.28117-1-ville.syrjala@linux.intel.com>
References: <20200303173313.28117-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 1/9] drm/i915: Polish CHV CGM CSC loading
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCk9u
bHkgbG9hZCB0aGUgQ0dNIENTQyBiYXNlZCBvbiB0aGUgY2dtX21vZGUgYml0IGxpa2Ugd2UKZG8g
d2l0aCB0aGUgZ2FtbWEvZGVnYW1tYSBMVVRzLiBBbmQgbWFrZSB0aGUgZnVuY3Rpb24KbmFtaW5n
IGFuZCBhcmd1bWVudHMgY29uc2lzdGVudCBhcyB3ZWxsLgoKVE9ETzogdGhlIGNvZGUgdG8gY29u
dmVydCB0aGUgY29lZmZpY2llbnRzIGxvb2sgdG90YWxseQpib2d1cy4gSUlSQyBDSFYgdXNlcyB0
d28ncyBjb21wbGVtZW50IGZvcm1hdCBidXQgdGhlIGNvZGUKY2VydGFpbmx5IGRvZXNuJ3QgZ2Vu
ZXJhdGUgdGhhdCwgc28gcHJvYmFibHkgbmVnYXRpdmUKY29lZmZpY2llbnRzIGFyZSB0b3RhbGx5
IGJ1c3RlZC4KClNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBs
aW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9j
b2xvci5jIHwgNjkgKysrKysrKysrKystLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDM1IGlu
c2VydGlvbnMoKyksIDM0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfY29sb3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfY29sb3IuYwppbmRleCA5OGFlZmVlYmRhMjguLjQ0NDk4MGZkZWRhNiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jb2xvci5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY29sb3IuYwpAQCAtMzQ4LDQ4ICszNDgs
NDMgQEAgc3RhdGljIHZvaWQgaWNsX2xvYWRfY3NjX21hdHJpeChjb25zdCBzdHJ1Y3QgaW50ZWxf
Y3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKIAkJICAgICAgIGNydGNfc3RhdGUtPmNzY19tb2RlKTsK
IH0KIAotLyoKLSAqIFNldCB1cCB0aGUgcGlwZSBDU0MgdW5pdCBvbiBDaGVycnlWaWV3LgotICov
Ci1zdGF0aWMgdm9pZCBjaGVycnl2aWV3X2xvYWRfY3NjX21hdHJpeChjb25zdCBzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKK3N0YXRpYyB2b2lkIGNodl9sb2FkX2NnbV9jc2Mo
c3RydWN0IGludGVsX2NydGMgKmNydGMsCisJCQkgICAgIGNvbnN0IHN0cnVjdCBkcm1fcHJvcGVy
dHlfYmxvYiAqYmxvYikKIHsKLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2Ny
dGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKTsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYgPSB0b19pOTE1KGNydGMtPmJhc2UuZGV2KTsKKwljb25zdCBzdHJ1Y3QgZHJtX2NvbG9y
X2N0bSAqY3RtID0gYmxvYi0+ZGF0YTsKIAllbnVtIHBpcGUgcGlwZSA9IGNydGMtPnBpcGU7CisJ
dTE2IGNvZWZmc1s5XTsKKwlpbnQgaTsKIAotCWlmIChjcnRjX3N0YXRlLT5ody5jdG0pIHsKLQkJ
Y29uc3Qgc3RydWN0IGRybV9jb2xvcl9jdG0gKmN0bSA9IGNydGNfc3RhdGUtPmh3LmN0bS0+ZGF0
YTsKLQkJdTE2IGNvZWZmc1s5XSA9IHt9OwotCQlpbnQgaTsKKwlmb3IgKGkgPSAwOyBpIDwgQVJS
QVlfU0laRShjb2VmZnMpOyBpKyspIHsKKwkJdTY0IGFic19jb2VmZiA9ICgoMVVMTCA8PCA2Mykg
LSAxKSAmIGN0bS0+bWF0cml4W2ldOwogCi0JCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGNv
ZWZmcyk7IGkrKykgewotCQkJdTY0IGFic19jb2VmZiA9Ci0JCQkJKCgxVUxMIDw8IDYzKSAtIDEp
ICYgY3RtLT5tYXRyaXhbaV07CisJCS8qIFJvdW5kIGNvZWZmaWNpZW50LiAqLworCQlhYnNfY29l
ZmYgKz0gMSA8PCAoMzIgLSAxMyk7CisJCS8qIENsYW1wIHRvIGhhcmR3YXJlIGxpbWl0cy4gKi8K
KwkJYWJzX2NvZWZmID0gY2xhbXBfdmFsKGFic19jb2VmZiwgMCwgQ1RNX0NPRUZGXzhfMCAtIDEp
OwogCi0JCQkvKiBSb3VuZCBjb2VmZmljaWVudC4gKi8KLQkJCWFic19jb2VmZiArPSAxIDw8ICgz
MiAtIDEzKTsKLQkJCS8qIENsYW1wIHRvIGhhcmR3YXJlIGxpbWl0cy4gKi8KLQkJCWFic19jb2Vm
ZiA9IGNsYW1wX3ZhbChhYnNfY29lZmYsIDAsIENUTV9DT0VGRl84XzAgLSAxKTsKKwkJY29lZmZz
W2ldID0gMDsKIAotCQkJLyogV3JpdGUgY29lZmZpY2llbnRzIGluIFMzLjEyIGZvcm1hdC4gKi8K
LQkJCWlmIChjdG0tPm1hdHJpeFtpXSAmICgxVUxMIDw8IDYzKSkKLQkJCQljb2VmZnNbaV0gPSAx
IDw8IDE1OwotCQkJY29lZmZzW2ldIHw9ICgoYWJzX2NvZWZmID4+IDMyKSAmIDcpIDw8IDEyOwot
CQkJY29lZmZzW2ldIHw9IChhYnNfY29lZmYgPj4gMjApICYgMHhmZmY7Ci0JCX0KKwkJLyogV3Jp
dGUgY29lZmZpY2llbnRzIGluIFMzLjEyIGZvcm1hdC4gKi8KKwkJaWYgKGN0bS0+bWF0cml4W2ld
ICYgKDFVTEwgPDwgNjMpKQorCQkJY29lZmZzW2ldIHw9IDEgPDwgMTU7CiAKLQkJaW50ZWxfZGVf
d3JpdGUoZGV2X3ByaXYsIENHTV9QSVBFX0NTQ19DT0VGRjAxKHBpcGUpLAotCQkJICAgICAgIGNv
ZWZmc1sxXSA8PCAxNiB8IGNvZWZmc1swXSk7Ci0JCWludGVsX2RlX3dyaXRlKGRldl9wcml2LCBD
R01fUElQRV9DU0NfQ09FRkYyMyhwaXBlKSwKLQkJCSAgICAgICBjb2VmZnNbM10gPDwgMTYgfCBj
b2VmZnNbMl0pOwotCQlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwgQ0dNX1BJUEVfQ1NDX0NPRUZG
NDUocGlwZSksCi0JCQkgICAgICAgY29lZmZzWzVdIDw8IDE2IHwgY29lZmZzWzRdKTsKLQkJaW50
ZWxfZGVfd3JpdGUoZGV2X3ByaXYsIENHTV9QSVBFX0NTQ19DT0VGRjY3KHBpcGUpLAotCQkJICAg
ICAgIGNvZWZmc1s3XSA8PCAxNiB8IGNvZWZmc1s2XSk7Ci0JCWludGVsX2RlX3dyaXRlKGRldl9w
cml2LCBDR01fUElQRV9DU0NfQ09FRkY4KHBpcGUpLCBjb2VmZnNbOF0pOworCQljb2VmZnNbaV0g
fD0gKChhYnNfY29lZmYgPj4gMzIpICYgNykgPDwgMTI7CisJCWNvZWZmc1tpXSB8PSAoYWJzX2Nv
ZWZmID4+IDIwKSAmIDB4ZmZmOwogCX0KIAotCWludGVsX2RlX3dyaXRlKGRldl9wcml2LCBDR01f
UElQRV9NT0RFKHBpcGUpLCBjcnRjX3N0YXRlLT5jZ21fbW9kZSk7CisJaW50ZWxfZGVfd3JpdGUo
ZGV2X3ByaXYsIENHTV9QSVBFX0NTQ19DT0VGRjAxKHBpcGUpLAorCQkgICAgICAgY29lZmZzWzFd
IDw8IDE2IHwgY29lZmZzWzBdKTsKKwlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwgQ0dNX1BJUEVf
Q1NDX0NPRUZGMjMocGlwZSksCisJCSAgICAgICBjb2VmZnNbM10gPDwgMTYgfCBjb2VmZnNbMl0p
OworCWludGVsX2RlX3dyaXRlKGRldl9wcml2LCBDR01fUElQRV9DU0NfQ09FRkY0NShwaXBlKSwK
KwkJICAgICAgIGNvZWZmc1s1XSA8PCAxNiB8IGNvZWZmc1s0XSk7CisJaW50ZWxfZGVfd3JpdGUo
ZGV2X3ByaXYsIENHTV9QSVBFX0NTQ19DT0VGRjY3KHBpcGUpLAorCQkgICAgICAgY29lZmZzWzdd
IDw8IDE2IHwgY29lZmZzWzZdKTsKKwlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwgQ0dNX1BJUEVf
Q1NDX0NPRUZGOChwaXBlKSwKKwkJICAgICAgIGNvZWZmc1s4XSk7CiB9CiAKIHN0YXRpYyB1MzIg
aTl4eF9sdXRfOChjb25zdCBzdHJ1Y3QgZHJtX2NvbG9yX2x1dCAqY29sb3IpCkBAIC0xMDIwLDEw
ICsxMDE1LDEzIEBAIHN0YXRpYyB2b2lkIGNodl9sb2FkX2NnbV9nYW1tYShzdHJ1Y3QgaW50ZWxf
Y3J0YyAqY3J0YywKIHN0YXRpYyB2b2lkIGNodl9sb2FkX2x1dHMoY29uc3Qgc3RydWN0IGludGVs
X2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiB7CiAJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0
b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7Ci0JY29uc3Qgc3RydWN0IGRybV9w
cm9wZXJ0eV9ibG9iICpnYW1tYV9sdXQgPSBjcnRjX3N0YXRlLT5ody5nYW1tYV9sdXQ7CisJc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShjcnRjLT5iYXNlLmRldik7
CiAJY29uc3Qgc3RydWN0IGRybV9wcm9wZXJ0eV9ibG9iICpkZWdhbW1hX2x1dCA9IGNydGNfc3Rh
dGUtPmh3LmRlZ2FtbWFfbHV0OworCWNvbnN0IHN0cnVjdCBkcm1fcHJvcGVydHlfYmxvYiAqZ2Ft
bWFfbHV0ID0gY3J0Y19zdGF0ZS0+aHcuZ2FtbWFfbHV0OworCWNvbnN0IHN0cnVjdCBkcm1fcHJv
cGVydHlfYmxvYiAqY3RtID0gY3J0Y19zdGF0ZS0+aHcuY3RtOwogCi0JY2hlcnJ5dmlld19sb2Fk
X2NzY19tYXRyaXgoY3J0Y19zdGF0ZSk7CisJaWYgKGNydGNfc3RhdGUtPmNnbV9tb2RlICYgQ0dN
X1BJUEVfTU9ERV9DU0MpCisJCWNodl9sb2FkX2NnbV9jc2MoY3J0YywgY3RtKTsKIAogCWlmIChj
cnRjX3N0YXRlLT5jZ21fbW9kZSAmIENHTV9QSVBFX01PREVfREVHQU1NQSkKIAkJY2h2X2xvYWRf
Y2dtX2RlZ2FtbWEoY3J0YywgZGVnYW1tYV9sdXQpOwpAQCAtMTAzMiw2ICsxMDMwLDkgQEAgc3Rh
dGljIHZvaWQgY2h2X2xvYWRfbHV0cyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0
Y19zdGF0ZSkKIAkJY2h2X2xvYWRfY2dtX2dhbW1hKGNydGMsIGdhbW1hX2x1dCk7CiAJZWxzZQog
CQlpOTY1X2xvYWRfbHV0cyhjcnRjX3N0YXRlKTsKKworCWludGVsX2RlX3dyaXRlKGRldl9wcml2
LCBDR01fUElQRV9NT0RFKGNydGMtPnBpcGUpLAorCQkgICAgICAgY3J0Y19zdGF0ZS0+Y2dtX21v
ZGUpOwogfQogCiB2b2lkIGludGVsX2NvbG9yX2xvYWRfbHV0cyhjb25zdCBzdHJ1Y3QgaW50ZWxf
Y3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKLS0gCjIuMjQuMQoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

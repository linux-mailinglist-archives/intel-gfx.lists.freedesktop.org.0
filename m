Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CD2E5DC54F
	for <lists+intel-gfx@lfdr.de>; Fri, 18 Oct 2019 14:48:57 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 33D8D6EB3F;
	Fri, 18 Oct 2019 12:48:56 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C6C426E128
 for <intel-gfx@lists.freedesktop.org>; Fri, 18 Oct 2019 12:48:54 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18882362-1500050 
 for multiple; Fri, 18 Oct 2019 13:48:42 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 18 Oct 2019 13:48:40 +0100
Message-Id: <20191018124840.30977-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915: Split memory_region initialisation
 into its own file
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UHVsbCB0aGUgbWVtb3J5IHJlZ2lvbiBib29ra2VlcGluZyBpbnRvIGl0cyBmaWxlLiBMZXQncyBz
dGFydCBjbGVhbiBhbmQKc2VlIGhvdyBsb25nIGl0IGxhc3RzIQoKU2lnbmVkLW9mZi1ieTogQ2hy
aXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CkNjOiBNYXR0aGV3IEF1bGQgPG1h
dHRoZXcuYXVsZEBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUg
ICAgICAgICAgICAgICAgIHwgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyAg
ICAgICAgICAgICAgIHwgMTUgKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2Lmgg
ICAgICAgICAgICAgICB8ICAzIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5j
ICAgICAgICAgICB8IDYzIC0tLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfbWVtb3J5X3JlZ2lvbnMuYyAgICB8IDYxICsrKysrKysrKysrKysrKysrKwogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9tZW1vcnlfcmVnaW9ucy5oICAgIHwgMTQgKysrKysKIC4uLi9n
cHUvZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tfZ2VtX2RldmljZS5jICB8ICA5ICsrLQogNyBmaWxl
cyBjaGFuZ2VkLCA5MiBpbnNlcnRpb25zKCspLCA3NCBkZWxldGlvbnMoLSkKIGNyZWF0ZSBtb2Rl
IDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X21lbW9yeV9yZWdpb25zLmMKIGNyZWF0
ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X21lbW9yeV9yZWdpb25zLmgK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L01ha2VmaWxlCmluZGV4IGU3OTFkOTMyM2I1MS4uYmY0OTVhOWMwOTM5IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9NYWtlZmlsZQpAQCAtMTQxLDYgKzE0MSw3IEBAIGk5MTUteSArPSBcCiAJICBpOTE1
X2dlbV9ndHQubyBcCiAJICBpOTE1X2dlbS5vIFwKIAkgIGk5MTVfZ2xvYmFscy5vIFwKKwkgIGk5
MTVfbWVtb3J5X3JlZ2lvbnMubyBcCiAJICBpOTE1X3F1ZXJ5Lm8gXAogCSAgaTkxNV9yZXF1ZXN0
Lm8gXAogCSAgaTkxNV9zY2hlZHVsZXIubyBcCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwppbmRleCA4
NzM2MTUzNmM2ZjAuLmM2MjMwMmU3ZjRjZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCkBAIC02
OCw2ICs2OCw3IEBACiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJpOTE1X2lycS5o
IgogI2luY2x1ZGUgImk5MTVfbWVtY3B5LmgiCisjaW5jbHVkZSAiaTkxNV9tZW1vcnlfcmVnaW9u
cy5oIgogI2luY2x1ZGUgImk5MTVfcGVyZi5oIgogI2luY2x1ZGUgImk5MTVfcXVlcnkuaCIKICNp
bmNsdWRlICJpOTE1X3N1c3BlbmQuaCIKQEAgLTExNzAsMTIgKzExNzEsMTYgQEAgc3RhdGljIGlu
dCBpOTE1X2RyaXZlcl9od19wcm9iZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYp
CiAJaWYgKHJldCkKIAkJZ290byBlcnJfZ2d0dDsKIAorCXJldCA9IGk5MTVfbWVtb3J5X3JlZ2lv
bnNfaHdfcHJvYmUoZGV2X3ByaXYpOworCWlmIChyZXQpCisJCWdvdG8gZXJyX2dndHQ7CisKIAlp
bnRlbF9ndF9pbml0X2h3X2Vhcmx5KGRldl9wcml2KTsKIAogCXJldCA9IGk5MTVfZ2d0dF9lbmFi
bGVfaHcoZGV2X3ByaXYpOwogCWlmIChyZXQpIHsKIAkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gZW5h
YmxlIEdHVFRcbiIpOwotCQlnb3RvIGVycl9nZ3R0OworCQlnb3RvIGVycl9tZW1fcmVnaW9uczsK
IAl9CiAKIAlwY2lfc2V0X21hc3RlcihwZGV2KTsKQEAgLTExOTIsNyArMTE5Nyw3IEBAIHN0YXRp
YyBpbnQgaTkxNV9kcml2ZXJfaHdfcHJvYmUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2KQogCQlpZiAocmV0KSB7CiAJCQlEUk1fRVJST1IoImZhaWxlZCB0byBzZXQgRE1BIG1hc2tc
biIpOwogCi0JCQlnb3RvIGVycl9nZ3R0OworCQkJZ290byBlcnJfbWVtX3JlZ2lvbnM7CiAJCX0K
IAl9CiAKQEAgLTEyMTAsNyArMTIxNSw3IEBAIHN0YXRpYyBpbnQgaTkxNV9kcml2ZXJfaHdfcHJv
YmUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQlpZiAocmV0KSB7CiAJCQlE
Uk1fRVJST1IoImZhaWxlZCB0byBzZXQgRE1BIG1hc2tcbiIpOwogCi0JCQlnb3RvIGVycl9nZ3R0
OworCQkJZ290byBlcnJfbWVtX3JlZ2lvbnM7CiAJCX0KIAl9CiAKQEAgLTEyNjIsNiArMTI2Nyw4
IEBAIHN0YXRpYyBpbnQgaTkxNV9kcml2ZXJfaHdfcHJvYmUoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2KQogCWlmIChwZGV2LT5tc2lfZW5hYmxlZCkKIAkJcGNpX2Rpc2FibGVfbXNp
KHBkZXYpOwogCXBtX3Fvc19yZW1vdmVfcmVxdWVzdCgmZGV2X3ByaXYtPnBtX3Fvcyk7CitlcnJf
bWVtX3JlZ2lvbnM6CisJaTkxNV9tZW1vcnlfcmVnaW9uc19kcml2ZXJfcmVsZWFzZShkZXZfcHJp
dik7CiBlcnJfZ2d0dDoKIAlpOTE1X2dndHRfZHJpdmVyX3JlbGVhc2UoZGV2X3ByaXYpOwogZXJy
X3BlcmY6CkBAIC0xNTA4LDYgKzE1MTUsNyBAQCBpbnQgaTkxNV9kcml2ZXJfcHJvYmUoc3RydWN0
IHBjaV9kZXYgKnBkZXYsIGNvbnN0IHN0cnVjdCBwY2lfZGV2aWNlX2lkICplbnQpCiAKIG91dF9j
bGVhbnVwX2h3OgogCWk5MTVfZHJpdmVyX2h3X3JlbW92ZShkZXZfcHJpdik7CisJaTkxNV9tZW1v
cnlfcmVnaW9uc19kcml2ZXJfcmVsZWFzZShkZXZfcHJpdik7CiAJaTkxNV9nZ3R0X2RyaXZlcl9y
ZWxlYXNlKGRldl9wcml2KTsKIG91dF9jbGVhbnVwX21taW86CiAJaTkxNV9kcml2ZXJfbW1pb19y
ZWxlYXNlKGRldl9wcml2KTsKQEAgLTE1NjgsNiArMTU3Niw3IEBAIHN0YXRpYyB2b2lkIGk5MTVf
ZHJpdmVyX3JlbGVhc2Uoc3RydWN0IGRybV9kZXZpY2UgKmRldikKIAogCWk5MTVfZ2VtX2RyaXZl
cl9yZWxlYXNlKGRldl9wcml2KTsKIAorCWk5MTVfbWVtb3J5X3JlZ2lvbnNfZHJpdmVyX3JlbGVh
c2UoZGV2X3ByaXYpOwogCWk5MTVfZ2d0dF9kcml2ZXJfcmVsZWFzZShkZXZfcHJpdik7CiAKIAlp
OTE1X2RyaXZlcl9tbWlvX3JlbGVhc2UoZGV2X3ByaXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgK
aW5kZXggZGIzYzNhMDI1YTAzLi45MTI1MzhhYTc1MGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYu
aApAQCAtMjAwNyw5ICsyMDA3LDYgQEAgaW50IF9fbXVzdF9jaGVjayBpOTE1X2dlbV9ldmljdF9m
b3Jfbm9kZShzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKIAkJCQkJIHVuc2lnbmVkIGlu
dCBmbGFncyk7CiBpbnQgaTkxNV9nZW1fZXZpY3Rfdm0oc3RydWN0IGk5MTVfYWRkcmVzc19zcGFj
ZSAqdm0pOwogCi12b2lkIGk5MTVfZ2VtX2NsZWFudXBfbWVtb3J5X3JlZ2lvbnMoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUpOwotaW50IGk5MTVfZ2VtX2luaXRfbWVtb3J5X3JlZ2lvbnMo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwotCiAvKiBpOTE1X2dlbV9pbnRlcm5hbC5j
ICovCiBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqCiBpOTE1X2dlbV9vYmplY3RfY3JlYXRl
X2ludGVybmFsKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9nZW1fZ3R0LmMKaW5kZXggMGRmMDU3ODM4YTI0Li4yYzM5M2VmODIyYzAgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCkBAIC0yNzQ0LDU5ICsyNzQ0LDYgQEAgaW50IGk5
MTVfaW5pdF9nZ3R0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCXJldHVybiAwOwog
fQogCi12b2lkIGk5MTVfZ2VtX2NsZWFudXBfbWVtb3J5X3JlZ2lvbnMoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUpCi17Ci0JaW50IGk7Ci0KLQlmb3IgKGkgPSAwOyBpIDwgSU5URUxfUkVH
SU9OX1VOS05PV047IGkrKykgewotCQlzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbiAqcmVnaW9u
ID0gaTkxNS0+bW0ucmVnaW9uc1tpXTsKLQotCQlpZiAocmVnaW9uKQotCQkJaW50ZWxfbWVtb3J5
X3JlZ2lvbl9wdXQocmVnaW9uKTsKLQl9Ci19Ci0KLWludCBpOTE1X2dlbV9pbml0X21lbW9yeV9y
ZWdpb25zKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQotewotCWludCBlcnIsIGk7Ci0K
LQlmb3IgKGkgPSAwOyBpIDwgSU5URUxfUkVHSU9OX1VOS05PV047IGkrKykgewotCQlzdHJ1Y3Qg
aW50ZWxfbWVtb3J5X3JlZ2lvbiAqbWVtID0gRVJSX1BUUigtRU5PREVWKTsKLQkJdTMyIHR5cGU7
Ci0KLQkJaWYgKCFIQVNfUkVHSU9OKGk5MTUsIEJJVChpKSkpCi0JCQljb250aW51ZTsKLQotCQl0
eXBlID0gTUVNT1JZX1RZUEVfRlJPTV9SRUdJT04oaW50ZWxfcmVnaW9uX21hcFtpXSk7Ci0JCXN3
aXRjaCAodHlwZSkgewotCQljYXNlIElOVEVMX01FTU9SWV9TWVNURU06Ci0JCQltZW0gPSBpOTE1
X2dlbV9zaG1lbV9zZXR1cChpOTE1KTsKLQkJCWJyZWFrOwotCQljYXNlIElOVEVMX01FTU9SWV9T
VE9MRU46Ci0JCQltZW0gPSBpOTE1X2dlbV9zdG9sZW5fc2V0dXAoaTkxNSk7Ci0JCQlicmVhazsK
LQkJfQotCi0JCWlmIChJU19FUlIobWVtKSkgewotCQkJZXJyID0gUFRSX0VSUihtZW0pOwotCQkJ
RFJNX0VSUk9SKCJGYWlsZWQgdG8gc2V0dXAgcmVnaW9uKCVkKSB0eXBlPSVkXG4iLCBlcnIsIHR5
cGUpOwotCQkJZ290byBvdXRfY2xlYW51cDsKLQkJfQotCi0JCW1lbS0+aWQgPSBpbnRlbF9yZWdp
b25fbWFwW2ldOwotCQltZW0tPnR5cGUgPSB0eXBlOwotCQltZW0tPmluc3RhbmNlID0gTUVNT1JZ
X0lOU1RBTkNFX0ZST01fUkVHSU9OKGludGVsX3JlZ2lvbl9tYXBbaV0pOwotCi0JCWk5MTUtPm1t
LnJlZ2lvbnNbaV0gPSBtZW07Ci0JfQotCi0JcmV0dXJuIDA7Ci0KLW91dF9jbGVhbnVwOgotCWk5
MTVfZ2VtX2NsZWFudXBfbWVtb3J5X3JlZ2lvbnMoaTkxNSk7Ci0JcmV0dXJuIGVycjsKLX0KLQog
c3RhdGljIHZvaWQgZ2d0dF9jbGVhbnVwX2h3KHN0cnVjdCBpOTE1X2dndHQgKmdndHQpCiB7CiAJ
c3RydWN0IGk5MTVfdm1hICp2bWEsICp2bjsKQEAgLTI4MzQsOCArMjc4MSw2IEBAIHZvaWQgaTkx
NV9nZ3R0X2RyaXZlcl9yZWxlYXNlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewog
CXN0cnVjdCBwYWdldmVjICpwdmVjOwogCi0JaTkxNV9nZW1fY2xlYW51cF9tZW1vcnlfcmVnaW9u
cyhpOTE1KTsKLQogCWZpbmlfYWxpYXNpbmdfcHBndHQoJmk5MTUtPmdndHQpOwogCiAJZ2d0dF9j
bGVhbnVwX2h3KCZpOTE1LT5nZ3R0KTsKQEAgLTMyOTMsMTUgKzMyMzgsNyBAQCBpbnQgaTkxNV9n
Z3R0X2luaXRfaHcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCWlmIChyZXQp
CiAJCXJldHVybiByZXQ7CiAKLQlyZXQgPSBpOTE1X2dlbV9pbml0X21lbW9yeV9yZWdpb25zKGRl
dl9wcml2KTsKLQlpZiAocmV0KQotCQlnb3RvIG91dF9ndHRfY2xlYW51cDsKLQogCXJldHVybiAw
OwotCi1vdXRfZ3R0X2NsZWFudXA6Ci0JZGV2X3ByaXYtPmdndHQudm0uY2xlYW51cCgmZGV2X3By
aXYtPmdndHQudm0pOwotCXJldHVybiByZXQ7CiB9CiAKIGludCBpOTE1X2dndHRfZW5hYmxlX2h3
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfbWVtb3J5X3JlZ2lvbnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfbWVtb3J5X3JlZ2lvbnMuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAw
MDAwMDAuLmQ3MDQ5ZjE0ZWY3OQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfbWVtb3J5X3JlZ2lvbnMuYwpAQCAtMCwwICsxLDYxIEBACisvLyBTUERYLUxpY2Vu
c2UtSWRlbnRpZmllcjogTUlUCisvKgorICogQ29weXJpZ2h0IMKpIDIwMTkgSW50ZWwgQ29ycG9y
YXRpb24KKyAqLworCisjaW5jbHVkZSAiaTkxNV9kcnYuaCIKKyNpbmNsdWRlICJpOTE1X21lbW9y
eV9yZWdpb25zLmgiCisKK2ludCBpOTE1X21lbW9yeV9yZWdpb25zX2h3X3Byb2JlKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1KQoreworCWludCBlcnIsIGk7CisKKwlmb3IgKGkgPSAwOyBp
IDwgQVJSQVlfU0laRShpOTE1LT5tbS5yZWdpb25zKTsgaSsrKSB7CisJCXN0cnVjdCBpbnRlbF9t
ZW1vcnlfcmVnaW9uICptZW0gPSBFUlJfUFRSKC1FTk9ERVYpOworCQl1MzIgdHlwZTsKKworCQlp
ZiAoIUhBU19SRUdJT04oaTkxNSwgQklUKGkpKSkKKwkJCWNvbnRpbnVlOworCisJCXR5cGUgPSBN
RU1PUllfVFlQRV9GUk9NX1JFR0lPTihpbnRlbF9yZWdpb25fbWFwW2ldKTsKKwkJc3dpdGNoICh0
eXBlKSB7CisJCWNhc2UgSU5URUxfTUVNT1JZX1NZU1RFTToKKwkJCW1lbSA9IGk5MTVfZ2VtX3No
bWVtX3NldHVwKGk5MTUpOworCQkJYnJlYWs7CisJCWNhc2UgSU5URUxfTUVNT1JZX1NUT0xFTjoK
KwkJCW1lbSA9IGk5MTVfZ2VtX3N0b2xlbl9zZXR1cChpOTE1KTsKKwkJCWJyZWFrOworCQl9CisK
KwkJaWYgKElTX0VSUihtZW0pKSB7CisJCQllcnIgPSBQVFJfRVJSKG1lbSk7CisJCQlEUk1fRVJS
T1IoIkZhaWxlZCB0byBzZXR1cCByZWdpb24oJWQpIHR5cGU9JWRcbiIsIGVyciwgdHlwZSk7CisJ
CQlnb3RvIG91dF9jbGVhbnVwOworCQl9CisKKwkJbWVtLT5pZCA9IGludGVsX3JlZ2lvbl9tYXBb
aV07CisJCW1lbS0+dHlwZSA9IHR5cGU7CisJCW1lbS0+aW5zdGFuY2UgPSBNRU1PUllfSU5TVEFO
Q0VfRlJPTV9SRUdJT04oaW50ZWxfcmVnaW9uX21hcFtpXSk7CisKKwkJaTkxNS0+bW0ucmVnaW9u
c1tpXSA9IG1lbTsKKwl9CisKKwlyZXR1cm4gMDsKKworb3V0X2NsZWFudXA6CisJaTkxNV9tZW1v
cnlfcmVnaW9uc19kcml2ZXJfcmVsZWFzZShpOTE1KTsKKwlyZXR1cm4gZXJyOworfQorCit2b2lk
IGk5MTVfbWVtb3J5X3JlZ2lvbnNfZHJpdmVyX3JlbGVhc2Uoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUpCit7CisJaW50IGk7CisKKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShpOTE1
LT5tbS5yZWdpb25zKTsgaSsrKSB7CisJCXN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICpyZWdp
b24gPQorCQkJZmV0Y2hfYW5kX3plcm8oJmk5MTUtPm1tLnJlZ2lvbnNbaV0pOworCisJCWlmIChy
ZWdpb24pCisJCQlpbnRlbF9tZW1vcnlfcmVnaW9uX3B1dChyZWdpb24pOworCX0KK30KZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfbWVtb3J5X3JlZ2lvbnMuaCBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfbWVtb3J5X3JlZ2lvbnMuaApuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwMDAwMDAuLjYzODAzMWZkNzM2NAotLS0gL2Rldi9udWxsCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfbWVtb3J5X3JlZ2lvbnMuaApAQCAtMCwwICsxLDE0IEBA
CisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUICovCisvKgorICogQ29weXJpZ2h0IMKp
IDIwMTkgSW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaWZuZGVmIF9fSTkxNV9NRU1PUllfUkVH
SU9OU19IX18KKyNkZWZpbmUgX19JOTE1X01FTU9SWV9SRUdJT05TX0hfXworCitzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZTsKKworaW50IGk5MTVfbWVtb3J5X3JlZ2lvbnNfaHdfcHJvYmUoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwordm9pZCBpOTE1X21lbW9yeV9yZWdpb25zX2RyaXZl
cl9yZWxlYXNlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKKworI2VuZGlmIC8qIF9f
STkxNV9NRU1PUllfUkVHSU9OU19IX18gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3Nl
bGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYwppbmRleCBjYjhjM2E1MDFjYzcuLjEyMzBlN2JmNjk2
OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tfZ2VtX2Rl
dmljZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZp
Y2UuYwpAQCAtMjgsNiArMjgsNyBAQAogI2luY2x1ZGUgImd0L2ludGVsX2d0LmgiCiAjaW5jbHVk
ZSAiZ3QvaW50ZWxfZ3RfcmVxdWVzdHMuaCIKICNpbmNsdWRlICJndC9tb2NrX2VuZ2luZS5oIgor
I2luY2x1ZGUgImk5MTVfbWVtb3J5X3JlZ2lvbnMuaCIKIAogI2luY2x1ZGUgIm1vY2tfcmVxdWVz
dC5oIgogI2luY2x1ZGUgIm1vY2tfZ2VtX2RldmljZS5oIgpAQCAtNzIsNyArNzMsNyBAQCBzdGF0
aWMgdm9pZCBtb2NrX2RldmljZV9yZWxlYXNlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiAJbW9j
a19maW5pX2dndHQoJmk5MTUtPmdndHQpOwogCWRlc3Ryb3lfd29ya3F1ZXVlKGk5MTUtPndxKTsK
IAotCWk5MTVfZ2VtX2NsZWFudXBfbWVtb3J5X3JlZ2lvbnMoaTkxNSk7CisJaTkxNV9tZW1vcnlf
cmVnaW9uc19kcml2ZXJfcmVsZWFzZShpOTE1KTsKIAogCWRybV9tb2RlX2NvbmZpZ19jbGVhbnVw
KCZpOTE1LT5kcm0pOwogCkBAIC0xNjQsNiArMTY1LDcgQEAgc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKm1vY2tfZ2VtX2RldmljZSh2b2lkKQogCQlJOTE1X0dUVF9QQUdFX1NJWkVfMk07CiAKIAlt
a3dyaXRlX2RldmljZV9pbmZvKGk5MTUpLT5tZW1vcnlfcmVnaW9ucyA9IFJFR0lPTl9TTUVNOwor
CWk5MTVfbWVtb3J5X3JlZ2lvbnNfaHdfcHJvYmUoaTkxNSk7CiAKIAltb2NrX3VuY29yZV9pbml0
KCZpOTE1LT51bmNvcmUsIGk5MTUpOwogCkBAIC0xOTcsMTAgKzE5OSw2IEBAIHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICptb2NrX2dlbV9kZXZpY2Uodm9pZCkKIAogCWludGVsX2VuZ2luZXNfZHJp
dmVyX3JlZ2lzdGVyKGk5MTUpOwogCi0JZXJyID0gaTkxNV9nZW1faW5pdF9tZW1vcnlfcmVnaW9u
cyhpOTE1KTsKLQlpZiAoZXJyKQotCQlnb3RvIGVycl9jb250ZXh0OwotCiAJcmV0dXJuIGk5MTU7
CiAKIGVycl9jb250ZXh0OgpAQCAtMjExLDYgKzIwOSw3IEBAIHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICptb2NrX2dlbV9kZXZpY2Uodm9pZCkKIAlpbnRlbF90aW1lbGluZXNfZmluaShpOTE1KTsK
IAlkZXN0cm95X3dvcmtxdWV1ZShpOTE1LT53cSk7CiBlcnJfZHJ2OgorCWk5MTVfbWVtb3J5X3Jl
Z2lvbnNfZHJpdmVyX3JlbGVhc2UoaTkxNSk7CiAJZHJtX21vZGVfY29uZmlnX2NsZWFudXAoJmk5
MTUtPmRybSk7CiAJZHJtX2Rldl9maW5pKCZpOTE1LT5kcm0pOwogcHV0X2RldmljZToKLS0gCjIu
MjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50
ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

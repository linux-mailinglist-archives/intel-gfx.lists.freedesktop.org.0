Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B84F010FA15
	for <lists+intel-gfx@lfdr.de>; Tue,  3 Dec 2019 09:45:31 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5308289E52;
	Tue,  3 Dec 2019 08:45:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9244689E32
 for <intel-gfx@lists.freedesktop.org>; Tue,  3 Dec 2019 08:45:24 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 03 Dec 2019 00:45:23 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,272,1571727600"; d="scan'208";a="204895900"
Received: from dkhazov-mobl.ger.corp.intel.com (HELO [10.252.34.197])
 ([10.252.34.197])
 by orsmga008.jf.intel.com with ESMTP; 03 Dec 2019 00:45:20 -0800
To: =?UTF-8?B?VmlsbGUgU3lyasOkbMOk?= <ville.syrjala@linux.intel.com>
References: <20191127201222.16669-1-ville.syrjala@linux.intel.com>
 <20191127201222.16669-15-ville.syrjala@linux.intel.com>
 <a716a48f-24bb-0893-84a2-a1a8593ff1f0@linux.intel.com>
 <20191128155928.GT1208@intel.com>
 <b871124d-4232-e191-c51e-d15ee03fd65c@linux.intel.com>
 <20191129113758.GC1208@intel.com>
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Message-ID: <a18b796f-6232-cad2-7d5f-ed4b114e1b42@linux.intel.com>
Date: Tue, 3 Dec 2019 09:45:19 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191129113758.GC1208@intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH v2 14/14] drm/i915/fbc: Reallocate cfb if we
 need more of it
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jian-Hong Pan <jian-hong@endlessm.com>, intel-gfx@lists.freedesktop.org,
 Paulo Zanoni <paulo.r.zanoni@intel.com>, Daniel Drake <drake@endlessm.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T3AgMjktMTEtMjAxOSBvbSAxMjozNyBzY2hyZWVmIFZpbGxlIFN5cmrDpGzDpDoKPiBPbiBGcmks
IE5vdiAyOSwgMjAxOSBhdCAwOTo0ODo0NUFNICswMTAwLCBNYWFydGVuIExhbmtob3JzdCB3cm90
ZToKPj4gT3AgMjgtMTEtMjAxOSBvbSAxNjo1OSBzY2hyZWVmIFZpbGxlIFN5cmrDpGzDpDoKPj4+
IE9uIFRodSwgTm92IDI4LCAyMDE5IGF0IDA0OjQ4OjA0UE0gKzAxMDAsIE1hYXJ0ZW4gTGFua2hv
cnN0IHdyb3RlOgo+Pj4+IE9wIDI3LTExLTIwMTkgb20gMjE6MTIgc2NocmVlZiBWaWxsZSBTeXJq
YWxhOgo+Pj4+PiBGcm9tOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50
ZWwuY29tPgo+Pj4+Pgo+Pj4+PiBUaGUgY29kZSBhc3N1bWVzIHdlIGNhbiBvbWl0IHRoZSBjZmIg
YWxsb2NhdGlvbiBvbmNlIGZiYwo+Pj4+PiBoYXMgYmVlbiBlbmFibGVkIG9uY2UuIFRoYXQncyBu
b25zZW5zZS4gTGV0J3MgdHJ5IHRvCj4+Pj4+IHJlYWxsb2NhdGUgaXQgaWYgd2UgbmVlZCB0by4K
Pj4+Pj4KPj4+Pj4gVGhlIGNvZGUgaXMgc3RpbGwgYSBtZXNzLCBidXQgbWF5YmUgdGhpcyBpcyBl
bm91Z2ggdG8gZ2V0Cj4+Pj4+IGZiYyBnb2luZyBpbiBzb21lIGNhc2VzIHdoZXJlIGl0IGluaXRp
YWxseSB1bmRlcmFsbG9jYXRlcwo+Pj4+PiB0aGUgY2ZiIGFuZCB0aGVyZSdzIG5vIGZ1bGwgbW9k
ZXNldCB0byBmaXggaXQgdXAuCj4+Pj4+Cj4+Pj4+IENjOiBEYW5pZWwgRHJha2UgPGRyYWtlQGVu
ZGxlc3NtLmNvbT4KPj4+Pj4gQ2M6IFBhdWxvIFphbm9uaSA8cGF1bG8uci56YW5vbmlAaW50ZWwu
Y29tPgo+Pj4+PiBDYzogSmlhbi1Ib25nIFBhbiA8amlhbi1ob25nQGVuZGxlc3NtLmNvbT4KPj4+
Pj4gQ2M6IE1hYXJ0ZW4gTGFua2hvcnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51eC5pbnRlbC5j
b20+Cj4+Pj4+IFNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBs
aW51eC5pbnRlbC5jb20+Cj4+Pj4+IC0tLQo+Pj4+PiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9mYmMuYyB8IDIyICsrKysrKysrKysrKysrKy0tLS0tLS0KPj4+Pj4gIDEgZmls
ZSBjaGFuZ2VkLCAxNSBpbnNlcnRpb25zKCspLCA3IGRlbGV0aW9ucygtKQo+Pj4+Pgo+Pj4+PiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mYmMuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZmJjLmMKPj4+Pj4gaW5kZXggYzk3NjY5
OGIwNzI5Li45MjgwNTlhNWRhODAgMTAwNjQ0Cj4+Pj4+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZmJjLmMKPj4+Pj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9mYmMuYwo+Pj4+PiBAQCAtNjcyLDYgKzY3MiwxNCBAQCBzdGF0aWMgdm9p
ZCBpbnRlbF9mYmNfdXBkYXRlX3N0YXRlX2NhY2hlKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAo+
Pj4+PiAgCQljYWNoZS0+ZmVuY2VfaWQgPSAtMTsKPj4+Pj4gIH0KPj4+Pj4gIAo+Pj4+PiArc3Rh
dGljIGJvb2wgaW50ZWxfZmJjX2NmYl9zaXplX2NoYW5nZWQoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2KQo+Pj4+PiArewo+Pj4+PiArCXN0cnVjdCBpbnRlbF9mYmMgKmZiYyA9ICZk
ZXZfcHJpdi0+ZmJjOwo+Pj4+PiArCj4+Pj4+ICsJcmV0dXJuIGludGVsX2ZiY19jYWxjdWxhdGVf
Y2ZiX3NpemUoZGV2X3ByaXYsICZmYmMtPnN0YXRlX2NhY2hlKSA+Cj4+Pj4+ICsJCWZiYy0+Y29t
cHJlc3NlZF9mYi5zaXplICogZmJjLT50aHJlc2hvbGQ7Cj4+Pj4+ICt9Cj4+Pj4+ICsKPj4+Pj4g
IHN0YXRpYyBib29sIGludGVsX2ZiY19jYW5fYWN0aXZhdGUoc3RydWN0IGludGVsX2NydGMgKmNy
dGMpCj4+Pj4+ICB7Cj4+Pj4+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0g
dG9faTkxNShjcnRjLT5iYXNlLmRldik7Cj4+Pj4+IEBAIC03NTcsOCArNzY1LDcgQEAgc3RhdGlj
IGJvb2wgaW50ZWxfZmJjX2Nhbl9hY3RpdmF0ZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YykKPj4+
Pj4gIAkgKiB3ZSBkaWRuJ3QgZ2V0IGFueSBpbnZhbGlkYXRlL2RlYWN0aXZhdGUgY2FsbHMsIGJ1
dCB0aGlzIHdvdWxkIHJlcXVpcmUKPj4+Pj4gIAkgKiBhIGxvdCBvZiB0cmFja2luZyBqdXN0IGZv
ciBhIHNwZWNpZmljIGNhc2UuIElmIHdlIGNvbmNsdWRlIGl0J3MgYW4KPj4+Pj4gIAkgKiBpbXBv
cnRhbnQgY2FzZSwgd2UgY2FuIGltcGxlbWVudCBpdCBsYXRlci4gKi8KPj4+Pj4gLQlpZiAoaW50
ZWxfZmJjX2NhbGN1bGF0ZV9jZmJfc2l6ZShkZXZfcHJpdiwgJmZiYy0+c3RhdGVfY2FjaGUpID4K
Pj4+Pj4gLQkgICAgZmJjLT5jb21wcmVzc2VkX2ZiLnNpemUgKiBmYmMtPnRocmVzaG9sZCkgewo+
Pj4+PiArCWlmIChpbnRlbF9mYmNfY2ZiX3NpemVfY2hhbmdlZChkZXZfcHJpdikpIHsKPj4+Pj4g
IAkJZmJjLT5ub19mYmNfcmVhc29uID0gIkNGQiByZXF1aXJlbWVudHMgY2hhbmdlZCI7Cj4+Pj4+
ICAJCXJldHVybiBmYWxzZTsKPj4+Pj4gIAl9Cj4+Pj4+IEBAIC0xMTEyLDEyICsxMTE5LDEyIEBA
IHZvaWQgaW50ZWxfZmJjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKPj4+Pj4gIAlt
dXRleF9sb2NrKCZmYmMtPmxvY2spOwo+Pj4+PiAgCj4+Pj4+ICAJaWYgKGZiYy0+Y3J0Yykgewo+
Pj4+PiAtCQlXQVJOX09OKGZiYy0+Y3J0YyA9PSBjcnRjICYmICFjcnRjX3N0YXRlLT5lbmFibGVf
ZmJjKTsKPj4+Pj4gLQkJZ290byBvdXQ7Cj4+Pj4+IC0JfQo+Pj4+PiArCQlpZiAoZmJjLT5jcnRj
ICE9IGNydGMgfHwKPj4+Pj4gKwkJICAgICFpbnRlbF9mYmNfY2ZiX3NpemVfY2hhbmdlZChkZXZf
cHJpdikpCj4+Pj4+ICsJCQlnb3RvIG91dDsKPj4+Pj4gIAo+Pj4+PiAtCWlmICghY3J0Y19zdGF0
ZS0+ZW5hYmxlX2ZiYykKPj4+Pj4gLQkJZ290byBvdXQ7Cj4+Pj4+ICsJCV9faW50ZWxfZmJjX2Rp
c2FibGUoZGV2X3ByaXYpOwo+Pj4+PiArCX0KPj4+Pj4gIAo+Pj4+PiAgCVdBUk5fT04oZmJjLT5h
Y3RpdmUpOwo+Pj4+PiAgCj4+Pj4+IEBAIC0xMTMwLDYgKzExMzcsNyBAQCB2b2lkIGludGVsX2Zi
Y19lbmFibGUoc3RydWN0IGludGVsX2NydGMgKmNydGMsCj4+Pj4+ICAJaWYgKGludGVsX2ZiY19h
bGxvY19jZmIoZGV2X3ByaXYsCj4+Pj4+ICAJCQkJaW50ZWxfZmJjX2NhbGN1bGF0ZV9jZmJfc2l6
ZShkZXZfcHJpdiwgY2FjaGUpLAo+Pj4+PiAgCQkJCWZiLT5mb3JtYXQtPmNwcFswXSkpIHsKPj4+
Pj4gKwkJY2FjaGUtPnBsYW5lLnZpc2libGUgPSBmYWxzZTsKPj4+Pj4gIAkJZmJjLT5ub19mYmNf
cmVhc29uID0gIm5vdCBlbm91Z2ggc3RvbGVuIG1lbW9yeSI7Cj4+Pj4+ICAJCWdvdG8gb3V0Owo+
Pj4+PiAgCX0KPj4+PiBNYWtlcyBzZW5zZSwgdW5mb3J0dW5hdGVseSBrbXNfY3Vyc29yX2xlZ2Fj
eSBzdGFydHMgZmFpbGluZyBvbiB0aGlzIHNlcmllcy4gOigKPj4+Pgo+Pj4+IEZvciAxLTExLCAx
NAo+Pj4+Cj4+Pj4gUmV2aWV3ZWQtYnk6IE1hYXJ0ZW4gTGFua2hvcnN0IDxtYWFydGVuLmxhbmto
b3JzdEBsaW51eC5pbnRlbC5jb20+Cj4+Pj4KPj4+PiBXZSBzaG91bGQgcHJvYmFibHkgZ2V0IHJp
ZCBvZiB0aGUgRkJDIGRpc2FibGUgb24gZnJvbnRidWZmZXIgZGlzYWJsZSBhcyB3ZWxsLiBJIGhh
ZCBzb21lIHBhdGNoZXMgYnV0IG5vdGhpbmcgdXBzdHJlYW0td29ydGh5IHlldC4gOigKPj4+IEhv
dyB3b3VsZCB3ZSBnZXQgcmlkIG9mIHRoZSBkaXNhYmxlIHRoZXJlPyBCeSB0cmlnZ2VyaW5nIG51
a2VzIGF0IHNvbWUKPj4+IHByZWRlZmluZWQgaW50ZXJ2YWw/IERvZXNuJ3Qgc291bmQgYWxsIHRo
YXQgZ3JlYXQuCj4+IE5vdCB0b3VjaGluZyBGQkMgb24gZnJvbnRidWZmZXIgd3JpdGUgYXQgYWxs
LCBhbmQgZm9yY2luZyB1c2Vyc3BhY2UgdG8gdXNlIHRoZSBkaXJ0eWZiIGFwaS4gSSB0aGluayB0
aGUgd2hvbGUgaW1wbGljaXQgdHJhY2tpbmcgc2hvdWxkIGJlIHJlbW92ZWQuCj4gUGVyaGFwcy4g
Tm90IHN1cmUgdXNlcnNwYWNlIGlzIHJlYWR5IGZvciB0aGF0IHRob3VnaC4KCldlIGhhdmUgdG8g
YXVkaXQgdGhhdCBEaXJ0eUZCIGlzIGNhbGxlZCBvbiBhbGwgZ2VuOSsgdXNlcnNwYWNlLCBiZWNh
dXNlIEZCQyBpcyBvbmx5IGVuYWJsZWQgYnkgZGVmYXVsdCBvbiB0aG9zZSBwbGF0Zm9ybXMuCgpJ
IGtub3cgdGhlIG1vZGVzZXR0aW5nIGRkeCBkb2VzLCBJIGJlbGlldmUgeGY4Ni12aWRlby1pbnRl
bCBhcyB3ZWxsLiBTbyBpdCBzaG91bGQgYmUgc2FmZSB0byBkby4gV2UgY291bGQgaGlkZSB0aGUg
b2xkIGJlaGF2aW9yIGJlaGluZCBhIGtlcm5lbCBwYXJhbWV0ZXIgZm9yIG5vdyBmb3IgMSBvciAy
IHJlbGVhc2VzLAoKc28gd2UgY2FuIGNoaWNrZW4gb3V0IGlmIG5lZWRlZC4KCj4gSSBndWVzcyB0
aGUgb25seSBsb25nIGxhc3RpbmcgZnJvbnRidWZmZXIgaW52YWxpZGF0ZSBpcyB0aGUKPiBvbmUg
ZnJvbSBzZXRfZG9tYWluLiBFdmVyeXRoaW5nIGVsc2UgaXMgYm91bmRlZCBhbmQgc28gd2UKPiBr
bm93IHRoZSBmbHVzaCBpcyBnb2luZyB0byBjb21lIGluIGEgc29tZXdoYXQgdGltZWx5IG1hbm5l
ci4KPiBTbyBmb3IgdGhvc2UgY2FzZXMgSSBndWVzcyB3ZSBjb3VsZCBwZXJoYXBzIHNraXAgdGhl
IGludmFsaWRhdGUuCj4KPiBIbW0uIEFsc28gbG9va3MgbGlrZSBPUklHSU5fR1RUIGhhcyBiZWVu
IG5ldXRlcmVkIGFuZCBub3cKPiB3ZSB0cmVhdCBldmVyeXRpbmcgYXMgT1JJR0lOX0NQVS4gVGhh
dCdzIG1heWJlIG5vdCBzbyBncmVhdC4KPiBTaG91bGQgcHJvYmFibHkgcmVpbnN0YXRlIE9SSUdJ
Tl9HVFQgc28gd2UgY2FuIGFjdHVhbGx5IGJlbmVmaXQKPiBmcm9tIHRoZSBodyBndHQgdHJhY2tp
bmcuIE9yIHdlIGp1c3QgdHJ5IHRvIGtpbGwgdGhhdCBvZmYgYXMgd2VsbC4KSFcgdHJhY2tpbmcg
aGFzIGJlZW4gYnVnZ3kgZm9yIGEgbG9uZyB0aW1lLCBhbmQgaXMgbm8gbG9uZ2VyIGF2YWlsYWJs
ZSBvbiBjdXJyZW50IGh3IGJlY2F1c2Ugb2YgdGhvc2UgYnVncy4KPiBBbHNvIEkgd29uZGVyIHdo
ZXJlIGlzIHRoZSBmbHVzaCBjb3VudGVycGFydCB0byB0aGUgaW52YWxpZGF0ZQo+IGluIGk5MTVf
Z2VtX29iamVjdF9wcmVwYXJlX3dyaXRlKCk/Cj4KTm90IHN1cmUuCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0Cklu
dGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

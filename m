Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9D45F10A700
	for <lists+intel-gfx@lfdr.de>; Wed, 27 Nov 2019 00:17:24 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6246D6E4A5;
	Tue, 26 Nov 2019 23:17:22 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2C9FD6E4A5
 for <intel-gfx@lists.freedesktop.org>; Tue, 26 Nov 2019 23:17:21 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Nov 2019 15:17:20 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,247,1571727600"; d="scan'208";a="240112226"
Received: from josouza-mobl.jf.intel.com (HELO josouza-MOBL.intel.com)
 ([10.98.40.66])
 by fmsmga002.fm.intel.com with ESMTP; 26 Nov 2019 15:17:20 -0800
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 26 Nov 2019 15:17:17 -0800
Message-Id: <20191126231717.76703-1-jose.souza@intel.com>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/display/tgl: Do not program clockgating
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGFsa2VkIHdpdGggSFcgdGVhbSBhbmQgdGhpcyBpcyBhIGxlZnQgb3ZlciwgZHJpdmVyIHNob3Vs
ZCBub3QKcHJvZ3JhbSBjbG9ja2dhdGluZywgZGVrZWwgZmlybXdhcmUgd2lsbCBiZSByZXBvbnNp
YmxlIGZvciBhbnkKY2xvY2tnYXRpbmcgcHJvZ3JhbWluZy4KCkJTcGVjIGlzc3VlOiAyMDg4NQpC
U3BlYzogNDkyOTIKCkNjOiBMdWNhcyBEZSBNYXJjaGkgPGx1Y2FzLmRlbWFyY2hpQGludGVsLmNv
bT4KQ2M6IE1hdHQgUm9wZXIgPG1hdHRoZXcuZC5yb3BlckBpbnRlbC5jb20+ClNpZ25lZC1vZmYt
Ynk6IEpvc8OpIFJvYmVydG8gZGUgU291emEgPGpvc2Uuc291emFAaW50ZWwuY29tPgotLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMgfCA1NSArKysrKysrLS0tLS0t
LS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAxNiBpbnNlcnRpb25zKCspLCAzOSBkZWxldGlv
bnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rk
aS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYwppbmRleCBhOTc2
NjA2ZDIxYzcuLjc0ODhkY2JiNjM3ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kZGkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2RkaS5jCkBAIC0zMTY3LDYgKzMxNjcsMTEgQEAgaWNsX3BoeV9zZXRfY2xvY2tfZ2F0aW5n
KHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0LCBib29sIGVuYWJsZSkKIAl1MzIg
dmFsLCBiaXRzOwogCWludCBsbjsKIAorCS8qCisJICogU2hvdWxkIG5vdCBiZSBjYWxsZWQgZm9y
IEdFTjEyKywgc2VlICJQSFkgQ2xvY2tnYXRpbmcgcHJvZ3JhbW1pbmciCisJICogbm90ZQorCSAq
LworCiAJaWYgKHRjX3BvcnQgPT0gUE9SVF9UQ19OT05FKQogCQlyZXR1cm47CiAKQEAgLTMxNzUs
MzkgKzMxODAsMjYgQEAgaWNsX3BoeV9zZXRfY2xvY2tfZ2F0aW5nKHN0cnVjdCBpbnRlbF9kaWdp
dGFsX3BvcnQgKmRpZ19wb3J0LCBib29sIGVuYWJsZSkKIAkgICAgICAgTUdfRFBfTU9ERV9DRkdf
R0FPTlBXUl9HQVRJTkc7CiAKIAlmb3IgKGxuID0gMDsgbG4gPCAyOyBsbisrKSB7Ci0JCWlmIChJ
TlRFTF9HRU4oZGV2X3ByaXYpID49IDEyKSB7Ci0JCQlJOTE1X1dSSVRFKEhJUF9JTkRFWF9SRUco
dGNfcG9ydCksIEhJUF9JTkRFWF9WQUwodGNfcG9ydCwgbG4pKTsKLQkJCXZhbCA9IEk5MTVfUkVB
RChES0xfRFBfTU9ERSh0Y19wb3J0KSk7Ci0JCX0gZWxzZSB7Ci0JCQl2YWwgPSBJOTE1X1JFQUQo
TUdfRFBfTU9ERShsbiwgdGNfcG9ydCkpOwotCQl9CisJCXZhbCA9IEk5MTVfUkVBRChNR19EUF9N
T0RFKGxuLCB0Y19wb3J0KSk7CiAKIAkJaWYgKGVuYWJsZSkKIAkJCXZhbCB8PSBiaXRzOwogCQll
bHNlCiAJCQl2YWwgJj0gfmJpdHM7CiAKLQkJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIp
Ci0JCQlJOTE1X1dSSVRFKERLTF9EUF9NT0RFKHRjX3BvcnQpLCB2YWwpOwotCQllbHNlCi0JCQlJ
OTE1X1dSSVRFKE1HX0RQX01PREUobG4sIHRjX3BvcnQpLCB2YWwpOworCQlJOTE1X1dSSVRFKE1H
X0RQX01PREUobG4sIHRjX3BvcnQpLCB2YWwpOwogCX0KIAotCWlmIChJTlRFTF9HRU4oZGV2X3By
aXYpID09IDExKSB7Ci0JCWJpdHMgPSBNR19NSVNDX1NVUzBfQ0ZHX1RSMlBXUl9HQVRJTkcgfAot
CQkgICAgICAgTUdfTUlTQ19TVVMwX0NGR19DTDJQV1JfR0FUSU5HIHwKLQkJICAgICAgIE1HX01J
U0NfU1VTMF9DRkdfR0FPTlBXUl9HQVRJTkcgfAotCQkgICAgICAgTUdfTUlTQ19TVVMwX0NGR19U
UlBXUl9HQVRJTkcgfAotCQkgICAgICAgTUdfTUlTQ19TVVMwX0NGR19DTDFQV1JfR0FUSU5HIHwK
LQkJICAgICAgIE1HX01JU0NfU1VTMF9DRkdfREdQV1JfR0FUSU5HOworCWJpdHMgPSBNR19NSVND
X1NVUzBfQ0ZHX1RSMlBXUl9HQVRJTkcgfCBNR19NSVNDX1NVUzBfQ0ZHX0NMMlBXUl9HQVRJTkcg
fAorCSAgICAgICBNR19NSVNDX1NVUzBfQ0ZHX0dBT05QV1JfR0FUSU5HIHwgTUdfTUlTQ19TVVMw
X0NGR19UUlBXUl9HQVRJTkcgfAorCSAgICAgICBNR19NSVNDX1NVUzBfQ0ZHX0NMMVBXUl9HQVRJ
TkcgfCBNR19NSVNDX1NVUzBfQ0ZHX0RHUFdSX0dBVElORzsKIAotCQl2YWwgPSBJOTE1X1JFQUQo
TUdfTUlTQ19TVVMwKHRjX3BvcnQpKTsKLQkJaWYgKGVuYWJsZSkKLQkJCXZhbCB8PSAoYml0cyB8
IE1HX01JU0NfU1VTMF9TVVNDTEtfRFlOQ0xLR0FURV9NT0RFKDMpKTsKLQkJZWxzZQotCQkJdmFs
ICY9IH4oYml0cyB8IE1HX01JU0NfU1VTMF9TVVNDTEtfRFlOQ0xLR0FURV9NT0RFX01BU0spOwot
CQlJOTE1X1dSSVRFKE1HX01JU0NfU1VTMCh0Y19wb3J0KSwgdmFsKTsKLQl9CisJdmFsID0gSTkx
NV9SRUFEKE1HX01JU0NfU1VTMCh0Y19wb3J0KSk7CisJaWYgKGVuYWJsZSkKKwkJdmFsIHw9IChi
aXRzIHwgTUdfTUlTQ19TVVMwX1NVU0NMS19EWU5DTEtHQVRFX01PREUoMykpOworCWVsc2UKKwkJ
dmFsICY9IH4oYml0cyB8IE1HX01JU0NfU1VTMF9TVVNDTEtfRFlOQ0xLR0FURV9NT0RFX01BU0sp
OworCUk5MTVfV1JJVEUoTUdfTUlTQ19TVVMwKHRjX3BvcnQpLCB2YWwpOwogfQogCiBzdGF0aWMg
dm9pZApAQCAtMzUwOCwxMiArMzUwMCw2IEBAIHN0YXRpYyB2b2lkIHRnbF9kZGlfcHJlX2VuYWJs
ZV9kcChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkgKiBkb3duIHRoaXMgZnVuY3Rp
b24uCiAJICovCiAKLQkvKgotCSAqIDcuZCBUeXBlIEMgd2l0aCBEUCBhbHRlcm5hdGUgb3IgZml4
ZWQvbGVnYWN5L3N0YXRpYyBjb25uZWN0aW9uIC0KLQkgKiBEaXNhYmxlIFBIWSBjbG9jayBnYXRp
bmcgcGVyIFR5cGUtQyBEREkgQnVmZmVyIHBhZ2UKLQkgKi8KLQlpY2xfcGh5X3NldF9jbG9ja19n
YXRpbmcoZGlnX3BvcnQsIGZhbHNlKTsKLQogCS8qIDcuZSBDb25maWd1cmUgdm9sdGFnZSBzd2lu
ZyBhbmQgcmVsYXRlZCBJTyBzZXR0aW5ncyAqLwogCXRnbF9kZGlfdnN3aW5nX3NlcXVlbmNlKGVu
Y29kZXIsIGNydGNfc3RhdGUtPnBvcnRfY2xvY2ssIGxldmVsLAogCQkJCWVuY29kZXItPnR5cGUp
OwpAQCAtMzU2NSwxNSArMzU1MSw2IEBAIHN0YXRpYyB2b2lkIHRnbF9kZGlfcHJlX2VuYWJsZV9k
cChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAlpZiAoIWlzX3RyYW5zX3BvcnRfc3lu
Y19tb2RlKGNydGNfc3RhdGUpKQogCQlpbnRlbF9kcF9zdG9wX2xpbmtfdHJhaW4oaW50ZWxfZHAp
OwogCi0JLyoKLQkgKiBUT0RPOiBlbmFibGUgY2xvY2sgZ2F0aW5nCi0JICoKLQkgKiBJdCBpcyBu
b3Qgd3JpdHRlbiBpbiBEUCBlbmFibGluZyBzZXF1ZW5jZSBidXQgIlBIWSBDbG9ja2dhdGluZwot
CSAqIHByb2dyYW1taW5nIiBzdGF0ZXMgdGhhdCBjbG9jayBnYXRpbmcgc2hvdWxkIGJlIGVuYWJs
ZWQgYWZ0ZXIgdGhlCi0JICogbGluayB0cmFpbmluZyBidXQgZG9pbmcgc28gY2F1c2VzIGFsbCB0
aGUgZm9sbG93aW5nIHRyYWluaW5ncyB0byBmYWlsCi0JICogc28gbm90IGVuYWJsaW5nIGl0IGZv
ciBub3cuCi0JICovCi0KIAkvKiA3LmwgQ29uZmlndXJlIGFuZCBlbmFibGUgRkVDIGlmIG5lZWRl
ZCAqLwogCWludGVsX2RkaV9lbmFibGVfZmVjKGVuY29kZXIsIGNydGNfc3RhdGUpOwogCWludGVs
X2RzY19lbmFibGUoZW5jb2RlciwgY3J0Y19zdGF0ZSk7Ci0tIAoyLjI0LjAKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxp
c3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

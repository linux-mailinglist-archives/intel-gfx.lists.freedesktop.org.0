Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E553410269B
	for <lists+intel-gfx@lfdr.de>; Tue, 19 Nov 2019 15:26:58 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A2FB16E974;
	Tue, 19 Nov 2019 14:26:56 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8B44C6E060
 for <intel-gfx@lists.freedesktop.org>; Tue, 19 Nov 2019 14:26:54 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19258908-1500050 
 for multiple; Tue, 19 Nov 2019 14:26:37 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 19 Nov 2019 14:26:36 +0000
Message-Id: <20191119142636.3261286-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t] i915/gem_mmap_gtt: Exercise many,
 many mappings of the same objects
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Rm9yayBhbmQgcmVtYXAgdGhlIHNhbWUgb2JqZWN0IGludG8gYSBuZXcgcHJvY2VzcyBzcGFjZSB1
bmRlciBhIG5ldyBmaWxlCmRlc2NyaXB0b3IuIFByaW5jaXBhbGx5IHRvIGNoZWNrIGxpc3QgbWFu
YWdlbWVudCBhbmQgZmluZCBzY2FsaW5nIGlzc3VlcwppbiB1c2luZyBzdWNoIGxpc3RzLgoKU2ln
bmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CkNjOiBB
YmRpZWwgSmFudWxndWUgPGFiZGllbC5qYW51bGd1ZUBsaW51eC5pbnRlbC5jb20+Ci0tLQogdGVz
dHMvaTkxNS9nZW1fbW1hcF9ndHQuYyB8IDcyICsrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrLQogMSBmaWxlIGNoYW5nZWQsIDcxIGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24o
LSkKCmRpZmYgLS1naXQgYS90ZXN0cy9pOTE1L2dlbV9tbWFwX2d0dC5jIGIvdGVzdHMvaTkxNS9n
ZW1fbW1hcF9ndHQuYwppbmRleCBhNWY5ZDkzNGUuLjc1Njk0MGNhNCAxMDA2NDQKLS0tIGEvdGVz
dHMvaTkxNS9nZW1fbW1hcF9ndHQuYworKysgYi90ZXN0cy9pOTE1L2dlbV9tbWFwX2d0dC5jCkBA
IC0zNCw4ICszNCw5IEBACiAjaW5jbHVkZSA8aW50dHlwZXMuaD4KICNpbmNsdWRlIDxwdGhyZWFk
Lmg+CiAjaW5jbHVkZSA8ZXJybm8uaD4KLSNpbmNsdWRlIDxzeXMvc3RhdC5oPgogI2luY2x1ZGUg
PHN5cy9pb2N0bC5oPgorI2luY2x1ZGUgPHN5cy9zdGF0Lmg+CisjaW5jbHVkZSA8c3lzL3dhaXQu
aD4KICNpbmNsdWRlICJkcm0uaCIKIAogI2luY2x1ZGUgImlndC5oIgpAQCAtMzIzLDYgKzMyNCw3
MyBAQCB0ZXN0X3BmX25vbmJsb2NrKGludCBpOTE1KQogCWlndF9zcGluX2ZyZWUoaTkxNSwgc3Bp
bik7CiB9CiAKK3N0YXRpYyB2b2lkCit0ZXN0X2ZvcmtfYm9tYihpbnQgaTkxNSkKK3sKKwl1aW50
MzJfdCAqY29udHJvbDsKKwl1aW50MzJfdCBoYW5kbGU7CisJaW50IGRtYWJ1ZjsKKworCS8qIFJl
YmluZCB0aGUgc2FtZSBvYmplY3QgaW50byBtYW55IGRpZmZlcmVudCBwcm9jZXNzIGFkcmVzcyBz
cGFjZXMuICovCisKKwljb250cm9sID0gbW1hcChOVUxMLCA0MDk2LCBQUk9UX1dSSVRFLCBNQVBf
U0hBUkVEIHwgTUFQX0FOT04sIC0xLCAwKTsKKwlpZ3RfYXNzZXJ0KGNvbnRyb2wgIT0gTUFQX0ZB
SUxFRCk7CisKKwloYW5kbGUgPSBnZW1fY3JlYXRlKGk5MTUsIDQwOTYpOworCWRtYWJ1ZiA9IHBy
aW1lX2hhbmRsZV90b19mZChpOTE1LCBoYW5kbGUpOworCWdlbV9jbG9zZShpOTE1LCBoYW5kbGUp
OworCisJaWd0X2ZvcmsoY2hpbGQsIDEpIHsKKwkJaW50IGZkWzUxMl07CisKKwkJYXRvbWljX2Zl
dGNoX2FkZCgmY29udHJvbFsxXSwgMSk7CisJCXdoaWxlICghUkVBRF9PTkNFKGNvbnRyb2xbMF0p
KSB7CisJCQlpbnQgY2hpbGRyZW47CisKKwkJCWF0b21pY19mZXRjaF9hZGQoJmNvbnRyb2xbMl0s
IDEpOworCisJCQlmb3IgKGludCBpID0gMDsgaSA8IEFSUkFZX1NJWkUoZmQpOyBpKyspIHsKKwkJ
CQlmZFtpXSA9IGdlbV9yZW9wZW5fZHJpdmVyKGk5MTUpOworCisJCQkJaGFuZGxlID0gcHJpbWVf
ZmRfdG9faGFuZGxlKGZkW2ldLCBkbWFidWYpOworCQkJCWdlbV9tbWFwX19ndHQoZmRbaV0sIGhh
bmRsZSwgNDA5NiwgUFJPVF9XUklURSk7CisJCQkJZ2VtX2Nsb3NlKGZkW2ldLCBoYW5kbGUpOwor
CisJCQkJLyogbGVhdmUgdGhlIGZkICsgbW1hcCBmb3IgcHJvY2VzcyBjbGVhbnVwICovCisJCQl9
CisKKwkJCWZvciAoY2hpbGRyZW4gPSAwOyBjaGlsZHJlbiA8IDI7IGNoaWxkcmVuKyspIHsKKwkJ
CQlpZiAoZm9yaygpID4gMCkgeyAvKiBjaGlsZCAqLworCQkJCQlhdG9taWNfZmV0Y2hfYWRkKCZj
b250cm9sWzFdLCAxKTsKKwkJCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGZkKTsg
aSsrKQorCQkJCQkJY2xvc2UoZmRbaV0pOworCQkJCQlicmVhazsKKwkJCQl9CisJCQl9CisJCQlp
ZiAoY2hpbGRyZW4gPT0gMikgeyAvKiBwYXJlbnQgKi8KKwkJCQlzY2hlZF95aWVsZCgpOworCQkJ
CWJyZWFrOworCQkJfQorCQl9CisJCWF0b21pY19mZXRjaF9hZGQoJmNvbnRyb2xbMV0sIC0xKTsK
Kwl9CisKKwlzbGVlcCgzMCk7CisKKwkqY29udHJvbCA9IDE7CisJaWd0X3dhaXRjaGlsZHJlbigp
OworCisJd2hpbGUgKFJFQURfT05DRShjb250cm9sWzFdKSkgeworCQlpbnQgc3RhdHVzID0gMDsK
KwkJd2FpdCgmc3RhdHVzKTsKKwl9CisKKwlpZ3RfaW5mbygiU3Bhd25lZCAlZCBjaGlsZHJlblxu
IiwgY29udHJvbFsyXSk7CisKKwljbG9zZShkbWFidWYpOworCW11bm1hcChjb250cm9sLCA0MDk2
KTsKK30KKwogc3RhdGljIHZvaWQKIHRlc3RfaXNvbGF0aW9uKGludCBpOTE1KQogewpAQCAtMTA5
Nyw2ICsxMTY1LDggQEAgaWd0X21haW4KIAkJdGVzdF9mbGlua19yYWNlKGZkKTsKIAlpZ3Rfc3Vi
dGVzdCgicGYtbm9uYmxvY2siKQogCQl0ZXN0X3BmX25vbmJsb2NrKGZkKTsKKwlpZ3Rfc3VidGVz
dCgiZm9yay1ib21iIikKKwkJdGVzdF9mb3JrX2JvbWIoZmQpOwogCiAJaWd0X3N1YnRlc3QoImJh
c2ljLXNtYWxsLWJvIikKIAkJdGVzdF9odWdlX2JvKGZkLCAtMSwgSTkxNV9USUxJTkdfTk9ORSk7
Ci0tIAoyLjI0LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9y
ZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdm
eA==

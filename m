Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E94AF24D8D2
	for <lists+intel-gfx@lfdr.de>; Fri, 21 Aug 2020 17:38:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B07BB6E85A;
	Fri, 21 Aug 2020 15:38:40 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BC0BC6E82B;
 Fri, 21 Aug 2020 15:38:39 +0000 (UTC)
IronPort-SDR: 9kVPH2rzBu3wkP84NusVbOEjqyggLt6NST8rFMjljue6NDG1WuaKSHfh/t7Osz51LxavOB0ba3
 R8iDSYy2DKKg==
X-IronPort-AV: E=McAfee;i="6000,8403,9719"; a="240381883"
X-IronPort-AV: E=Sophos;i="5.76,337,1592895600"; d="scan'208";a="240381883"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by fmsmga105.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 21 Aug 2020 08:38:39 -0700
IronPort-SDR: v6PTcVwYlkmQ2wSAabnUBPVFMPbiL3TW7/8GGDUa8ljthcgQoG0FAm+rYHH19CT1/wLp/Hqqk1
 Uh+D+YAXzRKg==
X-IronPort-AV: E=Sophos;i="5.76,337,1592895600"; d="scan'208";a="473086620"
Received: from jkrzyszt-desk.igk.intel.com ([172.22.244.18])
 by orsmga005-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 21 Aug 2020 08:38:37 -0700
From: Janusz Krzysztofik <janusz.krzysztofik@linux.intel.com>
To: igt-dev@lists.freedesktop.org
Date: Fri, 21 Aug 2020 17:37:56 +0200
Message-Id: <20200821153807.18613-10-janusz.krzysztofik@linux.intel.com>
X-Mailer: git-send-email 2.21.1
In-Reply-To: <20200821153807.18613-1-janusz.krzysztofik@linux.intel.com>
References: <20200821153807.18613-1-janusz.krzysztofik@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t v4 09/20] tests/core_hotunplug: Prepare
 invariant data once per test run
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Micha=C5=82=20Winiarski?= <michal.winiarski@intel.com>,
 intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RWFjaCBzdWJ0ZXN0IG5vdyBjYWxscyBhIHByZXBhcmUoKSBoZWxwZXIgd2hpY2ggb3BlbnMgYSBj
b3VwbGUgb2YgZmlsZXMKcmVxdWlyZWQgYnkgdGhhdCBzdWJ0ZXN0LiAgVGhvc2UgZmlsZXMgYXJl
IHRoZW4gY2xvc2VkIGFmdGVyIHVzZSwKZWl0aGVyIGRpcmVjdGx5IGZyb20gdGhlIHN1YnRlc3Qg
Ym9keSwgb3IgaW5kaXJlY3RseSBmcm9tIGluc2lkZSBvbmUgb2YKaGVscGVyIGZ1bmN0aW9ucyBj
YWxsZWQgZHVyaW5nIHRoZSBzdWJ0ZXN0IGV4ZWN1dGlvbi4gIFRoYXQgYXBwcm9hY2gKbm90IG9u
bHkgbWFrZXMgbGlmZWN5Y2xlIG9mIGluZGl2aWR1YWwgZmlsZSBkZXNjcmlwdG9ycyBkaWZmaWN1
bHQgdG8KZm9sbG93IGJ1dCBhbHNvIHByZXZlbnRzIHVzIGZyb20gcmUtcnVubmluZyBoZWFsdGgg
Y2hlY2tzIG9uIHN1YnRlc3QKZmFpbHVyZXMgZnJvbSBmb2xsb3cgdXAgaWd0X2ZpeHR1cmUgc2Vj
dGlvbnMgc2luY2Ugd2UgbWF5IG5lZWQgdG8gcmV0cnkKYnVzIHJlc2NhbiBvciBkcml2ZXIgcmVi
aW5kIG9wZXJhdGlvbnMuCgpUd28gb2YgdGhvc2UgZmlsZXMgLSBkZXZpY2UgYnVzIGFuZCBkcml2
ZXIgc3lzZnMgbm9kZXMgLSBhcmUgbm90CmFmZmVjdGVkIG5vciBpbnRlcmZlcmUgd2l0aCBkcml2
ZXIgdW5iaW5kIC8gZGV2aWNlIHVucGx1ZyBvcGVyYXRpb25zCnBlcmZvcm1lZCBieSBzdWJ0ZXN0
cy4gIFRoZW4sIHRoZXJlIGlzIG5vdCBtdWNoIHNlbnNlIGluIGNsb3NpbmcgYW5kCnJlb3Blbmlu
ZyB0aG9zZSBub2Rlcy4gIE9wZW4gdGhlbSBvbmNlIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSB0ZXN0
IHJ1biwKdGhlbiBjbG9zZSB0aGVtIGFzIGxhdGUgYXMgb24gdGVzdCBjb21wbGV0aW9uLgoKVGhl
IHByZXBhcmUoKSBoZWxwZXIgYWxzbyBwb3B1bGF0ZXMgYSBkZXZpY2UgYnVzIGFkZHJlc3Mgc3Ry
aW5nIHVzZWQgYnkKZHJpdmVyIHVuYmluZCAvIHJlYmluZCBvcGVyYXRpb25zLiAgU2luY2UgdGhl
IGJ1cyBhZGRyZXNzIG9mIGFuCmV4ZXJjaXNlZCBkZXZpY2UgbmV2ZXIgY2hhbmdlcywgYWxzbyBw
cmVwYXJlIHRoYXQgc3RyaW5nIG9ubHkgb25jZSBhdAp0aGUgYmVnaW5uaW5nIG9mIGEgdGVzdCBy
dW4uICBOb3RlIHRoYXQgaXQgaXMgdGhlIHNhbWUgYXMgdGhlIGxhc3QKY29tcG9uZW50IG9mIGEg
ZGV2aWNlIGZpbHRlciBzdHJpbmcgd2hpY2ggaXMgYWxyZWFkeSByZXNvbHZlZCBhbmQKaW5zdGFs
bGVkIGZyb20gYW4gaW5pdGlhbCBpZ3RfZml4dHVyZSBzZWN0aW9uIG9mIHRoZSB0ZXN0LiAgVGhl
biwKaW5pdGlhbGl6ZSB0aGUgZGV2aWNlIGJ1cyBhZGRyZXNzIGZpZWxkIG9mIGEgaG90dW5wbHVn
IHN0cnVjdHVyZQppbnN0YW5jZSB3aXRoIGEgcG9pbnRlciB0byB0aGUgcmVzcGVjdGl2ZSBzdWJz
dHJpbmcgb2YgdGhhdCBmaWx0ZXIKcmF0aGVyIHRoYW4gcmVzb2x2aW5nIGl0IGFnYWluIGZyb20g
dGhlIGRldmljZSBzeXNmcyBub2RlIHBhdGhuYW1lLgoKVGhlcmUgaXMgb25lIG1vcmUgc3lzZnMg
bm9kZSAtIGEgRFJNIGRldmljZSBub2RlIC0gbm93IG9wZW5lZCBieSB0aGUKcHJlcGFyZSgpIGhl
bHBlciBmb3Igc3VidGVzdHMgd2hpY2ggcGVyZm9ybSBkZXZpY2UgcmVtb3ZlIG9wZXJhdGlvbnMu
ClRoYXQgbm9kZSBjYW4ndCBiZSBvcGVuZWQgb25seSBvbmNlIGF0IHRoZSBiZWdpbm5pbmcgb2Yg
YSB0ZXN0IHJ1bgpiZWNhdXNlIGl0cyBvcGVuIGZpbGUgZGVzY3JpcHRvciBpcyBubyBsb25nZXIg
dXNhYmxlIGFzIHNvb24gYXMgYQpkcml2ZXIgdW5iaW5kIG9wZXJhdGlvbiBpcyBwZXJmb3JtZWQu
ICBPbiB0aGUgb3RoZXIgaGFuZCwgaXQgY2FuJ3QgYmUKb3BlbmVkIGVhc2lseSBmcm9tIGluc2lk
ZSBhIGRldmljZV9yZW1vdmUoKSBoZWxwZXIgc2luY2Ugc29tZSBzdWJ0ZXN0cwpqdXN0IGRvbid0
IG9wZW4gdGhlIGRldmljZSBzbyBpdHMgZmlsZSBkZXNjcmlwdG9yIHVzZWQgYnkKaWd0X3N5c2Zz
X29wZW4oKSBtYXkganVzdCBub3QgYmUgYXZhaWxhYmxlLiAgSG93ZXZlciwgbm90ZSB0aGF0IG9u
bHkgYQpQQ0kgc3lzZnMgbm9kZSBvZiB0aGUgZGV2aWNlLCBub3QgbmVjZXNzYXJpbHkgdGhlIERS
TSBvbmUsIGlzIGFjdHVhbGx5CnJlcXVpcmVkIGZvciBhIHN1Y2Nlc3NmdWwgZGV2aWNlIHJlbW92
ZSBvcGVyYXRpb24sIGFuZCB0aGF0IG5vZGUgY2FuIGJlCm9wZW5lZCBlYXNpbHkgZnJvbSBhIGJ1
cyBmaWxlIGRlc2NyaXB0b3IgdXNpbmcgYSBkZXZpY2UgYnVzIGFkZHJlc3MKc3RyaW5nLCBib3Ro
IGFscmVhZHkgYXZhaWxhYmxlLiAgVGhlbiwgY2hhbmdlIHRoZSBzZW1hbnRpY3Mgb2YgYQouZmQu
c3lzZnNfZGV2IGZpZWxkIG9mIHRoZSBob3R1bnBsdWcgc3RydWN0dXJlIGZyb20gRFJNIHRvIFBD
SSBkZXZpY2UKc3lzZnMgZmlsZSBkZXNjcmlwdG9yLCB0aGVuIGxldCB0aGUgZGV2aWNlX3JlbW92
ZSgpIGhlbHBlciBvcGVuIHRoZQpkZXZpY2UgUENJIG5vZGUgYnkgaXRzZWxmIGFuZCBzdG9yZSBp
dHMgZmlsZSBkZXNjcmlwdG9yIGluIHRoYXQgZmllbGQuCkFsc28sIGZvciBzdGlsbCBtb3JlIGVh
c3kgYWNjZXNzIHRvIHRoZSBkZXZpY2UgUENJIG5vZGUsIHVzZSBhCidzdWJzeXN0ZW0vZGV2aWNl
cycgc3Vibm9kZSBvZiB0aGUgUENJIGRldmljZSBhcyBpdHMgYnVzIHN5c2ZzIGxvY2F0aW9uCmlu
c3RlYWQgb2YganVzdCAnc3Vic3lzdGVtJywgdGhlbiBhZGp1c3QgYSByZWxhdGl2ZSBwYXRoIHRv
IHRoZSBidXMKJ3Jlc2NhbicgZnVuY3Rpb24gYWNjb3JkaW5nbHkuCgpBIHNpZGUgYmVuZWZpdCBv
ZiB1c2luZyB0aGUgUENJIGRldmljZSBzeXNmcyBub2RlLCBub3QgdGhlIERSTSBvbmUsCndoaWxl
IHJlbW92aW5nIHRoZSBkZXZpY2UgaXMgdGhhdCBhIGZ1dHVyZSBzdWJ0ZXN0IG1heSBub3cgZWFz
aWx5CnBlcmZvcm0gYm90aCBkcml2ZXIgdW5iaW5kIGFuZCBkZXZpY2UgcmVtb3ZlIG9wZXJhdGlv
bnMgaW4gYSByb3cuCgp2MjogUmViYXNlIG9ubHkuCnYzOiBSZWZyZXNoLgoKU3VnZ2VzdGVkLWJ5
OiBNaWNoYcWCIFdpbmlhcnNraSA8bWljaGFsLndpbmlhcnNraUBpbnRlbC5jb20+ClNpZ25lZC1v
ZmYtYnk6IEphbnVzeiBLcnp5c3p0b2ZpayA8amFudXN6LmtyenlzenRvZmlrQGxpbnV4LmludGVs
LmNvbT4KUmV2aWV3ZWQtYnk6IE1pY2hhxYIgV2luaWFyc2tpIDxtaWNoYWwud2luaWFyc2tpQGlu
dGVsLmNvbT4KLS0tCiB0ZXN0cy9jb3JlX2hvdHVucGx1Zy5jIHwgODUgKysrKysrKysrKysrKysr
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgMzEgaW5zZXJ0aW9u
cygrKSwgNTQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvdGVzdHMvY29yZV9ob3R1bnBsdWcu
YyBiL3Rlc3RzL2NvcmVfaG90dW5wbHVnLmMKaW5kZXggZjdhNTQwMTBiLi44NDlhNzc0ZmYgMTAw
NjQ0Ci0tLSBhL3Rlc3RzL2NvcmVfaG90dW5wbHVnLmMKKysrIGIvdGVzdHMvY29yZV9ob3R1bnBs
dWcuYwpAQCAtODYsNDEgKzg2LDMwIEBAIHN0YXRpYyBpbnQgY2xvc2Vfc3lzZnMoaW50IGZkX3N5
c2ZzX2RldikKIAlyZXR1cm4gbG9jYWxfY2xvc2UoZmRfc3lzZnNfZGV2LCAiRGV2aWNlIHN5c2Zz
IG5vZGUgY2xvc2UgZmFpbGVkIik7CiB9CiAKLXN0YXRpYyB2b2lkIHByZXBhcmVfZm9yX3VuYmlu
ZChzdHJ1Y3QgaG90dW5wbHVnICpwcml2LCBjaGFyICpidWYsIGludCBidWZsZW4pCitzdGF0aWMg
dm9pZCBwcmVwYXJlKHN0cnVjdCBob3R1bnBsdWcgKnByaXYpCiB7Ci0JaW50IGxlbjsKKwljb25z
dCBjaGFyICpmaWx0ZXIgPSBpZ3RfZGV2aWNlX2ZpbHRlcl9nZXQoMCksICpzeXNmc19wYXRoOwog
Ci0JaWd0X2Fzc2VydChidWZsZW4pOworCWlndF9hc3NlcnQoZmlsdGVyKTsKIAotCXByaXYtPmZk
LnN5c2ZzX2RydiA9IG9wZW5hdChwcml2LT5mZC5zeXNmc19kZXYsICJkZXZpY2UvZHJpdmVyIiwK
LQkJCQkgICAgT19ESVJFQ1RPUlkpOwotCWlndF9hc3NlcnRfZmQocHJpdi0+ZmQuc3lzZnNfZHJ2
KTsKLQotCWxlbiA9IHJlYWRsaW5rYXQocHJpdi0+ZmQuc3lzZnNfZGV2LCAiZGV2aWNlIiwgYnVm
LCBidWZsZW4gLSAxKTsKLQlidWZbbGVuXSA9ICdcMCc7Ci0JcHJpdi0+ZGV2X2J1c19hZGRyID0g
c3RycmNocihidWYsICcvJyk7CisJcHJpdi0+ZGV2X2J1c19hZGRyID0gc3RycmNocihmaWx0ZXIs
ICcvJyk7CiAJaWd0X2Fzc2VydChwcml2LT5kZXZfYnVzX2FkZHIrKyk7CiAKLQkvKiBzeXNmc19k
ZXYgbm8gbG9uZ2VyIG5lZWRlZCAqLwotCXByaXYtPmZkLnN5c2ZzX2RldiA9IGNsb3NlX3N5c2Zz
KHByaXYtPmZkLnN5c2ZzX2Rldik7Ci0JaWd0X2Fzc2VydF9lcShwcml2LT5mZC5zeXNmc19kZXYs
IC0xKTsKLX0KLQotc3RhdGljIHZvaWQgcHJlcGFyZShzdHJ1Y3QgaG90dW5wbHVnICpwcml2LCBj
aGFyICpidWYsIGludCBidWZsZW4pCi17Ci0JcHJpdi0+ZmQuZHJtID0gbG9jYWxfZHJtX29wZW5f
ZHJpdmVyKCIiLCAiIGZvciBzdWJ0ZXN0Iik7CisJc3lzZnNfcGF0aCA9IHN0cmNocihmaWx0ZXIs
ICc6Jyk7CisJaWd0X2Fzc2VydChzeXNmc19wYXRoKyspOwogCi0JcHJpdi0+ZmQuc3lzZnNfZGV2
ID0gaWd0X3N5c2ZzX29wZW4ocHJpdi0+ZmQuZHJtKTsKKwlwcml2LT5mZC5zeXNmc19kZXYgPSBv
cGVuKHN5c2ZzX3BhdGgsIE9fRElSRUNUT1JZKTsKIAlpZ3RfYXNzZXJ0X2ZkKHByaXYtPmZkLnN5
c2ZzX2Rldik7CiAKLQlpZiAoYnVmKSB7Ci0JCXByZXBhcmVfZm9yX3VuYmluZChwcml2LCBidWYs
IGJ1Zmxlbik7Ci0JfSBlbHNlIHsKLQkJLyogcHJlcGFyZSBmb3IgYnVzIHJlc2NhbiAqLwotCQlw
cml2LT5mZC5zeXNmc19idXMgPSBvcGVuYXQocHJpdi0+ZmQuc3lzZnNfZGV2LAotCQkJCQkgICAg
ImRldmljZS9zdWJzeXN0ZW0iLCBPX0RJUkVDVE9SWSk7Ci0JCWlndF9hc3NlcnRfZmQocHJpdi0+
ZmQuc3lzZnNfYnVzKTsKLQl9CisJcHJpdi0+ZmQuc3lzZnNfZHJ2ID0gb3BlbmF0KHByaXYtPmZk
LnN5c2ZzX2RldiwgImRyaXZlciIsIE9fRElSRUNUT1JZKTsKKwlpZ3RfYXNzZXJ0X2ZkKHByaXYt
PmZkLnN5c2ZzX2Rydik7CisKKwlwcml2LT5mZC5zeXNmc19idXMgPSBvcGVuYXQocHJpdi0+ZmQu
c3lzZnNfZGV2LCAic3Vic3lzdGVtL2RldmljZXMiLAorCQkJCSAgICBPX0RJUkVDVE9SWSk7CisJ
aWd0X2Fzc2VydF9mZChwcml2LT5mZC5zeXNmc19idXMpOworCisJcHJpdi0+ZmQuc3lzZnNfZGV2
ID0gY2xvc2Vfc3lzZnMocHJpdi0+ZmQuc3lzZnNfZGV2KTsKKwlpZ3RfYXNzZXJ0X2VxKHByaXYt
PmZkLnN5c2ZzX2RldiwgLTEpOwogfQogCiAvKiBVbmJpbmQgdGhlIGRyaXZlciBmcm9tIHRoZSBk
ZXZpY2UgKi8KQEAgLTEzMyw4ICsxMjIsNiBAQCBzdGF0aWMgdm9pZCBkcml2ZXJfdW5iaW5kKHN0
cnVjdCBob3R1bnBsdWcgKnByaXYsIGNvbnN0IGNoYXIgKnByZWZpeCkKIAlpZ3Rfc3lzZnNfc2V0
KHByaXYtPmZkLnN5c2ZzX2RydiwgInVuYmluZCIsIHByaXYtPmRldl9idXNfYWRkcik7CiAJaWd0
X3Jlc2V0X3RpbWVvdXQoKTsKIAlwcml2LT5mYWlsdXJlID0gTlVMTDsKLQotCS8qIGRvbid0IGNs
b3NlIGZkLnN5c2ZzX2RydiwgaXQgd2lsbCBiZSB1c2VkIGZvciBkcml2ZXIgcmViaW5kaW5nICov
CiB9CiAKIC8qIFJlLWJpbmQgdGhlIGRyaXZlciB0byB0aGUgZGV2aWNlICovCkBAIC0xNDcsMTgg
KzEzNCwyMCBAQCBzdGF0aWMgdm9pZCBkcml2ZXJfYmluZChzdHJ1Y3QgaG90dW5wbHVnICpwcml2
KQogCWlndF9zeXNmc19zZXQocHJpdi0+ZmQuc3lzZnNfZHJ2LCAiYmluZCIsIHByaXYtPmRldl9i
dXNfYWRkcik7CiAJaWd0X3Jlc2V0X3RpbWVvdXQoKTsKIAlwcml2LT5mYWlsdXJlID0gTlVMTDsK
LQotCWNsb3NlKHByaXYtPmZkLnN5c2ZzX2Rydik7CiB9CiAKIC8qIFJlbW92ZSAodmlydHVhbGx5
IHVucGx1ZykgdGhlIGRldmljZSBmcm9tIGl0cyBidXMgKi8KIHN0YXRpYyB2b2lkIGRldmljZV91
bnBsdWcoc3RydWN0IGhvdHVucGx1ZyAqcHJpdiwgY29uc3QgY2hhciAqcHJlZml4KQogeworCXBy
aXYtPmZkLnN5c2ZzX2RldiA9IG9wZW5hdChwcml2LT5mZC5zeXNmc19idXMsIHByaXYtPmRldl9i
dXNfYWRkciwKKwkJCQkgICAgT19ESVJFQ1RPUlkpOworCWlndF9hc3NlcnRfZmQocHJpdi0+ZmQu
c3lzZnNfZGV2KTsKKwogCWlndF9kZWJ1ZygiJXN1bnBsdWdnaW5nIHRoZSBkZXZpY2VcbiIsIHBy
ZWZpeCk7CiAKIAlwcml2LT5mYWlsdXJlID0gIkRldmljZSB1bnBsdWcgdGltZW91dCEiOwogCWln
dF9zZXRfdGltZW91dCg2MCwgcHJpdi0+ZmFpbHVyZSk7Ci0JaWd0X3N5c2ZzX3NldChwcml2LT5m
ZC5zeXNmc19kZXYsICJkZXZpY2UvcmVtb3ZlIiwgIjEiKTsKKwlpZ3Rfc3lzZnNfc2V0KHByaXYt
PmZkLnN5c2ZzX2RldiwgInJlbW92ZSIsICIxIik7CiAJaWd0X3Jlc2V0X3RpbWVvdXQoKTsKIAlw
cml2LT5mYWlsdXJlID0gTlVMTDsKIApAQCAtMTcyLDExICsxNjEsOSBAQCBzdGF0aWMgdm9pZCBi
dXNfcmVzY2FuKHN0cnVjdCBob3R1bnBsdWcgKnByaXYpCiAKIAlwcml2LT5mYWlsdXJlID0gIkJ1
cyByZXNjYW4gdGltZW91dCEiOwogCWlndF9zZXRfdGltZW91dCg2MCwgcHJpdi0+ZmFpbHVyZSk7
Ci0JaWd0X3N5c2ZzX3NldChwcml2LT5mZC5zeXNmc19idXMsICJyZXNjYW4iLCAiMSIpOworCWln
dF9zeXNmc19zZXQocHJpdi0+ZmQuc3lzZnNfYnVzLCAiLi4vcmVzY2FuIiwgIjEiKTsKIAlpZ3Rf
cmVzZXRfdGltZW91dCgpOwogCXByaXYtPmZhaWx1cmUgPSBOVUxMOwotCi0JY2xvc2UocHJpdi0+
ZmQuc3lzZnNfYnVzKTsKIH0KIAogc3RhdGljIHZvaWQgaGVhbHRoY2hlY2soc3RydWN0IGhvdHVu
cGx1ZyAqcHJpdikKQEAgLTIyOSwxNCArMjE2LDYgQEAgc3RhdGljIHZvaWQgc2V0X2ZpbHRlcl9m
cm9tX2RldmljZShpbnQgZmQpCiAKIHN0YXRpYyB2b2lkIHVuYmluZF9yZWJpbmQoc3RydWN0IGhv
dHVucGx1ZyAqcHJpdikKIHsKLQljaGFyIGJ1ZltQQVRIX01BWF07Ci0KLQlwcmVwYXJlKHByaXYs
IGJ1Ziwgc2l6ZW9mKGJ1ZikpOwotCi0JaWd0X2RlYnVnKCJjbG9zaW5nIHRoZSBkZXZpY2VcbiIp
OwotCXByaXYtPmZkLmRybSA9IGNsb3NlX2RldmljZShwcml2LT5mZC5kcm0pOwotCWlndF9hc3Nl
cnRfZXEocHJpdi0+ZmQuZHJtLCAtMSk7Ci0KIAlkcml2ZXJfdW5iaW5kKHByaXYsICIiKTsKIAog
CWRyaXZlcl9iaW5kKHByaXYpOwpAQCAtMjQ2LDEyICsyMjUsNiBAQCBzdGF0aWMgdm9pZCB1bmJp
bmRfcmViaW5kKHN0cnVjdCBob3R1bnBsdWcgKnByaXYpCiAKIHN0YXRpYyB2b2lkIHVucGx1Z19y
ZXNjYW4oc3RydWN0IGhvdHVucGx1ZyAqcHJpdikKIHsKLQlwcmVwYXJlKHByaXYsIE5VTEwsIDAp
OwotCi0JaWd0X2RlYnVnKCJjbG9zaW5nIHRoZSBkZXZpY2VcbiIpOwotCXByaXYtPmZkLmRybSA9
IGNsb3NlX2RldmljZShwcml2LT5mZC5kcm0pOwotCWlndF9hc3NlcnRfZXEocHJpdi0+ZmQuZHJt
LCAtMSk7Ci0KIAlkZXZpY2VfdW5wbHVnKHByaXYsICIiKTsKIAogCWJ1c19yZXNjYW4ocHJpdik7
CkBAIC0yNjEsOSArMjM0LDcgQEAgc3RhdGljIHZvaWQgdW5wbHVnX3Jlc2NhbihzdHJ1Y3QgaG90
dW5wbHVnICpwcml2KQogCiBzdGF0aWMgdm9pZCBob3R1bmJpbmRfbGF0ZWNsb3NlKHN0cnVjdCBo
b3R1bnBsdWcgKnByaXYpCiB7Ci0JY2hhciBidWZbUEFUSF9NQVhdOwotCi0JcHJlcGFyZShwcml2
LCBidWYsIHNpemVvZihidWYpKTsKKwlwcml2LT5mZC5kcm0gPSBsb2NhbF9kcm1fb3Blbl9kcml2
ZXIoIiIsICIgZm9yIGhvdHVuYmluZCIpOwogCiAJZHJpdmVyX3VuYmluZChwcml2LCAiaG90ICIp
OwogCkBAIC0yNzcsNyArMjQ4LDcgQEAgc3RhdGljIHZvaWQgaG90dW5iaW5kX2xhdGVjbG9zZShz
dHJ1Y3QgaG90dW5wbHVnICpwcml2KQogCiBzdGF0aWMgdm9pZCBob3R1bnBsdWdfbGF0ZWNsb3Nl
KHN0cnVjdCBob3R1bnBsdWcgKnByaXYpCiB7Ci0JcHJlcGFyZShwcml2LCBOVUxMLCAwKTsKKwlw
cml2LT5mZC5kcm0gPSBsb2NhbF9kcm1fb3Blbl9kcml2ZXIoIiIsICIgZm9yIGhvdHVucGx1ZyIp
OwogCiAJZGV2aWNlX3VucGx1Zyhwcml2LCAiaG90ICIpOwogCkBAIC0zMTMsNiArMjg0LDggQEAg
aWd0X21haW4KIAkJc2V0X2ZpbHRlcl9mcm9tX2RldmljZShmZF9kcm0pOwogCiAJCWlndF9hc3Nl
cnRfZXEoY2xvc2VfZGV2aWNlKGZkX2RybSksIC0xKTsKKworCQlwcmVwYXJlKCZwcml2KTsKIAl9
CiAKIAlpZ3RfZGVzY3JpYmUoIkNoZWNrIGlmIHRoZSBkcml2ZXIgY2FuIGJlIGNsZWFubHkgdW5i
b3VuZCBmcm9tIGEgZGV2aWNlIGJlbGlldmVkIHRvIGJlIGNsb3NlZCIpOwpAQCAtMzQwLDYgKzMx
MywxMCBAQCBpZ3RfbWFpbgogCWlndF9zdWJ0ZXN0KCJob3R1bnBsdWctbGF0ZWNsb3NlIikKIAkJ
aG90dW5wbHVnX2xhdGVjbG9zZSgmcHJpdik7CiAKLQlpZ3RfZml4dHVyZQorCWlndF9maXh0dXJl
IHsKIAkJcG9zdF9oZWFsdGhjaGVjaygmcHJpdik7CisKKwkJY2xvc2UocHJpdi5mZC5zeXNmc19i
dXMpOworCQljbG9zZShwcml2LmZkLnN5c2ZzX2Rydik7CisJfQogfQotLSAKMi4yMS4xCgpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFp
bGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

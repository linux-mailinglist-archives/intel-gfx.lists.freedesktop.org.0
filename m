Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 64F77104149
	for <lists+intel-gfx@lfdr.de>; Wed, 20 Nov 2019 17:49:30 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5B1BC6EA64;
	Wed, 20 Nov 2019 16:49:28 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 114766EA64
 for <intel-gfx@lists.freedesktop.org>; Wed, 20 Nov 2019 16:49:26 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 19274641-1500050 for multiple; Wed, 20 Nov 2019 16:49:16 +0000
MIME-Version: 1.0
To: intel-gfx@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <20191120164246.3943402-1-chris@chris-wilson.co.uk>
References: <20191120134113.3777499-1-chris@chris-wilson.co.uk>
 <20191120164246.3943402-1-chris@chris-wilson.co.uk>
Message-ID: <157426855308.13839.12032162100792159894@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Wed, 20 Nov 2019 16:49:13 +0000
Subject: Re: [Intel-gfx] [PATCH] drm/i915/gem: Reduce ggtt_flush() from a
 wait-for-idle to a mere barrier flush
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBDaHJpcyBXaWxzb24gKDIwMTktMTEtMjAgMTY6NDI6NDYpCj4gU2luY2Ugd2UgdXNl
IGJhcnJpZXJzLCB3ZSBuZWVkIG9ubHkgZXhwbGljaXRseSBmbHVzaCB0aG9zZSBiYXJyaWVycyB0
bwo+IGVuc3VyZSB0aGEgd2UgY2FuIHJlY2xhaW0gdGhlIGF2YWlsYWJsZSBnZ3R0IGZvciBvdXJz
ZWx2ZXMuIFRoZSBiYXJyaWVyCj4gZmx1c2ggd2FzIGltcGxpY2l0IGluc2lkZSB0aGUgaW50ZWxf
Z3Rfd2FpdF9mb3JfaWRsZSgpIC0tIGV4Y2VwdCBiZWNhdXNlCj4gd2UgdXNlIGk5MTVfZ2VtX2V2
aWN0IGZyb20gaW5zaWRlIGFuIGFjdGl2ZSB0aW1lbGluZSBkdXJpbmcgZXhlY2J1Ziwgd2UKPiBj
b3VsZCBlYXNpbHkgZW5kIHVwIHdhaXRpbmcgdXBvbiBvdXJzZWx2ZXMuCj4gCj4gdjI6IFdhaXQg
b24gdGhlIGJhcnJpZXJzIHRvIGVuc3VyZSB0aGF0IGFueSBjb250ZXh0IHVucGlubmluZyB0aGF0
IGNhbgo+IGJlIGRvbmUsIHdpbGwgYmUgZG9uZS4KPiAKPiBGaXhlczogNzkzNmEyMmRkNDY2ICgi
ZHJtL2k5MTUvZ3Q6IFdhaXQgZm9yIG5ldyByZXF1ZXN0cyBpbiBpbnRlbF9ndF9yZXRpcmVfcmVx
dWVzdHMoKSIpCj4gRml4ZXM6IGE0NmJmZGM4M2ZlZSAoImRybS9pOTE1L2d0OiBXYWl0IGZvciBu
ZXcgcmVxdWVzdHMgaW4gaW50ZWxfZ3RfcmV0aXJlX3JlcXVlc3RzKCkiKQo+IFRlc3RjYXNlOiBp
Z3QvZ2VtX2V4ZWNfcmVsb2MvYmFzaWMtcmFuZ2UKPiBTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxz
b24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KPiBDYzogVHZydGtvIFVyc3VsaW4gPHR2cnRr
by51cnN1bGluQGludGVsLmNvbT4KPiAtLS0KPiAgLi4uL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfaGVhcnRiZWF0LmMgIHwgIDggKysrLQo+ICAuLi4vZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZV9oZWFydGJlYXQuaCAgfCAgNCArLQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9z
ZWxmdGVzdF9jb250ZXh0LmMgICAgfCAzOCArKysrLS0tLS0tLS0tLS0tLS0tCj4gIC4uLi9kcm0v
aTkxNS9ndC9zZWxmdGVzdF9lbmdpbmVfaGVhcnRiZWF0LmMgICB8ICA3ICsrKy0KPiAgZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZXZpY3QuYyAgICAgICAgIHwgMjYgKysrKysrKysrKysr
LQo+ICA1IGZpbGVzIGNoYW5nZWQsIDQ4IGluc2VydGlvbnMoKyksIDM1IGRlbGV0aW9ucygtKQo+
IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVh
cnRiZWF0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0
LmMKPiBpbmRleCBjOTFmZDRlNGFmMjkuLjAxNzM3MjBhZjA1YSAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmMKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmMKPiBAQCAtMjEyLDEw
ICsyMTIsMTQgQEAgaW50IGludGVsX2VuZ2luZV9wdWxzZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICplbmdpbmUpCj4gICAgICAgICByZXR1cm4gZXJyOwo+ICB9Cj4gIAo+IC1pbnQgaW50ZWxfZW5n
aW5lX2ZsdXNoX2JhcnJpZXJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAraW50
IGludGVsX2VuZ2luZV9mbHVzaF9iYXJyaWVycyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdp
bmUsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaTkxNV9yZXF1ZXN0
ICoqb3V0KQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycTsKPiAgCj4gKyAg
ICAgICBpZiAob3V0KQo+ICsgICAgICAgICAgICAgICAqb3V0ID0gTlVMTDsKPiArCj4gICAgICAg
ICBpZiAobGxpc3RfZW1wdHkoJmVuZ2luZS0+YmFycmllcl90YXNrcykpCj4gICAgICAgICAgICAg
ICAgIHJldHVybiAwOwo+ICAKPiBAQCAtMjI0LDYgKzIyOCw4IEBAIGludCBpbnRlbF9lbmdpbmVf
Zmx1c2hfYmFycmllcnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQo+ICAgICAgICAg
ICAgICAgICByZXR1cm4gUFRSX0VSUihycSk7Cj4gIAo+ICAgICAgICAgaWRsZV9wdWxzZShlbmdp
bmUsIHJxKTsKPiArICAgICAgIGlmIChvdXQpCj4gKyAgICAgICAgICAgICAgICpvdXQgPSBpOTE1
X3JlcXVlc3RfZ2V0KHJxKTsKPiAgICAgICAgIGk5MTVfcmVxdWVzdF9hZGQocnEpOwo+ICAKPiAg
ICAgICAgIHJldHVybiAwOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9lbmdpbmVfaGVhcnRiZWF0LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfaGVhcnRiZWF0LmgKPiBpbmRleCBhN2I4YzBmOWUwMDUuLjE3ZTk3M2Q4NmY1YyAxMDA2
NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0
LmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0
LmgKPiBAQCAtNyw2ICs3LDcgQEAKPiAgI2lmbmRlZiBJTlRFTF9FTkdJTkVfSEVBUlRCRUFUX0gK
PiAgI2RlZmluZSBJTlRFTF9FTkdJTkVfSEVBUlRCRUFUX0gKPiAgCj4gK3N0cnVjdCBpOTE1X3Jl
cXVlc3Q7Cj4gIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3M7Cj4gIAo+ICB2b2lkIGludGVsX2VuZ2lu
ZV9pbml0X2hlYXJ0YmVhdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwo+IEBAIC0x
OCw2ICsxOSw3IEBAIHZvaWQgaW50ZWxfZW5naW5lX3BhcmtfaGVhcnRiZWF0KHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSk7Cj4gIHZvaWQgaW50ZWxfZW5naW5lX3VucGFya19oZWFydGJl
YXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKPiAgCj4gIGludCBpbnRlbF9lbmdp
bmVfcHVsc2Uoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKPiAtaW50IGludGVsX2Vu
Z2luZV9mbHVzaF9iYXJyaWVycyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwo+ICtp
bnQgaW50ZWxfZW5naW5lX2ZsdXNoX2JhcnJpZXJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBpOTE1X3JlcXVl
c3QgKipiYXJyaWVyKTsKPiAgCj4gICNlbmRpZiAvKiBJTlRFTF9FTkdJTkVfSEVBUlRCRUFUX0gg
Ki8KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfY29udGV4
dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfY29udGV4dC5jCj4gaW5kZXgg
MzU4NmFmNjM2MzA0Li4wYzBmMTMwODAyZmIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3Qvc2VsZnRlc3RfY29udGV4dC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3Qvc2VsZnRlc3RfY29udGV4dC5jCj4gQEAgLTQxLDMzICs0MSw2IEBAIHN0YXRpYyBpbnQgcmVx
dWVzdF9zeW5jKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQo+ICAgICAgICAgcmV0dXJuIGVycjsK
PiAgfQo+ICAKPiAtc3RhdGljIGludCBjb250ZXh0X3N5bmMoc3RydWN0IGludGVsX2NvbnRleHQg
KmNlKQo+IC17Cj4gLSAgICAgICBzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRsID0gY2UtPnRpbWVs
aW5lOwo+IC0gICAgICAgaW50IGVyciA9IDA7Cj4gLQo+IC0gICAgICAgbXV0ZXhfbG9jaygmdGwt
Pm11dGV4KTsKPiAtICAgICAgIGRvIHsKPiAtICAgICAgICAgICAgICAgc3RydWN0IGRtYV9mZW5j
ZSAqZmVuY2U7Cj4gLSAgICAgICAgICAgICAgIGxvbmcgdGltZW91dDsKPiAtCj4gLSAgICAgICAg
ICAgICAgIGZlbmNlID0gaTkxNV9hY3RpdmVfZmVuY2VfZ2V0KCZ0bC0+bGFzdF9yZXF1ZXN0KTsK
PiAtICAgICAgICAgICAgICAgaWYgKCFmZW5jZSkKPiAtICAgICAgICAgICAgICAgICAgICAgICBi
cmVhazsKPiAtCj4gLSAgICAgICAgICAgICAgIHRpbWVvdXQgPSBkbWFfZmVuY2Vfd2FpdF90aW1l
b3V0KGZlbmNlLCBmYWxzZSwgSFogLyAxMCk7Cj4gLSAgICAgICAgICAgICAgIGlmICh0aW1lb3V0
IDwgMCkKPiAtICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSB0aW1lb3V0Owo+IC0gICAgICAg
ICAgICAgICBlbHNlCj4gLSAgICAgICAgICAgICAgICAgICAgICAgaTkxNV9yZXF1ZXN0X3JldGly
ZV91cHRvKHRvX3JlcXVlc3QoZmVuY2UpKTsKPiAtCj4gLSAgICAgICAgICAgICAgIGRtYV9mZW5j
ZV9wdXQoZmVuY2UpOwo+IC0gICAgICAgfSB3aGlsZSAoIWVycik7Cj4gLSAgICAgICBtdXRleF91
bmxvY2soJnRsLT5tdXRleCk7Cj4gLQo+IC0gICAgICAgcmV0dXJuIGVycjsKPiAtfQo+IC0KPiAg
c3RhdGljIGludCBfX2xpdmVfY29udGV4dF9zaXplKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGk5MTVfZ2VtX2Nv
bnRleHQgKmZpeG1lKQo+ICB7Cj4gQEAgLTIwMiw2ICsxNzUsNyBAQCBzdGF0aWMgaW50IF9fbGl2
ZV9hY3RpdmVfY29udGV4dChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCj4gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmZpeG1l
KQo+ICB7Cj4gICAgICAgICB1bnNpZ25lZCBsb25nIHNhdmVkX2hlYXJ0YmVhdDsKPiArICAgICAg
IHN0cnVjdCBpOTE1X3JlcXVlc3QgKmJhcnJpZXI7Cj4gICAgICAgICBzdHJ1Y3QgaW50ZWxfY29u
dGV4dCAqY2U7Cj4gICAgICAgICBpbnQgcGFzczsKPiAgICAgICAgIGludCBlcnI7Cj4gQEAgLTI2
OSwxNyArMjQzLDIxIEBAIHN0YXRpYyBpbnQgX19saXZlX2FjdGl2ZV9jb250ZXh0KHN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKPiAgICAgICAgIH0KPiAgCj4gICAgICAgICAvKiBOb3cg
bWFrZSBzdXJlIG91ciBpZGxlLWJhcnJpZXJzIGFyZSBmbHVzaGVkICovCj4gLSAgICAgICBlcnIg
PSBpbnRlbF9lbmdpbmVfZmx1c2hfYmFycmllcnMoZW5naW5lKTsKPiArICAgICAgIGVyciA9IGlu
dGVsX2VuZ2luZV9mbHVzaF9iYXJyaWVycyhlbmdpbmUsICZiYXJyaWVyKTsKPiAgICAgICAgIGlm
IChlcnIpCj4gICAgICAgICAgICAgICAgIGdvdG8gZXJyOwo+ICAKPiAtICAgICAgIGVyciA9IGNv
bnRleHRfc3luYyhlbmdpbmUtPmtlcm5lbF9jb250ZXh0KTsKPiAtICAgICAgIGlmIChlcnIpCj4g
KyAgICAgICBpZiAoaTkxNV9yZXF1ZXN0X3dhaXQoYmFycmllciwgMCwgSFogLyA1KSA8IDApIHsK
PiArICAgICAgICAgICAgICAgaTkxNV9yZXF1ZXN0X3B1dChiYXJyaWVyKTsKPiArICAgICAgICAg
ICAgICAgZXJyID0gLUVUSU1FOwo+ICAgICAgICAgICAgICAgICBnb3RvIGVycjsKPiArICAgICAg
IH0KPiArICAgICAgIGk5MTVfcmVxdWVzdF9wdXQoYmFycmllcik7Cj4gIAo+ICAgICAgICAgaWYg
KCFpOTE1X2FjdGl2ZV9pc19pZGxlKCZjZS0+YWN0aXZlKSkgewo+ICAgICAgICAgICAgICAgICBw
cl9lcnIoImNvbnRleHQgaXMgc3RpbGwgYWN0aXZlISIpOwo+ICAgICAgICAgICAgICAgICBlcnIg
PSAtRUlOVkFMOwo+ICsgICAgICAgICAgICAgICBnb3RvIGVycjsKPiAgICAgICAgIH0KPiAgCj4g
ICAgICAgICBpZiAoaW50ZWxfZW5naW5lX3BtX2lzX2F3YWtlKGVuZ2luZSkpIHsKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5lX2hlYXJ0YmVhdC5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5lX2hlYXJ0YmVhdC5jCj4g
aW5kZXggZjY2NWEwZTIzYzYxLi4wYmQ5YWZjMjBlZjMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5lX2hlYXJ0YmVhdC5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5lX2hlYXJ0YmVhdC5jCj4gQEAgLTExNSw2
ICsxMTUsMTEgQEAgc3RhdGljIGludCBfX2xpdmVfaWRsZV9wdWxzZShzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUsCj4gICAgICAgICByZXR1cm4gZXJyOwo+ICB9Cj4gIAo+ICtzdGF0aWMg
aW50IHdyYXBfZW5naW5lX2ZsdXNoX2JhcnJpZXJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSkKPiArewo+ICsgICAgICAgcmV0dXJuIGludGVsX2VuZ2luZV9mbHVzaF9iYXJyaWVycyhl
bmdpbmUsIE5VTEwpOwo+ICt9Cj4gKwo+ICBzdGF0aWMgaW50IGxpdmVfaWRsZV9mbHVzaCh2b2lk
ICphcmcpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBpbnRlbF9ndCAqZ3QgPSBhcmc7Cj4gQEAgLTEy
Niw3ICsxMzEsNyBAQCBzdGF0aWMgaW50IGxpdmVfaWRsZV9mbHVzaCh2b2lkICphcmcpCj4gIAo+
ICAgICAgICAgZm9yX2VhY2hfZW5naW5lKGVuZ2luZSwgZ3QsIGlkKSB7Cj4gICAgICAgICAgICAg
ICAgIGludGVsX2VuZ2luZV9wbV9nZXQoZW5naW5lKTsKPiAtICAgICAgICAgICAgICAgZXJyID0g
X19saXZlX2lkbGVfcHVsc2UoZW5naW5lLCBpbnRlbF9lbmdpbmVfZmx1c2hfYmFycmllcnMpOwo+
ICsgICAgICAgICAgICAgICBlcnIgPSBfX2xpdmVfaWRsZV9wdWxzZShlbmdpbmUsIHdyYXBfZW5n
aW5lX2ZsdXNoX2JhcnJpZXJzKTsKPiAgICAgICAgICAgICAgICAgaW50ZWxfZW5naW5lX3BtX3B1
dChlbmdpbmUpOwo+ICAgICAgICAgICAgICAgICBpZiAoZXJyKQo+ICAgICAgICAgICAgICAgICAg
ICAgICAgIGJyZWFrOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dl
bV9ldmljdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZXZpY3QuYwo+IGluZGV4
IDdlNjJjMzEwMjkwZi4uOTFkYWY4N2Y0OTFlIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2VtX2V2aWN0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dlbV9ldmljdC5jCj4gQEAgLTI4LDcgKzI4LDcgQEAKPiAgCj4gICNpbmNsdWRlIDxkcm0vaTkx
NV9kcm0uaD4KPiAgCj4gLSNpbmNsdWRlICJnZW0vaTkxNV9nZW1fY29udGV4dC5oIgo+ICsjaW5j
bHVkZSAiZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5oIgo+ICAjaW5jbHVkZSAiZ3QvaW50ZWxf
Z3RfcmVxdWVzdHMuaCIKPiAgCj4gICNpbmNsdWRlICJpOTE1X2Rydi5oIgo+IEBAIC00MCw2ICs0
MCw5IEBAIEk5MTVfU0VMRlRFU1RfREVDTEFSRShzdGF0aWMgc3RydWN0IGlndF9ldmljdF9jdGwg
ewo+ICAKPiAgc3RhdGljIGludCBnZ3R0X2ZsdXNoKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCj4gIHsK
PiArICAgICAgIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZTsKPiArICAgICAgIGVudW0g
aW50ZWxfZW5naW5lX2lkIGlkOwo+ICsKPiAgICAgICAgIC8qCj4gICAgICAgICAgKiBOb3QgZXZl
cnl0aGluZyBpbiB0aGUgR0dUVCBpcyB0cmFja2VkIHZpYSB2bWEgKG90aGVyd2lzZSB3ZQo+ICAg
ICAgICAgICogY291bGQgZXZpY3QgYXMgcmVxdWlyZWQgd2l0aCBtaW5pbWFsIHN0YWxsaW5nKSBz
byB3ZSBhcmUgZm9yY2VkCj4gQEAgLTQ3LDcgKzUwLDI2IEBAIHN0YXRpYyBpbnQgZ2d0dF9mbHVz
aChzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQo+ICAgICAgICAgICogdGhlIGhvcGVzIHRoYXQgd2UgY2Fu
IHRoZW4gcmVtb3ZlIGNvbnRleHRzIGFuZCB0aGUgbGlrZSBvbmx5Cj4gICAgICAgICAgKiBib3Vu
ZCBieSB0aGVpciBhY3RpdmUgcmVmZXJlbmNlLgo+ICAgICAgICAgICovCj4gLSAgICAgICByZXR1
cm4gaW50ZWxfZ3Rfd2FpdF9mb3JfaWRsZShndCwgTUFYX1NDSEVEVUxFX1RJTUVPVVQpOwo+ICsg
ICAgICAgaW50ZWxfZ3RfcmV0aXJlX3JlcXVlc3RzKGd0KTsKPiArICAgICAgIGZvcl9lYWNoX2Vu
Z2luZShlbmdpbmUsIGd0LCBpZCkgewo+ICsgICAgICAgICAgICAgICBzdHJ1Y3QgaTkxNV9yZXF1
ZXN0ICpiYXJyaWVyOwo+ICsgICAgICAgICAgICAgICBsb25nIGVycjsKPiArCj4gKyAgICAgICAg
ICAgICAgIC8qIEEgYmFycmllciB3aWxsIHVucGluIGFueXRoaW5nIHRoYXQgaXMgcmVhZHkgdG8g
YmUgdW5waW5uZWQgKi8KPiArICAgICAgICAgICAgICAgZXJyID0gaW50ZWxfZW5naW5lX2ZsdXNo
X2JhcnJpZXJzKGVuZ2luZSwgJmJhcnJpZXIpOwo+ICsgICAgICAgICAgICAgICBpZiAoZXJyKQo+
ICsgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnI7Cj4gKwo+ICsgICAgICAgICAgICAg
ICBlcnIgPSBpOTE1X3JlcXVlc3Rfd2FpdChiYXJyaWVyLAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBJOTE1X1dBSVRfSU5URVJSVVBUSUJMRSwKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTUFYX1NDSEVEVUxFX1RJTUVPVVQpOwo+ICsg
ICAgICAgICAgICAgICBpOTE1X3JlcXVlc3RfcHV0KGJhcnJpZXIpOwo+ICsgICAgICAgICAgICAg
ICBpZiAoZXJyKQo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnI7CgpJdCdzIHN0
aWxsIHdlYWtlciB0aGFuIGl0IHdhcyBiZWZvcmUsIEkgY2FuIGtlZXAgcGFwZXJpbmcgb3ZlciBp
dC4gOnwKTG9uZyB0ZXJtIHBsYW4gaXMgcGlwZWxpbmVkIGV2aWN0aW9ucy4gT2ggYm95LgotQ2hy
aXMKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwt
Z2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

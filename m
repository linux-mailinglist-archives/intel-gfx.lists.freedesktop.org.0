Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0FC4011595C
	for <lists+intel-gfx@lfdr.de>; Fri,  6 Dec 2019 23:35:43 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0612D6FA9E;
	Fri,  6 Dec 2019 22:35:41 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3E9606FA9E
 for <intel-gfx@lists.freedesktop.org>; Fri,  6 Dec 2019 22:35:40 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 06 Dec 2019 14:35:39 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,286,1571727600"; d="scan'208";a="209576277"
Received: from fmsmsx103.amr.corp.intel.com ([10.18.124.201])
 by fmsmga007.fm.intel.com with ESMTP; 06 Dec 2019 14:35:39 -0800
Received: from fmsmsx158.amr.corp.intel.com (10.18.116.75) by
 FMSMSX103.amr.corp.intel.com (10.18.124.201) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Fri, 6 Dec 2019 14:35:39 -0800
Received: from fmsmsx117.amr.corp.intel.com ([169.254.3.27]) by
 fmsmsx158.amr.corp.intel.com ([169.254.15.80]) with mapi id 14.03.0439.000;
 Fri, 6 Dec 2019 14:35:39 -0800
From: "Souza, Jose" <jose.souza@intel.com>
To: "Roper, Matthew D" <matthew.d.roper@intel.com>
Thread-Topic: [PATCH v4 3/3] drm/i915/display: Refactor
 intel_commit_modeset_disables()
Thread-Index: AQHVq6+EPRXGKKKo40eF7Q4a4PBlcaeuNe4AgAADxgA=
Date: Fri, 6 Dec 2019 22:35:38 +0000
Message-ID: <8b666978070d1add26781f144c37c737e1ca7760.camel@intel.com>
References: <20191205210350.96795-1-jose.souza@intel.com>
 <20191205210350.96795-3-jose.souza@intel.com>
 <20191206222208.GA5351@mdroper-desk1.amr.corp.intel.com>
In-Reply-To: <20191206222208.GA5351@mdroper-desk1.amr.corp.intel.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.24.8.230]
Content-ID: <A5A814CB93047646936DB5ADACCA4266@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH v4 3/3] drm/i915/display: Refactor
 intel_commit_modeset_disables()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "De Marchi, Lucas" <lucas.demarchi@intel.com>,
 "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCAyMDE5LTEyLTA2IGF0IDE0OjIyIC0wODAwLCBNYXR0IFJvcGVyIHdyb3RlOg0KPiBP
biBUaHUsIERlYyAwNSwgMjAxOSBhdCAwMTowMzo1MFBNIC0wODAwLCBKb3PDqSBSb2JlcnRvIGRl
IFNvdXphDQo+IHdyb3RlOg0KPiA+IENvbW1pdCA5YzcyMmUxN2MxYjkgKCJkcm0vaTkxNTogRGlz
YWJsZSBwaXBlcyBpbiByZXZlcnNlIG9yZGVyIikNCj4gPiByZXZlcnRlZCB0aGUgb3JkZXIgdGhh
dCBwaXBlcyBnZXRzIGRpc2FibGVkIGJlY2F1c2Ugb2YgVEdMDQo+ID4gbWFzdGVyL3NsYXZlIHJl
bGF0aW9uc2hpcCBiZXR3ZWVuIHRyYW5zY29kZXJzIGluIE1TVCBtb2RlLg0KPiA+IA0KPiA+IEJ1
dCBhcyBzdGF0ZWQgaW4gYSBjb21tZW50IGluIHNrbF9jb21taXRfbW9kZXNldF9lbmFibGVzKCkg
dGhlDQo+ID4gZW5hYmxpbmcgb3JkZXIgaXMgbm90IGFsd2F5cyBjcmVzY2VudCwgcG9zc2libHkg
Y2F1c2luZyBwcmV2aW91c2x5DQo+ID4gc2VsZWN0ZWQgc2xhdmUgdHJhbnNjb2RlciBiZWluZyBl
bmFibGVkIGJlZm9yZSBtYXN0ZXIgc28gYW5vdGhlcg0KPiA+IGFwcHJvYWNoIHdpbGwgYmUgbmVl
ZGVkIHRvIHNlbGVjdCBhIHRyYW5zY29kZXIgdG8gbWFzdGVyIGluIE1TVA0KPiA+IG1vZGUuDQo+
ID4gSXQgd2lsbCBiZSBzaW1pbGFyIHRvIHRoZSBhcHByb2FjaCB0YWtlbiBpbiBwb3J0IHN5bmMu
DQo+ID4gDQo+ID4gQnV0IGluc3RlYWQgb2YgaW1wbGVtZW50IHNvbWV0aGluZyBsaWtlDQo+ID4g
aW50ZWxfdHJhbnNfcG9ydF9zeW5jX21vZGVzZXRfZGlzYWJsZXMoKSB0byBNU1QgbGV0cyBzaW1w
bHkgaXQgYW5kDQo+ID4gaXRlcmF0ZSBvdmVyIGFsbCBwaXBlcyAyIHRpbWVzLCB0aGUgZmlyc3Qg
b25lIGRpc2FibGluZyBhbnkgc2xhdmUNCj4gPiBhbmQNCj4gPiB0aGVuIGRpc2FibGluZyBldmVy
eXRoaW5nIGVsc2UuDQo+ID4gVGhlIE1TVCBiaXRzIHdpbGwgYmUgYWRkZWQgaW4gYW5vdGhlciBw
YXRjaC4NCj4gPiANCj4gPiB2MjoNCj4gPiBOb3QgdXNpbmcgY3J0Yy0+YWN0aXZlIGFzIGl0IGlz
IGRlcHJlY2F0ZWQNCj4gPiANCj4gPiB2MzoNCj4gPiBSZW1vdmluZyBpc190cmFuc19wb3J0X3N5
bmNfbW9kZSgpIGNoZWNrLCBqdXN0IGNoZWNrIGZvcg0KPiA+IGlzX3RyYW5zX3BvcnRfc3luY19t
YXN0ZXIoKSBpcyBlbm91Z2gNCj4gPiANCj4gPiB2NDoNCj4gPiBBZGRpbmcgYW5kIHVzaW5nIGlz
X3RyYW5zX3BvcnRfc3luY19zbGF2ZSgpLCBvdGhlcndpc2Ugbm9uLXBvcnQNCj4gPiBzeW5jDQo+
ID4gcGlwZXMgd2lsbCBiZSBkaXNhYmxlZCBpbiB0aGUgZmlyc3QgbG9vcCwgd2hhdCBpcyBub3Qg
d3JvbmcgYnV0IGlzDQo+ID4gbm90IHdoYXQgcGF0Y2ggZGVzY3JpcHRpb24gcHJvbWlzZXMNCj4g
PiANCj4gPiBDYzogTHVjYXMgRGUgTWFyY2hpIDxsdWNhcy5kZW1hcmNoaUBpbnRlbC5jb20+DQo+
ID4gQ2M6IE1hbmFzaSBOYXZhcmUgPG1hbmFzaS5kLm5hdmFyZUBpbnRlbC5jb20+DQo+ID4gQ2M6
IE1hdHQgUm9wZXIgPG1hdHRoZXcuZC5yb3BlckBpbnRlbC5jb20+DQo+ID4gQ2M6IE1hYXJ0ZW4g
TGFua2hvcnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51eC5pbnRlbC5jb20+DQo+ID4gQ2M6IFZp
bGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+DQo+ID4gUmV2aWV3
ZWQtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+ICh2
MikNCj4gPiBTaWduZWQtb2ZmLWJ5OiBKb3PDqSBSb2JlcnRvIGRlIFNvdXphIDxqb3NlLnNvdXph
QGludGVsLmNvbT4NCj4gPiAtLS0NCj4gPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kaXNwbGF5LmMgfCA4OCArKysrKysrLS0tLS0tLS0tDQo+ID4gLS0tLQ0KPiA+ICAxIGZp
bGUgY2hhbmdlZCwgMzIgaW5zZXJ0aW9ucygrKSwgNTYgZGVsZXRpb25zKC0pDQo+ID4gDQo+ID4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5j
DQo+ID4gYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYw0KPiA+
IGluZGV4IDY4NTc1NDU3ZDQwZS4uODIxYmE4MDUzZjlkIDEwMDY0NA0KPiA+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jDQo+ID4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMNCj4gPiBAQCAtNTYxLDYgKzU2
MSwxMiBAQCBpc190cmFuc19wb3J0X3N5bmNfbWFzdGVyKGNvbnN0IHN0cnVjdA0KPiA+IGludGVs
X2NydGNfc3RhdGUgKmNydGNfc3RhdGUpDQo+ID4gIAkJY3J0Y19zdGF0ZS0+c3luY19tb2RlX3Ns
YXZlc19tYXNrKTsNCj4gPiAgfQ0KPiA+ICANCj4gPiArc3RhdGljIGJvb2wNCj4gPiAraXNfdHJh
bnNfcG9ydF9zeW5jX3NsYXZlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlDQo+ID4gKmNy
dGNfc3RhdGUpDQo+ID4gK3sNCj4gPiArCXJldHVybiBjcnRjX3N0YXRlLT5tYXN0ZXJfdHJhbnNj
b2RlciAhPSBJTlZBTElEX1RSQU5TQ09ERVI7DQo+ID4gK30NCj4gPiArDQo+ID4gIC8qDQo+ID4g
ICAqIFBsYXRmb3JtIHNwZWNpZmljIGhlbHBlcnMgdG8gY2FsY3VsYXRlIHRoZSBwb3J0IFBMTCBs
b29wYmFjay0NCj4gPiAoY2xvY2subSksDQo+ID4gICAqIGFuZCBwb3N0LWRpdmlkZXIgKGNsb2Nr
LnApIHZhbHVlcywgcHJlLSAoY2xvY2sudmNvKSBhbmQgcG9zdC0NCj4gPiBkaXZpZGVkIGZhc3QN
Cj4gPiBAQCAtMTQzOTMsNzcgKzE0Mzk5LDQ3IEBAIHN0YXRpYyB2b2lkDQo+ID4gaW50ZWxfb2xk
X2NydGNfc3RhdGVfZGlzYWJsZXMoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsDQo+
ID4gIAkJZGV2X3ByaXYtPmRpc3BsYXkuaW5pdGlhbF93YXRlcm1hcmtzKHN0YXRlLCBjcnRjKTsN
Cj4gPiAgfQ0KPiA+ICANCj4gPiAtc3RhdGljIHZvaWQgaW50ZWxfdHJhbnNfcG9ydF9zeW5jX21v
ZGVzZXRfZGlzYWJsZXMoc3RydWN0DQo+ID4gaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwNCj4g
PiAtCQkJCQkJICAgc3RydWN0IGludGVsX2NydGMNCj4gPiAqY3J0YywNCj4gPiAtCQkJCQkJICAg
c3RydWN0DQo+ID4gaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUsDQo+ID4gLQkJCQkJ
CSAgIHN0cnVjdA0KPiA+IGludGVsX2NydGNfc3RhdGUgKm5ld19jcnRjX3N0YXRlKQ0KPiA+IC17
DQo+ID4gLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqc2xhdmVfY3J0YyA9DQo+ID4gaW50ZWxfZ2V0X3Ns
YXZlX2NydGMobmV3X2NydGNfc3RhdGUpOw0KPiA+IC0Jc3RydWN0IGludGVsX2NydGNfc3RhdGUg
Km5ld19zbGF2ZV9jcnRjX3N0YXRlID0NCj4gPiAtCQlpbnRlbF9hdG9taWNfZ2V0X25ld19jcnRj
X3N0YXRlKHN0YXRlLCBzbGF2ZV9jcnRjKTsNCj4gPiAtCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpvbGRfc2xhdmVfY3J0Y19zdGF0ZSA9DQo+ID4gLQkJaW50ZWxfYXRvbWljX2dldF9vbGRfY3J0
Y19zdGF0ZShzdGF0ZSwgc2xhdmVfY3J0Yyk7DQo+ID4gLQ0KPiA+IC0JV0FSTl9PTighc2xhdmVf
Y3J0YyB8fCAhbmV3X3NsYXZlX2NydGNfc3RhdGUgfHwNCj4gPiAtCQkhb2xkX3NsYXZlX2NydGNf
c3RhdGUpOw0KPiA+IC0NCj4gPiAtCS8qIERpc2FibGUgU2xhdmUgZmlyc3QgKi8NCj4gPiAtCWlu
dGVsX3ByZV9wbGFuZV91cGRhdGUoc3RhdGUsIHNsYXZlX2NydGMpOw0KPiA+IC0JaWYgKG9sZF9z
bGF2ZV9jcnRjX3N0YXRlLT5ody5hY3RpdmUpDQo+ID4gLQkJaW50ZWxfb2xkX2NydGNfc3RhdGVf
ZGlzYWJsZXMoc3RhdGUsDQo+ID4gLQkJCQkJICAgICAgb2xkX3NsYXZlX2NydGNfc3RhdGUsDQo+
ID4gLQkJCQkJICAgICAgbmV3X3NsYXZlX2NydGNfc3RhdGUsDQo+ID4gLQkJCQkJICAgICAgc2xh
dmVfY3J0Yyk7DQo+ID4gLQ0KPiA+IC0JLyogRGlzYWJsZSBNYXN0ZXIgKi8NCj4gPiAtCWludGVs
X3ByZV9wbGFuZV91cGRhdGUoc3RhdGUsIGNydGMpOw0KPiA+IC0JaWYgKG9sZF9jcnRjX3N0YXRl
LT5ody5hY3RpdmUpDQo+ID4gLQkJaW50ZWxfb2xkX2NydGNfc3RhdGVfZGlzYWJsZXMoc3RhdGUs
DQo+ID4gLQkJCQkJICAgICAgb2xkX2NydGNfc3RhdGUsDQo+ID4gLQkJCQkJICAgICAgbmV3X2Ny
dGNfc3RhdGUsDQo+ID4gLQkJCQkJICAgICAgY3J0Yyk7DQo+ID4gLX0NCj4gPiAtDQo+ID4gIHN0
YXRpYyB2b2lkIGludGVsX2NvbW1pdF9tb2Rlc2V0X2Rpc2FibGVzKHN0cnVjdA0KPiA+IGludGVs
X2F0b21pY19zdGF0ZSAqc3RhdGUpDQo+ID4gIHsNCj4gPiAgCXN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpuZXdfY3J0Y19zdGF0ZSwgKm9sZF9jcnRjX3N0YXRlOw0KPiA+ICAJc3RydWN0IGludGVs
X2NydGMgKmNydGM7DQo+ID4gKwl1MzIgaGFuZGxlZCA9IDA7DQo+ID4gIAlpbnQgaTsNCj4gPiAg
DQo+ID4gLQkvKg0KPiA+IC0JICogRGlzYWJsZSBDUlRDL3BpcGVzIGluIHJldmVyc2Ugb3JkZXIg
YmVjYXVzZSBzb21lDQo+ID4gZmVhdHVyZXMoTVNUIGluDQo+ID4gLQkgKiBUR0wrKSByZXF1aXJl
cyBtYXN0ZXIgYW5kIHNsYXZlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHBpcGVzLA0KPiA+IHNvIGl0
DQo+ID4gLQkgKiBzaG91bGQgYWx3YXlzIHBpY2sgdGhlIGxvd2VzdCBwaXBlIGFzIG1hc3RlciBh
cyBpdCB3aWxsIGJlDQo+ID4gZW5hYmxlZA0KPiA+IC0JICogZmlyc3QgYW5kIGRpc2FibGUgaW4g
dGhlIHJldmVyc2Ugb3JkZXIgc28gdGhlIG1hc3RlciB3aWxsIGJlDQo+ID4gdGhlDQo+ID4gLQkg
KiBsYXN0IG9uZSB0byBiZSBkaXNhYmxlZC4NCj4gPiAtCSAqLw0KPiA+IC0JZm9yX2VhY2hfb2xk
bmV3X2ludGVsX2NydGNfaW5fc3RhdGVfcmV2ZXJzZShzdGF0ZSwgY3J0YywNCj4gPiBvbGRfY3J0
Y19zdGF0ZSwNCj4gPiAtCQkJCQkJICAgIG5ld19jcnRjX3N0YXRlLCBpKQ0KPiA+IHsNCj4gPiAr
CS8qIE9ubHkgZGlzYWJsZSBwb3J0IHN5bmMgc2xhdmVzICovDQo+ID4gKwlmb3JfZWFjaF9vbGRu
ZXdfaW50ZWxfY3J0Y19pbl9zdGF0ZShzdGF0ZSwgY3J0YywNCj4gPiBvbGRfY3J0Y19zdGF0ZSwN
Cj4gPiArCQkJCQkgICAgbmV3X2NydGNfc3RhdGUsIGkpIHsNCj4gPiAgCQlpZiAoIW5lZWRzX21v
ZGVzZXQobmV3X2NydGNfc3RhdGUpKQ0KPiA+ICAJCQljb250aW51ZTsNCj4gPiAgDQo+ID4gKwkJ
aWYgKCFvbGRfY3J0Y19zdGF0ZS0+aHcuYWN0aXZlKQ0KPiA+ICsJCQljb250aW51ZTsNCj4gDQo+
IElzIGl0IGludGVudGlvbmFsIHRoYXQgd2Ugc2tpcCB0aGUgaW50ZWxfcHJlX3BsYW5lX3VwZGF0
ZSgpIGluIHRoaXMNCj4gY2FzZQ0KPiBmb3IgdGhlIHNsYXZlcywgYnV0IG5vdCB0aGUgbWFzdGVy
cz8gIFNob3VsZCB0aGlzIHRlc3QgYmUgbW92ZWQNCj4gZmFydGhlcg0KPiBkb3duIGJlbG93IHRo
ZSBwcmVfcGxhbmVfdXBkYXRlIGNhbGw/DQoNCklmIGl0IHdhcyBpbmF0aXZlIGl0IGlzIG5vdCBh
IHBvcnQgc3luYyBzbGF2ZSwgZm9yIHRoZSBwaXBlcyBnb2luZyBmcm9tDQpkaXNhYmxlZCB0byBl
bmFibGVkIGluIHBvcnQgc3luYyBzbGF2ZSBtb2RlIHRoZSBwcmVfcGxhbmVfdXBkYXRlKCkgd2ls
bA0KYmUgZXhlY3V0ZWQgaW4gdGhlIHNlY29uZCBsb29wLg0KDQpUaGlzIGlzIG1vcmUgb2YgYW4g
b3B0aW1pemF0aW9uIHRvIG5vdCBldmVuIGNoZWNrIGlmIGlzIHBvcnQgc3luYyBzbGF2ZQ0KYW5k
IGluIGZ1dHVyZSBpZiBpcyBNU1Qgc2xhdmUuDQoNCkkgaGFkIGEgY29tbWVudCBoZXJlIGJ1dCBW
aWxsZSBhc2tlZCB0byByZW1vdmUgaXQuIA0KaHR0cHM6Ly9wYXRjaHdvcmsuZnJlZWRlc2t0b3Au
b3JnL3BhdGNoLzM0MzczNi8/c2VyaWVzPTcwNDYyJnJldj0yDQoNCj4gDQo+IA0KPiBNYXR0DQo+
IA0KPiA+ICsNCj4gPiAgCQkvKiBJbiBjYXNlIG9mIFRyYW5zY29kZXIgcG9ydCBTeW5jIG1hc3Rl
ciBzbGF2ZSBDUlRDcw0KPiA+IGNhbiBiZQ0KPiA+ICAJCSAqIGFzc2lnbmVkIGluIGFueSBvcmRl
ciBhbmQgd2UgbmVlZCB0byBtYWtlIHN1cmUgdGhhdA0KPiA+ICAJCSAqIHNsYXZlIENSVENzIGFy
ZSBkaXNhYmxlZCBmaXJzdCBhbmQgdGhlbiBtYXN0ZXIgQ1JUQw0KPiA+IHNpbmNlDQo+ID4gIAkJ
ICogU2xhdmUgdmJsYW5rcyBhcmUgbWFza2VkIHRpbGwgTWFzdGVyIFZibGFua3MuDQo+ID4gIAkJ
ICovDQo+ID4gLQkJaWYgKGlzX3RyYW5zX3BvcnRfc3luY19tb2RlKG9sZF9jcnRjX3N0YXRlKSkg
ew0KPiA+IC0JCQlpZiAoaXNfdHJhbnNfcG9ydF9zeW5jX21hc3RlcihvbGRfY3J0Y19zdGF0ZSkp
DQo+ID4gLQkJCQlpbnRlbF90cmFuc19wb3J0X3N5bmNfbW9kZXNldF9kaXNhYmxlcygNCj4gPiBz
dGF0ZSwNCj4gPiAtCQkJCQkJCQkgICAgICAgDQo+ID4gY3J0YywNCj4gPiAtCQkJCQkJCQkgICAg
ICAgDQo+ID4gb2xkX2NydGNfc3RhdGUsDQo+ID4gLQkJCQkJCQkJICAgICAgIA0KPiA+IG5ld19j
cnRjX3N0YXRlKTsNCj4gPiAtCQkJZWxzZQ0KPiA+IC0JCQkJY29udGludWU7DQo+ID4gLQkJfSBl
bHNlIHsNCj4gPiAtCQkJaW50ZWxfcHJlX3BsYW5lX3VwZGF0ZShzdGF0ZSwgY3J0Yyk7DQo+ID4g
KwkJaWYgKCFpc190cmFuc19wb3J0X3N5bmNfc2xhdmUob2xkX2NydGNfc3RhdGUpKQ0KPiA+ICsJ
CQljb250aW51ZTsNCj4gPiAgDQo+ID4gLQkJCWlmIChvbGRfY3J0Y19zdGF0ZS0+aHcuYWN0aXZl
KQ0KPiA+IC0JCQkJaW50ZWxfb2xkX2NydGNfc3RhdGVfZGlzYWJsZXMoc3RhdGUsDQo+ID4gLQkJ
CQkJCQkgICAgICBvbGRfY3J0Y18NCj4gPiBzdGF0ZSwNCj4gPiAtCQkJCQkJCSAgICAgIG5ld19j
cnRjXw0KPiA+IHN0YXRlLA0KPiA+IC0JCQkJCQkJICAgICAgY3J0Yyk7DQo+ID4gLQkJfQ0KPiA+
ICsJCWludGVsX3ByZV9wbGFuZV91cGRhdGUoc3RhdGUsIGNydGMpOw0KPiA+ICsJCWludGVsX29s
ZF9jcnRjX3N0YXRlX2Rpc2FibGVzKHN0YXRlLCBvbGRfY3J0Y19zdGF0ZSwNCj4gPiArCQkJCQkg
ICAgICBuZXdfY3J0Y19zdGF0ZSwgY3J0Yyk7DQo+ID4gKwkJaGFuZGxlZCB8PSBCSVQoY3J0Yy0+
cGlwZSk7DQo+ID4gKwl9DQo+ID4gKw0KPiA+ICsJLyogRGlzYWJsZSBldmVyeXRoaW5nIGVsc2Ug
bGVmdCBvbiAqLw0KPiA+ICsJZm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3Rh
dGUsIGNydGMsDQo+ID4gb2xkX2NydGNfc3RhdGUsDQo+ID4gKwkJCQkJICAgIG5ld19jcnRjX3N0
YXRlLCBpKSB7DQo+ID4gKwkJaWYgKCFuZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSB8fA0K
PiA+ICsJCSAgICAoaGFuZGxlZCAmIEJJVChjcnRjLT5waXBlKSkpDQo+ID4gKwkJCWNvbnRpbnVl
Ow0KPiA+ICsNCj4gPiArCQlpbnRlbF9wcmVfcGxhbmVfdXBkYXRlKHN0YXRlLCBjcnRjKTsNCj4g
PiArCQlpZiAob2xkX2NydGNfc3RhdGUtPmh3LmFjdGl2ZSkNCj4gPiArCQkJaW50ZWxfb2xkX2Ny
dGNfc3RhdGVfZGlzYWJsZXMoc3RhdGUsDQo+ID4gb2xkX2NydGNfc3RhdGUsDQo+ID4gKwkJCQkJ
CSAgICAgIG5ld19jcnRjX3N0YXRlLA0KPiA+IGNydGMpOw0KPiA+ICAJfQ0KPiA+ICB9DQo+ID4g
IA0KPiA+IC0tIA0KPiA+IDIuMjQuMA0KPiA+IA0KX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vaW50ZWwtZ2Z4

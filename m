Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 756D4109BF
	for <lists+intel-gfx@lfdr.de>; Wed,  1 May 2019 16:59:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D2F4B892D8;
	Wed,  1 May 2019 14:59:51 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 75618892D8
 for <intel-gfx@lists.freedesktop.org>; Wed,  1 May 2019 14:59:50 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16417913-1500050 
 for multiple; Wed, 01 May 2019 15:59:42 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  1 May 2019 15:59:42 +0100
Message-Id: <20190501145942.13085-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190501114541.10077-13-chris@chris-wilson.co.uk>
References: <20190501114541.10077-13-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915: Bump signaler priority on adding a
 waiter
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIGhhbmRsaW5nIG9mIHRoZSBuby1wcmVlbXB0aW9uIHByaW9yaXR5IGxldmVsIGltcG9zZXMg
dGhlIHJlc3RyaWN0aW9uCnRoYXQgd2UgbmVlZCB0byBtYWludGFpbiB0aGUgaW1wbGllZCBvcmRl
cmluZyBldmVuIHRob3VnaCBwcmVlbXB0aW9uIGlzCmRpc2FibGVkLiBPdGhlcndpc2Ugd2UgbWF5
IGVuZCB1cCB3aXRoIGFuIEFCLUJBIGRlYWRsb2NrIGFjcm9zcyBtdWx0aXBsZQplbmdpbmUgZHVl
IHRvIGEgcmVhbCBwcmVlbXB0aW9uIGV2ZW50IHJlb3JkZXJpbmcgdGhlIG5vLXByZWVtcHRpb24K
V0FJVHMuIFRvIHJlc29sdmUgdGhpcyBpc3N1ZSB3ZSBjdXJyZW50bHkgcHJvbW90ZSBhbGwgcmVx
dWVzdHMgdG8gV0FJVApvbiB1bnN1Ym1pc3Npb24sIGhvd2V2ZXIgdGhpcyBpbnRlcmZlcmVzIHdp
dGggdGhlIHRpbWVzbGljaW5nCnJlcXVpcmVtZW50IHRoYXQgd2UgZG8gbm90IGFwcGx5IGFueSBp
bXBsaWNpdCBwcm9tb3Rpb24gdGhhdCB3aWxsIGRlZmVhdAp0aGUgcm91bmQtcm9iaW4gdGltZXNs
aWNlIGxpc3QuIChJZiB3ZSBhdXRvbWF0aWNhbGx5IHByb21vdGUgdGhlIGFjdGl2ZQpyZXF1ZXN0
IGl0IHdpbGwgZ28gYmFjayB0byB0aGUgaGVhZCBvZiB0aGUgcXVldWUgYW5kIG5vdCB0aGUgdGFp
bCEpCgpTbyB3ZSBuZWVkIGltcGxpY2l0IHByb21vdGlvbiB0byBwcmV2ZW50IHJlb3JkZXJpbmcg
YXJvdW5kIHNlbWFwaG9yZXMKd2hlcmUgd2UgYXJlIG5vdCBhbGxvd2VkIHRvIHByZWVtcHQsIGFu
ZCB3ZSBtdXN0IGF2b2lkIGltcGxpY2l0CnByb21vdGlvbiBvbiB1bnN1Ym1pc3Npb24uIFNvIGlu
c3RlYWQgb2YgYXQgdW5zdWJtaXQsIGlmIHdlIGFwcGx5IHRoYXQKaW1wbGljaXQgcHJvbW90aW9u
IG9uIGFkZGluZyB0aGUgZGVwZW5kZW5jeSwgd2UgYXZvaWQgdGhlIHNlbWFwaG9yZQpkZWFkbG9j
ayBhbmQgd2UgYWxzbyByZWR1Y2UgdGhlIGdhaW5zIG1hZGUgYnkgdGhlIHByb21vdGlvbiBmb3Ig
dXNlcgpzcGFjZSB3YWl0aW5nLiBGdXJ0aGVybW9yZSwgYnkga2VlcGluZyB0aGUgZWFybGllciBk
ZXBlbmRlbmNpZXMgYXQgYQpoaWdoZXIgbGV2ZWwsIHdlIHJlZHVjZSB0aGUgc2VhcmNoIHNwYWNl
IGZvciB0aW1lc2xpY2luZyB3aXRob3V0CmFsdGVyaW5nIHJ1bnRpbWUgc2NoZWR1bGluZyB0b28g
YmFkbHkgKG5vIGRlcGVuZGVuY2llcyBhdCBhbGwgd2lsbCBiZQphc3NpZ25lZCBhIGhpZ2hlciBw
cmlvcml0eSBmb3IgcnJ1bCkuCgpUZXN0Y2FzZTogaWd0L2dlbV9jb25jdXJyZW50X2JsaXQKU2ln
bmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Ci0tLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMgfCAxMiArKysrKysrKy0tLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jICAgIHwgIDkgLS0tLS0tLS0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxlci5jICB8ICA5ICsrKysrKysrKwogMyBm
aWxlcyBjaGFuZ2VkLCAxNyBpbnNlcnRpb25zKCspLCAxMyBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xyYy5jCmluZGV4IDRiMDQyODkzZGMwZS4uNWIzZDhlMzNm
MWNmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYwpAQCAtOTgsMTIgKzk4
LDE0IEBAIHN0YXRpYyBpbnQgbGl2ZV9idXN5d2FpdF9wcmVlbXB0KHZvaWQgKmFyZykKIAljdHhf
aGkgPSBrZXJuZWxfY29udGV4dChpOTE1KTsKIAlpZiAoIWN0eF9oaSkKIAkJZ290byBlcnJfdW5s
b2NrOwotCWN0eF9oaS0+c2NoZWQucHJpb3JpdHkgPSBJTlRfTUFYOworCWN0eF9oaS0+c2NoZWQu
cHJpb3JpdHkgPQorCQlJOTE1X1VTRVJfUFJJT1JJVFkoSTkxNV9DT05URVhUX01BWF9VU0VSX1BS
SU9SSVRZKTsKIAogCWN0eF9sbyA9IGtlcm5lbF9jb250ZXh0KGk5MTUpOwogCWlmICghY3R4X2xv
KQogCQlnb3RvIGVycl9jdHhfaGk7Ci0JY3R4X2xvLT5zY2hlZC5wcmlvcml0eSA9IElOVF9NSU47
CisJY3R4X2xvLT5zY2hlZC5wcmlvcml0eSA9CisJCUk5MTVfVVNFUl9QUklPUklUWShJOTE1X0NP
TlRFWFRfTUlOX1VTRVJfUFJJT1JJVFkpOwogCiAJb2JqID0gaTkxNV9nZW1fb2JqZWN0X2NyZWF0
ZV9pbnRlcm5hbChpOTE1LCBQQUdFX1NJWkUpOwogCWlmIChJU19FUlIob2JqKSkgewpAQCAtOTU4
LDEyICs5NjAsMTQgQEAgc3RhdGljIGludCBsaXZlX3ByZWVtcHRfaGFuZyh2b2lkICphcmcpCiAJ
Y3R4X2hpID0ga2VybmVsX2NvbnRleHQoaTkxNSk7CiAJaWYgKCFjdHhfaGkpCiAJCWdvdG8gZXJy
X3NwaW5fbG87Ci0JY3R4X2hpLT5zY2hlZC5wcmlvcml0eSA9IEk5MTVfQ09OVEVYVF9NQVhfVVNF
Ul9QUklPUklUWTsKKwljdHhfaGktPnNjaGVkLnByaW9yaXR5ID0KKwkJSTkxNV9VU0VSX1BSSU9S
SVRZKEk5MTVfQ09OVEVYVF9NQVhfVVNFUl9QUklPUklUWSk7CiAKIAljdHhfbG8gPSBrZXJuZWxf
Y29udGV4dChpOTE1KTsKIAlpZiAoIWN0eF9sbykKIAkJZ290byBlcnJfY3R4X2hpOwotCWN0eF9s
by0+c2NoZWQucHJpb3JpdHkgPSBJOTE1X0NPTlRFWFRfTUlOX1VTRVJfUFJJT1JJVFk7CisJY3R4
X2xvLT5zY2hlZC5wcmlvcml0eSA9CisJCUk5MTVfVVNFUl9QUklPUklUWShJOTE1X0NPTlRFWFRf
TUlOX1VTRVJfUFJJT1JJVFkpOwogCiAJZm9yX2VhY2hfZW5naW5lKGVuZ2luZSwgaTkxNSwgaWQp
IHsKIAkJc3RydWN0IGk5MTVfcmVxdWVzdCAqcnE7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X3JlcXVlc3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVz
dC5jCmluZGV4IDhjYjNlZDU1MzFlMy4uMDY1ZGExYmNiYjRjIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3JlcXVlc3QuYwpAQCAtNDY4LDE1ICs0NjgsNiBAQCB2b2lkIF9faTkxNV9yZXF1ZXN0X3Vu
c3VibWl0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJlcXVlc3QpCiAJLyogV2UgbWF5IGJlIHJlY3Vy
c2luZyBmcm9tIHRoZSBzaWduYWwgY2FsbGJhY2sgb2YgYW5vdGhlciBpOTE1IGZlbmNlICovCiAJ
c3Bpbl9sb2NrX25lc3RlZCgmcmVxdWVzdC0+bG9jaywgU0lOR0xFX0RFUFRIX05FU1RJTkcpOwog
Ci0JLyoKLQkgKiBBcyB3ZSBkbyBub3QgYWxsb3cgV0FJVCB0byBwcmVlbXB0IGluZmxpZ2h0IHJl
cXVlc3RzLAotCSAqIG9uY2Ugd2UgaGF2ZSBleGVjdXRlZCBhIHJlcXVlc3QsIGFsb25nIHdpdGgg
dHJpZ2dlcmluZwotCSAqIGFueSBleGVjdXRpb24gY2FsbGJhY2tzLCB3ZSBtdXN0IHByZXNlcnZl
IGl0cyBvcmRlcmluZwotCSAqIHdpdGhpbiB0aGUgbm9uLXByZWVtcHRpYmxlIEZJRk8uCi0JICov
Ci0JQlVJTERfQlVHX09OKF9fTk9fUFJFRU1QVElPTiAmIH5JOTE1X1BSSU9SSVRZX01BU0spOyAv
KiBvbmx5IGludGVybmFsICovCi0JcmVxdWVzdC0+c2NoZWQuYXR0ci5wcmlvcml0eSB8PSBfX05P
X1BSRUVNUFRJT047Ci0KIAlpZiAodGVzdF9iaXQoRE1BX0ZFTkNFX0ZMQUdfRU5BQkxFX1NJR05B
TF9CSVQsICZyZXF1ZXN0LT5mZW5jZS5mbGFncykpCiAJCWk5MTVfcmVxdWVzdF9jYW5jZWxfYnJl
YWRjcnVtYihyZXF1ZXN0KTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9zY2hlZHVsZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NoZWR1bGVyLmMKaW5k
ZXggMDVlYjUwNTU4YWJhLi5lY2MzZTgzZWYyOGQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfc2NoZWR1bGVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9z
Y2hlZHVsZXIuYwpAQCAtMzg4LDYgKzM4OCwxNSBAQCBib29sIF9faTkxNV9zY2hlZF9ub2RlX2Fk
ZF9kZXBlbmRlbmN5KHN0cnVjdCBpOTE1X3NjaGVkX25vZGUgKm5vZGUsCiAJCSAgICAhbm9kZV9z
dGFydGVkKHNpZ25hbCkpCiAJCQlub2RlLT5mbGFncyB8PSBJOTE1X1NDSEVEX0hBU19TRU1BUEhP
UkVfQ0hBSU47CiAKKwkJLyoKKwkJICogQXMgd2UgZG8gbm90IGFsbG93IFdBSVQgdG8gcHJlZW1w
dCBpbmZsaWdodCByZXF1ZXN0cywKKwkJICogb25jZSB3ZSBoYXZlIGV4ZWN1dGVkIGEgcmVxdWVz
dCwgYWxvbmcgd2l0aCB0cmlnZ2VyaW5nCisJCSAqIGFueSBleGVjdXRpb24gY2FsbGJhY2tzLCB3
ZSBtdXN0IHByZXNlcnZlIGl0cyBvcmRlcmluZworCQkgKiB3aXRoaW4gdGhlIG5vbi1wcmVlbXB0
aWJsZSBGSUZPLgorCQkgKi8KKwkJQlVJTERfQlVHX09OKF9fTk9fUFJFRU1QVElPTiAmIH5JOTE1
X1BSSU9SSVRZX01BU0spOworCQlfX2J1bXBfcHJpb3JpdHkoc2lnbmFsLCBfX05PX1BSRUVNUFRJ
T04pOworCiAJCXJldCA9IHRydWU7CiAJfQogCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50
ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 82E9C17327
	for <lists+intel-gfx@lfdr.de>; Wed,  8 May 2019 10:07:57 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BDF7689402;
	Wed,  8 May 2019 08:07:50 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 48C59893A4
 for <intel-gfx@lists.freedesktop.org>; Wed,  8 May 2019 08:07:48 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16485927-1500050 
 for multiple; Wed, 08 May 2019 09:07:11 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  8 May 2019 09:06:51 +0100
Message-Id: <20190508080704.24223-27-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190508080704.24223-1-chris@chris-wilson.co.uk>
References: <20190508080704.24223-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 27/40] drm/i915: Pull scatterlist utils out of
 i915_gem.h
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T3V0IHNjYXR0ZXJsaXN0IHV0aWxpdHkgcm91dGluZXMgY2FuIGJlIHB1bGxlZCBvdXQgb2YgaTkx
NV9nZW0uaCBmb3IgYQpiaXQgbW9yZSBkZWNsdXR0ZXJpbmcuCgp2MjogUHVzaCBJOTE1X0dUVF9Q
QUdFX1NJWkUgb3V0IG9mIGk5MTVfc2NhdHRlcmxpc3QgaXRzZWxmIGFuZCBpbnRvIHRoZQpjYWxs
ZXIuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51
az4KUmV2aWV3ZWQtYnk6IE1hdHRoZXcgQXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgICAgICAgICAgfCAgIDEgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jICAgIHwgICAxICsKIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9pbnRlcm5hbC5jICB8ICAgMSArCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGFnZXMuYyAgICAgfCAgIDEgKwogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BoeXMuYyAgICAgIHwgICAxICsKIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaG1lbS5jICAgICB8ICAgMSArCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0ci5jICAgfCAgIDEgKwogLi4uL2RybS9pOTE1
L2dlbS9zZWxmdGVzdHMvaHVnZV9nZW1fb2JqZWN0LmMgIHwgICAyICsKIC4uLi9kcm0vaTkxNS9n
ZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2RtYWJ1Zi5jICB8ICAgMiArCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5oICAgICAgICAgICAgICAgfCAxMTAgLS0tLS0tLS0tLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jICAgICAgICAgICAgICAgfCAgMzAgKy0tLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2ZlbmNlX3JlZy5jICAgICB8ICAgMiArCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyAgICAgICAgICAgfCAgIDMgKy0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5oICAgICAgICAgICB8ICAgNCArLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYyAgICAgICAgIHwgICAxICsKIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfc2NhdHRlcmxpc3QuYyAgICAgICB8ICAzOSArKysrKysKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NhdHRlcmxpc3QuaCAgICAgICB8IDEyNyArKysrKysrKysr
KysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5jICAgICB8
ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvc2NhdHRlcmxpc3QuYyAgfCAg
IDEgKwogMTkgZmlsZXMgY2hhbmdlZCwgMTg4IGluc2VydGlvbnMoKyksIDE0MSBkZWxldGlvbnMo
LSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjYXR0ZXJs
aXN0LmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjYXR0
ZXJsaXN0LmgKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCmluZGV4IDBjMzllZjk2N2NmMC4uOWY1ZjRhY2Fj
YWU1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQpAQCAtNDQsNiArNDQsNyBAQCBpOTE1LXkgKz0gaTkx
NV9kcnYubyBcCiAJICBpOTE1X2lycS5vIFwKIAkgIGk5MTVfcGFyYW1zLm8gXAogCSAgaTkxNV9w
Y2kubyBcCisJICBpOTE1X3NjYXR0ZXJsaXN0Lm8gXAogCSAgaTkxNV9zdXNwZW5kLm8gXAogCSAg
aTkxNV9zeXNmcy5vIFwKIAkgIGludGVsX2Nzci5vIFwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9kbWFidWYuYwppbmRleCA5Yjc1ZGQ4YzI2N2QuLjRlN2VmZTE1OTUzMSAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYwpAQCAtMTEsNiArMTEs
NyBAQAogI2luY2x1ZGUgImk5MTVfZ2VtX29iamVjdC5oIgogCiAjaW5jbHVkZSAiLi4vaTkxNV9k
cnYuaCIKKyNpbmNsdWRlICIuLi9pOTE1X3NjYXR0ZXJsaXN0LmgiCiAKIHN0YXRpYyBzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdCAqZG1hX2J1Zl90b19vYmooc3RydWN0IGRtYV9idWYgKmJ1ZikK
IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9pbnRlcm5h
bC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2ludGVybmFsLmMKaW5kZXgg
ZDQwYWRiM2JiZTI5Li5kMDcyZDBjYmNlMDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9pbnRlcm5hbC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9pbnRlcm5hbC5jCkBAIC0xNCw2ICsxNCw3IEBACiAKICNpbmNsdWRlICIuLi9p
OTE1X2Rydi5oIgogI2luY2x1ZGUgIi4uL2k5MTVfZ2VtLmgiCisjaW5jbHVkZSAiLi4vaTkxNV9z
Y2F0dGVybGlzdC5oIgogI2luY2x1ZGUgIi4uL2k5MTVfdXRpbHMuaCIKIAogI2RlZmluZSBRVUlF
VCAoX19HRlBfTk9SRVRSWSB8IF9fR0ZQX05PV0FSTikKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX3BhZ2VzLmMKaW5kZXggNDUyYWJhMGEzMzU5Li4yMTYzNWQwYWM5NWUgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jCkBAIC03LDYgKzcsNyBAQAog
I2luY2x1ZGUgImk5MTVfZ2VtX29iamVjdC5oIgogCiAjaW5jbHVkZSAiLi4vaTkxNV9kcnYuaCIK
KyNpbmNsdWRlICIuLi9pOTE1X3NjYXR0ZXJsaXN0LmgiCiAKIHZvaWQgX19pOTE1X2dlbV9vYmpl
Y3Rfc2V0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJCQkJIHN0cnVj
dCBzZ190YWJsZSAqcGFnZXMsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fcGh5cy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BoeXMu
YwppbmRleCAxYmYzZTBhZmNiYTIuLjIyZDE4NTMwMTU3OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BoeXMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fcGh5cy5jCkBAIC0xNiw2ICsxNiw3IEBACiAjaW5jbHVkZSAiaTkxNV9n
ZW1fb2JqZWN0LmgiCiAKICNpbmNsdWRlICIuLi9pOTE1X2Rydi5oIgorI2luY2x1ZGUgIi4uL2k5
MTVfc2NhdHRlcmxpc3QuaCIKIAogc3RhdGljIGludCBpOTE1X2dlbV9vYmplY3RfZ2V0X3BhZ2Vz
X3BoeXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKIHsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaG1lbS5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL2k5MTVfZ2VtX3NobWVtLmMKaW5kZXggNzhkZjg2ZDFkYjdhLi4yZWVlMWFmODhi
Y2IgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaG1lbS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaG1lbS5jCkBAIC0xMCw2
ICsxMCw3IEBACiAjaW5jbHVkZSAiaTkxNV9nZW1fb2JqZWN0LmgiCiAKICNpbmNsdWRlICIuLi9p
OTE1X2Rydi5oIgorI2luY2x1ZGUgIi4uL2k5MTVfc2NhdHRlcmxpc3QuaCIKIAogLyoKICAqIE1v
dmUgcGFnZXMgdG8gYXBwcm9wcmlhdGUgbHJ1IGFuZCByZWxlYXNlIHRoZSBwYWdldmVjLCBkZWNy
ZW1lbnRpbmcgdGhlCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fdXNlcnB0ci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3VzZXJwdHIu
YwppbmRleCAwMDdhMmI4Y2FjOGIuLjAxMzdiYWE0MDllMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3VzZXJwdHIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0ci5jCkBAIC0xNSw2ICsxNSw3IEBACiAjaW5jbHVkZSAi
aTkxNV9nZW1faW9jdGxzLmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1fb2JqZWN0LmgiCiAKKyNpbmNs
dWRlICIuLi9pOTE1X3NjYXR0ZXJsaXN0LmgiCiAjaW5jbHVkZSAiLi4vaTkxNV90cmFjZS5oIgog
I2luY2x1ZGUgIi4uL2ludGVsX2Rydi5oIgogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfZ2VtX29iamVjdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX2dlbV9vYmplY3QuYwppbmRleCA4MjRmMzc2MTMxNGMuLmMw
Mzc4MWY4YjQzNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0
cy9odWdlX2dlbV9vYmplY3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL2h1Z2VfZ2VtX29iamVjdC5jCkBAIC00LDYgKzQsOCBAQAogICogQ29weXJpZ2h0IMKpIDIw
MTYgSW50ZWwgQ29ycG9yYXRpb24KICAqLwogCisjaW5jbHVkZSAiLi4vLi4vaTkxNV9zY2F0dGVy
bGlzdC5oIgorCiAjaW5jbHVkZSAiaHVnZV9nZW1fb2JqZWN0LmgiCiAKIHN0YXRpYyB2b2lkIGh1
Z2VfZnJlZV9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9kbWFidWYuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMKaW5k
ZXggZmM0ZGQ5MmY0NDk2Li5kYTZlYjZlY2RmNjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9kbWFidWYuYwpAQCAtOSw2ICs5LDggQEAK
ICNpbmNsdWRlICIuLi8uLi9zZWxmdGVzdHMvbW9ja19nZW1fZGV2aWNlLmgiCiAjaW5jbHVkZSAi
bW9ja19kbWFidWYuaCIKIAorI2luY2x1ZGUgIi4uLy4uL2k5MTVfZHJ2LmgiCisKIHN0YXRpYyBp
bnQgaWd0X2RtYWJ1Zl9leHBvcnQodm9pZCAqYXJnKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1ID0gYXJnOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5kZXggNzZhNzI4NDNlMjli
Li42ZjhkZGZiZTdkODUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaApAQCAtMjE1MywxMTEgKzIx
NTMsNiBAQCBlbnVtIGhkbWlfZm9yY2VfYXVkaW8gewogCUdFTk1BU0soSU5URUxfRlJPTlRCVUZG
RVJfQklUU19QRVJfUElQRSAqICgocGlwZSkgKyAxKSAtIDEsIFwKIAkJSU5URUxfRlJPTlRCVUZG
RVJfQklUU19QRVJfUElQRSAqIChwaXBlKSkKIAotLyoKLSAqIE9wdGltaXNlZCBTR0wgaXRlcmF0
b3IgZm9yIEdFTSBvYmplY3RzCi0gKi8KLXN0YXRpYyBfX2Fsd2F5c19pbmxpbmUgc3RydWN0IHNn
dF9pdGVyIHsKLQlzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNncDsKLQl1bmlvbiB7Ci0JCXVuc2lnbmVk
IGxvbmcgcGZuOwotCQlkbWFfYWRkcl90IGRtYTsKLQl9OwotCXVuc2lnbmVkIGludCBjdXJyOwot
CXVuc2lnbmVkIGludCBtYXg7Ci19IF9fc2d0X2l0ZXIoc3RydWN0IHNjYXR0ZXJsaXN0ICpzZ2ws
IGJvb2wgZG1hKSB7Ci0Jc3RydWN0IHNndF9pdGVyIHMgPSB7IC5zZ3AgPSBzZ2wgfTsKLQotCWlm
IChzLnNncCkgewotCQlzLm1heCA9IHMuY3VyciA9IHMuc2dwLT5vZmZzZXQ7Ci0JCXMubWF4ICs9
IHMuc2dwLT5sZW5ndGg7Ci0JCWlmIChkbWEpCi0JCQlzLmRtYSA9IHNnX2RtYV9hZGRyZXNzKHMu
c2dwKTsKLQkJZWxzZQotCQkJcy5wZm4gPSBwYWdlX3RvX3BmbihzZ19wYWdlKHMuc2dwKSk7Ci0J
fQotCi0JcmV0dXJuIHM7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgc3RydWN0IHNjYXR0ZXJsaXN0ICpf
X19fc2dfbmV4dChzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNnKQotewotCSsrc2c7Ci0JaWYgKHVubGlr
ZWx5KHNnX2lzX2NoYWluKHNnKSkpCi0JCXNnID0gc2dfY2hhaW5fcHRyKHNnKTsKLQlyZXR1cm4g
c2c7Ci19Ci0KLS8qKgotICogX19zZ19uZXh0IC0gcmV0dXJuIHRoZSBuZXh0IHNjYXR0ZXJsaXN0
IGVudHJ5IGluIGEgbGlzdAotICogQHNnOgkJVGhlIGN1cnJlbnQgc2cgZW50cnkKLSAqCi0gKiBE
ZXNjcmlwdGlvbjoKLSAqICAgSWYgdGhlIGVudHJ5IGlzIHRoZSBsYXN0LCByZXR1cm4gTlVMTDsg
b3RoZXJ3aXNlLCBzdGVwIHRvIHRoZSBuZXh0Ci0gKiAgIGVsZW1lbnQgaW4gdGhlIGFycmF5IChA
c2dAKzEpLiBJZiB0aGF0J3MgYSBjaGFpbiBwb2ludGVyLCBmb2xsb3cgaXQ7Ci0gKiAgIG90aGVy
d2lzZSBqdXN0IHJldHVybiB0aGUgcG9pbnRlciB0byB0aGUgY3VycmVudCBlbGVtZW50LgotICoq
Lwotc3RhdGljIGlubGluZSBzdHJ1Y3Qgc2NhdHRlcmxpc3QgKl9fc2dfbmV4dChzdHJ1Y3Qgc2Nh
dHRlcmxpc3QgKnNnKQotewotCXJldHVybiBzZ19pc19sYXN0KHNnKSA/IE5VTEwgOiBfX19fc2df
bmV4dChzZyk7Ci19Ci0KLS8qKgotICogZm9yX2VhY2hfc2d0X2RtYSAtIGl0ZXJhdGUgb3ZlciB0
aGUgRE1BIGFkZHJlc3NlcyBvZiB0aGUgZ2l2ZW4gc2dfdGFibGUKLSAqIEBfX2RtYXA6CURNQSBh
ZGRyZXNzIChvdXRwdXQpCi0gKiBAX19pdGVyOgknc3RydWN0IHNndF9pdGVyJyAoaXRlcmF0b3Ig
c3RhdGUsIGludGVybmFsKQotICogQF9fc2d0OglzZ190YWJsZSB0byBpdGVyYXRlIG92ZXIgKGlu
cHV0KQotICovCi0jZGVmaW5lIGZvcl9lYWNoX3NndF9kbWEoX19kbWFwLCBfX2l0ZXIsIF9fc2d0
KQkJCQlcCi0JZm9yICgoX19pdGVyKSA9IF9fc2d0X2l0ZXIoKF9fc2d0KS0+c2dsLCB0cnVlKTsJ
CQlcCi0JICAgICAoKF9fZG1hcCkgPSAoX19pdGVyKS5kbWEgKyAoX19pdGVyKS5jdXJyKTsJCQlc
Ci0JICAgICAoKChfX2l0ZXIpLmN1cnIgKz0gSTkxNV9HVFRfUEFHRV9TSVpFKSA+PSAoX19pdGVy
KS5tYXgpID8JXAotCSAgICAgKF9faXRlcikgPSBfX3NndF9pdGVyKF9fc2dfbmV4dCgoX19pdGVy
KS5zZ3ApLCB0cnVlKSwgMCA6IDApCi0KLS8qKgotICogZm9yX2VhY2hfc2d0X3BhZ2UgLSBpdGVy
YXRlIG92ZXIgdGhlIHBhZ2VzIG9mIHRoZSBnaXZlbiBzZ190YWJsZQotICogQF9fcHA6CXBhZ2Ug
cG9pbnRlciAob3V0cHV0KQotICogQF9faXRlcjoJJ3N0cnVjdCBzZ3RfaXRlcicgKGl0ZXJhdG9y
IHN0YXRlLCBpbnRlcm5hbCkKLSAqIEBfX3NndDoJc2dfdGFibGUgdG8gaXRlcmF0ZSBvdmVyIChp
bnB1dCkKLSAqLwotI2RlZmluZSBmb3JfZWFjaF9zZ3RfcGFnZShfX3BwLCBfX2l0ZXIsIF9fc2d0
KQkJCQlcCi0JZm9yICgoX19pdGVyKSA9IF9fc2d0X2l0ZXIoKF9fc2d0KS0+c2dsLCBmYWxzZSk7
CQlcCi0JICAgICAoKF9fcHApID0gKF9faXRlcikucGZuID09IDAgPyBOVUxMIDoJCQlcCi0JICAg
ICAgcGZuX3RvX3BhZ2UoKF9faXRlcikucGZuICsgKChfX2l0ZXIpLmN1cnIgPj4gUEFHRV9TSElG
VCkpKTsgXAotCSAgICAgKCgoX19pdGVyKS5jdXJyICs9IFBBR0VfU0laRSkgPj0gKF9faXRlciku
bWF4KSA/CQlcCi0JICAgICAoX19pdGVyKSA9IF9fc2d0X2l0ZXIoX19zZ19uZXh0KChfX2l0ZXIp
LnNncCksIGZhbHNlKSwgMCA6IDApCi0KLWJvb2wgaTkxNV9zZ190cmltKHN0cnVjdCBzZ190YWJs
ZSAqb3JpZ19zdCk7Ci0KLXN0YXRpYyBpbmxpbmUgdW5zaWduZWQgaW50IGk5MTVfc2dfcGFnZV9z
aXplcyhzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNnKQotewotCXVuc2lnbmVkIGludCBwYWdlX3NpemVz
OwotCi0JcGFnZV9zaXplcyA9IDA7Ci0Jd2hpbGUgKHNnKSB7Ci0JCUdFTV9CVUdfT04oc2ctPm9m
ZnNldCk7Ci0JCUdFTV9CVUdfT04oIUlTX0FMSUdORUQoc2ctPmxlbmd0aCwgUEFHRV9TSVpFKSk7
Ci0JCXBhZ2Vfc2l6ZXMgfD0gc2ctPmxlbmd0aDsKLQkJc2cgPSBfX3NnX25leHQoc2cpOwotCX0K
LQotCXJldHVybiBwYWdlX3NpemVzOwotfQotCi1zdGF0aWMgaW5saW5lIHVuc2lnbmVkIGludCBp
OTE1X3NnX3NlZ21lbnRfc2l6ZSh2b2lkKQotewotCXVuc2lnbmVkIGludCBzaXplID0gc3dpb3Rs
Yl9tYXhfc2VnbWVudCgpOwotCi0JaWYgKHNpemUgPT0gMCkKLQkJcmV0dXJuIFNDQVRURVJMSVNU
X01BWF9TRUdNRU5UOwotCi0Jc2l6ZSA9IHJvdW5kZG93bihzaXplLCBQQUdFX1NJWkUpOwotCS8q
IHN3aW90bGJfbWF4X3NlZ21lbnRfc2l6ZSBjYW4gcmV0dXJuIDEgYnl0ZSB3aGVuIGl0IG1lYW5z
IG9uZSBwYWdlLiAqLwotCWlmIChzaXplIDwgUEFHRV9TSVpFKQotCQlzaXplID0gUEFHRV9TSVpF
OwotCi0JcmV0dXJuIHNpemU7Ci19Ci0KICNkZWZpbmUgSU5URUxfSU5GTyhkZXZfcHJpdikJKCYo
ZGV2X3ByaXYpLT5fX2luZm8pCiAjZGVmaW5lIFJVTlRJTUVfSU5GTyhkZXZfcHJpdikJKCYoZGV2
X3ByaXYpLT5fX3J1bnRpbWUpCiAjZGVmaW5lIERSSVZFUl9DQVBTKGRldl9wcml2KQkoJihkZXZf
cHJpdiktPmNhcHMpCkBAIC0yNzkzLDExICsyNjg4LDYgQEAgaW50IGk5MTVfZ2VtX29iamVjdF91
bmJpbmQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7CiAKIHZvaWQgaTkxNV9nZW1f
cnVudGltZV9zdXNwZW5kKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiAKLXN0
YXRpYyBpbmxpbmUgaW50IF9fc2dfcGFnZV9jb3VudChjb25zdCBzdHJ1Y3Qgc2NhdHRlcmxpc3Qg
KnNnKQotewotCXJldHVybiBzZy0+bGVuZ3RoID4+IFBBR0VfU0hJRlQ7Ci19Ci0KIHN0YXRpYyBp
bmxpbmUgaW50IF9fbXVzdF9jaGVjawogaTkxNV9tdXRleF9sb2NrX2ludGVycnVwdGlibGUoc3Ry
dWN0IGRybV9kZXZpY2UgKmRldikKIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCmluZGV4IDM0M2E4
YTgzNzM2My4uN2ZhMTIzNjY3N2I5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2dlbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKQEAgLTUwLDYg
KzUwLDcgQEAKICNpbmNsdWRlICJndC9pbnRlbF93b3JrYXJvdW5kcy5oIgogCiAjaW5jbHVkZSAi
aTkxNV9kcnYuaCIKKyNpbmNsdWRlICJpOTE1X3NjYXR0ZXJsaXN0LmgiCiAjaW5jbHVkZSAiaTkx
NV90cmFjZS5oIgogI2luY2x1ZGUgImk5MTVfdmdwdS5oIgogCkBAIC0xMDYxLDM0ICsxMDYyLDYg
QEAgdm9pZCBpOTE1X2dlbV9ydW50aW1lX3N1c3BlbmQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KQogCX0KIH0KIAotYm9vbCBpOTE1X3NnX3RyaW0oc3RydWN0IHNnX3RhYmxlICpv
cmlnX3N0KQotewotCXN0cnVjdCBzZ190YWJsZSBuZXdfc3Q7Ci0Jc3RydWN0IHNjYXR0ZXJsaXN0
ICpzZywgKm5ld19zZzsKLQl1bnNpZ25lZCBpbnQgaTsKLQotCWlmIChvcmlnX3N0LT5uZW50cyA9
PSBvcmlnX3N0LT5vcmlnX25lbnRzKQotCQlyZXR1cm4gZmFsc2U7Ci0KLQlpZiAoc2dfYWxsb2Nf
dGFibGUoJm5ld19zdCwgb3JpZ19zdC0+bmVudHMsIEdGUF9LRVJORUwgfCBfX0dGUF9OT1dBUk4p
KQotCQlyZXR1cm4gZmFsc2U7Ci0KLQluZXdfc2cgPSBuZXdfc3Quc2dsOwotCWZvcl9lYWNoX3Nn
KG9yaWdfc3QtPnNnbCwgc2csIG9yaWdfc3QtPm5lbnRzLCBpKSB7Ci0JCXNnX3NldF9wYWdlKG5l
d19zZywgc2dfcGFnZShzZyksIHNnLT5sZW5ndGgsIDApOwotCQlzZ19kbWFfYWRkcmVzcyhuZXdf
c2cpID0gc2dfZG1hX2FkZHJlc3Moc2cpOwotCQlzZ19kbWFfbGVuKG5ld19zZykgPSBzZ19kbWFf
bGVuKHNnKTsKLQotCQluZXdfc2cgPSBzZ19uZXh0KG5ld19zZyk7Ci0JfQotCUdFTV9CVUdfT04o
bmV3X3NnKTsgLyogU2hvdWxkIHdhbGsgZXhhY3RseSBuZW50cyBhbmQgaGl0IHRoZSBlbmQgKi8K
LQotCXNnX2ZyZWVfdGFibGUob3JpZ19zdCk7Ci0KLQkqb3JpZ19zdCA9IG5ld19zdDsKLQlyZXR1
cm4gdHJ1ZTsKLX0KLQogc3RhdGljIHVuc2lnbmVkIGxvbmcgdG9fd2FpdF90aW1lb3V0KHM2NCB0
aW1lb3V0X25zKQogewogCWlmICh0aW1lb3V0X25zIDwgMCkKQEAgLTIzNDIsNyArMjMxNSw2IEBA
IHZvaWQgaTkxNV9nZW1fdHJhY2tfZmIoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9sZCwK
IH0KIAogI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1X1NFTEZURVNUKQotI2luY2x1ZGUg
InNlbGZ0ZXN0cy9zY2F0dGVybGlzdC5jIgogI2luY2x1ZGUgInNlbGZ0ZXN0cy9tb2NrX2dlbV9k
ZXZpY2UuYyIKICNpbmNsdWRlICJzZWxmdGVzdHMvaTkxNV9nZW0uYyIKICNlbmRpZgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2VfcmVnLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9mZW5jZV9yZWcuYwppbmRleCAzMDg0ZjUyZTMzNzIuLjJl
OWUzMjMzMGFhYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZmVu
Y2VfcmVnLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2VfcmVnLmMK
QEAgLTIyLDcgKzIyLDkgQEAKICAqLwogCiAjaW5jbHVkZSA8ZHJtL2k5MTVfZHJtLmg+CisKICNp
bmNsdWRlICJpOTE1X2Rydi5oIgorI2luY2x1ZGUgImk5MTVfc2NhdHRlcmxpc3QuaCIKIAogLyoq
CiAgKiBET0M6IGZlbmNlIHJlZ2lzdGVyIGhhbmRsaW5nCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2Vt
X2d0dC5jCmluZGV4IDhmNWRiNzg3YjdmMi4uZDNlYmE2N2Q0YmY5IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dlbV9ndHQuYwpAQCAtMzYsOCArMzYsOSBAQAogI2luY2x1ZGUgPGRybS9pOTE1X2Ry
bS5oPgogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKLSNpbmNsdWRlICJpOTE1X3ZncHUuaCIKKyNp
bmNsdWRlICJpOTE1X3NjYXR0ZXJsaXN0LmgiCiAjaW5jbHVkZSAiaTkxNV90cmFjZS5oIgorI2lu
Y2x1ZGUgImk5MTVfdmdwdS5oIgogI2luY2x1ZGUgImludGVsX2Rydi5oIgogI2luY2x1ZGUgImlu
dGVsX2Zyb250YnVmZmVyLmgiCiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2VtX2d0dC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmgKaW5kZXgg
NTkzMDc5ZjMwZmJlLi44ZTY2MWM3NmQyMzUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZ2VtX2d0dC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0
dC5oCkBAIC00MCw2ICs0MCw3IEBACiAKICNpbmNsdWRlICJndC9pbnRlbF9yZXNldC5oIgogI2lu
Y2x1ZGUgImk5MTVfcmVxdWVzdC5oIgorI2luY2x1ZGUgImk5MTVfc2NhdHRlcmxpc3QuaCIKICNp
bmNsdWRlICJpOTE1X3NlbGZ0ZXN0LmgiCiAjaW5jbHVkZSAiaTkxNV90aW1lbGluZS5oIgogCkBA
IC0xNjIsNyArMTYzLDggQEAgdHlwZWRlZiB1NjQgZ2VuOF9wcGd0dF9wbWw0ZV90OwogI2RlZmlu
ZSBHRU44X1BERV9JUFNfNjRLIEJJVCgxMSkKICNkZWZpbmUgR0VOOF9QREVfUFNfMk0gICBCSVQo
NykKIAotc3RydWN0IHNnX3RhYmxlOworI2RlZmluZSBmb3JfZWFjaF9zZ3RfZG1hKF9fZG1hcCwg
X19pdGVyLCBfX3NndCkgXAorCV9fZm9yX2VhY2hfc2d0X2RtYShfX2RtYXAsIF9faXRlciwgX19z
Z3QsIEk5MTVfR1RUX1BBR0VfU0laRSkKIAogc3RydWN0IGludGVsX3JvdGF0aW9uX2luZm8gewog
CXN0cnVjdCBpbnRlbF9yb3RhdGlvbl9wbGFuZV9pbmZvIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dwdV9lcnJvci5jCmluZGV4IGM4Njg2NWEzNDk3Mi4uNzA3ODExMjU2NTAxIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMKQEAgLTQwLDYgKzQwLDcgQEAKIAogI2luY2x1ZGUg
Imk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9ncHVfZXJyb3IuaCIKKyNpbmNsdWRlICJpOTE1
X3NjYXR0ZXJsaXN0LmgiCiAjaW5jbHVkZSAiaW50ZWxfYXRvbWljLmgiCiAjaW5jbHVkZSAiaW50
ZWxfY3NyLmgiCiAjaW5jbHVkZSAiaW50ZWxfb3ZlcmxheS5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9zY2F0dGVybGlzdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9zY2F0dGVybGlzdC5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAw
MC4uY2M2YjM4NDZhOGM3Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9zY2F0dGVybGlzdC5jCkBAIC0wLDAgKzEsMzkgQEAKKy8qCisgKiBTUERYLUxpY2Vuc2Ut
SWRlbnRpZmllcjogTUlUCisgKgorICogQ29weXJpZ2h0IMKpIDIwMTYgSW50ZWwgQ29ycG9yYXRp
b24KKyAqLworCisjaW5jbHVkZSAiaTkxNV9zY2F0dGVybGlzdC5oIgorCitib29sIGk5MTVfc2df
dHJpbShzdHJ1Y3Qgc2dfdGFibGUgKm9yaWdfc3QpCit7CisJc3RydWN0IHNnX3RhYmxlIG5ld19z
dDsKKwlzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNnLCAqbmV3X3NnOworCXVuc2lnbmVkIGludCBpOwor
CisJaWYgKG9yaWdfc3QtPm5lbnRzID09IG9yaWdfc3QtPm9yaWdfbmVudHMpCisJCXJldHVybiBm
YWxzZTsKKworCWlmIChzZ19hbGxvY190YWJsZSgmbmV3X3N0LCBvcmlnX3N0LT5uZW50cywgR0ZQ
X0tFUk5FTCB8IF9fR0ZQX05PV0FSTikpCisJCXJldHVybiBmYWxzZTsKKworCW5ld19zZyA9IG5l
d19zdC5zZ2w7CisJZm9yX2VhY2hfc2cob3JpZ19zdC0+c2dsLCBzZywgb3JpZ19zdC0+bmVudHMs
IGkpIHsKKwkJc2dfc2V0X3BhZ2UobmV3X3NnLCBzZ19wYWdlKHNnKSwgc2ctPmxlbmd0aCwgMCk7
CisJCXNnX2RtYV9hZGRyZXNzKG5ld19zZykgPSBzZ19kbWFfYWRkcmVzcyhzZyk7CisJCXNnX2Rt
YV9sZW4obmV3X3NnKSA9IHNnX2RtYV9sZW4oc2cpOworCisJCW5ld19zZyA9IHNnX25leHQobmV3
X3NnKTsKKwl9CisJR0VNX0JVR19PTihuZXdfc2cpOyAvKiBTaG91bGQgd2FsayBleGFjdGx5IG5l
bnRzIGFuZCBoaXQgdGhlIGVuZCAqLworCisJc2dfZnJlZV90YWJsZShvcmlnX3N0KTsKKworCSpv
cmlnX3N0ID0gbmV3X3N0OworCXJldHVybiB0cnVlOworfQorCisjaWYgSVNfRU5BQkxFRChDT05G
SUdfRFJNX0k5MTVfU0VMRlRFU1QpCisjaW5jbHVkZSAic2VsZnRlc3RzL3NjYXR0ZXJsaXN0LmMi
CisjZW5kaWYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NhdHRlcmxp
c3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NhdHRlcmxpc3QuaApuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjY2MTc5NjNkZjllZAotLS0gL2Rldi9udWxs
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NhdHRlcmxpc3QuaApAQCAtMCwwICsx
LDEyNyBAQAorLyoKKyAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKKyAqCisgKiBDb3B5
cmlnaHQgwqkgMjAxNiBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpZm5kZWYgSTkxNV9TQ0FU
VEVSTElTVF9ICisjZGVmaW5lIEk5MTVfU0NBVFRFUkxJU1RfSAorCisjaW5jbHVkZSA8bGludXgv
cGZuLmg+CisjaW5jbHVkZSA8bGludXgvc2NhdHRlcmxpc3QuaD4KKyNpbmNsdWRlIDxsaW51eC9z
d2lvdGxiLmg+CisKKyNpbmNsdWRlICJpOTE1X2dlbS5oIgorCisvKgorICogT3B0aW1pc2VkIFNH
TCBpdGVyYXRvciBmb3IgR0VNIG9iamVjdHMKKyAqLworc3RhdGljIF9fYWx3YXlzX2lubGluZSBz
dHJ1Y3Qgc2d0X2l0ZXIgeworCXN0cnVjdCBzY2F0dGVybGlzdCAqc2dwOworCXVuaW9uIHsKKwkJ
dW5zaWduZWQgbG9uZyBwZm47CisJCWRtYV9hZGRyX3QgZG1hOworCX07CisJdW5zaWduZWQgaW50
IGN1cnI7CisJdW5zaWduZWQgaW50IG1heDsKK30gX19zZ3RfaXRlcihzdHJ1Y3Qgc2NhdHRlcmxp
c3QgKnNnbCwgYm9vbCBkbWEpIHsKKwlzdHJ1Y3Qgc2d0X2l0ZXIgcyA9IHsgLnNncCA9IHNnbCB9
OworCisJaWYgKHMuc2dwKSB7CisJCXMubWF4ID0gcy5jdXJyID0gcy5zZ3AtPm9mZnNldDsKKwkJ
cy5tYXggKz0gcy5zZ3AtPmxlbmd0aDsKKwkJaWYgKGRtYSkKKwkJCXMuZG1hID0gc2dfZG1hX2Fk
ZHJlc3Mocy5zZ3ApOworCQllbHNlCisJCQlzLnBmbiA9IHBhZ2VfdG9fcGZuKHNnX3BhZ2Uocy5z
Z3ApKTsKKwl9CisKKwlyZXR1cm4gczsKK30KKworc3RhdGljIGlubGluZSBpbnQgX19zZ19wYWdl
X2NvdW50KGNvbnN0IHN0cnVjdCBzY2F0dGVybGlzdCAqc2cpCit7CisJcmV0dXJuIHNnLT5sZW5n
dGggPj4gUEFHRV9TSElGVDsKK30KKworc3RhdGljIGlubGluZSBzdHJ1Y3Qgc2NhdHRlcmxpc3Qg
Kl9fX19zZ19uZXh0KHN0cnVjdCBzY2F0dGVybGlzdCAqc2cpCit7CisJKytzZzsKKwlpZiAodW5s
aWtlbHkoc2dfaXNfY2hhaW4oc2cpKSkKKwkJc2cgPSBzZ19jaGFpbl9wdHIoc2cpOworCXJldHVy
biBzZzsKK30KKworLyoqCisgKiBfX3NnX25leHQgLSByZXR1cm4gdGhlIG5leHQgc2NhdHRlcmxp
c3QgZW50cnkgaW4gYSBsaXN0CisgKiBAc2c6CQlUaGUgY3VycmVudCBzZyBlbnRyeQorICoKKyAq
IERlc2NyaXB0aW9uOgorICogICBJZiB0aGUgZW50cnkgaXMgdGhlIGxhc3QsIHJldHVybiBOVUxM
OyBvdGhlcndpc2UsIHN0ZXAgdG8gdGhlIG5leHQKKyAqICAgZWxlbWVudCBpbiB0aGUgYXJyYXkg
KEBzZ0ArMSkuIElmIHRoYXQncyBhIGNoYWluIHBvaW50ZXIsIGZvbGxvdyBpdDsKKyAqICAgb3Ro
ZXJ3aXNlIGp1c3QgcmV0dXJuIHRoZSBwb2ludGVyIHRvIHRoZSBjdXJyZW50IGVsZW1lbnQuCisg
KiovCitzdGF0aWMgaW5saW5lIHN0cnVjdCBzY2F0dGVybGlzdCAqX19zZ19uZXh0KHN0cnVjdCBz
Y2F0dGVybGlzdCAqc2cpCit7CisJcmV0dXJuIHNnX2lzX2xhc3Qoc2cpID8gTlVMTCA6IF9fX19z
Z19uZXh0KHNnKTsKK30KKworLyoqCisgKiBfX2Zvcl9lYWNoX3NndF9kbWEgLSBpdGVyYXRlIG92
ZXIgdGhlIERNQSBhZGRyZXNzZXMgb2YgdGhlIGdpdmVuIHNnX3RhYmxlCisgKiBAX19kbWFwOglE
TUEgYWRkcmVzcyAob3V0cHV0KQorICogQF9faXRlcjoJJ3N0cnVjdCBzZ3RfaXRlcicgKGl0ZXJh
dG9yIHN0YXRlLCBpbnRlcm5hbCkKKyAqIEBfX3NndDoJc2dfdGFibGUgdG8gaXRlcmF0ZSBvdmVy
IChpbnB1dCkKKyAqIEBfX3N0ZXA6CXN0ZXAgc2l6ZQorICovCisjZGVmaW5lIF9fZm9yX2VhY2hf
c2d0X2RtYShfX2RtYXAsIF9faXRlciwgX19zZ3QsIF9fc3RlcCkJCVwKKwlmb3IgKChfX2l0ZXIp
ID0gX19zZ3RfaXRlcigoX19zZ3QpLT5zZ2wsIHRydWUpOwkJCVwKKwkgICAgICgoX19kbWFwKSA9
IChfX2l0ZXIpLmRtYSArIChfX2l0ZXIpLmN1cnIpOwkJCVwKKwkgICAgICgoKF9faXRlcikuY3Vy
ciArPSAoX19zdGVwKSkgPj0gKF9faXRlcikubWF4KSA/CQlcCisJICAgICAoX19pdGVyKSA9IF9f
c2d0X2l0ZXIoX19zZ19uZXh0KChfX2l0ZXIpLnNncCksIHRydWUpLCAwIDogMCkKKworLyoqCisg
KiBmb3JfZWFjaF9zZ3RfcGFnZSAtIGl0ZXJhdGUgb3ZlciB0aGUgcGFnZXMgb2YgdGhlIGdpdmVu
IHNnX3RhYmxlCisgKiBAX19wcDoJcGFnZSBwb2ludGVyIChvdXRwdXQpCisgKiBAX19pdGVyOgkn
c3RydWN0IHNndF9pdGVyJyAoaXRlcmF0b3Igc3RhdGUsIGludGVybmFsKQorICogQF9fc2d0Oglz
Z190YWJsZSB0byBpdGVyYXRlIG92ZXIgKGlucHV0KQorICovCisjZGVmaW5lIGZvcl9lYWNoX3Nn
dF9wYWdlKF9fcHAsIF9faXRlciwgX19zZ3QpCQkJCVwKKwlmb3IgKChfX2l0ZXIpID0gX19zZ3Rf
aXRlcigoX19zZ3QpLT5zZ2wsIGZhbHNlKTsJCVwKKwkgICAgICgoX19wcCkgPSAoX19pdGVyKS5w
Zm4gPT0gMCA/IE5VTEwgOgkJCVwKKwkgICAgICBwZm5fdG9fcGFnZSgoX19pdGVyKS5wZm4gKyAo
KF9faXRlcikuY3VyciA+PiBQQUdFX1NISUZUKSkpOyBcCisJICAgICAoKChfX2l0ZXIpLmN1cnIg
Kz0gUEFHRV9TSVpFKSA+PSAoX19pdGVyKS5tYXgpID8JCVwKKwkgICAgIChfX2l0ZXIpID0gX19z
Z3RfaXRlcihfX3NnX25leHQoKF9faXRlcikuc2dwKSwgZmFsc2UpLCAwIDogMCkKKworc3RhdGlj
IGlubGluZSB1bnNpZ25lZCBpbnQgaTkxNV9zZ19wYWdlX3NpemVzKHN0cnVjdCBzY2F0dGVybGlz
dCAqc2cpCit7CisJdW5zaWduZWQgaW50IHBhZ2Vfc2l6ZXM7CisKKwlwYWdlX3NpemVzID0gMDsK
Kwl3aGlsZSAoc2cpIHsKKwkJR0VNX0JVR19PTihzZy0+b2Zmc2V0KTsKKwkJR0VNX0JVR19PTigh
SVNfQUxJR05FRChzZy0+bGVuZ3RoLCBQQUdFX1NJWkUpKTsKKwkJcGFnZV9zaXplcyB8PSBzZy0+
bGVuZ3RoOworCQlzZyA9IF9fc2dfbmV4dChzZyk7CisJfQorCisJcmV0dXJuIHBhZ2Vfc2l6ZXM7
Cit9CisKK3N0YXRpYyBpbmxpbmUgdW5zaWduZWQgaW50IGk5MTVfc2dfc2VnbWVudF9zaXplKHZv
aWQpCit7CisJdW5zaWduZWQgaW50IHNpemUgPSBzd2lvdGxiX21heF9zZWdtZW50KCk7CisKKwlp
ZiAoc2l6ZSA9PSAwKQorCQlyZXR1cm4gU0NBVFRFUkxJU1RfTUFYX1NFR01FTlQ7CisKKwlzaXpl
ID0gcm91bmRkb3duKHNpemUsIFBBR0VfU0laRSk7CisJLyogc3dpb3RsYl9tYXhfc2VnbWVudF9z
aXplIGNhbiByZXR1cm4gMSBieXRlIHdoZW4gaXQgbWVhbnMgb25lIHBhZ2UuICovCisJaWYgKHNp
emUgPCBQQUdFX1NJWkUpCisJCXNpemUgPSBQQUdFX1NJWkU7CisKKwlyZXR1cm4gc2l6ZTsKK30K
KworYm9vbCBpOTE1X3NnX3RyaW0oc3RydWN0IHNnX3RhYmxlICpvcmlnX3N0KTsKKworI2VuZGlm
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV92bWEuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5jCmluZGV4IDEzMWQwZDlh
NmNkMS4uYjBhNDI5NmEwNTA0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvaTkxNV92bWEuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkx
NV92bWEuYwpAQCAtMzAsNiArMzAsNyBAQAogI2luY2x1ZGUgIm1vY2tfZ3R0LmgiCiAKICNpbmNs
dWRlICIuLi9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5oIgorI2luY2x1ZGUgIi4uL2k5MTVf
c2NhdHRlcmxpc3QuaCIKIAogc3RhdGljIGJvb2wgYXNzZXJ0X3ZtYShzdHJ1Y3QgaTkxNV92bWEg
KnZtYSwKIAkJICAgICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvc2NhdHRlcmxpc3QuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9zY2F0dGVybGlzdC5jCmluZGV4IGNkNmQyYTE2MDcx
Zi4uNWYwYzQ4YTlmMDUxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVz
dHMvc2NhdHRlcmxpc3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvc2Nh
dHRlcmxpc3QuYwpAQCAtMjUsNiArMjUsNyBAQAogI2luY2x1ZGUgPGxpbnV4L3JhbmRvbS5oPgog
CiAjaW5jbHVkZSAiLi4vaTkxNV9zZWxmdGVzdC5oIgorI2luY2x1ZGUgIi4uL2k5MTVfdXRpbHMu
aCIKIAogI2RlZmluZSBQRk5fQklBUyAoMSA8PCAxMCkKIAotLSAKMi4yMC4xCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBs
aXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

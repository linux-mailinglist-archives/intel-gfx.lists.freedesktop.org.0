Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6BEF012CEE
	for <lists+intel-gfx@lfdr.de>; Fri,  3 May 2019 13:52:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C4E5889CF8;
	Fri,  3 May 2019 11:52:50 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 192D589CF8
 for <intel-gfx@lists.freedesktop.org>; Fri,  3 May 2019 11:52:48 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16440745-1500050 
 for multiple; Fri, 03 May 2019 12:52:27 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  3 May 2019 12:52:16 +0100
Message-Id: <20190503115225.30831-4-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190503115225.30831-1-chris@chris-wilson.co.uk>
References: <20190503115225.30831-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 04/13] drm/i915/hangcheck: Replace
 hangcheck.seqno with RING_HEAD
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWZ0ZXIgcmVhbGlzaW5nIHdlIG5lZWQgdG8gc2FtcGxlIFJJTkdfU1RBUlQgdG8gZGV0ZWN0IGNv
bnRleHQgc3dpdGNoZXMKZnJvbSBwcmVlbXB0aW9uIGV2ZW50cyB0aGF0IGRvIG5vdCBhbGxvdyBm
b3IgdGhlIHNlcW5vIHRvIGFkdmFuY2UsIHdlCmNhbiBhbHNvIHJlYWxpc2UgdGhhdCB0aGUgc2Vx
bm8gaXRzZWxmIGlzIGp1c3QgYSBkaXN0YW5jZSBhbG9uZyB0aGUgcmluZwphbmQgc28gY2FuIGJl
IHJlcGxhY2VkIGJ5IHNhbXBsaW5nIFJJTkdfSEVBRC4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdp
bHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogTWlrYSBLdW9wcGFsYSA8bWlrYS5r
dW9wcGFsYUBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lLmggICAgICAgfCAxNSAtLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZV9jcy5jICAgIHwgIDUgKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9lbmdpbmVfdHlwZXMuaCB8ICAzICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9oYW5nY2hlY2suYyAgICB8ICA4ICsrLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9scmMuYyAgICAgICAgICB8IDExIC0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX3JpbmdidWZmZXIuYyAgIHwgMzIgKystLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jICAgICAgICAgIHwgMTIgKystLS0tLS0KIDcgZmlsZXMg
Y2hhbmdlZCwgMTIgaW5zZXJ0aW9ucygrKSwgNzQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmggYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9lbmdpbmUuaAppbmRleCBmNWIwZjI3Y2VjYjYuLjllMmExODNhMzUxYyAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKQEAgLTIzMyw4ICsyMzMsNiBA
QCBpbnRlbF93cml0ZV9zdGF0dXNfcGFnZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUs
IGludCByZWcsIHUzMiB2YWx1ZSkKICAqLwogI2RlZmluZSBJOTE1X0dFTV9IV1NfUFJFRU1QVAkJ
MHgzMgogI2RlZmluZSBJOTE1X0dFTV9IV1NfUFJFRU1QVF9BRERSCShJOTE1X0dFTV9IV1NfUFJF
RU1QVCAqIHNpemVvZih1MzIpKQotI2RlZmluZSBJOTE1X0dFTV9IV1NfSEFOR0NIRUNLCQkweDM0
Ci0jZGVmaW5lIEk5MTVfR0VNX0hXU19IQU5HQ0hFQ0tfQUREUgkoSTkxNV9HRU1fSFdTX0hBTkdD
SEVDSyAqIHNpemVvZih1MzIpKQogI2RlZmluZSBJOTE1X0dFTV9IV1NfU0VRTk8JCTB4NDAKICNk
ZWZpbmUgSTkxNV9HRU1fSFdTX1NFUU5PX0FERFIJCShJOTE1X0dFTV9IV1NfU0VRTk8gKiBzaXpl
b2YodTMyKSkKICNkZWZpbmUgSTkxNV9HRU1fSFdTX1NDUkFUQ0gJCTB4ODAKQEAgLTU2NiwxNyAr
NTY0LDQgQEAgc3RhdGljIGlubGluZSBib29sIGluamVjdF9wcmVlbXB0X2hhbmcoc3RydWN0IGlu
dGVsX2VuZ2luZV9leGVjbGlzdHMgKmV4ZWNsaXN0cykKIAogI2VuZGlmCiAKLXN0YXRpYyBpbmxp
bmUgdTMyCi1pbnRlbF9lbmdpbmVfbmV4dF9oYW5nY2hlY2tfc2Vxbm8oc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lKQotewotCXJldHVybiBlbmdpbmUtPmhhbmdjaGVjay5uZXh0X3NlcW5v
ID0KLQkJbmV4dF9wc2V1ZG9fcmFuZG9tMzIoZW5naW5lLT5oYW5nY2hlY2submV4dF9zZXFubyk7
Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdTMyCi1pbnRlbF9lbmdpbmVfZ2V0X2hhbmdjaGVja19zZXFu
byhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCi17Ci0JcmV0dXJuIGludGVsX3JlYWRf
c3RhdHVzX3BhZ2UoZW5naW5lLCBJOTE1X0dFTV9IV1NfSEFOR0NIRUNLKTsKLX0KLQogI2VuZGlm
IC8qIF9JTlRFTF9SSU5HQlVGRkVSX0hfICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZV9jcy5jCmluZGV4IDQxNmQ3ZTJlNmY4Yy4uNGMzNzUzYzFiNTczIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwpAQCAtNzIxLDYgKzcyMSw3IEBAIHN0
YXRpYyBpbnQgbWVhc3VyZV9icmVhZGNydW1iX2R3KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSkKIAkJZ290byBvdXRfdGltZWxpbmU7CiAKIAlkdyA9IGVuZ2luZS0+ZW1pdF9maW5pX2Jy
ZWFkY3J1bWIoJmZyYW1lLT5ycSwgZnJhbWUtPmNzKSAtIGZyYW1lLT5jczsKKwlHRU1fQlVHX09O
KGR3ICYgMSk7IC8qIFJJTkdfVEFJTCBtdXN0IGJlIHF3b3JkIGFsaWduZWQgKi8KIAogCWk5MTVf
dGltZWxpbmVfdW5waW4oJmZyYW1lLT50aW1lbGluZSk7CiAKQEAgLTE0NDQsOSArMTQ0NSw3IEBA
IHZvaWQgaW50ZWxfZW5naW5lX2R1bXAoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAog
CQlkcm1fcHJpbnRmKG0sICIqKiogV0VER0VEICoqKlxuIik7CiAKIAlkcm1fcHJpbnRmKG0sICJc
dEF3YWtlPyAlZFxuIiwgYXRvbWljX3JlYWQoJmVuZ2luZS0+d2FrZXJlZi5jb3VudCkpOwotCWRy
bV9wcmludGYobSwgIlx0SGFuZ2NoZWNrICV4OiV4IFslZCBtc11cbiIsCi0JCSAgIGVuZ2luZS0+
aGFuZ2NoZWNrLmxhc3Rfc2Vxbm8sCi0JCSAgIGVuZ2luZS0+aGFuZ2NoZWNrLm5leHRfc2Vxbm8s
CisJZHJtX3ByaW50ZihtLCAiXHRIYW5nY2hlY2s6ICVkIG1zIGFnb1xuIiwKIAkJICAgamlmZmll
c190b19tc2VjcyhqaWZmaWVzIC0gZW5naW5lLT5oYW5nY2hlY2suYWN0aW9uX3RpbWVzdGFtcCkp
OwogCWRybV9wcmludGYobSwgIlx0UmVzZXQgY291bnQ6ICVkIChnbG9iYWwgJWQpXG4iLAogCQkg
ICBpOTE1X3Jlc2V0X2VuZ2luZV9jb3VudChlcnJvciwgZW5naW5lKSwKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKaW5kZXggYzBhYjExYjEyZTE0Li5lMzgx
YzFjNzM5MDIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2lu
ZV90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBl
cy5oCkBAIC01NCw4ICs1NCw3IEBAIHN0cnVjdCBpbnRlbF9pbnN0ZG9uZSB7CiBzdHJ1Y3QgaW50
ZWxfZW5naW5lX2hhbmdjaGVjayB7CiAJdTY0IGFjdGhkOwogCXUzMiBsYXN0X3Jpbmc7Ci0JdTMy
IGxhc3Rfc2Vxbm87Ci0JdTMyIG5leHRfc2Vxbm87CisJdTMyIGxhc3RfaGVhZDsKIAl1bnNpZ25l
ZCBsb25nIGFjdGlvbl90aW1lc3RhbXA7CiAJc3RydWN0IGludGVsX2luc3Rkb25lIGluc3Rkb25l
OwogfTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2hhbmdjaGVj
ay5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfaGFuZ2NoZWNrLmMKaW5kZXggNzIx
YWI3NGEzODJmLi4zYTRkMDliODBmYTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2hhbmdjaGVjay5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2hhbmdjaGVjay5jCkBAIC0yOCw3ICsyOCw3IEBACiBzdHJ1Y3QgaGFuZ2NoZWNrIHsKIAl1NjQg
YWN0aGQ7CiAJdTMyIHJpbmc7Ci0JdTMyIHNlcW5vOworCXUzMiBoZWFkOwogCWVudW0gaW50ZWxf
ZW5naW5lX2hhbmdjaGVja19hY3Rpb24gYWN0aW9uOwogCXVuc2lnbmVkIGxvbmcgYWN0aW9uX3Rp
bWVzdGFtcDsKIAlpbnQgZGVhZGxvY2s7CkBAIC0xMzQsMTYgKzEzNCwxNiBAQCBzdGF0aWMgdm9p
ZCBoYW5nY2hlY2tfbG9hZF9zYW1wbGUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAog
CQkJCSAgc3RydWN0IGhhbmdjaGVjayAqaGMpCiB7CiAJaGMtPmFjdGhkID0gaW50ZWxfZW5naW5l
X2dldF9hY3RpdmVfaGVhZChlbmdpbmUpOwotCWhjLT5zZXFubyA9IGludGVsX2VuZ2luZV9nZXRf
aGFuZ2NoZWNrX3NlcW5vKGVuZ2luZSk7CiAJaGMtPnJpbmcgPSBFTkdJTkVfUkVBRChlbmdpbmUs
IFJJTkdfU1RBUlQpOworCWhjLT5oZWFkID0gRU5HSU5FX1JFQUQoZW5naW5lLCBSSU5HX0hFQUQp
OwogfQogCiBzdGF0aWMgdm9pZCBoYW5nY2hlY2tfc3RvcmVfc2FtcGxlKHN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZSwKIAkJCQkgICBjb25zdCBzdHJ1Y3QgaGFuZ2NoZWNrICpoYykKIHsK
IAllbmdpbmUtPmhhbmdjaGVjay5hY3RoZCA9IGhjLT5hY3RoZDsKLQllbmdpbmUtPmhhbmdjaGVj
ay5sYXN0X3NlcW5vID0gaGMtPnNlcW5vOwogCWVuZ2luZS0+aGFuZ2NoZWNrLmxhc3RfcmluZyA9
IGhjLT5yaW5nOworCWVuZ2luZS0+aGFuZ2NoZWNrLmxhc3RfaGVhZCA9IGhjLT5oZWFkOwogfQog
CiBzdGF0aWMgZW51bSBpbnRlbF9lbmdpbmVfaGFuZ2NoZWNrX2FjdGlvbgpAQCAtMTU2LDcgKzE1
Niw3IEBAIGhhbmdjaGVja19nZXRfYWN0aW9uKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZSwKIAlpZiAoZW5naW5lLT5oYW5nY2hlY2subGFzdF9yaW5nICE9IGhjLT5yaW5nKQogCQlyZXR1
cm4gRU5HSU5FX0FDVElWRV9TRVFOTzsKIAotCWlmIChlbmdpbmUtPmhhbmdjaGVjay5sYXN0X3Nl
cW5vICE9IGhjLT5zZXFubykKKwlpZiAoZW5naW5lLT5oYW5nY2hlY2subGFzdF9oZWFkICE9IGhj
LT5oZWFkKQogCQlyZXR1cm4gRU5HSU5FX0FDVElWRV9TRVFOTzsKIAogCXJldHVybiBlbmdpbmVf
c3R1Y2soZW5naW5lLCBoYy0+YWN0aGQpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpp
bmRleCA1NTgwYjZmMWFhMGMuLjkwOTAwYzdkNzA1OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfbHJjLmMKQEAgLTIyNzMsMTIgKzIyNzMsNiBAQCBzdGF0aWMgdTMyICpnZW44X2VtaXRfZmlu
aV9icmVhZGNydW1iKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJlcXVlc3QsIHUzMiAqY3MpCiAJCQkJ
ICByZXF1ZXN0LT50aW1lbGluZS0+aHdzcF9vZmZzZXQsCiAJCQkJICAwKTsKIAotCWNzID0gZ2Vu
OF9lbWl0X2dndHRfd3JpdGUoY3MsCi0JCQkJICBpbnRlbF9lbmdpbmVfbmV4dF9oYW5nY2hlY2tf
c2Vxbm8ocmVxdWVzdC0+ZW5naW5lKSwKLQkJCQkgIEk5MTVfR0VNX0hXU19IQU5HQ0hFQ0tfQURE
UiwKLQkJCQkgIE1JX0ZMVVNIX0RXX1NUT1JFX0lOREVYKTsKLQotCiAJKmNzKysgPSBNSV9VU0VS
X0lOVEVSUlVQVDsKIAkqY3MrKyA9IE1JX0FSQl9PTl9PRkYgfCBNSV9BUkJfRU5BQkxFOwogCkBA
IC0yMjk5LDExICsyMjkzLDYgQEAgc3RhdGljIHUzMiAqZ2VuOF9lbWl0X2ZpbmlfYnJlYWRjcnVt
Yl9yY3Moc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCwgdTMyICpjcykKIAkJCQkgICAgICBQ
SVBFX0NPTlRST0xfRkxVU0hfRU5BQkxFIHwKIAkJCQkgICAgICBQSVBFX0NPTlRST0xfQ1NfU1RB
TEwpOwogCi0JY3MgPSBnZW44X2VtaXRfZ2d0dF93cml0ZV9yY3MoY3MsCi0JCQkJICAgICAgaW50
ZWxfZW5naW5lX25leHRfaGFuZ2NoZWNrX3NlcW5vKHJlcXVlc3QtPmVuZ2luZSksCi0JCQkJICAg
ICAgSTkxNV9HRU1fSFdTX0hBTkdDSEVDS19BRERSLAotCQkJCSAgICAgIFBJUEVfQ09OVFJPTF9T
VE9SRV9EQVRBX0lOREVYKTsKLQogCSpjcysrID0gTUlfVVNFUl9JTlRFUlJVUFQ7CiAJKmNzKysg
PSBNSV9BUkJfT05fT0ZGIHwgTUlfQVJCX0VOQUJMRTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ2J1ZmZlci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfcmluZ2J1ZmZlci5jCmluZGV4IDZmYmM1ZGRiYzg5Ni4uZjBkNjBhZmZkYmEzIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ2J1ZmZlci5jCkBAIC0zMDksMTEg
KzMwOSw2IEBAIHN0YXRpYyB1MzIgKmdlbjZfcmNzX2VtaXRfYnJlYWRjcnVtYihzdHJ1Y3QgaTkx
NV9yZXF1ZXN0ICpycSwgdTMyICpjcykKIAkqY3MrKyA9IHJxLT50aW1lbGluZS0+aHdzcF9vZmZz
ZXQgfCBQSVBFX0NPTlRST0xfR0xPQkFMX0dUVDsKIAkqY3MrKyA9IHJxLT5mZW5jZS5zZXFubzsK
IAotCSpjcysrID0gR0ZYX09QX1BJUEVfQ09OVFJPTCg0KTsKLQkqY3MrKyA9IFBJUEVfQ09OVFJP
TF9RV19XUklURSB8IFBJUEVfQ09OVFJPTF9TVE9SRV9EQVRBX0lOREVYOwotCSpjcysrID0gSTkx
NV9HRU1fSFdTX0hBTkdDSEVDS19BRERSIHwgUElQRV9DT05UUk9MX0dMT0JBTF9HVFQ7Ci0JKmNz
KysgPSBpbnRlbF9lbmdpbmVfbmV4dF9oYW5nY2hlY2tfc2Vxbm8ocnEtPmVuZ2luZSk7Ci0KIAkq
Y3MrKyA9IE1JX1VTRVJfSU5URVJSVVBUOwogCSpjcysrID0gTUlfTk9PUDsKIApAQCAtNDE1LDEz
ICs0MTAsNiBAQCBzdGF0aWMgdTMyICpnZW43X3Jjc19lbWl0X2JyZWFkY3J1bWIoc3RydWN0IGk5
MTVfcmVxdWVzdCAqcnEsIHUzMiAqY3MpCiAJKmNzKysgPSBycS0+dGltZWxpbmUtPmh3c3Bfb2Zm
c2V0OwogCSpjcysrID0gcnEtPmZlbmNlLnNlcW5vOwogCi0JKmNzKysgPSBHRlhfT1BfUElQRV9D
T05UUk9MKDQpOwotCSpjcysrID0gKFBJUEVfQ09OVFJPTF9RV19XUklURSB8Ci0JCSBQSVBFX0NP
TlRST0xfU1RPUkVfREFUQV9JTkRFWCB8Ci0JCSBQSVBFX0NPTlRST0xfR0xPQkFMX0dUVF9JVkIp
OwotCSpjcysrID0gSTkxNV9HRU1fSFdTX0hBTkdDSEVDS19BRERSOwotCSpjcysrID0gaW50ZWxf
ZW5naW5lX25leHRfaGFuZ2NoZWNrX3NlcW5vKHJxLT5lbmdpbmUpOwotCiAJKmNzKysgPSBNSV9V
U0VSX0lOVEVSUlVQVDsKIAkqY3MrKyA9IE1JX05PT1A7CiAKQEAgLTQ0MCwxMiArNDI4LDcgQEAg
c3RhdGljIHUzMiAqZ2VuNl94Y3NfZW1pdF9icmVhZGNydW1iKHN0cnVjdCBpOTE1X3JlcXVlc3Qg
KnJxLCB1MzIgKmNzKQogCSpjcysrID0gSTkxNV9HRU1fSFdTX1NFUU5PX0FERFIgfCBNSV9GTFVT
SF9EV19VU0VfR1RUOwogCSpjcysrID0gcnEtPmZlbmNlLnNlcW5vOwogCi0JKmNzKysgPSBNSV9G
TFVTSF9EVyB8IE1JX0ZMVVNIX0RXX09QX1NUT1JFRFcgfCBNSV9GTFVTSF9EV19TVE9SRV9JTkRF
WDsKLQkqY3MrKyA9IEk5MTVfR0VNX0hXU19IQU5HQ0hFQ0tfQUREUiB8IE1JX0ZMVVNIX0RXX1VT
RV9HVFQ7Ci0JKmNzKysgPSBpbnRlbF9lbmdpbmVfbmV4dF9oYW5nY2hlY2tfc2Vxbm8ocnEtPmVu
Z2luZSk7Ci0KIAkqY3MrKyA9IE1JX1VTRVJfSU5URVJSVVBUOwotCSpjcysrID0gTUlfTk9PUDsK
IAogCXJxLT50YWlsID0gaW50ZWxfcmluZ19vZmZzZXQocnEsIGNzKTsKIAlhc3NlcnRfcmluZ190
YWlsX3ZhbGlkKHJxLT5yaW5nLCBycS0+dGFpbCk7CkBAIC00NjUsMTAgKzQ0OCw2IEBAIHN0YXRp
YyB1MzIgKmdlbjdfeGNzX2VtaXRfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwg
dTMyICpjcykKIAkqY3MrKyA9IEk5MTVfR0VNX0hXU19TRVFOT19BRERSIHwgTUlfRkxVU0hfRFdf
VVNFX0dUVDsKIAkqY3MrKyA9IHJxLT5mZW5jZS5zZXFubzsKIAotCSpjcysrID0gTUlfRkxVU0hf
RFcgfCBNSV9GTFVTSF9EV19PUF9TVE9SRURXIHwgTUlfRkxVU0hfRFdfU1RPUkVfSU5ERVg7Ci0J
KmNzKysgPSBJOTE1X0dFTV9IV1NfSEFOR0NIRUNLX0FERFIgfCBNSV9GTFVTSF9EV19VU0VfR1RU
OwotCSpjcysrID0gaW50ZWxfZW5naW5lX25leHRfaGFuZ2NoZWNrX3NlcW5vKHJxLT5lbmdpbmUp
OwotCiAJZm9yIChpID0gMDsgaSA8IEdFTjdfWENTX1dBOyBpKyspIHsKIAkJKmNzKysgPSBNSV9T
VE9SRV9EV09SRF9JTkRFWDsKIAkJKmNzKysgPSBJOTE1X0dFTV9IV1NfU0VRTk9fQUREUjsKQEAg
LTQ4MCw2ICs0NTksNyBAQCBzdGF0aWMgdTMyICpnZW43X3hjc19lbWl0X2JyZWFkY3J1bWIoc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcnEsIHUzMiAqY3MpCiAJKmNzKysgPSAwOwogCiAJKmNzKysgPSBN
SV9VU0VSX0lOVEVSUlVQVDsKKwkqY3MrKyA9IE1JX05PT1A7CiAKIAlycS0+dGFpbCA9IGludGVs
X3Jpbmdfb2Zmc2V0KHJxLCBjcyk7CiAJYXNzZXJ0X3JpbmdfdGFpbF92YWxpZChycS0+cmluZywg
cnEtPnRhaWwpOwpAQCAtOTI4LDExICs5MDgsOCBAQCBzdGF0aWMgdTMyICppOXh4X2VtaXRfYnJl
YWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgdTMyICpjcykKIAkqY3MrKyA9IEk5MTVf
R0VNX0hXU19TRVFOT19BRERSOwogCSpjcysrID0gcnEtPmZlbmNlLnNlcW5vOwogCi0JKmNzKysg
PSBNSV9TVE9SRV9EV09SRF9JTkRFWDsKLQkqY3MrKyA9IEk5MTVfR0VNX0hXU19IQU5HQ0hFQ0tf
QUREUjsKLQkqY3MrKyA9IGludGVsX2VuZ2luZV9uZXh0X2hhbmdjaGVja19zZXFubyhycS0+ZW5n
aW5lKTsKLQogCSpjcysrID0gTUlfVVNFUl9JTlRFUlJVUFQ7CisJKmNzKysgPSBNSV9OT09QOwog
CiAJcnEtPnRhaWwgPSBpbnRlbF9yaW5nX29mZnNldChycSwgY3MpOwogCWFzc2VydF9yaW5nX3Rh
aWxfdmFsaWQocnEtPnJpbmcsIHJxLT50YWlsKTsKQEAgLTk1MCwxMCArOTI3LDYgQEAgc3RhdGlj
IHUzMiAqZ2VuNV9lbWl0X2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsIHUzMiAq
Y3MpCiAKIAkqY3MrKyA9IE1JX0ZMVVNIOwogCi0JKmNzKysgPSBNSV9TVE9SRV9EV09SRF9JTkRF
WDsKLQkqY3MrKyA9IEk5MTVfR0VNX0hXU19IQU5HQ0hFQ0tfQUREUjsKLQkqY3MrKyA9IGludGVs
X2VuZ2luZV9uZXh0X2hhbmdjaGVja19zZXFubyhycS0+ZW5naW5lKTsKLQogCUJVSUxEX0JVR19P
TihHRU41X1dBX1NUT1JFUyA8IDEpOwogCWZvciAoaSA9IDA7IGkgPCBHRU41X1dBX1NUT1JFUzsg
aSsrKSB7CiAJCSpjcysrID0gTUlfU1RPUkVfRFdPUkRfSU5ERVg7CkBAIC05NjIsNyArOTM1LDYg
QEAgc3RhdGljIHUzMiAqZ2VuNV9lbWl0X2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAq
cnEsIHUzMiAqY3MpCiAJfQogCiAJKmNzKysgPSBNSV9VU0VSX0lOVEVSUlVQVDsKLQkqY3MrKyA9
IE1JX05PT1A7CiAKIAlycS0+dGFpbCA9IGludGVsX3Jpbmdfb2Zmc2V0KHJxLCBjcyk7CiAJYXNz
ZXJ0X3JpbmdfdGFpbF92YWxpZChycS0+cmluZywgcnEtPnRhaWwpOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2RlYnVnZnMuYwppbmRleCAxNGNkODNlOWVhOGIuLmRhNGZiOWYzNGQyNyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKQEAgLTEyODgsNyArMTI4OCw2IEBAIHN0YXRpYyBpbnQg
aTkxNV9oYW5nY2hlY2tfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIAlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSBub2RlX3RvX2k5MTUobS0+cHJpdmF0
ZSk7CiAJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOwogCXU2NCBhY3RoZFtJOTE1X05V
TV9FTkdJTkVTXTsKLQl1MzIgc2Vxbm9bSTkxNV9OVU1fRU5HSU5FU107CiAJc3RydWN0IGludGVs
X2luc3Rkb25lIGluc3Rkb25lOwogCWludGVsX3dha2VyZWZfdCB3YWtlcmVmOwogCWVudW0gaW50
ZWxfZW5naW5lX2lkIGlkOwpAQCAtMTMwNSwxMCArMTMwNCw4IEBAIHN0YXRpYyBpbnQgaTkxNV9o
YW5nY2hlY2tfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIAl9CiAKIAl3
aXRoX2ludGVsX3J1bnRpbWVfcG0oZGV2X3ByaXYsIHdha2VyZWYpIHsKLQkJZm9yX2VhY2hfZW5n
aW5lKGVuZ2luZSwgZGV2X3ByaXYsIGlkKSB7CisJCWZvcl9lYWNoX2VuZ2luZShlbmdpbmUsIGRl
dl9wcml2LCBpZCkKIAkJCWFjdGhkW2lkXSA9IGludGVsX2VuZ2luZV9nZXRfYWN0aXZlX2hlYWQo
ZW5naW5lKTsKLQkJCXNlcW5vW2lkXSA9IGludGVsX2VuZ2luZV9nZXRfaGFuZ2NoZWNrX3NlcW5v
KGVuZ2luZSk7Ci0JCX0KIAogCQlpbnRlbF9lbmdpbmVfZ2V0X2luc3Rkb25lKGRldl9wcml2LT5l
bmdpbmVbUkNTMF0sICZpbnN0ZG9uZSk7CiAJfQpAQCAtMTMyNSwxMSArMTMyMiw4IEBAIHN0YXRp
YyBpbnQgaTkxNV9oYW5nY2hlY2tfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNl
ZCkKIAlzZXFfcHJpbnRmKG0sICJHVCBhY3RpdmU/ICVzXG4iLCB5ZXNubyhkZXZfcHJpdi0+Z3Qu
YXdha2UpKTsKIAogCWZvcl9lYWNoX2VuZ2luZShlbmdpbmUsIGRldl9wcml2LCBpZCkgewotCQlz
ZXFfcHJpbnRmKG0sICIlczpcbiIsIGVuZ2luZS0+bmFtZSk7Ci0JCXNlcV9wcmludGYobSwgIlx0
c2Vxbm8gPSAleCBbY3VycmVudCAleCwgbGFzdCAleF0sICVkbXMgYWdvXG4iLAotCQkJICAgZW5n
aW5lLT5oYW5nY2hlY2subGFzdF9zZXFubywKLQkJCSAgIHNlcW5vW2lkXSwKLQkJCSAgIGVuZ2lu
ZS0+aGFuZ2NoZWNrLm5leHRfc2Vxbm8sCisJCXNlcV9wcmludGYobSwgIiVzOiAlZCBtcyBhZ29c
biIsCisJCQkgICBlbmdpbmUtPm5hbWUsCiAJCQkgICBqaWZmaWVzX3RvX21zZWNzKGppZmZpZXMg
LQogCQkJCQkgICAgZW5naW5lLT5oYW5nY2hlY2suYWN0aW9uX3RpbWVzdGFtcCkpOwogCi0tIAoy
LjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCklu
dGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

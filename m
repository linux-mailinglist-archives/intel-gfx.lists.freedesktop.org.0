Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 676823BB0C
	for <lists+intel-gfx@lfdr.de>; Mon, 10 Jun 2019 19:35:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 057D189168;
	Mon, 10 Jun 2019 17:35:21 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-vs1-xe44.google.com (mail-vs1-xe44.google.com
 [IPv6:2607:f8b0:4864:20::e44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8003C89168
 for <intel-gfx@lists.freedesktop.org>; Mon, 10 Jun 2019 17:35:19 +0000 (UTC)
Received: by mail-vs1-xe44.google.com with SMTP id v129so5924451vsb.11
 for <intel-gfx@lists.freedesktop.org>; Mon, 10 Jun 2019 10:35:19 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=5GATb11JTMZyBvn5xag7dodY8y9HLAzw9npt/CA7Klo=;
 b=Ww3oajs9noMW3nl/VP4wzZIgGqJkP3MgJ8Fdz+l3yJvMmW/ClzWl7gJjUi4mSNS1JV
 eRwtdE2BcSr4t53R6KtlsJddYKfUAdZMSkQZ61VNb3lc7T9X8JxBCE7mqVdmJngLblwE
 KbOeLzqLyVu+Y0UmmwH7cgfQEOypk1qL/s5KkmeW2PTXmvfQBbmpLEJT3f8KL3pQJKce
 h5a6tQEbWDah3uPb8GSWtQlyGxq5hD+36emhrW9S4tsvoBGvigsgrCtTjjRcREUlQp2C
 F+j644VCrUtqUzBXEZo6xG0JjKY/KvhPoOPVliHcJ3Z13riIsFejv/Q8SuFvO2YH/hmM
 3PoA==
X-Gm-Message-State: APjAAAXVubGLqIDcdNMol7/hm1PAC76rNYkoi8bzwVCG/Xr4QLKd7Cj6
 ncB9ykWS5mHWOvr1lBduNcqapppSdCmPnH26L4FP2kaZQYA=
X-Google-Smtp-Source: APXvYqyPLJBTJBM4wTH3VraiCZ0TPh/TEU9Qos18JEJKfItOIxexoi/7ZIdPZzzAKAtVzOJTYm7Te9CvBbp8o59u+ws=
X-Received: by 2002:a67:8042:: with SMTP id b63mr11225145vsd.23.1560188118583; 
 Mon, 10 Jun 2019 10:35:18 -0700 (PDT)
MIME-Version: 1.0
References: <20190610072126.6355-1-chris@chris-wilson.co.uk>
 <20190610072126.6355-28-chris@chris-wilson.co.uk>
In-Reply-To: <20190610072126.6355-28-chris@chris-wilson.co.uk>
From: Matthew Auld <matthew.william.auld@gmail.com>
Date: Mon, 10 Jun 2019 18:34:52 +0100
Message-ID: <CAM0jSHOy7vy34LCvW4x7dK-pSF5yb3bb=_hXYuSDmd94ER7Vxw@mail.gmail.com>
To: Chris Wilson <chris@chris-wilson.co.uk>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=5GATb11JTMZyBvn5xag7dodY8y9HLAzw9npt/CA7Klo=;
 b=JT2BXeb573WrSts7a52qFDKyPKm0Df/eAHkAjFHGvEdxPPVjDRK9ZfJG/izlRxX49d
 uupixqYLPnZzANAbrBBpHyeqo4enhAhQbE+gYkyXXUShlqzk/x6RC9hri+YuiTSUizWm
 semZC0plrHasvPT+C1UDhUnKAQLgz/54nhatZin6HCMmbK283lQJba0qQI5KY9+A1go2
 +9cuvvWlJ5i6c4D4wGfc3Vc5zwMmO0H2pAfbOE6GkJq2WCvTzDvAwVvUt4t1DHD+3cfo
 BEv7w7SIzB7Hb1NfArOZJl0WZDJKvQFlJl43qDnUlXLu+EYpj6qGCsf5xTP1g/1Uhbv3
 0PXg==
Subject: Re: [Intel-gfx] [PATCH 27/28] drm/i915: Allow vma binding to occur
 asynchronously
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel Graphics Development <intel-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gTW9uLCAxMCBKdW4gMjAxOSBhdCAwODoyMSwgQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13
aWxzb24uY28udWs+IHdyb3RlOgo+Cj4gSWYgd2UgbGV0IHBhZ2VzIGJlIGFsbG9jYXRlZCBhc3lu
Y2hyb25vdXNseSwgd2UgYWxzbyB0aGVuIHdhbnQgdG8gcHVzaAo+IHRoZSBiaW5kaW5nIHByb2Nl
c3MgaW50byBhbiBhc3luY2hyb25vdXMgdGFzay4gTWFrZSBpdCBzbywgdXRpbGlzaW5nIHRoZQo+
IHJlY2VudCBpbXByb3ZlbWVudHMgdG8gZmVuY2UgZXJyb3IgdHJhY2tpbmcgYW5kIHN0cnVjdF9t
dXRleCByZWR1Y3Rpb24uCj4KPiBTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNo
cmlzLXdpbHNvbi5jby51az4KCltzbmlwXQoKPiArc3RhdGljIGludCBxdWV1ZV9hc3luY19iaW5k
KHN0cnVjdCBpOTE1X3ZtYSAqdm1hLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVt
IGk5MTVfY2FjaGVfbGV2ZWwgY2FjaGVfbGV2ZWwsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHUzMiBmbGFncykKPiArewo+ICsgICAgICAgYm9vbCByZWFkeSA9IHRydWU7Cj4gKwo+ICsg
ICAgICAgLyogV2UgYXJlIG5vdCBhbGxvd2VkIHRvIHNocmluayBpbnNpZGUgdm0tPm11dGV4ISAq
Lwo+ICsgICAgICAgdm1hLT5hc3luYy5kbWEgPSBrbWFsbG9jKHNpemVvZigqdm1hLT5hc3luYy5k
bWEpLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdGUF9OT1dBSVQgfCBfX0dG
UF9OT1dBUk4pOwo+ICsgICAgICAgaWYgKCF2bWEtPmFzeW5jLmRtYSkKPiArICAgICAgICAgICAg
ICAgcmV0dXJuIC1FTk9NRU07Cj4gKwo+ICsgICAgICAgZG1hX2ZlbmNlX2luaXQodm1hLT5hc3lu
Yy5kbWEsCj4gKyAgICAgICAgICAgICAgICAgICAgICAmYXN5bmNfYmluZF9vcHMsCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAmYXN5bmNfbG9jaywKPiArICAgICAgICAgICAgICAgICAgICAgIHZt
YS0+dm0tPmk5MTUtPm1tLnVub3JkZXJlZF90aW1lbGluZSwKPiArICAgICAgICAgICAgICAgICAg
ICAgIDApOwo+ICsKPiArICAgICAgIC8qIFhYWCBmaW5kIGFuZCBhdm9pZCBhbGxvY2F0aW9ucyB1
bmRlciByZXNlcnZhdGlvbl9vYmplY3QgbG9ja3MgKi8KPiArICAgICAgIGlmICghaTkxNV92bWFf
dHJ5bG9jayh2bWEpKSB7Cj4gKyAgICAgICAgICAgICAgIGtmcmVlKGZldGNoX2FuZF96ZXJvKCZ2
bWEtPmFzeW5jLmRtYSkpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVBR0FJTjsKPiArICAg
ICAgIH0KPiArCj4gKyAgICAgICBpZiAocmN1X2FjY2Vzc19wb2ludGVyKHZtYS0+cmVzdi0+ZmVu
Y2VfZXhjbCkpIHsgLyogYXN5bmMgcGFnZXMgKi8KPiArICAgICAgICAgICAgICAgc3RydWN0IGRt
YV9mZW5jZSAqZiA9IHJlc2VydmF0aW9uX29iamVjdF9nZXRfZXhjbCh2bWEtPnJlc3YpOwo+ICsK
PiArICAgICAgICAgICAgICAgaWYgKCFkbWFfZmVuY2VfYWRkX2NhbGxiYWNrKGYsCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmdm1hLT5hc3luYy5jYiwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fcXVldWVfYXN5bmNf
YmluZCkpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmVhZHkgPSBmYWxzZTsKPiArICAgICAg
IH0KPiArICAgICAgIHJlc2VydmF0aW9uX29iamVjdF9hZGRfZXhjbF9mZW5jZSh2bWEtPnJlc3Ys
IHZtYS0+YXN5bmMuZG1hKTsKPiArICAgICAgIGk5MTVfdm1hX3VubG9jayh2bWEpOwo+ICsKPiAr
ICAgICAgIGk5MTVfdm1fZ2V0KHZtYS0+dm0pOwo+ICsgICAgICAgaTkxNV92bWFfZ2V0KHZtYSk7
Cj4gKyAgICAgICBfX2k5MTVfdm1hX3Bpbih2bWEpOyAvKiBhdm9pZCBiZWluZyBzaHJ1bmsgKi8K
PiArCj4gKyAgICAgICB2bWEtPmFzeW5jLmNhY2hlX2xldmVsID0gY2FjaGVfbGV2ZWw7Cj4gKyAg
ICAgICB2bWEtPmFzeW5jLmZsYWdzID0gZmxhZ3M7CgpEbyB3ZSBuZWVkIHRvIG1vdmUgdGhpcyBz
dHVmZiB0byBiZWZvcmUgdGhlIGFkZF9jYWxsYmFjaz8KCj4gKwo+ICsgICAgICAgaWYgKHJlYWR5
KQo+ICsgICAgICAgICAgICAgICBfX3F1ZXVlX2FzeW5jX2JpbmQodm1hLT5hc3luYy5kbWEsICZ2
bWEtPmFzeW5jLmNiKTsKPiArCj4gKyAgICAgICByZXR1cm4gMDsKPiArfQo+ICsKPiAgLyoqCj4g
ICAqIGk5MTVfdm1hX2JpbmQgLSBTZXRzIHVwIFBURXMgZm9yIGFuIFZNQSBpbiBpdCdzIGNvcnJl
c3BvbmRpbmcgYWRkcmVzcyBzcGFjZS4KPiAgICogQHZtYTogVk1BIHRvIG1hcAo+IEBAIC0yOTMs
MTcgKzQwNSwxMiBAQCBpbnQgaTkxNV92bWFfYmluZChzdHJ1Y3QgaTkxNV92bWEgKnZtYSwgZW51
bSBpOTE1X2NhY2hlX2xldmVsIGNhY2hlX2xldmVsLAo+ICAgICAgICAgdTMyIHZtYV9mbGFnczsK
PiAgICAgICAgIGludCByZXQ7Cj4KPiArICAgICAgIEdFTV9CVUdfT04oIWZsYWdzKTsKPiAgICAg
ICAgIEdFTV9CVUdfT04oIWRybV9tbV9ub2RlX2FsbG9jYXRlZCgmdm1hLT5ub2RlKSk7Cj4gICAg
ICAgICBHRU1fQlVHX09OKHZtYS0+c2l6ZSA+IHZtYS0+bm9kZS5zaXplKTsKPiAtCj4gLSAgICAg
ICBpZiAoR0VNX0RFQlVHX1dBUk5fT04ocmFuZ2Vfb3ZlcmZsb3dzKHZtYS0+bm9kZS5zdGFydCwK
PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm1hLT5ub2Rl
LnNpemUsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZt
YS0+dm0tPnRvdGFsKSkpCj4gLSAgICAgICAgICAgICAgIHJldHVybiAtRU5PREVWOwo+IC0KPiAt
ICAgICAgIGlmIChHRU1fREVCVUdfV0FSTl9PTighZmxhZ3MpKQo+IC0gICAgICAgICAgICAgICBy
ZXR1cm4gLUVJTlZBTDsKPiAtCj4gKyAgICAgICBHRU1fQlVHX09OKHJhbmdlX292ZXJmbG93cyh2
bWEtPm5vZGUuc3RhcnQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bWEt
Pm5vZGUuc2l6ZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtYS0+dm0t
PnRvdGFsKSk7Cj4gICAgICAgICBiaW5kX2ZsYWdzID0gMDsKPiAgICAgICAgIGlmIChmbGFncyAm
IFBJTl9HTE9CQUwpCj4gICAgICAgICAgICAgICAgIGJpbmRfZmxhZ3MgfD0gSTkxNV9WTUFfR0xP
QkFMX0JJTkQ7Cj4gQEAgLTMxOCwxNCArNDI1LDE4IEBAIGludCBpOTE1X3ZtYV9iaW5kKHN0cnVj
dCBpOTE1X3ZtYSAqdm1hLCBlbnVtIGk5MTVfY2FjaGVfbGV2ZWwgY2FjaGVfbGV2ZWwsCgpBcmUg
d2UgYWltaW5nIGZvciB2bWFfYmluZC92bWFfYmluZF9hc3luYy92bWFfcGluL3ZtYV9waW5fYXN5
bmMgZXRjID8KCj4gICAgICAgICBpZiAoYmluZF9mbGFncyA9PSAwKQo+ICAgICAgICAgICAgICAg
ICByZXR1cm4gMDsKPgo+IC0gICAgICAgR0VNX0JVR19PTighdm1hLT5wYWdlcyk7Cj4gKyAgICAg
ICBpZiAoKGJpbmRfZmxhZ3MgJiB+dm1hX2ZsYWdzKSAmIEk5MTVfVk1BX0xPQ0FMX0JJTkQpCj4g
KyAgICAgICAgICAgICAgIGJpbmRfZmxhZ3MgfD0gSTkxNV9WTUFfQUxMT0NfQklORDsKPgo+ICAg
ICAgICAgdHJhY2VfaTkxNV92bWFfYmluZCh2bWEsIGJpbmRfZmxhZ3MpOwo+IC0gICAgICAgcmV0
ID0gdm1hLT5vcHMtPmJpbmRfdm1hKHZtYSwgY2FjaGVfbGV2ZWwsIGJpbmRfZmxhZ3MpOwo+ICsg
ICAgICAgaWYgKGJpbmRfZmxhZ3MgJiBJOTE1X1ZNQV9BTExPQ19CSU5EKQo+ICsgICAgICAgICAg
ICAgICByZXQgPSBxdWV1ZV9hc3luY19iaW5kKHZtYSwgY2FjaGVfbGV2ZWwsIGJpbmRfZmxhZ3Mp
Owo+ICsgICAgICAgZWxzZQo+ICsgICAgICAgICAgICAgICByZXQgPSBfX3ZtYV9iaW5kKHZtYSwg
Y2FjaGVfbGV2ZWwsIGJpbmRfZmxhZ3MpOwo+ICAgICAgICAgaWYgKHJldCkKPiAgICAgICAgICAg
ICAgICAgcmV0dXJuIHJldDsKCkxvb2tzIGxpa2UgY2xlYXJfcGFnZXMoKSBpcyBjYWxsZWQgdW5j
b25kaXRpb25hbGx5IGluIHZtYV9yZW1vdmUoKSBpZgp3ZSBlcnJvciBvdXQgaGVyZSwgZXZlbiB0
aG91Z2ggdGhhdCBpcyBub3cgc2V0IGFzIHBhcnQgb2YgdGhlIHdvcmtlcj8KCj4KPiAtICAgICAg
IHZtYS0+ZmxhZ3MgfD0gYmluZF9mbGFnczsKPiArICAgICAgIHZtYS0+ZmxhZ3MgfD0gYmluZF9m
bGFncyAmIH5JOTE1X1ZNQV9BTExPQ19CSU5EOwo+ICAgICAgICAgcmV0dXJuIDA7Cj4gIH0KPgo+
IEBAIC01NjksNyArNjgwLDcgQEAgaTkxNV92bWFfaW5zZXJ0KHN0cnVjdCBpOTE1X3ZtYSAqdm1h
LCB1NjQgc2l6ZSwgdTY0IGFsaWdubWVudCwgdTY0IGZsYWdzKQo+ICAgICAgICAgfQo+Cj4gICAg
ICAgICBpZiAodm1hLT5vYmopIHsKPiAtICAgICAgICAgICAgICAgcmV0ID0gaTkxNV9nZW1fb2Jq
ZWN0X3Bpbl9wYWdlcyh2bWEtPm9iaik7Cj4gKyAgICAgICAgICAgICAgIHJldCA9IGk5MTVfZ2Vt
X29iamVjdF9waW5fcGFnZXNfYXN5bmModm1hLT5vYmopOwo+ICAgICAgICAgICAgICAgICBpZiAo
cmV0KQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4KPiBAQCAtNTc4LDI1
ICs2ODksMTkgQEAgaTkxNV92bWFfaW5zZXJ0KHN0cnVjdCBpOTE1X3ZtYSAqdm1hLCB1NjQgc2l6
ZSwgdTY0IGFsaWdubWVudCwgdTY0IGZsYWdzKQo+ICAgICAgICAgICAgICAgICBjYWNoZV9sZXZl
bCA9IDA7Cj4gICAgICAgICB9Cj4KPiAtICAgICAgIEdFTV9CVUdfT04odm1hLT5wYWdlcyk7Cj4g
LQo+IC0gICAgICAgcmV0ID0gdm1hLT5vcHMtPnNldF9wYWdlcyh2bWEpOwo+IC0gICAgICAgaWYg
KHJldCkKPiAtICAgICAgICAgICAgICAgZ290byBlcnJfdW5waW47Cj4gLQoKSSBndWVzcyBvbmUg
Y2FzdWFsdHkgaGVyZSBpcyB0aGUgIW9mZnNldF9maXhlZCBwYXRoIGZvcgpodWdlLWd0dC1wYWdl
cywgc2luY2Ugd2UgbmVlZCB0byBpbnNwZWN0IHRoZSB2bWEtPnBhZ2Vfc2l6ZXMgYmVsb3cuClRo
b3VnaCBwcm9iYWJseSBub3QgdGhlIGVuZCBvZiB0aGUgd29ybGQgaWYgdGhhdCdzIHRoZSBjYXNl
LgoKPiAgICAgICAgIGlmIChmbGFncyAmIFBJTl9PRkZTRVRfRklYRUQpIHsKPiAgICAgICAgICAg
ICAgICAgdTY0IG9mZnNldCA9IGZsYWdzICYgUElOX09GRlNFVF9NQVNLOwo+ICAgICAgICAgICAg
ICAgICBpZiAoIUlTX0FMSUdORUQob2Zmc2V0LCBhbGlnbm1lbnQpIHx8Cj4gICAgICAgICAgICAg
ICAgICAgICByYW5nZV9vdmVyZmxvd3Mob2Zmc2V0LCBzaXplLCBlbmQpKSB7Cj4gICAgICAgICAg
ICAgICAgICAgICAgICAgcmV0ID0gLUVJTlZBTDsKPiAtICAgICAgICAgICAgICAgICAgICAgICBn
b3RvIGVycl9jbGVhcjsKPiArICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVycl91bnBpbjsK
PiAgICAgICAgICAgICAgICAgfQo+Cj4gICAgICAgICAgICAgICAgIHJldCA9IGk5MTVfZ2VtX2d0
dF9yZXNlcnZlKHZtYS0+dm0sICZ2bWEtPm5vZGUsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNpemUsIG9mZnNldCwgY2FjaGVfbGV2ZWwsCj4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzKTsKPiAgICAgICAgICAgICAg
ICAgaWYgKHJldCkKPiAtICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVycl9jbGVhcjsKPiAr
ICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVycl91bnBpbjsKPiAgICAgICAgIH0gZWxzZSB7
Cj4gICAgICAgICAgICAgICAgIC8qCj4gICAgICAgICAgICAgICAgICAqIFdlIG9ubHkgc3VwcG9y
dCBodWdlIGd0dCBwYWdlcyB0aHJvdWdoIHRoZSA0OGIgUFBHVFQsCj4gQEAgLTYzNSw3ICs3NDAs
NyBAQCBpOTE1X3ZtYV9pbnNlcnQoc3RydWN0IGk5MTVfdm1hICp2bWEsIHU2NCBzaXplLCB1NjQg
YWxpZ25tZW50LCB1NjQgZmxhZ3MpCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc2l6ZSwgYWxpZ25tZW50LCBjYWNoZV9sZXZlbCwKPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydCwgZW5kLCBmbGFncyk7Cj4gICAgICAgICAg
ICAgICAgIGlmIChyZXQpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgZ290byBlcnJfY2xlYXI7
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgZ290byBlcnJfdW5waW47Cj4KPiAgICAgICAgICAg
ICAgICAgR0VNX0JVR19PTih2bWEtPm5vZGUuc3RhcnQgPCBzdGFydCk7Cj4gICAgICAgICAgICAg
ICAgIEdFTV9CVUdfT04odm1hLT5ub2RlLnN0YXJ0ICsgdm1hLT5ub2RlLnNpemUgPiBlbmQpOwo+
IEBAIC02NTQsOCArNzU5LDYgQEAgaTkxNV92bWFfaW5zZXJ0KHN0cnVjdCBpOTE1X3ZtYSAqdm1h
LCB1NjQgc2l6ZSwgdTY0IGFsaWdubWVudCwgdTY0IGZsYWdzKQo+Cj4gICAgICAgICByZXR1cm4g
MDsKPgo+IC1lcnJfY2xlYXI6Cj4gLSAgICAgICB2bWEtPm9wcy0+Y2xlYXJfcGFnZXModm1hKTsK
PiAgZXJyX3VucGluOgo+ICAgICAgICAgaWYgKHZtYS0+b2JqKQo+ICAgICAgICAgICAgICAgICBp
OTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXModm1hLT5vYmopOwo+IEBAIC03OTAsNyArODkzLDcg
QEAgc3RhdGljIHZvaWQgX19pOTE1X3ZtYV9kZXN0cm95KHN0cnVjdCBpOTE1X3ZtYSAqdm1hKQo+
Cj4gICAgICAgICAgICAgICAgIHNwaW5fbG9jaygmb2JqLT52bWEubG9jayk7Cj4gICAgICAgICAg
ICAgICAgIGxpc3RfZGVsKCZ2bWEtPm9ial9saW5rKTsKPiAtICAgICAgICAgICAgICAgcmJfZXJh
c2UoJnZtYS0+b2JqX25vZGUsICZ2bWEtPm9iai0+dm1hLnRyZWUpOwo+ICsgICAgICAgICAgICAg
ICByYl9lcmFzZSgmdm1hLT5vYmpfbm9kZSwgJm9iai0+dm1hLnRyZWUpOwo+ICAgICAgICAgICAg
ICAgICBzcGluX3VubG9jaygmb2JqLT52bWEubG9jayk7Cj4gICAgICAgICB9Cj4KPiBAQCAtOTMw
LDYgKzEwMzMsMTEgQEAgaW50IGk5MTVfdm1hX3VuYmluZChzdHJ1Y3QgaTkxNV92bWEgKnZtYSkK
Pgo+ICAgICAgICAgbG9ja2RlcF9hc3NlcnRfaGVsZCgmdm1hLT52bS0+aTkxNS0+ZHJtLnN0cnVj
dF9tdXRleCk7Cj4KPiArICAgICAgIGlmICh2bWEtPmFzeW5jLmRtYSAmJgo+ICsgICAgICAgICAg
IGRtYV9mZW5jZV93YWl0X3RpbWVvdXQodm1hLT5hc3luYy5kbWEsIHRydWUsCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBNQVhfU0NIRURVTEVfVElNRU9VVCkgPCAwKQo+ICsg
ICAgICAgICAgICAgICByZXR1cm4gLUVJTlRSOwo+ICsKPiAgICAgICAgIHJldCA9IGk5MTVfYWN0
aXZlX3dhaXQoJnZtYS0+YWN0aXZlKTsKPiAgICAgICAgIGlmIChyZXQpCj4gICAgICAgICAgICAg
ICAgIHJldHVybiByZXQ7Cj4gQEAgLTk3NSw2ICsxMDgzLDggQEAgaW50IGk5MTVfdm1hX3VuYmlu
ZChzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKPiAgICAgICAgIH0KPiAgICAgICAgIHZtYS0+ZmxhZ3Mg
Jj0gfihJOTE1X1ZNQV9HTE9CQUxfQklORCB8IEk5MTVfVk1BX0xPQ0FMX0JJTkQpOwo+Cj4gKyAg
ICAgICBkbWFfZmVuY2VfcHV0KGZldGNoX2FuZF96ZXJvKCZ2bWEtPmFzeW5jLmRtYSkpOwo+ICsK
PiAgICAgICAgIGk5MTVfdm1hX3JlbW92ZSh2bWEpOwo+Cj4gICAgICAgICByZXR1cm4gMDsKPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfdm1hLmgKPiBpbmRleCA3MTA4OGZmNGFkNTkuLjY3ZTQzZjVkMDFmNiAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5oCj4gKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuaAo+IEBAIC0xMDMsNiArMTAzLDcgQEAgc3RydWN0
IGk5MTVfdm1hIHsKPiAgI2RlZmluZSBJOTE1X1ZNQV9HTE9CQUxfQklORCAgIEJJVCg5KQo+ICAj
ZGVmaW5lIEk5MTVfVk1BX0xPQ0FMX0JJTkQgICAgQklUKDEwKQo+ICAjZGVmaW5lIEk5MTVfVk1B
X0JJTkRfTUFTSyAoSTkxNV9WTUFfR0xPQkFMX0JJTkQgfCBJOTE1X1ZNQV9MT0NBTF9CSU5EIHwg
STkxNV9WTUFfUElOX09WRVJGTE9XKQo+ICsjZGVmaW5lIEk5MTVfVk1BX0FMTE9DX0JJTkQgICAg
STkxNV9WTUFfUElOX09WRVJGTE9XIC8qIG5vdCBzdG9yZWQgKi8KPgo+ICAjZGVmaW5lIEk5MTVf
Vk1BX0dHVFQgICAgICAgICAgQklUKDExKQo+ICAjZGVmaW5lIEk5MTVfVk1BX0NBTl9GRU5DRSAg
ICAgQklUKDEyKQo+IEBAIC0xNDMsNiArMTQ0LDE0IEBAIHN0cnVjdCBpOTE1X3ZtYSB7Cj4gICAg
ICAgICB1bnNpZ25lZCBpbnQgKmV4ZWNfZmxhZ3M7Cj4gICAgICAgICBzdHJ1Y3QgaGxpc3Rfbm9k
ZSBleGVjX25vZGU7Cj4gICAgICAgICB1MzIgZXhlY19oYW5kbGU7Cj4gKwo+ICsgICAgICAgc3Ry
dWN0IGk5MTVfdm1hX2FzeW5jX2JpbmQgewo+ICsgICAgICAgICAgICAgICBzdHJ1Y3QgZG1hX2Zl
bmNlICpkbWE7Cj4gKyAgICAgICAgICAgICAgIHN0cnVjdCBkbWFfZmVuY2VfY2IgY2I7Cj4gKyAg
ICAgICAgICAgICAgIHN0cnVjdCB3b3JrX3N0cnVjdCB3b3JrOwo+ICsgICAgICAgICAgICAgICB1
bnNpZ25lZCBpbnQgY2FjaGVfbGV2ZWw7Cj4gKyAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBm
bGFnczsKPiArICAgICAgIH0gYXN5bmM7Cj4gIH07Cj4KPiAgc3RydWN0IGk5MTVfdm1hICoKPiBA
QCAtMzA1LDYgKzMxNCwxMSBAQCBzdGF0aWMgaW5saW5lIHZvaWQgaTkxNV92bWFfbG9jayhzdHJ1
Y3QgaTkxNV92bWEgKnZtYSkKPiAgICAgICAgIHJlc2VydmF0aW9uX29iamVjdF9sb2NrKHZtYS0+
cmVzdiwgTlVMTCk7Cj4gIH0KPgo+ICtzdGF0aWMgaW5saW5lIGJvb2wgaTkxNV92bWFfdHJ5bG9j
ayhzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKPiArewo+ICsgICAgICAgcmV0dXJuIHJlc2VydmF0aW9u
X29iamVjdF90cnlsb2NrKHZtYS0+cmVzdik7Cj4gK30KPiArCj4gIHN0YXRpYyBpbmxpbmUgdm9p
ZCBpOTE1X3ZtYV91bmxvY2soc3RydWN0IGk5MTVfdm1hICp2bWEpCj4gIHsKPiAgICAgICAgIHJl
c2VydmF0aW9uX29iamVjdF91bmxvY2sodm1hLT5yZXN2KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9zZWxmdGVzdHMvaTkxNV92bWEuYwo+IGluZGV4IGExNjZkOTQwNWE5NC4uNjE1YWM0ODVjNzMx
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMKPiBAQCAt
MjA0LDggKzIwNCwxMCBAQCBzdGF0aWMgaW50IGlndF92bWFfY3JlYXRlKHZvaWQgKmFyZykKPiAg
ICAgICAgICAgICAgICAgbW9ja19jb250ZXh0X2Nsb3NlKGN0eCk7Cj4gICAgICAgICB9Cj4KPiAt
ICAgICAgIGxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShvYmosIG9uLCAmb2JqZWN0cywgc3RfbGlu
aykKPiArICAgICAgIGxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShvYmosIG9uLCAmb2JqZWN0cywg
c3RfbGluaykgewo+ICsgICAgICAgICAgICAgICBpOTE1X2dlbV9vYmplY3Rfd2FpdChvYmosIEk5
MTVfV0FJVF9BTEwsIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsKPiAgICAgICAgICAgICAgICAgaTkx
NV9nZW1fb2JqZWN0X3B1dChvYmopOwo+ICsgICAgICAgfQo+ICAgICAgICAgcmV0dXJuIGVycjsK
PiAgfQo+Cj4gLS0KPiAyLjIwLjEKPgo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCj4gSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdAo+IEludGVsLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9p
bnRlbC1nZng=

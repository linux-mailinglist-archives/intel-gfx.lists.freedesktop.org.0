Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 01DFE9A15B
	for <lists+intel-gfx@lfdr.de>; Thu, 22 Aug 2019 22:44:27 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D5EDF6EAE0;
	Thu, 22 Aug 2019 20:44:24 +0000 (UTC)
X-Original-To: Intel-GFX@lists.freedesktop.org
Delivered-To: Intel-GFX@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D44946EAE0
 for <Intel-GFX@lists.freedesktop.org>; Thu, 22 Aug 2019 20:44:22 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 Aug 2019 13:44:22 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,418,1559545200"; d="scan'208";a="203546903"
Received: from dceraolo-linux.fm.intel.com (HELO [10.1.27.145]) ([10.1.27.145])
 by fmsmga004.fm.intel.com with ESMTP; 22 Aug 2019 13:44:21 -0700
To: John.C.Harrison@Intel.com, Intel-GFX@Lists.FreeDesktop.Org
References: <20190822180205.21071-1-John.C.Harrison@Intel.com>
 <20190822180205.21071-3-John.C.Harrison@Intel.com>
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Message-ID: <935c54e2-d430-9f96-4057-ed917b0a09b4@intel.com>
Date: Thu, 22 Aug 2019 13:44:25 -0700
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190822180205.21071-3-John.C.Harrison@Intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 2/2] drm/i915: Engine relative MMIO for Gen12
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

CgpPbiA4LzIyLzE5IDExOjAyIEFNLCBKb2huLkMuSGFycmlzb25ASW50ZWwuY29tIHdyb3RlOgo+
IEZyb206IEpvaG4gSGFycmlzb24gPEpvaG4uQy5IYXJyaXNvbkBJbnRlbC5jb20+Cj4gCj4gR2Vu
MTIgaW50cm9kdWNlcyBhIGNvbXBsZXRlbHkgbmV3IGFuZCBkaWZmZXJlbnQgc2NoZW1lIGZvcgo+
IGltcGxlbWVudGluZyBlbmdpbmUgcmVsYXRpdmUgTU1JTyBhY2Nlc3NlcyAtIE1JX0xSSV9NTUlP
X1JFTUFQLiBUaGlzCj4gcmVxdWlyZXMgdXNpbmcgdGhlIGJhc2UgYWRkcmVzcyBvZiBpbnN0YW5j
ZSB6ZXJvIG9mIHRoZSByZWxldmFudAo+IGVuZ2luZSBjbGFzcy4gQW5kIHRoZW4sIGl0IGlzIG9u
bHkgdmFsaWQgaWYgdGhlIHJlZ2lzdGVyIGluCj4gcXVlc3Rpb24gZmFsbHMgd2l0aGluIGEgY2Vy
dGFpbiByYW5nZSBhcyBzcGVjaWZpZWQgYnkgYSB0YWJsZS4KPiAKCkJzcGVjOiA0NTYwNgoKPiBT
aWduZWQtb2ZmLWJ5OiBKb2huIEhhcnJpc29uIDxKb2huLkMuSGFycmlzb25ASW50ZWwuY29tPgo+
IENDOiBEYW5pZWxlIENlcmFvbG8gU3B1cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwu
Y29tPgo+IC0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMg
ICAgfCAxODUgKysrKysrKysrKysrKysrKysrLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfZW5naW5lX3R5cGVzLmggfCAgIDcgKwo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfZ3B1X2NvbW1hbmRzLmggfCAgIDkgKy0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcGVyZi5jICAgICAgICAgICAgIHwgICAzICstCj4gICA0IGZpbGVzIGNoYW5nZWQsIDE5NSBp
bnNlcnRpb25zKCspLCA5IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZV9jcy5jCj4gaW5kZXggZWZlMWMzNzdkNzk3Li5hNjVlOGNjZDlkOGQgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwo+IEBAIC0yMzYs
NiArMjM2LDEyNyBAQCBzdGF0aWMgdTMyIF9fZW5naW5lX21taW9fYmFzZShzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqaTkxNSwKPiAgIAlyZXR1cm4gYmFzZXNbaV0uYmFzZTsKPiAgIH0KPiAgIAo+
ICtzdGF0aWMgdm9pZCBscmlfaW5pdF9yZW1hcF9iYXNlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSkKPiArewo+ICsJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqcmVtYXBfZW5naW5lOwo+
ICsKPiArCWVuZ2luZS0+bHJpX21taW9fYmFzZSA9IDA7Cj4gKwo+ICsJaWYgKElOVEVMX0dFTihl
bmdpbmUtPmk5MTUpIDwgMTIpCj4gKwkJcmV0dXJuOwo+ICsKPiArCXJlbWFwX2VuZ2luZSA9IGVu
Z2luZS0+aTkxNS0+Z3QuZW5naW5lX2NsYXNzW2VuZ2luZS0+Y2xhc3NdWzBdOwoKeW91IGNhbiBq
dXN0IHVzZSBlbmdpbmUtPmd0LiBCdXQgYW55d2F5IGluc3RhbmNlIDAgaXMgbm90IGd1YXJhbnRl
ZWQgdG8gCmV4aXN0IGFzIGl0IG1pZ2h0J3ZlIGJlZW4gZnVzZWQgb2ZmLiBpZiB3ZSBhZGQgYSBz
dGF0aWMgdGFibGUgb2YgZmlyc3QgCmluc3RhbmNlIHBlciBjbGFzcyB3ZSBjYW4gdGhlbiBmZXRj
aCBpdCBkaXJlY3RseSBmcm9tIHRoZSBpbmZvIHRhYmxlLiBlLmcuCgoJc3RhdGljIGNvbnN0IGVu
dW0gZmlyc3RfaW5zdGFuY2VbXSA9IHsKCQlbUkVOREVSX0NMQVNTXSA9IFJDUzAsCgkJLi4uCgl9
Cgl1MzIgaWQ7CgoJR0VNX0JVR19PTihlbmdpbmUtPmNsYXNzID4gQVJSQVlfU0laRShmaXJzdF9p
bnN0YW5jZSkpOwoKCWlkID0gZmlyc3RfaW5zdGFuY2VbZW5naW5lLT5jbGFzc107CgoJZW5naW5l
LT5scmlfbW1pb19iYXNlID0KCQlfX2VuZ2luZV9tbWlvX2Jhc2UoaTkxNSwgaW50ZWxfZW5naW5l
c1tpZF0ubW1pb19iYXNlcyk7CgoKPiArCUdFTV9CVUdfT04oIXJlbWFwX2VuZ2luZSk7Cj4gKwo+
ICsJZW5naW5lLT5scmlfbW1pb19iYXNlID0gcmVtYXBfZW5naW5lLT5tbWlvX2Jhc2U7ID4gK30K
PiArCj4gK3N0YXRpYyB2b2lkIGxyaV9hZGRfcmFuZ2Uoc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lLCB1MzIgbWluLCB1MzIgbWF4KQoKSSB0aGluayBpdCdkIGJlIGNsZWFuZXIgYXQgdGhl
IGNhbGwgcG9pbnQgaWYgd2UgZ28gd2l0aCBiYXNlIGFuZCBzaXplIAppbnN0ZWFkIG9mIG1pbiBh
bmQgbWF4LgoKPiArewo+ICsJR0VNX0JVR19PTihlbmdpbmUtPmxyaV9udW1fcmFuZ2VzID49IElO
VEVMX01BWF9MUklfUkFOR0VTKTsKPiArCj4gKwllbmdpbmUtPmxyaV9yYW5nZXNbZW5naW5lLT5s
cmlfbnVtX3Jhbmdlc10ubWluID0gbWluOwo+ICsJZW5naW5lLT5scmlfcmFuZ2VzW2VuZ2luZS0+
bHJpX251bV9yYW5nZXNdLm1heCA9IG1heDsKPiArCWVuZ2luZS0+bHJpX251bV9yYW5nZXMrKzsK
PiArfQo+ICsKPiArc3RhdGljIHZvaWQgbHJpX2luaXRfcmVtYXBfcmFuZ2VzKHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSkKPiArewo+ICsJYm9vbCBoYXNfYXV4X3RhYmxlcyA9IHRydWU7
CS8qIFJlbW92ZWQgYWZ0ZXIgVEdMPyAqLwoKVGhpcyBzaG91bGQgcmVhbGx5IGJlIGEgZGV2aWNl
IGZsYWcuIEJ1dCBkbyB3ZSBhY3R1YWxseSBuZWVkIHRvIHdyaXRlIAphbnkgb2YgdGhlIHJlZ2lz
dGVycyBpbiB0aGUgYXV4IHRhYmxlcyBmcm9tIHRoZSBrZXJuZWw/IGlmIG5vdCwgbWF5YmUgd2Ug
CmNhbiBnZXQgYXdheSBub3Qgc2V0dGluZyB0aGVzZSBpbiB0aGUgcmFuZ2VzLCBhZGRpbmcgYSBu
aWNlIGNvbW1lbnQgCmFib3V0IGl0IGluIGNhc2Ugd2UgZ2V0IGZhaWx1cmVzIGxhdGVyIG9uLiBU
aGF0IHdheSB3ZSdsbCBhbHNvIGJlIGFibGUgCnRvIGtlZXAgbHJpX251bV9yYW5nZXMgZml4ZWQg
YXQgMiBhbmQganVzdCB1c2UgYSBkZWZpbmUgZm9yIGl0ICh3ZSBjYW4gCnVzZSBhIHZhcmlhYmxl
IGxvY2FsIHRvIHRoaXMgZnVuY3Rpb24gZm9yIGxyaV9hZGRfcmFuZ2UpCgo+ICsJdTMyIG9mZnNl
dDsKPiArCj4gKwllbmdpbmUtPmxyaV9udW1fcmFuZ2VzID0gMDsKPiArCj4gKwlpZiAoSU5URUxf
R0VOKGVuZ2luZS0+aTkxNSkgPCAxMikKPiArCQlyZXR1cm47Cj4gKwo+ICsJc3dpdGNoIChlbmdp
bmUtPmNsYXNzKSB7Cj4gKwljYXNlIFJFTkRFUl9DTEFTUzoKPiArCQkvKiBIYXJkd2FyZSBGcm9u
dCBFbmQgKi8KPiArCQlscmlfYWRkX3JhbmdlKGVuZ2luZSwgMHgwMDAgKyBlbmdpbmUtPm1taW9f
YmFzZSwKPiArCQkJICAgICAgMHg3RkYgKyBlbmdpbmUtPm1taW9fYmFzZSk7Cj4gKwo+ICsJCS8q
IFRSVFQgKi8KPiArCQlscmlfYWRkX3JhbmdlKGVuZ2luZSwgMHg0NDAwLCAweDQ0MUYpOwo+ICsK
PiArCQkvKiBBdXggVGFibGVzIC0gUkVNT1ZFREJZKEdFTjpIQVM6MTQwNjkyOTY3MikgKi8KPiAr
CQlpZiAoaGFzX2F1eF90YWJsZXMpCj4gKwkJCWxyaV9hZGRfcmFuZ2UoZW5naW5lLCAweDQyMDAs
IDB4NDIwRik7Cj4gKwkJYnJlYWs7CgptYXRjaGVzCgo+ICsKPiArCWNhc2UgVklERU9fREVDT0RF
X0NMQVNTOgo+ICsJCWxyaV9hZGRfcmFuZ2UoZW5naW5lLCAweDAwMDAgKyBlbmdpbmUtPm1taW9f
YmFzZSwKPiArCQkJICAgICAgMHgzRkZGICsgZW5naW5lLT5tbWlvX2Jhc2UpOwo+ICsKPiArCQkv
KiBUUlRUICovCj4gKwkJb2Zmc2V0ID0gKChlbmdpbmUtPmluc3RhbmNlICYgMHgxKSAqIDB4MjAp
ICsKPiArCQkJICgoZW5naW5lLT5pbnN0YW5jZSA+PiAxKSAqIDB4MTAwKTsKPiArCQlscmlfYWRk
X3JhbmdlKGVuZ2luZSwgMHg0NDIwICsgb2Zmc2V0LCAweDQ0M0YgKyBvZmZzZXQpOwoKTWF0Y2hl
cy4gQSBiaXQgY29udm9sdXRlZCwgYnV0IEkgY2FuJ3Qgc3VnZ2VzdCBhIGJldHRlciBvcHRpb24u
IE1heWJlIGEgCmNvbW1lbnQ/CgoKPiArCj4gKwkJLyogQXV4IFRhYmxlcyAtIFJFTU9WRURCWShH
RU46SEFTOjE0MDY5Mjk2NzIpICovCj4gKwkJaWYgKGhhc19hdXhfdGFibGVzKSB7Cj4gKwkJCXN3
aXRjaCAoZW5naW5lLT5pbnN0YW5jZSkgewo+ICsJCQljYXNlIDA6Cj4gKwkJCQlscmlfYWRkX3Jh
bmdlKGVuZ2luZSwgMHg0MjEwLCAweDQyMUYpOwo+ICsJCQkJYnJlYWs7Cj4gKwo+ICsJCQljYXNl
IDE6Cj4gKwkJCQlscmlfYWRkX3JhbmdlKGVuZ2luZSwgMHg0MjIwLCAweDQyMkYpOwo+ICsJCQkJ
YnJlYWs7Cj4gKwo+ICsJCQljYXNlIDI6Cj4gKwkJCQlscmlfYWRkX3JhbmdlKGVuZ2luZSwgMHg0
MjkwLCAweDQyOUYpOwo+ICsJCQkJYnJlYWs7Cj4gKwo+ICsJCQljYXNlIDM6Cj4gKwkJCQlscmlf
YWRkX3JhbmdlKGVuZ2luZSwgMHg0MkEwLCAweDQyQUYpOwo+ICsJCQkJYnJlYWs7Cj4gKwo+ICsJ
CQlkZWZhdWx0Ogo+ICsJCQkJYnJlYWs7Cj4gKwkJCX0KPiArCQl9Cj4gKwkJYnJlYWs7Cj4gKwo+
ICsJY2FzZSBWSURFT19FTkhBTkNFTUVOVF9DTEFTUzoKPiArCQlscmlfYWRkX3JhbmdlKGVuZ2lu
ZSwgMHgwMDAwICsgZW5naW5lLT5tbWlvX2Jhc2UsCj4gKwkJCSAgICAgIDB4M0ZGRiArIGVuZ2lu
ZS0+bW1pb19iYXNlKTsKPiArCj4gKwkJLyogVFJUVCAqLwo+ICsJCW9mZnNldCA9IGVuZ2luZS0+
aW5zdGFuY2UgKiAweDEwMDsKPiArCQlscmlfYWRkX3JhbmdlKGVuZ2luZSwgMHg0NDYwICsgb2Zm
c2V0LCAweDQ0N0YgKyBvZmZzZXQpOwoKbWF0Y2hlcwoKPiArCj4gKwkJLyogQXV4IFRhYmxlcyAt
IFJFTU9WRURCWShHRU46SEFTOjE0MDY5Mjk2NzIpICovCj4gKwkJaWYgKGhhc19hdXhfdGFibGVz
KSB7Cj4gKwkJCXN3aXRjaCAoZW5naW5lLT5pbnN0YW5jZSkgewo+ICsJCQljYXNlIDA6Cj4gKwkJ
CQlscmlfYWRkX3JhbmdlKGVuZ2luZSwgMHg0MjMwLCAweDQyM0YpOwo+ICsJCQkJYnJlYWs7Cj4g
Kwo+ICsJCQljYXNlIDE6Cj4gKwkJCQlscmlfYWRkX3JhbmdlKGVuZ2luZSwgMHg0MkIwLCAweDQy
QkYpOwo+ICsJCQkJYnJlYWs7Cj4gKwo+ICsJCQljYXNlIDI6Cj4gKwkJCQlscmlfYWRkX3Jhbmdl
KGVuZ2luZSwgMHg0MjkwLCAweDQyOUYpOwo+ICsJCQkJYnJlYWs7Cj4gKwo+ICsJCQljYXNlIDM6
Cj4gKwkJCQkvLyBTYW1lIGFkZHJlc3MgYXMgaW5zdGFuY2UgMT8/Pwo+ICsJCQkJbHJpX2FkZF9y
YW5nZShlbmdpbmUsIDB4NDJCMCwgMHg0MkJGKTsKPiArCQkJCWJyZWFrOwo+ICsKCldlIGRvIG5v
dCBoYXZlIHRoaXMgbWFueSBWRUNTIGVuZ2luZXMgZGVmaW5lZC4KCkFsc28sIGNhbiB3ZSBkbyB0
aGUgY2hlY2sgb24gdGhlIHVwZGF0ZWQgb2Zmc2V0PyB0aGF0IHdheSB3ZSBvbmx5IG5lZWQgCnRv
IHJlY29yZCBhbmQgdmFsaWRhdGUgdGhlIG9mZnNldHMgZnJvbSBpbnN0YW5jZSAwLgoKPiArCQkJ
ZGVmYXVsdDoKPiArCQkJCWJyZWFrOwo+ICsJCQl9Cj4gKwkJfQo+ICsJCWJyZWFrOwo+ICsKPiAr
CWRlZmF1bHQ6Cj4gKwkJYnJlYWs7Cj4gKwl9Cj4gK30KPiArCj4gICBzdGF0aWMgdTMyIGk5MTVf
Z2V0X2xyaV9jbWRfbGVnYWN5KGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwK
PiAgIAkJCQkgICB1MzIgd29yZF9jb3VudCkKPiAgIHsKPiBAQCAtMjQ5LDYgKzM3MCwyNyBAQCBz
dGF0aWMgdTMyIGk5MTVfZ2V0X2xyaV9jbWRfYWRkX29mZnNldChjb25zdCBzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmUsCj4gICAJICAgICAgIE1JX0xSSV9BRERfQ1NfTU1JT19TVEFSVF9H
RU4xMTsKPiAgIH0KPiAgIAo+ICtzdGF0aWMgdTMyIGk5MTVfZ2V0X2xyaV9jbWRfcmVtYXAoY29u
c3Qgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAo+ICsJCQkJICB1MzIgd29yZF9jb3Vu
dCkKPiArewo+ICsJdTMyIHdvcmQ7Cj4gKwo+ICsJd29yZCA9IF9fTUlfTE9BRF9SRUdJU1RFUl9J
TU0od29yZF9jb3VudCk7Cj4gKwo+ICsJLyogaWYgKGxyaV9pc19yZWdfaW5fcmVtYXBfdGFibGUo
ZW5naW5lLCByZWcpKSA/Pz8gKi8KPiArCQl3b3JkIHw9IE1JX0xSSV9NTUlPX1JFTUFQX0dFTjEy
Owo+ICsKPiArCS8qCj4gKwkgKiBOQjogVG8gZ2F0ZSB0aGlzIG9uIHRoZSByZWcgYWRkcmVzcyB3
aWxsIHJlcXVpcmUga25vd2luZwo+ICsJICogYWxsIHJlZyBhZGRyZXNzZXMgaW4gYWR2YW5jZS4g
VGhpcyBpcyBub3QgY3VycmVudGx5IHRoZQo+ICsJICogY2FzZSBhcyBzb21lIExSSSBjb21tYW5k
cyBhcmUgYnVpbHQgZnJvbSBtdWx0aXBsZSBzb3VyY2VzLgo+ICsJICogQWxzbywgd2hhdCBpZiBz
b21lIHJlZ3MgcmVxdWlyZSByZW1hcCBhbmQgc29tZSBkbyBub3Q/Cj4gKwkgKiBUaGUgTFJJIGNv
bW1hbmQgd291bGQgbmVlZCB0byBiZSBzcGxpdCBpbnRvIG11bHRpcGxlIHBpZWNlcy4KPiArCSAq
LwoKQWxsIHRoZSByZWdpc3RlciBpbiB0aGUgZW5naW5lIHJhbmdlcyAoaS5lLiB0aGUgb25lcyBy
ZXBlYXRlZCBmb3IgYWxsIAplbmdpbmVzKSBhcmUgY292ZXJlZCwgc28gd2Ugc2hvdWxkIGV4cGVj
dCB0aGF0IGFsbCByZWdpc3RlcnMgcmVxdWlyZSAKcmVtYXAuIElmIHdlIHdhbnQgdG8gd3JpdGUg
YSByZWdpc3RlciB0aGF0IGl0J3MgaW4gdGhlIGdsb2JhbCByYW5nZSB0aGVuIAp3ZSBzaG91bGQg
dXNlIF9fTUlfTE9BRF9SRUdJU1RFUl9JTU0gZGlyZWN0bHkuIFRoZXJlZm9yZSwgSSB3b3VsZCBq
dXN0IGRvOgoKcmV0dXJuIF9fTUlfTE9BRF9SRUdJU1RFUl9JTU0od29yZF9jb3VudCkgfCBNSV9M
UklfTU1JT19SRU1BUF9HRU4xMjsKCj4gKwo+ICsJcmV0dXJuIHdvcmQ7Cj4gK30KPiArCj4gICBz
dGF0aWMgYm9vbCBpOTE1X2VuZ2luZV9oYXNfcmVsYXRpdmVfbHJpKGNvbnN0IHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAgIHsKPiAgIAlpZiAoSU5URUxfR0VOKGVuZ2luZS0+aTkx
NSkgPCAxMSkKPiBAQCAtMjYyLDE4ICs0MDQsNTMgQEAgc3RhdGljIGJvb2wgaTkxNV9lbmdpbmVf
aGFzX3JlbGF0aXZlX2xyaShjb25zdCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCj4g
ICAKPiAgIHN0YXRpYyB2b2lkIGxyaV9pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZSkKPiAgIHsKPiAtCWlmIChpOTE1X2VuZ2luZV9oYXNfcmVsYXRpdmVfbHJpKGVuZ2luZSkpCj4g
LQkJZW5naW5lLT5nZXRfbHJpX2NtZCA9IGk5MTVfZ2V0X2xyaV9jbWRfYWRkX29mZnNldDsKPiAt
CWVsc2UKPiArCWlmIChpOTE1X2VuZ2luZV9oYXNfcmVsYXRpdmVfbHJpKGVuZ2luZSkpIHsKPiAr
CQlpZiAoSU5URUxfR0VOKGVuZ2luZS0+aTkxNSkgPCAxMikKPiArCQkJZW5naW5lLT5nZXRfbHJp
X2NtZCA9IGk5MTVfZ2V0X2xyaV9jbWRfYWRkX29mZnNldDsKPiArCQllbHNlIHsKPiArCQkJZW5n
aW5lLT5nZXRfbHJpX2NtZCA9IGk5MTVfZ2V0X2xyaV9jbWRfcmVtYXA7Cgp0aGUgb25seSBkaWZm
ZXJlbmNlIGluIHRoZSBjbWQgYmV0d2VlbiB0aGUgdmFyaW91cyBtb2RlcyBpcyB0aGUgZmxhZyB3
ZSAKc2V0LCBjYW4ndCB3ZSBqdXN0IHNhdmUgdGhhdCBpbnN0ZWFkIG9mIGhhdmluZyBhIGZ1bGwt
Ymxvd24gdmlydHVhbCAKZnVuY3Rpb24/Cgo+ICsKPiArCQkJbHJpX2luaXRfcmVtYXBfYmFzZShl
bmdpbmUpOwo+ICsJCQlscmlfaW5pdF9yZW1hcF9yYW5nZXMoZW5naW5lKTsKPiArCQl9Cj4gKwl9
IGVsc2UKPiAgIAkJZW5naW5lLT5nZXRfbHJpX2NtZCA9IGk5MTVfZ2V0X2xyaV9jbWRfbGVnYWN5
Owo+ICAgfQo+ICAgCj4gK3N0YXRpYyBib29sIGxyaV9pc19yZWdfaW5fcmVtYXBfdGFibGUoY29u
c3Qgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAo+ICsJCQkJICAgICAgaTkxNV9yZWdf
dCByZWcpCj4gK3sKPiArCWludCBpOwo+ICsJdTMyIG9mZnNldCA9IGk5MTVfbW1pb19yZWdfb2Zm
c2V0KHJlZyk7Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IGVuZ2luZS0+bHJpX251bV9yYW5nZXM7
IGkrKykgewo+ICsJCWlmIChvZmZzZXQgPCBlbmdpbmUtPmxyaV9yYW5nZXNbaV0ubWluKQo+ICsJ
CQljb250aW51ZTsKPiArCj4gKwkJaWYgKG9mZnNldCA+IGVuZ2luZS0+bHJpX3Jhbmdlc1tpXS5t
YXgpCj4gKwkJCWNvbnRpbnVlOwo+ICsKPiArCQlyZXR1cm4gdHJ1ZTsKPiArCX0KPiArCj4gKwly
ZXR1cm4gZmFsc2U7Cj4gK30KPiArCj4gICB1MzIgaTkxNV9nZXRfbHJpX3JlZyhjb25zdCBzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIGk5MTVfcmVnX3QgcmVnKQo+ICAgewo+ICAgCWlm
ICghaTkxNV9lbmdpbmVfaGFzX3JlbGF0aXZlX2xyaShlbmdpbmUpKQo+ICAgCQlyZXR1cm4gaTkx
NV9tbWlvX3JlZ19vZmZzZXQocmVnKTsKPiAgIAo+IC0JcmV0dXJuIGk5MTVfbW1pb19yZWdfb2Zm
c2V0KHJlZykgLSBlbmdpbmUtPm1taW9fYmFzZTsKPiArCWlmIChJTlRFTF9HRU4oZW5naW5lLT5p
OTE1KSA8IDEyKQo+ICsJCXJldHVybiBpOTE1X21taW9fcmVnX29mZnNldChyZWcpIC0gZW5naW5l
LT5tbWlvX2Jhc2U7Cj4gKwo+ICsJaWYgKCFXQVJOX09OKGxyaV9pc19yZWdfaW5fcmVtYXBfdGFi
bGUoZW5naW5lLCByZWcpKSkgewo+ICsJCS8qIElzIHRoaXMgbWVhbnQgdG8gaGFwcGVuPyAqLwoK
Tm8sIHNvIGp1c3QgZ28gd2l0aDoKCkdFTV9ERUJVR19CVUdfT04oIWxyaV9pc19yZWdfaW5fcmVt
YXBfdGFibGUoZW5naW5lLCByZWcpKTsKCmFuZCBtYWtlIGFsbCB0aGUgcmVtYXAgdGFibGUgY29k
ZSBjb25kaXRpb25hbGx5IGNvbXBpbGVkIGJhc2VkIG9uIApDT05GSUdfRFJNX0k5MTVfREVCVUdf
R0VNLgoKPiArCQlyZXR1cm4gaTkxNV9tbWlvX3JlZ19vZmZzZXQocmVnKTsKPiArCX0KPiArCj4g
KwlyZXR1cm4gaTkxNV9tbWlvX3JlZ19vZmZzZXQocmVnKSAtIGVuZ2luZS0+bW1pb19iYXNlICsK
PiArCSAgICAgICBlbmdpbmUtPmxyaV9tbWlvX2Jhc2U7CgpUaGlzIGRvZXNuJ3Qgd29yay4gVGhl
IHJlYXNvbiB3aHkgd2UgaGF2ZSB0aGUgbmV3IG1lY2hhbmlzbSBpcyB0aGF0IHRoZSAKcmVnaXN0
ZXIgZm9yIGRpZmZlcmVudCBpbnN0YW5jZXMgYXJlIG5vIGF0IHRoZSBzYW1lIGRlbHRhIGZyb20g
dGhlIE1NSU8gCmJhc2UuIEUuZy4gdGhlIFRSVFQgcmVnaXN0ZXJzIHlvdSBoYXZlIGFib3ZlLgoK
PiAgIH0KCmlmIHdlIHNldCBlbmdpbmUtPmxyaV9tbWlvX2Jhc2UgYXBwcm9wcmlhdGVseSBvbiBh
bGwgcGxhdGZvcm1zLCBjYW4ndCB3ZSAKaW5zdGVhZCBqdXN0IHVzZSB0aGF0IGluc3RlYWQgb2Yg
ZW5naW5lLT5tbWlvX2Jhc2Ugd2hlbiBlbWl0dGluZyB0aGUgCnJlZ2lzdGVycyB3aXRoIHRoZSBy
ZWxhdGl2ZSBMUkk/IHRvIGtlZXAgdGhlIGNoZWNrIHdlIGNhbiBkbyBzb21ldGhpbmcgbGlrZToK
CiNkZWZpbmUgbHJpX3JlZyhlbmdpbmVfXywgcmVnX18pIFwKKHsgXAoJR0VNX0RFQlVHX0JVR19P
TihJTlRFTF9HRU4oZW5naW5lLT5pOTE1KSA+PSAxMiAmJiBcCgkJCSAhbHJpX2lzX3JlZ19pbl9y
ZW1hcF90YWJsZShlbmdpbmVfXywgcmVnX18pKTsgXAoJcmVnX187IFwKfSkKCkRhbmllbGUKCj4g
ICAKPiAgIHN0YXRpYyB2b2lkIF9fc3ByaW50X2VuZ2luZV9uYW1lKHN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZSkKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lX3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVf
dHlwZXMuaAo+IGluZGV4IDdjYTZjODZhMzNmNi4uMWUyNmY2NjhlNzNiIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCj4gKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKPiBAQCAtMzA2LDYgKzMw
NiwxMyBAQCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzIHsKPiAgIAl1MzIgY29udGV4dF9zaXplOwo+
ICAgCXUzMiBtbWlvX2Jhc2U7Cj4gICAKPiArI2RlZmluZSBJTlRFTF9NQVhfTFJJX1JBTkdFUwkz
Cj4gKwlzdHJ1Y3QgbHJpX3JhbmdlIHsKPiArCQl1MzIgbWluLCBtYXg7Cj4gKwl9IGxyaV9yYW5n
ZXNbSU5URUxfTUFYX0xSSV9SQU5HRVNdOwo+ICsJdTMyIGxyaV9udW1fcmFuZ2VzOwo+ICsJdTMy
IGxyaV9tbWlvX2Jhc2U7Cj4gKwo+ICAgCXUzMiAoKmdldF9scmlfY21kKShjb25zdCBzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUsCj4gICAJCQkgICB1MzIgd29yZF9jb3VudCk7Cj4gICAK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3B1X2NvbW1hbmRz
LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ncHVfY29tbWFuZHMuaAo+IGluZGV4
IGVhYTAxOWRmMGNlNy4uMGVlNjJhNjFkN2I1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZ3B1X2NvbW1hbmRzLmgKPiBAQCAtMTMwLDE0ICsxMzAsMTUgQEAKPiAgICAq
ICAgc2ltcGx5IGlnbm9yZXMgdGhlIHJlZ2lzdGVyIGxvYWQgdW5kZXIgY2VydGFpbiBjb25kaXRp
b25zLgo+ICAgICogLSBPbmUgY2FuIGFjdHVhbGx5IGxvYWQgYXJiaXRyYXJ5IG1hbnkgYXJiaXRy
YXJ5IHJlZ2lzdGVyczogU2ltcGx5IGlzc3VlIHgKPiAgICAqICAgYWRkcmVzcy92YWx1ZSBwYWly
cy4gRG9uJ3Qgb3ZlcmR1ZSBpdCwgdGhvdWdoLCB4IDw9IDJeNCBtdXN0IGhvbGQhCj4gLSAqIC0g
TmV3ZXIgaGFyZHdhcmUgc3VwcG9ydHMgZW5naW5lIHJlbGF0aXZlIGFkZHJlc3NpbmcgYnV0IG9s
ZGVyIGhhcmR3YXJlIGRvZXMKPiAtICogICBub3QuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIGh3IGVu
Z2luZSBsb2FkIGJhbGFuY2luZy4gSGVuY2UgdGhlIE1JX0xSSQo+IC0gKiAgIGluc3RydWN0aW9u
IGl0c2VsZiBpcyBwcmVmaXhlZCB3aXRoICdfXycgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgb24K
PiAtICogICBsZWdhY3kgaGFyZHdhcmUgY29kZSBwYXRocy4gR2VuZXJpYyBjb2RlIG11c3QgYWx3
YXlzIHVzZSB0aGUgTUlfTFJJCj4gKyAqIC0gTmV3ZXIgaGFyZHdhcmUgc3VwcG9ydHMgZW5naW5l
IHJlbGF0aXZlIGFkZHJlc3NpbmcgYnV0IHVzaW5nIG11bHRpcGxlCj4gKyAqICAgaW5jb21wYXRp
YmxlIHNjaGVtZXMuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIGh3IGVuZ2luZSBsb2FkIGJhbGFuY2lu
Zy4gSGVuY2UKPiArICogICB0aGUgTUlfTFJJIGluc3RydWN0aW9uIGl0c2VsZiBpcyBwcmVmaXhl
ZCB3aXRoICdfXycgYW5kIHNob3VsZCBvbmx5IGJlCj4gKyAqICAgdXNlZCBvbiBsZWdhY3kgaGFy
ZHdhcmUgY29kZSBwYXRocy4gR2VuZXJpYyBjb2RlIG11c3QgYWx3YXlzIHVzZSB0aGUgTUlfTFJJ
Cj4gICAgKiAgIGFuZCBpOTE1X2dldF9scmlfcmVnKCkgaGVscGVyIGZ1bmN0aW9ucyBpbnN0ZWFk
Lgo+ICAgICovCj4gICAjZGVmaW5lIF9fTUlfTE9BRF9SRUdJU1RFUl9JTU0oeCkJTUlfSU5TVFIo
MHgyMiwgMiooeCktMSkKPiAgICNkZWZpbmUgICBNSV9MUklfRk9SQ0VfUE9TVEVECQkoMTw8MTIp
Cj4gKyNkZWZpbmUgICBNSV9MUklfTU1JT19SRU1BUF9HRU4xMgkJKDE8PDE3KQo+ICAgI2RlZmlu
ZSAgIE1JX0xSSV9BRERfQ1NfTU1JT19TVEFSVF9HRU4xMQkoMTw8MTkpCj4gICAjZGVmaW5lIE1J
X1NUT1JFX1JFR0lTVEVSX01FTSAgICAgICAgTUlfSU5TVFIoMHgyNCwgMSkKPiAgICNkZWZpbmUg
TUlfU1RPUkVfUkVHSVNURVJfTUVNX0dFTjggICBNSV9JTlNUUigweDI0LCAyKQo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcGVyZi5jCj4gaW5kZXggODNhYmRkYTA1YmEyLi5mODg2NDIyMDkyODMgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwo+IEBAIC0xNjk0LDcgKzE2OTQsOCBAQCBnZW44X3Vw
ZGF0ZV9yZWdfc3RhdGVfdW5sb2NrZWQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwK
PiAgIAo+ICAgCS8qCj4gICAJICogTkI6IFRoZSBMUkkgaW5zdHJ1Y3Rpb24gaXMgZ2VuZXJhdGVk
IGJ5IHRoZSBoYXJkd2FyZS4KPiAtCSAqIFNob3VsZCB3ZSByZWFkIGl0IGluIGFuZCBhc3NlcnQg
dGhhdCB0aGUgb2Zmc2V0IGZsYWcgaXMgc2V0Pwo+ICsJICogU2hvdWxkIHdlIHJlYWQgaXQgaW4g
YW5kIGFzc2VydCB0aGF0IHRoZSBhcHByb3ByaWF0ZQo+ICsJICogb2Zmc2V0IGZsYWcgaXMgc2V0
Pwo+ICAgCSAqLwo+ICAgCj4gICAJQ1RYX1JFRyhjZS0+ZW5naW5lLCByZWdfc3RhdGUsIGN0eF9v
YWN0eGN0cmwsIEdFTjhfT0FDVFhDT05UUk9MLAo+IApfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9pbnRlbC1nZng=

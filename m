Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BC29AF91B1
	for <lists+intel-gfx@lfdr.de>; Tue, 12 Nov 2019 15:15:18 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F16DD6E999;
	Tue, 12 Nov 2019 14:15:16 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 593F16E999
 for <intel-gfx@lists.freedesktop.org>; Tue, 12 Nov 2019 14:15:15 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 12 Nov 2019 06:15:09 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,296,1569308400"; d="scan'208";a="214090469"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by fmsmga001.fm.intel.com with SMTP; 12 Nov 2019 06:15:07 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Tue, 12 Nov 2019 16:15:06 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 12 Nov 2019 16:14:54 +0200
Message-Id: <20191112141503.1116-2-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191112141503.1116-1-ville.syrjala@linux.intel.com>
References: <20191112141503.1116-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 01/10] drm/i915: Change intel_encoders_<hook>()
 calling convention
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkp1
c3QgcGFzcyB0aGUgYXRvbWljIHN0YXRlIGFuZCB0aGUgY3J0YyB0byBpbnRlbF9lbmNvZGVyc19l
bmFibGUoKSAmIGNvLgpNYWtlIGxpZmUgc2ltcGxlciB3aGVuIHlvdSBkb24ndCBoYXZlIHRvIHRo
aW5rIHdoaWNoIHN0YXRlIChvbGQgdnMuIG5ldykKeW91IGhhdmUgdG8gcGFzcyBpbi4gQWxzbyBj
b25zdGlmeSB0aGUgc3RhdGVzIHdoaWxlIGF0IGl0LgoKU2lnbmVkLW9mZi1ieTogVmlsbGUgU3ly
asOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyB8IDEwMSArKysrKysrKysrLS0tLS0tLS0t
CiAxIGZpbGUgY2hhbmdlZCwgNTQgaW5zZXJ0aW9ucygrKSwgNDcgZGVsZXRpb25zKC0pCgpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwppbmRleCA1ZjMzNDA1
NTQxNDkuLmRhMDFmYTY5MjhhMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kaXNwbGF5LmMKQEAgLTYyOTksMTEgKzYyOTksMTIgQEAgc3RhdGljIHZvaWQgaW50ZWxf
ZW5jb2RlcnNfdXBkYXRlX2NvbXBsZXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRl
KQogCX0KIH0KIAotc3RhdGljIHZvaWQgaW50ZWxfZW5jb2RlcnNfcHJlX3BsbF9lbmFibGUoc3Ry
dWN0IGludGVsX2NydGMgKmNydGMsCi0JCQkJCSAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNy
dGNfc3RhdGUsCi0JCQkJCSAgc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCitzdGF0
aWMgdm9pZCBpbnRlbF9lbmNvZGVyc19wcmVfcGxsX2VuYWJsZShzdHJ1Y3QgaW50ZWxfYXRvbWlj
X3N0YXRlICpzdGF0ZSwKKwkJCQkJICBzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YykKIHsKLQlzdHJ1
Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZTsKKwljb25zdCBzdHJ1Y3QgaW50ZWxf
Y3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSA9CisJCWludGVsX2F0b21pY19nZXRfbmV3X2NydGNfc3Rh
dGUoc3RhdGUsIGNydGMpOworCWNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25u
X3N0YXRlOwogCXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uOwogCWludCBpOwogCkBAIC02MzE5
LDExICs2MzIwLDEyIEBAIHN0YXRpYyB2b2lkIGludGVsX2VuY29kZXJzX3ByZV9wbGxfZW5hYmxl
KHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAogCX0KIH0KIAotc3RhdGljIHZvaWQgaW50ZWxfZW5j
b2RlcnNfcHJlX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKLQkJCQkgICAgICBzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKLQkJCQkgICAgICBzdHJ1Y3QgaW50ZWxf
YXRvbWljX3N0YXRlICpzdGF0ZSkKK3N0YXRpYyB2b2lkIGludGVsX2VuY29kZXJzX3ByZV9lbmFi
bGUoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsCisJCQkJICAgICAgc3RydWN0IGlu
dGVsX2NydGMgKmNydGMpCiB7Ci0Jc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3Rh
dGU7CisJY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUgPQorCQlpbnRl
bF9hdG9taWNfZ2V0X25ld19jcnRjX3N0YXRlKHN0YXRlLCBjcnRjKTsKKwljb25zdCBzdHJ1Y3Qg
ZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZTsKIAlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAq
Y29ubjsKIAlpbnQgaTsKIApAQCAtNjMzOSwxMSArNjM0MSwxMiBAQCBzdGF0aWMgdm9pZCBpbnRl
bF9lbmNvZGVyc19wcmVfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAogCX0KIH0KIAot
c3RhdGljIHZvaWQgaW50ZWxfZW5jb2RlcnNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRj
LAotCQkJCSAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCi0JCQkJICBzdHJ1
Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKK3N0YXRpYyB2b2lkIGludGVsX2VuY29kZXJz
X2VuYWJsZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKKwkJCQkgIHN0cnVjdCBp
bnRlbF9jcnRjICpjcnRjKQogewotCXN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0
YXRlOworCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlID0KKwkJaW50
ZWxfYXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShzdGF0ZSwgY3J0Yyk7CisJY29uc3Qgc3RydWN0
IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGU7CiAJc3RydWN0IGRybV9jb25uZWN0b3Ig
KmNvbm47CiAJaW50IGk7CiAKQEAgLTYzNjAsMTEgKzYzNjMsMTIgQEAgc3RhdGljIHZvaWQgaW50
ZWxfZW5jb2RlcnNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAogCX0KIH0KIAotc3Rh
dGljIHZvaWQgaW50ZWxfZW5jb2RlcnNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywK
LQkJCQkgICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUsCi0JCQkJICAg
c3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCitzdGF0aWMgdm9pZCBpbnRlbF9lbmNv
ZGVyc19kaXNhYmxlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAorCQkJCSAgIHN0
cnVjdCBpbnRlbF9jcnRjICpjcnRjKQogewotCXN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpv
bGRfY29ubl9zdGF0ZTsKKwljb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNf
c3RhdGUgPQorCQlpbnRlbF9hdG9taWNfZ2V0X29sZF9jcnRjX3N0YXRlKHN0YXRlLCBjcnRjKTsK
Kwljb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqb2xkX2Nvbm5fc3RhdGU7CiAJc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm47CiAJaW50IGk7CiAKQEAgLTYzODEsMTEgKzYzODUsMTIg
QEAgc3RhdGljIHZvaWQgaW50ZWxfZW5jb2RlcnNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0YyAq
Y3J0YywKIAl9CiB9CiAKLXN0YXRpYyB2b2lkIGludGVsX2VuY29kZXJzX3Bvc3RfZGlzYWJsZShz
dHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKLQkJCQkJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9s
ZF9jcnRjX3N0YXRlLAotCQkJCQlzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKK3N0
YXRpYyB2b2lkIGludGVsX2VuY29kZXJzX3Bvc3RfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfYXRvbWlj
X3N0YXRlICpzdGF0ZSwKKwkJCQkJc3RydWN0IGludGVsX2NydGMgKmNydGMpCiB7Ci0Jc3RydWN0
IGRybV9jb25uZWN0b3Jfc3RhdGUgKm9sZF9jb25uX3N0YXRlOworCWNvbnN0IHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSA9CisJCWludGVsX2F0b21pY19nZXRfb2xkX2Ny
dGNfc3RhdGUoc3RhdGUsIGNydGMpOworCWNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRl
ICpvbGRfY29ubl9zdGF0ZTsKIAlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubjsKIAlpbnQgaTsK
IApAQCAtNjQwMSwxMSArNjQwNiwxMiBAQCBzdGF0aWMgdm9pZCBpbnRlbF9lbmNvZGVyc19wb3N0
X2Rpc2FibGUoc3RydWN0IGludGVsX2NydGMgKmNydGMsCiAJfQogfQogCi1zdGF0aWMgdm9pZCBp
bnRlbF9lbmNvZGVyc19wb3N0X3BsbF9kaXNhYmxlKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAot
CQkJCQkgICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9jcnRjX3N0YXRlLAotCQkJCQkg
ICAgc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCitzdGF0aWMgdm9pZCBpbnRlbF9l
bmNvZGVyc19wb3N0X3BsbF9kaXNhYmxlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRl
LAorCQkJCQkgICAgc3RydWN0IGludGVsX2NydGMgKmNydGMpCiB7Ci0Jc3RydWN0IGRybV9jb25u
ZWN0b3Jfc3RhdGUgKm9sZF9jb25uX3N0YXRlOworCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpvbGRfY3J0Y19zdGF0ZSA9CisJCWludGVsX2F0b21pY19nZXRfb2xkX2NydGNfc3RhdGUo
c3RhdGUsIGNydGMpOworCWNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpvbGRfY29u
bl9zdGF0ZTsKIAlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubjsKIAlpbnQgaTsKIApAQCAtNjQy
MSwxMSArNjQyNywxMiBAQCBzdGF0aWMgdm9pZCBpbnRlbF9lbmNvZGVyc19wb3N0X3BsbF9kaXNh
YmxlKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAogCX0KIH0KIAotc3RhdGljIHZvaWQgaW50ZWxf
ZW5jb2RlcnNfdXBkYXRlX3BpcGUoc3RydWN0IGludGVsX2NydGMgKmNydGMsCi0JCQkJICAgICAg
IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAotCQkJCSAgICAgICBzdHJ1Y3Qg
aW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKK3N0YXRpYyB2b2lkIGludGVsX2VuY29kZXJzX3Vw
ZGF0ZV9waXBlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAorCQkJCSAgICAgICBz
dHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YykKIHsKLQlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAq
Y29ubl9zdGF0ZTsKKwljb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSA9
CisJCWludGVsX2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUoc3RhdGUsIGNydGMpOworCWNvbnN0
IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRlOwogCXN0cnVjdCBkcm1fY29u
bmVjdG9yICpjb25uOwogCWludCBpOwogCkBAIC02NDkyLDcgKzY0OTksNyBAQCBzdGF0aWMgdm9p
ZCBpcm9ubGFrZV9jcnRjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25m
aWcsCiAKIAlpbnRlbF9jcnRjLT5hY3RpdmUgPSB0cnVlOwogCi0JaW50ZWxfZW5jb2RlcnNfcHJl
X2VuYWJsZShpbnRlbF9jcnRjLCBwaXBlX2NvbmZpZywgc3RhdGUpOworCWludGVsX2VuY29kZXJz
X3ByZV9lbmFibGUoc3RhdGUsIGludGVsX2NydGMpOwogCiAJaWYgKHBpcGVfY29uZmlnLT5oYXNf
cGNoX2VuY29kZXIpIHsKIAkJLyogTm90ZTogRkRJIFBMTCBlbmFibGluZyBfbXVzdF8gYmUgZG9u
ZSBiZWZvcmUgd2UgZW5hYmxlIHRoZQpAQCAtNjUyNSw3ICs2NTMyLDcgQEAgc3RhdGljIHZvaWQg
aXJvbmxha2VfY3J0Y19lbmFibGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmln
LAogCWFzc2VydF92YmxhbmtfZGlzYWJsZWQoY3J0Yyk7CiAJaW50ZWxfY3J0Y192Ymxhbmtfb24o
cGlwZV9jb25maWcpOwogCi0JaW50ZWxfZW5jb2RlcnNfZW5hYmxlKGludGVsX2NydGMsIHBpcGVf
Y29uZmlnLCBzdGF0ZSk7CisJaW50ZWxfZW5jb2RlcnNfZW5hYmxlKHN0YXRlLCBpbnRlbF9jcnRj
KTsKIAogCWlmIChIQVNfUENIX0NQVChkZXZfcHJpdikpCiAJCWNwdF92ZXJpZnlfbW9kZXNldChk
ZXYsIGludGVsX2NydGMtPnBpcGUpOwpAQCAtNjU5NiwxMiArNjYwMywxMiBAQCBzdGF0aWMgdm9p
ZCBoYXN3ZWxsX2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZp
ZywKIAlpZiAoV0FSTl9PTihpbnRlbF9jcnRjLT5hY3RpdmUpKQogCQlyZXR1cm47CiAKLQlpbnRl
bF9lbmNvZGVyc19wcmVfcGxsX2VuYWJsZShpbnRlbF9jcnRjLCBwaXBlX2NvbmZpZywgc3RhdGUp
OworCWludGVsX2VuY29kZXJzX3ByZV9wbGxfZW5hYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKIAog
CWlmIChwaXBlX2NvbmZpZy0+c2hhcmVkX2RwbGwpCiAJCWludGVsX2VuYWJsZV9zaGFyZWRfZHBs
bChwaXBlX2NvbmZpZyk7CiAKLQlpbnRlbF9lbmNvZGVyc19wcmVfZW5hYmxlKGludGVsX2NydGMs
IHBpcGVfY29uZmlnLCBzdGF0ZSk7CisJaW50ZWxfZW5jb2RlcnNfcHJlX2VuYWJsZShzdGF0ZSwg
aW50ZWxfY3J0Yyk7CiAKIAlpZiAoaW50ZWxfY3J0Y19oYXNfZHBfZW5jb2RlcihwaXBlX2NvbmZp
ZykpCiAJCWludGVsX2RwX3NldF9tX24ocGlwZV9jb25maWcsIE0xX04xKTsKQEAgLTY2NzksNyAr
NjY4Niw3IEBAIHN0YXRpYyB2b2lkIGhhc3dlbGxfY3J0Y19lbmFibGUoc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCWFzc2VydF92YmxhbmtfZGlzYWJsZWQoY3J0Yyk7CiAJ
aW50ZWxfY3J0Y192Ymxhbmtfb24ocGlwZV9jb25maWcpOwogCi0JaW50ZWxfZW5jb2RlcnNfZW5h
YmxlKGludGVsX2NydGMsIHBpcGVfY29uZmlnLCBzdGF0ZSk7CisJaW50ZWxfZW5jb2RlcnNfZW5h
YmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKIAogCWlmIChwc2xfY2xrZ2F0ZV93YSkgewogCQlpbnRl
bF93YWl0X2Zvcl92YmxhbmsoZGV2X3ByaXYsIHBpcGUpOwpAQCAtNjcyNyw3ICs2NzM0LDcgQEAg
c3RhdGljIHZvaWQgaXJvbmxha2VfY3J0Y19kaXNhYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpvbGRfY3J0Y19zdGF0ZSwKIAlpbnRlbF9zZXRfY3B1X2ZpZm9fdW5kZXJydW5fcmVwb3J0aW5n
KGRldl9wcml2LCBwaXBlLCBmYWxzZSk7CiAJaW50ZWxfc2V0X3BjaF9maWZvX3VuZGVycnVuX3Jl
cG9ydGluZyhkZXZfcHJpdiwgcGlwZSwgZmFsc2UpOwogCi0JaW50ZWxfZW5jb2RlcnNfZGlzYWJs
ZShpbnRlbF9jcnRjLCBvbGRfY3J0Y19zdGF0ZSwgc3RhdGUpOworCWludGVsX2VuY29kZXJzX2Rp
c2FibGUoc3RhdGUsIGludGVsX2NydGMpOwogCiAJZHJtX2NydGNfdmJsYW5rX29mZihjcnRjKTsK
IAlhc3NlcnRfdmJsYW5rX2Rpc2FibGVkKGNydGMpOwpAQCAtNjczOSw3ICs2NzQ2LDcgQEAgc3Rh
dGljIHZvaWQgaXJvbmxha2VfY3J0Y19kaXNhYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpv
bGRfY3J0Y19zdGF0ZSwKIAlpZiAob2xkX2NydGNfc3RhdGUtPmhhc19wY2hfZW5jb2RlcikKIAkJ
aXJvbmxha2VfZmRpX2Rpc2FibGUoY3J0Yyk7CiAKLQlpbnRlbF9lbmNvZGVyc19wb3N0X2Rpc2Fi
bGUoaW50ZWxfY3J0Yywgb2xkX2NydGNfc3RhdGUsIHN0YXRlKTsKKwlpbnRlbF9lbmNvZGVyc19w
b3N0X2Rpc2FibGUoc3RhdGUsIGludGVsX2NydGMpOwogCiAJaWYgKG9sZF9jcnRjX3N0YXRlLT5o
YXNfcGNoX2VuY29kZXIpIHsKIAkJaXJvbmxha2VfZGlzYWJsZV9wY2hfdHJhbnNjb2RlcihkZXZf
cHJpdiwgcGlwZSk7CkBAIC02Nzc3LDcgKzY3ODQsNyBAQCBzdGF0aWMgdm9pZCBoYXN3ZWxsX2Ny
dGNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUsCiAJc3Ry
dWN0IGludGVsX2NydGMgKmludGVsX2NydGMgPSB0b19pbnRlbF9jcnRjKGNydGMpOwogCWVudW0g
dHJhbnNjb2RlciBjcHVfdHJhbnNjb2RlciA9IG9sZF9jcnRjX3N0YXRlLT5jcHVfdHJhbnNjb2Rl
cjsKIAotCWludGVsX2VuY29kZXJzX2Rpc2FibGUoaW50ZWxfY3J0Yywgb2xkX2NydGNfc3RhdGUs
IHN0YXRlKTsKKwlpbnRlbF9lbmNvZGVyc19kaXNhYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKIAog
CWRybV9jcnRjX3ZibGFua19vZmYoY3J0Yyk7CiAJYXNzZXJ0X3ZibGFua19kaXNhYmxlZChjcnRj
KTsKQEAgLTY4MDIsOSArNjgwOSw5IEBAIHN0YXRpYyB2b2lkIGhhc3dlbGxfY3J0Y19kaXNhYmxl
KHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwKIAllbHNlCiAJCWlyb25s
YWtlX3BmaXRfZGlzYWJsZShvbGRfY3J0Y19zdGF0ZSk7CiAKLQlpbnRlbF9lbmNvZGVyc19wb3N0
X2Rpc2FibGUoaW50ZWxfY3J0Yywgb2xkX2NydGNfc3RhdGUsIHN0YXRlKTsKKwlpbnRlbF9lbmNv
ZGVyc19wb3N0X2Rpc2FibGUoc3RhdGUsIGludGVsX2NydGMpOwogCi0JaW50ZWxfZW5jb2RlcnNf
cG9zdF9wbGxfZGlzYWJsZShpbnRlbF9jcnRjLCBvbGRfY3J0Y19zdGF0ZSwgc3RhdGUpOworCWlu
dGVsX2VuY29kZXJzX3Bvc3RfcGxsX2Rpc2FibGUoc3RhdGUsIGludGVsX2NydGMpOwogfQogCiBz
dGF0aWMgdm9pZCBpOXh4X3BmaXRfZW5hYmxlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpjcnRjX3N0YXRlKQpAQCAtNzAzNSw3ICs3MDQyLDcgQEAgc3RhdGljIHZvaWQgdmFsbGV5dmll
d19jcnRjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcsCiAKIAlp
bnRlbF9zZXRfY3B1X2ZpZm9fdW5kZXJydW5fcmVwb3J0aW5nKGRldl9wcml2LCBwaXBlLCB0cnVl
KTsKIAotCWludGVsX2VuY29kZXJzX3ByZV9wbGxfZW5hYmxlKGludGVsX2NydGMsIHBpcGVfY29u
ZmlnLCBzdGF0ZSk7CisJaW50ZWxfZW5jb2RlcnNfcHJlX3BsbF9lbmFibGUoc3RhdGUsIGludGVs
X2NydGMpOwogCiAJaWYgKElTX0NIRVJSWVZJRVcoZGV2X3ByaXYpKSB7CiAJCWNodl9wcmVwYXJl
X3BsbChpbnRlbF9jcnRjLCBwaXBlX2NvbmZpZyk7CkBAIC03MDQ1LDcgKzcwNTIsNyBAQCBzdGF0
aWMgdm9pZCB2YWxsZXl2aWV3X2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpw
aXBlX2NvbmZpZywKIAkJdmx2X2VuYWJsZV9wbGwoaW50ZWxfY3J0YywgcGlwZV9jb25maWcpOwog
CX0KIAotCWludGVsX2VuY29kZXJzX3ByZV9lbmFibGUoaW50ZWxfY3J0YywgcGlwZV9jb25maWcs
IHN0YXRlKTsKKwlpbnRlbF9lbmNvZGVyc19wcmVfZW5hYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsK
IAogCWk5eHhfcGZpdF9lbmFibGUocGlwZV9jb25maWcpOwogCkBAIC03MDYwLDcgKzcwNjcsNyBA
QCBzdGF0aWMgdm9pZCB2YWxsZXl2aWV3X2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpwaXBlX2NvbmZpZywKIAlhc3NlcnRfdmJsYW5rX2Rpc2FibGVkKGNydGMpOwogCWludGVs
X2NydGNfdmJsYW5rX29uKHBpcGVfY29uZmlnKTsKIAotCWludGVsX2VuY29kZXJzX2VuYWJsZShp
bnRlbF9jcnRjLCBwaXBlX2NvbmZpZywgc3RhdGUpOworCWludGVsX2VuY29kZXJzX2VuYWJsZShz
dGF0ZSwgaW50ZWxfY3J0Yyk7CiB9CiAKIHN0YXRpYyB2b2lkIGk5eHhfc2V0X3BsbF9kaXZpZGVy
cyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKQEAgLTcwOTksNyAr
NzEwNiw3IEBAIHN0YXRpYyB2b2lkIGk5eHhfY3J0Y19lbmFibGUoc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKnBpcGVfY29uZmlnLAogCWlmICghSVNfR0VOKGRldl9wcml2LCAyKSkKIAkJaW50ZWxf
c2V0X2NwdV9maWZvX3VuZGVycnVuX3JlcG9ydGluZyhkZXZfcHJpdiwgcGlwZSwgdHJ1ZSk7CiAK
LQlpbnRlbF9lbmNvZGVyc19wcmVfZW5hYmxlKGludGVsX2NydGMsIHBpcGVfY29uZmlnLCBzdGF0
ZSk7CisJaW50ZWxfZW5jb2RlcnNfcHJlX2VuYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7CiAKIAlp
OXh4X2VuYWJsZV9wbGwoaW50ZWxfY3J0YywgcGlwZV9jb25maWcpOwogCkBAIC03MTIwLDcgKzcx
MjcsNyBAQCBzdGF0aWMgdm9pZCBpOXh4X2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpwaXBlX2NvbmZpZywKIAlhc3NlcnRfdmJsYW5rX2Rpc2FibGVkKGNydGMpOwogCWludGVs
X2NydGNfdmJsYW5rX29uKHBpcGVfY29uZmlnKTsKIAotCWludGVsX2VuY29kZXJzX2VuYWJsZShp
bnRlbF9jcnRjLCBwaXBlX2NvbmZpZywgc3RhdGUpOworCWludGVsX2VuY29kZXJzX2VuYWJsZShz
dGF0ZSwgaW50ZWxfY3J0Yyk7CiB9CiAKIHN0YXRpYyB2b2lkIGk5eHhfcGZpdF9kaXNhYmxlKGNv
bnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSkKQEAgLTcxNTQsNyAr
NzE2MSw3IEBAIHN0YXRpYyB2b2lkIGk5eHhfY3J0Y19kaXNhYmxlKHN0cnVjdCBpbnRlbF9jcnRj
X3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwKIAlpZiAoSVNfR0VOKGRldl9wcml2LCAyKSkKIAkJaW50
ZWxfd2FpdF9mb3JfdmJsYW5rKGRldl9wcml2LCBwaXBlKTsKIAotCWludGVsX2VuY29kZXJzX2Rp
c2FibGUoaW50ZWxfY3J0Yywgb2xkX2NydGNfc3RhdGUsIHN0YXRlKTsKKwlpbnRlbF9lbmNvZGVy
c19kaXNhYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKIAogCWRybV9jcnRjX3ZibGFua19vZmYoY3J0
Yyk7CiAJYXNzZXJ0X3ZibGFua19kaXNhYmxlZChjcnRjKTsKQEAgLTcxNjMsNyArNzE3MCw3IEBA
IHN0YXRpYyB2b2lkIGk5eHhfY3J0Y19kaXNhYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpv
bGRfY3J0Y19zdGF0ZSwKIAogCWk5eHhfcGZpdF9kaXNhYmxlKG9sZF9jcnRjX3N0YXRlKTsKIAot
CWludGVsX2VuY29kZXJzX3Bvc3RfZGlzYWJsZShpbnRlbF9jcnRjLCBvbGRfY3J0Y19zdGF0ZSwg
c3RhdGUpOworCWludGVsX2VuY29kZXJzX3Bvc3RfZGlzYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7
CiAKIAlpZiAoIWludGVsX2NydGNfaGFzX3R5cGUob2xkX2NydGNfc3RhdGUsIElOVEVMX09VVFBV
VF9EU0kpKSB7CiAJCWlmIChJU19DSEVSUllWSUVXKGRldl9wcml2KSkKQEAgLTcxNzQsNyArNzE4
MSw3IEBAIHN0YXRpYyB2b2lkIGk5eHhfY3J0Y19kaXNhYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpvbGRfY3J0Y19zdGF0ZSwKIAkJCWk5eHhfZGlzYWJsZV9wbGwob2xkX2NydGNfc3RhdGUp
OwogCX0KIAotCWludGVsX2VuY29kZXJzX3Bvc3RfcGxsX2Rpc2FibGUoaW50ZWxfY3J0Yywgb2xk
X2NydGNfc3RhdGUsIHN0YXRlKTsKKwlpbnRlbF9lbmNvZGVyc19wb3N0X3BsbF9kaXNhYmxlKHN0
YXRlLCBpbnRlbF9jcnRjKTsKIAogCWlmICghSVNfR0VOKGRldl9wcml2LCAyKSkKIAkJaW50ZWxf
c2V0X2NwdV9maWZvX3VuZGVycnVuX3JlcG9ydGluZyhkZXZfcHJpdiwgcGlwZSwgZmFsc2UpOwpA
QCAtMTQzNDAsNyArMTQzNDcsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF91cGRhdGVfY3J0YyhzdHJ1
Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAkJaW50ZWxfcHJlX3BsYW5lX3VwZGF0ZShvbGRfY3J0Y19z
dGF0ZSwgbmV3X2NydGNfc3RhdGUpOwogCiAJCWlmIChuZXdfY3J0Y19zdGF0ZS0+dXBkYXRlX3Bp
cGUpCi0JCQlpbnRlbF9lbmNvZGVyc191cGRhdGVfcGlwZShjcnRjLCBuZXdfY3J0Y19zdGF0ZSwg
c3RhdGUpOworCQkJaW50ZWxfZW5jb2RlcnNfdXBkYXRlX3BpcGUoc3RhdGUsIGNydGMpOwogCX0K
IAogCWlmIChuZXdfY3J0Y19zdGF0ZS0+dXBkYXRlX3BpcGUgJiYgIW5ld19jcnRjX3N0YXRlLT5l
bmFibGVfZmJjKQotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVl
ZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9pbnRlbC1nZng=

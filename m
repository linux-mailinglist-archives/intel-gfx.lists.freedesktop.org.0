Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 863DBF3696
	for <lists+intel-gfx@lfdr.de>; Thu,  7 Nov 2019 19:06:14 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BE8E26F771;
	Thu,  7 Nov 2019 18:06:11 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EA5896F774
 for <intel-gfx@lists.freedesktop.org>; Thu,  7 Nov 2019 18:06:09 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19119455-1500050 
 for <intel-gfx@lists.freedesktop.org>; Thu, 07 Nov 2019 18:06:05 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu,  7 Nov 2019 18:05:59 +0000
Message-Id: <20191107180601.30815-3-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191107180601.30815-1-chris@chris-wilson.co.uk>
References: <20191107180601.30815-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 3/5] drm/i915/selftests: Replace mock_file hackery
 with drm's true fake
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgZHJtIG5vdyBleHBvcnRzIGEgbWV0aG9kIHRvIGNyZWF0ZSBhbiBhbm9ueW1vdXMgc3RydWN0
IGZpbGUgYXJvdW5kIGEKZHJtX2RldmljZSBmb3IgaW50ZXJuYWwgdXNlLCBtYWtlIHVzZSBvZiBp
dCB0byBhdm9pZCBvdXIgaG9ycmlibGUgaGFja3MuCgpEYW5pYWwgc3VnZ2VzdGVkIHRoYXQgdGhl
IG1vY2tfZmlsZV9wdXQoKSB3cmFwcGVyIHdhcyBzdWl0YWJsZSBmb3IKZHJtLWNvcmUsIGFsb25n
IHdpdGggdGhlIG1vY2tfZHJtX2dldGZpbGUoKSBbYW5kIHRoYXQgdGhlIHZlc3RpZ2FsCm1vY2tf
ZHJtX2ZpbGUoKSBpbiB0aGlzIHBhdGNoIHNob3VsZCBwZXJoYXBzIGJlIHRoZSBkcm0gaW50ZXJm
YWNlCml0c2VsZl0uIEhvd2V2ZXIsIHRoZSBldmVudHVhbCBnb2FsIGlzIHRvIHJlbW92ZSB0aGUg
bW9ja19kcm1fZmlsZSgpIGFuZAp1c2UgdGhlIHN0cnVjdCBmaWxlIGFuZCBmcHV0KCkgZGlyZWN0
bHksIGluIHRoaXMgcGF0Y2ggd2UgdGFrZSBhIHNpbXBsZQp0cmFuc2l0aW9uIGluIHRoYXQgZGly
ZWN0aW9uLgoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24u
Y28udWs+ClJldmlld2VkLWJ5OiBNYXR0aGV3IEF1bGQgPG1hdHRoZXcuYXVsZEBpbnRlbC5jb20+
ClJldmlld2VkLWJ5OiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgotLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcuZGVidWcgICAgICAgICAgICB8ICAyICsKIC4u
Li9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMgICB8ICAyICstCiAuLi4v
ZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0LmMgfCAxMiArKy0tLQogLi4u
L2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0LmMgIHwgIDQgKy0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2NvbnRleHQuYyAgICB8ICA0ICstCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2suYyAgfCAgOCArLS0KIC4uLi9ncHUv
ZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rfd29ya2Fyb3VuZHMuYyAgICB8ICAyICstCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW0uYyAgICAgfCAgNCArLQogLi4uL2dwdS9kcm0v
aTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYyAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ndHQuYyB8ICA0ICstCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9zZWxmdGVzdHMvaTkxNV9yZXF1ZXN0LmMgfCAgMiArLQogLi4uL2RybS9pOTE1L3NlbGZ0
ZXN0cy9pbnRlbF9tZW1vcnlfcmVnaW9uLmMgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L3NlbGZ0ZXN0cy9tb2NrX2RybS5jICAgICB8IDQ5ICsrKy0tLS0tLS0tLS0tLS0tLS0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2RybS5oICAgICB8ICA4ICsrLQogMTQgZmls
ZXMgY2hhbmdlZCwgMzkgaW5zZXJ0aW9ucygrKSwgNjYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvS2NvbmZpZy5kZWJ1ZyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L0tjb25maWcuZGVidWcKaW5kZXggZWYxMjNlYjI5MTY4Li4xMTQwNTI1ZGE3NWEgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcuZGVidWcKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvS2NvbmZpZy5kZWJ1ZwpAQCAtMzcsNiArMzcsNyBAQCBjb25maWcgRFJNX0k5
MTVfREVCVUcKIAlzZWxlY3QgWDg2X01TUiAjIHVzZWQgYnkgaWd0L3BtX3JwbQogCXNlbGVjdCBE
Uk1fVkdFTSAjIHVzZWQgYnkgaWd0L3ByaW1lX3ZnZW0gKGRtYWJ1ZiBpbnRlcm9wIGNoZWNrcykK
IAlzZWxlY3QgRFJNX0RFQlVHX01NIGlmIERSTT15CisJc2VsZWN0IERSTV9FWFBPUlRfRk9SX1RF
U1RTIGlmIG0KIAlzZWxlY3QgRFJNX0RFQlVHX1NFTEZURVNUCiAJc2VsZWN0IERNQUJVRl9TRUxG
VEVTVFMKIAlzZWxlY3QgU1dfU1lOQyAjIHNpZ25hbGluZyB2YWxpZGF0aW9uIGZyYW1ld29yayAo
aWd0L3N5bmNvYmoqKQpAQCAtMTYwLDYgKzE2MSw3IEBAIGNvbmZpZyBEUk1fSTkxNV9TRUxGVEVT
VAogCWJvb2wgIkVuYWJsZSBzZWxmdGVzdHMgdXBvbiBkcml2ZXIgbG9hZCIKIAlkZXBlbmRzIG9u
IERSTV9JOTE1CiAJZGVmYXVsdCBuCisJc2VsZWN0IERSTV9FWFBPUlRfRk9SX1RFU1RTIGlmIG0K
IAlzZWxlY3QgRkFVTFRfSU5KRUNUSU9OCiAJc2VsZWN0IFBSSU1FX05VTUJFUlMKIAloZWxwCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaHVnZV9wYWdlcy5jCmluZGV4
IDVjOTU4MzM0OTA3Ny4uMjMxMGVkOWI4Zjg5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYwpAQCAtMTk0NCw2ICsxOTQ0LDYgQEAgaW50IGk5
MTVfZ2VtX2h1Z2VfcGFnZV9saXZlX3NlbGZ0ZXN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSkKIAllcnIgPSBpOTE1X3N1YnRlc3RzKHRlc3RzLCBjdHgpOwogCiBvdXRfZmlsZToKLQlt
b2NrX2ZpbGVfZnJlZShpOTE1LCBmaWxlKTsKKwltb2NrX2ZpbGVfcHV0KGZpbGUpOwogCXJldHVy
biBlcnI7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3Rz
L2k5MTVfZ2VtX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMv
aTkxNV9nZW1fY29udGV4dC5jCmluZGV4IDYyZmFiYzAyM2E4My4uNDc4OTBjOTI1MzRjIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRl
eHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2Nv
bnRleHQuYwpAQCAtMTQ5LDcgKzE0OSw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9ub3Bfc3dpdGNoKHZv
aWQgKmFyZykKIAl9CiAKIG91dF9maWxlOgotCW1vY2tfZmlsZV9mcmVlKGk5MTUsIGZpbGUpOwor
CW1vY2tfZmlsZV9wdXQoZmlsZSk7CiAJcmV0dXJuIGVycjsKIH0KIApAQCAtMzc3LDcgKzM3Nyw3
IEBAIHN0YXRpYyBpbnQgbGl2ZV9wYXJhbGxlbF9zd2l0Y2godm9pZCAqYXJnKQogCX0KIAlrZnJl
ZShkYXRhKTsKIG91dF9maWxlOgotCW1vY2tfZmlsZV9mcmVlKGk5MTUsIGZpbGUpOworCW1vY2tf
ZmlsZV9wdXQoZmlsZSk7CiAJcmV0dXJuIGVycjsKIH0KIApAQCAtNzE2LDcgKzcxNiw3IEBAIHN0
YXRpYyBpbnQgaWd0X2N0eF9leGVjKHZvaWQgKmFyZykKIAkJaWYgKGlndF9saXZlX3Rlc3RfZW5k
KCZ0KSkKIAkJCWVyciA9IC1FSU87CiAKLQkJbW9ja19maWxlX2ZyZWUoaTkxNSwgZmlsZSk7CisJ
CW1vY2tfZmlsZV9wdXQoZmlsZSk7CiAJCWlmIChlcnIpCiAJCQlyZXR1cm4gZXJyOwogCkBAIC04
NTQsNyArODU0LDcgQEAgc3RhdGljIGludCBpZ3Rfc2hhcmVkX2N0eF9leGVjKHZvaWQgKmFyZykK
IAlpZiAoaWd0X2xpdmVfdGVzdF9lbmQoJnQpKQogCQllcnIgPSAtRUlPOwogb3V0X2ZpbGU6Ci0J
bW9ja19maWxlX2ZyZWUoaTkxNSwgZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlyZXR1
cm4gZXJyOwogfQogCkBAIC0xNDI2LDcgKzE0MjYsNyBAQCBzdGF0aWMgaW50IGlndF9jdHhfcmVh
ZG9ubHkodm9pZCAqYXJnKQogCWlmIChpZ3RfbGl2ZV90ZXN0X2VuZCgmdCkpCiAJCWVyciA9IC1F
SU87CiAKLQltb2NrX2ZpbGVfZnJlZShpOTE1LCBmaWxlKTsKKwltb2NrX2ZpbGVfcHV0KGZpbGUp
OwogCXJldHVybiBlcnI7CiB9CiAKQEAgLTE3NTAsNyArMTc1MCw3IEBAIHN0YXRpYyBpbnQgaWd0
X3ZtX2lzb2xhdGlvbih2b2lkICphcmcpCiBvdXRfZmlsZToKIAlpZiAoaWd0X2xpdmVfdGVzdF9l
bmQoJnQpKQogCQllcnIgPSAtRUlPOwotCW1vY2tfZmlsZV9mcmVlKGk5MTUsIGZpbGUpOworCW1v
Y2tfZmlsZV9wdXQoZmlsZSk7CiAJcmV0dXJuIGVycjsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0LmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX29iamVjdF9ibHQuYwppbmRl
eCBlODEzMmFjYTBiYjYuLmQ5ZmRmZGRiNzA5MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0LmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0LmMKQEAgLTMwMSw3
ICszMDEsNyBAQCBzdGF0aWMgaW50IGlndF9maWxsX2JsdF90aHJlYWQodm9pZCAqYXJnKQogCiAJ
aW50ZWxfY29udGV4dF9wdXQoY2UpOwogb3V0X2ZpbGU6Ci0JbW9ja19maWxlX2ZyZWUoaTkxNSwg
ZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQogCkBAIC00MzIs
NyArNDMyLDcgQEAgc3RhdGljIGludCBpZ3RfY29weV9ibHRfdGhyZWFkKHZvaWQgKmFyZykKIAog
CWludGVsX2NvbnRleHRfcHV0KGNlKTsKIG91dF9maWxlOgotCW1vY2tfZmlsZV9mcmVlKGk5MTUs
IGZpbGUpOworCW1vY2tfZmlsZV9wdXQoZmlsZSk7CiAJcmV0dXJuIGVycjsKIH0KIApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfY29udGV4dC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfY29udGV4dC5jCmluZGV4IGJjNzIwZGVmYzZiOC4u
YTU2ODhmN2Q5MDczIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVz
dF9jb250ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfY29udGV4
dC5jCkBAIC0zMTMsNyArMzEzLDcgQEAgc3RhdGljIGludCBsaXZlX2FjdGl2ZV9jb250ZXh0KHZv
aWQgKmFyZykKIAl9CiAKIG91dF9maWxlOgotCW1vY2tfZmlsZV9mcmVlKGd0LT5pOTE1LCBmaWxl
KTsKKwltb2NrX2ZpbGVfcHV0KGZpbGUpOwogCXJldHVybiBlcnI7CiB9CiAKQEAgLTQyMyw3ICs0
MjMsNyBAQCBzdGF0aWMgaW50IGxpdmVfcmVtb3RlX2NvbnRleHQodm9pZCAqYXJnKQogCX0KIAog
b3V0X2ZpbGU6Ci0JbW9ja19maWxlX2ZyZWUoZ3QtPmk5MTUsIGZpbGUpOworCW1vY2tfZmlsZV9w
dXQoZmlsZSk7CiAJcmV0dXJuIGVycjsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2NoZWNrLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9z
ZWxmdGVzdF9oYW5nY2hlY2suYwppbmRleCA4NWU5Y2NmNWMzMDQuLmNkYWFlZTQ0MzJiMiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2NoZWNrLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2NoZWNrLmMKQEAgLTQzOSw3
ICs0MzksNyBAQCBzdGF0aWMgaW50IGlndF9yZXNldF9ub3Aodm9pZCAqYXJnKQogCiAJZXJyID0g
aWd0X2ZsdXNoX3Rlc3QoZ3QtPmk5MTUpOwogb3V0OgotCW1vY2tfZmlsZV9mcmVlKGd0LT5pOTE1
LCBmaWxlKTsKKwltb2NrX2ZpbGVfcHV0KGZpbGUpOwogCWlmIChpbnRlbF9ndF9pc193ZWRnZWQo
Z3QpKQogCQllcnIgPSAtRUlPOwogCXJldHVybiBlcnI7CkBAIC01MzUsNyArNTM1LDcgQEAgc3Rh
dGljIGludCBpZ3RfcmVzZXRfbm9wX2VuZ2luZSh2b2lkICphcmcpCiAKIAllcnIgPSBpZ3RfZmx1
c2hfdGVzdChndC0+aTkxNSk7CiBvdXQ6Ci0JbW9ja19maWxlX2ZyZWUoZ3QtPmk5MTUsIGZpbGUp
OworCW1vY2tfZmlsZV9wdXQoZmlsZSk7CiAJaWYgKGludGVsX2d0X2lzX3dlZGdlZChndCkpCiAJ
CWVyciA9IC1FSU87CiAJcmV0dXJuIGVycjsKQEAgLTc1Miw3ICs3NTIsNyBAQCBzdGF0aWMgaW50
IGFjdGl2ZV9lbmdpbmUodm9pZCAqZGF0YSkKIAl9CiAKIGVycl9maWxlOgotCW1vY2tfZmlsZV9m
cmVlKGVuZ2luZS0+aTkxNSwgZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlyZXR1cm4g
ZXJyOwogfQogCkBAIC0xMzI1LDcgKzEzMjUsNyBAQCBzdGF0aWMgaW50IGlndF9yZXNldF9ldmlj
dF9wcGd0dCh2b2lkICphcmcpCiAJaTkxNV92bV9wdXQodm0pOwogCiBvdXQ6Ci0JbW9ja19maWxl
X2ZyZWUoZ3QtPmk5MTUsIGZpbGUpOworCW1vY2tfZmlsZV9wdXQoZmlsZSk7CiAJcmV0dXJuIGVy
cjsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rfd29y
a2Fyb3VuZHMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3dvcmthcm91bmRz
LmMKaW5kZXggYWJjZTZlNGVjOWMwLi41YzY5ZWM1YzVlZjkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3dvcmthcm91bmRzLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rfd29ya2Fyb3VuZHMuYwpAQCAtNzM5LDcgKzczOSw3IEBAIHN0
YXRpYyBpbnQgbGl2ZV9kaXJ0eV93aGl0ZWxpc3Qodm9pZCAqYXJnKQogCX0KIAogb3V0X2ZpbGU6
Ci0JbW9ja19maWxlX2ZyZWUoZ3QtPmk5MTUsIGZpbGUpOworCW1vY2tfZmlsZV9wdXQoZmlsZSk7
CiAJcmV0dXJuIGVycjsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2Vs
ZnRlc3RzL2k5MTVfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9n
ZW0uYwppbmRleCBkODNmNmJmNmQ5ZDQuLmFhNjI4MmFkZmQwOSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtLmMKQEAgLTE2Myw3ICsxNjMsNyBAQCBzdGF0aWMgaW50
IGlndF9nZW1fc3VzcGVuZCh2b2lkICphcmcpCiAKIAllcnIgPSBzd2l0Y2hfdG9fY29udGV4dChj
dHgpOwogb3V0OgotCW1vY2tfZmlsZV9mcmVlKGk5MTUsIGZpbGUpOworCW1vY2tfZmlsZV9wdXQo
ZmlsZSk7CiAJcmV0dXJuIGVycjsKIH0KIApAQCAtMTk4LDcgKzE5OCw3IEBAIHN0YXRpYyBpbnQg
aWd0X2dlbV9oaWJlcm5hdGUodm9pZCAqYXJnKQogCiAJZXJyID0gc3dpdGNoX3RvX2NvbnRleHQo
Y3R4KTsKIG91dDoKLQltb2NrX2ZpbGVfZnJlZShpOTE1LCBmaWxlKTsKKwltb2NrX2ZpbGVfcHV0
KGZpbGUpOwogCXJldHVybiBlcnI7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ldmljdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2Vs
ZnRlc3RzL2k5MTVfZ2VtX2V2aWN0LmMKaW5kZXggNDJlOTQ4MTQ0ZjFiLi40MTA5MmRjZWE1YjEg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ldmlj
dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ldmljdC5j
CkBAIC01MTUsNyArNTE1LDcgQEAgc3RhdGljIGludCBpZ3RfZXZpY3RfY29udGV4dHModm9pZCAq
YXJnKQogCQlwcl9pbmZvKCJTdWJtaXR0ZWQgJWx1IGNvbnRleHRzL3JlcXVlc3RzIG9uICVzXG4i
LAogCQkJY291bnQsIGVuZ2luZS0+bmFtZSk7CiAKLQkJbW9ja19maWxlX2ZyZWUoaTkxNSwgZmls
ZSk7CisJCW1vY2tfZmlsZV9wdXQoZmlsZSk7CiAJCWlmIChlcnIpCiAJCQlicmVhazsKIAl9CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZ3R0LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZ3R0LmMKaW5kZXggM2Y3
ZTgwZmIzYmJkLi5jM2UwZDYzYzRkMGMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ndHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvaTkxNV9nZW1fZ3R0LmMKQEAgLTEwMjYsNyArMTAyNiw3IEBAIHN0YXRpYyBpbnQgZXhl
cmNpc2VfcHBndHQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCWk5MTVfdm1f
cHV0KCZwcGd0dC0+dm0pOwogCiBvdXRfZnJlZToKLQltb2NrX2ZpbGVfZnJlZShkZXZfcHJpdiwg
ZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQogCkBAIC0yMDIy
LDcgKzIwMjIsNyBAQCBzdGF0aWMgaW50IGlndF9jc190bGIodm9pZCAqYXJnKQogb3V0X3ZtOgog
CWk5MTVfdm1fcHV0KHZtKTsKIG91dF91bmxvY2s6Ci0JbW9ja19maWxlX2ZyZWUoaTkxNSwgZmls
ZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQogCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9yZXF1ZXN0LmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9yZXF1ZXN0LmMKaW5kZXggOWU2ZDMxNTljZDgw
Li43YzU2ZWUzOGNjNWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0
cy9pOTE1X3JlcXVlc3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkx
NV9yZXF1ZXN0LmMKQEAgLTE0MzAsNyArMTQzMCw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9icmVhZGNy
dW1ic19zbW9rZXRlc3Qodm9pZCAqYXJnKQogb3V0X3Ntb2tlOgogCWtmcmVlKHNtb2tlKTsKIG91
dF9maWxlOgotCW1vY2tfZmlsZV9mcmVlKGk5MTUsIGZpbGUpOworCW1vY2tfZmlsZV9wdXQoZmls
ZSk7CiBvdXRfcnBtOgogCWludGVsX3J1bnRpbWVfcG1fcHV0KCZpOTE1LT5ydW50aW1lX3BtLCB3
YWtlcmVmKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2lu
dGVsX21lbW9yeV9yZWdpb24uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pbnRl
bF9tZW1vcnlfcmVnaW9uLmMKaW5kZXggOTVkNjA5YWJkMzliLi5mODQ5N2FkOTBmNTMgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pbnRlbF9tZW1vcnlfcmVnaW9u
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX21lbW9yeV9yZWdp
b24uYwpAQCAtNDM5LDcgKzQzOSw3IEBAIHN0YXRpYyBpbnQgaWd0X2xtZW1fd3JpdGVfZ3B1KHZv
aWQgKmFyZykKIG91dF9wdXQ6CiAJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwogb3V0X2ZpbGU6
Ci0JbW9ja19maWxlX2ZyZWUoaTkxNSwgZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAly
ZXR1cm4gZXJyOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVz
dHMvbW9ja19kcm0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2RybS5j
CmluZGV4IDA5YzcwNDE1MzQ1Ni4uYzEwMGMzZWZlMjM5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19kcm0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9zZWxmdGVzdHMvbW9ja19kcm0uYwpAQCAtMjIsNTIgKzIyLDE3IEBACiAgKgogICovCiAKKyNp
bmNsdWRlIDxkcm0vZHJtX2ZpbGUuaD4KKwogI2luY2x1ZGUgIm1vY2tfZHJtLmgiCiAKIHN0cnVj
dCBkcm1fZmlsZSAqbW9ja19maWxlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewot
CXN0cnVjdCBmaWxlICpmaWxwOwotCXN0cnVjdCBpbm9kZSAqaW5vZGU7Ci0Jc3RydWN0IGRybV9m
aWxlICpmaWxlOwotCWludCBlcnI7Ci0KLQlpbm9kZSA9IGt6YWxsb2Moc2l6ZW9mKCppbm9kZSks
IEdGUF9LRVJORUwpOwotCWlmICghaW5vZGUpIHsKLQkJZXJyID0gLUVOT01FTTsKLQkJZ290byBl
cnI7Ci0JfQotCi0JaW5vZGUtPmlfcmRldiA9IGk5MTUtPmRybS5wcmltYXJ5LT5pbmRleDsKLQot
CWZpbHAgPSBremFsbG9jKHNpemVvZigqZmlscCksIEdGUF9LRVJORUwpOwotCWlmICghZmlscCkg
ewotCQllcnIgPSAtRU5PTUVNOwotCQlnb3RvIGVycl9pbm9kZTsKLQl9Ci0KLQllcnIgPSBkcm1f
b3Blbihpbm9kZSwgZmlscCk7Ci0JaWYgKGVycikKLQkJZ290byBlcnJfZmlscDsKKwlzdHJ1Y3Qg
ZmlsZSAqZmlsZTsKIAotCWZpbGUgPSBmaWxwLT5wcml2YXRlX2RhdGE7Ci0JbWVtc2V0KCZmaWxl
LT5maWxwLCBQT0lTT05fSU5VU0UsIHNpemVvZihmaWxlLT5maWxwKSk7Ci0JZmlsZS0+YXV0aGVu
dGljYXRlZCA9IHRydWU7Ci0KLQlrZnJlZShmaWxwKTsKLQlrZnJlZShpbm9kZSk7Ci0JcmV0dXJu
IGZpbGU7Ci0KLWVycl9maWxwOgotCWtmcmVlKGZpbHApOwotZXJyX2lub2RlOgotCWtmcmVlKGlu
b2RlKTsKLWVycjoKLQlyZXR1cm4gRVJSX1BUUihlcnIpOwotfQotCi12b2lkIG1vY2tfZmlsZV9m
cmVlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUp
Ci17Ci0Jc3RydWN0IGZpbGUgZmlscCA9IHsgLnByaXZhdGVfZGF0YSA9IGZpbGUgfTsKKwlmaWxl
ID0gbW9ja19kcm1fZ2V0ZmlsZShpOTE1LT5kcm0ucHJpbWFyeSwgT19SRFdSKTsKKwlpZiAoSVNf
RVJSKGZpbGUpKQorCQlyZXR1cm4gRVJSX0NBU1QoZmlsZSk7CiAKLQlkcm1fcmVsZWFzZShOVUxM
LCAmZmlscCk7CisJcmV0dXJuIGZpbGUtPnByaXZhdGVfZGF0YTsKIH0KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2RybS5oIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvc2VsZnRlc3RzL21vY2tfZHJtLmgKaW5kZXggYjM5YmVlZTlmOGY2Li5kYzQxOTBiZDNm
NWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2RybS5o
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2RybS5oCkBAIC0yNSw3
ICsyNSwxMyBAQAogI2lmbmRlZiBfX01PQ0tfRFJNX0gKICNkZWZpbmUgX19NT0NLX0RSTV9ICiAK
K3N0cnVjdCBkcm1fZmlsZTsKK3N0cnVjdCBkcm1faTkxNV9wcml2YXRlOworCiBzdHJ1Y3QgZHJt
X2ZpbGUgKm1vY2tfZmlsZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7Ci12b2lkIG1v
Y2tfZmlsZV9mcmVlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBzdHJ1Y3QgZHJtX2Zp
bGUgKmZpbGUpOworc3RhdGljIGlubGluZSB2b2lkIG1vY2tfZmlsZV9wdXQoc3RydWN0IGRybV9m
aWxlICpmaWxlKQoreworCWZwdXQoZmlsZS0+ZmlscCk7Cit9CiAKICNlbmRpZiAvKiAhX19NT0NL
X0RSTV9IICovCi0tIAoyLjI0LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeA==

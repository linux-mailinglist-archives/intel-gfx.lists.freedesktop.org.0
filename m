Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 98278A050C
	for <lists+intel-gfx@lfdr.de>; Wed, 28 Aug 2019 16:34:00 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 957ED89CF4;
	Wed, 28 Aug 2019 14:33:55 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8772D89CBA
 for <intel-gfx@lists.freedesktop.org>; Wed, 28 Aug 2019 14:33:47 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 28 Aug 2019 07:33:39 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,441,1559545200"; d="scan'208";a="380419417"
Received: from cmartin2-mobl3.ger.corp.intel.com (HELO
 delly.ger.corp.intel.com) ([10.252.38.61])
 by fmsmga005.fm.intel.com with ESMTP; 28 Aug 2019 07:33:37 -0700
From: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 28 Aug 2019 17:33:22 +0300
Message-Id: <20190828143327.7965-6-lionel.g.landwerlin@intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20190828143327.7965-1-lionel.g.landwerlin@intel.com>
References: <20190828143327.7965-1-lionel.g.landwerlin@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v11 05/10] drm/i915/perf: allow for CS OA
 configs to be created lazily
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SGVyZSB3ZSBpbnRyb2R1Y2UgYSBtZWNoYW5pc20gYnkgd2hpY2ggdGhlIGV4ZWNidWYgcGFydCBv
ZiB0aGUgaTkxNQpkcml2ZXIgd2lsbCBiZSBhYmxlIHRvIHJlcXVlc3QgdGhhdCBhIGJhdGNoIGJ1
ZmZlciBjb250YWluaW5nIHRoZQpwcm9ncmFtbWluZyBmb3IgYSBwYXJ0aWN1bGFyIE9BIGNvbmZp
ZyBiZSBjcmVhdGVkLgoKV2UnbGwgZXhlY3V0ZSB0aGVzZSBPQSBjb25maWd1cmF0aW9uIGJ1ZmZl
cnMgcmlnaHQgYmVmb3JlIGV4ZWN1dGluZyBhCnNldCBvZiB1c2Vyc3BhY2UgY29tbWFuZHMgc28g
dGhhdCBhIHBhcnRpY3VsYXIgdXNlciBiYXRjaGJ1ZmZlciBiZQpleGVjdXRlZCB3aXRoIGEgZ2l2
ZW4gT0EgY29uZmlndXJhdGlvbi4KClRoaXMgbWVjaGFuaXNtIGVzc2VudGlhbGx5IGFsbG93cyB0
aGUgdXNlcnNwYWNlIGRyaXZlciB0byBnbyB0aHJvdWdoCnNldmVyYWwgT0EgY29uZmlndXJhdGlv
biB3aXRob3V0IGhhdmluZyB0byBvcGVuL2Nsb3NlIHRoZSBpOTE1L3BlcmYKc3RyZWFtLgoKdjI6
IE5vIG5lZWQgZm9yIGxvY2tpbmcgb24gb2JqZWN0IE9BIGNvbmZpZyBvYmplY3QgY3JlYXRpb24g
KENocmlzKQogICAgRmx1c2ggY3B1IG1hcHBpbmcgb2YgT0EgY29uZmlnIChDaHJpcykKCnYzOiBQ
cm9wZXJseSBkZWFsIHdpdGggdGhlIHBlcmZfbWV0cmljIGxvY2sgKENocmlzL0xpb25lbCkKCnY0
OiBGaXggb2EgY29uZmlnIHVucmVmL3B1dCB3aGVuIG5vdCBmb3VuZCAoTGlvbmVsKQoKdjU6IEFs
bG9jYXRlIEJPcyBmb3IgY29uZmlndXJhdGlvbnMgb24gdGhlIHN0cmVhbSBpbnN0ZWFkIG9mIGds
b2JhbGx5CiAgICAoTGlvbmVsKQoKU2lnbmVkLW9mZi1ieTogTGlvbmVsIExhbmR3ZXJsaW4gPGxp
b25lbC5nLmxhbmR3ZXJsaW5AaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogQ2hyaXMgV2lsc29uIDxj
aHJpc0BjaHJpcy13aWxzb24uY28udWs+ICh2NCkKLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ncHVfY29tbWFuZHMuaCB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2Rydi5oICAgICAgICAgICAgICB8ICAxNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9w
ZXJmLmMgICAgICAgICAgICAgfCAyNDEgKysrKysrKysrKysrKysrKy0tLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9wZXJmLmggICAgICAgICAgICAgfCAgMjIgKysKIDQgZmlsZXMgY2hhbmdl
ZCwgMjM3IGluc2VydGlvbnMoKyksIDQxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZ3B1X2NvbW1hbmRzLmgKaW5kZXggODZlMDBhMmRiOGE0Li5hN2YxMzc3
YTU0YTIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21t
YW5kcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5o
CkBAIC0xMzMsNiArMTMzLDcgQEAKICAqLwogI2RlZmluZSBNSV9MT0FEX1JFR0lTVEVSX0lNTSh4
KQlNSV9JTlNUUigweDIyLCAyKih4KS0xKQogI2RlZmluZSAgIE1JX0xSSV9GT1JDRV9QT1NURUQJ
CSgxPDwxMikKKyNkZWZpbmUgTUlfTE9BRF9SRUdJU1RFUl9JTU1fTUFYX1JFR1MgKDEyNikKICNk
ZWZpbmUgTUlfU1RPUkVfUkVHSVNURVJfTUVNICAgICAgICBNSV9JTlNUUigweDI0LCAxKQogI2Rl
ZmluZSBNSV9TVE9SRV9SRUdJU1RFUl9NRU1fR0VOOCAgIE1JX0lOU1RSKDB4MjQsIDIpCiAjZGVm
aW5lICAgTUlfU1JNX0xSTV9HTE9CQUxfR1RUCQkoMTw8MjIpCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYu
aAppbmRleCBiNDI2NTFhMzg3ZDkuLmQ4YTFlODQyZmI0OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5oCkBAIC05ODksNiArOTg5LDggQEAgc3RydWN0IGk5MTVfb2FfcmVnIHsKIH07CiAKIHN0cnVj
dCBpOTE1X29hX2NvbmZpZyB7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTU7CisKIAlj
aGFyIHV1aWRbVVVJRF9TVFJJTkdfTEVOICsgMV07CiAJaW50IGlkOwogCkBAIC0xMDAzLDcgKzEw
MDUsNyBAQCBzdHJ1Y3QgaTkxNV9vYV9jb25maWcgewogCXN0cnVjdCBhdHRyaWJ1dGUgKmF0dHJz
WzJdOwogCXN0cnVjdCBkZXZpY2VfYXR0cmlidXRlIHN5c2ZzX21ldHJpY19pZDsKIAotCWF0b21p
Y190IHJlZl9jb3VudDsKKwlzdHJ1Y3Qga3JlZiByZWY7CiB9OwogCiBzdHJ1Y3QgaTkxNV9wZXJm
X3N0cmVhbTsKQEAgLTExMzAsNiArMTEzMiwxMiBAQCBzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSB7
CiAJICovCiAJc3RydWN0IGk5MTVfb2FfY29uZmlnICpvYV9jb25maWc7CiAKKwkvKioKKwkgKiBA
b2FfY29uZmlnX2JvczogQSBsaXN0IG9mIHN0cnVjdCBpOTE1X29hX2NvbmZpZ19ibyBhbGxvY2F0
ZWQgbGF6aWx5CisJICogZWFjaCB0aW1lIEBvYV9jb25maWcgY2hhbmdlcy4KKwkgKi8KKwlzdHJ1
Y3QgbGlzdF9oZWFkIG9hX2NvbmZpZ19ib3M7CisKIAkvKioKIAkgKiBUaGUgT0EgY29udGV4dCBz
cGVjaWZpYyBpbmZvcm1hdGlvbi4KIAkgKi8KQEAgLTE2NjAsOCArMTY2OCw4IEBAIHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlIHsKIAkJc3RydWN0IG11dGV4IG1ldHJpY3NfbG9jazsKIAogCQkvKgot
CQkgKiBMaXN0IG9mIGR5bmFtaWMgY29uZmlndXJhdGlvbnMsIHlvdSBuZWVkIHRvIGhvbGQKLQkJ
ICogZGV2X3ByaXYtPnBlcmYubWV0cmljc19sb2NrIHRvIGFjY2VzcyBpdC4KKwkJICogTGlzdCBv
ZiBkeW5hbWljIGNvbmZpZ3VyYXRpb25zIChzdHJ1Y3QgaTkxNV9vYV9jb25maWcpLCB5b3UKKwkJ
ICogbmVlZCB0byBob2xkIGRldl9wcml2LT5wZXJmLm1ldHJpY3NfbG9jayB0byBhY2Nlc3MgaXQu
CiAJCSAqLwogCQlzdHJ1Y3QgaWRyIG1ldHJpY3NfaWRyOwogCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVy
Zi5jCmluZGV4IDQ3ZmI2ZjZmMjA2NS4uMDM4NWFiY2U3YmFhIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X3BlcmYuYwpAQCAtMzY1LDExICszNjUsMTkgQEAgc3RydWN0IHBlcmZfb3Blbl9wcm9wZXJ0aWVz
IHsKIAlpbnQgb2FfcGVyaW9kX2V4cG9uZW50OwogfTsKIAorc3RydWN0IGk5MTVfb2FfY29uZmln
X2JvIHsKKwlzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CisKKwlzdHJ1Y3QgaTkxNV9vYV9jb25maWcg
Km9hX2NvbmZpZzsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqYm87Cit9OworCiBzdGF0
aWMgZW51bSBocnRpbWVyX3Jlc3RhcnQgb2FfcG9sbF9jaGVja190aW1lcl9jYihzdHJ1Y3QgaHJ0
aW1lciAqaHJ0aW1lcik7CiAKLXN0YXRpYyB2b2lkIGZyZWVfb2FfY29uZmlnKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJCSAgIHN0cnVjdCBpOTE1X29hX2NvbmZpZyAqb2Ff
Y29uZmlnKQordm9pZCBpOTE1X29hX2NvbmZpZ19yZWxlYXNlKHN0cnVjdCBrcmVmICpyZWYpCiB7
CisJc3RydWN0IGk5MTVfb2FfY29uZmlnICpvYV9jb25maWcgPSBjb250YWluZXJfb2YocmVmLCB0
eXBlb2YoKm9hX2NvbmZpZyksIHJlZik7CisKIAlpZiAoIVBUUl9FUlIob2FfY29uZmlnLT5mbGV4
X3JlZ3MpKQogCQlrZnJlZShvYV9jb25maWctPmZsZXhfcmVncyk7CiAJaWYgKCFQVFJfRVJSKG9h
X2NvbmZpZy0+Yl9jb3VudGVyX3JlZ3MpKQpAQCAtMzc5LDQwICszODcsMTczIEBAIHN0YXRpYyB2
b2lkIGZyZWVfb2FfY29uZmlnKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAlr
ZnJlZShvYV9jb25maWcpOwogfQogCi1zdGF0aWMgdm9pZCBwdXRfb2FfY29uZmlnKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJCSAgc3RydWN0IGk5MTVfb2FfY29uZmlnICpv
YV9jb25maWcpCitzdGF0aWMgdTMyICp3cml0ZV9jc19taV9scmkodTMyICpjcywgY29uc3Qgc3Ry
dWN0IGk5MTVfb2FfcmVnICpyZWdfZGF0YSwgdTMyIG5fcmVncykKIHsKLQlpZiAoIWF0b21pY19k
ZWNfYW5kX3Rlc3QoJm9hX2NvbmZpZy0+cmVmX2NvdW50KSkKLQkJcmV0dXJuOworCXUzMiBpOwor
CisJZm9yIChpID0gMDsgaSA8IG5fcmVnczsgaSsrKSB7CisJCWlmICgoaSAlIE1JX0xPQURfUkVH
SVNURVJfSU1NX01BWF9SRUdTKSA9PSAwKSB7CisJCQl1MzIgbl9scmkgPSBtaW4obl9yZWdzIC0g
aSwKKwkJCQkJKHUzMikgTUlfTE9BRF9SRUdJU1RFUl9JTU1fTUFYX1JFR1MpOworCisJCQkqY3Mr
KyA9IE1JX0xPQURfUkVHSVNURVJfSU1NKG5fbHJpKTsKKwkJfQorCQkqY3MrKyA9IGk5MTVfbW1p
b19yZWdfb2Zmc2V0KHJlZ19kYXRhW2ldLmFkZHIpOworCQkqY3MrKyA9IHJlZ19kYXRhW2ldLnZh
bHVlOworCX0KIAotCWZyZWVfb2FfY29uZmlnKGRldl9wcml2LCBvYV9jb25maWcpOworCXJldHVy
biBjczsKIH0KIAotc3RhdGljIGludCBnZXRfb2FfY29uZmlnKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiwKLQkJCSBpbnQgbWV0cmljc19zZXQsCi0JCQkgc3RydWN0IGk5MTVfb2Ff
Y29uZmlnICoqb3V0X2NvbmZpZykKK3N0YXRpYyBzdHJ1Y3QgaTkxNV9vYV9jb25maWdfYm8qIGFs
bG9jX29hX2NvbmZpZ19idWZmZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCisJCQkJ
CQkJc3RydWN0IGk5MTVfb2FfY29uZmlnICpvYV9jb25maWcpCiB7Ci0JaW50IHJldDsKKwlzdHJ1
Y3QgaTkxNV9vYV9jb25maWdfYm8gKm9hX2JvOworCXNpemVfdCBjb25maWdfbGVuZ3RoID0gMDsK
Kwl1MzIgKmNzOworCWludCBlcnI7CisKKwlvYV9ibyA9IGt6YWxsb2Moc2l6ZW9mKCpvYV9ibyks
IEdGUF9LRVJORUwpOworCWlmICghb2FfYm8pCisJCXJldHVybiBFUlJfUFRSKC1FTk9NRU0pOwor
CisJb2FfYm8tPm9hX2NvbmZpZyA9IGk5MTVfb2FfY29uZmlnX2dldChvYV9jb25maWcpOworCisJ
aWYgKG9hX2NvbmZpZy0+bXV4X3JlZ3NfbGVuID4gMCkgeworCQljb25maWdfbGVuZ3RoICs9IERJ
Vl9ST1VORF9VUChvYV9jb25maWctPm11eF9yZWdzX2xlbiwKKwkJCQkJICAgICAgTUlfTE9BRF9S
RUdJU1RFUl9JTU1fTUFYX1JFR1MpICogNDsKKwkJY29uZmlnX2xlbmd0aCArPSBvYV9jb25maWct
Pm11eF9yZWdzX2xlbiAqIDg7CisJfQorCWlmIChvYV9jb25maWctPmJfY291bnRlcl9yZWdzX2xl
biA+IDApIHsKKwkJY29uZmlnX2xlbmd0aCArPSBESVZfUk9VTkRfVVAob2FfY29uZmlnLT5iX2Nv
dW50ZXJfcmVnc19sZW4sCisJCQkJCSAgICAgIE1JX0xPQURfUkVHSVNURVJfSU1NX01BWF9SRUdT
KSAqIDQ7CisJCWNvbmZpZ19sZW5ndGggKz0gb2FfY29uZmlnLT5iX2NvdW50ZXJfcmVnc19sZW4g
KiA4OworCX0KKwlpZiAob2FfY29uZmlnLT5mbGV4X3JlZ3NfbGVuID4gMCkgeworCQljb25maWdf
bGVuZ3RoICs9IERJVl9ST1VORF9VUChvYV9jb25maWctPmZsZXhfcmVnc19sZW4sCisJCQkJCSAg
ICAgIE1JX0xPQURfUkVHSVNURVJfSU1NX01BWF9SRUdTKSAqIDQ7CisJCWNvbmZpZ19sZW5ndGgg
Kz0gb2FfY29uZmlnLT5mbGV4X3JlZ3NfbGVuICogODsKKwl9CisJY29uZmlnX2xlbmd0aCArPSA0
OyAvKiBNSV9CQVRDSF9CVUZGRVJfRU5EICovCisJY29uZmlnX2xlbmd0aCA9IEFMSUdOKGNvbmZp
Z19sZW5ndGgsIEk5MTVfR1RUX1BBR0VfU0laRSk7CisKKwlvYV9iby0+Ym8gPSBpOTE1X2dlbV9v
YmplY3RfY3JlYXRlX3NobWVtKGk5MTUsIGNvbmZpZ19sZW5ndGgpOworCWlmIChJU19FUlIob2Ff
Ym8tPmJvKSkgeworCQllcnIgPSBQVFJfRVJSKG9hX2JvLT5ibyk7CisJCWdvdG8gZXJyX29hX2Nv
bmZpZzsKKwl9CisKKwljcyA9IGk5MTVfZ2VtX29iamVjdF9waW5fbWFwKG9hX2JvLT5ibywgSTkx
NV9NQVBfV0IpOworCWlmIChJU19FUlIoY3MpKSB7CisJCWVyciA9IFBUUl9FUlIoY3MpOworCQln
b3RvIGVycl9vYV9ibzsKKwl9CisKKwljcyA9IHdyaXRlX2NzX21pX2xyaShjcywgb2FfY29uZmln
LT5tdXhfcmVncywgb2FfY29uZmlnLT5tdXhfcmVnc19sZW4pOworCWNzID0gd3JpdGVfY3NfbWlf
bHJpKGNzLCBvYV9jb25maWctPmJfY291bnRlcl9yZWdzLCBvYV9jb25maWctPmJfY291bnRlcl9y
ZWdzX2xlbik7CisJY3MgPSB3cml0ZV9jc19taV9scmkoY3MsIG9hX2NvbmZpZy0+ZmxleF9yZWdz
LCBvYV9jb25maWctPmZsZXhfcmVnc19sZW4pOworCisJKmNzKysgPSBNSV9CQVRDSF9CVUZGRVJf
RU5EOworCisJaTkxNV9nZW1fb2JqZWN0X2ZsdXNoX21hcChvYV9iby0+Ym8pOworCWk5MTVfZ2Vt
X29iamVjdF91bnBpbl9tYXAob2FfYm8tPmJvKTsKKworCXJldHVybiBvYV9ibzsKKworZXJyX29h
X2JvOgorCWk5MTVfZ2VtX29iamVjdF9wdXQob2FfYm8tPmJvKTsKK2Vycl9vYV9jb25maWc6CisJ
aTkxNV9vYV9jb25maWdfcHV0KG9hX2JvLT5vYV9jb25maWcpOworCWtmcmVlKG9hX2JvKTsKKwor
CXJldHVybiBFUlJfUFRSKGVycik7Cit9CisKK2ludCBpOTE1X3BlcmZfZ2V0X29hX2NvbmZpZyhz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKKwkJCSAgICBpbnQgbWV0cmljc19zZXQsCisJ
CQkgICAgc3RydWN0IGk5MTVfb2FfY29uZmlnICoqb3V0X2NvbmZpZykKK3sKKwlzdHJ1Y3QgaTkx
NV9vYV9jb25maWcgKm9hX2NvbmZpZzsKKwlpbnQgZXJyOworCisJaWYgKCFpOTE1LT5wZXJmLmlu
aXRpYWxpemVkKQorCQlyZXR1cm4gLUVOT0RFVjsKKworCWVyciA9IG11dGV4X2xvY2tfaW50ZXJy
dXB0aWJsZSgmaTkxNS0+cGVyZi5tZXRyaWNzX2xvY2spOworCWlmIChlcnIpCisJCXJldHVybiBl
cnI7CiAKIAlpZiAobWV0cmljc19zZXQgPT0gMSkgewotCQkqb3V0X2NvbmZpZyA9ICZkZXZfcHJp
di0+cGVyZi50ZXN0X2NvbmZpZzsKLQkJYXRvbWljX2luYygmZGV2X3ByaXYtPnBlcmYudGVzdF9j
b25maWcucmVmX2NvdW50KTsKLQkJcmV0dXJuIDA7CisJCW9hX2NvbmZpZyA9ICZpOTE1LT5wZXJm
LnRlc3RfY29uZmlnOworCX0gZWxzZSB7CisJCW9hX2NvbmZpZyA9IGlkcl9maW5kKCZpOTE1LT5w
ZXJmLm1ldHJpY3NfaWRyLCBtZXRyaWNzX3NldCk7CisJCWlmICghb2FfY29uZmlnKQorCQkJZXJy
ID0gLUVJTlZBTDsKIAl9CiAKLQlyZXQgPSBtdXRleF9sb2NrX2ludGVycnVwdGlibGUoJmRldl9w
cml2LT5wZXJmLm1ldHJpY3NfbG9jayk7Ci0JaWYgKHJldCkKLQkJcmV0dXJuIHJldDsKKwlpZiAo
IWVycikKKwkJKm91dF9jb25maWcgPSBpOTE1X29hX2NvbmZpZ19nZXQob2FfY29uZmlnKTsKIAot
CSpvdXRfY29uZmlnID0gaWRyX2ZpbmQoJmRldl9wcml2LT5wZXJmLm1ldHJpY3NfaWRyLCBtZXRy
aWNzX3NldCk7Ci0JaWYgKCEqb3V0X2NvbmZpZykKLQkJcmV0ID0gLUVJTlZBTDsKLQllbHNlCi0J
CWF0b21pY19pbmMoJigqb3V0X2NvbmZpZyktPnJlZl9jb3VudCk7CisJbXV0ZXhfdW5sb2NrKCZp
OTE1LT5wZXJmLm1ldHJpY3NfbG9jayk7CiAKLQltdXRleF91bmxvY2soJmRldl9wcml2LT5wZXJm
Lm1ldHJpY3NfbG9jayk7CisJcmV0dXJuIGVycjsKK30KIAotCXJldHVybiByZXQ7CitpbnQgaTkx
NV9wZXJmX2dldF9vYV9jb25maWdfYW5kX2JvKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJl
YW0sCisJCQkJICAgaW50IG1ldHJpY3Nfc2V0LAorCQkJCSAgIHN0cnVjdCBpOTE1X29hX2NvbmZp
ZyAqKm91dF9jb25maWcsCisJCQkJICAgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKipvdXRf
b2JqKQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gc3RyZWFtLT5kZXZfcHJp
djsKKwlzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2NvbmZpZzsKKwlpbnQgZXJyID0gMDsKKwor
CWlmICghaTkxNS0+cGVyZi5pbml0aWFsaXplZCkKKwkJcmV0dXJuIC1FTk9ERVY7CisKKwllcnIg
PSBpOTE1X3BlcmZfZ2V0X29hX2NvbmZpZyhpOTE1LCBtZXRyaWNzX3NldCwgJm9hX2NvbmZpZyk7
CisJaWYgKGVycikKKwkJcmV0dXJuIGVycjsKKworCWlmIChvdXRfY29uZmlnKQorCQkqb3V0X2Nv
bmZpZyA9IG9hX2NvbmZpZzsKKworCWlmIChvdXRfb2JqKSB7CisJCXN0cnVjdCBpOTE1X29hX2Nv
bmZpZ19ibyAqb2FfYm8gPSBOVUxMLCAqb2FfYm9faXRlcjsKKworCQkvKiBMb29rIGZvciB0aGUg
YnVmZmVyIGluIHRoZSBhbHJlYWR5IGFsbG9jYXRlZCBCT3MgYXR0YWNoZWQKKwkJICogdG8gdGhl
IHN0cmVhbS4KKwkJICovCisJCWxpc3RfZm9yX2VhY2hfZW50cnkob2FfYm9faXRlciwgJnN0cmVh
bS0+b2FfY29uZmlnX2JvcywgbGluaykgeworCQkJaWYgKG9hX2JvX2l0ZXItPm9hX2NvbmZpZyA9
PSBvYV9jb25maWcgJiYKKwkJCSAgICBtZW1jbXAob2FfYm9faXRlci0+b2FfY29uZmlnLT51dWlk
LAorCQkJCSAgIG9hX2NvbmZpZy0+dXVpZCwKKwkJCQkgICBzaXplb2Yob2FfY29uZmlnLT51dWlk
KSkgPT0gMCkgeworCQkJCW9hX2JvID0gb2FfYm9faXRlcjsKKwkJCQlicmVhazsKKwkJCX0KKwkJ
fQorCisJCWlmICghb2FfYm8pIHsKKwkJCW9hX2JvID0gYWxsb2Nfb2FfY29uZmlnX2J1ZmZlcihp
OTE1LCBvYV9jb25maWcpOworCQkJaWYgKElTX0VSUihvYV9ibykpIHsKKwkJCQllcnIgPSBQVFJf
RVJSKG9hX2JvKTsKKwkJCQlnb3RvIGVycjsKKwkJCX0KKworCQkJbGlzdF9hZGQoJm9hX2JvLT5s
aW5rLCAmc3RyZWFtLT5vYV9jb25maWdfYm9zKTsKKwkJfQorCisJCSpvdXRfb2JqID0gaTkxNV9n
ZW1fb2JqZWN0X2dldChvYV9iby0+Ym8pOworCX0KKworZXJyOgorCWlmIChlcnIpIHsKKwkJaTkx
NV9vYV9jb25maWdfcHV0KG9hX2NvbmZpZyk7CisJCSpvdXRfY29uZmlnID0gTlVMTDsKKwl9CisK
KwlyZXR1cm4gZXJyOwogfQogCiBzdGF0aWMgdTMyIGdlbjhfb2FfaHdfdGFpbF9yZWFkKHN0cnVj
dCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCkBAIC0xMzYwLDYgKzE1MDEsMTkgQEAgZnJlZV9v
YV9idWZmZXIoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAlzdHJlYW0tPm9hX2J1
ZmZlci52YWRkciA9IE5VTEw7CiB9CiAKK3N0YXRpYyB2b2lkCitmcmVlX29hX2NvbmZpZ3Moc3Ry
dWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKK3sKKwlzdHJ1Y3QgaTkxNV9vYV9jb25maWdf
Ym8gKm9hX2JvLCAqdG1wOworCisJaTkxNV9vYV9jb25maWdfcHV0KHN0cmVhbS0+b2FfY29uZmln
KTsKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUob2FfYm8sIHRtcCwgJnN0cmVhbS0+b2FfY29u
ZmlnX2JvcywgbGluaykgeworCQlsaXN0X2RlbCgmb2FfYm8tPmxpbmspOworCQlpOTE1X29hX2Nv
bmZpZ19wdXQob2FfYm8tPm9hX2NvbmZpZyk7CisJCWk5MTVfZ2VtX29iamVjdF9wdXQob2FfYm8t
PmJvKTsKKwl9Cit9CisKIHN0YXRpYyB2b2lkIGk5MTVfb2Ffc3RyZWFtX2Rlc3Ryb3koc3RydWN0
IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYgPSBzdHJlYW0tPmRldl9wcml2OwpAQCAtMTM4Myw3ICsxNTM3LDcgQEAgc3RhdGlj
IHZvaWQgaTkxNV9vYV9zdHJlYW1fZGVzdHJveShzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3Ry
ZWFtKQogCWlmIChzdHJlYW0tPmN0eCkKIAkJb2FfcHV0X3JlbmRlcl9jdHhfaWQoc3RyZWFtKTsK
IAotCXB1dF9vYV9jb25maWcoZGV2X3ByaXYsIHN0cmVhbS0+b2FfY29uZmlnKTsKKwlmcmVlX29h
X2NvbmZpZ3Moc3RyZWFtKTsKIAogCWlmIChkZXZfcHJpdi0+cGVyZi5zcHVyaW91c19yZXBvcnRf
cnMubWlzc2VkKSB7CiAJCURSTV9OT1RFKCIlZCBzcHVyaW91cyBPQSByZXBvcnQgbm90aWNlcyBz
dXBwcmVzc2VkIGR1ZSB0byByYXRlbGltaXRpbmdcbiIsCkBAIC0yMjMwLDcgKzIzODQsOCBAQCBz
dGF0aWMgaW50IGk5MTVfb2Ffc3RyZWFtX2luaXQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0
cmVhbSwKIAkJfQogCX0KIAotCXJldCA9IGdldF9vYV9jb25maWcoZGV2X3ByaXYsIHByb3BzLT5t
ZXRyaWNzX3NldCwgJnN0cmVhbS0+b2FfY29uZmlnKTsKKwlyZXQgPSBpOTE1X3BlcmZfZ2V0X29h
X2NvbmZpZyhkZXZfcHJpdiwgcHJvcHMtPm1ldHJpY3Nfc2V0LAorCQkJCSAgICAgICZzdHJlYW0t
Pm9hX2NvbmZpZyk7CiAJaWYgKHJldCkgewogCQlEUk1fREVCVUcoIkludmFsaWQgT0EgY29uZmln
IGlkPSVpXG4iLCBwcm9wcy0+bWV0cmljc19zZXQpOwogCQlnb3RvIGVycl9jb25maWc7CkBAIC0y
MjY4LDYgKzI0MjMsOCBAQCBzdGF0aWMgaW50IGk5MTVfb2Ffc3RyZWFtX2luaXQoc3RydWN0IGk5
MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKIAkJZ290byBlcnJfZW5hYmxlOwogCX0KIAorCURSTV9E
RUJVRygib3BlbmluZyBzdHJlYW0gb2EgY29uZmlnIHV1aWQ9JXNcbiIsIHN0cmVhbS0+b2FfY29u
ZmlnLT51dWlkKTsKKwogCW11dGV4X3VubG9jaygmZGV2X3ByaXYtPmRybS5zdHJ1Y3RfbXV0ZXgp
OwogCiAJaHJ0aW1lcl9pbml0KCZzdHJlYW0tPnBvbGxfY2hlY2tfdGltZXIsCkBAIC0yMjg3LDcg
KzI0NDQsNyBAQCBzdGF0aWMgaW50IGk5MTVfb2Ffc3RyZWFtX2luaXQoc3RydWN0IGk5MTVfcGVy
Zl9zdHJlYW0gKnN0cmVhbSwKIAlmcmVlX29hX2J1ZmZlcihzdHJlYW0pOwogCiBlcnJfb2FfYnVm
X2FsbG9jOgotCXB1dF9vYV9jb25maWcoZGV2X3ByaXYsIHN0cmVhbS0+b2FfY29uZmlnKTsKKwlp
OTE1X29hX2NvbmZpZ19wdXQoc3RyZWFtLT5vYV9jb25maWcpOwogCiAJaW50ZWxfdW5jb3JlX2Zv
cmNld2FrZV9wdXQoJmRldl9wcml2LT51bmNvcmUsIEZPUkNFV0FLRV9BTEwpOwogCWludGVsX3J1
bnRpbWVfcG1fcHV0KCZkZXZfcHJpdi0+cnVudGltZV9wbSwgc3RyZWFtLT53YWtlcmVmKTsKQEAg
LTI2NTUsNyArMjgxMiw5IEBAIHN0YXRpYyBpbnQgaTkxNV9wZXJmX3JlbGVhc2Uoc3RydWN0IGlu
b2RlICppbm9kZSwgc3RydWN0IGZpbGUgKmZpbGUpCiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gc3RyZWFtLT5kZXZfcHJpdjsKIAogCW11dGV4X2xvY2soJmRldl9wcml2LT5w
ZXJmLmxvY2spOworCiAJaTkxNV9wZXJmX2Rlc3Ryb3lfbG9ja2VkKHN0cmVhbSk7CisKIAltdXRl
eF91bmxvY2soJmRldl9wcml2LT5wZXJmLmxvY2spOwogCiAJLyogUmVsZWFzZSB0aGUgcmVmZXJl
bmNlIHRoZSBwZXJmIHN0cmVhbSBrZXB0IG9uIHRoZSBkcml2ZXIuICovCkBAIC0yNzY0LDYgKzI5
MjMsNyBAQCBpOTE1X3BlcmZfb3Blbl9pb2N0bF9sb2NrZWQoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2LAogCQlnb3RvIGVycl9jdHg7CiAJfQogCisJSU5JVF9MSVNUX0hFQUQoJnN0
cmVhbS0+b2FfY29uZmlnX2Jvcyk7CiAJc3RyZWFtLT5kZXZfcHJpdiA9IGRldl9wcml2OwogCXN0
cmVhbS0+Y3R4ID0gc3BlY2lmaWNfY3R4OwogCkBAIC0zMDkxLDcgKzMyNTEsOCBAQCB2b2lkIGk5
MTVfcGVyZl9yZWdpc3RlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJaWYg
KHJldCkKIAkJZ290byBzeXNmc19lcnJvcjsKIAotCWF0b21pY19zZXQoJmRldl9wcml2LT5wZXJm
LnRlc3RfY29uZmlnLnJlZl9jb3VudCwgMSk7CisJZGV2X3ByaXYtPnBlcmYudGVzdF9jb25maWcu
aTkxNSA9IGRldl9wcml2OworCWtyZWZfaW5pdCgmZGV2X3ByaXYtPnBlcmYudGVzdF9jb25maWcu
cmVmKTsKIAogCWdvdG8gZXhpdDsKIApAQCAtMzM0Nyw3ICszNTA4LDggQEAgaW50IGk5MTVfcGVy
Zl9hZGRfY29uZmlnX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJ
CXJldHVybiAtRU5PTUVNOwogCX0KIAotCWF0b21pY19zZXQoJm9hX2NvbmZpZy0+cmVmX2NvdW50
LCAxKTsKKwlvYV9jb25maWctPmk5MTUgPSBkZXZfcHJpdjsKKwlrcmVmX2luaXQoJm9hX2NvbmZp
Zy0+cmVmKTsKIAogCWlmICghdXVpZF9pc192YWxpZChhcmdzLT51dWlkKSkgewogCQlEUk1fREVC
VUcoIkludmFsaWQgdXVpZCBmb3JtYXQgZm9yIE9BIGNvbmZpZ1xuIik7CkBAIC0zNDQ2LDcgKzM2
MDgsNyBAQCBpbnQgaTkxNV9wZXJmX2FkZF9jb25maWdfaW9jdGwoc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwgdm9pZCAqZGF0YSwKIHN5c2ZzX2VycjoKIAltdXRleF91bmxvY2soJmRldl9wcml2LT5w
ZXJmLm1ldHJpY3NfbG9jayk7CiByZWdfZXJyOgotCXB1dF9vYV9jb25maWcoZGV2X3ByaXYsIG9h
X2NvbmZpZyk7CisJaTkxNV9vYV9jb25maWdfcHV0KG9hX2NvbmZpZyk7CiAJRFJNX0RFQlVHKCJG
YWlsZWQgdG8gYWRkIG5ldyBPQSBjb25maWdcbiIpOwogCXJldHVybiBlcnI7CiB9CkBAIC0zNDgy
LDEzICszNjQ0LDEzIEBAIGludCBpOTE1X3BlcmZfcmVtb3ZlX2NvbmZpZ19pb2N0bChzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAogCiAJcmV0ID0gbXV0ZXhfbG9ja19pbnRlcnJ1
cHRpYmxlKCZkZXZfcHJpdi0+cGVyZi5tZXRyaWNzX2xvY2spOwogCWlmIChyZXQpCi0JCWdvdG8g
bG9ja19lcnI7CisJCXJldHVybiByZXQ7CiAKIAlvYV9jb25maWcgPSBpZHJfZmluZCgmZGV2X3By
aXYtPnBlcmYubWV0cmljc19pZHIsICphcmcpOwogCWlmICghb2FfY29uZmlnKSB7CiAJCURSTV9E
RUJVRygiRmFpbGVkIHRvIHJlbW92ZSB1bmtub3duIE9BIGNvbmZpZ1xuIik7CiAJCXJldCA9IC1F
Tk9FTlQ7Ci0JCWdvdG8gY29uZmlnX2VycjsKKwkJZ290byBlcnJfdW5sb2NrOwogCX0KIAogCUdF
TV9CVUdfT04oKmFyZyAhPSBvYV9jb25maWctPmlkKTsKQEAgLTM0OTgsMTMgKzM2NjAsMTYgQEAg
aW50IGk5MTVfcGVyZl9yZW1vdmVfY29uZmlnX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYs
IHZvaWQgKmRhdGEsCiAKIAlpZHJfcmVtb3ZlKCZkZXZfcHJpdi0+cGVyZi5tZXRyaWNzX2lkciwg
KmFyZyk7CiAKKwltdXRleF91bmxvY2soJmRldl9wcml2LT5wZXJmLm1ldHJpY3NfbG9jayk7CisK
IAlEUk1fREVCVUcoIlJlbW92ZWQgY29uZmlnICVzIGlkPSVpXG4iLCBvYV9jb25maWctPnV1aWQs
IG9hX2NvbmZpZy0+aWQpOwogCi0JcHV0X29hX2NvbmZpZyhkZXZfcHJpdiwgb2FfY29uZmlnKTsK
KwlpOTE1X29hX2NvbmZpZ19wdXQob2FfY29uZmlnKTsKIAotY29uZmlnX2VycjoKKwlyZXR1cm4g
MDsKKworZXJyX3VubG9jazoKIAltdXRleF91bmxvY2soJmRldl9wcml2LT5wZXJmLm1ldHJpY3Nf
bG9jayk7Ci1sb2NrX2VycjoKIAlyZXR1cm4gcmV0OwogfQogCkBAIC0zNjQxLDYgKzM4MDYsNyBA
QCB2b2lkIGk5MTVfcGVyZl9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikK
IAogCWlmIChkZXZfcHJpdi0+cGVyZi5vcHMuZW5hYmxlX21ldHJpY19zZXQpIHsKIAkJSU5JVF9M
SVNUX0hFQUQoJmRldl9wcml2LT5wZXJmLnN0cmVhbXMpOworCiAJCW11dGV4X2luaXQoJmRldl9w
cml2LT5wZXJmLmxvY2spOwogCiAJCW9hX3NhbXBsZV9yYXRlX2hhcmRfbGltaXQgPSAxMDAwICoK
QEAgLTM2NzUsMTAgKzM4NDEsOSBAQCB2b2lkIGk5MTVfcGVyZl9pbml0KHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdikKIAogc3RhdGljIGludCBkZXN0cm95X2NvbmZpZyhpbnQgaWQs
IHZvaWQgKnAsIHZvaWQgKmRhdGEpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gZGF0YTsKIAlzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2NvbmZpZyA9IHA7CiAKLQlw
dXRfb2FfY29uZmlnKGRldl9wcml2LCBvYV9jb25maWcpOworCWk5MTVfb2FfY29uZmlnX3B1dChv
YV9jb25maWcpOwogCiAJcmV0dXJuIDA7CiB9CkBAIC0zNjkyLDcgKzM4NTcsNyBAQCB2b2lkIGk5
MTVfcGVyZl9maW5pKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlpZiAoIWRl
dl9wcml2LT5wZXJmLmluaXRpYWxpemVkKQogCQlyZXR1cm47CiAKLQlpZHJfZm9yX2VhY2goJmRl
dl9wcml2LT5wZXJmLm1ldHJpY3NfaWRyLCBkZXN0cm95X2NvbmZpZywgZGV2X3ByaXYpOworCWlk
cl9mb3JfZWFjaCgmZGV2X3ByaXYtPnBlcmYubWV0cmljc19pZHIsIGRlc3Ryb3lfY29uZmlnLCBO
VUxMKTsKIAlpZHJfZGVzdHJveSgmZGV2X3ByaXYtPnBlcmYubWV0cmljc19pZHIpOwogCiAJdW5y
ZWdpc3Rlcl9zeXNjdGxfdGFibGUoZGV2X3ByaXYtPnBlcmYuc3lzY3RsX2hlYWRlcik7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfcGVyZi5oCmluZGV4IDk1NTQ5ZGU2NTIxMi4uZDYyOTgwYzQ5ZDQyIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuaAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3BlcmYuaApAQCAtMjksNSArMjksMjcgQEAgaW50IGk5MTVfcGVyZl9y
ZW1vdmVfY29uZmlnX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiB2
b2lkIGk5MTVfb2FfaW5pdF9yZWdfc3RhdGUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5l
LAogCQkJICAgIHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKIAkJCSAgICB1MzIgKnJlZ19zdGF0
ZSk7CitpbnQgaTkxNV9wZXJmX2dldF9vYV9jb25maWcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUsCisJCQkgICAgaW50IG1ldHJpY3Nfc2V0LAorCQkJICAgIHN0cnVjdCBpOTE1X29hX2Nv
bmZpZyAqKm91dF9jb25maWcpOworaW50IGk5MTVfcGVyZl9nZXRfb2FfY29uZmlnX2FuZF9ibyhz
dHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAorCQkJCSAgIGludCBtZXRyaWNzX3NldCwK
KwkJCQkgICBzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKipvdXRfY29uZmlnLAorCQkJCSAgIHN0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0ICoqb3V0X29iaik7Cit2b2lkIGk5MTVfb2FfY29uZmlnX3Jl
bGVhc2Uoc3RydWN0IGtyZWYgKnJlZik7CisKK3N0YXRpYyBpbmxpbmUgc3RydWN0IGk5MTVfb2Ff
Y29uZmlnICppOTE1X29hX2NvbmZpZ19nZXQoc3RydWN0IGk5MTVfb2FfY29uZmlnICpvYV9jb25m
aWcpCit7CisJa3JlZl9nZXQoJm9hX2NvbmZpZy0+cmVmKTsKKwlyZXR1cm4gb2FfY29uZmlnOwor
fQorCitzdGF0aWMgaW5saW5lIHZvaWQgaTkxNV9vYV9jb25maWdfcHV0KHN0cnVjdCBpOTE1X29h
X2NvbmZpZyAqb2FfY29uZmlnKQoreworCWlmICghb2FfY29uZmlnKQorCQlyZXR1cm47CisKKwlr
cmVmX3B1dCgmb2FfY29uZmlnLT5yZWYsIGk5MTVfb2FfY29uZmlnX3JlbGVhc2UpOworfQogCiAj
ZW5kaWYgLyogX19JOTE1X1BFUkZfSF9fICovCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50
ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

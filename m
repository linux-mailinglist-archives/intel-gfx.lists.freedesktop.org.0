Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id AC6F444106
	for <lists+intel-gfx@lfdr.de>; Thu, 13 Jun 2019 18:11:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C3B228976D;
	Thu, 13 Jun 2019 16:11:46 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EA5D58976D
 for <Intel-gfx@lists.freedesktop.org>; Thu, 13 Jun 2019 16:11:45 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 13 Jun 2019 09:11:45 -0700
X-ExtLoop1: 1
Received: from yyosef-mobl.ger.corp.intel.com (HELO [10.252.23.42])
 ([10.252.23.42])
 by orsmga003.jf.intel.com with ESMTP; 13 Jun 2019 09:11:44 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, Intel-gfx@lists.freedesktop.org
References: <20190613133539.12620-1-tvrtko.ursulin@linux.intel.com>
 <20190613133539.12620-14-tvrtko.ursulin@linux.intel.com>
 <156043435196.17012.16772763488516296630@skylake-alporthouse-com>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <62e74c65-c538-a22f-5ff7-65c54552e54a@linux.intel.com>
Date: Thu, 13 Jun 2019 17:11:43 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.0
MIME-Version: 1.0
In-Reply-To: <156043435196.17012.16772763488516296630@skylake-alporthouse-com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [RFC 13/28] drm/i915: Convert i915_gem_init_hw to
 intel_gt
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDEzLzA2LzIwMTkgMTQ6NTksIENocmlzIFdpbHNvbiB3cm90ZToKPiBRdW90aW5nIFR2cnRr
byBVcnN1bGluICgyMDE5LTA2LTEzIDE0OjM1OjI0KQo+PiBGcm9tOiBUdnJ0a28gVXJzdWxpbiA8
dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgo+Pgo+PiBNb3JlIHJlbW92YWwgb2YgaW1wbGljaXQg
ZGV2X3ByaXYgZnJvbSB1c2luZyBvbGQgbW1pbyBhY2Nlc3NvcnMuCj4+Cj4+IEFjdHVhbGx5IHRo
ZSB0b3AgbGV2ZWwgZnVuY3Rpb24gcmVtYWlucyBidXQgaXMgc3BsaXQgaW50byBhIHBhcnQgd2hp
Y2gKPj4gd3JpdGVzIHRvIGk5MTUgYW5kIHBhcnQgd2hpY2ggb3BlcmF0ZXMgb24gaW50ZWxfZ3Qg
aW4gb3JkZXIgdG8gaW5pdGlhbGl6ZQo+PiB0aGUgaGFyZHdhcmUuCj4+Cj4+IEd1QyBhbmQgZW5n
aW5lcyBhcmUgdGhlIG9ubHkgb2RkIG9uZXMgb3V0IHJlbWFpbmluZy4KPj4KPj4gU2lnbmVkLW9m
Zi1ieTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KPj4gLS0tCj4+
ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyB8IDY2ICsrKysrKysrKysrKysrKysr
KysrLS0tLS0tLS0tLS0tLQo+PiAgIDEgZmlsZSBjaGFuZ2VkLCA0MCBpbnNlcnRpb25zKCspLCAy
NiBkZWxldGlvbnMoLSkKPj4KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCj4+IGluZGV4IGU1NGNk
MzA1MzRkYy4uYjZmNDUwZTc4MmU3IDEwMDY0NAo+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dlbS5jCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKPj4g
QEAgLTEyMzQsMjggKzEyMzQsMzIgQEAgc3RhdGljIHZvaWQgaW5pdF91bnVzZWRfcmluZ3Moc3Ry
dWN0IGludGVsX2d0ICpndCkKPj4gICAgICAgICAgfQo+PiAgIH0KPj4gICAKPj4gLWludCBpOTE1
X2dlbV9pbml0X2h3KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPj4gK3N0YXRp
YyBpbnQgaW5pdF9odyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQo+PiAgIHsKPj4gKyAgICAgICBzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGd0LT5pOTE1Owo+PiArICAgICAgIHN0cnVjdCBp
bnRlbF91bmNvcmUgKnVuY29yZSA9IGd0LT51bmNvcmU7Cj4+ICAgICAgICAgIGludCByZXQ7Cj4+
ICAgCj4+IC0gICAgICAgZGV2X3ByaXYtPmd0Lmxhc3RfaW5pdF90aW1lID0ga3RpbWVfZ2V0KCk7
Cj4+ICsgICAgICAgZ3QtPmxhc3RfaW5pdF90aW1lID0ga3RpbWVfZ2V0KCk7Cj4+ICAgCj4+ICAg
ICAgICAgIC8qIERvdWJsZSBsYXllciBzZWN1cml0eSBibGFua2V0LCBzZWUgaTkxNV9nZW1faW5p
dCgpICovCj4+IC0gICAgICAgaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9nZXQoJmRldl9wcml2LT51
bmNvcmUsIEZPUkNFV0FLRV9BTEwpOwo+PiArICAgICAgIGludGVsX3VuY29yZV9mb3JjZXdha2Vf
Z2V0KHVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7Cj4+ICAgCj4+IC0gICAgICAgaWYgKEhBU19FRFJB
TShkZXZfcHJpdikgJiYgSU5URUxfR0VOKGRldl9wcml2KSA8IDkpCj4+IC0gICAgICAgICAgICAg
ICBJOTE1X1dSSVRFKEhTV19JRElDUiwgSTkxNV9SRUFEKEhTV19JRElDUikgfCBJRElIQVNITVNL
KDB4ZikpOwo+PiArICAgICAgIGlmIChIQVNfRURSQU0oaTkxNSkgJiYgSU5URUxfR0VOKGk5MTUp
IDwgOSkKPj4gKyAgICAgICAgICAgICAgIGludGVsX3VuY29yZV9ybXcodW5jb3JlLCBIU1dfSURJ
Q1IsIDAsIElESUhBU0hNU0soMHhmKSk7Cj4+ICAgCj4+IC0gICAgICAgaWYgKElTX0hBU1dFTEwo
ZGV2X3ByaXYpKQo+PiAtICAgICAgICAgICAgICAgSTkxNV9XUklURShNSV9QUkVESUNBVEVfUkVT
VUxUXzIsIElTX0hTV19HVDMoZGV2X3ByaXYpID8KPj4gLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgTE9XRVJfU0xJQ0VfRU5BQkxFRCA6IExPV0VSX1NMSUNFX0RJU0FCTEVEKTsKPj4gKyAgICAg
ICBpZiAoSVNfSEFTV0VMTChpOTE1KSkKPj4gKyAgICAgICAgICAgICAgIGludGVsX3VuY29yZV93
cml0ZSh1bmNvcmUsCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTUlfUFJF
RElDQVRFX1JFU1VMVF8yLAo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElT
X0hTV19HVDMoaTkxNSkgPwo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExP
V0VSX1NMSUNFX0VOQUJMRUQgOiBMT1dFUl9TTElDRV9ESVNBQkxFRCk7Cj4+ICAgCj4+ICAgICAg
ICAgIC8qIEFwcGx5IHRoZSBHVCB3b3JrYXJvdW5kcy4uLiAqLwo+PiAtICAgICAgIGludGVsX2d0
X2FwcGx5X3dvcmthcm91bmRzKCZkZXZfcHJpdi0+Z3QpOwo+PiArICAgICAgIGludGVsX2d0X2Fw
cGx5X3dvcmthcm91bmRzKGd0KTsKPiAKPiBXb3VsZCBpdCBiZSB3b3J0aCBtb3ZpbmcgdGhlIGFi
b3ZlIG1taW8gaW50byB3b3JrYXJvdW5kcz8gV2hpbHN0IHlvdSBhcmUKPiBkb2luZyBzb21lIHNw
cmluZyBjbGVhbmluZyA6KQoKVG8gR1Qgd29ya2Fyb3VuZHM/IEFyZSB0aGUgYWJvdmUgdHdvIHdv
cmthcm91bmRzPyBEbyB0aGV5IGhhdmUgYW4gCm9mZmljaWFsIGRlc2lnbmF0aW9uPwoKPj4gICAg
ICAgICAgLyogLi4uYW5kIGRldGVybWluZSB3aGV0aGVyIHRoZXkgYXJlIHN0aWNraW5nLiAqLwo+
PiAtICAgICAgIGludGVsX2d0X3ZlcmlmeV93b3JrYXJvdW5kcygmZGV2X3ByaXYtPmd0LCAiaW5p
dCIpOwo+PiArICAgICAgIGludGVsX2d0X3ZlcmlmeV93b3JrYXJvdW5kcyhndCwgImluaXQiKTsK
Pj4gICAKPj4gLSAgICAgICBpbnRlbF9ndF9pbml0X3N3aXp6bGluZygmZGV2X3ByaXYtPmd0KTsK
Pj4gKyAgICAgICBpbnRlbF9ndF9pbml0X3N3aXp6bGluZyhndCk7Cj4+ICAgCj4+ICAgICAgICAg
IC8qCj4+ICAgICAgICAgICAqIEF0IGxlYXN0IDgzMCBjYW4gbGVhdmUgc29tZSBvZiB0aGUgdW51
c2VkIHJpbmdzCj4+IEBAIC0xMjYzLDQ4ICsxMjY3LDU4IEBAIGludCBpOTE1X2dlbV9pbml0X2h3
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPj4gICAgICAgICAgICogd2lsbCBw
cmV2ZW50IGMzIGVudHJ5LiBNYWtlcyBzdXJlIGFsbCB1bnVzZWQgcmluZ3MKPj4gICAgICAgICAg
ICogYXJlIHRvdGFsbHkgaWRsZS4KPj4gICAgICAgICAgICovCj4+IC0gICAgICAgaW5pdF91bnVz
ZWRfcmluZ3MoJmRldl9wcml2LT5ndCk7Cj4+IC0KPj4gLSAgICAgICBCVUdfT04oIWRldl9wcml2
LT5rZXJuZWxfY29udGV4dCk7Cj4+IC0gICAgICAgcmV0ID0gaTkxNV90ZXJtaW5hbGx5X3dlZGdl
ZChkZXZfcHJpdik7Cj4+IC0gICAgICAgaWYgKHJldCkKPj4gLSAgICAgICAgICAgICAgIGdvdG8g
b3V0Owo+PiArICAgICAgIGluaXRfdW51c2VkX3JpbmdzKGd0KTsKPj4gICAKPj4gLSAgICAgICBy
ZXQgPSBpOTE1X3BwZ3R0X2luaXRfaHcoJmRldl9wcml2LT5ndCk7Cj4+ICsgICAgICAgcmV0ID0g
aTkxNV9wcGd0dF9pbml0X2h3KGd0KTsKPj4gICAgICAgICAgaWYgKHJldCkgewo+PiAgICAgICAg
ICAgICAgICAgIERSTV9FUlJPUigiRW5hYmxpbmcgUFBHVFQgZmFpbGVkICglZClcbiIsIHJldCk7
Cj4+ICAgICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4+ICAgICAgICAgIH0KPj4gICAKPj4gLSAg
ICAgICByZXQgPSBpbnRlbF93b3BjbV9pbml0X2h3KCZkZXZfcHJpdi0+d29wY20pOwo+PiArICAg
ICAgIHJldCA9IGludGVsX3dvcGNtX2luaXRfaHcoJmk5MTUtPndvcGNtKTsKPj4gICAgICAgICAg
aWYgKHJldCkgewo+PiAgICAgICAgICAgICAgICAgIERSTV9FUlJPUigiRW5hYmxpbmcgV09QQ00g
ZmFpbGVkICglZClcbiIsIHJldCk7Cj4+ICAgICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4+ICAg
ICAgICAgIH0KPj4gICAKPj4gICAgICAgICAgLyogV2UgY2FuJ3QgZW5hYmxlIGNvbnRleHRzIHVu
dGlsIGFsbCBmaXJtd2FyZSBpcyBsb2FkZWQgKi8KPj4gLSAgICAgICByZXQgPSBpbnRlbF91Y19p
bml0X2h3KGRldl9wcml2KTsKPj4gKyAgICAgICByZXQgPSBpbnRlbF91Y19pbml0X2h3KGk5MTUp
Owo+IAo+IFNvcnRpbmcgb3V0IHRoZSB1YyBsYXllcmluZyBpcyBhbiBvbmdvaW5nIHRhc2suIEkg
dGhpbmsgaXQgcHJvYmFibHkKPiBtZWFucyBvdXIgaW5pdF9odyBuZWVkcyBzcGxpdHRpbmcuCgpJ
IHRoaW5rIGd1YyBhbmQgaHVjIGNvdWxkIGJlIG1hZGUgY2hpbGRyZW4gb2YgaW50ZWxfZ3Qgc28g
dGhpcyBjb3VsZCBiZSAKY2hhbmdlZCB0byB0YWtlIGd0LiBJdCdzIGEgbG90IG9mIGNvZGUgd2hp
Y2ggSSBhbSBub3Qgc3VyZSBoYXMgbXVjaCB5ZXQgCnRvIGxpdmUgc28gSSBvcHRlZCBub3QgdG8g
dG91Y2ggaXQuCgo+IAo+PiAgICAgICAgICBpZiAocmV0KSB7Cj4+ICAgICAgICAgICAgICAgICAg
RFJNX0VSUk9SKCJFbmFibGluZyB1YyBmYWlsZWQgKCVkKVxuIiwgcmV0KTsKPj4gICAgICAgICAg
ICAgICAgICBnb3RvIG91dDsKPj4gICAgICAgICAgfQo+PiAgIAo+PiAtICAgICAgIGludGVsX21v
Y3NfaW5pdF9sM2NjX3RhYmxlKCZkZXZfcHJpdi0+Z3QpOwo+PiArICAgICAgIGludGVsX21vY3Nf
aW5pdF9sM2NjX3RhYmxlKGd0KTsKPj4gICAKPj4gICAgICAgICAgLyogT25seSB3aGVuIHRoZSBI
VyBpcyByZS1pbml0aWFsaXNlZCwgY2FuIHdlIHJlcGxheSB0aGUgcmVxdWVzdHMgKi8KPj4gLSAg
ICAgICByZXQgPSBpbnRlbF9lbmdpbmVzX3Jlc3VtZShkZXZfcHJpdik7Cj4+ICsgICAgICAgcmV0
ID0gaW50ZWxfZW5naW5lc19yZXN1bWUoaTkxNSk7Cj4+ICAgICAgICAgIGlmIChyZXQpCj4+ICAg
ICAgICAgICAgICAgICAgZ290byBjbGVhbnVwX3VjOwo+PiAgIAo+PiAtICAgICAgIGludGVsX3Vu
Y29yZV9mb3JjZXdha2VfcHV0KCZkZXZfcHJpdi0+dW5jb3JlLCBGT1JDRVdBS0VfQUxMKTsKPj4g
KyAgICAgICBpbnRlbF91bmNvcmVfZm9yY2V3YWtlX3B1dCh1bmNvcmUsIEZPUkNFV0FLRV9BTEwp
Owo+PiAgIAo+PiAtICAgICAgIGludGVsX2VuZ2luZXNfc2V0X3NjaGVkdWxlcl9jYXBzKGRldl9w
cml2KTsKPj4gICAgICAgICAgcmV0dXJuIDA7Cj4+ICAgCj4+ICAgY2xlYW51cF91YzoKPj4gLSAg
ICAgICBpbnRlbF91Y19maW5pX2h3KGRldl9wcml2KTsKPj4gKyAgICAgICBpbnRlbF91Y19maW5p
X2h3KGk5MTUpOwo+PiAgIG91dDoKPj4gLSAgICAgICBpbnRlbF91bmNvcmVfZm9yY2V3YWtlX3B1
dCgmZGV2X3ByaXYtPnVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7Cj4+ICsgICAgICAgaW50ZWxfdW5j
b3JlX2ZvcmNld2FrZV9wdXQodW5jb3JlLCBGT1JDRVdBS0VfQUxMKTsKPj4gKwo+PiArICAgICAg
IHJldHVybiByZXQ7Cj4+ICt9Cj4+ICsKPj4gK2ludCBpOTE1X2dlbV9pbml0X2h3KHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1KQo+IAo+IERvIHdlIGFsc28gc3RhcnQgdG8gcmVjb2duaXNl
IHRoaXMgYXMgaTkxNV9pbml0X2h3KCk/IFRoaXMgaXMgdGhlIGRyaXZlcgo+IHRhbGtpbmcgdG8g
dGhlIGludGVsX2d0IGFuZCBmcmllbmRzLCBub3QgdGhlIGRyaXZlciBzZXR0aW5nIHVwIHRoZSBH
RU0KPiBhcGkuCgpOb3Qgc3VyZS4gVGhlcmUgYXJlIHNvbWUgR0VNIGJpdHMgaW5zaWRlIGxpa2Ug
d2VkZ2VkIHN0YXR1cyBhbmQgCnNjaGVkdWxlciBjYXBzLiBTbyBpdCBzb3VuZHMgcGFzc2FibGUg
dG8gbGVhdmUgaXQgbGlrZSBpdCBpcyBmb3Igbm93LgoKUmVnYXJkcywKClR2cnRrbwpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGlu
ZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

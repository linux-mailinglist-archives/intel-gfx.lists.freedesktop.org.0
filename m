Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 23FC984E8F
	for <lists+intel-gfx@lfdr.de>; Wed,  7 Aug 2019 16:20:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8848D88E33;
	Wed,  7 Aug 2019 14:20:46 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AA49088E33
 for <intel-gfx@lists.freedesktop.org>; Wed,  7 Aug 2019 14:20:44 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 17919474-1500050 
 for <intel-gfx@lists.freedesktop.org>; Wed, 07 Aug 2019 15:20:41 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  7 Aug 2019 15:20:41 +0100
Message-Id: <20190807142041.32699-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0.rc1
MIME-Version: 1.0
Subject: [Intel-gfx] [CI] drm/i915: Isolate i915_getparam_ioctl()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhpcyBnaWFudCBzd2l0Y2ggaGFzIHRlbmRyaWxzIGFsbCBvdGhlciB0aGUgc3RydWN0IGFuZCBk
b2VzIG5vdCBmaXQKaW50byB0aGUgcmVzdCBvZiB0aGUgZHJpdmVyIGJyaW5nIHVwIGFuZCBjb250
cm9sIG9mIGk5MTVfZHJ2LmMuIFB1c2ggaXQKdG8gb25lIHNpZGUgc28gdGhhdCBpdCBjYW4gZ3Jv
dyBpbiBwZWFjZS4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2ls
c29uLmNvLnVrPgpBY2tlZC1ieTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVs
LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgfCAgIDEgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyAgICAgIHwgMTY3IC0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oICAgICAgfCAgIDMg
KwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jIHwgMTY4ICsrKysrKysrKysr
KysrKysrKysrKysrKysrKwogNCBmaWxlcyBjaGFuZ2VkLCAxNzIgaW5zZXJ0aW9ucygrKSwgMTY3
IGRlbGV0aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2V0cGFyYW0uYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxl
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKaW5kZXggOGZlMTU3ZjcxNjE3Li5kOWYx
YjIzYmRmNzcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCkBAIC00MSw2ICs0MSw3IEBAIHN1YmRpci1j
Y2ZsYWdzLXkgKz0gLUkkKHNyY3RyZWUpLyQoc3JjKQogIyBjb3JlIGRyaXZlciBjb2RlCiBpOTE1
LXkgKz0gaTkxNV9kcnYubyBcCiAJICBpOTE1X2lycS5vIFwKKwkgIGk5MTVfZ2V0cGFyYW0ubyBc
CiAJICBpOTE1X3BhcmFtcy5vIFwKIAkgIGk5MTVfcGNpLm8gXAogCSAgaTkxNV9zY2F0dGVybGlz
dC5vIFwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCmluZGV4IGVmZTkwNDYyNmJmNS4uMzQ4MGRiMzZi
NjNmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKQEAgLTYyLDE3ICs2MiwxMiBAQAogCiAjaW5j
bHVkZSAiZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCIKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1faW9j
dGxzLmgiCi0jaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3VzZXIuaCIKICNpbmNsdWRlICJndC9p
bnRlbF9ndC5oIgogI2luY2x1ZGUgImd0L2ludGVsX2d0X3BtLmgiCi0jaW5jbHVkZSAiZ3QvaW50
ZWxfcmVzZXQuaCIKLSNpbmNsdWRlICJndC9pbnRlbF93b3JrYXJvdW5kcy5oIgotI2luY2x1ZGUg
Imd0L3VjL2ludGVsX3VjLmgiCiAKICNpbmNsdWRlICJpOTE1X2RlYnVnZnMuaCIKICNpbmNsdWRl
ICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImk5MTVfaXJxLmgiCi0jaW5jbHVkZSAiaTkxNV9wbXUu
aCIKICNpbmNsdWRlICJpOTE1X3F1ZXJ5LmgiCiAjaW5jbHVkZSAiaTkxNV90cmFjZS5oIgogI2lu
Y2x1ZGUgImk5MTVfdmdwdS5oIgpAQCAtMzQ0LDE2OCArMzM5LDYgQEAgc3RhdGljIHZvaWQgaW50
ZWxfZGV0ZWN0X3BjaChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJcGNpX2Rl
dl9wdXQocGNoKTsKIH0KIAotc3RhdGljIGludCBpOTE1X2dldHBhcmFtX2lvY3RsKHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCi0JCQkgICAgICAgc3RydWN0IGRybV9maWxlICpm
aWxlX3ByaXYpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkx
NShkZXYpOwotCXN0cnVjdCBwY2lfZGV2ICpwZGV2ID0gZGV2X3ByaXYtPmRybS5wZGV2OwotCWNv
bnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1ID0gJlJVTlRJTUVfSU5GTyhkZXZfcHJpdikt
PnNzZXU7Ci0JZHJtX2k5MTVfZ2V0cGFyYW1fdCAqcGFyYW0gPSBkYXRhOwotCWludCB2YWx1ZTsK
LQotCXN3aXRjaCAocGFyYW0tPnBhcmFtKSB7Ci0JY2FzZSBJOTE1X1BBUkFNX0lSUV9BQ1RJVkU6
Ci0JY2FzZSBJOTE1X1BBUkFNX0FMTE9XX0JBVENIQlVGRkVSOgotCWNhc2UgSTkxNV9QQVJBTV9M
QVNUX0RJU1BBVENIOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19DT05TVEFOVFM6Ci0JCS8q
IFJlamVjdCBhbGwgb2xkIHVtcy9kcmkgcGFyYW1zLiAqLwotCQlyZXR1cm4gLUVOT0RFVjsKLQlj
YXNlIEk5MTVfUEFSQU1fQ0hJUFNFVF9JRDoKLQkJdmFsdWUgPSBwZGV2LT5kZXZpY2U7Ci0JCWJy
ZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9SRVZJU0lPTjoKLQkJdmFsdWUgPSBwZGV2LT5yZXZpc2lv
bjsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFNX05VTV9GRU5DRVNfQVZBSUw6Ci0JCXZhbHVl
ID0gZGV2X3ByaXYtPmdndHQubnVtX2ZlbmNlczsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFN
X0hBU19PVkVSTEFZOgotCQl2YWx1ZSA9IGRldl9wcml2LT5vdmVybGF5ID8gMSA6IDA7Ci0JCWJy
ZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfQlNEOgotCQl2YWx1ZSA9ICEhaW50ZWxfZW5naW5l
X2xvb2t1cF91c2VyKGRldl9wcml2LAotCQkJCQkJICAgSTkxNV9FTkdJTkVfQ0xBU1NfVklERU8s
IDApOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fSEFTX0JMVDoKLQkJdmFsdWUgPSAhIWlu
dGVsX2VuZ2luZV9sb29rdXBfdXNlcihkZXZfcHJpdiwKLQkJCQkJCSAgIEk5MTVfRU5HSU5FX0NM
QVNTX0NPUFksIDApOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fSEFTX1ZFQk9YOgotCQl2
YWx1ZSA9ICEhaW50ZWxfZW5naW5lX2xvb2t1cF91c2VyKGRldl9wcml2LAotCQkJCQkJICAgSTkx
NV9FTkdJTkVfQ0xBU1NfVklERU9fRU5IQU5DRSwgMCk7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9Q
QVJBTV9IQVNfQlNEMjoKLQkJdmFsdWUgPSAhIWludGVsX2VuZ2luZV9sb29rdXBfdXNlcihkZXZf
cHJpdiwKLQkJCQkJCSAgIEk5MTVfRU5HSU5FX0NMQVNTX1ZJREVPLCAxKTsKLQkJYnJlYWs7Ci0J
Y2FzZSBJOTE1X1BBUkFNX0hBU19MTEM6Ci0JCXZhbHVlID0gSEFTX0xMQyhkZXZfcHJpdik7Ci0J
CWJyZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfV1Q6Ci0JCXZhbHVlID0gSEFTX1dUKGRldl9w
cml2KTsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19BTElBU0lOR19QUEdUVDoKLQkJ
dmFsdWUgPSBJTlRFTF9QUEdUVChkZXZfcHJpdik7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJB
TV9IQVNfU0VNQVBIT1JFUzoKLQkJdmFsdWUgPSAhIShkZXZfcHJpdi0+Y2Fwcy5zY2hlZHVsZXIg
JiBJOTE1X1NDSEVEVUxFUl9DQVBfU0VNQVBIT1JFUyk7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9Q
QVJBTV9IQVNfU0VDVVJFX0JBVENIRVM6Ci0JCXZhbHVlID0gY2FwYWJsZShDQVBfU1lTX0FETUlO
KTsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFNX0NNRF9QQVJTRVJfVkVSU0lPTjoKLQkJdmFs
dWUgPSBpOTE1X2NtZF9wYXJzZXJfZ2V0X3ZlcnNpb24oZGV2X3ByaXYpOwotCQlicmVhazsKLQlj
YXNlIEk5MTVfUEFSQU1fU1VCU0xJQ0VfVE9UQUw6Ci0JCXZhbHVlID0gaW50ZWxfc3NldV9zdWJz
bGljZV90b3RhbChzc2V1KTsKLQkJaWYgKCF2YWx1ZSkKLQkJCXJldHVybiAtRU5PREVWOwotCQli
cmVhazsKLQljYXNlIEk5MTVfUEFSQU1fRVVfVE9UQUw6Ci0JCXZhbHVlID0gc3NldS0+ZXVfdG90
YWw7Ci0JCWlmICghdmFsdWUpCi0JCQlyZXR1cm4gLUVOT0RFVjsKLQkJYnJlYWs7Ci0JY2FzZSBJ
OTE1X1BBUkFNX0hBU19HUFVfUkVTRVQ6Ci0JCXZhbHVlID0gaTkxNV9tb2RwYXJhbXMuZW5hYmxl
X2hhbmdjaGVjayAmJgotCQkJaW50ZWxfaGFzX2dwdV9yZXNldChkZXZfcHJpdik7Ci0JCWlmICh2
YWx1ZSAmJiBpbnRlbF9oYXNfcmVzZXRfZW5naW5lKGRldl9wcml2KSkKLQkJCXZhbHVlID0gMjsK
LQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19SRVNPVVJDRV9TVFJFQU1FUjoKLQkJdmFs
dWUgPSAwOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fSEFTX1BPT0xFRF9FVToKLQkJdmFs
dWUgPSBIQVNfUE9PTEVEX0VVKGRldl9wcml2KTsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFN
X01JTl9FVV9JTl9QT09MOgotCQl2YWx1ZSA9IHNzZXUtPm1pbl9ldV9pbl9wb29sOwotCQlicmVh
azsKLQljYXNlIEk5MTVfUEFSQU1fSFVDX1NUQVRVUzoKLQkJdmFsdWUgPSBpbnRlbF9odWNfY2hl
Y2tfc3RhdHVzKCZkZXZfcHJpdi0+Z3QudWMuaHVjKTsKLQkJaWYgKHZhbHVlIDwgMCkKLQkJCXJl
dHVybiB2YWx1ZTsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFNX01NQVBfR1RUX1ZFUlNJT046
Ci0JCS8qIFRob3VnaCB3ZSd2ZSBzdGFydGVkIG91ciBudW1iZXJpbmcgZnJvbSAxLCBhbmQgc28g
Y2xhc3MgYWxsCi0JCSAqIGVhcmxpZXIgdmVyc2lvbnMgYXMgMCwgaW4gZWZmZWN0IHRoZWlyIHZh
bHVlIGlzIHVuZGVmaW5lZCBhcwotCQkgKiB0aGUgaW9jdGwgd2lsbCByZXBvcnQgRUlOVkFMIGZv
ciB0aGUgdW5rbm93biBwYXJhbSEKLQkJICovCi0JCXZhbHVlID0gaTkxNV9nZW1fbW1hcF9ndHRf
dmVyc2lvbigpOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fSEFTX1NDSEVEVUxFUjoKLQkJ
dmFsdWUgPSBkZXZfcHJpdi0+Y2Fwcy5zY2hlZHVsZXI7Ci0JCWJyZWFrOwotCi0JY2FzZSBJOTE1
X1BBUkFNX01NQVBfVkVSU0lPTjoKLQkJLyogUmVtZW1iZXIgdG8gYnVtcCB0aGlzIGlmIHRoZSB2
ZXJzaW9uIGNoYW5nZXMhICovCi0JY2FzZSBJOTE1X1BBUkFNX0hBU19HRU06Ci0JY2FzZSBJOTE1
X1BBUkFNX0hBU19QQUdFRkxJUFBJTkc6Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDQlVGMjog
LyogZGVwZW5kcyBvbiBHRU0gKi8KLQljYXNlIEk5MTVfUEFSQU1fSEFTX1JFTEFYRURfRkVOQ0lO
RzoKLQljYXNlIEk5MTVfUEFSQU1fSEFTX0NPSEVSRU5UX1JJTkdTOgotCWNhc2UgSTkxNV9QQVJB
TV9IQVNfUkVMQVhFRF9ERUxUQToKLQljYXNlIEk5MTVfUEFSQU1fSEFTX0dFTjdfU09MX1JFU0VU
OgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfV0FJVF9USU1FT1VUOgotCWNhc2UgSTkxNV9QQVJBTV9I
QVNfUFJJTUVfVk1BUF9GTFVTSDoKLQljYXNlIEk5MTVfUEFSQU1fSEFTX1BJTk5FRF9CQVRDSEVT
OgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19OT19SRUxPQzoKLQljYXNlIEk5MTVfUEFSQU1f
SEFTX0VYRUNfSEFORExFX0xVVDoKLQljYXNlIEk5MTVfUEFSQU1fSEFTX0NPSEVSRU5UX1BIWVNf
R1RUOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19TT0ZUUElOOgotCWNhc2UgSTkxNV9QQVJB
TV9IQVNfRVhFQ19BU1lOQzoKLQljYXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfRkVOQ0U6Ci0JY2Fz
ZSBJOTE1X1BBUkFNX0hBU19FWEVDX0NBUFRVUkU6Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVD
X0JBVENIX0ZJUlNUOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19GRU5DRV9BUlJBWToKLQlj
YXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfU1VCTUlUX0ZFTkNFOgotCQkvKiBGb3IgdGhlIHRpbWUg
YmVpbmcgYWxsIG9mIHRoZXNlIGFyZSBhbHdheXMgdHJ1ZTsKLQkJICogaWYgc29tZSBzdXBwb3J0
ZWQgaGFyZHdhcmUgZG9lcyBub3QgaGF2ZSBvbmUgb2YgdGhlc2UKLQkJICogZmVhdHVyZXMgdGhp
cyB2YWx1ZSBuZWVkcyB0byBiZSBwcm92aWRlZCBmcm9tCi0JCSAqIElOVEVMX0lORk8oKSwgYSBm
ZWF0dXJlIG1hY3JvLCBvciBzaW1pbGFyLgotCQkgKi8KLQkJdmFsdWUgPSAxOwotCQlicmVhazsK
LQljYXNlIEk5MTVfUEFSQU1fSEFTX0NPTlRFWFRfSVNPTEFUSU9OOgotCQl2YWx1ZSA9IGludGVs
X2VuZ2luZXNfaGFzX2NvbnRleHRfaXNvbGF0aW9uKGRldl9wcml2KTsKLQkJYnJlYWs7Ci0JY2Fz
ZSBJOTE1X1BBUkFNX1NMSUNFX01BU0s6Ci0JCXZhbHVlID0gc3NldS0+c2xpY2VfbWFzazsKLQkJ
aWYgKCF2YWx1ZSkKLQkJCXJldHVybiAtRU5PREVWOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFS
QU1fU1VCU0xJQ0VfTUFTSzoKLQkJdmFsdWUgPSBzc2V1LT5zdWJzbGljZV9tYXNrWzBdOwotCQlp
ZiAoIXZhbHVlKQotCQkJcmV0dXJuIC1FTk9ERVY7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJB
TV9DU19USU1FU1RBTVBfRlJFUVVFTkNZOgotCQl2YWx1ZSA9IDEwMDAgKiBSVU5USU1FX0lORk8o
ZGV2X3ByaXYpLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5X2toejsKLQkJYnJlYWs7Ci0JY2FzZSBJ
OTE1X1BBUkFNX01NQVBfR1RUX0NPSEVSRU5UOgotCQl2YWx1ZSA9IElOVEVMX0lORk8oZGV2X3By
aXYpLT5oYXNfY29oZXJlbnRfZ2d0dDsKLQkJYnJlYWs7Ci0JZGVmYXVsdDoKLQkJRFJNX0RFQlVH
KCJVbmtub3duIHBhcmFtZXRlciAlZFxuIiwgcGFyYW0tPnBhcmFtKTsKLQkJcmV0dXJuIC1FSU5W
QUw7Ci0JfQotCi0JaWYgKHB1dF91c2VyKHZhbHVlLCBwYXJhbS0+dmFsdWUpKQotCQlyZXR1cm4g
LUVGQVVMVDsKLQotCXJldHVybiAwOwotfQotCiBzdGF0aWMgaW50IGk5MTVfZ2V0X2JyaWRnZV9k
ZXYoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogewogCWludCBkb21haW4gPSBw
Y2lfZG9tYWluX25yKGRldl9wcml2LT5kcm0ucGRldi0+YnVzKTsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5oCmluZGV4IDdkNDI0ZGRkMzUyMy4uYzk0NzZmMjRmNWMxIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmgKQEAgLTIzOTcsNiArMjM5Nyw5IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBpbnRlbF92Z3B1
X2FjdGl2ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJcmV0dXJuIGRldl9w
cml2LT52Z3B1LmFjdGl2ZTsKIH0KIAoraW50IGk5MTVfZ2V0cGFyYW1faW9jdGwoc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKKwkJCXN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2
KTsKKwogLyogaTkxNV9nZW0uYyAqLwogaW50IGk5MTVfZ2VtX2luaXRfdXNlcnB0cihzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBpOTE1X2dlbV9jbGVhbnVwX3VzZXJw
dHIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2V0cGFyYW0uYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjVk
OTEwMTM3NmEzZAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2V0cGFyYW0uYwpAQCAtMCwwICsxLDE2OCBAQAorLyoKKyAqIFNQRFgtTGljZW5zZS1JZGVudGlm
aWVyOiBNSVQKKyAqLworCisjaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3VzZXIuaCIKKworI2lu
Y2x1ZGUgImk5MTVfZHJ2LmgiCisKK2ludCBpOTE1X2dldHBhcmFtX2lvY3RsKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCisJCQlzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdikK
K3sKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUoZGV2KTsKKwljb25z
dCBzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSA9ICZSVU5USU1FX0lORk8oaTkxNSktPnNzZXU7
CisJZHJtX2k5MTVfZ2V0cGFyYW1fdCAqcGFyYW0gPSBkYXRhOworCWludCB2YWx1ZTsKKworCXN3
aXRjaCAocGFyYW0tPnBhcmFtKSB7CisJY2FzZSBJOTE1X1BBUkFNX0lSUV9BQ1RJVkU6CisJY2Fz
ZSBJOTE1X1BBUkFNX0FMTE9XX0JBVENIQlVGRkVSOgorCWNhc2UgSTkxNV9QQVJBTV9MQVNUX0RJ
U1BBVENIOgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19DT05TVEFOVFM6CisJCS8qIFJlamVj
dCBhbGwgb2xkIHVtcy9kcmkgcGFyYW1zLiAqLworCQlyZXR1cm4gLUVOT0RFVjsKKwljYXNlIEk5
MTVfUEFSQU1fQ0hJUFNFVF9JRDoKKwkJdmFsdWUgPSBpOTE1LT5kcm0ucGRldi0+ZGV2aWNlOwor
CQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fUkVWSVNJT046CisJCXZhbHVlID0gaTkxNS0+ZHJt
LnBkZXYtPnJldmlzaW9uOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fTlVNX0ZFTkNFU19B
VkFJTDoKKwkJdmFsdWUgPSBpOTE1LT5nZ3R0Lm51bV9mZW5jZXM7CisJCWJyZWFrOworCWNhc2Ug
STkxNV9QQVJBTV9IQVNfT1ZFUkxBWToKKwkJdmFsdWUgPSAhIWk5MTUtPm92ZXJsYXk7CisJCWJy
ZWFrOworCWNhc2UgSTkxNV9QQVJBTV9IQVNfQlNEOgorCQl2YWx1ZSA9ICEhaW50ZWxfZW5naW5l
X2xvb2t1cF91c2VyKGk5MTUsCisJCQkJCQkgICBJOTE1X0VOR0lORV9DTEFTU19WSURFTywgMCk7
CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9IQVNfQkxUOgorCQl2YWx1ZSA9ICEhaW50ZWxf
ZW5naW5lX2xvb2t1cF91c2VyKGk5MTUsCisJCQkJCQkgICBJOTE1X0VOR0lORV9DTEFTU19DT1BZ
LCAwKTsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19WRUJPWDoKKwkJdmFsdWUgPSAh
IWludGVsX2VuZ2luZV9sb29rdXBfdXNlcihpOTE1LAorCQkJCQkJICAgSTkxNV9FTkdJTkVfQ0xB
U1NfVklERU9fRU5IQU5DRSwgMCk7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9IQVNfQlNE
MjoKKwkJdmFsdWUgPSAhIWludGVsX2VuZ2luZV9sb29rdXBfdXNlcihpOTE1LAorCQkJCQkJICAg
STkxNV9FTkdJTkVfQ0xBU1NfVklERU8sIDEpOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1f
SEFTX0xMQzoKKwkJdmFsdWUgPSBIQVNfTExDKGk5MTUpOworCQlicmVhazsKKwljYXNlIEk5MTVf
UEFSQU1fSEFTX1dUOgorCQl2YWx1ZSA9IEhBU19XVChpOTE1KTsKKwkJYnJlYWs7CisJY2FzZSBJ
OTE1X1BBUkFNX0hBU19BTElBU0lOR19QUEdUVDoKKwkJdmFsdWUgPSBJTlRFTF9QUEdUVChpOTE1
KTsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19TRU1BUEhPUkVTOgorCQl2YWx1ZSA9
ICEhKGk5MTUtPmNhcHMuc2NoZWR1bGVyICYgSTkxNV9TQ0hFRFVMRVJfQ0FQX1NFTUFQSE9SRVMp
OworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fSEFTX1NFQ1VSRV9CQVRDSEVTOgorCQl2YWx1
ZSA9IGNhcGFibGUoQ0FQX1NZU19BRE1JTik7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9D
TURfUEFSU0VSX1ZFUlNJT046CisJCXZhbHVlID0gaTkxNV9jbWRfcGFyc2VyX2dldF92ZXJzaW9u
KGk5MTUpOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fU1VCU0xJQ0VfVE9UQUw6CisJCXZh
bHVlID0gaW50ZWxfc3NldV9zdWJzbGljZV90b3RhbChzc2V1KTsKKwkJaWYgKCF2YWx1ZSkKKwkJ
CXJldHVybiAtRU5PREVWOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fRVVfVE9UQUw6CisJ
CXZhbHVlID0gc3NldS0+ZXVfdG90YWw7CisJCWlmICghdmFsdWUpCisJCQlyZXR1cm4gLUVOT0RF
VjsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19HUFVfUkVTRVQ6CisJCXZhbHVlID0g
aTkxNV9tb2RwYXJhbXMuZW5hYmxlX2hhbmdjaGVjayAmJgorCQkJaW50ZWxfaGFzX2dwdV9yZXNl
dChpOTE1KTsKKwkJaWYgKHZhbHVlICYmIGludGVsX2hhc19yZXNldF9lbmdpbmUoaTkxNSkpCisJ
CQl2YWx1ZSA9IDI7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9IQVNfUkVTT1VSQ0VfU1RS
RUFNRVI6CisJCXZhbHVlID0gMDsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19QT09M
RURfRVU6CisJCXZhbHVlID0gSEFTX1BPT0xFRF9FVShpOTE1KTsKKwkJYnJlYWs7CisJY2FzZSBJ
OTE1X1BBUkFNX01JTl9FVV9JTl9QT09MOgorCQl2YWx1ZSA9IHNzZXUtPm1pbl9ldV9pbl9wb29s
OworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fSFVDX1NUQVRVUzoKKwkJdmFsdWUgPSBpbnRl
bF9odWNfY2hlY2tfc3RhdHVzKCZpOTE1LT5ndC51Yy5odWMpOworCQlpZiAodmFsdWUgPCAwKQor
CQkJcmV0dXJuIHZhbHVlOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fTU1BUF9HVFRfVkVS
U0lPTjoKKwkJLyogVGhvdWdoIHdlJ3ZlIHN0YXJ0ZWQgb3VyIG51bWJlcmluZyBmcm9tIDEsIGFu
ZCBzbyBjbGFzcyBhbGwKKwkJICogZWFybGllciB2ZXJzaW9ucyBhcyAwLCBpbiBlZmZlY3QgdGhl
aXIgdmFsdWUgaXMgdW5kZWZpbmVkIGFzCisJCSAqIHRoZSBpb2N0bCB3aWxsIHJlcG9ydCBFSU5W
QUwgZm9yIHRoZSB1bmtub3duIHBhcmFtIQorCQkgKi8KKwkJdmFsdWUgPSBpOTE1X2dlbV9tbWFw
X2d0dF92ZXJzaW9uKCk7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9IQVNfU0NIRURVTEVS
OgorCQl2YWx1ZSA9IGk5MTUtPmNhcHMuc2NoZWR1bGVyOworCQlicmVhazsKKworCWNhc2UgSTkx
NV9QQVJBTV9NTUFQX1ZFUlNJT046CisJCS8qIFJlbWVtYmVyIHRvIGJ1bXAgdGhpcyBpZiB0aGUg
dmVyc2lvbiBjaGFuZ2VzISAqLworCWNhc2UgSTkxNV9QQVJBTV9IQVNfR0VNOgorCWNhc2UgSTkx
NV9QQVJBTV9IQVNfUEFHRUZMSVBQSU5HOgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ0JVRjI6
IC8qIGRlcGVuZHMgb24gR0VNICovCisJY2FzZSBJOTE1X1BBUkFNX0hBU19SRUxBWEVEX0ZFTkNJ
Tkc6CisJY2FzZSBJOTE1X1BBUkFNX0hBU19DT0hFUkVOVF9SSU5HUzoKKwljYXNlIEk5MTVfUEFS
QU1fSEFTX1JFTEFYRURfREVMVEE6CisJY2FzZSBJOTE1X1BBUkFNX0hBU19HRU43X1NPTF9SRVNF
VDoKKwljYXNlIEk5MTVfUEFSQU1fSEFTX1dBSVRfVElNRU9VVDoKKwljYXNlIEk5MTVfUEFSQU1f
SEFTX1BSSU1FX1ZNQVBfRkxVU0g6CisJY2FzZSBJOTE1X1BBUkFNX0hBU19QSU5ORURfQkFUQ0hF
UzoKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfTk9fUkVMT0M6CisJY2FzZSBJOTE1X1BBUkFN
X0hBU19FWEVDX0hBTkRMRV9MVVQ6CisJY2FzZSBJOTE1X1BBUkFNX0hBU19DT0hFUkVOVF9QSFlT
X0dUVDoKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfU09GVFBJTjoKKwljYXNlIEk5MTVfUEFS
QU1fSEFTX0VYRUNfQVNZTkM6CisJY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX0ZFTkNFOgorCWNh
c2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19DQVBUVVJFOgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhF
Q19CQVRDSF9GSVJTVDoKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfRkVOQ0VfQVJSQVk6CisJ
Y2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX1NVQk1JVF9GRU5DRToKKwkJLyogRm9yIHRoZSB0aW1l
IGJlaW5nIGFsbCBvZiB0aGVzZSBhcmUgYWx3YXlzIHRydWU7CisJCSAqIGlmIHNvbWUgc3VwcG9y
dGVkIGhhcmR3YXJlIGRvZXMgbm90IGhhdmUgb25lIG9mIHRoZXNlCisJCSAqIGZlYXR1cmVzIHRo
aXMgdmFsdWUgbmVlZHMgdG8gYmUgcHJvdmlkZWQgZnJvbQorCQkgKiBJTlRFTF9JTkZPKCksIGEg
ZmVhdHVyZSBtYWNybywgb3Igc2ltaWxhci4KKwkJICovCisJCXZhbHVlID0gMTsKKwkJYnJlYWs7
CisJY2FzZSBJOTE1X1BBUkFNX0hBU19DT05URVhUX0lTT0xBVElPTjoKKwkJdmFsdWUgPSBpbnRl
bF9lbmdpbmVzX2hhc19jb250ZXh0X2lzb2xhdGlvbihpOTE1KTsKKwkJYnJlYWs7CisJY2FzZSBJ
OTE1X1BBUkFNX1NMSUNFX01BU0s6CisJCXZhbHVlID0gc3NldS0+c2xpY2VfbWFzazsKKwkJaWYg
KCF2YWx1ZSkKKwkJCXJldHVybiAtRU5PREVWOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1f
U1VCU0xJQ0VfTUFTSzoKKwkJdmFsdWUgPSBzc2V1LT5zdWJzbGljZV9tYXNrWzBdOworCQlpZiAo
IXZhbHVlKQorCQkJcmV0dXJuIC1FTk9ERVY7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9D
U19USU1FU1RBTVBfRlJFUVVFTkNZOgorCQl2YWx1ZSA9IDEwMDAgKiBSVU5USU1FX0lORk8oaTkx
NSktPmNzX3RpbWVzdGFtcF9mcmVxdWVuY3lfa2h6OworCQlicmVhazsKKwljYXNlIEk5MTVfUEFS
QU1fTU1BUF9HVFRfQ09IRVJFTlQ6CisJCXZhbHVlID0gSU5URUxfSU5GTyhpOTE1KS0+aGFzX2Nv
aGVyZW50X2dndHQ7CisJCWJyZWFrOworCWRlZmF1bHQ6CisJCURSTV9ERUJVRygiVW5rbm93biBw
YXJhbWV0ZXIgJWRcbiIsIHBhcmFtLT5wYXJhbSk7CisJCXJldHVybiAtRUlOVkFMOworCX0KKwor
CWlmIChwdXRfdXNlcih2YWx1ZSwgcGFyYW0tPnZhbHVlKSkKKwkJcmV0dXJuIC1FRkFVTFQ7CisK
KwlyZXR1cm4gMDsKK30KLS0gCjIuMjMuMC5yYzEKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CF94CB90AF
	for <lists+intel-gfx@lfdr.de>; Fri, 20 Sep 2019 15:31:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A28946E04B;
	Fri, 20 Sep 2019 13:31:44 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 102866E04B
 for <intel-gfx@lists.freedesktop.org>; Fri, 20 Sep 2019 13:31:42 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Sep 2019 06:31:29 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,528,1559545200"; d="scan'208";a="187120712"
Received: from irsmsx110.ger.corp.intel.com ([163.33.3.25])
 by fmsmga008.fm.intel.com with ESMTP; 20 Sep 2019 06:31:28 -0700
Received: from irsmsx105.ger.corp.intel.com ([169.254.7.164]) by
 irsmsx110.ger.corp.intel.com ([169.254.15.189]) with mapi id 14.03.0439.000;
 Fri, 20 Sep 2019 14:31:27 +0100
From: "Lisovskiy, Stanislav" <stanislav.lisovskiy@intel.com>
To: "ville.syrjala@linux.intel.com" <ville.syrjala@linux.intel.com>
Thread-Topic: [Intel-gfx] [PATCH v2] drm/i915: Restrict qgv points which
 don't have enough bandwidth.
Thread-Index: AQHVb6Cx5vCPDe98T0iXYq3b3rq93ac0fCQAgAACoAA=
Date: Fri, 20 Sep 2019 13:31:26 +0000
Message-ID: <b36b13795570008d8f670e82c26c1cf190637ea2.camel@intel.com>
References: <20190920104413.21410-1-stanislav.lisovskiy@intel.com>
 <20190920131950.GZ1208@intel.com>
In-Reply-To: <20190920131950.GZ1208@intel.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.237.72.89]
Content-ID: <931D995695DAE341BBE5FA695F816A09@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH v2] drm/i915: Restrict qgv points which
 don't have enough bandwidth.
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>,
 "Syrjala, Ville" <ville.syrjala@intel.com>, "Peres,
 Martin" <martin.peres@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCAyMDE5LTA5LTIwIGF0IDE2OjE5ICswMzAwLCBWaWxsZSBTeXJqw6Rsw6Qgd3JvdGU6
DQo+IE9uIEZyaSwgU2VwIDIwLCAyMDE5IGF0IDAxOjQ0OjEzUE0gKzAzMDAsIFN0YW5pc2xhdiBM
aXNvdnNraXkgd3JvdGU6DQo+ID4gQWNjb3JkaW5nIHRvIEJTcGVjIDUzOTk4LCB3ZSBzaG91bGQg
dHJ5IHRvDQo+ID4gcmVzdHJpY3QgcWd2IHBvaW50cywgd2hpY2ggY2FuJ3QgcHJvdmlkZQ0KPiA+
IGVub3VnaCBiYW5kd2lkdGggZm9yIGRlc2lyZWQgZGlzcGxheSBjb25maWd1cmF0aW9uLg0KPiA+
IA0KPiA+IEN1cnJlbnRseSB3ZSBhcmUganVzdCBjb21wYXJpbmcgYWdhaW5zdCBhbGwgb2YNCj4g
PiB0aG9zZSBhbmQgdGFrZSBtaW5pbXVtKHdvcnN0IGNhc2UpLg0KPiA+IA0KPiA+IHYyOiBGaXhl
ZCB3cm9uZyBQQ29kZSByZXBseSBtYXNrLCByZW1vdmVkIGhhcmRjb2RlZA0KPiA+ICAgICB2YWx1
ZXMuDQo+ID4gDQo+ID4gU2lnbmVkLW9mZi1ieTogU3RhbmlzbGF2IExpc292c2tpeSA8c3Rhbmlz
bGF2Lmxpc292c2tpeUBpbnRlbC5jb20+DQo+ID4gLS0tDQo+ID4gIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfYncuYyB8IDU4DQo+ID4gKysrKysrKysrKysrKysrKysrKysrKyst
LQ0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oICAgICAgICAgfCAgMyArKw0K
PiA+ICAyIGZpbGVzIGNoYW5nZWQsIDU4IGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pDQo+
ID4gDQo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
YncuYw0KPiA+IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9idy5jDQo+ID4g
aW5kZXggY2Q1OGU0N2FiN2IyLi43NjUzY2JkYjBlZTQgMTAwNjQ0DQo+ID4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9idy5jDQo+ID4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9idy5jDQo+ID4gQEAgLTkwLDYgKzkwLDI2IEBAIHN0YXRp
YyBpbnQgaWNsX3Bjb2RlX3JlYWRfcWd2X3BvaW50X2luZm8oc3RydWN0DQo+ID4gZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYsDQo+ID4gIAlyZXR1cm4gMDsNCj4gPiAgfQ0KPiA+ICANCj4gPiAr
c3RhdGljIGludCBpY2xfcGNvZGVfcmVzdHJpY3RfcWd2X3BvaW50cyhzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZQ0KPiA+ICpkZXZfcHJpdiwgdTMyIHBvaW50c19tYXNrKQ0KPiA+ICt7DQo+ID4gKwlp
bnQgcmV0Ow0KPiA+ICsNCj4gPiArCS8qIGJzcGVjIHNheXMgdG8ga2VlcCByZXRyeWluZyBmb3Ig
YXQgbGVhc3QgMSBtcyAqLw0KPiA+ICsJcmV0ID0gc2tsX3Bjb2RlX3JlcXVlc3QoZGV2X3ByaXYs
DQo+ID4gSUNMX1BDT0RFX1NBR1ZfREVfTUVNX1NTX0NPTkZJRywNCj4gPiArCQkJCXBvaW50c19t
YXNrLA0KPiA+ICsJCQkJR0VOMTFfUENPREVfUE9JTlRTX1JFU1RSSUNURURfTUFTSywNCj4gPiAr
CQkJCUdFTjExX1BDT0RFX1BPSU5UU19SRVNUUklDVEVELA0KPiA+ICsJCQkJMSk7DQo+ID4gKw0K
PiA+ICsJaWYgKHJldCA8IDApIHsNCj4gPiArCQlEUk1fRVJST1IoIkZhaWxlZCB0byBkaXNhYmxl
IHFndiBwb2ludHMgKCVkKVxuIiwgcmV0KTsNCj4gPiArCQlyZXR1cm4gcmV0Ow0KPiA+ICsJfQ0K
PiA+ICsNCj4gPiArCXJldHVybiAwOw0KPiA+ICt9DQo+ID4gKw0KPiA+ICsNCj4gPiAgc3RhdGlj
IGludCBpY2xfZ2V0X3Fndl9wb2ludHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
LA0KPiA+ICAJCQkgICAgICBzdHJ1Y3QgaW50ZWxfcWd2X2luZm8gKnFpKQ0KPiA+ICB7DQo+ID4g
QEAgLTM1NCw3ICszNzQsOSBAQCBpbnQgaW50ZWxfYndfYXRvbWljX2NoZWNrKHN0cnVjdA0KPiA+
IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpDQo+ID4gIAl1bnNpZ25lZCBpbnQgZGF0YV9yYXRl
LCBtYXhfZGF0YV9yYXRlOw0KPiA+ICAJdW5zaWduZWQgaW50IG51bV9hY3RpdmVfcGxhbmVzOw0K
PiA+ICAJc3RydWN0IGludGVsX2NydGMgKmNydGM7DQo+ID4gLQlpbnQgaTsNCj4gPiArCWludCBp
LCByZXQ7DQo+ID4gKwlzdHJ1Y3QgaW50ZWxfcWd2X2luZm8gcWkgPSB7fTsNCj4gPiArCXUzMiBw
b2ludHNfbWFzayA9IDA7DQo+ID4gIA0KPiA+ICAJLyogRklYTUUgZWFybGllciBnZW5zIG5lZWQg
c29tZSBjaGVja3MgdG9vICovDQo+ID4gIAlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA8IDExKQ0K
PiA+IEBAIC0zOTgsMTAgKzQyMCw0MCBAQCBpbnQgaW50ZWxfYndfYXRvbWljX2NoZWNrKHN0cnVj
dA0KPiA+IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpDQo+ID4gIAlkYXRhX3JhdGUgPSBpbnRl
bF9id19kYXRhX3JhdGUoZGV2X3ByaXYsIGJ3X3N0YXRlKTsNCj4gPiAgCW51bV9hY3RpdmVfcGxh
bmVzID0gaW50ZWxfYndfbnVtX2FjdGl2ZV9wbGFuZXMoZGV2X3ByaXYsDQo+ID4gYndfc3RhdGUp
Ow0KPiA+ICANCj4gPiAtCW1heF9kYXRhX3JhdGUgPSBpbnRlbF9tYXhfZGF0YV9yYXRlKGRldl9w
cml2LA0KPiA+IG51bV9hY3RpdmVfcGxhbmVzKTsNCj4gPiAtDQo+ID4gIAlkYXRhX3JhdGUgPSBE
SVZfUk9VTkRfVVAoZGF0YV9yYXRlLCAxMDAwKTsNCj4gPiAgDQo+ID4gKwlyZXQgPSBpY2xfZ2V0
X3Fndl9wb2ludHMoZGV2X3ByaXYsICZxaSk7DQo+ID4gKwlpZiAocmV0IDwgMCkgew0KPiA+ICsJ
CWdvdG8gZmFsbGJhY2s7DQo+IA0KPiBJZiB3ZSBkb24ndCBoYXZlIHRoYXQgd2UgZG9uJ3QgaGF2
ZSBhbnkgaWRlYSBhYm91dCBidyBsaW1pdHMuIFNvDQo+IHByb2JhYmx5IGp1c3QgcmV0dXJuIDAg
aGVyZS4NCj4gDQo+ID4gKwl9DQo+ID4gKw0KPiA+ICsJZm9yIChpID0gMDsgaSA8IHFpLm51bV9w
b2ludHM7IGkrKykgew0KPiA+ICsJCW1heF9kYXRhX3JhdGUgPSBpY2xfbWF4X2J3KGRldl9wcml2
LCBudW1fYWN0aXZlX3BsYW5lcywNCj4gPiBpKTsNCj4gPiArCQlpZiAobWF4X2RhdGFfcmF0ZSA8
IGRhdGFfcmF0ZSkgew0KPiA+ICsJCQlEUk1fREVCVUdfS01TKCJRR1YgcG9pbnQgJWQ6IG1heCBi
dyAlZCByZXF1aXJlZA0KPiA+ICVkIHJlc3RyaWN0ZWRcbiIsDQo+ID4gKwkJCQkgICAgICBpLCBt
YXhfZGF0YV9yYXRlLCBkYXRhX3JhdGUpOw0KPiA+ICsJCQlwb2ludHNfbWFzayB8PSAxIDw8IGk7
DQo+IA0KPiBJIHRoaW5rIGp1c3QgbWFya2luZyB0aGUgYWNjZXB0ZWQgbGV2ZWxzIGluIHRoZSBt
YXNrIHdvdWxkIG1ha2UNCj4gdGhpbmdzDQo+IHNpbXBsZXIuLi4NCj4gDQo+ID4gKwkJfSBlbHNl
DQo+ID4gKwkJCURSTV9ERUJVR19LTVMoIlFHViBwb2ludCAlZDogbWF4IGJ3ICVkIHJlcXVpcmVk
DQo+ID4gJWQgdW5yZXN0cmljdGVkXG4iLA0KPiA+ICsJCQkJICAgICAgaSwgbWF4X2RhdGFfcmF0
ZSwgZGF0YV9yYXRlKTsNCj4gPiArCX0NCj4gPiArDQo+ID4gKwlpZiAocG9pbnRzX21hc2sgPj0g
KCgxIDw8IHFpLm51bV9wb2ludHMpIC0gMSkpIHsNCj4gDQo+IC4uLiBlZy4gdGhpcyBjYW4gdGhl
biBqdXN0IGJlICdpZiAocG9pbnRzX21hc2sgPT0gMCknDQo+IA0KPiA+ICsJCURSTV9ERUJVR19L
TVMoIkNvdWxkIG5vdCBmaW5kIGFueSBzdWl0YWJsZSBRR1YNCj4gPiBwb2ludHNcbiIpOw0KPiA+
ICsJCXJldHVybiAtRUlOVkFMOw0KPiA+ICsJfQ0KPiA+ICsNCj4gPiArCXJldCA9IGljbF9wY29k
ZV9yZXN0cmljdF9xZ3ZfcG9pbnRzKGRldl9wcml2LCBwb2ludHNfbWFzayk7DQo+ID4gKwlpZiAo
cmV0IDwgMCkgew0KPiA+ICsJCURSTV9ERUJVR19LTVMoIkNvdWxkIG5vdCByZXN0cmljdCByZXF1
aXJlZCBncXYNCj4gPiBwb2ludHMoJWQpXG4iLCByZXQpOw0KPiA+ICsJCWdvdG8gZmFsbGJhY2s7
DQo+IA0KPiBTZWVtcyBsaWtlIGRlYWQgY29kZSB0byBtZS4NCj4gDQo+IFdlJ2xsIG5lZWQgdG8g
YWNjb3VudCBmb3IgdGhlIFNBR1YgeWVzL25vIGluIGhlcmUgYXMgd2VsbC4gVGhhdCBpcywNCj4g
aWYNCj4gU0FHViBpcyBvZmYgZHVlIHRvIHdhdGVybWFya3Mgd2UnbGwgbmVlZCB0byByZXN0cmlj
dCB0aGluZ3MgdG8gdGhlDQo+IGhpZ2hlc3QgUUdWIHBvaW50IG9ubHkuIEFsc28gdXNpbmcgYm90
aCB0aGUgUUdWIHBvaW50IHJlc3RyaWN0aW9uDQo+IHBjb2RlIGNvbW1hbmQgYW5kIHRoZSBsZWdh
Y3kgU0FHViBwY29kZSBjb21tYW5kIGF0IHRoZSBzYW1lIHRpbWUNCj4gc291bmRzDQo+IHJhdGhl
ciByaXNreSB0byBtZS4gSSBzdXNwZWN0IHBjb2RlIG1pZ2h0IG5vdCBleHBlY3QgdGhhdC4gU28g
d2UgbmVlZA0KPiB0byByZXdvcmsgdGhpcyBvbiBhIHNsaWdodGx5IGJpZ2dlciBzY2FsZS4NCg0K
V2VsbCwgSSBzdXNwZWN0ZWQgdGhhdCBpdCdzIG5vdCBnb2luZyB0byBiZSB0aGF0IGVhc3kuLg0K
DQpQcm9iYWJseSB5b3UgbWVhbiB0aGF0IHRoaXMgaGFzIHRvIGJlIHNvbWVob3cgcHV0IGluIHN5
bmMgd2l0aA0KaW50ZWxfZGlzYWJsZV9zYWd2IGNhbGxzLCBzbyB3ZSBuZWVkIHRvIG11dHVhbGx5
IGV4Y2x1ZGUgdGhvc2UNCmFuZC9vciB0YWtlIGludG8gYWNjb3VudC4NCg0KDQo+IA0KPiA+ICsJ
fQ0KPiA+ICsNCj4gPiArCXJldHVybiAwOw0KPiA+ICsNCj4gPiArZmFsbGJhY2s6DQo+ID4gKwlt
YXhfZGF0YV9yYXRlID0gaW50ZWxfbWF4X2RhdGFfcmF0ZShkZXZfcHJpdiwNCj4gPiBudW1fYWN0
aXZlX3BsYW5lcyk7DQo+ID4gKw0KPiA+ICAJaWYgKGRhdGFfcmF0ZSA+IG1heF9kYXRhX3JhdGUp
IHsNCj4gPiAgCQlEUk1fREVCVUdfS01TKCJCYW5kd2lkdGggJXUgTUIvcyBleGNlZWRzIG1heCBh
dmFpbGFibGUNCj4gPiAlZCBNQi9zICglZCBhY3RpdmUgcGxhbmVzKVxuIiwNCj4gPiAgCQkJICAg
ICAgZGF0YV9yYXRlLCBtYXhfZGF0YV9yYXRlLA0KPiA+IG51bV9hY3RpdmVfcGxhbmVzKTsNCj4g
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaA0KPiA+IGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaA0KPiA+IGluZGV4IGJmMzdlY2ViYzgyZi4uZmUz
MjdmZWU4NzgxIDEwMDY0NA0KPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVn
LmgNCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oDQo+ID4gQEAgLTg4
NDUsNiArODg0NSw3IEBAIGVudW0gew0KPiA+ICAjZGVmaW5lICAgSUNMX1BDT0RFX01FTV9TVUJT
WVNZU1RFTV9JTkZPCTB4ZA0KPiA+ICAjZGVmaW5lICAgICBJQ0xfUENPREVfTUVNX1NTX1JFQURf
R0xPQkFMX0lORk8JKDB4MCA8PCA4KQ0KPiA+ICAjZGVmaW5lICAgICBJQ0xfUENPREVfTUVNX1NT
X1JFQURfUUdWX1BPSU5UX0lORk8ocG9pbnQpCSgoKHBvaW4NCj4gPiB0KSA8PCAxNikgfCAoMHgx
IDw8IDgpKQ0KPiA+ICsjZGVmaW5lICAgSUNMX1BDT0RFX1NBR1ZfREVfTUVNX1NTX0NPTkZJRwkw
eGUNCj4gPiAgI2RlZmluZSAgIEdFTjZfUENPREVfUkVBRF9EX0NPTVAJCTB4MTANCj4gPiAgI2Rl
ZmluZSAgIEdFTjZfUENPREVfV1JJVEVfRF9DT01QCQkweDExDQo+ID4gICNkZWZpbmUgICBIU1df
UENPREVfREVfV1JJVEVfRlJFUV9SRVEJCTB4MTcNCj4gPiBAQCAtODg1Niw2ICs4ODU3LDggQEAg
ZW51bSB7DQo+ID4gICNkZWZpbmUgICAgIEdFTjlfU0FHVl9ESVNBQkxFCQkJMHgwDQo+ID4gICNk
ZWZpbmUgICAgIEdFTjlfU0FHVl9JU19ESVNBQkxFRAkJMHgxDQo+ID4gICNkZWZpbmUgICAgIEdF
TjlfU0FHVl9FTkFCTEUJCQkweDMNCj4gPiArI2RlZmluZSBHRU4xMV9QQ09ERV9QT0lOVFNfUkVT
VFJJQ1RFRAkJMHgwDQo+ID4gKyNkZWZpbmUgR0VOMTFfUENPREVfUE9JTlRTX1JFU1RSSUNURURf
TUFTSwkweDENCj4gPiAgI2RlZmluZSBHRU42X1BDT0RFX0RBVEEJCQkJX01NSU8oMHgxMzgxMjgp
DQo+ID4gICNkZWZpbmUgICBHRU42X1BDT0RFX0ZSRVFfSUFfUkFUSU9fU0hJRlQJOA0KPiA+ICAj
ZGVmaW5lICAgR0VONl9QQ09ERV9GUkVRX1JJTkdfUkFUSU9fU0hJRlQJMTYNCj4gPiAtLSANCj4g
PiAyLjE3LjENCj4gPiANCj4gDQo+ICA+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fDQo+ID4gSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdA0KPiA+IEludGVsLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcNCj4gPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA0KPiANCj4gDQpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVs
LWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

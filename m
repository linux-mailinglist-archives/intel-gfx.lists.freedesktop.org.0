Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 868FF300E52
	for <lists+intel-gfx@lfdr.de>; Fri, 22 Jan 2021 21:56:52 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E74BD6EA53;
	Fri, 22 Jan 2021 20:56:50 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BDF896EA53
 for <intel-gfx@lists.freedesktop.org>; Fri, 22 Jan 2021 20:56:48 +0000 (UTC)
IronPort-SDR: QXXiODKDOvdD71AyMf9Lrv5BAjZGrBQbNaxVd2cy0mKV3d7F/dp638+iJxK4135a5jCZe/h59h
 BALZpHfReB+Q==
X-IronPort-AV: E=McAfee;i="6000,8403,9872"; a="264326591"
X-IronPort-AV: E=Sophos;i="5.79,367,1602572400"; d="scan'208";a="264326591"
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga105.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 22 Jan 2021 12:56:46 -0800
IronPort-SDR: 8Kc0jhx8CDFXgdaMsChxpp9vMB1mLBDigImDOC+TnbZGZCzutguSEJdRatJvN6fO8BzCCxoMwB
 tkUNClER9P3Q==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.79,367,1602572400"; d="scan'208";a="348412028"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by fmsmga007.fm.intel.com with SMTP; 22 Jan 2021 12:56:43 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 22 Jan 2021 22:56:43 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 22 Jan 2021 22:56:28 +0200
Message-Id: <20210122205633.18492-4-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20210122205633.18492-1-ville.syrjala@linux.intel.com>
References: <20210122205633.18492-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 3/8] drm/i915: Introduce
 intel_dbuf_slice_size()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClB1
dCB0aGUgY29kZSBpbnRvIGEgZnVuY3Rpb24gd2l0aCBhIGRlc2NyaXB0aXZlIG5hbWUuIEFsc28g
cmVsb2NhdGUKdGhlIGNvZGUgYSBiaXQgaGVscCBmdXR1cmUgd29yay4KClJldmlld2VkLWJ5OiBT
dGFuaXNsYXYgTGlzb3Zza2l5IDxzdGFuaXNsYXYubGlzb3Zza2l5QGludGVsLmNvbT4KU2lnbmVk
LW9mZi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4K
LS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jIHwgMzYgKysrKysrKysrKysrKysr
KysrKy0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5oIHwgIDEg
LQogMiBmaWxlcyBjaGFuZ2VkLCAyMSBpbnNlcnRpb25zKCspLCAxNiBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfcG0uYwppbmRleCA0ZjYwYWRmOWQzOWIuLjEwMGVjMzdlYzQ4MyAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9wbS5jCkBAIC00MDE3LDYgKzQwMTcsMjQgQEAgc3RhdGljIGludCBp
bnRlbF9jb21wdXRlX3NhZ3ZfbWFzayhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkK
IAlyZXR1cm4gMDsKIH0KIAorc3RhdGljIGludCBpbnRlbF9kYnVmX3NpemUoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2KQoreworCWludCBkZGJfc2l6ZSA9IElOVEVMX0lORk8oZGV2
X3ByaXYpLT5kZGJfc2l6ZTsKKworCWRybV9XQVJOX09OKCZkZXZfcHJpdi0+ZHJtLCBkZGJfc2l6
ZSA9PSAwKTsKKworCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwgMTEpCisJCXJldHVybiBkZGJf
c2l6ZSAtIDQ7IC8qIDQgYmxvY2tzIGZvciBieXBhc3MgcGF0aCBhbGxvY2F0aW9uICovCisKKwly
ZXR1cm4gZGRiX3NpemU7Cit9CisKK3N0YXRpYyBpbnQgaW50ZWxfZGJ1Zl9zbGljZV9zaXplKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3sKKwlyZXR1cm4gaW50ZWxfZGJ1Zl9z
aXplKGRldl9wcml2KSAvCisJCUlOVEVMX0lORk8oZGV2X3ByaXYpLT5udW1fc3VwcG9ydGVkX2Ri
dWZfc2xpY2VzOworfQorCiAvKgogICogQ2FsY3VsYXRlIGluaXRpYWwgREJ1ZiBzbGljZSBvZmZz
ZXQsIGJhc2VkIG9uIHNsaWNlIHNpemUKICAqIGFuZCBtYXNrKGkuZSBpZiBzbGljZSBzaXplIGlz
IDEwMjQgYW5kIHNlY29uZCBzbGljZSBpcyBlbmFibGVkCkBAIC00MDM4LDIyICs0MDU2LDExIEBA
IGljbF9nZXRfZmlyc3RfZGJ1Zl9zbGljZV9vZmZzZXQodTMyIGRidWZfc2xpY2VfbWFzaywKIAly
ZXR1cm4gb2Zmc2V0OwogfQogCi11MTYgaW50ZWxfZ2V0X2RkYl9zaXplKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdikKLXsKLQl1MTYgZGRiX3NpemUgPSBJTlRFTF9JTkZPKGRldl9w
cml2KS0+ZGRiX3NpemU7Ci0JZHJtX1dBUk5fT04oJmRldl9wcml2LT5kcm0sIGRkYl9zaXplID09
IDApOwotCi0JaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPCAxMSkKLQkJcmV0dXJuIGRkYl9zaXpl
IC0gNDsgLyogNCBibG9ja3MgZm9yIGJ5cGFzcyBwYXRoIGFsbG9jYXRpb24gKi8KLQotCXJldHVy
biBkZGJfc2l6ZTsKLX0KLQogdTMyIHNrbF9kZGJfZGJ1Zl9zbGljZV9tYXNrKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJCSAgICBjb25zdCBzdHJ1Y3Qgc2tsX2RkYl9lbnRy
eSAqZW50cnkpCiB7CiAJdTMyIHNsaWNlX21hc2sgPSAwOwotCXUxNiBkZGJfc2l6ZSA9IGludGVs
X2dldF9kZGJfc2l6ZShkZXZfcHJpdik7CisJdTE2IGRkYl9zaXplID0gaW50ZWxfZGJ1Zl9zaXpl
KGRldl9wcml2KTsKIAl1MTYgbnVtX3N1cHBvcnRlZF9zbGljZXMgPSBJTlRFTF9JTkZPKGRldl9w
cml2KS0+bnVtX3N1cHBvcnRlZF9kYnVmX3NsaWNlczsKIAl1MTYgc2xpY2Vfc2l6ZSA9IGRkYl9z
aXplIC8gbnVtX3N1cHBvcnRlZF9zbGljZXM7CiAJdTE2IHN0YXJ0X3NsaWNlOwpAQCAtNDEzNCw5
ICs0MTQxLDggQEAgc2tsX2RkYl9nZXRfcGlwZV9hbGxvY2F0aW9uX2xpbWl0cyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCXJldHVybiAwOwogCX0KIAotCWRkYl9zaXplID0g
aW50ZWxfZ2V0X2RkYl9zaXplKGRldl9wcml2KTsKLQotCXNsaWNlX3NpemUgPSBkZGJfc2l6ZSAv
IElOVEVMX0lORk8oZGV2X3ByaXYpLT5udW1fc3VwcG9ydGVkX2RidWZfc2xpY2VzOworCWRkYl9z
aXplID0gaW50ZWxfZGJ1Zl9zaXplKGRldl9wcml2KTsKKwlzbGljZV9zaXplID0gaW50ZWxfZGJ1
Zl9zbGljZV9zaXplKGRldl9wcml2KTsKIAogCS8qCiAJICogSWYgdGhlIHN0YXRlIGRvZXNuJ3Qg
Y2hhbmdlIHRoZSBhY3RpdmUgQ1JUQydzIG9yIHRoZXJlIGlzIG5vCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
cG0uaAppbmRleCBlYWI4M2UyNTFkZDUuLjAwOTEwYmMwMTQwNyAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF9wbS5oCkBAIC00MCw3ICs0MCw2IEBAIHZvaWQgc2tsX3BpcGVfZGRiX2dldF9od19zdGF0ZShz
dHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAkJCSAgICAgICBzdHJ1Y3Qgc2tsX2RkYl9lbnRyeSAq
ZGRiX3ksCiAJCQkgICAgICAgc3RydWN0IHNrbF9kZGJfZW50cnkgKmRkYl91dik7CiB2b2lkIHNr
bF9kZGJfZ2V0X2h3X3N0YXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7Ci11
MTYgaW50ZWxfZ2V0X2RkYl9zaXplKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7
CiB1MzIgc2tsX2RkYl9kYnVmX3NsaWNlX21hc2soc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2LAogCQkJICAgIGNvbnN0IHN0cnVjdCBza2xfZGRiX2VudHJ5ICplbnRyeSk7CiB2b2lk
IHNrbF9waXBlX3dtX2dldF9od19zdGF0ZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKLS0gCjIu
MjYuMgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50
ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

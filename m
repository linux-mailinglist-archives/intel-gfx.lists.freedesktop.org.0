Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0E1D328F1F1
	for <lists+intel-gfx@lfdr.de>; Thu, 15 Oct 2020 14:21:49 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 17B0D6ECC4;
	Thu, 15 Oct 2020 12:21:44 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (unknown [77.68.26.236])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 85D0E6ECC5
 for <intel-gfx@lists.freedesktop.org>; Thu, 15 Oct 2020 12:21:42 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 22724266-1500050 
 for <intel-gfx@lists.freedesktop.org>; Thu, 15 Oct 2020 13:21:39 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 15 Oct 2020 13:21:37 +0100
Message-Id: <20201015122138.30161-3-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20201015122138.30161-1-chris@chris-wilson.co.uk>
References: <20201015122138.30161-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 3/4] drm/i915: Enable eLLC caching of display
 buffers for SKL+
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClNp
bmNlIFNLTCB0aGUgZUxMQyBoYXMgYmVlbiBzaXR0aW5nIG9uIHRoZSBmYXIgc2lkZSBvZiB0aGUg
c3lzdGVtCmFnZW50LCBtZWFuaW5nIHRoZSBkaXNwbGF5IGVuZ2luZSBjYW4gdXRpbGl6ZSBpdC4g
TGV0J3MgZW5hYmxlIHRoYXQuCgpJIGNob3NlIFdCIGZvciB0aGUgY2FjaGluZyBtb2RlLCBiZWNh
dXNlIG15IG51bWJlcnMgYXJlIGluZGljYXRpbmcKdGhhdCBXVCBtaWdodCBhY3R1YWxseSBiZSBX
QiBhbmQgV0MgbWlnaHQgYWN0dWFsbHkgYmUgVUMuIEknbSBub3QKMTAwJSBzdXJlIHRoYXQgaXMg
aW5kZWVkIHRoZSBjYXNlIGJ1dCBhdCBsZWFzdCBteSBzaW1wbGUgcmVuZGVyY29weQpiYXNlZCBi
ZW5jaG1hcmsgZGlkbid0IHNlZSBhbnkgZGlmZmVyZW5jZSBpbiBwZXJmb3JtYW5jZS4KCkFsc28g
aWYgSSBjb25maWd1cmUgdGhpbmdzIHRvIGRvIExMQ2VMTEMrV1QgSSBzdGlsbCBnZXQgY2FjaGUg
ZGlydApvbiBteSBzY3JlZW4sIHN1Z2dlc3RpbmcgdGhhdCBpcyBpbiBmYWN0IG9wZXJhdGluZyBp
biBXQiBtb2RlCmFueXdheS4gVGhpcyBpcyBhbHNvIHRoZSByZWFzb24gSSBoYWQgdG8gZml4IHRo
ZSBNT0NTIHRhcmdldCBjYWNoZQp0byByZWFsbHkgc2F5IFBURSByYXRoZXIgdGhhbiBMTEMrZUxM
Qy4KU2luY2UgU0tMIHRoZSBlTExDIGhhcyBiZWVuIHNpdHRpbmcgb24gdGhlIGZhciBzaWRlIG9m
IHRoZSBzeXN0ZW0gYWdlbnQsCm1lYW5pbmcgdGhlIGRpc3BsYXkgZW5naW5lIGNhbiB1dGlsaXpl
IGl0LiBMZXQncyBlbmFibGUgdGhhdC4KCkVlcm8ncyBlYXJsaWVyIGJlbmNobWFya3MgbnVtYmVy
czoKIiogUmVzdWx0cyBpbiBHZnhCZW5jaCBhbmQgVW5pZ2luZSAoVmFsbGV5L0hlYXZlbikgdGVz
dHMgd2VyZSB3aXRoaW4gZGFpbHkKICAgdmFyaWF0aW9uIG9uIHRoZSB0ZXN0ZWQgU0tMIG1hY2hp
bmVzCgogKiBTS0wgR1Q0ZSAoMTI4TUIgZUxMQykgLyBXYXlsYW5kIC8gV2VzdG9uOgogICArMTUt
MjAlIFN5bk1hcmsgVGV4TWVtNTEyICg1MTJNQiBvZiB0ZXh0dXJlcykKICAgKzQtNiUgU3luTWFy
ayBUZXJyYWluRmx5KiwgQ1NDbG90aCwgU2hNYXBWc20KICAgLTUtMTAlIFN5bk1hcmsgVGV4TWVt
MTI4ICgxMjhNQiBvZiB0ZXh0dXJlcykKCiAqIFNLTCBHVDNlICg2NE1CIGVMTEMpIC8gWG9yZyAv
IFVuaXR5OgogICArNC04JSBHcHVUZXN0IFRyaWFuZ2xlIGZ1bGxzY3JlZW4gKEZ1bGxIRCkKICAg
LTUtMTAlIEdwdVRlc3QgVHJpYW5nbGUgd2luZG93ZWQgKDEvMiBzY3JlZW4pCgogKiBTS0wgR1Qy
IChubyBlTExDKSAvIFhvcmcgLyBVbml0eToKICAgKiBTb21lIG9mIHRoZSBoaWdoZXIgRlBTIFN5
bk1hcmsgcGl4ZWwgYW5kIHZlcnRleCBzaGFkZXIgdGVzdHMKICAgICBhcmUgZmV3IHBlcmNlbnQg
aGlnaGVyLCBtb3JlIHRoYW4gZGFpbHkgdmFyaWFuY2UKICAgPT4gRG8geW91IHNlZSBhbnkgcmVh
c29uIHdoeSB0aGlzIG1hY2hpbmUgd291bGQgYmUgaW1wYWN0ZWQKICAgICAgYWx0aG91Z2ggaXQg
ZG9lc24ndCBlTExDPyIKCkNhdmVhdHM6Ci0gU3RpbGwgaGF2ZW4ndCB0ZXN0ZWQgd2l0aCBhIHBy
aW1lIHNldHVwCi0gU3RpbGwgbm90IGVudGlyZWx5IHN1cmUgdGhpcyBhIGdvb2QgaWRlYSwgYnV0
IEkndmUgYmVlbgogIHVzaW5nIGl0IG9uIG15IGNmbCBhbnl3YXkgOikKCnYyOiBTcGxpdCB0aGUg
TU9DUyBQVEUgY2hhbmdlIG91dAoKQ2M6IEVlcm8gVGFtbWluZW4gPGVlcm8udC50YW1taW5lbkBp
bnRlbC5jb20+ClJldmlld2VkLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5j
by51az4KU2lnbmVkLW9mZi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4
LmludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxz
b24uY28udWs+Ckxpbms6IGh0dHBzOi8vcGF0Y2h3b3JrLmZyZWVkZXNrdG9wLm9yZy9wYXRjaC9t
c2dpZC8yMDIwMTAwNzEyMDMyOS4xNzA3Ni0zLXZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29t
Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3R0LmMgfCAxMCArKysrKysrKy0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oICAgICB8ICAzICstLQogMiBmaWxlcyBj
aGFuZ2VkLCA5IGluc2VydGlvbnMoKyksIDQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3R0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ndHQuYwppbmRleCAzZjExMTRiNThiMDEuLjdiZmU5MDcyYmU5YSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3R0LmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZ3R0LmMKQEAgLTMyNCw3ICszMjQsNyBAQCBzdGF0aWMgdm9pZCBj
bmxfc2V0dXBfcHJpdmF0ZV9wcGF0KHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSkKIAkJCSAg
IEdFTjhfUFBBVF9XQyB8IEdFTjhfUFBBVF9MTENFTExDKTsKIAlpbnRlbF91bmNvcmVfd3JpdGUo
dW5jb3JlLAogCQkJICAgR0VOMTBfUEFUX0lOREVYKDIpLAotCQkJICAgR0VOOF9QUEFUX1dUIHwg
R0VOOF9QUEFUX0xMQ0VMTEMpOworCQkJICAgR0VOOF9QUEFUX1dCIHwgR0VOOF9QUEFUX0VMTENf
T1ZFUlJJREUpOwogCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCiAJCQkgICBHRU4xMF9QQVRf
SU5ERVgoMyksCiAJCQkgICBHRU44X1BQQVRfVUMpOwpAQCAtMzQ5LDE3ICszNDksMjMgQEAgc3Rh
dGljIHZvaWQgY25sX3NldHVwX3ByaXZhdGVfcHBhdChzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNv
cmUpCiAgKi8KIHN0YXRpYyB2b2lkIGJkd19zZXR1cF9wcml2YXRlX3BwYXQoc3RydWN0IGludGVs
X3VuY29yZSAqdW5jb3JlKQogeworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdW5j
b3JlLT5pOTE1OwogCXU2NCBwYXQ7CiAKIAlwYXQgPSBHRU44X1BQQVQoMCwgR0VOOF9QUEFUX1dC
IHwgR0VOOF9QUEFUX0xMQykgfAkvKiBmb3Igbm9ybWFsIG9iamVjdHMsIG5vIGVMTEMgKi8KIAkg
ICAgICBHRU44X1BQQVQoMSwgR0VOOF9QUEFUX1dDIHwgR0VOOF9QUEFUX0xMQ0VMTEMpIHwJLyog
Zm9yIHNvbWV0aGluZyBwb2ludGluZyB0byBwdGVzPyAqLwotCSAgICAgIEdFTjhfUFBBVCgyLCBH
RU44X1BQQVRfV1QgfCBHRU44X1BQQVRfTExDRUxMQykgfAkvKiBmb3Igc2Nhbm91dCB3aXRoIGVM
TEMgKi8KIAkgICAgICBHRU44X1BQQVQoMywgR0VOOF9QUEFUX1VDKSB8CQkJLyogVW5jYWNoZWQg
b2JqZWN0cywgbW9zdGx5IGZvciBzY2Fub3V0ICovCiAJICAgICAgR0VOOF9QUEFUKDQsIEdFTjhf
UFBBVF9XQiB8IEdFTjhfUFBBVF9MTENFTExDIHwgR0VOOF9QUEFUX0FHRSgwKSkgfAogCSAgICAg
IEdFTjhfUFBBVCg1LCBHRU44X1BQQVRfV0IgfCBHRU44X1BQQVRfTExDRUxMQyB8IEdFTjhfUFBB
VF9BR0UoMSkpIHwKIAkgICAgICBHRU44X1BQQVQoNiwgR0VOOF9QUEFUX1dCIHwgR0VOOF9QUEFU
X0xMQ0VMTEMgfCBHRU44X1BQQVRfQUdFKDIpKSB8CiAJICAgICAgR0VOOF9QUEFUKDcsIEdFTjhf
UFBBVF9XQiB8IEdFTjhfUFBBVF9MTENFTExDIHwgR0VOOF9QUEFUX0FHRSgzKSk7CiAKKwkvKiBm
b3Igc2Nhbm91dCB3aXRoIGVMTEMgKi8KKwlpZiAoSU5URUxfR0VOKGk5MTUpID49IDkpCisJCXBh
dCB8PSBHRU44X1BQQVQoMiwgR0VOOF9QUEFUX1dCIHwgR0VOOF9QUEFUX0VMTENfT1ZFUlJJREUp
OworCWVsc2UKKwkJcGF0IHw9IEdFTjhfUFBBVCgyLCBHRU44X1BQQVRfV1QgfCBHRU44X1BQQVRf
TExDRUxMQyk7CisKIAlpbnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLCBHRU44X1BSSVZBVEVfUEFU
X0xPLCBsb3dlcl8zMl9iaXRzKHBhdCkpOwogCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsIEdF
TjhfUFJJVkFURV9QQVRfSEksIHVwcGVyXzMyX2JpdHMocGF0KSk7CiB9CmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuaAppbmRleCBjOTVkYjJkNTQ4NWMuLjFhNTcyOTkzMmM4MSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2Rydi5oCkBAIC0xNjM5LDggKzE2MzksNyBAQCB0Z2xfcmV2aWRzX2dldChzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAjZGVmaW5lIEhBU19TTk9PUChkZXZfcHJpdikJKElO
VEVMX0lORk8oZGV2X3ByaXYpLT5oYXNfc25vb3ApCiAjZGVmaW5lIEhBU19FRFJBTShkZXZfcHJp
dikJKChkZXZfcHJpdiktPmVkcmFtX3NpemVfbWIpCiAjZGVmaW5lIEhBU19TRUNVUkVfQkFUQ0hF
UyhkZXZfcHJpdikgKElOVEVMX0dFTihkZXZfcHJpdikgPCA2KQotI2RlZmluZSBIQVNfV1QoZGV2
X3ByaXYpCSgoSVNfSEFTV0VMTChkZXZfcHJpdikgfHwgXAotCQkJCSBJU19CUk9BRFdFTEwoZGV2
X3ByaXYpKSAmJiBIQVNfRURSQU0oZGV2X3ByaXYpKQorI2RlZmluZSBIQVNfV1QoZGV2X3ByaXYp
CUhBU19FRFJBTShkZXZfcHJpdikKIAogI2RlZmluZSBIV1NfTkVFRFNfUEhZU0lDQUwoZGV2X3By
aXYpCShJTlRFTF9JTkZPKGRldl9wcml2KS0+aHdzX25lZWRzX3BoeXNpY2FsKQogCi0tIAoyLjIw
LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C88D4D6B79
	for <lists+intel-gfx@lfdr.de>; Tue, 15 Oct 2019 00:05:55 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3E0456E165;
	Mon, 14 Oct 2019 22:05:50 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3C34B89D42
 for <intel-gfx@lists.freedesktop.org>; Mon, 14 Oct 2019 22:05:48 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18837428-1500050 
 for multiple; Mon, 14 Oct 2019 23:05:36 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 14 Oct 2019 23:05:27 +0100
Message-Id: <20191014220534.1662-3-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191014220534.1662-1-chris@chris-wilson.co.uk>
References: <20191014220534.1662-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 03/10] drm/i915: Expose engine properties via
 sysfs
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UHJlbGltaW5hcnkgc3R1YiB0byBhZGQgZW5naW5lcyB1bmRlcm5lYXRoIC9zeXMvY2xhc3MvZHJt
L2NhcmROLywgc28KdGhhdCB3ZSBjYW4gZXhwb3NlIHByb3BlcnRpZXMgb24gZWFjaCBlbmdpbmUg
dG8gdGhlIHN5c2FkbWluLgoKVG8gc3RhcnQgd2l0aCB3ZSBoYXZlIGJhc2ljIGFuYWxvZ3VlcyBv
ZiB0aGUgaTkxNV9xdWVyeSBpb2N0bCBzbyB0aGF0IHdlCmNhbiBwcmV0dHkgcHJpbnQgZW5naW5l
IGRpc2NvdmVyeSBmcm9tIHRoZSBzaGVsbCwgYW5kIGZsZXNoIG91dCB0aGUKZGlyZWN0b3J5IHN0
cnVjdHVyZS4gTGF0ZXIgd2Ugd2lsbCBhZGQgd3JpdGVhYmxlIHN5c2FkbWluIHByb3BlcnRpZXMg
c3VjaAphcyBwZXItZW5naW5lIHRpbWVvdXQgY29udHJvbHMuCgpBbiBleGFtcGxlIHRyZWUgb2Yg
dGhlIGVuZ2luZSBwcm9wZXJ0aWVzIG9uIEJyYXN3ZWxsOgogICAgL3N5cy9jbGFzcy9kcm0vY2Fy
ZDAKICAgIOKUlOKUgOKUgCBlbmdpbmUKICAgICDCoMKgIOKUnOKUgOKUgCBiY3MwCiAgICAgwqDC
oCDilILCoMKgIOKUnOKUgOKUgCBjYXBhYmlsaXRpZXMKICAgICDCoMKgIOKUgsKgwqAg4pSc4pSA
4pSAIGNsYXNzCiAgICAgwqDCoCDilILCoMKgIOKUnOKUgOKUgCBpbnN0YW5jZQogICAgIMKgwqAg
4pSCwqDCoCDilJzilIDilIAga25vd25fY2FwYWJpbGl0aWVzCiAgICAgwqDCoCDilILCoMKgIOKU
lOKUgOKUgCBuYW1lCiAgICAgwqDCoCDilJzilIDilIAgcmNzMAogICAgIMKgwqAg4pSCwqDCoCDi
lJzilIDilIAgY2FwYWJpbGl0aWVzCiAgICAgwqDCoCDilILCoMKgIOKUnOKUgOKUgCBjbGFzcwog
ICAgIMKgwqAg4pSCwqDCoCDilJzilIDilIAgaW5zdGFuY2UKICAgICDCoMKgIOKUgsKgwqAg4pSc
4pSA4pSAIGtub3duX2NhcGFiaWxpdGllcwogICAgIMKgwqAg4pSCwqDCoCDilJTilIDilIAgbmFt
ZQogICAgIMKgwqAg4pSc4pSA4pSAIHZjczAKICAgICDCoMKgIOKUgsKgwqAg4pSc4pSA4pSAIGNh
cGFiaWxpdGllcwogICAgIMKgwqAg4pSCwqDCoCDilJzilIDilIAgY2xhc3MKICAgICDCoMKgIOKU
gsKgwqAg4pSc4pSA4pSAIGluc3RhbmNlCiAgICAgwqDCoCDilILCoMKgIOKUnOKUgOKUgCBrbm93
bl9jYXBhYmlsaXRpZXMKICAgICDCoMKgIOKUgsKgwqAg4pSU4pSA4pSAIG5hbWUKICAgICDCoMKg
IOKUlOKUgOKUgCB2ZWNzMAogICAgIMKgwqAgIMKgwqAg4pSc4pSA4pSAIGNhcGFiaWxpdGllcwog
ICAgIMKgwqAgICAgIOKUnOKUgOKUgCBjbGFzcwogICAgIMKgwqAgICAgIOKUnOKUgOKUgCBpbnN0
YW5jZQogICAgIMKgwqAgIMKgwqAg4pSc4pSA4pSAIGtub3duX2NhcGFiaWxpdGllcwogICAgIMKg
wqAgICAgIOKUlOKUgOKUgCBuYW1lCgp2MjogSW5jbHVkZSBzdHJpbmdpZmllZCBjYXBhYmlsaXRp
ZXMKdjM6IEluY2x1ZGUgYWxsIGtub3duIGNhcGFiaWxpdGllcyBmb3IgZnV0dXJlcHJvb2Zpbmcu
CnY0OiBDb21iaW5lIHRoZSB0d28gY2FwcyBsb29wcyBpbnRvIG9uZQoKU2lnbmVkLW9mZi1ieTog
Q2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CkNjOiBKb29uYXMgTGFodGlu
ZW4gPGpvb25hcy5sYWh0aW5lbkBsaW51eC5pbnRlbC5jb20+CkNjOiBUdnJ0a28gVXJzdWxpbiA8
dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgpDYzogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFu
aWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNvbT4KQ2M6IFJvZHJpZ28gVml2aSA8cm9kcmlnby52
aXZpQGludGVsLmNvbT4KQWNrZWQtYnk6IFJvZHJpZ28gVml2aSA8cm9kcmlnby52aXZpQGludGVs
LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgICAgICAgICB8
ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLmMgfCAy
MDUgKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5n
aW5lX3N5c2ZzLmggfCAgMTQgKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3lzZnMuYyAg
ICAgICAgICAgIHwgICAzICsKIDQgZmlsZXMgY2hhbmdlZCwgMjI0IGluc2VydGlvbnMoKyksIDEg
ZGVsZXRpb24oLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9lbmdpbmVfc3lzZnMuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2VuZ2luZV9zeXNmcy5oCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQppbmRleCBlNzkx
ZDkzMjNiNTEuLmNkOWExMGJhMjUxNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
TWFrZWZpbGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKQEAgLTc4LDggKzc4
LDkgQEAgZ3QteSArPSBcCiAJZ3QvaW50ZWxfYnJlYWRjcnVtYnMubyBcCiAJZ3QvaW50ZWxfY29u
dGV4dC5vIFwKIAlndC9pbnRlbF9lbmdpbmVfY3MubyBcCi0JZ3QvaW50ZWxfZW5naW5lX3Bvb2wu
byBcCiAJZ3QvaW50ZWxfZW5naW5lX3BtLm8gXAorCWd0L2ludGVsX2VuZ2luZV9wb29sLm8gXAor
CWd0L2ludGVsX2VuZ2luZV9zeXNmcy5vIFwKIAlndC9pbnRlbF9lbmdpbmVfdXNlci5vIFwKIAln
dC9pbnRlbF9ndC5vIFwKIAlndC9pbnRlbF9ndF9pcnEubyBcCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2VuZ2luZV9zeXNmcy5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAwMDAwMC4uODIzMTUzZTU2YzY3Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLmMKQEAgLTAsMCArMSwyMDUgQEAKKy8qCisg
KiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCisgKgorICogQ29weXJpZ2h0IMKpIDIwMTkg
SW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaW5jbHVkZSA8bGludXgva29iamVjdC5oPgorI2lu
Y2x1ZGUgPGxpbnV4L3N5c2ZzLmg+CisKKyNpbmNsdWRlICJpOTE1X2Rydi5oIgorI2luY2x1ZGUg
ImludGVsX2VuZ2luZS5oIgorI2luY2x1ZGUgImludGVsX2VuZ2luZV9zeXNmcy5oIgorCitzdHJ1
Y3Qga29ial9lbmdpbmUgeworCXN0cnVjdCBrb2JqZWN0IGJhc2U7CisJc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lOworfTsKKworc3RhdGljIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmtv
YmpfdG9fZW5naW5lKHN0cnVjdCBrb2JqZWN0ICprb2JqKQoreworCXJldHVybiBjb250YWluZXJf
b2Yoa29iaiwgc3RydWN0IGtvYmpfZW5naW5lLCBiYXNlKS0+ZW5naW5lOworfQorCitzdGF0aWMg
c3NpemVfdAorbmFtZV9zaG93KHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3Qga29ial9hdHRy
aWJ1dGUgKmF0dHIsIGNoYXIgKmJ1ZikKK3sKKwlyZXR1cm4gc3ByaW50ZihidWYsICIlc1xuIiwg
a29ial90b19lbmdpbmUoa29iaiktPm5hbWUpOworfQorCitzdGF0aWMgc3RydWN0IGtvYmpfYXR0
cmlidXRlIG5hbWVfYXR0ciA9CitfX0FUVFIobmFtZSwgMDQ0NCwgbmFtZV9zaG93LCBOVUxMKTsK
Kworc3RhdGljIHNzaXplX3QKK2NsYXNzX3Nob3coc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVj
dCBrb2JqX2F0dHJpYnV0ZSAqYXR0ciwgY2hhciAqYnVmKQoreworCXJldHVybiBzcHJpbnRmKGJ1
ZiwgIiVkXG4iLCBrb2JqX3RvX2VuZ2luZShrb2JqKS0+dWFiaV9jbGFzcyk7Cit9CisKK3N0YXRp
YyBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgY2xhc3NfYXR0ciA9CitfX0FUVFIoY2xhc3MsIDA0NDQs
IGNsYXNzX3Nob3csIE5VTEwpOworCitzdGF0aWMgc3NpemVfdAoraW5zdF9zaG93KHN0cnVjdCBr
b2JqZWN0ICprb2JqLCBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIgKmJ1ZikKK3sK
KwlyZXR1cm4gc3ByaW50ZihidWYsICIlZFxuIiwga29ial90b19lbmdpbmUoa29iaiktPnVhYmlf
aW5zdGFuY2UpOworfQorCitzdGF0aWMgc3RydWN0IGtvYmpfYXR0cmlidXRlIGluc3RfYXR0ciA9
CitfX0FUVFIoaW5zdGFuY2UsIDA0NDQsIGluc3Rfc2hvdywgTlVMTCk7CisKK3N0YXRpYyBjb25z
dCBjaGFyICogY29uc3QgdmNzX2NhcHNbXSA9IHsKKwlbaWxvZzIoSTkxNV9WSURFT19DTEFTU19D
QVBBQklMSVRZX0hFVkMpXSA9ICJoZXZjIiwKKwlbaWxvZzIoSTkxNV9WSURFT19BTkRfRU5IQU5D
RV9DTEFTU19DQVBBQklMSVRZX1NGQyldID0gInNmYyIsCit9OworCitzdGF0aWMgY29uc3QgY2hh
ciAqIGNvbnN0IHZlY3NfY2Fwc1tdID0geworCVtpbG9nMihJOTE1X1ZJREVPX0FORF9FTkhBTkNF
X0NMQVNTX0NBUEFCSUxJVFlfU0ZDKV0gPSAic2ZjIiwKK307CisKK3N0YXRpYyBzc2l6ZV90IHJl
cHJfdHJpbShjaGFyICpidWYsIHNzaXplX3QgbGVuKQoreworCS8qIFRyaW0gb2ZmIHRoZSB0cmFp
bGluZyBzcGFjZSBhbmQgcmVwbGFjZSB3aXRoIGEgbmV3bGluZSAqLworCWlmIChsZW4gPiBQQUdF
X1NJWkUpCisJCWxlbiA9IFBBR0VfU0laRTsKKwlpZiAobGVuID4gMCkKKwkJYnVmW2xlbiAtIDFd
ID0gJ1xuJzsKKworCXJldHVybiBsZW47Cit9CisKK3N0YXRpYyBzc2l6ZV90CitfX2NhcHNfc2hv
dyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCisJICAgIHR5cGVvZihlbmdpbmUtPnVh
YmlfY2FwYWJpbGl0aWVzKSBjYXBzLAorCSAgICBjaGFyICpidWYsIGJvb2wgc2hvd191bmtub3du
KQoreworCWNvbnN0IGNoYXIgKiBjb25zdCAqcmVwcjsKKwlpbnQgY291bnQsIG47CisJc3NpemVf
dCBsZW47CisKKwlzd2l0Y2ggKGVuZ2luZS0+Y2xhc3MpIHsKKwljYXNlIFZJREVPX0RFQ09ERV9D
TEFTUzoKKwkJcmVwciA9IHZjc19jYXBzOworCQljb3VudCA9IEFSUkFZX1NJWkUodmNzX2NhcHMp
OworCQlicmVhazsKKworCWNhc2UgVklERU9fRU5IQU5DRU1FTlRfQ0xBU1M6CisJCXJlcHIgPSB2
ZWNzX2NhcHM7CisJCWNvdW50ID0gQVJSQVlfU0laRSh2ZWNzX2NhcHMpOworCQlicmVhazsKKwor
CWRlZmF1bHQ6CisJCXJlcHIgPSBOVUxMOworCQljb3VudCA9IDA7CisJCWJyZWFrOworCX0KKwlH
RU1fQlVHX09OKGNvdW50ID4gQklUU19QRVJfVFlQRSh0eXBlb2YoY2FwcykpKTsKKworCWxlbiA9
IDA7CisJZm9yX2VhY2hfc2V0X2JpdChuLAorCQkJICh1bnNpZ25lZCBsb25nICopJmNhcHMsCisJ
CQkgc2hvd191bmtub3duID8gQklUU19QRVJfVFlQRSh0eXBlb2YoY2FwcykpIDogY291bnQpIHsK
KwkJaWYgKG4gPj0gY291bnQgfHwgIXJlcHJbbl0pIHsKKwkJCWlmIChHRU1fV0FSTl9PTihzaG93
X3Vua25vd24pKQorCQkJCWxlbiArPSBzbnByaW50ZihidWYgKyBsZW4sIFBBR0VfU0laRSAtIGxl
biwKKwkJCQkJCSJbJXhdICIsIG4pOworCQl9IGVsc2UgeworCQkJbGVuICs9IHNucHJpbnRmKGJ1
ZiArIGxlbiwgUEFHRV9TSVpFIC0gbGVuLAorCQkJCQkiJXMgIiwgcmVwcltuXSk7CisJCX0KKwkJ
aWYgKEdFTV9XQVJOX09OKGxlbiA+PSBQQUdFX1NJWkUpKQorCQkJYnJlYWs7CisJfQorCXJldHVy
biByZXByX3RyaW0oYnVmLCBsZW4pOworfQorCitzdGF0aWMgc3NpemVfdAorY2Fwc19zaG93KHN0
cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIgKmJ1
ZikKK3sKKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUgPSBrb2JqX3RvX2VuZ2luZShr
b2JqKTsKKworCXJldHVybiBfX2NhcHNfc2hvdyhlbmdpbmUsIGVuZ2luZS0+dWFiaV9jYXBhYmls
aXRpZXMsIGJ1ZiwgdHJ1ZSk7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgY2Fw
c19hdHRyID0KK19fQVRUUihjYXBhYmlsaXRpZXMsIDA0NDQsIGNhcHNfc2hvdywgTlVMTCk7CisK
K3N0YXRpYyBzc2l6ZV90CithbGxfY2Fwc19zaG93KHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1
Y3Qga29ial9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIgKmJ1ZikKK3sKKwlyZXR1cm4gX19jYXBzX3No
b3coa29ial90b19lbmdpbmUoa29iaiksIC0xLCBidWYsIGZhbHNlKTsKK30KKworc3RhdGljIHN0
cnVjdCBrb2JqX2F0dHJpYnV0ZSBhbGxfY2Fwc19hdHRyID0KK19fQVRUUihrbm93bl9jYXBhYmls
aXRpZXMsIDA0NDQsIGFsbF9jYXBzX3Nob3csIE5VTEwpOworCitzdGF0aWMgdm9pZCBrb2JqX2Vu
Z2luZV9yZWxlYXNlKHN0cnVjdCBrb2JqZWN0ICprb2JqKQoreworCWtmcmVlKGtvYmopOworfQor
CitzdGF0aWMgc3RydWN0IGtvYmpfdHlwZSBrb2JqX2VuZ2luZV90eXBlID0geworCS5yZWxlYXNl
ID0ga29ial9lbmdpbmVfcmVsZWFzZSwKKwkuc3lzZnNfb3BzID0gJmtvYmpfc3lzZnNfb3BzCit9
OworCitzdGF0aWMgc3RydWN0IGtvYmplY3QgKgora29ial9lbmdpbmUoc3RydWN0IGtvYmplY3Qg
KmRpciwgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQoreworCXN0cnVjdCBrb2JqX2Vu
Z2luZSAqa2U7CisKKwlrZSA9IGt6YWxsb2Moc2l6ZW9mKCprZSksIEdGUF9LRVJORUwpOworCWlm
ICgha2UpCisJCXJldHVybiBOVUxMOworCisJa29iamVjdF9pbml0KCZrZS0+YmFzZSwgJmtvYmpf
ZW5naW5lX3R5cGUpOworCWtlLT5lbmdpbmUgPSBlbmdpbmU7CisKKwlpZiAoa29iamVjdF9hZGQo
JmtlLT5iYXNlLCBkaXIsICIlcyIsIGVuZ2luZS0+bmFtZSkpIHsKKwkJa29iamVjdF9wdXQoJmtl
LT5iYXNlKTsKKwkJcmV0dXJuIE5VTEw7CisJfQorCisJLyogeGZlciBvd25lcnNoaXAgdG8gc3lz
ZnMgdHJlZSAqLworCXJldHVybiAma2UtPmJhc2U7Cit9CisKK3ZvaWQgaW50ZWxfZW5naW5lc19h
ZGRfc3lzZnMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCit7CisJc3RhdGljIGNvbnN0
IHN0cnVjdCBhdHRyaWJ1dGUgKmZpbGVzW10gPSB7CisJCSZuYW1lX2F0dHIuYXR0ciwKKwkJJmNs
YXNzX2F0dHIuYXR0ciwKKwkJJmluc3RfYXR0ci5hdHRyLAorCQkmY2Fwc19hdHRyLmF0dHIsCisJ
CSZhbGxfY2Fwc19hdHRyLmF0dHIsCisJCU5VTEwKKwl9OworCisJc3RydWN0IGRldmljZSAqa2Rl
diA9IGk5MTUtPmRybS5wcmltYXJ5LT5rZGV2OworCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZTsKKwlzdHJ1Y3Qga29iamVjdCAqZGlyOworCisJZGlyID0ga29iamVjdF9jcmVhdGVfYW5k
X2FkZCgiZW5naW5lIiwgJmtkZXYtPmtvYmopOworCWlmICghZGlyKQorCQlyZXR1cm47CisKKwlm
b3JfZWFjaF91YWJpX2VuZ2luZShlbmdpbmUsIGk5MTUpIHsKKwkJc3RydWN0IGtvYmplY3QgKmtv
Ymo7CisKKwkJa29iaiA9IGtvYmpfZW5naW5lKGRpciwgZW5naW5lKTsKKwkJaWYgKCFrb2JqKQor
CQkJZ290byBlcnJfZW5naW5lOworCisJCWlmIChzeXNmc19jcmVhdGVfZmlsZXMoa29iaiwgZmls
ZXMpKQorCQkJZ290byBlcnJfb2JqZWN0OworCisJCWlmICgwKSB7CitlcnJfb2JqZWN0OgorCQkJ
a29iamVjdF9wdXQoa29iaik7CitlcnJfZW5naW5lOgorCQkJZGV2X2VycihrZGV2LCAiRmFpbGVk
IHRvIGFkZCBzeXNmcyBlbmdpbmUgJyVzJ1xuIiwKKwkJCQllbmdpbmUtPm5hbWUpOworCQkJYnJl
YWs7CisJCX0KKwl9Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9lbmdpbmVfc3lzZnMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9z
eXNmcy5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uZWY0NGE3NDVi
NzBhCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5n
aW5lX3N5c2ZzLmgKQEAgLTAsMCArMSwxNCBAQAorLyoKKyAqIFNQRFgtTGljZW5zZS1JZGVudGlm
aWVyOiBNSVQKKyAqCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICov
CisKKyNpZm5kZWYgSU5URUxfRU5HSU5FX1NZU0ZTX0gKKyNkZWZpbmUgSU5URUxfRU5HSU5FX1NZ
U0ZTX0gKKworc3RydWN0IGRybV9pOTE1X3ByaXZhdGU7CisKK3ZvaWQgaW50ZWxfZW5naW5lc19h
ZGRfc3lzZnMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOworCisjZW5kaWYgLyogSU5U
RUxfRU5HSU5FX1NZU0ZTX0ggKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfc3lzZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3lzZnMuYwppbmRleCBiZjAz
OWI4YmE1OTMuLjdiNjY1ZjY5ZjMwMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9zeXNmcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3lzZnMuYwpAQCAt
MzAsNiArMzAsNyBAQAogI2luY2x1ZGUgPGxpbnV4L3N0YXQuaD4KICNpbmNsdWRlIDxsaW51eC9z
eXNmcy5oPgogCisjaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLmgiCiAjaW5jbHVkZSAi
Z3QvaW50ZWxfcmM2LmgiCiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgpAQCAtNjE2LDYgKzYxNyw4
IEBAIHZvaWQgaTkxNV9zZXR1cF9zeXNmcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYpCiAJCURSTV9FUlJPUigiUlBTIHN5c2ZzIHNldHVwIGZhaWxlZFxuIik7CiAKIAlpOTE1X3Nl
dHVwX2Vycm9yX2NhcHR1cmUoa2Rldik7CisKKwlpbnRlbF9lbmdpbmVzX2FkZF9zeXNmcyhkZXZf
cHJpdik7CiB9CiAKIHZvaWQgaTkxNV90ZWFyZG93bl9zeXNmcyhzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYpCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1AE539011C
	for <lists+intel-gfx@lfdr.de>; Fri, 16 Aug 2019 14:10:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 316E86E32F;
	Fri, 16 Aug 2019 12:10:07 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A10236E32F
 for <intel-gfx@lists.freedesktop.org>; Fri, 16 Aug 2019 12:10:04 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18162468-1500050 
 for <intel-gfx@lists.freedesktop.org>; Fri, 16 Aug 2019 13:10:01 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 16 Aug 2019 13:10:00 +0100
Message-Id: <20190816121000.8507-2-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0.rc1
In-Reply-To: <20190816121000.8507-1-chris@chris-wilson.co.uk>
References: <20190816121000.8507-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 2/2] drm/i915: Markup expected timeline locks for
 i915_active
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgZXZlcnkgaTkxNV9hY3RpdmVfcmVxdWVzdCBzaG91bGQgYmUgc2VyaWFsaXNlZCBieSBhIGRl
ZGljYXRlZCBsb2NrLAppOTE1X2FjdGl2ZSBjb25zaXN0cyBvZiBhIHRyZWUgb2YgbG9ja3M7IG9u
ZSBmb3IgZWFjaCBub2RlLiBNYXJrdXAgdXAKdGhlIGk5MTVfYWN0aXZlX3JlcXVlc3Qgd2l0aCB3
aGF0IGxvY2sgaXMgc3VwcG9zZWQgdG8gYmUgZ3VhcmRpbmcgaXQgc28KdGhhdCB3ZSBjYW4gdmVy
aWZ5IHRoYXQgdGhlIHNlcmlhbGlzZWQgdXBkYXRlZCBhcmUgaW5kZWVkIHNlcmlhbGlzZWQuCgpT
aWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KUmV2
aWV3ZWQtYnk6IE1pa2EgS3VvcHBhbGEgPG1pa2Eua3VvcHBhbGFAbGludXguaW50ZWwuY29tPgot
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfb3ZlcmxheS5jICB8ICAyICst
CiAuLi4vZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jbGllbnRfYmx0LmMgICAgfCAgMiArLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYyAgIHwgIDIgKy0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYyAgICAgICB8IDExICsrKy0tLS0t
LS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG9vbC5oICAgfCAgMiAr
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuYyAgICAgIHwgIDcgKysr
LS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfdGltZWxpbmUuYyAgIHwgIDQg
KysrKwogLi4uL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdHMvbW9ja190aW1lbGluZS5jIHwgIDIg
Ky0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfYWN0aXZlLmMgICAgICAgICAgICB8IDE5ICsr
KysrKysrKysrKysrKy0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfYWN0aXZlLmggICAg
ICAgICAgICB8IDEyICsrKysrKysrKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9hY3Rp
dmVfdHlwZXMuaCAgICAgIHwgMTUgKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3ZtYS5jICAgICAgICAgICAgICAgfCAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9zZWxmdGVzdHMvaTkxNV9hY3RpdmUuYyAgfCAgMyArLS0KIDEzIGZpbGVzIGNoYW5nZWQsIDU4
IGluc2VydGlvbnMoKyksIDI3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfb3ZlcmxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9vdmVybGF5LmMKaW5kZXggZTEyNDhlYWNlMGUxLi5lY2E0MWM0YTVhYTYg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfb3ZlcmxheS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfb3ZlcmxheS5jCkBAIC0y
MzAsNyArMjMwLDcgQEAgYWxsb2NfcmVxdWVzdChzdHJ1Y3QgaW50ZWxfb3ZlcmxheSAqb3Zlcmxh
eSwgdm9pZCAoKmZuKShzdHJ1Y3QgaW50ZWxfb3ZlcmxheSAqKSkKIAlpZiAoSVNfRVJSKHJxKSkK
IAkJcmV0dXJuIHJxOwogCi0JZXJyID0gaTkxNV9hY3RpdmVfcmVmKCZvdmVybGF5LT5sYXN0X2Zs
aXAsIHJxLT5mZW5jZS5jb250ZXh0LCBycSk7CisJZXJyID0gaTkxNV9hY3RpdmVfcmVmKCZvdmVy
bGF5LT5sYXN0X2ZsaXAsIHJxLT50aW1lbGluZSwgcnEpOwogCWlmIChlcnIpIHsKIAkJaTkxNV9y
ZXF1ZXN0X2FkZChycSk7CiAJCXJldHVybiBFUlJfUFRSKGVycik7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY2xpZW50X2JsdC5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NsaWVudF9ibHQuYwppbmRleCA2YTRlODQxNTdiZjIuLjgx
OGFjNjkxNWJjNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X2NsaWVudF9ibHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY2xp
ZW50X2JsdC5jCkBAIC0yMTEsNyArMjExLDcgQEAgc3RhdGljIHZvaWQgY2xlYXJfcGFnZXNfd29y
a2VyKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKIAkgKiBrZWVwIHRyYWNrIG9mIHRoZSBHUFUg
YWN0aXZpdHkgd2l0aGluIHRoaXMgdm1hL3JlcXVlc3QsIGFuZAogCSAqIHByb3BhZ2F0ZSB0aGUg
c2lnbmFsIGZyb20gdGhlIHJlcXVlc3QgdG8gdy0+ZG1hLgogCSAqLwotCWVyciA9IGk5MTVfYWN0
aXZlX3JlZigmdm1hLT5hY3RpdmUsIHJxLT5mZW5jZS5jb250ZXh0LCBycSk7CisJZXJyID0gaTkx
NV9hY3RpdmVfcmVmKCZ2bWEtPmFjdGl2ZSwgcnEtPnRpbWVsaW5lLCBycSk7CiAJaWYgKGVycikK
IAkJZ290byBvdXRfcmVxdWVzdDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9jb250ZXh0LmMKaW5kZXggYTZiMGNiNzE0MjkyLi5jZDFmZDJlNTQyM2EgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwpAQCAtOTA4LDcgKzkwOCw3IEBA
IHN0YXRpYyBpbnQgY29udGV4dF9iYXJyaWVyX3Rhc2soc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQg
KmN0eCwKIAkJaWYgKGVtaXQpCiAJCQllcnIgPSBlbWl0KHJxLCBkYXRhKTsKIAkJaWYgKGVyciA9
PSAwKQotCQkJZXJyID0gaTkxNV9hY3RpdmVfcmVmKCZjYi0+YmFzZSwgcnEtPmZlbmNlLmNvbnRl
eHQsIHJxKTsKKwkJCWVyciA9IGk5MTVfYWN0aXZlX3JlZigmY2ItPmJhc2UsIHJxLT50aW1lbGlu
ZSwgcnEpOwogCiAJCWk5MTVfcmVxdWVzdF9hZGQocnEpOwogCQlpZiAoZXJyKQpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jCmluZGV4IDkxMTQ5NTNiZjkyMC4uZjU1NjkxZDE1
MWFlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jCkBAIC0zMDYsMTAg
KzMwNiwxMCBAQCBpbnQgaW50ZWxfY29udGV4dF9wcmVwYXJlX3JlbW90ZV9yZXF1ZXN0KHN0cnVj
dCBpbnRlbF9jb250ZXh0ICpjZSwKIAogCQkvKiBRdWV1ZSB0aGlzIHN3aXRjaCBhZnRlciBjdXJy
ZW50IGFjdGl2aXR5IGJ5IHRoaXMgY29udGV4dC4gKi8KIAkJZXJyID0gaTkxNV9hY3RpdmVfcmVx
dWVzdF9zZXQoJnRsLT5sYXN0X3JlcXVlc3QsIHJxKTsKKwkJbXV0ZXhfdW5sb2NrKCZ0bC0+bXV0
ZXgpOwogCQlpZiAoZXJyKQotCQkJZ290byB1bmxvY2s7CisJCQlyZXR1cm4gZXJyOwogCX0KLQls
b2NrZGVwX2Fzc2VydF9oZWxkKCZ0bC0+bXV0ZXgpOwogCiAJLyoKIAkgKiBHdWFyYW50ZWUgY29u
dGV4dCBpbWFnZSBhbmQgdGhlIHRpbWVsaW5lIHJlbWFpbnMgcGlubmVkIHVudGlsIHRoZQpAQCAt
MzE5LDEyICszMTksNyBAQCBpbnQgaW50ZWxfY29udGV4dF9wcmVwYXJlX3JlbW90ZV9yZXF1ZXN0
KHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKIAkgKiB3b3JkcyB0cmFuc2ZlciB0aGUgcGlubmVk
IGNlIG9iamVjdCB0byB0cmFja2VkIGFjdGl2ZSByZXF1ZXN0LgogCSAqLwogCUdFTV9CVUdfT04o
aTkxNV9hY3RpdmVfaXNfaWRsZSgmY2UtPmFjdGl2ZSkpOwotCWVyciA9IGk5MTVfYWN0aXZlX3Jl
ZigmY2UtPmFjdGl2ZSwgcnEtPmZlbmNlLmNvbnRleHQsIHJxKTsKLQotdW5sb2NrOgotCWlmIChy
cS0+dGltZWxpbmUgIT0gdGwpCi0JCW11dGV4X3VubG9jaygmdGwtPm11dGV4KTsKLQlyZXR1cm4g
ZXJyOworCXJldHVybiBpOTE1X2FjdGl2ZV9yZWYoJmNlLT5hY3RpdmUsIHJxLT50aW1lbGluZSwg
cnEpOwogfQogCiBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICppbnRlbF9jb250ZXh0X2NyZWF0ZV9yZXF1
ZXN0KHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wb29sLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9lbmdpbmVfcG9vbC5oCmluZGV4IGY3YTBhNjYwYzFjOS4uOGQwNjllZmQ5NDU3IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG9vbC5oCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wb29sLmgKQEAgLTE4LDcgKzE4
LDcgQEAgc3RhdGljIGlubGluZSBpbnQKIGludGVsX2VuZ2luZV9wb29sX21hcmtfYWN0aXZlKHN0
cnVjdCBpbnRlbF9lbmdpbmVfcG9vbF9ub2RlICpub2RlLAogCQkJICAgICAgc3RydWN0IGk5MTVf
cmVxdWVzdCAqcnEpCiB7Ci0JcmV0dXJuIGk5MTVfYWN0aXZlX3JlZigmbm9kZS0+YWN0aXZlLCBy
cS0+ZmVuY2UuY29udGV4dCwgcnEpOworCXJldHVybiBpOTE1X2FjdGl2ZV9yZWYoJm5vZGUtPmFj
dGl2ZSwgcnEtPnRpbWVsaW5lLCBycSk7CiB9CiAKIHN0YXRpYyBpbmxpbmUgdm9pZApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX3RpbWVsaW5lLmMKaW5kZXggZWFmZDk0ZDVlMjExLi4wMmZi
ZTExYjY3MWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3RpbWVs
aW5lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuYwpAQCAt
MjU0LDcgKzI1NCw3IEBAIGludCBpbnRlbF90aW1lbGluZV9pbml0KHN0cnVjdCBpbnRlbF90aW1l
bGluZSAqdGltZWxpbmUsCiAKIAltdXRleF9pbml0KCZ0aW1lbGluZS0+bXV0ZXgpOwogCi0JSU5J
VF9BQ1RJVkVfUkVRVUVTVCgmdGltZWxpbmUtPmxhc3RfcmVxdWVzdCk7CisJSU5JVF9BQ1RJVkVf
UkVRVUVTVCgmdGltZWxpbmUtPmxhc3RfcmVxdWVzdCwgJnRpbWVsaW5lLT5tdXRleCk7CiAJSU5J
VF9MSVNUX0hFQUQoJnRpbWVsaW5lLT5yZXF1ZXN0cyk7CiAKIAlpOTE1X3N5bmNtYXBfaW5pdCgm
dGltZWxpbmUtPnN5bmMpOwpAQCAtNDQwLDggKzQ0MCw3IEBAIF9faW50ZWxfdGltZWxpbmVfZ2V0
X3NlcW5vKHN0cnVjdCBpbnRlbF90aW1lbGluZSAqdGwsCiAJICogZnJlZSBpdCBhZnRlciB0aGUg
Y3VycmVudCByZXF1ZXN0IGlzIHJldGlyZWQsIHdoaWNoIGVuc3VyZXMgdGhhdAogCSAqIGFsbCB3
cml0ZXMgaW50byB0aGUgY2FjaGVsaW5lIGZyb20gcHJldmlvdXMgcmVxdWVzdHMgYXJlIGNvbXBs
ZXRlLgogCSAqLwotCWVyciA9IGk5MTVfYWN0aXZlX3JlZigmdGwtPmh3c3BfY2FjaGVsaW5lLT5h
Y3RpdmUsCi0JCQkgICAgICB0bC0+ZmVuY2VfY29udGV4dCwgcnEpOworCWVyciA9IGk5MTVfYWN0
aXZlX3JlZigmdGwtPmh3c3BfY2FjaGVsaW5lLT5hY3RpdmUsIHRsLCBycSk7CiAJaWYgKGVycikK
IAkJZ290byBlcnJfY2FjaGVsaW5lOwogCkBAIC00OTIsNyArNDkxLDcgQEAgaW50IGludGVsX3Rp
bWVsaW5lX2dldF9zZXFubyhzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRsLAogc3RhdGljIGludCBj
YWNoZWxpbmVfcmVmKHN0cnVjdCBpbnRlbF90aW1lbGluZV9jYWNoZWxpbmUgKmNsLAogCQkJIHN0
cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQogewotCXJldHVybiBpOTE1X2FjdGl2ZV9yZWYoJmNsLT5h
Y3RpdmUsIHJxLT5mZW5jZS5jb250ZXh0LCBycSk7CisJcmV0dXJuIGk5MTVfYWN0aXZlX3JlZigm
Y2wtPmFjdGl2ZSwgcnEtPnRpbWVsaW5lLCBycSk7CiB9CiAKIGludCBpbnRlbF90aW1lbGluZV9y
ZWFkX2h3c3Aoc3RydWN0IGk5MTVfcmVxdWVzdCAqZnJvbSwKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3RpbWVsaW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9zZWxmdGVzdF90aW1lbGluZS5jCmluZGV4IGQ1NDExMzY5Nzc0NS4uMzIxNDgxNDAzMTY1
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF90aW1lbGluZS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3RpbWVsaW5lLmMKQEAgLTY4
OSw3ICs2ODksOSBAQCBzdGF0aWMgaW50IGxpdmVfaHdzcF93cmFwKHZvaWQgKmFyZykKIAogCQl0
bC0+c2Vxbm8gPSAtNHU7CiAKKwkJbXV0ZXhfbG9ja19uZXN0ZWQoJnRsLT5tdXRleCwgU0lOR0xF
X0RFUFRIX05FU1RJTkcpOwogCQllcnIgPSBpbnRlbF90aW1lbGluZV9nZXRfc2Vxbm8odGwsIHJx
LCAmc2Vxbm9bMF0pOworCQltdXRleF91bmxvY2soJnRsLT5tdXRleCk7CiAJCWlmIChlcnIpIHsK
IAkJCWk5MTVfcmVxdWVzdF9hZGQocnEpOwogCQkJZ290byBvdXQ7CkBAIC03MDQsNyArNzA2LDkg
QEAgc3RhdGljIGludCBsaXZlX2h3c3Bfd3JhcCh2b2lkICphcmcpCiAJCX0KIAkJaHdzcF9zZXFu
b1swXSA9IHRsLT5od3NwX3NlcW5vOwogCisJCW11dGV4X2xvY2tfbmVzdGVkKCZ0bC0+bXV0ZXgs
IFNJTkdMRV9ERVBUSF9ORVNUSU5HKTsKIAkJZXJyID0gaW50ZWxfdGltZWxpbmVfZ2V0X3NlcW5v
KHRsLCBycSwgJnNlcW5vWzFdKTsKKwkJbXV0ZXhfdW5sb2NrKCZ0bC0+bXV0ZXgpOwogCQlpZiAo
ZXJyKSB7CiAJCQlpOTE1X3JlcXVlc3RfYWRkKHJxKTsKIAkJCWdvdG8gb3V0OwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RzL21vY2tfdGltZWxpbmUuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0cy9tb2NrX3RpbWVsaW5lLmMKaW5kZXggNWM1
NDkyMDU4MjhhLi41OTgxNzBlZmNhZjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3NlbGZ0ZXN0cy9tb2NrX3RpbWVsaW5lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3Qvc2VsZnRlc3RzL21vY2tfdGltZWxpbmUuYwpAQCAtMTUsNyArMTUsNyBAQCB2b2lkIG1vY2tf
dGltZWxpbmVfaW5pdChzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRpbWVsaW5lLCB1NjQgY29udGV4
dCkKIAogCW11dGV4X2luaXQoJnRpbWVsaW5lLT5tdXRleCk7CiAKLQlJTklUX0FDVElWRV9SRVFV
RVNUKCZ0aW1lbGluZS0+bGFzdF9yZXF1ZXN0KTsKKwlJTklUX0FDVElWRV9SRVFVRVNUKCZ0aW1l
bGluZS0+bGFzdF9yZXF1ZXN0LCAmdGltZWxpbmUtPm11dGV4KTsKIAlJTklUX0xJU1RfSEVBRCgm
dGltZWxpbmUtPnJlcXVlc3RzKTsKIAogCWk5MTVfc3luY21hcF9pbml0KCZ0aW1lbGluZS0+c3lu
Yyk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2FjdGl2ZS5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9hY3RpdmUuYwppbmRleCAyNDM5YzRmNjJhZDguLmRmNjE2
NDU5MTcwMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9hY3RpdmUuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2FjdGl2ZS5jCkBAIC0xNjksMTAgKzE2OSwx
MSBAQCBub2RlX3JldGlyZShzdHJ1Y3QgaTkxNV9hY3RpdmVfcmVxdWVzdCAqYmFzZSwgc3RydWN0
IGk5MTVfcmVxdWVzdCAqcnEpCiB9CiAKIHN0YXRpYyBzdHJ1Y3QgaTkxNV9hY3RpdmVfcmVxdWVz
dCAqCi1hY3RpdmVfaW5zdGFuY2Uoc3RydWN0IGk5MTVfYWN0aXZlICpyZWYsIHU2NCBpZHgpCith
Y3RpdmVfaW5zdGFuY2Uoc3RydWN0IGk5MTVfYWN0aXZlICpyZWYsIHN0cnVjdCBpbnRlbF90aW1l
bGluZSAqdGwpCiB7CiAJc3RydWN0IGFjdGl2ZV9ub2RlICpub2RlLCAqcHJlYWxsb2M7CiAJc3Ry
dWN0IHJiX25vZGUgKipwLCAqcGFyZW50OworCXU2NCBpZHggPSB0bC0+ZmVuY2VfY29udGV4dDsK
IAogCS8qCiAJICogV2UgdHJhY2sgdGhlIG1vc3QgcmVjZW50bHkgdXNlZCB0aW1lbGluZSB0byBz
a2lwIGEgcmJ0cmVlIHNlYXJjaApAQCAtMjExLDcgKzIxMiw3IEBAIGFjdGl2ZV9pbnN0YW5jZShz
dHJ1Y3QgaTkxNV9hY3RpdmUgKnJlZiwgdTY0IGlkeCkKIAl9CiAKIAlub2RlID0gcHJlYWxsb2M7
Ci0JaTkxNV9hY3RpdmVfcmVxdWVzdF9pbml0KCZub2RlLT5iYXNlLCBOVUxMLCBub2RlX3JldGly
ZSk7CisJaTkxNV9hY3RpdmVfcmVxdWVzdF9pbml0KCZub2RlLT5iYXNlLCAmdGwtPm11dGV4LCBO
VUxMLCBub2RlX3JldGlyZSk7CiAJbm9kZS0+cmVmID0gcmVmOwogCW5vZGUtPnRpbWVsaW5lID0g
aWR4OwogCkBAIC0yOTQsMTggKzI5NSwyMCBAQCBfX2FjdGl2ZV9kZWxfYmFycmllcihzdHJ1Y3Qg
aTkxNV9hY3RpdmUgKnJlZiwgc3RydWN0IGFjdGl2ZV9ub2RlICpub2RlKQogfQogCiBpbnQgaTkx
NV9hY3RpdmVfcmVmKHN0cnVjdCBpOTE1X2FjdGl2ZSAqcmVmLAotCQkgICAgdTY0IHRpbWVsaW5l
LAorCQkgICAgc3RydWN0IGludGVsX3RpbWVsaW5lICp0bCwKIAkJICAgIHN0cnVjdCBpOTE1X3Jl
cXVlc3QgKnJxKQogewogCXN0cnVjdCBpOTE1X2FjdGl2ZV9yZXF1ZXN0ICphY3RpdmU7CiAJaW50
IGVycjsKIAorCWxvY2tkZXBfYXNzZXJ0X2hlbGQoJnRsLT5tdXRleCk7CisKIAkvKiBQcmV2ZW50
IHJlYXBpbmcgaW4gY2FzZSB3ZSBtYWxsb2Mvd2FpdCB3aGlsZSBidWlsZGluZyB0aGUgdHJlZSAq
LwogCWVyciA9IGk5MTVfYWN0aXZlX2FjcXVpcmUocmVmKTsKIAlpZiAoZXJyKQogCQlyZXR1cm4g
ZXJyOwogCi0JYWN0aXZlID0gYWN0aXZlX2luc3RhbmNlKHJlZiwgdGltZWxpbmUpOworCWFjdGl2
ZSA9IGFjdGl2ZV9pbnN0YW5jZShyZWYsIHRsKTsKIAlpZiAoIWFjdGl2ZSkgewogCQllcnIgPSAt
RU5PTUVNOwogCQlnb3RvIG91dDsKQEAgLTU5Niw2ICs1OTksMTAgQEAgaW50IGk5MTVfYWN0aXZl
X2FjcXVpcmVfcHJlYWxsb2NhdGVfYmFycmllcihzdHJ1Y3QgaTkxNV9hY3RpdmUgKnJlZiwKIAkJ
CQlnb3RvIHVud2luZDsKIAkJCX0KIAorI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1X0RF
QlVHX0dFTSkKKwkJCW5vZGUtPmJhc2UubG9jayA9CisJCQkJJmVuZ2luZS0+a2VybmVsX2NvbnRl
eHQtPnRpbWVsaW5lLT5tdXRleDsKKyNlbmRpZgogCQkJUkNVX0lOSVRfUE9JTlRFUihub2RlLT5i
YXNlLnJlcXVlc3QsIE5VTEwpOwogCQkJbm9kZS0+YmFzZS5yZXRpcmUgPSBub2RlX3JldGlyZTsK
IAkJCW5vZGUtPnRpbWVsaW5lID0gaWR4OwpAQCAtNzAxLDYgKzcwOCwxMCBAQCBpbnQgaTkxNV9h
Y3RpdmVfcmVxdWVzdF9zZXQoc3RydWN0IGk5MTVfYWN0aXZlX3JlcXVlc3QgKmFjdGl2ZSwKIHsK
IAlpbnQgZXJyOwogCisjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfREVCVUdfR0VNKQor
CWxvY2tkZXBfYXNzZXJ0X2hlbGQoYWN0aXZlLT5sb2NrKTsKKyNlbmRpZgorCiAJLyogTXVzdCBt
YWludGFpbiBvcmRlcmluZyB3cnQgcHJldmlvdXMgYWN0aXZlIHJlcXVlc3RzICovCiAJZXJyID0g
aTkxNV9yZXF1ZXN0X2F3YWl0X2FjdGl2ZV9yZXF1ZXN0KHJxLCBhY3RpdmUpOwogCWlmIChlcnIp
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2FjdGl2ZS5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9hY3RpdmUuaAppbmRleCBmNmQ3MzBjZjJmZTYuLmY5NTA1OGY5
OTA1NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9hY3RpdmUuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2FjdGl2ZS5oCkBAIC01OCwxNSArNTgsMjAgQEAg
dm9pZCBpOTE1X2FjdGl2ZV9yZXRpcmVfbm9vcChzdHJ1Y3QgaTkxNV9hY3RpdmVfcmVxdWVzdCAq
YWN0aXZlLAogICovCiBzdGF0aWMgaW5saW5lIHZvaWQKIGk5MTVfYWN0aXZlX3JlcXVlc3RfaW5p
dChzdHJ1Y3QgaTkxNV9hY3RpdmVfcmVxdWVzdCAqYWN0aXZlLAorCQkJIHN0cnVjdCBtdXRleCAq
bG9jaywKIAkJCSBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwKIAkJCSBpOTE1X2FjdGl2ZV9yZXRp
cmVfZm4gcmV0aXJlKQogewogCVJDVV9JTklUX1BPSU5URVIoYWN0aXZlLT5yZXF1ZXN0LCBycSk7
CiAJSU5JVF9MSVNUX0hFQUQoJmFjdGl2ZS0+bGluayk7CiAJYWN0aXZlLT5yZXRpcmUgPSByZXRp
cmUgPzogaTkxNV9hY3RpdmVfcmV0aXJlX25vb3A7CisjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJN
X0k5MTVfREVCVUdfR0VNKQorCWFjdGl2ZS0+bG9jayA9IGxvY2s7CisjZW5kaWYKIH0KIAotI2Rl
ZmluZSBJTklUX0FDVElWRV9SRVFVRVNUKG5hbWUpIGk5MTVfYWN0aXZlX3JlcXVlc3RfaW5pdCgo
bmFtZSksIE5VTEwsIE5VTEwpCisjZGVmaW5lIElOSVRfQUNUSVZFX1JFUVVFU1QobmFtZSwgbG9j
aykgXAorCWk5MTVfYWN0aXZlX3JlcXVlc3RfaW5pdCgobmFtZSksIChsb2NrKSwgTlVMTCwgTlVM
TCkKIAogLyoqCiAgKiBpOTE1X2FjdGl2ZV9yZXF1ZXN0X3NldCAtIHVwZGF0ZXMgdGhlIHRyYWNr
ZXIgdG8gd2F0Y2ggdGhlIGN1cnJlbnQgcmVxdWVzdApAQCAtODEsNiArODYsOSBAQCBzdGF0aWMg
aW5saW5lIHZvaWQKIF9faTkxNV9hY3RpdmVfcmVxdWVzdF9zZXQoc3RydWN0IGk5MTVfYWN0aXZl
X3JlcXVlc3QgKmFjdGl2ZSwKIAkJCSAgc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCkKIHsK
KyNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9ERUJVR19HRU0pCisJbG9ja2RlcF9hc3Nl
cnRfaGVsZChhY3RpdmUtPmxvY2spOworI2VuZGlmCiAJbGlzdF9tb3ZlKCZhY3RpdmUtPmxpbmss
ICZyZXF1ZXN0LT5hY3RpdmVfbGlzdCk7CiAJcmN1X2Fzc2lnbl9wb2ludGVyKGFjdGl2ZS0+cmVx
dWVzdCwgcmVxdWVzdCk7CiB9CkBAIC0zNjIsNyArMzcwLDcgQEAgdm9pZCBfX2k5MTVfYWN0aXZl
X2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiB9IHdoaWxlICgwKQogCiBpbnQg
aTkxNV9hY3RpdmVfcmVmKHN0cnVjdCBpOTE1X2FjdGl2ZSAqcmVmLAotCQkgICAgdTY0IHRpbWVs
aW5lLAorCQkgICAgc3RydWN0IGludGVsX3RpbWVsaW5lICp0bCwKIAkJICAgIHN0cnVjdCBpOTE1
X3JlcXVlc3QgKnJxKTsKIAogaW50IGk5MTVfYWN0aXZlX3dhaXQoc3RydWN0IGk5MTVfYWN0aXZl
ICpyZWYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9hY3RpdmVfdHlw
ZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfYWN0aXZlX3R5cGVzLmgKaW5kZXggYWUz
ZWU0NDFjMTE0Li4xODU0ZTdkMTY4YzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfYWN0aXZlX3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9hY3Rp
dmVfdHlwZXMuaApAQCAtMjQsNiArMjQsMjEgQEAgc3RydWN0IGk5MTVfYWN0aXZlX3JlcXVlc3Qg
ewogCXN0cnVjdCBpOTE1X3JlcXVlc3QgX19yY3UgKnJlcXVlc3Q7CiAJc3RydWN0IGxpc3RfaGVh
ZCBsaW5rOwogCWk5MTVfYWN0aXZlX3JldGlyZV9mbiByZXRpcmU7CisjaWYgSVNfRU5BQkxFRChD
T05GSUdfRFJNX0k5MTVfREVCVUdfR0VNKQorCS8qCisJICogSW5jb3Jwb3JlYWwhCisJICoKKwkg
KiBVcGRhdGVzIHRvIHRoZSBpOTE1X2FjdGl2ZV9yZXF1ZXN0IG11c3QgYmUgc2VyaWFsaXNlZCB1
bmRlciBhIGxvY2sKKwkgKiB0byBlbnN1cmUgdGhhdCB0aGUgdGltZWxpbmUgaXMgb3JkZXJlZC4g
Tm9ybWFsbHksIHRoaXMgaXMgdGhlCisJICogdGltZWxpbmUtPm11dGV4LCBidXQgYW5vdGhlciBt
dXRleCBtYXkgYmUgdXNlZCBzbyBsb25nIGFzIGl0IGlzCisJICogZG9uZSBzbyBjb25zaXN0ZW50
bHkuCisJICoKKwkgKiBGb3IgbG9ja2RlcCB0cmFja2luZyBvZiB0aGUgYWJvdmUsIHdlIHN0b3Jl
IHRoZSBsb2NrIHdlIGludGVuZAorCSAqIHRvIGFsd2F5cyB1c2UgZm9yIHVwZGF0ZXMgb2YgdGhp
cyBpOTE1X2FjdGl2ZV9yZXF1ZXN0IGR1cmluZworCSAqIGNvbnN0cnVjdGlvbiBhbmQgYXNzZXJ0
IHRoYXQgaXMgaGVsZCBvbiBldmVyeSB1cGRhdGUuCisJICovCisJc3RydWN0IG11dGV4ICpsb2Nr
OworI2VuZGlmCiB9OwogCiBzdHJ1Y3QgYWN0aXZlX25vZGU7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEu
YwppbmRleCBhMzIyNDM5NTFiMjkuLjczYjAyMjM0YWZmZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV92bWEuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Zt
YS5jCkBAIC05MDMsMTQgKzkwMywxNCBAQCBpbnQgaTkxNV92bWFfbW92ZV90b19hY3RpdmUoc3Ry
dWN0IGk5MTVfdm1hICp2bWEsCiAJICogYWRkIHRoZSBhY3RpdmUgcmVmZXJlbmNlIGZpcnN0IGFu
ZCBxdWV1ZSBmb3IgaXQgdG8gYmUgZHJvcHBlZAogCSAqICpsYXN0Ki4KIAkgKi8KLQllcnIgPSBp
OTE1X2FjdGl2ZV9yZWYoJnZtYS0+YWN0aXZlLCBycS0+ZmVuY2UuY29udGV4dCwgcnEpOworCWVy
ciA9IGk5MTVfYWN0aXZlX3JlZigmdm1hLT5hY3RpdmUsIHJxLT50aW1lbGluZSwgcnEpOwogCWlm
ICh1bmxpa2VseShlcnIpKQogCQlyZXR1cm4gZXJyOwogCiAJaWYgKGZsYWdzICYgRVhFQ19PQkpF
Q1RfV1JJVEUpIHsKIAkJaWYgKGludGVsX2Zyb250YnVmZmVyX2ludmFsaWRhdGUob2JqLT5mcm9u
dGJ1ZmZlciwgT1JJR0lOX0NTKSkKIAkJCWk5MTVfYWN0aXZlX3JlZigmb2JqLT5mcm9udGJ1ZmZl
ci0+d3JpdGUsCi0JCQkJCXJxLT5mZW5jZS5jb250ZXh0LAorCQkJCQlycS0+dGltZWxpbmUsCiAJ
CQkJCXJxKTsKIAogCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZSh2bWEtPnJlc3YsICZycS0+ZmVu
Y2UpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfYWN0
aXZlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9hY3RpdmUuYwppbmRl
eCBlNWNkNWQ0N2UzODAuLjc3ZDg0NGFjOGI3MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvc2VsZnRlc3RzL2k5MTVfYWN0aXZlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
c2VsZnRlc3RzL2k5MTVfYWN0aXZlLmMKQEAgLTExMCw4ICsxMTAsNyBAQCBfX2xpdmVfYWN0aXZl
X3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCQkJCQkJICAgICAgIHN1Ym1p
dCwKIAkJCQkJCSAgICAgICBHRlBfS0VSTkVMKTsKIAkJaWYgKGVyciA+PSAwKQotCQkJZXJyID0g
aTkxNV9hY3RpdmVfcmVmKCZhY3RpdmUtPmJhc2UsCi0JCQkJCSAgICAgIHJxLT5mZW5jZS5jb250
ZXh0LCBycSk7CisJCQllcnIgPSBpOTE1X2FjdGl2ZV9yZWYoJmFjdGl2ZS0+YmFzZSwgcnEtPnRp
bWVsaW5lLCBycSk7CiAJCWk5MTVfcmVxdWVzdF9hZGQocnEpOwogCQlpZiAoZXJyKSB7CiAJCQlw
cl9lcnIoIkZhaWxlZCB0byB0cmFjayBhY3RpdmUgcmVmIVxuIik7Ci0tIAoyLjIzLjAucmMxCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

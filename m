Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 109A91288F7
	for <lists+intel-gfx@lfdr.de>; Sat, 21 Dec 2019 13:06:18 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CA9CD6E44D;
	Sat, 21 Dec 2019 12:06:15 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B82686E454
 for <intel-gfx@lists.freedesktop.org>; Sat, 21 Dec 2019 12:06:14 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 21 Dec 2019 04:06:14 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,338,1571727600"; d="scan'208";a="219065210"
Received: from ideak-desk.fi.intel.com ([10.237.72.183])
 by orsmga003.jf.intel.com with ESMTP; 21 Dec 2019 04:06:13 -0800
From: Imre Deak <imre.deak@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Sat, 21 Dec 2019 14:05:36 +0200
Message-Id: <20191221120543.22816-4-imre.deak@intel.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20191221120543.22816-1-imre.deak@intel.com>
References: <20191221120543.22816-1-imre.deak@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 03/10] drm/i915: Extract framebufer CCS offset
 checks into a function
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogRGhpbmFrYXJhbiBQYW5kaXlhbiA8ZGhpbmFrYXJhbi5wYW5kaXlhbkBpbnRlbC5jb20+
CgppbnRlbF9maWxsX2ZiX2luZm8oKSBoYXMgZ3Jvd24gcXVpdGUgbGFyZ2UgYW5kIHdyYXBwaW5n
IHRoZSBvZmZzZXQgY2hlY2tzCmludG8gYSBzZXBhcmF0ZSBmdW5jdGlvbiBtYWtlcyB0aGUgbG9v
cCBhIGJpdCBlYXNpZXIgdG8gZm9sbG93LgoKdjI6IFNraXAgdGhlIGNoZWNrIGZvciBub24tQ0NT
IHBsYW5lcy4gKE1pa2EpCgpDYzogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4
LmludGVsLmNvbT4KQ2M6IE1hdHQgUm9wZXIgPG1hdHRoZXcuZC5yb3BlckBpbnRlbC5jb20+CkNj
OiBNaWthIEthaG9sYSA8bWlrYS5rYWhvbGFAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBEaGlu
YWthcmFuIFBhbmRpeWFuIDxkaGluYWthcmFuLnBhbmRpeWFuQGludGVsLmNvbT4KU2lnbmVkLW9m
Zi1ieTogSW1yZSBEZWFrIDxpbXJlLmRlYWtAaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogTWlrYSBL
YWhvbGEgPG1pa2Eua2Fob2xhQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXkuYyB8IDczICsrKysrKysrKysrKy0tLS0tLS0tCiAxIGZpbGUg
Y2hhbmdlZCwgNDMgaW5zZXJ0aW9ucygrKSwgMzAgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwppbmRleCBmYzE0MGY2MzA4MTkuLmQy
NDNlNWE5MjQwZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5LmMKQEAgLTI2NzcsNiArMjY3Nyw0NiBAQCBzdGF0aWMgYm9vbCBpbnRlbF9wbGFuZV9uZWVk
c19yZW1hcChjb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlKQogCXJl
dHVybiBzdHJpZGUgPiBtYXhfc3RyaWRlOwogfQogCitzdGF0aWMgaW50CitpbnRlbF9mYl9jaGVj
a19jY3NfeHkoc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsIGludCBjY3NfcGxhbmUsIGludCB4
LCBpbnQgeSkKK3sKKwlzdHJ1Y3QgaW50ZWxfZnJhbWVidWZmZXIgKmludGVsX2ZiID0gdG9faW50
ZWxfZnJhbWVidWZmZXIoZmIpOworCWludCBoc3ViID0gZmItPmZvcm1hdC0+aHN1YjsKKwlpbnQg
dnN1YiA9IGZiLT5mb3JtYXQtPnZzdWI7CisJaW50IHRpbGVfd2lkdGgsIHRpbGVfaGVpZ2h0Owor
CWludCBjY3NfeCwgY2NzX3k7CisJaW50IG1haW5feCwgbWFpbl95OworCisJaWYgKCFpc19jY3Nf
bW9kaWZpZXIoZmItPm1vZGlmaWVyKSB8fCBjY3NfcGxhbmUgIT0gMSkKKwkJcmV0dXJuIDA7CisK
KwlpbnRlbF90aWxlX2RpbXMoZmIsIDEsICZ0aWxlX3dpZHRoLCAmdGlsZV9oZWlnaHQpOworCisJ
dGlsZV93aWR0aCAqPSBoc3ViOworCXRpbGVfaGVpZ2h0ICo9IHZzdWI7CisKKwljY3NfeCA9ICh4
ICogaHN1YikgJSB0aWxlX3dpZHRoOworCWNjc195ID0gKHkgKiB2c3ViKSAlIHRpbGVfaGVpZ2h0
OworCW1haW5feCA9IGludGVsX2ZiLT5ub3JtYWxbMF0ueCAlIHRpbGVfd2lkdGg7CisJbWFpbl95
ID0gaW50ZWxfZmItPm5vcm1hbFswXS55ICUgdGlsZV9oZWlnaHQ7CisKKwkvKgorCSAqIENDUyBk
b2Vzbid0IGhhdmUgaXRzIG93biB4L3kgb2Zmc2V0IHJlZ2lzdGVyLCBzbyB0aGUgaW50cmEgQ0NT
IHRpbGUKKwkgKiB4L3kgb2Zmc2V0cyBtdXN0IG1hdGNoIGJldHdlZW4gQ0NTIGFuZCB0aGUgbWFp
biBzdXJmYWNlLgorCSAqLworCWlmIChtYWluX3ggIT0gY2NzX3ggfHwgbWFpbl95ICE9IGNjc195
KSB7CisJCURSTV9ERUJVR19LTVMoIkJhZCBDQ1MgeC95IChtYWluICVkLCVkIGNjcyAlZCwlZCkg
ZnVsbCAobWFpbiAlZCwlZCBjY3MgJWQsJWQpXG4iLAorCQkJICAgICAgbWFpbl94LCBtYWluX3ks
CisJCQkgICAgICBjY3NfeCwgY2NzX3ksCisJCQkgICAgICBpbnRlbF9mYi0+bm9ybWFsWzBdLngs
CisJCQkgICAgICBpbnRlbF9mYi0+bm9ybWFsWzBdLnksCisJCQkgICAgICB4LCB5KTsKKwkJcmV0
dXJuIC1FSU5WQUw7CisJfQorCisJcmV0dXJuIDA7Cit9CisKIHN0YXRpYyBpbnQKIGludGVsX2Zp
bGxfZmJfaW5mbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCSAgIHN0cnVj
dCBkcm1fZnJhbWVidWZmZXIgKmZiKQpAQCAtMjcwNywzNiArMjc0Nyw5IEBAIGludGVsX2ZpbGxf
ZmJfaW5mbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCQlyZXR1cm4gcmV0
OwogCQl9CiAKLQkJaWYgKGlzX2Njc19tb2RpZmllcihmYi0+bW9kaWZpZXIpICYmIGkgPT0gMSkg
ewotCQkJaW50IGhzdWIgPSBmYi0+Zm9ybWF0LT5oc3ViOwotCQkJaW50IHZzdWIgPSBmYi0+Zm9y
bWF0LT52c3ViOwotCQkJaW50IHRpbGVfd2lkdGgsIHRpbGVfaGVpZ2h0OwotCQkJaW50IG1haW5f
eCwgbWFpbl95OwotCQkJaW50IGNjc194LCBjY3NfeTsKLQotCQkJaW50ZWxfdGlsZV9kaW1zKGZi
LCBpLCAmdGlsZV93aWR0aCwgJnRpbGVfaGVpZ2h0KTsKLQkJCXRpbGVfd2lkdGggKj0gaHN1YjsK
LQkJCXRpbGVfaGVpZ2h0ICo9IHZzdWI7Ci0KLQkJCWNjc194ID0gKHggKiBoc3ViKSAlIHRpbGVf
d2lkdGg7Ci0JCQljY3NfeSA9ICh5ICogdnN1YikgJSB0aWxlX2hlaWdodDsKLQkJCW1haW5feCA9
IGludGVsX2ZiLT5ub3JtYWxbMF0ueCAlIHRpbGVfd2lkdGg7Ci0JCQltYWluX3kgPSBpbnRlbF9m
Yi0+bm9ybWFsWzBdLnkgJSB0aWxlX2hlaWdodDsKLQotCQkJLyoKLQkJCSAqIENDUyBkb2Vzbid0
IGhhdmUgaXRzIG93biB4L3kgb2Zmc2V0IHJlZ2lzdGVyLCBzbyB0aGUgaW50cmEgQ0NTIHRpbGUK
LQkJCSAqIHgveSBvZmZzZXRzIG11c3QgbWF0Y2ggYmV0d2VlbiBDQ1MgYW5kIHRoZSBtYWluIHN1
cmZhY2UuCi0JCQkgKi8KLQkJCWlmIChtYWluX3ggIT0gY2NzX3ggfHwgbWFpbl95ICE9IGNjc195
KSB7Ci0JCQkJRFJNX0RFQlVHX0tNUygiQmFkIENDUyB4L3kgKG1haW4gJWQsJWQgY2NzICVkLCVk
KSBmdWxsIChtYWluICVkLCVkIGNjcyAlZCwlZClcbiIsCi0JCQkJCSAgICAgIG1haW5feCwgbWFp
bl95LAotCQkJCQkgICAgICBjY3NfeCwgY2NzX3ksCi0JCQkJCSAgICAgIGludGVsX2ZiLT5ub3Jt
YWxbMF0ueCwKLQkJCQkJICAgICAgaW50ZWxfZmItPm5vcm1hbFswXS55LAotCQkJCQkgICAgICB4
LCB5KTsKLQkJCQlyZXR1cm4gLUVJTlZBTDsKLQkJCX0KLQkJfQorCQlyZXQgPSBpbnRlbF9mYl9j
aGVja19jY3NfeHkoZmIsIGksIHgsIHkpOworCQlpZiAocmV0KQorCQkJcmV0dXJuIHJldDsKIAog
CQkvKgogCQkgKiBUaGUgZmVuY2UgKGlmIHVzZWQpIGlzIGFsaWduZWQgdG8gdGhlIHN0YXJ0IG9m
IHRoZSBvYmplY3QKLS0gCjIuMjIuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vaW50ZWwtZ2Z4Cg==

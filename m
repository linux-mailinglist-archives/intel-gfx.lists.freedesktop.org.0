Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5475D3A0F20
	for <lists+intel-gfx@lfdr.de>; Wed,  9 Jun 2021 10:56:56 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B36AA6E4E6;
	Wed,  9 Jun 2021 08:56:54 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9E8406E4E6
 for <intel-gfx@lists.freedesktop.org>; Wed,  9 Jun 2021 08:56:53 +0000 (UTC)
IronPort-SDR: 1aheapRxwPsvi7Q4q6NjoIyeDZocwbTxmdj89o2CS1cYvaNcW8XaZHoCRD2hC3vi5m7Hgaq1OO
 Pfea+mXbOGmA==
X-IronPort-AV: E=McAfee;i="6200,9189,10009"; a="192143488"
X-IronPort-AV: E=Sophos;i="5.83,260,1616482800"; d="scan'208";a="192143488"
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by orsmga101.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 09 Jun 2021 01:56:52 -0700
IronPort-SDR: sOxwYQVZs68gByCP8N6Iyit61XZu2D3MULr9b/9TEAwEcYAsdYw7iVrT4nl7NHIXGFd595IL7b
 QmetYt4XyQ1A==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.83,260,1616482800"; d="scan'208";a="482305113"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.171])
 by orsmga001.jf.intel.com with SMTP; 09 Jun 2021 01:56:50 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Wed, 09 Jun 2021 11:56:49 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  9 Jun 2021 11:56:32 +0300
Message-Id: <20210609085632.22026-7-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.31.1
In-Reply-To: <20210609085632.22026-1-ville.syrjala@linux.intel.com>
References: <20210609085632.22026-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 6/6] drm/i915: s/intel_crtc/crtc/
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkNs
ZWFyIG91dCB0aGUgc3RyYWdnbGVyICdpbnRlbF9jcnRjJyB2YXJpYWJsZXMuCgpTaWduZWQtb2Zm
LWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgotLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jICAgICAgICB8ICA0ICstCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NydGMuYyAgICAgfCAgOCArKy0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jICAgICAgfCAgNiArLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jICB8ICA2ICstLQogLi4u
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9kZWJ1Z2ZzLmMgIHwgMjggKysrKysrLS0t
LS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jICAgICAgIHwgIDQg
Ky0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMgICB8ICA0ICst
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZkaS5jICAgICAgfCAyMCArKysr
LS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5jICAgICB8IDQy
ICsrKysrKysrKy0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
bHZkcy5jICAgICB8ICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nk
dm8uYyAgICAgfCAgNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF90di5j
ICAgICAgIHwgMTMgKysrLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L3NrbF9zY2Fs
ZXIuYyAgICAgfCAyNyArKysrKystLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
dmx2X2RzaS5jICAgICAgICB8IDEzICsrKy0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9p
cnEuYyAgICAgICAgICAgICAgIHwgMjIgKysrKystLS0tLQogMTUgZmlsZXMgY2hhbmdlZCwgMTAw
IGluc2VydGlvbnMoKyksIDEwNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ljbF9kc2kuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaWNsX2RzaS5jCmluZGV4IDE2ODEyNDg4YzVkZC4uNTVjZWFlNmE4ZGU1IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ljbF9kc2kuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ljbF9kc2kuYwpAQCAtNzI5LDggKzcyOSw4IEBAIGdlbjExX2Rz
aV9jb25maWd1cmVfdHJhbnNjb2RlcihzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIHsK
IAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXItPmJh
c2UuZGV2KTsKIAlzdHJ1Y3QgaW50ZWxfZHNpICppbnRlbF9kc2kgPSBlbmNfdG9faW50ZWxfZHNp
KGVuY29kZXIpOwotCXN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0gdG9faW50ZWxfY3J0
YyhwaXBlX2NvbmZpZy0+dWFwaS5jcnRjKTsKLQllbnVtIHBpcGUgcGlwZSA9IGludGVsX2NydGMt
PnBpcGU7CisJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKHBpcGVfY29u
ZmlnLT51YXBpLmNydGMpOworCWVudW0gcGlwZSBwaXBlID0gY3J0Yy0+cGlwZTsKIAl1MzIgdG1w
OwogCWVudW0gcG9ydCBwb3J0OwogCWVudW0gdHJhbnNjb2RlciBkc2lfdHJhbnM7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NydGMuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3J0Yy5jCmluZGV4IDk1ZmYxNzA3YjRiZC4uNDQ4
YzRkOTlhYzM1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2NydGMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NydGMuYwpA
QCAtMTYzLDEyICsxNjMsMTIgQEAgc3RhdGljIHZvaWQgaW50ZWxfY3J0Y19mcmVlKHN0cnVjdCBp
bnRlbF9jcnRjICpjcnRjKQogCWtmcmVlKGNydGMpOwogfQogCi1zdGF0aWMgdm9pZCBpbnRlbF9j
cnRjX2Rlc3Ryb3koc3RydWN0IGRybV9jcnRjICpjcnRjKQorc3RhdGljIHZvaWQgaW50ZWxfY3J0
Y19kZXN0cm95KHN0cnVjdCBkcm1fY3J0YyAqX2NydGMpCiB7Ci0Jc3RydWN0IGludGVsX2NydGMg
KmludGVsX2NydGMgPSB0b19pbnRlbF9jcnRjKGNydGMpOworCXN0cnVjdCBpbnRlbF9jcnRjICpj
cnRjID0gdG9faW50ZWxfY3J0YyhfY3J0Yyk7CiAKLQlkcm1fY3J0Y19jbGVhbnVwKGNydGMpOwot
CWtmcmVlKGludGVsX2NydGMpOworCWRybV9jcnRjX2NsZWFudXAoJmNydGMtPmJhc2UpOworCWtm
cmVlKGNydGMpOwogfQogCiBzdGF0aWMgaW50IGludGVsX2NydGNfbGF0ZV9yZWdpc3RlcihzdHJ1
Y3QgZHJtX2NydGMgKmNydGMpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2RkaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGku
YwppbmRleCAzOTA4NjliZDZiNjMuLjMxM2ZkODZjODI3YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2RkaS5jCkBAIC0zNTc3LDcgKzM1NzcsNyBAQCBzdGF0aWMgdm9pZCBp
bnRlbF9kZGlfcmVhZF9mdW5jX2N0bChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJ
CQkgICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnKQogewogCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOwot
CXN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0gdG9faW50ZWxfY3J0YyhwaXBlX2NvbmZp
Zy0+dWFwaS5jcnRjKTsKKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMo
cGlwZV9jb25maWctPnVhcGkuY3J0Yyk7CiAJZW51bSB0cmFuc2NvZGVyIGNwdV90cmFuc2NvZGVy
ID0gcGlwZV9jb25maWctPmNwdV90cmFuc2NvZGVyOwogCXN0cnVjdCBpbnRlbF9kaWdpdGFsX3Bv
cnQgKmRpZ19wb3J0ID0gZW5jX3RvX2RpZ19wb3J0KGVuY29kZXIpOwogCXUzMiB0ZW1wLCBmbGFn
cyA9IDA7CkBAIC0zNjQwLDcgKzM2NDAsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9kZGlfcmVhZF9m
dW5jX2N0bChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJCXBpcGVfY29uZmlnLT5v
dXRwdXRfdHlwZXMgfD0gQklUKElOVEVMX09VVFBVVF9EUCk7CiAJCXBpcGVfY29uZmlnLT5sYW5l
X2NvdW50ID0KIAkJCSgodGVtcCAmIERESV9QT1JUX1dJRFRIX01BU0spID4+IERESV9QT1JUX1dJ
RFRIX1NISUZUKSArIDE7Ci0JCWludGVsX2RwX2dldF9tX24oaW50ZWxfY3J0YywgcGlwZV9jb25m
aWcpOworCQlpbnRlbF9kcF9nZXRfbV9uKGNydGMsIHBpcGVfY29uZmlnKTsKIAogCQlpZiAoRElT
UExBWV9WRVIoZGV2X3ByaXYpID49IDExKSB7CiAJCQlpOTE1X3JlZ190IGRwX3RwX2N0bCA9IGRw
X3RwX2N0bF9yZWcoZW5jb2RlciwgcGlwZV9jb25maWcpOwpAQCAtMzY3MCw3ICszNjcwLDcgQEAg
c3RhdGljIHZvaWQgaW50ZWxfZGRpX3JlYWRfZnVuY19jdGwoc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXIsCiAJCQlwaXBlX2NvbmZpZy0+bXN0X21hc3Rlcl90cmFuc2NvZGVyID0KIAkJCQkJ
UkVHX0ZJRUxEX0dFVChUUkFOU19ERElfTVNUX1RSQU5TUE9SVF9TRUxFQ1RfTUFTSywgdGVtcCk7
CiAKLQkJaW50ZWxfZHBfZ2V0X21fbihpbnRlbF9jcnRjLCBwaXBlX2NvbmZpZyk7CisJCWludGVs
X2RwX2dldF9tX24oY3J0YywgcGlwZV9jb25maWcpOwogCiAJCXBpcGVfY29uZmlnLT5pbmZvZnJh
bWVzLmVuYWJsZSB8PQogCQkJaW50ZWxfaGRtaV9pbmZvZnJhbWVzX2VuYWJsZWQoZW5jb2Rlciwg
cGlwZV9jb25maWcpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXkuYwppbmRleCA2MjIyMTI0M2ZjYTkuLmJkNTRiOTk5MjlhMSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKQEAgLTI3MTcsMTAgKzI3MTcsMTAgQEAg
dm9pZCBoc3dfZGlzYWJsZV9pcHMoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNf
c3RhdGUpCiAJaW50ZWxfd2FpdF9mb3JfdmJsYW5rKGRldl9wcml2LCBjcnRjLT5waXBlKTsKIH0K
IAotc3RhdGljIHZvaWQgaW50ZWxfY3J0Y19kcG1zX292ZXJsYXlfZGlzYWJsZShzdHJ1Y3QgaW50
ZWxfY3J0YyAqaW50ZWxfY3J0YykKK3N0YXRpYyB2b2lkIGludGVsX2NydGNfZHBtc19vdmVybGF5
X2Rpc2FibGUoc3RydWN0IGludGVsX2NydGMgKmNydGMpCiB7Ci0JaWYgKGludGVsX2NydGMtPm92
ZXJsYXkpCi0JCSh2b2lkKSBpbnRlbF9vdmVybGF5X3N3aXRjaF9vZmYoaW50ZWxfY3J0Yy0+b3Zl
cmxheSk7CisJaWYgKGNydGMtPm92ZXJsYXkpCisJCSh2b2lkKSBpbnRlbF9vdmVybGF5X3N3aXRj
aF9vZmYoY3J0Yy0+b3ZlcmxheSk7CiAKIAkvKiBMZXQgdXNlcnNwYWNlIHN3aXRjaCB0aGUgb3Zl
cmxheSBvbiBhZ2Fpbi4gSW4gbW9zdCBjYXNlcyB1c2Vyc3BhY2UKIAkgKiBoYXMgdG8gcmVjb21w
dXRlIHdoZXJlIHRvIHB1dCBpdCBhbnl3YXkuCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfZGVidWdmcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X2RlYnVnZnMuYwppbmRleCA4OGJiMDVkNWM0ODMuLmM2
YzhmNjZjMDE3NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5X2RlYnVnZnMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Rpc3BsYXlfZGVidWdmcy5jCkBAIC0xMjI1LDcgKzEyMjUsNyBAQCBzdGF0aWMgaW50IGk5
MTVfZGRiX2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpCiAKIHN0YXRpYyB2
b2lkIGRycnNfc3RhdHVzX3Blcl9jcnRjKHN0cnVjdCBzZXFfZmlsZSAqbSwKIAkJCQkgc3RydWN0
IGRybV9kZXZpY2UgKmRldiwKLQkJCQkgc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMpCisJ
CQkJIHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiA9IHRvX2k5MTUoZGV2KTsKIAlzdHJ1Y3QgaTkxNV9kcnJzICpkcnJzID0gJmRl
dl9wcml2LT5kcnJzOwpAQCAtMTIzNyw3ICsxMjM3LDcgQEAgc3RhdGljIHZvaWQgZHJyc19zdGF0
dXNfcGVyX2NydGMoc3RydWN0IHNlcV9maWxlICptLAogCWRybV9mb3JfZWFjaF9jb25uZWN0b3Jf
aXRlcihjb25uZWN0b3IsICZjb25uX2l0ZXIpIHsKIAkJYm9vbCBzdXBwb3J0ZWQgPSBmYWxzZTsK
IAotCQlpZiAoY29ubmVjdG9yLT5zdGF0ZS0+Y3J0YyAhPSAmaW50ZWxfY3J0Yy0+YmFzZSkKKwkJ
aWYgKGNvbm5lY3Rvci0+c3RhdGUtPmNydGMgIT0gJmNydGMtPmJhc2UpCiAJCQljb250aW51ZTsK
IAogCQlzZXFfcHJpbnRmKG0sICIlczpcbiIsIGNvbm5lY3Rvci0+bmFtZSk7CkBAIC0xMjUyLDcg
KzEyNTIsNyBAQCBzdGF0aWMgdm9pZCBkcnJzX3N0YXR1c19wZXJfY3J0YyhzdHJ1Y3Qgc2VxX2Zp
bGUgKm0sCiAKIAlzZXFfcHV0cyhtLCAiXG4iKTsKIAotCWlmICh0b19pbnRlbF9jcnRjX3N0YXRl
KGludGVsX2NydGMtPmJhc2Uuc3RhdGUpLT5oYXNfZHJycykgeworCWlmICh0b19pbnRlbF9jcnRj
X3N0YXRlKGNydGMtPmJhc2Uuc3RhdGUpLT5oYXNfZHJycykgewogCQlzdHJ1Y3QgaW50ZWxfcGFu
ZWwgKnBhbmVsOwogCiAJCW11dGV4X2xvY2soJmRycnMtPm11dGV4KTsKQEAgLTEyOTgsMTYgKzEy
OTgsMTYgQEAgc3RhdGljIGludCBpOTE1X2RycnNfc3RhdHVzKHN0cnVjdCBzZXFfZmlsZSAqbSwg
dm9pZCAqdW51c2VkKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IG5v
ZGVfdG9faTkxNShtLT5wcml2YXRlKTsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gJmRldl9w
cml2LT5kcm07Ci0Jc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGM7CisJc3RydWN0IGludGVs
X2NydGMgKmNydGM7CiAJaW50IGFjdGl2ZV9jcnRjX2NudCA9IDA7CiAKIAlkcm1fbW9kZXNldF9s
b2NrX2FsbChkZXYpOwotCWZvcl9lYWNoX2ludGVsX2NydGMoZGV2LCBpbnRlbF9jcnRjKSB7Ci0J
CWlmIChpbnRlbF9jcnRjLT5iYXNlLnN0YXRlLT5hY3RpdmUpIHsKKwlmb3JfZWFjaF9pbnRlbF9j
cnRjKGRldiwgY3J0YykgeworCQlpZiAoY3J0Yy0+YmFzZS5zdGF0ZS0+YWN0aXZlKSB7CiAJCQlh
Y3RpdmVfY3J0Y19jbnQrKzsKIAkJCXNlcV9wcmludGYobSwgIlxuQ1JUQyAlZDogICIsIGFjdGl2
ZV9jcnRjX2NudCk7CiAKLQkJCWRycnNfc3RhdHVzX3Blcl9jcnRjKG0sIGRldiwgaW50ZWxfY3J0
Yyk7CisJCQlkcnJzX3N0YXR1c19wZXJfY3J0YyhtLCBkZXYsIGNydGMpOwogCQl9CiAJfQogCWRy
bV9tb2Rlc2V0X3VubG9ja19hbGwoZGV2KTsKQEAgLTIwNjQsNyArMjA2NCw3IEBAIGk5MTVfZmlm
b191bmRlcnJ1bl9yZXNldF93cml0ZShzdHJ1Y3QgZmlsZSAqZmlscCwKIAkJCSAgICAgICBzaXpl
X3QgY250LCBsb2ZmX3QgKnBwb3MpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gZmlscC0+cHJpdmF0ZV9kYXRhOwotCXN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRj
OworCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjOwogCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSAm
ZGV2X3ByaXYtPmRybTsKIAlpbnQgcmV0OwogCWJvb2wgcmVzZXQ7CkBAIC0yMDc2LDE1ICsyMDc2
LDE1IEBAIGk5MTVfZmlmb191bmRlcnJ1bl9yZXNldF93cml0ZShzdHJ1Y3QgZmlsZSAqZmlscCwK
IAlpZiAoIXJlc2V0KQogCQlyZXR1cm4gY250OwogCi0JZm9yX2VhY2hfaW50ZWxfY3J0YyhkZXYs
IGludGVsX2NydGMpIHsKKwlmb3JfZWFjaF9pbnRlbF9jcnRjKGRldiwgY3J0YykgewogCQlzdHJ1
Y3QgZHJtX2NydGNfY29tbWl0ICpjb21taXQ7CiAJCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpj
cnRjX3N0YXRlOwogCi0JCXJldCA9IGRybV9tb2Rlc2V0X2xvY2tfc2luZ2xlX2ludGVycnVwdGli
bGUoJmludGVsX2NydGMtPmJhc2UubXV0ZXgpOworCQlyZXQgPSBkcm1fbW9kZXNldF9sb2NrX3Np
bmdsZV9pbnRlcnJ1cHRpYmxlKCZjcnRjLT5iYXNlLm11dGV4KTsKIAkJaWYgKHJldCkKIAkJCXJl
dHVybiByZXQ7CiAKLQkJY3J0Y19zdGF0ZSA9IHRvX2ludGVsX2NydGNfc3RhdGUoaW50ZWxfY3J0
Yy0+YmFzZS5zdGF0ZSk7CisJCWNydGNfc3RhdGUgPSB0b19pbnRlbF9jcnRjX3N0YXRlKGNydGMt
PmJhc2Uuc3RhdGUpOwogCQljb21taXQgPSBjcnRjX3N0YXRlLT51YXBpLmNvbW1pdDsKIAkJaWYg
KGNvbW1pdCkgewogCQkJcmV0ID0gd2FpdF9mb3JfY29tcGxldGlvbl9pbnRlcnJ1cHRpYmxlKCZj
b21taXQtPmh3X2RvbmUpOwpAQCAtMjA5NSwxMiArMjA5NSwxMiBAQCBpOTE1X2ZpZm9fdW5kZXJy
dW5fcmVzZXRfd3JpdGUoc3RydWN0IGZpbGUgKmZpbHAsCiAJCWlmICghcmV0ICYmIGNydGNfc3Rh
dGUtPmh3LmFjdGl2ZSkgewogCQkJZHJtX2RiZ19rbXMoJmRldl9wcml2LT5kcm0sCiAJCQkJICAg
ICJSZS1hcm1pbmcgRklGTyB1bmRlcnJ1bnMgb24gcGlwZSAlY1xuIiwKLQkJCQkgICAgcGlwZV9u
YW1lKGludGVsX2NydGMtPnBpcGUpKTsKKwkJCQkgICAgcGlwZV9uYW1lKGNydGMtPnBpcGUpKTsK
IAotCQkJaW50ZWxfY3J0Y19hcm1fZmlmb191bmRlcnJ1bihpbnRlbF9jcnRjLCBjcnRjX3N0YXRl
KTsKKwkJCWludGVsX2NydGNfYXJtX2ZpZm9fdW5kZXJydW4oY3J0YywgY3J0Y19zdGF0ZSk7CiAJ
CX0KIAotCQlkcm1fbW9kZXNldF91bmxvY2soJmludGVsX2NydGMtPmJhc2UubXV0ZXgpOworCQlk
cm1fbW9kZXNldF91bmxvY2soJmNydGMtPmJhc2UubXV0ZXgpOwogCiAJCWlmIChyZXQpCiAJCQly
ZXR1cm4gcmV0OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kcC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCmluZGV4IDVj
OTIyMjI4MzA0NC4uOWZmNTQyMGZhNjRjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2RwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kcC5jCkBAIC00NzQxLDcgKzQ3NDEsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9kcF9zZXRf
ZHJyc19zdGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCQkJICAgIGlu
dCByZWZyZXNoX3JhdGUpCiB7CiAJc3RydWN0IGludGVsX2RwICppbnRlbF9kcCA9IGRldl9wcml2
LT5kcnJzLmRwOwotCXN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0gdG9faW50ZWxfY3J0
YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOworCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9f
aW50ZWxfY3J0YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOwogCWVudW0gZHJyc19yZWZyZXNoX3Jh
dGVfdHlwZSBpbmRleCA9IERSUlNfSElHSF9SUjsKIAogCWlmIChyZWZyZXNoX3JhdGUgPD0gMCkg
ewpAQCAtNDc1NSw3ICs0NzU1LDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfZHBfc2V0X2RycnNfc3Rh
dGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQlyZXR1cm47CiAJfQogCi0J
aWYgKCFpbnRlbF9jcnRjKSB7CisJaWYgKCFjcnRjKSB7CiAJCWRybV9kYmdfa21zKCZkZXZfcHJp
di0+ZHJtLAogCQkJICAgICJEUlJTOiBpbnRlbF9jcnRjIG5vdCBpbml0aWFsaXplZFxuIik7CiAJ
CXJldHVybjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHBfbXN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5jCmlu
ZGV4IGIxNzBlMjcyYmRlZS4uNzBmZTkwYmVhZjZjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMKQEAgLTMwOCw5ICszMDgsOSBAQCBpbnRlbF9kcF9tc3Rf
YXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCiAJICogY29ubmVj
dG9yCiAJICovCiAJaWYgKG5ld19jcnRjKSB7Ci0JCXN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9j
cnRjID0gdG9faW50ZWxfY3J0YyhuZXdfY3J0Yyk7CisJCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRj
ID0gdG9faW50ZWxfY3J0YyhuZXdfY3J0Yyk7CiAJCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpj
cnRjX3N0YXRlID0KLQkJCWludGVsX2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUoc3RhdGUsIGlu
dGVsX2NydGMpOworCQkJaW50ZWxfYXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShzdGF0ZSwgY3J0
Yyk7CiAKIAkJaWYgKCFjcnRjX3N0YXRlIHx8CiAJCSAgICAhZHJtX2F0b21pY19jcnRjX25lZWRz
X21vZGVzZXQoJmNydGNfc3RhdGUtPnVhcGkpIHx8CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZkaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9mZGkuYwppbmRleCBjZWYxMDYxZmQ2Y2IuLjk3YmIzZWRjYTljOSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mZGkuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZkaS5jCkBAIC05NiwxMCArOTYsMTAgQEAgc3Rh
dGljIGludCBpbGtfY2hlY2tfZmRpX2xhbmVzKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIGVudW0g
cGlwZSBwaXBlLAogCX0KIH0KIAotaW50IGlsa19mZGlfY29tcHV0ZV9jb25maWcoc3RydWN0IGlu
dGVsX2NydGMgKmludGVsX2NydGMsCi0JCQkJICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlw
ZV9jb25maWcpCitpbnQgaWxrX2ZkaV9jb21wdXRlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfY3J0YyAq
Y3J0YywKKwkJCSAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZykKIHsKLQlz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gaW50ZWxfY3J0Yy0+YmFzZS5kZXY7CisJc3RydWN0IGRy
bV9kZXZpY2UgKmRldiA9IGNydGMtPmJhc2UuZGV2OwogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1ID0gdG9faTkxNShkZXYpOwogCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICph
ZGp1c3RlZF9tb2RlID0gJnBpcGVfY29uZmlnLT5ody5hZGp1c3RlZF9tb2RlOwogCWludCBsYW5l
LCBsaW5rX2J3LCBmZGlfZG90Y2xvY2ssIHJldDsKQEAgLTEyNSw3ICsxMjUsNyBAQCBpbnQgaWxr
X2ZkaV9jb21wdXRlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0YywKIAlpbnRl
bF9saW5rX2NvbXB1dGVfbV9uKHBpcGVfY29uZmlnLT5waXBlX2JwcCwgbGFuZSwgZmRpX2RvdGNs
b2NrLAogCQkJICAgICAgIGxpbmtfYncsICZwaXBlX2NvbmZpZy0+ZmRpX21fbiwgZmFsc2UsIGZh
bHNlKTsKIAotCXJldCA9IGlsa19jaGVja19mZGlfbGFuZXMoZGV2LCBpbnRlbF9jcnRjLT5waXBl
LCBwaXBlX2NvbmZpZyk7CisJcmV0ID0gaWxrX2NoZWNrX2ZkaV9sYW5lcyhkZXYsIGNydGMtPnBp
cGUsIHBpcGVfY29uZmlnKTsKIAlpZiAocmV0ID09IC1FREVBRExLKQogCQlyZXR1cm4gcmV0Owog
CkBAIC02OTEsOSArNjkxLDkgQEAgdm9pZCBoc3dfZmRpX2xpbmtfdHJhaW4oc3RydWN0IGludGVs
X2VuY29kZXIgKmVuY29kZXIsCiAKIHZvaWQgaWxrX2ZkaV9wbGxfZW5hYmxlKGNvbnN0IHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogewotCXN0cnVjdCBpbnRlbF9jcnRjICpp
bnRlbF9jcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOwotCXN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoaW50ZWxfY3J0Yy0+YmFzZS5k
ZXYpOwotCWVudW0gcGlwZSBwaXBlID0gaW50ZWxfY3J0Yy0+cGlwZTsKKwlzdHJ1Y3QgaW50ZWxf
Y3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKTsKKwlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMtPmJhc2UuZGV2KTsK
KwllbnVtIHBpcGUgcGlwZSA9IGNydGMtPnBpcGU7CiAJaTkxNV9yZWdfdCByZWc7CiAJdTMyIHRl
bXA7CiAKQEAgLTcyNiwxMSArNzI2LDExIEBAIHZvaWQgaWxrX2ZkaV9wbGxfZW5hYmxlKGNvbnN0
IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogCX0KIH0KIAotdm9pZCBpbGtf
ZmRpX3BsbF9kaXNhYmxlKHN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjKQordm9pZCBpbGtf
ZmRpX3BsbF9kaXNhYmxlKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjKQogewotCXN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYgPSBpbnRlbF9jcnRjLT5iYXNlLmRldjsKKwlzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2ID0gY3J0Yy0+YmFzZS5kZXY7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
ID0gdG9faTkxNShkZXYpOwotCWVudW0gcGlwZSBwaXBlID0gaW50ZWxfY3J0Yy0+cGlwZTsKKwll
bnVtIHBpcGUgcGlwZSA9IGNydGMtPnBpcGU7CiAJaTkxNV9yZWdfdCByZWc7CiAJdTMyIHRlbXA7
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9oZG1pLmMKaW5kZXggN2U1MWM5
OGM0NzVlLi44NTJhZjJiMjM1NDAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfaGRtaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfaGRtaS5jCkBAIC0yNzAsOCArMjcwLDggQEAgc3RhdGljIHZvaWQgaWJ4X3dyaXRlX2luZm9m
cmFtZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIHsKIAljb25zdCB1MzIgKmRhdGEg
PSBmcmFtZTsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVu
Y29kZXItPmJhc2UuZGV2KTsKLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0YyA9IHRvX2lu
dGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKTsKLQlpOTE1X3JlZ190IHJlZyA9IFRWSURF
T19ESVBfQ1RMKGludGVsX2NydGMtPnBpcGUpOworCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0g
dG9faW50ZWxfY3J0YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOworCWk5MTVfcmVnX3QgcmVnID0g
VFZJREVPX0RJUF9DVEwoY3J0Yy0+cGlwZSk7CiAJdTMyIHZhbCA9IGludGVsX2RlX3JlYWQoZGV2
X3ByaXYsIHJlZyk7CiAJaW50IGk7CiAKQEAgLTI4NiwxMyArMjg2LDEzIEBAIHN0YXRpYyB2b2lk
IGlieF93cml0ZV9pbmZvZnJhbWUoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJaW50
ZWxfZGVfd3JpdGUoZGV2X3ByaXYsIHJlZywgdmFsKTsKIAogCWZvciAoaSA9IDA7IGkgPCBsZW47
IGkgKz0gNCkgewotCQlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwgVFZJREVPX0RJUF9EQVRBKGlu
dGVsX2NydGMtPnBpcGUpLAorCQlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwgVFZJREVPX0RJUF9E
QVRBKGNydGMtPnBpcGUpLAogCQkJICAgICAgICpkYXRhKTsKIAkJZGF0YSsrOwogCX0KIAkvKiBX
cml0ZSBldmVyeSBwb3NzaWJsZSBkYXRhIGJ5dGUgdG8gZm9yY2UgY29ycmVjdCBFQ0MgY2FsY3Vs
YXRpb24uICovCiAJZm9yICg7IGkgPCBWSURFT19ESVBfREFUQV9TSVpFOyBpICs9IDQpCi0JCWlu
dGVsX2RlX3dyaXRlKGRldl9wcml2LCBUVklERU9fRElQX0RBVEEoaW50ZWxfY3J0Yy0+cGlwZSks
IDApOworCQlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwgVFZJREVPX0RJUF9EQVRBKGNydGMtPnBp
cGUpLCAwKTsKIAogCXZhbCB8PSBnNHhfaW5mb2ZyYW1lX2VuYWJsZSh0eXBlKTsKIAl2YWwgJj0g
flZJREVPX0RJUF9GUkVRX01BU0s7CkBAIC0zNDksOCArMzQ5LDggQEAgc3RhdGljIHZvaWQgY3B0
X3dyaXRlX2luZm9mcmFtZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIHsKIAljb25z
dCB1MzIgKmRhdGEgPSBmcmFtZTsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYg
PSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsKLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxf
Y3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKTsKLQlpOTE1X3JlZ190
IHJlZyA9IFRWSURFT19ESVBfQ1RMKGludGVsX2NydGMtPnBpcGUpOworCXN0cnVjdCBpbnRlbF9j
cnRjICpjcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOworCWk5MTVf
cmVnX3QgcmVnID0gVFZJREVPX0RJUF9DVEwoY3J0Yy0+cGlwZSk7CiAJdTMyIHZhbCA9IGludGVs
X2RlX3JlYWQoZGV2X3ByaXYsIHJlZyk7CiAJaW50IGk7CiAKQEAgLTM2OCwxMyArMzY4LDEzIEBA
IHN0YXRpYyB2b2lkIGNwdF93cml0ZV9pbmZvZnJhbWUoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIsCiAJaW50ZWxfZGVfd3JpdGUoZGV2X3ByaXYsIHJlZywgdmFsKTsKIAogCWZvciAoaSA9
IDA7IGkgPCBsZW47IGkgKz0gNCkgewotCQlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwgVFZJREVP
X0RJUF9EQVRBKGludGVsX2NydGMtPnBpcGUpLAorCQlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwg
VFZJREVPX0RJUF9EQVRBKGNydGMtPnBpcGUpLAogCQkJICAgICAgICpkYXRhKTsKIAkJZGF0YSsr
OwogCX0KIAkvKiBXcml0ZSBldmVyeSBwb3NzaWJsZSBkYXRhIGJ5dGUgdG8gZm9yY2UgY29ycmVj
dCBFQ0MgY2FsY3VsYXRpb24uICovCiAJZm9yICg7IGkgPCBWSURFT19ESVBfREFUQV9TSVpFOyBp
ICs9IDQpCi0JCWludGVsX2RlX3dyaXRlKGRldl9wcml2LCBUVklERU9fRElQX0RBVEEoaW50ZWxf
Y3J0Yy0+cGlwZSksIDApOworCQlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwgVFZJREVPX0RJUF9E
QVRBKGNydGMtPnBpcGUpLCAwKTsKIAogCXZhbCB8PSBnNHhfaW5mb2ZyYW1lX2VuYWJsZSh0eXBl
KTsKIAl2YWwgJj0gflZJREVPX0RJUF9GUkVRX01BU0s7CkBAIC00MjcsOCArNDI3LDggQEAgc3Rh
dGljIHZvaWQgdmx2X3dyaXRlX2luZm9mcmFtZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2Rl
ciwKIHsKIAljb25zdCB1MzIgKmRhdGEgPSBmcmFtZTsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsKLQlzdHJ1Y3QgaW50ZWxf
Y3J0YyAqaW50ZWxfY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKTsK
LQlpOTE1X3JlZ190IHJlZyA9IFZMVl9UVklERU9fRElQX0NUTChpbnRlbF9jcnRjLT5waXBlKTsK
KwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFw
aS5jcnRjKTsKKwlpOTE1X3JlZ190IHJlZyA9IFZMVl9UVklERU9fRElQX0NUTChjcnRjLT5waXBl
KTsKIAl1MzIgdmFsID0gaW50ZWxfZGVfcmVhZChkZXZfcHJpdiwgcmVnKTsKIAlpbnQgaTsKIApA
QCAtNDQ0LDEzICs0NDQsMTMgQEAgc3RhdGljIHZvaWQgdmx2X3dyaXRlX2luZm9mcmFtZShzdHJ1
Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAogCWZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0g
NCkgewogCQlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwKLQkJCSAgICAgICBWTFZfVFZJREVPX0RJ
UF9EQVRBKGludGVsX2NydGMtPnBpcGUpLCAqZGF0YSk7CisJCQkgICAgICAgVkxWX1RWSURFT19E
SVBfREFUQShjcnRjLT5waXBlKSwgKmRhdGEpOwogCQlkYXRhKys7CiAJfQogCS8qIFdyaXRlIGV2
ZXJ5IHBvc3NpYmxlIGRhdGEgYnl0ZSB0byBmb3JjZSBjb3JyZWN0IEVDQyBjYWxjdWxhdGlvbi4g
Ki8KIAlmb3IgKDsgaSA8IFZJREVPX0RJUF9EQVRBX1NJWkU7IGkgKz0gNCkKIAkJaW50ZWxfZGVf
d3JpdGUoZGV2X3ByaXYsCi0JCQkgICAgICAgVkxWX1RWSURFT19ESVBfREFUQShpbnRlbF9jcnRj
LT5waXBlKSwgMCk7CisJCQkgICAgICAgVkxWX1RWSURFT19ESVBfREFUQShjcnRjLT5waXBlKSwg
MCk7CiAKIAl2YWwgfD0gZzR4X2luZm9mcmFtZV9lbmFibGUodHlwZSk7CiAJdmFsICY9IH5WSURF
T19ESVBfRlJFUV9NQVNLOwpAQCAtMTA0MCwxMCArMTA0MCwxMCBAQCBzdGF0aWMgdm9pZCBpYnhf
c2V0X2luZm9mcmFtZXMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQkgICAgICAg
Y29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGUpCiB7CiAJc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7
Ci0Jc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3Rh
dGUtPnVhcGkuY3J0Yyk7CisJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRj
KGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7CiAJc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqZGln
X3BvcnQgPSBlbmNfdG9fZGlnX3BvcnQoZW5jb2Rlcik7CiAJc3RydWN0IGludGVsX2hkbWkgKmlu
dGVsX2hkbWkgPSAmZGlnX3BvcnQtPmhkbWk7Ci0JaTkxNV9yZWdfdCByZWcgPSBUVklERU9fRElQ
X0NUTChpbnRlbF9jcnRjLT5waXBlKTsKKwlpOTE1X3JlZ190IHJlZyA9IFRWSURFT19ESVBfQ1RM
KGNydGMtPnBpcGUpOwogCXUzMiB2YWwgPSBpbnRlbF9kZV9yZWFkKGRldl9wcml2LCByZWcpOwog
CXUzMiBwb3J0ID0gVklERU9fRElQX1BPUlQoZW5jb2Rlci0+cG9ydCk7CiAKQEAgLTEwOTksOSAr
MTA5OSw5IEBAIHN0YXRpYyB2b2lkIGNwdF9zZXRfaW5mb2ZyYW1lcyhzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqZW5jb2RlciwKIAkJCSAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0
ZSAqY29ubl9zdGF0ZSkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0
b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsKLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0
YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKTsKKwlzdHJ1Y3QgaW50ZWxf
Y3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKTsKIAlzdHJ1
Y3QgaW50ZWxfaGRtaSAqaW50ZWxfaGRtaSA9IGVuY190b19pbnRlbF9oZG1pKGVuY29kZXIpOwot
CWk5MTVfcmVnX3QgcmVnID0gVFZJREVPX0RJUF9DVEwoaW50ZWxfY3J0Yy0+cGlwZSk7CisJaTkx
NV9yZWdfdCByZWcgPSBUVklERU9fRElQX0NUTChjcnRjLT5waXBlKTsKIAl1MzIgdmFsID0gaW50
ZWxfZGVfcmVhZChkZXZfcHJpdiwgcmVnKTsKIAogCWFzc2VydF9oZG1pX3BvcnRfZGlzYWJsZWQo
aW50ZWxfaGRtaSk7CkBAIC0xMTQ4LDkgKzExNDgsOSBAQCBzdGF0aWMgdm9pZCB2bHZfc2V0X2lu
Zm9mcmFtZXMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQkgICAgICAgY29uc3Qg
c3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGUpCiB7CiAJc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7Ci0Jc3Ry
dWN0IGludGVsX2NydGMgKmludGVsX2NydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVh
cGkuY3J0Yyk7CisJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNf
c3RhdGUtPnVhcGkuY3J0Yyk7CiAJc3RydWN0IGludGVsX2hkbWkgKmludGVsX2hkbWkgPSBlbmNf
dG9faW50ZWxfaGRtaShlbmNvZGVyKTsKLQlpOTE1X3JlZ190IHJlZyA9IFZMVl9UVklERU9fRElQ
X0NUTChpbnRlbF9jcnRjLT5waXBlKTsKKwlpOTE1X3JlZ190IHJlZyA9IFZMVl9UVklERU9fRElQ
X0NUTChjcnRjLT5waXBlKTsKIAl1MzIgdmFsID0gaW50ZWxfZGVfcmVhZChkZXZfcHJpdiwgcmVn
KTsKIAl1MzIgcG9ydCA9IFZJREVPX0RJUF9QT1JUKGVuY29kZXItPnBvcnQpOwogCkBAIC0xNDY1
LDE0ICsxNDY1LDEyIEBAIHN0YXRpYyBpbnQga2JsX3JlcG9zaXRpb25pbmdfZW5jX2VuX3NpZ25h
bChzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IsCiB7CiAJc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShjb25uZWN0b3ItPmJhc2UuZGV2KTsKIAlzdHJ1
Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCA9IGludGVsX2F0dGFjaGVkX2RpZ19wb3J0
KGNvbm5lY3Rvcik7Ci0Jc3RydWN0IGRybV9jcnRjICpjcnRjID0gY29ubmVjdG9yLT5iYXNlLnN0
YXRlLT5jcnRjOwotCXN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0gY29udGFpbmVyX29m
KGNydGMsCi0JCQkJCQkgICAgIHN0cnVjdCBpbnRlbF9jcnRjLCBiYXNlKTsKKwlzdHJ1Y3QgaW50
ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY29ubmVjdG9yLT5iYXNlLnN0YXRlLT5jcnRj
KTsKIAl1MzIgc2NhbmxpbmU7CiAJaW50IHJldDsKIAogCWZvciAoOzspIHsKLQkJc2NhbmxpbmUg
PSBpbnRlbF9kZV9yZWFkKGRldl9wcml2LCBQSVBFRFNMKGludGVsX2NydGMtPnBpcGUpKTsKKwkJ
c2NhbmxpbmUgPSBpbnRlbF9kZV9yZWFkKGRldl9wcml2LCBQSVBFRFNMKGNydGMtPnBpcGUpKTsK
IAkJaWYgKHNjYW5saW5lID4gMTAwICYmIHNjYW5saW5lIDwgMjAwKQogCQkJYnJlYWs7CiAJCXVz
bGVlcF9yYW5nZSgyNSwgNTApOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9sdmRzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2x2
ZHMuYwppbmRleCA3ZjQwZTlmNjBiYzIuLmUwMzgxYjBmY2U5MSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9sdmRzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9sdmRzLmMKQEAgLTQxMSwxMiArNDExLDEyIEBAIHN0YXRpYyBp
bnQgaW50ZWxfbHZkc19jb21wdXRlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqaW50ZWxf
ZW5jb2RlciwKIAlzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICppbnRlbF9jb25uZWN0b3IgPQogCQls
dmRzX2VuY29kZXItPmF0dGFjaGVkX2Nvbm5lY3RvcjsKIAlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZSAqYWRqdXN0ZWRfbW9kZSA9ICZwaXBlX2NvbmZpZy0+aHcuYWRqdXN0ZWRfbW9kZTsKLQlzdHJ1
Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0YyA9IHRvX2ludGVsX2NydGMocGlwZV9jb25maWctPnVh
cGkuY3J0Yyk7CisJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKHBpcGVf
Y29uZmlnLT51YXBpLmNydGMpOwogCXVuc2lnbmVkIGludCBsdmRzX2JwcDsKIAlpbnQgcmV0Owog
CiAJLyogU2hvdWxkIG5ldmVyIGhhcHBlbiEhICovCi0JaWYgKERJU1BMQVlfVkVSKGRldl9wcml2
KSA8IDQgJiYgaW50ZWxfY3J0Yy0+cGlwZSA9PSAwKSB7CisJaWYgKERJU1BMQVlfVkVSKGRldl9w
cml2KSA8IDQgJiYgY3J0Yy0+cGlwZSA9PSAwKSB7CiAJCWRybV9lcnIoJmRldl9wcml2LT5kcm0s
ICJDYW4ndCBzdXBwb3J0IExWRFMgb24gcGlwZSBBXG4iKTsKIAkJcmV0dXJuIC1FSU5WQUw7CiAJ
fQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zZHZvLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nkdm8uYwppbmRleCBlNGY5MWQ3
YTVjNjAuLjZjYjI3NTk5ZWEwMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9zZHZvLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9zZHZvLmMKQEAgLTE4MjQsNyArMTgyNCw3IEBAIHN0YXRpYyB2b2lkIGludGVsX2VuYWJsZV9z
ZHZvKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAogCXN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYgPSBlbmNvZGVyLT5iYXNlLmRldjsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYgPSB0b19pOTE1KGRldik7CiAJc3RydWN0IGludGVsX3Nkdm8gKmludGVsX3Nkdm8gPSB0
b19zZHZvKGVuY29kZXIpOwotCXN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0gdG9faW50
ZWxfY3J0YyhwaXBlX2NvbmZpZy0+dWFwaS5jcnRjKTsKKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0
YyA9IHRvX2ludGVsX2NydGMocGlwZV9jb25maWctPnVhcGkuY3J0Yyk7CiAJdTMyIHRlbXA7CiAJ
Ym9vbCBpbnB1dDEsIGlucHV0MjsKIAlpbnQgaTsKQEAgLTE4MzUsNyArMTgzNSw3IEBAIHN0YXRp
YyB2b2lkIGludGVsX2VuYWJsZV9zZHZvKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRl
LAogCWludGVsX3Nkdm9fd3JpdGVfc2R2b3goaW50ZWxfc2R2bywgdGVtcCk7CiAKIAlmb3IgKGkg
PSAwOyBpIDwgMjsgaSsrKQotCQlpbnRlbF93YWl0X2Zvcl92YmxhbmsoZGV2X3ByaXYsIGludGVs
X2NydGMtPnBpcGUpOworCQlpbnRlbF93YWl0X2Zvcl92YmxhbmsoZGV2X3ByaXYsIGNydGMtPnBp
cGUpOwogCiAJc3VjY2VzcyA9IGludGVsX3Nkdm9fZ2V0X3RyYWluZWRfaW5wdXRzKGludGVsX3Nk
dm8sICZpbnB1dDEsICZpbnB1dDIpOwogCS8qCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX3R2LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX3R2LmMKaW5kZXggYWE1MmFmNzg5MWYwLi5kMDJmMDlmN2U3NTAgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdHYuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX3R2LmMKQEAgLTE0MjAsNyArMTQyMCw3IEBAIHN0YXRpYyB2
b2lkIGludGVsX3R2X3ByZV9lbmFibGUoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUs
CiAJCQkJY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGUpCiB7CiAJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNl
LmRldik7Ci0Jc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMgPSB0b19pbnRlbF9jcnRjKHBp
cGVfY29uZmlnLT51YXBpLmNydGMpOworCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9faW50
ZWxfY3J0YyhwaXBlX2NvbmZpZy0+dWFwaS5jcnRjKTsKIAlzdHJ1Y3QgaW50ZWxfdHYgKmludGVs
X3R2ID0gZW5jX3RvX3R2KGVuY29kZXIpOwogCWNvbnN0IHN0cnVjdCBpbnRlbF90dl9jb25uZWN0
b3Jfc3RhdGUgKnR2X2Nvbm5fc3RhdGUgPQogCQl0b19pbnRlbF90dl9jb25uZWN0b3Jfc3RhdGUo
Y29ubl9zdGF0ZSk7CkBAIC0xNDY2LDcgKzE0NjYsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF90dl9w
cmVfZW5hYmxlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAogCQlicmVhazsKIAl9
CiAKLQl0dl9jdGwgfD0gVFZfRU5DX1BJUEVfU0VMKGludGVsX2NydGMtPnBpcGUpOworCXR2X2N0
bCB8PSBUVl9FTkNfUElQRV9TRUwoY3J0Yy0+cGlwZSk7CiAKIAlzd2l0Y2ggKHR2X21vZGUtPm92
ZXJzYW1wbGUpIHsKIAljYXNlIDg6CkBAIC0xNTcxLDggKzE1NzEsNyBAQCBzdGF0aWMgaW50CiBp
bnRlbF90dl9kZXRlY3RfdHlwZShzdHJ1Y3QgaW50ZWxfdHYgKmludGVsX3R2LAogCQkgICAgICBz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogewotCXN0cnVjdCBkcm1fY3J0YyAqY3J0
YyA9IGNvbm5lY3Rvci0+c3RhdGUtPmNydGM7Ci0Jc3RydWN0IGludGVsX2NydGMgKmludGVsX2Ny
dGMgPSB0b19pbnRlbF9jcnRjKGNydGMpOworCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9f
aW50ZWxfY3J0Yyhjb25uZWN0b3ItPnN0YXRlLT5jcnRjKTsKIAlzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2ID0gY29ubmVjdG9yLT5kZXY7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
ID0gdG9faTkxNShkZXYpOwogCXUzMiB0dl9jdGwsIHNhdmVfdHZfY3RsOwpAQCAtMTU5NCw3ICsx
NTkzLDcgQEAgaW50ZWxfdHZfZGV0ZWN0X3R5cGUoc3RydWN0IGludGVsX3R2ICppbnRlbF90diwK
IAkvKiBQb2xsIGZvciBUViBkZXRlY3Rpb24gKi8KIAl0dl9jdGwgJj0gfihUVl9FTkNfRU5BQkxF
IHwgVFZfRU5DX1BJUEVfU0VMX01BU0sgfCBUVl9URVNUX01PREVfTUFTSyk7CiAJdHZfY3RsIHw9
IFRWX1RFU1RfTU9ERV9NT05JVE9SX0RFVEVDVDsKLQl0dl9jdGwgfD0gVFZfRU5DX1BJUEVfU0VM
KGludGVsX2NydGMtPnBpcGUpOworCXR2X2N0bCB8PSBUVl9FTkNfUElQRV9TRUwoY3J0Yy0+cGlw
ZSk7CiAKIAl0dl9kYWMgJj0gfihUVkRBQ19TRU5TRV9NQVNLIHwgREFDX0FfTUFTSyB8IERBQ19C
X01BU0sgfCBEQUNfQ19NQVNLKTsKIAl0dl9kYWMgfD0gKFRWREFDX1NUQVRFX0NIR19FTiB8CkBA
IC0xNjE5LDcgKzE2MTgsNyBAQCBpbnRlbF90dl9kZXRlY3RfdHlwZShzdHJ1Y3QgaW50ZWxfdHYg
KmludGVsX3R2LAogCWludGVsX2RlX3dyaXRlKGRldl9wcml2LCBUVl9EQUMsIHR2X2RhYyk7CiAJ
aW50ZWxfZGVfcG9zdGluZ19yZWFkKGRldl9wcml2LCBUVl9EQUMpOwogCi0JaW50ZWxfd2FpdF9m
b3JfdmJsYW5rKGRldl9wcml2LCBpbnRlbF9jcnRjLT5waXBlKTsKKwlpbnRlbF93YWl0X2Zvcl92
YmxhbmsoZGV2X3ByaXYsIGNydGMtPnBpcGUpOwogCiAJdHlwZSA9IC0xOwogCXR2X2RhYyA9IGlu
dGVsX2RlX3JlYWQoZGV2X3ByaXYsIFRWX0RBQyk7CkBAIC0xNjUyLDcgKzE2NTEsNyBAQCBpbnRl
bF90dl9kZXRlY3RfdHlwZShzdHJ1Y3QgaW50ZWxfdHYgKmludGVsX3R2LAogCWludGVsX2RlX3Bv
c3RpbmdfcmVhZChkZXZfcHJpdiwgVFZfQ1RMKTsKIAogCS8qIEZvciB1bmtub3duIHJlYXNvbnMg
dGhlIGh3IGJhcmZzIGlmIHdlIGRvbid0IGRvIHRoaXMgdmJsYW5rIHdhaXQuICovCi0JaW50ZWxf
d2FpdF9mb3JfdmJsYW5rKGRldl9wcml2LCBpbnRlbF9jcnRjLT5waXBlKTsKKwlpbnRlbF93YWl0
X2Zvcl92YmxhbmsoZGV2X3ByaXYsIGNydGMtPnBpcGUpOwogCiAJLyogUmVzdG9yZSBpbnRlcnJ1
cHQgY29uZmlnICovCiAJaWYgKGNvbm5lY3Rvci0+cG9sbGVkICYgRFJNX0NPTk5FQ1RPUl9QT0xM
X0hQRCkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9za2xfc2Nh
bGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L3NrbF9zY2FsZXIuYwppbmRleCAz
OTRiN2JiZjQ4ZDguLjkxMWExMTNlZTAwNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9za2xfc2NhbGVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9za2xfc2NhbGVyLmMKQEAgLTk2LDkgKzk2LDggQEAgc2tsX3VwZGF0ZV9zY2FsZXIoc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsIGJvb2wgZm9yY2VfZGV0YWNoLAogewogCXN0
cnVjdCBpbnRlbF9jcnRjX3NjYWxlcl9zdGF0ZSAqc2NhbGVyX3N0YXRlID0KIAkJJmNydGNfc3Rh
dGUtPnNjYWxlcl9zdGF0ZTsKLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0YyA9Ci0JCXRv
X2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKTsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGludGVsX2NydGMtPmJhc2UuZGV2KTsKKwlzdHJ1Y3Qg
aW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKTsK
KwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMtPmJhc2Uu
ZGV2KTsKIAljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSA9CiAJ
CSZjcnRjX3N0YXRlLT5ody5hZGp1c3RlZF9tb2RlOwogCkBAIC0xNDEsNyArMTQwLDcgQEAgc2ts
X3VwZGF0ZV9zY2FsZXIoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsIGJvb2wg
Zm9yY2VfZGV0YWNoLAogCQkJZHJtX2RiZ19rbXMoJmRldl9wcml2LT5kcm0sCiAJCQkJICAgICJz
Y2FsZXJfdXNlciBpbmRleCAldS4ldTogIgogCQkJCSAgICAiU3RhZ2VkIGZyZWVpbmcgc2NhbGVy
IGlkICVkIHNjYWxlcl91c2VycyA9IDB4JXhcbiIsCi0JCQkJICAgIGludGVsX2NydGMtPnBpcGUs
IHNjYWxlcl91c2VyLCAqc2NhbGVyX2lkLAorCQkJCSAgICBjcnRjLT5waXBlLCBzY2FsZXJfdXNl
ciwgKnNjYWxlcl9pZCwKIAkJCQkgICAgc2NhbGVyX3N0YXRlLT5zY2FsZXJfdXNlcnMpOwogCQkJ
KnNjYWxlcl9pZCA9IC0xOwogCQl9CkBAIC0xNjcsNyArMTY2LDcgQEAgc2tsX3VwZGF0ZV9zY2Fs
ZXIoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsIGJvb2wgZm9yY2VfZGV0YWNo
LAogCQlkcm1fZGJnX2ttcygmZGV2X3ByaXYtPmRybSwKIAkJCSAgICAic2NhbGVyX3VzZXIgaW5k
ZXggJXUuJXU6IHNyYyAldXgldSBkc3QgJXV4JXUgIgogCQkJICAgICJzaXplIGlzIG91dCBvZiBz
Y2FsZXIgcmFuZ2VcbiIsCi0JCQkgICAgaW50ZWxfY3J0Yy0+cGlwZSwgc2NhbGVyX3VzZXIsIHNy
Y193LCBzcmNfaCwKKwkJCSAgICBjcnRjLT5waXBlLCBzY2FsZXJfdXNlciwgc3JjX3csIHNyY19o
LAogCQkJICAgIGRzdF93LCBkc3RfaCk7CiAJCXJldHVybiAtRUlOVkFMOwogCX0KQEAgLTE3Niw3
ICsxNzUsNyBAQCBza2xfdXBkYXRlX3NjYWxlcihzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0
Y19zdGF0ZSwgYm9vbCBmb3JjZV9kZXRhY2gsCiAJc2NhbGVyX3N0YXRlLT5zY2FsZXJfdXNlcnMg
fD0gKDEgPDwgc2NhbGVyX3VzZXIpOwogCWRybV9kYmdfa21zKCZkZXZfcHJpdi0+ZHJtLCAic2Nh
bGVyX3VzZXIgaW5kZXggJXUuJXU6ICIKIAkJICAgICJzdGFnZWQgc2NhbGluZyByZXF1ZXN0IGZv
ciAldXgldS0+JXV4JXUgc2NhbGVyX3VzZXJzID0gMHgleFxuIiwKLQkJICAgIGludGVsX2NydGMt
PnBpcGUsIHNjYWxlcl91c2VyLCBzcmNfdywgc3JjX2gsIGRzdF93LCBkc3RfaCwKKwkJICAgIGNy
dGMtPnBpcGUsIHNjYWxlcl91c2VyLCBzcmNfdywgc3JjX2gsIGRzdF93LCBkc3RfaCwKIAkJICAg
IHNjYWxlcl9zdGF0ZS0+c2NhbGVyX3VzZXJzKTsKIAogCXJldHVybiAwOwpAQCAtNTE1LDE3ICs1
MTQsMTcgQEAgc2tsX3Byb2dyYW1fcGxhbmVfc2NhbGVyKHN0cnVjdCBpbnRlbF9wbGFuZSAqcGxh
bmUsCiAJCQkgIChjcnRjX3cgPDwgMTYpIHwgY3J0Y19oKTsKIH0KIAotc3RhdGljIHZvaWQgc2ts
X2RldGFjaF9zY2FsZXIoc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMsIGludCBpZCkKK3N0
YXRpYyB2b2lkIHNrbF9kZXRhY2hfc2NhbGVyKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLCBpbnQg
aWQpCiB7Ci0Jc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGludGVsX2NydGMtPmJhc2UuZGV2Owor
CXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBjcnRjLT5iYXNlLmRldjsKIAlzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGRldik7CiAJdW5zaWduZWQgbG9uZyBpcnFm
bGFnczsKIAogCXNwaW5fbG9ja19pcnFzYXZlKCZkZXZfcHJpdi0+dW5jb3JlLmxvY2ssIGlycWZs
YWdzKTsKIAotCWludGVsX2RlX3dyaXRlX2Z3KGRldl9wcml2LCBTS0xfUFNfQ1RSTChpbnRlbF9j
cnRjLT5waXBlLCBpZCksIDApOwotCWludGVsX2RlX3dyaXRlX2Z3KGRldl9wcml2LCBTS0xfUFNf
V0lOX1BPUyhpbnRlbF9jcnRjLT5waXBlLCBpZCksIDApOwotCWludGVsX2RlX3dyaXRlX2Z3KGRl
dl9wcml2LCBTS0xfUFNfV0lOX1NaKGludGVsX2NydGMtPnBpcGUsIGlkKSwgMCk7CisJaW50ZWxf
ZGVfd3JpdGVfZncoZGV2X3ByaXYsIFNLTF9QU19DVFJMKGNydGMtPnBpcGUsIGlkKSwgMCk7CisJ
aW50ZWxfZGVfd3JpdGVfZncoZGV2X3ByaXYsIFNLTF9QU19XSU5fUE9TKGNydGMtPnBpcGUsIGlk
KSwgMCk7CisJaW50ZWxfZGVfd3JpdGVfZncoZGV2X3ByaXYsIFNLTF9QU19XSU5fU1ooY3J0Yy0+
cGlwZSwgaWQpLCAwKTsKIAogCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmRldl9wcml2LT51bmNv
cmUubG9jaywgaXJxZmxhZ3MpOwogfQpAQCAtNTM1LDE1ICs1MzQsMTUgQEAgc3RhdGljIHZvaWQg
c2tsX2RldGFjaF9zY2FsZXIoc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMsIGludCBpZCkK
ICAqLwogdm9pZCBza2xfZGV0YWNoX3NjYWxlcnMoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3Rh
dGUgKmNydGNfc3RhdGUpCiB7Ci0Jc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMgPSB0b19p
bnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7CisJc3RydWN0IGludGVsX2NydGMgKmNy
dGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7CiAJY29uc3Qgc3RydWN0
IGludGVsX2NydGNfc2NhbGVyX3N0YXRlICpzY2FsZXJfc3RhdGUgPQogCQkmY3J0Y19zdGF0ZS0+
c2NhbGVyX3N0YXRlOwogCWludCBpOwogCiAJLyogbG9vcCB0aHJvdWdoIGFuZCBkaXNhYmxlIHNj
YWxlcnMgdGhhdCBhcmVuJ3QgaW4gdXNlICovCi0JZm9yIChpID0gMDsgaSA8IGludGVsX2NydGMt
Pm51bV9zY2FsZXJzOyBpKyspIHsKKwlmb3IgKGkgPSAwOyBpIDwgY3J0Yy0+bnVtX3NjYWxlcnM7
IGkrKykgewogCQlpZiAoIXNjYWxlcl9zdGF0ZS0+c2NhbGVyc1tpXS5pbl91c2UpCi0JCQlza2xf
ZGV0YWNoX3NjYWxlcihpbnRlbF9jcnRjLCBpKTsKKwkJCXNrbF9kZXRhY2hfc2NhbGVyKGNydGMs
IGkpOwogCX0KIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS92
bHZfZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L3Zsdl9kc2kuYwppbmRleCAw
ODRjOWM0M2IyZWQuLjBlZTRmZjM0MWUyNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS92bHZfZHNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS92
bHZfZHNpLmMKQEAgLTc4MCwxMCArNzgwLDkgQEAgc3RhdGljIHZvaWQgaW50ZWxfZHNpX3ByZV9l
bmFibGUoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsCiAJCQkJIGNvbnN0IHN0cnVj
dCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRlKQogewogCXN0cnVjdCBpbnRlbF9kc2kg
KmludGVsX2RzaSA9IGVuY190b19pbnRlbF9kc2koZW5jb2Rlcik7Ci0Jc3RydWN0IGRybV9jcnRj
ICpjcnRjID0gcGlwZV9jb25maWctPnVhcGkuY3J0YzsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMtPmRldik7Ci0Jc3RydWN0IGludGVsX2NydGMgKmlu
dGVsX2NydGMgPSB0b19pbnRlbF9jcnRjKGNydGMpOwotCWVudW0gcGlwZSBwaXBlID0gaW50ZWxf
Y3J0Yy0+cGlwZTsKKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMocGlw
ZV9jb25maWctPnVhcGkuY3J0Yyk7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
ID0gdG9faTkxNShjcnRjLT5iYXNlLmRldik7CisJZW51bSBwaXBlIHBpcGUgPSBjcnRjLT5waXBl
OwogCWVudW0gcG9ydCBwb3J0OwogCXUzMiB2YWw7CiAJYm9vbCBnbGtfY29sZF9ib290ID0gZmFs
c2U7CkBAIC0xMzg5LDcgKzEzODgsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9kc2lfcHJlcGFyZShz
dHJ1Y3QgaW50ZWxfZW5jb2RlciAqaW50ZWxfZW5jb2RlciwKIAlzdHJ1Y3QgZHJtX2VuY29kZXIg
KmVuY29kZXIgPSAmaW50ZWxfZW5jb2Rlci0+YmFzZTsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
ID0gZW5jb2Rlci0+ZGV2OwogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRv
X2k5MTUoZGV2KTsKLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0YyA9IHRvX2ludGVsX2Ny
dGMocGlwZV9jb25maWctPnVhcGkuY3J0Yyk7CisJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0
b19pbnRlbF9jcnRjKHBpcGVfY29uZmlnLT51YXBpLmNydGMpOwogCXN0cnVjdCBpbnRlbF9kc2kg
KmludGVsX2RzaSA9IGVuY190b19pbnRlbF9kc2kodG9faW50ZWxfZW5jb2RlcihlbmNvZGVyKSk7
CiAJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUgPSAmcGlwZV9j
b25maWctPmh3LmFkanVzdGVkX21vZGU7CiAJZW51bSBwb3J0IHBvcnQ7CkBAIC0xMzk3LDcgKzEz
OTYsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9kc2lfcHJlcGFyZShzdHJ1Y3QgaW50ZWxfZW5jb2Rl
ciAqaW50ZWxfZW5jb2RlciwKIAl1MzIgdmFsLCB0bXA7CiAJdTE2IG1vZGVfaGRpc3BsYXk7CiAK
LQlkcm1fZGJnX2ttcygmZGV2X3ByaXYtPmRybSwgInBpcGUgJWNcbiIsIHBpcGVfbmFtZShpbnRl
bF9jcnRjLT5waXBlKSk7CisJZHJtX2RiZ19rbXMoJmRldl9wcml2LT5kcm0sICJwaXBlICVjXG4i
LCBwaXBlX25hbWUoY3J0Yy0+cGlwZSkpOwogCiAJbW9kZV9oZGlzcGxheSA9IGFkanVzdGVkX21v
ZGUtPmNydGNfaGRpc3BsYXk7CiAKQEAgLTE0MjQsNyArMTQyMyw3IEBAIHN0YXRpYyB2b2lkIGlu
dGVsX2RzaV9wcmVwYXJlKHN0cnVjdCBpbnRlbF9lbmNvZGVyICppbnRlbF9lbmNvZGVyLAogCQkJ
aW50ZWxfZGVfd3JpdGUoZGV2X3ByaXYsIE1JUElfQ1RSTChwb3J0KSwKIAkJCQkgICAgICAgdG1w
IHwgUkVBRF9SRVFVRVNUX1BSSU9SSVRZX0hJR0gpOwogCQl9IGVsc2UgaWYgKElTX0dFTUlOSUxB
S0UoZGV2X3ByaXYpIHx8IElTX0JST1hUT04oZGV2X3ByaXYpKSB7Ci0JCQllbnVtIHBpcGUgcGlw
ZSA9IGludGVsX2NydGMtPnBpcGU7CisJCQllbnVtIHBpcGUgcGlwZSA9IGNydGMtPnBpcGU7CiAK
IAkJCXRtcCA9IGludGVsX2RlX3JlYWQoZGV2X3ByaXYsIE1JUElfQ1RSTChwb3J0KSk7CiAJCQl0
bXAgJj0gfkJYVF9QSVBFX1NFTEVDVF9NQVNLOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9pcnEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKaW5kZXgg
YTExYmRiNjY3MjQxLi4zY2IwYTY1YTk5NmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfaXJxLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYwpAQCAt
Mjg4MSwxNCArMjg4MSwxNCBAQCBzdGF0aWMgYm9vbCBnZW4xMV9kc2lfY29uZmlndXJlX3RlKHN0
cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjLAogCXJldHVybiB0cnVlOwogfQogCi1pbnQgYmR3
X2VuYWJsZV92Ymxhbmsoc3RydWN0IGRybV9jcnRjICpjcnRjKQoraW50IGJkd19lbmFibGVfdmJs
YW5rKHN0cnVjdCBkcm1fY3J0YyAqX2NydGMpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gdG9faTkxNShjcnRjLT5kZXYpOwotCXN0cnVjdCBpbnRlbF9jcnRjICppbnRl
bF9jcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjKTsKLQllbnVtIHBpcGUgcGlwZSA9IGludGVsX2Ny
dGMtPnBpcGU7CisJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKF9jcnRj
KTsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMtPmJh
c2UuZGV2KTsKKwllbnVtIHBpcGUgcGlwZSA9IGNydGMtPnBpcGU7CiAJdW5zaWduZWQgbG9uZyBp
cnFmbGFnczsKIAotCWlmIChnZW4xMV9kc2lfY29uZmlndXJlX3RlKGludGVsX2NydGMsIHRydWUp
KQorCWlmIChnZW4xMV9kc2lfY29uZmlndXJlX3RlKGNydGMsIHRydWUpKQogCQlyZXR1cm4gMDsK
IAogCXNwaW5fbG9ja19pcnFzYXZlKCZkZXZfcHJpdi0+aXJxX2xvY2ssIGlycWZsYWdzKTsKQEAg
LTI4OTksNyArMjg5OSw3IEBAIGludCBiZHdfZW5hYmxlX3ZibGFuayhzdHJ1Y3QgZHJtX2NydGMg
KmNydGMpCiAJICogUFNSIGlzIGFjdGl2ZSBhcyBubyBmcmFtZXMgYXJlIGdlbmVyYXRlZCwgc28g
Y2hlY2sgb25seSBmb3IgUFNSLgogCSAqLwogCWlmIChIQVNfUFNSKGRldl9wcml2KSkKLQkJZHJt
X2NydGNfdmJsYW5rX3Jlc3RvcmUoY3J0Yyk7CisJCWRybV9jcnRjX3ZibGFua19yZXN0b3JlKCZj
cnRjLT5iYXNlKTsKIAogCXJldHVybiAwOwogfQpAQCAtMjk1MywxNCArMjk1MywxNCBAQCB2b2lk
IGlsa19kaXNhYmxlX3ZibGFuayhzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCiAJc3Bpbl91bmxvY2tf
aXJxcmVzdG9yZSgmZGV2X3ByaXYtPmlycV9sb2NrLCBpcnFmbGFncyk7CiB9CiAKLXZvaWQgYmR3
X2Rpc2FibGVfdmJsYW5rKHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKK3ZvaWQgYmR3X2Rpc2FibGVf
dmJsYW5rKHN0cnVjdCBkcm1fY3J0YyAqX2NydGMpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2ID0gdG9faTkxNShjcnRjLT5kZXYpOwotCXN0cnVjdCBpbnRlbF9jcnRjICpp
bnRlbF9jcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjKTsKLQllbnVtIHBpcGUgcGlwZSA9IGludGVs
X2NydGMtPnBpcGU7CisJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKF9j
cnRjKTsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMt
PmJhc2UuZGV2KTsKKwllbnVtIHBpcGUgcGlwZSA9IGNydGMtPnBpcGU7CiAJdW5zaWduZWQgbG9u
ZyBpcnFmbGFnczsKIAotCWlmIChnZW4xMV9kc2lfY29uZmlndXJlX3RlKGludGVsX2NydGMsIGZh
bHNlKSkKKwlpZiAoZ2VuMTFfZHNpX2NvbmZpZ3VyZV90ZShjcnRjLCBmYWxzZSkpCiAJCXJldHVy
bjsKIAogCXNwaW5fbG9ja19pcnFzYXZlKCZkZXZfcHJpdi0+aXJxX2xvY2ssIGlycWZsYWdzKTsK
LS0gCjIuMzEuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4
Cg==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C6E09DA550
	for <lists+intel-gfx@lfdr.de>; Thu, 17 Oct 2019 08:11:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E5E2D6E9EA;
	Thu, 17 Oct 2019 06:11:08 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D91F86E92E
 for <intel-gfx@lists.freedesktop.org>; Thu, 17 Oct 2019 06:11:07 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 16 Oct 2019 23:11:07 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,306,1566889200"; d="scan'208";a="202291622"
Received: from orsosgc001.ra.intel.com ([10.23.184.150])
 by FMSMGA003.fm.intel.com with ESMTP; 16 Oct 2019 23:11:06 -0700
From: Umesh Nerlige Ramappa <umesh.nerlige.ramappa@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 16 Oct 2019 23:11:04 -0700
Message-Id: <20191017061106.22640-1-umesh.nerlige.ramappa@intel.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 1/3] drm/i915/perf: Add helper macros for
 comparing with whitelisted registers
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>,
 Chris Wilson <chris.p.wilson@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWRkIGhlbHBlciBtYWNyb3MgZm9yIHJhbmdlIGFuZCBlcXVhbGl0eSBjb21wYXJpc29ucyBhbmQg
dXNlIHRoZW0gdG8KY2hlY2sgd2l0aCB3aGl0ZWxpc3RlZCByZWdpc3RlcnMgaW4gb2EgY29uZmln
dXJhdGlvbnMuCgpTaWduZWQtb2ZmLWJ5OiBVbWVzaCBOZXJsaWdlIFJhbWFwcGEgPHVtZXNoLm5l
cmxpZ2UucmFtYXBwYUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9w
ZXJmLmMgfCA1NCArKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5n
ZWQsIDI4IGluc2VydGlvbnMoKyksIDI2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9w
ZXJmLmMKaW5kZXggNTRlYzFjNDE5MGFjLi45MTcwNzU1OGEwZjUgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcGVyZi5jCkBAIC0zNTE0LDU2ICszNTE0LDU4IEBAIHN0YXRpYyBib29sIGdlbjhfaXNfdmFs
aWRfZmxleF9hZGRyKHN0cnVjdCBpOTE1X3BlcmYgKnBlcmYsIHUzMiBhZGRyKQogCXJldHVybiBm
YWxzZTsKIH0KIAorI2RlZmluZSBBRERSX0lOX1JBTkdFKGFkZHIsIHN0YXJ0LCBlbmQpIFwKKwko
KGFkZHIpID49IChzdGFydCkgJiYgXAorCSAoYWRkcikgPD0gKGVuZCkpCisKKyNkZWZpbmUgUkVH
X0lOX1JBTkdFKGFkZHIsIHN0YXJ0LCBlbmQpIFwKKwkoKGFkZHIpID49IGk5MTVfbW1pb19yZWdf
b2Zmc2V0KHN0YXJ0KSAmJiBcCisJIChhZGRyKSA8PSBpOTE1X21taW9fcmVnX29mZnNldChlbmQp
KQorCisjZGVmaW5lIFJFR19FUVVBTChhZGRyLCBtbWlvKSBcCisJKChhZGRyKSA9PSBpOTE1X21t
aW9fcmVnX29mZnNldChtbWlvKSkKKwogc3RhdGljIGJvb2wgZ2VuN19pc192YWxpZF9iX2NvdW50
ZXJfYWRkcihzdHJ1Y3QgaTkxNV9wZXJmICpwZXJmLCB1MzIgYWRkcikKIHsKLQlyZXR1cm4gKGFk
ZHIgPj0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoT0FTVEFSVFRSSUcxKSAmJgotCQlhZGRyIDw9IGk5
MTVfbW1pb19yZWdfb2Zmc2V0KE9BU1RBUlRUUklHOCkpIHx8Ci0JCShhZGRyID49IGk5MTVfbW1p
b19yZWdfb2Zmc2V0KE9BUkVQT1JUVFJJRzEpICYmCi0JCSBhZGRyIDw9IGk5MTVfbW1pb19yZWdf
b2Zmc2V0KE9BUkVQT1JUVFJJRzgpKSB8fAotCQkoYWRkciA+PSBpOTE1X21taW9fcmVnX29mZnNl
dChPQUNFQzBfMCkgJiYKLQkJIGFkZHIgPD0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoT0FDRUM3XzEp
KTsKKwlyZXR1cm4gUkVHX0lOX1JBTkdFKGFkZHIsIE9BU1RBUlRUUklHMSwgT0FTVEFSVFRSSUc4
KSB8fAorCSAgICAgICBSRUdfSU5fUkFOR0UoYWRkciwgT0FSRVBPUlRUUklHMSwgT0FSRVBPUlRU
UklHOCkgfHwKKwkgICAgICAgUkVHX0lOX1JBTkdFKGFkZHIsIE9BQ0VDMF8wLCBPQUNFQzdfMSk7
CiB9CiAKIHN0YXRpYyBib29sIGdlbjdfaXNfdmFsaWRfbXV4X2FkZHIoc3RydWN0IGk5MTVfcGVy
ZiAqcGVyZiwgdTMyIGFkZHIpCiB7Ci0JcmV0dXJuIGFkZHIgPT0gaTkxNV9tbWlvX3JlZ19vZmZz
ZXQoSEFMRl9TTElDRV9DSElDS0VOMikgfHwKLQkJKGFkZHIgPj0gaTkxNV9tbWlvX3JlZ19vZmZz
ZXQoTUlDUk9fQlAwXzApICYmCi0JCSBhZGRyIDw9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE5PQV9X
UklURSkpIHx8Ci0JCShhZGRyID49IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE9BX1BFUkZDTlQxX0xP
KSAmJgotCQkgYWRkciA8PSBpOTE1X21taW9fcmVnX29mZnNldChPQV9QRVJGQ05UMl9ISSkpIHx8
Ci0JCShhZGRyID49IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE9BX1BFUkZNQVRSSVhfTE8pICYmCi0J
CSBhZGRyIDw9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE9BX1BFUkZNQVRSSVhfSEkpKTsKKwlyZXR1
cm4gUkVHX0VRVUFMKGFkZHIsIEhBTEZfU0xJQ0VfQ0hJQ0tFTjIpIHx8CisJICAgICAgIFJFR19J
Tl9SQU5HRShhZGRyLCBNSUNST19CUDBfMCwgTk9BX1dSSVRFKSB8fAorCSAgICAgICBSRUdfSU5f
UkFOR0UoYWRkciwgT0FfUEVSRkNOVDFfTE8sIE9BX1BFUkZDTlQyX0hJKSB8fAorCSAgICAgICBS
RUdfSU5fUkFOR0UoYWRkciwgT0FfUEVSRk1BVFJJWF9MTywgT0FfUEVSRk1BVFJJWF9ISSk7CiB9
CiAKIHN0YXRpYyBib29sIGdlbjhfaXNfdmFsaWRfbXV4X2FkZHIoc3RydWN0IGk5MTVfcGVyZiAq
cGVyZiwgdTMyIGFkZHIpCiB7CiAJcmV0dXJuIGdlbjdfaXNfdmFsaWRfbXV4X2FkZHIocGVyZiwg
YWRkcikgfHwKLQkJYWRkciA9PSBpOTE1X21taW9fcmVnX29mZnNldChXQUlUX0ZPUl9SQzZfRVhJ
VCkgfHwKLQkJKGFkZHIgPj0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoUlBNX0NPTkZJRzApICYmCi0J
CSBhZGRyIDw9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE5PQV9DT05GSUcoOCkpKTsKKwkgICAgICAg
UkVHX0VRVUFMKGFkZHIsIFdBSVRfRk9SX1JDNl9FWElUKSB8fAorCSAgICAgICBSRUdfSU5fUkFO
R0UoYWRkciwgUlBNX0NPTkZJRzAsIE5PQV9DT05GSUcoOCkpOwogfQogCiBzdGF0aWMgYm9vbCBn
ZW4xMF9pc192YWxpZF9tdXhfYWRkcihzdHJ1Y3QgaTkxNV9wZXJmICpwZXJmLCB1MzIgYWRkcikK
IHsKIAlyZXR1cm4gZ2VuOF9pc192YWxpZF9tdXhfYWRkcihwZXJmLCBhZGRyKSB8fAotCQlhZGRy
ID09IGk5MTVfbW1pb19yZWdfb2Zmc2V0KEdFTjEwX05PQV9XUklURV9ISUdIKSB8fAotCQkoYWRk
ciA+PSBpOTE1X21taW9fcmVnX29mZnNldChPQV9QRVJGQ05UM19MTykgJiYKLQkJIGFkZHIgPD0g
aTkxNV9tbWlvX3JlZ19vZmZzZXQoT0FfUEVSRkNOVDRfSEkpKTsKKwkgICAgICAgUkVHX0VRVUFM
KGFkZHIsIEdFTjEwX05PQV9XUklURV9ISUdIKSB8fAorCSAgICAgICBSRUdfSU5fUkFOR0UoYWRk
ciwgT0FfUEVSRkNOVDNfTE8sIE9BX1BFUkZDTlQ0X0hJKTsKIH0KIAogc3RhdGljIGJvb2wgaHN3
X2lzX3ZhbGlkX211eF9hZGRyKHN0cnVjdCBpOTE1X3BlcmYgKnBlcmYsIHUzMiBhZGRyKQogewog
CXJldHVybiBnZW43X2lzX3ZhbGlkX211eF9hZGRyKHBlcmYsIGFkZHIpIHx8Ci0JCShhZGRyID49
IDB4MjUxMDAgJiYgYWRkciA8PSAweDJGRjkwKSB8fAotCQkoYWRkciA+PSBpOTE1X21taW9fcmVn
X29mZnNldChIU1dfTUJWSUQyX05PQTApICYmCi0JCSBhZGRyIDw9IGk5MTVfbW1pb19yZWdfb2Zm
c2V0KEhTV19NQlZJRDJfTk9BOSkpIHx8Ci0JCWFkZHIgPT0gaTkxNV9tbWlvX3JlZ19vZmZzZXQo
SFNXX01CVklEMl9NSVNSMCk7CisJICAgICAgIEFERFJfSU5fUkFOR0UoYWRkciwgMHgyNTEwMCwg
MHgyRkY5MCkgfHwKKwkgICAgICAgUkVHX0lOX1JBTkdFKGFkZHIsIEhTV19NQlZJRDJfTk9BMCwg
SFNXX01CVklEMl9OT0E5KSB8fAorCSAgICAgICBSRUdfRVFVQUwoYWRkciwgSFNXX01CVklEMl9N
SVNSMCk7CiB9CiAKIHN0YXRpYyBib29sIGNodl9pc192YWxpZF9tdXhfYWRkcihzdHJ1Y3QgaTkx
NV9wZXJmICpwZXJmLCB1MzIgYWRkcikKIHsKIAlyZXR1cm4gZ2VuN19pc192YWxpZF9tdXhfYWRk
cihwZXJmLCBhZGRyKSB8fAotCQkoYWRkciA+PSAweDE4MjMwMCAmJiBhZGRyIDw9IDB4MTgyM0E0
KTsKKwkgICAgICAgQUREUl9JTl9SQU5HRShhZGRyLCAweDE4MjMwMCwgMHgxODIzQTQpOwogfQog
CiBzdGF0aWMgdTMyIG1hc2tfcmVnX3ZhbHVlKHUzMiByZWcsIHUzMiB2YWwpCkBAIC0zNTcyLDE0
ICszNTc0LDE0IEBAIHN0YXRpYyB1MzIgbWFza19yZWdfdmFsdWUodTMyIHJlZywgdTMyIHZhbCkK
IAkgKiBXYURpc2FibGVTVFVuaXRQb3dlck9wdGltaXphdGlvbiB3b3JrYXJvdW5kLiBNYWtlIHN1
cmUgdGhlIHZhbHVlCiAJICogcHJvZ3JhbW1lZCBieSB1c2Vyc3BhY2UgZG9lc24ndCBjaGFuZ2Ug
dGhpcy4KIAkgKi8KLQlpZiAoaTkxNV9tbWlvX3JlZ19vZmZzZXQoSEFMRl9TTElDRV9DSElDS0VO
MikgPT0gcmVnKQorCWlmIChSRUdfRVFVQUwocmVnLCBIQUxGX1NMSUNFX0NISUNLRU4yKSkKIAkJ
dmFsID0gdmFsICYgfl9NQVNLRURfQklUX0VOQUJMRShHRU44X1NUX1BPX0RJU0FCTEUpOwogCiAJ
LyogV0FJVF9GT1JfUkM2X0VYSVQgaGFzIG9ubHkgb25lIGJpdCBmdWxsZmlsbGluZyB0aGUgZnVu
Y3Rpb24KIAkgKiBpbmRpY2F0ZWQgYnkgaXRzIG5hbWUgYW5kIGEgYnVuY2ggb2Ygc2VsZWN0aW9u
IGZpZWxkcyB1c2VkIGJ5IE9BCiAJICogY29uZmlncy4KIAkgKi8KLQlpZiAoaTkxNV9tbWlvX3Jl
Z19vZmZzZXQoV0FJVF9GT1JfUkM2X0VYSVQpID09IHJlZykKKwlpZiAoUkVHX0VRVUFMKHJlZywg
V0FJVF9GT1JfUkM2X0VYSVQpKQogCQl2YWwgPSB2YWwgJiB+X01BU0tFRF9CSVRfRU5BQkxFKEhT
V19XQUlUX0ZPUl9SQzZfRVhJVF9FTkFCTEUpOwogCiAJcmV0dXJuIHZhbDsKLS0gCjIuMjAuMQoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4
IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

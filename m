Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 99A71AD5BD
	for <lists+intel-gfx@lfdr.de>; Mon,  9 Sep 2019 11:31:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3628F89AC3;
	Mon,  9 Sep 2019 09:31:46 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 970BE89A98
 for <intel-gfx@lists.freedesktop.org>; Mon,  9 Sep 2019 09:31:33 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Sep 2019 02:31:33 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,484,1559545200"; d="scan'208";a="359433713"
Received: from hoernig-mobl.ger.corp.intel.com (HELO delly.ger.corp.intel.com)
 ([10.249.33.104])
 by orsmga005.jf.intel.com with ESMTP; 09 Sep 2019 02:31:31 -0700
From: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon,  9 Sep 2019 12:31:11 +0300
Message-Id: <20190909093116.7747-9-lionel.g.landwerlin@intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20190909093116.7747-1-lionel.g.landwerlin@intel.com>
References: <20190909093116.7747-1-lionel.g.landwerlin@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v16 08/13] drm/i915/perf: implement active wait
 for noa configurations
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Tk9BIGNvbmZpZ3VyYXRpb24gdGFrZSBzb21lIGFtb3VudCBvZiB0aW1lIHRvIGFwcGx5LiBUaGF0
IGFtb3VudCBvZgp0aW1lIGRlcGVuZHMgb24gdGhlIHNpemUgb2YgdGhlIEdULiBUaGVyZSBpcyBu
byBkb2N1bWVudGVkIHRpbWUgZm9yCnRoaXMuIEZvciBleGFtcGxlLCBwYXN0IGV4cGVyaW1lbnRh
dGlvbnMgd2l0aCBwb3dlcmdhdGluZwpjb25maWd1cmF0aW9uIGNoYW5nZXMgc2VlbSB0byBpbmRp
Y2F0ZSBhIDYwfjcwdXMgZGVsYXkuIFdlIGdvIHdpdGgKNTAwdXMgYXMgZGVmYXVsdCBmb3Igbm93
IHdoaWNoIHNob3VsZCBiZSBvdmVyIHRoZSByZXF1aXJlZCBhbW91bnQgb2YKdGltZSAoYWNjb3Jk
aW5nIHRvIEhXIGFyY2hpdGVjdHMpLgoKdjI6IERvbid0IGZvcmdldCB0byBzYXZlL3Jlc3RvcmUg
cmVnaXN0ZXJzIHVzZWQgZm9yIHRoZSB3YWl0IChDaHJpcykKCnYzOiBOYW1lIHVzZWQgQ1NfR1BS
IHJlZ2lzdGVycyAoQ2hyaXMpCiAgICBGaXggY29tcGlsZSBpc3N1ZSBkdWUgdG8gcmViYXNlIChM
aW9uZWwpCgp2NDogRml4IHNhdmUvcmVzdG9yZSBoZWxwZXJzIChVbWVzaCkKCnY1OiBNb3ZlIG5v
YV93YWl0IGZyb20gZHJtX2k5MTVfcHJpdmF0ZSB0byBpOTE1X3BlcmZfc3RyZWFtIChMaW9uZWwp
Cgp2NjogQWRkIG1pc3Npbmcgc3RydWN0IGRlY2xhcmF0aW9ucyBpbiBpOTE1X3BlcmYuaAoKU2ln
bmVkLW9mZi1ieTogTGlvbmVsIExhbmR3ZXJsaW4gPGxpb25lbC5nLmxhbmR3ZXJsaW5AaW50ZWwu
Y29tPgpSZXZpZXdlZC1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+
ICh2NCkKLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ncHVfY29tbWFuZHMuaCB8
ICAyNCArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaCAgICAgfCAg
IDUgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgICAgICAgICAgfCAgMzAg
KysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oICAgICAgICAgICAgICB8ICAgMiAr
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyAgICAgICAgICAgICB8IDIzMyArKysr
KysrKysrKysrKysrKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmZfdHlwZXMuaCAg
ICAgICB8ICAgNiArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oICAgICAgICAgICAg
ICB8ICAgNCArLQogNyBmaWxlcyBjaGFuZ2VkLCAzMDAgaW5zZXJ0aW9ucygrKSwgNCBkZWxldGlv
bnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ncHVfY29t
bWFuZHMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oCmlu
ZGV4IGI2MzczZmJjOTI3ZC4uZmFiMzE4YzcxZDI0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9ncHVfY29tbWFuZHMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9ncHVfY29tbWFuZHMuaApAQCAtMTYwLDYgKzE2MCw3IEBACiAjZGVmaW5lICAg
TUlfQkFUQ0hfR1RUCQkgICAgKDI8PDYpIC8qIGFsaWFzZWQgd2l0aCAoMTw8Nykgb24gZ2VuNCAq
LwogI2RlZmluZSBNSV9CQVRDSF9CVUZGRVJfU1RBUlRfR0VOOAlNSV9JTlNUUigweDMxLCAxKQog
I2RlZmluZSAgIE1JX0JBVENIX1JFU09VUkNFX1NUUkVBTUVSICgxPDwxMCkKKyNkZWZpbmUgICBN
SV9CQVRDSF9QUkVESUNBVEUgICAgICAgICAoMSA8PCAxNSkgLyogSFNXKyBvbiBSQ1Mgb25seSov
CiAKIC8qCiAgKiAzRCBpbnN0cnVjdGlvbnMgdXNlZCBieSB0aGUga2VybmVsCkBAIC0yMzgsNiAr
MjM5LDI5IEBACiAjZGVmaW5lICAgUElQRV9DT05UUk9MX0RFUFRIX0NBQ0hFX0ZMVVNICQkoMTw8
MCkKICNkZWZpbmUgICBQSVBFX0NPTlRST0xfR0xPQkFMX0dUVCAoMTw8MikgLyogaW4gYWRkciBk
d29yZCAqLwogCisjZGVmaW5lIE1JX01BVEgoeCkgTUlfSU5TVFIoMHgxYSwgKHgpIC0gMSkKKyNk
ZWZpbmUgICBNSV9BTFVfT1Aob3AsIHNyYzEsIHNyYzIpICgoKG9wKSA8PCAyMCkgfCAoKHNyYzEp
IDw8IDEwKSB8IChzcmMyKSkKKy8qIG9wZXJhbmRzICovCisjZGVmaW5lICAgTUlfQUxVX09QX05P
T1AgICAgIDAKKyNkZWZpbmUgICBNSV9BTFVfT1BfTE9BRCAgICAgMTI4CisjZGVmaW5lICAgTUlf
QUxVX09QX0xPQURJTlYgIDExNTIKKyNkZWZpbmUgICBNSV9BTFVfT1BfTE9BRDAgICAgMTI5Cisj
ZGVmaW5lICAgTUlfQUxVX09QX0xPQUQxICAgIDExNTMKKyNkZWZpbmUgICBNSV9BTFVfT1BfQURE
ICAgICAgMjU2CisjZGVmaW5lICAgTUlfQUxVX09QX1NVQiAgICAgIDI1NworI2RlZmluZSAgIE1J
X0FMVV9PUF9BTkQgICAgICAyNTgKKyNkZWZpbmUgICBNSV9BTFVfT1BfT1IgICAgICAgMjU5Cisj
ZGVmaW5lICAgTUlfQUxVX09QX1hPUiAgICAgIDI2MAorI2RlZmluZSAgIE1JX0FMVV9PUF9TVE9S
RSAgICAzODQKKyNkZWZpbmUgICBNSV9BTFVfT1BfU1RPUkVJTlYgMTQwOAorLyogc291cmNlcyAq
LworI2RlZmluZSAgIE1JX0FMVV9TUkNfUkVHKHgpICAoeCkgLyogMCAtPiAxNSAqLworI2RlZmlu
ZSAgIE1JX0FMVV9TUkNfU1JDQSAgICAzMgorI2RlZmluZSAgIE1JX0FMVV9TUkNfU1JDQiAgICAz
MworI2RlZmluZSAgIE1JX0FMVV9TUkNfQUNDVSAgICA0OQorI2RlZmluZSAgIE1JX0FMVV9TUkNf
WkYgICAgICA1MAorI2RlZmluZSAgIE1JX0FMVV9TUkNfQ0YgICAgICA1MQorCiAvKgogICogQ29t
bWFuZHMgdXNlZCBvbmx5IGJ5IHRoZSBjb21tYW5kIHBhcnNlcgogICovCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaAppbmRleCBkYzI5NWMxOTZkMTEuLmY3NTJiNmNmOWVh
MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5oCkBAIC05Nyw2ICs5
NywxMSBAQCBlbnVtIGludGVsX2d0X3NjcmF0Y2hfZmllbGQgewogCS8qIDggYnl0ZXMgKi8KIAlJ
TlRFTF9HVF9TQ1JBVENIX0ZJRUxEX0NPSEVSRU5UTDNfV0EgPSAyNTYsCiAKKwkvKiA2ICogOCBi
eXRlcyAqLworCUlOVEVMX0dUX1NDUkFUQ0hfRklFTERfUEVSRl9DU19HUFIgPSAyMDQ4LAorCisJ
LyogNCBieXRlcyAqLworCUlOVEVMX0dUX1NDUkFUQ0hfRklFTERfUEVSRl9QUkVESUNBVEVfUkVT
VUxUXzEgPSAyMDk2LAogfTsKIAogI2VuZGlmIC8qIF9fSU5URUxfR1RfVFlQRVNfSF9fICovCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCmluZGV4IDcwODg1NWUwNTFiNS4uYjAwYjFhNmY4
ZDY4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYwpAQCAtMzU3OCw2ICszNTc4LDM1
IEBAIERFRklORV9TSU1QTEVfQVRUUklCVVRFKGk5MTVfd2VkZ2VkX2ZvcHMsCiAJCQlpOTE1X3dl
ZGdlZF9nZXQsIGk5MTVfd2VkZ2VkX3NldCwKIAkJCSIlbGx1XG4iKTsKIAorc3RhdGljIGludAor
aTkxNV9wZXJmX25vYV9kZWxheV9zZXQodm9pZCAqZGF0YSwgdTY0IHZhbCkKK3sKKwlzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGRhdGE7CisKKwkvKiBUaGlzIHdvdWxkIGxlYWQgdG8g
aW5maW5pdGUgd2FpdHMgYXMgd2UncmUgZG9pbmcgdGltZXN0YW1wCisJICogZGlmZmVyZW5jZSBv
biB0aGUgQ1Mgd2l0aCBvbmx5IDMyYml0cy4KKwkgKi8KKwlpZiAodmFsID4gbXVsX3UzMl91MzIo
VTMyX01BWCwgUlVOVElNRV9JTkZPKGk5MTUpLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5X2toeikp
CisJCXJldHVybiAtRUlOVkFMOworCisJYXRvbWljNjRfc2V0KCZpOTE1LT5wZXJmLm5vYV9wcm9n
cmFtbWluZ19kZWxheSwgdmFsKTsKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludAoraTkxNV9w
ZXJmX25vYV9kZWxheV9nZXQodm9pZCAqZGF0YSwgdTY0ICp2YWwpCit7CisJc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmk5MTUgPSBkYXRhOworCisJKnZhbCA9IGF0b21pYzY0X3JlYWQoJmk5MTUt
PnBlcmYubm9hX3Byb2dyYW1taW5nX2RlbGF5KTsKKwlyZXR1cm4gMDsKK30KKworREVGSU5FX1NJ
TVBMRV9BVFRSSUJVVEUoaTkxNV9wZXJmX25vYV9kZWxheV9mb3BzLAorCQkJaTkxNV9wZXJmX25v
YV9kZWxheV9nZXQsCisJCQlpOTE1X3BlcmZfbm9hX2RlbGF5X3NldCwKKwkJCSIlbGx1XG4iKTsK
KwogI2RlZmluZSBEUk9QX1VOQk9VTkQJQklUKDApCiAjZGVmaW5lIERST1BfQk9VTkQJQklUKDEp
CiAjZGVmaW5lIERST1BfUkVUSVJFCUJJVCgyKQpAQCAtNDM1NCw2ICs0MzgzLDcgQEAgc3RhdGlj
IGNvbnN0IHN0cnVjdCBpOTE1X2RlYnVnZnNfZmlsZXMgewogCWNvbnN0IGNoYXIgKm5hbWU7CiAJ
Y29uc3Qgc3RydWN0IGZpbGVfb3BlcmF0aW9ucyAqZm9wczsKIH0gaTkxNV9kZWJ1Z2ZzX2ZpbGVz
W10gPSB7CisJeyJpOTE1X3BlcmZfbm9hX2RlbGF5IiwgJmk5MTVfcGVyZl9ub2FfZGVsYXlfZm9w
c30sCiAJeyJpOTE1X3dlZGdlZCIsICZpOTE1X3dlZGdlZF9mb3BzfSwKIAl7Imk5MTVfY2FjaGVf
c2hhcmluZyIsICZpOTE1X2NhY2hlX3NoYXJpbmdfZm9wc30sCiAJeyJpOTE1X2dlbV9kcm9wX2Nh
Y2hlcyIsICZpOTE1X2Ryb3BfY2FjaGVzX2ZvcHN9LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5k
ZXggN2ViMzE5MjNjZGU5Li4yYzZmMzcyMTlkZmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaApA
QCAtMTQwMyw2ICsxNDAzLDggQEAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgewogCiAJCXN0cnVj
dCBpOTE1X29hX29wcyBvcHM7CiAJCWNvbnN0IHN0cnVjdCBpOTE1X29hX2Zvcm1hdCAqb2FfZm9y
bWF0czsKKworCQlhdG9taWM2NF90IG5vYV9wcm9ncmFtbWluZ19kZWxheTsKIAl9IHBlcmY7CiAK
IAkvKiBBYnN0cmFjdCB0aGUgc3VibWlzc2lvbiBtZWNoYW5pc20gKGxlZ2FjeSByaW5nYnVmZmVy
IG9yIGV4ZWNsaXN0cykgYXdheSAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wZXJmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwppbmRleCA5M2E0
MjRjNGE1NzcuLmQwMTQ5NDE4MDQ2NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wZXJmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKQEAgLTE5
Nyw2ICsxOTcsNyBAQAogCiAjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCIKICNpbmNs
dWRlICJnZW0vaTkxNV9nZW1fcG0uaCIKKyNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgogI2luY2x1
ZGUgImd0L2ludGVsX2xyY19yZWcuaCIKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCkBAIC00MDgs
NiArNDA5LDcgQEAgc3RhdGljIHUzMiAqd3JpdGVfY3NfbWlfbHJpKHUzMiAqY3MsIGNvbnN0IHN0
cnVjdCBpOTE1X29hX3JlZyAqcmVnX2RhdGEsIHUzMiBuX3IKIH0KIAogc3RhdGljIHN0cnVjdCBp
OTE1X29hX2NvbmZpZ19ibyAqYWxsb2Nfb2FfY29uZmlnX2J1ZmZlcihzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSwKKwkJCQkJCQlzdHJ1Y3QgaTkxNV92bWEgKm5vYV93YWl0LAogCQkJCQkJ
CXN0cnVjdCBpOTE1X29hX2NvbmZpZyAqb2FfY29uZmlnKQogewogCXN0cnVjdCBpOTE1X29hX2Nv
bmZpZ19ibyAqb2FfYm87CkBAIC00MzYsNyArNDM4LDcgQEAgc3RhdGljIHN0cnVjdCBpOTE1X29h
X2NvbmZpZ19ibyAqYWxsb2Nfb2FfY29uZmlnX2J1ZmZlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZQogCQkJCQkgICAgICBNSV9MT0FEX1JFR0lTVEVSX0lNTV9NQVhfUkVHUykgKiA0OwogCQljb25m
aWdfbGVuZ3RoICs9IG9hX2NvbmZpZy0+ZmxleF9yZWdzX2xlbiAqIDg7CiAJfQotCWNvbmZpZ19s
ZW5ndGggKz0gNDsgLyogTUlfQkFUQ0hfQlVGRkVSX0VORCAqLworCWNvbmZpZ19sZW5ndGggKz0g
MTI7IC8qIE1JX0JBVENIX0JVRkZFUl9TVEFSVCBpbnRvIG5vYV93YWl0IGxvb3AgKi8KIAljb25m
aWdfbGVuZ3RoID0gQUxJR04oY29uZmlnX2xlbmd0aCwgSTkxNV9HVFRfUEFHRV9TSVpFKTsKIAog
CW9hX2JvLT5ibyA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfc2htZW0oaTkxNSwgY29uZmlnX2xl
bmd0aCk7CkBAIC00NTUsNyArNDU3LDExIEBAIHN0YXRpYyBzdHJ1Y3QgaTkxNV9vYV9jb25maWdf
Ym8gKmFsbG9jX29hX2NvbmZpZ19idWZmZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUKIAljcyA9
IHdyaXRlX2NzX21pX2xyaShjcywgb2FfY29uZmlnLT5iX2NvdW50ZXJfcmVncywgb2FfY29uZmln
LT5iX2NvdW50ZXJfcmVnc19sZW4pOwogCWNzID0gd3JpdGVfY3NfbWlfbHJpKGNzLCBvYV9jb25m
aWctPmZsZXhfcmVncywgb2FfY29uZmlnLT5mbGV4X3JlZ3NfbGVuKTsKIAotCSpjcysrID0gTUlf
QkFUQ0hfQlVGRkVSX0VORDsKKwkvKiBKdW1wIGludG8gdGhlIE5PQSB3YWl0IGJ1c3kgbG9vcC4g
Ki8KKwkqY3MrKyA9IChJTlRFTF9HRU4oaTkxNSkgPCA4ID8KKwkJIE1JX0JBVENIX0JVRkZFUl9T
VEFSVCA6IE1JX0JBVENIX0JVRkZFUl9TVEFSVF9HRU44KTsKKwkqY3MrKyA9IGk5MTVfZ2d0dF9v
ZmZzZXQobm9hX3dhaXQpOworCSpjcysrID0gMDsKIAogCWk5MTVfZ2VtX29iamVjdF9mbHVzaF9t
YXAob2FfYm8tPmJvKTsKIAlpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKG9hX2JvLT5ibyk7CkBA
IC01NTAsNyArNTU2LDkgQEAgaW50IGk5MTVfcGVyZl9nZXRfb2FfY29uZmlnX2FuZF9ibyhzdHJ1
Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAogCQltdXRleF91bmxvY2soJnN0cmVhbS0+Y29u
ZmlnX211dGV4KTsKIAogCQlpZiAoIW9hX2JvKSB7Ci0JCQlvYV9ibyA9IGFsbG9jX29hX2NvbmZp
Z19idWZmZXIoaTkxNSwgb2FfY29uZmlnKTsKKwkJCW9hX2JvID0gYWxsb2Nfb2FfY29uZmlnX2J1
ZmZlcihpOTE1LAorCQkJCQkJICAgICAgIHN0cmVhbS0+bm9hX3dhaXQsCisJCQkJCQkgICAgICAg
b2FfY29uZmlnKTsKIAkJCWlmIChJU19FUlIob2FfYm8pKSB7CiAJCQkJZXJyID0gUFRSX0VSUihv
YV9ibyk7CiAJCQkJZ290byBlcnI7CkBAIC0xNTI0LDYgKzE1MzIsMTYgQEAgZnJlZV9vYV9idWZm
ZXIoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAlzdHJlYW0tPm9hX2J1ZmZlci52
YWRkciA9IE5VTEw7CiB9CiAKK3N0YXRpYyB2b2lkCitmcmVlX25vYV93YWl0KHN0cnVjdCBpOTE1
X3BlcmZfc3RyZWFtICpzdHJlYW0pCit7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUg
PSBzdHJlYW0tPmRldl9wcml2OworCisJbXV0ZXhfbG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRl
eCk7CisJaTkxNV92bWFfdW5waW5fYW5kX3JlbGVhc2UoJnN0cmVhbS0+bm9hX3dhaXQsIDApOwor
CW11dGV4X3VubG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7Cit9CisKIHN0YXRpYyB2b2lk
CiBmcmVlX29hX2NvbmZpZ3Moc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIHsKQEAg
LTE1NTIsNiArMTU3MCw3IEBAIHN0YXRpYyB2b2lkIGk5MTVfb2Ffc3RyZWFtX2Rlc3Ryb3koc3Ry
dWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAltdXRleF91bmxvY2soJmRldl9wcml2LT5k
cm0uc3RydWN0X211dGV4KTsKIAogCWZyZWVfb2FfYnVmZmVyKHN0cmVhbSk7CisJZnJlZV9ub2Ff
d2FpdChzdHJlYW0pOwogCiAJaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9wdXQoJmRldl9wcml2LT51
bmNvcmUsIEZPUkNFV0FLRV9BTEwpOwogCWludGVsX3J1bnRpbWVfcG1fcHV0KCZkZXZfcHJpdi0+
cnVudGltZV9wbSwgc3RyZWFtLT53YWtlcmVmKTsKQEAgLTE3MzEsNiArMTc1MCwyMDIgQEAgc3Rh
dGljIGludCBhbGxvY19vYV9idWZmZXIoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkK
IAlyZXR1cm4gcmV0OwogfQogCitzdGF0aWMgdTMyICpzYXZlX3Jlc3RvcmVfcmVnaXN0ZXIoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHUzMiAqY3MsCisJCQkJICBib29sIHNhdmUsIGk5
MTVfcmVnX3QgcmVnLCB1MzIgb2Zmc2V0LAorCQkJCSAgdTMyIGR3b3JkX2NvdW50KQoreworCXUz
MiBkOworCisJZm9yIChkID0gMDsgZCA8IGR3b3JkX2NvdW50OyBkKyspIHsKKwkJaWYgKHNhdmUp
IHsKKwkJCSpjcysrID0gSU5URUxfR0VOKGk5MTUpID49IDggPworCQkJCU1JX1NUT1JFX1JFR0lT
VEVSX01FTV9HRU44IDoKKwkJCQlNSV9TVE9SRV9SRUdJU1RFUl9NRU07CisJCX0gZWxzZSAgewor
CQkJKmNzKysgPSBJTlRFTF9HRU4oaTkxNSkgPj0gOCA/CisJCQkJTUlfTE9BRF9SRUdJU1RFUl9N
RU1fR0VOOCA6CisJCQkJTUlfTE9BRF9SRUdJU1RFUl9NRU07CisJCX0KKwkJKmNzKysgPSBpOTE1
X21taW9fcmVnX29mZnNldChyZWcpICsgNCAqIGQ7CisJCSpjcysrID0gaW50ZWxfZ3Rfc2NyYXRj
aF9vZmZzZXQoJmk5MTUtPmd0LCBvZmZzZXQpICsgNCAqIGQ7CisJCSpjcysrID0gMDsKKwl9CisK
KwlyZXR1cm4gY3M7Cit9CisKK3N0YXRpYyBpbnQgYWxsb2Nfbm9hX3dhaXQoc3RydWN0IGk5MTVf
cGVyZl9zdHJlYW0gKnN0cmVhbSkKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9
IHN0cmVhbS0+ZGV2X3ByaXY7CisJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKmJvOworCXN0
cnVjdCBpOTE1X3ZtYSAqdm1hOworCWNvbnN0IHU2NCBkZWxheV90aWNrcyA9IDB4ZmZmZmZmZmZm
ZmZmZmZmZiAtCisJCURJVjY0X1U2NF9ST1VORF9VUCgKKwkJCWF0b21pYzY0X3JlYWQoJmk5MTUt
PnBlcmYubm9hX3Byb2dyYW1taW5nX2RlbGF5KSAqCisJCQlSVU5USU1FX0lORk8oaTkxNSktPmNz
X3RpbWVzdGFtcF9mcmVxdWVuY3lfa2h6LAorCQkJMTAwMDAwMHVsbCk7CisJdTMyICpiYXRjaCwg
KnRzMCwgKmNzLCAqanVtcDsKKwlpbnQgcmV0LCBpOworCWVudW0geyBTVEFSVF9UUywgTk9XX1RT
LCBERUxUQV9UUywgSlVNUF9QUkVESUNBVEUsIERFTFRBX1RBUkdFVCwgTl9DU19HUFIgfTsKKwor
CWJvID0gaTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9pbnRlcm5hbChpOTE1LCA0MDk2KTsKKwlpZiAo
SVNfRVJSKGJvKSkgeworCQlEUk1fRVJST1IoIkZhaWxlZCB0byBhbGxvY2F0ZSBOT0Egd2FpdCBi
YXRjaGJ1ZmZlclxuIik7CisJCXJldHVybiBQVFJfRVJSKGJvKTsKKwl9CisKKwkvKgorCSAqIFdl
IHBpbiBpbiBHR1RUIGJlY2F1c2Ugd2UganVtcCBpbnRvIHRoaXMgYnVmZmVyIG5vdyBiZWNhdXNl
CisJICogbXVsdGlwbGUgT0EgY29uZmlnIEJPcyB3aWxsIGhhdmUgYSBqdW1wIHRvIHRoaXMgYWRk
cmVzcyBhbmQgaXQKKwkgKiBuZWVkcyB0byBiZSBmaXhlZCBkdXJpbmcgdGhlIGxpZmV0aW1lIG9m
IHRoZSBpOTE1L3BlcmYgc3RyZWFtLgorCSAqLworCXZtYSA9IGk5MTVfZ2VtX29iamVjdF9nZ3R0
X3BpbihibywgTlVMTCwgMCwgNDA5NiwgMCk7CisJaWYgKElTX0VSUih2bWEpKSB7CisJCXJldCA9
IFBUUl9FUlIodm1hKTsKKwkJZ290byBlcnJfdW5yZWY7CisJfQorCisJYmF0Y2ggPSBjcyA9IGk5
MTVfZ2VtX29iamVjdF9waW5fbWFwKGJvLCBJOTE1X01BUF9XQik7CisJaWYgKElTX0VSUihiYXRj
aCkpIHsKKwkJcmV0ID0gUFRSX0VSUihiYXRjaCk7CisJCWdvdG8gZXJyX3VucGluOworCX0KKwor
CS8qIFNhdmUgcmVnaXN0ZXJzLiAqLworCWZvciAoaSA9IDA7IGkgPCBOX0NTX0dQUjsgaSsrKSB7
CisJCWNzID0gc2F2ZV9yZXN0b3JlX3JlZ2lzdGVyKAorCQkJaTkxNSwgY3MsIHRydWUgLyogc2F2
ZSAqLywgSFNXX0NTX0dQUihpKSwKKwkJCUlOVEVMX0dUX1NDUkFUQ0hfRklFTERfUEVSRl9DU19H
UFIgKyA4ICogaSwgMik7CisJfQorCWNzID0gc2F2ZV9yZXN0b3JlX3JlZ2lzdGVyKAorCQlpOTE1
LCBjcywgdHJ1ZSAvKiBzYXZlICovLCBNSV9QUkVESUNBVEVfUkVTVUxUXzEsCisJCUlOVEVMX0dU
X1NDUkFUQ0hfRklFTERfUEVSRl9QUkVESUNBVEVfUkVTVUxUXzEsIDEpOworCisJLyogRmlyc3Qg
dGltZXN0YW1wIHNuYXBzaG90IGxvY2F0aW9uLiAqLworCXRzMCA9IGNzOworCisJLyoKKwkgKiBJ
bml0aWFsIHNuYXBzaG90IG9mIHRoZSB0aW1lc3RhbXAgcmVnaXN0ZXIgdG8gaW1wbGVtZW50IHRo
ZSB3YWl0LgorCSAqIFdlIHdvcmsgd2l0aCAzMmIgdmFsdWVzLCBzbyBjbGVhciBvdXQgdGhlIHRv
cCAzMmIgYml0cyBvZiB0aGUKKwkgKiByZWdpc3RlciBiZWNhdXNlIHRoZSBBTFUgd29ya3MgNjRi
aXRzLgorCSAqLworCSpjcysrID0gTUlfTE9BRF9SRUdJU1RFUl9JTU0oMSk7CisJKmNzKysgPSBp
OTE1X21taW9fcmVnX29mZnNldChIU1dfQ1NfR1BSKFNUQVJUX1RTKSkgKyA0OworCSpjcysrID0g
MDsKKwkqY3MrKyA9IE1JX0xPQURfUkVHSVNURVJfUkVHIHwgKDMgLSAyKTsKKwkqY3MrKyA9IGk5
MTVfbW1pb19yZWdfb2Zmc2V0KFJJTkdfVElNRVNUQU1QKFJFTkRFUl9SSU5HX0JBU0UpKTsKKwkq
Y3MrKyA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KEhTV19DU19HUFIoU1RBUlRfVFMpKTsKKworCS8q
CisJICogVGhpcyBpcyB0aGUgbG9jYXRpb24gd2UncmUgZ29pbmcgdG8ganVtcCBiYWNrIGludG8g
dW50aWwgdGhlCisJICogcmVxdWlyZWQgYW1vdW50IG9mIHRpbWUgaGFzIHBhc3NlZC4KKwkgKi8K
KwlqdW1wID0gY3M7CisKKwkvKgorCSAqIFRha2UgYW5vdGhlciBzbmFwc2hvdCBvZiB0aGUgdGlt
ZXN0YW1wIHJlZ2lzdGVyLiBUYWtlIGNhcmUgdG8gY2xlYXIKKwkgKiB1cCB0aGUgdG9wIDMyYml0
cyBvZiBDU19HUFIoMSkgYXMgd2UncmUgdXNpbmcgaXQgZm9yIG90aGVyCisJICogb3BlcmF0aW9u
cyBiZWxvdy4KKwkgKi8KKwkqY3MrKyA9IE1JX0xPQURfUkVHSVNURVJfSU1NKDEpOworCSpjcysr
ID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoSFNXX0NTX0dQUihOT1dfVFMpKSArIDQ7CisJKmNzKysg
PSAwOworCSpjcysrID0gTUlfTE9BRF9SRUdJU1RFUl9SRUcgfCAoMyAtIDIpOworCSpjcysrID0g
aTkxNV9tbWlvX3JlZ19vZmZzZXQoUklOR19USU1FU1RBTVAoUkVOREVSX1JJTkdfQkFTRSkpOwor
CSpjcysrID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoSFNXX0NTX0dQUihOT1dfVFMpKTsKKworCS8q
CisJICogRG8gYSBkaWZmIGJldHdlZW4gdGhlIDIgdGltZXN0YW1wcyBhbmQgc3RvcmUgdGhlIHJl
c3VsdCBiYWNrIGludG8KKwkgKiBDU19HUFIoMSkuCisJICovCisJKmNzKysgPSBNSV9NQVRIKDUp
OworCSpjcysrID0gTUlfQUxVX09QKE1JX0FMVV9PUF9MT0FELCBNSV9BTFVfU1JDX1NSQ0EsIE1J
X0FMVV9TUkNfUkVHKE5PV19UUykpOworCSpjcysrID0gTUlfQUxVX09QKE1JX0FMVV9PUF9MT0FE
LCBNSV9BTFVfU1JDX1NSQ0IsIE1JX0FMVV9TUkNfUkVHKFNUQVJUX1RTKSk7CisJKmNzKysgPSBN
SV9BTFVfT1AoTUlfQUxVX09QX1NVQiwgMCwgMCk7CisJKmNzKysgPSBNSV9BTFVfT1AoTUlfQUxV
X09QX1NUT1JFLCBNSV9BTFVfU1JDX1JFRyhERUxUQV9UUyksIE1JX0FMVV9TUkNfQUNDVSk7CisJ
KmNzKysgPSBNSV9BTFVfT1AoTUlfQUxVX09QX1NUT1JFLCBNSV9BTFVfU1JDX1JFRyhKVU1QX1BS
RURJQ0FURSksIE1JX0FMVV9TUkNfQ0YpOworCisJLyoKKwkgKiBUcmFuc2ZlciB0aGUgY2Fycnkg
ZmxhZyAoc2V0IHRvIDEgaWYgdHMxIDwgdHMwLCBtZWFuaW5nIHRoZQorCSAqIHRpbWVzdGFtcCBo
YXZlIHJvbGxlZCBvdmVyIHRoZSAzMmJpdHMpIGludG8gdGhlIHByZWRpY2F0ZSByZWdpc3Rlcgor
CSAqIHRvIGJlIHVzZWQgZm9yIHRoZSBwcmVkaWNhdGVkIGp1bXAuCisJICovCisJKmNzKysgPSBN
SV9MT0FEX1JFR0lTVEVSX1JFRyB8ICgzIC0gMik7CisJKmNzKysgPSBpOTE1X21taW9fcmVnX29m
ZnNldChIU1dfQ1NfR1BSKEpVTVBfUFJFRElDQVRFKSk7CisJKmNzKysgPSBpOTE1X21taW9fcmVn
X29mZnNldChNSV9QUkVESUNBVEVfUkVTVUxUXzEpOworCisJLyogUmVzdGFydCBmcm9tIHRoZSBi
ZWdpbm5pbmcgaWYgd2UgaGFkIHRpbWVzdGFtcHMgcm9sbCBvdmVyLiAqLworCSpjcysrID0gKElO
VEVMX0dFTihpOTE1KSA8IDggPworCQkgTUlfQkFUQ0hfQlVGRkVSX1NUQVJUIDogTUlfQkFUQ0hf
QlVGRkVSX1NUQVJUX0dFTjgpIHwKKwkJTUlfQkFUQ0hfUFJFRElDQVRFOworCSpjcysrID0gaTkx
NV9nZ3R0X29mZnNldCh2bWEpICsgKHRzMCAtIGJhdGNoKSAqIDQ7CisJKmNzKysgPSAwOworCisJ
LyoKKwkgKiBOb3cgYWRkIHRoZSBkaWZmIGJldHdlZW4gdG8gcHJldmlvdXMgdGltZXN0YW1wcyBh
bmQgYWRkIGl0IHRvIDoKKwkgKiAgICAgICgoKDEgKiA8PCA2NCkgLSAxKSAtIGRlbGF5X25zKQor
CSAqCisJICogV2hlbiB0aGUgQ2FycnkgRmxhZyBjb250YWlucyAxIHRoaXMgbWVhbnMgdGhlIGVs
YXBzZWQgdGltZSBpcworCSAqIGxvbmdlciB0aGFuIHRoZSBleHBlY3RlZCBkZWxheSwgYW5kIHdl
IGNhbiBleGl0IHRoZSB3YWl0IGxvb3AuCisJICovCisJKmNzKysgPSBNSV9MT0FEX1JFR0lTVEVS
X0lNTSgyKTsKKwkqY3MrKyA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KEhTV19DU19HUFIoREVMVEFf
VEFSR0VUKSk7CisJKmNzKysgPSBsb3dlcl8zMl9iaXRzKGRlbGF5X3RpY2tzKTsKKwkqY3MrKyA9
IGk5MTVfbW1pb19yZWdfb2Zmc2V0KEhTV19DU19HUFIoREVMVEFfVEFSR0VUKSkgKyA0OworCSpj
cysrID0gdXBwZXJfMzJfYml0cyhkZWxheV90aWNrcyk7CisKKwkqY3MrKyA9IE1JX01BVEgoNCk7
CisJKmNzKysgPSBNSV9BTFVfT1AoTUlfQUxVX09QX0xPQUQsIE1JX0FMVV9TUkNfU1JDQSwgTUlf
QUxVX1NSQ19SRUcoREVMVEFfVFMpKTsKKwkqY3MrKyA9IE1JX0FMVV9PUChNSV9BTFVfT1BfTE9B
RCwgTUlfQUxVX1NSQ19TUkNCLCBNSV9BTFVfU1JDX1JFRyhERUxUQV9UQVJHRVQpKTsKKwkqY3Mr
KyA9IE1JX0FMVV9PUChNSV9BTFVfT1BfQURELCAwLCAwKTsKKwkqY3MrKyA9IE1JX0FMVV9PUChN
SV9BTFVfT1BfU1RPUkVJTlYsIE1JX0FMVV9TUkNfUkVHKEpVTVBfUFJFRElDQVRFKSwgTUlfQUxV
X1NSQ19DRik7CisKKwkvKgorCSAqIFRyYW5zZmVyIHRoZSByZXN1bHQgaW50byB0aGUgcHJlZGlj
YXRlIHJlZ2lzdGVyIHRvIGJlIHVzZWQgZm9yIHRoZQorCSAqIHByZWRpY2F0ZWQganVtcC4KKwkg
Ki8KKwkqY3MrKyA9IE1JX0xPQURfUkVHSVNURVJfUkVHIHwgKDMgLSAyKTsKKwkqY3MrKyA9IGk5
MTVfbW1pb19yZWdfb2Zmc2V0KEhTV19DU19HUFIoSlVNUF9QUkVESUNBVEUpKTsKKwkqY3MrKyA9
IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE1JX1BSRURJQ0FURV9SRVNVTFRfMSk7CisKKwkvKiBQcmVk
aWNhdGUgdGhlIGp1bXAuICAqLworCSpjcysrID0gKElOVEVMX0dFTihpOTE1KSA8IDggPworCQkg
TUlfQkFUQ0hfQlVGRkVSX1NUQVJUIDogTUlfQkFUQ0hfQlVGRkVSX1NUQVJUX0dFTjgpIHwKKwkJ
TUlfQkFUQ0hfUFJFRElDQVRFOworCSpjcysrID0gaTkxNV9nZ3R0X29mZnNldCh2bWEpICsgKGp1
bXAgLSBiYXRjaCkgKiA0OworCSpjcysrID0gMDsKKworCS8qIFJlc3RvcmUgcmVnaXN0ZXJzLiAq
LworCWZvciAoaSA9IDA7IGkgPCBOX0NTX0dQUjsgaSsrKSB7CisJCWNzID0gc2F2ZV9yZXN0b3Jl
X3JlZ2lzdGVyKAorCQkJaTkxNSwgY3MsIGZhbHNlIC8qIHNhdmUgKi8sIEhTV19DU19HUFIoaSks
CisJCQlJTlRFTF9HVF9TQ1JBVENIX0ZJRUxEX1BFUkZfQ1NfR1BSICsgOCAqIGksIDIpOworCX0K
KwljcyA9IHNhdmVfcmVzdG9yZV9yZWdpc3RlcigKKwkJaTkxNSwgY3MsIGZhbHNlIC8qIHNhdmUg
Ki8sIE1JX1BSRURJQ0FURV9SRVNVTFRfMSwKKwkJSU5URUxfR1RfU0NSQVRDSF9GSUVMRF9QRVJG
X1BSRURJQ0FURV9SRVNVTFRfMSwgMSk7CisKKwkvKiBBbmQgcmV0dXJuIHRvIHRoZSByaW5nLiAq
LworCSpjcysrID0gTUlfQkFUQ0hfQlVGRkVSX0VORDsKKworCUdFTV9CVUdfT04oKGNzIC0gYmF0
Y2gpID4gKFBBR0VfU0laRSAvIHNpemVvZigqYmF0Y2gpKSk7CisKKwlpOTE1X2dlbV9vYmplY3Rf
Zmx1c2hfbWFwKGJvKTsKKwlpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKGJvKTsKKworCXN0cmVh
bS0+bm9hX3dhaXQgPSB2bWE7CisKKwlyZXR1cm4gMDsKKworZXJyX3VucGluOgorCV9faTkxNV92
bWFfdW5waW4odm1hKTsKKworZXJyX3VucmVmOgorCWk5MTVfZ2VtX29iamVjdF9wdXQoYm8pOwor
CisJcmV0dXJuIHJldDsKK30KKwogc3RhdGljIHZvaWQgY29uZmlnX29hX3JlZ3Moc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJICAgY29uc3Qgc3RydWN0IGk5MTVfb2FfcmVn
ICpyZWdzLAogCQkJICAgdTMyIG5fcmVncykKQEAgLTI0MDMsNiArMjYxOCwxMiBAQCBzdGF0aWMg
aW50IGk5MTVfb2Ffc3RyZWFtX2luaXQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwK
IAkJfQogCX0KIAorCXJldCA9IGFsbG9jX25vYV93YWl0KHN0cmVhbSk7CisJaWYgKHJldCkgewor
CQlEUk1fREVCVUcoIlVuYWJsZSB0byBhbGxvY2F0ZSBOT0Egd2FpdCBiYXRjaCBidWZmZXJcbiIp
OworCQlnb3RvIGVycl9ub2Ffd2FpdF9hbGxvYzsKKwl9CisKIAlyZXQgPSBpOTE1X3BlcmZfZ2V0
X29hX2NvbmZpZyhkZXZfcHJpdiwgcHJvcHMtPm1ldHJpY3Nfc2V0LAogCQkJCSAgICAgICZzdHJl
YW0tPm9hX2NvbmZpZyk7CiAJaWYgKHJldCkgewpAQCAtMjQ2OSw2ICsyNjkwLDkgQEAgc3RhdGlj
IGludCBpOTE1X29hX3N0cmVhbV9pbml0KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0s
CiAJZnJlZV9vYV9jb25maWdzKHN0cmVhbSk7CiAKIGVycl9jb25maWc6CisJZnJlZV9ub2Ffd2Fp
dChzdHJlYW0pOworCitlcnJfbm9hX3dhaXRfYWxsb2M6CiAJaWYgKHN0cmVhbS0+Y3R4KQogCQlv
YV9wdXRfcmVuZGVyX2N0eF9pZChzdHJlYW0pOwogCkBAIC0zODU2LDYgKzQwODAsOSBAQCB2b2lk
IGk5MTVfcGVyZl9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkJcmF0
ZWxpbWl0X3NldF9mbGFncygmZGV2X3ByaXYtPnBlcmYuc3B1cmlvdXNfcmVwb3J0X3JzLAogCQkJ
CSAgICBSQVRFTElNSVRfTVNHX09OX1JFTEVBU0UpOwogCisJCWF0b21pYzY0X3NldCgmZGV2X3By
aXYtPnBlcmYubm9hX3Byb2dyYW1taW5nX2RlbGF5LAorCQkJICAgICA1MDAgKiAxMDAwIC8qIDUw
MHVzICovKTsKKwogCQlkZXZfcHJpdi0+cGVyZi5pbml0aWFsaXplZCA9IHRydWU7CiAJfQogfQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmX3R5cGVzLmggYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmZfdHlwZXMuaAppbmRleCA2Y2RlMzhiNjI3N2IuLjE1
ZWUwZDMzZTQ0ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmX3R5
cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmX3R5cGVzLmgKQEAgLTI2
OSw2ICsyNjksMTIgQEAgc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gewogCQkgKi8KIAkJdTMyIGhl
YWQ7CiAJfSBvYV9idWZmZXI7CisKKwkvKioKKwkgKiBBIGJhdGNoIGJ1ZmZlciBkb2luZyBhIHdh
aXQgb24gdGhlIEdQVSBmb3IgdGhlIE5PQSBsb2dpYyB0byBiZQorCSAqIHJlcHJvZ3JhbW1lZC4K
KwkgKi8KKwlzdHJ1Y3QgaTkxNV92bWEgKm5vYV93YWl0OwogfTsKIAogLyoqCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9yZWcuaAppbmRleCAwMDZjZmZkNTZiZTIuLjhmZWE5N2IwMjM2NSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3JlZy5oCkBAIC01NDUsNyArNTQ1LDkgQEAgc3RhdGljIGlubGluZSBib29sIGk5MTVf
bW1pb19yZWdfdmFsaWQoaTkxNV9yZWdfdCByZWcpCiAjZGVmaW5lIE1JX1BSRURJQ0FURV9TUkMw
X1VEVwlfTU1JTygweDI0MDAgKyA0KQogI2RlZmluZSBNSV9QUkVESUNBVEVfU1JDMQlfTU1JTygw
eDI0MDgpCiAjZGVmaW5lIE1JX1BSRURJQ0FURV9TUkMxX1VEVwlfTU1JTygweDI0MDggKyA0KQot
CisjZGVmaW5lIE1JX1BSRURJQ0FURV9EQVRBICAgICAgIF9NTUlPKDB4MjQxMCkKKyNkZWZpbmUg
TUlfUFJFRElDQVRFX1JFU1VMVCAgICAgX01NSU8oMHgyNDE4KQorI2RlZmluZSBNSV9QUkVESUNB
VEVfUkVTVUxUXzEgICBfTU1JTygweDI0MWMpCiAjZGVmaW5lIE1JX1BSRURJQ0FURV9SRVNVTFRf
MglfTU1JTygweDIyMTQpCiAjZGVmaW5lICBMT1dFUl9TTElDRV9FTkFCTEVECSgxIDw8IDApCiAj
ZGVmaW5lICBMT1dFUl9TTElDRV9ESVNBQkxFRAkoMCA8PCAwKQotLSAKMi4yMy4wCgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGlu
ZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

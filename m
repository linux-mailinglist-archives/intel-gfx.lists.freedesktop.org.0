Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id AA5014D977
	for <lists+intel-gfx@lfdr.de>; Thu, 20 Jun 2019 20:37:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0FAA26E3E9;
	Thu, 20 Jun 2019 18:37:12 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F34C96E3E9
 for <intel-gfx@lists.freedesktop.org>; Thu, 20 Jun 2019 18:37:09 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16970938-1500050 
 for <intel-gfx@lists.freedesktop.org>; Thu, 20 Jun 2019 19:37:06 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 20 Jun 2019 19:37:05 +0100
Message-Id: <20190620183705.31006-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Subject: [Intel-gfx] [CI] drm/i915/gtt: Defer address space cleanup to an
 RCU worker
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RW5hYmxlIFJDVSBwcm90ZWN0aW9uIG9mIGk5MTVfYWRkcmVzc19zcGFjZSBhbmQgaXRzIHBwZ3R0
IHN1cGVyY2xhc3NlcywKYW5kIGRlZmVyIGl0cyBjbGVhbnVwIGludG8gYSB3b3JrZXIgZXhlY3V0
ZWQgYWZ0ZXIgYW4gUkNVIGdyYWNlIHBlcmlvZC4KCkluIHRoZSBmdXR1cmUgd2Ugd2lsbCBiZSBh
YmxlIHRvIHVzZSB0aGUgUkNVIHByb3RlY3Rpb24gdG8gcmVkdWNlIHRoZQpsb2NraW5nIGFyb3Vu
ZCBWTSBsb29rdXBzLCBidXQgdGhlIGltbWVkaWF0ZSBiZW5lZml0IGlzIGJlaW5nIGFibGUgdG8K
ZGVmZXIgdGhlIHJlbGVhc2UgaW50byBhIGt3b3JrZXIgKHByb2Nlc3MgY29udGV4dCkuIFRoaXMg
aXMgcmVxdWlyZWQgYXMKd2UgbWF5IG5lZWQgdG8gc2xlZXAgdG8gcmVhcCB0aGUgV0MgcGFnZXMg
c3Rhc2hlZCBhd2F5IGluc2lkZSB0aGUgcHBndHQuCgpCdWd6aWxsYTogaHR0cHM6Ly9idWdzLmZy
ZWVkZXNrdG9wLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTEwOTM0ClNpZ25lZC1vZmYtYnk6IENocmlz
IFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpSZXZpZXdlZC1ieTogVHZydGtvIFVy
c3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9NYWtlZmlsZS5oZWFkZXItdGVzdCAgICAgfCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW1fZ3R0LmMgICAgICAgICAgIHwgMTc0ICsrKysrKystLS0tLS0tLS0tLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmggICAgICAgICAgIHwgICA3ICstCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZ3R0LmMgfCAgIDIgLQogNCBmaWxlcyBj
aGFuZ2VkLCA3MSBpbnNlcnRpb25zKCspLCAxMTMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUuaGVhZGVyLXRlc3QgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9NYWtlZmlsZS5oZWFkZXItdGVzdAppbmRleCBlNmJhNjZmNzg3ZjkuLmNiNzQyNDJm
OWMzYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUuaGVhZGVyLXRl
c3QKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUuaGVhZGVyLXRlc3QKQEAgLTYs
NiArNiw3IEBAIGhlYWRlcl90ZXN0IDo9IFwKIAlpOTE1X2FjdGl2ZV90eXBlcy5oIFwKIAlpOTE1
X2RlYnVnZnMuaCBcCiAJaTkxNV9kcnYuaCBcCisJaTkxNV9nZW1fZ3R0LmggXAogCWk5MTVfaXJx
LmggXAogCWk5MTVfcGFyYW1zLmggXAogCWk5MTVfcHJpb2xpc3RfdHlwZXMuaCBcCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2VtX2d0dC5jCmluZGV4IDhhYjgyMDE0NWVhNi4uNWI4NThmNjc1ZjI5IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYwpAQCAtNDgyLDkgKzQ4Miw2OSBAQCBzdGF0
aWMgdm9pZCB2bV9mcmVlX3BhZ2Uoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0sIHN0cnVj
dCBwYWdlICpwYWdlKQogCXNwaW5fdW5sb2NrKCZ2bS0+ZnJlZV9wYWdlcy5sb2NrKTsKIH0KIAor
c3RhdGljIHZvaWQgaTkxNV9hZGRyZXNzX3NwYWNlX2Zpbmkoc3RydWN0IGk5MTVfYWRkcmVzc19z
cGFjZSAqdm0pCit7CisJc3Bpbl9sb2NrKCZ2bS0+ZnJlZV9wYWdlcy5sb2NrKTsKKwlpZiAocGFn
ZXZlY19jb3VudCgmdm0tPmZyZWVfcGFnZXMucHZlYykpCisJCXZtX2ZyZWVfcGFnZXNfcmVsZWFz
ZSh2bSwgdHJ1ZSk7CisJR0VNX0JVR19PTihwYWdldmVjX2NvdW50KCZ2bS0+ZnJlZV9wYWdlcy5w
dmVjKSk7CisJc3Bpbl91bmxvY2soJnZtLT5mcmVlX3BhZ2VzLmxvY2spOworCisJZHJtX21tX3Rh
a2Vkb3duKCZ2bS0+bW0pOworCisJbXV0ZXhfZGVzdHJveSgmdm0tPm11dGV4KTsKK30KKworc3Rh
dGljIHZvaWQgcHBndHRfZGVzdHJveV92bWEoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0p
Cit7CisJc3RydWN0IGxpc3RfaGVhZCAqcGhhc2VzW10gPSB7CisJCSZ2bS0+Ym91bmRfbGlzdCwK
KwkJJnZtLT51bmJvdW5kX2xpc3QsCisJCU5VTEwsCisJfSwgKipwaGFzZTsKKworCW11dGV4X2xv
Y2soJnZtLT5pOTE1LT5kcm0uc3RydWN0X211dGV4KTsKKwlmb3IgKHBoYXNlID0gcGhhc2VzOyAq
cGhhc2U7IHBoYXNlKyspIHsKKwkJc3RydWN0IGk5MTVfdm1hICp2bWEsICp2bjsKKworCQlsaXN0
X2Zvcl9lYWNoX2VudHJ5X3NhZmUodm1hLCB2biwgKnBoYXNlLCB2bV9saW5rKQorCQkJaTkxNV92
bWFfZGVzdHJveSh2bWEpOworCX0KKwltdXRleF91bmxvY2soJnZtLT5pOTE1LT5kcm0uc3RydWN0
X211dGV4KTsKK30KKworc3RhdGljIHZvaWQgX19pOTE1X3ZtX3JlbGVhc2Uoc3RydWN0IHdvcmtf
c3RydWN0ICp3b3JrKQoreworCXN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtID0KKwkJY29u
dGFpbmVyX29mKHdvcmssIHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UsIHJjdS53b3JrKTsKKwor
CXBwZ3R0X2Rlc3Ryb3lfdm1hKHZtKTsKKworCUdFTV9CVUdfT04oIWxpc3RfZW1wdHkoJnZtLT5i
b3VuZF9saXN0KSk7CisJR0VNX0JVR19PTighbGlzdF9lbXB0eSgmdm0tPnVuYm91bmRfbGlzdCkp
OworCisJdm0tPmNsZWFudXAodm0pOworCWk5MTVfYWRkcmVzc19zcGFjZV9maW5pKHZtKTsKKwor
CWtmcmVlKHZtKTsKK30KKwordm9pZCBpOTE1X3ZtX3JlbGVhc2Uoc3RydWN0IGtyZWYgKmtyZWYp
Cit7CisJc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0gPQorCQljb250YWluZXJfb2Yoa3Jl
Ziwgc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSwgcmVmKTsKKworCUdFTV9CVUdfT04oaTkxNV9p
c19nZ3R0KHZtKSk7CisJdHJhY2VfaTkxNV9wcGd0dF9yZWxlYXNlKHZtKTsKKworCXZtLT5jbG9z
ZWQgPSB0cnVlOworCXF1ZXVlX3JjdV93b3JrKHZtLT5pOTE1LT53cSwgJnZtLT5yY3UpOworfQor
CiBzdGF0aWMgdm9pZCBpOTE1X2FkZHJlc3Nfc3BhY2VfaW5pdChzdHJ1Y3QgaTkxNV9hZGRyZXNz
X3NwYWNlICp2bSwgaW50IHN1YmNsYXNzKQogewogCWtyZWZfaW5pdCgmdm0tPnJlZik7CisJSU5J
VF9SQ1VfV09SSygmdm0tPnJjdSwgX19pOTE1X3ZtX3JlbGVhc2UpOwogCiAJLyoKIAkgKiBUaGUg
dm0tPm11dGV4IG11c3QgYmUgcmVjbGFpbSBzYWZlIChmb3IgdXNlIGluIHRoZSBzaHJpbmtlciku
CkBAIC01MDUsMTkgKzU2NSw2IEBAIHN0YXRpYyB2b2lkIGk5MTVfYWRkcmVzc19zcGFjZV9pbml0
KHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLCBpbnQgc3ViY2xhc3MpCiAJSU5JVF9MSVNU
X0hFQUQoJnZtLT5ib3VuZF9saXN0KTsKIH0KIAotc3RhdGljIHZvaWQgaTkxNV9hZGRyZXNzX3Nw
YWNlX2Zpbmkoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0pCi17Ci0Jc3Bpbl9sb2NrKCZ2
bS0+ZnJlZV9wYWdlcy5sb2NrKTsKLQlpZiAocGFnZXZlY19jb3VudCgmdm0tPmZyZWVfcGFnZXMu
cHZlYykpCi0JCXZtX2ZyZWVfcGFnZXNfcmVsZWFzZSh2bSwgdHJ1ZSk7Ci0JR0VNX0JVR19PTihw
YWdldmVjX2NvdW50KCZ2bS0+ZnJlZV9wYWdlcy5wdmVjKSk7Ci0Jc3Bpbl91bmxvY2soJnZtLT5m
cmVlX3BhZ2VzLmxvY2spOwotCi0JZHJtX21tX3Rha2Vkb3duKCZ2bS0+bW0pOwotCi0JbXV0ZXhf
ZGVzdHJveSgmdm0tPm11dGV4KTsKLX0KLQogc3RhdGljIGludCBfX3NldHVwX3BhZ2VfZG1hKHN0
cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAogCQkJICAgIHN0cnVjdCBpOTE1X3BhZ2VfZG1h
ICpwLAogCQkJICAgIGdmcF90IGdmcCkKQEAgLTE5MDksNjIgKzE5NTYsMTUgQEAgc3RhdGljIHZv
aWQgZ2VuNl9wcGd0dF9mcmVlX3BkKHN0cnVjdCBnZW42X3BwZ3R0ICpwcGd0dCkKIAkJCWZyZWVf
cHQoJnBwZ3R0LT5iYXNlLnZtLCBwdCk7CiB9CiAKLXN0cnVjdCBnZW42X3BwZ3R0X2NsZWFudXBf
d29yayB7Ci0Jc3RydWN0IHdvcmtfc3RydWN0IGJhc2U7Ci0Jc3RydWN0IGk5MTVfdm1hICp2bWE7
Ci19OwotCi1zdGF0aWMgdm9pZCBnZW42X3BwZ3R0X2NsZWFudXBfd29yayhzdHJ1Y3Qgd29ya19z
dHJ1Y3QgKndyaykKLXsKLQlzdHJ1Y3QgZ2VuNl9wcGd0dF9jbGVhbnVwX3dvcmsgKndvcmsgPQot
CQljb250YWluZXJfb2Yod3JrLCB0eXBlb2YoKndvcmspLCBiYXNlKTsKLQkvKiBTaWRlIG5vdGUs
IHZtYS0+dm0gaXMgdGhlIEdHVFQgbm90IHRoZSBwcGd0dCB3ZSBqdXN0IGRlc3Ryb3llZCEgKi8K
LQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHdvcmstPnZtYS0+dm0tPmk5MTU7Ci0K
LQltdXRleF9sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKLQlpOTE1X3ZtYV9kZXN0cm95
KHdvcmstPnZtYSk7Ci0JbXV0ZXhfdW5sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKLQot
CWtmcmVlKHdvcmspOwotfQotCi1zdGF0aWMgaW50IG5vcF9zZXRfcGFnZXMoc3RydWN0IGk5MTVf
dm1hICp2bWEpCi17Ci0JcmV0dXJuIC1FTk9ERVY7Ci19Ci0KLXN0YXRpYyB2b2lkIG5vcF9jbGVh
cl9wYWdlcyhzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKLXsKLX0KLQotc3RhdGljIGludCBub3BfYmlu
ZChzdHJ1Y3QgaTkxNV92bWEgKnZtYSwKLQkJICAgIGVudW0gaTkxNV9jYWNoZV9sZXZlbCBjYWNo
ZV9sZXZlbCwKLQkJICAgIHUzMiB1bnVzZWQpCi17Ci0JcmV0dXJuIC1FTk9ERVY7Ci19Ci0KLXN0
YXRpYyB2b2lkIG5vcF91bmJpbmQoc3RydWN0IGk5MTVfdm1hICp2bWEpCi17Ci19Ci0KLXN0YXRp
YyBjb25zdCBzdHJ1Y3QgaTkxNV92bWFfb3BzIG5vcF92bWFfb3BzID0gewotCS5zZXRfcGFnZXMg
PSBub3Bfc2V0X3BhZ2VzLAotCS5jbGVhcl9wYWdlcyA9IG5vcF9jbGVhcl9wYWdlcywKLQkuYmlu
ZF92bWEgPSBub3BfYmluZCwKLQkudW5iaW5kX3ZtYSA9IG5vcF91bmJpbmQsCi19OwotCiBzdGF0
aWMgdm9pZCBnZW42X3BwZ3R0X2NsZWFudXAoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0p
CiB7CiAJc3RydWN0IGdlbjZfcHBndHQgKnBwZ3R0ID0gdG9fZ2VuNl9wcGd0dChpOTE1X3ZtX3Rv
X3BwZ3R0KHZtKSk7Ci0Jc3RydWN0IGdlbjZfcHBndHRfY2xlYW51cF93b3JrICp3b3JrID0gcHBn
dHQtPndvcms7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB2bS0+aTkxNTsKIAog
CS8qIEZJWE1FIHJlbW92ZSB0aGUgc3RydWN0X211dGV4IHRvIGJyaW5nIHRoZSBsb2NraW5nIHVu
ZGVyIGNvbnRyb2wgKi8KLQlJTklUX1dPUksoJndvcmstPmJhc2UsIGdlbjZfcHBndHRfY2xlYW51
cF93b3JrKTsKLQl3b3JrLT52bWEgPSBwcGd0dC0+dm1hOwotCXdvcmstPnZtYS0+b3BzID0gJm5v
cF92bWFfb3BzOwotCXNjaGVkdWxlX3dvcmsoJndvcmstPmJhc2UpOworCW11dGV4X2xvY2soJmk5
MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOworCWk5MTVfdm1hX2Rlc3Ryb3kocHBndHQtPnZtYSk7CisJ
bXV0ZXhfdW5sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKIAogCWdlbjZfcHBndHRfZnJl
ZV9wZChwcGd0dCk7CiAJZ2VuNl9wcGd0dF9mcmVlX3NjcmF0Y2godm0pOwpAQCAtMjE0NiwxNiAr
MjE0NiwxMCBAQCBzdGF0aWMgc3RydWN0IGk5MTVfcHBndHQgKmdlbjZfcHBndHRfY3JlYXRlKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCiAJcHBndHQtPmJhc2Uudm0ucHRlX2VuY29k
ZSA9IGdndHQtPnZtLnB0ZV9lbmNvZGU7CiAKLQlwcGd0dC0+d29yayA9IGttYWxsb2Moc2l6ZW9m
KCpwcGd0dC0+d29yayksIEdGUF9LRVJORUwpOwotCWlmICghcHBndHQtPndvcmspIHsKLQkJZXJy
ID0gLUVOT01FTTsKLQkJZ290byBlcnJfZnJlZTsKLQl9Ci0KIAlwcGd0dC0+YmFzZS5wZCA9IF9f
YWxsb2NfcGQoKTsKIAlpZiAoIXBwZ3R0LT5iYXNlLnBkKSB7CiAJCWVyciA9IC1FTk9NRU07Ci0J
CWdvdG8gZXJyX3dvcms7CisJCWdvdG8gZXJyX2ZyZWU7CiAJfQogCiAJZXJyID0gZ2VuNl9wcGd0
dF9pbml0X3NjcmF0Y2gocHBndHQpOwpAQCAtMjE3NCw4ICsyMTY4LDYgQEAgc3RhdGljIHN0cnVj
dCBpOTE1X3BwZ3R0ICpnZW42X3BwZ3R0X2NyZWF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSkKIAlnZW42X3BwZ3R0X2ZyZWVfc2NyYXRjaCgmcHBndHQtPmJhc2Uudm0pOwogZXJyX3Bk
OgogCWtmcmVlKHBwZ3R0LT5iYXNlLnBkKTsKLWVycl93b3JrOgotCWtmcmVlKHBwZ3R0LT53b3Jr
KTsKIGVycl9mcmVlOgogCWtmcmVlKHBwZ3R0KTsKIAlyZXR1cm4gRVJSX1BUUihlcnIpOwpAQCAt
MjI1MCw0MiArMjI0Miw2IEBAIGk5MTVfcHBndHRfY3JlYXRlKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1KQogCXJldHVybiBwcGd0dDsKIH0KIAotc3RhdGljIHZvaWQgcHBndHRfZGVzdHJv
eV92bWEoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0pCi17Ci0Jc3RydWN0IGxpc3RfaGVh
ZCAqcGhhc2VzW10gPSB7Ci0JCSZ2bS0+Ym91bmRfbGlzdCwKLQkJJnZtLT51bmJvdW5kX2xpc3Qs
Ci0JCU5VTEwsCi0JfSwgKipwaGFzZTsKLQotCXZtLT5jbG9zZWQgPSB0cnVlOwotCWZvciAocGhh
c2UgPSBwaGFzZXM7ICpwaGFzZTsgcGhhc2UrKykgewotCQlzdHJ1Y3QgaTkxNV92bWEgKnZtYSwg
KnZuOwotCi0JCWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZSh2bWEsIHZuLCAqcGhhc2UsIHZtX2xp
bmspCi0JCQlpOTE1X3ZtYV9kZXN0cm95KHZtYSk7Ci0JfQotfQotCi12b2lkIGk5MTVfdm1fcmVs
ZWFzZShzdHJ1Y3Qga3JlZiAqa3JlZikKLXsKLQlzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2
bSA9Ci0JCWNvbnRhaW5lcl9vZihrcmVmLCBzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlLCByZWYp
OwotCi0JR0VNX0JVR19PTihpOTE1X2lzX2dndHQodm0pKTsKLQl0cmFjZV9pOTE1X3BwZ3R0X3Jl
bGVhc2Uodm0pOwotCi0JcHBndHRfZGVzdHJveV92bWEodm0pOwotCi0JR0VNX0JVR19PTighbGlz
dF9lbXB0eSgmdm0tPmJvdW5kX2xpc3QpKTsKLQlHRU1fQlVHX09OKCFsaXN0X2VtcHR5KCZ2bS0+
dW5ib3VuZF9saXN0KSk7Ci0KLQl2bS0+Y2xlYW51cCh2bSk7Ci0JaTkxNV9hZGRyZXNzX3NwYWNl
X2Zpbmkodm0pOwotCi0Ja2ZyZWUodm0pOwotfQotCiAvKiBDZXJ0YWluIEdlbjUgY2hpcHNldHMg
cmVxdWlyZSByZXF1aXJlIGlkbGluZyB0aGUgR1BVIGJlZm9yZQogICogdW5tYXBwaW5nIGFueXRo
aW5nIGZyb20gdGhlIEdUVCB3aGVuIFZULWQgaXMgZW5hYmxlZC4KICAqLwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dlbV9ndHQuaAppbmRleCA4MTI3MTdjY2M2OWIuLjRkNmY5Njc2M2E5OCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmgKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmgKQEAgLTM1LDggKzM1LDEyIEBACiAjZGVmaW5lIF9f
STkxNV9HRU1fR1RUX0hfXwogCiAjaW5jbHVkZSA8bGludXgvaW8tbWFwcGluZy5oPgorI2luY2x1
ZGUgPGxpbnV4L2tyZWYuaD4KICNpbmNsdWRlIDxsaW51eC9tbS5oPgogI2luY2x1ZGUgPGxpbnV4
L3BhZ2V2ZWMuaD4KKyNpbmNsdWRlIDxsaW51eC93b3JrcXVldWUuaD4KKworI2luY2x1ZGUgPGRy
bS9kcm1fbW0uaD4KIAogI2luY2x1ZGUgImd0L2ludGVsX3Jlc2V0LmgiCiAjaW5jbHVkZSAiaTkx
NV9nZW1fZmVuY2VfcmVnLmgiCkBAIC0yODAsNiArMjg0LDcgQEAgc3RydWN0IHBhZ2VzdGFzaCB7
CiAKIHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgewogCXN0cnVjdCBrcmVmIHJlZjsKKwlzdHJ1
Y3QgcmN1X3dvcmsgcmN1OwogCiAJc3RydWN0IGRybV9tbSBtbTsKIAlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNTsKQEAgLTQyNSw4ICs0MzAsNiBAQCBzdHJ1Y3QgZ2VuNl9wcGd0dCB7CiAK
IAl1bnNpZ25lZCBpbnQgcGluX2NvdW50OwogCWJvb2wgc2Nhbl9mb3JfdW51c2VkX3B0OwotCi0J
c3RydWN0IGdlbjZfcHBndHRfY2xlYW51cF93b3JrICp3b3JrOwogfTsKIAogI2RlZmluZSBfX3Rv
X2dlbjZfcHBndHQoYmFzZSkgY29udGFpbmVyX29mKGJhc2UsIHN0cnVjdCBnZW42X3BwZ3R0LCBi
YXNlKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2Vt
X2d0dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2d0dC5jCmlu
ZGV4IDFhNjBiOWZlODIyMS4uMGM0NzI3NmVkNWRmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZ3R0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2d0dC5jCkBAIC0yMDgsOSArMjA4LDcgQEAgc3RhdGljIGlu
dCBpZ3RfcHBndHRfYWxsb2Modm9pZCAqYXJnKQogCX0KIAogZXJyX3BwZ3R0X2NsZWFudXA6Ci0J
bXV0ZXhfbG9jaygmZGV2X3ByaXYtPmRybS5zdHJ1Y3RfbXV0ZXgpOwogCWk5MTVfdm1fcHV0KCZw
cGd0dC0+dm0pOwotCW11dGV4X3VubG9jaygmZGV2X3ByaXYtPmRybS5zdHJ1Y3RfbXV0ZXgpOwog
CXJldHVybiBlcnI7CiB9CiAKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vaW50ZWwtZ2Z4

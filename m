Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 04D1410FDDF
	for <lists+intel-gfx@lfdr.de>; Tue,  3 Dec 2019 13:42:05 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 38DB26E4B6;
	Tue,  3 Dec 2019 12:42:03 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AFE3D6E4B7
 for <intel-gfx@lists.freedesktop.org>; Tue,  3 Dec 2019 12:42:01 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19442022-1500050 
 for multiple; Tue, 03 Dec 2019 12:41:54 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  3 Dec 2019 12:41:55 +0000
Message-Id: <20191203124155.3019926-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/gt: Track the context validity
 explicitly
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UmF0aGVyIHRoYW4gYXNzdW1lIGlmIGFuZCBvbmx5IGlmIHRoZSBlbmdpbmUtPmRlZmF1bHRfc3Rh
dGUgaXMgbm90IHNldAp0aGF0IHRoZSBjb250ZXh0IGlzIGludmFsaWQsIGluc3RlYWQgdHJhY2sg
d2hlbiB3ZSBrbm93IHRoZSBjb250ZXh0IGhhcwp2YWxpZCBzdGF0ZSAtLSBlaXRoZXIgYmVjYXVz
ZSB3ZSBoYXZlIGNvcGllZCB0aGUgZGVmYXVsdF9zdGF0ZSBvciB3ZQpoYXZlIGNvbXBsZXRlZCBh
IGNvbnRleHQgc3dpdGNoIHRvIHNhdmUgdGhlIEhXIHN0YXRlLgoKU2lnbmVkLW9mZi1ieTogQ2hy
aXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Ci0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jICAgICAgICAgfCAxICsKIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaCAgIHwgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9scmMuYyAgICAgICAgICAgICB8IDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfcmluZ19zdWJtaXNzaW9uLmMgfCA0ICsrKy0KIDQgZmlsZXMgY2hhbmdlZCwgNiBp
bnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
Y29udGV4dC5jCmluZGV4IGI1ZTljMzVlYzZiOC4uYzVlNTJhZDM5NDYzIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jCkBAIC0xNDcsNiArMTQ3LDcgQEAgc3RhdGljIHZv
aWQgX19pbnRlbF9jb250ZXh0X3JldGlyZShzdHJ1Y3QgaTkxNV9hY3RpdmUgKmFjdGl2ZSkKIAlH
RU1fVFJBQ0UoIiVzIGNvbnRleHQ6JWxseCByZXRpcmVcbiIsCiAJCSAgY2UtPmVuZ2luZS0+bmFt
ZSwgY2UtPnRpbWVsaW5lLT5mZW5jZV9jb250ZXh0KTsKIAorCXNldF9iaXQoQ09OVEVYVF9WQUxJ
RF9CSVQsICZjZS0+ZmxhZ3MpOwogCWlmIChjZS0+c3RhdGUpCiAJCV9fY29udGV4dF91bnBpbl9z
dGF0ZShjZS0+c3RhdGUpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9jb250ZXh0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250
ZXh0X3R5cGVzLmgKaW5kZXggNjk1OWIwNWFlNWY4Li5kMTIwNGNjODk5YTMgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0X3R5cGVzLmgKQEAgLTU1LDYgKzU1LDcg
QEAgc3RydWN0IGludGVsX2NvbnRleHQgewogCiAJdW5zaWduZWQgbG9uZyBmbGFnczsKICNkZWZp
bmUgQ09OVEVYVF9BTExPQ19CSVQgMAorI2RlZmluZSBDT05URVhUX1ZBTElEX0JJVCAxCiAKIAl1
MzIgKmxyY19yZWdfc3RhdGU7CiAJdTY0IGxyY19kZXNjOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9scmMuYwppbmRleCBmZWY0YjdlODIzZjUuLjk3NmFkMWM2ODUzNiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfbHJjLmMKQEAgLTQwOTksNiArNDA5OSw3IEBAIHBvcHVsYXRlX2xyX2NvbnRl
eHQoc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAogCiAJCW1lbWNweSh2YWRkciwgZGVmYXVsdHMs
IGVuZ2luZS0+Y29udGV4dF9zaXplKTsKIAkJaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChlbmdp
bmUtPmRlZmF1bHRfc3RhdGUpOworCQlfX3NldF9iaXQoQ09OVEVYVF9WQUxJRF9CSVQsICZjZS0+
ZmxhZ3MpOwogCQlpbmhpYml0ID0gZmFsc2U7CiAJfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1Ym1pc3Npb24uYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX3Jpbmdfc3VibWlzc2lvbi5jCmluZGV4IGRjZGVlZjBhNzc2Zi4uMDkzY2Vj
MTAzYjRjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1
Ym1pc3Npb24uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1Ym1p
c3Npb24uYwpAQCAtMTMxOSw2ICsxMzE5LDggQEAgc3RhdGljIGludCByaW5nX2NvbnRleHRfYWxs
b2Moc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQogCQkJcmV0dXJuIFBUUl9FUlIodm1hKTsKIAog
CQljZS0+c3RhdGUgPSB2bWE7CisJCWlmIChlbmdpbmUtPmRlZmF1bHRfc3RhdGUpCisJCQlfX3Nl
dF9iaXQoQ09OVEVYVF9WQUxJRF9CSVQsICZjZS0+ZmxhZ3MpOwogCX0KIAogCXJldHVybiAwOwpA
QCAtMTYyNSw3ICsxNjI3LDcgQEAgc3RhdGljIGludCBzd2l0Y2hfY29udGV4dChzdHJ1Y3QgaTkx
NV9yZXF1ZXN0ICpycSkKIAlpZiAoY2UtPnN0YXRlKSB7CiAJCUdFTV9CVUdfT04ocnEtPmVuZ2lu
ZS0+aWQgIT0gUkNTMCk7CiAKLQkJaWYgKCFycS0+ZW5naW5lLT5kZWZhdWx0X3N0YXRlKQorCQlp
ZiAoIXRlc3RfYml0KENPTlRFWFRfVkFMSURfQklULCAmY2UtPmZsYWdzKSkKIAkJCWh3X2ZsYWdz
ID0gTUlfUkVTVE9SRV9JTkhJQklUOwogCiAJCXJldCA9IG1pX3NldF9jb250ZXh0KHJxLCBod19m
bGFncyk7Ci0tIAoyLjI0LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2lu
dGVsLWdmeA==

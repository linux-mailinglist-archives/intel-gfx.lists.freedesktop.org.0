Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 26DAC67769
	for <lists+intel-gfx@lfdr.de>; Sat, 13 Jul 2019 03:09:56 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 760E46E3B7;
	Sat, 13 Jul 2019 01:09:50 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 879836E39C
 for <intel-gfx@lists.freedesktop.org>; Sat, 13 Jul 2019 01:09:45 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 12 Jul 2019 18:09:45 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,484,1557212400"; d="scan'208";a="341850913"
Received: from dhoyan-mobl.amr.corp.intel.com (HELO ldmartin-desk1.intel.com)
 ([10.252.197.100])
 by orsmga005.jf.intel.com with ESMTP; 12 Jul 2019 18:09:44 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 12 Jul 2019 18:09:23 -0700
Message-Id: <20190713010940.17711-6-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190713010940.17711-1-lucas.demarchi@intel.com>
References: <20190713010940.17711-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 05/22] drm/i915/tgl: Update north display
 hotplug detection to TGL connections
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogSm9zw6kgUm9iZXJ0byBkZSBTb3V6YSA8am9zZS5zb3V6YUBpbnRlbC5jb20+CgpUR0wg
aGFzIDMgY29tYm9waHlzIGFuZCA2IFRDL1RCVCBwb3J0cywgc28gaXQgaGFzIDIgbW9yZSBUQy9U
QlQgcG9ydHMKdGhhbiBJQ0wgYW5kIHRoZSBQT1JUX0Mgb24gVEdMIGlzIGEgY29tYm9waHkuClNv
IGhlcmUgYWRkaW5nIGEgbmV3IGhwZCBub3J0aCB0YWJsZSBhbmQgZnVuY3Rpb24gdG8gZGV0ZWN0
IGxvbmcKcHVsc2UgZm9yIFRHTC4KClNpZ25lZC1vZmYtYnk6IEpvc8OpIFJvYmVydG8gZGUgU291
emEgPGpvc2Uuc291emFAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBMdWNhcyBEZSBNYXJjaGkg
PGx1Y2FzLmRlbWFyY2hpQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2lycS5jIHwgNTEgKysrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0tCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3JlZy5oIHwgMTIgKysrKysrLS0KIDIgZmlsZXMgY2hhbmdlZCwgNTYg
aW5zZXJ0aW9ucygrKSwgNyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2lycS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYwppbmRl
eCBhN2E5MDY3NGRiODkuLjI1NmJkMmMwNzJjMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9pcnEuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5jCkBA
IC01Niw2ICs1Niw4IEBACiAgKiBhbmQgcmVsYXRlZCBmaWxlcywgYnV0IHRoYXQgd2lsbCBiZSBk
ZXNjcmliZWQgaW4gc2VwYXJhdGUgY2hhcHRlcnMuCiAgKi8KIAordHlwZWRlZiBib29sICgqbG9u
Z19wdWxzZV9kZXRlY3RfZnVuYykoZW51bSBocGRfcGluIHBpbiwgdTMyIHZhbCk7CisKIHN0YXRp
YyBjb25zdCB1MzIgaHBkX2lsa1tIUERfTlVNX1BJTlNdID0gewogCVtIUERfUE9SVF9BXSA9IERF
X0RQX0FfSE9UUExVRywKIH07CkBAIC0xMzMsNiArMTM1LDE1IEBAIHN0YXRpYyBjb25zdCB1MzIg
aHBkX2dlbjExW0hQRF9OVU1fUElOU10gPSB7CiAJW0hQRF9QT1JUX0ZdID0gR0VOMTFfVEM0X0hP
VFBMVUcgfCBHRU4xMV9UQlQ0X0hPVFBMVUcKIH07CiAKK3N0YXRpYyBjb25zdCB1MzIgaHBkX2dl
bjEyW0hQRF9OVU1fUElOU10gPSB7CisJW0hQRF9QT1JUX0RdID0gR0VOMTFfVEMxX0hPVFBMVUcg
fCBHRU4xMV9UQlQxX0hPVFBMVUcsCisJW0hQRF9QT1JUX0VdID0gR0VOMTFfVEMyX0hPVFBMVUcg
fCBHRU4xMV9UQlQyX0hPVFBMVUcsCisJW0hQRF9QT1JUX0ZdID0gR0VOMTFfVEMzX0hPVFBMVUcg
fCBHRU4xMV9UQlQzX0hPVFBMVUcsCisJW0hQRF9QT1JUX0ddID0gR0VOMTFfVEM0X0hPVFBMVUcg
fCBHRU4xMV9UQlQ0X0hPVFBMVUcsCisJW0hQRF9QT1JUX0hdID0gR0VOMTJfVEM1X0hPVFBMVUcg
fCBHRU4xMl9UQlQ1X0hPVFBMVUcsCisJW0hQRF9QT1JUX0ldID0gR0VOMTJfVEM2X0hPVFBMVUcg
fCBHRU4xMl9UQlQ2X0hPVFBMVUcKK307CisKIHN0YXRpYyBjb25zdCB1MzIgaHBkX2ljcFtIUERf
TlVNX1BJTlNdID0gewogCVtIUERfUE9SVF9BXSA9IFNERV9ERElBX0hPVFBMVUdfSUNQLAogCVtI
UERfUE9SVF9CXSA9IFNERV9ERElCX0hPVFBMVUdfSUNQLApAQCAtMTY3Niw2ICsxNjg3LDI2IEBA
IHN0YXRpYyBib29sIGdlbjExX3BvcnRfaG90cGx1Z19sb25nX2RldGVjdChlbnVtIGhwZF9waW4g
cGluLCB1MzIgdmFsKQogCX0KIH0KIAorc3RhdGljIGJvb2wgZ2VuMTJfcG9ydF9ob3RwbHVnX2xv
bmdfZGV0ZWN0KGVudW0gaHBkX3BpbiBwaW4sIHUzMiB2YWwpCit7CisJc3dpdGNoIChwaW4pIHsK
KwljYXNlIEhQRF9QT1JUX0Q6CisJCXJldHVybiB2YWwgJiBHRU4xMV9IT1RQTFVHX0NUTF9MT05H
X0RFVEVDVChQT1JUX1RDMSk7CisJY2FzZSBIUERfUE9SVF9FOgorCQlyZXR1cm4gdmFsICYgR0VO
MTFfSE9UUExVR19DVExfTE9OR19ERVRFQ1QoUE9SVF9UQzIpOworCWNhc2UgSFBEX1BPUlRfRjoK
KwkJcmV0dXJuIHZhbCAmIEdFTjExX0hPVFBMVUdfQ1RMX0xPTkdfREVURUNUKFBPUlRfVEMzKTsK
KwljYXNlIEhQRF9QT1JUX0c6CisJCXJldHVybiB2YWwgJiBHRU4xMV9IT1RQTFVHX0NUTF9MT05H
X0RFVEVDVChQT1JUX1RDNCk7CisJY2FzZSBIUERfUE9SVF9IOgorCQlyZXR1cm4gdmFsICYgR0VO
MTFfSE9UUExVR19DVExfTE9OR19ERVRFQ1QoUE9SVF9UQzUpOworCWNhc2UgSFBEX1BPUlRfSToK
KwkJcmV0dXJuIHZhbCAmIEdFTjExX0hPVFBMVUdfQ1RMX0xPTkdfREVURUNUKFBPUlRfVEM2KTsK
KwlkZWZhdWx0OgorCQlyZXR1cm4gZmFsc2U7CisJfQorfQorCiBzdGF0aWMgYm9vbCBieHRfcG9y
dF9ob3RwbHVnX2xvbmdfZGV0ZWN0KGVudW0gaHBkX3BpbiBwaW4sIHUzMiB2YWwpCiB7CiAJc3dp
dGNoIChwaW4pIHsKQEAgLTI4NjksNiArMjkwMCwxNiBAQCBzdGF0aWMgdm9pZCBnZW4xMV9ocGRf
aXJxX2hhbmRsZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCB1MzIgaWlyKQog
CXUzMiBwaW5fbWFzayA9IDAsIGxvbmdfbWFzayA9IDA7CiAJdTMyIHRyaWdnZXJfdGMgPSBpaXIg
JiBHRU4xMV9ERV9UQ19IT1RQTFVHX01BU0s7CiAJdTMyIHRyaWdnZXJfdGJ0ID0gaWlyICYgR0VO
MTFfREVfVEJUX0hPVFBMVUdfTUFTSzsKKwlsb25nX3B1bHNlX2RldGVjdF9mdW5jIGxvbmdfcHVs
c2VfZGV0ZWN0OworCWNvbnN0IHUzMiAqaHBkOworCisJaWYgKElOVEVMX0dFTihkZXZfcHJpdikg
Pj0gMTIpIHsKKwkJbG9uZ19wdWxzZV9kZXRlY3QgPSBnZW4xMl9wb3J0X2hvdHBsdWdfbG9uZ19k
ZXRlY3Q7CisJCWhwZCA9IGhwZF9nZW4xMjsKKwl9IGVsc2UgeworCQlsb25nX3B1bHNlX2RldGVj
dCA9IGdlbjExX3BvcnRfaG90cGx1Z19sb25nX2RldGVjdDsKKwkJaHBkID0gaHBkX2dlbjExOwor
CX0KIAogCWlmICh0cmlnZ2VyX3RjKSB7CiAJCXUzMiBkaWdfaG90cGx1Z19yZWc7CkBAIC0yODc3
LDggKzI5MTgsNyBAQCBzdGF0aWMgdm9pZCBnZW4xMV9ocGRfaXJxX2hhbmRsZXIoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCB1MzIgaWlyKQogCQlJOTE1X1dSSVRFKEdFTjExX1RD
X0hPVFBMVUdfQ1RMLCBkaWdfaG90cGx1Z19yZWcpOwogCiAJCWludGVsX2dldF9ocGRfcGlucyhk
ZXZfcHJpdiwgJnBpbl9tYXNrLCAmbG9uZ19tYXNrLCB0cmlnZ2VyX3RjLAotCQkJCSAgIGRpZ19o
b3RwbHVnX3JlZywgaHBkX2dlbjExLAotCQkJCSAgIGdlbjExX3BvcnRfaG90cGx1Z19sb25nX2Rl
dGVjdCk7CisJCQkJICAgZGlnX2hvdHBsdWdfcmVnLCBocGQsIGxvbmdfcHVsc2VfZGV0ZWN0KTsK
IAl9CiAKIAlpZiAodHJpZ2dlcl90YnQpIHsKQEAgLTI4ODgsOCArMjkyOCw3IEBAIHN0YXRpYyB2
b2lkIGdlbjExX2hwZF9pcnFfaGFuZGxlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsIHUzMiBpaXIpCiAJCUk5MTVfV1JJVEUoR0VOMTFfVEJUX0hPVFBMVUdfQ1RMLCBkaWdfaG90
cGx1Z19yZWcpOwogCiAJCWludGVsX2dldF9ocGRfcGlucyhkZXZfcHJpdiwgJnBpbl9tYXNrLCAm
bG9uZ19tYXNrLCB0cmlnZ2VyX3RidCwKLQkJCQkgICBkaWdfaG90cGx1Z19yZWcsIGhwZF9nZW4x
MSwKLQkJCQkgICBnZW4xMV9wb3J0X2hvdHBsdWdfbG9uZ19kZXRlY3QpOworCQkJCSAgIGRpZ19o
b3RwbHVnX3JlZywgaHBkLCBsb25nX3B1bHNlX2RldGVjdCk7CiAJfQogCiAJaWYgKHBpbl9tYXNr
KQpAQCAtMzkxNSw5ICszOTU0LDExIEBAIHN0YXRpYyB2b2lkIGdlbjExX2hwZF9kZXRlY3Rpb25f
c2V0dXAoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogc3RhdGljIHZvaWQgZ2Vu
MTFfaHBkX2lycV9zZXR1cChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiB7CiAJ
dTMyIGhvdHBsdWdfaXJxcywgZW5hYmxlZF9pcnFzOworCWNvbnN0IHUzMiAqaHBkOwogCXUzMiB2
YWw7CiAKLQllbmFibGVkX2lycXMgPSBpbnRlbF9ocGRfZW5hYmxlZF9pcnFzKGRldl9wcml2LCBo
cGRfZ2VuMTEpOworCWhwZCA9IElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIgPyBocGRfZ2VuMTIg
OiBocGRfZ2VuMTE7CisJZW5hYmxlZF9pcnFzID0gaW50ZWxfaHBkX2VuYWJsZWRfaXJxcyhkZXZf
cHJpdiwgaHBkKTsKIAlob3RwbHVnX2lycXMgPSBHRU4xMV9ERV9UQ19IT1RQTFVHX01BU0sgfCBH
RU4xMV9ERV9UQlRfSE9UUExVR19NQVNLOwogCiAJdmFsID0gSTkxNV9SRUFEKEdFTjExX0RFX0hQ
RF9JTVIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKaW5kZXggZmJjNTE0NmE1OTMxLi5mZjcwM2Jh
ZjEwNWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaApAQCAtNzQ3MSwyMSArNzQ3MSwyOSBAQCBl
bnVtIHsKICNkZWZpbmUgR0VOMTFfREVfSFBEX0lNUgkJX01NSU8oMHg0NDQ3NCkKICNkZWZpbmUg
R0VOMTFfREVfSFBEX0lJUgkJX01NSU8oMHg0NDQ3OCkKICNkZWZpbmUgR0VOMTFfREVfSFBEX0lF
UgkJX01NSU8oMHg0NDQ3YykKKyNkZWZpbmUgIEdFTjEyX1RDNl9IT1RQTFVHCQkJKDEgPDwgMjEp
CisjZGVmaW5lICBHRU4xMl9UQzVfSE9UUExVRwkJCSgxIDw8IDIwKQogI2RlZmluZSAgR0VOMTFf
VEM0X0hPVFBMVUcJCQkoMSA8PCAxOSkKICNkZWZpbmUgIEdFTjExX1RDM19IT1RQTFVHCQkJKDEg
PDwgMTgpCiAjZGVmaW5lICBHRU4xMV9UQzJfSE9UUExVRwkJCSgxIDw8IDE3KQogI2RlZmluZSAg
R0VOMTFfVEMxX0hPVFBMVUcJCQkoMSA8PCAxNikKICNkZWZpbmUgIEdFTjExX1RDX0hPVFBMVUco
dGNfcG9ydCkJCSgxIDw8ICgodGNfcG9ydCkgKyAxNikpCi0jZGVmaW5lICBHRU4xMV9ERV9UQ19I
T1RQTFVHX01BU0sJCShHRU4xMV9UQzRfSE9UUExVRyB8IFwKKyNkZWZpbmUgIEdFTjExX0RFX1RD
X0hPVFBMVUdfTUFTSwkJKEdFTjEyX1RDNl9IT1RQTFVHIHwgXAorCQkJCQkJIEdFTjEyX1RDNV9I
T1RQTFVHIHwgXAorCQkJCQkJIEdFTjExX1RDNF9IT1RQTFVHIHwgXAogCQkJCQkJIEdFTjExX1RD
M19IT1RQTFVHIHwgXAogCQkJCQkJIEdFTjExX1RDMl9IT1RQTFVHIHwgXAogCQkJCQkJIEdFTjEx
X1RDMV9IT1RQTFVHKQorI2RlZmluZSAgR0VOMTJfVEJUNl9IT1RQTFVHCQkJKDEgPDwgNSkKKyNk
ZWZpbmUgIEdFTjEyX1RCVDVfSE9UUExVRwkJCSgxIDw8IDQpCiAjZGVmaW5lICBHRU4xMV9UQlQ0
X0hPVFBMVUcJCQkoMSA8PCAzKQogI2RlZmluZSAgR0VOMTFfVEJUM19IT1RQTFVHCQkJKDEgPDwg
MikKICNkZWZpbmUgIEdFTjExX1RCVDJfSE9UUExVRwkJCSgxIDw8IDEpCiAjZGVmaW5lICBHRU4x
MV9UQlQxX0hPVFBMVUcJCQkoMSA8PCAwKQogI2RlZmluZSAgR0VOMTFfVEJUX0hPVFBMVUcodGNf
cG9ydCkJCSgxIDw8ICh0Y19wb3J0KSkKLSNkZWZpbmUgIEdFTjExX0RFX1RCVF9IT1RQTFVHX01B
U0sJCShHRU4xMV9UQlQ0X0hPVFBMVUcgfCBcCisjZGVmaW5lICBHRU4xMV9ERV9UQlRfSE9UUExV
R19NQVNLCQkoR0VOMTJfVEJUNl9IT1RQTFVHIHwgXAorCQkJCQkJIEdFTjEyX1RCVDVfSE9UUExV
RyB8IFwKKwkJCQkJCSBHRU4xMV9UQlQ0X0hPVFBMVUcgfCBcCiAJCQkJCQkgR0VOMTFfVEJUM19I
T1RQTFVHIHwgXAogCQkJCQkJIEdFTjExX1RCVDJfSE9UUExVRyB8IFwKIAkJCQkJCSBHRU4xMV9U
QlQxX0hPVFBMVUcpCi0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2ludGVsLWdmeA==

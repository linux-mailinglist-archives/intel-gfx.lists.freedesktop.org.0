Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 73FC4DBA68
	for <lists+intel-gfx@lfdr.de>; Fri, 18 Oct 2019 02:05:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5729C6E0D4;
	Fri, 18 Oct 2019 00:05:35 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 18CBC6E0D4
 for <intel-gfx@lists.freedesktop.org>; Fri, 18 Oct 2019 00:05:33 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 17 Oct 2019 17:05:33 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,309,1566889200"; d="scan'208";a="397767031"
Received: from rmfosha-dev-1.fm.intel.com ([10.19.83.123])
 by fmsmga006.fm.intel.com with ESMTP; 17 Oct 2019 17:05:32 -0700
From: "Robert M. Fosha" <robert.m.fosha@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 17 Oct 2019 16:58:48 -0700
Message-Id: <20191017235849.21349-1-robert.m.fosha@intel.com>
X-Mailer: git-send-email 2.21.0.5.gaeb582a983
MIME-Version: 1.0
Subject: [Intel-gfx] [RESEND PATCH 1/2] drm/i915/guc: Enable guc logging on
 guc log relay write
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Q3JlYXRpbmcgYW5kIG9wZW5pbmcgdGhlIEd1QyBsb2cgcmVsYXkgZmlsZSBlbmFibGVzIGFuZCBz
dGFydHMKdGhlIHJlbGF5IHBvdGVudGlhbGx5IGJlZm9yZSB0aGUgY2FsbGVyIGlzIHJlYWR5IHRv
IGNvbnN1bWUgbG9ncy4KQ2hhbmdlIHRoZSBiZWhhdmlvciBzbyB0aGF0IHJlbGF5IHN0YXJ0cyBv
bmx5IG9uIGFuIGV4cGxpY2l0IGNhbGwKdG8gdGhlIHdyaXRlIGZ1bmN0aW9uICh3aXRoIGEgdmFs
dWUgb2YgJzEnKS4gT3RoZXIgdmFsdWVzIGZsdXNoCnRoZSBsb2cgcmVsYXkgYXMgYmVmb3JlLgoK
djI6IFN0eWxlIGNoYW5nZXMgYW5kIGZpeCB0eXBvcy4gQWRkIGd1Y19sb2dfcmVsYXlfc3RvcCgp
CmZ1bmN0aW9uLiAoRGFuaWVsZSkKCkNjOiBNYXR0aGV3IEJyb3N0IDxtYXR0aGV3LmJyb3N0QGlu
dGVsLmNvbT4KQ2M6IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUuY2VyYW9sb3NwdXJp
b0BpbnRlbC5jb20+CkNjOiBNaWNoYWwgV2FqZGVjemtvIDxtaWNoYWwud2FqZGVjemtvQGludGVs
LmNvbT4KU2lnbmVkLW9mZi1ieTogUm9iZXJ0IE0uIEZvc2hhIDxyb2JlcnQubS5mb3NoYUBpbnRl
bC5jb20+ClJldmlld2VkLWJ5OiBNYXR0aGV3IEJyb3N0IDxtYXR0aGV3LmJyb3N0QGludGVsLmNv
bT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfbG9nLmMgfCA1MyAr
KysrKysrKysrKysrKysrKy0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9n
dWNfbG9nLmggfCAgNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgICAg
ICAgIHwgMjIgKysrKysrKy0tCiAzIGZpbGVzIGNoYW5nZWQsIDYyIGluc2VydGlvbnMoKyksIDE3
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2lu
dGVsX2d1Y19sb2cuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19sb2cu
YwppbmRleCAyY2YyZDMzMTRmNjIuLmNhZWQwZDU3ZTcwNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2xvZy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3VjL2ludGVsX2d1Y19sb2cuYwpAQCAtMjI2LDcgKzIyNiw3IEBAIHN0YXRpYyB2b2lk
IGd1Y19yZWFkX3VwZGF0ZV9sb2dfYnVmZmVyKHN0cnVjdCBpbnRlbF9ndWNfbG9nICpsb2cpCiAK
IAltdXRleF9sb2NrKCZsb2ctPnJlbGF5LmxvY2spOwogCi0JaWYgKFdBUk5fT04oIWludGVsX2d1
Y19sb2dfcmVsYXlfZW5hYmxlZChsb2cpKSkKKwlpZiAoV0FSTl9PTighaW50ZWxfZ3VjX2xvZ19y
ZWxheV9jcmVhdGVkKGxvZykpKQogCQlnb3RvIG91dF91bmxvY2s7CiAKIAkvKiBHZXQgdGhlIHBv
aW50ZXIgdG8gc2hhcmVkIEd1QyBsb2cgYnVmZmVyICovCkBAIC0zNjEsNiArMzYxLDcgQEAgdm9p
ZCBpbnRlbF9ndWNfbG9nX2luaXRfZWFybHkoc3RydWN0IGludGVsX2d1Y19sb2cgKmxvZykKIHsK
IAltdXRleF9pbml0KCZsb2ctPnJlbGF5LmxvY2spOwogCUlOSVRfV09SSygmbG9nLT5yZWxheS5m
bHVzaF93b3JrLCBjYXB0dXJlX2xvZ3Nfd29yayk7CisJbG9nLT5yZWxheS5zdGFydGVkID0gZmFs
c2U7CiB9CiAKIHN0YXRpYyBpbnQgZ3VjX2xvZ19yZWxheV9jcmVhdGUoc3RydWN0IGludGVsX2d1
Y19sb2cgKmxvZykKQEAgLTU0Niw3ICs1NDcsNyBAQCBpbnQgaW50ZWxfZ3VjX2xvZ19zZXRfbGV2
ZWwoc3RydWN0IGludGVsX2d1Y19sb2cgKmxvZywgdTMyIGxldmVsKQogCXJldHVybiByZXQ7CiB9
CiAKLWJvb2wgaW50ZWxfZ3VjX2xvZ19yZWxheV9lbmFibGVkKGNvbnN0IHN0cnVjdCBpbnRlbF9n
dWNfbG9nICpsb2cpCitib29sIGludGVsX2d1Y19sb2dfcmVsYXlfY3JlYXRlZChjb25zdCBzdHJ1
Y3QgaW50ZWxfZ3VjX2xvZyAqbG9nKQogewogCXJldHVybiBsb2ctPnJlbGF5LmJ1Zl9hZGRyOwog
fQpAQCAtNTYwLDcgKzU2MSw3IEBAIGludCBpbnRlbF9ndWNfbG9nX3JlbGF5X29wZW4oc3RydWN0
IGludGVsX2d1Y19sb2cgKmxvZykKIAogCW11dGV4X2xvY2soJmxvZy0+cmVsYXkubG9jayk7CiAK
LQlpZiAoaW50ZWxfZ3VjX2xvZ19yZWxheV9lbmFibGVkKGxvZykpIHsKKwlpZiAoaW50ZWxfZ3Vj
X2xvZ19yZWxheV9jcmVhdGVkKGxvZykpIHsKIAkJcmV0ID0gLUVFWElTVDsKIAkJZ290byBvdXRf
dW5sb2NrOwogCX0KQEAgLTU4NSw2ICs1ODYsMjEgQEAgaW50IGludGVsX2d1Y19sb2dfcmVsYXlf
b3BlbihzdHJ1Y3QgaW50ZWxfZ3VjX2xvZyAqbG9nKQogCiAJbXV0ZXhfdW5sb2NrKCZsb2ctPnJl
bGF5LmxvY2spOwogCisJcmV0dXJuIDA7CisKK291dF9yZWxheToKKwlndWNfbG9nX3JlbGF5X2Rl
c3Ryb3kobG9nKTsKK291dF91bmxvY2s6CisJbXV0ZXhfdW5sb2NrKCZsb2ctPnJlbGF5LmxvY2sp
OworCisJcmV0dXJuIHJldDsKK30KKworaW50IGludGVsX2d1Y19sb2dfcmVsYXlfc3RhcnQoc3Ry
dWN0IGludGVsX2d1Y19sb2cgKmxvZykKK3sKKwlpZiAobG9nLT5yZWxheS5zdGFydGVkKQorCQly
ZXR1cm4gLUVFWElTVDsKKwogCWd1Y19sb2dfZW5hYmxlX2ZsdXNoX2V2ZW50cyhsb2cpOwogCiAJ
LyoKQEAgLTU5NCwxNCArNjEwLDkgQEAgaW50IGludGVsX2d1Y19sb2dfcmVsYXlfb3BlbihzdHJ1
Y3QgaW50ZWxfZ3VjX2xvZyAqbG9nKQogCSAqLwogCXF1ZXVlX3dvcmsoc3lzdGVtX2hpZ2hwcmlf
d3EsICZsb2ctPnJlbGF5LmZsdXNoX3dvcmspOwogCi0JcmV0dXJuIDA7Ci0KLW91dF9yZWxheToK
LQlndWNfbG9nX3JlbGF5X2Rlc3Ryb3kobG9nKTsKLW91dF91bmxvY2s6Ci0JbXV0ZXhfdW5sb2Nr
KCZsb2ctPnJlbGF5LmxvY2spOworCWxvZy0+cmVsYXkuc3RhcnRlZCA9IHRydWU7CiAKLQlyZXR1
cm4gcmV0OworCXJldHVybiAwOwogfQogCiB2b2lkIGludGVsX2d1Y19sb2dfcmVsYXlfZmx1c2go
c3RydWN0IGludGVsX2d1Y19sb2cgKmxvZykKQEAgLTYwOSw2ICs2MjAsOSBAQCB2b2lkIGludGVs
X2d1Y19sb2dfcmVsYXlfZmx1c2goc3RydWN0IGludGVsX2d1Y19sb2cgKmxvZykKIAlzdHJ1Y3Qg
aW50ZWxfZ3VjICpndWMgPSBsb2dfdG9fZ3VjKGxvZyk7CiAJaW50ZWxfd2FrZXJlZl90IHdha2Vy
ZWY7CiAKKwlpZiAoIWxvZy0+cmVsYXkuc3RhcnRlZCkKKwkJcmV0dXJuOworCiAJLyoKIAkgKiBC
ZWZvcmUgaW5pdGlhdGluZyB0aGUgZm9yY2VmdWwgZmx1c2gsIHdhaXQgZm9yIGFueSBwZW5kaW5n
L29uZ29pbmcKIAkgKiBmbHVzaCB0byBjb21wbGV0ZSBvdGhlcndpc2UgZm9yY2VmdWwgZmx1c2gg
bWF5IG5vdCBhY3R1YWxseSBoYXBwZW4uCkBAIC02MjIsMTggKzYzNiwzMyBAQCB2b2lkIGludGVs
X2d1Y19sb2dfcmVsYXlfZmx1c2goc3RydWN0IGludGVsX2d1Y19sb2cgKmxvZykKIAlndWNfbG9n
X2NhcHR1cmVfbG9ncyhsb2cpOwogfQogCi12b2lkIGludGVsX2d1Y19sb2dfcmVsYXlfY2xvc2Uo
c3RydWN0IGludGVsX2d1Y19sb2cgKmxvZykKKy8qCisgKiBTdG9wcyB0aGUgcmVsYXkgbG9nLiBD
YWxsZWQgZnJvbSBpbnRlbF9ndWNfbG9nX3JlbGF5X2Nsb3NlKCksIHNvIG5vCisgKiBwb3NzaWJp
bGl0eSBvZiByYWNlIHdpdGggc3RhcnQvZmx1c2ggc2luY2UgcmVsYXlfd3JpdGUgY2Fubm90IHJh
Y2UKKyAqIHJlbGF5X2Nsb3NlLgorICovCitzdGF0aWMgdm9pZCBndWNfbG9nX3JlbGF5X3N0b3Ao
c3RydWN0IGludGVsX2d1Y19sb2cgKmxvZykKIHsKIAlzdHJ1Y3QgaW50ZWxfZ3VjICpndWMgPSBs
b2dfdG9fZ3VjKGxvZyk7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBndWNfdG9f
Z3QoZ3VjKS0+aTkxNTsKIAorCWlmICghbG9nLT5yZWxheS5zdGFydGVkKQorCQlyZXR1cm47CisK
IAlndWNfbG9nX2Rpc2FibGVfZmx1c2hfZXZlbnRzKGxvZyk7CiAJaW50ZWxfc3luY2hyb25pemVf
aXJxKGk5MTUpOwogCiAJZmx1c2hfd29yaygmbG9nLT5yZWxheS5mbHVzaF93b3JrKTsKIAorCWxv
Zy0+cmVsYXkuc3RhcnRlZCA9IGZhbHNlOworfQorCit2b2lkIGludGVsX2d1Y19sb2dfcmVsYXlf
Y2xvc2Uoc3RydWN0IGludGVsX2d1Y19sb2cgKmxvZykKK3sKKwlndWNfbG9nX3JlbGF5X3N0b3Ao
bG9nKTsKKwogCW11dGV4X2xvY2soJmxvZy0+cmVsYXkubG9jayk7Ci0JR0VNX0JVR19PTighaW50
ZWxfZ3VjX2xvZ19yZWxheV9lbmFibGVkKGxvZykpOworCUdFTV9CVUdfT04oIWludGVsX2d1Y19s
b2dfcmVsYXlfY3JlYXRlZChsb2cpKTsKIAlndWNfbG9nX3VubWFwKGxvZyk7CiAJZ3VjX2xvZ19y
ZWxheV9kZXN0cm95KGxvZyk7CiAJbXV0ZXhfdW5sb2NrKCZsb2ctPnJlbGF5LmxvY2spOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2xvZy5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2xvZy5oCmluZGV4IDZmNzY0ODc5YWNi
MS4uYzI1MmMwMjJjNWZjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9p
bnRlbF9ndWNfbG9nLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3Vj
X2xvZy5oCkBAIC00Nyw2ICs0Nyw3IEBAIHN0cnVjdCBpbnRlbF9ndWNfbG9nIHsKIAlzdHJ1Y3Qg
aTkxNV92bWEgKnZtYTsKIAlzdHJ1Y3QgewogCQl2b2lkICpidWZfYWRkcjsKKwkJYm9vbCBzdGFy
dGVkOwogCQlzdHJ1Y3Qgd29ya19zdHJ1Y3QgZmx1c2hfd29yazsKIAkJc3RydWN0IHJjaGFuICpj
aGFubmVsOwogCQlzdHJ1Y3QgbXV0ZXggbG9jazsKQEAgLTY1LDggKzY2LDkgQEAgaW50IGludGVs
X2d1Y19sb2dfY3JlYXRlKHN0cnVjdCBpbnRlbF9ndWNfbG9nICpsb2cpOwogdm9pZCBpbnRlbF9n
dWNfbG9nX2Rlc3Ryb3koc3RydWN0IGludGVsX2d1Y19sb2cgKmxvZyk7CiAKIGludCBpbnRlbF9n
dWNfbG9nX3NldF9sZXZlbChzdHJ1Y3QgaW50ZWxfZ3VjX2xvZyAqbG9nLCB1MzIgbGV2ZWwpOwot
Ym9vbCBpbnRlbF9ndWNfbG9nX3JlbGF5X2VuYWJsZWQoY29uc3Qgc3RydWN0IGludGVsX2d1Y19s
b2cgKmxvZyk7Citib29sIGludGVsX2d1Y19sb2dfcmVsYXlfY3JlYXRlZChjb25zdCBzdHJ1Y3Qg
aW50ZWxfZ3VjX2xvZyAqbG9nKTsKIGludCBpbnRlbF9ndWNfbG9nX3JlbGF5X29wZW4oc3RydWN0
IGludGVsX2d1Y19sb2cgKmxvZyk7CitpbnQgaW50ZWxfZ3VjX2xvZ19yZWxheV9zdGFydChzdHJ1
Y3QgaW50ZWxfZ3VjX2xvZyAqbG9nKTsKIHZvaWQgaW50ZWxfZ3VjX2xvZ19yZWxheV9mbHVzaChz
dHJ1Y3QgaW50ZWxfZ3VjX2xvZyAqbG9nKTsKIHZvaWQgaW50ZWxfZ3VjX2xvZ19yZWxheV9jbG9z
ZShzdHJ1Y3QgaW50ZWxfZ3VjX2xvZyAqbG9nKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVn
ZnMuYwppbmRleCBhZGE1N2VlZTkxNGEuLmFkNTM2ZDgyZTYwZiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kZWJ1Z2ZzLmMKQEAgLTE4NjYsOCArMTg2Niw4IEBAIHN0YXRpYyB2b2lkIGk5MTVfZ3Vj
X2xvZ19pbmZvKHN0cnVjdCBzZXFfZmlsZSAqbSwKIAlzdHJ1Y3QgaW50ZWxfZ3VjX2xvZyAqbG9n
ID0gJmRldl9wcml2LT5ndC51Yy5ndWMubG9nOwogCWVudW0gZ3VjX2xvZ19idWZmZXJfdHlwZSB0
eXBlOwogCi0JaWYgKCFpbnRlbF9ndWNfbG9nX3JlbGF5X2VuYWJsZWQobG9nKSkgewotCQlzZXFf
cHV0cyhtLCAiR3VDIGxvZyByZWxheSBkaXNhYmxlZFxuIik7CisJaWYgKCFpbnRlbF9ndWNfbG9n
X3JlbGF5X2NyZWF0ZWQobG9nKSkgeworCQlzZXFfcHV0cyhtLCAiR3VDIGxvZyByZWxheSBub3Qg
Y3JlYXRlZFxuIik7CiAJCXJldHVybjsKIAl9CiAKQEAgLTIwNTQsOSArMjA1NCwyMyBAQCBpOTE1
X2d1Y19sb2dfcmVsYXlfd3JpdGUoc3RydWN0IGZpbGUgKmZpbHAsCiAJCQkgbG9mZl90ICpwcG9z
KQogewogCXN0cnVjdCBpbnRlbF9ndWNfbG9nICpsb2cgPSBmaWxwLT5wcml2YXRlX2RhdGE7CisJ
aW50IHZhbDsKKwlpbnQgcmV0OwogCi0JaW50ZWxfZ3VjX2xvZ19yZWxheV9mbHVzaChsb2cpOwot
CXJldHVybiBjbnQ7CisJcmV0ID0ga3N0cnRvaW50X2Zyb21fdXNlcih1YnVmLCBjbnQsIDAsICZ2
YWwpOworCWlmIChyZXQgPCAwKQorCQlyZXR1cm4gcmV0OworCisJLyoKKwkgKiBFbmFibGUgYW5k
IHN0YXJ0IHRoZSBndWMgbG9nIHJlbGF5IG9uIHZhbHVlIG9mIDEuCisJICogRmx1c2ggbG9nIHJl
bGF5IGZvciBhbnkgb3RoZXIgdmFsdWUuCisJICovCisJaWYgKHZhbCA9PSAxKQorCQlyZXQgPSBp
bnRlbF9ndWNfbG9nX3JlbGF5X3N0YXJ0KGxvZyk7CisJZWxzZQorCQlpbnRlbF9ndWNfbG9nX3Jl
bGF5X2ZsdXNoKGxvZyk7CisKKwlyZXR1cm4gcmV0ID86IGNudDsKIH0KIAogc3RhdGljIGludCBp
OTE1X2d1Y19sb2dfcmVsYXlfcmVsZWFzZShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmls
ZSAqZmlsZSkKLS0gCjIuMjEuMC41LmdhZWI1ODJhOTgzCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9pbnRlbC1nZng=

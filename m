Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5DFBD349BE5
	for <lists+intel-gfx@lfdr.de>; Thu, 25 Mar 2021 22:48:48 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7E23A6EE66;
	Thu, 25 Mar 2021 21:48:45 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 748FE6EE5D
 for <intel-gfx@lists.freedesktop.org>; Thu, 25 Mar 2021 21:48:29 +0000 (UTC)
IronPort-SDR: ULQo/2FpZ6TAy+8sY9FFiM7m8Vye6we3BbkGtAwi36EWIDj+uUS13AbeR69I7ThiVjjbEFJb8+
 ML7IFSEY2PIw==
X-IronPort-AV: E=McAfee;i="6000,8403,9934"; a="171005068"
X-IronPort-AV: E=Sophos;i="5.81,278,1610438400"; d="scan'208";a="171005068"
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by fmsmga107.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 25 Mar 2021 14:48:29 -0700
IronPort-SDR: nz5h3sUiUOXFZwIBW7NLHv62Up3cTopOB0XzoZUSBW57aj8GXBopeptx0lVdqAshXKBRAQLj17
 UdmZ4yV0A5yQ==
X-IronPort-AV: E=Sophos;i="5.81,278,1610438400"; d="scan'208";a="375235669"
Received: from ideak-desk.fi.intel.com ([10.237.68.141])
 by orsmga003-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 25 Mar 2021 14:48:27 -0700
From: Imre Deak <imre.deak@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 25 Mar 2021 23:47:56 +0200
Message-Id: <20210325214808.2071517-14-imre.deak@intel.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20210325214808.2071517-1-imre.deak@intel.com>
References: <20210325214808.2071517-1-imre.deak@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 13/25] drm/i915/intel_fb: Factor out
 convert_plane_offset_to_xy()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RmFjdG9yIG91dCB0byBhIG5ldyBmdW5jdGlvbiB0aGUgbG9naWMgdG8gY29udmVydCB0aGUgRkIg
cGxhbmUgb2Zmc2V0IHRvCngveSBhbmQgY2hlY2sgdGhlIHZhbGlkaXR5IG9mIHgveSwgd2l0aCB0
aGUgZ29hbCB0byBtYWtlCmludGVsX2ZpbGxfZmJfaW5mbygpIG1vcmUgcmVhZGFibGUuCgp2Mjog
VXNlICZmYi0+YmFzZSBpbnN0ZWFkIG9mIGEgZHJtX2ZiIGFsaWFzLiAoVmlsbGUpCgpTaWduZWQt
b2ZmLWJ5OiBJbXJlIERlYWsgPGltcmUuZGVha0BpbnRlbC5jb20+ClJldmlld2VkLWJ5OiBWaWxs
ZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZmIuYyB8IDY5ICsrKysrKysrKysrKysrKy0tLS0t
LS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA0MSBpbnNlcnRpb25zKCspLCAyOCBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZiLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZiLmMKaW5kZXggZjQ1NzlmMzA2NzMz
Zi4uMjViOTY3MjIwY2YwNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9mYi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZmIu
YwpAQCAtNDAwLDEwICs0MDAsMTAgQEAgc3RhdGljIGludCBpbnRlbF9mYl9vZmZzZXRfdG9feHko
aW50ICp4LCBpbnQgKnksCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyBpbnQgaW50ZWxfZmJfY2hl
Y2tfY2NzX3h5KHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiLCBpbnQgY2NzX3BsYW5lLCBpbnQg
eCwgaW50IHkpCitzdGF0aWMgaW50IGludGVsX2ZiX2NoZWNrX2Njc194eShjb25zdCBzdHJ1Y3Qg
ZHJtX2ZyYW1lYnVmZmVyICpmYiwgaW50IGNjc19wbGFuZSwgaW50IHgsIGludCB5KQogewogCXN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShmYi0+ZGV2KTsKLQlzdHJ1Y3Qg
aW50ZWxfZnJhbWVidWZmZXIgKmludGVsX2ZiID0gdG9faW50ZWxfZnJhbWVidWZmZXIoZmIpOwor
CWNvbnN0IHN0cnVjdCBpbnRlbF9mcmFtZWJ1ZmZlciAqaW50ZWxfZmIgPSB0b19pbnRlbF9mcmFt
ZWJ1ZmZlcihmYik7CiAJaW50IG1haW5fcGxhbmU7CiAJaW50IGhzdWIsIHZzdWI7CiAJaW50IHRp
bGVfd2lkdGgsIHRpbGVfaGVpZ2h0OwpAQCAtNTIwLDYgKzUyMCw0NCBAQCBzdGF0aWMgYm9vbCBp
bnRlbF9wbGFuZV9uZWVkc19yZW1hcChjb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBs
YW5lX3N0YXRlKQogCXJldHVybiBzdHJpZGUgPiBtYXhfc3RyaWRlOwogfQogCitzdGF0aWMgaW50
IGNvbnZlcnRfcGxhbmVfb2Zmc2V0X3RvX3h5KGNvbnN0IHN0cnVjdCBpbnRlbF9mcmFtZWJ1ZmZl
ciAqZmIsIGludCBjb2xvcl9wbGFuZSwKKwkJCQkgICAgICBpbnQgcGxhbmVfd2lkdGgsIGludCAq
eCwgaW50ICp5KQoreworCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmogPSBpbnRlbF9m
Yl9vYmooJmZiLT5iYXNlKTsKKwlpbnQgcmV0OworCisJcmV0ID0gaW50ZWxfZmJfb2Zmc2V0X3Rv
X3h5KHgsIHksICZmYi0+YmFzZSwgY29sb3JfcGxhbmUpOworCWlmIChyZXQpIHsKKwkJZHJtX2Ri
Z19rbXMoZmItPmJhc2UuZGV2LAorCQkJICAgICJiYWQgZmIgcGxhbmUgJWQgb2Zmc2V0OiAweCV4
XG4iLAorCQkJICAgIGNvbG9yX3BsYW5lLCBmYi0+YmFzZS5vZmZzZXRzW2NvbG9yX3BsYW5lXSk7
CisJCXJldHVybiByZXQ7CisJfQorCisJcmV0ID0gaW50ZWxfZmJfY2hlY2tfY2NzX3h5KCZmYi0+
YmFzZSwgY29sb3JfcGxhbmUsICp4LCAqeSk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKwor
CS8qCisJICogVGhlIGZlbmNlIChpZiB1c2VkKSBpcyBhbGlnbmVkIHRvIHRoZSBzdGFydCBvZiB0
aGUgb2JqZWN0CisJICogc28gaGF2aW5nIHRoZSBmcmFtZWJ1ZmZlciB3cmFwIGFyb3VuZCBhY3Jv
c3MgdGhlIGVkZ2Ugb2YgdGhlCisJICogZmVuY2VkIHJlZ2lvbiBkb2Vzbid0IHJlYWxseSB3b3Jr
LiBXZSBoYXZlIG5vIEFQSSB0byBjb25maWd1cmUKKwkgKiB0aGUgZmVuY2Ugc3RhcnQgb2Zmc2V0
IHdpdGhpbiB0aGUgb2JqZWN0IChub3IgY291bGQgd2UgcHJvYmFibHkKKwkgKiBvbiBnZW4yLzMp
LiBTbyBpdCdzIGp1c3QgZWFzaWVyIGlmIHdlIGp1c3QgcmVxdWlyZSB0aGF0IHRoZQorCSAqIGZi
IGxheW91dCBhZ3JlZXMgd2l0aCB0aGUgZmVuY2UgbGF5b3V0LiBXZSBhbHJlYWR5IGNoZWNrIHRo
YXQgdGhlCisJICogZmIgc3RyaWRlIG1hdGNoZXMgdGhlIGZlbmNlIHN0cmlkZSBlbHNld2hlcmUu
CisJICovCisJaWYgKGNvbG9yX3BsYW5lID09IDAgJiYgaTkxNV9nZW1fb2JqZWN0X2lzX3RpbGVk
KG9iaikgJiYKKwkgICAgKCp4ICsgcGxhbmVfd2lkdGgpICogZmItPmJhc2UuZm9ybWF0LT5jcHBb
Y29sb3JfcGxhbmVdID4gZmItPmJhc2UucGl0Y2hlc1tjb2xvcl9wbGFuZV0pIHsKKwkJZHJtX2Ri
Z19rbXMoZmItPmJhc2UuZGV2LAorCQkJICAgICJiYWQgZmIgcGxhbmUgJWQgb2Zmc2V0OiAweCV4
XG4iLAorCQkJICAgIGNvbG9yX3BsYW5lLCBmYi0+YmFzZS5vZmZzZXRzW2NvbG9yX3BsYW5lXSk7
CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCXJldHVybiAwOworfQorCiAvKgogICogU2V0dXAg
dGhlIHJvdGF0ZWQgdmlldyBmb3IgYW4gRkIgcGxhbmUgYW5kIHJldHVybiB0aGUgc2l6ZSB0aGUg
R1RUIG1hcHBpbmcKICAqIHJlcXVpcmVzIGZvciB0aGlzIHZpZXcuCkBAIC02MTEsMzUgKzY0OSwx
MCBAQCBpbnQgaW50ZWxfZmlsbF9mYl9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
LCBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYgogCQljcHAgPSBmYi0+Zm9ybWF0LT5jcHBbaV07
CiAJCWludGVsX2ZiX3BsYW5lX2RpbXMoJndpZHRoLCAmaGVpZ2h0LCBmYiwgaSk7CiAKLQkJcmV0
ID0gaW50ZWxfZmJfb2Zmc2V0X3RvX3h5KCZ4LCAmeSwgZmIsIGkpOwotCQlpZiAocmV0KSB7Ci0J
CQlkcm1fZGJnX2ttcygmaTkxNS0+ZHJtLAotCQkJCSAgICAiYmFkIGZiIHBsYW5lICVkIG9mZnNl
dDogMHgleFxuIiwKLQkJCQkgICAgaSwgZmItPm9mZnNldHNbaV0pOwotCQkJcmV0dXJuIHJldDsK
LQkJfQotCi0JCXJldCA9IGludGVsX2ZiX2NoZWNrX2Njc194eShmYiwgaSwgeCwgeSk7CisJCXJl
dCA9IGNvbnZlcnRfcGxhbmVfb2Zmc2V0X3RvX3h5KGludGVsX2ZiLCBpLCB3aWR0aCwgJngsICZ5
KTsKIAkJaWYgKHJldCkKIAkJCXJldHVybiByZXQ7CiAKLQkJLyoKLQkJICogVGhlIGZlbmNlIChp
ZiB1c2VkKSBpcyBhbGlnbmVkIHRvIHRoZSBzdGFydCBvZiB0aGUgb2JqZWN0Ci0JCSAqIHNvIGhh
dmluZyB0aGUgZnJhbWVidWZmZXIgd3JhcCBhcm91bmQgYWNyb3NzIHRoZSBlZGdlIG9mIHRoZQot
CQkgKiBmZW5jZWQgcmVnaW9uIGRvZXNuJ3QgcmVhbGx5IHdvcmsuIFdlIGhhdmUgbm8gQVBJIHRv
IGNvbmZpZ3VyZQotCQkgKiB0aGUgZmVuY2Ugc3RhcnQgb2Zmc2V0IHdpdGhpbiB0aGUgb2JqZWN0
IChub3IgY291bGQgd2UgcHJvYmFibHkKLQkJICogb24gZ2VuMi8zKS4gU28gaXQncyBqdXN0IGVh
c2llciBpZiB3ZSBqdXN0IHJlcXVpcmUgdGhhdCB0aGUKLQkJICogZmIgbGF5b3V0IGFncmVlcyB3
aXRoIHRoZSBmZW5jZSBsYXlvdXQuIFdlIGFscmVhZHkgY2hlY2sgdGhhdCB0aGUKLQkJICogZmIg
c3RyaWRlIG1hdGNoZXMgdGhlIGZlbmNlIHN0cmlkZSBlbHNld2hlcmUuCi0JCSAqLwotCQlpZiAo
aSA9PSAwICYmIGk5MTVfZ2VtX29iamVjdF9pc190aWxlZChvYmopICYmCi0JCSAgICAoeCArIHdp
ZHRoKSAqIGNwcCA+IGZiLT5waXRjaGVzW2ldKSB7Ci0JCQlkcm1fZGJnX2ttcygmaTkxNS0+ZHJt
LAotCQkJCSAgICAiYmFkIGZiIHBsYW5lICVkIG9mZnNldDogMHgleFxuIiwKLQkJCQkgICAgIGks
IGZiLT5vZmZzZXRzW2ldKTsKLQkJCXJldHVybiAtRUlOVkFMOwotCQl9Ci0KIAkJLyoKIAkJICog
Rmlyc3QgcGl4ZWwgb2YgdGhlIGZyYW1lYnVmZmVyIGZyb20KIAkJICogdGhlIHN0YXJ0IG9mIHRo
ZSBub3JtYWwgZ3R0IG1hcHBpbmcuCi0tIAoyLjI1LjEKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

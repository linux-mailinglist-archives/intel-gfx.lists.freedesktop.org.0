Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9740D1A042D
	for <lists+intel-gfx@lfdr.de>; Tue,  7 Apr 2020 03:10:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0CD006E507;
	Tue,  7 Apr 2020 01:10:30 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A31E36E0EB
 for <intel-gfx@lists.freedesktop.org>; Tue,  7 Apr 2020 01:10:22 +0000 (UTC)
IronPort-SDR: 4QJqrAGLClYxSa7lt9GXCYZuN7V1wy6CYKHTQPf6yPDuV+4CfHaMGV4sf6YvUc8vlKYY08mV07
 nCV53gS75hvQ==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga103.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 06 Apr 2020 18:10:21 -0700
IronPort-SDR: dI7Z1hQcJPJT5dp868FOyVTivteQuB6tSlT2oTQljqSY0D/m2CRYxTTW2L1K180znpWOdaUUTR
 BP3L+Lxozujw==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.72,353,1580803200"; d="scan'208";a="254295623"
Received: from josouza-mobl2.jf.intel.com (HELO josouza-MOBL2.intel.com)
 ([10.24.15.8])
 by orsmga006.jf.intel.com with ESMTP; 06 Apr 2020 18:10:21 -0700
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon,  6 Apr 2020 18:11:53 -0700
Message-Id: <20200407011157.362092-4-jose.souza@intel.com>
X-Mailer: git-send-email 2.26.0
In-Reply-To: <20200407011157.362092-1-jose.souza@intel.com>
References: <20200407011157.362092-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 4/8] drm/i915/tc/icl: Implement TC cold
 sequences
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Cooper Chiou <cooper.chiou@intel.com>,
 Kai-Heng Feng <kai.heng.feng@canonical.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhpcyBpcyByZXF1aXJlZCBmb3IgbGVnYWN5L3N0YXRpYyBUQyBwb3J0cyBhcyBJT00gaXMgbm90
IGF3YXJlIG9mCnRoZSBjb25uZWN0aW9uIGFuZCB3aWxsIG5vdCB0cmlnZ2VyIHRoZSBUQyBjb2xk
IGV4aXQuCgpKdXN0IHJlcXVlc3QgUENPREUgdG8gZXhpdCBUQ0NPTEQgaXMgbm90IGVub3VnaCBh
cyBpdCBjb3VsZCBlbnRlcgphZ2FpbiBiZWZvcmUgZHJpdmVyIG1ha2VzIHVzZSBvZiB0aGUgcG9y
dCwgdG8gcHJldmVudCBpdCBCU3BlYyBzdGF0ZXMKdGhhdCBhdXggcG93ZXJ3ZWxsIHNob3VsZCBi
ZSBoZWxkLgoKU28gaGVyZSBlbWJlZGRpbmcgdGhlIFRDIGNvbGQgZXhpdCBzZXF1ZW5jZSBpbnRv
IElDTCBhdXggZW5hYmxlLAppdCB3aWxsIGVuYWJsZSBhdXggYW5kIHRoZW4gcmVxdWVzdCBUQyBj
b2xkIHRvIGV4aXQuCgpUaGUgVEMgY29sZCBibG9jayhleGl0IGFuZCBhdXggaG9sZCkgYW5kIHVu
YmxvY2sgd2FzIGFkZGVkIHRvIHNvbWUKZXhwb3J0ZWQgVEMgZnVuY3Rpb25zIGZvciB0aGUgb3Ro
ZXJzIGFuZCB0byBhY2Nlc3MgUEhZIHJlZ2lzdGVycywKY2FsbGVycyBzaG91bGQgZW5hYmxlIGFu
ZCBrZWVwIGF1eCBwb3dlcndlbGwgZW5hYmxlZCBkdXJpbmcgYWNjZXNzLgoKQWxzbyBhZGRpbmcg
VEMgY29sZCBjaGVjayBhbmQgd2FybmlnIGluIHRjX3BvcnRfbG9hZF9maWFfcGFyYW1zKCkgYXMK
YXQgdGhpcyBwb2ludCBvZiB0aGUgZHJpdmVyIGluaXRpYWxpemF0aW9uIHdlIGNhbid0IHJlcXVl
c3QgcG93ZXIKd2VsbHMsIGlmIHdlIGdldCB0aGlzIHdhcm5pbmcgd2Ugd2lsbCBuZWVkIHRvIGZp
Z3VyZSBvdXQgaG93IHRvIGhhbmRsZQppdC4KCnYyOgotIG1vdmVkIElDTCBUQyBjb2xkIGV4aXQg
ZnVuY3Rpb24gdG8gaW50ZWxfZGlzcGxheV9wb3dlcgotIHVzaW5nIGRpZ19wb3J0LT50Y19sZWdh
Y3lfcG9ydCB0byBvbmx5IGV4ZWN1dGUgc2VxdWVuY2VzIGZvciBsZWdhY3kKcG9ydHMsIGhvcGVm
dWxseSBWQlRzIHdpbGwgaGF2ZSB0aGlzIHJpZ2h0Ci0gZml4ZWQgY2hlY2sgdG8gY2FsbCBfaHN3
X3Bvd2VyX3dlbGxfY29udGludWVfZW5hYmxlKCkKLSBjYWxsaW5nIF9oc3dfcG93ZXJfd2VsbF9j
b250aW51ZV9lbmFibGUoKSB1bmNvbmRpdGlvbmFsbHkgaW4KaWNsX3RjX3BoeV9hdXhfcG93ZXJf
d2VsbF9lbmFibGUoKSwgaWYgbmVlZGVkIHdlIHdpbGwgc3VycHJlc3MgdGltZW91dAp3YXJuaW5n
cyBvZiBUQyBsZWdhY3kgcG9ydHMKLSBvbmx5IGJsb2NraW5nIFRDIGNvbGQgYXJvdW5kIGZpYSBh
Y2Nlc3MKCkJTcGVjOiAyMTc1MApGaXhlczogaHR0cHM6Ly9naXRsYWIuZnJlZWRlc2t0b3Aub3Jn
L2RybS9pbnRlbC9pc3N1ZXMvMTI5NgpDYzogSW1yZSBEZWFrIDxpbXJlLmRlYWtAaW50ZWwuY29t
PgpDYzogQ29vcGVyIENoaW91IDxjb29wZXIuY2hpb3VAaW50ZWwuY29tPgpDYzogS2FpLUhlbmcg
RmVuZyA8a2FpLmhlbmcuZmVuZ0BjYW5vbmljYWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBKb3PDqSBS
b2JlcnRvIGRlIFNvdXphIDxqb3NlLnNvdXphQGludGVsLmNvbT4KCnNxdWFzaCBpY2wKLS0tCiAu
Li4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMgICAgfCAyMiArKysrKyst
CiAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmggICAgfCAgMSArCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3RjLmMgICAgICAgfCA2NCArKysrKysr
KysrKysrKysrKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oICAgICAgICAgICAg
ICAgfCAgMSArCiA0IGZpbGVzIGNoYW5nZWQsIDgwIGluc2VydGlvbnMoKyksIDggZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5X3Bvd2VyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlf
cG93ZXIuYwppbmRleCA2MmU0OWYwNmQ0NjcuLjEzMzYyNDc3NDNjNCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMKQEAgLTU3NSw2
ICs1NzUsMjUgQEAgc3RhdGljIHZvaWQgaWNsX3RjX3BvcnRfYXNzZXJ0X3JlZl9oZWxkKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAogI2RlZmluZSBUR0xfQVVYX1BXX1RPX1RD
X1BPUlQocHdfaWR4KQkoKHB3X2lkeCkgLSBUR0xfUFdfQ1RMX0lEWF9BVVhfVEMxKQogCitzdGF0
aWMgdm9pZCBpY2xfdGNfY29sZF9leGl0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQor
eworCWludCByZXQ7CisKKwlkbyB7CisJCXJldCA9IHNhbmR5YnJpZGdlX3Bjb2RlX3dyaXRlX3Rp
bWVvdXQoaTkxNSwKKwkJCQkJCSAgICAgIElDTF9QQ09ERV9FWElUX1RDQ09MRCwKKwkJCQkJCSAg
ICAgIDAsIDI1MCwgMSk7CisKKwl9IHdoaWxlIChyZXQgPT0gLUVBR0FJTik7CisKKwkvKiBTcGVj
IHN0YXRlcyB0aGF0IFRDIGNvbGQgZXhpdCBjYW4gdGFrZSB1cCB0byAxbXMgdG8gY29tcGxldGUg
Ki8KKwlpZiAoIXJldCkKKwkJbXNsZWVwKDEpOworCisJZHJtX2RiZ19rbXMoJmk5MTUtPmRybSwg
IlRDIGNvbGQgYmxvY2sgJXNcbiIsIHJldCA9PSAwID8gInN1Y2NlZWRlZCIgOgorCQkgICAgImZh
aWxlZCIpOworfQorCiBzdGF0aWMgdm9pZAogaWNsX3RjX3BoeV9hdXhfcG93ZXJfd2VsbF9lbmFi
bGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJCSBzdHJ1Y3QgaTkxNV9w
b3dlcl93ZWxsICpwb3dlcl93ZWxsKQpAQCAtNTkzLDcgKzYxMiw4IEBAIGljbF90Y19waHlfYXV4
X3Bvd2VyX3dlbGxfZW5hYmxlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAog
CWhzd19wb3dlcl93ZWxsX2VuYWJsZV9wcmVwYXJlKGRldl9wcml2LCBwb3dlcl93ZWxsKTsKIAot
CS8qIFRPRE8gSUNMIFRDIGNvbGQgaGFuZGxpbmcgKi8KKwlpZiAoSU5URUxfR0VOKGRldl9wcml2
KSA9PSAxMSAmJiBkaWdfcG9ydC0+dGNfbGVnYWN5X3BvcnQpCisJCWljbF90Y19jb2xkX2V4aXQo
ZGV2X3ByaXYpOwogCiAJaHN3X3Bvd2VyX3dlbGxfZW5hYmxlX2NvbXBsZXRlKGRldl9wcml2LCBw
b3dlcl93ZWxsKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kaXNwbGF5X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXlfdHlwZXMuaAppbmRleCA1YTBhZGYxNGViZWYuLmY3NTA2YWM0MGViNCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgK
QEAgLTE0MDAsNiArMTQwMCw3IEBAIHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgewogCWVudW0g
aW50ZWxfZGlzcGxheV9wb3dlcl9kb21haW4gZGRpX2lvX3Bvd2VyX2RvbWFpbjsKIAlzdHJ1Y3Qg
bXV0ZXggdGNfbG9jazsJLyogcHJvdGVjdHMgdGhlIFR5cGVDIHBvcnQgbW9kZSAqLwogCWludGVs
X3dha2VyZWZfdCB0Y19sb2NrX3dha2VyZWY7CisJaW50ZWxfd2FrZXJlZl90IHRjX2NvbGRfd2Fr
ZXJlZjsKIAlpbnQgdGNfbGlua19yZWZjb3VudDsKIAlib29sIHRjX2xlZ2FjeV9wb3J0OjE7CiAJ
Y2hhciB0Y19wb3J0X25hbWVbOF07CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX3RjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Rj
LmMKaW5kZXggOWI4NTBjMTFhYTc4Li43NTY0MjU5ZDY3N2UgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdGMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX3RjLmMKQEAgLTM0LDYgKzM0LDcgQEAgdGNfcG9ydF9sb2FkX2ZpYV9w
YXJhbXMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAJaWYgKElOVEVMX0lORk8oaTkx
NSktPmRpc3BsYXkuaGFzX21vZHVsYXJfZmlhKSB7CiAJCW1vZHVsYXJfZmlhID0gaW50ZWxfdW5j
b3JlX3JlYWQoJmk5MTUtPnVuY29yZSwKIAkJCQkJCVBPUlRfVFhfREZMRVhEUFNQKEZJQTEpKTsK
KwkJZHJtX1dBUk5fT04oJmk5MTUtPmRybSwgbW9kdWxhcl9maWEgPT0gMHhmZmZmZmZmZik7CiAJ
CW1vZHVsYXJfZmlhICY9IE1PRFVMQVJfRklBX01BU0s7CiAJfSBlbHNlIHsKIAkJbW9kdWxhcl9m
aWEgPSAwOwpAQCAtNTIsNiArNTMsMzcgQEAgdGNfcG9ydF9sb2FkX2ZpYV9wYXJhbXMoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAJfQogfQogCitzdGF0aWMgaW50ZWxfd2FrZXJlZl90
Cit0Y19jb2xkX2Jsb2NrKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0KQorewor
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShkaWdfcG9ydC0+YmFzZS5i
YXNlLmRldik7CisJZW51bSBpbnRlbF9kaXNwbGF5X3Bvd2VyX2RvbWFpbiBkb21haW47CisKKwlp
ZiAoSU5URUxfR0VOKGk5MTUpICE9IDExIHx8ICFkaWdfcG9ydC0+dGNfbGVnYWN5X3BvcnQpCisJ
CXJldHVybiAwOworCisJZG9tYWluID0gaW50ZWxfbGVnYWN5X2F1eF90b19wb3dlcl9kb21haW4o
ZGlnX3BvcnQtPmF1eF9jaCk7CisJcmV0dXJuIGludGVsX2Rpc3BsYXlfcG93ZXJfZ2V0KGk5MTUs
IGRvbWFpbik7Cit9CisKK3N0YXRpYyB2b2lkCit0Y19jb2xkX3VuYmxvY2soc3RydWN0IGludGVs
X2RpZ2l0YWxfcG9ydCAqZGlnX3BvcnQsIGludGVsX3dha2VyZWZfdCB3YWtlcmVmKQoreworCXN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShkaWdfcG9ydC0+YmFzZS5iYXNl
LmRldik7CisJZW51bSBpbnRlbF9kaXNwbGF5X3Bvd2VyX2RvbWFpbiBkb21haW47CisKKwkvKgor
CSAqIHdha2VyZWYgPT0gLTEsIG1lYW5zIHNvbWUgZXJyb3IgaGFwcGVuZWQgc2F2aW5nIHNhdmVf
ZGVwb3Rfc3RhY2sgYnV0CisJICogcG93ZXIgc2hvdWxkIHN0aWxsIGJlIHB1dCBkb3duIGFuZCAw
IGlzIGEgaW52YWxpZCBzYXZlX2RlcG90X3N0YWNrCisJICogaWQgc28gY2FuIGJlIHVzZWQgdG8g
c2tpcCBpdCBmb3Igbm9uIFRDIGxlZ2FjeSBwb3J0cy4KKwkgKi8KKwlpZiAod2FrZXJlZiA9PSAw
KQorCQlyZXR1cm47CisKKwlkb21haW4gPSBpbnRlbF9sZWdhY3lfYXV4X3RvX3Bvd2VyX2RvbWFp
bihkaWdfcG9ydC0+YXV4X2NoKTsKKwlpbnRlbF9kaXNwbGF5X3Bvd2VyX3B1dF9hc3luYyhpOTE1
LCBkb21haW4sIHdha2VyZWYpOworfQorCiB1MzIgaW50ZWxfdGNfcG9ydF9nZXRfbGFuZV9tYXNr
KHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0KQogewogCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1ID0gdG9faTkxNShkaWdfcG9ydC0+YmFzZS5iYXNlLmRldik7CkBAIC00
MTUsOSArNDQ3LDE0IEBAIHN0YXRpYyB2b2lkIGludGVsX3RjX3BvcnRfcmVzZXRfbW9kZShzdHJ1
Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCwKIAllbnVtIHRjX3BvcnRfbW9kZSBvbGRf
dGNfbW9kZSA9IGRpZ19wb3J0LT50Y19tb2RlOwogCiAJaW50ZWxfZGlzcGxheV9wb3dlcl9mbHVz
aF93b3JrKGk5MTUpOwotCWRybV9XQVJOX09OKCZpOTE1LT5kcm0sCi0JCSAgICBpbnRlbF9kaXNw
bGF5X3Bvd2VyX2lzX2VuYWJsZWQoaTkxNSwKLQkJCQkJaW50ZWxfYXV4X3Bvd2VyX2RvbWFpbihk
aWdfcG9ydCkpKTsKKwlpZiAoSU5URUxfR0VOKGk5MTUpICE9IDExIHx8ICFkaWdfcG9ydC0+dGNf
bGVnYWN5X3BvcnQpIHsKKwkJZW51bSBpbnRlbF9kaXNwbGF5X3Bvd2VyX2RvbWFpbiBhdXhfZG9t
YWluOworCQlib29sIGF1eF9wb3dlcmVkOworCisJCWF1eF9kb21haW4gPSBpbnRlbF9hdXhfcG93
ZXJfZG9tYWluKGRpZ19wb3J0KTsKKwkJYXV4X3Bvd2VyZWQgPSBpbnRlbF9kaXNwbGF5X3Bvd2Vy
X2lzX2VuYWJsZWQoaTkxNSwgYXV4X2RvbWFpbik7CisJCWRybV9XQVJOX09OKCZpOTE1LT5kcm0s
IGF1eF9wb3dlcmVkKTsKKwl9CiAKIAlpY2xfdGNfcGh5X2Rpc2Nvbm5lY3QoZGlnX3BvcnQpOwog
CWljbF90Y19waHlfY29ubmVjdChkaWdfcG9ydCwgcmVxdWlyZWRfbGFuZXMpOwpAQCAtNDM5LDkg
KzQ3NiwxMSBAQCBpbnRlbF90Y19wb3J0X2xpbmtfaW5pdF9yZWZjb3VudChzdHJ1Y3QgaW50ZWxf
ZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCwKIHZvaWQgaW50ZWxfdGNfcG9ydF9zYW5pdGl6ZShzdHJ1
Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCkKIHsKIAlzdHJ1Y3QgaW50ZWxfZW5jb2Rl
ciAqZW5jb2RlciA9ICZkaWdfcG9ydC0+YmFzZTsKKwlpbnRlbF93YWtlcmVmX3QgdGNfY29sZF93
cmVmOwogCWludCBhY3RpdmVfbGlua3MgPSAwOwogCiAJbXV0ZXhfbG9jaygmZGlnX3BvcnQtPnRj
X2xvY2spOworCXRjX2NvbGRfd3JlZiA9IHRjX2NvbGRfYmxvY2soZGlnX3BvcnQpOwogCiAJZGln
X3BvcnQtPnRjX21vZGUgPSBpbnRlbF90Y19wb3J0X2dldF9jdXJyZW50X21vZGUoZGlnX3BvcnQp
OwogCWlmIChkaWdfcG9ydC0+ZHAuaXNfbXN0KQpAQCAtNDY2LDYgKzUwNSw3IEBAIHZvaWQgaW50
ZWxfdGNfcG9ydF9zYW5pdGl6ZShzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCkK
IAkJICAgICAgZGlnX3BvcnQtPnRjX3BvcnRfbmFtZSwKIAkJICAgICAgdGNfcG9ydF9tb2RlX25h
bWUoZGlnX3BvcnQtPnRjX21vZGUpKTsKIAorCXRjX2NvbGRfdW5ibG9jayhkaWdfcG9ydCwgdGNf
Y29sZF93cmVmKTsKIAltdXRleF91bmxvY2soJmRpZ19wb3J0LT50Y19sb2NrKTsKIH0KIApAQCAt
NDg3LDEwICs1MjcsMTUgQEAgc3RhdGljIGJvb2wgaW50ZWxfdGNfcG9ydF9uZWVkc19yZXNldChz
dHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCkKIGJvb2wgaW50ZWxfdGNfcG9ydF9j
b25uZWN0ZWQoc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqZGlnX3BvcnQpCiB7CiAJYm9vbCBp
c19jb25uZWN0ZWQ7CisJaW50ZWxfd2FrZXJlZl90IHRjX2NvbGRfd3JlZjsKIAogCWludGVsX3Rj
X3BvcnRfbG9jayhkaWdfcG9ydCk7CisJdGNfY29sZF93cmVmID0gdGNfY29sZF9ibG9jayhkaWdf
cG9ydCk7CisKIAlpc19jb25uZWN0ZWQgPSB0Y19wb3J0X2xpdmVfc3RhdHVzX21hc2soZGlnX3Bv
cnQpICYKIAkJICAgICAgIEJJVChkaWdfcG9ydC0+dGNfbW9kZSk7CisKKwl0Y19jb2xkX3VuYmxv
Y2soZGlnX3BvcnQsIHRjX2NvbGRfd3JlZik7CiAJaW50ZWxfdGNfcG9ydF91bmxvY2soZGlnX3Bv
cnQpOwogCiAJcmV0dXJuIGlzX2Nvbm5lY3RlZDsKQEAgLTUwMCwxNSArNTQ1LDIwIEBAIHN0YXRp
YyB2b2lkIF9faW50ZWxfdGNfcG9ydF9sb2NrKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRp
Z19wb3J0LAogCQkJCSBpbnQgcmVxdWlyZWRfbGFuZXMpCiB7CiAJc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTUgPSB0b19pOTE1KGRpZ19wb3J0LT5iYXNlLmJhc2UuZGV2KTsKLQlpbnRlbF93
YWtlcmVmX3Qgd2FrZXJlZjsKKwlpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZiwgdGNfY29sZF93cmVm
OwogCiAJd2FrZXJlZiA9IGludGVsX2Rpc3BsYXlfcG93ZXJfZ2V0KGk5MTUsIFBPV0VSX0RPTUFJ
Tl9ESVNQTEFZX0NPUkUpOwogCiAJbXV0ZXhfbG9jaygmZGlnX3BvcnQtPnRjX2xvY2spOwogCi0J
aWYgKCFkaWdfcG9ydC0+dGNfbGlua19yZWZjb3VudCAmJgotCSAgICBpbnRlbF90Y19wb3J0X25l
ZWRzX3Jlc2V0KGRpZ19wb3J0KSkKLQkJaW50ZWxfdGNfcG9ydF9yZXNldF9tb2RlKGRpZ19wb3J0
LCByZXF1aXJlZF9sYW5lcyk7CisJaWYgKCFkaWdfcG9ydC0+dGNfbGlua19yZWZjb3VudCkgewor
CQl0Y19jb2xkX3dyZWYgPSB0Y19jb2xkX2Jsb2NrKGRpZ19wb3J0KTsKKworCQlpZiAoaW50ZWxf
dGNfcG9ydF9uZWVkc19yZXNldChkaWdfcG9ydCkpCisJCQlpbnRlbF90Y19wb3J0X3Jlc2V0X21v
ZGUoZGlnX3BvcnQsIHJlcXVpcmVkX2xhbmVzKTsKKworCQl0Y19jb2xkX3VuYmxvY2soZGlnX3Bv
cnQsIHRjX2NvbGRfd3JlZik7CisJfQogCiAJZHJtX1dBUk5fT04oJmk5MTUtPmRybSwgZGlnX3Bv
cnQtPnRjX2xvY2tfd2FrZXJlZik7CiAJZGlnX3BvcnQtPnRjX2xvY2tfd2FrZXJlZiA9IHdha2Vy
ZWY7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAppbmRleCA4Y2ViYjdhODZiOGMuLjVjYmNkMDFhYzNk
NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCkBAIC05MTA3LDYgKzkxMDcsNyBAQCBlbnVtIHsK
ICNkZWZpbmUgICAgIElDTF9QQ09ERV9NRU1fU1NfUkVBRF9RR1ZfUE9JTlRfSU5GTyhwb2ludCkJ
KCgocG9pbnQpIDw8IDE2KSB8ICgweDEgPDwgOCkpCiAjZGVmaW5lICAgR0VONl9QQ09ERV9SRUFE
X0RfQ09NUAkJMHgxMAogI2RlZmluZSAgIEdFTjZfUENPREVfV1JJVEVfRF9DT01QCQkweDExCisj
ZGVmaW5lICAgSUNMX1BDT0RFX0VYSVRfVENDT0xECQkJMHgxMgogI2RlZmluZSAgIEhTV19QQ09E
RV9ERV9XUklURV9GUkVRX1JFUQkJMHgxNwogI2RlZmluZSAgIERJU1BMQVlfSVBTX0NPTlRST0wJ
CQkweDE5CiAgICAgICAgICAgICAvKiBTZWUgYWxzbyBJUFNfQ1RMICovCi0tIAoyLjI2LjAKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBt
YWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

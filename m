Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C4353D31E6
	for <lists+intel-gfx@lfdr.de>; Thu, 10 Oct 2019 22:22:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 300186E098;
	Thu, 10 Oct 2019 20:22:39 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2D9476E098
 for <intel-gfx@lists.freedesktop.org>; Thu, 10 Oct 2019 20:22:37 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18796341-1500050 
 for multiple; Thu, 10 Oct 2019 21:22:25 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 10 Oct 2019 21:22:24 +0100
Message-Id: <20191010202224.4927-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191010194851.26592-7-chris@chris-wilson.co.uk>
References: <20191010194851.26592-7-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/perf: Allow dynamic reconfiguration of
 the OA stream
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SW50cm9kdWNlIGEgbmV3IHBlcmZfaW9jdGwgY29tbWFuZCB0byBjaGFuZ2UgdGhlIE9BIGNvbmZp
Z3VyYXRpb24gb2YgdGhlCmFjdGl2ZSBzdHJlYW0uIFRoaXMgYWxsb3dzIHRoZSBPQSBzdHJlYW0g
dG8gYmUgcmVjb25maWd1cmVkIGJldHdlZW4KYmF0Y2ggYnVmZmVycywgZ2l2aW5nIGdyZWF0ZXIg
ZmxleGliaWxpdHkgaW4gc2FtcGxpbmcuIFdlIGluamVjdCBhCnJlcXVlc3QgaW50byB0aGUgT0Eg
Y29udGV4dCB0byByZWNvbmZpZ3VyZSB0aGUgc3RyZWFtIGFzeW5jaHJvbm91c2x5IG9uCnRoZSBH
UFUgaW4gYmV0d2VlbiBhbmQgb3JkZXJlZCB3aXRoIGV4ZWNidWZmZXIgY2FsbHMuCgpPcmlnaW5h
bCBwYXRjaCBmb3IgZHluYW1pYyByZWNvbmZpZ3VyYXRpb24gYnkgTGlvbmVsIExhbmR3ZXJsaW4u
CgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4K
UmV2aWV3ZWQtYnk6IExpb25lbCBMYW5kd2VybGluIDxsaW9uZWwuZy5sYW5kd2VybGluQGludGVs
LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyB8IDQ2ICsrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKystCiBpbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmggICAg
ICB8IDEwICsrKysrKysKIDIgZmlsZXMgY2hhbmdlZCwgNTUgaW5zZXJ0aW9ucygrKSwgMSBkZWxl
dGlvbigtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKaW5kZXggYzM3ZmUyNzVjZjMzLi4wNDU5
ZTY2ZWJhMzYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCkBAIC0yODYwLDYgKzI4NjAsNDAg
QEAgc3RhdGljIHZvaWQgaTkxNV9wZXJmX2Rpc2FibGVfbG9ja2VkKHN0cnVjdCBpOTE1X3BlcmZf
c3RyZWFtICpzdHJlYW0pCiAJCXN0cmVhbS0+b3BzLT5kaXNhYmxlKHN0cmVhbSk7CiB9CiAKK3N0
YXRpYyBsb25nIGk5MTVfcGVyZl9jb25maWdfbG9ja2VkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFt
ICpzdHJlYW0sCisJCQkJICAgIHVuc2lnbmVkIGxvbmcgbWV0cmljc19zZXQpCit7CisJc3RydWN0
IGk5MTVfb2FfY29uZmlnICpjb25maWc7CisJaW50IGVyciA9IDA7CisKKwljb25maWcgPSBpOTE1
X3BlcmZfZ2V0X29hX2NvbmZpZyhzdHJlYW0tPnBlcmYsIG1ldHJpY3Nfc2V0KTsKKwlpZiAoIWNv
bmZpZykKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAoY29uZmlnICE9IHN0cmVhbS0+b2FfY29u
ZmlnKSB7CisJCXN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZTsKKworCQkvKgorCQkgKiBJZiBPQSBp
cyBib3VuZCB0byBhIHNwZWNpZmljIGNvbnRleHQsIGVtaXQgdGhlCisJCSAqIHJlY29uZmlndXJh
dGlvbiBpbmxpbmUgZnJvbSB0aGF0IGNvbnRleHQuIFRoZSB1cGRhdGUKKwkJICogd2lsbCB0aGVu
IGJlIG9yZGVyZWQgd2l0aCByZXNwZWN0IHRvIHN1Ym1pc3Npb24gb24gdGhhdAorCQkgKiBjb250
ZXh0LgorCQkgKgorCQkgKiBXaGVuIHNldCBnbG9iYWxseSwgd2UgdXNlIGEgbG93IHByaW9yaXR5
IGtlcm5lbCBjb250ZXh0LAorCQkgKiBzbyBpdCB3aWxsIGVmZmVjdGl2ZWx5IHRha2UgZWZmZWN0
IHdoZW4gaWRsZS4KKwkJICovCisJCWNlID0gc3RyZWFtLT5waW5uZWRfY3R4ID86IHN0cmVhbS0+
ZW5naW5lLT5rZXJuZWxfY29udGV4dDsKKworCQllcnIgPSBlbWl0X29hX2NvbmZpZyhzdHJlYW0s
IGNlKTsKKwkJaWYgKGVyciA9PSAwKQorCQkJY29uZmlnID0geGNoZygmc3RyZWFtLT5vYV9jb25m
aWcsIGNvbmZpZyk7CisJfQorCisJaTkxNV9vYV9jb25maWdfcHV0KGNvbmZpZyk7CisKKwlyZXR1
cm4gZXJyOworfQorCiAvKioKICAqIGk5MTVfcGVyZl9pb2N0bCAtIHN1cHBvcnQgaW9jdGwoKSB1
c2FnZSB3aXRoIGk5MTUgcGVyZiBzdHJlYW0gRkRzCiAgKiBAc3RyZWFtOiBBbiBpOTE1IHBlcmYg
c3RyZWFtCkBAIC0yODgzLDYgKzI5MTcsOCBAQCBzdGF0aWMgbG9uZyBpOTE1X3BlcmZfaW9jdGxf
bG9ja2VkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCiAJY2FzZSBJOTE1X1BFUkZf
SU9DVExfRElTQUJMRToKIAkJaTkxNV9wZXJmX2Rpc2FibGVfbG9ja2VkKHN0cmVhbSk7CiAJCXJl
dHVybiAwOworCWNhc2UgSTkxNV9QRVJGX0lPQ1RMX0NPTkZJRzoKKwkJcmV0dXJuIGk5MTVfcGVy
Zl9jb25maWdfbG9ja2VkKHN0cmVhbSwgYXJnKTsKIAl9CiAKIAlyZXR1cm4gLUVJTlZBTDsKQEAg
LTQwMjAsNyArNDA1NiwxNSBAQCB2b2lkIGk5MTVfcGVyZl9maW5pKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1KQogICovCiBpbnQgaTkxNV9wZXJmX2lvY3RsX3ZlcnNpb24odm9pZCkKIHsK
LQlyZXR1cm4gMTsKKwkvKgorCSAqIDE6IEluaXRpYWwgdmVyc2lvbgorCSAqICAgSTkxNV9QRVJG
X0lPQ1RMX0VOQUJMRQorCSAqICAgSTkxNV9QRVJGX0lPQ1RMX0RJU0FCTEUKKwkgKgorCSAqIDI6
IEFkZGVkIHJ1bnRpbWUgbW9kaWZpY2F0aW9uIG9mIE9BIGNvbmZpZy4KKwkgKiAgIEk5MTVfUEVS
Rl9JT0NUTF9DT05GSUcKKwkgKi8KKwlyZXR1cm4gMjsKIH0KIAogI2lmIElTX0VOQUJMRUQoQ09O
RklHX0RSTV9JOTE1X1NFTEZURVNUKQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS91YXBpL2RybS9pOTE1
X2RybS5oIGIvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCmluZGV4IDBjN2IyODE1ZmJmMS4u
NWU2NmY3YzYwMjYxIDEwMDY0NAotLS0gYS9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgKKysr
IGIvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCkBAIC0xOTMyLDYgKzE5MzIsMTYgQEAgc3Ry
dWN0IGRybV9pOTE1X3BlcmZfb3Blbl9wYXJhbSB7CiAgKi8KICNkZWZpbmUgSTkxNV9QRVJGX0lP
Q1RMX0RJU0FCTEUJX0lPKCdpJywgMHgxKQogCisvKioKKyAqIENoYW5nZSBtZXRyaWNzX3NldCBj
YXB0dXJlZCBieSBhIHN0cmVhbS4KKyAqCisgKiBXaWxsIG5vdCB0YWtlIGVmZmVjdCB1bnRpbCB0
aGUgc3RyZWFtIGlzIHJlc3RhcnQsIG9yIHVwb24gdGhlIG5leHQKKyAqIGV4ZWNidWYgd2hlbiBh
dHRhY2hlZCB0byBhIHNwZWNpZmljIGNvbnRleHQuCisgKgorICogVGhpcyBpb2N0bCBpcyBhdmFp
bGFibGUgaW4gcGVyZiByZXZpc2lvbiAyLgorICovCisjZGVmaW5lIEk5MTVfUEVSRl9JT0NUTF9D
T05GSUcJX0lPKCdpJywgMHgyKQorCiAvKioKICAqIENvbW1vbiB0byBhbGwgaTkxNSBwZXJmIHJl
Y29yZHMKICAqLwotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVl
ZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9pbnRlbC1nZng=

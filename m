Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D1FC7CC142
	for <lists+intel-gfx@lfdr.de>; Fri,  4 Oct 2019 19:05:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A8CC66EBE6;
	Fri,  4 Oct 2019 17:05:03 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2D2A26E2F9
 for <intel-gfx@lists.freedesktop.org>; Fri,  4 Oct 2019 17:05:00 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 04 Oct 2019 10:04:57 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,256,1566889200"; d="scan'208";a="222215990"
Received: from bkokkula-mobl1.ger.corp.intel.com (HELO
 mwahaha-bdw.ger.corp.intel.com) ([10.252.7.77])
 by fmsmga002.fm.intel.com with ESMTP; 04 Oct 2019 10:04:55 -0700
From: Matthew Auld <matthew.auld@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  4 Oct 2019 18:04:33 +0100
Message-Id: <20191004170452.15410-3-matthew.auld@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191004170452.15410-1-matthew.auld@intel.com>
References: <20191004170452.15410-1-matthew.auld@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 02/21] drm/i915: introduce intel_memory_region
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U3VwcG9ydCBtZW1vcnkgcmVnaW9ucywgYXMgZGVmaW5lZCBieSBhIGdpdmVuIChzdGFydCwgZW5k
KSwgYW5kIGFsbG93CmNyZWF0aW5nIEdFTSBvYmplY3RzIHdoaWNoIGFyZSBiYWNrZWQgYnkgc2Fp
ZCByZWdpb24uIFRoZSBpbW1lZGlhdGUgZ29hbApoZXJlIGlzIHRvIGhhdmUgc29tZXRoaW5nIHRv
IHJlcHJlc2VudCBvdXIgZGV2aWNlIG1lbW9yeSwgYnV0IGxhdGVyIG9uCndlIGFsc28gd2FudCB0
byByZXByZXNlbnQgZXZlcnkgbWVtb3J5IGRvbWFpbiB3aXRoIGEgcmVnaW9uLCBzbyBzdG9sZW4s
CnNobWVtLCBhbmQgb2YgY291cnNlIGRldmljZS4gQXQgc29tZSBwb2ludCB3ZSBhcmUgcHJvYmFi
bHkgZ29pbmcgdG8gd2FudAp1c2UgYSBjb21tb24gc3RydWN0IGhlcmUsIHN1Y2ggdGhhdCB3ZSBh
cmUgYmV0dGVyIGFsaWduZWQgd2l0aCBzYXkgVFRNLgoKU2lnbmVkLW9mZi1ieTogTWF0dGhldyBB
dWxkIDxtYXR0aGV3LmF1bGRAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBBYmRpZWwgSmFudWxn
dWUgPGFiZGllbC5qYW51bGd1ZUBsaW51eC5pbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IE5pcmFu
amFuYSBWaXNod2FuYXRoYXB1cmEgPG5pcmFuamFuYS52aXNod2FuYXRoYXB1cmFAaW50ZWwuY29t
PgpDYzogSm9vbmFzIExhaHRpbmVuIDxqb29uYXMubGFodGluZW5AbGludXguaW50ZWwuY29tPgot
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlICAgICAgICAgICAgICAgICB8ICAgMiAr
CiAuLi4vZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfdHlwZXMuaCAgfCAgIDkgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5jICAgIHwgMTM0ICsrKysr
KysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5oICAgIHwg
IDI4ICsrKwogLi4uL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYyAgIHwg
IDc4ICsrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAgICAg
ICB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9tZW1vcnlfcmVnaW9uLmMgICAg
fCAxOTEgKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9tZW1v
cnlfcmVnaW9uLmggICAgfCAgODMgKysrKysrKysKIC4uLi9kcm0vaTkxNS9zZWxmdGVzdHMvaTkx
NV9tb2NrX3NlbGZ0ZXN0cy5oICB8ICAgMSArCiAuLi4vZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVs
X21lbW9yeV9yZWdpb24uYyAgfCAxMTUgKysrKysrKysrKysKIC4uLi9ncHUvZHJtL2k5MTUvc2Vs
ZnRlc3RzL21vY2tfZ2VtX2RldmljZS5jICB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9z
ZWxmdGVzdHMvbW9ja19yZWdpb24uYyAgfCAgNTkgKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9zZWxmdGVzdHMvbW9ja19yZWdpb24uaCAgfCAgMTYgKysKIDEzIGZpbGVzIGNoYW5nZWQsIDcx
OCBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX3JlZ2lvbi5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5oCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9n
cHUvZHJtL2k5MTUvaW50ZWxfbWVtb3J5X3JlZ2lvbi5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfbWVtb3J5X3JlZ2lvbi5oCiBjcmVhdGUgbW9kZSAxMDA2
NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX21lbW9yeV9yZWdpb24uYwog
Y3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX3Jl
Z2lvbi5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3Rz
L21vY2tfcmVnaW9uLmgKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmls
ZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCmluZGV4IDA2ZTE4NzZkMDI1MC4uNmYw
ODE3YmNjNjg4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQpAQCAtNTAsNiArNTAsNyBAQCBpOTE1LXkg
Kz0gaTkxNV9kcnYubyBcCiAJICBpOTE1X3V0aWxzLm8gXAogCSAgaW50ZWxfY3NyLm8gXAogCSAg
aW50ZWxfZGV2aWNlX2luZm8ubyBcCisJICBpbnRlbF9tZW1vcnlfcmVnaW9uLm8gXAogCSAgaW50
ZWxfcGNoLm8gXAogCSAgaW50ZWxfcG0ubyBcCiAJICBpbnRlbF9ydW50aW1lX3BtLm8gXApAQCAt
MTIwLDYgKzEyMSw3IEBAIGdlbS15ICs9IFwKIAlnZW0vaTkxNV9nZW1fcGFnZXMubyBcCiAJZ2Vt
L2k5MTVfZ2VtX3BoeXMubyBcCiAJZ2VtL2k5MTVfZ2VtX3BtLm8gXAorCWdlbS9pOTE1X2dlbV9y
ZWdpb24ubyBcCiAJZ2VtL2k5MTVfZ2VtX3NobWVtLm8gXAogCWdlbS9pOTE1X2dlbV9zaHJpbmtl
ci5vIFwKIAlnZW0vaTkxNV9nZW1fc3RvbGVuLm8gXApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oCmluZGV4IGMwMGI0ZjA3N2Y5ZS4uMTEzOTA1
ODZjZmUxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2Jq
ZWN0X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVj
dF90eXBlcy5oCkBAIC0xNjAsNiArMTYwLDE1IEBAIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
IHsKIAkJYXRvbWljX3QgcGFnZXNfcGluX2NvdW50OwogCQlhdG9taWNfdCBzaHJpbmtfcGluOwog
CisJCS8qKgorCQkgKiBNZW1vcnkgcmVnaW9uIGZvciB0aGlzIG9iamVjdC4KKwkJICovCisJCXN0
cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICpyZWdpb247CisJCS8qKgorCQkgKiBMaXN0IG9mIG1l
bW9yeSByZWdpb24gYmxvY2tzIGFsbG9jYXRlZCBmb3IgdGhpcyBvYmplY3QuCisJCSAqLworCQlz
dHJ1Y3QgbGlzdF9oZWFkIGJsb2NrczsKKwogCQlzdHJ1Y3Qgc2dfdGFibGUgKnBhZ2VzOwogCQl2
b2lkICptYXBwaW5nOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fcmVnaW9uLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcmVnaW9u
LmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi41ZmM2ZTQ1NDBmODIK
LS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcmVn
aW9uLmMKQEAgLTAsMCArMSwxMzQgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQK
Ky8qCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpbmNs
dWRlICJpbnRlbF9tZW1vcnlfcmVnaW9uLmgiCisjaW5jbHVkZSAiaTkxNV9nZW1fcmVnaW9uLmgi
CisjaW5jbHVkZSAiaTkxNV9kcnYuaCIKKwordm9pZAoraTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdl
c19idWRkeShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAorCQkJCXN0cnVjdCBzZ190
YWJsZSAqcGFnZXMpCit7CisJX19pbnRlbF9tZW1vcnlfcmVnaW9uX3B1dF9wYWdlc19idWRkeShv
YmotPm1tLnJlZ2lvbiwgJm9iai0+bW0uYmxvY2tzKTsKKworCW9iai0+bW0uZGlydHkgPSBmYWxz
ZTsKKwlzZ19mcmVlX3RhYmxlKHBhZ2VzKTsKKwlrZnJlZShwYWdlcyk7Cit9CisKK2ludAoraTkx
NV9nZW1fb2JqZWN0X2dldF9wYWdlc19idWRkeShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAq
b2JqKQoreworCXN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICptZW0gPSBvYmotPm1tLnJlZ2lv
bjsKKwlzdHJ1Y3QgbGlzdF9oZWFkICpibG9ja3MgPSAmb2JqLT5tbS5ibG9ja3M7CisJdW5zaWdu
ZWQgaW50IGZsYWdzID0gSTkxNV9BTExPQ19NSU5fUEFHRV9TSVpFOworCXJlc291cmNlX3NpemVf
dCBzaXplID0gb2JqLT5iYXNlLnNpemU7CisJcmVzb3VyY2Vfc2l6ZV90IHByZXZfZW5kOworCXN0
cnVjdCBpOTE1X2J1ZGR5X2Jsb2NrICpibG9jazsKKwlzdHJ1Y3Qgc2dfdGFibGUgKnN0OworCXN0
cnVjdCBzY2F0dGVybGlzdCAqc2c7CisJdW5zaWduZWQgaW50IHNnX3BhZ2Vfc2l6ZXM7CisJdW5z
aWduZWQgbG9uZyBpOworCWludCByZXQ7CisKKwlzdCA9IGttYWxsb2Moc2l6ZW9mKCpzdCksIEdG
UF9LRVJORUwpOworCWlmICghc3QpCisJCXJldHVybiAtRU5PTUVNOworCisJaWYgKHNnX2FsbG9j
X3RhYmxlKHN0LCBzaXplID4+IGlsb2cyKG1lbS0+bW0uY2h1bmtfc2l6ZSksIEdGUF9LRVJORUwp
KSB7CisJCWtmcmVlKHN0KTsKKwkJcmV0dXJuIC1FTk9NRU07CisJfQorCisJcmV0ID0gX19pbnRl
bF9tZW1vcnlfcmVnaW9uX2dldF9wYWdlc19idWRkeShtZW0sIHNpemUsIGZsYWdzLCBibG9ja3Mp
OworCWlmIChyZXQpCisJCWdvdG8gZXJyX2ZyZWVfc2c7CisKKwlHRU1fQlVHX09OKGxpc3RfZW1w
dHkoYmxvY2tzKSk7CisKKwlzZyA9IHN0LT5zZ2w7CisJc3QtPm5lbnRzID0gMDsKKwlzZ19wYWdl
X3NpemVzID0gMDsKKwlpID0gMDsKKworCWxpc3RfZm9yX2VhY2hfZW50cnkoYmxvY2ssIGJsb2Nr
cywgbGluaykgeworCQl1NjQgYmxvY2tfc2l6ZSwgb2Zmc2V0OworCisJCWJsb2NrX3NpemUgPSBp
OTE1X2J1ZGR5X2Jsb2NrX3NpemUoJm1lbS0+bW0sIGJsb2NrKTsKKwkJb2Zmc2V0ID0gaTkxNV9i
dWRkeV9ibG9ja19vZmZzZXQoYmxvY2spOworCisJCUdFTV9CVUdfT04ob3ZlcmZsb3dzX3R5cGUo
YmxvY2tfc2l6ZSwgc2ctPmxlbmd0aCkpOworCisJCWlmICghaSB8fCBvZmZzZXQgIT0gcHJldl9l
bmQgfHwKKwkJICAgIGFkZF9vdmVyZmxvd3NfdCh0eXBlb2Yoc2ctPmxlbmd0aCksIHNnLT5sZW5n
dGgsIGJsb2NrX3NpemUpKSB7CisJCQlpZiAoaSkgeworCQkJCXNnX3BhZ2Vfc2l6ZXMgfD0gc2ct
Pmxlbmd0aDsKKwkJCQlzZyA9IF9fc2dfbmV4dChzZyk7CisJCQl9CisKKwkJCXNnX2RtYV9hZGRy
ZXNzKHNnKSA9IG1lbS0+cmVnaW9uLnN0YXJ0ICsgb2Zmc2V0OworCQkJc2dfZG1hX2xlbihzZykg
PSBibG9ja19zaXplOworCisJCQlzZy0+bGVuZ3RoID0gYmxvY2tfc2l6ZTsKKworCQkJc3QtPm5l
bnRzKys7CisJCX0gZWxzZSB7CisJCQlzZy0+bGVuZ3RoICs9IGJsb2NrX3NpemU7CisJCQlzZ19k
bWFfbGVuKHNnKSArPSBibG9ja19zaXplOworCQl9CisKKwkJcHJldl9lbmQgPSBvZmZzZXQgKyBi
bG9ja19zaXplOworCQlpKys7CisJfTsKKworCXNnX3BhZ2Vfc2l6ZXMgfD0gc2ctPmxlbmd0aDsK
KwlzZ19tYXJrX2VuZChzZyk7CisJaTkxNV9zZ190cmltKHN0KTsKKworCV9faTkxNV9nZW1fb2Jq
ZWN0X3NldF9wYWdlcyhvYmosIHN0LCBzZ19wYWdlX3NpemVzKTsKKworCXJldHVybiAwOworCitl
cnJfZnJlZV9zZzoKKwlzZ19mcmVlX3RhYmxlKHN0KTsKKwlrZnJlZShzdCk7CisJcmV0dXJuIHJl
dDsKK30KKwordm9pZCBpOTE1X2dlbV9vYmplY3RfaW5pdF9tZW1vcnlfcmVnaW9uKHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCisJCQkJCXN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9u
ICptZW0pCit7CisJSU5JVF9MSVNUX0hFQUQoJm9iai0+bW0uYmxvY2tzKTsKKwlvYmotPm1tLnJl
Z2lvbiA9IGludGVsX21lbW9yeV9yZWdpb25fZ2V0KG1lbSk7Cit9CisKK3ZvaWQgaTkxNV9nZW1f
b2JqZWN0X3JlbGVhc2VfbWVtb3J5X3JlZ2lvbihzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAq
b2JqKQoreworCWludGVsX21lbW9yeV9yZWdpb25fcHV0KG9iai0+bW0ucmVnaW9uKTsKK30KKwor
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKgoraTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9yZWdp
b24oc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbSwKKwkJCSAgICAgIHJlc291cmNlX3Np
emVfdCBzaXplLAorCQkJICAgICAgdW5zaWduZWQgaW50IGZsYWdzKQoreworCXN0cnVjdCBkcm1f
aTkxNV9nZW1fb2JqZWN0ICpvYmo7CisKKwlpZiAoIW1lbSkKKwkJcmV0dXJuIEVSUl9QVFIoLUVO
T0RFVik7CisKKwlzaXplID0gcm91bmRfdXAoc2l6ZSwgbWVtLT5taW5fcGFnZV9zaXplKTsKKwor
CUdFTV9CVUdfT04oIXNpemUpOworCUdFTV9CVUdfT04oIUlTX0FMSUdORUQoc2l6ZSwgSTkxNV9H
VFRfTUlOX0FMSUdOTUVOVCkpOworCisJaWYgKHNpemUgPj4gUEFHRV9TSElGVCA+IElOVF9NQVgp
CisJCXJldHVybiBFUlJfUFRSKC1FMkJJRyk7CisKKwlpZiAob3ZlcmZsb3dzX3R5cGUoc2l6ZSwg
b2JqLT5iYXNlLnNpemUpKQorCQlyZXR1cm4gRVJSX1BUUigtRTJCSUcpOworCisJcmV0dXJuIG1l
bS0+b3BzLT5jcmVhdGVfb2JqZWN0KG1lbSwgc2l6ZSwgZmxhZ3MpOworfQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5oIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAwMDAwMC4uZWJkZGM4NmQ3OGY3Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5oCkBAIC0wLDAgKzEsMjggQEAKKy8qIFNQ
RFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQgKi8KKy8qCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJ
bnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpZm5kZWYgX19JOTE1X0dFTV9SRUdJT05fSF9fCisj
ZGVmaW5lIF9fSTkxNV9HRU1fUkVHSU9OX0hfXworCisjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4K
Kworc3RydWN0IGludGVsX21lbW9yeV9yZWdpb247CitzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dDsKK3N0cnVjdCBzZ190YWJsZTsKKworaW50IGk5MTVfZ2VtX29iamVjdF9nZXRfcGFnZXNfYnVk
ZHkoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7Cit2b2lkIGk5MTVfZ2VtX29iamVj
dF9wdXRfcGFnZXNfYnVkZHkoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKKwkJCQkg
ICAgIHN0cnVjdCBzZ190YWJsZSAqcGFnZXMpOworCit2b2lkIGk5MTVfZ2VtX29iamVjdF9pbml0
X21lbW9yeV9yZWdpb24oc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKKwkJCQkJc3Ry
dWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbSk7Cit2b2lkIGk5MTVfZ2VtX29iamVjdF9yZWxl
YXNlX21lbW9yeV9yZWdpb24oc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7CisKK3N0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICoKK2k5MTVfZ2VtX29iamVjdF9jcmVhdGVfcmVnaW9u
KHN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICptZW0sCisJCQkgICAgICByZXNvdXJjZV9zaXpl
X3Qgc2l6ZSwKKwkJCSAgICAgIHVuc2lnbmVkIGludCBmbGFncyk7CisKKyNlbmRpZgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYwppbmRleCBlNDJh
YmRkZDRhMzYuLmI0YzM5MGU5ZmE1MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMKQEAgLTgsNiArOCw3IEBACiAKICNpbmNsdWRlICJpOTE1
X3NlbGZ0ZXN0LmgiCiAKKyNpbmNsdWRlICJnZW0vaTkxNV9nZW1fcmVnaW9uLmgiCiAjaW5jbHVk
ZSAiZ2VtL2k5MTVfZ2VtX3BtLmgiCiAKICNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgpAQCAtMTcs
NiArMTgsNyBAQAogCiAjaW5jbHVkZSAic2VsZnRlc3RzL21vY2tfZHJtLmgiCiAjaW5jbHVkZSAi
c2VsZnRlc3RzL21vY2tfZ2VtX2RldmljZS5oIgorI2luY2x1ZGUgInNlbGZ0ZXN0cy9tb2NrX3Jl
Z2lvbi5oIgogI2luY2x1ZGUgInNlbGZ0ZXN0cy9pOTE1X3JhbmRvbS5oIgogCiBzdGF0aWMgY29u
c3QgdW5zaWduZWQgaW50IHBhZ2Vfc2l6ZXNbXSA9IHsKQEAgLTQ1Miw2ICs0NTQsODEgQEAgc3Rh
dGljIGludCBpZ3RfbW9ja19leGhhdXN0X2RldmljZV9zdXBwb3J0ZWRfcGFnZXModm9pZCAqYXJn
KQogCXJldHVybiBlcnI7CiB9CiAKK3N0YXRpYyBpbnQgaWd0X21vY2tfbWVtb3J5X3JlZ2lvbl9o
dWdlX3BhZ2VzKHZvaWQgKmFyZykKK3sKKwlzdHJ1Y3QgaTkxNV9wcGd0dCAqcHBndHQgPSBhcmc7
CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBwcGd0dC0+dm0uaTkxNTsKKwl1bnNp
Z25lZCBsb25nIHN1cHBvcnRlZCA9IElOVEVMX0lORk8oaTkxNSktPnBhZ2Vfc2l6ZXM7CisJc3Ry
dWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbTsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqOworCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOworCWludCBiaXQ7CisJaW50IGVyciA9IDA7
CisKKwltZW0gPSBtb2NrX3JlZ2lvbl9jcmVhdGUoaTkxNSwgMCwgU1pfMkcsIEk5MTVfR1RUX1BB
R0VfU0laRV80SywgMCk7CisJaWYgKElTX0VSUihtZW0pKSB7CisJCXByX2VycigiJXMgZmFpbGVk
IHRvIGNyZWF0ZSBtZW1vcnkgcmVnaW9uXG4iLCBfX2Z1bmNfXyk7CisJCXJldHVybiBQVFJfRVJS
KG1lbSk7CisJfQorCisJZm9yX2VhY2hfc2V0X2JpdChiaXQsICZzdXBwb3J0ZWQsIGlsb2cyKEk5
MTVfR1RUX01BWF9QQUdFX1NJWkUpICsgMSkgeworCQl1bnNpZ25lZCBpbnQgcGFnZV9zaXplID0g
QklUKGJpdCk7CisJCXJlc291cmNlX3NpemVfdCBwaHlzOworCisJCW9iaiA9IGk5MTVfZ2VtX29i
amVjdF9jcmVhdGVfcmVnaW9uKG1lbSwgcGFnZV9zaXplLCAwKTsKKwkJaWYgKElTX0VSUihvYmop
KSB7CisJCQllcnIgPSBQVFJfRVJSKG9iaik7CisJCQlnb3RvIG91dF9yZWdpb247CisJCX0KKwor
CQl2bWEgPSBpOTE1X3ZtYV9pbnN0YW5jZShvYmosICZwcGd0dC0+dm0sIE5VTEwpOworCQlpZiAo
SVNfRVJSKHZtYSkpIHsKKwkJCWVyciA9IFBUUl9FUlIodm1hKTsKKwkJCWdvdG8gb3V0X3B1dDsK
KwkJfQorCisJCWVyciA9IGk5MTVfdm1hX3Bpbih2bWEsIDAsIDAsIFBJTl9VU0VSKTsKKwkJaWYg
KGVycikKKwkJCWdvdG8gb3V0X2Nsb3NlOworCisJCWVyciA9IGlndF9jaGVja19wYWdlX3NpemVz
KHZtYSk7CisJCWlmIChlcnIpCisJCQlnb3RvIG91dF91bnBpbjsKKworCQlwaHlzID0gaTkxNV9n
ZW1fb2JqZWN0X2dldF9kbWFfYWRkcmVzcyhvYmosIDApOworCQlpZiAoIUlTX0FMSUdORUQocGh5
cywgcGFnZV9zaXplKSkgeworCQkJcHJfZXJyKCIlcyBhZGRyIG1pc2FsaWduZWQoJXBhKSBwYWdl
X3NpemU9JXVcbiIsCisJCQkgICAgICAgX19mdW5jX18sICZwaHlzLCBwYWdlX3NpemUpOworCQkJ
ZXJyID0gLUVJTlZBTDsKKwkJCWdvdG8gb3V0X3VucGluOworCQl9CisKKwkJaWYgKHZtYS0+cGFn
ZV9zaXplcy5ndHQgIT0gcGFnZV9zaXplKSB7CisJCQlwcl9lcnIoIiVzIHBhZ2Vfc2l6ZXMuZ3R0
PSV1LCBleHBlY3RlZD0ldVxuIiwKKwkJCSAgICAgICBfX2Z1bmNfXywgdm1hLT5wYWdlX3NpemVz
Lmd0dCwgcGFnZV9zaXplKTsKKwkJCWVyciA9IC1FSU5WQUw7CisJCQlnb3RvIG91dF91bnBpbjsK
KwkJfQorCisJCWk5MTVfdm1hX3VucGluKHZtYSk7CisJCWk5MTVfdm1hX2Nsb3NlKHZtYSk7CisK
KwkJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOworCX0KKworCWdvdG8gb3V0X3JlZ2lvbjsKKwor
b3V0X3VucGluOgorCWk5MTVfdm1hX3VucGluKHZtYSk7CitvdXRfY2xvc2U6CisJaTkxNV92bWFf
Y2xvc2Uodm1hKTsKK291dF9wdXQ6CisJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOworb3V0X3Jl
Z2lvbjoKKwlpbnRlbF9tZW1vcnlfcmVnaW9uX3B1dChtZW0pOworCXJldHVybiBlcnI7Cit9CisK
IHN0YXRpYyBpbnQgaWd0X21vY2tfcHBndHRfbWlzYWxpZ25lZF9kbWEodm9pZCAqYXJnKQogewog
CXN0cnVjdCBpOTE1X3BwZ3R0ICpwcGd0dCA9IGFyZzsKQEAgLTE2MjMsNiArMTcwMCw3IEBAIGlu
dCBpOTE1X2dlbV9odWdlX3BhZ2VfbW9ja19zZWxmdGVzdHModm9pZCkKIHsKIAlzdGF0aWMgY29u
c3Qgc3RydWN0IGk5MTVfc3VidGVzdCB0ZXN0c1tdID0gewogCQlTVUJURVNUKGlndF9tb2NrX2V4
aGF1c3RfZGV2aWNlX3N1cHBvcnRlZF9wYWdlcyksCisJCVNVQlRFU1QoaWd0X21vY2tfbWVtb3J5
X3JlZ2lvbl9odWdlX3BhZ2VzKSwKIAkJU1VCVEVTVChpZ3RfbW9ja19wcGd0dF9taXNhbGlnbmVk
X2RtYSksCiAJCVNVQlRFU1QoaWd0X21vY2tfcHBndHRfaHVnZV9maWxsKSwKIAkJU1VCVEVTVChp
Z3RfbW9ja19wcGd0dF82NEspLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5kZXggY2RlNGM3ZmI1
NTcwLi5kY2JjNmU2Mzk0ZmMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaApAQCAtODUsNiArODUs
NyBAQAogI2luY2x1ZGUgImludGVsX2RldmljZV9pbmZvLmgiCiAjaW5jbHVkZSAiaW50ZWxfcGNo
LmgiCiAjaW5jbHVkZSAiaW50ZWxfcnVudGltZV9wbS5oIgorI2luY2x1ZGUgImludGVsX21lbW9y
eV9yZWdpb24uaCIKICNpbmNsdWRlICJpbnRlbF91bmNvcmUuaCIKICNpbmNsdWRlICJpbnRlbF93
YWtlcmVmLmgiCiAjaW5jbHVkZSAiaW50ZWxfd29wY20uaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX21lbW9yeV9yZWdpb24uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2ludGVsX21lbW9yeV9yZWdpb24uYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAw
MDAwMDAuLjJlZjY3YzM5N2ZjYQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2ludGVsX21lbW9yeV9yZWdpb24uYwpAQCAtMCwwICsxLDE5MSBAQAorLy8gU1BEWC1MaWNl
bnNlLUlkZW50aWZpZXI6IE1JVAorLyoKKyAqIENvcHlyaWdodCDCqSAyMDE5IEludGVsIENvcnBv
cmF0aW9uCisgKi8KKworI2luY2x1ZGUgImludGVsX21lbW9yeV9yZWdpb24uaCIKKyNpbmNsdWRl
ICJpOTE1X2Rydi5oIgorCitzdGF0aWMgdTY0CitpbnRlbF9tZW1vcnlfcmVnaW9uX2ZyZWVfcGFn
ZXMoc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbSwKKwkJCSAgICAgICBzdHJ1Y3QgbGlz
dF9oZWFkICpibG9ja3MpCit7CisJc3RydWN0IGk5MTVfYnVkZHlfYmxvY2sgKmJsb2NrLCAqb247
CisJdTY0IHNpemUgPSAwOworCisJbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKGJsb2NrLCBvbiwg
YmxvY2tzLCBsaW5rKSB7CisJCXNpemUgKz0gaTkxNV9idWRkeV9ibG9ja19zaXplKCZtZW0tPm1t
LCBibG9jayk7CisJCWk5MTVfYnVkZHlfZnJlZSgmbWVtLT5tbSwgYmxvY2spOworCX0KKwlJTklU
X0xJU1RfSEVBRChibG9ja3MpOworCisJcmV0dXJuIHNpemU7Cit9CisKK3ZvaWQKK19faW50ZWxf
bWVtb3J5X3JlZ2lvbl9wdXRfcGFnZXNfYnVkZHkoc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24g
Km1lbSwKKwkJCQkgICAgICBzdHJ1Y3QgbGlzdF9oZWFkICpibG9ja3MpCit7CisJbXV0ZXhfbG9j
aygmbWVtLT5tbV9sb2NrKTsKKwlpbnRlbF9tZW1vcnlfcmVnaW9uX2ZyZWVfcGFnZXMobWVtLCBi
bG9ja3MpOworCW11dGV4X3VubG9jaygmbWVtLT5tbV9sb2NrKTsKK30KKwordm9pZAorX19pbnRl
bF9tZW1vcnlfcmVnaW9uX3B1dF9ibG9ja19idWRkeShzdHJ1Y3QgaTkxNV9idWRkeV9ibG9jayAq
YmxvY2spCit7CisJc3RydWN0IGxpc3RfaGVhZCBibG9ja3M7CisKKwlJTklUX0xJU1RfSEVBRCgm
YmxvY2tzKTsKKwlsaXN0X2FkZCgmYmxvY2stPmxpbmssICZibG9ja3MpOworCV9faW50ZWxfbWVt
b3J5X3JlZ2lvbl9wdXRfcGFnZXNfYnVkZHkoYmxvY2stPnByaXZhdGUsICZibG9ja3MpOworfQor
CitpbnQKK19faW50ZWxfbWVtb3J5X3JlZ2lvbl9nZXRfcGFnZXNfYnVkZHkoc3RydWN0IGludGVs
X21lbW9yeV9yZWdpb24gKm1lbSwKKwkJCQkgICAgICByZXNvdXJjZV9zaXplX3Qgc2l6ZSwKKwkJ
CQkgICAgICB1bnNpZ25lZCBpbnQgZmxhZ3MsCisJCQkJICAgICAgc3RydWN0IGxpc3RfaGVhZCAq
YmxvY2tzKQoreworCXVuc2lnbmVkIGxvbmcgbl9wYWdlcyA9IHNpemUgPj4gaWxvZzIobWVtLT5t
bS5jaHVua19zaXplKTsKKwl1bnNpZ25lZCBpbnQgbWluX29yZGVyID0gMDsKKworCUdFTV9CVUdf
T04oIUlTX0FMSUdORUQoc2l6ZSwgbWVtLT5tbS5jaHVua19zaXplKSk7CisJR0VNX0JVR19PTigh
bGlzdF9lbXB0eShibG9ja3MpKTsKKworCWlmIChmbGFncyAmIEk5MTVfQUxMT0NfTUlOX1BBR0Vf
U0laRSkgeworCQltaW5fb3JkZXIgPSBpbG9nMihtZW0tPm1pbl9wYWdlX3NpemUpIC0KKwkJCSAg
ICBpbG9nMihtZW0tPm1tLmNodW5rX3NpemUpOworCX0KKworCW11dGV4X2xvY2soJm1lbS0+bW1f
bG9jayk7CisKKwlkbyB7CisJCXN0cnVjdCBpOTE1X2J1ZGR5X2Jsb2NrICpibG9jazsKKwkJdW5z
aWduZWQgaW50IG9yZGVyOworCisJCW9yZGVyID0gZmxzKG5fcGFnZXMpIC0gMTsKKwkJR0VNX0JV
R19PTihvcmRlciA+IG1lbS0+bW0ubWF4X29yZGVyKTsKKwkJR0VNX0JVR19PTihvcmRlciA8IG1p
bl9vcmRlcik7CisKKwkJZG8geworCQkJYmxvY2sgPSBpOTE1X2J1ZGR5X2FsbG9jKCZtZW0tPm1t
LCBvcmRlcik7CisJCQlpZiAoIUlTX0VSUihibG9jaykpCisJCQkJYnJlYWs7CisKKwkJCWlmIChv
cmRlci0tID09IG1pbl9vcmRlcikKKwkJCQlnb3RvIGVycl9mcmVlX2Jsb2NrczsKKwkJfSB3aGls
ZSAoMSk7CisKKwkJbl9wYWdlcyAtPSBCSVQob3JkZXIpOworCisJCWJsb2NrLT5wcml2YXRlID0g
bWVtOworCQlsaXN0X2FkZCgmYmxvY2stPmxpbmssIGJsb2Nrcyk7CisKKwkJaWYgKCFuX3BhZ2Vz
KQorCQkJYnJlYWs7CisJfSB3aGlsZSAoMSk7CisKKwltdXRleF91bmxvY2soJm1lbS0+bW1fbG9j
ayk7CisJcmV0dXJuIDA7CisKK2Vycl9mcmVlX2Jsb2NrczoKKwlpbnRlbF9tZW1vcnlfcmVnaW9u
X2ZyZWVfcGFnZXMobWVtLCBibG9ja3MpOworCW11dGV4X3VubG9jaygmbWVtLT5tbV9sb2NrKTsK
KwlyZXR1cm4gLUVOWElPOworfQorCitzdHJ1Y3QgaTkxNV9idWRkeV9ibG9jayAqCitfX2ludGVs
X21lbW9yeV9yZWdpb25fZ2V0X2Jsb2NrX2J1ZGR5KHN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9u
ICptZW0sCisJCQkJICAgICAgcmVzb3VyY2Vfc2l6ZV90IHNpemUsCisJCQkJICAgICAgdW5zaWdu
ZWQgaW50IGZsYWdzKQoreworCXN0cnVjdCBpOTE1X2J1ZGR5X2Jsb2NrICpibG9jazsKKwlMSVNU
X0hFQUQoYmxvY2tzKTsKKwlpbnQgcmV0OworCisJcmV0ID0gX19pbnRlbF9tZW1vcnlfcmVnaW9u
X2dldF9wYWdlc19idWRkeShtZW0sIHNpemUsIGZsYWdzLCAmYmxvY2tzKTsKKwlpZiAocmV0KQor
CQlyZXR1cm4gRVJSX1BUUihyZXQpOworCisJYmxvY2sgPSBsaXN0X2ZpcnN0X2VudHJ5KCZibG9j
a3MsIHR5cGVvZigqYmxvY2spLCBsaW5rKTsKKwlsaXN0X2RlbF9pbml0KCZibG9jay0+bGluayk7
CisJcmV0dXJuIGJsb2NrOworfQorCitpbnQgaW50ZWxfbWVtb3J5X3JlZ2lvbl9pbml0X2J1ZGR5
KHN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICptZW0pCit7CisJcmV0dXJuIGk5MTVfYnVkZHlf
aW5pdCgmbWVtLT5tbSwgcmVzb3VyY2Vfc2l6ZSgmbWVtLT5yZWdpb24pLAorCQkJICAgICAgIFBB
R0VfU0laRSk7Cit9CisKK3ZvaWQgaW50ZWxfbWVtb3J5X3JlZ2lvbl9yZWxlYXNlX2J1ZGR5KHN0
cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICptZW0pCit7CisJaTkxNV9idWRkeV9maW5pKCZtZW0t
Pm1tKTsKK30KKworc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKgoraW50ZWxfbWVtb3J5X3Jl
Z2lvbl9jcmVhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCisJCQkgICByZXNvdXJj
ZV9zaXplX3Qgc3RhcnQsCisJCQkgICByZXNvdXJjZV9zaXplX3Qgc2l6ZSwKKwkJCSAgIHJlc291
cmNlX3NpemVfdCBtaW5fcGFnZV9zaXplLAorCQkJICAgcmVzb3VyY2Vfc2l6ZV90IGlvX3N0YXJ0
LAorCQkJICAgY29uc3Qgc3RydWN0IGludGVsX21lbW9yeV9yZWdpb25fb3BzICpvcHMpCit7CisJ
c3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbTsKKwlpbnQgZXJyOworCisJbWVtID0ga3ph
bGxvYyhzaXplb2YoKm1lbSksIEdGUF9LRVJORUwpOworCWlmICghbWVtKQorCQlyZXR1cm4gRVJS
X1BUUigtRU5PTUVNKTsKKworCW1lbS0+aTkxNSA9IGk5MTU7CisJbWVtLT5yZWdpb24gPSAoc3Ry
dWN0IHJlc291cmNlKURFRklORV9SRVNfTUVNKHN0YXJ0LCBzaXplKTsKKwltZW0tPmlvX3N0YXJ0
ID0gaW9fc3RhcnQ7CisJbWVtLT5taW5fcGFnZV9zaXplID0gbWluX3BhZ2Vfc2l6ZTsKKwltZW0t
Pm9wcyA9IG9wczsKKworCW11dGV4X2luaXQoJm1lbS0+bW1fbG9jayk7CisKKwlpZiAob3BzLT5p
bml0KSB7CisJCWVyciA9IG9wcy0+aW5pdChtZW0pOworCQlpZiAoZXJyKQorCQkJZ290byBlcnJf
ZnJlZTsKKwl9CisKKwlrcmVmX2luaXQoJm1lbS0+a3JlZik7CisJcmV0dXJuIG1lbTsKKworZXJy
X2ZyZWU6CisJa2ZyZWUobWVtKTsKKwlyZXR1cm4gRVJSX1BUUihlcnIpOworfQorCitzdGF0aWMg
dm9pZCBfX2ludGVsX21lbW9yeV9yZWdpb25fZGVzdHJveShzdHJ1Y3Qga3JlZiAqa3JlZikKK3sK
KwlzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbiAqbWVtID0KKwkJY29udGFpbmVyX29mKGtyZWYs
IHR5cGVvZigqbWVtKSwga3JlZik7CisKKwlpZiAobWVtLT5vcHMtPnJlbGVhc2UpCisJCW1lbS0+
b3BzLT5yZWxlYXNlKG1lbSk7CisKKwltdXRleF9kZXN0cm95KCZtZW0tPm1tX2xvY2spOworCWtm
cmVlKG1lbSk7Cit9CisKK3N0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICoKK2ludGVsX21lbW9y
eV9yZWdpb25fZ2V0KHN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICptZW0pCit7CisJa3JlZl9n
ZXQoJm1lbS0+a3JlZik7CisJcmV0dXJuIG1lbTsKK30KKwordm9pZCBpbnRlbF9tZW1vcnlfcmVn
aW9uX3B1dChzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbiAqbWVtKQoreworCWtyZWZfcHV0KCZt
ZW0tPmtyZWYsIF9faW50ZWxfbWVtb3J5X3JlZ2lvbl9kZXN0cm95KTsKK30KKworI2lmIElTX0VO
QUJMRUQoQ09ORklHX0RSTV9JOTE1X1NFTEZURVNUKQorI2luY2x1ZGUgInNlbGZ0ZXN0cy9pbnRl
bF9tZW1vcnlfcmVnaW9uLmMiCisjaW5jbHVkZSAic2VsZnRlc3RzL21vY2tfcmVnaW9uLmMiCisj
ZW5kaWYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX21lbW9yeV9yZWdp
b24uaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX21lbW9yeV9yZWdpb24uaApuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjJlYTE3ZDZjMzFlZAotLS0gL2Rldi9u
dWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX21lbW9yeV9yZWdpb24uaApAQCAt
MCwwICsxLDgzIEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUICovCisvKgorICog
Q29weXJpZ2h0IMKpIDIwMTkgSW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaWZuZGVmIF9fSU5U
RUxfTUVNT1JZX1JFR0lPTl9IX18KKyNkZWZpbmUgX19JTlRFTF9NRU1PUllfUkVHSU9OX0hfXwor
CisjaW5jbHVkZSA8bGludXgva3JlZi5oPgorI2luY2x1ZGUgPGxpbnV4L2lvcG9ydC5oPgorI2lu
Y2x1ZGUgPGxpbnV4L211dGV4Lmg+CisjaW5jbHVkZSA8bGludXgvaW8tbWFwcGluZy5oPgorCisj
aW5jbHVkZSAiaTkxNV9idWRkeS5oIgorCitzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZTsKK3N0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0Oworc3RydWN0IGludGVsX21lbW9yeV9yZWdpb247CitzdHJ1
Y3Qgc2dfdGFibGU7CisKKyNkZWZpbmUgSTkxNV9BTExPQ19NSU5fUEFHRV9TSVpFICAgQklUKDAp
CisKK3N0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uX29wcyB7CisJdW5zaWduZWQgaW50IGZsYWdz
OworCisJaW50ICgqaW5pdCkoc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbSk7CisJdm9p
ZCAoKnJlbGVhc2UpKHN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICptZW0pOworCisJc3RydWN0
IGRybV9pOTE1X2dlbV9vYmplY3QgKgorCSgqY3JlYXRlX29iamVjdCkoc3RydWN0IGludGVsX21l
bW9yeV9yZWdpb24gKm1lbSwKKwkJCSByZXNvdXJjZV9zaXplX3Qgc2l6ZSwKKwkJCSB1bnNpZ25l
ZCBpbnQgZmxhZ3MpOworfTsKKworc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24geworCXN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1OworCisJY29uc3Qgc3RydWN0IGludGVsX21lbW9yeV9y
ZWdpb25fb3BzICpvcHM7CisKKwlzdHJ1Y3QgaW9fbWFwcGluZyBpb21hcDsKKwlzdHJ1Y3QgcmVz
b3VyY2UgcmVnaW9uOworCisJc3RydWN0IGk5MTVfYnVkZHlfbW0gbW07CisJc3RydWN0IG11dGV4
IG1tX2xvY2s7CisKKwlzdHJ1Y3Qga3JlZiBrcmVmOworCisJcmVzb3VyY2Vfc2l6ZV90IGlvX3N0
YXJ0OworCXJlc291cmNlX3NpemVfdCBtaW5fcGFnZV9zaXplOworCisJdW5zaWduZWQgaW50IHR5
cGU7CisJdW5zaWduZWQgaW50IGluc3RhbmNlOworCXVuc2lnbmVkIGludCBpZDsKK307CisKK2lu
dCBpbnRlbF9tZW1vcnlfcmVnaW9uX2luaXRfYnVkZHkoc3RydWN0IGludGVsX21lbW9yeV9yZWdp
b24gKm1lbSk7Cit2b2lkIGludGVsX21lbW9yeV9yZWdpb25fcmVsZWFzZV9idWRkeShzdHJ1Y3Qg
aW50ZWxfbWVtb3J5X3JlZ2lvbiAqbWVtKTsKKworaW50IF9faW50ZWxfbWVtb3J5X3JlZ2lvbl9n
ZXRfcGFnZXNfYnVkZHkoc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbSwKKwkJCQkJICBy
ZXNvdXJjZV9zaXplX3Qgc2l6ZSwKKwkJCQkJICB1bnNpZ25lZCBpbnQgZmxhZ3MsCisJCQkJCSAg
c3RydWN0IGxpc3RfaGVhZCAqYmxvY2tzKTsKK3N0cnVjdCBpOTE1X2J1ZGR5X2Jsb2NrICoKK19f
aW50ZWxfbWVtb3J5X3JlZ2lvbl9nZXRfYmxvY2tfYnVkZHkoc3RydWN0IGludGVsX21lbW9yeV9y
ZWdpb24gKm1lbSwKKwkJCQkgICAgICByZXNvdXJjZV9zaXplX3Qgc2l6ZSwKKwkJCQkgICAgICB1
bnNpZ25lZCBpbnQgZmxhZ3MpOwordm9pZCBfX2ludGVsX21lbW9yeV9yZWdpb25fcHV0X3BhZ2Vz
X2J1ZGR5KHN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICptZW0sCisJCQkJCSAgIHN0cnVjdCBs
aXN0X2hlYWQgKmJsb2Nrcyk7Cit2b2lkIF9faW50ZWxfbWVtb3J5X3JlZ2lvbl9wdXRfYmxvY2tf
YnVkZHkoc3RydWN0IGk5MTVfYnVkZHlfYmxvY2sgKmJsb2NrKTsKKworc3RydWN0IGludGVsX21l
bW9yeV9yZWdpb24gKgoraW50ZWxfbWVtb3J5X3JlZ2lvbl9jcmVhdGUoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUsCisJCQkgICByZXNvdXJjZV9zaXplX3Qgc3RhcnQsCisJCQkgICByZXNv
dXJjZV9zaXplX3Qgc2l6ZSwKKwkJCSAgIHJlc291cmNlX3NpemVfdCBtaW5fcGFnZV9zaXplLAor
CQkJICAgcmVzb3VyY2Vfc2l6ZV90IGlvX3N0YXJ0LAorCQkJICAgY29uc3Qgc3RydWN0IGludGVs
X21lbW9yeV9yZWdpb25fb3BzICpvcHMpOworCitzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbiAq
CitpbnRlbF9tZW1vcnlfcmVnaW9uX2dldChzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbiAqbWVt
KTsKK3ZvaWQgaW50ZWxfbWVtb3J5X3JlZ2lvbl9wdXQoc3RydWN0IGludGVsX21lbW9yeV9yZWdp
b24gKm1lbSk7CisKKyNlbmRpZgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2Vs
ZnRlc3RzL2k5MTVfbW9ja19zZWxmdGVzdHMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0
ZXN0cy9pOTE1X21vY2tfc2VsZnRlc3RzLmgKaW5kZXggYjg4MDg0ZmUzMjY5Li5hYTVhMGU3ZjVk
OWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X21vY2tf
c2VsZnRlc3RzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfbW9j
a19zZWxmdGVzdHMuaApAQCAtMjYsMyArMjYsNCBAQCBzZWxmdGVzdChndHQsIGk5MTVfZ2VtX2d0
dF9tb2NrX3NlbGZ0ZXN0cykKIHNlbGZ0ZXN0KGh1Z2VwYWdlcywgaTkxNV9nZW1faHVnZV9wYWdl
X21vY2tfc2VsZnRlc3RzKQogc2VsZnRlc3QoY29udGV4dHMsIGk5MTVfZ2VtX2NvbnRleHRfbW9j
a19zZWxmdGVzdHMpCiBzZWxmdGVzdChidWRkeSwgaTkxNV9idWRkeV9tb2NrX3NlbGZ0ZXN0cykK
K3NlbGZ0ZXN0KG1lbW9yeV9yZWdpb24sIGludGVsX21lbW9yeV9yZWdpb25fbW9ja19zZWxmdGVz
dHMpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaW50ZWxfbWVt
b3J5X3JlZ2lvbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX21lbW9y
eV9yZWdpb24uYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjUzZjRm
MmQ5ZjY1NQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0
cy9pbnRlbF9tZW1vcnlfcmVnaW9uLmMKQEAgLTAsMCArMSwxMTUgQEAKKy8vIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBNSVQKKy8qCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3Jh
dGlvbgorICovCisKKyNpbmNsdWRlIDxsaW51eC9wcmltZV9udW1iZXJzLmg+CisKKyNpbmNsdWRl
ICIuLi9pOTE1X3NlbGZ0ZXN0LmgiCisKKyNpbmNsdWRlICJtb2NrX2RybS5oIgorI2luY2x1ZGUg
Im1vY2tfZ2VtX2RldmljZS5oIgorI2luY2x1ZGUgIm1vY2tfcmVnaW9uLmgiCisKKyNpbmNsdWRl
ICJnZW0vaTkxNV9nZW1fcmVnaW9uLmgiCisjaW5jbHVkZSAiZ2VtL3NlbGZ0ZXN0cy9tb2NrX2Nv
bnRleHQuaCIKKworc3RhdGljIHZvaWQgY2xvc2Vfb2JqZWN0cyhzdHJ1Y3QgaW50ZWxfbWVtb3J5
X3JlZ2lvbiAqbWVtLAorCQkJICBzdHJ1Y3QgbGlzdF9oZWFkICpvYmplY3RzKQoreworCXN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gbWVtLT5pOTE1OworCXN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmosICpvbjsKKworCWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShvYmosIG9u
LCBvYmplY3RzLCBzdF9saW5rKSB7CisJCWlmIChpOTE1X2dlbV9vYmplY3RfaGFzX3Bpbm5lZF9w
YWdlcyhvYmopKQorCQkJaTkxNV9nZW1fb2JqZWN0X3VucGluX3BhZ2VzKG9iaik7CisJCS8qIE5v
IHBvbGx1dGluZyB0aGUgbWVtb3J5IHJlZ2lvbiBiZXR3ZWVuIHRlc3RzICovCisJCV9faTkxNV9n
ZW1fb2JqZWN0X3B1dF9wYWdlcyhvYmosIEk5MTVfTU1fTk9STUFMKTsKKwkJaTkxNV9nZW1fb2Jq
ZWN0X3B1dChvYmopOworCQlsaXN0X2RlbCgmb2JqLT5zdF9saW5rKTsKKwl9CisKKwljb25kX3Jl
c2NoZWQoKTsKKworCWk5MTVfZ2VtX2RyYWluX2ZyZWVkX29iamVjdHMoaTkxNSk7Cit9CisKK3N0
YXRpYyBpbnQgaWd0X21vY2tfZmlsbCh2b2lkICphcmcpCit7CisJc3RydWN0IGludGVsX21lbW9y
eV9yZWdpb24gKm1lbSA9IGFyZzsKKwlyZXNvdXJjZV9zaXplX3QgdG90YWwgPSByZXNvdXJjZV9z
aXplKCZtZW0tPnJlZ2lvbik7CisJcmVzb3VyY2Vfc2l6ZV90IHBhZ2Vfc2l6ZTsKKwlyZXNvdXJj
ZV9zaXplX3QgcmVtOworCXVuc2lnbmVkIGxvbmcgbWF4X3BhZ2VzOworCXVuc2lnbmVkIGxvbmcg
cGFnZV9udW07CisJTElTVF9IRUFEKG9iamVjdHMpOworCWludCBlcnIgPSAwOworCisJcGFnZV9z
aXplID0gbWVtLT5tbS5jaHVua19zaXplOworCW1heF9wYWdlcyA9IGRpdjY0X3U2NCh0b3RhbCwg
cGFnZV9zaXplKTsKKwlyZW0gPSB0b3RhbDsKKworCWZvcl9lYWNoX3ByaW1lX251bWJlcl9mcm9t
KHBhZ2VfbnVtLCAxLCBtYXhfcGFnZXMpIHsKKwkJcmVzb3VyY2Vfc2l6ZV90IHNpemUgPSBwYWdl
X251bSAqIHBhZ2Vfc2l6ZTsKKwkJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKKwor
CQlvYmogPSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX3JlZ2lvbihtZW0sIHNpemUsIDApOworCQlp
ZiAoSVNfRVJSKG9iaikpIHsKKwkJCWVyciA9IFBUUl9FUlIob2JqKTsKKwkJCWJyZWFrOworCQl9
CisKKwkJZXJyID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9wYWdlcyhvYmopOworCQlpZiAoZXJyKSB7
CisJCQlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7CisJCQlicmVhazsKKwkJfQorCisJCWxpc3Rf
YWRkKCZvYmotPnN0X2xpbmssICZvYmplY3RzKTsKKwkJcmVtIC09IHNpemU7CisJfQorCisJaWYg
KGVyciA9PSAtRU5PTUVNKQorCQllcnIgPSAwOworCWlmIChlcnIgPT0gLUVOWElPKSB7CisJCWlm
IChwYWdlX251bSAqIHBhZ2Vfc2l6ZSA8PSByZW0pIHsKKwkJCXByX2VycigiJXMgZmFpbGVkLCBz
cGFjZSBzdGlsbCBsZWZ0IGluIHJlZ2lvblxuIiwKKwkJCSAgICAgICBfX2Z1bmNfXyk7CisJCQll
cnIgPSAtRUlOVkFMOworCQl9IGVsc2UgeworCQkJZXJyID0gMDsKKwkJfQorCX0KKworCWNsb3Nl
X29iamVjdHMobWVtLCAmb2JqZWN0cyk7CisKKwlyZXR1cm4gZXJyOworfQorCitpbnQgaW50ZWxf
bWVtb3J5X3JlZ2lvbl9tb2NrX3NlbGZ0ZXN0cyh2b2lkKQoreworCXN0YXRpYyBjb25zdCBzdHJ1
Y3QgaTkxNV9zdWJ0ZXN0IHRlc3RzW10gPSB7CisJCVNVQlRFU1QoaWd0X21vY2tfZmlsbCksCisJ
fTsKKwlzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbiAqbWVtOworCXN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1OworCWludCBlcnI7CisKKwlpOTE1ID0gbW9ja19nZW1fZGV2aWNlKCk7CisJ
aWYgKCFpOTE1KQorCQlyZXR1cm4gLUVOT01FTTsKKworCW1lbSA9IG1vY2tfcmVnaW9uX2NyZWF0
ZShpOTE1LCAwLCBTWl8yRywgSTkxNV9HVFRfUEFHRV9TSVpFXzRLLCAwKTsKKwlpZiAoSVNfRVJS
KG1lbSkpIHsKKwkJcHJfZXJyKCJmYWlsZWQgdG8gY3JlYXRlIG1lbW9yeSByZWdpb25cbiIpOwor
CQllcnIgPSBQVFJfRVJSKG1lbSk7CisJCWdvdG8gb3V0X3VucmVmOworCX0KKworCWVyciA9IGk5
MTVfc3VidGVzdHModGVzdHMsIG1lbSk7CisKKwlpbnRlbF9tZW1vcnlfcmVnaW9uX3B1dChtZW0p
Oworb3V0X3VucmVmOgorCWRybV9kZXZfcHV0KCZpOTE1LT5kcm0pOworCXJldHVybiBlcnI7Cit9
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19nZW1fZGV2
aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19nZW1fZGV2aWNlLmMK
aW5kZXggNzBhNzAyNmRiMDhkLi44MjY0ZDM4ZmE2OTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9zZWxmdGVzdHMvbW9ja19nZW1fZGV2aWNlLmMKQEAgLTMzLDYgKzMzLDcgQEAKICNp
bmNsdWRlICJtb2NrX2dlbV9kZXZpY2UuaCIKICNpbmNsdWRlICJtb2NrX2d0dC5oIgogI2luY2x1
ZGUgIm1vY2tfdW5jb3JlLmgiCisjaW5jbHVkZSAibW9ja19yZWdpb24uaCIKIAogI2luY2x1ZGUg
ImdlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmgiCiAjaW5jbHVkZSAiZ2VtL3NlbGZ0ZXN0cy9t
b2NrX2dlbV9vYmplY3QuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0
ZXN0cy9tb2NrX3JlZ2lvbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tf
cmVnaW9uLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi4wZTlhNTc1
ZWRlM2IKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMv
bW9ja19yZWdpb24uYwpAQCAtMCwwICsxLDU5IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmll
cjogTUlUCisvKgorICogQ29weXJpZ2h0IMKpIDIwMTkgSW50ZWwgQ29ycG9yYXRpb24KKyAqLwor
CisjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5oIgorI2luY2x1ZGUgImludGVsX21lbW9y
eV9yZWdpb24uaCIKKworI2luY2x1ZGUgIm1vY2tfcmVnaW9uLmgiCisKK3N0YXRpYyBjb25zdCBz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdF9vcHMgbW9ja19yZWdpb25fb2JqX29wcyA9IHsKKwku
Z2V0X3BhZ2VzID0gaTkxNV9nZW1fb2JqZWN0X2dldF9wYWdlc19idWRkeSwKKwkucHV0X3BhZ2Vz
ID0gaTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlc19idWRkeSwKKwkucmVsZWFzZSA9IGk5MTVfZ2Vt
X29iamVjdF9yZWxlYXNlX21lbW9yeV9yZWdpb24sCit9OworCitzdGF0aWMgc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKgorbW9ja19vYmplY3RfY3JlYXRlKHN0cnVjdCBpbnRlbF9tZW1vcnlf
cmVnaW9uICptZW0sCisJCSAgIHJlc291cmNlX3NpemVfdCBzaXplLAorCQkgICB1bnNpZ25lZCBp
bnQgZmxhZ3MpCit7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBtZW0tPmk5MTU7
CisJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKKworCWlmIChzaXplID4gQklUKG1l
bS0+bW0ubWF4X29yZGVyKSAqIG1lbS0+bW0uY2h1bmtfc2l6ZSkKKwkJcmV0dXJuIEVSUl9QVFIo
LUUyQklHKTsKKworCW9iaiA9IGk5MTVfZ2VtX29iamVjdF9hbGxvYygpOworCWlmICghb2JqKQor
CQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsKKworCWRybV9nZW1fcHJpdmF0ZV9vYmplY3RfaW5p
dCgmaTkxNS0+ZHJtLCAmb2JqLT5iYXNlLCBzaXplKTsKKwlpOTE1X2dlbV9vYmplY3RfaW5pdChv
YmosICZtb2NrX3JlZ2lvbl9vYmpfb3BzKTsKKworCW9iai0+cmVhZF9kb21haW5zID0gSTkxNV9H
RU1fRE9NQUlOX0NQVSB8IEk5MTVfR0VNX0RPTUFJTl9HVFQ7CisKKwlpOTE1X2dlbV9vYmplY3Rf
c2V0X2NhY2hlX2NvaGVyZW5jeShvYmosIEk5MTVfQ0FDSEVfTk9ORSk7CisKKwlpOTE1X2dlbV9v
YmplY3RfaW5pdF9tZW1vcnlfcmVnaW9uKG9iaiwgbWVtKTsKKworCXJldHVybiBvYmo7Cit9CisK
K3N0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbl9vcHMgbW9ja19yZWdpb25f
b3BzID0geworCS5pbml0ID0gaW50ZWxfbWVtb3J5X3JlZ2lvbl9pbml0X2J1ZGR5LAorCS5yZWxl
YXNlID0gaW50ZWxfbWVtb3J5X3JlZ2lvbl9yZWxlYXNlX2J1ZGR5LAorCS5jcmVhdGVfb2JqZWN0
ID0gbW9ja19vYmplY3RfY3JlYXRlLAorfTsKKworc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24g
KgorbW9ja19yZWdpb25fY3JlYXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAorCQkg
ICByZXNvdXJjZV9zaXplX3Qgc3RhcnQsCisJCSAgIHJlc291cmNlX3NpemVfdCBzaXplLAorCQkg
ICByZXNvdXJjZV9zaXplX3QgbWluX3BhZ2Vfc2l6ZSwKKwkJICAgcmVzb3VyY2Vfc2l6ZV90IGlv
X3N0YXJ0KQoreworCXJldHVybiBpbnRlbF9tZW1vcnlfcmVnaW9uX2NyZWF0ZShpOTE1LCBzdGFy
dCwgc2l6ZSwgbWluX3BhZ2Vfc2l6ZSwKKwkJCQkJICBpb19zdGFydCwgJm1vY2tfcmVnaW9uX29w
cyk7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19y
ZWdpb24uaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX3JlZ2lvbi5oCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uMjQ2MDgwODlkODMzCi0tLSAv
ZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tfcmVnaW9u
LmgKQEAgLTAsMCArMSwxNiBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVCAqLwor
LyoKKyAqIENvcHlyaWdodCDCqSAyMDE5IEludGVsIENvcnBvcmF0aW9uCisgKi8KKworI2lmbmRl
ZiBfX01PQ0tfUkVHSU9OX0gKKyNkZWZpbmUgX19NT0NLX1JFR0lPTl9ICisKK3N0cnVjdCBpbnRl
bF9tZW1vcnlfcmVnaW9uICoKK21vY2tfcmVnaW9uX2NyZWF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSwKKwkJICAgcmVzb3VyY2Vfc2l6ZV90IHN0YXJ0LAorCQkgICByZXNvdXJjZV9z
aXplX3Qgc2l6ZSwKKwkJICAgcmVzb3VyY2Vfc2l6ZV90IG1pbl9wYWdlX3NpemUsCisJCSAgIHJl
c291cmNlX3NpemVfdCBpb19zdGFydCk7CisKKyNlbmRpZiAvKiAhX19NT0NLX1JFR0lPTl9IICov
Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9y
ZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdm
eA==

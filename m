Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8E385BDBAA
	for <lists+intel-gfx@lfdr.de>; Wed, 25 Sep 2019 12:01:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3E6676EB6C;
	Wed, 25 Sep 2019 10:01:54 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 00F086EB6E
 for <intel-gfx@lists.freedesktop.org>; Wed, 25 Sep 2019 10:01:51 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18609381-1500050 
 for multiple; Wed, 25 Sep 2019 11:01:46 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 25 Sep 2019 11:01:30 +0100
Message-Id: <20190925100137.17956-21-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20190925100137.17956-1-chris@chris-wilson.co.uk>
References: <20190925100137.17956-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 20/27] drm/i915: Remove logical HW ID
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2l0aCB0aGUgaW50cm9kdWN0aW9uIG9mIGN0eC0+ZW5naW5lc1tdIHdlIGFsbG93IG11bHRpcGxl
IGxvZ2ljYWwKY29udGV4dHMgdG8gYmUgdXNlZCBvbiB0aGUgc2FtZSBlbmdpbmUgKGUuZy4gd2l0
aCB2aXJ0dWFsIGVuZ2luZXMpLiBFYWNoCmxvZ2ljYWwgY29udGV4dCByZXF1aXJlcyBhIHVuaXF1
ZSB0YWcgaW4gb3JkZXIgZm9yIGNvbnRleHQtc3dpdGNoaW5nIHRvCm9jY3VyIGNvcnJlY3RseSBi
ZXR3ZWVuIHRoZW0uCgpXZSBvbmx5IG5lZWQgdG8ga2VlcCBhIHVuaXF1ZSB0YWcgZm9yIHRoZSBh
Y3RpdmUgbGlmZXRpbWUgb2YgdGhlCmNvbnRleHQsIGFuZCBmb3IgYXMgbG9uZyBhcyB3ZSBuZWVk
IHRvIGlkZW50aWZ5IHRoYXQgY29udGV4dC4gVGhlIEhXCnVzZXMgdGhlIHRhZyB0byBkZXRlcm1p
bmUgaWYgaXQgc2hvdWxkIHVzZSBhIGxpdGUtcmVzdG9yZSAod2h5IG5vdCB0aGUKTFJDQT8pIGFu
ZCBwYXNzZXMgdGhlIHRhZyBiYWNrIGZvciB2YXJpb3VzIHN0YXR1cyBpZGVudGlmaWVzLiBUaGUg
b25seQpzdGF0dXMgd2UgbmVlZCB0byB0cmFjayBpcyBmb3IgT0EsIHNvIHdoZW4gdXNpbmcgcGVy
Ziwgd2UgYXNzaWduIHRoZQpzcGVjaWZpYyBjb250ZXh0IGEgdW5pcXVlIHRhZy4KCkZpeGVzOiA5
NzZiNTVmMGUxZGIgKCJkcm0vaTkxNTogQWxsb3cgYSBjb250ZXh0IHRvIGRlZmluZSBpdHMgc2V0
IG9mIGVuZ2luZXMiKQpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdp
bHNvbi5jby51az4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4
dC5jICAgfCAxNDcgLS0tLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fY29udGV4dC5oICAgfCAgMTUgLS0KIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX2NvbnRleHRfdHlwZXMuaCB8ICAxOCAtLS0KIC4uLi9kcm0vaTkxNS9nZW0vc2VsZnRlc3Rz
L2k5MTVfZ2VtX2NvbnRleHQuYyB8ICAxMyArLQogLi4uL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL21vY2tfY29udGV4dC5jIHwgICA4IC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2NvbnRleHRfdHlwZXMuaCB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfdHlwZXMuaCAgfCAgIDQgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xy
Yy5jICAgICAgICAgICB8ICAyOSArKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3Qu
YyAgICAgICAgICAgICAgfCAgMTcgLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdm
cy5jICAgICAgICAgICB8ICAgMyAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJv
ci5jICAgICAgICAgfCAgIDcgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9y
LmggICAgICAgICB8ICAgMSAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyAgICAg
ICAgICAgICAgfCAgMjUgKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3RyYWNlLmggICAg
ICAgICAgICAgfCAgMzggKystLS0KIC4uLi9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2Vt
X2V2aWN0LmMgICB8ICAgNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVf
dm1hLmMgICAgIHwgICAyICstCiAxNiBmaWxlcyBjaGFuZ2VkLCA0OCBpbnNlcnRpb25zKCspLCAy
ODQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250
ZXh0LmMKaW5kZXggZTgzMjIzOGE3MmU1Li40ZTU5YjgwOWQ5MDEgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwpAQCAtMTY4LDk3ICsxNjgsNiBAQCBsb29r
dXBfdXNlcl9lbmdpbmUoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwKIAlyZXR1cm4gaTkx
NV9nZW1fY29udGV4dF9nZXRfZW5naW5lKGN0eCwgaWR4KTsKIH0KIAotc3RhdGljIGlubGluZSBp
bnQgbmV3X2h3X2lkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBnZnBfdCBnZnApCi17
Ci0JdW5zaWduZWQgaW50IG1heDsKLQotCWxvY2tkZXBfYXNzZXJ0X2hlbGQoJmk5MTUtPmNvbnRl
eHRzLm11dGV4KTsKLQotCWlmIChJTlRFTF9HRU4oaTkxNSkgPj0gMTIpCi0JCW1heCA9IEdFTjEy
X01BWF9DT05URVhUX0hXX0lEOwotCWVsc2UgaWYgKElOVEVMX0dFTihpOTE1KSA+PSAxMSkKLQkJ
bWF4ID0gR0VOMTFfTUFYX0NPTlRFWFRfSFdfSUQ7Ci0JZWxzZSBpZiAoVVNFU19HVUNfU1VCTUlT
U0lPTihpOTE1KSkKLQkJLyoKLQkJICogV2hlbiB1c2luZyBHdUMgaW4gcHJveHkgc3VibWlzc2lv
biwgR3VDIGNvbnN1bWVzIHRoZQotCQkgKiBoaWdoZXN0IGJpdCBpbiB0aGUgY29udGV4dCBpZCB0
byBpbmRpY2F0ZSBwcm94eSBzdWJtaXNzaW9uLgotCQkgKi8KLQkJbWF4ID0gTUFYX0dVQ19DT05U
RVhUX0hXX0lEOwotCWVsc2UKLQkJbWF4ID0gTUFYX0NPTlRFWFRfSFdfSUQ7Ci0KLQlyZXR1cm4g
aWRhX3NpbXBsZV9nZXQoJmk5MTUtPmNvbnRleHRzLmh3X2lkYSwgMCwgbWF4LCBnZnApOwotfQot
Ci1zdGF0aWMgaW50IHN0ZWFsX2h3X2lkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQot
ewotCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgsICpjbjsKLQlMSVNUX0hFQUQocGlubmVk
KTsKLQlpbnQgaWQgPSAtRU5PU1BDOwotCi0JbG9ja2RlcF9hc3NlcnRfaGVsZCgmaTkxNS0+Y29u
dGV4dHMubXV0ZXgpOwotCi0JbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKGN0eCwgY24sCi0JCQkJ
ICZpOTE1LT5jb250ZXh0cy5od19pZF9saXN0LCBod19pZF9saW5rKSB7Ci0JCWlmIChhdG9taWNf
cmVhZCgmY3R4LT5od19pZF9waW5fY291bnQpKSB7Ci0JCQlsaXN0X21vdmVfdGFpbCgmY3R4LT5o
d19pZF9saW5rLCAmcGlubmVkKTsKLQkJCWNvbnRpbnVlOwotCQl9Ci0KLQkJR0VNX0JVR19PTigh
Y3R4LT5od19pZCk7IC8qIHBlcm1hLXBpbm5lZCBrZXJuZWwgY29udGV4dCAqLwotCQlsaXN0X2Rl
bF9pbml0KCZjdHgtPmh3X2lkX2xpbmspOwotCQlpZCA9IGN0eC0+aHdfaWQ7Ci0JCWJyZWFrOwot
CX0KLQotCS8qCi0JICogUmVtZW1iZXIgaG93IGZhciB3ZSBnb3QgdXAgb24gdGhlIGxhc3QgcmVw
b3NzZXNpb24gc2Nhbiwgc28gdGhlCi0JICogbGlzdCBpcyBrZXB0IGluIGEgImxlYXN0IHJlY2Vu
dGx5IHNjYW5uZWQiIG9yZGVyLgotCSAqLwotCWxpc3Rfc3BsaWNlX3RhaWwoJnBpbm5lZCwgJmk5
MTUtPmNvbnRleHRzLmh3X2lkX2xpc3QpOwotCXJldHVybiBpZDsKLX0KLQotc3RhdGljIGludCBh
c3NpZ25faHdfaWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHVuc2lnbmVkIGludCAq
b3V0KQotewotCWludCByZXQ7Ci0KLQlsb2NrZGVwX2Fzc2VydF9oZWxkKCZpOTE1LT5jb250ZXh0
cy5tdXRleCk7Ci0KLQkvKgotCSAqIFdlIHByZWZlciB0byBzdGVhbC9zdGFsbCBvdXJzZWx2ZXMg
YW5kIG91ciB1c2VycyBvdmVyIHRoYXQgb2YgdGhlCi0JICogZW50aXJlIHN5c3RlbS4gVGhhdCBt
YXkgYmUgYSBsaXR0bGUgdW5mYWlyIHRvIG91ciB1c2VycywgYW5kCi0JICogZXZlbiBodXJ0IGhp
Z2ggcHJpb3JpdHkgY2xpZW50cy4gVGhlIGNob2ljZSBpcyB3aGV0aGVyIHRvIG9vbWtpbGwKLQkg
KiBzb21ldGhpbmcgZWxzZSwgb3Igc3RlYWwgYSBjb250ZXh0IGlkLgotCSAqLwotCXJldCA9IG5l
d19od19pZChpOTE1LCBHRlBfS0VSTkVMIHwgX19HRlBfUkVUUllfTUFZRkFJTCB8IF9fR0ZQX05P
V0FSTik7Ci0JaWYgKHVubGlrZWx5KHJldCA8IDApKSB7Ci0JCXJldCA9IHN0ZWFsX2h3X2lkKGk5
MTUpOwotCQlpZiAocmV0IDwgMCkgLyogb25jZSBhZ2FpbiBmb3IgdGhlIGNvcnJlY3QgZXJybm8g
Y29kZSAqLwotCQkJcmV0ID0gbmV3X2h3X2lkKGk5MTUsIEdGUF9LRVJORUwpOwotCQlpZiAocmV0
IDwgMCkKLQkJCXJldHVybiByZXQ7Ci0JfQotCi0JKm91dCA9IHJldDsKLQlyZXR1cm4gMDsKLX0K
LQotc3RhdGljIHZvaWQgcmVsZWFzZV9od19pZChzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4
KQotewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gY3R4LT5pOTE1OwotCi0JaWYg
KGxpc3RfZW1wdHkoJmN0eC0+aHdfaWRfbGluaykpCi0JCXJldHVybjsKLQotCW11dGV4X2xvY2so
Jmk5MTUtPmNvbnRleHRzLm11dGV4KTsKLQlpZiAoIWxpc3RfZW1wdHkoJmN0eC0+aHdfaWRfbGlu
aykpIHsKLQkJaWRhX3NpbXBsZV9yZW1vdmUoJmk5MTUtPmNvbnRleHRzLmh3X2lkYSwgY3R4LT5o
d19pZCk7Ci0JCWxpc3RfZGVsX2luaXQoJmN0eC0+aHdfaWRfbGluayk7Ci0JfQotCW11dGV4X3Vu
bG9jaygmaTkxNS0+Y29udGV4dHMubXV0ZXgpOwotfQotCiBzdGF0aWMgdm9pZCBfX2ZyZWVfZW5n
aW5lcyhzdHJ1Y3QgaTkxNV9nZW1fZW5naW5lcyAqZSwgdW5zaWduZWQgaW50IGNvdW50KQogewog
CXdoaWxlIChjb3VudC0tKSB7CkBAIC0zMTMsOCArMjIyLDYgQEAgc3RhdGljIHZvaWQgaTkxNV9n
ZW1fY29udGV4dF9mcmVlKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCiAJbG9ja2RlcF9h
c3NlcnRfaGVsZCgmY3R4LT5pOTE1LT5kcm0uc3RydWN0X211dGV4KTsKIAlHRU1fQlVHX09OKCFp
OTE1X2dlbV9jb250ZXh0X2lzX2Nsb3NlZChjdHgpKTsKIAotCXJlbGVhc2VfaHdfaWQoY3R4KTsK
LQogCWZyZWVfZW5naW5lcyhyY3VfYWNjZXNzX3BvaW50ZXIoY3R4LT5lbmdpbmVzKSk7CiAJbXV0
ZXhfZGVzdHJveSgmY3R4LT5lbmdpbmVzX211dGV4KTsKIApAQCAtNDU5LDEyICszNjYsNiBAQCBz
dGF0aWMgdm9pZCBjb250ZXh0X2Nsb3NlKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCiAK
IAljdHgtPmZpbGVfcHJpdiA9IEVSUl9QVFIoLUVCQURGKTsKIAotCS8qCi0JICogVGhpcyBjb250
ZXh0IHdpbGwgbmV2ZXIgYWdhaW4gYmUgYXNzaW5nZWQgdG8gSFcsIHNvIHdlIGNhbgotCSAqIHJl
dXNlIGl0cyBJRCBmb3IgdGhlIG5leHQgY29udGV4dC4KLQkgKi8KLQlyZWxlYXNlX2h3X2lkKGN0
eCk7Ci0KIAkvKgogCSAqIFRoZSBMVVQgdXNlcyB0aGUgVk1BIGFzIGEgYmFja3BvaW50ZXIgdG8g
dW5yZWYgdGhlIG9iamVjdCwKIAkgKiBzbyB3ZSBuZWVkIHRvIGNsZWFyIHRoZSBMVVQgYmVmb3Jl
IHdlIGNsb3NlIGFsbCB0aGUgVk1BIChpbnNpZGUKQEAgLTUwNyw3ICs0MDgsNiBAQCBfX2NyZWF0
ZV9jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCVJDVV9JTklUX1BPSU5U
RVIoY3R4LT5lbmdpbmVzLCBlKTsKIAogCUlOSVRfUkFESVhfVFJFRSgmY3R4LT5oYW5kbGVzX3Zt
YSwgR0ZQX0tFUk5FTCk7Ci0JSU5JVF9MSVNUX0hFQUQoJmN0eC0+aHdfaWRfbGluayk7CiAKIAkv
KiBOQjogTWFyayBhbGwgc2xpY2VzIGFzIG5lZWRpbmcgYSByZW1hcCBzbyB0aGF0IHdoZW4gdGhl
IGNvbnRleHQgZmlyc3QKIAkgKiBsb2FkcyBpdCB3aWxsIHJlc3RvcmUgd2hhdGV2ZXIgcmVtYXAg
c3RhdGUgYWxyZWFkeSBleGlzdHMuIElmIHRoZXJlCkBAIC02NzYsMTggKzU3NiwxMSBAQCBzdHJ1
Y3QgaTkxNV9nZW1fY29udGV4dCAqCiBpOTE1X2dlbV9jb250ZXh0X2NyZWF0ZV9rZXJuZWwoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIGludCBwcmlvKQogewogCXN0cnVjdCBpOTE1X2dl
bV9jb250ZXh0ICpjdHg7Ci0JaW50IGVycjsKIAogCWN0eCA9IGk5MTVfZ2VtX2NyZWF0ZV9jb250
ZXh0KGk5MTUsIDApOwogCWlmIChJU19FUlIoY3R4KSkKIAkJcmV0dXJuIGN0eDsKIAotCWVyciA9
IGk5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lkKGN0eCk7Ci0JaWYgKGVycikgewotCQlkZXN0cm95
X2tlcm5lbF9jb250ZXh0KCZjdHgpOwotCQlyZXR1cm4gRVJSX1BUUihlcnIpOwotCX0KLQogCWk5
MTVfZ2VtX2NvbnRleHRfY2xlYXJfYmFubmFibGUoY3R4KTsKIAlpOTE1X2dlbV9jb250ZXh0X3Nl
dF9wZXJzaXN0ZW5jZShjdHgpOwogCWN0eC0+c2NoZWQucHJpb3JpdHkgPSBJOTE1X1VTRVJfUFJJ
T1JJVFkocHJpbyk7CkBAIC03MjcsMTUgKzYyMCw2IEBAIGludCBpOTE1X2dlbV9jb250ZXh0c19p
bml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkJRFJNX0VSUk9SKCJGYWls
ZWQgdG8gY3JlYXRlIGRlZmF1bHQgZ2xvYmFsIGNvbnRleHRcbiIpOwogCQlyZXR1cm4gUFRSX0VS
UihjdHgpOwogCX0KLQkvKgotCSAqIEZvciBlYXN5IHJlY29nbmlzYWJsaXR5LCB3ZSB3YW50IHRo
ZSBrZXJuZWwgY29udGV4dCB0byBiZSAwIGFuZCB0aGVuCi0JICogYWxsIHVzZXIgY29udGV4dHMg
d2lsbCBoYXZlIG5vbi16ZXJvIGh3X2lkLiBLZXJuZWwgY29udGV4dHMgYXJlCi0JICogcGVybWFu
ZW50bHkgcGlubmVkLCBzbyB0aGF0IHdlIG5ldmVyIHN1ZmZlciBhIHN0YWxsIGFuZCBjYW4KLQkg
KiB1c2UgdGhlbSBmcm9tIGFueSBhbGxvY2F0aW9uIGNvbnRleHQgKGUuZy4gZm9yIGV2aWN0aW5n
IG90aGVyCi0JICogY29udGV4dHMgYW5kIGZyb20gaW5zaWRlIHRoZSBzaHJpbmtlcikuCi0JICov
Ci0JR0VNX0JVR19PTihjdHgtPmh3X2lkKTsKLQlHRU1fQlVHX09OKCFhdG9taWNfcmVhZCgmY3R4
LT5od19pZF9waW5fY291bnQpKTsKIAlkZXZfcHJpdi0+a2VybmVsX2NvbnRleHQgPSBjdHg7CiAK
IAlEUk1fREVCVUdfRFJJVkVSKCIlcyBjb250ZXh0IHN1cHBvcnQgaW5pdGlhbGl6ZWRcbiIsCkBA
IC03NDksMTAgKzYzMyw2IEBAIHZvaWQgaTkxNV9nZW1fY29udGV4dHNfZmluaShzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlsb2NrZGVwX2Fzc2VydF9oZWxkKCZpOTE1LT5kcm0uc3Ry
dWN0X211dGV4KTsKIAogCWRlc3Ryb3lfa2VybmVsX2NvbnRleHQoJmk5MTUtPmtlcm5lbF9jb250
ZXh0KTsKLQotCS8qIE11c3QgZnJlZSBhbGwgZGVmZXJyZWQgY29udGV4dHMgKHZpYSBmbHVzaF93
b3JrcXVldWUpIGZpcnN0ICovCi0JR0VNX0JVR19PTighbGlzdF9lbXB0eSgmaTkxNS0+Y29udGV4
dHMuaHdfaWRfbGlzdCkpOwotCWlkYV9kZXN0cm95KCZpOTE1LT5jb250ZXh0cy5od19pZGEpOwog
fQogCiBzdGF0aWMgaW50IGNvbnRleHRfaWRyX2NsZWFudXAoaW50IGlkLCB2b2lkICpwLCB2b2lk
ICpkYXRhKQpAQCAtMjQzOCwzMyArMjMxOCw2IEBAIGludCBpOTE1X2dlbV9jb250ZXh0X3Jlc2V0
X3N0YXRzX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJcmV0dXJuIHJldDsKIH0KIAot
aW50IF9faTkxNV9nZW1fY29udGV4dF9waW5faHdfaWQoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQg
KmN0eCkKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGN0eC0+aTkxNTsKLQlp
bnQgZXJyID0gMDsKLQotCW11dGV4X2xvY2soJmk5MTUtPmNvbnRleHRzLm11dGV4KTsKLQotCUdF
TV9CVUdfT04oaTkxNV9nZW1fY29udGV4dF9pc19jbG9zZWQoY3R4KSk7Ci0KLQlpZiAobGlzdF9l
bXB0eSgmY3R4LT5od19pZF9saW5rKSkgewotCQlHRU1fQlVHX09OKGF0b21pY19yZWFkKCZjdHgt
Pmh3X2lkX3Bpbl9jb3VudCkpOwotCi0JCWVyciA9IGFzc2lnbl9od19pZChpOTE1LCAmY3R4LT5o
d19pZCk7Ci0JCWlmIChlcnIpCi0JCQlnb3RvIG91dF91bmxvY2s7Ci0KLQkJbGlzdF9hZGRfdGFp
bCgmY3R4LT5od19pZF9saW5rLCAmaTkxNS0+Y29udGV4dHMuaHdfaWRfbGlzdCk7Ci0JfQotCi0J
R0VNX0JVR19PTihhdG9taWNfcmVhZCgmY3R4LT5od19pZF9waW5fY291bnQpID09IH4wdSk7Ci0J
YXRvbWljX2luYygmY3R4LT5od19pZF9waW5fY291bnQpOwotCi1vdXRfdW5sb2NrOgotCW11dGV4
X3VubG9jaygmaTkxNS0+Y29udGV4dHMubXV0ZXgpOwotCXJldHVybiBlcnI7Ci19Ci0KIC8qIEdF
TSBjb250ZXh0LWVuZ2luZXMgaXRlcmF0b3I6IGZvcl9lYWNoX2dlbV9lbmdpbmUoKSAqLwogc3Ry
dWN0IGludGVsX2NvbnRleHQgKgogaTkxNV9nZW1fZW5naW5lc19pdGVyX25leHQoc3RydWN0IGk5
MTVfZ2VtX2VuZ2luZXNfaXRlciAqaXQpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fY29udGV4dC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX2NvbnRleHQuaAppbmRleCBlMGY1YjZjNmEzMzEuLjFiMGRmNTM0MzZjZiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5oCkBAIC0xMjcsMjEgKzEyNyw2
IEBAIGk5MTVfZ2VtX2NvbnRleHRfY2xlYXJfdXNlcl9lbmdpbmVzKHN0cnVjdCBpOTE1X2dlbV9j
b250ZXh0ICpjdHgpCiAJY2xlYXJfYml0KENPTlRFWFRfVVNFUl9FTkdJTkVTLCAmY3R4LT5mbGFn
cyk7CiB9CiAKLWludCBfX2k5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lkKHN0cnVjdCBpOTE1X2dl
bV9jb250ZXh0ICpjdHgpOwotc3RhdGljIGlubGluZSBpbnQgaTkxNV9nZW1fY29udGV4dF9waW5f
aHdfaWQoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCkKLXsKLQlpZiAoYXRvbWljX2luY19u
b3RfemVybygmY3R4LT5od19pZF9waW5fY291bnQpKQotCQlyZXR1cm4gMDsKLQotCXJldHVybiBf
X2k5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lkKGN0eCk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9p
ZCBpOTE1X2dlbV9jb250ZXh0X3VucGluX2h3X2lkKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpj
dHgpCi17Ci0JR0VNX0JVR19PTihhdG9taWNfcmVhZCgmY3R4LT5od19pZF9waW5fY291bnQpID09
IDB1KTsKLQlhdG9taWNfZGVjKCZjdHgtPmh3X2lkX3Bpbl9jb3VudCk7Ci19Ci0KIHN0YXRpYyBp
bmxpbmUgYm9vbCBpOTE1X2dlbV9jb250ZXh0X2lzX2tlcm5lbChzdHJ1Y3QgaTkxNV9nZW1fY29u
dGV4dCAqY3R4KQogewogCXJldHVybiAhY3R4LT5maWxlX3ByaXY7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dF90eXBlcy5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaAppbmRleCBkYWYxZWE1MDc1
YTYuLjY0MTlkYTdjOWY5MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2NvbnRleHRfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fY29udGV4dF90eXBlcy5oCkBAIC0xNDgsMjQgKzE0OCw2IEBAIHN0cnVjdCBpOTE1X2dl
bV9jb250ZXh0IHsKICNkZWZpbmUgQ09OVEVYVF9GT1JDRV9TSU5HTEVfU1VCTUlTU0lPTgkyCiAj
ZGVmaW5lIENPTlRFWFRfVVNFUl9FTkdJTkVTCQkzCiAKLQkvKioKLQkgKiBAaHdfaWQ6IC0gdW5p
cXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb250ZXh0Ci0JICoKLQkgKiBUaGUgaGFyZHdhcmUgbmVl
ZHMgdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhlIGNvbnRleHQgZm9yIGEgZmV3Ci0JICogZnVuY3Rp
b25zIGxpa2UgZmF1bHQgcmVwb3J0aW5nLCBQQVNJRCwgc2NoZWR1bGluZy4gVGhlCi0JICogJmRy
bV9pOTE1X3ByaXZhdGUuY29udGV4dF9od19pZGEgaXMgdXNlZCB0byBhc3NpZ24gYSB1bnFpdWUK
LQkgKiBpZCBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBjb250ZXh0LgotCSAqCi0JICogQGh3X2lk
X3Bpbl9jb3VudDogLSBudW1iZXIgb2YgdGltZXMgdGhpcyBjb250ZXh0IGhhZCBiZWVuIHBpbm5l
ZAotCSAqIGZvciB1c2UgKHNob3VsZCBiZSwgYXQgbW9zdCwgb25jZSBwZXIgZW5naW5lKS4KLQkg
KgotCSAqIEBod19pZF9saW5rOiAtIGFsbCBjb250ZXh0cyB3aXRoIGFuIGFzc2lnbmVkIGlkIGFy
ZSB0cmFja2VkCi0JICogZm9yIHBvc3NpYmxlIHJlcG9zc2Vzc2lvbi4KLQkgKi8KLQl1bnNpZ25l
ZCBpbnQgaHdfaWQ7Ci0JYXRvbWljX3QgaHdfaWRfcGluX2NvdW50OwotCXN0cnVjdCBsaXN0X2hl
YWQgaHdfaWRfbGluazsKLQogCXN0cnVjdCBtdXRleCBtdXRleDsKIAogCXN0cnVjdCBpOTE1X3Nj
aGVkX2F0dHIgc2NoZWQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2Vs
ZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxm
dGVzdHMvaTkxNV9nZW1fY29udGV4dC5jCmluZGV4IGIzOTIyNGVkMzgxNy4uYThhOTI5M2Y0YWM2
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2Vt
X2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVf
Z2VtX2NvbnRleHQuYwpAQCAtNDQ2LDkgKzQ0Niw5IEBAIHN0YXRpYyBpbnQgaWd0X2N0eF9leGVj
KHZvaWQgKmFyZykKIAogCQkJZXJyID0gZ3B1X2ZpbGwoY2UsIG9iaiwgZHcpOwogCQkJaWYgKGVy
cikgewotCQkJCXByX2VycigiRmFpbGVkIHRvIGZpbGwgZHdvcmQgJWx1IFslbHUvJWx1XSB3aXRo
IGdwdSAoJXMpIGluIGN0eCAldSBbZnVsbC1wcGd0dD8gJXNdLCBlcnI9JWRcbiIsCisJCQkJcHJf
ZXJyKCJGYWlsZWQgdG8gZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGggZ3B1ICglcykgW2Z1
bGwtcHBndHQ/ICVzXSwgZXJyPSVkXG4iLAogCQkJCSAgICAgICBuZHdvcmRzLCBkdywgbWF4X2R3
b3JkcyhvYmopLAotCQkJCSAgICAgICBlbmdpbmUtPm5hbWUsIGN0eC0+aHdfaWQsCisJCQkJICAg
ICAgIGVuZ2luZS0+bmFtZSwKIAkJCQkgICAgICAgeWVzbm8oISFjdHgtPnZtKSwgZXJyKTsKIAkJ
CQlpbnRlbF9jb250ZXh0X3B1dChjZSk7CiAJCQkJa2VybmVsX2NvbnRleHRfY2xvc2UoY3R4KTsK
QEAgLTU4NCw5ICs1ODQsOSBAQCBzdGF0aWMgaW50IGlndF9zaGFyZWRfY3R4X2V4ZWModm9pZCAq
YXJnKQogCiAJCQllcnIgPSBncHVfZmlsbChjZSwgb2JqLCBkdyk7CiAJCQlpZiAoZXJyKSB7Ci0J
CQkJcHJfZXJyKCJGYWlsZWQgdG8gZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGggZ3B1ICgl
cykgaW4gY3R4ICV1IFtmdWxsLXBwZ3R0PyAlc10sIGVycj0lZFxuIiwKKwkJCQlwcl9lcnIoIkZh
aWxlZCB0byBmaWxsIGR3b3JkICVsdSBbJWx1LyVsdV0gd2l0aCBncHUgKCVzKSBbZnVsbC1wcGd0
dD8gJXNdLCBlcnI9JWRcbiIsCiAJCQkJICAgICAgIG5kd29yZHMsIGR3LCBtYXhfZHdvcmRzKG9i
aiksCi0JCQkJICAgICAgIGVuZ2luZS0+bmFtZSwgY3R4LT5od19pZCwKKwkJCQkgICAgICAgZW5n
aW5lLT5uYW1lLAogCQkJCSAgICAgICB5ZXNubyghIWN0eC0+dm0pLCBlcnIpOwogCQkJCWludGVs
X2NvbnRleHRfcHV0KGNlKTsKIAkJCQlrZXJuZWxfY29udGV4dF9jbG9zZShjdHgpOwpAQCAtMTE2
OCwxMCArMTE2OCw5IEBAIHN0YXRpYyBpbnQgaWd0X2N0eF9yZWFkb25seSh2b2lkICphcmcpCiAK
IAkJCWVyciA9IGdwdV9maWxsKGNlLCBvYmosIGR3KTsKIAkJCWlmIChlcnIpIHsKLQkJCQlwcl9l
cnIoIkZhaWxlZCB0byBmaWxsIGR3b3JkICVsdSBbJWx1LyVsdV0gd2l0aCBncHUgKCVzKSBpbiBj
dHggJXUgW2Z1bGwtcHBndHQ/ICVzXSwgZXJyPSVkXG4iLAorCQkJCXByX2VycigiRmFpbGVkIHRv
IGZpbGwgZHdvcmQgJWx1IFslbHUvJWx1XSB3aXRoIGdwdSAoJXMpIFtmdWxsLXBwZ3R0PyAlc10s
IGVycj0lZFxuIiwKIAkJCQkgICAgICAgbmR3b3JkcywgZHcsIG1heF9kd29yZHMob2JqKSwKLQkJ
CQkgICAgICAgY2UtPmVuZ2luZS0+bmFtZSwgY3R4LT5od19pZCwKLQkJCQkgICAgICAgeWVzbm8o
ISFjdHgtPnZtKSwgZXJyKTsKKwkJCQkgICAgICAgY2UtPmVuZ2luZS0+bmFtZSwgeWVzbm8oISFj
dHgtPnZtKSwgZXJyKTsKIAkJCQlpOTE1X2dlbV9jb250ZXh0X3VubG9ja19lbmdpbmVzKGN0eCk7
CiAJCQkJZ290byBvdXRfdW5sb2NrOwogCQkJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmMKaW5kZXggMGQxYTI3NWVjMzE2Li5lYmM0NmYw
OTg1NjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9j
a19jb250ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9tb2Nr
X2NvbnRleHQuYwpAQCAtMTMsNyArMTMsNiBAQCBtb2NrX2NvbnRleHQoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUsCiB7CiAJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eDsKIAlzdHJ1
Y3QgaTkxNV9nZW1fZW5naW5lcyAqZTsKLQlpbnQgcmV0OwogCiAJY3R4ID0ga3phbGxvYyhzaXpl
b2YoKmN0eCksIEdGUF9LRVJORUwpOwogCWlmICghY3R4KQpAQCAtMzIsMTMgKzMxLDggQEAgbW9j
a19jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCVJDVV9JTklUX1BPSU5U
RVIoY3R4LT5lbmdpbmVzLCBlKTsKIAogCUlOSVRfUkFESVhfVFJFRSgmY3R4LT5oYW5kbGVzX3Zt
YSwgR0ZQX0tFUk5FTCk7Ci0JSU5JVF9MSVNUX0hFQUQoJmN0eC0+aHdfaWRfbGluayk7CiAJbXV0
ZXhfaW5pdCgmY3R4LT5tdXRleCk7CiAKLQlyZXQgPSBpOTE1X2dlbV9jb250ZXh0X3Bpbl9od19p
ZChjdHgpOwotCWlmIChyZXQgPCAwKQotCQlnb3RvIGVycl9lbmdpbmVzOwotCiAJaWYgKG5hbWUp
IHsKIAkJc3RydWN0IGk5MTVfcHBndHQgKnBwZ3R0OwogCkBAIC01Niw4ICs1MCw2IEBAIG1vY2tf
Y29udGV4dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKIAogCXJldHVybiBjdHg7CiAK
LWVycl9lbmdpbmVzOgotCWZyZWVfZW5naW5lcyhyY3VfYWNjZXNzX3BvaW50ZXIoY3R4LT5lbmdp
bmVzKSk7CiBlcnJfZnJlZToKIAlrZnJlZShjdHgpOwogCXJldHVybiBOVUxMOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBlcy5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBlcy5oCmluZGV4IGJmOWNlZGZjY2Jm
MC4uNjk1OWIwNWFlNWY4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9jb250ZXh0X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29u
dGV4dF90eXBlcy5oCkBAIC01OCw2ICs1OCw3IEBAIHN0cnVjdCBpbnRlbF9jb250ZXh0IHsKIAog
CXUzMiAqbHJjX3JlZ19zdGF0ZTsKIAl1NjQgbHJjX2Rlc2M7CisJdTMyIHRhZzsgLyogY29va2ll
IHBhc3NlZCB0byBIVyB0byB0cmFjayB0aGlzIGNvbnRleHQgb24gc3VibWlzc2lvbiAqLwogCiAJ
dW5zaWduZWQgaW50IGFjdGl2ZV9jb3VudDsgLyogcHJvdGVjdGVkIGJ5IHRpbWVsaW5lLT5tdXRl
eCAqLwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVf
dHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCmlu
ZGV4IGRhNGI0NWFhODRiMS4uN2JjZTE3NmU2OTZjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaApAQCAtMjk2LDEwICsyOTYsMTIgQEAgc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyB7CiAJdTggdWFiaV9jbGFzczsKIAl1OCB1YWJpX2luc3RhbmNlOwogCisJ
dTMyIHVhYmlfY2FwYWJpbGl0aWVzOwogCXUzMiBjb250ZXh0X3NpemU7CiAJdTMyIG1taW9fYmFz
ZTsKIAotCXUzMiB1YWJpX2NhcGFiaWxpdGllczsKKwl1bnNpZ25lZCBpbnQgY29udGV4dF90YWc7
CisjZGVmaW5lIE5VTV9DT05URVhUX1RBRyAoMjU2KQogCiAJc3RydWN0IHJiX25vZGUgdWFiaV9u
b2RlOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCmluZGV4IDBlYTJmNGQ3ZGM0My4u
YWY3OWI4ZDcwODAwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9s
cmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpAQCAtNDMzLDEy
ICs0MzMsOCBAQCBhc3NlcnRfcHJpb3JpdHlfcXVldWUoY29uc3Qgc3RydWN0IGk5MTVfcmVxdWVz
dCAqcHJldiwKIHN0YXRpYyB1NjQKIGxyY19kZXNjcmlwdG9yKHN0cnVjdCBpbnRlbF9jb250ZXh0
ICpjZSwgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogewotCXN0cnVjdCBpOTE1X2dl
bV9jb250ZXh0ICpjdHggPSBjZS0+Z2VtX2NvbnRleHQ7CiAJdTY0IGRlc2M7CiAKLQlCVUlMRF9C
VUdfT04oTUFYX0NPTlRFWFRfSFdfSUQgPiAoQklUKEdFTjhfQ1RYX0lEX1dJRFRIKSkpOwotCUJV
SUxEX0JVR19PTihHRU4xMV9NQVhfQ09OVEVYVF9IV19JRCA+IChCSVQoR0VOMTFfU1dfQ1RYX0lE
X1dJRFRIKSkpOwotCiAJZGVzYyA9IElOVEVMX0xFR0FDWV8zMkJfQ09OVEVYVDsKIAlpZiAoaTkx
NV92bV9pc180bHZsKGNlLT52bSkpCiAJCWRlc2MgPSBJTlRFTF9MRUdBQ1lfNjRCX0NPTlRFWFQ7
CkBAIC00NTYsMjAgKzQ1MiwxMSBAQCBscmNfZGVzY3JpcHRvcihzdHJ1Y3QgaW50ZWxfY29udGV4
dCAqY2UsIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAkgKiBhbnl0aGluZyBiZWxv
dy4KIAkgKi8KIAlpZiAoSU5URUxfR0VOKGVuZ2luZS0+aTkxNSkgPj0gMTEpIHsKLQkJR0VNX0JV
R19PTihjdHgtPmh3X2lkID49IEJJVChHRU4xMV9TV19DVFhfSURfV0lEVEgpKTsKLQkJZGVzYyB8
PSAodTY0KWN0eC0+aHdfaWQgPDwgR0VOMTFfU1dfQ1RYX0lEX1NISUZUOwotCQkJCQkJCQkvKiBi
aXRzIDM3LTQ3ICovCi0KIAkJZGVzYyB8PSAodTY0KWVuZ2luZS0+aW5zdGFuY2UgPDwgR0VOMTFf
RU5HSU5FX0lOU1RBTkNFX1NISUZUOwogCQkJCQkJCQkvKiBiaXRzIDQ4LTUzICovCiAKLQkJLyog
VE9ETzogZGVjaWRlIHdoYXQgdG8gZG8gd2l0aCBTVyBjb3VudGVyIChiaXRzIDU1LTYwKSAqLwot
CiAJCWRlc2MgfD0gKHU2NCllbmdpbmUtPmNsYXNzIDw8IEdFTjExX0VOR0lORV9DTEFTU19TSElG
VDsKIAkJCQkJCQkJLyogYml0cyA2MS02MyAqLwotCX0gZWxzZSB7Ci0JCUdFTV9CVUdfT04oY3R4
LT5od19pZCA+PSBCSVQoR0VOOF9DVFhfSURfV0lEVEgpKTsKLQkJZGVzYyB8PSAodTY0KWN0eC0+
aHdfaWQgPDwgR0VOOF9DVFhfSURfU0hJRlQ7CS8qIGJpdHMgMzItNTIgKi8KIAl9CiAKIAlyZXR1
cm4gZGVzYzsKQEAgLTk3OCw2ICs5NjUsMTUgQEAgX19leGVjbGlzdHNfc2NoZWR1bGVfaW4oc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcnEpCiAKIAlpbnRlbF9jb250ZXh0X2dldChjZSk7CiAKKwlpZiAo
Y2UtPnRhZykgeworCQljZS0+bHJjX2Rlc2MgfD0gKHU2NCljZS0+dGFnIDw8IDMyOworCX0gZWxz
ZSB7CisJCWNlLT5scmNfZGVzYyAmPSB+R0VOTUFTS19VTEwoNDcsIDM3KTsKKwkJY2UtPmxyY19k
ZXNjIHw9CisJCQkodTY0KShlbmdpbmUtPmNvbnRleHRfdGFnKysgJSBOVU1fQ09OVEVYVF9UQUcp
IDw8CisJCQlHRU4xMV9TV19DVFhfSURfU0hJRlQ7CisJfQorCiAJaW50ZWxfZ3RfcG1fZ2V0KGVu
Z2luZS0+Z3QpOwogCWV4ZWNsaXN0c19jb250ZXh0X3N0YXR1c19jaGFuZ2UocnEsIElOVEVMX0NP
TlRFWFRfU0NIRURVTEVfSU4pOwogCWludGVsX2VuZ2luZV9jb250ZXh0X2luKGVuZ2luZSk7CkBA
IC0yMjI0LDcgKzIyMjAsNiBAQCBzdGF0aWMgdm9pZCBleGVjbGlzdHNfY29udGV4dF91bnBpbihz
dHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UpCiAJY2hlY2tfcmVkem9uZSgodm9pZCAqKWNlLT5scmNf
cmVnX3N0YXRlIC0gTFJDX1NUQVRFX1BOICogUEFHRV9TSVpFLAogCQkgICAgICBjZS0+ZW5naW5l
KTsKIAotCWk5MTVfZ2VtX2NvbnRleHRfdW5waW5faHdfaWQoY2UtPmdlbV9jb250ZXh0KTsKIAlp
OTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKGNlLT5zdGF0ZS0+b2JqKTsKIAlpbnRlbF9yaW5nX3Jl
c2V0KGNlLT5yaW5nLCBjZS0+cmluZy0+dGFpbCk7CiB9CkBAIC0yMjc0LDE4ICsyMjY5LDEyIEBA
IF9fZXhlY2xpc3RzX2NvbnRleHRfcGluKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKIAkJZ290
byB1bnBpbl9hY3RpdmU7CiAJfQogCi0JcmV0ID0gaTkxNV9nZW1fY29udGV4dF9waW5faHdfaWQo
Y2UtPmdlbV9jb250ZXh0KTsKLQlpZiAocmV0KQotCQlnb3RvIHVucGluX21hcDsKLQogCWNlLT5s
cmNfZGVzYyA9IGxyY19kZXNjcmlwdG9yKGNlLCBlbmdpbmUpOwogCWNlLT5scmNfcmVnX3N0YXRl
ID0gdmFkZHIgKyBMUkNfU1RBVEVfUE4gKiBQQUdFX1NJWkU7CiAJX19leGVjbGlzdHNfdXBkYXRl
X3JlZ19zdGF0ZShjZSwgZW5naW5lKTsKIAogCXJldHVybiAwOwogCi11bnBpbl9tYXA6Ci0JaTkx
NV9nZW1fb2JqZWN0X3VucGluX21hcChjZS0+c3RhdGUtPm9iaik7CiB1bnBpbl9hY3RpdmU6CiAJ
aW50ZWxfY29udGV4dF9hY3RpdmVfcmVsZWFzZShjZSk7CiBlcnI6CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9r
dm1ndC5jCmluZGV4IDM0M2Q3OWMxY2I3ZS4uMDRhNWEwZDkwODIzIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dnQva3ZtZ3QuYwpAQCAtMTU2NCwyNyArMTU2NCwxMCBAQCB2Z3B1X2lkX3Nob3coc3RydWN0IGRl
dmljZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwKIAlyZXR1cm4gc3ByaW50
ZihidWYsICJcbiIpOwogfQogCi1zdGF0aWMgc3NpemVfdAotaHdfaWRfc2hvdyhzdHJ1Y3QgZGV2
aWNlICpkZXYsIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICphdHRyLAotCSAgIGNoYXIgKmJ1ZikK
LXsKLQlzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYgPSBtZGV2X2Zyb21fZGV2KGRldik7Ci0KLQlp
ZiAobWRldikgewotCQlzdHJ1Y3QgaW50ZWxfdmdwdSAqdmdwdSA9IChzdHJ1Y3QgaW50ZWxfdmdw
dSAqKQotCQkJbWRldl9nZXRfZHJ2ZGF0YShtZGV2KTsKLQkJcmV0dXJuIHNwcmludGYoYnVmLCAi
JXVcbiIsCi0JCQkgICAgICAgdmdwdS0+c3VibWlzc2lvbi5zaGFkb3dbMF0tPmdlbV9jb250ZXh0
LT5od19pZCk7Ci0JfQotCXJldHVybiBzcHJpbnRmKGJ1ZiwgIlxuIik7Ci19Ci0KIHN0YXRpYyBE
RVZJQ0VfQVRUUl9STyh2Z3B1X2lkKTsKLXN0YXRpYyBERVZJQ0VfQVRUUl9STyhod19pZCk7CiAK
IHN0YXRpYyBzdHJ1Y3QgYXR0cmlidXRlICppbnRlbF92Z3B1X2F0dHJzW10gPSB7CiAJJmRldl9h
dHRyX3ZncHVfaWQuYXR0ciwKLQkmZGV2X2F0dHJfaHdfaWQuYXR0ciwKIAlOVUxMCiB9OwogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCmluZGV4IGZkNDE1MDVkNTJlYy4uOGNhYWE0NDY0
OTBmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYwpAQCAtMTUwNCw5ICsxNTA0LDYg
QEAgc3RhdGljIGludCBpOTE1X2NvbnRleHRfc3RhdHVzKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9p
ZCAqdW51c2VkKQogCQlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2U7CiAKIAkJc2VxX3B1dHMobSwg
IkhXIGNvbnRleHQgIik7Ci0JCWlmICghbGlzdF9lbXB0eSgmY3R4LT5od19pZF9saW5rKSkKLQkJ
CXNlcV9wcmludGYobSwgIiV4IFtwaW4gJXVdIiwgY3R4LT5od19pZCwKLQkJCQkgICBhdG9taWNf
cmVhZCgmY3R4LT5od19pZF9waW5fY291bnQpKTsKIAkJaWYgKGN0eC0+cGlkKSB7CiAJCQlzdHJ1
Y3QgdGFza19zdHJ1Y3QgKnRhc2s7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZ3B1X2Vycm9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5j
CmluZGV4IGE4NmQyOGJkYTZkZC4uNDcyMzlkZjY1M2YyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ3B1X2Vycm9yLmMKQEAgLTQ3MSw5ICs0NzEsOSBAQCBzdGF0aWMgdm9pZCBlcnJvcl9wcmlu
dF9jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9lcnJvcl9zdGF0ZV9idWYgKm0sCiAJCQkJY29uc3Qg
Y2hhciAqaGVhZGVyLAogCQkJCWNvbnN0IHN0cnVjdCBkcm1faTkxNV9lcnJvcl9jb250ZXh0ICpj
dHgpCiB7Ci0JZXJyX3ByaW50ZihtLCAiJXMlc1slZF0gaHdfaWQgJWQsIHByaW8gJWQsIGd1aWx0
eSAlZCBhY3RpdmUgJWRcbiIsCi0JCSAgIGhlYWRlciwgY3R4LT5jb21tLCBjdHgtPnBpZCwgY3R4
LT5od19pZCwKLQkJICAgY3R4LT5zY2hlZF9hdHRyLnByaW9yaXR5LCBjdHgtPmd1aWx0eSwgY3R4
LT5hY3RpdmUpOworCWVycl9wcmludGYobSwgIiVzJXNbJWRdIHByaW8gJWQsIGd1aWx0eSAlZCBh
Y3RpdmUgJWRcbiIsCisJCSAgIGhlYWRlciwgY3R4LT5jb21tLCBjdHgtPnBpZCwgY3R4LT5zY2hl
ZF9hdHRyLnByaW9yaXR5LAorCQkgICBjdHgtPmd1aWx0eSwgY3R4LT5hY3RpdmUpOwogfQogCiBz
dGF0aWMgdm9pZCBlcnJvcl9wcmludF9lbmdpbmUoc3RydWN0IGRybV9pOTE1X2Vycm9yX3N0YXRl
X2J1ZiAqbSwKQEAgLTEyNjIsNyArMTI2Miw2IEBAIHN0YXRpYyBib29sIHJlY29yZF9jb250ZXh0
KHN0cnVjdCBkcm1faTkxNV9lcnJvcl9jb250ZXh0ICplLAogCQlyY3VfcmVhZF91bmxvY2soKTsK
IAl9CiAKLQllLT5od19pZCA9IGN0eC0+aHdfaWQ7CiAJZS0+c2NoZWRfYXR0ciA9IGN0eC0+c2No
ZWQ7CiAJZS0+Z3VpbHR5ID0gYXRvbWljX3JlYWQoJmN0eC0+Z3VpbHR5X2NvdW50KTsKIAllLT5h
Y3RpdmUgPSBhdG9taWNfcmVhZCgmY3R4LT5hY3RpdmVfY291bnQpOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZ3B1X2Vycm9yLmgKaW5kZXggY2FhZWQ1MDkzZDk1Li40ZGMzNmQ2ZWUzYTIgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmgKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuaApAQCAtMTE3LDcgKzExNyw2IEBAIHN0cnVj
dCBpOTE1X2dwdV9zdGF0ZSB7CiAJCXN0cnVjdCBkcm1faTkxNV9lcnJvcl9jb250ZXh0IHsKIAkJ
CWNoYXIgY29tbVtUQVNLX0NPTU1fTEVOXTsKIAkJCXBpZF90IHBpZDsKLQkJCXUzMiBod19pZDsK
IAkJCWludCBhY3RpdmU7CiAJCQlpbnQgZ3VpbHR5OwogCQkJc3RydWN0IGk5MTVfc2NoZWRfYXR0
ciBzY2hlZF9hdHRyOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJm
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwppbmRleCA4MDA1NTUwMWVjY2Iu
LmQzNmJhMjQ4ZDQzOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJm
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKQEAgLTEyODMsMjIgKzEy
ODMsMTUgQEAgc3RhdGljIGludCBvYV9nZXRfcmVuZGVyX2N0eF9pZChzdHJ1Y3QgaTkxNV9wZXJm
X3N0cmVhbSAqc3RyZWFtKQogCQl9IGVsc2UgewogCQkJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWRf
bWFzayA9CiAJCQkJKDFVIDw8IEdFTjhfQ1RYX0lEX1dJRFRIKSAtIDE7Ci0JCQlzdHJlYW0tPnNw
ZWNpZmljX2N0eF9pZCA9Ci0JCQkJdXBwZXJfMzJfYml0cyhjZS0+bHJjX2Rlc2MpOwotCQkJc3Ry
ZWFtLT5zcGVjaWZpY19jdHhfaWQgJj0KLQkJCQlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZF9tYXNr
OworCQkJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWQgPSBzdHJlYW0tPnNwZWNpZmljX2N0eF9pZF9t
YXNrOwogCQl9CiAJCWJyZWFrOwogCiAJY2FzZSAxMToKIAljYXNlIDEyOiB7CiAJCXN0cmVhbS0+
c3BlY2lmaWNfY3R4X2lkX21hc2sgPQotCQkJKCgxVSA8PCBHRU4xMV9TV19DVFhfSURfV0lEVEgp
IC0gMSkgPDwgKEdFTjExX1NXX0NUWF9JRF9TSElGVCAtIDMyKSB8Ci0JCQkoKDFVIDw8IEdFTjEx
X0VOR0lORV9JTlNUQU5DRV9XSURUSCkgLSAxKSA8PCAoR0VOMTFfRU5HSU5FX0lOU1RBTkNFX1NI
SUZUIC0gMzIpIHwKLQkJCSgoMSA8PCBHRU4xMV9FTkdJTkVfQ0xBU1NfV0lEVEgpIC0gMSkgPDwg
KEdFTjExX0VOR0lORV9DTEFTU19TSElGVCAtIDMyKTsKLQkJc3RyZWFtLT5zcGVjaWZpY19jdHhf
aWQgPSB1cHBlcl8zMl9iaXRzKGNlLT5scmNfZGVzYyk7Ci0JCXN0cmVhbS0+c3BlY2lmaWNfY3R4
X2lkICY9Ci0JCQlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZF9tYXNrOworCQkJKCgxVSA8PCBHRU4x
MV9TV19DVFhfSURfV0lEVEgpIC0gMSkgPDwgKEdFTjExX1NXX0NUWF9JRF9TSElGVCAtIDMyKTsK
KwkJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWQgPSBzdHJlYW0tPnNwZWNpZmljX2N0eF9pZF9tYXNr
OwogCQlicmVhazsKIAl9CiAKQEAgLTEzMDYsNiArMTI5OSw4IEBAIHN0YXRpYyBpbnQgb2FfZ2V0
X3JlbmRlcl9jdHhfaWQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAkJTUlTU0lO
R19DQVNFKElOVEVMX0dFTihpOTE1KSk7CiAJfQogCisJY2UtPnRhZyA9IHN0cmVhbS0+c3BlY2lm
aWNfY3R4X2lkX21hc2s7CisKIAlEUk1fREVCVUdfRFJJVkVSKCJmaWx0ZXJpbmcgb24gY3R4X2lk
PTB4JXggY3R4X2lkX21hc2s9MHgleFxuIiwKIAkJCSBzdHJlYW0tPnNwZWNpZmljX2N0eF9pZCwK
IAkJCSBzdHJlYW0tPnNwZWNpZmljX2N0eF9pZF9tYXNrKTsKQEAgLTEzMjQsMTIgKzEzMTksMTQg
QEAgc3RhdGljIHZvaWQgb2FfcHV0X3JlbmRlcl9jdHhfaWQoc3RydWN0IGk5MTVfcGVyZl9zdHJl
YW0gKnN0cmVhbSkKIHsKIAlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2U7CiAKLQlzdHJlYW0tPnNw
ZWNpZmljX2N0eF9pZCA9IElOVkFMSURfQ1RYX0lEOwotCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lk
X21hc2sgPSAwOwotCiAJY2UgPSBmZXRjaF9hbmRfemVybygmc3RyZWFtLT5waW5uZWRfY3R4KTsK
LQlpZiAoY2UpCisJaWYgKGNlKSB7CisJCWNlLT50YWcgPSAwOwogCQlpbnRlbF9jb250ZXh0X3Vu
cGluKGNlKTsKKwl9CisKKwlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZCA9IElOVkFMSURfQ1RYX0lE
OworCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkX21hc2sgPSAwOwogfQogCiBzdGF0aWMgdm9pZApk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90cmFjZS5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV90cmFjZS5oCmluZGV4IDI0ZjI5NDRkYTA5ZC4uMWYyY2Y2Y2ZhZmI1
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3RyYWNlLmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV90cmFjZS5oCkBAIC02NjUsNyArNjY1LDYgQEAgVFJBQ0Vf
RVZFTlQoaTkxNV9yZXF1ZXN0X3F1ZXVlLAogCiAJICAgIFRQX1NUUlVDVF9fZW50cnkoCiAJCQkg
ICAgIF9fZmllbGQodTMyLCBkZXYpCi0JCQkgICAgIF9fZmllbGQodTMyLCBod19pZCkKIAkJCSAg
ICAgX19maWVsZCh1NjQsIGN0eCkKIAkJCSAgICAgX19maWVsZCh1MTYsIGNsYXNzKQogCQkJICAg
ICBfX2ZpZWxkKHUxNiwgaW5zdGFuY2UpCkBAIC02NzUsNyArNjc0LDYgQEAgVFJBQ0VfRVZFTlQo
aTkxNV9yZXF1ZXN0X3F1ZXVlLAogCiAJICAgIFRQX2Zhc3RfYXNzaWduKAogCQkJICAgX19lbnRy
eS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRleDsKLQkJCSAgIF9fZW50cnktPmh3
X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsKIAkJCSAgIF9fZW50cnktPmNsYXNzID0gcnEt
PmVuZ2luZS0+dWFiaV9jbGFzczsKIAkJCSAgIF9fZW50cnktPmluc3RhbmNlID0gcnEtPmVuZ2lu
ZS0+dWFiaV9pbnN0YW5jZTsKIAkJCSAgIF9fZW50cnktPmN0eCA9IHJxLT5mZW5jZS5jb250ZXh0
OwpAQCAtNjgzLDEwICs2ODEsOSBAQCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3RfcXVldWUsCiAJ
CQkgICBfX2VudHJ5LT5mbGFncyA9IGZsYWdzOwogCQkJICAgKSwKIAotCSAgICBUUF9wcmludGso
ImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBmbGFn
cz0weCV4IiwKKwkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgY3R4PSVsbHUs
IHNlcW5vPSV1LCBmbGFncz0weCV4IiwKIAkJICAgICAgX19lbnRyeS0+ZGV2LCBfX2VudHJ5LT5j
bGFzcywgX19lbnRyeS0+aW5zdGFuY2UsCi0JCSAgICAgIF9fZW50cnktPmh3X2lkLCBfX2VudHJ5
LT5jdHgsIF9fZW50cnktPnNlcW5vLAotCQkgICAgICBfX2VudHJ5LT5mbGFncykKKwkJICAgICAg
X19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywgX19lbnRyeS0+ZmxhZ3MpCiApOwogCiBERUNM
QVJFX0VWRU5UX0NMQVNTKGk5MTVfcmVxdWVzdCwKQEAgLTY5NSw3ICs2OTIsNiBAQCBERUNMQVJF
X0VWRU5UX0NMQVNTKGk5MTVfcmVxdWVzdCwKIAogCSAgICBUUF9TVFJVQ1RfX2VudHJ5KAogCQkJ
ICAgICBfX2ZpZWxkKHUzMiwgZGV2KQotCQkJICAgICBfX2ZpZWxkKHUzMiwgaHdfaWQpCiAJCQkg
ICAgIF9fZmllbGQodTY0LCBjdHgpCiAJCQkgICAgIF9fZmllbGQodTE2LCBjbGFzcykKIAkJCSAg
ICAgX19maWVsZCh1MTYsIGluc3RhbmNlKQpAQCAtNzA0LDE2ICs3MDAsMTUgQEAgREVDTEFSRV9F
VkVOVF9DTEFTUyhpOTE1X3JlcXVlc3QsCiAKIAkgICAgVFBfZmFzdF9hc3NpZ24oCiAJCQkgICBf
X2VudHJ5LT5kZXYgPSBycS0+aTkxNS0+ZHJtLnByaW1hcnktPmluZGV4OwotCQkJICAgX19lbnRy
eS0+aHdfaWQgPSBycS0+Z2VtX2NvbnRleHQtPmh3X2lkOwogCQkJICAgX19lbnRyeS0+Y2xhc3Mg
PSBycS0+ZW5naW5lLT51YWJpX2NsYXNzOwogCQkJICAgX19lbnRyeS0+aW5zdGFuY2UgPSBycS0+
ZW5naW5lLT51YWJpX2luc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0gcnEtPmZlbmNlLmNv
bnRleHQ7CiAJCQkgICBfX2VudHJ5LT5zZXFubyA9IHJxLT5mZW5jZS5zZXFubzsKIAkJCSAgICks
CiAKLQkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgaHdfaWQ9JXUsIGN0eD0l
bGx1LCBzZXFubz0ldSIsCisJICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9JXU6JXUsIGN0
eD0lbGx1LCBzZXFubz0ldSIsCiAJCSAgICAgIF9fZW50cnktPmRldiwgX19lbnRyeS0+Y2xhc3Ms
IF9fZW50cnktPmluc3RhbmNlLAotCQkgICAgICBfX2VudHJ5LT5od19pZCwgX19lbnRyeS0+Y3R4
LCBfX2VudHJ5LT5zZXFubykKKwkJICAgICAgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubykK
ICk7CiAKIERFRklORV9FVkVOVChpOTE1X3JlcXVlc3QsIGk5MTVfcmVxdWVzdF9hZGQsCkBAIC03
MzgsNyArNzMzLDYgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X2luLAogCiAJICAgIFRQX1NU
UlVDVF9fZW50cnkoCiAJCQkgICAgIF9fZmllbGQodTMyLCBkZXYpCi0JCQkgICAgIF9fZmllbGQo
dTMyLCBod19pZCkKIAkJCSAgICAgX19maWVsZCh1NjQsIGN0eCkKIAkJCSAgICAgX19maWVsZCh1
MTYsIGNsYXNzKQogCQkJICAgICBfX2ZpZWxkKHUxNiwgaW5zdGFuY2UpCkBAIC03NDksNyArNzQz
LDYgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X2luLAogCiAJICAgIFRQX2Zhc3RfYXNzaWdu
KAogCQkJICAgX19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRleDsKLQkJ
CSAgIF9fZW50cnktPmh3X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsKIAkJCSAgIF9fZW50
cnktPmNsYXNzID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFzczsKIAkJCSAgIF9fZW50cnktPmluc3Rh
bmNlID0gcnEtPmVuZ2luZS0+dWFiaV9pbnN0YW5jZTsKIAkJCSAgIF9fZW50cnktPmN0eCA9IHJx
LT5mZW5jZS5jb250ZXh0OwpAQCAtNzU4LDkgKzc1MSw5IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVx
dWVzdF9pbiwKIAkJCSAgIF9fZW50cnktPnBvcnQgPSBwb3J0OwogCQkJICAgKSwKIAotCSAgICBU
UF9wcmludGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUsIHNlcW5v
PSV1LCBwcmlvPSV1LCBwb3J0PSV1IiwKKwkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0l
dToldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBwcmlvPSV1LCBwb3J0PSV1IiwKIAkJICAgICAgX19l
bnRyeS0+ZGV2LCBfX2VudHJ5LT5jbGFzcywgX19lbnRyeS0+aW5zdGFuY2UsCi0JCSAgICAgIF9f
ZW50cnktPmh3X2lkLCBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAorCQkgICAgICBfX2Vu
dHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAogCQkgICAgICBfX2VudHJ5LT5wcmlvLCBfX2VudHJ5
LT5wb3J0KQogKTsKIApAQCAtNzcwLDcgKzc2Myw2IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVz
dF9vdXQsCiAKIAkgICAgVFBfU1RSVUNUX19lbnRyeSgKIAkJCSAgICAgX19maWVsZCh1MzIsIGRl
dikKLQkJCSAgICAgX19maWVsZCh1MzIsIGh3X2lkKQogCQkJICAgICBfX2ZpZWxkKHU2NCwgY3R4
KQogCQkJICAgICBfX2ZpZWxkKHUxNiwgY2xhc3MpCiAJCQkgICAgIF9fZmllbGQodTE2LCBpbnN0
YW5jZSkKQEAgLTc4MCw3ICs3NzIsNiBAQCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3Rfb3V0LAog
CiAJICAgIFRQX2Zhc3RfYXNzaWduKAogCQkJICAgX19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRy
bS5wcmltYXJ5LT5pbmRleDsKLQkJCSAgIF9fZW50cnktPmh3X2lkID0gcnEtPmdlbV9jb250ZXh0
LT5od19pZDsKIAkJCSAgIF9fZW50cnktPmNsYXNzID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFzczsK
IAkJCSAgIF9fZW50cnktPmluc3RhbmNlID0gcnEtPmVuZ2luZS0+dWFiaV9pbnN0YW5jZTsKIAkJ
CSAgIF9fZW50cnktPmN0eCA9IHJxLT5mZW5jZS5jb250ZXh0OwpAQCAtNzg4LDEwICs3NzksOSBA
QCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3Rfb3V0LAogCQkJICAgX19lbnRyeS0+Y29tcGxldGVk
ID0gaTkxNV9yZXF1ZXN0X2NvbXBsZXRlZChycSk7CiAJCQkgICApLAogCi0JCSAgICBUUF9wcmlu
dGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBj
b21wbGV0ZWQ/PSV1IiwKKwkJICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9JXU6JXUsIGN0
eD0lbGx1LCBzZXFubz0ldSwgY29tcGxldGVkPz0ldSIsCiAJCQkgICAgICBfX2VudHJ5LT5kZXYs
IF9fZW50cnktPmNsYXNzLCBfX2VudHJ5LT5pbnN0YW5jZSwKLQkJCSAgICAgIF9fZW50cnktPmh3
X2lkLCBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAotCQkJICAgICAgX19lbnRyeS0+Y29t
cGxldGVkKQorCQkJICAgICAgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywgX19lbnRyeS0+
Y29tcGxldGVkKQogKTsKIAogI2Vsc2UKQEAgLTgyOSw3ICs4MTksNiBAQCBUUkFDRV9FVkVOVChp
OTE1X3JlcXVlc3Rfd2FpdF9iZWdpbiwKIAogCSAgICBUUF9TVFJVQ1RfX2VudHJ5KAogCQkJICAg
ICBfX2ZpZWxkKHUzMiwgZGV2KQotCQkJICAgICBfX2ZpZWxkKHUzMiwgaHdfaWQpCiAJCQkgICAg
IF9fZmllbGQodTY0LCBjdHgpCiAJCQkgICAgIF9fZmllbGQodTE2LCBjbGFzcykKIAkJCSAgICAg
X19maWVsZCh1MTYsIGluc3RhbmNlKQpAQCAtODQ1LDcgKzgzNCw2IEBAIFRSQUNFX0VWRU5UKGk5
MTVfcmVxdWVzdF93YWl0X2JlZ2luLAogCSAgICAgKi8KIAkgICAgVFBfZmFzdF9hc3NpZ24oCiAJ
CQkgICBfX2VudHJ5LT5kZXYgPSBycS0+aTkxNS0+ZHJtLnByaW1hcnktPmluZGV4OwotCQkJICAg
X19lbnRyeS0+aHdfaWQgPSBycS0+Z2VtX2NvbnRleHQtPmh3X2lkOwogCQkJICAgX19lbnRyeS0+
Y2xhc3MgPSBycS0+ZW5naW5lLT51YWJpX2NsYXNzOwogCQkJICAgX19lbnRyeS0+aW5zdGFuY2Ug
PSBycS0+ZW5naW5lLT51YWJpX2luc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0gcnEtPmZl
bmNlLmNvbnRleHQ7CkBAIC04NTMsOSArODQxLDkgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0
X3dhaXRfYmVnaW4sCiAJCQkgICBfX2VudHJ5LT5mbGFncyA9IGZsYWdzOwogCQkJICAgKSwKIAot
CSAgICBUUF9wcmludGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUs
IHNlcW5vPSV1LCBmbGFncz0weCV4IiwKKwkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0l
dToldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBmbGFncz0weCV4IiwKIAkJICAgICAgX19lbnRyeS0+
ZGV2LCBfX2VudHJ5LT5jbGFzcywgX19lbnRyeS0+aW5zdGFuY2UsCi0JCSAgICAgIF9fZW50cnkt
Pmh3X2lkLCBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAorCQkgICAgICBfX2VudHJ5LT5j
dHgsIF9fZW50cnktPnNlcW5vLAogCQkgICAgICBfX2VudHJ5LT5mbGFncykKICk7CiAKQEAgLTk1
OCwxOSArOTQ2LDE3IEBAIERFQ0xBUkVfRVZFTlRfQ0xBU1MoaTkxNV9jb250ZXh0LAogCVRQX1NU
UlVDVF9fZW50cnkoCiAJCQlfX2ZpZWxkKHUzMiwgZGV2KQogCQkJX19maWVsZChzdHJ1Y3QgaTkx
NV9nZW1fY29udGV4dCAqLCBjdHgpCi0JCQlfX2ZpZWxkKHUzMiwgaHdfaWQpCiAJCQlfX2ZpZWxk
KHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKiwgdm0pCiAJKSwKIAogCVRQX2Zhc3RfYXNzaWdu
KAogCQkJX19lbnRyeS0+ZGV2ID0gY3R4LT5pOTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7CiAJCQlf
X2VudHJ5LT5jdHggPSBjdHg7Ci0JCQlfX2VudHJ5LT5od19pZCA9IGN0eC0+aHdfaWQ7CiAJCQlf
X2VudHJ5LT52bSA9IGN0eC0+dm07CiAJKSwKIAotCVRQX3ByaW50aygiZGV2PSV1LCBjdHg9JXAs
IGN0eF92bT0lcCwgaHdfaWQ9JXUiLAotCQkgIF9fZW50cnktPmRldiwgX19lbnRyeS0+Y3R4LCBf
X2VudHJ5LT52bSwgX19lbnRyeS0+aHdfaWQpCisJVFBfcHJpbnRrKCJkZXY9JXUsIGN0eD0lcCwg
Y3R4X3ZtPSVwIiwKKwkJICBfX2VudHJ5LT5kZXYsIF9fZW50cnktPmN0eCwgX19lbnRyeS0+dm0p
CiApCiAKIERFRklORV9FVkVOVChpOTE1X2NvbnRleHQsIGk5MTVfY29udGV4dF9jcmVhdGUsCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3Qu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ldmljdC5jCmluZGV4
IDUyZDJkZjg0MzE0OC4uZjM5ZjAyODJlNzhjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYwpAQCAtNDkxLDggKzQ5MSw4IEBAIHN0YXRpYyBp
bnQgaWd0X2V2aWN0X2NvbnRleHRzKHZvaWQgKmFyZykKIAkJCWlmIChJU19FUlIocnEpKSB7CiAJ
CQkJLyogV2hlbiBmdWxsLCBmYWlsX2lmX2J1c3kgd2lsbCB0cmlnZ2VyIEVCVVNZICovCiAJCQkJ
aWYgKFBUUl9FUlIocnEpICE9IC1FQlVTWSkgewotCQkJCQlwcl9lcnIoIlVuZXhwZWN0ZWQgZXJy
b3IgZnJvbSByZXF1ZXN0IGFsbG9jIChjdHggaHcgaWQgJXUsIG9uICVzKTogJWRcbiIsCi0JCQkJ
CSAgICAgICBjdHgtPmh3X2lkLCBlbmdpbmUtPm5hbWUsCisJCQkJCXByX2VycigiVW5leHBlY3Rl
ZCBlcnJvciBmcm9tIHJlcXVlc3QgYWxsb2MgKG9uICVzKTogJWRcbiIsCisJCQkJCSAgICAgICBl
bmdpbmUtPm5hbWUsCiAJCQkJCSAgICAgICAoaW50KVBUUl9FUlIocnEpKTsKIAkJCQkJZXJyID0g
UFRSX0VSUihycSk7CiAJCQkJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2Vs
ZnRlc3RzL2k5MTVfdm1hLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV92
bWEuYwppbmRleCAxYzlkYjA4ZjdjMjguLmFjMWZmNTU4ZWI5MCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMKQEAgLTE3MCw3ICsxNzAsNyBAQCBzdGF0aWMgaW50
IGlndF92bWFfY3JlYXRlKHZvaWQgKmFyZykKIAkJfQogCiAJCW5jID0gMDsKLQkJZm9yX2VhY2hf
cHJpbWVfbnVtYmVyKG51bV9jdHgsIE1BWF9DT05URVhUX0hXX0lEKSB7CisJCWZvcl9lYWNoX3By
aW1lX251bWJlcihudW1fY3R4LCAyICogTlVNX0NPTlRFWFRfVEFHKSB7CiAJCQlmb3IgKDsgbmMg
PCBudW1fY3R4OyBuYysrKSB7CiAJCQkJY3R4ID0gbW9ja19jb250ZXh0KGk5MTUsICJtb2NrIik7
CiAJCQkJaWYgKCFjdHgpCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeA==

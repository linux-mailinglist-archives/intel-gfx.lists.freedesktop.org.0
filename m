Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B57812C3E34
	for <lists+intel-gfx@lfdr.de>; Wed, 25 Nov 2020 11:41:33 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2360A6E93E;
	Wed, 25 Nov 2020 10:40:39 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mblankhorst.nl (mblankhorst.nl [141.105.120.124])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 094256E8E5
 for <intel-gfx@lists.freedesktop.org>; Wed, 25 Nov 2020 10:40:32 +0000 (UTC)
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 25 Nov 2020 11:40:04 +0100
Message-Id: <20201125104011.606641-57-maarten.lankhorst@linux.intel.com>
X-Mailer: git-send-email 2.29.2.222.g5d2a92d10f8
In-Reply-To: <20201125104011.606641-1-maarten.lankhorst@linux.intel.com>
References: <20201125104011.606641-1-maarten.lankhorst@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v5 56/63] drm/i915/selftests: Prepare timeline
 tests for obj->mm.lock removal
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Thomas=20Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UgY2FuIG5vIGxvbmdlciBjYWxsIGludGVsX3RpbWVsaW5lX3BpbiB3aXRoIGEgbnVsbCBhcmd1
bWVudCwKc28gYWRkIGEgd3cgbG9vcCB0aGF0IGxvY2tzIHRoZSBiYWNraW5nIG9iamVjdC4KClNp
Z25lZC1vZmYtYnk6IE1hYXJ0ZW4gTGFua2hvcnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51eC5p
bnRlbC5jb20+ClJldmlld2VkLWJ5OiBUaG9tYXMgSGVsbHN0csO2bSA8dGhvbWFzLmhlbGxzdHJv
bUBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rf
dGltZWxpbmUuYyB8IDMwICsrKysrKysrKysrKysrKysrLS0tLQogMSBmaWxlIGNoYW5nZWQsIDI1
IGluc2VydGlvbnMoKyksIDUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfdGltZWxpbmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L3NlbGZ0ZXN0X3RpbWVsaW5lLmMKaW5kZXggYzhkNzU1MjUwMWE3Li4xNmNjN2JkM2U3NjAgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3RpbWVsaW5lLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfdGltZWxpbmUuYwpAQCAtMzcsNiAr
MzcsMjYgQEAgc3RhdGljIHVuc2lnbmVkIGxvbmcgaHdzcF9jYWNoZWxpbmUoc3RydWN0IGludGVs
X3RpbWVsaW5lICp0bCkKIAlyZXR1cm4gKGFkZHJlc3MgKyBvZmZzZXRfaW5fcGFnZSh0bC0+aHdz
cF9vZmZzZXQpKSAvIENBQ0hFTElORV9CWVRFUzsKIH0KIAorc3RhdGljIGludCBzZWxmdGVzdF90
bF9waW4oc3RydWN0IGludGVsX3RpbWVsaW5lICp0bCkKK3sKKwlzdHJ1Y3QgaTkxNV9nZW1fd3df
Y3R4IHd3OworCWludCBlcnI7CisKKwlpOTE1X2dlbV93d19jdHhfaW5pdCgmd3csIGZhbHNlKTsK
K3JldHJ5OgorCWVyciA9IGk5MTVfZ2VtX29iamVjdF9sb2NrKHRsLT5od3NwX2dndHQtPm9iaiwg
Jnd3KTsKKwlpZiAoIWVycikKKwkJZXJyID0gaW50ZWxfdGltZWxpbmVfcGluKHRsLCAmd3cpOwor
CisJaWYgKGVyciA9PSAtRURFQURMSykgeworCQllcnIgPSBpOTE1X2dlbV93d19jdHhfYmFja29m
Zigmd3cpOworCQlpZiAoIWVycikKKwkJCWdvdG8gcmV0cnk7CisJfQorCWk5MTVfZ2VtX3d3X2N0
eF9maW5pKCZ3dyk7CisJcmV0dXJuIGVycjsKK30KKwogI2RlZmluZSBDQUNIRUxJTkVTX1BFUl9Q
QUdFIChQQUdFX1NJWkUgLyBDQUNIRUxJTkVfQllURVMpCiAKIHN0cnVjdCBtb2NrX2h3c3BfZnJl
ZWxpc3QgewpAQCAtNzgsNyArOTgsNyBAQCBzdGF0aWMgaW50IF9fbW9ja19od3NwX3RpbWVsaW5l
KHN0cnVjdCBtb2NrX2h3c3BfZnJlZWxpc3QgKnN0YXRlLAogCQlpZiAoSVNfRVJSKHRsKSkKIAkJ
CXJldHVybiBQVFJfRVJSKHRsKTsKIAotCQllcnIgPSBpbnRlbF90aW1lbGluZV9waW4odGwsIE5V
TEwpOworCQllcnIgPSBzZWxmdGVzdF90bF9waW4odGwpOwogCQlpZiAoZXJyKSB7CiAJCQlpbnRl
bF90aW1lbGluZV9wdXQodGwpOwogCQkJcmV0dXJuIGVycjsKQEAgLTQ2NCw3ICs0ODQsNyBAQCBj
aGVja2VkX3RsX3dyaXRlKHN0cnVjdCBpbnRlbF90aW1lbGluZSAqdGwsIHN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZSwgdTMyCiAJc3RydWN0IGk5MTVfcmVxdWVzdCAqcnE7CiAJaW50IGVy
cjsKIAotCWVyciA9IGludGVsX3RpbWVsaW5lX3Bpbih0bCwgTlVMTCk7CisJZXJyID0gc2VsZnRl
c3RfdGxfcGluKHRsKTsKIAlpZiAoZXJyKSB7CiAJCXJxID0gRVJSX1BUUihlcnIpOwogCQlnb3Rv
IG91dDsKQEAgLTY2NCw3ICs2ODQsNyBAQCBzdGF0aWMgaW50IGxpdmVfaHdzcF93cmFwKHZvaWQg
KmFyZykKIAlpZiAoIXRsLT5oYXNfaW5pdGlhbF9icmVhZGNydW1iKQogCQlnb3RvIG91dF9mcmVl
OwogCi0JZXJyID0gaW50ZWxfdGltZWxpbmVfcGluKHRsLCBOVUxMKTsKKwllcnIgPSBzZWxmdGVz
dF90bF9waW4odGwpOwogCWlmIChlcnIpCiAJCWdvdG8gb3V0X2ZyZWU7CiAKQEAgLTgxMSwxMyAr
ODMxLDEzIEBAIHN0YXRpYyBpbnQgc2V0dXBfd2F0Y2hlcihzdHJ1Y3QgaHdzcF93YXRjaGVyICp3
LCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQogCWlmIChJU19FUlIob2JqKSkKIAkJcmV0dXJuIFBUUl9F
UlIob2JqKTsKIAotCXctPm1hcCA9IGk5MTVfZ2VtX29iamVjdF9waW5fbWFwKG9iaiwgSTkxNV9N
QVBfV0IpOworCXctPm1hcCA9IGk5MTVfZ2VtX29iamVjdF9waW5fbWFwX3VubG9ja2VkKG9iaiwg
STkxNV9NQVBfV0IpOwogCWlmIChJU19FUlIody0+bWFwKSkgewogCQlpOTE1X2dlbV9vYmplY3Rf
cHV0KG9iaik7CiAJCXJldHVybiBQVFJfRVJSKHctPm1hcCk7CiAJfQogCi0Jdm1hID0gaTkxNV9n
ZW1fb2JqZWN0X2dndHRfcGluX3d3KG9iaiwgTlVMTCwgTlVMTCwgMCwgMCwgMCk7CisJdm1hID0g
aTkxNV9nZW1fb2JqZWN0X2dndHRfcGluKG9iaiwgTlVMTCwgMCwgMCwgMCk7CiAJaWYgKElTX0VS
Uih2bWEpKSB7CiAJCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKIAkJcmV0dXJuIFBUUl9FUlIo
dm1hKTsKLS0gCjIuMjkuMi4yMjIuZzVkMmE5MmQxMGY4CgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9pbnRlbC1nZngK

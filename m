Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CFB8AD1AB9
	for <lists+intel-gfx@lfdr.de>; Wed,  9 Oct 2019 23:20:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B501D6E31A;
	Wed,  9 Oct 2019 21:20:02 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 30FB76E31A
 for <intel-gfx@lists.freedesktop.org>; Wed,  9 Oct 2019 21:20:01 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18783200-1500050 
 for multiple; Wed, 09 Oct 2019 22:19:53 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  9 Oct 2019 22:19:46 +0100
Message-Id: <20191009211947.6815-8-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191009211947.6815-1-chris@chris-wilson.co.uk>
References: <20191009211947.6815-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 8/9] drm/i915/perf: allow holding preemption on
 filtered ctx
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogTGlvbmVsIExhbmR3ZXJsaW4gPGxpb25lbC5nLmxhbmR3ZXJsaW5AaW50ZWwuY29tPgoK
V2Ugd291bGQgbGlrZSB0byBtYWtlIHVzZSBvZiBwZXJmIGluIFZ1bGthbi4gVGhlIFZ1bGthbiBB
UEkgaXMgbXVjaApsb3dlciBsZXZlbCB0aGFuIE9wZW5HTCwgd2l0aCBhcHBsaWNhdGlvbnMgZGly
ZWN0bHkgZXhwb3NlZCB0byB0aGUKY29uY2VwdCBvZiBjb21tYW5kIGJ1ZmZlcnMgKHByZXR0eSBt
dWNoIGVxdWl2YWxlbnQgdG8gb3VyIGJhdGNoCmJ1ZmZlcnMpLiBJbiBWdWxrYW4sIHF1ZXJpZXMg
YXJlIGFsd2F5cyBsaW1pdGVkIGluIHNjb3BlIHRvIGEgY29tbWFuZApidWZmZXIuIEluIE9wZW5H
TCwgdGhlIGxhY2sgb2YgY29tbWFuZCBidWZmZXIgY29uY2VwdCBtZWFudCB0aGF0CnF1ZXJpZXMn
IGR1cmF0aW9uIGNvdWxkIHNwYW4gbXVsdGlwbGUgY29tbWFuZCBidWZmZXJzLgoKV2l0aCB0aGF0
IHJlc3RyaWN0aW9uIGdvbmUgaW4gVnVsa2FuLCB3ZSB3b3VsZCBsaWtlIHRvIHNpbXBsaWZ5Cm1l
YXN1cmluZyBwZXJmb3JtYW5jZSBqdXN0IGJ5IG1lYXN1cmluZyB0aGUgZGVsdGFzIGJldHdlZW4g
dGhlIGNvdW50ZXIKc25hcHNob3RzIHdyaXR0ZW4gYnkgMiBNSV9SRUNPUkRfUEVSRl9DT1VOVCBj
b21tYW5kcywgcmF0aGVyIHRoYW4gdGhlCm1vcmUgY29tcGxleCBzY2hlbWUgd2UgY3VycmVudGx5
IGhhdmUgaW4gdGhlIEdMIGRyaXZlciwgdXNpbmcgMgpNSV9SRUNPUkRfUEVSRl9DT1VOVCBjb21t
YW5kcyBhbmQgZG9pbmcgc29tZSBwb3N0IHByb2Nlc3Npbmcgb24gdGhlCnN0cmVhbSBvZiBPQSBy
ZXBvcnRzLCBjb21pbmcgZnJvbSB0aGUgZ2xvYmFsIE9BIGJ1ZmZlciwgdG8gcmVtb3ZlIGFueQp1
bnJlbGF0ZWQgZGVsdGFzIGluIGJldHdlZW4gdGhlIDIgTUlfUkVDT1JEX1BFUkZfQ09VTlQuCgpE
aXNhYmxpbmcgcHJlZW1wdGlvbiBvbmx5IGFwcGx5IHRvIGEgc2luZ2xlIGNvbnRleHQgd2l0aCB3
aGljaCB3YW50IHRvCnF1ZXJ5IHBlcmZvcm1hbmNlIGNvdW50ZXJzIGZvciBhbmQgaXMgY29uc2lk
ZXJlZCBhIHByaXZpbGVnZWQKb3BlcmF0aW9uLCBieSBkZWZhdWx0IHByb3RlY3RlZCBieSBDQVBf
U1lTX0FETUlOLiBJdCBpcyBwb3NzaWJsZSB0bwplbmFibGUgaXQgZm9yIGEgbm9ybWFsIHVzZXIg
YnkgZGlzYWJsaW5nIHRoZSBwYXJhbm9pZCBzdHJlYW0gc2V0dGluZy4KCnYyOiBTdG9yZSBwcmVl
bXB0aW9uIHNldHRpbmcgaW4gaW50ZWxfY29udGV4dCAoQ2hyaXMpCgp2MzogVXNlIHByaW9yaXRp
ZXMgdG8gYXZvaWQgcHJlZW1wdGlvbiByYXRoZXIgdGhhbiB0aGUgSFcgbWVjaGFuaXNtCgp2NDog
SnVzdCBtb2RpZnkgdGhlIHBvcnQgcHJpb3JpdHkgcmVwb3J0aW5nIGZ1bmN0aW9uCgp2NTogQWRk
IG5vcHJlZW1wdCBmbGFnIG9uIGdlbSBjb250ZXh0IGFuZCBhbHdheXMgZmxhZyByZXF1ZXN0cwog
ICAgYXBwcm9wcmlhdGVseSwgcmVnYXJsZXNzIG9mIE9BIHJlY29uZmlndXJhdGlvbi4KClNpZ25l
ZC1vZmYtYnk6IExpb25lbCBMYW5kd2VybGluIDxsaW9uZWwuZy5sYW5kd2VybGluQGludGVsLmNv
bT4KUmV2aWV3ZWQtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgot
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmggICB8IDE4ICsr
KysrKysrKysKIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaCB8
ICAxICsKIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYyAgICB8ICAz
ICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyAgICAgICAgICAgICAgfCAzNCAr
KysrKysrKysrKysrKysrKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmZfdHlwZXMu
aCAgICAgICAgfCAgOCArKysrKwogaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oICAgICAgICAg
ICAgICAgICAgIHwgMTEgKysrKysrCiA2IGZpbGVzIGNoYW5nZWQsIDcyIGluc2VydGlvbnMoKyks
IDMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2NvbnRleHQuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250
ZXh0LmgKaW5kZXggOTIzNDU4NjgzMGQxLi5jZmU4MDU5MGYwZWQgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmgKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaApAQCAtMTE0LDYgKzExNCwyNCBAQCBpOTE1
X2dlbV9jb250ZXh0X2NsZWFyX3VzZXJfZW5naW5lcyhzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAq
Y3R4KQogCWNsZWFyX2JpdChDT05URVhUX1VTRVJfRU5HSU5FUywgJmN0eC0+ZmxhZ3MpOwogfQog
CitzdGF0aWMgaW5saW5lIGJvb2wKK2k5MTVfZ2VtX2NvbnRleHRfbm9wcmVlbXB0KGNvbnN0IHN0
cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCit7CisJcmV0dXJuIHRlc3RfYml0KENPTlRFWFRf
Tk9QUkVFTVBULCAmY3R4LT5mbGFncyk7Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9pZAoraTkxNV9n
ZW1fY29udGV4dF9zZXRfbm9wcmVlbXB0KHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCit7
CisJc2V0X2JpdChDT05URVhUX05PUFJFRU1QVCwgJmN0eC0+ZmxhZ3MpOworfQorCitzdGF0aWMg
aW5saW5lIHZvaWQKK2k5MTVfZ2VtX2NvbnRleHRfY2xlYXJfbm9wcmVlbXB0KHN0cnVjdCBpOTE1
X2dlbV9jb250ZXh0ICpjdHgpCit7CisJY2xlYXJfYml0KENPTlRFWFRfTk9QUkVFTVBULCAmY3R4
LT5mbGFncyk7Cit9CisKIHN0YXRpYyBpbmxpbmUgYm9vbCBpOTE1X2dlbV9jb250ZXh0X2lzX2tl
cm5lbChzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KQogewogCXJldHVybiAhY3R4LT5maWxl
X3ByaXY7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29u
dGV4dF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRf
dHlwZXMuaAppbmRleCBhYjhlMTM2N2RmYzguLmZlOTdiOGJhNGZkYSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dF90eXBlcy5oCkBAIC0xNDYsNiAr
MTQ2LDcgQEAgc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgewogI2RlZmluZSBDT05URVhUX0NMT1NF
RAkJCTEKICNkZWZpbmUgQ09OVEVYVF9GT1JDRV9TSU5HTEVfU1VCTUlTU0lPTgkyCiAjZGVmaW5l
IENPTlRFWFRfVVNFUl9FTkdJTkVTCQkzCisjZGVmaW5lIENPTlRFWFRfTk9QUkVFTVBUCQk0CiAK
IAlzdHJ1Y3QgbXV0ZXggbXV0ZXg7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fZXhlY2J1ZmZlci5jCmluZGV4IDk4ODE2YzM1ZmZjMy4uZTk2OTAxODg4MzIzIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMKQEAgLTIw
NzcsNiArMjA3Nyw5IEBAIHN0YXRpYyBpbnQgZWJfc3VibWl0KHN0cnVjdCBpOTE1X2V4ZWNidWZm
ZXIgKmViKQogCWlmIChlcnIpCiAJCXJldHVybiBlcnI7CiAKKwlpZiAoaTkxNV9nZW1fY29udGV4
dF9ub3ByZWVtcHQoZWItPmdlbV9jb250ZXh0KSkKKwkJZWItPnJlcXVlc3QtPmZsYWdzIHw9IEk5
MTVfUkVRVUVTVF9OT1BSRUVNUFQ7CisKIAlyZXR1cm4gMDsKIH0KIApkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X3BlcmYuYwppbmRleCAzYjc3ZGI4OTk1ZjMuLjEzNmVhMDk4MGFmYSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wZXJmLmMKQEAgLTM0NCw2ICszNDQsOCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGk5MTVf
b2FfZm9ybWF0IGdlbjhfcGx1c19vYV9mb3JtYXRzW0k5MTVfT0FfRk9STUFUX01BWF0gPSB7CiAg
KiBzdHJ1Y3QgcGVyZl9vcGVuX3Byb3BlcnRpZXMgLSBmb3IgdmFsaWRhdGVkIHByb3BlcnRpZXMg
Z2l2ZW4gdG8gb3BlbiBhIHN0cmVhbQogICogQHNhbXBsZV9mbGFnczogYERSTV9JOTE1X1BFUkZf
UFJPUF9TQU1QTEVfKmAgcHJvcGVydGllcyBhcmUgdHJhY2tlZCBhcyBmbGFncwogICogQHNpbmds
ZV9jb250ZXh0OiBXaGV0aGVyIGEgc2luZ2xlIG9yIGFsbCBncHUgY29udGV4dHMgc2hvdWxkIGJl
IG1vbml0b3JlZAorICogQGhvbGRfcHJlZW1wdGlvbjogV2hldGhlciB0aGUgcHJlZW1wdGlvbiBp
cyBkaXNhYmxlZCBmb3IgdGhlIGZpbHRlcmVkCisgKiAgICAgICAgICAgICAgICAgICBjb250ZXh0
CiAgKiBAY3R4X2hhbmRsZTogQSBnZW0gY3R4IGhhbmRsZSBmb3IgdXNlIHdpdGggQHNpbmdsZV9j
b250ZXh0CiAgKiBAbWV0cmljc19zZXQ6IEFuIElEIGZvciBhbiBPQSB1bml0IG1ldHJpYyBzZXQg
YWR2ZXJ0aXNlZCB2aWEgc3lzZnMKICAqIEBvYV9mb3JtYXQ6IEFuIE9BIHVuaXQgSFcgcmVwb3J0
IGZvcm1hdApAQCAtMzU5LDYgKzM2MSw3IEBAIHN0cnVjdCBwZXJmX29wZW5fcHJvcGVydGllcyB7
CiAJdTMyIHNhbXBsZV9mbGFnczsKIAogCXU2NCBzaW5nbGVfY29udGV4dDoxOworCXU2NCBob2xk
X3ByZWVtcHRpb246MTsKIAl1NjQgY3R4X2hhbmRsZTsKIAogCS8qIE9BIHNhbXBsaW5nIHN0YXRl
ICovCkBAIC0yNTA4LDYgKzI1MTEsOCBAQCBzdGF0aWMgaW50IGk5MTVfb2Ffc3RyZWFtX2luaXQo
c3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKIAlpZiAoV0FSTl9PTihzdHJlYW0tPm9h
X2J1ZmZlci5mb3JtYXRfc2l6ZSA9PSAwKSkKIAkJcmV0dXJuIC1FSU5WQUw7CiAKKwlzdHJlYW0t
PmhvbGRfcHJlZW1wdGlvbiA9IHByb3BzLT5ob2xkX3ByZWVtcHRpb247CisKIAlzdHJlYW0tPm9h
X2J1ZmZlci5mb3JtYXQgPQogCQlwZXJmLT5vYV9mb3JtYXRzW3Byb3BzLT5vYV9mb3JtYXRdLmZv
cm1hdDsKIApAQCAtMjgyOCw2ICsyODMzLDkgQEAgc3RhdGljIHZvaWQgaTkxNV9wZXJmX2VuYWJs
ZV9sb2NrZWQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAogCWlmIChzdHJlYW0t
Pm9wcy0+ZW5hYmxlKQogCQlzdHJlYW0tPm9wcy0+ZW5hYmxlKHN0cmVhbSk7CisKKwlpZiAoc3Ry
ZWFtLT5ob2xkX3ByZWVtcHRpb24pCisJCWk5MTVfZ2VtX2NvbnRleHRfc2V0X25vcHJlZW1wdChz
dHJlYW0tPmN0eCk7CiB9CiAKIC8qKgpAQCAtMjg1Miw2ICsyODYwLDkgQEAgc3RhdGljIHZvaWQg
aTkxNV9wZXJmX2Rpc2FibGVfbG9ja2VkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0p
CiAJLyogQWxsb3cgc3RyZWFtLT5vcHMtPmRpc2FibGUoKSB0byByZWZlciB0byB0aGlzICovCiAJ
c3RyZWFtLT5lbmFibGVkID0gZmFsc2U7CiAKKwlpZiAoc3RyZWFtLT5ob2xkX3ByZWVtcHRpb24p
CisJCWk5MTVfZ2VtX2NvbnRleHRfY2xlYXJfbm9wcmVlbXB0KHN0cmVhbS0+Y3R4KTsKKwogCWlm
IChzdHJlYW0tPm9wcy0+ZGlzYWJsZSkKIAkJc3RyZWFtLT5vcHMtPmRpc2FibGUoc3RyZWFtKTsK
IH0KQEAgLTMwNDksNiArMzA2MCwxNSBAQCBpOTE1X3BlcmZfb3Blbl9pb2N0bF9sb2NrZWQoc3Ry
dWN0IGk5MTVfcGVyZiAqcGVyZiwKIAkJfQogCX0KIAorCWlmIChwcm9wcy0+aG9sZF9wcmVlbXB0
aW9uKSB7CisJCWlmICghcHJvcHMtPnNpbmdsZV9jb250ZXh0KSB7CisJCQlEUk1fREVCVUcoInBy
ZWVtcHRpb24gZGlzYWJsZSB3aXRoIG5vIGNvbnRleHRcbiIpOworCQkJcmV0ID0gLUVJTlZBTDsK
KwkJCWdvdG8gZXJyOworCQl9CisJCXByaXZpbGVnZWRfb3AgPSB0cnVlOworCX0KKwogCS8qCiAJ
ICogT24gSGFzd2VsbCB0aGUgT0EgdW5pdCBzdXBwb3J0cyBjbG9jayBnYXRpbmcgb2ZmIGZvciBh
IHNwZWNpZmljCiAJICogY29udGV4dCBhbmQgaW4gdGhpcyBtb2RlIHRoZXJlJ3Mgbm8gdmlzaWJp
bGl0eSBvZiBtZXRyaWNzIGZvciB0aGUKQEAgLTMwNjMsNyArMzA4Myw3IEBAIGk5MTVfcGVyZl9v
cGVuX2lvY3RsX2xvY2tlZChzdHJ1Y3QgaTkxNV9wZXJmICpwZXJmLAogCSAqIE1JX1JFUE9SVF9Q
RVJGX0NPVU5UIGNvbW1hbmRzIGFuZCBzbyBjb25zaWRlciBpdCBhIHByaXZpbGVnZWQgb3AgdG8K
IAkgKiBlbmFibGUgdGhlIE9BIHVuaXQgYnkgZGVmYXVsdC4KIAkgKi8KLQlpZiAoSVNfSEFTV0VM
TChwZXJmLT5pOTE1KSAmJiBzcGVjaWZpY19jdHgpCisJaWYgKElTX0hBU1dFTEwocGVyZi0+aTkx
NSkgJiYgc3BlY2lmaWNfY3R4ICYmICFwcm9wcy0+aG9sZF9wcmVlbXB0aW9uKQogCQlwcml2aWxl
Z2VkX29wID0gZmFsc2U7CiAKIAkvKiBTaW1pbGFyIHRvIHBlcmYncyBrZXJuZWwucGVyZl9wYXJh
bm9pZF9jcHUgc3lzY3RsIG9wdGlvbgpAQCAtMzA3Myw3ICszMDkzLDcgQEAgaTkxNV9wZXJmX29w
ZW5faW9jdGxfbG9ja2VkKHN0cnVjdCBpOTE1X3BlcmYgKnBlcmYsCiAJICovCiAJaWYgKHByaXZp
bGVnZWRfb3AgJiYKIAkgICAgaTkxNV9wZXJmX3N0cmVhbV9wYXJhbm9pZCAmJiAhY2FwYWJsZShD
QVBfU1lTX0FETUlOKSkgewotCQlEUk1fREVCVUcoIkluc3VmZmljaWVudCBwcml2aWxlZ2VzIHRv
IG9wZW4gc3lzdGVtLXdpZGUgaTkxNSBwZXJmIHN0cmVhbVxuIik7CisJCURSTV9ERUJVRygiSW5z
dWZmaWNpZW50IHByaXZpbGVnZXMgdG8gb3BlbiBpOTE1IHBlcmYgc3RyZWFtXG4iKTsKIAkJcmV0
ID0gLUVBQ0NFUzsKIAkJZ290byBlcnJfY3R4OwogCX0KQEAgLTMyNzYsNiArMzI5Niw5IEBAIHN0
YXRpYyBpbnQgcmVhZF9wcm9wZXJ0aWVzX3VubG9ja2VkKHN0cnVjdCBpOTE1X3BlcmYgKnBlcmYs
CiAJCQlwcm9wcy0+b2FfcGVyaW9kaWMgPSB0cnVlOwogCQkJcHJvcHMtPm9hX3BlcmlvZF9leHBv
bmVudCA9IHZhbHVlOwogCQkJYnJlYWs7CisJCWNhc2UgRFJNX0k5MTVfUEVSRl9QUk9QX0hPTERf
UFJFRU1QVElPTjoKKwkJCXByb3BzLT5ob2xkX3ByZWVtcHRpb24gPSAhIXZhbHVlOworCQkJYnJl
YWs7CiAJCWNhc2UgRFJNX0k5MTVfUEVSRl9QUk9QX01BWDoKIAkJCU1JU1NJTkdfQ0FTRShpZCk7
CiAJCQlyZXR1cm4gLUVJTlZBTDsKQEAgLTQwNDgsOCArNDA3MSwxMyBAQCBpbnQgaTkxNV9wZXJm
X2lvY3RsX3ZlcnNpb24odm9pZCkKIAkgKgogCSAqIDI6IEFkZGVkIHJ1bnRpbWUgbW9kaWZpY2F0
aW9uIG9mIE9BIGNvbmZpZy4KIAkgKiAgIEk5MTVfUEVSRl9JT0NUTF9DT05GSUcKKwkgKgorCSAq
IDM6IEFkZCBEUk1fSTkxNV9QRVJGX1BST1BfSE9MRF9QUkVFTVBUSU9OIHBhcmFtZXRlciB0byBo
b2xkCisJICogICAgcHJlZW1wdGlvbiBvbiBhIHBhcnRpY3VsYXIgY29udGV4dCBzbyB0aGF0IHBl
cmZvcm1hbmNlIGRhdGEgaXMKKwkgKiAgICBhY2Nlc3NpYmxlIGZyb20gYSBkZWx0YSBvZiBNSV9S
UEMgcmVwb3J0cyB3aXRob3V0IGxvb2tpbmcgYXQgdGhlCisJICogICAgT0EgYnVmZmVyLgogCSAq
LwotCXJldHVybiAyOworCXJldHVybiAzOwogfQogCiAjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJN
X0k5MTVfU0VMRlRFU1QpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Bl
cmZfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZl90eXBlcy5oCmluZGV4
IGViNTA2NTAyM2M5My4uZjgzZjFiMzIzMTI3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X3BlcmZfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Bl
cmZfdHlwZXMuaApAQCAtMTc2LDYgKzE3NiwxNCBAQCBzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSB7
CiAJICovCiAJYm9vbCBlbmFibGVkOwogCisJLyo4CisJICogQGhvbGRfcHJlZW1wdGlvbjogV2hl
dGhlciBwcmVlbXB0aW9uIGlzIHB1dCBvbiBob2xkIGZvciBjb21tYW5kCisJICogc3VibWlzc2lv
bnMgZG9uZSBvbiB0aGUgQGN0eC4gVGhpcyBpcyB1c2VmdWwgZm9yIHNvbWUgZHJpdmVycyB0aGF0
CisJICogY2Fubm90IGVhc2lseSBwb3N0IHByb2Nlc3MgdGhlIE9BIGJ1ZmZlciBjb250ZXh0IHRv
IHN1YnRyYWN0IGRlbHRhCisJICogb2YgcGVyZm9ybWFuY2UgY291bnRlcnMgbm90IGFzc29jaWF0
ZWQgd2l0aCBAY3R4LgorCSAqLworCWJvb2wgaG9sZF9wcmVlbXB0aW9uOworCiAJLyoqCiAJICog
QG9wczogVGhlIGNhbGxiYWNrcyBwcm92aWRpbmcgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoaXMg
c3BlY2lmaWMKIAkgKiB0eXBlIG9mIGNvbmZpZ3VyZWQgc3RyZWFtLgpkaWZmIC0tZ2l0IGEvaW5j
bHVkZS91YXBpL2RybS9pOTE1X2RybS5oIGIvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCmlu
ZGV4IDVlNjZmN2M2MDI2MS4uOWY5ZjA1YTU0ZTg2IDEwMDY0NAotLS0gYS9pbmNsdWRlL3VhcGkv
ZHJtL2k5MTVfZHJtLmgKKysrIGIvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCkBAIC0xODkw
LDYgKzE4OTAsMTcgQEAgZW51bSBkcm1faTkxNV9wZXJmX3Byb3BlcnR5X2lkIHsKIAkgKi8KIAlE
Uk1fSTkxNV9QRVJGX1BST1BfT0FfRVhQT05FTlQsCiAKKwkvKioKKwkgKiBTcGVjaWZ5aW5nIHRo
aXMgcHJvcGVydHkgaXMgb25seSB2YWxpZCB3aGVuIHNwZWNpZnkgYSBjb250ZXh0IHRvCisJICog
ZmlsdGVyIHdpdGggRFJNX0k5MTVfUEVSRl9QUk9QX0NUWF9IQU5ETEUuIFNwZWNpZnlpbmcgdGhp
cyBwcm9wZXJ0eQorCSAqIHdpbGwgaG9sZCBwcmVlbXB0aW9uIG9mIHRoZSBwYXJ0aWN1bGFyIGNv
bnRleHQgd2Ugd2FudCB0byBnYXRoZXIKKwkgKiBwZXJmb3JtYW5jZSBkYXRhIGFib3V0LiBUaGUg
ZXhlY2J1ZjIgc3VibWlzc2lvbnMgbXVzdCBpbmNsdWRlIGEKKwkgKiBkcm1faTkxNV9nZW1fZXhl
Y2J1ZmZlcl9leHRfcGVyZiBwYXJhbWV0ZXIgZm9yIHRoaXMgdG8gYXBwbHkuCisJICoKKwkgKiBU
aGlzIHByb3BlcnR5IGlzIGF2YWlsYWJsZSBpbiBwZXJmIHJldmlzaW9uIDMuCisJICovCisJRFJN
X0k5MTVfUEVSRl9QUk9QX0hPTERfUFJFRU1QVElPTiwKKwogCURSTV9JOTE1X1BFUkZfUFJPUF9N
QVggLyogbm9uLUFCSSAqLwogfTsKIAotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9pbnRlbC1nZng=

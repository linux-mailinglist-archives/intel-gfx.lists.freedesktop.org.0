Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5DEB475BC0
	for <lists+intel-gfx@lfdr.de>; Fri, 26 Jul 2019 01:57:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2549F6E83F;
	Thu, 25 Jul 2019 23:57:06 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2C4DF6E839
 for <intel-gfx@lists.freedesktop.org>; Thu, 25 Jul 2019 23:57:02 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 25 Jul 2019 16:57:01 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,308,1559545200"; d="scan'208";a="178178562"
Received: from ldmartin-desk1.jf.intel.com (HELO ldmartin-desk1.intel.com)
 ([10.24.9.40])
 by FMSMGA003.fm.intel.com with ESMTP; 25 Jul 2019 16:56:55 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 25 Jul 2019 16:56:42 -0700
Message-Id: <20190725235643.6870-5-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190725235643.6870-1-lucas.demarchi@intel.com>
References: <20190725235643.6870-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 4/5] drm/i915/tgl: start adding the DKL PLLs to
 use on TC ports
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIGRpc2FibGUgZnVuY3Rpb24gY2FuIGJlIHRoZSBzYW1lIGFzIGZvciBNRyBwaHkgc2luY2Ug
dGhlIHNhbWUKcmVnaXN0ZXJzIGFyZSB1c2VkLiBUaGUgb3RoZXJzIGFyZSBkaWZmZXJlbnQgYXMg
cmVnaXN0ZXJzIGNoYW5nZSAtCnByZXBhcmUgZm9yIHRoYXQgdXNpbmcgYW4gZW1wdHkgZGtsX3Bs
bF93cml0ZSgpIHRvIGJlIGltcGxlbWVudGVkIGxhdGVyLgoKU2lnbmVkLW9mZi1ieTogTHVjYXMg
RGUgTWFyY2hpIDxsdWNhcy5kZW1hcmNoaUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kcGxsX21nci5jIHwgOTggKysrKysrKysrKysrKysrKysrLQog
MSBmaWxlIGNoYW5nZWQsIDk3IGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwbGxfbWdyLmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwbGxfbWdyLmMKaW5kZXggM2ExMzQ4ZWE2
NzE0Li4wNDliNjhlMGM2MWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZHBsbF9tZ3IuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2RwbGxfbWdyLmMKQEAgLTMxNTgsNiArMzE1OCw2MCBAQCBzdGF0aWMgYm9vbCBtZ19wbGxf
Z2V0X2h3X3N0YXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAlyZXR1cm4g
cmV0OwogfQogCitzdGF0aWMgYm9vbCBka2xfcGxsX2dldF9od19zdGF0ZShzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCisJCQkJIHN0cnVjdCBpbnRlbF9zaGFyZWRfZHBsbCAqcGxs
LAorCQkJCSBzdHJ1Y3QgaW50ZWxfZHBsbF9od19zdGF0ZSAqaHdfc3RhdGUpCit7CisJY29uc3Qg
ZW51bSBpbnRlbF9kcGxsX2lkIGlkID0gcGxsLT5pbmZvLT5pZDsKKwllbnVtIHRjX3BvcnQgdGNf
cG9ydCA9IGljbF9wbGxfaWRfdG9fdGNfcG9ydChpZCk7CisJaW50ZWxfd2FrZXJlZl90IHdha2Vy
ZWY7CisJYm9vbCByZXQgPSBmYWxzZTsKKwl1MzIgdmFsOworCisJd2FrZXJlZiA9IGludGVsX2Rp
c3BsYXlfcG93ZXJfZ2V0X2lmX2VuYWJsZWQoZGV2X3ByaXYsCisJCQkJCQkgICAgIFBPV0VSX0RP
TUFJTl9ESVNQTEFZX0NPUkUpOworCWlmICghd2FrZXJlZikKKwkJcmV0dXJuIGZhbHNlOworCisJ
dmFsID0gSTkxNV9SRUFEKE1HX1BMTF9FTkFCTEUodGNfcG9ydCkpOworCWlmICghKHZhbCAmIFBM
TF9FTkFCTEUpKQorCQlnb3RvIG91dDsKKworCS8qCisJICogQWxsIHJlZ2lzdGVycyByZWFkIGhl
cmUgaGF2ZSB0aGUgc2FtZSBISVBfSU5ERVhfUkVHIGV2ZW4gdGhvdWdoCisJICogdGhleSBhcmUg
b24gZGlmZmVyZW50IGJ1aWxkaW5nIGJsb2NrcworCSAqLworCUk5MTVfV1JJVEUoSElQX0lOREVY
X1JFRyh0Y19wb3J0KSwgMHgyKTsKKworCWh3X3N0YXRlLT5tZ19yZWZjbGtpbl9jdGwgPSBJOTE1
X1JFQUQoREtMX1JFRkNMS0lOX0NUTCh0Y19wb3J0KSk7CisJaHdfc3RhdGUtPm1nX3JlZmNsa2lu
X2N0bCAmPSBNR19SRUZDTEtJTl9DVExfT0RfMl9NVVhfTUFTSzsKKworCWh3X3N0YXRlLT5tZ19j
bGt0b3AyX2hzY2xrY3RsID0KKwkJSTkxNV9SRUFEKERLTF9DTEtUT1AyX0hTQ0xLQ1RMKHRjX3Bv
cnQpKTsKKwlod19zdGF0ZS0+bWdfY2xrdG9wMl9oc2Nsa2N0bCAmPQorCQlNR19DTEtUT1AyX0hT
Q0xLQ1RMX1RMSU5FRFJWX0NMS1NFTF9NQVNLIHwKKwkJTUdfQ0xLVE9QMl9IU0NMS0NUTF9DT1JF
X0lOUFVUU0VMX01BU0sgfAorCQlNR19DTEtUT1AyX0hTQ0xLQ1RMX0hTRElWX1JBVElPX01BU0sg
fAorCQlNR19DTEtUT1AyX0hTQ0xLQ1RMX0RTRElWX1JBVElPX01BU0s7CisKKwlod19zdGF0ZS0+
bWdfY2xrdG9wMl9jb3JlY2xrY3RsMSA9CisJCUk5MTVfUkVBRChES0xfQ0xLVE9QMl9DT1JFQ0xL
Q1RMMSh0Y19wb3J0KSk7CisJaHdfc3RhdGUtPm1nX2Nsa3RvcDJfY29yZWNsa2N0bDEgJj0KKwkJ
TUdfQ0xLVE9QMl9DT1JFQ0xLQ1RMMV9BX0RJVlJBVElPX01BU0s7CisKKwlod19zdGF0ZS0+bWdf
cGxsX2RpdjAgPSBJOTE1X1JFQUQoREtMX1BMTF9ESVYwKHRjX3BvcnQpKTsKKwlod19zdGF0ZS0+
bWdfcGxsX2RpdjEgPSBJOTE1X1JFQUQoREtMX1BMTF9ESVYxKHRjX3BvcnQpKTsKKwlod19zdGF0
ZS0+bWdfcGxsX3NzYyA9IEk5MTVfUkVBRChES0xfUExMX1NTQyh0Y19wb3J0KSk7CisJaHdfc3Rh
dGUtPm1nX3BsbF9iaWFzID0gSTkxNV9SRUFEKERLTF9QTExfQklBUyh0Y19wb3J0KSk7CisJaHdf
c3RhdGUtPm1nX3BsbF90ZGNfY29sZHN0X2JpYXMgPQorCQlJOTE1X1JFQUQoREtMX1BMTF9URENf
Q09MRFNUX0JJQVModGNfcG9ydCkpOworCisJcmV0ID0gdHJ1ZTsKK291dDoKKwlpbnRlbF9kaXNw
bGF5X3Bvd2VyX3B1dChkZXZfcHJpdiwgUE9XRVJfRE9NQUlOX0RJU1BMQVlfQ09SRSwgd2FrZXJl
Zik7CisJcmV0dXJuIHJldDsKK30KKwogc3RhdGljIGJvb2wgaWNsX3BsbF9nZXRfaHdfc3RhdGUo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJCSBzdHJ1Y3QgaW50ZWxfc2hh
cmVkX2RwbGwgKnBsbCwKIAkJCQkgc3RydWN0IGludGVsX2RwbGxfaHdfc3RhdGUgKmh3X3N0YXRl
LApAQCAtMzI5Miw2ICszMzQ2LDEyIEBAIHN0YXRpYyB2b2lkIGljbF9tZ19wbGxfd3JpdGUoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCVBPU1RJTkdfUkVBRChNR19QTExfVERD
X0NPTERTVF9CSUFTKHRjX3BvcnQpKTsKIH0KIAorc3RhdGljIHZvaWQgZGtsX3BsbF93cml0ZShz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCisJCQkgIHN0cnVjdCBpbnRlbF9zaGFy
ZWRfZHBsbCAqcGxsKQoreworCS8qIFRPRE8gKi8KK30KKwogc3RhdGljIHZvaWQgaWNsX3BsbF9w
b3dlcl9lbmFibGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJCSBzdHJ1
Y3QgaW50ZWxfc2hhcmVkX2RwbGwgKnBsbCwKIAkJCQkgaTkxNV9yZWdfdCBlbmFibGVfcmVnKQpA
QCAtMzM5OSw2ICszNDU5LDMxIEBAIHN0YXRpYyB2b2lkIG1nX3BsbF9lbmFibGUoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCS8qIERWRlMgcG9zdCBzZXF1ZW5jZSB3b3VsZCBi
ZSBoZXJlLiBTZWUgdGhlIGNvbW1lbnQgYWJvdmUuICovCiB9CiAKK3N0YXRpYyB2b2lkIGRrbF9w
bGxfZW5hYmxlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKKwkJCSAgIHN0cnVj
dCBpbnRlbF9zaGFyZWRfZHBsbCAqcGxsKQoreworCS8qCisJICogRnJvbSBzcGVjOiBNRyByZWdp
c3RlciBpbnN0YW5jZXMgYXJlIGJlaW5nIHVzZWQgZm9yIFR5cGVDIGluIGdlbmVyYWwuIFRoZQor
CSAqIHNhbWUgTUcgcmVnaXN0ZXIgaW5zdGFuY2VzIHNob3VsZCBiZSBwcm9ncmFtbWVkIGZvciBE
ZWtlbCBQTExzIGFzIHdlbGwKKwkgKi8KKwlpOTE1X3JlZ190IGVuYWJsZV9yZWcgPQorCQlNR19Q
TExfRU5BQkxFKGljbF9wbGxfaWRfdG9fdGNfcG9ydChwbGwtPmluZm8tPmlkKSk7CisKKwlpY2xf
cGxsX3Bvd2VyX2VuYWJsZShkZXZfcHJpdiwgcGxsLCBlbmFibGVfcmVnKTsKKworCWRrbF9wbGxf
d3JpdGUoZGV2X3ByaXYsIHBsbCk7CisKKwkvKgorCSAqIERWRlMgcHJlIHNlcXVlbmNlIHdvdWxk
IGJlIGhlcmUsIGJ1dCBpbiBvdXIgZHJpdmVyIHRoZSBjZGNsayBjb2RlCisJICogcGF0aHMgc2hv
dWxkIGFscmVhZHkgYmUgc2V0dGluZyB0aGUgYXBwcm9wcmlhdGUgdm9sdGFnZSwgaGVuY2Ugd2Ug
ZG8KKwkgKiBub3RoaW5nIGhlcmUuCisJICovCisKKwlpY2xfcGxsX2VuYWJsZShkZXZfcHJpdiwg
cGxsLCBlbmFibGVfcmVnKTsKKworCS8qIERWRlMgcG9zdCBzZXF1ZW5jZSB3b3VsZCBiZSBoZXJl
LiBTZWUgdGhlIGNvbW1lbnQgYWJvdmUuICovCit9CisKIHN0YXRpYyB2b2lkIGljbF9wbGxfZGlz
YWJsZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCQkgICAgc3RydWN0IGlu
dGVsX3NoYXJlZF9kcGxsICpwbGwsCiAJCQkgICAgaTkxNV9yZWdfdCBlbmFibGVfcmVnKQpAQCAt
MzU0MywxMSArMzYyOCwyMiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RwbGxfbWdyIGVo
bF9wbGxfbWdyID0gewogCS5kdW1wX2h3X3N0YXRlID0gaWNsX2R1bXBfaHdfc3RhdGUsCiB9Owog
CitzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX3NoYXJlZF9kcGxsX2Z1bmNzIGRrbF9wbGxfZnVu
Y3MgPSB7CisJLmVuYWJsZSA9IGRrbF9wbGxfZW5hYmxlLAorCS5kaXNhYmxlID0gbWdfcGxsX2Rp
c2FibGUsCisJLmdldF9od19zdGF0ZSA9IGRrbF9wbGxfZ2V0X2h3X3N0YXRlLAorfTsKKwogc3Rh
dGljIGNvbnN0IHN0cnVjdCBkcGxsX2luZm8gdGdsX3BsbHNbXSA9IHsKIAl7ICJEUExMIDAiLCAm
Y29tYm9fcGxsX2Z1bmNzLCBEUExMX0lEX0lDTF9EUExMMCwgIDAgfSwKIAl7ICJEUExMIDEiLCAm
Y29tYm9fcGxsX2Z1bmNzLCBEUExMX0lEX0lDTF9EUExMMSwgIDAgfSwKIAl7ICJUQlQgUExMIiwg
ICZ0YnRfcGxsX2Z1bmNzLCBEUExMX0lEX0lDTF9UQlRQTEwsIDAgfSwKLQkvKiBUT0RPOiBBZGQg
dHlwZUMgcGxscyAqLworCXsgIlRDIFBMTCAxIiwgJmRrbF9wbGxfZnVuY3MsIERQTExfSURfSUNM
X01HUExMMSwgMCB9LAorCXsgIlRDIFBMTCAyIiwgJmRrbF9wbGxfZnVuY3MsIERQTExfSURfSUNM
X01HUExMMiwgMCB9LAorCXsgIlRDIFBMTCAzIiwgJmRrbF9wbGxfZnVuY3MsIERQTExfSURfSUNM
X01HUExMMywgMCB9LAorCXsgIlRDIFBMTCA0IiwgJmRrbF9wbGxfZnVuY3MsIERQTExfSURfSUNM
X01HUExMNCwgMCB9LAorCXsgIlRDIFBMTCA1IiwgJmRrbF9wbGxfZnVuY3MsIERQTExfSURfVEdM
X01HUExMNSwgMCB9LAorCXsgIlRDIFBMTCA2IiwgJmRrbF9wbGxfZnVuY3MsIERQTExfSURfVEdM
X01HUExMNiwgMCB9LAogCXsgfSwKIH07CiAKLS0gCjIuMjEuMAoKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRl
bC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

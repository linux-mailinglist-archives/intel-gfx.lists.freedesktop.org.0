Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 22E2F11EB3F
	for <lists+intel-gfx@lfdr.de>; Fri, 13 Dec 2019 20:52:27 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BE6896EC43;
	Fri, 13 Dec 2019 19:52:24 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 210AC6EC43
 for <intel-gfx@lists.freedesktop.org>; Fri, 13 Dec 2019 19:52:24 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga105.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 13 Dec 2019 11:52:23 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,309,1571727600"; d="scan'208";a="208560076"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga008.jf.intel.com with SMTP; 13 Dec 2019 11:52:21 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 13 Dec 2019 21:52:20 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 13 Dec 2019 21:52:14 +0200
Message-Id: <20191213195217.15168-2-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191213195217.15168-1-ville.syrjala@linux.intel.com>
References: <20191213195217.15168-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 2/5] drm/i915: Nuke .post_pll_disable() for DDI
 platforms
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkhT
VysgcGxhdGZvcm1zIGNhbGwgZW5jb2RlciAucG9zdF9kaXNhYmxlKCkgYW5kIC5wb3N0X3BsbF9k
aXNhYmxlKCkKYmFjayB0byBiYWNrLiBBbmQgc2luY2Ugd2UgZG9uJ3QgZXZlbiBkaXNhYmxlIHRo
ZSBQTEwgaW4gYmV0d2VlbgpsZXQncyBqdXN0IG1vdmUgZXZlcnl0aGluZyBpbnRvIC5wb3N0X2Rp
c2FibGUoKS4KCmludGVsX2RwX21zdCBkb2VzIGZvcndhcmQgdGhlIC5wb3N0X2Rpc2FibGUoKSBj
YWxsIHRvIGludGVsX2RkaSBhdAp0aGUgdmVyeSBlbmQgb2YgaXRzIG93biAucG9zdF9kaXNhYmxl
KCkgaG9vaywgc28gdGhpcyB0aW1lIE1TVApJIHNob3VsZG4ndCBldmVuIGJyZWFrIE1TVCBieSBh
Y2NpZGVudC4KCkNjOiBKb3PDqSBSb2JlcnRvIGRlIFNvdXphIDxqb3NlLnNvdXphQGludGVsLmNv
bT4KQ2M6IE1hbmFzaSBOYXZhcmUgPG1hbmFzaS5kLm5hdmFyZUBpbnRlbC5jb20+ClNpZ25lZC1v
ZmYtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+Ci0t
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYyAgICAgfCAyOSArKysr
KysrLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5LmMgfCAgMiAtLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcF9tc3Qu
YyAgfCAxNSAtLS0tLS0tLS0tCiAzIGZpbGVzIGNoYW5nZWQsIDEwIGluc2VydGlvbnMoKyksIDM2
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGRpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCmlu
ZGV4IDk0ZjhiYzRjZDMzNS4uY2FjMGJlNDdlNTAwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGRpLmMKQEAgLTM4NTYsNiArMzg1Niw5IEBAIHN0YXRpYyB2b2lkIGludGVs
X2RkaV9wb3N0X2Rpc2FibGUoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQkJICAg
Y29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKm9sZF9jb25uX3N0YXRlKQogewogCXN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5k
ZXYpOworCXN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0ID0gZW5jX3RvX2RpZ19w
b3J0KCZlbmNvZGVyLT5iYXNlKTsKKwllbnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShk
ZXZfcHJpdiwgZW5jb2Rlci0+cG9ydCk7CisJYm9vbCBpc190Y19wb3J0ID0gaW50ZWxfcGh5X2lz
X3RjKGRldl9wcml2LCBwaHkpOwogCiAJLyoKIAkgKiBXaGVuIGNhbGxlZCBmcm9tIERQIE1TVCBj
b2RlOgpAQCAtMzg3OSw2ICszODgyLDEzIEBAIHN0YXRpYyB2b2lkIGludGVsX2RkaV9wb3N0X2Rp
c2FibGUoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAKIAlpZiAoSU5URUxfR0VOKGRl
dl9wcml2KSA+PSAxMSkKIAkJaWNsX3VubWFwX3BsbHNfdG9fcG9ydHMoZW5jb2Rlcik7CisKKwlp
ZiAoaW50ZWxfY3J0Y19oYXNfZHBfZW5jb2RlcihvbGRfY3J0Y19zdGF0ZSkgfHwgaXNfdGNfcG9y
dCkKKwkJaW50ZWxfZGlzcGxheV9wb3dlcl9wdXRfdW5jaGVja2VkKGRldl9wcml2LAorCQkJCQkJ
ICBpbnRlbF9kZGlfbWFpbl9saW5rX2F1eF9kb21haW4oZGlnX3BvcnQpKTsKKworCWlmIChpc190
Y19wb3J0KQorCQlpbnRlbF90Y19wb3J0X3B1dF9saW5rKGRpZ19wb3J0KTsKIH0KIAogdm9pZCBp
bnRlbF9kZGlfZmRpX3Bvc3RfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwK
QEAgLTQxOTEsMjQgKzQyMDEsNiBAQCBpbnRlbF9kZGlfcHJlX3BsbF9lbmFibGUoc3RydWN0IGlu
dGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQkJCQljcnRjX3N0YXRlLT5sYW5lX2xhdF9vcHRpbV9t
YXNrKTsKIH0KIAotc3RhdGljIHZvaWQKLWludGVsX2RkaV9wb3N0X3BsbF9kaXNhYmxlKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAotCQkJICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKmNydGNfc3RhdGUsCi0JCQkgICBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0
ZSAqY29ubl9zdGF0ZSkKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0
b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsKLQlzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpk
aWdfcG9ydCA9IGVuY190b19kaWdfcG9ydCgmZW5jb2Rlci0+YmFzZSk7Ci0JZW51bSBwaHkgcGh5
ID0gaW50ZWxfcG9ydF90b19waHkoZGV2X3ByaXYsIGVuY29kZXItPnBvcnQpOwotCWJvb2wgaXNf
dGNfcG9ydCA9IGludGVsX3BoeV9pc190YyhkZXZfcHJpdiwgcGh5KTsKLQotCWlmIChpbnRlbF9j
cnRjX2hhc19kcF9lbmNvZGVyKGNydGNfc3RhdGUpIHx8IGlzX3RjX3BvcnQpCi0JCWludGVsX2Rp
c3BsYXlfcG93ZXJfcHV0X3VuY2hlY2tlZChkZXZfcHJpdiwKLQkJCQkJCSAgaW50ZWxfZGRpX21h
aW5fbGlua19hdXhfZG9tYWluKGRpZ19wb3J0KSk7Ci0KLQlpZiAoaXNfdGNfcG9ydCkKLQkJaW50
ZWxfdGNfcG9ydF9wdXRfbGluayhkaWdfcG9ydCk7Ci19Ci0KIHN0YXRpYyB2b2lkIGludGVsX2Rk
aV9wcmVwYXJlX2xpbmtfcmV0cmFpbihzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKQogewogCXN0
cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0ID0gZHBfdG9fZGlnX3BvcnQo
aW50ZWxfZHApOwpAQCAtNDc5NSw3ICs0Nzg3LDYgQEAgdm9pZCBpbnRlbF9kZGlfaW5pdChzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGVudW0gcG9ydCBwb3J0KQogCWVuY29kZXIt
PmNvbXB1dGVfY29uZmlnID0gaW50ZWxfZGRpX2NvbXB1dGVfY29uZmlnOwogCWVuY29kZXItPmVu
YWJsZSA9IGludGVsX2VuYWJsZV9kZGk7CiAJZW5jb2Rlci0+cHJlX3BsbF9lbmFibGUgPSBpbnRl
bF9kZGlfcHJlX3BsbF9lbmFibGU7Ci0JZW5jb2Rlci0+cG9zdF9wbGxfZGlzYWJsZSA9IGludGVs
X2RkaV9wb3N0X3BsbF9kaXNhYmxlOwogCWVuY29kZXItPnByZV9lbmFibGUgPSBpbnRlbF9kZGlf
cHJlX2VuYWJsZTsKIAllbmNvZGVyLT5kaXNhYmxlID0gaW50ZWxfZGlzYWJsZV9kZGk7CiAJZW5j
b2Rlci0+cG9zdF9kaXNhYmxlID0gaW50ZWxfZGRpX3Bvc3RfZGlzYWJsZTsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggOGFlZDY3ZDJjMTA1Li40
YWRjZDc1MTM4NGUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheS5jCkBAIC02NzY3LDggKzY3NjcsNiBAQCBzdGF0aWMgdm9pZCBoYXN3ZWxsX2NydGNfZGlz
YWJsZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKIAkJaXJvbmxha2VfcGZpdF9k
aXNhYmxlKG9sZF9jcnRjX3N0YXRlKTsKIAogCWludGVsX2VuY29kZXJzX3Bvc3RfZGlzYWJsZShz
dGF0ZSwgY3J0Yyk7Ci0KLQlpbnRlbF9lbmNvZGVyc19wb3N0X3BsbF9kaXNhYmxlKHN0YXRlLCBj
cnRjKTsKIH0KIAogc3RhdGljIHZvaWQgaTl4eF9wZml0X2VuYWJsZShjb25zdCBzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2RwX21zdC5jCmluZGV4IDkyNmU0OWY0NDlhNi4uOGJkYmIxNTc5OWVlIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMKQEAgLTI4NiwyMCArMjg2
LDYgQEAgc3RhdGljIHZvaWQgaW50ZWxfbXN0X3ByZV9wbGxfZW5hYmxlX2RwKHN0cnVjdCBpbnRl
bF9lbmNvZGVyICplbmNvZGVyLAogCQkJCQkJICAgIHBpcGVfY29uZmlnLCBOVUxMKTsKIH0KIAot
c3RhdGljIHZvaWQgaW50ZWxfbXN0X3Bvc3RfcGxsX2Rpc2FibGVfZHAoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIsCi0JCQkJCSAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9s
ZF9jcnRjX3N0YXRlLAotCQkJCQkgIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpv
bGRfY29ubl9zdGF0ZSkKLXsKLQlzdHJ1Y3QgaW50ZWxfZHBfbXN0X2VuY29kZXIgKmludGVsX21z
dCA9IGVuY190b19tc3QoJmVuY29kZXItPmJhc2UpOwotCXN0cnVjdCBpbnRlbF9kaWdpdGFsX3Bv
cnQgKmludGVsX2RpZ19wb3J0ID0gaW50ZWxfbXN0LT5wcmltYXJ5OwotCXN0cnVjdCBpbnRlbF9k
cCAqaW50ZWxfZHAgPSAmaW50ZWxfZGlnX3BvcnQtPmRwOwotCi0JaWYgKGludGVsX2RwLT5hY3Rp
dmVfbXN0X2xpbmtzID09IDApCi0JCWludGVsX2RpZ19wb3J0LT5iYXNlLnBvc3RfcGxsX2Rpc2Fi
bGUoJmludGVsX2RpZ19wb3J0LT5iYXNlLAotCQkJCQkJICAgICAgb2xkX2NydGNfc3RhdGUsCi0J
CQkJCQkgICAgICBvbGRfY29ubl9zdGF0ZSk7Ci19Ci0KIHN0YXRpYyB2b2lkIGludGVsX21zdF9w
cmVfZW5hYmxlX2RwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkJCSAgICBjb25z
dCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcsCiAJCQkJICAgIGNvbnN0IHN0
cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRlKQpAQCAtNjU2LDcgKzY0Miw2IEBA
IGludGVsX2RwX2NyZWF0ZV9mYWtlX21zdF9lbmNvZGVyKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3Bv
cnQgKmludGVsX2RpZ19wb3J0LCBlbnVtCiAJaW50ZWxfZW5jb2Rlci0+ZGlzYWJsZSA9IGludGVs
X21zdF9kaXNhYmxlX2RwOwogCWludGVsX2VuY29kZXItPnBvc3RfZGlzYWJsZSA9IGludGVsX21z
dF9wb3N0X2Rpc2FibGVfZHA7CiAJaW50ZWxfZW5jb2Rlci0+cHJlX3BsbF9lbmFibGUgPSBpbnRl
bF9tc3RfcHJlX3BsbF9lbmFibGVfZHA7Ci0JaW50ZWxfZW5jb2Rlci0+cG9zdF9wbGxfZGlzYWJs
ZSA9IGludGVsX21zdF9wb3N0X3BsbF9kaXNhYmxlX2RwOwogCWludGVsX2VuY29kZXItPnByZV9l
bmFibGUgPSBpbnRlbF9tc3RfcHJlX2VuYWJsZV9kcDsKIAlpbnRlbF9lbmNvZGVyLT5lbmFibGUg
PSBpbnRlbF9tc3RfZW5hYmxlX2RwOwogCWludGVsX2VuY29kZXItPmdldF9od19zdGF0ZSA9IGlu
dGVsX2RwX21zdF9lbmNfZ2V0X2h3X3N0YXRlOwotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0Cklu
dGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

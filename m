Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C51D6103098
	for <lists+intel-gfx@lfdr.de>; Wed, 20 Nov 2019 01:13:38 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 98B976E888;
	Wed, 20 Nov 2019 00:13:36 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E414D6E888
 for <intel-gfx@lists.freedesktop.org>; Wed, 20 Nov 2019 00:13:34 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 19 Nov 2019 16:13:34 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,219,1571727600"; d="scan'208";a="204560751"
Received: from dceraolo-linux.fm.intel.com (HELO [10.1.27.145]) ([10.1.27.145])
 by fmsmga008.fm.intel.com with ESMTP; 19 Nov 2019 16:13:33 -0800
To: intel-gfx@lists.freedesktop.org
References: <20191118235531.9353-1-daniele.ceraolospurio@intel.com>
 <20191118235531.9353-4-daniele.ceraolospurio@intel.com>
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Message-ID: <db608e7f-d021-57a2-5c80-41cf5b805196@intel.com>
Date: Tue, 19 Nov 2019 16:13:27 -0800
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20191118235531.9353-4-daniele.ceraolospurio@intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [CI 4/5] drm/i915/guc: kill the GuC client
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

PHNuaXA+Cgo+IEBAIC0yMjAsNyArMjAwLDcgQEAgc3RhdGljIHZvaWQgZ3VjX3dxX2l0ZW1fYXBw
ZW5kKHN0cnVjdCBpbnRlbF9ndWNfY2xpZW50ICpjbGllbnQsCj4gICAJR0VNX0JVR19PTih3cV9v
ZmYgJiAod3FpX3NpemUgLSAxKSk7Cj4gICAKPiAgIAkvKiBXUSBzdGFydHMgZnJvbSB0aGUgcGFn
ZSBhZnRlciBwcm9jZXNzX2Rlc2MgKi8KCkp1c3QgcmVhbGl6ZWQgdGhhdCBJIHN0dXBpZGx5IGZv
cmdvdCB0byBhY3R1YWxseSBjb21taXQgdGhlIGZpeC4uLgoKSSdsbCBzZW5kIHRoZSBmaXhlZCAo
Zm9yIHJlYWwpIHZlcnNpb24gYWZ0ZXIgdGhlIGJ1Z2ZpeCBmb3IgYnVnIDExMjIwNSAKaXMgbWVy
Z2VkLCBzbyBJIGNhbiBnZXQgYSBjbGVhbiBDSSBydW4uCgpEYW5pZWxlCgo+IC0Jd3FpID0gY2xp
ZW50LT52YWRkciArIHdxX29mZiArIEdVQ19QRF9TSVpFOwo+ICsJd3FpID0gZ3VjLT53b3JrcXVl
dWVfdmFkZHIgKyB3cV9vZmY7Cj4gICAKPiAgIAkvKiBOb3cgZmlsbCBpbiB0aGUgNC13b3JkIHdv
cmsgcXVldWUgaXRlbSAqLwo+ICAgCXdxaS0+aGVhZGVyID0gV1FfVFlQRV9JTk9SREVSIHwKPiBA
QCAtMjM4LDEyICsyMTgsMTEgQEAgc3RhdGljIHZvaWQgZ3VjX3dxX2l0ZW1fYXBwZW5kKHN0cnVj
dCBpbnRlbF9ndWNfY2xpZW50ICpjbGllbnQsCj4gICAKPiAgIHN0YXRpYyB2b2lkIGd1Y19hZGRf
cmVxdWVzdChzdHJ1Y3QgaW50ZWxfZ3VjICpndWMsIHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQo+
ICAgewo+IC0Jc3RydWN0IGludGVsX2d1Y19jbGllbnQgKmNsaWVudCA9IGd1Yy0+ZXhlY2J1Zl9j
bGllbnQ7Cj4gICAJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lID0gcnEtPmVuZ2luZTsK
PiAgIAl1MzIgY3R4X2Rlc2MgPSBsb3dlcl8zMl9iaXRzKHJxLT5od19jb250ZXh0LT5scmNfZGVz
Yyk7Cj4gICAJdTMyIHJpbmdfdGFpbCA9IGludGVsX3Jpbmdfc2V0X3RhaWwocnEtPnJpbmcsIHJx
LT50YWlsKSAvIHNpemVvZih1NjQpOwo+ICAgCj4gLQlndWNfd3FfaXRlbV9hcHBlbmQoY2xpZW50
LCBlbmdpbmUtPmd1Y19pZCwgY3R4X2Rlc2MsCj4gKwlndWNfd3FfaXRlbV9hcHBlbmQoZ3VjLCBl
bmdpbmUtPmd1Y19pZCwgY3R4X2Rlc2MsCj4gICAJCQkgICByaW5nX3RhaWwsIHJxLT5mZW5jZS5z
ZXFubyk7Cj4gICB9Cj4gICAKPiBAQCAtMjY3LDkgKzI0Niw4IEBAIHN0YXRpYyB2b2lkIGd1Y19z
dWJtaXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAo+ICAgCQkgICAgICAgc3RydWN0
IGk5MTVfcmVxdWVzdCAqKmVuZCkKPiAgIHsKPiAgIAlzdHJ1Y3QgaW50ZWxfZ3VjICpndWMgPSAm
ZW5naW5lLT5ndC0+dWMuZ3VjOwo+IC0Jc3RydWN0IGludGVsX2d1Y19jbGllbnQgKmNsaWVudCA9
IGd1Yy0+ZXhlY2J1Zl9jbGllbnQ7Cj4gICAKPiAtCXNwaW5fbG9jaygmY2xpZW50LT53cV9sb2Nr
KTsKPiArCXNwaW5fbG9jaygmZ3VjLT53cV9sb2NrKTsKPiAgIAo+ICAgCWRvIHsKPiAgIAkJc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcnEgPSAqb3V0Kys7Cj4gQEAgLTI3OCw3ICsyNTYsNyBAQCBzdGF0
aWMgdm9pZCBndWNfc3VibWl0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKPiAgIAkJ
Z3VjX2FkZF9yZXF1ZXN0KGd1YywgcnEpOwo+ICAgCX0gd2hpbGUgKG91dCAhPSBlbmQpOwo+ICAg
Cj4gLQlzcGluX3VubG9jaygmY2xpZW50LT53cV9sb2NrKTsKPiArCXNwaW5fdW5sb2NrKCZndWMt
PndxX2xvY2spOwo+ICAgfQo+ICAgCj4gICBzdGF0aWMgaW5saW5lIGludCBycV9wcmlvKGNvbnN0
IHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQo+IEBAIC01MjksMTI2ICs1MDcsNiBAQCBzdGF0aWMg
dm9pZCBndWNfcmVzZXRfZmluaXNoKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAg
ICAqIHBhdGggb2YgZ3VjX3N1Ym1pdCgpIGFib3ZlLgo+ICAgICovCj4gICAKPiAtLyoqCj4gLSAq
IGd1Y19jbGllbnRfYWxsb2MoKSAtIEFsbG9jYXRlIGFuIGludGVsX2d1Y19jbGllbnQKPiAtICog
QGd1YzoJdGhlIGludGVsX2d1YyBzdHJ1Y3R1cmUKPiAtICogQHByaW9yaXR5Oglmb3VyIGxldmVs
cyBwcmlvcml0eSBfQ1JJVElDQUwsIF9ISUdILCBfTk9STUFMIGFuZCBfTE9XCj4gLSAqCQlUaGUg
a2VybmVsIGNsaWVudCB0byByZXBsYWNlIEV4ZWNMaXN0IHN1Ym1pc3Npb24gaXMgY3JlYXRlZCB3
aXRoCj4gLSAqCQlOT1JNQUwgcHJpb3JpdHkuIFByaW9yaXR5IG9mIGEgY2xpZW50IGZvciBzY2hl
ZHVsZXIgY2FuIGJlIEhJR0gsCj4gLSAqCQl3aGlsZSBhIHByZWVtcHRpb24gY29udGV4dCBjYW4g
dXNlIENSSVRJQ0FMLgo+IC0gKgo+IC0gKiBSZXR1cm46CUFuIGludGVsX2d1Y19jbGllbnQgb2Jq
ZWN0IGlmIHN1Y2Nlc3MsIGVsc2UgTlVMTC4KPiAtICovCj4gLXN0YXRpYyBzdHJ1Y3QgaW50ZWxf
Z3VjX2NsaWVudCAqCj4gLWd1Y19jbGllbnRfYWxsb2Moc3RydWN0IGludGVsX2d1YyAqZ3VjLCB1
MzIgcHJpb3JpdHkpCj4gLXsKPiAtCXN0cnVjdCBpbnRlbF9ndWNfY2xpZW50ICpjbGllbnQ7Cj4g
LQlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKPiAtCXZvaWQgKnZhZGRyOwo+IC0JaW50IHJldDsKPiAt
Cj4gLQljbGllbnQgPSBremFsbG9jKHNpemVvZigqY2xpZW50KSwgR0ZQX0tFUk5FTCk7Cj4gLQlp
ZiAoIWNsaWVudCkKPiAtCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsKPiAtCj4gLQljbGllbnQt
Pmd1YyA9IGd1YzsKPiAtCWNsaWVudC0+cHJpb3JpdHkgPSBwcmlvcml0eTsKPiAtCXNwaW5fbG9j
a19pbml0KCZjbGllbnQtPndxX2xvY2spOwo+IC0KPiAtCXJldCA9IGlkYV9zaW1wbGVfZ2V0KCZn
dWMtPnN0YWdlX2lkcywgMCwgR1VDX01BWF9TVEFHRV9ERVNDUklQVE9SUywKPiAtCQkJICAgICBH
RlBfS0VSTkVMKTsKPiAtCWlmIChyZXQgPCAwKQo+IC0JCWdvdG8gZXJyX2NsaWVudDsKPiAtCj4g
LQljbGllbnQtPnN0YWdlX2lkID0gcmV0Owo+IC0KPiAtCS8qIFRoZSBmaXJzdCBwYWdlIGlzIHBy
b2NfZGVzYy4gVHdvIGZvbGxvd2luZyBwYWdlcyBhcmUgd3EuICovCj4gLQl2bWEgPSBpbnRlbF9n
dWNfYWxsb2NhdGVfdm1hKGd1YywgR1VDX1BEX1NJWkUgKyBHVUNfV1FfU0laRSk7Cj4gLQlpZiAo
SVNfRVJSKHZtYSkpIHsKPiAtCQlyZXQgPSBQVFJfRVJSKHZtYSk7Cj4gLQkJZ290byBlcnJfaWQ7
Cj4gLQl9Cj4gLQo+IC0JLyogV2UnbGwga2VlcCBqdXN0IHRoZSBmaXJzdCAoZG9vcmJlbGwvcHJv
YykgcGFnZSBwZXJtYW5lbnRseSBrbWFwJ2QuICovCj4gLQljbGllbnQtPnZtYSA9IHZtYTsKPiAt
Cj4gLQl2YWRkciA9IGk5MTVfZ2VtX29iamVjdF9waW5fbWFwKHZtYS0+b2JqLCBJOTE1X01BUF9X
Qik7Cj4gLQlpZiAoSVNfRVJSKHZhZGRyKSkgewo+IC0JCXJldCA9IFBUUl9FUlIodmFkZHIpOwo+
IC0JCWdvdG8gZXJyX3ZtYTsKPiAtCX0KPiAtCWNsaWVudC0+dmFkZHIgPSB2YWRkcjsKPiAtCj4g
LQlEUk1fREVCVUdfRFJJVkVSKCJuZXcgcHJpb3JpdHkgJXUgY2xpZW50ICVwOiBzdGFnZV9pZCAl
dVxuIiwKPiAtCQkJIHByaW9yaXR5LCBjbGllbnQsIGNsaWVudC0+c3RhZ2VfaWQpOwo+IC0KPiAt
CXJldHVybiBjbGllbnQ7Cj4gLQo+IC1lcnJfdm1hOgo+IC0JaTkxNV92bWFfdW5waW5fYW5kX3Jl
bGVhc2UoJmNsaWVudC0+dm1hLCAwKTsKPiAtZXJyX2lkOgo+IC0JaWRhX3NpbXBsZV9yZW1vdmUo
Jmd1Yy0+c3RhZ2VfaWRzLCBjbGllbnQtPnN0YWdlX2lkKTsKPiAtZXJyX2NsaWVudDoKPiAtCWtm
cmVlKGNsaWVudCk7Cj4gLQlyZXR1cm4gRVJSX1BUUihyZXQpOwo+IC19Cj4gLQo+IC1zdGF0aWMg
dm9pZCBndWNfY2xpZW50X2ZyZWUoc3RydWN0IGludGVsX2d1Y19jbGllbnQgKmNsaWVudCkKPiAt
ewo+IC0JaTkxNV92bWFfdW5waW5fYW5kX3JlbGVhc2UoJmNsaWVudC0+dm1hLCBJOTE1X1ZNQV9S
RUxFQVNFX01BUCk7Cj4gLQlpZGFfc2ltcGxlX3JlbW92ZSgmY2xpZW50LT5ndWMtPnN0YWdlX2lk
cywgY2xpZW50LT5zdGFnZV9pZCk7Cj4gLQlrZnJlZShjbGllbnQpOwo+IC19Cj4gLQo+IC1zdGF0
aWMgaW50IGd1Y19jbGllbnRzX2NyZWF0ZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCj4gLXsKPiAt
CXN0cnVjdCBpbnRlbF9ndWNfY2xpZW50ICpjbGllbnQ7Cj4gLQo+IC0JR0VNX0JVR19PTihndWMt
PmV4ZWNidWZfY2xpZW50KTsKPiAtCj4gLQljbGllbnQgPSBndWNfY2xpZW50X2FsbG9jKGd1Yywg
R1VDX0NMSUVOVF9QUklPUklUWV9LTURfTk9STUFMKTsKPiAtCWlmIChJU19FUlIoY2xpZW50KSkg
ewo+IC0JCURSTV9FUlJPUigiRmFpbGVkIHRvIGNyZWF0ZSBHdUMgY2xpZW50IGZvciBzdWJtaXNz
aW9uIVxuIik7Cj4gLQkJcmV0dXJuIFBUUl9FUlIoY2xpZW50KTsKPiAtCX0KPiAtCWd1Yy0+ZXhl
Y2J1Zl9jbGllbnQgPSBjbGllbnQ7Cj4gLQo+IC0JcmV0dXJuIDA7Cj4gLX0KPiAtCj4gLXN0YXRp
YyB2b2lkIGd1Y19jbGllbnRzX2Rlc3Ryb3koc3RydWN0IGludGVsX2d1YyAqZ3VjKQo+IC17Cj4g
LQlzdHJ1Y3QgaW50ZWxfZ3VjX2NsaWVudCAqY2xpZW50Owo+IC0KPiAtCWNsaWVudCA9IGZldGNo
X2FuZF96ZXJvKCZndWMtPmV4ZWNidWZfY2xpZW50KTsKPiAtCWlmIChjbGllbnQpCj4gLQkJZ3Vj
X2NsaWVudF9mcmVlKGNsaWVudCk7Cj4gLX0KPiAtCj4gLXN0YXRpYyB2b2lkIF9fZ3VjX2NsaWVu
dF9lbmFibGUoc3RydWN0IGludGVsX2d1Y19jbGllbnQgKmNsaWVudCkKPiAtewo+IC0JZ3VjX3By
b2NfZGVzY19pbml0KGNsaWVudCk7Cj4gLQlndWNfc3RhZ2VfZGVzY19pbml0KGNsaWVudCk7Cj4g
LX0KPiAtCj4gLXN0YXRpYyB2b2lkIF9fZ3VjX2NsaWVudF9kaXNhYmxlKHN0cnVjdCBpbnRlbF9n
dWNfY2xpZW50ICpjbGllbnQpCj4gLXsKPiAtCS8qIE5vdGU6IEJ5IHRoZSB0aW1lIHdlJ3JlIGhl
cmUsIEd1QyBtYXkgaGF2ZSBhbHJlYWR5IGJlZW4gcmVzZXQgKi8KPiAtCWd1Y19zdGFnZV9kZXNj
X2ZpbmkoY2xpZW50KTsKPiAtCWd1Y19wcm9jX2Rlc2NfZmluaShjbGllbnQpOwo+IC19Cj4gLQo+
IC1zdGF0aWMgdm9pZCBndWNfY2xpZW50c19lbmFibGUoc3RydWN0IGludGVsX2d1YyAqZ3VjKQo+
IC17Cj4gLQlfX2d1Y19jbGllbnRfZW5hYmxlKGd1Yy0+ZXhlY2J1Zl9jbGllbnQpOwo+IC19Cj4g
LQo+IC1zdGF0aWMgdm9pZCBndWNfY2xpZW50c19kaXNhYmxlKHN0cnVjdCBpbnRlbF9ndWMgKmd1
YykKPiAtewo+IC0JaWYgKGd1Yy0+ZXhlY2J1Zl9jbGllbnQpCj4gLQkJX19ndWNfY2xpZW50X2Rp
c2FibGUoZ3VjLT5leGVjYnVmX2NsaWVudCk7Cj4gLX0KPiAtCj4gICAvKgo+ICAgICogU2V0IHVw
IHRoZSBtZW1vcnkgcmVzb3VyY2VzIHRvIGJlIHNoYXJlZCB3aXRoIHRoZSBHdUMgKHZpYSB0aGUg
R0dUVCkKPiAgICAqIGF0IGZpcm13YXJlIGxvYWRpbmcgdGltZS4KPiBAQCAtNjY5LDEyICs1Mjcs
MjAgQEAgaW50IGludGVsX2d1Y19zdWJtaXNzaW9uX2luaXQoc3RydWN0IGludGVsX2d1YyAqZ3Vj
KQo+ICAgCSAqLwo+ICAgCUdFTV9CVUdfT04oIWd1Yy0+c3RhZ2VfZGVzY19wb29sKTsKPiAgIAo+
IC0JcmV0ID0gZ3VjX2NsaWVudHNfY3JlYXRlKGd1Yyk7Cj4gKwlyZXQgPSBndWNfd29ya3F1ZXVl
X2NyZWF0ZShndWMpOwo+ICAgCWlmIChyZXQpCj4gICAJCWdvdG8gZXJyX3Bvb2w7Cj4gICAKPiAr
CXJldCA9IGd1Y19wcm9jX2Rlc2NfY3JlYXRlKGd1Yyk7Cj4gKwlpZiAocmV0KQo+ICsJCWdvdG8g
ZXJyX3dvcmtxdWV1ZTsKPiArCj4gKwlzcGluX2xvY2tfaW5pdCgmZ3VjLT53cV9sb2NrKTsKPiAr
Cj4gICAJcmV0dXJuIDA7Cj4gICAKPiArZXJyX3dvcmtxdWV1ZToKPiArCWd1Y193b3JrcXVldWVf
ZGVzdHJveShndWMpOwo+ICAgZXJyX3Bvb2w6Cj4gICAJZ3VjX3N0YWdlX2Rlc2NfcG9vbF9kZXN0
cm95KGd1Yyk7Cj4gICAJcmV0dXJuIHJldDsKPiBAQCAtNjgyLDEwICs1NDgsMTEgQEAgaW50IGlu
dGVsX2d1Y19zdWJtaXNzaW9uX2luaXQoc3RydWN0IGludGVsX2d1YyAqZ3VjKQo+ICAgCj4gICB2
b2lkIGludGVsX2d1Y19zdWJtaXNzaW9uX2Zpbmkoc3RydWN0IGludGVsX2d1YyAqZ3VjKQo+ICAg
ewo+IC0JZ3VjX2NsaWVudHNfZGVzdHJveShndWMpOwo+IC0KPiAtCWlmIChndWMtPnN0YWdlX2Rl
c2NfcG9vbCkKPiArCWlmIChndWMtPnN0YWdlX2Rlc2NfcG9vbCkgewo+ICsJCWd1Y19wcm9jX2Rl
c2NfZGVzdHJveShndWMpOwo+ICsJCWd1Y193b3JrcXVldWVfZGVzdHJveShndWMpOwo+ICAgCQln
dWNfc3RhZ2VfZGVzY19wb29sX2Rlc3Ryb3koZ3VjKTsKPiArCX0KPiAgIH0KPiAgIAo+ICAgc3Rh
dGljIHZvaWQgZ3VjX2ludGVycnVwdHNfY2FwdHVyZShzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQo+IEBA
IC03NzEsOSArNjM4LDggQEAgdm9pZCBpbnRlbF9ndWNfc3VibWlzc2lvbl9lbmFibGUoc3RydWN0
IGludGVsX2d1YyAqZ3VjKQo+ICAgCQkgICAgIHNpemVvZihzdHJ1Y3QgZ3VjX3dxX2l0ZW0pICoK
PiAgIAkJICAgICBJOTE1X05VTV9FTkdJTkVTID4gR1VDX1dRX1NJWkUpOwo+ICAgCj4gLQlHRU1f
QlVHX09OKCFndWMtPmV4ZWNidWZfY2xpZW50KTsKPiAtCj4gLQlndWNfY2xpZW50c19lbmFibGUo
Z3VjKTsKPiArCWd1Y19wcm9jX2Rlc2NfaW5pdChndWMpOwo+ICsJZ3VjX3N0YWdlX2Rlc2NfaW5p
dChndWMpOwo+ICAgCj4gICAJLyogVGFrZSBvdmVyIGZyb20gbWFudWFsIGNvbnRyb2wgb2YgRUxT
UCAoZXhlY2xpc3RzKSAqLwo+ICAgCWd1Y19pbnRlcnJ1cHRzX2NhcHR1cmUoZ3QpOwo+IEBAIC03
OTAsOCArNjU2LDEyIEBAIHZvaWQgaW50ZWxfZ3VjX3N1Ym1pc3Npb25fZGlzYWJsZShzdHJ1Y3Qg
aW50ZWxfZ3VjICpndWMpCj4gICAKPiAgIAlHRU1fQlVHX09OKGd0LT5hd2FrZSk7IC8qIEdUIHNo
b3VsZCBiZSBwYXJrZWQgZmlyc3QgKi8KPiAgIAo+ICsJLyogTm90ZTogQnkgdGhlIHRpbWUgd2Un
cmUgaGVyZSwgR3VDIG1heSBoYXZlIGFscmVhZHkgYmVlbiByZXNldCAqLwo+ICsKPiAgIAlndWNf
aW50ZXJydXB0c19yZWxlYXNlKGd0KTsKPiAtCWd1Y19jbGllbnRzX2Rpc2FibGUoZ3VjKTsKPiAr
Cj4gKwlndWNfc3RhZ2VfZGVzY19maW5pKGd1Yyk7Cj4gKwlndWNfcHJvY19kZXNjX2ZpbmkoZ3Vj
KTsKPiAgIH0KPiAgIAo+ICAgc3RhdGljIGJvb2wgX19ndWNfc3VibWlzc2lvbl9zdXBwb3J0KHN0
cnVjdCBpbnRlbF9ndWMgKmd1YykKPiBAQCAtODA5LDMgKzY3OSw4IEBAIHZvaWQgaW50ZWxfZ3Vj
X3N1Ym1pc3Npb25faW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCj4gICB7Cj4gICAJ
Z3VjLT5zdWJtaXNzaW9uX3N1cHBvcnRlZCA9IF9fZ3VjX3N1Ym1pc3Npb25fc3VwcG9ydChndWMp
Owo+ICAgfQo+ICsKPiArYm9vbCBpbnRlbF9lbmdpbmVfaW5fZ3VjX3N1Ym1pc3Npb25fbW9kZShj
b25zdCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCj4gK3sKPiArCXJldHVybiBlbmdp
bmUtPnNldF9kZWZhdWx0X3N1Ym1pc3Npb24gPT0gZ3VjX3NldF9kZWZhdWx0X3N1Ym1pc3Npb247
Cj4gK30KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3Vj
X3N1Ym1pc3Npb24uaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19zdWJt
aXNzaW9uLmgKPiBpbmRleCBlMmRlYjRlNmY0MmEuLmU0MDJhMjkzMjU5MiAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfc3VibWlzc2lvbi5oCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uaAo+IEBA
IC02LDQ4ICs2LDEwIEBACj4gICAjaWZuZGVmIF9JTlRFTF9HVUNfU1VCTUlTU0lPTl9IXwo+ICAg
I2RlZmluZSBfSU5URUxfR1VDX1NVQk1JU1NJT05fSF8KPiAgIAo+IC0jaW5jbHVkZSA8bGludXgv
c3BpbmxvY2suaD4KPiArI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+Cj4gICAKPiAtI2luY2x1ZGUg
Imd0L2ludGVsX2VuZ2luZV90eXBlcy5oIgo+IC0KPiAtI2luY2x1ZGUgImk5MTVfZ2VtLmgiCj4g
LSNpbmNsdWRlICJpOTE1X3NlbGZ0ZXN0LmgiCj4gLQo+IC1zdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZTsKPiAtCj4gLS8qCj4gLSAqIFRoaXMgc3RydWN0dXJlIHByaW1hcmlseSBkZXNjcmliZXMgdGhl
IEdFTSBvYmplY3Qgc2hhcmVkIHdpdGggdGhlIEd1Qy4KPiAtICogVGhlIHNwZWNzIHNvbWV0aW1l
cyByZWZlciB0byB0aGlzIG9iamVjdCBhcyBhICJHdUMgY29udGV4dCIsIGJ1dCB3ZSB1c2UKPiAt
ICogdGhlIHRlcm0gImNsaWVudCIgdG8gYXZvaWQgY29uZnVzaW9uIHdpdGggaGFyZHdhcmUgY29u
dGV4dHMuIFRoaXMKPiAtICogR0VNIG9iamVjdCBpcyBoZWxkIGZvciB0aGUgZW50aXJlIGxpZmV0
aW1lIG9mIG91ciBpbnRlcmFjdGlvbiB3aXRoCj4gLSAqIHRoZSBHdUMsIGJlaW5nIGFsbG9jYXRl
ZCBiZWZvcmUgdGhlIEd1QyBpcyBsb2FkZWQgd2l0aCBpdHMgZmlybXdhcmUuCj4gLSAqIEJlY2F1
c2UgdGhlcmUncyBubyB3YXkgdG8gdXBkYXRlIHRoZSBhZGRyZXNzIHVzZWQgYnkgdGhlIEd1QyBh
ZnRlcgo+IC0gKiBpbml0aWFsaXNhdGlvbiwgdGhlIHNoYXJlZCBvYmplY3QgbXVzdCBzdGF5IHBp
bm5lZCBpbnRvIHRoZSBHR1RUIGFzCj4gLSAqIGxvbmcgYXMgdGhlIEd1QyBpcyBpbiB1c2UuIFdl
IGFsc28ga2VlcCB0aGUgZmlyc3QgcGFnZSAob25seSkgbWFwcGVkCj4gLSAqIGludG8ga2VybmVs
IGFkZHJlc3Mgc3BhY2UsIGFzIGl0IGluY2x1ZGVzIHNoYXJlZCBkYXRhIHRoYXQgbXVzdCBiZQo+
IC0gKiB1cGRhdGVkIG9uIGV2ZXJ5IHJlcXVlc3Qgc3VibWlzc2lvbi4KPiAtICoKPiAtICogVGhl
IHNpbmdsZSBHRU0gb2JqZWN0IGRlc2NyaWJlZCBoZXJlIGlzIGFjdHVhbGx5IG1hZGUgdXAgb2Yg
c2V2ZXJhbAo+IC0gKiBzZXBhcmF0ZSBhcmVhcywgYXMgZmFyIGFzIHRoZSBHdUMgaXMgY29uY2Vy
bmVkLiBUaGUgZmlyc3QgcGFnZSAoa2VwdAo+IC0gKiBrbWFwJ2QpIGluY2x1ZGVzIHRoZSAicHJv
Y2VzcyBkZXNjcmlwdG9yIiB3aGljaCBob2xkcyBzZXF1ZW5jZSBkYXRhIGZvcgo+IC0gKiB0aGUg
ZG9vcmJlbGwsIGFuZCBvbmUgY2FjaGVsaW5lIHdoaWNoIGFjdHVhbGx5ICppcyogdGhlIGRvb3Ji
ZWxsOyBhCj4gLSAqIHdyaXRlIHRvIHRoaXMgd2lsbCAicmluZyB0aGUgZG9vcmJlbGwiIChpLmUu
IHNlbmQgYW4gaW50ZXJydXB0IHRvIHRoZQo+IC0gKiBHdUMpLiBUaGUgc3Vic2VxdWVudCAgcGFn
ZXMgb2YgdGhlIGNsaWVudCBvYmplY3QgY29uc3RpdHV0ZSB0aGUgd29yawo+IC0gKiBxdWV1ZSAo
YSBjaXJjdWxhciBhcnJheSBvZiB3b3JrIGl0ZW1zKSwgYWdhaW4gZGVzY3JpYmVkIGluIHRoZSBw
cm9jZXNzCj4gLSAqIGRlc2NyaXB0b3IuIFdvcmsgcXVldWUgcGFnZXMgYXJlIG1hcHBlZCBtb21l
bnRhcmlseSBhcyByZXF1aXJlZC4KPiAtICovCj4gLXN0cnVjdCBpbnRlbF9ndWNfY2xpZW50IHsK
PiAtCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOwo+IC0Jdm9pZCAqdmFkZHI7Cj4gLQlzdHJ1Y3QgaW50
ZWxfZ3VjICpndWM7Cj4gLQo+IC0JLyogYml0bWFwIG9mIChob3N0KSBlbmdpbmUgaWRzICovCj4g
LQl1MzIgcHJpb3JpdHk7Cj4gLQl1MzIgc3RhZ2VfaWQ7Cj4gLQo+IC0JLyogUHJvdGVjdHMgR3VD
IGNsaWVudCdzIFdRIGFjY2VzcyAqLwo+IC0Jc3BpbmxvY2tfdCB3cV9sb2NrOwo+IC19Owo+ICtz
dHJ1Y3QgaW50ZWxfZ3VjOwo+ICtzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzOwo+ICAgCj4gICB2b2lk
IGludGVsX2d1Y19zdWJtaXNzaW9uX2luaXRfZWFybHkoc3RydWN0IGludGVsX2d1YyAqZ3VjKTsK
PiAgIGludCBpbnRlbF9ndWNfc3VibWlzc2lvbl9pbml0KHN0cnVjdCBpbnRlbF9ndWMgKmd1Yyk7
Cj4gQEAgLTU2LDUgKzE4LDYgQEAgdm9pZCBpbnRlbF9ndWNfc3VibWlzc2lvbl9kaXNhYmxlKHN0
cnVjdCBpbnRlbF9ndWMgKmd1Yyk7Cj4gICB2b2lkIGludGVsX2d1Y19zdWJtaXNzaW9uX2Zpbmko
c3RydWN0IGludGVsX2d1YyAqZ3VjKTsKPiAgIGludCBpbnRlbF9ndWNfcHJlZW1wdF93b3JrX2Ny
ZWF0ZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpOwo+ICAgdm9pZCBpbnRlbF9ndWNfcHJlZW1wdF93
b3JrX2Rlc3Ryb3koc3RydWN0IGludGVsX2d1YyAqZ3VjKTsKPiArYm9vbCBpbnRlbF9lbmdpbmVf
aW5fZ3VjX3N1Ym1pc3Npb25fbW9kZShjb25zdCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdp
bmUpOwo+ICAgCj4gICAjZW5kaWYKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kZWJ1Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYwo+IGlu
ZGV4IDVkNTk3NGU3ZjNlZC4uZjMyZTdiMDE2MTk3IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kZWJ1Z2ZzLmMKPiBAQCAtMTgwMiwyMyArMTgwMiwxMiBAQCBzdGF0aWMgdm9pZCBpOTE1X2d1
Y19sb2dfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sCj4gICBzdGF0aWMgaW50IGk5MTVfZ3VjX2lu
Zm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQo+ICAgewo+ICAgCXN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IG5vZGVfdG9faTkxNShtLT5wcml2YXRlKTsKPiAtCWNv
bnN0IHN0cnVjdCBpbnRlbF9ndWMgKmd1YyA9ICZkZXZfcHJpdi0+Z3QudWMuZ3VjOwo+IC0Jc3Ry
dWN0IGludGVsX2d1Y19jbGllbnQgKmNsaWVudCA9IGd1Yy0+ZXhlY2J1Zl9jbGllbnQ7Cj4gICAK
PiAgIAlpZiAoIVVTRVNfR1VDKGRldl9wcml2KSkKPiAgIAkJcmV0dXJuIC1FTk9ERVY7Cj4gICAK
PiAgIAlpOTE1X2d1Y19sb2dfaW5mbyhtLCBkZXZfcHJpdik7Cj4gICAKPiAtCWlmICghVVNFU19H
VUNfU1VCTUlTU0lPTihkZXZfcHJpdikpCj4gLQkJcmV0dXJuIDA7Cj4gLQo+IC0JR0VNX0JVR19P
TighZ3VjLT5leGVjYnVmX2NsaWVudCk7Cj4gLQo+IC0Jc2VxX3ByaW50ZihtLCAiXG5HdUMgZXhl
Y2J1ZiBjbGllbnQgQCAlcDpcbiIsIGNsaWVudCk7Cj4gLQlzZXFfcHJpbnRmKG0sICJcdFByaW9y
aXR5ICVkLCBHdUMgc3RhZ2UgaW5kZXg6ICV1XG4iLAo+IC0JCSAgIGNsaWVudC0+cHJpb3JpdHks
Cj4gLQkJICAgY2xpZW50LT5zdGFnZV9pZCk7Cj4gICAJLyogQWRkIG1vcmUgYXMgcmVxdWlyZWQg
Li4uICovCj4gICAKPiAgIAlyZXR1cm4gMDsKPiAKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vaW50ZWwtZ2Z4

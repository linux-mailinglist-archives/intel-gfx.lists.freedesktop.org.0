Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 98F653BBEF
	for <lists+intel-gfx@lfdr.de>; Mon, 10 Jun 2019 20:43:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 60AAE890C5;
	Mon, 10 Jun 2019 18:43:04 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 592BE890C5
 for <Intel-gfx@lists.freedesktop.org>; Mon, 10 Jun 2019 18:43:03 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Jun 2019 11:43:02 -0700
X-ExtLoop1: 1
Received: from irvmail001.ir.intel.com ([163.33.26.43])
 by fmsmga008.fm.intel.com with ESMTP; 10 Jun 2019 11:43:01 -0700
Received: from mwajdecz-mobl1.ger.corp.intel.com
 (mwajdecz-mobl1.ger.corp.intel.com [172.28.174.50])
 by irvmail001.ir.intel.com (8.14.3/8.13.6/MailSET/Hub) with ESMTP id
 x5AIh03a006294; Mon, 10 Jun 2019 19:43:00 +0100
To: Intel-gfx@lists.freedesktop.org, "Tvrtko Ursulin"
 <tvrtko.ursulin@linux.intel.com>
References: <20190610155419.23723-1-tvrtko.ursulin@linux.intel.com>
 <20190610155419.23723-15-tvrtko.ursulin@linux.intel.com>
Date: Mon, 10 Jun 2019 20:43:00 +0200
MIME-Version: 1.0
From: "Michal Wajdeczko" <michal.wajdeczko@intel.com>
Message-ID: <op.z26l9yzoxaggs7@mwajdecz-mobl1.ger.corp.intel.com>
In-Reply-To: <20190610155419.23723-15-tvrtko.ursulin@linux.intel.com>
User-Agent: Opera Mail/1.0 (Win32)
Subject: Re: [Intel-gfx] [RFC 14/14] drm/i915: Make GuC GGTT reservation
 work on ggtt
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"; DelSp="yes"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gTW9uLCAxMCBKdW4gMjAxOSAxNzo1NDoxOSArMDIwMCwgVHZydGtvIFVyc3VsaW4gIAo8dHZy
dGtvLnVyc3VsaW5AbGludXguaW50ZWwuY29tPiB3cm90ZToKCj4gRnJvbTogVHZydGtvIFVyc3Vs
aW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KPgo+IFRoZXNlIGZ1bmN0aW9ucyBvcGVyYXRl
IG9uIGdndHQgc28gbWFrZSB0aGVtIHRha2UgdGhhdCBkaXJlY3RseSBhcwo+IHBhcmFtZXRlci4K
Pgo+IEF0IHRoZSBzYW1lIHRpbWUgbW92ZSB0aGUgVVNFU19HVUMgY29uZGl0aW9uYWwgZG93biB0
bwo+IGludGVsX2d1Y19yZXNlcnZlX2dndHRfdG9wIGZvciBzeW1tZXRyeSB3aXRoCj4gaW50ZWxf
Z3VjX3Jlc2VydmVkX2d0dF9zaXplLgo+Cj4gdjI6Cj4gICogUmVuYW1lIGFuZCBtb3ZlIGZ1bmN0
aW9ucyB0byBiZSBzdGF0aWMgaW4gaTkxNV9nZW1fZ3R0LmMgKE1pY2hhbCkKPgo+IFNpZ25lZC1v
ZmYtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Cj4gQ2M6IE1p
Y2hhbCBXYWpkZWN6a28gPG1pY2hhbC53YWpkZWN6a29AaW50ZWwuY29tPgoKd2l0aCBzb21lIG5p
dHMgYmVsb3csCgpSZXZpZXdlZC1ieTogTWljaGFsIFdhamRlY3prbyA8bWljaGFsLndhamRlY3pr
b0BpbnRlbC5jb20+Cgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQu
YyB8IDM3ICsrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2ludGVsX2d1Yy5jICAgIHwgMjcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX2d1Yy5oICAgIHwgIDIgLS0KPiAgMyBmaWxlcyBjaGFuZ2VkLCAz
MCBpbnNlcnRpb25zKCspLCAzNiBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyAgCj4gYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2dlbV9ndHQuYwo+IGluZGV4IGU2MjA0MWViMTBiOC4uMzk0ZjM0N2E5MGVlIDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKPiBAQCAtMjgzMCw2ICsyODMwLDMxIEBAIHN0
YXRpYyB2b2lkIGZpbmlfYWxpYXNpbmdfcHBndHQoc3RydWN0ICAKPiBkcm1faTkxNV9wcml2YXRl
ICppOTE1KQo+ICAJZ2d0dC0+dm0udm1hX29wcy51bmJpbmRfdm1hID0gZ2d0dF91bmJpbmRfdm1h
Owo+ICB9Cj4gK3N0YXRpYyBpbnQgZ2d0dF9yZXNlcnZlX2d1Y190b3Aoc3RydWN0IGk5MTVfZ2d0
dCAqZ2d0dCkKCm1heWJlIHdlIHNob3VsZCBjb3B5IHNvbWUgY29tbWVudCBmcm9tIGNvbW1pdCA5
MTE4MDA3NjVlZjYKZGlyZWN0bHkgdG8gdGhlIGNvZGUgaGVyZSwgdG8gZXhwbGFpbiB3aHkgd2Ug
ZG8gdGhhdCA/Cgo+ICt7Cj4gKwl1NjQgc2l6ZTsKPiArCWludCByZXQ7Cj4gKwo+ICsJaWYgKCFV
U0VTX0dVQyhnZ3R0LT52bS5pOTE1KSkKPiArCQlyZXR1cm4gMDsKPiArCj4gKwlzaXplID0gZ2d0
dC0+dm0udG90YWwgLSBHVUNfR0dUVF9UT1A7Cgp3aGF0IGFib3V0IG1ha2luZyBzdXJlIHRoYXQg
Z2d0dCBzaXplIGlzIGxhcmdlIGVub3VnaDoKCglHRU1fQlVHX09OKGdndHQtPnZtLnRvdGFsID4g
R1VDX0dHVFRfVE9QKQoKPiArCj4gKwlyZXQgPSBpOTE1X2dlbV9ndHRfcmVzZXJ2ZSgmZ2d0dC0+
dm0sICZnZ3R0LT51Y19mdywgc2l6ZSwKPiArCQkJCSAgIEdVQ19HR1RUX1RPUCwgSTkxNV9DT0xP
Ul9VTkVWSUNUQUJMRSwKPiArCQkJCSAgIFBJTl9OT0VWSUNUKTsKPiArCWlmIChyZXQpCj4gKwkJ
RFJNX0RFQlVHX0RSSVZFUigiR3VDOiBmYWlsZWQgdG8gcmVzZXJ2ZSB0b3Agb2YgZ2d0dFxuIik7
Cgp0aGlzIGlzIG5vdyBnZ3R0IGNvZGUsIHNvOgoKCURSTV9ERUJVR19EUklWRVIoIkZhaWxlZCB0
byByZXNlcnZlIHRvcCBvZiBHR1RUIGZvciBHdUNcbiIpOwoKPiArCj4gKwlyZXR1cm4gcmV0Owo+
ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBnZ3R0X3JlbGVhc2VfZ3VjX3RvcChzdHJ1Y3QgaTkxNV9n
Z3R0ICpnZ3R0KQo+ICt7Cj4gKwlpZiAoZHJtX21tX25vZGVfYWxsb2NhdGVkKCZnZ3R0LT51Y19m
dykpCj4gKwkJZHJtX21tX3JlbW92ZV9ub2RlKCZnZ3R0LT51Y19mdyk7Cj4gK30KPiArCj4gIGlu
dCBpOTE1X2dlbV9pbml0X2dndHQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+
ICB7Cj4gIAkvKiBMZXQgR0VNIE1hbmFnZSBhbGwgb2YgdGhlIGFwZXJ0dXJlLgo+IEBAIC0yODY3
LDExICsyODkyLDkgQEAgaW50IGk5MTVfZ2VtX2luaXRfZ2d0dChzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAgCj4gKmRldl9wcml2KQo+ICAJaWYgKHJldCkKPiAgCQlyZXR1cm4gcmV0Owo+IC0JaWYg
KFVTRVNfR1VDKGRldl9wcml2KSkgewo+IC0JCXJldCA9IGludGVsX2d1Y19yZXNlcnZlX2dndHRf
dG9wKCZkZXZfcHJpdi0+Z3VjKTsKPiAtCQlpZiAocmV0KQo+IC0JCQlnb3RvIGVycl9yZXNlcnZl
Owo+IC0JfQo+ICsJcmV0ID0gZ2d0dF9yZXNlcnZlX2d1Y190b3AoZ2d0dCk7Cj4gKwlpZiAocmV0
KQo+ICsJCWdvdG8gZXJyX3Jlc2VydmU7Cj4gCS8qIENsZWFyIGFueSBub24tcHJlYWxsb2NhdGVk
IGJsb2NrcyAqLwo+ICAJZHJtX21tX2Zvcl9lYWNoX2hvbGUoZW50cnksICZnZ3R0LT52bS5tbSwg
aG9sZV9zdGFydCwgaG9sZV9lbmQpIHsKPiBAQCAtMjg5Myw3ICsyOTE2LDcgQEAgaW50IGk5MTVf
Z2VtX2luaXRfZ2d0dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAgCj4gKmRldl9wcml2KQo+ICAJ
cmV0dXJuIDA7Cj4gZXJyX2FwcGd0dDoKPiAtCWludGVsX2d1Y19yZWxlYXNlX2dndHRfdG9wKCZk
ZXZfcHJpdi0+Z3VjKTsKPiArCWdndHRfcmVsZWFzZV9ndWNfdG9wKGdndHQpOwo+ICBlcnJfcmVz
ZXJ2ZToKPiAgCWRybV9tbV9yZW1vdmVfbm9kZSgmZ2d0dC0+ZXJyb3JfY2FwdHVyZSk7Cj4gIAly
ZXR1cm4gcmV0Owo+IEBAIC0yOTIwLDcgKzI5NDMsNyBAQCB2b2lkIGk5MTVfZ2d0dF9jbGVhbnVw
X2h3KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICAKPiAqZGV2X3ByaXYpCj4gIAlpZiAoZHJtX21t
X25vZGVfYWxsb2NhdGVkKCZnZ3R0LT5lcnJvcl9jYXB0dXJlKSkKPiAgCQlkcm1fbW1fcmVtb3Zl
X25vZGUoJmdndHQtPmVycm9yX2NhcHR1cmUpOwo+IC0JaW50ZWxfZ3VjX3JlbGVhc2VfZ2d0dF90
b3AoJmRldl9wcml2LT5ndWMpOwo+ICsJZ2d0dF9yZWxlYXNlX2d1Y190b3AoZ2d0dCk7Cj4gCWlm
IChkcm1fbW1faW5pdGlhbGl6ZWQoJmdndHQtPnZtLm1tKSkgewo+ICAJCWludGVsX3ZndF9kZWJh
bGxvb24oZ2d0dCk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1
Yy5jICAKPiBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Yy5jCj4gaW5kZXggZDQ1ZDk3
NjI0NDAyLi5jNDBhNmVmZGQzM2EgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfZ3VjLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWMuYwo+IEBA
IC02ODUsMzAgKzY4NSwzIEBAIHN0cnVjdCBpOTE1X3ZtYSAqaW50ZWxfZ3VjX2FsbG9jYXRlX3Zt
YShzdHJ1Y3QgIAo+IGludGVsX2d1YyAqZ3VjLCB1MzIgc2l6ZSkKPiAgCWk5MTVfZ2VtX29iamVj
dF9wdXQob2JqKTsKPiAgCXJldHVybiB2bWE7Cj4gIH0KPiAtCj4gLWludCBpbnRlbF9ndWNfcmVz
ZXJ2ZV9nZ3R0X3RvcChzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCj4gLXsKPiAtCXN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1ID0gZ3VjX3RvX2k5MTUoZ3VjKTsKPiAtCXN0cnVjdCBpOTE1X2dn
dHQgKmdndHQgPSAmaTkxNS0+Z2d0dDsKPiAtCXU2NCBzaXplOwo+IC0JaW50IHJldDsKPiAtCj4g
LQlzaXplID0gZ2d0dC0+dm0udG90YWwgLSBHVUNfR0dUVF9UT1A7Cj4gLQo+IC0JcmV0ID0gaTkx
NV9nZW1fZ3R0X3Jlc2VydmUoJmdndHQtPnZtLCAmZ2d0dC0+dWNfZncsIHNpemUsCj4gLQkJCQkg
ICBHVUNfR0dUVF9UT1AsIEk5MTVfQ09MT1JfVU5FVklDVEFCTEUsCj4gLQkJCQkgICBQSU5fTk9F
VklDVCk7Cj4gLQlpZiAocmV0KQo+IC0JCURSTV9ERUJVR19EUklWRVIoIkd1QzogZmFpbGVkIHRv
IHJlc2VydmUgdG9wIG9mIGdndHRcbiIpOwo+IC0KPiAtCXJldHVybiByZXQ7Cj4gLX0KPiAtCj4g
LXZvaWQgaW50ZWxfZ3VjX3JlbGVhc2VfZ2d0dF90b3Aoc3RydWN0IGludGVsX2d1YyAqZ3VjKQo+
IC17Cj4gLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGd1Y190b19pOTE1KGd1Yyk7
Cj4gLQlzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0ID0gJmk5MTUtPmdndHQ7Cj4gLQo+IC0JaWYgKGRy
bV9tbV9ub2RlX2FsbG9jYXRlZCgmZ2d0dC0+dWNfZncpKQo+IC0JCWRybV9tbV9yZW1vdmVfbm9k
ZSgmZ2d0dC0+dWNfZncpOwo+IC19Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2ludGVsX2d1Yy5oICAKPiBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Yy5oCj4gaW5k
ZXggODVjM2IwMmEwYzA4Li4wOGM5MDZhYmRmYTIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfZ3VjLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9n
dWMuaAo+IEBAIC0xNzIsOCArMTcyLDYgQEAgaW50IGludGVsX2d1Y19hdXRoX2h1YyhzdHJ1Y3Qg
aW50ZWxfZ3VjICpndWMsIHUzMiAgCj4gcnNhX29mZnNldCk7Cj4gIGludCBpbnRlbF9ndWNfc3Vz
cGVuZChzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpOwo+ICBpbnQgaW50ZWxfZ3VjX3Jlc3VtZShzdHJ1
Y3QgaW50ZWxfZ3VjICpndWMpOwo+ICBzdHJ1Y3QgaTkxNV92bWEgKmludGVsX2d1Y19hbGxvY2F0
ZV92bWEoc3RydWN0IGludGVsX2d1YyAqZ3VjLCB1MzIgIAo+IHNpemUpOwo+IC1pbnQgaW50ZWxf
Z3VjX3Jlc2VydmVfZ2d0dF90b3Aoc3RydWN0IGludGVsX2d1YyAqZ3VjKTsKPiAtdm9pZCBpbnRl
bF9ndWNfcmVsZWFzZV9nZ3R0X3RvcChzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpOwo+IHN0YXRpYyBp
bmxpbmUgYm9vbCBpbnRlbF9ndWNfaXNfbG9hZGVkKHN0cnVjdCBpbnRlbF9ndWMgKmd1YykKPiAg
ewpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1n
ZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

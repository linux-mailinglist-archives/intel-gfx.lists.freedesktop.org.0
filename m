Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CEC6128DC7
	for <lists+intel-gfx@lfdr.de>; Fri, 24 May 2019 01:31:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 902566E08E;
	Thu, 23 May 2019 23:31:47 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1BD6B6E086
 for <intel-gfx@lists.freedesktop.org>; Thu, 23 May 2019 23:31:37 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 23 May 2019 16:31:36 -0700
X-ExtLoop1: 1
Received: from irvmail001.ir.intel.com ([163.33.26.43])
 by orsmga005.jf.intel.com with ESMTP; 23 May 2019 16:31:34 -0700
Received: from mwajdecz-MOBL1.ger.corp.intel.com
 (mwajdecz-mobl1.ger.corp.intel.com [10.249.139.89])
 by irvmail001.ir.intel.com (8.14.3/8.13.6/MailSET/Hub) with ESMTP id
 x4NNVN0f023503; Fri, 24 May 2019 00:31:33 +0100
From: Michal Wajdeczko <michal.wajdeczko@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 23 May 2019 23:30:35 +0000
Message-Id: <20190523233049.28020-9-michal.wajdeczko@intel.com>
X-Mailer: git-send-email 2.21.0.windows.1
In-Reply-To: <20190523233049.28020-1-michal.wajdeczko@intel.com>
References: <20190523233049.28020-1-michal.wajdeczko@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v4 08/22] drm/i915/guc: Update GuC ADS object
 definition
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TmV3IEd1QyBmaXJtd2FyZXMgdXNlIHVwZGF0ZWQgZGVmaW5pdGlvbnMgZm9yIHRoZSBBZGRpdGlv
bmFsIERhdGEKU3RydWN0dXJlcyAoQURTKS4KCnYyOiBhZGQgbm90ZSBhYm91dCBHZW45IGRlZmlu
aXRpb24gbWlzbWF0Y2ggKERhbmllbGUpCiAgICByZW5hbWUgX19pbnRlbF9lbmdpbmVfY29udGV4
dF9zaXplIChEYW5pZWxlKQoKU2lnbmVkLW9mZi1ieTogTWljaGFsIFdhamRlY3prbyA8bWljaGFs
LndhamRlY3prb0BpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IERhbmllbGUgQ2VyYW9sbyBTcHVy
aW8gPGRhbmllbGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEZlcm5h
bmRvIFBhY2hlY28gPGZlcm5hbmRvLnBhY2hlY29AaW50ZWwuY29tPgpDYzogSm9vbmFzIExhaHRp
bmVuIDxqb29uYXMubGFodGluZW5AbGludXguaW50ZWwuY29tPgpDYzogSm9obiBTcG90c3dvb2Qg
PGpvaG4uYS5zcG90c3dvb2RAaW50ZWwuY29tPgpDYzogVG9tYXN6IExpcyA8dG9tYXN6Lmxpc0Bp
bnRlbC5jb20+ClJldmlld2VkLWJ5OiBEYW5pZWxlIENlcmFvbG8gU3B1cmlvIDxkYW5pZWxlLmNl
cmFvbG9zcHVyaW9AaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZS5oICAgIHwgIDIgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5l
X2NzLmMgfCAgOSArLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19hZHMuYyAgICAg
IHwgOTUgKysrKysrKysrKysrKystLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X2d1Y19md2lmLmggICAgIHwgOTQgKysrKysrKysrKysrKy0tLS0tLS0tLQogNCBmaWxlcyBjaGFu
Z2VkLCAxMjIgaW5zZXJ0aW9ucygrKSwgNzggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9lbmdpbmUuaAppbmRleCA5MzU5YjNhN2FkOWMuLjFjMGRiMTUxZjBiMSAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKQEAgLTUyNiw2ICs1MjYsOCBAQCBr
dGltZV90IGludGVsX2VuZ2luZV9nZXRfYnVzeV90aW1lKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSk7CiBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICoKIGludGVsX2VuZ2luZV9maW5kX2FjdGl2
ZV9yZXF1ZXN0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7CiAKK3UzMiBpbnRlbF9l
bmdpbmVfY29udGV4dF9zaXplKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCB1OCBjbGFz
cyk7CisKICNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9TRUxGVEVTVCkKIAogc3RhdGlj
IGlubGluZSBib29sIGluamVjdF9wcmVlbXB0X2hhbmcoc3RydWN0IGludGVsX2VuZ2luZV9leGVj
bGlzdHMgKmV4ZWNsaXN0cykKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2VuZ2luZV9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2Nz
LmMKaW5kZXggMjU5MGY1OTA0YjY3Li4xYzgzZWE5YWRhYzAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCkBAIC0xNTYsNyArMTU2LDcgQEAgc3RhdGljIGNvbnN0
IHN0cnVjdCBlbmdpbmVfaW5mbyBpbnRlbF9lbmdpbmVzW10gPSB7CiB9OwogCiAvKioKLSAqIF9f
X2ludGVsX2VuZ2luZV9jb250ZXh0X3NpemUoKSAtIHJldHVybiB0aGUgc2l6ZSBvZiB0aGUgY29u
dGV4dCBmb3IgYW4gZW5naW5lCisgKiBpbnRlbF9lbmdpbmVfY29udGV4dF9zaXplKCkgLSByZXR1
cm4gdGhlIHNpemUgb2YgdGhlIGNvbnRleHQgZm9yIGFuIGVuZ2luZQogICogQGRldl9wcml2OiBp
OTE1IGRldmljZSBwcml2YXRlCiAgKiBAY2xhc3M6IGVuZ2luZSBjbGFzcwogICoKQEAgLTE2OSw4
ICsxNjksNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGVuZ2luZV9pbmZvIGludGVsX2VuZ2luZXNb
XSA9IHsKICAqIGluIExSQyBtb2RlLCBidXQgZG9lcyBub3QgaW5jbHVkZSB0aGUgInNoYXJlZCBk
YXRhIHBhZ2UiIHVzZWQgd2l0aAogICogR3VDIHN1Ym1pc3Npb24uIFRoZSBjYWxsZXIgc2hvdWxk
IGFjY291bnQgZm9yIHRoaXMgaWYgdXNpbmcgdGhlIEd1Qy4KICAqLwotc3RhdGljIHUzMgotX19p
bnRlbF9lbmdpbmVfY29udGV4dF9zaXplKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
diwgdTggY2xhc3MpCit1MzIgaW50ZWxfZW5naW5lX2NvbnRleHRfc2l6ZShzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIHU4IGNsYXNzKQogewogCXUzMiBjeHRfc2l6ZTsKIApAQCAt
MzI3LDggKzMyNiw4IEBAIGludGVsX2VuZ2luZV9zZXR1cChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsCiAKIAllbmdpbmUtPnVhYmlfY2xhc3MgPSBpbnRlbF9lbmdpbmVfY2xhc3Nl
c1tpbmZvLT5jbGFzc10udWFiaV9jbGFzczsKIAotCWVuZ2luZS0+Y29udGV4dF9zaXplID0gX19p
bnRlbF9lbmdpbmVfY29udGV4dF9zaXplKGRldl9wcml2LAotCQkJCQkJCSAgIGVuZ2luZS0+Y2xh
c3MpOworCWVuZ2luZS0+Y29udGV4dF9zaXplID0gaW50ZWxfZW5naW5lX2NvbnRleHRfc2l6ZShk
ZXZfcHJpdiwKKwkJCQkJCQkgZW5naW5lLT5jbGFzcyk7CiAJaWYgKFdBUk5fT04oZW5naW5lLT5j
b250ZXh0X3NpemUgPiBCSVQoMjApKSkKIAkJZW5naW5lLT5jb250ZXh0X3NpemUgPSAwOwogCWlm
IChlbmdpbmUtPmNvbnRleHRfc2l6ZSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2ludGVsX2d1Y19hZHMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19hZHMuYwpp
bmRleCBiZWM2MmYzNGIxNWEuLjFhYTFlYzBmZjRhMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfZ3VjX2Fkcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X2d1Y19hZHMuYwpAQCAtNTEsNyArNTEsNyBAQCBzdGF0aWMgdm9pZCBndWNfcG9saWNpZXNfaW5p
dChzdHJ1Y3QgZ3VjX3BvbGljaWVzICpwb2xpY2llcykKIAlwb2xpY2llcy0+bWF4X251bV93b3Jr
X2l0ZW1zID0gUE9MSUNZX01BWF9OVU1fV0k7CiAKIAlmb3IgKHAgPSAwOyBwIDwgR1VDX0NMSUVO
VF9QUklPUklUWV9OVU07IHArKykgewotCQlmb3IgKGkgPSBHVUNfUkVOREVSX0VOR0lORTsgaSA8
IEdVQ19NQVhfRU5HSU5FU19OVU07IGkrKykgeworCQlmb3IgKGkgPSAwOyBpIDwgR1VDX01BWF9F
TkdJTkVfQ0xBU1NFUzsgaSsrKSB7CiAJCQlwb2xpY3kgPSAmcG9saWNpZXMtPnBvbGljeVtwXVtp
XTsKIAogCQkJZ3VjX3BvbGljeV9pbml0KHBvbGljeSk7CkBAIC02MSw2ICs2MSwxMSBAQCBzdGF0
aWMgdm9pZCBndWNfcG9saWNpZXNfaW5pdChzdHJ1Y3QgZ3VjX3BvbGljaWVzICpwb2xpY2llcykK
IAlwb2xpY2llcy0+aXNfdmFsaWQgPSAxOwogfQogCitzdGF0aWMgdm9pZCBndWNfY3RfcG9vbF9l
bnRyaWVzX2luaXQoc3RydWN0IGd1Y19jdF9wb29sX2VudHJ5ICpwb29sLCB1MzIgbnVtKQorewor
CW1lbXNldChwb29sLCAwLCBudW0gKiBzaXplb2YoKnBvb2wpKTsKK30KKwogLyoKICAqIFRoZSBm
aXJzdCA4MCBkd29yZHMgb2YgdGhlIHJlZ2lzdGVyIHN0YXRlIGNvbnRleHQsIGNvbnRhaW5pbmcg
dGhlCiAgKiBleGVjbGlzdHMgYW5kIHBwZ3R0IHJlZ2lzdGVycy4KQEAgLTc1LDIwICs4MCwyMSBA
QCBzdGF0aWMgdm9pZCBndWNfcG9saWNpZXNfaW5pdChzdHJ1Y3QgZ3VjX3BvbGljaWVzICpwb2xp
Y2llcykKIGludCBpbnRlbF9ndWNfYWRzX2NyZWF0ZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiB7
CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gZ3VjX3RvX2k5MTUoZ3VjKTsK
LQlzdHJ1Y3QgaTkxNV92bWEgKnZtYSwgKmtlcm5lbF9jdHhfdm1hOwotCXN0cnVjdCBwYWdlICpw
YWdlOworCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOwogCS8qIFRoZSBhZHMgb2JqIGluY2x1ZGVzIHRo
ZSBzdHJ1Y3QgaXRzZWxmIGFuZCBidWZmZXJzIHBhc3NlZCB0byBHdUMgKi8KIAlzdHJ1Y3Qgewog
CQlzdHJ1Y3QgZ3VjX2FkcyBhZHM7CiAJCXN0cnVjdCBndWNfcG9saWNpZXMgcG9saWNpZXM7CiAJ
CXN0cnVjdCBndWNfbW1pb19yZWdfc3RhdGUgcmVnX3N0YXRlOworCQlzdHJ1Y3QgZ3VjX2d0X3N5
c3RlbV9pbmZvIHN5c3RlbV9pbmZvOworCQlzdHJ1Y3QgZ3VjX2NsaWVudHNfaW5mbyBjbGllbnRz
X2luZm87CisJCXN0cnVjdCBndWNfY3RfcG9vbF9lbnRyeSBjdF9wb29sW0dVQ19DVF9QT09MX1NJ
WkVdOwogCQl1OCByZWdfc3RhdGVfYnVmZmVyW0dVQ19TM19TQVZFX1NQQUNFX1BBR0VTICogUEFH
RV9TSVpFXTsKIAl9IF9fcGFja2VkICpibG9iOwotCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZTsKLQllbnVtIGludGVsX2VuZ2luZV9pZCBpZDsKLQljb25zdCB1MzIgc2tpcHBlZF9vZmZz
ZXQgPSBMUkNfSEVBREVSX1BBR0VTICogUEFHRV9TSVpFOwogCWNvbnN0IHUzMiBza2lwcGVkX3Np
emUgPSBMUkNfUFBIV1NQX1NaICogUEFHRV9TSVpFICsgTFJfSFdfQ09OVEVYVF9TSVpFOwogCXUz
MiBiYXNlOworCXU4IGVuZ2luZV9jbGFzczsKKwlpbnQgcmV0OwogCiAJR0VNX0JVR19PTihndWMt
PmFkc192bWEpOwogCkBAIC05OCw1MSArMTA0LDY4IEBAIGludCBpbnRlbF9ndWNfYWRzX2NyZWF0
ZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAKIAlndWMtPmFkc192bWEgPSB2bWE7CiAKLQlwYWdl
ID0gaTkxNV92bWFfZmlyc3RfcGFnZSh2bWEpOwotCWJsb2IgPSBrbWFwKHBhZ2UpOworCWJsb2Ig
PSBpOTE1X2dlbV9vYmplY3RfcGluX21hcChndWMtPmFkc192bWEtPm9iaiwgSTkxNV9NQVBfV0Ip
OworCWlmIChJU19FUlIoYmxvYikpIHsKKwkJcmV0ID0gUFRSX0VSUihibG9iKTsKKwkJZ290byBl
cnJfdm1hOworCX0KIAogCS8qIEd1QyBzY2hlZHVsaW5nIHBvbGljaWVzICovCiAJZ3VjX3BvbGlj
aWVzX2luaXQoJmJsb2ItPnBvbGljaWVzKTsKIAotCS8qIE1NSU8gcmVnIHN0YXRlICovCi0JZm9y
X2VhY2hfZW5naW5lKGVuZ2luZSwgZGV2X3ByaXYsIGlkKSB7Ci0JCWJsb2ItPnJlZ19zdGF0ZS53
aGl0ZV9saXN0W2VuZ2luZS0+Z3VjX2lkXS5tbWlvX3N0YXJ0ID0KLQkJCWVuZ2luZS0+bW1pb19i
YXNlICsgR1VDX01NSU9fV0hJVEVfTElTVF9TVEFSVDsKLQotCQkvKiBOb3RoaW5nIHRvIGJlIHNh
dmVkIG9yIHJlc3RvcmVkIGZvciBub3cuICovCi0JCWJsb2ItPnJlZ19zdGF0ZS53aGl0ZV9saXN0
W2VuZ2luZS0+Z3VjX2lkXS5jb3VudCA9IDA7Ci0JfQotCiAJLyoKLQkgKiBUaGUgR3VDIHJlcXVp
cmVzIGEgIkdvbGRlbiBDb250ZXh0IiB3aGVuIGl0IHJlaW5pdGlhbGlzZXMKLQkgKiBlbmdpbmVz
IGFmdGVyIGEgcmVzZXQuIEhlcmUgd2UgdXNlIHRoZSBSZW5kZXIgcmluZyBkZWZhdWx0Ci0JICog
Y29udGV4dCwgd2hpY2ggbXVzdCBhbHJlYWR5IGV4aXN0IGFuZCBiZSBwaW5uZWQgaW4gdGhlIEdH
VFQsCi0JICogc28gaXRzIGFkZHJlc3Mgd29uJ3QgY2hhbmdlIGFmdGVyIHdlJ3ZlIHRvbGQgdGhl
IEd1QyB3aGVyZQotCSAqIHRvIGZpbmQgaXQuIE5vdGUgdGhhdCB3ZSBoYXZlIHRvIHNraXAgb3Vy
IGhlYWRlciAoMSBwYWdlKSwKLQkgKiBiZWNhdXNlIG91ciBHdUMgc2hhcmVkIGRhdGEgaXMgdGhl
cmUuCisJICogR3VDIGV4cGVjdHMgYSBwZXItZW5naW5lLWNsYXNzIGNvbnRleHQgaW1hZ2UgYW5k
IHNpemUKKwkgKiAobWludXMgaHdzcCBhbmQgcmluZyBjb250ZXh0KS4gVGhlIGNvbnRleHQgaW1h
Z2Ugd2lsbCBiZQorCSAqIHVzZWQgdG8gcmVpbml0aWFsaXplIGVuZ2luZXMgYWZ0ZXIgYSByZXNl
dC4gSXQgbXVzdCBleGlzdAorCSAqIGFuZCBiZSBwaW5uZWQgaW4gdGhlIEdHVFQsIHNvIHRoYXQg
dGhlIGFkZHJlc3Mgd29uJ3QgY2hhbmdlIGFmdGVyCisJICogd2UgaGF2ZSB0b2xkIEd1QyB3aGVy
ZSB0byBmaW5kIGl0LiBUaGUgY29udGV4dCBzaXplIHdpbGwgYmUgdXNlZAorCSAqIHRvIHZhbGlk
YXRlIHRoYXQgdGhlIExSQyBiYXNlICsgc2l6ZSBmYWxsIHdpdGhpbiBhbGxvd2VkIEdHVFQuCiAJ
ICovCi0Ja2VybmVsX2N0eF92bWEgPSBkZXZfcHJpdi0+ZW5naW5lW1JDUzBdLT5rZXJuZWxfY29u
dGV4dC0+c3RhdGU7Ci0JYmxvYi0+YWRzLmdvbGRlbl9jb250ZXh0X2xyY2EgPQotCQlpbnRlbF9n
dWNfZ2d0dF9vZmZzZXQoZ3VjLCBrZXJuZWxfY3R4X3ZtYSkgKyBza2lwcGVkX29mZnNldDsKKwlm
b3IgKGVuZ2luZV9jbGFzcyA9IDA7IGVuZ2luZV9jbGFzcyA8PSBNQVhfRU5HSU5FX0NMQVNTOyAr
K2VuZ2luZV9jbGFzcykgeworCQlpZiAoZW5naW5lX2NsYXNzID09IE9USEVSX0NMQVNTKQorCQkJ
Y29udGludWU7CisJCS8qCisJCSAqIFRPRE86IFNldCBjb250ZXh0IHBvaW50ZXIgdG8gZGVmYXVs
dCBzdGF0ZSB0byBhbGxvdworCQkgKiBHdUMgdG8gcmUtaW5pdCBndWlsdHkgY29udGV4dHMgYWZ0
ZXIgaW50ZXJuYWwgcmVzZXQuCisJCSAqLworCQlibG9iLT5hZHMuZ29sZGVuX2NvbnRleHRfbHJj
YVtlbmdpbmVfY2xhc3NdID0gMDsKKwkJYmxvYi0+YWRzLmVuZ19zdGF0ZV9zaXplW2VuZ2luZV9j
bGFzc10gPQorCQkJaW50ZWxfZW5naW5lX2NvbnRleHRfc2l6ZShkZXZfcHJpdiwgZW5naW5lX2Ns
YXNzKSAtCisJCQlza2lwcGVkX3NpemU7CisJfQogCi0JLyoKLQkgKiBUaGUgR3VDIGV4cGVjdHMg
dXMgdG8gZXhjbHVkZSB0aGUgcG9ydGlvbiBvZiB0aGUgY29udGV4dCBpbWFnZSB0aGF0Ci0JICog
aXQgc2tpcHMgZnJvbSB0aGUgc2l6ZSBpdCBpcyB0byByZWFkLiBJdCBzdGFydHMgcmVhZGluZyBm
cm9tIGFmdGVyCi0JICogdGhlIGV4ZWNsaXN0IGNvbnRleHQgKHNvIHNraXBwaW5nIHRoZSBmaXJz
dCBwYWdlIFtQUEhXU1BdIGFuZCA4MAotCSAqIGR3b3JkcykuIFdlaXJkIGd1YyBpcyB3ZWlyZC4K
LQkgKi8KLQlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBkZXZfcHJpdiwgaWQpCi0JCWJsb2ItPmFk
cy5lbmdfc3RhdGVfc2l6ZVtlbmdpbmUtPmd1Y19pZF0gPQotCQkJZW5naW5lLT5jb250ZXh0X3Np
emUgLSBza2lwcGVkX3NpemU7CisJLyogU3lzdGVtIGluZm8gKi8KKwlibG9iLT5zeXN0ZW1faW5m
by5zbGljZV9lbmFibGVkID0gaHdlaWdodDgoUlVOVElNRV9JTkZPKGRldl9wcml2KS0+c3NldS5z
bGljZV9tYXNrKTsKKwlibG9iLT5zeXN0ZW1faW5mby5yY3NfZW5hYmxlZCA9IDE7CisJYmxvYi0+
c3lzdGVtX2luZm8uYmNzX2VuYWJsZWQgPSAxOworCisJYmxvYi0+c3lzdGVtX2luZm8udmRib3hf
ZW5hYmxlX21hc2sgPSBWREJPWF9NQVNLKGRldl9wcml2KTsKKwlibG9iLT5zeXN0ZW1faW5mby52
ZWJveF9lbmFibGVfbWFzayA9IFZFQk9YX01BU0soZGV2X3ByaXYpOworCWJsb2ItPnN5c3RlbV9p
bmZvLnZkYm94X3NmY19zdXBwb3J0X21hc2sgPSBSVU5USU1FX0lORk8oZGV2X3ByaXYpLT52ZGJv
eF9zZmNfYWNjZXNzOwogCiAJYmFzZSA9IGludGVsX2d1Y19nZ3R0X29mZnNldChndWMsIHZtYSk7
CisKKwkvKiBDbGllbnRzIGluZm8gICovCisJZ3VjX2N0X3Bvb2xfZW50cmllc19pbml0KGJsb2It
PmN0X3Bvb2wsIEFSUkFZX1NJWkUoYmxvYi0+Y3RfcG9vbCkpOworCisJYmxvYi0+Y2xpZW50c19p
bmZvLmNsaWVudHNfbnVtID0gMTsKKwlibG9iLT5jbGllbnRzX2luZm8uY3RfcG9vbF9hZGRyID0g
YmFzZSArIHB0cl9vZmZzZXQoYmxvYiwgY3RfcG9vbCk7CisJYmxvYi0+Y2xpZW50c19pbmZvLmN0
X3Bvb2xfY291bnQgPSBBUlJBWV9TSVpFKGJsb2ItPmN0X3Bvb2wpOworCisJLyogQURTICovCiAJ
YmxvYi0+YWRzLnNjaGVkdWxlcl9wb2xpY2llcyA9IGJhc2UgKyBwdHJfb2Zmc2V0KGJsb2IsIHBv
bGljaWVzKTsKIAlibG9iLT5hZHMucmVnX3N0YXRlX2J1ZmZlciA9IGJhc2UgKyBwdHJfb2Zmc2V0
KGJsb2IsIHJlZ19zdGF0ZV9idWZmZXIpOwogCWJsb2ItPmFkcy5yZWdfc3RhdGVfYWRkciA9IGJh
c2UgKyBwdHJfb2Zmc2V0KGJsb2IsIHJlZ19zdGF0ZSk7CisJYmxvYi0+YWRzLmd0X3N5c3RlbV9p
bmZvID0gYmFzZSArIHB0cl9vZmZzZXQoYmxvYiwgc3lzdGVtX2luZm8pOworCWJsb2ItPmFkcy5j
bGllbnRzX2luZm8gPSBiYXNlICsgcHRyX29mZnNldChibG9iLCBjbGllbnRzX2luZm8pOwogCi0J
a3VubWFwKHBhZ2UpOworCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAoZ3VjLT5hZHNfdm1hLT5v
YmopOwogCiAJcmV0dXJuIDA7CisKK2Vycl92bWE6CisJaTkxNV92bWFfdW5waW5fYW5kX3JlbGVh
c2UoJmd1Yy0+YWRzX3ZtYSwgMCk7CisJcmV0dXJuIHJldDsKIH0KIAogdm9pZCBpbnRlbF9ndWNf
YWRzX2Rlc3Ryb3koc3RydWN0IGludGVsX2d1YyAqZ3VjKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaW50ZWxfZ3VjX2Z3aWYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X2d1Y19md2lmLmgKaW5kZXggOWI0NDM2YWNiYTE3Li5mYTc0NWE1OGQzOGQgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19md2lmLmgKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfZ3VjX2Z3aWYuaApAQCAtMzksNiArMzksMTQgQEAKICNkZWZpbmUgR1VD
X1ZJREVPX0VOR0lORTIJCTQKICNkZWZpbmUgR1VDX01BWF9FTkdJTkVTX05VTQkJKEdVQ19WSURF
T19FTkdJTkUyICsgMSkKIAorLyoKKyAqIFhYWDogQmV3YXJlIHRoYXQgR2VuOSBmaXJtd2FyZSAz
Mi54IHVzZXMgd3JvbmcgZGVmaW5pdGlvbiBmb3IKKyAqIEdVQ19NQVhfSU5TVEFOQ0VTX1BFUl9D
TEFTUyAoMSkgYnV0IHRoaXMgaXMgaGFybWxlc3MgZm9yIHVzIG5vdworICogYXMgd2UgYXJlIG5v
dCBlbmFibGluZyBHdUMgc3VibWlzc2lvbiBtb2RlIHdoZXJlIHRoaXMgd2lsbCBiZSB1c2VkCisg
Ki8KKyNkZWZpbmUgR1VDX01BWF9FTkdJTkVfQ0xBU1NFUwkJNQorI2RlZmluZSBHVUNfTUFYX0lO
U1RBTkNFU19QRVJfQ0xBU1MJNAorCiAjZGVmaW5lIEdVQ19ET09SQkVMTF9JTlZBTElECQkyNTYK
IAogI2RlZmluZSBHVUNfREJfU0laRQkJCShQQUdFX1NJWkUpCkBAIC0zODYsMjMgKzM5NCwxOSBA
QCBzdHJ1Y3QgZ3VjX2N0X2J1ZmZlcl9kZXNjIHsKIHN0cnVjdCBndWNfcG9saWN5IHsKIAkvKiBU
aW1lIGZvciBvbmUgd29ya2xvYWQgdG8gZXhlY3V0ZS4gKGluIG1pY3JvIHNlY29uZHMpICovCiAJ
dTMyIGV4ZWN1dGlvbl9xdWFudHVtOwotCXUzMiByZXNlcnZlZDE7Ci0KIAkvKiBUaW1lIHRvIHdh
aXQgZm9yIGEgcHJlZW1wdGlvbiByZXF1ZXN0IHRvIGNvbXBsZXRlZCBiZWZvcmUgaXNzdWluZyBh
CiAJICogcmVzZXQuIChpbiBtaWNybyBzZWNvbmRzKS4gKi8KIAl1MzIgcHJlZW1wdGlvbl90aW1l
OwotCiAJLyogSG93IG11Y2ggdGltZSB0byBhbGxvdyB0byBydW4gYWZ0ZXIgdGhlIGZpcnN0IGZh
dWx0IGlzIG9ic2VydmVkLgogCSAqIFRoZW4gcHJlZW1wdCBhZnRlcndhcmRzLiAoaW4gbWljcm8g
c2Vjb25kcykgKi8KIAl1MzIgZmF1bHRfdGltZTsKLQogCXUzMiBwb2xpY3lfZmxhZ3M7Ci0JdTMy
IHJlc2VydmVkWzJdOworCXUzMiByZXNlcnZlZFs4XTsKIH0gX19wYWNrZWQ7CiAKIHN0cnVjdCBn
dWNfcG9saWNpZXMgewotCXN0cnVjdCBndWNfcG9saWN5IHBvbGljeVtHVUNfQ0xJRU5UX1BSSU9S
SVRZX05VTV1bR1VDX01BWF9FTkdJTkVTX05VTV07Ci0KKwlzdHJ1Y3QgZ3VjX3BvbGljeSBwb2xp
Y3lbR1VDX0NMSUVOVF9QUklPUklUWV9OVU1dW0dVQ19NQVhfRU5HSU5FX0NMQVNTRVNdOworCXUz
MiBzdWJtaXNzaW9uX3F1ZXVlX2RlcHRoW0dVQ19NQVhfRU5HSU5FX0NMQVNTRVNdOwogCS8qIElu
IG1pY3JvIHNlY29uZHMuIEhvdyBtdWNoIHRpbWUgdG8gYWxsb3cgYmVmb3JlIERQQyBwcm9jZXNz
aW5nIGlzCiAJICogY2FsbGVkIGJhY2sgdmlhIGludGVycnVwdCAodG8gcHJldmVudCBEUEMgcXVl
dWUgZHJhaW4gc3RhcnZpbmcpLgogCSAqIFR5cGljYWxseSAxMDAwcyBvZiBtaWNybyBzZWNvbmRz
IChleGFtcGxlIG9ubHksIG5vdCBncmFudWxhcml0eSkuICovCkBAIC00MTUsNTcgKzQxOSw3MyBA
QCBzdHJ1Y3QgZ3VjX3BvbGljaWVzIHsKIAkgKiBpZGxlLiAqLwogCXUzMiBtYXhfbnVtX3dvcmtf
aXRlbXM7CiAKLQl1MzIgcmVzZXJ2ZWRbMTldOworCXUzMiByZXNlcnZlZFs0XTsKIH0gX19wYWNr
ZWQ7CiAKIC8qIEd1QyBNTUlPIHJlZyBzdGF0ZSBzdHJ1Y3QgKi8KIAotI2RlZmluZSBHVUNfUkVH
U0VUX0ZMQUdTX05PTkUJCTB4MAotI2RlZmluZSBHVUNfUkVHU0VUX1BPV0VSQ1lDTEUJCTB4MQot
I2RlZmluZSBHVUNfUkVHU0VUX01BU0tFRAkJMHgyCi0jZGVmaW5lIEdVQ19SRUdTRVRfRU5HSU5F
UkVTRVQJCTB4NAotI2RlZmluZSBHVUNfUkVHU0VUX1NBVkVfREVGQVVMVF9WQUxVRQkweDgKLSNk
ZWZpbmUgR1VDX1JFR1NFVF9TQVZFX0NVUlJFTlRfVkFMVUUJMHgxMAogCi0jZGVmaW5lIEdVQ19S
RUdTRVRfTUFYX1JFR0lTVEVSUwkyNQotI2RlZmluZSBHVUNfTU1JT19XSElURV9MSVNUX1NUQVJU
CTB4MjRkMAotI2RlZmluZSBHVUNfTU1JT19XSElURV9MSVNUX01BWAkJMTIKKyNkZWZpbmUgR1VD
X1JFR1NFVF9NQVhfUkVHSVNURVJTCTY0CiAjZGVmaW5lIEdVQ19TM19TQVZFX1NQQUNFX1BBR0VT
CQkxMAogCi1zdHJ1Y3QgZ3VjX21taW9fcmVnc2V0IHsKLQlzdHJ1Y3QgX19wYWNrZWQgewotCQl1
MzIgb2Zmc2V0OwotCQl1MzIgdmFsdWU7Ci0JCXUzMiBmbGFnczsKLQl9IHJlZ2lzdGVyc1tHVUNf
UkVHU0VUX01BWF9SRUdJU1RFUlNdOworc3RydWN0IGd1Y19tbWlvX3JlZyB7CisJdTMyIG9mZnNl
dDsKKwl1MzIgdmFsdWU7CisJdTMyIGZsYWdzOworI2RlZmluZSBHVUNfUkVHU0VUX01BU0tFRAkJ
KDEgPDwgMCkKK30gX19wYWNrZWQ7CiAKK3N0cnVjdCBndWNfbW1pb19yZWdzZXQgeworCXN0cnVj
dCBndWNfbW1pb19yZWcgcmVnaXN0ZXJzW0dVQ19SRUdTRVRfTUFYX1JFR0lTVEVSU107CiAJdTMy
IHZhbHVlc192YWxpZDsKIAl1MzIgbnVtYmVyX29mX3JlZ2lzdGVyczsKIH0gX19wYWNrZWQ7CiAK
LS8qIE1NSU8gcmVnaXN0ZXJzIHRoYXQgYXJlIHNldCBhcyBub24gcHJpdmlsZWdlZCAqLwotc3Ry
dWN0IG1taW9fd2hpdGVfbGlzdCB7Ci0JdTMyIG1taW9fc3RhcnQ7Ci0JdTMyIG9mZnNldHNbR1VD
X01NSU9fV0hJVEVfTElTVF9NQVhdOwotCXUzMiBjb3VudDsKKy8qIEd1QyByZWdpc3RlciBzZXRz
ICovCitzdHJ1Y3QgZ3VjX21taW9fcmVnX3N0YXRlIHsKKwlzdHJ1Y3QgZ3VjX21taW9fcmVnc2V0
IGVuZ2luZV9yZWdbR1VDX01BWF9FTkdJTkVfQ0xBU1NFU11bR1VDX01BWF9JTlNUQU5DRVNfUEVS
X0NMQVNTXTsKKwl1MzIgcmVzZXJ2ZWRbOThdOwogfSBfX3BhY2tlZDsKIAotc3RydWN0IGd1Y19t
bWlvX3JlZ19zdGF0ZSB7Ci0Jc3RydWN0IGd1Y19tbWlvX3JlZ3NldCBnbG9iYWxfcmVnOwotCXN0
cnVjdCBndWNfbW1pb19yZWdzZXQgZW5naW5lX3JlZ1tHVUNfTUFYX0VOR0lORVNfTlVNXTsKLQlz
dHJ1Y3QgbW1pb193aGl0ZV9saXN0IHdoaXRlX2xpc3RbR1VDX01BWF9FTkdJTkVTX05VTV07Cisv
KiBIVyBpbmZvICovCitzdHJ1Y3QgZ3VjX2d0X3N5c3RlbV9pbmZvIHsKKwl1MzIgc2xpY2VfZW5h
YmxlZDsKKwl1MzIgcmNzX2VuYWJsZWQ7CisJdTMyIHJlc2VydmVkMDsKKwl1MzIgYmNzX2VuYWJs
ZWQ7CisJdTMyIHZkYm94X2VuYWJsZV9tYXNrOworCXUzMiB2ZGJveF9zZmNfc3VwcG9ydF9tYXNr
OworCXUzMiB2ZWJveF9lbmFibGVfbWFzazsKKwl1MzIgcmVzZXJ2ZWRbOV07CiB9IF9fcGFja2Vk
OwogCi0vKiBHdUMgQWRkaXRpb25hbCBEYXRhIFN0cnVjdCAqLworLyogQ2xpZW50cyBpbmZvICov
CitzdHJ1Y3QgZ3VjX2N0X3Bvb2xfZW50cnkgeworCXN0cnVjdCBndWNfY3RfYnVmZmVyX2Rlc2Mg
ZGVzYzsKKwl1MzIgcmVzZXJ2ZWRbN107Cit9IF9fcGFja2VkOwogCisjZGVmaW5lIEdVQ19DVF9Q
T09MX1NJWkUJMgorCitzdHJ1Y3QgZ3VjX2NsaWVudHNfaW5mbyB7CisJdTMyIGNsaWVudHNfbnVt
OworCXUzMiByZXNlcnZlZDBbMTNdOworCXUzMiBjdF9wb29sX2FkZHI7CisJdTMyIGN0X3Bvb2xf
Y291bnQ7CisJdTMyIHJlc2VydmVkWzRdOworfSBfX3BhY2tlZDsKKworLyogR3VDIEFkZGl0aW9u
YWwgRGF0YSBTdHJ1Y3QgKi8KIHN0cnVjdCBndWNfYWRzIHsKIAl1MzIgcmVnX3N0YXRlX2FkZHI7
CiAJdTMyIHJlZ19zdGF0ZV9idWZmZXI7Ci0JdTMyIGdvbGRlbl9jb250ZXh0X2xyY2E7CiAJdTMy
IHNjaGVkdWxlcl9wb2xpY2llczsKLQl1MzIgcmVzZXJ2ZWQwWzNdOwotCXUzMiBlbmdfc3RhdGVf
c2l6ZVtHVUNfTUFYX0VOR0lORVNfTlVNXTsKLQl1MzIgcmVzZXJ2ZWQyWzRdOworCXUzMiBndF9z
eXN0ZW1faW5mbzsKKwl1MzIgY2xpZW50c19pbmZvOworCXUzMiBjb250cm9sX2RhdGE7CisJdTMy
IGdvbGRlbl9jb250ZXh0X2xyY2FbR1VDX01BWF9FTkdJTkVfQ0xBU1NFU107CisJdTMyIGVuZ19z
dGF0ZV9zaXplW0dVQ19NQVhfRU5HSU5FX0NMQVNTRVNdOworCXUzMiByZXNlcnZlZFsxNl07CiB9
IF9fcGFja2VkOwogCiAvKiBHdUMgbG9nZ2luZyBzdHJ1Y3R1cmVzICovCi0tIAoyLjE5LjIKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBt
YWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

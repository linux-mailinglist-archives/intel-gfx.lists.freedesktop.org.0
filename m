Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8DABD247065
	for <lists+intel-gfx@lfdr.de>; Mon, 17 Aug 2020 20:08:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C43C189E43;
	Mon, 17 Aug 2020 18:08:57 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CB8A989E35
 for <intel-gfx@lists.freedesktop.org>; Mon, 17 Aug 2020 18:08:56 +0000 (UTC)
IronPort-SDR: B/6z2xiXU+ZYcXa9B8y8f0h0w3nIruixWbcdzQ+0qcFOww4LH4HkvirJAxbr3kyTWpfpRB993x
 R3tPzs1jtJnQ==
X-IronPort-AV: E=McAfee;i="6000,8403,9716"; a="152405035"
X-IronPort-AV: E=Sophos;i="5.76,324,1592895600"; d="scan'208";a="152405035"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga102.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 17 Aug 2020 11:08:56 -0700
IronPort-SDR: xcWAzzvzAeOPXxO0oIefp+iGIVlPXpwLAxxu4TlJq1fvUEWVD3NCEnc0Asg+FFbnmO3JrHSYcK
 R2hZ9DRqyARA==
X-IronPort-AV: E=Sophos;i="5.76,324,1592895600"; d="scan'208";a="279185086"
Received: from ideak-desk.fi.intel.com (HELO localhost) ([10.237.68.141])
 by fmsmga008-auth.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 17 Aug 2020 11:08:55 -0700
From: Imre Deak <imre.deak@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 17 Aug 2020 21:08:53 +0300
Message-Id: <20200817180853.5874-1-imre.deak@intel.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200714163236.14105-1-imre.deak@intel.com>
References: <20200714163236.14105-1-imre.deak@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2] drm/i915/tgl+: Fix Combo PHY DPLL fractional
 divider for 38.4MHz ref clock
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXBwbHkgRGlzcGxheSBXQSAjMjIwMTA0OTI0MzIgZm9yIGNvbWJvIFBIWSBQTExzIHRvby4gVGhp
cyBzaG91bGQgZml4IGEKcHJvYmxlbSB3aGVyZSB0aGUgUExMIG91dHB1dCBmcmVxdWVuY3kgaXMg
c2xpZ2h0bHkgb2ZmIHdpdGggdGhlIGN1cnJlbnQKUExMIGZyYWN0aW9uYWwgZGl2aWRlciB2YWx1
ZS4KCkkgaGF2ZW4ndCBzZWVuIGFuIGFjdHVhbCBjYXNlIHdoZXJlIHRoaXMgY2F1c2VzIGEgcHJv
YmxlbSwgYnV0IGxldCdzCmZvbGxvdyB0aGUgc3BlYy4gSXQncyBhbHNvIG5lZWRlZCBvbiBzb21l
IEVITCBwbGF0Zm9ybXMsIGJ1dCBmb3IgdGhhdCB3ZQphbHNvIG5lZWQgYSB3YXkgdG8gZGlzdGlu
Z3Vpc2ggdGhlIGFmZmVjdGVkIEVITCBTS1VzLCBzbyBJIGxlYXZlIHRoYXQKZm9yIGEgZm9sbG93
LXVwLgoKdjI6Ci0gQXBwbHkgdGhlIFdBIGF0IG9uZSBwbGFjZSB3aGVuIGNhbGN1bGF0aW5nIHRo
ZSBQTEwgZGl2aWRlcnMgZnJvbSB0aGUKICBmcmVxdWVuY3R5IGFuZCB0aGUgZnJlcXVlbmN5IGZy
b20gdGhlIGRpdmlkZXJzIGZvciBhbGwgdGhlIGNvbWJvIFBMTAogIHVzZSBjYXNlcyAoRFAsIEhE
TUksIFRCVCkuIChWaWxsZSkKCkNjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGlu
dXguaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBJbXJlIERlYWsgPGltcmUuZGVha0BpbnRlbC5j
b20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcGxsX21nci5jIHwg
MzkgKysrKysrKysrKystLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDIzIGluc2VydGlvbnMoKyks
IDE2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZHBsbF9tZ3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHBsbF9tZ3IuYwppbmRleCA4MWFiOTc1ZmU0ZjAuLmRhNDg4OGRiYzA3MSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcGxsX21nci5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBsbF9tZ3IuYwpAQCAtMjYxMCwxMiArMjYx
MCwyMyBAQCBzdGF0aWMgYm9vbCBjbmxfZGRpX2hkbWlfcGxsX2RpdmlkZXJzKHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogCXJldHVybiB0cnVlOwogfQogCisvKgorICogRGlz
cGxheSBXQSAjMjIwMTA0OTI0MzI6IHRnbAorICogUHJvZ3JhbSBoYWxmIG9mIHRoZSBub21pbmFs
IERDTyBkaXZpZGVyIGZyYWN0aW9uIHZhbHVlLgorICovCitzdGF0aWMgYm9vbAordGdsX2NvbWJv
X3BsbF9kaXZfZnJhY193YV9uZWVkZWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCit7
CisJcmV0dXJuIElTX1RJR0VSTEFLRShpOTE1KTsKK30KKwogc3RhdGljIGludCBfX2NubF9kZGlf
d3JwbGxfZ2V0X2ZyZXEoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJCSAg
ICBjb25zdCBzdHJ1Y3QgaW50ZWxfc2hhcmVkX2RwbGwgKnBsbCwKIAkJCQkgICAgaW50IHJlZl9j
bG9jaykKIHsKIAljb25zdCBzdHJ1Y3QgaW50ZWxfZHBsbF9od19zdGF0ZSAqcGxsX3N0YXRlID0g
JnBsbC0+c3RhdGUuaHdfc3RhdGU7CiAJdTMyIHAwLCBwMSwgcDIsIGRjb19mcmVxOworCWludCBk
Y29fZGl2X2ZyYWM7CiAKIAlwMCA9IHBsbF9zdGF0ZS0+Y2ZnY3IxICYgRFBMTF9DRkdDUjFfUERJ
Vl9NQVNLOwogCXAyID0gcGxsX3N0YXRlLT5jZmdjcjEgJiBEUExMX0NGR0NSMV9LRElWX01BU0s7
CkBAIC0yNjU3LDggKzI2NjgsMTEgQEAgc3RhdGljIGludCBfX2NubF9kZGlfd3JwbGxfZ2V0X2Zy
ZXEoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCWRjb19mcmVxID0gKHBsbF9z
dGF0ZS0+Y2ZnY3IwICYgRFBMTF9DRkdDUjBfRENPX0lOVEVHRVJfTUFTSykgKgogCQkgICByZWZf
Y2xvY2s7CiAKLQlkY29fZnJlcSArPSAoKChwbGxfc3RhdGUtPmNmZ2NyMCAmIERQTExfQ0ZHQ1Iw
X0RDT19GUkFDVElPTl9NQVNLKSA+PgotCQkgICAgICBEUExMX0NGR0NSMF9EQ09fRlJBQ1RJT05f
U0hJRlQpICogcmVmX2Nsb2NrKSAvIDB4ODAwMDsKKwlkY29fZGl2X2ZyYWMgPSAocGxsX3N0YXRl
LT5jZmdjcjAgJiBEUExMX0NGR0NSMF9EQ09fRlJBQ1RJT05fTUFTSykgPj4KKwkJICAgICAgIERQ
TExfQ0ZHQ1IwX0RDT19GUkFDVElPTl9TSElGVDsKKwlpZiAodGdsX2NvbWJvX3BsbF9kaXZfZnJh
Y193YV9uZWVkZWQoZGV2X3ByaXYpKQorCQlkY29fZGl2X2ZyYWMgKj0gMjsKKwlkY29fZnJlcSAr
PSBkY29fZGl2X2ZyYWMgKiByZWZfY2xvY2sgLyAweDgwMDA7CiAKIAlpZiAoZHJtX1dBUk5fT04o
JmRldl9wcml2LT5kcm0sIHAwID09IDAgfHwgcDEgPT0gMCB8fCBwMiA9PSAwKSkKIAkJcmV0dXJu
IDA7CkBAIC0yOTM2LDE2ICsyOTUwLDYgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBza2xfd3JwbGxf
cGFyYW1zIHRnbF90YnRfcGxsXzI0TUh6X3ZhbHVlcyA9IHsKIAkvKiB0aGUgZm9sbG93aW5nIHBh
cmFtcyBhcmUgdW51c2VkICovCiB9OwogCi0vKgotICogRGlzcGxheSBXQSAjMjIwMTA0OTI0MzI6
IHRnbAotICogRGl2aWRlIHRoZSBub21pbmFsIC5kY29fZnJhY3Rpb24gdmFsdWUgYnkgMi4KLSAq
Lwotc3RhdGljIGNvbnN0IHN0cnVjdCBza2xfd3JwbGxfcGFyYW1zIHRnbF90YnRfcGxsXzM4XzRN
SHpfdmFsdWVzID0gewotCS5kY29faW50ZWdlciA9IDB4NTQsIC5kY29fZnJhY3Rpb24gPSAweDE4
MDAsCi0JLyogdGhlIGZvbGxvd2luZyBwYXJhbXMgYXJlIHVudXNlZCAqLwotCS5wZGl2ID0gMCwg
LmtkaXYgPSAwLCAucWRpdl9tb2RlID0gMCwgLnFkaXZfcmF0aW8gPSAwLAotfTsKLQogc3RhdGlj
IGJvb2wgaWNsX2NhbGNfZHBfY29tYm9fcGxsKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlLAogCQkJCSAgc3RydWN0IHNrbF93cnBsbF9wYXJhbXMgKnBsbF9wYXJhbXMpCiB7CkBA
IC0yOTc5LDE0ICsyOTgzLDEyIEBAIHN0YXRpYyBib29sIGljbF9jYWxjX3RidF9wbGwoc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJCQlNSVNTSU5HX0NBU0UoZGV2X3ByaXYt
PmRwbGwucmVmX2Nsa3MubnNzYyk7CiAJCQkvKiBmYWxsLXRocm91Z2ggKi8KIAkJY2FzZSAxOTIw
MDoKKwkJY2FzZSAzODQwMDoKIAkJCSpwbGxfcGFyYW1zID0gdGdsX3RidF9wbGxfMTlfMk1Iel92
YWx1ZXM7CiAJCQlicmVhazsKIAkJY2FzZSAyNDAwMDoKIAkJCSpwbGxfcGFyYW1zID0gdGdsX3Ri
dF9wbGxfMjRNSHpfdmFsdWVzOwogCQkJYnJlYWs7Ci0JCWNhc2UgMzg0MDA6Ci0JCQkqcGxsX3Bh
cmFtcyA9IHRnbF90YnRfcGxsXzM4XzRNSHpfdmFsdWVzOwotCQkJYnJlYWs7CiAJCX0KIAl9IGVs
c2UgewogCQlzd2l0Y2ggKGRldl9wcml2LT5kcGxsLnJlZl9jbGtzLm5zc2MpIHsKQEAgLTMwNTMs
OSArMzA1NSwxNCBAQCBzdGF0aWMgdm9pZCBpY2xfY2FsY19kcGxsX3N0YXRlKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1LAogCQkJCWNvbnN0IHN0cnVjdCBza2xfd3JwbGxfcGFyYW1zICpw
bGxfcGFyYW1zLAogCQkJCXN0cnVjdCBpbnRlbF9kcGxsX2h3X3N0YXRlICpwbGxfc3RhdGUpCiB7
CisJaW50IGRjb19kaXZfZnJhYyA9IHBsbF9wYXJhbXMtPmRjb19mcmFjdGlvbjsKKwogCW1lbXNl
dChwbGxfc3RhdGUsIDAsIHNpemVvZigqcGxsX3N0YXRlKSk7CiAKLQlwbGxfc3RhdGUtPmNmZ2Ny
MCA9IERQTExfQ0ZHQ1IwX0RDT19GUkFDVElPTihwbGxfcGFyYW1zLT5kY29fZnJhY3Rpb24pIHwK
KwlpZiAodGdsX2NvbWJvX3BsbF9kaXZfZnJhY193YV9uZWVkZWQoaTkxNSkpCisJCWRjb19kaXZf
ZnJhYyA9IERJVl9ST1VORF9DTE9TRVNUKGRjb19kaXZfZnJhYywgMik7CisKKwlwbGxfc3RhdGUt
PmNmZ2NyMCA9IERQTExfQ0ZHQ1IwX0RDT19GUkFDVElPTihkY29fZGl2X2ZyYWMpIHwKIAkJCSAg
ICBwbGxfcGFyYW1zLT5kY29faW50ZWdlcjsKIAogCXBsbF9zdGF0ZS0+Y2ZnY3IxID0gRFBMTF9D
RkdDUjFfUURJVl9SQVRJTyhwbGxfcGFyYW1zLT5xZGl2X3JhdGlvKSB8Ci0tIAoyLjE3LjEKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBt
YWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

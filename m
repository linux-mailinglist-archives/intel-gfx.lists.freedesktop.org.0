Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5C6E0217B9
	for <lists+intel-gfx@lfdr.de>; Fri, 17 May 2019 13:26:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1DA3E899BC;
	Fri, 17 May 2019 11:26:12 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B96EE89956;
 Fri, 17 May 2019 11:25:55 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 17 May 2019 04:25:55 -0700
X-ExtLoop1: 1
Received: from kmarenda-mobl2.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.11.159])
 by fmsmga005.fm.intel.com with ESMTP; 17 May 2019 04:25:54 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: igt-dev@lists.freedesktop.org
Date: Fri, 17 May 2019 12:25:21 +0100
Message-Id: <20190517112526.6738-21-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190517112526.6738-1-tvrtko.ursulin@linux.intel.com>
References: <20190517112526.6738-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t 20/25] gem_wsim: Per context SSEU control
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCkEgbmV3IHdv
cmtsb2FkIGNvbW1hbmQgKCdTJykgaXMgYWRkZWQgd2hpY2ggYWxsb3dzIHBlciBjb250ZXh0IHNs
aWNlCihyZS0pY29uZmlndXJhdGlvbi4KCnYyOgogKiBPbmx5IHF1ZXJ5IGRldmljZSBTU0VVIG9u
IGZpcnN0IHVzZS4gKENocmlzKQoKU2lnbmVkLW9mZi1ieTogVHZydGtvIFVyc3VsaW4gPHR2cnRr
by51cnN1bGluQGludGVsLmNvbT4KLS0tCiBiZW5jaG1hcmtzL2dlbV93c2ltLmMgIHwgODMgKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tCiBiZW5jaG1hcmtzL3dzaW0v
UkVBRE1FIHwgMjMgKysrKysrKysrKystCiAyIGZpbGVzIGNoYW5nZWQsIDk0IGluc2VydGlvbnMo
KyksIDEyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2JlbmNobWFya3MvZ2VtX3dzaW0uYyBi
L2JlbmNobWFya3MvZ2VtX3dzaW0uYwppbmRleCA4NzU4MzhmNjUxMjguLmZlYjk2NTA1ODhhMSAx
MDA2NDQKLS0tIGEvYmVuY2htYXJrcy9nZW1fd3NpbS5jCisrKyBiL2JlbmNobWFya3MvZ2VtX3dz
aW0uYwpAQCAtODcsNiArODcsNyBAQCBlbnVtIHdfdHlwZQogCUxPQURfQkFMQU5DRSwKIAlCT05E
LAogCVRFUk1JTkFURSwKKwlTU0VVCiB9OwogCiBzdHJ1Y3QgZGVwcwpAQCAtMTM2LDYgKzEzNyw3
IEBAIHN0cnVjdCB3X3N0ZXAKIAkJCXVpbnQ2NF90IGJvbmRfbWFzazsKIAkJCWVudW0gaW50ZWxf
ZW5naW5lX2lkIGJvbmRfbWFzdGVyOwogCQl9OworCQlpbnQgc3NldTsKIAl9OwogCiAJLyogSW1w
bGVtZW50YXRpb24gZGV0YWlscyAqLwpAQCAtMTcxLDYgKzE3Myw3IEBAIHN0cnVjdCBjdHggewog
CWJvb2wgdGFyZ2V0c19pbnN0YW5jZTsKIAlib29sIHdhbnRzX2JhbGFuY2U7CiAJdW5zaWduZWQg
aW50IHN0YXRpY192Y3M7CisJdWludDY0X3Qgc3NldTsKIH07CiAKIHN0cnVjdCB3b3JrbG9hZApA
QCAtMjQxLDYgKzI0NCw5IEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgY29udGV4dF92Y3NfcnI7CiAK
IHN0YXRpYyBpbnQgdmVyYm9zZSA9IDE7CiBzdGF0aWMgaW50IGZkOworc3RhdGljIHN0cnVjdCBk
cm1faTkxNV9nZW1fY29udGV4dF9wYXJhbV9zc2V1IGRldmljZV9zc2V1ID0geworCS5zbGljZV9t
YXNrID0gLTEgLyogRm9yY2UgcmVhZCBvbiBmaXJzdCB1c2UuICovCit9OwogCiAjZGVmaW5lIFNX
QVBWQ1MJCSgxPDwwKQogI2RlZmluZSBTRVFOTwkJKDE8PDEpCkBAIC00ODIsNiArNDg4LDI3IEBA
IHBhcnNlX3dvcmtsb2FkKHN0cnVjdCB3X2FyZyAqYXJnLCB1bnNpZ25lZCBpbnQgZmxhZ3MsIHN0
cnVjdCB3b3JrbG9hZCAqYXBwX3cpCiAJCQkJaW50X2ZpZWxkKFNZTkMsIHRhcmdldCwKIAkJCQkJ
ICB0bXAgPj0gMCB8fCAoKGludClucl9zdGVwcyArIHRtcCkgPCAwLAogCQkJCQkgICJJbnZhbGlk
IHN5bmMgdGFyZ2V0IGF0IHN0ZXAgJXUhXG4iKTsKKwkJCX0gZWxzZSBpZiAoIXN0cmNtcChmaWVs
ZCwgIlMiKSkgeworCQkJCXVuc2lnbmVkIGludCBuciA9IDA7CisJCQkJd2hpbGUgKChmaWVsZCA9
IHN0cnRva19yKGZzdGFydCwgIi4iLCAmZmN0eCkpKSB7CisJCQkJCXRtcCA9IGF0b2koZmllbGQp
OworCQkJCQljaGVja19hcmcodG1wIDw9IDAgJiYgbnIgPT0gMCwKKwkJCQkJCSAgIkludmFsaWQg
Y29udGV4dCBhdCBzdGVwICV1IVxuIiwKKwkJCQkJCSAgbnJfc3RlcHMpOworCQkJCQljaGVja19h
cmcobnIgPiAxLAorCQkJCQkJICAiSW52YWxpZCBTU0VVIGZvcm1hdCBhdCBzdGVwICV1IVxuIiwK
KwkJCQkJCSAgbnJfc3RlcHMpOworCisJCQkJCWlmIChuciA9PSAwKQorCQkJCQkJc3RlcC5jb250
ZXh0ID0gdG1wOworCQkJCQllbHNlIGlmIChuciA9PSAxKQorCQkJCQkJc3RlcC5zc2V1ID0gdG1w
OworCisJCQkJCW5yKys7CisJCQkJfQorCisJCQkJc3RlcC50eXBlID0gU1NFVTsKKwkJCQlnb3Rv
IGFkZF9zdGVwOwogCQkJfSBlbHNlIGlmICghc3RyY21wKGZpZWxkLCAidCIpKSB7CiAJCQkJaW50
X2ZpZWxkKFRIUk9UVExFLCB0aHJvdHRsZSwKIAkJCQkJICB0bXAgPCAwLApAQCAtMTE0MSwyNCAr
MTE2OCwzOCBAQCBmaW5kX2VuZ2luZShzdHJ1Y3QgaTkxNV9lbmdpbmVfY2xhc3NfaW5zdGFuY2Ug
KmNpLCB1bnNpZ25lZCBpbnQgY291bnQsCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyB2b2lkCi1z
ZXRfY3R4X3NzZXUodWludDMyX3QgY3R4KQorc3RhdGljIHN0cnVjdCBkcm1faTkxNV9nZW1fY29u
dGV4dF9wYXJhbV9zc2V1IGdldF9kZXZpY2Vfc3NldSh2b2lkKQogewotCXN0cnVjdCBkcm1faTkx
NV9nZW1fY29udGV4dF9wYXJhbV9zc2V1IHNzZXUgPSB7IH07CiAJc3RydWN0IGRybV9pOTE1X2dl
bV9jb250ZXh0X3BhcmFtIHBhcmFtID0geyB9OwogCi0Jc3NldS5jbGFzcyA9IEk5MTVfRU5HSU5F
X0NMQVNTX1JFTkRFUjsKLQlzc2V1Lmluc3RhbmNlID0gMDsKKwlpZiAoZGV2aWNlX3NzZXUuc2xp
Y2VfbWFzayA9PSAtMSkgeworCQlwYXJhbS5wYXJhbSA9IEk5MTVfQ09OVEVYVF9QQVJBTV9TU0VV
OworCQlwYXJhbS52YWx1ZSA9ICh1aW50cHRyX3QpJmRldmljZV9zc2V1OworCisJCWdlbV9jb250
ZXh0X2dldF9wYXJhbShmZCwgJnBhcmFtKTsKKwl9CisKKwlyZXR1cm4gZGV2aWNlX3NzZXU7Cit9
CisKK3N0YXRpYyB1aW50NjRfdAorc2V0X2N0eF9zc2V1KHVpbnQzMl90IGN0eCwgdWludDY0X3Qg
c2xpY2VfbWFzaykKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2NvbnRleHRfcGFyYW1fc3NldSBz
c2V1ID0gZ2V0X2RldmljZV9zc2V1KCk7CisJc3RydWN0IGRybV9pOTE1X2dlbV9jb250ZXh0X3Bh
cmFtIHBhcmFtID0geyB9OworCisJaWYgKHNsaWNlX21hc2sgPT0gLTEpCisJCXNsaWNlX21hc2sg
PSBkZXZpY2Vfc3NldS5zbGljZV9tYXNrOworCisJc3NldS5zbGljZV9tYXNrID0gc2xpY2VfbWFz
azsKIAogCXBhcmFtLmN0eF9pZCA9IGN0eDsKIAlwYXJhbS5wYXJhbSA9IEk5MTVfQ09OVEVYVF9Q
QVJBTV9TU0VVOwogCXBhcmFtLnZhbHVlID0gKHVpbnRwdHJfdCkmc3NldTsKIAotCWdlbV9jb250
ZXh0X2dldF9wYXJhbShmZCwgJnBhcmFtKTsKLQotCXNzZXUuc2xpY2VfbWFzayA9IDE7Ci0KIAln
ZW1fY29udGV4dF9zZXRfcGFyYW0oZmQsICZwYXJhbSk7CisKKwlyZXR1cm4gc2xpY2VfbWFzazsK
IH0KIAogc3RhdGljIGludApAQCAtMTM1OSw2ICsxNDAwLDcgQEAgcHJlcGFyZV93b3JrbG9hZCh1
bnNpZ25lZCBpbnQgaWQsIHN0cnVjdCB3b3JrbG9hZCAqd3JrLCB1bnNpZ25lZCBpbnQgZmxhZ3Mp
CiAKIAkJaWd0X2Fzc2VydChjdHhfaWQpOwogCQljdHgtPmlkID0gY3R4X2lkOworCQljdHgtPnNz
ZXUgPSBkZXZpY2Vfc3NldS5zbGljZV9tYXNrOwogCiAJCWlmIChmbGFncyAmIEdMT0JBTF9CQUxB
TkNFKSB7CiAJCQljdHgtPnN0YXRpY192Y3MgPSBjb250ZXh0X3Zjc19ycjsKQEAgLTE1MTksOCAr
MTU2MSwxMCBAQCBwcmVwYXJlX3dvcmtsb2FkKHVuc2lnbmVkIGludCBpZCwgc3RydWN0IHdvcmts
b2FkICp3cmssIHVuc2lnbmVkIGludCBmbGFncykKIAkJCWdlbV9jb250ZXh0X3NldF9wYXJhbShm
ZCwgJnBhcmFtKTsKIAkJfQogCi0JCWlmICh3cmstPnNzZXUpCi0JCQlzZXRfY3R4X3NzZXUoYXJn
LmN0eF9pZCk7CisJCWlmICh3cmstPnNzZXUpIHsKKwkJCS8qIFNldCB0byBzbGljZSAwIG9ubHks
IG9uZSBzbGljZS4gKi8KKwkJCWN0eC0+c3NldSA9IHNldF9jdHhfc3NldShjdHhfaWQsIDEpOwor
CQl9CiAKIAkJaWYgKHNoYXJlX3ZtKQogCQkJdm1fZGVzdHJveShmZCwgc2hhcmVfdm0pOwpAQCAt
MTU1Nyw2ICsxNjAxLDE2IEBAIHByZXBhcmVfd29ya2xvYWQodW5zaWduZWQgaW50IGlkLCBzdHJ1
Y3Qgd29ya2xvYWQgKndyaywgdW5zaWduZWQgaW50IGZsYWdzKQogCQl9CiAJfQogCisJLyoKKwkg
KiBTY2FuIGZvciBTU0VVIGNvbnRyb2wgc3RlcHMuCisJICovCisJZm9yIChpID0gMCwgdyA9IHdy
ay0+c3RlcHM7IGkgPCB3cmstPm5yX3N0ZXBzOyBpKyssIHcrKykgeworCQlpZiAody0+dHlwZSA9
PSBTU0VVKSB7CisJCQlnZXRfZGV2aWNlX3NzZXUoKTsKKwkJCWJyZWFrOworCQl9CisJfQorCiAJ
LyoKIAkgKiBBbGxvY2F0ZSBiYXRjaCBidWZmZXJzLgogCSAqLwpAQCAtMjQ5Miw2ICsyNTQ2LDEz
IEBAIHN0YXRpYyB2b2lkICpydW5fd29ya2xvYWQodm9pZCAqZGF0YSkKIAkJCQkgICB3LT50eXBl
ID09IExPQURfQkFMQU5DRSB8fAogCQkJCSAgIHctPnR5cGUgPT0gQk9ORCkgewogCQkJCWNvbnRp
bnVlOworCQkJfSBlbHNlIGlmICh3LT50eXBlID09IFNTRVUpIHsKKwkJCQlpZiAody0+c3NldSAh
PSB3cmstPmN0eF9saXN0W3ctPmNvbnRleHRdLnNzZXUpIHsKKwkJCQkJd3JrLT5jdHhfbGlzdFt3
LT5jb250ZXh0XS5zc2V1ID0KKwkJCQkJCXNldF9jdHhfc3NldSh3cmstPmN0eF9saXN0W3ctPmNv
bnRleHRdLmlkLAorCQkJCQkJCSAgICAgdy0+c3NldSk7CisJCQkJfQorCQkJCWNvbnRpbnVlOwog
CQkJfQogCiAJCQlpZiAoZG9fc2xlZXAgfHwgdy0+dHlwZSA9PSBQRVJJT0QpIHsKZGlmZiAtLWdp
dCBhL2JlbmNobWFya3Mvd3NpbS9SRUFETUUgYi9iZW5jaG1hcmtzL3dzaW0vUkVBRE1FCmluZGV4
IDU1MmQ4ODgyMDEwYi4uZWVhMTExYWI3NzA0IDEwMDY0NAotLS0gYS9iZW5jaG1hcmtzL3dzaW0v
UkVBRE1FCisrKyBiL2JlbmNobWFya3Mvd3NpbS9SRUFETUUKQEAgLTUsNyArNSw3IEBAIGN0eC5l
bmdpbmUuZHVyYXRpb25fdXMuZGVwZW5kZW5jeS53YWl0LC4uLgogPHVpbnQ+LjxzdHI+Ljx1aW50
PlstPHVpbnQ+XXwqLjxpbnQgPD0gMD5bLzxpbnQgPD0gMD5dWy4uLl0uPDB8MT4sLi4uCiBCLjx1
aW50PgogTS48dWludD4uPHN0cj5bfDxzdHI+XS4uLgotUHxYLjx1aW50Pi48aW50PgorUHxTfFgu
PHVpbnQ+LjxpbnQ+CiBkfHB8c3x0fHF8YXxULjxpbnQ+LC4uLgogYi48dWludD4uPHN0cj5bfDxz
dHI+XS48c3RyPgogZgpAQCAtMzAsNiArMzAsNyBAQCBBZGRpdGlvbmFsIHdvcmtsb2FkIHN0ZXBz
IGFyZSBhbHNvIHN1cHBvcnRlZDoKICAnYicgLSBTZXQgdXAgZW5naW5lIGJvbmRzLgogICdNJyAt
IFNldCB1cCBlbmdpbmUgbWFwLgogICdQJyAtIENvbnRleHQgcHJpb3JpdHkuCisgJ1MnIC0gQ29u
dGV4dCBTU0VVIGNvbmZpZ3VyYXRpb24uCiAgJ1QnIC0gVGVybWluYXRlIGFuIGluZmluaXRlIGJh
dGNoLgogICdYJyAtIENvbnRleHQgcHJlZW1wdGlvbiBjb250cm9sLgogCkBAIC0yNTcsMyArMjU4
LDIzIEBAIHRoZW4gbG9vayBsaWtlOgogICAxLkRFRkFVTFQuMTAwMC5mLTEuMAogICAyLkRFRkFV
TFQuMTAwMC5zLTEuMAogICBhLi0zCisKK0NvbnRleHQgU1NFVSBjb25maWd1cmF0aW9uCistLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQorCisgIFMuMS4xCisgIDEuUkNTLjEwMDAuMC4wCisgIFMu
Mi4tMQorICAyLlJDUy4xMDAwLjAuMAorCitDb250ZXh0IDEgaXMgY29uZmlndXJlZCB0byBydW4g
d2l0aCBvbmUgZW5hYmxlZCBzbGljZSAoc2xpY2UgbWFzayAxKSBhbmQgYSBiYXRjaAoraXMgc3Vt
aXR0ZWQgYWdhaW5zdCBpdC4gQ29udGV4dCAyIGlzIGNvbmZpZ3VyZWQgdG8gcnVuIHdpdGggYWxs
IHNsaWNlcyAodGhpcyBpcwordGhlIGRlZmF1bHQgc28gdGhlIGNvbW1hbmQgY291bGQgYWxzbyBi
ZSBvbWl0dGVkKSBhbmQgYSBiYXRjaCBzdWJtaXR0ZWQgYWdhaW5zdAoraXQuCisKK1RoaXMgc2hv
d3MgdGhlIGR5bmFtaWMgU1NFVSByZWNvbmZpZ3VyYXRpb24gY29zdCBiZXdlZW4gdHdvIGNvbnRl
eHRzIGNvbXBldGluZworZm9yIHRoZSByZW5kZXIgZW5naW5lLgorCitTbGljZSBtYXNrIG9mIC0x
IGhhcyBhIHNwZWNpYWwgbWVhbmluZyBvZiAiYWxsIHNsaWNlcyIuIE90aGVyd2lzZSBhbnkgaW50
ZWdlcgorY2FuIGJlIHNwZWNpZnlpbmcgYXMgdGhlIHNsaWNlIG1hc2ssIGJ1dCBiZXdhcmUgYW55
IGFwYXJ0IGZyb20gMSBhbmQgLTEgY2FuIG1ha2UKK3RoZSB3b3JrbG9hZCBub3QgcG9ydGFibGUg
YmV0d2VlbiBkaWZmZXJlbnQgR1BVcy4KLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

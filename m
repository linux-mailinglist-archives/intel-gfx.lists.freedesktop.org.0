Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A53A6875D5
	for <lists+intel-gfx@lfdr.de>; Fri,  9 Aug 2019 11:23:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 018A46EDE5;
	Fri,  9 Aug 2019 09:23:18 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 171376EDE5
 for <intel-gfx@lists.freedesktop.org>; Fri,  9 Aug 2019 09:23:15 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 17940252-1500050 for multiple; Fri, 09 Aug 2019 10:22:57 +0100
MIME-Version: 1.0
To: Wang Xiayang <xywang.sjtu@sjtu.edu.cn>
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <20190807145437.5580-1-xywang.sjtu@sjtu.edu.cn>
References: <20190807145437.5580-1-xywang.sjtu@sjtu.edu.cn>
Message-ID: <156534257532.29113.15976967389463657767@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Fri, 09 Aug 2019 10:22:55 +0100
Subject: Re: [Intel-gfx] [PATCH] gpu/drm/i915: disable interrupt when
 holding spinlock
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org, Wang Xiayang <xywang.sjtu@sjtu.edu.cn>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBXYW5nIFhpYXlhbmcgKDIwMTktMDgtMDcgMTU6NTQ6MzcpCj4gVGhlIGlycV9sb2Nr
IGlzIGFjcXVpcmVkIGluIG11bHRpcGxlIGZ1bmN0aW9uczoKPiAKPiAxKSBpOTE1X3JlcXVlc3Rf
Y2FuY2VsX2JyZWFkY3J1bWIKPiAgPC0gLi4uIDwtIHBhbmZyb3N0X2dwdV9pcnFfaGFuZGxlcgo+
IDIpIGludGVsX2VuZ2luZV9icmVhZGNydW1ic19pcnEKPiAgPC0gLi4uIDwtIGNoZXJyeXZpZXdf
aXJxX2hhbmRsZXIKPiAzKSBpOTE1X3JlcXVlc3RfZW5hYmxlX2JyZWFkY3J1bWIKPiA0KSB2aXJ0
dWFsX3hmZXJfYnJlYWRjcnVtYnMKPiAKPiBUaGUgZm9ybWVyIHR3byBmdW5jdGlvbnMgYXJlIHJl
YWNoYWJsZSBmcm9tIElSUSBoYW5kbGVycyB3aGlsZQo+IHRoZSBsYXR0ZXIgdHdvIGZ1bmN0aW9u
cyBhcmUgbm90LCBhbmQgdGhleSBjYWxsIHNwaW5fbG9jaygpCj4gd2hpY2ggZG8gbm90IGRpc2Fi
bGUgaW50ZXJydXB0LiBCZWluZyBwcmVlbXB0ZWQgYnkgYW4gaW50ZXJydXB0Cj4gYWNxdWlyaW5n
IHRoZSBzYW1lIGxvY2sgbWF5IGxlYWQgdG8gZGVhZGxvY2suCj4gT3RoZXIgZnVuY3Rpb25zIGFj
cXVpcmUgaXJxX2xvY2sgYnkgc3Bpbl9sb2NrX2lycS9pcnFzYXZlKCkuCj4gCj4gVGhpcyBwYXRj
aCBzd2l0Y2hlcyBzcGluX2xvY2soKSB0byBzcGluX2xvY2tfaXJxIGluIHRoZSB0d28KPiBwcm9j
ZXNzLWNvbnRleHQgZnVuY3Rpb25zLgo+IAo+IFRoZSBpc3N1ZSBpcyBpZGVudGlmaWVkIGJ5IGEg
c3RhdGljIGFuYWx5emVyIGJhc2VkIG9uIENvY2NpbmVsbGUuCj4gCj4gU2lnbmVkLW9mZi1ieTog
V2FuZyBYaWF5YW5nIDx4eXdhbmcuc2p0dUBzanR1LmVkdS5jbj4KPiAtLS0KPiAgZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuYyB8IDQgKystLQo+ICBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICAgICAgIHwgNCArKy0tCj4gIDIgZmlsZXMgY2hh
bmdlZCwgNCBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuYwo+IGluZGV4IGMwOTJiZGY1ZjBiZi4uZTBi
NDY0NTBjMmY1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Jy
ZWFkY3J1bWJzLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNy
dW1icy5jCj4gQEAgLTMwMSw3ICszMDEsNyBAQCBib29sIGk5MTVfcmVxdWVzdF9lbmFibGVfYnJl
YWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkKPiAgICAgICAgICAgICAgICAgc3RydWN0
IGludGVsX2NvbnRleHQgKmNlID0gcnEtPmh3X2NvbnRleHQ7Cj4gICAgICAgICAgICAgICAgIHN0
cnVjdCBsaXN0X2hlYWQgKnBvczsKPiAgCj4gLSAgICAgICAgICAgICAgIHNwaW5fbG9jaygmYi0+
aXJxX2xvY2spOwo+ICsgICAgICAgICAgICAgICBzcGluX2xvY2tfaXJxKCZiLT5pcnFfbG9jayk7
Cj4gICAgICAgICAgICAgICAgIEdFTV9CVUdfT04odGVzdF9iaXQoSTkxNV9GRU5DRV9GTEFHX1NJ
R05BTCwgJnJxLT5mZW5jZS5mbGFncykpOwo+ICAKPiAgICAgICAgICAgICAgICAgX19pbnRlbF9i
cmVhZGNydW1ic19hcm1faXJxKGIpOwo+IEBAIC0zMzMsNyArMzMzLDcgQEAgYm9vbCBpOTE1X3Jl
cXVlc3RfZW5hYmxlX2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEpCj4gICAgICAg
ICAgICAgICAgIEdFTV9CVUdfT04oIWNoZWNrX3NpZ25hbF9vcmRlcihjZSwgcnEpKTsKPiAgCj4g
ICAgICAgICAgICAgICAgIHNldF9iaXQoSTkxNV9GRU5DRV9GTEFHX1NJR05BTCwgJnJxLT5mZW5j
ZS5mbGFncyk7Cj4gLSAgICAgICAgICAgICAgIHNwaW5fdW5sb2NrKCZiLT5pcnFfbG9jayk7Cj4g
KyAgICAgICAgICAgICAgIHNwaW5fdW5sb2NrX2lycSgmYi0+aXJxX2xvY2spOwoKVGhpcyBpcyB2
ZXJ5IGJyb2tlbiwgaXJxcyBhcmUgZGlzYWJsZWQgYnkgdGhlIGNhbGxlciBhbmQgeW91IGNhbid0
CnVuY29uZGl0aW9uYWxseSBlbmFibGUgdGhlbSBhZ2FpbiBoZXJlLi4uCgo+ICAgICAgICAgcmV0
dXJuICFfX3JlcXVlc3RfY29tcGxldGVkKHJxKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9s
cmMuYwo+IGluZGV4IDgyYjdhY2U2MmQ5Ny4uNDIzNjdhZWVmY2NlIDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiBAQCAtODA2LDEzICs4MDYsMTMgQEAgc3RhdGljIHZvaWQg
dmlydHVhbF94ZmVyX2JyZWFkY3J1bWJzKHN0cnVjdCB2aXJ0dWFsX2VuZ2luZSAqdmUsCj4gIAo+
ICAgICAgICAgLyogQWxsIHVuYXR0YWNoZWQgKHJxLT5lbmdpbmUgPT0gb2xkKSBtdXN0IGFscmVh
ZHkgYmUgY29tcGxldGVkICovCj4gIAo+IC0gICAgICAgc3Bpbl9sb2NrKCZvbGQtPmJyZWFkY3J1
bWJzLmlycV9sb2NrKTsKPiArICAgICAgIHNwaW5fbG9ja19pcnEoJm9sZC0+YnJlYWRjcnVtYnMu
aXJxX2xvY2spOwo+ICAgICAgICAgaWYgKCFsaXN0X2VtcHR5KCZ2ZS0+Y29udGV4dC5zaWduYWxf
bGluaykpIHsKPiAgICAgICAgICAgICAgICAgbGlzdF9tb3ZlX3RhaWwoJnZlLT5jb250ZXh0LnNp
Z25hbF9saW5rLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmZW5naW5lLT5icmVh
ZGNydW1icy5zaWduYWxlcnMpOwo+ICAgICAgICAgICAgICAgICBpbnRlbF9lbmdpbmVfcXVldWVf
YnJlYWRjcnVtYnMoZW5naW5lKTsKPiAgICAgICAgIH0KPiAtICAgICAgIHNwaW5fdW5sb2NrKCZv
bGQtPmJyZWFkY3J1bWJzLmlycV9sb2NrKTsKPiArICAgICAgIHNwaW5fdW5sb2NrX2lycSgmb2xk
LT5icmVhZGNydW1icy5pcnFfbG9jayk7CgpPciBoZXJlLgotQ2hyaXMKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJ
bnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0BCE721E85
	for <lists+intel-gfx@lfdr.de>; Fri, 17 May 2019 21:41:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E61EE89996;
	Fri, 17 May 2019 19:41:34 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DD5AA8997E;
 Fri, 17 May 2019 19:41:32 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 16593722-1500050 for multiple; Fri, 17 May 2019 20:41:24 +0100
MIME-Version: 1.0
To: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
 igt-dev@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <20190517112526.6738-17-tvrtko.ursulin@linux.intel.com>
References: <20190517112526.6738-1-tvrtko.ursulin@linux.intel.com>
 <20190517112526.6738-17-tvrtko.ursulin@linux.intel.com>
Message-ID: <155812208237.1890.11798973297472725854@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Fri, 17 May 2019 20:41:22 +0100
Subject: Re: [Intel-gfx] [igt-dev] [PATCH i-g-t 16/25] gem_wsim: Engine bond
 command
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBUdnJ0a28gVXJzdWxpbiAoMjAxOS0wNS0xNyAxMjoyNToxNykKPiBGcm9tOiBUdnJ0
a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgo+IAo+IEVuZ2luZSBib25kcyBh
cmUgYW4gaTkxNSB1QVBJIGFwcGxpY2FibGUgdG8gbG9hZCBiYWxhbmNlZCBjb250ZXh0cyB3aXRo
Cj4gZW5naW5lIG1hcC4gVGhleSBhbGxvdyBleHByZXNzaW9uIHJ1bGVzIG9mIGVuZ2luZSBzZWxl
Y3Rpb24gYmV0d2VlbiB0d28KPiBjb250ZXh0cyB3aGVuIHN1Ym1pc3Npb25zIGFyZSBhbHNvIHRp
ZWQgd2l0aCBzdWJtaXQgZmVuY2VzLgo+IAo+IFBsZWFzZSByZWZlciB0byB0aGUgUkVBRE1FIGZv
ciBhIG1vcmUgZGV0YWlsZWQgZGVzY3JpcHRpb24uCj4gCj4gdjI6Cj4gICogVXNlIGxpc3Qgb2Yg
c3ltYm9saWMgZW5naW5lIG5hbWVzIGluc3RlYWQgb2YgdGhlIG1hc2suIChDaHJpcykKPiAKPiBT
aWduZWQtb2ZmLWJ5OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgo+
IC0tLQo+ICBiZW5jaG1hcmtzL2dlbV93c2ltLmMgIHwgMTU5ICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKy0tCj4gIGJlbmNobWFya3Mvd3NpbS9SRUFETUUgfCAgNTAgKysr
KysrKysrKysrKwo+ICAyIGZpbGVzIGNoYW5nZWQsIDIwMiBpbnNlcnRpb25zKCspLCA3IGRlbGV0
aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9iZW5jaG1hcmtzL2dlbV93c2ltLmMgYi9iZW5jaG1h
cmtzL2dlbV93c2ltLmMKPiBpbmRleCBmN2Y4NGQwNTAxMGEuLmJkOTIwMWMyOTI4YiAxMDA2NDQK
PiAtLS0gYS9iZW5jaG1hcmtzL2dlbV93c2ltLmMKPiArKysgYi9iZW5jaG1hcmtzL2dlbV93c2lt
LmMKPiBAQCAtODUsNiArODUsNyBAQCBlbnVtIHdfdHlwZQo+ICAgICAgICAgUFJFRU1QVElPTiwK
PiAgICAgICAgIEVOR0lORV9NQVAsCj4gICAgICAgICBMT0FEX0JBTEFOQ0UsCj4gKyAgICAgICBC
T05ELAo+ICB9Owo+ICAKPiAgc3RydWN0IGRlcHMKPiBAQCAtMTAwLDYgKzEwMSwxMSBAQCBzdHJ1
Y3Qgd19hcmcgewo+ICAgICAgICAgaW50IHByaW87Cj4gIH07Cj4gIAo+ICtzdHJ1Y3QgYm9uZCB7
Cj4gKyAgICAgICB1aW50NjRfdCBtYXNrOwo+ICsgICAgICAgZW51bSBpbnRlbF9lbmdpbmVfaWQg
bWFzdGVyOwo+ICt9Owo+ICsKPiAgc3RydWN0IHdfc3RlcAo+ICB7Cj4gICAgICAgICAvKiBXb3Jr
bG9hZCBzdGVwIG1ldGFkYXRhICovCj4gQEAgLTEyMyw2ICsxMjksMTAgQEAgc3RydWN0IHdfc3Rl
cAo+ICAgICAgICAgICAgICAgICAgICAgICAgIGVudW0gaW50ZWxfZW5naW5lX2lkICplbmdpbmVf
bWFwOwo+ICAgICAgICAgICAgICAgICB9Owo+ICAgICAgICAgICAgICAgICBib29sIGxvYWRfYmFs
YW5jZTsKPiArICAgICAgICAgICAgICAgc3RydWN0IHsKPiArICAgICAgICAgICAgICAgICAgICAg
ICB1aW50NjRfdCBib25kX21hc2s7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgZW51bSBpbnRl
bF9lbmdpbmVfaWQgYm9uZF9tYXN0ZXI7Cj4gKyAgICAgICAgICAgICAgIH07Cj4gICAgICAgICB9
Owo+ICAKPiAgICAgICAgIC8qIEltcGxlbWVudGF0aW9uIGRldGFpbHMgKi8KPiBAQCAtMTUyLDYg
KzE2Miw4IEBAIHN0cnVjdCBjdHggewo+ICAgICAgICAgaW50IHByaW9yaXR5Owo+ICAgICAgICAg
dW5zaWduZWQgaW50IGVuZ2luZV9tYXBfY291bnQ7Cj4gICAgICAgICBlbnVtIGludGVsX2VuZ2lu
ZV9pZCAqZW5naW5lX21hcDsKPiArICAgICAgIHVuc2lnbmVkIGludCBib25kX2NvdW50Owo+ICsg
ICAgICAgc3RydWN0IGJvbmQgKmJvbmRzOwo+ICAgICAgICAgYm9vbCB0YXJnZXRzX2luc3RhbmNl
Owo+ICAgICAgICAgYm9vbCB3YW50c19iYWxhbmNlOwo+ICAgICAgICAgdW5zaWduZWQgaW50IHN0
YXRpY192Y3M7Cj4gQEAgLTM3OCw2ICszOTAsMjYgQEAgc3RhdGljIGludCBwYXJzZV9lbmdpbmVf
bWFwKHN0cnVjdCB3X3N0ZXAgKnN0ZXAsIGNvbnN0IGNoYXIgKl9zdHIpCj4gICAgICAgICByZXR1
cm4gMDsKPiAgfQo+ICAKPiArc3RhdGljIHVpbnQ2NF90IGVuZ2luZV9saXN0X21hc2soY29uc3Qg
Y2hhciAqX3N0cikKPiArewo+ICsgICAgICAgdWludDY0X3QgbWFzayA9IDA7Cj4gKwo+ICsgICAg
ICAgY2hhciAqdG9rZW4sICp0Y3R4ID0gTlVMTCwgKnRzdGFydCA9IChjaGFyICopX3N0cjsKPiAr
Cj4gKyAgICAgICB3aGlsZSAoKHRva2VuID0gc3RydG9rX3IodHN0YXJ0LCAifCIsICZ0Y3R4KSkp
IHsKPiArICAgICAgICAgICAgICAgZW51bSBpbnRlbF9lbmdpbmVfaWQgZW5naW5lID0gc3RyX3Rv
X2VuZ2luZSh0b2tlbik7Cj4gKwo+ICsgICAgICAgICAgICAgICBpZiAoKGludCllbmdpbmUgPCAw
IHx8IGVuZ2luZSA9PSBERUZBVUxUIHx8IGVuZ2luZSA9PSBWQ1MpCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgcmV0dXJuIDA7Cj4gKwo+ICsgICAgICAgICAgICAgICBtYXNrIHw9IDEgPDwgZW5n
aW5lOwo+ICsKPiArICAgICAgICAgICAgICAgdHN0YXJ0ID0gTlVMTDsKPiArICAgICAgIH0KPiAr
Cj4gKyAgICAgICByZXR1cm4gbWFzazsKPiArfQo+ICsKPiAgI2RlZmluZSBpbnRfZmllbGQoX1NU
RVBfLCBfRklFTERfLCBfQ09ORF8sIF9FUlJfKSBcCj4gICAgICAgICBpZiAoKGZpZWxkID0gc3Ry
dG9rX3IoZnN0YXJ0LCAiLiIsICZmY3R4KSkpIHsgXAo+ICAgICAgICAgICAgICAgICB0bXAgPSBh
dG9pKGZpZWxkKTsgXAo+IEBAIC01MjgsNiArNTYwLDM5IEBAIHBhcnNlX3dvcmtsb2FkKHN0cnVj
dCB3X2FyZyAqYXJnLCB1bnNpZ25lZCBpbnQgZmxhZ3MsIHN0cnVjdCB3b3JrbG9hZCAqYXBwX3cp
Cj4gIAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcC50eXBlID0gTE9BRF9C
QUxBTkNFOwo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBhZGRfc3RlcDsK
PiArICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFzdHJjbXAoZmllbGQsICJiIikp
IHsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBuciA9IDA7
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKGZpZWxkID0gc3RydG9r
X3IoZnN0YXJ0LCAiLiIsICZmY3R4KSkpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgY2hlY2tfYXJnKG5yID4gMiwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICJJbnZhbGlkIGJvbmQgZm9ybWF0IGF0IHN0ZXAgJXUh
XG4iLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
bnJfc3RlcHMpOwo+ICsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
aWYgKG5yID09IDApIHsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB0bXAgPSBhdG9pKGZpZWxkKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzdGVwLmNvbnRleHQgPSB0bXA7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tfYXJnKHRtcCA8PSAwLAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAi
SW52YWxpZCBjb250ZXh0IGF0IHN0ZXAgJXUhXG4iLAo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBucl9zdGVwcyk7Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobnIgPT0gMSkgewo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAuYm9uZF9t
YXNrID0gZW5naW5lX2xpc3RfbWFzayhmaWVsZCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tfYXJnKHN0ZXAuYm9uZF9tYXNrID09IDAsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAi
SW52YWxpZCBzaWJsaW5ncyBsaXN0IGF0IHN0ZXAgJXUhXG4iLAo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnJfc3RlcHMpOwo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5yID09IDIpIHsK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAgPSBz
dHJfdG9fZW5naW5lKGZpZWxkKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBjaGVja19hcmcodG1wIDw9IDAgfHwKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wID09IFZDUyB8fAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0
bXAgPT0gREVGQVVMVCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIkludmFsaWQgbWFzdGVyIGVuZ2luZSBhdCBzdGVwICV1IVxuIiwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgbnJfc3RlcHMpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0ZXAuYm9uZF9tYXN0ZXIgPSB0bXA7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIG5yKys7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Cj4gKwo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcC50eXBlID0gQk9ORDsKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gYWRkX3N0ZXA7Cj4gICAgICAgICAgICAgICAg
ICAgICAgICAgfQo+ICAKPiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpZWxkKSB7Cj4g
QEAgLTEwMTEsNiArMTA3NiwzMSBAQCBzdGF0aWMgdm9pZCB2bV9kZXN0cm95KGludCBpOTE1LCB1
aW50MzJfdCB2bV9pZCkKPiAgICAgICAgIGlndF9hc3NlcnRfZXEoX192bV9kZXN0cm95KGk5MTUs
IHZtX2lkKSwgMCk7Cj4gIH0KPiAgCj4gK3N0YXRpYyB1bnNpZ25lZCBpbnQKPiArZmluZF9lbmdp
bmUoc3RydWN0IGk5MTVfZW5naW5lX2NsYXNzX2luc3RhbmNlICpjaSwgdW5zaWduZWQgaW50IGNv
dW50LAo+ICsgICAgICAgICAgIGVudW0gaW50ZWxfZW5naW5lX2lkIGVuZ2luZSkKPiArewo+ICsg
ICAgICAgc3RhdGljIHN0cnVjdCBpOTE1X2VuZ2luZV9jbGFzc19pbnN0YW5jZSBtYXBbXSA9IHsK
PiArICAgICAgICAgICAgICAgW1JDU10gPSB7IEk5MTVfRU5HSU5FX0NMQVNTX1JFTkRFUiwgMCB9
LAo+ICsgICAgICAgICAgICAgICBbQkNTXSA9IHsgSTkxNV9FTkdJTkVfQ0xBU1NfQ09QWSwgMCB9
LAo+ICsgICAgICAgICAgICAgICBbVkNTMV0gPSB7IEk5MTVfRU5HSU5FX0NMQVNTX1ZJREVPLCAw
IH0sCj4gKyAgICAgICAgICAgICAgIFtWQ1MyXSA9IHsgSTkxNV9FTkdJTkVfQ0xBU1NfVklERU8s
IDEgfSwKPiArICAgICAgICAgICAgICAgW1ZFQ1NdID0geyBJOTE1X0VOR0lORV9DTEFTU19WSURF
T19FTkhBTkNFLCAwIH0sCj4gKyAgICAgICB9Owo+ICsgICAgICAgdW5zaWduZWQgaW50IGk7Cj4g
Kwo+ICsgICAgICAgaWd0X2Fzc2VydChlbmdpbmUgPCBBUlJBWV9TSVpFKG1hcCkpOwo+ICsgICAg
ICAgaWd0X2Fzc2VydChlbmdpbmUgPT0gUkNTIHx8IG1hcFtlbmdpbmVdLmVuZ2luZV9jbGFzcyk7
Cj4gKwo+ICsgICAgICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyBpKyssIGNpKyspIHsKPiArICAg
ICAgICAgICAgICAgaWYgKCFtZW1jbXAoJm1hcFtlbmdpbmVdLCBjaSwgc2l6ZW9mKCpjaSkpKQo+
ICsgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpOwo+ICsgICAgICAgfQo+ICsKPiArICAg
ICAgIGlndF9hc3NlcnQoMCk7Cj4gKyAgICAgICByZXR1cm4gMDsKPiArfQo+ICsKPiAgc3RhdGlj
IGludAo+ICBwcmVwYXJlX3dvcmtsb2FkKHVuc2lnbmVkIGludCBpZCwgc3RydWN0IHdvcmtsb2Fk
ICp3cmssIHVuc2lnbmVkIGludCBmbGFncykKPiAgewo+IEBAIC0xMDc4LDYgKzExNjgsOCBAQCBw
cmVwYXJlX3dvcmtsb2FkKHVuc2lnbmVkIGludCBpZCwgc3RydWN0IHdvcmtsb2FkICp3cmssIHVu
c2lnbmVkIGludCBmbGFncykKPiAgICAgICAgICAqIFRyYW5zZmVyIG92ZXIgZW5naW5lIG1hcCBj
b25maWd1cmF0aW9uIGZyb20gdGhlIHdvcmtsb2FkIHN0ZXAuCj4gICAgICAgICAgKi8KPiAgICAg
ICAgIGZvciAoaiA9IDA7IGogPCB3cmstPm5yX2N0eHM7IGogKz0gMikgewo+ICsgICAgICAgICAg
ICAgICBzdHJ1Y3QgY3R4ICpjdHggPSAmd3JrLT5jdHhfbGlzdFtqXTsKPiArCj4gICAgICAgICAg
ICAgICAgIGJvb2wgdGFyZ2V0cyA9IGZhbHNlOwo+ICAgICAgICAgICAgICAgICBib29sIGJhbGFu
Y2UgPSBmYWxzZTsKPiAgCj4gQEAgLTEwOTEsMTYgKzExODMsMjggQEAgcHJlcGFyZV93b3JrbG9h
ZCh1bnNpZ25lZCBpbnQgaWQsIHN0cnVjdCB3b3JrbG9hZCAqd3JrLCB1bnNpZ25lZCBpbnQgZmxh
Z3MpCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHMgPSB0cnVlOwo+ICAgICAgICAgICAg
ICAgICAgICAgICAgIH0gZWxzZSBpZiAody0+dHlwZSA9PSBFTkdJTkVfTUFQKSB7Cj4gLSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB3cmstPmN0eF9saXN0W2pdLmVuZ2luZV9tYXAgPSB3
LT5lbmdpbmVfbWFwOwo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JrLT5jdHhf
bGlzdFtqXS5lbmdpbmVfbWFwX2NvdW50ID0KPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdy0+ZW5naW5lX21hcF9jb3VudDsKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGN0eC0+ZW5naW5lX21hcCA9IHctPmVuZ2luZV9tYXA7Cj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjdHgtPmVuZ2luZV9tYXBfY291bnQgPSB3LT5lbmdpbmVfbWFw
X2NvdW50Owo+ICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAody0+dHlwZSA9PSBM
T0FEX0JBTEFOQ0UpIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd3Jr
LT5jdHhfbGlzdFtqXS5lbmdpbmVfbWFwKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpZiAoIWN0eC0+ZW5naW5lX21hcCkgewo+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB3c2ltX2VycigiTG9hZCBiYWxhbmNpbmcgbmVlZHMgYW4gZW5naW5lIG1h
cCFcbiIpOwo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4g
MTsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHdyay0+Y3R4X2xpc3Rbal0ud2FudHNfYmFsYW5jZSA9Cj4gLSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHctPmxvYWRfYmFsYW5jZTsKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC0+d2FudHNfYmFsYW5jZSA9IHctPmxvYWRf
YmFsYW5jZTsKPiArICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHctPnR5cGUgPT0g
Qk9ORCkgewo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHgtPndhbnRz
X2JhbGFuY2UpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3Np
bV9lcnIoIkVuZ2luZSBib25kcyBuZWVkIGxvYWQgYmFsYW5jaW5nIGVuZ2luZSBtYXAhXG4iKTsK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7Cj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Cj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBjdHgtPmJvbmRfY291bnQrKzsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGN0eC0+Ym9uZHMgPSByZWFsbG9jKGN0eC0+Ym9uZHMsCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgtPmJvbmRfY291bnQgKgo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9m
KHN0cnVjdCBib25kKSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ3RfYXNz
ZXJ0KGN0eC0+Ym9uZHMpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LT5i
b25kc1tjdHgtPmJvbmRfY291bnQgLSAxXS5tYXNrID0KPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdy0+Ym9uZF9tYXNrOwo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgY3R4LT5ib25kc1tjdHgtPmJvbmRfY291bnQgLSAxXS5tYXN0ZXIgPQo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LT5ib25kX21hc3RlcjsKPiAgICAg
ICAgICAgICAgICAgICAgICAgICB9Cj4gICAgICAgICAgICAgICAgIH0KPiAgCj4gQEAgLTEyODEs
NiArMTM4NSw0NiBAQCBwcmVwYXJlX3dvcmtsb2FkKHVuc2lnbmVkIGludCBpZCwgc3RydWN0IHdv
cmtsb2FkICp3cmssIHVuc2lnbmVkIGludCBmbGFncykKPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY3R4LT5lbmdpbmVfbWFwW2ogLSAxXSAtIFZDUzE7IC8qIEZJWE1F
ICovCj4gICAgICAgICAgICAgICAgICAgICAgICAgfQo+ICAKPiArICAgICAgICAgICAgICAgICAg
ICAgICBmb3IgKGogPSAwOyBqIDwgY3R4LT5ib25kX2NvdW50OyBqKyspIHsKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgbWFzayA9IGN0eC0+Ym9uZHNbal0u
bWFzazsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEk5MTVfREVGSU5FX0NPTlRF
WFRfRU5HSU5FU19CT05EKGJvbmQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX2J1aWx0aW5fcG9wY291bnQobWFzaykp
Owo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGk5MTVfY29udGV4dF9l
bmdpbmVzX2JvbmQgKnAgPSBOVUxMLCAqcHJldjsKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHVuc2lnbmVkIGludCBiLCBlOwo+ICsKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHByZXYgPSBwOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGFs
bG9jYShzaXplb2YoYm9uZCkpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNz
ZXJ0KHApOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtc2V0KHAsIDAsIHNp
emVvZihib25kKSk7Cj4gKwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGog
PT0gMCkKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZF9iYWxh
bmNlLmJhc2UubmV4dF9leHRlbnNpb24gPQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHRvX3VzZXJfcG9pbnRlcihwKTsKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGVsc2UgaWYgKGogPCAoY3R4LT5ib25kX2NvdW50IC0gMSkpCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYtPmJhc2UubmV4dF9leHRl
bnNpb24gPQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHRvX3VzZXJfcG9pbnRlcihwKTsKPiArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwLT5iYXNlLm5hbWUgPSBJOTE1X0NPTlRFWFRfRU5HSU5FU19FWFRfQk9ORDsKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHAtPnZpcnR1YWxfaW5kZXggPSAwOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcC0+bWFzdGVyLmVuZ2luZV9jbGFzcyA9Cj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEk5MTVfRU5HSU5FX0NMQVNTX1ZJREVP
Owo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC0+bWFzdGVyLmVuZ2luZV9pbnN0
YW5jZSA9Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC0+Ym9u
ZHNbal0ubWFzdGVyIC0gVkNTMTsKPiArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBmb3IgKGIgPSAwLCBlID0gMDsgbWFzazsgZSsrLCBtYXNrID4+PSAxKSB7Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBpZHg7Cj4gKwo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtYXNrICYgMSkpCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7
Cj4gKwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHggPSBmaW5k
X2VuZ2luZSgmc2V0X2VuZ2luZXMuZW5naW5lc1sxXSwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LT5lbmdpbmVfbWFwX2NvdW50
LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBlKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC0+ZW5n
aW5lc1tiKytdID0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzZXRfZW5naW5lcy5lbmdpbmVzWzEgKyBpZHhdOwo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgfQo+ICsgICAgICAgICAgICAgICAgICAgICAgIH0KCk9rLCBJIHdhcyBhIGxp
dHRsZSBuZXJ2b3VzIG9mIHRoZSB0cmFuc3BvcnQgdGhyb3VnaCBtYXNrLCBidXQgaXQgY2hlY2tz
Cm91dC4KUmV2aWV3ZWQtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVr
PgotQ2hyaXMKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
SW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E499778692
	for <lists+intel-gfx@lfdr.de>; Mon, 29 Jul 2019 09:47:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 16D8489C29;
	Mon, 29 Jul 2019 07:47:04 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AEB8489C29
 for <intel-gfx@lists.freedesktop.org>; Mon, 29 Jul 2019 07:47:02 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 29 Jul 2019 00:47:01 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,321,1559545200"; d="scan'208";a="346516203"
Received: from hinestho-mobl1.amr.corp.intel.com (HELO [10.252.1.47])
 ([10.252.1.47])
 by orsmga005.jf.intel.com with ESMTP; 29 Jul 2019 00:47:00 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20190725131447.27515-1-chris@chris-wilson.co.uk>
 <20190725131447.27515-2-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <61bdd86d-6465-bcf3-5574-013a7096b73a@linux.intel.com>
Date: Mon, 29 Jul 2019 08:46:59 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190725131447.27515-2-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 2/2] drm/i915: Unshare the idle-barrier from
 other kernel requests
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDI1LzA3LzIwMTkgMTQ6MTQsIENocmlzIFdpbHNvbiB3cm90ZToKPiBVbmRlciBzb21lIGNp
cmN1bXN0YW5jZXMgKHNlZSBpbnRlbF9jb250ZXh0X3ByZXBhcmVfcmVtb3RlX3JlcXVlc3QpLCB3
ZQo+IG1heSB1c2UgYSByZXF1ZXN0IGFsb25nIGEga2VybmVsIGNvbnRleHQgdG8gbW9kaWZ5IHRo
ZSBsb2dpY2FsIHN0YXRlIG9mCj4gYW5vdGhlci4gVG8ga2VlcCB0aGUgdGFyZ2V0IGNvbnRleHQg
aW4gcGxhY2Ugd2hpbGUgdGhlIHJlcXVlc3QgZXhlY3V0ZXMsCj4gd2UgdGFrZSBhbiBhY3RpdmUg
cmVmZXJlbmNlIG9uIGl0IHVzaW5nIHRoZSBrZXJuZWwgdGltZWxpbmUuIFRoaXMgaXMgdGhlCj4g
c2FtZSB0aW1lbGluZSBhcyB3ZSB1c2UgZm9yIHRoZSBpZGxlLWJhcnJpZXIsIGFuZCBzbyB3ZSBl
bmQgdXAgcmV1c2luZwo+IHRoZSBzYW1lIGFjdGl2ZSBub2RlLiBFeGNlcHQgdGhhdCB0aGUgaWRs
ZSBiYXJyaWVyIGlzIHNwZWNpYWwgYW5kIGNhbm5vdAo+IGJlIHJldXNlZCBpbiB0aGlzIG1hbm5l
ciEgR2l2ZSB0aGUgaWRsZS1iYXJyaWVyIGEgcmVzZXJ2ZWQgdGltZWxpbmUKPiBpbmRleCAoMCkg
c28gdGhhdCBpdCB3aWxsIGFsd2F5cyBiZSB1bmlxdWUgKGdpdmUgb3IgdGFrZSB3ZSBtYXkgaXNz
dWUKPiBtdWx0aXBsZSBpZGxlIGJhcnJpZXJzIGFjcm9zcyBtdWx0aXBsZSBlbmdpbmVzKS4KPiAK
PiBSZXBvcnRlZC1ieTogTGlvbmVsIExhbmR3ZXJsaW4gPGxpb25lbC5nLmxhbmR3ZXJsaW5AaW50
ZWwuY29tPgo+IEZpeGVzOiBjZTQ3NmM4MGI4YmYgKCJkcm0vaTkxNTogS2VlcCBjb250ZXh0cyBw
aW5uZWQgdW50aWwgYWZ0ZXIgdGhlIG5leHQga2VybmVsIGNvbnRleHQgc3dpdGNoIikKPiBGaXhl
czogYTk4NzdkYTJkNjI5ICgiZHJtL2k5MTUvb2E6IFJlY29uZmlndXJlIGNvbnRleHRzIG9uIHRo
ZSBmbHkiKQo+IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29u
LmNvLnVrPgo+IENjOiBMaW9uZWwgTGFuZHdlcmxpbiA8bGlvbmVsLmcubGFuZHdlcmxpbkBpbnRl
bC5jb20+Cj4gQ2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Cj4g
VGVzdGVkLWJ5OiBMaW9uZWwgTGFuZHdlcmxpbiA8bGlvbmVsLmcubGFuZHdlcmxpbkBpbnRlbC5j
b20+Cj4gLS0tCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmMgICAg
ICAgfCAgNDAgKystCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0Lmgg
ICAgICAgfCAgMTMgKy0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2NvbnRl
eHQuYyAgICB8IDMyMiArKysrKysrKysrKysrKysrKysKPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfYWN0aXZlLmMgICAgICAgICAgICB8ICA2NyArKystCj4gICAuLi4vZHJtL2k5MTUvc2Vs
ZnRlc3RzL2k5MTVfbGl2ZV9zZWxmdGVzdHMuaCAgfCAgIDMgKy0KPiAgIDUgZmlsZXMgY2hhbmdl
ZCwgNDA4IGluc2VydGlvbnMoKyksIDM3IGRlbGV0aW9ucygtKQo+ICAgY3JlYXRlIG1vZGUgMTAw
NjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2NvbnRleHQuYwo+IAo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmMKPiBpbmRleCBkNjRiNDVmN2VjNmQuLjIx
MWFjNjU2OGE1ZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9j
b250ZXh0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmMK
PiBAQCAtMTYyLDIzICsxNjIsNDEgQEAgc3RhdGljIGludCBfX2ludGVsX2NvbnRleHRfYWN0aXZl
KHN0cnVjdCBpOTE1X2FjdGl2ZSAqYWN0aXZlKQo+ICAgCWlmIChlcnIpCj4gICAJCWdvdG8gZXJy
X3Jpbmc7Cj4gICAKPiArCXJldHVybiAwOwo+ICsKPiArZXJyX3Jpbmc6Cj4gKwlpbnRlbF9yaW5n
X3VucGluKGNlLT5yaW5nKTsKPiArZXJyX3B1dDoKPiArCWludGVsX2NvbnRleHRfcHV0KGNlKTsK
PiArCXJldHVybiBlcnI7Cj4gK30KPiArCj4gK2ludCBpbnRlbF9jb250ZXh0X2FjdGl2ZV9hY3F1
aXJlKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKPiArewo+ICsJaW50IGVycjsKPiArCj4gKwll
cnIgPSBpOTE1X2FjdGl2ZV9hY3F1aXJlKCZjZS0+YWN0aXZlKTsKPiArCWlmIChlcnIpCj4gKwkJ
cmV0dXJuIGVycjsKPiArCj4gICAJLyogUHJlYWxsb2NhdGUgdHJhY2tpbmcgbm9kZXMgKi8KPiAg
IAlpZiAoIWk5MTVfZ2VtX2NvbnRleHRfaXNfa2VybmVsKGNlLT5nZW1fY29udGV4dCkpIHsKPiAg
IAkJZXJyID0gaTkxNV9hY3RpdmVfYWNxdWlyZV9wcmVhbGxvY2F0ZV9iYXJyaWVyKCZjZS0+YWN0
aXZlLAo+ICAgCQkJCQkJCSAgICAgIGNlLT5lbmdpbmUpOwo+IC0JCWlmIChlcnIpCj4gLQkJCWdv
dG8gZXJyX3N0YXRlOwo+ICsJCWlmIChlcnIpIHsKPiArCQkJaTkxNV9hY3RpdmVfcmVsZWFzZSgm
Y2UtPmFjdGl2ZSk7Cj4gKwkJCXJldHVybiBlcnI7Cj4gKwkJfQo+ICAgCX0KPiAgIAo+ICAgCXJl
dHVybiAwOwo+ICt9Cj4gICAKPiAtZXJyX3N0YXRlOgo+IC0JX19jb250ZXh0X3VucGluX3N0YXRl
KGNlLT5zdGF0ZSk7Cj4gLWVycl9yaW5nOgo+IC0JaW50ZWxfcmluZ191bnBpbihjZS0+cmluZyk7
Cj4gLWVycl9wdXQ6Cj4gLQlpbnRlbF9jb250ZXh0X3B1dChjZSk7Cj4gLQlyZXR1cm4gZXJyOwo+
ICt2b2lkIGludGVsX2NvbnRleHRfYWN0aXZlX3JlbGVhc2Uoc3RydWN0IGludGVsX2NvbnRleHQg
KmNlKQo+ICt7Cj4gKwkvKiBOb2RlcyBwcmVhbGxvY2F0ZWQgaW4gaW50ZWxfY29udGV4dF9hY3Rp
dmUoKSAqLwo+ICsJaTkxNV9hY3RpdmVfYWNxdWlyZV9iYXJyaWVyKCZjZS0+YWN0aXZlKTsKPiAr
CWk5MTVfYWN0aXZlX3JlbGVhc2UoJmNlLT5hY3RpdmUpOwo+ICAgfQo+ICAgCj4gICB2b2lkCj4g
QEAgLTI5NywzICszMTUsNyBAQCBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICppbnRlbF9jb250ZXh0X2Ny
ZWF0ZV9yZXF1ZXN0KHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKPiAgIAo+ICAgCXJldHVybiBy
cTsKPiAgIH0KPiArCj4gKyNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9TRUxGVEVTVCkK
PiArI2luY2x1ZGUgInNlbGZ0ZXN0X2NvbnRleHQuYyIKPiArI2VuZGlmCj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2NvbnRleHQuaAo+IGluZGV4IDIzYzdlNGMwY2U3Yy4uMDdmOTkyNGRl
NDhmIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQu
aAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuaAo+IEBAIC0x
MDQsMTcgKzEwNCw4IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBpbnRlbF9jb250ZXh0X2V4aXQoc3Ry
dWN0IGludGVsX2NvbnRleHQgKmNlKQo+ICAgCQljZS0+b3BzLT5leGl0KGNlKTsKPiAgIH0KPiAg
IAo+IC1zdGF0aWMgaW5saW5lIGludCBpbnRlbF9jb250ZXh0X2FjdGl2ZV9hY3F1aXJlKHN0cnVj
dCBpbnRlbF9jb250ZXh0ICpjZSkKPiAtewo+IC0JcmV0dXJuIGk5MTVfYWN0aXZlX2FjcXVpcmUo
JmNlLT5hY3RpdmUpOwo+IC19Cj4gLQo+IC1zdGF0aWMgaW5saW5lIHZvaWQgaW50ZWxfY29udGV4
dF9hY3RpdmVfcmVsZWFzZShzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UpCj4gLXsKPiAtCS8qIE5v
ZGVzIHByZWFsbG9jYXRlZCBpbiBpbnRlbF9jb250ZXh0X2FjdGl2ZSgpICovCj4gLQlpOTE1X2Fj
dGl2ZV9hY3F1aXJlX2JhcnJpZXIoJmNlLT5hY3RpdmUpOwo+IC0JaTkxNV9hY3RpdmVfcmVsZWFz
ZSgmY2UtPmFjdGl2ZSk7Cj4gLX0KPiAraW50IGludGVsX2NvbnRleHRfYWN0aXZlX2FjcXVpcmUo
c3RydWN0IGludGVsX2NvbnRleHQgKmNlKTsKPiArdm9pZCBpbnRlbF9jb250ZXh0X2FjdGl2ZV9y
ZWxlYXNlKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSk7Cj4gICAKPiAgIHN0YXRpYyBpbmxpbmUg
c3RydWN0IGludGVsX2NvbnRleHQgKmludGVsX2NvbnRleHRfZ2V0KHN0cnVjdCBpbnRlbF9jb250
ZXh0ICpjZSkKPiAgIHsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2Vs
ZnRlc3RfY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfY29udGV4
dC5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAuLmI0MGVmZGFh
YmRkNQo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxm
dGVzdF9jb250ZXh0LmMKPiBAQCAtMCwwICsxLDMyMiBAQAo+ICsvKgo+ICsgKiBTUERYLUxpY2Vu
c2UtSWRlbnRpZmllcjogR1BMLTIuMAo+ICsgKgo+ICsgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRl
bCBDb3Jwb3JhdGlvbgo+ICsgKi8KPiArCj4gKyNpbmNsdWRlICJpOTE1X3NlbGZ0ZXN0LmgiCj4g
KyNpbmNsdWRlICJpbnRlbF9ndC5oIgo+ICsKPiArI2luY2x1ZGUgImdlbS9zZWxmdGVzdHMvbW9j
a19jb250ZXh0LmgiCj4gKyNpbmNsdWRlICJzZWxmdGVzdHMvaWd0X2ZsdXNoX3Rlc3QuaCIKPiAr
I2luY2x1ZGUgInNlbGZ0ZXN0cy9tb2NrX2RybS5oIgo+ICsKPiArc3RhdGljIGludCByZXF1ZXN0
X3N5bmMoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEpCj4gK3sKPiArCWxvbmcgdGltZW91dDsKPiAr
CWludCBlcnIgPSAwOwo+ICsKPiArCWk5MTVfcmVxdWVzdF9nZXQocnEpOwo+ICsKPiArCWk5MTVf
cmVxdWVzdF9hZGQocnEpOwo+ICsJdGltZW91dCA9IGk5MTVfcmVxdWVzdF93YWl0KHJxLCAwLCBI
WiAvIDEwKTsKPiArCWlmICh0aW1lb3V0IDwgMCkKPiArCQllcnIgPSB0aW1lb3V0Owo+ICsJZWxz
ZQo+ICsJCWk5MTVfcmVxdWVzdF9yZXRpcmVfdXB0byhycSk7Cj4gKwo+ICsJaTkxNV9yZXF1ZXN0
X3B1dChycSk7Cj4gKwo+ICsJcmV0dXJuIGVycjsKPiArfQo+ICsKPiArc3RhdGljIGludCBjb250
ZXh0X3N5bmMoc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQo+ICt7Cj4gKwlzdHJ1Y3QgaW50ZWxf
dGltZWxpbmUgKnRsID0gY2UtPnJpbmctPnRpbWVsaW5lOwo+ICsJaW50IGVyciA9IDA7Cj4gKwo+
ICsJZG8gewo+ICsJCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+ICsJCWxvbmcgdGltZW91dDsK
PiArCj4gKwkJcmN1X3JlYWRfbG9jaygpOwo+ICsJCXJxID0gcmN1X2RlcmVmZXJlbmNlKHRsLT5s
YXN0X3JlcXVlc3QucmVxdWVzdCk7Cj4gKwkJaWYgKHJxKQo+ICsJCQlycSA9IGk5MTVfcmVxdWVz
dF9nZXRfcmN1KHJxKTsKPiArCQlyY3VfcmVhZF91bmxvY2soKTsKPiArCQlpZiAoIXJxKQo+ICsJ
CQlicmVhazsKPiArCj4gKwkJdGltZW91dCA9IGk5MTVfcmVxdWVzdF93YWl0KHJxLCAwLCBIWiAv
IDEwKTsKPiArCQlpZiAodGltZW91dCA8IDApCj4gKwkJCWVyciA9IHRpbWVvdXQ7Cj4gKwkJZWxz
ZQo+ICsJCQlpOTE1X3JlcXVlc3RfcmV0aXJlX3VwdG8ocnEpOwo+ICsKPiArCQlpOTE1X3JlcXVl
c3RfcHV0KHJxKTsKPiArCX0gd2hpbGUgKCFlcnIpOwo+ICsKPiArCXJldHVybiBlcnI7Cj4gK30K
PiArCj4gK3N0YXRpYyBpbnQgX19saXZlX2FjdGl2ZV9jb250ZXh0KHN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZSwKPiArCQkJCSBzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqZml4bWUpCj4g
K3sKPiArCXN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZTsKPiArCWludCBwYXNzOwo+ICsJaW50IGVy
cjsKPiArCj4gKwkvKgo+ICsJICogV2Uga2VlcCBhY3RpdmUgY29udGV4dHMgYWxpdmUgdW50aWwg
YWZ0ZXIgYSBzdWJzZXF1ZW50IGNvbnRleHQKPiArCSAqIHN3aXRjaCBhcyB0aGUgZmluYWwgd3Jp
dGUgZnJvbSB0aGUgY29udGV4dC1zYXZlIHdpbGwgYmUgYWZ0ZXIKPiArCSAqIHdlIHJldGlyZSB0
aGUgZmluYWwgcmVxdWVzdC4gV2UgdHJhY2sgd2hlbiB3ZSB1bnBpbiB0aGUgY29udGV4dCwKPiAr
CSAqIHVuZGVyIHRoZSBwcmVzdW1wdGlvbiB0aGF0IHRoZSBmaW5hbCBwaW4gaXMgZnJvbSB0aGUg
bGFzdCByZXF1ZXN0LAo+ICsJICogYW5kIGluc3RlYWQgb2YgaW1tZWRpYXRlbHkgdW5waW5uaW5n
IHRoZSBjb250ZXh0LCB3ZSBhZGQgYSB0YXNrCj4gKwkgKiB0byB1bnBpbiB0aGUgY29udGV4dCBm
cm9tIHRoZSBuZXh0IGlkbGUtYmFycmllci4KPiArCSAqCj4gKwkgKiBUaGlzIHRlc3QgbWFrZXMg
c3VyZSB0aGF0IHRoZSBjb250ZXh0IGlzIGtlcHQgYWxpdmUgdW50aWwgYQo+ICsJICogc3Vic2Vx
dWVudCBpZGxlLWJhcnJpZXIgKGVtaXR0ZWQgd2hlbiB0aGUgZW5naW5lIHdha2VyZWYgaGl0cyAw
Cj4gKwkgKiB3aXRoIG5vIG1vcmUgb3V0c3RhbmRpbmcgcmVxdWVzdHMpLgo+ICsJICovCj4gKwo+
ICsJaWYgKGludGVsX2VuZ2luZV9wbV9pc19hd2FrZShlbmdpbmUpKSB7Cj4gKwkJcHJfZXJyKCIl
cyBpcyBhd2FrZSBiZWZvcmUgc3RhcnRpbmcgJXMhXG4iLAo+ICsJCSAgICAgICBlbmdpbmUtPm5h
bWUsIF9fZnVuY19fKTsKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCX0KPiArCj4gKwljZSA9IGlu
dGVsX2NvbnRleHRfY3JlYXRlKGZpeG1lLCBlbmdpbmUpOwo+ICsJaWYgKCFjZSkKPiArCQlyZXR1
cm4gLUVOT01FTTsKPiArCj4gKwlmb3IgKHBhc3MgPSAwOyBwYXNzIDw9IDI7IHBhc3MrKykgewo+
ICsJCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+ICsKPiArCQlycSA9IGludGVsX2NvbnRleHRf
Y3JlYXRlX3JlcXVlc3QoY2UpOwo+ICsJCWlmIChJU19FUlIocnEpKSB7Cj4gKwkJCWVyciA9IFBU
Ul9FUlIocnEpOwo+ICsJCQlnb3RvIGVycjsKPiArCQl9Cj4gKwo+ICsJCWVyciA9IHJlcXVlc3Rf
c3luYyhycSk7Cj4gKwkJaWYgKGVycikKPiArCQkJZ290byBlcnI7Cj4gKwo+ICsJCS8qIENvbnRl
eHQgd2lsbCBiZSBrZXB0IGFjdGl2ZSB1bnRpbCBhZnRlciBhbiBpZGxlLWJhcnJpZXIuICovCj4g
KwkJaWYgKGk5MTVfYWN0aXZlX2lzX2lkbGUoJmNlLT5hY3RpdmUpKSB7Cj4gKwkJCXByX2Vycigi
Y29udGV4dCBpcyBub3QgYWN0aXZlOyBleHBlY3RlZCBpZGxlLWJhcnJpZXIgKCVzIHBhc3MgJWQp
XG4iLAo+ICsJCQkgICAgICAgZW5naW5lLT5uYW1lLCBwYXNzKTsKPiArCQkJZXJyID0gLUVJTlZB
TDsKPiArCQkJZ290byBlcnI7Cj4gKwkJfQo+ICsKPiArCQlpZiAoIWludGVsX2VuZ2luZV9wbV9p
c19hd2FrZShlbmdpbmUpKSB7Cj4gKwkJCXByX2VycigiJXMgaXMgYXNsZWVwIGJlZm9yZSBpZGxl
LWJhcnJpZXJcbiIsCj4gKwkJCSAgICAgICBlbmdpbmUtPm5hbWUpOwo+ICsJCQllcnIgPSAtRUlO
VkFMOwo+ICsJCQlnb3RvIGVycjsKPiArCQl9Cj4gKwl9Cj4gKwo+ICsJLyogTm93IG1ha2Ugc3Vy
ZSBvdXIgaWRsZS1iYXJyaWVycyBhcmUgZmx1c2hlZCAqLwo+ICsJZXJyID0gY29udGV4dF9zeW5j
KGVuZ2luZS0+a2VybmVsX2NvbnRleHQpOwo+ICsJaWYgKGVycikKPiArCQlnb3RvIGVycjsKPiAr
Cj4gKwlpZiAoIWk5MTVfYWN0aXZlX2lzX2lkbGUoJmNlLT5hY3RpdmUpKSB7Cj4gKwkJcHJfZXJy
KCJjb250ZXh0IGlzIHN0aWxsIGFjdGl2ZSEiKTsKPiArCQllcnIgPSAtRUlOVkFMOwo+ICsJfQo+
ICsKPiArCWlmIChpbnRlbF9lbmdpbmVfcG1faXNfYXdha2UoZW5naW5lKSkgewo+ICsJCXN0cnVj
dCBkcm1fcHJpbnRlciBwID0gZHJtX2RlYnVnX3ByaW50ZXIoX19mdW5jX18pOwo+ICsKPiArCQlp
bnRlbF9lbmdpbmVfZHVtcChlbmdpbmUsICZwLAo+ICsJCQkJICAiJXMgaXMgc3RpbGwgYXdha2Ug
YWZ0ZXIgaWRsZS1iYXJyaWVyc1xuIiwKPiArCQkJCSAgZW5naW5lLT5uYW1lKTsKPiArCQlHRU1f
VFJBQ0VfRFVNUCgpOwo+ICsKPiArCQllcnIgPSAtRUlOVkFMOwo+ICsJCWdvdG8gZXJyOwo+ICsJ
fQo+ICsKPiArZXJyOgo+ICsJaW50ZWxfY29udGV4dF9wdXQoY2UpOwo+ICsJcmV0dXJuIGVycjsK
PiArfQo+ICsKPiArc3RhdGljIGludCBsaXZlX2FjdGl2ZV9jb250ZXh0KHZvaWQgKmFyZykKPiAr
ewo+ICsJc3RydWN0IGludGVsX2d0ICpndCA9IGFyZzsKPiArCXN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZTsKPiArCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpmaXhtZTsKPiArCWVudW0g
aW50ZWxfZW5naW5lX2lkIGlkOwo+ICsJc3RydWN0IGRybV9maWxlICpmaWxlOwo+ICsJaW50IGVy
ciA9IDA7Cj4gKwo+ICsJZmlsZSA9IG1vY2tfZmlsZShndC0+aTkxNSk7Cj4gKwlpZiAoSVNfRVJS
KGZpbGUpKQo+ICsJCXJldHVybiBQVFJfRVJSKGZpbGUpOwo+ICsKPiArCW11dGV4X2xvY2soJmd0
LT5pOTE1LT5kcm0uc3RydWN0X211dGV4KTsKPiArCj4gKwlmaXhtZSA9IGxpdmVfY29udGV4dChn
dC0+aTkxNSwgZmlsZSk7Cj4gKwlpZiAoIWZpeG1lKSB7Cj4gKwkJZXJyID0gLUVOT01FTTsKPiAr
CQlnb3RvIHVubG9jazsKPiArCX0KPiArCj4gKwlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBndC0+
aTkxNSwgaWQpIHsKPiArCQllcnIgPSBfX2xpdmVfYWN0aXZlX2NvbnRleHQoZW5naW5lLCBmaXht
ZSk7Cj4gKwkJaWYgKGVycikKPiArCQkJYnJlYWs7Cj4gKwo+ICsJCWVyciA9IGlndF9mbHVzaF90
ZXN0KGd0LT5pOTE1LCBJOTE1X1dBSVRfTE9DS0VEKTsKPiArCQlpZiAoZXJyKQo+ICsJCQlicmVh
azsKPiArCX0KPiArCj4gK3VubG9jazoKPiArCW11dGV4X3VubG9jaygmZ3QtPmk5MTUtPmRybS5z
dHJ1Y3RfbXV0ZXgpOwo+ICsJbW9ja19maWxlX2ZyZWUoZ3QtPmk5MTUsIGZpbGUpOwo+ICsJcmV0
dXJuIGVycjsKPiArfQo+ICsKPiArc3RhdGljIGludCBfX2xpdmVfcmVtb3RlX2NvbnRleHQoc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAo+ICsJCQkJIHN0cnVjdCBpOTE1X2dlbV9jb250
ZXh0ICpmaXhtZSkKPiArewo+ICsJc3RydWN0IGludGVsX2NvbnRleHQgKmxvY2FsLCAqcmVtb3Rl
Owo+ICsJc3RydWN0IGk5MTVfcmVxdWVzdCAqcnE7Cj4gKwlpbnQgcGFzczsKPiArCWludCBlcnI7
Cj4gKwo+ICsJLyoKPiArCSAqIENoZWNrIHRoYXQgb3VyIGlkbGUgYmFycmllcnMgZG8gbm90IGlu
dGVyZmVyZSB3aXRoIG5vcm1hbAo+ICsJICogYWN0aXZpdHkgdHJhY2tpbmcuIEluIHBhcnRpY3Vs
YXIsIGNoZWNrIHRoYXQgb3BlcmF0aW5nCj4gKwkgKiBvbiB0aGUgY29udGV4dCBpbWFnZSByZW1v
dGVseSAoaW50ZWxfY29udGV4dF9wcmVwYXJlX3JlbW90ZV9yZXF1ZXN0KQo+ICsJICogd2hpY2gg
aW5zZXJ0cyBmb3JpZWduIGZlbmNlcyBpbnRvIGludGVsX2NvbnRleHQuYWN0aXZlIGFyZSBub3QK
CnR5cG8gaW4gZm9yZWlnbgoKIm9wZXJhdGluZyAuLi4gYXJlIG5vdCAuLiIgPyBGb3JlaWduIGZl
bmNlcyBhcmUgbm90IGNsb2JiZXJlZD8KCj4gKwkgKiBjbG9iYmVyZWQuCj4gKwkgKi8KPiArCj4g
KwlyZW1vdGUgPSBpbnRlbF9jb250ZXh0X2NyZWF0ZShmaXhtZSwgZW5naW5lKTsKPiArCWlmICgh
cmVtb3RlKQo+ICsJCXJldHVybiAtRU5PTUVNOwo+ICsKPiArCWxvY2FsID0gaW50ZWxfY29udGV4
dF9jcmVhdGUoZml4bWUsIGVuZ2luZSk7Cj4gKwlpZiAoIWxvY2FsKSB7Cj4gKwkJZXJyID0gLUVO
T01FTTsKPiArCQlnb3RvIGVycl9yZW1vdGU7Cj4gKwl9Cj4gKwo+ICsJZm9yIChwYXNzID0gMDsg
cGFzcyA8PSAyOyBwYXNzKyspIHsKPiArCQllcnIgPSBpbnRlbF9jb250ZXh0X3BpbihyZW1vdGUp
Owo+ICsJCWlmIChlcnIpCj4gKwkJCWdvdG8gZXJyX2xvY2FsOwo+ICsKPiArCQlycSA9IGludGVs
X2NvbnRleHRfY3JlYXRlX3JlcXVlc3QobG9jYWwpOwo+ICsJCWlmIChJU19FUlIocnEpKSB7Cj4g
KwkJCWVyciA9IFBUUl9FUlIocnEpOwo+ICsJCQlnb3RvIGVycl91bnBpbjsKPiArCQl9Cj4gKwo+
ICsJCWVyciA9IGludGVsX2NvbnRleHRfcHJlcGFyZV9yZW1vdGVfcmVxdWVzdChyZW1vdGUsIHJx
KTsKPiArCQlpZiAoZXJyKSB7Cj4gKwkJCWk5MTVfcmVxdWVzdF9hZGQocnEpOwo+ICsJCQlnb3Rv
IGVycl91bnBpbjsKPiArCQl9Cj4gKwo+ICsJCWVyciA9IHJlcXVlc3Rfc3luYyhycSk7Cj4gKwkJ
aWYgKGVycikKPiArCQkJZ290byBlcnJfdW5waW47Cj4gKwo+ICsJCWludGVsX2NvbnRleHRfdW5w
aW4ocmVtb3RlKTsKPiArCQllcnIgPSBpbnRlbF9jb250ZXh0X3BpbihyZW1vdGUpOwoKdW5waW4t
cGluIGlzIHRvIHRyaWdnZXIgdHJhbnNmZXIgb2YgaWRsZSBiYXJyaWVycyBhbmQgbWF5YmUgdHJp
Z2dlciBzb21lIAphc3NlcnRzPwoKPiArCQlpZiAoZXJyKQo+ICsJCQlnb3RvIGVycl9sb2NhbDsK
PiArCj4gKwkJcnEgPSBpOTE1X3JlcXVlc3RfY3JlYXRlKGVuZ2luZS0+a2VybmVsX2NvbnRleHQp
OwoKV2h5IGEgcmVxdWVzdCBvbiBrZXJuZWwgY29udGV4dCBoZXJlLCBhIHRoaXJkIGNvbnRleHQ/
Cgo+ICsJCWlmIChJU19FUlIocnEpKSB7Cj4gKwkJCWVyciA9IFBUUl9FUlIocnEpOwo+ICsJCQln
b3RvIGVycl91bnBpbjsKPiArCQl9Cj4gKwo+ICsJCWVyciA9IGludGVsX2NvbnRleHRfcHJlcGFy
ZV9yZW1vdGVfcmVxdWVzdChyZW1vdGUsIHJxKTsKPiArCQlpZiAoZXJyKSB7Cj4gKwkJCWk5MTVf
cmVxdWVzdF9hZGQocnEpOwo+ICsJCQlnb3RvIGVycl91bnBpbjsKPiArCQl9Cj4gKwo+ICsJCWVy
ciA9IHJlcXVlc3Rfc3luYyhycSk7Cj4gKwkJaWYgKGVycikKPiArCQkJZ290byBlcnJfdW5waW47
Cj4gKwo+ICsJCWludGVsX2NvbnRleHRfdW5waW4ocmVtb3RlKTsKPiArCj4gKwkJaWYgKGk5MTVf
YWN0aXZlX2lzX2lkbGUoJnJlbW90ZS0+YWN0aXZlKSkgewo+ICsJCQlwcl9lcnIoInJlbW90ZSBj
b250ZXh0IGlzIG5vdCBhY3RpdmU7IGV4cGVjdGVkIGlkbGUtYmFycmllciAocGFzcyAlZClcbiIs
IHBhc3MpOwo+ICsJCQllcnIgPSAtRUlOVkFMOwo+ICsJCQlnb3RvIGVycl9sb2NhbDsKPiArCQl9
Cj4gKwl9Cj4gKwo+ICsJZ290byBlcnJfbG9jYWw7Cj4gKwo+ICtlcnJfdW5waW46Cj4gKwlpbnRl
bF9jb250ZXh0X3VucGluKHJlbW90ZSk7Cj4gK2Vycl9sb2NhbDoKPiArCWludGVsX2NvbnRleHRf
cHV0KGxvY2FsKTsKPiArZXJyX3JlbW90ZToKPiArCWludGVsX2NvbnRleHRfcHV0KHJlbW90ZSk7
Cj4gKwlyZXR1cm4gZXJyOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IGxpdmVfcmVtb3RlX2NvbnRl
eHQodm9pZCAqYXJnKQo+ICt7Cj4gKwlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gYXJnOwo+ICsJc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOwo+ICsJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQg
KmZpeG1lOwo+ICsJZW51bSBpbnRlbF9lbmdpbmVfaWQgaWQ7Cj4gKwlzdHJ1Y3QgZHJtX2ZpbGUg
KmZpbGU7Cj4gKwlpbnQgZXJyID0gMDsKPiArCj4gKwlmaWxlID0gbW9ja19maWxlKGd0LT5pOTE1
KTsKPiArCWlmIChJU19FUlIoZmlsZSkpCj4gKwkJcmV0dXJuIFBUUl9FUlIoZmlsZSk7Cj4gKwo+
ICsJbXV0ZXhfbG9jaygmZ3QtPmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwo+ICsKPiArCWZpeG1l
ID0gbGl2ZV9jb250ZXh0KGd0LT5pOTE1LCBmaWxlKTsKPiArCWlmICghZml4bWUpIHsKPiArCQll
cnIgPSAtRU5PTUVNOwo+ICsJCWdvdG8gdW5sb2NrOwo+ICsJfQo+ICsKPiArCWZvcl9lYWNoX2Vu
Z2luZShlbmdpbmUsIGd0LT5pOTE1LCBpZCkgewo+ICsJCWVyciA9IF9fbGl2ZV9yZW1vdGVfY29u
dGV4dChlbmdpbmUsIGZpeG1lKTsKPiArCQlpZiAoZXJyKQo+ICsJCQlicmVhazsKPiArCj4gKwkJ
ZXJyID0gaWd0X2ZsdXNoX3Rlc3QoZ3QtPmk5MTUsIEk5MTVfV0FJVF9MT0NLRUQpOwo+ICsJCWlm
IChlcnIpCj4gKwkJCWJyZWFrOwo+ICsJfQo+ICsKPiArdW5sb2NrOgo+ICsJbXV0ZXhfdW5sb2Nr
KCZndC0+aTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7Cj4gKwltb2NrX2ZpbGVfZnJlZShndC0+aTkx
NSwgZmlsZSk7Cj4gKwlyZXR1cm4gZXJyOwo+ICt9Cj4gKwo+ICtpbnQgaW50ZWxfY29udGV4dF9s
aXZlX3NlbGZ0ZXN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKPiArewo+ICsJc3Rh
dGljIGNvbnN0IHN0cnVjdCBpOTE1X3N1YnRlc3QgdGVzdHNbXSA9IHsKPiArCQlTVUJURVNUKGxp
dmVfYWN0aXZlX2NvbnRleHQpLAo+ICsJCVNVQlRFU1QobGl2ZV9yZW1vdGVfY29udGV4dCksCj4g
Kwl9Owo+ICsJc3RydWN0IGludGVsX2d0ICpndCA9ICZpOTE1LT5ndDsKPiArCj4gKwlpZiAoaW50
ZWxfZ3RfaXNfd2VkZ2VkKGd0KSkKPiArCQlyZXR1cm4gMDsKPiArCj4gKwlyZXR1cm4gaW50ZWxf
Z3RfbGl2ZV9zdWJ0ZXN0cyh0ZXN0cywgZ3QpOwo+ICt9Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfYWN0aXZlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Fj
dGl2ZS5jCj4gaW5kZXggMTNmMzA0YTI5ZmM4Li5lMDRhZmI1MTkyNjQgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9hY3RpdmUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfYWN0aXZlLmMKPiBAQCAtMTg0LDYgKzE4NCw3IEBAIGFjdGl2ZV9pbnN0YW5j
ZShzdHJ1Y3QgaTkxNV9hY3RpdmUgKnJlZiwgdTY0IGlkeCkKPiAgIAlyZWYtPmNhY2hlID0gbm9k
ZTsKPiAgIAltdXRleF91bmxvY2soJnJlZi0+bXV0ZXgpOwo+ICAgCj4gKwlCVUlMRF9CVUdfT04o
b2Zmc2V0b2YodHlwZW9mKCpub2RlKSwgYmFzZSkpOwo+ICAgCXJldHVybiAmbm9kZS0+YmFzZTsK
PiAgIH0KPiAgIAo+IEBAIC0yMTIsNiArMjEzLDggQEAgaW50IGk5MTVfYWN0aXZlX3JlZihzdHJ1
Y3QgaTkxNV9hY3RpdmUgKnJlZiwKPiAgIAlzdHJ1Y3QgaTkxNV9hY3RpdmVfcmVxdWVzdCAqYWN0
aXZlOwo+ICAgCWludCBlcnI7Cj4gICAKPiArCUdFTV9CVUdfT04oIXRpbWVsaW5lKTsgLyogcmVz
ZXJ2ZWQgZm9yIGlkbGUtYmFycmllciAqLwo+ICsKPiAgIAkvKiBQcmV2ZW50IHJlYXBpbmcgaW4g
Y2FzZSB3ZSBtYWxsb2Mvd2FpdCB3aGlsZSBidWlsZGluZyB0aGUgdHJlZSAqLwo+ICAgCWVyciA9
IGk5MTVfYWN0aXZlX2FjcXVpcmUocmVmKTsKPiAgIAlpZiAoZXJyKQo+IEBAIC0yMjIsNiArMjI1
LDcgQEAgaW50IGk5MTVfYWN0aXZlX3JlZihzdHJ1Y3QgaTkxNV9hY3RpdmUgKnJlZiwKPiAgIAkJ
ZXJyID0gLUVOT01FTTsKPiAgIAkJZ290byBvdXQ7Cj4gICAJfQo+ICsJR0VNX0JVR19PTihJU19F
UlIoYWN0aXZlLT5yZXF1ZXN0KSk7Cj4gICAKPiAgIAlpZiAoIWk5MTVfYWN0aXZlX3JlcXVlc3Rf
aXNzZXQoYWN0aXZlKSkKPiAgIAkJYXRvbWljX2luYygmcmVmLT5jb3VudCk7Cj4gQEAgLTM0Miw2
ICszNDYsMzQgQEAgdm9pZCBpOTE1X2FjdGl2ZV9maW5pKHN0cnVjdCBpOTE1X2FjdGl2ZSAqcmVm
KQo+ICAgfQo+ICAgI2VuZGlmCj4gICAKPiArc3RhdGljIHN0cnVjdCBhY3RpdmVfbm9kZSAqaWRs
ZV9iYXJyaWVyKHN0cnVjdCBpOTE1X2FjdGl2ZSAqcmVmKQo+ICt7Cj4gKwlzdHJ1Y3QgYWN0aXZl
X25vZGUgKmlkbGUgPSBOVUxMOwo+ICsJc3RydWN0IHJiX25vZGUgKnJiOwo+ICsKPiArCWlmIChS
Ql9FTVBUWV9ST09UKCZyZWYtPnRyZWUpKQo+ICsJCXJldHVybiBOVUxMOwo+ICsKPiArCW11dGV4
X2xvY2soJnJlZi0+bXV0ZXgpOwo+ICsJZm9yIChyYiA9IHJiX2ZpcnN0KCZyZWYtPnRyZWUpOyBy
YjsgcmIgPSByYl9uZXh0KHJiKSkgewo+ICsJCXN0cnVjdCBhY3RpdmVfbm9kZSAqbm9kZTsKPiAr
Cj4gKwkJbm9kZSA9IHJiX2VudHJ5KHJiLCB0eXBlb2YoKm5vZGUpLCBub2RlKTsKPiArCQlpZiAo
bm9kZS0+dGltZWxpbmUpCj4gKwkJCWJyZWFrOwo+ICsKPiArCQlpZiAoIWk5MTVfYWN0aXZlX3Jl
cXVlc3RfaXNzZXQoJm5vZGUtPmJhc2UpKSB7Cj4gKwkJCUdFTV9CVUdfT04oIWxpc3RfZW1wdHko
Jm5vZGUtPmJhc2UubGluaykpOwo+ICsJCQlyYl9lcmFzZShyYiwgJnJlZi0+dHJlZSk7Cj4gKwkJ
CWlkbGUgPSBub2RlOwo+ICsJCQlicmVhazsKPiArCQl9CgpVbmRlciB3aGF0IGNpcmN1bXN0YW5j
ZXMgZG9lcyB0aGUgd2FsayBjb250aW51ZT8gVGhlcmUgY2FuIGJlIHR3byBpZGxlIApiYXJyaWVy
cyAodGltZWxpbmUgPT0gMCkgaW4gdGhlIHRyZWU/Cgo+ICsJfQo+ICsJbXV0ZXhfdW5sb2NrKCZy
ZWYtPm11dGV4KTsKPiArCj4gKwlyZXR1cm4gaWRsZTsKPiArfQo+ICsKPiAgIGludCBpOTE1X2Fj
dGl2ZV9hY3F1aXJlX3ByZWFsbG9jYXRlX2JhcnJpZXIoc3RydWN0IGk5MTVfYWN0aXZlICpyZWYs
Cj4gICAJCQkJCSAgICBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCj4gICB7Cj4gQEAg
LTM1MiwyMiArMzg0LDI5IEBAIGludCBpOTE1X2FjdGl2ZV9hY3F1aXJlX3ByZWFsbG9jYXRlX2Jh
cnJpZXIoc3RydWN0IGk5MTVfYWN0aXZlICpyZWYsCj4gICAKPiAgIAlHRU1fQlVHX09OKCFlbmdp
bmUtPm1hc2spOwo+ICAgCWZvcl9lYWNoX2VuZ2luZV9tYXNrZWQoZW5naW5lLCBpOTE1LCBlbmdp
bmUtPm1hc2ssIHRtcCkgewo+IC0JCXN0cnVjdCBpbnRlbF9jb250ZXh0ICprY3R4ID0gZW5naW5l
LT5rZXJuZWxfY29udGV4dDsKPiAgIAkJc3RydWN0IGFjdGl2ZV9ub2RlICpub2RlOwo+ICAgCj4g
LQkJbm9kZSA9IGttZW1fY2FjaGVfYWxsb2MoZ2xvYmFsLnNsYWJfY2FjaGUsIEdGUF9LRVJORUwp
Owo+IC0JCWlmICh1bmxpa2VseSghbm9kZSkpIHsKPiAtCQkJZXJyID0gLUVOT01FTTsKPiAtCQkJ
Z290byB1bndpbmQ7Cj4gKwkJbm9kZSA9IGlkbGVfYmFycmllcihyZWYpOwo+ICsJCWlmICghbm9k
ZSkgewo+ICsJCQlub2RlID0ga21lbV9jYWNoZV9hbGxvYyhnbG9iYWwuc2xhYl9jYWNoZSwKPiAr
CQkJCQkJR0ZQX0tFUk5FTCB8Cj4gKwkJCQkJCV9fR0ZQX1JFVFJZX01BWUZBSUwgfAo+ICsJCQkJ
CQlfX0dGUF9OT1dBUk4pOwo+ICsJCQlpZiAodW5saWtlbHkoIW5vZGUpKSB7Cj4gKwkJCQllcnIg
PSAtRU5PTUVNOwo+ICsJCQkJZ290byB1bndpbmQ7Cj4gKwkJCX0KPiArCj4gKwkJCW5vZGUtPnJl
ZiA9IHJlZjsKPiArCQkJbm9kZS0+dGltZWxpbmUgPSAwOwo+ICsJCQlub2RlLT5iYXNlLnJldGly
ZSA9IG5vZGVfcmV0aXJlOwo+ICAgCQl9Cj4gICAKPiAtCQlpOTE1X2FjdGl2ZV9yZXF1ZXN0X2lu
aXQoJm5vZGUtPmJhc2UsCj4gLQkJCQkJICh2b2lkICopZW5naW5lLCBub2RlX3JldGlyZSk7Cj4g
LQkJbm9kZS0+dGltZWxpbmUgPSBrY3R4LT5yaW5nLT50aW1lbGluZS0+ZmVuY2VfY29udGV4dDsK
PiAtCQlub2RlLT5yZWYgPSByZWY7Cj4gKwkJaW50ZWxfZW5naW5lX3BtX2dldChlbmdpbmUpOwo+
ICsKPiArCQlSQ1VfSU5JVF9QT0lOVEVSKG5vZGUtPmJhc2UucmVxdWVzdCwgKHZvaWQgKillbmdp
bmUpOwo+ICAgCQlhdG9taWNfaW5jKCZyZWYtPmNvdW50KTsKPiAgIAo+IC0JCWludGVsX2VuZ2lu
ZV9wbV9nZXQoZW5naW5lKTsKPiAgIAkJbGxpc3RfYWRkKChzdHJ1Y3QgbGxpc3Rfbm9kZSAqKSZu
b2RlLT5iYXNlLmxpbmssCj4gICAJCQkgICZyZWYtPmJhcnJpZXJzKTsKPiAgIAl9Cj4gQEAgLTQw
Miw2ICs0NDEsNyBAQCB2b2lkIGk5MTVfYWN0aXZlX2FjcXVpcmVfYmFycmllcihzdHJ1Y3QgaTkx
NV9hY3RpdmUgKnJlZikKPiAgIAo+ICAgCQlub2RlID0gY29udGFpbmVyX29mKChzdHJ1Y3QgbGlz
dF9oZWFkICopcG9zLAo+ICAgCQkJCSAgICB0eXBlb2YoKm5vZGUpLCBiYXNlLmxpbmspOwo+ICsJ
CUdFTV9CVUdfT04obm9kZS0+dGltZWxpbmUpOwo+ICAgCj4gICAJCWVuZ2luZSA9ICh2b2lkICop
cmN1X2FjY2Vzc19wb2ludGVyKG5vZGUtPmJhc2UucmVxdWVzdCk7Cj4gICAJCVJDVV9JTklUX1BP
SU5URVIobm9kZS0+YmFzZS5yZXF1ZXN0LCBFUlJfUFRSKC1FQUdBSU4pKTsKPiBAQCAtNDEwLDEy
ICs0NTAsNyBAQCB2b2lkIGk5MTVfYWN0aXZlX2FjcXVpcmVfYmFycmllcihzdHJ1Y3QgaTkxNV9h
Y3RpdmUgKnJlZikKPiAgIAkJcCA9ICZyZWYtPnRyZWUucmJfbm9kZTsKPiAgIAkJd2hpbGUgKCpw
KSB7Cj4gICAJCQlwYXJlbnQgPSAqcDsKPiAtCQkJaWYgKHJiX2VudHJ5KHBhcmVudCwKPiAtCQkJ
CSAgICAgc3RydWN0IGFjdGl2ZV9ub2RlLAo+IC0JCQkJICAgICBub2RlKS0+dGltZWxpbmUgPCBu
b2RlLT50aW1lbGluZSkKPiAtCQkJCXAgPSAmcGFyZW50LT5yYl9yaWdodDsKPiAtCQkJZWxzZQo+
IC0JCQkJcCA9ICZwYXJlbnQtPnJiX2xlZnQ7Cj4gKwkJCXAgPSAmcGFyZW50LT5yYl9sZWZ0Owo+
ICAgCQl9Cj4gICAJCXJiX2xpbmtfbm9kZSgmbm9kZS0+bm9kZSwgcGFyZW50LCBwKTsKPiAgIAkJ
cmJfaW5zZXJ0X2NvbG9yKCZub2RlLT5ub2RlLCAmcmVmLT50cmVlKTsKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfbGl2ZV9zZWxmdGVzdHMuaCBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2xpdmVfc2VsZnRlc3RzLmgKPiBpbmRl
eCAyYjMxYTRlZTBiNGMuLmE4NDFkM2Y5YmVkYyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9saXZlX3NlbGZ0ZXN0cy5oCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfbGl2ZV9zZWxmdGVzdHMuaAo+IEBAIC0xNSw2ICsx
NSw3IEBAIHNlbGZ0ZXN0KHdvcmthcm91bmRzLCBpbnRlbF93b3JrYXJvdW5kc19saXZlX3NlbGZ0
ZXN0cykKPiAgIHNlbGZ0ZXN0KHRpbWVsaW5lcywgaW50ZWxfdGltZWxpbmVfbGl2ZV9zZWxmdGVz
dHMpCj4gICBzZWxmdGVzdChyZXF1ZXN0cywgaTkxNV9yZXF1ZXN0X2xpdmVfc2VsZnRlc3RzKQo+
ICAgc2VsZnRlc3QoYWN0aXZlLCBpOTE1X2FjdGl2ZV9saXZlX3NlbGZ0ZXN0cykKPiArc2VsZnRl
c3QoZ3RfY29udGV4dHMsIGludGVsX2NvbnRleHRfbGl2ZV9zZWxmdGVzdHMpCj4gICBzZWxmdGVz
dChvYmplY3RzLCBpOTE1X2dlbV9vYmplY3RfbGl2ZV9zZWxmdGVzdHMpCj4gICBzZWxmdGVzdCht
bWFuLCBpOTE1X2dlbV9tbWFuX2xpdmVfc2VsZnRlc3RzKQo+ICAgc2VsZnRlc3QoZG1hYnVmLCBp
OTE1X2dlbV9kbWFidWZfbGl2ZV9zZWxmdGVzdHMpCj4gQEAgLTI0LDcgKzI1LDcgQEAgc2VsZnRl
c3QoZ3R0LCBpOTE1X2dlbV9ndHRfbGl2ZV9zZWxmdGVzdHMpCj4gICBzZWxmdGVzdChnZW0sIGk5
MTVfZ2VtX2xpdmVfc2VsZnRlc3RzKQo+ICAgc2VsZnRlc3QoZXZpY3QsIGk5MTVfZ2VtX2V2aWN0
X2xpdmVfc2VsZnRlc3RzKQo+ICAgc2VsZnRlc3QoaHVnZXBhZ2VzLCBpOTE1X2dlbV9odWdlX3Bh
Z2VfbGl2ZV9zZWxmdGVzdHMpCj4gLXNlbGZ0ZXN0KGNvbnRleHRzLCBpOTE1X2dlbV9jb250ZXh0
X2xpdmVfc2VsZnRlc3RzKQo+ICtzZWxmdGVzdChnZW1fY29udGV4dHMsIGk5MTVfZ2VtX2NvbnRl
eHRfbGl2ZV9zZWxmdGVzdHMpCj4gICBzZWxmdGVzdChibHQsIGk5MTVfZ2VtX29iamVjdF9ibHRf
bGl2ZV9zZWxmdGVzdHMpCj4gICBzZWxmdGVzdChjbGllbnQsIGk5MTVfZ2VtX2NsaWVudF9ibHRf
bGl2ZV9zZWxmdGVzdHMpCj4gICBzZWxmdGVzdChyZXNldCwgaW50ZWxfcmVzZXRfbGl2ZV9zZWxm
dGVzdHMpCj4gCgpSZWdhcmRzLAoKVHZydGtvCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeA==

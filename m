Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C3DBAB95D7
	for <lists+intel-gfx@lfdr.de>; Fri, 20 Sep 2019 18:38:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 24F6F6FD66;
	Fri, 20 Sep 2019 16:38:19 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7BA216FD66
 for <intel-gfx@lists.freedesktop.org>; Fri, 20 Sep 2019 16:38:18 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by fmsmga105.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Sep 2019 09:38:17 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,529,1559545200"; d="scan'208";a="194735210"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by FMSMGA003.fm.intel.com with SMTP; 20 Sep 2019 09:38:15 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 20 Sep 2019 19:38:14 +0300
Date: Fri, 20 Sep 2019 19:38:14 +0300
From: Ville =?iso-8859-1?Q?Syrj=E4l=E4?= <ville.syrjala@linux.intel.com>
To: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Message-ID: <20190920163814.GD1208@intel.com>
References: <20190920114235.22411-1-maarten.lankhorst@linux.intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190920114235.22411-1-maarten.lankhorst@linux.intel.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
Subject: Re: [Intel-gfx] [PATCH 01/23] drm/i915/dp: Fix dsc bpp calculations, v2.
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org, stable@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCBTZXAgMjAsIDIwMTkgYXQgMDE6NDI6MTNQTSArMDIwMCwgTWFhcnRlbiBMYW5raG9y
c3Qgd3JvdGU6Cj4gVGhlcmUgd2FzIGEgaW50ZWdlciB3cmFwYXJvdW5kIHdoZW4gbW9kZV9jbG9j
ayBiZWNhbWUgdG9vIGhpZ2gsCj4gYW5kIHdlIGRpZG4ndCBjb3JyZWN0IGZvciB0aGUgRkVDIG92
ZXJoZWFkIGZhY3RvciB3aGVuIGRpdmlkaW5nLAo+IHdpdGggdGhlIGNhbGN1bGF0aW9ucyBicmVh
a2luZyBhdCBIQlIzLgo+IAo+IEFzIGEgcmVzdWx0IG91ciBjYWxjdWxhdGVkIGJwcCB3YXMgd2F5
IHRvbyBoaWdoLCBhbmQgdGhlIGxpbmsgd2lkdGgKPiBsaW1pdGF0aW9uIG5ldmVyIGNhbWUgaW50
byBlZmZlY3QuCj4gCj4gUHJpbnQgb3V0IHRoZSByZXN1bHRpbmcgYnBwIGNhbGN1bHVsYXRpb25z
IGFzIGEgc2FuaXR5IGNoZWNrLCBqdXN0Cj4gaW4gY2FzZSB3ZSBldmVyIGhhdmUgdG8gZGVidWcg
aXQgbGF0ZXIgb24gYWdhaW4uCj4gCj4gV2UgYWxzbyB1c2VkIHRoZSB3cm9uZyBmYWN0b3IgZm9y
IEZFQy4gV2hpbGUgYnNwZWMgbWVudGlvbnMgMi40JSwKPiBhbGwgdGhlIGNhbGN1bGF0aW9ucyB1
c2UgMS8wLjk3MjI2MSwgYW5kIHRoZSBzYW1lIHJhdGlvIHNob3VsZCBiZQo+IGFwcGxpZWQgdG8g
ZGF0YSBNL04gYXMgd2VsbCwgc28gdXNlIGl0IHRoZXJlIHdoZW4gRkVDIGlzIGVuYWJsZWQuCj4g
Cj4gTWFrZSBzdXJlIHdlIGRvbid0IGJyZWFrIGh3IHJlYWRvdXQsIGFuZCByZWFkIG91dCBGRUMg
ZW5hYmxlIHN0YXRlCj4gYW5kIGNvcnJlY3QgdGhlIERESSBjbG9jayByZWFkb3V0IGZvciB0aGUg
bmV3IHZhbHVlcy4KPiAKPiBUb2dldGhlciB3aXRoIHRoZSBuZXh0IGNvbW1pdCwgdGhpcyBjYXVz
ZXMgRkVDIHRvIHdvcmsgY29ycmVjdGx5Cj4gd2l0aCBiaWcgam9pbmVyLCB3aGlsZSBhbHNvIGhh
dmluZyB0aGUgY29ycmVjdCByZWZyZXNoIHJhdGUKPiByZXBvcnRlZCBpbiBrbXNfc2V0bW9kZS5i
YXNpYy4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBNYWFydGVuIExhbmtob3JzdCA8bWFhcnRlbi5sYW5r
aG9yc3RAbGludXguaW50ZWwuY29tPgo+IEZpeGVzOiBkOTIxOGM4ZjZjZjQgKCJkcm0vaTkxNS9k
cDogQWRkIGhlbHBlcnMgZm9yIENvbXByZXNzZWQgQlBQIGFuZCBTbGljZSBDb3VudCBmb3IgRFND
IikKPiBDYzogPHN0YWJsZUB2Z2VyLmtlcm5lbC5vcmc+ICMgdjUuMCsKPiBDYzogTWFuYXNpIE5h
dmFyZSA8bWFuYXNpLmQubmF2YXJlQGludGVsLmNvbT4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYyAgICAgfCAgMTkgKy0KPiAgZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgfCAgIDEgKwo+ICBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2RwLmMgICAgICB8IDE5NSArKysrKysrKysrLS0tLS0tLS0tCj4g
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuaCAgICAgIHwgICA2ICstCj4g
IDQgZmlsZXMgY2hhbmdlZCwgMTI4IGluc2VydGlvbnMoKyksIDkzIGRlbGV0aW9ucygtKQo+IAo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYwo+IGluZGV4IDNlNjM5NDEz
OTk2NC4uMWI1OWI4NTI4NzRiIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGRpLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2RkaS5jCj4gQEAgLTE0NzksNiArMTQ3OSwxMCBAQCBzdGF0aWMgdm9pZCBkZGlfZG90Y2xv
Y2tfZ2V0KHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZykKPiAgCWlmIChwaXBl
X2NvbmZpZy0+cGl4ZWxfbXVsdGlwbGllcikKPiAgCQlkb3RjbG9jayAvPSBwaXBlX2NvbmZpZy0+
cGl4ZWxfbXVsdGlwbGllcjsKPiAgCj4gKwkvKiBmZWMgYWRkcyBvdmVyaGVhZCB0byB0aGUgZGF0
YSBNL04gdmFsdWVzLCBjb3JyZWN0IGZvciBpdCAqLwo+ICsJaWYgKHBpcGVfY29uZmlnLT5mZWNf
ZW5hYmxlKQo+ICsJCWRvdGNsb2NrID0gaW50ZWxfZHBfZmVjX3RvX21vZGVfY2xvY2soZG90Y2xv
Y2spOwo+ICsKPiAgCXBpcGVfY29uZmlnLT5iYXNlLmFkanVzdGVkX21vZGUuY3J0Y19jbG9jayA9
IGRvdGNsb2NrOwo+ICB9Cj4gIAo+IEBAIC00MDMxLDcgKzQwMzUsOSBAQCB2b2lkIGludGVsX2Rk
aV9nZXRfY29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAo+ICAJY2FzZSBUUkFO
U19ERElfTU9ERV9TRUxFQ1RfRkRJOgo+ICAJCXBpcGVfY29uZmlnLT5vdXRwdXRfdHlwZXMgfD0g
QklUKElOVEVMX09VVFBVVF9BTkFMT0cpOwo+ICAJCWJyZWFrOwo+IC0JY2FzZSBUUkFOU19ERElf
TU9ERV9TRUxFQ1RfRFBfU1NUOgo+ICsJY2FzZSBUUkFOU19ERElfTU9ERV9TRUxFQ1RfRFBfU1NU
OiB7Cj4gKwkJc3RydWN0IGludGVsX2RwICppbnRlbF9kcCA9IGVuY190b19pbnRlbF9kcCgmZW5j
b2Rlci0+YmFzZSk7Cj4gKwo+ICAJCWlmIChlbmNvZGVyLT50eXBlID09IElOVEVMX09VVFBVVF9F
RFApCj4gIAkJCXBpcGVfY29uZmlnLT5vdXRwdXRfdHlwZXMgfD0gQklUKElOVEVMX09VVFBVVF9F
RFApOwo+ICAJCWVsc2UKPiBAQCAtNDAzOSw3ICs0MDQ1LDE4IEBAIHZvaWQgaW50ZWxfZGRpX2dl
dF9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCj4gIAkJcGlwZV9jb25maWct
PmxhbmVfY291bnQgPQo+ICAJCQkoKHRlbXAgJiBERElfUE9SVF9XSURUSF9NQVNLKSA+PiBERElf
UE9SVF9XSURUSF9TSElGVCkgKyAxOwo+ICAJCWludGVsX2RwX2dldF9tX24oaW50ZWxfY3J0Yywg
cGlwZV9jb25maWcpOwo+ICsKPiArCQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMSkgewo+
ICsJCQlwaXBlX2NvbmZpZy0+ZmVjX2VuYWJsZSA9Cj4gKwkJCQlJOTE1X1JFQUQoaW50ZWxfZHAt
PnJlZ3MuZHBfdHBfY3RsKSAmCj4gKwkJCQkJICBEUF9UUF9DVExfRkVDX0VOQUJMRTsKClNpZGUg
bm90ZTogVGhhdCBsb29rcyBicm9rZW4gZm9yIHRoZSBpbml0L3Jlc3VtZSByZWFkb3V0LgpJIGtu
ZXcgdGhlcmUgd2FzIGEgcmVhc29uIEkgZGlkbid0IHF1aXRlIGxpa2UgdGhlIGlkZWEgb2YKaW50
ZWxfZHAtPnJlZ3MuLi4KCj4gKwkJCURSTV9ERUJVR19LTVMoIltFTkNPREVSOiVkOiVzXSBGZWMg
c3RhdHVzOiAldVxuIiwKPiArCQkJCSAgICAgIGVuY29kZXItPmJhc2UuYmFzZS5pZCwgZW5jb2Rl
ci0+YmFzZS5uYW1lLAo+ICsJCQkJICAgICAgcGlwZV9jb25maWctPmZlY19lbmFibGUpOwo+ICsJ
CX0KPiArCj4gIAkJYnJlYWs7Cj4gKwl9Cj4gIAljYXNlIFRSQU5TX0RESV9NT0RFX1NFTEVDVF9E
UF9NU1Q6Cj4gIAkJcGlwZV9jb25maWctPm91dHB1dF90eXBlcyB8PSBCSVQoSU5URUxfT1VUUFVU
X0RQX01TVCk7Cj4gIAkJcGlwZV9jb25maWctPmxhbmVfY291bnQgPQo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCj4gaW5kZXggZTAwMzNkOTlmNmUzLi43
OTk2ODY0ZTZmN2MgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kaXNwbGF5LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXkuYwo+IEBAIC0xMjc3Myw2ICsxMjc3Myw3IEBAIGludGVsX3BpcGVfY29uZmlnX2Nv
bXBhcmUoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmN1cnJlbnRfY29uZmlnLAo+ICAJ
UElQRV9DT05GX0NIRUNLX0JPT0woaGRtaV9zY3JhbWJsaW5nKTsKPiAgCVBJUEVfQ09ORl9DSEVD
S19CT09MKGhkbWlfaGlnaF90bWRzX2Nsb2NrX3JhdGlvKTsKPiAgCVBJUEVfQ09ORl9DSEVDS19C
T09MKGhhc19pbmZvZnJhbWUpOwo+ICsJUElQRV9DT05GX0NIRUNLX0JPT0woZmVjX2VuYWJsZSk7
Cj4gIAo+ICAJUElQRV9DT05GX0NIRUNLX0JPT0xfSU5DT01QTEVURShoYXNfYXVkaW8pOwo+ICAK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCj4gaW5kZXggY2NhZjlmMDBi
NzQ3Li40ZGZiNzhkYzdmYTIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kcC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kcC5jCj4gQEAgLTc2LDggKzc2LDggQEAKPiAgI2RlZmluZSBEUF9EU0NfTUFYX0VOQ19USFJP
VUdIUFVUXzAJCTM0MDAwMAo+ICAjZGVmaW5lIERQX0RTQ19NQVhfRU5DX1RIUk9VR0hQVVRfMQkJ
NDAwMDAwCj4gIAo+IC0vKiBEUCBEU0MgRkVDIE92ZXJoZWFkIGZhY3RvciA9ICgxMDAgLSAyLjQp
LzEwMCAqLwo+IC0jZGVmaW5lIERQX0RTQ19GRUNfT1ZFUkhFQURfRkFDVE9SCQk5NzYKPiArLyog
RFAgRFNDIEZFQyBPdmVyaGVhZCBmYWN0b3IgPSAxLygwLjk3MjI2MSkgKi8KPiArI2RlZmluZSBE
UF9EU0NfRkVDX09WRVJIRUFEX0ZBQ1RPUgkJOTcyMjYxCj4gIAo+ICAvKiBDb21wbGlhbmNlIHRl
c3Qgc3RhdHVzIGJpdHMgICovCj4gICNkZWZpbmUgSU5URUxfRFBfUkVTT0xVVElPTl9TSElGVF9N
QVNLCTAKPiBAQCAtNDkyLDYgKzQ5MiwxMDQgQEAgaW50IGludGVsX2RwX2dldF9saW5rX3RyYWlu
X2ZhbGxiYWNrX3ZhbHVlcyhzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAo+ICAJcmV0dXJuIDA7
Cj4gIH0KPiAgCj4gK3N0YXRpYyBpbmxpbmUgdTMyIGludGVsX2RwX21vZGVfdG9fZmVjX2Nsb2Nr
KHUzMiBtb2RlX2Nsb2NrKQo+ICt7Cj4gKwlyZXR1cm4gZGl2X3U2NChtdWxfdTMyX3UzMihtb2Rl
X2Nsb2NrLCAxMDAwMDAwVSksCj4gKwkJICAgICAgIERQX0RTQ19GRUNfT1ZFUkhFQURfRkFDVE9S
KTsKPiArfQo+ICsKPiArdTMyIGludGVsX2RwX2ZlY190b19tb2RlX2Nsb2NrKHUzMiBmZWNfY2xv
Y2spCj4gK3sKPiArCXJldHVybiBkaXZfdTY0KG11bF91MzJfdTMyKGZlY19jbG9jaywKPiArCQkJ
CSAgIERQX0RTQ19GRUNfT1ZFUkhFQURfRkFDVE9SKSwKPiArCQkgICAgICAgMTAwMDAwMFUpOwo+
ICt9Cj4gKwo+ICtzdGF0aWMgdTE2IGludGVsX2RwX2RzY19nZXRfb3V0cHV0X2JwcCh1MzIgbGlu
a19jbG9jaywgdTMyIGxhbmVfY291bnQsCj4gKwkJCQkgICAgICAgdTMyIG1vZGVfY2xvY2ssIHUz
MiBtb2RlX2hkaXNwbGF5KQo+ICt7Cj4gKwl1MzIgYml0c19wZXJfcGl4ZWwsIG1heF9icHBfc21h
bGxfam9pbmVyX3JhbTsKPiArCWludCBpOwo+ICsKPiArCS8qCj4gKwkgKiBBdmFpbGFibGUgTGlu
ayBCYW5kd2lkdGgoS2JpdHMvc2VjKSA9IChOdW1iZXJPZkxhbmVzKSoKPiArCSAqIChMaW5rU3lt
Ym9sQ2xvY2spKiA4ICogKFRpbWVTbG90c1Blck1UUCkKPiArCSAqIGZvciBTU1QgLT4gVGltZVNs
b3RzUGVyTVRQIGlzIDEsCj4gKwkgKiBmb3IgTVNUIC0+IFRpbWVTbG90c1Blck1UUCBoYXMgdG8g
YmUgY2FsY3VsYXRlZAo+ICsJICovCj4gKwliaXRzX3Blcl9waXhlbCA9IChsaW5rX2Nsb2NrICog
bGFuZV9jb3VudCAqIDgpIC8KPiArCQkJIGludGVsX2RwX21vZGVfdG9fZmVjX2Nsb2NrKG1vZGVf
Y2xvY2spOwo+ICsJRFJNX0RFQlVHX0tNUygiTWF4IGxpbmsgYnBwOiAldVxuIiwgYml0c19wZXJf
cGl4ZWwpOwo+ICsKPiArCS8qIFNtYWxsIEpvaW5lciBDaGVjazogb3V0cHV0IGJwcCA8PSBqb2lu
ZXIgUkFNIChiaXRzKSAvIEhvcml6LiB3aWR0aCAqLwo+ICsJbWF4X2JwcF9zbWFsbF9qb2luZXJf
cmFtID0gRFBfRFNDX01BWF9TTUFMTF9KT0lORVJfUkFNX0JVRkZFUiAvIG1vZGVfaGRpc3BsYXk7
Cj4gKwlEUk1fREVCVUdfS01TKCJNYXggc21hbGwgam9pbmVyIGJwcDogJXVcbiIsIG1heF9icHBf
c21hbGxfam9pbmVyX3JhbSk7Cj4gKwo+ICsJLyoKPiArCSAqIEdyZWF0ZXN0IGFsbG93ZWQgRFND
IEJQUCA9IE1JTiAob3V0cHV0IEJQUCBmcm9tIGF2YWlsYWJsZSBMaW5rIEJXCj4gKwkgKiBjaGVj
aywgb3V0cHV0IGJwcCBmcm9tIHNtYWxsIGpvaW5lciBSQU0gY2hlY2spCj4gKwkgKi8KPiArCWJp
dHNfcGVyX3BpeGVsID0gbWluKGJpdHNfcGVyX3BpeGVsLCBtYXhfYnBwX3NtYWxsX2pvaW5lcl9y
YW0pOwo+ICsKPiArCS8qIEVycm9yIG91dCBpZiB0aGUgbWF4IGJwcCBpcyBsZXNzIHRoYW4gc21h
bGxlc3QgYWxsb3dlZCB2YWxpZCBicHAgKi8KPiArCWlmIChiaXRzX3Blcl9waXhlbCA8IHZhbGlk
X2RzY19icHBbMF0pIHsKPiArCQlEUk1fREVCVUdfS01TKCJVbnN1cHBvcnRlZCBCUFAgJXUsIG1p
biAldVxuIiwKPiArCQkJICAgICAgYml0c19wZXJfcGl4ZWwsIHZhbGlkX2RzY19icHBbMF0pOwo+
ICsJCXJldHVybiAwOwo+ICsJfQo+ICsKPiArCS8qIEZpbmQgdGhlIG5lYXJlc3QgbWF0Y2ggaW4g
dGhlIGFycmF5IG9mIGtub3duIEJQUHMgZnJvbSBWRVNBICovCj4gKwlmb3IgKGkgPSAwOyBpIDwg
QVJSQVlfU0laRSh2YWxpZF9kc2NfYnBwKSAtIDE7IGkrKykgewo+ICsJCWlmIChiaXRzX3Blcl9w
aXhlbCA8IHZhbGlkX2RzY19icHBbaSArIDFdKQo+ICsJCQlicmVhazsKPiArCX0KPiArCWJpdHNf
cGVyX3BpeGVsID0gdmFsaWRfZHNjX2JwcFtpXTsKPiArCj4gKwkvKgo+ICsJICogQ29tcHJlc3Nl
ZCBCUFAgaW4gVTYuNCBmb3JtYXQgc28gbXVsdGlwbHkgYnkgMTYsIGZvciBHZW4gMTEsCj4gKwkg
KiBmcmFjdGlvbmFsIHBhcnQgaXMgMAo+ICsJICovCj4gKwlyZXR1cm4gYml0c19wZXJfcGl4ZWwg
PDwgNDsKPiArfQo+ICsKPiArc3RhdGljIHU4IGludGVsX2RwX2RzY19nZXRfc2xpY2VfY291bnQo
c3RydWN0IGludGVsX2RwICppbnRlbF9kcCwKPiArCQkJCSAgICAgICBpbnQgbW9kZV9jbG9jaywg
aW50IG1vZGVfaGRpc3BsYXkpCj4gK3sKPiArCXU4IG1pbl9zbGljZV9jb3VudCwgaTsKPiArCWlu
dCBtYXhfc2xpY2Vfd2lkdGg7Cj4gKwo+ICsJaWYgKG1vZGVfY2xvY2sgPD0gRFBfRFNDX1BFQUtf
UElYRUxfUkFURSkKPiArCQltaW5fc2xpY2VfY291bnQgPSBESVZfUk9VTkRfVVAobW9kZV9jbG9j
aywKPiArCQkJCQkgICAgICAgRFBfRFNDX01BWF9FTkNfVEhST1VHSFBVVF8wKTsKPiArCWVsc2UK
PiArCQltaW5fc2xpY2VfY291bnQgPSBESVZfUk9VTkRfVVAobW9kZV9jbG9jaywKPiArCQkJCQkg
ICAgICAgRFBfRFNDX01BWF9FTkNfVEhST1VHSFBVVF8xKTsKPiArCj4gKwltYXhfc2xpY2Vfd2lk
dGggPSBkcm1fZHBfZHNjX3NpbmtfbWF4X3NsaWNlX3dpZHRoKGludGVsX2RwLT5kc2NfZHBjZCk7
Cj4gKwlpZiAobWF4X3NsaWNlX3dpZHRoIDwgRFBfRFNDX01JTl9TTElDRV9XSURUSF9WQUxVRSkg
ewo+ICsJCURSTV9ERUJVR19LTVMoIlVuc3VwcG9ydGVkIHNsaWNlIHdpZHRoICVkIGJ5IERQIERT
QyBTaW5rIGRldmljZVxuIiwKPiArCQkJICAgICAgbWF4X3NsaWNlX3dpZHRoKTsKPiArCQlyZXR1
cm4gMDsKPiArCX0KPiArCS8qIEFsc28gdGFrZSBpbnRvIGFjY291bnQgbWF4IHNsaWNlIHdpZHRo
ICovCj4gKwltaW5fc2xpY2VfY291bnQgPSBtaW5fdCh1OCwgbWluX3NsaWNlX2NvdW50LAo+ICsJ
CQkJRElWX1JPVU5EX1VQKG1vZGVfaGRpc3BsYXksCj4gKwkJCQkJICAgICBtYXhfc2xpY2Vfd2lk
dGgpKTsKPiArCj4gKwkvKiBGaW5kIHRoZSBjbG9zZXN0IG1hdGNoIHRvIHRoZSB2YWxpZCBzbGlj
ZSBjb3VudCB2YWx1ZXMgKi8KPiArCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKHZhbGlkX2Rz
Y19zbGljZWNvdW50KTsgaSsrKSB7Cj4gKwkJaWYgKHZhbGlkX2RzY19zbGljZWNvdW50W2ldID4K
PiArCQkgICAgZHJtX2RwX2RzY19zaW5rX21heF9zbGljZV9jb3VudChpbnRlbF9kcC0+ZHNjX2Rw
Y2QsCj4gKwkJCQkJCSAgICBmYWxzZSkpCj4gKwkJCWJyZWFrOwo+ICsJCWlmIChtaW5fc2xpY2Vf
Y291bnQgIDw9IHZhbGlkX2RzY19zbGljZWNvdW50W2ldKQo+ICsJCQlyZXR1cm4gdmFsaWRfZHNj
X3NsaWNlY291bnRbaV07Cj4gKwl9Cj4gKwo+ICsJRFJNX0RFQlVHX0tNUygiVW5zdXBwb3J0ZWQg
U2xpY2UgQ291bnQgJWRcbiIsIG1pbl9zbGljZV9jb3VudCk7Cj4gKwlyZXR1cm4gMDsKPiArfQo+
ICsKPiAgc3RhdGljIGVudW0gZHJtX21vZGVfc3RhdHVzCj4gIGludGVsX2RwX21vZGVfdmFsaWQo
c3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKPiAgCQkgICAgc3RydWN0IGRybV9kaXNw
bGF5X21vZGUgKm1vZGUpCj4gQEAgLTIxODIsNiArMjI4MCw3IEBAIGludGVsX2RwX2NvbXB1dGVf
Y29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAo+ICAJYm9vbCBjb25zdGFudF9u
ID0gZHJtX2RwX2hhc19xdWlyaygmaW50ZWxfZHAtPmRlc2MsCj4gIAkJCQkJICAgRFBfRFBDRF9R
VUlSS19DT05TVEFOVF9OKTsKPiAgCWludCByZXQgPSAwLCBvdXRwdXRfYnBwOwo+ICsJdTMyIGRh
dGFfY2xvY2s7Cj4gIAo+ICAJaWYgKEhBU19QQ0hfU1BMSVQoZGV2X3ByaXYpICYmICFIQVNfRERJ
KGRldl9wcml2KSAmJiBwb3J0ICE9IFBPUlRfQSkKPiAgCQlwaXBlX2NvbmZpZy0+aGFzX3BjaF9l
bmNvZGVyID0gdHJ1ZTsKPiBAQCAtMjI0NCw5ICsyMzQzLDE0IEBAIGludGVsX2RwX2NvbXB1dGVf
Y29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAo+ICAJZWxzZQo+ICAJCW91dHB1
dF9icHAgPSBpbnRlbF9kcF9vdXRwdXRfYnBwKHBpcGVfY29uZmlnLCBwaXBlX2NvbmZpZy0+cGlw
ZV9icHApOwo+ICAKPiArCWlmIChwaXBlX2NvbmZpZy0+ZmVjX2VuYWJsZSkKPiArCQlkYXRhX2Ns
b2NrID0gaW50ZWxfZHBfbW9kZV90b19mZWNfY2xvY2soYWRqdXN0ZWRfbW9kZS0+Y3J0Y19jbG9j
ayk7Cj4gKwllbHNlCj4gKwkJZGF0YV9jbG9jayA9IGFkanVzdGVkX21vZGUtPmNydGNfY2xvY2s7
CgpUaGlzIGxvb2tzIHdyb25nIHRvIG1lLiBUaGUgbGluayBNL04gYXJlIHVzZWQgdGhlIHJlZ2Vu
ZXJhdGUgdGhlCnN0cmVhbSBjbG9jayBmcm9tIHRoZSBsaW5rIHN5bWJvbCBjbG9jay4gQUZBSUNT
IHRoZSBvbmx5IGVmZmVjdCBGRUMKc2hvdWxkIGhhdmUgaXMgdGhhdCB0aGUgb3ZlcmhlYWQgbWF5
IHJlcXVpcmUgdXMgdG8gYnVtcCB0aGUgTFMgY2xvY2sKYSBiaXQgaGlnaGVyLiBCdXQgdGhlIE0v
TiBpcyBzdGlsIGNvbXB1dGVkIHNpbXBseSBhcyB0aGUgcmF0aW8KYmV0d2VlbiBMUyBjbG9jayBh
bmQgc3RyZWFtIGNsb2NrLgoKVGhlIGRhdGEgTS9OIGRvIG5lZWQgdG8gYWNjb3VudCBmb3IgRkVD
LiBJIGd1ZXNzIHRoYXQncyB0aGUgcHJvYmxlbQp5b3UncmUgdHJ5aW5nIHRvIGFkZHJlc3MgaGVy
ZT8KCj4gKwo+ICAJaW50ZWxfbGlua19jb21wdXRlX21fbihvdXRwdXRfYnBwLAo+ICAJCQkgICAg
ICAgcGlwZV9jb25maWctPmxhbmVfY291bnQsCj4gLQkJCSAgICAgICBhZGp1c3RlZF9tb2RlLT5j
cnRjX2Nsb2NrLAo+ICsJCQkgICAgICAgZGF0YV9jbG9jaywKPiAgCQkJICAgICAgIHBpcGVfY29u
ZmlnLT5wb3J0X2Nsb2NrLAo+ICAJCQkgICAgICAgJnBpcGVfY29uZmlnLT5kcF9tX24sCj4gIAkJ
CSAgICAgICBjb25zdGFudF9uKTsKPiBAQCAtNDM2Myw5MSArNDQ2Nyw2IEBAIGludGVsX2RwX2dl
dF9zaW5rX2lycV9lc2koc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwgdTggKnNpbmtfaXJxX3Zl
Y3RvcikKPiAgCQlEUF9EUFJYX0VTSV9MRU47Cj4gIH0KPiAgCj4gLXUxNiBpbnRlbF9kcF9kc2Nf
Z2V0X291dHB1dF9icHAoaW50IGxpbmtfY2xvY2ssIHU4IGxhbmVfY291bnQsCj4gLQkJCQlpbnQg
bW9kZV9jbG9jaywgaW50IG1vZGVfaGRpc3BsYXkpCj4gLXsKPiAtCXUxNiBiaXRzX3Blcl9waXhl
bCwgbWF4X2JwcF9zbWFsbF9qb2luZXJfcmFtOwo+IC0JaW50IGk7Cj4gLQo+IC0JLyoKPiAtCSAq
IEF2YWlsYWJsZSBMaW5rIEJhbmR3aWR0aChLYml0cy9zZWMpID0gKE51bWJlck9mTGFuZXMpKgo+
IC0JICogKExpbmtTeW1ib2xDbG9jaykqIDggKiAoKDEwMC1GRUNPdmVyaGVhZCkvMTAwKSooVGlt
ZVNsb3RzUGVyTVRQKQo+IC0JICogRkVDT3ZlcmhlYWQgPSAyLjQlLCBmb3IgU1NUIC0+IFRpbWVT
bG90c1Blck1UUCBpcyAxLAo+IC0JICogZm9yIE1TVCAtPiBUaW1lU2xvdHNQZXJNVFAgaGFzIHRv
IGJlIGNhbGN1bGF0ZWQKPiAtCSAqLwo+IC0JYml0c19wZXJfcGl4ZWwgPSAobGlua19jbG9jayAq
IGxhbmVfY291bnQgKiA4ICoKPiAtCQkJICBEUF9EU0NfRkVDX09WRVJIRUFEX0ZBQ1RPUikgLwo+
IC0JCW1vZGVfY2xvY2s7Cj4gLQo+IC0JLyogU21hbGwgSm9pbmVyIENoZWNrOiBvdXRwdXQgYnBw
IDw9IGpvaW5lciBSQU0gKGJpdHMpIC8gSG9yaXouIHdpZHRoICovCj4gLQltYXhfYnBwX3NtYWxs
X2pvaW5lcl9yYW0gPSBEUF9EU0NfTUFYX1NNQUxMX0pPSU5FUl9SQU1fQlVGRkVSIC8KPiAtCQlt
b2RlX2hkaXNwbGF5Owo+IC0KPiAtCS8qCj4gLQkgKiBHcmVhdGVzdCBhbGxvd2VkIERTQyBCUFAg
PSBNSU4gKG91dHB1dCBCUFAgZnJvbSBhdmFpYWxibGUgTGluayBCVwo+IC0JICogY2hlY2ssIG91
dHB1dCBicHAgZnJvbSBzbWFsbCBqb2luZXIgUkFNIGNoZWNrKQo+IC0JICovCj4gLQliaXRzX3Bl
cl9waXhlbCA9IG1pbihiaXRzX3Blcl9waXhlbCwgbWF4X2JwcF9zbWFsbF9qb2luZXJfcmFtKTsK
PiAtCj4gLQkvKiBFcnJvciBvdXQgaWYgdGhlIG1heCBicHAgaXMgbGVzcyB0aGFuIHNtYWxsZXN0
IGFsbG93ZWQgdmFsaWQgYnBwICovCj4gLQlpZiAoYml0c19wZXJfcGl4ZWwgPCB2YWxpZF9kc2Nf
YnBwWzBdKSB7Cj4gLQkJRFJNX0RFQlVHX0tNUygiVW5zdXBwb3J0ZWQgQlBQICVkXG4iLCBiaXRz
X3Blcl9waXhlbCk7Cj4gLQkJcmV0dXJuIDA7Cj4gLQl9Cj4gLQo+IC0JLyogRmluZCB0aGUgbmVh
cmVzdCBtYXRjaCBpbiB0aGUgYXJyYXkgb2Yga25vd24gQlBQcyBmcm9tIFZFU0EgKi8KPiAtCWZv
ciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKHZhbGlkX2RzY19icHApIC0gMTsgaSsrKSB7Cj4gLQkJ
aWYgKGJpdHNfcGVyX3BpeGVsIDwgdmFsaWRfZHNjX2JwcFtpICsgMV0pCj4gLQkJCWJyZWFrOwo+
IC0JfQo+IC0JYml0c19wZXJfcGl4ZWwgPSB2YWxpZF9kc2NfYnBwW2ldOwo+IC0KPiAtCS8qCj4g
LQkgKiBDb21wcmVzc2VkIEJQUCBpbiBVNi40IGZvcm1hdCBzbyBtdWx0aXBseSBieSAxNiwgZm9y
IEdlbiAxMSwKPiAtCSAqIGZyYWN0aW9uYWwgcGFydCBpcyAwCj4gLQkgKi8KPiAtCXJldHVybiBi
aXRzX3Blcl9waXhlbCA8PCA0Owo+IC19Cj4gLQo+IC11OCBpbnRlbF9kcF9kc2NfZ2V0X3NsaWNl
X2NvdW50KHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsCj4gLQkJCQlpbnQgbW9kZV9jbG9jaywK
PiAtCQkJCWludCBtb2RlX2hkaXNwbGF5KQo+IC17Cj4gLQl1OCBtaW5fc2xpY2VfY291bnQsIGk7
Cj4gLQlpbnQgbWF4X3NsaWNlX3dpZHRoOwo+IC0KPiAtCWlmIChtb2RlX2Nsb2NrIDw9IERQX0RT
Q19QRUFLX1BJWEVMX1JBVEUpCj4gLQkJbWluX3NsaWNlX2NvdW50ID0gRElWX1JPVU5EX1VQKG1v
ZGVfY2xvY2ssCj4gLQkJCQkJICAgICAgIERQX0RTQ19NQVhfRU5DX1RIUk9VR0hQVVRfMCk7Cj4g
LQllbHNlCj4gLQkJbWluX3NsaWNlX2NvdW50ID0gRElWX1JPVU5EX1VQKG1vZGVfY2xvY2ssCj4g
LQkJCQkJICAgICAgIERQX0RTQ19NQVhfRU5DX1RIUk9VR0hQVVRfMSk7Cj4gLQo+IC0JbWF4X3Ns
aWNlX3dpZHRoID0gZHJtX2RwX2RzY19zaW5rX21heF9zbGljZV93aWR0aChpbnRlbF9kcC0+ZHNj
X2RwY2QpOwo+IC0JaWYgKG1heF9zbGljZV93aWR0aCA8IERQX0RTQ19NSU5fU0xJQ0VfV0lEVEhf
VkFMVUUpIHsKPiAtCQlEUk1fREVCVUdfS01TKCJVbnN1cHBvcnRlZCBzbGljZSB3aWR0aCAlZCBi
eSBEUCBEU0MgU2luayBkZXZpY2VcbiIsCj4gLQkJCSAgICAgIG1heF9zbGljZV93aWR0aCk7Cj4g
LQkJcmV0dXJuIDA7Cj4gLQl9Cj4gLQkvKiBBbHNvIHRha2UgaW50byBhY2NvdW50IG1heCBzbGlj
ZSB3aWR0aCAqLwo+IC0JbWluX3NsaWNlX2NvdW50ID0gbWluX3QodTgsIG1pbl9zbGljZV9jb3Vu
dCwKPiAtCQkJCURJVl9ST1VORF9VUChtb2RlX2hkaXNwbGF5LAo+IC0JCQkJCSAgICAgbWF4X3Ns
aWNlX3dpZHRoKSk7Cj4gLQo+IC0JLyogRmluZCB0aGUgY2xvc2VzdCBtYXRjaCB0byB0aGUgdmFs
aWQgc2xpY2UgY291bnQgdmFsdWVzICovCj4gLQlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRSh2
YWxpZF9kc2Nfc2xpY2Vjb3VudCk7IGkrKykgewo+IC0JCWlmICh2YWxpZF9kc2Nfc2xpY2Vjb3Vu
dFtpXSA+Cj4gLQkJICAgIGRybV9kcF9kc2Nfc2lua19tYXhfc2xpY2VfY291bnQoaW50ZWxfZHAt
PmRzY19kcGNkLAo+IC0JCQkJCQkgICAgZmFsc2UpKQo+IC0JCQlicmVhazsKPiAtCQlpZiAobWlu
X3NsaWNlX2NvdW50ICA8PSB2YWxpZF9kc2Nfc2xpY2Vjb3VudFtpXSkKPiAtCQkJcmV0dXJuIHZh
bGlkX2RzY19zbGljZWNvdW50W2ldOwo+IC0JfQo+IC0KPiAtCURSTV9ERUJVR19LTVMoIlVuc3Vw
cG9ydGVkIFNsaWNlIENvdW50ICVkXG4iLCBtaW5fc2xpY2VfY291bnQpOwo+IC0JcmV0dXJuIDA7
Cj4gLX0KPiAtCj4gIHN0YXRpYyB2b2lkCj4gIGludGVsX3BpeGVsX2VuY29kaW5nX3NldHVwX3Zz
YyhzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAo+ICAJCQkgICAgICAgY29uc3Qgc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZHAuaAo+IGluZGV4IGUwMWQxZjg5NDA5ZC4uZTlmMTFlNjk4Njk3IDEwMDY0NAo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuaAo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuaAo+IEBAIC0xMDMsMTAgKzEwMyw2IEBA
IGJvb2wgaW50ZWxfZHBfc291cmNlX3N1cHBvcnRzX2hicjIoc3RydWN0IGludGVsX2RwICppbnRl
bF9kcCk7Cj4gIGJvb2wgaW50ZWxfZHBfc291cmNlX3N1cHBvcnRzX2hicjMoc3RydWN0IGludGVs
X2RwICppbnRlbF9kcCk7Cj4gIGJvb2wKPiAgaW50ZWxfZHBfZ2V0X2xpbmtfc3RhdHVzKHN0cnVj
dCBpbnRlbF9kcCAqaW50ZWxfZHAsIHU4ICpsaW5rX3N0YXR1cyk7Cj4gLXUxNiBpbnRlbF9kcF9k
c2NfZ2V0X291dHB1dF9icHAoaW50IGxpbmtfY2xvY2ssIHU4IGxhbmVfY291bnQsCj4gLQkJCQlp
bnQgbW9kZV9jbG9jaywgaW50IG1vZGVfaGRpc3BsYXkpOwo+IC11OCBpbnRlbF9kcF9kc2NfZ2V0
X3NsaWNlX2NvdW50KHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsIGludCBtb2RlX2Nsb2NrLAo+
IC0JCQkJaW50IG1vZGVfaGRpc3BsYXkpOwo+ICAKPiAgYm9vbCBpbnRlbF9kcF9yZWFkX2RwY2Qo
c3RydWN0IGludGVsX2RwICppbnRlbF9kcCk7Cj4gIGJvb2wgaW50ZWxfZHBfZ2V0X2NvbG9yaW1l
dHJ5X3N0YXR1cyhzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKTsKPiBAQCAtMTE5LDQgKzExNSw2
IEBAIHN0YXRpYyBpbmxpbmUgdW5zaWduZWQgaW50IGludGVsX2RwX3VudXNlZF9sYW5lX21hc2so
aW50IGxhbmVfY291bnQpCj4gIAlyZXR1cm4gfigoMSA8PCBsYW5lX2NvdW50KSAtIDEpICYgMHhm
Owo+ICB9Cj4gIAo+ICt1MzIgaW50ZWxfZHBfZmVjX3RvX21vZGVfY2xvY2sodTMyIGZlY19jbG9j
ayk7Cj4gKwo+ICAjZW5kaWYgLyogX19JTlRFTF9EUF9IX18gKi8KPiAtLSAKPiAyLjIwLjEKPiAK
PiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+IEludGVs
LWdmeCBtYWlsaW5nIGxpc3QKPiBJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngKCi0t
IApWaWxsZSBTeXJqw6Rsw6QKSW50ZWwKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vaW50ZWwtZ2Z4

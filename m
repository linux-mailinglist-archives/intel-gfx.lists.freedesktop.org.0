Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 56FF928495B
	for <lists+intel-gfx@lfdr.de>; Tue,  6 Oct 2020 11:29:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2D8CE6E418;
	Tue,  6 Oct 2020 09:29:10 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B90326E418
 for <intel-gfx@lists.freedesktop.org>; Tue,  6 Oct 2020 09:29:08 +0000 (UTC)
IronPort-SDR: nlQI6MPERVNeeq7NiDnHDFaw+GsIAl30uK/Ysa2y1ylK88ceZ7opyURO6AnwwjrfuR9IkTHxne
 BXxl7PJOnbcg==
X-IronPort-AV: E=McAfee;i="6000,8403,9765"; a="181870370"
X-IronPort-AV: E=Sophos;i="5.77,342,1596524400"; d="scan'208";a="181870370"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by fmsmga101.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 06 Oct 2020 02:29:03 -0700
IronPort-SDR: qX5G2wPsvZq9XP/+RibTSlKF5+q/iIy/3CbB2ROcj73X/XWHvva4vpOELluP76KDhhGa5/2USH
 ECr2ld+AJiNw==
X-IronPort-AV: E=Sophos;i="5.77,342,1596524400"; d="scan'208";a="527264989"
Received: from kchandar-mobl.ger.corp.intel.com (HELO localhost)
 ([10.252.50.35])
 by orsmga005-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 06 Oct 2020 02:29:00 -0700
From: Jani Nikula <jani.nikula@linux.intel.com>
To: Ville Syrjala <ville.syrjala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
In-Reply-To: <20201001151640.14590-3-ville.syrjala@linux.intel.com>
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
References: <20201001151640.14590-1-ville.syrjala@linux.intel.com>
 <20201001151640.14590-3-ville.syrjala@linux.intel.com>
Date: Tue, 06 Oct 2020 12:29:22 +0300
Message-ID: <87o8lfk8i5.fsf@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH v2 3/6] drm/i915: Replace the VLV/CHV eDP
 reboot notifier with the .shutdown() hook
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCAwMSBPY3QgMjAyMCwgVmlsbGUgU3lyamFsYSA8dmlsbGUuc3lyamFsYUBsaW51eC5p
bnRlbC5jb20+IHdyb3RlOgo+IEZyb206IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBs
aW51eC5pbnRlbC5jb20+Cj4KPiBDdXJyZW50bHkgVkxWL0NIViB1c2UgYSByZWJvb3Qgbm90aWZp
ZXIgdG8gbWFrZSBzdXJlIHRoZSBwYW5lbAo+IHBvd2VyIGN5Y2xlIGRlbGF5IGlzbid0IHZpb2xh
dGVkIGFjcm9zcyBhIHN5c3RlbSByZWJvb3QuIFJlcGxhY2UKPiB0aGF0IHdpdGggdGhlIG5ldyBl
bmNvZGVyIC5zaHV0ZG93bigpIGhvb2suCj4KPiBBbmQgbGV0J3MgYWxzbyBzdG9wIG92ZXJyaWRp
bmcgdGhlIHBvd2VyIGN5Y2xlIGRlbGF5IHdpdGggdGhlCj4gbWF4IHZhbHVlLiBObyBpZGVhIHdo
eSB0aGUgY3VycmVudCBjb2RlIGRvZXMgdGhhdC4gVGhlIGFscmVhZHkKPiBwcm9ncmFtbWVkIGRl
bGF5IHNob3VsZCBiZSBjb3JyZWN0LgoKSSBraW5kIG9mIGhhdmUgYSBsaXR0bGUgdW5lYXN5IGZl
ZWxpbmcgYWJvdXQgY29uZmxhdGluZyB0aGVzZSB0d28KY2hhbmdlcyB0b2dldGhlci4gSSB0aGlu
ayBib3RoIGFyZSBvYmplY3RpdmVseSBnb29kIGNoYW5nZXMsIGp1c3Qgbm90Cm5lY2Vzc2FyaWx5
IGF0IG9uY2UuCgpJU1RSIHNldHRpbmcgdGhlIG1heCBkZWxheSB3YXMsIHBlcmhhcHMsIHNvbWVo
b3cgcmVsYXRlZCB0byB0aGUgaGFyZHdhcmUKbG9zaW5nIGl0cyBtYXJibGVzIGFmdGVyIHBvd2Vy
IGlzIGN1dCwgZWZmZWN0aXZlbHkgbm90IGVuc3VyaW5nIGFueSBvZgp0aGUgZGVsYXlzIGF0IHBv
d2VyLW9uLiBTbyBpdCdzIHBvc3NpYmxlIHdlIHNldCB0aGUgbWF4IGhlcmUgdG8gYWNjb3VudApm
b3IgdGhhdC4gTWF5YmUuIDspCgpBbnl3YXksCgpSZXZpZXdlZC1ieTogSmFuaSBOaWt1bGEgPGph
bmkubmlrdWxhQGludGVsLmNvbT4KCm9uIHRoZSB3aG9sZS4KCkknbSBsZWF2aW5nIGl0IHVwIHRv
IHlvdSwgYnV0IHBlcnNvbmFsbHkgSSdkIGxlYW4gdG93YXJkcyBzd2l0Y2hpbmcKZWRwX25vdGlm
eV9oYW5kbGVyKCkgdG8gdXNlIHdhaXRfcGFuZWxfcG93ZXJfY3ljbGUoaW50ZWxfZHApIGZpcnN0
IGluIGEKc2VwYXJhdGUgcGF0Y2gsIHRvIGhlbHAgd2l0aCBwb3RlbnRpYWwgYmlzZWN0IHJlc3Vs
dHMsIGFuZCB0aGVuIGRvaW5nCnRoZSByZXN0LgoKPgo+IFNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5
cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+Cj4gLS0tCj4gIC4uLi9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCAgICB8ICAyIC0KPiAgZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jICAgICAgIHwgNTggKysrKystLS0tLS0tLS0t
LS0tLQo+ICAyIGZpbGVzIGNoYW5nZWQsIDE0IGluc2VydGlvbnMoKyksIDQ2IGRlbGV0aW9ucygt
KQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheV90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5
X3R5cGVzLmgKPiBpbmRleCA2ZjNlM2Q3NTYzODMuLjliOWVkMWEyZjQxMiAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCj4g
QEAgLTEzMTksOCArMTMxOSw2IEBAIHN0cnVjdCBpbnRlbF9kcCB7Cj4gIAl1bnNpZ25lZCBsb25n
IGxhc3RfYmFja2xpZ2h0X29mZjsKPiAgCWt0aW1lX3QgcGFuZWxfcG93ZXJfb2ZmX3RpbWU7Cj4g
IAo+IC0Jc3RydWN0IG5vdGlmaWVyX2Jsb2NrIGVkcF9ub3RpZmllcjsKPiAtCj4gIAkvKgo+ICAJ
ICogUGlwZSB3aG9zZSBwb3dlciBzZXF1ZW5jZXIgaXMgY3VycmVudGx5IGxvY2tlZCBpbnRvCj4g
IAkgKiB0aGlzIHBvcnQuIE9ubHkgcmVsZXZhbnQgb24gVkxWL0NIVi4KPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCj4gaW5kZXggNzBlMGI4NTQ0MmY5Li5lMGYyZTkyMzY3
ODUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCj4gQEAgLTI4
LDcgKzI4LDYgQEAKPiAgI2luY2x1ZGUgPGxpbnV4L2V4cG9ydC5oPgo+ICAjaW5jbHVkZSA8bGlu
dXgvaTJjLmg+Cj4gICNpbmNsdWRlIDxsaW51eC9ub3RpZmllci5oPgo+IC0jaW5jbHVkZSA8bGlu
dXgvcmVib290Lmg+Cj4gICNpbmNsdWRlIDxsaW51eC9zbGFiLmg+Cj4gICNpbmNsdWRlIDxsaW51
eC90eXBlcy5oPgo+ICAKPiBAQCAtMTE5MSw0MSArMTE5MCw2IEBAIF9wcF9zdGF0X3JlZyhzdHJ1
Y3QgaW50ZWxfZHAgKmludGVsX2RwKQo+ICAJcmV0dXJuIHJlZ3MucHBfc3RhdDsKPiAgfQo+ICAK
PiAtLyogUmVib290IG5vdGlmaWVyIGhhbmRsZXIgdG8gc2h1dGRvd24gcGFuZWwgcG93ZXIgdG8g
Z3VhcmFudGVlIFQxMiB0aW1pbmcKPiAtICAgVGhpcyBmdW5jdGlvbiBvbmx5IGFwcGxpY2FibGUg
d2hlbiBwYW5lbCBQTSBzdGF0ZSBpcyBub3QgdG8gYmUgdHJhY2tlZCAqLwo+IC1zdGF0aWMgaW50
IGVkcF9ub3RpZnlfaGFuZGxlcihzdHJ1Y3Qgbm90aWZpZXJfYmxvY2sgKnRoaXMsIHVuc2lnbmVk
IGxvbmcgY29kZSwKPiAtCQkJICAgICAgdm9pZCAqdW51c2VkKQo+IC17Cj4gLQlzdHJ1Y3QgaW50
ZWxfZHAgKmludGVsX2RwID0gY29udGFpbmVyX29mKHRoaXMsIHR5cGVvZigqIGludGVsX2RwKSwK
PiAtCQkJCQkJIGVkcF9ub3RpZmllcik7Cj4gLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYgPSBkcF90b19pOTE1KGludGVsX2RwKTsKPiAtCWludGVsX3dha2VyZWZfdCB3YWtlcmVm
Owo+IC0KPiAtCWlmICghaW50ZWxfZHBfaXNfZWRwKGludGVsX2RwKSB8fCBjb2RlICE9IFNZU19S
RVNUQVJUKQo+IC0JCXJldHVybiAwOwo+IC0KPiAtCXdpdGhfcHBzX2xvY2soaW50ZWxfZHAsIHdh
a2VyZWYpIHsKPiAtCQlpZiAoSVNfVkFMTEVZVklFVyhkZXZfcHJpdikgfHwgSVNfQ0hFUlJZVklF
VyhkZXZfcHJpdikpIHsKPiAtCQkJZW51bSBwaXBlIHBpcGUgPSB2bHZfcG93ZXJfc2VxdWVuY2Vy
X3BpcGUoaW50ZWxfZHApOwo+IC0JCQlpOTE1X3JlZ190IHBwX2N0cmxfcmVnLCBwcF9kaXZfcmVn
Owo+IC0JCQl1MzIgcHBfZGl2Owo+IC0KPiAtCQkJcHBfY3RybF9yZWcgPSBQUF9DT05UUk9MKHBp
cGUpOwo+IC0JCQlwcF9kaXZfcmVnICA9IFBQX0RJVklTT1IocGlwZSk7Cj4gLQkJCXBwX2RpdiA9
IGludGVsX2RlX3JlYWQoZGV2X3ByaXYsIHBwX2Rpdl9yZWcpOwo+IC0JCQlwcF9kaXYgJj0gUFBf
UkVGRVJFTkNFX0RJVklERVJfTUFTSzsKPiAtCj4gLQkJCS8qIDB4MUYgd3JpdGUgdG8gUFBfRElW
X1JFRyBzZXRzIG1heCBjeWNsZSBkZWxheSAqLwo+IC0JCQlpbnRlbF9kZV93cml0ZShkZXZfcHJp
diwgcHBfZGl2X3JlZywgcHBfZGl2IHwgMHgxRik7Cj4gLQkJCWludGVsX2RlX3dyaXRlKGRldl9w
cml2LCBwcF9jdHJsX3JlZywKPiAtCQkJCSAgICAgICBQQU5FTF9VTkxPQ0tfUkVHUyk7Cj4gLQkJ
CW1zbGVlcChpbnRlbF9kcC0+cGFuZWxfcG93ZXJfY3ljbGVfZGVsYXkpOwo+IC0JCX0KPiAtCX0K
PiAtCj4gLQlyZXR1cm4gMDsKPiAtfQo+IC0KPiAgc3RhdGljIGJvb2wgZWRwX2hhdmVfcGFuZWxf
cG93ZXIoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCkKPiAgewo+ICAJc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2ID0gZHBfdG9faTkxNShpbnRlbF9kcCk7Cj4gQEAgLTY2OTAsMTEg
KzY2NTQsNiBAQCB2b2lkIGludGVsX2RwX2VuY29kZXJfZmx1c2hfd29yayhzdHJ1Y3QgZHJtX2Vu
Y29kZXIgKmVuY29kZXIpCj4gIAkJICovCj4gIAkJd2l0aF9wcHNfbG9jayhpbnRlbF9kcCwgd2Fr
ZXJlZikKPiAgCQkJZWRwX3BhbmVsX3ZkZF9vZmZfc3luYyhpbnRlbF9kcCk7Cj4gLQo+IC0JCWlm
IChpbnRlbF9kcC0+ZWRwX25vdGlmaWVyLm5vdGlmaWVyX2NhbGwpIHsKPiAtCQkJdW5yZWdpc3Rl
cl9yZWJvb3Rfbm90aWZpZXIoJmludGVsX2RwLT5lZHBfbm90aWZpZXIpOwo+IC0JCQlpbnRlbF9k
cC0+ZWRwX25vdGlmaWVyLm5vdGlmaWVyX2NhbGwgPSBOVUxMOwo+IC0JCX0KPiAgCX0KPiAgCj4g
IAlpbnRlbF9kcF9hdXhfZmluaShpbnRlbF9kcCk7Cj4gQEAgLTY3MjUsNiArNjY4NCwxOCBAQCB2
b2lkIGludGVsX2RwX2VuY29kZXJfc3VzcGVuZChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqaW50ZWxf
ZW5jb2RlcikKPiAgCQllZHBfcGFuZWxfdmRkX29mZl9zeW5jKGludGVsX2RwKTsKPiAgfQo+ICAK
PiArc3RhdGljIHZvaWQgaW50ZWxfZHBfZW5jb2Rlcl9zaHV0ZG93bihzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqaW50ZWxfZW5jb2RlcikKPiArewo+ICsJc3RydWN0IGludGVsX2RwICppbnRlbF9kcCA9
IGVuY190b19pbnRlbF9kcChpbnRlbF9lbmNvZGVyKTsKPiArCWludGVsX3dha2VyZWZfdCB3YWtl
cmVmOwo+ICsKPiArCWlmICghaW50ZWxfZHBfaXNfZWRwKGludGVsX2RwKSkKPiArCQlyZXR1cm47
Cj4gKwo+ICsJd2l0aF9wcHNfbG9jayhpbnRlbF9kcCwgd2FrZXJlZikKPiArCQl3YWl0X3BhbmVs
X3Bvd2VyX2N5Y2xlKGludGVsX2RwKTsKPiArfQo+ICsKPiAgc3RhdGljIHZvaWQgaW50ZWxfZWRw
X3BhbmVsX3ZkZF9zYW5pdGl6ZShzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKQo+ICB7Cj4gIAlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSBkcF90b19pOTE1KGludGVsX2RwKTsK
PiBAQCAtNzgzOCw5ICs3ODA5LDYgQEAgc3RhdGljIGJvb2wgaW50ZWxfZWRwX2luaXRfY29ubmVj
dG9yKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsCj4gIAltdXRleF91bmxvY2soJmRldi0+bW9k
ZV9jb25maWcubXV0ZXgpOwo+ICAKPiAgCWlmIChJU19WQUxMRVlWSUVXKGRldl9wcml2KSB8fCBJ
U19DSEVSUllWSUVXKGRldl9wcml2KSkgewo+IC0JCWludGVsX2RwLT5lZHBfbm90aWZpZXIubm90
aWZpZXJfY2FsbCA9IGVkcF9ub3RpZnlfaGFuZGxlcjsKPiAtCQlyZWdpc3Rlcl9yZWJvb3Rfbm90
aWZpZXIoJmludGVsX2RwLT5lZHBfbm90aWZpZXIpOwo+IC0KPiAgCQkvKgo+ICAJCSAqIEZpZ3Vy
ZSBvdXQgdGhlIGN1cnJlbnQgcGlwZSBmb3IgdGhlIGluaXRpYWwgYmFja2xpZ2h0IHNldHVwLgo+
ICAJCSAqIElmIHRoZSBjdXJyZW50IHBpcGUgaXNuJ3QgdmFsaWQsIHRyeSB0aGUgUFBTIHBpcGUs
IGFuZCBpZiB0aGF0Cj4gQEAgLTgwNjEsNiArODAyOSw4IEBAIGJvb2wgaW50ZWxfZHBfaW5pdChz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gIAlpbnRlbF9lbmNvZGVyLT5nZXRf
Y29uZmlnID0gaW50ZWxfZHBfZ2V0X2NvbmZpZzsKPiAgCWludGVsX2VuY29kZXItPnVwZGF0ZV9w
aXBlID0gaW50ZWxfcGFuZWxfdXBkYXRlX2JhY2tsaWdodDsKPiAgCWludGVsX2VuY29kZXItPnN1
c3BlbmQgPSBpbnRlbF9kcF9lbmNvZGVyX3N1c3BlbmQ7Cj4gKwlpZiAoSVNfVkFMTEVZVklFVyhk
ZXZfcHJpdikgfHwgSVNfQ0hFUlJZVklFVyhkZXZfcHJpdikpCj4gKwkJaW50ZWxfZW5jb2Rlci0+
c2h1dGRvd24gPSBpbnRlbF9kcF9lbmNvZGVyX3NodXRkb3duOwo+ICAJaWYgKElTX0NIRVJSWVZJ
RVcoZGV2X3ByaXYpKSB7Cj4gIAkJaW50ZWxfZW5jb2Rlci0+cHJlX3BsbF9lbmFibGUgPSBjaHZf
ZHBfcHJlX3BsbF9lbmFibGU7Cj4gIAkJaW50ZWxfZW5jb2Rlci0+cHJlX2VuYWJsZSA9IGNodl9w
cmVfZW5hYmxlX2RwOwoKLS0gCkphbmkgTmlrdWxhLCBJbnRlbCBPcGVuIFNvdXJjZSBHcmFwaGlj
cyBDZW50ZXIKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
SW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

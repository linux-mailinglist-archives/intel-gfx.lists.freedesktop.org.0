Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6A5EB7427C
	for <lists+intel-gfx@lfdr.de>; Thu, 25 Jul 2019 02:18:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8ABA66E2B4;
	Thu, 25 Jul 2019 00:18:43 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 003016E2B4
 for <intel-gfx@lists.freedesktop.org>; Thu, 25 Jul 2019 00:18:39 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 24 Jul 2019 17:18:39 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,304,1559545200"; d="scan'208";a="177816913"
Received: from dceraolo-linux.fm.intel.com ([10.1.27.145])
 by FMSMGA003.fm.intel.com with ESMTP; 24 Jul 2019 17:18:39 -0700
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 24 Jul 2019 17:18:08 -0700
Message-Id: <20190725001813.4740-4-daniele.ceraolospurio@intel.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190725001813.4740-1-daniele.ceraolospurio@intel.com>
References: <20190725001813.4740-1-daniele.ceraolospurio@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 3/8] drm/i915/uc: Unify uC FW selection
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SW5zdGVhZCBvZiBoYXZpbmcgMiBpZGVudGljYWwgZnVuY3Rpb25zIGZvciBHdUMgYW5kIEh1QyBm
aXJtd2FyZQpzZWxlY3Rpb24sIHdlIGNhbiB1bmlmeSB0aGUgc2VsZWN0aW9uIGxvZ2ljIGFuZCBq
dXN0IHVzZSBkaWZmZXJlbnQgbGlzdHMKYmFzZWQgb24gRlcgdHlwZS4KCk5vdGUgdGhhdCB0aGUg
cmV2aWQgaXMgbm90IHJlbGV2YW50IGZvciBjdXJyZW50IGJsb2JzLCBidXQgdGhlIHVwY29taW5n
CkNNTCB3aWxsIGJlIGlkZW50aWZpZWQgYXMgQ0ZMIHJldiA1LCBzbyBieSBjb25zaWRlcmluZyB0
aGUgcmV2aWQgd2UncmUKcmVhZHkgZm9yIHRoYXQuCgp2MjogcmV3b3JrIGJsb2IgbGlzdCBkZWZz
IChNaWNoYWwpLCBhZGQgb3JkZXIgY2hlY2sgKENocmlzKSwgZnVzZSBHdUMKICAgIGFuZCBIdUMg
bGlzdHMgaW50byBvbmUuCgp2MzogcmVtb3ZlIGRpZmZlcmVuY2UgYmV0d2VlbiBubyB1QyBIVyBh
bmQgbm8gdUMgRlcsIHNpbXBsaWZ5IHJlbGF0ZWQKICAgIHNlbGVjdGlvbiBjb2RlLCBjaGVjayB0
aGUgd2hvbGUgZncgbGlzdCAoTWljaGFsKQoKU2lnbmVkLW9mZi1ieTogRGFuaWVsZSBDZXJhb2xv
IFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNvbT4KQ2M6IE1pY2hhbCBXYWpk
ZWN6a28gPG1pY2hhbC53YWpkZWN6a29AaW50ZWwuY29tPgpDYzogQW51c2hhIFNyaXZhdHNhIDxh
bnVzaGEuc3JpdmF0c2FAaW50ZWwuY29tPgpDYzogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13
aWxzb24uY28udWs+ClJldmlld2VkLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNv
bi5jby51az4gI3YyCi0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2Z3
LmMgfCAgODkgKy0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9o
dWNfZncuYyB8ICA5MSArLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9p
bnRlbF91Y19mdy5jICB8IDE1NiArKysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5oICB8ICAyNCArLS0tCiA0IGZpbGVzIGNoYW5nZWQs
IDE2NCBpbnNlcnRpb25zKCspLCAxOTYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2Z3LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC91Yy9pbnRlbF9ndWNfZncuYwppbmRleCAxN2NlNzgyNDBjZjguLjk5ZjQ0ZDhhZTAyNiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2Z3LmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2Z3LmMKQEAgLTMxLDkwICsz
MSw2IEBACiAjaW5jbHVkZSAiaW50ZWxfZ3VjX2Z3LmgiCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIK
IAotI2RlZmluZSBfX01BS0VfR1VDX0ZXX1BBVEgoS0VZKSBcCi0JImk5MTUvIiBcCi0JX19zdHJp
bmdpZnkoS0VZIyNfR1VDX0ZXX1BSRUZJWCkgIl9ndWNfIiBcCi0JX19zdHJpbmdpZnkoS0VZIyNf
R1VDX0ZXX01BSk9SKSAiLiIgXAotCV9fc3RyaW5naWZ5KEtFWSMjX0dVQ19GV19NSU5PUikgIi4i
IFwKLQlfX3N0cmluZ2lmeShLRVkjI19HVUNfRldfUEFUQ0gpICIuYmluIgotCi0jZGVmaW5lIFNL
TF9HVUNfRldfUFJFRklYIHNrbAotI2RlZmluZSBTS0xfR1VDX0ZXX01BSk9SIDMzCi0jZGVmaW5l
IFNLTF9HVUNfRldfTUlOT1IgMAotI2RlZmluZSBTS0xfR1VDX0ZXX1BBVENIIDAKLSNkZWZpbmUg
U0tMX0dVQ19GSVJNV0FSRV9QQVRIIF9fTUFLRV9HVUNfRldfUEFUSChTS0wpCi1NT0RVTEVfRklS
TVdBUkUoU0tMX0dVQ19GSVJNV0FSRV9QQVRIKTsKLQotI2RlZmluZSBCWFRfR1VDX0ZXX1BSRUZJ
WCBieHQKLSNkZWZpbmUgQlhUX0dVQ19GV19NQUpPUiAzMwotI2RlZmluZSBCWFRfR1VDX0ZXX01J
Tk9SIDAKLSNkZWZpbmUgQlhUX0dVQ19GV19QQVRDSCAwCi0jZGVmaW5lIEJYVF9HVUNfRklSTVdB
UkVfUEFUSCBfX01BS0VfR1VDX0ZXX1BBVEgoQlhUKQotTU9EVUxFX0ZJUk1XQVJFKEJYVF9HVUNf
RklSTVdBUkVfUEFUSCk7Ci0KLSNkZWZpbmUgS0JMX0dVQ19GV19QUkVGSVgga2JsCi0jZGVmaW5l
IEtCTF9HVUNfRldfTUFKT1IgMzMKLSNkZWZpbmUgS0JMX0dVQ19GV19NSU5PUiAwCi0jZGVmaW5l
IEtCTF9HVUNfRldfUEFUQ0ggMAotI2RlZmluZSBLQkxfR1VDX0ZJUk1XQVJFX1BBVEggX19NQUtF
X0dVQ19GV19QQVRIKEtCTCkKLU1PRFVMRV9GSVJNV0FSRShLQkxfR1VDX0ZJUk1XQVJFX1BBVEgp
OwotCi0jZGVmaW5lIEdMS19HVUNfRldfUFJFRklYIGdsawotI2RlZmluZSBHTEtfR1VDX0ZXX01B
Sk9SIDMzCi0jZGVmaW5lIEdMS19HVUNfRldfTUlOT1IgMAotI2RlZmluZSBHTEtfR1VDX0ZXX1BB
VENIIDAKLSNkZWZpbmUgR0xLX0dVQ19GSVJNV0FSRV9QQVRIIF9fTUFLRV9HVUNfRldfUEFUSChH
TEspCi1NT0RVTEVfRklSTVdBUkUoR0xLX0dVQ19GSVJNV0FSRV9QQVRIKTsKLQotI2RlZmluZSBJ
Q0xfR1VDX0ZXX1BSRUZJWCBpY2wKLSNkZWZpbmUgSUNMX0dVQ19GV19NQUpPUiAzMwotI2RlZmlu
ZSBJQ0xfR1VDX0ZXX01JTk9SIDAKLSNkZWZpbmUgSUNMX0dVQ19GV19QQVRDSCAwCi0jZGVmaW5l
IElDTF9HVUNfRklSTVdBUkVfUEFUSCBfX01BS0VfR1VDX0ZXX1BBVEgoSUNMKQotTU9EVUxFX0ZJ
Uk1XQVJFKElDTF9HVUNfRklSTVdBUkVfUEFUSCk7Ci0KLXN0YXRpYyB2b2lkIGd1Y19md19zZWxl
Y3Qoc3RydWN0IGludGVsX3VjX2Z3ICpndWNfZncpCi17Ci0Jc3RydWN0IGludGVsX2d1YyAqZ3Vj
ID0gY29udGFpbmVyX29mKGd1Y19mdywgc3RydWN0IGludGVsX2d1YywgZncpOwotCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1ID0gZ3VjX3RvX2d0KGd1YyktPmk5MTU7Ci0KLQlHRU1fQlVH
X09OKGd1Y19mdy0+dHlwZSAhPSBJTlRFTF9VQ19GV19UWVBFX0dVQyk7Ci0KLQlndWNfZnctPmZl
dGNoX3N0YXR1cyA9IElOVEVMX1VDX0ZJUk1XQVJFX05PVF9TVVBQT1JURUQ7Ci0KLQlpZiAoIUhB
U19HVF9VQyhpOTE1KSkKLQkJcmV0dXJuOwotCi0JaWYgKGk5MTVfbW9kcGFyYW1zLmd1Y19maXJt
d2FyZV9wYXRoKSB7Ci0JCWd1Y19mdy0+cGF0aCA9IGk5MTVfbW9kcGFyYW1zLmd1Y19maXJtd2Fy
ZV9wYXRoOwotCQlndWNfZnctPm1ham9yX3Zlcl93YW50ZWQgPSAwOwotCQlndWNfZnctPm1pbm9y
X3Zlcl93YW50ZWQgPSAwOwotCX0gZWxzZSBpZiAoSVNfSUNFTEFLRShpOTE1KSkgewotCQlndWNf
ZnctPnBhdGggPSBJQ0xfR1VDX0ZJUk1XQVJFX1BBVEg7Ci0JCWd1Y19mdy0+bWFqb3JfdmVyX3dh
bnRlZCA9IElDTF9HVUNfRldfTUFKT1I7Ci0JCWd1Y19mdy0+bWlub3JfdmVyX3dhbnRlZCA9IElD
TF9HVUNfRldfTUlOT1I7Ci0JfSBlbHNlIGlmIChJU19HRU1JTklMQUtFKGk5MTUpKSB7Ci0JCWd1
Y19mdy0+cGF0aCA9IEdMS19HVUNfRklSTVdBUkVfUEFUSDsKLQkJZ3VjX2Z3LT5tYWpvcl92ZXJf
d2FudGVkID0gR0xLX0dVQ19GV19NQUpPUjsKLQkJZ3VjX2Z3LT5taW5vcl92ZXJfd2FudGVkID0g
R0xLX0dVQ19GV19NSU5PUjsKLQl9IGVsc2UgaWYgKElTX0tBQllMQUtFKGk5MTUpIHx8IElTX0NP
RkZFRUxBS0UoaTkxNSkpIHsKLQkJZ3VjX2Z3LT5wYXRoID0gS0JMX0dVQ19GSVJNV0FSRV9QQVRI
OwotCQlndWNfZnctPm1ham9yX3Zlcl93YW50ZWQgPSBLQkxfR1VDX0ZXX01BSk9SOwotCQlndWNf
ZnctPm1pbm9yX3Zlcl93YW50ZWQgPSBLQkxfR1VDX0ZXX01JTk9SOwotCX0gZWxzZSBpZiAoSVNf
QlJPWFRPTihpOTE1KSkgewotCQlndWNfZnctPnBhdGggPSBCWFRfR1VDX0ZJUk1XQVJFX1BBVEg7
Ci0JCWd1Y19mdy0+bWFqb3JfdmVyX3dhbnRlZCA9IEJYVF9HVUNfRldfTUFKT1I7Ci0JCWd1Y19m
dy0+bWlub3JfdmVyX3dhbnRlZCA9IEJYVF9HVUNfRldfTUlOT1I7Ci0JfSBlbHNlIGlmIChJU19T
S1lMQUtFKGk5MTUpKSB7Ci0JCWd1Y19mdy0+cGF0aCA9IFNLTF9HVUNfRklSTVdBUkVfUEFUSDsK
LQkJZ3VjX2Z3LT5tYWpvcl92ZXJfd2FudGVkID0gU0tMX0dVQ19GV19NQUpPUjsKLQkJZ3VjX2Z3
LT5taW5vcl92ZXJfd2FudGVkID0gU0tMX0dVQ19GV19NSU5PUjsKLQl9Ci0KLQlpZiAoZ3VjX2Z3
LT5wYXRoKQotCQlndWNfZnctPmZldGNoX3N0YXR1cyA9IElOVEVMX1VDX0ZJUk1XQVJFX05PVF9T
VEFSVEVEOwotfQotCiAvKioKICAqIGludGVsX2d1Y19md19pbml0X2Vhcmx5KCkgLSBpbml0aWFs
aXplcyBHdUMgZmlybXdhcmUgc3RydWN0CiAgKiBAZ3VjOiBpbnRlbF9ndWMgc3RydWN0CkBAIC0x
MjMsMTAgKzM5LDcgQEAgc3RhdGljIHZvaWQgZ3VjX2Z3X3NlbGVjdChzdHJ1Y3QgaW50ZWxfdWNf
ZncgKmd1Y19mdykKICAqLwogdm9pZCBpbnRlbF9ndWNfZndfaW5pdF9lYXJseShzdHJ1Y3QgaW50
ZWxfZ3VjICpndWMpCiB7Ci0Jc3RydWN0IGludGVsX3VjX2Z3ICpndWNfZncgPSAmZ3VjLT5mdzsK
LQotCWludGVsX3VjX2Z3X2luaXRfZWFybHkoZ3VjX2Z3LCBJTlRFTF9VQ19GV19UWVBFX0dVQyk7
Ci0JZ3VjX2Z3X3NlbGVjdChndWNfZncpOworCWludGVsX3VjX2Z3X2luaXRfZWFybHkoJmd1Yy0+
ZncsIElOVEVMX1VDX0ZXX1RZUEVfR1VDLCBndWNfdG9fZ3QoZ3VjKS0+aTkxNSk7CiB9CiAKIHN0
YXRpYyB2b2lkIGd1Y19wcmVwYXJlX3hmZXIoc3RydWN0IGludGVsX2d1YyAqZ3VjKQpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfaHVjX2Z3LmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9odWNfZncuYwppbmRleCBjM2E3YmQ1N2ZiNTUuLmJh
MmUxYTgzNTgzMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxf
aHVjX2Z3LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfaHVjX2Z3LmMK
QEAgLTIzLDkyICsyMyw2IEBACiAgKiBOb3RlIHRoYXQgSHVDIGZpcm13YXJlIGxvYWRpbmcgbXVz
dCBiZSBkb25lIGJlZm9yZSBHdUMgbG9hZGluZy4KICAqLwogCi0jZGVmaW5lIEJYVF9IVUNfRldf
TUFKT1IgMDEKLSNkZWZpbmUgQlhUX0hVQ19GV19NSU5PUiA4Ci0jZGVmaW5lIEJYVF9CTERfTlVN
IDI4OTMKLQotI2RlZmluZSBTS0xfSFVDX0ZXX01BSk9SIDAxCi0jZGVmaW5lIFNLTF9IVUNfRldf
TUlOT1IgMDcKLSNkZWZpbmUgU0tMX0JMRF9OVU0gMTM5OAotCi0jZGVmaW5lIEtCTF9IVUNfRldf
TUFKT1IgMDIKLSNkZWZpbmUgS0JMX0hVQ19GV19NSU5PUiAwMAotI2RlZmluZSBLQkxfQkxEX05V
TSAxODEwCi0KLSNkZWZpbmUgR0xLX0hVQ19GV19NQUpPUiAwMwotI2RlZmluZSBHTEtfSFVDX0ZX
X01JTk9SIDAxCi0jZGVmaW5lIEdMS19CTERfTlVNIDI4OTMKLQotI2RlZmluZSBJQ0xfSFVDX0ZX
X01BSk9SIDgKLSNkZWZpbmUgSUNMX0hVQ19GV19NSU5PUiA0Ci0jZGVmaW5lIElDTF9CTERfTlVN
IDMyMzgKLQotI2RlZmluZSBIVUNfRldfUEFUSChwbGF0Zm9ybSwgbWFqb3IsIG1pbm9yLCBibGRf
bnVtKSBcCi0JImk5MTUvIiBfX3N0cmluZ2lmeShwbGF0Zm9ybSkgIl9odWNfdmVyIiBfX3N0cmlu
Z2lmeShtYWpvcikgIl8iIFwKLQlfX3N0cmluZ2lmeShtaW5vcikgIl8iIF9fc3RyaW5naWZ5KGJs
ZF9udW0pICIuYmluIgotCi0jZGVmaW5lIEk5MTVfU0tMX0hVQ19VQ09ERSBIVUNfRldfUEFUSChz
a2wsIFNLTF9IVUNfRldfTUFKT1IsIFwKLQlTS0xfSFVDX0ZXX01JTk9SLCBTS0xfQkxEX05VTSkK
LU1PRFVMRV9GSVJNV0FSRShJOTE1X1NLTF9IVUNfVUNPREUpOwotCi0jZGVmaW5lIEk5MTVfQlhU
X0hVQ19VQ09ERSBIVUNfRldfUEFUSChieHQsIEJYVF9IVUNfRldfTUFKT1IsIFwKLQlCWFRfSFVD
X0ZXX01JTk9SLCBCWFRfQkxEX05VTSkKLU1PRFVMRV9GSVJNV0FSRShJOTE1X0JYVF9IVUNfVUNP
REUpOwotCi0jZGVmaW5lIEk5MTVfS0JMX0hVQ19VQ09ERSBIVUNfRldfUEFUSChrYmwsIEtCTF9I
VUNfRldfTUFKT1IsIFwKLQlLQkxfSFVDX0ZXX01JTk9SLCBLQkxfQkxEX05VTSkKLU1PRFVMRV9G
SVJNV0FSRShJOTE1X0tCTF9IVUNfVUNPREUpOwotCi0jZGVmaW5lIEk5MTVfR0xLX0hVQ19VQ09E
RSBIVUNfRldfUEFUSChnbGssIEdMS19IVUNfRldfTUFKT1IsIFwKLQlHTEtfSFVDX0ZXX01JTk9S
LCBHTEtfQkxEX05VTSkKLU1PRFVMRV9GSVJNV0FSRShJOTE1X0dMS19IVUNfVUNPREUpOwotCi0j
ZGVmaW5lIEk5MTVfSUNMX0hVQ19VQ09ERSBIVUNfRldfUEFUSChpY2wsIElDTF9IVUNfRldfTUFK
T1IsIFwKLQlJQ0xfSFVDX0ZXX01JTk9SLCBJQ0xfQkxEX05VTSkKLU1PRFVMRV9GSVJNV0FSRShJ
OTE1X0lDTF9IVUNfVUNPREUpOwotCi1zdGF0aWMgdm9pZCBodWNfZndfc2VsZWN0KHN0cnVjdCBp
bnRlbF91Y19mdyAqaHVjX2Z3KQotewotCXN0cnVjdCBpbnRlbF9odWMgKmh1YyA9IGNvbnRhaW5l
cl9vZihodWNfZncsIHN0cnVjdCBpbnRlbF9odWMsIGZ3KTsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYgPSBodWNfdG9fZ3QoaHVjKS0+aTkxNTsKLQotCUdFTV9CVUdfT04oaHVj
X2Z3LT50eXBlICE9IElOVEVMX1VDX0ZXX1RZUEVfSFVDKTsKLQotCWh1Y19mdy0+ZmV0Y2hfc3Rh
dHVzID0gSU5URUxfVUNfRklSTVdBUkVfTk9UX1NVUFBPUlRFRDsKLQotCWlmICghSEFTX0dUX1VD
KGRldl9wcml2KSkKLQkJcmV0dXJuOwotCi0JaWYgKGk5MTVfbW9kcGFyYW1zLmh1Y19maXJtd2Fy
ZV9wYXRoKSB7Ci0JCWh1Y19mdy0+cGF0aCA9IGk5MTVfbW9kcGFyYW1zLmh1Y19maXJtd2FyZV9w
YXRoOwotCQlodWNfZnctPm1ham9yX3Zlcl93YW50ZWQgPSAwOwotCQlodWNfZnctPm1pbm9yX3Zl
cl93YW50ZWQgPSAwOwotCX0gZWxzZSBpZiAoSVNfU0tZTEFLRShkZXZfcHJpdikpIHsKLQkJaHVj
X2Z3LT5wYXRoID0gSTkxNV9TS0xfSFVDX1VDT0RFOwotCQlodWNfZnctPm1ham9yX3Zlcl93YW50
ZWQgPSBTS0xfSFVDX0ZXX01BSk9SOwotCQlodWNfZnctPm1pbm9yX3Zlcl93YW50ZWQgPSBTS0xf
SFVDX0ZXX01JTk9SOwotCX0gZWxzZSBpZiAoSVNfQlJPWFRPTihkZXZfcHJpdikpIHsKLQkJaHVj
X2Z3LT5wYXRoID0gSTkxNV9CWFRfSFVDX1VDT0RFOwotCQlodWNfZnctPm1ham9yX3Zlcl93YW50
ZWQgPSBCWFRfSFVDX0ZXX01BSk9SOwotCQlodWNfZnctPm1pbm9yX3Zlcl93YW50ZWQgPSBCWFRf
SFVDX0ZXX01JTk9SOwotCX0gZWxzZSBpZiAoSVNfS0FCWUxBS0UoZGV2X3ByaXYpIHx8IElTX0NP
RkZFRUxBS0UoZGV2X3ByaXYpKSB7Ci0JCWh1Y19mdy0+cGF0aCA9IEk5MTVfS0JMX0hVQ19VQ09E
RTsKLQkJaHVjX2Z3LT5tYWpvcl92ZXJfd2FudGVkID0gS0JMX0hVQ19GV19NQUpPUjsKLQkJaHVj
X2Z3LT5taW5vcl92ZXJfd2FudGVkID0gS0JMX0hVQ19GV19NSU5PUjsKLQl9IGVsc2UgaWYgKElT
X0dFTUlOSUxBS0UoZGV2X3ByaXYpKSB7Ci0JCWh1Y19mdy0+cGF0aCA9IEk5MTVfR0xLX0hVQ19V
Q09ERTsKLQkJaHVjX2Z3LT5tYWpvcl92ZXJfd2FudGVkID0gR0xLX0hVQ19GV19NQUpPUjsKLQkJ
aHVjX2Z3LT5taW5vcl92ZXJfd2FudGVkID0gR0xLX0hVQ19GV19NSU5PUjsKLQl9IGVsc2UgaWYg
KElTX0lDRUxBS0UoZGV2X3ByaXYpKSB7Ci0JCWh1Y19mdy0+cGF0aCA9IEk5MTVfSUNMX0hVQ19V
Q09ERTsKLQkJaHVjX2Z3LT5tYWpvcl92ZXJfd2FudGVkID0gSUNMX0hVQ19GV19NQUpPUjsKLQkJ
aHVjX2Z3LT5taW5vcl92ZXJfd2FudGVkID0gSUNMX0hVQ19GV19NSU5PUjsKLQl9Ci0KLQlpZiAo
aHVjX2Z3LT5wYXRoKQotCQlodWNfZnctPmZldGNoX3N0YXR1cyA9IElOVEVMX1VDX0ZJUk1XQVJF
X05PVF9TVEFSVEVEOwotfQotCiAvKioKICAqIGludGVsX2h1Y19md19pbml0X2Vhcmx5KCkgLSBp
bml0aWFsaXplcyBIdUMgZmlybXdhcmUgc3RydWN0CiAgKiBAaHVjOiBpbnRlbF9odWMgc3RydWN0
CkBAIC0xMTcsMTAgKzMxLDcgQEAgc3RhdGljIHZvaWQgaHVjX2Z3X3NlbGVjdChzdHJ1Y3QgaW50
ZWxfdWNfZncgKmh1Y19mdykKICAqLwogdm9pZCBpbnRlbF9odWNfZndfaW5pdF9lYXJseShzdHJ1
Y3QgaW50ZWxfaHVjICpodWMpCiB7Ci0Jc3RydWN0IGludGVsX3VjX2Z3ICpodWNfZncgPSAmaHVj
LT5mdzsKLQotCWludGVsX3VjX2Z3X2luaXRfZWFybHkoaHVjX2Z3LCBJTlRFTF9VQ19GV19UWVBF
X0hVQyk7Ci0JaHVjX2Z3X3NlbGVjdChodWNfZncpOworCWludGVsX3VjX2Z3X2luaXRfZWFybHko
Jmh1Yy0+ZncsIElOVEVMX1VDX0ZXX1RZUEVfSFVDLCBodWNfdG9fZ3QoaHVjKS0+aTkxNSk7CiB9
CiAKIHN0YXRpYyB2b2lkIGh1Y194ZmVyX3JzYShzdHJ1Y3QgaW50ZWxfaHVjICpodWMpCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWNfZncuYwppbmRleCA0MzJiNjMyYjA0YzAuLjky
MDZkNDIyMTc4OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxf
dWNfZncuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5jCkBA
IC0yOSw2ICsyOSwxNjIgQEAKICNpbmNsdWRlICJpbnRlbF91Y19mdy5oIgogI2luY2x1ZGUgImk5
MTVfZHJ2LmgiCiAKKy8qCisgKiBMaXN0IG9mIHJlcXVpcmVkIEd1QyBhbmQgSHVDIGJpbmFyaWVz
IHBlci1wbGF0Zm9ybS4KKyAqIE11c3QgYmUgb3JkZXJlZCBiYXNlZCBvbiBwbGF0Zm9ybSArIHJl
dmlkLCBmcm9tIG5ld2VyIHRvIG9sZGVyLgorICovCisjZGVmaW5lIElOVEVMX1VDX0ZJUk1XQVJF
X0RFRlMoZndfZGVmLCBndWNfZGVmLCBodWNfZGVmKSBcCisJZndfZGVmKElDRUxBS0UsICAgIDAs
IGd1Y19kZWYoaWNsLCAzMywgMCwgMCksIGh1Y19kZWYoaWNsLCAgOCwgIDQsIDMyMzgpKSBcCisJ
ZndfZGVmKENPRkZFRUxBS0UsIDAsIGd1Y19kZWYoa2JsLCAzMywgMCwgMCksIGh1Y19kZWYoa2Js
LCAwMiwgMDAsIDE4MTApKSBcCisJZndfZGVmKEdFTUlOSUxBS0UsIDAsIGd1Y19kZWYoZ2xrLCAz
MywgMCwgMCksIGh1Y19kZWYoZ2xrLCAwMywgMDEsIDI4OTMpKSBcCisJZndfZGVmKEtBQllMQUtF
LCAgIDAsIGd1Y19kZWYoa2JsLCAzMywgMCwgMCksIGh1Y19kZWYoa2JsLCAwMiwgMDAsIDE4MTAp
KSBcCisJZndfZGVmKEJST1hUT04sICAgIDAsIGd1Y19kZWYoYnh0LCAzMywgMCwgMCksIGh1Y19k
ZWYoYnh0LCAwMSwgIDgsIDI4OTMpKSBcCisJZndfZGVmKFNLWUxBS0UsICAgIDAsIGd1Y19kZWYo
c2tsLCAzMywgMCwgMCksIGh1Y19kZWYoc2tsLCAwMSwgMDcsIDEzOTgpKQorCisjZGVmaW5lIF9f
TUFLRV9VQ19GV19QQVRIKHByZWZpeF8sIG5hbWVfLCBzZXBhcmF0b3JfLCBtYWpvcl8sIG1pbm9y
XywgcGF0Y2hfKSBcCisJImk5MTUvIiBcCisJX19zdHJpbmdpZnkocHJlZml4XykgbmFtZV8gXAor
CV9fc3RyaW5naWZ5KG1ham9yXykgc2VwYXJhdG9yXyBcCisJX19zdHJpbmdpZnkobWlub3JfKSBz
ZXBhcmF0b3JfIFwKKwlfX3N0cmluZ2lmeShwYXRjaF8pICIuYmluIgorCisjZGVmaW5lIE1BS0Vf
R1VDX0ZXX1BBVEgocHJlZml4XywgbWFqb3JfLCBtaW5vcl8sIHBhdGNoXykgXAorCV9fTUFLRV9V
Q19GV19QQVRIKHByZWZpeF8sICJfZ3VjXyIsICIuIiwgbWFqb3JfLCBtaW5vcl8sIHBhdGNoXykK
KworI2RlZmluZSBNQUtFX0hVQ19GV19QQVRIKHByZWZpeF8sIG1ham9yXywgbWlub3JfLCBibGRf
bnVtXykgXAorCV9fTUFLRV9VQ19GV19QQVRIKHByZWZpeF8sICJfaHVjX3ZlciIsICJfIiwgbWFq
b3JfLCBtaW5vcl8sIGJsZF9udW1fKQorCisvKiBBbGwgYmxvYnMgbmVlZCB0byBiZSBkZWNsYXJl
ZCB2aWEgTU9EVUxFX0ZJUk1XQVJFKCkgKi8KKyNkZWZpbmUgSU5URUxfVUNfTU9EVUxFX0ZXKHBs
YXRmb3JtXywgcmV2aWRfLCBndWNfLCBodWNfKSBcCisJTU9EVUxFX0ZJUk1XQVJFKGd1Y18pOyBc
CisJTU9EVUxFX0ZJUk1XQVJFKGh1Y18pOworCitJTlRFTF9VQ19GSVJNV0FSRV9ERUZTKElOVEVM
X1VDX01PRFVMRV9GVywgTUFLRV9HVUNfRldfUEFUSCwgTUFLRV9IVUNfRldfUEFUSCkKKworLyog
VGhlIGJlbG93IHN0cnVjdHMgYW5kIG1hY3JvcyBhcmUgdXNlZCB0byBpdGVyYXRlIGFjcm9zcyB0
aGUgbGlzdCBvZiBibG9icyAqLworc3RydWN0IF9fcGFja2VkIHVjX2Z3X2Jsb2IgeworCXU4IG1h
am9yOworCXU4IG1pbm9yOworCWNvbnN0IGNoYXIgKnBhdGg7Cit9OworCisjZGVmaW5lIFVDX0ZX
X0JMT0IobWFqb3JfLCBtaW5vcl8sIHBhdGhfKSBcCisJeyAubWFqb3IgPSBtYWpvcl8sIC5taW5v
ciA9IG1pbm9yXywgLnBhdGggPSBwYXRoXyB9CisKKyNkZWZpbmUgR1VDX0ZXX0JMT0IocHJlZml4
XywgbWFqb3JfLCBtaW5vcl8sIHBhdGNoXykgXAorCVVDX0ZXX0JMT0IobWFqb3JfLCBtaW5vcl8s
IFwKKwkJICAgTUFLRV9HVUNfRldfUEFUSChwcmVmaXhfLCBtYWpvcl8sIG1pbm9yXywgcGF0Y2hf
KSkKKworI2RlZmluZSBIVUNfRldfQkxPQihwcmVmaXhfLCBtYWpvcl8sIG1pbm9yXywgYmxkX251
bV8pIFwKKwlVQ19GV19CTE9CKG1ham9yXywgbWlub3JfLCBcCisJCSAgIE1BS0VfSFVDX0ZXX1BB
VEgocHJlZml4XywgbWFqb3JfLCBtaW5vcl8sIGJsZF9udW1fKSkKKworc3RydWN0IF9fcGFja2Vk
IHVjX2Z3X3BsYXRmb3JtX3JlcXVpcmVtZW50IHsKKwllbnVtIGludGVsX3BsYXRmb3JtIHA7CisJ
dTggcmV2OyAvKiBmaXJzdCBwbGF0Zm9ybSByZXYgdXNpbmcgdGhpcyBGVyAqLworCWNvbnN0IHN0
cnVjdCB1Y19md19ibG9iIGJsb2JzW0lOVEVMX1VDX0ZXX05VTV9UWVBFU107Cit9OworCisjZGVm
aW5lIE1BS0VfRldfTElTVChwbGF0Zm9ybV8sIHJldmlkXywgZ3VjXywgaHVjXykgXAoreyBcCisJ
LnAgPSBJTlRFTF8jI3BsYXRmb3JtXywgXAorCS5yZXYgPSByZXZpZF8sIFwKKwkuYmxvYnNbSU5U
RUxfVUNfRldfVFlQRV9HVUNdID0gZ3VjXywgXAorCS5ibG9ic1tJTlRFTF9VQ19GV19UWVBFX0hV
Q10gPSBodWNfLCBcCit9LAorCitzdGF0aWMgdm9pZAorX191Y19md19hdXRvX3NlbGVjdChzdHJ1
Y3QgaW50ZWxfdWNfZncgKnVjX2Z3LCBlbnVtIGludGVsX3BsYXRmb3JtIHAsIHU4IHJldikKK3sK
KwlzdGF0aWMgY29uc3Qgc3RydWN0IHVjX2Z3X3BsYXRmb3JtX3JlcXVpcmVtZW50IGZ3X2Jsb2Jz
W10gPSB7CisJCUlOVEVMX1VDX0ZJUk1XQVJFX0RFRlMoTUFLRV9GV19MSVNULCBHVUNfRldfQkxP
QiwgSFVDX0ZXX0JMT0IpCisJfTsKKwlpbnQgaTsKKworCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9T
SVpFKGZ3X2Jsb2JzKSAmJiBwIDw9IGZ3X2Jsb2JzW2ldLnA7IGkrKykgeworCQlpZiAocCA9PSBm
d19ibG9ic1tpXS5wICYmIHJldiA+PSBmd19ibG9ic1tpXS5yZXYpIHsKKwkJCWNvbnN0IHN0cnVj
dCB1Y19md19ibG9iICpibG9iID0KKwkJCQkJJmZ3X2Jsb2JzW2ldLmJsb2JzW3VjX2Z3LT50eXBl
XTsKKwkJCXVjX2Z3LT5wYXRoID0gYmxvYi0+cGF0aDsKKwkJCXVjX2Z3LT5tYWpvcl92ZXJfd2Fu
dGVkID0gYmxvYi0+bWFqb3I7CisJCQl1Y19mdy0+bWlub3JfdmVyX3dhbnRlZCA9IGJsb2ItPm1p
bm9yOworCQkJYnJlYWs7CisJCX0KKwl9CisKKwkvKiBtYWtlIHN1cmUgdGhlIGxpc3QgaXMgb3Jk
ZXJlZCBhcyBleHBlY3RlZCAqLworCWlmIChJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9TRUxG
VEVTVCkpIHsKKwkJZm9yIChpID0gMTsgaSA8IEFSUkFZX1NJWkUoZndfYmxvYnMpOyBpKyspIHsK
KwkJCWlmIChmd19ibG9ic1tpXS5wIDwgZndfYmxvYnNbaSAtIDFdLnApCisJCQkJY29udGludWU7
CisKKwkJCWlmIChmd19ibG9ic1tpXS5wID09IGZ3X2Jsb2JzW2kgLSAxXS5wICYmCisJCQkgICAg
ZndfYmxvYnNbaV0ucmV2IDwgZndfYmxvYnNbaSAtIDFdLnJldikKKwkJCQljb250aW51ZTsKKwor
CQkJcHJfZXJyKCJpbnZhbGlkIEZXIGJsb2Igb3JkZXI6ICVzIHIldSBjb21lcyBiZWZvcmUgJXMg
ciV1XG4iLAorCQkJICAgICAgIGludGVsX3BsYXRmb3JtX25hbWUoZndfYmxvYnNbaSAtIDFdLnAp
LAorCQkJICAgICAgIGZ3X2Jsb2JzW2kgLSAxXS5yZXYsCisJCQkgICAgICAgaW50ZWxfcGxhdGZv
cm1fbmFtZShmd19ibG9ic1tpXS5wKSwKKwkJCSAgICAgICBmd19ibG9ic1tpXS5yZXYpOworCisJ
CQl1Y19mdy0+cGF0aCA9IE5VTEw7CisJCX0KKwl9Cit9CisKK3N0YXRpYyBib29sCitfX3VjX2Z3
X292ZXJyaWRlKHN0cnVjdCBpbnRlbF91Y19mdyAqdWNfZncpCit7CisJc3dpdGNoICh1Y19mdy0+
dHlwZSkgeworCWNhc2UgSU5URUxfVUNfRldfVFlQRV9HVUM6CisJCXVjX2Z3LT5wYXRoID0gaTkx
NV9tb2RwYXJhbXMuZ3VjX2Zpcm13YXJlX3BhdGg7CisJCWJyZWFrOworCWNhc2UgSU5URUxfVUNf
RldfVFlQRV9IVUM6CisJCXVjX2Z3LT5wYXRoID0gaTkxNV9tb2RwYXJhbXMuaHVjX2Zpcm13YXJl
X3BhdGg7CisJCWJyZWFrOworCX0KKworCXJldHVybiB1Y19mdy0+cGF0aDsKK30KKworLyoqCisg
KiBpbnRlbF91Y19md19pbml0X2Vhcmx5IC0gaW5pdGlhbGl6ZSB0aGUgdUMgb2JqZWN0IGFuZCBz
ZWxlY3QgdGhlIGZpcm13YXJlCisgKiBAaTkxNTogZGV2aWNlIHByaXZhdGUKKyAqIEB1Y19mdzog
dUMgZmlybXdhcmUKKyAqIEB0eXBlOiB0eXBlIG9mIHVDCisgKgorICogSW5pdGlhbGl6ZSB0aGUg
c3RhdGUgb2Ygb3VyIHVDIG9iamVjdCBhbmQgcmVsZXZhbnQgdHJhY2tpbmcgYW5kIHNlbGVjdCB0
aGUKKyAqIGZpcm13YXJlIHRvIGZldGNoIGFuZCBsb2FkLgorICovCit2b2lkIGludGVsX3VjX2Z3
X2luaXRfZWFybHkoc3RydWN0IGludGVsX3VjX2Z3ICp1Y19mdywKKwkJCSAgICBlbnVtIGludGVs
X3VjX2Z3X3R5cGUgdHlwZSwKKwkJCSAgICBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkK
K3sKKwkvKgorCSAqIHdlIHVzZSBGSVJNV0FSRV9VTklOSVRJQUxJWkVEIHRvIGRldGVjdCBjaGVj
a3MgYWdhaW5zdCBmZXRjaF9zdGF0dXMKKwkgKiBiZWZvcmUgd2UncmUgbG9va2VkIGF0IHRoZSBI
VyBjYXBzIHRvIHNlZSBpZiB3ZSBoYXZlIHVjIHN1cHBvcnQKKwkgKi8KKwlCVUlMRF9CVUdfT04o
SU5URUxfVUNfRklSTVdBUkVfVU5JTklUSUFMSVpFRCk7CisJR0VNX0JVR19PTih1Y19mdy0+ZmV0
Y2hfc3RhdHVzKTsKKwlHRU1fQlVHX09OKHVjX2Z3LT5sb2FkX3N0YXR1cyk7CisJR0VNX0JVR19P
Tih1Y19mdy0+cGF0aCk7CisKKwl1Y19mdy0+dHlwZSA9IHR5cGU7CisKKwlpZiAoSEFTX0dUX1VD
KGk5MTUpICYmIGxpa2VseSghX191Y19md19vdmVycmlkZSh1Y19mdykpKQorCQlfX3VjX2Z3X2F1
dG9fc2VsZWN0KHVjX2Z3LCBJTlRFTF9JTkZPKGk5MTUpLT5wbGF0Zm9ybSwKKwkJCQkgICAgSU5U
RUxfUkVWSUQoaTkxNSkpOworCisJaWYgKHVjX2Z3LT5wYXRoKSB7CisJCXVjX2Z3LT5mZXRjaF9z
dGF0dXMgPSBJTlRFTF9VQ19GSVJNV0FSRV9OT1RfU1RBUlRFRDsKKwkJdWNfZnctPmxvYWRfc3Rh
dHVzID0gSU5URUxfVUNfRklSTVdBUkVfTk9UX1NUQVJURUQ7CisJfSBlbHNlIHsKKwkJdWNfZnct
PmZldGNoX3N0YXR1cyA9IElOVEVMX1VDX0ZJUk1XQVJFX05PVF9TVVBQT1JURUQ7CisJCXVjX2Z3
LT5sb2FkX3N0YXR1cyA9IElOVEVMX1VDX0ZJUk1XQVJFX05PVF9TVVBQT1JURUQ7CisJfQorfQor
CiAvKioKICAqIGludGVsX3VjX2Z3X2ZldGNoIC0gZmV0Y2ggdUMgZmlybXdhcmUKICAqCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWNfZncuaAppbmRleCA1NWFjOWVlYWI0NDAuLmM5
M2UyNzE5MTdjOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxf
dWNfZncuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5oCkBA
IC00NCw5ICs0NCwxMCBAQCBlbnVtIGludGVsX3VjX2Z3X3N0YXR1cyB7CiB9OwogCiBlbnVtIGlu
dGVsX3VjX2Z3X3R5cGUgewotCUlOVEVMX1VDX0ZXX1RZUEVfR1VDLAorCUlOVEVMX1VDX0ZXX1RZ
UEVfR1VDID0gMCwKIAlJTlRFTF9VQ19GV19UWVBFX0hVQwogfTsKKyNkZWZpbmUgSU5URUxfVUNf
RldfTlVNX1RZUEVTIDIKIAogLyoKICAqIFRoaXMgc3RydWN0dXJlIGVuY2Fwc3VsYXRlcyBhbGwg
dGhlIGRhdGEgbmVlZGVkIGR1cmluZyB0aGUgcHJvY2VzcwpAQCAtMTA5LDIyICsxMTAsNiBAQCBz
dGF0aWMgaW5saW5lIGNvbnN0IGNoYXIgKmludGVsX3VjX2Z3X3R5cGVfcmVwcihlbnVtIGludGVs
X3VjX2Z3X3R5cGUgdHlwZSkKIAlyZXR1cm4gInVDIjsKIH0KIAotc3RhdGljIGlubGluZQotdm9p
ZCBpbnRlbF91Y19md19pbml0X2Vhcmx5KHN0cnVjdCBpbnRlbF91Y19mdyAqdWNfZncsCi0JCQkg
ICAgZW51bSBpbnRlbF91Y19md190eXBlIHR5cGUpCi17Ci0JLyoKLQkgKiB3ZSB1c2UgRklSTVdB
UkVfVU5JTklUSUFMSVpFRCB0byBkZXRlY3QgY2hlY2tzIGFnYWluc3QgZmV0Y2hfc3RhdHVzCi0J
ICogYmVmb3JlIHdlJ3JlIGxvb2tlZCBhdCB0aGUgSFcgY2FwcyB0byBzZWUgaWYgd2UgaGF2ZSB1
YyBzdXBwb3J0Ci0JICovCi0JQlVJTERfQlVHX09OKElOVEVMX1VDX0ZJUk1XQVJFX1VOSU5JVElB
TElaRUQpOwotCi0JdWNfZnctPnBhdGggPSBOVUxMOwotCXVjX2Z3LT5mZXRjaF9zdGF0dXMgPSBJ
TlRFTF9VQ19GSVJNV0FSRV9VTklOSVRJQUxJWkVEOwotCXVjX2Z3LT5sb2FkX3N0YXR1cyA9IElO
VEVMX1VDX0ZJUk1XQVJFX05PVF9TVEFSVEVEOwotCXVjX2Z3LT50eXBlID0gdHlwZTsKLX0KLQog
c3RhdGljIGlubGluZSBib29sIGludGVsX3VjX2Z3X2lzX2xvYWRlZChzdHJ1Y3QgaW50ZWxfdWNf
ZncgKnVjX2Z3KQogewogCXJldHVybiB1Y19mdy0+bG9hZF9zdGF0dXMgPT0gSU5URUxfVUNfRklS
TVdBUkVfU1VDQ0VTUzsKQEAgLTE1OSw3ICsxNDQsMTAgQEAgc3RhdGljIGlubGluZSB1MzIgaW50
ZWxfdWNfZndfZ2V0X3VwbG9hZF9zaXplKHN0cnVjdCBpbnRlbF91Y19mdyAqdWNfZncpCiAJcmV0
dXJuIHVjX2Z3LT5oZWFkZXJfc2l6ZSArIHVjX2Z3LT51Y29kZV9zaXplOwogfQogCi12b2lkIGlu
dGVsX3VjX2Z3X2ZldGNoKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKK3ZvaWQg
aW50ZWxfdWNfZndfaW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfdWNfZncgKnVjX2Z3LAorCQkJICAg
IGVudW0gaW50ZWxfdWNfZndfdHlwZSB0eXBlLAorCQkJICAgIHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1KTsKK3ZvaWQgaW50ZWxfdWNfZndfZmV0Y2goc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUsCiAJCSAgICAgICBzdHJ1Y3QgaW50ZWxfdWNfZncgKnVjX2Z3KTsKIHZvaWQgaW50
ZWxfdWNfZndfY2xlYW51cF9mZXRjaChzdHJ1Y3QgaW50ZWxfdWNfZncgKnVjX2Z3KTsKIGludCBp
bnRlbF91Y19md191cGxvYWQoc3RydWN0IGludGVsX3VjX2Z3ICp1Y19mdywKLS0gCjIuMjIuMAoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4
IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

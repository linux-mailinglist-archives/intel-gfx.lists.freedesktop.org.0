Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 87FE446551
	for <lists+intel-gfx@lfdr.de>; Fri, 14 Jun 2019 19:06:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D81E48999C;
	Fri, 14 Jun 2019 17:06:03 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2426F8999C
 for <Intel-gfx@lists.freedesktop.org>; Fri, 14 Jun 2019 17:06:03 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 14 Jun 2019 10:06:02 -0700
X-ExtLoop1: 1
Received: from yyosef-mobl.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.23.42])
 by orsmga002.jf.intel.com with ESMTP; 14 Jun 2019 10:06:01 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Fri, 14 Jun 2019 18:05:59 +0100
Message-Id: <20190614170559.28429-1-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190614151731.17608-7-tvrtko.ursulin@linux.intel.com>
References: <20190614151731.17608-7-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC 06/31] drm/i915: Convert i915_gem_init_swizzling
 to intel_gt
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KClN0YXJ0IHVz
aW5nIHRoZSBuZXdseSBpbnRyb2R1Y2VkIHN0cnVjdCBpbnRlbF9ndCB0byBmdXNlIHRvZ2V0aGVy
IGNvcnJlY3QKbG9naWNhbCBpbml0IGZsb3cgd2l0aCB1bmNvcmUgZm9yIG1vcmUgcmVtb3ZhbCBv
ZiBpbXBsaWNpdCBkZXZfcHJpdiBpbgptbWlvIGFjY2Vzcy4KCnYyOgogKiBNb3ZlIGNvZGUgdG8g
aTkxNV9nZW1fZmVuY2VfcmVnLiAoQ2hyaXMpCgpTaWduZWQtb2ZmLWJ5OiBUdnJ0a28gVXJzdWxp
biA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZHJ2LmMgICAgICAgICAgIHwgIDQgKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5oICAgICAgICAgICB8ICAxIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMgICAg
ICAgICAgIHwgMjUgKy0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dl
bV9mZW5jZV9yZWcuYyB8IDM3ICsrKysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dlbV9mZW5jZV9yZWcuaCB8ICAzICsrCiA1IGZpbGVzIGNoYW5nZWQsIDQz
IGluc2VydGlvbnMoKyksIDI3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCmlu
ZGV4IDQyYjUyYzlmMmRhNi4uMWZjOTYyM2JmYTViIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMK
QEAgLTI5MzgsNyArMjkzOCw3IEBAIHN0YXRpYyBpbnQgaW50ZWxfcnVudGltZV9zdXNwZW5kKHN0
cnVjdCBkZXZpY2UgKmtkZXYpCiAKIAkJaW50ZWxfdWNfcmVzdW1lKGRldl9wcml2KTsKIAotCQlp
OTE1X2dlbV9pbml0X3N3aXp6bGluZyhkZXZfcHJpdik7CisJCWludGVsX2d0X2luaXRfc3dpenps
aW5nKCZkZXZfcHJpdi0+Z3QpOwogCQlpOTE1X2dlbV9yZXN0b3JlX2ZlbmNlcyhkZXZfcHJpdik7
CiAKIAkJZW5hYmxlX3JwbV93YWtlcmVmX2Fzc2VydHMocnBtKTsKQEAgLTMwNDAsNyArMzA0MCw3
IEBAIHN0YXRpYyBpbnQgaW50ZWxfcnVudGltZV9yZXN1bWUoc3RydWN0IGRldmljZSAqa2RldikK
IAkgKiBObyBwb2ludCBvZiByb2xsaW5nIGJhY2sgdGhpbmdzIGluIGNhc2Ugb2YgYW4gZXJyb3Is
IGFzIHRoZSBiZXN0CiAJICogd2UgY2FuIGRvIGlzIHRvIGhvcGUgdGhhdCB0aGluZ3Mgd2lsbCBz
dGlsbCB3b3JrIChhbmQgZGlzYWJsZSBSUE0pLgogCSAqLwotCWk5MTVfZ2VtX2luaXRfc3dpenps
aW5nKGRldl9wcml2KTsKKwlpbnRlbF9ndF9pbml0X3N3aXp6bGluZygmZGV2X3ByaXYtPmd0KTsK
IAlpOTE1X2dlbV9yZXN0b3JlX2ZlbmNlcyhkZXZfcHJpdik7CiAKIAkvKgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZHJ2LmgKaW5kZXggNzE0OTYzZDdiM2ZlLi4yYzRjOGVlNDEzM2IgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kcnYuaApAQCAtMjUzOCw3ICsyNTM4LDYgQEAgYm9vbCBpOTE1X2dlbV91bnNldF93ZWRn
ZWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIHZvaWQgaTkxNV9nZW1faW5p
dF9tbWlvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKIGludCBfX211c3RfY2hlY2sg
aTkxNV9nZW1faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogaW50IF9f
bXVzdF9jaGVjayBpOTE1X2dlbV9pbml0X2h3KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdik7Ci12b2lkIGk5MTVfZ2VtX2luaXRfc3dpenpsaW5nKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdik7CiB2b2lkIGk5MTVfZ2VtX2ZpbmlfaHcoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2KTsKIHZvaWQgaTkxNV9nZW1fZmluaShzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYpOwogaW50IGk5MTVfZ2VtX3dhaXRfZm9yX2lkbGUoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKaW5kZXggNzIxMjc3
YTJlYzM1Li42NDJhYjk3Y2VkNjIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2VtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwpAQCAtMTIwNiwy
OSArMTIwNiw2IEBAIHZvaWQgaTkxNV9nZW1fc2FuaXRpemUoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUpCiAJbXV0ZXhfdW5sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKIH0KIAot
dm9pZCBpOTE1X2dlbV9pbml0X3N3aXp6bGluZyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYpCi17Ci0JaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPCA1IHx8Ci0JICAgIGRldl9wcml2
LT5tbS5iaXRfNl9zd2l6emxlX3ggPT0gSTkxNV9CSVRfNl9TV0laWkxFX05PTkUpCi0JCXJldHVy
bjsKLQotCUk5MTVfV1JJVEUoRElTUF9BUkJfQ1RMLCBJOTE1X1JFQUQoRElTUF9BUkJfQ1RMKSB8
Ci0JCQkJIERJU1BfVElMRV9TVVJGQUNFX1NXSVpaTElORyk7Ci0KLQlpZiAoSVNfR0VOKGRldl9w
cml2LCA1KSkKLQkJcmV0dXJuOwotCi0JSTkxNV9XUklURShUSUxFQ1RMLCBJOTE1X1JFQUQoVElM
RUNUTCkgfCBUSUxFQ1RMX1NXWkNUTCk7Ci0JaWYgKElTX0dFTihkZXZfcHJpdiwgNikpCi0JCUk5
MTVfV1JJVEUoQVJCX01PREUsIF9NQVNLRURfQklUX0VOQUJMRShBUkJfTU9ERV9TV0laWkxFX1NO
QikpOwotCWVsc2UgaWYgKElTX0dFTihkZXZfcHJpdiwgNykpCi0JCUk5MTVfV1JJVEUoQVJCX01P
REUsIF9NQVNLRURfQklUX0VOQUJMRShBUkJfTU9ERV9TV0laWkxFX0lWQikpOwotCWVsc2UgaWYg
KElTX0dFTihkZXZfcHJpdiwgOCkpCi0JCUk5MTVfV1JJVEUoR0FNVEFSQk1PREUsIF9NQVNLRURf
QklUX0VOQUJMRShBUkJfTU9ERV9TV0laWkxFX0JEVykpOwotCWVsc2UKLQkJQlVHKCk7Ci19Ci0K
IHN0YXRpYyB2b2lkIGluaXRfdW51c2VkX3Jpbmcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2LCB1MzIgYmFzZSkKIHsKIAlJOTE1X1dSSVRFKFJJTkdfQ1RMKGJhc2UpLCAwKTsKQEAg
LTEyNzUsNyArMTI1Miw3IEBAIGludCBpOTE1X2dlbV9pbml0X2h3KHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdikKIAkvKiAuLi5hbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhleSBhcmUg
c3RpY2tpbmcuICovCiAJaW50ZWxfZ3RfdmVyaWZ5X3dvcmthcm91bmRzKGRldl9wcml2LCAiaW5p
dCIpOwogCi0JaTkxNV9nZW1faW5pdF9zd2l6emxpbmcoZGV2X3ByaXYpOworCWludGVsX2d0X2lu
aXRfc3dpenpsaW5nKCZkZXZfcHJpdi0+Z3QpOwogCiAJLyoKIAkgKiBBdCBsZWFzdCA4MzAgY2Fu
IGxlYXZlIHNvbWUgb2YgdGhlIHVudXNlZCByaW5ncwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2VfcmVnLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dlbV9mZW5jZV9yZWcuYwppbmRleCAwYmY1M2FjMWM4MzUuLmRkMDk3OTBjNDIwZCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2VfcmVnLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2VfcmVnLmMKQEAgLTgzNCwzICs4MzQsNDAg
QEAgdm9pZCBpOTE1X2dndHRfaW5pdF9mZW5jZXMoc3RydWN0IGk5MTVfZ2d0dCAqZ2d0dCkKIAog
CWk5MTVfZ2VtX3Jlc3RvcmVfZmVuY2VzKGk5MTUpOwogfQorCit2b2lkIGludGVsX2d0X2luaXRf
c3dpenpsaW5nKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCit7CisJc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUgPSBndC0+aTkxNTsKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSBndC0+
dW5jb3JlOworCisJaWYgKElOVEVMX0dFTihpOTE1KSA8IDUgfHwKKwkgICAgaTkxNS0+bW0uYml0
XzZfc3dpenpsZV94ID09IEk5MTVfQklUXzZfU1dJWlpMRV9OT05FKQorCQlyZXR1cm47CisKKwlp
bnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLAorCQkJICAgRElTUF9BUkJfQ1RMLAorCQkJICAgaW50
ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBESVNQX0FSQl9DVEwpIHwKKwkJCSAgIERJU1BfVElMRV9T
VVJGQUNFX1NXSVpaTElORyk7CisKKwlpZiAoSVNfR0VOKGk5MTUsIDUpKQorCQlyZXR1cm47CisK
KwlpbnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLAorCQkJICAgVElMRUNUTCwKKwkJCSAgIGludGVs
X3VuY29yZV9yZWFkKHVuY29yZSwgVElMRUNUTCkgfCBUSUxFQ1RMX1NXWkNUTCk7CisKKwlpZiAo
SVNfR0VOKGk5MTUsIDYpKQorCQlpbnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLAorCQkJCSAgIEFS
Ql9NT0RFLAorCQkJCSAgIF9NQVNLRURfQklUX0VOQUJMRShBUkJfTU9ERV9TV0laWkxFX1NOQikp
OworCWVsc2UgaWYgKElTX0dFTihpOTE1LCA3KSkKKwkJaW50ZWxfdW5jb3JlX3dyaXRlKHVuY29y
ZSwKKwkJCQkgICBBUkJfTU9ERSwKKwkJCQkgICBfTUFTS0VEX0JJVF9FTkFCTEUoQVJCX01PREVf
U1dJWlpMRV9JVkIpKTsKKwllbHNlIGlmIChJU19HRU4oaTkxNSwgOCkpCisJCWludGVsX3VuY29y
ZV93cml0ZSh1bmNvcmUsCisJCQkJICAgR0FNVEFSQk1PREUsCisJCQkJICAgX01BU0tFRF9CSVRf
RU5BQkxFKEFSQl9NT0RFX1NXSVpaTEVfQkRXKSk7CisJZWxzZQorCQlNSVNTSU5HX0NBU0UoSU5U
RUxfR0VOKGk5MTUpKTsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2VtX2ZlbmNlX3JlZy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2VfcmVn
LmgKaW5kZXggZDJkYTk4ODI4MTc5Li4zN2U0ZjEwNGY3YzAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZ2VtX2ZlbmNlX3JlZy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZ2VtX2ZlbmNlX3JlZy5oCkBAIC0zMiw2ICszMiw3IEBAIHN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0Owogc3RydWN0IGRybV9pOTE1X3ByaXZhdGU7CiBzdHJ1Y3QgaTkxNV9nZ3R0
Owogc3RydWN0IGk5MTVfdm1hOworc3RydWN0IGludGVsX2d0Owogc3RydWN0IHNnX3RhYmxlOwog
CiAjZGVmaW5lIEk5NjVfRkVOQ0VfUEFHRSA0MDk2VUwKQEAgLTY2LDQgKzY3LDYgQEAgdm9pZCBp
OTE1X2dlbV9vYmplY3Rfc2F2ZV9iaXRfMTdfc3dpenpsZShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29i
amVjdCAqb2JqLAogCiB2b2lkIGk5MTVfZ2d0dF9pbml0X2ZlbmNlcyhzdHJ1Y3QgaTkxNV9nZ3R0
ICpnZ3R0KTsKIAordm9pZCBpbnRlbF9ndF9pbml0X3N3aXp6bGluZyhzdHJ1Y3QgaW50ZWxfZ3Qg
Kmd0KTsKKwogI2VuZGlmCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeA==

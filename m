Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0D96F10A577
	for <lists+intel-gfx@lfdr.de>; Tue, 26 Nov 2019 21:30:36 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 943D86E489;
	Tue, 26 Nov 2019 20:30:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5DA6F6E48C
 for <intel-gfx@lists.freedesktop.org>; Tue, 26 Nov 2019 20:30:32 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Nov 2019 12:30:32 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,246,1571727600"; d="scan'208";a="206561631"
Received: from fmsmsx108.amr.corp.intel.com ([10.18.124.206])
 by fmsmga008.fm.intel.com with ESMTP; 26 Nov 2019 12:30:31 -0800
Received: from fmsmsx112.amr.corp.intel.com (10.18.116.6) by
 FMSMSX108.amr.corp.intel.com (10.18.124.206) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Tue, 26 Nov 2019 12:30:31 -0800
Received: from fmsmsx117.amr.corp.intel.com ([169.254.3.27]) by
 FMSMSX112.amr.corp.intel.com ([169.254.5.173]) with mapi id 14.03.0439.000;
 Tue, 26 Nov 2019 12:30:31 -0800
From: "Souza, Jose" <jose.souza@intel.com>
To: "ville.syrjala@linux.intel.com" <ville.syrjala@linux.intel.com>
Thread-Topic: [PATCH 3/7] drm/i915/tgl: Select master trasconder for MST stream
Thread-Index: AQHVoZin5FYdqMcxWECRBMTa77MVw6eebLqAgAAG4QA=
Date: Tue, 26 Nov 2019 20:30:31 +0000
Message-ID: <a123c1a4b41c23a3dcc1caf293a85c15de27dacb.camel@intel.com>
References: <20191123005459.155383-1-jose.souza@intel.com>
 <20191123005459.155383-3-jose.souza@intel.com>
 <20191126200553.GG1208@intel.com>
In-Reply-To: <20191126200553.GG1208@intel.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.98.40.66]
Content-ID: <1D2EF5D85540754B8EB1C23F237D5D38@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH 3/7] drm/i915/tgl: Select master trasconder
 for MST stream
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>, "De
 Marchi, Lucas" <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVHVlLCAyMDE5LTExLTI2IGF0IDIyOjA1ICswMjAwLCBWaWxsZSBTeXJqw6Rsw6Qgd3JvdGU6
DQo+IE9uIEZyaSwgTm92IDIyLCAyMDE5IGF0IDA0OjU0OjU1UE0gLTA4MDAsIEpvc8OpIFJvYmVy
dG8gZGUgU291emENCj4gd3JvdGU6DQo+ID4gT24gVEdMIHRoZSBibGVuZGluZyBvZiBhbGwgdGhl
IHN0cmVhbXMgaGF2ZSBtb3ZlZCBmcm9tIERESSB0bw0KPiA+IHRyYW5zY29kZXIsIHNvIG5vdyBl
dmVyeSB0cmFuc2NvZGVyIHdvcmtpbmcgb3ZlciB0aGUgc2FtZSBNU1QgcG9ydA0KPiA+IG11c3QN
Cj4gPiBzZW5kIGl0cyBzdHJlYW0gdG8gYSBtYXN0ZXIgdHJhbnNjb2RlciBhbmQgbWFzdGVyIHdp
bGwgc2VuZCB0byBEREkNCj4gPiByZXNwZWN0aW5nIHRoZSB0aW1lIHNsb3RzLg0KPiA+IA0KPiA+
IEEgcHJldmlvdXMgYXBwcm9hY2ggd2FzIHVzaW5nIHRoZSBsb3dlc3QgcGlwZS90cmFuc2NvZGVy
IGFzIG1hc3Rlcg0KPiA+IHRyYW5zY29kZXIgYnV0IGFzIHRoZSBjb21tZW50IGluIHNrbF9jb21t
aXRfbW9kZXNldF9lbmFibGVzKCkNCj4gPiBzdGF0ZXMsDQo+ID4gdGhhdCBpcyBub3QgYWx3YXlz
IHRydWUuDQo+ID4gDQo+ID4gU28gaGVyZSBwcm9tb3RpbmcgdGhlIGZpcnN0IHBpcGUvdHJhbnNj
b2RlciBvZiB0aGUgc3RyZWFtIGFzDQo+ID4gbWFzdGVyLg0KPiA+IFRoYXQgY2F1c2VkIHNldmVy
YWwgb3RoZXIgcHJvYmxlbXMgYXMgZHVyaW5nIHRoZSBjb21taXQgcGhhc2UgdGhlDQo+ID4gc3Rh
dGUgY29tcHV0ZWQgc2hvdWxkIG5vdCBiZSBjaGFuZ2VkLg0KPiA+IA0KPiA+IFNvIHRoZSBtYXN0
ZXIgdHJhbnNjb2RlciBpcyBzdG9yZSBpbnRvIGludGVsX2RwIGFuZCB0aGUgbW9kZXNldCBpbg0K
PiA+IHNsYXZlIHBpcGVzL3RyYW5zY29kZXJzIGlzIGZvcmNlZCB1c2luZyBtc3RfbWFzdGVyX3Ry
YW5zX3BlbmRpbmcuDQo+ID4gDQo+ID4gdjI6DQo+ID4gLSBhZGRlZCBtaXNzaW5nIGNvbmZpZyBj
b21wdXRlIHRvIHRyaWdnZXIgZnVsbG1vZGVzZXQgaW4gc2xhdmUNCj4gPiB0cmFuc2NvZGVycw0K
PiA+IA0KPiA+IEJTcGVjOiA1MDQ5Mw0KPiA+IEJTcGVjOiA0OTE5MA0KPiA+IENjOiBWaWxsZSBT
eXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPg0KPiA+IENjOiBMdWNhcyBE
ZSBNYXJjaGkgPGx1Y2FzLmRlbWFyY2hpQGludGVsLmNvbT4NCj4gPiBTaWduZWQtb2ZmLWJ5OiBK
b3PDqSBSb2JlcnRvIGRlIFNvdXphIDxqb3NlLnNvdXphQGludGVsLmNvbT4NCj4gPiAtLS0NCj4g
PiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYyAgICAgIHwgIDEwICst
DQo+ID4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jICB8ICA1
OCArKysrKystDQo+ID4gIC4uLi9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMu
aCAgICB8ICAgMyArDQo+ID4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAu
YyAgICAgICB8ICAgMSArDQo+ID4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHBfbXN0LmMgICB8IDE0OQ0KPiA+ICsrKysrKysrKysrKysrKysrLQ0KPiA+ICBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5oICAgfCAgIDIgKw0KPiA+ICA2IGZpbGVz
IGNoYW5nZWQsIDIxNiBpbnNlcnRpb25zKCspLCA3IGRlbGV0aW9ucygtKQ0KPiA+IA0KPiA+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jDQo+ID4g
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jDQo+ID4gaW5kZXggYTk3
NjYwNmQyMWM3Li5kMmYwZDM5M2QzZWUgMTAwNjQ0DQo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYw0KPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGRpLmMNCj4gPiBAQCAtMzUsNiArMzUsNyBAQA0KPiA+ICAjaW5jbHVk
ZSAiaW50ZWxfZGlzcGxheV90eXBlcy5oIg0KPiA+ICAjaW5jbHVkZSAiaW50ZWxfZHAuaCINCj4g
PiAgI2luY2x1ZGUgImludGVsX2RwX2xpbmtfdHJhaW5pbmcuaCINCj4gPiArI2luY2x1ZGUgImlu
dGVsX2RwX21zdC5oIg0KPiA+ICAjaW5jbHVkZSAiaW50ZWxfZHBpb19waHkuaCINCj4gPiAgI2lu
Y2x1ZGUgImludGVsX2RzaS5oIg0KPiA+ICAjaW5jbHVkZSAiaW50ZWxfZmlmb191bmRlcnJ1bi5o
Ig0KPiA+IEBAIC0xOTAzLDggKzE5MDQsMTMgQEAgaW50ZWxfZGRpX3RyYW5zY29kZXJfZnVuY19y
ZWdfdmFsX2dldChjb25zdA0KPiA+IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
KQ0KPiA+ICAJCXRlbXAgfD0gVFJBTlNfRERJX01PREVfU0VMRUNUX0RQX01TVDsNCj4gPiAgCQl0
ZW1wIHw9IERESV9QT1JUX1dJRFRIKGNydGNfc3RhdGUtPmxhbmVfY291bnQpOw0KPiA+ICANCj4g
PiAtCQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMikNCj4gPiAtCQkJdGVtcCB8PQ0KPiA+
IFRSQU5TX0RESV9NU1RfVFJBTlNQT1JUX1NFTEVDVChjcnRjX3N0YXRlLT5jcHVfdHJhbnNjb2Rl
cik7DQo+ID4gKwkJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIpIHsNCj4gPiArCQkJZW51
bSB0cmFuc2NvZGVyIG1hc3RlcjsNCj4gPiArDQo+ID4gKwkJCW1hc3RlciA9DQo+ID4gaW50ZWxf
ZHBfbXN0X21hc3Rlcl90cmFuc19nZXQoZW5jb2Rlcik7DQo+IA0KPiBXaHkgaXNuJ3QgdGhhdCBq
dXN0IHN0b3JlZCBpbiB0aGUgY3J0YyBzdGF0ZSBsaWtlIGV2ZXJ5dGhpbmcgZWxzZT8NCj4gDQo+
IEknbSB0aGlua2luZyB3ZSBzaG91bGQgbWF5YmUgZG8gaXQganVzdCBsaWtlIHBvcnQgc3luYyBh
bmQgaGF2ZSBib3RoDQo+IG1hc3RlciArIHNsYXZlX21hc2suIFRoYXQgd2F5IGl0IHNob3VsZCBi
ZSBwcmV0dHkgdHJpdmlhbCB0byBhZGQgYWxsDQo+IHRoZSByZWxldmFudCBjcnRjcyB0byB0aGUg
c3RhdGUgd2hlbiBuZWVkZWQuDQoNCkkgZ3Vlc3MgcG9ydCBzeW5jIGlzIG5vdCBkb2luZyB0aGUg
cmlnaHQgdGhpbmcgYW5kIGl0IGNvdWxkIGNhdXNlDQp1bmRlcnJ1bnMuDQpXaGVuIGl0IGlzIGdv
aW5nIHRvIGVuYWJsZSB0aGUgbWFzdGVyIENSVEMgb2YgdGhlIHBvcnQgc3luYyBpdCBmb3JjaWJs
eQ0KZW5hYmxlcyB0aGUgc2xhdmUgZmlyc3QsIHdoYXQgY291bGQgY2F1c2UgdW5kZXJydW5zIGJl
Y2F1c2Ugb2Ygb3ZlcmxhcA0KaW4gZGRiIGFsbG9jYXRpb25zKHRoYXQgaXMgd2hhdCBJIHVuZGVy
c3Rvb2QgZnJvbSB0aGUgY29tbWVudCBpbg0Kc2tsX2NvbW1pdF9tb2Rlc2V0X2VuYWJsZXMoKSku
DQoNClNvIGZvciBNU1Qgd2Ugb25seSBrbm93IHdobyBpcyB0aGUgbWFzdGVyIGluIHRoZSBjb21t
aXQgcGhhc2UgYW5kIGF0DQp0aGlzIHBvaW50IHdlIHNob3VsZCBub3QgbW9kaWZ5IHRoZSBjb21w
dXRlZCBzdGF0ZS4NCg0KPiANCj4gPiArCQkJV0FSTl9PTihtYXN0ZXIgPT0gSU5WQUxJRF9UUkFO
U0NPREVSKTsNCj4gPiArCQkJdGVtcCB8PSBUUkFOU19ERElfTVNUX1RSQU5TUE9SVF9TRUxFQ1Qo
bWFzdGVyKTsNCj4gPiArCQl9DQo+ID4gIAl9IGVsc2Ugew0KPiA+ICAJCXRlbXAgfD0gVFJBTlNf
RERJX01PREVfU0VMRUNUX0RQX1NTVDsNCj4gPiAgCQl0ZW1wIHw9IERESV9QT1JUX1dJRFRIKGNy
dGNfc3RhdGUtPmxhbmVfY291bnQpOw0KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYw0KPiA+IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMNCj4gPiBpbmRleCA4MDFiOTc1YzdkMzkuLjM1YTU5MTA4
MTk0ZSAxMDA2NDQNCj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXkuYw0KPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheS5jDQo+ID4gQEAgLTQ2LDYgKzQ2LDcgQEANCj4gPiAgI2luY2x1ZGUgImRpc3BsYXkv
aW50ZWxfY3J0LmgiDQo+ID4gICNpbmNsdWRlICJkaXNwbGF5L2ludGVsX2RkaS5oIg0KPiA+ICAj
aW5jbHVkZSAiZGlzcGxheS9pbnRlbF9kcC5oIg0KPiA+ICsjaW5jbHVkZSAiZGlzcGxheS9pbnRl
bF9kcF9tc3QuaCINCj4gPiAgI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxfZHNpLmgiDQo+ID4gICNp
bmNsdWRlICJkaXNwbGF5L2ludGVsX2R2by5oIg0KPiA+ICAjaW5jbHVkZSAiZGlzcGxheS9pbnRl
bF9nbWJ1cy5oIg0KPiA+IEBAIC01MzY1LDYgKzUzNjYsMzYgQEAgaW50ZWxfZ2V0X2NydGNfbmV3
X2VuY29kZXIoY29uc3Qgc3RydWN0DQo+ID4gaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwNCj4g
PiAgCXJldHVybiBlbmNvZGVyOw0KPiA+ICB9DQo+ID4gIA0KPiA+ICsvKg0KPiA+ICsgKiBGaW5k
cyB0aGUgZW5jb2RlciBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIENSVEMuIFRoaXMgY2FuIG9u
bHkNCj4gPiBiZQ0KPiA+ICsgKiB1c2VkIHdoZW4gd2Uga25vdyB0aGF0IHRoZSBDUlRDIGlzbid0
IGZlZWRpbmcgbXVsdGlwbGUNCj4gPiBlbmNvZGVycyENCj4gPiArICovDQo+ID4gK3N0YXRpYyBz
dHJ1Y3QgaW50ZWxfZW5jb2RlciAqDQo+ID4gK2ludGVsX2dldF9jcnRjX29sZF9lbmNvZGVyKGNv
bnN0IHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLA0KPiA+ICsJCQkgICBjb25zdCBz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkNCj4gPiArew0KPiA+ICsJc3RydWN0
IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7
DQo+ID4gKwljb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubmVjdG9yX3N0YXRl
Ow0KPiA+ICsJY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsNCj4gPiArCXN0
cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyID0gTlVMTDsNCj4gPiArCWludCBudW1fZW5jb2Rl
cnMgPSAwOw0KPiA+ICsJaW50IGk7DQo+ID4gKw0KPiA+ICsJZm9yX2VhY2hfb2xkX2Nvbm5lY3Rv
cl9pbl9zdGF0ZSgmc3RhdGUtPmJhc2UsIGNvbm5lY3RvciwNCj4gPiArCQkJCQljb25uZWN0b3Jf
c3RhdGUsIGkpIHsNCj4gPiArCQlpZiAoY29ubmVjdG9yX3N0YXRlLT5jcnRjICE9ICZjcnRjLT5i
YXNlKQ0KPiA+ICsJCQljb250aW51ZTsNCj4gPiArDQo+ID4gKwkJZW5jb2RlciA9IHRvX2ludGVs
X2VuY29kZXIoY29ubmVjdG9yX3N0YXRlLQ0KPiA+ID5iZXN0X2VuY29kZXIpOw0KPiA+ICsJCW51
bV9lbmNvZGVycysrOw0KPiA+ICsJfQ0KPiA+ICsNCj4gPiArCVdBUk4obnVtX2VuY29kZXJzICE9
IDEsICIlZCBlbmNvZGVycyBmb3IgcGlwZSAlY1xuIiwNCj4gPiArCSAgICAgbnVtX2VuY29kZXJz
LCBwaXBlX25hbWUoY3J0Yy0+cGlwZSkpOw0KPiA+ICsNCj4gPiArCXJldHVybiBlbmNvZGVyOw0K
PiA+ICt9DQo+IA0KPiBBcmdoLiBJIHdhcyBob3BpbmcgdG8ga2lsbCB0aGUgb3RoZXIgb25lIG9m
IHRoZXNlLiBHb3QgaXQgZG93biB0byAxDQo+IHJlbWFpbmluZyB1c2VyIG5vdyBJIHRoaW5rLg0K
PiANCj4gPiArDQo+ID4gIC8qDQo+ID4gICAqIEVuYWJsZSBQQ0ggcmVzb3VyY2VzIHJlcXVpcmVk
IGZvciBQQ0ggcG9ydHM6DQo+ID4gICAqICAgLSBQQ0ggUExMcw0KPiA+IEBAIC0xMzM2NSw2ICsx
MzM5NiwxMiBAQCBpbnRlbF9waXBlX2NvbmZpZ19jb21wYXJlKGNvbnN0IHN0cnVjdA0KPiA+IGlu
dGVsX2NydGNfc3RhdGUgKmN1cnJlbnRfY29uZmlnLA0KPiA+ICAjdW5kZWYgUElQRV9DT05GX0NI
RUNLX0NPTE9SX0xVVA0KPiA+ICAjdW5kZWYgUElQRV9DT05GX1FVSVJLDQo+ID4gIA0KPiA+ICsJ
aWYgKGZhc3RzZXQgJiYgcGlwZV9jb25maWctPm1zdF9tYXN0ZXJfdHJhbnNfcGVuZGluZykgew0K
PiA+ICsJCURSTV9ERUJVR19LTVMoIltDUlRDOiVkOiVzXSBmYXN0c2V0IG1pc21hdGNoIGluDQo+
ID4gbXN0X21hc3Rlcl90cmFuc1xuIiwNCj4gPiArCQkJICAgICAgY3J0Yy0+YmFzZS5iYXNlLmlk
LCBjcnRjLT5iYXNlLm5hbWUpOw0KPiA+ICsJCXJldCA9IGZhbHNlOw0KPiA+ICsJfQ0KPiA+ICsN
Cj4gPiAgCXJldHVybiByZXQ7DQo+ID4gIH0NCj4gPiAgDQo+ID4gQEAgLTE0NDQ5LDIyICsxNDQ4
NiwzNSBAQCBzdGF0aWMgdm9pZA0KPiA+IGludGVsX2NvbW1pdF9tb2Rlc2V0X2Rpc2FibGVzKHN0
cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQ0KPiA+ICAJc3RydWN0IGludGVsX2NydGMg
KmNydGM7DQo+ID4gIAlpbnQgaTsNCj4gPiAgDQo+ID4gLQkvKiBPbmx5IGRpc2FibGUgcG9ydCBz
eW5jIHNsYXZlcyAqLw0KPiA+ICsJLyogT25seSBkaXNhYmxlIHBvcnQgc3luYyBhbmQgTVNUIHNs
YXZlcyAqLw0KPiA+ICAJZm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUs
IGNydGMsDQo+ID4gb2xkX2NydGNfc3RhdGUsDQo+ID4gIAkJCQkJICAgIG5ld19jcnRjX3N0YXRl
LCBpKSB7DQo+ID4gIAkJaWYgKCFuZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSB8fCAhY3J0
Yy0+YWN0aXZlKQ0KPiA+ICAJCQljb250aW51ZTsNCj4gPiAgDQo+ID4gKwkJaWYgKCFpc190cmFu
c19wb3J0X3N5bmNfbW9kZShuZXdfY3J0Y19zdGF0ZSkgJiYNCj4gPiArCQkgICAgIWludGVsX2Ny
dGNfaGFzX3R5cGUob2xkX2NydGNfc3RhdGUsDQo+ID4gSU5URUxfT1VUUFVUX0RQX01TVCkpDQo+
ID4gKwkJCWNvbnRpbnVlOw0KPiA+ICsNCj4gPiAgCQkvKiBJbiBjYXNlIG9mIFRyYW5zY29kZXIg
cG9ydCBTeW5jIG1hc3RlciBzbGF2ZSBDUlRDcw0KPiA+IGNhbiBiZQ0KPiA+ICAJCSAqIGFzc2ln
bmVkIGluIGFueSBvcmRlciBhbmQgd2UgbmVlZCB0byBtYWtlIHN1cmUgdGhhdA0KPiA+ICAJCSAq
IHNsYXZlIENSVENzIGFyZSBkaXNhYmxlZCBmaXJzdCBhbmQgdGhlbiBtYXN0ZXIgQ1JUQw0KPiA+
IHNpbmNlDQo+ID4gIAkJICogU2xhdmUgdmJsYW5rcyBhcmUgbWFza2VkIHRpbGwgTWFzdGVyIFZi
bGFua3MuDQo+ID4gIAkJICovDQo+ID4gLQkJaWYgKCFpc190cmFuc19wb3J0X3N5bmNfbW9kZShv
bGRfY3J0Y19zdGF0ZSkpDQo+ID4gLQkJCWNvbnRpbnVlOw0KPiA+IC0JCWlmIChpc190cmFuc19w
b3J0X3N5bmNfbWFzdGVyKG9sZF9jcnRjX3N0YXRlKSkNCj4gPiArCQlpZiAoaXNfdHJhbnNfcG9y
dF9zeW5jX21vZGUobmV3X2NydGNfc3RhdGUpICYmDQo+ID4gKwkJICAgIGlzX3RyYW5zX3BvcnRf
c3luY19tYXN0ZXIobmV3X2NydGNfc3RhdGUpKQ0KPiA+ICAJCQljb250aW51ZTsNCj4gPiAgDQo+
ID4gKwkJaWYgKGludGVsX2NydGNfaGFzX3R5cGUob2xkX2NydGNfc3RhdGUsDQo+ID4gSU5URUxf
T1VUUFVUX0RQX01TVCkpIHsNCj4gPiArCQkJc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXI7
DQo+ID4gKw0KPiA+ICsJCQllbmNvZGVyID0gaW50ZWxfZ2V0X2NydGNfb2xkX2VuY29kZXIoc3Rh
dGUsDQo+ID4gKwkJCQkJCQkgICAgIG9sZF9jcnRjX3MNCj4gPiB0YXRlKTsNCj4gPiArCQkJaWYg
KGludGVsX2RwX21zdF9tYXN0ZXJfdHJhbnNfZ2V0KGVuY29kZXIpID09DQo+ID4gKwkJCSAgICBv
bGRfY3J0Y19zdGF0ZS0+Y3B1X3RyYW5zY29kZXIpDQo+ID4gKwkJCQljb250aW51ZTsNCj4gPiAr
CQl9DQo+ID4gKw0KPiA+ICAJCWludGVsX3ByZV9wbGFuZV91cGRhdGUob2xkX2NydGNfc3RhdGUs
IG5ld19jcnRjX3N0YXRlKTsNCj4gPiAgCQlpbnRlbF9vbGRfY3J0Y19zdGF0ZV9kaXNhYmxlcyhz
dGF0ZSwgb2xkX2NydGNfc3RhdGUsDQo+ID4gIAkJCQkJICAgICAgbmV3X2NydGNfc3RhdGUsIGNy
dGMpOw0KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXlfdHlwZXMuaA0KPiA+IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5X3R5cGVzLmgNCj4gPiBpbmRleCA4M2VhMDQxNDliNzcuLjIzZDc0N2NkY2E2NCAx
MDA2NDQNCj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXlfdHlwZXMuaA0KPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheV90eXBlcy5oDQo+ID4gQEAgLTEwNTIsNiArMTA1Miw4IEBAIHN0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlIHsNCj4gPiAgCS8qIFBvaW50ZXIgdG8gbWFzdGVyIHRyYW5zY29kZXIgaW4gY2Fz
ZSBvZiB0aWxlZCBkaXNwbGF5cyAqLw0KPiA+ICAJZW51bSB0cmFuc2NvZGVyIG1hc3Rlcl90cmFu
c2NvZGVyOw0KPiA+ICANCj4gPiArCWJvb2wgbXN0X21hc3Rlcl90cmFuc19wZW5kaW5nOw0KPiA+
ICsNCj4gPiAgCS8qIEJpdG1hc2sgdG8gaW5kaWNhdGUgc2xhdmVzIGF0dGFjaGVkICovDQo+ID4g
IAl1OCBzeW5jX21vZGVfc2xhdmVzX21hc2s7DQo+ID4gIH07DQo+ID4gQEAgLTEyODQsNiArMTI4
Niw3IEBAIHN0cnVjdCBpbnRlbF9kcCB7DQo+ID4gIAlib29sIGNhbl9tc3Q7IC8qIHRoaXMgcG9y
dCBzdXBwb3J0cyBtc3QgKi8NCj4gPiAgCWJvb2wgaXNfbXN0Ow0KPiA+ICAJaW50IGFjdGl2ZV9t
c3RfbGlua3M7DQo+ID4gKwllbnVtIHRyYW5zY29kZXIgbXN0X21hc3Rlcl90cmFuc2NvZGVyOyAv
KiBPbmx5IHVzZWQgaW4gVEdMKyAqLw0KPiA+ICANCj4gPiAgCS8qDQo+ID4gIAkgKiBEUF9UUF8q
IHJlZ2lzdGVycyBtYXkgYmUgZWl0aGVyIG9uIHBvcnQgb3IgdHJhbnNjb2Rlcg0KPiA+IHJlZ2lz
dGVyIHNwYWNlLg0KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2RwLmMNCj4gPiBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAu
Yw0KPiA+IGluZGV4IDMxMjM5NThlMjA4MS4uY2VmZjY5MDE0NTFhIDEwMDY0NA0KPiA+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYw0KPiA+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYw0KPiA+IEBAIC03NDI0LDYgKzc0MjQs
NyBAQCBpbnRlbF9kcF9pbml0X2Nvbm5lY3RvcihzdHJ1Y3QNCj4gPiBpbnRlbF9kaWdpdGFsX3Bv
cnQgKmludGVsX2RpZ19wb3J0LA0KPiA+ICAJaW50ZWxfZHAtPnJlc2V0X2xpbmtfcGFyYW1zID0g
dHJ1ZTsNCj4gPiAgCWludGVsX2RwLT5wcHNfcGlwZSA9IElOVkFMSURfUElQRTsNCj4gPiAgCWlu
dGVsX2RwLT5hY3RpdmVfcGlwZSA9IElOVkFMSURfUElQRTsNCj4gPiArCWludGVsX2RwLT5tc3Rf
bWFzdGVyX3RyYW5zY29kZXIgPSBJTlZBTElEX1RSQU5TQ09ERVI7DQo+ID4gIA0KPiA+ICAJLyog
UHJlc2VydmUgdGhlIGN1cnJlbnQgaHcgc3RhdGUuICovDQo+ID4gIAlpbnRlbF9kcC0+RFAgPSBJ
OTE1X1JFQUQoaW50ZWxfZHAtPm91dHB1dF9yZWcpOw0KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5jDQo+ID4gYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5jDQo+ID4gaW5kZXggZjhhMzUwMzU5MzQ2Li45
NzMxYzNjMWQzZjIgMTAwNjQ0DQo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kcF9tc3QuYw0KPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZHBfbXN0LmMNCj4gPiBAQCAtODcsNiArODcsNDcgQEAgc3RhdGljIGludA0KPiA+IGlu
dGVsX2RwX21zdF9jb21wdXRlX2xpbmtfY29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNv
ZGVyLA0KPiA+ICAJcmV0dXJuIDA7DQo+ID4gIH0NCj4gPiAgDQo+ID4gK3N0YXRpYyBpbnQNCj4g
PiAraW50ZWxfZHBfbXN0X21hc3Rlcl90cmFuc19jb21wdXRlKHN0cnVjdCBpbnRlbF9lbmNvZGVy
ICplbmNvZGVyLA0KPiA+ICsJCQkJICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25m
aWcsDQo+ID4gKwkJCQkgIHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlDQo+ID4gKmNvbm5fc3Rh
dGUpDQo+ID4gK3sNCj4gPiArCXN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlID0NCj4g
PiB0b19pbnRlbF9hdG9taWNfc3RhdGUocGlwZV9jb25maWctPnVhcGkuc3RhdGUpOw0KPiA+ICsJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNl
LmRldik7DQo+ID4gKwlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqbmV3X2NydGNfc3RhdGU7DQo+
ID4gKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YzsNCj4gPiArCWVudW0gdHJhbnNjb2RlciBtYXN0
ZXI7DQo+ID4gKwlpbnQgaTsNCj4gPiArDQo+ID4gKwlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA8
IDEyKQ0KPiA+ICsJCXJldHVybiAwOw0KPiA+ICsNCj4gPiArCWlmICghY29ubl9zdGF0ZS0+Y3J0
YykNCj4gPiArCQlyZXR1cm4gMDsNCj4gPiArDQo+ID4gKwltYXN0ZXIgPSBpbnRlbF9kcF9tc3Rf
bWFzdGVyX3RyYW5zX2dldChlbmNvZGVyKTsNCj4gPiArCWlmIChtYXN0ZXIgPT0gSU5WQUxJRF9U
UkFOU0NPREVSKQ0KPiA+ICsJCXJldHVybiAwOw0KPiA+ICsNCj4gPiArCWZvcl9lYWNoX25ld19p
bnRlbF9jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBuZXdfY3J0Y19zdGF0ZSwNCj4gPiBpKSB7
DQo+ID4gKwkJLyoNCj4gPiArCQkgKiBjcHVfdHJhbnNjb2RlciBpcyBzZXQgd2hlbiBjb21wdXRp
bmcgQ1JUQyBzdGF0ZSBpZg0KPiA+IGl0IHdpbGwNCj4gPiArCQkgKiBiZSBkaXNhYmxlZCBpdCB3
aWxsIG5vdCBoYXBwZW4sIHNvIGNoZWNraW5nIHBpcGUNCj4gPiBpbnN0ZWFkDQo+ID4gKwkJICov
DQo+ID4gKwkJaWYgKGNydGMtPnBpcGUgIT0gKGVudW0gcGlwZSltYXN0ZXIpDQo+ID4gKwkJCWNv
bnRpbnVlOw0KPiA+ICsNCj4gPiArCQlpZiAoIWRybV9hdG9taWNfY3J0Y19uZWVkc19tb2Rlc2V0
KCZuZXdfY3J0Y19zdGF0ZS0NCj4gPiA+dWFwaSkgJiYNCj4gPiArCQkgICAgbmV3X2NydGNfc3Rh
dGUtPnVhcGkuZW5hYmxlKQ0KPiA+ICsJCQljb250aW51ZTsNCj4gPiArDQo+ID4gKwkJcGlwZV9j
b25maWctPm1zdF9tYXN0ZXJfdHJhbnNfcGVuZGluZyA9IHRydWU7DQo+ID4gKwkJYnJlYWs7DQo+
ID4gKwl9DQo+ID4gKw0KPiA+ICsJcmV0dXJuIDA7DQo+ID4gK30NCj4gPiArDQo+ID4gIHN0YXRp
YyBpbnQgaW50ZWxfZHBfbXN0X2NvbXB1dGVfY29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyDQo+
ID4gKmVuY29kZXIsDQo+ID4gIAkJCQkgICAgICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUNCj4g
PiAqcGlwZV9jb25maWcsDQo+ID4gIAkJCQkgICAgICAgc3RydWN0IGRybV9jb25uZWN0b3Jfc3Rh
dGUNCj4gPiAqY29ubl9zdGF0ZSkNCj4gPiBAQCAtMTU0LDYgKzE5NSw5NSBAQCBzdGF0aWMgaW50
IGludGVsX2RwX21zdF9jb21wdXRlX2NvbmZpZyhzdHJ1Y3QNCj4gPiBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyLA0KPiA+ICANCj4gPiAgCWludGVsX2RkaV9jb21wdXRlX21pbl92b2x0YWdlX2xldmVs
KGRldl9wcml2LCBwaXBlX2NvbmZpZyk7DQo+ID4gIA0KPiA+ICsJcmV0ID0gaW50ZWxfZHBfbXN0
X21hc3Rlcl90cmFuc19jb21wdXRlKGVuY29kZXIsIHBpcGVfY29uZmlnLA0KPiA+ICsJCQkJCQlj
b25uX3N0YXRlKTsNCj4gPiArCWlmIChyZXQpDQo+ID4gKwkJcmV0dXJuIHJldDsNCj4gPiArDQo+
ID4gKwlyZXR1cm4gMDsNCj4gPiArfQ0KPiA+ICsNCj4gPiArc3RhdGljIGludA0KPiA+ICtpbnRl
bF9kcF9tc3RfYXRvbWljX21hc3Rlcl90cmFuc19jaGVjayhzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcg0K
PiA+ICpjb25uZWN0b3IsDQo+ID4gKwkJCQkgICAgICAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUg
KnN0YXRlKQ0KPiA+ICt7DQo+ID4gKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYg
PSB0b19pOTE1KGNvbm5lY3Rvci0+ZGV2KTsNCj4gPiArCXN0cnVjdCBpbnRlbF9jb25uZWN0b3Ig
KmludGVsX2Nvbm4gPQ0KPiA+IHRvX2ludGVsX2Nvbm5lY3Rvcihjb25uZWN0b3IpOw0KPiA+ICsJ
c3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKm5ld19jb25uX3N0YXRlLCAqb2xkX2Nvbm5fc3Rh
dGU7DQo+ID4gKwlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXIgY29ubl9saXN0X2l0ZXI7
DQo+ID4gKwlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqaW50ZWxfY3J0Y19zdGF0ZTsNCj4gPiAr
CXN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsNCj4gPiArCXN0cnVjdCBkcm1fY29u
bmVjdG9yICpjb25uX2l0ZXI7DQo+ID4gKw0KPiA+ICsJaWYgKElOVEVMX0dFTihkZXZfcHJpdikg
PCAxMikNCj4gPiArCQlyZXR1cm4gMDsNCj4gPiArDQo+ID4gKwluZXdfY29ubl9zdGF0ZSA9IGRy
bV9hdG9taWNfZ2V0X25ld19jb25uZWN0b3Jfc3RhdGUoc3RhdGUsDQo+ID4gY29ubmVjdG9yKTsN
Cj4gPiArCW9sZF9jb25uX3N0YXRlID0gZHJtX2F0b21pY19nZXRfb2xkX2Nvbm5lY3Rvcl9zdGF0
ZShzdGF0ZSwNCj4gPiBjb25uZWN0b3IpOw0KPiA+ICsNCj4gPiArCWlmICghb2xkX2Nvbm5fc3Rh
dGUtPmNydGMgJiYgIW5ld19jb25uX3N0YXRlLT5jcnRjKQ0KPiA+ICsJCXJldHVybiAwOw0KPiA+
ICsNCj4gPiArCS8qDQo+ID4gKwkgKiAzIGNhc2VzIHRoYXQgbmVlZHMgYmUgaGFuZGxlZCBoZXJl
Og0KPiA+ICsJICogLSBjb25uZWN0b3IgZ29pbmcgZnJvbSBkaXNhYmxlZCB0byBlbmFibGVkDQo+
ID4gKwkgKiAtIGNvbm5lY3RvciBnb2luZyBmcm9tIGVuYWJsZWQgdG8gZGlzYWJsZWQ6DQo+ID4g
KwkgKiBpZiB0aGlzIHRyYW5zY29kZXIgd2FzIHRoZSBtYXN0ZXIsIGFsbCBzbGF2ZXMgbmVlZHMg
YQ0KPiA+IG1vZGVzZXQNCj4gPiArCSAqIC0gY29ubmVjdG9yIGdvaW5nIGZyb20gZW5hYmxlZCB0
byBlbmFibGVkIGJ1dCBpdCBuZWVkcyBhDQo+ID4gbW9kZXNldDoNCj4gPiArCSAqIGlmIHRoaXMg
dHJhbnNjb2RlciB3YXMgdGhlIG1hc3RlciwgYWxsIHNsYXZlcyBhbHNvIG5lZWRzIGENCj4gPiBt
b2Rlc2V0DQo+ID4gKwkgKi8NCj4gPiArDQo+ID4gKwkvKiBkaXNhYmxlZCAtPiBlbmFibGVkICov
DQo+ID4gKwlpZiAoIW9sZF9jb25uX3N0YXRlLT5jcnRjICYmIG5ld19jb25uX3N0YXRlLT5jcnRj
KQ0KPiA+ICsJCXJldHVybiAwOw0KPiA+ICsNCj4gPiArCS8qIGVuYWJsZWQgLT4gZW5hYmxlZCht
b2Rlc2V0KT8gKi8NCj4gPiArCWlmIChuZXdfY29ubl9zdGF0ZS0+Y3J0Yykgew0KPiA+ICsJCWNy
dGNfc3RhdGUgPSBkcm1fYXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShzdGF0ZSwNCj4gPiBuZXdf
Y29ubl9zdGF0ZS0+Y3J0Yyk7DQo+ID4gKwkJaWYgKCFkcm1fYXRvbWljX2NydGNfbmVlZHNfbW9k
ZXNldChjcnRjX3N0YXRlKSkNCj4gPiArCQkJcmV0dXJuIDA7DQo+ID4gKwl9DQo+ID4gKw0KPiA+
ICsJLyogaGFuZGxpbmcgZW5hYmxlZCAtPiBlbmFibGVkKG1vZGVzZXQpIGFuZCBlbmFibGVkIC0+
IGRpc2FibGVkDQo+ID4gKi8NCj4gPiArCWNydGNfc3RhdGUgPSBkcm1fYXRvbWljX2dldF9vbGRf
Y3J0Y19zdGF0ZShzdGF0ZSwNCj4gPiBvbGRfY29ubl9zdGF0ZS0+Y3J0Yyk7DQo+ID4gKwlpbnRl
bF9jcnRjX3N0YXRlID0gdG9faW50ZWxfY3J0Y19zdGF0ZShjcnRjX3N0YXRlKTsNCj4gPiArDQo+
ID4gKwkvKiBJZiBub3QgbWFzdGVyLCBub3RoaW5nIGVsc2UgbmVlZHMgdG8gYmUgaGFuZGxlZCAq
Lw0KPiA+ICsJaWYgKGludGVsX2Nvbm4tPm1zdF9wb3J0LT5tc3RfbWFzdGVyX3RyYW5zY29kZXIg
IT0NCj4gPiArCSAgICBpbnRlbF9jcnRjX3N0YXRlLT5jcHVfdHJhbnNjb2RlcikNCj4gPiArCQly
ZXR1cm4gMDsNCj4gPiArDQo+ID4gKwkvKiBJcyBtYXN0ZXIsIG1hcmsgYWxsIG90aGVyIENSVENz
IGFzIG5lZWRpbmcgYSBtb2Rlc2V0ICovDQo+ID4gKwlkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9i
ZWdpbihzdGF0ZS0+ZGV2LCAmY29ubl9saXN0X2l0ZXIpOw0KPiA+ICsJZHJtX2Zvcl9lYWNoX2Nv
bm5lY3Rvcl9pdGVyKGNvbm5faXRlciwgJmNvbm5fbGlzdF9pdGVyKSB7DQo+ID4gKwkJc3RydWN0
IGludGVsX2Nvbm5lY3RvciAqaW50ZWxfY29ubl9pdGVyOw0KPiA+ICsJCXN0cnVjdCBkcm1fY29u
bmVjdG9yX3N0YXRlICpjb25uX2l0ZXJfc3RhdGU7DQo+ID4gKw0KPiA+ICsJCWludGVsX2Nvbm5f
aXRlciA9IHRvX2ludGVsX2Nvbm5lY3Rvcihjb25uX2l0ZXIpOw0KPiA+ICsJCWlmIChpbnRlbF9j
b25uX2l0ZXItPm1zdF9wb3J0ICE9IGludGVsX2Nvbm4tPm1zdF9wb3J0KQ0KPiA+ICsJCQljb250
aW51ZTsNCj4gPiArDQo+ID4gKwkJY29ubl9pdGVyX3N0YXRlID0gZHJtX2F0b21pY19nZXRfY29u
bmVjdG9yX3N0YXRlKHN0YXRlLA0KPiA+ICsJCQkJCQkJCSBjb25uX2kNCj4gPiB0ZXIpOw0KPiA+
ICsJCWlmIChJU19FUlIoY29ubl9pdGVyX3N0YXRlKSkgew0KPiA+ICsJCQlkcm1fY29ubmVjdG9y
X2xpc3RfaXRlcl9lbmQoJmNvbm5fbGlzdF9pdGVyKTsNCj4gPiArCQkJcmV0dXJuIFBUUl9FUlIo
Y29ubl9pdGVyX3N0YXRlKTsNCj4gPiArCQl9DQo+ID4gKw0KPiA+ICsJCWlmICghY29ubl9pdGVy
X3N0YXRlLT5jcnRjKQ0KPiA+ICsJCQljb250aW51ZTsNCj4gPiArDQo+ID4gKwkJY3J0Y19zdGF0
ZSA9IGRybV9hdG9taWNfZ2V0X2NydGNfc3RhdGUoc3RhdGUsDQo+ID4gY29ubl9pdGVyX3N0YXRl
LT5jcnRjKTsNCj4gPiArCQlpZiAoSVNfRVJSKGNydGNfc3RhdGUpKSB7DQo+ID4gKwkJCWRybV9j
b25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmY29ubl9saXN0X2l0ZXIpOw0KPiA+ICsJCQlyZXR1cm4g
UFRSX0VSUihjb25uX2l0ZXJfc3RhdGUpOw0KPiA+ICsJCX0NCj4gPiArDQo+ID4gKwkJaW50ZWxf
Y3J0Y19zdGF0ZSA9IHRvX2ludGVsX2NydGNfc3RhdGUoY3J0Y19zdGF0ZSk7DQo+ID4gKwkJY3J0
Y19zdGF0ZS0+bW9kZV9jaGFuZ2VkID0gdHJ1ZTsNCj4gPiArCX0NCj4gPiArCWRybV9jb25uZWN0
b3JfbGlzdF9pdGVyX2VuZCgmY29ubl9saXN0X2l0ZXIpOw0KPiA+ICsNCj4gPiAgCXJldHVybiAw
Ow0KPiA+ICB9DQo+ID4gIA0KPiA+IEBAIC0xNzUsNiArMzA1LDEwIEBAIGludGVsX2RwX21zdF9h
dG9taWNfY2hlY2soc3RydWN0IGRybV9jb25uZWN0b3INCj4gPiAqY29ubmVjdG9yLA0KPiA+ICAJ
aWYgKHJldCkNCj4gPiAgCQlyZXR1cm4gcmV0Ow0KPiA+ICANCj4gPiArCXJldCA9IGludGVsX2Rw
X21zdF9hdG9taWNfbWFzdGVyX3RyYW5zX2NoZWNrKGNvbm5lY3Rvciwgc3RhdGUpOw0KPiA+ICsJ
aWYgKHJldCkNCj4gPiArCQlyZXR1cm4gcmV0Ow0KPiA+ICsNCj4gPiAgCWlmICghb2xkX2Nvbm5f
c3RhdGUtPmNydGMpDQo+ID4gIAkJcmV0dXJuIDA7DQo+ID4gIA0KPiA+IEBAIC0yNTksNiArMzkz
LDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfbXN0X3Bvc3RfZGlzYWJsZV9kcChzdHJ1Y3QNCj4gPiBp
bnRlbF9lbmNvZGVyICplbmNvZGVyLA0KPiA+ICAJCWludGVsX2RwX3NpbmtfZHBtcyhpbnRlbF9k
cCwgRFJNX01PREVfRFBNU19PRkYpOw0KPiA+ICAJCWludGVsX2RpZ19wb3J0LT5iYXNlLnBvc3Rf
ZGlzYWJsZSgmaW50ZWxfZGlnX3BvcnQtDQo+ID4gPmJhc2UsDQo+ID4gIAkJCQkJCSAgb2xkX2Ny
dGNfc3RhdGUsDQo+ID4gTlVMTCk7DQo+ID4gKwkJaW50ZWxfZHAtPm1zdF9tYXN0ZXJfdHJhbnNj
b2RlciA9IElOVkFMSURfVFJBTlNDT0RFUjsNCj4gPiAgCX0NCj4gPiAgDQo+ID4gIAlEUk1fREVC
VUdfS01TKCJhY3RpdmUgbGlua3MgJWRcbiIsIGludGVsX2RwLT5hY3RpdmVfbXN0X2xpbmtzKTsN
Cj4gPiBAQCAtMzE0LDggKzQ0OSwxMSBAQCBzdGF0aWMgdm9pZCBpbnRlbF9tc3RfcHJlX2VuYWJs
ZV9kcChzdHJ1Y3QNCj4gPiBpbnRlbF9lbmNvZGVyICplbmNvZGVyLA0KPiA+ICANCj4gPiAgCURS
TV9ERUJVR19LTVMoImFjdGl2ZSBsaW5rcyAlZFxuIiwgaW50ZWxfZHAtPmFjdGl2ZV9tc3RfbGlu
a3MpOw0KPiA+ICANCj4gPiAtCWlmIChmaXJzdF9tc3Rfc3RyZWFtKQ0KPiA+ICsJaWYgKGZpcnN0
X21zdF9zdHJlYW0pIHsNCj4gPiArCQlXQVJOX09OKGludGVsX2RwLT5tc3RfbWFzdGVyX3RyYW5z
Y29kZXIgIT0NCj4gPiBJTlZBTElEX1RSQU5TQ09ERVIpOw0KPiA+ICsJCWludGVsX2RwLT5tc3Rf
bWFzdGVyX3RyYW5zY29kZXIgPSBwaXBlX2NvbmZpZy0NCj4gPiA+Y3B1X3RyYW5zY29kZXI7DQo+
ID4gIAkJaW50ZWxfZHBfc2lua19kcG1zKGludGVsX2RwLCBEUk1fTU9ERV9EUE1TX09OKTsNCj4g
PiArCX0NCj4gPiAgDQo+ID4gIAlkcm1fZHBfc2VuZF9wb3dlcl91cGRvd25fcGh5KCZpbnRlbF9k
cC0+bXN0X21nciwgY29ubmVjdG9yLQ0KPiA+ID5wb3J0LCB0cnVlKTsNCj4gPiAgDQo+ID4gQEAg
LTcxNywzICs4NTUsMTIgQEAgaW50ZWxfZHBfbXN0X2VuY29kZXJfY2xlYW51cChzdHJ1Y3QNCj4g
PiBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0KQ0KPiA+ICAJZHJtX2RwX21zdF90
b3BvbG9neV9tZ3JfZGVzdHJveSgmaW50ZWxfZHAtPm1zdF9tZ3IpOw0KPiA+ICAJLyogZW5jb2Rl
cnMgd2lsbCBnZXQga2lsbGVkIGJ5IG5vcm1hbCBjbGVhbnVwICovDQo+ID4gIH0NCj4gPiArDQo+
ID4gK2VudW0gdHJhbnNjb2Rlcg0KPiA+ICtpbnRlbF9kcF9tc3RfbWFzdGVyX3RyYW5zX2dldChz
dHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikNCj4gPiArew0KPiA+ICsJc3RydWN0IGludGVs
X2RwX21zdF9lbmNvZGVyICppbnRlbF9tc3QgPSBlbmNfdG9fbXN0KCZlbmNvZGVyLQ0KPiA+ID5i
YXNlKTsNCj4gPiArCXN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAgPSAmaW50ZWxfbXN0LT5wcmlt
YXJ5LT5kcDsNCj4gPiArDQo+ID4gKwlyZXR1cm4gaW50ZWxfZHAtPm1zdF9tYXN0ZXJfdHJhbnNj
b2RlcjsNCj4gPiArfQ0KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2RwX21zdC5oDQo+ID4gYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2RwX21zdC5oDQo+ID4gaW5kZXggZjY2MGFkODBkYjA0Li5lNmYyOGE1MTcxODIgMTAwNjQ0
DQo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcF9tc3QuaA0K
PiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmgNCj4g
PiBAQCAtNyw5ICs3LDExIEBADQo+ID4gICNkZWZpbmUgX19JTlRFTF9EUF9NU1RfSF9fDQo+ID4g
IA0KPiA+ICBzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0Ow0KPiA+ICtzdHJ1Y3QgaW50ZWxfZW5j
b2RlcjsNCj4gPiAgDQo+ID4gIGludCBpbnRlbF9kcF9tc3RfZW5jb2Rlcl9pbml0KHN0cnVjdCBp
bnRlbF9kaWdpdGFsX3BvcnQNCj4gPiAqaW50ZWxfZGlnX3BvcnQsIGludCBjb25uX2lkKTsNCj4g
PiAgdm9pZCBpbnRlbF9kcF9tc3RfZW5jb2Rlcl9jbGVhbnVwKHN0cnVjdCBpbnRlbF9kaWdpdGFs
X3BvcnQNCj4gPiAqaW50ZWxfZGlnX3BvcnQpOw0KPiA+ICBpbnQgaW50ZWxfZHBfbXN0X2VuY29k
ZXJfYWN0aXZlX2xpbmtzKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQNCj4gPiAqaW50ZWxfZGln
X3BvcnQpOw0KPiA+ICtlbnVtIHRyYW5zY29kZXIgaW50ZWxfZHBfbXN0X21hc3Rlcl90cmFuc19n
ZXQoc3RydWN0IGludGVsX2VuY29kZXINCj4gPiAqZW5jb2Rlcik7DQo+ID4gIA0KPiA+ICAjZW5k
aWYgLyogX19JTlRFTF9EUF9NU1RfSF9fICovDQo+ID4gLS0gDQo+ID4gMi4yNC4wDQpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGlu
ZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 791ADFB916
	for <lists+intel-gfx@lfdr.de>; Wed, 13 Nov 2019 20:47:04 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 83ED36EE41;
	Wed, 13 Nov 2019 19:47:02 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BFFD96EE41
 for <intel-gfx@lists.freedesktop.org>; Wed, 13 Nov 2019 19:47:00 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19192338-1500050 
 for multiple; Wed, 13 Nov 2019 19:46:45 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 13 Nov 2019 19:46:43 +0000
Message-Id: <20191113194643.14831-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191113182808.10780-3-chris@chris-wilson.co.uk>
References: <20191113182808.10780-3-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t] igt: Use COND_BBEND for busy spinning on
 gen9
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Mika Kuoppala <mika.kuoppala@intel.com>,
 Joonas Lahtinen <joonas.lahtinen@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogSm9uIEJsb29tZmllbGQgPGpvbi5ibG9vbWZpZWxkQGludGVsLmNvbT4KCmdlbjkrIGlu
dHJvZHVjZXMgYSBjbWRwYXJzZXIgZm9yIHRoZSBCTFQgZW5naW5lIHdoaWNoIGNvcGllcyB0aGUK
aW5jb21pbmcgQkIgdG8gYSBrbWQgb3duZWQgYnVmZmVyIGZvciBzdWJtaXNzaW9uICh0byBwcmV2
ZW50IGNoYW5nZXMKYmVpbmcgbWFkZSBhZnRlciB0aGUgYmIgaGFzIGJlZW4gc2FmZWx5IHNjYW5u
ZWQpLiBUaGlzIGJyZWFrcyB0aGUKc3BpbiBmdW5jdGlvbmFsaXR5IGJlY2F1c2UgaXQgcmVsaWVz
IG9uIGNoYW5naW5nIHRoZSBzdWJtaXR0ZWQgc3BpbgpidWZmZXJzIGluIG9yZGVyIHRvIHRlcm1p
bmF0ZSB0aGVtLgoKSW5zdGVhZCwgZm9yIGdlbjkrLCB3ZSBjaGFuZ2UgdGhlIHNlbWFudGljcyBi
eSBpbnRyb2R1Y2luZyBhIENPTkRfQkJfRU5ECmludG8gdGhlIGluZmluaXRlIGxvb3AsIHRvIHdh
aXQgdW50aWwgYSBtZW1vcnkgZmxhZyAoaW4gYW5vdGhlIGJvKSBpcwpjbGVhcmVkLgoKdjI6IENv
cnJlY3Qgbm9wIGxlbmd0aCB0byBhdm9pZCBvdmVyd3JpdGluZyBiYl9lbmQgaW5zdHIgd2hlbiB1
c2luZwogICAgYSBkZXBlbmRlbmN5IGJvIChjb3JrKQp2MzogZml4IGNvbmZsaWN0cyBvbiBpZ3Rf
ZHVtbXlsb2FkIChNaWthKQp2NDogcy9ib29sIHJ1bm5pbmcvdWludDMyX3QgcnVubmluZywgZml4
IHItPmRlbHRhIChNaWthKQp2NTogcmVtb3ZlIG92ZXJ6ZWFsb3VzIGFzc2VydCAoTWlrYSkKdjY6
IHJlYmFzZSBvbiB0b3Agb2YgbGliIGNoYW5nZXMgKE1pa2EpCnY3OiByZXdvcmsgb24gdG9wIG9m
IHB1YmxpYyBpZ3QgbGliIGNoYW5nZXMgKE1pa2EpCnY4OiByZWJhc2UKdjk6IHNpbXBsaWZ5IGJ5
IHVzaW5nIGJiIGVuZCBhcyBjb25kaXRpb25hbCAoQ2hyaXMpCgpTaWduZWQtb2ZmLWJ5OiBKb24g
Qmxvb21maWVsZCA8am9uLmJsb29tZmllbGRAaW50ZWwuY29tPiAodjIpCkNjOiBKb29uYXMgTGFo
dGluZW4gPGpvb25hcy5sYWh0aW5lbkBpbnRlbC5jb20+CkNjOiBSb2RyaWdvIFZpdmkgPHJvZHJp
Z28udml2aUBpbnRlbC5jb20+CkNjOiBNaWthIEt1b3BwYWxhIDxtaWthLmt1b3BwYWxhQGludGVs
LmNvbT4KU2lnbmVkLW9mZi1ieTogTWlrYSBLdW9wcGFsYSA8bWlrYS5rdW9wcGFsYUBsaW51eC5p
bnRlbC5jb20+Ci0tLQogbGliL2k4MzBfcmVnLmggICAgICAgICAgICAgICAgICAgICAgICAgIHwg
IDIgKy0KIGxpYi9pZ3RfZHVtbXlsb2FkLmMgICAgICAgICAgICAgICAgICAgICB8IDI0ICsrKysr
KysrKysrKysrKysrKysrKysrLQogbGliL2ludGVsX3JlZy5oICAgICAgICAgICAgICAgICAgICAg
ICAgIHwgIDMgKysrCiB0ZXN0cy9pOTE1L2dlbV9kb3VibGVfaXJxX2xvb3AuYyAgICAgICAgfCAg
MiAtLQogdGVzdHMvaTkxNS9nZW1fd3JpdGVfcmVhZF9yaW5nX3N3aXRjaC5jIHwgIDIgKy0KIDUg
ZmlsZXMgY2hhbmdlZCwgMjggaW5zZXJ0aW9ucygrKSwgNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9saWIvaTgzMF9yZWcuaCBiL2xpYi9pODMwX3JlZy5oCmluZGV4IGE1NzY5MWM3ZS4uNDEw
MjAyNTY3IDEwMDY0NAotLS0gYS9saWIvaTgzMF9yZWcuaAorKysgYi9saWIvaTgzMF9yZWcuaApA
QCAtNDMsNyArNDMsNyBAQAogLyogYnJvYWR3YXRlciBmbHVzaCBiaXRzICovCiAjZGVmaW5lIEJS
V19NSV9HTE9CQUxfU05BUFNIT1RfUkVTRVQgICAoMSA8PCAzKQogCi0jZGVmaW5lIE1JX0NPTkRf
QkFUQ0hfQlVGRkVSX0VORAkoMHgzNjw8MjMgfCAxKQorI2RlZmluZSBNSV9DT05EX0JBVENIX0JV
RkZFUl9FTkQJKDB4MzYgPDwgMjMpCiAjZGVmaW5lIE1JX0RPX0NPTVBBUkUJCQkoMTw8MjEpCiAK
ICNkZWZpbmUgTUlfQkFUQ0hfQlVGRkVSX0VORAkoMHhBIDw8IDIzKQpkaWZmIC0tZ2l0IGEvbGli
L2lndF9kdW1teWxvYWQuYyBiL2xpYi9pZ3RfZHVtbXlsb2FkLmMKaW5kZXggYzA3OWJkMDQ1Li45
M2I4YjZiYzYgMTAwNjQ0Ci0tLSBhL2xpYi9pZ3RfZHVtbXlsb2FkLmMKKysrIGIvbGliL2lndF9k
dW1teWxvYWQuYwpAQCAtMjA4LDcgKzIwOCwyOSBAQCBlbWl0X3JlY3Vyc2l2ZV9iYXRjaChpZ3Rf
c3Bpbl90ICpzcGluLAogCSAqIHRyb3VibGUuIFNlZSBodHRwczovL2J1Z3MuZnJlZWRlc2t0b3Au
b3JnL3Nob3dfYnVnLmNnaT9pZD0xMDIyNjIKIAkgKi8KIAlpZiAoIShvcHRzLT5mbGFncyAmIElH
VF9TUElOX0ZBU1QpKQotCQljcyArPSAxMDAwOworCQljcyArPSA5NjA7CisKKwkvKgorCSAqIFdo
ZW4gdXNpbmcgYSBjbWRwYXJzZXIsIHRoZSBiYXRjaCBpcyBjb3BpZWQgaW50byBhIHJlYWQgb25s
eSBsb2NhdGlvbgorCSAqIGFuZCB2YWxpZGF0ZWQuIFdlIGFyZSB0aGVuIHVuYWJsZSB0byBhbHRl
ciB0aGUgZXhlY3V0aW5nIGJhdGNoLAorCSAqIGJyZWFraW5nIHRoZSBvbGRlciAqc3Bpbi0+Y29u
ZGl0aW9uID0gTUlfQkJfRU5EIHRlcm1pbmF0aW9uLgorCSAqIEluc3RlYWQgd2UgY2FuIHVzZSBh
IGNvbmRpdGlvbmFsIE1JX0JCX0VORCBoZXJlIHRoYXQgbG9va3MgYXQKKwkgKiB0aGUgdXNlcidz
IGNvcHkgb2YgdGhlIGJhdGNoIGFuZCB0ZXJtaW5hdGVzIHdoZW4gdGhleSBtb2RpZmllZCBpdC4K
KwkgKi8KKwlpZiAoZ2VuID49IDkpIHsKKwkJciA9ICZyZWxvY3NbYmF0Y2gtPnJlbG9jYXRpb25f
Y291bnQrK107CisKKwkJci0+cHJlc3VtZWRfb2Zmc2V0ID0gMDsKKwkJci0+dGFyZ2V0X2hhbmRs
ZSA9IGJhdGNoLT5oYW5kbGU7CisJCXItPm9mZnNldCA9IChjcyArIDIgLSBiYXRjaF9zdGFydCkg
KiBzaXplb2YoKmNzKTsKKwkJci0+cmVhZF9kb21haW5zID0gSTkxNV9HRU1fRE9NQUlOX0NPTU1B
TkQ7CisJCXItPmRlbHRhID0gKHNwaW4tPmNvbmRpdGlvbiAtIGJhdGNoX3N0YXJ0KSAqIHNpemVv
ZigqY3MpOworCisJCSpjcysrID0gTUlfQ09ORF9CQVRDSF9CVUZGRVJfRU5EIHwgMSA8PCAyMSB8
IDUgPDwgMTIgfCAyOworCQkqY3MrKyA9IE1JX0JBVENIX0JVRkZFUl9FTkQ7CisJCSpjcysrID0g
ci0+ZGVsdGE7CisJCSpjcysrID0gMDsKKwl9CiAKIAkvKiByZWN1cnNlICovCiAJciA9ICZyZWxv
Y3NbYmF0Y2gtPnJlbG9jYXRpb25fY291bnQrK107CmRpZmYgLS1naXQgYS9saWIvaW50ZWxfcmVn
LmggYi9saWIvaW50ZWxfcmVnLmgKaW5kZXggMDY5NDQwY2I3Li4xMGNhNzYwYTIgMTAwNjQ0Ci0t
LSBhL2xpYi9pbnRlbF9yZWcuaAorKysgYi9saWIvaW50ZWxfcmVnLmgKQEAgLTI1OTMsNiArMjU5
Myw5IEBAIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRX
QVJFLgogI2RlZmluZSBNSV9CQVRDSF9CVUZGRVIJCSgoMHgzMCA8PCAyMykgfCAxKQogI2RlZmlu
ZSBNSV9CQVRDSF9CVUZGRVJfU1RBUlQJKDB4MzEgPDwgMjMpCiAjZGVmaW5lIE1JX0JBVENIX0JV
RkZFUl9FTkQJKDB4QSA8PCAyMykKKyNkZWZpbmUgTUlfQ09ORF9CQVRDSF9CVUZGRVJfRU5ECSgw
eDM2IDw8IDIzKQorI2RlZmluZSBNSV9ET19DT01QQVJFICAgICAgICAgICAgICAgICAgICgxPDwy
MSkKKwogI2RlZmluZSBNSV9CQVRDSF9OT05fU0VDVVJFCQkoMSkKICNkZWZpbmUgTUlfQkFUQ0hf
Tk9OX1NFQ1VSRV9JOTY1CSgxIDw8IDgpCiAjZGVmaW5lIE1JX0JBVENIX05PTl9TRUNVUkVfSFNX
CQkoMTw8MTMpIC8qIEFkZGl0aW9uYWwgYml0IGZvciBSQ1MgKi8KZGlmZiAtLWdpdCBhL3Rlc3Rz
L2k5MTUvZ2VtX2RvdWJsZV9pcnFfbG9vcC5jIGIvdGVzdHMvaTkxNS9nZW1fZG91YmxlX2lycV9s
b29wLmMKaW5kZXggYjMyNmZjNThhLi5mMTdmNjFjMTkgMTAwNjQ0Ci0tLSBhL3Rlc3RzL2k5MTUv
Z2VtX2RvdWJsZV9pcnFfbG9vcC5jCisrKyBiL3Rlc3RzL2k5MTUvZ2VtX2RvdWJsZV9pcnFfbG9v
cC5jCkBAIC01Miw4ICs1Miw2IEBAIHN0YXRpYyBkcm1faW50ZWxfYm8gKnRhcmdldF9idWZmZXIs
ICpibHRfYm87CiBJR1RfVEVTVF9ERVNDUklQVElPTigiQmFzaWMgY2hlY2sgZm9yIG1pc3NlZCBJ
UlFzIG9uIGJsdCByaW5nLiIpOwogCiAKLSNkZWZpbmUgTUlfQ09ORF9CQVRDSF9CVUZGRVJfRU5E
CSgweDM2PDwyMyB8IDEpCi0jZGVmaW5lIE1JX0RPX0NPTVBBUkUJCQkoMTw8MjEpCiBzdGF0aWMg
dm9pZAogZHVtbXlfcmVsb2NfbG9vcCh2b2lkKQogewpkaWZmIC0tZ2l0IGEvdGVzdHMvaTkxNS9n
ZW1fd3JpdGVfcmVhZF9yaW5nX3N3aXRjaC5jIGIvdGVzdHMvaTkxNS9nZW1fd3JpdGVfcmVhZF9y
aW5nX3N3aXRjaC5jCmluZGV4IGVmMjI5Y2M1OS4uMDk1YzEzYzM0IDEwMDY0NAotLS0gYS90ZXN0
cy9pOTE1L2dlbV93cml0ZV9yZWFkX3Jpbmdfc3dpdGNoLmMKKysrIGIvdGVzdHMvaTkxNS9nZW1f
d3JpdGVfcmVhZF9yaW5nX3N3aXRjaC5jCkBAIC0xMTUsNyArMTE1LDcgQEAgc3RhdGljIHZvaWQg
cnVuX3Rlc3QoaW50IHJpbmcpCiAJICogb3RoZXJ3aXNlIHRoZSBvYmotPmxhc3Rfd3JpdGVfc2Vx
bm8gd2lsbCBiZSB1cGRhdGVkLiAqLwogCWlmIChyaW5nID09IEk5MTVfRVhFQ19SRU5ERVIpIHsK
IAkJQkVHSU5fQkFUQ0goNCwgMSk7Ci0JCU9VVF9CQVRDSChNSV9DT05EX0JBVENIX0JVRkZFUl9F
TkQgfCBNSV9ET19DT01QQVJFKTsKKwkJT1VUX0JBVENIKE1JX0NPTkRfQkFUQ0hfQlVGRkVSX0VO
RCB8IE1JX0RPX0NPTVBBUkUgfCAxKTsKIAkJT1VUX0JBVENIKDB4ZmZmZmZmZmYpOyAvKiBjb21w
YXJlIGR3b3JkICovCiAJCU9VVF9SRUxPQyh0YXJnZXRfYm8sIEk5MTVfR0VNX0RPTUFJTl9SRU5E
RVIsIDAsIDApOwogCQlPVVRfQkFUQ0goTUlfTk9PUCk7Ci0tIAoyLjI0LjAKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxp
c3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

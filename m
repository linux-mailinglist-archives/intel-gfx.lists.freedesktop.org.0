Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 572B53A61D3
	for <lists+intel-gfx@lfdr.de>; Mon, 14 Jun 2021 12:50:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BAE7D89CBA;
	Mon, 14 Jun 2021 10:50:13 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-qk1-x731.google.com (mail-qk1-x731.google.com
 [IPv6:2607:f8b0:4864:20::731])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6932B89B95;
 Mon, 14 Jun 2021 10:50:12 +0000 (UTC)
Received: by mail-qk1-x731.google.com with SMTP id d196so32713040qkg.12;
 Mon, 14 Jun 2021 03:50:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=7s8ryIzmiumhjI8BImo15YNEU5n0b+TjhzH3KHNjY3I=;
 b=BK//MRlqSnbLJukhI2CVLaNmtfOYMwc+WpMa6elK/FjYGAB3rfix/IK7zsmCGzaPPb
 biJt4wPjiip0RHVknffa+eJWcj59kLmq5iYQaIlTqyJqq0t0mPMG/Ed+GnJ4ZenYrI93
 6hDMzeSW0w+U/dKcMBKaA6YymqmMraeGE64J+DjyjKTGVCtAnVnuwXpe/SxygzDllThu
 /uRx3YOv4xdHmzy3Q8Y2XyDn6/JLLSe/GEpyfEpIgU9dtl+2oEPTyQqog3OFQa/2t/O4
 wE/35A48300msJ3F9eB2KfGhreyLXEWtF72g17+4BA/lhheDXqa0K01H5JwjZS0wpAka
 s/Bw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=7s8ryIzmiumhjI8BImo15YNEU5n0b+TjhzH3KHNjY3I=;
 b=gWnXbVz5IKcLJs1KQT8lxZ13i/57nCKOWZvWVO8YWeNh+JtVB3hjFQSPpHBz03kVwg
 syVA/hvTfdLdgLCKES+S4a47YDy+smbSwIuY684ZOAyFivzdUMMuyQ/DLIkSjChdYn4r
 SjjqsAbLPNERJ2XKeoEUsmPnRSpQd7BSR5rzqeI9KByUYaNKWGjtqKQCO728MjA5ucii
 P9T8hWRzQyqaDbzeexpSj+cSHZsc7OPQvxggLR4fDNfAHxjnr/HgIRaGdPtM+es8Xn00
 Oe5rzRHuwbaxg464hFQbzr8R6cHfGWNWqa5vo4/JOL0EOTcCkKHhT1jz6ezJ8JstJ0/t
 jGbw==
X-Gm-Message-State: AOAM5333uWs0qV93sdXR+qU+BhqgKJq35/4ZnEhJFaIQwWQb8xJMYIk1
 tqsJ3iirnEb7jzd/eo5F26PkOB77EeBcnh/VkKo=
X-Google-Smtp-Source: ABdhPJwsgfFgXSpxVtxuhSQMRIsFz5hBQeLY5Cvmb54qGYCgvfYSaDaivbO7OGGgcOYIFTSgC9n3ashExFDNwcjbSjI=
X-Received: by 2002:a05:620a:228b:: with SMTP id
 o11mr15334747qkh.426.1623667811448; 
 Mon, 14 Jun 2021 03:50:11 -0700 (PDT)
MIME-Version: 1.0
References: <20210614095230.126284-1-thomas.hellstrom@linux.intel.com>
 <20210614095230.126284-3-thomas.hellstrom@linux.intel.com>
 <CAM0jSHPN3EKwy+FiBRs2PaFrx6DfxC7p62rjApVVAzQXXB23qQ@mail.gmail.com>
 <3bfa6eda-ea69-d331-76c7-f8eb5de1ac20@linux.intel.com>
In-Reply-To: <3bfa6eda-ea69-d331-76c7-f8eb5de1ac20@linux.intel.com>
From: Matthew Auld <matthew.william.auld@gmail.com>
Date: Mon, 14 Jun 2021 11:49:44 +0100
Message-ID: <CAM0jSHPP90Gu1Trq3jHiTh+4AiDWotAizthkTJZa=PBadWLz+A@mail.gmail.com>
To: =?UTF-8?Q?Thomas_Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>
Subject: Re: [Intel-gfx] [PATCH v3 2/4] drm/i915/ttm: Adjust gem flags and
 caching settings after a move
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Matthew Auld <matthew.auld@intel.com>,
 ML dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gTW9uLCAxNCBKdW4gMjAyMSBhdCAxMTozMiwgVGhvbWFzIEhlbGxzdHLDtm0KPHRob21hcy5o
ZWxsc3Ryb21AbGludXguaW50ZWwuY29tPiB3cm90ZToKPgo+Cj4gT24gNi8xNC8yMSAxMjoyMCBQ
TSwgTWF0dGhldyBBdWxkIHdyb3RlOgo+ID4gT24gTW9uLCAxNCBKdW4gMjAyMSBhdCAxMDo1Mywg
VGhvbWFzIEhlbGxzdHLDtm0KPiA+IDx0aG9tYXMuaGVsbHN0cm9tQGxpbnV4LmludGVsLmNvbT4g
d3JvdGU6Cj4gPj4gQWZ0ZXIgYSBUVE0gbW92ZSBvciBvYmplY3QgaW5pdCB3ZSBuZWVkIHRvIHVw
ZGF0ZSB0aGUgaTkxNSBnZW0gZmxhZ3MgYW5kCj4gPj4gY2FjaGluZyBzZXR0aW5ncyB0byByZWZs
ZWN0IHRoZSBuZXcgcGxhY2VtZW50LiBDdXJyZW50bHkgY2FjaGluZyBzZXR0aW5ncwo+ID4+IGFy
ZSBub3QgY2hhbmdlZCBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIGFuIG9iamVjdCwgYWx0aG91Z2gg
dGhhdCBtaWdodAo+ID4+IGNoYW5nZSBtb3ZpbmcgZm9yd2FyZCBpZiB3ZSBydW4gaW50byBwZXJm
b3JtYW5jZSBpc3N1ZXMgb3IgaXNzdWVzIHdpdGgKPiA+PiBXQyBzeXN0ZW0gcGFnZSBhbGxvY2F0
aW9ucy4KPiA+PiBBbHNvIGludHJvZHVjZSBncHVfYmluZHNfaW9tZW0oKSBhbmQgY3B1X21hcHNf
aW9tZW0oKSB0byBjbGVhbiB1cCB0aGUKPiA+PiB2YXJpb3VzIHdheXMgd2UgcHJldmlvdXNseSB1
c2VkIHRvIGRldGVjdCB0aGlzLgo+ID4+IEZpbmFsbHksIGluaXRpYWxpemUgdGhlIFRUTSBvYmpl
Y3QgcmVzZXJ2ZWQgdG8gYmUgYWJsZSB0byB1cGRhdGUKPiA+PiBmbGFncyBhbmQgY2FjaGluZyBi
ZWZvcmUgYW55b25lIGVsc2UgZ2V0cyBob2xkIG9mIHRoZSBvYmplY3QuCj4gPj4KPiA+PiBTaWdu
ZWQtb2ZmLWJ5OiBUaG9tYXMgSGVsbHN0csO2bSA8dGhvbWFzLmhlbGxzdHJvbUBsaW51eC5pbnRl
bC5jb20+Cj4gPj4gLS0tCj4gPj4gdjI6Cj4gPj4gLSBTdHlsZSBmaXhlcyAoUmVwb3J0ZWQgYnkg
TWF0dGhldyBBdWxkKQo+ID4+IHYzOgo+ID4+IC0gTW9yZSBzdHlsZSBmaXhlcy4gQ2xhcmlmeSB3
aHkgd2UncmUgdXBkYXRpbmcgY2FjaGluZyBzZXR0aW5ncyBhZnRlciBtb3ZlLgo+ID4+ICAgIChT
dWdnZXN0ZWQgYnkgTWF0dGhldyBBdWxkKQo+ID4+IC0tLQo+ID4+ICAgZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL2k5MTVfZ2VtX3R0bS5jIHwgMTExICsrKysrKysrKysrKysrKysrKystLS0tLQo+
ID4+ICAgMSBmaWxlIGNoYW5nZWQsIDg5IGluc2VydGlvbnMoKyksIDIyIGRlbGV0aW9ucygtKQo+
ID4+Cj4gPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90
dG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90dG0uYwo+ID4+IGluZGV4
IDMzYWI0N2YxZTA1Yi4uNTE3NjY4MmE3ZDE5IDEwMDY0NAo+ID4+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90dG0uYwo+ID4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV90dG0uYwo+ID4+IEBAIC03MCw2ICs3MCwxNyBAQCBzdGF0aWMgc3Ry
dWN0IHR0bV9wbGFjZW1lbnQgaTkxNV9zeXNfcGxhY2VtZW50ID0gewo+ID4+ICAgICAgICAgIC5i
dXN5X3BsYWNlbWVudCA9ICZsbWVtMF9zeXNfcGxhY2VtZW50X2ZsYWdzWzFdLAo+ID4+ICAgfTsK
PiA+Pgo+ID4+ICtzdGF0aWMgYm9vbCBncHVfYmluZHNfaW9tZW0oc3RydWN0IHR0bV9yZXNvdXJj
ZSAqbWVtKQo+ID4+ICt7Cj4gPj4gKyAgICAgICByZXR1cm4gbWVtLT5tZW1fdHlwZSAhPSBUVE1f
UExfU1lTVEVNOwo+ID4+ICt9Cj4gPj4gKwo+ID4+ICtzdGF0aWMgYm9vbCBjcHVfbWFwc19pb21l
bShzdHJ1Y3QgdHRtX3Jlc291cmNlICptZW0pCj4gPj4gK3sKPiA+PiArICAgICAgIC8qIE9uY2Ug
LyBpZiB3ZSBzdXBwb3J0IEdHVFQsIHRoaXMgaXMgYWxzbyBmYWxzZSBmb3IgY2FjaGVkIHR0bV90
dHMgKi8KPiA+PiArICAgICAgIHJldHVybiBtZW0tPm1lbV90eXBlICE9IFRUTV9QTF9TWVNURU07
Cj4gPj4gK30KPiA+PiArCj4gPj4gICBzdGF0aWMgdm9pZCBpOTE1X3R0bV9hZGp1c3RfbHJ1KHN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopOwo+ID4+Cj4gPj4gICBzdGF0aWMgc3RydWN0
IHR0bV90dCAqaTkxNV90dG1fdHRfY3JlYXRlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8s
Cj4gPj4gQEAgLTE3NSw2ICsxODYsNDAgQEAgc3RhdGljIHZvaWQgaTkxNV90dG1fZnJlZV9jYWNo
ZWRfaW9fc3Qoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKPiA+PiAgICAgICAgICBv
YmotPnR0bS5jYWNoZWRfaW9fc3QgPSBOVUxMOwo+ID4+ICAgfQo+ID4+Cj4gPj4gK3N0YXRpYyB2
b2lkCj4gPj4gK2k5MTVfdHRtX2FkanVzdF9kb21haW5zX2FmdGVyX2NwdV9tb3ZlKHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCj4gPj4gK3sKPiA+PiArICAgICAgIHN0cnVjdCB0dG1f
YnVmZmVyX29iamVjdCAqYm8gPSBpOTE1X2dlbV90b190dG0ob2JqKTsKPiA+PiArCj4gPj4gKyAg
ICAgICBpZiAoY3B1X21hcHNfaW9tZW0oYm8tPnJlc291cmNlKSB8fCBiby0+dHRtLT5jYWNoaW5n
ICE9IHR0bV9jYWNoZWQpIHsKPiA+PiArICAgICAgICAgICAgICAgb2JqLT53cml0ZV9kb21haW4g
PSBJOTE1X0dFTV9ET01BSU5fV0M7Cj4gPj4gKyAgICAgICAgICAgICAgIG9iai0+cmVhZF9kb21h
aW5zID0gSTkxNV9HRU1fRE9NQUlOX1dDOwo+ID4+ICsgICAgICAgfSBlbHNlIHsKPiA+PiArICAg
ICAgICAgICAgICAgb2JqLT53cml0ZV9kb21haW4gPSBJOTE1X0dFTV9ET01BSU5fQ1BVOwo+ID4+
ICsgICAgICAgICAgICAgICBvYmotPnJlYWRfZG9tYWlucyA9IEk5MTVfR0VNX0RPTUFJTl9DUFU7
Cj4gPj4gKyAgICAgICB9Cj4gPj4gK30KPiA+PiArCj4gPj4gK3N0YXRpYyB2b2lkIGk5MTVfdHRt
X2FkanVzdF9nZW1fYWZ0ZXJfbW92ZShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQo+
ID4+ICt7Cj4gPj4gKyAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5
MTUob2JqLT5iYXNlLmRldik7Cj4gPj4gKyAgICAgICBzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3Qg
KmJvID0gaTkxNV9nZW1fdG9fdHRtKG9iaik7Cj4gPj4gKyAgICAgICB1bnNpZ25lZCBpbnQgY2Fj
aGVfbGV2ZWw7Cj4gPj4gKwo+ID4+ICsgICAgICAgb2JqLT5tZW1fZmxhZ3MgJj0gfihJOTE1X0JP
X0ZMQUdfU1RSVUNUX1BBR0UgfCBJOTE1X0JPX0ZMQUdfSU9NRU0pOwo+ID4+ICsKPiA+PiArICAg
ICAgIG9iai0+bWVtX2ZsYWdzIHw9IGNwdV9tYXBzX2lvbWVtKGJvLT5yZXNvdXJjZSkgPyBJOTE1
X0JPX0ZMQUdfSU9NRU0gOgo+ID4+ICsgICAgICAgICAgICAgICBJOTE1X0JPX0ZMQUdfU1RSVUNU
X1BBR0U7Cj4gPj4gKwo+ID4+ICsgICAgICAgaWYgKChIQVNfTExDKGk5MTUpIHx8IEhBU19TTk9P
UChpOTE1KSkgJiYgIWdwdV9iaW5kc19pb21lbShiby0+cmVzb3VyY2UpICYmCj4gPj4gKyAgICAg
ICAgICAgYm8tPnR0bS0+Y2FjaGluZyA9PSB0dG1fY2FjaGVkKQo+ID4+ICsgICAgICAgICAgICAg
ICBjYWNoZV9sZXZlbCA9IEk5MTVfQ0FDSEVfTExDOwo+ID4+ICsgICAgICAgZWxzZQo+ID4+ICsg
ICAgICAgICAgICAgICBjYWNoZV9sZXZlbCA9IEk5MTVfQ0FDSEVfTk9ORTsKPiA+PiArCj4gPj4g
KyAgICAgICBpOTE1X2dlbV9vYmplY3Rfc2V0X2NhY2hlX2NvaGVyZW5jeShvYmosIGNhY2hlX2xl
dmVsKTsKPiA+PiArfQo+ID4+ICsKPiA+PiAgIHN0YXRpYyB2b2lkIGk5MTVfdHRtX3B1cmdlKHN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCj4gPj4gICB7Cj4gPj4gICAgICAgICAgc3Ry
dWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibyA9IGk5MTVfZ2VtX3RvX3R0bShvYmopOwo+ID4+IEBA
IC0xOTAsOCArMjM1LDEwIEBAIHN0YXRpYyB2b2lkIGk5MTVfdHRtX3B1cmdlKHN0cnVjdCBkcm1f
aTkxNV9nZW1fb2JqZWN0ICpvYmopCj4gPj4KPiA+PiAgICAgICAgICAvKiBUVE0ncyBwdXJnZSBp
bnRlcmZhY2UuIE5vdGUgdGhhdCB3ZSBtaWdodCBiZSByZWVudGVyaW5nLiAqLwo+ID4+ICAgICAg
ICAgIHJldCA9IHR0bV9ib192YWxpZGF0ZShibywgJnBsYWNlLCAmY3R4KTsKPiA+PiAtCj4gPj4g
ICAgICAgICAgaWYgKCFyZXQpIHsKPiA+PiArICAgICAgICAgICAgICAgb2JqLT53cml0ZV9kb21h
aW4gPSAwOwo+ID4+ICsgICAgICAgICAgICAgICBvYmotPnJlYWRfZG9tYWlucyA9IDA7Cj4gPj4g
KyAgICAgICAgICAgICAgIGk5MTVfdHRtX2FkanVzdF9nZW1fYWZ0ZXJfbW92ZShvYmopOwo+ID4+
ICAgICAgICAgICAgICAgICAgaTkxNV90dG1fZnJlZV9jYWNoZWRfaW9fc3Qob2JqKTsKPiA+PiAg
ICAgICAgICAgICAgICAgIG9iai0+bW0ubWFkdiA9IF9fSTkxNV9NQURWX1BVUkdFRDsKPiA+PiAg
ICAgICAgICB9Cj4gPj4gQEAgLTI3MywxMiArMzIwLDE1IEBAIGk5MTVfdHRtX3Jlc291cmNlX2dl
dF9zdChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAo+ID4+ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc3RydWN0IHR0bV9yZXNvdXJjZSAqcmVzKQo+ID4+ICAgewo+ID4+ICAgICAg
ICAgIHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8gPSBpOTE1X2dlbV90b190dG0ob2JqKTsK
PiA+PiAtICAgICAgIHN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAqbWFuID0KPiA+PiAtICAg
ICAgICAgICAgICAgdHRtX21hbmFnZXJfdHlwZShiby0+YmRldiwgcmVzLT5tZW1fdHlwZSk7Cj4g
Pj4KPiA+PiAtICAgICAgIGlmIChtYW4tPnVzZV90dCkKPiA+PiArICAgICAgIGlmICghZ3B1X2Jp
bmRzX2lvbWVtKHJlcykpCj4gPj4gICAgICAgICAgICAgICAgICByZXR1cm4gaTkxNV90dG1fdHRf
Z2V0X3N0KGJvLT50dG0pOwo+ID4+Cj4gPj4gKyAgICAgICAvKgo+ID4+ICsgICAgICAgICogSWYg
Q1BVIG1hcHBpbmcgZGlmZmVycywgd2UgbmVlZCB0byBhZGQgdGhlIHR0bV90dCBwYWdlcyB0bwo+
ID4+ICsgICAgICAgICogdGhlIHJlc3VsdGluZyBzdC4gTWlnaHQgbWFrZSBzZW5zZSBmb3IgR0dU
VC4KPiA+PiArICAgICAgICAqLwo+ID4+ICsgICAgICAgR0VNX1dBUk5fT04oIWNwdV9tYXBzX2lv
bWVtKHJlcykpOwo+ID4+ICAgICAgICAgIHJldHVybiBpbnRlbF9yZWdpb25fdHRtX25vZGVfdG9f
c3Qob2JqLT5tbS5yZWdpb24sIHJlcyk7Cj4gPj4gICB9Cj4gPj4KPiA+PiBAQCAtMjkwLDggKzM0
MCw2IEBAIHN0YXRpYyBpbnQgaTkxNV90dG1fbW92ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3Qg
KmJvLCBib29sIGV2aWN0LAo+ID4+ICAgICAgICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmogPSBpOTE1X3R0bV90b19nZW0oYm8pOwo+ID4+ICAgICAgICAgIHN0cnVjdCB0dG1fcmVz
b3VyY2VfbWFuYWdlciAqZHN0X21hbiA9Cj4gPj4gICAgICAgICAgICAgICAgICB0dG1fbWFuYWdl
cl90eXBlKGJvLT5iZGV2LCBkc3RfbWVtLT5tZW1fdHlwZSk7Cj4gPj4gLSAgICAgICBzdHJ1Y3Qg
dHRtX3Jlc291cmNlX21hbmFnZXIgKnNyY19tYW4gPQo+ID4+IC0gICAgICAgICAgICAgICB0dG1f
bWFuYWdlcl90eXBlKGJvLT5iZGV2LCBiby0+cmVzb3VyY2UtPm1lbV90eXBlKTsKPiA+PiAgICAg
ICAgICBzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbiAqZHN0X3JlZywgKnNyY19yZWc7Cj4gPj4g
ICAgICAgICAgdW5pb24gewo+ID4+ICAgICAgICAgICAgICAgICAgc3RydWN0IHR0bV9rbWFwX2l0
ZXJfdHQgdHQ7Cj4gPj4gQEAgLTMzMiwzNCArMzgwLDM2IEBAIHN0YXRpYyBpbnQgaTkxNV90dG1f
bW92ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBib29sIGV2aWN0LAo+ID4+ICAgICAg
ICAgIGlmIChJU19FUlIoZHN0X3N0KSkKPiA+PiAgICAgICAgICAgICAgICAgIHJldHVybiBQVFJf
RVJSKGRzdF9zdCk7Cj4gPj4KPiA+PiAtICAgICAgIC8qIElmIHdlIHN0YXJ0IG1hcHBpbmcgR0dU
VCwgd2UgY2FuIG5vIGxvbmdlciB1c2UgbWFuOjp1c2VfdHQgaGVyZS4gKi8KPiA+PiAtICAgICAg
IGRzdF9pdGVyID0gZHN0X21hbi0+dXNlX3R0ID8KPiA+PiArICAgICAgIGRzdF9pdGVyID0gIWNw
dV9tYXBzX2lvbWVtKGRzdF9tZW0pID8KPiA+PiAgICAgICAgICAgICAgICAgIHR0bV9rbWFwX2l0
ZXJfdHRfaW5pdCgmX2RzdF9pdGVyLnR0LCBiby0+dHRtKSA6Cj4gPj4gICAgICAgICAgICAgICAg
ICB0dG1fa21hcF9pdGVyX2lvbWFwX2luaXQoJl9kc3RfaXRlci5pbywgJmRzdF9yZWctPmlvbWFw
LAo+ID4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzdF9zdCwg
ZHN0X3JlZy0+cmVnaW9uLnN0YXJ0KTsKPiA+Pgo+ID4+IC0gICAgICAgc3JjX2l0ZXIgPSBzcmNf
bWFuLT51c2VfdHQgPwo+ID4+ICsgICAgICAgc3JjX2l0ZXIgPSAhY3B1X21hcHNfaW9tZW0oYm8t
PnJlc291cmNlKSA/Cj4gPj4gICAgICAgICAgICAgICAgICB0dG1fa21hcF9pdGVyX3R0X2luaXQo
Jl9zcmNfaXRlci50dCwgYm8tPnR0bSkgOgo+ID4+ICAgICAgICAgICAgICAgICAgdHRtX2ttYXBf
aXRlcl9pb21hcF9pbml0KCZfc3JjX2l0ZXIuaW8sICZzcmNfcmVnLT5pb21hcCwKPiA+PiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmotPnR0bS5jYWNoZWRfaW9f
c3QsCj4gPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjX3Jl
Zy0+cmVnaW9uLnN0YXJ0KTsKPiA+Pgo+ID4+ICAgICAgICAgIHR0bV9tb3ZlX21lbWNweShibywg
ZHN0X21lbS0+bnVtX3BhZ2VzLCBkc3RfaXRlciwgc3JjX2l0ZXIpOwo+ID4+ICsgICAgICAgLyog
QmVsb3cgZHN0X21lbSBiZWNvbWVzIGJvLT5yZXNvdXJjZS4gKi8KPiA+PiAgICAgICAgICB0dG1f
Ym9fbW92ZV9zeW5jX2NsZWFudXAoYm8sIGRzdF9tZW0pOwo+ID4+ICsgICAgICAgaTkxNV90dG1f
YWRqdXN0X2RvbWFpbnNfYWZ0ZXJfY3B1X21vdmUob2JqKTsKPiA+PiAgICAgICAgICBpOTE1X3R0
bV9mcmVlX2NhY2hlZF9pb19zdChvYmopOwo+ID4+Cj4gPj4gLSAgICAgICBpZiAoIWRzdF9tYW4t
PnVzZV90dCkgewo+ID4+ICsgICAgICAgaWYgKGdwdV9iaW5kc19pb21lbShkc3RfbWVtKSB8fCBj
cHVfbWFwc19pb21lbShkc3RfbWVtKSkgewo+ID4+ICAgICAgICAgICAgICAgICAgb2JqLT50dG0u
Y2FjaGVkX2lvX3N0ID0gZHN0X3N0Owo+ID4+ICAgICAgICAgICAgICAgICAgb2JqLT50dG0uZ2V0
X2lvX3BhZ2Uuc2dfcG9zID0gZHN0X3N0LT5zZ2w7Cj4gPj4gICAgICAgICAgICAgICAgICBvYmot
PnR0bS5nZXRfaW9fcGFnZS5zZ19pZHggPSAwOwo+ID4+ICAgICAgICAgIH0KPiA+Pgo+ID4+ICsg
ICAgICAgaTkxNV90dG1fYWRqdXN0X2dlbV9hZnRlcl9tb3ZlKG9iaik7Cj4gPj4gICAgICAgICAg
cmV0dXJuIDA7Cj4gPj4gICB9Cj4gPj4KPiA+PiAgIHN0YXRpYyBpbnQgaTkxNV90dG1faW9fbWVt
X3Jlc2VydmUoc3RydWN0IHR0bV9kZXZpY2UgKmJkZXYsIHN0cnVjdCB0dG1fcmVzb3VyY2UgKm1l
bSkKPiA+PiAgIHsKPiA+PiAtICAgICAgIGlmIChtZW0tPm1lbV90eXBlIDwgSTkxNV9QTF9MTUVN
MCkKPiA+PiArICAgICAgIGlmICghY3B1X21hcHNfaW9tZW0obWVtKSkKPiA+PiAgICAgICAgICAg
ICAgICAgIHJldHVybiAwOwo+ID4+Cj4gPj4gICAgICAgICAgbWVtLT5idXMuY2FjaGluZyA9IHR0
bV93cml0ZV9jb21iaW5lZDsKPiA+PiBAQCAtNDIxLDYgKzQ3MSwxNiBAQCBzdGF0aWMgaW50IGk5
MTVfdHRtX2dldF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQo+ID4+ICAg
ICAgICAgIGlmIChyZXQpCj4gPj4gICAgICAgICAgICAgICAgICByZXR1cm4gcmV0ID09IC1FTk9T
UEMgPyAtRU5YSU8gOiByZXQ7Cj4gPj4KPiA+PiArICAgICAgIGk5MTVfdHRtX2FkanVzdF9scnUo
b2JqKTsKPiA+PiArICAgICAgIGlmIChiby0+dHRtICYmICF0dG1fdHRfaXNfcG9wdWxhdGVkKGJv
LT50dG0pKSB7Cj4gPj4gKyAgICAgICAgICAgICAgIHJldCA9IHR0bV90dF9wb3B1bGF0ZShiby0+
YmRldiwgYm8tPnR0bSwgJmN0eCk7Cj4gPj4gKyAgICAgICAgICAgICAgIGlmIChyZXQpCj4gPj4g
KyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+PiArCj4gPj4gKyAgICAgICAg
ICAgICAgIGk5MTVfdHRtX2FkanVzdF9kb21haW5zX2FmdGVyX2NwdV9tb3ZlKG9iaik7Cj4gPj4g
KyAgICAgICAgICAgICAgIGk5MTVfdHRtX2FkanVzdF9nZW1fYWZ0ZXJfbW92ZShvYmopOwo+ID4+
ICsgICAgICAgfQo+ID4+ICsKPiA+PiAgICAgICAgICAvKiBPYmplY3QgZWl0aGVyIGhhcyBhIHBh
Z2UgdmVjdG9yIG9yIGlzIGFuIGlvbWVtIG9iamVjdCAqLwo+ID4+ICAgICAgICAgIHN0ID0gYm8t
PnR0bSA/IGk5MTVfdHRtX3R0X2dldF9zdChiby0+dHRtKSA6IG9iai0+dHRtLmNhY2hlZF9pb19z
dDsKPiA+PiAgICAgICAgICBpZiAoSVNfRVJSKHN0KSkKPiA+PiBAQCAtNDI4LDggKzQ4OCw2IEBA
IHN0YXRpYyBpbnQgaTkxNV90dG1fZ2V0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmopCj4gPj4KPiA+PiAgICAgICAgICBfX2k5MTVfZ2VtX29iamVjdF9zZXRfcGFnZXMob2Jq
LCBzdCwgaTkxNV9zZ19kbWFfc2l6ZXMoc3QtPnNnbCkpOwo+ID4+Cj4gPj4gLSAgICAgICBpOTE1
X3R0bV9hZGp1c3RfbHJ1KG9iaik7Cj4gPj4gLQo+ID4+ICAgICAgICAgIHJldHVybiByZXQ7Cj4g
Pj4gICB9Cj4gPj4KPiA+PiBAQCAtNTYzLDYgKzYyMSw3IEBAIHN0YXRpYyB1NjQgaTkxNV90dG1f
bW1hcF9vZmZzZXQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKPiA+Pgo+ID4+ICAg
Y29uc3Qgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Rfb3BzIGk5MTVfZ2VtX3R0bV9vYmpfb3Bz
ID0gewo+ID4+ICAgICAgICAgIC5uYW1lID0gImk5MTVfZ2VtX29iamVjdF90dG0iLAo+ID4+ICsg
ICAgICAgLmZsYWdzID0gSTkxNV9HRU1fT0JKRUNUX0lTX1NIUklOS0FCTEUsCj4gPiBXZSBzZXQg
aXNfc2hyaW5rYWJsZSBmb3IgYm90aCBsbWVtIGFuZCBzbWVtPyBEb2VzIHRoZSBjdXJyZW50IHNo
cmlua2VyCj4gPiB3b3JrIHdpdGggIXNobWVtPyBJIGFzc3VtZSB0aGUgcHV0X3BhZ2VzKCkgd2ls
bCBqdXN0IGRpc2NhcmQgdGhlIHBhZ2UKPiA+IGNvbnRlbnRzLCB3aGljaCBpcyBub3Qgd2hhdCB3
ZSB3YW50PyBNYXliZSBrZWVwIHRoaXMgZGlzYWJsZWQgZm9yIG5vdz8KPiA+IE9yIGFtIEkgbWlz
c2luZyBzb21ldGhpbmc/Cj4KPiBUaGlzIGlzIHRvIGluZGljYXRlIHRvIHRoZSBnZW0gc2hyaW5r
ZXIgdGhhdCB3ZSB3YW50IHRvIGJlIGFibGUgdG8KPiBkZXRlcm1pbmUgZHluYW1pY2FsbHkgd2hl
dGhlciB0aGUgb2JqZWN0IGlzIHNocmlua2FibGUgKGJ5IHRoZSBnZW0KPiBzaHJpbmtlcikgb3Ig
bm90LiAoU2VlIGJlbG93KS4gSXQncyBpbnRlbmRlZCBmb3IgdGhlIHNpdHVhdGlvbiB3aGVyZSB3
ZQo+IG1pZ2h0IHdhbnQgdG8gdXNlIHNobWVtIHRvIGJhY2sgY2FjaGVkLW9ubHkgdHRtIG9iamVj
dHMsIGFuZCB1c2Ugb3VyIG93bgo+IHNocmlua2VyLgo+Cj4gQnV0IGlmIHlvdSB0aGluayBpdCdz
IGJldHRlciwgd2UgY291bGQgZmxpcCB0aGF0IG9wcyBmbGFnIG9uY2Ugd2UKPiBhY3R1YWxseSBo
YXZlIGFueXRoaW5nIHNocmlua2FibGUgaW4gcGxhY2UuIExldCBtZSBrbm93IHdoYXQgeW91IHRo
aW5rLgo+IFRoZSBUVE0gc2htZW0gcG9vbCBpZGVhIGJlY29tZXMgYSBiaXQgZG91YnRmdWwgYnkg
dGhlIGZhY3QgdGhhdAo+IGFsbG9jYXRpbmcgc29tZSA4R0Igb2Ygc3lzdGVtIG9iamVjdHMsIHBv
cHVsYXRpbmcgYW5kIGNsZWFyaW5nIHRoZW0KPiBhcHBlYXJzIHRvIGJlIHNvbWUgNlggZmFzdGVy
IHdpdGggYSBzdHJhaWdodGZvcndhcmQgYWxsb2MgYXBwcm9hY2ggKGxpa2UKPiBUVE0gb3IgdGhl
ICJpbnRlcm5hbCIgYmFja2VuZCkgdGhhbiB3aXRoIHNobWVtLi4uCgpJIHdvdWxkIHZvdGUgZm9y
IGtlZXBpbmcgaXQgdHVybmVkIG9mZiBmb3Igbm93LgoKPgo+ID4+ICAgICAgICAgIC5nZXRfcGFn
ZXMgPSBpOTE1X3R0bV9nZXRfcGFnZXMsCj4gPj4gICAgICAgICAgLnB1dF9wYWdlcyA9IGk5MTVf
dHRtX3B1dF9wYWdlcywKPiA+PiBAQCAtNTk5LDYgKzY1OCwxMCBAQCBpbnQgX19pOTE1X2dlbV90
dG1fb2JqZWN0X2luaXQoc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbSwKPiA+PiAgIHsK
PiA+PiAgICAgICAgICBzdGF0aWMgc3RydWN0IGxvY2tfY2xhc3Nfa2V5IGxvY2tfY2xhc3M7Cj4g
Pj4gICAgICAgICAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBtZW0tPmk5MTU7Cj4g
Pj4gKyAgICAgICBzdHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHggY3R4ID0gewo+ID4+ICsgICAgICAg
ICAgICAgICAuaW50ZXJydXB0aWJsZSA9IHRydWUsCj4gPj4gKyAgICAgICAgICAgICAgIC5ub193
YWl0X2dwdSA9IGZhbHNlLAo+ID4+ICsgICAgICAgfTsKPiA+PiAgICAgICAgICBlbnVtIHR0bV9i
b190eXBlIGJvX3R5cGU7Cj4gPj4gICAgICAgICAgc2l6ZV90IGFsaWdubWVudCA9IDA7Cj4gPj4g
ICAgICAgICAgaW50IHJldDsKPiA+PiBAQCAtNjE4LDE1ICs2ODEsMTQgQEAgaW50IF9faTkxNV9n
ZW1fdHRtX29iamVjdF9pbml0KHN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICptZW0sCj4gPj4g
ICAgICAgICAgaTkxNV9nZW1fb2JqZWN0X2luaXQob2JqLCAmaTkxNV9nZW1fdHRtX29ial9vcHMs
ICZsb2NrX2NsYXNzLCBmbGFncyk7Cj4gPj4gICAgICAgICAgaTkxNV9nZW1fb2JqZWN0X2luaXRf
bWVtb3J5X3JlZ2lvbihvYmosIG1lbSk7Cj4gPj4gICAgICAgICAgaTkxNV9nZW1fb2JqZWN0X21h
a2VfdW5zaHJpbmthYmxlKG9iaik7Cj4KPiBIZXJlIHdlIHNldCB0aGUgb2JqZWN0IHRvIHVuc2hy
aW5rYWJsZS4KCk9oLCBJIHRvdGFsbHkgbWlzc2VkIHRoYXQuIEJ1dCBJIGRvbid0IHRoaW5rIHdl
IGFyZSBtZWFudCB0byBjYWxsIHRoYXQKaGVyZSwgZXNwZWNpYWxseSB3aXRoIElTX1NIUklOS0FC
TEUsIHNpbmNlIG9iamVjdF9zZXRfcGFnZXMgd2lsbCBsYXRlcgptYWtlIGl0IHNocmlua2FibGUg
YW55d2F5LCB3aGljaCBsb29rcyBsaWtlIGZ1biBhbmQgZ2FtZXMuCgo+Cj4gL1Rob21hcwo+Cj4K
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4
IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3CB2C51876
	for <lists+intel-gfx@lfdr.de>; Mon, 24 Jun 2019 18:23:28 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id ED9AF89CF6;
	Mon, 24 Jun 2019 16:23:24 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 40FA589CF1;
 Mon, 24 Jun 2019 16:23:23 +0000 (UTC)
Received: from submarine.cbg.collabora.co.uk (unknown
 [IPv6:2a00:5f00:102:0:6dae:eb08:2e0f:5281])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested) (Authenticated sender: gtucker)
 by bhuna.collabora.co.uk (Postfix) with ESMTPSA id 1512B287D10;
 Mon, 24 Jun 2019 17:23:22 +0100 (BST)
From: Guillaume Tucker <guillaume.tucker@collabora.com>
To: Arkadiusz Hiler <arkadiusz.hiler@intel.com>,
 Petri Latvala <petri.latvala@intel.com>, "Ser, Simon" <simon.ser@intel.com>
Date: Mon, 24 Jun 2019 17:22:35 +0100
Message-Id: <75b02ab7448852c56a86edbf03891af27abc62d4.1561393147.git.guillaume.tucker@collabora.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1561393147.git.guillaume.tucker@collabora.com>
References: <cover.1561393147.git.guillaume.tucker@collabora.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t v4 3/4] i915/gem_create: use atomic_*
 instead of __sync_*
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org, intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhpcyBmaXhlcyBidWlsZHMgb24gc29tZSBhcmNoaXRlY3R1cmVzLCBpbiBwYXJ0aWN1bGFyIE1J
UFMgd2hpY2gKZG9lc24ndCBoYXZlIF9fc3luY19hZGRfYW5kX2ZldGNoXzggYW5kIF9fc3luY192
YWxfY29tcGFyZV9hbmRfc3dhcF84CmZvciA2NC1iaXQgdmFyaWFibGUgaGFuZGxpbmcuCgoqIHJl
cGxhY2UgY2FsbHMgdG8gdGhlIG9sZGVyIF9fc3luY18qIGZ1bmN0aW9ucyB3aXRoIHRoZSBuZXcg
YXRvbWljXyoKICBzdGFuZGFyZCBvbmVzCiogdXNlIHRoZSBfQXRvbWljIHR5cGUgbW9kaWZpZXIg
YXMgcmVxdWlyZWQgd2l0aCBzdGRhdG9taWMuaCBmdW5jdGlvbnMKKiBhZGQgZGVwZW5kZW5jeSBm
b3IgZ2VtX2NyZWF0ZSBvbiBsaWJhdG9taWMKClNpZ25lZC1vZmYtYnk6IEd1aWxsYXVtZSBUdWNr
ZXIgPGd1aWxsYXVtZS50dWNrZXJAY29sbGFib3JhLmNvbT4KUmV2aWV3ZWQtYnk6IFNpbW9uIFNl
ciA8c2ltb24uc2VyQGludGVsLmNvbT4KLS0tCgpOb3RlczoKICAgIHYyOiB1c2UgYXRvbWljXyog
YW5kIG9ubHkgbGluayBsaWJhdG9taWMgd2l0aCBnZW1fY3JlYXRlCgogdGVzdHMvTWFrZWZpbGUu
YW0gICAgICAgfCAgMiArLQogdGVzdHMvaTkxNS9nZW1fY3JlYXRlLmMgfCAxNiArKysrKysrKysr
KystLS0tCiB0ZXN0cy9tZXNvbi5idWlsZCAgICAgICB8ICA5ICsrKysrKysrLQogMyBmaWxlcyBj
aGFuZ2VkLCAyMSBpbnNlcnRpb25zKCspLCA2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Rl
c3RzL01ha2VmaWxlLmFtIGIvdGVzdHMvTWFrZWZpbGUuYW0KaW5kZXggNWE0MjhiOGFjMjEzLi5i
YmQzODZjOWMyZGIgMTAwNjQ0Ci0tLSBhL3Rlc3RzL01ha2VmaWxlLmFtCisrKyBiL3Rlc3RzL01h
a2VmaWxlLmFtCkBAIC05MCw3ICs5MCw3IEBAIEFNX0xERkxBR1MgPSAtV2wsLS1hcy1uZWVkZWQK
IGRybV9pbXBvcnRfZXhwb3J0X0NGTEFHUyA9ICQoQU1fQ0ZMQUdTKSAkKFRIUkVBRF9DRkxBR1Mp
CiBkcm1faW1wb3J0X2V4cG9ydF9MREFERCA9ICQoTERBREQpIC1scHRocmVhZAogZ2VtX2NyZWF0
ZV9DRkxBR1MgPSAkKEFNX0NGTEFHUykgJChUSFJFQURfQ0ZMQUdTKQotZ2VtX2NyZWF0ZV9MREFE
RCA9ICQoTERBREQpIC1scHRocmVhZAorZ2VtX2NyZWF0ZV9MREFERCA9ICQoTERBREQpIC1scHRo
cmVhZCAtbGF0b21pYwogZ2VtX2Nsb3NlX3JhY2VfQ0ZMQUdTID0gJChBTV9DRkxBR1MpICQoVEhS
RUFEX0NGTEFHUykKIGdlbV9jbG9zZV9yYWNlX0xEQUREID0gJChMREFERCkgLWxwdGhyZWFkCiBn
ZW1fY3R4X3RocmFzaF9DRkxBR1MgPSAkKEFNX0NGTEFHUykgJChUSFJFQURfQ0ZMQUdTKQpkaWZm
IC0tZ2l0IGEvdGVzdHMvaTkxNS9nZW1fY3JlYXRlLmMgYi90ZXN0cy9pOTE1L2dlbV9jcmVhdGUu
YwppbmRleCA0M2NiZjQ1ZjI4OWIuLjkwMDhjZDhhMjFlMyAxMDA2NDQKLS0tIGEvdGVzdHMvaTkx
NS9nZW1fY3JlYXRlLmMKKysrIGIvdGVzdHMvaTkxNS9nZW1fY3JlYXRlLmMKQEAgLTQ1LDYgKzQ1
LDcgQEAKICNpbmNsdWRlIDxzeXMvdGltZS5oPgogI2luY2x1ZGUgPGdldG9wdC5oPgogI2luY2x1
ZGUgPHB0aHJlYWQuaD4KKyNpbmNsdWRlIDxzdGRhdG9taWMuaD4KIAogI2luY2x1ZGUgPGRybS5o
PgogCkBAIC0xNTYsNyArMTU3LDE0IEBAIHN0YXRpYyB2b2lkIGludmFsaWRfbm9uYWxpZ25lZF9z
aXplKGludCBmZCkKIAlnZW1fY2xvc2UoZmQsIGNyZWF0ZS5oYW5kbGUpOwogfQogCi1zdGF0aWMg
dWludDY0X3QgZ2V0X25wYWdlcyh1aW50NjRfdCAqZ2xvYmFsLCB1aW50NjRfdCBucGFnZXMpCitz
dGF0aWMgdWludDY0X3QgYXRvbWljX2NvbXBhcmVfc3dhcF91NjQoX0F0b21pYyh1aW50NjRfdCkg
KnB0ciwKKwkJCQkJdWludDY0X3Qgb2xkdmFsLCB1aW50NjRfdCBuZXd2YWwpCit7CisJYXRvbWlj
X2NvbXBhcmVfZXhjaGFuZ2Vfc3Ryb25nKHB0ciwgJm9sZHZhbCwgbmV3dmFsKTsKKwlyZXR1cm4g
b2xkdmFsOworfQorCitzdGF0aWMgdWludDY0X3QgZ2V0X25wYWdlcyhfQXRvbWljKHVpbnQ2NF90
KSAqZ2xvYmFsLCB1aW50NjRfdCBucGFnZXMpCiB7CiAJdWludDY0X3QgdHJ5LCBvbGQsIG1heDsK
IApAQCAtMTY1LDEzICsxNzMsMTMgQEAgc3RhdGljIHVpbnQ2NF90IGdldF9ucGFnZXModWludDY0
X3QgKmdsb2JhbCwgdWludDY0X3QgbnBhZ2VzKQogCQlvbGQgPSBtYXg7CiAJCXRyeSA9IDEgKyBu
cGFnZXMgJSAobWF4IC8gMik7CiAJCW1heCAtPSB0cnk7Ci0JfSB3aGlsZSAoKG1heCA9IF9fc3lu
Y192YWxfY29tcGFyZV9hbmRfc3dhcChnbG9iYWwsIG9sZCwgbWF4KSkgIT0gb2xkKTsKKwl9IHdo
aWxlICgobWF4ID0gYXRvbWljX2NvbXBhcmVfc3dhcF91NjQoZ2xvYmFsLCBvbGQsIG1heCkpICE9
IG9sZCk7CiAKIAlyZXR1cm4gdHJ5OwogfQogCiBzdHJ1Y3QgdGhyZWFkX2NsZWFyIHsKLQl1aW50
NjRfdCBtYXg7CisJX0F0b21pYyh1aW50NjRfdCkgbWF4OwogCWludCB0aW1lb3V0OwogCWludCBp
OTE1OwogfTsKQEAgLTIwMiw3ICsyMTAsNyBAQCBzdGF0aWMgdm9pZCAqdGhyZWFkX2NsZWFyKHZv
aWQgKmRhdGEpCiAJCX0KIAkJZ2VtX2Nsb3NlKGk5MTUsIGNyZWF0ZS5oYW5kbGUpOwogCi0JCV9f
c3luY19hZGRfYW5kX2ZldGNoKCZhcmctPm1heCwgbnBhZ2VzKTsKKwkJYXRvbWljX2ZldGNoX2Fk
ZCgmYXJnLT5tYXgsIG5wYWdlcyk7CiAJfQogCiAJcmV0dXJuIE5VTEw7CmRpZmYgLS1naXQgYS90
ZXN0cy9tZXNvbi5idWlsZCBiL3Rlc3RzL21lc29uLmJ1aWxkCmluZGV4IGYxNjhmYmJhZTJhOC4u
ZmZkNDMyZDM4MTkzIDEwMDY0NAotLS0gYS90ZXN0cy9tZXNvbi5idWlsZAorKysgYi90ZXN0cy9t
ZXNvbi5idWlsZApAQCAtMTEwLDcgKzExMCw2IEBAIGk5MTVfcHJvZ3MgPSBbCiAJJ2dlbV9jbG9z
ZV9yYWNlJywKIAknZ2VtX2NvbmN1cnJlbnRfYmxpdCcsCiAJJ2dlbV9jcHVfcmVsb2MnLAotCSdn
ZW1fY3JlYXRlJywKIAknZ2VtX2NzX3ByZWZldGNoJywKIAknZ2VtX2NzX3RsYicsCiAJJ2dlbV9j
dHhfYmFkX2Rlc3Ryb3knLApAQCAtMjc3LDYgKzI3NiwxNCBAQCBmb3JlYWNoIHByb2cgOiBpOTE1
X3Byb2dzCiAJdGVzdF9saXN0ICs9IHByb2cKIGVuZGZvcmVhY2gKIAordGVzdF9leGVjdXRhYmxl
cyArPSBleGVjdXRhYmxlKCdnZW1fY3JlYXRlJywKKwkgICBqb2luX3BhdGhzKCdpOTE1JywgJ2dl
bV9jcmVhdGUuYycpLAorCSAgIGRlcGVuZGVuY2llcyA6IHRlc3RfZGVwcyArIFsgbGliYXRvbWlj
IF0sCisJICAgaW5zdGFsbF9kaXIgOiBsaWJleGVjZGlyLAorCSAgIGluc3RhbGxfcnBhdGggOiBs
aWJleGVjZGlyX3JwYXRoZGlyLAorCSAgIGluc3RhbGwgOiB0cnVlKQordGVzdF9saXN0ICs9ICdn
ZW1fY3JlYXRlJworCiB0ZXN0X2V4ZWN1dGFibGVzICs9IGV4ZWN1dGFibGUoJ2dlbV9jdHhfc3Nl
dScsCiAJICAgam9pbl9wYXRocygnaTkxNScsICdnZW1fY3R4X3NzZXUuYycpLAogCSAgIGRlcGVu
ZGVuY2llcyA6IHRlc3RfZGVwcyArIFsgbGliX2lndF9wZXJmIF0sCi0tIAoyLjIwLjEKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWls
aW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

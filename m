Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1C6164C327
	for <lists+intel-gfx@lfdr.de>; Wed, 19 Jun 2019 23:35:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0E2306E4A5;
	Wed, 19 Jun 2019 21:35:49 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5F12E6E499
 for <Intel-gfx@lists.freedesktop.org>; Wed, 19 Jun 2019 21:35:10 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 19 Jun 2019 14:35:10 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,394,1557212400"; d="scan'208";a="162159216"
Received: from yyosef-mobl.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.23.42])
 by fmsmga007.fm.intel.com with ESMTP; 19 Jun 2019 14:35:08 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Wed, 19 Jun 2019 22:34:37 +0100
Message-Id: <20190619213437.1190-33-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190619213437.1190-1-tvrtko.ursulin@linux.intel.com>
References: <20190619213437.1190-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 33/33] drm/i915: Eliminate dual personality of
 i915_scratch_offset
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KClNjcmF0Y2gg
dm1hIGxpdmVzIHVuZGVyIGd0IGJ1dCB0aGUgQVBJIHVzZWQgdG8gd29yayBvbiBpOTE1LiBNYWtl
IHRoaXMKY29uc2lzdGVudCBieSByZW5hbWluZyB0aGUgZnVuY3Rpb24gdG8gaW50ZWxfZ3Rfc2Ny
YXRjaF9vZmZzZXQgYW5kIG1ha2UKaXQgdGFrZSBzdHJ1Y3QgaW50ZWxfZ3QuCgp2MjoKICogTW92
ZSB0byBpbnRlbF9ndC4gKENocmlzKQoKU2lnbmVkLW9mZi1ieTogVHZydGtvIFVyc3VsaW4gPHR2
cnRrby51cnN1bGluQGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNA
Y2hyaXMtd2lsc29uLmNvLnVrPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Vu
Z2luZV9jcy5jICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5jICAg
ICAgICAgfCAzOCArKysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ndC5oICAgICAgICAgfCAgOCArKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfbHJjLmMgICAgICAgIHwgIDkgKystLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX3JpbmdidWZmZXIuYyB8IDMwICsrKysrKysrKystLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5oICAgICAgICAgICAgfCAgNSAtLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZ2VtLmMgICAgICAgICAgICB8IDMxICsrLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYyAgICAgIHwgIDQgKy0tCiA4IGZpbGVzIGNoYW5n
ZWQsIDc1IGluc2VydGlvbnMoKyksIDUyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKaW5kZXggMDJkYWNlYTI4NThmLi4zZmIzNDcxYTE5NmEg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCkBAIC03MzAsNyAr
NzMwLDcgQEAgc3RhdGljIGludCBtZWFzdXJlX2JyZWFkY3J1bWJfZHcoc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lKQogCXN0cnVjdCBtZWFzdXJlX2JyZWFkY3J1bWIgKmZyYW1lOwogCWlu
dCBkdyA9IC1FTk9NRU07CiAKLQlHRU1fQlVHX09OKCFlbmdpbmUtPmk5MTUtPmd0LnNjcmF0Y2gp
OworCUdFTV9CVUdfT04oIWVuZ2luZS0+Z3QtPnNjcmF0Y2gpOwogCiAJZnJhbWUgPSBremFsbG9j
KHNpemVvZigqZnJhbWUpLCBHRlBfS0VSTkVMKTsKIAlpZiAoIWZyYW1lKQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2d0LmMKaW5kZXggZTIyZWUzZTgyM2ZhLi44Y2NhNmIyMmIzODYgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYwpAQCAtMjAzLDMgKzIwMyw0MSBAQCB2b2lkIGludGVsX2d0
X2NoaXBzZXRfZmx1c2goc3RydWN0IGludGVsX2d0ICpndCkKIAlpZiAoSU5URUxfR0VOKGd0LT5p
OTE1KSA8IDYpCiAJCWludGVsX2d0dF9jaGlwc2V0X2ZsdXNoKCk7CiB9CisKK2ludCBpbnRlbF9n
dF9pbml0X3NjcmF0Y2goc3RydWN0IGludGVsX2d0ICpndCwgdW5zaWduZWQgaW50IHNpemUpCit7
CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBndC0+aTkxNTsKKwlzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX29iamVjdCAqb2JqOworCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOworCWludCByZXQ7
CisKKwlvYmogPSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX3N0b2xlbihpOTE1LCBzaXplKTsKKwlp
ZiAoIW9iaikKKwkJb2JqID0gaTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9pbnRlcm5hbChpOTE1LCBz
aXplKTsKKwlpZiAoSVNfRVJSKG9iaikpIHsKKwkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gYWxsb2Nh
dGUgc2NyYXRjaCBwYWdlXG4iKTsKKwkJcmV0dXJuIFBUUl9FUlIob2JqKTsKKwl9CisKKwl2bWEg
PSBpOTE1X3ZtYV9pbnN0YW5jZShvYmosICZndC0+Z2d0dC0+dm0sIE5VTEwpOworCWlmIChJU19F
UlIodm1hKSkgeworCQlyZXQgPSBQVFJfRVJSKHZtYSk7CisJCWdvdG8gZXJyX3VucmVmOworCX0K
KworCXJldCA9IGk5MTVfdm1hX3Bpbih2bWEsIDAsIDAsIFBJTl9HTE9CQUwgfCBQSU5fSElHSCk7
CisJaWYgKHJldCkKKwkJZ290byBlcnJfdW5yZWY7CisKKwlndC0+c2NyYXRjaCA9IHZtYTsKKwly
ZXR1cm4gMDsKKworZXJyX3VucmVmOgorCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKKwlyZXR1
cm4gcmV0OworfQorCit2b2lkIGludGVsX2d0X2Zpbmlfc2NyYXRjaChzdHJ1Y3QgaW50ZWxfZ3Qg
Kmd0KQoreworCWk5MTVfdm1hX3VucGluX2FuZF9yZWxlYXNlKCZndC0+c2NyYXRjaCwgMCk7Cit9
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuaAppbmRleCAyOWNkMTViZTZhMDEuLmNmM2M2Y2Vj
YzhlZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5oCkBAIC0yMSw0ICsyMSwxMiBAQCB2
b2lkIGludGVsX2d0X2NsZWFyX2Vycm9yX3JlZ2lzdGVycyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0LAog
dm9pZCBpbnRlbF9ndF9mbHVzaF9nZ3R0X3dyaXRlcyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKIHZv
aWQgaW50ZWxfZ3RfY2hpcHNldF9mbHVzaChzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKIAoraW50IGlu
dGVsX2d0X2luaXRfc2NyYXRjaChzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1bnNpZ25lZCBpbnQgc2l6
ZSk7Cit2b2lkIGludGVsX2d0X2Zpbmlfc2NyYXRjaChzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKKwor
c3RhdGljIGlubGluZSB1MzIgaW50ZWxfZ3Rfc2NyYXRjaF9vZmZzZXQoY29uc3Qgc3RydWN0IGlu
dGVsX2d0ICpndCkKK3sKKwlyZXR1cm4gaTkxNV9nZ3R0X29mZnNldChndC0+c2NyYXRjaCk7Cit9
CisKICNlbmRpZiAvKiBfX0lOVEVMX0dUX0hfXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9s
cmMuYwppbmRleCAzOTQ4MmFhYjNhMWQuLmQ2NGZiMTMwNGJiZiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfbHJjLmMKQEAgLTEzNSw2ICsxMzUsNyBAQAogCiAjaW5jbHVkZSAiZ2VtL2k5MTVf
Z2VtX2NvbnRleHQuaCIKIAorI2luY2x1ZGUgImd0L2ludGVsX2d0LmgiCiAjaW5jbHVkZSAiaTkx
NV9kcnYuaCIKICNpbmNsdWRlICJpOTE1X2dlbV9yZW5kZXJfc3RhdGUuaCIKICNpbmNsdWRlICJp
OTE1X3ZncHUuaCIKQEAgLTE2NzYsNyArMTY3Nyw3IEBAIGdlbjhfZW1pdF9mbHVzaF9jb2hlcmVu
dGwzX3dhKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgdTMyICpiYXRjaCkKIAkvKiBO
QiBubyBvbmUgZWxzZSBpcyBhbGxvd2VkIHRvIHNjcmliYmxlIG92ZXIgc2NyYXRjaCArIDI1NiEg
Ki8KIAkqYmF0Y2grKyA9IE1JX1NUT1JFX1JFR0lTVEVSX01FTV9HRU44IHwgTUlfU1JNX0xSTV9H
TE9CQUxfR1RUOwogCSpiYXRjaCsrID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoR0VOOF9MM1NRQ1JF
RzQpOwotCSpiYXRjaCsrID0gaTkxNV9zY3JhdGNoX29mZnNldChlbmdpbmUtPmk5MTUpICsgMjU2
OworCSpiYXRjaCsrID0gaW50ZWxfZ3Rfc2NyYXRjaF9vZmZzZXQoZW5naW5lLT5ndCkgKyAyNTY7
CiAJKmJhdGNoKysgPSAwOwogCiAJKmJhdGNoKysgPSBNSV9MT0FEX1JFR0lTVEVSX0lNTSgxKTsK
QEAgLTE2OTAsNyArMTY5MSw3IEBAIGdlbjhfZW1pdF9mbHVzaF9jb2hlcmVudGwzX3dhKHN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgdTMyICpiYXRjaCkKIAogCSpiYXRjaCsrID0gTUlf
TE9BRF9SRUdJU1RFUl9NRU1fR0VOOCB8IE1JX1NSTV9MUk1fR0xPQkFMX0dUVDsKIAkqYmF0Y2gr
KyA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KEdFTjhfTDNTUUNSRUc0KTsKLQkqYmF0Y2grKyA9IGk5
MTVfc2NyYXRjaF9vZmZzZXQoZW5naW5lLT5pOTE1KSArIDI1NjsKKwkqYmF0Y2grKyA9IGludGVs
X2d0X3NjcmF0Y2hfb2Zmc2V0KGVuZ2luZS0+Z3QpICsgMjU2OwogCSpiYXRjaCsrID0gMDsKIAog
CXJldHVybiBiYXRjaDsKQEAgLTE3MjcsNyArMTcyOCw3IEBAIHN0YXRpYyB1MzIgKmdlbjhfaW5p
dF9pbmRpcmVjdGN0eF9iYihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIHUzMiAqYmF0
Y2gpCiAJCQkJICAgICAgIFBJUEVfQ09OVFJPTF9HTE9CQUxfR1RUX0lWQiB8CiAJCQkJICAgICAg
IFBJUEVfQ09OVFJPTF9DU19TVEFMTCB8CiAJCQkJICAgICAgIFBJUEVfQ09OVFJPTF9RV19XUklU
RSwKLQkJCQkgICAgICAgaTkxNV9zY3JhdGNoX29mZnNldChlbmdpbmUtPmk5MTUpICsKKwkJCQkg
ICAgICAgaW50ZWxfZ3Rfc2NyYXRjaF9vZmZzZXQoZW5naW5lLT5ndCkgKwogCQkJCSAgICAgICAy
ICogQ0FDSEVMSU5FX0JZVEVTKTsKIAogCSpiYXRjaCsrID0gTUlfQVJCX09OX09GRiB8IE1JX0FS
Ql9FTkFCTEU7CkBAIC0yNDM0LDcgKzI0MzUsNyBAQCBzdGF0aWMgaW50IGdlbjhfZW1pdF9mbHVz
aF9yZW5kZXIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCwKIHsKIAlzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmUgPSByZXF1ZXN0LT5lbmdpbmU7CiAJdTMyIHNjcmF0Y2hfYWRkciA9
Ci0JCWk5MTVfc2NyYXRjaF9vZmZzZXQoZW5naW5lLT5pOTE1KSArIDIgKiBDQUNIRUxJTkVfQllU
RVM7CisJCWludGVsX2d0X3NjcmF0Y2hfb2Zmc2V0KGVuZ2luZS0+Z3QpICsgMiAqIENBQ0hFTElO
RV9CWVRFUzsKIAlib29sIHZmX2ZsdXNoX3dhID0gZmFsc2UsIGRjX2ZsdXNoX3dhID0gZmFsc2U7
CiAJdTMyICpjcywgZmxhZ3MgPSAwOwogCWludCBsZW47CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9yaW5nYnVmZmVyLmMKaW5kZXggYzMxODU2MjU4NjJiLi44NzVhYTU2YjYxZWEgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3JpbmdidWZmZXIuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMKQEAgLTMzLDYgKzMz
LDggQEAKIAogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9jb250ZXh0LmgiCiAKKyNpbmNsdWRlICJn
dC9pbnRlbF9ndC5oIgorCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJpOTE1X2dl
bV9yZW5kZXJfc3RhdGUuaCIKICNpbmNsdWRlICJpOTE1X3RyYWNlLmgiCkBAIC03NSw3ICs3Nyw3
IEBAIGdlbjJfcmVuZGVyX3JpbmdfZmx1c2goc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsIHUzMiBt
b2RlKQogCSpjcysrID0gY21kOwogCXdoaWxlIChudW1fc3RvcmVfZHctLSkgewogCQkqY3MrKyA9
IE1JX1NUT1JFX0RXT1JEX0lNTSB8IE1JX01FTV9WSVJUVUFMOwotCQkqY3MrKyA9IGk5MTVfc2Ny
YXRjaF9vZmZzZXQocnEtPmk5MTUpOworCQkqY3MrKyA9IGludGVsX2d0X3NjcmF0Y2hfb2Zmc2V0
KHJxLT5lbmdpbmUtPmd0KTsKIAkJKmNzKysgPSAwOwogCX0KIAkqY3MrKyA9IE1JX0ZMVVNIIHwg
TUlfTk9fV1JJVEVfRkxVU0g7CkBAIC0xNDgsNyArMTUwLDggQEAgZ2VuNF9yZW5kZXJfcmluZ19m
bHVzaChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgdTMyIG1vZGUpCiAJICovCiAJaWYgKG1vZGUg
JiBFTUlUX0lOVkFMSURBVEUpIHsKIAkJKmNzKysgPSBHRlhfT1BfUElQRV9DT05UUk9MKDQpIHwg
UElQRV9DT05UUk9MX1FXX1dSSVRFOwotCQkqY3MrKyA9IGk5MTVfc2NyYXRjaF9vZmZzZXQocnEt
Pmk5MTUpIHwgUElQRV9DT05UUk9MX0dMT0JBTF9HVFQ7CisJCSpjcysrID0gaW50ZWxfZ3Rfc2Ny
YXRjaF9vZmZzZXQocnEtPmVuZ2luZS0+Z3QpIHwKKwkJCVBJUEVfQ09OVFJPTF9HTE9CQUxfR1RU
OwogCQkqY3MrKyA9IDA7CiAJCSpjcysrID0gMDsKIApAQCAtMTU2LDcgKzE1OSw4IEBAIGdlbjRf
cmVuZGVyX3JpbmdfZmx1c2goc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsIHUzMiBtb2RlKQogCQkJ
KmNzKysgPSBNSV9GTFVTSDsKIAogCQkqY3MrKyA9IEdGWF9PUF9QSVBFX0NPTlRST0woNCkgfCBQ
SVBFX0NPTlRST0xfUVdfV1JJVEU7Ci0JCSpjcysrID0gaTkxNV9zY3JhdGNoX29mZnNldChycS0+
aTkxNSkgfCBQSVBFX0NPTlRST0xfR0xPQkFMX0dUVDsKKwkJKmNzKysgPSBpbnRlbF9ndF9zY3Jh
dGNoX29mZnNldChycS0+ZW5naW5lLT5ndCkgfAorCQkJUElQRV9DT05UUk9MX0dMT0JBTF9HVFQ7
CiAJCSpjcysrID0gMDsKIAkJKmNzKysgPSAwOwogCX0KQEAgLTIwOCw3ICsyMTIsOCBAQCBnZW40
X3JlbmRlcl9yaW5nX2ZsdXNoKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCB1MzIgbW9kZSkKIHN0
YXRpYyBpbnQKIGdlbjZfZW1pdF9wb3N0X3N5bmNfbm9uemVyb19mbHVzaChzdHJ1Y3QgaTkxNV9y
ZXF1ZXN0ICpycSkKIHsKLQl1MzIgc2NyYXRjaF9hZGRyID0gaTkxNV9zY3JhdGNoX29mZnNldChy
cS0+aTkxNSkgKyAyICogQ0FDSEVMSU5FX0JZVEVTOworCXUzMiBzY3JhdGNoX2FkZHIgPQorCQlp
bnRlbF9ndF9zY3JhdGNoX29mZnNldChycS0+ZW5naW5lLT5ndCkgKyAyICogQ0FDSEVMSU5FX0JZ
VEVTOwogCXUzMiAqY3M7CiAKIAljcyA9IGludGVsX3JpbmdfYmVnaW4ocnEsIDYpOwpAQCAtMjQx
LDcgKzI0Niw4IEBAIGdlbjZfZW1pdF9wb3N0X3N5bmNfbm9uemVyb19mbHVzaChzdHJ1Y3QgaTkx
NV9yZXF1ZXN0ICpycSkKIHN0YXRpYyBpbnQKIGdlbjZfcmVuZGVyX3JpbmdfZmx1c2goc3RydWN0
IGk5MTVfcmVxdWVzdCAqcnEsIHUzMiBtb2RlKQogewotCXUzMiBzY3JhdGNoX2FkZHIgPSBpOTE1
X3NjcmF0Y2hfb2Zmc2V0KHJxLT5pOTE1KSArIDIgKiBDQUNIRUxJTkVfQllURVM7CisJdTMyIHNj
cmF0Y2hfYWRkciA9CisJCWludGVsX2d0X3NjcmF0Y2hfb2Zmc2V0KHJxLT5lbmdpbmUtPmd0KSAr
IDIgKiBDQUNIRUxJTkVfQllURVM7CiAJdTMyICpjcywgZmxhZ3MgPSAwOwogCWludCByZXQ7CiAK
QEAgLTI5OSw3ICszMDUsOCBAQCBzdGF0aWMgdTMyICpnZW42X3Jjc19lbWl0X2JyZWFkY3J1bWIo
c3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsIHUzMiAqY3MpCiAKIAkqY3MrKyA9IEdGWF9PUF9QSVBF
X0NPTlRST0woNCk7CiAJKmNzKysgPSBQSVBFX0NPTlRST0xfUVdfV1JJVEU7Ci0JKmNzKysgPSBp
OTE1X3NjcmF0Y2hfb2Zmc2V0KHJxLT5pOTE1KSB8IFBJUEVfQ09OVFJPTF9HTE9CQUxfR1RUOwor
CSpjcysrID0gaW50ZWxfZ3Rfc2NyYXRjaF9vZmZzZXQocnEtPmVuZ2luZS0+Z3QpIHwKKwkJUElQ
RV9DT05UUk9MX0dMT0JBTF9HVFQ7CiAJKmNzKysgPSAwOwogCiAJLyogRmluYWxseSB3ZSBjYW4g
Zmx1c2ggYW5kIHdpdGggaXQgZW1pdCB0aGUgYnJlYWRjcnVtYiAqLwpAQCAtMzQyLDcgKzM0OSw4
IEBAIGdlbjdfcmVuZGVyX3JpbmdfY3Nfc3RhbGxfd2Eoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEp
CiBzdGF0aWMgaW50CiBnZW43X3JlbmRlcl9yaW5nX2ZsdXNoKHN0cnVjdCBpOTE1X3JlcXVlc3Qg
KnJxLCB1MzIgbW9kZSkKIHsKLQl1MzIgc2NyYXRjaF9hZGRyID0gaTkxNV9zY3JhdGNoX29mZnNl
dChycS0+aTkxNSkgKyAyICogQ0FDSEVMSU5FX0JZVEVTOworCXUzMiBzY3JhdGNoX2FkZHIgPQor
CQlpbnRlbF9ndF9zY3JhdGNoX29mZnNldChycS0+ZW5naW5lLT5ndCkgKyAyICogQ0FDSEVMSU5F
X0JZVEVTOwogCXUzMiAqY3MsIGZsYWdzID0gMDsKIAogCS8qCkBAIC0xMDcxLDkgKzEwNzksOSBA
QCBpODMwX2VtaXRfYmJfc3RhcnQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCiAJCSAgIHU2NCBv
ZmZzZXQsIHUzMiBsZW4sCiAJCSAgIHVuc2lnbmVkIGludCBkaXNwYXRjaF9mbGFncykKIHsKLQl1
MzIgKmNzLCBjc19vZmZzZXQgPSBpOTE1X3NjcmF0Y2hfb2Zmc2V0KHJxLT5pOTE1KTsKKwl1MzIg
KmNzLCBjc19vZmZzZXQgPSBpbnRlbF9ndF9zY3JhdGNoX29mZnNldChycS0+ZW5naW5lLT5ndCk7
CiAKLQlHRU1fQlVHX09OKHJxLT5pOTE1LT5ndC5zY3JhdGNoLT5zaXplIDwgSTgzMF9XQV9TSVpF
KTsKKwlHRU1fQlVHX09OKHJxLT5lbmdpbmUtPmd0LT5zY3JhdGNoLT5zaXplIDwgSTgzMF9XQV9T
SVpFKTsKIAogCWNzID0gaW50ZWxfcmluZ19iZWdpbihycSwgNik7CiAJaWYgKElTX0VSUihjcykp
CkBAIC0xNTEyLDcgKzE1MjAsNyBAQCBzdGF0aWMgaW50IGZsdXNoX3BkX2RpcihzdHJ1Y3QgaTkx
NV9yZXF1ZXN0ICpycSkKIAkvKiBTdGFsbCB1bnRpbCB0aGUgcGFnZSB0YWJsZSBsb2FkIGlzIGNv
bXBsZXRlICovCiAJKmNzKysgPSBNSV9TVE9SRV9SRUdJU1RFUl9NRU0gfCBNSV9TUk1fTFJNX0dM
T0JBTF9HVFQ7CiAJKmNzKysgPSBpOTE1X21taW9fcmVnX29mZnNldChSSU5HX1BQX0RJUl9CQVNF
KGVuZ2luZS0+bW1pb19iYXNlKSk7Ci0JKmNzKysgPSBpOTE1X3NjcmF0Y2hfb2Zmc2V0KHJxLT5p
OTE1KTsKKwkqY3MrKyA9IGludGVsX2d0X3NjcmF0Y2hfb2Zmc2V0KHJxLT5lbmdpbmUtPmd0KTsK
IAkqY3MrKyA9IE1JX05PT1A7CiAKIAlpbnRlbF9yaW5nX2FkdmFuY2UocnEsIGNzKTsKQEAgLTE2
MjgsNyArMTYzNiw3IEBAIHN0YXRpYyBpbmxpbmUgaW50IG1pX3NldF9jb250ZXh0KHN0cnVjdCBp
OTE1X3JlcXVlc3QgKnJxLCB1MzIgZmxhZ3MpCiAJCQkvKiBJbnNlcnQgYSBkZWxheSBiZWZvcmUg
dGhlIG5leHQgc3dpdGNoISAqLwogCQkJKmNzKysgPSBNSV9TVE9SRV9SRUdJU1RFUl9NRU0gfCBN
SV9TUk1fTFJNX0dMT0JBTF9HVFQ7CiAJCQkqY3MrKyA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KGxh
c3RfcmVnKTsKLQkJCSpjcysrID0gaTkxNV9zY3JhdGNoX29mZnNldChycS0+aTkxNSk7CisJCQkq
Y3MrKyA9IGludGVsX2d0X3NjcmF0Y2hfb2Zmc2V0KHJxLT5lbmdpbmUtPmd0KTsKIAkJCSpjcysr
ID0gTUlfTk9PUDsKIAkJfQogCQkqY3MrKyA9IE1JX0FSQl9PTl9PRkYgfCBNSV9BUkJfRU5BQkxF
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5kZXggNTUyMzY4NTFiZjg2Li5mZjliNzI3OWQwZTIg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaApAQCAtMjc4OCwxMSArMjc4OCw2IEBAIHN0YXRpYyBp
bmxpbmUgaW50IGludGVsX2h3c19jc2Jfd3JpdGVfaW5kZXgoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUpCiAJCXJldHVybiBJOTE1X0hXU19DU0JfV1JJVEVfSU5ERVg7CiB9CiAKLXN0YXRp
YyBpbmxpbmUgdTMyIGk5MTVfc2NyYXRjaF9vZmZzZXQoY29uc3Qgc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTUpCi17Ci0JcmV0dXJuIGk5MTVfZ2d0dF9vZmZzZXQoaTkxNS0+Z3Quc2NyYXRj
aCk7Ci19Ci0KIHN0YXRpYyBpbmxpbmUgZW51bSBpOTE1X21hcF90eXBlCiBpOTE1X2NvaGVyZW50
X21hcF90eXBlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2VtLmMKaW5kZXggNmUwNzEyNzI0MmQ5Li44ZGZmM2I4ZjEyYzMgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW0uYwpAQCAtMTQyNCwzOSArMTQyNCwxMiBAQCBzdGF0aWMgaW50IF9faW50ZWxfZW5n
aW5lc19yZWNvcmRfZGVmYXVsdHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiBzdGF0
aWMgaW50CiBpOTE1X2dlbV9pbml0X3NjcmF0Y2goc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUsIHVuc2lnbmVkIGludCBzaXplKQogewotCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpv
Ymo7Ci0Jc3RydWN0IGk5MTVfdm1hICp2bWE7Ci0JaW50IHJldDsKLQotCW9iaiA9IGk5MTVfZ2Vt
X29iamVjdF9jcmVhdGVfc3RvbGVuKGk5MTUsIHNpemUpOwotCWlmICghb2JqKQotCQlvYmogPSBp
OTE1X2dlbV9vYmplY3RfY3JlYXRlX2ludGVybmFsKGk5MTUsIHNpemUpOwotCWlmIChJU19FUlIo
b2JqKSkgewotCQlEUk1fRVJST1IoIkZhaWxlZCB0byBhbGxvY2F0ZSBzY3JhdGNoIHBhZ2VcbiIp
OwotCQlyZXR1cm4gUFRSX0VSUihvYmopOwotCX0KLQotCXZtYSA9IGk5MTVfdm1hX2luc3RhbmNl
KG9iaiwgJmk5MTUtPmdndHQudm0sIE5VTEwpOwotCWlmIChJU19FUlIodm1hKSkgewotCQlyZXQg
PSBQVFJfRVJSKHZtYSk7Ci0JCWdvdG8gZXJyX3VucmVmOwotCX0KLQotCXJldCA9IGk5MTVfdm1h
X3Bpbih2bWEsIDAsIDAsIFBJTl9HTE9CQUwgfCBQSU5fSElHSCk7Ci0JaWYgKHJldCkKLQkJZ290
byBlcnJfdW5yZWY7Ci0KLQlpOTE1LT5ndC5zY3JhdGNoID0gdm1hOwotCXJldHVybiAwOwotCi1l
cnJfdW5yZWY6Ci0JaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwotCXJldHVybiByZXQ7CisJcmV0
dXJuIGludGVsX2d0X2luaXRfc2NyYXRjaCgmaTkxNS0+Z3QsIHNpemUpOwogfQogCiBzdGF0aWMg
dm9pZCBpOTE1X2dlbV9maW5pX3NjcmF0Y2goc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUp
CiB7Ci0JaTkxNV92bWFfdW5waW5fYW5kX3JlbGVhc2UoJmk5MTUtPmd0LnNjcmF0Y2gsIDApOwor
CWludGVsX2d0X2Zpbmlfc2NyYXRjaCgmaTkxNS0+Z3QpOwogfQogCiBzdGF0aWMgaW50IGludGVs
X2VuZ2luZXNfdmVyaWZ5X3dvcmthcm91bmRzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMKaW5kZXggZjQ3ZTc3NGU5YTQzLi5h
ZWY0MzI2MGZhYTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vy
cm9yLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYwpAQCAtMTQ0
Niw4ICsxNDQ2LDggQEAgc3RhdGljIHZvaWQgZ2VtX3JlY29yZF9yaW5ncyhzdHJ1Y3QgaTkxNV9n
cHVfc3RhdGUgKmVycm9yKQogCiAJCQlpZiAoSEFTX0JST0tFTl9DU19UTEIoaTkxNSkpCiAJCQkJ
ZWUtPndhX2JhdGNoYnVmZmVyID0KLQkJCQkJaTkxNV9lcnJvcl9vYmplY3RfY3JlYXRlKGk5MTUs
Ci0JCQkJCQkJCSBpOTE1LT5ndC5zY3JhdGNoKTsKKwkJCQkgIGk5MTVfZXJyb3Jfb2JqZWN0X2Ny
ZWF0ZShpOTE1LAorCQkJCQkJCSAgIGVuZ2luZS0+Z3QtPnNjcmF0Y2gpOwogCQkJcmVxdWVzdF9y
ZWNvcmRfdXNlcl9ibyhyZXF1ZXN0LCBlZSk7CiAKIAkJCWVlLT5jdHggPQotLSAKMi4yMC4xCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

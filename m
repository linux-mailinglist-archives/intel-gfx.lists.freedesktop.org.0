Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DB8B32B2076
	for <lists+intel-gfx@lfdr.de>; Fri, 13 Nov 2020 17:28:42 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 497486E581;
	Fri, 13 Nov 2020 16:28:41 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CFA7A6E580;
 Fri, 13 Nov 2020 16:28:39 +0000 (UTC)
IronPort-SDR: miK8F2/xrWtP7BvxQ7YWcjCEjOeWT0aal0LB8Q7gA/h12QdfcXoCAjOXFp41Yqaw0F26BsszFk
 H2jfY19LmmPQ==
X-IronPort-AV: E=McAfee;i="6000,8403,9804"; a="232113246"
X-IronPort-AV: E=Sophos;i="5.77,476,1596524400"; d="scan'208";a="232113246"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by orsmga104.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 13 Nov 2020 08:28:39 -0800
IronPort-SDR: 7zjrJLGsnIoLn90XPfmPkRvxj/rwmJqq783JpvB4brDgTaDB1aN4SRFfqQEBS1HDaWwIwvyBxU
 VBxUx1JUWx6Q==
X-IronPort-AV: E=Sophos;i="5.77,476,1596524400"; d="scan'208";a="474721277"
Received: from shalomzo-mobl1.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.251.180.188])
 by orsmga004-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 13 Nov 2020 08:28:37 -0800
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: igt-dev@lists.freedesktop.org
Date: Fri, 13 Nov 2020 16:27:35 +0000
Message-Id: <20201113162736.2434791-5-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20201113162736.2434791-1-tvrtko.ursulin@linux.intel.com>
References: <20201113162736.2434791-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC i-g-t 4/5] lsgpu: Add filter type print-out
 selection
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCkluIHRoZSBw
cmV2aW91cyBwYXRjaCB3ZSBzd2l0Y2hlZCB0aGUgbHNncHUgb3V0cHV0IHRvIGEgc2hvcnQgYW5k
IHVzZXIKZnJpZW5kbHkgZm9ybWF0IGJ1dCBzb21lIHVzZXJzIHdpbGwgbmVlZCBhIHNob3J0aGFu
ZCBmb3IgZ2V0dGluZyBvdGhlcgp0eXBlcyBvZiBkZXZpY2Ugc2VsZWN0aW9uIGZpbHRlcnMgdGhh
biB0aGUgZGVmYXV0IGRybS4KCkFkZCBzb21lIGNvbW1hbmQgbGluZSBzd2l0Y2hlcyB0byBlbmFi
bGUgdGhpczoKCiQgbHNncHUKY2FyZDAgICAgICAgICAgICAgICAgICAgODA4NjoxOTNCICAgIGRy
bTovZGV2L2RyaS9jYXJkMArilJTilIByZW5kZXJEMTI4ICAgICAgICAgICAgICAgICAgICAgICAg
IGRybTovZGV2L2RyaS9yZW5kZXJEMTI4CgokIGxzZ3B1IC0tc3lzZnMKY2FyZDAgICAgICAgICAg
ICAgICAgICAgODA4NjoxOTNCICAgIHN5czovc3lzL2RldmljZXMvcGNpMDAwMDowMC8wMDAwOjAw
OjAyLjAvZHJtL2NhcmQwCuKUlOKUgHJlbmRlckQxMjggICAgICAgICAgICAgICAgICAgICAgICAg
c3lzOi9zeXMvZGV2aWNlcy9wY2kwMDAwOjAwLzAwMDA6MDA6MDIuMC9kcm0vcmVuZGVyRDEyOAoK
JCBsc2dwdSAtLXBjaQpjYXJkMCAgICAgICAgICAgICAgICAgICA4MDg2OjE5M0IgICAgcGNpOnZl
bmRvcj04MDg2LGRldmljZT0xOTNCLGNhcmQ9MArilJTilIByZW5kZXJEMTI4Cgp2MgogKiBGaXgg
cGNpIGZpbHRlciBmb3JtYXQuCgpTaWduZWQtb2ZmLWJ5OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtv
LnVyc3VsaW5AaW50ZWwuY29tPgpTdWdnZXN0ZWQtYnk6IFpiaWduaWV3IEtlbXBjennFhHNraSA8
emJpZ25pZXcua2VtcGN6eW5za2lAaW50ZWwuY29tPgpDYzogUGV0cmkgTGF0dmFsYSA8cGV0cmku
bGF0dmFsYUBpbnRlbC5jb20+Ci0tLQogbGliL2lndF9kZXZpY2Vfc2Nhbi5jIHwgODMgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLQogbGliL2lndF9kZXZpY2Vfc2Nh
bi5oIHwgMTUgKysrKysrLS0KIHRvb2xzL2ludGVsX2dwdV90b3AuYyB8ICA2ICsrKy0KIHRvb2xz
L2xzZ3B1LmMgICAgICAgICB8IDMyICsrKysrKysrKysrKystLS0tCiA0IGZpbGVzIGNoYW5nZWQs
IDEwNiBpbnNlcnRpb25zKCspLCAzMCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9saWIvaWd0
X2RldmljZV9zY2FuLmMgYi9saWIvaWd0X2RldmljZV9zY2FuLmMKaW5kZXggNzI2NTM0MDNmNzA1
Li4wMjhjOGJmYmJiNDQgMTAwNjQ0Ci0tLSBhL2xpYi9pZ3RfZGV2aWNlX3NjYW4uYworKysgYi9s
aWIvaWd0X2RldmljZV9zY2FuLmMKQEAgLTc3Nyw3ICs3NzcsOSBAQCBzdGF0aWMgYm9vbCBfX2No
ZWNrX2VtcHR5KHN0cnVjdCBpZ3RfbGlzdF9oZWFkICp2aWV3KQogCXJldHVybiBmYWxzZTsKIH0K
IAotc3RhdGljIHZvaWQgaWd0X2RldnNfcHJpbnRfc2ltcGxlKHN0cnVjdCBpZ3RfbGlzdF9oZWFk
ICp2aWV3KQorc3RhdGljIHZvaWQKK2lndF9kZXZzX3ByaW50X3NpbXBsZShzdHJ1Y3QgaWd0X2xp
c3RfaGVhZCAqdmlldywKKwkJICAgICAgY29uc3Qgc3RydWN0IGlndF9kZXZpY2VzX3ByaW50X2Zv
cm1hdCAqZm10KQogewogCXN0cnVjdCBpZ3RfZGV2aWNlICpkZXY7CiAKQEAgLTgyMSw3ICs4MjMs
MzggQEAgX19maW5kX3BjaShzdHJ1Y3QgaWd0X2xpc3RfaGVhZCAqdmlldywgY29uc3QgY2hhciAq
ZHJtKQogCXJldHVybiBOVUxMOwogfQogCi1zdGF0aWMgdm9pZCBpZ3RfZGV2c19wcmludF91c2Vy
KHN0cnVjdCBpZ3RfbGlzdF9oZWFkICp2aWV3KQorc3RhdGljIHZvaWQgX19wcmludF9maWx0ZXIo
Y2hhciAqYnVmLCBpbnQgbGVuLAorCQkJICAgY29uc3Qgc3RydWN0IGlndF9kZXZpY2VzX3ByaW50
X2Zvcm1hdCAqZm10LAorCQkJICAgc3RydWN0IGlndF9kZXZpY2UgKmRldiwKKwkJCSAgIGJvb2wg
cmVuZGVyKQoreworCWludCByZXQ7CisKKwlzd2l0Y2ggKGZtdC0+b3B0aW9uKSB7CisJY2FzZSBJ
R1RfUFJJTlRfRFJNOgorCQlyZXQgPSBzbnByaW50ZihidWYsIGxlbiwgImRybTolcyIsCisJCQkg
ICAgICAgcmVuZGVyID8gZGV2LT5kcm1fcmVuZGVyIDogZGV2LT5kcm1fY2FyZCk7CisJCWlndF9h
c3NlcnQocmV0IDwgbGVuKTsKKwkJYnJlYWs7CisJY2FzZSBJR1RfUFJJTlRfU1lTRlM6CisJCXJl
dCA9IHNucHJpbnRmKGJ1ZiwgbGVuLCAic3lzOiVzIiwgZGV2LT5zeXNwYXRoKTsKKwkJaWd0X2Fz
c2VydChyZXQgPCBsZW4pOworCQlicmVhazsKKwljYXNlIElHVF9QUklOVF9QQ0k6CisJCWlmICgh
cmVuZGVyKSB7CisJCQlyZXQgPSBzbnByaW50ZihidWYsIGxlbiwKKwkJCQkgICAgICAgInBjaTp2
ZW5kb3I9JXMsZGV2aWNlPSVzLGNhcmQ9JWQiLAorCQkJCSAgICAgICBkZXYtPnZlbmRvciwgZGV2
LT5kZXZpY2UsCisJCQkJICAgICAgIGRldi0+cGNpX2luZGV4KTsKKwkJCWlndF9hc3NlcnQocmV0
IDwgbGVuKTsKKwkJfQorCQlicmVhazsKKwl9OworfQorCitzdGF0aWMgdm9pZAoraWd0X2RldnNf
cHJpbnRfdXNlcihzdHJ1Y3QgaWd0X2xpc3RfaGVhZCAqdmlldywKKwkJICAgIGNvbnN0IHN0cnVj
dCBpZ3RfZGV2aWNlc19wcmludF9mb3JtYXQgKmZtdCkKIHsKIAlzdHJ1Y3QgaWd0X2RldmljZSAq
ZGV2OwogCkBAIC04MzQsNyArODY3LDYgQEAgc3RhdGljIHZvaWQgaWd0X2RldnNfcHJpbnRfdXNl
cihzdHJ1Y3QgaWd0X2xpc3RfaGVhZCAqdmlldykKIAkJc3RydWN0IGlndF9kZXZpY2UgKmRldjI7
CiAJCWNoYXIgZmlsdGVyWzI1Nl07CiAJCWNoYXIgKmRybV9uYW1lOwotCQlpbnQgcmV0OwogCiAJ
CWlmICghaXNfZHJtX3N1YnN5c3RlbShkZXYpKQogCQkJY29udGludWU7CkBAIC04NDUsMTYgKzg3
NywyMSBAQCBzdGF0aWMgdm9pZCBpZ3RfZGV2c19wcmludF91c2VyKHN0cnVjdCBpZ3RfbGlzdF9o
ZWFkICp2aWV3KQogCQlpZiAoIWRybV9uYW1lIHx8ICEqKytkcm1fbmFtZSkKIAkJCWNvbnRpbnVl
OwogCi0JCXJldCA9IHNucHJpbnRmKGZpbHRlciwgc2l6ZW9mKGZpbHRlciksICJkcm06JXMiLCBk
ZXYtPmRybV9jYXJkKTsKLQkJaWd0X2Fzc2VydChyZXQgPCBzaXplb2YoZmlsdGVyKSk7Ci0KIAkJ
cGNpX2RldiA9IF9fZmluZF9wY2kodmlldywgZGV2LT5kcm1fY2FyZCk7Ci0JCWlmIChwY2lfZGV2
KQorCisJCWlmIChmbXQtPm9wdGlvbiA9PSBJR1RfUFJJTlRfUENJICYmICFwY2lfZGV2KQorCQkJ
Y29udGludWU7CisKKwkJaWYgKHBjaV9kZXYpIHsKKwkJCV9fcHJpbnRfZmlsdGVyKGZpbHRlciwg
c2l6ZW9mKGZpbHRlciksIGZtdCwgcGNpX2RldiwKKwkJCQkgICAgICAgZmFsc2UpOwogCQkJcHJp
bnRmKCIlLTI0cyU0czolNHMgICAgJXNcbiIsCiAJCQkgICAgICAgZHJtX25hbWUsIHBjaV9kZXYt
PnZlbmRvciwgcGNpX2Rldi0+ZGV2aWNlLAogCQkJICAgICAgIGZpbHRlcik7Ci0JCWVsc2UKKwkJ
fSBlbHNlIHsKKwkJCV9fcHJpbnRfZmlsdGVyKGZpbHRlciwgc2l6ZW9mKGZpbHRlciksIGZtdCwg
ZGV2LCBmYWxzZSk7CiAJCQlwcmludGYoIiUtMjRzICAgICAgICAgICAgICVzXG4iLCBkcm1fbmFt
ZSwgZmlsdGVyKTsKKwkJfQogCiAJCW51bV9jaGlsZHJlbiA9IDA7CiAJCWlndF9saXN0X2Zvcl9l
YWNoX2VudHJ5KGRldjIsIHZpZXcsIGxpbmspIHsKQEAgLTg3NywxMyArOTE0LDE1IEBAIHN0YXRp
YyB2b2lkIGlndF9kZXZzX3ByaW50X3VzZXIoc3RydWN0IGlndF9saXN0X2hlYWQgKnZpZXcpCiAJ
CQlpZiAoIWRybV9uYW1lIHx8ICEqKytkcm1fbmFtZSkKIAkJCQljb250aW51ZTsKIAotCQkJcmV0
ID0gc25wcmludGYoZmlsdGVyLCBzaXplb2YoZmlsdGVyKSwgImRybTolcyIsCi0JCQkJICAgICAg
IGRldjItPmRybV9yZW5kZXIpOwotCQkJaWd0X2Fzc2VydChyZXQgPCBzaXplb2YoZmlsdGVyKSk7
Ci0KLQkJCXByaW50ZigiJXMlLTIycyAgICAgICAgICAgICAlc1xuIiwKLQkJCSAgICAgICAoKytp
ID09IG51bV9jaGlsZHJlbikgPyAi4pSU4pSAIiA6ICLilJzilIAiLAotCQkJICAgICAgIGRybV9u
YW1lLCBmaWx0ZXIpOworCQkJcHJpbnRmKCIlcyUtMjJzIiwKKwkJCQkoKytpID09IG51bV9jaGls
ZHJlbikgPyAi4pSU4pSAIiA6ICLilJzilIAiLCBkcm1fbmFtZSk7CisJCQlpZiAoZm10LT5vcHRp
b24gIT0gSUdUX1BSSU5UX1BDSSkgeworCQkJCV9fcHJpbnRfZmlsdGVyKGZpbHRlciwgc2l6ZW9m
KGZpbHRlciksIGZtdCwKKwkJCQkJICAgICAgIGRldjIsIHRydWUpOworCQkJCXByaW50ZigiICAg
ICAgICAgICAgICVzXG4iLCBmaWx0ZXIpOworCQkJfSBlbHNlIHsKKwkJCQlwcmludGYoIlxuIik7
CisJCQl9CiAJCX0KIAl9CiB9CkBAIC05MDgsNyArOTQ3LDEwIEBAIHN0YXRpYyB2b2lkIHByaW50
X2h0KEdIYXNoVGFibGUgKmh0KQogCWdfbGlzdF9mcmVlKGtleXMpOwogfQogCi1zdGF0aWMgdm9p
ZCBpZ3RfZGV2c19wcmludF9kZXRhaWwoc3RydWN0IGlndF9saXN0X2hlYWQgKnZpZXcpCitzdGF0
aWMgdm9pZAoraWd0X2RldnNfcHJpbnRfZGV0YWlsKHN0cnVjdCBpZ3RfbGlzdF9oZWFkICp2aWV3
LAorCQkgICAgICBjb25zdCBzdHJ1Y3QgaWd0X2RldmljZXNfcHJpbnRfZm9ybWF0ICpmbXQpCisK
IHsKIAlzdHJ1Y3QgaWd0X2RldmljZSAqZGV2OwogCkBAIC05MzIsNyArOTc0LDggQEAgc3RhdGlj
IHZvaWQgaWd0X2RldnNfcHJpbnRfZGV0YWlsKHN0cnVjdCBpZ3RfbGlzdF9oZWFkICp2aWV3KQog
fQogCiBzdGF0aWMgc3RydWN0IHByaW50X2Z1bmMgewotCXZvaWQgKCpwcm4pKHN0cnVjdCBpZ3Rf
bGlzdF9oZWFkICp2aWV3KTsKKwl2b2lkICgqcHJuKShzdHJ1Y3QgaWd0X2xpc3RfaGVhZCAqdmll
dywKKwkJICAgIGNvbnN0IHN0cnVjdCBpZ3RfZGV2aWNlc19wcmludF9mb3JtYXQgKik7CiB9IHBy
aW50X2Z1bmN0aW9uc1tdID0gewogCVtJR1RfUFJJTlRfU0lNUExFXSA9IHsgLnBybiA9IGlndF9k
ZXZzX3ByaW50X3NpbXBsZSB9LAogCVtJR1RfUFJJTlRfREVUQUlMXSA9IHsgLnBybiA9IGlndF9k
ZXZzX3ByaW50X2RldGFpbCB9LApAQCAtOTQxLDE1ICs5ODQsMTUgQEAgc3RhdGljIHN0cnVjdCBw
cmludF9mdW5jIHsKIAogLyoqCiAgKiBpZ3RfZGV2aWNlc19wcmludAotICogQHByaW50dHlwZTog
SUdUX1BSSU5UX1NJTVBMRSBvciBJR1RfUFJJTlRfREVUQUlMCisgKiBAZm10OiBQcmludCBmb3Jt
YXQgYXMgc3BlY2lmaWVkIGJ5IHN0cnVjdCBpZ3RfZGV2aWNlc19wcmludF9mb3JtYXQKICAqCiAg
KiBGdW5jdGlvbiBjYW4gYmUgdXNlZCBieSBleHRlcm5hbCB0b29sIHRvIHByaW50IGRldmljZSBh
cnJheSBpbiBzaW1wbGUKICAqIG9yIGRldGFpbGVkIGZvcm0uIFRoaXMgZnVuY3Rpb24gaXMgYWRk
ZWQgaGVyZSB0byBhdm9pZCBleHBvc2luZwogICogaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGF0
YSBzdHJ1Y3R1cmVzLgogICovCi12b2lkIGlndF9kZXZpY2VzX3ByaW50KGVudW0gaWd0X2Rldmlj
ZXNfcHJpbnRfdHlwZSBwcmludHR5cGUpCit2b2lkIGlndF9kZXZpY2VzX3ByaW50KGNvbnN0IHN0
cnVjdCBpZ3RfZGV2aWNlc19wcmludF9mb3JtYXQgKmZtdCkKIHsKLQlwcmludF9mdW5jdGlvbnNb
cHJpbnR0eXBlXS5wcm4oJmlndF9kZXZzLmZpbHRlcmVkKTsKKwlwcmludF9mdW5jdGlvbnNbZm10
LT50eXBlXS5wcm4oJmlndF9kZXZzLmZpbHRlcmVkLCBmbXQpOwogfQogCiAvKioKZGlmZiAtLWdp
dCBhL2xpYi9pZ3RfZGV2aWNlX3NjYW4uaCBiL2xpYi9pZ3RfZGV2aWNlX3NjYW4uaAppbmRleCA5
ODIyYzIyY2I2OWMuLmJiNGJlNzIzNDVmYiAxMDA2NDQKLS0tIGEvbGliL2lndF9kZXZpY2Vfc2Nh
bi5oCisrKyBiL2xpYi9pZ3RfZGV2aWNlX3NjYW4uaApAQCAtMzUsMTEgKzM1LDIyIEBACiAjaW5j
bHVkZSA8dW5pc3RkLmg+CiAKIGVudW0gaWd0X2RldmljZXNfcHJpbnRfdHlwZSB7Ci0JSUdUX1BS
SU5UX1NJTVBMRSwKKwlJR1RfUFJJTlRfU0lNUExFID0gMCwKIAlJR1RfUFJJTlRfREVUQUlMLAog
CUlHVF9QUklOVF9VU0VSLCAvKiBFbmQgdXNlciBmcmllbmRseS4gKi8KIH07CiAKK2VudW0gaWd0
X2RldmljZXNfcHJpbnRfb3B0aW9uIHsKKwlJR1RfUFJJTlRfRFJNID0gMCwKKwlJR1RfUFJJTlRf
U1lTRlMsCisJSUdUX1BSSU5UX1BDSSwKK307CisKK3N0cnVjdCBpZ3RfZGV2aWNlc19wcmludF9m
b3JtYXQgeworCWVudW0gaWd0X2RldmljZXNfcHJpbnRfdHlwZSAgIHR5cGU7CisJZW51bSBpZ3Rf
ZGV2aWNlc19wcmludF9vcHRpb24gb3B0aW9uOworfTsKKwogI2RlZmluZSBJTlRFR1JBVEVEX0k5
MTVfR1BVX1BDSV9JRCAiMDAwMDowMDowMi4wIgogI2RlZmluZSBQQ0lfU0xPVF9OQU1FX1NJWkUg
MTIKIHN0cnVjdCBpZ3RfZGV2aWNlX2NhcmQgewpAQCAtNTEsNyArNjIsNyBAQCBzdHJ1Y3QgaWd0
X2RldmljZV9jYXJkIHsKIAogdm9pZCBpZ3RfZGV2aWNlc19zY2FuKGJvb2wgZm9yY2UpOwogCi12
b2lkIGlndF9kZXZpY2VzX3ByaW50KGVudW0gaWd0X2RldmljZXNfcHJpbnRfdHlwZSBwcmludHR5
cGUpOwordm9pZCBpZ3RfZGV2aWNlc19wcmludChjb25zdCBzdHJ1Y3QgaWd0X2RldmljZXNfcHJp
bnRfZm9ybWF0ICpmbXQpOwogdm9pZCBpZ3RfZGV2aWNlc19wcmludF92ZW5kb3JzKHZvaWQpOwog
dm9pZCBpZ3RfZGV2aWNlX3ByaW50X2ZpbHRlcl90eXBlcyh2b2lkKTsKIApkaWZmIC0tZ2l0IGEv
dG9vbHMvaW50ZWxfZ3B1X3RvcC5jIGIvdG9vbHMvaW50ZWxfZ3B1X3RvcC5jCmluZGV4IDUyMzA0
NzJkMmFmNC4uMDdmODhkNTU1ZGM4IDEwMDY0NAotLS0gYS90b29scy9pbnRlbF9ncHVfdG9wLmMK
KysrIGIvdG9vbHMvaW50ZWxfZ3B1X3RvcC5jCkBAIC0xMzg3LDcgKzEzODcsMTEgQEAgaW50IG1h
aW4oaW50IGFyZ2MsIGNoYXIgKiphcmd2KQogCWlndF9kZXZpY2VzX3NjYW4oZmFsc2UpOwogCiAJ
aWYgKGxpc3RfZGV2aWNlKSB7Ci0JCWlndF9kZXZpY2VzX3ByaW50KElHVF9QUklOVF9VU0VSKTsK
KwkJc3RydWN0IGlndF9kZXZpY2VzX3ByaW50X2Zvcm1hdCBmbXQgPSB7CisJCQkudHlwZSA9IElH
VF9QUklOVF9VU0VSCisJCX07CisKKwkJaWd0X2RldmljZXNfcHJpbnQoJmZtdCk7CiAJCWdvdG8g
ZXhpdDsKIAl9CiAKZGlmZiAtLWdpdCBhL3Rvb2xzL2xzZ3B1LmMgYi90b29scy9sc2dwdS5jCmlu
ZGV4IDNiMjM0YjczMzYxYS4uMTY5YWIwYzI5ZTUwIDEwMDY0NAotLS0gYS90b29scy9sc2dwdS5j
CisrKyBiL3Rvb2xzL2xzZ3B1LmMKQEAgLTkxLDcgKzkxLDExIEBAIHN0YXRpYyBjb25zdCBjaGFy
ICp1c2FnZV9zdHIgPQogCSIgIC12LCAtLWxpc3QtdmVuZG9ycyAgICAgICAgICBMaXN0IHJlY29n
bml6ZWQgdmVuZG9yc1xuIgogCSIgIC1sLCAtLWxpc3QtZmlsdGVyLXR5cGVzICAgICBMaXN0IHJl
Z2lzdGVyZWQgZGV2aWNlIGZpbHRlcnMgdHlwZXNcbiIKIAkiICAtZCwgLS1kZXZpY2UgZmlsdGVy
ICAgICAgICAgRGV2aWNlIGZpbHRlciwgY2FuIGJlIGdpdmVuIG11bHRpcGxlIHRpbWVzXG4iCi0J
IiAgLWgsIC0taGVscCAgICAgICAgICAgICAgICAgIFNob3cgdGhpcyBoZWxwIG1lc3NhZ2UgYW5k
IGV4aXRcbiI7CisJIiAgLWgsIC0taGVscCAgICAgICAgICAgICAgICAgIFNob3cgdGhpcyBoZWxw
IG1lc3NhZ2UgYW5kIGV4aXRcbiIKKwkiXG5PcHRpb25zIHZhbGlkIGZvciBkZWZhdWx0IHByaW50
IG91dCBtb2RlIG9ubHk6XG4iCisJIiAgICAgIC0tZHJtICAgICAgICAgICAgICAgICAgIFNob3cg
RFJNIGZpbHRlcnMgKGRlZmF1bHQpIGZvciBlYWNoIGRldmljZVxuIgorCSIgICAgICAtLXN5c2Zz
ICAgICAgICAgICAgICAgICBTaG93IHN5c2ZzIGZpbHRlcnMgZm9yIGVhY2ggZGV2aWNlXG4iCisJ
IiAgICAgIC0tcGNpICAgICAgICAgICAgICAgICAgIFNob3cgUENJIGZpbHRlcnMgZm9yIGVhY2gg
ZGV2aWNlXG4iOwogCiBzdGF0aWMgdm9pZCB0ZXN0X2RldmljZV9vcGVuKHN0cnVjdCBpZ3RfZGV2
aWNlX2NhcmQgKmNhcmQpCiB7CkBAIC0xNTMsNiArMTU3LDkgQEAgc3RhdGljIGNoYXIgKmdldF9k
ZXZpY2VfZnJvbV9yYyh2b2lkKQogaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKIHsK
IAlzdGF0aWMgc3RydWN0IG9wdGlvbiBsb25nX29wdGlvbnNbXSA9IHsKKwkJeyJkcm0iLCAgICAg
ICAgICAgICAgIG5vX2FyZ3VtZW50LCAgICAgICBOVUxMLCAwfSwKKwkJeyJzeXNmcyIsICAgICAg
ICAgICAgIG5vX2FyZ3VtZW50LCAgICAgICBOVUxMLCAxfSwKKwkJeyJwY2kiLCAgICAgICAgICAg
ICAgIG5vX2FyZ3VtZW50LCAgICAgICBOVUxMLCAyfSwKIAkJeyJwcmludC1zaW1wbGUiLCAgICAg
IG5vX2FyZ3VtZW50LCAgICAgICBOVUxMLCBPUFRfUFJJTlRfU0lNUExFfSwKIAkJeyJwcmludC1k
ZXRhaWwiLCAgICAgIG5vX2FyZ3VtZW50LCAgICAgICBOVUxMLCBPUFRfUFJJTlRfREVUQUlMfSwK
IAkJeyJsaXN0LXZlbmRvcnMiLCAgICAgIG5vX2FyZ3VtZW50LCAgICAgICBOVUxMLCBPUFRfTElT
VF9WRU5ET1JTfSwKQEAgLTE2MywxNyArMTcwLDE5IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFy
ICphcmd2W10pCiAJfTsKIAlpbnQgYywgaW5kZXggPSAwOwogCWNoYXIgKmVudl9kZXZpY2UgPSBO
VUxMLCAqb3B0X2RldmljZSA9IE5VTEwsICpyY19kZXZpY2UgPSBOVUxMOwotCWVudW0gaWd0X2Rl
dmljZXNfcHJpbnRfdHlwZSBwcmludHR5cGUgPSBJR1RfUFJJTlRfVVNFUjsKKwlzdHJ1Y3QgaWd0
X2RldmljZXNfcHJpbnRfZm9ybWF0IGZtdCA9IHsKKwkJCS50eXBlID0gSUdUX1BSSU5UX1VTRVIs
CisJfTsKIAogCXdoaWxlICgoYyA9IGdldG9wdF9sb25nKGFyZ2MsIGFyZ3YsICJzcHZsZDpoIiwK
IAkJCQlsb25nX29wdGlvbnMsICZpbmRleCkpICE9IC0xKSB7CiAJCXN3aXRjaChjKSB7CiAKIAkJ
Y2FzZSBPUFRfUFJJTlRfU0lNUExFOgotCQkJcHJpbnR0eXBlID0gSUdUX1BSSU5UX1NJTVBMRTsK
KwkJCWZtdC50eXBlID0gSUdUX1BSSU5UX1NJTVBMRTsKIAkJCWJyZWFrOwogCQljYXNlIE9QVF9Q
UklOVF9ERVRBSUw6Ci0JCQlwcmludHR5cGUgPSBJR1RfUFJJTlRfREVUQUlMOworCQkJZm10LnR5
cGUgPSBJR1RfUFJJTlRfREVUQUlMOwogCQkJYnJlYWs7CiAJCWNhc2UgT1BUX0xJU1RfVkVORE9S
UzoKIAkJCWdfc2hvd192ZW5kb3JzID0gdHJ1ZTsKQEAgLTE4Nyw2ICsxOTYsMTUgQEAgaW50IG1h
aW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKIAkJY2FzZSBPUFRfSEVMUDoKIAkJCWdfaGVscCA9
IHRydWU7CiAJCQlicmVhazsKKwkJY2FzZSAwOgorCQkJZm10Lm9wdGlvbiA9IElHVF9QUklOVF9E
Uk07CisJCQlicmVhazsKKwkJY2FzZSAxOgorCQkJZm10Lm9wdGlvbiA9IElHVF9QUklOVF9TWVNG
UzsKKwkJCWJyZWFrOworCQljYXNlIDI6CisJCQlmbXQub3B0aW9uID0gSUdUX1BSSU5UX1BDSTsK
KwkJCWJyZWFrOwogCQl9CiAJfQogCkBAIC0yMzksMTQgKzI1NywxNCBAQCBpbnQgbWFpbihpbnQg
YXJnYywgY2hhciAqYXJndltdKQogCQlwcmludGYoIkRldmljZSBkZXRhaWw6XG4iKTsKIAkJcHJp
bnRfY2FyZCgmY2FyZCk7CiAJCXRlc3RfZGV2aWNlX29wZW4oJmNhcmQpOwotCQlpZiAocHJpbnR0
eXBlID09IElHVF9QUklOVF9ERVRBSUwpIHsKKwkJaWYgKGZtdC50eXBlID09IElHVF9QUklOVF9E
RVRBSUwpIHsKIAkJCXByaW50ZigiXG4iKTsKLQkJCWlndF9kZXZpY2VzX3ByaW50KHByaW50dHlw
ZSk7CisJCQlpZ3RfZGV2aWNlc19wcmludCgmZm10KTsKIAkJfQogCQlwcmludGYoIi0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiIpOwogCiAJfSBlbHNlIHsKLQkJ
aWd0X2RldmljZXNfcHJpbnQocHJpbnR0eXBlKTsKKwkJaWd0X2RldmljZXNfcHJpbnQoJmZtdCk7
CiAJfQogCiAJZnJlZShyY19kZXZpY2UpOwotLSAKMi4yNS4xCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVs
LWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

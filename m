Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2F327B5906
	for <lists+intel-gfx@lfdr.de>; Wed, 18 Sep 2019 02:32:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A948A6EDA1;
	Wed, 18 Sep 2019 00:32:18 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7E8AF6ED9A
 for <intel-gfx@lists.freedesktop.org>; Wed, 18 Sep 2019 00:32:17 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by fmsmga105.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 17 Sep 2019 17:32:17 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,518,1559545200"; d="scan'208";a="211672665"
Received: from labuser-z97x-ud5h.jf.intel.com ([10.54.75.49])
 by fmsmga004.fm.intel.com with ESMTP; 17 Sep 2019 17:32:16 -0700
From: Manasi Navare <manasi.d.navare@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 17 Sep 2019 17:33:50 -0700
Message-Id: <20190918003352.26322-4-manasi.d.navare@intel.com>
X-Mailer: git-send-email 2.19.1
In-Reply-To: <20190918003352.26322-1-manasi.d.navare@intel.com>
References: <20190918003352.26322-1-manasi.d.navare@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 4/6] drm/i915/display/icl: Enable master-slaves in
 trans port sync
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgcGVyIHRoZSBkaXNwbGF5IGVuYWJsZSBzZXF1ZW5jZSwgd2UgbmVlZCB0byBmb2xsb3cgdGhl
IGVuYWJsZSBzZXF1ZW5jZQpmb3Igc2xhdmVzIGZpcnN0IHdpdGggRFBfVFBfQ1RMIHNldCB0byBJ
ZGxlIGFuZCBjb25maWd1cmUgdGhlIHRyYW5zY29kZXIKcG9ydCBzeW5jIHJlZ2lzdGVyIHRvIHNl
bGVjdCB0aGUgY29yZXJzcG9uZGluZyBtYXN0ZXIsIHRoZW4gZm9sbG93IHRoZQplbmFibGUgc2Vx
dWVuY2UgZm9yIG1hc3RlciBsZWF2aW5nIERQX1RQX0NUTCB0byBpZGxlLgpBdCB0aGlzIHBvaW50
IHRoZSB0cmFuc2NvZGVyIHBvcnQgc3luYyBtb2RlIGlzIGNvbmZpZ3VyZWQgYW5kIGVuYWJsZWQK
YW5kIHRoZSBWYmxhbmtzIG9mIGJvdGggcG9ydHMgYXJlIHN5bmNocm9uaXplZCBzbyB0aGVuIHNl
dCBEUF9UUF9DVEwKZm9yIHRoZSBzbGF2ZSBhbmQgbWFzdGVyIHRvIE5vcm1hbCBhbmQgZG8gcG9z
dCBjcnRjIGVuYWJsZSB1cGRhdGVzLgoKdjY6CiogTW9kZXNldCBpbXBsaWVzIGFjdGl2ZV9jaGFu
Z2VkLCByZW1vdmUgb25lIGNvbmRpdGlvbiAoTWFhcnRlbikKdjU6CiogRml4IGNoZWNrcGF0Y2gg
d2FybmluZyAoTWFuYXNpKQp2NDoKKiBSZXVzZSBza2xfY29tbWl0X21vZGVzZXRfZW5hYmxlcygp
IGhvb2sgKE1hYXJ0ZW4pCiogT2J0YWluIHNsYXZlIGNydGMgYW5kIHN0YXRlcyBmcm9tIG1hc3Rl
ciAoTWFhcnRlbikKdjM6CiogUmViYXNlIG9uIGRybS10aXAgKE1hbmFzaSkKdjI6CiogQ3JlYXRl
IGEgaWNsX3VwZGF0ZV9jcnRjcyBob29rIChNYWFydGVuLCBEYW52ZXQpCiogVGhpcyBzZXF1ZW5j
ZSBvbmx5IGZvciBDUlRDcyBpbiB0cmFucyBwb3J0IHN5bmMgbW9kZSAoTWFhcnRlbikKCkNjOiBE
YW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgpDYzogVmlsbGUgU3lyasOkbMOk
IDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KQ2M6IE1hYXJ0ZW4gTGFua2hvcnN0IDxt
YWFydGVuLmxhbmtob3JzdEBsaW51eC5pbnRlbC5jb20+CkNjOiBNYXR0IFJvcGVyIDxtYXR0aGV3
LmQucm9wZXJAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBNYW5hc2kgTmF2YXJlIDxtYW5hc2ku
ZC5uYXZhcmVAaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0
ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2RkaS5jICAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5LmMgfCAxNTkgKysrKysrKysrKysrKysrKysrLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmggfCAgIDQgKwogMyBmaWxlcyBjaGFu
Z2VkLCAxNjIgaW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kZGkuYwppbmRleCAzZTYzOTQxMzk5NjQuLjYyZTlmNTYwMmI2YiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCkBAIC0zMzQ3LDcgKzMz
NDcsOCBAQCBzdGF0aWMgdm9pZCBoc3dfZGRpX3ByZV9lbmFibGVfZHAoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIsCiAJCQkJCSAgICAgIHRydWUpOwogCWludGVsX2RwX3Npbmtfc2V0X2Zl
Y19yZWFkeShpbnRlbF9kcCwgY3J0Y19zdGF0ZSk7CiAJaW50ZWxfZHBfc3RhcnRfbGlua190cmFp
bihpbnRlbF9kcCk7Ci0JaWYgKHBvcnQgIT0gUE9SVF9BIHx8IElOVEVMX0dFTihkZXZfcHJpdikg
Pj0gOSkKKwlpZiAoKHBvcnQgIT0gUE9SVF9BIHx8IElOVEVMX0dFTihkZXZfcHJpdikgPj0gOSkg
JiYKKwkgICAgIWlzX3RyYW5zX3BvcnRfc3luY19tb2RlKGRldl9wcml2LCBjcnRjX3N0YXRlKSkK
IAkJaW50ZWxfZHBfc3RvcF9saW5rX3RyYWluKGludGVsX2RwKTsKIAogCWludGVsX2RkaV9lbmFi
bGVfZmVjKGVuY29kZXIsIGNydGNfc3RhdGUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2Rpc3BsYXkuYwppbmRleCBiZWEzZjYzMWFkMzYuLjA0NWNhODUwODlhNiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKQEAgLTUyMSw2
ICs1MjEsMjQgQEAgbmVlZHNfbW9kZXNldChjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
c3RhdGUpCiAJcmV0dXJuIGRybV9hdG9taWNfY3J0Y19uZWVkc19tb2Rlc2V0KCZzdGF0ZS0+YmFz
ZSk7CiB9CiAKK2Jvb2wKK2lzX3RyYW5zX3BvcnRfc3luY19tb2RlKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdiwKKwkJCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpzdGF0
ZSkKK3sKKwlyZXR1cm4gKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTEgJiYKKwkJKHN0YXRlLT5t
YXN0ZXJfdHJhbnNjb2RlciAhPSBJTlZBTElEX1RSQU5TQ09ERVIgfHwKKwkJIHN0YXRlLT5zeW5j
X21vZGVfc2xhdmVzX21hc2spKTsKK30KKworc3RhdGljIGJvb2wKK2lzX3RyYW5zX3BvcnRfc3lu
Y19tYXN0ZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAorCQkJICBjb25zdCBz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqc3RhdGUpCit7CisJcmV0dXJuIChJTlRFTF9HRU4oZGV2
X3ByaXYpID49IDExICYmCisJCShzdGF0ZS0+bWFzdGVyX3RyYW5zY29kZXIgPT0gSU5WQUxJRF9U
UkFOU0NPREVSICYmCisJCSBzdGF0ZS0+c3luY19tb2RlX3NsYXZlc19tYXNrKSk7Cit9CisKIC8q
CiAgKiBQbGF0Zm9ybSBzcGVjaWZpYyBoZWxwZXJzIHRvIGNhbGN1bGF0ZSB0aGUgcG9ydCBQTEwg
bG9vcGJhY2stIChjbG9jay5tKSwKICAqIGFuZCBwb3N0LWRpdmlkZXIgKGNsb2NrLnApIHZhbHVl
cywgcHJlLSAoY2xvY2sudmNvKSBhbmQgcG9zdC1kaXZpZGVkIGZhc3QKQEAgLTEzODc3LDYgKzEz
ODk1LDMwIEBAIHN0YXRpYyB2b2lkIGludGVsX3VwZGF0ZV9jcnRjKHN0cnVjdCBpbnRlbF9jcnRj
ICpjcnRjLAogCWludGVsX2ZpbmlzaF9jcnRjX2NvbW1pdChzdGF0ZSwgY3J0Yyk7CiB9CiAKK3N0
YXRpYyBzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfZ2V0X3NsYXZlX2NydGMoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2LAorCQkJCQkgICAgICAgc3RydWN0IGludGVsX2NydGNfc3Rh
dGUgKm5ld19jcnRjX3N0YXRlKQoreworCWlmIChuZXdfY3J0Y19zdGF0ZS0+c3luY19tb2RlX3Ns
YXZlc19tYXNrICYKKwkgICAgQklUKFRSQU5TQ09ERVJfQSkpCisJCXJldHVybiBpbnRlbF9nZXRf
Y3J0Y19mb3JfcGlwZShkZXZfcHJpdiwKKwkJCQkJICAgICAgIFBJUEVfQSk7CisJZWxzZSBpZiAo
bmV3X2NydGNfc3RhdGUtPnN5bmNfbW9kZV9zbGF2ZXNfbWFzayAmCisJCSBCSVQoVFJBTlNDT0RF
Ul9CKSkKKwkJcmV0dXJuIGludGVsX2dldF9jcnRjX2Zvcl9waXBlKGRldl9wcml2LAorCQkJCQkg
ICAgICAgUElQRV9CKTsKKwllbHNlIGlmIChuZXdfY3J0Y19zdGF0ZS0+c3luY19tb2RlX3NsYXZl
c19tYXNrICYKKwkJIEJJVChUUkFOU0NPREVSX0MpKQorCQlyZXR1cm4gaW50ZWxfZ2V0X2NydGNf
Zm9yX3BpcGUoZGV2X3ByaXYsCisJCQkJCSAgICAgICBQSVBFX0MpOworCWVsc2UgaWYgKG5ld19j
cnRjX3N0YXRlLT5zeW5jX21vZGVfc2xhdmVzX21hc2sgJgorCQkgQklUKFRSQU5TQ09ERVJfRCkp
CisJCXJldHVybiBpbnRlbF9nZXRfY3J0Y19mb3JfcGlwZShkZXZfcHJpdiwKKwkJCQkJICAgICAg
IFBJUEVfRCk7CisJLyogc2hvdWxkIG5ldmVyIGhhcHBlbiAqLworCVdBUk5fT04oMSk7CisJcmV0
dXJuIE5VTEw7Cit9CisKIHN0YXRpYyB2b2lkIGludGVsX29sZF9jcnRjX3N0YXRlX2Rpc2FibGVz
KHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAogCQkJCQkgIHN0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwKIAkJCQkJICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqbmV3X2NydGNfc3RhdGUsCkBAIC0xMzk1NSw2ICsxMzk5NywxMDQgQEAgc3RhdGljIHZvaWQg
aW50ZWxfY29tbWl0X21vZGVzZXRfZW5hYmxlcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpz
dGF0ZSkKIAl9CiB9CiAKK3N0YXRpYyB2b2lkIGludGVsX2NydGNfZW5hYmxlX3RyYW5zX3BvcnRf
c3luYyhzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKKwkJCQkJICAgICAgc3RydWN0IGludGVsX2F0
b21pY19zdGF0ZSAqc3RhdGUsCisJCQkJCSAgICAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpu
ZXdfY3J0Y19zdGF0ZSkKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0
b19pOTE1KHN0YXRlLT5iYXNlLmRldik7CisKKwl1cGRhdGVfc2NhbmxpbmVfb2Zmc2V0KG5ld19j
cnRjX3N0YXRlKTsKKwlkZXZfcHJpdi0+ZGlzcGxheS5jcnRjX2VuYWJsZShuZXdfY3J0Y19zdGF0
ZSwgc3RhdGUpOworCWludGVsX2NydGNfZW5hYmxlX3BpcGVfY3JjKGNydGMpOworfQorCitzdGF0
aWMgdm9pZCBpbnRlbF9zZXRfZHBfdHBfY3RsX25vcm1hbChzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0
YywKKwkJCQkgICAgICAgc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCit7CisJc3Ry
dWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGU7CisJc3RydWN0IGRybV9jb25uZWN0
b3IgKmNvbm47CisJc3RydWN0IGludGVsX2RwICppbnRlbF9kcDsKKwlpbnQgaTsKKworCWZvcl9l
YWNoX25ld19jb25uZWN0b3JfaW5fc3RhdGUoJnN0YXRlLT5iYXNlLCBjb25uLCBjb25uX3N0YXRl
LCBpKSB7CisJCWlmIChjb25uX3N0YXRlLT5jcnRjID09ICZjcnRjLT5iYXNlKQorCQkJYnJlYWs7
CisJfQorCWludGVsX2RwID0gZW5jX3RvX2ludGVsX2RwKCZpbnRlbF9hdHRhY2hlZF9lbmNvZGVy
KGNvbm4pLT5iYXNlKTsKKwlpbnRlbF9kcF9zdG9wX2xpbmtfdHJhaW4oaW50ZWxfZHApOworfQor
CitzdGF0aWMgdm9pZCBpbnRlbF9wb3N0X2NydGNfZW5hYmxlX3VwZGF0ZXMoc3RydWN0IGludGVs
X2NydGMgKmNydGMsCisJCQkJCSAgIHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAor
CQkJCQkgICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUsCisJCQkJCSAg
IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpuZXdfY3J0Y19zdGF0ZSkKK3sKKwlzdHJ1Y3QgaW50
ZWxfcGxhbmVfc3RhdGUgKm5ld19wbGFuZV9zdGF0ZSA9CisJCWludGVsX2F0b21pY19nZXRfbmV3
X3BsYW5lX3N0YXRlKHN0YXRlLAorCQkJCQkJIHRvX2ludGVsX3BsYW5lKGNydGMtPmJhc2UucHJp
bWFyeSkpOworCisJaWYgKG5ld19jcnRjX3N0YXRlLT51cGRhdGVfcGlwZSAmJiAhbmV3X2NydGNf
c3RhdGUtPmVuYWJsZV9mYmMpCisJCWludGVsX2ZiY19kaXNhYmxlKGNydGMpOworCWVsc2UgaWYg
KG5ld19wbGFuZV9zdGF0ZSkKKwkJaW50ZWxfZmJjX2VuYWJsZShjcnRjLCBuZXdfY3J0Y19zdGF0
ZSwgbmV3X3BsYW5lX3N0YXRlKTsKKworCWludGVsX2JlZ2luX2NydGNfY29tbWl0KHN0YXRlLCBj
cnRjKTsKKwlza2xfdXBkYXRlX3BsYW5lc19vbl9jcnRjKHN0YXRlLCBjcnRjKTsKKwlpbnRlbF9m
aW5pc2hfY3J0Y19jb21taXQoc3RhdGUsIGNydGMpOworfQorCitzdGF0aWMgdm9pZCBpbnRlbF91
cGRhdGVfdHJhbnNfcG9ydF9zeW5jX2NydGNzKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAorCQkJ
CQkgICAgICAgc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsCisJCQkJCSAgICAgICBz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUsCisJCQkJCSAgICAgICBzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqbmV3X2NydGNfc3RhdGUpCit7CisJc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShzdGF0ZS0+YmFzZS5kZXYpOworCXN0cnVjdCBp
bnRlbF9jcnRjICpzbGF2ZV9jcnRjID0gaW50ZWxfZ2V0X3NsYXZlX2NydGMoZGV2X3ByaXYsCisJ
CQkJCQkJICAgICBuZXdfY3J0Y19zdGF0ZSk7CisJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm5l
d19zbGF2ZV9jcnRjX3N0YXRlID0KKwkJaW50ZWxfYXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShz
dGF0ZSwgc2xhdmVfY3J0Yyk7CisJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9zbGF2ZV9j
cnRjX3N0YXRlID0KKwkJaW50ZWxfYXRvbWljX2dldF9vbGRfY3J0Y19zdGF0ZShzdGF0ZSwgc2xh
dmVfY3J0Yyk7CisKKwlXQVJOX09OKCFzbGF2ZV9jcnRjIHx8ICFuZXdfc2xhdmVfY3J0Y19zdGF0
ZSB8fAorCQkhb2xkX3NsYXZlX2NydGNfc3RhdGUpOworCisJRFJNX0RFQlVHX0tNUygiVXBkYXRp
bmcgVHJhbnNjb2RlciBQb3J0IFN5bmMgTWFzdGVyIENSVEMgPSAlZCAlcyBhbmQgU2xhdmUgQ1JU
QyAlZCAlc1xuIiwKKwkJICAgICAgY3J0Yy0+YmFzZS5iYXNlLmlkLCBjcnRjLT5iYXNlLm5hbWUs
IHNsYXZlX2NydGMtPmJhc2UuYmFzZS5pZCwKKwkJICAgICAgc2xhdmVfY3J0Yy0+YmFzZS5uYW1l
KTsKKworCS8qIEVuYWJsZSBzZXEgZm9yIHNsYXZlIHdpdGggd2l0aCBEUF9UUF9DVEwgbGVmdCBJ
ZGxlIHVudGlsIHRoZQorCSAqIG1hc3RlciBpcyByZWFkeQorCSAqLworCWludGVsX2NydGNfZW5h
YmxlX3RyYW5zX3BvcnRfc3luYyhzbGF2ZV9jcnRjLAorCQkJCQkgIHN0YXRlLAorCQkJCQkgIG5l
d19zbGF2ZV9jcnRjX3N0YXRlKTsKKworCS8qIEVuYWJsZSBzZXEgZm9yIG1hc3RlciB3aXRoIHdp
dGggRFBfVFBfQ1RMIGxlZnQgSWRsZSAqLworCWludGVsX2NydGNfZW5hYmxlX3RyYW5zX3BvcnRf
c3luYyhjcnRjLAorCQkJCQkgIHN0YXRlLAorCQkJCQkgIG5ld19jcnRjX3N0YXRlKTsKKworCS8q
IFNldCBTbGF2ZSdzIERQX1RQX0NUTCB0byBOb3JtYWwgKi8KKwlpbnRlbF9zZXRfZHBfdHBfY3Rs
X25vcm1hbChzbGF2ZV9jcnRjLAorCQkJCSAgIHN0YXRlKTsKKworCS8qIFNldCBNYXN0ZXIncyBE
UF9UUF9DVEwgVG8gTm9ybWFsICovCisJdXNsZWVwX3JhbmdlKDIwMCwgNDAwKTsKKwlpbnRlbF9z
ZXRfZHBfdHBfY3RsX25vcm1hbChjcnRjLAorCQkJCSAgIHN0YXRlKTsKKworCS8qIE5vdyBkbyB0
aGUgcG9zdCBjcnRjIGVuYWJsZSBmb3IgYWxsIG1hc3RlciBhbmQgc2xhdmVzICovCisJaW50ZWxf
cG9zdF9jcnRjX2VuYWJsZV91cGRhdGVzKHNsYXZlX2NydGMsCisJCQkJICAgICAgIHN0YXRlLAor
CQkJCSAgICAgICBuZXdfc2xhdmVfY3J0Y19zdGF0ZSwKKwkJCQkgICAgICAgb2xkX3NsYXZlX2Ny
dGNfc3RhdGUpOworCWludGVsX3Bvc3RfY3J0Y19lbmFibGVfdXBkYXRlcyhjcnRjLAorCQkJCSAg
ICAgICBzdGF0ZSwKKwkJCQkgICAgICAgbmV3X2NydGNfc3RhdGUsCisJCQkJICAgICAgIG9sZF9j
cnRjX3N0YXRlKTsKK30KKwogc3RhdGljIHZvaWQgc2tsX2NvbW1pdF9tb2Rlc2V0X2VuYWJsZXMo
c3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShzdGF0ZS0+YmFzZS5kZXYpOwpAQCAtMTM5ODksNiAr
MTQxMjksNyBAQCBzdGF0aWMgdm9pZCBza2xfY29tbWl0X21vZGVzZXRfZW5hYmxlcyhzdHJ1Y3Qg
aW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIAkJZm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNf
aW5fc3RhdGUoc3RhdGUsIGNydGMsIG9sZF9jcnRjX3N0YXRlLCBuZXdfY3J0Y19zdGF0ZSwgaSkg
ewogCQkJYm9vbCB2Ymxfd2FpdCA9IGZhbHNlOwogCQkJdW5zaWduZWQgaW50IGNtYXNrID0gZHJt
X2NydGNfbWFzaygmY3J0Yy0+YmFzZSk7CisJCQlib29sIG1vZGVzZXQgPSBuZWVkc19tb2Rlc2V0
KG5ld19jcnRjX3N0YXRlKTsKIAogCQkJcGlwZSA9IGNydGMtPnBpcGU7CiAKQEAgLTE0MDExLDEy
ICsxNDE1MiwyNCBAQCBzdGF0aWMgdm9pZCBza2xfY29tbWl0X21vZGVzZXRfZW5hYmxlcyhzdHJ1
Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIAkJCSAqLwogCQkJaWYgKCFza2xfZGRiX2Vu
dHJ5X2VxdWFsKCZuZXdfY3J0Y19zdGF0ZS0+d20uc2tsLmRkYiwKIAkJCQkJCSAmb2xkX2NydGNf
c3RhdGUtPndtLnNrbC5kZGIpICYmCi0JCQkgICAgIW5ld19jcnRjX3N0YXRlLT5iYXNlLmFjdGl2
ZV9jaGFuZ2VkICYmCisJCQkgICAgIW1vZGVzZXQgJiYKIAkJCSAgICBzdGF0ZS0+d21fcmVzdWx0
cy5kaXJ0eV9waXBlcyAhPSB1cGRhdGVkKQogCQkJCXZibF93YWl0ID0gdHJ1ZTsKIAotCQkJaW50
ZWxfdXBkYXRlX2NydGMoY3J0Yywgc3RhdGUsIG9sZF9jcnRjX3N0YXRlLAotCQkJCQkgIG5ld19j
cnRjX3N0YXRlKTsKKwkJCWlmIChtb2Rlc2V0ICYmIGlzX3RyYW5zX3BvcnRfc3luY19tb2RlKGRl
dl9wcml2LAorCQkJCQkJCSAgICAgICBuZXdfY3J0Y19zdGF0ZSkpIHsKKwkJCQlpZiAoaXNfdHJh
bnNfcG9ydF9zeW5jX21hc3RlcihkZXZfcHJpdiwKKwkJCQkJCQkgICAgICBuZXdfY3J0Y19zdGF0
ZSkpCisJCQkJCWludGVsX3VwZGF0ZV90cmFuc19wb3J0X3N5bmNfY3J0Y3MoY3J0YywKKwkJCQkJ
CQkJCSAgIHN0YXRlLAorCQkJCQkJCQkJICAgb2xkX2NydGNfc3RhdGUsCisJCQkJCQkJCQkgICBu
ZXdfY3J0Y19zdGF0ZSk7CisJCQkJZWxzZQorCQkJCQljb250aW51ZTsKKwkJCX0gZWxzZSB7CisJ
CQkJaW50ZWxfdXBkYXRlX2NydGMoY3J0Yywgc3RhdGUsIG9sZF9jcnRjX3N0YXRlLAorCQkJCQkJ
ICBuZXdfY3J0Y19zdGF0ZSk7CisJCQl9CiAKIAkJCWlmICh2Ymxfd2FpdCkKIAkJCQlpbnRlbF93
YWl0X2Zvcl92YmxhbmsoZGV2X3ByaXYsIHBpcGUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXkuaAppbmRleCA5NTQ2N2I4YjMwY2MuLjk4YjAwNTYwZThiZSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmgK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmgKQEAgLTI3
LDYgKzI3LDcgQEAKIAogI2luY2x1ZGUgPGRybS9kcm1fdXRpbC5oPgogI2luY2x1ZGUgPGRybS9p
OTE1X2RybS5oPgorI2luY2x1ZGUgImludGVsX2RwX2xpbmtfdHJhaW5pbmcuaCIKIAogZW51bSBs
aW5rX21fbl9zZXQ7CiBzdHJ1Y3QgZHBsbDsKQEAgLTUzLDYgKzU0LDcgQEAgc3RydWN0IGludGVs
X3BsYW5lOwogc3RydWN0IGludGVsX3BsYW5lX3N0YXRlOwogc3RydWN0IGludGVsX3JlbWFwcGVk
X2luZm87CiBzdHJ1Y3QgaW50ZWxfcm90YXRpb25faW5mbzsKK3N0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlOwogCiBlbnVtIGk5MTVfZ3BpbyB7CiAJR1BJT0EsCkBAIC00NTAsNiArNDUyLDggQEAgdTMy
IGludGVsX3BsYW5lX2ZiX21heF9zdHJpZGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LAogCQkJICAgICAgdTMyIHBpeGVsX2Zvcm1hdCwgdTY0IG1vZGlmaWVyKTsKIGJvb2wgaW50
ZWxfcGxhbmVfY2FuX3JlbWFwKGNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqcGxhbmVf
c3RhdGUpOwogZW51bSBwaHkgaW50ZWxfcG9ydF90b19waHkoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUsIGVudW0gcG9ydCBwb3J0KTsKK2Jvb2wgaXNfdHJhbnNfcG9ydF9zeW5jX21vZGUo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCisJCQkgICAgIGNvbnN0IHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpzdGF0ZSk7CiAKIHZvaWQgaW50ZWxfcGxhbmVfZGVzdHJveShzdHJ1Y3Qg
ZHJtX3BsYW5lICpwbGFuZSk7CiB2b2lkIGk4MzBfZW5hYmxlX3BpcGUoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2LCBlbnVtIHBpcGUgcGlwZSk7Ci0tIAoyLjE5LjEKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5n
IGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

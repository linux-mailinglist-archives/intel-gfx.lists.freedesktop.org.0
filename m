Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 2575EE858E
	for <lists+intel-gfx@lfdr.de>; Tue, 29 Oct 2019 11:29:13 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 22F706EB51;
	Tue, 29 Oct 2019 10:29:11 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4D0436EB43
 for <intel-gfx@lists.freedesktop.org>; Tue, 29 Oct 2019 10:29:03 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 29 Oct 2019 03:29:03 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,243,1569308400"; d="scan'208";a="374503887"
Received: from sslose-mobl1.ger.corp.intel.com (HELO
 mwahaha-bdw.ger.corp.intel.com) ([10.252.3.112])
 by orsmga005.jf.intel.com with ESMTP; 29 Oct 2019 03:29:01 -0700
From: Matthew Auld <matthew.auld@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 29 Oct 2019 10:28:51 +0000
Message-Id: <20191029102851.7497-7-matthew.auld@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191029102851.7497-1-matthew.auld@intel.com>
References: <20191029102851.7497-1-matthew.auld@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 7/7] drm/i915/selftests: check for missing
 aperture
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UgbWF5IGJlIG1pc3Npbmcgc3VwcG9ydCBmb3IgdGhlIG1hcHBhYmxlIGFwZXJ0dXJlIG9uIHNv
bWUgcGxhdGZvcm1zLgoKU2lnbmVkLW9mZi1ieTogTWF0dGhldyBBdWxkIDxtYXR0aGV3LmF1bGRA
aW50ZWwuY29tPgpDYzogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1
cmlvQGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2ls
c29uLmNvLnVrPgotLS0KIC4uLi9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvaGVy
ZW5jeS5jICAgIHwgIDcgKysrKysrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0
cy9pOTE1X2dlbV9tbWFuLmMgfCAgNiArKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X2hhbmdjaGVjay5jICAgICAgIHwgMTQgKysrKysrKysrKy0tLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbS5jICAgICAgICAgIHwgIDQgKysrKwogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2d0dC5jICAgICAgfCAgMyArKysKIDUg
ZmlsZXMgY2hhbmdlZCwgMjkgaW5zZXJ0aW9ucygrKSwgNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvaGVyZW5j
eS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb2hlcmVu
Y3kuYwppbmRleCAwYTE5NWU1Yjk4ZTYuLjJiMjlmNmI0ZTFkZCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb2hlcmVuY3kuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvaGVyZW5jeS5jCkBA
IC0yNTAsNyArMjUwLDEyIEBAIHN0YXRpYyBib29sIGFsd2F5c192YWxpZChzdHJ1Y3QgY29udGV4
dCAqY3R4KQogCiBzdGF0aWMgYm9vbCBuZWVkc19mZW5jZV9yZWdpc3RlcnMoc3RydWN0IGNvbnRl
eHQgKmN0eCkKIHsKLQlyZXR1cm4gIWludGVsX2d0X2lzX3dlZGdlZChjdHgtPmVuZ2luZS0+Z3Qp
OworCXN0cnVjdCBpbnRlbF9ndCAqZ3QgPSBjdHgtPmVuZ2luZS0+Z3Q7CisKKwlpZiAoaW50ZWxf
Z3RfaXNfd2VkZ2VkKGd0KSkKKwkJcmV0dXJuIGZhbHNlOworCisJcmV0dXJuIGd0LT5nZ3R0LT5u
dW1fZmVuY2VzOwogfQogCiBzdGF0aWMgYm9vbCBuZWVkc19taV9zdG9yZV9kd29yZChzdHJ1Y3Qg
Y29udGV4dCAqY3R4KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0
ZXN0cy9pOTE1X2dlbV9tbWFuLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3Rz
L2k5MTVfZ2VtX21tYW4uYwppbmRleCBkNDVhOTM5MjhmZjUuLjI5YjIwNzdiNzNkMiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9tbWFuLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9tbWFuLmMK
QEAgLTMwMSw2ICszMDEsOSBAQCBzdGF0aWMgaW50IGlndF9wYXJ0aWFsX3RpbGluZyh2b2lkICph
cmcpCiAJaW50IHRpbGluZzsKIAlpbnQgZXJyOwogCisJaWYgKCFpOTE1X2dndHRfaGFzX2FwZXJ0
dXJlKCZpOTE1LT5nZ3R0KSkKKwkJcmV0dXJuIDA7CisKIAkvKiBXZSB3YW50IHRvIGNoZWNrIHRo
ZSBwYWdlIG1hcHBpbmcgYW5kIGZlbmNpbmcgb2YgYSBsYXJnZSBvYmplY3QKIAkgKiBtbWFwcGVk
IHRocm91Z2ggdGhlIEdUVC4gVGhlIG9iamVjdCB3ZSBjcmVhdGUgaXMgbGFyZ2VyIHRoYW4gY2Fu
CiAJICogcG9zc2libHkgYmUgbW1hcGVkIGFzIGEgd2hvbGUsIGFuZCBzbyB3ZSBtdXN0IHVzZSBw
YXJ0aWFsIEdHVFQgdm1hLgpAQCAtNDMxLDYgKzQzNCw5IEBAIHN0YXRpYyBpbnQgaWd0X3Ntb2tl
X3RpbGluZyh2b2lkICphcmcpCiAJSUdUX1RJTUVPVVQoZW5kKTsKIAlpbnQgZXJyOwogCisJaWYg
KCFpOTE1X2dndHRfaGFzX2FwZXJ0dXJlKCZpOTE1LT5nZ3R0KSkKKwkJcmV0dXJuIDA7CisKIAkv
KgogCSAqIGlndF9wYXJ0aWFsX3RpbGluZygpIGRvZXMgYW4gZXhoYXN0aXZlIGNoZWNrIG9mIHBh
cnRpYWwgdGlsaW5nCiAJICogY2h1bmtpbmcsIGJ1dCB3aWxsIHVuZG91YnRhYmx5IHJ1biBvdXQg
b2YgdGltZS4gSGVyZSwgd2UgZG8gYQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3Qvc2VsZnRlc3RfaGFuZ2NoZWNrLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVz
dF9oYW5nY2hlY2suYwppbmRleCBiNzIwN2I0ODgzOTEuLjhhYmMwYTFkNjkyYiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2NoZWNrLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2NoZWNrLmMKQEAgLTExNDksOCArMTE0
OSwxMiBAQCBzdGF0aWMgaW50IF9faWd0X3Jlc2V0X2V2aWN0X3ZtYShzdHJ1Y3QgaW50ZWxfZ3Qg
Kmd0LAogCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwogCXN0cnVjdCBldmljdF92bWEgYXJnOwog
CXN0cnVjdCBoYW5nIGg7CisJdW5zaWduZWQgaW50IHBpbl9mbGFnczsKIAlpbnQgZXJyOwogCisJ
aWYgKCFndC0+Z2d0dC0+bnVtX2ZlbmNlcyAmJiBmbGFncyAmIEVYRUNfT0JKRUNUX05FRURTX0ZF
TkNFKQorCQlyZXR1cm4gMDsKKwogCWlmICghZW5naW5lIHx8ICFpbnRlbF9lbmdpbmVfY2FuX3N0
b3JlX2R3b3JkKGVuZ2luZSkpCiAJCXJldHVybiAwOwogCkBAIC0xMTg2LDEwICsxMTkwLDEyIEBA
IHN0YXRpYyBpbnQgX19pZ3RfcmVzZXRfZXZpY3Rfdm1hKHN0cnVjdCBpbnRlbF9ndCAqZ3QsCiAJ
CWdvdG8gb3V0X29iajsKIAl9CiAKLQllcnIgPSBpOTE1X3ZtYV9waW4oYXJnLnZtYSwgMCwgMCwK
LQkJCSAgIGk5MTVfdm1hX2lzX2dndHQoYXJnLnZtYSkgPwotCQkJICAgUElOX0dMT0JBTCB8IFBJ
Tl9NQVBQQUJMRSA6Ci0JCQkgICBQSU5fVVNFUik7CisJcGluX2ZsYWdzID0gaTkxNV92bWFfaXNf
Z2d0dChhcmcudm1hKSA/IFBJTl9HTE9CQUwgOiBQSU5fVVNFUjsKKworCWlmIChmbGFncyAmIEVY
RUNfT0JKRUNUX05FRURTX0ZFTkNFKQorCQlwaW5fZmxhZ3MgfD0gUElOX01BUFBBQkxFOworCisJ
ZXJyID0gaTkxNV92bWFfcGluKGFyZy52bWEsIDAsIDAsIHBpbl9mbGFncyk7CiAJaWYgKGVycikg
ewogCQlpOTE1X3JlcXVlc3RfYWRkKHJxKTsKIAkJZ290byBvdXRfb2JqOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW0uYwppbmRleCA2ZDIyNTY3YWQ2MjAuLmUzNzg1NDNl
ZDQ1MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2Vt
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtLmMKQEAgLTQ1
LDYgKzQ1LDEwIEBAIHN0YXRpYyB2b2lkIHRyYXNoX3N0b2xlbihzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSkKIAl1bnNpZ25lZCBsb25nIHBhZ2U7CiAJdTMyIHBybmcgPSAweDEyMzQ1Njc4
OwogCisJLyogWFhYOiBmc2NrLiBuZWVkcyBzb21lIG1vcmUgdGhvdWdodC4uLiAqLworCWlmICgh
aTkxNV9nZ3R0X2hhc19hcGVydHVyZShnZ3R0KSkKKwkJcmV0dXJuOworCiAJZm9yIChwYWdlID0g
MDsgcGFnZSA8IHNpemU7IHBhZ2UgKz0gUEFHRV9TSVpFKSB7CiAJCWNvbnN0IGRtYV9hZGRyX3Qg
ZG1hID0gaTkxNS0+ZHNtLnN0YXJ0ICsgcGFnZTsKIAkJdTMyIF9faW9tZW0gKnM7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZ3R0LmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZ3R0LmMKaW5kZXggYTFjYjA3MmU0
YTFiLi4zZjdlODBmYjNiYmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0
ZXN0cy9pOTE1X2dlbV9ndHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMv
aTkxNV9nZW1fZ3R0LmMKQEAgLTExNDksNiArMTE0OSw5IEBAIHN0YXRpYyBpbnQgaWd0X2dndHRf
cGFnZSh2b2lkICphcmcpCiAJdW5zaWduZWQgaW50ICpvcmRlciwgbjsKIAlpbnQgZXJyOwogCisJ
aWYgKCFpOTE1X2dndHRfaGFzX2FwZXJ0dXJlKGdndHQpKQorCQlyZXR1cm4gMDsKKwogCW9iaiA9
IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfaW50ZXJuYWwoaTkxNSwgUEFHRV9TSVpFKTsKIAlpZiAo
SVNfRVJSKG9iaikpCiAJCXJldHVybiBQVFJfRVJSKG9iaik7Ci0tIAoyLjIwLjEKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5n
IGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

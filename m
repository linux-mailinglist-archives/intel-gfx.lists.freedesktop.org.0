Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E49FD107C33
	for <lists+intel-gfx@lfdr.de>; Sat, 23 Nov 2019 01:55:11 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 62E1A6F59C;
	Sat, 23 Nov 2019 00:55:07 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D2CE26F59D
 for <intel-gfx@lists.freedesktop.org>; Sat, 23 Nov 2019 00:55:03 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 Nov 2019 16:55:02 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,231,1571727600"; d="scan'208";a="219644008"
Received: from josouza-mobl.jf.intel.com (HELO josouza-MOBL.intel.com)
 ([10.98.40.73])
 by orsmga002.jf.intel.com with ESMTP; 22 Nov 2019 16:55:02 -0800
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 22 Nov 2019 16:54:59 -0800
Message-Id: <20191123005459.155383-7-jose.souza@intel.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191123005459.155383-1-jose.souza@intel.com>
References: <20191123005459.155383-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 7/7] drm/display/dp: Fix MST disable sequences
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIGRpc2FibGUgc2VxdWVuY2UgYWZ0ZXIgd2FpdCBmb3IgdHJhbnNjb2RlciBvZmYgd2FzIG5v
dCBjb3JyZWN0bHkKaW1wbGVtZW50ZWQuClRoZSBNU1QgZGlzYWJsZSBzZXF1ZW5jZSBpcyBiYXNp
Y2FsbHkgdGhlIHNhbWUgZm9yIEhTVywgU0tMLCBJQ0wgYW5kClRHTCwgd2l0aCBqdXN0IG1pbm9y
IGNoYW5nZXMgb24gVEdMLgoKU28gaGVyZSBjYWxsaW5nIGEgbmV3IE1TVCBmdW5jdGlvbiB0byBk
byB0aGUgTVNUIHNlcXVlbmNlcywgbW9zdCBvZgp0aGUgc3RlcHMganVzdCBtb3ZlZCBmcm9tIHRo
ZSBwb3N0IGRpc2FibGUgaG9vay4KClRoaXMgcGx1cyB0aGUgcHJldmlvdXMgY2hhbmdlcywgZml4
ZWQgdGhlIGhvdHBsdWdzIHRyaWdnZXJlZCBieSBNU1QKc2luayBkdXJpbmcgdGhlIGRpc2FibGUv
ZW5hYmxlIHNlcXVlbmNlLCB0aG9zZSB3ZXJlIGNhdXNpbmcgc291cmNlIHRvCnRyeSB0byBkbyBh
IGxpbmsgdHJhaW5pbmcgd2hpbGUgaXQgd2FzIG5vdCByZWFkeSBjYXVzaW5nIENQVSBwaXBlCkZJ
Rk8gdW5kZXJycnVzIG9uIFRHTC4KCkJTcGVjOiA0MjMxCkJTcGVjOiA0MTYzCkJTcGVjOiAyMjI0
MwpCU3BlYzogNDkxOTAKQ2M6IEx1Y2FzIERlIE1hcmNoaSA8bHVjYXMuZGVtYXJjaGlAaW50ZWwu
Y29tPgpTaWduZWQtb2ZmLWJ5OiBKb3PDqSBSb2JlcnRvIGRlIFNvdXphIDxqb3NlLnNvdXphQGlu
dGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jICAg
ICB8IDI1ICsrKysrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eS5jIHwgIDIgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcF9tc3QuYyAg
fCA3OCArKysrKysrKysrKysrKysrLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kcF9tc3QuaCAgfCAgMiArCiA0IGZpbGVzIGNoYW5nZWQsIDg3IGluc2VydGlvbnMoKyks
IDIwIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZGRpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5j
CmluZGV4IGFhMDI0OTMzMzE3NS4uNTk1MGJjMWNjYzg4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGRpLmMKQEAgLTM0LDYgKzM0LDcgQEAKICNpbmNsdWRlICJpbnRlbF9k
ZGkuaCIKICNpbmNsdWRlICJpbnRlbF9kaXNwbGF5X3R5cGVzLmgiCiAjaW5jbHVkZSAiaW50ZWxf
ZHAuaCIKKyNpbmNsdWRlICJpbnRlbF9kcF9tc3QuaCIKICNpbmNsdWRlICJpbnRlbF9kcF9saW5r
X3RyYWluaW5nLmgiCiAjaW5jbHVkZSAiaW50ZWxfZHBfbXN0LmgiCiAjaW5jbHVkZSAiaW50ZWxf
ZHBpb19waHkuaCIKQEAgLTE5NTQsMTcgKzE5NTUsMjcgQEAgdm9pZCBpbnRlbF9kZGlfZGlzYWJs
ZV90cmFuc2NvZGVyX2Z1bmMoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3Rh
dGUKIAlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+
dWFwaS5jcnRjKTsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1
KGNydGMtPmJhc2UuZGV2KTsKIAllbnVtIHRyYW5zY29kZXIgY3B1X3RyYW5zY29kZXIgPSBjcnRj
X3N0YXRlLT5jcHVfdHJhbnNjb2RlcjsKLQlpOTE1X3JlZ190IHJlZyA9IFRSQU5TX0RESV9GVU5D
X0NUTChjcHVfdHJhbnNjb2Rlcik7Ci0JdTMyIHZhbCA9IEk5MTVfUkVBRChyZWcpOworCXUzMiB2
YWw7CisKKwl2YWwgPSBJOTE1X1JFQUQoVFJBTlNfRERJX0ZVTkNfQ1RMKGNwdV90cmFuc2NvZGVy
KSk7CisJdmFsICY9IH5UUkFOU19ERElfRlVOQ19FTkFCTEU7CiAKIAlpZiAoSU5URUxfR0VOKGRl
dl9wcml2KSA+PSAxMikgewotCQl2YWwgJj0gfihUUkFOU19ERElfRlVOQ19FTkFCTEUgfCBUR0xf
VFJBTlNfRERJX1BPUlRfTUFTSyB8Ci0JCQkgVFJBTlNfRERJX0RQX1ZDX1BBWUxPQURfQUxMT0Mp
OworCQlpZiAoIWludGVsX2NydGNfaGFzX3R5cGUoY3J0Y19zdGF0ZSwgSU5URUxfT1VUUFVUX0RQ
X01TVCkpIHsKKwkJCXZhbCAmPSB+VEdMX1RSQU5TX0RESV9QT1JUX01BU0s7CisJCX0gZWxzZSB7
CisJCQlzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcjsKKwkJCWVudW0gdHJhbnNjb2RlciBt
YXN0ZXI7CisKKwkJCWVuY29kZXIgPSBpbnRlbF9kZGlfZ2V0X2NydGNfZW5jb2RlcihjcnRjKTsK
KwkJCW1hc3RlciA9IGludGVsX2RwX21zdF9tYXN0ZXJfdHJhbnNfZ2V0KGVuY29kZXIpOworCQkJ
aWYgKGNydGNfc3RhdGUtPmNwdV90cmFuc2NvZGVyICE9IG1hc3RlcikKKwkJCQl2YWwgJj0gflRH
TF9UUkFOU19ERElfUE9SVF9NQVNLOworCQl9CiAJfSBlbHNlIHsKLQkJdmFsICY9IH4oVFJBTlNf
RERJX0ZVTkNfRU5BQkxFIHwgVFJBTlNfRERJX1BPUlRfTUFTSyB8Ci0JCQkgVFJBTlNfRERJX0RQ
X1ZDX1BBWUxPQURfQUxMT0MpOworCQl2YWwgJj0gflRSQU5TX0RESV9QT1JUX01BU0s7CiAJfQot
CUk5MTVfV1JJVEUocmVnLCB2YWwpOworCUk5MTVfV1JJVEUoVFJBTlNfRERJX0ZVTkNfQ1RMKGNw
dV90cmFuc2NvZGVyKSwgdmFsKTsKIAogCWlmIChkZXZfcHJpdi0+cXVpcmtzICYgUVVJUktfSU5D
UkVBU0VfRERJX0RJU0FCTEVEX1RJTUUgJiYKIAkgICAgaW50ZWxfY3J0Y19oYXNfdHlwZShjcnRj
X3N0YXRlLCBJTlRFTF9PVVRQVVRfSERNSSkpIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggMzVhNTkxMDgxOTRlLi5lODFiM2Q3MzFjMTYgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC02ODQz
LDYgKzY4NDMsOCBAQCBzdGF0aWMgdm9pZCBoYXN3ZWxsX2NydGNfZGlzYWJsZShzdHJ1Y3QgaW50
ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKIAlpZiAoIXRyYW5zY29kZXJfaXNfZHNpKGNwdV90cmFu
c2NvZGVyKSkKIAkJaW50ZWxfZGlzYWJsZV9waXBlKG9sZF9jcnRjX3N0YXRlKTsKIAorCWludGVs
X2RwX21zdF9wb3N0X3RyYW5zX2Rpc2FibGVkKG9sZF9jcnRjX3N0YXRlKTsKKwogCWlmIChJTlRF
TF9HRU4oZGV2X3ByaXYpID49IDExKQogCQlpY2xfZGlzYWJsZV90cmFuc2NvZGVyX3BvcnRfc3lu
YyhvbGRfY3J0Y19zdGF0ZSk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZHBfbXN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2RwX21zdC5jCmluZGV4IDUzYWZlM2UxNzlmNy4uZGM1ZTM3MmJjMzJiIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMKQEAgLTM2MCw2ICszNjAsNTcgQEAg
c3RhdGljIHZvaWQgaW50ZWxfbXN0X2Rpc2FibGVfZHAoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIsCiAJCQkJCSAgb2xkX2NydGNfc3RhdGUsIG9sZF9jb25uX3N0YXRlKTsKIH0KIAorc3Rh
dGljIHZvaWQKK2RwX21zdF9wb3N0X3RyYW5zX2Rpc2FibGVkKHN0cnVjdCBpbnRlbF9lbmNvZGVy
ICplbmNvZGVyLAorCQkJICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9jcnRj
X3N0YXRlLAorCQkJICAgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKm9sZF9jb25u
X3N0YXRlKQoreworCXN0cnVjdCBpbnRlbF9kcF9tc3RfZW5jb2RlciAqaW50ZWxfbXN0ID0gZW5j
X3RvX21zdCgmZW5jb2Rlci0+YmFzZSk7CisJc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50
ZWxfZGlnX3BvcnQgPSBpbnRlbF9tc3QtPnByaW1hcnk7CisJc3RydWN0IGludGVsX2RwICppbnRl
bF9kcCA9ICZpbnRlbF9kaWdfcG9ydC0+ZHA7CisJc3RydWN0IGludGVsX2Nvbm5lY3RvciAqY29u
bmVjdG9yID0KKwkJdG9faW50ZWxfY29ubmVjdG9yKG9sZF9jb25uX3N0YXRlLT5jb25uZWN0b3Ip
OworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY29ubmVjdG9y
LT5iYXNlLmRldik7CisJdTMyIHZhbDsKKworCWRybV9kcF91cGRhdGVfcGF5bG9hZF9wYXJ0Migm
aW50ZWxfZHAtPm1zdF9tZ3IpOworCisJdmFsID0gSTkxNV9SRUFEKFRSQU5TX0RESV9GVU5DX0NU
TChvbGRfY3J0Y19zdGF0ZS0+Y3B1X3RyYW5zY29kZXIpKTsKKwl2YWwgJj0gflRSQU5TX0RESV9E
UF9WQ19QQVlMT0FEX0FMTE9DOworCUk5MTVfV1JJVEUoVFJBTlNfRERJX0ZVTkNfQ1RMKG9sZF9j
cnRjX3N0YXRlLT5jcHVfdHJhbnNjb2RlciksIHZhbCk7CisKKwlpZiAoaW50ZWxfZGVfd2FpdF9m
b3Jfc2V0KGRldl9wcml2LCBpbnRlbF9kcC0+cmVncy5kcF90cF9zdGF0dXMsCisJCQkJICBEUF9U
UF9TVEFUVVNfQUNUX1NFTlQsIDEpKQorCQlEUk1fRVJST1IoIlRpbWVkIG91dCB3YWl0aW5nIGZv
ciBBQ1Qgc2VudCB3aGVuIGRpc2FibGluZ1xuIik7CisKKwlkcm1fZHBfY2hlY2tfYWN0X3N0YXR1
cygmaW50ZWxfZHAtPm1zdF9tZ3IpOworCisJZHJtX2RwX21zdF9kZWFsbG9jYXRlX3ZjcGkoJmlu
dGVsX2RwLT5tc3RfbWdyLCBjb25uZWN0b3ItPnBvcnQpOworfQorCit2b2lkCitpbnRlbF9kcF9t
c3RfcG9zdF90cmFuc19kaXNhYmxlZChjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xk
X2NydGNfc3RhdGUpCit7CisJc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlID0gb2xkX2Ny
dGNfc3RhdGUtPnVhcGkuc3RhdGU7CisJc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKm9sZF9j
b25uX3N0YXRlOworCXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uOworCWludCBpOworCisJaWYg
KCFpbnRlbF9jcnRjX2hhc190eXBlKG9sZF9jcnRjX3N0YXRlLCBJTlRFTF9PVVRQVVRfRFBfTVNU
KSkKKwkJcmV0dXJuOworCisJZm9yX2VhY2hfb2xkX2Nvbm5lY3Rvcl9pbl9zdGF0ZShzdGF0ZSwg
Y29ubiwgb2xkX2Nvbm5fc3RhdGUsIGkpIHsKKwkJc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29k
ZXI7CisKKwkJaWYgKG9sZF9jb25uX3N0YXRlLT5jcnRjICE9IG9sZF9jcnRjX3N0YXRlLT51YXBp
LmNydGMpCisJCQljb250aW51ZTsKKworCQllbmNvZGVyID0gdG9faW50ZWxfZW5jb2RlcihvbGRf
Y29ubl9zdGF0ZS0+YmVzdF9lbmNvZGVyKTsKKwkJZHBfbXN0X3Bvc3RfdHJhbnNfZGlzYWJsZWQo
ZW5jb2Rlciwgb2xkX2NydGNfc3RhdGUsCisJCQkJCSAgIG9sZF9jb25uX3N0YXRlKTsKKwl9Cit9
CisKIHN0YXRpYyB2b2lkIGludGVsX21zdF9wb3N0X2Rpc2FibGVfZHAoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIsCiAJCQkJICAgICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUg
Km9sZF9jcnRjX3N0YXRlLAogCQkJCSAgICAgIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0
YXRlICpvbGRfY29ubl9zdGF0ZSkKQEAgLTM3Myw2ICs0MjQsMTIgQEAgc3RhdGljIHZvaWQgaW50
ZWxfbXN0X3Bvc3RfZGlzYWJsZV9kcChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAog
CWludGVsX2RwLT5hY3RpdmVfbXN0X2xpbmtzLS07CiAKKwkvKgorCSAqIFBvd2VyIGRvd24gbXN0
IHBhdGggYmVmb3JlIGRpc2FibGluZyB0aGUgcG9ydCwgb3RoZXJ3aXNlIHdlIGVuZAorCSAqIHVw
IGdldHRpbmcgaW50ZXJydXB0cyBmcm9tIHRoZSBzaW5rIHVwb24gZGV0ZWN0aW5nIGxpbmsgbG9z
cy4KKwkgKi8KKwlkcm1fZHBfc2VuZF9wb3dlcl91cGRvd25fcGh5KCZpbnRlbF9kcC0+bXN0X21n
ciwgY29ubmVjdG9yLT5wb3J0LAorCQkJCSAgICAgZmFsc2UpOwogCS8qCiAJICogRnJvbSBUR0wg
QlNwZWMgIklmIG11bHRpLXN0cmVhbSBzbGF2ZSB0cmFuc2NvZGVyOiBDb25maWd1cmUKIAkgKiBU
cmFuc2NvZGVyIENsb2NrIFNlbGVjdCB0byBkaXJlY3Qgbm8gY2xvY2sgdG8gdGhlIHRyYW5zY29k
ZXIiCkBAIC0zODMsMjIgKzQ0MCwxNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9tc3RfcG9zdF9kaXNh
YmxlX2RwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCWlmIChJTlRFTF9HRU4oZGV2
X3ByaXYpIDwgMTIgfHwgaW50ZWxfZHAtPmFjdGl2ZV9tc3RfbGlua3MpCiAJCWludGVsX2RkaV9k
aXNhYmxlX3BpcGVfY2xvY2sob2xkX2NydGNfc3RhdGUpOwogCi0JLyogdGhpcyBjYW4gZmFpbCAq
LwotCWRybV9kcF9jaGVja19hY3Rfc3RhdHVzKCZpbnRlbF9kcC0+bXN0X21ncik7Ci0JLyogYW5k
IHRoaXMgY2FuIGFsc28gZmFpbCAqLwotCWRybV9kcF91cGRhdGVfcGF5bG9hZF9wYXJ0MigmaW50
ZWxfZHAtPm1zdF9tZ3IpOwotCi0JZHJtX2RwX21zdF9kZWFsbG9jYXRlX3ZjcGkoJmludGVsX2Rw
LT5tc3RfbWdyLCBjb25uZWN0b3ItPnBvcnQpOwotCi0JLyoKLQkgKiBQb3dlciBkb3duIG1zdCBw
YXRoIGJlZm9yZSBkaXNhYmxpbmcgdGhlIHBvcnQsIG90aGVyd2lzZSB3ZSBlbmQKLQkgKiB1cCBn
ZXR0aW5nIGludGVycnVwdHMgZnJvbSB0aGUgc2luayB1cG9uIGRldGVjdGluZyBsaW5rIGxvc3Mu
Ci0JICovCi0JZHJtX2RwX3NlbmRfcG93ZXJfdXBkb3duX3BoeSgmaW50ZWxfZHAtPm1zdF9tZ3Is
IGNvbm5lY3Rvci0+cG9ydCwKLQkJCQkgICAgIGZhbHNlKTsKIAogCWludGVsX21zdC0+Y29ubmVj
dG9yID0gTlVMTDsKIAlpZiAoaW50ZWxfZHAtPmFjdGl2ZV9tc3RfbGlua3MgPT0gMCkgeworCQll
bnVtIHRyYW5zY29kZXIgY3B1X3RyYW5zY29kZXI7CisJCXUzMiB2YWw7CisKKwkJY3B1X3RyYW5z
Y29kZXIgPSBvbGRfY3J0Y19zdGF0ZS0+Y3B1X3RyYW5zY29kZXI7CisJCXZhbCA9IEk5MTVfUkVB
RChUUkFOU19ERElfRlVOQ19DVEwoY3B1X3RyYW5zY29kZXIpKTsKKwkJdmFsICY9IH5UR0xfVFJB
TlNfRERJX1BPUlRfTUFTSzsKKwkJSTkxNV9XUklURShUUkFOU19ERElfRlVOQ19DVEwoY3B1X3Ry
YW5zY29kZXIpLCB2YWwpOworCiAJCWludGVsX2RpZ19wb3J0LT5iYXNlLnBvc3RfZGlzYWJsZSgm
aW50ZWxfZGlnX3BvcnQtPmJhc2UsCiAJCQkJCQkgIG9sZF9jcnRjX3N0YXRlLCBOVUxMKTsKIAkJ
aW50ZWxfZHAtPm1zdF9tYXN0ZXJfdHJhbnNjb2RlciA9IElOVkFMSURfVFJBTlNDT0RFUjsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmggYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5oCmluZGV4IGU2ZjI4YTUx
NzE4Mi4uNTY3ODczYzBhYzkxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2RwX21zdC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZHBfbXN0LmgKQEAgLTcsMTEgKzcsMTMgQEAKICNkZWZpbmUgX19JTlRFTF9EUF9NU1RfSF9f
CiAKIHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQ7CitzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZTsK
IHN0cnVjdCBpbnRlbF9lbmNvZGVyOwogCiBpbnQgaW50ZWxfZHBfbXN0X2VuY29kZXJfaW5pdChz
dHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICppbnRlbF9kaWdfcG9ydCwgaW50IGNvbm5faWQpOwog
dm9pZCBpbnRlbF9kcF9tc3RfZW5jb2Rlcl9jbGVhbnVwKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3Bv
cnQgKmludGVsX2RpZ19wb3J0KTsKIGludCBpbnRlbF9kcF9tc3RfZW5jb2Rlcl9hY3RpdmVfbGlu
a3Moc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQpOwordm9pZCBpbnRl
bF9kcF9tc3RfcG9zdF90cmFuc19kaXNhYmxlZChjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqb2xkX2NydGNfc3RhdGUpOwogZW51bSB0cmFuc2NvZGVyIGludGVsX2RwX21zdF9tYXN0ZXJf
dHJhbnNfZ2V0KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKTsKIAogI2VuZGlmIC8qIF9f
SU5URUxfRFBfTVNUX0hfXyAqLwotLSAKMi4yNC4wCgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9pbnRlbC1nZng=

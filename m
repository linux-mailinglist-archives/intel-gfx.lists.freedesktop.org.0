Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 71DED3113D1
	for <lists+intel-gfx@lfdr.de>; Fri,  5 Feb 2021 22:47:27 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B71C76F4EC;
	Fri,  5 Feb 2021 21:47:25 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E41116F4EC
 for <intel-gfx@lists.freedesktop.org>; Fri,  5 Feb 2021 21:47:24 +0000 (UTC)
IronPort-SDR: TwSjU58Y1QhASjbTFgadw1bmMHplZSSj1KfFEiRS7OIEXKgYqVQ2kOlQUJWZqd6PTmTI7U+j84
 y5Vd7JncihQg==
X-IronPort-AV: E=McAfee;i="6000,8403,9886"; a="181556806"
X-IronPort-AV: E=Sophos;i="5.81,156,1610438400"; d="scan'208";a="181556806"
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by orsmga103.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 05 Feb 2021 13:47:23 -0800
IronPort-SDR: VPiCjUEvffDzFYwWW5Nn8X4hulCgPBWNB+yrxlTZFqzvUOSIbU05hkIueEXsmk0GS4RZ9/3Z/V
 7E0xBGLk3yrA==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.81,156,1610438400"; d="scan'208";a="358409709"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.171])
 by fmsmga007.fm.intel.com with SMTP; 05 Feb 2021 13:47:21 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 05 Feb 2021 23:47:20 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  5 Feb 2021 23:46:30 +0200
Message-Id: <20210205214634.19341-12-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20210205214634.19341-1-ville.syrjala@linux.intel.com>
References: <20210205214634.19341-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 11/15] drm/i915: Extract _cnl_ddi_{enable,
 disable}_clock()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkFs
bCB0aGUgRFBDTEtBX0NGR0NSIGhhbmRsaW5nIGZvbGxvd3MgYSBjb21tb24gcGF0dGVybi4gTGV0
J3MKZXh0cmFjdCB0aGF0IHRvIGEgc21hbGwgaGVscGVyIHRoYXQganVzdCB0YWtlcyBhIGZldyBw
YXJhbWV0ZXJzCmVhY2ggY2FsbGVyIGNhbiBjdXN0b21pemUuCgpSZXZpZXdlZC1ieTogTHVjYXMg
RGUgTWFyY2hpIDxsdWNhcy5kZW1hcmNoaUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IFZpbGxl
IFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYyB8IDEwOCArKysrKysrKystLS0tLS0tLS0t
LS0tLQogMSBmaWxlIGNoYW5nZWQsIDQ0IGluc2VydGlvbnMoKyksIDY0IGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCmluZGV4IGM5OGJkZjQ1Njk1
OC4uOGI3ZWY1ZjNiYTAzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2RkaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRp
LmMKQEAgLTE1OTcsMTEgKzE1OTcsMzcgQEAgc3RhdGljIHUzMiBpY2xfZHBjbGthX2NmZ2NyMF9j
bGtfb2ZmKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAlyZXR1cm4gMDsKIH0K
IAorc3RhdGljIHZvaWQgX2NubF9kZGlfZW5hYmxlX2Nsb2NrKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1LCBpOTE1X3JlZ190IHJlZywKKwkJCQkgIHUzMiBjbGtfc2VsX21hc2ssIHUzMiBj
bGtfc2VsLCB1MzIgY2xrX29mZikKK3sKKwltdXRleF9sb2NrKCZpOTE1LT5kcGxsLmxvY2spOwor
CisJaW50ZWxfZGVfcm13KGk5MTUsIHJlZywgY2xrX3NlbF9tYXNrLCBjbGtfc2VsKTsKKworCS8q
CisJICogIlRoaXMgc3RlcCBhbmQgdGhlIHN0ZXAgYmVmb3JlIG11c3QgYmUKKwkgKiAgZG9uZSB3
aXRoIHNlcGFyYXRlIHJlZ2lzdGVyIHdyaXRlcy4iCisJICovCisJaW50ZWxfZGVfcm13KGk5MTUs
IHJlZywgY2xrX29mZiwgMCk7CisKKwltdXRleF91bmxvY2soJmk5MTUtPmRwbGwubG9jayk7Cit9
CisKK3N0YXRpYyB2b2lkIF9jbmxfZGRpX2Rpc2FibGVfY2xvY2soc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTUsIGk5MTVfcmVnX3QgcmVnLAorCQkJCSAgIHUzMiBjbGtfb2ZmKQoreworCW11
dGV4X2xvY2soJmk5MTUtPmRwbGwubG9jayk7CisKKwlpbnRlbF9kZV9ybXcoaTkxNSwgcmVnLCAw
LCBjbGtfb2ZmKTsKKworCW11dGV4X3VubG9jaygmaTkxNS0+ZHBsbC5sb2NrKTsKK30KKwogc3Rh
dGljIHZvaWQgZGcxX2RkaV9lbmFibGVfY2xvY2soc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29k
ZXIsCiAJCQkJIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogewog
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFz
ZS5kZXYpOwotCXN0cnVjdCBpbnRlbF9zaGFyZWRfZHBsbCAqcGxsID0gY3J0Y19zdGF0ZS0+c2hh
cmVkX2RwbGw7CisJY29uc3Qgc3RydWN0IGludGVsX3NoYXJlZF9kcGxsICpwbGwgPSBjcnRjX3N0
YXRlLT5zaGFyZWRfZHBsbDsKIAllbnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZf
cHJpdiwgZW5jb2Rlci0+cG9ydCk7CiAKIAlpZiAoZHJtX1dBUk5fT04oJmRldl9wcml2LT5kcm0s
ICFwbGwpKQpAQCAtMTYxNiwxNiArMTY0MiwxMCBAQCBzdGF0aWMgdm9pZCBkZzFfZGRpX2VuYWJs
ZV9jbG9jayhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJCShwbGwtPmluZm8tPmlk
ID49IERQTExfSURfREcxX0RQTEwyICYmIHBoeSA8IFBIWV9DKSkpCiAJCXJldHVybjsKIAotCW11
dGV4X2xvY2soJmRldl9wcml2LT5kcGxsLmxvY2spOwotCi0JaW50ZWxfZGVfcm13KGRldl9wcml2
LCBERzFfRFBDTEtBX0NGR0NSMChwaHkpLAotCQkgICAgIERHMV9EUENMS0FfQ0ZHQ1IwX0RESV9D
TEtfU0VMX01BU0socGh5KSwKLQkJICAgICBERzFfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NFTChw
bGwtPmluZm8tPmlkLCBwaHkpKTsKLQotCWludGVsX2RlX3JtdyhkZXZfcHJpdiwgREcxX0RQQ0xL
QV9DRkdDUjAocGh5KSwKLQkJICAgICBERzFfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX09GRihwaHkp
LCAwKTsKLQotCW11dGV4X3VubG9jaygmZGV2X3ByaXYtPmRwbGwubG9jayk7CisJX2NubF9kZGlf
ZW5hYmxlX2Nsb2NrKGRldl9wcml2LCBERzFfRFBDTEtBX0NGR0NSMChwaHkpLAorCQkJICAgICAg
REcxX0RQQ0xLQV9DRkdDUjBfRERJX0NMS19TRUxfTUFTSyhwaHkpLAorCQkJICAgICAgREcxX0RQ
Q0xLQV9DRkdDUjBfRERJX0NMS19TRUwocGxsLT5pbmZvLT5pZCwgcGh5KSwKKwkJCSAgICAgIERH
MV9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfT0ZGKHBoeSkpOwogfQogCiBzdGF0aWMgdm9pZCBkZzFf
ZGRpX2Rpc2FibGVfY2xvY2soc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIpCkBAIC0xNjMz
LDE5ICsxNjUzLDE1IEBAIHN0YXRpYyB2b2lkIGRnMV9kZGlfZGlzYWJsZV9jbG9jayhzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlcikKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsKIAllbnVtIHBoeSBwaHkgPSBpbnRlbF9w
b3J0X3RvX3BoeShkZXZfcHJpdiwgZW5jb2Rlci0+cG9ydCk7CiAKLQltdXRleF9sb2NrKCZkZXZf
cHJpdi0+ZHBsbC5sb2NrKTsKLQotCWludGVsX2RlX3JtdyhkZXZfcHJpdiwgREcxX0RQQ0xLQV9D
RkdDUjAocGh5KSwKLQkJICAgICAwLCBERzFfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX09GRihwaHkp
KTsKLQotCW11dGV4X3VubG9jaygmZGV2X3ByaXYtPmRwbGwubG9jayk7CisJX2NubF9kZGlfZGlz
YWJsZV9jbG9jayhkZXZfcHJpdiwgREcxX0RQQ0xLQV9DRkdDUjAocGh5KSwKKwkJCSAgICAgICBE
RzFfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX09GRihwaHkpKTsKIH0KIAogc3RhdGljIHZvaWQgaWNs
X2RkaV9jb21ib19lbmFibGVfY2xvY2soc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJ
CQkJICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogewog
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFz
ZS5kZXYpOwotCXN0cnVjdCBpbnRlbF9zaGFyZWRfZHBsbCAqcGxsID0gY3J0Y19zdGF0ZS0+c2hh
cmVkX2RwbGw7CisJY29uc3Qgc3RydWN0IGludGVsX3NoYXJlZF9kcGxsICpwbGwgPSBjcnRjX3N0
YXRlLT5zaGFyZWRfZHBsbDsKIAllbnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZf
cHJpdiwgZW5jb2Rlci0+cG9ydCk7CiAJdTMyIG1hc2ssIHNlbDsKIAlpOTE1X3JlZ190IHJlZzsK
QEAgLTE2NjcsMjQgKzE2ODMsOCBAQCBzdGF0aWMgdm9pZCBpY2xfZGRpX2NvbWJvX2VuYWJsZV9j
bG9jayhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAlpZiAoZHJtX1dBUk5fT04oJmRl
dl9wcml2LT5kcm0sICFwbGwpKQogCQlyZXR1cm47CiAKLQltdXRleF9sb2NrKCZkZXZfcHJpdi0+
ZHBsbC5sb2NrKTsKLQotCS8qCi0JICogRXZlbiB0aG91Z2ggdGhpcyByZWdpc3RlciByZWZlcmVu
Y2VzIERESXMsIG5vdGUgdGhhdCB3ZQotCSAqIHdhbnQgdG8gcGFzcyB0aGUgUEhZIHJhdGhlciB0
aGFuIHRoZSBwb3J0IChEREkpLiAgRm9yCi0JICogSUNMLCBwb3J0PXBoeSBpbiBhbGwgY2FzZXMg
c28gaXQgZG9lc24ndCBtYXR0ZXIsIGJ1dCBmb3IKLQkgKiBFSEwgdGhlIGJzcGVjIG5vdGVzIHRo
ZSBmb2xsb3dpbmc6Ci0JICoKLQkgKiAgICJERElEIGNsb2NrIHRpZWQgdG8gRERJQSBjbG9jaywg
c28gRFBDTEtBX0NGR0NSMCBERElBCi0JICogICBDbG9jayBTZWxlY3QgY2hvb3NlcyB0aGUgUExM
IGZvciBib3RoIERESUEgYW5kIERESUQgYW5kCi0JICogICBkcml2ZXMgcG9ydCBBIGluIGFsbCBj
YXNlcy4iCi0JICovCi0JaW50ZWxfZGVfcm13KGRldl9wcml2LCByZWcsIG1hc2ssIHNlbCk7Ci0K
LQlpbnRlbF9kZV9ybXcoZGV2X3ByaXYsIHJlZywKLQkJICAgICBpY2xfZHBjbGthX2NmZ2NyMF9j
bGtfb2ZmKGRldl9wcml2LCBwaHkpLCAwKTsKLQotCW11dGV4X3VubG9jaygmZGV2X3ByaXYtPmRw
bGwubG9jayk7CisJX2NubF9kZGlfZW5hYmxlX2Nsb2NrKGRldl9wcml2LCByZWcsIG1hc2ssIHNl
bCwKKwkJCSAgICAgIGljbF9kcGNsa2FfY2ZnY3IwX2Nsa19vZmYoZGV2X3ByaXYsIHBoeSkpOwog
fQogCiBzdGF0aWMgdm9pZCBpY2xfZGRpX2NvbWJvX2Rpc2FibGVfY2xvY2soc3RydWN0IGludGVs
X2VuY29kZXIgKmVuY29kZXIpCkBAIC0xNjkzLDE5ICsxNjkzLDEzIEBAIHN0YXRpYyB2b2lkIGlj
bF9kZGlfY29tYm9fZGlzYWJsZV9jbG9jayhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikK
IAllbnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgZW5jb2Rlci0+cG9y
dCk7CiAJaTkxNV9yZWdfdCByZWc7CiAKLQltdXRleF9sb2NrKCZkZXZfcHJpdi0+ZHBsbC5sb2Nr
KTsKLQogCWlmIChJU19BTERFUkxBS0VfUyhkZXZfcHJpdikpCiAJCXJlZyA9IEFETFNfRFBDTEtB
X0NGR0NSKHBoeSk7CiAJZWxzZQogCQlyZWcgPSBJQ0xfRFBDTEtBX0NGR0NSMDsKIAotCW11dGV4
X2xvY2soJmRldl9wcml2LT5kcGxsLmxvY2spOwotCi0JaW50ZWxfZGVfcm13KGRldl9wcml2LCBy
ZWcsCi0JCSAgICAgMCwgaWNsX2RwY2xrYV9jZmdjcjBfY2xrX29mZihkZXZfcHJpdiwgcGh5KSk7
Ci0KLQltdXRleF91bmxvY2soJmRldl9wcml2LT5kcGxsLmxvY2spOworCV9jbmxfZGRpX2Rpc2Fi
bGVfY2xvY2soZGV2X3ByaXYsIHJlZywKKwkJCSAgICAgICBpY2xfZHBjbGthX2NmZ2NyMF9jbGtf
b2ZmKGRldl9wcml2LCBwaHkpKTsKIH0KIAogc3RhdGljIHZvaWQgZGcxX3Nhbml0aXplX3BvcnRf
Y2xrX29mZihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCkBAIC0xOTEyLDIwICsx
OTA2LDEwIEBAIHN0YXRpYyB2b2lkIGNubF9kZGlfZW5hYmxlX2Nsb2NrKHN0cnVjdCBpbnRlbF9l
bmNvZGVyICplbmNvZGVyLAogCWlmIChkcm1fV0FSTl9PTigmaTkxNS0+ZHJtLCAhcGxsKSkKIAkJ
cmV0dXJuOwogCi0JbXV0ZXhfbG9jaygmaTkxNS0+ZHBsbC5sb2NrKTsKLQotCWludGVsX2RlX3Jt
dyhpOTE1LCBEUENMS0FfQ0ZHQ1IwLAotCQkgICAgIERQQ0xLQV9DRkdDUjBfRERJX0NMS19TRUxf
TUFTSyhwb3J0KSwKLQkJICAgICBEUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMKHBsbC0+aW5mby0+
aWQsIHBvcnQpKTsKLQotCS8qCi0JICogIlRoaXMgc3RlcCBhbmQgdGhlIHN0ZXAgYmVmb3JlIG11
c3QgYmUKLQkgKiAgZG9uZSB3aXRoIHNlcGFyYXRlIHJlZ2lzdGVyIHdyaXRlcy4iCi0JICovCi0J
aW50ZWxfZGVfcm13KGk5MTUsIERQQ0xLQV9DRkdDUjAsCi0JCSAgICAgRFBDTEtBX0NGR0NSMF9E
RElfQ0xLX09GRihwb3J0KSwgMCk7Ci0KLQltdXRleF91bmxvY2soJmk5MTUtPmRwbGwubG9jayk7
CisJX2NubF9kZGlfZW5hYmxlX2Nsb2NrKGk5MTUsIERQQ0xLQV9DRkdDUjAsCisJCQkgICAgICBE
UENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX01BU0socG9ydCksCisJCQkgICAgICBEUENMS0FfQ0ZH
Q1IwX0RESV9DTEtfU0VMKHBsbC0+aW5mby0+aWQsIHBvcnQpLAorCQkJICAgICAgRFBDTEtBX0NG
R0NSMF9ERElfQ0xLX09GRihwb3J0KSk7CiB9CiAKIHN0YXRpYyB2b2lkIGNubF9kZGlfZGlzYWJs
ZV9jbG9jayhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikKQEAgLTE5MzMsMTIgKzE5MTcs
OCBAQCBzdGF0aWMgdm9pZCBjbmxfZGRpX2Rpc2FibGVfY2xvY2soc3RydWN0IGludGVsX2VuY29k
ZXIgKmVuY29kZXIpCiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KGVu
Y29kZXItPmJhc2UuZGV2KTsKIAllbnVtIHBvcnQgcG9ydCA9IGVuY29kZXItPnBvcnQ7CiAKLQlt
dXRleF9sb2NrKCZpOTE1LT5kcGxsLmxvY2spOwotCi0JaW50ZWxfZGVfcm13KGk5MTUsIERQQ0xL
QV9DRkdDUjAsCi0JCSAgICAgMCwgRFBDTEtBX0NGR0NSMF9ERElfQ0xLX09GRihwb3J0KSk7Ci0K
LQltdXRleF91bmxvY2soJmk5MTUtPmRwbGwubG9jayk7CisJX2NubF9kZGlfZGlzYWJsZV9jbG9j
ayhpOTE1LCBEUENMS0FfQ0ZHQ1IwLAorCQkJICAgICAgIERQQ0xLQV9DRkdDUjBfRERJX0NMS19P
RkYocG9ydCkpOwogfQogCiBzdGF0aWMgdm9pZCBza2xfZGRpX2VuYWJsZV9jbG9jayhzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlciwKLS0gCjIuMjYuMgoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

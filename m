Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E2BD87C51D
	for <lists+intel-gfx@lfdr.de>; Wed, 31 Jul 2019 16:39:29 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BF9CB89916;
	Wed, 31 Jul 2019 14:39:27 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D42EF89F27
 for <intel-gfx@lists.freedesktop.org>; Wed, 31 Jul 2019 14:39:20 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 31 Jul 2019 07:39:20 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,330,1559545200"; d="scan'208";a="372122296"
Received: from irvmail001.ir.intel.com ([163.33.26.43])
 by fmsmga006.fm.intel.com with ESMTP; 31 Jul 2019 07:39:19 -0700
Received: from mwajdecz-MOBL1.ger.corp.intel.com
 (mwajdecz-mobl1.ger.corp.intel.com [172.28.174.50])
 by irvmail001.ir.intel.com (8.14.3/8.13.6/MailSET/Hub) with ESMTP id
 x6VEdHNS001788; Wed, 31 Jul 2019 15:39:18 +0100
From: Michal Wajdeczko <michal.wajdeczko@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 31 Jul 2019 14:38:55 +0000
Message-Id: <20190731143856.35460-4-michal.wajdeczko@intel.com>
X-Mailer: git-send-email 2.21.0.windows.1
In-Reply-To: <20190731143856.35460-1-michal.wajdeczko@intel.com>
References: <20190731143856.35460-1-michal.wajdeczko@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 3/4] drm/i915/guc: Use dedicated flag to
 track submission mode
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SW5zdGVhZCBvZiByZWx5aW5nIG9uIGVuYWJsZV9ndWMgbW9kcGFyYW0gdG8gcmVwcmVzZW50IGFj
dHVhbApHdUMgc3VibWlzc2lvbiBtb2RlLCB1c2UgZGVkaWNhdGVkIGZsYWcgYW5kIGxvb2sgYXQg
bW9kcGFyYW0Kb25seSB0byBjaGVjayBpZiBzdWJtaXNzaW9uIHdhcyBleHBsaWNpdGx5IGRpc2Fi
bGVkIGJ5IHRoZSB1c2VyLgoKdjI6IHJlYmFzZWQsIHNpbXBsaWZpZWQgY29uZGl0aW9uIChDaHJp
cykKClNpZ25lZC1vZmYtYnk6IE1pY2hhbCBXYWpkZWN6a28gPG1pY2hhbC53YWpkZWN6a29AaW50
ZWwuY29tPgpDYzogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlv
QGludGVsLmNvbT4KQ2M6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgot
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5jICAgICAgICAgICB8ICAx
ICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5oICAgICAgICAgICB8ICA3
ICsrKysrKysKIC4uLi9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uYyAg
ICB8IDE2ICsrKysrKysrKysrKysrKysKIC4uLi9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3Vj
X3N1Ym1pc3Npb24uaCAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVs
X3VjLmggICAgICAgICAgICB8ICAzICstLQogNSBmaWxlcyBjaGFuZ2VkLCAyNiBpbnNlcnRpb25z
KCspLCAyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L3VjL2ludGVsX2d1Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmMK
aW5kZXggZjhmYzM0ODE2ZTJjLi5kYTE0ZjgwNjc0OTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L3VjL2ludGVsX2d1Yy5jCkBAIC04Miw2ICs4Miw3IEBAIHZvaWQgaW50ZWxfZ3VjX2luaXRfZWFy
bHkoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogCWludGVsX2d1Y19md19pbml0X2Vhcmx5KGd1Yyk7
CiAJaW50ZWxfZ3VjX2N0X2luaXRfZWFybHkoJmd1Yy0+Y3QpOwogCWludGVsX2d1Y19sb2dfaW5p
dF9lYXJseSgmZ3VjLT5sb2cpOworCWludGVsX2d1Y19zdWJtaXNzaW9uX2luaXRfZWFybHkoZ3Vj
KTsKIAogCW11dGV4X2luaXQoJmd1Yy0+c2VuZF9tdXRleCk7CiAJc3Bpbl9sb2NrX2luaXQoJmd1
Yy0+aXJxX2xvY2spOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50
ZWxfZ3VjLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWMuaAppbmRleCA1
OTAxNTA2NjcyY2QuLjZlZGIyOWI5Y2VhYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvdWMvaW50ZWxfZ3VjLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50
ZWxfZ3VjLmgKQEAgLTYxLDYgKzYxLDggQEAgc3RydWN0IGludGVsX2d1YyB7CiAJCXZvaWQgKCpk
aXNhYmxlKShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpOwogCX0gaW50ZXJydXB0czsKIAorCWJvb2wg
c3VibWlzc2lvbl9zdXBwb3J0ZWQ7CisKIAlzdHJ1Y3QgaTkxNV92bWEgKmFkc192bWE7CiAJc3Ry
dWN0IF9fZ3VjX2Fkc19ibG9iICphZHNfYmxvYjsKIApAQCAtMTkwLDYgKzE5MiwxMSBAQCBzdGF0
aWMgaW5saW5lIGludCBpbnRlbF9ndWNfc2FuaXRpemUoc3RydWN0IGludGVsX2d1YyAqZ3VjKQog
CXJldHVybiAwOwogfQogCitzdGF0aWMgaW5saW5lIGJvb2wgaW50ZWxfZ3VjX2lzX3N1Ym1pc3Np
b25fc3VwcG9ydGVkKHN0cnVjdCBpbnRlbF9ndWMgKmd1YykKK3sKKwlyZXR1cm4gZ3VjLT5zdWJt
aXNzaW9uX3N1cHBvcnRlZDsKK30KKwogc3RhdGljIGlubGluZSB2b2lkIGludGVsX2d1Y19lbmFi
bGVfbXNnKHN0cnVjdCBpbnRlbF9ndWMgKmd1YywgdTMyIG1hc2spCiB7CiAJc3Bpbl9sb2NrX2ly
cSgmZ3VjLT5pcnFfbG9jayk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91
Yy9pbnRlbF9ndWNfc3VibWlzc2lvbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50
ZWxfZ3VjX3N1Ym1pc3Npb24uYwppbmRleCBiNDIzOGZlMTZhMDMuLmI0YjUwOGYxOWExYyAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Npb24u
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfc3VibWlzc2lvbi5j
CkBAIC0xMTYzLDYgKzExNjMsMjIgQEAgdm9pZCBpbnRlbF9ndWNfc3VibWlzc2lvbl9kaXNhYmxl
KHN0cnVjdCBpbnRlbF9ndWMgKmd1YykKIAlndWNfY2xpZW50c19kaXNhYmxlKGd1Yyk7CiB9CiAK
K3N0YXRpYyBib29sIF9fZ3VjX3N1Ym1pc3Npb25fc3VwcG9ydChzdHJ1Y3QgaW50ZWxfZ3VjICpn
dWMpCit7CisJLyogWFhYOiBHdUMgc3VibWlzc2lvbiBpcyB1bmF2YWlsYWJsZSBmb3Igbm93ICov
CisJcmV0dXJuIGZhbHNlOworCisJaWYgKCFpbnRlbF9ndWNfaXNfc3VwcG9ydGVkKGd1YykpCisJ
CXJldHVybiBmYWxzZTsKKworCXJldHVybiBpOTE1X21vZHBhcmFtcy5lbmFibGVfZ3VjICYgRU5B
QkxFX0dVQ19TVUJNSVNTSU9OOworfQorCit2b2lkIGludGVsX2d1Y19zdWJtaXNzaW9uX2luaXRf
ZWFybHkoc3RydWN0IGludGVsX2d1YyAqZ3VjKQoreworCWd1Yy0+c3VibWlzc2lvbl9zdXBwb3J0
ZWQgPSBfX2d1Y19zdWJtaXNzaW9uX3N1cHBvcnQoZ3VjKTsKK30KKwogI2lmIElTX0VOQUJMRUQo
Q09ORklHX0RSTV9JOTE1X1NFTEZURVNUKQogI2luY2x1ZGUgInNlbGZ0ZXN0X2d1Yy5jIgogI2Vu
ZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfc3Vi
bWlzc2lvbi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Np
b24uaAppbmRleCA4N2EzOGNiNmZhZjMuLmM0YWQyNzAyZWM4ZCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uaAorKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfc3VibWlzc2lvbi5oCkBAIC03Nyw2ICs3Nyw3
IEBAIHN0cnVjdCBpbnRlbF9ndWNfY2xpZW50IHsKIAlJOTE1X1NFTEZURVNUX0RFQ0xBUkUoYm9v
bCB1c2Vfbm9wX3dxaSk7CiB9OwogCit2b2lkIGludGVsX2d1Y19zdWJtaXNzaW9uX2luaXRfZWFy
bHkoc3RydWN0IGludGVsX2d1YyAqZ3VjKTsKIGludCBpbnRlbF9ndWNfc3VibWlzc2lvbl9pbml0
KHN0cnVjdCBpbnRlbF9ndWMgKmd1Yyk7CiBpbnQgaW50ZWxfZ3VjX3N1Ym1pc3Npb25fZW5hYmxl
KHN0cnVjdCBpbnRlbF9ndWMgKmd1Yyk7CiB2b2lkIGludGVsX2d1Y19zdWJtaXNzaW9uX2Rpc2Fi
bGUoc3RydWN0IGludGVsX2d1YyAqZ3VjKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3VjL2ludGVsX3VjLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91
Yy5oCmluZGV4IGNmNmM2MGNmZmRmYi4uYmQwNWQxYTFkMzlmIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Yy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3VjL2ludGVsX3VjLmgKQEAgLTU2LDggKzU2LDcgQEAgc3RhdGljIGlubGluZSBib29sIGlu
dGVsX3VjX3N1cHBvcnRzX2d1YyhzdHJ1Y3QgaW50ZWxfdWMgKnVjKQogCiBzdGF0aWMgaW5saW5l
IGJvb2wgaW50ZWxfdWNfc3VwcG9ydHNfZ3VjX3N1Ym1pc3Npb24oc3RydWN0IGludGVsX3VjICp1
YykKIHsKLQlHRU1fQlVHX09OKGk5MTVfbW9kcGFyYW1zLmVuYWJsZV9ndWMgPCAwKTsKLQlyZXR1
cm4gaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2d1YyAmIEVOQUJMRV9HVUNfU1VCTUlTU0lPTjsKKwly
ZXR1cm4gaW50ZWxfZ3VjX2lzX3N1Ym1pc3Npb25fc3VwcG9ydGVkKCZ1Yy0+Z3VjKTsKIH0KIAog
c3RhdGljIGlubGluZSBib29sIGludGVsX3VjX3N1cHBvcnRzX2h1YyhzdHJ1Y3QgaW50ZWxfdWMg
KnVjKQotLSAKMi4xOS4yCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRl
bC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5489F63EBE
	for <lists+intel-gfx@lfdr.de>; Wed, 10 Jul 2019 02:55:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 589FE899A5;
	Wed, 10 Jul 2019 00:55:18 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id ECD3E89951
 for <intel-gfx@lists.freedesktop.org>; Wed, 10 Jul 2019 00:55:16 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Jul 2019 17:55:16 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,472,1557212400"; d="scan'208";a="340915135"
Received: from dceraolo-linux.fm.intel.com ([10.1.27.145])
 by orsmga005.jf.intel.com with ESMTP; 09 Jul 2019 17:55:16 -0700
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  9 Jul 2019 17:54:36 -0700
Message-Id: <20190710005437.3496-12-daniele.ceraolospurio@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190710005437.3496-1-daniele.ceraolospurio@intel.com>
References: <20190710005437.3496-1-daniele.ceraolospurio@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 11/12] drm/i915/guc: prefer intel_gt in guc
 interrupt functions
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UgY2FuIGdldCByaWQgb2YgYSBmZXcgbW9yZSBndWNfdG9faTkxNSBhbmQgc3RhcnQgY29tcGFy
dG1lbnRhbGl6aW5nCmludGVycnVwdCBtYW5hZ2VtZW50IGEgYml0IG1vcmUuIFdlIHNob3VsZCBi
ZSBhYmxlIHRvIG1vdmUgbW9yZSBjb2RlIGluCnRoZSBmdXR1cmUgb25jZSB0aGUgZ3RfcG0gY29k
ZSBpcyBhbHNvIG1vdmVkIGFjcm9zcyB0byBndC4KClNpZ25lZC1vZmYtYnk6IERhbmllbGUgQ2Vy
YW9sbyBTcHVyaW8gPGRhbmllbGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5jb20+Ci0tLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaCB8ICAyICsKIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAgfCAgMSAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2lycS5jICAgICAgICAgIHwgNzMgKysrKysrKysrKysrKy0tLS0tLS0tLS0tCiAzIGZpbGVz
IGNoYW5nZWQsIDQyIGluc2VydGlvbnMoKyksIDM0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5oCmluZGV4IGI3MTEyNTJmZjQyNy4uNzM1ZGNmN2E0
NDVjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5o
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmgKQEAgLTYyLDYg
KzYyLDggQEAgc3RydWN0IGludGVsX2d0IHsKIAogCXUzMiBwbV9pbXI7CiAJdTMyIHBtX2llcjsK
KworCXUzMiBwbV9ndWNfZXZlbnRzOwogfTsKIAogZW51bSBpbnRlbF9ndF9zY3JhdGNoX2ZpZWxk
IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IDk5MDA0YzhiODMzZi4uMmFjZTFhZDE3M2Fk
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTEzOTksNyArMTM5OSw2IEBAIHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlIHsKIAl9OwogCXUzMiBndF9pcnFfbWFzazsKIAl1MzIgcG1fcnBzX2V2
ZW50czsKLQl1MzIgcG1fZ3VjX2V2ZW50czsKIAl1MzIgcGlwZXN0YXRfaXJxX21hc2tbSTkxNV9N
QVhfUElQRVNdOwogCiAJc3RydWN0IGk5MTVfaG90cGx1ZyBob3RwbHVnOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfaXJxLmMKaW5kZXggNzhjNzQ4Y2I5ZGY4Li45MWY4YzgxMDI4YzMgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9pcnEuYwpAQCAtNDIsNiArNDIsOCBAQAogI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxfbHBl
X2F1ZGlvLmgiCiAjaW5jbHVkZSAiZGlzcGxheS9pbnRlbF9wc3IuaCIKIAorI2luY2x1ZGUgImd0
L2ludGVsX2d0LmgiCisKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImk5MTVfaXJx
LmgiCiAjaW5jbHVkZSAiaTkxNV90cmFjZS5oIgpAQCAtNjAxLDg1ICs2MDMsOTAgQEAgdm9pZCBn
ZW42X2Rpc2FibGVfcnBzX2ludGVycnVwdHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2KQogCiB2b2lkIGdlbjlfcmVzZXRfZ3VjX2ludGVycnVwdHMoc3RydWN0IGludGVsX2d1YyAq
Z3VjKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGd1Y190b19pOTE1
KGd1Yyk7CisJc3RydWN0IGludGVsX2d0ICpndCA9IGd1Y190b19ndChndWMpOworCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1ID0gZ3QtPmk5MTU7CiAKLQlhc3NlcnRfcnBtX3dha2Vsb2Nr
X2hlbGQoJmRldl9wcml2LT5ydW50aW1lX3BtKTsKKwlhc3NlcnRfcnBtX3dha2Vsb2NrX2hlbGQo
Jmk5MTUtPnJ1bnRpbWVfcG0pOwogCi0Jc3Bpbl9sb2NrX2lycSgmZGV2X3ByaXYtPmlycV9sb2Nr
KTsKLQlnZW42X3Jlc2V0X3BtX2lpcihkZXZfcHJpdiwgZGV2X3ByaXYtPnBtX2d1Y19ldmVudHMp
OwotCXNwaW5fdW5sb2NrX2lycSgmZGV2X3ByaXYtPmlycV9sb2NrKTsKKwlzcGluX2xvY2tfaXJx
KCZpOTE1LT5pcnFfbG9jayk7CisJZ2VuNl9yZXNldF9wbV9paXIoaTkxNSwgZ3QtPnBtX2d1Y19l
dmVudHMpOworCXNwaW5fdW5sb2NrX2lycSgmaTkxNS0+aXJxX2xvY2spOwogfQogCiB2b2lkIGdl
bjlfZW5hYmxlX2d1Y19pbnRlcnJ1cHRzKHN0cnVjdCBpbnRlbF9ndWMgKmd1YykKIHsKLQlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSBndWNfdG9faTkxNShndWMpOworCXN0cnVj
dCBpbnRlbF9ndCAqZ3QgPSBndWNfdG9fZ3QoZ3VjKTsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSA9IGd0LT5pOTE1OwogCi0JYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKCZkZXZfcHJp
di0+cnVudGltZV9wbSk7CisJYXNzZXJ0X3JwbV93YWtlbG9ja19oZWxkKCZpOTE1LT5ydW50aW1l
X3BtKTsKIAotCXNwaW5fbG9ja19pcnEoJmRldl9wcml2LT5pcnFfbG9jayk7CisJc3Bpbl9sb2Nr
X2lycSgmaTkxNS0+aXJxX2xvY2spOwogCWlmICghZ3VjLT5pbnRlcnJ1cHRzLmVuYWJsZWQpIHsK
LQkJV0FSTl9PTl9PTkNFKEk5MTVfUkVBRChnZW42X3BtX2lpcihkZXZfcHJpdikpICYKLQkJCQkg
ICAgICAgZGV2X3ByaXYtPnBtX2d1Y19ldmVudHMpOworCQlXQVJOX09OX09OQ0UoaW50ZWxfdW5j
b3JlX3JlYWQoZ3QtPnVuY29yZSwgZ2VuNl9wbV9paXIoaTkxNSkpICYKKwkJCSAgICAgZ3QtPnBt
X2d1Y19ldmVudHMpOwogCQlndWMtPmludGVycnVwdHMuZW5hYmxlZCA9IHRydWU7Ci0JCWdlbjZf
ZW5hYmxlX3BtX2lycSgmZGV2X3ByaXYtPmd0LCBkZXZfcHJpdi0+cG1fZ3VjX2V2ZW50cyk7CisJ
CWdlbjZfZW5hYmxlX3BtX2lycShndCwgZ3QtPnBtX2d1Y19ldmVudHMpOwogCX0KLQlzcGluX3Vu
bG9ja19pcnEoJmRldl9wcml2LT5pcnFfbG9jayk7CisJc3Bpbl91bmxvY2tfaXJxKCZpOTE1LT5p
cnFfbG9jayk7CiB9CiAKIHZvaWQgZ2VuOV9kaXNhYmxlX2d1Y19pbnRlcnJ1cHRzKHN0cnVjdCBp
bnRlbF9ndWMgKmd1YykKIHsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSBn
dWNfdG9faTkxNShndWMpOworCXN0cnVjdCBpbnRlbF9ndCAqZ3QgPSBndWNfdG9fZ3QoZ3VjKTsK
KwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGd0LT5pOTE1OwogCi0JYXNzZXJ0X3Jw
bV93YWtlbG9ja19oZWxkKCZkZXZfcHJpdi0+cnVudGltZV9wbSk7CisJYXNzZXJ0X3JwbV93YWtl
bG9ja19oZWxkKCZpOTE1LT5ydW50aW1lX3BtKTsKIAotCXNwaW5fbG9ja19pcnEoJmRldl9wcml2
LT5pcnFfbG9jayk7CisJc3Bpbl9sb2NrX2lycSgmaTkxNS0+aXJxX2xvY2spOwogCWd1Yy0+aW50
ZXJydXB0cy5lbmFibGVkID0gZmFsc2U7CiAKLQlnZW42X2Rpc2FibGVfcG1faXJxKCZkZXZfcHJp
di0+Z3QsIGRldl9wcml2LT5wbV9ndWNfZXZlbnRzKTsKKwlnZW42X2Rpc2FibGVfcG1faXJxKGd0
LCBndC0+cG1fZ3VjX2V2ZW50cyk7CiAKLQlzcGluX3VubG9ja19pcnEoJmRldl9wcml2LT5pcnFf
bG9jayk7Ci0JaW50ZWxfc3luY2hyb25pemVfaXJxKGRldl9wcml2KTsKKwlzcGluX3VubG9ja19p
cnEoJmk5MTUtPmlycV9sb2NrKTsKKwlpbnRlbF9zeW5jaHJvbml6ZV9pcnEoaTkxNSk7CiAKIAln
ZW45X3Jlc2V0X2d1Y19pbnRlcnJ1cHRzKGd1Yyk7CiB9CiAKIHZvaWQgZ2VuMTFfcmVzZXRfZ3Vj
X2ludGVycnVwdHMoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogewotCXN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1ID0gZ3VjX3RvX2k5MTUoZ3VjKTsKKwlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0g
Z3VjX3RvX2d0KGd1Yyk7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBndC0+aTkx
NTsKIAogCXNwaW5fbG9ja19pcnEoJmk5MTUtPmlycV9sb2NrKTsKLQlnZW4xMV9yZXNldF9vbmVf
aWlyKCZpOTE1LT5ndCwgMCwgR0VOMTFfR1VDKTsKKwlnZW4xMV9yZXNldF9vbmVfaWlyKGd0LCAw
LCBHRU4xMV9HVUMpOwogCXNwaW5fdW5sb2NrX2lycSgmaTkxNS0+aXJxX2xvY2spOwogfQogCiB2
b2lkIGdlbjExX2VuYWJsZV9ndWNfaW50ZXJydXB0cyhzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiB7
Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gZ3VjX3RvX2k5MTUoZ3VjKTsK
KwlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gZ3VjX3RvX2d0KGd1Yyk7CiAKLQlzcGluX2xvY2tfaXJx
KCZkZXZfcHJpdi0+aXJxX2xvY2spOworCXNwaW5fbG9ja19pcnEoJmd0LT5pOTE1LT5pcnFfbG9j
ayk7CiAJaWYgKCFndWMtPmludGVycnVwdHMuZW5hYmxlZCkgewogCQl1MzIgZXZlbnRzID0gUkVH
X0ZJRUxEX1BSRVAoRU5HSU5FMV9NQVNLLCBHVUNfSU5UUl9HVUMySE9TVCk7CiAKLQkJV0FSTl9P
Tl9PTkNFKGdlbjExX3Jlc2V0X29uZV9paXIoJmRldl9wcml2LT5ndCwgMCwgR0VOMTFfR1VDKSk7
Ci0JCUk5MTVfV1JJVEUoR0VOMTFfR1VDX1NHX0lOVFJfRU5BQkxFLCBldmVudHMpOwotCQlJOTE1
X1dSSVRFKEdFTjExX0dVQ19TR19JTlRSX01BU0ssIH5ldmVudHMpOworCQlXQVJOX09OX09OQ0Uo
Z2VuMTFfcmVzZXRfb25lX2lpcihndCwgMCwgR0VOMTFfR1VDKSk7CisJCWludGVsX3VuY29yZV93
cml0ZShndC0+dW5jb3JlLCBHRU4xMV9HVUNfU0dfSU5UUl9FTkFCTEUsIGV2ZW50cyk7CisJCWlu
dGVsX3VuY29yZV93cml0ZShndC0+dW5jb3JlLCBHRU4xMV9HVUNfU0dfSU5UUl9NQVNLLCB+ZXZl
bnRzKTsKIAkJZ3VjLT5pbnRlcnJ1cHRzLmVuYWJsZWQgPSB0cnVlOwogCX0KLQlzcGluX3VubG9j
a19pcnEoJmRldl9wcml2LT5pcnFfbG9jayk7CisJc3Bpbl91bmxvY2tfaXJxKCZndC0+aTkxNS0+
aXJxX2xvY2spOwogfQogCiB2b2lkIGdlbjExX2Rpc2FibGVfZ3VjX2ludGVycnVwdHMoc3RydWN0
IGludGVsX2d1YyAqZ3VjKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9
IGd1Y190b19pOTE1KGd1Yyk7CisJc3RydWN0IGludGVsX2d0ICpndCA9IGd1Y190b19ndChndWMp
OworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gZ3QtPmk5MTU7CiAKLQlzcGluX2xv
Y2tfaXJxKCZkZXZfcHJpdi0+aXJxX2xvY2spOworCXNwaW5fbG9ja19pcnEoJmk5MTUtPmlycV9s
b2NrKTsKIAlndWMtPmludGVycnVwdHMuZW5hYmxlZCA9IGZhbHNlOwogCi0JSTkxNV9XUklURShH
RU4xMV9HVUNfU0dfSU5UUl9NQVNLLCB+MCk7Ci0JSTkxNV9XUklURShHRU4xMV9HVUNfU0dfSU5U
Ul9FTkFCTEUsIDApOworCWludGVsX3VuY29yZV93cml0ZShndC0+dW5jb3JlLCBHRU4xMV9HVUNf
U0dfSU5UUl9NQVNLLCB+MCk7CisJaW50ZWxfdW5jb3JlX3dyaXRlKGd0LT51bmNvcmUsIEdFTjEx
X0dVQ19TR19JTlRSX0VOQUJMRSwgMCk7CiAKLQlzcGluX3VubG9ja19pcnEoJmRldl9wcml2LT5p
cnFfbG9jayk7Ci0JaW50ZWxfc3luY2hyb25pemVfaXJxKGRldl9wcml2KTsKKwlzcGluX3VubG9j
a19pcnEoJmk5MTUtPmlycV9sb2NrKTsKKwlpbnRlbF9zeW5jaHJvbml6ZV9pcnEoaTkxNSk7CiAK
IAlnZW4xMV9yZXNldF9ndWNfaW50ZXJydXB0cyhndWMpOwogfQpAQCAtNDc1Nyw3ICs0NzY0LDcg
QEAgdm9pZCBpbnRlbF9pcnFfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYp
CiAKIAkvKiBwcmUtZ2VuMTEgdGhlIGd1YyBpcnFzIGJpdHMgYXJlIGluIHRoZSB1cHBlciAxNiBi
aXRzIG9mIHRoZSBwbSByZWcgKi8KIAlpZiAoSEFTX0dVQ19TQ0hFRChkZXZfcHJpdikgJiYgSU5U
RUxfR0VOKGRldl9wcml2KSA8IDExKQotCQlkZXZfcHJpdi0+cG1fZ3VjX2V2ZW50cyA9IEdVQ19J
TlRSX0dVQzJIT1NUIDw8IDE2OworCQlkZXZfcHJpdi0+Z3QucG1fZ3VjX2V2ZW50cyA9IEdVQ19J
TlRSX0dVQzJIT1NUIDw8IDE2OwogCiAJLyogTGV0J3MgdHJhY2sgdGhlIGVuYWJsZWQgcnBzIGV2
ZW50cyAqLwogCWlmIChJU19WQUxMRVlWSUVXKGRldl9wcml2KSkKLS0gCjIuMjAuMQoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxp
bmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

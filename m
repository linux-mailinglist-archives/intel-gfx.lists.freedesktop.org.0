Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C071E76147
	for <lists+intel-gfx@lfdr.de>; Fri, 26 Jul 2019 10:48:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9548E6ECBC;
	Fri, 26 Jul 2019 08:48:06 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2E7886E8B0
 for <intel-gfx@lists.freedesktop.org>; Fri, 26 Jul 2019 08:47:59 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 17621085-1500050 
 for multiple; Fri, 26 Jul 2019 09:46:16 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 26 Jul 2019 09:45:58 +0100
Message-Id: <20190726084613.22129-12-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190726084613.22129-1-chris@chris-wilson.co.uk>
References: <20190726084613.22129-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 12/27] drm/i915/gt: Move the [class][inst]
 lookup for engines onto the GT
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VG8gbWFpbnRhaW4gYSBmYXN0IGxvb2t1cCBmcm9tIGEgR1QgY2VudHJpYyBpcnEgaGFuZGxlciwg
d2Ugd2FudCB0aGUKZW5naW5lIGxvb2t1cCB0YWJsZXMgb24gdGhlIGludGVsX2d0LiBUbyBhdm9p
ZCBoYXZpbmcgbXVsdGlwbGUgY29waWVzIG9mCnRoZSBzYW1lIG11bHRpLWRpbWVuc2lvbiBsb29r
dXAgdGFibGUsIG1vdmUgdGhlIGdlbmVyaWMgdXNlciBlbmdpbmUKbG9va3VwIGludG8gYW4gcmJ0
cmVlIChmb3IgZmFzdCBhbmQgZmxleGlibGUgaW5kZXhpbmcpLgoKdjI6IFNwbGl0IHVhYmlfaW5z
dGFuY2UgY2YgdWFiaV9jbGFzcwoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0Bj
aHJpcy13aWxzb24uY28udWs+CkNjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50
ZWwuY29tPgpDYzogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlv
QGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUu
Y2VyYW9sb3NwdXJpb0BpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZp
bGUgICAgICAgICAgICAgICAgfCAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fY29udGV4dC5jICB8ICAzICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdp
bmUuaCAgICAgICB8ICAzIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9j
cy5jICAgIHwgNTMgKysrKystLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lX3R5cGVzLmggfCAgOSArKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZV91c2VyLmMgIHwgNjYgKysrKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV91c2VyLmggIHwgMjAgKysrKysrCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5oICAgICB8ICA0ICsrCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9zZWxmdGVzdF9scmMuYyAgICAgICB8IDE1ICsrKy0tCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5oICAgICAgICAgICAgICB8ICA3ICsrLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9pcnEuYyAgICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wbXUuYyAgICAgICAgICAgICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9xdWVyeS5jICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90
cmFjZS5oICAgICAgICAgICAgfCAxMCArLS0KIDE0IGZpbGVzIGNoYW5nZWQsIDEzOCBpbnNlcnRp
b25zKCspLCA2MCBkZWxldGlvbnMoLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdXNlci5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3VzZXIuaAoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUK
aW5kZXggMTgyMDE4NTJkNjhkLi5kM2ZiMmUzNzgxYWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCkBA
IC03NSw2ICs3NSw3IEBAIGd0LXkgKz0gXAogCWd0L2ludGVsX2VuZ2luZV9jcy5vIFwKIAlndC9p
bnRlbF9lbmdpbmVfaGVhcnRiZWF0Lm8gXAogCWd0L2ludGVsX2VuZ2luZV9wbS5vIFwKKwlndC9p
bnRlbF9lbmdpbmVfdXNlci5vIFwKIAlndC9pbnRlbF9ndC5vIFwKIAlndC9pbnRlbF9ndF9wbS5v
IFwKIAlndC9pbnRlbF9scmMubyBcCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X2NvbnRleHQuYwppbmRleCAxOGIyMjZiYzVlM2EuLmUzMTQzMWZhMTQxZSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCkBAIC03MCw2ICs3MCw3IEBACiAj
aW5jbHVkZSA8ZHJtL2k5MTVfZHJtLmg+CiAKICNpbmNsdWRlICJndC9pbnRlbF9scmNfcmVnLmgi
CisjaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3VzZXIuaCIKIAogI2luY2x1ZGUgImk5MTVfZ2Vt
X2NvbnRleHQuaCIKICNpbmNsdWRlICJpOTE1X2dsb2JhbHMuaCIKQEAgLTE3NDAsNyArMTc0MSw3
IEBAIGdldF9lbmdpbmVzKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgsCiAKIAkJaWYgKGUt
PmVuZ2luZXNbbl0pIHsKIAkJCWNpLmVuZ2luZV9jbGFzcyA9IGUtPmVuZ2luZXNbbl0tPmVuZ2lu
ZS0+dWFiaV9jbGFzczsKLQkJCWNpLmVuZ2luZV9pbnN0YW5jZSA9IGUtPmVuZ2luZXNbbl0tPmVu
Z2luZS0+aW5zdGFuY2U7CisJCQljaS5lbmdpbmVfaW5zdGFuY2UgPSBlLT5lbmdpbmVzW25dLT5l
bmdpbmUtPnVhYmlfaW5zdGFuY2U7CiAJCX0KIAogCQlpZiAoY29weV90b191c2VyKCZ1c2VyLT5l
bmdpbmVzW25dLCAmY2ksIHNpemVvZihjaSkpKSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZS5oCmluZGV4IDM4ZWViNDMyMGM5Ny4uZjBhZDMzOTI5OTg3IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaApAQCAtNDAwLDkgKzQwMCw2IEBAIHZvaWQgaW50ZWxf
ZW5naW5lX2R1bXAoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCQkgICAgICAgc3Ry
dWN0IGRybV9wcmludGVyICptLAogCQkgICAgICAgY29uc3QgY2hhciAqaGVhZGVyLCAuLi4pOwog
Ci1zdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICoKLWludGVsX2VuZ2luZV9sb29rdXBfdXNlcihzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgdTggY2xhc3MsIHU4IGluc3RhbmNlKTsKLQogc3Rh
dGljIGlubGluZSB2b2lkIGludGVsX2VuZ2luZV9jb250ZXh0X2luKHN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZSkKIHsKIAl1bnNpZ25lZCBsb25nIGZsYWdzOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwppbmRleCA4OWY0YTM4MjViNzcuLjU5MzU3MDI0Nzhj
YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKQEAgLTMyLDYg
KzMyLDcgQEAKIAogI2luY2x1ZGUgImludGVsX2VuZ2luZS5oIgogI2luY2x1ZGUgImludGVsX2Vu
Z2luZV9wbS5oIgorI2luY2x1ZGUgImludGVsX2VuZ2luZV91c2VyLmgiCiAjaW5jbHVkZSAiaW50
ZWxfY29udGV4dC5oIgogI2luY2x1ZGUgImludGVsX2xyYy5oIgogI2luY2x1ZGUgImludGVsX3Jl
c2V0LmgiCkBAIC0yODUsOSArMjg2LDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfZW5naW5lX3Nhbml0
aXplX21taW8oc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCWludGVsX2VuZ2luZV9z
ZXRfaHdzcF93cml0ZW1hc2soZW5naW5lLCB+MHUpOwogfQogCi1zdGF0aWMgaW50Ci1pbnRlbF9l
bmdpbmVfc2V0dXAoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAotCQkgICBlbnVt
IGludGVsX2VuZ2luZV9pZCBpZCkKK3N0YXRpYyBpbnQgaW50ZWxfZW5naW5lX3NldHVwKHN0cnVj
dCBpbnRlbF9ndCAqZ3QsIGVudW0gaW50ZWxfZW5naW5lX2lkIGlkKQogewogCWNvbnN0IHN0cnVj
dCBlbmdpbmVfaW5mbyAqaW5mbyA9ICZpbnRlbF9lbmdpbmVzW2lkXTsKIAlzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmU7CkBAIC0zMDMsMTAgKzMwMiw5IEBAIGludGVsX2VuZ2luZV9zZXR1
cChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJaWYgKEdFTV9ERUJVR19XQVJO
X09OKGluZm8tPmluc3RhbmNlID4gTUFYX0VOR0lORV9JTlNUQU5DRSkpCiAJCXJldHVybiAtRUlO
VkFMOwogCi0JaWYgKEdFTV9ERUJVR19XQVJOX09OKGRldl9wcml2LT5lbmdpbmVfY2xhc3NbaW5m
by0+Y2xhc3NdW2luZm8tPmluc3RhbmNlXSkpCisJaWYgKEdFTV9ERUJVR19XQVJOX09OKGd0LT5l
bmdpbmVfY2xhc3NbaW5mby0+Y2xhc3NdW2luZm8tPmluc3RhbmNlXSkpCiAJCXJldHVybiAtRUlO
VkFMOwogCi0JR0VNX0JVR19PTihkZXZfcHJpdi0+ZW5naW5lW2lkXSk7CiAJZW5naW5lID0ga3ph
bGxvYyhzaXplb2YoKmVuZ2luZSksIEdGUF9LRVJORUwpOwogCWlmICghZW5naW5lKQogCQlyZXR1
cm4gLUVOT01FTTsKQEAgLTMxNSwxMiArMzEzLDEyIEBAIGludGVsX2VuZ2luZV9zZXR1cChzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAKIAllbmdpbmUtPmlkID0gaWQ7CiAJZW5n
aW5lLT5tYXNrID0gQklUKGlkKTsKLQllbmdpbmUtPmk5MTUgPSBkZXZfcHJpdjsKLQllbmdpbmUt
Pmd0ID0gJmRldl9wcml2LT5ndDsKLQllbmdpbmUtPnVuY29yZSA9ICZkZXZfcHJpdi0+dW5jb3Jl
OworCWVuZ2luZS0+aTkxNSA9IGd0LT5pOTE1OworCWVuZ2luZS0+Z3QgPSBndDsKKwllbmdpbmUt
PnVuY29yZSA9IGd0LT51bmNvcmU7CiAJX19zcHJpbnRfZW5naW5lX25hbWUoZW5naW5lLT5uYW1l
LCBpbmZvKTsKIAllbmdpbmUtPmh3X2lkID0gZW5naW5lLT5ndWNfaWQgPSBpbmZvLT5od19pZDsK
LQllbmdpbmUtPm1taW9fYmFzZSA9IF9fZW5naW5lX21taW9fYmFzZShkZXZfcHJpdiwgaW5mby0+
bW1pb19iYXNlcyk7CisJZW5naW5lLT5tbWlvX2Jhc2UgPSBfX2VuZ2luZV9tbWlvX2Jhc2UoZ3Qt
Pmk5MTUsIGluZm8tPm1taW9fYmFzZXMpOwogCWVuZ2luZS0+Y2xhc3MgPSBpbmZvLT5jbGFzczsK
IAllbmdpbmUtPmluc3RhbmNlID0gaW5mby0+aW5zdGFuY2U7CiAKQEAgLTMzMSwxMyArMzI5LDE0
IEBAIGludGVsX2VuZ2luZV9zZXR1cChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYs
CiAJZW5naW5lLT5kZXN0cm95ID0gKHR5cGVvZihlbmdpbmUtPmRlc3Ryb3kpKWtmcmVlOwogCiAJ
ZW5naW5lLT51YWJpX2NsYXNzID0gaW50ZWxfZW5naW5lX2NsYXNzZXNbaW5mby0+Y2xhc3NdLnVh
YmlfY2xhc3M7CisJZW5naW5lLT51YWJpX2luc3RhbmNlID0gaW5mby0+aW5zdGFuY2U7CiAKLQll
bmdpbmUtPmNvbnRleHRfc2l6ZSA9IGludGVsX2VuZ2luZV9jb250ZXh0X3NpemUoZGV2X3ByaXYs
CisJZW5naW5lLT5jb250ZXh0X3NpemUgPSBpbnRlbF9lbmdpbmVfY29udGV4dF9zaXplKGd0LT5p
OTE1LAogCQkJCQkJCSBlbmdpbmUtPmNsYXNzKTsKIAlpZiAoV0FSTl9PTihlbmdpbmUtPmNvbnRl
eHRfc2l6ZSA+IEJJVCgyMCkpKQogCQllbmdpbmUtPmNvbnRleHRfc2l6ZSA9IDA7CiAJaWYgKGVu
Z2luZS0+Y29udGV4dF9zaXplKQotCQlEUklWRVJfQ0FQUyhkZXZfcHJpdiktPmhhc19sb2dpY2Fs
X2NvbnRleHRzID0gdHJ1ZTsKKwkJRFJJVkVSX0NBUFMoZ3QtPmk5MTUpLT5oYXNfbG9naWNhbF9j
b250ZXh0cyA9IHRydWU7CiAKIAkvKiBOb3RoaW5nIHRvIGRvIGhlcmUsIGV4ZWN1dGUgaW4gb3Jk
ZXIgb2YgZGVwZW5kZW5jaWVzICovCiAJZW5naW5lLT5zY2hlZHVsZSA9IE5VTEw7CkBAIC0zNDks
OCArMzQ4LDExIEBAIGludGVsX2VuZ2luZV9zZXR1cChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYsCiAJLyogU2NydWIgbW1pbyBzdGF0ZSBvbiB0YWtlb3ZlciAqLwogCWludGVsX2Vu
Z2luZV9zYW5pdGl6ZV9tbWlvKGVuZ2luZSk7CiAKLQlkZXZfcHJpdi0+ZW5naW5lX2NsYXNzW2lu
Zm8tPmNsYXNzXVtpbmZvLT5pbnN0YW5jZV0gPSBlbmdpbmU7Ci0JZGV2X3ByaXYtPmVuZ2luZVtp
ZF0gPSBlbmdpbmU7CisJZW5naW5lLT5ndC0+ZW5naW5lX2NsYXNzW2luZm8tPmNsYXNzXVtpbmZv
LT5pbnN0YW5jZV0gPSBlbmdpbmU7CisKKwlpbnRlbF9lbmdpbmVfYWRkX3VzZXIoZW5naW5lKTsK
KwlndC0+aTkxNS0+ZW5naW5lW2lkXSA9IGVuZ2luZTsKKwogCXJldHVybiAwOwogfQogCkBAIC00
MzMsNyArNDM1LDcgQEAgaW50IGludGVsX2VuZ2luZXNfaW5pdF9tbWlvKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1KQogCQlpZiAoIUhBU19FTkdJTkUoaTkxNSwgaSkpCiAJCQljb250aW51
ZTsKIAotCQllcnIgPSBpbnRlbF9lbmdpbmVfc2V0dXAoaTkxNSwgaSk7CisJCWVyciA9IGludGVs
X2VuZ2luZV9zZXR1cCgmaTkxNS0+Z3QsIGkpOwogCQlpZiAoZXJyKQogCQkJZ290byBjbGVhbnVw
OwogCkBAIC0xNTA1LDI5ICsxNTA3LDYgQEAgdm9pZCBpbnRlbF9lbmdpbmVfZHVtcChzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAJaW50ZWxfZW5naW5lX3ByaW50X2JyZWFkY3J1bWJz
KGVuZ2luZSwgbSk7CiB9CiAKLXN0YXRpYyB1OCB1c2VyX2NsYXNzX21hcFtdID0gewotCVtJOTE1
X0VOR0lORV9DTEFTU19SRU5ERVJdID0gUkVOREVSX0NMQVNTLAotCVtJOTE1X0VOR0lORV9DTEFT
U19DT1BZXSA9IENPUFlfRU5HSU5FX0NMQVNTLAotCVtJOTE1X0VOR0lORV9DTEFTU19WSURFT10g
PSBWSURFT19ERUNPREVfQ0xBU1MsCi0JW0k5MTVfRU5HSU5FX0NMQVNTX1ZJREVPX0VOSEFOQ0Vd
ID0gVklERU9fRU5IQU5DRU1FTlRfQ0xBU1MsCi19OwotCi1zdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICoKLWludGVsX2VuZ2luZV9sb29rdXBfdXNlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSwgdTggY2xhc3MsIHU4IGluc3RhbmNlKQotewotCWlmIChjbGFzcyA+PSBBUlJBWV9TSVpFKHVz
ZXJfY2xhc3NfbWFwKSkKLQkJcmV0dXJuIE5VTEw7Ci0KLQljbGFzcyA9IHVzZXJfY2xhc3NfbWFw
W2NsYXNzXTsKLQotCUdFTV9CVUdfT04oY2xhc3MgPiBNQVhfRU5HSU5FX0NMQVNTKTsKLQotCWlm
IChpbnN0YW5jZSA+IE1BWF9FTkdJTkVfSU5TVEFOQ0UpCi0JCXJldHVybiBOVUxMOwotCi0JcmV0
dXJuIGk5MTUtPmVuZ2luZV9jbGFzc1tjbGFzc11baW5zdGFuY2VdOwotfQotCiAvKioKICAqIGlu
dGVsX2VuYWJsZV9lbmdpbmVfc3RhdHMoKSAtIEVuYWJsZSBlbmdpbmUgYnVzeSB0cmFja2luZyBv
biBlbmdpbmUKICAqIEBlbmdpbmU6IGVuZ2luZSB0byBlbmFibGUgc3RhdHMgY29sbGVjdGlvbgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAppbmRleCA5YTNl
YWQ1NTY3NDMuLjBlZjA3YWRhMGFlNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lX3R5cGVzLmgKQEAgLTEyLDYgKzEyLDcgQEAKICNpbmNsdWRlIDxsaW51eC9rcmVm
Lmg+CiAjaW5jbHVkZSA8bGludXgvbGlzdC5oPgogI2luY2x1ZGUgPGxpbnV4L2xsaXN0Lmg+Cisj
aW5jbHVkZSA8bGludXgvcmJ0cmVlLmg+CiAjaW5jbHVkZSA8bGludXgvdGltZXIuaD4KICNpbmNs
dWRlIDxsaW51eC90eXBlcy5oPgogI2luY2x1ZGUgPGxpbnV4L3dvcmtxdWV1ZS5oPgpAQCAtMjYw
LDE1ICsyNjEsMTkgQEAgc3RydWN0IGludGVsX2VuZ2luZV9jcyB7CiAJdW5zaWduZWQgaW50IGd1
Y19pZDsKIAlpbnRlbF9lbmdpbmVfbWFza190IG1hc2s7CiAKLQl1OCB1YWJpX2NsYXNzOwotCiAJ
dTggY2xhc3M7CiAJdTggaW5zdGFuY2U7CisKKwl1OCB1YWJpX2NsYXNzOworCXU4IHVhYmlfaW5z
dGFuY2U7CisKIAl1MzIgY29udGV4dF9zaXplOwogCXUzMiBtbWlvX2Jhc2U7CiAKIAl1MzIgdWFi
aV9jYXBhYmlsaXRpZXM7CiAKKwlzdHJ1Y3QgcmJfbm9kZSB1YWJpX25vZGU7CisKIAlzdHJ1Y3Qg
aW50ZWxfc3NldSBzc2V1OwogCiAJc3RydWN0IGludGVsX3JpbmcgKmJ1ZmZlcjsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV91c2VyLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdXNlci5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAwMDAwMC4uZjc0ZmI0ZDJmYTBkCi0tLSAvZGV2L251bGwKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3VzZXIuYwpAQCAtMCwwICsxLDY2IEBA
CisvKgorICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVAorICoKKyAqIENvcHlyaWdodCDC
qSAyMDE5IEludGVsIENvcnBvcmF0aW9uCisgKi8KKworI2luY2x1ZGUgImk5MTVfZHJ2LmgiCisj
aW5jbHVkZSAiaW50ZWxfZW5naW5lLmgiCisjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3VzZXIuaCIK
Kworc3RydWN0IGludGVsX2VuZ2luZV9jcyAqCitpbnRlbF9lbmdpbmVfbG9va3VwX3VzZXIoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHU4IGNsYXNzLCB1OCBpbnN0YW5jZSkKK3sKKwlz
dHJ1Y3QgcmJfbm9kZSAqcCA9IGk5MTUtPnVhYmlfZW5naW5lcy5yYl9ub2RlOworCisJd2hpbGUg
KHApIHsKKwkJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqaXQgPQorCQkJcmJfZW50cnkocCwgdHlw
ZW9mKCppdCksIHVhYmlfbm9kZSk7CisKKwkJaWYgKGNsYXNzIDwgaXQtPnVhYmlfY2xhc3MpCisJ
CQlwID0gcC0+cmJfbGVmdDsKKwkJZWxzZSBpZiAoY2xhc3MgPiBpdC0+dWFiaV9jbGFzcyB8fAor
CQkJIGluc3RhbmNlID4gaXQtPnVhYmlfaW5zdGFuY2UpCisJCQlwID0gcC0+cmJfcmlnaHQ7CisJ
CWVsc2UgaWYgKGluc3RhbmNlIDwgaXQtPnVhYmlfaW5zdGFuY2UpCisJCQlwID0gcC0+cmJfbGVm
dDsKKwkJZWxzZQorCQkJcmV0dXJuIGl0OworCX0KKworCXJldHVybiBOVUxMOworfQorCit2b2lk
IGludGVsX2VuZ2luZV9hZGRfdXNlcihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCit7
CisJc3RydWN0IHJiX3Jvb3QgKnJvb3QgPSAmZW5naW5lLT5pOTE1LT51YWJpX2VuZ2luZXM7CisJ
c3RydWN0IHJiX25vZGUgKipwLCAqcGFyZW50OworCisJcGFyZW50ID0gTlVMTDsKKwlwID0gJnJv
b3QtPnJiX25vZGU7CisJd2hpbGUgKCpwKSB7CisJCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKml0
OworCisJCXBhcmVudCA9ICpwOworCQlpdCA9IHJiX2VudHJ5KHBhcmVudCwgdHlwZW9mKCppdCks
IHVhYmlfbm9kZSk7CisKKwkJLyogQWxsIHVzZXIgY2xhc3M6aW5zdGFuY2UgaWRlbnRpZmllcnMg
bXVzdCBiZSB1bmlxdWUgKi8KKwkJR0VNX0JVR19PTihpdC0+dWFiaV9jbGFzcyA9PSBlbmdpbmUt
PnVhYmlfY2xhc3MgJiYKKwkJCSAgIGl0LT51YWJpX2luc3RhbmNlID09IGVuZ2luZS0+dWFiaV9p
bnN0YW5jZSk7CisKKwkJaWYgKGVuZ2luZS0+dWFiaV9jbGFzcyA8IGl0LT51YWJpX2NsYXNzKQor
CQkJcCA9ICZwYXJlbnQtPnJiX2xlZnQ7CisJCWVsc2UgaWYgKGVuZ2luZS0+dWFiaV9jbGFzcyA+
IGl0LT51YWJpX2NsYXNzIHx8CisJCQkgZW5naW5lLT51YWJpX2luc3RhbmNlID4gaXQtPnVhYmlf
aW5zdGFuY2UpCisJCQlwID0gJnBhcmVudC0+cmJfcmlnaHQ7CisJCWVsc2UKKwkJCXAgPSAmcGFy
ZW50LT5yYl9sZWZ0OworCX0KKworCXJiX2xpbmtfbm9kZSgmZW5naW5lLT51YWJpX25vZGUsIHBh
cmVudCwgcCk7CisJcmJfaW5zZXJ0X2NvbG9yKCZlbmdpbmUtPnVhYmlfbm9kZSwgcm9vdCk7CisK
KwlHRU1fQlVHX09OKGludGVsX2VuZ2luZV9sb29rdXBfdXNlcihlbmdpbmUtPmk5MTUsCisJCQkJ
CSAgICBlbmdpbmUtPnVhYmlfY2xhc3MsCisJCQkJCSAgICBlbmdpbmUtPnVhYmlfaW5zdGFuY2Up
ICE9IGVuZ2luZSk7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9lbmdpbmVfdXNlci5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3Vz
ZXIuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjA5MWRjOGE0YTM5
ZgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2lu
ZV91c2VyLmgKQEAgLTAsMCArMSwyMCBAQAorLyoKKyAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVy
OiBNSVQKKyAqCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisK
KyNpZm5kZWYgSU5URUxfRU5HSU5FX1VTRVJfSAorI2RlZmluZSBJTlRFTF9FTkdJTkVfVVNFUl9I
CisKKyNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgorCitzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZTsK
K3N0cnVjdCBpbnRlbF9lbmdpbmVfY3M7CisKK3N0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKgoraW50
ZWxfZW5naW5lX2xvb2t1cF91c2VyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCB1OCBj
bGFzcywgdTggaW5zdGFuY2UpOworCit2b2lkIGludGVsX2VuZ2luZV9hZGRfdXNlcihzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUpOworCisjZW5kaWYgLyogSU5URUxfRU5HSU5FX1VTRVJf
SCAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMu
aCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmgKaW5kZXggMDExMmJi
OThjYmYzLi41ZmE3YmY3OTNmMGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2d0X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3Rf
dHlwZXMuaApAQCAtMjEsNiArMjEsNyBAQAogCiBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZTsKIHN0
cnVjdCBpOTE1X2dndHQ7CitzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzOwogc3RydWN0IGludGVsX3Vu
Y29yZTsKIAogc3RydWN0IGludGVsX2d0IHsKQEAgLTY3LDYgKzY4LDkgQEAgc3RydWN0IGludGVs
X2d0IHsKIAl1MzIgcG1faWVyOwogCiAJdTMyIHBtX2d1Y19ldmVudHM7CisKKwlzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzICplbmdpbmVfY2xhc3NbTUFYX0VOR0lORV9DTEFTUyArIDFdCisJCQkJCSAg
ICBbTUFYX0VOR0lORV9JTlNUQU5DRSArIDFdOwogfTsKIAogZW51bSBpbnRlbF9ndF9zY3JhdGNo
X2ZpZWxkIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xy
Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKaW5kZXggNjBmMjdl
NTJkMjY3Li5lYjQwYTU4NjY1YmUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L3NlbGZ0ZXN0X2xyYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xy
Yy5jCkBAIC0xNzczLDYgKzE3NzMsNyBAQCBzdGF0aWMgaW50IGxpdmVfdmlydHVhbF9lbmdpbmUo
dm9pZCAqYXJnKQogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gYXJnOwogCXN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MgKnNpYmxpbmdzW01BWF9FTkdJTkVfSU5TVEFOQ0UgKyAxXTsKIAlz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7CisJc3RydWN0IGludGVsX2d0ICpndCA9ICZp
OTE1LT5ndDsKIAllbnVtIGludGVsX2VuZ2luZV9pZCBpZDsKIAl1bnNpZ25lZCBpbnQgY2xhc3Ms
IGluc3Q7CiAJaW50IGVyciA9IC1FTk9ERVY7CkBAIC0xNzk2LDEwICsxNzk3LDEwIEBAIHN0YXRp
YyBpbnQgbGl2ZV92aXJ0dWFsX2VuZ2luZSh2b2lkICphcmcpCiAKIAkJbnNpYmxpbmcgPSAwOwog
CQlmb3IgKGluc3QgPSAwOyBpbnN0IDw9IE1BWF9FTkdJTkVfSU5TVEFOQ0U7IGluc3QrKykgewot
CQkJaWYgKCFpOTE1LT5lbmdpbmVfY2xhc3NbY2xhc3NdW2luc3RdKQorCQkJaWYgKCFndC0+ZW5n
aW5lX2NsYXNzW2NsYXNzXVtpbnN0XSkKIAkJCQljb250aW51ZTsKIAotCQkJc2libGluZ3NbbnNp
YmxpbmcrK10gPSBpOTE1LT5lbmdpbmVfY2xhc3NbY2xhc3NdW2luc3RdOworCQkJc2libGluZ3Nb
bnNpYmxpbmcrK10gPSBndC0+ZW5naW5lX2NsYXNzW2NsYXNzXVtpbnN0XTsKIAkJfQogCQlpZiAo
bnNpYmxpbmcgPCAyKQogCQkJY29udGludWU7CkBAIC0xOTIwLDYgKzE5MjEsNyBAQCBzdGF0aWMg
aW50IGxpdmVfdmlydHVhbF9tYXNrKHZvaWQgKmFyZykKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSA9IGFyZzsKIAlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpzaWJsaW5nc1tNQVhf
RU5HSU5FX0lOU1RBTkNFICsgMV07CisJc3RydWN0IGludGVsX2d0ICpndCA9ICZpOTE1LT5ndDsK
IAl1bnNpZ25lZCBpbnQgY2xhc3MsIGluc3Q7CiAJaW50IGVyciA9IDA7CiAKQEAgLTE5MzMsMTAg
KzE5MzUsMTAgQEAgc3RhdGljIGludCBsaXZlX3ZpcnR1YWxfbWFzayh2b2lkICphcmcpCiAKIAkJ
bnNpYmxpbmcgPSAwOwogCQlmb3IgKGluc3QgPSAwOyBpbnN0IDw9IE1BWF9FTkdJTkVfSU5TVEFO
Q0U7IGluc3QrKykgewotCQkJaWYgKCFpOTE1LT5lbmdpbmVfY2xhc3NbY2xhc3NdW2luc3RdKQor
CQkJaWYgKCFndC0+ZW5naW5lX2NsYXNzW2NsYXNzXVtpbnN0XSkKIAkJCQlicmVhazsKIAotCQkJ
c2libGluZ3NbbnNpYmxpbmcrK10gPSBpOTE1LT5lbmdpbmVfY2xhc3NbY2xhc3NdW2luc3RdOwor
CQkJc2libGluZ3NbbnNpYmxpbmcrK10gPSBndC0+ZW5naW5lX2NsYXNzW2NsYXNzXVtpbnN0XTsK
IAkJfQogCQlpZiAobnNpYmxpbmcgPCAyKQogCQkJY29udGludWU7CkBAIC0yMDk3LDYgKzIwOTks
NyBAQCBzdGF0aWMgaW50IGxpdmVfdmlydHVhbF9ib25kKHZvaWQgKmFyZykKIAl9OwogCXN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gYXJnOwogCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KnNpYmxpbmdzW01BWF9FTkdJTkVfSU5TVEFOQ0UgKyAxXTsKKwlzdHJ1Y3QgaW50ZWxfZ3QgKmd0
ID0gJmk5MTUtPmd0OwogCXVuc2lnbmVkIGludCBjbGFzcywgaW5zdDsKIAlpbnQgZXJyID0gMDsK
IApAQCAtMjExMSwxMSArMjExNCwxMSBAQCBzdGF0aWMgaW50IGxpdmVfdmlydHVhbF9ib25kKHZv
aWQgKmFyZykKIAogCQluc2libGluZyA9IDA7CiAJCWZvciAoaW5zdCA9IDA7IGluc3QgPD0gTUFY
X0VOR0lORV9JTlNUQU5DRTsgaW5zdCsrKSB7Ci0JCQlpZiAoIWk5MTUtPmVuZ2luZV9jbGFzc1tj
bGFzc11baW5zdF0pCisJCQlpZiAoIWd0LT5lbmdpbmVfY2xhc3NbY2xhc3NdW2luc3RdKQogCQkJ
CWJyZWFrOwogCiAJCQlHRU1fQlVHX09OKG5zaWJsaW5nID09IEFSUkFZX1NJWkUoc2libGluZ3Mp
KTsKLQkJCXNpYmxpbmdzW25zaWJsaW5nKytdID0gaTkxNS0+ZW5naW5lX2NsYXNzW2NsYXNzXVtp
bnN0XTsKKwkJCXNpYmxpbmdzW25zaWJsaW5nKytdID0gZ3QtPmVuZ2luZV9jbGFzc1tjbGFzc11b
aW5zdF07CiAJCX0KIAkJaWYgKG5zaWJsaW5nIDwgMikKIAkJCWNvbnRpbnVlOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZHJ2LmgKaW5kZXggYWI1NDhlYzNkYTFjLi41OGIxZWY1ZjJjZTAgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9kcnYuaApAQCAtMTM3MSwxMSArMTM3MSwxMiBAQCBzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSB7CiAJd2FpdF9xdWV1ZV9oZWFkX3QgZ21idXNfd2FpdF9xdWV1ZTsKIAogCXN0cnVjdCBw
Y2lfZGV2ICpicmlkZ2VfZGV2OwotCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZVtJOTE1
X05VTV9FTkdJTkVTXTsKKwogCS8qIENvbnRleHQgdXNlZCBpbnRlcm5hbGx5IHRvIGlkbGUgdGhl
IEdQVSBhbmQgc2V0dXAgaW5pdGlhbCBzdGF0ZSAqLwogCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0
ICprZXJuZWxfY29udGV4dDsKLQlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmVfY2xhc3Nb
TUFYX0VOR0lORV9DTEFTUyArIDFdCi0JCQkJCSAgICBbTUFYX0VOR0lORV9JTlNUQU5DRSArIDFd
OworCisJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lW0k5MTVfTlVNX0VOR0lORVNdOwor
CXN0cnVjdCByYl9yb290IHVhYmlfZW5naW5lczsKIAogCXN0cnVjdCByZXNvdXJjZSBtY2hfcmVz
OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYwppbmRleCBhMTdkNGZkMTc5NjIuLjdiMTlkN2RmOWJh
MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5jCkBAIC0zMTA5LDcgKzMxMDksNyBAQCBnZW4xMV9l
bmdpbmVfaXJxX2hhbmRsZXIoc3RydWN0IGludGVsX2d0ICpndCwgY29uc3QgdTggY2xhc3MsCiAJ
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOwogCiAJaWYgKGluc3RhbmNlIDw9IE1BWF9F
TkdJTkVfSU5TVEFOQ0UpCi0JCWVuZ2luZSA9IGd0LT5pOTE1LT5lbmdpbmVfY2xhc3NbY2xhc3Nd
W2luc3RhbmNlXTsKKwkJZW5naW5lID0gZ3QtPmVuZ2luZV9jbGFzc1tjbGFzc11baW5zdGFuY2Vd
OwogCWVsc2UKIAkJZW5naW5lID0gTlVMTDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9wbXUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcG11LmMKaW5kZXgg
ZWZmODY0ODNiZWMwLi5iZGY3OTYzYTA0M2IgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcG11LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wbXUuYwpAQCAt
OCw2ICs4LDcgQEAKICNpbmNsdWRlIDxsaW51eC9wbV9ydW50aW1lLmg+CiAKICNpbmNsdWRlICJn
dC9pbnRlbF9lbmdpbmUuaCIKKyNpbmNsdWRlICJndC9pbnRlbF9lbmdpbmVfdXNlci5oIgogCiAj
aW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJpOTE1X3BtdS5oIgpAQCAtOTI2LDcgKzky
Nyw3IEBAIGNyZWF0ZV9ldmVudF9hdHRyaWJ1dGVzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpp
OTE1KQogCQkJaTkxNV9pdGVyID0KIAkJCQlhZGRfaTkxNV9hdHRyKGk5MTVfaXRlciwgc3RyLAog
CQkJCQkgICAgICBfX0k5MTVfUE1VX0VOR0lORShlbmdpbmUtPnVhYmlfY2xhc3MsCi0JCQkJCQkJ
CWVuZ2luZS0+aW5zdGFuY2UsCisJCQkJCQkJCWVuZ2luZS0+dWFiaV9pbnN0YW5jZSwKIAkJCQkJ
CQkJZW5naW5lX2V2ZW50c1tpXS5zYW1wbGUpKTsKIAogCQkJc3RyID0ga2FzcHJpbnRmKEdGUF9L
RVJORUwsICIlcy0lcy51bml0IiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcXVlcnkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcXVlcnkuYwppbmRleCA3Yjcw
MTYxNzEwNTcuLjcwYjFhZDM4ZTYxNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9xdWVyeS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcXVlcnkuYwpAQCAt
MTI3LDcgKzEyNyw3IEBAIHF1ZXJ5X2VuZ2luZV9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1LAogCiAJZm9yX2VhY2hfZW5naW5lKGVuZ2luZSwgaTkxNSwgaWQpIHsKIAkJaW5mby5l
bmdpbmUuZW5naW5lX2NsYXNzID0gZW5naW5lLT51YWJpX2NsYXNzOwotCQlpbmZvLmVuZ2luZS5l
bmdpbmVfaW5zdGFuY2UgPSBlbmdpbmUtPmluc3RhbmNlOworCQlpbmZvLmVuZ2luZS5lbmdpbmVf
aW5zdGFuY2UgPSBlbmdpbmUtPnVhYmlfaW5zdGFuY2U7CiAJCWluZm8uY2FwYWJpbGl0aWVzID0g
ZW5naW5lLT51YWJpX2NhcGFiaWxpdGllczsKIAogCQlpZiAoX19jb3B5X3RvX3VzZXIoaW5mb19w
dHIsICZpbmZvLCBzaXplb2YoaW5mbykpKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV90cmFjZS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90cmFjZS5oCmluZGV4
IGRhMThiOGQ2YjgwYy4uMWQxMTI0NWM0Yzg3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X3RyYWNlLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90cmFjZS5o
CkBAIC02NzcsNyArNjc3LDcgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X3F1ZXVlLAogCQkJ
ICAgX19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRleDsKIAkJCSAgIF9f
ZW50cnktPmh3X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsKIAkJCSAgIF9fZW50cnktPmNs
YXNzID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFzczsKLQkJCSAgIF9fZW50cnktPmluc3RhbmNlID0g
cnEtPmVuZ2luZS0+aW5zdGFuY2U7CisJCQkgICBfX2VudHJ5LT5pbnN0YW5jZSA9IHJxLT5lbmdp
bmUtPnVhYmlfaW5zdGFuY2U7CiAJCQkgICBfX2VudHJ5LT5jdHggPSBycS0+ZmVuY2UuY29udGV4
dDsKIAkJCSAgIF9fZW50cnktPnNlcW5vID0gcnEtPmZlbmNlLnNlcW5vOwogCQkJICAgX19lbnRy
eS0+ZmxhZ3MgPSBmbGFnczsKQEAgLTcwNiw3ICs3MDYsNyBAQCBERUNMQVJFX0VWRU5UX0NMQVNT
KGk5MTVfcmVxdWVzdCwKIAkJCSAgIF9fZW50cnktPmRldiA9IHJxLT5pOTE1LT5kcm0ucHJpbWFy
eS0+aW5kZXg7CiAJCQkgICBfX2VudHJ5LT5od19pZCA9IHJxLT5nZW1fY29udGV4dC0+aHdfaWQ7
CiAJCQkgICBfX2VudHJ5LT5jbGFzcyA9IHJxLT5lbmdpbmUtPnVhYmlfY2xhc3M7Ci0JCQkgICBf
X2VudHJ5LT5pbnN0YW5jZSA9IHJxLT5lbmdpbmUtPmluc3RhbmNlOworCQkJICAgX19lbnRyeS0+
aW5zdGFuY2UgPSBycS0+ZW5naW5lLT51YWJpX2luc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4
ID0gcnEtPmZlbmNlLmNvbnRleHQ7CiAJCQkgICBfX2VudHJ5LT5zZXFubyA9IHJxLT5mZW5jZS5z
ZXFubzsKIAkJCSAgICksCkBAIC03NTEsNyArNzUxLDcgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1
ZXN0X2luLAogCQkJICAgX19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRl
eDsKIAkJCSAgIF9fZW50cnktPmh3X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsKIAkJCSAg
IF9fZW50cnktPmNsYXNzID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFzczsKLQkJCSAgIF9fZW50cnkt
Pmluc3RhbmNlID0gcnEtPmVuZ2luZS0+aW5zdGFuY2U7CisJCQkgICBfX2VudHJ5LT5pbnN0YW5j
ZSA9IHJxLT5lbmdpbmUtPnVhYmlfaW5zdGFuY2U7CiAJCQkgICBfX2VudHJ5LT5jdHggPSBycS0+
ZmVuY2UuY29udGV4dDsKIAkJCSAgIF9fZW50cnktPnNlcW5vID0gcnEtPmZlbmNlLnNlcW5vOwog
CQkJICAgX19lbnRyeS0+cHJpbyA9IHJxLT5zY2hlZC5hdHRyLnByaW9yaXR5OwpAQCAtNzgyLDcg
Kzc4Miw3IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF9vdXQsCiAJCQkgICBfX2VudHJ5LT5k
ZXYgPSBycS0+aTkxNS0+ZHJtLnByaW1hcnktPmluZGV4OwogCQkJICAgX19lbnRyeS0+aHdfaWQg
PSBycS0+Z2VtX2NvbnRleHQtPmh3X2lkOwogCQkJICAgX19lbnRyeS0+Y2xhc3MgPSBycS0+ZW5n
aW5lLT51YWJpX2NsYXNzOwotCQkJICAgX19lbnRyeS0+aW5zdGFuY2UgPSBycS0+ZW5naW5lLT5p
bnN0YW5jZTsKKwkJCSAgIF9fZW50cnktPmluc3RhbmNlID0gcnEtPmVuZ2luZS0+dWFiaV9pbnN0
YW5jZTsKIAkJCSAgIF9fZW50cnktPmN0eCA9IHJxLT5mZW5jZS5jb250ZXh0OwogCQkJICAgX19l
bnRyeS0+c2Vxbm8gPSBycS0+ZmVuY2Uuc2Vxbm87CiAJCQkgICBfX2VudHJ5LT5jb21wbGV0ZWQg
PSBpOTE1X3JlcXVlc3RfY29tcGxldGVkKHJxKTsKQEAgLTg0Nyw3ICs4NDcsNyBAQCBUUkFDRV9F
VkVOVChpOTE1X3JlcXVlc3Rfd2FpdF9iZWdpbiwKIAkJCSAgIF9fZW50cnktPmRldiA9IHJxLT5p
OTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7CiAJCQkgICBfX2VudHJ5LT5od19pZCA9IHJxLT5nZW1f
Y29udGV4dC0+aHdfaWQ7CiAJCQkgICBfX2VudHJ5LT5jbGFzcyA9IHJxLT5lbmdpbmUtPnVhYmlf
Y2xhc3M7Ci0JCQkgICBfX2VudHJ5LT5pbnN0YW5jZSA9IHJxLT5lbmdpbmUtPmluc3RhbmNlOwor
CQkJICAgX19lbnRyeS0+aW5zdGFuY2UgPSBycS0+ZW5naW5lLT51YWJpX2luc3RhbmNlOwogCQkJ
ICAgX19lbnRyeS0+Y3R4ID0gcnEtPmZlbmNlLmNvbnRleHQ7CiAJCQkgICBfX2VudHJ5LT5zZXFu
byA9IHJxLT5mZW5jZS5zZXFubzsKIAkJCSAgIF9fZW50cnktPmZsYWdzID0gZmxhZ3M7Ci0tIAoy
LjIyLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCklu
dGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 91524B8F27
	for <lists+intel-gfx@lfdr.de>; Fri, 20 Sep 2019 13:43:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8C0406FCA6;
	Fri, 20 Sep 2019 11:43:02 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mblankhorst.nl (mblankhorst.nl
 [IPv6:2a02:2308::216:3eff:fe92:dfa3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AFC006FCA4
 for <intel-gfx@lists.freedesktop.org>; Fri, 20 Sep 2019 11:42:42 +0000 (UTC)
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 20 Sep 2019 13:42:26 +0200
Message-Id: <20190920114235.22411-14-maarten.lankhorst@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190920114235.22411-1-maarten.lankhorst@linux.intel.com>
References: <20190920114235.22411-1-maarten.lankhorst@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 14/23] drm/i915: Prepare update_slave() for
 bigjoiner plane updates
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2Ugd2FudCB0byBwcm9ncmFtIHNsYXZlIHBsYW5lcyB3aXRoIHRoZSBtYXN0ZXIgcGxhbmVfc3Rh
dGUgZm9yCnByb3BlcnRpZXMgc3VjaCBhcyBGQiwgcm90YXRpb24sIGNvb3JkaW5hdGVzLCBldGMs
IGJ1dCB0aGUKc2xhdmUgcGxhbmVfc3RhdGUgZm9yIGFsbCBwcm9ncmFtbWluZyBwYXJhbWV0ZXJz
LgoKSW5zdGVhZCBvZiBzcGVjaWFsIGNhc2luZyBOVjEyIFktcGxhbmVzLCB3ZSBtYWtlIHRoZSBj
b2RlIG1vcmUKZ2VuZXJpYywgWSBwbGFuZXMgYXJlIHByb2dyYW1tZWQgd2l0aCBzZXBhcmF0ZSBz
dGF0ZSBmcm9tIHRoZSBVVgpwbGFuZS4KClRoaXMgd2lsbCBhbGxvdyB1cyB0byBwcm9ncmFtIHBs
YW5lcyBvbiBhIGJpZ2pvaW5lciBzbGF2ZSBjcnRjIGluCmEgc2ltaWxhciB3YXkuCgpUaGlzIGFs
c28gcmVxdWlyZXMgdGhlIFZNQSB0byBiZSBjb3BpZWQgdG8gdGhlIHNsYXZlLCB3aGljaCBpcwpk
b25lIGluIHByZXBhcmVfcGxhbmVfZmIoKS4KClNpZ25lZC1vZmYtYnk6IE1hYXJ0ZW4gTGFua2hv
cnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51eC5pbnRlbC5jb20+Ci0tLQogLi4uL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2F0b21pY19wbGFuZS5jIHwgMjEgKysrLS0tCiAuLi4vZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljX3BsYW5lLmggfCAgMyAtCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyAgfCA1NiArKysrKysrKysrKystLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmggIHwgIDMgKy0KIC4uLi9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCAgICB8ICA2ICstCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jICAgfCA3NSArKysrKysrKysrLS0t
LS0tLS0tCiA2IGZpbGVzIGNoYW5nZWQsIDEwNiBpbnNlcnRpb25zKCspLCA1OCBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21p
Y19wbGFuZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWNfcGxh
bmUuYwppbmRleCBhMWEzNGI5OTgxY2MuLjk2NGRiNzc3NGQxMCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWNfcGxhbmUuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pY19wbGFuZS5jCkBAIC0yNzcsMTQgKzI3
NywxNSBAQCB2b2lkIGludGVsX3VwZGF0ZV9wbGFuZShzdHJ1Y3QgaW50ZWxfcGxhbmUgKnBsYW5l
LAogCXBsYW5lLT51cGRhdGVfcGxhbmUocGxhbmUsIGNydGNfc3RhdGUsIHBsYW5lX3N0YXRlKTsK
IH0KIAotdm9pZCBpbnRlbF91cGRhdGVfc2xhdmUoc3RydWN0IGludGVsX3BsYW5lICpwbGFuZSwK
LQkJCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAotCQkJY29uc3Qg
c3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSkKK3N0YXRpYyB2b2lkIGludGVs
X3VwZGF0ZV9zbGF2ZShzdHJ1Y3QgaW50ZWxfcGxhbmUgKnBsYW5lLAorCQkJICAgICAgIGNvbnN0
IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAorCQkJICAgICAgIGNvbnN0IHN0
cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqbWFzdGVyX3BsYW5lX3N0YXRlLAorCQkJICAgICAgIGNv
bnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqc2xhdmVfcGxhbmVfc3RhdGUpCiB7CiAJc3Ry
dWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0
Yyk7CiAKIAl0cmFjZV9pbnRlbF91cGRhdGVfcGxhbmUoJnBsYW5lLT5iYXNlLCBjcnRjKTsKLQlw
bGFuZS0+dXBkYXRlX3NsYXZlKHBsYW5lLCBjcnRjX3N0YXRlLCBwbGFuZV9zdGF0ZSk7CisJcGxh
bmUtPnVwZGF0ZV9zbGF2ZShwbGFuZSwgY3J0Y19zdGF0ZSwgbWFzdGVyX3BsYW5lX3N0YXRlLCBz
bGF2ZV9wbGFuZV9zdGF0ZSk7CiB9CiAKIHZvaWQgaW50ZWxfZGlzYWJsZV9wbGFuZShzdHJ1Y3Qg
aW50ZWxfcGxhbmUgKnBsYW5lLApAQCAtMzI0LDYgKzMyNSw4IEBAIHZvaWQgc2tsX3VwZGF0ZV9w
bGFuZXNfb25fY3J0YyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKIAkJfSBlbHNl
IGlmIChuZXdfcGxhbmVfc3RhdGUtPnBsYW5hcl9zbGF2ZSkgewogCQkJc3RydWN0IGludGVsX3Bs
YW5lICptYXN0ZXIgPQogCQkJCW5ld19wbGFuZV9zdGF0ZS0+cGxhbmFyX2xpbmtlZF9wbGFuZTsK
KwkJCXN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqbWFzdGVyX3BsYW5lX3N0YXRlID0KKwkJCQlp
bnRlbF9hdG9taWNfZ2V0X25ld19wbGFuZV9zdGF0ZShzdGF0ZSwgbWFzdGVyKTsKIAogCQkJLyoK
IAkJCSAqIFdlIHVwZGF0ZSB0aGUgc2xhdmUgcGxhbmUgZnJvbSB0aGlzIGZ1bmN0aW9uIGJlY2F1
c2UKQEAgLTMzMSwxMyArMzM0LDExIEBAIHZvaWQgc2tsX3VwZGF0ZV9wbGFuZXNfb25fY3J0Yyhz
dHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKIAkJCSAqIGNhbGxiYWNrIHJ1bnMgaW50
byBpc3N1ZXMgd2hlbiB0aGUgWSBwbGFuZSBpcwogCQkJICogcmVhc3NpZ25lZCwgZGlzYWJsZWQg
b3IgdXNlZCBieSBhIGRpZmZlcmVudCBwbGFuZS4KIAkJCSAqCi0JCQkgKiBUaGUgc2xhdmUgcGxh
bmUgaXMgdXBkYXRlZCB3aXRoIHRoZSBtYXN0ZXIgcGxhbmUncwotCQkJICogcGxhbmVfc3RhdGUu
CisJCQkgKiBUaGUgc2xhdmUgcGxhbmUgaXMgdXBkYXRlZCB3aXRoIHRoZSBtYXN0ZXIncworCQkJ
ICogcGxhbmVfc3RhdGUgYXMgZXh0cmEgYXJndW1lbnQuCiAJCQkgKi8KLQkJCW5ld19wbGFuZV9z
dGF0ZSA9Ci0JCQkJaW50ZWxfYXRvbWljX2dldF9uZXdfcGxhbmVfc3RhdGUoc3RhdGUsIG1hc3Rl
cik7Ci0KLQkJCWludGVsX3VwZGF0ZV9zbGF2ZShwbGFuZSwgbmV3X2NydGNfc3RhdGUsIG5ld19w
bGFuZV9zdGF0ZSk7CisJCQlpbnRlbF91cGRhdGVfc2xhdmUocGxhbmUsIG5ld19jcnRjX3N0YXRl
LAorCQkJCQkgICBtYXN0ZXJfcGxhbmVfc3RhdGUsIG5ld19wbGFuZV9zdGF0ZSk7CiAJCX0gZWxz
ZSB7CiAJCQlpbnRlbF9kaXNhYmxlX3BsYW5lKHBsYW5lLCBuZXdfY3J0Y19zdGF0ZSk7CiAJCX0K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljX3Bs
YW5lLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pY19wbGFuZS5o
CmluZGV4IGNiN2VmNGY5ZWFmZC4uMzNmYjg1Y2QzOTA5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pY19wbGFuZS5oCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljX3BsYW5lLmgKQEAgLTIzLDkgKzIzLDYgQEAg
dW5zaWduZWQgaW50IGludGVsX3BsYW5lX2RhdGFfcmF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIHZvaWQgaW50ZWxfdXBkYXRlX3BsYW5lKHN0cnVjdCBpbnRl
bF9wbGFuZSAqcGxhbmUsCiAJCQljb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19z
dGF0ZSwKIAkJCWNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGUpOwot
dm9pZCBpbnRlbF91cGRhdGVfc2xhdmUoc3RydWN0IGludGVsX3BsYW5lICpwbGFuZSwKLQkJCWNv
bnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAotCQkJY29uc3Qgc3RydWN0
IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSk7CiB2b2lkIGludGVsX2Rpc2FibGVfcGxh
bmUoc3RydWN0IGludGVsX3BsYW5lICpwbGFuZSwKIAkJCSBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZSAqY3J0Y19zdGF0ZSk7CiBzdHJ1Y3QgaW50ZWxfcGxhbmUgKmludGVsX3BsYW5lX2Fs
bG9jKHZvaWQpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXku
YwppbmRleCAwNDI0YTM3OGViNTEuLmRmNTg4YmY0NzU1OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKQEAgLTM5NzIsMTEgKzM5NzIsMTIgQEAgc3Rh
dGljIHVuc2lnbmVkIGludCBza2xfcGxhbmVfc3RyaWRlX211bHQoY29uc3Qgc3RydWN0IGRybV9m
cmFtZWJ1ZmZlciAqZmIsCiAJCXJldHVybiBpbnRlbF90aWxlX3dpZHRoX2J5dGVzKGZiLCBjb2xv
cl9wbGFuZSk7CiB9CiAKLXUzMiBza2xfcGxhbmVfc3RyaWRlKGNvbnN0IHN0cnVjdCBpbnRlbF9w
bGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGUsCit1MzIgc2tsX3BsYW5lX3N0cmlkZShjb25zdCBzdHJ1
Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKm1hc3Rlcl9wbGFuZV9zdGF0ZSwKKwkJICAgICBjb25zdCBz
dHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlLAogCQkgICAgIGludCBjb2xvcl9w
bGFuZSkKIHsKLQljb25zdCBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiA9IHBsYW5lX3N0YXRl
LT5iYXNlLmZiOwotCXVuc2lnbmVkIGludCByb3RhdGlvbiA9IHBsYW5lX3N0YXRlLT5iYXNlLnJv
dGF0aW9uOworCWNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0gbWFzdGVyX3BsYW5l
X3N0YXRlLT5iYXNlLmZiOworCXVuc2lnbmVkIGludCByb3RhdGlvbiA9IG1hc3Rlcl9wbGFuZV9z
dGF0ZS0+YmFzZS5yb3RhdGlvbjsKIAl1MzIgc3RyaWRlID0gcGxhbmVfc3RhdGUtPmNvbG9yX3Bs
YW5lW2NvbG9yX3BsYW5lXS5zdHJpZGU7CiAKIAlpZiAoY29sb3JfcGxhbmUgPj0gZmItPmZvcm1h
dC0+bnVtX3BsYW5lcykKQEAgLTExOTAwLDYgKzExOTAxLDIzIEBAIHN0YXRpYyBpbnQgaWNsX2No
ZWNrX252MTJfcGxhbmVzKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogCQlj
cnRjX3N0YXRlLT5hY3RpdmVfcGxhbmVzIHw9IEJJVChsaW5rZWQtPmlkKTsKIAkJY3J0Y19zdGF0
ZS0+dXBkYXRlX3BsYW5lcyB8PSBCSVQobGlua2VkLT5pZCk7CiAJCURSTV9ERUJVR19LTVMoIlVz
aW5nICVzIGFzIFkgcGxhbmUgZm9yICVzXG4iLCBsaW5rZWQtPmJhc2UubmFtZSwgcGxhbmUtPmJh
c2UubmFtZSk7CisKKwkJLyogQ29weSBwYXJhbWV0ZXJzIHRvIHNsYXZlIHBsYW5lICovCisJCWxp
bmtlZF9zdGF0ZS0+Y3RsID0gcGxhbmVfc3RhdGUtPmN0bCB8IFBMQU5FX0NUTF9ZVVY0MjBfWV9Q
TEFORTsKKwkJbGlua2VkX3N0YXRlLT5jb2xvcl9jdGwgPSBwbGFuZV9zdGF0ZS0+Y29sb3JfY3Rs
OworCQlsaW5rZWRfc3RhdGUtPmNvbG9yX3BsYW5lWzBdID0gcGxhbmVfc3RhdGUtPmNvbG9yX3Bs
YW5lWzBdOworCisJCWxpbmtlZF9zdGF0ZS0+YmFzZS5zcmMgPSBwbGFuZV9zdGF0ZS0+YmFzZS5z
cmM7CisJCWxpbmtlZF9zdGF0ZS0+YmFzZS5kc3QgPSBwbGFuZV9zdGF0ZS0+YmFzZS5kc3Q7CisK
KwkJaWYgKGljbF9pc19oZHJfcGxhbmUoZGV2X3ByaXYsIHBsYW5lLT5pZCkpIHsKKwkJCWlmIChs
aW5rZWQtPmlkID09IFBMQU5FX1NQUklURTUpCisJCQkJcGxhbmVfc3RhdGUtPmN1c19jdGwgfD0g
UExBTkVfQ1VTX1BMQU5FXzc7CisJCQllbHNlIGlmIChsaW5rZWQtPmlkID09IFBMQU5FX1NQUklU
RTQpCisJCQkJcGxhbmVfc3RhdGUtPmN1c19jdGwgfD0gUExBTkVfQ1VTX1BMQU5FXzY7CisJCQll
bHNlCisJCQkJTUlTU0lOR19DQVNFKGxpbmtlZC0+aWQpOworCQl9CiAJfQogCiAJcmV0dXJuIDA7
CkBAIC0xNDc4Miw2ICsxNDgwMCwyMyBAQCBpbnRlbF9wcmVwYXJlX3BsYW5lX2ZiKHN0cnVjdCBk
cm1fcGxhbmUgKnBsYW5lLAogCQkJcmV0dXJuIHJldDsKIAl9CiAKKwlpZiAodG9faW50ZWxfcGxh
bmVfc3RhdGUobmV3X3N0YXRlKS0+cGxhbmFyX3NsYXZlKSB7CisJCXN0cnVjdCBpbnRlbF9wbGFu
ZV9zdGF0ZSAqbmV3X3BsYW5lX3N0YXRlID0gdG9faW50ZWxfcGxhbmVfc3RhdGUobmV3X3N0YXRl
KTsKKwkJY29uc3Qgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpsaW5rZWRfcGxhbmVfc3RhdGUg
PQorCQkJaW50ZWxfYXRvbWljX2dldF9uZXdfcGxhbmVfc3RhdGUoaW50ZWxfc3RhdGUsIG5ld19w
bGFuZV9zdGF0ZS0+cGxhbmFyX2xpbmtlZF9wbGFuZSk7CisKKwkJLyoKKwkJICogV2UgYXJlIGEg
cGxhbmFyIHNsYXZlLCBWTUEgaXMgb24gb3VyIHBsYW5hciBtYXN0ZXIsCisJCSAqIGJ1dCBtYXkg
bm90IGJlIHRoZSBzYW1lIGFzIHRoZSBiaWdqb2luZXIgbWFzdGVyIHBsYW5lLgorCQkgKgorCQkg
KiBDb3B5IHRoZSB2bWEgZnJvbSBvdXIgcGxhbmFyIG1hc3RlciBhbmQgcmV0dXJuLgorCQkgKi8K
KwkJaWYgKGxpbmtlZF9wbGFuZV9zdGF0ZS0+dm1hKQorCQkJbmV3X3BsYW5lX3N0YXRlLT52bWEg
PQorCQkJCWk5MTVfdm1hX2dldChsaW5rZWRfcGxhbmVfc3RhdGUtPnZtYSk7CisJCXJldHVybiAw
OworCX0KKwogCWlmICghb2JqKQogCQlyZXR1cm4gMDsKIApAQCAtMTQ4NTEsMTAgKzE0ODg2LDEx
IEBAIGludGVsX3ByZXBhcmVfcGxhbmVfZmIoc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCiAgKi8K
IHZvaWQKIGludGVsX2NsZWFudXBfcGxhbmVfZmIoc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCi0J
CSAgICAgICBzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpvbGRfc3RhdGUpCisJCSAgICAgICBzdHJ1
Y3QgZHJtX3BsYW5lX3N0YXRlICpfb2xkX3N0YXRlKQogeworCXN0cnVjdCBpbnRlbF9wbGFuZV9z
dGF0ZSAqb2xkX3N0YXRlID0gdG9faW50ZWxfcGxhbmVfc3RhdGUoX29sZF9zdGF0ZSk7CiAJc3Ry
dWN0IGludGVsX2F0b21pY19zdGF0ZSAqaW50ZWxfc3RhdGUgPQotCQl0b19pbnRlbF9hdG9taWNf
c3RhdGUob2xkX3N0YXRlLT5zdGF0ZSk7CisJCXRvX2ludGVsX2F0b21pY19zdGF0ZShvbGRfc3Rh
dGUtPmJhc2Uuc3RhdGUpOwogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRv
X2k5MTUocGxhbmUtPmRldik7CiAKIAlpZiAoaW50ZWxfc3RhdGUtPnJwc19pbnRlcmFjdGl2ZSkg
ewpAQCAtMTQ4NjIsOSArMTQ4OTgsMTcgQEAgaW50ZWxfY2xlYW51cF9wbGFuZV9mYihzdHJ1Y3Qg
ZHJtX3BsYW5lICpwbGFuZSwKIAkJaW50ZWxfc3RhdGUtPnJwc19pbnRlcmFjdGl2ZSA9IGZhbHNl
OwogCX0KIAorCS8qIHBpbiBpcyBoYW5kbGVkIGluIG1hc3RlciBwbGFuZV9zdGF0ZSBmb3IgcGxh
bmFyIGZvcm1hdHMgKi8KKwlpZiAob2xkX3N0YXRlLT5wbGFuYXJfc2xhdmUpIHsKKwkJaWYgKG9s
ZF9zdGF0ZS0+dm1hKQorCQkJaTkxNV92bWFfcHV0KG9sZF9zdGF0ZS0+dm1hKTsKKwkJb2xkX3N0
YXRlLT52bWEgPSBOVUxMOworCQlyZXR1cm47CisJfQorCiAJLyogU2hvdWxkIG9ubHkgYmUgY2Fs
bGVkIGFmdGVyIGEgc3VjY2Vzc2Z1bCBpbnRlbF9wcmVwYXJlX3BsYW5lX2ZiKCkhICovCiAJbXV0
ZXhfbG9jaygmZGV2X3ByaXYtPmRybS5zdHJ1Y3RfbXV0ZXgpOwotCWludGVsX3BsYW5lX3VucGlu
X2ZiKHRvX2ludGVsX3BsYW5lX3N0YXRlKG9sZF9zdGF0ZSkpOworCWludGVsX3BsYW5lX3VucGlu
X2ZiKG9sZF9zdGF0ZSk7CiAJbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+ZHJtLnN0cnVjdF9tdXRl
eCk7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmgK
aW5kZXggYjFhZTBlNTljNzE1Li43NjRkMDVkMTNiOWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5oCkBAIC01NjAsNyArNTYwLDggQEAgdTMyIGdsa19w
bGFuZV9jb2xvcl9jdGxfY3J0Yyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19z
dGF0ZSk7CiB1MzIgc2tsX3BsYW5lX2N0bChjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
Y3J0Y19zdGF0ZSwKIAkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0
YXRlKTsKIHUzMiBza2xfcGxhbmVfY3RsX2NydGMoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3Rh
dGUgKmNydGNfc3RhdGUpOwotdTMyIHNrbF9wbGFuZV9zdHJpZGUoY29uc3Qgc3RydWN0IGludGVs
X3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSwKK3UzMiBza2xfcGxhbmVfc3RyaWRlKGNvbnN0IHN0
cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqbWFzdGVyX3BsYW5lX3N0YXRlLAorCQkgICAgIGNvbnN0
IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGUsCiAJCSAgICAgaW50IHBsYW5l
KTsKIGludCBza2xfY2hlY2tfcGxhbmVfc3VyZmFjZShzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUg
KnBsYW5lX3N0YXRlKTsKIGludCBpOXh4X2NoZWNrX3BsYW5lX3N1cmZhY2Uoc3RydWN0IGludGVs
X3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCmluZGV4IDdlMDZjNjE0NDdlNi4uYWNlMzcy
YTc2MzMwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXlfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXlfdHlwZXMuaApAQCAtNTM4LDYgKzUzOCw5IEBAIHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0
ZSB7CiAJLyogcGxhbmUgY29sb3IgY29udHJvbCByZWdpc3RlciAqLwogCXUzMiBjb2xvcl9jdGw7
CiAKKwkvKiBjaHJvbWEgdXBzYW1wbGVyIGNvbnRyb2wgcmVnaXN0ZXIgKi8KKwl1MzIgY3VzX2N0
bDsKKwogCS8qCiAJICogc2NhbGVyX2lkCiAJICogICAgPSAtMSA6IG5vdCB1c2luZyBhIHNjYWxl
cgpAQCAtMTA5Nyw3ICsxMTAwLDggQEAgc3RydWN0IGludGVsX3BsYW5lIHsKIAkJCSAgICAgY29u
c3Qgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSk7CiAJdm9pZCAoKnVwZGF0
ZV9zbGF2ZSkoc3RydWN0IGludGVsX3BsYW5lICpwbGFuZSwKIAkJCSAgICAgY29uc3Qgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCi0JCQkgICAgIGNvbnN0IHN0cnVjdCBpbnRl
bF9wbGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGUpOworCQkJICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxf
cGxhbmVfc3RhdGUgKm1hc3Rlcl9wbGFuZV9zdGF0ZSwKKwkJCSAgICAgY29uc3Qgc3RydWN0IGlu
dGVsX3BsYW5lX3N0YXRlICpzbGF2ZV9wbGFuZV9zdGF0ZSk7CiAJdm9pZCAoKmRpc2FibGVfcGxh
bmUpKHN0cnVjdCBpbnRlbF9wbGFuZSAqcGxhbmUsCiAJCQkgICAgICBjb25zdCBzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSk7CiAJYm9vbCAoKmdldF9od19zdGF0ZSkoc3RydWN0
IGludGVsX3BsYW5lICpwbGFuZSwgZW51bSBwaXBlICpwaXBlKTsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jCmluZGV4IGYwOTU2ZmVjZGVhNC4uYmNhN2ZmOGE4
OTA3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0
ZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMKQEAg
LTM0NiwxMCArMzQ2LDExIEBAIHNrbF9wbGFuZV9tYXhfc3RyaWRlKHN0cnVjdCBpbnRlbF9wbGFu
ZSAqcGxhbmUsCiBzdGF0aWMgdm9pZAogc2tsX3Byb2dyYW1fc2NhbGVyKHN0cnVjdCBpbnRlbF9w
bGFuZSAqcGxhbmUsCiAJCSAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0
YXRlLAorCQkgICBjb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKm1hc3Rlcl9wbGFuZV9z
dGF0ZSwKIAkJICAgY29uc3Qgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSkK
IHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHBsYW5lLT5i
YXNlLmRldik7Ci0JY29uc3Qgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIgPSBwbGFuZV9zdGF0
ZS0+YmFzZS5mYjsKKwljb25zdCBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiA9IG1hc3Rlcl9w
bGFuZV9zdGF0ZS0+YmFzZS5mYjsKIAllbnVtIHBpcGUgcGlwZSA9IHBsYW5lLT5waXBlOwogCWlu
dCBzY2FsZXJfaWQgPSBwbGFuZV9zdGF0ZS0+c2NhbGVyX2lkOwogCWNvbnN0IHN0cnVjdCBpbnRl
bF9zY2FsZXIgKnNjYWxlciA9CkBAIC01MjcsMjggKzUyOCwyOSBAQCBpY2xfcHJvZ3JhbV9pbnB1
dF9jc2Moc3RydWN0IGludGVsX3BsYW5lICpwbGFuZSwKIHN0YXRpYyB2b2lkCiBza2xfcHJvZ3Jh
bV9wbGFuZShzdHJ1Y3QgaW50ZWxfcGxhbmUgKnBsYW5lLAogCQkgIGNvbnN0IHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAorCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9z
dGF0ZSAqbWFzdGVyX3BsYW5lX3N0YXRlLAogCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9z
dGF0ZSAqcGxhbmVfc3RhdGUsCi0JCSAgaW50IGNvbG9yX3BsYW5lLCBib29sIHNsYXZlLCB1MzIg
cGxhbmVfY3RsKQorCQkgIGludCBjb2xvcl9wbGFuZSkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHBsYW5lLT5iYXNlLmRldik7CiAJZW51bSBwbGFuZV9p
ZCBwbGFuZV9pZCA9IHBsYW5lLT5pZDsKIAllbnVtIHBpcGUgcGlwZSA9IHBsYW5lLT5waXBlOwot
CWNvbnN0IHN0cnVjdCBkcm1faW50ZWxfc3ByaXRlX2NvbG9ya2V5ICprZXkgPSAmcGxhbmVfc3Rh
dGUtPmNrZXk7CisJY29uc3Qgc3RydWN0IGRybV9pbnRlbF9zcHJpdGVfY29sb3JrZXkgKmtleSA9
ICZtYXN0ZXJfcGxhbmVfc3RhdGUtPmNrZXk7CiAJdTMyIHN1cmZfYWRkciA9IHBsYW5lX3N0YXRl
LT5jb2xvcl9wbGFuZVtjb2xvcl9wbGFuZV0ub2Zmc2V0OwotCXUzMiBzdHJpZGUgPSBza2xfcGxh
bmVfc3RyaWRlKHBsYW5lX3N0YXRlLCBjb2xvcl9wbGFuZSk7Ci0JdTMyIGF1eF9zdHJpZGUgPSBz
a2xfcGxhbmVfc3RyaWRlKHBsYW5lX3N0YXRlLCAxKTsKKwl1MzIgc3RyaWRlID0gc2tsX3BsYW5l
X3N0cmlkZShtYXN0ZXJfcGxhbmVfc3RhdGUsIHBsYW5lX3N0YXRlLCBjb2xvcl9wbGFuZSk7CisJ
dTMyIGF1eF9zdHJpZGUgPSBza2xfcGxhbmVfc3RyaWRlKG1hc3Rlcl9wbGFuZV9zdGF0ZSwgcGxh
bmVfc3RhdGUsIDEpOwogCWludCBjcnRjX3ggPSBwbGFuZV9zdGF0ZS0+YmFzZS5kc3QueDE7CiAJ
aW50IGNydGNfeSA9IHBsYW5lX3N0YXRlLT5iYXNlLmRzdC55MTsKIAl1MzIgeCA9IHBsYW5lX3N0
YXRlLT5jb2xvcl9wbGFuZVtjb2xvcl9wbGFuZV0ueDsKIAl1MzIgeSA9IHBsYW5lX3N0YXRlLT5j
b2xvcl9wbGFuZVtjb2xvcl9wbGFuZV0ueTsKIAl1MzIgc3JjX3cgPSBkcm1fcmVjdF93aWR0aCgm
cGxhbmVfc3RhdGUtPmJhc2Uuc3JjKSA+PiAxNjsKIAl1MzIgc3JjX2ggPSBkcm1fcmVjdF9oZWln
aHQoJnBsYW5lX3N0YXRlLT5iYXNlLnNyYykgPj4gMTY7Ci0Jc3RydWN0IGludGVsX3BsYW5lICps
aW5rZWQgPSBwbGFuZV9zdGF0ZS0+cGxhbmFyX2xpbmtlZF9wbGFuZTsKLQljb25zdCBzdHJ1Y3Qg
ZHJtX2ZyYW1lYnVmZmVyICpmYiA9IHBsYW5lX3N0YXRlLT5iYXNlLmZiOwotCXU4IGFscGhhID0g
cGxhbmVfc3RhdGUtPmJhc2UuYWxwaGEgPj4gODsKKwljb25zdCBzdHJ1Y3QgZHJtX2ZyYW1lYnVm
ZmVyICpmYiA9IG1hc3Rlcl9wbGFuZV9zdGF0ZS0+YmFzZS5mYjsKKwl1OCBhbHBoYSA9IG1hc3Rl
cl9wbGFuZV9zdGF0ZS0+YmFzZS5hbHBoYSA+PiA4OwogCXUzMiBwbGFuZV9jb2xvcl9jdGwgPSAw
OwogCXVuc2lnbmVkIGxvbmcgaXJxZmxhZ3M7CiAJdTMyIGtleW1zaywga2V5bWF4OworCXUzMiBw
bGFuZV9jdGwgPSBwbGFuZV9zdGF0ZS0+Y3RsOwogCiAJcGxhbmVfY3RsIHw9IHNrbF9wbGFuZV9j
dGxfY3J0YyhjcnRjX3N0YXRlKTsKIApAQCAtNTgwLDMyICs1ODIsMTQgQEAgc2tsX3Byb2dyYW1f
cGxhbmUoc3RydWN0IGludGVsX3BsYW5lICpwbGFuZSwKIAlJOTE1X1dSSVRFX0ZXKFBMQU5FX0FV
WF9ESVNUKHBpcGUsIHBsYW5lX2lkKSwKIAkJICAgICAgKHBsYW5lX3N0YXRlLT5jb2xvcl9wbGFu
ZVsxXS5vZmZzZXQgLSBzdXJmX2FkZHIpIHwgYXV4X3N0cmlkZSk7CiAKLQlpZiAoaWNsX2lzX2hk
cl9wbGFuZShkZXZfcHJpdiwgcGxhbmVfaWQpKSB7Ci0JCXUzMiBjdXNfY3RsID0gMDsKLQotCQlp
ZiAobGlua2VkKSB7Ci0JCQkvKiBFbmFibGUgYW5kIHVzZSBNUEVHLTIgY2hyb21hIHNpdGluZyAq
LwotCQkJY3VzX2N0bCA9IFBMQU5FX0NVU19FTkFCTEUgfAotCQkJCVBMQU5FX0NVU19IUEhBU0Vf
MCB8Ci0JCQkJUExBTkVfQ1VTX1ZQSEFTRV9TSUdOX05FR0FUSVZFIHwKLQkJCQlQTEFORV9DVVNf
VlBIQVNFXzBfMjU7Ci0KLQkJCWlmIChsaW5rZWQtPmlkID09IFBMQU5FX1NQUklURTUpCi0JCQkJ
Y3VzX2N0bCB8PSBQTEFORV9DVVNfUExBTkVfNzsKLQkJCWVsc2UgaWYgKGxpbmtlZC0+aWQgPT0g
UExBTkVfU1BSSVRFNCkKLQkJCQljdXNfY3RsIHw9IFBMQU5FX0NVU19QTEFORV82OwotCQkJZWxz
ZQotCQkJCU1JU1NJTkdfQ0FTRShsaW5rZWQtPmlkKTsKLQkJfQotCi0JCUk5MTVfV1JJVEVfRlco
UExBTkVfQ1VTX0NUTChwaXBlLCBwbGFuZV9pZCksIGN1c19jdGwpOwotCX0KKwlpZiAoaWNsX2lz
X2hkcl9wbGFuZShkZXZfcHJpdiwgcGxhbmVfaWQpKQorCQlJOTE1X1dSSVRFX0ZXKFBMQU5FX0NV
U19DVEwocGlwZSwgcGxhbmVfaWQpLCBwbGFuZV9zdGF0ZS0+Y3VzX2N0bCk7CiAKIAlpZiAoSU5U
RUxfR0VOKGRldl9wcml2KSA+PSAxMCB8fCBJU19HRU1JTklMQUtFKGRldl9wcml2KSkKIAkJSTkx
NV9XUklURV9GVyhQTEFORV9DT0xPUl9DVEwocGlwZSwgcGxhbmVfaWQpLCBwbGFuZV9jb2xvcl9j
dGwpOwogCiAJaWYgKGZiLT5mb3JtYXQtPmlzX3l1diAmJiBpY2xfaXNfaGRyX3BsYW5lKGRldl9w
cml2LCBwbGFuZV9pZCkpCi0JCWljbF9wcm9ncmFtX2lucHV0X2NzYyhwbGFuZSwgY3J0Y19zdGF0
ZSwgcGxhbmVfc3RhdGUpOworCQlpY2xfcHJvZ3JhbV9pbnB1dF9jc2MocGxhbmUsIGNydGNfc3Rh
dGUsIG1hc3Rlcl9wbGFuZV9zdGF0ZSk7CiAKIAlza2xfd3JpdGVfcGxhbmVfd20ocGxhbmUsIGNy
dGNfc3RhdGUpOwogCkBAIC02MjksOCArNjEzLDggQEAgc2tsX3Byb2dyYW1fcGxhbmUoc3RydWN0
IGludGVsX3BsYW5lICpwbGFuZSwKIAlJOTE1X1dSSVRFX0ZXKFBMQU5FX1NVUkYocGlwZSwgcGxh
bmVfaWQpLAogCQkgICAgICBpbnRlbF9wbGFuZV9nZ3R0X29mZnNldChwbGFuZV9zdGF0ZSkgKyBz
dXJmX2FkZHIpOwogCi0JaWYgKCFzbGF2ZSAmJiBwbGFuZV9zdGF0ZS0+c2NhbGVyX2lkID49IDAp
Ci0JCXNrbF9wcm9ncmFtX3NjYWxlcihwbGFuZSwgY3J0Y19zdGF0ZSwgcGxhbmVfc3RhdGUpOwor
CWlmIChwbGFuZV9zdGF0ZS0+c2NhbGVyX2lkID49IDApCisJCXNrbF9wcm9ncmFtX3NjYWxlcihw
bGFuZSwgY3J0Y19zdGF0ZSwgbWFzdGVyX3BsYW5lX3N0YXRlLCBwbGFuZV9zdGF0ZSk7CiAKIAlz
cGluX3VubG9ja19pcnFyZXN0b3JlKCZkZXZfcHJpdi0+dW5jb3JlLmxvY2ssIGlycWZsYWdzKTsK
IH0KQEAgLTY0NywxNyArNjMxLDI2IEBAIHNrbF91cGRhdGVfcGxhbmUoc3RydWN0IGludGVsX3Bs
YW5lICpwbGFuZSwKIAkJY29sb3JfcGxhbmUgPSAxOwogCX0KIAotCXNrbF9wcm9ncmFtX3BsYW5l
KHBsYW5lLCBjcnRjX3N0YXRlLCBwbGFuZV9zdGF0ZSwKLQkJCSAgY29sb3JfcGxhbmUsIGZhbHNl
LCBwbGFuZV9zdGF0ZS0+Y3RsKTsKKwlza2xfcHJvZ3JhbV9wbGFuZShwbGFuZSwgY3J0Y19zdGF0
ZSwgcGxhbmVfc3RhdGUsIHBsYW5lX3N0YXRlLCBjb2xvcl9wbGFuZSk7CiB9CiAKIHN0YXRpYyB2
b2lkCiBpY2xfdXBkYXRlX3NsYXZlKHN0cnVjdCBpbnRlbF9wbGFuZSAqcGxhbmUsCiAJCSBjb25z
dCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKLQkJIGNvbnN0IHN0cnVjdCBp
bnRlbF9wbGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGUpCisJCSBjb25zdCBzdHJ1Y3QgaW50ZWxfcGxh
bmVfc3RhdGUgKm1hc3Rlcl9wbGFuZV9zdGF0ZSwKKwkJIGNvbnN0IHN0cnVjdCBpbnRlbF9wbGFu
ZV9zdGF0ZSAqc2xhdmVfcGxhbmVfc3RhdGUpCiB7Ci0Jc2tsX3Byb2dyYW1fcGxhbmUocGxhbmUs
IGNydGNfc3RhdGUsIHBsYW5lX3N0YXRlLCAwLCB0cnVlLAotCQkJICBwbGFuZV9zdGF0ZS0+Y3Rs
IHwgUExBTkVfQ1RMX1lVVjQyMF9ZX1BMQU5FKTsKKwljb25zdCBzdHJ1Y3QgZHJtX2ZyYW1lYnVm
ZmVyICpmYiA9IG1hc3Rlcl9wbGFuZV9zdGF0ZS0+YmFzZS5mYjsKKwlpbnQgY29sb3JfcGxhbmUg
PSAwOworCisJaWYgKGRybV9mb3JtYXRfaW5mb19pc195dXZfc2VtaXBsYW5hcihmYi0+Zm9ybWF0
KSAmJgorCSAgICAhc2xhdmVfcGxhbmVfc3RhdGUtPnBsYW5hcl9zbGF2ZSkgeworCQkvKiBQcm9n
cmFtIHRoZSBVViBwbGFuZSwgZXZlbiBhcyBzbGF2ZSAoQmlnIGpvaW5lcikuICovCisJCWNvbG9y
X3BsYW5lID0gMTsKKwl9CisKKwlza2xfcHJvZ3JhbV9wbGFuZShwbGFuZSwgY3J0Y19zdGF0ZSwg
bWFzdGVyX3BsYW5lX3N0YXRlLAorCQkJICBzbGF2ZV9wbGFuZV9zdGF0ZSwgY29sb3JfcGxhbmUp
OwogfQogCiBzdGF0aWMgdm9pZApAQCAtMTg0NSw2ICsxODM4LDE0IEBAIHN0YXRpYyBpbnQgc2ts
X3BsYW5lX2NoZWNrKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCQlwbGFu
ZV9zdGF0ZS0+Y29sb3JfY3RsID0gZ2xrX3BsYW5lX2NvbG9yX2N0bChjcnRjX3N0YXRlLAogCQkJ
CQkJCSAgICAgcGxhbmVfc3RhdGUpOwogCisJaWYgKGljbF9pc19oZHJfcGxhbmUoZGV2X3ByaXYs
IHBsYW5lLT5pZCkgJiYgZmItPmZvcm1hdC0+aXNfeXV2KQorCQkvKiBFbmFibGUgYW5kIHVzZSBN
UEVHLTIgY2hyb21hIHNpdGluZyAqLworCQlwbGFuZV9zdGF0ZS0+Y3VzX2N0bCA9IFBMQU5FX0NV
U19FTkFCTEUgfAorCQkJUExBTkVfQ1VTX0hQSEFTRV8wIHwKKwkJCVBMQU5FX0NVU19WUEhBU0Vf
U0lHTl9ORUdBVElWRSB8IFBMQU5FX0NVU19WUEhBU0VfMF8yNTsKKwllbHNlCisJCXBsYW5lX3N0
YXRlLT5jdXNfY3RsID0gMDsKKwogCXJldHVybiAwOwogfQogCkBAIC0yNTEzLDcgKzI1MTQsNyBA
QCBza2xfdW5pdmVyc2FsX3BsYW5lX2NyZWF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYsCiAJcGxhbmUtPmRpc2FibGVfcGxhbmUgPSBza2xfZGlzYWJsZV9wbGFuZTsKIAlwbGFu
ZS0+Z2V0X2h3X3N0YXRlID0gc2tsX3BsYW5lX2dldF9od19zdGF0ZTsKIAlwbGFuZS0+Y2hlY2tf
cGxhbmUgPSBza2xfcGxhbmVfY2hlY2s7Ci0JaWYgKGljbF9pc19udjEyX3lfcGxhbmUocGxhbmVf
aWQpKQorCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDExKQogCQlwbGFuZS0+dXBkYXRlX3Ns
YXZlID0gaWNsX3VwZGF0ZV9zbGF2ZTsKIAogCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDEx
KQotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1n
Zng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C10FFD804B
	for <lists+intel-gfx@lfdr.de>; Tue, 15 Oct 2019 21:30:47 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 79C266E884;
	Tue, 15 Oct 2019 19:30:45 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 142B46E885
 for <intel-gfx@lists.freedesktop.org>; Tue, 15 Oct 2019 19:30:44 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 15 Oct 2019 12:30:43 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,300,1566889200"; d="scan'208";a="195373966"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by fmsmga007.fm.intel.com with SMTP; 15 Oct 2019 12:30:41 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Tue, 15 Oct 2019 22:30:41 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 15 Oct 2019 22:30:24 +0300
Message-Id: <20191015193035.25982-3-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191015193035.25982-1-ville.syrjala@linux.intel.com>
References: <20191015193035.25982-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 02/13] drm/i915: Rework global state locking
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClNv
IGZhciB3ZSd2ZSBzb3J0IG9mIHByb3RlY3RlZCB0aGUgZ2xvYmFsIHN0YXRlIHVuZGVyIGRldl9w
cml2IHdpdGgKdGhlIGNvbm5lY3Rpb25fbXV0ZXguIEkgd2FuIHRvIGNoYW5nZSB0aGF0IHNvIHRo
YXQgd2UgY2FuIGNoYW5nZSB0aGUKY2RjbGsgZXZlbiBmb3IgcHVyZSBwbGFuZSB1cGRhdGVzLiBU
byB0aGF0IGVuZCBsZXQncyBmb3JtYWxpemUgdGhlCnByb3RlY3Rpb24gb2YgdGhlIGdsb2JhbCBz
dGF0ZSB0byBmb2xsb3cgd2hhdCBJIHN0YXJ0ZWQgd2l0aCB0aGUgY2RjbGsKY29kZSBhbHJlYWR5
ICh0aG91Z2ggbm90IGVudGlyZWx5IHByb3Blcmx5KSBzdWNoIHRoYXQgYW55IGNydGMgbXV0ZXgK
d2lsbCBzdWZmaWNlIGFzIGEgcmVhZCBsb2NrLCBhbmQgYWxsIGNydGNzIG11dGV4ZXMgYWN0IGFz
IHRoZSB3cml0ZQpsb2NrLgoKV2UnbGwgYWxzbyBwaW1wIGludGVsX2F0b21pY19zdGF0ZV9jbGVh
cigpIHRvIGNsZWFyIHRoZSBlbnRpcmUgZ2xvYmFsCnN0YXRlLCBzbyB0aGF0IHdlIGRvbid0IGFj
Y2lkZW50YWxseSBsZWFrIHN0YWxlIGluZm9ybWF0aW9uIGJldHdlZW4KdGhlIGxvY2tpbmcgcmV0
cmllcy4KCkFzIGEgc2xpZ2h0IG9wdGltaXphdGlvbiB3ZSdsbCBvbmx5IGxvY2sgdGhlIGNydGMg
bXV0ZXhlcyB0byBwcm90ZWN0CnRoZSBnbG9iYWwgc3RhdGUsIGhvd2V2ZXIgaWYgYW5kIHdoZW4g
d2UgYWN0dWFsbHkgaGF2ZSB0byBwb2tlIHRoZQpodyAoZWcuIGlmIHRoZSBhY3R1YWwgY2RjbGsg
Y2hhbmdlcykgd2UgbXVzdCBzZXJpYWxpemUgY29tbWl0cwphY3Jvc3MgYWxsIGNydGNzIHNvIHRo
YXQgYSBwYXJhbGxlbCBub25ibG9ja2luZyBjb21taXQgY2FuJ3QgZ2V0CmFoZWFkIG9mIHRoZSBj
ZGNsayByZXByb2dhbW1pbmcuIFdlIGRvIHRoYXQgYnkgYWRkaW5nIGFsbCBjcnRjcyB0bwp0aGUg
c3RhdGUuCgpUT0RPOiB0aGUgb2xkIGdsb2JhbCBzdGF0ZSBleGFtaW5lZCBkdXJpbmcgY29tbWl0
IG1heSBzdGlsbApiZSBhIHByb2JsZW0gc2luY2UgaXQgYWx3YXlzIGxvb2tzIGF0IHRoZSBfbGF0
ZXN0XyBzd2FwcGVkIHN0YXRlCmluIGRldl9wcml2LiBOZWVkIHRvIGFkZCBwcm9wZXIgb2xkL25l
dyBzdGF0ZSBmb3IgdGhhdCB0b28gSSB0aGluay4KCnYyOiBSZW1lYmVyIHRvIHNlcmlhbGl6ZSB0
aGUgY29tbWl0cyBpZiBuZWNlc3NhcnkKClNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5cmrDpGzDpCA8
dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9hdG9taWMuYyAgIHwgIDQ0ICsrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2F0b21pYy5oICAgfCAgIDUgKwogZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9hdWRpby5jICAgIHwgIDEwICstCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2NkY2xrLmMgICAgfCAxMDIgKysrKysrKysrKy0tLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyAgfCAgMjkgKysrKy0KIC4u
Li9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCAgICB8ICAgOCArKwogZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgICAgICAgICAgIHwgIDExICstCiA3IGZp
bGVzIGNoYW5nZWQsIDE1MyBpbnNlcnRpb25zKCspLCA1NiBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pYy5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWMuYwppbmRleCBjNWE1NTJhNjk3NTIu
LjljZDZkMjM0OGExZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9hdG9taWMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0
b21pYy5jCkBAIC00MjksNiArNDI5LDEzIEBAIHZvaWQgaW50ZWxfYXRvbWljX3N0YXRlX2NsZWFy
KHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzKQogCXN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUg
KnN0YXRlID0gdG9faW50ZWxfYXRvbWljX3N0YXRlKHMpOwogCWRybV9hdG9taWNfc3RhdGVfZGVm
YXVsdF9jbGVhcigmc3RhdGUtPmJhc2UpOwogCXN0YXRlLT5kcGxsX3NldCA9IHN0YXRlLT5tb2Rl
c2V0ID0gZmFsc2U7CisJc3RhdGUtPmdsb2JhbF9zdGF0ZV9jaGFuZ2VkID0gZmFsc2U7CisJc3Rh
dGUtPmFjdGl2ZV9waXBlcyA9IDA7CisJbWVtc2V0KCZzdGF0ZS0+bWluX2NkY2xrLCAwLCBzaXpl
b2Yoc3RhdGUtPm1pbl9jZGNsaykpOworCW1lbXNldCgmc3RhdGUtPm1pbl92b2x0YWdlX2xldmVs
LCAwLCBzaXplb2Yoc3RhdGUtPm1pbl92b2x0YWdlX2xldmVsKSk7CisJbWVtc2V0KCZzdGF0ZS0+
Y2RjbGsubG9naWNhbCwgMCwgc2l6ZW9mKHN0YXRlLT5jZGNsay5sb2dpY2FsKSk7CisJbWVtc2V0
KCZzdGF0ZS0+Y2RjbGsuYWN0dWFsLCAwLCBzaXplb2Yoc3RhdGUtPmNkY2xrLmFjdHVhbCkpOwor
CXN0YXRlLT5jZGNsay5waXBlID0gSU5WQUxJRF9QSVBFOwogfQogCiBzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZSAqCkBAIC00NDIsMyArNDQ5LDQwIEBAIGludGVsX2F0b21pY19nZXRfY3J0Y19zdGF0
ZShzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUsCiAKIAlyZXR1cm4gdG9faW50ZWxfY3J0
Y19zdGF0ZShjcnRjX3N0YXRlKTsKIH0KKworaW50IGludGVsX2F0b21pY19sb2NrX2dsb2JhbF9z
dGF0ZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKK3sKKwlzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7CisJc3RydWN0
IGludGVsX2NydGMgKmNydGM7CisKKwlzdGF0ZS0+Z2xvYmFsX3N0YXRlX2NoYW5nZWQgPSB0cnVl
OworCisJZm9yX2VhY2hfaW50ZWxfY3J0YygmZGV2X3ByaXYtPmRybSwgY3J0YykgeworCQlpbnQg
cmV0OworCisJCXJldCA9IGRybV9tb2Rlc2V0X2xvY2soJmNydGMtPmJhc2UubXV0ZXgsCisJCQkJ
ICAgICAgIHN0YXRlLT5iYXNlLmFjcXVpcmVfY3R4KTsKKwkJaWYgKHJldCkKKwkJCXJldHVybiBy
ZXQ7CisJfQorCisJcmV0dXJuIDA7Cit9CisKK2ludCBpbnRlbF9hdG9taWNfc2VyaWFsaXplX2ds
b2JhbF9zdGF0ZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKK3sKKwlzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7CisJ
c3RydWN0IGludGVsX2NydGMgKmNydGM7CisKKwlzdGF0ZS0+Z2xvYmFsX3N0YXRlX2NoYW5nZWQg
PSB0cnVlOworCisJZm9yX2VhY2hfaW50ZWxfY3J0YygmZGV2X3ByaXYtPmRybSwgY3J0Yykgewor
CQlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsKKworCQljcnRjX3N0YXRlID0g
aW50ZWxfYXRvbWljX2dldF9jcnRjX3N0YXRlKCZzdGF0ZS0+YmFzZSwgY3J0Yyk7CisJCWlmIChJ
U19FUlIoY3J0Y19zdGF0ZSkpCisJCQlyZXR1cm4gUFRSX0VSUihjcnRjX3N0YXRlKTsKKwl9CisK
KwlyZXR1cm4gMDsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfYXRvbWljLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21p
Yy5oCmluZGV4IDU4MDY1ZDMxNjFhMy4uNDlkNWNiMWI5ZTBhIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pYy5oCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmgKQEAgLTE2LDYgKzE2LDcgQEAgc3RydWN0IGRy
bV9jcnRjX3N0YXRlOwogc3RydWN0IGRybV9kZXZpY2U7CiBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZTsKIHN0cnVjdCBkcm1fcHJvcGVydHk7CitzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlOwogc3Ry
dWN0IGludGVsX2NydGM7CiBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZTsKIApAQCAtNDYsNCArNDcs
OCBAQCBpbnQgaW50ZWxfYXRvbWljX3NldHVwX3NjYWxlcnMoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2LAogCQkJICAgICAgIHN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjLAog
CQkJICAgICAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKTsKIAoraW50IGlu
dGVsX2F0b21pY19sb2NrX2dsb2JhbF9zdGF0ZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpz
dGF0ZSk7CisKK2ludCBpbnRlbF9hdG9taWNfc2VyaWFsaXplX2dsb2JhbF9zdGF0ZShzdHJ1Y3Qg
aW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSk7CisKICNlbmRpZiAvKiBfX0lOVEVMX0FUT01JQ19I
X18gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXVk
aW8uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXVkaW8uYwppbmRleCBl
ZDE4NTExYmVmYTMuLjg1ZTZiMmJiYjM0ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9hdWRpby5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfYXVkaW8uYwpAQCAtMjgsNiArMjgsNyBAQAogI2luY2x1ZGUgPGRybS9pOTE1X2Nv
bXBvbmVudC5oPgogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKKyNpbmNsdWRlICJpbnRlbF9hdG9t
aWMuaCIKICNpbmNsdWRlICJpbnRlbF9hdWRpby5oIgogI2luY2x1ZGUgImludGVsX2Rpc3BsYXlf
dHlwZXMuaCIKICNpbmNsdWRlICJpbnRlbF9scGVfYXVkaW8uaCIKQEAgLTgxOCwxMyArODE5LDgg
QEAgc3RhdGljIHZvaWQgZ2xrX2ZvcmNlX2F1ZGlvX2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiwKIAl0b19pbnRlbF9hdG9taWNfc3RhdGUoc3RhdGUpLT5jZGNsay5mb3Jj
ZV9taW5fY2RjbGsgPQogCQllbmFibGUgPyAyICogOTYwMDAgOiAwOwogCi0JLyoKLQkgKiBQcm90
ZWN0cyBkZXZfcHJpdi0+Y2RjbGsuZm9yY2VfbWluX2NkY2xrCi0JICogTmVlZCB0byBsb2NrIHRo
aXMgaGVyZSBpbiBjYXNlIHdlIGhhdmUgbm8gYWN0aXZlIHBpcGVzCi0JICogYW5kIHRodXMgd291
bGRuJ3QgbG9jayBpdCBkdXJpbmcgdGhlIGNvbW1pdCBvdGhlcndpc2UuCi0JICovCi0JcmV0ID0g
ZHJtX21vZGVzZXRfbG9jaygmZGV2X3ByaXYtPmRybS5tb2RlX2NvbmZpZy5jb25uZWN0aW9uX211
dGV4LAotCQkJICAgICAgICZjdHgpOworCS8qIFByb3RlY3RzIGRldl9wcml2LT5jZGNsay5mb3Jj
ZV9taW5fY2RjbGsgKi8KKwlyZXQgPSBpbnRlbF9hdG9taWNfbG9ja19nbG9iYWxfc3RhdGUodG9f
aW50ZWxfYXRvbWljX3N0YXRlKHN0YXRlKSk7CiAJaWYgKCFyZXQpCiAJCXJldCA9IGRybV9hdG9t
aWNfY29tbWl0KHN0YXRlKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9jZGNsay5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9j
ZGNsay5jCmluZGV4IDZlYWViYzM4ZWUwMS4uNmMxN2EzYmJmODY2IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NkY2xrLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jZGNsay5jCkBAIC0yMDA3LDExICsyMDA3LDIwIEBAIHN0
YXRpYyBpbnQgaW50ZWxfY29tcHV0ZV9taW5fY2RjbGsoc3RydWN0IGludGVsX2F0b21pY19zdGF0
ZSAqc3RhdGUpCiAJICAgICAgIHNpemVvZihzdGF0ZS0+bWluX2NkY2xrKSk7CiAKIAlmb3JfZWFj
aF9uZXdfaW50ZWxfY3J0Y19pbl9zdGF0ZShzdGF0ZSwgY3J0YywgY3J0Y19zdGF0ZSwgaSkgewor
CQlpbnQgcmV0OworCiAJCW1pbl9jZGNsayA9IGludGVsX2NydGNfY29tcHV0ZV9taW5fY2RjbGso
Y3J0Y19zdGF0ZSk7CiAJCWlmIChtaW5fY2RjbGsgPCAwKQogCQkJcmV0dXJuIG1pbl9jZGNsazsK
IAorCQlpZiAoc3RhdGUtPm1pbl9jZGNsa1tpXSA9PSBtaW5fY2RjbGspCisJCQljb250aW51ZTsK
KwogCQlzdGF0ZS0+bWluX2NkY2xrW2ldID0gbWluX2NkY2xrOworCisJCXJldCA9IGludGVsX2F0
b21pY19sb2NrX2dsb2JhbF9zdGF0ZShzdGF0ZSk7CisJCWlmIChyZXQpCisJCQlyZXR1cm4gcmV0
OwogCX0KIAogCW1pbl9jZGNsayA9IHN0YXRlLT5jZGNsay5mb3JjZV9taW5fY2RjbGs7CkBAIC0y
MDM0LDcgKzIwNDMsNyBAQCBzdGF0aWMgaW50IGludGVsX2NvbXB1dGVfbWluX2NkY2xrKHN0cnVj
dCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQogICogZnV0dXJlIHBsYXRmb3JtcyB0aGlzIGNv
ZGUgd2lsbCBuZWVkIHRvIGJlCiAgKiBhZGp1c3RlZC4KICAqLwotc3RhdGljIHU4IGJ4dF9jb21w
dXRlX21pbl92b2x0YWdlX2xldmVsKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQor
c3RhdGljIGludCBieHRfY29tcHV0ZV9taW5fdm9sdGFnZV9sZXZlbChzdHJ1Y3QgaW50ZWxfYXRv
bWljX3N0YXRlICpzdGF0ZSkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYg
PSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7CiAJc3RydWN0IGludGVsX2NydGMgKmNydGM7CkBA
IC0yMDQ3LDExICsyMDU2LDIxIEBAIHN0YXRpYyB1OCBieHRfY29tcHV0ZV9taW5fdm9sdGFnZV9s
ZXZlbChzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIAkgICAgICAgc2l6ZW9mKHN0
YXRlLT5taW5fdm9sdGFnZV9sZXZlbCkpOwogCiAJZm9yX2VhY2hfbmV3X2ludGVsX2NydGNfaW5f
c3RhdGUoc3RhdGUsIGNydGMsIGNydGNfc3RhdGUsIGkpIHsKKwkJaW50IHJldDsKKwogCQlpZiAo
Y3J0Y19zdGF0ZS0+YmFzZS5lbmFibGUpCi0JCQlzdGF0ZS0+bWluX3ZvbHRhZ2VfbGV2ZWxbaV0g
PQotCQkJCWNydGNfc3RhdGUtPm1pbl92b2x0YWdlX2xldmVsOworCQkJbWluX3ZvbHRhZ2VfbGV2
ZWwgPSBjcnRjX3N0YXRlLT5taW5fdm9sdGFnZV9sZXZlbDsKIAkJZWxzZQotCQkJc3RhdGUtPm1p
bl92b2x0YWdlX2xldmVsW2ldID0gMDsKKwkJCW1pbl92b2x0YWdlX2xldmVsID0gMDsKKworCQlp
ZiAoc3RhdGUtPm1pbl92b2x0YWdlX2xldmVsW2ldID09IG1pbl92b2x0YWdlX2xldmVsKQorCQkJ
Y29udGludWU7CisKKwkJc3RhdGUtPm1pbl92b2x0YWdlX2xldmVsW2ldID0gbWluX3ZvbHRhZ2Vf
bGV2ZWw7CisKKwkJcmV0ID0gaW50ZWxfYXRvbWljX2xvY2tfZ2xvYmFsX3N0YXRlKHN0YXRlKTsK
KwkJaWYgKHJldCkKKwkJCXJldHVybiByZXQ7CiAJfQogCiAJbWluX3ZvbHRhZ2VfbGV2ZWwgPSAw
OwpAQCAtMjE5NSwyMCArMjIxNCwyNCBAQCBzdGF0aWMgaW50IHNrbF9tb2Rlc2V0X2NhbGNfY2Rj
bGsoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCiBzdGF0aWMgaW50IGJ4dF9tb2Rl
c2V0X2NhbGNfY2RjbGsoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCiB7CiAJc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShzdGF0ZS0+YmFzZS5kZXYp
OwotCWludCBtaW5fY2RjbGssIGNkY2xrLCB2Y287CisJaW50IG1pbl9jZGNsaywgbWluX3ZvbHRh
Z2VfbGV2ZWwsIGNkY2xrLCB2Y287CiAKIAltaW5fY2RjbGsgPSBpbnRlbF9jb21wdXRlX21pbl9j
ZGNsayhzdGF0ZSk7CiAJaWYgKG1pbl9jZGNsayA8IDApCiAJCXJldHVybiBtaW5fY2RjbGs7CiAK
KwltaW5fdm9sdGFnZV9sZXZlbCA9IGJ4dF9jb21wdXRlX21pbl92b2x0YWdlX2xldmVsKHN0YXRl
KTsKKwlpZiAobWluX3ZvbHRhZ2VfbGV2ZWwgPCAwKQorCQlyZXR1cm4gbWluX3ZvbHRhZ2VfbGV2
ZWw7CisKIAljZGNsayA9IGJ4dF9jYWxjX2NkY2xrKGRldl9wcml2LCBtaW5fY2RjbGspOwogCXZj
byA9IGJ4dF9jYWxjX2NkY2xrX3BsbF92Y28oZGV2X3ByaXYsIGNkY2xrKTsKIAogCXN0YXRlLT5j
ZGNsay5sb2dpY2FsLnZjbyA9IHZjbzsKIAlzdGF0ZS0+Y2RjbGsubG9naWNhbC5jZGNsayA9IGNk
Y2xrOwogCXN0YXRlLT5jZGNsay5sb2dpY2FsLnZvbHRhZ2VfbGV2ZWwgPQotCQltYXgoZGV2X3By
aXYtPmRpc3BsYXkuY2FsY192b2x0YWdlX2xldmVsKGNkY2xrKSwKLQkJICAgIGJ4dF9jb21wdXRl
X21pbl92b2x0YWdlX2xldmVsKHN0YXRlKSk7CisJCW1heF90KGludCwgbWluX3ZvbHRhZ2VfbGV2
ZWwsCisJCSAgICAgIGRldl9wcml2LT5kaXNwbGF5LmNhbGNfdm9sdGFnZV9sZXZlbChjZGNsaykp
OwogCiAJaWYgKCFzdGF0ZS0+YWN0aXZlX3BpcGVzKSB7CiAJCWNkY2xrID0gYnh0X2NhbGNfY2Rj
bGsoZGV2X3ByaXYsIHN0YXRlLT5jZGNsay5mb3JjZV9taW5fY2RjbGspOwpAQCAtMjIyNSwyMyAr
MjI0OCw2IEBAIHN0YXRpYyBpbnQgYnh0X21vZGVzZXRfY2FsY19jZGNsayhzdHJ1Y3QgaW50ZWxf
YXRvbWljX3N0YXRlICpzdGF0ZSkKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIGludCBpbnRlbF9s
b2NrX2FsbF9waXBlcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKLXsKLQlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7
Ci0Jc3RydWN0IGludGVsX2NydGMgKmNydGM7Ci0KLQkvKiBBZGQgYWxsIHBpcGVzIHRvIHRoZSBz
dGF0ZSAqLwotCWZvcl9lYWNoX2ludGVsX2NydGMoJmRldl9wcml2LT5kcm0sIGNydGMpIHsKLQkJ
c3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGU7Ci0KLQkJY3J0Y19zdGF0ZSA9IGlu
dGVsX2F0b21pY19nZXRfY3J0Y19zdGF0ZSgmc3RhdGUtPmJhc2UsIGNydGMpOwotCQlpZiAoSVNf
RVJSKGNydGNfc3RhdGUpKQotCQkJcmV0dXJuIFBUUl9FUlIoY3J0Y19zdGF0ZSk7Ci0JfQotCi0J
cmV0dXJuIDA7Ci19Ci0KIHN0YXRpYyBpbnQgaW50ZWxfbW9kZXNldF9hbGxfcGlwZXMoc3RydWN0
IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gdG9faTkxNShzdGF0ZS0+YmFzZS5kZXYpOwpAQCAtMjMwOCw0NiArMjMxNCw1
NiBAQCBpbnQgaW50ZWxfbW9kZXNldF9jYWxjX2NkY2xrKHN0cnVjdCBpbnRlbF9hdG9taWNfc3Rh
dGUgKnN0YXRlKQogCQlyZXR1cm4gcmV0OwogCiAJLyoKLQkgKiBXcml0ZXMgdG8gZGV2X3ByaXYt
PmNkY2xrLmxvZ2ljYWwgbXVzdCBwcm90ZWN0ZWQgYnkKLQkgKiBob2xkaW5nIGFsbCB0aGUgY3J0
YyBsb2NrcywgZXZlbiBpZiB3ZSBkb24ndCBlbmQgdXAKKwkgKiBXcml0ZXMgdG8gZGV2X3ByaXYt
PmNkY2xrLnthY3R1YWwsbG9naWNhbH0gbXVzdCBwcm90ZWN0ZWQKKwkgKiBieSBob2xkaW5nIGFs
bCB0aGUgY3J0YyBtdXRleGVzIGV2ZW4gaWYgd2UgZG9uJ3QgZW5kIHVwCiAJICogdG91Y2hpbmcg
dGhlIGhhcmR3YXJlCiAJICovCi0JaWYgKGludGVsX2NkY2xrX2NoYW5nZWQoJmRldl9wcml2LT5j
ZGNsay5sb2dpY2FsLAotCQkJCSZzdGF0ZS0+Y2RjbGsubG9naWNhbCkpIHsKLQkJcmV0ID0gaW50
ZWxfbG9ja19hbGxfcGlwZXMoc3RhdGUpOwotCQlpZiAocmV0IDwgMCkKKwlpZiAoaW50ZWxfY2Rj
bGtfY2hhbmdlZCgmZGV2X3ByaXYtPmNkY2xrLmFjdHVhbCwKKwkJCQkmc3RhdGUtPmNkY2xrLmFj
dHVhbCkpIHsKKwkJLyoKKwkJICogQWxzbyBzZXJpYWxpemUgY29tbWl0cyBhY3Jvc3MgYWxsIGNy
dGNzCisJCSAqIGlmIHRoZSBhY3R1YWwgaHcgbmVlZHMgdG8gYmUgcG9rZWQuCisJCSAqLworCQly
ZXQgPSBpbnRlbF9hdG9taWNfc2VyaWFsaXplX2dsb2JhbF9zdGF0ZShzdGF0ZSk7CisJCWlmIChy
ZXQpCisJCQlyZXR1cm4gcmV0OworCX0gZWxzZSBpZiAoaW50ZWxfY2RjbGtfY2hhbmdlZCgmZGV2
X3ByaXYtPmNkY2xrLmxvZ2ljYWwsCisJCQkJICAgICAgICZzdGF0ZS0+Y2RjbGsubG9naWNhbCkp
IHsKKwkJcmV0ID0gaW50ZWxfYXRvbWljX2xvY2tfZ2xvYmFsX3N0YXRlKHN0YXRlKTsKKwkJaWYg
KHJldCkKIAkJCXJldHVybiByZXQ7CisJfSBlbHNlIHsKKwkJcmV0dXJuIDA7CiAJfQogCi0JaWYg
KGlzX3Bvd2VyX29mXzIoc3RhdGUtPmFjdGl2ZV9waXBlcykpIHsKKwlpZiAoaXNfcG93ZXJfb2Zf
MihzdGF0ZS0+YWN0aXZlX3BpcGVzKSAmJgorCSAgICBpbnRlbF9jZGNsa19uZWVkc19jZDJ4X3Vw
ZGF0ZShkZXZfcHJpdiwKKwkJCQkJICAmZGV2X3ByaXYtPmNkY2xrLmFjdHVhbCwKKwkJCQkJICAm
c3RhdGUtPmNkY2xrLmFjdHVhbCkpIHsKIAkJc3RydWN0IGludGVsX2NydGMgKmNydGM7CiAJCXN0
cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlOwogCiAJCXBpcGUgPSBpbG9nMihzdGF0
ZS0+YWN0aXZlX3BpcGVzKTsKIAkJY3J0YyA9IGludGVsX2dldF9jcnRjX2Zvcl9waXBlKGRldl9w
cml2LCBwaXBlKTsKLQkJY3J0Y19zdGF0ZSA9IGludGVsX2F0b21pY19nZXRfbmV3X2NydGNfc3Rh
dGUoc3RhdGUsIGNydGMpOwotCQlpZiAoY3J0Y19zdGF0ZSAmJgotCQkgICAgZHJtX2F0b21pY19j
cnRjX25lZWRzX21vZGVzZXQoJmNydGNfc3RhdGUtPmJhc2UpKQorCisJCWNydGNfc3RhdGUgPSBp
bnRlbF9hdG9taWNfZ2V0X2NydGNfc3RhdGUoJnN0YXRlLT5iYXNlLCBjcnRjKTsKKwkJaWYgKElT
X0VSUihjcnRjX3N0YXRlKSkKKwkJCXJldHVybiBQVFJfRVJSKGNydGNfc3RhdGUpOworCisJCWlm
IChkcm1fYXRvbWljX2NydGNfbmVlZHNfbW9kZXNldCgmY3J0Y19zdGF0ZS0+YmFzZSkpCiAJCQlw
aXBlID0gSU5WQUxJRF9QSVBFOwogCX0gZWxzZSB7CiAJCXBpcGUgPSBJTlZBTElEX1BJUEU7CiAJ
fQogCi0JLyogQWxsIHBpcGVzIG11c3QgYmUgc3dpdGNoZWQgb2ZmIHdoaWxlIHdlIGNoYW5nZSB0
aGUgY2RjbGsuICovCi0JaWYgKHBpcGUgIT0gSU5WQUxJRF9QSVBFICYmCi0JICAgIGludGVsX2Nk
Y2xrX25lZWRzX2NkMnhfdXBkYXRlKGRldl9wcml2LAotCQkJCQkgICZkZXZfcHJpdi0+Y2RjbGsu
YWN0dWFsLAotCQkJCQkgICZzdGF0ZS0+Y2RjbGsuYWN0dWFsKSkgewotCQlyZXQgPSBpbnRlbF9s
b2NrX2FsbF9waXBlcyhzdGF0ZSk7Ci0JCWlmIChyZXQpCi0JCQlyZXR1cm4gcmV0OwotCisJaWYg
KHBpcGUgIT0gSU5WQUxJRF9QSVBFKSB7CiAJCXN0YXRlLT5jZGNsay5waXBlID0gcGlwZTsKIAog
CQlEUk1fREVCVUdfS01TKCJDYW4gY2hhbmdlIGNkY2xrIHdpdGggcGlwZSAlYyBhY3RpdmVcbiIs
CiAJCQkgICAgICBwaXBlX25hbWUocGlwZSkpOwogCX0gZWxzZSBpZiAoaW50ZWxfY2RjbGtfbmVl
ZHNfbW9kZXNldCgmZGV2X3ByaXYtPmNkY2xrLmFjdHVhbCwKIAkJCQkJICAgICAmc3RhdGUtPmNk
Y2xrLmFjdHVhbCkpIHsKKwkJLyogQWxsIHBpcGVzIG11c3QgYmUgc3dpdGNoZWQgb2ZmIHdoaWxl
IHdlIGNoYW5nZSB0aGUgY2RjbGsuICovCiAJCXJldCA9IGludGVsX21vZGVzZXRfYWxsX3BpcGVz
KHN0YXRlKTsKIAkJaWYgKHJldCkKIAkJCXJldHVybiByZXQ7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4IDdkN2QxODU5Nzc1YS4uYTg0NDRkOTg0
MWMxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpA
QCAtMTIxOTEsNiArMTIxOTEsMTIgQEAgc3RhdGljIGJvb2wgY2hlY2tfZGlnaXRhbF9wb3J0X2Nv
bmZsaWN0cyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIAl1bnNpZ25lZCBpbnQg
dXNlZF9tc3RfcG9ydHMgPSAwOwogCWJvb2wgcmV0ID0gdHJ1ZTsKIAorCS8qCisJICogV2UncmUg
Z29pbmcgdG8gcGVlayBpbnRvIGNvbm5lY3Rvci0+c3RhdGUsCisJICogaGVuY2UgY29ubmVjdGlv
bl9tdXRleCBtdXN0IGJlIGhlbGQuCisJICovCisJZHJtX21vZGVzZXRfbG9ja19hc3NlcnRfaGVs
ZCgmZGV2LT5tb2RlX2NvbmZpZy5jb25uZWN0aW9uX211dGV4KTsKKwogCS8qCiAJICogV2FsayB0
aGUgY29ubmVjdG9yIGxpc3QgaW5zdGVhZCBvZiB0aGUgZW5jb2RlcgogCSAqIGxpc3QgdG8gZGV0
ZWN0IHRoZSBwcm9ibGVtIG9uIGRkaSBwbGF0Zm9ybXMKQEAgLTEzNDYzLDcgKzEzNDY5LDYgQEAg
c3RhdGljIGludCBpbnRlbF9tb2Rlc2V0X2NoZWNrcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRl
ICpzdGF0ZSkKIAlzdGF0ZS0+YWN0aXZlX3BpcGVzID0gZGV2X3ByaXYtPmFjdGl2ZV9waXBlczsK
IAlzdGF0ZS0+Y2RjbGsubG9naWNhbCA9IGRldl9wcml2LT5jZGNsay5sb2dpY2FsOwogCXN0YXRl
LT5jZGNsay5hY3R1YWwgPSBkZXZfcHJpdi0+Y2RjbGsuYWN0dWFsOwotCXN0YXRlLT5jZGNsay5w
aXBlID0gSU5WQUxJRF9QSVBFOwogCiAJZm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3Rh
dGUoc3RhdGUsIGNydGMsIG9sZF9jcnRjX3N0YXRlLAogCQkJCQkgICAgbmV3X2NydGNfc3RhdGUs
IGkpIHsKQEAgLTEzNDc2LDYgKzEzNDgxLDEyIEBAIHN0YXRpYyBpbnQgaW50ZWxfbW9kZXNldF9j
aGVja3Moc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCiAJCQlzdGF0ZS0+YWN0aXZl
X3BpcGVfY2hhbmdlcyB8PSBCSVQoY3J0Yy0+cGlwZSk7CiAJfQogCisJaWYgKHN0YXRlLT5hY3Rp
dmVfcGlwZV9jaGFuZ2VzKSB7CisJCXJldCA9IGludGVsX2F0b21pY19sb2NrX2dsb2JhbF9zdGF0
ZShzdGF0ZSk7CisJCWlmIChyZXQpCisJCQlyZXR1cm4gcmV0OworCX0KKwogCXJldCA9IGludGVs
X21vZGVzZXRfY2FsY19jZGNsayhzdGF0ZSk7CiAJaWYgKHJldCkKIAkJcmV0dXJuIHJldDsKQEAg
LTEzNTc3LDcgKzEzNTg4LDcgQEAgc3RhdGljIGludCBpbnRlbF9hdG9taWNfY2hlY2soc3RydWN0
IGRybV9kZXZpY2UgKmRldiwKIAlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3Rh
dGUsICpuZXdfY3J0Y19zdGF0ZTsKIAlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YzsKIAlpbnQgcmV0
LCBpOwotCWJvb2wgYW55X21zID0gc3RhdGUtPmNkY2xrLmZvcmNlX21pbl9jZGNsa19jaGFuZ2Vk
OworCWJvb2wgYW55X21zID0gZmFsc2U7CiAKIAkvKiBDYXRjaCBJOTE1X01PREVfRkxBR19JTkhF
UklURUQgKi8KIAlmb3JfZWFjaF9vbGRuZXdfaW50ZWxfY3J0Y19pbl9zdGF0ZShzdGF0ZSwgY3J0
Yywgb2xkX2NydGNfc3RhdGUsCkBAIC0xMzYxNSw2ICsxMzYyNiw4IEBAIHN0YXRpYyBpbnQgaW50
ZWxfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJaWYgKHJldCkKIAkJZ290
byBmYWlsOwogCisJYW55X21zIHw9IHN0YXRlLT5jZGNsay5mb3JjZV9taW5fY2RjbGtfY2hhbmdl
ZDsKKwogCWlmIChhbnlfbXMpIHsKIAkJcmV0ID0gaW50ZWxfbW9kZXNldF9jaGVja3Moc3RhdGUp
OwogCQlpZiAocmV0KQpAQCAtMTQyMzQsNiArMTQyNDcsMTQgQEAgc3RhdGljIHZvaWQgaW50ZWxf
YXRvbWljX3RyYWNrX2ZicyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIAkJCQkJ
cGxhbmUtPmZyb250YnVmZmVyX2JpdCk7CiB9CiAKK3N0YXRpYyB2b2lkIGFzc2VydF9nbG9iYWxf
c3RhdGVfbG9ja2VkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3sKKwlzdHJ1
Y3QgaW50ZWxfY3J0YyAqY3J0YzsKKworCWZvcl9lYWNoX2ludGVsX2NydGMoJmRldl9wcml2LT5k
cm0sIGNydGMpCisJCWRybV9tb2Rlc2V0X2xvY2tfYXNzZXJ0X2hlbGQoJmNydGMtPmJhc2UubXV0
ZXgpOworfQorCiBzdGF0aWMgaW50IGludGVsX2F0b21pY19jb21taXQoc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwKIAkJCSAgICAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqX3N0YXRlLAogCQkJ
ICAgICAgIGJvb2wgbm9uYmxvY2spCkBAIC0xNDI5OSw3ICsxNDMyMCw5IEBAIHN0YXRpYyBpbnQg
aW50ZWxfYXRvbWljX2NvbW1pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCWludGVsX3NoYXJl
ZF9kcGxsX3N3YXBfc3RhdGUoc3RhdGUpOwogCWludGVsX2F0b21pY190cmFja19mYnMoc3RhdGUp
OwogCi0JaWYgKHN0YXRlLT5tb2Rlc2V0KSB7CisJaWYgKHN0YXRlLT5nbG9iYWxfc3RhdGVfY2hh
bmdlZCkgeworCQlhc3NlcnRfZ2xvYmFsX3N0YXRlX2xvY2tlZChkZXZfcHJpdik7CisKIAkJbWVt
Y3B5KGRldl9wcml2LT5taW5fY2RjbGssIHN0YXRlLT5taW5fY2RjbGssCiAJCSAgICAgICBzaXpl
b2Yoc3RhdGUtPm1pbl9jZGNsaykpOwogCQltZW1jcHkoZGV2X3ByaXYtPm1pbl92b2x0YWdlX2xl
dmVsLCBzdGF0ZS0+bWluX3ZvbHRhZ2VfbGV2ZWwsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCmluZGV4IDQwMzkwZDg1NTgxNS4uMDFm
ZWQ4OTU3YWRlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXlfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXlfdHlwZXMuaApAQCAtNTA2LDYgKzUwNiwxNCBAQCBzdHJ1Y3QgaW50ZWxfYXRvbWlj
X3N0YXRlIHsKIAogCWJvb2wgcnBzX2ludGVyYWN0aXZlOwogCisJLyoKKwkgKiBhY3RpdmVfcGlw
ZXMKKwkgKiBtaW5fY2RjbGtbXQorCSAqIG1pbl92b2x0YWdlX2xldmVsW10KKwkgKiBjZGNsay4q
CisJICovCisJYm9vbCBnbG9iYWxfc3RhdGVfY2hhbmdlZDsKKwogCS8qIEdlbjkrIG9ubHkgKi8K
IAlzdHJ1Y3Qgc2tsX2RkYl92YWx1ZXMgd21fcmVzdWx0czsKIApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmgKaW5kZXggYzQ2YjMzOTA2NGMwLi5kM2U2MTE1MmQ5MjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuaApAQCAtMTEwNSwxMyArMTEwNSwxNCBAQCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSB7CiAJ
dW5zaWduZWQgaW50IGZkaV9wbGxfZnJlcTsKIAl1bnNpZ25lZCBpbnQgY3pjbGtfZnJlcTsKIAor
CS8qCisJICogRm9yIHJlYWRpbmcgaG9sZGluZyBhbnkgY3J0YyBsb2NrIGlzIHN1ZmZpY2llbnQs
CisJICogZm9yIHdyaXRpbmcgbXVzdCBob2xkIGFsbCBvZiB0aGVtLgorCSAqLwogCXN0cnVjdCB7
CiAJCS8qCiAJCSAqIFRoZSBjdXJyZW50IGxvZ2ljYWwgY2RjbGsgc3RhdGUuCiAJCSAqIFNlZSBp
bnRlbF9hdG9taWNfc3RhdGUuY2RjbGsubG9naWNhbAotCQkgKgotCQkgKiBGb3IgcmVhZGluZyBo
b2xkaW5nIGFueSBjcnRjIGxvY2sgaXMgc3VmZmljaWVudCwKLQkJICogZm9yIHdyaXRpbmcgbXVz
dCBob2xkIGFsbCBvZiB0aGVtLgogCQkgKi8KIAkJc3RydWN0IGludGVsX2NkY2xrX3N0YXRlIGxv
Z2ljYWw7CiAJCS8qCkBAIC0xMTgxLDYgKzExODIsMTAgQEAgc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgewogCSAqLwogCXN0cnVjdCBtdXRleCBkcGxsX2xvY2s7CiAKKwkvKgorCSAqIEZvciByZWFk
aW5nIGFjdGl2ZV9waXBlcywgbWluX2NkY2xrLCBtaW5fdm9sdGFnZV9sZXZlbCBob2xkaW5nCisJ
ICogYW55IGNydGMgbG9jayBpcyBzdWZmaWNpZW50LCBmb3Igd3JpdGluZyBtdXN0IGhvbGQgYWxs
IG9mIHRoZW0uCisJICovCiAJdTggYWN0aXZlX3BpcGVzOwogCS8qIG1pbmltdW0gYWNjZXB0YWJs
ZSBjZGNsayBmb3IgZWFjaCBwaXBlICovCiAJaW50IG1pbl9jZGNsa1tJOTE1X01BWF9QSVBFU107
Ci0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9y
ZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdm
eA==

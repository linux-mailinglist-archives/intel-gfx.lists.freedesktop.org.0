Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 180CF121C6C
	for <lists+intel-gfx@lfdr.de>; Mon, 16 Dec 2019 23:08:28 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 598C96E8B6;
	Mon, 16 Dec 2019 22:08:26 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E46936E8B6
 for <intel-gfx@lists.freedesktop.org>; Mon, 16 Dec 2019 22:08:24 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 16 Dec 2019 14:08:24 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,323,1571727600"; d="scan'208";a="240188547"
Received: from gneiger-mobl2.amr.corp.intel.com (HELO
 josouza-MOBL.amr.corp.intel.com) ([10.251.15.215])
 by fmsmga004.fm.intel.com with ESMTP; 16 Dec 2019 14:08:20 -0800
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 16 Dec 2019 14:07:40 -0800
Message-Id: <20191216220742.34332-9-jose.souza@intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20191216220742.34332-1-jose.souza@intel.com>
References: <20191216220742.34332-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 09/11] drm/i915/dp: Fix MST disable sequences
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIGRpc2FibGUgc2VxdWVuY2UgYWZ0ZXIgd2FpdCBmb3IgdHJhbnNjb2RlciBvZmYgd2FzIG5v
dCBjb3JyZWN0bHkKaW1wbGVtZW50ZWQuClRoZSBNU1QgZGlzYWJsZSBzZXF1ZW5jZSBpcyBiYXNp
Y2FsbHkgdGhlIHNhbWUgZm9yIEhTVywgU0tMLCBJQ0wgYW5kClRHTCwgd2l0aCBqdXN0IG1pbm9y
IGNoYW5nZXMgZm9yIFRHTC4KClNvIGhlcmUgY2FsbGluZyBhIG5ldyBNU1QgZnVuY3Rpb24gdG8g
ZG8gdGhlIE1TVCBzZXF1ZW5jZXMsIG1vc3Qgb2YKdGhlIHN0ZXBzIGp1c3QgbW92ZWQgZnJvbSB0
aGUgcG9zdCBkaXNhYmxlIGhvb2suCgpXaXRoIHRoaXMgbGFzdCBwYXRjaCB3ZSBmaW5hbGx5IGZp
eGVkIHRoZSBob3RwbHVncyB0cmlnZ2VyZWQgYnkgTVNUCnNpbmtzIGR1cmluZyB0aGUgZGlzYWJs
ZS9lbmFibGUgc2VxdWVuY2UsIHRob3NlIHdlcmUgY2F1c2luZyBzb3VyY2UKdG8gdHJ5IHRvIGRv
IGEgbGluayB0cmFpbmluZyB3aGlsZSBpdCB3YXMgbm90IHJlYWR5IGNhdXNpbmcgQ1BVIHBpcGUK
RklGTyB1bmRlcnJydXMgb24gVEdMLgoKdjI6IE9ubHkgdW5zZXR0aW5nIFRHTF9UUkFOU19ERElf
UE9SVF9NQVNLIGZvciBUR0wgb24gdGhlIHBvc3QKZGlzYWJsZSBzZXF1ZW5jZQoKQlNwZWM6IDQy
MzEKQlNwZWM6IDQxNjMKQlNwZWM6IDIyMjQzCkJTcGVjOiA0OTE5MApDYzogTHVjYXMgRGUgTWFy
Y2hpIDxsdWNhcy5kZW1hcmNoaUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEpvc8OpIFJvYmVy
dG8gZGUgU291emEgPGpvc2Uuc291emFAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMgICAgIHwgMzMgKysrKysrLS0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyB8ICAyICsKIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMgIHwgNzAgKysrKysrKysrKysrKysrKy0tLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmggIHwgIDEgKwogNCBmaWxl
cyBjaGFuZ2VkLCA4NCBpbnNlcnRpb25zKCspLCAyMiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYwppbmRleCA2ZWU1MjMwMDQ1ZWIuLjdjODQ0ZGMx
YjI0YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGku
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCkBAIC0zNCw2
ICszNCw3IEBACiAjaW5jbHVkZSAiaW50ZWxfZGRpLmgiCiAjaW5jbHVkZSAiaW50ZWxfZGlzcGxh
eV90eXBlcy5oIgogI2luY2x1ZGUgImludGVsX2RwLmgiCisjaW5jbHVkZSAiaW50ZWxfZHBfbXN0
LmgiCiAjaW5jbHVkZSAiaW50ZWxfZHBfbGlua190cmFpbmluZy5oIgogI2luY2x1ZGUgImludGVs
X2RwaW9fcGh5LmgiCiAjaW5jbHVkZSAiaW50ZWxfZHNpLmgiCkBAIC0xOTUzLDE3ICsxOTU0LDE5
IEBAIHZvaWQgaW50ZWxfZGRpX2Rpc2FibGVfdHJhbnNjb2Rlcl9mdW5jKGNvbnN0IHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlCiAJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0
b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7CiAJc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShjcnRjLT5iYXNlLmRldik7CiAJZW51bSB0cmFuc2Nv
ZGVyIGNwdV90cmFuc2NvZGVyID0gY3J0Y19zdGF0ZS0+Y3B1X3RyYW5zY29kZXI7Ci0JaTkxNV9y
ZWdfdCByZWcgPSBUUkFOU19ERElfRlVOQ19DVEwoY3B1X3RyYW5zY29kZXIpOwotCXUzMiB2YWwg
PSBJOTE1X1JFQUQocmVnKTsKKwl1MzIgdmFsOworCisJdmFsID0gSTkxNV9SRUFEKFRSQU5TX0RE
SV9GVU5DX0NUTChjcHVfdHJhbnNjb2RlcikpOworCXZhbCAmPSB+VFJBTlNfRERJX0ZVTkNfRU5B
QkxFOwogCiAJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIpIHsKLQkJdmFsICY9IH4oVFJB
TlNfRERJX0ZVTkNfRU5BQkxFIHwgVEdMX1RSQU5TX0RESV9QT1JUX01BU0sgfAotCQkJIFRSQU5T
X0RESV9EUF9WQ19QQVlMT0FEX0FMTE9DKTsKKwkJaWYgKCFpbnRlbF9jcnRjX2hhc190eXBlKGNy
dGNfc3RhdGUsIElOVEVMX09VVFBVVF9EUF9NU1QpIHx8CisJCSAgICBpbnRlbF9kcF9tc3RfaXNf
c2xhdmVfdHJhbnMoY3J0Y19zdGF0ZSkpCisJCQl2YWwgJj0gflRHTF9UUkFOU19ERElfUE9SVF9N
QVNLOwogCX0gZWxzZSB7Ci0JCXZhbCAmPSB+KFRSQU5TX0RESV9GVU5DX0VOQUJMRSB8IFRSQU5T
X0RESV9QT1JUX01BU0sgfAotCQkJIFRSQU5TX0RESV9EUF9WQ19QQVlMT0FEX0FMTE9DKTsKKwkJ
dmFsICY9IH5UUkFOU19ERElfUE9SVF9NQVNLOwogCX0KLQlJOTE1X1dSSVRFKHJlZywgdmFsKTsK
KwlJOTE1X1dSSVRFKFRSQU5TX0RESV9GVU5DX0NUTChjcHVfdHJhbnNjb2RlciksIHZhbCk7CiAK
IAlpZiAoZGV2X3ByaXYtPnF1aXJrcyAmIFFVSVJLX0lOQ1JFQVNFX0RESV9ESVNBQkxFRF9USU1F
ICYmCiAJICAgIGludGVsX2NydGNfaGFzX3R5cGUoY3J0Y19zdGF0ZSwgSU5URUxfT1VUUFVUX0hE
TUkpKSB7CkBAIC0zODEyLDggKzM4MTUsMjAgQEAgc3RhdGljIHZvaWQgaW50ZWxfZGRpX3Bvc3Rf
ZGlzYWJsZV9kcChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkgKi8KIAlpbnRlbF9k
cF9zaW5rX2RwbXMoaW50ZWxfZHAsIERSTV9NT0RFX0RQTVNfT0ZGKTsKIAotCWlmIChJTlRFTF9H
RU4oZGV2X3ByaXYpIDwgMTIgJiYgIWlzX21zdCkKLQkJaW50ZWxfZGRpX2Rpc2FibGVfcGlwZV9j
bG9jayhvbGRfY3J0Y19zdGF0ZSk7CisJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIpIHsK
KwkJaWYgKGlzX21zdCkgeworCQkJZW51bSB0cmFuc2NvZGVyIGNwdV90cmFuc2NvZGVyOworCQkJ
dTMyIHZhbDsKKworCQkJY3B1X3RyYW5zY29kZXIgPSBvbGRfY3J0Y19zdGF0ZS0+Y3B1X3RyYW5z
Y29kZXI7CisJCQl2YWwgPSBJOTE1X1JFQUQoVFJBTlNfRERJX0ZVTkNfQ1RMKGNwdV90cmFuc2Nv
ZGVyKSk7CisJCQl2YWwgJj0gflRHTF9UUkFOU19ERElfUE9SVF9NQVNLOworCQkJSTkxNV9XUklU
RShUUkFOU19ERElfRlVOQ19DVEwoY3B1X3RyYW5zY29kZXIpLCB2YWwpOworCQl9CisJfSBlbHNl
IHsKKwkJaWYgKCFpc19tc3QpCisJCQlpbnRlbF9kZGlfZGlzYWJsZV9waXBlX2Nsb2NrKG9sZF9j
cnRjX3N0YXRlKTsKKwl9CiAKIAlpbnRlbF9kaXNhYmxlX2RkaV9idWYoZW5jb2Rlciwgb2xkX2Ny
dGNfc3RhdGUpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eS5jCmluZGV4IDE3NmUzMWRlNjhlNy4uZjFjMDY4N2JmNjliIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtNjczMSw2ICs2NzMxLDggQEAgc3Rh
dGljIHZvaWQgaGFzd2VsbF9jcnRjX2Rpc2FibGUoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAq
c3RhdGUsCiAJaWYgKCF0cmFuc2NvZGVyX2lzX2RzaShjcHVfdHJhbnNjb2RlcikpCiAJCWludGVs
X2Rpc2FibGVfcGlwZShvbGRfY3J0Y19zdGF0ZSk7CiAKKwlpbnRlbF9kcF9tc3RfcG9zdF90cmFu
c19kaXNhYmxlZChvbGRfY3J0Y19zdGF0ZSk7CisKIAlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+
PSAxMSkKIAkJaWNsX2Rpc2FibGVfdHJhbnNjb2Rlcl9wb3J0X3N5bmMob2xkX2NydGNfc3RhdGUp
OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21z
dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcF9tc3QuYwppbmRleCA5
Mzk1YzYxMWM0ODUuLmRiYTc0NzExYzQxNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kcF9tc3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2RwX21zdC5jCkBAIC0zMzcsNiArMzM3LDU3IEBAIHN0YXRpYyB2b2lkIGludGVs
X21zdF9kaXNhYmxlX2RwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkJCQkgIG9s
ZF9jcnRjX3N0YXRlLCBvbGRfY29ubl9zdGF0ZSk7CiB9CiAKK3N0YXRpYyB2b2lkCitkcF9tc3Rf
cG9zdF90cmFuc19kaXNhYmxlZChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKKwkJCSAg
IGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwKKwkJCSAgIGNv
bnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpvbGRfY29ubl9zdGF0ZSkKK3sKKwlzdHJ1
Y3QgaW50ZWxfZHBfbXN0X2VuY29kZXIgKmludGVsX21zdCA9IGVuY190b19tc3QoJmVuY29kZXIt
PmJhc2UpOworCXN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0ID0gaW50
ZWxfbXN0LT5wcmltYXJ5OworCXN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAgPSAmaW50ZWxfZGln
X3BvcnQtPmRwOworCXN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvciA9CisJCXRvX2lu
dGVsX2Nvbm5lY3RvcihvbGRfY29ubl9zdGF0ZS0+Y29ubmVjdG9yKTsKKwlzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNvbm5lY3Rvci0+YmFzZS5kZXYpOworCXUz
MiB2YWw7CisKKwlkcm1fZHBfdXBkYXRlX3BheWxvYWRfcGFydDIoJmludGVsX2RwLT5tc3RfbWdy
KTsKKworCXZhbCA9IEk5MTVfUkVBRChUUkFOU19ERElfRlVOQ19DVEwob2xkX2NydGNfc3RhdGUt
PmNwdV90cmFuc2NvZGVyKSk7CisJdmFsICY9IH5UUkFOU19ERElfRFBfVkNfUEFZTE9BRF9BTExP
QzsKKwlJOTE1X1dSSVRFKFRSQU5TX0RESV9GVU5DX0NUTChvbGRfY3J0Y19zdGF0ZS0+Y3B1X3Ry
YW5zY29kZXIpLCB2YWwpOworCisJaWYgKGludGVsX2RlX3dhaXRfZm9yX3NldChkZXZfcHJpdiwg
aW50ZWxfZHAtPnJlZ3MuZHBfdHBfc3RhdHVzLAorCQkJCSAgRFBfVFBfU1RBVFVTX0FDVF9TRU5U
LCAxKSkKKwkJRFJNX0VSUk9SKCJUaW1lZCBvdXQgd2FpdGluZyBmb3IgQUNUIHNlbnQgd2hlbiBk
aXNhYmxpbmdcbiIpOworCisJZHJtX2RwX2NoZWNrX2FjdF9zdGF0dXMoJmludGVsX2RwLT5tc3Rf
bWdyKTsKKworCWRybV9kcF9tc3RfZGVhbGxvY2F0ZV92Y3BpKCZpbnRlbF9kcC0+bXN0X21nciwg
Y29ubmVjdG9yLT5wb3J0KTsKK30KKwordm9pZAoraW50ZWxfZHBfbXN0X3Bvc3RfdHJhbnNfZGlz
YWJsZWQoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9jcnRjX3N0YXRlKQorewor
CXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSA9IG9sZF9jcnRjX3N0YXRlLT51YXBpLnN0
YXRlOworCXN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpvbGRfY29ubl9zdGF0ZTsKKwlzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciAqY29ubjsKKwlpbnQgaTsKKworCWlmICghaW50ZWxfY3J0Y19oYXNf
dHlwZShvbGRfY3J0Y19zdGF0ZSwgSU5URUxfT1VUUFVUX0RQX01TVCkpCisJCXJldHVybjsKKwor
CWZvcl9lYWNoX29sZF9jb25uZWN0b3JfaW5fc3RhdGUoc3RhdGUsIGNvbm4sIG9sZF9jb25uX3N0
YXRlLCBpKSB7CisJCXN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyOworCisJCWlmIChvbGRf
Y29ubl9zdGF0ZS0+Y3J0YyAhPSBvbGRfY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKQorCQkJY29udGlu
dWU7CisKKwkJZW5jb2RlciA9IHRvX2ludGVsX2VuY29kZXIob2xkX2Nvbm5fc3RhdGUtPmJlc3Rf
ZW5jb2Rlcik7CisJCWRwX21zdF9wb3N0X3RyYW5zX2Rpc2FibGVkKGVuY29kZXIsIG9sZF9jcnRj
X3N0YXRlLAorCQkJCQkgICBvbGRfY29ubl9zdGF0ZSk7CisJfQorfQorCiBzdGF0aWMgdm9pZCBp
bnRlbF9tc3RfcG9zdF9kaXNhYmxlX2RwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAog
CQkJCSAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwK
IAkJCQkgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqb2xkX2Nvbm5fc3Rh
dGUpCkBAIC0zNTUsNiArNDA2LDEyIEBAIHN0YXRpYyB2b2lkIGludGVsX21zdF9wb3N0X2Rpc2Fi
bGVfZHAoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJV0FSTl9PTihJTlRFTF9HRU4o
ZGV2X3ByaXYpID49IDEyICYmIGxhc3RfbXN0X3N0cmVhbSAmJgogCQkhaW50ZWxfZHBfbXN0X2lz
X21hc3Rlcl90cmFucyhvbGRfY3J0Y19zdGF0ZSkpOwogCisJLyoKKwkgKiBQb3dlciBkb3duIG1z
dCBwYXRoIGJlZm9yZSBkaXNhYmxpbmcgdGhlIHBvcnQsIG90aGVyd2lzZSB3ZSBlbmQKKwkgKiB1
cCBnZXR0aW5nIGludGVycnVwdHMgZnJvbSB0aGUgc2luayB1cG9uIGRldGVjdGluZyBsaW5rIGxv
c3MuCisJICovCisJZHJtX2RwX3NlbmRfcG93ZXJfdXBkb3duX3BoeSgmaW50ZWxfZHAtPm1zdF9t
Z3IsIGNvbm5lY3Rvci0+cG9ydCwKKwkJCQkgICAgIGZhbHNlKTsKIAkvKgogCSAqIEZyb20gVEdM
IHNwZWM6ICJJZiBtdWx0aS1zdHJlYW0gc2xhdmUgdHJhbnNjb2RlcjogQ29uZmlndXJlCiAJICog
VHJhbnNjb2RlciBDbG9jayBTZWxlY3QgdG8gZGlyZWN0IG5vIGNsb2NrIHRvIHRoZSB0cmFuc2Nv
ZGVyIgpAQCAtMzY1LDE5ICs0MjIsNiBAQCBzdGF0aWMgdm9pZCBpbnRlbF9tc3RfcG9zdF9kaXNh
YmxlX2RwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCWlmIChJTlRFTF9HRU4oZGV2
X3ByaXYpIDwgMTIgfHwgIWxhc3RfbXN0X3N0cmVhbSkKIAkJaW50ZWxfZGRpX2Rpc2FibGVfcGlw
ZV9jbG9jayhvbGRfY3J0Y19zdGF0ZSk7CiAKLQkvKiB0aGlzIGNhbiBmYWlsICovCi0JZHJtX2Rw
X2NoZWNrX2FjdF9zdGF0dXMoJmludGVsX2RwLT5tc3RfbWdyKTsKLQkvKiBhbmQgdGhpcyBjYW4g
YWxzbyBmYWlsICovCi0JZHJtX2RwX3VwZGF0ZV9wYXlsb2FkX3BhcnQyKCZpbnRlbF9kcC0+bXN0
X21ncik7Ci0KLQlkcm1fZHBfbXN0X2RlYWxsb2NhdGVfdmNwaSgmaW50ZWxfZHAtPm1zdF9tZ3Is
IGNvbm5lY3Rvci0+cG9ydCk7Ci0KLQkvKgotCSAqIFBvd2VyIGRvd24gbXN0IHBhdGggYmVmb3Jl
IGRpc2FibGluZyB0aGUgcG9ydCwgb3RoZXJ3aXNlIHdlIGVuZAotCSAqIHVwIGdldHRpbmcgaW50
ZXJydXB0cyBmcm9tIHRoZSBzaW5rIHVwb24gZGV0ZWN0aW5nIGxpbmsgbG9zcy4KLQkgKi8KLQlk
cm1fZHBfc2VuZF9wb3dlcl91cGRvd25fcGh5KCZpbnRlbF9kcC0+bXN0X21nciwgY29ubmVjdG9y
LT5wb3J0LAotCQkJCSAgICAgZmFsc2UpOwogCiAJaW50ZWxfbXN0LT5jb25uZWN0b3IgPSBOVUxM
OwogCWlmIChsYXN0X21zdF9zdHJlYW0pCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2RwX21zdC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kcF9tc3QuaAppbmRleCA4NTQ3MjRmNjhmMDkuLmYwNThmYWNmYTFhNSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcF9tc3QuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5oCkBAIC0xNiw1ICsxNiw2IEBA
IHZvaWQgaW50ZWxfZHBfbXN0X2VuY29kZXJfY2xlYW51cChzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9w
b3J0ICppbnRlbF9kaWdfcG9ydCk7CiBpbnQgaW50ZWxfZHBfbXN0X2VuY29kZXJfYWN0aXZlX2xp
bmtzKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0KTsKIGJvb2wgaW50
ZWxfZHBfbXN0X2lzX21hc3Rlcl90cmFucyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
Y3J0Y19zdGF0ZSk7CiBib29sIGludGVsX2RwX21zdF9pc19zbGF2ZV90cmFucyhjb25zdCBzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSk7Cit2b2lkIGludGVsX2RwX21zdF9wb3N0
X3RyYW5zX2Rpc2FibGVkKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19z
dGF0ZSk7CiAKICNlbmRpZiAvKiBfX0lOVEVMX0RQX01TVF9IX18gKi8KLS0gCjIuMjQuMQoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1h
aWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

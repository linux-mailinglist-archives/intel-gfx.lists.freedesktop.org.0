Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 34A471C0628
	for <lists+intel-gfx@lfdr.de>; Thu, 30 Apr 2020 21:22:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8843D6E1E2;
	Thu, 30 Apr 2020 19:22:17 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EE9016E1E2
 for <intel-gfx@lists.freedesktop.org>; Thu, 30 Apr 2020 19:22:15 +0000 (UTC)
IronPort-SDR: EruJIsyZ7J8AmHbo3J8R4JQ0GZUKR110sBQZdzk962q4s3mNMyWT3JVGxu5cTXTmFGMWceiY2k
 g92pXtgbD67w==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by orsmga104.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 30 Apr 2020 12:22:15 -0700
IronPort-SDR: TGhhStTj0lFn1MSXFSMnkmBK197PieIBDVAt+Qc4WuAx6dgjh8OnYOnnSU0gVGxrigSABphtt5
 yaYZep94d3mQ==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.73,336,1583222400"; d="scan'208";a="248361843"
Received: from unknown (HELO slisovsk-Lenovo-ideapad-720S-13IKB.fi.intel.com)
 ([10.237.72.89])
 by fmsmga007.fm.intel.com with ESMTP; 30 Apr 2020 12:22:13 -0700
From: Stanislav Lisovskiy <stanislav.lisovskiy@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 30 Apr 2020 22:17:57 +0300
Message-Id: <20200430191757.18206-1-stanislav.lisovskiy@intel.com>
X-Mailer: git-send-email 2.24.1.485.gad05a3d8e5
In-Reply-To: <20200423075902.21892-3-stanislav.lisovskiy@intel.com>
References: <20200423075902.21892-3-stanislav.lisovskiy@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v26 2/9] drm/i915: Use bw state for per crtc
 SAGV evaluation
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnV0dXJlIHBsYXRmb3JtcyByZXF1aXJlIHBlci1jcnRjIFNBR1YgZXZhbHVhdGlvbgphbmQgc2Vy
aWFsaXppbmcgZ2xvYmFsIHN0YXRlIHdoZW4gdGhvc2UgYXJlIGNoYW5nZWQKZnJvbSBkaWZmZXJl
bnQgY29tbWl0cy4KCnYyOiAtIEFkZCBoYXNfc2FndiBjaGVjayB0byBpbnRlbF9jcnRjX2Nhbl9l
bmFibGVfc2FndgogICAgICBzbyB0aGF0IGl0IHNldHMgYml0IGluIHJlamVjdCBtYXNrLgogICAg
LSBVc2UgYndfc3RhdGUgaW4gaW50ZWxfcHJlL3Bvc3RfcGxhbmVfZW5hYmxlX3NhZ3YKICAgICAg
aW5zdGVhZCBvZiBhdG9taWMgc3RhdGUKCnYzOiAtIEZpeGVkIHJlYmFzZSBjb25mbGljdCwgbm93
IHVzaW5nCiAgICAgIGludGVsX2F0b21pY19jcnRjX3N0YXRlX2Zvcl9lYWNoX3BsYW5lX3N0YXRl
IGluCiAgICAgIG9yZGVyIHRvIGNhbGwgaXQgZnJvbSBhdG9taWMgY2hlY2sKdjQ6IC0gVXNlIGZi
IG1vZGlmaWVyIGZyb20gcGxhbmUgc3RhdGUKCnY1OiAtIE1ha2UgaW50ZWxfaGFzX3NhZ3Ygc3Rh
dGljIGFnYWluKFZpbGxlKQogICAgLSBSZW1vdmVkIHVubmVjZXNzYXJ5IE5VTEwgYXNzaWdubWVu
dHMoVmlsbGUpCiAgICAtIFJlbW92ZWQgdW5uZWNlc3NhcnkgU0FHViBkZWJ1ZyhWaWxsZSkKICAg
IC0gQ2FsbCBpbnRlbF9jb21wdXRlX3NhZ3ZfbWFzayBvbmx5IGZvciBtb2Rlc2V0cyhWaWxsZSkK
ICAgIC0gU2VyaWFsaXplIGdsb2JhbCBzdGF0ZSBvbmx5IGlmIHNhZ3YgcmVzdWx0cyBjaGFuZ2Us
IGJ1dAogICAgICBub3QgbWFzayBpdHNlbGYoVmlsbGUpCgp2NjogLSB1c2UgbG9jayBnbG9iYWwg
c3RhdGUgaW5zdGVhZCBvZiBzZXJpYWxpemUoVmlsbGUpCnY3OiAtIHVzZSBib3RoIGdsb2JhbCBz
dGF0ZSBsb2NrIGFuZCBzZXJpYWxpemUgZGVwZW5kaW5nIG9uCiAgICAgIGlmIHdlIG5lZWQgdG8g
Y2hhbmdlIG9ubHkgZ2xvYmFsIHN0YXRlIG9yIGFjY2VzcyBodwogICAgICAoVmlsbGUpCgpTaWdu
ZWQtb2ZmLWJ5OiBTdGFuaXNsYXYgTGlzb3Zza2l5IDxzdGFuaXNsYXYubGlzb3Zza2l5QGludGVs
LmNvbT4KQ2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBpbnRlbC5jb20+CkNjOiBK
YW1lcyBBdXNtdXMgPGphbWVzLmF1c211c0BpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9idy5oIHwgICA2ICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9p
bnRlbF9wbS5jICAgICAgICAgfCAxMTcgKysrKysrKysrKysrKysrKysrLS0tLS0tCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5oICAgICAgICAgfCAgIDMgKy0KIDMgZmlsZXMgY2hhbmdl
ZCwgOTcgaW5zZXJ0aW9ucygrKSwgMjkgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9idy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9idy5oCmluZGV4IGFjMDA0ZDZmNDI3Ni4uZDZkZjkxMDU4MjIzIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2J3LmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9idy5oCkBAIC0xOCw2ICsxOCwxMiBAQCBz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZTsKIHN0cnVjdCBpbnRlbF9id19zdGF0ZSB7CiAJc3RydWN0
IGludGVsX2dsb2JhbF9zdGF0ZSBiYXNlOwogCisJLyoKKwkgKiBDb250YWlucyBhIGJpdCBtYXNr
LCB1c2VkIHRvIGRldGVybWluZSwgd2hldGhlciBjb3JyZXNwb25kZW50CisJICogcGlwZSBhbGxv
d3MgU0FHViBvciBub3QuCisJICovCisJdTggcGlwZV9zYWd2X3JlamVjdDsKKwogCXVuc2lnbmVk
IGludCBkYXRhX3JhdGVbSTkxNV9NQVhfUElQRVNdOwogCXU4IG51bV9hY3RpdmVfcGxhbmVzW0k5
MTVfTUFYX1BJUEVTXTsKIH07CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYwppbmRleCAzMzhhODI1Nzdi
NzYuLjhkNDU4Y2YwMzMzZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
cG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jCkBAIC00Myw2ICs0Myw3
IEBACiAjaW5jbHVkZSAiaTkxNV9maXhlZC5oIgogI2luY2x1ZGUgImk5MTVfaXJxLmgiCiAjaW5j
bHVkZSAiaTkxNV90cmFjZS5oIgorI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxfYncuaCIKICNpbmNs
dWRlICJpbnRlbF9wbS5oIgogI2luY2x1ZGUgImludGVsX3NpZGViYW5kLmgiCiAjaW5jbHVkZSAi
Li4vLi4vLi4vcGxhdGZvcm0veDg2L2ludGVsX2lwcy5oIgpAQCAtMzc2MCwzNCArMzc2MSw3NSBA
QCBpbnRlbF9kaXNhYmxlX3NhZ3Yoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQog
dm9pZCBpbnRlbF9zYWd2X3ByZV9wbGFuZV91cGRhdGUoc3RydWN0IGludGVsX2F0b21pY19zdGF0
ZSAqc3RhdGUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkx
NShzdGF0ZS0+YmFzZS5kZXYpOworCWNvbnN0IHN0cnVjdCBpbnRlbF9id19zdGF0ZSAqbmV3X2J3
X3N0YXRlOwogCi0JaWYgKCFpbnRlbF9jYW5fZW5hYmxlX3NhZ3Yoc3RhdGUpKQorCS8qCisJICog
SnVzdCByZXR1cm4gaWYgd2UgY2FuJ3QgY29udHJvbCBTQUdWIG9yIGRvbid0IGhhdmUgaXQuCisJ
ICogVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSBzaXR1YXRpb24gd2hlbiB3ZSBoYXZlIFNBR1YgYnV0
IGp1c3QgY2FuJ3QKKwkgKiBhZmZvcmQgaXQgZHVlIHRvIERCdWYgbGltaXRhdGlvbiAtIGluIGNh
c2UgaWYgU0FHViBpcyBjb21wbGV0ZWx5CisJICogZGlzYWJsZWQgaW4gYSBCSU9TLCB3ZSBhcmUg
bm90IGV2ZW4gYWxsb3dlZCB0byBzZW5kIGEgUENvZGUgcmVxdWVzdCwKKwkgKiBhcyBpdCB3aWxs
IHRocm93IGFuIGVycm9yLiBTbyBoYXZlIHRvIGNoZWNrIGl0IGhlcmUuCisJICovCisJaWYgKCFp
bnRlbF9oYXNfc2FndihkZXZfcHJpdikpCisJCXJldHVybjsKKworCW5ld19id19zdGF0ZSA9IGlu
dGVsX2F0b21pY19nZXRfbmV3X2J3X3N0YXRlKHN0YXRlKTsKKwlpZiAoIW5ld19id19zdGF0ZSkK
KwkJcmV0dXJuOworCisJaWYgKCFpbnRlbF9jYW5fZW5hYmxlX3NhZ3YobmV3X2J3X3N0YXRlKSkK
IAkJaW50ZWxfZGlzYWJsZV9zYWd2KGRldl9wcml2KTsKIH0KIAogdm9pZCBpbnRlbF9zYWd2X3Bv
c3RfcGxhbmVfdXBkYXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQogewogCXN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoc3RhdGUtPmJhc2UuZGV2
KTsKKwljb25zdCBzdHJ1Y3QgaW50ZWxfYndfc3RhdGUgKm5ld19id19zdGF0ZTsKKworCS8qCisJ
ICogSnVzdCByZXR1cm4gaWYgd2UgY2FuJ3QgY29udHJvbCBTQUdWIG9yIGRvbid0IGhhdmUgaXQu
CisJICogVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSBzaXR1YXRpb24gd2hlbiB3ZSBoYXZlIFNBR1Yg
YnV0IGp1c3QgY2FuJ3QKKwkgKiBhZmZvcmQgaXQgZHVlIHRvIERCdWYgbGltaXRhdGlvbiAtIGlu
IGNhc2UgaWYgU0FHViBpcyBjb21wbGV0ZWx5CisJICogZGlzYWJsZWQgaW4gYSBCSU9TLCB3ZSBh
cmUgbm90IGV2ZW4gYWxsb3dlZCB0byBzZW5kIGEgUENvZGUgcmVxdWVzdCwKKwkgKiBhcyBpdCB3
aWxsIHRocm93IGFuIGVycm9yLiBTbyBoYXZlIHRvIGNoZWNrIGl0IGhlcmUuCisJICovCisJaWYg
KCFpbnRlbF9oYXNfc2FndihkZXZfcHJpdikpCisJCXJldHVybjsKIAotCWlmIChpbnRlbF9jYW5f
ZW5hYmxlX3NhZ3Yoc3RhdGUpKQorCW5ld19id19zdGF0ZSA9IGludGVsX2F0b21pY19nZXRfbmV3
X2J3X3N0YXRlKHN0YXRlKTsKKwlpZiAoIW5ld19id19zdGF0ZSkKKwkJcmV0dXJuOworCisJaWYg
KGludGVsX2Nhbl9lbmFibGVfc2FndihuZXdfYndfc3RhdGUpKQogCQlpbnRlbF9lbmFibGVfc2Fn
dihkZXZfcHJpdik7CiB9CiAKIHN0YXRpYyBib29sIGludGVsX2NydGNfY2FuX2VuYWJsZV9zYWd2
KGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogewotCXN0cnVjdCBk
cm1fZGV2aWNlICpkZXYgPSBjcnRjX3N0YXRlLT51YXBpLmNydGMtPmRldjsKLQlzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGRldik7CisJc3RydWN0IGludGVsX2F0
b21pY19zdGF0ZSAqc3RhdGUgPSB0b19pbnRlbF9hdG9taWNfc3RhdGUoY3J0Y19zdGF0ZS0+dWFw
aS5zdGF0ZSk7CiAJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNf
c3RhdGUtPnVhcGkuY3J0Yyk7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0g
dG9faTkxNShjcnRjLT5iYXNlLmRldik7CiAJc3RydWN0IGludGVsX3BsYW5lICpwbGFuZTsKKwlj
b25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlOwogCWludCBsZXZlbCwg
bGF0ZW5jeTsKIAorCWlmICghaW50ZWxfaGFzX3NhZ3YoZGV2X3ByaXYpKQorCQlyZXR1cm4gZmFs
c2U7CisKIAlpZiAoIWNydGNfc3RhdGUtPmh3LmFjdGl2ZSkKIAkJcmV0dXJuIHRydWU7CiAKKwkv
KgorCSAqIFNLTCsgd29ya2Fyb3VuZDogYnNwZWMgcmVjb21tZW5kcyB3ZSBkaXNhYmxlIFNBR1Yg
d2hlbiB3ZSBoYXZlCisJICogbW9yZSB0aGVuIG9uZSBwaXBlIGVuYWJsZWQKKwkgKi8KKwlpZiAo
aHdlaWdodDgoc3RhdGUtPmFjdGl2ZV9waXBlcykgPiAxKQorCQlyZXR1cm4gZmFsc2U7CisKIAlp
ZiAoY3J0Y19zdGF0ZS0+aHcuYWRqdXN0ZWRfbW9kZS5mbGFncyAmIERSTV9NT0RFX0ZMQUdfSU5U
RVJMQUNFKQogCQlyZXR1cm4gZmFsc2U7CiAKLQlmb3JfZWFjaF9pbnRlbF9wbGFuZV9vbl9jcnRj
KGRldiwgY3J0YywgcGxhbmUpIHsKKwlpbnRlbF9hdG9taWNfY3J0Y19zdGF0ZV9mb3JfZWFjaF9w
bGFuZV9zdGF0ZShwbGFuZSwgcGxhbmVfc3RhdGUsIGNydGNfc3RhdGUpIHsKIAkJY29uc3Qgc3Ry
dWN0IHNrbF9wbGFuZV93bSAqd20gPQogCQkJJmNydGNfc3RhdGUtPndtLnNrbC5vcHRpbWFsLnBs
YW5lc1twbGFuZS0+aWRdOwogCkBAIC0zODAzLDcgKzM4NDUsNyBAQCBzdGF0aWMgYm9vbCBpbnRl
bF9jcnRjX2Nhbl9lbmFibGVfc2Fndihjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0
Y19zdGF0ZQogCQlsYXRlbmN5ID0gZGV2X3ByaXYtPndtLnNrbF9sYXRlbmN5W2xldmVsXTsKIAog
CQlpZiAoc2tsX25lZWRzX21lbW9yeV9id193YShkZXZfcHJpdikgJiYKLQkJICAgIHBsYW5lLT5i
YXNlLnN0YXRlLT5mYi0+bW9kaWZpZXIgPT0KKwkJICAgIHBsYW5lX3N0YXRlLT51YXBpLmZiLT5t
b2RpZmllciA9PQogCQkgICAgSTkxNV9GT1JNQVRfTU9EX1hfVElMRUQpCiAJCQlsYXRlbmN5ICs9
IDE1OwogCkBAIC0zODE5LDM1ICszODYxLDQ4IEBAIHN0YXRpYyBib29sIGludGVsX2NydGNfY2Fu
X2VuYWJsZV9zYWd2KGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlCiAJ
cmV0dXJuIHRydWU7CiB9CiAKLWJvb2wgaW50ZWxfY2FuX2VuYWJsZV9zYWd2KHN0cnVjdCBpbnRl
bF9hdG9taWNfc3RhdGUgKnN0YXRlKQorYm9vbCBpbnRlbF9jYW5fZW5hYmxlX3NhZ3YoY29uc3Qg
c3RydWN0IGludGVsX2J3X3N0YXRlICpid19zdGF0ZSkKIHsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7CisJcmV0dXJuIGJ3X3N0
YXRlLT5waXBlX3NhZ3ZfcmVqZWN0ID09IDA7Cit9CisKK3N0YXRpYyBpbnQgaW50ZWxfY29tcHV0
ZV9zYWd2X21hc2soc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCit7CisJaW50IHJl
dDsKIAlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YzsKLQljb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZSAqY3J0Y19zdGF0ZTsKLQllbnVtIHBpcGUgcGlwZTsKKwlzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZSAqbmV3X2NydGNfc3RhdGU7CisJc3RydWN0IGludGVsX2J3X3N0YXRlICpuZXdfYndfc3Rh
dGUgPSBOVUxMOworCWNvbnN0IHN0cnVjdCBpbnRlbF9id19zdGF0ZSAqb2xkX2J3X3N0YXRlID0g
TlVMTDsKKwlpbnQgaTsKIAotCWlmICghaW50ZWxfaGFzX3NhZ3YoZGV2X3ByaXYpKQotCQlyZXR1
cm4gZmFsc2U7CisJZm9yX2VhY2hfbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMs
CisJCQkJCSBuZXdfY3J0Y19zdGF0ZSwgaSkgeworCQluZXdfYndfc3RhdGUgPSBpbnRlbF9hdG9t
aWNfZ2V0X2J3X3N0YXRlKHN0YXRlKTsKKwkJaWYgKElTX0VSUihuZXdfYndfc3RhdGUpKQorCQkJ
cmV0dXJuIFBUUl9FUlIobmV3X2J3X3N0YXRlKTsKIAotCS8qCi0JICogSWYgdGhlcmUgYXJlIG5v
IGFjdGl2ZSBDUlRDcywgbm8gYWRkaXRpb25hbCBjaGVja3MgbmVlZCBiZSBwZXJmb3JtZWQKLQkg
Ki8KLQlpZiAoaHdlaWdodDgoc3RhdGUtPmFjdGl2ZV9waXBlcykgPT0gMCkKLQkJcmV0dXJuIHRy
dWU7CisJCW9sZF9id19zdGF0ZSA9IGludGVsX2F0b21pY19nZXRfb2xkX2J3X3N0YXRlKHN0YXRl
KTsKIAotCS8qCi0JICogU0tMKyB3b3JrYXJvdW5kOiBic3BlYyByZWNvbW1lbmRzIHdlIGRpc2Fi
bGUgU0FHViB3aGVuIHdlIGhhdmUKLQkgKiBtb3JlIHRoZW4gb25lIHBpcGUgZW5hYmxlZAotCSAq
LwotCWlmIChod2VpZ2h0OChzdGF0ZS0+YWN0aXZlX3BpcGVzKSA+IDEpCi0JCXJldHVybiBmYWxz
ZTsKKwkJaWYgKGludGVsX2NydGNfY2FuX2VuYWJsZV9zYWd2KG5ld19jcnRjX3N0YXRlKSkKKwkJ
CW5ld19id19zdGF0ZS0+cGlwZV9zYWd2X3JlamVjdCAmPSB+QklUKGNydGMtPnBpcGUpOworCQll
bHNlCisJCQluZXdfYndfc3RhdGUtPnBpcGVfc2Fndl9yZWplY3QgfD0gQklUKGNydGMtPnBpcGUp
OworCX0KIAotCS8qIFNpbmNlIHdlJ3JlIG5vdyBndWFyYW50ZWVkIHRvIG9ubHkgaGF2ZSBvbmUg
YWN0aXZlIENSVEMuLi4gKi8KLQlwaXBlID0gZmZzKHN0YXRlLT5hY3RpdmVfcGlwZXMpIC0gMTsK
LQljcnRjID0gaW50ZWxfZ2V0X2NydGNfZm9yX3BpcGUoZGV2X3ByaXYsIHBpcGUpOwotCWNydGNf
c3RhdGUgPSB0b19pbnRlbF9jcnRjX3N0YXRlKGNydGMtPmJhc2Uuc3RhdGUpOworCWlmICghbmV3
X2J3X3N0YXRlKQorCQlyZXR1cm4gMDsKIAotCXJldHVybiBpbnRlbF9jcnRjX2Nhbl9lbmFibGVf
c2FndihjcnRjX3N0YXRlKTsKKwlpZiAoaW50ZWxfY2FuX2VuYWJsZV9zYWd2KG5ld19id19zdGF0
ZSkgIT0gaW50ZWxfY2FuX2VuYWJsZV9zYWd2KG9sZF9id19zdGF0ZSkpIHsKKwkJcmV0ID0gaW50
ZWxfYXRvbWljX3NlcmlhbGl6ZV9nbG9iYWxfc3RhdGUoJm5ld19id19zdGF0ZS0+YmFzZSk7CisJ
CWlmIChyZXQpCisJCQlyZXR1cm4gcmV0OworCX0gZWxzZSBpZiAobmV3X2J3X3N0YXRlLT5waXBl
X3NhZ3ZfcmVqZWN0ICE9IG9sZF9id19zdGF0ZS0+cGlwZV9zYWd2X3JlamVjdCkgeworCQlyZXQg
PSBpbnRlbF9hdG9taWNfbG9ja19nbG9iYWxfc3RhdGUoJm5ld19id19zdGF0ZS0+YmFzZSk7CisJ
CWlmIChyZXQpCisJCQlyZXR1cm4gcmV0OworCX0KKworCXJldHVybiAwOwogfQogCiAvKgpAQCAt
NTg2MCw2ICs1OTE1LDEyIEBAIHNrbF9jb21wdXRlX3dtKHN0cnVjdCBpbnRlbF9hdG9taWNfc3Rh
dGUgKnN0YXRlKQogCWlmIChyZXQpCiAJCXJldHVybiByZXQ7CiAKKwlpZiAoc3RhdGUtPm1vZGVz
ZXQpIHsKKwkJcmV0ID0gaW50ZWxfY29tcHV0ZV9zYWd2X21hc2soc3RhdGUpOworCQlpZiAocmV0
KQorCQkJcmV0dXJuIHJldDsKKwl9CisKIAkvKgogCSAqIHNrbF9jb21wdXRlX2RkYigpIHdpbGwg
aGF2ZSBhZGp1c3RlZCB0aGUgZmluYWwgd2F0ZXJtYXJrcwogCSAqIGJhc2VkIG9uIGhvdyBtdWNo
IGRkYiBpcyBhdmFpbGFibGUuIE5vdyB3ZSBjYW4gYWN0dWFsbHkKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9w
bS5oCmluZGV4IDlhNjAzNmFiMGY5MC4uZmQxZGM0MjJlNmM1IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X3BtLmgKQEAgLTksNiArOSw3IEBACiAjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4KIAogI2luY2x1
ZGUgImk5MTVfcmVnLmgiCisjaW5jbHVkZSAiZGlzcGxheS9pbnRlbF9idy5oIgogCiBzdHJ1Y3Qg
ZHJtX2RldmljZTsKIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlOwpAQCAtNDEsNyArNDIsNyBAQCB2
b2lkIHNrbF9waXBlX3dtX2dldF9od19zdGF0ZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAkJ
CSAgICAgIHN0cnVjdCBza2xfcGlwZV93bSAqb3V0KTsKIHZvaWQgZzR4X3dtX3Nhbml0aXplKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIHZsdl93bV9zYW5pdGl6ZShz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwotYm9vbCBpbnRlbF9jYW5fZW5hYmxl
X3NhZ3Yoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpOworYm9vbCBpbnRlbF9jYW5f
ZW5hYmxlX3NhZ3YoY29uc3Qgc3RydWN0IGludGVsX2J3X3N0YXRlICpid19zdGF0ZSk7CiBpbnQg
aW50ZWxfZW5hYmxlX3NhZ3Yoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIGlu
dCBpbnRlbF9kaXNhYmxlX3NhZ3Yoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsK
IHZvaWQgaW50ZWxfc2Fndl9wcmVfcGxhbmVfdXBkYXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3Rh
dGUgKnN0YXRlKTsKLS0gCjIuMjQuMS40ODUuZ2FkMDVhM2Q4ZTUKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50
ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

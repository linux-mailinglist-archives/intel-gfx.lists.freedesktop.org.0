Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D21E6318D4A
	for <lists+intel-gfx@lfdr.de>; Thu, 11 Feb 2021 15:25:50 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 416806E19B;
	Thu, 11 Feb 2021 14:25:49 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 616996E19B
 for <intel-gfx@lists.freedesktop.org>; Thu, 11 Feb 2021 14:25:47 +0000 (UTC)
IronPort-SDR: qSDrKhOgem26ir8ASXNLNHNymDzzJLUp1clYzNKNMeWItrmVOXWzXbAc5H2d7XRPSqBugLup/G
 Fdi4GUJvW9tA==
X-IronPort-AV: E=McAfee;i="6000,8403,9891"; a="201374977"
X-IronPort-AV: E=Sophos;i="5.81,170,1610438400"; d="scan'208";a="201374977"
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by fmsmga101.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 11 Feb 2021 06:25:44 -0800
IronPort-SDR: buttBDN+8IYcOIihFI4YWH9SwPea8akBWyF7zXKnYc7H3iFeh8Y/knJojH96ywxNJYrb6JXYhf
 IB564/3d6Qgg==
X-IronPort-AV: E=Sophos;i="5.81,170,1610438400"; d="scan'208";a="422278351"
Received: from dgreerx-mobl1.ger.corp.intel.com (HELO [10.252.0.180])
 ([10.252.0.180])
 by fmsmga002-auth.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 11 Feb 2021 06:25:43 -0800
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20210210233946.7602-1-chris@chris-wilson.co.uk>
From: Matthew Auld <matthew.auld@intel.com>
Message-ID: <312a3a6b-be50-612f-b903-c71fae6261f8@intel.com>
Date: Thu, 11 Feb 2021 14:25:41 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.6.0
MIME-Version: 1.0
In-Reply-To: <20210210233946.7602-1-chris@chris-wilson.co.uk>
Content-Language: en-GB
Subject: Re: [Intel-gfx] [PATCH] drm/i915: Refine VT-d scanout workaround
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gMTAvMDIvMjAyMSAyMzozOSwgQ2hyaXMgV2lsc29uIHdyb3RlOgo+IFZULWQgbWF5IGNhdXNl
IG92ZXJmZXRjaCBvZiB0aGUgc2Nhbm91dCBQVEUsIGJvdGggYmVmb3JlIGFuZCBhZnRlciB0aGUK
PiB2bWEgKGRlcGVuZGluZyBvbiB0aGUgc2Nhbm91dCBvcmllbnRhdGlvbikuIGJzcGVjIHJlY29t
bWVuZHMgdGhhdCB3ZQo+IHByb3ZpZGUgYSB0aWxlLXJvdyBpbiBlaXRoZXIgZGlyZWN0aW9ucywg
YW5kIHN1Z2dlc3RzIHVzaW5nIDE2MCBQVEUsCj4gd2FybmluZyB0aGF0IHRoZSBhY2Nlc3NlcyB3
aWxsIHdyYXAgYXJvdW5kIHRoZSBlbmRzIG9mIHRoZSBHR1RULgo+IEN1cnJlbnRseSwgd2UgZmls
bCB0aGUgZW50aXJlIEdHVFQgd2l0aCBzY3JhdGNoIHBhZ2VzIHdoZW4gdXNpbmcgVlQtZCB0bwo+
IGFsd2F5cyBlbnN1cmUgdGhlcmUgYXJlIHZhbGlkIGVudHJpZXMgYXJvdW5kIGV2ZXJ5IHZtYSwg
aW5jbHVkaW5nCj4gc2Nhbm91dC4gSG93ZXZlciwgd3JpdGluZyBldmVyeSBQVEUgaXMgc2xvdyBh
cyBvbiByZWNlbnQgZGV2aWNlcyB3ZQo+IHBlcmZvcm0gOE1pQiBvZiB1bmNhY2hlZCB3cml0ZXMs
IGluY3VycmluZyBhbiBleHRyYSAxMDBtcyBkdXJpbmcgcmVzdW1lLgo+IAo+IElmIGluc3RlYWQg
d2UgZm9jdXMgb24gb25seSBwdXR0aW5nIGd1YXJkIHBhZ2VzIGFyb3VuZCBzY2Fub3V0LCB3ZSBj
YW4KPiBhdm9pZCB0b3VjaGluZyB0aGUgd2hvbGUgR0dUVC4gVG8gYXZvaWQgaGF2aW5nIHRvIGlu
dHJvZHVjZSBleHRyYSBub2Rlcwo+IGFyb3VuZCBlYWNoIHNjYW5vdXQgdm1hLCB3ZSBhZGp1c3Qg
dGhlIHNjYW5vdXQgZHJtX21tX25vZGUgdG8gYmUgc21hbGxlcgo+IHRoYW4gdGhlIGFsbG9jYXRl
ZCBzcGFjZSwgYW5kIGZpeHVwIHRoZSBleHRyYSBQVEUgZHVyaW5nIGRtYSBiaW5kaW5nLgo+IAo+
IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+
IENjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgo+IENj
OiBNYXR0aGV3IEF1bGQgPG1hdHRoZXcuYXVsZEBpbnRlbC5jb20+Cj4gLS0tCj4gICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG9tYWluLmMgfCAgMyArKwo+ICAgZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ2d0dC5jICAgICAgIHwgMzcgKysrKysrKystLS0tLS0tLS0t
LS0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmggICAgICAgIHwgIDEg
Kwo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYyAgICAgICAgICAgIHwgMjMgKysr
KysrKysrKysrKysKPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hX3R5cGVzLmggICAg
ICB8ICAxICsKPiAgIDUgZmlsZXMgY2hhbmdlZCwgNDEgaW5zZXJ0aW9ucygrKSwgMjQgZGVsZXRp
b25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9kb21haW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kb21haW4uYwo+
IGluZGV4IDA0NzhiMDY5YzIwMi4uOWYyY2NjMjU1Y2ExIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kb21haW4uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9kb21haW4uYwo+IEBAIC0zNDUsNiArMzQ1LDkgQEAgaTkxNV9n
ZW1fb2JqZWN0X3Bpbl90b19kaXNwbGF5X3BsYW5lKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmosCj4gICAJaWYgKHJldCkKPiAgIAkJZ290byBlcnI7Cj4gICAKPiArCWlmIChpbnRlbF9z
Y2Fub3V0X25lZWRzX3Z0ZF93YShpOTE1KSkKPiArCQlmbGFncyB8PSBQSU5fVlREOwo+ICsKPiAg
IAkvKgo+ICAgCSAqIEFzIHRoZSB1c2VyIG1heSBtYXAgdGhlIGJ1ZmZlciBvbmNlIHBpbm5lZCBp
biB0aGUgZGlzcGxheSBwbGFuZQo+ICAgCSAqIChlLmcuIGxpYmttcyBmb3IgdGhlIGJvb3R1cCBz
cGxhc2gpLCB3ZSBoYXZlIHRvIGVuc3VyZSB0aGF0IHdlCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2dndHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2dndHQuYwo+IGluZGV4IGIwYjhkZWQ4MzRmMC4uNDE2Zjc3ZjQ4NTYxIDEwMDY0NAo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dndHQuYwo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2dndHQuYwo+IEBAIC0yMzgsNiArMjM4LDExIEBAIHN0YXRp
YyB2b2lkIGdlbjhfZ2d0dF9pbnNlcnRfZW50cmllcyhzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNl
ICp2bSwKPiAgIAo+ICAgCWd0ZSA9IChnZW44X3B0ZV90IF9faW9tZW0gKilnZ3R0LT5nc207Cj4g
ICAJZ3RlICs9IHZtYS0+bm9kZS5zdGFydCAvIEk5MTVfR1RUX1BBR0VfU0laRTsKPiArCj4gKwll
bmQgPSBndGUgLSB2bWEtPmd1YXJkIC8gSTkxNV9HVFRfUEFHRV9TSVpFOwo+ICsJd2hpbGUgKGVu
ZCA8IGd0ZSkKPiArCQlnZW44X3NldF9wdGUoZW5kKyssIHZtLT5zY3JhdGNoWzBdLT5lbmNvZGUp
Owo+ICsKPiAgIAllbmQgPSBndGUgKyB2bWEtPm5vZGUuc2l6ZSAvIEk5MTVfR1RUX1BBR0VfU0la
RTsKPiAgIAo+ICAgCWZvcl9lYWNoX3NndF9kYWRkcihhZGRyLCBpdGVyLCB2bWEtPnBhZ2VzKQo+
IEBAIC0yNDUsNiArMjUwLDcgQEAgc3RhdGljIHZvaWQgZ2VuOF9nZ3R0X2luc2VydF9lbnRyaWVz
KHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+ICAgCUdFTV9CVUdfT04oZ3RlID4gZW5k
KTsKPiAgIAo+ICAgCS8qIEZpbGwgdGhlIGFsbG9jYXRlZCBidXQgInVudXNlZCIgc3BhY2UgYmV5
b25kIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlciAqLwo+ICsJZW5kICs9IHZtYS0+Z3VhcmQgLyBJOTE1
X0dUVF9QQUdFX1NJWkU7Cj4gICAJd2hpbGUgKGd0ZSA8IGVuZCkKPiAgIAkJZ2VuOF9zZXRfcHRl
KGd0ZSsrLCB2bS0+c2NyYXRjaFswXS0+ZW5jb2RlKTsKPiAgIAo+IEBAIC0yODksNiArMjk1LDEx
IEBAIHN0YXRpYyB2b2lkIGdlbjZfZ2d0dF9pbnNlcnRfZW50cmllcyhzdHJ1Y3QgaTkxNV9hZGRy
ZXNzX3NwYWNlICp2bSwKPiAgIAo+ICAgCWd0ZSA9IChnZW42X3B0ZV90IF9faW9tZW0gKilnZ3R0
LT5nc207Cj4gICAJZ3RlICs9IHZtYS0+bm9kZS5zdGFydCAvIEk5MTVfR1RUX1BBR0VfU0laRTsK
PiArCj4gKwllbmQgPSBndGUgLSB2bWEtPmd1YXJkIC8gSTkxNV9HVFRfUEFHRV9TSVpFOwo+ICsJ
d2hpbGUgKGVuZCA8IGd0ZSkKPiArCQlnZW44X3NldF9wdGUoZW5kKyssIHZtLT5zY3JhdGNoWzBd
LT5lbmNvZGUpOwo+ICsKPiAgIAllbmQgPSBndGUgKyB2bWEtPm5vZGUuc2l6ZSAvIEk5MTVfR1RU
X1BBR0VfU0laRTsKPiAgIAo+ICAgCWZvcl9lYWNoX3NndF9kYWRkcihhZGRyLCBpdGVyLCB2bWEt
PnBhZ2VzKQo+IEBAIC0yOTYsNiArMzA3LDcgQEAgc3RhdGljIHZvaWQgZ2VuNl9nZ3R0X2luc2Vy
dF9lbnRyaWVzKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+ICAgCUdFTV9CVUdfT04o
Z3RlID4gZW5kKTsKPiAgIAo+ICAgCS8qIEZpbGwgdGhlIGFsbG9jYXRlZCBidXQgInVudXNlZCIg
c3BhY2UgYmV5b25kIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlciAqLwo+ICsJZW5kICs9IHZtYS0+Z3Vh
cmQgLyBJOTE1X0dUVF9QQUdFX1NJWkU7Cj4gICAJd2hpbGUgKGd0ZSA8IGVuZCkKPiAgIAkJaW93
cml0ZTMyKHZtLT5zY3JhdGNoWzBdLT5lbmNvZGUsIGd0ZSsrKTsKPiAgIAo+IEBAIC0zMTEsMjcg
KzMyMyw2IEBAIHN0YXRpYyB2b2lkIG5vcF9jbGVhcl9yYW5nZShzdHJ1Y3QgaTkxNV9hZGRyZXNz
X3NwYWNlICp2bSwKPiAgIHsKPiAgIH0KPiAgIAo+IC1zdGF0aWMgdm9pZCBnZW44X2dndHRfY2xl
YXJfcmFuZ2Uoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0sCj4gLQkJCQkgIHU2NCBzdGFy
dCwgdTY0IGxlbmd0aCkKPiAtewo+IC0Jc3RydWN0IGk5MTVfZ2d0dCAqZ2d0dCA9IGk5MTVfdm1f
dG9fZ2d0dCh2bSk7Cj4gLQl1bnNpZ25lZCBpbnQgZmlyc3RfZW50cnkgPSBzdGFydCAvIEk5MTVf
R1RUX1BBR0VfU0laRTsKPiAtCXVuc2lnbmVkIGludCBudW1fZW50cmllcyA9IGxlbmd0aCAvIEk5
MTVfR1RUX1BBR0VfU0laRTsKPiAtCWNvbnN0IGdlbjhfcHRlX3Qgc2NyYXRjaF9wdGUgPSB2bS0+
c2NyYXRjaFswXS0+ZW5jb2RlOwo+IC0JZ2VuOF9wdGVfdCBfX2lvbWVtICpndHRfYmFzZSA9Cj4g
LQkJKGdlbjhfcHRlX3QgX19pb21lbSAqKWdndHQtPmdzbSArIGZpcnN0X2VudHJ5Owo+IC0JY29u
c3QgaW50IG1heF9lbnRyaWVzID0gZ2d0dF90b3RhbF9lbnRyaWVzKGdndHQpIC0gZmlyc3RfZW50
cnk7Cj4gLQlpbnQgaTsKPiAtCj4gLQlpZiAoV0FSTihudW1fZW50cmllcyA+IG1heF9lbnRyaWVz
LAo+IC0JCSAiRmlyc3QgZW50cnkgPSAlZDsgTnVtIGVudHJpZXMgPSAlZCAobWF4PSVkKVxuIiwK
PiAtCQkgZmlyc3RfZW50cnksIG51bV9lbnRyaWVzLCBtYXhfZW50cmllcykpCj4gLQkJbnVtX2Vu
dHJpZXMgPSBtYXhfZW50cmllczsKPiAtCj4gLQlmb3IgKGkgPSAwOyBpIDwgbnVtX2VudHJpZXM7
IGkrKykKPiAtCQlnZW44X3NldF9wdGUoJmd0dF9iYXNlW2ldLCBzY3JhdGNoX3B0ZSk7Cj4gLX0K
PiAtCj4gICBzdGF0aWMgdm9pZCBieHRfdnRkX2dndHRfd2Eoc3RydWN0IGk5MTVfYWRkcmVzc19z
cGFjZSAqdm0pCj4gICB7Cj4gICAJLyoKPiBAQCAtODk4LDggKzg4OSw2IEBAIHN0YXRpYyBpbnQg
Z2VuOF9nbWNoX3Byb2JlKHN0cnVjdCBpOTE1X2dndHQgKmdndHQpCj4gICAJZ2d0dC0+dm0uY2xl
YW51cCA9IGdlbjZfZ21jaF9yZW1vdmU7Cj4gICAJZ2d0dC0+dm0uaW5zZXJ0X3BhZ2UgPSBnZW44
X2dndHRfaW5zZXJ0X3BhZ2U7Cj4gICAJZ2d0dC0+dm0uY2xlYXJfcmFuZ2UgPSBub3BfY2xlYXJf
cmFuZ2U7Cj4gLQlpZiAoaW50ZWxfc2Nhbm91dF9uZWVkc192dGRfd2EoaTkxNSkpCj4gLQkJZ2d0
dC0+dm0uY2xlYXJfcmFuZ2UgPSBnZW44X2dndHRfY2xlYXJfcmFuZ2U7Cj4gICAKPiAgIAlnZ3R0
LT52bS5pbnNlcnRfZW50cmllcyA9IGdlbjhfZ2d0dF9pbnNlcnRfZW50cmllczsKPiAgIAo+IEBA
IC0xMDQ1LDcgKzEwMzQsNyBAQCBzdGF0aWMgaW50IGdlbjZfZ21jaF9wcm9iZShzdHJ1Y3QgaTkx
NV9nZ3R0ICpnZ3R0KQo+ICAgCWdndHQtPnZtLmFsbG9jX3B0X2RtYSA9IGFsbG9jX3B0X2RtYTsK
PiAgIAo+ICAgCWdndHQtPnZtLmNsZWFyX3JhbmdlID0gbm9wX2NsZWFyX3JhbmdlOwo+IC0JaWYg
KCFIQVNfRlVMTF9QUEdUVChpOTE1KSB8fCBpbnRlbF9zY2Fub3V0X25lZWRzX3Z0ZF93YShpOTE1
KSkKPiArCWlmICghSEFTX0ZVTExfUFBHVFQoaTkxNSkpCj4gICAJCWdndHQtPnZtLmNsZWFyX3Jh
bmdlID0gZ2VuNl9nZ3R0X2NsZWFyX3JhbmdlOwo+ICAgCWdndHQtPnZtLmluc2VydF9wYWdlID0g
Z2VuNl9nZ3R0X2luc2VydF9wYWdlOwo+ICAgCWdndHQtPnZtLmluc2VydF9lbnRyaWVzID0gZ2Vu
Nl9nZ3R0X2luc2VydF9lbnRyaWVzOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dlbV9ndHQuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5oCj4g
aW5kZXggYzliMGVlNWUxZDIzLi44YTJkZmM3MTQ0Y2YgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2dlbV9ndHQuaAo+IEBAIC00MSw2ICs0MSw3IEBAIGludCBpOTE1X2dlbV9ndHRfaW5zZXJ0
KHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+ICAgI2RlZmluZSBQSU5fSElHSAkJQklU
X1VMTCg1KQo+ICAgI2RlZmluZSBQSU5fT0ZGU0VUX0JJQVMJCUJJVF9VTEwoNikKPiAgICNkZWZp
bmUgUElOX09GRlNFVF9GSVhFRAlCSVRfVUxMKDcpCj4gKyNkZWZpbmUgUElOX1ZURAkJCUJJVF9V
TEwoOCkKPiAgIAo+ICAgI2RlZmluZSBQSU5fR0xPQkFMCQlCSVRfVUxMKDEwKSAvKiBJOTE1X1ZN
QV9HTE9CQUxfQklORCAqLwo+ICAgI2RlZmluZSBQSU5fVVNFUgkJQklUX1VMTCgxMSkgLyogSTkx
NV9WTUFfTE9DQUxfQklORCAqLwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3ZtYS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYwo+IGluZGV4IGNhYTli
MDQxNjE2Yi4uZGNjZDM2ZmYxYTZkIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfdm1hLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jCj4gQEAg
LTM4LDYgKzM4LDggQEAKPiAgICNpbmNsdWRlICJpOTE1X3RyYWNlLmgiCj4gICAjaW5jbHVkZSAi
aTkxNV92bWEuaCIKPiAgIAo+ICsjZGVmaW5lIFZURF9HVUFSRCByb3VuZHVwX3Bvd19vZl90d28o
MTYwICogU1pfNEspIC8qIDE2MCBQVEUgcGFkZGluZyAqLwo+ICsKPiAgIHN0YXRpYyBzdHJ1Y3Qg
aTkxNV9nbG9iYWxfdm1hIHsKPiAgIAlzdHJ1Y3QgaTkxNV9nbG9iYWwgYmFzZTsKPiAgIAlzdHJ1
Y3Qga21lbV9jYWNoZSAqc2xhYl92bWFzOwo+IEBAIC01NTIsNiArNTU0LDkgQEAgYm9vbCBpOTE1
X3ZtYV9taXNwbGFjZWQoY29uc3Qgc3RydWN0IGk5MTVfdm1hICp2bWEsCj4gICAJICAgIHZtYS0+
bm9kZS5zdGFydCAhPSAoZmxhZ3MgJiBQSU5fT0ZGU0VUX01BU0spKQo+ICAgCQlyZXR1cm4gdHJ1
ZTsKPiAgIAo+ICsJaWYgKGZsYWdzICYgUElOX1ZURCAmJiB2bWEtPmd1YXJkIDwgVlREX0dVQVJE
KQo+ICsJCXJldHVybiB0cnVlOwo+ICsKPiAgIAlyZXR1cm4gZmFsc2U7Cj4gICB9Cj4gICAKPiBA
QCAtNjM3LDYgKzY0MiwxMyBAQCBpOTE1X3ZtYV9pbnNlcnQoc3RydWN0IGk5MTVfdm1hICp2bWEs
IHU2NCBzaXplLCB1NjQgYWxpZ25tZW50LCB1NjQgZmxhZ3MpCj4gICAJCQkJICBhbGlnbm1lbnQs
IHZtYS0+ZmVuY2VfYWxpZ25tZW50KTsKPiAgIAl9Cj4gICAKPiArCS8qIFZULWQgcmVxdWlyZXMg
cGFkZGluZyBiZWZvcmUvYWZ0ZXIgdGhlIHZtYSAqLwo+ICsJaWYgKGZsYWdzICYgUElOX1ZURCkg
ewo+ICsJCWFsaWdubWVudCA9IG1heF90KHR5cGVvZihhbGlnbm1lbnQpLCBhbGlnbm1lbnQsIFZU
RF9HVUFSRCk7Cj4gKwkJdm1hLT5ndWFyZCA9IGFsaWdubWVudDsKPiArCQlzaXplICs9IDIgKiB2
bWEtPmd1YXJkOwo+ICsJfQo+ICsKPiAgIAlHRU1fQlVHX09OKCFJU19BTElHTkVEKHNpemUsIEk5
MTVfR1RUX1BBR0VfU0laRSkpOwo+ICAgCUdFTV9CVUdfT04oIUlTX0FMSUdORUQoYWxpZ25tZW50
LCBJOTE1X0dUVF9NSU5fQUxJR05NRU5UKSk7Cj4gICAJR0VNX0JVR19PTighaXNfcG93ZXJfb2Zf
MihhbGlnbm1lbnQpKTsKPiBAQCAtNzI1LDYgKzczNywxMSBAQCBpOTE1X3ZtYV9pbnNlcnQoc3Ry
dWN0IGk5MTVfdm1hICp2bWEsIHU2NCBzaXplLCB1NjQgYWxpZ25tZW50LCB1NjQgZmxhZ3MpCj4g
ICAKPiAgIAlsaXN0X2FkZF90YWlsKCZ2bWEtPnZtX2xpbmssICZ2bWEtPnZtLT5ib3VuZF9saXN0
KTsKPiAgIAo+ICsJaWYgKGZsYWdzICYgUElOX1ZURCkgewo+ICsJCXZtYS0+bm9kZS5zdGFydCAr
PSB2bWEtPmd1YXJkOwo+ICsJCXZtYS0+bm9kZS5zaXplIC09IDIgKiB2bWEtPmd1YXJkOwo+ICsJ
fQo+ICsKClNvIHdlIGFkanVzdCB0aGUgbm9kZSB0byBiZSB0d2ljZSBhcyBsYXJnZSwgcmVzZXJ2
ZSBpdCBpbiB0aGUgbW0sIGFuZCAKdGhlbiBzaHJpbmsgaXQgYWdhaW4gaGVyZS4gU2VlbXMgYSBs
aXR0bGUgc2NhcnkgdG8gbW9kaWZ5IApub2RlLnN0YXJ0L25vZGUuc2l6ZSBhZnRlciBpbnNlcnRp
b24/CgpKdXN0IHdvbmRlcmluZyBpZiB0aGlzIG1pZ2h0IHVwc2V0IHNvbWV0aGluZyBsaWtlIGV2
aWN0X2Zvcl9ub2RlLCB3aGVyZSAKd2UgaW5zcGVjdCB0aGUgYWxsb2NhdGVkIG5vZGVzIG92ZXIg
c29tZSByYW5nZSwgcmF0aGVyIHRoYW4gaG9sZXMsIGFuZCAKc2luY2Ugd2Ugc2hydW5rIHRoZSBu
b2RlIGl0IG1pZ2h0IGdldCBjb25mdXNlZCBpbnRvIHRoaW5raW5nIHRoZSBwYWRkaW5nIAppcyBh
Y3R1YWxseSBmcmVlIHNwYWNlLiBPciBtYXliZSB0aGF0IGRvZXNuJ3QgcmVhbGx5IG1hdHRlciBt
dWNoIGZvciB0aGUgCkdHVFQ/CgoKPiAgIAlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+IEBAIC03MzQs
NiArNzUxLDEyIEBAIGk5MTVfdm1hX2RldGFjaChzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKPiAgIAlH
RU1fQlVHX09OKCFkcm1fbW1fbm9kZV9hbGxvY2F0ZWQoJnZtYS0+bm9kZSkpOwo+ICAgCUdFTV9C
VUdfT04oaTkxNV92bWFfaXNfYm91bmQodm1hLCBJOTE1X1ZNQV9HTE9CQUxfQklORCB8IEk5MTVf
Vk1BX0xPQ0FMX0JJTkQpKTsKPiAgIAo+ICsJaWYgKHZtYS0+Z3VhcmQpIHsKPiArCQl2bWEtPm5v
ZGUuc3RhcnQgLT0gdm1hLT5ndWFyZDsKPiArCQl2bWEtPm5vZGUuc2l6ZSArPSAyICogdm1hLT5n
dWFyZDsKPiArCQl2bWEtPmd1YXJkID0gMDsKPiArCX0KPiArCj4gICAJLyoKPiAgIAkgKiBBbmQg
ZmluYWxseSBub3cgdGhlIG9iamVjdCBpcyBjb21wbGV0ZWx5IGRlY291cGxlZCBmcm9tIHRoaXMK
PiAgIAkgKiB2bWEsIHdlIGNhbiBkcm9wIGl0cyBob2xkIG9uIHRoZSBiYWNraW5nIHN0b3JhZ2Ug
YW5kIGFsbG93Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hX3R5
cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYV90eXBlcy5oCj4gaW5kZXggZjVj
Yjg0OGI3YTdlLi5iYWZlYzRlMGIwNDIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV92bWFfdHlwZXMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1h
X3R5cGVzLmgKPiBAQCAtMTkwLDYgKzE5MCw3IEBAIHN0cnVjdCBpOTE1X3ZtYSB7Cj4gICAKPiAg
IAl1MzIgZmVuY2Vfc2l6ZTsKPiAgIAl1MzIgZmVuY2VfYWxpZ25tZW50Owo+ICsJdTMyIGd1YXJk
Owo+ICAgCj4gICAJLyoqCj4gICAJICogQ291bnQgb2YgdGhlIG51bWJlciBvZiB0aW1lcyB0aGlz
IHZtYSBoYXMgYmVlbiBvcGVuZWQgYnkgZGlmZmVyZW50Cj4gCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwt
Z2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 19F8058C3D
	for <lists+intel-gfx@lfdr.de>; Thu, 27 Jun 2019 22:57:24 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BB61B6E858;
	Thu, 27 Jun 2019 20:57:18 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 66B416E843
 for <intel-gfx@lists.freedesktop.org>; Thu, 27 Jun 2019 20:56:57 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 27 Jun 2019 13:56:57 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,425,1557212400"; d="scan'208";a="164455675"
Received: from unknown (HELO mwahaha-bdw.ger.corp.intel.com) ([10.252.4.227])
 by fmsmga007.fm.intel.com with ESMTP; 27 Jun 2019 13:56:56 -0700
From: Matthew Auld <matthew.auld@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 27 Jun 2019 21:56:14 +0100
Message-Id: <20190627205633.1143-19-matthew.auld@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190627205633.1143-1-matthew.auld@intel.com>
References: <20190627205633.1143-1-matthew.auld@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 18/37] drm/i915: enumerate and init each
 supported region
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogQWJkaWVsIEphbnVsZ3VlIDxhYmRpZWwuamFudWxndWVAbGludXguaW50ZWwuY29tPgoK
Tm90aGluZyB0byBlbnVtZXJhdGUgeWV0Li4uCgpTaWduZWQtb2ZmLWJ5OiBBYmRpZWwgSmFudWxn
dWUgPGFiZGllbC5qYW51bGd1ZUBsaW51eC5pbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IE1hdHRo
ZXcgQXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KQ2M6IEpvb25hcyBMYWh0aW5lbiA8am9v
bmFzLmxhaHRpbmVuQGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2Rydi5oICAgICAgICAgICAgICAgfCAgMyArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dlbV9ndHQuYyAgICAgICAgICAgfCA3MyArKysrKysrKysrKysrKysrKy0tCiAuLi4vZ3B1L2Ry
bS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYyAgfCAgNiArKwogMyBmaWxlcyBjaGFu
Z2VkLCA3NiBpbnNlcnRpb25zKCspLCA2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5oCmluZGV4IDdjYmRmZmUzZjEyOS4uNDI2NzRhNDFlNDY5IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmgKQEAgLTI2MDcsNiArMjYwNyw5IEBAIGludCBfX211c3RfY2hlY2sgaTkxNV9nZW1fZXZp
Y3RfZm9yX25vZGUoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0sCiAJCQkJCSB1bnNpZ25l
ZCBpbnQgZmxhZ3MpOwogaW50IGk5MTVfZ2VtX2V2aWN0X3ZtKHN0cnVjdCBpOTE1X2FkZHJlc3Nf
c3BhY2UgKnZtKTsKIAordm9pZCBpOTE1X2dlbV9jbGVhbnVwX21lbW9yeV9yZWdpb25zKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKK2ludCBpOTE1X2dlbV9pbml0X21lbW9yeV9yZWdp
b25zKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKKwogLyogaTkxNV9nZW1fc3RvbGVu
LmMgKi8KIGludCBpOTE1X2dlbV9zdG9sZW5faW5zZXJ0X25vZGUoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2LAogCQkJCXN0cnVjdCBkcm1fbW1fbm9kZSAqbm9kZSwgdTY0IHNpemUs
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCmluZGV4IGZmMWQ1MDA4YTI1Ni4uZTRmODEx
ZmRhZWRjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYwpAQCAtMjkwMiw2ICsyOTAy
LDcxIEBAIGludCBpOTE1X2luaXRfZ2d0dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkK
IAlyZXR1cm4gMDsKIH0KIAordm9pZCBpOTE1X2dlbV9jbGVhbnVwX21lbW9yeV9yZWdpb25zKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQoreworCWludCBpOworCisJaTkxNV9nZW1fY2xl
YW51cF9zdG9sZW4oaTkxNSk7CisKKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShpOTE1LT5y
ZWdpb25zKTsgKytpKQl7CisJCXN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICpyZWdpb24gPSBp
OTE1LT5yZWdpb25zW2ldOworCisJCWlmIChyZWdpb24pCisJCQlpbnRlbF9tZW1vcnlfcmVnaW9u
X2Rlc3Ryb3kocmVnaW9uKTsKKwl9Cit9CisKK2ludCBpOTE1X2dlbV9pbml0X21lbW9yeV9yZWdp
b25zKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQoreworCWludCBlcnIsIGk7CisKKwkv
KiBBbGwgcGxhdGZvcm1zIGN1cnJlbnRseSBoYXZlIHN5c3RlbSBtZW1vcnkgKi8KKwlHRU1fQlVH
X09OKCFIQVNfUkVHSU9OKGk5MTUsIFJFR0lPTl9TTUVNKSk7CisKKwkvKgorCSAqIEluaXRpYWxp
c2Ugc3RvbGVuIGVhcmx5IHNvIHRoYXQgd2UgbWF5IHJlc2VydmUgcHJlYWxsb2NhdGVkCisJICog
b2JqZWN0cyBmb3IgdGhlIEJJT1MgdG8gS01TIHRyYW5zaXRpb24uCisJICovCisJLyogWFhYOiBz
dG9sZW4gd2lsbCBiZWNvbWUgYSByZWdpb24gYXQgc29tZSBwb2ludCAqLworCWVyciA9IGk5MTVf
Z2VtX2luaXRfc3RvbGVuKGk5MTUpOworCWlmIChlcnIpCisJCXJldHVybiBlcnI7CisKKwlmb3Ig
KGkgPSAwOyBpIDwgQVJSQVlfU0laRShpbnRlbF9yZWdpb25fbWFwKTsgaSsrKSB7CisJCXN0cnVj
dCBpbnRlbF9tZW1vcnlfcmVnaW9uICptZW0gPSBOVUxMOworCQl1MzIgdHlwZTsKKworCQlpZiAo
IUhBU19SRUdJT04oaTkxNSwgQklUKGkpKSkKKwkJCWNvbnRpbnVlOworCisJCXR5cGUgPSBNRU1P
UllfVFlQRV9GUk9NX1JFR0lPTihpbnRlbF9yZWdpb25fbWFwW2ldKTsKKwkJc3dpdGNoICh0eXBl
KSB7CisJCWRlZmF1bHQ6CisJCQlicmVhazsKKwkJfQorCisJCWlmIChJU19FUlIobWVtKSkgewor
CQkJZXJyID0gUFRSX0VSUihtZW0pOworCQkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gc2V0dXAgcmVn
aW9uKCVkKSB0eXBlPSVkXG4iLCBlcnIsIHR5cGUpOworCQkJZ290byBvdXRfY2xlYW51cDsKKwkJ
fQorCisJCWlmIChtZW0pIHsKKwkJCW1lbS0+aWQgPSBpbnRlbF9yZWdpb25fbWFwW2ldOworCQkJ
bWVtLT50eXBlID0gdHlwZTsKKwkJCW1lbS0+aW5zdGFuY2UgPSBNRU1PUllfSU5TVEFOQ0VfRlJP
TV9SRUdJT04oaW50ZWxfcmVnaW9uX21hcFtpXSk7CisJCX0KKworCQlpOTE1LT5yZWdpb25zW2ld
ID0gbWVtOworCX0KKworCXJldHVybiAwOworCitvdXRfY2xlYW51cDoKKwlpOTE1X2dlbV9jbGVh
bnVwX21lbW9yeV9yZWdpb25zKGk5MTUpOworCXJldHVybiBlcnI7Cit9CisKIHN0YXRpYyB2b2lk
IGdndHRfY2xlYW51cF9odyhzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0KQogewogCXN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1ID0gZ2d0dC0+dm0uaTkxNTsKQEAgLTI5NTAsNyArMzAxNSw3IEBA
IHZvaWQgaTkxNV9nZ3R0X2NsZWFudXBfaHcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUp
CiAJCV9fcGFnZXZlY19yZWxlYXNlKHB2ZWMpOwogCX0KIAotCWk5MTVfZ2VtX2NsZWFudXBfc3Rv
bGVuKGk5MTUpOworCWk5MTVfZ2VtX2NsZWFudXBfbWVtb3J5X3JlZ2lvbnMoaTkxNSk7CiB9CiAK
IHN0YXRpYyB1bnNpZ25lZCBpbnQgZ2VuNl9nZXRfdG90YWxfZ3R0X3NpemUodTE2IHNuYl9nbWNo
X2N0bCkKQEAgLTM2MDAsMTEgKzM2NjUsNyBAQCBpbnQgaTkxNV9nZ3R0X2luaXRfaHcoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCWlmIChyZXQpCiAJCXJldHVybiByZXQ7CiAK
LQkvKgotCSAqIEluaXRpYWxpc2Ugc3RvbGVuIGVhcmx5IHNvIHRoYXQgd2UgbWF5IHJlc2VydmUg
cHJlYWxsb2NhdGVkCi0JICogb2JqZWN0cyBmb3IgdGhlIEJJT1MgdG8gS01TIHRyYW5zaXRpb24u
Ci0JICovCi0JcmV0ID0gaTkxNV9nZW1faW5pdF9zdG9sZW4oZGV2X3ByaXYpOworCXJldCA9IGk5
MTVfZ2VtX2luaXRfbWVtb3J5X3JlZ2lvbnMoZGV2X3ByaXYpOwogCWlmIChyZXQpCiAJCWdvdG8g
b3V0X2d0dF9jbGVhbnVwOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvbW9ja19nZW1fZGV2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMv
bW9ja19nZW1fZGV2aWNlLmMKaW5kZXggZjhiNDgzMDRmY2VjLi5kZjA3YTBiZDA4OWQgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19nZW1fZGV2aWNlLmMKQEAg
LTgyLDYgKzgyLDggQEAgc3RhdGljIHZvaWQgbW9ja19kZXZpY2VfcmVsZWFzZShzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2KQogCiAJaTkxNV9nZW1mc19maW5pKGk5MTUpOwogCisJaTkxNV9nZW1fY2xl
YW51cF9tZW1vcnlfcmVnaW9ucyhpOTE1KTsKKwogCWRybV9tb2RlX2NvbmZpZ19jbGVhbnVwKCZp
OTE1LT5kcm0pOwogCiAJZHJtX2Rldl9maW5pKCZpOTE1LT5kcm0pOwpAQCAtMjI1LDYgKzIyNywx
MCBAQCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqbW9ja19nZW1fZGV2aWNlKHZvaWQpCiAKIAlX
QVJOX09OKGk5MTVfZ2VtZnNfaW5pdChpOTE1KSk7CiAKKwllcnIgPSBpOTE1X2dlbV9pbml0X21l
bW9yeV9yZWdpb25zKGk5MTUpOworCWlmIChlcnIpCisJCWdvdG8gZXJyX2NvbnRleHQ7CisKIAly
ZXR1cm4gaTkxNTsKIAogZXJyX2NvbnRleHQ6Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50
ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

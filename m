Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 01E4C2E1BA3
	for <lists+intel-gfx@lfdr.de>; Wed, 23 Dec 2020 12:12:43 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0D0526E93A;
	Wed, 23 Dec 2020 11:12:17 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (unknown [77.68.26.236])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C28026E8FF
 for <intel-gfx@lists.freedesktop.org>; Wed, 23 Dec 2020 11:12:05 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 23412187-1500050 
 for multiple; Wed, 23 Dec 2020 11:11:29 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 23 Dec 2020 11:10:35 +0000
Message-Id: <20201223111126.3338-11-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20201223111126.3338-1-chris@chris-wilson.co.uk>
References: <20201223111126.3338-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 11/62] drm/i915/gt: Consolidate the CS timestamp
 clocks
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Chris Wilson <chris@chris-wilson.co.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UHVsbCB0aGUgR1QgY2xvY2sgaW5mb3JtYXRpb24gW3VzZWQgdG8gZGVyaXZlIENTIHRpbWVzdGFt
cHMgYW5kIFBNCmludGVydmFsXSB1bmRlciB0aGUgR1Qgc28gdGhhdCBpcyBpdCBsb2NhbCB0byB0
aGUgdXNlcnMuIEluIGRvaW5nIHNvLCB3ZQpjb25zb2xpZGF0ZSB0aGUgdHdvIHJlZmVyZW5jZXMg
Zm9yIHRoZSBzYW1lIGluZm9ybWF0aW9uLCBvZiB3aGljaCB0aGUKcnVudGltZS1pbmZvIHRvb2sg
bm90ZSBvZiBhIHBvdGVudGlhbCBjbG9jayBzb3VyY2Ugb3ZlcnJpZGUgYW5kIHNjYWxpbmcKZmFj
dG9ycy4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNv
LnVrPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2RlYnVnZnNfZ3RfcG0uYyAgICAgICB8
ICAyMCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5oICAgICAgIHwg
ICA2ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5jICAgICAgICAgICAgfCAg
IDQgKy0KIC4uLi9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfY2xvY2tfdXRpbHMuYyAgICB8IDE5
NyArKysrKysrKysrKysrKy0tLS0KIC4uLi9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfY2xvY2tf
dXRpbHMuaCAgICB8ICAgOCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlw
ZXMuaCAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2VuZ2lu
ZV9wbS5jICB8ICAgNiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZ3RfcG0u
YyAgICAgIHwgICA4ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyAgICAg
ICAgICAgfCAgMTkgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAg
ICAgICB8ICAxMiAtLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jICAgICAg
ICAgIHwgICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jICAgICAg
ICAgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jICAgICAgICAgICAg
ICB8ICAxMSArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uYyAgICAg
IHwgMTU3IC0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2Vf
aW5mby5oICAgICAgfCAgIDMgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVf
cGVyZi5jICAgIHwgICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9y
ZXF1ZXN0LmMgfCAgIDMgKy0KIDE3IGZpbGVzIGNoYW5nZWQsIDIwNSBpbnNlcnRpb25zKCspLCAy
NTYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvZGVi
dWdmc19ndF9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvZGVidWdmc19ndF9wbS5jCmlu
ZGV4IDg5NzU3MTdhY2UwNi4uYTBmMTBlOGJiZDIxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9kZWJ1Z2ZzX2d0X3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
ZGVidWdmc19ndF9wbS5jCkBAIC00MDQsMzQgKzQwNCwzNCBAQCBzdGF0aWMgaW50IGZyZXF1ZW5j
eV9zaG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqdW51c2VkKQogCQlzZXFfcHJpbnRmKG0s
ICJSUERFQ0xJTUlUOiAweCUwOHhcbiIsIHJwZGVjbGltaXQpOwogCQlzZXFfcHJpbnRmKG0sICJS
UE5TV1JFUTogJWRNSHpcbiIsIHJlcWYpOwogCQlzZXFfcHJpbnRmKG0sICJDQUdGOiAlZE1Ielxu
IiwgY2FnZik7Ci0JCXNlcV9wcmludGYobSwgIlJQIENVUiBVUCBFSTogJWQgKCVkbnMpXG4iLAor
CQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgVVAgRUk6ICVkICglbGxkbnMpXG4iLAogCQkJICAgcnBj
dXJ1cGVpLAogCQkJICAgaW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoZ3QsIHJwY3VydXBlaSkp
OwotCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgVVA6ICVkICglZG5zKVxuIiwKKwkJc2VxX3ByaW50
ZihtLCAiUlAgQ1VSIFVQOiAlZCAoJWxsZG5zKVxuIiwKIAkJCSAgIHJwY3VydXAsIGludGVsX2d0
X3BtX2ludGVydmFsX3RvX25zKGd0LCBycGN1cnVwKSk7Ci0JCXNlcV9wcmludGYobSwgIlJQIFBS
RVYgVVA6ICVkICglZG5zKVxuIiwKKwkJc2VxX3ByaW50ZihtLCAiUlAgUFJFViBVUDogJWQgKCVs
bGRucylcbiIsCiAJCQkgICBycHByZXZ1cCwgaW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoZ3Qs
IHJwcHJldnVwKSk7CiAJCXNlcV9wcmludGYobSwgIlVwIHRocmVzaG9sZDogJWQlJVxuIiwKIAkJ
CSAgIHJwcy0+cG93ZXIudXBfdGhyZXNob2xkKTsKLQkJc2VxX3ByaW50ZihtLCAiUlAgVVAgRUk6
ICVkICglZG5zKVxuIiwKKwkJc2VxX3ByaW50ZihtLCAiUlAgVVAgRUk6ICVkICglbGxkbnMpXG4i
LAogCQkJICAgcnB1cGVpLCBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucyhndCwgcnB1cGVpKSk7
Ci0JCXNlcV9wcmludGYobSwgIlJQIFVQIFRIUkVTSE9MRDogJWQgKCVkbnMpXG4iLAorCQlzZXFf
cHJpbnRmKG0sICJSUCBVUCBUSFJFU0hPTEQ6ICVkICglbGxkbnMpXG4iLAogCQkJICAgcnB1cHQs
IGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKGd0LCBycHVwdCkpOwogCi0JCXNlcV9wcmludGYo
bSwgIlJQIENVUiBET1dOIEVJOiAlZCAoJWRucylcbiIsCisJCXNlcV9wcmludGYobSwgIlJQIENV
UiBET1dOIEVJOiAlZCAoJWxsZG5zKVxuIiwKIAkJCSAgIHJwY3VyZG93bmVpLAogCQkJICAgaW50
ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoZ3QsIHJwY3VyZG93bmVpKSk7Ci0JCXNlcV9wcmludGYo
bSwgIlJQIENVUiBET1dOOiAlZCAoJWRucylcbiIsCisJCXNlcV9wcmludGYobSwgIlJQIENVUiBE
T1dOOiAlZCAoJWxsZG5zKVxuIiwKIAkJCSAgIHJwY3VyZG93biwKIAkJCSAgIGludGVsX2d0X3Bt
X2ludGVydmFsX3RvX25zKGd0LCBycGN1cmRvd24pKTsKLQkJc2VxX3ByaW50ZihtLCAiUlAgUFJF
ViBET1dOOiAlZCAoJWRucylcbiIsCisJCXNlcV9wcmludGYobSwgIlJQIFBSRVYgRE9XTjogJWQg
KCVsbGRucylcbiIsCiAJCQkgICBycHByZXZkb3duLAogCQkJICAgaW50ZWxfZ3RfcG1faW50ZXJ2
YWxfdG9fbnMoZ3QsIHJwcHJldmRvd24pKTsKIAkJc2VxX3ByaW50ZihtLCAiRG93biB0aHJlc2hv
bGQ6ICVkJSVcbiIsCiAJCQkgICBycHMtPnBvd2VyLmRvd25fdGhyZXNob2xkKTsKLQkJc2VxX3By
aW50ZihtLCAiUlAgRE9XTiBFSTogJWQgKCVkbnMpXG4iLAorCQlzZXFfcHJpbnRmKG0sICJSUCBE
T1dOIEVJOiAlZCAoJWxsZG5zKVxuIiwKIAkJCSAgIHJwZG93bmVpLCBpbnRlbF9ndF9wbV9pbnRl
cnZhbF90b19ucyhndCwgcnBkb3duZWkpKTsKLQkJc2VxX3ByaW50ZihtLCAiUlAgRE9XTiBUSFJF
U0hPTEQ6ICVkICglZG5zKVxuIiwKKwkJc2VxX3ByaW50ZihtLCAiUlAgRE9XTiBUSFJFU0hPTEQ6
ICVkICglbGxkbnMpXG4iLAogCQkJICAgcnBkb3dudCwgaW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9f
bnMoZ3QsIHJwZG93bnQpKTsKIAogCQltYXhfZnJlcSA9IChJU19HRU45X0xQKGk5MTUpID8gcnBf
c3RhdGVfY2FwID4+IDAgOgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfY29udGV4dC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5oCmlu
ZGV4IGZkYTJlYmE4MWUyMi4uMmNlMmVjNjM5YmEyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfY29udGV4dC5oCkBAIC0yNDgsMTYgKzI0OCwxNCBAQCBpbnRlbF9jb250ZXh0X2NsZWFy
X25vcHJlZW1wdChzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UpCiAKIHN0YXRpYyBpbmxpbmUgdTY0
IGludGVsX2NvbnRleHRfZ2V0X3RvdGFsX3J1bnRpbWVfbnMoc3RydWN0IGludGVsX2NvbnRleHQg
KmNlKQogewotCWNvbnN0IHUzMiBwZXJpb2QgPQotCQlSVU5USU1FX0lORk8oY2UtPmVuZ2luZS0+
aTkxNSktPmNzX3RpbWVzdGFtcF9wZXJpb2RfbnM7CisJY29uc3QgdTMyIHBlcmlvZCA9IGNlLT5l
bmdpbmUtPmd0LT5jbG9ja19wZXJpb2RfbnM7CiAKIAlyZXR1cm4gUkVBRF9PTkNFKGNlLT5ydW50
aW1lLnRvdGFsKSAqIHBlcmlvZDsKIH0KIAogc3RhdGljIGlubGluZSB1NjQgaW50ZWxfY29udGV4
dF9nZXRfYXZnX3J1bnRpbWVfbnMoc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQogewotCWNvbnN0
IHUzMiBwZXJpb2QgPQotCQlSVU5USU1FX0lORk8oY2UtPmVuZ2luZS0+aTkxNSktPmNzX3RpbWVz
dGFtcF9wZXJpb2RfbnM7CisJY29uc3QgdTMyIHBlcmlvZCA9IGNlLT5lbmdpbmUtPmd0LT5jbG9j
a19wZXJpb2RfbnM7CiAKIAlyZXR1cm4gbXVsX3UzMl91MzIoZXdtYV9ydW50aW1lX3JlYWQoJmNl
LT5ydW50aW1lLmF2ZyksIHBlcmlvZCk7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9ndC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYwpp
bmRleCA0NGYxZDUxZTVhZTUuLmQ4ZTFhYjQxMjYzNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9ndC5jCkBAIC00Niw2ICs0Niw4IEBAIHZvaWQgaW50ZWxfZ3RfaW5pdF9od19lYXJseShzdHJ1
Y3QgaW50ZWxfZ3QgKmd0LCBzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0KQogCiBpbnQgaW50ZWxfZ3Rf
aW5pdF9tbWlvKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiB7CisJaW50ZWxfZ3RfaW5pdF9jbG9ja19m
cmVxdWVuY3koZ3QpOworCiAJaW50ZWxfdWNfaW5pdF9tbWlvKCZndC0+dWMpOwogCWludGVsX3Nz
ZXVfaW5mb19pbml0KGd0KTsKIApAQCAtNTQ2LDggKzU0OCw2IEBAIGludCBpbnRlbF9ndF9pbml0
KHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiAJICovCiAJaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9nZXQo
Z3QtPnVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7CiAKLQlpbnRlbF9ndF9pbml0X2Nsb2NrX2ZyZXF1
ZW5jeShndCk7Ci0KIAllcnIgPSBpbnRlbF9ndF9pbml0X3NjcmF0Y2goZ3QsIElTX0dFTihndC0+
aTkxNSwgMikgPyBTWl8yNTZLIDogU1pfNEspOwogCWlmIChlcnIpCiAJCWdvdG8gb3V0X2Z3Owpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfY2xvY2tfdXRpbHMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2Nsb2NrX3V0aWxzLmMKaW5kZXgg
OTk5MDc5Njg2ODQ2Li5hNDI0MmNhOGRjZDcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2d0X2Nsb2NrX3V0aWxzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZ3RfY2xvY2tfdXRpbHMuYwpAQCAtNywzNCArNywxNDYgQEAKICNpbmNsdWRlICJp
bnRlbF9ndC5oIgogI2luY2x1ZGUgImludGVsX2d0X2Nsb2NrX3V0aWxzLmgiCiAKLSNkZWZpbmUg
TUhaXzEyICAgMTIwMDAwMDAgLyogMTJNSHogKDI0TUh6LzIpLCA4My4zMzNucyAqLwotI2RlZmlu
ZSBNSFpfMTJfNSAxMjUwMDAwMCAvKiAxMi41TUh6ICgyNU1Iei8yKSwgODBucyAqLwotI2RlZmlu
ZSBNSFpfMTlfMiAxOTIwMDAwMCAvKiAxOS4yTUh6LCA1Mi4wODNucyAqLworc3RhdGljIHUzMiBy
ZWFkX3JlZmVyZW5jZV90c19mcmVxKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSkKK3sKKwl1
MzIgdHNfb3ZlcnJpZGUgPSBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIEdFTjlfVElNRVNUQU1Q
X09WRVJSSURFKTsKKwl1MzIgYmFzZV9mcmVxLCBmcmFjX2ZyZXE7CisKKwliYXNlX2ZyZXEgPSAo
KHRzX292ZXJyaWRlICYgR0VOOV9USU1FU1RBTVBfT1ZFUlJJREVfVVNfQ09VTlRFUl9ESVZJREVS
X01BU0spID4+CisJCSAgICAgR0VOOV9USU1FU1RBTVBfT1ZFUlJJREVfVVNfQ09VTlRFUl9ESVZJ
REVSX1NISUZUKSArIDE7CisJYmFzZV9mcmVxICo9IDEwMDAwMDA7CisKKwlmcmFjX2ZyZXEgPSAo
KHRzX292ZXJyaWRlICYKKwkJICAgICAgR0VOOV9USU1FU1RBTVBfT1ZFUlJJREVfVVNfQ09VTlRF
Ul9ERU5PTUlOQVRPUl9NQVNLKSA+PgorCQkgICAgIEdFTjlfVElNRVNUQU1QX09WRVJSSURFX1VT
X0NPVU5URVJfREVOT01JTkFUT1JfU0hJRlQpOworCWZyYWNfZnJlcSA9IDEwMDAwMDAgLyAoZnJh
Y19mcmVxICsgMSk7CisKKwlyZXR1cm4gYmFzZV9mcmVxICsgZnJhY19mcmVxOworfQorCitzdGF0
aWMgdTMyIGdlbjEwX2dldF9jcnlzdGFsX2Nsb2NrX2ZyZXEoc3RydWN0IGludGVsX3VuY29yZSAq
dW5jb3JlLAorCQkJCQl1MzIgcnBtX2NvbmZpZ19yZWcpCit7CisJdTMyIGYxOV8yX21oeiA9IDE5
MjAwMDAwOworCXUzMiBmMjRfbWh6ID0gMjQwMDAwMDA7CisJdTMyIGNyeXN0YWxfY2xvY2sgPQor
CQkocnBtX2NvbmZpZ19yZWcgJiBHRU45X1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV9N
QVNLKSA+PgorCQlHRU45X1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV9TSElGVDsKIAot
c3RhdGljIHUzMiByZWFkX2Nsb2NrX2ZyZXF1ZW5jeShjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0
KQorCXN3aXRjaCAoY3J5c3RhbF9jbG9jaykgeworCWNhc2UgR0VOOV9SUE1fQ09ORklHMF9DUllT
VEFMX0NMT0NLX0ZSRVFfMTlfMl9NSFo6CisJCXJldHVybiBmMTlfMl9taHo7CisJY2FzZSBHRU45
X1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV8yNF9NSFo6CisJCXJldHVybiBmMjRfbWh6
OworCWRlZmF1bHQ6CisJCU1JU1NJTkdfQ0FTRShjcnlzdGFsX2Nsb2NrKTsKKwkJcmV0dXJuIDA7
CisJfQorfQorCitzdGF0aWMgdTMyIGdlbjExX2dldF9jcnlzdGFsX2Nsb2NrX2ZyZXEoc3RydWN0
IGludGVsX3VuY29yZSAqdW5jb3JlLAorCQkJCQl1MzIgcnBtX2NvbmZpZ19yZWcpCiB7Ci0JaWYg
KElOVEVMX0dFTihndC0+aTkxNSkgPj0gMTEpIHsKLQkJdTMyIGNvbmZpZzsKLQotCQljb25maWcg
PSBpbnRlbF91bmNvcmVfcmVhZChndC0+dW5jb3JlLCBSUE1fQ09ORklHMCk7Ci0JCWNvbmZpZyAm
PSBHRU4xMV9SUE1fQ09ORklHMF9DUllTVEFMX0NMT0NLX0ZSRVFfTUFTSzsKLQkJY29uZmlnID4+
PSBHRU4xMV9SUE1fQ09ORklHMF9DUllTVEFMX0NMT0NLX0ZSRVFfU0hJRlQ7Ci0KLQkJc3dpdGNo
IChjb25maWcpIHsKLQkJY2FzZSAwOiByZXR1cm4gTUhaXzEyOwotCQljYXNlIDE6Ci0JCWNhc2Ug
MjogcmV0dXJuIE1IWl8xOV8yOwotCQlkZWZhdWx0OgotCQljYXNlIDM6IHJldHVybiBNSFpfMTJf
NTsKKwl1MzIgZjE5XzJfbWh6ID0gMTkyMDAwMDA7CisJdTMyIGYyNF9taHogPSAyNDAwMDAwMDsK
Kwl1MzIgZjI1X21oeiA9IDI1MDAwMDAwOworCXUzMiBmMzhfNF9taHogPSAzODQwMDAwMDsKKwl1
MzIgY3J5c3RhbF9jbG9jayA9CisJCShycG1fY29uZmlnX3JlZyAmIEdFTjExX1JQTV9DT05GSUcw
X0NSWVNUQUxfQ0xPQ0tfRlJFUV9NQVNLKSA+PgorCQlHRU4xMV9SUE1fQ09ORklHMF9DUllTVEFM
X0NMT0NLX0ZSRVFfU0hJRlQ7CisKKwlzd2l0Y2ggKGNyeXN0YWxfY2xvY2spIHsKKwljYXNlIEdF
TjExX1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV8yNF9NSFo6CisJCXJldHVybiBmMjRf
bWh6OworCWNhc2UgR0VOMTFfUlBNX0NPTkZJRzBfQ1JZU1RBTF9DTE9DS19GUkVRXzE5XzJfTUha
OgorCQlyZXR1cm4gZjE5XzJfbWh6OworCWNhc2UgR0VOMTFfUlBNX0NPTkZJRzBfQ1JZU1RBTF9D
TE9DS19GUkVRXzM4XzRfTUhaOgorCQlyZXR1cm4gZjM4XzRfbWh6OworCWNhc2UgR0VOMTFfUlBN
X0NPTkZJRzBfQ1JZU1RBTF9DTE9DS19GUkVRXzI1X01IWjoKKwkJcmV0dXJuIGYyNV9taHo7CisJ
ZGVmYXVsdDoKKwkJTUlTU0lOR19DQVNFKGNyeXN0YWxfY2xvY2spOworCQlyZXR1cm4gMDsKKwl9
Cit9CisKK3N0YXRpYyB1MzIgcmVhZF9jbG9ja19mcmVxdWVuY3koc3RydWN0IGludGVsX3VuY29y
ZSAqdW5jb3JlKQoreworCXUzMiBmMTJfNV9taHogPSAxMjUwMDAwMDsKKwl1MzIgZjE5XzJfbWh6
ID0gMTkyMDAwMDA7CisJdTMyIGYyNF9taHogPSAyNDAwMDAwMDsKKworCWlmIChJTlRFTF9HRU4o
dW5jb3JlLT5pOTE1KSA8PSA0KSB7CisJCS8qCisJCSAqIFBSTXMgc2F5OgorCQkgKgorCQkgKiAg
ICAgIlRoZSB2YWx1ZSBpbiB0aGlzIHJlZ2lzdGVyIGluY3JlbWVudHMgb25jZSBldmVyeSAxNgor
CQkgKiAgICAgIGhjbGtzLiIgKHRocm91Z2ggdGhlIOKAnENsb2NraW5nIENvbmZpZ3VyYXRpb27i
gJ0KKwkJICogICAgICAo4oCcQ0xLQ0ZH4oCdKSBNQ0hCQVIgcmVnaXN0ZXIpCisJCSAqLworCQly
ZXR1cm4gUlVOVElNRV9JTkZPKHVuY29yZS0+aTkxNSktPnJhd2Nsa19mcmVxICogMTAwMCAvIDE2
OworCX0gZWxzZSBpZiAoSU5URUxfR0VOKHVuY29yZS0+aTkxNSkgPD0gOCkgeworCQkvKgorCQkg
KiBQUk1zIHNheToKKwkJICoKKwkJICogICAgICJUaGUgUENVIFRTQyBjb3VudHMgMTBucyBpbmNy
ZW1lbnRzOyB0aGlzIHRpbWVzdGFtcAorCQkgKiAgICAgIHJlZmxlY3RzIGJpdHMgMzg6MyBvZiB0
aGUgVFNDIChpLmUuIDgwbnMgZ3JhbnVsYXJpdHksCisJCSAqICAgICAgcm9sbGluZyBvdmVyIGV2
ZXJ5IDEuNSBob3VycykuCisJCSAqLworCQlyZXR1cm4gZjEyXzVfbWh6OworCX0gZWxzZSBpZiAo
SU5URUxfR0VOKHVuY29yZS0+aTkxNSkgPD0gOSkgeworCQl1MzIgY3RjX3JlZyA9IGludGVsX3Vu
Y29yZV9yZWFkKHVuY29yZSwgQ1RDX01PREUpOworCQl1MzIgZnJlcSA9IDA7CisKKwkJaWYgKChj
dGNfcmVnICYgQ1RDX1NPVVJDRV9QQVJBTUVURVJfTUFTSykgPT0gQ1RDX1NPVVJDRV9ESVZJREVf
TE9HSUMpIHsKKwkJCWZyZXEgPSByZWFkX3JlZmVyZW5jZV90c19mcmVxKHVuY29yZSk7CisJCX0g
ZWxzZSB7CisJCQlmcmVxID0gSVNfR0VOOV9MUCh1bmNvcmUtPmk5MTUpID8gZjE5XzJfbWh6IDog
ZjI0X21oejsKKworCQkJLyoKKwkJCSAqIE5vdyBmaWd1cmUgb3V0IGhvdyB0aGUgY29tbWFuZCBz
dHJlYW0ncyB0aW1lc3RhbXAKKwkJCSAqIHJlZ2lzdGVyIGluY3JlbWVudHMgZnJvbSB0aGlzIGZy
ZXF1ZW5jeSAoaXQgbWlnaHQKKwkJCSAqIGluY3JlbWVudCBvbmx5IGV2ZXJ5IGZldyBjbG9jayBj
eWNsZSkuCisJCQkgKi8KKwkJCWZyZXEgPj49IDMgLSAoKGN0Y19yZWcgJiBDVENfU0hJRlRfUEFS
QU1FVEVSX01BU0spID4+CisJCQkJICAgICAgQ1RDX1NISUZUX1BBUkFNRVRFUl9TSElGVCk7CiAJ
CX0KLQl9IGVsc2UgaWYgKElOVEVMX0dFTihndC0+aTkxNSkgPj0gOSkgewotCQlpZiAoSVNfR0VO
OV9MUChndC0+aTkxNSkpCi0JCQlyZXR1cm4gTUhaXzE5XzI7Ci0JCWVsc2UKLQkJCXJldHVybiBN
SFpfMTI7Ci0JfSBlbHNlIHsKLQkJcmV0dXJuIE1IWl8xMl81OworCisJCXJldHVybiBmcmVxOwor
CX0gZWxzZSBpZiAoSU5URUxfR0VOKHVuY29yZS0+aTkxNSkgPD0gMTIpIHsKKwkJdTMyIGN0Y19y
ZWcgPSBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIENUQ19NT0RFKTsKKwkJdTMyIGZyZXEgPSAw
OworCisJCS8qCisJCSAqIEZpcnN0IGZpZ3VyZSBvdXQgdGhlIHJlZmVyZW5jZSBmcmVxdWVuY3ku
IFRoZXJlIGFyZSAyIHdheXMKKwkJICogd2UgY2FuIGNvbXB1dGUgdGhlIGZyZXF1ZW5jeSwgZWl0
aGVyIHRocm91Z2ggdGhlCisJCSAqIFRJTUVTVEFNUF9PVkVSUklERSByZWdpc3RlciBvciB0aHJv
dWdoIFJQTV9DT05GSUcuIENUQ19NT0RFCisJCSAqIHRlbGxzIHVzIHdoaWNoIG9uZSB3ZSBzaG91
bGQgdXNlLgorCQkgKi8KKwkJaWYgKChjdGNfcmVnICYgQ1RDX1NPVVJDRV9QQVJBTUVURVJfTUFT
SykgPT0gQ1RDX1NPVVJDRV9ESVZJREVfTE9HSUMpIHsKKwkJCWZyZXEgPSByZWFkX3JlZmVyZW5j
ZV90c19mcmVxKHVuY29yZSk7CisJCX0gZWxzZSB7CisJCQl1MzIgYzAgPSBpbnRlbF91bmNvcmVf
cmVhZCh1bmNvcmUsIFJQTV9DT05GSUcwKTsKKworCQkJaWYgKElOVEVMX0dFTih1bmNvcmUtPmk5
MTUpIDw9IDEwKQorCQkJCWZyZXEgPSBnZW4xMF9nZXRfY3J5c3RhbF9jbG9ja19mcmVxKHVuY29y
ZSwgYzApOworCQkJZWxzZQorCQkJCWZyZXEgPSBnZW4xMV9nZXRfY3J5c3RhbF9jbG9ja19mcmVx
KHVuY29yZSwgYzApOworCisJCQkvKgorCQkJICogTm93IGZpZ3VyZSBvdXQgaG93IHRoZSBjb21t
YW5kIHN0cmVhbSdzIHRpbWVzdGFtcAorCQkJICogcmVnaXN0ZXIgaW5jcmVtZW50cyBmcm9tIHRo
aXMgZnJlcXVlbmN5IChpdCBtaWdodAorCQkJICogaW5jcmVtZW50IG9ubHkgZXZlcnkgZmV3IGNs
b2NrIGN5Y2xlKS4KKwkJCSAqLworCQkJZnJlcSA+Pj0gMyAtICgoYzAgJiBHRU4xMF9SUE1fQ09O
RklHMF9DVENfU0hJRlRfUEFSQU1FVEVSX01BU0spID4+CisJCQkJICAgICAgR0VOMTBfUlBNX0NP
TkZJRzBfQ1RDX1NISUZUX1BBUkFNRVRFUl9TSElGVCk7CisJCX0KKworCQlyZXR1cm4gZnJlcTsK
IAl9CisKKwlNSVNTSU5HX0NBU0UoIlVua25vd24gZ2VuLCB1bmFibGUgdG8gcmVhZCBjb21tYW5k
IHN0cmVhbWVyIHRpbWVzdGFtcCBmcmVxdWVuY3lcbiIpOworCXJldHVybiAwOwogfQogCiB2b2lk
IGludGVsX2d0X2luaXRfY2xvY2tfZnJlcXVlbmN5KHN0cnVjdCBpbnRlbF9ndCAqZ3QpCkBAIC00
MywyMCArMTU1LDI3IEBAIHZvaWQgaW50ZWxfZ3RfaW5pdF9jbG9ja19mcmVxdWVuY3koc3RydWN0
IGludGVsX2d0ICpndCkKIAkgKiBOb3RlIHRoYXQgb24gZ2VuMTErLCB0aGUgY2xvY2sgZnJlcXVl
bmN5IG1heSBiZSByZWNvbmZpZ3VyZWQuCiAJICogV2UgZG8gbm90LCBhbmQgd2UgYXNzdW1lIG5v
Ym9keSBlbHNlIGRvZXMuCiAJICovCi0JZ3QtPmNsb2NrX2ZyZXF1ZW5jeSA9IHJlYWRfY2xvY2tf
ZnJlcXVlbmN5KGd0KTsKKwlndC0+Y2xvY2tfZnJlcXVlbmN5ID0gcmVhZF9jbG9ja19mcmVxdWVu
Y3koZ3QtPnVuY29yZSk7CisJaWYgKGd0LT5jbG9ja19mcmVxdWVuY3kpCisJCWd0LT5jbG9ja19w
ZXJpb2RfbnMgPSBpbnRlbF9ndF9jbG9ja19pbnRlcnZhbF90b19ucyhndCwgMSk7CisKIAlHVF9U
UkFDRShndCwKLQkJICJVc2luZyBjbG9jayBmcmVxdWVuY3k6ICVka0h6XG4iLAotCQkgZ3QtPmNs
b2NrX2ZyZXF1ZW5jeSAvIDEwMDApOworCQkgIlVzaW5nIGNsb2NrIGZyZXF1ZW5jeTogJWRrSHos
IHBlcmlvZDogJWRucywgd3JhcDogJWxsZG1zXG4iLAorCQkgZ3QtPmNsb2NrX2ZyZXF1ZW5jeSAv
IDEwMDAsCisJCSBndC0+Y2xvY2tfcGVyaW9kX25zLAorCQkgZGl2X3U2NChtdWxfdTMyX3UzMihn
dC0+Y2xvY2tfcGVyaW9kX25zLCBTMzJfTUFYKSwKKwkJCSBVU0VDX1BFUl9TRUMpKTsKKwogfQog
CiAjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfREVCVUdfR0VNKQogdm9pZCBpbnRlbF9n
dF9jaGVja19jbG9ja19mcmVxdWVuY3koY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCkKIHsKLQlp
ZiAoZ3QtPmNsb2NrX2ZyZXF1ZW5jeSAhPSByZWFkX2Nsb2NrX2ZyZXF1ZW5jeShndCkpIHsKKwlp
ZiAoZ3QtPmNsb2NrX2ZyZXF1ZW5jeSAhPSByZWFkX2Nsb2NrX2ZyZXF1ZW5jeShndC0+dW5jb3Jl
KSkgewogCQlkZXZfZXJyKGd0LT5pOTE1LT5kcm0uZGV2LAogCQkJIkdUIGNsb2NrIGZyZXF1ZW5j
eSBjaGFuZ2VkLCB3YXMgJXVIeiwgbm93ICV1SHohXG4iLAogCQkJZ3QtPmNsb2NrX2ZyZXF1ZW5j
eSwKLQkJCXJlYWRfY2xvY2tfZnJlcXVlbmN5KGd0KSk7CisJCQlyZWFkX2Nsb2NrX2ZyZXF1ZW5j
eShndC0+dW5jb3JlKSk7CiAJfQogfQogI2VuZGlmCkBAIC02NiwyNiArMTg1LDI0IEBAIHN0YXRp
YyB1NjQgZGl2X3U2NF9yb3VuZHVwKHU2NCBub20sIHUzMiBkZW4pCiAJcmV0dXJuIGRpdl91NjQo
bm9tICsgZGVuIC0gMSwgZGVuKTsKIH0KIAotdTMyIGludGVsX2d0X2Nsb2NrX2ludGVydmFsX3Rv
X25zKGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QsIHUzMiBjb3VudCkKK3U2NCBpbnRlbF9ndF9j
bG9ja19pbnRlcnZhbF90b19ucyhjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1NjQgY291bnQp
CiB7Ci0JcmV0dXJuIGRpdl91NjRfcm91bmR1cChtdWxfdTMyX3UzMihjb3VudCwgMTAwMCAqIDEw
MDAgKiAxMDAwKSwKLQkJCSAgICAgICBndC0+Y2xvY2tfZnJlcXVlbmN5KTsKKwlyZXR1cm4gZGl2
X3U2NF9yb3VuZHVwKGNvdW50ICogTlNFQ19QRVJfU0VDLCBndC0+Y2xvY2tfZnJlcXVlbmN5KTsK
IH0KIAotdTMyIGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKGNvbnN0IHN0cnVjdCBpbnRlbF9n
dCAqZ3QsIHUzMiBjb3VudCkKK3U2NCBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucyhjb25zdCBz
dHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1NjQgY291bnQpCiB7CiAJcmV0dXJuIGludGVsX2d0X2Nsb2Nr
X2ludGVydmFsX3RvX25zKGd0LCAxNiAqIGNvdW50KTsKIH0KIAotdTMyIGludGVsX2d0X25zX3Rv
X2Nsb2NrX2ludGVydmFsKGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QsIHUzMiBucykKK3U2NCBp
bnRlbF9ndF9uc190b19jbG9ja19pbnRlcnZhbChjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1
NjQgbnMpCiB7Ci0JcmV0dXJuIGRpdl91NjRfcm91bmR1cChtdWxfdTMyX3UzMihndC0+Y2xvY2tf
ZnJlcXVlbmN5LCBucyksCi0JCQkgICAgICAgMTAwMCAqIDEwMDAgKiAxMDAwKTsKKwlyZXR1cm4g
ZGl2X3U2NF9yb3VuZHVwKGd0LT5jbG9ja19mcmVxdWVuY3kgKiBucywgTlNFQ19QRVJfU0VDKTsK
IH0KIAotdTMyIGludGVsX2d0X25zX3RvX3BtX2ludGVydmFsKGNvbnN0IHN0cnVjdCBpbnRlbF9n
dCAqZ3QsIHUzMiBucykKK3U2NCBpbnRlbF9ndF9uc190b19wbV9pbnRlcnZhbChjb25zdCBzdHJ1
Y3QgaW50ZWxfZ3QgKmd0LCB1NjQgbnMpCiB7Ci0JdTMyIHZhbDsKKwl1NjQgdmFsOwogCiAJLyoK
IAkgKiBNYWtlIHRoZXNlIGEgbXVsdGlwbGUgb2YgbWFnaWMgMjUgdG8gYXZvaWQgU05CIChlZy4g
RGVsbCBYUFMKQEAgLTk0LDkgKzIxMSw5IEBAIHUzMiBpbnRlbF9ndF9uc190b19wbV9pbnRlcnZh
bChjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1MzIgbnMpCiAJICogRUkvdGhyZXNob2xkcyBh
cmUgImJhZCIsIGxlYWRpbmcgdG8gYSB2ZXJ5IHNsdWdnaXNoIG9yIGV2ZW4KIAkgKiBmcm96ZW4g
bWFjaGluZS4KIAkgKi8KLQl2YWwgPSBESVZfUk9VTkRfVVAoaW50ZWxfZ3RfbnNfdG9fY2xvY2tf
aW50ZXJ2YWwoZ3QsIG5zKSwgMTYpOworCXZhbCA9IGRpdl91NjRfcm91bmR1cChpbnRlbF9ndF9u
c190b19jbG9ja19pbnRlcnZhbChndCwgbnMpLCAxNik7CiAJaWYgKElTX0dFTihndC0+aTkxNSwg
NikpCi0JCXZhbCA9IHJvdW5kdXAodmFsLCAyNSk7CisJCXZhbCA9IGRpdl91NjRfcm91bmR1cCh2
YWwsIDI1KSAqIDI1OwogCiAJcmV0dXJuIHZhbDsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2d0X2Nsb2NrX3V0aWxzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9ndF9jbG9ja191dGlscy5oCmluZGV4IGY3OTNjODlmMmNiZC4uOGIwM2U5N2E4
NWRmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9jbG9ja191
dGlscy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2Nsb2NrX3V0aWxz
LmgKQEAgLTE4LDEwICsxOCwxMCBAQCB2b2lkIGludGVsX2d0X2NoZWNrX2Nsb2NrX2ZyZXF1ZW5j
eShjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKIHN0YXRpYyBpbmxpbmUgdm9pZCBpbnRlbF9n
dF9jaGVja19jbG9ja19mcmVxdWVuY3koY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCkge30KICNl
bmRpZgogCi11MzIgaW50ZWxfZ3RfY2xvY2tfaW50ZXJ2YWxfdG9fbnMoY29uc3Qgc3RydWN0IGlu
dGVsX2d0ICpndCwgdTMyIGNvdW50KTsKLXUzMiBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucyhj
b25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1MzIgY291bnQpOwordTY0IGludGVsX2d0X2Nsb2Nr
X2ludGVydmFsX3RvX25zKGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QsIHU2NCBjb3VudCk7Cit1
NjQgaW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCwg
dTY0IGNvdW50KTsKIAotdTMyIGludGVsX2d0X25zX3RvX2Nsb2NrX2ludGVydmFsKGNvbnN0IHN0
cnVjdCBpbnRlbF9ndCAqZ3QsIHUzMiBucyk7Ci11MzIgaW50ZWxfZ3RfbnNfdG9fcG1faW50ZXJ2
YWwoY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCwgdTMyIG5zKTsKK3U2NCBpbnRlbF9ndF9uc190
b19jbG9ja19pbnRlcnZhbChjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1NjQgbnMpOwordTY0
IGludGVsX2d0X25zX3RvX3BtX2ludGVydmFsKGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QsIHU2
NCBucyk7CiAKICNlbmRpZiAvKiBfX0lOVEVMX0dUX0NMT0NLX1VUSUxTX0hfXyAqLwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaCBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmgKaW5kZXggYzdiZGU1MjlmZWFiLi5hODNk
M2UxODI1NGQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5
cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaApAQCAt
NzUsNiArNzUsNyBAQCBzdHJ1Y3QgaW50ZWxfZ3QgewogCWludGVsX3dha2VyZWZfdCBhd2FrZTsK
IAogCXUzMiBjbG9ja19mcmVxdWVuY3k7CisJdTMyIGNsb2NrX3BlcmlvZF9uczsKIAogCXN0cnVj
dCBpbnRlbF9sbGMgbGxjOwogCXN0cnVjdCBpbnRlbF9yYzYgcmM2OwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5lX3BtLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9zZWxmdGVzdF9lbmdpbmVfcG0uYwppbmRleCBkODg1MDRhNWQ2OWMuLmNhMDgw
NDQ1Njk1ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5n
aW5lX3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5lX3Bt
LmMKQEAgLTE1Niw3ICsxNTYsNyBAQCBzdGF0aWMgaW50IF9fbGl2ZV9lbmdpbmVfdGltZXN0YW1w
cyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJZF9yaW5nID0gdHJpZmlsdGVyKHNf
cmluZyk7CiAJZF9jdHggPSB0cmlmaWx0ZXIoc19jdHgpOwogCi0JcHJfaW5mbygiJXMgZWxhcHNl
ZDolbGxkbnMsIENUWF9USU1FU1RBTVA6JWRucywgUklOR19USU1FU1RBTVA6JWRuc1xuIiwKKwlw
cl9pbmZvKCIlcyBlbGFwc2VkOiVsbGRucywgQ1RYX1RJTUVTVEFNUDolbGxkbnMsIFJJTkdfVElN
RVNUQU1QOiVsbGRuc1xuIiwKIAkJZW5naW5lLT5uYW1lLCBkdCwKIAkJaW50ZWxfZ3RfY2xvY2tf
aW50ZXJ2YWxfdG9fbnMoZW5naW5lLT5ndCwgZF9jdHgpLAogCQlpbnRlbF9ndF9jbG9ja19pbnRl
cnZhbF90b19ucyhlbmdpbmUtPmd0LCBkX3JpbmcpKTsKQEAgLTE3MSwxMSArMTcxLDExIEBAIHN0
YXRpYyBpbnQgX19saXZlX2VuZ2luZV90aW1lc3RhbXBzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSkKIAlkX3JpbmcgPSB0cmlmaWx0ZXIoc19yaW5nKTsKIAlkX2N0eCA9IHRyaWZpbHRl
cihzX2N0eCk7CiAKLQlkX2N0eCAqPSBSVU5USU1FX0lORk8oZW5naW5lLT5pOTE1KS0+Y3NfdGlt
ZXN0YW1wX2ZyZXF1ZW5jeV9oejsKKwlkX2N0eCAqPSBlbmdpbmUtPmd0LT5jbG9ja19mcmVxdWVu
Y3k7CiAJaWYgKElTX0lDRUxBS0UoZW5naW5lLT5pOTE1KSkKIAkJZF9yaW5nICo9IDEyNTAwMDAw
OyAvKiBGaXhlZCA4MG5zIGZvciBpY2wgY3R4IHRpbWVzdGFtcD8gKi8KIAllbHNlCi0JCWRfcmlu
ZyAqPSBSVU5USU1FX0lORk8oZW5naW5lLT5pOTE1KS0+Y3NfdGltZXN0YW1wX2ZyZXF1ZW5jeV9o
ejsKKwkJZF9yaW5nICo9IGVuZ2luZS0+Z3QtPmNsb2NrX2ZyZXF1ZW5jeTsKIAogCWlmICgzICog
ZF9jdHggPiA0ICogZF9yaW5nIHx8IDQgKiBkX2N0eCA8IDMgKiBkX3JpbmcpIHsKIAkJcHJfZXJy
KCIlcyBNaXNtYXRjaCBiZXR3ZWVuIHJpbmcgYW5kIGNvbnRleHQgdGltZXN0YW1wcyFcbiIsCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9ndF9wbS5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZ3RfcG0uYwppbmRleCA2MTgwYTQ3YzFiNTEu
LjVkOTExZjcyNGViZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRl
c3RfZ3RfcG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9ndF9wbS5j
CkBAIC03MSw3ICs3MSw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9ndF9jbG9ja3Modm9pZCAqYXJnKQog
CWVudW0gaW50ZWxfZW5naW5lX2lkIGlkOwogCWludCBlcnIgPSAwOwogCi0JaWYgKCFSVU5USU1F
X0lORk8oZ3QtPmk5MTUpLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5X2h6KSB7IC8qIHVua25vd24g
Ki8KKwlpZiAoIWd0LT5jbG9ja19mcmVxdWVuY3kpIHsgLyogdW5rbm93biAqLwogCQlwcl9pbmZv
KCJDU19USU1FU1RBTVAgZnJlcXVlbmN5IHVua25vd25cbiIpOwogCQlyZXR1cm4gMDsKIAl9CkBA
IC0xMTIsMTIgKzExMiwxMiBAQCBzdGF0aWMgaW50IGxpdmVfZ3RfY2xvY2tzKHZvaWQgKmFyZykK
IAogCQltZWFzdXJlX2Nsb2NrcyhlbmdpbmUsICZjeWNsZXMsICZkdCk7CiAKLQkJdGltZSA9IGk5
MTVfY3NfdGltZXN0YW1wX3RpY2tzX3RvX25zKGVuZ2luZS0+aTkxNSwgY3ljbGVzKTsKLQkJZXhw
ZWN0ZWQgPSBpOTE1X2NzX3RpbWVzdGFtcF9uc190b190aWNrcyhlbmdpbmUtPmk5MTUsIGR0KTsK
KwkJdGltZSA9IGludGVsX2d0X2Nsb2NrX2ludGVydmFsX3RvX25zKGVuZ2luZS0+Z3QsIGN5Y2xl
cyk7CisJCWV4cGVjdGVkID0gaW50ZWxfZ3RfbnNfdG9fY2xvY2tfaW50ZXJ2YWwoZW5naW5lLT5n
dCwgZHQpOwogCiAJCXByX2luZm8oIiVzOiBUSU1FU1RBTVAgJWQgY3ljbGVzIFslbGxkbnNdIGlu
ICVsbGRucyBbJWQgY3ljbGVzXSwgdXNpbmcgQ1MgY2xvY2sgZnJlcXVlbmN5IG9mICV1S0h6XG4i
LAogCQkJZW5naW5lLT5uYW1lLCBjeWNsZXMsIHRpbWUsIGR0LCBleHBlY3RlZCwKLQkJCVJVTlRJ
TUVfSU5GTyhlbmdpbmUtPmk5MTUpLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5X2h6IC8gMTAwMCk7
CisJCQllbmdpbmUtPmd0LT5jbG9ja19mcmVxdWVuY3kgLyAxMDAwKTsKIAogCQlpZiAoOSAqIHRp
bWUgPCA4ICogZHQgfHwgOCAqIHRpbWUgPiA5ICogZHQpIHsKIAkJCXByX2VycigiJXM6IENTIHRp
Y2tzIGRpZCBub3QgbWF0Y2ggd2FsbHRpbWUhXG4iLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVn
ZnMuYwppbmRleCBjNzIxNjBlMzcwMmYuLjczMzI0NzhhM2RkNSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kZWJ1Z2ZzLmMKQEAgLTYzNSwyNyArNjM1LDI3IEBAIHN0YXRpYyBpbnQgaTkxNV9mcmVx
dWVuY3lfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIAkJc2VxX3ByaW50
ZihtLCAiUlBERUNMSU1JVDogMHglMDh4XG4iLCBycGRlY2xpbWl0KTsKIAkJc2VxX3ByaW50Ziht
LCAiUlBOU1dSRVE6ICVkTUh6XG4iLCByZXFmKTsKIAkJc2VxX3ByaW50ZihtLCAiQ0FHRjogJWRN
SHpcbiIsIGNhZ2YpOwotCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgVVAgRUk6ICVkICglZG5zKVxu
IiwKKwkJc2VxX3ByaW50ZihtLCAiUlAgQ1VSIFVQIEVJOiAlZCAoJWxsZG5zKVxuIiwKIAkJCSAg
IHJwdXBlaSwKIAkJCSAgIGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKCZkZXZfcHJpdi0+Z3Qs
IHJwdXBlaSkpOwotCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgVVA6ICVkICglZHVuKVxuIiwKKwkJ
c2VxX3ByaW50ZihtLCAiUlAgQ1VSIFVQOiAlZCAoJWxsZHVuKVxuIiwKIAkJCSAgIHJwY3VydXAs
CiAJCQkgICBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucygmZGV2X3ByaXYtPmd0LCBycGN1cnVw
KSk7Ci0JCXNlcV9wcmludGYobSwgIlJQIFBSRVYgVVA6ICVkICglZG5zKVxuIiwKKwkJc2VxX3By
aW50ZihtLCAiUlAgUFJFViBVUDogJWQgKCVsbGRucylcbiIsCiAJCQkgICBycHByZXZ1cCwKIAkJ
CSAgIGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKCZkZXZfcHJpdi0+Z3QsIHJwcHJldnVwKSk7
CiAJCXNlcV9wcmludGYobSwgIlVwIHRocmVzaG9sZDogJWQlJVxuIiwKIAkJCSAgIHJwcy0+cG93
ZXIudXBfdGhyZXNob2xkKTsKIAotCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgRE9XTiBFSTogJWQg
KCVkbnMpXG4iLAorCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgRE9XTiBFSTogJWQgKCVsbGRucylc
biIsCiAJCQkgICBycGRvd25laSwKIAkJCSAgIGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKCZk
ZXZfcHJpdi0+Z3QsCiAJCQkJCQkgICAgICBycGRvd25laSkpOwotCQlzZXFfcHJpbnRmKG0sICJS
UCBDVVIgRE9XTjogJWQgKCVkbnMpXG4iLAorCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgRE9XTjog
JWQgKCVsbGRucylcbiIsCiAJCQkgICBycGN1cmRvd24sCiAJCQkgICBpbnRlbF9ndF9wbV9pbnRl
cnZhbF90b19ucygmZGV2X3ByaXYtPmd0LAogCQkJCQkJICAgICAgcnBjdXJkb3duKSk7Ci0JCXNl
cV9wcmludGYobSwgIlJQIFBSRVYgRE9XTjogJWQgKCVkbnMpXG4iLAorCQlzZXFfcHJpbnRmKG0s
ICJSUCBQUkVWIERPV046ICVkICglbGxkbnMpXG4iLAogCQkJICAgcnBwcmV2ZG93biwKIAkJCSAg
IGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKCZkZXZfcHJpdi0+Z3QsCiAJCQkJCQkgICAgICBy
cHByZXZkb3duKSk7CkBAIC04NjIsOCArODYyLDkgQEAgc3RhdGljIGludCBpOTE1X2VuZ2luZV9p
bmZvKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqdW51c2VkKQogCQkgICB5ZXNubyhpOTE1LT5n
dC5hd2FrZSksCiAJCSAgIGF0b21pY19yZWFkKCZpOTE1LT5ndC53YWtlcmVmLmNvdW50KSwKIAkJ
ICAga3RpbWVfdG9fbXMoaW50ZWxfZ3RfZ2V0X2F3YWtlX3RpbWUoJmk5MTUtPmd0KSkpOwotCXNl
cV9wcmludGYobSwgIkNTIHRpbWVzdGFtcCBmcmVxdWVuY3k6ICV1IEh6XG4iLAotCQkgICBSVU5U
SU1FX0lORk8oaTkxNSktPmNzX3RpbWVzdGFtcF9mcmVxdWVuY3lfaHopOworCXNlcV9wcmludGYo
bSwgIkNTIHRpbWVzdGFtcCBmcmVxdWVuY3k6ICV1IEh6LCAlZCBuc1xuIiwKKwkJICAgaTkxNS0+
Z3QuY2xvY2tfZnJlcXVlbmN5LAorCQkgICBpOTE1LT5ndC5jbG9ja19wZXJpb2RfbnMpOwogCiAJ
cCA9IGRybV9zZXFfZmlsZV9wcmludGVyKG0pOwogCWZvcl9lYWNoX3VhYmlfZW5naW5lKGVuZ2lu
ZSwgaTkxNSkKQEAgLTk0OSw3ICs5NTAsNyBAQCBpOTE1X3BlcmZfbm9hX2RlbGF5X3NldCh2b2lk
ICpkYXRhLCB1NjQgdmFsKQogCSAqIFRoaXMgd291bGQgbGVhZCB0byBpbmZpbml0ZSB3YWl0cyBh
cyB3ZSdyZSBkb2luZyB0aW1lc3RhbXAKIAkgKiBkaWZmZXJlbmNlIG9uIHRoZSBDUyB3aXRoIG9u
bHkgMzJiaXRzLgogCSAqLwotCWlmIChpOTE1X2NzX3RpbWVzdGFtcF9uc190b190aWNrcyhpOTE1
LCB2YWwpID4gVTMyX01BWCkKKwlpZiAoaW50ZWxfZ3RfbnNfdG9fY2xvY2tfaW50ZXJ2YWwoJmk5
MTUtPmd0LCB2YWwpID4gVTMyX01BWCkKIAkJcmV0dXJuIC1FSU5WQUw7CiAKIAlhdG9taWM2NF9z
ZXQoJmk5MTUtPnBlcmYubm9hX3Byb2dyYW1taW5nX2RlbGF5LCB2YWwpOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZHJ2LmgKaW5kZXggNGE4ZmYyYTg5OWE1Li5lMzhhMTBkNWMxMjggMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kcnYuaApAQCAtMjAwMywxNiArMjAwMyw0IEBAIGk5MTVfY29oZXJlbnRfbWFwX3R5cGUo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJcmV0dXJuIEhBU19MTEMoaTkxNSkgPyBJ
OTE1X01BUF9XQiA6IEk5MTVfTUFQX1dDOwogfQogCi1zdGF0aWMgaW5saW5lIHU2NCBpOTE1X2Nz
X3RpbWVzdGFtcF9uc190b190aWNrcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgdTY0
IHZhbCkKLXsKLQlyZXR1cm4gRElWX1JPVU5EX1VQX1VMTCh2YWwgKiBSVU5USU1FX0lORk8oaTkx
NSktPmNzX3RpbWVzdGFtcF9mcmVxdWVuY3lfaHosCi0JCQkJMTAwMDAwMDAwMCk7Ci19Ci0KLXN0
YXRpYyBpbmxpbmUgdTY0IGk5MTVfY3NfdGltZXN0YW1wX3RpY2tzX3RvX25zKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1LCB1NjQgdmFsKQotewotCXJldHVybiBkaXZfdTY0KHZhbCAqIDEw
MDAwMDAwMDAsCi0JCSAgICAgICBSVU5USU1FX0lORk8oaTkxNSktPmNzX3RpbWVzdGFtcF9mcmVx
dWVuY3lfaHopOwotfQotCiAjZW5kaWYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZ2V0cGFyYW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYwpp
bmRleCBmOTYwMzJjNjBhMTIuLjc1YzNiZmMyNDg2ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2V0cGFyYW0uYwpAQCAtMTU0LDcgKzE1NCw3IEBAIGludCBpOTE1X2dldHBhcmFtX2lvY3RsKHN0
cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJCQlyZXR1cm4gLUVOT0RFVjsKIAkJ
YnJlYWs7CiAJY2FzZSBJOTE1X1BBUkFNX0NTX1RJTUVTVEFNUF9GUkVRVUVOQ1k6Ci0JCXZhbHVl
ID0gUlVOVElNRV9JTkZPKGk5MTUpLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5X2h6OworCQl2YWx1
ZSA9IGk5MTUtPmd0LmNsb2NrX2ZyZXF1ZW5jeTsKIAkJYnJlYWs7CiAJY2FzZSBJOTE1X1BBUkFN
X01NQVBfR1RUX0NPSEVSRU5UOgogCQl2YWx1ZSA9IElOVEVMX0lORk8oaTkxNSktPmhhc19jb2hl
cmVudF9nZ3R0OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJy
b3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMKaW5kZXggZDhjYWM0
YzU4ODFmLi44YjE2M2VlMWI4NmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ3B1X2Vycm9yLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3Iu
YwpAQCAtNDg1LDcgKzQ4NSw3IEBAIHN0YXRpYyB2b2lkIGVycm9yX3ByaW50X2NvbnRleHQoc3Ry
dWN0IGRybV9pOTE1X2Vycm9yX3N0YXRlX2J1ZiAqbSwKIAkJCQljb25zdCBjaGFyICpoZWFkZXIs
CiAJCQkJY29uc3Qgc3RydWN0IGk5MTVfZ2VtX2NvbnRleHRfY29yZWR1bXAgKmN0eCkKIHsKLQlj
b25zdCB1MzIgcGVyaW9kID0gUlVOVElNRV9JTkZPKG0tPmk5MTUpLT5jc190aW1lc3RhbXBfcGVy
aW9kX25zOworCWNvbnN0IHUzMiBwZXJpb2QgPSBtLT5pOTE1LT5ndC5jbG9ja19wZXJpb2RfbnM7
CiAKIAllcnJfcHJpbnRmKG0sICIlcyVzWyVkXSBwcmlvICVkLCBndWlsdHkgJWQgYWN0aXZlICVk
LCBydW50aW1lIHRvdGFsICVsbHVucywgYXZnICVsbHVuc1xuIiwKIAkJICAgaGVhZGVyLCBjdHgt
PmNvbW0sIGN0eC0+cGlkLCBjdHgtPnNjaGVkX2F0dHIucHJpb3JpdHksCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcGVyZi5jCmluZGV4IGY2NWMzMmJkOTcwZS4uMTEyYmE1ZjJjZTkwIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3BlcmYuYwpAQCAtMjAxLDYgKzIwMSw3IEBACiAjaW5jbHVkZSAiZ3QvaW50ZWxfZXhl
Y2xpc3RzX3N1Ym1pc3Npb24uaCIKICNpbmNsdWRlICJndC9pbnRlbF9ncHVfY29tbWFuZHMuaCIK
ICNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgorI2luY2x1ZGUgImd0L2ludGVsX2d0X2Nsb2NrX3V0
aWxzLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfbHJjLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfcmlu
Zy5oIgogCkBAIC0xNjM3LDcgKzE2MzgsOCBAQCBzdGF0aWMgaW50IGFsbG9jX25vYV93YWl0KHN0
cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiAJc3RydWN0IGRybV9pOTE1X2dlbV9vYmpl
Y3QgKmJvOwogCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOwogCWNvbnN0IHU2NCBkZWxheV90aWNrcyA9
IDB4ZmZmZmZmZmZmZmZmZmZmZiAtCi0JCWk5MTVfY3NfdGltZXN0YW1wX25zX3RvX3RpY2tzKGk5
MTUsIGF0b21pYzY0X3JlYWQoJnN0cmVhbS0+cGVyZi0+bm9hX3Byb2dyYW1taW5nX2RlbGF5KSk7
CisJCWludGVsX2d0X25zX3RvX2Nsb2NrX2ludGVydmFsKHN0cmVhbS0+cGVyZi0+aTkxNS0+Z2d0
dC52bS5ndCwKKwkJCQkJICAgICAgYXRvbWljNjRfcmVhZCgmc3RyZWFtLT5wZXJmLT5ub2FfcHJv
Z3JhbW1pbmdfZGVsYXkpKTsKIAljb25zdCB1MzIgYmFzZSA9IHN0cmVhbS0+ZW5naW5lLT5tbWlv
X2Jhc2U7CiAjZGVmaW5lIENTX0dQUih4KSBHRU44X1JJTkdfQ1NfR1BSKGJhc2UsIHgpCiAJdTMy
ICpiYXRjaCwgKnRzMCwgKmNzLCAqanVtcDsKQEAgLTM1MTgsNyArMzUyMCw4IEBAIGk5MTVfcGVy
Zl9vcGVuX2lvY3RsX2xvY2tlZChzdHJ1Y3QgaTkxNV9wZXJmICpwZXJmLAogCiBzdGF0aWMgdTY0
IG9hX2V4cG9uZW50X3RvX25zKHN0cnVjdCBpOTE1X3BlcmYgKnBlcmYsIGludCBleHBvbmVudCkK
IHsKLQlyZXR1cm4gaTkxNV9jc190aW1lc3RhbXBfdGlja3NfdG9fbnMocGVyZi0+aTkxNSwgMlVM
TCA8PCBleHBvbmVudCk7CisJcmV0dXJuIGludGVsX2d0X2Nsb2NrX2ludGVydmFsX3RvX25zKHBl
cmYtPmk5MTUtPmdndHQudm0uZ3QsCisJCQkJCSAgICAgMlVMTCA8PCBleHBvbmVudCk7CiB9CiAK
IC8qKgpAQCAtNDM3Miw4ICs0Mzc1LDggQEAgdm9pZCBpOTE1X3BlcmZfaW5pdChzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlpZiAocGVyZi0+b3BzLmVuYWJsZV9tZXRyaWNfc2V0KSB7
CiAJCW11dGV4X2luaXQoJnBlcmYtPmxvY2spOwogCi0JCW9hX3NhbXBsZV9yYXRlX2hhcmRfbGlt
aXQgPQotCQkJUlVOVElNRV9JTkZPKGk5MTUpLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5X2h6IC8g
MjsKKwkJLyogQ2hvb3NlIGEgcmVwcmVzZW50YXRpdmUgbGltaXQgKi8KKwkJb2Ffc2FtcGxlX3Jh
dGVfaGFyZF9saW1pdCA9IGk5MTUtPmd0LmNsb2NrX2ZyZXF1ZW5jeSAvIDI7CiAKIAkJbXV0ZXhf
aW5pdCgmcGVyZi0+bWV0cmljc19sb2NrKTsKIAkJaWRyX2luaXRfYmFzZSgmcGVyZi0+bWV0cmlj
c19pZHIsIDEpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNl
X2luZm8uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMKaW5kZXgg
ZWY3NjdmMDRjMzdjLi5mMmQ1YWU1OTA4MWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2ludGVsX2RldmljZV9pbmZvLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
ZGV2aWNlX2luZm8uYwpAQCAtMTE3LDE1MCArMTE3LDYgQEAgdm9pZCBpbnRlbF9kZXZpY2VfaW5m
b19wcmludF9ydW50aW1lKGNvbnN0IHN0cnVjdCBpbnRlbF9ydW50aW1lX2luZm8gKmluZm8sCiAJ
CQkJICAgICBzdHJ1Y3QgZHJtX3ByaW50ZXIgKnApCiB7CiAJZHJtX3ByaW50ZihwLCAicmF3Y2xr
IHJhdGU6ICV1IGtIelxuIiwgaW5mby0+cmF3Y2xrX2ZyZXEpOwotCWRybV9wcmludGYocCwgIkNT
IHRpbWVzdGFtcCBmcmVxdWVuY3k6ICV1IEh6XG4iLAotCQkgICBpbmZvLT5jc190aW1lc3RhbXBf
ZnJlcXVlbmN5X2h6KTsKLX0KLQotc3RhdGljIHUzMiByZWFkX3JlZmVyZW5jZV90c19mcmVxKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKLXsKLQl1MzIgdHNfb3ZlcnJpZGUgPSBp
bnRlbF91bmNvcmVfcmVhZCgmZGV2X3ByaXYtPnVuY29yZSwKLQkJCQkJICAgIEdFTjlfVElNRVNU
QU1QX09WRVJSSURFKTsKLQl1MzIgYmFzZV9mcmVxLCBmcmFjX2ZyZXE7Ci0KLQliYXNlX2ZyZXEg
PSAoKHRzX292ZXJyaWRlICYgR0VOOV9USU1FU1RBTVBfT1ZFUlJJREVfVVNfQ09VTlRFUl9ESVZJ
REVSX01BU0spID4+Ci0JCSAgICAgR0VOOV9USU1FU1RBTVBfT1ZFUlJJREVfVVNfQ09VTlRFUl9E
SVZJREVSX1NISUZUKSArIDE7Ci0JYmFzZV9mcmVxICo9IDEwMDAwMDA7Ci0KLQlmcmFjX2ZyZXEg
PSAoKHRzX292ZXJyaWRlICYKLQkJICAgICAgR0VOOV9USU1FU1RBTVBfT1ZFUlJJREVfVVNfQ09V
TlRFUl9ERU5PTUlOQVRPUl9NQVNLKSA+PgotCQkgICAgIEdFTjlfVElNRVNUQU1QX09WRVJSSURF
X1VTX0NPVU5URVJfREVOT01JTkFUT1JfU0hJRlQpOwotCWZyYWNfZnJlcSA9IDEwMDAwMDAgLyAo
ZnJhY19mcmVxICsgMSk7Ci0KLQlyZXR1cm4gYmFzZV9mcmVxICsgZnJhY19mcmVxOwotfQotCi1z
dGF0aWMgdTMyIGdlbjEwX2dldF9jcnlzdGFsX2Nsb2NrX2ZyZXEoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2LAotCQkJCQl1MzIgcnBtX2NvbmZpZ19yZWcpCi17Ci0JdTMyIGYxOV8y
X21oeiA9IDE5MjAwMDAwOwotCXUzMiBmMjRfbWh6ID0gMjQwMDAwMDA7Ci0JdTMyIGNyeXN0YWxf
Y2xvY2sgPSAocnBtX2NvbmZpZ19yZWcgJgotCQkJICAgICBHRU45X1JQTV9DT05GSUcwX0NSWVNU
QUxfQ0xPQ0tfRlJFUV9NQVNLKSA+PgotCQkJICAgIEdFTjlfUlBNX0NPTkZJRzBfQ1JZU1RBTF9D
TE9DS19GUkVRX1NISUZUOwotCi0Jc3dpdGNoIChjcnlzdGFsX2Nsb2NrKSB7Ci0JY2FzZSBHRU45
X1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV8xOV8yX01IWjoKLQkJcmV0dXJuIGYxOV8y
X21oejsKLQljYXNlIEdFTjlfUlBNX0NPTkZJRzBfQ1JZU1RBTF9DTE9DS19GUkVRXzI0X01IWjoK
LQkJcmV0dXJuIGYyNF9taHo7Ci0JZGVmYXVsdDoKLQkJTUlTU0lOR19DQVNFKGNyeXN0YWxfY2xv
Y2spOwotCQlyZXR1cm4gMDsKLQl9Ci19Ci0KLXN0YXRpYyB1MzIgZ2VuMTFfZ2V0X2NyeXN0YWxf
Y2xvY2tfZnJlcShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkJCXUzMiBy
cG1fY29uZmlnX3JlZykKLXsKLQl1MzIgZjE5XzJfbWh6ID0gMTkyMDAwMDA7Ci0JdTMyIGYyNF9t
aHogPSAyNDAwMDAwMDsKLQl1MzIgZjI1X21oeiA9IDI1MDAwMDAwOwotCXUzMiBmMzhfNF9taHog
PSAzODQwMDAwMDsKLQl1MzIgY3J5c3RhbF9jbG9jayA9IChycG1fY29uZmlnX3JlZyAmCi0JCQkg
ICAgIEdFTjExX1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV9NQVNLKSA+PgotCQkJICAg
IEdFTjExX1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV9TSElGVDsKLQotCXN3aXRjaCAo
Y3J5c3RhbF9jbG9jaykgewotCWNhc2UgR0VOMTFfUlBNX0NPTkZJRzBfQ1JZU1RBTF9DTE9DS19G
UkVRXzI0X01IWjoKLQkJcmV0dXJuIGYyNF9taHo7Ci0JY2FzZSBHRU4xMV9SUE1fQ09ORklHMF9D
UllTVEFMX0NMT0NLX0ZSRVFfMTlfMl9NSFo6Ci0JCXJldHVybiBmMTlfMl9taHo7Ci0JY2FzZSBH
RU4xMV9SUE1fQ09ORklHMF9DUllTVEFMX0NMT0NLX0ZSRVFfMzhfNF9NSFo6Ci0JCXJldHVybiBm
MzhfNF9taHo7Ci0JY2FzZSBHRU4xMV9SUE1fQ09ORklHMF9DUllTVEFMX0NMT0NLX0ZSRVFfMjVf
TUhaOgotCQlyZXR1cm4gZjI1X21oejsKLQlkZWZhdWx0OgotCQlNSVNTSU5HX0NBU0UoY3J5c3Rh
bF9jbG9jayk7Ci0JCXJldHVybiAwOwotCX0KLX0KLQotc3RhdGljIHUzMiByZWFkX3RpbWVzdGFt
cF9mcmVxdWVuY3koc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQotewotCXN0cnVj
dCBpbnRlbF91bmNvcmUgKnVuY29yZSA9ICZkZXZfcHJpdi0+dW5jb3JlOwotCXUzMiBmMTJfNV9t
aHogPSAxMjUwMDAwMDsKLQl1MzIgZjE5XzJfbWh6ID0gMTkyMDAwMDA7Ci0JdTMyIGYyNF9taHog
PSAyNDAwMDAwMDsKLQotCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDw9IDQpIHsKLQkJLyogUFJN
cyBzYXk6Ci0JCSAqCi0JCSAqICAgICAiVGhlIHZhbHVlIGluIHRoaXMgcmVnaXN0ZXIgaW5jcmVt
ZW50cyBvbmNlIGV2ZXJ5IDE2Ci0JCSAqICAgICAgaGNsa3MuIiAodGhyb3VnaCB0aGUg4oCcQ2xv
Y2tpbmcgQ29uZmlndXJhdGlvbuKAnQotCQkgKiAgICAgICjigJxDTEtDRkfigJ0pIE1DSEJBUiBy
ZWdpc3RlcikKLQkJICovCi0JCXJldHVybiBSVU5USU1FX0lORk8oZGV2X3ByaXYpLT5yYXdjbGtf
ZnJlcSAqIDEwMDAgLyAxNjsKLQl9IGVsc2UgaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPD0gOCkg
ewotCQkvKiBQUk1zIHNheToKLQkJICoKLQkJICogICAgICJUaGUgUENVIFRTQyBjb3VudHMgMTBu
cyBpbmNyZW1lbnRzOyB0aGlzIHRpbWVzdGFtcAotCQkgKiAgICAgIHJlZmxlY3RzIGJpdHMgMzg6
MyBvZiB0aGUgVFNDIChpLmUuIDgwbnMgZ3JhbnVsYXJpdHksCi0JCSAqICAgICAgcm9sbGluZyBv
dmVyIGV2ZXJ5IDEuNSBob3VycykuCi0JCSAqLwotCQlyZXR1cm4gZjEyXzVfbWh6OwotCX0gZWxz
ZSBpZiAoSU5URUxfR0VOKGRldl9wcml2KSA8PSA5KSB7Ci0JCXUzMiBjdGNfcmVnID0gaW50ZWxf
dW5jb3JlX3JlYWQodW5jb3JlLCBDVENfTU9ERSk7Ci0JCXUzMiBmcmVxID0gMDsKLQotCQlpZiAo
KGN0Y19yZWcgJiBDVENfU09VUkNFX1BBUkFNRVRFUl9NQVNLKSA9PSBDVENfU09VUkNFX0RJVklE
RV9MT0dJQykgewotCQkJZnJlcSA9IHJlYWRfcmVmZXJlbmNlX3RzX2ZyZXEoZGV2X3ByaXYpOwot
CQl9IGVsc2UgewotCQkJZnJlcSA9IElTX0dFTjlfTFAoZGV2X3ByaXYpID8gZjE5XzJfbWh6IDog
ZjI0X21oejsKLQotCQkJLyogTm93IGZpZ3VyZSBvdXQgaG93IHRoZSBjb21tYW5kIHN0cmVhbSdz
IHRpbWVzdGFtcAotCQkJICogcmVnaXN0ZXIgaW5jcmVtZW50cyBmcm9tIHRoaXMgZnJlcXVlbmN5
IChpdCBtaWdodAotCQkJICogaW5jcmVtZW50IG9ubHkgZXZlcnkgZmV3IGNsb2NrIGN5Y2xlKS4K
LQkJCSAqLwotCQkJZnJlcSA+Pj0gMyAtICgoY3RjX3JlZyAmIENUQ19TSElGVF9QQVJBTUVURVJf
TUFTSykgPj4KLQkJCQkgICAgICBDVENfU0hJRlRfUEFSQU1FVEVSX1NISUZUKTsKLQkJfQotCi0J
CXJldHVybiBmcmVxOwotCX0gZWxzZSBpZiAoSU5URUxfR0VOKGRldl9wcml2KSA8PSAxMikgewot
CQl1MzIgY3RjX3JlZyA9IGludGVsX3VuY29yZV9yZWFkKHVuY29yZSwgQ1RDX01PREUpOwotCQl1
MzIgZnJlcSA9IDA7Ci0KLQkJLyogRmlyc3QgZmlndXJlIG91dCB0aGUgcmVmZXJlbmNlIGZyZXF1
ZW5jeS4gVGhlcmUgYXJlIDIgd2F5cwotCQkgKiB3ZSBjYW4gY29tcHV0ZSB0aGUgZnJlcXVlbmN5
LCBlaXRoZXIgdGhyb3VnaCB0aGUKLQkJICogVElNRVNUQU1QX09WRVJSSURFIHJlZ2lzdGVyIG9y
IHRocm91Z2ggUlBNX0NPTkZJRy4gQ1RDX01PREUKLQkJICogdGVsbHMgdXMgd2hpY2ggb25lIHdl
IHNob3VsZCB1c2UuCi0JCSAqLwotCQlpZiAoKGN0Y19yZWcgJiBDVENfU09VUkNFX1BBUkFNRVRF
Ul9NQVNLKSA9PSBDVENfU09VUkNFX0RJVklERV9MT0dJQykgewotCQkJZnJlcSA9IHJlYWRfcmVm
ZXJlbmNlX3RzX2ZyZXEoZGV2X3ByaXYpOwotCQl9IGVsc2UgewotCQkJdTMyIHJwbV9jb25maWdf
cmVnID0gaW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBSUE1fQ09ORklHMCk7Ci0KLQkJCWlmIChJ
TlRFTF9HRU4oZGV2X3ByaXYpIDw9IDEwKQotCQkJCWZyZXEgPSBnZW4xMF9nZXRfY3J5c3RhbF9j
bG9ja19mcmVxKGRldl9wcml2LAotCQkJCQkJCQlycG1fY29uZmlnX3JlZyk7Ci0JCQllbHNlCi0J
CQkJZnJlcSA9IGdlbjExX2dldF9jcnlzdGFsX2Nsb2NrX2ZyZXEoZGV2X3ByaXYsCi0JCQkJCQkJ
CXJwbV9jb25maWdfcmVnKTsKLQotCQkJLyogTm93IGZpZ3VyZSBvdXQgaG93IHRoZSBjb21tYW5k
IHN0cmVhbSdzIHRpbWVzdGFtcAotCQkJICogcmVnaXN0ZXIgaW5jcmVtZW50cyBmcm9tIHRoaXMg
ZnJlcXVlbmN5IChpdCBtaWdodAotCQkJICogaW5jcmVtZW50IG9ubHkgZXZlcnkgZmV3IGNsb2Nr
IGN5Y2xlKS4KLQkJCSAqLwotCQkJZnJlcSA+Pj0gMyAtICgocnBtX2NvbmZpZ19yZWcgJgotCQkJ
CSAgICAgICBHRU4xMF9SUE1fQ09ORklHMF9DVENfU0hJRlRfUEFSQU1FVEVSX01BU0spID4+Ci0J
CQkJICAgICAgR0VOMTBfUlBNX0NPTkZJRzBfQ1RDX1NISUZUX1BBUkFNRVRFUl9TSElGVCk7Ci0J
CX0KLQotCQlyZXR1cm4gZnJlcTsKLQl9Ci0KLQlNSVNTSU5HX0NBU0UoIlVua25vd24gZ2VuLCB1
bmFibGUgdG8gcmVhZCBjb21tYW5kIHN0cmVhbWVyIHRpbWVzdGFtcCBmcmVxdWVuY3lcbiIpOwot
CXJldHVybiAwOwogfQogCiAjdW5kZWYgSU5URUxfVkdBX0RFVklDRQpAQCAtNTA1LDE5ICszNjEs
NiBAQCB2b2lkIGludGVsX2RldmljZV9pbmZvX3J1bnRpbWVfaW5pdChzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYpCiAJcnVudGltZS0+cmF3Y2xrX2ZyZXEgPSBpbnRlbF9yZWFkX3Jh
d2NsayhkZXZfcHJpdik7CiAJZHJtX2RiZygmZGV2X3ByaXYtPmRybSwgInJhd2NsayByYXRlOiAl
ZCBrSHpcbiIsIHJ1bnRpbWUtPnJhd2Nsa19mcmVxKTsKIAotCS8qIEluaXRpYWxpemUgY29tbWFu
ZCBzdHJlYW0gdGltZXN0YW1wIGZyZXF1ZW5jeSAqLwotCXJ1bnRpbWUtPmNzX3RpbWVzdGFtcF9m
cmVxdWVuY3lfaHogPQotCQlyZWFkX3RpbWVzdGFtcF9mcmVxdWVuY3koZGV2X3ByaXYpOwotCWlm
IChydW50aW1lLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5X2h6KSB7Ci0JCXJ1bnRpbWUtPmNzX3Rp
bWVzdGFtcF9wZXJpb2RfbnMgPQotCQkJaTkxNV9jc190aW1lc3RhbXBfdGlja3NfdG9fbnMoZGV2
X3ByaXYsIDEpOwotCQlkcm1fZGJnKCZkZXZfcHJpdi0+ZHJtLAotCQkJIkNTIHRpbWVzdGFtcCB3
cmFwYXJvdW5kIGluICVsbGRtc1xuIiwKLQkJCWRpdl91NjQobXVsX3UzMl91MzIocnVudGltZS0+
Y3NfdGltZXN0YW1wX3BlcmlvZF9ucywKLQkJCQkJICAgIFMzMl9NQVgpLAotCQkJCVVTRUNfUEVS
X1NFQykpOwotCX0KLQogCWlmICghSEFTX0RJU1BMQVkoZGV2X3ByaXYpKSB7CiAJCWRldl9wcml2
LT5kcm0uZHJpdmVyX2ZlYXR1cmVzICY9IH4oRFJJVkVSX01PREVTRVQgfAogCQkJCQkJICAgRFJJ
VkVSX0FUT01JQyk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZp
Y2VfaW5mby5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uaAppbmRl
eCBkOTJmYTA0MWM3MDAuLjE3ZDBmZGI5NGQyZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF9kZXZpY2VfaW5mby5oCkBAIC0yMjQsOSArMjI0LDYgQEAgc3RydWN0IGludGVsX3J1bnRpbWVf
aW5mbyB7CiAJdTggbnVtX3NjYWxlcnNbSTkxNV9NQVhfUElQRVNdOwogCiAJdTMyIHJhd2Nsa19m
cmVxOwotCi0JdTMyIGNzX3RpbWVzdGFtcF9mcmVxdWVuY3lfaHo7Ci0JdTMyIGNzX3RpbWVzdGFt
cF9wZXJpb2RfbnM7CiB9OwogCiBzdHJ1Y3QgaW50ZWxfZHJpdmVyX2NhcHMgewpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcGVyZi5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcGVyZi5jCmluZGV4IGRlYmJhYzY2MDUxOS4uZTlk
ODZkYWI4Njc3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkx
NV9wZXJmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcGVyZi5j
CkBAIC0yNjIsNyArMjYyLDcgQEAgc3RhdGljIGludCBsaXZlX25vYV9kZWxheSh2b2lkICphcmcp
CiAKIAlkZWxheSA9IGludGVsX3JlYWRfc3RhdHVzX3BhZ2Uoc3RyZWFtLT5lbmdpbmUsIDB4MTAy
KTsKIAlkZWxheSAtPSBpbnRlbF9yZWFkX3N0YXR1c19wYWdlKHN0cmVhbS0+ZW5naW5lLCAweDEw
MCk7Ci0JZGVsYXkgPSBpOTE1X2NzX3RpbWVzdGFtcF90aWNrc190b19ucyhpOTE1LCBkZWxheSk7
CisJZGVsYXkgPSBpbnRlbF9ndF9jbG9ja19pbnRlcnZhbF90b19ucyhzdHJlYW0tPmVuZ2luZS0+
Z3QsIGRlbGF5KTsKIAlwcl9pbmZvKCJHUFUgZGVsYXk6ICV1bnMsIGV4cGVjdGVkICVsbHVuc1xu
IiwKIAkJZGVsYXksIGV4cGVjdGVkKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvc2VsZnRlc3RzL2k5MTVfcmVxdWVzdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRl
c3RzL2k5MTVfcmVxdWVzdC5jCmluZGV4IGI4YzU5MjBkMWZmMy4uZDJhNjc4YTI0OTdlIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9yZXF1ZXN0LmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcmVxdWVzdC5jCkBAIC0zMyw2
ICszMyw3IEBACiAjaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3BtLmgiCiAjaW5jbHVkZSAiZ3Qv
aW50ZWxfZW5naW5lX3VzZXIuaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgorI2luY2x1ZGUg
Imd0L2ludGVsX2d0X2Nsb2NrX3V0aWxzLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZ3RfcmVxdWVz
dHMuaCIKICNpbmNsdWRlICJndC9zZWxmdGVzdF9lbmdpbmVfaGVhcnRiZWF0LmgiCiAKQEAgLTE1
NjAsNyArMTU2MSw3IEBAIHN0YXRpYyB1MzIgdHJpZmlsdGVyKHUzMiAqYSkKIAogc3RhdGljIHU2
NCBjeWNsZXNfdG9fbnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCB1MzIgY3ljbGVz
KQogewotCXU2NCBucyA9IGk5MTVfY3NfdGltZXN0YW1wX3RpY2tzX3RvX25zKGVuZ2luZS0+aTkx
NSwgY3ljbGVzKTsKKwl1NjQgbnMgPSBpbnRlbF9ndF9jbG9ja19pbnRlcnZhbF90b19ucyhlbmdp
bmUtPmd0LCBjeWNsZXMpOwogCiAJcmV0dXJuIERJVl9ST1VORF9DTE9TRVNUKG5zLCAxIDw8IFRG
X0JJQVMpOwogfQotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVl
ZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9pbnRlbC1nZngK

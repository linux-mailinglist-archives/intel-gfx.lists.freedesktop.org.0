Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 426DD255CC
	for <lists+intel-gfx@lfdr.de>; Tue, 21 May 2019 18:40:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6ACB389322;
	Tue, 21 May 2019 16:40:34 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7AC1189322
 for <intel-gfx@lists.freedesktop.org>; Tue, 21 May 2019 16:40:33 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 21 May 2019 09:40:33 -0700
X-ExtLoop1: 1
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga007.jf.intel.com with SMTP; 21 May 2019 09:40:30 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Tue, 21 May 2019 19:40:29 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 21 May 2019 19:40:25 +0300
Message-Id: <20190521164025.30225-2-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190521164025.30225-1-ville.syrjala@linux.intel.com>
References: <20190521164025.30225-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v5 2/2] drm/i915: Make sure we have enough
 memory bandwidth on ICL
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCklD
TCBoYXMgc28gbWFueSBwbGFuZXMgdGhhdCBpdCBjYW4gZWFzaWx5IGV4Y2VlZCB0aGUgbWF4aW11
bQplZmZlY3RpdmUgbWVtb3J5IGJhbmR3aWR0aCBvZiB0aGUgc3lzdGVtLiBXZSBtdXN0IHRoZXJl
Zm9yZSBjaGVjawp0aGF0IHdlIGRvbid0IGV4Y2VlZCB0aGF0IGxpbWl0LgoKVGhlIGFsZ29yaXRo
bSBpcyB2ZXJ5IG1hZ2ljIG51bWJlciBoZWF2eSBhbmQgbGFja3Mgc3VmZmljaWVudApleHBsYW5h
dGlvbiBmb3Igbm93LiBXZSBhbHNvIGhhdmUgbm8gc2FuZSB3YXkgdG8gcXVlcnkgdGhlCm1lbW9y
eSBjbG9jayBhbmQgdGltaW5ncywgc28gd2UgbXVzdCByZWx5IG9uIGEgY29tYmluYXRpb24gb2YK
cmF3IHJlYWRvdXQgZnJvbSB0aGUgbWVtb3J5IGNvbnRyb2xsZXIgYW5kIGhhcmRjb2RlZCBhc3N1
bXB0aW9ucy4KVGhlIG1lbW9yeSBjb250cm9sbGVyIHZhbHVlcyBvYnZpb3VzbHkgY2hhbmdlIGFz
IHRoZSBzeXN0ZW0KanVtcHMgYmV0d2VlbiB0aGUgZGlmZmVyZW50IFNBR1YgcG9pbnRzLCBzbyB3
ZSB0cnkgdG8gc3RhYmlsaXplCml0IGZpcnN0IGJ5IGRpc2FibGluZyBTQUdWIGZvciB0aGUgZHVy
YXRpb24gb2YgdGhlIHJlYWRvdXQuCgpUaGUgdXRpbGl6ZWQgYmFuZHdpZHRoIGlzIHRyYWNrZWQg
dmlhIGEgZGV2aWNlIHdpZGUgYXRvbWljCnByaXZhdGUgb2JqZWN0LiBUaGF0IGlzIGFjdHVhbGx5
IG5vdCByb2J1c3QgYmVjYXVzZSB3ZSBjYW4ndAphZmZvcmQgdG8gZW5mb3JjZSBzdHJpY3QgZ2xv
YmFsIG9yZGVyaW5nIGJldHdlZW4gdGhlIHBpcGVzLgpUaHVzIEkgdGhpbmsgSSdsbCBuZWVkIHRv
IGNoYW5nZSB0aGlzIHRvIHNpbXBseSBjaG9wIHVwIHRoZQphdmFpbGFibGUgYmFuZHdpZHRoIGJl
dHdlZW4gYWxsIHRoZSBhY3RpdmUgcGlwZXMuIEVhY2ggcGlwZQpjYW4gdGhlbiBkbyB3aGF0ZXZl
ciBpdCB3YW50cyBhcyBsb25nIGFzIGl0IGRvZXNuJ3QgZXhjZWVkCml0cyBidWRnZXQuIFRoYXQg
c2NoZW1lIHdpbGwgYWxzbyByZXF1aXJlIHRoYXQgd2UgYXNzdW1lIHRoYXQKYW55IG51bWJlciBv
ZiBwbGFuZXMgY291bGQgYmUgYWN0aXZlIGF0IGFueSB0aW1lLgoKVE9ETzogbWFrZSBpdCByb2J1
c3QgYW5kIGRlYWwgd2l0aCBhbGwgdGhlIG9wZW4gcXVlc3Rpb25zCgp2MjogU2xlZXAgbG9uZ2Vy
IGFmdGVyIGRpc2FibGluZyBTQUdWCnYzOiBQb2xsIGZvciB0aGUgZGNsayB0byBnZXQgcmFpc2Vk
IChzZWVuIGl0IHRha2UgMjUwbXMhKQogICAgSWYgdGhlIHN5c3RlbSBoYXMgMjEzM01UL3MgbWVt
b3J5IHRoZW4gd2UgcG9pbnRsZXNzbHkKICAgIHdhaXQgb25lIGZ1bGwgc2Vjb25kIDooCnY0OiBV
c2UgdGhlIG5ldyBwY29kZSBpbnRlcmZhY2UgdG8gZ2V0IHRoZSBxZ3YgcG9pbnRzIHJhdGhlcgog
ICAgdGhhdCB1c2luZyBoYXJkY29kZWQgbnVtYmVycwp2NTogTW92ZSB0aGUgcGNvZGUgc3R1ZmYg
aW50byBpbnRlbF9idy5jIChNYXR0KQogICAgcy9pbnRlbF9zYWd2X2luZm8vaW50ZWxfcWd2X2lu
Zm8vCiAgICBEbyB0aGUgTlYxMi9QMDEwIGFzIHBlciBzcGVjIGZvciBub3cgKE1hdHQpCiAgICBz
L0lTX0lDRUxBS0UvSVNfR0VOMTEvCgpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZp
bGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogTWF0dCBSb3BlciA8bWF0
dGhldy5kLnJvcGVyQGludGVsLmNvbT4KQWNrZWQtYnk6IENsaW50IFRheWxvciA8Q2xpbnRvbi5B
LlRheWxvckBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgICAg
ICAgICAgICAgfCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyAgICAgICAg
ICAgfCAgIDIgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgICAgICAgfCAg
IDggKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCAgICAgICAgICAgfCAgIDMgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYXRvbWljX3BsYW5lLmMgfCAgMjcgKysKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2ludGVsX2F0b21pY19wbGFuZS5oIHwgICAyICsKIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX2J3LmMgICAgICAgICAgIHwgNDE1ICsrKysrKysrKysrKysrKysrKysr
KysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2J3LmggICAgICAgICAgIHwgIDQ3ICsrKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGlzcGxheS5jICAgICAgfCAgNDAgKystCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcnYuaCAgICAgICAgICB8ICAgMiArCiAxMCBmaWxlcyBj
aGFuZ2VkLCA1NDYgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAw
NjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2J3LmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9idy5oCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQppbmRleCA2
ODEwNmZlMzVhMDQuLjEzOWEwZmMxOTM5MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvTWFrZWZpbGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKQEAgLTEzOCw2
ICsxMzgsNyBAQCBpOTE1LXkgKz0gaW50ZWxfYXVkaW8ubyBcCiAJICBpbnRlbF9hdG9taWMubyBc
CiAJICBpbnRlbF9hdG9taWNfcGxhbmUubyBcCiAJICBpbnRlbF9iaW9zLm8gXAorCSAgaW50ZWxf
YncubyBcCiAJICBpbnRlbF9jZGNsay5vIFwKIAkgIGludGVsX2NvbG9yLm8gXAogCSAgaW50ZWxf
Y29tYm9fcGh5Lm8gXApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKaW5kZXggMmM3YTQzMThkMTNjLi41
MmJlNTI1YjhiMmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwpAQCAtNjAsNiArNjAsNyBAQAog
I2luY2x1ZGUgImk5MTVfdmdwdS5oIgogI2luY2x1ZGUgImludGVsX2FjcGkuaCIKICNpbmNsdWRl
ICJpbnRlbF9hdWRpby5oIgorI2luY2x1ZGUgImludGVsX2J3LmgiCiAjaW5jbHVkZSAiaW50ZWxf
Y2RjbGsuaCIKICNpbmNsdWRlICJpbnRlbF9jc3IuaCIKICNpbmNsdWRlICJpbnRlbF9kcC5oIgpA
QCAtMTY1Niw2ICsxNjU3LDcgQEAgc3RhdGljIGludCBpOTE1X2RyaXZlcl9pbml0X2h3KHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkgKi8KIAlpbnRlbF9nZXRfZHJhbV9pbmZv
KGRldl9wcml2KTsKIAorCWludGVsX2J3X2luaXRfaHcoZGV2X3ByaXYpOwogCiAJcmV0dXJuIDA7
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IDFhZDM4MThkMjY3Ni4uNTU4ZDA2NWRiMzYx
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTU0LDYgKzU0LDcgQEAKICNpbmNsdWRlIDxk
cm0vZHJtX2NhY2hlLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV91dGlsLmg+CiAjaW5jbHVkZSA8ZHJt
L2RybV9kc2MuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2F0b21pYy5oPgogI2luY2x1ZGUgPGRybS9k
cm1fY29ubmVjdG9yLmg+CiAjaW5jbHVkZSA8ZHJtL2k5MTVfbWVpX2hkY3BfaW50ZXJmYWNlLmg+
CiAKQEAgLTE4NDEsNiArMTg0MiwxMyBAQCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSB7CiAJCX0g
dHlwZTsKIAl9IGRyYW1faW5mbzsKIAorCXN0cnVjdCBpbnRlbF9id19pbmZvIHsKKwkJaW50IG51
bV9wbGFuZXM7CisJCWludCBkZXJhdGVkYndbM107CisJfSBtYXhfYndbNl07CisKKwlzdHJ1Y3Qg
ZHJtX3ByaXZhdGVfb2JqIGJ3X29iajsKKwogCXN0cnVjdCBpOTE1X3J1bnRpbWVfcG0gcnVudGlt
ZV9wbTsKIAogCXN0cnVjdCB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X3JlZy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAppbmRleCBlOTdjNDdmY2E2
NDUuLjM5OTM2NmE0MTUyNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9y
ZWcuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCkBAIC04Nzc0LDYgKzg3
NzQsOSBAQCBlbnVtIHsKICNkZWZpbmUgICBHRU42X1BDT0RFX1dSSVRFX01JTl9GUkVRX1RBQkxF
CTB4OAogI2RlZmluZSAgIEdFTjZfUENPREVfUkVBRF9NSU5fRlJFUV9UQUJMRQkweDkKICNkZWZp
bmUgICBHRU42X1JFQURfT0NfUEFSQU1TCQkJMHhjCisjZGVmaW5lICAgSUNMX1BDT0RFX01FTV9T
VUJTWVNZU1RFTV9JTkZPCTB4ZAorI2RlZmluZSAgICAgSUNMX1BDT0RFX01FTV9TU19SRUFEX0dM
T0JBTF9JTkZPCSgweDAgPDwgOCkKKyNkZWZpbmUgICAgIElDTF9QQ09ERV9NRU1fU1NfUkVBRF9R
R1ZfUE9JTlRfSU5GTyhwb2ludCkJKCgocG9pbnQpIDw8IDE2KSB8ICgweDEgPDwgOCkpCiAjZGVm
aW5lICAgR0VONl9QQ09ERV9SRUFEX0RfQ09NUAkJMHgxMAogI2RlZmluZSAgIEdFTjZfUENPREVf
V1JJVEVfRF9DT01QCQkweDExCiAjZGVmaW5lICAgSFNXX1BDT0RFX0RFX1dSSVRFX0ZSRVFfUkVR
CQkweDE3CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9hdG9taWNfcGxh
bmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2F0b21pY19wbGFuZS5jCmluZGV4IGQx
MTY4MWQ3MWFkZC4uNThlYTFiNjcyYTFhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pbnRlbF9hdG9taWNfcGxhbmUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9h
dG9taWNfcGxhbmUuYwpAQCAtMTE0LDYgKzExNCwyOSBAQCBpbnRlbF9wbGFuZV9kZXN0cm95X3N0
YXRlKHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAogCWRybV9hdG9taWNfaGVscGVyX3BsYW5lX2Rl
c3Ryb3lfc3RhdGUocGxhbmUsIHN0YXRlKTsKIH0KIAordW5zaWduZWQgaW50IGludGVsX3BsYW5l
X2RhdGFfcmF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKKwkJ
CQkgICBjb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlKQoreworCWNv
bnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0gcGxhbmVfc3RhdGUtPmJhc2UuZmI7CisJ
dW5zaWduZWQgaW50IGNwcDsKKworCWlmICghcGxhbmVfc3RhdGUtPmJhc2UudmlzaWJsZSkKKwkJ
cmV0dXJuIDA7CisKKwljcHAgPSBmYi0+Zm9ybWF0LT5jcHBbMF07CisKKwkvKgorCSAqIEJhc2Vk
IG9uIEhTRCM6MTQwODcxNTQ5MworCSAqIE5WMTIgY3BwID09IDQsIFAwMTAgY3BwID09IDgKKwkg
KgorCSAqIEZJWE1FIHdoYXQgaXMgdGhlIGxvZ2ljIGJlaGluZCB0aGlzPworCSAqLworCWlmIChm
Yi0+Zm9ybWF0LT5pc195dXYgJiYgZmItPmZvcm1hdC0+bnVtX3BsYW5lcyA+IDEpCisJCWNwcCAq
PSA0OworCisJcmV0dXJuIGNwcCAqIGNydGNfc3RhdGUtPnBpeGVsX3JhdGU7Cit9CisKIGludCBp
bnRlbF9wbGFuZV9hdG9taWNfY2hlY2tfd2l0aF9zdGF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUsCiAJCQkJCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpu
ZXdfY3J0Y19zdGF0ZSwKIAkJCQkJY29uc3Qgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpvbGRf
cGxhbmVfc3RhdGUsCkBAIC0xMjUsNiArMTQ4LDcgQEAgaW50IGludGVsX3BsYW5lX2F0b21pY19j
aGVja193aXRoX3N0YXRlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y18K
IAluZXdfY3J0Y19zdGF0ZS0+YWN0aXZlX3BsYW5lcyAmPSB+QklUKHBsYW5lLT5pZCk7CiAJbmV3
X2NydGNfc3RhdGUtPm52MTJfcGxhbmVzICY9IH5CSVQocGxhbmUtPmlkKTsKIAluZXdfY3J0Y19z
dGF0ZS0+YzhfcGxhbmVzICY9IH5CSVQocGxhbmUtPmlkKTsKKwluZXdfY3J0Y19zdGF0ZS0+ZGF0
YV9yYXRlW3BsYW5lLT5pZF0gPSAwOwogCW5ld19wbGFuZV9zdGF0ZS0+YmFzZS52aXNpYmxlID0g
ZmFsc2U7CiAKIAlpZiAoIW5ld19wbGFuZV9zdGF0ZS0+YmFzZS5jcnRjICYmICFvbGRfcGxhbmVf
c3RhdGUtPmJhc2UuY3J0YykKQEAgLTE0OSw2ICsxNzMsOSBAQCBpbnQgaW50ZWxfcGxhbmVfYXRv
bWljX2NoZWNrX3dpdGhfc3RhdGUoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9j
cnRjXwogCWlmIChuZXdfcGxhbmVfc3RhdGUtPmJhc2UudmlzaWJsZSB8fCBvbGRfcGxhbmVfc3Rh
dGUtPmJhc2UudmlzaWJsZSkKIAkJbmV3X2NydGNfc3RhdGUtPnVwZGF0ZV9wbGFuZXMgfD0gQklU
KHBsYW5lLT5pZCk7CiAKKwluZXdfY3J0Y19zdGF0ZS0+ZGF0YV9yYXRlW3BsYW5lLT5pZF0gPQor
CQlpbnRlbF9wbGFuZV9kYXRhX3JhdGUobmV3X2NydGNfc3RhdGUsIG5ld19wbGFuZV9zdGF0ZSk7
CisKIAlyZXR1cm4gaW50ZWxfcGxhbmVfYXRvbWljX2NhbGNfY2hhbmdlcyhvbGRfY3J0Y19zdGF0
ZSwKIAkJCQkJICAgICAgICZuZXdfY3J0Y19zdGF0ZS0+YmFzZSwKIAkJCQkJICAgICAgIG9sZF9w
bGFuZV9zdGF0ZSwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2F0b21p
Y19wbGFuZS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYXRvbWljX3BsYW5lLmgKaW5k
ZXggMTQ2Nzg2MjA0NDBmLi4wYTk2NTEzNzZkMGUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2ludGVsX2F0b21pY19wbGFuZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2lu
dGVsX2F0b21pY19wbGFuZS5oCkBAIC0xNSw2ICsxNSw4IEBAIHN0cnVjdCBpbnRlbF9wbGFuZV9z
dGF0ZTsKIAogZXh0ZXJuIGNvbnN0IHN0cnVjdCBkcm1fcGxhbmVfaGVscGVyX2Z1bmNzIGludGVs
X3BsYW5lX2hlbHBlcl9mdW5jczsKIAordW5zaWduZWQgaW50IGludGVsX3BsYW5lX2RhdGFfcmF0
ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKKwkJCQkgICBjb25z
dCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlKTsKIHZvaWQgaW50ZWxfdXBk
YXRlX3BsYW5lKHN0cnVjdCBpbnRlbF9wbGFuZSAqcGxhbmUsCiAJCQljb25zdCBzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJCWNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9z
dGF0ZSAqcGxhbmVfc3RhdGUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfYncuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2J3LmMKbmV3IGZpbGUgbW9kZSAx
MDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi40ZDNjZGQ4MTAzNWIKLS0tIC9kZXYvbnVsbAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9idy5jCkBAIC0wLDAgKzEsNDE1IEBACisvLyBT
UERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCisvKgorICogQ29weXJpZ2h0IMKpIDIwMTkgSW50
ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfc3RhdGVfaGVs
cGVyLmg+CisKKyNpbmNsdWRlICJpbnRlbF9idy5oIgorI2luY2x1ZGUgImludGVsX2Rydi5oIgor
I2luY2x1ZGUgImludGVsX3NpZGViYW5kLmgiCisKKy8qIFBhcmFtZXRlcnMgZm9yIFFjbGsgR2V5
c2VydmlsbGUgKFFHVikgKi8KK3N0cnVjdCBpbnRlbF9xZ3ZfcG9pbnQgeworCXUxNiBkY2xrLCB0
X3JwLCB0X3JkcHJlLCB0X3JjLCB0X3JhcywgdF9yY2Q7Cit9OworCitzdHJ1Y3QgaW50ZWxfcWd2
X2luZm8geworCXN0cnVjdCBpbnRlbF9xZ3ZfcG9pbnQgcG9pbnRzWzNdOworCXU4IG51bV9wb2lu
dHM7CisJdTggbnVtX2NoYW5uZWxzOworCXU4IHRfYmw7CisJZW51bSBpbnRlbF9kcmFtX3R5cGUg
ZHJhbV90eXBlOworfTsKKworc3RhdGljIGludCBpY2xfcGNvZGVfcmVhZF9tZW1fZ2xvYmFsX2lu
Zm8oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAorCQkJCQkgIHN0cnVjdCBpbnRl
bF9xZ3ZfaW5mbyAqcWkpCit7CisJdTMyIHZhbCA9IDA7CisJaW50IHJldDsKKworCXJldCA9IHNh
bmR5YnJpZGdlX3Bjb2RlX3JlYWQoZGV2X3ByaXYsCisJCQkJICAgICBJQ0xfUENPREVfTUVNX1NV
QlNZU1lTVEVNX0lORk8gfAorCQkJCSAgICAgSUNMX1BDT0RFX01FTV9TU19SRUFEX0dMT0JBTF9J
TkZPLAorCQkJCSAgICAgJnZhbCwgTlVMTCk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKwor
CXN3aXRjaCAodmFsICYgMHhmKSB7CisJY2FzZSAwOgorCQlxaS0+ZHJhbV90eXBlID0gSU5URUxf
RFJBTV9ERFI0OworCQlicmVhazsKKwljYXNlIDE6CisJCXFpLT5kcmFtX3R5cGUgPSBJTlRFTF9E
UkFNX0REUjM7CisJCWJyZWFrOworCWNhc2UgMjoKKwkJcWktPmRyYW1fdHlwZSA9IElOVEVMX0RS
QU1fTFBERFIzOworCQlicmVhazsKKwljYXNlIDM6CisJCXFpLT5kcmFtX3R5cGUgPSBJTlRFTF9E
UkFNX0xQRERSMzsKKwkJYnJlYWs7CisJZGVmYXVsdDoKKwkJTUlTU0lOR19DQVNFKHZhbCAmIDB4
Zik7CisJCWJyZWFrOworCX0KKworCXFpLT5udW1fY2hhbm5lbHMgPSAodmFsICYgMHhmMCkgPj4g
NDsKKwlxaS0+bnVtX3BvaW50cyA9ICh2YWwgJiAweGYwMCkgPj4gODsKKworCXFpLT50X2JsID0g
cWktPmRyYW1fdHlwZSA9PSBJTlRFTF9EUkFNX0REUjQgPyA0IDogODsKKworCXJldHVybiAwOwor
fQorCitzdGF0aWMgaW50IGljbF9wY29kZV9yZWFkX3Fndl9wb2ludF9pbmZvKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiwKKwkJCQkJIHN0cnVjdCBpbnRlbF9xZ3ZfcG9pbnQgKnNw
LAorCQkJCQkgaW50IHBvaW50KQoreworCXUzMiB2YWwgPSAwLCB2YWwyOworCWludCByZXQ7CisK
KwlyZXQgPSBzYW5keWJyaWRnZV9wY29kZV9yZWFkKGRldl9wcml2LAorCQkJCSAgICAgSUNMX1BD
T0RFX01FTV9TVUJTWVNZU1RFTV9JTkZPIHwKKwkJCQkgICAgIElDTF9QQ09ERV9NRU1fU1NfUkVB
RF9RR1ZfUE9JTlRfSU5GTyhwb2ludCksCisJCQkJICAgICAmdmFsLCAmdmFsMik7CisJaWYgKHJl
dCkKKwkJcmV0dXJuIHJldDsKKworCXNwLT5kY2xrID0gdmFsICYgMHhmZmZmOworCXNwLT50X3Jw
ID0gKHZhbCAmIDB4ZmYwMDAwKSA+PiAxNjsKKwlzcC0+dF9yY2QgPSAodmFsICYgMHhmZjAwMDAw
MCkgPj4gMjQ7CisKKwlzcC0+dF9yZHByZSA9IHZhbDIgJiAweGZmOworCXNwLT50X3JhcyA9ICh2
YWwyICYgMHhmZjAwKSA+PiA4OworCisJc3AtPnRfcmMgPSBzcC0+dF9ycCArIHNwLT50X3JhczsK
KworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IGljbF9nZXRfcWd2X3BvaW50cyhzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCisJCQkgICAgICBzdHJ1Y3QgaW50ZWxfcWd2X2lu
Zm8gKnFpKQoreworCWludCBpLCByZXQ7CisKKwlyZXQgPSBpY2xfcGNvZGVfcmVhZF9tZW1fZ2xv
YmFsX2luZm8oZGV2X3ByaXYsIHFpKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJaWYg
KFdBUk5fT04ocWktPm51bV9wb2ludHMgPiBBUlJBWV9TSVpFKHFpLT5wb2ludHMpKSkKKwkJcWkt
Pm51bV9wb2ludHMgPSBBUlJBWV9TSVpFKHFpLT5wb2ludHMpOworCisJZm9yIChpID0gMDsgaSA8
IHFpLT5udW1fcG9pbnRzOyBpKyspIHsKKwkJc3RydWN0IGludGVsX3Fndl9wb2ludCAqc3AgPSAm
cWktPnBvaW50c1tpXTsKKworCQlyZXQgPSBpY2xfcGNvZGVfcmVhZF9xZ3ZfcG9pbnRfaW5mbyhk
ZXZfcHJpdiwgc3AsIGkpOworCQlpZiAocmV0KQorCQkJcmV0dXJuIHJldDsKKworCQlEUk1fREVC
VUdfS01TKCJRR1YgJWQ6IERDTEs9JWQgdFJQPSVkIHRSRFBSRT0lZCB0UkFTPSVkIHRSQ0Q9JWQg
dFJDPSVkXG4iLAorCQkJICAgICAgaSwgc3AtPmRjbGssIHNwLT50X3JwLCBzcC0+dF9yZHByZSwg
c3AtPnRfcmFzLAorCQkJICAgICAgc3AtPnRfcmNkLCBzcC0+dF9yYyk7CisJfQorCisJcmV0dXJu
IDA7Cit9CisKK3N0YXRpYyBpbnQgaWNsX2NhbGNfYncoaW50IGRjbGssIGludCBudW0sIGludCBk
ZW4pCit7CisJLyogbXVsdGlwbGVzIG9mIDE2LjY2Nk1IeiAoMTAwLzYpICovCisJcmV0dXJuIERJ
Vl9ST1VORF9DTE9TRVNUKG51bSAqIGRjbGsgKiAxMDAsIGRlbiAqIDYpOworfQorCitzdGF0aWMg
aW50IGljbF9zYWd2X21heF9kY2xrKGNvbnN0IHN0cnVjdCBpbnRlbF9xZ3ZfaW5mbyAqcWkpCit7
CisJdTE2IGRjbGsgPSAwOworCWludCBpOworCisJZm9yIChpID0gMDsgaSA8IHFpLT5udW1fcG9p
bnRzOyBpKyspCisJCWRjbGsgPSBtYXgoZGNsaywgcWktPnBvaW50c1tpXS5kY2xrKTsKKworCXJl
dHVybiBkY2xrOworfQorCitzdHJ1Y3QgaW50ZWxfc2FfaW5mbyB7CisJdTggZGVidXJzdCwgbXBh
Z2VzaXplLCBkZXByb2did2xpbWl0LCBkaXNwbGF5cnRpZHM7Cit9OworCitzdGF0aWMgY29uc3Qg
c3RydWN0IGludGVsX3NhX2luZm8gaWNsX3NhX2luZm8gPSB7CisJLmRlYnVyc3QgPSA4LAorCS5t
cGFnZXNpemUgPSAxNiwKKwkuZGVwcm9nYndsaW1pdCA9IDI1LCAvKiBHQi9zICovCisJLmRpc3Bs
YXlydGlkcyA9IDEyOCwKK307CisKK3N0YXRpYyBpbnQgaWNsX2dldF9id19pbmZvKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3sKKwlzdHJ1Y3QgaW50ZWxfcWd2X2luZm8gcWkg
PSB7fTsKKwljb25zdCBzdHJ1Y3QgaW50ZWxfc2FfaW5mbyAqc2EgPSAmaWNsX3NhX2luZm87CisJ
Ym9vbCBpc195X3RpbGUgPSB0cnVlOyAvKiBhc3N1bWUgeSB0aWxlIG1heSBiZSB1c2VkICovCisJ
aW50IG51bV9jaGFubmVsczsKKwlpbnQgZGVpbnRlcmxlYXZlOworCWludCBpcHFkZXB0aCwgaXBx
ZGVwdGhwY2g7CisJaW50IGRjbGtfbWF4OworCWludCBtYXhkZWJ3OworCWludCBpLCByZXQ7CisK
KwlyZXQgPSBpY2xfZ2V0X3Fndl9wb2ludHMoZGV2X3ByaXYsICZxaSk7CisJaWYgKHJldCkKKwkJ
cmV0dXJuIHJldDsKKwludW1fY2hhbm5lbHMgPSBxaS5udW1fY2hhbm5lbHM7CisKKwlkZWludGVy
bGVhdmUgPSBESVZfUk9VTkRfVVAobnVtX2NoYW5uZWxzLCBpc195X3RpbGUgPyA0IDogMik7CisJ
ZGNsa19tYXggPSBpY2xfc2Fndl9tYXhfZGNsaygmcWkpOworCisJaXBxZGVwdGhwY2ggPSAxNjsK
KworCW1heGRlYncgPSBtaW4oc2EtPmRlcHJvZ2J3bGltaXQgKiAxMDAwLAorCQkgICAgICBpY2xf
Y2FsY19idyhkY2xrX21heCwgMTYsIDEpICogNiAvIDEwKTsgLyogNjAlICovCisJaXBxZGVwdGgg
PSBtaW4oaXBxZGVwdGhwY2gsIHNhLT5kaXNwbGF5cnRpZHMgLyBudW1fY2hhbm5lbHMpOworCisJ
Zm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUoZGV2X3ByaXYtPm1heF9idyk7IGkrKykgeworCQlz
dHJ1Y3QgaW50ZWxfYndfaW5mbyAqYmkgPSAmZGV2X3ByaXYtPm1heF9id1tpXTsKKwkJaW50IGNs
cGNoZ3JvdXA7CisJCWludCBqOworCisJCWNscGNoZ3JvdXAgPSAoc2EtPmRlYnVyc3QgKiBkZWlu
dGVybGVhdmUgLyBudW1fY2hhbm5lbHMpIDw8IGk7CisJCWJpLT5udW1fcGxhbmVzID0gKGlwcWRl
cHRoIC0gY2xwY2hncm91cCkgLyBjbHBjaGdyb3VwICsgMTsKKworCQlmb3IgKGogPSAwOyBqIDwg
cWkubnVtX3BvaW50czsgaisrKSB7CisJCQljb25zdCBzdHJ1Y3QgaW50ZWxfcWd2X3BvaW50ICpz
cCA9ICZxaS5wb2ludHNbal07CisJCQlpbnQgY3QsIGJ3OworCisJCQkvKgorCQkJICogTWF4IHJv
dyBjeWNsZSB0aW1lCisJCQkgKgorCQkJICogRklYTUUgd2hhdCBpcyB0aGUgbG9naWMgYmVoaW5k
IHRoZQorCQkJICogYXNzdW1lZCBidXJzdCBsZW5ndGg/CisJCQkgKi8KKwkJCWN0ID0gbWF4X3Qo
aW50LCBzcC0+dF9yYywgc3AtPnRfcnAgKyBzcC0+dF9yY2QgKworCQkJCSAgIChjbHBjaGdyb3Vw
IC0gMSkgKiBxaS50X2JsICsgc3AtPnRfcmRwcmUpOworCQkJYncgPSBpY2xfY2FsY19idyhzcC0+
ZGNsaywgY2xwY2hncm91cCAqIDMyICogbnVtX2NoYW5uZWxzLCBjdCk7CisKKwkJCWJpLT5kZXJh
dGVkYndbal0gPSBtaW4obWF4ZGVidywKKwkJCQkJICAgICAgIGJ3ICogOSAvIDEwKTsgLyogOTAl
ICovCisKKwkJCURSTV9ERUJVR19LTVMoIkJXJWQgLyBRR1YgJWQ6IG51bV9wbGFuZXM9JWQgZGVy
YXRlZGJ3PSVkXG4iLAorCQkJCSAgICAgIGksIGosIGJpLT5udW1fcGxhbmVzLCBiaS0+ZGVyYXRl
ZGJ3W2pdKTsKKwkJfQorCisJCWlmIChiaS0+bnVtX3BsYW5lcyA9PSAxKQorCQkJYnJlYWs7CisJ
fQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyB1bnNpZ25lZCBpbnQgaWNsX21heF9idyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCisJCQkgICAgICAgaW50IG51bV9wbGFuZXMs
IGludCBxZ3ZfcG9pbnQpCit7CisJaW50IGk7CisKKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0la
RShkZXZfcHJpdi0+bWF4X2J3KTsgaSsrKSB7CisJCWNvbnN0IHN0cnVjdCBpbnRlbF9id19pbmZv
ICpiaSA9CisJCQkmZGV2X3ByaXYtPm1heF9id1tpXTsKKworCQlpZiAobnVtX3BsYW5lcyA+PSBi
aS0+bnVtX3BsYW5lcykKKwkJCXJldHVybiBiaS0+ZGVyYXRlZGJ3W3Fndl9wb2ludF07CisJfQor
CisJcmV0dXJuIDA7Cit9CisKK3ZvaWQgaW50ZWxfYndfaW5pdF9odyhzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYpCit7CisJaWYgKElTX0dFTihkZXZfcHJpdiwgMTEpKQorCQlpY2xf
Z2V0X2J3X2luZm8oZGV2X3ByaXYpOworfQorCitzdGF0aWMgdW5zaWduZWQgaW50IGludGVsX21h
eF9kYXRhX3JhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAorCQkJCQlpbnQg
bnVtX3BsYW5lcykKK3sKKwlpZiAoSVNfR0VOKGRldl9wcml2LCAxMSkpCisJCS8qCisJCSAqIEZJ
WE1FIHdpdGggU0FHViBkaXNhYmxlZCBtYXliZSB3ZSBjYW4gYXNzdW1lCisJCSAqIHBvaW50IDEg
d2lsbCBhbHdheXMgYmUgdXNlZD8gU2VlbXMgdG8gbWF0Y2gKKwkJICogdGhlIGJlaGF2aW91ciBv
YnNlcnZlZCBpbiB0aGUgd2lsZC4KKwkJICovCisJCXJldHVybiBtaW4zKGljbF9tYXhfYncoZGV2
X3ByaXYsIG51bV9wbGFuZXMsIDApLAorCQkJICAgIGljbF9tYXhfYncoZGV2X3ByaXYsIG51bV9w
bGFuZXMsIDEpLAorCQkJICAgIGljbF9tYXhfYncoZGV2X3ByaXYsIG51bV9wbGFuZXMsIDIpKTsK
KwllbHNlCisJCXJldHVybiBVSU5UX01BWDsKK30KKworc3RhdGljIHVuc2lnbmVkIGludCBpbnRl
bF9id19jcnRjX251bV9hY3RpdmVfcGxhbmVzKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpjcnRjX3N0YXRlKQoreworCS8qCisJICogV2UgYXNzdW1lIGN1cnNvcnMgYXJlIHNtYWxsIGVu
b3VnaAorCSAqIHRvIG5vdCBub3QgY2F1c2UgYmFuZHdpZHRoIHByb2JsZW1zLgorCSAqLworCXJl
dHVybiBod2VpZ2h0OChjcnRjX3N0YXRlLT5hY3RpdmVfcGxhbmVzICYgfkJJVChQTEFORV9DVVJT
T1IpKTsKK30KKworc3RhdGljIHVuc2lnbmVkIGludCBpbnRlbF9id19jcnRjX2RhdGFfcmF0ZShj
b25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKK3sKKwlzdHJ1Y3QgaW50
ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+YmFzZS5jcnRjKTsKKwl1
bnNpZ25lZCBpbnQgZGF0YV9yYXRlID0gMDsKKwllbnVtIHBsYW5lX2lkIHBsYW5lX2lkOworCisJ
Zm9yX2VhY2hfcGxhbmVfaWRfb25fY3J0YyhjcnRjLCBwbGFuZV9pZCkgeworCQkvKgorCQkgKiBX
ZSBhc3N1bWUgY3Vyc29ycyBhcmUgc21hbGwgZW5vdWdoCisJCSAqIHRvIG5vdCBub3QgY2F1c2Ug
YmFuZHdpZHRoIHByb2JsZW1zLgorCQkgKi8KKwkJaWYgKHBsYW5lX2lkID09IFBMQU5FX0NVUlNP
UikKKwkJCWNvbnRpbnVlOworCisJCWRhdGFfcmF0ZSArPSBjcnRjX3N0YXRlLT5kYXRhX3JhdGVb
cGxhbmVfaWRdOworCX0KKworCXJldHVybiBkYXRhX3JhdGU7Cit9CisKK3ZvaWQgaW50ZWxfYndf
Y3J0Y191cGRhdGUoc3RydWN0IGludGVsX2J3X3N0YXRlICpid19zdGF0ZSwKKwkJCSAgY29uc3Qg
c3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCit7CisJc3RydWN0IGludGVsX2Ny
dGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPmJhc2UuY3J0Yyk7CisKKwlid19z
dGF0ZS0+ZGF0YV9yYXRlW2NydGMtPnBpcGVdID0KKwkJaW50ZWxfYndfY3J0Y19kYXRhX3JhdGUo
Y3J0Y19zdGF0ZSk7CisJYndfc3RhdGUtPm51bV9hY3RpdmVfcGxhbmVzW2NydGMtPnBpcGVdID0K
KwkJaW50ZWxfYndfY3J0Y19udW1fYWN0aXZlX3BsYW5lcyhjcnRjX3N0YXRlKTsKKworCURSTV9E
RUJVR19LTVMoInBpcGUgJWMgZGF0YSByYXRlICV1IG51bSBhY3RpdmUgcGxhbmVzICV1XG4iLAor
CQkgICAgICBwaXBlX25hbWUoY3J0Yy0+cGlwZSksCisJCSAgICAgIGJ3X3N0YXRlLT5kYXRhX3Jh
dGVbY3J0Yy0+cGlwZV0sCisJCSAgICAgIGJ3X3N0YXRlLT5udW1fYWN0aXZlX3BsYW5lc1tjcnRj
LT5waXBlXSk7Cit9CisKK3N0YXRpYyB1bnNpZ25lZCBpbnQgaW50ZWxfYndfbnVtX2FjdGl2ZV9w
bGFuZXMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAorCQkJCQkgICAgICAgY29u
c3Qgc3RydWN0IGludGVsX2J3X3N0YXRlICpid19zdGF0ZSkKK3sKKwl1bnNpZ25lZCBpbnQgbnVt
X2FjdGl2ZV9wbGFuZXMgPSAwOworCWVudW0gcGlwZSBwaXBlOworCisJZm9yX2VhY2hfcGlwZShk
ZXZfcHJpdiwgcGlwZSkKKwkJbnVtX2FjdGl2ZV9wbGFuZXMgKz0gYndfc3RhdGUtPm51bV9hY3Rp
dmVfcGxhbmVzW3BpcGVdOworCisJcmV0dXJuIG51bV9hY3RpdmVfcGxhbmVzOworfQorCitzdGF0
aWMgdW5zaWduZWQgaW50IGludGVsX2J3X2RhdGFfcmF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsCisJCQkJICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9id19zdGF0ZSAqYndf
c3RhdGUpCit7CisJdW5zaWduZWQgaW50IGRhdGFfcmF0ZSA9IDA7CisJZW51bSBwaXBlIHBpcGU7
CisKKwlmb3JfZWFjaF9waXBlKGRldl9wcml2LCBwaXBlKQorCQlkYXRhX3JhdGUgKz0gYndfc3Rh
dGUtPmRhdGFfcmF0ZVtwaXBlXTsKKworCXJldHVybiBkYXRhX3JhdGU7Cit9CisKK2ludCBpbnRl
bF9id19hdG9taWNfY2hlY2soc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCit7CisJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShzdGF0ZS0+YmFzZS5k
ZXYpOworCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpuZXdfY3J0Y19zdGF0ZSwgKm9sZF9jcnRj
X3N0YXRlOworCXN0cnVjdCBpbnRlbF9id19zdGF0ZSAqYndfc3RhdGUgPSBOVUxMOworCXVuc2ln
bmVkIGludCBkYXRhX3JhdGUsIG1heF9kYXRhX3JhdGU7CisJdW5zaWduZWQgaW50IG51bV9hY3Rp
dmVfcGxhbmVzOworCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjOworCWludCBpOworCisJLyogRklY
TUUgZWFybGllciBnZW5zIG5lZWQgc29tZSBjaGVja3MgdG9vICovCisJaWYgKElOVEVMX0dFTihk
ZXZfcHJpdikgPCAxMSkKKwkJcmV0dXJuIDA7CisKKwlmb3JfZWFjaF9vbGRuZXdfaW50ZWxfY3J0
Y19pbl9zdGF0ZShzdGF0ZSwgY3J0Yywgb2xkX2NydGNfc3RhdGUsCisJCQkJCSAgICBuZXdfY3J0
Y19zdGF0ZSwgaSkgeworCQl1bnNpZ25lZCBpbnQgb2xkX2RhdGFfcmF0ZSA9CisJCQlpbnRlbF9i
d19jcnRjX2RhdGFfcmF0ZShvbGRfY3J0Y19zdGF0ZSk7CisJCXVuc2lnbmVkIGludCBuZXdfZGF0
YV9yYXRlID0KKwkJCWludGVsX2J3X2NydGNfZGF0YV9yYXRlKG5ld19jcnRjX3N0YXRlKTsKKwkJ
dW5zaWduZWQgaW50IG9sZF9hY3RpdmVfcGxhbmVzID0KKwkJCWludGVsX2J3X2NydGNfbnVtX2Fj
dGl2ZV9wbGFuZXMob2xkX2NydGNfc3RhdGUpOworCQl1bnNpZ25lZCBpbnQgbmV3X2FjdGl2ZV9w
bGFuZXMgPQorCQkJaW50ZWxfYndfY3J0Y19udW1fYWN0aXZlX3BsYW5lcyhuZXdfY3J0Y19zdGF0
ZSk7CisKKwkJLyoKKwkJICogQXZvaWQgbG9ja2luZyB0aGUgYncgc3RhdGUgd2hlbgorCQkgKiBu
b3RoaW5nIHNpZ25pZmljYW50IGhhcyBjaGFuZ2VkLgorCQkgKi8KKwkJaWYgKG9sZF9kYXRhX3Jh
dGUgPT0gbmV3X2RhdGFfcmF0ZSAmJgorCQkgICAgb2xkX2FjdGl2ZV9wbGFuZXMgPT0gbmV3X2Fj
dGl2ZV9wbGFuZXMpCisJCQljb250aW51ZTsKKworCQlid19zdGF0ZSAgPSBpbnRlbF9hdG9taWNf
Z2V0X2J3X3N0YXRlKHN0YXRlKTsKKwkJaWYgKElTX0VSUihid19zdGF0ZSkpCisJCQlyZXR1cm4g
UFRSX0VSUihid19zdGF0ZSk7CisKKwkJYndfc3RhdGUtPmRhdGFfcmF0ZVtjcnRjLT5waXBlXSA9
IG5ld19kYXRhX3JhdGU7CisJCWJ3X3N0YXRlLT5udW1fYWN0aXZlX3BsYW5lc1tjcnRjLT5waXBl
XSA9IG5ld19hY3RpdmVfcGxhbmVzOworCisJCURSTV9ERUJVR19LTVMoInBpcGUgJWMgZGF0YSBy
YXRlICV1IG51bSBhY3RpdmUgcGxhbmVzICV1XG4iLAorCQkJICAgICAgcGlwZV9uYW1lKGNydGMt
PnBpcGUpLAorCQkJICAgICAgYndfc3RhdGUtPmRhdGFfcmF0ZVtjcnRjLT5waXBlXSwKKwkJCSAg
ICAgIGJ3X3N0YXRlLT5udW1fYWN0aXZlX3BsYW5lc1tjcnRjLT5waXBlXSk7CisJfQorCisJaWYg
KCFid19zdGF0ZSkKKwkJcmV0dXJuIDA7CisKKwlkYXRhX3JhdGUgPSBpbnRlbF9id19kYXRhX3Jh
dGUoZGV2X3ByaXYsIGJ3X3N0YXRlKTsKKwludW1fYWN0aXZlX3BsYW5lcyA9IGludGVsX2J3X251
bV9hY3RpdmVfcGxhbmVzKGRldl9wcml2LCBid19zdGF0ZSk7CisKKwltYXhfZGF0YV9yYXRlID0g
aW50ZWxfbWF4X2RhdGFfcmF0ZShkZXZfcHJpdiwgbnVtX2FjdGl2ZV9wbGFuZXMpOworCisJZGF0
YV9yYXRlID0gRElWX1JPVU5EX1VQKGRhdGFfcmF0ZSwgMTAwMCk7CisKKwlpZiAoZGF0YV9yYXRl
ID4gbWF4X2RhdGFfcmF0ZSkgeworCQlEUk1fREVCVUdfS01TKCJCYW5kd2lkdGggJXUgTUIvcyBl
eGNlZWRzIG1heCBhdmFpbGFibGUgJWQgTUIvcyAoJWQgYWN0aXZlIHBsYW5lcylcbiIsCisJCQkg
ICAgICBkYXRhX3JhdGUsIG1heF9kYXRhX3JhdGUsIG51bV9hY3RpdmVfcGxhbmVzKTsKKwkJcmV0
dXJuIC1FSU5WQUw7CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBzdHJ1Y3QgZHJtX3By
aXZhdGVfc3RhdGUgKmludGVsX2J3X2R1cGxpY2F0ZV9zdGF0ZShzdHJ1Y3QgZHJtX3ByaXZhdGVf
b2JqICpvYmopCit7CisJc3RydWN0IGludGVsX2J3X3N0YXRlICpzdGF0ZTsKKworCXN0YXRlID0g
a21lbWR1cChvYmotPnN0YXRlLCBzaXplb2YoKnN0YXRlKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFz
dGF0ZSkKKwkJcmV0dXJuIE5VTEw7CisKKwlfX2RybV9hdG9taWNfaGVscGVyX3ByaXZhdGVfb2Jq
X2R1cGxpY2F0ZV9zdGF0ZShvYmosICZzdGF0ZS0+YmFzZSk7CisKKwlyZXR1cm4gJnN0YXRlLT5i
YXNlOworfQorCitzdGF0aWMgdm9pZCBpbnRlbF9id19kZXN0cm95X3N0YXRlKHN0cnVjdCBkcm1f
cHJpdmF0ZV9vYmogKm9iaiwKKwkJCQkgICBzdHJ1Y3QgZHJtX3ByaXZhdGVfc3RhdGUgKnN0YXRl
KQoreworCWtmcmVlKHN0YXRlKTsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcHJpdmF0
ZV9zdGF0ZV9mdW5jcyBpbnRlbF9id19mdW5jcyA9IHsKKwkuYXRvbWljX2R1cGxpY2F0ZV9zdGF0
ZSA9IGludGVsX2J3X2R1cGxpY2F0ZV9zdGF0ZSwKKwkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBp
bnRlbF9id19kZXN0cm95X3N0YXRlLAorfTsKKworaW50IGludGVsX2J3X2luaXQoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQoreworCXN0cnVjdCBpbnRlbF9id19zdGF0ZSAqc3Rh
dGU7CisKKwlzdGF0ZSA9IGt6YWxsb2Moc2l6ZW9mKCpzdGF0ZSksIEdGUF9LRVJORUwpOworCWlm
ICghc3RhdGUpCisJCXJldHVybiAtRU5PTUVNOworCisJZHJtX2F0b21pY19wcml2YXRlX29ial9p
bml0KCZkZXZfcHJpdi0+ZHJtLCAmZGV2X3ByaXYtPmJ3X29iaiwKKwkJCQkgICAgJnN0YXRlLT5i
YXNlLCAmaW50ZWxfYndfZnVuY3MpOworCisJcmV0dXJuIDA7Cit9CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9idy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
YncuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmU5ZDljNmQ2M2Jj
MwotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2J3LmgKQEAg
LTAsMCArMSw0NyBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVCAqLworLyoKKyAq
IENvcHlyaWdodCDCqSAyMDE5IEludGVsIENvcnBvcmF0aW9uCisgKi8KKworI2lmbmRlZiBfX0lO
VEVMX0JXX0hfXworI2RlZmluZSBfX0lOVEVMX0JXX0hfXworCisjaW5jbHVkZSA8ZHJtL2RybV9h
dG9taWMuaD4KKworI2luY2x1ZGUgImk5MTVfZHJ2LmgiCisjaW5jbHVkZSAiaW50ZWxfZGlzcGxh
eS5oIgorCitzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZTsKK3N0cnVjdCBpbnRlbF9hdG9taWNfc3Rh
dGU7CitzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZTsKKworc3RydWN0IGludGVsX2J3X3N0YXRlIHsK
KwlzdHJ1Y3QgZHJtX3ByaXZhdGVfc3RhdGUgYmFzZTsKKworCXVuc2lnbmVkIGludCBkYXRhX3Jh
dGVbSTkxNV9NQVhfUElQRVNdOworCXU4IG51bV9hY3RpdmVfcGxhbmVzW0k5MTVfTUFYX1BJUEVT
XTsKK307CisKKyNkZWZpbmUgdG9faW50ZWxfYndfc3RhdGUoeCkgY29udGFpbmVyX29mKCh4KSwg
c3RydWN0IGludGVsX2J3X3N0YXRlLCBiYXNlKQorCitzdGF0aWMgaW5saW5lIHN0cnVjdCBpbnRl
bF9id19zdGF0ZSAqCitpbnRlbF9hdG9taWNfZ2V0X2J3X3N0YXRlKHN0cnVjdCBpbnRlbF9hdG9t
aWNfc3RhdGUgKnN0YXRlKQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9
IHRvX2k5MTUoc3RhdGUtPmJhc2UuZGV2KTsKKwlzdHJ1Y3QgZHJtX3ByaXZhdGVfc3RhdGUgKmJ3
X3N0YXRlOworCisJYndfc3RhdGUgPSBkcm1fYXRvbWljX2dldF9wcml2YXRlX29ial9zdGF0ZSgm
c3RhdGUtPmJhc2UsCisJCQkJCQkgICAgJmRldl9wcml2LT5id19vYmopOworCWlmIChJU19FUlIo
Yndfc3RhdGUpKQorCQlyZXR1cm4gRVJSX0NBU1QoYndfc3RhdGUpOworCisJcmV0dXJuIHRvX2lu
dGVsX2J3X3N0YXRlKGJ3X3N0YXRlKTsKK30KKwordm9pZCBpbnRlbF9id19pbml0X2h3KHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CitpbnQgaW50ZWxfYndfaW5pdChzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOworaW50IGludGVsX2J3X2F0b21pY19jaGVjayhz
dHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSk7Cit2b2lkIGludGVsX2J3X2NydGNfdXBk
YXRlKHN0cnVjdCBpbnRlbF9id19zdGF0ZSAqYndfc3RhdGUsCisJCQkgIGNvbnN0IHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKTsKKworI2VuZGlmIC8qIF9fSU5URUxfQldfSF9f
ICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggMDEyYWQwOGYzOGMzLi45
MDkxNzFkM2VjMjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rpc3Bs
YXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMKQEAgLTUwLDYg
KzUwLDcgQEAKICNpbmNsdWRlICJpbnRlbF9hY3BpLmgiCiAjaW5jbHVkZSAiaW50ZWxfYXRvbWlj
LmgiCiAjaW5jbHVkZSAiaW50ZWxfYXRvbWljX3BsYW5lLmgiCisjaW5jbHVkZSAiaW50ZWxfYncu
aCIKICNpbmNsdWRlICJpbnRlbF9jb2xvci5oIgogI2luY2x1ZGUgImludGVsX2NkY2xrLmgiCiAj
aW5jbHVkZSAiaW50ZWxfY3J0LmgiCkBAIC0zMTU1LDYgKzMxNTYsNyBAQCBzdGF0aWMgdm9pZCBp
bnRlbF9wbGFuZV9kaXNhYmxlX25vYXRvbWljKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAogCiAJ
aW50ZWxfc2V0X3BsYW5lX3Zpc2libGUoY3J0Y19zdGF0ZSwgcGxhbmVfc3RhdGUsIGZhbHNlKTsK
IAlmaXh1cF9hY3RpdmVfcGxhbmVzKGNydGNfc3RhdGUpOworCWNydGNfc3RhdGUtPmRhdGFfcmF0
ZVtwbGFuZS0+aWRdID0gMDsKIAogCWlmIChwbGFuZS0+aWQgPT0gUExBTkVfUFJJTUFSWSkKIAkJ
aW50ZWxfcHJlX2Rpc2FibGVfcHJpbWFyeV9ub2F0b21pYygmY3J0Yy0+YmFzZSk7CkBAIC02ODc5
LDYgKzY4ODEsOCBAQCBzdGF0aWMgdm9pZCBpbnRlbF9jcnRjX2Rpc2FibGVfbm9hdG9taWMoc3Ry
dWN0IGRybV9jcnRjICpjcnRjLAogCXN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyOwogCXN0
cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjKTsKIAlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMtPmRldik7CisJc3Ry
dWN0IGludGVsX2J3X3N0YXRlICpid19zdGF0ZSA9CisJCXRvX2ludGVsX2J3X3N0YXRlKGRldl9w
cml2LT5id19vYmouc3RhdGUpOwogCWVudW0gaW50ZWxfZGlzcGxheV9wb3dlcl9kb21haW4gZG9t
YWluOwogCXN0cnVjdCBpbnRlbF9wbGFuZSAqcGxhbmU7CiAJdTY0IGRvbWFpbnM7CkBAIC02OTQx
LDYgKzY5NDUsOSBAQCBzdGF0aWMgdm9pZCBpbnRlbF9jcnRjX2Rpc2FibGVfbm9hdG9taWMoc3Ry
dWN0IGRybV9jcnRjICpjcnRjLAogCWRldl9wcml2LT5hY3RpdmVfY3J0Y3MgJj0gfigxIDw8IGlu
dGVsX2NydGMtPnBpcGUpOwogCWRldl9wcml2LT5taW5fY2RjbGtbaW50ZWxfY3J0Yy0+cGlwZV0g
PSAwOwogCWRldl9wcml2LT5taW5fdm9sdGFnZV9sZXZlbFtpbnRlbF9jcnRjLT5waXBlXSA9IDA7
CisKKwlid19zdGF0ZS0+ZGF0YV9yYXRlW2ludGVsX2NydGMtPnBpcGVdID0gMDsKKwlid19zdGF0
ZS0+bnVtX2FjdGl2ZV9wbGFuZXNbaW50ZWxfY3J0Yy0+cGlwZV0gPSAwOwogfQogCiAvKgpAQCAt
MTEyODAsNiArMTEyODcsNyBAQCBpbnQgaW50ZWxfcGxhbmVfYXRvbWljX2NhbGNfY2hhbmdlcyhj
b25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdAogCWlmICghaXNfY3J0
Y19lbmFibGVkKSB7CiAJCXBsYW5lX3N0YXRlLT52aXNpYmxlID0gdmlzaWJsZSA9IGZhbHNlOwog
CQl0b19pbnRlbF9jcnRjX3N0YXRlKGNydGNfc3RhdGUpLT5hY3RpdmVfcGxhbmVzICY9IH5CSVQo
cGxhbmUtPmlkKTsKKwkJdG9faW50ZWxfY3J0Y19zdGF0ZShjcnRjX3N0YXRlKS0+ZGF0YV9yYXRl
W3BsYW5lLT5pZF0gPSAwOwogCX0KIAogCWlmICghd2FzX3Zpc2libGUgJiYgIXZpc2libGUpCkBA
IC0xMzQwNiw3ICsxMzQxNCwxNSBAQCBzdGF0aWMgaW50IGludGVsX2F0b21pY19jaGVjayhzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2LAogCQlyZXR1cm4gcmV0OwogCiAJaW50ZWxfZmJjX2Nob29zZV9j
cnRjKGRldl9wcml2LCBpbnRlbF9zdGF0ZSk7Ci0JcmV0dXJuIGNhbGNfd2F0ZXJtYXJrX2RhdGEo
aW50ZWxfc3RhdGUpOworCXJldCA9IGNhbGNfd2F0ZXJtYXJrX2RhdGEoaW50ZWxfc3RhdGUpOwor
CWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwlyZXQgPSBpbnRlbF9id19hdG9taWNfY2hlY2so
aW50ZWxfc3RhdGUpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwlyZXR1cm4gMDsKIH0K
IAogc3RhdGljIGludCBpbnRlbF9hdG9taWNfcHJlcGFyZV9jb21taXQoc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwKQEAgLTE1Nzg4LDYgKzE1ODA0LDEwIEBAIGludCBpbnRlbF9tb2Rlc2V0X2luaXQo
c3RydWN0IGRybV9kZXZpY2UgKmRldikKIAogCWRybV9tb2RlX2NvbmZpZ19pbml0KGRldik7CiAK
KwlyZXQgPSBpbnRlbF9id19pbml0KGRldl9wcml2KTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0
OworCiAJZGV2LT5tb2RlX2NvbmZpZy5taW5fd2lkdGggPSAwOwogCWRldi0+bW9kZV9jb25maWcu
bWluX2hlaWdodCA9IDA7CiAKQEAgLTE2NDE2LDggKzE2NDM2LDExIEBAIHN0YXRpYyB2b2lkIGlu
dGVsX21vZGVzZXRfcmVhZG91dF9od19zdGF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCWRy
bV9jb25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmY29ubl9pdGVyKTsKIAogCWZvcl9lYWNoX2ludGVs
X2NydGMoZGV2LCBjcnRjKSB7CisJCXN0cnVjdCBpbnRlbF9id19zdGF0ZSAqYndfc3RhdGUgPQor
CQkJdG9faW50ZWxfYndfc3RhdGUoZGV2X3ByaXYtPmJ3X29iai5zdGF0ZSk7CiAJCXN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlID0KIAkJCXRvX2ludGVsX2NydGNfc3RhdGUoY3J0
Yy0+YmFzZS5zdGF0ZSk7CisJCXN0cnVjdCBpbnRlbF9wbGFuZSAqcGxhbmU7CiAJCWludCBtaW5f
Y2RjbGsgPSAwOwogCiAJCW1lbXNldCgmY3J0Yy0+YmFzZS5tb2RlLCAwLCBzaXplb2YoY3J0Yy0+
YmFzZS5tb2RlKSk7CkBAIC0xNjQ1Niw2ICsxNjQ3OSwyMSBAQCBzdGF0aWMgdm9pZCBpbnRlbF9t
b2Rlc2V0X3JlYWRvdXRfaHdfc3RhdGUoc3RydWN0IGRybV9kZXZpY2UgKmRldikKIAkJZGV2X3By
aXYtPm1pbl92b2x0YWdlX2xldmVsW2NydGMtPnBpcGVdID0KIAkJCWNydGNfc3RhdGUtPm1pbl92
b2x0YWdlX2xldmVsOwogCisJCWZvcl9lYWNoX2ludGVsX3BsYW5lX29uX2NydGMoJmRldl9wcml2
LT5kcm0sIGNydGMsIHBsYW5lKSB7CisJCQljb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUg
KnBsYW5lX3N0YXRlID0KKwkJCQl0b19pbnRlbF9wbGFuZV9zdGF0ZShwbGFuZS0+YmFzZS5zdGF0
ZSk7CisKKwkJCS8qCisJCQkgKiBGSVhNRSBkb24ndCBoYXZlIHRoZSBmYiB5ZXQsIHNvIGNhbid0
CisJCQkgKiB1c2UgaW50ZWxfcGxhbmVfZGF0YV9yYXRlKCkgOigKKwkJCSAqLworCQkJaWYgKHBs
YW5lX3N0YXRlLT5iYXNlLnZpc2libGUpCisJCQkJY3J0Y19zdGF0ZS0+ZGF0YV9yYXRlW3BsYW5l
LT5pZF0gPQorCQkJCQk0ICogY3J0Y19zdGF0ZS0+cGl4ZWxfcmF0ZTsKKwkJfQorCisJCWludGVs
X2J3X2NydGNfdXBkYXRlKGJ3X3N0YXRlLCBjcnRjX3N0YXRlKTsKKwogCQlpbnRlbF9waXBlX2Nv
bmZpZ19zYW5pdHlfY2hlY2soZGV2X3ByaXYsIGNydGNfc3RhdGUpOwogCX0KIH0KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfZHJ2LmgKaW5kZXggMjcwZjViYjQzZDliLi44NWMwMjNiNTY3YzUgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2ludGVsX2Rydi5oCkBAIC04ODUsNiArODg1LDggQEAgc3RydWN0IGludGVsX2NydGNf
c3RhdGUgewogCiAJc3RydWN0IGludGVsX2NydGNfd21fc3RhdGUgd207CiAKKwl1MzIgZGF0YV9y
YXRlW0k5MTVfTUFYX1BMQU5FU107CisKIAkvKiBHYW1tYSBtb2RlIHByb2dyYW1tZWQgb24gdGhl
IHBpcGUgKi8KIAl1MzIgZ2FtbWFfbW9kZTsKIAotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0Cklu
dGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

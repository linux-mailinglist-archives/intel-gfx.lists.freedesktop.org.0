Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id AAA2DA134F
	for <lists+intel-gfx@lfdr.de>; Thu, 29 Aug 2019 10:12:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 74E166E040;
	Thu, 29 Aug 2019 08:12:05 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D7B4589FA0
 for <intel-gfx@lists.freedesktop.org>; Thu, 29 Aug 2019 08:11:59 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18299891-1500050 
 for multiple; Thu, 29 Aug 2019 09:11:59 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 29 Aug 2019 09:11:45 +0100
Message-Id: <20190829081150.10271-32-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20190829081150.10271-1-chris@chris-wilson.co.uk>
References: <20190829081150.10271-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 31/36] drm/i915: Remove logical HW ID
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2l0aCB0aGUgaW50cm9kdWN0aW9uIG9mIGN0eC0+ZW5naW5lc1tdIHdlIGFsbG93IG11bHRpcGxl
IGxvZ2ljYWwKY29udGV4dHMgdG8gYmUgdXNlZCBvbiB0aGUgc2FtZSBlbmdpbmUgKGUuZy4gd2l0
aCB2aXJ0dWFsIGVuZ2luZXMpLiBFYWNoCmxvZ2ljYWwgY29udGV4dCByZXF1aXJlcyBhIHVuaXF1
ZSB0YWcgaW4gb3JkZXIgZm9yIGNvbnRleHQtc3dpdGNoaW5nIHRvCm9jY3VyIGNvcnJlY3RseSBi
ZXR3ZWVuIHRoZW0uCgpXZSBvbmx5IG5lZWQgdG8ga2VlcCBhIHVuaXF1ZSB0YWcgZm9yIHRoZSBh
Y3RpdmUgbGlmZXRpbWUgb2YgdGhlCmNvbnRleHQsIGFuZCBmb3IgYXMgbG9uZyBhcyB3ZSBuZWVk
IHRvIGlkZW50aWZ5IHRoYXQgY29udGV4dC4gVGhlIEhXCnVzZXMgdGhlIHRhZyB0byBkZXRlcm1p
bmUgaWYgaXQgc2hvdWxkIHVzZSBhIGxpdGUtcmVzdG9yZSAod2h5IG5vdCB0aGUKTFJDQT8pIGFu
ZCBwYXNzZXMgdGhlIHRhZyBiYWNrIGZvciB2YXJpb3VzIHN0YXR1cyBpZGVudGlmaWVzLiBUaGUg
b25seQpzdGF0dXMgd2UgbmVlZCB0byB0cmFjayBpcyBmb3IgT0EsIHNvIHdoZW4gdXNpbmcgcGVy
Ziwgd2UgYXNzaWduIHRoZQpzcGVjaWZpYyBjb250ZXh0IGEgdW5pcXVlIHRhZy4KCkZpeGVzOiA5
NzZiNTVmMGUxZGIgKCJkcm0vaTkxNTogQWxsb3cgYSBjb250ZXh0IHRvIGRlZmluZSBpdHMgc2V0
IG9mIGVuZ2luZXMiKQpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdp
bHNvbi5jby51az4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4
dC5jICAgfCAxNDcgLS0tLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fY29udGV4dC5oICAgfCAgMTUgLS0KIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX2NvbnRleHRfdHlwZXMuaCB8ICAxOCAtLS0KIC4uLi9kcm0vaTkxNS9nZW0vc2VsZnRlc3Rz
L2k5MTVfZ2VtX2NvbnRleHQuYyB8ICAxMyArLQogLi4uL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL21vY2tfY29udGV4dC5jIHwgICA4IC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2NvbnRleHRfdHlwZXMuaCB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfdHlwZXMuaCAgfCAgIDQgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xy
Yy5jICAgICAgICAgICB8ICAyOSArKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3Qu
YyAgICAgICAgICAgICAgfCAgMTcgLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdm
cy5jICAgICAgICAgICB8ICAgMyAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJv
ci5jICAgICAgICAgfCAgIDcgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9y
LmggICAgICAgICB8ICAgMSAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyAgICAg
ICAgICAgICAgfCAgMzAgKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90cmFjZS5oICAg
ICAgICAgICAgIHwgIDM4ICsrLS0tCiAuLi4vZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dl
bV9ldmljdC5jICAgfCAgIDQgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1
X3ZtYS5jICAgICB8ICAgMiArLQogMTYgZmlsZXMgY2hhbmdlZCwgNTAgaW5zZXJ0aW9ucygrKSwg
Mjg3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9jb250ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29u
dGV4dC5jCmluZGV4IDA2MjFhZThhMWU4Yi4uYTI3OTg1NTU0NjdjIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMKQEAgLTE2OCw5NyArMTY4LDYgQEAgbG9v
a3VwX3VzZXJfZW5naW5lKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgsCiAJcmV0dXJuIGk5
MTVfZ2VtX2NvbnRleHRfZ2V0X2VuZ2luZShjdHgsIGlkeCk7CiB9CiAKLXN0YXRpYyBpbmxpbmUg
aW50IG5ld19od19pZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgZ2ZwX3QgZ2ZwKQot
ewotCXVuc2lnbmVkIGludCBtYXg7Ci0KLQlsb2NrZGVwX2Fzc2VydF9oZWxkKCZpOTE1LT5jb250
ZXh0cy5tdXRleCk7Ci0KLQlpZiAoSU5URUxfR0VOKGk5MTUpID49IDEyKQotCQltYXggPSBHRU4x
Ml9NQVhfQ09OVEVYVF9IV19JRDsKLQllbHNlIGlmIChJTlRFTF9HRU4oaTkxNSkgPj0gMTEpCi0J
CW1heCA9IEdFTjExX01BWF9DT05URVhUX0hXX0lEOwotCWVsc2UgaWYgKFVTRVNfR1VDX1NVQk1J
U1NJT04oaTkxNSkpCi0JCS8qCi0JCSAqIFdoZW4gdXNpbmcgR3VDIGluIHByb3h5IHN1Ym1pc3Np
b24sIEd1QyBjb25zdW1lcyB0aGUKLQkJICogaGlnaGVzdCBiaXQgaW4gdGhlIGNvbnRleHQgaWQg
dG8gaW5kaWNhdGUgcHJveHkgc3VibWlzc2lvbi4KLQkJICovCi0JCW1heCA9IE1BWF9HVUNfQ09O
VEVYVF9IV19JRDsKLQllbHNlCi0JCW1heCA9IE1BWF9DT05URVhUX0hXX0lEOwotCi0JcmV0dXJu
IGlkYV9zaW1wbGVfZ2V0KCZpOTE1LT5jb250ZXh0cy5od19pZGEsIDAsIG1heCwgZ2ZwKTsKLX0K
LQotc3RhdGljIGludCBzdGVhbF9od19pZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkK
LXsKLQlzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4LCAqY247Ci0JTElTVF9IRUFEKHBpbm5l
ZCk7Ci0JaW50IGlkID0gLUVOT1NQQzsKLQotCWxvY2tkZXBfYXNzZXJ0X2hlbGQoJmk5MTUtPmNv
bnRleHRzLm11dGV4KTsKLQotCWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShjdHgsIGNuLAotCQkJ
CSAmaTkxNS0+Y29udGV4dHMuaHdfaWRfbGlzdCwgaHdfaWRfbGluaykgewotCQlpZiAoYXRvbWlj
X3JlYWQoJmN0eC0+aHdfaWRfcGluX2NvdW50KSkgewotCQkJbGlzdF9tb3ZlX3RhaWwoJmN0eC0+
aHdfaWRfbGluaywgJnBpbm5lZCk7Ci0JCQljb250aW51ZTsKLQkJfQotCi0JCUdFTV9CVUdfT04o
IWN0eC0+aHdfaWQpOyAvKiBwZXJtYS1waW5uZWQga2VybmVsIGNvbnRleHQgKi8KLQkJbGlzdF9k
ZWxfaW5pdCgmY3R4LT5od19pZF9saW5rKTsKLQkJaWQgPSBjdHgtPmh3X2lkOwotCQlicmVhazsK
LQl9Ci0KLQkvKgotCSAqIFJlbWVtYmVyIGhvdyBmYXIgd2UgZ290IHVwIG9uIHRoZSBsYXN0IHJl
cG9zc2VzaW9uIHNjYW4sIHNvIHRoZQotCSAqIGxpc3QgaXMga2VwdCBpbiBhICJsZWFzdCByZWNl
bnRseSBzY2FubmVkIiBvcmRlci4KLQkgKi8KLQlsaXN0X3NwbGljZV90YWlsKCZwaW5uZWQsICZp
OTE1LT5jb250ZXh0cy5od19pZF9saXN0KTsKLQlyZXR1cm4gaWQ7Ci19Ci0KLXN0YXRpYyBpbnQg
YXNzaWduX2h3X2lkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCB1bnNpZ25lZCBpbnQg
Km91dCkKLXsKLQlpbnQgcmV0OwotCi0JbG9ja2RlcF9hc3NlcnRfaGVsZCgmaTkxNS0+Y29udGV4
dHMubXV0ZXgpOwotCi0JLyoKLQkgKiBXZSBwcmVmZXIgdG8gc3RlYWwvc3RhbGwgb3Vyc2VsdmVz
IGFuZCBvdXIgdXNlcnMgb3ZlciB0aGF0IG9mIHRoZQotCSAqIGVudGlyZSBzeXN0ZW0uIFRoYXQg
bWF5IGJlIGEgbGl0dGxlIHVuZmFpciB0byBvdXIgdXNlcnMsIGFuZAotCSAqIGV2ZW4gaHVydCBo
aWdoIHByaW9yaXR5IGNsaWVudHMuIFRoZSBjaG9pY2UgaXMgd2hldGhlciB0byBvb21raWxsCi0J
ICogc29tZXRoaW5nIGVsc2UsIG9yIHN0ZWFsIGEgY29udGV4dCBpZC4KLQkgKi8KLQlyZXQgPSBu
ZXdfaHdfaWQoaTkxNSwgR0ZQX0tFUk5FTCB8IF9fR0ZQX1JFVFJZX01BWUZBSUwgfCBfX0dGUF9O
T1dBUk4pOwotCWlmICh1bmxpa2VseShyZXQgPCAwKSkgewotCQlyZXQgPSBzdGVhbF9od19pZChp
OTE1KTsKLQkJaWYgKHJldCA8IDApIC8qIG9uY2UgYWdhaW4gZm9yIHRoZSBjb3JyZWN0IGVycm5v
IGNvZGUgKi8KLQkJCXJldCA9IG5ld19od19pZChpOTE1LCBHRlBfS0VSTkVMKTsKLQkJaWYgKHJl
dCA8IDApCi0JCQlyZXR1cm4gcmV0OwotCX0KLQotCSpvdXQgPSByZXQ7Ci0JcmV0dXJuIDA7Ci19
Ci0KLXN0YXRpYyB2b2lkIHJlbGVhc2VfaHdfaWQoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0
eCkKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGN0eC0+aTkxNTsKLQotCWlm
IChsaXN0X2VtcHR5KCZjdHgtPmh3X2lkX2xpbmspKQotCQlyZXR1cm47Ci0KLQltdXRleF9sb2Nr
KCZpOTE1LT5jb250ZXh0cy5tdXRleCk7Ci0JaWYgKCFsaXN0X2VtcHR5KCZjdHgtPmh3X2lkX2xp
bmspKSB7Ci0JCWlkYV9zaW1wbGVfcmVtb3ZlKCZpOTE1LT5jb250ZXh0cy5od19pZGEsIGN0eC0+
aHdfaWQpOwotCQlsaXN0X2RlbF9pbml0KCZjdHgtPmh3X2lkX2xpbmspOwotCX0KLQltdXRleF91
bmxvY2soJmk5MTUtPmNvbnRleHRzLm11dGV4KTsKLX0KLQogc3RhdGljIHZvaWQgX19mcmVlX2Vu
Z2luZXMoc3RydWN0IGk5MTVfZ2VtX2VuZ2luZXMgKmUsIHVuc2lnbmVkIGludCBjb3VudCkKIHsK
IAl3aGlsZSAoY291bnQtLSkgewpAQCAtMzEzLDggKzIyMiw2IEBAIHN0YXRpYyB2b2lkIGk5MTVf
Z2VtX2NvbnRleHRfZnJlZShzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KQogCWxvY2tkZXBf
YXNzZXJ0X2hlbGQoJmN0eC0+aTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7CiAJR0VNX0JVR19PTigh
aTkxNV9nZW1fY29udGV4dF9pc19jbG9zZWQoY3R4KSk7CiAKLQlyZWxlYXNlX2h3X2lkKGN0eCk7
Ci0KIAlmcmVlX2VuZ2luZXMocmN1X2FjY2Vzc19wb2ludGVyKGN0eC0+ZW5naW5lcykpOwogCW11
dGV4X2Rlc3Ryb3koJmN0eC0+ZW5naW5lc19tdXRleCk7CiAKQEAgLTQ1OSwxMiArMzY2LDYgQEAg
c3RhdGljIHZvaWQgY29udGV4dF9jbG9zZShzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KQog
CiAJY3R4LT5maWxlX3ByaXYgPSBFUlJfUFRSKC1FQkFERik7CiAKLQkvKgotCSAqIFRoaXMgY29u
dGV4dCB3aWxsIG5ldmVyIGFnYWluIGJlIGFzc2luZ2VkIHRvIEhXLCBzbyB3ZSBjYW4KLQkgKiBy
ZXVzZSBpdHMgSUQgZm9yIHRoZSBuZXh0IGNvbnRleHQuCi0JICovCi0JcmVsZWFzZV9od19pZChj
dHgpOwotCiAJLyoKIAkgKiBUaGUgTFVUIHVzZXMgdGhlIFZNQSBhcyBhIGJhY2twb2ludGVyIHRv
IHVucmVmIHRoZSBvYmplY3QsCiAJICogc28gd2UgbmVlZCB0byBjbGVhciB0aGUgTFVUIGJlZm9y
ZSB3ZSBjbG9zZSBhbGwgdGhlIFZNQSAoaW5zaWRlCkBAIC01MDcsNyArNDA4LDYgQEAgX19jcmVh
dGVfY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlSQ1VfSU5JVF9QT0lO
VEVSKGN0eC0+ZW5naW5lcywgZSk7CiAKIAlJTklUX1JBRElYX1RSRUUoJmN0eC0+aGFuZGxlc192
bWEsIEdGUF9LRVJORUwpOwotCUlOSVRfTElTVF9IRUFEKCZjdHgtPmh3X2lkX2xpbmspOwogCiAJ
LyogTkI6IE1hcmsgYWxsIHNsaWNlcyBhcyBuZWVkaW5nIGEgcmVtYXAgc28gdGhhdCB3aGVuIHRo
ZSBjb250ZXh0IGZpcnN0CiAJICogbG9hZHMgaXQgd2lsbCByZXN0b3JlIHdoYXRldmVyIHJlbWFw
IHN0YXRlIGFscmVhZHkgZXhpc3RzLiBJZiB0aGVyZQpAQCAtNjc2LDE4ICs1NzYsMTEgQEAgc3Ry
dWN0IGk5MTVfZ2VtX2NvbnRleHQgKgogaTkxNV9nZW1fY29udGV4dF9jcmVhdGVfa2VybmVsKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBpbnQgcHJpbykKIHsKIAlzdHJ1Y3QgaTkxNV9n
ZW1fY29udGV4dCAqY3R4OwotCWludCBlcnI7CiAKIAljdHggPSBpOTE1X2dlbV9jcmVhdGVfY29u
dGV4dChpOTE1LCAwKTsKIAlpZiAoSVNfRVJSKGN0eCkpCiAJCXJldHVybiBjdHg7CiAKLQllcnIg
PSBpOTE1X2dlbV9jb250ZXh0X3Bpbl9od19pZChjdHgpOwotCWlmIChlcnIpIHsKLQkJZGVzdHJv
eV9rZXJuZWxfY29udGV4dCgmY3R4KTsKLQkJcmV0dXJuIEVSUl9QVFIoZXJyKTsKLQl9Ci0KIAlp
OTE1X2dlbV9jb250ZXh0X2NsZWFyX2Jhbm5hYmxlKGN0eCk7CiAJaTkxNV9nZW1fY29udGV4dF9z
ZXRfcGVyc2lzdGVuY2UoY3R4KTsKIAljdHgtPnNjaGVkLnByaW9yaXR5ID0gSTkxNV9VU0VSX1BS
SU9SSVRZKHByaW8pOwpAQCAtNzI3LDE1ICs2MjAsNiBAQCBpbnQgaTkxNV9nZW1fY29udGV4dHNf
aW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJCURSTV9FUlJPUigiRmFp
bGVkIHRvIGNyZWF0ZSBkZWZhdWx0IGdsb2JhbCBjb250ZXh0XG4iKTsKIAkJcmV0dXJuIFBUUl9F
UlIoY3R4KTsKIAl9Ci0JLyoKLQkgKiBGb3IgZWFzeSByZWNvZ25pc2FibGl0eSwgd2Ugd2FudCB0
aGUga2VybmVsIGNvbnRleHQgdG8gYmUgMCBhbmQgdGhlbgotCSAqIGFsbCB1c2VyIGNvbnRleHRz
IHdpbGwgaGF2ZSBub24temVybyBod19pZC4gS2VybmVsIGNvbnRleHRzIGFyZQotCSAqIHBlcm1h
bmVudGx5IHBpbm5lZCwgc28gdGhhdCB3ZSBuZXZlciBzdWZmZXIgYSBzdGFsbCBhbmQgY2FuCi0J
ICogdXNlIHRoZW0gZnJvbSBhbnkgYWxsb2NhdGlvbiBjb250ZXh0IChlLmcuIGZvciBldmljdGlu
ZyBvdGhlcgotCSAqIGNvbnRleHRzIGFuZCBmcm9tIGluc2lkZSB0aGUgc2hyaW5rZXIpLgotCSAq
LwotCUdFTV9CVUdfT04oY3R4LT5od19pZCk7Ci0JR0VNX0JVR19PTighYXRvbWljX3JlYWQoJmN0
eC0+aHdfaWRfcGluX2NvdW50KSk7CiAJZGV2X3ByaXYtPmtlcm5lbF9jb250ZXh0ID0gY3R4Owog
CiAJRFJNX0RFQlVHX0RSSVZFUigiJXMgY29udGV4dCBzdXBwb3J0IGluaXRpYWxpemVkXG4iLApA
QCAtNzQ5LDEwICs2MzMsNiBAQCB2b2lkIGk5MTVfZ2VtX2NvbnRleHRzX2Zpbmkoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJbG9ja2RlcF9hc3NlcnRfaGVsZCgmaTkxNS0+ZHJtLnN0
cnVjdF9tdXRleCk7CiAKIAlkZXN0cm95X2tlcm5lbF9jb250ZXh0KCZpOTE1LT5rZXJuZWxfY29u
dGV4dCk7Ci0KLQkvKiBNdXN0IGZyZWUgYWxsIGRlZmVycmVkIGNvbnRleHRzICh2aWEgZmx1c2hf
d29ya3F1ZXVlKSBmaXJzdCAqLwotCUdFTV9CVUdfT04oIWxpc3RfZW1wdHkoJmk5MTUtPmNvbnRl
eHRzLmh3X2lkX2xpc3QpKTsKLQlpZGFfZGVzdHJveSgmaTkxNS0+Y29udGV4dHMuaHdfaWRhKTsK
IH0KIAogc3RhdGljIGludCBjb250ZXh0X2lkcl9jbGVhbnVwKGludCBpZCwgdm9pZCAqcCwgdm9p
ZCAqZGF0YSkKQEAgLTI0NDIsMzMgKzIzMjIsNiBAQCBpbnQgaTkxNV9nZW1fY29udGV4dF9yZXNl
dF9zdGF0c19pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCXJldHVybiByZXQ7CiB9CiAK
LWludCBfX2k5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lkKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0
ICpjdHgpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBjdHgtPmk5MTU7Ci0J
aW50IGVyciA9IDA7Ci0KLQltdXRleF9sb2NrKCZpOTE1LT5jb250ZXh0cy5tdXRleCk7Ci0KLQlH
RU1fQlVHX09OKGk5MTVfZ2VtX2NvbnRleHRfaXNfY2xvc2VkKGN0eCkpOwotCi0JaWYgKGxpc3Rf
ZW1wdHkoJmN0eC0+aHdfaWRfbGluaykpIHsKLQkJR0VNX0JVR19PTihhdG9taWNfcmVhZCgmY3R4
LT5od19pZF9waW5fY291bnQpKTsKLQotCQllcnIgPSBhc3NpZ25faHdfaWQoaTkxNSwgJmN0eC0+
aHdfaWQpOwotCQlpZiAoZXJyKQotCQkJZ290byBvdXRfdW5sb2NrOwotCi0JCWxpc3RfYWRkX3Rh
aWwoJmN0eC0+aHdfaWRfbGluaywgJmk5MTUtPmNvbnRleHRzLmh3X2lkX2xpc3QpOwotCX0KLQot
CUdFTV9CVUdfT04oYXRvbWljX3JlYWQoJmN0eC0+aHdfaWRfcGluX2NvdW50KSA9PSB+MHUpOwot
CWF0b21pY19pbmMoJmN0eC0+aHdfaWRfcGluX2NvdW50KTsKLQotb3V0X3VubG9jazoKLQltdXRl
eF91bmxvY2soJmk5MTUtPmNvbnRleHRzLm11dGV4KTsKLQlyZXR1cm4gZXJyOwotfQotCiAvKiBH
RU0gY29udGV4dC1lbmdpbmVzIGl0ZXJhdG9yOiBmb3JfZWFjaF9nZW1fZW5naW5lKCkgKi8KIHN0
cnVjdCBpbnRlbF9jb250ZXh0ICoKIGk5MTVfZ2VtX2VuZ2luZXNfaXRlcl9uZXh0KHN0cnVjdCBp
OTE1X2dlbV9lbmdpbmVzX2l0ZXIgKml0KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9jb250ZXh0LmgKaW5kZXggZTBmNWI2YzZhMzMxLi4xYjBkZjUzNDM2Y2YgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaApAQCAtMTI3LDIxICsxMjcs
NiBAQCBpOTE1X2dlbV9jb250ZXh0X2NsZWFyX3VzZXJfZW5naW5lcyhzdHJ1Y3QgaTkxNV9nZW1f
Y29udGV4dCAqY3R4KQogCWNsZWFyX2JpdChDT05URVhUX1VTRVJfRU5HSU5FUywgJmN0eC0+Zmxh
Z3MpOwogfQogCi1pbnQgX19pOTE1X2dlbV9jb250ZXh0X3Bpbl9od19pZChzdHJ1Y3QgaTkxNV9n
ZW1fY29udGV4dCAqY3R4KTsKLXN0YXRpYyBpbmxpbmUgaW50IGk5MTVfZ2VtX2NvbnRleHRfcGlu
X2h3X2lkKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCi17Ci0JaWYgKGF0b21pY19pbmNf
bm90X3plcm8oJmN0eC0+aHdfaWRfcGluX2NvdW50KSkKLQkJcmV0dXJuIDA7Ci0KLQlyZXR1cm4g
X19pOTE1X2dlbV9jb250ZXh0X3Bpbl9od19pZChjdHgpOwotfQotCi1zdGF0aWMgaW5saW5lIHZv
aWQgaTkxNV9nZW1fY29udGV4dF91bnBpbl9od19pZChzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAq
Y3R4KQotewotCUdFTV9CVUdfT04oYXRvbWljX3JlYWQoJmN0eC0+aHdfaWRfcGluX2NvdW50KSA9
PSAwdSk7Ci0JYXRvbWljX2RlYygmY3R4LT5od19pZF9waW5fY291bnQpOwotfQotCiBzdGF0aWMg
aW5saW5lIGJvb2wgaTkxNV9nZW1fY29udGV4dF9pc19rZXJuZWwoc3RydWN0IGk5MTVfZ2VtX2Nv
bnRleHQgKmN0eCkKIHsKIAlyZXR1cm4gIWN0eC0+ZmlsZV9wcml2OwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaCBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0X3R5cGVzLmgKaW5kZXggZGFmMWVhNTA3
NWE2Li42NDE5ZGE3YzlmOTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9jb250ZXh0X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2NvbnRleHRfdHlwZXMuaApAQCAtMTQ4LDI0ICsxNDgsNiBAQCBzdHJ1Y3QgaTkxNV9n
ZW1fY29udGV4dCB7CiAjZGVmaW5lIENPTlRFWFRfRk9SQ0VfU0lOR0xFX1NVQk1JU1NJT04JMgog
I2RlZmluZSBDT05URVhUX1VTRVJfRU5HSU5FUwkJMwogCi0JLyoqCi0JICogQGh3X2lkOiAtIHVu
aXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29udGV4dAotCSAqCi0JICogVGhlIGhhcmR3YXJlIG5l
ZWRzIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoZSBjb250ZXh0IGZvciBhIGZldwotCSAqIGZ1bmN0
aW9ucyBsaWtlIGZhdWx0IHJlcG9ydGluZywgUEFTSUQsIHNjaGVkdWxpbmcuIFRoZQotCSAqICZk
cm1faTkxNV9wcml2YXRlLmNvbnRleHRfaHdfaWRhIGlzIHVzZWQgdG8gYXNzaWduIGEgdW5xaXVl
Ci0JICogaWQgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgY29udGV4dC4KLQkgKgotCSAqIEBod19p
ZF9waW5fY291bnQ6IC0gbnVtYmVyIG9mIHRpbWVzIHRoaXMgY29udGV4dCBoYWQgYmVlbiBwaW5u
ZWQKLQkgKiBmb3IgdXNlIChzaG91bGQgYmUsIGF0IG1vc3QsIG9uY2UgcGVyIGVuZ2luZSkuCi0J
ICoKLQkgKiBAaHdfaWRfbGluazogLSBhbGwgY29udGV4dHMgd2l0aCBhbiBhc3NpZ25lZCBpZCBh
cmUgdHJhY2tlZAotCSAqIGZvciBwb3NzaWJsZSByZXBvc3Nlc3Npb24uCi0JICovCi0JdW5zaWdu
ZWQgaW50IGh3X2lkOwotCWF0b21pY190IGh3X2lkX3Bpbl9jb3VudDsKLQlzdHJ1Y3QgbGlzdF9o
ZWFkIGh3X2lkX2xpbms7Ci0KIAlzdHJ1Y3QgbXV0ZXggbXV0ZXg7CiAKIAlzdHJ1Y3QgaTkxNV9z
Y2hlZF9hdHRyIHNjaGVkOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3Nl
bGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2Vs
ZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYwppbmRleCBlODBkMzA5ZjU0MjcuLmFiMWFlNTNlZGUy
YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dl
bV9jb250ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1
X2dlbV9jb250ZXh0LmMKQEAgLTQ0Niw5ICs0NDYsOSBAQCBzdGF0aWMgaW50IGlndF9jdHhfZXhl
Yyh2b2lkICphcmcpCiAKIAkJCWVyciA9IGdwdV9maWxsKGNlLCBvYmosIGR3KTsKIAkJCWlmIChl
cnIpIHsKLQkJCQlwcl9lcnIoIkZhaWxlZCB0byBmaWxsIGR3b3JkICVsdSBbJWx1LyVsdV0gd2l0
aCBncHUgKCVzKSBpbiBjdHggJXUgW2Z1bGwtcHBndHQ/ICVzXSwgZXJyPSVkXG4iLAorCQkJCXBy
X2VycigiRmFpbGVkIHRvIGZpbGwgZHdvcmQgJWx1IFslbHUvJWx1XSB3aXRoIGdwdSAoJXMpIFtm
dWxsLXBwZ3R0PyAlc10sIGVycj0lZFxuIiwKIAkJCQkgICAgICAgbmR3b3JkcywgZHcsIG1heF9k
d29yZHMob2JqKSwKLQkJCQkgICAgICAgZW5naW5lLT5uYW1lLCBjdHgtPmh3X2lkLAorCQkJCSAg
ICAgICBlbmdpbmUtPm5hbWUsCiAJCQkJICAgICAgIHllc25vKCEhY3R4LT52bSksIGVycik7CiAJ
CQkJaW50ZWxfY29udGV4dF9wdXQoY2UpOwogCQkJCWtlcm5lbF9jb250ZXh0X2Nsb3NlKGN0eCk7
CkBAIC01ODQsOSArNTg0LDkgQEAgc3RhdGljIGludCBpZ3Rfc2hhcmVkX2N0eF9leGVjKHZvaWQg
KmFyZykKIAogCQkJZXJyID0gZ3B1X2ZpbGwoY2UsIG9iaiwgZHcpOwogCQkJaWYgKGVycikgewot
CQkJCXByX2VycigiRmFpbGVkIHRvIGZpbGwgZHdvcmQgJWx1IFslbHUvJWx1XSB3aXRoIGdwdSAo
JXMpIGluIGN0eCAldSBbZnVsbC1wcGd0dD8gJXNdLCBlcnI9JWRcbiIsCisJCQkJcHJfZXJyKCJG
YWlsZWQgdG8gZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGggZ3B1ICglcykgW2Z1bGwtcHBn
dHQ/ICVzXSwgZXJyPSVkXG4iLAogCQkJCSAgICAgICBuZHdvcmRzLCBkdywgbWF4X2R3b3Jkcyhv
YmopLAotCQkJCSAgICAgICBlbmdpbmUtPm5hbWUsIGN0eC0+aHdfaWQsCisJCQkJICAgICAgIGVu
Z2luZS0+bmFtZSwKIAkJCQkgICAgICAgeWVzbm8oISFjdHgtPnZtKSwgZXJyKTsKIAkJCQlpbnRl
bF9jb250ZXh0X3B1dChjZSk7CiAJCQkJa2VybmVsX2NvbnRleHRfY2xvc2UoY3R4KTsKQEAgLTEx
NjgsMTAgKzExNjgsOSBAQCBzdGF0aWMgaW50IGlndF9jdHhfcmVhZG9ubHkodm9pZCAqYXJnKQog
CiAJCQllcnIgPSBncHVfZmlsbChjZSwgb2JqLCBkdyk7CiAJCQlpZiAoZXJyKSB7Ci0JCQkJcHJf
ZXJyKCJGYWlsZWQgdG8gZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGggZ3B1ICglcykgaW4g
Y3R4ICV1IFtmdWxsLXBwZ3R0PyAlc10sIGVycj0lZFxuIiwKKwkJCQlwcl9lcnIoIkZhaWxlZCB0
byBmaWxsIGR3b3JkICVsdSBbJWx1LyVsdV0gd2l0aCBncHUgKCVzKSBbZnVsbC1wcGd0dD8gJXNd
LCBlcnI9JWRcbiIsCiAJCQkJICAgICAgIG5kd29yZHMsIGR3LCBtYXhfZHdvcmRzKG9iaiksCi0J
CQkJICAgICAgIGNlLT5lbmdpbmUtPm5hbWUsIGN0eC0+aHdfaWQsCi0JCQkJICAgICAgIHllc25v
KCEhY3R4LT52bSksIGVycik7CisJCQkJICAgICAgIGNlLT5lbmdpbmUtPm5hbWUsIHllc25vKCEh
Y3R4LT52bSksIGVycik7CiAJCQkJaTkxNV9nZW1fY29udGV4dF91bmxvY2tfZW5naW5lcyhjdHgp
OwogCQkJCWdvdG8gb3V0X3VubG9jazsKIAkJCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5jCmluZGV4IDBkMWEyNzVlYzMxNi4uZWJjNDZm
MDk4NTYxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21v
Y2tfY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9j
a19jb250ZXh0LmMKQEAgLTEzLDcgKzEzLDYgQEAgbW9ja19jb250ZXh0KHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1LAogewogCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHg7CiAJc3Ry
dWN0IGk5MTVfZ2VtX2VuZ2luZXMgKmU7Ci0JaW50IHJldDsKIAogCWN0eCA9IGt6YWxsb2Moc2l6
ZW9mKCpjdHgpLCBHRlBfS0VSTkVMKTsKIAlpZiAoIWN0eCkKQEAgLTMyLDEzICszMSw4IEBAIG1v
Y2tfY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKIAlSQ1VfSU5JVF9QT0lO
VEVSKGN0eC0+ZW5naW5lcywgZSk7CiAKIAlJTklUX1JBRElYX1RSRUUoJmN0eC0+aGFuZGxlc192
bWEsIEdGUF9LRVJORUwpOwotCUlOSVRfTElTVF9IRUFEKCZjdHgtPmh3X2lkX2xpbmspOwogCW11
dGV4X2luaXQoJmN0eC0+bXV0ZXgpOwogCi0JcmV0ID0gaTkxNV9nZW1fY29udGV4dF9waW5faHdf
aWQoY3R4KTsKLQlpZiAocmV0IDwgMCkKLQkJZ290byBlcnJfZW5naW5lczsKLQogCWlmIChuYW1l
KSB7CiAJCXN0cnVjdCBpOTE1X3BwZ3R0ICpwcGd0dDsKIApAQCAtNTYsOCArNTAsNiBAQCBtb2Nr
X2NvbnRleHQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAKIAlyZXR1cm4gY3R4Owog
Ci1lcnJfZW5naW5lczoKLQlmcmVlX2VuZ2luZXMocmN1X2FjY2Vzc19wb2ludGVyKGN0eC0+ZW5n
aW5lcykpOwogZXJyX2ZyZWU6CiAJa2ZyZWUoY3R4KTsKIAlyZXR1cm4gTlVMTDsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaCBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaAppbmRleCBiZjljZWRmY2Ni
ZjAuLmEzNTc4ZWYyNDA3OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfY29udGV4dF90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Nv
bnRleHRfdHlwZXMuaApAQCAtNTgsNiArNTgsNyBAQCBzdHJ1Y3QgaW50ZWxfY29udGV4dCB7CiAK
IAl1MzIgKmxyY19yZWdfc3RhdGU7CiAJdTY0IGxyY19kZXNjOworCXUzMiBod190YWc7CiAKIAl1
bnNpZ25lZCBpbnQgYWN0aXZlX2NvdW50OyAvKiBwcm90ZWN0ZWQgYnkgdGltZWxpbmUtPm11dGV4
ICovCiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90
eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKaW5k
ZXggMDgyNWI2OTM5YjlhLi5iNmJiOWI5MjhmYjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCkBAIC0yOTYsMTAgKzI5NiwxMiBAQCBzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzIHsKIAl1OCB1YWJpX2NsYXNzOwogCXU4IHVhYmlfaW5zdGFuY2U7CiAKKwl1
MzIgdWFiaV9jYXBhYmlsaXRpZXM7CiAJdTMyIGNvbnRleHRfc2l6ZTsKIAl1MzIgbW1pb19iYXNl
OwogCi0JdTMyIHVhYmlfY2FwYWJpbGl0aWVzOworCXVuc2lnbmVkIGludCBod190YWc7CisjZGVm
aW5lIE5VTV9IV19UQUcgKDI1NikKIAogCXN0cnVjdCByYl9ub2RlIHVhYmlfbm9kZTsKIApkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwppbmRleCBiNGUwZTk0NTQyZTMuLmQwN2NlMGQ3ZDc4
ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKQEAgLTQzMiwxMiArNDMyLDggQEAg
YXNzZXJ0X3ByaW9yaXR5X3F1ZXVlKGNvbnN0IHN0cnVjdCBpOTE1X3JlcXVlc3QgKnByZXYsCiBz
dGF0aWMgdTY0CiBscmNfZGVzY3JpcHRvcihzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsIHN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIHsKLQlzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAq
Y3R4ID0gY2UtPmdlbV9jb250ZXh0OwogCXU2NCBkZXNjOwogCi0JQlVJTERfQlVHX09OKE1BWF9D
T05URVhUX0hXX0lEID4gKEJJVChHRU44X0NUWF9JRF9XSURUSCkpKTsKLQlCVUlMRF9CVUdfT04o
R0VOMTFfTUFYX0NPTlRFWFRfSFdfSUQgPiAoQklUKEdFTjExX1NXX0NUWF9JRF9XSURUSCkpKTsK
LQogCWRlc2MgPSBJTlRFTF9MRUdBQ1lfMzJCX0NPTlRFWFQ7CiAJaWYgKGk5MTVfdm1faXNfNGx2
bChjZS0+dm0pKQogCQlkZXNjID0gSU5URUxfTEVHQUNZXzY0Ql9DT05URVhUOwpAQCAtNDU1LDIw
ICs0NTEsMTEgQEAgbHJjX2Rlc2NyaXB0b3Ioc3RydWN0IGludGVsX2NvbnRleHQgKmNlLCBzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJICogYW55dGhpbmcgYmVsb3cuCiAJICovCiAJ
aWYgKElOVEVMX0dFTihlbmdpbmUtPmk5MTUpID49IDExKSB7Ci0JCUdFTV9CVUdfT04oY3R4LT5o
d19pZCA+PSBCSVQoR0VOMTFfU1dfQ1RYX0lEX1dJRFRIKSk7Ci0JCWRlc2MgfD0gKHU2NCljdHgt
Pmh3X2lkIDw8IEdFTjExX1NXX0NUWF9JRF9TSElGVDsKLQkJCQkJCQkJLyogYml0cyAzNy00NyAq
LwotCiAJCWRlc2MgfD0gKHU2NCllbmdpbmUtPmluc3RhbmNlIDw8IEdFTjExX0VOR0lORV9JTlNU
QU5DRV9TSElGVDsKIAkJCQkJCQkJLyogYml0cyA0OC01MyAqLwogCi0JCS8qIFRPRE86IGRlY2lk
ZSB3aGF0IHRvIGRvIHdpdGggU1cgY291bnRlciAoYml0cyA1NS02MCkgKi8KLQogCQlkZXNjIHw9
ICh1NjQpZW5naW5lLT5jbGFzcyA8PCBHRU4xMV9FTkdJTkVfQ0xBU1NfU0hJRlQ7CiAJCQkJCQkJ
CS8qIGJpdHMgNjEtNjMgKi8KLQl9IGVsc2UgewotCQlHRU1fQlVHX09OKGN0eC0+aHdfaWQgPj0g
QklUKEdFTjhfQ1RYX0lEX1dJRFRIKSk7Ci0JCWRlc2MgfD0gKHU2NCljdHgtPmh3X2lkIDw8IEdF
TjhfQ1RYX0lEX1NISUZUOwkvKiBiaXRzIDMyLTUyICovCiAJfQogCiAJcmV0dXJuIGRlc2M7CkBA
IC01NzIsNiArNTU5LDE1IEBAIF9fZXhlY2xpc3RzX3NjaGVkdWxlX2luKHN0cnVjdCBpOTE1X3Jl
cXVlc3QgKnJxKQogCiAJaW50ZWxfY29udGV4dF9nZXQoY2UpOwogCisJaWYgKGNlLT5od190YWcp
IHsKKwkJY2UtPmxyY19kZXNjIHw9ICh1NjQpY2UtPmh3X3RhZyA8PCAzMjsKKwl9IGVsc2Ugewor
CQljZS0+bHJjX2Rlc2MgJj0gfkdFTk1BU0tfVUxMKDQ3LCAzNyk7CisJCWNlLT5scmNfZGVzYyB8
PQorCQkJKHU2NCkoZW5naW5lLT5od190YWcrKyAlIE5VTV9IV19UQUcpIDw8CisJCQlHRU4xMV9T
V19DVFhfSURfU0hJRlQ7CisJfQorCiAJaW50ZWxfZ3RfcG1fZ2V0KGVuZ2luZS0+Z3QpOwogCWV4
ZWNsaXN0c19jb250ZXh0X3N0YXR1c19jaGFuZ2UocnEsIElOVEVMX0NPTlRFWFRfU0NIRURVTEVf
SU4pOwogCWludGVsX2VuZ2luZV9jb250ZXh0X2luKGVuZ2luZSk7CkBAIC0xODQzLDcgKzE4Mzks
NiBAQCBzdGF0aWMgdm9pZCBleGVjbGlzdHNfY29udGV4dF91bnBpbihzdHJ1Y3QgaW50ZWxfY29u
dGV4dCAqY2UpCiAJY2hlY2tfcmVkem9uZSgodm9pZCAqKWNlLT5scmNfcmVnX3N0YXRlIC0gTFJD
X1NUQVRFX1BOICogUEFHRV9TSVpFLAogCQkgICAgICBjZS0+ZW5naW5lKTsKIAotCWk5MTVfZ2Vt
X2NvbnRleHRfdW5waW5faHdfaWQoY2UtPmdlbV9jb250ZXh0KTsKIAlpOTE1X2dlbV9vYmplY3Rf
dW5waW5fbWFwKGNlLT5zdGF0ZS0+b2JqKTsKIAlpbnRlbF9yaW5nX3Jlc2V0KGNlLT5yaW5nLCBj
ZS0+cmluZy0+dGFpbCk7CiB9CkBAIC0xODkzLDE4ICsxODg4LDEyIEBAIF9fZXhlY2xpc3RzX2Nv
bnRleHRfcGluKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKIAkJZ290byB1bnBpbl9hY3RpdmU7
CiAJfQogCi0JcmV0ID0gaTkxNV9nZW1fY29udGV4dF9waW5faHdfaWQoY2UtPmdlbV9jb250ZXh0
KTsKLQlpZiAocmV0KQotCQlnb3RvIHVucGluX21hcDsKLQogCWNlLT5scmNfZGVzYyA9IGxyY19k
ZXNjcmlwdG9yKGNlLCBlbmdpbmUpOwogCWNlLT5scmNfcmVnX3N0YXRlID0gdmFkZHIgKyBMUkNf
U1RBVEVfUE4gKiBQQUdFX1NJWkU7CiAJX19leGVjbGlzdHNfdXBkYXRlX3JlZ19zdGF0ZShjZSwg
ZW5naW5lKTsKIAogCXJldHVybiAwOwogCi11bnBpbl9tYXA6Ci0JaTkxNV9nZW1fb2JqZWN0X3Vu
cGluX21hcChjZS0+c3RhdGUtPm9iaik7CiB1bnBpbl9hY3RpdmU6CiAJaW50ZWxfY29udGV4dF9h
Y3RpdmVfcmVsZWFzZShjZSk7CiBlcnI6CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndnQva3ZtZ3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9rdm1ndC5jCmluZGV4IDM0
M2Q3OWMxY2I3ZS4uMDRhNWEwZDkwODIzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndnQva3ZtZ3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3QuYwpAQCAt
MTU2NCwyNyArMTU2NCwxMCBAQCB2Z3B1X2lkX3Nob3coc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1
Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwKIAlyZXR1cm4gc3ByaW50ZihidWYsICJcbiIpOwog
fQogCi1zdGF0aWMgc3NpemVfdAotaHdfaWRfc2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVj
dCBkZXZpY2VfYXR0cmlidXRlICphdHRyLAotCSAgIGNoYXIgKmJ1ZikKLXsKLQlzdHJ1Y3QgbWRl
dl9kZXZpY2UgKm1kZXYgPSBtZGV2X2Zyb21fZGV2KGRldik7Ci0KLQlpZiAobWRldikgewotCQlz
dHJ1Y3QgaW50ZWxfdmdwdSAqdmdwdSA9IChzdHJ1Y3QgaW50ZWxfdmdwdSAqKQotCQkJbWRldl9n
ZXRfZHJ2ZGF0YShtZGV2KTsKLQkJcmV0dXJuIHNwcmludGYoYnVmLCAiJXVcbiIsCi0JCQkgICAg
ICAgdmdwdS0+c3VibWlzc2lvbi5zaGFkb3dbMF0tPmdlbV9jb250ZXh0LT5od19pZCk7Ci0JfQot
CXJldHVybiBzcHJpbnRmKGJ1ZiwgIlxuIik7Ci19Ci0KIHN0YXRpYyBERVZJQ0VfQVRUUl9STyh2
Z3B1X2lkKTsKLXN0YXRpYyBERVZJQ0VfQVRUUl9STyhod19pZCk7CiAKIHN0YXRpYyBzdHJ1Y3Qg
YXR0cmlidXRlICppbnRlbF92Z3B1X2F0dHJzW10gPSB7CiAJJmRldl9hdHRyX3ZncHVfaWQuYXR0
ciwKLQkmZGV2X2F0dHJfaHdfaWQuYXR0ciwKIAlOVUxMCiB9OwogCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZGVidWdmcy5jCmluZGV4IGI2YTE5OWM0ODU2ZS4uNzM3ZWE0ZDNkN2MyIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2RlYnVnZnMuYwpAQCAtMTQ4OCw5ICsxNDg4LDYgQEAgc3RhdGljIGludCBp
OTE1X2NvbnRleHRfc3RhdHVzKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqdW51c2VkKQogCQlz
dHJ1Y3QgaW50ZWxfY29udGV4dCAqY2U7CiAKIAkJc2VxX3B1dHMobSwgIkhXIGNvbnRleHQgIik7
Ci0JCWlmICghbGlzdF9lbXB0eSgmY3R4LT5od19pZF9saW5rKSkKLQkJCXNlcV9wcmludGYobSwg
IiV4IFtwaW4gJXVdIiwgY3R4LT5od19pZCwKLQkJCQkgICBhdG9taWNfcmVhZCgmY3R4LT5od19p
ZF9waW5fY291bnQpKTsKIAkJaWYgKGN0eC0+cGlkKSB7CiAJCQlzdHJ1Y3QgdGFza19zdHJ1Y3Qg
KnRhc2s7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9y
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jCmluZGV4IGZjYWU5M2E5
NzY3ZS4uOWJlYzU1Nzc2YjAzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dwdV9lcnJvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMK
QEAgLTQ3MSw5ICs0NzEsOSBAQCBzdGF0aWMgdm9pZCBlcnJvcl9wcmludF9jb250ZXh0KHN0cnVj
dCBkcm1faTkxNV9lcnJvcl9zdGF0ZV9idWYgKm0sCiAJCQkJY29uc3QgY2hhciAqaGVhZGVyLAog
CQkJCWNvbnN0IHN0cnVjdCBkcm1faTkxNV9lcnJvcl9jb250ZXh0ICpjdHgpCiB7Ci0JZXJyX3By
aW50ZihtLCAiJXMlc1slZF0gaHdfaWQgJWQsIHByaW8gJWQsIGd1aWx0eSAlZCBhY3RpdmUgJWRc
biIsCi0JCSAgIGhlYWRlciwgY3R4LT5jb21tLCBjdHgtPnBpZCwgY3R4LT5od19pZCwKLQkJICAg
Y3R4LT5zY2hlZF9hdHRyLnByaW9yaXR5LCBjdHgtPmd1aWx0eSwgY3R4LT5hY3RpdmUpOworCWVy
cl9wcmludGYobSwgIiVzJXNbJWRdIHByaW8gJWQsIGd1aWx0eSAlZCBhY3RpdmUgJWRcbiIsCisJ
CSAgIGhlYWRlciwgY3R4LT5jb21tLCBjdHgtPnBpZCwgY3R4LT5zY2hlZF9hdHRyLnByaW9yaXR5
LAorCQkgICBjdHgtPmd1aWx0eSwgY3R4LT5hY3RpdmUpOwogfQogCiBzdGF0aWMgdm9pZCBlcnJv
cl9wcmludF9lbmdpbmUoc3RydWN0IGRybV9pOTE1X2Vycm9yX3N0YXRlX2J1ZiAqbSwKQEAgLTEy
NTUsNyArMTI1NSw2IEBAIHN0YXRpYyBib29sIHJlY29yZF9jb250ZXh0KHN0cnVjdCBkcm1faTkx
NV9lcnJvcl9jb250ZXh0ICplLAogCQlyY3VfcmVhZF91bmxvY2soKTsKIAl9CiAKLQllLT5od19p
ZCA9IGN0eC0+aHdfaWQ7CiAJZS0+c2NoZWRfYXR0ciA9IGN0eC0+c2NoZWQ7CiAJZS0+Z3VpbHR5
ID0gYXRvbWljX3JlYWQoJmN0eC0+Z3VpbHR5X2NvdW50KTsKIAllLT5hY3RpdmUgPSBhdG9taWNf
cmVhZCgmY3R4LT5hY3RpdmVfY291bnQpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9ncHVfZXJyb3IuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9y
LmgKaW5kZXggMGVkMDYxZWUzMzc4Li4zOGE4ZDczMTZjMjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9ncHVfZXJyb3IuaApAQCAtMTE2LDcgKzExNiw2IEBAIHN0cnVjdCBpOTE1X2dwdV9zdGF0
ZSB7CiAJCXN0cnVjdCBkcm1faTkxNV9lcnJvcl9jb250ZXh0IHsKIAkJCWNoYXIgY29tbVtUQVNL
X0NPTU1fTEVOXTsKIAkJCXBpZF90IHBpZDsKLQkJCXUzMiBod19pZDsKIAkJCWludCBhY3RpdmU7
CiAJCQlpbnQgZ3VpbHR5OwogCQkJc3RydWN0IGk5MTVfc2NoZWRfYXR0ciBzY2hlZF9hdHRyOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3BlcmYuYwppbmRleCAxMjQzYTg5YTQ3OGYuLjIzNjhkM2I2MWU5NCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKQEAgLTEyODMsMjIgKzEyODMsMTUgQEAgc3RhdGlj
IGludCBvYV9nZXRfcmVuZGVyX2N0eF9pZChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFt
KQogCQl9IGVsc2UgewogCQkJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWRfbWFzayA9CiAJCQkJKDFV
IDw8IEdFTjhfQ1RYX0lEX1dJRFRIKSAtIDE7Ci0JCQlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZCA9
Ci0JCQkJdXBwZXJfMzJfYml0cyhjZS0+bHJjX2Rlc2MpOwotCQkJc3RyZWFtLT5zcGVjaWZpY19j
dHhfaWQgJj0KLQkJCQlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZF9tYXNrOworCQkJc3RyZWFtLT5z
cGVjaWZpY19jdHhfaWQgPSBzdHJlYW0tPnNwZWNpZmljX2N0eF9pZF9tYXNrOwogCQl9CiAJCWJy
ZWFrOwogCiAJY2FzZSAxMToKIAljYXNlIDEyOiB7CiAJCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lk
X21hc2sgPQotCQkJKCgxVSA8PCBHRU4xMV9TV19DVFhfSURfV0lEVEgpIC0gMSkgPDwgKEdFTjEx
X1NXX0NUWF9JRF9TSElGVCAtIDMyKSB8Ci0JCQkoKDFVIDw8IEdFTjExX0VOR0lORV9JTlNUQU5D
RV9XSURUSCkgLSAxKSA8PCAoR0VOMTFfRU5HSU5FX0lOU1RBTkNFX1NISUZUIC0gMzIpIHwKLQkJ
CSgoMSA8PCBHRU4xMV9FTkdJTkVfQ0xBU1NfV0lEVEgpIC0gMSkgPDwgKEdFTjExX0VOR0lORV9D
TEFTU19TSElGVCAtIDMyKTsKLQkJc3RyZWFtLT5zcGVjaWZpY19jdHhfaWQgPSB1cHBlcl8zMl9i
aXRzKGNlLT5scmNfZGVzYyk7Ci0JCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkICY9Ci0JCQlzdHJl
YW0tPnNwZWNpZmljX2N0eF9pZF9tYXNrOworCQkJKCgxVSA8PCBHRU4xMV9TV19DVFhfSURfV0lE
VEgpIC0gMSkgPDwgKEdFTjExX1NXX0NUWF9JRF9TSElGVCAtIDMyKTsKKwkJc3RyZWFtLT5zcGVj
aWZpY19jdHhfaWQgPSBzdHJlYW0tPnNwZWNpZmljX2N0eF9pZF9tYXNrOwogCQlicmVhazsKIAl9
CiAKQEAgLTEzMDYsNiArMTI5OSw4IEBAIHN0YXRpYyBpbnQgb2FfZ2V0X3JlbmRlcl9jdHhfaWQo
c3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAkJTUlTU0lOR19DQVNFKElOVEVMX0dF
TihpOTE1KSk7CiAJfQogCisJY2UtPmh3X3RhZyA9IHN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkX21h
c2s7CisKIAlEUk1fREVCVUdfRFJJVkVSKCJmaWx0ZXJpbmcgb24gY3R4X2lkPTB4JXggY3R4X2lk
X21hc2s9MHgleFxuIiwKIAkJCSBzdHJlYW0tPnNwZWNpZmljX2N0eF9pZCwKIAkJCSBzdHJlYW0t
PnNwZWNpZmljX2N0eF9pZF9tYXNrKTsKQEAgLTEzMjIsMTggKzEzMTcsMTkgQEAgc3RhdGljIGlu
dCBvYV9nZXRfcmVuZGVyX2N0eF9pZChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQog
ICovCiBzdGF0aWMgdm9pZCBvYV9wdXRfcmVuZGVyX2N0eF9pZChzdHJ1Y3QgaTkxNV9wZXJmX3N0
cmVhbSAqc3RyZWFtKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHN0
cmVhbS0+ZGV2X3ByaXY7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBzdHJlYW0t
PmRldl9wcml2OwogCXN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZTsKIAotCXN0cmVhbS0+c3BlY2lm
aWNfY3R4X2lkID0gSU5WQUxJRF9DVFhfSUQ7Ci0Jc3RyZWFtLT5zcGVjaWZpY19jdHhfaWRfbWFz
ayA9IDA7Ci0KIAljZSA9IGZldGNoX2FuZF96ZXJvKCZzdHJlYW0tPnBpbm5lZF9jdHgpOwotCWlm
IChjZSkgewotCQltdXRleF9sb2NrKCZkZXZfcHJpdi0+ZHJtLnN0cnVjdF9tdXRleCk7CisJaWYg
KGNlKSAgeworCQltdXRleF9sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKKwkJY2UtPmh3
X3RhZyA9IDA7CiAJCWludGVsX2NvbnRleHRfdW5waW4oY2UpOwotCQltdXRleF91bmxvY2soJmRl
dl9wcml2LT5kcm0uc3RydWN0X211dGV4KTsKKwkJbXV0ZXhfdW5sb2NrKCZpOTE1LT5kcm0uc3Ry
dWN0X211dGV4KTsKIAl9CisKKwlzdHJlYW0tPnNwZWNpZmljX2N0eF9pZCA9IElOVkFMSURfQ1RY
X0lEOworCXN0cmVhbS0+c3BlY2lmaWNfY3R4X2lkX21hc2sgPSAwOwogfQogCiBzdGF0aWMgdm9p
ZApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90cmFjZS5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV90cmFjZS5oCmluZGV4IDI0ZjI5NDRkYTA5ZC4uMWYyY2Y2Y2Zh
ZmI1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3RyYWNlLmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90cmFjZS5oCkBAIC02NjUsNyArNjY1LDYgQEAgVFJB
Q0VfRVZFTlQoaTkxNV9yZXF1ZXN0X3F1ZXVlLAogCiAJICAgIFRQX1NUUlVDVF9fZW50cnkoCiAJ
CQkgICAgIF9fZmllbGQodTMyLCBkZXYpCi0JCQkgICAgIF9fZmllbGQodTMyLCBod19pZCkKIAkJ
CSAgICAgX19maWVsZCh1NjQsIGN0eCkKIAkJCSAgICAgX19maWVsZCh1MTYsIGNsYXNzKQogCQkJ
ICAgICBfX2ZpZWxkKHUxNiwgaW5zdGFuY2UpCkBAIC02NzUsNyArNjc0LDYgQEAgVFJBQ0VfRVZF
TlQoaTkxNV9yZXF1ZXN0X3F1ZXVlLAogCiAJICAgIFRQX2Zhc3RfYXNzaWduKAogCQkJICAgX19l
bnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRleDsKLQkJCSAgIF9fZW50cnkt
Pmh3X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsKIAkJCSAgIF9fZW50cnktPmNsYXNzID0g
cnEtPmVuZ2luZS0+dWFiaV9jbGFzczsKIAkJCSAgIF9fZW50cnktPmluc3RhbmNlID0gcnEtPmVu
Z2luZS0+dWFiaV9pbnN0YW5jZTsKIAkJCSAgIF9fZW50cnktPmN0eCA9IHJxLT5mZW5jZS5jb250
ZXh0OwpAQCAtNjgzLDEwICs2ODEsOSBAQCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3RfcXVldWUs
CiAJCQkgICBfX2VudHJ5LT5mbGFncyA9IGZsYWdzOwogCQkJICAgKSwKIAotCSAgICBUUF9wcmlu
dGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBm
bGFncz0weCV4IiwKKwkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgY3R4PSVs
bHUsIHNlcW5vPSV1LCBmbGFncz0weCV4IiwKIAkJICAgICAgX19lbnRyeS0+ZGV2LCBfX2VudHJ5
LT5jbGFzcywgX19lbnRyeS0+aW5zdGFuY2UsCi0JCSAgICAgIF9fZW50cnktPmh3X2lkLCBfX2Vu
dHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAotCQkgICAgICBfX2VudHJ5LT5mbGFncykKKwkJICAg
ICAgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywgX19lbnRyeS0+ZmxhZ3MpCiApOwogCiBE
RUNMQVJFX0VWRU5UX0NMQVNTKGk5MTVfcmVxdWVzdCwKQEAgLTY5NSw3ICs2OTIsNiBAQCBERUNM
QVJFX0VWRU5UX0NMQVNTKGk5MTVfcmVxdWVzdCwKIAogCSAgICBUUF9TVFJVQ1RfX2VudHJ5KAog
CQkJICAgICBfX2ZpZWxkKHUzMiwgZGV2KQotCQkJICAgICBfX2ZpZWxkKHUzMiwgaHdfaWQpCiAJ
CQkgICAgIF9fZmllbGQodTY0LCBjdHgpCiAJCQkgICAgIF9fZmllbGQodTE2LCBjbGFzcykKIAkJ
CSAgICAgX19maWVsZCh1MTYsIGluc3RhbmNlKQpAQCAtNzA0LDE2ICs3MDAsMTUgQEAgREVDTEFS
RV9FVkVOVF9DTEFTUyhpOTE1X3JlcXVlc3QsCiAKIAkgICAgVFBfZmFzdF9hc3NpZ24oCiAJCQkg
ICBfX2VudHJ5LT5kZXYgPSBycS0+aTkxNS0+ZHJtLnByaW1hcnktPmluZGV4OwotCQkJICAgX19l
bnRyeS0+aHdfaWQgPSBycS0+Z2VtX2NvbnRleHQtPmh3X2lkOwogCQkJICAgX19lbnRyeS0+Y2xh
c3MgPSBycS0+ZW5naW5lLT51YWJpX2NsYXNzOwogCQkJICAgX19lbnRyeS0+aW5zdGFuY2UgPSBy
cS0+ZW5naW5lLT51YWJpX2luc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0gcnEtPmZlbmNl
LmNvbnRleHQ7CiAJCQkgICBfX2VudHJ5LT5zZXFubyA9IHJxLT5mZW5jZS5zZXFubzsKIAkJCSAg
ICksCiAKLQkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgaHdfaWQ9JXUsIGN0
eD0lbGx1LCBzZXFubz0ldSIsCisJICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9JXU6JXUs
IGN0eD0lbGx1LCBzZXFubz0ldSIsCiAJCSAgICAgIF9fZW50cnktPmRldiwgX19lbnRyeS0+Y2xh
c3MsIF9fZW50cnktPmluc3RhbmNlLAotCQkgICAgICBfX2VudHJ5LT5od19pZCwgX19lbnRyeS0+
Y3R4LCBfX2VudHJ5LT5zZXFubykKKwkJICAgICAgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFu
bykKICk7CiAKIERFRklORV9FVkVOVChpOTE1X3JlcXVlc3QsIGk5MTVfcmVxdWVzdF9hZGQsCkBA
IC03MzgsNyArNzMzLDYgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X2luLAogCiAJICAgIFRQ
X1NUUlVDVF9fZW50cnkoCiAJCQkgICAgIF9fZmllbGQodTMyLCBkZXYpCi0JCQkgICAgIF9fZmll
bGQodTMyLCBod19pZCkKIAkJCSAgICAgX19maWVsZCh1NjQsIGN0eCkKIAkJCSAgICAgX19maWVs
ZCh1MTYsIGNsYXNzKQogCQkJICAgICBfX2ZpZWxkKHUxNiwgaW5zdGFuY2UpCkBAIC03NDksNyAr
NzQzLDYgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X2luLAogCiAJICAgIFRQX2Zhc3RfYXNz
aWduKAogCQkJICAgX19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRleDsK
LQkJCSAgIF9fZW50cnktPmh3X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsKIAkJCSAgIF9f
ZW50cnktPmNsYXNzID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFzczsKIAkJCSAgIF9fZW50cnktPmlu
c3RhbmNlID0gcnEtPmVuZ2luZS0+dWFiaV9pbnN0YW5jZTsKIAkJCSAgIF9fZW50cnktPmN0eCA9
IHJxLT5mZW5jZS5jb250ZXh0OwpAQCAtNzU4LDkgKzc1MSw5IEBAIFRSQUNFX0VWRU5UKGk5MTVf
cmVxdWVzdF9pbiwKIAkJCSAgIF9fZW50cnktPnBvcnQgPSBwb3J0OwogCQkJICAgKSwKIAotCSAg
ICBUUF9wcmludGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUsIHNl
cW5vPSV1LCBwcmlvPSV1LCBwb3J0PSV1IiwKKwkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2lu
ZT0ldToldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBwcmlvPSV1LCBwb3J0PSV1IiwKIAkJICAgICAg
X19lbnRyeS0+ZGV2LCBfX2VudHJ5LT5jbGFzcywgX19lbnRyeS0+aW5zdGFuY2UsCi0JCSAgICAg
IF9fZW50cnktPmh3X2lkLCBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAorCQkgICAgICBf
X2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAogCQkgICAgICBfX2VudHJ5LT5wcmlvLCBfX2Vu
dHJ5LT5wb3J0KQogKTsKIApAQCAtNzcwLDcgKzc2Myw2IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVx
dWVzdF9vdXQsCiAKIAkgICAgVFBfU1RSVUNUX19lbnRyeSgKIAkJCSAgICAgX19maWVsZCh1MzIs
IGRldikKLQkJCSAgICAgX19maWVsZCh1MzIsIGh3X2lkKQogCQkJICAgICBfX2ZpZWxkKHU2NCwg
Y3R4KQogCQkJICAgICBfX2ZpZWxkKHUxNiwgY2xhc3MpCiAJCQkgICAgIF9fZmllbGQodTE2LCBp
bnN0YW5jZSkKQEAgLTc4MCw3ICs3NzIsNiBAQCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3Rfb3V0
LAogCiAJICAgIFRQX2Zhc3RfYXNzaWduKAogCQkJICAgX19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUt
PmRybS5wcmltYXJ5LT5pbmRleDsKLQkJCSAgIF9fZW50cnktPmh3X2lkID0gcnEtPmdlbV9jb250
ZXh0LT5od19pZDsKIAkJCSAgIF9fZW50cnktPmNsYXNzID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFz
czsKIAkJCSAgIF9fZW50cnktPmluc3RhbmNlID0gcnEtPmVuZ2luZS0+dWFiaV9pbnN0YW5jZTsK
IAkJCSAgIF9fZW50cnktPmN0eCA9IHJxLT5mZW5jZS5jb250ZXh0OwpAQCAtNzg4LDEwICs3Nzks
OSBAQCBUUkFDRV9FVkVOVChpOTE1X3JlcXVlc3Rfb3V0LAogCQkJICAgX19lbnRyeS0+Y29tcGxl
dGVkID0gaTkxNV9yZXF1ZXN0X2NvbXBsZXRlZChycSk7CiAJCQkgICApLAogCi0JCSAgICBUUF9w
cmludGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUsIHNlcW5vPSV1
LCBjb21wbGV0ZWQ/PSV1IiwKKwkJICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9JXU6JXUs
IGN0eD0lbGx1LCBzZXFubz0ldSwgY29tcGxldGVkPz0ldSIsCiAJCQkgICAgICBfX2VudHJ5LT5k
ZXYsIF9fZW50cnktPmNsYXNzLCBfX2VudHJ5LT5pbnN0YW5jZSwKLQkJCSAgICAgIF9fZW50cnkt
Pmh3X2lkLCBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAotCQkJICAgICAgX19lbnRyeS0+
Y29tcGxldGVkKQorCQkJICAgICAgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywgX19lbnRy
eS0+Y29tcGxldGVkKQogKTsKIAogI2Vsc2UKQEAgLTgyOSw3ICs4MTksNiBAQCBUUkFDRV9FVkVO
VChpOTE1X3JlcXVlc3Rfd2FpdF9iZWdpbiwKIAogCSAgICBUUF9TVFJVQ1RfX2VudHJ5KAogCQkJ
ICAgICBfX2ZpZWxkKHUzMiwgZGV2KQotCQkJICAgICBfX2ZpZWxkKHUzMiwgaHdfaWQpCiAJCQkg
ICAgIF9fZmllbGQodTY0LCBjdHgpCiAJCQkgICAgIF9fZmllbGQodTE2LCBjbGFzcykKIAkJCSAg
ICAgX19maWVsZCh1MTYsIGluc3RhbmNlKQpAQCAtODQ1LDcgKzgzNCw2IEBAIFRSQUNFX0VWRU5U
KGk5MTVfcmVxdWVzdF93YWl0X2JlZ2luLAogCSAgICAgKi8KIAkgICAgVFBfZmFzdF9hc3NpZ24o
CiAJCQkgICBfX2VudHJ5LT5kZXYgPSBycS0+aTkxNS0+ZHJtLnByaW1hcnktPmluZGV4OwotCQkJ
ICAgX19lbnRyeS0+aHdfaWQgPSBycS0+Z2VtX2NvbnRleHQtPmh3X2lkOwogCQkJICAgX19lbnRy
eS0+Y2xhc3MgPSBycS0+ZW5naW5lLT51YWJpX2NsYXNzOwogCQkJICAgX19lbnRyeS0+aW5zdGFu
Y2UgPSBycS0+ZW5naW5lLT51YWJpX2luc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0gcnEt
PmZlbmNlLmNvbnRleHQ7CkBAIC04NTMsOSArODQxLDkgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1
ZXN0X3dhaXRfYmVnaW4sCiAJCQkgICBfX2VudHJ5LT5mbGFncyA9IGZsYWdzOwogCQkJICAgKSwK
IAotCSAgICBUUF9wcmludGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVs
bHUsIHNlcW5vPSV1LCBmbGFncz0weCV4IiwKKwkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2lu
ZT0ldToldSwgY3R4PSVsbHUsIHNlcW5vPSV1LCBmbGFncz0weCV4IiwKIAkJICAgICAgX19lbnRy
eS0+ZGV2LCBfX2VudHJ5LT5jbGFzcywgX19lbnRyeS0+aW5zdGFuY2UsCi0JCSAgICAgIF9fZW50
cnktPmh3X2lkLCBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLAorCQkgICAgICBfX2VudHJ5
LT5jdHgsIF9fZW50cnktPnNlcW5vLAogCQkgICAgICBfX2VudHJ5LT5mbGFncykKICk7CiAKQEAg
LTk1OCwxOSArOTQ2LDE3IEBAIERFQ0xBUkVfRVZFTlRfQ0xBU1MoaTkxNV9jb250ZXh0LAogCVRQ
X1NUUlVDVF9fZW50cnkoCiAJCQlfX2ZpZWxkKHUzMiwgZGV2KQogCQkJX19maWVsZChzdHJ1Y3Qg
aTkxNV9nZW1fY29udGV4dCAqLCBjdHgpCi0JCQlfX2ZpZWxkKHUzMiwgaHdfaWQpCiAJCQlfX2Zp
ZWxkKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKiwgdm0pCiAJKSwKIAogCVRQX2Zhc3RfYXNz
aWduKAogCQkJX19lbnRyeS0+ZGV2ID0gY3R4LT5pOTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7CiAJ
CQlfX2VudHJ5LT5jdHggPSBjdHg7Ci0JCQlfX2VudHJ5LT5od19pZCA9IGN0eC0+aHdfaWQ7CiAJ
CQlfX2VudHJ5LT52bSA9IGN0eC0+dm07CiAJKSwKIAotCVRQX3ByaW50aygiZGV2PSV1LCBjdHg9
JXAsIGN0eF92bT0lcCwgaHdfaWQ9JXUiLAotCQkgIF9fZW50cnktPmRldiwgX19lbnRyeS0+Y3R4
LCBfX2VudHJ5LT52bSwgX19lbnRyeS0+aHdfaWQpCisJVFBfcHJpbnRrKCJkZXY9JXUsIGN0eD0l
cCwgY3R4X3ZtPSVwIiwKKwkJICBfX2VudHJ5LT5kZXYsIF9fZW50cnktPmN0eCwgX19lbnRyeS0+
dm0pCiApCiAKIERFRklORV9FVkVOVChpOTE1X2NvbnRleHQsIGk5MTVfY29udGV4dF9jcmVhdGUs
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZp
Y3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ldmljdC5jCmlu
ZGV4IDQyMTM5ZGIwZDY5Yy4uYWI4YTlhNDZmNGVhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYwpAQCAtNDg5LDggKzQ4OSw4IEBAIHN0YXRp
YyBpbnQgaWd0X2V2aWN0X2NvbnRleHRzKHZvaWQgKmFyZykKIAkJCWlmIChJU19FUlIocnEpKSB7
CiAJCQkJLyogV2hlbiBmdWxsLCBmYWlsX2lmX2J1c3kgd2lsbCB0cmlnZ2VyIEVCVVNZICovCiAJ
CQkJaWYgKFBUUl9FUlIocnEpICE9IC1FQlVTWSkgewotCQkJCQlwcl9lcnIoIlVuZXhwZWN0ZWQg
ZXJyb3IgZnJvbSByZXF1ZXN0IGFsbG9jIChjdHggaHcgaWQgJXUsIG9uICVzKTogJWRcbiIsCi0J
CQkJCSAgICAgICBjdHgtPmh3X2lkLCBlbmdpbmUtPm5hbWUsCisJCQkJCXByX2VycigiVW5leHBl
Y3RlZCBlcnJvciBmcm9tIHJlcXVlc3QgYWxsb2MgKG9uICVzKTogJWRcbiIsCisJCQkJCSAgICAg
ICBlbmdpbmUtPm5hbWUsCiAJCQkJCSAgICAgICAoaW50KVBUUl9FUlIocnEpKTsKIAkJCQkJZXJy
ID0gUFRSX0VSUihycSk7CiAJCQkJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
c2VsZnRlc3RzL2k5MTVfdm1hLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkx
NV92bWEuYwppbmRleCBkYTkyMjc0ODllZmUuLjEyNWZlZmVhNTE5YSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMKQEAgLTE3MCw3ICsxNzAsNyBAQCBzdGF0aWMg
aW50IGlndF92bWFfY3JlYXRlKHZvaWQgKmFyZykKIAkJfQogCiAJCW5jID0gMDsKLQkJZm9yX2Vh
Y2hfcHJpbWVfbnVtYmVyKG51bV9jdHgsIE1BWF9DT05URVhUX0hXX0lEKSB7CisJCWZvcl9lYWNo
X3ByaW1lX251bWJlcihudW1fY3R4LCBOVU1fSFdfVEFHKSB7CiAJCQlmb3IgKDsgbmMgPCBudW1f
Y3R4OyBuYysrKSB7CiAJCQkJY3R4ID0gbW9ja19jb250ZXh0KGk5MTUsICJtb2NrIik7CiAJCQkJ
aWYgKCFjdHgpCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E865EF4FF5
	for <lists+intel-gfx@lfdr.de>; Fri,  8 Nov 2019 16:40:33 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 571346F9D7;
	Fri,  8 Nov 2019 15:40:32 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 784426F9D7
 for <intel-gfx@lists.freedesktop.org>; Fri,  8 Nov 2019 15:40:30 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 08 Nov 2019 07:40:29 -0800
X-IronPort-AV: E=Sophos;i="5.68,281,1569308400"; d="scan'208";a="206489298"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga006-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 08 Nov 2019 07:40:27 -0800
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  8 Nov 2019 17:39:52 +0200
Message-Id: <3eb365597774f9ba87a7201b96923fbde02ca459.1573227240.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1573227240.git.jani.nikula@intel.com>
References: <cover.1573227240.git.jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH 5/9] drm/i915/bios: add support for querying DSC
 details for encoder
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWRkIGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSBEU0MgZGF0YSBmb3IgYW4gZW5jb2Rlci4K
CkluaXRpYWxseSwgdGhpcyBpcyBEU0kgc3BlY2lmaWMsIGFzIERQIGRvZXMgbm90IHVzZSBWQlQg
c2V0dGluZ3MgZm9yIERTQwphdCBhbGwuIEl0J3MgYWxzbyBub3QgdmVyeSBwcmV0dHkuCgpJbiB0
aGUgZnV0dXJlIHdlIG1pZ2h0IGhhdmUgYSBwb2ludGVyIGZyb20gZW5jb2RlciB0byB0aGUgY2hp
bGQgZGV2aWNlLAp3aGljaCB3b3VsZCBtYWtlIHRoZSBjaGlsZCBkZXZpY2UgbGlzdCBxdWVyeSBo
ZXJlIHNvIG11Y2ggbW9yZSBzZW5zaWJsZS4KClNpZ25lZC1vZmYtYnk6IEphbmkgTmlrdWxhIDxq
YW5pLm5pa3VsYUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9iaW9zLmMgfCA4NiArKysrKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9iaW9zLmggfCAgNSArKwogMiBmaWxlcyBjaGFuZ2VkLCA5MSBp
bnNlcnRpb25zKCspCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9iaW9zLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jpb3MuYwpp
bmRleCA1MTA2OGEwYTFjNDIuLjUyMmMzOTk3NTNmZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9iaW9zLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9iaW9zLmMKQEAgLTI5LDYgKzI5LDcgQEAKICNpbmNsdWRlIDxkcm0vaTkx
NV9kcm0uaD4KIAogI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxfZGlzcGxheS5oIgorI2luY2x1ZGUg
ImRpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oIgogI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxf
Z21idXMuaCIKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCkBAIC0yMjI5LDYgKzIyMzAsOTEgQEAg
Ym9vbCBpbnRlbF9iaW9zX2lzX2RzaV9wcmVzZW50KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiwKIAlyZXR1cm4gZmFsc2U7CiB9CiAKK3N0YXRpYyB2b2lkIGZpbGxfZHNjKHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZywKKwkJICAgICBzdHJ1Y3QgZHNjX2NvbXBy
ZXNzaW9uX3BhcmFtZXRlcnNfZW50cnkgKmRzYywKKwkJICAgICBpbnQgZHNjX21heF9icGMpCit7
CisJc3RydWN0IGRybV9kc2NfY29uZmlnICp2ZHNjX2NmZyA9ICZwaXBlX2NvbmZpZy0+ZHNjLmNv
bmZpZzsKKwlpbnQgYnBjID0gODsKKworCXZkc2NfY2ZnLT5kc2NfdmVyc2lvbl9tYWpvciA9IGRz
Yy0+dmVyc2lvbl9tYWpvcjsKKwl2ZHNjX2NmZy0+ZHNjX3ZlcnNpb25fbWlub3IgPSBkc2MtPnZl
cnNpb25fbWlub3I7CisKKwlpZiAoZHNjLT5zdXBwb3J0XzEyYnBjICYmIGRzY19tYXhfYnBjID49
IDEyKQorCQlicGMgPSAxMjsKKwllbHNlIGlmIChkc2MtPnN1cHBvcnRfMTBicGMgJiYgZHNjX21h
eF9icGMgPj0gMTApCisJCWJwYyA9IDEwOworCWVsc2UgaWYgKGRzYy0+c3VwcG9ydF84YnBjICYm
IGRzY19tYXhfYnBjID49IDgpCisJCWJwYyA9IDg7CisJZWxzZQorCQlEUk1fREVCVUdfS01TKCJV
bnN1cHBvcnRlZCBCUEMgZm9yIERDU1xuIik7IC8qIEZJWE1FICovCisKKwlwaXBlX2NvbmZpZy0+
cGlwZV9icHAgPSBicGMgKiAzOworCisJcGlwZV9jb25maWctPmRzYy5jb21wcmVzc2VkX2JwcCA9
IG1pbihwaXBlX2NvbmZpZy0+cGlwZV9icHAsCisJCQkJCSAgICAgIFZCVF9EU0NfTUFYX0JQUChk
c2MtPm1heF9icHApKTsKKworCS8qCisJICogRklYTUU6IFRoaXMgaXMgdWdseSwgYW5kIHNsaWNl
IGNvdW50IHNob3VsZCB0YWtlIERTQyBlbmdpbmUKKwkgKiB0aHJvdWdocHV0IGV0Yy4gaW50byBh
Y2NvdW50LgorCSAqCisJICogQWxzbywgcGVyIHNwZWMgRFNJIHN1cHBvcnRzIDEsIDIsIDMgb3Ig
NCBob3Jpem9udGFsIHNsaWNlcy4KKwkgKi8KKwlpZiAoZHNjLT5zbGljZXNfcGVyX2xpbmUgJiBC
SVQoMikgJiYKKwkgICAgcGlwZV9jb25maWctPmh3LmFkanVzdGVkX21vZGUuY3J0Y19oZGlzcGxh
eSAlIDQgPT0gMCkgeworCQlwaXBlX2NvbmZpZy0+ZHNjLnNsaWNlX2NvdW50ID0gNDsKKwl9IGVs
c2UgaWYgKGRzYy0+c2xpY2VzX3Blcl9saW5lICYgQklUKDEpICYmCisJCSAgIHBpcGVfY29uZmln
LT5ody5hZGp1c3RlZF9tb2RlLmNydGNfaGRpc3BsYXkgJSAyID09IDApIHsKKwkJcGlwZV9jb25m
aWctPmRzYy5zbGljZV9jb3VudCA9IDI7CisJfSBlbHNlIHsKKwkJLyogRklYTUUgKi8KKwkJaWYg
KCEoZHNjLT5zbGljZXNfcGVyX2xpbmUgJiBCSVQoMCkpKQorCQkJRFJNX0RFQlVHX0tNUygiVW5z
dXBwb3J0ZWQgc2xpY2UgY291bnQgZm9yIERTSSBEQ1NcbiIpOworCisJCXBpcGVfY29uZmlnLT5k
c2Muc2xpY2VfY291bnQgPSAxOworCX0KKworCS8qIEZJWE1FOiByY19idWZmZXJfYmxvY2tfc2l6
ZSwgdXNpbmcgZGVmYXVsdHMgaW4gaW50ZWxfdmRzYy5jICovCisKKwkvKiBGSVhNRTogcmNfYnVm
ZmVyX3NpemUsIHVzaW5nIGRlZmF1bHRzIGluIGludGVsX3Zkc2MuYyAqLworCisJLyogRklYTUU6
IERTSSBzcGVjIHNheXMgYnBjICsgMSBmb3IgdGhpcyBvbmUgKi8KKwl2ZHNjX2NmZy0+bGluZV9i
dWZfZGVwdGggPSBWQlRfRFNDX0xJTkVfQlVGRkVSX0RFUFRIKGRzYy0+bGluZV9idWZmZXJfZGVw
dGgpOworCisJdmRzY19jZmctPmJsb2NrX3ByZWRfZW5hYmxlID0gZHNjLT5ibG9ja19wcmVkaWN0
aW9uX2VuYWJsZTsKKworCXZkc2NfY2ZnLT5zbGljZV9oZWlnaHQgPSBkc2MtPnNsaWNlX2hlaWdo
dDsKK30KKworLyogRklYTUU6IGluaXRpYWxseSBEU0kgc3BlY2lmaWMgKi8KK2Jvb2wgaW50ZWxf
Ymlvc19nZXRfZHNjX3BhcmFtcyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKKwkJCSAg
ICAgICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcsCisJCQkgICAgICAgaW50
IGRzY19tYXhfYnBjKQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkx
NShlbmNvZGVyLT5iYXNlLmRldik7CisJY29uc3Qgc3RydWN0IGRpc3BsYXlfZGV2aWNlX2RhdGEg
KmRldmRhdGE7CisJY29uc3Qgc3RydWN0IGNoaWxkX2RldmljZV9jb25maWcgKmNoaWxkOworCisJ
bGlzdF9mb3JfZWFjaF9lbnRyeShkZXZkYXRhLCAmaTkxNS0+dmJ0LmRpc3BsYXlfZGV2aWNlcywg
bm9kZSkgeworCQljaGlsZCA9ICZkZXZkYXRhLT5jaGlsZDsKKworCQlpZiAoIShjaGlsZC0+ZGV2
aWNlX3R5cGUgJiBERVZJQ0VfVFlQRV9NSVBJX09VVFBVVCkpCisJCQljb250aW51ZTsKKworCQlp
ZiAoY2hpbGQtPmR2b19wb3J0IC0gRFZPX1BPUlRfTUlQSUEgPT0gZW5jb2Rlci0+cG9ydCkgewor
CQkJaWYgKCFkZXZkYXRhLT5kc2MpCisJCQkJcmV0dXJuIGZhbHNlOworCisJCQlpZiAocGlwZV9j
b25maWcpCisJCQkJZmlsbF9kc2MocGlwZV9jb25maWcsIGRldmRhdGEtPmRzYywgZHNjX21heF9i
cGMpOworCisJCQlyZXR1cm4gdHJ1ZTsKKwkJfQorCX0KKworCXJldHVybiB0cnVlOworfQorCiAv
KioKICAqIGludGVsX2Jpb3NfaXNfcG9ydF9ocGRfaW52ZXJ0ZWQgLSBpcyBIUEQgaW52ZXJ0ZWQg
Zm9yICVwb3J0CiAgKiBAaTkxNToJaTkxNSBkZXZpY2UgaW5zdGFuY2UKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5oIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9iaW9zLmgKaW5kZXggOThmMDY0ODI4YTU3Li5mZTFhMTFkM2Q2
YjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5o
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5oCkBAIC0zNSw2
ICszNSw4IEBACiAjaW5jbHVkZSA8ZHJtL2k5MTVfZHJtLmg+CiAKIHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlOworc3RydWN0IGludGVsX2NydGNfc3RhdGU7CitzdHJ1Y3QgaW50ZWxfZW5jb2RlcjsK
IGVudW0gcG9ydDsKIAogZW51bSBpbnRlbF9iYWNrbGlnaHRfdHlwZSB7CkBAIC0yNDIsNSArMjQ0
LDggQEAgYm9vbCBpbnRlbF9iaW9zX2lzX3BvcnRfaHBkX2ludmVydGVkKGNvbnN0IHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1LAogYm9vbCBpbnRlbF9iaW9zX2lzX2xzcGNvbl9wcmVzZW50
KGNvbnN0IHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCQkJCSAgZW51bSBwb3J0IHBv
cnQpOwogZW51bSBhdXhfY2ggaW50ZWxfYmlvc19wb3J0X2F1eF9jaChzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYsIGVudW0gcG9ydCBwb3J0KTsKK2Jvb2wgaW50ZWxfYmlvc19nZXRf
ZHNjX3BhcmFtcyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKKwkJCSAgICAgICBzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcsCisJCQkgICAgICAgaW50IGRzY19tYXhf
YnBjKTsKIAogI2VuZGlmIC8qIF9JTlRFTF9CSU9TX0hfICovCi0tIAoyLjIwLjEKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5n
IGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 034B71792C
	for <lists+intel-gfx@lfdr.de>; Wed,  8 May 2019 14:11:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1087989949;
	Wed,  8 May 2019 12:11:28 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C8B6C898BC;
 Wed,  8 May 2019 12:11:24 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 08 May 2019 05:11:24 -0700
X-ExtLoop1: 1
Received: from jzapadkx-mobl1.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.0.159])
 by fmsmga008.fm.intel.com with ESMTP; 08 May 2019 05:11:23 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: igt-dev@lists.freedesktop.org
Date: Wed,  8 May 2019 13:10:56 +0100
Message-Id: <20190508121058.27038-20-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.19.1
In-Reply-To: <20190508121058.27038-1-tvrtko.ursulin@linux.intel.com>
References: <20190508121058.27038-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t 19/21] gem_wsim: Per context SSEU control
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCkEgbmV3IHdv
cmtsb2FkIGNvbW1hbmQgKCdTJykgaXMgYWRkZWQgd2hpY2ggYWxsb3dzIHBlciBjb250ZXh0IHNs
aWNlCihyZS0pY29uZmlndXJhdGlvbi4KClNpZ25lZC1vZmYtYnk6IFR2cnRrbyBVcnN1bGluIDx0
dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Ci0tLQogYmVuY2htYXJrcy9nZW1fd3NpbS5jICB8IDY5
ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLQogYmVuY2htYXJrcy93
c2ltL1JFQURNRSB8IDIzICsrKysrKysrKysrKystCiAyIGZpbGVzIGNoYW5nZWQsIDgwIGluc2Vy
dGlvbnMoKyksIDEyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2JlbmNobWFya3MvZ2VtX3dz
aW0uYyBiL2JlbmNobWFya3MvZ2VtX3dzaW0uYwppbmRleCA2NGRkMjUxYTI1ZWIuLmVkNWFjZWUw
MmUyMCAxMDA2NDQKLS0tIGEvYmVuY2htYXJrcy9nZW1fd3NpbS5jCisrKyBiL2JlbmNobWFya3Mv
Z2VtX3dzaW0uYwpAQCAtODcsNiArODcsNyBAQCBlbnVtIHdfdHlwZQogCUxPQURfQkFMQU5DRSwK
IAlCT05ELAogCVRFUk1JTkFURSwKKwlTU0VVCiB9OwogCiBzdHJ1Y3QgZGVwcwpAQCAtMTM2LDYg
KzEzNyw3IEBAIHN0cnVjdCB3X3N0ZXAKIAkJCXVpbnQ2NF90IGJvbmRfbWFzazsKIAkJCWVudW0g
aW50ZWxfZW5naW5lX2lkIGJvbmRfbWFzdGVyOwogCQl9OworCQlpbnQgc3NldTsKIAl9OwogCiAJ
LyogSW1wbGVtZW50YXRpb24gZGV0YWlscyAqLwpAQCAtMTcxLDYgKzE3Myw3IEBAIHN0cnVjdCBj
dHggewogCWJvb2wgdGFyZ2V0c19pbnN0YW5jZTsKIAlib29sIHdhbnRzX2JhbGFuY2U7CiAJdW5z
aWduZWQgaW50IHN0YXRpY192Y3M7CisJdWludDY0X3Qgc3NldTsKIH07CiAKIHN0cnVjdCB3b3Jr
bG9hZApAQCAtMjQxLDYgKzI0NCw3IEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgY29udGV4dF92Y3Nf
cnI7CiAKIHN0YXRpYyBpbnQgdmVyYm9zZSA9IDE7CiBzdGF0aWMgaW50IGZkOworc3RhdGljIHN0
cnVjdCBkcm1faTkxNV9nZW1fY29udGV4dF9wYXJhbV9zc2V1IGRldmljZV9zc2V1OwogCiAjZGVm
aW5lIFNXQVBWQ1MJCSgxPDwwKQogI2RlZmluZSBTRVFOTwkJKDE8PDEpCkBAIC00NTYsNiArNDYw
LDI3IEBAIHBhcnNlX3dvcmtsb2FkKHN0cnVjdCB3X2FyZyAqYXJnLCB1bnNpZ25lZCBpbnQgZmxh
Z3MsIHN0cnVjdCB3b3JrbG9hZCAqYXBwX3cpCiAJCQkJaW50X2ZpZWxkKFNZTkMsIHRhcmdldCwK
IAkJCQkJICB0bXAgPj0gMCB8fCAoKGludClucl9zdGVwcyArIHRtcCkgPCAwLAogCQkJCQkgICJJ
bnZhbGlkIHN5bmMgdGFyZ2V0IGF0IHN0ZXAgJXUhXG4iKTsKKwkJCX0gZWxzZSBpZiAoIXN0cmNt
cChmaWVsZCwgIlMiKSkgeworCQkJCXVuc2lnbmVkIGludCBuciA9IDA7CisJCQkJd2hpbGUgKChm
aWVsZCA9IHN0cnRva19yKGZzdGFydCwgIi4iLCAmZmN0eCkpKSB7CisJCQkJCXRtcCA9IGF0b2ko
ZmllbGQpOworCQkJCQljaGVja19hcmcodG1wIDw9IDAgJiYgbnIgPT0gMCwKKwkJCQkJCSAgIklu
dmFsaWQgY29udGV4dCBhdCBzdGVwICV1IVxuIiwKKwkJCQkJCSAgbnJfc3RlcHMpOworCQkJCQlj
aGVja19hcmcobnIgPiAxLAorCQkJCQkJICAiSW52YWxpZCBTU0VVIGZvcm1hdCBhdCBzdGVwICV1
IVxuIiwKKwkJCQkJCSAgbnJfc3RlcHMpOworCisJCQkJCWlmIChuciA9PSAwKQorCQkJCQkJc3Rl
cC5jb250ZXh0ID0gdG1wOworCQkJCQllbHNlIGlmIChuciA9PSAxKQorCQkJCQkJc3RlcC5zc2V1
ID0gdG1wOworCisJCQkJCW5yKys7CisJCQkJfQorCisJCQkJc3RlcC50eXBlID0gU1NFVTsKKwkJ
CQlnb3RvIGFkZF9zdGVwOwogCQkJfSBlbHNlIGlmICghc3RyY21wKGZpZWxkLCAidCIpKSB7CiAJ
CQkJaW50X2ZpZWxkKFRIUk9UVExFLCB0aHJvdHRsZSwKIAkJCQkJICB0bXAgPCAwLApAQCAtMTA3
MSwyNCArMTA5NiwyNCBAQCBzdGF0aWMgdm9pZCBfX2N0eF9zZXRfcHJpbyh1aW50MzJfdCBjdHhf
aWQsIHVuc2lnbmVkIGludCBwcmlvKQogCQlnZW1fY29udGV4dF9zZXRfcGFyYW0oZmQsICZwYXJh
bSk7CiB9CiAKLXN0YXRpYyB2b2lkCi1zZXRfY3R4X3NzZXUodWludDMyX3QgY3R4KQorc3RhdGlj
IHVpbnQ2NF90CitzZXRfY3R4X3NzZXUodWludDMyX3QgY3R4LCB1aW50NjRfdCBzbGljZV9tYXNr
KQogewotCXN0cnVjdCBkcm1faTkxNV9nZW1fY29udGV4dF9wYXJhbV9zc2V1IHNzZXUgPSB7IH07
CisJc3RydWN0IGRybV9pOTE1X2dlbV9jb250ZXh0X3BhcmFtX3NzZXUgc3NldSA9IGRldmljZV9z
c2V1OwogCXN0cnVjdCBkcm1faTkxNV9nZW1fY29udGV4dF9wYXJhbSBwYXJhbSA9IHsgfTsKIAot
CXNzZXUuY2xhc3MgPSBJOTE1X0VOR0lORV9DTEFTU19SRU5ERVI7Ci0Jc3NldS5pbnN0YW5jZSA9
IDA7CisJaWYgKHNsaWNlX21hc2sgPT0gLTEpCisJCXNsaWNlX21hc2sgPSBkZXZpY2Vfc3NldS5z
bGljZV9tYXNrOworCisJc3NldS5zbGljZV9tYXNrID0gc2xpY2VfbWFzazsKIAogCXBhcmFtLmN0
eF9pZCA9IGN0eDsKIAlwYXJhbS5wYXJhbSA9IEk5MTVfQ09OVEVYVF9QQVJBTV9TU0VVOwogCXBh
cmFtLnZhbHVlID0gKHVpbnRwdHJfdCkmc3NldTsKIAotCWdlbV9jb250ZXh0X2dldF9wYXJhbShm
ZCwgJnBhcmFtKTsKLQotCXNzZXUuc2xpY2VfbWFzayA9IDE7Ci0KIAlnZW1fY29udGV4dF9zZXRf
cGFyYW0oZmQsICZwYXJhbSk7CisKKwlyZXR1cm4gc2xpY2VfbWFzazsKIH0KIAogc3RhdGljIGlu
dApAQCAtMTI4Nyw2ICsxMzEyLDcgQEAgcHJlcGFyZV93b3JrbG9hZCh1bnNpZ25lZCBpbnQgaWQs
IHN0cnVjdCB3b3JrbG9hZCAqd3JrLCB1bnNpZ25lZCBpbnQgZmxhZ3MpCiAKIAkJaWd0X2Fzc2Vy
dChjdHhfaWQpOwogCQljdHgtPmlkID0gY3R4X2lkOworCQljdHgtPnNzZXUgPSBkZXZpY2Vfc3Nl
dS5zbGljZV9tYXNrOwogCiAJCWlmIChmbGFncyAmIEdMT0JBTF9CQUxBTkNFKSB7CiAJCQljdHgt
PnN0YXRpY192Y3MgPSBjb250ZXh0X3Zjc19ycjsKQEAgLTE0MzksOCArMTQ2NSwxMCBAQCBwcmVw
YXJlX3dvcmtsb2FkKHVuc2lnbmVkIGludCBpZCwgc3RydWN0IHdvcmtsb2FkICp3cmssIHVuc2ln
bmVkIGludCBmbGFncykKIAkJCWdlbV9jb250ZXh0X3NldF9wYXJhbShmZCwgJnBhcmFtKTsKIAkJ
fQogCi0JCWlmICh3cmstPnNzZXUpCi0JCQlzZXRfY3R4X3NzZXUoYXJnLmN0eF9pZCk7CisJCWlm
ICh3cmstPnNzZXUpIHsKKwkJCS8qIFNldCB0byBzbGljZSAwIG9ubHksIG9uZSBzbGljZS4gKi8K
KwkJCWN0eC0+c3NldSA9IHNldF9jdHhfc3NldShjdHhfaWQsIDEpOworCQl9CiAJfQogCiAJLyog
UmVjb3JkIGRlZmF1bHQgcHJlZW1wdGlvbi4gKi8KQEAgLTI0MDksNiArMjQzNywxMyBAQCBzdGF0
aWMgdm9pZCAqcnVuX3dvcmtsb2FkKHZvaWQgKmRhdGEpCiAJCQkJICAgdy0+dHlwZSA9PSBMT0FE
X0JBTEFOQ0UgfHwKIAkJCQkgICB3LT50eXBlID09IEJPTkQpIHsKIAkJCQljb250aW51ZTsKKwkJ
CX0gZWxzZSBpZiAody0+dHlwZSA9PSBTU0VVKSB7CisJCQkJaWYgKHctPnNzZXUgIT0gd3JrLT5j
dHhfbGlzdFt3LT5jb250ZXh0XS5zc2V1KSB7CisJCQkJCXdyay0+Y3R4X2xpc3Rbdy0+Y29udGV4
dF0uc3NldSA9CisJCQkJCQlzZXRfY3R4X3NzZXUod3JrLT5jdHhfbGlzdFt3LT5jb250ZXh0XS5p
ZCwKKwkJCQkJCQkgICAgIHctPnNzZXUpOworCQkJCX0KKwkJCQljb250aW51ZTsKIAkJCX0KIAog
CQkJaWYgKGRvX3NsZWVwIHx8IHctPnR5cGUgPT0gUEVSSU9EKSB7CkBAIC0yNzI1LDYgKzI3NjAs
MTYgQEAgc3RhdGljIHZvaWQgaW5pdF9jbG9ja3Modm9pZCkKIAkgICAgICAgcmNzX2VuZCAtIHJj
c19zdGFydCwgMWU2KnQsIDEwMjRlNiAqIHQgLyAocmNzX2VuZCAtIHJjc19zdGFydCkpOwogfQog
CitzdGF0aWMgdm9pZCBnZXRfZGV2aWNlX3NzZXUodm9pZCkKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX2NvbnRleHRfcGFyYW0gcGFyYW0gPSB7IH07CisKKwlwYXJhbS5wYXJhbSA9IEk5MTVfQ09O
VEVYVF9QQVJBTV9TU0VVOworCXBhcmFtLnZhbHVlID0gKHVpbnRwdHJfdCkmZGV2aWNlX3NzZXU7
CisKKwlnZW1fY29udGV4dF9nZXRfcGFyYW0oZmQsICZwYXJhbSk7Cit9CisKIGludCBtYWluKGlu
dCBhcmdjLCBjaGFyICoqYXJndikKIHsKIAl1bnNpZ25lZCBpbnQgcmVwZWF0ID0gMTsKQEAgLTI3
NTMsNiArMjc5OCw4IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJndikKIAlmZCA9IF9f
ZHJtX29wZW5fZHJpdmVyKERSSVZFUl9JTlRFTCk7CiAJaWd0X3JlcXVpcmUoZmQpOwogCisJZ2V0
X2RldmljZV9zc2V1KCk7CisKIAlpbml0X2Nsb2NrcygpOwogCiAJd2hpbGUgKChjID0gZ2V0b3B0
KGFyZ2MsIGFyZ3YsCmRpZmYgLS1naXQgYS9iZW5jaG1hcmtzL3dzaW0vUkVBRE1FIGIvYmVuY2ht
YXJrcy93c2ltL1JFQURNRQppbmRleCBjOTRkMDEwMTg0MTkuLmQ3YzI1NWI5NTI3YyAxMDA2NDQK
LS0tIGEvYmVuY2htYXJrcy93c2ltL1JFQURNRQorKysgYi9iZW5jaG1hcmtzL3dzaW0vUkVBRE1F
CkBAIC01LDcgKzUsNyBAQCBjdHguZW5naW5lLmR1cmF0aW9uX3VzLmRlcGVuZGVuY3kud2FpdCwu
Li4KIDx1aW50Pi48c3RyPi48dWludD5bLTx1aW50Pl18Ki48aW50IDw9IDA+Wy88aW50IDw9IDA+
XVsuLi5dLjwwfDE+LC4uLgogQi48dWludD4KIE0uPHVpbnQ+LjxzdHI+W3w8c3RyPl0uLi4KLVB8
WC48dWludD4uPGludD4KK1B8U3xYLjx1aW50Pi48aW50PgogZHxwfHN8dHxxfGF8VC48aW50Piwu
Li4KIGIuPHVpbnQ+Ljx1aW50Pi48c3RyPgogZgpAQCAtMzAsNiArMzAsNyBAQCBBZGRpdGlvbmFs
IHdvcmtsb2FkIHN0ZXBzIGFyZSBhbHNvIHN1cHBvcnRlZDoKICAnYicgLSBTZXQgdXAgZW5naW5l
IGJvbmRzLgogICdNJyAtIFNldCB1cCBlbmdpbmUgbWFwLgogICdQJyAtIENvbnRleHQgcHJpb3Jp
dHkuCisgJ1MnIC0gQ29udGV4dCBTU0VVIGNvbmZpZ3VyYXRpb24uCiAgJ1QnIC0gVGVybWluYXRl
IGFuIGluZmluaXRlIGJhdGNoLgogICdYJyAtIENvbnRleHQgcHJlZW1wdGlvbiBjb250cm9sLgog
CkBAIC0yNDksMyArMjUwLDIzIEBAIHRoZW4gbG9vayBsaWtlOgogICAxLkRFRkFVTFQuMTAwMC5m
LTEuMAogICAyLkRFRkFVTFQuMTAwMC5zLTEuMAogICBhLi0zCisKK0NvbnRleHQgU1NFVSBjb25m
aWd1cmF0aW9uCistLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQorCisgIFMuMS4xCisgIDEuUkNT
LjEwMDAuMC4wCisgIFMuMi4tMQorICAyLlJDUy4xMDAwLjAuMAorCitDb250ZXh0IDEgaXMgY29u
ZmlndXJlZCB0byBydW4gd2l0aCBvbmUgZW5hYmxlZCBzbGljZSAoc2xpY2UgbWFzayAxKSBhbmQg
YSBiYXRjaAoraXMgc3VtaXR0ZWQgYWdhaW5zdCBpdC4gQ29udGV4dCAyIGlzIGNvbmZpZ3VyZWQg
dG8gcnVuIHdpdGggYWxsIHNsaWNlcyAodGhpcyBpcwordGhlIGRlZmF1bHQgc28gdGhlIGNvbW1h
bmQgY291bGQgYWxzbyBiZSBvbWl0dGVkKSBhbmQgYSBiYXRjaCBzdWJtaXR0ZWQgYWdhaW5zdAor
aXQuCisKK1RoaXMgc2hvd3MgdGhlIGR5bmFtaWMgU1NFVSByZWNvbmZpZ3VyYXRpb24gY29zdCBi
ZXdlZW4gdHdvIGNvbnRleHRzIGNvbXBldGluZworZm9yIHRoZSByZW5kZXIgZW5naW5lLgorCitT
bGljZSBtYXNrIG9mIC0xIGhhcyBhIHNwZWNpYWwgbWVhbmluZyBvZiAiYWxsIHNsaWNlcyIuIE90
aGVyd2lzZSBhbnkgaW50ZWdlcgorY2FuIGJlIHNwZWNpZnlpbmcgYXMgdGhlIHNsaWNlIG1hc2ss
IGJ1dCBiZXdhcmUgYW55IGFwYXJ0IGZyb20gMSBhbmQgLTEgY2FuIG1ha2UKK3RoZSB3b3JrbG9h
ZCBub3QgcG9ydGFibGUgYmV0d2VlbiBkaWZmZXJlbnQgR1BVcy4KLS0gCjIuMTkuMQoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxp
bmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

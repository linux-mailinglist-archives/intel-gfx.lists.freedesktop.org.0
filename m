Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C449EEA405
	for <lists+intel-gfx@lfdr.de>; Wed, 30 Oct 2019 20:22:48 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 789716ED11;
	Wed, 30 Oct 2019 19:22:46 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A960E6ED09
 for <intel-gfx@lists.freedesktop.org>; Wed, 30 Oct 2019 19:22:13 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19024464-1500050 
 for multiple; Wed, 30 Oct 2019 19:22:02 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 30 Oct 2019 19:21:58 +0000
Message-Id: <20191030192159.18404-10-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0.rc1
In-Reply-To: <20191030192159.18404-1-chris@chris-wilson.co.uk>
References: <20191030192159.18404-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 10/11] drm/i915/gt: Pull timeline initialise to
 intel_gt_init_early
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T3VyIHRpbWVsaW5lcyBhcmUgY3VycmVudGx5IGNvbnRhaW5lZCB3aXRoaW4gYW4gaW50ZWxfZ3Qs
IGFuZCB3ZSBvbmx5Cm5lZWQgdG8gcGVyZm9ybSBsaXN0L3NwaW5sb2NrIGluaXRpYWxpc2F0aW9u
LCBzbyB3ZSBjYW4gcHVsbCB0aGUKaW50ZWxfdGltZWxpbmVzX2luaXQoKSBpbnRvIG91ciBpbnRl
bF9ndF9pbml0X2Vhcmx5KCkuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNo
cmlzLXdpbHNvbi5jby51az4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5j
ICAgICAgICAgICAgICAgfCAgMiArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGlt
ZWxpbmUuYyAgICAgICAgIHwgMTQgKystLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX3RpbWVsaW5lLmggICAgICAgICB8ICA0ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZ2VtLmMgICAgICAgICAgICAgICAgICB8ICA0IC0tLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYyB8ICA1IC0tLS0tCiA1IGZpbGVzIGNo
YW5nZWQsIDYgaW5zZXJ0aW9ucygrKSwgMjMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2d0LmMKaW5kZXggZjlmYjA4NjVmYmI2Li4wMjQ4NDg2MGNhYTggMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZ3QuYwpAQCAtMjUsNiArMjUsNyBAQCB2b2lkIGludGVsX2d0X2luaXRf
ZWFybHkoc3RydWN0IGludGVsX2d0ICpndCwgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUp
CiAKIAlpbnRlbF9ndF9pbml0X3Jlc2V0KGd0KTsKIAlpbnRlbF9ndF9pbml0X3JlcXVlc3RzKGd0
KTsKKwlpbnRlbF9ndF9pbml0X3RpbWVsaW5lcyhndCk7CiAJaW50ZWxfZ3RfcG1faW5pdF9lYXJs
eShndCk7CiAKIAlpbnRlbF9ycHNfaW5pdF9lYXJseSgmZ3QtPnJwcyk7CkBAIC00MjEsNCArNDIy
LDUgQEAgdm9pZCBpbnRlbF9ndF9kcml2ZXJfbGF0ZV9yZWxlYXNlKHN0cnVjdCBpbnRlbF9ndCAq
Z3QpCiB7CiAJaW50ZWxfdWNfZHJpdmVyX2xhdGVfcmVsZWFzZSgmZ3QtPnVjKTsKIAlpbnRlbF9n
dF9maW5pX3Jlc2V0KGd0KTsKKwlpbnRlbF9ndF9maW5pX3RpbWVsaW5lcyhndCk7CiB9CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuYwppbmRleCAxNGFkMTBhY2Q1NDguLjE2
YTllODhkOTNkZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGlt
ZWxpbmUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZS5jCkBA
IC0yNjIsNyArMjYyLDcgQEAgaW50IGludGVsX3RpbWVsaW5lX2luaXQoc3RydWN0IGludGVsX3Rp
bWVsaW5lICp0aW1lbGluZSwKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIHZvaWQgdGltZWxpbmVz
X2luaXQoc3RydWN0IGludGVsX2d0ICpndCkKK3ZvaWQgaW50ZWxfZ3RfaW5pdF90aW1lbGluZXMo
c3RydWN0IGludGVsX2d0ICpndCkKIHsKIAlzdHJ1Y3QgaW50ZWxfZ3RfdGltZWxpbmVzICp0aW1l
bGluZXMgPSAmZ3QtPnRpbWVsaW5lczsKIApAQCAtMjczLDExICsyNzMsNiBAQCBzdGF0aWMgdm9p
ZCB0aW1lbGluZXNfaW5pdChzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQogCUlOSVRfTElTVF9IRUFEKCZ0
aW1lbGluZXMtPmh3c3BfZnJlZV9saXN0KTsKIH0KIAotdm9pZCBpbnRlbF90aW1lbGluZXNfaW5p
dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKLXsKLQl0aW1lbGluZXNfaW5pdCgmaTkx
NS0+Z3QpOwotfQotCiB2b2lkIGludGVsX3RpbWVsaW5lX2Zpbmkoc3RydWN0IGludGVsX3RpbWVs
aW5lICp0aW1lbGluZSkKIHsKIAlHRU1fQlVHX09OKGF0b21pY19yZWFkKCZ0aW1lbGluZS0+cGlu
X2NvdW50KSk7CkBAIC01NjIsNyArNTU3LDcgQEAgdm9pZCBfX2ludGVsX3RpbWVsaW5lX2ZyZWUo
c3RydWN0IGtyZWYgKmtyZWYpCiAJa2ZyZWVfcmN1KHRpbWVsaW5lLCByY3UpOwogfQogCi1zdGF0
aWMgdm9pZCB0aW1lbGluZXNfZmluaShzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQordm9pZCBpbnRlbF9n
dF9maW5pX3RpbWVsaW5lcyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQogewogCXN0cnVjdCBpbnRlbF9n
dF90aW1lbGluZXMgKnRpbWVsaW5lcyA9ICZndC0+dGltZWxpbmVzOwogCkBAIC01NzAsMTEgKzU2
NSw2IEBAIHN0YXRpYyB2b2lkIHRpbWVsaW5lc19maW5pKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiAJ
R0VNX0JVR19PTighbGlzdF9lbXB0eSgmdGltZWxpbmVzLT5od3NwX2ZyZWVfbGlzdCkpOwogfQog
Ci12b2lkIGludGVsX3RpbWVsaW5lc19maW5pKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
KQotewotCXRpbWVsaW5lc19maW5pKCZpOTE1LT5ndCk7Ci19Ci0KICNpZiBJU19FTkFCTEVEKENP
TkZJR19EUk1fSTkxNV9TRUxGVEVTVCkKICNpbmNsdWRlICJndC9zZWxmdGVzdHMvbW9ja190aW1l
bGluZS5jIgogI2luY2x1ZGUgImd0L3NlbGZ0ZXN0X3RpbWVsaW5lLmMiCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZS5oIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuaAppbmRleCBmNTgzYWYxYmExOGQuLmY1YjdlYWRlMzgw
OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuaAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZS5oCkBAIC04OCw3ICs4
OCw3IEBAIGludCBpbnRlbF90aW1lbGluZV9yZWFkX2h3c3Aoc3RydWN0IGk5MTVfcmVxdWVzdCAq
ZnJvbSwKIAkJCSAgICAgc3RydWN0IGk5MTVfcmVxdWVzdCAqdW50aWwsCiAJCQkgICAgIHUzMiAq
aHdzcF9vZmZzZXQpOwogCi12b2lkIGludGVsX3RpbWVsaW5lc19pbml0KHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1KTsKLXZvaWQgaW50ZWxfdGltZWxpbmVzX2Zpbmkoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmk5MTUpOwordm9pZCBpbnRlbF9ndF9pbml0X3RpbWVsaW5lcyhzdHJ1Y3Qg
aW50ZWxfZ3QgKmd0KTsKK3ZvaWQgaW50ZWxfZ3RfZmluaV90aW1lbGluZXMoc3RydWN0IGludGVs
X2d0ICpndCk7CiAKICNlbmRpZgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9nZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKaW5kZXggMTA2M2Q0Yzc0
YTdmLi5iMjQ4MjVjNjkxZjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2VtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwpAQCAtMTE5NCw4ICsx
MTk0LDYgQEAgaW50IGk5MTVfZ2VtX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2KQogCQlta3dyaXRlX2RldmljZV9pbmZvKGRldl9wcml2KS0+cGFnZV9zaXplcyA9CiAJCQlJ
OTE1X0dUVF9QQUdFX1NJWkVfNEs7CiAKLQlpbnRlbF90aW1lbGluZXNfaW5pdChkZXZfcHJpdik7
Ci0KIAlyZXQgPSBpOTE1X2dlbV9pbml0X3VzZXJwdHIoZGV2X3ByaXYpOwogCWlmIChyZXQpCiAJ
CXJldHVybiByZXQ7CkBAIC0xMzAxLDcgKzEyOTksNiBAQCBpbnQgaTkxNV9nZW1faW5pdChzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJaWYgKHJldCAhPSAtRUlPKSB7CiAJCWlu
dGVsX3VjX2NsZWFudXBfZmlybXdhcmVzKCZkZXZfcHJpdi0+Z3QudWMpOwogCQlpOTE1X2dlbV9j
bGVhbnVwX3VzZXJwdHIoZGV2X3ByaXYpOwotCQlpbnRlbF90aW1lbGluZXNfZmluaShkZXZfcHJp
dik7CiAJfQogCiAJaWYgKHJldCA9PSAtRUlPKSB7CkBAIC0xMzY0LDcgKzEzNjEsNiBAQCB2b2lk
IGk5MTVfZ2VtX2RyaXZlcl9yZWxlYXNlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dikKIAogCWludGVsX3VjX2NsZWFudXBfZmlybXdhcmVzKCZkZXZfcHJpdi0+Z3QudWMpOwogCWk5
MTVfZ2VtX2NsZWFudXBfdXNlcnB0cihkZXZfcHJpdik7Ci0JaW50ZWxfdGltZWxpbmVzX2Zpbmko
ZGV2X3ByaXYpOwogCiAJaTkxNV9nZW1fZHJhaW5fZnJlZWRfb2JqZWN0cyhkZXZfcHJpdik7CiAK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZp
Y2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYwpp
bmRleCA5OGE3NTRmYWYyMjIuLmE1MzlkOGIzOTY4MiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tfZ2VtX2RldmljZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYwpAQCAtNjQsOCArNjQsNiBAQCBzdGF0
aWMgdm9pZCBtb2NrX2RldmljZV9yZWxlYXNlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiAJZm9y
X2VhY2hfZW5naW5lKGVuZ2luZSwgJmk5MTUtPmd0LCBpZCkKIAkJbW9ja19lbmdpbmVfZnJlZShl
bmdpbmUpOwogCi0JaW50ZWxfdGltZWxpbmVzX2ZpbmkoaTkxNSk7Ci0KIAlkcmFpbl93b3JrcXVl
dWUoaTkxNS0+d3EpOwogCWk5MTVfZ2VtX2RyYWluX2ZyZWVkX29iamVjdHMoaTkxNSk7CiAKQEAg
LTE3OSw4ICsxNzcsNiBAQCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqbW9ja19nZW1fZGV2aWNl
KHZvaWQpCiAKIAltb2NrX2luaXRfY29udGV4dHMoaTkxNSk7CiAKLQlpbnRlbF90aW1lbGluZXNf
aW5pdChpOTE1KTsKLQogCW1vY2tfaW5pdF9nZ3R0KGk5MTUsICZpOTE1LT5nZ3R0KTsKIAlpOTE1
LT5ndC52bSA9IGk5MTVfdm1fZ2V0KCZpOTE1LT5nZ3R0LnZtKTsKIApAQCAtMjAwLDcgKzE5Niw2
IEBAIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICptb2NrX2dlbV9kZXZpY2Uodm9pZCkKIGVycl9j
b250ZXh0OgogCW1vY2tfZW5naW5lX2ZyZWUoaTkxNS0+ZW5naW5lW1JDUzBdKTsKIGVycl91bmxv
Y2s6Ci0JaW50ZWxfdGltZWxpbmVzX2ZpbmkoaTkxNSk7CiAJZGVzdHJveV93b3JrcXVldWUoaTkx
NS0+d3EpOwogZXJyX2RydjoKIAlpbnRlbF9tZW1vcnlfcmVnaW9uc19kcml2ZXJfcmVsZWFzZShp
OTE1KTsKLS0gCjIuMjQuMC5yYzEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 95B15CE6D1
	for <lists+intel-gfx@lfdr.de>; Mon,  7 Oct 2019 17:10:30 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0011189F71;
	Mon,  7 Oct 2019 15:10:28 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3E5196E0AA
 for <intel-gfx@lists.freedesktop.org>; Mon,  7 Oct 2019 15:10:27 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 07 Oct 2019 08:10:26 -0700
X-IronPort-AV: E=Sophos;i="5.67,268,1566889200"; d="scan'208";a="196313584"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga003-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 07 Oct 2019 08:10:24 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon,  7 Oct 2019 18:09:33 +0300
Message-Id: <bb8eca0c6166630805e77d2a6dc89c61d568e7a2.1570460714.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1570460714.git.jani.nikula@intel.com>
References: <cover.1570460714.git.jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH 08/11] drm/i915: split intel_modeset_init()
 pre/post gem init
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VHVybiBjdXJyZW50IGludGVsX21vZGVzZXRfaW5pdCgpIHRvIGEgcHJlLWdlbSBpbml0IGZ1bmN0
aW9uLCBhbmQgYWRkIGEKbmV3IGludGVsX21vZGVzZXRfaW5pdCgpIGZ1bmN0aW9uIGFuZCBtb3Zl
IGFsbCBwb3N0LWdlbSBtb2Rlc2V0IGluaXQKdGhlcmUsIGluIHRoZSBjb3JyZWN0IGxheWVyLiBB
Z2FpbiwgYXBhcnQgZnJvbSBwb3NzaWJsZSBmYWlsdXJlIHBhdGhzLApubyBmdW5jdGlvbmFsIGNo
YW5nZXMuCgpTaWduZWQtb2ZmLWJ5OiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1bGFAaW50ZWwuY29t
PgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIHwgMjYg
KysrKysrKysrKysrKysrKysrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheS5oIHwgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyAgICAgICAg
ICAgICAgfCAxNCArKy0tLS0tLS0tLQogMyBmaWxlcyBjaGFuZ2VkLCAyNyBpbnNlcnRpb25zKCsp
LCAxNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheS5jCmluZGV4IDIzNTJjMGI2YjlmYS4uM2U5N2Q0ZDc2OTAwIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtMTYyMTMsOCArMTYyMTMs
OCBAQCBpbnQgaW50ZWxfbW9kZXNldF9pbml0X25vaXJxKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1KQogCXJldHVybiAwOwogfQogCi0vKiBwYXJ0ICMyOiBjYWxsIGFmdGVyIGlycSBpbnN0
YWxsICovCi1pbnQgaW50ZWxfbW9kZXNldF9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpp
OTE1KQorLyogcGFydCAjMjogY2FsbCBhZnRlciBpcnEgaW5zdGFsbCwgYnV0IGJlZm9yZSBnZW0g
aW5pdCAqLworaW50IGludGVsX21vZGVzZXRfaW5pdF9ub2dlbShzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSkKIHsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gJmk5MTUtPmRybTsKIAll
bnVtIHBpcGUgcGlwZTsKQEAgLTE2MzAzLDYgKzE2MzAzLDI4IEBAIGludCBpbnRlbF9tb2Rlc2V0
X2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJcmV0dXJuIDA7CiB9CiAKKy8q
IHBhcnQgIzM6IGNhbGwgYWZ0ZXIgZ2VtIGluaXQgKi8KK2ludCBpbnRlbF9tb2Rlc2V0X2luaXQo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCit7CisJaW50IHJldDsKKworCWludGVsX292
ZXJsYXlfc2V0dXAoaTkxNSk7CisKKwlpZiAoIUhBU19ESVNQTEFZKGk5MTUpIHx8ICFJTlRFTF9E
SVNQTEFZX0VOQUJMRUQoaTkxNSkpCisJCXJldHVybiAwOworCisJcmV0ID0gaW50ZWxfZmJkZXZf
aW5pdCgmaTkxNS0+ZHJtKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJLyogT25seSBl
bmFibGUgaG90cGx1ZyBoYW5kbGluZyBvbmNlIHRoZSBmYmRldiBpcyBmdWxseSBzZXQgdXAuICov
CisJaW50ZWxfaHBkX2luaXQoaTkxNSk7CisKKwlpbnRlbF9pbml0X2lwYyhpOTE1KTsKKworCXJl
dHVybiAwOworfQorCiB2b2lkIGk4MzBfZW5hYmxlX3BpcGUoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2LCBlbnVtIHBpcGUgcGlwZSkKIHsKIAlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0
YyA9IGludGVsX2dldF9jcnRjX2Zvcl9waXBlKGRldl9wcml2LCBwaXBlKTsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmgKaW5kZXggNTY4YjY0MWEzOGRkLi45
ZDkwODU5ODQ5OTIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheS5oCkBAIC01NzgsNiArNTc4LDcgQEAgdm9pZCBpbnRlbF9kaXNwbGF5X3ByaW50X2Vycm9y
X3N0YXRlKHN0cnVjdCBkcm1faTkxNV9lcnJvcl9zdGF0ZV9idWYgKmUsCiAvKiBtb2Rlc2V0dGlu
ZyAqLwogdm9pZCBpbnRlbF9tb2Rlc2V0X2luaXRfaHcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUpOwogaW50IGludGVsX21vZGVzZXRfaW5pdF9ub2lycShzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSk7CitpbnQgaW50ZWxfbW9kZXNldF9pbml0X25vZ2VtKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1KTsKIGludCBpbnRlbF9tb2Rlc2V0X2luaXQoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUpOwogdm9pZCBpbnRlbF9tb2Rlc2V0X2RyaXZlcl9yZW1vdmUoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwogdm9pZCBpbnRlbF9tb2Rlc2V0X2RyaXZlcl9yZW1v
dmVfbm9pcnEoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmMKaW5kZXggMzMzMGU0MDcyNGNiLi5hYmQ4YmMwYjA1NDQgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuYwpAQCAtMzE0LDcgKzMxNCw3IEBAIHN0YXRpYyBpbnQgaTkxNV9kcml2ZXJfbW9kZXNl
dF9wcm9iZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAogCS8qIEltcG9ydGFudDog
VGhlIG91dHB1dCBzZXR1cCBmdW5jdGlvbnMgY2FsbGVkIGJ5IG1vZGVzZXRfaW5pdCBuZWVkCiAJ
ICogd29ya2luZyBpcnFzIGZvciBlLmcuIGdtYnVzIGFuZCBkcCBhdXggdHJhbnNmZXJzLiAqLwot
CXJldCA9IGludGVsX21vZGVzZXRfaW5pdChpOTE1KTsKKwlyZXQgPSBpbnRlbF9tb2Rlc2V0X2lu
aXRfbm9nZW0oaTkxNSk7CiAJaWYgKHJldCkKIAkJZ290byBvdXQ7CiAKQEAgLTMyMiwyMCArMzIy
LDEwIEBAIHN0YXRpYyBpbnQgaTkxNV9kcml2ZXJfbW9kZXNldF9wcm9iZShzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqaTkxNSkKIAlpZiAocmV0KQogCQlnb3RvIGNsZWFudXBfbW9kZXNldDsKIAot
CWludGVsX292ZXJsYXlfc2V0dXAoaTkxNSk7Ci0KLQlpZiAoIUhBU19ESVNQTEFZKGk5MTUpIHx8
ICFJTlRFTF9ESVNQTEFZX0VOQUJMRUQoaTkxNSkpCi0JCXJldHVybiAwOwotCi0JcmV0ID0gaW50
ZWxfZmJkZXZfaW5pdCgmaTkxNS0+ZHJtKTsKKwlyZXQgPSBpbnRlbF9tb2Rlc2V0X2luaXQoaTkx
NSk7CiAJaWYgKHJldCkKIAkJZ290byBjbGVhbnVwX2dlbTsKIAotCS8qIE9ubHkgZW5hYmxlIGhv
dHBsdWcgaGFuZGxpbmcgb25jZSB0aGUgZmJkZXYgaXMgZnVsbHkgc2V0IHVwLiAqLwotCWludGVs
X2hwZF9pbml0KGk5MTUpOwotCi0JaW50ZWxfaW5pdF9pcGMoaTkxNSk7Ci0KIAlyZXR1cm4gMDsK
IAogY2xlYW51cF9nZW06Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 68DA9EFECC
	for <lists+intel-gfx@lfdr.de>; Tue,  5 Nov 2019 14:39:09 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A8ADA6EA71;
	Tue,  5 Nov 2019 13:39:07 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5C6D06EA71
 for <intel-gfx@lists.freedesktop.org>; Tue,  5 Nov 2019 13:39:06 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 05 Nov 2019 05:39:06 -0800
X-IronPort-AV: E=Sophos;i="5.68,271,1569308400"; d="scan'208";a="195821513"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 05 Nov 2019 05:39:03 -0800
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  5 Nov 2019 15:39:00 +0200
Message-Id: <20191105133900.19590-1-jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH] drm/i915/bios: use a flag for vbt hdmi level
 shift presence
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIHByZS1pbml0aWFsaXplZCBtYWdpYyB2YWx1ZSBpcyBhIGJpdCBzaWxseSwgc3dpdGNoIHRv
IGEgZmxhZwppbnN0ZWFkLiBXaGlsZSBhdCBpdCwgY2xlYW4gdXAgdGhlIHZhbGlkaXR5IGNoZWNr
cy4gTm8gZnVuY3Rpb25hbApjaGFuZ2VzIGFwYXJ0IGZyb20gdGhlIGFkZGVkIGNoZWNrcy4KCkNj
OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgpTaWduZWQt
b2ZmLWJ5OiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1bGFAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5jIHwgMTAgKy0tLS0tLS0tLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYyAgfCAxOSArKysrKysrKysrKy0tLS0t
LS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oICAgICAgICAgICB8ICA4ICsrLS0t
LS0tCiAzIGZpbGVzIGNoYW5nZWQsIDE0IGluc2VydGlvbnMoKyksIDIzIGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9iaW9zLmMKaW5kZXggYTAzZjU2Yjdi
NGVmLi5jMTliMjM0YmViZTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfYmlvcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
Ymlvcy5jCkBAIC0xNTA5LDYgKzE1MDksNyBAQCBzdGF0aWMgdm9pZCBwYXJzZV9kZGlfcG9ydChz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCQkgICAgICBwb3J0X25hbWUocG9y
dCksCiAJCQkgICAgICBoZG1pX2xldmVsX3NoaWZ0KTsKIAkJaW5mby0+aGRtaV9sZXZlbF9zaGlm
dCA9IGhkbWlfbGV2ZWxfc2hpZnQ7CisJCWluZm8tPmhkbWlfbGV2ZWxfc2hpZnRfc2V0ID0gdHJ1
ZTsKIAl9CiAKIAlpZiAoYmRiX3ZlcnNpb24gPj0gMjA0KSB7CkBAIC0xNjkyLDggKzE2OTMsNiBA
QCBwYXJzZV9nZW5lcmFsX2RlZmluaXRpb25zKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiwKIHN0YXRpYyB2b2lkCiBpbml0X3ZidF9kZWZhdWx0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYpCiB7Ci0JZW51bSBwb3J0IHBvcnQ7Ci0KIAlkZXZfcHJpdi0+dmJ0LmNy
dF9kZGNfcGluID0gR01CVVNfUElOX1ZHQUREQzsKIAogCS8qIERlZmF1bHQgdG8gaGF2aW5nIGJh
Y2tsaWdodCAqLwpAQCAtMTcyMSwxMyArMTcyMCw2IEBAIGluaXRfdmJ0X2RlZmF1bHRzKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlkZXZfcHJpdi0+dmJ0Lmx2ZHNfc3NjX2Zy
ZXEgPSBpbnRlbF9iaW9zX3NzY19mcmVxdWVuY3koZGV2X3ByaXYsCiAJCQkhSEFTX1BDSF9TUExJ
VChkZXZfcHJpdikpOwogCURSTV9ERUJVR19LTVMoIlNldCBkZWZhdWx0IHRvIFNTQyBhdCAlZCBr
SHpcbiIsIGRldl9wcml2LT52YnQubHZkc19zc2NfZnJlcSk7Ci0KLQlmb3JfZWFjaF9wb3J0KHBv
cnQpIHsKLQkJc3RydWN0IGRkaV92YnRfcG9ydF9pbmZvICppbmZvID0KLQkJCSZkZXZfcHJpdi0+
dmJ0LmRkaV9wb3J0X2luZm9bcG9ydF07Ci0KLQkJaW5mby0+aGRtaV9sZXZlbF9zaGlmdCA9IEhE
TUlfTEVWRUxfU0hJRlRfVU5LTk9XTjsKLQl9CiB9CiAKIC8qIERlZmF1bHRzIHRvIGluaXRpYWxp
emUgb25seSBpZiB0aGVyZSBpcyBubyBWQlQuICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kZGkuYwppbmRleCBjOTE1MjFiY2YwNmEuLmVjNTFmNjk3MWIxNiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCkBAIC04ODgsMTEgKzg4OCwxMCBAQCBp
Y2xfZ2V0X2NvbWJvX2J1Zl90cmFucyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYs
IGludCB0eXBlLCBpbnQgcmF0ZSwKIAogc3RhdGljIGludCBpbnRlbF9kZGlfaGRtaV9sZXZlbChz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGVudW0gcG9ydCBwb3J0KQogeworCXN0
cnVjdCBkZGlfdmJ0X3BvcnRfaW5mbyAqcG9ydF9pbmZvID0gJmRldl9wcml2LT52YnQuZGRpX3Bv
cnRfaW5mb1twb3J0XTsKIAlpbnQgbl9lbnRyaWVzLCBsZXZlbCwgZGVmYXVsdF9lbnRyeTsKIAll
bnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgcG9ydCk7CiAKLQlsZXZl
bCA9IGRldl9wcml2LT52YnQuZGRpX3BvcnRfaW5mb1twb3J0XS5oZG1pX2xldmVsX3NoaWZ0Owot
CiAJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIpIHsKIAkJaWYgKGludGVsX3BoeV9pc19j
b21ibyhkZXZfcHJpdiwgcGh5KSkKIAkJCWljbF9nZXRfY29tYm9fYnVmX3RyYW5zKGRldl9wcml2
LCBJTlRFTF9PVVRQVVRfSERNSSwKQEAgLTkyNywxNCArOTI2LDE4IEBAIHN0YXRpYyBpbnQgaW50
ZWxfZGRpX2hkbWlfbGV2ZWwoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBlbnVt
IHBvcnQgcG9yCiAJCXJldHVybiAwOwogCX0KIAotCS8qIENob29zZSBhIGdvb2QgZGVmYXVsdCBp
ZiBWQlQgaXMgYmFkbHkgcG9wdWxhdGVkICovCi0JaWYgKGxldmVsID09IEhETUlfTEVWRUxfU0hJ
RlRfVU5LTk9XTiB8fCBsZXZlbCA+PSBuX2VudHJpZXMpCi0JCWxldmVsID0gZGVmYXVsdF9lbnRy
eTsKLQogCWlmIChXQVJOX09OX09OQ0Uobl9lbnRyaWVzID09IDApKQogCQlyZXR1cm4gMDsKLQlp
ZiAoV0FSTl9PTl9PTkNFKGxldmVsID49IG5fZW50cmllcykpCi0JCWxldmVsID0gbl9lbnRyaWVz
IC0gMTsKKworCWlmIChXQVJOX09OX09OQ0UoZGVmYXVsdF9lbnRyeSA+PSBuX2VudHJpZXMpKQor
CQlkZWZhdWx0X2VudHJ5ID0gbl9lbnRyaWVzIC0gMTsKKworCWlmIChwb3J0X2luZm8tPmhkbWlf
bGV2ZWxfc2hpZnRfc2V0ICYmCisJICAgICFXQVJOX09OX09OQ0UocG9ydF9pbmZvLT5oZG1pX2xl
dmVsX3NoaWZ0ID49IG5fZW50cmllcykpIHsKKwkJbGV2ZWwgPSBwb3J0X2luZm8tPmhkbWlfbGV2
ZWxfc2hpZnQ7CisJfSBlbHNlIHsKKwkJbGV2ZWwgPSBkZWZhdWx0X2VudHJ5OworCX0KIAogCXJl
dHVybiBsZXZlbDsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IDdlMGY2N2JhYmUyMC4u
NjdiZGZlNmRlM2ZhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5o
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTYyNywxMyArNjI3LDkg
QEAgc3RydWN0IGRkaV92YnRfcG9ydF9pbmZvIHsKIAogCWludCBtYXhfdG1kc19jbG9jazsKIAot
CS8qCi0JICogVGhpcyBpcyBhbiBpbmRleCBpbiB0aGUgSERNSS9EVkkgRERJIGJ1ZmZlciB0cmFu
c2xhdGlvbiB0YWJsZS4KLQkgKiBUaGUgc3BlY2lhbCB2YWx1ZSBIRE1JX0xFVkVMX1NISUZUX1VO
S05PV04gbWVhbnMgdGhlIFZCVCBkaWRuJ3QKLQkgKiBwb3B1bGF0ZSB0aGlzIGZpZWxkLgotCSAq
LwotI2RlZmluZSBIRE1JX0xFVkVMX1NISUZUX1VOS05PV04JMHhmZgorCS8qIFRoaXMgaXMgYW4g
aW5kZXggaW4gdGhlIEhETUkvRFZJIERESSBidWZmZXIgdHJhbnNsYXRpb24gdGFibGUuICovCiAJ
dTggaGRtaV9sZXZlbF9zaGlmdDsKKwl1OCBoZG1pX2xldmVsX3NoaWZ0X3NldDoxOwogCiAJdTgg
c3VwcG9ydHNfZHZpOjE7CiAJdTggc3VwcG9ydHNfaGRtaToxOwotLSAKMi4yMC4xCgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGlu
ZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4AF23331EF
	for <lists+intel-gfx@lfdr.de>; Mon,  3 Jun 2019 16:20:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 24A488923A;
	Mon,  3 Jun 2019 14:20:15 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 622648923A
 for <intel-gfx@lists.freedesktop.org>; Mon,  3 Jun 2019 14:20:13 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16775780-1500050 
 for multiple; Mon, 03 Jun 2019 14:59:14 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon,  3 Jun 2019 14:58:56 +0100
Message-Id: <20190603135910.15979-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 01/15] drm/i915: Make the semaphore saturation
 mask global
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Dmitry Ermilov <dmitry.ermilov@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIGlkZWEgYmVoaW5kIGtlZXBpbmcgdGhlIHNhdHVyYXRpb24gbWFzayBsb2NhbCB0byBhIGNv
bnRleHQgYmFja2ZpcmVkCnNwZWN0YWN1bGFybHkuIFRoZSBwcmVtaXNlIHdpdGggdGhlIGxvY2Fs
IG1hc2sgd2FzIHRoYXQgd2Ugd291bGQgYmUgbW9yZQpwcm9hY3RpdmUgaW4gYXR0ZW1wdGluZyB0
byB1c2Ugc2VtYXBob3JlcyBhZnRlciBlYWNoIHRpbWUgdGhlIGNvbnRleHQKaWRsZWQsIGFuZCB0
aGF0IGFsbCBuZXcgY29udGV4dHMgd291bGQgYXR0ZW1wdCB0byB1c2Ugc2VtYXBob3JlcwppZ25v
cmluZyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgc3lzdGVtLiBUaGlzIHR1cm5zIG91dCB0byBi
ZSBob3JyaWJseQpvcHRpbWlzdGljLiBJZiB0aGUgc3lzdGVtIHN0YXRlIGlzIHN0aWxsIG92ZXJz
YXR1cmF0ZWQgYW5kIHRoZSBleGlzdGluZwp3b3JrbG9hZHMgaGF2ZSBhbGwgc3RvcHBlZCB1c2lu
ZyBzZW1hcGhvcmVzLCB0aGUgbmV3IHdvcmtsb2FkcyB3b3VsZAphdHRlbXB0IHRvIHVzZSBzZW1h
cGhvcmVzIGFuZCBiZSBkZXByaW9yaXRpc2VkIGJlaGluZCByZWFsIHdvcmsuIFRoZQpuZXcgY29u
dGV4dHMgd291bGQgbm90IHN3aXRjaCBvZmYgdXNpbmcgc2VtYXBob3JlcyB1bnRpbCB0aGVpciBp
bml0aWFsCmJhdGNoIG9mIGxvdyBwcmlvcml0eSB3b3JrIGhhZCBjb21wbGV0ZWQuIEdpdmVuIHN1
ZmZpY2llbnQgYmFja2xvYWQgbG9hZApvZiBlcXVhbCB1c2VyIHByaW9yaXR5LCB0aGlzIHdvdWxk
IGNvbXBsZXRlbHkgc3RhcnZlIHRoZSBuZXcgd29yayBvZiBhbnkKR1BVIHRpbWUuCgpUbyBjb21w
ZW5zYXRlLCByZW1vdmUgdGhlIGxvY2FsIHRyYWNraW5nIGluIGZhdm91ciBvZiBrZWVwaW5nIGl0
IGFzCmdsb2JhbCBzdGF0ZSBvbiB0aGUgZW5naW5lIC0tIG9uY2UgdGhlIHN5c3RlbSBpcyBzYXR1
cmF0ZWQgYW5kCnNlbWFwaG9yZXMgYXJlIGRpc2FibGVkLCBldmVyeW9uZSBzdG9wcyBhdHRlbXB0
aW5nIHRvIHVzZSBzZW1hcGhvcmVzCnVudGlsIHRoZSBzeXN0ZW0gaXMgaWRsZSBhZ2Fpbi4gT25l
IG9mIHRoZSByZWFzb24gZm9yIHByZWZlcnJpbmcgbG9jYWwKY29udGV4dCB0cmFja2luZyB3YXMg
dGhhdCBpdCB3b3JrZWQgd2l0aCB2aXJ0dWFsIGVuZ2luZXMsIHNvIGZvcgpzd2l0Y2hpbmcgdG8g
Z2xvYmFsIHN0YXRlIHdlIGNvdWxkIGVpdGhlciBkbyBhIGNvbXBsZXRlIGNoZWNrIG9mIGFsbCB0
aGUKdmlydHVhbCBzaWJsaW5ncyBvciBzaW1wbHkgZGlzYWJsZSBzZW1hcGhvcmVzIGZvciB0aG9z
ZSByZXF1ZXN0cy4gVGhpcwp0YWtlcyB0aGUgc2ltcGxlciBhcHByb2FjaCBvZiBkaXNhYmxpbmcg
c2VtYXBob3JlcyBvbiB2aXJ0dWFsIGVuZ2luZXMuCgpUaGUgZG93bnNpZGUgaXMgdGhhdCB0aGUg
ZGVjaXNpb24gdGhhdCB0aGUgZW5naW5lIGlzIHNhdHVyYXRlZCBpcyBhCmxvY2FsIG1lYXN1cmUg
LS0gd2UgYXJlIG9ubHkgY2hlY2tpbmcgd2hldGhlciBvciBub3QgdGhpcyBjb250ZXh0IHdhcwpz
Y2hlZHVsZWQgaW4gYSB0aW1lbHkgZmFzaGlvbiwgaXQgbWF5IGJlIGxlZ2l0aW1hdGVseSBkZWxh
eWVkIGR1ZSB0byB1c2VyCnByaW9yaXRpZXMuIFdlIHN0aWxsIGhhdmUgdGhlIHNhbWUgZGlsZW1t
YSB0aG91Z2gsIHRoYXQgd2UgZG8gbm90IHdhbnQKdG8gZW1wbG95IHRoZSBzZW1hcGhvcmUgcG9s
bCB1bmxlc3MgaXQgd2lsbCBiZSB1c2VkLgoKRml4ZXM6IGNhNmU1NmY2NTRlNyAoImRybS9pOTE1
OiBEaXNhYmxlIHNlbWFwaG9yZSBidXN5d2FpdHMgb24gc2F0dXJhdGVkIHN5c3RlbXMiKQpTaWdu
ZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KQ2M6IFR2
cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+CkNjOiBEbWl0cnkgUm9nb3po
a2luIDxkbWl0cnkudi5yb2dvemhraW5AaW50ZWwuY29tPgpDYzogRG1pdHJ5IEVybWlsb3YgPGRt
aXRyeS5lcm1pbG92QGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9jb250ZXh0LmMgICAgICAgfCAyIC0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9j
b250ZXh0X3R5cGVzLmggfCAyIC0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdp
bmVfcG0uYyAgICAgfCAyICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVf
dHlwZXMuaCAgfCAyICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICAg
ICAgICAgfCAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYyAgICAgICAg
ICAgfCA0ICsrLS0KIDYgZmlsZXMgY2hhbmdlZCwgNyBpbnNlcnRpb25zKCspLCA3IGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYwppbmRleCBjNzhlYzBi
NThlNzcuLjdlMmIxOGRkZGExOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRl
eHQuYwpAQCAtMTE4LDcgKzExOCw2IEBAIGludGVsX2NvbnRleHRfaW5pdChzdHJ1Y3QgaW50ZWxf
Y29udGV4dCAqY2UsCiAJY2UtPmVuZ2luZSA9IGVuZ2luZTsKIAljZS0+b3BzID0gZW5naW5lLT5j
b3BzOwogCWNlLT5zc2V1ID0gZW5naW5lLT5zc2V1OwotCWNlLT5zYXR1cmF0ZWQgPSAwOwogCiAJ
SU5JVF9MSVNUX0hFQUQoJmNlLT5zaWduYWxfbGluayk7CiAJSU5JVF9MSVNUX0hFQUQoJmNlLT5z
aWduYWxzKTsKQEAgLTE2MSw3ICsxNjAsNiBAQCB2b2lkIGludGVsX2NvbnRleHRfZW50ZXJfZW5n
aW5lKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKIAogdm9pZCBpbnRlbF9jb250ZXh0X2V4aXRf
ZW5naW5lKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKIHsKLQljZS0+c2F0dXJhdGVkID0gMDsK
IAlpbnRlbF9lbmdpbmVfcG1fcHV0KGNlLT5lbmdpbmUpOwogfQogCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0X3R5cGVzLmgKaW5kZXggODI1ZmNmMGFjOWM0Li5lNDdk
NWI3YWY1ZDQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRl
eHRfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0X3R5
cGVzLmgKQEAgLTUzLDggKzUzLDYgQEAgc3RydWN0IGludGVsX2NvbnRleHQgewogCWF0b21pY190
IHBpbl9jb3VudDsKIAlzdHJ1Y3QgbXV0ZXggcGluX211dGV4OyAvKiBndWFyZHMgcGlubmluZyBh
bmQgYXNzb2NpYXRlZCBvbi1ncHVpbmcgKi8KIAotCWludGVsX2VuZ2luZV9tYXNrX3Qgc2F0dXJh
dGVkOyAvKiBzdWJtaXR0aW5nIHNlbWFwaG9yZXMgdG9vIGxhdGU/ICovCi0KIAkvKioKIAkgKiBh
Y3RpdmVfdHJhY2tlcjogQWN0aXZlIHRyYWNrZXIgZm9yIHRoZSBleHRlcm5hbCBycSBhY3Rpdml0
eQogCSAqIG9uIHRoaXMgaW50ZWxfY29udGV4dCBvYmplY3QuCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2VuZ2luZV9wbS5jCmluZGV4IGNjZjAzNDc2NDc0MS4uN2JmZmEwYzZmNWEyIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYwpAQCAtOTgsNiArOTgs
OCBAQCBzdGF0aWMgaW50IF9fZW5naW5lX3Bhcmsoc3RydWN0IGludGVsX3dha2VyZWYgKndmKQog
CXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9CiAJCWNvbnRhaW5lcl9vZih3ZiwgdHlw
ZW9mKCplbmdpbmUpLCB3YWtlcmVmKTsKIAorCWVuZ2luZS0+c2F0dXJhdGVkID0gMDsKKwogCS8q
CiAJICogSWYgb25lIGFuZCBvbmx5IG9uZSByZXF1ZXN0IGlzIGNvbXBsZXRlZCBiZXR3ZWVuIHBt
IGV2ZW50cywKIAkgKiB3ZSBrbm93IHRoYXQgd2UgYXJlIGluc2lkZSB0aGUga2VybmVsIGNvbnRl
eHQgYW5kIGl0IGlzCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBl
cy5oCmluZGV4IDAxMjIzODY0MjM3YS4uZDJkZmY5MDU2ZWEwIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaApAQCAtMjkyLDYgKzI5Miw4IEBAIHN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MgewogCXN0cnVjdCBpbnRlbF9jb250ZXh0ICprZXJuZWxfY29udGV4
dDsgLyogcGlubmVkICovCiAJc3RydWN0IGludGVsX2NvbnRleHQgKnByZWVtcHRfY29udGV4dDsg
LyogcGlubmVkOyBvcHRpb25hbCAqLwogCisJaW50ZWxfZW5naW5lX21hc2tfdCBzYXR1cmF0ZWQ7
IC8qIHN1Ym1pdHRpbmcgc2VtYXBob3JlcyB0b28gbGF0ZT8gKi8KKwogCXVuc2lnbmVkIGxvbmcg
c2VyaWFsOwogCiAJdW5zaWduZWQgbG9uZyB3YWtlcmVmX3NlcmlhbDsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfbHJjLmMKaW5kZXggZmVkNzA0ODAyYzU3Li45YmExNGZhN2I3ZmIgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCkBAIC0zMTQ0LDcgKzMxNDQsNiBAQCBzdGF0aWMgdm9p
ZCB2aXJ0dWFsX2NvbnRleHRfZXhpdChzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UpCiAJc3RydWN0
IHZpcnR1YWxfZW5naW5lICp2ZSA9IGNvbnRhaW5lcl9vZihjZSwgdHlwZW9mKCp2ZSksIGNvbnRl
eHQpOwogCXVuc2lnbmVkIGludCBuOwogCi0JY2UtPnNhdHVyYXRlZCA9IDA7CiAJZm9yIChuID0g
MDsgbiA8IHZlLT5udW1fc2libGluZ3M7IG4rKykKIAkJaW50ZWxfZW5naW5lX3BtX3B1dCh2ZS0+
c2libGluZ3Nbbl0pOwogfQpAQCAtMzMzOSw2ICszMzM4LDcgQEAgaW50ZWxfZXhlY2xpc3RzX2Ny
ZWF0ZV92aXJ0dWFsKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgsCiAJdmUtPmJhc2UudWFi
aV9jbGFzcyA9IEk5MTVfRU5HSU5FX0NMQVNTX0lOVkFMSUQ7CiAJdmUtPmJhc2UuaW5zdGFuY2Ug
PSBJOTE1X0VOR0lORV9DTEFTU19JTlZBTElEX1ZJUlRVQUw7CiAJdmUtPmJhc2UuZmxhZ3MgPSBJ
OTE1X0VOR0lORV9JU19WSVJUVUFMOworCXZlLT5iYXNlLnNhdHVyYXRlZCA9IEFMTF9FTkdJTkVT
OwogCiAJc25wcmludGYodmUtPmJhc2UubmFtZSwgc2l6ZW9mKHZlLT5iYXNlLm5hbWUpLCAidmly
dHVhbCIpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3Qu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jCmluZGV4IGRhMWU2OTg0YThj
Yy4uODEwMGNjZjA0YzBiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Jl
cXVlc3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYwpAQCAtNDU5
LDcgKzQ1OSw3IEBAIHZvaWQgX19pOTE1X3JlcXVlc3Rfc3VibWl0KHN0cnVjdCBpOTE1X3JlcXVl
c3QgKnJlcXVlc3QpCiAJICovCiAJaWYgKHJlcXVlc3QtPnNjaGVkLnNlbWFwaG9yZXMgJiYKIAkg
ICAgaTkxNV9zd19mZW5jZV9zaWduYWxlZCgmcmVxdWVzdC0+c2VtYXBob3JlKSkKLQkJcmVxdWVz
dC0+aHdfY29udGV4dC0+c2F0dXJhdGVkIHw9IHJlcXVlc3QtPnNjaGVkLnNlbWFwaG9yZXM7CisJ
CWVuZ2luZS0+c2F0dXJhdGVkIHw9IHJlcXVlc3QtPnNjaGVkLnNlbWFwaG9yZXM7CiAKIAkvKiBX
ZSBtYXkgYmUgcmVjdXJzaW5nIGZyb20gdGhlIHNpZ25hbCBjYWxsYmFjayBvZiBhbm90aGVyIGk5
MTUgZmVuY2UgKi8KIAlzcGluX2xvY2tfbmVzdGVkKCZyZXF1ZXN0LT5sb2NrLCBTSU5HTEVfREVQ
VEhfTkVTVElORyk7CkBAIC04MzksNyArODM5LDcgQEAgYWxyZWFkeV9idXN5d2FpdGluZyhzdHJ1
Y3QgaTkxNV9yZXF1ZXN0ICpycSkKIAkgKgogCSAqIFNlZSB0aGUgYXJlLXdlLXRvby1sYXRlPyBj
aGVjayBpbiBfX2k5MTVfcmVxdWVzdF9zdWJtaXQoKS4KIAkgKi8KLQlyZXR1cm4gcnEtPnNjaGVk
LnNlbWFwaG9yZXMgfCBycS0+aHdfY29udGV4dC0+c2F0dXJhdGVkOworCXJldHVybiBycS0+c2No
ZWQuc2VtYXBob3JlcyB8IHJxLT5lbmdpbmUtPnNhdHVyYXRlZDsKIH0KIAogc3RhdGljIGludAot
LSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

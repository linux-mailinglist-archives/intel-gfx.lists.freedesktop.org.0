Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CDB7FDBF94
	for <lists+intel-gfx@lfdr.de>; Fri, 18 Oct 2019 10:13:29 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2E2D66EAE8;
	Fri, 18 Oct 2019 08:13:28 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mblankhorst.nl (mblankhorst.nl
 [IPv6:2a02:2308::216:3eff:fe92:dfa3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7A9D56EAE8
 for <intel-gfx@lists.freedesktop.org>; Fri, 18 Oct 2019 08:13:27 +0000 (UTC)
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 18 Oct 2019 10:13:23 +0200
Message-Id: <20191018081323.5836-1-maarten.lankhorst@linux.intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191017132105.15528-5-maarten.lankhorst@linux.intel.com>
References: <20191017132105.15528-5-maarten.lankhorst@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915: Perform manual conversions for crtc
 uapi/hw split, v2.
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

aW50ZWxfZ2V0X2xvYWRfZGV0ZWN0X3BpcGUoKSBuZWVkcyB0byBzZXQgdWFwaSBhY3RpdmUsCnVh
cGkgZW5hYmxlIGlzIHNldCBieSB0aGUgY2FsbCB0byBkcm1fYXRvbWljX3NldF9tb2RlX2Zvcl9j
cnRjKCksCnNvIHdlIGNhbiByZW1vdmUgaXQuCgppbnRlbF9waXBlX2NvbmZpZ19jb21wYXJlKCkg
bmVlZHMgdG8gbG9vayBhdCBodyBzdGF0ZSwgYnV0IEkgZGlkbid0CmNoYW5nZSBzcGF0Y2ggdG8g
bG9vayBhdCBpdC4gSXQncyBlYXN5IGVub3VnaCB0byBkbyBtYW51YWxseS4KCmludGVsX2F0b21p
Y19jaGVjaygpIGRlZmluaXRlbHkgbmVlZHMgdG8gY2hlY2sgZm9yIHVhcGkgZW5hYmxlLApvdGhl
cndpc2UgaW50ZWxfbW9kZXNldF9waXBlX2NvbmZpZyBjYW5ub3QgY29weSB1YXBpIHN0YXRlIHRv
IGh3LgoKQ2hhbmdlcyBzaW5jZSB2MToKLSBBY3R1YWxseSBzZXQgdWFwaS5hY3RpdmUgaW4gZ2V0
X2xvYWRfZGV0ZWN0X3BpcGUoKS4KClNpZ25lZC1vZmYtYnk6IE1hYXJ0ZW4gTGFua2hvcnN0IDxt
YWFydGVuLmxhbmtob3JzdEBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgfCA0MiArKysrKysrKysrLS0tLS0tLS0tLQogMSBm
aWxlIGNoYW5nZWQsIDIxIGluc2VydGlvbnMoKyksIDIxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggZmEwYWJmZGZmMmFl
Li5iYmFjNmI3NjRkOTIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGlzcGxheS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheS5jCkBAIC0xMTIxNCw3ICsxMTIxNCw3IEBAIGludCBpbnRlbF9nZXRfbG9hZF9kZXRl
Y3RfcGlwZShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQlnb3RvIGZhaWw7CiAJ
fQogCi0JY3J0Y19zdGF0ZS0+YmFzZS5hY3RpdmUgPSBjcnRjX3N0YXRlLT5iYXNlLmVuYWJsZSA9
IHRydWU7CisJY3J0Y19zdGF0ZS0+dWFwaS5hY3RpdmUgPSB0cnVlOwogCiAJaWYgKCFtb2RlKQog
CQltb2RlID0gJmxvYWRfZGV0ZWN0X21vZGU7CkBAIC0xMjc1NCwxOSArMTI3NTQsMTkgQEAgaW50
ZWxfcGlwZV9jb25maWdfY29tcGFyZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3Vy
cmVudF9jb25maWcsCiAKIAlQSVBFX0NPTkZfQ0hFQ0tfWChvdXRwdXRfdHlwZXMpOwogCi0JUElQ
RV9DT05GX0NIRUNLX0koYmFzZS5hZGp1c3RlZF9tb2RlLmNydGNfaGRpc3BsYXkpOwotCVBJUEVf
Q09ORl9DSEVDS19JKGJhc2UuYWRqdXN0ZWRfbW9kZS5jcnRjX2h0b3RhbCk7Ci0JUElQRV9DT05G
X0NIRUNLX0koYmFzZS5hZGp1c3RlZF9tb2RlLmNydGNfaGJsYW5rX3N0YXJ0KTsKLQlQSVBFX0NP
TkZfQ0hFQ0tfSShiYXNlLmFkanVzdGVkX21vZGUuY3J0Y19oYmxhbmtfZW5kKTsKLQlQSVBFX0NP
TkZfQ0hFQ0tfSShiYXNlLmFkanVzdGVkX21vZGUuY3J0Y19oc3luY19zdGFydCk7Ci0JUElQRV9D
T05GX0NIRUNLX0koYmFzZS5hZGp1c3RlZF9tb2RlLmNydGNfaHN5bmNfZW5kKTsKKwlQSVBFX0NP
TkZfQ0hFQ0tfSShody5hZGp1c3RlZF9tb2RlLmNydGNfaGRpc3BsYXkpOworCVBJUEVfQ09ORl9D
SEVDS19JKGh3LmFkanVzdGVkX21vZGUuY3J0Y19odG90YWwpOworCVBJUEVfQ09ORl9DSEVDS19J
KGh3LmFkanVzdGVkX21vZGUuY3J0Y19oYmxhbmtfc3RhcnQpOworCVBJUEVfQ09ORl9DSEVDS19J
KGh3LmFkanVzdGVkX21vZGUuY3J0Y19oYmxhbmtfZW5kKTsKKwlQSVBFX0NPTkZfQ0hFQ0tfSSho
dy5hZGp1c3RlZF9tb2RlLmNydGNfaHN5bmNfc3RhcnQpOworCVBJUEVfQ09ORl9DSEVDS19JKGh3
LmFkanVzdGVkX21vZGUuY3J0Y19oc3luY19lbmQpOwogCi0JUElQRV9DT05GX0NIRUNLX0koYmFz
ZS5hZGp1c3RlZF9tb2RlLmNydGNfdmRpc3BsYXkpOwotCVBJUEVfQ09ORl9DSEVDS19JKGJhc2Uu
YWRqdXN0ZWRfbW9kZS5jcnRjX3Z0b3RhbCk7Ci0JUElQRV9DT05GX0NIRUNLX0koYmFzZS5hZGp1
c3RlZF9tb2RlLmNydGNfdmJsYW5rX3N0YXJ0KTsKLQlQSVBFX0NPTkZfQ0hFQ0tfSShiYXNlLmFk
anVzdGVkX21vZGUuY3J0Y192YmxhbmtfZW5kKTsKLQlQSVBFX0NPTkZfQ0hFQ0tfSShiYXNlLmFk
anVzdGVkX21vZGUuY3J0Y192c3luY19zdGFydCk7Ci0JUElQRV9DT05GX0NIRUNLX0koYmFzZS5h
ZGp1c3RlZF9tb2RlLmNydGNfdnN5bmNfZW5kKTsKKwlQSVBFX0NPTkZfQ0hFQ0tfSShody5hZGp1
c3RlZF9tb2RlLmNydGNfdmRpc3BsYXkpOworCVBJUEVfQ09ORl9DSEVDS19JKGh3LmFkanVzdGVk
X21vZGUuY3J0Y192dG90YWwpOworCVBJUEVfQ09ORl9DSEVDS19JKGh3LmFkanVzdGVkX21vZGUu
Y3J0Y192Ymxhbmtfc3RhcnQpOworCVBJUEVfQ09ORl9DSEVDS19JKGh3LmFkanVzdGVkX21vZGUu
Y3J0Y192YmxhbmtfZW5kKTsKKwlQSVBFX0NPTkZfQ0hFQ0tfSShody5hZGp1c3RlZF9tb2RlLmNy
dGNfdnN5bmNfc3RhcnQpOworCVBJUEVfQ09ORl9DSEVDS19JKGh3LmFkanVzdGVkX21vZGUuY3J0
Y192c3luY19lbmQpOwogCiAJUElQRV9DT05GX0NIRUNLX0kocGl4ZWxfbXVsdGlwbGllcik7CiAJ
UElQRV9DT05GX0NIRUNLX0kob3V0cHV0X2Zvcm1hdCk7CkBAIC0xMjc4MywxNyArMTI3ODMsMTcg
QEAgaW50ZWxfcGlwZV9jb25maWdfY29tcGFyZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqY3VycmVudF9jb25maWcsCiAKIAlQSVBFX0NPTkZfQ0hFQ0tfQk9PTF9JTkNPTVBMRVRFKGhh
c19hdWRpbyk7CiAKLQlQSVBFX0NPTkZfQ0hFQ0tfRkxBR1MoYmFzZS5hZGp1c3RlZF9tb2RlLmZs
YWdzLAorCVBJUEVfQ09ORl9DSEVDS19GTEFHUyhody5hZGp1c3RlZF9tb2RlLmZsYWdzLAogCQkJ
ICAgICAgRFJNX01PREVfRkxBR19JTlRFUkxBQ0UpOwogCiAJaWYgKCFQSVBFX0NPTkZfUVVJUkso
UElQRV9DT05GSUdfUVVJUktfTU9ERV9TWU5DX0ZMQUdTKSkgewotCQlQSVBFX0NPTkZfQ0hFQ0tf
RkxBR1MoYmFzZS5hZGp1c3RlZF9tb2RlLmZsYWdzLAorCQlQSVBFX0NPTkZfQ0hFQ0tfRkxBR1Mo
aHcuYWRqdXN0ZWRfbW9kZS5mbGFncywKIAkJCQkgICAgICBEUk1fTU9ERV9GTEFHX1BIU1lOQyk7
Ci0JCVBJUEVfQ09ORl9DSEVDS19GTEFHUyhiYXNlLmFkanVzdGVkX21vZGUuZmxhZ3MsCisJCVBJ
UEVfQ09ORl9DSEVDS19GTEFHUyhody5hZGp1c3RlZF9tb2RlLmZsYWdzLAogCQkJCSAgICAgIERS
TV9NT0RFX0ZMQUdfTkhTWU5DKTsKLQkJUElQRV9DT05GX0NIRUNLX0ZMQUdTKGJhc2UuYWRqdXN0
ZWRfbW9kZS5mbGFncywKKwkJUElQRV9DT05GX0NIRUNLX0ZMQUdTKGh3LmFkanVzdGVkX21vZGUu
ZmxhZ3MsCiAJCQkJICAgICAgRFJNX01PREVfRkxBR19QVlNZTkMpOwotCQlQSVBFX0NPTkZfQ0hF
Q0tfRkxBR1MoYmFzZS5hZGp1c3RlZF9tb2RlLmZsYWdzLAorCQlQSVBFX0NPTkZfQ0hFQ0tfRkxB
R1MoaHcuYWRqdXN0ZWRfbW9kZS5mbGFncywKIAkJCQkgICAgICBEUk1fTU9ERV9GTEFHX05WU1lO
Qyk7CiAJfQogCkBAIC0xMjgzMiw3ICsxMjgzMiw3IEBAIGludGVsX3BpcGVfY29uZmlnX2NvbXBh
cmUoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmN1cnJlbnRfY29uZmlnLAogCiAJCWJw
X2dhbW1hID0gaW50ZWxfY29sb3JfZ2V0X2dhbW1hX2JpdF9wcmVjaXNpb24ocGlwZV9jb25maWcp
OwogCQlpZiAoYnBfZ2FtbWEpCi0JCQlQSVBFX0NPTkZfQ0hFQ0tfQ09MT1JfTFVUKGdhbW1hX21v
ZGUsIGJhc2UuZ2FtbWFfbHV0LCBicF9nYW1tYSk7CisJCQlQSVBFX0NPTkZfQ0hFQ0tfQ09MT1Jf
TFVUKGdhbW1hX21vZGUsIGh3LmdhbW1hX2x1dCwgYnBfZ2FtbWEpOwogCiAJfQogCkBAIC0xMjg3
Nyw3ICsxMjg3Nyw3IEBAIGludGVsX3BpcGVfY29uZmlnX2NvbXBhcmUoY29uc3Qgc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmN1cnJlbnRfY29uZmlnLAogCWlmIChJU19HNFgoZGV2X3ByaXYpIHx8
IElOVEVMX0dFTihkZXZfcHJpdikgPj0gNSkKIAkJUElQRV9DT05GX0NIRUNLX0kocGlwZV9icHAp
OwogCi0JUElQRV9DT05GX0NIRUNLX0NMT0NLX0ZVWlpZKGJhc2UuYWRqdXN0ZWRfbW9kZS5jcnRj
X2Nsb2NrKTsKKwlQSVBFX0NPTkZfQ0hFQ0tfQ0xPQ0tfRlVaWlkoaHcuYWRqdXN0ZWRfbW9kZS5j
cnRjX2Nsb2NrKTsKIAlQSVBFX0NPTkZfQ0hFQ0tfQ0xPQ0tfRlVaWlkocG9ydF9jbG9jayk7CiAK
IAlQSVBFX0NPTkZfQ0hFQ0tfSShtaW5fdm9sdGFnZV9sZXZlbCk7CkBAIC0xMzU3Miw3ICsxMzU3
Miw3IEBAIHN0YXRpYyBpbnQgaW50ZWxfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYsCiAJCWlmICghbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkpCiAJCQljb250aW51ZTsK
IAotCQlpZiAoIW5ld19jcnRjX3N0YXRlLT5iYXNlLmVuYWJsZSkgeworCQlpZiAoIW5ld19jcnRj
X3N0YXRlLT51YXBpLmVuYWJsZSkgewogCQkJYW55X21zID0gdHJ1ZTsKIAkJCWNvbnRpbnVlOwog
CQl9Ci0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVs
LWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 81D15103755
	for <lists+intel-gfx@lfdr.de>; Wed, 20 Nov 2019 11:20:28 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4C40E6E15C;
	Wed, 20 Nov 2019 10:20:26 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-ua1-x942.google.com (mail-ua1-x942.google.com
 [IPv6:2607:f8b0:4864:20::942])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8CC796E18F
 for <intel-gfx@lists.freedesktop.org>; Wed, 20 Nov 2019 10:20:24 +0000 (UTC)
Received: by mail-ua1-x942.google.com with SMTP id k11so7582231ual.10
 for <intel-gfx@lists.freedesktop.org>; Wed, 20 Nov 2019 02:20:24 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=0/aj3bi+Qr4PamSOXe2df9xpIjkoyJWKPmqVpoL0NCA=;
 b=SOyx3KMEVf7tYpC7NQqefXwb+lTCfV3csf4Ljy3gUmFL30Cj2Q6OdhnLlWkygDXC+L
 /0X6CqQ0h+smjhsQ6cTJDn5qRX/Z1rx1UtCioR2s7+jgsGhgHWE0P/Aslov/Aq0FMD8I
 4AZ9u1RZc39Wzh6uxI+CS31+vT8o9OjvtOLrMh0tlOFHWQ5IN5rvggXXhoVuuBmcuVsS
 D50xFt+JhbLEahJY5CveuXvAxt9/nCHGFHqPtR13RFp0eYPUpjbh9XmBvYlsxaZXDUQh
 WX3MSeBlLhqH+ID3IF809VOJygqEWIAuahw/+mq5MOD98j5vo6vl+aEibLvoSEidUaY5
 m1rg==
X-Gm-Message-State: APjAAAVBswWzuvXskKraks4VktypM95dAbsRW1KQgtzAgs/FJMfCnMmj
 aW9w84lpAGK/h8WizSuBUhkla5lf1HkJezbnPoI=
X-Google-Smtp-Source: APXvYqyqJdWISFxgIfmnNKEUV9q2pWzOipG6ZWIFk/0peIqXd45UkhDpRzZ7n3U2glRuU4Q013m3EN5SGogYBoWS+rI=
X-Received: by 2002:a9f:3c2c:: with SMTP id u44mr1106345uah.2.1574245223464;
 Wed, 20 Nov 2019 02:20:23 -0800 (PST)
MIME-Version: 1.0
References: <20191120093302.3723715-1-chris@chris-wilson.co.uk>
In-Reply-To: <20191120093302.3723715-1-chris@chris-wilson.co.uk>
From: Matthew Auld <matthew.william.auld@gmail.com>
Date: Wed, 20 Nov 2019 10:19:56 +0000
Message-ID: <CAM0jSHOKed3WD96_DHqJPTk-M9S_CiQS8bnGVEaJOHh73DzcWQ@mail.gmail.com>
To: Chris Wilson <chris@chris-wilson.co.uk>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=0/aj3bi+Qr4PamSOXe2df9xpIjkoyJWKPmqVpoL0NCA=;
 b=VRioqAntM/l9kQjQCEPdcAqeQXj/Z6k+uFjWPsHMEk+0JYcgcNatRYKCF8ShY7JKMd
 nK4Q3gxlr6Q4gSBGDOzu2z1vB+l5iA7hLkQZC0V++I18mzGmZdCihVTE5oTY76l6WNmP
 UomRzC3nC7pi7fXVuqu/zoUtWwoQRyXa4+JXiFxHtewb1CsqdKb+5lOKecm5TumCqJqZ
 R4a705bMRpUgqjKonCas3hEytJRX4+yf1iUzakpjFCSSgBzIixIk/DSiqXcjnF9cSRjK
 xYkGtD2m++k3QXI9PBq7RL3dX0TFTHeQ3Eh9wS/O1KliVva1pmlRIEOe6sL53+BEmet1
 7fUg==
Subject: Re: [Intel-gfx] [PATCH 1/9] drm/i915/selftests: Take a ref to the
 request we wait upon
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel Graphics Development <intel-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCAyMCBOb3YgMjAxOSBhdCAwOTozMywgQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13
aWxzb24uY28udWs+IHdyb3RlOgo+Cj4gaTkxNV9yZXF1ZXN0X2FkZCgpIGNvbnN1bWVzIHRoZSBw
YXNzZWQgaW4gcmVmZXJlbmNlIHRvIHRoZSBpOTE1X3JlcXVlc3QsCj4gc28gaWYgdGhlIHNlbGZ0
ZXN0IGNhbGxlciB3aXNoZXMgdG8gd2FpdCB1cG9uIGl0IGFmdGVyd2FyZHMsIGl0IG5lZWRzIHRv
Cj4gdGFrZSBhIHJlZmVyZW5jZSBmb3IgaXRzZWxmLgo+Cj4gU2lnbmVkLW9mZi1ieTogQ2hyaXMg
V2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Cj4gLS0tCj4gIC4uLi9kcm0vaTkxNS9n
ZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYyB8IDM4ICsrKysrKysrKysrKysrLS0tLS0K
PiAgMSBmaWxlIGNoYW5nZWQsIDI5IGluc2VydGlvbnMoKyksIDkgZGVsZXRpb25zKC0pCj4KPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9j
b250ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2Nv
bnRleHQuYwo+IGluZGV4IDlhNTA5YzE4YjdjNy4uMTZkZjgxNGYzZWZkIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0
LmMKPiBAQCAtNzMsMjUgKzczLDM0IEBAIHN0YXRpYyBpbnQgbGl2ZV9ub3Bfc3dpdGNoKHZvaWQg
KmFyZykKPiAgICAgICAgIH0KPgo+ICAgICAgICAgZm9yX2VhY2hfdWFiaV9lbmdpbmUoZW5naW5l
LCBpOTE1KSB7Cj4gLSAgICAgICAgICAgICAgIHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+ICsg
ICAgICAgICAgICAgICBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSA9IE5VTEw7Cj4gICAgICAgICAg
ICAgICAgIHVuc2lnbmVkIGxvbmcgZW5kX3RpbWUsIHByaW1lOwo+ICAgICAgICAgICAgICAgICBr
dGltZV90IHRpbWVzWzJdID0ge307Cj4KPiAgICAgICAgICAgICAgICAgdGltZXNbMF0gPSBrdGlt
ZV9nZXRfcmF3KCk7Cj4gICAgICAgICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBuY3R4OyBuKysp
IHsKPiAtICAgICAgICAgICAgICAgICAgICAgICBycSA9IGlndF9yZXF1ZXN0X2FsbG9jKGN0eFtu
XSwgZW5naW5lKTsKPiAtICAgICAgICAgICAgICAgICAgICAgICBpZiAoSVNfRVJSKHJxKSkgewo+
IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gUFRSX0VSUihycSk7Cj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGk5MTVfcmVxdWVzdCAqdGhpczsKPiArCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgdGhpcyA9IGlndF9yZXF1ZXN0X2FsbG9jKGN0eFtuXSwgZW5n
aW5lKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAoSVNfRVJSKHRoaXMpKSB7Cj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBQVFJfRVJSKHRoaXMpOwo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBvdXRfZmlsZTsKPiAgICAgICAgICAgICAg
ICAgICAgICAgICB9Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgaTkxNV9yZXF1ZXN0X2FkZChy
cSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJxKSB7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpOTE1X3JlcXVlc3RfYXdhaXRfZG1hX2ZlbmNlKHRoaXMsICZycS0+
ZmVuY2UpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaTkxNV9yZXF1ZXN0X3B1
dChycSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgfQo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIHJxID0gaTkxNV9yZXF1ZXN0X2dldCh0aGlzKTsKPiArICAgICAgICAgICAgICAgICAgICAg
ICBpOTE1X3JlcXVlc3RfYWRkKHRoaXMpOwo+ICAgICAgICAgICAgICAgICB9Cj4gICAgICAgICAg
ICAgICAgIGlmIChpOTE1X3JlcXVlc3Rfd2FpdChycSwgMCwgSFogLyA1KSA8IDApIHsKPiAgICAg
ICAgICAgICAgICAgICAgICAgICBwcl9lcnIoIkZhaWxlZCB0byBwb3B1bGF0ZWQgJWQgY29udGV4
dHNcbiIsIG5jdHgpOwo+ICAgICAgICAgICAgICAgICAgICAgICAgIGludGVsX2d0X3NldF93ZWRn
ZWQoJmk5MTUtPmd0KTsKPiArICAgICAgICAgICAgICAgICAgICAgICBpOTE1X3JlcXVlc3RfcHV0
KHJxKTsKPiAgICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSAtRUlPOwo+ICAgICAgICAgICAg
ICAgICAgICAgICAgIGdvdG8gb3V0X2ZpbGU7Cj4gICAgICAgICAgICAgICAgIH0KPiArICAgICAg
ICAgICAgICAgaTkxNV9yZXF1ZXN0X3B1dChycSk7Cj4KPiAgICAgICAgICAgICAgICAgdGltZXNb
MV0gPSBrdGltZV9nZXRfcmF3KCk7Cj4KPiBAQCAtMTA2LDEzICsxMTUsMjEgQEAgc3RhdGljIGlu
dCBsaXZlX25vcF9zd2l0Y2godm9pZCAqYXJnKQo+ICAgICAgICAgICAgICAgICBmb3JfZWFjaF9w
cmltZV9udW1iZXJfZnJvbShwcmltZSwgMiwgODE5Mikgewo+ICAgICAgICAgICAgICAgICAgICAg
ICAgIHRpbWVzWzFdID0ga3RpbWVfZ2V0X3JhdygpOwo+Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgcnEgPSBOVUxMOwo+ICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBw
cmltZTsgbisrKSB7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBycSA9IGlndF9y
ZXF1ZXN0X2FsbG9jKGN0eFtuICUgbmN0eF0sIGVuZ2luZSk7Cj4gLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBpZiAoSVNfRVJSKHJxKSkgewo+IC0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBlcnIgPSBQVFJfRVJSKHJxKTsKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHN0cnVjdCBpOTE1X3JlcXVlc3QgKnRoaXM7Cj4gKwo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdGhpcyA9IGlndF9yZXF1ZXN0X2FsbG9jKGN0eFtuICUgbmN0
eF0sIGVuZ2luZSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoSVNfRVJS
KHRoaXMpKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9
IFBUUl9FUlIodGhpcyk7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGdvdG8gb3V0X2ZpbGU7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Cj4KPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzKSB7IC8qIEZvcmNlIHN1Ym1p
c3Npb24gb3JkZXIgKi8KCmlmIChycSkgPwoKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaTkxNV9yZXF1ZXN0X2F3YWl0X2RtYV9mZW5jZSh0aGlzLCAmcnEtPmZlbmNl
KTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaTkxNV9yZXF1ZXN0
X3B1dChycSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Cj4gKwo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoKPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAqIFRoaXMgc3BhY2UgaXMgbGVmdCBpbnRlbnRpb25hbGx5IGJsYW5rLgo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKPiBAQCAtMTI3LDE0ICsxNDQsMTcgQEAgc3Rh
dGljIGludCBsaXZlX25vcF9zd2l0Y2godm9pZCAqYXJnKQo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICogZm9yIGxhdGVuY3kuCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgKi8KPgo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaTkxNV9yZXF1ZXN0
X2FkZChycSk7CgogcnEgPSBpOTE1X3JlcXVlc3RfZ2V0KHRoaXMpID8KX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJ
bnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

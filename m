Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 73F7ED02F4
	for <lists+intel-gfx@lfdr.de>; Tue,  8 Oct 2019 23:40:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2EE79899E9;
	Tue,  8 Oct 2019 21:40:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1CDE0899E9
 for <intel-gfx@lists.freedesktop.org>; Tue,  8 Oct 2019 21:40:27 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18770561-1500050 
 for multiple; Tue, 08 Oct 2019 22:40:24 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  8 Oct 2019 22:40:20 +0100
Message-Id: <20191008214021.5120-9-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191008214021.5120-1-chris@chris-wilson.co.uk>
References: <20191008214021.5120-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 8/9] drm/i915: add a new perf configuration
 execbuf parameter
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogTGlvbmVsIExhbmR3ZXJsaW4gPGxpb25lbC5nLmxhbmR3ZXJsaW5AaW50ZWwuY29tPgoK
V2Ugd2FudCB0aGUgYWJpbGl0eSB0byBkaXNwYXRjaCBhIHNldCBvZiBjb21tYW5kIGJ1ZmZlciB0
byB0aGUKaGFyZHdhcmUsIGVhY2ggd2l0aCBhIGRpZmZlcmVudCBPQSBjb25maWd1cmF0aW9uLiBU
byBhY2hpZXZlIHRoaXMsIHdlCnJldXNlIGEgY291cGxlIG9mIGZpZWxkcyBmcm9tIHRoZSBleGVj
YnVmMiBzdHJ1Y3QgKEkgQ0FOIEhBWgpleGVjYnVmMz8pIHRvIG5vdGlmeSB3aGF0IE9BIGNvbmZp
Z3VyYXRpb24gc2hvdWxkIGJlIHVzZWQgZm9yIGEgYmF0Y2gKYnVmZmVyLiBUaGlzIHJlcXVpcmVz
IHRoZSBwcm9jZXNzIG1ha2luZyB0aGUgZXhlY2J1ZiB3aXRoIHRoaXMgZmxhZyB0bwphbHNvIG93
biB0aGUgcGVyZiBmZCBhdCB0aGUgdGltZSBvZiBleGVjYnVmLgoKdjI6IEFkZCBhIGVtaXRfb2Ff
Y29uZmlnKCkgdmZ1bmMgaW4gdGhlIGludGVsX2VuZ2luZV9jcyAoQ2hyaXMpCiAgICBNb3ZlIG9h
X2NvbmZpZyB2bWEgdG8gYWN0aXZlIChDaHJpcykKCnYzOiBEb24ndCBkcm9wIHRoZSBsb2NrIGZv
ciBlbmdpbmUgbG9va3VwIChDaHJpcykKICAgIE1vdmUgT0EgY29uZmlnIHZtYSB0byBhY3RpdmUg
YmVmb3JlIHdyaXRpbmcgdGhlIHJpbmdidWZmZXIgKENocmlzKQoKdjQ6IFJldXNlIGk5MTVfdXNl
cl9leHRlbnNpb25fZm4KICAgIFNlcmlhbGl6ZSByZXF1ZXN0cyB3aXRoIE9BIGNvbmZpZyB1cGRh
dGVzCgp2NTogQ2hlY2sgdGhhdCB0aGUgY2hhaW5lZCBleHRlbnNpb24gaXMgb25seSBwcmVzZW50
IG9uY2UgKENocmlzKQogICAgVW5waW4gb2Ffdm1hIGluIG1haW4gcGF0aCAoQ2hyaXMpCgp2Njog
VXNlIEJJVF9VTEwgKENocmlzKQoKdjc6IEhvbGQgZHJtLnN0cnVjdF9tdXRleCB3aGVuIHNlcmlh
bGl6aW5nIHRoZSByZXF1ZXN0IHdpdGggT0EgY29uZmlnIChDaHJpcykKCnY4OiBSZW1vdmUgYWN0
aXZlIHJlcXVlc3QgZnJvbSBlbmdpbmUgKExpb25lbCkKCnY5OiBNb3ZlIGZldGNoaW5nIE9BIGNv
bmZpZ3VyYXRpb24gcGFzcyBlbmdpbmUgcGlubmluZyAoTGlvbmVsKQogICAgTG9jayBWTUEgYmVm
b3JlIG1vdmluZyB0byBhY3RpdmUgKENocmlzKQoKdjEwOiBGaXggbGVhayBvbiBwZXJmX2ZkIChM
aW9uZWwpCgpTaWduZWQtb2ZmLWJ5OiBMaW9uZWwgTGFuZHdlcmxpbiA8bGlvbmVsLmcubGFuZHdl
cmxpbkBpbnRlbC5jb20+Ci0tLQogLi4uL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1
ZmZlci5jICAgIHwgMTI0ICsrKysrKysrKysrKysrKysrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZXRwYXJhbS5jICAgICAgICAgIHwgICA0ICsKIGluY2x1ZGUvdWFwaS9kcm0vaTkxNV9k
cm0uaCAgICAgICAgICAgICAgICAgICB8ICA0NCArKysrKystCiAzIGZpbGVzIGNoYW5nZWQsIDE2
NSBpbnNlcnRpb25zKCspLCA3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCmluZGV4IDY0ODIxNDFjY2ExYS4uYmRkYzM1N2U2
M2JmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1
ZmZlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVy
LmMKQEAgLTI0LDYgKzI0LDcgQEAKICNpbmNsdWRlICJpOTE1X2dlbV9jbGZsdXNoLmgiCiAjaW5j
bHVkZSAiaTkxNV9nZW1fY29udGV4dC5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX2lvY3Rscy5oIgor
I2luY2x1ZGUgImk5MTVfcGVyZi5oIgogI2luY2x1ZGUgImk5MTVfdHJhY2UuaCIKICNpbmNsdWRl
ICJpOTE1X3VzZXJfZXh0ZW5zaW9ucy5oIgogCkBAIC00Nyw2ICs0OCw4IEBAIGVudW0gewogI2Rl
ZmluZSBfX0VYRUNfSU5URVJOQUxfRkxBR1MJKH4wdSA8PCAzMCkKICNkZWZpbmUgVVBEQVRFCQkJ
UElOX09GRlNFVF9GSVhFRAogCisjZGVmaW5lIEVYVFJBX1ZNQSAyCisKICNkZWZpbmUgQkFUQ0hf
T0ZGU0VUX0JJQVMgKDI1NioxMDI0KQogCiAjZGVmaW5lIF9fSTkxNV9FWEVDX0lMTEVHQUxfRkxB
R1MgXApAQCAtMjczLDYgKzI3NiwxMiBAQCBzdHJ1Y3QgaTkxNV9leGVjYnVmZmVyIHsKIAkgKi8K
IAlpbnQgbHV0X3NpemU7CiAJc3RydWN0IGhsaXN0X2hlYWQgKmJ1Y2tldHM7IC8qKiBodCBmb3Ig
cmVsb2NhdGlvbiBoYW5kbGVzICovCisKKwlzdHJ1Y3QgeyAvKiBIVyBjb25maWd1cmF0aW9uIGZv
ciBPQS4gKi8KKwkJc3RydWN0IGZpbGUgKmZpbGU7CisJCXN0cnVjdCBpOTE1X29hX2NvbmZpZyAq
Y29uZmlnOworCQlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKKwl9IG9hOwogfTsKIAogI2RlZmluZSBl
eGVjX2VudHJ5KEVCLCBWTUEpICgmKEVCKS0+ZXhlY1soVk1BKS0+ZXhlY19mbGFncyAtIChFQikt
PmZsYWdzXSkKQEAgLTg4OSw2ICs4OTgsMTIgQEAgc3RhdGljIHZvaWQgZWJfZGVzdHJveShjb25z
dCBzdHJ1Y3QgaTkxNV9leGVjYnVmZmVyICplYikKIAogCWlmIChlYi0+bHV0X3NpemUgPiAwKQog
CQlrZnJlZShlYi0+YnVja2V0cyk7CisKKwlpZiAoZWItPm9hLmNvbmZpZykgeworCQlpOTE1X3Zt
YV9wdXQoZWItPm9hLnZtYSk7CisJCWk5MTVfb2FfY29uZmlnX3B1dChlYi0+b2EuY29uZmlnKTsK
KwkJZnB1dChlYi0+b2EuZmlsZSk7CisJfQogfQogCiBzdGF0aWMgaW5saW5lIHU2NApAQCAtMjA0
NSw2ICsyMDYwLDU4IEBAIGFkZF90b19jbGllbnQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsIHN0
cnVjdCBkcm1fZmlsZSAqZmlsZSkKIAlzcGluX3VubG9jaygmZmlsZV9wcml2LT5tbS5sb2NrKTsK
IH0KIAorc3RhdGljIGludCBlYl9vYV9jb25maWcoc3RydWN0IGk5MTVfZXhlY2J1ZmZlciAqZWIp
Cit7CisJc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbTsKKwlzdHJ1Y3QgaTkxNV9wZXJm
ICpwZXJmOworCWludCBlcnI7CisKKwlpZiAoIWViLT5vYS5jb25maWcpCisJCXJldHVybiAwOwor
CisJc3RyZWFtID0gZWItPm9hLmZpbGUtPnByaXZhdGVfZGF0YTsKKwlwZXJmID0gc3RyZWFtLT5w
ZXJmOworCisJZXJyID0gbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKCZwZXJmLT5sb2NrKTsKKwlp
ZiAoZXJyKQorCQlyZXR1cm4gZXJyOworCisJaWYgKHN0cmVhbSAhPSBwZXJmLT5leGNsdXNpdmVf
c3RyZWFtKSB7CisJCWVyciA9IC1FSU5WQUw7CisJCWdvdG8gb3V0OworCX0KKworCWlmIChzdHJl
YW0tPmVuZ2luZSAhPSBlYi0+ZW5naW5lKSB7IC8qIEZJWE1FOiB2aXJ0dWFsIHNlbGVjdGlvbiAq
LworCQllcnIgPSAtRUlOVkFMOworCQlnb3RvIG91dDsKKwl9CisKKwllcnIgPSBpOTE1X2FjdGl2
ZV9mZW5jZV9zZXQoJnBlcmYtPmFjdGl2ZV9jb25maWcsIGViLT5yZXF1ZXN0KTsKKwlpZiAoZXJy
KQorCQlnb3RvIG91dDsKKworCS8qCisJICogSWYgdGhlIGNvbmZpZyBoYXNuJ3QgY2hhbmdlZCwg
c2tpcCByZWNvbmZpZ3VyaW5nIHRoZSBIVyAodGhpcyBpcworCSAqIHN1YmplY3QgdG8gYSBkZWxh
eSB3ZSB3YW50IHRvIGF2b2lkIGhhcyBtdWNoIGFzIHBvc3NpYmxlKS4KKwkgKgorCSAqIEFmdGVy
IGEgR1BVIHJlc2V0LCB0aGUgb2EgY29uZmlnIHdpbGwgbm90IGJlIHJlY292ZXJlZC4KKwkgKi8K
KwlpZiAoZWItPm9hLmNvbmZpZyA9PSBzdHJlYW0tPm9hX2NvbmZpZykKKwkJZ290byBvdXQ7CisK
KwllcnIgPSBlYi0+ZW5naW5lLT5lbWl0X2JiX3N0YXJ0KGViLT5yZXF1ZXN0LAorCQkJCQllYi0+
b2Eudm1hLT5ub2RlLnN0YXJ0LCAwLAorCQkJCQlJOTE1X0RJU1BBVENIX1NFQ1VSRSk7IC8qIGdn
dHQgKi8KKwlpZiAoZXJyKQorCQlnb3RvIG91dDsKKworCXN3YXAoZWItPm9hLmNvbmZpZywgc3Ry
ZWFtLT5vYV9jb25maWcpOworCitvdXQ6CisJbXV0ZXhfdW5sb2NrKCZwZXJmLT5sb2NrKTsKKwly
ZXR1cm4gZXJyOworfQorCiBzdGF0aWMgaW50IGViX3N1Ym1pdChzdHJ1Y3QgaTkxNV9leGVjYnVm
ZmVyICplYikKIHsKIAlpbnQgZXJyOwpAQCAtMjA3MSw2ICsyMTM4LDEwIEBAIHN0YXRpYyBpbnQg
ZWJfc3VibWl0KHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgKmViKQogCQkJcmV0dXJuIGVycjsKIAl9
CiAKKwllcnIgPSBlYl9vYV9jb25maWcoZWIpOworCWlmIChlcnIpCisJCXJldHVybiBlcnI7CisK
IAllcnIgPSBlYi0+ZW5naW5lLT5lbWl0X2JiX3N0YXJ0KGViLT5yZXF1ZXN0LAogCQkJCQllYi0+
YmF0Y2gtPm5vZGUuc3RhcnQgKwogCQkJCQllYi0+YmF0Y2hfc3RhcnRfb2Zmc2V0LApAQCAtMjQy
MSw3ICsyNDkyLDM5IEBAIHNpZ25hbF9mZW5jZV9hcnJheShzdHJ1Y3QgaTkxNV9leGVjYnVmZmVy
ICplYiwKIAl9CiB9CiAKK3N0YXRpYyBpbnQgcGFyc2VfcGVyZl9jb25maWcoc3RydWN0IGk5MTVf
dXNlcl9leHRlbnNpb24gX191c2VyICpleHQsIHZvaWQgKmRhdGEpCit7CisJc3RydWN0IGRybV9p
OTE1X2dlbV9leGVjYnVmZmVyX2V4dF9wZXJmIHBlcmZfY29uZmlnOworCXN0cnVjdCBpOTE1X2V4
ZWNidWZmZXIgKmViID0gZGF0YTsKKwlzdHJ1Y3QgZmlsZSAqZmlsZTsKKwlpbnQgZXJyOworCisJ
aWYgKGViLT5vYS5jb25maWcpCisJCXJldHVybiAtRUlOVkFMOyAvKiBleGNsdXNpdmUgKi8KKwor
CWlmIChjb3B5X2Zyb21fdXNlcigmcGVyZl9jb25maWcsIGV4dCwgc2l6ZW9mKHBlcmZfY29uZmln
KSkpCisJCXJldHVybiAtRUZBVUxUOworCisJZmlsZSA9IGZnZXQocGVyZl9jb25maWcucGVyZl9m
ZCk7CisJaWYgKCFmaWxlKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWVyciA9IGk5MTVfcGVyZl9z
dHJlYW1fZ2V0X29hX2NvbmZpZyhmaWxlLT5wcml2YXRlX2RhdGEsCisJCQkJCSAgICAgcGVyZl9j
b25maWcub2FfY29uZmlnLAorCQkJCQkgICAgICZlYi0+b2EuY29uZmlnLCAmZWItPm9hLnZtYSk7
CisJaWYgKGVycikKKwkJZ290byBlcnJfZmlsZTsKKworCWViLT5vYS5maWxlID0gZmlsZTsKKwly
ZXR1cm4gMDsKKworZXJyX2ZpbGU6CisJZnB1dChmaWxlKTsKKwlyZXR1cm4gZXJyOworfQorCiBz
dGF0aWMgY29uc3QgaTkxNV91c2VyX2V4dGVuc2lvbl9mbiBleGVjYnVmX2V4dGVuc2lvbnNbXSA9
IHsKKwlbSTkxNV9FWEVDX0VYVF9QRVJGX0NPTkZJR10gPSBwYXJzZV9wZXJmX2NvbmZpZywKIH07
CiAKIHN0YXRpYyBpbnQKQEAgLTI0NzEsMTAgKzI1NzQsMTIgQEAgaTkxNV9nZW1fZG9fZXhlY2J1
ZmZlcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCWlmIChEQkdfRk9SQ0VfUkVMT0MgfHwgIShh
cmdzLT5mbGFncyAmIEk5MTVfRVhFQ19OT19SRUxPQykpCiAJCWFyZ3MtPmZsYWdzIHw9IF9fRVhF
Q19IQVNfUkVMT0M7CiAKKwllYi5vYS5jb25maWcgPSBOVUxMOworCiAJZWIuZXhlYyA9IGV4ZWM7
Ci0JZWIudm1hID0gKHN0cnVjdCBpOTE1X3ZtYSAqKikoZXhlYyArIGFyZ3MtPmJ1ZmZlcl9jb3Vu
dCArIDEpOworCWViLnZtYSA9IChzdHJ1Y3QgaTkxNV92bWEgKiopKGV4ZWMgKyBhcmdzLT5idWZm
ZXJfY291bnQgKyBFWFRSQV9WTUEpOwogCWViLnZtYVswXSA9IE5VTEw7Ci0JZWIuZmxhZ3MgPSAo
dW5zaWduZWQgaW50ICopKGViLnZtYSArIGFyZ3MtPmJ1ZmZlcl9jb3VudCArIDEpOworCWViLmZs
YWdzID0gKHVuc2lnbmVkIGludCAqKShlYi52bWEgKyBhcmdzLT5idWZmZXJfY291bnQgKyBFWFRS
QV9WTUEpOwogCiAJZWIuaW52YWxpZF9mbGFncyA9IF9fRVhFQ19PQkpFQ1RfVU5LTk9XTl9GTEFH
UzsKIAlyZWxvY19jYWNoZV9pbml0KCZlYi5yZWxvY19jYWNoZSwgZWIuaTkxNSk7CkBAIC0yNTky
LDYgKzI2OTcsMTcgQEAgaTkxNV9nZW1fZG9fZXhlY2J1ZmZlcihzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LAogCQl9CiAJfQogCisJaWYgKGViLm9hLmNvbmZpZykgeworCQllcnIgPSBpOTE1X3ZtYV9w
aW4oZWIub2Eudm1hLCAwLCAwLCBQSU5fR0xPQkFMIHwgUElOX0hJR0gpOworCQlpZiAoZXJyKQor
CQkJZ290byBlcnJfdm1hOworCisJCWViLnZtYVtlYi5idWZmZXJfY291bnRdID0gZWIub2Eudm1h
OworCQllYi5mbGFnc1tlYi5idWZmZXJfY291bnRdID0gX19FWEVDX09CSkVDVF9IQVNfUElOOwor
CQllYi5vYS52bWEtPmV4ZWNfZmxhZ3MgPSAmZWIuZmxhZ3NbZWIuYnVmZmVyX2NvdW50XTsKKwkJ
ZWIuYnVmZmVyX2NvdW50Kys7CisJfQorCiAJaWYgKGViLmJhdGNoX2xlbiA9PSAwKQogCQllYi5i
YXRjaF9sZW4gPSBlYi5iYXRjaC0+c2l6ZSAtIGViLmJhdGNoX3N0YXJ0X29mZnNldDsKIApAQCAt
Mjc3Miw3ICsyODg4LDcgQEAgaTkxNV9nZW1fZXhlY2J1ZmZlcl9pb2N0bChzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2LCB2b2lkICpkYXRhLAogCS8qIENvcHkgaW4gdGhlIGV4ZWMgbGlzdCBmcm9tIHVz
ZXJsYW5kICovCiAJZXhlY19saXN0ID0ga3ZtYWxsb2NfYXJyYXkoY291bnQsIHNpemVvZigqZXhl
Y19saXN0KSwKIAkJCQkgICBfX0dGUF9OT1dBUk4gfCBHRlBfS0VSTkVMKTsKLQlleGVjMl9saXN0
ID0ga3ZtYWxsb2NfYXJyYXkoY291bnQgKyAxLCBlYl9lbGVtZW50X3NpemUoKSwKKwlleGVjMl9s
aXN0ID0ga3ZtYWxsb2NfYXJyYXkoY291bnQgKyBFWFRSQV9WTUEsIGViX2VsZW1lbnRfc2l6ZSgp
LAogCQkJCSAgICBfX0dGUF9OT1dBUk4gfCBHRlBfS0VSTkVMKTsKIAlpZiAoZXhlY19saXN0ID09
IE5VTEwgfHwgZXhlYzJfbGlzdCA9PSBOVUxMKSB7CiAJCURSTV9ERUJVRygiRmFpbGVkIHRvIGFs
bG9jYXRlIGV4ZWMgbGlzdCBmb3IgJWQgYnVmZmVyc1xuIiwKQEAgLTI4NDgsNyArMjk2NCw3IEBA
IGk5MTVfZ2VtX2V4ZWNidWZmZXIyX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQg
KmRhdGEsCiAJCXJldHVybiAtRUlOVkFMOwogCiAJLyogQWxsb2NhdGUgYW4gZXh0cmEgc2xvdCBm
b3IgdXNlIGJ5IHRoZSBjb21tYW5kIHBhcnNlciAqLwotCWV4ZWMyX2xpc3QgPSBrdm1hbGxvY19h
cnJheShjb3VudCArIDEsIGViX2VsZW1lbnRfc2l6ZSgpLAorCWV4ZWMyX2xpc3QgPSBrdm1hbGxv
Y19hcnJheShjb3VudCArIEVYVFJBX1ZNQSwgZWJfZWxlbWVudF9zaXplKCksCiAJCQkJICAgIF9f
R0ZQX05PV0FSTiB8IEdGUF9LRVJORUwpOwogCWlmIChleGVjMl9saXN0ID09IE5VTEwpIHsKIAkJ
RFJNX0RFQlVHKCJGYWlsZWQgdG8gYWxsb2NhdGUgZXhlYyBsaXN0IGZvciAlemQgYnVmZmVyc1xu
IiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYwppbmRleCBhZDMzZmJlOTBhMjguLjZh
ZDI5MGIxNGUxMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJh
bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYwpAQCAtMTYwLDYg
KzE2MCwxMCBAQCBpbnQgaTkxNV9nZXRwYXJhbV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LCB2b2lkICpkYXRhLAogCWNhc2UgSTkxNV9QQVJBTV9QRVJGX1JFVklTSU9OOgogCQl2YWx1ZSA9
IGk5MTVfcGVyZl9pb2N0bF92ZXJzaW9uKCk7CiAJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9I
QVNfRVhFQ19QRVJGX0NPTkZJRzoKKwkJLyogT2J2aW91c2x5IHJlcXVpcmVzIHBlcmYgc3VwcG9y
dC4gKi8KKwkJdmFsdWUgPSAhIWk5MTUtPnBlcmYuaTkxNTsKKwkJYnJlYWs7CiAJZGVmYXVsdDoK
IAkJRFJNX0RFQlVHKCJVbmtub3duIHBhcmFtZXRlciAlZFxuIiwgcGFyYW0tPnBhcmFtKTsKIAkJ
cmV0dXJuIC1FSU5WQUw7CmRpZmYgLS1naXQgYS9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgg
Yi9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgKaW5kZXggMDZjNWMxODcyNjRiLi4yY2U0OThl
NDk4YTIgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAorKysgYi9pbmNs
dWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgKQEAgLTYxOCw2ICs2MTgsMTYgQEAgdHlwZWRlZiBzdHJ1
Y3QgZHJtX2k5MTVfaXJxX3dhaXQgewogICovCiAjZGVmaW5lIEk5MTVfUEFSQU1fUEVSRl9SRVZJ
U0lPTgk1NAogCisvKgorICogUmVxdWVzdCBhbiBpOTE1L3BlcmYgcGVyZm9ybWFuY2UgY29uZmln
dXJhdGlvbiBjaGFuZ2UgYmVmb3JlIHJ1bm5pbmcgdGhlCisgKiBjb21tYW5kcyBnaXZlbiBpbiBh
biBleGVjYnVmLgorICoKKyAqIFBlcmZvcm1hbmNlIGNvbmZpZ3VyYXRpb24gSUQgYW5kIHRoZSBm
aWxlIGRlc2NyaXB0b3Igb2YgdGhlIGk5MTUgcGVyZgorICogc3RyZWFtIGFyZSBnaXZlbiB0aHJv
dWdoIGRybV9pOTE1X2dlbV9leGVjYnVmZmVyX2V4dF9wZXJmLiBTZWUKKyAqIEk5MTVfRVhFQ19V
U0VfRVhURU5TSU9OUy4KKyAqLworI2RlZmluZSBJOTE1X1BBUkFNX0hBU19FWEVDX1BFUkZfQ09O
RklHIDU1CisKIC8qIE11c3QgYmUga2VwdCBjb21wYWN0IC0tIG5vIGhvbGVzIGFuZCB3ZWxsIGRv
Y3VtZW50ZWQgKi8KIAogdHlwZWRlZiBzdHJ1Y3QgZHJtX2k5MTVfZ2V0cGFyYW0gewpAQCAtMTAx
NCw2ICsxMDI0LDI5IEBAIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19mZW5jZSB7CiAJX191MzIg
ZmxhZ3M7CiB9OwogCitzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXJfZXh0X3BlcmYgewor
CXN0cnVjdCBpOTE1X3VzZXJfZXh0ZW5zaW9uIGJhc2U7IC8qIC5uYW1lID0gSTkxNV9FWEVDX0VY
VF9QRVJGX0NPTkZJRyAqLworCisJLyoKKwkgKiBQZXJmb3JtYW5jZSBmaWxlIGRlc2NyaXB0b3Ig
cmV0dXJuZWQgYnkgRFJNX0lPQ1RMX0k5MTVfUEVSRl9PUEVOLgorCSAqIFRoaXMgaXMgdXNlZCB0
byBpZGVudGlmeSB0aGF0IHRoZSBhcHBsaWNhdGlvbiByZXF1ZXN0aW5nIGEgSFcKKwkgKiBwZXJm
b3JtYW5jZSBjb25maWd1cmF0aW9uIGNoYW5nZSBhY3R1YWxseSBoYXMgYSByaWdodCB0byBkbyBz
bworCSAqIGJlY2F1c2UgaXQgYWxzbyBoYXMgYWNjZXNzIHRoZSBpOTE1LXBlcmYgc3RyZWFtLgor
CSAqLworCV9fczMyIHBlcmZfZmQ7CisKKwkvKgorCSAqIFVudXNlZCBmb3Igbm93LiBNdXN0IGJl
IGNsZWFyZWQgdG8gemVyby4KKwkgKi8KKwlfX3UzMiBmbGFnczsKKworCS8qCisJICogT0EgY29u
ZmlndXJhdGlvbiBJRCB0byBzd2l0Y2ggdG8gYmVmb3JlIGV4ZWN1dGluZyB0aGUgY29tbWFuZHMK
KwkgKiBhc3NvY2lhdGVkIHRvIHRoZSBleGVjYnVmLgorCSAqLworCV9fdTY0IG9hX2NvbmZpZzsK
K307CisKIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcjIgewogCS8qKgogCSAqIExpc3Qg
b2YgZ2VtX2V4ZWNfb2JqZWN0MiBzdHJ1Y3RzCkBAIC0xMDM4LDkgKzEwNzEsMTMgQEAgc3RydWN0
IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiB7CiAJICoKIAkgKiBJZiBJOTE1X0VYRUNfVVNFX0VY
VEVOU0lPTlMgaXMgc2V0LCB0aGVuIHRoaXMgaXMgYSBwb2ludGVyIHRvIGEKIAkgKiBzaW5nbGUg
c3RydWN0IGRybV9pOTE1X2dlbV9iYXNlX2V4ZWNidWZmZXJfZXh0IGFuZCBudW1fY2xpcHJlY3Rz
IGlzCi0JICogMC4KKwkgKiAwLiBFeHRlbnNpb25zOgorCSAqICAgZHJtX2k5MTVfZ2VtX2V4ZWNi
dWZmZXJfZXh0X3BlcmYgKEk5MTVfRVhFQ19FWFRfUEVSRl9DT05GSUcpCiAJICovCiAJX191NjQg
Y2xpcHJlY3RzX3B0cjsKKyNkZWZpbmUgSTkxNV9FWEVDX0VYVF9QRVJGX0NPTkZJRyAwCisKKwlf
X3U2NCBmbGFnczsKICNkZWZpbmUgSTkxNV9FWEVDX1JJTkdfTUFTSyAgICAgICAgICAgICAgKDB4
M2YpCiAjZGVmaW5lIEk5MTVfRVhFQ19ERUZBVUxUICAgICAgICAgICAgICAgICgwPDwwKQogI2Rl
ZmluZSBJOTE1X0VYRUNfUkVOREVSICAgICAgICAgICAgICAgICAoMTw8MCkKQEAgLTEwNDgsNyAr
MTA4NSw4IEBAIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcjIgewogI2RlZmluZSBJOTE1
X0VYRUNfQkxUICAgICAgICAgICAgICAgICAgICAoMzw8MCkKICNkZWZpbmUgSTkxNV9FWEVDX1ZF
Qk9YICAgICAgICAgICAgICAgICAgKDQ8PDApCiAKLS8qIFVzZWQgZm9yIHN3aXRjaGluZyB0aGUg
Y29uc3RhbnRzIGFkZHJlc3NpbmcgbW9kZSBvbiBnZW40KyBSRU5ERVIgcmluZy4KKy8qCisgKiBV
c2VkIGZvciBzd2l0Y2hpbmcgdGhlIGNvbnN0YW50cyBhZGRyZXNzaW5nIG1vZGUgb24gZ2VuNCsg
UkVOREVSIHJpbmcuCiAgKiBHZW42KyBvbmx5IHN1cHBvcnRzIHJlbGF0aXZlIGFkZHJlc3Npbmcg
dG8gZHluYW1pYyBzdGF0ZSAoZGVmYXVsdCkgYW5kCiAgKiBhYnNvbHV0ZSBhZGRyZXNzaW5nLgog
ICoKQEAgLTEwNTgsNyArMTA5Niw3IEBAIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcjIg
ewogI2RlZmluZSBJOTE1X0VYRUNfQ09OU1RBTlRTX1JFTF9HRU5FUkFMICgwPDw2KSAvKiBkZWZh
dWx0ICovCiAjZGVmaW5lIEk5MTVfRVhFQ19DT05TVEFOVFNfQUJTT0xVVEUgCSgxPDw2KQogI2Rl
ZmluZSBJOTE1X0VYRUNfQ09OU1RBTlRTX1JFTF9TVVJGQUNFICgyPDw2KSAvKiBnZW40LzUgb25s
eSAqLwotCV9fdTY0IGZsYWdzOworCiAJX191NjQgcnN2ZDE7IC8qIG5vdyB1c2VkIGZvciBjb250
ZXh0IGluZm8gKi8KIAlfX3U2NCByc3ZkMjsKIH07Ci0tIAoyLjIzLjAKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QK
SW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

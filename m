Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B078D5807D
	for <lists+intel-gfx@lfdr.de>; Thu, 27 Jun 2019 12:35:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 20BE06E126;
	Thu, 27 Jun 2019 10:35:45 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 890DF6E126;
 Thu, 27 Jun 2019 10:35:43 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 17042069-1500050 for multiple; Thu, 27 Jun 2019 11:35:31 +0100
MIME-Version: 1.0
To: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
 igt-dev@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <20190627102019.9019-1-tvrtko.ursulin@linux.intel.com>
References: <20190627102019.9019-1-tvrtko.ursulin@linux.intel.com>
Message-ID: <156163172754.20851.9496452054329054119@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Thu, 27 Jun 2019 11:35:27 +0100
Subject: Re: [Intel-gfx] [PATCH i-g-t] tests/i915/gem_ctx_switch: Update
 with engine discovery
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBUdnJ0a28gVXJzdWxpbiAoMjAxOS0wNi0yNyAxMToyMDoxOSkKPiBkaWZmIC0tZ2l0
IGEvdGVzdHMvaTkxNS9nZW1fY3R4X3N3aXRjaC5jIGIvdGVzdHMvaTkxNS9nZW1fY3R4X3N3aXRj
aC5jCj4gaW5kZXggNjQ3OTExZDRjNDJlLi5kZTM5NzQ4MzQ0YjggMTAwNjQ0Cj4gLS0tIGEvdGVz
dHMvaTkxNS9nZW1fY3R4X3N3aXRjaC5jCj4gKysrIGIvdGVzdHMvaTkxNS9nZW1fY3R4X3N3aXRj
aC5jCj4gQEAgLTU1LDcgKzU1LDcgQEAgc3RhdGljIGRvdWJsZSBlbGFwc2VkKGNvbnN0IHN0cnVj
dCB0aW1lc3BlYyAqc3RhcnQsIGNvbnN0IHN0cnVjdCB0aW1lc3BlYyAqZW5kKQo+ICAKPiAgc3Rh
dGljIGludCBtZWFzdXJlX3FsZW4oaW50IGZkLAo+ICAgICAgICAgICAgICAgICAgICAgICAgIHN0
cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcjIgKmV4ZWNidWYsCj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgdW5zaWduZWQgaW50ICplbmdpbmUsIHVuc2lnbmVkIGludCBuZW5naW5lLAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfZGF0YSAqZW5n
aW5lcywKPiAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgdGltZW91dCkKPiAgewo+ICAgICAg
ICAgY29uc3Qgc3RydWN0IGRybV9pOTE1X2dlbV9leGVjX29iamVjdDIgKiBjb25zdCBvYmogPQo+
IEBAIC02MywxNSArNjMsMTcgQEAgc3RhdGljIGludCBtZWFzdXJlX3FsZW4oaW50IGZkLAo+ICAg
ICAgICAgdWludDMyX3QgY3R4WzY0XTsKPiAgICAgICAgIGludCBtaW4gPSBJTlRfTUFYLCBtYXgg
PSAwOwo+ICAKPiAtICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgQVJSQVlfU0laRShjdHgpOyBp
KyspCj4gKyAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEFSUkFZX1NJWkUoY3R4KTsgaSsrKSB7
Cj4gICAgICAgICAgICAgICAgIGN0eFtpXSA9IGdlbV9jb250ZXh0X2NyZWF0ZShmZCk7Cj4gKyAg
ICAgICAgICAgICAgIGdlbV9jb250ZXh0X3NldF9hbGxfZW5naW5lcyhmZCwgY3R4W2ldKTsKPiAr
ICAgICAgIH0KPiAgCj4gLSAgICAgICBmb3IgKHVuc2lnbmVkIGludCBuID0gMDsgbiA8IG5lbmdp
bmU7IG4rKykgewo+ICsgICAgICAgZm9yICh1bnNpZ25lZCBpbnQgbiA9IDA7IG4gPCBlbmdpbmVz
LT5uZW5naW5lczsgbisrKSB7Cj4gICAgICAgICAgICAgICAgIHVpbnQ2NF90IHNhdmVkID0gZXhl
Y2J1Zi0+ZmxhZ3M7Cj4gICAgICAgICAgICAgICAgIHN0cnVjdCB0aW1lc3BlYyB0diA9IHt9Owo+
ICAgICAgICAgICAgICAgICBpbnQgcTsKPiAgCj4gLSAgICAgICAgICAgICAgIGV4ZWNidWYtPmZs
YWdzIHw9IGVuZ2luZVtuXTsKPiArICAgICAgICAgICAgICAgZXhlY2J1Zi0+ZmxhZ3MgfD0gZW5n
aW5lcy0+ZW5naW5lc1tuXS5mbGFnczsKPiAgCj4gICAgICAgICAgICAgICAgIGZvciAoaW50IGkg
PSAwOyBpIDwgQVJSQVlfU0laRShjdHgpOyBpKyspIHsKPiAgICAgICAgICAgICAgICAgICAgICAg
ICBleGVjYnVmLT5yc3ZkMSA9IGN0eFtpXTsKPiBAQCAtOTAsNyArOTIsOCBAQCBzdGF0aWMgaW50
IG1lYXN1cmVfcWxlbihpbnQgZmQsCj4gICAgICAgICAgICAgICAgICAqIEJlIGNvbnNlcnZhdGl2
ZSBhbmQgYWltIG5vdCB0byBvdmVyc2hvb3QgdGltZW91dCwgc28gc2NhbGUKPiAgICAgICAgICAg
ICAgICAgICogZG93biBieSA4IGZvciBob3BlZnVsbHkgYSBtYXggb2YgMTIuNSUgZXJyb3IuCj4g
ICAgICAgICAgICAgICAgICAqLwo+IC0gICAgICAgICAgICAgICBxID0gQVJSQVlfU0laRShjdHgp
ICogdGltZW91dCAqIDFlOSAvIGlndF9uc2VjX2VsYXBzZWQoJnR2KSAvIDggKyAxOwo+ICsgICAg
ICAgICAgICAgICBxID0gQVJSQVlfU0laRShjdHgpICogdGltZW91dCAqIDFlOSAvIGlndF9uc2Vj
X2VsYXBzZWQoJnR2KSAvCj4gKyAgICAgICAgICAgICAgICAgICA4ICsgMTsKPiAgICAgICAgICAg
ICAgICAgaWYgKHEgPCBtaW4pCj4gICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gcTsKPiAg
ICAgICAgICAgICAgICAgaWYgKHEgPiBtYXgpCj4gQEAgLTEwNyw3ICsxMTAsNyBAQCBzdGF0aWMg
aW50IG1lYXN1cmVfcWxlbihpbnQgZmQsCj4gIH0KPiAgCj4gIHN0YXRpYyB2b2lkIHNpbmdsZShp
bnQgZmQsIHVpbnQzMl90IGhhbmRsZSwKPiAtICAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0
IGludGVsX2V4ZWN1dGlvbl9lbmdpbmUgKmUsCj4gKyAgICAgICAgICAgICAgICAgIGNvbnN0IHN0
cnVjdCBpbnRlbF9leGVjdXRpb25fZW5naW5lMiAqZTIsCj4gICAgICAgICAgICAgICAgICAgIHVu
c2lnbmVkIGZsYWdzLAo+ICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnQgbmNwdXMsCj4gICAg
ICAgICAgICAgICAgICAgIGludCB0aW1lb3V0KQo+IEBAIC0xMjUsMTMgKzEyOCwxNCBAQCBzdGF0
aWMgdm9pZCBzaW5nbGUoaW50IGZkLCB1aW50MzJfdCBoYW5kbGUsCj4gICAgICAgICBzaGFyZWQg
PSBtbWFwKE5VTEwsIDQwOTYsIFBST1RfV1JJVEUsIE1BUF9TSEFSRUQgfCBNQVBfQU5PTiwgLTEs
IDApOwo+ICAgICAgICAgaWd0X2Fzc2VydChzaGFyZWQgIT0gTUFQX0ZBSUxFRCk7Cj4gIAo+IC0g
ICAgICAgZ2VtX3JlcXVpcmVfcmluZyhmZCwgZS0+ZXhlY19pZCB8IGUtPmZsYWdzKTsKPiAtCj4g
ICAgICAgICBmb3IgKG4gPSAwOyBuIDwgNjQ7IG4rKykgewo+ICAgICAgICAgICAgICAgICBpZiAo
ZmxhZ3MgJiBRVUVVRSkKPiAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0c1tuXSA9IGdl
bV9xdWV1ZV9jcmVhdGUoZmQpOwo+ICAgICAgICAgICAgICAgICBlbHNlCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgY29udGV4dHNbbl0gPSBnZW1fY29udGV4dF9jcmVhdGUoZmQpOwo+ICsKPiAr
ICAgICAgICAgICAgICAgaWYgKGdlbV9jb250ZXh0X2hhc19lbmdpbmVfbWFwKGZkLCAwKSkKPiAr
ICAgICAgICAgICAgICAgICAgICAgICBnZW1fY29udGV4dF9zZXRfYWxsX2VuZ2luZXMoZmQsIGNv
bnRleHRzW25dKTsKClRoYXQgd2FzIGEgbW9tZW50IG9mIGRvdWJ0IG9uIGhvdyB3ZWxsIHNldHRp
bmcgZW5naW5lcyBvbiBhICJxdWV1ZSIKd29ya2VkIDopCgo+ICAgICAgICAgfQo+ICAKPiAgICAg
ICAgIG1lbXNldCgmb2JqLCAwLCBzaXplb2Yob2JqKSk7Cj4gQEAgLTE1MiwxMiArMTU2LDEyIEBA
IHN0YXRpYyB2b2lkIHNpbmdsZShpbnQgZmQsIHVpbnQzMl90IGhhbmRsZSwKPiAgICAgICAgIGV4
ZWNidWYuYnVmZmVyc19wdHIgPSB0b191c2VyX3BvaW50ZXIoJm9iaik7Cj4gICAgICAgICBleGVj
YnVmLmJ1ZmZlcl9jb3VudCA9IDE7Cj4gICAgICAgICBleGVjYnVmLnJzdmQxID0gY29udGV4dHNb
MF07Cj4gLSAgICAgICBleGVjYnVmLmZsYWdzID0gZS0+ZXhlY19pZCB8IGUtPmZsYWdzOwo+ICsg
ICAgICAgZXhlY2J1Zi5mbGFncyA9IGUyLT5mbGFnczsKPiAgICAgICAgIGV4ZWNidWYuZmxhZ3Mg
fD0gTE9DQUxfSTkxNV9FWEVDX0hBTkRMRV9MVVQ7Cj4gICAgICAgICBleGVjYnVmLmZsYWdzIHw9
IExPQ0FMX0k5MTVfRVhFQ19OT19SRUxPQzsKPiAgICAgICAgIGlndF9yZXF1aXJlKF9fZ2VtX2V4
ZWNidWYoZmQsICZleGVjYnVmKSA9PSAwKTsKPiAgICAgICAgIGlmIChfX2dlbV9leGVjYnVmKGZk
LCAmZXhlY2J1ZikpIHsKPiAtICAgICAgICAgICAgICAgZXhlY2J1Zi5mbGFncyA9IGUtPmV4ZWNf
aWQgfCBlLT5mbGFnczsKPiArICAgICAgICAgICAgICAgZXhlY2J1Zi5mbGFncyA9IGUyLT5mbGFn
czsKPiAgICAgICAgICAgICAgICAgcmVsb2MudGFyZ2V0X2hhbmRsZSA9IG9iai5oYW5kbGU7Cj4g
ICAgICAgICAgICAgICAgIGdlbV9leGVjYnVmKGZkLCAmZXhlY2J1Zik7Cj4gICAgICAgICB9Cj4g
QEAgLTE5MCw3ICsxOTQsOCBAQCBzdGF0aWMgdm9pZCBzaW5nbGUoaW50IGZkLCB1aW50MzJfdCBo
YW5kbGUsCj4gICAgICAgICAgICAgICAgIGNsb2NrX2dldHRpbWUoQ0xPQ0tfTU9OT1RPTklDLCAm
bm93KTsKPiAgCj4gICAgICAgICAgICAgICAgIGlndF9pbmZvKCJbJWRdICVzOiAlJ3UgY3ljbGVz
OiAlLjNmdXMlc1xuIiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQsIGUtPm5hbWUs
IGNvdW50LCBlbGFwc2VkKCZzdGFydCwgJm5vdykqMWU2IC8gY291bnQsCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgIGNoaWxkLCBlMi0+bmFtZSwgY291bnQsCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgIGVsYXBzZWQoJnN0YXJ0LCAmbm93KSAqIDFlNiAvIGNvdW50LAo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICBmbGFncyAmIElOVEVSUlVQVElCTEUgPyAiIChpbnRlcnJ1cHRpYmxlKSIg
OiAiIik7Cj4gIAo+ICAgICAgICAgICAgICAgICBzaGFyZWRbY2hpbGRdLmVsYXBzZWQgPSBlbGFw
c2VkKCZzdGFydCwgJm5vdyk7Cj4gQEAgLTIwOSw3ICsyMTQsNyBAQCBzdGF0aWMgdm9pZCBzaW5n
bGUoaW50IGZkLCB1aW50MzJfdCBoYW5kbGUsCj4gICAgICAgICAgICAgICAgIH0KPiAgCj4gICAg
ICAgICAgICAgICAgIGlndF9pbmZvKCJUb3RhbCAlczogJSdsdSBjeWNsZXM6ICUuM2Z1cyVzXG4i
LAo+IC0gICAgICAgICAgICAgICAgICAgICAgICBlLT5uYW1lLCB0b3RhbCwgbWF4KjFlNiAvIHRv
dGFsLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICBlMi0+bmFtZSwgdG90YWwsIG1heCoxZTYg
LyB0b3RhbCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3MgJiBJTlRFUlJVUFRJQkxF
ID8gIiAoaW50ZXJydXB0aWJsZSkiIDogIiIpOwo+ICAgICAgICAgfQo+ICAKPiBAQCAtMjIzLDI1
ICsyMjgsMjAgQEAgc3RhdGljIHZvaWQgYWxsKGludCBmZCwgdWludDMyX3QgaGFuZGxlLCB1bnNp
Z25lZCBmbGFncywgaW50IHRpbWVvdXQpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBkcm1faTkxNV9n
ZW1fZXhlY2J1ZmZlcjIgZXhlY2J1ZjsKPiAgICAgICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhl
Y19vYmplY3QyIG9ialsyXTsKPiAtICAgICAgIHVuc2lnbmVkIGludCBlbmdpbmVbMTZdLCBlOwo+
IC0gICAgICAgY29uc3QgY2hhciAqbmFtZVsxNl07Cj4gKyAgICAgICBzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2RhdGEgZW5naW5lcyA9IHsgfTsKPiAgICAgICAgIHVpbnQzMl90IGNvbnRleHRzWzY1XTsK
PiAtICAgICAgIHVuc2lnbmVkIGludCBuZW5naW5lOwo+ICAgICAgICAgaW50IG4sIHFsZW47Cj4g
IAo+IC0gICAgICAgbmVuZ2luZSA9IDA7Cj4gLSAgICAgICBmb3JfZWFjaF9waHlzaWNhbF9lbmdp
bmUoZmQsIGUpIHsKPiAtICAgICAgICAgICAgICAgZW5naW5lW25lbmdpbmVdID0gZTsKPiAtICAg
ICAgICAgICAgICAgbmFtZVtuZW5naW5lXSA9IGVfXy0+bmFtZTsKPiAtICAgICAgICAgICAgICAg
bmVuZ2luZSsrOwo+IC0gICAgICAgfQo+IC0gICAgICAgaWd0X3JlcXVpcmUobmVuZ2luZSk7Cj4g
KyAgICAgICBlbmdpbmVzID0gaW50ZWxfaW5pdF9lbmdpbmVfbGlzdChmZCwgMCk7Cj4gKyAgICAg
ICBpZ3RfcmVxdWlyZShlbmdpbmVzLm5lbmdpbmVzKTsKPiAgCj4gICAgICAgICBmb3IgKG4gPSAw
OyBuIDwgQVJSQVlfU0laRShjb250ZXh0cyk7IG4rKykgewo+ICAgICAgICAgICAgICAgICBpZiAo
ZmxhZ3MgJiBRVUVVRSkKPiAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0c1tuXSA9IGdl
bV9xdWV1ZV9jcmVhdGUoZmQpOwo+ICAgICAgICAgICAgICAgICBlbHNlCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgY29udGV4dHNbbl0gPSBnZW1fY29udGV4dF9jcmVhdGUoZmQpOwo+ICsKPiAr
ICAgICAgICAgICAgICAgZ2VtX2NvbnRleHRfc2V0X2FsbF9lbmdpbmVzKGZkLCBjb250ZXh0c1tu
XSk7Cj4gICAgICAgICB9Cj4gIAo+ICAgICAgICAgbWVtc2V0KG9iaiwgMCwgc2l6ZW9mKG9iaikp
Owo+IEBAIC0yNTYsNyArMjU2LDcgQEAgc3RhdGljIHZvaWQgYWxsKGludCBmZCwgdWludDMyX3Qg
aGFuZGxlLCB1bnNpZ25lZCBmbGFncywgaW50IHRpbWVvdXQpCj4gICAgICAgICBpZ3RfcmVxdWly
ZShfX2dlbV9leGVjYnVmKGZkLCAmZXhlY2J1ZikgPT0gMCk7Cj4gICAgICAgICBnZW1fc3luYyhm
ZCwgaGFuZGxlKTsKPiAgCj4gLSAgICAgICBxbGVuID0gbWVhc3VyZV9xbGVuKGZkLCAmZXhlY2J1
ZiwgZW5naW5lLCBuZW5naW5lLCB0aW1lb3V0KTsKPiArICAgICAgIHFsZW4gPSBtZWFzdXJlX3Fs
ZW4oZmQsICZleGVjYnVmLCAmZW5naW5lcywgdGltZW91dCk7Cj4gICAgICAgICBpZ3RfaW5mbygi
VXNpbmcgdGltaW5nIGRlcHRoIG9mICVkIGJhdGNoZXNcbiIsIHFsZW4pOwo+ICAKPiAgICAgICAg
IGV4ZWNidWYuYnVmZmVyc19wdHIgPSB0b191c2VyX3BvaW50ZXIob2JqKTsKPiBAQCAtMjY0LDEz
ICsyNjQsMTUgQEAgc3RhdGljIHZvaWQgYWxsKGludCBmZCwgdWludDMyX3QgaGFuZGxlLCB1bnNp
Z25lZCBmbGFncywgaW50IHRpbWVvdXQpCj4gIAo+ICAgICAgICAgZm9yIChpbnQgcG90ID0gMjsg
cG90IDw9IDY0OyBwb3QgKj0gMikgewo+ICAgICAgICAgICAgICAgICBmb3IgKGludCBuY3R4ID0g
cG90IC0gMTsgbmN0eCA8PSBwb3QgKyAxOyBuY3R4KyspIHsKPiAtICAgICAgICAgICAgICAgICAg
ICAgICBpZ3RfZm9yayhjaGlsZCwgbmVuZ2luZSkgewo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGlndF9mb3JrKGNoaWxkLCBlbmdpbmVzLm5lbmdpbmVzKSB7Cj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzdHJ1Y3QgdGltZXNwZWMgc3RhcnQsIG5vdzsKPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBjb3VudCA9IDA7Cj4gIAo+ICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgb2JqWzBdLmhhbmRsZSA9IGdlbV9jcmVhdGUoZmQsIDQw
OTYpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY2J1Zi5mbGFncyB8PSBl
bmdpbmVbY2hpbGRdOwo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQg
bG9vcCA9IDA7IGxvb3AgPCBBUlJBWV9TSVpFKGNvbnRleHRzKTsgbG9vcCsrKSB7Cj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBleGVjYnVmLmZsYWdzIHw9IGVuZ2luZXMuZW5naW5l
c1tjaGlsZF0uZmxhZ3M7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGlu
dCBsb29wID0gMDsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9vcCA8
IEFSUkFZX1NJWkUoY29udGV4dHMpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBsb29wKyspIHsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZXhlY2J1Zi5yc3ZkMSA9IGNvbnRleHRzW2xvb3BdOwo+ICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBnZW1fZXhlY2J1ZihmZCwgJmV4ZWNidWYpOwo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgfQo+IEBAIC0yNzksNyArMjgxLDggQEAgc3RhdGljIHZvaWQg
YWxsKGludCBmZCwgdWludDMyX3QgaGFuZGxlLCB1bnNpZ25lZCBmbGFncywgaW50IHRpbWVvdXQp
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9ja19nZXR0aW1lKENMT0NLX01P
Tk9UT05JQywgJnN0YXJ0KTsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvIHsK
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgbG9vcCA9
IDA7IGxvb3AgPCBxbGVuOyBsb29wKyspIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBleGVjYnVmLnJzdmQxID0gY29udGV4dHNbbG9vcCAlIG5jdHhd
Owo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWNi
dWYucnN2ZDEgPQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgY29udGV4dHNbbG9vcCAlIG5jdHhdOwo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbV9leGVjYnVmKGZkLCAmZXhlY2J1Zik7Cj4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gcWxlbjsKPiBAQCAtMjkxLDggKzI5
NCwxMSBAQCBzdGF0aWMgdm9pZCBhbGwoaW50IGZkLCB1aW50MzJfdCBoYW5kbGUsIHVuc2lnbmVk
IGZsYWdzLCBpbnQgdGltZW91dCkKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdl
bV9jbG9zZShmZCwgb2JqWzBdLmhhbmRsZSk7Cj4gIAo+ICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaWd0X2luZm8oIlslZDolZF0gJXM6ICUndSBjeWNsZXM6ICUuM2Z1cyVzIChlbGFw
c2VkOiAlLjNmcylcbiIsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBuY3R4LCBjaGlsZCwgbmFtZVtjaGlsZF0sIGNvdW50LCBlbGFwc2VkKCZzdGFydCwgJm5vdykq
MWU2IC8gY291bnQsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBm
bGFncyAmIElOVEVSUlVQVElCTEUgPyAiIChpbnRlcnJ1cHRpYmxlKSIgOiAiIiwKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5jdHgsIGNoaWxkLAo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5naW5lcy5lbmdpbmVzW2NoaWxkXS5u
YW1lLCBjb3VudCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVs
YXBzZWQoJnN0YXJ0LCAmbm93KSAqIDFlNiAvIGNvdW50LAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZmxhZ3MgJiBJTlRFUlJVUFRJQkxFID8KPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgKGludGVycnVwdGlibGUpIiA6ICIiLAo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxhcHNlZCgmc3RhcnQs
ICZub3cpKTsKPiAgICAgICAgICAgICAgICAgICAgICAgICB9Cj4gICAgICAgICAgICAgICAgICAg
ICAgICAgaWd0X3dhaXRjaGlsZHJlbigpOwo+IEBAIC0zMDYsNiArMzEyLDcgQEAgc3RhdGljIHZv
aWQgYWxsKGludCBmZCwgdWludDMyX3QgaGFuZGxlLCB1bnNpZ25lZCBmbGFncywgaW50IHRpbWVv
dXQpCj4gIGlndF9tYWluCj4gIHsKPiAgICAgICAgIGNvbnN0IGludCBuY3B1cyA9IHN5c2NvbmYo
X1NDX05QUk9DRVNTT1JTX09OTE4pOwo+ICsgICAgICAgY29uc3Qgc3RydWN0IGludGVsX2V4ZWN1
dGlvbl9lbmdpbmUyICplMjsKPiAgICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9leGVjdXRpb25f
ZW5naW5lICplOwo+ICAgICAgICAgc3RhdGljIGNvbnN0IHN0cnVjdCB7Cj4gICAgICAgICAgICAg
ICAgIGNvbnN0IGNoYXIgKm5hbWU7Cj4gQEAgLTMzOCw3ICszNDUsNDkgQEAgaWd0X21haW4KPiAg
ICAgICAgICAgICAgICAgaWd0X2ZvcmtfaGFuZ19kZXRlY3RvcihmZCk7Cj4gICAgICAgICB9Cj4g
IAo+ICsgICAgICAgLyogTGVnYWN5IHRlc3RpbmcgbXVzdCBiZSBmaXJzdC4gKi8KPiAgICAgICAg
IGZvciAoZSA9IGludGVsX2V4ZWN1dGlvbl9lbmdpbmVzOyBlLT5uYW1lOyBlKyspIHsKPiArICAg
ICAgICAgICAgICAgZTIgPSBnZW1fZWJfZmxhZ3NfdG9fZW5naW5lKGUtPmV4ZWNfaWQgfCBlLT5m
bGFncyk7Cj4gKyAgICAgICAgICAgICAgIGlmICghZTIpCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgY29udGludWU7IC8qIEk5MTVfRVhFQ19CU0Qgd2l0aCBubyByaW5nIHNlbGVjdG9ycyAqLwo+
ICsKPiArICAgICAgICAgICAgICAgZm9yICh0eXBlb2YoKnBoYXNlcykgKnAgPSBwaGFzZXM7IHAt
Pm5hbWU7IHArKykgewo+ICsgICAgICAgICAgICAgICAgICAgICAgIGlndF9zdWJ0ZXN0X2dyb3Vw
IHsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlndF9maXh0dXJlIHsKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VtX3JlcXVpcmVfcmluZyhmZCwg
ZTItPmZsYWdzKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg
KHAtPnJlcXVpcmUpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgaWd0X3JlcXVpcmUocC0+cmVxdWlyZShmZCkpOwo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgfQo+ICsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlndF9z
dWJ0ZXN0X2YoImxlZ2FjeS0lcyVzJXMiLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBlLT5uYW1lLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAqcC0+bmFtZSA/ICItIiA6ICIiLAo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLT5uYW1lKQo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGUoZmQsIGxpZ2h0LCBlMiwgcC0+ZmxhZ3MsIDEs
IDUpOwo+ICsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlndF9za2lwX29uX3Np
bXVsYXRpb24oKTsKPiArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ3Rfc3Vi
dGVzdF9mKCJsZWdhY3ktJXMlcy1oZWF2eSVzIiwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZS0+ZXhlY19pZCA9PSAwID8gImJhc2ljLSIgOiAiIiwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS0+bmFtZSwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC0+bmFtZSkKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlKGZkLCBoZWF2eSwg
ZTIsIHAtPmZsYWdzLCAxLCA1KTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGln
dF9zdWJ0ZXN0X2YoImxlZ2FjeS1mb3JrZWQtJXMlcyIsCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGUtPm5hbWUsCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHAtPm5hbWUpCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNpbmdsZShmZCwgbGlnaHQsIGUyLCBwLT5mbGFncywgbmNwdXMs
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxNTApOwo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWd0X3N1YnRlc3RfZigibGVnYWN5LWZv
cmtlZC0lcy1oZWF2eSVzIiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZS0+bmFtZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcC0+bmFtZSkKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2luZ2xlKGZkLCBoZWF2eSwgZTIsIHAtPmZsYWdzLCBuY3B1cywKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDE1MCk7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgfQo+ICsgICAgICAgICAgICAgICB9Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAg
LyogTXVzdCBjb21lIGFmdGVyIGxlZ2FjeSBzdWJ0ZXN0cy4gKi8KPiArICAgICAgIF9fZm9yX2Vh
Y2hfcGh5c2ljYWxfZW5naW5lKGZkLCBlMikgewo+ICAgICAgICAgICAgICAgICBmb3IgKHR5cGVv
ZigqcGhhc2VzKSAqcCA9IHBoYXNlczsgcC0+bmFtZTsgcCsrKSB7Cj4gICAgICAgICAgICAgICAg
ICAgICAgICAgaWd0X3N1YnRlc3RfZ3JvdXAgewo+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgaWd0X2ZpeHR1cmUgewo+IEBAIC0zNDYsMzMgKzM5NSw0MCBAQCBpZ3RfbWFpbgo+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlndF9yZXF1aXJl
KHAtPnJlcXVpcmUoZmQpKTsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KPiAg
Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ3Rfc3VidGVzdF9mKCIlcyVzJXMi
LCBlLT5leGVjX2lkID09IDAgPyAiYmFzaWMtIiA6ICIiLCBlLT5uYW1lLCBwLT5uYW1lKQo+IC0g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGUoZmQsIGxpZ2h0LCBl
LCBwLT5mbGFncywgMSwgNSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ3Rf
c3VidGVzdF9mKCIlcyVzJXMiLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBlMi0+bmFtZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgKnAtPm5hbWUgPyAiLSIgOiAiIiwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcC0+bmFtZSkKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc2luZ2xlKGZkLCBsaWdodCwgZTIsIHAtPmZsYWdzLCAxLCA1KTsK
PiAgCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ3Rfc2tpcF9vbl9zaW11bGF0
aW9uKCk7Cj4gIAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWd0X3N1YnRlc3Rf
ZigiJXMlcy1oZWF2eSVzIiwgZS0+ZXhlY19pZCA9PSAwID8gImJhc2ljLSIgOiAiIiwgZS0+bmFt
ZSwgcC0+bmFtZSkKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lu
Z2xlKGZkLCBoZWF2eSwgZSwgcC0+ZmxhZ3MsIDEsIDUpOwo+IC0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaWd0X3N1YnRlc3RfZigiZm9ya2VkLSVzJXMiLCBlLT5uYW1lLCBwLT5uYW1l
KQo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGUoZmQsIGxp
Z2h0LCBlLCBwLT5mbGFncywgbmNwdXMsIDE1MCk7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpZ3Rfc3VidGVzdF9mKCJmb3JrZWQtJXMtaGVhdnklcyIsIGUtPm5hbWUsIHAtPm5h
bWUpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZShmZCwg
aGVhdnksIGUsIHAtPmZsYWdzLCBuY3B1cywgMTUwKTsKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGlndF9zdWJ0ZXN0X2YoIiVzLWhlYXZ5JXMiLCBlMi0+bmFtZSwgcC0+bmFtZSkK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlKGZkLCBoZWF2
eSwgZTIsIHAtPmZsYWdzLCAxLCA1KTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGlndF9zdWJ0ZXN0X2YoIiVzLWZvcmtlZCVzIiwgZTItPm5hbWUsIHAtPm5hbWUpCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZShmZCwgbGlnaHQsIGUyLCBw
LT5mbGFncywgbmNwdXMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAxNTApOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWd0X3N1YnRl
c3RfZigiJXMtZm9ya2VkLWhlYXZ5JXMiLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBlMi0+bmFtZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcC0+bmFtZSkKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2luZ2xlKGZkLCBoZWF2eSwgZTIsIHAtPmZsYWdzLCBuY3B1cywKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDE1MCk7Cj4gICAgICAg
ICAgICAgICAgICAgICAgICAgfQo+ICAgICAgICAgICAgICAgICB9Cj4gICAgICAgICB9CgpPaywg
dGhhdCBsb29rcyBsaWtlIHdoYXQgSSB3b3VsZCBleHBlY3QuIEZvciBjcnV4IHRlc3RzLCB3ZSBp
dGVyYXRlIG92ZXIKYm90aCB0aGUgbGVnYWN5IHJpbmcgc2VsZWN0b3IsIGFuZCBhbG9uZyB0aGUg
ZW5naW5lW10gaW5kaWNlcy4KCj4gLSAgICAgICBpZ3Rfc3VidGVzdCgiYmFzaWMtYWxsLWxpZ2h0
IikKPiArICAgICAgIGlndF9zdWJ0ZXN0KCJhbGwtbGlnaHQiKQo+ICAgICAgICAgICAgICAgICBh
bGwoZmQsIGxpZ2h0LCAwLCA1KTsKPiAtICAgICAgIGlndF9zdWJ0ZXN0KCJiYXNpYy1hbGwtaGVh
dnkiKQo+ICsgICAgICAgaWd0X3N1YnRlc3QoImFsbC1oZWF2eSIpCj4gICAgICAgICAgICAgICAg
IGFsbChmZCwgaGVhdnksIDAsIDUpOwoKQW5kIGZvciAiYWxsIiB0ZXN0cyB3aGVyZSB3ZSBhcmUg
anVzdCB0cnlpbmcgdG8gdXRpbGlzZSBhbGwgZW5naW5lcyBhdApvbmNlLCB3ZSBvbmx5IGNhcmUg
YWJvdXQgdGhlIHVuZGVybHlpbmcgSFcgdXRpbGlzYXRpb24gYW5kIHNvIHRoZSBuZXcKcXVlcnkg
aW50ZXJmYWNlIHdvcmtzIGJlc3QuCi1DaHJpcwpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9pbnRlbC1nZng=

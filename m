Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7E158175A5
	for <lists+intel-gfx@lfdr.de>; Wed,  8 May 2019 12:10:34 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DC14A89686;
	Wed,  8 May 2019 10:10:25 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AAD13895C3;
 Wed,  8 May 2019 10:10:23 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16487703-1500050 
 for multiple; Wed, 08 May 2019 11:10:14 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  8 May 2019 11:09:58 +0100
Message-Id: <20190508100958.32637-16-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190508100958.32637-1-chris@chris-wilson.co.uk>
References: <20190508100958.32637-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t 16/16] i915/gem_exec_latency: Add another
 variant of waiter latency
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Ci0t
LQogdGVzdHMvaTkxNS9nZW1fZXhlY19sYXRlbmN5LmMgfCA4MSArKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKwogMSBmaWxlIGNoYW5nZWQsIDgxIGluc2VydGlvbnMoKykKCmRpZmYg
LS1naXQgYS90ZXN0cy9pOTE1L2dlbV9leGVjX2xhdGVuY3kuYyBiL3Rlc3RzL2k5MTUvZ2VtX2V4
ZWNfbGF0ZW5jeS5jCmluZGV4IGU4OGZiYmM2YS4uZmQ0Y2ViNGQ2IDEwMDY0NAotLS0gYS90ZXN0
cy9pOTE1L2dlbV9leGVjX2xhdGVuY3kuYworKysgYi90ZXN0cy9pOTE1L2dlbV9leGVjX2xhdGVu
Y3kuYwpAQCAtNDkwLDYgKzQ5MCw4MyBAQCBzdGF0aWMgdm9pZCBleGVjdXRpb25fbGF0ZW5jeShp
bnQgaTkxNSwgdW5zaWduZWQgaW50IHJpbmcsIGNvbnN0IGNoYXIgKm5hbWUpCiAJZ2VtX2Nsb3Nl
KGk5MTUsIG9iai5oYW5kbGUpOwogfQogCitzdGF0aWMgdm9pZCB3YWtldXBfbGF0ZW5jeShpbnQg
aTkxNSwgdW5zaWduZWQgaW50IHJpbmcsIGNvbnN0IGNoYXIgKm5hbWUpCit7CisJc3RydWN0IGRy
bV9pOTE1X2dlbV9leGVjX29iamVjdDIgb2JqID0geworCQkuaGFuZGxlID0gZ2VtX2NyZWF0ZShp
OTE1LCA0MDk1KSwKKwl9OworCXN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcjIgZXhlY2J1
ZiA9IHsKKwkJLmJ1ZmZlcnNfcHRyID0gdG9fdXNlcl9wb2ludGVyKCZvYmopLAorCQkuYnVmZmVy
X2NvdW50ID0gMSwKKwkJLmZsYWdzID0gcmluZyB8IExPQ0FMX0k5MTVfRVhFQ19OT19SRUxPQyB8
IExPQ0FMX0k5MTVfRVhFQ19IQU5ETEVfTFVULAorCX07CisJY29uc3QgdW5zaWduZWQgaW50IG1t
aW9fYmFzZSA9IDB4MjAwMDsKKwljb25zdCB1bnNpZ25lZCBpbnQgY3NfdGltZXN0YW1wID0gbW1p
b19iYXNlICsgMHgzNTg7CisJdm9sYXRpbGUgdWludDMyX3QgKnRpbWVzdGFtcDsKKwlzdHJ1Y3Qg
aWd0X21lYW4gd2FrZXVwOworCXVpbnQzMl90ICpjcywgKnJlc3VsdDsKKworCXRpbWVzdGFtcCA9
CisJCSh2b2xhdGlsZSB1aW50MzJfdCAqKSgodm9sYXRpbGUgY2hhciAqKWlndF9nbG9iYWxfbW1p
byArIGNzX3RpbWVzdGFtcCk7CisKKwlvYmouaGFuZGxlID0gZ2VtX2NyZWF0ZShpOTE1LCA0MDk2
KTsKKwlvYmouZmxhZ3MgPSBFWEVDX09CSkVDVF9QSU5ORUQ7CisJcmVzdWx0ID0gZ2VtX21tYXBf
X3djKGk5MTUsIG9iai5oYW5kbGUsIDAsIDQwOTYsIFBST1RfV1JJVEUpOworCisJY3MgPSByZXN1
bHQ7CisKKwkqY3MrKyA9IDB4MjQgPDwgMjMgfCAyOyAvKiBTUk0gKi8KKwkqY3MrKyA9IGNzX3Rp
bWVzdGFtcDsKKwkqY3MrKyA9IDQwOTYgLSAxNiAqIDQ7CisJKmNzKysgPSAwOworCisJKmNzKysg
PSBNSV9CQVRDSF9CVUZGRVJfU1RBUlQgfCAxOworCSpjcysrID0gMDsKKwkqY3MrKyA9IDA7CisK
KwkqY3MrKyA9IDB4MjQgPDwgMjMgfCAyOyAvKiBTUk0gKi8KKwkqY3MrKyA9IGNzX3RpbWVzdGFt
cDsKKwkqY3MrKyA9IDQwOTYgLSAxNiAqIDQgKyA0OworCSpjcysrID0gMDsKKwkqY3MrKyA9IDB4
YSA8PCAyMzsKKworCWNzID0gcmVzdWx0ICsgMTAyNCAtIDE2OworCisJeworCQlzdHJ1Y3Qgc2No
ZWRfcGFyYW0gcCA9IHsgLnNjaGVkX3ByaW9yaXR5ID0gOTkgfTsKKwkJc2NoZWRfc2V0c2NoZWR1
bGVyKDAsIFNDSEVEX0ZJRk8gfCBTQ0hFRF9SRVNFVF9PTl9GT1JLLCAmcCk7CisJfQorCisJaWd0
X21lYW5faW5pdCgmd2FrZXVwKTsKKwlpZ3RfdW50aWxfdGltZW91dCgyKSB7CisJCXVpbnQzMl90
IGVuZDsKKworCQlpZ3RfZm9yayhjaGlsZCwgMSkgeworCQkJcmVzdWx0WzRdID0gTUlfQkFUQ0hf
QlVGRkVSX1NUQVJUIHwgMTsKKwkJCWNzWzBdID0gMDsKKworCQkJZ2VtX2V4ZWNidWYoaTkxNSwg
JmV4ZWNidWYpOworCisJCQl3aGlsZSAoIWNzWzBdKQorCQkJCTsKKwkJCXJlc3VsdFs0XSA9IDA7
CisJCQlfX3N5bmNfc3luY2hyb25pemUoKTsKKwkJfQorCQlnZW1fc3luYyhpOTE1LCBvYmouaGFu
ZGxlKTsKKwkJZW5kID0gKnRpbWVzdGFtcDsKKworCQlpZ3RfbWVhbl9hZGQoJndha2V1cCwgKGVu
ZCAtIGNzWzFdKSAqIHJjc19jbG9jayk7CisJCWlndF93YWl0Y2hpbGRyZW4oKTsKKwl9CisJaWd0
X2luZm8oIiVzIFdha2V1cCBsYXRlbmN5OiAlLjJmwrElLjJmbXMgWyUuMmYsICUuMmZdXG4iLCBu
YW1lLAorCQkgMWUtNiAqIGlndF9tZWFuX2dldCgmd2FrZXVwKSwKKwkJIDFlLTYgKiBzcXJ0KGln
dF9tZWFuX2dldF92YXJpYW5jZSgmd2FrZXVwKSksCisJCSAxZS02ICogd2FrZXVwLm1pbiwgMWUt
NiAqIHdha2V1cC5tYXgpOworCisJbXVubWFwKHJlc3VsdCwgNDA5Nik7CisJZ2VtX2Nsb3NlKGk5
MTUsIG9iai5oYW5kbGUpOworfQorCiBzdGF0aWMgdm9pZAogX19zdWJtaXRfc3BpbihpbnQgZmQs
IGlndF9zcGluX3QgKnNwaW4sIHVuc2lnbmVkIGludCBmbGFncykKIHsKQEAgLTk0Miw2ICsxMDE5
LDEwIEBAIGlndF9tYWluCiAJCQkJCWV4ZWN1dGlvbl9sYXRlbmN5KGRldmljZSwKIAkJCQkJCQkg
IGUtPmV4ZWNfaWQgfCBlLT5mbGFncywKIAkJCQkJCQkgIGUtPm5hbWUpOworCQkJCWlndF9zdWJ0
ZXN0X2YoIiVzLXdha2V1cC1sYXRlbmN5IiwgZS0+bmFtZSkKKwkJCQkJd2FrZXVwX2xhdGVuY3ko
ZGV2aWNlLAorCQkJCQkJCWUtPmV4ZWNfaWQgfCBlLT5mbGFncywKKwkJCQkJCQllLT5uYW1lKTsK
IAogCQkJCWlndF9zdWJ0ZXN0X2YoIiVzLWxpdmUtZGlzcGF0Y2gtcXVldWVkIiwgZS0+bmFtZSkK
IAkJCQkJbGF0ZW5jeV9vbl9yaW5nKGRldmljZSwKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJ
bnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

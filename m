Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id BB26A26781
	for <lists+intel-gfx@lfdr.de>; Wed, 22 May 2019 17:57:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6D0E189C27;
	Wed, 22 May 2019 15:57:38 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E9BB389BFD;
 Wed, 22 May 2019 15:57:33 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 May 2019 08:57:33 -0700
X-ExtLoop1: 1
Received: from dmironox-mobl5.ccr.corp.intel.com (HELO localhost.localdomain)
 ([10.252.20.122])
 by fmsmga005.fm.intel.com with ESMTP; 22 May 2019 08:57:32 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: igt-dev@lists.freedesktop.org
Date: Wed, 22 May 2019 16:57:09 +0100
Message-Id: <20190522155720.28723-5-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190522155720.28723-1-tvrtko.ursulin@linux.intel.com>
References: <20190522155720.28723-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t 04/15] gem_wsim: Engine map load balance
 command
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCkEgbmV3IHdv
cmtsb2FkIGNvbW1hbmQgZm9yIGVuYWJsaW5nIGEgbG9hZCBiYWxhbmNlZCBjb250ZXh0IG1hcCAo
YWthClZpcnR1YWwgRW5naW5lKS4gRXhhbXBsZSB1c2FnZToKCiAgQi4xCgpUaGlzIHR1cm5zIG9u
IGxvYWQgYmFsYW5jaW5nIGZvciBjb250ZXh0IG9uZSwgYXNzdW1pbmcgaXQgaGFzIGFscmVhZHkg
YmVlbgpjb25maWd1cmVkIHdpdGggYW4gZW5naW5lIG1hcC4gT25seSBERUZBVUxUIGVuZ2luZSBz
cGVjaWZpZXIgY2FuIGJlIHVzZWQKd2l0aCBsb2FkIGJhbGFuY2VkIGVuZ2luZSBtYXBzLgoKdjI6
CiAqIExpZnQgcmVzdHJpY3Rpb24gdG8gb25seSB1c2UgbG9hZCBiYWxhbmNlciB3aGVuIGVuYWJs
ZWQgaW4gY29udGV4dCBtYXAuCiAgIChDaHJpcykKClNpZ25lZC1vZmYtYnk6IFR2cnRrbyBVcnN1
bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Ci0tLQogYmVuY2htYXJrcy9nZW1fd3NpbS5j
ICB8IDY2ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLQogYmVuY2ht
YXJrcy93c2ltL1JFQURNRSB8IDE1ICsrKysrKysrKysKIDIgZmlsZXMgY2hhbmdlZCwgNzQgaW5z
ZXJ0aW9ucygrKSwgNyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9iZW5jaG1hcmtzL2dlbV93
c2ltLmMgYi9iZW5jaG1hcmtzL2dlbV93c2ltLmMKaW5kZXggNjY4MzJmNzRlMzRhLi5kNjQ1NjEx
Y2Y4YzIgMTAwNjQ0Ci0tLSBhL2JlbmNobWFya3MvZ2VtX3dzaW0uYworKysgYi9iZW5jaG1hcmtz
L2dlbV93c2ltLmMKQEAgLTgzLDcgKzgzLDggQEAgZW51bSB3X3R5cGUKIAlTV19GRU5DRV9TSUdO
QUwsCiAJQ1RYX1BSSU9SSVRZLAogCVBSRUVNUFRJT04sCi0JRU5HSU5FX01BUAorCUVOR0lORV9N
QVAsCisJTE9BRF9CQUxBTkNFLAogfTsKIAogc3RydWN0IGRlcHMKQEAgLTEyMSw2ICsxMjIsNyBA
QCBzdHJ1Y3Qgd19zdGVwCiAJCQl1bnNpZ25lZCBpbnQgZW5naW5lX21hcF9jb3VudDsKIAkJCWVu
dW0gaW50ZWxfZW5naW5lX2lkICplbmdpbmVfbWFwOwogCQl9OworCQlib29sIGxvYWRfYmFsYW5j
ZTsKIAl9OwogCiAJLyogSW1wbGVtZW50YXRpb24gZGV0YWlscyAqLwpAQCAtNTA3LDYgKzUwOSwy
NSBAQCBwYXJzZV93b3JrbG9hZChzdHJ1Y3Qgd19hcmcgKmFyZywgdW5zaWduZWQgaW50IGZsYWdz
LCBzdHJ1Y3Qgd29ya2xvYWQgKmFwcF93KQogCiAJCQkJc3RlcC50eXBlID0gUFJFRU1QVElPTjsK
IAkJCQlnb3RvIGFkZF9zdGVwOworCQkJfSBlbHNlIGlmICghc3RyY21wKGZpZWxkLCAiQiIpKSB7
CisJCQkJdW5zaWduZWQgaW50IG5yID0gMDsKKwkJCQl3aGlsZSAoKGZpZWxkID0gc3RydG9rX3Io
ZnN0YXJ0LCAiLiIsICZmY3R4KSkpIHsKKwkJCQkJdG1wID0gYXRvaShmaWVsZCk7CisJCQkJCWNo
ZWNrX2FyZyhuciA9PSAwICYmIHRtcCA8PSAwLAorCQkJCQkJICAiSW52YWxpZCBjb250ZXh0IGF0
IHN0ZXAgJXUhXG4iLAorCQkJCQkJICBucl9zdGVwcyk7CisJCQkJCWNoZWNrX2FyZyhuciA+IDAs
CisJCQkJCQkgICJJbnZhbGlkIGxvYWQgYmFsYW5jZSBmb3JtYXQgYXQgc3RlcCAldSFcbiIsCisJ
CQkJCQkgIG5yX3N0ZXBzKTsKKworCQkJCQlzdGVwLmNvbnRleHQgPSB0bXA7CisJCQkJCXN0ZXAu
bG9hZF9iYWxhbmNlID0gdHJ1ZTsKKworCQkJCQlucisrOworCQkJCX0KKworCQkJCXN0ZXAudHlw
ZSA9IExPQURfQkFMQU5DRTsKKwkJCQlnb3RvIGFkZF9zdGVwOwogCQkJfQogCiAJCQlpZiAoIWZp
ZWxkKSB7CkBAIC04NDEsNyArODYyLDcgQEAgZmluZF9lbmdpbmVfaW5fbWFwKHN0cnVjdCBjdHgg
KmN0eCwgZW51bSBpbnRlbF9lbmdpbmVfaWQgZW5naW5lKQogCQkJcmV0dXJuIGkgKyAxOwogCX0K
IAotCWlndF9hc3NlcnQoMCk7CisJaWd0X2Fzc2VydChjdHgtPndhbnRzX2JhbGFuY2UpOwogCXJl
dHVybiAwOwogfQogCkBAIC0xMDczLDEyICsxMDk0LDE5IEBAIHByZXBhcmVfd29ya2xvYWQodW5z
aWduZWQgaW50IGlkLCBzdHJ1Y3Qgd29ya2xvYWQgKndyaywgdW5zaWduZWQgaW50IGZsYWdzKQog
CQkJCXdyay0+Y3R4X2xpc3Rbal0uZW5naW5lX21hcCA9IHctPmVuZ2luZV9tYXA7CiAJCQkJd3Jr
LT5jdHhfbGlzdFtqXS5lbmdpbmVfbWFwX2NvdW50ID0KIAkJCQkJdy0+ZW5naW5lX21hcF9jb3Vu
dDsKKwkJCX0gZWxzZSBpZiAody0+dHlwZSA9PSBMT0FEX0JBTEFOQ0UpIHsKKwkJCQlpZiAoIXdy
ay0+Y3R4X2xpc3Rbal0uZW5naW5lX21hcCkgeworCQkJCQl3c2ltX2VycigiTG9hZCBiYWxhbmNp
bmcgbmVlZHMgYW4gZW5naW5lIG1hcCFcbiIpOworCQkJCQlyZXR1cm4gMTsKKwkJCQl9CisJCQkJ
d3JrLT5jdHhfbGlzdFtqXS53YW50c19iYWxhbmNlID0KKwkJCQkJdy0+bG9hZF9iYWxhbmNlOwog
CQkJfQogCQl9CiAKIAkJd3JrLT5jdHhfbGlzdFtqXS50YXJnZXRzX2luc3RhbmNlID0gdGFyZ2V0
czsKIAkJaWYgKGZsYWdzICYgSTkxNSkKLQkJCXdyay0+Y3R4X2xpc3Rbal0ud2FudHNfYmFsYW5j
ZSA9IGJhbGFuY2U7CisJCQl3cmstPmN0eF9saXN0W2pdLndhbnRzX2JhbGFuY2UgfD0gYmFsYW5j
ZTsKIAl9CiAKIAkvKgpAQCAtMTA5Miw3ICsxMTIwLDkgQEAgcHJlcGFyZV93b3JrbG9hZCh1bnNp
Z25lZCBpbnQgaWQsIHN0cnVjdCB3b3JrbG9hZCAqd3JrLCB1bnNpZ25lZCBpbnQgZmxhZ3MpCiAJ
CQlpZiAody0+dHlwZSAhPSBCQVRDSCkKIAkJCQljb250aW51ZTsKIAotCQkJaWYgKHdyay0+Y3R4
X2xpc3Rbal0uZW5naW5lX21hcCAmJiB3LT5lbmdpbmUgPT0gVkNTKSB7CisJCQlpZiAod3JrLT5j
dHhfbGlzdFtqXS5lbmdpbmVfbWFwICYmCisJCQkgICAgIXdyay0+Y3R4X2xpc3Rbal0ud2FudHNf
YmFsYW5jZSAmJgorCQkJICAgICh3LT5lbmdpbmUgPT0gVkNTIHx8IHctPmVuZ2luZSA9PSBERUZB
VUxUKSkgewogCQkJCXdzaW1fZXJyKCJCYXRjaGVzIHRhcmdldHRpbmcgZW5naW5lIG1hcHMgbXVz
dCB1c2UgZXhwbGljaXQgZW5naW5lcyFcbiIpOwogCQkJCXJldHVybiAtMTsKIAkJCX0KQEAgLTEx
NDAsNyArMTE3MCw4IEBAIHByZXBhcmVfd29ya2xvYWQodW5zaWduZWQgaW50IGlkLCBzdHJ1Y3Qg
d29ya2xvYWQgKndyaywgdW5zaWduZWQgaW50IGZsYWdzKQogCQkJCWJyZWFrOwogCQkJfQogCi0J
CQlpZiAoIWN0eC0+ZW5naW5lX21hcCAmJiAhY3R4LT50YXJnZXRzX2luc3RhbmNlKQorCQkJaWYg
KCghY3R4LT5lbmdpbmVfbWFwICYmICFjdHgtPnRhcmdldHNfaW5zdGFuY2UpIHx8CisJCQkgICAg
KGN0eC0+ZW5naW5lX21hcCAmJiBjdHgtPndhbnRzX2JhbGFuY2UpKQogCQkJCWFyZ3MuZmxhZ3Mg
fD0KIAkJCQkgICAgIEk5MTVfQ09OVEVYVF9DUkVBVEVfRkxBR1NfU0lOR0xFX1RJTUVMSU5FOwog
CkBAIC0xMjAxLDYgKzEyMzIsOCBAQCBwcmVwYXJlX3dvcmtsb2FkKHVuc2lnbmVkIGludCBpZCwg
c3RydWN0IHdvcmtsb2FkICp3cmssIHVuc2lnbmVkIGludCBmbGFncykKIAkJaWYgKGN0eC0+ZW5n
aW5lX21hcCkgewogCQkJSTkxNV9ERUZJTkVfQ09OVEVYVF9QQVJBTV9FTkdJTkVTKHNldF9lbmdp
bmVzLAogCQkJCQkJCSAgY3R4LT5lbmdpbmVfbWFwX2NvdW50ICsgMSk7CisJCQlJOTE1X0RFRklO
RV9DT05URVhUX0VOR0lORVNfTE9BRF9CQUxBTkNFKGxvYWRfYmFsYW5jZSwKKwkJCQkJCQkJIGN0
eC0+ZW5naW5lX21hcF9jb3VudCk7CiAJCQlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2NvbnRleHRfcGFy
YW0gcGFyYW0gPSB7CiAJCQkJLmN0eF9pZCA9IGN0eF9pZCwKIAkJCQkucGFyYW0gPSBJOTE1X0NP
TlRFWFRfUEFSQU1fRU5HSU5FUywKQEAgLTEyMDgsNyArMTI0MSwyNSBAQCBwcmVwYXJlX3dvcmts
b2FkKHVuc2lnbmVkIGludCBpZCwgc3RydWN0IHdvcmtsb2FkICp3cmssIHVuc2lnbmVkIGludCBm
bGFncykKIAkJCQkudmFsdWUgPSB0b191c2VyX3BvaW50ZXIoJnNldF9lbmdpbmVzKSwKIAkJCX07
CiAKLQkJCXNldF9lbmdpbmVzLmV4dGVuc2lvbnMgPSAwOworCQkJaWYgKGN0eC0+d2FudHNfYmFs
YW5jZSkgeworCQkJCXNldF9lbmdpbmVzLmV4dGVuc2lvbnMgPQorCQkJCQl0b191c2VyX3BvaW50
ZXIoJmxvYWRfYmFsYW5jZSk7CisKKwkJCQltZW1zZXQoJmxvYWRfYmFsYW5jZSwgMCwgc2l6ZW9m
KGxvYWRfYmFsYW5jZSkpOworCQkJCWxvYWRfYmFsYW5jZS5iYXNlLm5hbWUgPQorCQkJCQlJOTE1
X0NPTlRFWFRfRU5HSU5FU19FWFRfTE9BRF9CQUxBTkNFOworCQkJCWxvYWRfYmFsYW5jZS5udW1f
c2libGluZ3MgPQorCQkJCQljdHgtPmVuZ2luZV9tYXBfY291bnQ7CisKKwkJCQlmb3IgKGogPSAw
OyBqIDwgY3R4LT5lbmdpbmVfbWFwX2NvdW50OyBqKyspIHsKKwkJCQkJbG9hZF9iYWxhbmNlLmVu
Z2luZXNbal0uZW5naW5lX2NsYXNzID0KKwkJCQkJCUk5MTVfRU5HSU5FX0NMQVNTX1ZJREVPOyAv
KiBGSVhNRSAqLworCQkJCQlsb2FkX2JhbGFuY2UuZW5naW5lc1tqXS5lbmdpbmVfaW5zdGFuY2Ug
PQorCQkJCQkJY3R4LT5lbmdpbmVfbWFwW2pdIC0gVkNTMTsgLyogRklYTUUgKi8KKwkJCQl9CisJ
CQl9IGVsc2UgeworCQkJCXNldF9lbmdpbmVzLmV4dGVuc2lvbnMgPSAwOworCQkJfQogCiAJCQkv
KiBSZXNlcnZlIHNsb3QgZm9yIHZpcnR1YWwgZW5naW5lLiAqLwogCQkJc2V0X2VuZ2luZXMuZW5n
aW5lc1swXS5lbmdpbmVfY2xhc3MgPQpAQCAtMjE5Niw3ICsyMjQ3LDggQEAgc3RhdGljIHZvaWQg
KnJ1bl93b3JrbG9hZCh2b2lkICpkYXRhKQogCQkJCX0KIAkJCQljb250aW51ZTsKIAkJCX0gZWxz
ZSBpZiAody0+dHlwZSA9PSBQUkVFTVBUSU9OIHx8Ci0JCQkJICAgdy0+dHlwZSA9PSBFTkdJTkVf
TUFQKSB7CisJCQkJICAgdy0+dHlwZSA9PSBFTkdJTkVfTUFQIHx8CisJCQkJICAgdy0+dHlwZSA9
PSBMT0FEX0JBTEFOQ0UpIHsKIAkJCQljb250aW51ZTsKIAkJCX0KIApkaWZmIC0tZ2l0IGEvYmVu
Y2htYXJrcy93c2ltL1JFQURNRSBiL2JlbmNobWFya3Mvd3NpbS9SRUFETUUKaW5kZXggNTNmODE0
YTczYzczLi4yYzA4NTkyMWU5N2IgMTAwNjQ0Ci0tLSBhL2JlbmNobWFya3Mvd3NpbS9SRUFETUUK
KysrIGIvYmVuY2htYXJrcy93c2ltL1JFQURNRQpAQCAtMyw2ICszLDcgQEAgV29ya2xvYWQgZGVz
Y3JpcHRvciBmb3JtYXQKIAogY3R4LmVuZ2luZS5kdXJhdGlvbl91cy5kZXBlbmRlbmN5LndhaXQs
Li4uCiA8dWludD4uPHN0cj4uPHVpbnQ+Wy08dWludD5dLjxpbnQgPD0gMD5bLzxpbnQgPD0gMD5d
Wy4uLl0uPDB8MT4sLi4uCitCLjx1aW50PgogTS48dWludD4uPHN0cj5bfDxzdHI+XS4uLgogUHxY
Ljx1aW50Pi48aW50PgogZHxwfHN8dHxxfGEuPGludD4sLi4uCkBAIC0yNCw2ICsyNSw3IEBAIEFk
ZGl0aW9uYWwgd29ya2xvYWQgc3RlcHMgYXJlIGFsc28gc3VwcG9ydGVkOgogICdxJyAtIFRocm90
dGxlIHRvIG4gbWF4IHF1ZXVlIGRlcHRoLgogICdmJyAtIENyZWF0ZSBhIHN5bmMgZmVuY2UuCiAg
J2EnIC0gQWR2YW5jZSB0aGUgcHJldmlvdXNseSBjcmVhdGVkIHN5bmMgZmVuY2UuCisgJ0InIC0g
VHVybiBvbiBjb250ZXh0IGxvYWQgYmFsYW5jaW5nLgogICdNJyAtIFNldCB1cCBlbmdpbmUgbWFw
LgogICdQJyAtIENvbnRleHQgcHJpb3JpdHkuCiAgJ1gnIC0gQ29udGV4dCBwcmVlbXB0aW9uIGNv
bnRyb2wuCkBAIC0xODQsMyArMTg2LDE2IEBAIEV4YW1wbGU6CiBNLjEuVkNTCiAKIFRoaXMgc2V0
cyB1cCB0aGUgZW5naW5lIG1hcCB0byBhbGwgYXZhaWxhYmxlIFZDUyBjbGFzcyBlbmdpbmVzLgor
CitDb250ZXh0IGxvYWQgYmFsYW5jaW5nCistLS0tLS0tLS0tLS0tLS0tLS0tLS0tCisKK0NvbnRl
eHQgbG9hZCBiYWxhbmNpbmcgKGFrYSBWaXJ0dWFsIEVuZ2luZSkgaXMgYW4gaTkxNSBmZWF0dXJl
IHdoZXJlIHRoZSBkcml2ZXIKK3dpbGwgcGljayB0aGUgYmVzdCBlbmdpbmUgKG1vc3QgaWRsZSkg
dG8gc3VibWl0IHRvIGdpdmVuIHByZXZpb3VzbHkgY29uZmlndXJlZAorZW5naW5lIG1hcC4KKwor
RXhhbXBsZToKKworICBCLjEKKworVGhpcyBlbmFibGVzIGxvYWQgYmFsYW5jaW5nIGZvciBjb250
ZXh0IG51bWJlciBvbmUuCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeA==

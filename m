Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 954FB833ED
	for <lists+intel-gfx@lfdr.de>; Tue,  6 Aug 2019 16:26:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B60176E3AA;
	Tue,  6 Aug 2019 14:26:09 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 18ECF6E3AA
 for <intel-gfx@lists.freedesktop.org>; Tue,  6 Aug 2019 14:26:09 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 06 Aug 2019 07:26:08 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,353,1559545200"; d="scan'208";a="198328718"
Received: from fmsmsx105.amr.corp.intel.com ([10.18.124.203])
 by fmsmga004.fm.intel.com with ESMTP; 06 Aug 2019 07:26:08 -0700
Received: from fmsmsx125.amr.corp.intel.com (10.18.125.40) by
 FMSMSX105.amr.corp.intel.com (10.18.124.203) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Tue, 6 Aug 2019 07:26:08 -0700
Received: from fmsmsx120.amr.corp.intel.com ([169.254.15.194]) by
 FMSMSX125.amr.corp.intel.com ([169.254.2.73]) with mapi id 14.03.0439.000;
 Tue, 6 Aug 2019 07:26:08 -0700
From: "Bloomfield, Jon" <jon.bloomfield@intel.com>
To: Chris Wilson <chris@chris-wilson.co.uk>, "intel-gfx@lists.freedesktop.org"
 <intel-gfx@lists.freedesktop.org>
Thread-Topic: [PATCH 5/5] drm/i915: Cancel non-persistent contexts on close
Thread-Index: AQHVTF3WOspWOWKwrUWKuzI5V+dLE6buKlBw
Date: Tue, 6 Aug 2019 14:26:07 +0000
Message-ID: <AD48BB7FB99B174FBCC69E228F58B3B68B3A9B4F@fmsmsx120.amr.corp.intel.com>
References: <20190806134725.25321-1-chris@chris-wilson.co.uk>
 <20190806134725.25321-5-chris@chris-wilson.co.uk>
In-Reply-To: <20190806134725.25321-5-chris@chris-wilson.co.uk>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-titus-metadata-40: eyJDYXRlZ29yeUxhYmVscyI6IiIsIk1ldGFkYXRhIjp7Im5zIjoiaHR0cDpcL1wvd3d3LnRpdHVzLmNvbVwvbnNcL0ludGVsMyIsImlkIjoiMTFhZjhlYTctYjNhMi00YTQ0LTg1MzYtN2FjNzk3NGY3ZDRjIiwicHJvcHMiOlt7Im4iOiJDVFBDbGFzc2lmaWNhdGlvbiIsInZhbHMiOlt7InZhbHVlIjoiQ1RQX05UIn1dfV19LCJTdWJqZWN0TGFiZWxzIjpbXSwiVE1DVmVyc2lvbiI6IjE3LjEwLjE4MDQuNDkiLCJUcnVzdGVkTGFiZWxIYXNoIjoiU0w5UVZNM0tZcWNTNVwvWUNTdUhoTzZicEtMRVRRQTRJcVhOcTdPSmtWdVwvUThWZVJNVG04cG52RlVRbjlCK0k4In0=
x-ctpclassification: CTP_NT
dlp-product: dlpe-windows
dlp-version: 11.0.600.7
dlp-reaction: no-action
x-originating-ip: [10.1.200.107]
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH 5/5] drm/i915: Cancel non-persistent
 contexts on close
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBDaHJpcyBXaWxzb24gPGNocmlz
QGNocmlzLXdpbHNvbi5jby51az4NCj4gU2VudDogVHVlc2RheSwgQXVndXN0IDYsIDIwMTkgNjo0
NyBBTQ0KPiBUbzogaW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZw0KPiBDYzogQ2hyaXMg
V2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+OyBKb29uYXMgTGFodGluZW4NCj4gPGpv
b25hcy5sYWh0aW5lbkBsaW51eC5pbnRlbC5jb20+OyBXaW5pYXJza2ksIE1pY2hhbA0KPiA8bWlj
aGFsLndpbmlhcnNraUBpbnRlbC5jb20+OyBCbG9vbWZpZWxkLCBKb24gPGpvbi5ibG9vbWZpZWxk
QGludGVsLmNvbT4NCj4gU3ViamVjdDogW1BBVENIIDUvNV0gZHJtL2k5MTU6IENhbmNlbCBub24t
cGVyc2lzdGVudCBjb250ZXh0cyBvbiBjbG9zZQ0KPiANCj4gTm9ybWFsbHksIHdlIHJlbHkgb24g
b3VyIGhhbmdjaGVjayB0byBwcmV2ZW50IHBlcnNpc3RlbnQgYmF0Y2hlcyBmcm9tDQo+IGhvZ2dp
bmcgdGhlIEdQVS4gSG93ZXZlciwgaWYgdGhlIHVzZXIgZGlzYWJsZXMgaGFuZ2NoZWNrLCB0aGlz
IG1lY2hhbmlzbQ0KPiBicmVha3MgZG93bi4gRGVzcGl0ZSBvdXIgaW5zaXN0ZW5jZSB0aGF0IHRo
aXMgaXMgdW5zYWZlLCB0aGUgdXNlcnMgYXJlDQo+IGVxdWFsbHkgaW5zaXN0ZW50IHRoYXQgdGhl
eSB3YW50IHRvIHVzZSBlbmRsZXNzIGJhdGNoZXMgYW5kIHdpbGwgZGlzYWJsZQ0KPiB0aGUgaGFu
Z2NoZWNrIG1lY2hhbmlzbS4gV2UgYXJlIGxvb2tpbmcgYXJlIHBlcmhhcHMgcmVwbGFjaW5nIGhh
bmdjaGVjaw0KPiB3aXRoIGEgc29mdGVyIG1lY2hhbmlzbSwgdGhhdCBzZW5kcyBhIHB1bHNlIGRv
d24gdGhlIGVuZ2luZSB0byBjaGVjayBpZg0KPiBpdCBpcyB3ZWxsLiBXZSBjYW4gdXNlIHRoZSBz
YW1lIHByZWVtcHRpdmUgcHVsc2UgdG8gZmx1c2ggYW4gYWN0aXZlDQo+IHBlcnNpc3RlbnQgY29u
dGV4dCBvZmYgdGhlIEdQVSB1cG9uIGNvbnRleHQgY2xvc2UsIHByZXZlbnRpbmcgcmVzb3VyY2Vz
DQo+IGJlaW5nIGxvc3QgYW5kIHVua2lsbGFibGUgcmVxdWVzdHMgcmVtYWluaW5nIG9uIHRoZSBH
UFUsIGFmdGVyIHByb2Nlc3MNCj4gdGVybWluYXRpb24uIFRvIGF2b2lkIGNoYW5naW5nIHRoZSBB
QkkgYW5kIGFjY2lkZW50YWxseSBicmVha2luZw0KPiBleGlzdGluZyB1c2Vyc3BhY2UsIHdlIG1h
a2UgdGhlIHBlcnNpc3RlbmNlIG9mIGEgY29udGV4dCBleHBsaWNpdCBhbmQNCj4gZW5hYmxlIGl0
IGJ5IGRlZmF1bHQuIFVzZXJzcGFjZSBjYW4gb3B0IG91dCBvZiBwZXJzaXN0ZW50IG1vZGUgKGZv
cmNpbmcNCj4gcmVxdWVzdHMgdG8gYmUgY2FuY2VsbGVkIHdoZW4gdGhlIGNvbnRleHQgaXMgY2xv
c2VkIGJ5IHByb2Nlc3MNCj4gdGVybWluYXRpb24gb3IgZXhwbGljaXRseSkgYnkgYSBjb250ZXh0
IHBhcmFtZXRlciwgb3IgdG8gZmFjaWxpdGF0ZQ0KPiBleGlzdGluZyB1c2UtY2FzZXMgYnkgZGlz
YWJsaW5nIGhhbmdjaGVjayAoaTkxNS5lbmFibGVfaGFuZ2NoZWNrPTApLg0KPiAoTm90ZSwgb25l
IG9mIHRoZSBvdXRjb21lcyBmb3Igc3VwcG9ydGluZyBlbmRsZXNzIG1vZGUgd2lsbCBiZSB0aGUN
Cj4gcmVtb3ZhbCBvZiBoYW5nY2hlY2tpbmcsIGF0IHdoaWNoIHBvaW50IG9wdGluZyBpbnRvIHBl
cnNpc3RlbnQgbW9kZSB3aWxsDQo+IGJlIG1hbmRhdG9yeSwgb3IgbWF5YmUgdGhlIGRlZmF1bHQu
KQ0KPiANCj4gVGVzdGNhc2U6IGlndC9nZW1fY3R4X3BlcnNpc3RlbmNlDQo+IFNpZ25lZC1vZmYt
Ynk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPg0KPiBDYzogSm9vbmFz
IExhaHRpbmVuIDxqb29uYXMubGFodGluZW5AbGludXguaW50ZWwuY29tPg0KPiBDYzogTWljaGHF
giBXaW5pYXJza2kgPG1pY2hhbC53aW5pYXJza2lAaW50ZWwuY29tPg0KPiBDYzogSm9uIEJsb29t
ZmllbGQgPGpvbi5ibG9vbWZpZWxkQGludGVsLmNvbT4NCj4gDQo+IC0tLQ0KPiBTYW1lIHNvcnQg
b2YgY2F2ZWF0cyBhcyBmb3IgaGFuZ2NoZWNrLCBhIGZldyBjb3JuZXIgY2FzZXMgbmVlZA0KPiBz
dHJ1Y3RfbXV0ZXggYW5kIHNvbWUgcHJlYWxsb2NhdGlvbi4NCj4gLS0tDQo+ICBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgICAgICAgICAgfCAgMyArLQ0KPiAgZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYyAgIHwgNzkgKysrKysrKysrKysrKysr
KysrKw0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCAgIHwg
MTUgKysrKw0KPiAgLi4uL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dF90eXBlcy5o
IHwgIDEgKw0KPiAgLi4uL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmMg
IHwgNTMgKysrKysrKysrKysrKw0KPiAgLi4uL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVf
aGVhcnRiZWF0LmggIHwgMTQgKysrKw0KPiAgaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oICAg
ICAgICAgICAgICAgICAgIHwgMTUgKysrKw0KPiAgNyBmaWxlcyBjaGFuZ2VkLCAxNzkgaW5zZXJ0
aW9ucygrKSwgMSBkZWxldGlvbigtKQ0KPiAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQuYw0KPiAgY3JlYXRlIG1vZGUgMTAw
NjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQuaA0KPiAN
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvTWFrZWZpbGUNCj4gaW5kZXggYTEwMTY4NThkMDE0Li40MjQxN2Q4NzQ5NmUg
MTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlDQo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlDQo+IEBAIC03MSw5ICs3MSwxMCBAQCBvYmoteSAr
PSBndC8NCj4gIGd0LXkgKz0gXA0KPiAgCWd0L2ludGVsX2JyZWFkY3J1bWJzLm8gXA0KPiAgCWd0
L2ludGVsX2NvbnRleHQubyBcDQo+IC0JZ3QvaW50ZWxfZW5naW5lX3Bvb2wubyBcDQo+ICAJZ3Qv
aW50ZWxfZW5naW5lX2NzLm8gXA0KPiArCWd0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQubyBcDQo+
ICAJZ3QvaW50ZWxfZW5naW5lX3BtLm8gXA0KPiArCWd0L2ludGVsX2VuZ2luZV9wb29sLm8gXA0K
PiAgCWd0L2ludGVsX2d0Lm8gXA0KPiAgCWd0L2ludGVsX2d0X3BtLm8gXA0KPiAgCWd0L2ludGVs
X2hhbmdjaGVjay5vIFwNCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9jb250ZXh0LmMNCj4gYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
Y29udGV4dC5jDQo+IGluZGV4IDY0ZjdhNTMzZTg4Ni4uNTcxOGI3NGY5NWI3IDEwMDY0NA0KPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jDQo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMNCj4gQEAgLTcwLDYg
KzcwLDcgQEANCj4gICNpbmNsdWRlIDxkcm0vaTkxNV9kcm0uaD4NCj4gDQo+ICAjaW5jbHVkZSAi
Z3QvaW50ZWxfbHJjX3JlZy5oIg0KPiArI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV9oZWFydGJl
YXQuaCINCj4gDQo+ICAjaW5jbHVkZSAiaTkxNV9nZW1fY29udGV4dC5oIg0KPiAgI2luY2x1ZGUg
Imk5MTVfZ2xvYmFscy5oIg0KPiBAQCAtMzczLDYgKzM3NCw0NSBAQCB2b2lkIGk5MTVfZ2VtX2Nv
bnRleHRfcmVsZWFzZShzdHJ1Y3Qga3JlZiAqcmVmKQ0KPiAgCQlxdWV1ZV93b3JrKGk5MTUtPndx
LCAmaTkxNS0+Y29udGV4dHMuZnJlZV93b3JrKTsNCj4gIH0NCj4gDQo+ICtzdGF0aWMgdm9pZCBr
aWxsX2NvbnRleHQoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCkNCj4gK3sNCj4gKwlzdHJ1
Y3QgaTkxNV9nZW1fZW5naW5lc19pdGVyIGl0Ow0KPiArCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZTsNCj4gKwlpbnRlbF9lbmdpbmVfbWFza190IHRtcCwgYWN0aXZlOw0KPiArCXN0cnVj
dCBpbnRlbF9jb250ZXh0ICpjZTsNCj4gKw0KPiArCWlmIChpOTE1X2dlbV9jb250ZXh0X2lzX2Jh
bm5lZChjdHgpKQ0KPiArCQlyZXR1cm47DQo+ICsNCj4gKwlpOTE1X2dlbV9jb250ZXh0X3NldF9i
YW5uZWQoY3R4KTsNCj4gKw0KPiArCWFjdGl2ZSA9IDA7DQo+ICsJZm9yX2VhY2hfZ2VtX2VuZ2lu
ZShjZSwgaTkxNV9nZW1fY29udGV4dF9sb2NrX2VuZ2luZXMoY3R4KSwgaXQpIHsNCj4gKwkJc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcnE7DQo+ICsNCj4gKwkJaWYgKCFjZS0+cmluZykNCj4gKwkJCWNv
bnRpbnVlOw0KPiArDQo+ICsJCXJxID0gaTkxNV9hY3RpdmVfcmVxdWVzdF9nZXRfdW5sb2NrZWQo
JmNlLT5yaW5nLT50aW1lbGluZS0NCj4gPmxhc3RfcmVxdWVzdCk7DQo+ICsJCWlmICghcnEpDQo+
ICsJCQljb250aW51ZTsNCj4gKw0KPiArCQlhY3RpdmUgfD0gcnEtPmVuZ2luZS0+bWFzazsNCj4g
KwkJaTkxNV9yZXF1ZXN0X3B1dChycSk7DQo+ICsJfQ0KPiArCWk5MTVfZ2VtX2NvbnRleHRfdW5s
b2NrX2VuZ2luZXMoY3R4KTsNCj4gKw0KPiArCS8qDQo+ICsJICogU2VuZCBhICJoaWdoIHByaW9y
aXR5IHB1bHNlIiBkb3duIHRoZSBlbmdpbmUgdG8gY2F1c2UgdGhlDQo+ICsJICogY3VycmVudCBy
ZXF1ZXN0IHRvIGJlIG1vbWVudGFyaWx5IHByZWVtcHRlZC4gKElmIGl0IGZhaWxzIHRvDQo+ICsJ
ICogYmUgcHJlZW1wdGVkLCBpdCB3aWxsIGJlIHJlc2V0KS4gQXMgd2UgaGF2ZSBtYXJrZWQgb3Vy
IGNvbnRleHQNCj4gKwkgKiBhcyBiYW5uZWQsIGFueSBpbmNvbXBsZXRlIHJlcXVlc3QsIGluY2x1
ZGluZyBhbnkgcnVubmluZywgd2lsbA0KPiArCSAqIGJlIHNraXBwZWQuDQo+ICsJICovDQo+ICsJ
Zm9yX2VhY2hfZW5naW5lX21hc2tlZChlbmdpbmUsIGN0eC0+aTkxNSwgYWN0aXZlLCB0bXApDQo+
ICsJCWludGVsX2VuZ2luZV9wdWxzZShlbmdpbmUpOw0KPiArfQ0KPiArDQo+ICBzdGF0aWMgdm9p
ZCBjb250ZXh0X2Nsb3NlKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpDQo+ICB7DQo+ICAJ
bXV0ZXhfbG9jaygmY3R4LT5tdXRleCk7DQo+IEBAIC0zOTQsNiArNDM0LDE1IEBAIHN0YXRpYyB2
b2lkIGNvbnRleHRfY2xvc2Uoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQNCj4gKmN0eCkNCj4gIAls
dXRfY2xvc2UoY3R4KTsNCj4gDQo+ICAJbXV0ZXhfdW5sb2NrKCZjdHgtPm11dGV4KTsNCj4gKw0K
PiArCS8qDQo+ICsJICogSWYgdGhlIHVzZXIgaGFzIGRpc2FibGVkIGhhbmdjaGVja2luZywgd2Ug
Y2FuIG5vdCBiZSBzdXJlIHRoYXQNCj4gKwkgKiB0aGUgYmF0Y2hlcyB3aWxsIGV2ZXIgY29tcGxl
dGUgYW5kIGxldCB0aGUgY29udGV4dCBiZSBmcmVlZC4NCj4gKwkgKiBGb3JjaWJseSBraWxsIG9m
ZiBhbnkgcmVtYWluaW5nIHJlcXVlc3RzIGluIHRoaXMgY2FzZS4NCj4gKwkgKi8NCg0KUGVyc2lz
dGVuY2UgaXMgaW5kZXBlbmRlbnQgb2YgaGFuZ2NoZWNrIHdoaWNoIG1ha2VzIHRoZSBhYm92ZSBj
b21tZW50IHVucmVwcmVzZW50YXRpdmUgb2YgdGhlIGJlbG93IGNvZGUuDQpEbyB3ZSBldmVuIG5l
ZWQgYSBjb21tZW50IGhlcmUsIGl0IGxvb2tzIHNlbGYtZXhwbGFuYXRvcnk/IEluc3RlYWQgbWF5
YmUgY29tbWVudCB0aGUgZGVmYXVsdGluZyBzdGF0ZSBpbiBfX2NyZWF0ZUNvbnRleHQoKSB0byBt
YWtlIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gaGFuZ2NoZWNrIGFuZCBwZXJzaXN0ZW5jZT8NCg0K
PiArCWlmICghaTkxNV9nZW1fY29udGV4dF9pc19wZXJzaXN0ZW50KGN0eCkpDQo+ICsJCWtpbGxf
Y29udGV4dChjdHgpOw0KPiArDQo+ICAJaTkxNV9nZW1fY29udGV4dF9wdXQoY3R4KTsNCj4gIH0N
Cj4gDQo+IEBAIC00MzMsNiArNDgyLDggQEAgX19jcmVhdGVfY29udGV4dChzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqaTkxNSkNCj4gDQo+ICAJaTkxNV9nZW1fY29udGV4dF9zZXRfYmFubmFibGUo
Y3R4KTsNCj4gIAlpOTE1X2dlbV9jb250ZXh0X3NldF9yZWNvdmVyYWJsZShjdHgpOw0KPiArCWlm
IChpOTE1X21vZHBhcmFtcy5lbmFibGVfaGFuZ2NoZWNrKQ0KPiArCQlpOTE1X2dlbV9jb250ZXh0
X3NldF9wZXJzaXN0ZW5jZShjdHgpOw0KPiANCj4gIAljdHgtPnJpbmdfc2l6ZSA9IDQgKiBQQUdF
X1NJWkU7DQo+IA0KPiBAQCAtMTc0NSw2ICsxNzk2LDI1IEBAIGdldF9lbmdpbmVzKHN0cnVjdCBp
OTE1X2dlbV9jb250ZXh0ICpjdHgsDQo+ICAJcmV0dXJuIGVycjsNCj4gIH0NCj4gDQo+ICtzdGF0
aWMgaW50DQo+ICtzZXRfcGVyc2lzdGVuY2Uoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwN
Cj4gKwkJY29uc3Qgc3RydWN0IGRybV9pOTE1X2dlbV9jb250ZXh0X3BhcmFtICphcmdzKQ0KPiAr
ew0KPiArCWlmIChhcmdzLT5zaXplKQ0KPiArCQlyZXR1cm4gLUVJTlZBTDsNCj4gKw0KPiArCWlm
ICghYXJncy0+dmFsdWUpIHsNCj4gKwkJaTkxNV9nZW1fY29udGV4dF9jbGVhcl9wZXJzaXN0ZW5j
ZShjdHgpOw0KPiArCQlyZXR1cm4gMDsNCj4gKwl9DQo+ICsNCj4gKwlpZiAoIShjdHgtPmk5MTUt
PmNhcHMuc2NoZWR1bGVyICYNCj4gSTkxNV9TQ0hFRFVMRVJfQ0FQX1BSRUVNUFRJT04pKQ0KPiAr
CQlyZXR1cm4gLUVOT0RFVjsNCj4gKw0KPiArCWk5MTVfZ2VtX2NvbnRleHRfc2V0X3BlcnNpc3Rl
bmNlKGN0eCk7DQo+ICsJcmV0dXJuIDA7DQo+ICt9DQo+ICsNCj4gIHN0YXRpYyBpbnQgY3R4X3Nl
dHBhcmFtKHN0cnVjdCBkcm1faTkxNV9maWxlX3ByaXZhdGUgKmZwcml2LA0KPiAgCQkJc3RydWN0
IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwNCj4gIAkJCXN0cnVjdCBkcm1faTkxNV9nZW1fY29udGV4
dF9wYXJhbSAqYXJncykNCj4gQEAgLTE4MjIsNiArMTg5MiwxMCBAQCBzdGF0aWMgaW50IGN0eF9z
ZXRwYXJhbShzdHJ1Y3QNCj4gZHJtX2k5MTVfZmlsZV9wcml2YXRlICpmcHJpdiwNCj4gIAkJcmV0
ID0gc2V0X2VuZ2luZXMoY3R4LCBhcmdzKTsNCj4gIAkJYnJlYWs7DQo+IA0KPiArCWNhc2UgSTkx
NV9DT05URVhUX1BBUkFNX1BFUlNJU1RFTkNFOg0KPiArCQlyZXQgPSBzZXRfcGVyc2lzdGVuY2Uo
Y3R4LCBhcmdzKTsNCj4gKwkJYnJlYWs7DQo+ICsNCj4gIAljYXNlIEk5MTVfQ09OVEVYVF9QQVJB
TV9CQU5fUEVSSU9EOg0KPiAgCWRlZmF1bHQ6DQo+ICAJCXJldCA9IC1FSU5WQUw7DQo+IEBAIC0y
Mjc4LDYgKzIzNTIsMTEgQEAgaW50IGk5MTVfZ2VtX2NvbnRleHRfZ2V0cGFyYW1faW9jdGwoc3Ry
dWN0DQo+IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwNCj4gIAkJcmV0ID0gZ2V0X2VuZ2lu
ZXMoY3R4LCBhcmdzKTsNCj4gIAkJYnJlYWs7DQo+IA0KPiArCWNhc2UgSTkxNV9DT05URVhUX1BB
UkFNX1BFUlNJU1RFTkNFOg0KPiArCQlhcmdzLT5zaXplID0gMDsNCj4gKwkJYXJncy0+dmFsdWUg
PSBpOTE1X2dlbV9jb250ZXh0X2lzX3BlcnNpc3RlbnQoY3R4KTsNCj4gKwkJYnJlYWs7DQo+ICsN
Cj4gIAljYXNlIEk5MTVfQ09OVEVYVF9QQVJBTV9CQU5fUEVSSU9EOg0KPiAgCWRlZmF1bHQ6DQo+
ICAJCXJldCA9IC1FSU5WQUw7DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fY29udGV4dC5oDQo+IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX2NvbnRleHQuaA0KPiBpbmRleCAxMDZlMmNjZjdhNGMuLjE4MzRkMWRmMmFjOSAxMDA2NDQN
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaA0KPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5oDQo+IEBAIC03
NCw2ICs3NCwyMSBAQCBzdGF0aWMgaW5saW5lIHZvaWQNCj4gaTkxNV9nZW1fY29udGV4dF9jbGVh
cl9yZWNvdmVyYWJsZShzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqYw0KPiAgCWNsZWFyX2JpdChV
Q09OVEVYVF9SRUNPVkVSQUJMRSwgJmN0eC0+dXNlcl9mbGFncyk7DQo+ICB9DQo+IA0KPiArc3Rh
dGljIGlubGluZSBib29sIGk5MTVfZ2VtX2NvbnRleHRfaXNfcGVyc2lzdGVudChjb25zdCBzdHJ1
Y3QNCj4gaTkxNV9nZW1fY29udGV4dCAqY3R4KQ0KPiArew0KPiArCXJldHVybiB0ZXN0X2JpdChV
Q09OVEVYVF9QRVJTSVNURU5DRSwgJmN0eC0+dXNlcl9mbGFncyk7DQo+ICt9DQo+ICsNCj4gK3N0
YXRpYyBpbmxpbmUgdm9pZCBpOTE1X2dlbV9jb250ZXh0X3NldF9wZXJzaXN0ZW5jZShzdHJ1Y3Qg
aTkxNV9nZW1fY29udGV4dA0KPiAqY3R4KQ0KPiArew0KPiArCXNldF9iaXQoVUNPTlRFWFRfUEVS
U0lTVEVOQ0UsICZjdHgtPnVzZXJfZmxhZ3MpOw0KPiArfQ0KPiArDQo+ICtzdGF0aWMgaW5saW5l
IHZvaWQgaTkxNV9nZW1fY29udGV4dF9jbGVhcl9wZXJzaXN0ZW5jZShzdHJ1Y3QNCj4gaTkxNV9n
ZW1fY29udGV4dCAqY3R4KQ0KPiArew0KPiArCWNsZWFyX2JpdChVQ09OVEVYVF9QRVJTSVNURU5D
RSwgJmN0eC0+dXNlcl9mbGFncyk7DQo+ICt9DQo+ICsNCj4gIHN0YXRpYyBpbmxpbmUgYm9vbCBp
OTE1X2dlbV9jb250ZXh0X2lzX2Jhbm5lZChjb25zdCBzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dA0K
PiAqY3R4KQ0KPiAgew0KPiAgCXJldHVybiB0ZXN0X2JpdChDT05URVhUX0JBTk5FRCwgJmN0eC0+
ZmxhZ3MpOw0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X2NvbnRleHRfdHlwZXMuaA0KPiBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9j
b250ZXh0X3R5cGVzLmgNCj4gaW5kZXggYTAyZDk4NDk0MDc4Li5iZjQxYjQzZmZhOWEgMTAwNjQ0
DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0X3R5cGVz
LmgNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlw
ZXMuaA0KPiBAQCAtMTM3LDYgKzEzNyw3IEBAIHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0IHsNCj4g
ICNkZWZpbmUgVUNPTlRFWFRfTk9fRVJST1JfQ0FQVFVSRQkxDQo+ICAjZGVmaW5lIFVDT05URVhU
X0JBTk5BQkxFCQkyDQo+ICAjZGVmaW5lIFVDT05URVhUX1JFQ09WRVJBQkxFCQkzDQo+ICsjZGVm
aW5lIFVDT05URVhUX1BFUlNJU1RFTkNFCQk0DQo+IA0KPiAgCS8qKg0KPiAgCSAqIEBmbGFnczog
c21hbGwgc2V0IG9mIGJvb2xlYW5zDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmMNCj4gYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmMNCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQNCj4gaW5k
ZXggMDAwMDAwMDAwMDAwLi4wYzA2MzJhNDIzYTcNCj4gLS0tIC9kZXYvbnVsbA0KPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmMNCj4gQEAgLTAs
MCArMSw1MyBAQA0KPiArLyoNCj4gKyAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQNCj4g
KyAqDQo+ICsgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbg0KPiArICovDQo+
ICsNCj4gKyNpbmNsdWRlICJpOTE1X3JlcXVlc3QuaCINCj4gKw0KPiArI2luY2x1ZGUgImludGVs
X2NvbnRleHQuaCINCj4gKyNpbmNsdWRlICJpbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmgiDQo+ICsj
aW5jbHVkZSAiaW50ZWxfZW5naW5lX3BtLmgiDQo+ICsjaW5jbHVkZSAiaW50ZWxfZW5naW5lLmgi
DQo+ICsjaW5jbHVkZSAiaW50ZWxfZ3QuaCINCj4gKw0KPiArdm9pZCBpbnRlbF9lbmdpbmVfcHVs
c2Uoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQ0KPiArew0KPiArCXN0cnVjdCBpbnRl
bF9jb250ZXh0ICpjZSA9IGVuZ2luZS0+a2VybmVsX2NvbnRleHQ7DQo+ICsJc3RydWN0IGk5MTVf
c2NoZWRfYXR0ciBhdHRyID0geyAucHJpb3JpdHkgPSBJTlRfTUFYIH07DQo+ICsJc3RydWN0IGk5
MTVfcmVxdWVzdCAqcnE7DQo+ICsJaW50IGVyciA9IDA7DQo+ICsNCj4gKwlHRU1fQlVHX09OKCFl
bmdpbmUtPnNjaGVkdWxlKTsNCj4gKw0KPiArCWlmICghaW50ZWxfZW5naW5lX3BtX2dldF9pZl9h
d2FrZShlbmdpbmUpKQ0KPiArCQlyZXR1cm47DQo+ICsNCj4gKwltdXRleF9sb2NrKCZjZS0+cmlu
Zy0+dGltZWxpbmUtPm11dGV4KTsNCj4gKw0KPiArCWludGVsX2NvbnRleHRfZW50ZXIoY2UpOw0K
PiArCXJxID0gX19pOTE1X3JlcXVlc3RfY3JlYXRlKGNlLCBHRlBfTk9XQUlUIHwgX19HRlBfTk9X
QVJOKTsNCj4gKwlpbnRlbF9jb250ZXh0X2V4aXQoY2UpOw0KPiArCWlmIChJU19FUlIocnEpKSB7
DQo+ICsJCWVyciA9IFBUUl9FUlIocnEpOw0KPiArCQlnb3RvIG91dF91bmxvY2s7DQo+ICsJfQ0K
PiArCWk5MTVfcmVxdWVzdF9nZXQocnEpOw0KPiArDQo+ICsJcnEtPmZsYWdzIHw9IEk5MTVfUkVR
VUVTVF9TRU5USU5FTDsNCj4gKwlfX2k5MTVfcmVxdWVzdF9jb21taXQocnEpOw0KPiArDQo+ICsJ
bG9jYWxfYmhfZGlzYWJsZSgpOw0KPiArCWVuZ2luZS0+c2NoZWR1bGUocnEsICZhdHRyKTsNCj4g
Kwlsb2NhbF9iaF9lbmFibGUoKTsNCj4gKw0KPiArCWk5MTVfcmVxdWVzdF9wdXQocnEpOw0KPiAr
DQo+ICtvdXRfdW5sb2NrOg0KPiArCW11dGV4X3VubG9jaygmY2UtPnJpbmctPnRpbWVsaW5lLT5t
dXRleCk7DQo+ICsJaW50ZWxfY29udGV4dF90aW1lbGluZV91bmxvY2soY2UpOw0KPiArCWludGVs
X2VuZ2luZV9wbV9wdXQoZW5naW5lKTsNCj4gKwlpZiAoZXJyKSAvKiBYWFggbXVzdCBub3QgYmUg
YWxsb3dlZCB0byBmYWlsICovDQo+ICsJCURSTV9FUlJPUigiRmFpbGVkIHRvIHBpbmcgJXMsIGVy
cj0lZFxuIiwgZW5naW5lLT5uYW1lLA0KPiBlcnIpOw0KPiArfQ0KPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5oDQo+IGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5oDQo+IG5ldyBmaWxlIG1v
ZGUgMTAwNjQ0DQo+IGluZGV4IDAwMDAwMDAwMDAwMC4uODY3NjE3NDhkYzIxDQo+IC0tLSAvZGV2
L251bGwNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0
YmVhdC5oDQo+IEBAIC0wLDAgKzEsMTQgQEANCj4gKy8qDQo+ICsgKiBTUERYLUxpY2Vuc2UtSWRl
bnRpZmllcjogTUlUDQo+ICsgKg0KPiArICogQ29weXJpZ2h0IMKpIDIwMTkgSW50ZWwgQ29ycG9y
YXRpb24NCj4gKyAqLw0KPiArDQo+ICsjaWZuZGVmIElOVEVMX0VOR0lORV9IRUFSVEJFQVRfSA0K
PiArI2RlZmluZSBJTlRFTF9FTkdJTkVfSEVBUlRCRUFUX0gNCj4gKw0KPiArc3RydWN0IGludGVs
X2VuZ2luZV9jczsNCj4gKw0KPiArdm9pZCBpbnRlbF9lbmdpbmVfcHVsc2Uoc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqZW5naW5lKTsNCj4gKw0KPiArI2VuZGlmIC8qIElOVEVMX0VOR0lORV9IRUFS
VEJFQVRfSCAqLw0KPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oIGIv
aW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oDQo+IGluZGV4IDQ2OWRjNTEyY2NhMy4uZGJjODY5
MWQ3NWQwIDEwMDY0NA0KPiAtLS0gYS9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgNCj4gKysr
IGIvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oDQo+IEBAIC0xNTY1LDYgKzE1NjUsMjEgQEAg
c3RydWN0IGRybV9pOTE1X2dlbV9jb250ZXh0X3BhcmFtIHsNCj4gICAqICAgaTkxNV9jb250ZXh0
X2VuZ2luZXNfYm9uZCAoSTkxNV9DT05URVhUX0VOR0lORVNfRVhUX0JPTkQpDQo+ICAgKi8NCj4g
ICNkZWZpbmUgSTkxNV9DT05URVhUX1BBUkFNX0VOR0lORVMJMHhhDQo+ICsNCj4gKy8qDQo+ICsg
KiBJOTE1X0NPTlRFWFRfUEFSQU1fUEVSU0lTVEVOQ0U6DQo+ICsgKg0KPiArICogQWxsb3cgdGhl
IGNvbnRleHQgYW5kIGFjdGl2ZSByZW5kZXJpbmcgdG8gc3Vydml2ZSB0aGUgcHJvY2VzcyB1bnRp
bA0KPiArICogY29tcGxldGlvbi4gUGVyc2lzdGVuY2UgYWxsb3dzIGZpcmUtYW5kLWZvcmdldCBj
bGllbnRzIHRvIHF1ZXVlIHVwIGENCj4gKyAqIGJ1bmNoIG9mIHdvcmssIGhhbmQgdGhlIG91dHB1
dCBvdmVyIHRvIGEgZGlzcGxheSBzZXJ2ZXIgYW5kIHRoZSBxdWl0Lg0KPiArICogSWYgdGhlIGNv
bnRleHQgaXMgbm90IG1hcmtlZCBhcyBwZXJzaXN0ZW50LCB1cG9uIGNsb3NpbmcgKGVpdGhlciB2
aWENCj4gKyAqIGFuIGV4cGxpY2l0IERSTV9JOTE1X0dFTV9DT05URVhUX0RFU1RST1kgb3IgaW1w
bGljaXRseSBmcm9tIGZpbGUNCj4gY2xvc3VyZQ0KPiArICogb3IgcHJvY2VzcyB0ZXJtaW5hdGlv
biksIHRoZSBjb250ZXh0IGFuZCBhbnkgb3V0c3RhbmRpbmcgcmVxdWVzdHMgd2lsbCBiZQ0KPiAr
ICogY2FuY2VsbGVkIChhbmQgZXhwb3J0ZWQgZmVuY2VzIGZvciBjYW5jZWxsZWQgcmVxdWVzdHMg
bWFya2VkIGFzIC1FSU8pLg0KPiArICoNCj4gKyAqIEJ5IGRlZmF1bHQsIG5ldyBjb250ZXh0cyBh
bGxvdyBwZXJzaXN0ZW5jZS4NCj4gKyAqLw0KPiArI2RlZmluZSBJOTE1X0NPTlRFWFRfUEFSQU1f
UEVSU0lTVEVOQ0UJMHhiDQo+ICAvKiBNdXN0IGJlIGtlcHQgY29tcGFjdCAtLSBubyBob2xlcyBh
bmQgd2VsbCBkb2N1bWVudGVkICovDQo+IA0KPiAgCV9fdTY0IHZhbHVlOw0KPiAtLQ0KPiAyLjIz
LjAucmMxDQoNCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

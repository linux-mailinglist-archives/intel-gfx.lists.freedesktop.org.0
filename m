Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 2084A1AEA75
	for <lists+intel-gfx@lfdr.de>; Sat, 18 Apr 2020 09:14:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A79446E155;
	Sat, 18 Apr 2020 07:14:39 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A0BD46E155
 for <intel-gfx@lists.freedesktop.org>; Sat, 18 Apr 2020 07:14:35 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 20940517-1500050 
 for <intel-gfx@lists.freedesktop.org>; Sat, 18 Apr 2020 08:14:31 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Sat, 18 Apr 2020 08:14:30 +0100
Message-Id: <20200418071430.6779-2-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20200418071430.6779-1-chris@chris-wilson.co.uk>
References: <20200418071430.6779-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 2/2] drm/i915/gt: Use the RPM config register to
 determine clk frequencies
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Rm9yIG1hbnkgY29uZmlndXJhdGlvbiBkZXRhaWxzIHdpdGhpbiBSQzYgYW5kIFJQUyB3ZSBhcmUg
cHJvZ3JhbW1pbmcKaW50ZXJ2YWxzIGZvciB0aGUgaW50ZXJuYWwgY2xvY2tzLiBGcm9tIGdlbjEx
LCB0aGVzZSBjbG9ja3MgYXJlCmNvbmZpZ3VyYXRpb24gdmlhIHRoZSBSUE1fQ09ORklHIGFuZCBz
byBmb3IgY29udmVuaWVuY2UsIHdlIHdvdWxkIGxpa2UKdG8gY29udmVydCB0by9mcm9tIG1vcmUg
bmF0dXJhbCB1bml0cyAobnMpLgoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0Bj
aHJpcy13aWxzb24uY28udWs+CkNjOiBBbmRpIFNoeXRpIDxhbmRpLnNoeXRpQGludGVsLmNvbT4K
Q2M6IE1pa2EgS3VvcHBhbGEgPG1pa2Eua3VvcHBhbGFAbGludXguaW50ZWwuY29tPgpSZXZpZXdl
ZC1ieTogQW5kaSBTaHl0aSA8YW5kaS5zaHl0aUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvTWFrZWZpbGUgICAgICAgICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2RlYnVnZnNfZ3RfcG0uYyAgICAgICB8ICAyNyArKy0tLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYyAgICAgICAgICAgIHwgICAzICsKIC4uLi9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZ3RfY2xvY2tfdXRpbHMuYyAgICB8IDEwMiArKysrKysrKysrKysrKysrKysK
IC4uLi9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfY2xvY2tfdXRpbHMuaCAgICB8ICAyNyArKysr
KwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYyAgICAgICAgIHwgICAzICsK
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmggICAgICB8ICAgOSArLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcnBzLmMgICAgICAgICAgIHwgIDM4ICsrKyst
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3Jwcy5jICAgICAgICB8ICAgNyAr
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgICAgICAgICAgIHwgIDM0ICsr
Ky0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCAgICAgICAgICAgICAgIHwgIDI1
IC0tLS0tCiAxMSBmaWxlcyBjaGFuZ2VkLCAyMDYgaW5zZXJ0aW9ucygrKSwgNzAgZGVsZXRpb25z
KC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3Rf
Y2xvY2tfdXRpbHMuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2d0X2Nsb2NrX3V0aWxzLmgKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCmluZGV4IDZmMTEyZDhm
ODBjYS4uY2UyNGE0ZWU5NTkxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtl
ZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQpAQCAtOTEsNiArOTEsNyBA
QCBndC15ICs9IFwKIAlndC9pbnRlbF9nZ3R0Lm8gXAogCWd0L2ludGVsX2dndHRfZmVuY2luZy5v
IFwKIAlndC9pbnRlbF9ndC5vIFwKKwlndC9pbnRlbF9ndF9jbG9ja191dGlscy5vIFwKIAlndC9p
bnRlbF9ndF9pcnEubyBcCiAJZ3QvaW50ZWxfZ3RfcG0ubyBcCiAJZ3QvaW50ZWxfZ3RfcG1faXJx
Lm8gXApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvZGVidWdmc19ndF9wbS5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvZGVidWdmc19ndF9wbS5jCmluZGV4IGFhYjMwZDkw
ODA3Mi4uZDRlM2I0YzBjNDhmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9k
ZWJ1Z2ZzX2d0X3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvZGVidWdmc19ndF9w
bS5jCkBAIC0xMCw2ICsxMCw3IEBACiAjaW5jbHVkZSAiZGVidWdmc19ndF9wbS5oIgogI2luY2x1
ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3QuaCIKKyNpbmNsdWRlICJpbnRlbF9n
dF9jbG9ja191dGlscy5oIgogI2luY2x1ZGUgImludGVsX2xsYy5oIgogI2luY2x1ZGUgImludGVs
X3JjNi5oIgogI2luY2x1ZGUgImludGVsX3Jwcy5oIgpAQCAtMzk0LDIxICszOTUsMjMgQEAgc3Rh
dGljIGludCBmcmVxdWVuY3lfc2hvdyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkK
IAkJc2VxX3ByaW50ZihtLCAiUlBERUNMSU1JVDogMHglMDh4XG4iLCBycGRlY2xpbWl0KTsKIAkJ
c2VxX3ByaW50ZihtLCAiUlBOU1dSRVE6ICVkTUh6XG4iLCByZXFmKTsKIAkJc2VxX3ByaW50Ziht
LCAiQ0FHRjogJWRNSHpcbiIsIGNhZ2YpOwotCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgVVAgRUk6
ICVkICglZHVzKVxuIiwKLQkJCSAgIHJwdXBlaSwgR1RfUE1fSU5URVJWQUxfVE9fVVMoaTkxNSwg
cnB1cGVpKSk7Ci0JCXNlcV9wcmludGYobSwgIlJQIENVUiBVUDogJWQgKCVkdXMpXG4iLAotCQkJ
ICAgcnBjdXJ1cCwgR1RfUE1fSU5URVJWQUxfVE9fVVMoaTkxNSwgcnBjdXJ1cCkpOwotCQlzZXFf
cHJpbnRmKG0sICJSUCBQUkVWIFVQOiAlZCAoJWR1cylcbiIsCi0JCQkgICBycHByZXZ1cCwgR1Rf
UE1fSU5URVJWQUxfVE9fVVMoaTkxNSwgcnBwcmV2dXApKTsKKwkJc2VxX3ByaW50ZihtLCAiUlAg
Q1VSIFVQIEVJOiAlZCAoJWRucylcbiIsCisJCQkgICBycHVwZWksIGludGVsX2d0X3BtX2ludGVy
dmFsX3RvX25zKGd0LCBycHVwZWkpKTsKKwkJc2VxX3ByaW50ZihtLCAiUlAgQ1VSIFVQOiAlZCAo
JWRucylcbiIsCisJCQkgICBycGN1cnVwLCBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucyhndCwg
cnBjdXJ1cCkpOworCQlzZXFfcHJpbnRmKG0sICJSUCBQUkVWIFVQOiAlZCAoJWRucylcbiIsCisJ
CQkgICBycHByZXZ1cCwgaW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoZ3QsIHJwcHJldnVwKSk7
CiAJCXNlcV9wcmludGYobSwgIlVwIHRocmVzaG9sZDogJWQlJVxuIiwKIAkJCSAgIHJwcy0+cG93
ZXIudXBfdGhyZXNob2xkKTsKIAotCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgRE9XTiBFSTogJWQg
KCVkdXMpXG4iLAotCQkJICAgcnBkb3duZWksIEdUX1BNX0lOVEVSVkFMX1RPX1VTKGk5MTUsIHJw
ZG93bmVpKSk7Ci0JCXNlcV9wcmludGYobSwgIlJQIENVUiBET1dOOiAlZCAoJWR1cylcbiIsCi0J
CQkgICBycGN1cmRvd24sIEdUX1BNX0lOVEVSVkFMX1RPX1VTKGk5MTUsIHJwY3VyZG93bikpOwot
CQlzZXFfcHJpbnRmKG0sICJSUCBQUkVWIERPV046ICVkICglZHVzKVxuIiwKLQkJCSAgIHJwcHJl
dmRvd24sIEdUX1BNX0lOVEVSVkFMX1RPX1VTKGk5MTUsIHJwcHJldmRvd24pKTsKKwkJc2VxX3By
aW50ZihtLCAiUlAgQ1VSIERPV04gRUk6ICVkICglZG5zKVxuIiwKKwkJCSAgIHJwZG93bmVpLCBp
bnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucyhndCwgcnBkb3duZWkpKTsKKwkJc2VxX3ByaW50Ziht
LCAiUlAgQ1VSIERPV046ICVkICglZG5zKVxuIiwKKwkJCSAgIHJwY3VyZG93biwKKwkJCSAgIGlu
dGVsX2d0X3BtX2ludGVydmFsX3RvX25zKGd0LCBycGN1cmRvd24pKTsKKwkJc2VxX3ByaW50Ziht
LCAiUlAgUFJFViBET1dOOiAlZCAoJWRucylcbiIsCisJCQkgICBycHByZXZkb3duLAorCQkJICAg
aW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoZ3QsIHJwcHJldmRvd24pKTsKIAkJc2VxX3ByaW50
ZihtLCAiRG93biB0aHJlc2hvbGQ6ICVkJSVcbiIsCiAJCQkgICBycHMtPnBvd2VyLmRvd25fdGhy
ZXNob2xkKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3Qu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmMKaW5kZXggMWM5OWNjNzIzMDVh
Li5kOWNmODE5NGM5OTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2d0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYwpAQCAtNyw2ICs3
LDcgQEAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImludGVsX2NvbnRleHQuaCIK
ICNpbmNsdWRlICJpbnRlbF9ndC5oIgorI2luY2x1ZGUgImludGVsX2d0X2Nsb2NrX3V0aWxzLmgi
CiAjaW5jbHVkZSAiaW50ZWxfZ3RfcG0uaCIKICNpbmNsdWRlICJpbnRlbF9ndF9yZXF1ZXN0cy5o
IgogI2luY2x1ZGUgImludGVsX21vY3MuaCIKQEAgLTU3Niw2ICs1NzcsOCBAQCBpbnQgaW50ZWxf
Z3RfaW5pdChzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQogCSAqLwogCWludGVsX3VuY29yZV9mb3JjZXdh
a2VfZ2V0KGd0LT51bmNvcmUsIEZPUkNFV0FLRV9BTEwpOwogCisJaW50ZWxfZ3RfaW5pdF9jbG9j
a19mcmVxdWVuY3koZ3QpOworCiAJZXJyID0gaW50ZWxfZ3RfaW5pdF9zY3JhdGNoKGd0LCBJU19H
RU4oZ3QtPmk5MTUsIDIpID8gU1pfMjU2SyA6IFNaXzRLKTsKIAlpZiAoZXJyKQogCQlnb3RvIG91
dF9mdzsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2Nsb2Nr
X3V0aWxzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9jbG9ja191dGlscy5j
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uODUyYTdkNzMxYjNiCi0t
LSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfY2xvY2tf
dXRpbHMuYwpAQCAtMCwwICsxLDEwMiBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1J
VAorLyoKKyAqIENvcHlyaWdodCDCqSAyMDIwIEludGVsIENvcnBvcmF0aW9uCisgKi8KKworI2lu
Y2x1ZGUgImk5MTVfZHJ2LmgiCisjaW5jbHVkZSAiaW50ZWxfZ3QuaCIKKyNpbmNsdWRlICJpbnRl
bF9ndF9jbG9ja191dGlscy5oIgorCisjZGVmaW5lIE1IWl8xOV8yIDE5MjAwMDAwIC8qIDE5LjJN
SHosIDUyLjA4M25zICovCisjZGVmaW5lIE1IWl8yNCAyNDAwMDAwMCAvKiAyNE1IeiwgODMuMzMz
bnMgKi8KKyNkZWZpbmUgTUhaXzI1IDI1MDAwMDAwIC8qIDI1TUh6LCA4MG5zICovCisKK3N0YXRp
YyB1MzIgcmVhZF9jbG9ja19mcmVxdWVuY3koY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCkKK3sK
KwlpZiAoSU5URUxfR0VOKGd0LT5pOTE1KSA+PSAxMSkgeworCQl1MzIgY29uZmlnOworCisJCWNv
bmZpZyA9IGludGVsX3VuY29yZV9yZWFkKGd0LT51bmNvcmUsIFJQTV9DT05GSUcwKTsKKwkJY29u
ZmlnICY9IEdFTjExX1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV9NQVNLOworCQljb25m
aWcgPj49IEdFTjExX1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV9TSElGVDsKKworCQlz
d2l0Y2ggKGNvbmZpZykgeworCQljYXNlIDA6IHJldHVybiBNSFpfMjQ7CisJCWNhc2UgMToKKwkJ
Y2FzZSAyOiByZXR1cm4gTUhaXzE5XzI7CisJCWRlZmF1bHQ6CisJCWNhc2UgMzogcmV0dXJuIE1I
Wl8yNTsKKwkJfQorCX0gZWxzZSBpZiAoSU5URUxfR0VOKGd0LT5pOTE1KSA+PSA5KSB7CisJCWlm
IChJU19HRU45X0xQKGd0LT5pOTE1KSkKKwkJCXJldHVybiBNSFpfMTlfMjsKKwkJZWxzZQorCQkJ
cmV0dXJuIE1IWl8yNDsKKwl9IGVsc2UgeworCQlyZXR1cm4gTUhaXzI1OworCX0KK30KKwordm9p
ZCBpbnRlbF9ndF9pbml0X2Nsb2NrX2ZyZXF1ZW5jeShzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQorewor
CS8qCisJICogTm90ZSB0aGF0IG9uIGdlbjExKywgdGhlIGNsb2NrIGZyZXF1ZW5jeSBtYXkgYmUg
cmVjb25maWd1cmVkLgorCSAqIFdlIGRvIG5vdCwgYW5kIHdlIGFzc3VtZSBub2JvZHkgZWxzZSBk
b2VzLgorCSAqLworCWd0LT5jbG9ja19mcmVxdWVuY3kgPSByZWFkX2Nsb2NrX2ZyZXF1ZW5jeShn
dCk7CisJR1RfVFJBQ0UoZ3QsCisJCSAiVXNpbmcgY2xvY2sgZnJlcXVlbmN5OiAlZGtIelxuIiwK
KwkJIGd0LT5jbG9ja19mcmVxdWVuY3kgLyAxMDAwKTsKK30KKworI2lmIElTX0VOQUJMRUQoQ09O
RklHX0RSTV9JOTE1X0RFQlVHX0dFTSkKK3ZvaWQgaW50ZWxfZ3RfY2hlY2tfY2xvY2tfZnJlcXVl
bmN5KGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QpCit7CisJaWYgKGd0LT5jbG9ja19mcmVxdWVu
Y3kgIT0gcmVhZF9jbG9ja19mcmVxdWVuY3koZ3QpKSB7CisJCWRldl9lcnIoZ3QtPmk5MTUtPmRy
bS5kZXYsCisJCQkiR1QgY2xvY2sgZnJlcXVlbmN5IGNoYW5nZWQsIHdhcyAldUh6LCBub3cgJXVI
eiFcbiIsCisJCQlndC0+Y2xvY2tfZnJlcXVlbmN5LAorCQkJcmVhZF9jbG9ja19mcmVxdWVuY3ko
Z3QpKTsKKwl9Cit9CisjZW5kaWYKKworc3RhdGljIHU2NCBkaXZfdTY0X3JvdW5kdXAodTY0IG5v
bSwgdTMyIGRlbikKK3sKKwlyZXR1cm4gZGl2X3U2NChub20gKyBkZW4gLSAxLCBkZW4pOworfQor
Cit1MzIgaW50ZWxfZ3RfY2xvY2tfaW50ZXJ2YWxfdG9fbnMoY29uc3Qgc3RydWN0IGludGVsX2d0
ICpndCwgdTMyIGNvdW50KQoreworCXJldHVybiBkaXZfdTY0X3JvdW5kdXAobXVsX3UzMl91MzIo
Y291bnQsIDEwMDAgKiAxMDAwICogMTAwMCksCisJCQkgICAgICAgZ3QtPmNsb2NrX2ZyZXF1ZW5j
eSk7Cit9CisKK3UzMiBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucyhjb25zdCBzdHJ1Y3QgaW50
ZWxfZ3QgKmd0LCB1MzIgY291bnQpCit7CisJcmV0dXJuIGludGVsX2d0X2Nsb2NrX2ludGVydmFs
X3RvX25zKGd0LCAxNiAqIGNvdW50KTsKK30KKwordTMyIGludGVsX2d0X25zX3RvX2Nsb2NrX2lu
dGVydmFsKGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QsIHUzMiBucykKK3sKKwlyZXR1cm4gZGl2
X3U2NF9yb3VuZHVwKG11bF91MzJfdTMyKGd0LT5jbG9ja19mcmVxdWVuY3ksIG5zKSwKKwkJCSAg
ICAgICAxMDAwICogMTAwMCAqIDEwMDApOworfQorCit1MzIgaW50ZWxfZ3RfbnNfdG9fcG1faW50
ZXJ2YWwoY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCwgdTMyIG5zKQoreworCXUzMiB2YWw7CisK
KwkvKgorCSAqIE1ha2UgdGhlc2UgYSBtdWx0aXBsZSBvZiBtYWdpYyAyNSB0byBhdm9pZCBTTkIg
KGVnLiBEZWxsIFhQUworCSAqIDgzMDApIGZyZWV6aW5nIHVwIGFyb3VuZCBHUFUgaGFuZ3MuIExv
b2tzIGFzIGlmIGV2ZW4KKwkgKiBzY2hlZHVsaW5nL3RpbWVyIGludGVycnVwdHMgc3RhcnQgbWlz
YmVoYXZpbmcgaWYgdGhlIFJQUworCSAqIEVJL3RocmVzaG9sZHMgYXJlICJiYWQiLCBsZWFkaW5n
IHRvIGEgdmVyeSBzbHVnZ2lzaCBvciBldmVuCisJICogZnJvemVuIG1hY2hpbmUuCisJICovCisJ
dmFsID0gRElWX1JPVU5EX1VQKGludGVsX2d0X25zX3RvX2Nsb2NrX2ludGVydmFsKGd0LCBucyks
IDE2KTsKKwlpZiAoSVNfR0VOKGd0LT5pOTE1LCA2KSkKKwkJdmFsID0gcm91bmR1cCh2YWwsIDI1
KTsKKworCXJldHVybiB2YWw7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ndF9jbG9ja191dGlscy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
Z3RfY2xvY2tfdXRpbHMuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAu
LmRkYTg2OWE1OTg5MgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2d0X2Nsb2NrX3V0aWxzLmgKQEAgLTAsMCArMSwyNyBAQAorLyogU1BEWC1MaWNlbnNl
LUlkZW50aWZpZXI6IE1JVCAqLworLyoKKyAqIENvcHlyaWdodCDCqSAyMDIwIEludGVsIENvcnBv
cmF0aW9uCisgKi8KKworI2lmbmRlZiBfX0lOVEVMX0dUX0NMT0NLX1VUSUxTX0hfXworI2RlZmlu
ZSBfX0lOVEVMX0dUX0NMT0NLX1VUSUxTX0hfXworCisjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4K
Kworc3RydWN0IGludGVsX2d0OworCit2b2lkIGludGVsX2d0X2luaXRfY2xvY2tfZnJlcXVlbmN5
KHN0cnVjdCBpbnRlbF9ndCAqZ3QpOworCisjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVf
REVCVUdfR0VNKQordm9pZCBpbnRlbF9ndF9jaGVja19jbG9ja19mcmVxdWVuY3koY29uc3Qgc3Ry
dWN0IGludGVsX2d0ICpndCk7CisjZWxzZQorc3RhdGljIHZvaWQgaW50ZWxfZ3RfY2hlY2tfY2xv
Y2tfZnJlcXVlbmN5KGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QpIHt9CisjZW5kaWYKKwordTMy
IGludGVsX2d0X2Nsb2NrX2ludGVydmFsX3RvX25zKGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3Qs
IHUzMiBjb3VudCk7Cit1MzIgaW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoY29uc3Qgc3RydWN0
IGludGVsX2d0ICpndCwgdTMyIGNvdW50KTsKKwordTMyIGludGVsX2d0X25zX3RvX2Nsb2NrX2lu
dGVydmFsKGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QsIHUzMiBucyk7Cit1MzIgaW50ZWxfZ3Rf
bnNfdG9fcG1faW50ZXJ2YWwoY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCwgdTMyIG5zKTsKKwor
I2VuZGlmIC8qIF9fSU5URUxfR1RfQ0xPQ0tfVVRJTFNfSF9fICovCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZ3RfcG0uYwppbmRleCA2YmRiNzQ4OTJhMWUuLjRjNGM3NGVmNGYyMSAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jCkBAIC0xMiw2ICsxMiw3IEBACiAjaW5jbHVk
ZSAiaW50ZWxfY29udGV4dC5oIgogI2luY2x1ZGUgImludGVsX2VuZ2luZV9wbS5oIgogI2luY2x1
ZGUgImludGVsX2d0LmgiCisjaW5jbHVkZSAiaW50ZWxfZ3RfY2xvY2tfdXRpbHMuaCIKICNpbmNs
dWRlICJpbnRlbF9ndF9wbS5oIgogI2luY2x1ZGUgImludGVsX2d0X3JlcXVlc3RzLmgiCiAjaW5j
bHVkZSAiaW50ZWxfbGxjLmgiCkBAIC0xMzgsNiArMTM5LDggQEAgc3RhdGljIHZvaWQgZ3Rfc2Fu
aXRpemUoc3RydWN0IGludGVsX2d0ICpndCwgYm9vbCBmb3JjZSkKIAl3YWtlcmVmID0gaW50ZWxf
cnVudGltZV9wbV9nZXQoZ3QtPnVuY29yZS0+cnBtKTsKIAlpbnRlbF91bmNvcmVfZm9yY2V3YWtl
X2dldChndC0+dW5jb3JlLCBGT1JDRVdBS0VfQUxMKTsKIAorCWludGVsX2d0X2NoZWNrX2Nsb2Nr
X2ZyZXF1ZW5jeShndCk7CisKIAkvKgogCSAqIEFzIHdlIGhhdmUganVzdCByZXN1bWVkIHRoZSBt
YWNoaW5lIGFuZCB3b2tlbiB0aGUgZGV2aWNlIHVwIGZyb20KIAkgKiBkZWVwIFBDSSBzbGVlcCAo
cHJlc3VtYWJseSBEM19jb2xkKSwgYXNzdW1lIHRoZSBIVyBoYXMgYmVlbiByZXNldApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaCBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmgKaW5kZXggOTY4OTBkZDEyYjVmLi5kMDJj
Y2I3MzVlMjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5
cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaApAQCAt
NjEsNiArNjEsNyBAQCBzdHJ1Y3QgaW50ZWxfZ3QgewogCXN0cnVjdCBsaXN0X2hlYWQgY2xvc2Vk
X3ZtYTsKIAlzcGlubG9ja190IGNsb3NlZF9sb2NrOyAvKiBndWFyZHMgdGhlIGxpc3Qgb2YgY2xv
c2VkX3ZtYSAqLwogCisJa3RpbWVfdCBsYXN0X2luaXRfdGltZTsKIAlzdHJ1Y3QgaW50ZWxfcmVz
ZXQgcmVzZXQ7CiAKIAkvKioKQEAgLTcyLDE0ICs3MywxMiBAQCBzdHJ1Y3QgaW50ZWxfZ3Qgewog
CSAqLwogCWludGVsX3dha2VyZWZfdCBhd2FrZTsKIAorCXUzMiBjbG9ja19mcmVxdWVuY3k7CisK
IAlzdHJ1Y3QgaW50ZWxfbGxjIGxsYzsKIAlzdHJ1Y3QgaW50ZWxfcmM2IHJjNjsKIAlzdHJ1Y3Qg
aW50ZWxfcnBzIHJwczsKIAotCWt0aW1lX3QgbGFzdF9pbml0X3RpbWU7Ci0KLQlzdHJ1Y3QgaTkx
NV92bWEgKnNjcmF0Y2g7Ci0KIAlzcGlubG9ja190IGlycV9sb2NrOwogCXUzMiBndF9pbXI7CiAJ
dTMyIHBtX2llcjsKQEAgLTk3LDYgKzk2LDggQEAgc3RydWN0IGludGVsX2d0IHsKIAkgKiBSZXNl
cnZlZCBmb3IgZXhjbHVzaXZlIHVzZSBieSB0aGUga2VybmVsLgogCSAqLwogCXN0cnVjdCBpOTE1
X2FkZHJlc3Nfc3BhY2UgKnZtOworCisJc3RydWN0IGk5MTVfdm1hICpzY3JhdGNoOwogfTsKIAog
ZW51bSBpbnRlbF9ndF9zY3JhdGNoX2ZpZWxkIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX3Jwcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcnBz
LmMKaW5kZXggNDIyNzVlMjVlYTFiLi45ZTc0YTViMjFmYzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX3Jwcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX3Jwcy5jCkBAIC04LDYgKzgsNyBAQAogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNp
bmNsdWRlICJpbnRlbF9ndC5oIgorI2luY2x1ZGUgImludGVsX2d0X2Nsb2NrX3V0aWxzLmgiCiAj
aW5jbHVkZSAiaW50ZWxfZ3RfaXJxLmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3RfcG1faXJxLmgiCiAj
aW5jbHVkZSAiaW50ZWxfcnBzLmgiCkBAIC01MzUsOCArNTM2LDggQEAgc3RhdGljIHUzMiBycHNf
bGltaXRzKHN0cnVjdCBpbnRlbF9ycHMgKnJwcywgdTggdmFsKQogCiBzdGF0aWMgdm9pZCBycHNf
c2V0X3Bvd2VyKHN0cnVjdCBpbnRlbF9ycHMgKnJwcywgaW50IG5ld19wb3dlcikKIHsKLQlzdHJ1
Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSBycHNfdG9fdW5jb3JlKHJwcyk7Ci0Jc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBycHNfdG9faTkxNShycHMpOworCXN0cnVjdCBpbnRlbF9n
dCAqZ3QgPSBycHNfdG9fZ3QocnBzKTsKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSBn
dC0+dW5jb3JlOwogCXUzMiB0aHJlc2hvbGRfdXAgPSAwLCB0aHJlc2hvbGRfZG93biA9IDA7IC8q
IGluICUgKi8KIAl1MzIgZWlfdXAgPSAwLCBlaV9kb3duID0gMDsKIApAQCAtNTgxLDIzICs1ODIs
MjUgQEAgc3RhdGljIHZvaWQgcnBzX3NldF9wb3dlcihzdHJ1Y3QgaW50ZWxfcnBzICpycHMsIGlu
dCBuZXdfcG93ZXIpCiAJLyogV2hlbiBieXQgY2FuIHN1cnZpdmUgd2l0aG91dCBzeXN0ZW0gaGFu
ZyB3aXRoIGR5bmFtaWMKIAkgKiBzdyBmcmVxIGFkanVzdG1lbnRzLCB0aGlzIHJlc3RyaWN0aW9u
IGNhbiBiZSBsaWZ0ZWQuCiAJICovCi0JaWYgKElTX1ZBTExFWVZJRVcoaTkxNSkpCisJaWYgKElT
X1ZBTExFWVZJRVcoZ3QtPmk5MTUpKQogCQlnb3RvIHNraXBfaHdfd3JpdGU7CiAKLQlHVF9UUkFD
RShycHNfdG9fZ3QocnBzKSwKKwlHVF9UUkFDRShndCwKIAkJICJjaGFuZ2luZyBwb3dlciBtb2Rl
IFslZF0sIHVwICVkJSUgQCAlZHVzLCBkb3duICVkJSUgQCAlZHVzXG4iLAogCQkgbmV3X3Bvd2Vy
LCB0aHJlc2hvbGRfdXAsIGVpX3VwLCB0aHJlc2hvbGRfZG93biwgZWlfZG93bik7CiAKLQlzZXQo
dW5jb3JlLCBHRU42X1JQX1VQX0VJLCBHVF9JTlRFUlZBTF9GUk9NX1VTKGk5MTUsIGVpX3VwKSk7
CisJc2V0KHVuY29yZSwgR0VONl9SUF9VUF9FSSwKKwkgICAgaW50ZWxfZ3RfbnNfdG9fcG1faW50
ZXJ2YWwoZ3QsIGVpX3VwICogMTAwMCkpOwogCXNldCh1bmNvcmUsIEdFTjZfUlBfVVBfVEhSRVNI
T0xELAotCSAgICBHVF9JTlRFUlZBTF9GUk9NX1VTKGk5MTUsIGVpX3VwICogdGhyZXNob2xkX3Vw
IC8gMTAwKSk7CisJICAgIGludGVsX2d0X25zX3RvX3BtX2ludGVydmFsKGd0LCBlaV91cCAqIHRo
cmVzaG9sZF91cCAqIDEwKSk7CiAKLQlzZXQodW5jb3JlLCBHRU42X1JQX0RPV05fRUksIEdUX0lO
VEVSVkFMX0ZST01fVVMoaTkxNSwgZWlfZG93bikpOworCXNldCh1bmNvcmUsIEdFTjZfUlBfRE9X
Tl9FSSwKKwkgICAgaW50ZWxfZ3RfbnNfdG9fcG1faW50ZXJ2YWwoZ3QsIGVpX2Rvd24gKiAxMDAw
KSk7CiAJc2V0KHVuY29yZSwgR0VONl9SUF9ET1dOX1RIUkVTSE9MRCwKLQkgICAgR1RfSU5URVJW
QUxfRlJPTV9VUyhpOTE1LCBlaV9kb3duICogdGhyZXNob2xkX2Rvd24gLyAxMDApKTsKKwkgICAg
aW50ZWxfZ3RfbnNfdG9fcG1faW50ZXJ2YWwoZ3QsIGVpX2Rvd24gKiB0aHJlc2hvbGRfZG93biAq
IDEwKSk7CiAKIAlzZXQodW5jb3JlLCBHRU42X1JQX0NPTlRST0wsCi0JICAgIChJTlRFTF9HRU4o
aTkxNSkgPiA5ID8gMCA6IEdFTjZfUlBfTUVESUFfVFVSQk8pIHwKKwkgICAgKElOVEVMX0dFTihn
dC0+aTkxNSkgPiA5ID8gMCA6IEdFTjZfUlBfTUVESUFfVFVSQk8pIHwKIAkgICAgR0VONl9SUF9N
RURJQV9IV19OT1JNQUxfTU9ERSB8CiAJICAgIEdFTjZfUlBfTUVESUFfSVNfR0ZYIHwKIAkgICAg
R0VONl9SUF9FTkFCTEUgfApAQCAtOTM0LDE3ICs5MzcsMTcgQEAgc3RhdGljIGJvb2wgcnBzX3Jl
c2V0KHN0cnVjdCBpbnRlbF9ycHMgKnJwcykKIC8qIFNlZSB0aGUgR2VuOV9HVF9QTV9Qcm9ncmFt
bWluZ19HdWlkZSBkb2MgZm9yIHRoZSBiZWxvdyAqLwogc3RhdGljIGJvb2wgZ2VuOV9ycHNfZW5h
YmxlKHN0cnVjdCBpbnRlbF9ycHMgKnJwcykKIHsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSA9IHJwc190b19pOTE1KHJwcyk7Ci0Jc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlID0g
cnBzX3RvX3VuY29yZShycHMpOworCXN0cnVjdCBpbnRlbF9ndCAqZ3QgPSBycHNfdG9fZ3QocnBz
KTsKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSBndC0+dW5jb3JlOwogCiAJLyogUHJv
Z3JhbSBkZWZhdWx0cyBhbmQgdGhyZXNob2xkcyBmb3IgUlBTICovCi0JaWYgKElTX0dFTihpOTE1
LCA5KSkKKwlpZiAoSVNfR0VOKGd0LT5pOTE1LCA5KSkKIAkJaW50ZWxfdW5jb3JlX3dyaXRlX2Z3
KHVuY29yZSwgR0VONl9SQ19WSURFT19GUkVRLAogCQkJCSAgICAgIEdFTjlfRlJFUVVFTkNZKHJw
cy0+cnAxX2ZyZXEpKTsKIAogCS8qIDEgc2Vjb25kIHRpbWVvdXQgKi8KIAlpbnRlbF91bmNvcmVf
d3JpdGVfZncodW5jb3JlLCBHRU42X1JQX0RPV05fVElNRU9VVCwKLQkJCSAgICAgIEdUX0lOVEVS
VkFMX0ZST01fVVMoaTkxNSwgMTAwMDAwMCkpOworCQkJICAgICAgaW50ZWxfZ3RfbnNfdG9fcG1f
aW50ZXJ2YWwoZ3QsIDEwMDAwMDApKTsKIAogCWludGVsX3VuY29yZV93cml0ZV9mdyh1bmNvcmUs
IEdFTjZfUlBfSURMRV9IWVNURVJTSVMsIDB4YSk7CiAKQEAgLTEyMjEsNiArMTIyNCwxMSBAQCB2
b2lkIGludGVsX3Jwc19lbmFibGUoc3RydWN0IGludGVsX3JwcyAqcnBzKQogCXN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1ID0gcnBzX3RvX2k5MTUocnBzKTsKIAlzdHJ1Y3QgaW50ZWxfdW5j
b3JlICp1bmNvcmUgPSBycHNfdG9fdW5jb3JlKHJwcyk7CiAKKwlpZiAoIUhBU19SUFMoaTkxNSkp
CisJCXJldHVybjsKKworCWludGVsX2d0X2NoZWNrX2Nsb2NrX2ZyZXF1ZW5jeShycHNfdG9fZ3Qo
cnBzKSk7CisKIAlpbnRlbF91bmNvcmVfZm9yY2V3YWtlX2dldCh1bmNvcmUsIEZPUkNFV0FLRV9B
TEwpOwogCWlmIChJU19DSEVSUllWSUVXKGk5MTUpKQogCQlycHMtPmVuYWJsZWQgPSBjaHZfcnBz
X2VuYWJsZShycHMpOwpAQCAtMTc1Nyw3ICsxNzY1LDcgQEAgc3RhdGljIHUzMiByZWFkX2NhZ2Yo
c3RydWN0IGludGVsX3JwcyAqcnBzKQogCQlmcmVxID0gdmx2X3B1bml0X3JlYWQoaTkxNSwgUFVO
SVRfUkVHX0dQVV9GUkVRX1NUUyk7CiAJCXZsdl9wdW5pdF9wdXQoaTkxNSk7CiAJfSBlbHNlIHsK
LQkJZnJlcSA9IGludGVsX3VuY29yZV9yZWFkKHJwc190b19ndChycHMpLT51bmNvcmUsIEdFTjZf
UlBTVEFUMSk7CisJCWZyZXEgPSBpbnRlbF91bmNvcmVfcmVhZChycHNfdG9fdW5jb3JlKHJwcyks
IEdFTjZfUlBTVEFUMSk7CiAJfQogCiAJcmV0dXJuIGludGVsX3Jwc19nZXRfY2FnZihycHMsIGZy
ZXEpOwpAQCAtMTc2NSw3ICsxNzczLDcgQEAgc3RhdGljIHUzMiByZWFkX2NhZ2Yoc3RydWN0IGlu
dGVsX3JwcyAqcnBzKQogCiB1MzIgaW50ZWxfcnBzX3JlYWRfYWN0dWFsX2ZyZXF1ZW5jeShzdHJ1
Y3QgaW50ZWxfcnBzICpycHMpCiB7Ci0Jc3RydWN0IGludGVsX3J1bnRpbWVfcG0gKnJwbSA9IHJw
c190b19ndChycHMpLT51bmNvcmUtPnJwbTsKKwlzdHJ1Y3QgaW50ZWxfcnVudGltZV9wbSAqcnBt
ID0gcnBzX3RvX3VuY29yZShycHMpLT5ycG07CiAJaW50ZWxfd2FrZXJlZl90IHdha2VyZWY7CiAJ
dTMyIGZyZXEgPSAwOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxm
dGVzdF9ycHMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3Jwcy5jCmluZGV4
IDM2MGY1NmFhNGI4Mi4uMzNlYzhiNTVhZWJlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9zZWxmdGVzdF9ycHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxm
dGVzdF9ycHMuYwpAQCAtNiw2ICs2LDcgQEAKICNpbmNsdWRlIDxsaW51eC9zb3J0Lmg+CiAKICNp
bmNsdWRlICJpbnRlbF9lbmdpbmVfcG0uaCIKKyNpbmNsdWRlICJpbnRlbF9ndF9jbG9ja191dGls
cy5oIgogI2luY2x1ZGUgImludGVsX2d0X3BtLmgiCiAjaW5jbHVkZSAiaW50ZWxfcmM2LmgiCiAj
aW5jbHVkZSAic2VsZnRlc3RfcnBzLmgiCkBAIC04NSw3ICs4Niw4IEBAIHN0YXRpYyBpbnQgX19y
cHNfdXBfaW50ZXJydXB0KHN0cnVjdCBpbnRlbF9ycHMgKnJwcywKIAl9CiAKIAl0aW1lb3V0ID0g
aW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBHRU42X1JQX1VQX0VJKTsKLQl0aW1lb3V0ID0gR1Rf
UE1fSU5URVJWQUxfVE9fVVMoZW5naW5lLT5pOTE1LCB0aW1lb3V0KTsKKwl0aW1lb3V0ID0gaW50
ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoZW5naW5lLT5ndCwgdGltZW91dCk7CisJdGltZW91dCAv
PSAxMDAwOwogCiAJc2xlZXBfZm9yX2VpKHJwcywgdGltZW91dCk7CiAJR0VNX0JVR19PTihpOTE1
X3JlcXVlc3RfY29tcGxldGVkKHJxKSk7CkBAIC0xMzUsNyArMTM3LDggQEAgc3RhdGljIGludCBf
X3Jwc19kb3duX2ludGVycnVwdChzdHJ1Y3QgaW50ZWxfcnBzICpycHMsCiAJfQogCiAJdGltZW91
dCA9IGludGVsX3VuY29yZV9yZWFkKHVuY29yZSwgR0VONl9SUF9ET1dOX0VJKTsKLQl0aW1lb3V0
ID0gR1RfUE1fSU5URVJWQUxfVE9fVVMoZW5naW5lLT5pOTE1LCB0aW1lb3V0KTsKKwl0aW1lb3V0
ID0gaW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoZW5naW5lLT5ndCwgdGltZW91dCk7CisJdGlt
ZW91dCAvPSAxMDAwOwogCiAJc2xlZXBfZm9yX2VpKHJwcywgdGltZW91dCk7CiAKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKaW5kZXggYWEzNWE1OWYxYzdkLi5lM2M1ZmYyNWM4MDcgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCkBAIC0zMiw2ICszMiw3IEBACiAjaW5jbHVk
ZSA8ZHJtL2RybV9kZWJ1Z2ZzLmg+CiAKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1fY29udGV4dC5o
IgorI2luY2x1ZGUgImd0L2ludGVsX2d0X2Nsb2NrX3V0aWxzLmgiCiAjaW5jbHVkZSAiZ3QvaW50
ZWxfZ3RfcG0uaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndF9yZXF1ZXN0cy5oIgogI2luY2x1ZGUg
Imd0L2ludGVsX3Jlc2V0LmgiCkBAIC05MjYsMjEgKzkyNywzMCBAQCBzdGF0aWMgaW50IGk5MTVf
ZnJlcXVlbmN5X2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpCiAJCXNlcV9w
cmludGYobSwgIlJQREVDTElNSVQ6IDB4JTA4eFxuIiwgcnBkZWNsaW1pdCk7CiAJCXNlcV9wcmlu
dGYobSwgIlJQTlNXUkVROiAlZE1IelxuIiwgcmVxZik7CiAJCXNlcV9wcmludGYobSwgIkNBR0Y6
ICVkTUh6XG4iLCBjYWdmKTsKLQkJc2VxX3ByaW50ZihtLCAiUlAgQ1VSIFVQIEVJOiAlZCAoJWR1
cylcbiIsCi0JCQkgICBycHVwZWksIEdUX1BNX0lOVEVSVkFMX1RPX1VTKGRldl9wcml2LCBycHVw
ZWkpKTsKLQkJc2VxX3ByaW50ZihtLCAiUlAgQ1VSIFVQOiAlZCAoJWR1cylcbiIsCi0JCQkgICBy
cGN1cnVwLCBHVF9QTV9JTlRFUlZBTF9UT19VUyhkZXZfcHJpdiwgcnBjdXJ1cCkpOwotCQlzZXFf
cHJpbnRmKG0sICJSUCBQUkVWIFVQOiAlZCAoJWR1cylcbiIsCi0JCQkgICBycHByZXZ1cCwgR1Rf
UE1fSU5URVJWQUxfVE9fVVMoZGV2X3ByaXYsIHJwcHJldnVwKSk7CisJCXNlcV9wcmludGYobSwg
IlJQIENVUiBVUCBFSTogJWQgKCVkbnMpXG4iLAorCQkJICAgcnB1cGVpLAorCQkJICAgaW50ZWxf
Z3RfcG1faW50ZXJ2YWxfdG9fbnMoJmRldl9wcml2LT5ndCwgcnB1cGVpKSk7CisJCXNlcV9wcmlu
dGYobSwgIlJQIENVUiBVUDogJWQgKCVkdW4pXG4iLAorCQkJICAgcnBjdXJ1cCwKKwkJCSAgIGlu
dGVsX2d0X3BtX2ludGVydmFsX3RvX25zKCZkZXZfcHJpdi0+Z3QsIHJwY3VydXApKTsKKwkJc2Vx
X3ByaW50ZihtLCAiUlAgUFJFViBVUDogJWQgKCVkbnMpXG4iLAorCQkJICAgcnBwcmV2dXAsCisJ
CQkgICBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucygmZGV2X3ByaXYtPmd0LCBycHByZXZ1cCkp
OwogCQlzZXFfcHJpbnRmKG0sICJVcCB0aHJlc2hvbGQ6ICVkJSVcbiIsCiAJCQkgICBycHMtPnBv
d2VyLnVwX3RocmVzaG9sZCk7CiAKLQkJc2VxX3ByaW50ZihtLCAiUlAgQ1VSIERPV04gRUk6ICVk
ICglZHVzKVxuIiwKLQkJCSAgIHJwZG93bmVpLCBHVF9QTV9JTlRFUlZBTF9UT19VUyhkZXZfcHJp
diwgcnBkb3duZWkpKTsKLQkJc2VxX3ByaW50ZihtLCAiUlAgQ1VSIERPV046ICVkICglZHVzKVxu
IiwKLQkJCSAgIHJwY3VyZG93biwgR1RfUE1fSU5URVJWQUxfVE9fVVMoZGV2X3ByaXYsIHJwY3Vy
ZG93bikpOwotCQlzZXFfcHJpbnRmKG0sICJSUCBQUkVWIERPV046ICVkICglZHVzKVxuIiwKLQkJ
CSAgIHJwcHJldmRvd24sIEdUX1BNX0lOVEVSVkFMX1RPX1VTKGRldl9wcml2LCBycHByZXZkb3du
KSk7CisJCXNlcV9wcmludGYobSwgIlJQIENVUiBET1dOIEVJOiAlZCAoJWRucylcbiIsCisJCQkg
ICBycGRvd25laSwKKwkJCSAgIGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKCZkZXZfcHJpdi0+
Z3QsCisJCQkJCQkgICAgICBycGRvd25laSkpOworCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgRE9X
TjogJWQgKCVkbnMpXG4iLAorCQkJICAgcnBjdXJkb3duLAorCQkJICAgaW50ZWxfZ3RfcG1faW50
ZXJ2YWxfdG9fbnMoJmRldl9wcml2LT5ndCwKKwkJCQkJCSAgICAgIHJwY3VyZG93bikpOworCQlz
ZXFfcHJpbnRmKG0sICJSUCBQUkVWIERPV046ICVkICglZG5zKVxuIiwKKwkJCSAgIHJwcHJldmRv
d24sCisJCQkgICBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucygmZGV2X3ByaXYtPmd0LAorCQkJ
CQkJICAgICAgcnBwcmV2ZG93bikpOwogCQlzZXFfcHJpbnRmKG0sICJEb3duIHRocmVzaG9sZDog
JWQlJVxuIiwKIAkJCSAgIHJwcy0+cG93ZXIuZG93bl90aHJlc2hvbGQpOwogCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9yZWcuaAppbmRleCA5ZTE5MjYyOWQ1ZTUuLjEzZTgwMjBiZTBjMCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3JlZy5oCkBAIC00MDE0LDMxICs0MDE0LDYgQEAgc3RhdGljIGlubGluZSBib29sIGk5
MTVfbW1pb19yZWdfdmFsaWQoaTkxNV9yZWdfdCByZWcpCiAjZGVmaW5lIEdFTjZfUlBfU1RBVEVf
Q0FQCV9NTUlPKE1DSEJBUl9NSVJST1JfQkFTRV9TTkIgKyAweDU5OTgpCiAjZGVmaW5lIEJYVF9S
UF9TVEFURV9DQVAgICAgICAgIF9NTUlPKDB4MTM4MTcwKQogCi0vKgotICogTWFrZSB0aGVzZSBh
IG11bHRpcGxlIG9mIG1hZ2ljIDI1IHRvIGF2b2lkIFNOQiAoZWcuIERlbGwgWFBTCi0gKiA4MzAw
KSBmcmVlemluZyB1cCBhcm91bmQgR1BVIGhhbmdzLiBMb29rcyBhcyBpZiBldmVuCi0gKiBzY2hl
ZHVsaW5nL3RpbWVyIGludGVycnVwdHMgc3RhcnQgbWlzYmVoYXZpbmcgaWYgdGhlIFJQUwotICog
RUkvdGhyZXNob2xkcyBhcmUgImJhZCIsIGxlYWRpbmcgdG8gYSB2ZXJ5IHNsdWdnaXNoIG9yIGV2
ZW4KLSAqIGZyb3plbiBtYWNoaW5lLgotICovCi0jZGVmaW5lIElOVEVSVkFMXzFfMjhfVVModXMp
CXJvdW5kdXAoKCh1cykgKiAxMDApID4+IDcsIDI1KQotI2RlZmluZSBJTlRFUlZBTF8xXzMzX1VT
KHVzKQkoKCh1cykgKiAzKSAgID4+IDIpCi0jZGVmaW5lIElOVEVSVkFMXzBfODMzX1VTKHVzKQko
KCh1cykgKiA2KSAvIDUpCi0jZGVmaW5lIEdUX0lOVEVSVkFMX0ZST01fVVMoZGV2X3ByaXYsIHVz
KSAoSU5URUxfR0VOKGRldl9wcml2KSA+PSA5ID8gXAotCQkJCShJU19HRU45X0xQKGRldl9wcml2
KSA/IFwKLQkJCQlJTlRFUlZBTF8wXzgzM19VUyh1cykgOiBcCi0JCQkJSU5URVJWQUxfMV8zM19V
Uyh1cykpIDogXAotCQkJCUlOVEVSVkFMXzFfMjhfVVModXMpKQotCi0jZGVmaW5lIElOVEVSVkFM
XzFfMjhfVE9fVVMoaW50ZXJ2YWwpICAoKChpbnRlcnZhbCkgPDwgNykgLyAxMDApCi0jZGVmaW5l
IElOVEVSVkFMXzFfMzNfVE9fVVMoaW50ZXJ2YWwpICAoKChpbnRlcnZhbCkgPDwgMikgLyAzKQot
I2RlZmluZSBJTlRFUlZBTF8wXzgzM19UT19VUyhpbnRlcnZhbCkgKCgoaW50ZXJ2YWwpICogNSkg
IC8gNikKLSNkZWZpbmUgR1RfUE1fSU5URVJWQUxfVE9fVVMoZGV2X3ByaXYsIGludGVydmFsKSAo
SU5URUxfR0VOKGRldl9wcml2KSA+PSA5ID8gXAotICAgICAgICAgICAgICAgICAgICAgICAgICAg
KElTX0dFTjlfTFAoZGV2X3ByaXYpID8gXAotICAgICAgICAgICAgICAgICAgICAgICAgICAgSU5U
RVJWQUxfMF84MzNfVE9fVVMoaW50ZXJ2YWwpIDogXAotICAgICAgICAgICAgICAgICAgICAgICAg
ICAgSU5URVJWQUxfMV8zM19UT19VUyhpbnRlcnZhbCkpIDogXAotICAgICAgICAgICAgICAgICAg
ICAgICAgICAgSU5URVJWQUxfMV8yOF9UT19VUyhpbnRlcnZhbCkpCi0KIC8qCiAgKiBMb2dpY2Fs
IENvbnRleHQgcmVncwogICovCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeAo=

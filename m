Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 15AE28F610
	for <lists+intel-gfx@lfdr.de>; Thu, 15 Aug 2019 22:57:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7DA6E6EA7E;
	Thu, 15 Aug 2019 20:57:13 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CAFDE6EA7F
 for <intel-gfx@lists.freedesktop.org>; Thu, 15 Aug 2019 20:57:12 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18155949-1500050 
 for <intel-gfx@lists.freedesktop.org>; Thu, 15 Aug 2019 21:57:09 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 15 Aug 2019 21:57:06 +0100
Message-Id: <20190815205709.24285-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0.rc1
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 1/4] drm/i915/gt: Track timeline activeness in
 enter/exit
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TGlmdCBtb3ZpbmcgdGhlIHRpbWVsaW5lIHRvL2Zyb20gdGhlIGFjdGl2ZV9saXN0IG9uIGVudGVy
L2V4aXQgaW4gb3JkZXIKdG8gc2hvcnRlbiB0aGUgYWN0aXZlIHRyYWNraW5nIHNwYW4gaW4gY29t
cGFyaXNvbiB0byB0aGUgZXhpc3RpbmcKcGluL3VucGluLgoKU2lnbmVkLW9mZi1ieTogQ2hyaXMg
V2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+ClJldmlld2VkLWJ5OiBNYXR0aGV3IEF1
bGQgPG1hdHRoZXcuYXVsZEBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX3BtLmMgICAgICAgIHwgIDEgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfY29udGV4dC5jICAgICAgIHwgIDIgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
ZW5naW5lX3BtLmMgICAgIHwgIDIgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJj
LmMgICAgICAgICAgIHwgIDQgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxp
bmUuYyAgICAgIHwgOTggKysrKysrKy0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfdGltZWxpbmUuaCAgICAgIHwgIDMgKy0KIC4uLi9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfdGltZWxpbmVfdHlwZXMuaCAgICB8IDE4ICsrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L3NlbGZ0ZXN0X3RpbWVsaW5lLmMgICB8ICAyIC0KIDggZmlsZXMgY2hhbmdlZCwgNjQgaW5zZXJ0
aW9ucygrKSwgNjYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX3BtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
cG0uYwppbmRleCAxN2UzNjE4MjQxYzUuLjkyZTUzYzI1NDI0YyAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX3BtLmMKQEAgLTM3LDcgKzM3LDYgQEAgc3RhdGljIHZvaWQgaTkxNV9n
ZW1fcGFyayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlmb3JfZWFjaF9lbmdpbmUo
ZW5naW5lLCBpOTE1LCBpZCkKIAkJY2FsbF9pZGxlX2JhcnJpZXJzKGVuZ2luZSk7IC8qIGNsZWFu
dXAgYWZ0ZXIgd2VkZ2luZyAqLwogCi0JaW50ZWxfdGltZWxpbmVzX3BhcmsoaTkxNSk7CiAJaTkx
NV92bWFfcGFya2VkKGk5MTUpOwogCiAJaTkxNV9nbG9iYWxzX3BhcmsoKTsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYwppbmRleCA3NzgzM2YxNTU4YTkuLjkxMTQ5NTNiZjky
MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYwpAQCAtMjgwLDEwICsy
ODAsMTIgQEAgaW50IF9faW5pdCBpOTE1X2dsb2JhbF9jb250ZXh0X2luaXQodm9pZCkKIHZvaWQg
aW50ZWxfY29udGV4dF9lbnRlcl9lbmdpbmUoc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQogewog
CWludGVsX2VuZ2luZV9wbV9nZXQoY2UtPmVuZ2luZSk7CisJaW50ZWxfdGltZWxpbmVfZW50ZXIo
Y2UtPnRpbWVsaW5lKTsKIH0KIAogdm9pZCBpbnRlbF9jb250ZXh0X2V4aXRfZW5naW5lKHN0cnVj
dCBpbnRlbF9jb250ZXh0ICpjZSkKIHsKKwlpbnRlbF90aW1lbGluZV9leGl0KGNlLT50aW1lbGlu
ZSk7CiAJaW50ZWxfZW5naW5lX3BtX3B1dChjZS0+ZW5naW5lKTsKIH0KIApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3BtLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYwppbmRleCA0OWFkMDJjMzcyMGYuLmYzZjAxMDlm
OWUyMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3Bt
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3BtLmMKQEAgLTY2
LDYgKzY2LDggQEAgc3RhdGljIGJvb2wgc3dpdGNoX3RvX2tlcm5lbF9jb250ZXh0KHN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAkJLyogQ29udGV4dCBzd2l0Y2ggZmFpbGVkLCBob3Bl
IGZvciB0aGUgYmVzdCEgTWF5YmUgcmVzZXQ/ICovCiAJCXJldHVybiB0cnVlOwogCisJaW50ZWxf
dGltZWxpbmVfZW50ZXIocnEtPnRpbWVsaW5lKTsKKwogCS8qIENoZWNrIGFnYWluIG9uIHRoZSBu
ZXh0IHJldGlyZW1lbnQuICovCiAJZW5naW5lLT53YWtlcmVmX3NlcmlhbCA9IGVuZ2luZS0+c2Vy
aWFsICsgMTsKIAlpOTE1X3JlcXVlc3RfYWRkX2FjdGl2ZV9iYXJyaWVycyhycSk7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2xyYy5jCmluZGV4IGE1ZDliOTAyZDZlMy4uYjRjMjY2MmRiYzc1IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpAQCAtMzMwNiw2ICszMzA2LDggQEAgc3Rh
dGljIHZvaWQgdmlydHVhbF9jb250ZXh0X2VudGVyKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkK
IAogCWZvciAobiA9IDA7IG4gPCB2ZS0+bnVtX3NpYmxpbmdzOyBuKyspCiAJCWludGVsX2VuZ2lu
ZV9wbV9nZXQodmUtPnNpYmxpbmdzW25dKTsKKworCWludGVsX3RpbWVsaW5lX2VudGVyKGNlLT50
aW1lbGluZSk7CiB9CiAKIHN0YXRpYyB2b2lkIHZpcnR1YWxfY29udGV4dF9leGl0KHN0cnVjdCBp
bnRlbF9jb250ZXh0ICpjZSkKQEAgLTMzMTMsNiArMzMxNSw4IEBAIHN0YXRpYyB2b2lkIHZpcnR1
YWxfY29udGV4dF9leGl0KHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKIAlzdHJ1Y3QgdmlydHVh
bF9lbmdpbmUgKnZlID0gY29udGFpbmVyX29mKGNlLCB0eXBlb2YoKnZlKSwgY29udGV4dCk7CiAJ
dW5zaWduZWQgaW50IG47CiAKKwlpbnRlbF90aW1lbGluZV9leGl0KGNlLT50aW1lbGluZSk7CisK
IAlmb3IgKG4gPSAwOyBuIDwgdmUtPm51bV9zaWJsaW5nczsgbisrKQogCQlpbnRlbF9lbmdpbmVf
cG1fcHV0KHZlLT5zaWJsaW5nc1tuXSk7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF90aW1lbGluZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
dGltZWxpbmUuYwppbmRleCA2ZGFhOWViNTllMTkuLjRhZjBiOTgwMWQ5MSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZS5jCkBAIC0yNzgsNjQgKzI3OCwxMSBAQCB2b2lk
IGludGVsX3RpbWVsaW5lc19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCXRp
bWVsaW5lc19pbml0KCZpOTE1LT5ndCk7CiB9CiAKLXN0YXRpYyB2b2lkIHRpbWVsaW5lX2FkZF90
b19hY3RpdmUoc3RydWN0IGludGVsX3RpbWVsaW5lICp0bCkKLXsKLQlzdHJ1Y3QgaW50ZWxfZ3Rf
dGltZWxpbmVzICpndCA9ICZ0bC0+Z3QtPnRpbWVsaW5lczsKLQotCW11dGV4X2xvY2soJmd0LT5t
dXRleCk7Ci0JbGlzdF9hZGQoJnRsLT5saW5rLCAmZ3QtPmFjdGl2ZV9saXN0KTsKLQltdXRleF91
bmxvY2soJmd0LT5tdXRleCk7Ci19Ci0KLXN0YXRpYyB2b2lkIHRpbWVsaW5lX3JlbW92ZV9mcm9t
X2FjdGl2ZShzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRsKQotewotCXN0cnVjdCBpbnRlbF9ndF90
aW1lbGluZXMgKmd0ID0gJnRsLT5ndC0+dGltZWxpbmVzOwotCi0JbXV0ZXhfbG9jaygmZ3QtPm11
dGV4KTsKLQlsaXN0X2RlbCgmdGwtPmxpbmspOwotCW11dGV4X3VubG9jaygmZ3QtPm11dGV4KTsK
LX0KLQotc3RhdGljIHZvaWQgdGltZWxpbmVzX3Bhcmsoc3RydWN0IGludGVsX2d0ICpndCkKLXsK
LQlzdHJ1Y3QgaW50ZWxfZ3RfdGltZWxpbmVzICp0aW1lbGluZXMgPSAmZ3QtPnRpbWVsaW5lczsK
LQlzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRpbWVsaW5lOwotCi0JbXV0ZXhfbG9jaygmdGltZWxp
bmVzLT5tdXRleCk7Ci0JbGlzdF9mb3JfZWFjaF9lbnRyeSh0aW1lbGluZSwgJnRpbWVsaW5lcy0+
YWN0aXZlX2xpc3QsIGxpbmspIHsKLQkJLyoKLQkJICogQWxsIGtub3duIGZlbmNlcyBhcmUgY29t
cGxldGVkIHNvIHdlIGNhbiBzY3JhcAotCQkgKiB0aGUgY3VycmVudCBzeW5jIHBvaW50IHRyYWNr
aW5nIGFuZCBzdGFydCBhZnJlc2gsCi0JCSAqIGFueSBhdHRlbXB0IHRvIHdhaXQgdXBvbiBhIHBy
ZXZpb3VzIHN5bmMgcG9pbnQKLQkJICogd2lsbCBiZSBza2lwcGVkIGFzIHRoZSBmZW5jZSB3YXMg
c2lnbmFsZWQuCi0JCSAqLwotCQlpOTE1X3N5bmNtYXBfZnJlZSgmdGltZWxpbmUtPnN5bmMpOwot
CX0KLQltdXRleF91bmxvY2soJnRpbWVsaW5lcy0+bXV0ZXgpOwotfQotCi0vKioKLSAqIGludGVs
X3RpbWVsaW5lc19wYXJrIC0gY2FsbGVkIHdoZW4gdGhlIGRyaXZlciBpZGxlcwotICogQGk5MTU6
IHRoZSBkcm1faTkxNV9wcml2YXRlIGRldmljZQotICoKLSAqIFdoZW4gdGhlIGRyaXZlciBpcyBj
b21wbGV0ZWx5IGlkbGUsIHdlIGtub3cgdGhhdCBhbGwgb2Ygb3VyIHN5bmMgcG9pbnRzCi0gKiBo
YXZlIGJlZW4gc2lnbmFsZWQgYW5kIG91ciB0cmFja2luZyBpcyB0aGVuIGVudGlyZWx5IHJlZHVu
ZGFudC4gQW55IHJlcXVlc3QKLSAqIHRvIHdhaXQgdXBvbiBhbiBvbGRlciBzeW5jIHBvaW50IHdp
bGwgYmUgY29tcGxldGVkIGluc3RhbnRseSBhcyB3ZSBrbm93Ci0gKiB0aGUgZmVuY2UgaXMgc2ln
bmFsZWQgYW5kIHRoZXJlZm9yZSB3ZSB3aWxsIG5vdCBldmVuIGxvb2sgdGhlbSB1cCBpbiB0aGUK
LSAqIHN5bmMgcG9pbnQgbWFwLgotICovCi12b2lkIGludGVsX3RpbWVsaW5lc19wYXJrKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1KQotewotCXRpbWVsaW5lc19wYXJrKCZpOTE1LT5ndCk7
Ci19Ci0KIHZvaWQgaW50ZWxfdGltZWxpbmVfZmluaShzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRp
bWVsaW5lKQogewogCUdFTV9CVUdfT04odGltZWxpbmUtPnBpbl9jb3VudCk7CiAJR0VNX0JVR19P
TighbGlzdF9lbXB0eSgmdGltZWxpbmUtPnJlcXVlc3RzKSk7CiAKLQlpOTE1X3N5bmNtYXBfZnJl
ZSgmdGltZWxpbmUtPnN5bmMpOwotCiAJaWYgKHRpbWVsaW5lLT5od3NwX2NhY2hlbGluZSkKIAkJ
Y2FjaGVsaW5lX2ZyZWUodGltZWxpbmUtPmh3c3BfY2FjaGVsaW5lKTsKIAllbHNlCkBAIC0zNzAs
NiArMzE3LDcgQEAgaW50IGludGVsX3RpbWVsaW5lX3BpbihzdHJ1Y3QgaW50ZWxfdGltZWxpbmUg
KnRsKQogCWlmICh0bC0+cGluX2NvdW50KyspCiAJCXJldHVybiAwOwogCUdFTV9CVUdfT04oIXRs
LT5waW5fY291bnQpOworCUdFTV9CVUdfT04odGwtPmFjdGl2ZV9jb3VudCk7CiAKIAllcnIgPSBp
OTE1X3ZtYV9waW4odGwtPmh3c3BfZ2d0dCwgMCwgMCwgUElOX0dMT0JBTCB8IFBJTl9ISUdIKTsK
IAlpZiAoZXJyKQpAQCAtMzgwLDcgKzMyOCw2IEBAIGludCBpbnRlbF90aW1lbGluZV9waW4oc3Ry
dWN0IGludGVsX3RpbWVsaW5lICp0bCkKIAkJb2Zmc2V0X2luX3BhZ2UodGwtPmh3c3Bfb2Zmc2V0
KTsKIAogCWNhY2hlbGluZV9hY3F1aXJlKHRsLT5od3NwX2NhY2hlbGluZSk7Ci0JdGltZWxpbmVf
YWRkX3RvX2FjdGl2ZSh0bCk7CiAKIAlyZXR1cm4gMDsKIApAQCAtMzg5LDYgKzMzNiw0MCBAQCBp
bnQgaW50ZWxfdGltZWxpbmVfcGluKHN0cnVjdCBpbnRlbF90aW1lbGluZSAqdGwpCiAJcmV0dXJu
IGVycjsKIH0KIAordm9pZCBpbnRlbF90aW1lbGluZV9lbnRlcihzdHJ1Y3QgaW50ZWxfdGltZWxp
bmUgKnRsKQoreworCXN0cnVjdCBpbnRlbF9ndF90aW1lbGluZXMgKnRpbWVsaW5lcyA9ICZ0bC0+
Z3QtPnRpbWVsaW5lczsKKworCUdFTV9CVUdfT04oIXRsLT5waW5fY291bnQpOworCWlmICh0bC0+
YWN0aXZlX2NvdW50KyspCisJCXJldHVybjsKKwlHRU1fQlVHX09OKCF0bC0+YWN0aXZlX2NvdW50
KTsgLyogb3ZlcmZsb3c/ICovCisKKwltdXRleF9sb2NrKCZ0aW1lbGluZXMtPm11dGV4KTsKKwls
aXN0X2FkZCgmdGwtPmxpbmssICZ0aW1lbGluZXMtPmFjdGl2ZV9saXN0KTsKKwltdXRleF91bmxv
Y2soJnRpbWVsaW5lcy0+bXV0ZXgpOworfQorCit2b2lkIGludGVsX3RpbWVsaW5lX2V4aXQoc3Ry
dWN0IGludGVsX3RpbWVsaW5lICp0bCkKK3sKKwlzdHJ1Y3QgaW50ZWxfZ3RfdGltZWxpbmVzICp0
aW1lbGluZXMgPSAmdGwtPmd0LT50aW1lbGluZXM7CisKKwlHRU1fQlVHX09OKCF0bC0+YWN0aXZl
X2NvdW50KTsKKwlpZiAoLS10bC0+YWN0aXZlX2NvdW50KQorCQlyZXR1cm47CisKKwltdXRleF9s
b2NrKCZ0aW1lbGluZXMtPm11dGV4KTsKKwlsaXN0X2RlbCgmdGwtPmxpbmspOworCW11dGV4X3Vu
bG9jaygmdGltZWxpbmVzLT5tdXRleCk7CisKKwkvKgorCSAqIFNpbmNlIHRoaXMgdGltZWxpbmUg
aXMgaWRsZSwgYWxsIGJhcmllcnMgdXBvbiB3aGljaCB3ZSB3ZXJlIHdhaXRpbmcKKwkgKiBtdXN0
IGFsc28gYmUgY29tcGxldGUgYW5kIHNvIHdlIGNhbiBkaXNjYXJkIHRoZSBsYXN0IHVzZWQgYmFy
cmllcnMKKwkgKiB3aXRob3V0IGxvc3Mgb2YgaW5mb3JtYXRpb24uCisJICovCisJaTkxNV9zeW5j
bWFwX2ZyZWUoJnRsLT5zeW5jKTsKK30KKwogc3RhdGljIHUzMiB0aW1lbGluZV9hZHZhbmNlKHN0
cnVjdCBpbnRlbF90aW1lbGluZSAqdGwpCiB7CiAJR0VNX0JVR19PTighdGwtPnBpbl9jb3VudCk7
CkBAIC01NDYsMTYgKzUyNyw5IEBAIHZvaWQgaW50ZWxfdGltZWxpbmVfdW5waW4oc3RydWN0IGlu
dGVsX3RpbWVsaW5lICp0bCkKIAlpZiAoLS10bC0+cGluX2NvdW50KQogCQlyZXR1cm47CiAKLQl0
aW1lbGluZV9yZW1vdmVfZnJvbV9hY3RpdmUodGwpOworCUdFTV9CVUdfT04odGwtPmFjdGl2ZV9j
b3VudCk7CiAJY2FjaGVsaW5lX3JlbGVhc2UodGwtPmh3c3BfY2FjaGVsaW5lKTsKIAotCS8qCi0J
ICogU2luY2UgdGhpcyB0aW1lbGluZSBpcyBpZGxlLCBhbGwgYmFyaWVycyB1cG9uIHdoaWNoIHdl
IHdlcmUgd2FpdGluZwotCSAqIG11c3QgYWxzbyBiZSBjb21wbGV0ZSBhbmQgc28gd2UgY2FuIGRp
c2NhcmQgdGhlIGxhc3QgdXNlZCBiYXJyaWVycwotCSAqIHdpdGhvdXQgbG9zcyBvZiBpbmZvcm1h
dGlvbi4KLQkgKi8KLQlpOTE1X3N5bmNtYXBfZnJlZSgmdGwtPnN5bmMpOwotCiAJX19pOTE1X3Zt
YV91bnBpbih0bC0+aHdzcF9nZ3R0KTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X3RpbWVsaW5lLmgKaW5kZXggZTA4Y2ViZjY0ODMzLi5mNTgzYWYxYmExOGQgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3RpbWVsaW5lLmgKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuaApAQCAtNzcsOSArNzcsMTEgQEAgc3RhdGlj
IGlubGluZSBib29sIGludGVsX3RpbWVsaW5lX3N5bmNfaXNfbGF0ZXIoc3RydWN0IGludGVsX3Rp
bWVsaW5lICp0bCwKIH0KIAogaW50IGludGVsX3RpbWVsaW5lX3BpbihzdHJ1Y3QgaW50ZWxfdGlt
ZWxpbmUgKnRsKTsKK3ZvaWQgaW50ZWxfdGltZWxpbmVfZW50ZXIoc3RydWN0IGludGVsX3RpbWVs
aW5lICp0bCk7CiBpbnQgaW50ZWxfdGltZWxpbmVfZ2V0X3NlcW5vKHN0cnVjdCBpbnRlbF90aW1l
bGluZSAqdGwsCiAJCQkgICAgIHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAogCQkJICAgICB1MzIg
KnNlcW5vKTsKK3ZvaWQgaW50ZWxfdGltZWxpbmVfZXhpdChzdHJ1Y3QgaW50ZWxfdGltZWxpbmUg
KnRsKTsKIHZvaWQgaW50ZWxfdGltZWxpbmVfdW5waW4oc3RydWN0IGludGVsX3RpbWVsaW5lICp0
bCk7CiAKIGludCBpbnRlbF90aW1lbGluZV9yZWFkX2h3c3Aoc3RydWN0IGk5MTVfcmVxdWVzdCAq
ZnJvbSwKQEAgLTg3LDcgKzg5LDYgQEAgaW50IGludGVsX3RpbWVsaW5lX3JlYWRfaHdzcChzdHJ1
Y3QgaTkxNV9yZXF1ZXN0ICpmcm9tLAogCQkJICAgICB1MzIgKmh3c3Bfb2Zmc2V0KTsKIAogdm9p
ZCBpbnRlbF90aW1lbGluZXNfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7Ci12
b2lkIGludGVsX3RpbWVsaW5lc19wYXJrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsK
IHZvaWQgaW50ZWxfdGltZWxpbmVzX2Zpbmkoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUp
OwogCiAjZW5kaWYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Rp
bWVsaW5lX3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZV90
eXBlcy5oCmluZGV4IDlhNzFhZWE3YTMzOC4uYjFhOWYwYzU0YmYwIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZV90eXBlcy5oCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX3RpbWVsaW5lX3R5cGVzLmgKQEAgLTI1LDcgKzI1LDI1IEBA
IHN0cnVjdCBpbnRlbF90aW1lbGluZSB7CiAKIAlzdHJ1Y3QgbXV0ZXggbXV0ZXg7IC8qIHByb3Rl
Y3RzIHRoZSBmbG93IG9mIHJlcXVlc3RzICovCiAKKwkvKgorCSAqIHBpbl9jb3VudCBhbmQgYWN0
aXZlX2NvdW50IHRyYWNrIGVzc2VudGlhbGx5IHRoZSBzYW1lIHRoaW5nOgorCSAqIEhvdyBtYW55
IHJlcXVlc3RzIGFyZSBpbiBmbGlnaHQgb3IgbWF5IGJlIHVuZGVyIGNvbnN0cnVjdGlvbi4KKwkg
KgorCSAqIFdlIG5lZWQgdHdvIGRpc3RpbmN0IGNvdW50ZXJzIHNvIHRoYXQgd2UgY2FuIGFzc2ln
biBkaWZmZXJlbnQKKwkgKiBsaWZldGltZXMgdG8gdGhlIGV2ZW50cyBmb3IgZGlmZmVyZW50IHVz
ZS1jYXNlcy4gRm9yIGV4YW1wbGUsCisJICogd2Ugd2FudCB0byBwZXJtYW5lbnRseSBrZWVwIHRo
ZSB0aW1lbGluZSBwaW5uZWQgZm9yIHRoZSBrZXJuZWwKKwkgKiBjb250ZXh0IHNvIHRoYXQgd2Ug
Y2FuIGlzc3VlIHJlcXVlc3RzIGF0IGFueSB0aW1lIHdpdGhvdXQgaGF2aW5nCisJICogdG8gYWNx
dWlyZSBzcGFjZSBpbiB0aGUgR0dUVC4gSG93ZXZlciwgd2Ugd2FudCB0byBrZWVwIHRyYWNraW5n
CisJICogdGhlIGFjdGl2aXR5ICh0byBiZSBhYmxlIHRvIGRldGVjdCB3aGVuIHdlIGJlY29tZSBp
ZGxlKSBhbG9uZyB0aGF0CisJICogcGVybWFuZW50bHkgcGlubmVkIHRpbWVsaW5lIGFuZCBzbyBl
bmQgdXAgcmVxdWlyaW5nIHR3byBjb3VudGVycy4KKwkgKgorCSAqIE5vdGUgdGhhdCB0aGUgYWN0
aXZlX2NvdW50IGlzIHByb3RlY3RlZCBieSB0aGUgaW50ZWxfdGltZWxpbmUubXV0ZXgsCisJICog
YnV0IHRoZSBwaW5fY291bnQgaXMgcHJvdGVjdGVkIGJ5IGEgY29tYmluYXRpb24gb2Ygc2VyaWFs
aXNhdGlvbgorCSAqIGZyb20gdGhlIGludGVsX2NvbnRleHQgY2FsbGVyIHBsdXMgaW50ZXJuYWwg
YXRvbWljaXR5LgorCSAqLwogCXVuc2lnbmVkIGludCBwaW5fY291bnQ7CisJdW5zaWduZWQgaW50
IGFjdGl2ZV9jb3VudDsKKwogCWNvbnN0IHUzMiAqaHdzcF9zZXFubzsKIAlzdHJ1Y3QgaTkxNV92
bWEgKmh3c3BfZ2d0dDsKIAl1MzIgaHdzcF9vZmZzZXQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9zZWxmdGVzdF90aW1lbGluZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3Qvc2VsZnRlc3RfdGltZWxpbmUuYwppbmRleCBmMGE4NDAwMzAzODIuLmQ1NDExMzY5Nzc0NSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfdGltZWxpbmUuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF90aW1lbGluZS5jCkBAIC04MTYs
OCArODE2LDYgQEAgc3RhdGljIGludCBsaXZlX2h3c3BfcmVjeWNsZSh2b2lkICphcmcpCiAKIAkJ
CWlmIChlcnIpCiAJCQkJZ290byBvdXQ7Ci0KLQkJCWludGVsX3RpbWVsaW5lc19wYXJrKGk5MTUp
OyAvKiBFbmNvdXJhZ2UgcmVjeWNsaW5nISAqLwogCQl9IHdoaWxlICghX19pZ3RfdGltZW91dChl
bmRfdGltZSwgTlVMTCkpOwogCX0KIAotLSAKMi4yMy4wLnJjMQoKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRl
bC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

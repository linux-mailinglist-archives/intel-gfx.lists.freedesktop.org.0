Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7884710D631
	for <lists+intel-gfx@lfdr.de>; Fri, 29 Nov 2019 14:40:16 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9DBCA6E902;
	Fri, 29 Nov 2019 13:40:14 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 70EDC6E902
 for <intel-gfx@lists.freedesktop.org>; Fri, 29 Nov 2019 13:40:11 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 29 Nov 2019 05:40:11 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,257,1571727600"; d="scan'208";a="234712529"
Received: from slisovsk-lenovo-ideapad-720s-13ikb.fi.intel.com ([10.237.72.89])
 by fmsmga004.fm.intel.com with ESMTP; 29 Nov 2019 05:40:08 -0800
From: Stanislav Lisovskiy <stanislav.lisovskiy@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 29 Nov 2019 15:37:06 +0200
Message-Id: <20191129133709.24397-2-stanislav.lisovskiy@intel.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20191129133709.24397-1-stanislav.lisovskiy@intel.com>
References: <20191129133709.24397-1-stanislav.lisovskiy@intel.com>
Subject: [Intel-gfx] [PATCH v7 1/4] drm/i915: Remove skl_ddl_allocation
 struct
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Q3VycmVudCBjb25zZW5zdXMgdGhhdCBpdCBpcyByZWR1bmRhbnQgYXMKd2UgYWxyZWFkeSBoYXZl
IHNrbF9kZGJfdmFsdWVzIHN0cnVjdCBvdXQgdGhlcmUsCmFsc28gdGhpcyBzdHJ1Y3QgY29udGFp
bnMgb25seSBzaW5nbGUgbWVtYmVyCndoaWNoIG1ha2VzIGl0IHVubmVjZXNzYXJ5LgoKdjI6IEFz
IGRpcnR5X3BpcGVzIHNvb24gZ29pbmcgdG8gYmUgbnVrZWQgYXdheQogICAgZnJvbSBza2xfZGRi
X3ZhbHVlcywgZXZhY3VhdGluZyBlbmFibGVkX3NsaWNlcwogICAgdG8gc2FmZXIgaW4gZGV2X3By
aXYuCgpTaWduZWQtb2ZmLWJ5OiBTdGFuaXNsYXYgTGlzb3Zza2l5IDxzdGFuaXNsYXYubGlzb3Zz
a2l5QGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXkuYyAgfCAxNiArKysrLS0tLS0KIC4uLi9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXlfcG93ZXIuYyAgICB8ICA4ICsrLS0tCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5X3R5cGVzLmggICAgfCAgMyArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAg
ICAgICAgICAgICAgIHwgIDcgKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyAg
ICAgICAgICAgICAgIHwgMzQgKysrKysrKystLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfcG0uaCAgICAgICAgICAgICAgIHwgIDYgKystLQogNiBmaWxlcyBjaGFuZ2VkLCAz
NCBpbnNlcnRpb25zKCspLCA0MCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4IDUzZGMzMTBhNWY2ZC4uZGRhNDNlM2RjZGJm
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXku
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAt
MTMzOTMsMTQgKzEzMzkzLDEzIEBAIHN0YXRpYyB2b2lkIHZlcmlmeV93bV9zdGF0ZShzdHJ1Y3Qg
aW50ZWxfY3J0YyAqY3J0YywKIAlzdHJ1Y3Qgc2tsX2h3X3N0YXRlIHsKIAkJc3RydWN0IHNrbF9k
ZGJfZW50cnkgZGRiX3lbSTkxNV9NQVhfUExBTkVTXTsKIAkJc3RydWN0IHNrbF9kZGJfZW50cnkg
ZGRiX3V2W0k5MTVfTUFYX1BMQU5FU107Ci0JCXN0cnVjdCBza2xfZGRiX2FsbG9jYXRpb24gZGRi
OwogCQlzdHJ1Y3Qgc2tsX3BpcGVfd20gd207CiAJfSAqaHc7Ci0Jc3RydWN0IHNrbF9kZGJfYWxs
b2NhdGlvbiAqc3dfZGRiOwogCXN0cnVjdCBza2xfcGlwZV93bSAqc3dfd207CiAJc3RydWN0IHNr
bF9kZGJfZW50cnkgKmh3X2RkYl9lbnRyeSwgKnN3X2RkYl9lbnRyeTsKIAljb25zdCBlbnVtIHBp
cGUgcGlwZSA9IGNydGMtPnBpcGU7CiAJaW50IHBsYW5lLCBsZXZlbCwgbWF4X2xldmVsID0gaWxr
X3dtX21heF9sZXZlbChkZXZfcHJpdik7CisJdTggaHdfZW5hYmxlZF9zbGljZXM7CiAKIAlpZiAo
SU5URUxfR0VOKGRldl9wcml2KSA8IDkgfHwgIW5ld19jcnRjX3N0YXRlLT5ody5hY3RpdmUpCiAJ
CXJldHVybjsKQEAgLTEzNDE0LDE0ICsxMzQxMywxMyBAQCBzdGF0aWMgdm9pZCB2ZXJpZnlfd21f
c3RhdGUoc3RydWN0IGludGVsX2NydGMgKmNydGMsCiAKIAlza2xfcGlwZV9kZGJfZ2V0X2h3X3N0
YXRlKGNydGMsIGh3LT5kZGJfeSwgaHctPmRkYl91dik7CiAKLQlza2xfZGRiX2dldF9od19zdGF0
ZShkZXZfcHJpdiwgJmh3LT5kZGIpOwotCXN3X2RkYiA9ICZkZXZfcHJpdi0+d20uc2tsX2h3LmRk
YjsKKwlod19lbmFibGVkX3NsaWNlcyA9IGludGVsX2VuYWJsZWRfZGJ1Zl9zbGljZXNfbnVtKGRl
dl9wcml2KTsKIAogCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDExICYmCi0JICAgIGh3LT5k
ZGIuZW5hYmxlZF9zbGljZXMgIT0gc3dfZGRiLT5lbmFibGVkX3NsaWNlcykKKwkgICAgaHdfZW5h
YmxlZF9zbGljZXMgIT0gZGV2X3ByaXYtPmVuYWJsZWRfc2xpY2VzKQogCQlEUk1fRVJST1IoIm1p
c21hdGNoIGluIERCVUYgU2xpY2VzIChleHBlY3RlZCAldSwgZ290ICV1KVxuIiwKLQkJCSAgc3df
ZGRiLT5lbmFibGVkX3NsaWNlcywKLQkJCSAgaHctPmRkYi5lbmFibGVkX3NsaWNlcyk7CisJCQkg
IGRldl9wcml2LT5lbmFibGVkX3NsaWNlcywKKwkJCSAgaHdfZW5hYmxlZF9zbGljZXMpOwogCiAJ
LyogcGxhbmVzICovCiAJZm9yX2VhY2hfdW5pdmVyc2FsX3BsYW5lKGRldl9wcml2LCBwaXBlLCBw
bGFuZSkgewpAQCAtMTQ2NDcsOCArMTQ2NDUsOCBAQCBzdGF0aWMgdm9pZCBza2xfY29tbWl0X21v
ZGVzZXRfZW5hYmxlcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIAl1bnNpZ25l
ZCBpbnQgdXBkYXRlZCA9IDA7CiAJYm9vbCBwcm9ncmVzczsKIAlpbnQgaTsKLQl1OCBod19lbmFi
bGVkX3NsaWNlcyA9IGRldl9wcml2LT53bS5za2xfaHcuZGRiLmVuYWJsZWRfc2xpY2VzOwotCXU4
IHJlcXVpcmVkX3NsaWNlcyA9IHN0YXRlLT53bV9yZXN1bHRzLmRkYi5lbmFibGVkX3NsaWNlczsK
Kwl1OCBod19lbmFibGVkX3NsaWNlcyA9IGRldl9wcml2LT5lbmFibGVkX3NsaWNlczsKKwl1OCBy
ZXF1aXJlZF9zbGljZXMgPSBzdGF0ZS0+ZW5hYmxlZF9zbGljZXM7CiAJc3RydWN0IHNrbF9kZGJf
ZW50cnkgZW50cmllc1tJOTE1X01BWF9QSVBFU10gPSB7fTsKIAogCWZvcl9lYWNoX29sZG5ld19p
bnRlbF9jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0ZSwgbmV3X2NydGNf
c3RhdGUsIGkpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXlfcG93ZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheV9wb3dlci5jCmluZGV4IGNlMWI2NGY0ZGQ0NC4uNGMzZWRlNzNlODYzIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYwpAQCAt
NDI2NCw3ICs0MjY0LDcgQEAgc3RhdGljIHU4IGludGVsX2RidWZfbWF4X3NsaWNlcyhzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiB2b2lkIGljbF9kYnVmX3NsaWNlc191cGRhdGUo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJICAgIHU4IHJlcV9zbGljZXMp
CiB7Ci0JY29uc3QgdTggaHdfZW5hYmxlZF9zbGljZXMgPSBkZXZfcHJpdi0+d20uc2tsX2h3LmRk
Yi5lbmFibGVkX3NsaWNlczsKKwljb25zdCB1OCBod19lbmFibGVkX3NsaWNlcyA9IGRldl9wcml2
LT5lbmFibGVkX3NsaWNlczsKIAlib29sIHJldDsKIAogCWlmIChyZXFfc2xpY2VzID4gaW50ZWxf
ZGJ1Zl9tYXhfc2xpY2VzKGRldl9wcml2KSkgewpAQCAtNDI4MSw3ICs0MjgxLDcgQEAgdm9pZCBp
Y2xfZGJ1Zl9zbGljZXNfdXBkYXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwK
IAkJcmV0ID0gaW50ZWxfZGJ1Zl9zbGljZV9zZXQoZGV2X3ByaXYsIERCVUZfQ1RMX1MyLCBmYWxz
ZSk7CiAKIAlpZiAocmV0KQotCQlkZXZfcHJpdi0+d20uc2tsX2h3LmRkYi5lbmFibGVkX3NsaWNl
cyA9IHJlcV9zbGljZXM7CisJCWRldl9wcml2LT5lbmFibGVkX3NsaWNlcyA9IHJlcV9zbGljZXM7
CiB9CiAKIHN0YXRpYyB2b2lkIGljbF9kYnVmX2VuYWJsZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYpCkBAIC00MzAwLDcgKzQzMDAsNyBAQCBzdGF0aWMgdm9pZCBpY2xfZGJ1Zl9l
bmFibGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQkgKiBGSVhNRTogZm9y
IG5vdyBwcmV0ZW5kIHRoYXQgd2Ugb25seSBoYXZlIDEgc2xpY2UsIHNlZQogCQkgKiBpbnRlbF9l
bmFibGVkX2RidWZfc2xpY2VzX251bSgpLgogCQkgKi8KLQkJZGV2X3ByaXYtPndtLnNrbF9ody5k
ZGIuZW5hYmxlZF9zbGljZXMgPSAxOworCQlkZXZfcHJpdi0+ZW5hYmxlZF9zbGljZXMgPSAxOwog
fQogCiBzdGF0aWMgdm9pZCBpY2xfZGJ1Zl9kaXNhYmxlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdikKQEAgLTQzMTksNyArNDMxOSw3IEBAIHN0YXRpYyB2b2lkIGljbF9kYnVmX2Rp
c2FibGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQkgKiBGSVhNRTogZm9y
IG5vdyBwcmV0ZW5kIHRoYXQgdGhlIGZpcnN0IHNsaWNlIGlzIGFsd2F5cwogCQkgKiBlbmFibGVk
LCBzZWUgaW50ZWxfZW5hYmxlZF9kYnVmX3NsaWNlc19udW0oKS4KIAkJICovCi0JCWRldl9wcml2
LT53bS5za2xfaHcuZGRiLmVuYWJsZWRfc2xpY2VzID0gMTsKKwkJZGV2X3ByaXYtPmVuYWJsZWRf
c2xpY2VzID0gMTsKIH0KIAogc3RhdGljIHZvaWQgaWNsX21idXNfaW5pdChzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCmluZGV4IDgzZWEwNDE0OWI3Ny4uNWVhZWFmNDg3YTAx
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlf
dHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlf
dHlwZXMuaApAQCAtNTE3LDYgKzUxNyw5IEBAIHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgewog
CS8qIEdlbjkrIG9ubHkgKi8KIAlzdHJ1Y3Qgc2tsX2RkYl92YWx1ZXMgd21fcmVzdWx0czsKIAor
CS8qIE51bWJlciBvZiBlbmFibGVkIERCdWYgc2xpY2VzICovCisJdTggZW5hYmxlZF9zbGljZXM7
CisKIAlzdHJ1Y3QgaTkxNV9zd19mZW5jZSBjb21taXRfcmVhZHk7CiAKIAlzdHJ1Y3QgbGxpc3Rf
bm9kZSBmcmVlZDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2Lmgg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IGZkYWU1YTkxOWJjOC4uMTk1
NjI5YTM3YTYxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTc5OCwxMyArNzk4LDggQEAg
c3RhdGljIGlubGluZSBib29sIHNrbF9kZGJfZW50cnlfZXF1YWwoY29uc3Qgc3RydWN0IHNrbF9k
ZGJfZW50cnkgKmUxLAogCXJldHVybiBmYWxzZTsKIH0KIAotc3RydWN0IHNrbF9kZGJfYWxsb2Nh
dGlvbiB7Ci0JdTggZW5hYmxlZF9zbGljZXM7IC8qIEdFTjExIGhhcyBjb25maWd1cmFibGUgMiBz
bGljZXMgKi8KLX07Ci0KIHN0cnVjdCBza2xfZGRiX3ZhbHVlcyB7CiAJdW5zaWduZWQgZGlydHlf
cGlwZXM7Ci0Jc3RydWN0IHNrbF9kZGJfYWxsb2NhdGlvbiBkZGI7CiB9OwogCiBzdHJ1Y3Qgc2ts
X3dtX2xldmVsIHsKQEAgLTEyMTUsNiArMTIxMCw4IEBAIHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
IHsKIAkJYm9vbCBkaXN0cnVzdF9iaW9zX3dtOwogCX0gd207CiAKKwl1OCBlbmFibGVkX3NsaWNl
czsgLyogR0VOMTEgaGFzIGNvbmZpZ3VyYWJsZSAyIHNsaWNlcyAqLworCiAJc3RydWN0IGRyYW1f
aW5mbyB7CiAJCWJvb2wgdmFsaWQ7CiAJCWJvb2wgaXNfMTZnYl9kaW1tOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2lu
dGVsX3BtLmMKaW5kZXggNWFhZDlkNDlhNTI4Li5hOTNiNDM4NWRlNGIgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfcG0uYwpAQCAtMzU5OSw3ICszNTk5LDcgQEAgYm9vbCBpbGtfZGlzYWJsZV9scF93bShz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCXJldHVybiBfaWxrX2Rpc2FibGVfbHBfd20oZGV2X3By
aXYsIFdNX0RJUlRZX0xQX0FMTCk7CiB9CiAKLXN0YXRpYyB1OCBpbnRlbF9lbmFibGVkX2RidWZf
c2xpY2VzX251bShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCit1OCBpbnRlbF9l
bmFibGVkX2RidWZfc2xpY2VzX251bShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYp
CiB7CiAJdTggZW5hYmxlZF9zbGljZXM7CiAKQEAgLTM4MjIsOSArMzgyMiwxMCBAQCBib29sIGlu
dGVsX2Nhbl9lbmFibGVfc2FndihzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIHN0
YXRpYyB1MTYgaW50ZWxfZ2V0X2RkYl9zaXplKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiwKIAkJCSAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
LAogCQkJICAgICAgY29uc3QgdTY0IHRvdGFsX2RhdGFfcmF0ZSwKLQkJCSAgICAgIGNvbnN0IGlu
dCBudW1fYWN0aXZlLAotCQkJICAgICAgc3RydWN0IHNrbF9kZGJfYWxsb2NhdGlvbiAqZGRiKQor
CQkJICAgICAgY29uc3QgaW50IG51bV9hY3RpdmUpCiB7CisJc3RydWN0IGRybV9hdG9taWNfc3Rh
dGUgKnN0YXRlID0gY3J0Y19zdGF0ZS0+dWFwaS5zdGF0ZTsKKwlzdHJ1Y3QgaW50ZWxfYXRvbWlj
X3N0YXRlICppbnRlbF9zdGF0ZSA9IHRvX2ludGVsX2F0b21pY19zdGF0ZShzdGF0ZSk7CiAJY29u
c3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGU7CiAJdTY0IHRvdGFsX2Rh
dGFfYnc7CiAJdTE2IGRkYl9zaXplID0gSU5URUxfSU5GTyhkZXZfcHJpdiktPmRkYl9zaXplOwpA
QCAtMzg0Niw5ICszODQ3LDkgQEAgc3RhdGljIHUxNiBpbnRlbF9nZXRfZGRiX3NpemUoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCSAqIC0gc2hvdWxkIHZhbGlkYXRlIHdlIHN0
YXkgd2l0aGluIHRoZSBodyBiYW5kd2lkdGggbGltaXRzCiAJICovCiAJaWYgKDAgJiYgKG51bV9h
Y3RpdmUgPiAxIHx8IHRvdGFsX2RhdGFfYncgPj0gR0JwcygxMikpKSB7Ci0JCWRkYi0+ZW5hYmxl
ZF9zbGljZXMgPSAyOworCQlpbnRlbF9zdGF0ZS0+ZW5hYmxlZF9zbGljZXMgPSAyOwogCX0gZWxz
ZSB7Ci0JCWRkYi0+ZW5hYmxlZF9zbGljZXMgPSAxOworCQlpbnRlbF9zdGF0ZS0+ZW5hYmxlZF9z
bGljZXMgPSAxOwogCQlkZGJfc2l6ZSAvPSAyOwogCX0KIApAQCAtMzg1OSw3ICszODYwLDYgQEAg
c3RhdGljIHZvaWQKIHNrbF9kZGJfZ2V0X3BpcGVfYWxsb2NhdGlvbl9saW1pdHMoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJCSAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRj
X3N0YXRlICpjcnRjX3N0YXRlLAogCQkJCSAgIGNvbnN0IHU2NCB0b3RhbF9kYXRhX3JhdGUsCi0J
CQkJICAgc3RydWN0IHNrbF9kZGJfYWxsb2NhdGlvbiAqZGRiLAogCQkJCSAgIHN0cnVjdCBza2xf
ZGRiX2VudHJ5ICphbGxvYywgLyogb3V0ICovCiAJCQkJICAgaW50ICpudW1fYWN0aXZlIC8qIG91
dCAqLykKIHsKQEAgLTM4ODUsNyArMzg4NSw3IEBAIHNrbF9kZGJfZ2V0X3BpcGVfYWxsb2NhdGlv
bl9saW1pdHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkqbnVtX2FjdGl2
ZSA9IGh3ZWlnaHQ4KGRldl9wcml2LT5hY3RpdmVfcGlwZXMpOwogCiAJZGRiX3NpemUgPSBpbnRl
bF9nZXRfZGRiX3NpemUoZGV2X3ByaXYsIGNydGNfc3RhdGUsIHRvdGFsX2RhdGFfcmF0ZSwKLQkJ
CQkgICAgICAqbnVtX2FjdGl2ZSwgZGRiKTsKKwkJCQkgICAgICAqbnVtX2FjdGl2ZSk7CiAKIAkv
KgogCSAqIElmIHRoZSBzdGF0ZSBkb2Vzbid0IGNoYW5nZSB0aGUgYWN0aXZlIENSVEMncyBvciB0
aGVyZSBpcyBubwpAQCAtNDA0NiwxMCArNDA0Niw5IEBAIHZvaWQgc2tsX3BpcGVfZGRiX2dldF9o
d19zdGF0ZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAlpbnRlbF9kaXNwbGF5X3Bvd2VyX3B1
dChkZXZfcHJpdiwgcG93ZXJfZG9tYWluLCB3YWtlcmVmKTsKIH0KIAotdm9pZCBza2xfZGRiX2dl
dF9od19zdGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgIHN0cnVj
dCBza2xfZGRiX2FsbG9jYXRpb24gKmRkYiAvKiBvdXQgKi8pCit2b2lkIHNrbF9kZGJfZ2V0X2h3
X3N0YXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIHsKLQlkZGItPmVuYWJs
ZWRfc2xpY2VzID0gaW50ZWxfZW5hYmxlZF9kYnVmX3NsaWNlc19udW0oZGV2X3ByaXYpOworCWRl
dl9wcml2LT5lbmFibGVkX3NsaWNlcyA9IGludGVsX2VuYWJsZWRfZGJ1Zl9zbGljZXNfbnVtKGRl
dl9wcml2KTsKIH0KIAogLyoKQEAgLTQyMjYsOCArNDIyNSw3IEBAIGljbF9nZXRfdG90YWxfcmVs
YXRpdmVfZGF0YV9yYXRlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAogfQog
CiBzdGF0aWMgaW50Ci1za2xfYWxsb2NhdGVfcGlwZV9kZGIoc3RydWN0IGludGVsX2NydGNfc3Rh
dGUgKmNydGNfc3RhdGUsCi0JCSAgICAgIHN0cnVjdCBza2xfZGRiX2FsbG9jYXRpb24gKmRkYiAv
KiBvdXQgKi8pCitza2xfYWxsb2NhdGVfcGlwZV9kZGIoc3RydWN0IGludGVsX2NydGNfc3RhdGUg
KmNydGNfc3RhdGUpCiB7CiAJc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlID0gY3J0Y19z
dGF0ZS0+dWFwaS5zdGF0ZTsKIAlzdHJ1Y3QgZHJtX2NydGMgKmNydGMgPSBjcnRjX3N0YXRlLT51
YXBpLmNydGM7CkBAIC00MjY5LDcgKzQyNjcsNyBAQCBza2xfYWxsb2NhdGVfcGlwZV9kZGIoc3Ry
dWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAKIAogCXNrbF9kZGJfZ2V0X3BpcGVf
YWxsb2NhdGlvbl9saW1pdHMoZGV2X3ByaXYsIGNydGNfc3RhdGUsIHRvdGFsX2RhdGFfcmF0ZSwK
LQkJCQkJICAgZGRiLCBhbGxvYywgJm51bV9hY3RpdmUpOworCQkJCQkgICBhbGxvYywgJm51bV9h
Y3RpdmUpOwogCWFsbG9jX3NpemUgPSBza2xfZGRiX2VudHJ5X3NpemUoYWxsb2MpOwogCWlmIChh
bGxvY19zaXplID09IDApCiAJCXJldHVybiAwOwpAQCAtNTE4MywxOCArNTE4MSwxNyBAQCBza2xf
ZGRiX2FkZF9hZmZlY3RlZF9wbGFuZXMoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9s
ZF9jcnRjX3N0YXRlLAogc3RhdGljIGludAogc2tsX2NvbXB1dGVfZGRiKHN0cnVjdCBpbnRlbF9h
dG9taWNfc3RhdGUgKnN0YXRlKQogewotCWNvbnN0IHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiA9IHRvX2k5MTUoc3RhdGUtPmJhc2UuZGV2KTsKLQlzdHJ1Y3Qgc2tsX2RkYl9hbGxv
Y2F0aW9uICpkZGIgPSAmc3RhdGUtPndtX3Jlc3VsdHMuZGRiOworCXN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoc3RhdGUtPmJhc2UuZGV2KTsKIAlzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGU7CiAJc3RydWN0IGludGVsX2NydGNfc3RhdGUg
Km5ld19jcnRjX3N0YXRlOwogCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjOwogCWludCByZXQsIGk7
CiAKLQltZW1jcHkoZGRiLCAmZGV2X3ByaXYtPndtLnNrbF9ody5kZGIsIHNpemVvZigqZGRiKSk7
CisJc3RhdGUtPmVuYWJsZWRfc2xpY2VzID0gZGV2X3ByaXYtPmVuYWJsZWRfc2xpY2VzOwogCiAJ
Zm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsIG9sZF9jcnRj
X3N0YXRlLAogCQkJCQkgICAgbmV3X2NydGNfc3RhdGUsIGkpIHsKLQkJcmV0ID0gc2tsX2FsbG9j
YXRlX3BpcGVfZGRiKG5ld19jcnRjX3N0YXRlLCBkZGIpOworCQlyZXQgPSBza2xfYWxsb2NhdGVf
cGlwZV9kZGIobmV3X2NydGNfc3RhdGUpOwogCQlpZiAocmV0KQogCQkJcmV0dXJuIHJldDsKIApA
QCAtNTY2NiwxMSArNTY2MywxMCBAQCB2b2lkIHNrbF9waXBlX3dtX2dldF9od19zdGF0ZShzdHJ1
Y3QgaW50ZWxfY3J0YyAqY3J0YywKIHZvaWQgc2tsX3dtX2dldF9od19zdGF0ZShzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiB7CiAJc3RydWN0IHNrbF9kZGJfdmFsdWVzICpodyA9
ICZkZXZfcHJpdi0+d20uc2tsX2h3OwotCXN0cnVjdCBza2xfZGRiX2FsbG9jYXRpb24gKmRkYiA9
ICZkZXZfcHJpdi0+d20uc2tsX2h3LmRkYjsKIAlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YzsKIAlz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsKIAotCXNrbF9kZGJfZ2V0X2h3X3N0
YXRlKGRldl9wcml2LCBkZGIpOworCXNrbF9kZGJfZ2V0X2h3X3N0YXRlKGRldl9wcml2KTsKIAlm
b3JfZWFjaF9pbnRlbF9jcnRjKCZkZXZfcHJpdi0+ZHJtLCBjcnRjKSB7CiAJCWNydGNfc3RhdGUg
PSB0b19pbnRlbF9jcnRjX3N0YXRlKGNydGMtPmJhc2Uuc3RhdGUpOwogCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfcG0uaAppbmRleCBiNTc5YzcyNGI5MTUuLjRhYWZhZTRjOGUwZCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
bnRlbF9wbS5oCkBAIC0xNyw4ICsxNyw4IEBAIHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGU7CiBz
dHJ1Y3QgaW50ZWxfY3J0YzsKIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlOwogc3RydWN0IGludGVs
X3BsYW5lOwotc3RydWN0IHNrbF9kZGJfYWxsb2NhdGlvbjsKIHN0cnVjdCBza2xfZGRiX2VudHJ5
Oworc3RydWN0IHNrbF9kZGJfdmFsdWVzOwogc3RydWN0IHNrbF9waXBlX3dtOwogc3RydWN0IHNr
bF93bV9sZXZlbDsKIApAQCAtMzMsMTEgKzMzLDExIEBAIHZvaWQgZzR4X3dtX2dldF9od19zdGF0
ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCB2bHZfd21fZ2V0X2h3
X3N0YXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIGlsa193bV9n
ZXRfaHdfc3RhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIHZvaWQgc2ts
X3dtX2dldF9od19zdGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwordTgg
aW50ZWxfZW5hYmxlZF9kYnVmX3NsaWNlc19udW0oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2KTsKIHZvaWQgc2tsX3BpcGVfZGRiX2dldF9od19zdGF0ZShzdHJ1Y3QgaW50ZWxfY3J0
YyAqY3J0YywKIAkJCSAgICAgICBzdHJ1Y3Qgc2tsX2RkYl9lbnRyeSAqZGRiX3ksCiAJCQkgICAg
ICAgc3RydWN0IHNrbF9kZGJfZW50cnkgKmRkYl91dik7Ci12b2lkIHNrbF9kZGJfZ2V0X2h3X3N0
YXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJCSAgc3RydWN0IHNrbF9k
ZGJfYWxsb2NhdGlvbiAqZGRiIC8qIG91dCAqLyk7Cit2b2lkIHNrbF9kZGJfZ2V0X2h3X3N0YXRl
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIHNrbF9waXBlX3dtX2dl
dF9od19zdGF0ZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAkJCSAgICAgIHN0cnVjdCBza2xf
cGlwZV93bSAqb3V0KTsKIHZvaWQgZzR4X3dtX3Nhbml0aXplKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdik7Ci0tIAoyLjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeA==

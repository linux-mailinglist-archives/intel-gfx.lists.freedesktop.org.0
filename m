Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3CDFF1A1773
	for <lists+intel-gfx@lfdr.de>; Tue,  7 Apr 2020 23:38:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E25E86E909;
	Tue,  7 Apr 2020 21:38:34 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A76BA6E157
 for <intel-gfx@lists.freedesktop.org>; Tue,  7 Apr 2020 21:38:27 +0000 (UTC)
IronPort-SDR: J9QGBzgHe7OVfGDeRkhkpQ0q44ill1YOTxl/Ad0l7DHL5Anf+F7aQxERG+d6hHr2xO8dwkJsdd
 tDls3xSfc+gg==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by orsmga102.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 07 Apr 2020 14:38:26 -0700
IronPort-SDR: uabnmB1HgAIeL2AZgZMb8B4Da+qGVWkeMPQBgHrAGOXk6VyVBqpVxNSs+gnuWU8xKIqcC4k3QO
 3td8GlWdCYYA==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.72,356,1580803200"; d="scan'208";a="240081649"
Received: from mtadigot-mobl2.amr.corp.intel.com (HELO
 josouza-MOBL2.amr.corp.intel.com) ([10.135.56.68])
 by orsmga007.jf.intel.com with ESMTP; 07 Apr 2020 14:38:25 -0700
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  7 Apr 2020 14:39:56 -0700
Message-Id: <20200407214000.342933-4-jose.souza@intel.com>
X-Mailer: git-send-email 2.26.0
In-Reply-To: <20200407214000.342933-1-jose.souza@intel.com>
References: <20200407214000.342933-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 4/8] drm/i915/tc/icl: Implement TC cold
 sequences
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Cooper Chiou <cooper.chiou@intel.com>,
 Kai-Heng Feng <kai.heng.feng@canonical.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhpcyBpcyByZXF1aXJlZCBmb3IgbGVnYWN5L3N0YXRpYyBUQyBwb3J0cyBhcyBJT00gaXMgbm90
IGF3YXJlIG9mCnRoZSBjb25uZWN0aW9uIGFuZCB3aWxsIG5vdCB0cmlnZ2VyIHRoZSBUQyBjb2xk
IGV4aXQuCgpKdXN0IHJlcXVlc3QgUENPREUgdG8gZXhpdCBUQ0NPTEQgaXMgbm90IGVub3VnaCBh
cyBpdCBjb3VsZCBlbnRlcgphZ2FpbiBiZWZvcmUgZHJpdmVyIG1ha2VzIHVzZSBvZiB0aGUgcG9y
dCwgdG8gcHJldmVudCBpdCBCU3BlYyBzdGF0ZXMKdGhhdCBhdXggcG93ZXJ3ZWxsIHNob3VsZCBi
ZSBoZWxkLgoKU28gaGVyZSBlbWJlZGRpbmcgdGhlIFRDIGNvbGQgZXhpdCBzZXF1ZW5jZSBpbnRv
IElDTCBhdXggZW5hYmxlLAppdCB3aWxsIGVuYWJsZSBhdXggYW5kIHRoZW4gcmVxdWVzdCBUQyBj
b2xkIHRvIGV4aXQuCgpUaGUgVEMgY29sZCBibG9jayhleGl0IGFuZCBhdXggaG9sZCkgYW5kIHVu
YmxvY2sgd2FzIGFkZGVkIHRvIHNvbWUKZXhwb3J0ZWQgVEMgZnVuY3Rpb25zIGZvciB0aGUgb3Ro
ZXJzIGFuZCB0byBhY2Nlc3MgUEhZIHJlZ2lzdGVycywKY2FsbGVycyBzaG91bGQgZW5hYmxlIGFu
ZCBrZWVwIGF1eCBwb3dlcndlbGwgZW5hYmxlZCBkdXJpbmcgYWNjZXNzLgoKQWxzbyBhZGRpbmcg
VEMgY29sZCBjaGVjayBhbmQgd2FybmlnIGluIHRjX3BvcnRfbG9hZF9maWFfcGFyYW1zKCkgYXMK
YXQgdGhpcyBwb2ludCBvZiB0aGUgZHJpdmVyIGluaXRpYWxpemF0aW9uIHdlIGNhbid0IHJlcXVl
c3QgcG93ZXIKd2VsbHMsIGlmIHdlIGdldCB0aGlzIHdhcm5pbmcgd2Ugd2lsbCBuZWVkIHRvIGZp
Z3VyZSBvdXQgaG93IHRvIGhhbmRsZQppdC4KCnYyOgotIG1vdmVkIElDTCBUQyBjb2xkIGV4aXQg
ZnVuY3Rpb24gdG8gaW50ZWxfZGlzcGxheV9wb3dlcgotIHVzaW5nIGRpZ19wb3J0LT50Y19sZWdh
Y3lfcG9ydCB0byBvbmx5IGV4ZWN1dGUgc2VxdWVuY2VzIGZvciBsZWdhY3kKcG9ydHMsIGhvcGVm
dWxseSBWQlRzIHdpbGwgaGF2ZSB0aGlzIHJpZ2h0Ci0gZml4ZWQgY2hlY2sgdG8gY2FsbCBfaHN3
X3Bvd2VyX3dlbGxfY29udGludWVfZW5hYmxlKCkKLSBjYWxsaW5nIF9oc3dfcG93ZXJfd2VsbF9j
b250aW51ZV9lbmFibGUoKSB1bmNvbmRpdGlvbmFsbHkgaW4KaWNsX3RjX3BoeV9hdXhfcG93ZXJf
d2VsbF9lbmFibGUoKSwgaWYgbmVlZGVkIHdlIHdpbGwgc3VycHJlc3MgdGltZW91dAp3YXJuaW5n
cyBvZiBUQyBsZWdhY3kgcG9ydHMKLSBvbmx5IGJsb2NraW5nIFRDIGNvbGQgYXJvdW5kIGZpYSBh
Y2Nlc3MKCnYzOgotIGFkZGVkIHRpbWVvdXQgb2YgNW1zZWMgdG8gbm90IGxvb3AgZm9yZXZlciBp
ZgpzYW5keWJyaWRnZV9wY29kZV93cml0ZV90aW1lb3V0KCkga2VlcHMgcmV0dXJuaW5nIC1FQUdB
SU4KcmV0dXJuaW5nIC1FQUdBSU4gaW4gaW4gaWNsX3RjX2NvbGRfZXhpdCgpCi0gcmVtb3ZlZCBs
ZWZ0b3ZlciB0Y19jb2xkX3dha2VyZWYKLSBhZGRlZCBvbmUgbXNlYyBzbGVlcCB3aGVuIFBDT0RF
IHJldHVybnMgLUVBR0FJTgoKQlNwZWM6IDIxNzUwCkZpeGVzOiBodHRwczovL2dpdGxhYi5mcmVl
ZGVza3RvcC5vcmcvZHJtL2ludGVsL2lzc3Vlcy8xMjk2CkNjOiBJbXJlIERlYWsgPGltcmUuZGVh
a0BpbnRlbC5jb20+CkNjOiBDb29wZXIgQ2hpb3UgPGNvb3Blci5jaGlvdUBpbnRlbC5jb20+CkNj
OiBLYWktSGVuZyBGZW5nIDxrYWkuaGVuZy5mZW5nQGNhbm9uaWNhbC5jb20+ClNpZ25lZC1vZmYt
Ynk6IEpvc8OpIFJvYmVydG8gZGUgU291emEgPGpvc2Uuc291emFAaW50ZWwuY29tPgotLS0KIC4u
Li9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYyAgICB8IDI0ICsrKysrKy0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdGMuYyAgICAgICB8IDY0ICsrKysr
KysrKysrKysrKysrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggICAgICAgICAg
ICAgICB8ICAxICsKIDMgZmlsZXMgY2hhbmdlZCwgODIgaW5zZXJ0aW9ucygrKSwgNyBkZWxldGlv
bnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXlfcG93ZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eV9wb3dlci5jCmluZGV4IDFjZDI3MWQwZjExNC4uMmQ3YjI5OTk1NjFhIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYwpAQCAtNTc1
LDYgKzU3NSwyNyBAQCBzdGF0aWMgdm9pZCBpY2xfdGNfcG9ydF9hc3NlcnRfcmVmX2hlbGQoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCiAjZGVmaW5lIFRHTF9BVVhfUFdfVE9f
VENfUE9SVChwd19pZHgpCSgocHdfaWR4KSAtIFRHTF9QV19DVExfSURYX0FVWF9UQzEpCiAKK3N0
YXRpYyB2b2lkIGljbF90Y19jb2xkX2V4aXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUp
Cit7CisJY29uc3Qga3RpbWVfdCB0aW1lb3V0ID0ga3RpbWVfYWRkX21zKGt0aW1lX2dldF9yYXco
KSwgNSk7CisJaW50IHJldDsKKworCWRvIHsKKwkJcmV0ID0gc2FuZHlicmlkZ2VfcGNvZGVfd3Jp
dGVfdGltZW91dChpOTE1LAorCQkJCQkJICAgICAgSUNMX1BDT0RFX0VYSVRfVENDT0xELAorCQkJ
CQkJICAgICAgMCwgMjUwLCAxKTsKKwkJaWYgKHJldCA9PSAtRUFHQUlOKQorCQkJbXNsZWVwKDEp
OworCX0gd2hpbGUgKHJldCA9PSAtRUFHQUlOICYmIGt0aW1lX2NvbXBhcmUodGltZW91dCwga3Rp
bWVfZ2V0X3JhdygpKSA+IDApOworCisJLyogU3BlYyBzdGF0ZXMgdGhhdCBUQyBjb2xkIGV4aXQg
Y2FuIHRha2UgdXAgdG8gMW1zIHRvIGNvbXBsZXRlICovCisJaWYgKCFyZXQpCisJCW1zbGVlcCgx
KTsKKworCWRybV9kYmdfa21zKCZpOTE1LT5kcm0sICJUQyBjb2xkIGJsb2NrICVzXG4iLCByZXQg
PyAiZmFpbGVkIiA6CisJCSAgICAic3VjY2VlZGVkIik7Cit9CisKIHN0YXRpYyB2b2lkCiBpY2xf
dGNfcGh5X2F1eF9wb3dlcl93ZWxsX2VuYWJsZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYsCiAJCQkJIHN0cnVjdCBpOTE1X3Bvd2VyX3dlbGwgKnBvd2VyX3dlbGwpCkBAIC01OTMs
NyArNjE0LDggQEAgaWNsX3RjX3BoeV9hdXhfcG93ZXJfd2VsbF9lbmFibGUoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2LAogCiAJaHN3X3Bvd2VyX3dlbGxfZW5hYmxlX3ByZXBhcmUo
ZGV2X3ByaXYsIHBvd2VyX3dlbGwpOwogCi0JLyogVE9ETyBJQ0wgVEMgY29sZCBoYW5kbGluZyAq
LworCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID09IDExICYmIGRpZ19wb3J0LT50Y19sZWdhY3lf
cG9ydCkKKwkJaWNsX3RjX2NvbGRfZXhpdChkZXZfcHJpdik7CiAKIAloc3dfcG93ZXJfd2VsbF9l
bmFibGVfY29tcGxldGUoZGV2X3ByaXYsIHBvd2VyX3dlbGwpOwogCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3RjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX3RjLmMKaW5kZXggOWI4NTBjMTFhYTc4Li43NDA2MWJmOWIyYjkgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdGMuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3RjLmMKQEAgLTM0LDYgKzM0LDcgQEAg
dGNfcG9ydF9sb2FkX2ZpYV9wYXJhbXMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAJ
aWYgKElOVEVMX0lORk8oaTkxNSktPmRpc3BsYXkuaGFzX21vZHVsYXJfZmlhKSB7CiAJCW1vZHVs
YXJfZmlhID0gaW50ZWxfdW5jb3JlX3JlYWQoJmk5MTUtPnVuY29yZSwKIAkJCQkJCVBPUlRfVFhf
REZMRVhEUFNQKEZJQTEpKTsKKwkJZHJtX1dBUk5fT04oJmk5MTUtPmRybSwgbW9kdWxhcl9maWEg
PT0gMHhmZmZmZmZmZik7CiAJCW1vZHVsYXJfZmlhICY9IE1PRFVMQVJfRklBX01BU0s7CiAJfSBl
bHNlIHsKIAkJbW9kdWxhcl9maWEgPSAwOwpAQCAtNTIsNiArNTMsMzcgQEAgdGNfcG9ydF9sb2Fk
X2ZpYV9wYXJhbXMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAJfQogfQogCitzdGF0
aWMgaW50ZWxfd2FrZXJlZl90Cit0Y19jb2xkX2Jsb2NrKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3Bv
cnQgKmRpZ19wb3J0KQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkx
NShkaWdfcG9ydC0+YmFzZS5iYXNlLmRldik7CisJZW51bSBpbnRlbF9kaXNwbGF5X3Bvd2VyX2Rv
bWFpbiBkb21haW47CisKKwlpZiAoSU5URUxfR0VOKGk5MTUpICE9IDExIHx8ICFkaWdfcG9ydC0+
dGNfbGVnYWN5X3BvcnQpCisJCXJldHVybiAwOworCisJZG9tYWluID0gaW50ZWxfbGVnYWN5X2F1
eF90b19wb3dlcl9kb21haW4oZGlnX3BvcnQtPmF1eF9jaCk7CisJcmV0dXJuIGludGVsX2Rpc3Bs
YXlfcG93ZXJfZ2V0KGk5MTUsIGRvbWFpbik7Cit9CisKK3N0YXRpYyB2b2lkCit0Y19jb2xkX3Vu
YmxvY2soc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqZGlnX3BvcnQsIGludGVsX3dha2VyZWZf
dCB3YWtlcmVmKQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShk
aWdfcG9ydC0+YmFzZS5iYXNlLmRldik7CisJZW51bSBpbnRlbF9kaXNwbGF5X3Bvd2VyX2RvbWFp
biBkb21haW47CisKKwkvKgorCSAqIHdha2VyZWYgPT0gLTEsIG1lYW5zIHNvbWUgZXJyb3IgaGFw
cGVuZWQgc2F2aW5nIHNhdmVfZGVwb3Rfc3RhY2sgYnV0CisJICogcG93ZXIgc2hvdWxkIHN0aWxs
IGJlIHB1dCBkb3duIGFuZCAwIGlzIGEgaW52YWxpZCBzYXZlX2RlcG90X3N0YWNrCisJICogaWQg
c28gY2FuIGJlIHVzZWQgdG8gc2tpcCBpdCBmb3Igbm9uIFRDIGxlZ2FjeSBwb3J0cy4KKwkgKi8K
KwlpZiAod2FrZXJlZiA9PSAwKQorCQlyZXR1cm47CisKKwlkb21haW4gPSBpbnRlbF9sZWdhY3lf
YXV4X3RvX3Bvd2VyX2RvbWFpbihkaWdfcG9ydC0+YXV4X2NoKTsKKwlpbnRlbF9kaXNwbGF5X3Bv
d2VyX3B1dF9hc3luYyhpOTE1LCBkb21haW4sIHdha2VyZWYpOworfQorCiB1MzIgaW50ZWxfdGNf
cG9ydF9nZXRfbGFuZV9tYXNrKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0KQog
ewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShkaWdfcG9ydC0+YmFz
ZS5iYXNlLmRldik7CkBAIC00MTUsOSArNDQ3LDE0IEBAIHN0YXRpYyB2b2lkIGludGVsX3RjX3Bv
cnRfcmVzZXRfbW9kZShzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCwKIAllbnVt
IHRjX3BvcnRfbW9kZSBvbGRfdGNfbW9kZSA9IGRpZ19wb3J0LT50Y19tb2RlOwogCiAJaW50ZWxf
ZGlzcGxheV9wb3dlcl9mbHVzaF93b3JrKGk5MTUpOwotCWRybV9XQVJOX09OKCZpOTE1LT5kcm0s
Ci0JCSAgICBpbnRlbF9kaXNwbGF5X3Bvd2VyX2lzX2VuYWJsZWQoaTkxNSwKLQkJCQkJaW50ZWxf
YXV4X3Bvd2VyX2RvbWFpbihkaWdfcG9ydCkpKTsKKwlpZiAoSU5URUxfR0VOKGk5MTUpICE9IDEx
IHx8ICFkaWdfcG9ydC0+dGNfbGVnYWN5X3BvcnQpIHsKKwkJZW51bSBpbnRlbF9kaXNwbGF5X3Bv
d2VyX2RvbWFpbiBhdXhfZG9tYWluOworCQlib29sIGF1eF9wb3dlcmVkOworCisJCWF1eF9kb21h
aW4gPSBpbnRlbF9hdXhfcG93ZXJfZG9tYWluKGRpZ19wb3J0KTsKKwkJYXV4X3Bvd2VyZWQgPSBp
bnRlbF9kaXNwbGF5X3Bvd2VyX2lzX2VuYWJsZWQoaTkxNSwgYXV4X2RvbWFpbik7CisJCWRybV9X
QVJOX09OKCZpOTE1LT5kcm0sIGF1eF9wb3dlcmVkKTsKKwl9CiAKIAlpY2xfdGNfcGh5X2Rpc2Nv
bm5lY3QoZGlnX3BvcnQpOwogCWljbF90Y19waHlfY29ubmVjdChkaWdfcG9ydCwgcmVxdWlyZWRf
bGFuZXMpOwpAQCAtNDM5LDkgKzQ3NiwxMSBAQCBpbnRlbF90Y19wb3J0X2xpbmtfaW5pdF9yZWZj
b3VudChzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCwKIHZvaWQgaW50ZWxfdGNf
cG9ydF9zYW5pdGl6ZShzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCkKIHsKIAlz
dHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciA9ICZkaWdfcG9ydC0+YmFzZTsKKwlpbnRlbF93
YWtlcmVmX3QgdGNfY29sZF93cmVmOwogCWludCBhY3RpdmVfbGlua3MgPSAwOwogCiAJbXV0ZXhf
bG9jaygmZGlnX3BvcnQtPnRjX2xvY2spOworCXRjX2NvbGRfd3JlZiA9IHRjX2NvbGRfYmxvY2so
ZGlnX3BvcnQpOwogCiAJZGlnX3BvcnQtPnRjX21vZGUgPSBpbnRlbF90Y19wb3J0X2dldF9jdXJy
ZW50X21vZGUoZGlnX3BvcnQpOwogCWlmIChkaWdfcG9ydC0+ZHAuaXNfbXN0KQpAQCAtNDY2LDYg
KzUwNSw3IEBAIHZvaWQgaW50ZWxfdGNfcG9ydF9zYW5pdGl6ZShzdHJ1Y3QgaW50ZWxfZGlnaXRh
bF9wb3J0ICpkaWdfcG9ydCkKIAkJICAgICAgZGlnX3BvcnQtPnRjX3BvcnRfbmFtZSwKIAkJICAg
ICAgdGNfcG9ydF9tb2RlX25hbWUoZGlnX3BvcnQtPnRjX21vZGUpKTsKIAorCXRjX2NvbGRfdW5i
bG9jayhkaWdfcG9ydCwgdGNfY29sZF93cmVmKTsKIAltdXRleF91bmxvY2soJmRpZ19wb3J0LT50
Y19sb2NrKTsKIH0KIApAQCAtNDg3LDEwICs1MjcsMTUgQEAgc3RhdGljIGJvb2wgaW50ZWxfdGNf
cG9ydF9uZWVkc19yZXNldChzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCkKIGJv
b2wgaW50ZWxfdGNfcG9ydF9jb25uZWN0ZWQoc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqZGln
X3BvcnQpCiB7CiAJYm9vbCBpc19jb25uZWN0ZWQ7CisJaW50ZWxfd2FrZXJlZl90IHRjX2NvbGRf
d3JlZjsKIAogCWludGVsX3RjX3BvcnRfbG9jayhkaWdfcG9ydCk7CisJdGNfY29sZF93cmVmID0g
dGNfY29sZF9ibG9jayhkaWdfcG9ydCk7CisKIAlpc19jb25uZWN0ZWQgPSB0Y19wb3J0X2xpdmVf
c3RhdHVzX21hc2soZGlnX3BvcnQpICYKIAkJICAgICAgIEJJVChkaWdfcG9ydC0+dGNfbW9kZSk7
CisKKwl0Y19jb2xkX3VuYmxvY2soZGlnX3BvcnQsIHRjX2NvbGRfd3JlZik7CiAJaW50ZWxfdGNf
cG9ydF91bmxvY2soZGlnX3BvcnQpOwogCiAJcmV0dXJuIGlzX2Nvbm5lY3RlZDsKQEAgLTUwNiw5
ICs1NTEsMTYgQEAgc3RhdGljIHZvaWQgX19pbnRlbF90Y19wb3J0X2xvY2soc3RydWN0IGludGVs
X2RpZ2l0YWxfcG9ydCAqZGlnX3BvcnQsCiAKIAltdXRleF9sb2NrKCZkaWdfcG9ydC0+dGNfbG9j
ayk7CiAKLQlpZiAoIWRpZ19wb3J0LT50Y19saW5rX3JlZmNvdW50ICYmCi0JICAgIGludGVsX3Rj
X3BvcnRfbmVlZHNfcmVzZXQoZGlnX3BvcnQpKQotCQlpbnRlbF90Y19wb3J0X3Jlc2V0X21vZGUo
ZGlnX3BvcnQsIHJlcXVpcmVkX2xhbmVzKTsKKwlpZiAoIWRpZ19wb3J0LT50Y19saW5rX3JlZmNv
dW50KSB7CisJCWludGVsX3dha2VyZWZfdCB0Y19jb2xkX3dyZWY7CisKKwkJdGNfY29sZF93cmVm
ID0gdGNfY29sZF9ibG9jayhkaWdfcG9ydCk7CisKKwkJaWYgKGludGVsX3RjX3BvcnRfbmVlZHNf
cmVzZXQoZGlnX3BvcnQpKQorCQkJaW50ZWxfdGNfcG9ydF9yZXNldF9tb2RlKGRpZ19wb3J0LCBy
ZXF1aXJlZF9sYW5lcyk7CisKKwkJdGNfY29sZF91bmJsb2NrKGRpZ19wb3J0LCB0Y19jb2xkX3dy
ZWYpOworCX0KIAogCWRybV9XQVJOX09OKCZpOTE1LT5kcm0sIGRpZ19wb3J0LT50Y19sb2NrX3dh
a2VyZWYpOwogCWRpZ19wb3J0LT50Y19sb2NrX3dha2VyZWYgPSB3YWtlcmVmOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfcmVnLmgKaW5kZXggMWE3YmQ2ZGIxNjRiLi4wMzg5YWZhMjM2MWYgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9yZWcuaApAQCAtOTEwOCw2ICs5MTA4LDcgQEAgZW51bSB7CiAjZGVmaW5lICAgICBJ
Q0xfUENPREVfTUVNX1NTX1JFQURfUUdWX1BPSU5UX0lORk8ocG9pbnQpCSgoKHBvaW50KSA8PCAx
NikgfCAoMHgxIDw8IDgpKQogI2RlZmluZSAgIEdFTjZfUENPREVfUkVBRF9EX0NPTVAJCTB4MTAK
ICNkZWZpbmUgICBHRU42X1BDT0RFX1dSSVRFX0RfQ09NUAkJMHgxMQorI2RlZmluZSAgIElDTF9Q
Q09ERV9FWElUX1RDQ09MRAkJCTB4MTIKICNkZWZpbmUgICBIU1dfUENPREVfREVfV1JJVEVfRlJF
UV9SRVEJCTB4MTcKICNkZWZpbmUgICBESVNQTEFZX0lQU19DT05UUk9MCQkJMHgxOQogICAgICAg
ICAgICAgLyogU2VlIGFsc28gSVBTX0NUTCAqLwotLSAKMi4yNi4wCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0Cklu
dGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6904AE0B15
	for <lists+intel-gfx@lfdr.de>; Tue, 22 Oct 2019 19:56:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B29DD6E8BA;
	Tue, 22 Oct 2019 17:56:17 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9192F6E8BA
 for <intel-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 17:56:15 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 Oct 2019 10:56:15 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,217,1569308400"; d="scan'208";a="187979538"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga007.jf.intel.com with SMTP; 22 Oct 2019 10:56:13 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Tue, 22 Oct 2019 20:56:12 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 22 Oct 2019 20:55:52 +0300
Message-Id: <20191022175554.18012-7-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191022175554.18012-1-ville.syrjala@linux.intel.com>
References: <20191022175554.18012-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 6/8] drm/i915: s/pipe_config/crtc_state/ in pfit
 functions
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkZv
bGxvdyB0aGUgbmV3IG5hbWluZyBjb252ZW50aW9uIGFuZCBjYWxsIHRoZSBjcnRjIHN0YXRlCiJj
cnRjX3N0YXRlIiwgYW5kIHdoaWxlIGF0IGl0IGRyb3AgdGhlIHJlZHVuZGFudCBjcnRjIGFyZ3Vt
ZW50LgoKU2lnbmVkLW9mZi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4
LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ljbF9kc2kuYyAg
ICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jICAgIHwg
IDggKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5jICB8ICA1ICst
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2x2ZHMuYyAgfCAgNCArLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wYW5lbC5jIHwgOTIgKysrKysrKysrKyst
LS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wYW5lbC5oIHwg
IDYgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvdmx2X2RzaS5jICAgICB8ICA1ICst
CiA3IGZpbGVzIGNoYW5nZWQsIDU3IGluc2VydGlvbnMoKyksIDY2IGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pY2xfZHNpLmMKaW5kZXggNmUzOThjMzNhNTI0Li42Mjdj
YmQ4ODAyMjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2Rz
aS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jCkBAIC0xMjY1
LDcgKzEyNjUsNiBAQCBzdGF0aWMgaW50IGdlbjExX2RzaV9jb21wdXRlX2NvbmZpZyhzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAlzdHJ1Y3QgaW50ZWxfZHNpICppbnRlbF9kc2kgPSBj
b250YWluZXJfb2YoZW5jb2Rlciwgc3RydWN0IGludGVsX2RzaSwKIAkJCQkJCSAgIGJhc2UpOwog
CXN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmludGVsX2Nvbm5lY3RvciA9IGludGVsX2RzaS0+YXR0
YWNoZWRfY29ubmVjdG9yOwotCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9faW50ZWxfY3J0
YyhwaXBlX2NvbmZpZy0+YmFzZS5jcnRjKTsKIAljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZSAqZml4ZWRfbW9kZSA9CiAJCQkJCWludGVsX2Nvbm5lY3Rvci0+cGFuZWwuZml4ZWRfbW9kZTsK
IAlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSA9CkBAIC0xMjczLDcgKzEy
NzIsNyBAQCBzdGF0aWMgaW50IGdlbjExX2RzaV9jb21wdXRlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxf
ZW5jb2RlciAqZW5jb2RlciwKIAogCXBpcGVfY29uZmlnLT5vdXRwdXRfZm9ybWF0ID0gSU5URUxf
T1VUUFVUX0ZPUk1BVF9SR0I7CiAJaW50ZWxfZml4ZWRfcGFuZWxfbW9kZShmaXhlZF9tb2RlLCBh
ZGp1c3RlZF9tb2RlKTsKLQlpbnRlbF9wY2hfcGFuZWxfZml0dGluZyhjcnRjLCBwaXBlX2NvbmZp
ZywgY29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKTsKKwlpbnRlbF9wY2hfcGFuZWxfZml0dGluZyhw
aXBlX2NvbmZpZywgY29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKTsKIAogCWFkanVzdGVkX21vZGUt
PmZsYWdzID0gMDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kcC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCmluZGV4
IDBiMzhiODFkZTUwOC4uZGNkNmI5NmRlOWFjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kcC5jCkBAIC0yMjQ0LDcgKzIyNDQsNiBAQCBpbnRlbF9kcF95Y2JjcjQyMF9jb25m
aWcoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwKIAljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlf
aW5mbyAqaW5mbyA9ICZjb25uZWN0b3ItPmRpc3BsYXlfaW5mbzsKIAljb25zdCBzdHJ1Y3QgZHJt
X2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSA9CiAJCSZjcnRjX3N0YXRlLT5iYXNlLmFkanVz
dGVkX21vZGU7Ci0Jc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNf
c3RhdGUtPmJhc2UuY3J0Yyk7CiAKIAlpZiAoIWRybV9tb2RlX2lzXzQyMF9vbmx5KGluZm8sIGFk
anVzdGVkX21vZGUpIHx8CiAJICAgICFpbnRlbF9kcF9nZXRfY29sb3JpbWV0cnlfc3RhdHVzKGlu
dGVsX2RwKSB8fApAQCAtMjI1Myw3ICsyMjUyLDcgQEAgaW50ZWxfZHBfeWNiY3I0MjBfY29uZmln
KHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsCiAKIAljcnRjX3N0YXRlLT5vdXRwdXRfZm9ybWF0
ID0gSU5URUxfT1VUUFVUX0ZPUk1BVF9ZQ0JDUjQyMDsKIAotCWludGVsX3BjaF9wYW5lbF9maXR0
aW5nKGNydGMsIGNydGNfc3RhdGUsIERSTV9NT0RFX1NDQUxFX0ZVTExTQ1JFRU4pOworCWludGVs
X3BjaF9wYW5lbF9maXR0aW5nKGNydGNfc3RhdGUsIERSTV9NT0RFX1NDQUxFX0ZVTExTQ1JFRU4p
OwogCiAJcmV0dXJuIDA7CiB9CkBAIC0yMzAxLDcgKzIzMDAsNiBAQCBpbnRlbF9kcF9jb21wdXRl
X2NvbmZpZyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAlzdHJ1Y3QgaW50ZWxfZHAg
KmludGVsX2RwID0gZW5jX3RvX2ludGVsX2RwKCZlbmNvZGVyLT5iYXNlKTsKIAlzdHJ1Y3QgaW50
ZWxfbHNwY29uICpsc3Bjb24gPSBlbmNfdG9faW50ZWxfbHNwY29uKCZlbmNvZGVyLT5iYXNlKTsK
IAllbnVtIHBvcnQgcG9ydCA9IGVuY29kZXItPnBvcnQ7Ci0Jc3RydWN0IGludGVsX2NydGMgKmlu
dGVsX2NydGMgPSB0b19pbnRlbF9jcnRjKHBpcGVfY29uZmlnLT5iYXNlLmNydGMpOwogCXN0cnVj
dCBpbnRlbF9jb25uZWN0b3IgKmludGVsX2Nvbm5lY3RvciA9IGludGVsX2RwLT5hdHRhY2hlZF9j
b25uZWN0b3I7CiAJc3RydWN0IGludGVsX2RpZ2l0YWxfY29ubmVjdG9yX3N0YXRlICppbnRlbF9j
b25uX3N0YXRlID0KIAkJdG9faW50ZWxfZGlnaXRhbF9jb25uZWN0b3Jfc3RhdGUoY29ubl9zdGF0
ZSk7CkBAIC0yMzM1LDEwICsyMzMzLDEwIEBAIGludGVsX2RwX2NvbXB1dGVfY29uZmlnKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkJCSAgICAgICBhZGp1c3RlZF9tb2RlKTsKIAog
CQlpZiAoSEFTX0dNQ0goZGV2X3ByaXYpKQotCQkJaW50ZWxfZ21jaF9wYW5lbF9maXR0aW5nKGlu
dGVsX2NydGMsIHBpcGVfY29uZmlnLAorCQkJaW50ZWxfZ21jaF9wYW5lbF9maXR0aW5nKHBpcGVf
Y29uZmlnLAogCQkJCQkJIGNvbm5fc3RhdGUtPnNjYWxpbmdfbW9kZSk7CiAJCWVsc2UKLQkJCWlu
dGVsX3BjaF9wYW5lbF9maXR0aW5nKGludGVsX2NydGMsIHBpcGVfY29uZmlnLAorCQkJaW50ZWxf
cGNoX3BhbmVsX2ZpdHRpbmcocGlwZV9jb25maWcsCiAJCQkJCQljb25uX3N0YXRlLT5zY2FsaW5n
X21vZGUpOwogCX0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9oZG1pLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkbWkuYwpp
bmRleCA5ODY4OGRmYzJkZWUuLjBhN2RjNzhkYjMwNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9oZG1pLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9oZG1pLmMKQEAgLTIyODEsOCArMjI4MSw2IEBAIHN0YXRpYyBib29sCiBp
bnRlbF9oZG1pX3ljYmNyNDIwX2NvbmZpZyhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9y
LAogCQkJICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNvbmZpZykKIHsKLQlzdHJ1Y3QgaW50
ZWxfY3J0YyAqaW50ZWxfY3J0YyA9IHRvX2ludGVsX2NydGMoY29uZmlnLT5iYXNlLmNydGMpOwot
CiAJaWYgKCFjb25uZWN0b3ItPnljYmNyXzQyMF9hbGxvd2VkKSB7CiAJCURSTV9FUlJPUigiUGxh
dGZvcm0gZG9lc24ndCBzdXBwb3J0IFlDQkNSNDIwIG91dHB1dFxuIik7CiAJCXJldHVybiBmYWxz
ZTsKQEAgLTIyOTAsOCArMjI4OCw3IEBAIGludGVsX2hkbWlfeWNiY3I0MjBfY29uZmlnKHN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCiAKIAljb25maWctPm91dHB1dF9mb3JtYXQgPSBJ
TlRFTF9PVVRQVVRfRk9STUFUX1lDQkNSNDIwOwogCi0JaW50ZWxfcGNoX3BhbmVsX2ZpdHRpbmco
aW50ZWxfY3J0YywgY29uZmlnLAotCQkJCURSTV9NT0RFX1NDQUxFX0ZVTExTQ1JFRU4pOworCWlu
dGVsX3BjaF9wYW5lbF9maXR0aW5nKGNvbmZpZywgRFJNX01PREVfU0NBTEVfRlVMTFNDUkVFTik7
CiAKIAlyZXR1cm4gdHJ1ZTsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfbHZkcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9s
dmRzLmMKaW5kZXggMTM4NDFkN2M0NTViLi4wOTQ5MzUwNTk0MGIgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfbHZkcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfbHZkcy5jCkBAIC00MzAsMTAgKzQzMCwxMCBAQCBzdGF0aWMg
aW50IGludGVsX2x2ZHNfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmludGVs
X2VuY29kZXIsCiAJaWYgKEhBU19QQ0hfU1BMSVQoZGV2X3ByaXYpKSB7CiAJCXBpcGVfY29uZmln
LT5oYXNfcGNoX2VuY29kZXIgPSB0cnVlOwogCi0JCWludGVsX3BjaF9wYW5lbF9maXR0aW5nKGlu
dGVsX2NydGMsIHBpcGVfY29uZmlnLAorCQlpbnRlbF9wY2hfcGFuZWxfZml0dGluZyhwaXBlX2Nv
bmZpZywKIAkJCQkJY29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKTsKIAl9IGVsc2UgewotCQlpbnRl
bF9nbWNoX3BhbmVsX2ZpdHRpbmcoaW50ZWxfY3J0YywgcGlwZV9jb25maWcsCisJCWludGVsX2dt
Y2hfcGFuZWxfZml0dGluZyhwaXBlX2NvbmZpZywKIAkJCQkJIGNvbm5fc3RhdGUtPnNjYWxpbmdf
bW9kZSk7CiAKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX3BhbmVsLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3BhbmVsLmMK
aW5kZXggNjgyNTdiMjFhYmY1Li4zNTEyNWFhOTdhOWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcGFuZWwuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX3BhbmVsLmMKQEAgLTE3NCwyMyArMTc0LDIzIEBAIGludGVsX3BhbmVs
X3ZidF9maXhlZF9tb2RlKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAogLyog
YWRqdXN0ZWRfbW9kZSBoYXMgYmVlbiBwcmVzZXQgdG8gYmUgdGhlIHBhbmVsJ3MgZml4ZWQgbW9k
ZSAqLwogdm9pZAotaW50ZWxfcGNoX3BhbmVsX2ZpdHRpbmcoc3RydWN0IGludGVsX2NydGMgKmlu
dGVsX2NydGMsCi0JCQlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcsCitpbnRl
bF9wY2hfcGFuZWxfZml0dGluZyhzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwK
IAkJCWludCBmaXR0aW5nX21vZGUpCiB7Ci0JY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUg
KmFkanVzdGVkX21vZGUgPSAmcGlwZV9jb25maWctPmJhc2UuYWRqdXN0ZWRfbW9kZTsKKwljb25z
dCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSA9CisJCSZjcnRjX3N0YXRl
LT5iYXNlLmFkanVzdGVkX21vZGU7CiAJaW50IHgsIHksIHdpZHRoLCBoZWlnaHQ7CiAKIAkvKiBO
YXRpdmUgbW9kZXMgZG9uJ3QgbmVlZCBmaXR0aW5nICovCi0JaWYgKGFkanVzdGVkX21vZGUtPmNy
dGNfaGRpc3BsYXkgPT0gcGlwZV9jb25maWctPnBpcGVfc3JjX3cgJiYKLQkgICAgYWRqdXN0ZWRf
bW9kZS0+Y3J0Y192ZGlzcGxheSA9PSBwaXBlX2NvbmZpZy0+cGlwZV9zcmNfaCAmJgotCSAgICBw
aXBlX2NvbmZpZy0+b3V0cHV0X2Zvcm1hdCAhPSBJTlRFTF9PVVRQVVRfRk9STUFUX1lDQkNSNDIw
KQorCWlmIChhZGp1c3RlZF9tb2RlLT5jcnRjX2hkaXNwbGF5ID09IGNydGNfc3RhdGUtPnBpcGVf
c3JjX3cgJiYKKwkgICAgYWRqdXN0ZWRfbW9kZS0+Y3J0Y192ZGlzcGxheSA9PSBjcnRjX3N0YXRl
LT5waXBlX3NyY19oICYmCisJICAgIGNydGNfc3RhdGUtPm91dHB1dF9mb3JtYXQgIT0gSU5URUxf
T1VUUFVUX0ZPUk1BVF9ZQ0JDUjQyMCkKIAkJcmV0dXJuOwogCiAJc3dpdGNoIChmaXR0aW5nX21v
ZGUpIHsKIAljYXNlIERSTV9NT0RFX1NDQUxFX0NFTlRFUjoKLQkJd2lkdGggPSBwaXBlX2NvbmZp
Zy0+cGlwZV9zcmNfdzsKLQkJaGVpZ2h0ID0gcGlwZV9jb25maWctPnBpcGVfc3JjX2g7CisJCXdp
ZHRoID0gY3J0Y19zdGF0ZS0+cGlwZV9zcmNfdzsKKwkJaGVpZ2h0ID0gY3J0Y19zdGF0ZS0+cGlw
ZV9zcmNfaDsKIAkJeCA9IChhZGp1c3RlZF9tb2RlLT5jcnRjX2hkaXNwbGF5IC0gd2lkdGggKyAx
KS8yOwogCQl5ID0gKGFkanVzdGVkX21vZGUtPmNydGNfdmRpc3BsYXkgLSBoZWlnaHQgKyAxKS8y
OwogCQlicmVhazsKQEAgLTE5OSwxOCArMTk5LDE4IEBAIGludGVsX3BjaF9wYW5lbF9maXR0aW5n
KHN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjLAogCQkvKiBTY2FsZSBidXQgcHJlc2VydmUg
dGhlIGFzcGVjdCByYXRpbyAqLwogCQl7CiAJCQl1MzIgc2NhbGVkX3dpZHRoID0gYWRqdXN0ZWRf
bW9kZS0+Y3J0Y19oZGlzcGxheQotCQkJCSogcGlwZV9jb25maWctPnBpcGVfc3JjX2g7Ci0JCQl1
MzIgc2NhbGVkX2hlaWdodCA9IHBpcGVfY29uZmlnLT5waXBlX3NyY193CisJCQkJKiBjcnRjX3N0
YXRlLT5waXBlX3NyY19oOworCQkJdTMyIHNjYWxlZF9oZWlnaHQgPSBjcnRjX3N0YXRlLT5waXBl
X3NyY193CiAJCQkJKiBhZGp1c3RlZF9tb2RlLT5jcnRjX3ZkaXNwbGF5OwogCQkJaWYgKHNjYWxl
ZF93aWR0aCA+IHNjYWxlZF9oZWlnaHQpIHsgLyogcGlsbGFyICovCi0JCQkJd2lkdGggPSBzY2Fs
ZWRfaGVpZ2h0IC8gcGlwZV9jb25maWctPnBpcGVfc3JjX2g7CisJCQkJd2lkdGggPSBzY2FsZWRf
aGVpZ2h0IC8gY3J0Y19zdGF0ZS0+cGlwZV9zcmNfaDsKIAkJCQlpZiAod2lkdGggJiAxKQogCQkJ
CQl3aWR0aCsrOwogCQkJCXggPSAoYWRqdXN0ZWRfbW9kZS0+Y3J0Y19oZGlzcGxheSAtIHdpZHRo
ICsgMSkgLyAyOwogCQkJCXkgPSAwOwogCQkJCWhlaWdodCA9IGFkanVzdGVkX21vZGUtPmNydGNf
dmRpc3BsYXk7CiAJCQl9IGVsc2UgaWYgKHNjYWxlZF93aWR0aCA8IHNjYWxlZF9oZWlnaHQpIHsg
LyogbGV0dGVyICovCi0JCQkJaGVpZ2h0ID0gc2NhbGVkX3dpZHRoIC8gcGlwZV9jb25maWctPnBp
cGVfc3JjX3c7CisJCQkJaGVpZ2h0ID0gc2NhbGVkX3dpZHRoIC8gY3J0Y19zdGF0ZS0+cGlwZV9z
cmNfdzsKIAkJCQlpZiAoaGVpZ2h0ICYgMSkKIAkJCQkgICAgaGVpZ2h0Kys7CiAJCQkJeSA9IChh
ZGp1c3RlZF9tb2RlLT5jcnRjX3ZkaXNwbGF5IC0gaGVpZ2h0ICsgMSkgLyAyOwpAQCAtMjM1LDkg
KzIzNSw5IEBAIGludGVsX3BjaF9wYW5lbF9maXR0aW5nKHN0cnVjdCBpbnRlbF9jcnRjICppbnRl
bF9jcnRjLAogCQlyZXR1cm47CiAJfQogCi0JZHJtX3JlY3RfaW5pdCgmcGlwZV9jb25maWctPnBj
aF9wZml0LmRzdCwKKwlkcm1fcmVjdF9pbml0KCZjcnRjX3N0YXRlLT5wY2hfcGZpdC5kc3QsCiAJ
CSAgICAgIHgsIHksIHdpZHRoLCBoZWlnaHQpOwotCXBpcGVfY29uZmlnLT5wY2hfcGZpdC5lbmFi
bGVkID0gdHJ1ZTsKKwljcnRjX3N0YXRlLT5wY2hfcGZpdC5lbmFibGVkID0gdHJ1ZTsKIH0KIAog
c3RhdGljIHZvaWQKQEAgLTI5NiwxMyArMjk2LDEzIEBAIHN0YXRpYyBpbmxpbmUgdTMyIHBhbmVs
X2ZpdHRlcl9zY2FsaW5nKHUzMiBzb3VyY2UsIHUzMiB0YXJnZXQpCiAJcmV0dXJuIChGQUNUT1Ig
KiByYXRpbyArIEZBQ1RPUi8yKSAvIEZBQ1RPUjsKIH0KIAotc3RhdGljIHZvaWQgaTk2NV9zY2Fs
ZV9hc3BlY3Qoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAorc3RhdGljIHZv
aWQgaTk2NV9zY2FsZV9hc3BlY3Qoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUs
CiAJCQkgICAgICB1MzIgKnBmaXRfY29udHJvbCkKIHsKLQljb25zdCBzdHJ1Y3QgZHJtX2Rpc3Bs
YXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSA9ICZwaXBlX2NvbmZpZy0+YmFzZS5hZGp1c3RlZF9tb2Rl
OworCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlID0gJmNydGNf
c3RhdGUtPmJhc2UuYWRqdXN0ZWRfbW9kZTsKIAl1MzIgc2NhbGVkX3dpZHRoID0gYWRqdXN0ZWRf
bW9kZS0+Y3J0Y19oZGlzcGxheSAqCi0JCXBpcGVfY29uZmlnLT5waXBlX3NyY19oOwotCXUzMiBz
Y2FsZWRfaGVpZ2h0ID0gcGlwZV9jb25maWctPnBpcGVfc3JjX3cgKgorCQljcnRjX3N0YXRlLT5w
aXBlX3NyY19oOworCXUzMiBzY2FsZWRfaGVpZ2h0ID0gY3J0Y19zdGF0ZS0+cGlwZV9zcmNfdyAq
CiAJCWFkanVzdGVkX21vZGUtPmNydGNfdmRpc3BsYXk7CiAKIAkvKiA5NjUrIGlzIGVhc3ksIGl0
IGRvZXMgZXZlcnl0aGluZyBpbiBodyAqLwpAQCAtMzEyLDE4ICszMTIsMTggQEAgc3RhdGljIHZv
aWQgaTk2NV9zY2FsZV9hc3BlY3Qoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmln
LAogCWVsc2UgaWYgKHNjYWxlZF93aWR0aCA8IHNjYWxlZF9oZWlnaHQpCiAJCSpwZml0X2NvbnRy
b2wgfD0gUEZJVF9FTkFCTEUgfAogCQkJUEZJVF9TQ0FMSU5HX0xFVFRFUjsKLQllbHNlIGlmIChh
ZGp1c3RlZF9tb2RlLT5jcnRjX2hkaXNwbGF5ICE9IHBpcGVfY29uZmlnLT5waXBlX3NyY193KQor
CWVsc2UgaWYgKGFkanVzdGVkX21vZGUtPmNydGNfaGRpc3BsYXkgIT0gY3J0Y19zdGF0ZS0+cGlw
ZV9zcmNfdykKIAkJKnBmaXRfY29udHJvbCB8PSBQRklUX0VOQUJMRSB8IFBGSVRfU0NBTElOR19B
VVRPOwogfQogCi1zdGF0aWMgdm9pZCBpOXh4X3NjYWxlX2FzcGVjdChzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZSAqcGlwZV9jb25maWcsCitzdGF0aWMgdm9pZCBpOXh4X3NjYWxlX2FzcGVjdChzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJCSAgICAgIHUzMiAqcGZpdF9jb250
cm9sLCB1MzIgKnBmaXRfcGdtX3JhdGlvcywKIAkJCSAgICAgIHUzMiAqYm9yZGVyKQogewotCXN0
cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlID0gJnBpcGVfY29uZmlnLT5iYXNl
LmFkanVzdGVkX21vZGU7CisJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUg
PSAmY3J0Y19zdGF0ZS0+YmFzZS5hZGp1c3RlZF9tb2RlOwogCXUzMiBzY2FsZWRfd2lkdGggPSBh
ZGp1c3RlZF9tb2RlLT5jcnRjX2hkaXNwbGF5ICoKLQkJcGlwZV9jb25maWctPnBpcGVfc3JjX2g7
Ci0JdTMyIHNjYWxlZF9oZWlnaHQgPSBwaXBlX2NvbmZpZy0+cGlwZV9zcmNfdyAqCisJCWNydGNf
c3RhdGUtPnBpcGVfc3JjX2g7CisJdTMyIHNjYWxlZF9oZWlnaHQgPSBjcnRjX3N0YXRlLT5waXBl
X3NyY193ICoKIAkJYWRqdXN0ZWRfbW9kZS0+Y3J0Y192ZGlzcGxheTsKIAl1MzIgYml0czsKIApA
QCAtMzM1LDExICszMzUsMTEgQEAgc3RhdGljIHZvaWQgaTl4eF9zY2FsZV9hc3BlY3Qoc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCWlmIChzY2FsZWRfd2lkdGggPiBzY2Fs
ZWRfaGVpZ2h0KSB7IC8qIHBpbGxhciAqLwogCQljZW50cmVfaG9yaXpvbnRhbGx5KGFkanVzdGVk
X21vZGUsCiAJCQkJICAgIHNjYWxlZF9oZWlnaHQgLwotCQkJCSAgICBwaXBlX2NvbmZpZy0+cGlw
ZV9zcmNfaCk7CisJCQkJICAgIGNydGNfc3RhdGUtPnBpcGVfc3JjX2gpOwogCiAJCSpib3JkZXIg
PSBMVkRTX0JPUkRFUl9FTkFCTEU7Ci0JCWlmIChwaXBlX2NvbmZpZy0+cGlwZV9zcmNfaCAhPSBh
ZGp1c3RlZF9tb2RlLT5jcnRjX3ZkaXNwbGF5KSB7Ci0JCQliaXRzID0gcGFuZWxfZml0dGVyX3Nj
YWxpbmcocGlwZV9jb25maWctPnBpcGVfc3JjX2gsCisJCWlmIChjcnRjX3N0YXRlLT5waXBlX3Ny
Y19oICE9IGFkanVzdGVkX21vZGUtPmNydGNfdmRpc3BsYXkpIHsKKwkJCWJpdHMgPSBwYW5lbF9m
aXR0ZXJfc2NhbGluZyhjcnRjX3N0YXRlLT5waXBlX3NyY19oLAogCQkJCQkJICAgIGFkanVzdGVk
X21vZGUtPmNydGNfdmRpc3BsYXkpOwogCiAJCQkqcGZpdF9wZ21fcmF0aW9zIHw9IChiaXRzIDw8
IFBGSVRfSE9SSVpfU0NBTEVfU0hJRlQgfApAQCAtMzUxLDExICszNTEsMTEgQEAgc3RhdGljIHZv
aWQgaTl4eF9zY2FsZV9hc3BlY3Qoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmln
LAogCX0gZWxzZSBpZiAoc2NhbGVkX3dpZHRoIDwgc2NhbGVkX2hlaWdodCkgeyAvKiBsZXR0ZXIg
Ki8KIAkJY2VudHJlX3ZlcnRpY2FsbHkoYWRqdXN0ZWRfbW9kZSwKIAkJCQkgIHNjYWxlZF93aWR0
aCAvCi0JCQkJICBwaXBlX2NvbmZpZy0+cGlwZV9zcmNfdyk7CisJCQkJICBjcnRjX3N0YXRlLT5w
aXBlX3NyY193KTsKIAogCQkqYm9yZGVyID0gTFZEU19CT1JERVJfRU5BQkxFOwotCQlpZiAocGlw
ZV9jb25maWctPnBpcGVfc3JjX3cgIT0gYWRqdXN0ZWRfbW9kZS0+Y3J0Y19oZGlzcGxheSkgewot
CQkJYml0cyA9IHBhbmVsX2ZpdHRlcl9zY2FsaW5nKHBpcGVfY29uZmlnLT5waXBlX3NyY193LAor
CQlpZiAoY3J0Y19zdGF0ZS0+cGlwZV9zcmNfdyAhPSBhZGp1c3RlZF9tb2RlLT5jcnRjX2hkaXNw
bGF5KSB7CisJCQliaXRzID0gcGFuZWxfZml0dGVyX3NjYWxpbmcoY3J0Y19zdGF0ZS0+cGlwZV9z
cmNfdywKIAkJCQkJCSAgICBhZGp1c3RlZF9tb2RlLT5jcnRjX2hkaXNwbGF5KTsKIAogCQkJKnBm
aXRfcGdtX3JhdGlvcyB8PSAoYml0cyA8PCBQRklUX0hPUklaX1NDQUxFX1NISUZUIHwKQEAgLTM3
MywxNyArMzczLDE3IEBAIHN0YXRpYyB2b2lkIGk5eHhfc2NhbGVfYXNwZWN0KHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZywKIAl9CiB9CiAKLXZvaWQgaW50ZWxfZ21jaF9wYW5l
bF9maXR0aW5nKHN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjLAotCQkJICAgICAgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAordm9pZCBpbnRlbF9nbWNoX3BhbmVsX2Zp
dHRpbmcoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJCQkgICAgICBpbnQg
Zml0dGluZ19tb2RlKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRv
X2k5MTUoaW50ZWxfY3J0Yy0+YmFzZS5kZXYpOworCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0g
dG9faW50ZWxfY3J0YyhjcnRjX3N0YXRlLT5iYXNlLmNydGMpOworCXN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY3J0Yy0+YmFzZS5kZXYpOwogCXUzMiBwZml0X2Nv
bnRyb2wgPSAwLCBwZml0X3BnbV9yYXRpb3MgPSAwLCBib3JkZXIgPSAwOwotCXN0cnVjdCBkcm1f
ZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlID0gJnBpcGVfY29uZmlnLT5iYXNlLmFkanVzdGVk
X21vZGU7CisJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUgPSAmY3J0Y19z
dGF0ZS0+YmFzZS5hZGp1c3RlZF9tb2RlOwogCiAJLyogTmF0aXZlIG1vZGVzIGRvbid0IG5lZWQg
Zml0dGluZyAqLwotCWlmIChhZGp1c3RlZF9tb2RlLT5jcnRjX2hkaXNwbGF5ID09IHBpcGVfY29u
ZmlnLT5waXBlX3NyY193ICYmCi0JICAgIGFkanVzdGVkX21vZGUtPmNydGNfdmRpc3BsYXkgPT0g
cGlwZV9jb25maWctPnBpcGVfc3JjX2gpCisJaWYgKGFkanVzdGVkX21vZGUtPmNydGNfaGRpc3Bs
YXkgPT0gY3J0Y19zdGF0ZS0+cGlwZV9zcmNfdyAmJgorCSAgICBhZGp1c3RlZF9tb2RlLT5jcnRj
X3ZkaXNwbGF5ID09IGNydGNfc3RhdGUtPnBpcGVfc3JjX2gpCiAJCWdvdG8gb3V0OwogCiAJc3dp
dGNoIChmaXR0aW5nX21vZGUpIHsKQEAgLTM5MiwxNiArMzkyLDE2IEBAIHZvaWQgaW50ZWxfZ21j
aF9wYW5lbF9maXR0aW5nKHN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjLAogCQkgKiBGb3Ig
Y2VudGVyZWQgbW9kZXMsIHdlIGhhdmUgdG8gY2FsY3VsYXRlIGJvcmRlciB3aWR0aHMgJgogCQkg
KiBoZWlnaHRzIGFuZCBtb2RpZnkgdGhlIHZhbHVlcyBwcm9ncmFtbWVkIGludG8gdGhlIENSVEMu
CiAJCSAqLwotCQljZW50cmVfaG9yaXpvbnRhbGx5KGFkanVzdGVkX21vZGUsIHBpcGVfY29uZmln
LT5waXBlX3NyY193KTsKLQkJY2VudHJlX3ZlcnRpY2FsbHkoYWRqdXN0ZWRfbW9kZSwgcGlwZV9j
b25maWctPnBpcGVfc3JjX2gpOworCQljZW50cmVfaG9yaXpvbnRhbGx5KGFkanVzdGVkX21vZGUs
IGNydGNfc3RhdGUtPnBpcGVfc3JjX3cpOworCQljZW50cmVfdmVydGljYWxseShhZGp1c3RlZF9t
b2RlLCBjcnRjX3N0YXRlLT5waXBlX3NyY19oKTsKIAkJYm9yZGVyID0gTFZEU19CT1JERVJfRU5B
QkxFOwogCQlicmVhazsKIAljYXNlIERSTV9NT0RFX1NDQUxFX0FTUEVDVDoKIAkJLyogU2NhbGUg
YnV0IHByZXNlcnZlIHRoZSBhc3BlY3QgcmF0aW8gKi8KIAkJaWYgKElOVEVMX0dFTihkZXZfcHJp
dikgPj0gNCkKLQkJCWk5NjVfc2NhbGVfYXNwZWN0KHBpcGVfY29uZmlnLCAmcGZpdF9jb250cm9s
KTsKKwkJCWk5NjVfc2NhbGVfYXNwZWN0KGNydGNfc3RhdGUsICZwZml0X2NvbnRyb2wpOwogCQll
bHNlCi0JCQlpOXh4X3NjYWxlX2FzcGVjdChwaXBlX2NvbmZpZywgJnBmaXRfY29udHJvbCwKKwkJ
CWk5eHhfc2NhbGVfYXNwZWN0KGNydGNfc3RhdGUsICZwZml0X2NvbnRyb2wsCiAJCQkJCSAgJnBm
aXRfcGdtX3JhdGlvcywgJmJvcmRlcik7CiAJCWJyZWFrOwogCWNhc2UgRFJNX01PREVfU0NBTEVf
RlVMTFNDUkVFTjoKQEAgLTQwOSw4ICs0MDksOCBAQCB2b2lkIGludGVsX2dtY2hfcGFuZWxfZml0
dGluZyhzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0YywKIAkJICogRnVsbCBzY2FsaW5nLCBl
dmVuIGlmIGl0IGNoYW5nZXMgdGhlIGFzcGVjdCByYXRpby4KIAkJICogRm9ydHVuYXRlbHkgdGhp
cyBpcyBhbGwgZG9uZSBmb3IgdXMgaW4gaHcuCiAJCSAqLwotCQlpZiAocGlwZV9jb25maWctPnBp
cGVfc3JjX2ggIT0gYWRqdXN0ZWRfbW9kZS0+Y3J0Y192ZGlzcGxheSB8fAotCQkgICAgcGlwZV9j
b25maWctPnBpcGVfc3JjX3cgIT0gYWRqdXN0ZWRfbW9kZS0+Y3J0Y19oZGlzcGxheSkgeworCQlp
ZiAoY3J0Y19zdGF0ZS0+cGlwZV9zcmNfaCAhPSBhZGp1c3RlZF9tb2RlLT5jcnRjX3ZkaXNwbGF5
IHx8CisJCSAgICBjcnRjX3N0YXRlLT5waXBlX3NyY193ICE9IGFkanVzdGVkX21vZGUtPmNydGNf
aGRpc3BsYXkpIHsKIAkJCXBmaXRfY29udHJvbCB8PSBQRklUX0VOQUJMRTsKIAkJCWlmIChJTlRF
TF9HRU4oZGV2X3ByaXYpID49IDQpCiAJCQkJcGZpdF9jb250cm9sIHw9IFBGSVRfU0NBTElOR19B
VVRPOwpAQCAtNDI5LDcgKzQyOSw3IEBAIHZvaWQgaW50ZWxfZ21jaF9wYW5lbF9maXR0aW5nKHN0
cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjLAogCS8qIDk2NSsgd2FudHMgZnV6enkgZml0dGlu
ZyAqLwogCS8qIEZJWE1FOiBoYW5kbGUgbXVsdGlwbGUgcGFuZWxzIGJ5IGZhaWxpbmcgZ3JhY2Vm
dWxseSAqLwogCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDQpCi0JCXBmaXRfY29udHJvbCB8
PSBQRklUX1BJUEUoaW50ZWxfY3J0Yy0+cGlwZSkgfCBQRklUX0ZJTFRFUl9GVVpaWTsKKwkJcGZp
dF9jb250cm9sIHw9IFBGSVRfUElQRShjcnRjLT5waXBlKSB8IFBGSVRfRklMVEVSX0ZVWlpZOwog
CiBvdXQ6CiAJaWYgKChwZml0X2NvbnRyb2wgJiBQRklUX0VOQUJMRSkgPT0gMCkgewpAQCAtNDM4
LDEyICs0MzgsMTIgQEAgdm9pZCBpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmcoc3RydWN0IGludGVs
X2NydGMgKmludGVsX2NydGMsCiAJfQogCiAJLyogTWFrZSBzdXJlIHByZS05NjUgc2V0IGRpdGhl
ciBjb3JyZWN0bHkgZm9yIDE4YnBwIHBhbmVscy4gKi8KLQlpZiAoSU5URUxfR0VOKGRldl9wcml2
KSA8IDQgJiYgcGlwZV9jb25maWctPnBpcGVfYnBwID09IDE4KQorCWlmIChJTlRFTF9HRU4oZGV2
X3ByaXYpIDwgNCAmJiBjcnRjX3N0YXRlLT5waXBlX2JwcCA9PSAxOCkKIAkJcGZpdF9jb250cm9s
IHw9IFBBTkVMXzhUTzZfRElUSEVSX0VOQUJMRTsKIAotCXBpcGVfY29uZmlnLT5nbWNoX3BmaXQu
Y29udHJvbCA9IHBmaXRfY29udHJvbDsKLQlwaXBlX2NvbmZpZy0+Z21jaF9wZml0LnBnbV9yYXRp
b3MgPSBwZml0X3BnbV9yYXRpb3M7Ci0JcGlwZV9jb25maWctPmdtY2hfcGZpdC5sdmRzX2JvcmRl
cl9iaXRzID0gYm9yZGVyOworCWNydGNfc3RhdGUtPmdtY2hfcGZpdC5jb250cm9sID0gcGZpdF9j
b250cm9sOworCWNydGNfc3RhdGUtPmdtY2hfcGZpdC5wZ21fcmF0aW9zID0gcGZpdF9wZ21fcmF0
aW9zOworCWNydGNfc3RhdGUtPmdtY2hfcGZpdC5sdmRzX2JvcmRlcl9iaXRzID0gYm9yZGVyOwog
fQogCiAvKioKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
cGFuZWwuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcGFuZWwuaAppbmRl
eCBjZWRlZWE0NDMzMzYuLmUxODA0ZTZlODMyNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9wYW5lbC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfcGFuZWwuaApAQCAtMjUsMTEgKzI1LDkgQEAgaW50IGludGVsX3BhbmVsX2lu
aXQoc3RydWN0IGludGVsX3BhbmVsICpwYW5lbCwKIHZvaWQgaW50ZWxfcGFuZWxfZmluaShzdHJ1
Y3QgaW50ZWxfcGFuZWwgKnBhbmVsKTsKIHZvaWQgaW50ZWxfZml4ZWRfcGFuZWxfbW9kZShjb25z
dCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqZml4ZWRfbW9kZSwKIAkJCSAgICBzdHJ1Y3QgZHJt
X2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSk7Ci12b2lkIGludGVsX3BjaF9wYW5lbF9maXR0
aW5nKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAotCQkJICAgICBzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZSAqcGlwZV9jb25maWcsCit2b2lkIGludGVsX3BjaF9wYW5lbF9maXR0aW5nKHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCQkJICAgICBpbnQgZml0dGluZ19tb2RlKTsK
LXZvaWQgaW50ZWxfZ21jaF9wYW5lbF9maXR0aW5nKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAot
CQkJICAgICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAordm9pZCBpbnRl
bF9nbWNoX3BhbmVsX2ZpdHRpbmcoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUs
CiAJCQkgICAgICBpbnQgZml0dGluZ19tb2RlKTsKIHZvaWQgaW50ZWxfcGFuZWxfc2V0X2JhY2ts
aWdodF9hY3BpKGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRlLAog
CQkJCSAgICB1MzIgbGV2ZWwsIHUzMiBtYXgpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS92bHZfZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L3Zs
dl9kc2kuYwppbmRleCA1MDA2NGNkZTA3MjQuLjZhMjBjNDE2OWE1MyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS92bHZfZHNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS92bHZfZHNpLmMKQEAgLTI2MSw3ICsyNjEsNiBAQCBzdGF0aWMgaW50IGlu
dGVsX2RzaV9jb21wdXRlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAlz
dHJ1Y3QgaW50ZWxfZHNpICppbnRlbF9kc2kgPSBjb250YWluZXJfb2YoZW5jb2Rlciwgc3RydWN0
IGludGVsX2RzaSwKIAkJCQkJCSAgIGJhc2UpOwogCXN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmlu
dGVsX2Nvbm5lY3RvciA9IGludGVsX2RzaS0+YXR0YWNoZWRfY29ubmVjdG9yOwotCXN0cnVjdCBp
bnRlbF9jcnRjICpjcnRjID0gdG9faW50ZWxfY3J0YyhwaXBlX2NvbmZpZy0+YmFzZS5jcnRjKTsK
IAljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqZml4ZWRfbW9kZSA9IGludGVsX2Nvbm5l
Y3Rvci0+cGFuZWwuZml4ZWRfbW9kZTsKIAlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0
ZWRfbW9kZSA9ICZwaXBlX2NvbmZpZy0+YmFzZS5hZGp1c3RlZF9tb2RlOwogCWludCByZXQ7CkBA
IC0yNzMsMTAgKzI3MiwxMCBAQCBzdGF0aWMgaW50IGludGVsX2RzaV9jb21wdXRlX2NvbmZpZyhz
dHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJaW50ZWxfZml4ZWRfcGFuZWxfbW9kZShm
aXhlZF9tb2RlLCBhZGp1c3RlZF9tb2RlKTsKIAogCQlpZiAoSEFTX0dNQ0goZGV2X3ByaXYpKQot
CQkJaW50ZWxfZ21jaF9wYW5lbF9maXR0aW5nKGNydGMsIHBpcGVfY29uZmlnLAorCQkJaW50ZWxf
Z21jaF9wYW5lbF9maXR0aW5nKHBpcGVfY29uZmlnLAogCQkJCQkJIGNvbm5fc3RhdGUtPnNjYWxp
bmdfbW9kZSk7CiAJCWVsc2UKLQkJCWludGVsX3BjaF9wYW5lbF9maXR0aW5nKGNydGMsIHBpcGVf
Y29uZmlnLAorCQkJaW50ZWxfcGNoX3BhbmVsX2ZpdHRpbmcocGlwZV9jb25maWcsCiAJCQkJCQlj
b25uX3N0YXRlLT5zY2FsaW5nX21vZGUpOwogCX0KIAotLSAKMi4yMS4wCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0
CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

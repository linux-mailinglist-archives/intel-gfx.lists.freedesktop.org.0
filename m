Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DB444B398B
	for <lists+intel-gfx@lfdr.de>; Mon, 16 Sep 2019 13:38:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CE6476E91C;
	Mon, 16 Sep 2019 11:38:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 006846E91C
 for <intel-gfx@lists.freedesktop.org>; Mon, 16 Sep 2019 11:38:27 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18505831-1500050 
 for multiple; Mon, 16 Sep 2019 12:38:10 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 16 Sep 2019 12:38:08 +0100
Message-Id: <20190916113808.30386-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915: Verify the engine after acquiring the
 active.lock
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2hlbiB1c2luZyB2aXJ0dWFsIGVuZ2luZXMsIHRoZSBycS0+ZW5naW5lIGlzIG5vdCBzdGFibGUg
dW50aWwgd2UgaG9sZAp0aGUgZW5naW5lLT5hY3RpdmUubG9jayAoYXMgdGhlIHZpcnR1YWwgZW5n
aW5lIG1heSBiZSBleGNoYW5nZWQgd2l0aCB0aGUKc2libGluZykuIFNpbmNlIGNvbW1pdCAyMmI3
YTQyNmJiZTEgKCJkcm0vaTkxNS9leGVjbGlzdHM6IFByZWVtcHQtdG8tYnVzeSIpCndlIG1heSBy
ZXRpcmUgYSByZXF1ZXN0IGNvbmN1cnJlbnRseSB3aXRoIHJlc3VibWl0dGluZyBpdCB0byBIVywg
d2UgbmVlZAp0byBiZSBleHRyYSBjYXJlZnVsIHRvIHZlcmlmeSB3ZSBhcmUgaG9sZGluZyB0aGUg
Y29ycmVjdCBsb2NrIGZvciB0aGUKcmVxdWVzdCdzIGFjdGl2ZSBsaXN0LiBUaGlzIGlzIHNpbWls
YXIgdG8gdGhlIGlzc3VlIHdlIHNhdyB3aXRoCnJlc2NoZWR1bGluZyB0aGUgdmlydHVhbCByZXF1
ZXN0cywgc2VlIHNjaGVkX2xvY2tfZW5naW5lKCkuCgpPciBlbHNlOgoKPDQ+IFs4NzYuNzM2MTI2
XSBsaXN0X2FkZCBjb3JydXB0aW9uLiBwcmV2LT5uZXh0IHNob3VsZCBiZSBuZXh0IChmZmZmODg4
M2Y5MzFhMWY4KSwgYnV0IHdhcyBkZWFkMDAwMDAwMDAwMTAwLiAocHJldj1mZmZmODg4MzYxZmZh
NjEwKS4KPDQ+IFs4NzYuNzM2MTM2XSBXQVJOSU5HOiBDUFU6IDIgUElEOiAyMSBhdCBsaWIvbGlz
dF9kZWJ1Zy5jOjI4IF9fbGlzdF9hZGRfdmFsaWQrMHg0ZC8weDcwCjw0PiBbODc2LjczNjEzN10g
TW9kdWxlcyBsaW5rZWQgaW46IGk5MTUoKykgYW1kZ3B1IGdwdV9zY2hlZCB0dG0gdmdlbSBzbmRf
aGRhX2NvZGVjX2hkbWkgc25kX2hkYV9jb2RlY19yZWFsdGVrIHNuZF9oZGFfY29kZWNfZ2VuZXJp
YyBtZWlfaGRjcCB4ODZfcGtnX3RlbXBfdGhlcm1hbCBjb3JldGVtcCBjcmN0MTBkaWZfcGNsbXVs
IGNyYzMyX3BjbG11bCBzbmRfaW50ZWxfbmhsdCBzbmRfaGRhX2NvZGVjIHNuZF9od2RlcCBzbmRf
aGRhX2NvcmUgZ2hhc2hfY2xtdWxuaV9pbnRlbCBlMTAwMGUgY2RjX2V0aGVyIHVzYm5ldCBtaWkg
c25kX3BjbSBwdHAgcHBzX2NvcmUgbWVpX21lIG1laSBwcmltZV9udW1iZXJzIGJ0dXNiIGJ0cnRs
IGJ0YmNtIGJ0aW50ZWwgYmx1ZXRvb3RoIGVjZGhfZ2VuZXJpYyBlY2MgW2xhc3QgdW5sb2FkZWQ6
IGk5MTVdCjw0PiBbODc2LjczNjE1NF0gQ1BVOiAyIFBJRDogMjEgQ29tbToga3NvZnRpcnFkLzIg
VGFpbnRlZDogRyAgICAgVSAgICAgICAgICAgIDUuMy4wLUNJLUNJX0RSTV82ODk4KyAjMQo8ND4g
Wzg3Ni43MzYxNTZdIEhhcmR3YXJlIG5hbWU6IEludGVsIENvcnBvcmF0aW9uIEljZSBMYWtlIENs
aWVudCBQbGF0Zm9ybS9JY2VMYWtlIFUgRERSNCBTT0RJTU0gUEQgUlZQIFRMQywgQklPUyBJQ0xT
RldSMS5SMDAuMzE4My5BMDAuMTkwNTAyMDQxMSAwNS8wMi8yMDE5Cjw0PiBbODc2LjczNjE1N10g
UklQOiAwMDEwOl9fbGlzdF9hZGRfdmFsaWQrMHg0ZC8weDcwCjw0PiBbODc2LjczNjE1OV0gQ29k
ZTogYzMgNDggODkgZDEgNDggYzcgYzcgMjAgMzMgMGUgODIgNDggODkgYzIgZTggNGEgNGEgYmMg
ZmYgMGYgMGIgMzEgYzAgYzMgNDggODkgYzEgNGMgODkgYzYgNDggYzcgYzcgNzAgMzMgMGUgODIg
ZTggMzMgNGEgYmMgZmYgPDBmPiAwYiAzMSBjMCBjMyA0OCA4OSBmMiA0YyA4OSBjMSA0OCA4OSBm
ZSA0OCBjNyBjNyBjMCAzMyAwZSA4MiBlOAo8ND4gWzg3Ni43MzYxNjBdIFJTUDogMDAxODpmZmZm
YzkwMDAwMThiZDMwIEVGTEFHUzogMDAwMTAwODIKPDQ+IFs4NzYuNzM2MTYyXSBSQVg6IDAwMDAw
MDAwMDAwMDAwMDAgUkJYOiBmZmZmODg4MzYxZmZjODQwIFJDWDogMDAwMDAwMDAwMDAwMDEwNAo8
ND4gWzg3Ni43MzYxNjNdIFJEWDogMDAwMDAwMDA4MDAwMDEwNCBSU0k6IDAwMDAwMDAwMDAwMDAw
MDAgUkRJOiAwMDAwMDAwMGZmZmZmZmZmCjw0PiBbODc2LjczNjE2NF0gUkJQOiBmZmZmYzkwMDAw
MThiZDY4IFIwODogMDAwMDAwMDAwMDAwMDAwMCBSMDk6IDAwMDAwMDAwMDAwMDAwMDEKPDQ+IFs4
NzYuNzM2MTY1XSBSMTA6IDAwMDAwMDAwYWVkOTVkZTMgUjExOiAwMDAwMDAwMDdmZTkyN2ViIFIx
MjogZmZmZjg4ODM2MWZmY2ExMAo8ND4gWzg3Ni43MzYxNjZdIFIxMzogZmZmZjg4ODM2MWZmYTYx
MCBSMTQ6IGZmZmY4ODgzNjFmZmM4ODAgUjE1OiBmZmZmODg4M2Y5MzFhMWY4Cjw0PiBbODc2Ljcz
NjE2OF0gRlM6ICAwMDAwMDAwMDAwMDAwMDAwKDAwMDApIEdTOmZmZmY4ODg0OWZkMDAwMDAoMDAw
MCkga25sR1M6MDAwMDAwMDAwMDAwMDAwMAo8ND4gWzg3Ni43MzYxNjldIENTOiAgMDAxMCBEUzog
MDAwMCBFUzogMDAwMCBDUjA6IDAwMDAwMDAwODAwNTAwMzMKPDQ+IFs4NzYuNzM2MTcwXSBDUjI6
IDAwMDA3ZjA5M2E5MTczYzAgQ1IzOiAwMDAwMDAwM2JiYTA4MDA1IENSNDogMDAwMDAwMDAwMDc2
MGVlMAo8ND4gWzg3Ni43MzYxNzFdIFBLUlU6IDU1NTU1NTU0Cjw0PiBbODc2LjczNjE3Ml0gQ2Fs
bCBUcmFjZToKPDQ+IFs4NzYuNzM2MjI2XSAgX19pOTE1X3JlcXVlc3Rfc3VibWl0KzB4MTUyLzB4
MzcwIFtpOTE1XQo8ND4gWzg3Ni43MzYyNjNdICBfX2V4ZWNsaXN0c19zdWJtaXNzaW9uX3Rhc2ts
ZXQrMHg2ZGEvMHgxZjUwIFtpOTE1XQo8ND4gWzg3Ni43MzYyOTNdICA/IGV4ZWNsaXN0c19zdWJt
aXNzaW9uX3Rhc2tsZXQrMHgyOS8weDUwIFtpOTE1XQo8ND4gWzg3Ni43MzYzMjFdICBleGVjbGlz
dHNfc3VibWlzc2lvbl90YXNrbGV0KzB4MzQvMHg1MCBbaTkxNV0KPDQ+IFs4NzYuNzM2MzI1XSAg
dGFza2xldF9hY3Rpb25fY29tbW9uLmlzcmEuNSsweDQ3LzB4YjAKPDQ+IFs4NzYuNzM2MzI4XSAg
X19kb19zb2Z0aXJxKzB4ZDgvMHg0YWUKPDQ+IFs4NzYuNzM2MzMyXSAgPyBzbXBib290X3RocmVh
ZF9mbisweDIzLzB4MjgwCjw0PiBbODc2LjczNjMzNF0gID8gc21wYm9vdF90aHJlYWRfZm4rMHg2
Yi8weDI4MAo8ND4gWzg3Ni43MzYzMzZdICBydW5fa3NvZnRpcnFkKzB4MmIvMHg1MAo8ND4gWzg3
Ni43MzYzMzhdICBzbXBib290X3RocmVhZF9mbisweDFkMy8weDI4MAo8ND4gWzg3Ni43MzYzNDFd
ICA/IHNvcnRfcmFuZ2UrMHgyMC8weDIwCjw0PiBbODc2LjczNjM0M10gIGt0aHJlYWQrMHgxMTkv
MHgxMzAKPDQ+IFs4NzYuNzM2MzQ1XSAgPyBrdGhyZWFkX3BhcmsrMHhhMC8weGEwCjw0PiBbODc2
LjczNjM0N10gIHJldF9mcm9tX2ZvcmsrMHgyNC8weDUwCjw0PiBbODc2LjczNjM1M10gaXJxIGV2
ZW50IHN0YW1wOiAyMjkwMTQ1Cjw0PiBbODc2LjczNjM1Nl0gaGFyZGlycXMgbGFzdCAgZW5hYmxl
ZCBhdCAoMjI5MDE0NCk6IFs8ZmZmZmZmZmY4MTIzY2RlOD5dIF9fc2xhYl9mcmVlKzB4M2U4LzB4
NTAwCjw0PiBbODc2LjczNjM1OF0gaGFyZGlycXMgbGFzdCBkaXNhYmxlZCBhdCAoMjI5MDE0NSk6
IFs8ZmZmZmZmZmY4MTljZmI0ZD5dIF9yYXdfc3Bpbl9sb2NrX2lycXNhdmUrMHhkLzB4NTAKPDQ+
IFs4NzYuNzM2MzYwXSBzb2Z0aXJxcyBsYXN0ICBlbmFibGVkIGF0ICgyMjkwMTE0KTogWzxmZmZm
ZmZmZjgxYzAwMzNlPl0gX19kb19zb2Z0aXJxKzB4MzNlLzB4NGFlCjw0PiBbODc2LjczNjM2MV0g
c29mdGlycXMgbGFzdCBkaXNhYmxlZCBhdCAoMjI5MDExOSk6IFs8ZmZmZmZmZmY4MTBiODE1Yj5d
IHJ1bl9rc29mdGlycWQrMHgyYi8weDUwCjw0PiBbODc2LjczNjM2M10gV0FSTklORzogQ1BVOiAy
IFBJRDogMjEgYXQgbGliL2xpc3RfZGVidWcuYzoyOCBfX2xpc3RfYWRkX3ZhbGlkKzB4NGQvMHg3
MAo8ND4gWzg3Ni43MzYzNjRdIC0tLVsgZW5kIHRyYWNlIDNlNThkNmM3MzU2YzY1YmYgXS0tLQo8
ND4gWzg3Ni43MzY0MDZdIC0tLS0tLS0tLS0tLVsgY3V0IGhlcmUgXS0tLS0tLS0tLS0tLQo8ND4g
Wzg3Ni43MzY0MTVdIGxpc3RfZGVsIGNvcnJ1cHRpb24uIHByZXYtPm5leHQgc2hvdWxkIGJlIGZm
ZmY4ODgzNjFmZmNhMTAsIGJ1dCB3YXMgZmZmZjg4ODQwYWMyYzczMAo8ND4gWzg3Ni43MzY0MjFd
IFdBUk5JTkc6IENQVTogMiBQSUQ6IDU0OTAgYXQgbGliL2xpc3RfZGVidWcuYzo1MyBfX2xpc3Rf
ZGVsX2VudHJ5X3ZhbGlkKzB4NzkvMHg5MAo8ND4gWzg3Ni43MzY0MjJdIE1vZHVsZXMgbGlua2Vk
IGluOiBpOTE1KCspIGFtZGdwdSBncHVfc2NoZWQgdHRtIHZnZW0gc25kX2hkYV9jb2RlY19oZG1p
IHNuZF9oZGFfY29kZWNfcmVhbHRlayBzbmRfaGRhX2NvZGVjX2dlbmVyaWMgbWVpX2hkY3AgeDg2
X3BrZ190ZW1wX3RoZXJtYWwgY29yZXRlbXAgY3JjdDEwZGlmX3BjbG11bCBjcmMzMl9wY2xtdWwg
c25kX2ludGVsX25obHQgc25kX2hkYV9jb2RlYyBzbmRfaHdkZXAgc25kX2hkYV9jb3JlIGdoYXNo
X2NsbXVsbmlfaW50ZWwgZTEwMDBlIGNkY19ldGhlciB1c2JuZXQgbWlpIHNuZF9wY20gcHRwIHBw
c19jb3JlIG1laV9tZSBtZWkgcHJpbWVfbnVtYmVycyBidHVzYiBidHJ0bCBidGJjbSBidGludGVs
IGJsdWV0b290aCBlY2RoX2dlbmVyaWMgZWNjIFtsYXN0IHVubG9hZGVkOiBpOTE1XQo8ND4gWzg3
Ni43MzY0MzNdIENQVTogMiBQSUQ6IDU0OTAgQ29tbTogaTkxNV9zZWxmdGVzdCBUYWludGVkOiBH
ICAgICBVICBXICAgICAgICAgNS4zLjAtQ0ktQ0lfRFJNXzY4OTgrICMxCjw0PiBbODc2LjczNjQz
NV0gSGFyZHdhcmUgbmFtZTogSW50ZWwgQ29ycG9yYXRpb24gSWNlIExha2UgQ2xpZW50IFBsYXRm
b3JtL0ljZUxha2UgVSBERFI0IFNPRElNTSBQRCBSVlAgVExDLCBCSU9TIElDTFNGV1IxLlIwMC4z
MTgzLkEwMC4xOTA1MDIwNDExIDA1LzAyLzIwMTkKPDQ+IFs4NzYuNzM2NDM2XSBSSVA6IDAwMTA6
X19saXN0X2RlbF9lbnRyeV92YWxpZCsweDc5LzB4OTAKPDQ+IFs4NzYuNzM2NDM4XSBDb2RlOiAw
YiAzMSBjMCBjMyA0OCA4OSBmZSA0OCBjNyBjNyAzMCAzNCAwZSA4MiBlOCBhZSA0OSBiYyBmZiAw
ZiAwYiAzMSBjMCBjMyA0OCA4OSBmMiA0OCA4OSBmZSA0OCBjNyBjNyA2OCAzNCAwZSA4MiBlOCA5
NyA0OSBiYyBmZiA8MGY+IDBiIDMxIGMwIGMzIDQ4IGM3IGM3IGE4IDM0IDBlIDgyIGU4IDg2IDQ5
IGJjIGZmIDBmIDBiIDMxIGMwIGMzCjw0PiBbODc2LjczNjQzOV0gUlNQOiAwMDE4OmZmZmZjOTAw
MDAzZWY3NTggRUZMQUdTOiAwMDAxMDA4Ngo8ND4gWzg3Ni43MzY0NDBdIFJBWDogMDAwMDAwMDAw
MDAwMDAwMCBSQlg6IGZmZmY4ODgzNjFmZmM4NDAgUkNYOiAwMDAwMDAwMDAwMDAwMDAyCjw0PiBb
ODc2LjczNjQ0Ml0gUkRYOiAwMDAwMDAwMDgwMDAwMDAyIFJTSTogMDAwMDAwMDAwMDAwMDAwMCBS
REk6IDAwMDAwMDAwZmZmZmZmZmYKPDQ+IFs4NzYuNzM2NDQzXSBSQlA6IGZmZmZjOTAwMDAzZWY3
ODAgUjA4OiAwMDAwMDAwMDAwMDAwMDAwIFIwOTogMDAwMDAwMDAwMDAwMDAwMQo8ND4gWzg3Ni43
MzY0NDRdIFIxMDogMDAwMDAwMDAxNDE4ZTRiNyBSMTE6IDAwMDAwMDAwN2YwZWE5M2IgUjEyOiBm
ZmZmODg4MzYxZmZjYWI4Cjw0PiBbODc2LjczNjQ0NV0gUjEzOiBmZmZmODg4NDNiNmQwMDAwIFIx
NDogMDAwMDAwMDAwMDAwMjE3YyBSMTU6IDAwMDAwMDAwMDAwMDAwMDEKPDQ+IFs4NzYuNzM2NDQ3
XSBGUzogIDAwMDA3ZjRlNmYyNTUyNDAoMDAwMCkgR1M6ZmZmZjg4ODQ5ZmQwMDAwMCgwMDAwKSBr
bmxHUzowMDAwMDAwMDAwMDAwMDAwCjw0PiBbODc2LjczNjQ0OF0gQ1M6ICAwMDEwIERTOiAwMDAw
IEVTOiAwMDAwIENSMDogMDAwMDAwMDA4MDA1MDAzMwo8ND4gWzg3Ni43MzY0NDldIENSMjogMDAw
MDdmMDkzYTkxNzNjMCBDUjM6IDAwMDAwMDAzYmJhMDgwMDUgQ1I0OiAwMDAwMDAwMDAwNzYwZWUw
Cjw0PiBbODc2LjczNjQ1MF0gUEtSVTogNTU1NTU1NTQKPDQ+IFs4NzYuNzM2NDUxXSBDYWxsIFRy
YWNlOgo8ND4gWzg3Ni43MzY0ODhdICBpOTE1X3JlcXVlc3RfcmV0aXJlKzB4MjI0LzB4OGUwIFtp
OTE1XQo8ND4gWzg3Ni43MzY1MjFdICBpOTE1X3JlcXVlc3RfY3JlYXRlKzB4NGIvMHgxYjAgW2k5
MTVdCjw0PiBbODc2LjczNjU1MF0gIG5vcF92aXJ0dWFsX2VuZ2luZSsweDIzMC8weDRkMCBbaTkx
NV0KCkZpeGVzOiAyMmI3YTQyNmJiZTEgKCJkcm0vaTkxNS9leGVjbGlzdHM6IFByZWVtcHQtdG8t
YnVzeSIpCkJ1Z3ppbGxhOiBodHRwczovL2J1Z3MuZnJlZWRlc2t0b3Aub3JnL3Nob3dfYnVnLmNn
aT9pZD0xMTE2OTUKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxz
b24uY28udWs+CkNjOiBNaWthIEt1b3BwYWxhIDxtaWthLmt1b3BwYWxhQGxpbnV4LmludGVsLmNv
bT4KQ2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+CkNjOiBNYXR0
aGV3IEF1bGQgPG1hdHRoZXcuYXVsZEBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9yZXF1ZXN0LmMgfCAyNSArKysrKysrKysrKysrKysrKysrKysrLS0tCiAxIGZpbGUg
Y2hhbmdlZCwgMjIgaW5zZXJ0aW9ucygrKSwgMyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfcmVxdWVzdC5jCmluZGV4IDc1NGE3ODM2NGE2My4uZjEyMzU4MTUwMDk3IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYwpAQCAtMTk1LDYgKzE5NSwyNyBAQCBzdGF0aWMgdm9p
ZCBmcmVlX2NhcHR1cmVfbGlzdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KQogCX0KIH0K
IAorc3RhdGljIHZvaWQgcmVtb3ZlX2Zyb21fZW5naW5lKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJx
KQoreworCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgKmxvY2tlZDsKKworCS8qCisJ
ICogVmlydHVhbCBlbmdpbmVzIGNvbXBsaWNhdGUgYWNxdWlyaW5nIHRoZSBlbmdpbmUgdGltZWxp
bmUgbG9jaywKKwkgKiBhcyB0aGVpciBycS0+ZW5naW5lIHBvaW50ZXIgaXMgbm90IHN0YWJsZSB1
bnRpbCB1bmRlciB0aGF0CisJICogZW5naW5lIGxvY2suIFRoZSBzaW1wbGUgcGxveSB3ZSB1c2Ug
aXMgdG8gdGFrZSB0aGUgbG9jayB0aGVuCisJICogY2hlY2sgdGhhdCB0aGUgcnEgc3RpbGwgYmVs
b25ncyB0byB0aGUgbmV3bHkgbG9ja2VkIGVuZ2luZS4KKwkgKi8KKwlsb2NrZWQgPSBSRUFEX09O
Q0UocnEtPmVuZ2luZSk7CisJc3Bpbl9sb2NrKCZsb2NrZWQtPmFjdGl2ZS5sb2NrKTsKKwl3aGls
ZSAodW5saWtlbHkobG9ja2VkICE9IChlbmdpbmUgPSBSRUFEX09OQ0UocnEtPmVuZ2luZSkpKSkg
eworCQlzcGluX3VubG9jaygmbG9ja2VkLT5hY3RpdmUubG9jayk7CisJCXNwaW5fbG9jaygmZW5n
aW5lLT5hY3RpdmUubG9jayk7CisJCWxvY2tlZCA9IGVuZ2luZTsKKwl9CisJbGlzdF9kZWwoJnJx
LT5zY2hlZC5saW5rKTsKKwlzcGluX3VubG9jaygmbG9ja2VkLT5hY3RpdmUubG9jayk7Cit9CisK
IHN0YXRpYyBib29sIGk5MTVfcmVxdWVzdF9yZXRpcmUoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEp
CiB7CiAJc3RydWN0IGk5MTVfYWN0aXZlX3JlcXVlc3QgKmFjdGl2ZSwgKm5leHQ7CkBAIC0yNjAs
OSArMjgxLDcgQEAgc3RhdGljIGJvb2wgaTkxNV9yZXF1ZXN0X3JldGlyZShzdHJ1Y3QgaTkxNV9y
ZXF1ZXN0ICpycSkKIAkgKiByZXF1ZXN0IHRoYXQgd2UgaGF2ZSByZW1vdmVkIGZyb20gdGhlIEhX
IGFuZCBwdXQgYmFjayBvbiBhIHJ1bgogCSAqIHF1ZXVlLgogCSAqLwotCXNwaW5fbG9jaygmcnEt
PmVuZ2luZS0+YWN0aXZlLmxvY2spOwotCWxpc3RfZGVsKCZycS0+c2NoZWQubGluayk7Ci0Jc3Bp
bl91bmxvY2soJnJxLT5lbmdpbmUtPmFjdGl2ZS5sb2NrKTsKKwlyZW1vdmVfZnJvbV9lbmdpbmUo
cnEpOwogCiAJc3Bpbl9sb2NrKCZycS0+bG9jayk7CiAJaTkxNV9yZXF1ZXN0X21hcmtfY29tcGxl
dGUocnEpOwotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9p
bnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 16C94264A10
	for <lists+intel-gfx@lfdr.de>; Thu, 10 Sep 2020 18:43:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D0F1A6E141;
	Thu, 10 Sep 2020 16:43:01 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 433F36E141
 for <intel-gfx@lists.freedesktop.org>; Thu, 10 Sep 2020 16:43:01 +0000 (UTC)
IronPort-SDR: SAweD1h2cUN30Pg1DSDze1yG9bPSRqWb0EYvmP1GG3txzp7HsB+HcKYvOS31Gzqs/hf1wqDk2B
 A1u12Tzo+Pog==
X-IronPort-AV: E=McAfee;i="6000,8403,9740"; a="138606945"
X-IronPort-AV: E=Sophos;i="5.76,413,1592895600"; d="scan'208";a="138606945"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by fmsmga107.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 10 Sep 2020 09:42:59 -0700
IronPort-SDR: 3O7IwEImY6OizfXnyJd1WTUM8qbXDLW5kLRPQKS7AohqpWBr2OxVxZrF77muLBTlEtWOuG7eFM
 8ElmAUvR+VLw==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.76,413,1592895600"; d="scan'208";a="304937921"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga006.jf.intel.com with SMTP; 10 Sep 2020 09:42:57 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Thu, 10 Sep 2020 19:42:56 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 10 Sep 2020 19:42:56 +0300
Message-Id: <20200910164256.25983-1-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20200909213824.12390-2-ville.syrjala@linux.intel.com>
References: <20200909213824.12390-2-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 2/2] drm/i915: Reduce INTEL_DISPLAY_ENABLED
 to just treat outputs as disconnected
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClNp
bmNlIHRoZSBkaXNwbGF5IGhhcmR3YXJlIGlzIGFsbCB0aGVyZSBldmVuIHdoZW4gSU5URUxfRElT
UExBWV9FTkFCTEVECnJldHVybiBmYWxzZSB3ZSBoYXZlIHRvIGJlIGNhcGFibGUgb2Ygc2h1dHRp
bmcgaXQgZG93biBjbGVhbmx5IHNvCmFzIHRvIG5vdCBhbmdlciB0aGUgaHcuIFRvIHRoYXQgZW5k
IGxldCdzIHJlZHVjZSB0aGUgZWZmZWN0IG9mCiFJTlRFTF9ESVNQTEFZX0VOQUJMRSB0byBqdXN0
IHRyZWF0aW5nIGFsbCBvdXRwdXRzIGFzIGRpc2Nvbm5lY3RlZC4KU2hvdWxkIHByZXZlbnQgYW55
b25lIGZyb20gYXV0b21hZ2ljYWxseSBlbmFibGluZyBhbnkgb2YgdGhlbSwgd2hpbGUKc3RpbGwg
YWxsb3dpbmcgdXMgdG8gY2xlYW5seSBzaHV0IHRoZW0gZG93bi4KCnYyOiBQdXQgdGhlIGNoZWNr
IGludG8gdGhlIHJpZ2h0IHBsYWNlIGZvciBDUlQKClJldmlld2VkLWJ5OiBKYW5pIE5pa3VsYSA8
amFuaS5uaWt1bGFAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZp
bGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaWNsX2RzaS5jICAgICAgIHwgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9jcnQuYyAgICAgfCAgMyArKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGlzcGxheS5jIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZHAuYyAgICAgIHwgIDMgKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2RwX21zdC5jICB8ICA0ICsrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHZvLmMgICAgIHwgIDYgKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2hkbWkuYyAgICB8ICAzICsrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9s
dmRzLmMgICAgfCAgOCArLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9wYW5lbC5jICAgfCAxMSArKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9wYW5lbC5oICAgfCAgMiArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9zZHZvLmMgICAgfCAgNiArKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfdHYuYyAgICAgIHwgIDMgKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L3Zs
dl9kc2kuYyAgICAgICB8ICAxICsKIDEzIGZpbGVzIGNoYW5nZWQsIDQ0IGluc2VydGlvbnMoKyks
IDkgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pY2xfZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ljbF9kc2kuYwppbmRl
eCBmNDA1M2RkNmJkZTkuLjUyMDcxNWI3ZDViNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pY2xfZHNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pY2xfZHNpLmMKQEAgLTE2NDYsNiArMTY0Niw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJt
X2VuY29kZXJfZnVuY3MgZ2VuMTFfZHNpX2VuY29kZXJfZnVuY3MgPSB7CiB9OwogCiBzdGF0aWMg
Y29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfZnVuY3MgZ2VuMTFfZHNpX2Nvbm5lY3Rvcl9mdW5j
cyA9IHsKKwkuZGV0ZWN0ID0gaW50ZWxfcGFuZWxfZGV0ZWN0LAogCS5sYXRlX3JlZ2lzdGVyID0g
aW50ZWxfY29ubmVjdG9yX3JlZ2lzdGVyLAogCS5lYXJseV91bnJlZ2lzdGVyID0gaW50ZWxfY29u
bmVjdG9yX3VucmVnaXN0ZXIsCiAJLmRlc3Ryb3kgPSBpbnRlbF9jb25uZWN0b3JfZGVzdHJveSwK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3J0LmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NydC5jCmluZGV4IDViNDUxMGNlNTY5
My4uNDkzNGVkZDUxY2IwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2NydC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3J0
LmMKQEAgLTgzMyw2ICs4MzMsOSBAQCBpbnRlbF9jcnRfZGV0ZWN0KHN0cnVjdCBkcm1fY29ubmVj
dG9yICpjb25uZWN0b3IsCiAJCSAgICBjb25uZWN0b3ItPmJhc2UuaWQsIGNvbm5lY3Rvci0+bmFt
ZSwKIAkJICAgIGZvcmNlKTsKIAorCWlmICghSU5URUxfRElTUExBWV9FTkFCTEVEKGRldl9wcml2
KSkKKwkJcmV0dXJuIGNvbm5lY3Rvcl9zdGF0dXNfZGlzY29ubmVjdGVkOworCiAJaWYgKGRldl9w
cml2LT5wYXJhbXMubG9hZF9kZXRlY3RfdGVzdCkgewogCQl3YWtlcmVmID0gaW50ZWxfZGlzcGxh
eV9wb3dlcl9nZXQoZGV2X3ByaXYsCiAJCQkJCQkgIGludGVsX2VuY29kZXItPnBvd2VyX2RvbWFp
bik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4
IGJhY2FmNzEzZWVkNC4uNTYxMWEzZDk1NTk0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtMTY4OTMsNyArMTY4OTMsNyBAQCBzdGF0aWMgdm9p
ZCBpbnRlbF9zZXR1cF9vdXRwdXRzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikK
IAogCWludGVsX3Bwc19pbml0KGRldl9wcml2KTsKIAotCWlmICghSEFTX0RJU1BMQVkoZGV2X3By
aXYpIHx8ICFJTlRFTF9ESVNQTEFZX0VOQUJMRUQoZGV2X3ByaXYpKQorCWlmICghSEFTX0RJU1BM
QVkoZGV2X3ByaXYpKQogCQlyZXR1cm47CiAKIAlpZiAoSVNfUk9DS0VUTEFLRShkZXZfcHJpdikp
IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYwppbmRleCA4YTY3M2QwZDcw
NTEuLjFhODE4NWY4ZmI4ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAu
YwpAQCAtNjEwMyw2ICs2MTAzLDkgQEAgaW50ZWxfZHBfZGV0ZWN0KHN0cnVjdCBkcm1fY29ubmVj
dG9yICpjb25uZWN0b3IsCiAJZHJtX1dBUk5fT04oJmRldl9wcml2LT5kcm0sCiAJCSAgICAhZHJt
X21vZGVzZXRfaXNfbG9ja2VkKCZkZXZfcHJpdi0+ZHJtLm1vZGVfY29uZmlnLmNvbm5lY3Rpb25f
bXV0ZXgpKTsKIAorCWlmICghSU5URUxfRElTUExBWV9FTkFCTEVEKGRldl9wcml2KSkKKwkJcmV0
dXJuIGNvbm5lY3Rvcl9zdGF0dXNfZGlzY29ubmVjdGVkOworCiAJLyogQ2FuJ3QgZGlzY29ubmVj
dCBlRFAgKi8KIAlpZiAoaW50ZWxfZHBfaXNfZWRwKGludGVsX2RwKSkKIAkJc3RhdHVzID0gZWRw
X2RldGVjdChpbnRlbF9kcCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2RwX21zdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
cF9tc3QuYwppbmRleCBiNjQyNGJmNWQ1NDQuLjY0ZDg4NTUzOWU5NCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcF9tc3QuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5jCkBAIC03MTksOSArNzE5LDEzIEBAIHN0
YXRpYyBpbnQKIGludGVsX2RwX21zdF9kZXRlY3Qoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5l
Y3RvciwKIAkJICAgIHN0cnVjdCBkcm1fbW9kZXNldF9hY3F1aXJlX2N0eCAqY3R4LCBib29sIGZv
cmNlKQogeworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShjb25uZWN0
b3ItPmRldik7CiAJc3RydWN0IGludGVsX2Nvbm5lY3RvciAqaW50ZWxfY29ubmVjdG9yID0gdG9f
aW50ZWxfY29ubmVjdG9yKGNvbm5lY3Rvcik7CiAJc3RydWN0IGludGVsX2RwICppbnRlbF9kcCA9
IGludGVsX2Nvbm5lY3Rvci0+bXN0X3BvcnQ7CiAKKwlpZiAoIUlOVEVMX0RJU1BMQVlfRU5BQkxF
RChpOTE1KSkKKwkJcmV0dXJuIGNvbm5lY3Rvcl9zdGF0dXNfZGlzY29ubmVjdGVkOworCiAJaWYg
KGRybV9jb25uZWN0b3JfaXNfdW5yZWdpc3RlcmVkKGNvbm5lY3RvcikpCiAJCXJldHVybiBjb25u
ZWN0b3Jfc3RhdHVzX2Rpc2Nvbm5lY3RlZDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kdm8uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZHZvLmMKaW5kZXggMzA3ZWQ4YWU5YTE5Li4yMzdkYmIxYmEwZWUgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHZvLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kdm8uYwpAQCAtMzEzLDkgKzMxMywxNSBAQCBzdGF0
aWMgdm9pZCBpbnRlbF9kdm9fcHJlX2VuYWJsZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpz
dGF0ZSwKIHN0YXRpYyBlbnVtIGRybV9jb25uZWN0b3Jfc3RhdHVzCiBpbnRlbF9kdm9fZGV0ZWN0
KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsIGJvb2wgZm9yY2UpCiB7CisJc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KGNvbm5lY3Rvci0+ZGV2KTsKIAlzdHJ1
Y3QgaW50ZWxfZHZvICppbnRlbF9kdm8gPSBpbnRlbF9hdHRhY2hlZF9kdm8odG9faW50ZWxfY29u
bmVjdG9yKGNvbm5lY3RvcikpOworCiAJRFJNX0RFQlVHX0tNUygiW0NPTk5FQ1RPUjolZDolc11c
biIsCiAJCSAgICAgIGNvbm5lY3Rvci0+YmFzZS5pZCwgY29ubmVjdG9yLT5uYW1lKTsKKworCWlm
ICghSU5URUxfRElTUExBWV9FTkFCTEVEKGk5MTUpKQorCQlyZXR1cm4gY29ubmVjdG9yX3N0YXR1
c19kaXNjb25uZWN0ZWQ7CisKIAlyZXR1cm4gaW50ZWxfZHZvLT5kZXYuZGV2X29wcy0+ZGV0ZWN0
KCZpbnRlbF9kdm8tPmRldik7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfaGRtaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9oZG1pLmMKaW5kZXggMDk3OGIwZDhmNGM2Li4wNGY1OTUxNmQ1ZjMgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5jCkBAIC0yNjczLDYgKzI2NzMsOSBAQCBpbnRl
bF9oZG1pX2RldGVjdChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLCBib29sIGZvcmNl
KQogCWRybV9kYmdfa21zKCZkZXZfcHJpdi0+ZHJtLCAiW0NPTk5FQ1RPUjolZDolc11cbiIsCiAJ
CSAgICBjb25uZWN0b3ItPmJhc2UuaWQsIGNvbm5lY3Rvci0+bmFtZSk7CiAKKwlpZiAoIUlOVEVM
X0RJU1BMQVlfRU5BQkxFRChkZXZfcHJpdikpCisJCXJldHVybiBjb25uZWN0b3Jfc3RhdHVzX2Rp
c2Nvbm5lY3RlZDsKKwogCXdha2VyZWYgPSBpbnRlbF9kaXNwbGF5X3Bvd2VyX2dldChkZXZfcHJp
diwgUE9XRVJfRE9NQUlOX0dNQlVTKTsKIAogCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDEx
ICYmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2x2ZHMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfbHZkcy5jCmluZGV4IDE4ODg2
MTEyNDRkYi4uZTY1YzJkZTUyMmMzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2x2ZHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2x2ZHMuYwpAQCAtNDU2LDEyICs0NTYsNiBAQCBzdGF0aWMgaW50IGludGVsX2x2ZHNfY29t
cHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmludGVsX2VuY29kZXIsCiAJcmV0dXJu
IDA7CiB9CiAKLXN0YXRpYyBlbnVtIGRybV9jb25uZWN0b3Jfc3RhdHVzCi1pbnRlbF9sdmRzX2Rl
dGVjdChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLCBib29sIGZvcmNlKQotewotCXJl
dHVybiBjb25uZWN0b3Jfc3RhdHVzX2Nvbm5lY3RlZDsKLX0KLQogLyoKICAqIFJldHVybiB0aGUg
bGlzdCBvZiBEREMgbW9kZXMgaWYgYXZhaWxhYmxlLCBvciB0aGUgQklPUyBmaXhlZCBtb2RlIG90
aGVyd2lzZS4KICAqLwpAQCAtNDkwLDcgKzQ4NCw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJt
X2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MgaW50ZWxfbHZkc19jb25uZWN0b3JfaGVscGVyX2Z1bmNz
CiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfZnVuY3MgaW50ZWxfbHZk
c19jb25uZWN0b3JfZnVuY3MgPSB7Ci0JLmRldGVjdCA9IGludGVsX2x2ZHNfZGV0ZWN0LAorCS5k
ZXRlY3QgPSBpbnRlbF9wYW5lbF9kZXRlY3QsCiAJLmZpbGxfbW9kZXMgPSBkcm1faGVscGVyX3By
b2JlX3NpbmdsZV9jb25uZWN0b3JfbW9kZXMsCiAJLmF0b21pY19nZXRfcHJvcGVydHkgPSBpbnRl
bF9kaWdpdGFsX2Nvbm5lY3Rvcl9hdG9taWNfZ2V0X3Byb3BlcnR5LAogCS5hdG9taWNfc2V0X3By
b3BlcnR5ID0gaW50ZWxfZGlnaXRhbF9jb25uZWN0b3JfYXRvbWljX3NldF9wcm9wZXJ0eSwKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcGFuZWwuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcGFuZWwuYwppbmRleCAyZWIxYTNhOTNk
ZjEuLjlmMjNiYWMwZDc5MiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9wYW5lbC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
cGFuZWwuYwpAQCAtMjA5NSw2ICsyMDk1LDE3IEBAIGludGVsX3BhbmVsX2luaXRfYmFja2xpZ2h0
X2Z1bmNzKHN0cnVjdCBpbnRlbF9wYW5lbCAqcGFuZWwpCiAJfQogfQogCitlbnVtIGRybV9jb25u
ZWN0b3Jfc3RhdHVzCitpbnRlbF9wYW5lbF9kZXRlY3Qoc3RydWN0IGRybV9jb25uZWN0b3IgKmNv
bm5lY3RvciwgYm9vbCBmb3JjZSkKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9
IHRvX2k5MTUoY29ubmVjdG9yLT5kZXYpOworCisJaWYgKCFJTlRFTF9ESVNQTEFZX0VOQUJMRUQo
aTkxNSkpCisJCXJldHVybiBjb25uZWN0b3Jfc3RhdHVzX2Rpc2Nvbm5lY3RlZDsKKworCXJldHVy
biBjb25uZWN0b3Jfc3RhdHVzX2Nvbm5lY3RlZDsKK30KKwogaW50IGludGVsX3BhbmVsX2luaXQo
c3RydWN0IGludGVsX3BhbmVsICpwYW5lbCwKIAkJICAgICBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZSAqZml4ZWRfbW9kZSwKIAkJICAgICBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqZG93bmNsb2Nr
X21vZGUpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Bh
bmVsLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3BhbmVsLmgKaW5kZXgg
OTY4Yjk1MjgxY2I0Li41YjgxM2ZlOTA1NTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfcGFuZWwuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX3BhbmVsLmgKQEAgLTIzLDYgKzIzLDggQEAgaW50IGludGVsX3BhbmVsX2luaXQo
c3RydWN0IGludGVsX3BhbmVsICpwYW5lbCwKIAkJICAgICBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZSAqZml4ZWRfbW9kZSwKIAkJICAgICBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqZG93bmNsb2Nr
X21vZGUpOwogdm9pZCBpbnRlbF9wYW5lbF9maW5pKHN0cnVjdCBpbnRlbF9wYW5lbCAqcGFuZWwp
OworZW51bSBkcm1fY29ubmVjdG9yX3N0YXR1cworaW50ZWxfcGFuZWxfZGV0ZWN0KHN0cnVjdCBk
cm1fY29ubmVjdG9yICpjb25uZWN0b3IsIGJvb2wgZm9yY2UpOwogdm9pZCBpbnRlbF9maXhlZF9w
YW5lbF9tb2RlKGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICpmaXhlZF9tb2RlLAogCQkJ
ICAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlKTsKIGludCBpbnRlbF9w
Y2hfcGFuZWxfZml0dGluZyhzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc2R2by5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zZHZvLmMKaW5kZXggNWU5ZmIzNDljODI5
Li40ZWFhNGFhODZlY2QgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfc2R2by5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc2R2
by5jCkBAIC0yMDg0LDE0ICsyMDg0LDE4IEBAIGludGVsX3Nkdm9fY29ubmVjdG9yX21hdGNoZXNf
ZWRpZChzdHJ1Y3QgaW50ZWxfc2R2b19jb25uZWN0b3IgKnNkdm8sCiBzdGF0aWMgZW51bSBkcm1f
Y29ubmVjdG9yX3N0YXR1cwogaW50ZWxfc2R2b19kZXRlY3Qoc3RydWN0IGRybV9jb25uZWN0b3Ig
KmNvbm5lY3RvciwgYm9vbCBmb3JjZSkKIHsKLQl1MTYgcmVzcG9uc2U7CisJc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KGNvbm5lY3Rvci0+ZGV2KTsKIAlzdHJ1Y3QgaW50
ZWxfc2R2byAqaW50ZWxfc2R2byA9IGludGVsX2F0dGFjaGVkX3Nkdm8odG9faW50ZWxfY29ubmVj
dG9yKGNvbm5lY3RvcikpOwogCXN0cnVjdCBpbnRlbF9zZHZvX2Nvbm5lY3RvciAqaW50ZWxfc2R2
b19jb25uZWN0b3IgPSB0b19pbnRlbF9zZHZvX2Nvbm5lY3Rvcihjb25uZWN0b3IpOwogCWVudW0g
ZHJtX2Nvbm5lY3Rvcl9zdGF0dXMgcmV0OworCXUxNiByZXNwb25zZTsKIAogCURSTV9ERUJVR19L
TVMoIltDT05ORUNUT1I6JWQ6JXNdXG4iLAogCQkgICAgICBjb25uZWN0b3ItPmJhc2UuaWQsIGNv
bm5lY3Rvci0+bmFtZSk7CiAKKwlpZiAoIUlOVEVMX0RJU1BMQVlfRU5BQkxFRChpOTE1KSkKKwkJ
cmV0dXJuIGNvbm5lY3Rvcl9zdGF0dXNfZGlzY29ubmVjdGVkOworCiAJaWYgKCFpbnRlbF9zZHZv
X2dldF92YWx1ZShpbnRlbF9zZHZvLAogCQkJCSAgU0RWT19DTURfR0VUX0FUVEFDSEVEX0RJU1BM
QVlTLAogCQkJCSAgJnJlc3BvbnNlLCAyKSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfdHYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfdHYuYwppbmRleCA3NzcwMzJkOTY5N2IuLjdhN2I5OWIwMTVhNSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF90di5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfdHYuYwpAQCAtMTcwNiw2ICsxNzA2LDkgQEAgaW50ZWxfdHZf
ZGV0ZWN0KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCiAJZHJtX2RiZ19rbXMoJmk5
MTUtPmRybSwgIltDT05ORUNUT1I6JWQ6JXNdIGZvcmNlPSVkXG4iLAogCQkgICAgY29ubmVjdG9y
LT5iYXNlLmlkLCBjb25uZWN0b3ItPm5hbWUsIGZvcmNlKTsKIAorCWlmICghSU5URUxfRElTUExB
WV9FTkFCTEVEKGk5MTUpKQorCQlyZXR1cm4gY29ubmVjdG9yX3N0YXR1c19kaXNjb25uZWN0ZWQ7
CisKIAlpZiAoZm9yY2UpIHsKIAkJc3RydWN0IGludGVsX2xvYWRfZGV0ZWN0X3BpcGUgdG1wOwog
CQlpbnQgcmV0OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS92bHZf
ZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L3Zsdl9kc2kuYwppbmRleCAwNTJl
MGIzMWEyZGEuLjVlNTUyMjkyM2IxZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS92bHZfZHNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS92bHZf
ZHNpLmMKQEAgLTE1ODUsNiArMTU4NSw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5l
Y3Rvcl9oZWxwZXJfZnVuY3MgaW50ZWxfZHNpX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MKIH07CiAK
IHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9mdW5jcyBpbnRlbF9kc2lfY29ubmVj
dG9yX2Z1bmNzID0geworCS5kZXRlY3QgPSBpbnRlbF9wYW5lbF9kZXRlY3QsCiAJLmxhdGVfcmVn
aXN0ZXIgPSBpbnRlbF9jb25uZWN0b3JfcmVnaXN0ZXIsCiAJLmVhcmx5X3VucmVnaXN0ZXIgPSBp
bnRlbF9jb25uZWN0b3JfdW5yZWdpc3RlciwKIAkuZGVzdHJveSA9IGludGVsX2Nvbm5lY3Rvcl9k
ZXN0cm95LAotLSAKMi4yNi4yCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9p
bnRlbC1nZngK

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3B3403264C1
	for <lists+intel-gfx@lfdr.de>; Fri, 26 Feb 2021 16:32:45 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 817EA6EE0E;
	Fri, 26 Feb 2021 15:32:43 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EA5956E1A8
 for <intel-gfx@lists.freedesktop.org>; Fri, 26 Feb 2021 15:32:41 +0000 (UTC)
IronPort-SDR: +XDrDn6CxFzBoF6caSY7baAG1MGKhu9v5kiW2qkKLC6OSwkCrIt12zSSjlOGur8qkf9TZZmyfB
 kLXUwXOy2lIg==
X-IronPort-AV: E=McAfee;i="6000,8403,9907"; a="270882669"
X-IronPort-AV: E=Sophos;i="5.81,208,1610438400"; d="scan'208";a="270882669"
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by fmsmga105.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 26 Feb 2021 07:32:41 -0800
IronPort-SDR: XijglahCpja5sd99LC55Ctak+MvSazO4BTqnIO3CoRRiARdMxID20tzmah3oLWc6ZvIonH0UCz
 9BX+j4c1NXag==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.81,208,1610438400"; d="scan'208";a="432814720"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.171])
 by FMSMGA003.fm.intel.com with SMTP; 26 Feb 2021 07:32:39 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 26 Feb 2021 17:32:38 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 26 Feb 2021 17:32:02 +0200
Message-Id: <20210226153204.1270-6-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20210226153204.1270-1-ville.syrjala@linux.intel.com>
References: <20210226153204.1270-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 5/7] drm/i915: Introduce SAGV transtion watermark
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClNl
ZW1zIHRvIG1lIHRoYXQgaWYgd2UgY2FsY3VsYXRlIFdNMCB1c2luZyB0aGUgYnVtcGVkIHVwIFNB
R1YgbGF0ZW5jeQp3ZSBuZWVkIHRvIGNhbGN1bGF0ZSB0aGUgdHJhbnNpdGlvbiB3YXRlcm1hcmsg
YWNjb3JkaW5nbHkuIFRyYWNrIGl0CmFsb25nc2lkZSB0aGUgb3RoZXIgd2F0ZXJtYXJrcy4KCkNj
OiBTdGFuaXNsYXYgTGlzb3Zza2l5IDxzdGFuaXNsYXYubGlzb3Zza2l5QGludGVsLmNvbT4KU2ln
bmVkLW9mZi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNv
bT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyAgfCAg
NCArLQogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oICAgIHwgIDEg
KwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyAgICAgICAgICAgICAgIHwgOTQgKysr
KysrKysrKysrLS0tLS0tLQogMyBmaWxlcyBjaGFuZ2VkLCA2NSBpbnNlcnRpb25zKCspLCAzNCBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eS5jCmluZGV4IDcxOGU2NmY0OTMzMi4uZTM0ZTVhOWRhNWMxIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtOTQ1OSw3ICs5NDU5LDkgQEAgc3Rh
dGljIHZvaWQgdmVyaWZ5X3dtX3N0YXRlKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAogCQl9CiAK
IAkJaWYgKCFza2xfd21fbGV2ZWxfZXF1YWxzKCZod19wbGFuZV93bS0+dHJhbnNfd20sCi0JCQkJ
CSAmc3dfcGxhbmVfd20tPnRyYW5zX3dtKSkgeworCQkJCQkgJnN3X3BsYW5lX3dtLT50cmFuc193
bSkgJiYKKwkJICAgICFza2xfd21fbGV2ZWxfZXF1YWxzKCZod19wbGFuZV93bS0+dHJhbnNfd20s
CisJCQkJCSAmc3dfcGxhbmVfd20tPnNhZ3YudHJhbnNfd20pKSB7CiAJCQlkcm1fZXJyKCZkZXZf
cHJpdi0+ZHJtLAogCQkJCSJtaXNtYXRjaCBpbiB0cmFucyBXTSBwaXBlICVjIGN1cnNvciAoZXhw
ZWN0ZWQgZT0lZCBiPSV1IGw9JXUsIGdvdCBlPSVkIGI9JXUgbD0ldSlcbiIsCiAJCQkJcGlwZV9u
YW1lKHBpcGUpLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXlfdHlwZXMuaAppbmRleCA2MzIxY2QzZGY4MWUuLmUyMzY1ZjJkMDdjYyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgKQEAg
LTczNCw2ICs3MzQsNyBAQCBzdHJ1Y3Qgc2tsX3BsYW5lX3dtIHsKIAlzdHJ1Y3Qgc2tsX3dtX2xl
dmVsIHRyYW5zX3dtOwogCXN0cnVjdCB7CiAJCXN0cnVjdCBza2xfd21fbGV2ZWwgd20wOworCQlz
dHJ1Y3Qgc2tsX3dtX2xldmVsIHRyYW5zX3dtOwogCX0gc2FndjsKIAlib29sIGlzX3BsYW5hcjsK
IH07CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYwppbmRleCBhMTU5MWQ5MTg5YTAuLjlkOWJhNjNmYzM5
NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jCkBAIC00NzU4LDYgKzQ3NTgsMTggQEAgc2tsX3Bs
YW5lX3dtX2xldmVsKGNvbnN0IHN0cnVjdCBza2xfcGlwZV93bSAqcGlwZV93bSwKIAlyZXR1cm4g
JndtLT53bVtsZXZlbF07CiB9CiAKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgc2tsX3dtX2xldmVsICoK
K3NrbF9wbGFuZV90cmFuc193bShjb25zdCBzdHJ1Y3Qgc2tsX3BpcGVfd20gKnBpcGVfd20sCisJ
CSAgIGVudW0gcGxhbmVfaWQgcGxhbmVfaWQpCit7CisJY29uc3Qgc3RydWN0IHNrbF9wbGFuZV93
bSAqd20gPSAmcGlwZV93bS0+cGxhbmVzW3BsYW5lX2lkXTsKKworCWlmIChwaXBlX3dtLT51c2Vf
c2Fndl93bSkKKwkJcmV0dXJuICZ3bS0+c2Fndi50cmFuc193bTsKKworCXJldHVybiAmd20tPnRy
YW5zX3dtOworfQorCiBzdGF0aWMgaW50CiBza2xfYWxsb2NhdGVfcGxhbmVfZGRiKHN0cnVjdCBp
bnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAogCQkgICAgICAgc3RydWN0IGludGVsX2NydGMgKmNy
dGMpCkBAIC00OTY3LDYgKzQ5NzksOSBAQCBza2xfYWxsb2NhdGVfcGxhbmVfZGRiKHN0cnVjdCBp
bnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAogCiAJCWlmICh3bS0+c2Fndi53bTAucGxhbmVfcmVz
X2IgPj0gdG90YWxbcGxhbmVfaWRdKQogCQkJbWVtc2V0KCZ3bS0+c2Fndi53bTAsIDAsIHNpemVv
Zih3bS0+c2Fndi53bTApKTsKKworCQlpZiAod20tPnNhZ3YudHJhbnNfd20ucGxhbmVfcmVzX2Ig
Pj0gdG90YWxbcGxhbmVfaWRdKQorCQkJbWVtc2V0KCZ3bS0+c2Fndi50cmFuc193bSwgMCwgc2l6
ZW9mKHdtLT5zYWd2LnRyYW5zX3dtKSk7CiAJfQogCiAJcmV0dXJuIDA7CkBAIC01MzI1LDEyICs1
MzQwLDExIEBAIHN0YXRpYyB2b2lkIHRnbF9jb21wdXRlX3NhZ3Zfd20oY29uc3Qgc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJCQkgICAgIHNhZ3Zfd20pOwogfQogCi1zdGF0
aWMgdm9pZCBza2xfY29tcHV0ZV90cmFuc2l0aW9uX3dtKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRj
X3N0YXRlICpjcnRjX3N0YXRlLAotCQkJCSAgICAgIGNvbnN0IHN0cnVjdCBza2xfd21fcGFyYW1z
ICp3cCwKLQkJCQkgICAgICBzdHJ1Y3Qgc2tsX3BsYW5lX3dtICp3bSkKK3N0YXRpYyB2b2lkIHNr
bF9jb21wdXRlX3RyYW5zaXRpb25fd20oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
LAorCQkJCSAgICAgIHN0cnVjdCBza2xfd21fbGV2ZWwgKnRyYW5zX3dtLAorCQkJCSAgICAgIGNv
bnN0IHN0cnVjdCBza2xfd21fbGV2ZWwgKndtMCwKKwkJCQkgICAgICBjb25zdCBzdHJ1Y3Qgc2ts
X3dtX3BhcmFtcyAqd3ApCiB7Ci0Jc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGNfc3RhdGUt
PnVhcGkuY3J0Yy0+ZGV2OwotCWNvbnN0IHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
diA9IHRvX2k5MTUoZGV2KTsKIAl1MTYgdHJhbnNfbWluLCB0cmFuc19hbW91bnQsIHRyYW5zX3lf
dGlsZV9taW47CiAJdTE2IHdtMF9zZWxfcmVzX2IsIHRyYW5zX29mZnNldF9iLCByZXNfYmxvY2tz
OwogCkBAIC01MzY4LDcgKzUzODIsNyBAQCBzdGF0aWMgdm9pZCBza2xfY29tcHV0ZV90cmFuc2l0
aW9uX3dtKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCSAqIFJl
c3VsdCBCbG9ja3MgaXMgUmVzdWx0IEJsb2NrcyBtaW51cyAxIGFuZCBpdCBzaG91bGQgd29yayBm
b3IgdGhlCiAJICogY3VycmVudCBwbGF0Zm9ybXMuCiAJICovCi0Jd20wX3NlbF9yZXNfYiA9IHdt
LT53bVswXS5wbGFuZV9yZXNfYiAtIDE7CisJd20wX3NlbF9yZXNfYiA9IHdtMC0+cGxhbmVfcmVz
X2IgLSAxOwogCiAJaWYgKHdwLT55X3RpbGVkKSB7CiAJCXRyYW5zX3lfdGlsZV9taW4gPQpAQCAt
NTM4NCw4ICs1Mzk4LDggQEAgc3RhdGljIHZvaWQgc2tsX2NvbXB1dGVfdHJhbnNpdGlvbl93bShj
b25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkgKiBjb21wdXRpbmcg
dGhlIEREQiB3ZSdsbCBjb21lIGJhY2sgYW5kIGRpc2FibGUgaXQgaWYgdGhhdAogCSAqIGFzc3Vt
cHRpb24gdHVybnMgb3V0IHRvIGJlIGZhbHNlLgogCSAqLwotCXdtLT50cmFuc193bS5wbGFuZV9y
ZXNfYiA9IHJlc19ibG9ja3MgKyAxOwotCXdtLT50cmFuc193bS5wbGFuZV9lbiA9IHRydWU7CisJ
dHJhbnNfd20tPnBsYW5lX3Jlc19iID0gcmVzX2Jsb2NrcyArIDE7CisJdHJhbnNfd20tPnBsYW5l
X2VuID0gdHJ1ZTsKIH0KIAogc3RhdGljIGludCBza2xfYnVpbGRfcGxhbmVfd21fc2luZ2xlKHN0
cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLApAQCAtNTQwNSwxMCArNTQxOSwxNSBA
QCBzdGF0aWMgaW50IHNrbF9idWlsZF9wbGFuZV93bV9zaW5nbGUoc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKmNydGNfc3RhdGUsCiAKIAlza2xfY29tcHV0ZV93bV9sZXZlbHMoY3J0Y19zdGF0ZSwg
JndtX3BhcmFtcywgd20tPndtKTsKIAotCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDEyKQor
CXNrbF9jb21wdXRlX3RyYW5zaXRpb25fd20oZGV2X3ByaXYsICZ3bS0+dHJhbnNfd20sCisJCQkJ
ICAmd20tPndtWzBdLCAmd21fcGFyYW1zKTsKKworCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49
IDEyKSB7CiAJCXRnbF9jb21wdXRlX3NhZ3Zfd20oY3J0Y19zdGF0ZSwgJndtX3BhcmFtcywgd20p
OwogCi0Jc2tsX2NvbXB1dGVfdHJhbnNpdGlvbl93bShjcnRjX3N0YXRlLCAmd21fcGFyYW1zLCB3
bSk7CisJCXNrbF9jb21wdXRlX3RyYW5zaXRpb25fd20oZGV2X3ByaXYsICZ3bS0+c2Fndi50cmFu
c193bSwKKwkJCQkJICAmd20tPnNhZ3Yud20wLCAmd21fcGFyYW1zKTsKKwl9CiAKIAlyZXR1cm4g
MDsKIH0KQEAgLTU1ODQsNyArNTYwMyw3IEBAIHZvaWQgc2tsX3dyaXRlX3BsYW5lX3dtKHN0cnVj
dCBpbnRlbF9wbGFuZSAqcGxhbmUsCiAJCQkJICAgc2tsX3BsYW5lX3dtX2xldmVsKHBpcGVfd20s
IHBsYW5lX2lkLCBsZXZlbCkpOwogCiAJc2tsX3dyaXRlX3dtX2xldmVsKGRldl9wcml2LCBQTEFO
RV9XTV9UUkFOUyhwaXBlLCBwbGFuZV9pZCksCi0JCQkgICAmd20tPnRyYW5zX3dtKTsKKwkJCSAg
IHNrbF9wbGFuZV90cmFuc193bShwaXBlX3dtLCBwbGFuZV9pZCkpOwogCiAJaWYgKElOVEVMX0dF
TihkZXZfcHJpdikgPj0gMTEpIHsKIAkJc2tsX2RkYl9lbnRyeV93cml0ZShkZXZfcHJpdiwKQEAg
LTU2MDksNyArNTYyOCw2IEBAIHZvaWQgc2tsX3dyaXRlX2N1cnNvcl93bShzdHJ1Y3QgaW50ZWxf
cGxhbmUgKnBsYW5lLAogCWVudW0gcGxhbmVfaWQgcGxhbmVfaWQgPSBwbGFuZS0+aWQ7CiAJZW51
bSBwaXBlIHBpcGUgPSBwbGFuZS0+cGlwZTsKIAljb25zdCBzdHJ1Y3Qgc2tsX3BpcGVfd20gKnBp
cGVfd20gPSAmY3J0Y19zdGF0ZS0+d20uc2tsLm9wdGltYWw7Ci0JY29uc3Qgc3RydWN0IHNrbF9w
bGFuZV93bSAqd20gPSAmcGlwZV93bS0+cGxhbmVzW3BsYW5lX2lkXTsKIAljb25zdCBzdHJ1Y3Qg
c2tsX2RkYl9lbnRyeSAqZGRiID0KIAkJJmNydGNfc3RhdGUtPndtLnNrbC5wbGFuZV9kZGJfeVtw
bGFuZV9pZF07CiAKQEAgLTU2MTcsNyArNTYzNSw4IEBAIHZvaWQgc2tsX3dyaXRlX2N1cnNvcl93
bShzdHJ1Y3QgaW50ZWxfcGxhbmUgKnBsYW5lLAogCQlza2xfd3JpdGVfd21fbGV2ZWwoZGV2X3By
aXYsIENVUl9XTShwaXBlLCBsZXZlbCksCiAJCQkJICAgc2tsX3BsYW5lX3dtX2xldmVsKHBpcGVf
d20sIHBsYW5lX2lkLCBsZXZlbCkpOwogCi0Jc2tsX3dyaXRlX3dtX2xldmVsKGRldl9wcml2LCBD
VVJfV01fVFJBTlMocGlwZSksICZ3bS0+dHJhbnNfd20pOworCXNrbF93cml0ZV93bV9sZXZlbChk
ZXZfcHJpdiwgQ1VSX1dNX1RSQU5TKHBpcGUpLAorCQkJICAgc2tsX3BsYW5lX3RyYW5zX3dtKHBp
cGVfd20sIHBsYW5lX2lkKSk7CiAKIAlza2xfZGRiX2VudHJ5X3dyaXRlKGRldl9wcml2LCBDVVJf
QlVGX0NGRyhwaXBlKSwgZGRiKTsKIH0KQEAgLTU2NDgsNyArNTY2Nyw4IEBAIHN0YXRpYyBib29s
IHNrbF9wbGFuZV93bV9lcXVhbHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAog
CX0KIAogCXJldHVybiBza2xfd21fbGV2ZWxfZXF1YWxzKCZ3bTEtPnRyYW5zX3dtLCAmd20yLT50
cmFuc193bSkgJiYKLQkJc2tsX3dtX2xldmVsX2VxdWFscygmd20xLT5zYWd2LndtMCwgJndtMi0+
c2Fndi53bTApOworCQlza2xfd21fbGV2ZWxfZXF1YWxzKCZ3bTEtPnNhZ3Yud20wLCAmd20yLT5z
YWd2LndtMCkgJiYKKwkJc2tsX3dtX2xldmVsX2VxdWFscygmd20xLT5zYWd2LnRyYW5zX3dtLCAm
d20yLT5zYWd2LnRyYW5zX3dtKTsKIH0KIAogc3RhdGljIGJvb2wgc2tsX2RkYl9lbnRyaWVzX292
ZXJsYXAoY29uc3Qgc3RydWN0IHNrbF9kZGJfZW50cnkgKmEsCkBAIC01ODc4LDggKzU4OTgsOCBA
QCBza2xfcHJpbnRfd21fY2hhbmdlcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkK
IAkJCQljb250aW51ZTsKIAogCQkJZHJtX2RiZ19rbXMoJmRldl9wcml2LT5kcm0sCi0JCQkJICAg
ICJbUExBTkU6JWQ6JXNdICAgbGV2ZWwgJWN3bTAsJWN3bTEsJWN3bTIsJWN3bTMsJWN3bTQsJWN3
bTUsJWN3bTYsJWN3bTcsJWN0d20sJWNzd20iCi0JCQkJICAgICIgLT4gJWN3bTAsJWN3bTEsJWN3
bTIsJWN3bTMsJWN3bTQsJWN3bTUsJWN3bTYsJWN3bTcsJWN0d20sJWNzd21cbiIsCisJCQkJICAg
ICJbUExBTkU6JWQ6JXNdICAgbGV2ZWwgJWN3bTAsJWN3bTEsJWN3bTIsJWN3bTMsJWN3bTQsJWN3
bTUsJWN3bTYsJWN3bTcsJWN0d20sJWNzd20sJWNzdHdtIgorCQkJCSAgICAiIC0+ICVjd20wLCVj
d20xLCVjd20yLCVjd20zLCVjd200LCVjd201LCVjd202LCVjd203LCVjdHdtLCVjc3dtLCVjc3R3
bVxuIiwKIAkJCQkgICAgcGxhbmUtPmJhc2UuYmFzZS5pZCwgcGxhbmUtPmJhc2UubmFtZSwKIAkJ
CQkgICAgZW5hc3Qob2xkX3dtLT53bVswXS5wbGFuZV9lbiksIGVuYXN0KG9sZF93bS0+d21bMV0u
cGxhbmVfZW4pLAogCQkJCSAgICBlbmFzdChvbGRfd20tPndtWzJdLnBsYW5lX2VuKSwgZW5hc3Qo
b2xkX3dtLT53bVszXS5wbGFuZV9lbiksCkBAIC01ODg3LDE2ICs1OTA3LDE4IEBAIHNrbF9wcmlu
dF93bV9jaGFuZ2VzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQogCQkJCSAgICBl
bmFzdChvbGRfd20tPndtWzZdLnBsYW5lX2VuKSwgZW5hc3Qob2xkX3dtLT53bVs3XS5wbGFuZV9l
biksCiAJCQkJICAgIGVuYXN0KG9sZF93bS0+dHJhbnNfd20ucGxhbmVfZW4pLAogCQkJCSAgICBl
bmFzdChvbGRfd20tPnNhZ3Yud20wLnBsYW5lX2VuKSwKKwkJCQkgICAgZW5hc3Qob2xkX3dtLT5z
YWd2LnRyYW5zX3dtLnBsYW5lX2VuKSwKIAkJCQkgICAgZW5hc3QobmV3X3dtLT53bVswXS5wbGFu
ZV9lbiksIGVuYXN0KG5ld193bS0+d21bMV0ucGxhbmVfZW4pLAogCQkJCSAgICBlbmFzdChuZXdf
d20tPndtWzJdLnBsYW5lX2VuKSwgZW5hc3QobmV3X3dtLT53bVszXS5wbGFuZV9lbiksCiAJCQkJ
ICAgIGVuYXN0KG5ld193bS0+d21bNF0ucGxhbmVfZW4pLCBlbmFzdChuZXdfd20tPndtWzVdLnBs
YW5lX2VuKSwKIAkJCQkgICAgZW5hc3QobmV3X3dtLT53bVs2XS5wbGFuZV9lbiksIGVuYXN0KG5l
d193bS0+d21bN10ucGxhbmVfZW4pLAogCQkJCSAgICBlbmFzdChuZXdfd20tPnRyYW5zX3dtLnBs
YW5lX2VuKSwKLQkJCQkgICAgZW5hc3QobmV3X3dtLT5zYWd2LndtMC5wbGFuZV9lbikpOworCQkJ
CSAgICBlbmFzdChuZXdfd20tPnNhZ3Yud20wLnBsYW5lX2VuKSwKKwkJCQkgICAgZW5hc3QobmV3
X3dtLT5zYWd2LnRyYW5zX3dtLnBsYW5lX2VuKSk7CiAKIAkJCWRybV9kYmdfa21zKCZkZXZfcHJp
di0+ZHJtLAotCQkJCSAgICAiW1BMQU5FOiVkOiVzXSAgIGxpbmVzICVjJTNkLCVjJTNkLCVjJTNk
LCVjJTNkLCVjJTNkLCVjJTNkLCVjJTNkLCVjJTNkLCVjJTNkLCVjJTNkIgotCQkJCSAgICAgICIg
LT4gJWMlM2QsJWMlM2QsJWMlM2QsJWMlM2QsJWMlM2QsJWMlM2QsJWMlM2QsJWMlM2QsJWMlM2Qs
JWMlM2RcbiIsCisJCQkJICAgICJbUExBTkU6JWQ6JXNdICAgbGluZXMgJWMlM2QsJWMlM2QsJWMl
M2QsJWMlM2QsJWMlM2QsJWMlM2QsJWMlM2QsJWMlM2QsJWMlM2QsJWMlM2QsJWMlNGQiCisJCQkJ
ICAgICAgIiAtPiAlYyUzZCwlYyUzZCwlYyUzZCwlYyUzZCwlYyUzZCwlYyUzZCwlYyUzZCwlYyUz
ZCwlYyUzZCwlYyUzZCwlYyU0ZFxuIiwKIAkJCQkgICAgcGxhbmUtPmJhc2UuYmFzZS5pZCwgcGxh
bmUtPmJhc2UubmFtZSwKIAkJCQkgICAgZW5hc3Qob2xkX3dtLT53bVswXS5pZ25vcmVfbGluZXMp
LCBvbGRfd20tPndtWzBdLnBsYW5lX3Jlc19sLAogCQkJCSAgICBlbmFzdChvbGRfd20tPndtWzFd
Lmlnbm9yZV9saW5lcyksIG9sZF93bS0+d21bMV0ucGxhbmVfcmVzX2wsCkBAIC01OTA4LDcgKzU5
MzAsNyBAQCBza2xfcHJpbnRfd21fY2hhbmdlcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpz
dGF0ZSkKIAkJCQkgICAgZW5hc3Qob2xkX3dtLT53bVs3XS5pZ25vcmVfbGluZXMpLCBvbGRfd20t
PndtWzddLnBsYW5lX3Jlc19sLAogCQkJCSAgICBlbmFzdChvbGRfd20tPnRyYW5zX3dtLmlnbm9y
ZV9saW5lcyksIG9sZF93bS0+dHJhbnNfd20ucGxhbmVfcmVzX2wsCiAJCQkJICAgIGVuYXN0KG9s
ZF93bS0+c2Fndi53bTAuaWdub3JlX2xpbmVzKSwgb2xkX3dtLT5zYWd2LndtMC5wbGFuZV9yZXNf
bCwKLQorCQkJCSAgICBlbmFzdChvbGRfd20tPnNhZ3YudHJhbnNfd20uaWdub3JlX2xpbmVzKSwg
b2xkX3dtLT5zYWd2LnRyYW5zX3dtLnBsYW5lX3Jlc19sLAogCQkJCSAgICBlbmFzdChuZXdfd20t
PndtWzBdLmlnbm9yZV9saW5lcyksIG5ld193bS0+d21bMF0ucGxhbmVfcmVzX2wsCiAJCQkJICAg
IGVuYXN0KG5ld193bS0+d21bMV0uaWdub3JlX2xpbmVzKSwgbmV3X3dtLT53bVsxXS5wbGFuZV9y
ZXNfbCwKIAkJCQkgICAgZW5hc3QobmV3X3dtLT53bVsyXS5pZ25vcmVfbGluZXMpLCBuZXdfd20t
PndtWzJdLnBsYW5lX3Jlc19sLApAQCAtNTkxOCwxMSArNTk0MCwxMiBAQCBza2xfcHJpbnRfd21f
Y2hhbmdlcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIAkJCQkgICAgZW5hc3Qo
bmV3X3dtLT53bVs2XS5pZ25vcmVfbGluZXMpLCBuZXdfd20tPndtWzZdLnBsYW5lX3Jlc19sLAog
CQkJCSAgICBlbmFzdChuZXdfd20tPndtWzddLmlnbm9yZV9saW5lcyksIG5ld193bS0+d21bN10u
cGxhbmVfcmVzX2wsCiAJCQkJICAgIGVuYXN0KG5ld193bS0+dHJhbnNfd20uaWdub3JlX2xpbmVz
KSwgbmV3X3dtLT50cmFuc193bS5wbGFuZV9yZXNfbCwKLQkJCQkgICAgZW5hc3QobmV3X3dtLT5z
YWd2LndtMC5pZ25vcmVfbGluZXMpLCBuZXdfd20tPnNhZ3Yud20wLnBsYW5lX3Jlc19sKTsKKwkJ
CQkgICAgZW5hc3QobmV3X3dtLT5zYWd2LndtMC5pZ25vcmVfbGluZXMpLCBuZXdfd20tPnNhZ3Yu
d20wLnBsYW5lX3Jlc19sLAorCQkJCSAgICBlbmFzdChuZXdfd20tPnNhZ3YudHJhbnNfd20uaWdu
b3JlX2xpbmVzKSwgbmV3X3dtLT5zYWd2LnRyYW5zX3dtLnBsYW5lX3Jlc19sKTsKIAogCQkJZHJt
X2RiZ19rbXMoJmRldl9wcml2LT5kcm0sCi0JCQkJICAgICJbUExBTkU6JWQ6JXNdICBibG9ja3Mg
JTRkLCU0ZCwlNGQsJTRkLCU0ZCwlNGQsJTRkLCU0ZCwlNGQsJTRkIgotCQkJCSAgICAiIC0+ICU0
ZCwlNGQsJTRkLCU0ZCwlNGQsJTRkLCU0ZCwlNGQsJTRkLCU0ZFxuIiwKKwkJCQkgICAgIltQTEFO
RTolZDolc10gIGJsb2NrcyAlNGQsJTRkLCU0ZCwlNGQsJTRkLCU0ZCwlNGQsJTRkLCU0ZCwlNGQs
JTVkIgorCQkJCSAgICAiIC0+ICU0ZCwlNGQsJTRkLCU0ZCwlNGQsJTRkLCU0ZCwlNGQsJTRkLCU0
ZCwlNWRcbiIsCiAJCQkJICAgIHBsYW5lLT5iYXNlLmJhc2UuaWQsIHBsYW5lLT5iYXNlLm5hbWUs
CiAJCQkJICAgIG9sZF93bS0+d21bMF0ucGxhbmVfcmVzX2IsIG9sZF93bS0+d21bMV0ucGxhbmVf
cmVzX2IsCiAJCQkJICAgIG9sZF93bS0+d21bMl0ucGxhbmVfcmVzX2IsIG9sZF93bS0+d21bM10u
cGxhbmVfcmVzX2IsCkBAIC01OTMwLDE2ICs1OTUzLDE4IEBAIHNrbF9wcmludF93bV9jaGFuZ2Vz
KHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQogCQkJCSAgICBvbGRfd20tPndtWzZd
LnBsYW5lX3Jlc19iLCBvbGRfd20tPndtWzddLnBsYW5lX3Jlc19iLAogCQkJCSAgICBvbGRfd20t
PnRyYW5zX3dtLnBsYW5lX3Jlc19iLAogCQkJCSAgICBvbGRfd20tPnNhZ3Yud20wLnBsYW5lX3Jl
c19iLAorCQkJCSAgICBvbGRfd20tPnNhZ3YudHJhbnNfd20ucGxhbmVfcmVzX2IsCiAJCQkJICAg
IG5ld193bS0+d21bMF0ucGxhbmVfcmVzX2IsIG5ld193bS0+d21bMV0ucGxhbmVfcmVzX2IsCiAJ
CQkJICAgIG5ld193bS0+d21bMl0ucGxhbmVfcmVzX2IsIG5ld193bS0+d21bM10ucGxhbmVfcmVz
X2IsCiAJCQkJICAgIG5ld193bS0+d21bNF0ucGxhbmVfcmVzX2IsIG5ld193bS0+d21bNV0ucGxh
bmVfcmVzX2IsCiAJCQkJICAgIG5ld193bS0+d21bNl0ucGxhbmVfcmVzX2IsIG5ld193bS0+d21b
N10ucGxhbmVfcmVzX2IsCiAJCQkJICAgIG5ld193bS0+dHJhbnNfd20ucGxhbmVfcmVzX2IsCi0J
CQkJICAgIG5ld193bS0+c2Fndi53bTAucGxhbmVfcmVzX2IpOworCQkJCSAgICBuZXdfd20tPnNh
Z3Yud20wLnBsYW5lX3Jlc19iLAorCQkJCSAgICBuZXdfd20tPnNhZ3YudHJhbnNfd20ucGxhbmVf
cmVzX2IpOwogCiAJCQlkcm1fZGJnX2ttcygmZGV2X3ByaXYtPmRybSwKLQkJCQkgICAgIltQTEFO
RTolZDolc10gbWluX2RkYiAlNGQsJTRkLCU0ZCwlNGQsJTRkLCU0ZCwlNGQsJTRkLCU0ZCwlNGQi
Ci0JCQkJICAgICIgLT4gJTRkLCU0ZCwlNGQsJTRkLCU0ZCwlNGQsJTRkLCU0ZCwlNGQsJTRkXG4i
LAorCQkJCSAgICAiW1BMQU5FOiVkOiVzXSBtaW5fZGRiICU0ZCwlNGQsJTRkLCU0ZCwlNGQsJTRk
LCU0ZCwlNGQsJTRkLCU0ZCwlNWQiCisJCQkJICAgICIgLT4gJTRkLCU0ZCwlNGQsJTRkLCU0ZCwl
NGQsJTRkLCU0ZCwlNGQsJTRkLCU1ZFxuIiwKIAkJCQkgICAgcGxhbmUtPmJhc2UuYmFzZS5pZCwg
cGxhbmUtPmJhc2UubmFtZSwKIAkJCQkgICAgb2xkX3dtLT53bVswXS5taW5fZGRiX2FsbG9jLCBv
bGRfd20tPndtWzFdLm1pbl9kZGJfYWxsb2MsCiAJCQkJICAgIG9sZF93bS0+d21bMl0ubWluX2Rk
Yl9hbGxvYywgb2xkX3dtLT53bVszXS5taW5fZGRiX2FsbG9jLApAQCAtNTk0NywxMiArNTk3Miwx
NCBAQCBza2xfcHJpbnRfd21fY2hhbmdlcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0
ZSkKIAkJCQkgICAgb2xkX3dtLT53bVs2XS5taW5fZGRiX2FsbG9jLCBvbGRfd20tPndtWzddLm1p
bl9kZGJfYWxsb2MsCiAJCQkJICAgIG9sZF93bS0+dHJhbnNfd20ubWluX2RkYl9hbGxvYywKIAkJ
CQkgICAgb2xkX3dtLT5zYWd2LndtMC5taW5fZGRiX2FsbG9jLAorCQkJCSAgICBvbGRfd20tPnNh
Z3YudHJhbnNfd20ubWluX2RkYl9hbGxvYywKIAkJCQkgICAgbmV3X3dtLT53bVswXS5taW5fZGRi
X2FsbG9jLCBuZXdfd20tPndtWzFdLm1pbl9kZGJfYWxsb2MsCiAJCQkJICAgIG5ld193bS0+d21b
Ml0ubWluX2RkYl9hbGxvYywgbmV3X3dtLT53bVszXS5taW5fZGRiX2FsbG9jLAogCQkJCSAgICBu
ZXdfd20tPndtWzRdLm1pbl9kZGJfYWxsb2MsIG5ld193bS0+d21bNV0ubWluX2RkYl9hbGxvYywK
IAkJCQkgICAgbmV3X3dtLT53bVs2XS5taW5fZGRiX2FsbG9jLCBuZXdfd20tPndtWzddLm1pbl9k
ZGJfYWxsb2MsCiAJCQkJICAgIG5ld193bS0+dHJhbnNfd20ubWluX2RkYl9hbGxvYywKLQkJCQkg
ICAgbmV3X3dtLT5zYWd2LndtMC5taW5fZGRiX2FsbG9jKTsKKwkJCQkgICAgbmV3X3dtLT5zYWd2
LndtMC5taW5fZGRiX2FsbG9jLAorCQkJCSAgICBuZXdfd20tPnNhZ3YudHJhbnNfd20ubWluX2Rk
Yl9hbGxvYyk7CiAJCX0KIAl9CiB9CkBAIC01OTYxLDggKzU5ODgsNiBAQCBzdGF0aWMgYm9vbCBz
a2xfcGxhbmVfc2VsZWN0ZWRfd21fZXF1YWxzKHN0cnVjdCBpbnRlbF9wbGFuZSAqcGxhbmUsCiAJ
CQkJCSBjb25zdCBzdHJ1Y3Qgc2tsX3BpcGVfd20gKm9sZF9waXBlX3dtLAogCQkJCQkgY29uc3Qg
c3RydWN0IHNrbF9waXBlX3dtICpuZXdfcGlwZV93bSkKIHsKLQljb25zdCBzdHJ1Y3Qgc2tsX3Bs
YW5lX3dtICpvbGRfd20gPSAmb2xkX3BpcGVfd20tPnBsYW5lc1twbGFuZS0+aWRdOwotCWNvbnN0
IHN0cnVjdCBza2xfcGxhbmVfd20gKm5ld193bSA9ICZuZXdfcGlwZV93bS0+cGxhbmVzW3BsYW5l
LT5pZF07CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KHBsYW5lLT5i
YXNlLmRldik7CiAJaW50IGxldmVsLCBtYXhfbGV2ZWwgPSBpbGtfd21fbWF4X2xldmVsKGk5MTUp
OwogCkBAIC01OTc3LDcgKzYwMDIsOCBAQCBzdGF0aWMgYm9vbCBza2xfcGxhbmVfc2VsZWN0ZWRf
d21fZXF1YWxzKHN0cnVjdCBpbnRlbF9wbGFuZSAqcGxhbmUsCiAJCQlyZXR1cm4gZmFsc2U7CiAJ
fQogCi0JcmV0dXJuIHNrbF93bV9sZXZlbF9lcXVhbHMoJm9sZF93bS0+dHJhbnNfd20sICZuZXdf
d20tPnRyYW5zX3dtKTsKKwlyZXR1cm4gc2tsX3dtX2xldmVsX2VxdWFscyhza2xfcGxhbmVfdHJh
bnNfd20ob2xkX3BpcGVfd20sIHBsYW5lLT5pZCksCisJCQkJICAgc2tsX3BsYW5lX3RyYW5zX3dt
KG5ld19waXBlX3dtLCBwbGFuZS0+aWQpKTsKIH0KIAogLyoKQEAgLTYxODgsMTUgKzYyMTQsMTcg
QEAgdm9pZCBza2xfcGlwZV93bV9nZXRfaHdfc3RhdGUoc3RydWN0IGludGVsX2NydGMgKmNydGMs
CiAJCQlza2xfd21fbGV2ZWxfZnJvbV9yZWdfdmFsKHZhbCwgJndtLT53bVtsZXZlbF0pOwogCQl9
CiAKLQkJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIpCi0JCQl3bS0+c2Fndi53bTAgPSB3
bS0+d21bMF07Ci0KIAkJaWYgKHBsYW5lX2lkICE9IFBMQU5FX0NVUlNPUikKIAkJCXZhbCA9IGlu
dGVsX3VuY29yZV9yZWFkKCZkZXZfcHJpdi0+dW5jb3JlLCBQTEFORV9XTV9UUkFOUyhwaXBlLCBw
bGFuZV9pZCkpOwogCQllbHNlCiAJCQl2YWwgPSBpbnRlbF91bmNvcmVfcmVhZCgmZGV2X3ByaXYt
PnVuY29yZSwgQ1VSX1dNX1RSQU5TKHBpcGUpKTsKIAogCQlza2xfd21fbGV2ZWxfZnJvbV9yZWdf
dmFsKHZhbCwgJndtLT50cmFuc193bSk7CisKKwkJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0g
MTIpIHsKKwkJCXdtLT5zYWd2LndtMCA9IHdtLT53bVswXTsKKwkJCXdtLT5zYWd2LnRyYW5zX3dt
ID0gd20tPnRyYW5zX3dtOworCQl9CiAJfQogfQogCi0tIAoyLjI2LjIKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QK
SW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C3D3AB7A2B
	for <lists+intel-gfx@lfdr.de>; Thu, 19 Sep 2019 15:08:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 13A6D6F66A;
	Thu, 19 Sep 2019 13:08:58 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1B06B6F659
 for <intel-gfx@lists.freedesktop.org>; Thu, 19 Sep 2019 13:08:55 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 18545987-1500050 for multiple; Thu, 19 Sep 2019 14:08:41 +0100
MIME-Version: 1.0
To: Mika Kuoppala <mika.kuoppala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <87y2ykpho6.fsf@gaia.fi.intel.com>
References: <20190915163749.19540-1-chris@chris-wilson.co.uk>
 <87y2ykpho6.fsf@gaia.fi.intel.com>
Message-ID: <156889851819.31102.8177609464820930352@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Thu, 19 Sep 2019 14:08:38 +0100
Subject: Re: [Intel-gfx] [PATCH] drm/i915/selftests: Exercise CS TLB
 invalidation
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBNaWthIEt1b3BwYWxhICgyMDE5LTA5LTE5IDEzOjU3OjQ1KQo+IENocmlzIFdpbHNv
biA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPiB3cml0ZXM6Cj4gCj4gPiBDaGVjayB0aGF0IHdl
IGFyZSBjb3JyZWN0bHkgaW52YWxpZGF0aW5nIHRoZSBUTEIgYXQgdGhlIHN0YXJ0IG9mIGEKPiA+
IGJhdGNoIGFmdGVyIHVwZGF0aW5nIHRoZSBHVFQuCj4gPgo+ID4gU2lnbmVkLW9mZi1ieTogQ2hy
aXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Cj4gPiBDYzogTWlrYSBLdW9wcGFs
YSA8bWlrYS5rdW9wcGFsYUBsaW51eC5pbnRlbC5jb20+Cj4gPiBDYzogRGFuaWVsZSBDZXJhb2xv
IFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNvbT4KPiA+IC0tLQo+ID4gIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ndHQuYyB8IDIyNyArKysrKysr
KysrKysrKysrKysKPiA+ICAxIGZpbGUgY2hhbmdlZCwgMjI3IGluc2VydGlvbnMoKykKPiA+Cj4g
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2d0
dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2d0dC5jCj4gPiBp
bmRleCA1OThjMThkMTA2NDAuLmY4NzA5YjMzMmJkNyAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ndHQuYwo+ID4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2d0dC5jCj4gPiBAQCAtMjUsMTMgKzI1LDE2
IEBACj4gPiAgI2luY2x1ZGUgPGxpbnV4L2xpc3Rfc29ydC5oPgo+ID4gICNpbmNsdWRlIDxsaW51
eC9wcmltZV9udW1iZXJzLmg+Cj4gPiAgCj4gPiArI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9jb250
ZXh0LmgiCj4gPiAgI2luY2x1ZGUgImdlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmgiCj4gPiAr
I2luY2x1ZGUgImd0L2ludGVsX2NvbnRleHQuaCIKPiA+ICAKPiA+ICAjaW5jbHVkZSAiaTkxNV9y
YW5kb20uaCIKPiA+ICAjaW5jbHVkZSAiaTkxNV9zZWxmdGVzdC5oIgo+ID4gIAo+ID4gICNpbmNs
dWRlICJtb2NrX2RybS5oIgo+ID4gICNpbmNsdWRlICJtb2NrX2dlbV9kZXZpY2UuaCIKPiA+ICsj
aW5jbHVkZSAiaWd0X2ZsdXNoX3Rlc3QuaCIKPiA+ICAKPiA+ICBzdGF0aWMgdm9pZCBjbGVhbnVw
X2ZyZWVkX29iamVjdHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCj4gPiAgewo+ID4g
QEAgLTE3MDUsNiArMTcwOCwyMjkgQEAgaW50IGk5MTVfZ2VtX2d0dF9tb2NrX3NlbGZ0ZXN0cyh2
b2lkKQo+ID4gICAgICAgcmV0dXJuIGVycjsKPiA+ICB9Cj4gPiAgCj4gPiArc3RhdGljIGludCBj
b250ZXh0X3N5bmMoc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQo+ID4gK3sKPiA+ICsgICAgIHN0
cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+ID4gKyAgICAgbG9uZyB0aW1lb3V0Owo+ID4gKwo+ID4g
KyAgICAgcnEgPSBpbnRlbF9jb250ZXh0X2NyZWF0ZV9yZXF1ZXN0KGNlKTsKPiA+ICsgICAgIGlm
IChJU19FUlIocnEpKQo+ID4gKyAgICAgICAgICAgICByZXR1cm4gUFRSX0VSUihycSk7Cj4gPiAr
Cj4gPiArICAgICBpOTE1X3JlcXVlc3RfZ2V0KHJxKTsKPiA+ICsgICAgIGk5MTVfcmVxdWVzdF9h
ZGQocnEpOwo+ID4gKwo+ID4gKyAgICAgdGltZW91dCA9IGk5MTVfcmVxdWVzdF93YWl0KHJxLCAw
LCBIWiAvIDUpOwo+ID4gKyAgICAgaTkxNV9yZXF1ZXN0X3B1dChycSk7Cj4gPiArCj4gPiArICAg
ICByZXR1cm4gdGltZW91dCA8IDAgPyAtRUlPIDogMDsKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGlj
IGludCBzdWJtaXRfYmF0Y2goc3RydWN0IGludGVsX2NvbnRleHQgKmNlLCB1NjQgYWRkcikKPiA+
ICt7Cj4gPiArICAgICBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycTsKPiA+ICsgICAgIGludCBlcnI7
Cj4gPiArCj4gPiArICAgICBycSA9IGludGVsX2NvbnRleHRfY3JlYXRlX3JlcXVlc3QoY2UpOwo+
ID4gKyAgICAgaWYgKElTX0VSUihycSkpCj4gPiArICAgICAgICAgICAgIHJldHVybiBQVFJfRVJS
KHJxKTsKPiA+ICsKPiA+ICsgICAgIGVyciA9IDA7Cj4gPiArICAgICBpZiAocnEtPmVuZ2luZS0+
ZW1pdF9pbml0X2JyZWFkY3J1bWIpIC8qIGRldGVjdCBhIGhhbmcgKi8KPiAKPiBmb3Igc2Vxbm8g
d3JpdGU/CgpJZiB3ZSBleHBlY3QgYW4gaW5pdGlhbCBicmVhZGNydW1iLCB3ZSB1c2UgaXQgZHVy
aW5nIHJlc2V0IHRvIGlkZW50aWZ5CmlmIHdlIGFyZSBpbnNpZGUgYSBwYXlsb2FkIChhcyBvcHBv
c2VkIHRvIGJlaW5nIGluc2lkZSB0aGUgc2VtYXBob3JlCndhaXQpLiBTbyB3ZSBuZWVkIHRvIGVt
aXQgdGhlIGJyZWFkY3J1bWIgaWYgd2UgbWF5IGhhbmcgaW4gb3VyIGJhdGNoLgoKPiA+ICsgICAg
ICAgICAgICAgZXJyID0gcnEtPmVuZ2luZS0+ZW1pdF9pbml0X2JyZWFkY3J1bWIocnEpOwo+ID4g
KyAgICAgaWYgKGVyciA9PSAwKQo+ID4gKyAgICAgICAgICAgICBlcnIgPSBycS0+ZW5naW5lLT5l
bWl0X2JiX3N0YXJ0KHJxLCBhZGRyLCAwLCAwKTsKPiA+ICsKPiAKPiBJbiBjb250ZXh0X3N5bmMg
cGFydCB3ZSBncmFiYmVkIGEgcmVmZXJlbmNlLiBJbiBoZXJlIHdlCj4gZG9uJ3QuIEkgZG9uJ3Qg
c2VlIGhvdyB3ZSBjYW4gZ2V0IGF3YXkgd2l0aG91dCBpdCBldmVuCj4gaWYgd2UgZG9uJ3Qgd2Fp
dCBpbiBoZXJlLgoKSG1tLCBJIHN1cHBvc2UgeW91IGNhbiBhcmd1ZSB0aGF0IHdlIGRvIG5vdyBo
YXZlIGEgbGF0ZXIgZGVyZWYgaW4gdGhlCnNwaW5uZXIuIFRoYXQgd2Fzbid0IHRoZXJlIGJlZm9y
ZS4uLgoKPiA+ICsgICAgIHZtYSA9IGk5MTVfdm1hX2luc3RhbmNlKG91dCwgdm0sIE5VTEwpOwo+
ID4gKyAgICAgaWYgKElTX0VSUih2bWEpKSB7Cj4gPiArICAgICAgICAgICAgIGVyciA9IFBUUl9F
UlIodm1hKTsKPiA+ICsgICAgICAgICAgICAgZ290byBvdXRfYmF0Y2g7Cj4gPiArICAgICB9Cj4g
PiArCj4gPiArICAgICBlcnIgPSBpOTE1X3ZtYV9waW4odm1hLCAwLCAwLAo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgIFBJTl9VU0VSIHwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICBQ
SU5fT0ZGU0VUX0ZJWEVEIHwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAodm0tPnRvdGFs
IC0gUEFHRV9TSVpFKSk7Cj4gPiArICAgICBpZiAoZXJyKQo+ID4gKyAgICAgICAgICAgICBnb3Rv
IG91dF9vdXQ7Cj4gCj4gb3V0X3B1dD8KCkpvb25hcyBsaWtlcyBvdXQ6IGZvciBub3JtYWwgZXhp
dCBwYXRocyB0aGF0IGRvdWJsZSBmb3IgZXJyb3IgaGFuZGxpbmcuCgo+IE9oIGFuZCB3ZSBkb24n
dCBoYXZlIHRvIGRvIGFueXRoaW5nIHdpdGggdGhlIGluc3RhbmNlIG9uCj4gZXJyb3IgcGF0aHM/
CgpOby4gVGhlIHZtYSBkb2VzIG5vdCB5ZXQgaGF2ZSBhbiBpbmRlcGVuZGVudCBsaWZldGltZSBm
cm9tIHRoZSBvYmplY3QKKHRoZXkgYXJlIGFsbCBvd25lZCBieSBvYmplY3RzIGN1cnJlbnRseSku
Cgo+ID4gKyAgICAgICAgICAgICAgICAgICAgIC8qIFJlcGxhY2UgdGhlIFRMQiB3aXRoIHRhcmdl
dCBiYXRjaGVzICovCj4gPiArICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNv
dW50OyBpKyspIHsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUzMiAqY3MgPSBi
YXRjaCArIGkgKiA2NCAvIHNpemVvZigqY3MpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdTY0IGFkZHI7Cj4gPiArCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2
bWEtPm5vZGUuc3RhcnQgPSBvZmZzZXQgKyBpICogUEFHRV9TSVpFOwo+IAo+IG9uIHByZXZpb3Vz
IGxvb3AsIHdlIGhhdmUgbm93IHByaW1lZCB0aGUgcHRlIHRvIHRsYiBpbiBoZXJlPwoKV2UncmUg
dXNpbmcgdGhlIHNhbWUgUFRFIGFzIGJlZm9yZSwgaW4gdGhlIGV4cGVjdGF0aW9uIHRoYXQgdGhl
IFRMQgpzdGlsbCBjb250YWlucyB0aGF0IGxvb2t1cC4KCj4gPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB2bS0+aW5zZXJ0X2VudHJpZXModm0sIHZtYSwgSTkxNV9DQUNIRV9OT05FLCAw
KTsKPiAKPiAuLm5vdyBjaGFuZ2luZyBpbiBpdCBoZXJlLi4uCj4gCj4gPiArCj4gPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBhZGRyID0gdm1hLT5ub2RlLnN0YXJ0ICsgaSAqIDY0Owo+
ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NbNF0gPSBNSV9OT09QOwo+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NbNl0gPSBsb3dlcl8zMl9iaXRzKGFkZHIpOwo+
ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NbN10gPSB1cHBlcl8zMl9iaXRzKGFk
ZHIpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd21iKCk7Cj4gPiArCj4gPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBzdWJtaXRfYmF0Y2goY2UsIGFkZHIp
Owo+IAo+IGluIGhvcGUgdGhhdCB3aXRoIHRoaXMgc3VibWlzc2lvbiBoYXJkd2FyZSB3aWxsIHNl
ZSB0aGUgb2xkIG9uZSBhbmQKPiBjb21wbGV0ZWx5IG1pc3MgdGhlIHN0b3JlK2JiIHN0YXJ0PwoK
VGhlIGhvcGUgaXMgd2Ugc2VlIHRoZSByaWdodCBwYWdlIG9mIGNvdXJzZSEgVGhlIHRlc3QgaXMg
dG8gZGV0ZWN0IHdoZW4KaXQgc2VlcyB0aGUgb2xkIHBhZ2UgaW5zdGVhZC4KIAo+IFBlcmhhcHMg
cmV3aXJpbmcgYSBtb3JlIGR1bW15IGVtaXQgb25seSB0byBwcm92ZSB0aGlzIGNhc2UKPiBpcyBw
dXNoaW5nIGl0Lgo+IAo+IEJ1dCBJIGFtIGN1cmlvdXMgdG8ga25vdyBpZiB5b3UgZGlkIHRyeSBp
dCBvdXQgYnkgcmVtb3ZpbmcKPiB0aGUgaW52YWxpZGF0ZSBvbiB0aGUgZW1pdHMgYW5kIG1hbmFn
ZWQgdG8gYnJpbmcKPiBvdXQgdGhlIG1pc3Npbmcgd3JpdGVzPwoKV2UgY2FuIGRlbW9uc3RyYXRl
IGl0IG9uIFRpZ2VybGFrZSA6KQoKSW5kZWVkIGl0IGRldGVjdHMgdGhlIHJlbW92ZSBvZiBNSV9J
TlZBTElEQVRFX1RMQiBlbHNld2hlcmUuCi1DaHJpcwpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9pbnRlbC1nZng=

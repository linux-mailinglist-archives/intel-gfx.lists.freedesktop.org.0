Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 11A4010CEAC
	for <lists+intel-gfx@lfdr.de>; Thu, 28 Nov 2019 19:54:13 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 33FB36E87B;
	Thu, 28 Nov 2019 18:54:11 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7AA716E87A
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Nov 2019 18:54:06 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19381150-1500050 
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Nov 2019 18:54:03 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 28 Nov 2019 18:54:02 +0000
Message-Id: <20191128185402.110678-2-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191128185402.110678-1-chris@chris-wilson.co.uk>
References: <20191128185402.110678-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 2/2] drm/i915/gen7: Re-enable full-ppgtt for ivb,
 byt, hsw
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWZ0ZXIgbXVjaCBoYWlyIHB1bGxpbmcsIHJlc29ydCB0byBwcmVhbGxvY2F0aW5nIHRoZSBwcEdU
VCBlbnRyaWVzIG9uCmluaXQgdG8gY2lyY3VtdmVudCB0aGUgYXBwYXJlbnQgbGFjayBvZiBQRCBp
bnZhbGlkYXRlIGZvbGxvd2luZyB0aGUKd3JpdGUgdG8gUFBfRENMViB1cG9uIHN3aXRjaGluZyBt
bSBiZXR3ZWVuIGNvbnRleHRzIChhbmQgaGVyZSB0aGUgc2FtZQpjb250ZXh0IGFmdGVyIGJpbmRp
bmcgbmV3IG9iamVjdHMpLiBIb3dldmVyLCB0aGUgZGV0YWlscyBvZiB0aGF0IFBQX0RDTFYKaW52
YWxpZGF0ZSBhcmUgc3RpbGwgdW5rbm93biwgYW5kIGl0IGFwcGVhcnMgd2UgbmVlZCB0byByZWxv
YWQgdGhlIG1tCnR3aWNlIHRvIGNvdmVyIG92ZXIgYSB0aW1pbmcgaXNzdWUuIFdvcnJ5aW5nLgoK
Rml4ZXM6IDNkYzAwN2ZlOWIyYiAoImRybS9pOTE1L2d0dDogRG93bmdyYWRlIGdlbjcgKGl2Yiwg
Ynl0LCBoc3cpIGJhY2sgdG8gYWxpYXNpbmctcHBndHQiKQpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBX
aWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiAuLi4vZ3B1L2RybS9pOTE1L2d0
L2ludGVsX3Jpbmdfc3VibWlzc2lvbi5jICAgfCAyOSArKysrKysrKystLS0tLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyAgICAgICAgICAgfCAxMyArKysrLS0tLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGNpLmMgICAgICAgICAgICAgICB8ICA0ICstLQog
MyBmaWxlcyBjaGFuZ2VkLCAyMSBpbnNlcnRpb25zKCspLCAyNSBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1Ym1pc3Npb24uYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jpbmdfc3VibWlzc2lvbi5jCmluZGV4IGYy
NWNlY2NiMzM1ZS4uOWIxMDQ3ZGYxNmVlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9yaW5nX3N1Ym1pc3Npb24uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9yaW5nX3N1Ym1pc3Npb24uYwpAQCAtMTM2NiwxMyArMTM2NiwxNSBAQCBzdGF0aWMg
aW50IGxvYWRfcGRfZGlyKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCBjb25zdCBzdHJ1Y3QgaTkx
NV9wcGd0dCAqcHBndHQpCiAJY29uc3Qgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqIGNvbnN0IGVu
Z2luZSA9IHJxLT5lbmdpbmU7CiAJdTMyICpjczsKIAotCWNzID0gaW50ZWxfcmluZ19iZWdpbihy
cSwgNik7CisJY3MgPSBpbnRlbF9yaW5nX2JlZ2luKHJxLCA4KTsKIAlpZiAoSVNfRVJSKGNzKSkK
IAkJcmV0dXJuIFBUUl9FUlIoY3MpOwogCi0JKmNzKysgPSBNSV9MT0FEX1JFR0lTVEVSX0lNTSgx
KTsKKwkqY3MrKyA9IE1JX0xPQURfUkVHSVNURVJfSU1NKDIpOwogCSpjcysrID0gaTkxNV9tbWlv
X3JlZ19vZmZzZXQoUklOR19QUF9ESVJfRENMVihlbmdpbmUtPm1taW9fYmFzZSkpOwogCSpjcysr
ID0gUFBfRElSX0RDTFZfMkc7CisJKmNzKysgPSBpOTE1X21taW9fcmVnX29mZnNldChSSU5HX1BQ
X0RJUl9EQ0xWKGVuZ2luZS0+bW1pb19iYXNlKSkgKyA0OworCSpjcysrID0gMDsKIAogCSpjcysr
ID0gTUlfTE9BRF9SRUdJU1RFUl9JTU0oMSk7CiAJKmNzKysgPSBpOTE1X21taW9fcmVnX29mZnNl
dChSSU5HX1BQX0RJUl9CQVNFKGVuZ2luZS0+bW1pb19iYXNlKSk7CkBAIC0xNTc5LDMwICsxNTgx
LDI1IEBAIHN0YXRpYyBpbnQgc3dpdGNoX2NvbnRleHQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEp
CiB7CiAJc3RydWN0IGludGVsX2NvbnRleHQgKmNlID0gcnEtPmh3X2NvbnRleHQ7CiAJc3RydWN0
IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0gPSB2bV9hbGlhcyhjZSk7CisJdTMyIGh3X2ZsYWdzID0g
MDsKIAlpbnQgcmV0OwogCiAJR0VNX0JVR19PTihIQVNfRVhFQ0xJU1RTKHJxLT5pOTE1KSk7CiAK
IAlpZiAodm0pIHsKLQkJcmV0ID0gbG9hZF9wZF9kaXIocnEsIGk5MTVfdm1fdG9fcHBndHQodm0p
KTsKLQkJaWYgKHJldCkKLQkJCXJldHVybiByZXQ7CisJCWludCBsb29wcyA9IDg7CisKKwkJZG8g
eworCQkJcmV0ID0gbG9hZF9wZF9kaXIocnEsIGk5MTVfdm1fdG9fcHBndHQodm0pKTsKKwkJCWlm
IChyZXQpCisJCQkJcmV0dXJuIHJldDsKKwkJfSB3aGlsZSAoLS1sb29wcyk7CiAJfQogCiAJaWYg
KGNlLT5zdGF0ZSkgewotCQl1MzIgaHdfZmxhZ3M7Ci0KIAkJR0VNX0JVR19PTihycS0+ZW5naW5l
LT5pZCAhPSBSQ1MwKTsKIAotCQkvKgotCQkgKiBUaGUga2VybmVsIGNvbnRleHQocykgaXMgdHJl
YXRlZCBhcyBwdXJlIHNjcmF0Y2ggYW5kIGlzIG5vdAotCQkgKiBleHBlY3RlZCB0byByZXRhaW4g
YW55IHN0YXRlIChhcyB3ZSBzYWNyaWZpY2UgaXQgZHVyaW5nCi0JCSAqIHN1c3BlbmQgYW5kIG9u
IHJlc3VtZSBpdCBtYXkgYmUgY29ycnVwdGVkKS4gVGhpcyBpcyBvaywKLQkJICogYXMgbm90aGlu
ZyBhY3R1YWxseSBleGVjdXRlcyB1c2luZyB0aGUga2VybmVsIGNvbnRleHQ7IGl0Ci0JCSAqIGlz
IHB1cmVseSB1c2VkIGZvciBmbHVzaGluZyB1c2VyIGNvbnRleHRzLgotCQkgKi8KLQkJaHdfZmxh
Z3MgPSAwOwotCQlpZiAoaTkxNV9nZW1fY29udGV4dF9pc19rZXJuZWwocnEtPmdlbV9jb250ZXh0
KSkKKwkJaWYgKCFycS0+ZW5naW5lLT5kZWZhdWx0X3N0YXRlKQogCQkJaHdfZmxhZ3MgPSBNSV9S
RVNUT1JFX0lOSElCSVQ7CiAKIAkJcmV0ID0gbWlfc2V0X2NvbnRleHQocnEsIGh3X2ZsYWdzKTsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKaW5kZXggNjIzOWE5YWRiZjE0Li41N2UwZmJh
M2YzNDkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCkBAIC0xNjkyLDcgKzE2OTIs
NiBAQCBzdGF0aWMgaW50IGdlbjZfYWxsb2NfdmFfcmFuZ2Uoc3RydWN0IGk5MTVfYWRkcmVzc19z
cGFjZSAqdm0sCiAJaW50ZWxfd2FrZXJlZl90IHdha2VyZWY7CiAJdTY0IGZyb20gPSBzdGFydDsK
IAl1bnNpZ25lZCBpbnQgcGRlOwotCWJvb2wgZmx1c2ggPSBmYWxzZTsKIAlpbnQgcmV0ID0gMDsK
IAogCXdha2VyZWYgPSBpbnRlbF9ydW50aW1lX3BtX2dldCgmdm0tPmk5MTUtPnJ1bnRpbWVfcG0p
OwpAQCAtMTcxNywxMSArMTcxNiw2IEBAIHN0YXRpYyBpbnQgZ2VuNl9hbGxvY192YV9yYW5nZShz
dHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKIAkJCXNwaW5fbG9jaygmcGQtPmxvY2spOwog
CQkJaWYgKHBkLT5lbnRyeVtwZGVdID09ICZ2bS0+c2NyYXRjaFsxXSkgewogCQkJCXBkLT5lbnRy
eVtwZGVdID0gcHQ7Ci0JCQkJaWYgKGk5MTVfdm1hX2lzX2JvdW5kKHBwZ3R0LT52bWEsCi0JCQkJ
CQkgICAgICBJOTE1X1ZNQV9HTE9CQUxfQklORCkpIHsKLQkJCQkJZ2VuNl93cml0ZV9wZGUocHBn
dHQsIHBkZSwgcHQpOwotCQkJCQlmbHVzaCA9IHRydWU7Ci0JCQkJfQogCQkJfSBlbHNlIHsKIAkJ
CQlhbGxvYyA9IHB0OwogCQkJCXB0ID0gcGQtPmVudHJ5W3BkZV07CkBAIC0xNzMyLDggKzE3MjYs
MTIgQEAgc3RhdGljIGludCBnZW42X2FsbG9jX3ZhX3JhbmdlKHN0cnVjdCBpOTE1X2FkZHJlc3Nf
c3BhY2UgKnZtLAogCX0KIAlzcGluX3VubG9jaygmcGQtPmxvY2spOwogCi0JaWYgKGZsdXNoKQor
CWlmIChpOTE1X3ZtYV9pc19ib3VuZChwcGd0dC0+dm1hLCBJOTE1X1ZNQV9HTE9CQUxfQklORCkp
IHsKKwkJLyogUmV3cml0ZSB0aGVtIGFsbCEgQW55dGhpbmcgbGVzcyBtaXNzZXMgYW4gaW52YWxp
ZGF0ZS4gKi8KKwkJZ2VuNl9mb3JfYWxsX3BkZXMocHQsIHBkLCBwZGUpCisJCQlnZW42X3dyaXRl
X3BkZShwcGd0dCwgcGRlLCBwdCk7CiAJCWdlbjZfZ2d0dF9pbnZhbGlkYXRlKHZtLT5ndC0+Z2d0
dCk7CisJfQogCiAJZ290byBvdXQ7CiAKQEAgLTE5OTQsNiArMTk5Miw3IEBAIHN0YXRpYyBzdHJ1
Y3QgaTkxNV9wcGd0dCAqZ2VuNl9wcGd0dF9jcmVhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUpCiBlcnJfcGQ6CiAJa2ZyZWUocHBndHQtPmJhc2UucGQpOwogZXJyX2ZyZWU6CisJbXV0
ZXhfZGVzdHJveSgmcHBndHQtPnBpbl9tdXRleCk7CiAJa2ZyZWUocHBndHQpOwogCXJldHVybiBF
UlJfUFRSKGVycik7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Bj
aS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wY2kuYwppbmRleCBkYTNlOWI1NzUyYWMu
LmJiYTZiNTBlNmJlYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wY2ku
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BjaS5jCkBAIC00MzYsNyArNDM2LDcg
QEAgc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZXZpY2VfaW5mbyBpbnRlbF9zYW5keWJyaWRn
ZV9tX2d0Ml9pbmZvID0gewogCS5oYXNfcmM2ID0gMSwgXAogCS5oYXNfcmM2cCA9IDEsIFwKIAku
aGFzX3JwcyA9IHRydWUsIFwKLQkucHBndHRfdHlwZSA9IElOVEVMX1BQR1RUX0FMSUFTSU5HLCBc
CisJLnBwZ3R0X3R5cGUgPSBJTlRFTF9QUEdUVF9GVUxMLCBcCiAJLnBwZ3R0X3NpemUgPSAzMSwg
XAogCUlWQl9QSVBFX09GRlNFVFMsIFwKIAlJVkJfQ1VSU09SX09GRlNFVFMsIFwKQEAgLTQ5Myw3
ICs0OTMsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RldmljZV9pbmZvIGludGVsX3Zh
bGxleXZpZXdfaW5mbyA9IHsKIAkuaGFzX3JwcyA9IHRydWUsCiAJLmRpc3BsYXkuaGFzX2dtY2gg
PSAxLAogCS5kaXNwbGF5Lmhhc19ob3RwbHVnID0gMSwKLQkucHBndHRfdHlwZSA9IElOVEVMX1BQ
R1RUX0FMSUFTSU5HLAorCS5wcGd0dF90eXBlID0gSU5URUxfUFBHVFRfRlVMTCwKIAkucHBndHRf
c2l6ZSA9IDMxLAogCS5oYXNfc25vb3AgPSB0cnVlLAogCS5oYXNfY29oZXJlbnRfZ2d0dCA9IGZh
bHNlLAotLSAKMi4yNC4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRl
bC1nZng=

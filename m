Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8918A173C6
	for <lists+intel-gfx@lfdr.de>; Wed,  8 May 2019 10:28:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 48A0B89789;
	Wed,  8 May 2019 08:28:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 973A389789
 for <intel-gfx@lists.freedesktop.org>; Wed,  8 May 2019 08:28:25 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16485934-1500050 
 for multiple; Wed, 08 May 2019 09:07:12 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  8 May 2019 09:06:58 +0100
Message-Id: <20190508080704.24223-34-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190508080704.24223-1-chris@chris-wilson.co.uk>
References: <20190508080704.24223-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 34/40] drm/i915: Rename intel_context.active to
 .inflight
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UmVuYW1lIHRoZSBlbmdpbmUgdGhpcyBIVyBjb250ZXh0IGlzIGN1cnJlbnRseSBhY3RpdmUgdXBv
biAodGhhdCB3ZSBhcmUKZmx5aW5nIHVwb24pIHRvIGRpc2FtYmlndWF0ZSBiZXR3ZWVuIHRoZSBt
aXh0dXJlIG9mIGRpZmZlcmVudCBhY3RpdmUKdGVybXMgKGFuZCBwcmV2ZW50IGNvbmZsaWN0IGlu
IGZ1dHVyZSBwYXRjaGVzKS4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hy
aXMtd2lsc29uLmNvLnVrPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRl
eHRfdHlwZXMuaCB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAg
ICAgICAgICAgfCAyMiArKysrKysrKystLS0tLS0tLS0tCiAyIGZpbGVzIGNoYW5nZWQsIDEyIGlu
c2VydGlvbnMoKyksIDEyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2NvbnRleHRfdHlwZXMuaAppbmRleCA5NjNhMzEyNDMwZTYuLjgyNWZjZjBhYzljNCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBlcy5o
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaApAQCAt
MzcsNyArMzcsNyBAQCBzdHJ1Y3QgaW50ZWxfY29udGV4dCB7CiAKIAlzdHJ1Y3QgaTkxNV9nZW1f
Y29udGV4dCAqZ2VtX2NvbnRleHQ7CiAJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOwot
CXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmFjdGl2ZTsKKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICppbmZsaWdodDsKIAogCXN0cnVjdCBsaXN0X2hlYWQgc2lnbmFsX2xpbms7CiAJc3RydWN0IGxp
c3RfaGVhZCBzaWduYWxzOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwppbmRleCA2NGJk
MjVhOWU2ZjUuLjVlNDE4YmY0NmM0NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMK
QEAgLTQ2MCw3ICs0NjAsNyBAQCBfX3Vud2luZF9pbmNvbXBsZXRlX3JlcXVlc3RzKHN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgaW50IGJvb3N0KQogCQlfX2k5MTVfcmVxdWVzdF91bnN1
Ym1pdChycSk7CiAJCXVud2luZF93YV90YWlsKHJxKTsKIAotCQlHRU1fQlVHX09OKHJxLT5od19j
b250ZXh0LT5hY3RpdmUpOworCQlHRU1fQlVHX09OKHJxLT5od19jb250ZXh0LT5pbmZsaWdodCk7
CiAKIAkJLyoKIAkJICogUHVzaCB0aGUgcmVxdWVzdCBiYWNrIGludG8gdGhlIHF1ZXVlIGZvciBs
YXRlciByZXN1Ym1pc3Npb24uCkBAIC01NTcsMTEgKzU1NywxMSBAQCBleGVjbGlzdHNfdXNlcl9l
bmQoc3RydWN0IGludGVsX2VuZ2luZV9leGVjbGlzdHMgKmV4ZWNsaXN0cykKIHN0YXRpYyBpbmxp
bmUgdm9pZAogZXhlY2xpc3RzX2NvbnRleHRfc2NoZWR1bGVfaW4oc3RydWN0IGk5MTVfcmVxdWVz
dCAqcnEpCiB7Ci0JR0VNX0JVR19PTihycS0+aHdfY29udGV4dC0+YWN0aXZlKTsKKwlHRU1fQlVH
X09OKHJxLT5od19jb250ZXh0LT5pbmZsaWdodCk7CiAKIAlleGVjbGlzdHNfY29udGV4dF9zdGF0
dXNfY2hhbmdlKHJxLCBJTlRFTF9DT05URVhUX1NDSEVEVUxFX0lOKTsKIAlpbnRlbF9lbmdpbmVf
Y29udGV4dF9pbihycS0+ZW5naW5lKTsKLQlycS0+aHdfY29udGV4dC0+YWN0aXZlID0gcnEtPmVu
Z2luZTsKKwlycS0+aHdfY29udGV4dC0+aW5mbGlnaHQgPSBycS0+ZW5naW5lOwogfQogCiBzdGF0
aWMgdm9pZCBraWNrX3NpYmxpbmdzKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQpAQCAtNTc2LDcg
KzU3Niw3IEBAIHN0YXRpYyB2b2lkIGtpY2tfc2libGluZ3Moc3RydWN0IGk5MTVfcmVxdWVzdCAq
cnEpCiBzdGF0aWMgaW5saW5lIHZvaWQKIGV4ZWNsaXN0c19jb250ZXh0X3NjaGVkdWxlX291dChz
dHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgdW5zaWduZWQgbG9uZyBzdGF0dXMpCiB7Ci0JcnEtPmh3
X2NvbnRleHQtPmFjdGl2ZSA9IE5VTEw7CisJcnEtPmh3X2NvbnRleHQtPmluZmxpZ2h0ID0gTlVM
TDsKIAlpbnRlbF9lbmdpbmVfY29udGV4dF9vdXQocnEtPmVuZ2luZSk7CiAJZXhlY2xpc3RzX2Nv
bnRleHRfc3RhdHVzX2NoYW5nZShycSwgc3RhdHVzKTsKIAl0cmFjZV9pOTE1X3JlcXVlc3Rfb3V0
KHJxKTsKQEAgLTgyMCw3ICs4MjAsNyBAQCBzdGF0aWMgYm9vbCB2aXJ0dWFsX21hdGNoZXMoY29u
c3Qgc3RydWN0IHZpcnR1YWxfZW5naW5lICp2ZSwKIAkJCSAgICBjb25zdCBzdHJ1Y3QgaTkxNV9y
ZXF1ZXN0ICpycSwKIAkJCSAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUp
CiB7Ci0JY29uc3Qgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqYWN0aXZlOworCWNvbnN0IHN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MgKmluZmxpZ2h0OwogCiAJaWYgKCEocnEtPmV4ZWN1dGlvbl9tYXNr
ICYgZW5naW5lLT5tYXNrKSkgLyogV2UgcGVla2VkIHRvbyBzb29uISAqLwogCQlyZXR1cm4gZmFs
c2U7CkBAIC04MzQsOCArODM0LDggQEAgc3RhdGljIGJvb2wgdmlydHVhbF9tYXRjaGVzKGNvbnN0
IHN0cnVjdCB2aXJ0dWFsX2VuZ2luZSAqdmUsCiAJICogd2UgcmV1c2UgdGhlIHJlZ2lzdGVyIG9m
ZnNldHMpLiBUaGlzIGlzIGEgdmVyeSBzbWFsbAogCSAqIGh5c3RlcnNpcyBvbiB0aGUgZ3JlZWR5
IHNlZWxjdGlvbiBhbGdvcml0aG0uCiAJICovCi0JYWN0aXZlID0gUkVBRF9PTkNFKHZlLT5jb250
ZXh0LmFjdGl2ZSk7Ci0JaWYgKGFjdGl2ZSAmJiBhY3RpdmUgIT0gZW5naW5lKQorCWluZmxpZ2h0
ID0gUkVBRF9PTkNFKHZlLT5jb250ZXh0LmluZmxpZ2h0KTsKKwlpZiAoaW5mbGlnaHQgJiYgaW5m
bGlnaHQgIT0gZW5naW5lKQogCQlyZXR1cm4gZmFsc2U7CiAKIAlyZXR1cm4gdHJ1ZTsKQEAgLTEw
MjMsNyArMTAyMyw3IEBAIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19kZXF1ZXVlKHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSkKIAkJCQl1MzIgKnJlZ3MgPSB2ZS0+Y29udGV4dC5scmNfcmVn
X3N0YXRlOwogCQkJCXVuc2lnbmVkIGludCBuOwogCi0JCQkJR0VNX0JVR19PTihSRUFEX09OQ0Uo
dmUtPmNvbnRleHQuYWN0aXZlKSk7CisJCQkJR0VNX0JVR19PTihSRUFEX09OQ0UodmUtPmNvbnRl
eHQuaW5mbGlnaHQpKTsKIAkJCQl2aXJ0dWFsX3VwZGF0ZV9yZWdpc3Rlcl9vZmZzZXRzKHJlZ3Ms
IGVuZ2luZSk7CiAKIAkJCQlpZiAoIWxpc3RfZW1wdHkoJnZlLT5jb250ZXh0LnNpZ25hbHMpKQpA
QCAtMTUwMSw3ICsxNTAxLDcgQEAgc3RhdGljIHZvaWQgZXhlY2xpc3RzX2NvbnRleHRfdW5waW4o
c3RydWN0IGludGVsX2NvbnRleHQgKmNlKQogCSAqIGhhZCB0aGUgY2hhbmNlIHRvIHJ1biB5ZXQ7
IGxldCBpdCBydW4gYmVmb3JlIHdlIHRlYXJkb3duIHRoZQogCSAqIHJlZmVyZW5jZSBpdCBtYXkg
dXNlLgogCSAqLwotCWVuZ2luZSA9IFJFQURfT05DRShjZS0+YWN0aXZlKTsKKwllbmdpbmUgPSBS
RUFEX09OQ0UoY2UtPmluZmxpZ2h0KTsKIAlpZiAodW5saWtlbHkoZW5naW5lKSkgewogCQl1bnNp
Z25lZCBsb25nIGZsYWdzOwogCkBAIC0xNTA5LDcgKzE1MDksNyBAQCBzdGF0aWMgdm9pZCBleGVj
bGlzdHNfY29udGV4dF91bnBpbihzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UpCiAJCXByb2Nlc3Nf
Y3NiKGVuZ2luZSk7CiAJCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmVuZ2luZS0+dGltZWxpbmUu
bG9jaywgZmxhZ3MpOwogCi0JCUdFTV9CVUdfT04oUkVBRF9PTkNFKGNlLT5hY3RpdmUpKTsKKwkJ
R0VNX0JVR19PTihSRUFEX09OQ0UoY2UtPmluZmxpZ2h0KSk7CiAJfQogCiAJaTkxNV9nZW1fY29u
dGV4dF91bnBpbl9od19pZChjZS0+Z2VtX2NvbnRleHQpOwpAQCAtMzEwMyw3ICszMTAzLDcgQEAg
c3RhdGljIHZvaWQgdmlydHVhbF9jb250ZXh0X2Rlc3Ryb3koc3RydWN0IGtyZWYgKmtyZWYpCiAJ
dW5zaWduZWQgaW50IG47CiAKIAlHRU1fQlVHX09OKHZlLT5yZXF1ZXN0KTsKLQlHRU1fQlVHX09O
KHZlLT5jb250ZXh0LmFjdGl2ZSk7CisJR0VNX0JVR19PTih2ZS0+Y29udGV4dC5pbmZsaWdodCk7
CiAKIAlmb3IgKG4gPSAwOyBuIDwgdmUtPm51bV9zaWJsaW5nczsgbisrKSB7CiAJCXN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKnNpYmxpbmcgPSB2ZS0+c2libGluZ3Nbbl07Ci0tIAoyLjIwLjEKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBt
YWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

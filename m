Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 267653B0AEB
	for <lists+intel-gfx@lfdr.de>; Tue, 22 Jun 2021 18:56:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8B3DD6E83E;
	Tue, 22 Jun 2021 16:55:45 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-wr1-x433.google.com (mail-wr1-x433.google.com
 [IPv6:2a00:1450:4864:20::433])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 48B0C6E824
 for <intel-gfx@lists.freedesktop.org>; Tue, 22 Jun 2021 16:55:35 +0000 (UTC)
Received: by mail-wr1-x433.google.com with SMTP id j1so7263056wrn.9
 for <intel-gfx@lists.freedesktop.org>; Tue, 22 Jun 2021 09:55:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=BRJ7Fa1mJuTl3++jYoWn4ushqkDHMteF5gn4ybVz6+0=;
 b=IvMv3vdHYZ91hEL/KynfpxV6+4L8ou4ajjqahPGTcZ4S10dzitXscG84HwYJ+iY2Zf
 KKU/9m1R/iIBLQfal3U5Mut/Y+RSHV13ahWVSHZl7mOfHQqcjUHM2t88SHGYT3rYPbdO
 0uK5apMYRO2hVeztfRV4HaxhJuF68mVEIHm2w=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=BRJ7Fa1mJuTl3++jYoWn4ushqkDHMteF5gn4ybVz6+0=;
 b=tWcbC+fnYQ7nAgIQFkidsi6BI8A/7vuXAlihkpuYITKvI8OFTjCbMdXTY1BMbpIvGj
 RY3nqpawUHwf5+dQaE93c/86+UNHvCywrNQuhVCBUCjcHj4xIs4vCSPsYGgbmHLxa4W7
 lVqVSY9mFllaH8vLMWvrlhv04J/c3C6pymSZ1S3ludXLQG70ScYt+hkdMrpnQW13NVI5
 iqVOLeZKgeNqv5gK+t4xs1pB6L8IDAbiRnFOFNN+f8tAFM7YY44Of5CIXELXaDINLOhe
 35DkNlhM44Mu7dfeispA/TytjtOafpbY+ETbMfHCnDOX7gyXWm+abSM9xuknmouYK+iG
 +mvg==
X-Gm-Message-State: AOAM530BK95OPXxvEH7iBFJF/fBARo6ZNide6ci+rrMEQ+/fL1pxhnBa
 glFkN9fohLIjWOVUtnArQf0naQ==
X-Google-Smtp-Source: ABdhPJyFROyUZElNtIQpPy/qKaI9zhEFfxU6W/67uGreKw+De4pA0P4o8CViyhaofqqlf55asybfbQ==
X-Received: by 2002:adf:d0c8:: with SMTP id z8mr6200814wrh.262.1624380933843; 
 Tue, 22 Jun 2021 09:55:33 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:57f4:0:efd0:b9e5:5ae6:c2fa])
 by smtp.gmail.com with ESMTPSA id l23sm3632342wmc.5.2021.06.22.09.55.32
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 22 Jun 2021 09:55:33 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: DRI Development <dri-devel@lists.freedesktop.org>
Date: Tue, 22 Jun 2021 18:55:11 +0200
Message-Id: <20210622165511.3169559-16-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.32.0.rc2
In-Reply-To: <20210622165511.3169559-1-daniel.vetter@ffwll.ch>
References: <20210622165511.3169559-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 15/15] RFC: drm/amdgpu: Implement a proper
 implicit fencing uapi
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Rob Clark <robdclark@chromium.org>, Daniel Stone <daniels@collabora.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Daniel Vetter <daniel.vetter@intel.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Kevin Wang <kevin1.wang@amd.com>, Sumit Semwal <sumit.semwal@linaro.org>,
 linaro-mm-sig@lists.linaro.org, Luben Tuikov <luben.tuikov@amd.com>,
 "Kristian H . Kristensen" <hoegsberg@google.com>,
 Chen Li <chenli@uniontech.com>, Bas Nieuwenhuizen <bas@basnieuwenhuizen.nl>,
 Alex Deucher <alexander.deucher@amd.com>, mesa-dev@lists.freedesktop.org,
 =?UTF-8?q?Michel=20D=C3=A4nzer?= <michel@daenzer.net>,
 Dennis Li <Dennis.Li@amd.com>, Deepak R Varma <mh12gx2825@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V0FSTklORzogQWJzb2x1dGVseSB1bnRlc3RlZCBiZXlvbmQgImdjYyBpc24ndCBkeWluZyBpbiBh
Z29ueSIuCgpJbXBsaWNpdCBmZW5jaW5nIGRvbmUgcHJvcGVybHkgbmVlZHMgdG8gdHJlYXQgdGhl
IGltcGxpY2l0IGZlbmNpbmcKc2xvdHMgbGlrZSBhIGZ1bm55IGtpbmQgb2YgSVBDIG1haWxib3gu
IEluIG90aGVyIHdvcmRzIGl0IG5lZWRzIHRvIGJlCmV4cGxpY2l0bHkuIFRoaXMgaXMgdGhlIG9u
bHkgd2F5IGl0IHdpbGwgbWVzaCB3ZWxsIHdpdGggZXhwbGljaXQKZmVuY2luZyB1c2Vyc3BhY2Ug
bGlrZSB2aywgYW5kIGl0J3MgYWxzbyB0aGUgYmFyZSBtaW5pbXVtIHJlcXVpcmVkIHRvCmJlIGFi
bGUgdG8gbWFuYWdlIGFueXRoaW5nIGVsc2UgdGhhdCB3YW50cyB0byB1c2UgdGhlIHNhbWUgYnVm
ZmVyIG9uCm11bHRpcGxlIGVuZ2luZXMgaW4gcGFyYWxsZWwsIGFuZCBzdGlsbCBiZSBhYmxlIHRv
IHNoYXJlIGl0IHRocm91Z2gKaW1wbGljaXQgc3luYy4KCmFtZGdwdSBjb21wbGV0ZWx5IGxhY2tz
IHN1Y2ggYW4gdWFwaS4gRml4IHRoaXMuCgpMdWNraWx5IHRoZSBjb25jZXB0IG9mIGlnbm9yaW5n
IGltcGxpY2l0IGZlbmNlcyBleGlzdHMgYWxyZWFkeSwgYW5kCnRha2VzIGNhcmUgb2YgYWxsIHRo
ZSBjb21wbGV4aXRpZXMgb2YgbWFraW5nIHN1cmUgdGhhdCBub24tb3B0aW9uYWwKZmVuY2VzIChs
aWtlIGJvIG1vdmVzKSBhcmUgbm90IGlnbm9yZWQuIFRoaXMgc3VwcG9ydCB3YXMgYWRkZWQgaW4K
CmNvbW1pdCAxNzdhZTA5YjVkNjk5YTVlYmQxY2FmY2VlNzg4ODlkYjk2OGFiZjU0CkF1dGhvcjog
QW5kcmVzIFJvZHJpZ3VleiA8YW5kcmVzeDdAZ21haWwuY29tPgpEYXRlOiAgIEZyaSBTZXAgMTUg
MjA6NDQ6MDYgMjAxNyAtMDQwMAoKICAgIGRybS9hbWRncHU6IGludHJvZHVjZSBBTURHUFVfR0VN
X0NSRUFURV9FWFBMSUNJVF9TWU5DIHYyCgpVbmZvcnR1YW50ZWx5IGl0J3MgdGhlIHdyb25nIHNl
bWFudGljcywgYmVjYXVzZSBpdCdzIGEgYm8gZmxhZyBhbmQKZGlzYWJsZXMgaW1wbGljaXQgc3lu
YyBvbiBhbiBhbGxvY2F0ZWQgYnVmZmVyIGNvbXBsZXRlbHkuCgpXZSBfZG9fIHdhbnQgaW1wbGlj
aXQgc3luYywgYnV0IGNvbnRyb2wgaXQgZXhwbGljaXRseS4gRm9yIHRoaXMgd2UKbmVlZCBhIGZs
YWcgb24gdGhlIGRybV9maWxlLCBzbyB0aGF0IGEgZ2l2ZW4gdXNlcnNwYWNlIChsaWtlIHZ1bGth
bikKY2FuIG1hbmFnZSB0aGUgaW1wbGljaXQgc3luYyBzbG90cyBleHBsaWNpdGx5LiBUaGUgb3Ro
ZXIgc2lkZSBvZiB0aGUKcGlwZWxpbmUgKGNvbXBvc2l0b3IsIG90aGVyIHByb2Nlc3Mgb3IganVz
dCBkaWZmZXJlbnQgc3RhZ2UgaW4gYSBtZWRpYQpwaXBlbGluZSBpbiB0aGUgc2FtZSBwcm9jZXNz
KSBjYW4gdGhlbiBlaXRoZXIgZG8gdGhlIHNhbWUsIG9yIGZ1bGx5CnBhcnRpY2lwYXRlIGluIHRo
ZSBpbXBsaWNpdCBzeW5jIGFzIGltcGxlbWVudGVkIGJ5IHRoZSBrZXJuZWwgYnkKZGVmYXVsdC4K
CkJ5IGJ1aWxkaW5nIG9uIHRoZSBleGlzdGluZyBmbGFnIGZvciBidWZmZXJzIHdlIGF2b2lkIGFu
eSBpc3N1ZXMgd2l0aApvcGVuaW5nIHVwIGFkZGl0aW9uYWwgc2VjdXJpdHkgY29uY2VybnMgLSBh
bnl0aGluZyB0aGlzIG5ldyBmbGFnIGhlcmUKYWxsb3dzIGlzIGFscmVhZHkuCgpBbGwgZHJpdmVy
cyB3aGljaCBzdXBwb3J0cyB0aGlzIGNvbmNlcHQgb2YgYSB1c2Vyc3BhY2Utc3BlY2lmaWMKb3B0
LW91dCBvZiBpbXBsaWNpdCBzeW5jIGhhdmUgYSBmbGFnIGluIHRoZWlyIENTIGlvY3RsLCBidXQg
aW4gcmVhbGl0eQp0aGF0IHR1cm5lZCBvdXQgdG8gYmUgYSBiaXQgdG9vIGluZmxleGlibGUuIFNl
ZSB0aGUgZGlzY3Vzc2lvbiBiZWxvdywKbGV0J3MgdHJ5IHRvIGRvIGEgYml0IGJldHRlciBmb3Ig
YW1kZ3B1LgoKVGhpcyBhbG9uZSBvbmx5IGFsbG93cyB1cyB0byBjb21wbGV0ZWx5IGF2b2lkIGFu
eSBzdGFsbHMgZHVlIHRvCmltcGxpY2l0IHN5bmMsIGl0IGRvZXMgbm90IHlldCBhbGxvdyB1cyB0
byB1c2UgaW1wbGljaXQgc3luYyBhcyBhCnN0cmFuZ2UgZm9ybSBvZiBJUEMgZm9yIHN5bmNfZmls
ZS4KCkZvciB0aGF0IHdlIG5lZWQgdHdvIG1vcmUgcGllY2VzOgoKLSBhIHdheSB0byBnZXQgdGhl
IGN1cnJlbnQgaW1wbGljaXQgc3luYyBmZW5jZXMgb3V0IG9mIGEgYnVmZmVyLiBDb3VsZAogIGJl
IGRvbmUgaW4gYSBkcml2ZXIgaW9jdGwsIGJ1dCBldmVyeW9uZSBuZWVkcyB0aGlzLCBhbmQgZ2Vu
ZXJhbGx5IGEKICBkbWEtYnVmIGlzIGludm9sdmVkIGFueXdheSB0byBlc3RhYmxpc2ggdGhlIHNo
YXJpbmcuIFNvIGFuIGlvY3RsIG9uCiAgdGhlIGRtYS1idWYgbWFrZXMgYSB0b24gbW9yZSBzZW5z
ZToKCiAgaHR0cHM6Ly9sb3JlLmtlcm5lbC5vcmcvZHJpLWRldmVsLzIwMjEwNTIwMTkwMDA3LjUz
NDA0Ni00LWphc29uQGpsZWtzdHJhbmQubmV0LwoKICBDdXJyZW50IGRyaXZlcnMgaW4gdXBzdHJl
YW0gc29sdmVzIHRoaXMgYnkgaGF2aW5nIHRoZSBvcHQtb3V0IGZsYWcKICBvbiB0aGVpciBDUyBp
b2N0bC4gVGhpcyBoYXMgdGhlIGRvd25zaWRlIHRoYXQgdmVyeSBvZnRlbiB0aGUgQ1MKICB3aGlj
aCBtdXN0IGFjdHVhbGx5IHN0YWxsIGZvciB0aGUgaW1wbGljaXQgZmVuY2UgaXMgcnVuIGEgd2hp
bGUKICBhZnRlciB0aGUgaW1wbGljaXQgZmVuY2UgcG9pbnQgd2FzIGxvZ2ljYWxseSBzYW1wbGVk
IHBlciB0aGUgYXBpCiAgc3BlYyAodmsgcGFzc2VzIGFuIGV4cGxpY2l0IHN5bmNvYmogYXJvdW5k
IGZvciB0aGF0IGFmYWl1aSksIGFuZCBzbwogIHJlc3VsdHMgaW4gb3ZlcnN5bmMuIENvbnZlcnRp
bmcgdGhlIGltcGxpY2l0IHN5bmMgZmVuY2VzIGludG8gYQogIHNuYXAtc2hvdCBzeW5jX2ZpbGUg
aXMgYWN0dWFsbHkgYWNjdXJhdGUuCgotIFNpbWlsbGFyIHdlIG5lZWQgdG8gYmUgYWJsZSB0byBz
ZXQgdGhlIGV4Y2x1c2l2ZSBpbXBsaWNpdCBmZW5jZS4KICBDdXJyZW50IGRyaXZlcnMgYWdhaW4g
ZG8gdGhpcyB3aXRoIGEgQ1MgaW9jdGwgZmxhZywgd2l0aCBhZ2FpbiB0aGUKICBzYW1lIHByb2Js
ZW1zIHRoYXQgdGhlIHRpbWUgdGhlIENTIGhhcHBlbnMgYWRkaXRpb25hbCBkZXBlbmRlbmNpZXMK
ICBoYXZlIGJlZW4gYWRkZWQuIEFuIGV4cGxpY2l0IGlvY3RsIHRvIG9ubHkgaW5zZXJ0IGEgc3lu
Y19maWxlICh3aGlsZQogIHJlc3BlY3RpbmcgdGhlIHJ1bGVzIGZvciBob3cgZXhjbHVzaXZlIGFu
ZCBzaGFyZWQgZmVuY2Ugc2xvdHMgbXVzdAogIGJlIHVwZGF0ZSBpbiBzdHJ1Y3QgZG1hX3Jlc3Yp
IGlzIG11Y2ggYmV0dGVyLiBUaGlzIGlzIHByb3Bvc2VkIGhlcmU6CgogIGh0dHBzOi8vbG9yZS5r
ZXJuZWwub3JnL2RyaS1kZXZlbC8yMDIxMDUyMDE5MDAwNy41MzQwNDYtNS1qYXNvbkBqbGVrc3Ry
YW5kLm5ldC8KClRoZXNlIHRocmVlIHBpZWNlcyB0b2dldGhlciBhbGxvdyB1c2Vyc3BhY2UgdG8g
ZnVsbHkgY29udHJvbCBpbXBsaWNpdApmZW5jaW5nIGFuZCByZW1vdmUgYWxsIHVuZWNlc3Nhcnkg
c3RhbGwgcG9pbnRzIGR1ZSB0byB0aGVtLgoKV2VsbCwgYXMgbXVjaCBhcyB0aGUgaW1wbGljaXQg
ZmVuY2luZyBtb2RlbCBmdW5kYW1lbnRhbGx5IGFsbG93czoKVGhlcmUgaXMgb25seSBvbmUgc2V0
IG9mIGZlbmNlcywgeW91IGNhbiBvbmx5IGNob29zZSB0byBzeW5jIGFnYWluc3QKb25seSB3cml0
ZXJzIChleGNsdXNpdmUgc2xvdCksIG9yIGV2ZXJ5b25lLiBIZW5jZSBzdWJhbGxvY2F0aW5nCm11
bHRpcGxlIGJ1ZmZlcnMgb3IgYW55dGhpbmcgZWxzZSBsaWtlIHRoaXMgaXMgZnVuZGFtZW50YWxs
eSBub3QKcG9zc2libGUsIGFuZCBjYW4gb25seSBiZSBmaXhlZCBieSBhIHByb3BlciBleHBsaWNp
dCBmZW5jaW5nIG1vZGVsLgoKQXNpZGUgZnJvbSB0aGF0IGNhdmVhdCB0aGlzIG1vZGVsIGdldHMg
aW1wbGljaXQgZmVuY2luZyBhcyBjbG9zZWx5IHRvCmV4cGxpY2l0IGZlbmNpbmcgc2VtYW50aWNz
IGFzIHBvc3NpYmxlOgoKT24gdGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbiBJIG9wdGVkIGZvciBh
IHNpbXBsZSBzZXRwYXJhbSBpb2N0bCwgbm8KbG9ja2luZyAoanVzdCBhdG9taWMgcmVhZHMvd3Jp
dGVzKSBmb3Igc2ltcGxpY2l0eS4gVGhlcmUgaXMgYSBuaWNlCmZsYWcgcGFyYW1ldGVyIGluIHRo
ZSBWTSBpb2N0bCB3aGljaCB3ZSBjb3VsZCB1c2UsIGV4Y2VwdDoKLSBpdCdzIG5vdCBjaGVja2Vk
LCBzbyB1c2Vyc3BhY2UgbGlrZWx5IHBhc3NlcyBnYXJiYWdlCi0gdGhlcmUncyBhbHJlYWR5IGEg
Y29tbWVudCB0aGF0IHVzZXJzcGFjZSBfZG9lc18gcGFzcyBnYXJiYWdlIGluIHRoZQogIHByaW9y
aXR5IGZpZWxkClNvIHllYWggdW5mb3J0dW5hdGVseSB0aGlzIGZsYWcgcGFyYW1ldGVyIGZvciBz
ZXR0aW5nIHZtIGZsYWdzIGlzCnVzZWxlc3MsIGFuZCB3ZSBuZWVkIHRvIGhhY2sgdXAgYSBuZXcg
b25lLgoKdjI6IEV4cGxhaW4gd2h5IGEgbmV3IFNFVFBBUkFNIChKYXNvbikKCnYzOiBCYXMgbm90
aWNlZCBJIGZvcmdvdCB0byBob29rIHVwIHRoZSBkZXBlbmRlbmN5LXNpZGUgc2hvcnRjdXQuIFdl
Cm5lZWQgYm90aCwgb3IgdGhpcyBkb2Vzbid0IGRvIG11Y2guCgp2NDogUmViYXNlIG92ZXIgdGhl
IGFtZGdwdSBwYXRjaCB0byBhbHdheXMgc2V0IHRoZSBpbXBsaWNpdCBzeW5jCmZlbmNlcy4KCkNj
OiBtZXNhLWRldkBsaXN0cy5mcmVlZGVza3RvcC5vcmcKQ2M6IEJhcyBOaWV1d2VuaHVpemVuIDxi
YXNAYmFzbmlldXdlbmh1aXplbi5ubD4KQ2M6IERhdmUgQWlybGllIDxhaXJsaWVkQGdtYWlsLmNv
bT4KQ2M6IFJvYiBDbGFyayA8cm9iZGNsYXJrQGNocm9taXVtLm9yZz4KQ2M6IEtyaXN0aWFuIEgu
IEtyaXN0ZW5zZW4gPGhvZWdzYmVyZ0Bnb29nbGUuY29tPgpDYzogTWljaGVsIETDpG56ZXIgPG1p
Y2hlbEBkYWVuemVyLm5ldD4KQ2M6IERhbmllbCBTdG9uZSA8ZGFuaWVsc0Bjb2xsYWJvcmEuY29t
PgpDYzogU3VtaXQgU2Vtd2FsIDxzdW1pdC5zZW13YWxAbGluYXJvLm9yZz4KQ2M6ICJDaHJpc3Rp
YW4gS8O2bmlnIiA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPgpDYzogQWxleCBEZXVjaGVyIDxh
bGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRl
ckBmZndsbC5jaD4KQ2M6IERlZXBhayBSIFZhcm1hIDxtaDEyZ3gyODI1QGdtYWlsLmNvbT4KQ2M6
IENoZW4gTGkgPGNoZW5saUB1bmlvbnRlY2guY29tPgpDYzogS2V2aW4gV2FuZyA8a2V2aW4xLndh
bmdAYW1kLmNvbT4KQ2M6IERlbm5pcyBMaSA8RGVubmlzLkxpQGFtZC5jb20+CkNjOiBMdWJlbiBU
dWlrb3YgPGx1YmVuLnR1aWtvdkBhbWQuY29tPgpDYzogbGluYXJvLW1tLXNpZ0BsaXN0cy5saW5h
cm8ub3JnClNpZ25lZC1vZmYtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAaW50ZWwu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5jICB8ICA3ICsr
KysrLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYyB8IDIxICsrKysr
KysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmgg
IHwgIDYgKysrKysrCiBpbmNsdWRlL3VhcGkvZHJtL2FtZGdwdV9kcm0uaCAgICAgICAgICAgfCAx
MCArKysrKysrKysrCiA0IGZpbGVzIGNoYW5nZWQsIDQyIGluc2VydGlvbnMoKyksIDIgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Nz
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYwppbmRleCA2NWRmMzRj
MTcyNjQuLmM1Mzg2ZDEzZWI0YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2NzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Nz
LmMKQEAgLTQ5OCw2ICs0OTgsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV9jc19wYXJzZXJfYm9zKHN0
cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLAogCXN0cnVjdCBhbWRncHVfYm8gKmdkczsKIAlzdHJ1
Y3QgYW1kZ3B1X2JvICpnd3M7CiAJc3RydWN0IGFtZGdwdV9ibyAqb2E7CisJYm9vbCBub19pbXBs
aWNpdF9zeW5jID0gUkVBRF9PTkNFKGZwcml2LT52bS5ub19pbXBsaWNpdF9zeW5jKTsKIAlpbnQg
cjsKIAogCUlOSVRfTElTVF9IRUFEKCZwLT52YWxpZGF0ZWQpOwpAQCAtNTc3LDcgKzU3OCw4IEBA
IHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3BhcnNlcl9ib3Moc3RydWN0IGFtZGdwdV9jc19wYXJzZXIg
KnAsCiAKIAkJZS0+Ym9fdmEgPSBhbWRncHVfdm1fYm9fZmluZCh2bSwgYm8pOwogCi0JCWlmIChi
by0+dGJvLmJhc2UuZG1hX2J1ZiAmJiAhYW1kZ3B1X2JvX2V4cGxpY2l0X3N5bmMoYm8pKSB7CisJ
CWlmIChiby0+dGJvLmJhc2UuZG1hX2J1ZiAmJgorCQkgICAgIShub19pbXBsaWNpdF9zeW5jIHx8
IGFtZGdwdV9ib19leHBsaWNpdF9zeW5jKGJvKSkpIHsKIAkJCWUtPmNoYWluID0gZG1hX2ZlbmNl
X2NoYWluX2FsbG9jKCk7CiAJCQlpZiAoIWUtPmNoYWluKSB7CiAJCQkJciA9IC1FTk9NRU07CkBA
IC02NDksNiArNjUxLDcgQEAgc3RhdGljIGludCBhbWRncHVfY3Nfc3luY19yaW5ncyhzdHJ1Y3Qg
YW1kZ3B1X2NzX3BhcnNlciAqcCkKIHsKIAlzdHJ1Y3QgYW1kZ3B1X2Zwcml2ICpmcHJpdiA9IHAt
PmZpbHAtPmRyaXZlcl9wcml2OwogCXN0cnVjdCBhbWRncHVfYm9fbGlzdF9lbnRyeSAqZTsKKwli
b29sIG5vX2ltcGxpY2l0X3N5bmMgPSBSRUFEX09OQ0UoZnByaXYtPnZtLm5vX2ltcGxpY2l0X3N5
bmMpOwogCWludCByOwogCiAJbGlzdF9mb3JfZWFjaF9lbnRyeShlLCAmcC0+dmFsaWRhdGVkLCB0
di5oZWFkKSB7CkBAIC02NTYsNyArNjU5LDcgQEAgc3RhdGljIGludCBhbWRncHVfY3Nfc3luY19y
aW5ncyhzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCkKIAkJc3RydWN0IGRtYV9yZXN2ICpyZXN2
ID0gYm8tPnRiby5iYXNlLnJlc3Y7CiAJCWVudW0gYW1kZ3B1X3N5bmNfbW9kZSBzeW5jX21vZGU7
CiAKLQkJc3luY19tb2RlID0gYW1kZ3B1X2JvX2V4cGxpY2l0X3N5bmMoYm8pID8KKwkJc3luY19t
b2RlID0gbm9faW1wbGljaXRfc3luYyB8fCBhbWRncHVfYm9fZXhwbGljaXRfc3luYyhibykgPwog
CQkJQU1ER1BVX1NZTkNfRVhQTElDSVQgOiBBTURHUFVfU1lOQ19ORV9PV05FUjsKIAkJciA9IGFt
ZGdwdV9zeW5jX3Jlc3YocC0+YWRldiwgJnAtPmpvYi0+c3luYywgcmVzdiwgc3luY19tb2RlLAog
CQkJCSAgICAgJmZwcml2LT52bSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2
LmMKaW5kZXggYzA4MGJhMTVhZTc3Li5mOTgyNjI2YjUzMjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfZHJ2LmMKQEAgLTE3MjQsNiArMTcyNCwyNiBAQCBpbnQgYW1kZ3B1X2Zp
bGVfdG9fZnByaXYoc3RydWN0IGZpbGUgKmZpbHAsIHN0cnVjdCBhbWRncHVfZnByaXYgKipmcHJp
dikKIAlyZXR1cm4gMDsKIH0KIAoraW50IGFtZGdwdV9zZXRwYXJhbV9pb2N0bChzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAorCQkJICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbHApCit7
CisJc3RydWN0IGRybV9hbWRncHVfc2V0cGFyYW0gKnNldHBhcmFtID0gZGF0YTsKKwlzdHJ1Y3Qg
YW1kZ3B1X2Zwcml2ICpmcHJpdiA9IGZpbHAtPmRyaXZlcl9wcml2OworCisJc3dpdGNoIChzZXRw
YXJhbS0+cGFyYW0pIHsKKwljYXNlIEFNREdQVV9TRVRQQVJBTV9OT19JTVBMSUNJVF9TWU5DOgor
CQlpZiAoc2V0cGFyYW0tPnZhbHVlKQorCQkJV1JJVEVfT05DRShmcHJpdi0+dm0ubm9faW1wbGlj
aXRfc3luYywgdHJ1ZSk7CisJCWVsc2UKKwkJCVdSSVRFX09OQ0UoZnByaXYtPnZtLm5vX2ltcGxp
Y2l0X3N5bmMsIGZhbHNlKTsKKwkJYnJlYWs7CisJZGVmYXVsdDoKKwkJcmV0dXJuIC1FSU5WQUw7
CisJfQorCisJcmV0dXJuIDA7Cit9CisKIGNvbnN0IHN0cnVjdCBkcm1faW9jdGxfZGVzYyBhbWRn
cHVfaW9jdGxzX2ttc1tdID0gewogCURSTV9JT0NUTF9ERUZfRFJWKEFNREdQVV9HRU1fQ1JFQVRF
LCBhbWRncHVfZ2VtX2NyZWF0ZV9pb2N0bCwgRFJNX0FVVEh8RFJNX1JFTkRFUl9BTExPVyksCiAJ
RFJNX0lPQ1RMX0RFRl9EUlYoQU1ER1BVX0NUWCwgYW1kZ3B1X2N0eF9pb2N0bCwgRFJNX0FVVEh8
RFJNX1JFTkRFUl9BTExPVyksCkBAIC0xNzQyLDYgKzE3NjIsNyBAQCBjb25zdCBzdHJ1Y3QgZHJt
X2lvY3RsX2Rlc2MgYW1kZ3B1X2lvY3Rsc19rbXNbXSA9IHsKIAlEUk1fSU9DVExfREVGX0RSVihB
TURHUFVfR0VNX1ZBLCBhbWRncHVfZ2VtX3ZhX2lvY3RsLCBEUk1fQVVUSHxEUk1fUkVOREVSX0FM
TE9XKSwKIAlEUk1fSU9DVExfREVGX0RSVihBTURHUFVfR0VNX09QLCBhbWRncHVfZ2VtX29wX2lv
Y3RsLCBEUk1fQVVUSHxEUk1fUkVOREVSX0FMTE9XKSwKIAlEUk1fSU9DVExfREVGX0RSVihBTURH
UFVfR0VNX1VTRVJQVFIsIGFtZGdwdV9nZW1fdXNlcnB0cl9pb2N0bCwgRFJNX0FVVEh8RFJNX1JF
TkRFUl9BTExPVyksCisJRFJNX0lPQ1RMX0RFRl9EUlYoQU1ER1BVX1NFVFBBUkFNLCBhbWRncHVf
c2V0cGFyYW1faW9jdGwsIERSTV9BVVRIfERSTV9SRU5ERVJfQUxMT1cpLAogfTsKIAogc3RhdGlj
IGNvbnN0IHN0cnVjdCBkcm1fZHJpdmVyIGFtZGdwdV9rbXNfZHJpdmVyID0gewpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmggYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uaAppbmRleCBkZGI4NWE4NWNiYmEuLjBlOGM0NDBjNjMw
MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmgKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmgKQEAgLTMyMSw2ICszMjEs
MTIgQEAgc3RydWN0IGFtZGdwdV92bSB7CiAJYm9vbAkJCWJ1bGtfbW92ZWFibGU7CiAJLyogRmxh
ZyB0byBpbmRpY2F0ZSBpZiBWTSBpcyB1c2VkIGZvciBjb21wdXRlICovCiAJYm9vbAkJCWlzX2Nv
bXB1dGVfY29udGV4dDsKKwkvKgorCSAqIEZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciBpbXBsaWNp
dCBzeW5jIHNob3VsZCBhbHdheXMgYmUgc2tpcHBlZCBvbgorCSAqIHRoaXMgY29udGV4dC4gV2Ug
ZG8gbm90IGNhcmUgYWJvdXQgcmFjZXMgYXQgYWxsLCB1c2Vyc3BhY2UgaXMgYWxsb3dlZAorCSAq
IHRvIHNob290IGl0c2VsZiB3aXRoIGltcGxpY2l0IHN5bmMgdG8gaXRzIGZ1bGxlc3QgbGlraW5n
LgorCSAqLworCWJvb2wgbm9faW1wbGljaXRfc3luYzsKIH07CiAKIHN0cnVjdCBhbWRncHVfdm1f
bWFuYWdlciB7CmRpZmYgLS1naXQgYS9pbmNsdWRlL3VhcGkvZHJtL2FtZGdwdV9kcm0uaCBiL2lu
Y2x1ZGUvdWFwaS9kcm0vYW1kZ3B1X2RybS5oCmluZGV4IDBjYmQxNTQwYWVhYy4uOWVhZTI0NWMx
NGQ2IDEwMDY0NAotLS0gYS9pbmNsdWRlL3VhcGkvZHJtL2FtZGdwdV9kcm0uaAorKysgYi9pbmNs
dWRlL3VhcGkvZHJtL2FtZGdwdV9kcm0uaApAQCAtNTQsNiArNTQsNyBAQCBleHRlcm4gIkMiIHsK
ICNkZWZpbmUgRFJNX0FNREdQVV9WTQkJCTB4MTMKICNkZWZpbmUgRFJNX0FNREdQVV9GRU5DRV9U
T19IQU5ETEUJMHgxNAogI2RlZmluZSBEUk1fQU1ER1BVX1NDSEVECQkweDE1CisjZGVmaW5lIERS
TV9BTURHUFVfU0VUUEFSQU0JCTB4MTYKIAogI2RlZmluZSBEUk1fSU9DVExfQU1ER1BVX0dFTV9D
UkVBVEUJRFJNX0lPV1IoRFJNX0NPTU1BTkRfQkFTRSArIERSTV9BTURHUFVfR0VNX0NSRUFURSwg
dW5pb24gZHJtX2FtZGdwdV9nZW1fY3JlYXRlKQogI2RlZmluZSBEUk1fSU9DVExfQU1ER1BVX0dF
TV9NTUFQCURSTV9JT1dSKERSTV9DT01NQU5EX0JBU0UgKyBEUk1fQU1ER1BVX0dFTV9NTUFQLCB1
bmlvbiBkcm1fYW1kZ3B1X2dlbV9tbWFwKQpAQCAtNzEsNiArNzIsNyBAQCBleHRlcm4gIkMiIHsK
ICNkZWZpbmUgRFJNX0lPQ1RMX0FNREdQVV9WTQkJRFJNX0lPV1IoRFJNX0NPTU1BTkRfQkFTRSAr
IERSTV9BTURHUFVfVk0sIHVuaW9uIGRybV9hbWRncHVfdm0pCiAjZGVmaW5lIERSTV9JT0NUTF9B
TURHUFVfRkVOQ0VfVE9fSEFORExFIERSTV9JT1dSKERSTV9DT01NQU5EX0JBU0UgKyBEUk1fQU1E
R1BVX0ZFTkNFX1RPX0hBTkRMRSwgdW5pb24gZHJtX2FtZGdwdV9mZW5jZV90b19oYW5kbGUpCiAj
ZGVmaW5lIERSTV9JT0NUTF9BTURHUFVfU0NIRUQJCURSTV9JT1coRFJNX0NPTU1BTkRfQkFTRSAr
IERSTV9BTURHUFVfU0NIRUQsIHVuaW9uIGRybV9hbWRncHVfc2NoZWQpCisjZGVmaW5lIERSTV9J
T0NUTF9BTURHUFVfU0VUUEFSQU0JRFJNX0lPVyhEUk1fQ09NTUFORF9CQVNFICsgRFJNX0FNREdQ
VV9TRVRQQVJBTSwgc3RydWN0IGRybV9hbWRncHVfc2V0cGFyYW0pCiAKIC8qKgogICogRE9DOiBt
ZW1vcnkgZG9tYWlucwpAQCAtMzA2LDYgKzMwOCwxNCBAQCB1bmlvbiBkcm1fYW1kZ3B1X3NjaGVk
IHsKIAlzdHJ1Y3QgZHJtX2FtZGdwdV9zY2hlZF9pbiBpbjsKIH07CiAKKyNkZWZpbmUgQU1ER1BV
X1NFVFBBUkFNX05PX0lNUExJQ0lUX1NZTkMJMQorCitzdHJ1Y3QgZHJtX2FtZGdwdV9zZXRwYXJh
bSB7CisJLyogQU1ER1BVX1NFVFBBUkFNXyogKi8KKwlfX3UzMglwYXJhbTsKKwlfX3UzMgl2YWx1
ZTsKK307CisKIC8qCiAgKiBUaGlzIGlzIG5vdCBhIHJlbGlhYmxlIEFQSSBhbmQgeW91IHNob3Vs
ZCBleHBlY3QgaXQgdG8gZmFpbCBmb3IgYW55CiAgKiBudW1iZXIgb2YgcmVhc29ucyBhbmQgaGF2
ZSBmYWxsYmFjayBwYXRoIHRoYXQgZG8gbm90IHVzZSB1c2VycHRyIHRvCi0tIAoyLjMyLjAucmMy
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1n
ZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

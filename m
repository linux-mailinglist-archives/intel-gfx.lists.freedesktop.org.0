Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8C17510096C
	for <lists+intel-gfx@lfdr.de>; Mon, 18 Nov 2019 17:44:38 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EF0E26E61B;
	Mon, 18 Nov 2019 16:44:36 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 175FC6E61B
 for <intel-gfx@lists.freedesktop.org>; Mon, 18 Nov 2019 16:44:36 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 18 Nov 2019 08:44:35 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,320,1569308400"; d="scan'208";a="258454631"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by FMSMGA003.fm.intel.com with SMTP; 18 Nov 2019 08:44:33 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Mon, 18 Nov 2019 18:44:33 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 18 Nov 2019 18:44:21 +0200
Message-Id: <20191118164430.27265-2-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191118164430.27265-1-ville.syrjala@linux.intel.com>
References: <20191118164430.27265-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 01/10] drm/i915: Change
 intel_encoders_<hook>() calling convention
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkp1
c3QgcGFzcyB0aGUgYXRvbWljIHN0YXRlIGFuZCB0aGUgY3J0YyB0byBpbnRlbF9lbmNvZGVyc19l
bmFibGUoKSAmIGNvLgpNYWtlIGxpZmUgc2ltcGxlciB3aGVuIHlvdSBkb24ndCBoYXZlIHRvIHRo
aW5rIHdoaWNoIHN0YXRlIChvbGQgdnMuIG5ldykKeW91IGhhdmUgdG8gcGFzcyBpbi4gQWxzbyBj
b25zdGlmeSB0aGUgc3RhdGVzIHdoaWxlIGF0IGl0LgoKUmV2aWV3ZWQtYnk6IE1hbmFzaSBOYXZh
cmUgPG1hbmFzaS5kLm5hdmFyZUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5cmrD
pGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgfCAxMDEgKysrKysrKysrKy0tLS0tLS0tLQog
MSBmaWxlIGNoYW5nZWQsIDU0IGluc2VydGlvbnMoKyksIDQ3IGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggMjNmMDBhNjUx
NzM4Li41ZDJhYjQwZGVmOGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZGlzcGxheS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheS5jCkBAIC02MzExLDExICs2MzExLDEyIEBAIHN0YXRpYyB2b2lkIGludGVsX2Vu
Y29kZXJzX3VwZGF0ZV9jb21wbGV0ZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkK
IAl9CiB9CiAKLXN0YXRpYyB2b2lkIGludGVsX2VuY29kZXJzX3ByZV9wbGxfZW5hYmxlKHN0cnVj
dCBpbnRlbF9jcnRjICpjcnRjLAotCQkJCQkgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlLAotCQkJCQkgIHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQorc3RhdGlj
IHZvaWQgaW50ZWxfZW5jb2RlcnNfcHJlX3BsbF9lbmFibGUoc3RydWN0IGludGVsX2F0b21pY19z
dGF0ZSAqc3RhdGUsCisJCQkJCSAgc3RydWN0IGludGVsX2NydGMgKmNydGMpCiB7Ci0Jc3RydWN0
IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGU7CisJY29uc3Qgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUgPQorCQlpbnRlbF9hdG9taWNfZ2V0X25ld19jcnRjX3N0YXRl
KHN0YXRlLCBjcnRjKTsKKwljb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9z
dGF0ZTsKIAlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubjsKIAlpbnQgaTsKIApAQCAtNjMzMSwx
MSArNjMzMiwxMiBAQCBzdGF0aWMgdm9pZCBpbnRlbF9lbmNvZGVyc19wcmVfcGxsX2VuYWJsZShz
dHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAl9CiB9CiAKLXN0YXRpYyB2b2lkIGludGVsX2VuY29k
ZXJzX3ByZV9lbmFibGUoc3RydWN0IGludGVsX2NydGMgKmNydGMsCi0JCQkJICAgICAgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCi0JCQkJICAgICAgc3RydWN0IGludGVsX2F0
b21pY19zdGF0ZSAqc3RhdGUpCitzdGF0aWMgdm9pZCBpbnRlbF9lbmNvZGVyc19wcmVfZW5hYmxl
KHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAorCQkJCSAgICAgIHN0cnVjdCBpbnRl
bF9jcnRjICpjcnRjKQogewotCXN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRl
OworCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlID0KKwkJaW50ZWxf
YXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShzdGF0ZSwgY3J0Yyk7CisJY29uc3Qgc3RydWN0IGRy
bV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGU7CiAJc3RydWN0IGRybV9jb25uZWN0b3IgKmNv
bm47CiAJaW50IGk7CiAKQEAgLTYzNTEsMTEgKzYzNTMsMTIgQEAgc3RhdGljIHZvaWQgaW50ZWxf
ZW5jb2RlcnNfcHJlX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAl9CiB9CiAKLXN0
YXRpYyB2b2lkIGludGVsX2VuY29kZXJzX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywK
LQkJCQkgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAotCQkJCSAgc3RydWN0
IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCitzdGF0aWMgdm9pZCBpbnRlbF9lbmNvZGVyc19l
bmFibGUoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsCisJCQkJICBzdHJ1Y3QgaW50
ZWxfY3J0YyAqY3J0YykKIHsKLQlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0
ZTsKKwljb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSA9CisJCWludGVs
X2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUoc3RhdGUsIGNydGMpOworCWNvbnN0IHN0cnVjdCBk
cm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRlOwogCXN0cnVjdCBkcm1fY29ubmVjdG9yICpj
b25uOwogCWludCBpOwogCkBAIC02MzcyLDExICs2Mzc1LDEyIEBAIHN0YXRpYyB2b2lkIGludGVs
X2VuY29kZXJzX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAl9CiB9CiAKLXN0YXRp
YyB2b2lkIGludGVsX2VuY29kZXJzX2Rpc2FibGUoc3RydWN0IGludGVsX2NydGMgKmNydGMsCi0J
CQkJICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9jcnRjX3N0YXRlLAotCQkJCSAgIHN0
cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQorc3RhdGljIHZvaWQgaW50ZWxfZW5jb2Rl
cnNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKKwkJCQkgICBzdHJ1
Y3QgaW50ZWxfY3J0YyAqY3J0YykKIHsKLQlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqb2xk
X2Nvbm5fc3RhdGU7CisJY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9jcnRjX3N0
YXRlID0KKwkJaW50ZWxfYXRvbWljX2dldF9vbGRfY3J0Y19zdGF0ZShzdGF0ZSwgY3J0Yyk7CisJ
Y29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKm9sZF9jb25uX3N0YXRlOwogCXN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uOwogCWludCBpOwogCkBAIC02MzkzLDExICs2Mzk3LDEyIEBA
IHN0YXRpYyB2b2lkIGludGVsX2VuY29kZXJzX2Rpc2FibGUoc3RydWN0IGludGVsX2NydGMgKmNy
dGMsCiAJfQogfQogCi1zdGF0aWMgdm9pZCBpbnRlbF9lbmNvZGVyc19wb3N0X2Rpc2FibGUoc3Ry
dWN0IGludGVsX2NydGMgKmNydGMsCi0JCQkJCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRf
Y3J0Y19zdGF0ZSwKLQkJCQkJc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCitzdGF0
aWMgdm9pZCBpbnRlbF9lbmNvZGVyc19wb3N0X2Rpc2FibGUoc3RydWN0IGludGVsX2F0b21pY19z
dGF0ZSAqc3RhdGUsCisJCQkJCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjKQogewotCXN0cnVjdCBk
cm1fY29ubmVjdG9yX3N0YXRlICpvbGRfY29ubl9zdGF0ZTsKKwljb25zdCBzdHJ1Y3QgaW50ZWxf
Y3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUgPQorCQlpbnRlbF9hdG9taWNfZ2V0X29sZF9jcnRj
X3N0YXRlKHN0YXRlLCBjcnRjKTsKKwljb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAq
b2xkX2Nvbm5fc3RhdGU7CiAJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm47CiAJaW50IGk7CiAK
QEAgLTY0MTMsMTEgKzY0MTgsMTIgQEAgc3RhdGljIHZvaWQgaW50ZWxfZW5jb2RlcnNfcG9zdF9k
aXNhYmxlKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAogCX0KIH0KIAotc3RhdGljIHZvaWQgaW50
ZWxfZW5jb2RlcnNfcG9zdF9wbGxfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKLQkJ
CQkJICAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwKLQkJCQkJICAg
IHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQorc3RhdGljIHZvaWQgaW50ZWxfZW5j
b2RlcnNfcG9zdF9wbGxfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwK
KwkJCQkJICAgIHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjKQogewotCXN0cnVjdCBkcm1fY29ubmVj
dG9yX3N0YXRlICpvbGRfY29ubl9zdGF0ZTsKKwljb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqb2xkX2NydGNfc3RhdGUgPQorCQlpbnRlbF9hdG9taWNfZ2V0X29sZF9jcnRjX3N0YXRlKHN0
YXRlLCBjcnRjKTsKKwljb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqb2xkX2Nvbm5f
c3RhdGU7CiAJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm47CiAJaW50IGk7CiAKQEAgLTY0MzMs
MTEgKzY0MzksMTIgQEAgc3RhdGljIHZvaWQgaW50ZWxfZW5jb2RlcnNfcG9zdF9wbGxfZGlzYWJs
ZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAl9CiB9CiAKLXN0YXRpYyB2b2lkIGludGVsX2Vu
Y29kZXJzX3VwZGF0ZV9waXBlKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAotCQkJCSAgICAgICBz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKLQkJCQkgICAgICAgc3RydWN0IGlu
dGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCitzdGF0aWMgdm9pZCBpbnRlbF9lbmNvZGVyc191cGRh
dGVfcGlwZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKKwkJCQkgICAgICAgc3Ry
dWN0IGludGVsX2NydGMgKmNydGMpCiB7Ci0Jc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNv
bm5fc3RhdGU7CisJY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUgPQor
CQlpbnRlbF9hdG9taWNfZ2V0X25ld19jcnRjX3N0YXRlKHN0YXRlLCBjcnRjKTsKKwljb25zdCBz
dHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZTsKIAlzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubjsKIAlpbnQgaTsKIApAQCAtNjUwNCw3ICs2NTExLDcgQEAgc3RhdGljIHZvaWQg
aXJvbmxha2VfY3J0Y19lbmFibGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmln
LAogCiAJaW50ZWxfY3J0Yy0+YWN0aXZlID0gdHJ1ZTsKIAotCWludGVsX2VuY29kZXJzX3ByZV9l
bmFibGUoaW50ZWxfY3J0YywgcGlwZV9jb25maWcsIHN0YXRlKTsKKwlpbnRlbF9lbmNvZGVyc19w
cmVfZW5hYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKIAogCWlmIChwaXBlX2NvbmZpZy0+aGFzX3Bj
aF9lbmNvZGVyKSB7CiAJCS8qIE5vdGU6IEZESSBQTEwgZW5hYmxpbmcgX211c3RfIGJlIGRvbmUg
YmVmb3JlIHdlIGVuYWJsZSB0aGUKQEAgLTY1MzcsNyArNjU0NCw3IEBAIHN0YXRpYyB2b2lkIGly
b25sYWtlX2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZywK
IAlhc3NlcnRfdmJsYW5rX2Rpc2FibGVkKGNydGMpOwogCWludGVsX2NydGNfdmJsYW5rX29uKHBp
cGVfY29uZmlnKTsKIAotCWludGVsX2VuY29kZXJzX2VuYWJsZShpbnRlbF9jcnRjLCBwaXBlX2Nv
bmZpZywgc3RhdGUpOworCWludGVsX2VuY29kZXJzX2VuYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7
CiAKIAlpZiAoSEFTX1BDSF9DUFQoZGV2X3ByaXYpKQogCQljcHRfdmVyaWZ5X21vZGVzZXQoZGV2
LCBpbnRlbF9jcnRjLT5waXBlKTsKQEAgLTY2MjEsMTIgKzY2MjgsMTIgQEAgc3RhdGljIHZvaWQg
aGFzd2VsbF9jcnRjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcs
CiAJaWYgKFdBUk5fT04oaW50ZWxfY3J0Yy0+YWN0aXZlKSkKIAkJcmV0dXJuOwogCi0JaW50ZWxf
ZW5jb2RlcnNfcHJlX3BsbF9lbmFibGUoaW50ZWxfY3J0YywgcGlwZV9jb25maWcsIHN0YXRlKTsK
KwlpbnRlbF9lbmNvZGVyc19wcmVfcGxsX2VuYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7CiAKIAlp
ZiAocGlwZV9jb25maWctPnNoYXJlZF9kcGxsKQogCQlpbnRlbF9lbmFibGVfc2hhcmVkX2RwbGwo
cGlwZV9jb25maWcpOwogCi0JaW50ZWxfZW5jb2RlcnNfcHJlX2VuYWJsZShpbnRlbF9jcnRjLCBw
aXBlX2NvbmZpZywgc3RhdGUpOworCWludGVsX2VuY29kZXJzX3ByZV9lbmFibGUoc3RhdGUsIGlu
dGVsX2NydGMpOwogCiAJaWYgKGludGVsX2NydGNfaGFzX2RwX2VuY29kZXIocGlwZV9jb25maWcp
KQogCQlpbnRlbF9kcF9zZXRfbV9uKHBpcGVfY29uZmlnLCBNMV9OMSk7CkBAIC02NzAzLDcgKzY3
MTAsNyBAQCBzdGF0aWMgdm9pZCBoYXN3ZWxsX2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRj
X3N0YXRlICpwaXBlX2NvbmZpZywKIAlhc3NlcnRfdmJsYW5rX2Rpc2FibGVkKGNydGMpOwogCWlu
dGVsX2NydGNfdmJsYW5rX29uKHBpcGVfY29uZmlnKTsKIAotCWludGVsX2VuY29kZXJzX2VuYWJs
ZShpbnRlbF9jcnRjLCBwaXBlX2NvbmZpZywgc3RhdGUpOworCWludGVsX2VuY29kZXJzX2VuYWJs
ZShzdGF0ZSwgaW50ZWxfY3J0Yyk7CiAKIAlpZiAocHNsX2Nsa2dhdGVfd2EpIHsKIAkJaW50ZWxf
d2FpdF9mb3JfdmJsYW5rKGRldl9wcml2LCBwaXBlKTsKQEAgLTY3NTEsNyArNjc1OCw3IEBAIHN0
YXRpYyB2b2lkIGlyb25sYWtlX2NydGNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
b2xkX2NydGNfc3RhdGUsCiAJaW50ZWxfc2V0X2NwdV9maWZvX3VuZGVycnVuX3JlcG9ydGluZyhk
ZXZfcHJpdiwgcGlwZSwgZmFsc2UpOwogCWludGVsX3NldF9wY2hfZmlmb191bmRlcnJ1bl9yZXBv
cnRpbmcoZGV2X3ByaXYsIHBpcGUsIGZhbHNlKTsKIAotCWludGVsX2VuY29kZXJzX2Rpc2FibGUo
aW50ZWxfY3J0Yywgb2xkX2NydGNfc3RhdGUsIHN0YXRlKTsKKwlpbnRlbF9lbmNvZGVyc19kaXNh
YmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKIAogCWRybV9jcnRjX3ZibGFua19vZmYoY3J0Yyk7CiAJ
YXNzZXJ0X3ZibGFua19kaXNhYmxlZChjcnRjKTsKQEAgLTY3NjMsNyArNjc3MCw3IEBAIHN0YXRp
YyB2b2lkIGlyb25sYWtlX2NydGNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xk
X2NydGNfc3RhdGUsCiAJaWYgKG9sZF9jcnRjX3N0YXRlLT5oYXNfcGNoX2VuY29kZXIpCiAJCWly
b25sYWtlX2ZkaV9kaXNhYmxlKGNydGMpOwogCi0JaW50ZWxfZW5jb2RlcnNfcG9zdF9kaXNhYmxl
KGludGVsX2NydGMsIG9sZF9jcnRjX3N0YXRlLCBzdGF0ZSk7CisJaW50ZWxfZW5jb2RlcnNfcG9z
dF9kaXNhYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKIAogCWlmIChvbGRfY3J0Y19zdGF0ZS0+aGFz
X3BjaF9lbmNvZGVyKSB7CiAJCWlyb25sYWtlX2Rpc2FibGVfcGNoX3RyYW5zY29kZXIoZGV2X3By
aXYsIHBpcGUpOwpAQCAtNjgwMSw3ICs2ODA4LDcgQEAgc3RhdGljIHZvaWQgaGFzd2VsbF9jcnRj
X2Rpc2FibGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9jcnRjX3N0YXRlLAogCXN0cnVj
dCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjKTsKIAllbnVtIHRy
YW5zY29kZXIgY3B1X3RyYW5zY29kZXIgPSBvbGRfY3J0Y19zdGF0ZS0+Y3B1X3RyYW5zY29kZXI7
CiAKLQlpbnRlbF9lbmNvZGVyc19kaXNhYmxlKGludGVsX2NydGMsIG9sZF9jcnRjX3N0YXRlLCBz
dGF0ZSk7CisJaW50ZWxfZW5jb2RlcnNfZGlzYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7CiAKIAlk
cm1fY3J0Y192Ymxhbmtfb2ZmKGNydGMpOwogCWFzc2VydF92YmxhbmtfZGlzYWJsZWQoY3J0Yyk7
CkBAIC02ODIzLDkgKzY4MzAsOSBAQCBzdGF0aWMgdm9pZCBoYXN3ZWxsX2NydGNfZGlzYWJsZShz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUsCiAJZWxzZQogCQlpcm9ubGFr
ZV9wZml0X2Rpc2FibGUob2xkX2NydGNfc3RhdGUpOwogCi0JaW50ZWxfZW5jb2RlcnNfcG9zdF9k
aXNhYmxlKGludGVsX2NydGMsIG9sZF9jcnRjX3N0YXRlLCBzdGF0ZSk7CisJaW50ZWxfZW5jb2Rl
cnNfcG9zdF9kaXNhYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKIAotCWludGVsX2VuY29kZXJzX3Bv
c3RfcGxsX2Rpc2FibGUoaW50ZWxfY3J0Yywgb2xkX2NydGNfc3RhdGUsIHN0YXRlKTsKKwlpbnRl
bF9lbmNvZGVyc19wb3N0X3BsbF9kaXNhYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKIH0KIAogc3Rh
dGljIHZvaWQgaTl4eF9wZml0X2VuYWJsZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
Y3J0Y19zdGF0ZSkKQEAgLTcwNTYsNyArNzA2Myw3IEBAIHN0YXRpYyB2b2lkIHZhbGxleXZpZXdf
Y3J0Y19lbmFibGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCiAJaW50
ZWxfc2V0X2NwdV9maWZvX3VuZGVycnVuX3JlcG9ydGluZyhkZXZfcHJpdiwgcGlwZSwgdHJ1ZSk7
CiAKLQlpbnRlbF9lbmNvZGVyc19wcmVfcGxsX2VuYWJsZShpbnRlbF9jcnRjLCBwaXBlX2NvbmZp
Zywgc3RhdGUpOworCWludGVsX2VuY29kZXJzX3ByZV9wbGxfZW5hYmxlKHN0YXRlLCBpbnRlbF9j
cnRjKTsKIAogCWlmIChJU19DSEVSUllWSUVXKGRldl9wcml2KSkgewogCQljaHZfcHJlcGFyZV9w
bGwoaW50ZWxfY3J0YywgcGlwZV9jb25maWcpOwpAQCAtNzA2Niw3ICs3MDczLDcgQEAgc3RhdGlj
IHZvaWQgdmFsbGV5dmlld19jcnRjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlw
ZV9jb25maWcsCiAJCXZsdl9lbmFibGVfcGxsKGludGVsX2NydGMsIHBpcGVfY29uZmlnKTsKIAl9
CiAKLQlpbnRlbF9lbmNvZGVyc19wcmVfZW5hYmxlKGludGVsX2NydGMsIHBpcGVfY29uZmlnLCBz
dGF0ZSk7CisJaW50ZWxfZW5jb2RlcnNfcHJlX2VuYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7CiAK
IAlpOXh4X3BmaXRfZW5hYmxlKHBpcGVfY29uZmlnKTsKIApAQCAtNzA4MSw3ICs3MDg4LDcgQEAg
c3RhdGljIHZvaWQgdmFsbGV5dmlld19jcnRjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqcGlwZV9jb25maWcsCiAJYXNzZXJ0X3ZibGFua19kaXNhYmxlZChjcnRjKTsKIAlpbnRlbF9j
cnRjX3ZibGFua19vbihwaXBlX2NvbmZpZyk7CiAKLQlpbnRlbF9lbmNvZGVyc19lbmFibGUoaW50
ZWxfY3J0YywgcGlwZV9jb25maWcsIHN0YXRlKTsKKwlpbnRlbF9lbmNvZGVyc19lbmFibGUoc3Rh
dGUsIGludGVsX2NydGMpOwogfQogCiBzdGF0aWMgdm9pZCBpOXh4X3NldF9wbGxfZGl2aWRlcnMo
Y29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCkBAIC03MTIwLDcgKzcx
MjcsNyBAQCBzdGF0aWMgdm9pZCBpOXh4X2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpwaXBlX2NvbmZpZywKIAlpZiAoIUlTX0dFTihkZXZfcHJpdiwgMikpCiAJCWludGVsX3Nl
dF9jcHVfZmlmb191bmRlcnJ1bl9yZXBvcnRpbmcoZGV2X3ByaXYsIHBpcGUsIHRydWUpOwogCi0J
aW50ZWxfZW5jb2RlcnNfcHJlX2VuYWJsZShpbnRlbF9jcnRjLCBwaXBlX2NvbmZpZywgc3RhdGUp
OworCWludGVsX2VuY29kZXJzX3ByZV9lbmFibGUoc3RhdGUsIGludGVsX2NydGMpOwogCiAJaTl4
eF9lbmFibGVfcGxsKGludGVsX2NydGMsIHBpcGVfY29uZmlnKTsKIApAQCAtNzE0MSw3ICs3MTQ4
LDcgQEAgc3RhdGljIHZvaWQgaTl4eF9jcnRjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqcGlwZV9jb25maWcsCiAJYXNzZXJ0X3ZibGFua19kaXNhYmxlZChjcnRjKTsKIAlpbnRlbF9j
cnRjX3ZibGFua19vbihwaXBlX2NvbmZpZyk7CiAKLQlpbnRlbF9lbmNvZGVyc19lbmFibGUoaW50
ZWxfY3J0YywgcGlwZV9jb25maWcsIHN0YXRlKTsKKwlpbnRlbF9lbmNvZGVyc19lbmFibGUoc3Rh
dGUsIGludGVsX2NydGMpOwogfQogCiBzdGF0aWMgdm9pZCBpOXh4X3BmaXRfZGlzYWJsZShjb25z
dCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUpCkBAIC03MTc1LDcgKzcx
ODIsNyBAQCBzdGF0aWMgdm9pZCBpOXh4X2NydGNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZSAqb2xkX2NydGNfc3RhdGUsCiAJaWYgKElTX0dFTihkZXZfcHJpdiwgMikpCiAJCWludGVs
X3dhaXRfZm9yX3ZibGFuayhkZXZfcHJpdiwgcGlwZSk7CiAKLQlpbnRlbF9lbmNvZGVyc19kaXNh
YmxlKGludGVsX2NydGMsIG9sZF9jcnRjX3N0YXRlLCBzdGF0ZSk7CisJaW50ZWxfZW5jb2RlcnNf
ZGlzYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7CiAKIAlkcm1fY3J0Y192Ymxhbmtfb2ZmKGNydGMp
OwogCWFzc2VydF92YmxhbmtfZGlzYWJsZWQoY3J0Yyk7CkBAIC03MTg0LDcgKzcxOTEsNyBAQCBz
dGF0aWMgdm9pZCBpOXh4X2NydGNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xk
X2NydGNfc3RhdGUsCiAKIAlpOXh4X3BmaXRfZGlzYWJsZShvbGRfY3J0Y19zdGF0ZSk7CiAKLQlp
bnRlbF9lbmNvZGVyc19wb3N0X2Rpc2FibGUoaW50ZWxfY3J0Yywgb2xkX2NydGNfc3RhdGUsIHN0
YXRlKTsKKwlpbnRlbF9lbmNvZGVyc19wb3N0X2Rpc2FibGUoc3RhdGUsIGludGVsX2NydGMpOwog
CiAJaWYgKCFpbnRlbF9jcnRjX2hhc190eXBlKG9sZF9jcnRjX3N0YXRlLCBJTlRFTF9PVVRQVVRf
RFNJKSkgewogCQlpZiAoSVNfQ0hFUlJZVklFVyhkZXZfcHJpdikpCkBAIC03MTk1LDcgKzcyMDIs
NyBAQCBzdGF0aWMgdm9pZCBpOXh4X2NydGNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqb2xkX2NydGNfc3RhdGUsCiAJCQlpOXh4X2Rpc2FibGVfcGxsKG9sZF9jcnRjX3N0YXRlKTsK
IAl9CiAKLQlpbnRlbF9lbmNvZGVyc19wb3N0X3BsbF9kaXNhYmxlKGludGVsX2NydGMsIG9sZF9j
cnRjX3N0YXRlLCBzdGF0ZSk7CisJaW50ZWxfZW5jb2RlcnNfcG9zdF9wbGxfZGlzYWJsZShzdGF0
ZSwgaW50ZWxfY3J0Yyk7CiAKIAlpZiAoIUlTX0dFTihkZXZfcHJpdiwgMikpCiAJCWludGVsX3Nl
dF9jcHVfZmlmb191bmRlcnJ1bl9yZXBvcnRpbmcoZGV2X3ByaXYsIHBpcGUsIGZhbHNlKTsKQEAg
LTE0MzY1LDcgKzE0MzcyLDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfdXBkYXRlX2NydGMoc3RydWN0
IGludGVsX2NydGMgKmNydGMsCiAJCWludGVsX3ByZV9wbGFuZV91cGRhdGUob2xkX2NydGNfc3Rh
dGUsIG5ld19jcnRjX3N0YXRlKTsKIAogCQlpZiAobmV3X2NydGNfc3RhdGUtPnVwZGF0ZV9waXBl
KQotCQkJaW50ZWxfZW5jb2RlcnNfdXBkYXRlX3BpcGUoY3J0YywgbmV3X2NydGNfc3RhdGUsIHN0
YXRlKTsKKwkJCWludGVsX2VuY29kZXJzX3VwZGF0ZV9waXBlKHN0YXRlLCBjcnRjKTsKIAl9CiAK
IAlpZiAobmV3X2NydGNfc3RhdGUtPnVwZGF0ZV9waXBlICYmICFuZXdfY3J0Y19zdGF0ZS0+ZW5h
YmxlX2ZiYykKLS0gCjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
aW50ZWwtZ2Z4

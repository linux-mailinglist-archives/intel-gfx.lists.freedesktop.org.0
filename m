Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4113616324
	for <lists+intel-gfx@lfdr.de>; Tue,  7 May 2019 13:57:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EBB596E7B8;
	Tue,  7 May 2019 11:57:09 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AF2C86E7B8
 for <intel-gfx@lists.freedesktop.org>; Tue,  7 May 2019 11:57:07 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 16476163-1500050 for multiple; Tue, 07 May 2019 12:57:04 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Matthew Auld <matthew.auld@intel.com>, intel-gfx@lists.freedesktop.org
References: <20190507105557.5385-1-matthew.auld@intel.com>
 <20190507105557.5385-2-matthew.auld@intel.com>
In-Reply-To: <20190507105557.5385-2-matthew.auld@intel.com>
Message-ID: <155723022244.2489.5981141743332547095@skylake-alporthouse-com>
Date: Tue, 07 May 2019 12:57:02 +0100
Subject: Re: [Intel-gfx] [PATCH v2 2/2] drm/i915: add in-kernel blitter
 client
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBNYXR0aGV3IEF1bGQgKDIwMTktMDUtMDcgMTE6NTU6NTcpCj4gVGhlIHBsYW4gaXMg
dG8gdXNlIHRoZSBibGl0dGVyIGVuZ2luZSBmb3IgYXN5bmMgb2JqZWN0IGNsZWFyaW5nIHdoZW4K
PiB1c2luZyBsb2NhbCBtZW1vcnksIGJ1dCBiZWZvcmUgd2UgY2FuIG1vdmUgdGhlIHdvcmtlciB0
byBnZXRfcGFnZXMoKSB3ZQo+IGhhdmUgdG8gZmlyc3QgdGFtZSBzb21lIG1vcmUgb2Ygb3VyIHN0
cnVjdF9tdXRleCB1c2FnZS4gV2l0aCB0aGlzIGluCj4gbWluZCB3ZSBzaG91bGQgYmUgYWJsZSB0
byB1cHN0cmVhbSB0aGUgb2JqZWN0IGNsZWFyaW5nIGFzIHNvbWUKPiBzZWxmdGVzdHMsIHdoaWNo
IHNob3VsZCBzZXJ2ZSBhcyBhIGd1aW5lYSBwaWcgZm9yIHRoZSBvbmdvaW5nIGxvY2tpbmcKPiBy
ZXdvcmsgYW5kIHVwY29taW5nIGFzeWMgZ2V0X3BhZ2VzKCkgZnJhbWV3b3JrLgo+IAo+IFNpZ25l
ZC1vZmYtYnk6IE1hdHRoZXcgQXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KPiAtLS0KPiAr
c3RydWN0IGNsZWFyX3BhZ2VzX3dvcmsgewo+ICsgICAgICAgc3RydWN0IGRtYV9mZW5jZSBkbWE7
Cj4gKyAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlX2NiIGNiOwo+ICsgICAgICAgc3RydWN0IGk5MTVf
c3dfZmVuY2Ugd2FpdDsKPiArICAgICAgIHN0cnVjdCB3b3JrX3N0cnVjdCB3b3JrOwo+ICsgICAg
ICAgc3RydWN0IGlycV93b3JrIGlycV93b3JrOwo+ICsgICAgICAgc3RydWN0IGk5MTVfc2xlZXZl
ICpzbGVldmU7Cj4gKyAgICAgICBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2U7Cj4gKyAgICAgICB1
MzIgdmFsdWU7Cj4gK307Cj4gKwo+ICtzdGF0aWMgY29uc3QgY2hhciAqY2xlYXJfcGFnZXNfd29y
a19kcml2ZXJfbmFtZShzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkKPiArewo+ICsgICAgICAgcmV0
dXJuIERSSVZFUl9OQU1FOwo+ICt9Cj4gKwo+ICtzdGF0aWMgY29uc3QgY2hhciAqY2xlYXJfcGFn
ZXNfd29ya190aW1lbGluZV9uYW1lKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQo+ICt7Cj4gKyAg
ICAgICByZXR1cm4gImNsZWFyIjsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgY2xlYXJfcGFnZXNf
d29ya19yZWxlYXNlKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQo+ICt7Cj4gKyAgICAgICBzdHJ1
Y3QgY2xlYXJfcGFnZXNfd29yayAqdyA9IGNvbnRhaW5lcl9vZihmZW5jZSwgdHlwZW9mKCp3KSwg
ZG1hKTsKPiArCj4gKyAgICAgICBkZXN0cm95X3NsZWV2ZSh3LT5zbGVldmUpOwo+ICsKPiArICAg
ICAgIGk5MTVfc3dfZmVuY2VfZmluaSgmdy0+d2FpdCk7Cj4gKwo+ICsgICAgICAgQlVJTERfQlVH
X09OKG9mZnNldG9mKHR5cGVvZigqdyksIGRtYSkpOwo+ICsgICAgICAgZG1hX2ZlbmNlX2ZyZWUo
JnctPmRtYSk7Cj4gK30KPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZG1hX2ZlbmNlX29wcyBj
bGVhcl9wYWdlc193b3JrX29wcyA9IHsKPiArICAgICAgIC5nZXRfZHJpdmVyX25hbWUgPSBjbGVh
cl9wYWdlc193b3JrX2RyaXZlcl9uYW1lLAo+ICsgICAgICAgLmdldF90aW1lbGluZV9uYW1lID0g
Y2xlYXJfcGFnZXNfd29ya190aW1lbGluZV9uYW1lLAo+ICsgICAgICAgLnJlbGVhc2UgPSBjbGVh
cl9wYWdlc193b3JrX3JlbGVhc2UsCj4gK307Cj4gKwo+ICtzdGF0aWMgdm9pZCBjbGVhcl9wYWdl
c19zaWduYWxfaXJxX3dvcmtlcihzdHJ1Y3QgaXJxX3dvcmsgKndvcmspCj4gK3sKPiArICAgICAg
IHN0cnVjdCBjbGVhcl9wYWdlc193b3JrICp3ID0gY29udGFpbmVyX29mKHdvcmssIHR5cGVvZigq
dyksIGlycV93b3JrKTsKPiArCj4gKyAgICAgICBkbWFfZmVuY2Vfc2lnbmFsKCZ3LT5kbWEpOwo+
ICsgICAgICAgZG1hX2ZlbmNlX3B1dCgmdy0+ZG1hKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQg
Y2xlYXJfcGFnZXNfZG1hX2ZlbmNlX2NiKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLAo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlX2NiICpjYikK
PiArewo+ICsgICAgICAgc3RydWN0IGNsZWFyX3BhZ2VzX3dvcmsgKncgPSBjb250YWluZXJfb2Yo
Y2IsIHR5cGVvZigqdyksIGNiKTsKPiArCj4gKyAgICAgICAvKgo+ICsgICAgICAgICogUHVzaCB0
aGUgc2lnbmFsbGluZyBvZiB0aGUgZmVuY2UgaW50byB5ZXQgYW5vdGhlciB3b3JrZXIgdG8gYXZv
aWQKPiArICAgICAgICAqIHRoZSBuaWdodG1hcmUgbG9ja2luZyBhcm91bmQgdGhlIGZlbmNlIHNw
aW5sb2NrLgo+ICsgICAgICAgICovCj4gKyAgICAgICBpcnFfd29ya19xdWV1ZSgmdy0+aXJxX3dv
cmspOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBjbGVhcl9wYWdlc193b3JrZXIoc3RydWN0IHdv
cmtfc3RydWN0ICp3b3JrKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgY2xlYXJfcGFnZXNfd29yayAq
dyA9IGNvbnRhaW5lcl9vZih3b3JrLCB0eXBlb2YoKncpLCB3b3JrKTsKPiArICAgICAgIHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdy0+Y2UtPmdlbV9jb250ZXh0LT5pOTE1Owo+ICsg
ICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiA9IHctPnNsZWV2ZS0+b2JqOwo+
ICsgICAgICAgc3RydWN0IGk5MTVfdm1hICp2bWEgPSB3LT5zbGVldmUtPnZtYTsKPiArICAgICAg
IHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+ICsgICAgICAgaW50IGVycjsKPiArCj4gKyAgICAg
ICBpZiAody0+ZG1hLmVycm9yKQo+ICsgICAgICAgICAgICAgICBnb3RvIG91dF9zaWduYWw7Cj4g
Kwo+ICsgICAgICAgaWYgKG9iai0+Y2FjaGVfZGlydHkpIHsKPiArICAgICAgICAgICAgICAgb2Jq
LT53cml0ZV9kb21haW4gPSAwOwo+ICsgICAgICAgICAgICAgICBpZiAoaTkxNV9nZW1fb2JqZWN0
X2hhc19zdHJ1Y3RfcGFnZShvYmopKQo+ICsgICAgICAgICAgICAgICAgICAgICAgIGRybV9jbGZs
dXNoX3NnKHctPnNsZWV2ZS0+cGFnZXMpOwo+ICsgICAgICAgICAgICAgICBvYmotPmNhY2hlX2Rp
cnR5ID0gZmFsc2U7CgpJbnRlcmVzdGluZy4gSWYgd2UgaGF2ZSBubyBzdHJ1Y3RfcGFnZSwgY2Fu
IHdlIGJlIGNhY2hlX2RpcnR5IGhlcmU/ClRoYXQgbWlnaHQgYmUgYSB1c2VmdWwgdGhvdWdodCBl
eGVyY2lzZSBhbmQgd29ydGggdmVyaWZ5aW5nIGF0IG9kZApwb2ludHMuCgo+ICsgICAgICAgfQo+
ICsKPiArICAgICAgIG11dGV4X2xvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwoKVGhpcyB3
aWxsIGJlIGNvbWUgdm0tPm11dGV4LiBCdXQgdGhhdCdzIHdoeSB3ZSBuZWVkIHRoaXMgcGF0Y2gg
c28gdGhhdAp3ZSBjYW4gdHJpbSBkb3duIHRoZSBsb2NraW5nIHdpdGggYSB3b3JraW5nIHRlc3Qu
Cgo+ICsgICAgICAgZXJyID0gaTkxNV92bWFfcGluKHZtYSwgMCwgMCwgUElOX1VTRVIpOwo+ICsg
ICAgICAgaWYgKHVubGlrZWx5KGVycikpIHsKPiArICAgICAgICAgICAgICAgbXV0ZXhfdW5sb2Nr
KCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKPiArICAgICAgICAgICAgICAgZG1hX2ZlbmNlX3Nl
dF9lcnJvcigmdy0+ZG1hLCBlcnIpOwo+ICsgICAgICAgICAgICAgICBnb3RvIG91dF9zaWduYWw7
Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgcnEgPSBpOTE1X3JlcXVlc3RfY3JlYXRlKHctPmNl
KTsKPiArICAgICAgIGlmIChJU19FUlIocnEpKSB7Cj4gKyAgICAgICAgICAgICAgIGVyciA9IFBU
Ul9FUlIocnEpOwo+ICsgICAgICAgICAgICAgICBnb3RvIG91dF91bnBpbjsKPiArICAgICAgIH0K
PiArCj4gKyAgICAgICBlcnIgPSBpbnRlbF9lbWl0X3ZtYV9maWxsX2JsdChycSwgdm1hLCB3LT52
YWx1ZSk7Cj4gKyAgICAgICBpZiAodW5saWtlbHkoZXJyKSkKPiArICAgICAgICAgICAgICAgZ290
byBvdXRfcmVxdWVzdDsKPiArCj4gKyAgICAgICBlcnIgPSBpOTE1X3ZtYV9tb3ZlX3RvX2FjdGl2
ZSh2bWEsIHJxLCBFWEVDX09CSkVDVF9XUklURSk7Cj4gK291dF9yZXF1ZXN0Ogo+ICsgICAgICAg
aWYgKHVubGlrZWx5KGVycikpCj4gKyAgICAgICAgICAgICAgIGk5MTVfcmVxdWVzdF9za2lwKHJx
LCBlcnIpOwo+ICsgICAgICAgZWxzZQo+ICsgICAgICAgICAgICAgICBpOTE1X3JlcXVlc3RfZ2V0
KHJxKTsKPiArCj4gKyAgICAgICBpOTE1X3JlcXVlc3RfYWRkKHJxKTsKPiArb3V0X3VucGluOgo+
ICsgICAgICAgaTkxNV92bWFfdW5waW4odm1hKTsKPiArCj4gKyAgICAgICBtdXRleF91bmxvY2so
Jmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwo+ICsKPiArICAgICAgIGlmICghZXJyKSB7Cj4gKyAg
ICAgICAgICAgICAgIGVyciA9IGRtYV9mZW5jZV9hZGRfY2FsbGJhY2soJnJxLT5mZW5jZSwgJnct
PmNiLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFy
X3BhZ2VzX2RtYV9mZW5jZV9jYik7Cj4gKyAgICAgICAgICAgICAgIGk5MTVfcmVxdWVzdF9wdXQo
cnEpOwo+ICsgICAgICAgICAgICAgICBpZiAoIWVycikKPiArICAgICAgICAgICAgICAgICAgICAg
ICByZXR1cm47CgpUaGlzIHNob3VsZCBiZSByZWFycmFuZ2VkIHN1Y2ggdGhhdCBhZnRlciB3ZSBo
YXZlIGEgcnEgYWxsb2NhdGVkLCB3ZQphbHdheXMgYXR0YWNoIHRoZSBjYWxsYmFjayBhbmQgcHJv
cGFnYXRlIHZpYSB0aGUgY2FsbGJhY2suIEV2ZW4gb24gdGhlCmVycm9yIHBhdGguIFRoYXQgc2hv
dWxkIHRpZHkgdGhpcyB1cCBxdWl0ZSBhIGJpdC4gKEl0J3MgcHJldHR5IG11Y2ggdGhlCnBvaW50
IG9mIHdoeSB3ZSBhbHdheXMgaTkxNV9yZXF1ZXN0X2FkZCBldmVuIHdoZW4gc2tpcHBpbmcsIHdl
IGFsd2F5cwpoYXZlIGFuIGludGFjdCB0aW1lbGluZSBmb3IgY29udmV5aW5nIGVycm9ycy4pCgo+
ICsgICAgICAgfSBlbHNlIHsKPiArICAgICAgICAgICAgICAgZG1hX2ZlbmNlX3NldF9lcnJvcigm
dy0+ZG1hLCBlcnIpOwo+ICsgICAgICAgfQo+ICtvdXRfc2lnbmFsOgo+ICsgICAgICAgZG1hX2Zl
bmNlX3NpZ25hbCgmdy0+ZG1hKTsKPiArICAgICAgIGRtYV9mZW5jZV9wdXQoJnctPmRtYSk7Cj4g
K30KPiArCj4gK3N0YXRpYyBpbnQgX19pOTE1X3N3X2ZlbmNlX2NhbGwKPiArY2xlYXJfcGFnZXNf
d29ya19ub3RpZnkoc3RydWN0IGk5MTVfc3dfZmVuY2UgKmZlbmNlLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgIGVudW0gaTkxNV9zd19mZW5jZV9ub3RpZnkgc3RhdGUpCj4gK3sKPiArICAgICAg
IHN0cnVjdCBjbGVhcl9wYWdlc193b3JrICp3ID0gY29udGFpbmVyX29mKGZlbmNlLCB0eXBlb2Yo
KncpLCB3YWl0KTsKPiArCj4gKyAgICAgICBzd2l0Y2ggKHN0YXRlKSB7Cj4gKyAgICAgICBjYXNl
IEZFTkNFX0NPTVBMRVRFOgo+ICsgICAgICAgICAgICAgICBzY2hlZHVsZV93b3JrKCZ3LT53b3Jr
KTsKPiArICAgICAgICAgICAgICAgYnJlYWs7Cj4gKwo+ICsgICAgICAgY2FzZSBGRU5DRV9GUkVF
Ogo+ICsgICAgICAgICAgICAgICBkbWFfZmVuY2VfcHV0KCZ3LT5kbWEpOwo+ICsgICAgICAgICAg
ICAgICBicmVhazsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICByZXR1cm4gTk9USUZZX0RPTkU7
Cj4gK30KPiArCj4gK3N0YXRpYyBERUZJTkVfU1BJTkxPQ0soZmVuY2VfbG9jayk7Cj4gKwo+ICtp
bnQgaTkxNV9nZW1fc2NoZWR1bGVfZmlsbF9wYWdlc19ibHQoc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3QgKm9iaiwKCk5vdCBzb2xkIG9uIHRoaXMgbmFtZS4gU2NoZWR1bGluZyBpcyBpbmhlcmVu
dCBpbiB0aGUgbmFtZSBHRU0sIGFuZCB0aGlzCnRha2VzIHRoZSBpOTE1X2dlbV9vYmplY3QgYXMg
aXRzIHByaW1hcnkgYXJndW1lbnQuIEknZCBmYXZvdXIKaTkxNV9nZW1fb2JqZWN0X2ZpbGxfYmx0
LCB0aG91Z2ggaXQncyByZWFsbHkgcGFydCBvZiB0aGUgbW1hbiBmYW1pbHkuIFRvCmJlIHJlc29s
dmVkIGxhdGVyLgoKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0
IGludGVsX2NvbnRleHQgKmNlLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzdHJ1Y3Qgc2dfdGFibGUgKnBhZ2VzLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgaTkxNV9wYWdlX3NpemVzICpwYWdlX3NpemVzLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB1MzIgdmFsdWUpCj4gK3sKPiArICAgICAgIHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShvYmotPmJhc2UuZGV2KTsKPiArICAg
ICAgIHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHggPSBjZS0+Z2VtX2NvbnRleHQ7Cj4gKyAg
ICAgICBzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bTsKPiArICAgICAgIHN0cnVjdCBjbGVh
cl9wYWdlc193b3JrICp3b3JrOwo+ICsgICAgICAgc3RydWN0IGk5MTVfc2xlZXZlICpzbGVldmU7
Cj4gKyAgICAgICBpbnQgZXJyOwo+ICsKPiArICAgICAgIHZtID0gY3R4LT5wcGd0dCA/ICZjdHgt
PnBwZ3R0LT52bSA6ICZpOTE1LT5nZ3R0LnZtOwoKUmVtaW5kIG1lLCB0aGlzIG5lZWRzIHRvIGJl
IGNlLT52bS4KCj4gKyAgICAgICBzbGVldmUgPSBjcmVhdGVfc2xlZXZlKHZtLCBvYmosIHBhZ2Vz
LCBwYWdlX3NpemVzKTsKPiArICAgICAgIGlmIChJU19FUlIoc2xlZXZlKSkKPiArICAgICAgICAg
ICAgICAgcmV0dXJuIFBUUl9FUlIoc2xlZXZlKTsKPiArCj4gKyAgICAgICB3b3JrID0ga21hbGxv
YyhzaXplb2YoKndvcmspLCBHRlBfS0VSTkVMKTsKPiArICAgICAgIGlmICh3b3JrID09IE5VTEwp
IHsKPiArICAgICAgICAgICAgICAgZGVzdHJveV9zbGVldmUoc2xlZXZlKTsKPiArICAgICAgICAg
ICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgd29yay0+dmFs
dWUgPSB2YWx1ZTsKPiArICAgICAgIHdvcmstPnNsZWV2ZSA9IHNsZWV2ZTsKPiArICAgICAgIHdv
cmstPmNlID0gY2U7Cj4gKwo+ICsgICAgICAgSU5JVF9XT1JLKCZ3b3JrLT53b3JrLCBjbGVhcl9w
YWdlc193b3JrZXIpOwo+ICsKPiArICAgICAgIGluaXRfaXJxX3dvcmsoJndvcmstPmlycV93b3Jr
LCBjbGVhcl9wYWdlc19zaWduYWxfaXJxX3dvcmtlcik7Cj4gKwo+ICsgICAgICAgZG1hX2ZlbmNl
X2luaXQoJndvcmstPmRtYSwKPiArICAgICAgICAgICAgICAgICAgICAgICZjbGVhcl9wYWdlc193
b3JrX29wcywKPiArICAgICAgICAgICAgICAgICAgICAgICZmZW5jZV9sb2NrLAo+ICsgICAgICAg
ICAgICAgICAgICAgICAgaTkxNS0+bW0udW5vcmRlcmVkX3RpbWVsaW5lLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgMCk7Cj4gKyAgICAgICBpOTE1X3N3X2ZlbmNlX2luaXQoJndvcmstPndhaXQs
IGNsZWFyX3BhZ2VzX3dvcmtfbm90aWZ5KTsKPiArCj4gKyAgICAgICBpOTE1X2dlbV9vYmplY3Rf
bG9jayhvYmopOwo+ICsgICAgICAgZXJyID0gaTkxNV9zd19mZW5jZV9hd2FpdF9yZXNlcnZhdGlv
bigmd29yay0+d2FpdCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgb2JqLT5yZXN2LCBOVUxMLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB0cnVlLCBJOTE1X0ZFTkNFX1RJTUVPVVQsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEk5MTVfRkVOQ0VfR0ZQKTsKPiArICAgICAg
IGlmIChlcnIgPCAwKSB7Cj4gKyAgICAgICAgICAgICAgIGRtYV9mZW5jZV9zZXRfZXJyb3IoJndv
cmstPmRtYSwgZXJyKTsKPiArICAgICAgIH0gZWxzZSB7Cj4gKyAgICAgICAgICAgICAgIHJlc2Vy
dmF0aW9uX29iamVjdF9hZGRfZXhjbF9mZW5jZShvYmotPnJlc3YsICZ3b3JrLT5kbWEpOwo+ICsg
ICAgICAgICAgICAgICBlcnIgPSAwOwo+ICsgICAgICAgfQo+ICsgICAgICAgaTkxNV9nZW1fb2Jq
ZWN0X3VubG9jayhvYmopOwo+ICsKPiArICAgICAgIGRtYV9mZW5jZV9nZXQoJndvcmstPmRtYSk7
Cj4gKyAgICAgICBpOTE1X3N3X2ZlbmNlX2NvbW1pdCgmd29yay0+d2FpdCk7Cj4gKwo+ICsgICAg
ICAgcmV0dXJuIGVycjsKPiArfQo+ICsKPiArI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1
X1NFTEZURVNUKQo+ICsjaW5jbHVkZSAic2VsZnRlc3RzL2k5MTVfZ2VtX2NsaWVudF9ibHQuYyIK
PiArI2VuZGlmCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2Ns
aWVudF9ibHQuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2NsaWVudF9ibHQuaAo+
IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAwLi5hNzA4MDYyM2U3NDEK
PiAtLS0gL2Rldi9udWxsCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fY2xp
ZW50X2JsdC5oCj4gQEAgLTAsMCArMSwyMSBAQAo+ICsvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmll
cjogTUlUICovCj4gKy8qCj4gKyAqIENvcHlyaWdodCDCqSAyMDE5IEludGVsIENvcnBvcmF0aW9u
Cj4gKyAqLwo+ICsjaWZuZGVmIF9fSTkxNV9HRU1fQ0xJRU5UX0JMVF9IX18KPiArI2RlZmluZSBf
X0k5MTVfR0VNX0NMSUVOVF9CTFRfSF9fCj4gKwo+ICsjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4K
PiArCj4gK3N0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0Owo+ICtzdHJ1Y3QgaW50ZWxfY29udGV4
dCBjZTsKPiArc3RydWN0IGk5MTVfcGFnZV9zaXplczsKPiArc3RydWN0IHNnX3RhYmxlOwo+ICsK
PiAraW50IGk5MTVfZ2VtX3NjaGVkdWxlX2ZpbGxfcGFnZXNfYmx0KHN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmosCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0
cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc3RydWN0IHNnX3RhYmxlICpwYWdlcywKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc3RydWN0IGk5MTVfcGFnZV9zaXplcyAqcGFnZV9zaXplcywKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdTMyIHZhbHVlKTsKPiArCj4gKyNlbmRpZgo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9vYmplY3RfYmx0LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9vYmplY3RfYmx0LmMKPiBuZXcgZmlsZSBt
b2RlIDEwMDY0NAo+IGluZGV4IDAwMDAwMDAwMDAwMC4uM2ZkYTMzZTVkY2Y1Cj4gLS0tIC9kZXYv
bnVsbAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX29iamVjdF9ibHQuYwo+
IEBAIC0wLDAgKzEsMTAzIEBACj4gKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKPiAr
LyoKPiArICogQ29weXJpZ2h0IMKpIDIwMTkgSW50ZWwgQ29ycG9yYXRpb24KPiArICovCj4gKwo+
ICsjaW5jbHVkZSAiaTkxNV9nZW1fb2JqZWN0X2JsdC5oIgo+ICsKPiArI2luY2x1ZGUgImk5MTVf
Z2VtX2NsZmx1c2guaCIKPiArI2luY2x1ZGUgImludGVsX2Rydi5oIgo+ICsKPiAraW50IGludGVs
X2VtaXRfdm1hX2ZpbGxfYmx0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgaTkxNV92bWEgKnZtYSwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdTMyIHZhbHVlKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgaW50ZWxfY29udGV4
dCAqY2UgPSBycS0+aHdfY29udGV4dDsKPiArICAgICAgIHUzMiAqY3M7Cj4gKyAgICAgICBpbnQg
ZXJyOwo+ICsKPiArICAgICAgIGlmIChjZS0+ZW5naW5lLT5lbWl0X2luaXRfYnJlYWRjcnVtYikg
ewo+ICsgICAgICAgICAgICAgICBlcnIgPSBjZS0+ZW5naW5lLT5lbWl0X2luaXRfYnJlYWRjcnVt
YihycSk7Cj4gKyAgICAgICAgICAgICAgIGlmICh1bmxpa2VseShlcnIpKQo+ICsgICAgICAgICAg
ICAgICAgICAgICAgIHJldHVybiBlcnI7Cj4gKyAgICAgICB9CgpUaG91Z2ggaXQgbWF5IHB1c2gg
c29tZSBkdXBsaWNhdGlvbiBpbiB0aGUgY2FsbGVycywgdGhpcyBpcyB0aGUgY2FsbGVycwpkdXR5
LgoKPiArICAgICAgIGNzID0gaW50ZWxfcmluZ19iZWdpbihycSwgOCk7CgppZiAoSVNfRVJSKGNz
KSkKCXJldHVybiBjczsKPiArCj4gKyAgICAgICBpZiAoSU5URUxfR0VOKHJxLT5pOTE1KSA+PSA4
KSB7Cj4gKyAgICAgICAgICAgICAgICpjcysrID0gWFlfQ09MT1JfQkxUX0NNRCB8IEJMVF9XUklU
RV9SR0JBIHwgKDctMik7Cj4gKyAgICAgICAgICAgICAgICpjcysrID0gQkxUX0RFUFRIXzMyIHwg
QkxUX1JPUF9DT0xPUl9DT1BZIHwgUEFHRV9TSVpFOwo+ICsgICAgICAgICAgICAgICAqY3MrKyA9
IDA7Cj4gKyAgICAgICAgICAgICAgICpjcysrID0gdm1hLT5zaXplID4+IFBBR0VfU0hJRlQgPDwg
MTYgfCBQQUdFX1NJWkUgLyA0Owo+ICsgICAgICAgICAgICAgICAqY3MrKyA9IGxvd2VyXzMyX2Jp
dHModm1hLT5ub2RlLnN0YXJ0KTsKPiArICAgICAgICAgICAgICAgKmNzKysgPSB1cHBlcl8zMl9i
aXRzKHZtYS0+bm9kZS5zdGFydCk7Cj4gKyAgICAgICAgICAgICAgICpjcysrID0gdmFsdWU7Cj4g
KyAgICAgICAgICAgICAgICpjcysrID0gTUlfTk9PUDsKPiArICAgICAgIH0gZWxzZSB7Cj4gKyAg
ICAgICAgICAgICAgICpjcysrID0gWFlfQ09MT1JfQkxUX0NNRCB8IEJMVF9XUklURV9SR0JBIHwg
KDYtMik7Cj4gKyAgICAgICAgICAgICAgICpjcysrID0gQkxUX0RFUFRIXzMyIHwgQkxUX1JPUF9D
T0xPUl9DT1BZIHwgUEFHRV9TSVpFOwo+ICsgICAgICAgICAgICAgICAqY3MrKyA9IDA7Cj4gKyAg
ICAgICAgICAgICAgICpjcysrID0gdm1hLT5zaXplID4+IFBBR0VfU0hJRlQgPDwgMTYgfCBQQUdF
X1NJWkUgLyA0Owo+ICsgICAgICAgICAgICAgICAqY3MrKyA9IHZtYS0+bm9kZS5zdGFydDsKPiAr
ICAgICAgICAgICAgICAgKmNzKysgPSB2YWx1ZTsKPiArICAgICAgICAgICAgICAgKmNzKysgPSBN
SV9OT09QOwo+ICsgICAgICAgICAgICAgICAqY3MrKyA9IE1JX05PT1A7Cj4gKyAgICAgICB9Cj4g
Kwo+ICsgICAgICAgaW50ZWxfcmluZ19hZHZhbmNlKHJxLCBjcyk7Cj4gKwo+ICsgICAgICAgcmV0
dXJuIDA7Cj4gK30KPiArCj4gK2ludCBpOTE1X2dlbV9vYmplY3RfZmlsbF9ibHQoc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0
cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUz
MiB2YWx1ZSkKPiArewo+ICsgICAgICAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0
b19pOTE1KG9iai0+YmFzZS5kZXYpOwo+ICsgICAgICAgc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQg
KmN0eCA9IGNlLT5nZW1fY29udGV4dDsKPiArICAgICAgIHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3Bh
Y2UgKnZtOwo+ICsgICAgICAgc3RydWN0IGk5MTVfcmVxdWVzdCAqcnE7Cj4gKyAgICAgICBzdHJ1
Y3QgaTkxNV92bWEgKnZtYTsKPiArICAgICAgIGludCBlcnI7Cj4gKwo+ICsgICAgICAgdm0gPSBj
dHgtPnBwZ3R0ID8gJmN0eC0+cHBndHQtPnZtIDogJmk5MTUtPmdndHQudm07Cj4gKwo+ICsgICAg
ICAgdm1hID0gaTkxNV92bWFfaW5zdGFuY2Uob2JqLCB2bSwgTlVMTCk7Cj4gKyAgICAgICBpZiAo
SVNfRVJSKHZtYSkpCj4gKyAgICAgICAgICAgICAgIHJldHVybiBQVFJfRVJSKHZtYSk7Cj4gKwo+
ICsgICAgICAgZXJyID0gaTkxNV92bWFfcGluKHZtYSwgMCwgMCwgUElOX1VTRVIpOwo+ICsgICAg
ICAgaWYgKHVubGlrZWx5KGVycikpCj4gKyAgICAgICAgICAgICAgIHJldHVybiBlcnI7Cj4gKwo+
ICsgICAgICAgaWYgKG9iai0+Y2FjaGVfZGlydHkpCgppZiAob2JqLT5jYWNoZV9kaXJ0eSAmIH5v
YmotPmNhY2hlX2NvaGVyZW50KQoKPiArICAgICAgICAgICAgICAgaTkxNV9nZW1fY2xmbHVzaF9v
YmplY3Qob2JqLCAwKTsKPiArCj4gKyAgICAgICBycSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUoY2Up
Owo+ICsgICAgICAgaWYgKElTX0VSUihycSkpIHsKPiArICAgICAgICAgICAgICAgZXJyID0gUFRS
X0VSUihycSk7Cj4gKyAgICAgICAgICAgICAgIGdvdG8gb3V0X3VucGluOwo+ICsgICAgICAgfQo+
ICsKPiArICAgICAgIGVyciA9IGk5MTVfcmVxdWVzdF9hd2FpdF9vYmplY3QocnEsIG9iaiwgdHJ1
ZSk7Cj4gKyAgICAgICBpZiAodW5saWtlbHkoZXJyKSkKPiArICAgICAgICAgICAgICAgZ290byBv
dXRfcmVxdWVzdDsKPiArCj4gKyAgICAgICBlcnIgPSBpbnRlbF9lbWl0X3ZtYV9maWxsX2JsdChy
cSwgdm1hLCB2YWx1ZSk7Cj4gKyAgICAgICBpZiAodW5saWtlbHkoZXJyKSkKPiArICAgICAgICAg
ICAgICAgZ290byBvdXRfcmVxdWVzdDsKPiArCj4gKyAgICAgICBlcnIgPSBpOTE1X3ZtYV9tb3Zl
X3RvX2FjdGl2ZSh2bWEsIHJxLCBFWEVDX09CSkVDVF9XUklURSk7Cj4gK291dF9yZXF1ZXN0Ogo+
ICsgICAgICAgaWYgKHVubGlrZWx5KGVycikpCj4gKyAgICAgICAgICAgICAgIGk5MTVfcmVxdWVz
dF9za2lwKHJxLCBlcnIpOwo+ICsKPiArICAgICAgIGk5MTVfcmVxdWVzdF9hZGQocnEpOwo+ICtv
dXRfdW5waW46Cj4gKyAgICAgICBpOTE1X3ZtYV91bnBpbih2bWEpOwo+ICsgICAgICAgcmV0dXJu
IGVycjsKCk9rLgoKPiArfQo+ICsKPiArI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1X1NF
TEZURVNUKQo+ICsjaW5jbHVkZSAic2VsZnRlc3RzL2k5MTVfZ2VtX29iamVjdF9ibHQuYyIKPiAr
I2VuZGlmCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX29iamVj
dF9ibHQuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX29iamVjdF9ibHQuaAo+IG5l
dyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAwLi43ZWM3ZGU2YWMwYzAKPiAt
LS0gL2Rldi9udWxsCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fb2JqZWN0
X2JsdC5oCj4gQEAgLTAsMCArMSwyNCBAQAo+ICsvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjog
TUlUICovCj4gKy8qCj4gKyAqIENvcHlyaWdodCDCqSAyMDE5IEludGVsIENvcnBvcmF0aW9uCj4g
KyAqLwo+ICsKPiArI2lmbmRlZiBfX0k5MTVfR0VNX09CSkVDVF9CTFRfSF9fCj4gKyNkZWZpbmUg
X19JOTE1X0dFTV9PQkpFQ1RfQkxUX0hfXwo+ICsKPiArI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+
Cj4gKwo+ICtzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdDsKPiArc3RydWN0IGludGVsX2NvbnRl
eHQ7Cj4gK3N0cnVjdCBpOTE1X3JlcXVlc3Q7Cj4gK3N0cnVjdCBpOTE1X3ZtYTsKPiArCj4gK2lu
dCBpbnRlbF9lbWl0X3ZtYV9maWxsX2JsdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGk5MTVfdm1hICp2bWEsCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHUzMiB2YWx1ZSk7Cj4gKwo+ICtpbnQgaTkxNV9nZW1fb2JqZWN0
X2ZpbGxfYmx0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB1MzIgdmFsdWUpOwo+ICsKPiArI2VuZGlmCj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9jbGllbnRfYmx0LmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fY2xpZW50X2JsdC5jCj4gbmV3
IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAuLjU0YjE1ZDIyZTMxMAo+IC0t
LSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9n
ZW1fY2xpZW50X2JsdC5jCj4gQEAgLTAsMCArMSwxMzEgQEAKPiArLy8gU1BEWC1MaWNlbnNlLUlk
ZW50aWZpZXI6IE1JVAo+ICsvKgo+ICsgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3Jh
dGlvbgo+ICsgKi8KPiArCj4gKyNpbmNsdWRlICIuLi9pOTE1X3NlbGZ0ZXN0LmgiCj4gKwo+ICsj
aW5jbHVkZSAiaWd0X2ZsdXNoX3Rlc3QuaCIKPiArI2luY2x1ZGUgIm1vY2tfZHJtLmgiCj4gKyNp
bmNsdWRlICJtb2NrX2NvbnRleHQuaCIKPiArCj4gK3N0YXRpYyBpbnQgaWd0X2NsaWVudF9maWxs
KHZvaWQgKmFyZykKPiArewo+ICsgICAgICAgc3RydWN0IGludGVsX2NvbnRleHQgKmNlID0gYXJn
Owo+ICsgICAgICAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBjZS0+Z2VtX2NvbnRl
eHQtPmk5MTU7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwo+ICsg
ICAgICAgc3RydWN0IHJuZF9zdGF0ZSBwcm5nOwo+ICsgICAgICAgSUdUX1RJTUVPVVQoZW5kKTsK
PiArICAgICAgIHUzMiAqdmFkZHI7Cj4gKyAgICAgICBpbnQgZXJyID0gMDsKPiArCj4gKyAgICAg
ICBwcmFuZG9tX3NlZWRfc3RhdGUoJnBybmcsIGk5MTVfc2VsZnRlc3QucmFuZG9tX3NlZWQpOwo+
ICsKPiArICAgICAgIGRvIHsKPiArICAgICAgICAgICAgICAgdTMyIHN6ID0gcHJhbmRvbV91MzJf
c3RhdGUoJnBybmcpICUgU1pfMzJNOwo+ICsgICAgICAgICAgICAgICB1MzIgdmFsID0gcHJhbmRv
bV91MzJfc3RhdGUoJnBybmcpOwo+ICsgICAgICAgICAgICAgICB1MzIgaTsKPiArCj4gKyAgICAg
ICAgICAgICAgIHN6ID0gcm91bmRfdXAoc3osIFBBR0VfU0laRSk7Cj4gKwo+ICsgICAgICAgICAg
ICAgICBwcl9pbmZvKCIlcyB3aXRoIHN6PSV4LCB2YWw9JXhcbiIsIF9fZnVuY19fLCBzeiwgdmFs
KTsKCnByX2RlYnVnID8gV29uJ3QgdGhpcyBiZSBxdWl0ZSBmcmVxdWVudD8KCj4gKyAgICAgICAg
ICAgICAgIG9iaiA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfaW50ZXJuYWwoaTkxNSwgc3opOwo+
ICsgICAgICAgICAgICAgICBpZiAoSVNfRVJSKG9iaikpIHsKPiArICAgICAgICAgICAgICAgICAg
ICAgICBlcnIgPSBQVFJfRVJSKG9iaik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgZ290byBl
cnJfZmx1c2g7Cj4gKyAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAgIHZhZGRy
ID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9tYXAob2JqLCBJOTE1X01BUF9XQik7Cj4gKyAgICAgICAg
ICAgICAgIGlmIChJU19FUlIodmFkZHIpKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgZXJy
ID0gUFRSX0VSUih2YWRkcik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgZ290byBlcnJfcHV0
Owo+ICsgICAgICAgICAgICAgICB9Cj4gKwo+ICsgICAgICAgICAgICAgICAvKgo+ICsgICAgICAg
ICAgICAgICAgKiBYWFg6IFRoZSBnb2FsIGlzIG1vdmUgdGhpcyB0byBnZXRfcGFnZXMsIHNvIHRy
eSB0byBkaXJ0eSB0aGUKPiArICAgICAgICAgICAgICAgICogQ1BVIGNhY2hlIGZpcnN0IHRvIGNo
ZWNrIHRoYXQgd2UgZG8gdGhlIHJlcXVpcmVkIGNsZmx1c2gKPiArICAgICAgICAgICAgICAgICog
YmVmb3JlIHNjaGVkdWxpbmcgdGhlIGJsdCBmb3IgIWxsYyBwbGF0Zm9ybXMuIFRoaXMgbWF0Y2hl
cwo+ICsgICAgICAgICAgICAgICAgKiBzb21lIHZlcnNpb24gb2YgcmVhbGl0eSB3aGVyZSBhdCBn
ZXRfcGFnZXMgdGhlIHBhZ2VzCj4gKyAgICAgICAgICAgICAgICAqIHRoZW1zZWx2ZXMgbWF5IG5v
dCB5ZXQgYmUgY29oZXJlbnQgd2l0aCB0aGUgR1BVKHN3YXAtaW4pLiBJZgo+ICsgICAgICAgICAg
ICAgICAgKiB3ZSBhcmUgbWlzc2luZyB0aGUgZmx1c2ggdGhlbiB3ZSBzaG91bGQgc2VlIHRoZSBz
dGFsZSBjYWNoZQo+ICsgICAgICAgICAgICAgICAgKiB2YWx1ZXMgYWZ0ZXIgd2UgZG8gdGhlIHNl
dF90b19jcHVfZG9tYWluIGFuZCBwaWNrIGl0IHVwIGFzIGEKPiArICAgICAgICAgICAgICAgICog
dGVzdCBmYWlsdXJlLgo+ICsgICAgICAgICAgICAgICAgKi8KPiArICAgICAgICAgICAgICAgbWVt
c2V0MzIodmFkZHIsIHZhbCBeIDB4ZGVhZGJlYWYsIG9iai0+YmFzZS5zaXplIC8gc2l6ZW9mKHUz
MikpOwo+ICsKPiArICAgICAgICAgICAgICAgaWYgKCEob2JqLT5jYWNoZV9jb2hlcmVudCAmIEk5
MTVfQk9fQ0FDSEVfQ09IRVJFTlRfRk9SX1dSSVRFKSkKPiArICAgICAgICAgICAgICAgICAgICAg
ICBvYmotPmNhY2hlX2RpcnR5ID0gdHJ1ZTsKPiArCj4gKyAgICAgICAgICAgICAgIGVyciA9IGk5
MTVfZ2VtX3NjaGVkdWxlX2ZpbGxfcGFnZXNfYmx0KG9iaiwgY2UsIG9iai0+bW0ucGFnZXMsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZv
YmotPm1tLnBhZ2Vfc2l6ZXMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHZhbCk7Cj4gKyAgICAgICAgICAgICAgIGlmIChlcnIpCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgZ290byBlcnJfdW5waW47Cj4gKwo+ICsgICAgICAgICAgICAg
ICAvKgo+ICsgICAgICAgICAgICAgICAgKiBYWFg6IEZvciBub3cgZG8gdGhlIHdhaXQgd2l0aG91
dCB0aGUgQktMIHRvIGVuc3VyZSB3ZSBkb24ndAo+ICsgICAgICAgICAgICAgICAgKiBkZWFkbG9j
ay4KPiArICAgICAgICAgICAgICAgICovCj4gKyAgICAgICAgICAgICAgIGVyciA9IGk5MTVfZ2Vt
X29iamVjdF93YWl0KG9iaiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgSTkxNV9XQUlUX0lOVEVSUlVQVElCTEUgfAo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBJOTE1X1dBSVRfQUxMLAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBNQVhfU0NIRURVTEVfVElNRU9VVCk7Cj4gKyAgICAgICAg
ICAgICAgIGlmIChlcnIpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgZ290byBlcnJfdW5waW47
Cj4gKwo+ICsgICAgICAgICAgICAgICBtdXRleF9sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4
KTsKPiArICAgICAgICAgICAgICAgZXJyID0gaTkxNV9nZW1fb2JqZWN0X3NldF90b19jcHVfZG9t
YWluKG9iaiwgZmFsc2UpOwo+ICsgICAgICAgICAgICAgICBtdXRleF91bmxvY2soJmk5MTUtPmRy
bS5zdHJ1Y3RfbXV0ZXgpOwo+ICsgICAgICAgICAgICAgICBpZiAoZXJyKQo+ICsgICAgICAgICAg
ICAgICAgICAgICAgIGdvdG8gZXJyX3VucGluOwo+ICsKPiArICAgICAgICAgICAgICAgZm9yIChp
ID0gMDsgaSA8IG9iai0+YmFzZS5zaXplIC8gc2l6ZW9mKHUzMik7ICsraSkgewo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIGlmICh2YWRkcltpXSAhPSB2YWwpIHsKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHByX2VycigidmFkZHJbJXVdPSV4LCBleHBlY3RlZD0leFxuIiwgaSwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWRkcltpXSwgdmFsKTsK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IC1FSU5WQUw7Cj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVycl91bnBpbjsKPiArICAgICAgICAgICAg
ICAgICAgICAgICB9Cj4gKyAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAgIGk5
MTVfZ2VtX29iamVjdF91bnBpbl9tYXAob2JqKTsKPiArCj4gKyAgICAgICAgICAgICAgIG11dGV4
X2xvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwo+ICsgICAgICAgICAgICAgICBfX2k5MTVf
Z2VtX29iamVjdF9yZWxlYXNlX3VubGVzc19hY3RpdmUob2JqKTsKPiArICAgICAgICAgICAgICAg
bXV0ZXhfdW5sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKPiArICAgICAgIH0gd2hpbGUg
KCF0aW1lX2FmdGVyKGppZmZpZXMsIGVuZCkpOwo+ICsKPiArICAgICAgIGdvdG8gZXJyX2ZsdXNo
Owo+ICsKPiArZXJyX3VucGluOgo+ICsgICAgICAgaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChv
YmopOwo+ICtlcnJfcHV0Ogo+ICsgICAgICAgbXV0ZXhfbG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9t
dXRleCk7Cj4gKyAgICAgICBfX2k5MTVfZ2VtX29iamVjdF9yZWxlYXNlX3VubGVzc19hY3RpdmUo
b2JqKTsKPiArICAgICAgIG11dGV4X3VubG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7Cj4g
K2Vycl9mbHVzaDoKPiArICAgICAgIG11dGV4X2xvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgp
Owo+ICsgICAgICAgaWd0X2ZsdXNoX3Rlc3QoaTkxNSwgSTkxNV9XQUlUX0xPQ0tFRCk7CgppZiAo
aWd0Li4uKQoJZXJyID0gLUVJTzsKCldoZW4gaXQgZmFpbHMsIHdlIGFyZSB3ZWRnZWQsIHNvIHBy
b21vdGUgdGhlIHJlc3VsdCB0byBhbiAtRUlPLgoKPiArICAgICAgIG11dGV4X3VubG9jaygmaTkx
NS0+ZHJtLnN0cnVjdF9tdXRleCk7Cj4gKwo+ICsgICAgICAgaWYgKGVyciA9PSAtRU5PTUVNKQo+
ICsgICAgICAgICAgICAgICBlcnIgPSAwOwo+ICsKPiArICAgICAgIHJldHVybiBlcnI7Cj4gK30K
ClNvIG11Y2ggd29yayB0byBkbyB0byByZWR1Y2UgbG9jayBjb3ZlcmFnZSBzbyB0aGF0IHdlIGNh
biBlbWl0IHJlcXVlc3RzCmZyb20gaW5zaWRlIG9iai0+bW0ubG9jay4gVGhpcyBjb2RlIGlzIHZl
cnkgbXVjaCBhIFdJUCBhbmQgbm90IG5lYXIKcmVhZHkgZm9yIGFjdHVhbCB1c2UsIGJ1dCBzZXJ2
ZXMgYSB2ZXJ5LCB2ZXJ5IHVzZWZ1bCBwdXJwb3NlIGluCnByb3ZpZGluZyBhIHRlc3QgYmVkIGZv
ciBpbmNyZW1lbnRhbCBpbXByb3ZlbWVudHMuCi1DaHJpcwpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9pbnRlbC1nZng=

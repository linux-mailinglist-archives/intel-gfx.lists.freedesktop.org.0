Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C6095F6B00
	for <lists+intel-gfx@lfdr.de>; Sun, 10 Nov 2019 19:58:49 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 745246E7CD;
	Sun, 10 Nov 2019 18:58:36 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E22626E7A2
 for <intel-gfx@lists.freedesktop.org>; Sun, 10 Nov 2019 18:58:29 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19151897-1500050 
 for multiple; Sun, 10 Nov 2019 18:58:13 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Sun, 10 Nov 2019 18:57:58 +0000
Message-Id: <20191110185806.17413-17-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191110185806.17413-1-chris@chris-wilson.co.uk>
References: <20191110185806.17413-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 17/25] drm/i915/selftests: Fill all the
 drm_vma_manager holes
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VG8gdGVzdCBtbWFwX29mZnNldF9leGhhdXN0aW9uLCB3ZSBmaXJzdCBoYXZlIHRvIGZpbGwgdGhl
IGVudGlyZSB2bWEKbWFuYWdlciBsZWF2aW5nIGEgc2luZ2xlIHBhZ2UuIERvbid0IGFzc3VtZSB0
aGF0IHRoZSB2bWEgbWFuYWdlciBpcyBub3QKYWxyZWFkeSBmcmFnbWVudCwgYW5kIGZpbGwgYWxs
IHRoZSBob2xlcy4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2ls
c29uLmNvLnVrPgpDYzogTWF0dGhldyBBdWxkIDxtYXR0aGV3LmF1bGRAaW50ZWwuY29tPgotLS0K
IC4uLi9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYyAgICB8IDQ1ICsrKysr
KysrKysrKysrLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAzMyBpbnNlcnRpb25zKCspLCAxMiBkZWxl
dGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3Rz
L2k5MTVfZ2VtX21tYW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkx
NV9nZW1fbW1hbi5jCmluZGV4IGNhYmY0NWIxNDAzZi4uYjMwNzU3NGUzZjNiIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYwpAQCAt
NjA3LDI4ICs2MDcsNDMgQEAgc3RhdGljIGludCBpZ3RfbW1hcF9vZmZzZXRfZXhoYXVzdGlvbih2
b2lkICphcmcpCiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBhcmc7CiAJc3RydWN0
IGRybV9tbSAqbW0gPSAmaTkxNS0+ZHJtLnZtYV9vZmZzZXRfbWFuYWdlci0+dm1fYWRkcl9zcGFj
ZV9tbTsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwotCXN0cnVjdCBkcm1fbW1f
bm9kZSByZXN2LCAqaG9sZTsKLQl1NjQgaG9sZV9zdGFydCwgaG9sZV9lbmQ7CisJc3RydWN0IGRy
bV9tbV9ub2RlICpob2xlLCAqbmV4dDsKIAlpbnQgbG9vcCwgZXJyOwogCiAJLyogRGlzYWJsZSBi
YWNrZ3JvdW5kIHJlYXBlciAqLwogCWRpc2FibGVfcmV0aXJlX3dvcmtlcihpOTE1KTsKIAlHRU1f
QlVHX09OKCFpOTE1LT5ndC5hd2FrZSk7CisJaW50ZWxfZ3RfcmV0aXJlX3JlcXVlc3RzKCZpOTE1
LT5ndCk7CisJaTkxNV9nZW1fZHJhaW5fZnJlZWRfb2JqZWN0cyhpOTE1KTsKIAogCS8qIFRyaW0g
dGhlIGRldmljZSBtbWFwIHNwYWNlIHRvIG9ubHkgYSBwYWdlICovCi0JbWVtc2V0KCZyZXN2LCAw
LCBzaXplb2YocmVzdikpOwotCWRybV9tbV9mb3JfZWFjaF9ob2xlKGhvbGUsIG1tLCBob2xlX3N0
YXJ0LCBob2xlX2VuZCkgewotCQlyZXN2LnN0YXJ0ID0gaG9sZV9zdGFydDsKLQkJcmVzdi5zaXpl
ID0gaG9sZV9lbmQgLSBob2xlX3N0YXJ0IC0gMTsgLyogUEFHRV9TSVpFIHVuaXRzICovCi0JCW1t
YXBfb2Zmc2V0X2xvY2soaTkxNSk7Ci0JCWVyciA9IGRybV9tbV9yZXNlcnZlX25vZGUobW0sICZy
ZXN2KTsKLQkJbW1hcF9vZmZzZXRfdW5sb2NrKGk5MTUpOworCW1tYXBfb2Zmc2V0X2xvY2soaTkx
NSk7CisJbG9vcCA9IDE7IC8qIFBBR0VfU0laRSB1bml0cyAqLworCWxpc3RfZm9yX2VhY2hfZW50
cnlfc2FmZShob2xlLCBuZXh0LCAmbW0tPmhvbGVfc3RhY2ssIGhvbGVfc3RhY2spIHsKKwkJc3Ry
dWN0IGRybV9tbV9ub2RlICpyZXN2OworCisJCXJlc3YgPSBremFsbG9jKHNpemVvZigqcmVzdiks
IEdGUF9OT1dBSVQpOworCQlpZiAoIXJlc3YpIHsKKwkJCWVyciA9IC1FTk9NRU07CisJCQlnb3Rv
IG91dF9wYXJrOworCQl9CisKKwkJcmVzdi0+c3RhcnQgPSBkcm1fbW1faG9sZV9ub2RlX3N0YXJ0
KGhvbGUpICsgbG9vcDsKKwkJcmVzdi0+c2l6ZSA9IGhvbGUtPmhvbGVfc2l6ZSAtIGxvb3A7CisJ
CXJlc3YtPmNvbG9yID0gLTF1bDsKKwkJbG9vcCA9IDA7CisKKwkJcHJfZGVidWcoIlJlc2Vydmlu
ZyBob2xlIFslbGx4ICsgJWxseF1cbiIsCisJCQkgcmVzdi0+c3RhcnQsIHJlc3YtPnNpemUpOwor
CisJCWVyciA9IGRybV9tbV9yZXNlcnZlX25vZGUobW0sIHJlc3YpOwogCQlpZiAoZXJyKSB7CiAJ
CQlwcl9lcnIoIkZhaWxlZCB0byB0cmltIFZNQSBtYW5hZ2VyLCBlcnI9JWRcbiIsIGVycik7CiAJ
CQlnb3RvIG91dF9wYXJrOwogCQl9Ci0JCWJyZWFrOwogCX0KKwlHRU1fQlVHX09OKCFsaXN0X2lz
X3Npbmd1bGFyKCZtbS0+aG9sZV9zdGFjaykpOworCW1tYXBfb2Zmc2V0X3VubG9jayhpOTE1KTsK
IAogCS8qIEp1c3QgZml0cyEgKi8KIAlpZiAoIWFzc2VydF9tbWFwX29mZnNldChpOTE1LCBQQUdF
X1NJWkUsIDApKSB7CkBAIC02ODUsOSArNzAwLDE1IEBAIHN0YXRpYyBpbnQgaWd0X21tYXBfb2Zm
c2V0X2V4aGF1c3Rpb24odm9pZCAqYXJnKQogCiBvdXQ6CiAJbW1hcF9vZmZzZXRfbG9jayhpOTE1
KTsKLQlkcm1fbW1fcmVtb3ZlX25vZGUoJnJlc3YpOwotCW1tYXBfb2Zmc2V0X3VubG9jayhpOTE1
KTsKIG91dF9wYXJrOgorCWRybV9tbV9mb3JfZWFjaF9ub2RlX3NhZmUoaG9sZSwgbmV4dCwgbW0p
IHsKKwkJaWYgKGhvbGUtPmNvbG9yICE9IC0xdWwpCisJCQljb250aW51ZTsKKworCQlkcm1fbW1f
cmVtb3ZlX25vZGUoaG9sZSk7CisJCWtmcmVlKGhvbGUpOworCX0KKwltbWFwX29mZnNldF91bmxv
Y2soaTkxNSk7CiAJcmVzdG9yZV9yZXRpcmVfd29ya2VyKGk5MTUpOwogCXJldHVybiBlcnI7CiBl
cnJfb2JqOgotLSAKMi4yNC4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9p
bnRlbC1nZng=

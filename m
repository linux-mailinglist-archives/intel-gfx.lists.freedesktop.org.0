Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C68226777B
	for <lists+intel-gfx@lfdr.de>; Sat, 13 Jul 2019 03:10:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3CC066E3AA;
	Sat, 13 Jul 2019 01:10:19 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 620F16E369
 for <intel-gfx@lists.freedesktop.org>; Sat, 13 Jul 2019 01:09:45 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 12 Jul 2019 18:09:44 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,484,1557212400"; d="scan'208";a="341850910"
Received: from dhoyan-mobl.amr.corp.intel.com (HELO ldmartin-desk1.intel.com)
 ([10.252.197.100])
 by orsmga005.jf.intel.com with ESMTP; 12 Jul 2019 18:09:44 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 12 Jul 2019 18:09:22 -0700
Message-Id: <20190713010940.17711-5-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190713010940.17711-1-lucas.demarchi@intel.com>
References: <20190713010940.17711-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 04/22] drm/i915/tgl: Add hpd interrupt handling
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWRkIGhvdGRwbHVnIGRldGVjdGlvbiBmb3IgYWxsIHBvcnRzIG9uIFRHUC4gaWNwX2hwZF9kZXRl
Y3Rpb25fc2V0dXAoKQppcyByZWZhY3RvcmVkIHRvIGJlIHNoYXJlZCB3aXRoIFRHUC4KCldoaWxl
IHdlIGluY3JlYXNlIHRoZSBudW1iZXIgb2YgcGlucywgYWRkIGEgQlVJTERfQlVHX09OKCkgdG8g
YXZvaWQKZ29pbmcgb3ZlciB0aGUgbnVtYmVyIG9mIGJpdHMgYWxsb3dlZC4KCkNjOiBKb3NlIFNv
dXphIDxqb3NlLnNvdXphQGludGVsLmNvbT4KQ2M6IFJvZHJpZ28gVml2aSA8cm9kcmlnby52aXZp
QGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogTHVjYXMgRGUgTWFyY2hpIDxsdWNhcy5kZW1hcmNo
aUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9ob3Rw
bHVnLmMgfCAgIDYgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgICAgICAg
ICAgfCAgIDQgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYyAgICAgICAgICAgICAg
fCAxMjggKysrKysrKysrKysrKysrKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcu
aCAgICAgICAgICAgICAgfCAgMjggKysrLQogNCBmaWxlcyBjaGFuZ2VkLCAxNTQgaW5zZXJ0aW9u
cygrKSwgMTIgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9ob3RwbHVnLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2hvdHBsdWcuYwppbmRleCBlYTNkZTRhY2M4NTAuLmE3ODMzZjQ1ZGM0ZCAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9ob3RwbHVnLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9ob3RwbHVnLmMKQEAgLTEwNCw2ICsxMDQs
MTIgQEAgZW51bSBocGRfcGluIGludGVsX2hwZF9waW5fZGVmYXVsdChzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYsCiAJCWlmIChJU19DTkxfV0lUSF9QT1JUX0YoZGV2X3ByaXYpKQog
CQkJcmV0dXJuIEhQRF9QT1JUX0U7CiAJCXJldHVybiBIUERfUE9SVF9GOworCWNhc2UgUE9SVF9H
OgorCQlyZXR1cm4gSFBEX1BPUlRfRzsKKwljYXNlIFBPUlRfSDoKKwkJcmV0dXJuIEhQRF9QT1JU
X0g7CisJY2FzZSBQT1JUX0k6CisJCXJldHVybiBIUERfUE9SVF9JOwogCWRlZmF1bHQ6CiAJCU1J
U1NJTkdfQ0FTRShwb3J0KTsKIAkJcmV0dXJuIEhQRF9OT05FOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmgKaW5kZXggY2Y3ZTkyY2E3MmU5Li4wNjkzMzdmMTE4NzIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuaApAQCAtMTUzLDYgKzE1MywxMCBAQCBlbnVtIGhwZF9waW4gewogCUhQRF9QT1JUX0QsCiAJ
SFBEX1BPUlRfRSwKIAlIUERfUE9SVF9GLAorCUhQRF9QT1JUX0csCisJSFBEX1BPUlRfSCwKKwlI
UERfUE9SVF9JLAorCiAJSFBEX05VTV9QSU5TCiB9OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2lycS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYwpp
bmRleCA3YzViYTVjYmVhMzQuLmE3YTkwNjc0ZGI4OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9pcnEuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5j
CkBAIC0xNDgsNiArMTQ4LDE4IEBAIHN0YXRpYyBjb25zdCB1MzIgaHBkX21jY1tIUERfTlVNX1BJ
TlNdID0gewogCVtIUERfUE9SVF9DXSA9IFNERV9UQzFfSE9UUExVR19JQ1AKIH07CiAKK3N0YXRp
YyBjb25zdCB1MzIgaHBkX3RncFtIUERfTlVNX1BJTlNdID0geworCVtIUERfUE9SVF9BXSA9IFNE
RV9ERElBX0hPVFBMVUdfSUNQLAorCVtIUERfUE9SVF9CXSA9IFNERV9ERElCX0hPVFBMVUdfSUNQ
LAorCVtIUERfUE9SVF9DXSA9IFNERV9ERElDX0hPVFBMVUdfVEdQLAorCVtIUERfUE9SVF9EXSA9
IFNERV9UQzFfSE9UUExVR19JQ1AsCisJW0hQRF9QT1JUX0VdID0gU0RFX1RDMl9IT1RQTFVHX0lD
UCwKKwlbSFBEX1BPUlRfRl0gPSBTREVfVEMzX0hPVFBMVUdfSUNQLAorCVtIUERfUE9SVF9HXSA9
IFNERV9UQzRfSE9UUExVR19JQ1AsCisJW0hQRF9QT1JUX0hdID0gU0RFX1RDNV9IT1RQTFVHX1RH
UCwKKwlbSFBEX1BPUlRfSV0gPSBTREVfVEM2X0hPVFBMVUdfVEdQLAorfTsKKwogc3RhdGljIHZv
aWQgZ2VuM19pcnFfcmVzZXQoc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlLCBpOTE1X3JlZ190
IGltciwKIAkJCSAgIGk5MTVfcmVnX3QgaWlyLCBpOTE1X3JlZ190IGllcikKIHsKQEAgLTE3MDYs
NiArMTcxOCw0MCBAQCBzdGF0aWMgYm9vbCBpY3BfdGNfcG9ydF9ob3RwbHVnX2xvbmdfZGV0ZWN0
KGVudW0gaHBkX3BpbiBwaW4sIHUzMiB2YWwpCiAJfQogfQogCitzdGF0aWMgYm9vbCB0Z3BfZGRp
X3BvcnRfaG90cGx1Z19sb25nX2RldGVjdChlbnVtIGhwZF9waW4gcGluLCB1MzIgdmFsKQorewor
CXN3aXRjaCAocGluKSB7CisJY2FzZSBIUERfUE9SVF9BOgorCQlyZXR1cm4gdmFsICYgSUNQX0RE
SUFfSFBEX0xPTkdfREVURUNUOworCWNhc2UgSFBEX1BPUlRfQjoKKwkJcmV0dXJuIHZhbCAmIElD
UF9ERElCX0hQRF9MT05HX0RFVEVDVDsKKwljYXNlIEhQRF9QT1JUX0M6CisJCXJldHVybiB2YWwg
JiBUR1BfRERJQ19IUERfTE9OR19ERVRFQ1Q7CisJZGVmYXVsdDoKKwkJcmV0dXJuIGZhbHNlOwor
CX0KK30KKworc3RhdGljIGJvb2wgdGdwX3RjX3BvcnRfaG90cGx1Z19sb25nX2RldGVjdChlbnVt
IGhwZF9waW4gcGluLCB1MzIgdmFsKQoreworCXN3aXRjaCAocGluKSB7CisJY2FzZSBIUERfUE9S
VF9EOgorCQlyZXR1cm4gdmFsICYgSUNQX1RDX0hQRF9MT05HX0RFVEVDVChQT1JUX1RDMSk7CisJ
Y2FzZSBIUERfUE9SVF9FOgorCQlyZXR1cm4gdmFsICYgSUNQX1RDX0hQRF9MT05HX0RFVEVDVChQ
T1JUX1RDMik7CisJY2FzZSBIUERfUE9SVF9GOgorCQlyZXR1cm4gdmFsICYgSUNQX1RDX0hQRF9M
T05HX0RFVEVDVChQT1JUX1RDMyk7CisJY2FzZSBIUERfUE9SVF9HOgorCQlyZXR1cm4gdmFsICYg
SUNQX1RDX0hQRF9MT05HX0RFVEVDVChQT1JUX1RDNCk7CisJY2FzZSBIUERfUE9SVF9IOgorCQly
ZXR1cm4gdmFsICYgSUNQX1RDX0hQRF9MT05HX0RFVEVDVChQT1JUX1RDNSk7CisJY2FzZSBIUERf
UE9SVF9JOgorCQlyZXR1cm4gdmFsICYgSUNQX1RDX0hQRF9MT05HX0RFVEVDVChQT1JUX1RDNik7
CisJZGVmYXVsdDoKKwkJcmV0dXJuIGZhbHNlOworCX0KK30KKwogc3RhdGljIGJvb2wgc3B0X3Bv
cnRfaG90cGx1ZzJfbG9uZ19kZXRlY3QoZW51bSBocGRfcGluIHBpbiwgdTMyIHZhbCkKIHsKIAlz
d2l0Y2ggKHBpbikgewpAQCAtMTc4NSw2ICsxODMxLDggQEAgc3RhdGljIHZvaWQgaW50ZWxfZ2V0
X2hwZF9waW5zKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIHsKIAllbnVtIGhw
ZF9waW4gcGluOwogCisJQlVJTERfQlVHX09OKHNpemVvZihpbnQpICogOCA8IEhQRF9OVU1fUElO
Uyk7CisKIAlmb3JfZWFjaF9ocGRfcGluKHBpbikgewogCQlpZiAoKGhwZFtwaW5dICYgaG90cGx1
Z190cmlnZ2VyKSA9PSAwKQogCQkJY29udGludWU7CkBAIC0yNTQ5LDYgKzI1OTcsNDMgQEAgc3Rh
dGljIHZvaWQgaWNwX2lycV9oYW5kbGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
diwgdTMyIHBjaF9paXIsCiAJCWdtYnVzX2lycV9oYW5kbGVyKGRldl9wcml2KTsKIH0KIAorc3Rh
dGljIHZvaWQgdGdwX2lycV9oYW5kbGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
diwgdTMyIHBjaF9paXIpCit7CisJdTMyIGRkaV9ob3RwbHVnX3RyaWdnZXIgPSBwY2hfaWlyICYg
U0RFX0RESV9NQVNLX1RHUDsKKwl1MzIgdGNfaG90cGx1Z190cmlnZ2VyID0gcGNoX2lpciAmIFNE
RV9UQ19NQVNLX1RHUDsKKwl1MzIgcGluX21hc2sgPSAwLCBsb25nX21hc2sgPSAwOworCisJaWYg
KGRkaV9ob3RwbHVnX3RyaWdnZXIpIHsKKwkJdTMyIGRpZ19ob3RwbHVnX3JlZzsKKworCQlkaWdf
aG90cGx1Z19yZWcgPSBJOTE1X1JFQUQoU0hPVFBMVUdfQ1RMX0RESSk7CisJCUk5MTVfV1JJVEUo
U0hPVFBMVUdfQ1RMX0RESSwgZGlnX2hvdHBsdWdfcmVnKTsKKworCQlpbnRlbF9nZXRfaHBkX3Bp
bnMoZGV2X3ByaXYsICZwaW5fbWFzaywgJmxvbmdfbWFzaywKKwkJCQkgICBkZGlfaG90cGx1Z190
cmlnZ2VyLAorCQkJCSAgIGRpZ19ob3RwbHVnX3JlZywgaHBkX3RncCwKKwkJCQkgICB0Z3BfZGRp
X3BvcnRfaG90cGx1Z19sb25nX2RldGVjdCk7CisJfQorCisJaWYgKHRjX2hvdHBsdWdfdHJpZ2dl
cikgeworCQl1MzIgZGlnX2hvdHBsdWdfcmVnOworCisJCWRpZ19ob3RwbHVnX3JlZyA9IEk5MTVf
UkVBRChTSE9UUExVR19DVExfVEMpOworCQlJOTE1X1dSSVRFKFNIT1RQTFVHX0NUTF9UQywgZGln
X2hvdHBsdWdfcmVnKTsKKworCQlpbnRlbF9nZXRfaHBkX3BpbnMoZGV2X3ByaXYsICZwaW5fbWFz
aywgJmxvbmdfbWFzaywKKwkJCQkgICB0Y19ob3RwbHVnX3RyaWdnZXIsCisJCQkJICAgZGlnX2hv
dHBsdWdfcmVnLCBocGRfdGdwLAorCQkJCSAgIHRncF90Y19wb3J0X2hvdHBsdWdfbG9uZ19kZXRl
Y3QpOworCX0KKworCWlmIChwaW5fbWFzaykKKwkJaW50ZWxfaHBkX2lycV9oYW5kbGVyKGRldl9w
cml2LCBwaW5fbWFzaywgbG9uZ19tYXNrKTsKKworCWlmIChwY2hfaWlyICYgU0RFX0dNQlVTX0lD
UCkKKwkJZ21idXNfaXJxX2hhbmRsZXIoZGV2X3ByaXYpOworfQorCiBzdGF0aWMgdm9pZCBzcHRf
aXJxX2hhbmRsZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCB1MzIgcGNoX2lp
cikKIHsKIAl1MzIgaG90cGx1Z190cmlnZ2VyID0gcGNoX2lpciAmIFNERV9IT1RQTFVHX01BU0tf
U1BUICYKQEAgLTI5NjgsNyArMzA1Myw5IEBAIGdlbjhfZGVfaXJxX2hhbmRsZXIoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCB1MzIgbWFzdGVyX2N0bCkKIAkJCUk5MTVfV1JJVEUo
U0RFSUlSLCBpaXIpOwogCQkJcmV0ID0gSVJRX0hBTkRMRUQ7CiAKLQkJCWlmIChJTlRFTF9QQ0hf
VFlQRShkZXZfcHJpdikgPj0gUENIX01DQykKKwkJCWlmIChJTlRFTF9QQ0hfVFlQRShkZXZfcHJp
dikgPj0gUENIX1RHUCkKKwkJCQl0Z3BfaXJxX2hhbmRsZXIoZGV2X3ByaXYsIGlpcik7CisJCQll
bHNlIGlmIChJTlRFTF9QQ0hfVFlQRShkZXZfcHJpdikgPj0gUENIX01DQykKIAkJCQlpY3BfaXJx
X2hhbmRsZXIoZGV2X3ByaXYsIGlpciwgaHBkX21jYyk7CiAJCQllbHNlIGlmIChJTlRFTF9QQ0hf
VFlQRShkZXZfcHJpdikgPj0gUENIX0lDUCkKIAkJCQlpY3BfaXJxX2hhbmRsZXIoZGV2X3ByaXYs
IGlpciwgaHBkX2ljcCk7CkBAIC0zNzY1LDIwICszODUyLDE4IEBAIHN0YXRpYyB2b2lkIGlieF9o
cGRfaXJxX3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlpYnhfaHBk
X2RldGVjdGlvbl9zZXR1cChkZXZfcHJpdik7CiB9CiAKLXN0YXRpYyB2b2lkIGljcF9ocGRfZGV0
ZWN0aW9uX3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3N0YXRpYyB2
b2lkIGljcF9ocGRfZGV0ZWN0aW9uX3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiwKKwkJCQkgICAgdTMyIGRkaV9ob3RwbHVnX2VuYWJsZV9tYXNrLAorCQkJCSAgICB1MzIg
dGNfaG90cGx1Z19lbmFibGVfbWFzaykKIHsKIAl1MzIgaG90cGx1ZzsKIAogCWhvdHBsdWcgPSBJ
OTE1X1JFQUQoU0hPVFBMVUdfQ1RMX0RESSk7Ci0JaG90cGx1ZyB8PSBJQ1BfRERJQV9IUERfRU5B
QkxFIHwKLQkJICAgSUNQX0RESUJfSFBEX0VOQUJMRTsKKwlob3RwbHVnIHw9IGRkaV9ob3RwbHVn
X2VuYWJsZV9tYXNrOwogCUk5MTVfV1JJVEUoU0hPVFBMVUdfQ1RMX0RESSwgaG90cGx1Zyk7CiAK
IAlob3RwbHVnID0gSTkxNV9SRUFEKFNIT1RQTFVHX0NUTF9UQyk7Ci0JaG90cGx1ZyB8PSBJQ1Bf
VENfSFBEX0VOQUJMRShQT1JUX1RDMSkgfAotCQkgICBJQ1BfVENfSFBEX0VOQUJMRShQT1JUX1RD
MikgfAotCQkgICBJQ1BfVENfSFBEX0VOQUJMRShQT1JUX1RDMykgfAotCQkgICBJQ1BfVENfSFBE
X0VOQUJMRShQT1JUX1RDNCk7CisJaG90cGx1ZyB8PSB0Y19ob3RwbHVnX2VuYWJsZV9tYXNrOwog
CUk5MTVfV1JJVEUoU0hPVFBMVUdfQ1RMX1RDLCBob3RwbHVnKTsKIH0KIApAQCAtMzc5MSw3ICsz
ODc2LDIxIEBAIHN0YXRpYyB2b2lkIGljcF9ocGRfaXJxX3NldHVwKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdikKIAogCWlieF9kaXNwbGF5X2ludGVycnVwdF91cGRhdGUoZGV2X3By
aXYsIGhvdHBsdWdfaXJxcywgZW5hYmxlZF9pcnFzKTsKIAotCWljcF9ocGRfZGV0ZWN0aW9uX3Nl
dHVwKGRldl9wcml2KTsKKwlpY3BfaHBkX2RldGVjdGlvbl9zZXR1cChkZXZfcHJpdiwgSUNQX0RE
SV9IUERfRU5BQkxFX01BU0ssCisJCQkJSUNQX1RDX0hQRF9FTkFCTEVfTUFTSyk7Cit9CisKK3N0
YXRpYyB2b2lkIHRncF9ocGRfaXJxX3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdikKK3sKKwl1MzIgaG90cGx1Z19pcnFzLCBlbmFibGVkX2lycXM7CisKKwlob3RwbHVnX2ly
cXMgPSBTREVfRERJX01BU0tfVEdQIHwgU0RFX1RDX01BU0tfVEdQOworCWVuYWJsZWRfaXJxcyA9
IGludGVsX2hwZF9lbmFibGVkX2lycXMoZGV2X3ByaXYsIGhwZF90Z3ApOworCisJaWJ4X2Rpc3Bs
YXlfaW50ZXJydXB0X3VwZGF0ZShkZXZfcHJpdiwgaG90cGx1Z19pcnFzLCBlbmFibGVkX2lycXMp
OworCisJaWNwX2hwZF9kZXRlY3Rpb25fc2V0dXAoZGV2X3ByaXYsIFRHUF9ERElfSFBEX0VOQUJM
RV9NQVNLLAorCQkJCVRHUF9UQ19IUERfRU5BQkxFX01BU0spOwogfQogCiBzdGF0aWMgdm9pZCBn
ZW4xMV9ocGRfZGV0ZWN0aW9uX3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dikKQEAgLTM4MjgsNyArMzkyNyw5IEBAIHN0YXRpYyB2b2lkIGdlbjExX2hwZF9pcnFfc2V0dXAo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCiAJZ2VuMTFfaHBkX2RldGVjdGlv
bl9zZXR1cChkZXZfcHJpdik7CiAKLQlpZiAoSU5URUxfUENIX1RZUEUoZGV2X3ByaXYpID49IFBD
SF9JQ1ApCisJaWYgKElOVEVMX1BDSF9UWVBFKGRldl9wcml2KSA+PSBQQ0hfVEdQKQorCQl0Z3Bf
aHBkX2lycV9zZXR1cChkZXZfcHJpdik7CisJZWxzZSBpZiAoSU5URUxfUENIX1RZUEUoZGV2X3By
aXYpID49IFBDSF9JQ1ApCiAJCWljcF9ocGRfaXJxX3NldHVwKGRldl9wcml2KTsKIH0KIApAQCAt
NDI3OCw3ICs0Mzc5LDEyIEBAIHN0YXRpYyB2b2lkIGljcF9pcnFfcG9zdGluc3RhbGwoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCWdlbjNfYXNzZXJ0X2lpcl9pc196ZXJvKCZk
ZXZfcHJpdi0+dW5jb3JlLCBTREVJSVIpOwogCUk5MTVfV1JJVEUoU0RFSU1SLCB+bWFzayk7CiAK
LQlpY3BfaHBkX2RldGVjdGlvbl9zZXR1cChkZXZfcHJpdik7CisJaWYgKEhBU19QQ0hfVEdQKGRl
dl9wcml2KSkKKwkJaWNwX2hwZF9kZXRlY3Rpb25fc2V0dXAoZGV2X3ByaXYsIFRHUF9ERElfSFBE
X0VOQUJMRV9NQVNLLAorCQkJCQlUR1BfVENfSFBEX0VOQUJMRV9NQVNLKTsKKwllbHNlCisJCWlj
cF9ocGRfZGV0ZWN0aW9uX3NldHVwKGRldl9wcml2LCBJQ1BfRERJX0hQRF9FTkFCTEVfTUFTSywK
KwkJCQkJSUNQX1RDX0hQRF9FTkFCTEVfTUFTSyk7CiB9CiAKIHN0YXRpYyB2b2lkIGdlbjExX2ly
cV9wb3N0aW5zdGFsbChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9yZWcuaAppbmRleCBkODczZDlmYmJmMGUuLmZiYzUxNDZhNTkzMSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X3JlZy5oCkBAIC03ODY4LDEyICs3ODY4LDE1IEBAIGVudW0gewogCQkJCSBTREVf
RkRJX1JYQl9DUFQgfCBcCiAJCQkJIFNERV9GRElfUlhBX0NQVCkKIAotLyogc291dGggZGlzcGxh
eSBlbmdpbmUgaW50ZXJydXB0OiBJQ1AgKi8KKy8qIHNvdXRoIGRpc3BsYXkgZW5naW5lIGludGVy
cnVwdDogSUNQL1RHUCAqLworI2RlZmluZSBTREVfVEM2X0hPVFBMVUdfVEdQCQkoMSA8PCAyOSkK
KyNkZWZpbmUgU0RFX1RDNV9IT1RQTFVHX1RHUAkJKDEgPDwgMjgpCiAjZGVmaW5lIFNERV9UQzRf
SE9UUExVR19JQ1AJCSgxIDw8IDI3KQogI2RlZmluZSBTREVfVEMzX0hPVFBMVUdfSUNQCQkoMSA8
PCAyNikKICNkZWZpbmUgU0RFX1RDMl9IT1RQTFVHX0lDUAkJKDEgPDwgMjUpCiAjZGVmaW5lIFNE
RV9UQzFfSE9UUExVR19JQ1AJCSgxIDw8IDI0KQogI2RlZmluZSBTREVfR01CVVNfSUNQCQkJKDEg
PDwgMjMpCisjZGVmaW5lIFNERV9ERElDX0hPVFBMVUdfVEdQCQkoMSA8PCAxOCkKICNkZWZpbmUg
U0RFX0RESUJfSE9UUExVR19JQ1AJCSgxIDw8IDE3KQogI2RlZmluZSBTREVfRERJQV9IT1RQTFVH
X0lDUAkJKDEgPDwgMTYpCiAjZGVmaW5lIFNERV9UQ19IT1RQTFVHX0lDUCh0Y19wb3J0KQkoMSA8
PCAoKHRjX3BvcnQpICsgMjQpKQpAQCAtNzg4NCw2ICs3ODg3LDExIEBAIGVudW0gewogCQkJCQkg
U0RFX1RDM19IT1RQTFVHX0lDUCB8CVwKIAkJCQkJIFNERV9UQzJfSE9UUExVR19JQ1AgfAlcCiAJ
CQkJCSBTREVfVEMxX0hPVFBMVUdfSUNQKQorI2RlZmluZSBTREVfRERJX01BU0tfVEdQCQkoU0RF
X0RESUNfSE9UUExVR19UR1AgfCBcCisJCQkJCSBTREVfRERJX01BU0tfSUNQKQorI2RlZmluZSBT
REVfVENfTUFTS19UR1AJCQkoU0RFX1RDNl9IT1RQTFVHX1RHUCB8CVwKKwkJCQkJIFNERV9UQzVf
SE9UUExVR19UR1AgfAlcCisJCQkJCSBTREVfVENfTUFTS19JQ1ApCiAKICNkZWZpbmUgU0RFSVNS
ICBfTU1JTygweGM0MDAwKQogI2RlZmluZSBTREVJTVIgIF9NTUlPKDB4YzQwMDQpCkBAIC03OTUx
LDYgKzc5NTksMTIgQEAgZW51bSB7CiAgKi8KIAogI2RlZmluZSBTSE9UUExVR19DVExfRERJCQkJ
X01NSU8oMHhjNDAzMCkKKyNkZWZpbmUgICBUR1BfRERJQ19IUERfRU5BQkxFCQkJKDEgPDwgMTEp
CisjZGVmaW5lICAgVEdQX0RESUNfSFBEX1NUQVRVU19NQVNLCQkoMyA8PCA4KQorI2RlZmluZSAg
IFRHUF9ERElDX0hQRF9OT19ERVRFQ1QJCSgwIDw8IDgpCisjZGVmaW5lICAgVEdQX0RESUNfSFBE
X1NIT1JUX0RFVEVDVAkJKDEgPDwgOCkKKyNkZWZpbmUgICBUR1BfRERJQ19IUERfTE9OR19ERVRF
Q1QJCSgyIDw8IDgpCisjZGVmaW5lICAgVEdQX0RESUNfSFBEX1NIT1JUX0xPTkdfREVURUNUCSgz
IDw8IDgpCiAjZGVmaW5lICAgSUNQX0RESUJfSFBEX0VOQUJMRQkJCSgxIDw8IDcpCiAjZGVmaW5l
ICAgSUNQX0RESUJfSFBEX1NUQVRVU19NQVNLCQkoMyA8PCA0KQogI2RlZmluZSAgIElDUF9ERElC
X0hQRF9OT19ERVRFQ1QJCSgwIDw8IDQpCkBAIC04MDc0LDYgKzgwODgsMTggQEAgZW51bSB7CiAj
ZGVmaW5lICAgSUNQX1RDX0hQRF9MT05HX0RFVEVDVCh0Y19wb3J0KQkoMiA8PCAodGNfcG9ydCkg
KiA0KQogI2RlZmluZSAgIElDUF9UQ19IUERfU0hPUlRfREVURUNUKHRjX3BvcnQpCSgxIDw8ICh0
Y19wb3J0KSAqIDQpCiAKKyNkZWZpbmUgSUNQX0RESV9IUERfRU5BQkxFX01BU0sJCShJQ1BfRERJ
Ql9IUERfRU5BQkxFIHwJXAorCQkJCQkgSUNQX0RESUFfSFBEX0VOQUJMRSkKKyNkZWZpbmUgSUNQ
X1RDX0hQRF9FTkFCTEVfTUFTSwkJKElDUF9UQ19IUERfRU5BQkxFKFBPUlRfVEM0KSB8IFwKKwkJ
CQkJIElDUF9UQ19IUERfRU5BQkxFKFBPUlRfVEMzKSB8IFwKKwkJCQkJIElDUF9UQ19IUERfRU5B
QkxFKFBPUlRfVEMyKSB8IFwKKwkJCQkJIElDUF9UQ19IUERfRU5BQkxFKFBPUlRfVEMxKSkKKyNk
ZWZpbmUgVEdQX0RESV9IUERfRU5BQkxFX01BU0sJCShUR1BfRERJQ19IUERfRU5BQkxFIHwJXAor
CQkJCQkgSUNQX0RESV9IUERfRU5BQkxFX01BU0spCisjZGVmaW5lIFRHUF9UQ19IUERfRU5BQkxF
X01BU0sJCShJQ1BfVENfSFBEX0VOQUJMRShQT1JUX1RDNikgfCBcCisJCQkJCSBJQ1BfVENfSFBE
X0VOQUJMRShQT1JUX1RDNSkgfCBcCisJCQkJCSBJQ1BfVENfSFBEX0VOQUJMRV9NQVNLKQorCiAj
ZGVmaW5lIF9QQ0hfRFBMTF9BICAgICAgICAgICAgICAweGM2MDE0CiAjZGVmaW5lIF9QQ0hfRFBM
TF9CICAgICAgICAgICAgICAweGM2MDE4CiAjZGVmaW5lIFBDSF9EUExMKHBsbCkgX01NSU8oKHBs
bCkgPT0gMCA/IF9QQ0hfRFBMTF9BIDogX1BDSF9EUExMX0IpCi0tIAoyLjIxLjAKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5n
IGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DF2FD37585D
	for <lists+intel-gfx@lfdr.de>; Thu,  6 May 2021 18:19:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D67106ECD1;
	Thu,  6 May 2021 16:19:51 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D64F56ECCB
 for <intel-gfx@lists.freedesktop.org>; Thu,  6 May 2021 16:19:50 +0000 (UTC)
IronPort-SDR: elt5ax5YIxxL7CbxEFYYOC4fxMb53AAnELtSnYOJCL6z+0BONMg32io82XlmhbITo90Gsdhfkm
 /F+P7A770TOw==
X-IronPort-AV: E=McAfee;i="6200,9189,9976"; a="195395951"
X-IronPort-AV: E=Sophos;i="5.82,277,1613462400"; d="scan'208";a="195395951"
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by fmsmga102.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 06 May 2021 09:19:49 -0700
IronPort-SDR: qHjutsSXmsCDTV9F6v4t0Pfx30P9Wd65d8eD6VO69bEFgef3kGvFsr0wEPXKZT2gp6EB6UCE5L
 QmtZY2qw36mw==
X-IronPort-AV: E=Sophos;i="5.82,277,1613462400"; d="scan'208";a="407072206"
Received: from ideak-desk.fi.intel.com ([10.237.68.141])
 by orsmga002-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 06 May 2021 09:19:48 -0700
From: Imre Deak <imre.deak@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu,  6 May 2021 19:19:28 +0300
Message-Id: <20210506161930.309688-9-imre.deak@intel.com>
X-Mailer: git-send-email 2.27.0
In-Reply-To: <20210506161930.309688-1-imre.deak@intel.com>
References: <20210506161930.309688-1-imre.deak@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 08/10] drm/i915/adl_p: Disable support for
 90/270 FB rotation
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIGxhdGVzdCBzcGVjaWZpY2F0aW9uIHJlbW92ZWQgdGhlIHN1cHBvcnQgZm9yIDkwLzI3MCBG
QiByb3RhdGlvbiBvbgpBRExfUCwgZXZlbiB0aG91Z2ggbGVnYWN5IFktdGlsZWQgc3VyZmFjZXMg
YXJlIHN1cHBvcnRlZC4gQWxpZ24gdGhlIGNvZGUKYWNjb3JkaW5nbHkuCgpTaWduZWQtb2ZmLWJ5
OiBJbXJlIERlYWsgPGltcmUuZGVha0BpbnRlbC5jb20+ClJldmlld2VkLWJ5OiBWaWxsZSBTeXJq
w6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIC4uLi9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCAgICB8ICA2ICsrKy0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZiLmMgICAgICAgfCAyNCArKysrKysrKysrKysrKystLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZiLmggICAgICAgfCAgMiArKwog
Li4uL2RybS9pOTE1L2Rpc3BsYXkvc2tsX3VuaXZlcnNhbF9wbGFuZS5jICAgIHwgIDMgKy0tCiA0
IGZpbGVzIGNoYW5nZWQsIDI2IGluc2VydGlvbnMoKyksIDkgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAppbmRl
eCA1ZjRjM2U1YmViMmY0Li45YzBhZGZjNjBjNmZiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaApAQCAtMTI2LDggKzEyNiwxMCBA
QCBzdHJ1Y3QgaW50ZWxfZnJhbWVidWZmZXIgewogCiAJLyogUGFyYW1zIHRvIHJlbWFwIHRoZSBG
QiBwYWdlcyBhbmQgcHJvZ3JhbSB0aGUgcGxhbmUgcmVnaXN0ZXJzIGluIGVhY2ggdmlldy4gKi8K
IAlzdHJ1Y3QgaW50ZWxfZmJfdmlldyBub3JtYWxfdmlldzsKLQlzdHJ1Y3QgaW50ZWxfZmJfdmll
dyByb3RhdGVkX3ZpZXc7Ci0Jc3RydWN0IGludGVsX2ZiX3ZpZXcgcmVtYXBwZWRfdmlldzsKKwl1
bmlvbiB7CisJCXN0cnVjdCBpbnRlbF9mYl92aWV3IHJvdGF0ZWRfdmlldzsKKwkJc3RydWN0IGlu
dGVsX2ZiX3ZpZXcgcmVtYXBwZWRfdmlldzsKKwl9OwogCiAJc3RydWN0IGk5MTVfYWRkcmVzc19z
cGFjZSAqZHB0X3ZtOwogfTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZmIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZmIuYwpp
bmRleCAyMTI3MWE2OTc2ZjE0Li45Mjc0NDBlZDE0ZjQ4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZiLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9mYi5jCkBAIC03MzUsNiArNzM1LDE1IEBAIHN0YXRpYyB2b2lkIGludGVs
X2ZiX3ZpZXdfaW5pdChzdHJ1Y3QgaW50ZWxfZmJfdmlldyAqdmlldywgZW51bSBpOTE1X2dndHRf
dmlld190CiAJdmlldy0+Z3R0LnR5cGUgPSB2aWV3X3R5cGU7CiB9CiAKK2Jvb2wgaW50ZWxfZmJf
c3VwcG9ydHNfOTBfMjcwX3JvdGF0aW9uKGNvbnN0IHN0cnVjdCBpbnRlbF9mcmFtZWJ1ZmZlciAq
ZmIpCit7CisJaWYgKERJU1BMQVlfVkVSKHRvX2k5MTUoZmItPmJhc2UuZGV2KSkgPj0gMTMpCisJ
CXJldHVybiBmYWxzZTsKKworCXJldHVybiBmYi0+YmFzZS5tb2RpZmllciA9PSBJOTE1X0ZPUk1B
VF9NT0RfWV9USUxFRCB8fAorCSAgICAgICBmYi0+YmFzZS5tb2RpZmllciA9PSBJOTE1X0ZPUk1B
VF9NT0RfWWZfVElMRUQ7Cit9CisKIGludCBpbnRlbF9maWxsX2ZiX2luZm8oc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmk5MTUsIHN0cnVjdCBpbnRlbF9mcmFtZWJ1ZmZlciAqZmIpCiB7CiAJc3Ry
dWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiA9IGludGVsX2ZiX29iaigmZmItPmJhc2UpOwpA
QCAtNzQ1LDggKzc1NCwxNSBAQCBpbnQgaW50ZWxfZmlsbF9mYl9pbmZvKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1LCBzdHJ1Y3QgaW50ZWxfZnJhbWVidWZmZXIgKgogCXVuc2lnbmVkIGlu
dCB0aWxlX3NpemUgPSBpbnRlbF90aWxlX3NpemUoaTkxNSk7CiAKIAlpbnRlbF9mYl92aWV3X2lu
aXQoJmZiLT5ub3JtYWxfdmlldywgSTkxNV9HR1RUX1ZJRVdfTk9STUFMKTsKLQlpbnRlbF9mYl92
aWV3X2luaXQoJmZiLT5yb3RhdGVkX3ZpZXcsIEk5MTVfR0dUVF9WSUVXX1JPVEFURUQpOwotCWlu
dGVsX2ZiX3ZpZXdfaW5pdCgmZmItPnJlbWFwcGVkX3ZpZXcsIEk5MTVfR0dUVF9WSUVXX1JFTUFQ
UEVEKTsKKworCWRybV9XQVJOX09OKCZpOTE1LT5kcm0sCisJCSAgICBpbnRlbF9mYl9zdXBwb3J0
c185MF8yNzBfcm90YXRpb24oZmIpICYmCisJCSAgICBpbnRlbF9mYl9uZWVkc19wb3Rfc3RyaWRl
X3JlbWFwKGZiKSk7CisKKwlpZiAoaW50ZWxfZmJfc3VwcG9ydHNfOTBfMjcwX3JvdGF0aW9uKGZi
KSkKKwkJaW50ZWxfZmJfdmlld19pbml0KCZmYi0+cm90YXRlZF92aWV3LCBJOTE1X0dHVFRfVklF
V19ST1RBVEVEKTsKKwlpZiAoaW50ZWxfZmJfbmVlZHNfcG90X3N0cmlkZV9yZW1hcChmYikpCisJ
CWludGVsX2ZiX3ZpZXdfaW5pdCgmZmItPnJlbWFwcGVkX3ZpZXcsIEk5MTVfR0dUVF9WSUVXX1JF
TUFQUEVEKTsKIAogCWZvciAoaSA9IDA7IGkgPCBudW1fcGxhbmVzOyBpKyspIHsKIAkJc3RydWN0
IGZiX3BsYW5lX3ZpZXdfZGltcyB2aWV3X2RpbXM7CkBAIC03ODcsOSArODAzLDcgQEAgaW50IGlu
dGVsX2ZpbGxfZmJfaW5mbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgc3RydWN0IGlu
dGVsX2ZyYW1lYnVmZmVyICoKIAogCQlvZmZzZXQgPSBjYWxjX3BsYW5lX2FsaWduZWRfb2Zmc2V0
KGZiLCBpLCAmeCwgJnkpOwogCi0JCS8qIFkgb3IgWWYgbW9kaWZpZXJzIHJlcXVpcmVkIGZvciA5
MC8yNzAgcm90YXRpb24gKi8KLQkJaWYgKGZiLT5iYXNlLm1vZGlmaWVyID09IEk5MTVfRk9STUFU
X01PRF9ZX1RJTEVEIHx8Ci0JCSAgICBmYi0+YmFzZS5tb2RpZmllciA9PSBJOTE1X0ZPUk1BVF9N
T0RfWWZfVElMRUQpCisJCWlmIChpbnRlbF9mYl9zdXBwb3J0c185MF8yNzBfcm90YXRpb24oZmIp
KQogCQkJZ3R0X29mZnNldF9yb3RhdGVkICs9IGNhbGNfcGxhbmVfcmVtYXBfaW5mbyhmYiwgaSwg
JnZpZXdfZGltcywKIAkJCQkJCQkJICAgIG9mZnNldCwgZ3R0X29mZnNldF9yb3RhdGVkLCB4LCB5
LAogCQkJCQkJCQkgICAgJmZiLT5yb3RhdGVkX3ZpZXcpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mYi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9mYi5oCmluZGV4IDdjZWM3N2JiNTA0NmEuLmQ3N2Q5ZjkxNGNmNGMgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZmIuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZiLmgKQEAgLTQ1LDYgKzQ1LDggQEAgdTMy
IGludGVsX3BsYW5lX2NvbXB1dGVfYWxpZ25lZF9vZmZzZXQoaW50ICp4LCBpbnQgKnksCiAJCQkJ
ICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqc3RhdGUsCiAJCQkJICAgICAg
IGludCBjb2xvcl9wbGFuZSk7CiAKK2Jvb2wgaW50ZWxfZmJfc3VwcG9ydHNfOTBfMjcwX3JvdGF0
aW9uKGNvbnN0IHN0cnVjdCBpbnRlbF9mcmFtZWJ1ZmZlciAqZmIpOworCiBpbnQgaW50ZWxfZmls
bF9mYl9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBzdHJ1Y3QgaW50ZWxfZnJh
bWVidWZmZXIgKmZiKTsKIHZvaWQgaW50ZWxfZmJfZmlsbF92aWV3KGNvbnN0IHN0cnVjdCBpbnRl
bF9mcmFtZWJ1ZmZlciAqZmIsIHVuc2lnbmVkIGludCByb3RhdGlvbiwKIAkJCXN0cnVjdCBpbnRl
bF9mYl92aWV3ICp2aWV3KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvc2tsX3VuaXZlcnNhbF9wbGFuZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9z
a2xfdW5pdmVyc2FsX3BsYW5lLmMKaW5kZXggNjhhMGMwYTkyZmExYS4uODY3MzBmMzkxMmIyMiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9za2xfdW5pdmVyc2FsX3Bs
YW5lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9za2xfdW5pdmVyc2FsX3Bs
YW5lLmMKQEAgLTExNjEsOCArMTE2MSw3IEBAIHN0YXRpYyBpbnQgc2tsX3BsYW5lX2NoZWNrX2Zi
KGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCX0KIAogCWlmIChk
cm1fcm90YXRpb25fOTBfb3JfMjcwKHJvdGF0aW9uKSkgewotCQlpZiAoZmItPm1vZGlmaWVyICE9
IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEICYmCi0JCSAgICBmYi0+bW9kaWZpZXIgIT0gSTkxNV9G
T1JNQVRfTU9EX1lmX1RJTEVEKSB7CisJCWlmICghaW50ZWxfZmJfc3VwcG9ydHNfOTBfMjcwX3Jv
dGF0aW9uKHRvX2ludGVsX2ZyYW1lYnVmZmVyKGZiKSkpIHsKIAkJCWRybV9kYmdfa21zKCZkZXZf
cHJpdi0+ZHJtLAogCQkJCSAgICAiWS9ZZiB0aWxpbmcgcmVxdWlyZWQgZm9yIDkwLzI3MCFcbiIp
OwogCQkJcmV0dXJuIC1FSU5WQUw7Ci0tIAoyLjI3LjAKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

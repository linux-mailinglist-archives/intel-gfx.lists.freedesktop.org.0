Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B1C9B58EC7
	for <lists+intel-gfx@lfdr.de>; Fri, 28 Jun 2019 01:50:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 17D096E855;
	Thu, 27 Jun 2019 23:50:45 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B00656E855
 for <intel-gfx@lists.freedesktop.org>; Thu, 27 Jun 2019 23:50:43 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 17050813-1500050 for multiple; Fri, 28 Jun 2019 00:50:41 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Matthew Auld <matthew.auld@intel.com>, intel-gfx@lists.freedesktop.org
References: <20190627205633.1143-1-matthew.auld@intel.com>
 <20190627205633.1143-17-matthew.auld@intel.com>
In-Reply-To: <20190627205633.1143-17-matthew.auld@intel.com>
Message-ID: <156167943896.21955.5312024589568610910@skylake-alporthouse-com>
Date: Fri, 28 Jun 2019 00:50:38 +0100
Subject: Re: [Intel-gfx] [PATCH v2 16/37] drm/i915/lmem: support pread
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBNYXR0aGV3IEF1bGQgKDIwMTktMDYtMjcgMjE6NTY6MTIpCj4gV2UgbmVlZCB0byBh
ZGQgc3VwcG9ydCBmb3IgcHJlYWQnaW5nIGFuIExNRU0gb2JqZWN0Lgo+IAo+IFNpZ25lZC1vZmYt
Ynk6IE1hdHRoZXcgQXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KPiBDYzogSm9vbmFzIExh
aHRpbmVuIDxqb29uYXMubGFodGluZW5AbGludXguaW50ZWwuY29tPgo+IENjOiBBYmRpZWwgSmFu
dWxndWUgPGFiZGllbC5qYW51bGd1ZUBsaW51eC5pbnRlbC5jb20+Cj4gLS0tCj4gIC4uLi9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oICB8ICAyICsKPiAgZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9nZW0uYyAgICAgICAgICAgICAgIHwgIDYgKysKPiAgZHJpdmVycy9n
cHUvZHJtL2k5MTUvaW50ZWxfcmVnaW9uX2xtZW0uYyAgICAgIHwgNzYgKysrKysrKysrKysrKysr
KysrKwo+ICAzIGZpbGVzIGNoYW5nZWQsIDg0IGluc2VydGlvbnMoKykKPiAKPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oCj4gaW5kZXggODBm
ZjVhZDliYzA3Li44Y2RlZTE4NTI1MWEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oCj4gQEAgLTUyLDYgKzUyLDggQEAgc3RydWN0
IGRybV9pOTE1X2dlbV9vYmplY3Rfb3BzIHsKPiAgICAgICAgIHZvaWQgKCp0cnVuY2F0ZSkoc3Ry
dWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7Cj4gICAgICAgICB2b2lkICgqd3JpdGViYWNr
KShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsKPiAgCj4gKyAgICAgICBpbnQgKCpw
cmVhZCkoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKiwKPiArICAgICAgICAgICAgICAgICAg
ICBjb25zdCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX3ByZWFkICphcmcpOwo+ICAgICAgICAgaW50ICgq
cHdyaXRlKShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAo+ICAgICAgICAgICAgICAg
ICAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX3B3cml0ZSAqYXJnKTsKPiAgCj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dlbS5jCj4gaW5kZXggODU2NzdhZTg5ODQ5Li40YmEzODZhYjM1ZTcgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKPiBAQCAtNDYzLDYgKzQ2MywxMiBAQCBpOTE1X2dl
bV9wcmVhZF9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAo+ICAKPiAg
ICAgICAgIHRyYWNlX2k5MTVfZ2VtX29iamVjdF9wcmVhZChvYmosIGFyZ3MtPm9mZnNldCwgYXJn
cy0+c2l6ZSk7Cj4gIAo+ICsgICAgICAgcmV0ID0gLUVOT0RFVjsKPiArICAgICAgIGlmIChvYmot
Pm9wcy0+cHJlYWQpCj4gKyAgICAgICAgICAgICAgIHJldCA9IG9iai0+b3BzLT5wcmVhZChvYmos
IGFyZ3MpOwo+ICsgICAgICAgaWYgKHJldCAhPSAtRU5PREVWKQo+ICsgICAgICAgICAgICAgICBn
b3RvIG91dDsKPiArCj4gICAgICAgICByZXQgPSBpOTE1X2dlbV9vYmplY3Rfd2FpdChvYmosCj4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJOTE1X1dBSVRfSU5URVJSVVBUSUJM
RSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1BWF9TQ0hFRFVMRV9USU1F
T1VUKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcmVnaW9uX2xt
ZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3JlZ2lvbl9sbWVtLmMKPiBpbmRleCA3
MDFiY2FjMzQ3OWUuLjU0YjJjN2JmMTc3ZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9yZWdpb25fbG1lbS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfcmVnaW9uX2xtZW0uYwo+IEBAIC03LDEwICs3LDg2IEBACj4gICNpbmNsdWRlICJpbnRlbF9t
ZW1vcnlfcmVnaW9uLmgiCj4gICNpbmNsdWRlICJpbnRlbF9yZWdpb25fbG1lbS5oIgo+ICAKPiAr
c3RhdGljIGludCBsbWVtX3ByZWFkKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCj4g
KyAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBkcm1faTkxNV9nZW1fcHJlYWQgKmFy
ZykKPiArewo+ICsgICAgICAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1
KG9iai0+YmFzZS5kZXYpOwo+ICsgICAgICAgc3RydWN0IGludGVsX3J1bnRpbWVfcG0gKnJwbSA9
ICZpOTE1LT5ydW50aW1lX3BtOwo+ICsgICAgICAgaW50ZWxfd2FrZXJlZl90IHdha2VyZWY7Cj4g
KyAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZTsKPiArICAgICAgIGNoYXIgX191c2VyICp1
c2VyX2RhdGE7Cj4gKyAgICAgICB1bnNpZ25lZCBpbnQgb2Zmc2V0Owo+ICsgICAgICAgdW5zaWdu
ZWQgbG9uZyBpZHg7Cj4gKyAgICAgICB1NjQgcmVtYWluOwo+ICsgICAgICAgaW50IHJldDsKPiAr
Cj4gKyAgICAgICByZXQgPSBpOTE1X2dlbV9vYmplY3RfcGluX3BhZ2VzKG9iaik7Cj4gKyAgICAg
ICBpZiAocmV0KQo+ICsgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ICsKPiArICAgICAgIGk5
MTVfZ2VtX29iamVjdF9sb2NrKG9iaik7Cj4gKyAgICAgICByZXQgPSBpOTE1X2dlbV9vYmplY3Rf
c2V0X3RvX3djX2RvbWFpbihvYmosIGZhbHNlKTsKCllvdSBjaG9zZSB0byBvcHQgb3V0IG9mIHRo
ZSB1bmxvY2tlZCB3YWl0IGJlZm9yZSB0aGUgbG9ja2VkIHdhaXQ/CgoKPiArICAgICAgIGlmIChy
ZXQpIHsKPiArICAgICAgICAgICAgICAgaTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwo+ICsg
ICAgICAgICAgICAgICBnb3RvIG91dF91bnBpbjsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBm
ZW5jZSA9IGk5MTVfZ2VtX29iamVjdF9sb2NrX2ZlbmNlKG9iaik7Cj4gKyAgICAgICBpOTE1X2dl
bV9vYmplY3RfdW5sb2NrKG9iaik7Cj4gKyAgICAgICBpZiAoIWZlbmNlKSB7Cj4gKyAgICAgICAg
ICAgICAgIHJldCA9IC1FTk9NRU07Cj4gKyAgICAgICAgICAgICAgIGdvdG8gb3V0X3VucGluOwo+
ICsgICAgICAgfQo+ICsKPiArICAgICAgIHdha2VyZWYgPSBpbnRlbF9ydW50aW1lX3BtX2dldChy
cG0pOwoKU29tZXRoaW5nIG5vdCBtZW50aW9uZWQgc28gZmFyIGlzIHRoZSBzdG9yeSBmb3IgbW0t
PnJwbS4KCj4gKyAgICAgICByZW1haW4gPSBhcmctPnNpemU7Cj4gKyAgICAgICB1c2VyX2RhdGEg
PSB1NjRfdG9fdXNlcl9wdHIoYXJnLT5kYXRhX3B0cik7Cj4gKyAgICAgICBvZmZzZXQgPSBvZmZz
ZXRfaW5fcGFnZShhcmctPm9mZnNldCk7Cj4gKyAgICAgICBmb3IgKGlkeCA9IGFyZy0+b2Zmc2V0
ID4+IFBBR0VfU0hJRlQ7IHJlbWFpbjsgaWR4KyspIHsKPiArICAgICAgICAgICAgICAgdW5zaWdu
ZWQgbG9uZyB1bndyaXR0ZW47Cj4gKyAgICAgICAgICAgICAgIHZvaWQgX19pb21lbSAqdmFkZHI7
Cj4gKyAgICAgICAgICAgICAgIGludCBsZW5ndGg7Cj4gKwo+ICsgICAgICAgICAgICAgICBsZW5n
dGggPSByZW1haW47Cj4gKyAgICAgICAgICAgICAgIGlmIChvZmZzZXQgKyBsZW5ndGggPiBQQUdF
X1NJWkUpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gUEFHRV9TSVpFIC0gb2Zm
c2V0Owo+ICsKPiArICAgICAgICAgICAgICAgdmFkZHIgPSBpOTE1X2dlbV9vYmplY3RfbG1lbV9p
b19tYXBfcGFnZShvYmosIGlkeCk7Cj4gKyAgICAgICAgICAgICAgIGlmICghdmFkZHIpIHsKPiAr
ICAgICAgICAgICAgICAgICAgICAgICByZXQgPSAtRU5PTUVNOwo+ICsgICAgICAgICAgICAgICAg
ICAgICAgIGdvdG8gb3V0X3B1dDsKPiArICAgICAgICAgICAgICAgfQo+ICsKPiArICAgICAgICAg
ICAgICAgdW53cml0dGVuID0gY29weV90b191c2VyKHVzZXJfZGF0YSwKCkV4Y2VwdCB0aGlzIGlz
IGEgc2VjcmV0IGF0b21pYyBzZWN0aW9uISEhCgo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgKHZvaWQgX19mb3JjZSAqKXZhZGRyICsgb2Zmc2V0LAo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoKTsKPiArICAgICAgICAgICAg
ICAgaW9fbWFwcGluZ191bm1hcF9hdG9taWModmFkZHIpOwo+ICsgICAgICAgICAgICAgICBpZiAo
dW53cml0dGVuKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gLUVGQVVMVDsKPiAr
ICAgICAgICAgICAgICAgICAgICAgICBnb3RvIG91dF9wdXQ7Cj4gKyAgICAgICAgICAgICAgIH0K
PiArCj4gKyAgICAgICAgICAgICAgIHJlbWFpbiAtPSBsZW5ndGg7Cj4gKyAgICAgICAgICAgICAg
IHVzZXJfZGF0YSArPSBsZW5ndGg7Cj4gKyAgICAgICAgICAgICAgIG9mZnNldCA9IDA7Cj4gKyAg
ICAgICB9Cj4gKwo+ICtvdXRfcHV0Ogo+ICsgICAgICAgaW50ZWxfcnVudGltZV9wbV9wdXQocnBt
LCB3YWtlcmVmKTsKPiArICAgICAgIGk5MTVfZ2VtX29iamVjdF91bmxvY2tfZmVuY2Uob2JqLCBm
ZW5jZSk7Cj4gK291dF91bnBpbjoKPiArICAgICAgIGk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdl
cyhvYmopOwo+ICsKPiArICAgICAgIHJldHVybiByZXQ7Cj4gK30KPiArCj4gIHN0YXRpYyBjb25z
dCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdF9vcHMgcmVnaW9uX2xtZW1fb2JqX29wcyA9IHsK
PiAgICAgICAgIC5nZXRfcGFnZXMgPSBpOTE1X21lbW9yeV9yZWdpb25fZ2V0X3BhZ2VzX2J1ZGR5
LAo+ICAgICAgICAgLnB1dF9wYWdlcyA9IGk5MTVfbWVtb3J5X3JlZ2lvbl9wdXRfcGFnZXNfYnVk
ZHksCj4gICAgICAgICAucmVsZWFzZSA9IGk5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21lbW9yeV9y
ZWdpb24sCj4gKwo+ICsgICAgICAgLnByZWFkID0gbG1lbV9wcmVhZCwKPiAgfTsKPiAgCj4gIHN0
YXRpYyBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqCj4gLS0gCj4gMi4yMC4xCj4gCj4gX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBJbnRlbC1nZngg
bWFpbGluZyBsaXN0Cj4gSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5n
IGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

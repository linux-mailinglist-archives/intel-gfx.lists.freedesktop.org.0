Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A8F1B10E222
	for <lists+intel-gfx@lfdr.de>; Sun,  1 Dec 2019 15:09:27 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9B61189FA5;
	Sun,  1 Dec 2019 14:09:25 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9B05189FA5
 for <intel-gfx@lists.freedesktop.org>; Sun,  1 Dec 2019 14:09:23 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19415418-1500050 
 for multiple; Sun, 01 Dec 2019 14:09:16 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Sun,  1 Dec 2019 14:09:16 +0000
Message-Id: <20191201140916.2128905-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915: Refactor gen6_flush_pd()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgdGhlIGdlbjYgcGFnZSBkaXJlY3RvcnkgaXMgd3JpdHRlbiBvbiBiaW5kaW5nIGFuZCBhZnRl
ciBldmVyeSB1cGRhdGUsCnRoZSBjb2RlIGVuZGVkIHVwIGR1cGxpY2F0ZWQuIFJlZmFjdG9yIHRo
ZSBjb2RlIGludG8gYSBzaW5nbGUgcm91dGluZSB0bwpzaGFyZSB0aGUgbG9ja2luZyBhbmQgc2Vy
aWFsaXNhdGlvbi4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2ls
c29uLmNvLnVrPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jIHwgMzgg
KysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAyMCBpbnNlcnRp
b25zKCspLCAxOCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dlbV9ndHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCmlu
ZGV4IDcwOWJkNGM4YjNiNC4uMTBiM2Q2ZDQ0MDQ1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dlbV9ndHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dl
bV9ndHQuYwpAQCAtMTY5Myw2ICsxNjkzLDIzIEBAIHN0YXRpYyB2b2lkIGdlbjZfcHBndHRfaW5z
ZXJ0X2VudHJpZXMoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0sCiAJdm1hLT5wYWdlX3Np
emVzLmd0dCA9IEk5MTVfR1RUX1BBR0VfU0laRTsKIH0KIAorc3RhdGljIHZvaWQgZ2VuNl9mbHVz
aF9wZChzdHJ1Y3QgZ2VuNl9wcGd0dCAqcHBndHQpCit7CisJc3RydWN0IGk5MTVfcGFnZV9kaXJl
Y3RvcnkgKiBjb25zdCBwZCA9IHBwZ3R0LT5iYXNlLnBkOworCXN0cnVjdCBpOTE1X3BhZ2VfdGFi
bGUgKnB0OworCXVuc2lnbmVkIGludCBwZGU7CisKKwltdXRleF9sb2NrKCZwcGd0dC0+Zmx1c2gp
OworCisJZ2VuNl9mb3JfYWxsX3BkZXMocHQsIHBkLCBwZGUpCisJCWdlbjZfd3JpdGVfcGRlKHBw
Z3R0LCBwZGUsIHB0KTsKKworCWlvcmVhZDMyKHBwZ3R0LT5wZF9hZGRyICsgcGRlIC0gMSk7CisJ
Z2VuNl9nZ3R0X2ludmFsaWRhdGUocHBndHQtPmJhc2Uudm0uZ3QtPmdndHQpOworCisJbXV0ZXhf
dW5sb2NrKCZwcGd0dC0+Zmx1c2gpOworfQorCiBzdGF0aWMgaW50IGdlbjZfYWxsb2NfdmFfcmFu
Z2Uoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0sCiAJCQkgICAgICAgdTY0IHN0YXJ0LCB1
NjQgbGVuZ3RoKQogewpAQCAtMTczNiwxOCArMTc1Myw5IEBAIHN0YXRpYyBpbnQgZ2VuNl9hbGxv
Y192YV9yYW5nZShzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKIAl9CiAJc3Bpbl91bmxv
Y2soJnBkLT5sb2NrKTsKIAotCWlmIChpOTE1X3ZtYV9pc19ib3VuZChwcGd0dC0+dm1hLCBJOTE1
X1ZNQV9HTE9CQUxfQklORCkpIHsKLQkJbXV0ZXhfbG9jaygmcHBndHQtPmZsdXNoKTsKLQorCWlm
IChpOTE1X3ZtYV9pc19ib3VuZChwcGd0dC0+dm1hLCBJOTE1X1ZNQV9HTE9CQUxfQklORCkpCiAJ
CS8qIFJld3JpdGUgdGhlbSBhbGwhIEFueXRoaW5nIGxlc3MgbWlzc2VzIGFuIGludmFsaWRhdGUu
ICovCi0JCWdlbjZfZm9yX2FsbF9wZGVzKHB0LCBwZCwgcGRlKQotCQkJZ2VuNl93cml0ZV9wZGUo
cHBndHQsIHBkZSwgcHQpOwotCi0JCWlvcmVhZDMyKHBwZ3R0LT5wZF9hZGRyICsgcGRlIC0gMSk7
Ci0JCWdlbjZfZ2d0dF9pbnZhbGlkYXRlKHZtLT5ndC0+Z2d0dCk7Ci0KLQkJbXV0ZXhfdW5sb2Nr
KCZwcGd0dC0+Zmx1c2gpOwotCX0KKwkJZ2VuNl9mbHVzaF9wZChwcGd0dCk7CiAKIAlnb3RvIG91
dDsKIApAQCAtMTgzMiwxNyArMTg0MCwxMSBAQCBzdGF0aWMgaW50IHBkX3ZtYV9iaW5kKHN0cnVj
dCBpOTE1X3ZtYSAqdm1hLAogCXN0cnVjdCBpOTE1X2dndHQgKmdndHQgPSBpOTE1X3ZtX3RvX2dn
dHQodm1hLT52bSk7CiAJc3RydWN0IGdlbjZfcHBndHQgKnBwZ3R0ID0gdm1hLT5wcml2YXRlOwog
CXUzMiBnZ3R0X29mZnNldCA9IGk5MTVfZ2d0dF9vZmZzZXQodm1hKSAvIEk5MTVfR1RUX1BBR0Vf
U0laRTsKLQlzdHJ1Y3QgaTkxNV9wYWdlX3RhYmxlICpwdDsKLQl1bnNpZ25lZCBpbnQgcGRlOwog
CiAJcHhfYmFzZShwcGd0dC0+YmFzZS5wZCktPmdndHRfb2Zmc2V0ID0gZ2d0dF9vZmZzZXQgKiBz
aXplb2YoZ2VuNl9wdGVfdCk7CiAJcHBndHQtPnBkX2FkZHIgPSAoZ2VuNl9wdGVfdCBfX2lvbWVt
ICopZ2d0dC0+Z3NtICsgZ2d0dF9vZmZzZXQ7CiAKLQlnZW42X2Zvcl9hbGxfcGRlcyhwdCwgcHBn
dHQtPmJhc2UucGQsIHBkZSkKLQkJZ2VuNl93cml0ZV9wZGUocHBndHQsIHBkZSwgcHQpOwotCi0J
Z2VuNl9nZ3R0X2ludmFsaWRhdGUoZ2d0dCk7Ci0KKwlnZW42X2ZsdXNoX3BkKHBwZ3R0KTsKIAly
ZXR1cm4gMDsKIH0KIAotLSAKMi4yNC4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AC002E0523
	for <lists+intel-gfx@lfdr.de>; Tue, 22 Oct 2019 15:34:28 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 144FE6E7C6;
	Tue, 22 Oct 2019 13:34:27 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 184296E7C6
 for <intel-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 13:34:26 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 Oct 2019 06:34:25 -0700
X-IronPort-AV: E=Sophos;i="5.67,327,1566889200"; d="scan'208";a="191462135"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 Oct 2019 06:34:22 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 22 Oct 2019 16:34:13 +0300
Message-Id: <20191022133414.8293-1-jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH 1/2] drm/i915/dsc: rename crtc state dsc_params
 member to dsc
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UmVkdWNlIHZlcmJvc2l0eSBpbiBjb2RlIGJ5IHJlbmFtaW5nIGRzY19wYXJhbXMgbWVtYmVyIG9m
IGNydGMgc3RhdGUgdG8Kc2ltcGx5IGRzYy4gVGhlcmUgaXMgZW5vdWdoIGNvbnRleHQgZm9yIHRo
aXMgdG8gYmUgY2xlYXIuIE5vIGZ1bmN0aW9uYWwKY2hhbmdlcy4KCkNjOiBNYW5hc2kgTmF2YXJl
IDxtYW5hc2kuZC5uYXZhcmVAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBKYW5pIE5pa3VsYSA8
amFuaS5uaWt1bGFAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGRpLmMgICAgICB8ICAyICstCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5X3R5cGVzLmggICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kcC5jICAgICAgIHwgMzIgKysrKy0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX3Bzci5jICAgICAgfCAgNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF92ZHNjLmMgICAgIHwgNjggKysrKysrKysrLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgICAgICAgICAgIHwgIDIgKy0KIDYgZmlsZXMgY2hhbmdlZCwg
NTUgaW5zZXJ0aW9ucygrKSwgNTUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGRpLmMKaW5kZXggOWJhNzk0Y2I5YjRmLi4xYTQ5MjY2ZjRmNTcgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYwpAQCAtMjIzNCw3ICsyMjM0LDcg
QEAgc3RhdGljIHZvaWQgaW50ZWxfZGRpX2dldF9wb3dlcl9kb21haW5zKHN0cnVjdCBpbnRlbF9l
bmNvZGVyICplbmNvZGVyLAogCS8qCiAJICogVkRTQyBwb3dlciBpcyBuZWVkZWQgd2hlbiBEU0Mg
aXMgZW5hYmxlZAogCSAqLwotCWlmIChjcnRjX3N0YXRlLT5kc2NfcGFyYW1zLmNvbXByZXNzaW9u
X2VuYWJsZSkKKwlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmNvbXByZXNzaW9uX2VuYWJsZSkKIAkJaW50
ZWxfZGlzcGxheV9wb3dlcl9nZXQoZGV2X3ByaXYsCiAJCQkJCWludGVsX2RzY19wb3dlcl9kb21h
aW4oY3J0Y19zdGF0ZSkpOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAppbmRleCA4MzU4MTUyZTQwM2UuLmRiNjZmOWQ2MjNmOCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5
cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5
cGVzLmgKQEAgLTk4Niw3ICs5ODYsNyBAQCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSB7CiAJCWJv
b2wgZHNjX3NwbGl0OwogCQl1MTYgY29tcHJlc3NlZF9icHA7CiAJCXU4IHNsaWNlX2NvdW50Owot
CX0gZHNjX3BhcmFtczsKKwl9IGRzYzsKIAlzdHJ1Y3QgZHJtX2RzY19jb25maWcgZHBfZHNjX2Nm
ZzsKIAogCS8qIEZvcndhcmQgRXJyb3IgY29ycmVjdGlvbiBTdGF0ZSAqLwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCmluZGV4IDVlZWFmYTQ1ODMxYS4uNTIxY2UyM2YzOGFj
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCkBAIC0yMDgwLDEwICsy
MDgwLDEwIEBAIHN0YXRpYyBpbnQgaW50ZWxfZHBfZHNjX2NvbXB1dGVfY29uZmlnKHN0cnVjdCBp
bnRlbF9kcCAqaW50ZWxfZHAsCiAJcGlwZV9jb25maWctPmxhbmVfY291bnQgPSBsaW1pdHMtPm1h
eF9sYW5lX2NvdW50OwogCiAJaWYgKGludGVsX2RwX2lzX2VkcChpbnRlbF9kcCkpIHsKLQkJcGlw
ZV9jb25maWctPmRzY19wYXJhbXMuY29tcHJlc3NlZF9icHAgPQorCQlwaXBlX2NvbmZpZy0+ZHNj
LmNvbXByZXNzZWRfYnBwID0KIAkJCW1pbl90KHUxNiwgZHJtX2VkcF9kc2Nfc2lua19vdXRwdXRf
YnBwKGludGVsX2RwLT5kc2NfZHBjZCkgPj4gNCwKIAkJCSAgICAgIHBpcGVfY29uZmlnLT5waXBl
X2JwcCk7Ci0JCXBpcGVfY29uZmlnLT5kc2NfcGFyYW1zLnNsaWNlX2NvdW50ID0KKwkJcGlwZV9j
b25maWctPmRzYy5zbGljZV9jb3VudCA9CiAJCQlkcm1fZHBfZHNjX3NpbmtfbWF4X3NsaWNlX2Nv
dW50KGludGVsX2RwLT5kc2NfZHBjZCwKIAkJCQkJCQl0cnVlKTsKIAl9IGVsc2UgewpAQCAtMjEw
NCwxMCArMjEwNCwxMCBAQCBzdGF0aWMgaW50IGludGVsX2RwX2RzY19jb21wdXRlX2NvbmZpZyhz
dHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogCQkJRFJNX0RFQlVHX0tNUygiQ29tcHJlc3NlZCBC
UFAvU2xpY2UgQ291bnQgbm90IHN1cHBvcnRlZFxuIik7CiAJCQlyZXR1cm4gLUVJTlZBTDsKIAkJ
fQotCQlwaXBlX2NvbmZpZy0+ZHNjX3BhcmFtcy5jb21wcmVzc2VkX2JwcCA9IG1pbl90KHUxNiwK
KwkJcGlwZV9jb25maWctPmRzYy5jb21wcmVzc2VkX2JwcCA9IG1pbl90KHUxNiwKIAkJCQkJCQkg
ICAgICAgZHNjX21heF9vdXRwdXRfYnBwID4+IDQsCiAJCQkJCQkJICAgICAgIHBpcGVfY29uZmln
LT5waXBlX2JwcCk7Ci0JCXBpcGVfY29uZmlnLT5kc2NfcGFyYW1zLnNsaWNlX2NvdW50ID0gZHNj
X2RwX3NsaWNlX2NvdW50OworCQlwaXBlX2NvbmZpZy0+ZHNjLnNsaWNlX2NvdW50ID0gZHNjX2Rw
X3NsaWNlX2NvdW50OwogCX0KIAkvKgogCSAqIFZEU0MgZW5naW5lIG9wZXJhdGVzIGF0IDEgUGl4
ZWwgcGVyIGNsb2NrLCBzbyBpZiBwZWFrIHBpeGVsIHJhdGUKQEAgLTIxMTUsOCArMjExNSw4IEBA
IHN0YXRpYyBpbnQgaW50ZWxfZHBfZHNjX2NvbXB1dGVfY29uZmlnKHN0cnVjdCBpbnRlbF9kcCAq
aW50ZWxfZHAsCiAJICogdGhlbiB3ZSBuZWVkIHRvIHVzZSAyIFZEU0MgaW5zdGFuY2VzLgogCSAq
LwogCWlmIChhZGp1c3RlZF9tb2RlLT5jcnRjX2Nsb2NrID4gZGV2X3ByaXYtPm1heF9jZGNsa19m
cmVxKSB7Ci0JCWlmIChwaXBlX2NvbmZpZy0+ZHNjX3BhcmFtcy5zbGljZV9jb3VudCA+IDEpIHsK
LQkJCXBpcGVfY29uZmlnLT5kc2NfcGFyYW1zLmRzY19zcGxpdCA9IHRydWU7CisJCWlmIChwaXBl
X2NvbmZpZy0+ZHNjLnNsaWNlX2NvdW50ID4gMSkgeworCQkJcGlwZV9jb25maWctPmRzYy5kc2Nf
c3BsaXQgPSB0cnVlOwogCQl9IGVsc2UgewogCQkJRFJNX0RFQlVHX0tNUygiQ2Fubm90IHNwbGl0
IHN0cmVhbSB0byB1c2UgMiBWRFNDIGluc3RhbmNlc1xuIik7CiAJCQlyZXR1cm4gLUVJTlZBTDsK
QEAgLTIxMjgsMTYgKzIxMjgsMTYgQEAgc3RhdGljIGludCBpbnRlbF9kcF9kc2NfY29tcHV0ZV9j
b25maWcoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwKIAkJRFJNX0RFQlVHX0tNUygiQ2Fubm90
IGNvbXB1dGUgdmFsaWQgRFNDIHBhcmFtZXRlcnMgZm9yIElucHV0IEJwcCA9ICVkICIKIAkJCSAg
ICAgICJDb21wcmVzc2VkIEJQUCA9ICVkXG4iLAogCQkJICAgICAgcGlwZV9jb25maWctPnBpcGVf
YnBwLAotCQkJICAgICAgcGlwZV9jb25maWctPmRzY19wYXJhbXMuY29tcHJlc3NlZF9icHApOwor
CQkJICAgICAgcGlwZV9jb25maWctPmRzYy5jb21wcmVzc2VkX2JwcCk7CiAJCXJldHVybiByZXQ7
CiAJfQogCi0JcGlwZV9jb25maWctPmRzY19wYXJhbXMuY29tcHJlc3Npb25fZW5hYmxlID0gdHJ1
ZTsKKwlwaXBlX2NvbmZpZy0+ZHNjLmNvbXByZXNzaW9uX2VuYWJsZSA9IHRydWU7CiAJRFJNX0RF
QlVHX0tNUygiRFAgRFNDIGNvbXB1dGVkIHdpdGggSW5wdXQgQnBwID0gJWQgIgogCQkgICAgICAi
Q29tcHJlc3NlZCBCcHAgPSAlZCBTbGljZSBDb3VudCA9ICVkXG4iLAogCQkgICAgICBwaXBlX2Nv
bmZpZy0+cGlwZV9icHAsCi0JCSAgICAgIHBpcGVfY29uZmlnLT5kc2NfcGFyYW1zLmNvbXByZXNz
ZWRfYnBwLAotCQkgICAgICBwaXBlX2NvbmZpZy0+ZHNjX3BhcmFtcy5zbGljZV9jb3VudCk7CisJ
CSAgICAgIHBpcGVfY29uZmlnLT5kc2MuY29tcHJlc3NlZF9icHAsCisJCSAgICAgIHBpcGVfY29u
ZmlnLT5kc2Muc2xpY2VfY291bnQpOwogCiAJcmV0dXJuIDA7CiB9CkBAIC0yMjExLDE1ICsyMjEx
LDE1IEBAIGludGVsX2RwX2NvbXB1dGVfbGlua19jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXIsCiAJCQlyZXR1cm4gcmV0OwogCX0KIAotCWlmIChwaXBlX2NvbmZpZy0+ZHNjX3Bh
cmFtcy5jb21wcmVzc2lvbl9lbmFibGUpIHsKKwlpZiAocGlwZV9jb25maWctPmRzYy5jb21wcmVz
c2lvbl9lbmFibGUpIHsKIAkJRFJNX0RFQlVHX0tNUygiRFAgbGFuZSBjb3VudCAlZCBjbG9jayAl
ZCBJbnB1dCBicHAgJWQgQ29tcHJlc3NlZCBicHAgJWRcbiIsCiAJCQkgICAgICBwaXBlX2NvbmZp
Zy0+bGFuZV9jb3VudCwgcGlwZV9jb25maWctPnBvcnRfY2xvY2ssCiAJCQkgICAgICBwaXBlX2Nv
bmZpZy0+cGlwZV9icHAsCi0JCQkgICAgICBwaXBlX2NvbmZpZy0+ZHNjX3BhcmFtcy5jb21wcmVz
c2VkX2JwcCk7CisJCQkgICAgICBwaXBlX2NvbmZpZy0+ZHNjLmNvbXByZXNzZWRfYnBwKTsKIAog
CQlEUk1fREVCVUdfS01TKCJEUCBsaW5rIHJhdGUgcmVxdWlyZWQgJWkgYXZhaWxhYmxlICVpXG4i
LAogCQkJICAgICAgaW50ZWxfZHBfbGlua19yZXF1aXJlZChhZGp1c3RlZF9tb2RlLT5jcnRjX2Ns
b2NrLAotCQkJCQkJICAgICBwaXBlX2NvbmZpZy0+ZHNjX3BhcmFtcy5jb21wcmVzc2VkX2JwcCks
CisJCQkJCQkgICAgIHBpcGVfY29uZmlnLT5kc2MuY29tcHJlc3NlZF9icHApLAogCQkJICAgICAg
aW50ZWxfZHBfbWF4X2RhdGFfcmF0ZShwaXBlX2NvbmZpZy0+cG9ydF9jbG9jaywKIAkJCQkJCSAg
ICAgcGlwZV9jb25maWctPmxhbmVfY291bnQpKTsKIAl9IGVsc2UgewpAQCAtMjM3Nyw4ICsyMzc3
LDggQEAgaW50ZWxfZHBfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29k
ZXIsCiAJcGlwZV9jb25maWctPmxpbWl0ZWRfY29sb3JfcmFuZ2UgPQogCQlpbnRlbF9kcF9saW1p
dGVkX2NvbG9yX3JhbmdlKHBpcGVfY29uZmlnLCBjb25uX3N0YXRlKTsKIAotCWlmIChwaXBlX2Nv
bmZpZy0+ZHNjX3BhcmFtcy5jb21wcmVzc2lvbl9lbmFibGUpCi0JCW91dHB1dF9icHAgPSBwaXBl
X2NvbmZpZy0+ZHNjX3BhcmFtcy5jb21wcmVzc2VkX2JwcDsKKwlpZiAocGlwZV9jb25maWctPmRz
Yy5jb21wcmVzc2lvbl9lbmFibGUpCisJCW91dHB1dF9icHAgPSBwaXBlX2NvbmZpZy0+ZHNjLmNv
bXByZXNzZWRfYnBwOwogCWVsc2UKIAkJb3V0cHV0X2JwcCA9IGludGVsX2RwX291dHB1dF9icHAo
cGlwZV9jb25maWcsIHBpcGVfY29uZmlnLT5waXBlX2JwcCk7CiAKQEAgLTMxMDIsNyArMzEwMiw3
IEBAIHZvaWQgaW50ZWxfZHBfc2lua19zZXRfZGVjb21wcmVzc2lvbl9zdGF0ZShzdHJ1Y3QgaW50
ZWxfZHAgKmludGVsX2RwLAogewogCWludCByZXQ7CiAKLQlpZiAoIWNydGNfc3RhdGUtPmRzY19w
YXJhbXMuY29tcHJlc3Npb25fZW5hYmxlKQorCWlmICghY3J0Y19zdGF0ZS0+ZHNjLmNvbXByZXNz
aW9uX2VuYWJsZSkKIAkJcmV0dXJuOwogCiAJcmV0ID0gZHJtX2RwX2RwY2Rfd3JpdGViKCZpbnRl
bF9kcC0+YXV4LCBEUF9EU0NfRU5BQkxFLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9wc3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfcHNyLmMKaW5kZXggNTBmMjJhYmNkMzBlLi5kZmJlZGZmOThlYTggMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHNyLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wc3IuYwpAQCAtNzYsNyArNzYsNyBAQCBzdGF0aWMgYm9v
bCBpbnRlbF9wc3IyX2VuYWJsZWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAog
CQkJICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogewog
CS8qIENhbm5vdCBlbmFibGUgRFNDIGFuZCBQU1IyIHNpbXVsdGFuZW91c2x5ICovCi0JV0FSTl9P
TihjcnRjX3N0YXRlLT5kc2NfcGFyYW1zLmNvbXByZXNzaW9uX2VuYWJsZSAmJgorCVdBUk5fT04o
Y3J0Y19zdGF0ZS0+ZHNjLmNvbXByZXNzaW9uX2VuYWJsZSAmJgogCQljcnRjX3N0YXRlLT5oYXNf
cHNyMik7CiAKIAlzd2l0Y2ggKGRldl9wcml2LT5wc3IuZGVidWcgJiBJOTE1X1BTUl9ERUJVR19N
T0RFX01BU0spIHsKQEAgLTYyMyw3ICs2MjMsNyBAQCBzdGF0aWMgYm9vbCBpbnRlbF9wc3IyX2Nv
bmZpZ192YWxpZChzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogCSAqIHJlc29sdXRpb24gcmVx
dWlyZXMgRFNDIHRvIGJlIGVuYWJsZWQsIHByaW9yaXR5IGlzIGdpdmVuIHRvIERTQwogCSAqIG92
ZXIgUFNSMi4KIAkgKi8KLQlpZiAoY3J0Y19zdGF0ZS0+ZHNjX3BhcmFtcy5jb21wcmVzc2lvbl9l
bmFibGUpIHsKKwlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmNvbXByZXNzaW9uX2VuYWJsZSkgewogCQlE
Uk1fREVCVUdfS01TKCJQU1IyIGNhbm5vdCBiZSBlbmFibGVkIHNpbmNlIERTQyBpcyBlbmFibGVk
XG4iKTsKIAkJcmV0dXJuIGZhbHNlOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfdmRzYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF92ZHNjLmMKaW5kZXggZDRmYjdmMTZmOWY2Li5mNDFhOTMzNjQ3NmIgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdmRzYy5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdmRzYy5jCkBAIC0zMjMsNyArMzIzLDcgQEAgaW50
IGludGVsX2RwX2NvbXB1dGVfZHNjX3BhcmFtcyhzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAog
CQkJCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZykKIHsKIAlzdHJ1Y3QgZHJt
X2RzY19jb25maWcgKnZkc2NfY2ZnID0gJnBpcGVfY29uZmlnLT5kcF9kc2NfY2ZnOwotCXUxNiBj
b21wcmVzc2VkX2JwcCA9IHBpcGVfY29uZmlnLT5kc2NfcGFyYW1zLmNvbXByZXNzZWRfYnBwOwor
CXUxNiBjb21wcmVzc2VkX2JwcCA9IHBpcGVfY29uZmlnLT5kc2MuY29tcHJlc3NlZF9icHA7CiAJ
dTggaSA9IDA7CiAJaW50IHJvd19pbmRleCA9IDA7CiAJaW50IGNvbHVtbl9pbmRleCA9IDA7CkBA
IC0zMzIsNyArMzMyLDcgQEAgaW50IGludGVsX2RwX2NvbXB1dGVfZHNjX3BhcmFtcyhzdHJ1Y3Qg
aW50ZWxfZHAgKmludGVsX2RwLAogCXZkc2NfY2ZnLT5waWNfd2lkdGggPSBwaXBlX2NvbmZpZy0+
YmFzZS5hZGp1c3RlZF9tb2RlLmNydGNfaGRpc3BsYXk7CiAJdmRzY19jZmctPnBpY19oZWlnaHQg
PSBwaXBlX2NvbmZpZy0+YmFzZS5hZGp1c3RlZF9tb2RlLmNydGNfdmRpc3BsYXk7CiAJdmRzY19j
ZmctPnNsaWNlX3dpZHRoID0gRElWX1JPVU5EX1VQKHZkc2NfY2ZnLT5waWNfd2lkdGgsCi0JCQkJ
CSAgICAgcGlwZV9jb25maWctPmRzY19wYXJhbXMuc2xpY2VfY291bnQpOworCQkJCQkgICAgIHBp
cGVfY29uZmlnLT5kc2Muc2xpY2VfY291bnQpOwogCS8qCiAJICogU2xpY2UgSGVpZ2h0IG9mIDgg
d29ya3MgZm9yIGFsbCBjdXJyZW50bHkgYXZhaWxhYmxlIHBhbmVscy4gU28gc3RhcnQKIAkgKiB3
aXRoIHRoYXQgaWYgcGljX2hlaWdodCBpcyBhbiBpbnRlZ3JhbCBtdWx0aXBsZSBvZiA4LgpAQCAt
NDkxLDcgKzQ5MSw3IEBAIHN0YXRpYyB2b2lkIGludGVsX2NvbmZpZ3VyZV9wcHNfZm9yX2RzY19l
bmNvZGVyKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCXUzMiBwcHNfdmFsID0gMDsK
IAl1MzIgcmNfYnVmX3RocmVzaF9kd29yZFs0XTsKIAl1MzIgcmNfcmFuZ2VfcGFyYW1zX2R3b3Jk
WzhdOwotCXU4IG51bV92ZHNjX2luc3RhbmNlcyA9IChjcnRjX3N0YXRlLT5kc2NfcGFyYW1zLmRz
Y19zcGxpdCkgPyAyIDogMTsKKwl1OCBudW1fdmRzY19pbnN0YW5jZXMgPSAoY3J0Y19zdGF0ZS0+
ZHNjLmRzY19zcGxpdCkgPyAyIDogMTsKIAlpbnQgaSA9IDA7CiAKIAkvKiBQb3B1bGF0ZSBQSUNU
VVJFX1BBUkFNRVRFUl9TRVRfMCByZWdpc3RlcnMgKi8KQEAgLTUxNCwxMSArNTE0LDExIEBAIHN0
YXRpYyB2b2lkIGludGVsX2NvbmZpZ3VyZV9wcHNfZm9yX2RzY19lbmNvZGVyKHN0cnVjdCBpbnRl
bF9lbmNvZGVyICplbmNvZGVyLAogCQkgKiBJZiAyIFZEU0MgaW5zdGFuY2VzIGFyZSBuZWVkZWQs
IGNvbmZpZ3VyZSBQUFMgZm9yIHNlY29uZAogCQkgKiBWRFNDCiAJCSAqLwotCQlpZiAoY3J0Y19z
dGF0ZS0+ZHNjX3BhcmFtcy5kc2Nfc3BsaXQpCisJCWlmIChjcnRjX3N0YXRlLT5kc2MuZHNjX3Nw
bGl0KQogCQkJSTkxNV9XUklURShEU0NDX1BJQ1RVUkVfUEFSQU1FVEVSX1NFVF8wLCBwcHNfdmFs
KTsKIAl9IGVsc2UgewogCQlJOTE1X1dSSVRFKElDTF9EU0MwX1BJQ1RVUkVfUEFSQU1FVEVSX1NF
VF8wKHBpcGUpLCBwcHNfdmFsKTsKLQkJaWYgKGNydGNfc3RhdGUtPmRzY19wYXJhbXMuZHNjX3Nw
bGl0KQorCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmRzY19zcGxpdCkKIAkJCUk5MTVfV1JJVEUoSUNM
X0RTQzFfUElDVFVSRV9QQVJBTUVURVJfU0VUXzAocGlwZSksCiAJCQkJICAgcHBzX3ZhbCk7CiAJ
fQpAQCAtNTMzLDExICs1MzMsMTEgQEAgc3RhdGljIHZvaWQgaW50ZWxfY29uZmlndXJlX3Bwc19m
b3JfZHNjX2VuY29kZXIoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCSAqIElmIDIg
VkRTQyBpbnN0YW5jZXMgYXJlIG5lZWRlZCwgY29uZmlndXJlIFBQUyBmb3Igc2Vjb25kCiAJCSAq
IFZEU0MKIAkJICovCi0JCWlmIChjcnRjX3N0YXRlLT5kc2NfcGFyYW1zLmRzY19zcGxpdCkKKwkJ
aWYgKGNydGNfc3RhdGUtPmRzYy5kc2Nfc3BsaXQpCiAJCQlJOTE1X1dSSVRFKERTQ0NfUElDVFVS
RV9QQVJBTUVURVJfU0VUXzEsIHBwc192YWwpOwogCX0gZWxzZSB7CiAJCUk5MTVfV1JJVEUoSUNM
X0RTQzBfUElDVFVSRV9QQVJBTUVURVJfU0VUXzEocGlwZSksIHBwc192YWwpOwotCQlpZiAoY3J0
Y19zdGF0ZS0+ZHNjX3BhcmFtcy5kc2Nfc3BsaXQpCisJCWlmIChjcnRjX3N0YXRlLT5kc2MuZHNj
X3NwbGl0KQogCQkJSTkxNV9XUklURShJQ0xfRFNDMV9QSUNUVVJFX1BBUkFNRVRFUl9TRVRfMShw
aXBlKSwKIAkJCQkgICBwcHNfdmFsKTsKIAl9CkBAIC01NTMsMTEgKzU1MywxMSBAQCBzdGF0aWMg
dm9pZCBpbnRlbF9jb25maWd1cmVfcHBzX2Zvcl9kc2NfZW5jb2RlcihzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqZW5jb2RlciwKIAkJICogSWYgMiBWRFNDIGluc3RhbmNlcyBhcmUgbmVlZGVkLCBjb25m
aWd1cmUgUFBTIGZvciBzZWNvbmQKIAkJICogVkRTQwogCQkgKi8KLQkJaWYgKGNydGNfc3RhdGUt
PmRzY19wYXJhbXMuZHNjX3NwbGl0KQorCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmRzY19zcGxpdCkK
IAkJCUk5MTVfV1JJVEUoRFNDQ19QSUNUVVJFX1BBUkFNRVRFUl9TRVRfMiwgcHBzX3ZhbCk7CiAJ
fSBlbHNlIHsKIAkJSTkxNV9XUklURShJQ0xfRFNDMF9QSUNUVVJFX1BBUkFNRVRFUl9TRVRfMihw
aXBlKSwgcHBzX3ZhbCk7Ci0JCWlmIChjcnRjX3N0YXRlLT5kc2NfcGFyYW1zLmRzY19zcGxpdCkK
KwkJaWYgKGNydGNfc3RhdGUtPmRzYy5kc2Nfc3BsaXQpCiAJCQlJOTE1X1dSSVRFKElDTF9EU0Mx
X1BJQ1RVUkVfUEFSQU1FVEVSX1NFVF8yKHBpcGUpLAogCQkJCSAgIHBwc192YWwpOwogCX0KQEAg
LTU3MywxMSArNTczLDExIEBAIHN0YXRpYyB2b2lkIGludGVsX2NvbmZpZ3VyZV9wcHNfZm9yX2Rz
Y19lbmNvZGVyKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkgKiBJZiAyIFZEU0Mg
aW5zdGFuY2VzIGFyZSBuZWVkZWQsIGNvbmZpZ3VyZSBQUFMgZm9yIHNlY29uZAogCQkgKiBWRFND
CiAJCSAqLwotCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjX3BhcmFtcy5kc2Nfc3BsaXQpCisJCWlmIChj
cnRjX3N0YXRlLT5kc2MuZHNjX3NwbGl0KQogCQkJSTkxNV9XUklURShEU0NDX1BJQ1RVUkVfUEFS
QU1FVEVSX1NFVF8zLCBwcHNfdmFsKTsKIAl9IGVsc2UgewogCQlJOTE1X1dSSVRFKElDTF9EU0Mw
X1BJQ1RVUkVfUEFSQU1FVEVSX1NFVF8zKHBpcGUpLCBwcHNfdmFsKTsKLQkJaWYgKGNydGNfc3Rh
dGUtPmRzY19wYXJhbXMuZHNjX3NwbGl0KQorCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmRzY19zcGxp
dCkKIAkJCUk5MTVfV1JJVEUoSUNMX0RTQzFfUElDVFVSRV9QQVJBTUVURVJfU0VUXzMocGlwZSks
CiAJCQkJICAgcHBzX3ZhbCk7CiAJfQpAQCAtNTkzLDExICs1OTMsMTEgQEAgc3RhdGljIHZvaWQg
aW50ZWxfY29uZmlndXJlX3Bwc19mb3JfZHNjX2VuY29kZXIoc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXIsCiAJCSAqIElmIDIgVkRTQyBpbnN0YW5jZXMgYXJlIG5lZWRlZCwgY29uZmlndXJl
IFBQUyBmb3Igc2Vjb25kCiAJCSAqIFZEU0MKIAkJICovCi0JCWlmIChjcnRjX3N0YXRlLT5kc2Nf
cGFyYW1zLmRzY19zcGxpdCkKKwkJaWYgKGNydGNfc3RhdGUtPmRzYy5kc2Nfc3BsaXQpCiAJCQlJ
OTE1X1dSSVRFKERTQ0NfUElDVFVSRV9QQVJBTUVURVJfU0VUXzQsIHBwc192YWwpOwogCX0gZWxz
ZSB7CiAJCUk5MTVfV1JJVEUoSUNMX0RTQzBfUElDVFVSRV9QQVJBTUVURVJfU0VUXzQocGlwZSks
IHBwc192YWwpOwotCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjX3BhcmFtcy5kc2Nfc3BsaXQpCisJCWlm
IChjcnRjX3N0YXRlLT5kc2MuZHNjX3NwbGl0KQogCQkJSTkxNV9XUklURShJQ0xfRFNDMV9QSUNU
VVJFX1BBUkFNRVRFUl9TRVRfNChwaXBlKSwKIAkJCQkgICBwcHNfdmFsKTsKIAl9CkBAIC02MTMs
MTEgKzYxMywxMSBAQCBzdGF0aWMgdm9pZCBpbnRlbF9jb25maWd1cmVfcHBzX2Zvcl9kc2NfZW5j
b2RlcihzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJICogSWYgMiBWRFNDIGluc3Rh
bmNlcyBhcmUgbmVlZGVkLCBjb25maWd1cmUgUFBTIGZvciBzZWNvbmQKIAkJICogVkRTQwogCQkg
Ki8KLQkJaWYgKGNydGNfc3RhdGUtPmRzY19wYXJhbXMuZHNjX3NwbGl0KQorCQlpZiAoY3J0Y19z
dGF0ZS0+ZHNjLmRzY19zcGxpdCkKIAkJCUk5MTVfV1JJVEUoRFNDQ19QSUNUVVJFX1BBUkFNRVRF
Ul9TRVRfNSwgcHBzX3ZhbCk7CiAJfSBlbHNlIHsKIAkJSTkxNV9XUklURShJQ0xfRFNDMF9QSUNU
VVJFX1BBUkFNRVRFUl9TRVRfNShwaXBlKSwgcHBzX3ZhbCk7Ci0JCWlmIChjcnRjX3N0YXRlLT5k
c2NfcGFyYW1zLmRzY19zcGxpdCkKKwkJaWYgKGNydGNfc3RhdGUtPmRzYy5kc2Nfc3BsaXQpCiAJ
CQlJOTE1X1dSSVRFKElDTF9EU0MxX1BJQ1RVUkVfUEFSQU1FVEVSX1NFVF81KHBpcGUpLAogCQkJ
CSAgIHBwc192YWwpOwogCX0KQEAgLTYzNSwxMSArNjM1LDExIEBAIHN0YXRpYyB2b2lkIGludGVs
X2NvbmZpZ3VyZV9wcHNfZm9yX2RzY19lbmNvZGVyKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNv
ZGVyLAogCQkgKiBJZiAyIFZEU0MgaW5zdGFuY2VzIGFyZSBuZWVkZWQsIGNvbmZpZ3VyZSBQUFMg
Zm9yIHNlY29uZAogCQkgKiBWRFNDCiAJCSAqLwotCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjX3BhcmFt
cy5kc2Nfc3BsaXQpCisJCWlmIChjcnRjX3N0YXRlLT5kc2MuZHNjX3NwbGl0KQogCQkJSTkxNV9X
UklURShEU0NDX1BJQ1RVUkVfUEFSQU1FVEVSX1NFVF82LCBwcHNfdmFsKTsKIAl9IGVsc2Ugewog
CQlJOTE1X1dSSVRFKElDTF9EU0MwX1BJQ1RVUkVfUEFSQU1FVEVSX1NFVF82KHBpcGUpLCBwcHNf
dmFsKTsKLQkJaWYgKGNydGNfc3RhdGUtPmRzY19wYXJhbXMuZHNjX3NwbGl0KQorCQlpZiAoY3J0
Y19zdGF0ZS0+ZHNjLmRzY19zcGxpdCkKIAkJCUk5MTVfV1JJVEUoSUNMX0RTQzFfUElDVFVSRV9Q
QVJBTUVURVJfU0VUXzYocGlwZSksCiAJCQkJICAgcHBzX3ZhbCk7CiAJfQpAQCAtNjU1LDExICs2
NTUsMTEgQEAgc3RhdGljIHZvaWQgaW50ZWxfY29uZmlndXJlX3Bwc19mb3JfZHNjX2VuY29kZXIo
c3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCSAqIElmIDIgVkRTQyBpbnN0YW5jZXMg
YXJlIG5lZWRlZCwgY29uZmlndXJlIFBQUyBmb3Igc2Vjb25kCiAJCSAqIFZEU0MKIAkJICovCi0J
CWlmIChjcnRjX3N0YXRlLT5kc2NfcGFyYW1zLmRzY19zcGxpdCkKKwkJaWYgKGNydGNfc3RhdGUt
PmRzYy5kc2Nfc3BsaXQpCiAJCQlJOTE1X1dSSVRFKERTQ0NfUElDVFVSRV9QQVJBTUVURVJfU0VU
XzcsIHBwc192YWwpOwogCX0gZWxzZSB7CiAJCUk5MTVfV1JJVEUoSUNMX0RTQzBfUElDVFVSRV9Q
QVJBTUVURVJfU0VUXzcocGlwZSksIHBwc192YWwpOwotCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjX3Bh
cmFtcy5kc2Nfc3BsaXQpCisJCWlmIChjcnRjX3N0YXRlLT5kc2MuZHNjX3NwbGl0KQogCQkJSTkx
NV9XUklURShJQ0xfRFNDMV9QSUNUVVJFX1BBUkFNRVRFUl9TRVRfNyhwaXBlKSwKIAkJCQkgICBw
cHNfdmFsKTsKIAl9CkBAIC02NzUsMTEgKzY3NSwxMSBAQCBzdGF0aWMgdm9pZCBpbnRlbF9jb25m
aWd1cmVfcHBzX2Zvcl9kc2NfZW5jb2RlcihzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwK
IAkJICogSWYgMiBWRFNDIGluc3RhbmNlcyBhcmUgbmVlZGVkLCBjb25maWd1cmUgUFBTIGZvciBz
ZWNvbmQKIAkJICogVkRTQwogCQkgKi8KLQkJaWYgKGNydGNfc3RhdGUtPmRzY19wYXJhbXMuZHNj
X3NwbGl0KQorCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmRzY19zcGxpdCkKIAkJCUk5MTVfV1JJVEUo
RFNDQ19QSUNUVVJFX1BBUkFNRVRFUl9TRVRfOCwgcHBzX3ZhbCk7CiAJfSBlbHNlIHsKIAkJSTkx
NV9XUklURShJQ0xfRFNDMF9QSUNUVVJFX1BBUkFNRVRFUl9TRVRfOChwaXBlKSwgcHBzX3ZhbCk7
Ci0JCWlmIChjcnRjX3N0YXRlLT5kc2NfcGFyYW1zLmRzY19zcGxpdCkKKwkJaWYgKGNydGNfc3Rh
dGUtPmRzYy5kc2Nfc3BsaXQpCiAJCQlJOTE1X1dSSVRFKElDTF9EU0MxX1BJQ1RVUkVfUEFSQU1F
VEVSX1NFVF84KHBpcGUpLAogCQkJCSAgIHBwc192YWwpOwogCX0KQEAgLTY5NSwxMSArNjk1LDEx
IEBAIHN0YXRpYyB2b2lkIGludGVsX2NvbmZpZ3VyZV9wcHNfZm9yX2RzY19lbmNvZGVyKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkgKiBJZiAyIFZEU0MgaW5zdGFuY2VzIGFyZSBu
ZWVkZWQsIGNvbmZpZ3VyZSBQUFMgZm9yIHNlY29uZAogCQkgKiBWRFNDCiAJCSAqLwotCQlpZiAo
Y3J0Y19zdGF0ZS0+ZHNjX3BhcmFtcy5kc2Nfc3BsaXQpCisJCWlmIChjcnRjX3N0YXRlLT5kc2Mu
ZHNjX3NwbGl0KQogCQkJSTkxNV9XUklURShEU0NDX1BJQ1RVUkVfUEFSQU1FVEVSX1NFVF85LCBw
cHNfdmFsKTsKIAl9IGVsc2UgewogCQlJOTE1X1dSSVRFKElDTF9EU0MwX1BJQ1RVUkVfUEFSQU1F
VEVSX1NFVF85KHBpcGUpLCBwcHNfdmFsKTsKLQkJaWYgKGNydGNfc3RhdGUtPmRzY19wYXJhbXMu
ZHNjX3NwbGl0KQorCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmRzY19zcGxpdCkKIAkJCUk5MTVfV1JJ
VEUoSUNMX0RTQzFfUElDVFVSRV9QQVJBTUVURVJfU0VUXzkocGlwZSksCiAJCQkJICAgcHBzX3Zh
bCk7CiAJfQpAQCAtNzE3LDExICs3MTcsMTEgQEAgc3RhdGljIHZvaWQgaW50ZWxfY29uZmlndXJl
X3Bwc19mb3JfZHNjX2VuY29kZXIoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCSAq
IElmIDIgVkRTQyBpbnN0YW5jZXMgYXJlIG5lZWRlZCwgY29uZmlndXJlIFBQUyBmb3Igc2Vjb25k
CiAJCSAqIFZEU0MKIAkJICovCi0JCWlmIChjcnRjX3N0YXRlLT5kc2NfcGFyYW1zLmRzY19zcGxp
dCkKKwkJaWYgKGNydGNfc3RhdGUtPmRzYy5kc2Nfc3BsaXQpCiAJCQlJOTE1X1dSSVRFKERTQ0Nf
UElDVFVSRV9QQVJBTUVURVJfU0VUXzEwLCBwcHNfdmFsKTsKIAl9IGVsc2UgewogCQlJOTE1X1dS
SVRFKElDTF9EU0MwX1BJQ1RVUkVfUEFSQU1FVEVSX1NFVF8xMChwaXBlKSwgcHBzX3ZhbCk7Ci0J
CWlmIChjcnRjX3N0YXRlLT5kc2NfcGFyYW1zLmRzY19zcGxpdCkKKwkJaWYgKGNydGNfc3RhdGUt
PmRzYy5kc2Nfc3BsaXQpCiAJCQlJOTE1X1dSSVRFKElDTF9EU0MxX1BJQ1RVUkVfUEFSQU1FVEVS
X1NFVF8xMChwaXBlKSwKIAkJCQkgICBwcHNfdmFsKTsKIAl9CkBAIC03NDAsMTEgKzc0MCwxMSBA
QCBzdGF0aWMgdm9pZCBpbnRlbF9jb25maWd1cmVfcHBzX2Zvcl9kc2NfZW5jb2RlcihzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJICogSWYgMiBWRFNDIGluc3RhbmNlcyBhcmUgbmVl
ZGVkLCBjb25maWd1cmUgUFBTIGZvciBzZWNvbmQKIAkJICogVkRTQwogCQkgKi8KLQkJaWYgKGNy
dGNfc3RhdGUtPmRzY19wYXJhbXMuZHNjX3NwbGl0KQorCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmRz
Y19zcGxpdCkKIAkJCUk5MTVfV1JJVEUoRFNDQ19QSUNUVVJFX1BBUkFNRVRFUl9TRVRfMTYsIHBw
c192YWwpOwogCX0gZWxzZSB7CiAJCUk5MTVfV1JJVEUoSUNMX0RTQzBfUElDVFVSRV9QQVJBTUVU
RVJfU0VUXzE2KHBpcGUpLCBwcHNfdmFsKTsKLQkJaWYgKGNydGNfc3RhdGUtPmRzY19wYXJhbXMu
ZHNjX3NwbGl0KQorCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmRzY19zcGxpdCkKIAkJCUk5MTVfV1JJ
VEUoSUNMX0RTQzFfUElDVFVSRV9QQVJBTUVURVJfU0VUXzE2KHBpcGUpLAogCQkJCSAgIHBwc192
YWwpOwogCX0KQEAgLTc2Myw3ICs3NjMsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9jb25maWd1cmVf
cHBzX2Zvcl9kc2NfZW5jb2RlcihzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJSTkx
NV9XUklURShEU0NBX1JDX0JVRl9USFJFU0hfMF9VRFcsIHJjX2J1Zl90aHJlc2hfZHdvcmRbMV0p
OwogCQlJOTE1X1dSSVRFKERTQ0FfUkNfQlVGX1RIUkVTSF8xLCByY19idWZfdGhyZXNoX2R3b3Jk
WzJdKTsKIAkJSTkxNV9XUklURShEU0NBX1JDX0JVRl9USFJFU0hfMV9VRFcsIHJjX2J1Zl90aHJl
c2hfZHdvcmRbM10pOwotCQlpZiAoY3J0Y19zdGF0ZS0+ZHNjX3BhcmFtcy5kc2Nfc3BsaXQpIHsK
KwkJaWYgKGNydGNfc3RhdGUtPmRzYy5kc2Nfc3BsaXQpIHsKIAkJCUk5MTVfV1JJVEUoRFNDQ19S
Q19CVUZfVEhSRVNIXzAsCiAJCQkJICAgcmNfYnVmX3RocmVzaF9kd29yZFswXSk7CiAJCQlJOTE1
X1dSSVRFKERTQ0NfUkNfQlVGX1RIUkVTSF8wX1VEVywKQEAgLTc4Miw3ICs3ODIsNyBAQCBzdGF0
aWMgdm9pZCBpbnRlbF9jb25maWd1cmVfcHBzX2Zvcl9kc2NfZW5jb2RlcihzdHJ1Y3QgaW50ZWxf
ZW5jb2RlciAqZW5jb2RlciwKIAkJCSAgIHJjX2J1Zl90aHJlc2hfZHdvcmRbMl0pOwogCQlJOTE1
X1dSSVRFKElDTF9EU0MwX1JDX0JVRl9USFJFU0hfMV9VRFcocGlwZSksCiAJCQkgICByY19idWZf
dGhyZXNoX2R3b3JkWzNdKTsKLQkJaWYgKGNydGNfc3RhdGUtPmRzY19wYXJhbXMuZHNjX3NwbGl0
KSB7CisJCWlmIChjcnRjX3N0YXRlLT5kc2MuZHNjX3NwbGl0KSB7CiAJCQlJOTE1X1dSSVRFKElD
TF9EU0MxX1JDX0JVRl9USFJFU0hfMChwaXBlKSwKIAkJCQkgICByY19idWZfdGhyZXNoX2R3b3Jk
WzBdKTsKIAkJCUk5MTVfV1JJVEUoSUNMX0RTQzFfUkNfQlVGX1RIUkVTSF8wX1VEVyhwaXBlKSwK
QEAgLTgyNCw3ICs4MjQsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9jb25maWd1cmVfcHBzX2Zvcl9k
c2NfZW5jb2RlcihzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJCSAgIHJjX3Jhbmdl
X3BhcmFtc19kd29yZFs2XSk7CiAJCUk5MTVfV1JJVEUoRFNDQV9SQ19SQU5HRV9QQVJBTUVURVJT
XzNfVURXLAogCQkJICAgcmNfcmFuZ2VfcGFyYW1zX2R3b3JkWzddKTsKLQkJaWYgKGNydGNfc3Rh
dGUtPmRzY19wYXJhbXMuZHNjX3NwbGl0KSB7CisJCWlmIChjcnRjX3N0YXRlLT5kc2MuZHNjX3Nw
bGl0KSB7CiAJCQlJOTE1X1dSSVRFKERTQ0NfUkNfUkFOR0VfUEFSQU1FVEVSU18wLAogCQkJCSAg
IHJjX3JhbmdlX3BhcmFtc19kd29yZFswXSk7CiAJCQlJOTE1X1dSSVRFKERTQ0NfUkNfUkFOR0Vf
UEFSQU1FVEVSU18wX1VEVywKQEAgLTg1OSw3ICs4NTksNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9j
b25maWd1cmVfcHBzX2Zvcl9kc2NfZW5jb2RlcihzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2Rl
ciwKIAkJCSAgIHJjX3JhbmdlX3BhcmFtc19kd29yZFs2XSk7CiAJCUk5MTVfV1JJVEUoSUNMX0RT
QzBfUkNfUkFOR0VfUEFSQU1FVEVSU18zX1VEVyhwaXBlKSwKIAkJCSAgIHJjX3JhbmdlX3BhcmFt
c19kd29yZFs3XSk7Ci0JCWlmIChjcnRjX3N0YXRlLT5kc2NfcGFyYW1zLmRzY19zcGxpdCkgewor
CQlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmRzY19zcGxpdCkgewogCQkJSTkxNV9XUklURShJQ0xfRFND
MV9SQ19SQU5HRV9QQVJBTUVURVJTXzAocGlwZSksCiAJCQkJICAgcmNfcmFuZ2VfcGFyYW1zX2R3
b3JkWzBdKTsKIAkJCUk5MTVfV1JJVEUoSUNMX0RTQzFfUkNfUkFOR0VfUEFSQU1FVEVSU18wX1VE
VyhwaXBlKSwKQEAgLTkwOSw3ICs5MDksNyBAQCB2b2lkIGludGVsX2RzY19lbmFibGUoc3RydWN0
IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJdTMyIGRzc19jdGwxX3ZhbCA9IDA7CiAJdTMyIGRz
c19jdGwyX3ZhbCA9IDA7CiAKLQlpZiAoIWNydGNfc3RhdGUtPmRzY19wYXJhbXMuY29tcHJlc3Np
b25fZW5hYmxlKQorCWlmICghY3J0Y19zdGF0ZS0+ZHNjLmNvbXByZXNzaW9uX2VuYWJsZSkKIAkJ
cmV0dXJuOwogCiAJLyogRW5hYmxlIFBvd2VyIHdlbGxzIGZvciBWRFNDL2pvaW5pbmcgKi8KQEAg
LTkyOCw3ICs5MjgsNyBAQCB2b2lkIGludGVsX2RzY19lbmFibGUoc3RydWN0IGludGVsX2VuY29k
ZXIgKmVuY29kZXIsCiAJCWRzc19jdGwyX3JlZyA9IElDTF9QSVBFX0RTU19DVEwyKHBpcGUpOwog
CX0KIAlkc3NfY3RsMl92YWwgfD0gTEVGVF9CUkFOQ0hfVkRTQ19FTkFCTEU7Ci0JaWYgKGNydGNf
c3RhdGUtPmRzY19wYXJhbXMuZHNjX3NwbGl0KSB7CisJaWYgKGNydGNfc3RhdGUtPmRzYy5kc2Nf
c3BsaXQpIHsKIAkJZHNzX2N0bDJfdmFsIHw9IFJJR0hUX0JSQU5DSF9WRFNDX0VOQUJMRTsKIAkJ
ZHNzX2N0bDFfdmFsIHw9IEpPSU5FUl9FTkFCTEU7CiAJfQpAQCAtOTQ0LDcgKzk0NCw3IEBAIHZv
aWQgaW50ZWxfZHNjX2Rpc2FibGUoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9j
cnRjX3N0YXRlKQogCWk5MTVfcmVnX3QgZHNzX2N0bDFfcmVnLCBkc3NfY3RsMl9yZWc7CiAJdTMy
IGRzc19jdGwxX3ZhbCA9IDAsIGRzc19jdGwyX3ZhbCA9IDA7CiAKLQlpZiAoIW9sZF9jcnRjX3N0
YXRlLT5kc2NfcGFyYW1zLmNvbXByZXNzaW9uX2VuYWJsZSkKKwlpZiAoIW9sZF9jcnRjX3N0YXRl
LT5kc2MuY29tcHJlc3Npb25fZW5hYmxlKQogCQlyZXR1cm47CiAKIAlpZiAob2xkX2NydGNfc3Rh
dGUtPmNwdV90cmFuc2NvZGVyID09IFRSQU5TQ09ERVJfRURQKSB7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZGVidWdmcy5jCmluZGV4IGFkYTU3ZWVlOTE0YS4uNTBmMmEzOTJmMDBlIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2RlYnVnZnMuYwpAQCAtNDU2Niw3ICs0NTY2LDcgQEAgc3RhdGljIGludCBp
OTE1X2RzY19mZWNfc3VwcG9ydF9zaG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkK
IAkJaW50ZWxfZHAgPSBlbmNfdG9faW50ZWxfZHAoJmludGVsX2F0dGFjaGVkX2VuY29kZXIoY29u
bmVjdG9yKS0+YmFzZSk7CiAJCWNydGNfc3RhdGUgPSB0b19pbnRlbF9jcnRjX3N0YXRlKGNydGMt
PnN0YXRlKTsKIAkJc2VxX3ByaW50ZihtLCAiRFNDX0VuYWJsZWQ6ICVzXG4iLAotCQkJICAgeWVz
bm8oY3J0Y19zdGF0ZS0+ZHNjX3BhcmFtcy5jb21wcmVzc2lvbl9lbmFibGUpKTsKKwkJCSAgIHll
c25vKGNydGNfc3RhdGUtPmRzYy5jb21wcmVzc2lvbl9lbmFibGUpKTsKIAkJc2VxX3ByaW50Ziht
LCAiRFNDX1NpbmtfU3VwcG9ydDogJXNcbiIsCiAJCQkgICB5ZXNubyhkcm1fZHBfc2lua19zdXBw
b3J0c19kc2MoaW50ZWxfZHAtPmRzY19kcGNkKSkpOwogCQlzZXFfcHJpbnRmKG0sICJGb3JjZV9E
U0NfRW5hYmxlOiAlc1xuIiwKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vaW50ZWwtZ2Z4

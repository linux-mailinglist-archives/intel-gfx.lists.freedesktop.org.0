Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4EAB41DC3CA
	for <lists+intel-gfx@lfdr.de>; Thu, 21 May 2020 02:38:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 517876E8CE;
	Thu, 21 May 2020 00:38:12 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D5C0F6E8C8
 for <intel-gfx@lists.freedesktop.org>; Thu, 21 May 2020 00:38:07 +0000 (UTC)
IronPort-SDR: wIwKilrRh3+15lOzUgFpXLctEUcmxSdyIJ1LHuG0s7tCxnil6VCx6EjvxO4AAk5Q6irVOFI2+U
 uQDMAgXZ5hlA==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by fmsmga105.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 20 May 2020 17:38:07 -0700
IronPort-SDR: VeY5Cai83x8ZmayDblnm6ywduyUGMMEU3OJtC9quRvc2olhb2nfcf5wd6JyaJu9LVAdXSANSLd
 QLcriBgFj28w==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.73,415,1583222400"; d="scan'208";a="466720859"
Received: from ldmartin1-desk.jf.intel.com ([10.165.21.151])
 by fmsmga006.fm.intel.com with ESMTP; 20 May 2020 17:38:07 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 20 May 2020 17:37:30 -0700
Message-Id: <20200521003803.18936-5-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20200521003803.18936-1-lucas.demarchi@intel.com>
References: <20200521003803.18936-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 04/37] drm/i915/rkl: provide port/phy mapping
 for vbt
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: fernando.pacheco@intel.com, Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UktMIHVzZXMgdGhlIERESSBBLCBEREkgQiwgRERJIFVTQkMxLCBEREkgVVNCQzIgZnJvbSB0aGUg
REUgcG9pbnQgb2YKdmlldywgc28gYWxsIERESS9waXBlL3RyYW5zY29kZXIgcmVnaXN0ZXIgdXNl
IHRoZXNlIGluZGV4ZXMgdG8gcmVmZXIgdG8KdGhlbS4gQ29tYm8gcGh5IGFuZCBJTyBmdW5jdGlv
bnMgZm9sbG93IGFub3RoZXIgbmFtZXNwYWNlIHRoYXQgd2Uga2VlcAphcyAiZW51bSBwaHkiLiBU
aGUgVkJUIGluIHRoZW9yeSB3b3VsZCB1c2UgdGhlIERFIHBvaW50IG9mIHZpZXcsIGJ1dAp0aGF0
IGRvZXMgbm90IGhhcHBlbiBpbiBwcmFjdGljZS4KClByb3ZpZGUgYSB0YWJsZSB0byBjb252ZXJ0
IHRoZSBjaGlsZCBkZXZpY2VzIHRvIHRoZSAiY29ycmVjdCIgcG9ydApudW1iZXJpbmcgd2UgdXNl
LiBOb3cgdGhpcyBpcyB0aGUgb3V0cHV0IHdlIGdldCB3aGlsZSByZWFkaW5nIHRoZSBWQlQ6CgpE
RElBOgpbZHJtOmludGVsX2Jpb3NfcG9ydF9hdXhfY2ggW2k5MTVdXSB1c2luZyBBVVggQSBmb3Ig
cG9ydCBBIChWQlQpCltkcm06aW50ZWxfZHBfaW5pdF9jb25uZWN0b3IgW2k5MTVdXSBBZGRpbmcg
RFAgY29ubmVjdG9yIG9uIFtFTkNPREVSOjI3NTpEREkgQV0KW2RybTppbnRlbF9oZG1pX2luaXRf
Y29ubmVjdG9yIFtpOTE1XV0gQWRkaW5nIEhETUkgY29ubmVjdG9yIG9uIFtFTkNPREVSOjI3NTpE
REkgQV0KW2RybTppbnRlbF9oZG1pX2luaXRfY29ubmVjdG9yIFtpOTE1XV0gVXNpbmcgRERDIHBp
biAweDEgZm9yIHBvcnQgQSAoVkJUKQoKRERJQjoKW2RybTppbnRlbF9iaW9zX3BvcnRfYXV4X2No
IFtpOTE1XV0gdXNpbmcgQVVYIEIgZm9yIHBvcnQgQiAocGxhdGZvcm0gZGVmYXVsdCkKW2RybTpp
bnRlbF9oZG1pX2luaXRfY29ubmVjdG9yIFtpOTE1XV0gQWRkaW5nIEhETUkgY29ubmVjdG9yIG9u
IFtFTkNPREVSOjI5MTpEREkgQl0KW2RybTppbnRlbF9oZG1pX2luaXRfY29ubmVjdG9yIFtpOTE1
XV0gVXNpbmcgRERDIHBpbiAweDIgZm9yIHBvcnQgQiAoVkJUKQoKRERJIFVTQkMxOgpbZHJtOmlu
dGVsX2Jpb3NfcG9ydF9hdXhfY2ggW2k5MTVdXSB1c2luZyBBVVggRCBmb3IgcG9ydCBEIChWQlQp
Cltkcm06aW50ZWxfZHBfaW5pdF9jb25uZWN0b3IgW2k5MTVdXSBBZGRpbmcgRFAgY29ubmVjdG9y
IG9uIFtFTkNPREVSOjI5NTpEREkgRF0KW2RybTppbnRlbF9oZG1pX2luaXRfY29ubmVjdG9yIFtp
OTE1XV0gQWRkaW5nIEhETUkgY29ubmVjdG9yIG9uIFtFTkNPREVSOjI5NTpEREkgRF0KW2RybTpp
bnRlbF9oZG1pX2luaXRfY29ubmVjdG9yIFtpOTE1XV0gVXNpbmcgRERDIHBpbiAweDMgZm9yIHBv
cnQgRCAoVkJUKQoKRERJIFVTQkMyOgpbZHJtOmludGVsX2Jpb3NfcG9ydF9hdXhfY2ggW2k5MTVd
XSB1c2luZyBBVVggRSBmb3IgcG9ydCBFIChWQlQpCltkcm06aW50ZWxfZHBfaW5pdF9jb25uZWN0
b3IgW2k5MTVdXSBBZGRpbmcgRFAgY29ubmVjdG9yIG9uIFtFTkNPREVSOjMwNjpEREkgRV0KW2Ry
bTppbnRlbF9oZG1pX2luaXRfY29ubmVjdG9yIFtpOTE1XV0gQWRkaW5nIEhETUkgY29ubmVjdG9y
IG9uIFtFTkNPREVSOjMwNjpEREkgRV0KW2RybTppbnRlbF9oZG1pX2luaXRfY29ubmVjdG9yIFtp
OTE1XV0gVXNpbmcgRERDIHBpbiAweDkgZm9yIHBvcnQgRSAoVkJUKQoKQ2M6IENsaW50b24gVGF5
bG9yIDxDbGludG9uLkEuVGF5bG9yQGludGVsLmNvbT4KQ2M6IEFkaXR5YSBTd2FydXAgPGFkaXR5
YS5zd2FydXBAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBMdWNhcyBEZSBNYXJjaGkgPGx1Y2Fz
LmRlbWFyY2hpQGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogTWF0dCBSb3BlciA8bWF0dGhldy5k
LnJvcGVyQGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3ly
amFsYUBsaW51eC5pbnRlbC5jb20+Ckxpbms6IGh0dHBzOi8vcGF0Y2h3b3JrLmZyZWVkZXNrdG9w
Lm9yZy9wYXRjaC9tc2dpZC8yMDIwMDUwNDIyNTIyNy40NjQ2NjYtMTUtbWF0dGhldy5kLnJvcGVy
QGludGVsLmNvbQotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5j
IHwgNzIgKysrKysrKysrKysrKysrKy0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA1MSBpbnNlcnRp
b25zKCspLCAyMSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2Jpb3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfYmlvcy5jCmluZGV4IDgzOTEyNDY0NzIwMi4uNGYxYTcyYTkwYjhmIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jpb3MuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jpb3MuYwpAQCAtMTYxOSwzMCArMTYxOSwxOCBAQCBz
dGF0aWMgdTggbWFwX2RkY19waW4oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCB1
OCB2YnRfcGluKQogCXJldHVybiAwOwogfQogCi1zdGF0aWMgZW51bSBwb3J0IGR2b19wb3J0X3Rv
X3BvcnQodTggZHZvX3BvcnQpCitzdGF0aWMgZW51bSBwb3J0IF9fZHZvX3BvcnRfdG9fcG9ydChp
bnQgbl9wb3J0cywgaW50IG5fZHZvLAorCQkJCSAgICBjb25zdCBpbnQgcG9ydF9tYXBwaW5nW11b
M10sIHU4IGR2b19wb3J0KQogewotCS8qCi0JICogRWFjaCBEREkgcG9ydCBjYW4gaGF2ZSBtb3Jl
IHRoYW4gb25lIHZhbHVlIG9uIHRoZSAiRFZPIFBvcnQiIGZpZWxkLAotCSAqIHNvIGxvb2sgZm9y
IGFsbCB0aGUgcG9zc2libGUgdmFsdWVzIGZvciBlYWNoIHBvcnQuCi0JICovCi0Jc3RhdGljIGNv
bnN0IGludCBkdm9fcG9ydHNbXVszXSA9IHsKLQkJW1BPUlRfQV0gPSB7IERWT19QT1JUX0hETUlB
LCBEVk9fUE9SVF9EUEEsIC0xfSwKLQkJW1BPUlRfQl0gPSB7IERWT19QT1JUX0hETUlCLCBEVk9f
UE9SVF9EUEIsIC0xfSwKLQkJW1BPUlRfQ10gPSB7IERWT19QT1JUX0hETUlDLCBEVk9fUE9SVF9E
UEMsIC0xfSwKLQkJW1BPUlRfRF0gPSB7IERWT19QT1JUX0hETUlELCBEVk9fUE9SVF9EUEQsIC0x
fSwKLQkJW1BPUlRfRV0gPSB7IERWT19QT1JUX0NSVCwgRFZPX1BPUlRfSERNSUUsIERWT19QT1JU
X0RQRX0sCi0JCVtQT1JUX0ZdID0geyBEVk9fUE9SVF9IRE1JRiwgRFZPX1BPUlRfRFBGLCAtMX0s
Ci0JCVtQT1JUX0ddID0geyBEVk9fUE9SVF9IRE1JRywgRFZPX1BPUlRfRFBHLCAtMX0sCi0JfTsK
IAllbnVtIHBvcnQgcG9ydDsKIAlpbnQgaTsKIAotCWZvciAocG9ydCA9IFBPUlRfQTsgcG9ydCA8
IEFSUkFZX1NJWkUoZHZvX3BvcnRzKTsgcG9ydCsrKSB7Ci0JCWZvciAoaSA9IDA7IGkgPCBBUlJB
WV9TSVpFKGR2b19wb3J0c1twb3J0XSk7IGkrKykgewotCQkJaWYgKGR2b19wb3J0c1twb3J0XVtp
XSA9PSAtMSkKKwlmb3IgKHBvcnQgPSBQT1JUX0E7IHBvcnQgPCBuX3BvcnRzOyBwb3J0KyspIHsK
KwkJZm9yIChpID0gMDsgaSA8IG5fZHZvOyBpKyspIHsKKwkJCWlmIChwb3J0X21hcHBpbmdbcG9y
dF1baV0gPT0gLTEpCiAJCQkJYnJlYWs7CiAKLQkJCWlmIChkdm9fcG9ydCA9PSBkdm9fcG9ydHNb
cG9ydF1baV0pCisJCQlpZiAoZHZvX3BvcnQgPT0gcG9ydF9tYXBwaW5nW3BvcnRdW2ldKQogCQkJ
CXJldHVybiBwb3J0OwogCQl9CiAJfQpAQCAtMTY1MCw2ICsxNjM4LDQ4IEBAIHN0YXRpYyBlbnVt
IHBvcnQgZHZvX3BvcnRfdG9fcG9ydCh1OCBkdm9fcG9ydCkKIAlyZXR1cm4gUE9SVF9OT05FOwog
fQogCitzdGF0aWMgZW51bSBwb3J0IGR2b19wb3J0X3RvX3BvcnQoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2LAorCQkJCSAgdTggZHZvX3BvcnQpCit7CisJLyoKKwkgKiBFYWNoIERE
SSBwb3J0IGNhbiBoYXZlIG1vcmUgdGhhbiBvbmUgdmFsdWUgb24gdGhlICJEVk8gUG9ydCIgZmll
bGQsCisJICogc28gbG9vayBmb3IgYWxsIHRoZSBwb3NzaWJsZSB2YWx1ZXMgZm9yIGVhY2ggcG9y
dC4KKwkgKi8KKwlzdGF0aWMgY29uc3QgaW50IHBvcnRfbWFwcGluZ1tdWzNdID0geworCQlbUE9S
VF9BXSA9IHsgRFZPX1BPUlRfSERNSUEsIERWT19QT1JUX0RQQSwgLTEgfSwKKwkJW1BPUlRfQl0g
PSB7IERWT19QT1JUX0hETUlCLCBEVk9fUE9SVF9EUEIsIC0xIH0sCisJCVtQT1JUX0NdID0geyBE
Vk9fUE9SVF9IRE1JQywgRFZPX1BPUlRfRFBDLCAtMSB9LAorCQlbUE9SVF9EXSA9IHsgRFZPX1BP
UlRfSERNSUQsIERWT19QT1JUX0RQRCwgLTEgfSwKKwkJW1BPUlRfRV0gPSB7IERWT19QT1JUX0NS
VCwgRFZPX1BPUlRfSERNSUUsIC0xIH0sCisJCVtQT1JUX0ZdID0geyBEVk9fUE9SVF9IRE1JRiwg
RFZPX1BPUlRfRFBGLCAtMSB9LAorCQlbUE9SVF9HXSA9IHsgRFZPX1BPUlRfSERNSUcsIERWT19Q
T1JUX0RQRywgLTEgfSwKKwl9OworCS8qCisJICogQnNwZWMgbGlzdHMgdGhlIHBvcnRzIGFzIEEs
IEIsIEMsIEQgLSBob3dldmVyIGludGVybmFsbHkgaW4gb3VyCisJICogZHJpdmVyIHdlIGtlZXAg
dGhlbSBhcyBQT1JUX0EsIFBPUlRfQiwgUE9SVF9EIGFuZCBQT1JUX0Ugc28gdGhlCisJICogcmVn
aXN0ZXJzIGluIERpc3BsYXkgRW5naW5lIG1hdGNoIHRoZSByaWdodCBvZmZzZXRzLiBBcHBseSB0
aGUKKwkgKiBtYXBwaW5nIGhlcmUgdG8gdHJhbnNsYXRlIGZyb20gVkJUIHRvIGludGVybmFsIGNv
bnZlbnRpb24uCisJICovCisJc3RhdGljIGNvbnN0IGludCBya2xfcG9ydF9tYXBwaW5nW11bM10g
PSB7CisJCVtQT1JUX0FdID0geyBEVk9fUE9SVF9IRE1JQSwgRFZPX1BPUlRfRFBBLCAtMSB9LAor
CQlbUE9SVF9CXSA9IHsgRFZPX1BPUlRfSERNSUIsIERWT19QT1JUX0RQQiwgLTEgfSwKKwkJW1BP
UlRfQ10gPSB7IC0xIH0sCisJCVtQT1JUX0RdID0geyBEVk9fUE9SVF9IRE1JQywgRFZPX1BPUlRf
RFBDLCAtMSB9LAorCQlbUE9SVF9FXSA9IHsgRFZPX1BPUlRfSERNSUQsIERWT19QT1JUX0RQRCwg
LTEgfSwKKwl9OworCisJaWYgKElTX1JPQ0tFVExBS0UoZGV2X3ByaXYpKQorCQlyZXR1cm4gX19k
dm9fcG9ydF90b19wb3J0KEFSUkFZX1NJWkUocmtsX3BvcnRfbWFwcGluZyksCisJCQkJCSAgQVJS
QVlfU0laRShya2xfcG9ydF9tYXBwaW5nWzBdKSwKKwkJCQkJICBya2xfcG9ydF9tYXBwaW5nLAor
CQkJCQkgIGR2b19wb3J0KTsKKwllbHNlCisJCXJldHVybiBfX2R2b19wb3J0X3RvX3BvcnQoQVJS
QVlfU0laRShwb3J0X21hcHBpbmcpLAorCQkJCQkgIEFSUkFZX1NJWkUocG9ydF9tYXBwaW5nWzBd
KSwKKwkJCQkJICBwb3J0X21hcHBpbmcsCisJCQkJCSAgZHZvX3BvcnQpOworfQorCiBzdGF0aWMg
dm9pZCBwYXJzZV9kZGlfcG9ydChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJ
CQkgICBzdHJ1Y3QgZGlzcGxheV9kZXZpY2VfZGF0YSAqZGV2ZGF0YSwKIAkJCSAgIHU4IGJkYl92
ZXJzaW9uKQpAQCAtMTY1OSw3ICsxNjg5LDcgQEAgc3RhdGljIHZvaWQgcGFyc2VfZGRpX3BvcnQo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCWJvb2wgaXNfZHZpLCBpc19oZG1p
LCBpc19kcCwgaXNfZWRwLCBpc19jcnQ7CiAJZW51bSBwb3J0IHBvcnQ7CiAKLQlwb3J0ID0gZHZv
X3BvcnRfdG9fcG9ydChjaGlsZC0+ZHZvX3BvcnQpOworCXBvcnQgPSBkdm9fcG9ydF90b19wb3J0
KGRldl9wcml2LCBjaGlsZC0+ZHZvX3BvcnQpOwogCWlmIChwb3J0ID09IFBPUlRfTk9ORSkKIAkJ
cmV0dXJuOwogCkBAIC0yNjAzLDEwICsyNjMzLDEwIEBAIGVudW0gYXV4X2NoIGludGVsX2Jpb3Nf
cG9ydF9hdXhfY2goc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQlhdXhfY2gg
PSBBVVhfQ0hfQjsKIAkJYnJlYWs7CiAJY2FzZSBEUF9BVVhfQzoKLQkJYXV4X2NoID0gQVVYX0NI
X0M7CisJCWF1eF9jaCA9IElTX1JPQ0tFVExBS0UoZGV2X3ByaXYpID8gQVVYX0NIX0QgOiBBVVhf
Q0hfQzsKIAkJYnJlYWs7CiAJY2FzZSBEUF9BVVhfRDoKLQkJYXV4X2NoID0gQVVYX0NIX0Q7CisJ
CWF1eF9jaCA9IElTX1JPQ0tFVExBS0UoZGV2X3ByaXYpID8gQVVYX0NIX0UgOiBBVVhfQ0hfRDsK
IAkJYnJlYWs7CiAJY2FzZSBEUF9BVVhfRToKIAkJYXV4X2NoID0gQVVYX0NIX0U7Ci0tIAoyLjI2
LjIKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

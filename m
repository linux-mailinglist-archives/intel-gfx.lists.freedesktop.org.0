Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DE3152778B7
	for <lists+intel-gfx@lfdr.de>; Thu, 24 Sep 2020 20:49:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 111438800A;
	Thu, 24 Sep 2020 18:49:06 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0C6BC6EB4C
 for <intel-gfx@lists.freedesktop.org>; Thu, 24 Sep 2020 18:49:05 +0000 (UTC)
IronPort-SDR: 86LbhAtG6pUFUIVoY76kjH+76O7tUAQs90Zy4eIgX2lEM/rfswdadSOgbViMQyPaVMrXa56JxI
 CHpWse1d+szA==
X-IronPort-AV: E=McAfee;i="6000,8403,9754"; a="179396891"
X-IronPort-AV: E=Sophos;i="5.77,298,1596524400"; d="scan'208";a="179396891"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by fmsmga101.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 24 Sep 2020 11:49:02 -0700
IronPort-SDR: dXt048CMBQVAONnJ+QKOEGPykucfhlLjzfpNXzesoN+e1/4K3q0WqBCRKWFjelD6QJonHysWr7
 vIEyrdJ5egRA==
X-IronPort-AV: E=Sophos;i="5.77,298,1596524400"; d="scan'208";a="455469331"
Received: from ideak-desk.fi.intel.com (HELO localhost) ([10.237.68.141])
 by orsmga004-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 24 Sep 2020 11:49:01 -0700
From: Imre Deak <imre.deak@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 24 Sep 2020 21:48:04 +0300
Message-Id: <20200924184805.294493-6-imre.deak@intel.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20200924184805.294493-1-imre.deak@intel.com>
References: <20200924184805.294493-1-imre.deak@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 5/6] drm/i915: Switch to LTTPR transparent
 mode link training
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QnkgZGVmYXVsdCBMVFRQUnMgc2hvdWxkIGJlIGluIHRyYW5zcGFyZW50IGxpbmsgdHJhaW5pbmcg
bW9kZSwKbmV2ZXJ0aGVsZXNzIGluIHRoaXMgcGF0Y2ggd2Ugc3dpdGNoIHRvIHRoaXMgZGVmYXVs
dCBtb2RlIGV4cGxpY2l0bHkuCgpUaGUgRFAgU3RhbmRhcmQgcmVjb21tZW5kcyB0aGlzLCBzdXBw
b3NlZGx5IGJlY2F1c2UgYW4gTFRUUFIgbWF5IGJlIGxlZnQKaW4gdGhlIG5vbi10cmFuc3BhcmVu
dCBtb2RlIChieSBCSU9TLCBwcmV2aW91cyBrZXJuZWwsIG9yIGFmdGVyIHJlc2V0CmR1ZSB0byBh
IGZpcm13YXJlIGJ1ZykuIEkgaGF2ZW4ndCBzZWVuIHRoaXMgaGFwcGVuaW5nLCBidXQgbGV0J3Mg
Zm9sbG93CnRoZSBEUCBTdGFuZGFyZC4KCnYyOgotIEFkZCBhIGNvZGUgY29tbWVudCBhYm91dCB0
aGUgZXhwbGljaXQgZGlzYWJsaW5nIG9mIG5vbi10cmFuc3BhcmVudAogIG1vZGUuCgpDYzogVmls
bGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KU2lnbmVkLW9mZi1i
eTogSW1yZSBEZWFrIDxpbXJlLmRlYWtAaW50ZWwuY29tPgotLS0KIC4uLi9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHAuYyAgICAgICB8ICAzICsrCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kcF9saW5rX3RyYWluaW5nLmMgfCA1MiArKysrKysrKysrKysrKysrKysrCiAuLi4vZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kcF9saW5rX3RyYWluaW5nLmggfCAgMiArCiA0IGZpbGVzIGNo
YW5nZWQsIDU4IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCmluZGV4IDNkNGJmOWI2YTBhMi4uYjA0OTIxZWJh
NzNiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXlfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXlfdHlwZXMuaApAQCAtMTI4MCw2ICsxMjgwLDcgQEAgc3RydWN0IGludGVsX2RwIHsKIAl1OCBk
b3duc3RyZWFtX3BvcnRzW0RQX01BWF9ET1dOU1RSRUFNX1BPUlRTXTsKIAl1OCBlZHBfZHBjZFtF
RFBfRElTUExBWV9DVExfQ0FQX1NJWkVdOwogCXU4IGRzY19kcGNkW0RQX0RTQ19SRUNFSVZFUl9D
QVBfU0laRV07CisJdTggbHR0cHJfY29tbW9uX2NhcHNbRFBfTFRUUFJfQ09NTU9OX0NBUF9TSVpF
XTsKIAl1OCBmZWNfY2FwYWJsZTsKIAkvKiBzb3VyY2UgcmF0ZXMgKi8KIAlpbnQgbnVtX3NvdXJj
ZV9yYXRlczsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHAuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYwppbmRleCBiMjFm
NDIxOTNhMTEuLjY0YmY0YWEzODRkMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZHAuYwpAQCAtNDcyNiw2ICs0NzI2LDkgQEAgaW50ZWxfZHBfZ2V0X2RwY2Qoc3RydWN0IGlu
dGVsX2RwICppbnRlbF9kcCkKIHsKIAlpbnQgcmV0OwogCisJaWYgKCFpbnRlbF9kcF9pc19lZHAo
aW50ZWxfZHApKQorCQlpbnRlbF9kcF9sdHRwcl9pbml0KGludGVsX2RwKTsKKwogCWlmIChkcm1f
ZHBfcmVhZF9kcGNkX2NhcHMoJmludGVsX2RwLT5hdXgsIGludGVsX2RwLT5kcGNkKSkKIAkJcmV0
dXJuIGZhbHNlOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2RwX2xpbmtfdHJhaW5pbmcuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZHBfbGlua190cmFpbmluZy5jCmluZGV4IDM4ZDQ1NTM2NzBhMS4uNGY4ZjQyY2MyNWZhIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX2xpbmtfdHJh
aW5pbmcuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX2xpbmtf
dHJhaW5pbmcuYwpAQCAtMzQsNiArMzQsNTIgQEAgaW50ZWxfZHBfZHVtcF9saW5rX3N0YXR1cyhj
b25zdCB1OCBsaW5rX3N0YXR1c1tEUF9MSU5LX1NUQVRVU19TSVpFXSkKIAkJICAgICAgbGlua19z
dGF0dXNbM10sIGxpbmtfc3RhdHVzWzRdLCBsaW5rX3N0YXR1c1s1XSk7CiB9CiAKK3N0YXRpYyBi
b29sIGludGVsX2RwX3JlYWRfbHR0cHJfY29tbW9uX2NhcHMoc3RydWN0IGludGVsX2RwICppbnRl
bF9kcCkKK3sKKwlpZiAoZHJtX2RwX3JlYWRfbHR0cHJfY29tbW9uX2NhcHMoJmludGVsX2RwLT5h
dXgsCisJCQkJCSAgaW50ZWxfZHAtPmx0dHByX2NvbW1vbl9jYXBzKSA8IDApIHsKKwkJbWVtc2V0
KGludGVsX2RwLT5sdHRwcl9jb21tb25fY2FwcywgMCwKKwkJICAgICAgIHNpemVvZihpbnRlbF9k
cC0+bHR0cHJfY29tbW9uX2NhcHMpKTsKKwkJcmV0dXJuIGZhbHNlOworCX0KKworCWRybV9kYmdf
a21zKCZkcF90b19pOTE1KGludGVsX2RwKS0+ZHJtLAorCQkgICAgIkxUVFBSIGNvbW1vbiBjYXBh
YmlsaXRpZXM6ICUqcGhcbiIsCisJCSAgICAoaW50KXNpemVvZihpbnRlbF9kcC0+bHR0cHJfY29t
bW9uX2NhcHMpLAorCQkgICAgaW50ZWxfZHAtPmx0dHByX2NvbW1vbl9jYXBzKTsKKworCXJldHVy
biB0cnVlOworfQorCitzdGF0aWMgYm9vbAoraW50ZWxfZHBfc2V0X2x0dHByX3RyYW5zcGFyZW50
X21vZGUoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwgYm9vbCBlbmFibGUpCit7CisJdTggdmFs
ID0gZW5hYmxlID8gRFBfUEhZX1JFUEVBVEVSX01PREVfVFJBTlNQQVJFTlQgOgorCQkJICBEUF9Q
SFlfUkVQRUFURVJfTU9ERV9OT05fVFJBTlNQQVJFTlQ7CisKKwlyZXR1cm4gZHJtX2RwX2RwY2Rf
d3JpdGUoJmludGVsX2RwLT5hdXgsIERQX1BIWV9SRVBFQVRFUl9NT0RFLCAmdmFsLCAxKSA9PSAx
OworfQorCisvKioKKyAqIGludGVsX2RwX2x0dHByX2luaXQgLSBkZXRlY3QgTFRUUFJzIGFuZCBp
bml0IHRoZSBMVFRQUiBsaW5rIHRyYWluaW5nIG1vZGUKKyAqIEBpbnRlbF9kcDogSW50ZWwgRFAg
c3RydWN0CisgKgorICogUmVhZCB0aGUgTFRUUFIgY29tbW9uIGNhcGFiaWxpdGllcyBhbmQgc3dp
dGNoIHRvIHRyYW5zcGFyZW50IGxpbmsgdHJhaW5pbmcKKyAqIG1vZGUuCisgKi8KK2ludCBpbnRl
bF9kcF9sdHRwcl9pbml0KHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHApCit7CisJaW50ZWxfZHBf
cmVhZF9sdHRwcl9jb21tb25fY2FwcyhpbnRlbF9kcCk7CisKKwkvKgorCSAqIFNlZSBEUCBTdGFu
ZGFyZCB2Mi4wIDMuNi42LjEuIGFib3V0IHRoZSBleHBsaWNpdCBkaXNhYmxpbmcgb2YKKwkgKiBu
b24tdHJhbnNwYXJlbnQgbW9kZS4KKwkgKi8KKwlpbnRlbF9kcF9zZXRfbHR0cHJfdHJhbnNwYXJl
bnRfbW9kZShpbnRlbF9kcCwgdHJ1ZSk7CisKKwlyZXR1cm4gMDsKK30KKwogc3RhdGljIHU4IGRw
X3ZvbHRhZ2VfbWF4KHU4IHByZWVtcGgpCiB7CiAJc3dpdGNoIChwcmVlbXBoICYgRFBfVFJBSU5f
UFJFX0VNUEhBU0lTX01BU0spIHsKQEAgLTQ3MSw2ICs1MTcsMTIgQEAgc3RhdGljIHZvaWQgaW50
ZWxfZHBfc2NoZWR1bGVfZmFsbGJhY2tfbGlua190cmFpbmluZyhzdHJ1Y3QgaW50ZWxfZHAgKmlu
dGVsX2RwKQogICovCiB2b2lkIGludGVsX2RwX3N0YXJ0X2xpbmtfdHJhaW4oc3RydWN0IGludGVs
X2RwICppbnRlbF9kcCkKIHsKKwkvKgorCSAqIFRPRE86IFJlaW5pdGluZyBMVFRQUnMgaGVyZSB3
b24ndCBiZSBuZWVkZWQgb25jZSBwcm9wZXIgY29ubmVjdG9yCisJICogSFcgc3RhdGUgcmVhZG91
dCBpcyBhZGRlZC4KKwkgKi8KKwlpbnRlbF9kcF9sdHRwcl9pbml0KGludGVsX2RwKTsKKwogCWlm
ICghaW50ZWxfZHBfbGlua190cmFpbihpbnRlbF9kcCkpCiAJCWludGVsX2RwX3NjaGVkdWxlX2Zh
bGxiYWNrX2xpbmtfdHJhaW5pbmcoaW50ZWxfZHApOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcF9saW5rX3RyYWluaW5nLmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX2xpbmtfdHJhaW5pbmcuaAppbmRleCA1MThkODM0
ZGJjOTguLjM1MzZjZTczYTEyMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kcF9saW5rX3RyYWluaW5nLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kcF9saW5rX3RyYWluaW5nLmgKQEAgLTEwLDYgKzEwLDggQEAKIAogc3Ry
dWN0IGludGVsX2RwOwogCitpbnQgaW50ZWxfZHBfbHR0cHJfaW5pdChzdHJ1Y3QgaW50ZWxfZHAg
KmludGVsX2RwKTsKKwogdm9pZCBpbnRlbF9kcF9nZXRfYWRqdXN0X3RyYWluKHN0cnVjdCBpbnRl
bF9kcCAqaW50ZWxfZHAsCiAJCQkgICAgICAgY29uc3QgdTggbGlua19zdGF0dXNbRFBfTElOS19T
VEFUVVNfU0laRV0pOwogdm9pZCBpbnRlbF9kcF9zdGFydF9saW5rX3RyYWluKHN0cnVjdCBpbnRl
bF9kcCAqaW50ZWxfZHApOwotLSAKMi4yNS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9pbnRlbC1nZngK

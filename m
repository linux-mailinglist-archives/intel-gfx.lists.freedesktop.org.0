Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id F1BFBB9366
	for <lists+intel-gfx@lfdr.de>; Fri, 20 Sep 2019 16:51:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C8C7D6E06B;
	Fri, 20 Sep 2019 14:51:41 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D142A6E06B
 for <intel-gfx@lists.freedesktop.org>; Fri, 20 Sep 2019 14:51:40 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Sep 2019 07:51:40 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,528,1559545200"; d="scan'208";a="199753845"
Received: from leonidf-mobl.ger.corp.intel.com (HELO [10.252.3.171])
 ([10.252.3.171])
 by orsmga002.jf.intel.com with ESMTP; 20 Sep 2019 07:51:39 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20190920083624.4601-1-chris@chris-wilson.co.uk>
 <76c44bf4-158d-fde4-3416-646707998c76@linux.intel.com>
 <156898335823.1196.4090501817698348244@skylake-alporthouse-com>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <fbfcbc94-60c2-f38d-404e-b3576f8bc8e7@linux.intel.com>
Date: Fri, 20 Sep 2019 15:51:35 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <156898335823.1196.4090501817698348244@skylake-alporthouse-com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH] drm/i915: Prevent bonded requests from
 overtaking each other on preemption
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDIwLzA5LzIwMTkgMTM6NDIsIENocmlzIFdpbHNvbiB3cm90ZToKPiBRdW90aW5nIFR2cnRr
byBVcnN1bGluICgyMDE5LTA5LTIwIDEzOjI0OjQ3KQo+Pgo+PiBPbiAyMC8wOS8yMDE5IDA5OjM2
LCBDaHJpcyBXaWxzb24gd3JvdGU6Cj4+PiBGb3JjZSBib25kZWQgcmVxdWVzdHMgdG8gcnVuIG9u
IGRpc3RpbmN0IGVuZ2luZXMgc28gdGhhdCB0aGV5IGNhbm5vdCBiZQo+Pj4gc2h1ZmZsZWQgb250
byB0aGUgc2FtZSBlbmdpbmUgd2hlcmUgdGltZXNsaWNpbmcgd2lsbCByZXZlcnNlIHRoZSBvcmRl
ci4KPj4+IEEgYm9uZGVkIHJlcXVlc3Qgd2lsbCBvZnRlbiB3YWl0IG9uIGEgc2VtYXBob3JlIHNp
Z25hbGVkIGJ5IGl0cyBtYXN0ZXIsCj4+PiBjcmVhdGluZyBhbiBpbXBsaWNpdCBkZXBlbmRlbmN5
IC0tIGlmIHdlIGlnbm9yZSB0aGF0IGltcGxpY2l0IGRlcGVuZGVuY3kKPj4+IGFuZCBhbGxvdyB0
aGUgYm9uZGVkIHJlcXVlc3QgdG8gcnVuIG9uIHRoZSBzYW1lIGVuZ2luZSBhbmQgYmVmb3JlIGl0
cwo+Pj4gbWFzdGVyLCB3ZSB3aWxsIGNhdXNlIGEgR1BVIGhhbmcuCj4+Pgo+Pj4gV2UgY2FuIHBy
ZXZlbnQgdGhpcyBpbnZlcnNpb24gYnkgcmVzdHJpY3Rpbmcgd2hpY2ggZW5naW5lcyB3ZSBhbGxv
dwo+Pj4gb3Vyc2VsdmVzIHRvIGp1bXAgdG8gdXBvbiBwcmVlbXB0aW9uLCBpLmUuIGJha2luZyBp
biB0aGUgYXJyYW5nZW1lbnQKPj4+IGVzdGFibGlzaGVkIGF0IGZpcnN0IGV4ZWN1dGlvbi4gKFdl
IHNob3VsZCBhbHNvIGNvbnNpZGVyIGNhcHR1cmluZyB0aGUKPj4+IGltcGxpY2l0IGRlcGVuZGVu
Y3kgdXNpbmcgaTkxNV9zY2hlZF9hZGRfZGVwZW5kZW5jeSgpLCBidXQgZmlyc3Qgd2UgbmVlZAo+
Pj4gdG8gdGhpbmsgYWJvdXQgdGhlIGNvbnN0cmFpbnRzIHRoYXQgcmVxdWlyZXMgb24gdGhlIGV4
ZWN1dGlvbi9yZXRpcmVtZW50Cj4+PiBvcmRlcmluZy4pCj4+Pgo+Pj4gRml4ZXM6IDhlZTM2ZTA0
OGM5OCAoImRybS9pOTE1L2V4ZWNsaXN0czogTWluaW1hbGlzdGljIHRpbWVzbGljaW5nIikKPj4+
IFJlZmVyZW5jZXM6IGVlMTEzNjkwOGU5YiAoImRybS9pOTE1L2V4ZWNsaXN0czogVmlydHVhbCBl
bmdpbmUgYm9uZGluZyIpCj4+PiBTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNo
cmlzLXdpbHNvbi5jby51az4KPj4+IENjOiBNaWthIEt1b3BwYWxhIDxtaWthLmt1b3BwYWxhQGxp
bnV4LmludGVsLmNvbT4KPj4+IENjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50
ZWwuY29tPgo+Pj4gLS0tCj4+PiAgICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMu
YyB8IDE5ICsrKysrKysrKysrLS0tLS0tLS0KPj4+ICAgIDEgZmlsZSBjaGFuZ2VkLCAxMSBpbnNl
cnRpb25zKCspLCA4IGRlbGV0aW9ucygtKQo+Pj4KPj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2xyYy5jCj4+PiBpbmRleCBhOTkxNjZhMmQyZWIuLjc5MjA2NDllNGQ4NyAxMDA2NDQKPj4+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCj4+PiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwo+Pj4gQEAgLTM3NTUsMTggKzM3NTUsMjEgQEAg
c3RhdGljIHZvaWQKPj4+ICAgIHZpcnR1YWxfYm9uZF9leGVjdXRlKHN0cnVjdCBpOTE1X3JlcXVl
c3QgKnJxLCBzdHJ1Y3QgZG1hX2ZlbmNlICpzaWduYWwpCj4+PiAgICB7Cj4+PiAgICAgICAgc3Ry
dWN0IHZpcnR1YWxfZW5naW5lICp2ZSA9IHRvX3ZpcnR1YWxfZW5naW5lKHJxLT5lbmdpbmUpOwo+
Pj4gKyAgICAgaW50ZWxfZW5naW5lX21hc2tfdCBhbGxvd2VkLCBleGVjOwo+Pj4gICAgICAgIHN0
cnVjdCB2ZV9ib25kICpib25kOwo+Pj4gICAgCj4+PiAgICAgICAgYm9uZCA9IHZpcnR1YWxfZmlu
ZF9ib25kKHZlLCB0b19yZXF1ZXN0KHNpZ25hbCktPmVuZ2luZSk7Cj4+PiAtICAgICBpZiAoYm9u
ZCkgewo+Pj4gLSAgICAgICAgICAgICBpbnRlbF9lbmdpbmVfbWFza190IG9sZCwgbmV3LCBjbXA7
Cj4+PiArICAgICBpZiAoIWJvbmQpCj4+PiArICAgICAgICAgICAgIHJldHVybjsKPj4+ICAgIAo+
Pj4gLSAgICAgICAgICAgICBjbXAgPSBSRUFEX09OQ0UocnEtPmV4ZWN1dGlvbl9tYXNrKTsKPj4+
IC0gICAgICAgICAgICAgZG8gewo+Pj4gLSAgICAgICAgICAgICAgICAgICAgIG9sZCA9IGNtcDsK
Pj4+IC0gICAgICAgICAgICAgICAgICAgICBuZXcgPSBjbXAgJiBib25kLT5zaWJsaW5nX21hc2s7
Cj4+PiAtICAgICAgICAgICAgIH0gd2hpbGUgKChjbXAgPSBjbXB4Y2hnKCZycS0+ZXhlY3V0aW9u
X21hc2ssIG9sZCwgbmV3KSkgIT0gb2xkKTsKPj4+IC0gICAgIH0KPj4+ICsgICAgIC8qIFJlc3Ry
aWN0IHRoZSBib25kZWQgcmVxdWVzdCB0byBydW4gb24gb25seSB0aGUgc2xhdmVkIGVuZ2luZXMg
Ki8KPj4+ICsgICAgIGFsbG93ZWQgPSBib25kLT5zaWJsaW5nX21hc2sgJiB+dG9fcmVxdWVzdChz
aWduYWwpLT5lbmdpbmUtPm1hc2s7Cj4+Cj4+IEhtbS4uIGlzbid0IGl0IGEgbWlzcyBvbiB0aGUg
dWFwaSBsZXZlbCB0aGF0IHdlIGFsbG93IG1hc3RlciB0byBiZQo+PiBtZW50aW9uZWQgaW4gdGhl
IGxpc3Qgb2YgYm9uZHM/IFRoYXQncyB0aGUgb25seSBzY2VuYXJpbyB3aGVyZSB0aGlzIGxpbmUK
Pj4gZG9lcyBzb21ldGhpbmcgSSB0aGluay4gU28gc2hvdWxkIHdlIGp1c3QgZm9yYmlkIHRoaXMg
c2V0dXAgb24gdGhlIHVhcGkKPj4gbGV2ZWw/Cj4gCj4gVGhhdCdzIGp1c3QgYSBsb3Qgb2YgZGln
Z2luZyEKCkl0J3Mgc2ltcGxlLCBpbiBzZXRfZW5naW5lc19fYm9uZCBpbiB0aGUgYm9uZHMgbG9v
cCB3ZSBqdXN0IGRvICJpZiAKKG1hc3RlciA9PSBib25kKSBvaF9ub195b3Vfd29udCIuIEFtIEkg
bWlzc2luZyBzb21ldGhpbmc/Cgo+Pj4gKyAgICAgZXhlYyA9IFJFQURfT05DRShycS0+ZXhlY3V0
aW9uX21hc2spOwo+Pj4gKyAgICAgd2hpbGUgKCF0cnlfY21weGNoZygmcnEtPmV4ZWN1dGlvbl9t
YXNrLCAmZXhlYywgZXhlYyAmIGFsbG93ZWQpKQo+Pj4gKyAgICAgICAgICAgICA7Cj4+PiArCj4+
PiArICAgICAvKiBQcmV2ZW50IHRoZSBtYXN0ZXIgZnJvbSBiZWluZyByZS1ydW4gb24gdGhlIHNs
YXZlZCBlbmdpbmVzICovCj4+PiArICAgICB0b19yZXF1ZXN0KHNpZ25hbCktPmV4ZWN1dGlvbl9t
YXNrICY9IH5hbGxvd2VkOwo+Pgo+PiBUaGlzIHNvdW5kcyB1bmZvcnR1bmF0ZSBmb3IgZnV0dXJl
IHNjaGVkdWxpbmcuIFRoZXJlIHNob3VsZG4ndCBiZSBhCj4+IGZ1bmRhbWVudGFsIHJlYXNvbiB3
aHkgbmV4dCBleGVjdXRpb24gZm9yIHRoZSBtYXN0ZXIgY291bGRuJ3QgYmUgb24gYW4KPj4gZW5n
aW5lIHdoaWNoIGNhbiBhbHNvIGJlIGEgc2xhdmUuIFNvIGlmIHdlIGhhdmU6Cj4gCj4gTm90ZSB0
aG91Z2ggdGhhdCB3ZSBkbyBub3QgcmVzZXQgdGhlIGV4ZWN1dGlvbl9tYXNrIGF0IGFueSBwb2lu
dCA6KQo+IFRoYXQncyBhY3R1YWxseSBoYXJkZXIgdG8gZG8gdGhhbiBpdCBzb3VuZHMsIGFzIGFm
dGVyIHRoZSBib25kZWQKPiBleGVjdXRpb24sIHRoZXkgYXJlIG5vIGxvbmdlciBsaW5rZWQuIDp8
Cj4gCj4+IG1hc3Rlcgo+PiAgICAgLnZlbmc9dmNzMCx2Y3MxCj4+IHNsYXZlCj4+ICAgICAudmVu
Zz12Y3MwLHZjczEKPj4gICAgIC5ib25kKG1hc3Rlcj12Y3MwLCBtYXNrPXZjczEpCj4+ICAgICAu
Ym9uZChtYXN0ZXI9dmNzMSwgbWFzaz12Y3MwKQo+Pgo+PiBUaGlzIHNob3VsZCBiZSBhbGxvd2Vk
IHNldHVwIGJ1dCB3aXRoIHRoaXMgY2hhbmdlIGl0IHdvdWxkIGZpeCB0aGUKPj4gbWFzdGVyIHRv
IG9ubHkgYmUgb25lIG9mIHRoZSBvcHRpb25zLgo+IAo+IEl0IHdvdWxkIGZpeCBpdCB0byB0aGUg
Zmlyc3Qgb25lIGl0IHNlbGVjdGVkIGFuZCBleGVjdXRlZCBvbi4gSXQgY2FuCj4gc3RpbGwgcGlj
ayBlaXRoZXIgdmNzMCBvciB2Y3MxIGFuZCB0aGUgc2xhdmUgd291bGQgdGhlbiBiZSBvbiB2Y3Mx
IG9yCj4gdmNzMCByZXNwZWN0aXZlbHkuCj4gCj4+IElzIHRoZSByZWFsIHByb2JsZW0gdGhhdCBh
ZnRlciBwcmVlbXB0aW9uIGZvciB0aW1lc2xpY2luZyBhbmQgc3Vic2VxdWVudAo+PiByZS1zdWJt
aXQgd2UgbWlzcyBzb21lIGhvb2tzIHRvIHJlLWV2YWx1YXRlIHRoZSBib25kZWQgcmVsYXRpb25z
aGlwPwo+IAo+IFRoYXQgZG9lc24ndCBleGlzdCwgeWVzLiBCdXQgaXQncyBtb3JlIHRoYW4gdGhh
dCwgYXMgd2UgZG9uJ3QgaGF2ZSB0aGUKPiBub3Rpb24gb2YgZ2xvYmFsIHByZWVtcHRpb24gLS0g
d2UgZG9uJ3QgZXZhbHVhdGUgYmV0d2VlbiBlbmdpbmVzIHdoZXRoZXIKPiBvciBub3QgdGhlcmUg
YXJlIGNyb3NzIGRlcGVuZGVuY2llcy4KPiAgIAo+PiBJIGd1ZXNzIGxvb2tpbmcgd291bGQgYmUg
aGFyZCB0byBkbyBhbnkgcGVla2luZyBmcm9tIG9uZSBzdWJtaXNzaW9uCj4+IHRhc2tsZXQgdG8g
YW5vdGhlciAoZGlmZmVyZW50IGVuZ2luZXMpIHRvIGNoZWNrIGlmIG9uZSBvZiB0aGUgcGFpciBp
cwo+PiBhbHJlYWR5IGV4ZWN1dGluZyBhZ2FpbiBhbmQgc28gdG8gcGljayB0aGUgb3RoZXIgZW5k
IGNvcnJlY3RseT8KPiAKPiBIYXJkIGluZGVlZC4gSSB3b3VsZCB0aHJvdyBhIGZsYWcgb250byB0
aGUgcmVxdWVzdCB0aGF0IHNheXMgaWYgeW91Cj4gcHJlZW1wdCBtZSwgc3RvcCB0aGUgd29ybGQg
KGludGVsX2VuZ2luZV9tYXNrX3QgcGVyaGFwcykuIEV2ZW4gdGhhdAo+IHJlcXVpcmVzIHNvbWUg
dHJpY2tzIHdlIGRvbid0IHlldCBoYXZlLiBCdXQgd2UgY2FuJ3QgdG91Y2ggdGhlIG90aGVyCj4g
ZW5naW5lcyB3aXRoaW4gdGhlIHRhc2tsZXQgdW5sZXNzIHdlIGNhbiBjb21lIHVwIHdpdGggYSBs
b2NrbGVzcwo+IHN0cmF0ZWd5IChoZW5jZSB0aGUgc3RyYXRlZ3kgb2YgcHVudGluZyB0byBhIHN1
cHJlbWUgdGhyZWFkIHdpdGgKPiBvdmVyc2lnaHQgb2YgYWxsIGVuZ2luZXMsIGdhaC4pCj4gICAK
Pj4gSSB0aGluayBpbiBwcmFjdGljYWwgdGVybXMgZm9yIG1lZGlhIHRoaXMgd29yayBzaW5jZSB0
aGV5IGFyZSBub3QKPj4gc2V0dGluZyBpdCB1cCBsaWtlIG15IHNrZXRjaCBzaG93cy4gU28gaXQg
Y291bGQgYmUganVzdCBmaW5lIGluIHByYWN0aWNlCj4+IGZvciBjdXJyZW50IHVzZXJzLgo+IAo+
IEkgdGhpbmsgeW91ciBleGFtcGxlIHdvcmtzIGJldHRlciB0aGFuIHlvdSB0aGluayAtLSB3ZSBq
dXN0IGVuZCB1cAo+IGNvbmNyZXRlZCBpbnRvIG91ciBmaXJzdCBjaG9pY2UgYW5kIGNhbid0IGp1
bXAgYXJvdW5kIGhvZ3MgaW4gdGhlCj4gc3lzdGVtLiAoRm9yIGV4YW1wbGUsIHRvIHByb3ZlIHRo
ZSBhYm92ZSwgd2UgY2FuIGxhdW5jaCB0d28gc3VjaCB0YXNrcywKPiB3aXRoIGEgc3Bpbm5lciBh
cyBib3RoIG1hc3RlcnMgYW5kIHRoZSBzeXN0ZW0gc2hvdWxkIGdldCBzdHVjayBvbiBib3RoCj4g
c3Bpbm5lcnMuKQo+IAo+IEhvd2V2ZXIsIEknbSBjdXJyZW50bHkgZHJlYWRpbmcgd3JpdGluZyB0
aGUgdGVzdCBjYXNlIGZvciB0aGlzLgoKTm8sIHlvdSBhcmUgcmlnaHQsIGFzIHVzdWFsLi4gSSB3
YXMgd3JvbmdseSB0aGlua2luZyB0aGUgdmVuZyBtYXNrIGZvciAKdGhlIG1hc3RlciBjb250ZXh0
IHdvdWxkIGJlIGNoYW5nZWQgd2hpbGUgaXQgaXMgb25seSBhIHNpbmdsZSByZXF1ZXN0LiBJIApo
YXZlIG5vIGNvbXBsYWludHMgb24gdGhhdC4gSSBkb24ndCBzZWUgdGhhdCB0aGVyZSBpcyBtdWNo
IHBvaW50IHRyeWluZyAKdG8gaW1wcm92ZSBvbiBpdCByaWdodCBub3cuCgpFdmVuIHRoZSBpc3N1
ZSBvZiBtYXN0ZXIgaW4gdGhlIGJvbmQgbGlzdCBpcyBwYXNzYWJsZSBzaW5jZSBub3cgd2UgCmhh
bmRsZSBpdCBncmFjZWZ1bGx5LgoKUmV2aWV3ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28u
dXJzdWxpbkBpbnRlbC5jb20+CgpSZWdhcmRzLAoKVHZydGtvCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwt
Z2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 801E36C9A7
	for <lists+intel-gfx@lfdr.de>; Thu, 18 Jul 2019 09:02:10 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CF8A16E314;
	Thu, 18 Jul 2019 07:02:08 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7B35A6E314
 for <intel-gfx@lists.freedesktop.org>; Thu, 18 Jul 2019 07:02:07 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 17390375-1500050 
 for multiple; Thu, 18 Jul 2019 08:00:27 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 18 Jul 2019 08:00:11 +0100
Message-Id: <20190718070024.21781-7-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190718070024.21781-1-chris@chris-wilson.co.uk>
References: <20190718070024.21781-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 07/20] drm/i915/gt: Move the [class][inst]
 lookup for engines onto the GT
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VG8gbWFpbnRhaW4gYSBmYXN0IGxvb2t1cCBmcm9tIGEgR1QgY2VudHJpYyBpcnEgaGFuZGxlciwg
d2Ugd2FudCB0aGUKZW5naW5lIGxvb2t1cCB0YWJsZXMgb24gdGhlIGludGVsX2d0LiBUbyBhdm9p
ZCBoYXZpbmcgbXVsdGlwbGUgY29waWVzIG9mCnRoZSBzYW1lIG11bHRpLWRpbWVuc2lvbiBsb29r
dXAgdGFibGUsIG1vdmUgdGhlIGdlbmVyaWMgdXNlciBlbmdpbmUKbG9va3VwIGludG8gYW4gcmJ0
cmVlIChmb3IgZmFzdCBhbmQgZmxleGlibGUgaW5kZXhpbmcpLgoKdjI6IFNwbGl0IHVhYmlfaW5z
dGFuY2UgY2YgdWFiaV9jbGFzcwoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0Bj
aHJpcy13aWxzb24uY28udWs+CkNjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50
ZWwuY29tPgpDYzogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlv
QGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgICAg
ICAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMg
IHwgIDMgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oICAgICAgIHwg
IDMgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMgICAgfCA1MyAr
KysrKy0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlw
ZXMuaCB8ICA5ICsrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3VzZXIu
YyAgfCA2NiArKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lX3VzZXIuaCAgfCAyMCArKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2d0X3R5cGVzLmggICAgIHwgIDQgKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0
ZXN0X2xyYy5jICAgICAgIHwgMTUgKysrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmggICAgICAgICAgICAgIHwgIDcgKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5j
ICAgICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BtdS5jICAg
ICAgICAgICAgICB8ICAzICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3F1ZXJ5LmMgICAg
ICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3RyYWNlLmggICAgICAg
ICAgICB8IDEwICstLQogMTQgZmlsZXMgY2hhbmdlZCwgMTM4IGluc2VydGlvbnMoKyksIDYwIGRl
bGV0aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2VuZ2luZV91c2VyLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9lbmdpbmVfdXNlci5oCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQppbmRleCA1MjQ1MTYy
NTFhNDAuLmZhZmMzNzYzZGMyZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFr
ZWZpbGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKQEAgLTc0LDYgKzc0LDcg
QEAgZ3QteSArPSBcCiAJZ3QvaW50ZWxfY29udGV4dC5vIFwKIAlndC9pbnRlbF9lbmdpbmVfY3Mu
byBcCiAJZ3QvaW50ZWxfZW5naW5lX3BtLm8gXAorCWd0L2ludGVsX2VuZ2luZV91c2VyLm8gXAog
CWd0L2ludGVsX2d0Lm8gXAogCWd0L2ludGVsX2d0X3BtLm8gXAogCWd0L2ludGVsX2hhbmdjaGVj
ay5vIFwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250
ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCmluZGV4
IGRlOWJiN2FhZWYyMi4uODZjNTdjZmI2NGQyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9jb250ZXh0LmMKQEAgLTcwLDYgKzcwLDcgQEAKICNpbmNsdWRlIDxkcm0vaTkx
NV9kcm0uaD4KIAogI2luY2x1ZGUgImd0L2ludGVsX2xyY19yZWcuaCIKKyNpbmNsdWRlICJndC9p
bnRlbF9lbmdpbmVfdXNlci5oIgogCiAjaW5jbHVkZSAiaTkxNV9nZW1fY29udGV4dC5oIgogI2lu
Y2x1ZGUgImk5MTVfZ2xvYmFscy5oIgpAQCAtMTc1Myw3ICsxNzU0LDcgQEAgZ2V0X2VuZ2luZXMo
c3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwKIAogCQlpZiAoZS0+ZW5naW5lc1tuXSkgewog
CQkJY2kuZW5naW5lX2NsYXNzID0gZS0+ZW5naW5lc1tuXS0+ZW5naW5lLT51YWJpX2NsYXNzOwot
CQkJY2kuZW5naW5lX2luc3RhbmNlID0gZS0+ZW5naW5lc1tuXS0+ZW5naW5lLT5pbnN0YW5jZTsK
KwkJCWNpLmVuZ2luZV9pbnN0YW5jZSA9IGUtPmVuZ2luZXNbbl0tPmVuZ2luZS0+dWFiaV9pbnN0
YW5jZTsKIAkJfQogCiAJCWlmIChjb3B5X3RvX3VzZXIoJnVzZXItPmVuZ2luZXNbbl0sICZjaSwg
c2l6ZW9mKGNpKSkpIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKaW5kZXgg
ZGI1YzczY2U4NmVlLi4zMDg1NjM4M2U0YzUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2VuZ2luZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZS5oCkBAIC00MzIsOSArNDMyLDYgQEAgdm9pZCBpbnRlbF9lbmdpbmVfZHVtcChzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAJCSAgICAgICBzdHJ1Y3QgZHJtX3ByaW50ZXIg
Km0sCiAJCSAgICAgICBjb25zdCBjaGFyICpoZWFkZXIsIC4uLik7CiAKLXN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKgotaW50ZWxfZW5naW5lX2xvb2t1cF91c2VyKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1LCB1OCBjbGFzcywgdTggaW5zdGFuY2UpOwotCiBzdGF0aWMgaW5saW5lIHZvaWQg
aW50ZWxfZW5naW5lX2NvbnRleHRfaW4oc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQog
ewogCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9lbmdpbmVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Vu
Z2luZV9jcy5jCmluZGV4IGMwYmM5Y2I3ZjIyOC4uMDJiNjU2NWIyNTUwIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwpAQCAtMzIsNiArMzIsNyBAQAogCiAjaW5j
bHVkZSAiaW50ZWxfZW5naW5lLmgiCiAjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3BtLmgiCisjaW5j
bHVkZSAiaW50ZWxfZW5naW5lX3VzZXIuaCIKICNpbmNsdWRlICJpbnRlbF9jb250ZXh0LmgiCiAj
aW5jbHVkZSAiaW50ZWxfbHJjLmgiCiAjaW5jbHVkZSAiaW50ZWxfcmVzZXQuaCIKQEAgLTI4NSw5
ICsyODYsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9lbmdpbmVfc2FuaXRpemVfbW1pbyhzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJaW50ZWxfZW5naW5lX3NldF9od3NwX3dyaXRlbWFz
ayhlbmdpbmUsIH4wdSk7CiB9CiAKLXN0YXRpYyBpbnQKLWludGVsX2VuZ2luZV9zZXR1cChzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCSAgIGVudW0gaW50ZWxfZW5naW5lX2lk
IGlkKQorc3RhdGljIGludCBpbnRlbF9lbmdpbmVfc2V0dXAoc3RydWN0IGludGVsX2d0ICpndCwg
ZW51bSBpbnRlbF9lbmdpbmVfaWQgaWQpCiB7CiAJY29uc3Qgc3RydWN0IGVuZ2luZV9pbmZvICpp
bmZvID0gJmludGVsX2VuZ2luZXNbaWRdOwogCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZTsKQEAgLTMwMywxMCArMzAyLDkgQEAgaW50ZWxfZW5naW5lX3NldHVwKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdiwKIAlpZiAoR0VNX0RFQlVHX1dBUk5fT04oaW5mby0+aW5zdGFu
Y2UgPiBNQVhfRU5HSU5FX0lOU1RBTkNFKSkKIAkJcmV0dXJuIC1FSU5WQUw7CiAKLQlpZiAoR0VN
X0RFQlVHX1dBUk5fT04oZGV2X3ByaXYtPmVuZ2luZV9jbGFzc1tpbmZvLT5jbGFzc11baW5mby0+
aW5zdGFuY2VdKSkKKwlpZiAoR0VNX0RFQlVHX1dBUk5fT04oZ3QtPmVuZ2luZV9jbGFzc1tpbmZv
LT5jbGFzc11baW5mby0+aW5zdGFuY2VdKSkKIAkJcmV0dXJuIC1FSU5WQUw7CiAKLQlHRU1fQlVH
X09OKGRldl9wcml2LT5lbmdpbmVbaWRdKTsKIAllbmdpbmUgPSBremFsbG9jKHNpemVvZigqZW5n
aW5lKSwgR0ZQX0tFUk5FTCk7CiAJaWYgKCFlbmdpbmUpCiAJCXJldHVybiAtRU5PTUVNOwpAQCAt
MzE1LDEyICszMTMsMTIgQEAgaW50ZWxfZW5naW5lX3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiwKIAogCWVuZ2luZS0+aWQgPSBpZDsKIAllbmdpbmUtPm1hc2sgPSBCSVQo
aWQpOwotCWVuZ2luZS0+aTkxNSA9IGRldl9wcml2OwotCWVuZ2luZS0+Z3QgPSAmZGV2X3ByaXYt
Pmd0OwotCWVuZ2luZS0+dW5jb3JlID0gJmRldl9wcml2LT51bmNvcmU7CisJZW5naW5lLT5pOTE1
ID0gZ3QtPmk5MTU7CisJZW5naW5lLT5ndCA9IGd0OworCWVuZ2luZS0+dW5jb3JlID0gZ3QtPnVu
Y29yZTsKIAlfX3NwcmludF9lbmdpbmVfbmFtZShlbmdpbmUtPm5hbWUsIGluZm8pOwogCWVuZ2lu
ZS0+aHdfaWQgPSBlbmdpbmUtPmd1Y19pZCA9IGluZm8tPmh3X2lkOwotCWVuZ2luZS0+bW1pb19i
YXNlID0gX19lbmdpbmVfbW1pb19iYXNlKGRldl9wcml2LCBpbmZvLT5tbWlvX2Jhc2VzKTsKKwll
bmdpbmUtPm1taW9fYmFzZSA9IF9fZW5naW5lX21taW9fYmFzZShndC0+aTkxNSwgaW5mby0+bW1p
b19iYXNlcyk7CiAJZW5naW5lLT5jbGFzcyA9IGluZm8tPmNsYXNzOwogCWVuZ2luZS0+aW5zdGFu
Y2UgPSBpbmZvLT5pbnN0YW5jZTsKIApAQCAtMzMxLDEzICszMjksMTQgQEAgaW50ZWxfZW5naW5l
X3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAllbmdpbmUtPmRlc3Ry
b3kgPSAodHlwZW9mKGVuZ2luZS0+ZGVzdHJveSkpa2ZyZWU7CiAKIAllbmdpbmUtPnVhYmlfY2xh
c3MgPSBpbnRlbF9lbmdpbmVfY2xhc3Nlc1tpbmZvLT5jbGFzc10udWFiaV9jbGFzczsKKwllbmdp
bmUtPnVhYmlfaW5zdGFuY2UgPSBpbmZvLT5pbnN0YW5jZTsKIAotCWVuZ2luZS0+Y29udGV4dF9z
aXplID0gaW50ZWxfZW5naW5lX2NvbnRleHRfc2l6ZShkZXZfcHJpdiwKKwllbmdpbmUtPmNvbnRl
eHRfc2l6ZSA9IGludGVsX2VuZ2luZV9jb250ZXh0X3NpemUoZ3QtPmk5MTUsCiAJCQkJCQkJIGVu
Z2luZS0+Y2xhc3MpOwogCWlmIChXQVJOX09OKGVuZ2luZS0+Y29udGV4dF9zaXplID4gQklUKDIw
KSkpCiAJCWVuZ2luZS0+Y29udGV4dF9zaXplID0gMDsKIAlpZiAoZW5naW5lLT5jb250ZXh0X3Np
emUpCi0JCURSSVZFUl9DQVBTKGRldl9wcml2KS0+aGFzX2xvZ2ljYWxfY29udGV4dHMgPSB0cnVl
OworCQlEUklWRVJfQ0FQUyhndC0+aTkxNSktPmhhc19sb2dpY2FsX2NvbnRleHRzID0gdHJ1ZTsK
IAogCS8qIE5vdGhpbmcgdG8gZG8gaGVyZSwgZXhlY3V0ZSBpbiBvcmRlciBvZiBkZXBlbmRlbmNp
ZXMgKi8KIAllbmdpbmUtPnNjaGVkdWxlID0gTlVMTDsKQEAgLTM0OSw4ICszNDgsMTEgQEAgaW50
ZWxfZW5naW5lX3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkvKiBT
Y3J1YiBtbWlvIHN0YXRlIG9uIHRha2VvdmVyICovCiAJaW50ZWxfZW5naW5lX3Nhbml0aXplX21t
aW8oZW5naW5lKTsKIAotCWRldl9wcml2LT5lbmdpbmVfY2xhc3NbaW5mby0+Y2xhc3NdW2luZm8t
Pmluc3RhbmNlXSA9IGVuZ2luZTsKLQlkZXZfcHJpdi0+ZW5naW5lW2lkXSA9IGVuZ2luZTsKKwll
bmdpbmUtPmd0LT5lbmdpbmVfY2xhc3NbaW5mby0+Y2xhc3NdW2luZm8tPmluc3RhbmNlXSA9IGVu
Z2luZTsKKworCWludGVsX2VuZ2luZV9hZGRfdXNlcihlbmdpbmUpOworCWd0LT5pOTE1LT5lbmdp
bmVbaWRdID0gZW5naW5lOworCiAJcmV0dXJuIDA7CiB9CiAKQEAgLTQzMyw3ICs0MzUsNyBAQCBp
bnQgaW50ZWxfZW5naW5lc19pbml0X21taW8oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUp
CiAJCWlmICghSEFTX0VOR0lORShpOTE1LCBpKSkKIAkJCWNvbnRpbnVlOwogCi0JCWVyciA9IGlu
dGVsX2VuZ2luZV9zZXR1cChpOTE1LCBpKTsKKwkJZXJyID0gaW50ZWxfZW5naW5lX3NldHVwKCZp
OTE1LT5ndCwgaSk7CiAJCWlmIChlcnIpCiAJCQlnb3RvIGNsZWFudXA7CiAKQEAgLTE1MzMsMjkg
KzE1MzUsNiBAQCB2b2lkIGludGVsX2VuZ2luZV9kdW1wKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSwKIAlpbnRlbF9lbmdpbmVfcHJpbnRfYnJlYWRjcnVtYnMoZW5naW5lLCBtKTsKIH0K
IAotc3RhdGljIHU4IHVzZXJfY2xhc3NfbWFwW10gPSB7Ci0JW0k5MTVfRU5HSU5FX0NMQVNTX1JF
TkRFUl0gPSBSRU5ERVJfQ0xBU1MsCi0JW0k5MTVfRU5HSU5FX0NMQVNTX0NPUFldID0gQ09QWV9F
TkdJTkVfQ0xBU1MsCi0JW0k5MTVfRU5HSU5FX0NMQVNTX1ZJREVPXSA9IFZJREVPX0RFQ09ERV9D
TEFTUywKLQlbSTkxNV9FTkdJTkVfQ0xBU1NfVklERU9fRU5IQU5DRV0gPSBWSURFT19FTkhBTkNF
TUVOVF9DTEFTUywKLX07Ci0KLXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKgotaW50ZWxfZW5naW5l
X2xvb2t1cF91c2VyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCB1OCBjbGFzcywgdTgg
aW5zdGFuY2UpCi17Ci0JaWYgKGNsYXNzID49IEFSUkFZX1NJWkUodXNlcl9jbGFzc19tYXApKQot
CQlyZXR1cm4gTlVMTDsKLQotCWNsYXNzID0gdXNlcl9jbGFzc19tYXBbY2xhc3NdOwotCi0JR0VN
X0JVR19PTihjbGFzcyA+IE1BWF9FTkdJTkVfQ0xBU1MpOwotCi0JaWYgKGluc3RhbmNlID4gTUFY
X0VOR0lORV9JTlNUQU5DRSkKLQkJcmV0dXJuIE5VTEw7Ci0KLQlyZXR1cm4gaTkxNS0+ZW5naW5l
X2NsYXNzW2NsYXNzXVtpbnN0YW5jZV07Ci19Ci0KIC8qKgogICogaW50ZWxfZW5hYmxlX2VuZ2lu
ZV9zdGF0cygpIC0gRW5hYmxlIGVuZ2luZSBidXN5IHRyYWNraW5nIG9uIGVuZ2luZQogICogQGVu
Z2luZTogZW5naW5lIHRvIGVuYWJsZSBzdGF0cyBjb2xsZWN0aW9uCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCmluZGV4IDhiZTYzMDE5ZDcwNy4uOWM5Mjdm
YTQwOGFhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVf
dHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMu
aApAQCAtMTIsNiArMTIsNyBAQAogI2luY2x1ZGUgPGxpbnV4L2tyZWYuaD4KICNpbmNsdWRlIDxs
aW51eC9saXN0Lmg+CiAjaW5jbHVkZSA8bGludXgvbGxpc3QuaD4KKyNpbmNsdWRlIDxsaW51eC9y
YnRyZWUuaD4KICNpbmNsdWRlIDxsaW51eC90aW1lci5oPgogI2luY2x1ZGUgPGxpbnV4L3R5cGVz
Lmg+CiAKQEAgLTI2NywxNSArMjY4LDE5IEBAIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgewogCXVu
c2lnbmVkIGludCBndWNfaWQ7CiAJaW50ZWxfZW5naW5lX21hc2tfdCBtYXNrOwogCi0JdTggdWFi
aV9jbGFzczsKLQogCXU4IGNsYXNzOwogCXU4IGluc3RhbmNlOworCisJdTggdWFiaV9jbGFzczsK
Kwl1OCB1YWJpX2luc3RhbmNlOworCiAJdTMyIGNvbnRleHRfc2l6ZTsKIAl1MzIgbW1pb19iYXNl
OwogCiAJdTMyIHVhYmlfY2FwYWJpbGl0aWVzOwogCisJc3RydWN0IHJiX25vZGUgdWFiaV9ub2Rl
OworCiAJc3RydWN0IGludGVsX3NzZXUgc3NldTsKIAogCXN0cnVjdCBpbnRlbF9yaW5nICpidWZm
ZXI7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdXNl
ci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3VzZXIuYwpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmY3NGZiNGQyZmEwZAotLS0gL2Rldi9u
dWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV91c2VyLmMKQEAg
LTAsMCArMSw2NiBAQAorLyoKKyAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKKyAqCisg
KiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpbmNsdWRlICJp
OTE1X2Rydi5oIgorI2luY2x1ZGUgImludGVsX2VuZ2luZS5oIgorI2luY2x1ZGUgImludGVsX2Vu
Z2luZV91c2VyLmgiCisKK3N0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKgoraW50ZWxfZW5naW5lX2xv
b2t1cF91c2VyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCB1OCBjbGFzcywgdTggaW5z
dGFuY2UpCit7CisJc3RydWN0IHJiX25vZGUgKnAgPSBpOTE1LT51YWJpX2VuZ2luZXMucmJfbm9k
ZTsKKworCXdoaWxlIChwKSB7CisJCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKml0ID0KKwkJCXJi
X2VudHJ5KHAsIHR5cGVvZigqaXQpLCB1YWJpX25vZGUpOworCisJCWlmIChjbGFzcyA8IGl0LT51
YWJpX2NsYXNzKQorCQkJcCA9IHAtPnJiX2xlZnQ7CisJCWVsc2UgaWYgKGNsYXNzID4gaXQtPnVh
YmlfY2xhc3MgfHwKKwkJCSBpbnN0YW5jZSA+IGl0LT51YWJpX2luc3RhbmNlKQorCQkJcCA9IHAt
PnJiX3JpZ2h0OworCQllbHNlIGlmIChpbnN0YW5jZSA8IGl0LT51YWJpX2luc3RhbmNlKQorCQkJ
cCA9IHAtPnJiX2xlZnQ7CisJCWVsc2UKKwkJCXJldHVybiBpdDsKKwl9CisKKwlyZXR1cm4gTlVM
TDsKK30KKwordm9pZCBpbnRlbF9lbmdpbmVfYWRkX3VzZXIoc3RydWN0IGludGVsX2VuZ2luZV9j
cyAqZW5naW5lKQoreworCXN0cnVjdCByYl9yb290ICpyb290ID0gJmVuZ2luZS0+aTkxNS0+dWFi
aV9lbmdpbmVzOworCXN0cnVjdCByYl9ub2RlICoqcCwgKnBhcmVudDsKKworCXBhcmVudCA9IE5V
TEw7CisJcCA9ICZyb290LT5yYl9ub2RlOworCXdoaWxlICgqcCkgeworCQlzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICppdDsKKworCQlwYXJlbnQgPSAqcDsKKwkJaXQgPSByYl9lbnRyeShwYXJlbnQs
IHR5cGVvZigqaXQpLCB1YWJpX25vZGUpOworCisJCS8qIEFsbCB1c2VyIGNsYXNzOmluc3RhbmNl
IGlkZW50aWZpZXJzIG11c3QgYmUgdW5pcXVlICovCisJCUdFTV9CVUdfT04oaXQtPnVhYmlfY2xh
c3MgPT0gZW5naW5lLT51YWJpX2NsYXNzICYmCisJCQkgICBpdC0+dWFiaV9pbnN0YW5jZSA9PSBl
bmdpbmUtPnVhYmlfaW5zdGFuY2UpOworCisJCWlmIChlbmdpbmUtPnVhYmlfY2xhc3MgPCBpdC0+
dWFiaV9jbGFzcykKKwkJCXAgPSAmcGFyZW50LT5yYl9sZWZ0OworCQllbHNlIGlmIChlbmdpbmUt
PnVhYmlfY2xhc3MgPiBpdC0+dWFiaV9jbGFzcyB8fAorCQkJIGVuZ2luZS0+dWFiaV9pbnN0YW5j
ZSA+IGl0LT51YWJpX2luc3RhbmNlKQorCQkJcCA9ICZwYXJlbnQtPnJiX3JpZ2h0OworCQllbHNl
CisJCQlwID0gJnBhcmVudC0+cmJfbGVmdDsKKwl9CisKKwlyYl9saW5rX25vZGUoJmVuZ2luZS0+
dWFiaV9ub2RlLCBwYXJlbnQsIHApOworCXJiX2luc2VydF9jb2xvcigmZW5naW5lLT51YWJpX25v
ZGUsIHJvb3QpOworCisJR0VNX0JVR19PTihpbnRlbF9lbmdpbmVfbG9va3VwX3VzZXIoZW5naW5l
LT5pOTE1LAorCQkJCQkgICAgZW5naW5lLT51YWJpX2NsYXNzLAorCQkJCQkgICAgZW5naW5lLT51
YWJpX2luc3RhbmNlKSAhPSBlbmdpbmUpOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZW5naW5lX3VzZXIuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2VuZ2luZV91c2VyLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAw
Li4wOTFkYzhhNGEzOWYKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9lbmdpbmVfdXNlci5oCkBAIC0wLDAgKzEsMjAgQEAKKy8qCisgKiBTUERYLUxpY2Vu
c2UtSWRlbnRpZmllcjogTUlUCisgKgorICogQ29weXJpZ2h0IMKpIDIwMTkgSW50ZWwgQ29ycG9y
YXRpb24KKyAqLworCisjaWZuZGVmIElOVEVMX0VOR0lORV9VU0VSX0gKKyNkZWZpbmUgSU5URUxf
RU5HSU5FX1VTRVJfSAorCisjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4KKworc3RydWN0IGRybV9p
OTE1X3ByaXZhdGU7CitzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzOworCitzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICoKK2ludGVsX2VuZ2luZV9sb29rdXBfdXNlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSwgdTggY2xhc3MsIHU4IGluc3RhbmNlKTsKKwordm9pZCBpbnRlbF9lbmdpbmVfYWRk
X3VzZXIoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKKworI2VuZGlmIC8qIElOVEVM
X0VOR0lORV9VU0VSX0ggKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2d0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5o
CmluZGV4IDM0ZDRhODY4ZTRmMS4uNWZkMTFlMzYxZDAzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2d0X3R5cGVzLmgKQEAgLTIxLDYgKzIxLDcgQEAKIAogc3RydWN0IGRybV9pOTE1
X3ByaXZhdGU7CiBzdHJ1Y3QgaTkxNV9nZ3R0Oworc3RydWN0IGludGVsX2VuZ2luZV9jczsKIHN0
cnVjdCBpbnRlbF91bmNvcmU7CiAKIHN0cnVjdCBpbnRlbF9oYW5nY2hlY2sgewpAQCAtNzYsNiAr
NzcsOSBAQCBzdHJ1Y3QgaW50ZWxfZ3QgewogCXUzMiBwbV9pZXI7CiAKIAl1MzIgcG1fZ3VjX2V2
ZW50czsKKworCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZV9jbGFzc1tNQVhfRU5HSU5F
X0NMQVNTICsgMV0KKwkJCQkJICAgIFtNQVhfRU5HSU5FX0lOU1RBTkNFICsgMV07CiB9OwogCiBl
bnVtIGludGVsX2d0X3NjcmF0Y2hfZmllbGQgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVz
dF9scmMuYwppbmRleCA2MGYyN2U1MmQyNjcuLmViNDBhNTg2NjViZSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKQEAgLTE3NzMsNiArMTc3Myw3IEBAIHN0YXRpYyBpbnQg
bGl2ZV92aXJ0dWFsX2VuZ2luZSh2b2lkICphcmcpCiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUgPSBhcmc7CiAJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqc2libGluZ3NbTUFYX0VOR0lO
RV9JTlNUQU5DRSArIDFdOwogCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZTsKKwlzdHJ1
Y3QgaW50ZWxfZ3QgKmd0ID0gJmk5MTUtPmd0OwogCWVudW0gaW50ZWxfZW5naW5lX2lkIGlkOwog
CXVuc2lnbmVkIGludCBjbGFzcywgaW5zdDsKIAlpbnQgZXJyID0gLUVOT0RFVjsKQEAgLTE3OTYs
MTAgKzE3OTcsMTAgQEAgc3RhdGljIGludCBsaXZlX3ZpcnR1YWxfZW5naW5lKHZvaWQgKmFyZykK
IAogCQluc2libGluZyA9IDA7CiAJCWZvciAoaW5zdCA9IDA7IGluc3QgPD0gTUFYX0VOR0lORV9J
TlNUQU5DRTsgaW5zdCsrKSB7Ci0JCQlpZiAoIWk5MTUtPmVuZ2luZV9jbGFzc1tjbGFzc11baW5z
dF0pCisJCQlpZiAoIWd0LT5lbmdpbmVfY2xhc3NbY2xhc3NdW2luc3RdKQogCQkJCWNvbnRpbnVl
OwogCi0JCQlzaWJsaW5nc1tuc2libGluZysrXSA9IGk5MTUtPmVuZ2luZV9jbGFzc1tjbGFzc11b
aW5zdF07CisJCQlzaWJsaW5nc1tuc2libGluZysrXSA9IGd0LT5lbmdpbmVfY2xhc3NbY2xhc3Nd
W2luc3RdOwogCQl9CiAJCWlmIChuc2libGluZyA8IDIpCiAJCQljb250aW51ZTsKQEAgLTE5MjAs
NiArMTkyMSw3IEBAIHN0YXRpYyBpbnQgbGl2ZV92aXJ0dWFsX21hc2sodm9pZCAqYXJnKQogewog
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gYXJnOwogCXN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKnNpYmxpbmdzW01BWF9FTkdJTkVfSU5TVEFOQ0UgKyAxXTsKKwlzdHJ1Y3QgaW50ZWxf
Z3QgKmd0ID0gJmk5MTUtPmd0OwogCXVuc2lnbmVkIGludCBjbGFzcywgaW5zdDsKIAlpbnQgZXJy
ID0gMDsKIApAQCAtMTkzMywxMCArMTkzNSwxMCBAQCBzdGF0aWMgaW50IGxpdmVfdmlydHVhbF9t
YXNrKHZvaWQgKmFyZykKIAogCQluc2libGluZyA9IDA7CiAJCWZvciAoaW5zdCA9IDA7IGluc3Qg
PD0gTUFYX0VOR0lORV9JTlNUQU5DRTsgaW5zdCsrKSB7Ci0JCQlpZiAoIWk5MTUtPmVuZ2luZV9j
bGFzc1tjbGFzc11baW5zdF0pCisJCQlpZiAoIWd0LT5lbmdpbmVfY2xhc3NbY2xhc3NdW2luc3Rd
KQogCQkJCWJyZWFrOwogCi0JCQlzaWJsaW5nc1tuc2libGluZysrXSA9IGk5MTUtPmVuZ2luZV9j
bGFzc1tjbGFzc11baW5zdF07CisJCQlzaWJsaW5nc1tuc2libGluZysrXSA9IGd0LT5lbmdpbmVf
Y2xhc3NbY2xhc3NdW2luc3RdOwogCQl9CiAJCWlmIChuc2libGluZyA8IDIpCiAJCQljb250aW51
ZTsKQEAgLTIwOTcsNiArMjA5OSw3IEBAIHN0YXRpYyBpbnQgbGl2ZV92aXJ0dWFsX2JvbmQodm9p
ZCAqYXJnKQogCX07CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBhcmc7CiAJc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqc2libGluZ3NbTUFYX0VOR0lORV9JTlNUQU5DRSArIDFdOwor
CXN0cnVjdCBpbnRlbF9ndCAqZ3QgPSAmaTkxNS0+Z3Q7CiAJdW5zaWduZWQgaW50IGNsYXNzLCBp
bnN0OwogCWludCBlcnIgPSAwOwogCkBAIC0yMTExLDExICsyMTE0LDExIEBAIHN0YXRpYyBpbnQg
bGl2ZV92aXJ0dWFsX2JvbmQodm9pZCAqYXJnKQogCiAJCW5zaWJsaW5nID0gMDsKIAkJZm9yIChp
bnN0ID0gMDsgaW5zdCA8PSBNQVhfRU5HSU5FX0lOU1RBTkNFOyBpbnN0KyspIHsKLQkJCWlmICgh
aTkxNS0+ZW5naW5lX2NsYXNzW2NsYXNzXVtpbnN0XSkKKwkJCWlmICghZ3QtPmVuZ2luZV9jbGFz
c1tjbGFzc11baW5zdF0pCiAJCQkJYnJlYWs7CiAKIAkJCUdFTV9CVUdfT04obnNpYmxpbmcgPT0g
QVJSQVlfU0laRShzaWJsaW5ncykpOwotCQkJc2libGluZ3NbbnNpYmxpbmcrK10gPSBpOTE1LT5l
bmdpbmVfY2xhc3NbY2xhc3NdW2luc3RdOworCQkJc2libGluZ3NbbnNpYmxpbmcrK10gPSBndC0+
ZW5naW5lX2NsYXNzW2NsYXNzXVtpbnN0XTsKIAkJfQogCQlpZiAobnNpYmxpbmcgPCAyKQogCQkJ
Y29udGludWU7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRleCA1NDk5ZmM1MzA1ZjEuLmI4YTY5
ZjIzNjUxMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBAIC0xMzcxLDExICsxMzcxLDEyIEBA
IHN0cnVjdCBkcm1faTkxNV9wcml2YXRlIHsKIAl3YWl0X3F1ZXVlX2hlYWRfdCBnbWJ1c193YWl0
X3F1ZXVlOwogCiAJc3RydWN0IHBjaV9kZXYgKmJyaWRnZV9kZXY7Ci0Jc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lW0k5MTVfTlVNX0VOR0lORVNdOworCiAJLyogQ29udGV4dCB1c2VkIGlu
dGVybmFsbHkgdG8gaWRsZSB0aGUgR1BVIGFuZCBzZXR1cCBpbml0aWFsIHN0YXRlICovCiAJc3Ry
dWN0IGk5MTVfZ2VtX2NvbnRleHQgKmtlcm5lbF9jb250ZXh0OwotCXN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZV9jbGFzc1tNQVhfRU5HSU5FX0NMQVNTICsgMV0KLQkJCQkJICAgIFtNQVhf
RU5HSU5FX0lOU1RBTkNFICsgMV07CisKKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmVb
STkxNV9OVU1fRU5HSU5FU107CisJc3RydWN0IHJiX3Jvb3QgdWFiaV9lbmdpbmVzOwogCiAJc3Ry
dWN0IHJlc291cmNlIG1jaF9yZXM7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfaXJxLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5jCmluZGV4IDkxZjhj
ODEwMjhjMy4uYWYxYmI2NTM1NzlhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2lycS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKQEAgLTMxMDYs
NyArMzEwNiw3IEBAIGdlbjExX2VuZ2luZV9pcnFfaGFuZGxlcihzdHJ1Y3QgaW50ZWxfZ3QgKmd0
LCBjb25zdCB1OCBjbGFzcywKIAlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7CiAKIAlp
ZiAoaW5zdGFuY2UgPD0gTUFYX0VOR0lORV9JTlNUQU5DRSkKLQkJZW5naW5lID0gZ3QtPmk5MTUt
PmVuZ2luZV9jbGFzc1tjbGFzc11baW5zdGFuY2VdOworCQllbmdpbmUgPSBndC0+ZW5naW5lX2Ns
YXNzW2NsYXNzXVtpbnN0YW5jZV07CiAJZWxzZQogCQllbmdpbmUgPSBOVUxMOwogCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BtdS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9wbXUuYwppbmRleCBlZmY4NjQ4M2JlYzAuLmJkZjc5NjNhMDQzYiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wbXUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X3BtdS5jCkBAIC04LDYgKzgsNyBAQAogI2luY2x1ZGUgPGxpbnV4L3BtX3J1bnRp
bWUuaD4KIAogI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZS5oIgorI2luY2x1ZGUgImd0L2ludGVs
X2VuZ2luZV91c2VyLmgiCiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImk5MTVf
cG11LmgiCkBAIC05MjYsNyArOTI3LDcgQEAgY3JlYXRlX2V2ZW50X2F0dHJpYnV0ZXMoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJCQlpOTE1X2l0ZXIgPQogCQkJCWFkZF9pOTE1X2F0
dHIoaTkxNV9pdGVyLCBzdHIsCiAJCQkJCSAgICAgIF9fSTkxNV9QTVVfRU5HSU5FKGVuZ2luZS0+
dWFiaV9jbGFzcywKLQkJCQkJCQkJZW5naW5lLT5pbnN0YW5jZSwKKwkJCQkJCQkJZW5naW5lLT51
YWJpX2luc3RhbmNlLAogCQkJCQkJCQllbmdpbmVfZXZlbnRzW2ldLnNhbXBsZSkpOwogCiAJCQlz
dHIgPSBrYXNwcmludGYoR0ZQX0tFUk5FTCwgIiVzLSVzLnVuaXQiLApkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9xdWVyeS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9xdWVyeS5jCmluZGV4IDdiNzAxNjE3MTA1Ny4uNzBiMWFkMzhlNjE1IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3F1ZXJ5LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9xdWVyeS5jCkBAIC0xMjcsNyArMTI3LDcgQEAgcXVlcnlfZW5naW5lX2luZm8oc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAKIAlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBp
OTE1LCBpZCkgewogCQlpbmZvLmVuZ2luZS5lbmdpbmVfY2xhc3MgPSBlbmdpbmUtPnVhYmlfY2xh
c3M7Ci0JCWluZm8uZW5naW5lLmVuZ2luZV9pbnN0YW5jZSA9IGVuZ2luZS0+aW5zdGFuY2U7CisJ
CWluZm8uZW5naW5lLmVuZ2luZV9pbnN0YW5jZSA9IGVuZ2luZS0+dWFiaV9pbnN0YW5jZTsKIAkJ
aW5mby5jYXBhYmlsaXRpZXMgPSBlbmdpbmUtPnVhYmlfY2FwYWJpbGl0aWVzOwogCiAJCWlmIChf
X2NvcHlfdG9fdXNlcihpbmZvX3B0ciwgJmluZm8sIHNpemVvZihpbmZvKSkpCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3RyYWNlLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3RyYWNlLmgKaW5kZXggZGExOGI4ZDZiODBjLi4xZDExMjQ1YzRjODcgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdHJhY2UuaAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X3RyYWNlLmgKQEAgLTY3Nyw3ICs2NzcsNyBAQCBUUkFDRV9FVkVOVChpOTE1
X3JlcXVlc3RfcXVldWUsCiAJCQkgICBfX2VudHJ5LT5kZXYgPSBycS0+aTkxNS0+ZHJtLnByaW1h
cnktPmluZGV4OwogCQkJICAgX19lbnRyeS0+aHdfaWQgPSBycS0+Z2VtX2NvbnRleHQtPmh3X2lk
OwogCQkJICAgX19lbnRyeS0+Y2xhc3MgPSBycS0+ZW5naW5lLT51YWJpX2NsYXNzOwotCQkJICAg
X19lbnRyeS0+aW5zdGFuY2UgPSBycS0+ZW5naW5lLT5pbnN0YW5jZTsKKwkJCSAgIF9fZW50cnkt
Pmluc3RhbmNlID0gcnEtPmVuZ2luZS0+dWFiaV9pbnN0YW5jZTsKIAkJCSAgIF9fZW50cnktPmN0
eCA9IHJxLT5mZW5jZS5jb250ZXh0OwogCQkJICAgX19lbnRyeS0+c2Vxbm8gPSBycS0+ZmVuY2Uu
c2Vxbm87CiAJCQkgICBfX2VudHJ5LT5mbGFncyA9IGZsYWdzOwpAQCAtNzA2LDcgKzcwNiw3IEBA
IERFQ0xBUkVfRVZFTlRfQ0xBU1MoaTkxNV9yZXF1ZXN0LAogCQkJICAgX19lbnRyeS0+ZGV2ID0g
cnEtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRleDsKIAkJCSAgIF9fZW50cnktPmh3X2lkID0gcnEt
PmdlbV9jb250ZXh0LT5od19pZDsKIAkJCSAgIF9fZW50cnktPmNsYXNzID0gcnEtPmVuZ2luZS0+
dWFiaV9jbGFzczsKLQkJCSAgIF9fZW50cnktPmluc3RhbmNlID0gcnEtPmVuZ2luZS0+aW5zdGFu
Y2U7CisJCQkgICBfX2VudHJ5LT5pbnN0YW5jZSA9IHJxLT5lbmdpbmUtPnVhYmlfaW5zdGFuY2U7
CiAJCQkgICBfX2VudHJ5LT5jdHggPSBycS0+ZmVuY2UuY29udGV4dDsKIAkJCSAgIF9fZW50cnkt
PnNlcW5vID0gcnEtPmZlbmNlLnNlcW5vOwogCQkJICAgKSwKQEAgLTc1MSw3ICs3NTEsNyBAQCBU
UkFDRV9FVkVOVChpOTE1X3JlcXVlc3RfaW4sCiAJCQkgICBfX2VudHJ5LT5kZXYgPSBycS0+aTkx
NS0+ZHJtLnByaW1hcnktPmluZGV4OwogCQkJICAgX19lbnRyeS0+aHdfaWQgPSBycS0+Z2VtX2Nv
bnRleHQtPmh3X2lkOwogCQkJICAgX19lbnRyeS0+Y2xhc3MgPSBycS0+ZW5naW5lLT51YWJpX2Ns
YXNzOwotCQkJICAgX19lbnRyeS0+aW5zdGFuY2UgPSBycS0+ZW5naW5lLT5pbnN0YW5jZTsKKwkJ
CSAgIF9fZW50cnktPmluc3RhbmNlID0gcnEtPmVuZ2luZS0+dWFiaV9pbnN0YW5jZTsKIAkJCSAg
IF9fZW50cnktPmN0eCA9IHJxLT5mZW5jZS5jb250ZXh0OwogCQkJICAgX19lbnRyeS0+c2Vxbm8g
PSBycS0+ZmVuY2Uuc2Vxbm87CiAJCQkgICBfX2VudHJ5LT5wcmlvID0gcnEtPnNjaGVkLmF0dHIu
cHJpb3JpdHk7CkBAIC03ODIsNyArNzgyLDcgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X291
dCwKIAkJCSAgIF9fZW50cnktPmRldiA9IHJxLT5pOTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7CiAJ
CQkgICBfX2VudHJ5LT5od19pZCA9IHJxLT5nZW1fY29udGV4dC0+aHdfaWQ7CiAJCQkgICBfX2Vu
dHJ5LT5jbGFzcyA9IHJxLT5lbmdpbmUtPnVhYmlfY2xhc3M7Ci0JCQkgICBfX2VudHJ5LT5pbnN0
YW5jZSA9IHJxLT5lbmdpbmUtPmluc3RhbmNlOworCQkJICAgX19lbnRyeS0+aW5zdGFuY2UgPSBy
cS0+ZW5naW5lLT51YWJpX2luc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0gcnEtPmZlbmNl
LmNvbnRleHQ7CiAJCQkgICBfX2VudHJ5LT5zZXFubyA9IHJxLT5mZW5jZS5zZXFubzsKIAkJCSAg
IF9fZW50cnktPmNvbXBsZXRlZCA9IGk5MTVfcmVxdWVzdF9jb21wbGV0ZWQocnEpOwpAQCAtODQ3
LDcgKzg0Nyw3IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF93YWl0X2JlZ2luLAogCQkJICAg
X19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5LT5pbmRleDsKIAkJCSAgIF9fZW50
cnktPmh3X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsKIAkJCSAgIF9fZW50cnktPmNsYXNz
ID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFzczsKLQkJCSAgIF9fZW50cnktPmluc3RhbmNlID0gcnEt
PmVuZ2luZS0+aW5zdGFuY2U7CisJCQkgICBfX2VudHJ5LT5pbnN0YW5jZSA9IHJxLT5lbmdpbmUt
PnVhYmlfaW5zdGFuY2U7CiAJCQkgICBfX2VudHJ5LT5jdHggPSBycS0+ZmVuY2UuY29udGV4dDsK
IAkJCSAgIF9fZW50cnktPnNlcW5vID0gcnEtPmZlbmNlLnNlcW5vOwogCQkJICAgX19lbnRyeS0+
ZmxhZ3MgPSBmbGFnczsKLS0gCjIuMjIuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlz
dGluZm8vaW50ZWwtZ2Z4

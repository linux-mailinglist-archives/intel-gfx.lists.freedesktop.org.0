Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E76FDBEF3E
	for <lists+intel-gfx@lfdr.de>; Thu, 26 Sep 2019 12:07:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 38B3E6EDAA;
	Thu, 26 Sep 2019 10:07:06 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 59D356EDAA
 for <intel-gfx@lists.freedesktop.org>; Thu, 26 Sep 2019 10:07:04 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Sep 2019 03:07:04 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,551,1559545200"; d="scan'208";a="203825642"
Received: from irsmsx102.ger.corp.intel.com ([163.33.3.155])
 by fmsmga001.fm.intel.com with ESMTP; 26 Sep 2019 03:07:03 -0700
Received: from localhost (172.28.172.64) by IRSMSX102.ger.corp.intel.com
 (163.33.3.155) with Microsoft SMTP Server (TLS) id 14.3.439.0; Thu, 26 Sep
 2019 11:07:02 +0100
From: =?UTF-8?q?Micha=C5=82=20Winiarski?= <michal.winiarski@intel.com>
To: <intel-gfx@lists.freedesktop.org>
Date: Thu, 26 Sep 2019 12:06:34 +0200
Message-ID: <20190926100635.9416-5-michal.winiarski@intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190926100635.9416-1-michal.winiarski@intel.com>
References: <20190926100635.9416-1-michal.winiarski@intel.com>
MIME-Version: 1.0
X-Originating-IP: [172.28.172.64]
Subject: [Intel-gfx] [PATCH 5/6] drm/i915: Don't use scratch in WA batch.
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UncmUgY3VycmVudGx5IGRvaW5nIG9uZSB3b3JrYXJvdW5kIHdoZXJlIHdlJ3JlIHVzaW5nIHNj
cmF0Y2ggYXMgYQp0ZW1wb3Jhcnkgc3RvcmFnZSBwbGFjZSwgd2hpbGUgd2UncmUgb3ZlcndyaXRp
bmcgdGhlIHZhbHVlIG9mIG9uZQpyZWdpc3RlciB3aXRoIHNvbWUga25vd24gY29uc3RhbnQgdmFs
dWUgaW4gb3JkZXIgdG8gcGVyZm9ybSBhCndvcmthcm91bmQuCldoaWxlIHdlIGNvdWxkIGp1c3Qg
ZG8gc2ltaWxhciB0aGluZyB3aXRoIENTX0dQUiByZWdpc3RlcgphbmQgTUlfTE9BRF9SRUdJU1RF
Ul9SRUcgaW5zdGVhZCBvZiBzY3JhdGNoLCBzaW5jZSB3ZSB3b3VsZCB1c2UgQ1NfR1BSCmFueXdh
eXMsIGxldCdzIGp1c3QgZHJvcCB0aGUgY29uc3RhbnQgdmFsdWVzIGFuZCBkbyB0aGUgYml0b3Bz
IHVzaW5nCk1JX01BVEguCgpTaWduZWQtb2ZmLWJ5OiBNaWNoYcWCIFdpbmlhcnNraSA8bWljaGFs
LndpbmlhcnNraUBpbnRlbC5jb20+CkNjOiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNv
bi5jby51az4KQ2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Ci0t
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmggICB8IDUzICsrKysrKysr
KysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMu
aCB8ICAzIC0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICAgIHwgMjcg
KysrLS0tLS0tLS0tCiAzIGZpbGVzIGNoYW5nZWQsIDU4IGluc2VydGlvbnMoKyksIDI1IGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2lu
ZS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKaW5kZXggZDNjNjk5
M2Y0ZjQ2Li4yZGZlMGIyM2FmMWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2lu
ZS5oCkBAIC00MDAsNiArNDAwLDU5IEBAIGdlbjhfZW1pdF9nZ3R0X3dyaXRlKHUzMiAqY3MsIHUz
MiB2YWx1ZSwgdTMyIGd0dF9vZmZzZXQsIHUzMiBmbGFncykKIAlyZXR1cm4gY3M7CiB9CiAKKy8q
CisgKiBXZSdyZSB1c2luZyBDU19HUFIgcmVnaXN0ZXJzIGZvciB0aGUgTUlfTUFUSCBvcHMuCisg
KiBOb3RlIHRoYXQgdXNlciBjb250ZXh0cyBhcmUgZnJlZSB0byB1c2UgdGhvc2UgcmVnaXN0ZXJz
LCB3aGljaCBtZWFucyB0aGF0IHdlCisgKiBzaG91bGQgb25seSB1c2UgdGhpcyB0aGlzIGZ1bmN0
aW9uIGR1cmluZyBjb250ZXh0IGluaXRpYWxpemF0aW9uLCBiZWZvcmUKKyAqIGNvbnRleHQgcmVz
dG9yZSAoV0EgYmF0Y2gpIG9yIGluc2lkZSBpOTE1LW93bmVkIGNvbnRleHRzLgorICovCitzdGF0
aWMgaW5saW5lIHUzMiAqCitnZW44X2VtaXRfYml0b3BfcmVnX21hc2soc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lLAorCQkJIHUzMiAqY3MsIHUzMiBvcCwgaTkxNV9yZWdfdCByZWcsIHUz
MiBtYXNrKQoreworCWNvbnN0IHUzMiBiYXNlID0gZW5naW5lLT5tbWlvX2Jhc2U7CisKKwlHRU1f
QlVHX09OKG9wICE9IE1JX01BVEhfT1IgJiYgb3AgIT0gTUlfTUFUSF9BTkQpOworCisJKmNzKysg
PSBNSV9MT0FEX1JFR0lTVEVSX1JFRzsKKwkqY3MrKyA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KHJl
Zyk7CisJKmNzKysgPSBpOTE1X21taW9fcmVnX29mZnNldChHRU44X1JJTkdfQ1NfR1BSKGJhc2Us
IDApKTsKKwkqY3MrKyA9IE1JX05PT1A7CisKKwkqY3MrKyA9IE1JX0xPQURfUkVHSVNURVJfSU1N
KDEpOworCSpjcysrID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoR0VOOF9SSU5HX0NTX0dQUihiYXNl
LCAxKSk7CisJKmNzKysgPSBtYXNrOworCSpjcysrID0gTUlfTk9PUDsKKworCSpjcysrID0gTUlf
TUFUSCg0KTsKKwkqY3MrKyA9IE1JX01BVEhfTE9BRChNSV9NQVRIX1JFR19TUkNBLCBNSV9NQVRI
X1JFRygwKSk7CisJKmNzKysgPSBNSV9NQVRIX0xPQUQoTUlfTUFUSF9SRUdfU1JDQiwgTUlfTUFU
SF9SRUcoMSkpOworCSpjcysrID0gb3A7CisJKmNzKysgPSBNSV9NQVRIX1NUT1JFKE1JX01BVEhf
UkVHKDApLCBNSV9NQVRIX1JFR19BQ0NVKTsKKwkqY3MrKyA9IE1JX05PT1A7CisKKwkqY3MrKyA9
IE1JX0xPQURfUkVHSVNURVJfUkVHOworCSpjcysrID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoR0VO
OF9SSU5HX0NTX0dQUihiYXNlLCAwKSk7CisJKmNzKysgPSBpOTE1X21taW9fcmVnX29mZnNldChy
ZWcpOworCSpjcysrID0gTUlfTk9PUDsKKworCXJldHVybiBjczsKK30KKworc3RhdGljIGlubGlu
ZSB1MzIgKgorZ2VuOF9lbWl0X3NldF9yZWdpc3RlcihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUsCisJCSAgICAgICB1MzIgKmNzLCBpOTE1X3JlZ190IHJlZywgdTMyIG1hc2spCit7CisJ
cmV0dXJuIGdlbjhfZW1pdF9iaXRvcF9yZWdfbWFzayhlbmdpbmUsIGNzLCBNSV9NQVRIX09SLCBy
ZWcsIG1hc2spOworfQorCitzdGF0aWMgaW5saW5lIHUzMiAqCitnZW44X2VtaXRfY2xlYXJfcmVn
aXN0ZXIoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAorCQkJIHUzMiAqY3MsIGk5MTVf
cmVnX3QgcmVnLCB1MzIgbWFzaykKK3sKKwlyZXR1cm4gZ2VuOF9lbWl0X2JpdG9wX3JlZ19tYXNr
KGVuZ2luZSwgY3MsIE1JX01BVEhfQU5ELCByZWcsIH5tYXNrKTsKK30KKwogc3RhdGljIGlubGlu
ZSB2b2lkIF9faW50ZWxfZW5naW5lX3Jlc2V0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZSwKIAkJCQkJYm9vbCBzdGFsbGVkKQogewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0
X3R5cGVzLmgKaW5kZXggZTY0ZGI0YzEzZGY2Li5kOWYyNWFjNTIwYTggMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaApAQCAtOTIsOSArOTIsNiBAQCBlbnVtIGludGVs
X2d0X3NjcmF0Y2hfZmllbGQgewogCS8qIDggYnl0ZXMgKi8KIAlJTlRFTF9HVF9TQ1JBVENIX0ZJ
RUxEX1JFTkRFUl9GTFVTSCA9IDEyOCwKIAotCS8qIDggYnl0ZXMgKi8KLQlJTlRFTF9HVF9TQ1JB
VENIX0ZJRUxEX0NPSEVSRU5UTDNfV0EgPSAyNTYsCi0KIH07CiAKICNlbmRpZiAvKiBfX0lOVEVM
X0dUX1RZUEVTX0hfXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwppbmRleCBmYTM4
NTIxOGNlOTIuLjA4OWMxNzU5OWNhNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMK
QEAgLTIyNjksMTMgKzIyNjksNyBAQCBzdGF0aWMgaW50IGV4ZWNsaXN0c19yZXF1ZXN0X2FsbG9j
KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJlcXVlc3QpCiAgKiBQSVBFX0NPTlRST0wgaW5zdHJ1Y3Rp
b24uIFRoaXMgaXMgcmVxdWlyZWQgZm9yIHRoZSBmbHVzaCB0byBoYXBwZW4gY29ycmVjdGx5CiAg
KiBidXQgdGhlcmUgaXMgYSBzbGlnaHQgY29tcGxpY2F0aW9uIGFzIHRoaXMgaXMgYXBwbGllZCBp
biBXQSBiYXRjaCB3aGVyZSB0aGUKICAqIHZhbHVlcyBhcmUgb25seSBpbml0aWFsaXplZCBvbmNl
IHNvIHdlIGNhbm5vdCB0YWtlIHJlZ2lzdGVyIHZhbHVlIGF0IHRoZQotICogYmVnaW5uaW5nIGFu
ZCByZXVzZSBpdCBmdXJ0aGVyOyBoZW5jZSB3ZSBzYXZlIGl0cyB2YWx1ZSB0byBtZW1vcnksIHVw
bG9hZCBhCi0gKiBjb25zdGFudCB2YWx1ZSB3aXRoIGJpdDIxIHNldCBhbmQgdGhlbiB3ZSByZXN0
b3JlIGl0IGJhY2sgd2l0aCB0aGUgc2F2ZWQgdmFsdWUuCi0gKiBUbyBzaW1wbGlmeSB0aGUgV0Es
IGEgY29uc3RhbnQgdmFsdWUgaXMgZm9ybWVkIGJ5IHVzaW5nIHRoZSBkZWZhdWx0IHZhbHVlCi0g
KiBvZiB0aGlzIHJlZ2lzdGVyLiBUaGlzIHNob3VsZG4ndCBiZSBhIHByb2JsZW0gYmVjYXVzZSB3
ZSBhcmUgb25seSBtb2RpZnlpbmcKLSAqIGl0IGZvciBhIHNob3J0IHBlcmlvZCBhbmQgdGhpcyBi
YXRjaCBpbiBub24tcHJlbXB0aWJsZS4gV2UgY2FuIG9mY291cnNlCi0gKiB1c2UgYWRkaXRpb25h
bCBpbnN0cnVjdGlvbnMgdGhhdCByZWFkIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIHJlZ2lzdGVy
Ci0gKiBhdCB0aGF0IHRpbWUgYW5kIHNldCBvdXIgYml0IG9mIGludGVyZXN0IGJ1dCBpdCBtYWtl
cyB0aGUgV0EgY29tcGxpY2F0ZWQuCisgKiBiZWdpbm5pbmcgYW5kIHJldXNlIGl0IGZ1cnRoZXI7
CiAgKgogICogVGhpcyBXQSBpcyBhbHNvIHJlcXVpcmVkIGZvciBHZW45IHNvIGV4dHJhY3Rpbmcg
YXMgYSBmdW5jdGlvbiBhdm9pZHMKICAqIGNvZGUgZHVwbGljYXRpb24uCkBAIC0yMjgzLDI3ICsy
Mjc3LDE2IEBAIHN0YXRpYyBpbnQgZXhlY2xpc3RzX3JlcXVlc3RfYWxsb2Moc3RydWN0IGk5MTVf
cmVxdWVzdCAqcmVxdWVzdCkKIHN0YXRpYyB1MzIgKgogZ2VuOF9lbWl0X2ZsdXNoX2NvaGVyZW50
bDNfd2Eoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCB1MzIgKmJhdGNoKQogewotCS8q
IE5CIG5vIG9uZSBlbHNlIGlzIGFsbG93ZWQgdG8gc2NyaWJibGUgb3ZlciBzY3JhdGNoICsgMjU2
ISAqLwotCSpiYXRjaCsrID0gTUlfU1RPUkVfUkVHSVNURVJfTUVNX0dFTjggfCBNSV9TUk1fTFJN
X0dMT0JBTF9HVFQ7Ci0JKmJhdGNoKysgPSBpOTE1X21taW9fcmVnX29mZnNldChHRU44X0wzU1FD
UkVHNCk7Ci0JKmJhdGNoKysgPSBpbnRlbF9ndF9zY3JhdGNoX29mZnNldChlbmdpbmUtPmd0LAot
CQkJCQkgICBJTlRFTF9HVF9TQ1JBVENIX0ZJRUxEX0NPSEVSRU5UTDNfV0EpOwotCSpiYXRjaCsr
ID0gMDsKLQotCSpiYXRjaCsrID0gTUlfTE9BRF9SRUdJU1RFUl9JTU0oMSk7Ci0JKmJhdGNoKysg
PSBpOTE1X21taW9fcmVnX29mZnNldChHRU44X0wzU1FDUkVHNCk7Ci0JKmJhdGNoKysgPSAweDQw
NDAwMDAwIHwgR0VOOF9MUVNDX0ZMVVNIX0NPSEVSRU5UX0xJTkVTOworCWJhdGNoID0gZ2VuOF9l
bWl0X3NldF9yZWdpc3RlcihlbmdpbmUsIGJhdGNoLCBHRU44X0wzU1FDUkVHNCwKKwkJCQkgICAg
ICAgR0VOOF9MUVNDX0ZMVVNIX0NPSEVSRU5UX0xJTkVTKTsKIAogCWJhdGNoID0gZ2VuOF9lbWl0
X3BpcGVfY29udHJvbChiYXRjaCwKIAkJCQkgICAgICAgUElQRV9DT05UUk9MX0NTX1NUQUxMIHwK
IAkJCQkgICAgICAgUElQRV9DT05UUk9MX0RDX0ZMVVNIX0VOQUJMRSwKIAkJCQkgICAgICAgMCk7
CiAKLQkqYmF0Y2grKyA9IE1JX0xPQURfUkVHSVNURVJfTUVNX0dFTjggfCBNSV9TUk1fTFJNX0dM
T0JBTF9HVFQ7Ci0JKmJhdGNoKysgPSBpOTE1X21taW9fcmVnX29mZnNldChHRU44X0wzU1FDUkVH
NCk7Ci0JKmJhdGNoKysgPSBpbnRlbF9ndF9zY3JhdGNoX29mZnNldChlbmdpbmUtPmd0LAotCQkJ
CQkgICBJTlRFTF9HVF9TQ1JBVENIX0ZJRUxEX0NPSEVSRU5UTDNfV0EpOwotCSpiYXRjaCsrID0g
MDsKKwliYXRjaCA9IGdlbjhfZW1pdF9jbGVhcl9yZWdpc3RlcihlbmdpbmUsIGJhdGNoLCBHRU44
X0wzU1FDUkVHNCwKKwkJCQkJIEdFTjhfTFFTQ19GTFVTSF9DT0hFUkVOVF9MSU5FUyk7CiAKIAly
ZXR1cm4gYmF0Y2g7CiB9Ci0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeA==

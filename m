Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EAA2194CF3
	for <lists+intel-gfx@lfdr.de>; Mon, 19 Aug 2019 20:31:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EE7576E261;
	Mon, 19 Aug 2019 18:31:40 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F076F6E261
 for <intel-gfx@lists.freedesktop.org>; Mon, 19 Aug 2019 18:31:39 +0000 (UTC)
X-Amp-Result: UNSCANNABLE
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 19 Aug 2019 11:31:38 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,405,1559545200"; d="scan'208";a="172206074"
Received: from orsosgc001.ra.intel.com (HELO orsosgc001.amr.corp.intel.com)
 ([10.23.184.150])
 by orsmga008.jf.intel.com with ESMTP; 19 Aug 2019 11:31:37 -0700
Date: Mon, 19 Aug 2019 11:31:37 -0700
From: Umesh Nerlige Ramappa <umesh.nerlige.ramappa@intel.com>
To: Lucas De Marchi <lucas.demarchi@intel.com>
Message-ID: <20190819183137.GA1185@orsosgc001.amr.corp.intel.com>
References: <20190816080503.28594-1-lucas.demarchi@intel.com>
 <20190816080503.28594-34-lucas.demarchi@intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190816080503.28594-34-lucas.demarchi@intel.com>
User-Agent: Mutt/1.12.0 (2019-05-25)
Subject: Re: [Intel-gfx] [PATCH 33/39] drm/i915/perf: add a parameter to
 control the size of OA buffer
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org, Matthew Auld <matthew.auld@intel.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TG9va3MgZ29vZC4KClJldmlld2VkLWJ5OiBVbWVzaCBOZXJsaWdlIFJhbWFwcGEgPHVtZXNoLm5l
cmxpZ2UucmFtYXBwYUBpbnRlbC5jb20+CgpPbiBGcmksIEF1ZyAxNiwgMjAxOSBhdCAwMTowNDo1
N0FNIC0wNzAwLCBMdWNhcyBEZSBNYXJjaGkgd3JvdGU6Cj5Gcm9tOiBMaW9uZWwgTGFuZHdlcmxp
biA8bGlvbmVsLmcubGFuZHdlcmxpbkBpbnRlbC5jb20+Cj4KPlRoZSB3YXkgb3VyIGhhcmR3YXJl
IGlzIGRlc2lnbmVkIGRvZXNuJ3Qgc2VlbSB0byBsZXQgdXMgdXNlIHRoZQo+TUlfUkVDT1JEX1BF
UkZfQ09VTlQgY29tbWFuZCB3aXRob3V0IHNldHRpbmcgdXAgYSBjaXJjdWxhciBidWZmZXIuCj4K
PkluIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGRpZG4ndCByZXF1ZXN0IE9BIHJlcG9ydHMgdG8g
YmUgYXZhaWxhYmxlCj50aHJvdWdoIHRoZSBpOTE1IHBlcmYgc3RyZWFtLCB3ZSBjYW4gc2V0IHRo
ZSBPQSBidWZmZXIgdG8gdGhlIG1pbmltdW0KPnNpemUgdG8gYXZvaWQgY29uc3VtaW5nIG1lbW9y
eSB3aGljaCB3b24ndCBiZSB1c2VkIGJ5IHRoZSBkcml2ZXIuCj4KPkNjOiBKb29uYXMgTGFodGlu
ZW4gPGpvb25hcy5sYWh0aW5lbkBsaW51eC5pbnRlbC5jb20+Cj5DYzogTWF0dGhldyBBdWxkIDxt
YXR0aGV3LmF1bGRAaW50ZWwuY29tPgo+U2lnbmVkLW9mZi1ieTogTGlvbmVsIExhbmR3ZXJsaW4g
PGxpb25lbC5nLmxhbmR3ZXJsaW5AaW50ZWwuY29tPgo+U2lnbmVkLW9mZi1ieTogTHVjYXMgRGUg
TWFyY2hpIDxsdWNhcy5kZW1hcmNoaUBpbnRlbC5jb20+Cj4tLS0KPiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X3BlcmYuYyB8IDk4ICsrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tCj4g
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCAgfCAgMiArCj4gaW5jbHVkZS91YXBpL2Ry
bS9pOTE1X2RybS5oICAgICAgfCAgNyArKysKPiAzIGZpbGVzIGNoYW5nZWQsIDc0IGluc2VydGlv
bnMoKyksIDMzIGRlbGV0aW9ucygtKQo+Cj5kaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9wZXJmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwo+aW5kZXgg
MmM5ZjQ2ZTEyNjIyLi45Mzg2ZDljODI5MzAgMTAwNjQ0Cj4tLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X3BlcmYuYwo+KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMK
PkBAIC0yMTYsMTMgKzIxNiw3IEBACj4gI2luY2x1ZGUgIm9hL2k5MTVfb2FfY25sLmgiCj4gI2lu
Y2x1ZGUgIm9hL2k5MTVfb2FfaWNsLmgiCj4KPi0vKiBIVyByZXF1aXJlcyB0aGlzIHRvIGJlIGEg
cG93ZXIgb2YgdHdvLCBiZXR3ZWVuIDEyOGsgYW5kIDE2TSwgdGhvdWdoIGRyaXZlcgo+LSAqIGlz
IGN1cnJlbnRseSBnZW5lcmFsbHkgZGVzaWduZWQgYXNzdW1pbmcgdGhlIGxhcmdlc3QgMTZNIHNp
emUgaXMgdXNlZCBzdWNoCj4tICogdGhhdCB0aGUgb3ZlcmZsb3cgY2FzZXMgYXJlIHVubGlrZWx5
IGluIG5vcm1hbCBvcGVyYXRpb24uCj4tICovCj4tI2RlZmluZSBPQV9CVUZGRVJfU0laRQkJU1pf
MTZNCj4tCj4tI2RlZmluZSBPQV9UQUtFTih0YWlsLCBoZWFkKQkoKHRhaWwgLSBoZWFkKSAmIChP
QV9CVUZGRVJfU0laRSAtIDEpKQo+KyNkZWZpbmUgT0FfVEFLRU4odGFpbCwgaGVhZCkJKCgodGFp
bCkgLSAoaGVhZCkpICYgKHN0cmVhbS0+b2FfYnVmZmVyLnZtYS0+c2l6ZSAtIDEpKQo+Cj4gLyoq
Cj4gICogRE9DOiBPQSBUYWlsIFBvaW50ZXIgUmFjZQo+QEAgLTM0Nyw2ICszNDEsNyBAQCBzdGF0
aWMgY29uc3Qgc3RydWN0IGk5MTVfb2FfZm9ybWF0IGdlbjhfcGx1c19vYV9mb3JtYXRzW0k5MTVf
T0FfRk9STUFUX01BWF0gPSB7Cj4gICogQG9hX2Zvcm1hdDogQW4gT0EgdW5pdCBIVyByZXBvcnQg
Zm9ybWF0Cj4gICogQG9hX3BlcmlvZGljOiBXaGV0aGVyIHRvIGVuYWJsZSBwZXJpb2RpYyBPQSB1
bml0IHNhbXBsaW5nCj4gICogQG9hX3BlcmlvZF9leHBvbmVudDogVGhlIE9BIHVuaXQgc2FtcGxp
bmcgcGVyaW9kIGlzIGRlcml2ZWQgZnJvbSB0aGlzCj4rICogQG9hX2J1ZmZlcl9zaXplX2V4cG9u
ZW50OiBUaGUgT0EgYnVmZmVyIHNpemUgaXMgZGVyaXZlZCBmcm9tIHRoaXMKPiAgKgo+ICAqIEFz
IHJlYWRfcHJvcGVydGllc191bmxvY2tlZCgpIGVudW1lcmF0ZXMgYW5kIHZhbGlkYXRlcyB0aGUg
cHJvcGVydGllcyBnaXZlbgo+ICAqIHRvIG9wZW4gYSBzdHJlYW0gb2YgbWV0cmljcyB0aGUgY29u
ZmlndXJhdGlvbiBpcyBidWlsdCB1cCBpbiB0aGUgc3RydWN0dXJlCj5AQCAtMzYzLDYgKzM1OCw3
IEBAIHN0cnVjdCBwZXJmX29wZW5fcHJvcGVydGllcyB7Cj4gCWludCBvYV9mb3JtYXQ7Cj4gCWJv
b2wgb2FfcGVyaW9kaWM7Cj4gCWludCBvYV9wZXJpb2RfZXhwb25lbnQ7Cj4rCXUzMiBvYV9idWZm
ZXJfc2l6ZV9leHBvbmVudDsKPiB9Owo+Cj4gc3RhdGljIGVudW0gaHJ0aW1lcl9yZXN0YXJ0IG9h
X3BvbGxfY2hlY2tfdGltZXJfY2Ioc3RydWN0IGhydGltZXIgKmhydGltZXIpOwo+QEAgLTUzMSw3
ICs1MjcsNyBAQCBzdGF0aWMgYm9vbCBvYV9idWZmZXJfY2hlY2tfdW5sb2NrZWQoc3RydWN0IGk5
MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKPiAJCSAqIGNvdWxkIHB1dCB0aGUgdGFpbCBvdXQgb2Yg
Ym91bmRzLi4uCj4gCQkgKi8KPiAJCWlmIChod190YWlsID49IGd0dF9vZmZzZXQgJiYKPi0JCSAg
ICBod190YWlsIDwgKGd0dF9vZmZzZXQgKyBPQV9CVUZGRVJfU0laRSkpIHsKPisJCSAgICBod190
YWlsIDwgKGd0dF9vZmZzZXQgKyBzdHJlYW0tPm9hX2J1ZmZlci52bWEtPnNpemUpKSB7Cj4gCQkJ
c3RyZWFtLT5vYV9idWZmZXIudGFpbHNbIWFnZWRfaWR4XS5vZmZzZXQgPQo+IAkJCQlhZ2luZ190
YWlsID0gaHdfdGFpbDsKPiAJCQlzdHJlYW0tPm9hX2J1ZmZlci5hZ2luZ190aW1lc3RhbXAgPSBu
b3c7Cj5AQCAtNjU5LDcgKzY1NSw3IEBAIHN0YXRpYyBpbnQgZ2VuOF9hcHBlbmRfb2FfcmVwb3J0
cyhzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAo+IAlpbnQgcmVwb3J0X3NpemUgPSBz
dHJlYW0tPm9hX2J1ZmZlci5mb3JtYXRfc2l6ZTsKPiAJdTggKm9hX2J1Zl9iYXNlID0gc3RyZWFt
LT5vYV9idWZmZXIudmFkZHI7Cj4gCXUzMiBndHRfb2Zmc2V0ID0gaTkxNV9nZ3R0X29mZnNldChz
dHJlYW0tPm9hX2J1ZmZlci52bWEpOwo+LQl1MzIgbWFzayA9IChPQV9CVUZGRVJfU0laRSAtIDEp
Owo+Kwl1MzIgbWFzayA9IChzdHJlYW0tPm9hX2J1ZmZlci52bWEtPnNpemUgLSAxKTsKPiAJc2l6
ZV90IHN0YXJ0X29mZnNldCA9ICpvZmZzZXQ7Cj4gCXVuc2lnbmVkIGxvbmcgZmxhZ3M7Cj4gCXVu
c2lnbmVkIGludCBhZ2VkX3RhaWxfaWR4Owo+QEAgLTY5OSw4ICs2OTUsOCBAQCBzdGF0aWMgaW50
IGdlbjhfYXBwZW5kX29hX3JlcG9ydHMoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwK
PiAJICogb25seSBiZSBpbmNyZW1lbnRlZCBieSBtdWx0aXBsZXMgb2YgdGhlIHJlcG9ydCBzaXpl
IChub3RhYmx5IGFsc28KPiAJICogYWxsIGEgcG93ZXIgb2YgdHdvKS4KPiAJICovCj4tCWlmIChX
QVJOX09OQ0UoaGVhZCA+IE9BX0JVRkZFUl9TSVpFIHx8IGhlYWQgJSByZXBvcnRfc2l6ZSB8fAo+
LQkJICAgICAgdGFpbCA+IE9BX0JVRkZFUl9TSVpFIHx8IHRhaWwgJSByZXBvcnRfc2l6ZSwKPisJ
aWYgKFdBUk5fT05DRShoZWFkID4gc3RyZWFtLT5vYV9idWZmZXIudm1hLT5zaXplIHx8IGhlYWQg
JSByZXBvcnRfc2l6ZSB8fAo+KwkJICAgICAgdGFpbCA+IHN0cmVhbS0+b2FfYnVmZmVyLnZtYS0+
c2l6ZSB8fCB0YWlsICUgcmVwb3J0X3NpemUsCj4gCQkgICAgICAiSW5jb25zaXN0ZW50IE9BIGJ1
ZmZlciBwb2ludGVyczogaGVhZCA9ICV1LCB0YWlsID0gJXVcbiIsCj4gCQkgICAgICBoZWFkLCB0
YWlsKSkKPiAJCXJldHVybiAtRUlPOwo+QEAgLTcyMyw3ICs3MTksNyBAQCBzdGF0aWMgaW50IGdl
bjhfYXBwZW5kX29hX3JlcG9ydHMoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKPiAJ
CSAqIGhlcmUgd291bGQgaW1wbHkgYSBkcml2ZXIgYnVnIHRoYXQgd291bGQgcmVzdWx0Cj4gCQkg
KiBpbiBhbiBvdmVycnVuLgo+IAkJICovCj4tCQlpZiAoV0FSTl9PTigoT0FfQlVGRkVSX1NJWkUg
LSBoZWFkKSA8IHJlcG9ydF9zaXplKSkgewo+KwkJaWYgKFdBUk5fT04oKHN0cmVhbS0+b2FfYnVm
ZmVyLnZtYS0+c2l6ZSAtIGhlYWQpIDwgcmVwb3J0X3NpemUpKSB7Cj4gCQkJRFJNX0VSUk9SKCJT
cHVyaW91cyBPQSBoZWFkIHB0cjogbm9uLWludGVncmFsIHJlcG9ydCBvZmZzZXRcbiIpOwo+IAkJ
CWJyZWFrOwo+IAkJfQo+QEAgLTg4MSwxMSArODc3LDYgQEAgc3RhdGljIGludCBnZW44X29hX3Jl
YWQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKPiAJICogYXV0b21hdGljYWxseSB0
cmlnZ2VyZWQgcmVwb3J0cyBpbiB0aGlzIGNvbmRpdGlvbiBhbmQgc28gd2UKPiAJICogaGF2ZSB0
byBhc3N1bWUgdGhhdCBvbGQgcmVwb3J0cyBhcmUgbm93IGJlaW5nIHRyYW1wbGVkCj4gCSAqIG92
ZXIuCj4tCSAqCj4tCSAqIENvbnNpZGVyaW5nIGhvdyB3ZSBkb24ndCBjdXJyZW50bHkgZ2l2ZSB1
c2Vyc3BhY2UgY29udHJvbAo+LQkgKiBvdmVyIHRoZSBPQSBidWZmZXIgc2l6ZSBhbmQgYWx3YXlz
IGNvbmZpZ3VyZSBhIGxhcmdlIDE2TUIKPi0JICogYnVmZmVyLCB0aGVuIGEgYnVmZmVyIG92ZXJm
bG93IGRvZXMgYW55d2F5IGxpa2VseSBpbmRpY2F0ZQo+LQkgKiB0aGF0IHNvbWV0aGluZyBoYXMg
Z29uZSBxdWl0ZSBiYWRseSB3cm9uZy4KPiAJICovCj4gCWlmIChvYXN0YXR1cyAmIEdFTjhfT0FT
VEFUVVNfT0FCVUZGRVJfT1ZFUkZMT1cpIHsKPiAJCXJldCA9IGFwcGVuZF9vYV9zdGF0dXMoc3Ry
ZWFtLCBidWYsIGNvdW50LCBvZmZzZXQsCj5AQCAtOTQ3LDcgKzkzOCw3IEBAIHN0YXRpYyBpbnQg
Z2VuN19hcHBlbmRfb2FfcmVwb3J0cyhzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAo+
IAlpbnQgcmVwb3J0X3NpemUgPSBzdHJlYW0tPm9hX2J1ZmZlci5mb3JtYXRfc2l6ZTsKPiAJdTgg
Km9hX2J1Zl9iYXNlID0gc3RyZWFtLT5vYV9idWZmZXIudmFkZHI7Cj4gCXUzMiBndHRfb2Zmc2V0
ID0gaTkxNV9nZ3R0X29mZnNldChzdHJlYW0tPm9hX2J1ZmZlci52bWEpOwo+LQl1MzIgbWFzayA9
IChPQV9CVUZGRVJfU0laRSAtIDEpOwo+Kwl1MzIgbWFzayA9IChzdHJlYW0tPm9hX2J1ZmZlci52
bWEtPnNpemUgLSAxKTsKPiAJc2l6ZV90IHN0YXJ0X29mZnNldCA9ICpvZmZzZXQ7Cj4gCXVuc2ln
bmVkIGxvbmcgZmxhZ3M7Cj4gCXVuc2lnbmVkIGludCBhZ2VkX3RhaWxfaWR4Owo+QEAgLTk4NCw4
ICs5NzUsOCBAQCBzdGF0aWMgaW50IGdlbjdfYXBwZW5kX29hX3JlcG9ydHMoc3RydWN0IGk5MTVf
cGVyZl9zdHJlYW0gKnN0cmVhbSwKPiAJICogb25seSBiZSBpbmNyZW1lbnRlZCBieSBtdWx0aXBs
ZXMgb2YgdGhlIHJlcG9ydCBzaXplIChub3RhYmx5IGFsc28KPiAJICogYWxsIGEgcG93ZXIgb2Yg
dHdvKS4KPiAJICovCj4tCWlmIChXQVJOX09OQ0UoaGVhZCA+IE9BX0JVRkZFUl9TSVpFIHx8IGhl
YWQgJSByZXBvcnRfc2l6ZSB8fAo+LQkJICAgICAgdGFpbCA+IE9BX0JVRkZFUl9TSVpFIHx8IHRh
aWwgJSByZXBvcnRfc2l6ZSwKPisJaWYgKFdBUk5fT05DRShoZWFkID4gc3RyZWFtLT5vYV9idWZm
ZXIudm1hLT5zaXplIHx8IGhlYWQgJSByZXBvcnRfc2l6ZSB8fAo+KwkJICAgICAgdGFpbCA+IHN0
cmVhbS0+b2FfYnVmZmVyLnZtYS0+c2l6ZSB8fCB0YWlsICUgcmVwb3J0X3NpemUsCj4gCQkgICAg
ICAiSW5jb25zaXN0ZW50IE9BIGJ1ZmZlciBwb2ludGVyczogaGVhZCA9ICV1LCB0YWlsID0gJXVc
biIsCj4gCQkgICAgICBoZWFkLCB0YWlsKSkKPiAJCXJldHVybiAtRUlPOwo+QEAgLTEwMDUsNyAr
OTk2LDcgQEAgc3RhdGljIGludCBnZW43X2FwcGVuZF9vYV9yZXBvcnRzKHN0cnVjdCBpOTE1X3Bl
cmZfc3RyZWFtICpzdHJlYW0sCj4gCQkgKiBoZXJlIHdvdWxkIGltcGx5IGEgZHJpdmVyIGJ1ZyB0
aGF0IHdvdWxkIHJlc3VsdAo+IAkJICogaW4gYW4gb3ZlcnJ1bi4KPiAJCSAqLwo+LQkJaWYgKFdB
Uk5fT04oKE9BX0JVRkZFUl9TSVpFIC0gaGVhZCkgPCByZXBvcnRfc2l6ZSkpIHsKPisJCWlmIChX
QVJOX09OKChzdHJlYW0tPm9hX2J1ZmZlci52bWEtPnNpemUgLSBoZWFkKSA8IHJlcG9ydF9zaXpl
KSkgewo+IAkJCURSTV9FUlJPUigiU3B1cmlvdXMgT0EgaGVhZCBwdHI6IG5vbi1pbnRlZ3JhbCBy
ZXBvcnQgb2Zmc2V0XG4iKTsKPiAJCQlicmVhazsKPiAJCX0KPkBAIC0xNDA4LDcgKzEzOTksOSBA
QCBzdGF0aWMgdm9pZCBnZW43X2luaXRfb2FfYnVmZmVyKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFt
ICpzdHJlYW0pCj4KPiAJSTkxNV9XUklURShHRU43X09BQlVGRkVSLCBndHRfb2Zmc2V0KTsKPgo+
LQlJOTE1X1dSSVRFKEdFTjdfT0FTVEFUVVMxLCBndHRfb2Zmc2V0IHwgT0FCVUZGRVJfU0laRV8x
Nk0pOyAvKiB0YWlsICovCj4rCUk5MTVfV1JJVEUoR0VON19PQVNUQVRVUzEsIGd0dF9vZmZzZXQg
fAo+KwkJICAgKChzdHJlYW0tPm9hX2J1ZmZlci5zaXplX2V4cG9uZW50IC0gMTcpIDw8Cj4rCQkg
ICAgR0VON19PQVNUQVRVUzFfQlVGRkVSX1NJWkVfU0hJRlQpKTsgLyogdGFpbCAqLwo+Cj4gCS8q
IE1hcmsgdGhhdCB3ZSBuZWVkIHVwZGF0ZWQgdGFpbCBwb2ludGVycyB0byByZWFkIGZyb20uLi4g
Ki8KPiAJc3RyZWFtLT5vYV9idWZmZXIudGFpbHNbMF0ub2Zmc2V0ID0gSU5WQUxJRF9UQUlMX1BU
UjsKPkBAIC0xNDMzLDcgKzE0MjYsNyBAQCBzdGF0aWMgdm9pZCBnZW43X2luaXRfb2FfYnVmZmVy
KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCj4gCSAqIHRoZSBhc3N1bXB0aW9uIHRo
YXQgbmV3IHJlcG9ydHMgYXJlIGJlaW5nIHdyaXR0ZW4gdG8gemVyb2VkCj4gCSAqIG1lbW9yeS4u
Lgo+IAkgKi8KPi0JbWVtc2V0KHN0cmVhbS0+b2FfYnVmZmVyLnZhZGRyLCAwLCBPQV9CVUZGRVJf
U0laRSk7Cj4rCW1lbXNldChzdHJlYW0tPm9hX2J1ZmZlci52YWRkciwgMCwgc3RyZWFtLT5vYV9i
dWZmZXIudm1hLT5zaXplKTsKPgo+IAkvKiBNYXliZSBtYWtlIC0+cG9sbGluIHBlci1zdHJlYW0g
c3RhdGUgaWYgd2Ugc3VwcG9ydCBtdWx0aXBsZQo+IAkgKiBjb25jdXJyZW50IHN0cmVhbXMgaW4g
dGhlIGZ1dHVyZS4KPkBAIC0xNDY0LDcgKzE0NTcsOSBAQCBzdGF0aWMgdm9pZCBnZW44X2luaXRf
b2FfYnVmZmVyKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCj4gCSAqICBiaXQuIgo+
IAkgKi8KPiAJSTkxNV9XUklURShHRU44X09BQlVGRkVSLCBndHRfb2Zmc2V0IHwKPi0JCSAgIE9B
QlVGRkVSX1NJWkVfMTZNIHwgR0VOOF9PQUJVRkZFUl9NRU1fU0VMRUNUX0dHVFQpOwo+KwkJICAg
KChzdHJlYW0tPm9hX2J1ZmZlci5zaXplX2V4cG9uZW50IC0gMTcpIDw8Cj4rCQkgICAgR0VOOF9P
QUJVRkZFUl9CVUZGRVJfU0laRV9TSElGVCkgfAo+KwkJICAgR0VOOF9PQUJVRkZFUl9NRU1fU0VM
RUNUX0dHVFQpOwo+IAlJOTE1X1dSSVRFKEdFTjhfT0FUQUlMUFRSLCBndHRfb2Zmc2V0ICYgR0VO
OF9PQVRBSUxQVFJfTUFTSyk7Cj4KPiAJLyogTWFyayB0aGF0IHdlIG5lZWQgdXBkYXRlZCB0YWls
IHBvaW50ZXJzIHRvIHJlYWQgZnJvbS4uLiAqLwo+QEAgLTE0OTIsNyArMTQ4Nyw3IEBAIHN0YXRp
YyB2b2lkIGdlbjhfaW5pdF9vYV9idWZmZXIoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVh
bSkKPiAJICogdGhlIGFzc3VtcHRpb24gdGhhdCBuZXcgcmVwb3J0cyBhcmUgYmVpbmcgd3JpdHRl
biB0byB6ZXJvZWQKPiAJICogbWVtb3J5Li4uCj4gCSAqLwo+LQltZW1zZXQoc3RyZWFtLT5vYV9i
dWZmZXIudmFkZHIsIDAsIE9BX0JVRkZFUl9TSVpFKTsKPisJbWVtc2V0KHN0cmVhbS0+b2FfYnVm
ZmVyLnZhZGRyLCAwLCBzdHJlYW0tPm9hX2J1ZmZlci52bWEtPnNpemUpOwo+Cj4gCS8qCj4gCSAq
IE1heWJlIG1ha2UgLT5wb2xsaW4gcGVyLXN0cmVhbSBzdGF0ZSBpZiB3ZSBzdXBwb3J0IG11bHRp
cGxlCj5AQCAtMTUwMSwyNCArMTQ5NiwyNSBAQCBzdGF0aWMgdm9pZCBnZW44X2luaXRfb2FfYnVm
ZmVyKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCj4gCXN0cmVhbS0+cG9sbGluID0g
ZmFsc2U7Cj4gfQo+Cj4tc3RhdGljIGludCBhbGxvY19vYV9idWZmZXIoc3RydWN0IGk5MTVfcGVy
Zl9zdHJlYW0gKnN0cmVhbSkKPitzdGF0aWMgaW50IGFsbG9jX29hX2J1ZmZlcihzdHJ1Y3QgaTkx
NV9wZXJmX3N0cmVhbSAqc3RyZWFtLCBpbnQgc2l6ZV9leHBvbmVudCkKPiB7Cj4gCXN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpibzsKPiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gc3RyZWFtLT5kZXZfcHJpdjsKPiAJc3RydWN0IGk5MTVfdm1hICp2bWE7Cj4rCXNpemVf
dCBzaXplID0gMVUgPDwgc2l6ZV9leHBvbmVudDsKPiAJaW50IHJldDsKPgo+IAlpZiAoV0FSTl9P
TihzdHJlYW0tPm9hX2J1ZmZlci52bWEpKQo+IAkJcmV0dXJuIC1FTk9ERVY7Cj4KPisJaWYgKFdB
Uk5fT04oc2l6ZSA8IFNaXzEyOEsgfHwgc2l6ZSA+IFNaXzE2TSkpCj4rCQlyZXR1cm4gLUVJTlZB
TDsKPisKPiAJcmV0ID0gaTkxNV9tdXRleF9sb2NrX2ludGVycnVwdGlibGUoJmRldl9wcml2LT5k
cm0pOwo+IAlpZiAocmV0KQo+IAkJcmV0dXJuIHJldDsKPgo+LQlCVUlMRF9CVUdfT05fTk9UX1BP
V0VSX09GXzIoT0FfQlVGRkVSX1NJWkUpOwo+LQlCVUlMRF9CVUdfT04oT0FfQlVGRkVSX1NJWkUg
PCBTWl8xMjhLIHx8IE9BX0JVRkZFUl9TSVpFID4gU1pfMTZNKTsKPi0KPi0JYm8gPSBpOTE1X2dl
bV9vYmplY3RfY3JlYXRlX3NobWVtKGRldl9wcml2LCBPQV9CVUZGRVJfU0laRSk7Cj4rCWJvID0g
aTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9zaG1lbShkZXZfcHJpdiwgc2l6ZSk7Cj4gCWlmIChJU19F
UlIoYm8pKSB7Cj4gCQlEUk1fRVJST1IoIkZhaWxlZCB0byBhbGxvY2F0ZSBPQSBidWZmZXJcbiIp
Owo+IAkJcmV0ID0gUFRSX0VSUihibyk7Cj5AQCAtMTUzNCw2ICsxNTMwLDcgQEAgc3RhdGljIGlu
dCBhbGxvY19vYV9idWZmZXIoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKPiAJCWdv
dG8gZXJyX3VucmVmOwo+IAl9Cj4gCXN0cmVhbS0+b2FfYnVmZmVyLnZtYSA9IHZtYTsKPisJc3Ry
ZWFtLT5vYV9idWZmZXIuc2l6ZV9leHBvbmVudCA9IHNpemVfZXhwb25lbnQ7Cj4KPiAJc3RyZWFt
LT5vYV9idWZmZXIudmFkZHIgPQo+IAkJaTkxNV9nZW1fb2JqZWN0X3Bpbl9tYXAoYm8sIEk5MTVf
TUFQX1dCKTsKPkBAIC0xNTQyLDkgKzE1MzksMTAgQEAgc3RhdGljIGludCBhbGxvY19vYV9idWZm
ZXIoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKPiAJCWdvdG8gZXJyX3VucGluOwo+
IAl9Cj4KPi0JRFJNX0RFQlVHX0RSSVZFUigiT0EgQnVmZmVyIGluaXRpYWxpemVkLCBndHQgb2Zm
c2V0ID0gMHgleCwgdmFkZHIgPSAlcFxuIiwKPisJRFJNX0RFQlVHX0RSSVZFUigiT0EgQnVmZmVy
IGluaXRpYWxpemVkLCBndHQgb2Zmc2V0ID0gMHgleCwgdmFkZHIgPSAlcCwgc2l6ZSA9ICVsbHVc
biIsCj4gCQkJIGk5MTVfZ2d0dF9vZmZzZXQoc3RyZWFtLT5vYV9idWZmZXIudm1hKSwKPi0JCQkg
c3RyZWFtLT5vYV9idWZmZXIudmFkZHIpOwo+KwkJCSBzdHJlYW0tPm9hX2J1ZmZlci52YWRkciwK
PisJCQkgc3RyZWFtLT5vYV9idWZmZXIudm1hLT5zaXplKTsKPgo+IAlnb3RvIHVubG9jazsKPgo+
QEAgLTIyNTEsNyArMjI0OSw3IEBAIHN0YXRpYyBpbnQgaTkxNV9vYV9zdHJlYW1faW5pdChzdHJ1
Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAo+IAlzdHJlYW0tPndha2VyZWYgPSBpbnRlbF9y
dW50aW1lX3BtX2dldCgmZGV2X3ByaXYtPnJ1bnRpbWVfcG0pOwo+IAlpbnRlbF91bmNvcmVfZm9y
Y2V3YWtlX2dldCgmZGV2X3ByaXYtPnVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7Cj4KPi0JcmV0ID0g
YWxsb2Nfb2FfYnVmZmVyKHN0cmVhbSk7Cj4rCXJldCA9IGFsbG9jX29hX2J1ZmZlcihzdHJlYW0s
IHByb3BzLT5vYV9idWZmZXJfc2l6ZV9leHBvbmVudCk7Cj4gCWlmIChyZXQpCj4gCQlnb3RvIGVy
cl9vYV9idWZfYWxsb2M7Cj4KPkBAIC0yODIzLDYgKzI4MjEsMjYgQEAgc3RhdGljIHU2NCBvYV9l
eHBvbmVudF90b19ucyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGludCBleHBv
bmVudCkKPiAJCQkgMTAwMFVMTCAqIFJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPmNzX3RpbWVzdGFt
cF9mcmVxdWVuY3lfa2h6KTsKPiB9Cj4KPitzdGF0aWMgaW50Cj4rc2VsZWN0X29hX2J1ZmZlcl9l
eHBvbmVudChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKPisJCQkgIHU2NCByZXF1ZXN0
ZWRfc2l6ZSkKPit7Cj4rCWludCBvcmRlcjsKPisKPisJLyoKPisJICogV2hlbiBubyBzaXplIGlz
IHNwZWNpZmllZCwgdXNlIHRoZSBsYXJnZXN0IHNpemUgc3VwcG9ydGVkIGJ5IGFsbAo+KwkgKiBn
ZW5lcmF0aW9ucy4KPisJICovCj4rCWlmICghcmVxdWVzdGVkX3NpemUpCj4rCQlyZXR1cm4gb3Jk
ZXJfYmFzZV8yKFNaXzE2TSk7Cj4rCj4rCW9yZGVyID0gb3JkZXJfYmFzZV8yKGNsYW1wX3QodTY0
LCByZXF1ZXN0ZWRfc2l6ZSwgU1pfMTI4SywgU1pfMTZNKSk7Cj4rCWlmIChyZXF1ZXN0ZWRfc2l6
ZSAhPSAoMVVMIDw8IG9yZGVyKSkKPisJCXJldHVybiAtRUlOVkFMOwo+Kwo+KwlyZXR1cm4gb3Jk
ZXI7Cj4rfQo+Kwo+IC8qKgo+ICAqIHJlYWRfcHJvcGVydGllc191bmxvY2tlZCAtIHZhbGlkYXRl
ICsgY29weSB1c2Vyc3BhY2Ugc3RyZWFtIG9wZW4gcHJvcGVydGllcwo+ICAqIEBkZXZfcHJpdjog
aTkxNSBkZXZpY2UgaW5zdGFuY2UKPkBAIC0yOTUwLDYgKzI5NjgsMTQgQEAgc3RhdGljIGludCBy
ZWFkX3Byb3BlcnRpZXNfdW5sb2NrZWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
LAo+IAkJCXByb3BzLT5vYV9wZXJpb2RpYyA9IHRydWU7Cj4gCQkJcHJvcHMtPm9hX3BlcmlvZF9l
eHBvbmVudCA9IHZhbHVlOwo+IAkJCWJyZWFrOwo+KwkJY2FzZSBEUk1fSTkxNV9QRVJGX1BST1Bf
T0FfQlVGRkVSX1NJWkU6Cj4rCQkJcmV0ID0gc2VsZWN0X29hX2J1ZmZlcl9leHBvbmVudChkZXZf
cHJpdiwgdmFsdWUpOwo+KwkJCWlmIChyZXQgPCAwKSB7Cj4rCQkJCURSTV9ERUJVRygiT0EgYnVm
ZmVyIHNpemUgaW52YWxpZCAlbGx1XG4iLCB2YWx1ZSk7Cj4rCQkJCXJldHVybiByZXQ7Cj4rCQkJ
fQo+KwkJCXByb3BzLT5vYV9idWZmZXJfc2l6ZV9leHBvbmVudCA9IHJldDsKPisJCQlicmVhazsK
PiAJCWNhc2UgRFJNX0k5MTVfUEVSRl9QUk9QX01BWDoKPiAJCQlNSVNTSU5HX0NBU0UoaWQpOwo+
IAkJCXJldHVybiAtRUlOVkFMOwo+QEAgLTI5NTgsNiArMjk4NCwxMiBAQCBzdGF0aWMgaW50IHJl
YWRfcHJvcGVydGllc191bmxvY2tlZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYs
Cj4gCQl1cHJvcCArPSAyOwo+IAl9Cj4KPisJLyogSWYgbm8gYnVmZmVyIHNpemUgd2FzIHJlcXVl
c3RlZCwgc2VsZWN0IHRoZSBkZWZhdWx0IG9uZS4gKi8KPisJaWYgKCFwcm9wcy0+b2FfYnVmZmVy
X3NpemVfZXhwb25lbnQpIHsKPisJCXByb3BzLT5vYV9idWZmZXJfc2l6ZV9leHBvbmVudCA9Cj4r
CQkJc2VsZWN0X29hX2J1ZmZlcl9leHBvbmVudChkZXZfcHJpdiwgMCk7Cj4rCX0KPisKPiAJcmV0
dXJuIDA7Cj4gfQo+Cj5kaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcu
aCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKPmluZGV4IDM0ZDgzZTNhNTFhNy4u
ZDM1ZjM4NWY4Mjg4IDEwMDY0NAo+LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcu
aAo+KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAo+QEAgLTY3NSwxMiArNjc1
LDE0IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBpOTE1X21taW9fcmVnX3ZhbGlkKGk5MTVfcmVnX3Qg
cmVnKQo+ICNkZWZpbmUgR0VOOF9PQUJVRkZFUl9VRFcgX01NSU8oMHgyM2I0KQo+ICNkZWZpbmUg
R0VOOF9PQUJVRkZFUiBfTU1JTygweDJiMTQpCj4gI2RlZmluZSAgR0VOOF9PQUJVRkZFUl9NRU1f
U0VMRUNUX0dHVFQgICAgICAoMSA8PCAwKSAgLyogMDogUFBHVFQsIDE6IEdHVFQgKi8KPisjZGVm
aW5lICBHRU44X09BQlVGRkVSX0JVRkZFUl9TSVpFX1NISUZUICAgIDMKPgo+ICNkZWZpbmUgR0VO
N19PQVNUQVRVUzEgX01NSU8oMHgyMzY0KQo+ICNkZWZpbmUgIEdFTjdfT0FTVEFUVVMxX1RBSUxf
TUFTSwkgICAgMHhmZmZmZmZjMAo+ICNkZWZpbmUgIEdFTjdfT0FTVEFUVVMxX0NPVU5URVJfT1ZF
UkZMT1cgICAgKDEgPDwgMikKPiAjZGVmaW5lICBHRU43X09BU1RBVFVTMV9PQUJVRkZFUl9PVkVS
RkxPVyAgICgxIDw8IDEpCj4gI2RlZmluZSAgR0VON19PQVNUQVRVUzFfUkVQT1JUX0xPU1QJICAg
ICgxIDw8IDApCj4rI2RlZmluZSAgR0VON19PQVNUQVRVUzFfQlVGRkVSX1NJWkVfU0hJRlQgICAz
Cj4KPiAjZGVmaW5lIEdFTjdfT0FTVEFUVVMyIF9NTUlPKDB4MjM2OCkKPiAjZGVmaW5lICBHRU43
X09BU1RBVFVTMl9IRUFEX01BU0sgICAgICAgICAgIDB4ZmZmZmZmYzAKPmRpZmYgLS1naXQgYS9p
bmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmggYi9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgK
PmluZGV4IDQ2OWRjNTEyY2NhMy4uZjY2MmM1MzRkZTBhIDEwMDY0NAo+LS0tIGEvaW5jbHVkZS91
YXBpL2RybS9pOTE1X2RybS5oCj4rKysgYi9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgKPkBA
IC0xODczLDYgKzE4NzMsMTMgQEAgZW51bSBkcm1faTkxNV9wZXJmX3Byb3BlcnR5X2lkIHsKPiAJ
ICovCj4gCURSTV9JOTE1X1BFUkZfUFJPUF9PQV9FWFBPTkVOVCwKPgo+KwkvKioKPisJICogU3Bl
Y2lmeSBhIGdsb2JhbCBPQSBidWZmZXIgc2l6ZSB0byBiZSBhbGxvY2F0ZWQgaW4gYnl0ZXMuIFRo
ZSBzaXplCj4rCSAqIHNwZWNpZmllZCBtdXN0IGJlIHN1cHBvcnRlZCBieSBIVyAoY3VycmVudGx5
IHN1cHBvcnRlZCBzaXplcyBhcmUKPisJICogcG93ZXJzIG9mIDIgcmFuZ2luZyBmcm9tIDEyOEti
IHRvIDE2TWIpLgo+KwkgKi8KPisJRFJNX0k5MTVfUEVSRl9QUk9QX09BX0JVRkZFUl9TSVpFLAo+
Kwo+IAlEUk1fSTkxNV9QRVJGX1BST1BfTUFYIC8qIG5vbi1BQkkgKi8KPiB9Owo+Cj4tLSAKPjIu
MjEuMAo+Cj5fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+
SW50ZWwtZ2Z4IG1haWxpbmcgbGlzdAo+SW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4
IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

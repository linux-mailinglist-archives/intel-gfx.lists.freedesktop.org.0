Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D8380DBB11
	for <lists+intel-gfx@lfdr.de>; Fri, 18 Oct 2019 02:50:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EC8C36E0E6;
	Fri, 18 Oct 2019 00:50:32 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 930D26E075
 for <intel-gfx@lists.freedesktop.org>; Fri, 18 Oct 2019 00:50:31 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 17 Oct 2019 17:50:29 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,309,1566889200"; d="scan'208";a="371308989"
Received: from orsosgc001.ra.intel.com ([10.23.184.150])
 by orsmga005.jf.intel.com with ESMTP; 17 Oct 2019 17:50:29 -0700
From: Umesh Nerlige Ramappa <umesh.nerlige.ramappa@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 17 Oct 2019 17:50:26 -0700
Message-Id: <20191018005028.47441-1-umesh.nerlige.ramappa@intel.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 1/3] drm/i915/perf: Add helper macros for
 comparing with whitelisted registers
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>,
 Chris Wilson <chris.p.wilson@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWRkIGhlbHBlciBtYWNyb3MgZm9yIHJhbmdlIGFuZCBlcXVhbGl0eSBjb21wYXJpc29ucyBhbmQg
dXNlIHRoZW0gdG8KY2hlY2sgd2l0aCB3aGl0ZWxpc3RlZCByZWdpc3RlcnMgaW4gb2EgY29uZmln
dXJhdGlvbnMuCgpTaWduZWQtb2ZmLWJ5OiBVbWVzaCBOZXJsaWdlIFJhbWFwcGEgPHVtZXNoLm5l
cmxpZ2UucmFtYXBwYUBpbnRlbC5jb20+ClJldmlld2VkLWJ5OiBMaW9uZWwgTGFuZHdlcmxpbiA8
bGlvbmVsLmcubGFuZHdlcmxpbkBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wZXJmLmMgfCA1NCArKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLQogMSBmaWxl
IGNoYW5nZWQsIDI4IGluc2VydGlvbnMoKyksIDI2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wZXJmLmMKaW5kZXggNTRlYzFjNDE5MGFjLi45MTcwNzU1OGEwZjUgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcGVyZi5jCkBAIC0zNTE0LDU2ICszNTE0LDU4IEBAIHN0YXRpYyBib29sIGdlbjhf
aXNfdmFsaWRfZmxleF9hZGRyKHN0cnVjdCBpOTE1X3BlcmYgKnBlcmYsIHUzMiBhZGRyKQogCXJl
dHVybiBmYWxzZTsKIH0KIAorI2RlZmluZSBBRERSX0lOX1JBTkdFKGFkZHIsIHN0YXJ0LCBlbmQp
IFwKKwkoKGFkZHIpID49IChzdGFydCkgJiYgXAorCSAoYWRkcikgPD0gKGVuZCkpCisKKyNkZWZp
bmUgUkVHX0lOX1JBTkdFKGFkZHIsIHN0YXJ0LCBlbmQpIFwKKwkoKGFkZHIpID49IGk5MTVfbW1p
b19yZWdfb2Zmc2V0KHN0YXJ0KSAmJiBcCisJIChhZGRyKSA8PSBpOTE1X21taW9fcmVnX29mZnNl
dChlbmQpKQorCisjZGVmaW5lIFJFR19FUVVBTChhZGRyLCBtbWlvKSBcCisJKChhZGRyKSA9PSBp
OTE1X21taW9fcmVnX29mZnNldChtbWlvKSkKKwogc3RhdGljIGJvb2wgZ2VuN19pc192YWxpZF9i
X2NvdW50ZXJfYWRkcihzdHJ1Y3QgaTkxNV9wZXJmICpwZXJmLCB1MzIgYWRkcikKIHsKLQlyZXR1
cm4gKGFkZHIgPj0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoT0FTVEFSVFRSSUcxKSAmJgotCQlhZGRy
IDw9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE9BU1RBUlRUUklHOCkpIHx8Ci0JCShhZGRyID49IGk5
MTVfbW1pb19yZWdfb2Zmc2V0KE9BUkVQT1JUVFJJRzEpICYmCi0JCSBhZGRyIDw9IGk5MTVfbW1p
b19yZWdfb2Zmc2V0KE9BUkVQT1JUVFJJRzgpKSB8fAotCQkoYWRkciA+PSBpOTE1X21taW9fcmVn
X29mZnNldChPQUNFQzBfMCkgJiYKLQkJIGFkZHIgPD0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoT0FD
RUM3XzEpKTsKKwlyZXR1cm4gUkVHX0lOX1JBTkdFKGFkZHIsIE9BU1RBUlRUUklHMSwgT0FTVEFS
VFRSSUc4KSB8fAorCSAgICAgICBSRUdfSU5fUkFOR0UoYWRkciwgT0FSRVBPUlRUUklHMSwgT0FS
RVBPUlRUUklHOCkgfHwKKwkgICAgICAgUkVHX0lOX1JBTkdFKGFkZHIsIE9BQ0VDMF8wLCBPQUNF
QzdfMSk7CiB9CiAKIHN0YXRpYyBib29sIGdlbjdfaXNfdmFsaWRfbXV4X2FkZHIoc3RydWN0IGk5
MTVfcGVyZiAqcGVyZiwgdTMyIGFkZHIpCiB7Ci0JcmV0dXJuIGFkZHIgPT0gaTkxNV9tbWlvX3Jl
Z19vZmZzZXQoSEFMRl9TTElDRV9DSElDS0VOMikgfHwKLQkJKGFkZHIgPj0gaTkxNV9tbWlvX3Jl
Z19vZmZzZXQoTUlDUk9fQlAwXzApICYmCi0JCSBhZGRyIDw9IGk5MTVfbW1pb19yZWdfb2Zmc2V0
KE5PQV9XUklURSkpIHx8Ci0JCShhZGRyID49IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE9BX1BFUkZD
TlQxX0xPKSAmJgotCQkgYWRkciA8PSBpOTE1X21taW9fcmVnX29mZnNldChPQV9QRVJGQ05UMl9I
SSkpIHx8Ci0JCShhZGRyID49IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE9BX1BFUkZNQVRSSVhfTE8p
ICYmCi0JCSBhZGRyIDw9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE9BX1BFUkZNQVRSSVhfSEkpKTsK
KwlyZXR1cm4gUkVHX0VRVUFMKGFkZHIsIEhBTEZfU0xJQ0VfQ0hJQ0tFTjIpIHx8CisJICAgICAg
IFJFR19JTl9SQU5HRShhZGRyLCBNSUNST19CUDBfMCwgTk9BX1dSSVRFKSB8fAorCSAgICAgICBS
RUdfSU5fUkFOR0UoYWRkciwgT0FfUEVSRkNOVDFfTE8sIE9BX1BFUkZDTlQyX0hJKSB8fAorCSAg
ICAgICBSRUdfSU5fUkFOR0UoYWRkciwgT0FfUEVSRk1BVFJJWF9MTywgT0FfUEVSRk1BVFJJWF9I
SSk7CiB9CiAKIHN0YXRpYyBib29sIGdlbjhfaXNfdmFsaWRfbXV4X2FkZHIoc3RydWN0IGk5MTVf
cGVyZiAqcGVyZiwgdTMyIGFkZHIpCiB7CiAJcmV0dXJuIGdlbjdfaXNfdmFsaWRfbXV4X2FkZHIo
cGVyZiwgYWRkcikgfHwKLQkJYWRkciA9PSBpOTE1X21taW9fcmVnX29mZnNldChXQUlUX0ZPUl9S
QzZfRVhJVCkgfHwKLQkJKGFkZHIgPj0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoUlBNX0NPTkZJRzAp
ICYmCi0JCSBhZGRyIDw9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE5PQV9DT05GSUcoOCkpKTsKKwkg
ICAgICAgUkVHX0VRVUFMKGFkZHIsIFdBSVRfRk9SX1JDNl9FWElUKSB8fAorCSAgICAgICBSRUdf
SU5fUkFOR0UoYWRkciwgUlBNX0NPTkZJRzAsIE5PQV9DT05GSUcoOCkpOwogfQogCiBzdGF0aWMg
Ym9vbCBnZW4xMF9pc192YWxpZF9tdXhfYWRkcihzdHJ1Y3QgaTkxNV9wZXJmICpwZXJmLCB1MzIg
YWRkcikKIHsKIAlyZXR1cm4gZ2VuOF9pc192YWxpZF9tdXhfYWRkcihwZXJmLCBhZGRyKSB8fAot
CQlhZGRyID09IGk5MTVfbW1pb19yZWdfb2Zmc2V0KEdFTjEwX05PQV9XUklURV9ISUdIKSB8fAot
CQkoYWRkciA+PSBpOTE1X21taW9fcmVnX29mZnNldChPQV9QRVJGQ05UM19MTykgJiYKLQkJIGFk
ZHIgPD0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoT0FfUEVSRkNOVDRfSEkpKTsKKwkgICAgICAgUkVH
X0VRVUFMKGFkZHIsIEdFTjEwX05PQV9XUklURV9ISUdIKSB8fAorCSAgICAgICBSRUdfSU5fUkFO
R0UoYWRkciwgT0FfUEVSRkNOVDNfTE8sIE9BX1BFUkZDTlQ0X0hJKTsKIH0KIAogc3RhdGljIGJv
b2wgaHN3X2lzX3ZhbGlkX211eF9hZGRyKHN0cnVjdCBpOTE1X3BlcmYgKnBlcmYsIHUzMiBhZGRy
KQogewogCXJldHVybiBnZW43X2lzX3ZhbGlkX211eF9hZGRyKHBlcmYsIGFkZHIpIHx8Ci0JCShh
ZGRyID49IDB4MjUxMDAgJiYgYWRkciA8PSAweDJGRjkwKSB8fAotCQkoYWRkciA+PSBpOTE1X21t
aW9fcmVnX29mZnNldChIU1dfTUJWSUQyX05PQTApICYmCi0JCSBhZGRyIDw9IGk5MTVfbW1pb19y
ZWdfb2Zmc2V0KEhTV19NQlZJRDJfTk9BOSkpIHx8Ci0JCWFkZHIgPT0gaTkxNV9tbWlvX3JlZ19v
ZmZzZXQoSFNXX01CVklEMl9NSVNSMCk7CisJICAgICAgIEFERFJfSU5fUkFOR0UoYWRkciwgMHgy
NTEwMCwgMHgyRkY5MCkgfHwKKwkgICAgICAgUkVHX0lOX1JBTkdFKGFkZHIsIEhTV19NQlZJRDJf
Tk9BMCwgSFNXX01CVklEMl9OT0E5KSB8fAorCSAgICAgICBSRUdfRVFVQUwoYWRkciwgSFNXX01C
VklEMl9NSVNSMCk7CiB9CiAKIHN0YXRpYyBib29sIGNodl9pc192YWxpZF9tdXhfYWRkcihzdHJ1
Y3QgaTkxNV9wZXJmICpwZXJmLCB1MzIgYWRkcikKIHsKIAlyZXR1cm4gZ2VuN19pc192YWxpZF9t
dXhfYWRkcihwZXJmLCBhZGRyKSB8fAotCQkoYWRkciA+PSAweDE4MjMwMCAmJiBhZGRyIDw9IDB4
MTgyM0E0KTsKKwkgICAgICAgQUREUl9JTl9SQU5HRShhZGRyLCAweDE4MjMwMCwgMHgxODIzQTQp
OwogfQogCiBzdGF0aWMgdTMyIG1hc2tfcmVnX3ZhbHVlKHUzMiByZWcsIHUzMiB2YWwpCkBAIC0z
NTcyLDE0ICszNTc0LDE0IEBAIHN0YXRpYyB1MzIgbWFza19yZWdfdmFsdWUodTMyIHJlZywgdTMy
IHZhbCkKIAkgKiBXYURpc2FibGVTVFVuaXRQb3dlck9wdGltaXphdGlvbiB3b3JrYXJvdW5kLiBN
YWtlIHN1cmUgdGhlIHZhbHVlCiAJICogcHJvZ3JhbW1lZCBieSB1c2Vyc3BhY2UgZG9lc24ndCBj
aGFuZ2UgdGhpcy4KIAkgKi8KLQlpZiAoaTkxNV9tbWlvX3JlZ19vZmZzZXQoSEFMRl9TTElDRV9D
SElDS0VOMikgPT0gcmVnKQorCWlmIChSRUdfRVFVQUwocmVnLCBIQUxGX1NMSUNFX0NISUNLRU4y
KSkKIAkJdmFsID0gdmFsICYgfl9NQVNLRURfQklUX0VOQUJMRShHRU44X1NUX1BPX0RJU0FCTEUp
OwogCiAJLyogV0FJVF9GT1JfUkM2X0VYSVQgaGFzIG9ubHkgb25lIGJpdCBmdWxsZmlsbGluZyB0
aGUgZnVuY3Rpb24KIAkgKiBpbmRpY2F0ZWQgYnkgaXRzIG5hbWUgYW5kIGEgYnVuY2ggb2Ygc2Vs
ZWN0aW9uIGZpZWxkcyB1c2VkIGJ5IE9BCiAJICogY29uZmlncy4KIAkgKi8KLQlpZiAoaTkxNV9t
bWlvX3JlZ19vZmZzZXQoV0FJVF9GT1JfUkM2X0VYSVQpID09IHJlZykKKwlpZiAoUkVHX0VRVUFM
KHJlZywgV0FJVF9GT1JfUkM2X0VYSVQpKQogCQl2YWwgPSB2YWwgJiB+X01BU0tFRF9CSVRfRU5B
QkxFKEhTV19XQUlUX0ZPUl9SQzZfRVhJVF9FTkFCTEUpOwogCiAJcmV0dXJuIHZhbDsKLS0gCjIu
MjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50
ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

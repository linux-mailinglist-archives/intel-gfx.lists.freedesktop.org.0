Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EF0532348A8
	for <lists+intel-gfx@lfdr.de>; Fri, 31 Jul 2020 17:48:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4430D6EB11;
	Fri, 31 Jul 2020 15:48:47 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (unknown [77.68.26.236])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 397816EB09
 for <intel-gfx@lists.freedesktop.org>; Fri, 31 Jul 2020 15:48:38 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 21995298-1500050 
 for <intel-gfx@lists.freedesktop.org>; Fri, 31 Jul 2020 16:48:35 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 31 Jul 2020 16:48:34 +0100
Message-Id: <20200731154834.8378-4-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20200731154834.8378-1-chris@chris-wilson.co.uk>
References: <20200731154834.8378-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 4/4] drm/i915/gt: Distinguish the virtual
 breadcrumbs from the irq breadcrumbs
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gdGhlIHZpcnR1YWwgZW5naW5lcywgd2Ugb25seSB1c2UgdGhlIGludGVsX2JyZWFkY3J1bWJz
IGZvciB0cmFja2luZwpzaWduYWxpbmcgb2Ygc3RhbGUgYnJlYWRjcnVtYnMgZnJvbSB0aGUgaXJx
X3dvcmtlcnMuIFRoZXkgZG8gbm90IGhhdmUKYW55IGFzc29jaWF0ZWQgaW50ZXJydXB0IGhhbmRs
aW5nLCBhY3RpdmUgcmVxdWVzdHMgYXJlIHBhc3NlZCB0byBhCnBoeXNpY2FsIGVuZ2luZSBhbmQg
YXNzb2NpYXRlZCBicmVhZGNydW1iIGludGVycnVwdCBoYW5kbGVyLiBUaGlzIGNhdXNlcwppc3N1
ZXMgZm9yIHVzIGFzIHdlIG5lZWQgdG8gZW5zdXJlIHRoYXQgd2UgZG8gbm90IGFjdHVhbGx5IHRy
eSBhbmQKZW5hYmxlIGludGVycnVwdHMgYW5kIHRoZSBwb3dlcm1hbmFnZW1lbnQgcmVxdWlyZWQg
Zm9yIHRoZW0gb24gdGhlCnZpcnR1YWwgZW5naW5lLCBhcyB0aGV5IHdpbGwgbmV2ZXIgYmUgZGlz
YWJsZWQuIEluc3RlYWQsIGxldCdzCnNwZWNpZnkgdGhlIHBoeXNpY2FsIGVuZ2luZSB1c2VkIGZv
ciBpbnRlcnJ1cHQgaGFuZGxlciBvbiBhIHBhcnRpY3VsYXIKYnJlYWRjcnVtYi4KCnYyOiBEcm9w
IGItPmlycV9hcm1lZCA9IHRydWUgbW9ja2luZyBmb3Igbm8gaW50ZXJydXB0IEhXCgpGaXhlczog
NGZlNmFiYjhmNTEzICgiZHJtL2k5MTUvZ3Q6IElnbm9yZSBpcnEgZW5hYmxpbmcgb24gdGhlIHZp
cnR1YWwgZW5naW5lcyIpClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMt
d2lsc29uLmNvLnVrPgpDYzogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNv
bT4KUmV2aWV3ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuYyAgIHwgNzYg
KysrKysrKysrKy0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRj
cnVtYnMuaCAgIHwgMzYgKysrKysrKysrCiAuLi4vZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFk
Y3J1bWJzX3R5cGVzLmggfCA0NyArKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZS5oICAgICAgICB8IDE3IC0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9lbmdpbmVfY3MuYyAgICAgfCAxNCArKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9lbmdpbmVfcG0uYyAgICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfZW5naW5lX3R5cGVzLmggIHwgMzEgKy0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2d0X2lycS5jICAgICAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2xyYy5jICAgICAgICAgICB8IDExICsrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfcmVzZXQuYyAgICAgICAgIHwgIDEgKwogLi4uL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9y
aW5nX3N1Ym1pc3Npb24uYyAgIHwgIDMgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X3Jwcy5jICAgICAgICAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5n
aW5lLmMgICAgICAgICB8IDEwICsrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYyAg
ICAgICAgICAgICAgIHwgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMg
ICAgICAgICAgIHwgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmggICAg
ICAgICAgIHwgIDQgLQogMTYgZmlsZXMgY2hhbmdlZCwgMTYyIGluc2VydGlvbnMoKyksIDk1IGRl
bGV0aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2JyZWFkY3J1bWJzLmgKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9icmVhZGNydW1ic190eXBlcy5oCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2JyZWFkY3J1bWJzLmMKaW5kZXggZmJkYzQ2NWE1ODcwLi4yZmZkNDdhODY2NTYgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuYwpAQCAtMjgsNiAr
MjgsNyBAQAogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJpOTE1X3RyYWNlLmgi
CisjaW5jbHVkZSAiaW50ZWxfYnJlYWRjcnVtYnMuaCIKICNpbmNsdWRlICJpbnRlbF9ndF9wbS5o
IgogI2luY2x1ZGUgImludGVsX2d0X3JlcXVlc3RzLmgiCiAKQEAgLTU1LDMwICs1NiwyOCBAQCBz
dGF0aWMgdm9pZCBpcnFfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAK
IHN0YXRpYyB2b2lkIF9faW50ZWxfYnJlYWRjcnVtYnNfZGlzYXJtX2lycShzdHJ1Y3QgaW50ZWxf
YnJlYWRjcnVtYnMgKmIpCiB7Ci0Jc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lID0KLQkJ
Y29udGFpbmVyX29mKGIsIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MsIGJyZWFkY3J1bWJzKTsKLQog
CWxvY2tkZXBfYXNzZXJ0X2hlbGQoJmItPmlycV9sb2NrKTsKIAorCWlmICghYi0+aXJxX2VuZ2lu
ZSB8fCAhYi0+aXJxX2FybWVkKQorCQlyZXR1cm47CisKIAlHRU1fQlVHX09OKCFiLT5pcnFfZW5h
YmxlZCk7CiAJaWYgKCEtLWItPmlycV9lbmFibGVkKQotCQlpcnFfZGlzYWJsZShlbmdpbmUpOwor
CQlpcnFfZGlzYWJsZShiLT5pcnFfZW5naW5lKTsKIAogCVdSSVRFX09OQ0UoYi0+aXJxX2FybWVk
LCBmYWxzZSk7Ci0JaW50ZWxfZ3RfcG1fcHV0X2FzeW5jKGVuZ2luZS0+Z3QpOworCWludGVsX2d0
X3BtX3B1dF9hc3luYyhiLT5pcnFfZW5naW5lLT5ndCk7CiB9CiAKLXZvaWQgaW50ZWxfZW5naW5l
X2Rpc2FybV9icmVhZGNydW1icyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCit2b2lk
IGludGVsX2JyZWFkY3J1bWJzX3Bhcmsoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiKQogewot
CXN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYiA9ICZlbmdpbmUtPmJyZWFkY3J1bWJzOwogCXVu
c2lnbmVkIGxvbmcgZmxhZ3M7CiAKIAlpZiAoIVJFQURfT05DRShiLT5pcnFfYXJtZWQpKQogCQly
ZXR1cm47CiAKIAlzcGluX2xvY2tfaXJxc2F2ZSgmYi0+aXJxX2xvY2ssIGZsYWdzKTsKLQlpZiAo
Yi0+aXJxX2FybWVkKQotCQlfX2ludGVsX2JyZWFkY3J1bWJzX2Rpc2FybV9pcnEoYik7CisJX19p
bnRlbF9icmVhZGNydW1ic19kaXNhcm1faXJxKGIpOwogCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUo
JmItPmlycV9sb2NrLCBmbGFncyk7CiB9CiAKQEAgLTEzMywxMyArMTMyLDggQEAgX19kbWFfZmVu
Y2Vfc2lnbmFsX19ub3RpZnkoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsCiAKIHN0YXRpYyB2b2lk
IGFkZF9yZXRpcmUoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiLCBzdHJ1Y3QgaW50ZWxfdGlt
ZWxpbmUgKnRsKQogewotCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9Ci0JCWNvbnRh
aW5lcl9vZihiLCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzLCBicmVhZGNydW1icyk7Ci0KLQlpZiAo
dW5saWtlbHkoaW50ZWxfZW5naW5lX2lzX3ZpcnR1YWwoZW5naW5lKSkpCi0JCWVuZ2luZSA9IGlu
dGVsX3ZpcnR1YWxfZW5naW5lX2dldF9zaWJsaW5nKGVuZ2luZSwgMCk7Ci0KLQlpbnRlbF9lbmdp
bmVfYWRkX3JldGlyZShlbmdpbmUsIHRsKTsKKwlpZiAoYi0+aXJxX2VuZ2luZSkKKwkJaW50ZWxf
ZW5naW5lX2FkZF9yZXRpcmUoYi0+aXJxX2VuZ2luZSwgdGwpOwogfQogCiBzdGF0aWMgYm9vbCBf
X3NpZ25hbF9yZXF1ZXN0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCBzdHJ1Y3QgbGlzdF9oZWFk
ICpzaWduYWxzKQpAQCAtMTY0LDcgKzE1OCw3IEBAIHN0YXRpYyB2b2lkIHNpZ25hbF9pcnFfd29y
ayhzdHJ1Y3QgaXJxX3dvcmsgKndvcmspCiAKIAlzcGluX2xvY2soJmItPmlycV9sb2NrKTsKIAot
CWlmIChiLT5pcnFfYXJtZWQgJiYgbGlzdF9lbXB0eSgmYi0+c2lnbmFsZXJzKSkKKwlpZiAobGlz
dF9lbXB0eSgmYi0+c2lnbmFsZXJzKSkKIAkJX19pbnRlbF9icmVhZGNydW1ic19kaXNhcm1faXJx
KGIpOwogCiAJbGlzdF9zcGxpY2VfaW5pdCgmYi0+c2lnbmFsZWRfcmVxdWVzdHMsICZzaWduYWwp
OwpAQCAtMjIyLDE0ICsyMTYsMTIgQEAgc3RhdGljIHZvaWQgc2lnbmFsX2lycV93b3JrKHN0cnVj
dCBpcnFfd29yayAqd29yaykKIAogc3RhdGljIHZvaWQgX19pbnRlbF9icmVhZGNydW1ic19hcm1f
aXJxKHN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYikKIHsKLQlzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmUgPQotCQljb250YWluZXJfb2YoYiwgc3RydWN0IGludGVsX2VuZ2luZV9jcywg
YnJlYWRjcnVtYnMpOwotCiAJbG9ja2RlcF9hc3NlcnRfaGVsZCgmYi0+aXJxX2xvY2spOwotCWlm
IChiLT5pcnFfYXJtZWQpCisKKwlpZiAoIWItPmlycV9lbmdpbmUgfHwgYi0+aXJxX2FybWVkKQog
CQlyZXR1cm47CiAKLQlpZiAoIWludGVsX2d0X3BtX2dldF9pZl9hd2FrZShlbmdpbmUtPmd0KSkK
KwlpZiAoIWludGVsX2d0X3BtX2dldF9pZl9hd2FrZShiLT5pcnFfZW5naW5lLT5ndCkpCiAJCXJl
dHVybjsKIAogCS8qCkBAIC0yNDksMzcgKzI0MSw0OSBAQCBzdGF0aWMgdm9pZCBfX2ludGVsX2Jy
ZWFkY3J1bWJzX2FybV9pcnEoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiKQogCSAqLwogCiAJ
aWYgKCFiLT5pcnFfZW5hYmxlZCsrKQotCQlpcnFfZW5hYmxlKGVuZ2luZSk7CisJCWlycV9lbmFi
bGUoYi0+aXJxX2VuZ2luZSk7CiB9CiAKLXZvaWQgaW50ZWxfZW5naW5lX2luaXRfYnJlYWRjcnVt
YnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQorc3RydWN0IGludGVsX2JyZWFkY3J1
bWJzICoKK2ludGVsX2JyZWFkY3J1bWJzX2NyZWF0ZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpp
cnFfZW5naW5lKQogewotCXN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYiA9ICZlbmdpbmUtPmJy
ZWFkY3J1bWJzOworCXN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYjsKKworCWIgPSBremFsbG9j
KHNpemVvZigqYiksIEdGUF9LRVJORUwpOworCWlmICghYikKKwkJcmV0dXJuIE5VTEw7CiAKIAlz
cGluX2xvY2tfaW5pdCgmYi0+aXJxX2xvY2spOwogCUlOSVRfTElTVF9IRUFEKCZiLT5zaWduYWxl
cnMpOwogCUlOSVRfTElTVF9IRUFEKCZiLT5zaWduYWxlZF9yZXF1ZXN0cyk7CiAKIAlpbml0X2ly
cV93b3JrKCZiLT5pcnFfd29yaywgc2lnbmFsX2lycV93b3JrKTsKKworCWItPmlycV9lbmdpbmUg
PSBpcnFfZW5naW5lOworCisJcmV0dXJuIGI7CiB9CiAKLXZvaWQgaW50ZWxfZW5naW5lX3Jlc2V0
X2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKK3ZvaWQgaW50ZWxf
YnJlYWRjcnVtYnNfcmVzZXQoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiKQogewotCXN0cnVj
dCBpbnRlbF9icmVhZGNydW1icyAqYiA9ICZlbmdpbmUtPmJyZWFkY3J1bWJzOwogCXVuc2lnbmVk
IGxvbmcgZmxhZ3M7CiAKKwlpZiAoIWItPmlycV9lbmdpbmUpCisJCXJldHVybjsKKwogCXNwaW5f
bG9ja19pcnFzYXZlKCZiLT5pcnFfbG9jaywgZmxhZ3MpOwogCiAJaWYgKGItPmlycV9lbmFibGVk
KQotCQlpcnFfZW5hYmxlKGVuZ2luZSk7CisJCWlycV9lbmFibGUoYi0+aXJxX2VuZ2luZSk7CiAJ
ZWxzZQotCQlpcnFfZGlzYWJsZShlbmdpbmUpOworCQlpcnFfZGlzYWJsZShiLT5pcnFfZW5naW5l
KTsKIAogCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmItPmlycV9sb2NrLCBmbGFncyk7CiB9CiAK
LXZvaWQgaW50ZWxfZW5naW5lX2ZpbmlfYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2luZV9j
cyAqZW5naW5lKQordm9pZCBpbnRlbF9icmVhZGNydW1ic19mcmVlKHN0cnVjdCBpbnRlbF9icmVh
ZGNydW1icyAqYikKIHsKKwlrZnJlZShiKTsKIH0KIAogc3RhdGljIHZvaWQgaW5zZXJ0X2JyZWFk
Y3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCkBAIC0zNjksMTEgKzM3MywxMSBAQCBib29s
IGk5MTVfcmVxdWVzdF9lbmFibGVfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkK
IAkgKiByZXF1ZXN0IHN1Ym1pdC91bnN1Ym1pdCBwYXRoLCBhbmQgc28gd2UgbXVzdCBiZSBtb3Jl
IGNhcmVmdWwgdG8KIAkgKiBhY3F1aXJlIHRoZSByaWdodCBsb2NrLgogCSAqLwotCWIgPSAmUkVB
RF9PTkNFKHJxLT5lbmdpbmUpLT5icmVhZGNydW1iczsKKwliID0gUkVBRF9PTkNFKHJxLT5lbmdp
bmUpLT5icmVhZGNydW1iczsKIAlzcGluX2xvY2soJmItPmlycV9sb2NrKTsKLQl3aGlsZSAodW5s
aWtlbHkoYiAhPSAmUkVBRF9PTkNFKHJxLT5lbmdpbmUpLT5icmVhZGNydW1icykpIHsKKwl3aGls
ZSAodW5saWtlbHkoYiAhPSBSRUFEX09OQ0UocnEtPmVuZ2luZSktPmJyZWFkY3J1bWJzKSkgewog
CQlzcGluX3VubG9jaygmYi0+aXJxX2xvY2spOwotCQliID0gJlJFQURfT05DRShycS0+ZW5naW5l
KS0+YnJlYWRjcnVtYnM7CisJCWIgPSBSRUFEX09OQ0UocnEtPmVuZ2luZSktPmJyZWFkY3J1bWJz
OwogCQlzcGluX2xvY2soJmItPmlycV9sb2NrKTsKIAl9CiAKQEAgLTM5NCw3ICszOTgsNyBAQCBi
b29sIGk5MTVfcmVxdWVzdF9lbmFibGVfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpy
cSkKIAogdm9pZCBpOTE1X3JlcXVlc3RfY2FuY2VsX2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVx
dWVzdCAqcnEpCiB7Ci0Jc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiID0gJnJxLT5lbmdpbmUt
PmJyZWFkY3J1bWJzOworCXN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYiA9IHJxLT5lbmdpbmUt
PmJyZWFkY3J1bWJzOwogCiAJLyoKIAkgKiBXZSBtdXN0IHdhaXQgZm9yIGItPmlycV9sb2NrIHNv
IHRoYXQgd2Uga25vdyB0aGUgaW50ZXJydXB0IGhhbmRsZXIKQEAgLTQxOCwxMSArNDIyLDExIEBA
IHZvaWQgaTkxNV9yZXF1ZXN0X2NhbmNlbF9icmVhZGNydW1iKHN0cnVjdCBpOTE1X3JlcXVlc3Qg
KnJxKQogdm9pZCBpbnRlbF9lbmdpbmVfcHJpbnRfYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lLAogCQkJCSAgICBzdHJ1Y3QgZHJtX3ByaW50ZXIgKnApCiB7Ci0Jc3Ry
dWN0IGludGVsX2JyZWFkY3J1bWJzICpiID0gJmVuZ2luZS0+YnJlYWRjcnVtYnM7CisJc3RydWN0
IGludGVsX2JyZWFkY3J1bWJzICpiID0gZW5naW5lLT5icmVhZGNydW1iczsKIAlzdHJ1Y3QgaW50
ZWxfY29udGV4dCAqY2U7CiAJc3RydWN0IGk5MTVfcmVxdWVzdCAqcnE7CiAKLQlpZiAobGlzdF9l
bXB0eSgmYi0+c2lnbmFsZXJzKSkKKwlpZiAoIWIgfHwgbGlzdF9lbXB0eSgmYi0+c2lnbmFsZXJz
KSkKIAkJcmV0dXJuOwogCiAJZHJtX3ByaW50ZihwLCAiU2lnbmFsczpcbiIpOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuaCBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMDAwMDAwLi5lZDNkMWRlYWJmYmQKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5oCkBAIC0wLDAgKzEsMzYgQEAK
Ky8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQgKi8KKy8qCisgKiBDb3B5cmlnaHQgwqkg
MjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpZm5kZWYgX19JTlRFTF9CUkVBRENSVU1C
U19fCisjZGVmaW5lIF9fSU5URUxfQlJFQURDUlVNQlNfXworCisjaW5jbHVkZSA8bGludXgvaXJx
X3dvcmsuaD4KKworI2luY2x1ZGUgImludGVsX2VuZ2luZV90eXBlcy5oIgorCitzdHJ1Y3QgZHJt
X3ByaW50ZXI7CitzdHJ1Y3QgaTkxNV9yZXF1ZXN0Oworc3RydWN0IGludGVsX2JyZWFkY3J1bWJz
OworCitzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKgoraW50ZWxfYnJlYWRjcnVtYnNfY3JlYXRl
KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmlycV9lbmdpbmUpOwordm9pZCBpbnRlbF9icmVhZGNy
dW1ic19mcmVlKHN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYik7CisKK3ZvaWQgaW50ZWxfYnJl
YWRjcnVtYnNfcmVzZXQoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiKTsKK3ZvaWQgaW50ZWxf
YnJlYWRjcnVtYnNfcGFyayhzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKmIpOworCitzdGF0aWMg
aW5saW5lIHZvaWQKK2ludGVsX2VuZ2luZV9zaWduYWxfYnJlYWRjcnVtYnMoc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqZW5naW5lKQoreworCWlycV93b3JrX3F1ZXVlKCZlbmdpbmUtPmJyZWFkY3J1
bWJzLT5pcnFfd29yayk7Cit9CisKK3ZvaWQgaW50ZWxfZW5naW5lX3ByaW50X2JyZWFkY3J1bWJz
KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKKwkJCQkgICAgc3RydWN0IGRybV9wcmlu
dGVyICpwKTsKKworYm9vbCBpOTE1X3JlcXVlc3RfZW5hYmxlX2JyZWFkY3J1bWIoc3RydWN0IGk5
MTVfcmVxdWVzdCAqcmVxdWVzdCk7Cit2b2lkIGk5MTVfcmVxdWVzdF9jYW5jZWxfYnJlYWRjcnVt
YihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KTsKKworI2VuZGlmIC8qIF9fSU5URUxfQlJF
QURDUlVNQlNfXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
YnJlYWRjcnVtYnNfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFk
Y3J1bWJzX3R5cGVzLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi44
ZTUzYjk5NDI2OTUKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9icmVhZGNydW1ic190eXBlcy5oCkBAIC0wLDAgKzEsNDcgQEAKKy8qIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBNSVQgKi8KKy8qCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jw
b3JhdGlvbgorICovCisKKyNpZm5kZWYgX19JTlRFTF9CUkVBRENSVU1CU19UWVBFU19fCisjZGVm
aW5lIF9fSU5URUxfQlJFQURDUlVNQlNfVFlQRVNfXworCisjaW5jbHVkZSA8bGludXgvaXJxX3dv
cmsuaD4KKyNpbmNsdWRlIDxsaW51eC9saXN0Lmg+CisjaW5jbHVkZSA8bGludXgvc3BpbmxvY2su
aD4KKyNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgorCisvKgorICogUmF0aGVyIHRoYW4gaGF2ZSBl
dmVyeSBjbGllbnQgd2FpdCB1cG9uIGFsbCB1c2VyIGludGVycnVwdHMsCisgKiB3aXRoIHRoZSBo
ZXJkIHdha2luZyBhZnRlciBldmVyeSBpbnRlcnJ1cHQgYW5kIGVhY2ggZG9pbmcgdGhlCisgKiBo
ZWF2eXdlaWdodCBzZXFubyBkYW5jZSwgd2UgZGVsZWdhdGUgdGhlIHRhc2sgKG9mIGJlaW5nIHRo
ZQorICogYm90dG9tLWhhbGYgb2YgdGhlIHVzZXIgaW50ZXJydXB0KSB0byB0aGUgZmlyc3QgY2xp
ZW50LiBBZnRlcgorICogZXZlcnkgaW50ZXJydXB0LCB3ZSB3YWtlIHVwIG9uZSBjbGllbnQsIHdo
byBkb2VzIHRoZSBoZWF2eXdlaWdodAorICogY29oZXJlbnQgc2Vxbm8gcmVhZCBhbmQgZWl0aGVy
IGdvZXMgYmFjayB0byBzbGVlcCAoaWYgaW5jb21wbGV0ZSksCisgKiBvciB3YWtlcyB1cCBhbGwg
dGhlIGNvbXBsZXRlZCBjbGllbnRzIGluIHBhcmFsbGVsLCBiZWZvcmUgdGhlbgorICogdHJhbnNm
ZXJyaW5nIHRoZSBib3R0b20taGFsZiBzdGF0dXMgdG8gdGhlIG5leHQgY2xpZW50IGluIHRoZSBx
dWV1ZS4KKyAqCisgKiBDb21wYXJlZCB0byB3YWxraW5nIHRoZSBlbnRpcmUgbGlzdCBvZiB3YWl0
ZXJzIGluIGEgc2luZ2xlIGRlZGljYXRlZAorICogYm90dG9tLWhhbGYsIHdlIHJlZHVjZSB0aGUg
bGF0ZW5jeSBvZiB0aGUgZmlyc3Qgd2FpdGVyIGJ5IGF2b2lkaW5nCisgKiBhIGNvbnRleHQgc3dp
dGNoLCBidXQgaW5jdXIgYWRkaXRpb25hbCBjb2hlcmVudCBzZXFubyByZWFkcyB3aGVuCisgKiBm
b2xsb3dpbmcgdGhlIGNoYWluIG9mIHJlcXVlc3QgYnJlYWRjcnVtYnMuIFNpbmNlIGl0IGlzIG1v
c3QgbGlrZWx5CisgKiB0aGF0IHdlIGhhdmUgYSBzaW5nbGUgY2xpZW50IHdhaXRpbmcgb24gZWFj
aCBzZXFubywgdGhlbiByZWR1Y2luZworICogdGhlIG92ZXJoZWFkIG9mIHdha2luZyB0aGF0IGNs
aWVudCBpcyBtdWNoIHByZWZlcnJlZC4KKyAqLworc3RydWN0IGludGVsX2JyZWFkY3J1bWJzIHsK
KwlzcGlubG9ja190IGlycV9sb2NrOyAvKiBwcm90ZWN0cyB0aGUgbGlzdHMgdXNlZCBpbiBoYXJk
aXJxIGNvbnRleHQgKi8KKworCS8qIE5vdCBhbGwgYnJlYWRjcnVtYnMgYXJlIGF0dGFjaGVkIHRv
IHBoeXNpY2FsIEhXICovCisJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqaXJxX2VuZ2luZTsKKwor
CXN0cnVjdCBsaXN0X2hlYWQgc2lnbmFsZXJzOworCXN0cnVjdCBsaXN0X2hlYWQgc2lnbmFsZWRf
cmVxdWVzdHM7CisKKwlzdHJ1Y3QgaXJxX3dvcmsgaXJxX3dvcms7IC8qIGZvciB1c2UgZnJvbSBp
bnNpZGUgaXJxX2xvY2sgKi8KKworCXVuc2lnbmVkIGludCBpcnFfZW5hYmxlZDsKKworCWJvb2wg
aXJxX2FybWVkOworfTsKKworI2VuZGlmIC8qIF9fSU5URUxfQlJFQURDUlVNQlNfVFlQRVNfXyAq
LwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmggYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaAppbmRleCBmYWYwMGEzNTNlMjUu
LjA4ZTJjMDAwZGNjMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
ZW5naW5lLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKQEAg
LTIyMywyMyArMjIzLDYgQEAgdm9pZCBpbnRlbF9lbmdpbmVfZ2V0X2luc3Rkb25lKGNvbnN0IHN0
cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAogdm9pZCBpbnRlbF9lbmdpbmVfaW5pdF9l
eGVjbGlzdHMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKIAotdm9pZCBpbnRlbF9l
bmdpbmVfaW5pdF9icmVhZGNydW1icyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwot
dm9pZCBpbnRlbF9lbmdpbmVfZmluaV9icmVhZGNydW1icyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICplbmdpbmUpOwotCi12b2lkIGludGVsX2VuZ2luZV9kaXNhcm1fYnJlYWRjcnVtYnMoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKLQotc3RhdGljIGlubGluZSB2b2lkCi1pbnRlbF9l
bmdpbmVfc2lnbmFsX2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkK
LXsKLQlpcnFfd29ya19xdWV1ZSgmZW5naW5lLT5icmVhZGNydW1icy5pcnFfd29yayk7Ci19Ci0K
LXZvaWQgaW50ZWxfZW5naW5lX3Jlc2V0X2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSk7Ci12b2lkIGludGVsX2VuZ2luZV9maW5pX2JyZWFkY3J1bWJzKHN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7Ci0KLXZvaWQgaW50ZWxfZW5naW5lX3ByaW50X2JyZWFk
Y3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKLQkJCQkgICAgc3RydWN0IGRy
bV9wcmludGVyICpwKTsKLQogc3RhdGljIGlubGluZSB1MzIgKl9fZ2VuOF9lbWl0X3BpcGVfY29u
dHJvbCh1MzIgKmJhdGNoLCB1MzIgZmxhZ3MwLCB1MzIgZmxhZ3MxLCB1MzIgb2Zmc2V0KQogewog
CW1lbXNldChiYXRjaCwgMCwgNiAqIHNpemVvZih1MzIpKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZW5naW5lX2NzLmMKaW5kZXggODY2NTFiYmVmM2EwLi5lYTRiYTJhZmU5ZjkgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCkBAIC0yOCw2ICsyOCw3
IEBACiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogCisjaW5jbHVkZSAiaW50ZWxfYnJlYWRjcnVt
YnMuaCIKICNpbmNsdWRlICJpbnRlbF9jb250ZXh0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZW5naW5l
LmgiCiAjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3BtLmgiCkBAIC03MDAsOCArNzAxLDEzIEBAIHN0
YXRpYyBpbnQgZW5naW5lX3NldHVwX2NvbW1vbihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdp
bmUpCiAJaWYgKGVycikKIAkJcmV0dXJuIGVycjsKIAorCWVuZ2luZS0+YnJlYWRjcnVtYnMgPSBp
bnRlbF9icmVhZGNydW1ic19jcmVhdGUoZW5naW5lKTsKKwlpZiAoIWVuZ2luZS0+YnJlYWRjcnVt
YnMpIHsKKwkJZXJyID0gLUVOT01FTTsKKwkJZ290byBlcnJfc3RhdHVzOworCX0KKwogCWludGVs
X2VuZ2luZV9pbml0X2FjdGl2ZShlbmdpbmUsIEVOR0lORV9QSFlTSUNBTCk7Ci0JaW50ZWxfZW5n
aW5lX2luaXRfYnJlYWRjcnVtYnMoZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9leGVjbGlz
dHMoZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9jbWRfcGFyc2VyKGVuZ2luZSk7CiAJaW50
ZWxfZW5naW5lX2luaXRfX3BtKGVuZ2luZSk7CkBAIC03MTYsNiArNzIyLDEwIEBAIHN0YXRpYyBp
bnQgZW5naW5lX3NldHVwX2NvbW1vbihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJ
aW50ZWxfZW5naW5lX2luaXRfY3R4X3dhKGVuZ2luZSk7CiAKIAlyZXR1cm4gMDsKKworZXJyX3N0
YXR1czoKKwljbGVhbnVwX3N0YXR1c19wYWdlKGVuZ2luZSk7CisJcmV0dXJuIGVycjsKIH0KIAog
c3RydWN0IG1lYXN1cmVfYnJlYWRjcnVtYiB7CkBAIC05MTQsOSArOTI0LDkgQEAgdm9pZCBpbnRl
bF9lbmdpbmVfY2xlYW51cF9jb21tb24oc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQog
CXRhc2tsZXRfa2lsbCgmZW5naW5lLT5leGVjbGlzdHMudGFza2xldCk7IC8qIGZsdXNoIHRoZSBj
YWxsYmFjayAqLwogCiAJY2xlYW51cF9zdGF0dXNfcGFnZShlbmdpbmUpOworCWludGVsX2JyZWFk
Y3J1bWJzX2ZyZWUoZW5naW5lLT5icmVhZGNydW1icyk7CiAKIAlpbnRlbF9lbmdpbmVfZmluaV9y
ZXRpcmUoZW5naW5lKTsKLQlpbnRlbF9lbmdpbmVfZmluaV9icmVhZGNydW1icyhlbmdpbmUpOwog
CWludGVsX2VuZ2luZV9jbGVhbnVwX2NtZF9wYXJzZXIoZW5naW5lKTsKIAogCWlmIChlbmdpbmUt
PmRlZmF1bHRfc3RhdGUpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9lbmdpbmVfcG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5j
CmluZGV4IDhlYzNlZWNmM2UzOS4uZjdiMmUwN2UyMjI5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9lbmdpbmVfcG0uYwpAQCAtNiw2ICs2LDcgQEAKIAogI2luY2x1ZGUgImk5MTVf
ZHJ2LmgiCiAKKyNpbmNsdWRlICJpbnRlbF9icmVhZGNydW1icy5oIgogI2luY2x1ZGUgImludGVs
X2NvbnRleHQuaCIKICNpbmNsdWRlICJpbnRlbF9lbmdpbmUuaCIKICNpbmNsdWRlICJpbnRlbF9l
bmdpbmVfaGVhcnRiZWF0LmgiCkBAIC0yNDcsNyArMjQ4LDcgQEAgc3RhdGljIGludCBfX2VuZ2lu
ZV9wYXJrKHN0cnVjdCBpbnRlbF93YWtlcmVmICp3ZikKIAljYWxsX2lkbGVfYmFycmllcnMoZW5n
aW5lKTsgLyogY2xlYW51cCBhZnRlciB3ZWRnaW5nICovCiAKIAlpbnRlbF9lbmdpbmVfcGFya19o
ZWFydGJlYXQoZW5naW5lKTsKLQlpbnRlbF9lbmdpbmVfZGlzYXJtX2JyZWFkY3J1bWJzKGVuZ2lu
ZSk7CisJaW50ZWxfYnJlYWRjcnVtYnNfcGFyayhlbmdpbmUtPmJyZWFkY3J1bWJzKTsKIAogCS8q
IE11c3QgYmUgcmVzZXQgdXBvbiBpZGxpbmcsIG9yIHdlIG1heSBtaXNzIHRoZSBidXN5IHdha2V1
cC4gKi8KIAlHRU1fQlVHX09OKGVuZ2luZS0+ZXhlY2xpc3RzLnF1ZXVlX3ByaW9yaXR5X2hpbnQg
IT0gSU5UX01JTik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBl
cy5oCmluZGV4IDhkZTkyZmQ3ZDM5Mi4uYzQwMGFhYTIyODdiIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaApAQCAtMjIsNiArMjIsNyBAQAogI2luY2x1
ZGUgImk5MTVfcG11LmgiCiAjaW5jbHVkZSAiaTkxNV9wcmlvbGlzdF90eXBlcy5oIgogI2luY2x1
ZGUgImk5MTVfc2VsZnRlc3QuaCIKKyNpbmNsdWRlICJpbnRlbF9icmVhZGNydW1ic190eXBlcy5o
IgogI2luY2x1ZGUgImludGVsX3NzZXUuaCIKICNpbmNsdWRlICJpbnRlbF90aW1lbGluZV90eXBl
cy5oIgogI2luY2x1ZGUgImludGVsX3VuY29yZS5oIgpAQCAtMzczLDM0ICszNzQsOCBAQCBzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzIHsKIAkgKi8KIAlzdHJ1Y3QgZXdtYV9fZW5naW5lX2xhdGVuY3kg
bGF0ZW5jeTsKIAotCS8qIFJhdGhlciB0aGFuIGhhdmUgZXZlcnkgY2xpZW50IHdhaXQgdXBvbiBh
bGwgdXNlciBpbnRlcnJ1cHRzLAotCSAqIHdpdGggdGhlIGhlcmQgd2FraW5nIGFmdGVyIGV2ZXJ5
IGludGVycnVwdCBhbmQgZWFjaCBkb2luZyB0aGUKLQkgKiBoZWF2eXdlaWdodCBzZXFubyBkYW5j
ZSwgd2UgZGVsZWdhdGUgdGhlIHRhc2sgKG9mIGJlaW5nIHRoZQotCSAqIGJvdHRvbS1oYWxmIG9m
IHRoZSB1c2VyIGludGVycnVwdCkgdG8gdGhlIGZpcnN0IGNsaWVudC4gQWZ0ZXIKLQkgKiBldmVy
eSBpbnRlcnJ1cHQsIHdlIHdha2UgdXAgb25lIGNsaWVudCwgd2hvIGRvZXMgdGhlIGhlYXZ5d2Vp
Z2h0Ci0JICogY29oZXJlbnQgc2Vxbm8gcmVhZCBhbmQgZWl0aGVyIGdvZXMgYmFjayB0byBzbGVl
cCAoaWYgaW5jb21wbGV0ZSksCi0JICogb3Igd2FrZXMgdXAgYWxsIHRoZSBjb21wbGV0ZWQgY2xp
ZW50cyBpbiBwYXJhbGxlbCwgYmVmb3JlIHRoZW4KLQkgKiB0cmFuc2ZlcnJpbmcgdGhlIGJvdHRv
bS1oYWxmIHN0YXR1cyB0byB0aGUgbmV4dCBjbGllbnQgaW4gdGhlIHF1ZXVlLgotCSAqCi0JICog
Q29tcGFyZWQgdG8gd2Fsa2luZyB0aGUgZW50aXJlIGxpc3Qgb2Ygd2FpdGVycyBpbiBhIHNpbmds
ZSBkZWRpY2F0ZWQKLQkgKiBib3R0b20taGFsZiwgd2UgcmVkdWNlIHRoZSBsYXRlbmN5IG9mIHRo
ZSBmaXJzdCB3YWl0ZXIgYnkgYXZvaWRpbmcKLQkgKiBhIGNvbnRleHQgc3dpdGNoLCBidXQgaW5j
dXIgYWRkaXRpb25hbCBjb2hlcmVudCBzZXFubyByZWFkcyB3aGVuCi0JICogZm9sbG93aW5nIHRo
ZSBjaGFpbiBvZiByZXF1ZXN0IGJyZWFkY3J1bWJzLiBTaW5jZSBpdCBpcyBtb3N0IGxpa2VseQot
CSAqIHRoYXQgd2UgaGF2ZSBhIHNpbmdsZSBjbGllbnQgd2FpdGluZyBvbiBlYWNoIHNlcW5vLCB0
aGVuIHJlZHVjaW5nCi0JICogdGhlIG92ZXJoZWFkIG9mIHdha2luZyB0aGF0IGNsaWVudCBpcyBt
dWNoIHByZWZlcnJlZC4KLQkgKi8KLQlzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgewotCQlzcGlu
bG9ja190IGlycV9sb2NrOwotCQlzdHJ1Y3QgbGlzdF9oZWFkIHNpZ25hbGVyczsKLQotCQlzdHJ1
Y3QgbGlzdF9oZWFkIHNpZ25hbGVkX3JlcXVlc3RzOwotCi0JCXN0cnVjdCBpcnFfd29yayBpcnFf
d29yazsgLyogZm9yIHVzZSBmcm9tIGluc2lkZSBpcnFfbG9jayAqLwotCi0JCXVuc2lnbmVkIGlu
dCBpcnFfZW5hYmxlZDsKLQotCQlib29sIGlycV9hcm1lZDsKLQl9IGJyZWFkY3J1bWJzOworCS8q
IEtlZXAgdHJhY2sgb2YgYWxsIHRoZSBzZXFubyB1c2VkLCBhIHRyYWlsIG9mIGJyZWFkY3J1bWJz
ICovCisJc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpicmVhZGNydW1iczsKIAogCXN0cnVjdCBp
bnRlbF9lbmdpbmVfcG11IHsKIAkJLyoqCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9ndF9pcnEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2ly
cS5jCmluZGV4IGIwNWRhNjhlNTJmNC4uMjU3MDYzYTU3MTAxIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9pcnEuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9ndF9pcnEuYwpAQCAtOCw2ICs4LDcgQEAKIAogI2luY2x1ZGUgImk5MTVfZHJ2
LmgiCiAjaW5jbHVkZSAiaTkxNV9pcnEuaCIKKyNpbmNsdWRlICJpbnRlbF9icmVhZGNydW1icy5o
IgogI2luY2x1ZGUgImludGVsX2d0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3RfaXJxLmgiCiAjaW5j
bHVkZSAiaW50ZWxfdW5jb3JlLmgiCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCmluZGV4
IGYxMjY3ZmE5NTIzNC4uNDE3ZjZiMGM2YzYxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9scmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9s
cmMuYwpAQCAtMTM3LDYgKzEzNyw3IEBACiAjaW5jbHVkZSAiaTkxNV9wZXJmLmgiCiAjaW5jbHVk
ZSAiaTkxNV90cmFjZS5oIgogI2luY2x1ZGUgImk5MTVfdmdwdS5oIgorI2luY2x1ZGUgImludGVs
X2JyZWFkY3J1bWJzLmgiCiAjaW5jbHVkZSAiaW50ZWxfY29udGV4dC5oIgogI2luY2x1ZGUgImlu
dGVsX2VuZ2luZV9wbS5oIgogI2luY2x1ZGUgImludGVsX2d0LmgiCkBAIC00MTE5LDcgKzQxMjAs
NyBAQCBzdGF0aWMgaW50IGV4ZWNsaXN0c19yZXN1bWUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lKQogewogCWludGVsX21vY3NfaW5pdF9lbmdpbmUoZW5naW5lKTsKIAotCWludGVsX2Vu
Z2luZV9yZXNldF9icmVhZGNydW1icyhlbmdpbmUpOworCWludGVsX2JyZWFkY3J1bWJzX3Jlc2V0
KGVuZ2luZS0+YnJlYWRjcnVtYnMpOwogCiAJaWYgKEdFTV9TSE9XX0RFQlVHKCkgJiYgdW5leHBl
Y3RlZF9zdGFydGluZ19zdGF0ZShlbmdpbmUpKSB7CiAJCXN0cnVjdCBkcm1fcHJpbnRlciBwID0g
ZHJtX2RlYnVnX3ByaW50ZXIoX19mdW5jX18pOwpAQCAtNTcyMSw5ICs1NzIyLDcgQEAgaW50ZWxf
ZXhlY2xpc3RzX2NyZWF0ZV92aXJ0dWFsKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKipzaWJsaW5n
cywKIAlzbnByaW50Zih2ZS0+YmFzZS5uYW1lLCBzaXplb2YodmUtPmJhc2UubmFtZSksICJ2aXJ0
dWFsIik7CiAKIAlpbnRlbF9lbmdpbmVfaW5pdF9hY3RpdmUoJnZlLT5iYXNlLCBFTkdJTkVfVklS
VFVBTCk7Ci0JaW50ZWxfZW5naW5lX2luaXRfYnJlYWRjcnVtYnMoJnZlLT5iYXNlKTsKIAlpbnRl
bF9lbmdpbmVfaW5pdF9leGVjbGlzdHMoJnZlLT5iYXNlKTsKLQl2ZS0+YmFzZS5icmVhZGNydW1i
cy5pcnFfYXJtZWQgPSB0cnVlOyAvKiBmYWtlIEhXLCB1c2VkIGZvciBpcnFfd29yayAqLwogCiAJ
dmUtPmJhc2UuY29wcyA9ICZ2aXJ0dWFsX2NvbnRleHRfb3BzOwogCXZlLT5iYXNlLnJlcXVlc3Rf
YWxsb2MgPSBleGVjbGlzdHNfcmVxdWVzdF9hbGxvYzsKQEAgLTU3NDAsNiArNTczOSwxMiBAQCBp
bnRlbF9leGVjbGlzdHNfY3JlYXRlX3ZpcnR1YWwoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqKnNp
YmxpbmdzLAogCiAJaW50ZWxfY29udGV4dF9pbml0KCZ2ZS0+Y29udGV4dCwgJnZlLT5iYXNlKTsK
IAorCXZlLT5iYXNlLmJyZWFkY3J1bWJzID0gaW50ZWxfYnJlYWRjcnVtYnNfY3JlYXRlKE5VTEwp
OworCWlmICghdmUtPmJhc2UuYnJlYWRjcnVtYnMpIHsKKwkJZXJyID0gLUVOT01FTTsKKwkJZ290
byBlcnJfcHV0OworCX0KKwogCWZvciAobiA9IDA7IG4gPCBjb3VudDsgbisrKSB7CiAJCXN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MgKnNpYmxpbmcgPSBzaWJsaW5nc1tuXTsKIApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX3Jlc2V0LmMKaW5kZXggNDZhNWNlZmZjMjJmLi5hYzM2YjY3ZmI0NmIgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYwpAQCAtMTUsNiArMTUsNyBAQAogI2lu
Y2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9ncHVfZXJyb3IuaCIKICNpbmNsdWRl
ICJpOTE1X2lycS5oIgorI2luY2x1ZGUgImludGVsX2JyZWFkY3J1bWJzLmgiCiAjaW5jbHVkZSAi
aW50ZWxfZW5naW5lX3BtLmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJpbnRl
bF9ndF9wbS5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmlu
Z19zdWJtaXNzaW9uLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1Ym1p
c3Npb24uYwppbmRleCA4N2NlZjZkMDExNDEuLjg0ZGEyMGY2NTE1YyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ19zdWJtaXNzaW9uLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ19zdWJtaXNzaW9uLmMKQEAgLTMyLDYgKzMyLDcg
QEAKICNpbmNsdWRlICJnZW42X3BwZ3R0LmgiCiAjaW5jbHVkZSAiZ2VuN19yZW5kZXJjbGVhci5o
IgogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCisjaW5jbHVkZSAiaW50ZWxfYnJlYWRjcnVtYnMuaCIK
ICNpbmNsdWRlICJpbnRlbF9jb250ZXh0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3QuaCIKICNpbmNs
dWRlICJpbnRlbF9yZXNldC5oIgpAQCAtMjU1LDcgKzI1Niw3IEBAIHN0YXRpYyBpbnQgeGNzX3Jl
c3VtZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJZWxzZQogCQlyaW5nX3NldHVw
X3N0YXR1c19wYWdlKGVuZ2luZSk7CiAKLQlpbnRlbF9lbmdpbmVfcmVzZXRfYnJlYWRjcnVtYnMo
ZW5naW5lKTsKKwlpbnRlbF9icmVhZGNydW1ic19yZXNldChlbmdpbmUtPmJyZWFkY3J1bWJzKTsK
IAogCS8qIEVuZm9yY2Ugb3JkZXJpbmcgYnkgcmVhZGluZyBIRUFEIHJlZ2lzdGVyIGJhY2sgKi8K
IAlFTkdJTkVfUE9TVElOR19SRUFEKGVuZ2luZSwgUklOR19IRUFEKTsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jwcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfcnBzLmMKaW5kZXggOTdiYTE0YWQ1MmU0Li5lNmEwMGVlYTA2MzEgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jwcy5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX3Jwcy5jCkBAIC03LDYgKzcsNyBAQAogI2luY2x1ZGUgPGRybS9p
OTE1X2RybS5oPgogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKKyNpbmNsdWRlICJpbnRlbF9icmVh
ZGNydW1icy5oIgogI2luY2x1ZGUgImludGVsX2d0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3RfY2xv
Y2tfdXRpbHMuaCIKICNpbmNsdWRlICJpbnRlbF9ndF9pcnEuaCIKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9tb2NrX2VuZ2luZS5jCmluZGV4IDAyN2RlNTNjZDA1Yi4uNzk3NjQzMDViOGVjIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9tb2NrX2VuZ2luZS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMKQEAgLTI2MCwxMSArMjYwLDEyIEBAIHN0YXRp
YyB2b2lkIG1vY2tfZW5naW5lX3JlbGVhc2Uoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5l
KQogCiAJR0VNX0JVR19PTih0aW1lcl9wZW5kaW5nKCZtb2NrLT5od19kZWxheSkpOwogCisJaW50
ZWxfYnJlYWRjcnVtYnNfZnJlZShlbmdpbmUtPmJyZWFkY3J1bWJzKTsKKwogCWludGVsX2NvbnRl
eHRfdW5waW4oZW5naW5lLT5rZXJuZWxfY29udGV4dCk7CiAJaW50ZWxfY29udGV4dF9wdXQoZW5n
aW5lLT5rZXJuZWxfY29udGV4dCk7CiAKIAlpbnRlbF9lbmdpbmVfZmluaV9yZXRpcmUoZW5naW5l
KTsKLQlpbnRlbF9lbmdpbmVfZmluaV9icmVhZGNydW1icyhlbmdpbmUpOwogfQogCiBzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICptb2NrX2VuZ2luZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSwKQEAgLTMyMiwxMSArMzIzLDE0IEBAIGludCBtb2NrX2VuZ2luZV9pbml0KHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSkKIAlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2U7CiAKIAlpbnRl
bF9lbmdpbmVfaW5pdF9hY3RpdmUoZW5naW5lLCBFTkdJTkVfTU9DSyk7Ci0JaW50ZWxfZW5naW5l
X2luaXRfYnJlYWRjcnVtYnMoZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9leGVjbGlzdHMo
ZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9fcG0oZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVf
aW5pdF9yZXRpcmUoZW5naW5lKTsKIAorCWVuZ2luZS0+YnJlYWRjcnVtYnMgPSBpbnRlbF9icmVh
ZGNydW1ic19jcmVhdGUoTlVMTCk7CisJaWYgKCFlbmdpbmUtPmJyZWFkY3J1bWJzKQorCQlyZXR1
cm4gLUVOT01FTTsKKwogCWNlID0gY3JlYXRlX2tlcm5lbF9jb250ZXh0KGVuZ2luZSk7CiAJaWYg
KElTX0VSUihjZSkpCiAJCWdvdG8gZXJyX2JyZWFkY3J1bWJzOwpAQCAtMzM4LDcgKzM0Miw3IEBA
IGludCBtb2NrX2VuZ2luZV9pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAly
ZXR1cm4gMDsKIAogZXJyX2JyZWFkY3J1bWJzOgotCWludGVsX2VuZ2luZV9maW5pX2JyZWFkY3J1
bWJzKGVuZ2luZSk7CisJaW50ZWxfYnJlYWRjcnVtYnNfZnJlZShlbmdpbmUtPmJyZWFkY3J1bWJz
KTsKIAlyZXR1cm4gLUVOT01FTTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9pcnEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKaW5kZXggMWZh
Njc3MDBkOGY0Li5mMTEzZmU0NDU3MmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfaXJxLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYwpAQCAtNDEs
NiArNDEsNyBAQAogI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxfbHBlX2F1ZGlvLmgiCiAjaW5jbHVk
ZSAiZGlzcGxheS9pbnRlbF9wc3IuaCIKIAorI2luY2x1ZGUgImd0L2ludGVsX2JyZWFkY3J1bWJz
LmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndF9pcnEu
aCIKICNpbmNsdWRlICJndC9pbnRlbF9ndF9wbV9pcnEuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9y
ZXF1ZXN0LmMKaW5kZXggMGNmMmExMGEyNGYxLi4zYjEyMWZhMzhjNjAgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVxdWVzdC5jCkBAIC0zMSw2ICszMSw3IEBACiAjaW5jbHVkZSA8bGludXgvc2No
ZWQvc2lnbmFsLmg+CiAKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1fY29udGV4dC5oIgorI2luY2x1
ZGUgImd0L2ludGVsX2JyZWFkY3J1bWJzLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfY29udGV4dC5o
IgogI2luY2x1ZGUgImd0L2ludGVsX3JpbmcuaCIKICNpbmNsdWRlICJndC9pbnRlbF9ycHMuaCIK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmgKaW5kZXggZmMxODM3OGM2ODVkLi4xNmI3MjEw
ODAxOTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5oCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5oCkBAIC0zNjEsMTAgKzM2MSw2
IEBAIHZvaWQgaTkxNV9yZXF1ZXN0X3N1Ym1pdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0
KTsKIHZvaWQgX19pOTE1X3JlcXVlc3RfdW5zdWJtaXQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVx
dWVzdCk7CiB2b2lkIGk5MTVfcmVxdWVzdF91bnN1Ym1pdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpy
ZXF1ZXN0KTsKIAotLyogTm90ZTogcGFydCBvZiB0aGUgaW50ZWxfYnJlYWRjcnVtYnMgZmFtaWx5
ICovCi1ib29sIGk5MTVfcmVxdWVzdF9lbmFibGVfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1
ZXN0ICpyZXF1ZXN0KTsKLXZvaWQgaTkxNV9yZXF1ZXN0X2NhbmNlbF9icmVhZGNydW1iKHN0cnVj
dCBpOTE1X3JlcXVlc3QgKnJlcXVlc3QpOwotCiBsb25nIGk5MTVfcmVxdWVzdF93YWl0KHN0cnVj
dCBpOTE1X3JlcXVlc3QgKnJxLAogCQkgICAgICAgdW5zaWduZWQgaW50IGZsYWdzLAogCQkgICAg
ICAgbG9uZyB0aW1lb3V0KQotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9pbnRlbC1nZngK

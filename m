Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 22EA3127F4B
	for <lists+intel-gfx@lfdr.de>; Fri, 20 Dec 2019 16:30:22 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5F3736EC56;
	Fri, 20 Dec 2019 15:30:20 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 099EF6EC56
 for <intel-gfx@lists.freedesktop.org>; Fri, 20 Dec 2019 15:30:19 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Dec 2019 07:30:15 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,336,1571727600"; d="scan'208";a="206571005"
Received: from kitaracr-mobl.amr.corp.intel.com (HELO
 josouza-MOBL.amr.corp.intel.com) ([10.252.207.149])
 by orsmga007.jf.intel.com with ESMTP; 20 Dec 2019 07:30:09 -0800
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 20 Dec 2019 07:29:50 -0800
Message-Id: <20191220152954.83276-3-jose.souza@intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20191220152954.83276-1-jose.souza@intel.com>
References: <20191220152954.83276-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v5 3/7] drm/i915/tgl: Select master transcoder
 for MST stream
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVEdMIHRoZSBibGVuZGluZyBvZiBhbGwgdGhlIHN0cmVhbXMgaGF2ZSBtb3ZlZCBmcm9tIERE
SSB0bwp0cmFuc2NvZGVyLCBzbyBub3cgZXZlcnkgdHJhbnNjb2RlciB3b3JraW5nIG92ZXIgdGhl
IHNhbWUgTVNUIHBvcnQgbXVzdApzZW5kIGl0cyBzdHJlYW0gdG8gYSBtYXN0ZXIgdHJhbnNjb2Rl
ciBhbmQgbWFzdGVyIHdpbGwgc2VuZCB0byBEREkKcmVzcGVjdGluZyB0aGUgdGltZSBzbG90cy4K
ClNvIGhlcmUgYWRkaW5nIGFsbCB0aGUgQ1JUQ3MgdGhhdCBzaGFyZXMgdGhlIHNhbWUgTVNUIHN0
cmVhbSBpZgpuZWVkZWQgYW5kIGNvbXB1dGluZyB0aGVpciBzdGF0ZSBhZ2FpbiwgaXQgd2lsbCBw
aWNrIHRoZSBsb3dlc3QKcGlwZS90cmFuc2NvZGVyIGFtb25nIHRoZSBvbmVzIGluIHRoZSBzYW1l
IHN0cmVhbSB0byBiZSBtYXN0ZXIuCgpNb3N0IG9mIHRoZSB0aW1lIHNrbF9jb21taXRfbW9kZXNl
dF9lbmFibGVzKCkgZW5hYmxlcyBwaXBlcyBpbiBhCmNyZXNjZW50IG9yZGVyIGJ1dCBkdWUgRERC
IG92ZXJsYXBwaW5nIGl0IG1pZ2h0IG5vdCBoYXBwZW4sIHRoaXMKc2NlbmFyaW9zIHdpbGwgYmUg
aGFuZGxlZCBpbiB0aGUgbmV4dCBwYXRjaC4KCnYyOgotIFVzaW5nIHJlY2VudGx5IGFkZGVkIGlu
dGVsX2NydGNfc3RhdGVfcmVzZXQoKSB0byBzZXQKbXN0X21hc3Rlcl90cmFuc2NvZGVyIHRvIGlu
dmFsaWQgdHJhbnNjb2RlciBmb3IgYWxsIG5vbiBnZW4xMiAmIE1TVApjb2RlIHBhdGhzCi0gU2V0
dGluZyBsb3dlc3QgcGlwZS90cmFuc2NvZGVyIGFzIG1hc3RlciwgcHJldmlvdXNseSBpdCB3YXMg
dGhlCmZpcnN0IG9uZSBidXQgc2V0dGluZyBhIHByZWRpY3RhYmxlIG9uZSB3aWxsIGhlbHAgaW4g
ZnV0dXJlIE1TVCBlCnBvcnQgc3luYyBpbnRlZ3JhdGlvbgotIE1vdmluZyB0byBpbnRlbCB0eXBl
IGFzIG11Y2ggYXMgd2UgY2FuCgp2MzoKLSBOb3cgaW50ZWxfZHBfbXN0X21hc3Rlcl90cmFuc19j
b21wdXRlKCkgcmV0dXJucyB0aGUgTVNUIG1hc3RlciB0cmFuc2NvZGVyCi0gUmVwbGFjZWQgc3Rk
Ym9vbC5oIGJ5IGxpbnV4L3R5cGVzLmgKLSBTa2lwIHRoZSBjb25uZWN0b3IgYmVpbmcgY2hlY2tl
ZCBpbgppbnRlbF9kcF9tc3RfYXRvbWljX21hc3Rlcl90cmFuc19jaGVjaygpCi0gVXNpbmcgcGlw
ZSBpbnN0ZWFkIG9mIHRyYW5zY29kZXIgdG8gY29tcHV0ZSBNU1QgbWFzdGVyCgp2NDoKLSByZW5h
bWVkIGNvbm5lY3Rvcl9zdGF0ZSB0byBjb25uX3N0YXRlCgp2NToKLSBJbXByb3ZlZCB0aGUgcGFy
YW1ldGVycyBvZiBpbnRlbF9kcF9tc3RfbWFzdGVyX3RyYW5zX2NvbXB1dGUoKSB0bwpzaW1wbHkg
Y29kZQotIEFkZGVkIGNhbGwgZHJtX2F0b21pY19hZGRfYWZmZWN0ZWRfcGxhbmVzKCkgaW4KaW50
ZWxfZHBfbXN0X2F0b21pY19tYXN0ZXJfdHJhbnNfY2hlY2soKSBhcyBoZWxwZXIgY291bGQgbm90
IGRvIGl0CmZvciB1cwotIFJlbW92ZWQgImlmIChyZXQpIiBsZWZ0IG92ZXIgZnJvbSB2MyBjaGFu
Z2VzCgpCU3BlYzogNTA0OTMKQlNwZWM6IDQ5MTkwCkNjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxl
LnN5cmphbGFAbGludXguaW50ZWwuY29tPgpDYzogTHVjYXMgRGUgTWFyY2hpIDxsdWNhcy5kZW1h
cmNoaUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEpvc8OpIFJvYmVydG8gZGUgU291emEgPGpv
c2Uuc291emFAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfYXRvbWljLmMgICB8ICAxNCArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9hdG9taWMuaCAgIHwgICA0ICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGRpLmMgICAgICB8ICAxNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5LmMgIHwgIDEyICstCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5
cGVzLmggICAgfCAgIDMgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcF9t
c3QuYyAgIHwgMTQwICsrKysrKysrKysrKysrKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kcF9tc3QuaCAgIHwgICA1ICsKIDcgZmlsZXMgY2hhbmdlZCwgMTc5IGluc2Vy
dGlvbnMoKyksIDEzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2F0b21pYy5jCmluZGV4IGI3ZGRhMThiNmYyOS4uMGViOTczZjY1OTc3IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pYy5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmMKQEAgLTE5Miw2ICsxOTIs
MjAgQEAgaW50ZWxfY29ubmVjdG9yX25lZWRzX21vZGVzZXQoc3RydWN0IGludGVsX2F0b21pY19z
dGF0ZSAqc3RhdGUsCiAJCQkJCQkJCQkgICAgbmV3X2Nvbm5fc3RhdGUtPmNydGMpKSk7CiB9CiAK
K3N0cnVjdCBpbnRlbF9kaWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZSAqCitpbnRlbF9hdG9taWNfZ2V0
X2RpZ2l0YWxfY29ubmVjdG9yX3N0YXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRl
LAorCQkJCQkgc3RydWN0IGludGVsX2Nvbm5lY3RvciAqY29ubmVjdG9yKQoreworCXN0cnVjdCBk
cm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRlOworCisJY29ubl9zdGF0ZSA9IGRybV9hdG9t
aWNfZ2V0X2Nvbm5lY3Rvcl9zdGF0ZSgmc3RhdGUtPmJhc2UsCisJCQkJCQkgICAgJmNvbm5lY3Rv
ci0+YmFzZSk7CisJaWYgKElTX0VSUihjb25uX3N0YXRlKSkKKwkJcmV0dXJuIEVSUl9DQVNUKGNv
bm5fc3RhdGUpOworCisJcmV0dXJuIHRvX2ludGVsX2RpZ2l0YWxfY29ubmVjdG9yX3N0YXRlKGNv
bm5fc3RhdGUpOworfQorCiAvKioKICAqIGludGVsX2NydGNfZHVwbGljYXRlX3N0YXRlIC0gZHVw
bGljYXRlIGNydGMgc3RhdGUKICAqIEBjcnRjOiBkcm0gY3J0YwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWMuaCBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmgKaW5kZXggYTdkMWE4NTc2YzQ4Li43NGM3NDlkYmZi
NGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWlj
LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWMuaApAQCAt
MTcsNiArMTcsNyBAQCBzdHJ1Y3QgZHJtX2RldmljZTsKIHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
Owogc3RydWN0IGRybV9wcm9wZXJ0eTsKIHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGU7CitzdHJ1
Y3QgaW50ZWxfY29ubmVjdG9yOwogc3RydWN0IGludGVsX2NydGM7CiBzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZTsKIApAQCAtMzQsNiArMzUsOSBAQCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAq
CiBpbnRlbF9kaWdpdGFsX2Nvbm5lY3Rvcl9kdXBsaWNhdGVfc3RhdGUoc3RydWN0IGRybV9jb25u
ZWN0b3IgKmNvbm5lY3Rvcik7CiBib29sIGludGVsX2Nvbm5lY3Rvcl9uZWVkc19tb2Rlc2V0KHN0
cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAogCQkJCSAgIHN0cnVjdCBkcm1fY29ubmVj
dG9yICpjb25uZWN0b3IpOworc3RydWN0IGludGVsX2RpZ2l0YWxfY29ubmVjdG9yX3N0YXRlICoK
K2ludGVsX2F0b21pY19nZXRfZGlnaXRhbF9jb25uZWN0b3Jfc3RhdGUoc3RydWN0IGludGVsX2F0
b21pY19zdGF0ZSAqc3RhdGUsCisJCQkJCSBzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0
b3IpOwogCiBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKmludGVsX2NydGNfZHVwbGljYXRlX3N0YXRl
KHN0cnVjdCBkcm1fY3J0YyAqY3J0Yyk7CiB2b2lkIGludGVsX2NydGNfZGVzdHJveV9zdGF0ZShz
dHJ1Y3QgZHJtX2NydGMgKmNydGMsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2RkaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
ZGkuYwppbmRleCBjOWJhN2Q3ZjM3ODcuLmMzYWM5NTBlNzlhOCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCkBAIC0xODk5LDggKzE4OTksMTMgQEAgaW50ZWxfZGRp
X3RyYW5zY29kZXJfZnVuY19yZWdfdmFsX2dldChjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqY3J0Y19zdGF0ZSkKIAkJdGVtcCB8PSBUUkFOU19ERElfTU9ERV9TRUxFQ1RfRFBfTVNUOwog
CQl0ZW1wIHw9IERESV9QT1JUX1dJRFRIKGNydGNfc3RhdGUtPmxhbmVfY291bnQpOwogCi0JCWlm
IChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDEyKQotCQkJdGVtcCB8PSBUUkFOU19ERElfTVNUX1RS
QU5TUE9SVF9TRUxFQ1QoY3J0Y19zdGF0ZS0+Y3B1X3RyYW5zY29kZXIpOworCQlpZiAoSU5URUxf
R0VOKGRldl9wcml2KSA+PSAxMikgeworCQkJZW51bSB0cmFuc2NvZGVyIG1hc3RlcjsKKworCQkJ
bWFzdGVyID0gY3J0Y19zdGF0ZS0+bXN0X21hc3Rlcl90cmFuc2NvZGVyOworCQkJV0FSTl9PTiht
YXN0ZXIgPT0gSU5WQUxJRF9UUkFOU0NPREVSKTsKKwkJCXRlbXAgfD0gVFJBTlNfRERJX01TVF9U
UkFOU1BPUlRfU0VMRUNUKG1hc3Rlcik7CisJCX0KIAl9IGVsc2UgewogCQl0ZW1wIHw9IFRSQU5T
X0RESV9NT0RFX1NFTEVDVF9EUF9TU1Q7CiAJCXRlbXAgfD0gRERJX1BPUlRfV0lEVEgoY3J0Y19z
dGF0ZS0+bGFuZV9jb3VudCk7CkBAIC00NDA1LDYgKzQ0MTAsMTEgQEAgdm9pZCBpbnRlbF9kZGlf
Z2V0X2NvbmZpZyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJcGlwZV9jb25maWct
Pm91dHB1dF90eXBlcyB8PSBCSVQoSU5URUxfT1VUUFVUX0RQX01TVCk7CiAJCXBpcGVfY29uZmln
LT5sYW5lX2NvdW50ID0KIAkJCSgodGVtcCAmIERESV9QT1JUX1dJRFRIX01BU0spID4+IERESV9Q
T1JUX1dJRFRIX1NISUZUKSArIDE7CisKKwkJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIp
CisJCQlwaXBlX2NvbmZpZy0+bXN0X21hc3Rlcl90cmFuc2NvZGVyID0KKwkJCQkJUkVHX0ZJRUxE
X0dFVChUUkFOU19ERElfTVNUX1RSQU5TUE9SVF9TRUxFQ1RfTUFTSywgdGVtcCk7CisKIAkJaW50
ZWxfZHBfZ2V0X21fbihpbnRlbF9jcnRjLCBwaXBlX2NvbmZpZyk7CiAJCWJyZWFrOwogCWRlZmF1
bHQ6CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4
IGZjNzc4MjllYTk1OC4uZWI5N2FkNTYyYzk2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtNDYsNiArNDYsNyBAQAogI2luY2x1ZGUgImRpc3Bs
YXkvaW50ZWxfY3J0LmgiCiAjaW5jbHVkZSAiZGlzcGxheS9pbnRlbF9kZGkuaCIKICNpbmNsdWRl
ICJkaXNwbGF5L2ludGVsX2RwLmgiCisjaW5jbHVkZSAiZGlzcGxheS9pbnRlbF9kcF9tc3QuaCIK
ICNpbmNsdWRlICJkaXNwbGF5L2ludGVsX2RzaS5oIgogI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxf
ZHZvLmgiCiAjaW5jbHVkZSAiZGlzcGxheS9pbnRlbF9nbWJ1cy5oIgpAQCAtMTE2MjcsNiArMTE2
MjgsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9jcnRjX3N0YXRlX3Jlc2V0KHN0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCWNydGNfc3RhdGUtPmhzd193b3JrYXJvdW5kX3BpcGUg
PSBJTlZBTElEX1BJUEU7CiAJY3J0Y19zdGF0ZS0+b3V0cHV0X2Zvcm1hdCA9IElOVEVMX09VVFBV
VF9GT1JNQVRfSU5WQUxJRDsKIAljcnRjX3N0YXRlLT5zY2FsZXJfc3RhdGUuc2NhbGVyX2lkID0g
LTE7CisJY3J0Y19zdGF0ZS0+bXN0X21hc3Rlcl90cmFuc2NvZGVyID0gSU5WQUxJRF9UUkFOU0NP
REVSOwogfQogCiBzdGF0aWMgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmludGVsX2NydGNfc3Rh
dGVfYWxsb2Moc3RydWN0IGludGVsX2NydGMgKmNydGMpCkBAIC0xMjQ4NCw2ICsxMjQ4Niw5IEBA
IHN0YXRpYyB2b2lkIGludGVsX2R1bXBfcGlwZV9jb25maWcoY29uc3Qgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCQkJICAgICAgcGlwZV9jb25maWctPmNzY19tb2RlLCBw
aXBlX2NvbmZpZy0+Z2FtbWFfbW9kZSwKIAkJCSAgICAgIHBpcGVfY29uZmlnLT5nYW1tYV9lbmFi
bGUsIHBpcGVfY29uZmlnLT5jc2NfZW5hYmxlKTsKIAorCURSTV9ERUJVR19LTVMoIk1TVCBtYXN0
ZXIgdHJhbnNjb2RlcjogJXNcbiIsCisJCSAgICAgIHRyYW5zY29kZXJfbmFtZShwaXBlX2NvbmZp
Zy0+bXN0X21hc3Rlcl90cmFuc2NvZGVyKSk7CisKIGR1bXBfcGxhbmVzOgogCWlmICghc3RhdGUp
CiAJCXJldHVybjsKQEAgLTEzMjY0LDYgKzEzMjY5LDggQEAgaW50ZWxfcGlwZV9jb25maWdfY29t
cGFyZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3VycmVudF9jb25maWcsCiAJUElQ
RV9DT05GX0NIRUNLX0koZHNjLmRzY19zcGxpdCk7CiAJUElQRV9DT05GX0NIRUNLX0koZHNjLmNv
bXByZXNzZWRfYnBwKTsKIAorCVBJUEVfQ09ORl9DSEVDS19JKG1zdF9tYXN0ZXJfdHJhbnNjb2Rl
cik7CisKICN1bmRlZiBQSVBFX0NPTkZfQ0hFQ0tfWAogI3VuZGVmIFBJUEVfQ09ORl9DSEVDS19J
CiAjdW5kZWYgUElQRV9DT05GX0NIRUNLX0JPT0wKQEAgLTE0MzQ4LDcgKzE0MzU1LDcgQEAgc3Rh
dGljIHZvaWQgaW50ZWxfY29tbWl0X21vZGVzZXRfZGlzYWJsZXMoc3RydWN0IGludGVsX2F0b21p
Y19zdGF0ZSAqc3RhdGUpCiAJdTMyIGhhbmRsZWQgPSAwOwogCWludCBpOwogCi0JLyogT25seSBk
aXNhYmxlIHBvcnQgc3luYyBzbGF2ZXMgKi8KKwkvKiBPbmx5IGRpc2FibGUgcG9ydCBzeW5jIGFu
ZCBNU1Qgc2xhdmVzICovCiAJZm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3Rh
dGUsIGNydGMsIG9sZF9jcnRjX3N0YXRlLAogCQkJCQkgICAgbmV3X2NydGNfc3RhdGUsIGkpIHsK
IAkJaWYgKCFuZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSkKQEAgLTE0MzYyLDcgKzE0MzY5
LDggQEAgc3RhdGljIHZvaWQgaW50ZWxfY29tbWl0X21vZGVzZXRfZGlzYWJsZXMoc3RydWN0IGlu
dGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCiAJCSAqIHNsYXZlIENSVENzIGFyZSBkaXNhYmxlZCBm
aXJzdCBhbmQgdGhlbiBtYXN0ZXIgQ1JUQyBzaW5jZQogCQkgKiBTbGF2ZSB2YmxhbmtzIGFyZSBt
YXNrZWQgdGlsbCBNYXN0ZXIgVmJsYW5rcy4KIAkJICovCi0JCWlmICghaXNfdHJhbnNfcG9ydF9z
eW5jX3NsYXZlKG9sZF9jcnRjX3N0YXRlKSkKKwkJaWYgKCFpc190cmFuc19wb3J0X3N5bmNfc2xh
dmUob2xkX2NydGNfc3RhdGUpICYmCisJCSAgICAhaW50ZWxfZHBfbXN0X2lzX3NsYXZlX3RyYW5z
KG9sZF9jcnRjX3N0YXRlKSkKIAkJCWNvbnRpbnVlOwogCiAJCWludGVsX3ByZV9wbGFuZV91cGRh
dGUoc3RhdGUsIGNydGMpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Rpc3BsYXlfdHlwZXMuaAppbmRleCA4M2VhMDQxNDliNzcuLjYzMGE5NDg5MmI3YiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVz
LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVz
LmgKQEAgLTEwNTQsNiArMTA1NCw5IEBAIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlIHsKIAogCS8q
IEJpdG1hc2sgdG8gaW5kaWNhdGUgc2xhdmVzIGF0dGFjaGVkICovCiAJdTggc3luY19tb2RlX3Ns
YXZlc19tYXNrOworCisJLyogT25seSB2YWxpZCBvbiBUR0wrICovCisJZW51bSB0cmFuc2NvZGVy
IG1zdF9tYXN0ZXJfdHJhbnNjb2RlcjsKIH07CiAKIHN0cnVjdCBpbnRlbF9jcnRjIHsKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5jCmluZGV4IDdhYTA5NzVjMzNi
Ny4uYTYyMzdkYTlhYzUyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2RwX21zdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHBfbXN0LmMKQEAgLTg3LDEwICs4Nyw1MyBAQCBzdGF0aWMgaW50IGludGVsX2RwX21zdF9jb21w
dXRlX2xpbmtfY29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCXJldHVybiAw
OwogfQogCisvKgorICogSXRlcmF0ZSBvdmVyIGFsbCBjb25uZWN0b3JzIGFuZCByZXR1cm4gdGhl
IHNtYWxsZXN0IHRyYW5zY29kZXIgaW4gdGhlIE1TVAorICogc3RyZWFtCisgKi8KK3N0YXRpYyBl
bnVtIHRyYW5zY29kZXIKK2ludGVsX2RwX21zdF9tYXN0ZXJfdHJhbnNfY29tcHV0ZShzdHJ1Y3Qg
aW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKKwkJCQkgIHN0cnVjdCBpbnRlbF9kcCAqbXN0X3Bv
cnQpCit7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShzdGF0
ZS0+YmFzZS5kZXYpOworCXN0cnVjdCBpbnRlbF9kaWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZSAqY29u
bl9zdGF0ZTsKKwlzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3I7CisJZW51bSBwaXBl
IHJldCA9IEk5MTVfTUFYX1BJUEVTOworCWludCBpOworCisJaWYgKElOVEVMX0dFTihkZXZfcHJp
dikgPCAxMikKKwkJcmV0dXJuIElOVkFMSURfVFJBTlNDT0RFUjsKKworCWZvcl9lYWNoX25ld19p
bnRlbF9jb25uZWN0b3JfaW5fc3RhdGUoc3RhdGUsIGNvbm5lY3RvciwgY29ubl9zdGF0ZSwgaSkg
eworCQlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsKKwkJc3RydWN0IGludGVs
X2NydGMgKmNydGM7CisKKwkJaWYgKGNvbm5lY3Rvci0+bXN0X3BvcnQgIT0gbXN0X3BvcnQgfHwg
IWNvbm5fc3RhdGUtPmJhc2UuY3J0YykKKwkJCWNvbnRpbnVlOworCisJCWNydGMgPSB0b19pbnRl
bF9jcnRjKGNvbm5fc3RhdGUtPmJhc2UuY3J0Yyk7CisJCWNydGNfc3RhdGUgPSBpbnRlbF9hdG9t
aWNfZ2V0X25ld19jcnRjX3N0YXRlKHN0YXRlLCBjcnRjKTsKKwkJaWYgKCFjcnRjX3N0YXRlLT51
YXBpLmFjdGl2ZSkKKwkJCWNvbnRpbnVlOworCisJCS8qCisJCSAqIFVzaW5nIGNydGMtPnBpcGUg
YmVjYXVzZSBjcnRjX3N0YXRlLT5jcHVfdHJhbnNjb2RlciBpcworCQkgKiBjb21wdXRlZCwgc28g
b3RoZXJzIENSVENzIGNvdWxkIGhhdmUgbm9uLWNvbXB1dGVkCisJCSAqIGNwdV90cmFuc2NvZGVy
CisJCSAqLworCQlpZiAoY3J0Yy0+cGlwZSA8IHJldCkKKwkJCXJldCA9IGNydGMtPnBpcGU7CisJ
fQorCisJLyogU2ltcGxlIGNhc3Qgd29ya3MgYmVjYXVzZSBUR0wgZG9uJ3QgaGF2ZSBhIGVEUCB0
cmFuc2NvZGVyICovCisJcmV0dXJuIChlbnVtIHRyYW5zY29kZXIpcmV0OworfQorCiBzdGF0aWMg
aW50IGludGVsX2RwX21zdF9jb21wdXRlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5j
b2RlciwKIAkJCQkgICAgICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAog
CQkJCSAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZSkKIHsKKwlz
dHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSA9IHRvX2ludGVsX2F0b21pY19zdGF0ZShj
b25uX3N0YXRlLT5zdGF0ZSk7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0g
dG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CiAJc3RydWN0IGludGVsX2RwX21zdF9lbmNvZGVy
ICppbnRlbF9tc3QgPSBlbmNfdG9fbXN0KCZlbmNvZGVyLT5iYXNlKTsKIAlzdHJ1Y3QgaW50ZWxf
ZHAgKmludGVsX2RwID0gJmludGVsX21zdC0+cHJpbWFyeS0+ZHA7CkBAIC0xNTQsMjQgKzE5Nyw5
MSBAQCBzdGF0aWMgaW50IGludGVsX2RwX21zdF9jb21wdXRlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxf
ZW5jb2RlciAqZW5jb2RlciwKIAogCWludGVsX2RkaV9jb21wdXRlX21pbl92b2x0YWdlX2xldmVs
KGRldl9wcml2LCBwaXBlX2NvbmZpZyk7CiAKKwlwaXBlX2NvbmZpZy0+bXN0X21hc3Rlcl90cmFu
c2NvZGVyID0gaW50ZWxfZHBfbXN0X21hc3Rlcl90cmFuc19jb21wdXRlKHN0YXRlLCBpbnRlbF9k
cCk7CisKKwlyZXR1cm4gMDsKK30KKworLyoKKyAqIElmIG9uZSBvZiB0aGUgY29ubmVjdG9ycyBp
biBhIE1TVCBzdHJlYW0gbmVlZHMgYSBtb2Rlc2V0LCBtYXJrIGFsbCBDUlRDcworICogdGhhdCBz
aGFyZXMgdGhlIHNhbWUgTVNUIHN0cmVhbSBhcyBtb2RlIGNoYW5nZWQsCisgKiBpbnRlbF9tb2Rl
c2V0X3BpcGVfY29uZmlnKCkraW50ZWxfY3J0Y19jaGVja19mYXN0c2V0KCkgd2lsbCB0YWtlIGNh
cmUgdG8gZG8KKyAqIGEgZmFzdHNldCB3aGVuIHBvc3NpYmxlLgorICovCitzdGF0aWMgaW50Citp
bnRlbF9kcF9tc3RfYXRvbWljX21hc3Rlcl90cmFuc19jaGVjayhzdHJ1Y3QgaW50ZWxfY29ubmVj
dG9yICpjb25uZWN0b3IsCisJCQkJICAgICAgIHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0
YXRlKQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoc3Rh
dGUtPmJhc2UuZGV2KTsKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXIgY29ubmVjdG9y
X2xpc3RfaXRlcjsKKwlzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3JfaXRlcjsKKwor
CWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwgMTIpCisJCXJldHVybiAgMDsKKworCWlmICghaW50
ZWxfY29ubmVjdG9yX25lZWRzX21vZGVzZXQoc3RhdGUsICZjb25uZWN0b3ItPmJhc2UpKQorCQly
ZXR1cm4gMDsKKworCWRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKCZkZXZfcHJpdi0+ZHJt
LCAmY29ubmVjdG9yX2xpc3RfaXRlcik7CisJZm9yX2VhY2hfaW50ZWxfY29ubmVjdG9yX2l0ZXIo
Y29ubmVjdG9yX2l0ZXIsICZjb25uZWN0b3JfbGlzdF9pdGVyKSB7CisJCXN0cnVjdCBpbnRlbF9k
aWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9pdGVyX3N0YXRlOworCQlzdHJ1Y3QgaW50ZWxf
Y3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsKKwkJc3RydWN0IGludGVsX2NydGMgKmNydGM7CisJCWlu
dCByZXQ7CisKKwkJaWYgKGNvbm5lY3Rvcl9pdGVyLT5tc3RfcG9ydCAhPSBjb25uZWN0b3ItPm1z
dF9wb3J0IHx8CisJCSAgICBjb25uZWN0b3JfaXRlciA9PSBjb25uZWN0b3IpCisJCQljb250aW51
ZTsKKworCQljb25uX2l0ZXJfc3RhdGUgPSBpbnRlbF9hdG9taWNfZ2V0X2RpZ2l0YWxfY29ubmVj
dG9yX3N0YXRlKHN0YXRlLAorCQkJCQkJCQkJICAgY29ubmVjdG9yX2l0ZXIpOworCQlpZiAoSVNf
RVJSKGNvbm5faXRlcl9zdGF0ZSkpIHsKKwkJCWRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2VuZCgm
Y29ubmVjdG9yX2xpc3RfaXRlcik7CisJCQlyZXR1cm4gUFRSX0VSUihjb25uX2l0ZXJfc3RhdGUp
OworCQl9CisKKwkJaWYgKCFjb25uX2l0ZXJfc3RhdGUtPmJhc2UuY3J0YykKKwkJCWNvbnRpbnVl
OworCisJCWNydGMgPSB0b19pbnRlbF9jcnRjKGNvbm5faXRlcl9zdGF0ZS0+YmFzZS5jcnRjKTsK
KwkJY3J0Y19zdGF0ZSA9IGludGVsX2F0b21pY19nZXRfY3J0Y19zdGF0ZSgmc3RhdGUtPmJhc2Us
IGNydGMpOworCQlpZiAoSVNfRVJSKGNydGNfc3RhdGUpKSB7CisJCQlkcm1fY29ubmVjdG9yX2xp
c3RfaXRlcl9lbmQoJmNvbm5lY3Rvcl9saXN0X2l0ZXIpOworCQkJcmV0dXJuIFBUUl9FUlIoY3J0
Y19zdGF0ZSk7CisJCX0KKworCQlyZXQgPSBkcm1fYXRvbWljX2FkZF9hZmZlY3RlZF9wbGFuZXMo
JnN0YXRlLT5iYXNlLCAmY3J0Yy0+YmFzZSk7CisJCWlmIChyZXQpIHsKKwkJCWRybV9jb25uZWN0
b3JfbGlzdF9pdGVyX2VuZCgmY29ubmVjdG9yX2xpc3RfaXRlcik7CisJCQlyZXR1cm4gcmV0Owor
CQl9CisJCWNydGNfc3RhdGUtPnVhcGkubW9kZV9jaGFuZ2VkID0gdHJ1ZTsKKwl9CisJZHJtX2Nv
bm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZjb25uZWN0b3JfbGlzdF9pdGVyKTsKKwogCXJldHVybiAw
OwogfQogCiBzdGF0aWMgaW50CiBpbnRlbF9kcF9tc3RfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1f
Y29ubmVjdG9yICpjb25uZWN0b3IsCi0JCQkgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0
ZSkKKwkJCSAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKl9zdGF0ZSkKIHsKKwlzdHJ1Y3QgaW50
ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSA9IHRvX2ludGVsX2F0b21pY19zdGF0ZShfc3RhdGUpOwog
CXN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpuZXdfY29ubl9zdGF0ZSA9Ci0JCWRybV9hdG9t
aWNfZ2V0X25ld19jb25uZWN0b3Jfc3RhdGUoc3RhdGUsIGNvbm5lY3Rvcik7CisJCWRybV9hdG9t
aWNfZ2V0X25ld19jb25uZWN0b3Jfc3RhdGUoJnN0YXRlLT5iYXNlLCBjb25uZWN0b3IpOwogCXN0
cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpvbGRfY29ubl9zdGF0ZSA9Ci0JCWRybV9hdG9taWNf
Z2V0X29sZF9jb25uZWN0b3Jfc3RhdGUoc3RhdGUsIGNvbm5lY3Rvcik7CisJCWRybV9hdG9taWNf
Z2V0X29sZF9jb25uZWN0b3Jfc3RhdGUoJnN0YXRlLT5iYXNlLCBjb25uZWN0b3IpOwogCXN0cnVj
dCBpbnRlbF9jb25uZWN0b3IgKmludGVsX2Nvbm5lY3RvciA9CiAJCXRvX2ludGVsX2Nvbm5lY3Rv
cihjb25uZWN0b3IpOwogCXN0cnVjdCBkcm1fY3J0YyAqbmV3X2NydGMgPSBuZXdfY29ubl9zdGF0
ZS0+Y3J0YzsKIAlzdHJ1Y3QgZHJtX2RwX21zdF90b3BvbG9neV9tZ3IgKm1ncjsKIAlpbnQgcmV0
OwogCi0JcmV0ID0gaW50ZWxfZGlnaXRhbF9jb25uZWN0b3JfYXRvbWljX2NoZWNrKGNvbm5lY3Rv
ciwgc3RhdGUpOworCXJldCA9IGludGVsX2RpZ2l0YWxfY29ubmVjdG9yX2F0b21pY19jaGVjayhj
b25uZWN0b3IsICZzdGF0ZS0+YmFzZSk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCXJl
dCA9IGludGVsX2RwX21zdF9hdG9taWNfbWFzdGVyX3RyYW5zX2NoZWNrKGludGVsX2Nvbm5lY3Rv
ciwgc3RhdGUpOwogCWlmIChyZXQpCiAJCXJldHVybiByZXQ7CiAKQEAgLTE4MiwxMiArMjkyLDkg
QEAgaW50ZWxfZHBfbXN0X2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVj
dG9yLAogCSAqIGNvbm5lY3RvcgogCSAqLwogCWlmIChuZXdfY3J0YykgewotCQlzdHJ1Y3QgaW50
ZWxfYXRvbWljX3N0YXRlICppbnRlbF9zdGF0ZSA9Ci0JCQl0b19pbnRlbF9hdG9taWNfc3RhdGUo
c3RhdGUpOwogCQlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0YyA9IHRvX2ludGVsX2NydGMo
bmV3X2NydGMpOwogCQlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSA9Ci0JCQlp
bnRlbF9hdG9taWNfZ2V0X25ld19jcnRjX3N0YXRlKGludGVsX3N0YXRlLAotCQkJCQkJCWludGVs
X2NydGMpOworCQkJaW50ZWxfYXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShzdGF0ZSwgaW50ZWxf
Y3J0Yyk7CiAKIAkJaWYgKCFjcnRjX3N0YXRlIHx8CiAJCSAgICAhZHJtX2F0b21pY19jcnRjX25l
ZWRzX21vZGVzZXQoJmNydGNfc3RhdGUtPnVhcGkpIHx8CkBAIC0xOTYsNyArMzAzLDcgQEAgaW50
ZWxfZHBfbXN0X2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAog
CX0KIAogCW1nciA9ICZlbmNfdG9fbXN0KG9sZF9jb25uX3N0YXRlLT5iZXN0X2VuY29kZXIpLT5w
cmltYXJ5LT5kcC5tc3RfbWdyOwotCXJldCA9IGRybV9kcF9hdG9taWNfcmVsZWFzZV92Y3BpX3Ns
b3RzKHN0YXRlLCBtZ3IsCisJcmV0ID0gZHJtX2RwX2F0b21pY19yZWxlYXNlX3ZjcGlfc2xvdHMo
JnN0YXRlLT5iYXNlLCBtZ3IsCiAJCQkJCSAgICAgICBpbnRlbF9jb25uZWN0b3ItPnBvcnQpOwog
CiAJcmV0dXJuIHJldDsKQEAgLTI0MCw2ICszNDcsOCBAQCBzdGF0aWMgdm9pZCBpbnRlbF9tc3Rf
cG9zdF9kaXNhYmxlX2RwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCiAJaW50ZWxf
ZHAtPmFjdGl2ZV9tc3RfbGlua3MtLTsKIAlsYXN0X21zdF9zdHJlYW0gPSBpbnRlbF9kcC0+YWN0
aXZlX21zdF9saW5rcyA9PSAwOworCVdBUk5fT04oSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMiAm
JiBsYXN0X21zdF9zdHJlYW0gJiYKKwkJIWludGVsX2RwX21zdF9pc19tYXN0ZXJfdHJhbnMob2xk
X2NydGNfc3RhdGUpKTsKIAogCWludGVsX2NydGNfdmJsYW5rX29mZihvbGRfY3J0Y19zdGF0ZSk7
CiAKQEAgLTMxNyw2ICs0MjYsOCBAQCBzdGF0aWMgdm9pZCBpbnRlbF9tc3RfcHJlX2VuYWJsZV9k
cChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAljb25uZWN0b3ItPmVuY29kZXIgPSBl
bmNvZGVyOwogCWludGVsX21zdC0+Y29ubmVjdG9yID0gY29ubmVjdG9yOwogCWZpcnN0X21zdF9z
dHJlYW0gPSBpbnRlbF9kcC0+YWN0aXZlX21zdF9saW5rcyA9PSAwOworCVdBUk5fT04oSU5URUxf
R0VOKGRldl9wcml2KSA+PSAxMiAmJiBmaXJzdF9tc3Rfc3RyZWFtICYmCisJCSFpbnRlbF9kcF9t
c3RfaXNfbWFzdGVyX3RyYW5zKHBpcGVfY29uZmlnKSk7CiAKIAlEUk1fREVCVUdfS01TKCJhY3Rp
dmUgbGlua3MgJWRcbiIsIGludGVsX2RwLT5hY3RpdmVfbXN0X2xpbmtzKTsKIApAQCAtNzIyLDMg
KzgzMywxNCBAQCBpbnRlbF9kcF9tc3RfZW5jb2Rlcl9jbGVhbnVwKHN0cnVjdCBpbnRlbF9kaWdp
dGFsX3BvcnQgKmludGVsX2RpZ19wb3J0KQogCWRybV9kcF9tc3RfdG9wb2xvZ3lfbWdyX2Rlc3Ry
b3koJmludGVsX2RwLT5tc3RfbWdyKTsKIAkvKiBlbmNvZGVycyB3aWxsIGdldCBraWxsZWQgYnkg
bm9ybWFsIGNsZWFudXAgKi8KIH0KKworYm9vbCBpbnRlbF9kcF9tc3RfaXNfbWFzdGVyX3RyYW5z
KGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQoreworCXJldHVybiBj
cnRjX3N0YXRlLT5tc3RfbWFzdGVyX3RyYW5zY29kZXIgPT0gY3J0Y19zdGF0ZS0+Y3B1X3RyYW5z
Y29kZXI7Cit9CisKK2Jvb2wgaW50ZWxfZHBfbXN0X2lzX3NsYXZlX3RyYW5zKGNvbnN0IHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQoreworCXJldHVybiBjcnRjX3N0YXRlLT5t
c3RfbWFzdGVyX3RyYW5zY29kZXIgIT0gSU5WQUxJRF9UUkFOU0NPREVSICYmCisJICAgICAgIGNy
dGNfc3RhdGUtPm1zdF9tYXN0ZXJfdHJhbnNjb2RlciAhPSBjcnRjX3N0YXRlLT5jcHVfdHJhbnNj
b2RlcjsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHBfbXN0LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5oCmlu
ZGV4IGY2NjBhZDgwZGIwNC4uODU0NzI0ZjY4ZjA5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmgKQEAgLTYsMTAgKzYsMTUgQEAKICNpZm5kZWYgX19JTlRF
TF9EUF9NU1RfSF9fCiAjZGVmaW5lIF9fSU5URUxfRFBfTVNUX0hfXwogCisjaW5jbHVkZSA8bGlu
dXgvdHlwZXMuaD4KKwogc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydDsKK3N0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlOwogCiBpbnQgaW50ZWxfZHBfbXN0X2VuY29kZXJfaW5pdChzdHJ1Y3QgaW50ZWxf
ZGlnaXRhbF9wb3J0ICppbnRlbF9kaWdfcG9ydCwgaW50IGNvbm5faWQpOwogdm9pZCBpbnRlbF9k
cF9tc3RfZW5jb2Rlcl9jbGVhbnVwKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2Rp
Z19wb3J0KTsKIGludCBpbnRlbF9kcF9tc3RfZW5jb2Rlcl9hY3RpdmVfbGlua3Moc3RydWN0IGlu
dGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQpOworYm9vbCBpbnRlbF9kcF9tc3RfaXNf
bWFzdGVyX3RyYW5zKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKTsK
K2Jvb2wgaW50ZWxfZHBfbXN0X2lzX3NsYXZlX3RyYW5zKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRj
X3N0YXRlICpjcnRjX3N0YXRlKTsKIAogI2VuZGlmIC8qIF9fSU5URUxfRFBfTVNUX0hfXyAqLwot
LSAKMi4yNC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A4A3462D3B
	for <lists+intel-gfx@lfdr.de>; Tue,  9 Jul 2019 03:00:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 20544898B7;
	Tue,  9 Jul 2019 01:00:17 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AAD43898B7
 for <intel-gfx@lists.freedesktop.org>; Tue,  9 Jul 2019 01:00:15 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 08 Jul 2019 18:00:15 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,468,1557212400"; d="scan'208";a="173414611"
Received: from fmsmsx108.amr.corp.intel.com ([10.18.124.206])
 by FMSMGA003.fm.intel.com with ESMTP; 08 Jul 2019 18:00:15 -0700
Received: from FMSMSX109.amr.corp.intel.com (10.18.116.9) by
 FMSMSX108.amr.corp.intel.com (10.18.124.206) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Mon, 8 Jul 2019 18:00:15 -0700
Received: from fmsmsx117.amr.corp.intel.com ([169.254.3.206]) by
 FMSMSX109.amr.corp.intel.com ([169.254.15.78]) with mapi id 14.03.0439.000;
 Mon, 8 Jul 2019 18:00:14 -0700
From: "Souza, Jose" <jose.souza@intel.com>
To: "Roper, Matthew D" <matthew.d.roper@intel.com>,
 "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>
Thread-Topic: [PATCH v4 4/5] drm/i915: Transition port type checks to phy
 checks
Thread-Index: AQHVMfhqjStrow2uYkWXMs7R8RstIKbB9LoA
Date: Tue, 9 Jul 2019 01:00:13 +0000
Message-ID: <352a8f9ef2ae786cc5dc40f38e5d147e57b2add1.camel@intel.com>
References: <20190703233736.5816-1-matthew.d.roper@intel.com>
 <20190703233736.5816-5-matthew.d.roper@intel.com>
In-Reply-To: <20190703233736.5816-5-matthew.d.roper@intel.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.24.9.4]
Content-ID: <26F4236535C4884F810AC443BD065EA3@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH v4 4/5] drm/i915: Transition port type
 checks to phy checks
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCAyMDE5LTA3LTAzIGF0IDE2OjM3IC0wNzAwLCBNYXR0IFJvcGVyIHdyb3RlOg0KPiBU
cmFuc2l0aW9uIHRoZSByZW1haW5pbmcgdXNlcyBvZiBpbnRlbF9wb3J0X2lzXyogb3ZlciB0byB0
aGUNCj4gZXF1aXZhbGVudA0KPiBpbnRlbF9waHlfaXNfKiBmdW5jdGlvbnMgYW5kIGRyb3AgdGhl
IHBvcnQgZnVuY3Rpb25zLg0KDQoNCkF3ZXNvbWUNCg0KUmV2aWV3ZWQtYnk6IEpvc8OpIFJvYmVy
dG8gZGUgU291emEgPGpvc2Uuc291emFAaW50ZWwuY29tPg0KDQo+IA0KPiBDYzogSm9zw6kgUm9i
ZXJ0byBkZSBTb3V6YSA8am9zZS5zb3V6YUBpbnRlbC5jb20+DQo+IFNpZ25lZC1vZmYtYnk6IE1h
dHQgUm9wZXIgPG1hdHRoZXcuZC5yb3BlckBpbnRlbC5jb20+DQo+IC0tLQ0KPiBXZSBtaWdodCB3
YW50IHRvIGhvbGQgb2ZmIG9uIG1lcmdpbmcgdGhpcyBvbmUgdW50aWwgYWZ0ZXIgVEdMIGxhbmRz
DQo+IHRvDQo+IGF2b2lkIHVubmVjZXNzYXJ5IGNvbmZsaWN0cyB0aGVyZS4NCj4gDQo+ICBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jpb3MuYyAgICAgfCAgNCArLQ0KPiAgZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYyAgICAgIHwgNDkgKysrKysrKysr
KysrLS0tLS0NCj4gLS0NCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheS5jICB8IDM4ICsrKystLS0tLS0tLS0tDQo+ICAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5X3Bvd2VyLmMgICAgfCAgNCArLQ0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kcC5jICAgICAgIHwgMTUgKysrLS0tDQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2RwbGxfbWdyLmMgfCAxMSArKystLQ0KPiAgZHJpdmVycy9ncHUvZHJt
L2k5MTUvaW50ZWxfZHJ2LmggICAgICAgICAgICAgIHwgIDIgLQ0KPiAgNyBmaWxlcyBjaGFuZ2Vk
LCA2MSBpbnNlcnRpb25zKCspLCA2MiBkZWxldGlvbnMoLSkNCj4gDQo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jpb3MuYw0KPiBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5jDQo+IGluZGV4IDBjOTgwODEzMmQ2Ny4uNGZk
YmI1YzM1ZDg3IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Jpb3MuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jp
b3MuYw0KPiBAQCAtMjgsNiArMjgsNyBAQA0KPiAgI2luY2x1ZGUgPGRybS9kcm1fZHBfaGVscGVy
Lmg+DQo+ICAjaW5jbHVkZSA8ZHJtL2k5MTVfZHJtLmg+DQo+ICANCj4gKyNpbmNsdWRlICJkaXNw
bGF5L2ludGVsX2Rpc3BsYXkuaCINCj4gICNpbmNsdWRlICJkaXNwbGF5L2ludGVsX2dtYnVzLmgi
DQo+ICANCj4gICNpbmNsdWRlICJpOTE1X2Rydi5oIg0KPiBAQCAtMTczMywxMiArMTczNCwxMyBA
QCBpbml0X3ZidF9taXNzaW5nX2RlZmF1bHRzKHN0cnVjdA0KPiBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdikNCj4gIAlmb3IgKHBvcnQgPSBQT1JUX0E7IHBvcnQgPCBJOTE1X01BWF9QT1JUUzsg
cG9ydCsrKSB7DQo+ICAJCXN0cnVjdCBkZGlfdmJ0X3BvcnRfaW5mbyAqaW5mbyA9DQo+ICAJCQkm
ZGV2X3ByaXYtPnZidC5kZGlfcG9ydF9pbmZvW3BvcnRdOw0KPiArCQllbnVtIHBoeSBwaHkgPSBp
bnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgcG9ydCk7DQo+ICANCj4gIAkJLyoNCj4gIAkJICog
VkJUIGhhcyB0aGUgVHlwZUMgbW9kZSAobmF0aXZlLFRCVC9VU0IpIGFuZCB3ZSBkb24ndA0KPiB3
YW50DQo+ICAJCSAqIHRvIGRldGVjdCBpdC4NCj4gIAkJICovDQo+IC0JCWlmIChpbnRlbF9wb3J0
X2lzX3RjKGRldl9wcml2LCBwb3J0KSkNCj4gKwkJaWYgKGludGVsX3BoeV9pc190YyhkZXZfcHJp
diwgcGh5KSkNCj4gIAkJCWNvbnRpbnVlOw0KPiAgDQo+ICAJCWluZm8tPnN1cHBvcnRzX2R2aSA9
IChwb3J0ICE9IFBPUlRfQSAmJiBwb3J0ICE9DQo+IFBPUlRfRSk7DQo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jDQo+IGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYw0KPiBpbmRleCA1MGRkOWQ3MzE0NTYuLjM3Yzhj
ZWNiOWE2YSAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kZGkuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5j
DQo+IEBAIC04NjgsMTEgKzg2OCwxMiBAQCBpY2xfZ2V0X2NvbWJvX2J1Zl90cmFucyhzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZQ0KPiAqZGV2X3ByaXYsIGludCB0eXBlLCBpbnQgcmF0ZSwNCj4gIHN0
YXRpYyBpbnQgaW50ZWxfZGRpX2hkbWlfbGV2ZWwoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2LA0KPiBlbnVtIHBvcnQgcG9ydCkNCj4gIHsNCj4gIAlpbnQgbl9lbnRyaWVzLCBsZXZl
bCwgZGVmYXVsdF9lbnRyeTsNCj4gKwllbnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShk
ZXZfcHJpdiwgcG9ydCk7DQo+ICANCj4gIAlsZXZlbCA9IGRldl9wcml2LT52YnQuZGRpX3BvcnRf
aW5mb1twb3J0XS5oZG1pX2xldmVsX3NoaWZ0Ow0KPiAgDQo+ICAJaWYgKElOVEVMX0dFTihkZXZf
cHJpdikgPj0gMTEpIHsNCj4gLQkJaWYgKGludGVsX3BvcnRfaXNfY29tYm9waHkoZGV2X3ByaXYs
IHBvcnQpKQ0KPiArCQlpZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKQ0KPiAg
CQkJaWNsX2dldF9jb21ib19idWZfdHJhbnMoZGV2X3ByaXYsDQo+IElOVEVMX09VVFBVVF9IRE1J
LA0KPiAgCQkJCQkJMCwgJm5fZW50cmllcyk7DQo+ICAJCWVsc2UNCj4gQEAgLTE0ODcsOSArMTQ4
OCwxMCBAQCBzdGF0aWMgdm9pZCBpY2xfZGRpX2Nsb2NrX2dldChzdHJ1Y3QNCj4gaW50ZWxfZW5j
b2RlciAqZW5jb2RlciwNCj4gIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0
b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsNCj4gIAlzdHJ1Y3QgaW50ZWxfZHBsbF9od19zdGF0
ZSAqcGxsX3N0YXRlID0gJnBpcGVfY29uZmlnLQ0KPiA+ZHBsbF9od19zdGF0ZTsNCj4gIAllbnVt
IHBvcnQgcG9ydCA9IGVuY29kZXItPnBvcnQ7DQo+ICsJZW51bSBwaHkgcGh5ID0gaW50ZWxfcG9y
dF90b19waHkoZGV2X3ByaXYsIHBvcnQpOw0KPiAgCWludCBsaW5rX2Nsb2NrOw0KPiAgDQo+IC0J
aWYgKGludGVsX3BvcnRfaXNfY29tYm9waHkoZGV2X3ByaXYsIHBvcnQpKSB7DQo+ICsJaWYgKGlu
dGVsX3BoeV9pc19jb21ibyhkZXZfcHJpdiwgcGh5KSkgew0KPiAgCQlsaW5rX2Nsb2NrID0gY25s
X2NhbGNfd3JwbGxfbGluayhkZXZfcHJpdiwgcGxsX3N0YXRlKTsNCj4gIAl9IGVsc2Ugew0KPiAg
CQllbnVtIGludGVsX2RwbGxfaWQgcGxsX2lkID0NCj4gaW50ZWxfZ2V0X3NoYXJlZF9kcGxsX2lk
KGRldl9wcml2LA0KPiBAQCAtMjA4Niw2ICsyMDg4LDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfZGRp
X2dldF9wb3dlcl9kb21haW5zKHN0cnVjdA0KPiBpbnRlbF9lbmNvZGVyICplbmNvZGVyLA0KPiAg
ew0KPiAgCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rl
ci0+YmFzZS5kZXYpOw0KPiAgCXN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0Ow0K
PiArCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBlbmNvZGVyLT5w
b3J0KTsNCj4gIA0KPiAgCS8qDQo+ICAJICogVE9ETzogQWRkIHN1cHBvcnQgZm9yIE1TVCBlbmNv
ZGVycy4gQXRtLCB0aGUgZm9sbG93aW5nDQo+IHNob3VsZCBuZXZlcg0KPiBAQCAtMjEwMyw3ICsy
MTA2LDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfZGRpX2dldF9wb3dlcl9kb21haW5zKHN0cnVjdA0K
PiBpbnRlbF9lbmNvZGVyICplbmNvZGVyLA0KPiAgCSAqIHBvcnRzLg0KPiAgCSAqLw0KPiAgCWlm
IChpbnRlbF9jcnRjX2hhc19kcF9lbmNvZGVyKGNydGNfc3RhdGUpIHx8DQo+IC0JICAgIGludGVs
X3BvcnRfaXNfdGMoZGV2X3ByaXYsIGVuY29kZXItPnBvcnQpKQ0KPiArCSAgICBpbnRlbF9waHlf
aXNfdGMoZGV2X3ByaXYsIHBoeSkpDQo+ICAJCWludGVsX2Rpc3BsYXlfcG93ZXJfZ2V0KGRldl9w
cml2LA0KPiAgCQkJCQlpbnRlbF9kZGlfbWFpbl9saW5rX2F1eF9kb21haW4oDQo+IGRpZ19wb3J0
KSk7DQo+ICANCj4gQEAgLTIyMjgsMTAgKzIyMzEsMTEgQEAgdTggaW50ZWxfZGRpX2RwX3ZvbHRh
Z2VfbWF4KHN0cnVjdA0KPiBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQ0KPiAgCXN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOw0KPiAg
CXN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAgPSBlbmNfdG9faW50ZWxfZHAoJmVuY29kZXItPmJh
c2UpOw0KPiAgCWVudW0gcG9ydCBwb3J0ID0gZW5jb2Rlci0+cG9ydDsNCj4gKwllbnVtIHBoeSBw
aHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgcG9ydCk7DQo+ICAJaW50IG5fZW50cmll
czsNCj4gIA0KPiAgCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDExKSB7DQo+IC0JCWlmIChp
bnRlbF9wb3J0X2lzX2NvbWJvcGh5KGRldl9wcml2LCBwb3J0KSkNCj4gKwkJaWYgKGludGVsX3Bo
eV9pc19jb21ibyhkZXZfcHJpdiwgcGh5KSkNCj4gIAkJCWljbF9nZXRfY29tYm9fYnVmX3RyYW5z
KGRldl9wcml2LCBlbmNvZGVyLQ0KPiA+dHlwZSwNCj4gIAkJCQkJCWludGVsX2RwLT5saW5rX3Jh
dGUsDQo+ICZuX2VudHJpZXMpOw0KPiAgCQllbHNlDQo+IEBAIC0yNjY0LDkgKzI2NjgsOSBAQCBz
dGF0aWMgdm9pZCBpY2xfZGRpX3Zzd2luZ19zZXF1ZW5jZShzdHJ1Y3QNCj4gaW50ZWxfZW5jb2Rl
ciAqZW5jb2RlciwNCj4gIAkJCQkgICAgZW51bSBpbnRlbF9vdXRwdXRfdHlwZSB0eXBlKQ0KPiAg
ew0KPiAgCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rl
ci0+YmFzZS5kZXYpOw0KPiAtCWVudW0gcG9ydCBwb3J0ID0gZW5jb2Rlci0+cG9ydDsNCj4gKwll
bnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgZW5jb2Rlci0+cG9ydCk7
DQo+ICANCj4gLQlpZiAoaW50ZWxfcG9ydF9pc19jb21ib3BoeShkZXZfcHJpdiwgcG9ydCkpDQo+
ICsJaWYgKGludGVsX3BoeV9pc19jb21ibyhkZXZfcHJpdiwgcGh5KSkNCj4gIAkJaWNsX2NvbWJv
X3BoeV9kZGlfdnN3aW5nX3NlcXVlbmNlKGVuY29kZXIsIGxldmVsLA0KPiB0eXBlKTsNCj4gIAll
bHNlDQo+ICAJCWljbF9tZ19waHlfZGRpX3Zzd2luZ19zZXF1ZW5jZShlbmNvZGVyLCBsaW5rX2Ns
b2NrLA0KPiBsZXZlbCk7DQo+IEBAIC0yNzI5LDEyICsyNzMzLDEzIEBAIHUzMiBkZGlfc2lnbmFs
X2xldmVscyhzdHJ1Y3QgaW50ZWxfZHANCj4gKmludGVsX2RwKQ0KPiAgDQo+ICBzdGF0aWMgaW5s
aW5lDQo+ICB1MzIgaWNsX2RwY2xrYV9jZmdjcjBfY2xrX29mZihzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYsDQo+IC0JCQkgICAgICBlbnVtIHBvcnQgcG9ydCkNCj4gKwkJCSAgICAg
IGVudW0gcGh5IHBoeSkNCj4gIHsNCj4gLQlpZiAoaW50ZWxfcG9ydF9pc19jb21ib3BoeShkZXZf
cHJpdiwgcG9ydCkpIHsNCj4gLQkJcmV0dXJuIElDTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfT0ZG
KHBvcnQpOw0KPiAtCX0gZWxzZSBpZiAoaW50ZWxfcG9ydF9pc190YyhkZXZfcHJpdiwgcG9ydCkp
IHsNCj4gLQkJZW51bSB0Y19wb3J0IHRjX3BvcnQgPSBpbnRlbF9wb3J0X3RvX3RjKGRldl9wcml2
LA0KPiBwb3J0KTsNCj4gKwlpZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKSB7
DQo+ICsJCXJldHVybiBJQ0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX09GRihwaHkpOw0KPiArCX0g
ZWxzZSBpZiAoaW50ZWxfcGh5X2lzX3RjKGRldl9wcml2LCBwaHkpKSB7DQo+ICsJCWVudW0gdGNf
cG9ydCB0Y19wb3J0ID0gaW50ZWxfcG9ydF90b190YyhkZXZfcHJpdiwNCj4gKwkJCQkJCQkoZW51
bQ0KPiBwb3J0KXBoeSk7DQo+ICANCj4gIAkJcmV0dXJuIElDTF9EUENMS0FfQ0ZHQ1IwX1RDX0NM
S19PRkYodGNfcG9ydCk7DQo+ICAJfQ0KPiBAQCAtMjg3Niw2ICsyODgxLDcgQEAgc3RhdGljIHZv
aWQgaW50ZWxfZGRpX2Nsa19zZWxlY3Qoc3RydWN0DQo+IGludGVsX2VuY29kZXIgKmVuY29kZXIs
DQo+ICB7DQo+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShl
bmNvZGVyLT5iYXNlLmRldik7DQo+ICAJZW51bSBwb3J0IHBvcnQgPSBlbmNvZGVyLT5wb3J0Ow0K
PiArCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBwb3J0KTsNCj4g
IAl1MzIgdmFsOw0KPiAgCWNvbnN0IHN0cnVjdCBpbnRlbF9zaGFyZWRfZHBsbCAqcGxsID0gY3J0
Y19zdGF0ZS0+c2hhcmVkX2RwbGw7DQo+ICANCj4gQEAgLTI4ODUsNyArMjg5MSw3IEBAIHN0YXRp
YyB2b2lkIGludGVsX2RkaV9jbGtfc2VsZWN0KHN0cnVjdA0KPiBpbnRlbF9lbmNvZGVyICplbmNv
ZGVyLA0KPiAgCW11dGV4X2xvY2soJmRldl9wcml2LT5kcGxsX2xvY2spOw0KPiAgDQo+ICAJaWYg
KElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTEpIHsNCj4gLQkJaWYgKCFpbnRlbF9wb3J0X2lzX2Nv
bWJvcGh5KGRldl9wcml2LCBwb3J0KSkNCj4gKwkJaWYgKCFpbnRlbF9waHlfaXNfY29tYm8oZGV2
X3ByaXYsIHBoeSkpDQo+ICAJCQlJOTE1X1dSSVRFKERESV9DTEtfU0VMKHBvcnQpLA0KPiAgCQkJ
CSAgIGljbF9wbGxfdG9fZGRpX2Nsa19zZWwoZW5jb2RlciwNCj4gY3J0Y19zdGF0ZSkpOw0KPiAg
CX0gZWxzZSBpZiAoSVNfQ0FOTk9OTEFLRShkZXZfcHJpdikpIHsNCj4gQEAgLTI5MjUsOSArMjkz
MSwxMCBAQCBzdGF0aWMgdm9pZCBpbnRlbF9kZGlfY2xrX2Rpc2FibGUoc3RydWN0DQo+IGludGVs
X2VuY29kZXIgKmVuY29kZXIpDQo+ICB7DQo+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7DQo+ICAJZW51bSBwb3J0IHBvcnQg
PSBlbmNvZGVyLT5wb3J0Ow0KPiArCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRl
dl9wcml2LCBwb3J0KTsNCj4gIA0KPiAgCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDExKSB7
DQo+IC0JCWlmICghaW50ZWxfcG9ydF9pc19jb21ib3BoeShkZXZfcHJpdiwgcG9ydCkpDQo+ICsJ
CWlmICghaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKQ0KPiAgCQkJSTkxNV9XUklU
RShERElfQ0xLX1NFTChwb3J0KSwNCj4gRERJX0NMS19TRUxfTk9ORSk7DQo+ICAJfSBlbHNlIGlm
IChJU19DQU5OT05MQUtFKGRldl9wcml2KSkgew0KPiAgCQlJOTE1X1dSSVRFKERQQ0xLQV9DRkdD
UjAsIEk5MTVfUkVBRChEUENMS0FfQ0ZHQ1IwKSB8DQo+IEBAIC0zMTM0LDcgKzMxNDEsNyBAQCBz
dGF0aWMgdm9pZCBpbnRlbF9kZGlfcHJlX2VuYWJsZV9kcChzdHJ1Y3QNCj4gaW50ZWxfZW5jb2Rl
ciAqZW5jb2RlciwNCj4gIA0KPiAgCWludGVsX2RkaV9jbGtfc2VsZWN0KGVuY29kZXIsIGNydGNf
c3RhdGUpOw0KPiAgDQo+IC0JaWYgKCFpbnRlbF9wb3J0X2lzX3RjKGRldl9wcml2LCBwb3J0KSB8
fA0KPiArCWlmICghaW50ZWxfcGh5X2lzX3RjKGRldl9wcml2LCBwaHkpIHx8DQo+ICAJICAgIGRp
Z19wb3J0LT50Y19tb2RlICE9IFRDX1BPUlRfVEJUX0FMVCkNCj4gIAkJaW50ZWxfZGlzcGxheV9w
b3dlcl9nZXQoZGV2X3ByaXYsDQo+ICAJCQkJCWRpZ19wb3J0LT5kZGlfaW9fcG93ZXJfZG9tYWlu
KTsNCj4gQEAgLTMxNTIsNyArMzE1OSw3IEBAIHN0YXRpYyB2b2lkIGludGVsX2RkaV9wcmVfZW5h
YmxlX2RwKHN0cnVjdA0KPiBpbnRlbF9lbmNvZGVyICplbmNvZGVyLA0KPiAgCWVsc2UNCj4gIAkJ
aW50ZWxfcHJlcGFyZV9kcF9kZGlfYnVmZmVycyhlbmNvZGVyLCBjcnRjX3N0YXRlKTsNCj4gIA0K
PiAtCWlmIChpbnRlbF9wb3J0X2lzX2NvbWJvcGh5KGRldl9wcml2LCBwb3J0KSkgew0KPiArCWlm
IChpbnRlbF9waHlfaXNfY29tYm8oZGV2X3ByaXYsIHBoeSkpIHsNCj4gIAkJYm9vbCBsYW5lX3Jl
dmVyc2FsID0NCj4gIAkJCWRpZ19wb3J0LT5zYXZlZF9wb3J0X2JpdHMgJg0KPiBERElfQlVGX1BP
UlRfUkVWRVJTQUw7DQo+ICANCj4gQEAgLTMzMDQsNiArMzMxMSw3IEBAIHN0YXRpYyB2b2lkIGlu
dGVsX2RkaV9wb3N0X2Rpc2FibGVfZHAoc3RydWN0DQo+IGludGVsX2VuY29kZXIgKmVuY29kZXIs
DQo+ICAJc3RydWN0IGludGVsX2RwICppbnRlbF9kcCA9ICZkaWdfcG9ydC0+ZHA7DQo+ICAJYm9v
bCBpc19tc3QgPSBpbnRlbF9jcnRjX2hhc190eXBlKG9sZF9jcnRjX3N0YXRlLA0KPiAgCQkJCQkg
IElOVEVMX09VVFBVVF9EUF9NU1QpOw0KPiArCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9f
cGh5KGRldl9wcml2LCBlbmNvZGVyLT5wb3J0KTsNCj4gIA0KPiAgCWlmICghaXNfbXN0KSB7DQo+
ICAJCWludGVsX2RkaV9kaXNhYmxlX3BpcGVfY2xvY2sob2xkX2NydGNfc3RhdGUpOw0KPiBAQCAt
MzMxOSw3ICszMzI3LDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfZGRpX3Bvc3RfZGlzYWJsZV9kcChz
dHJ1Y3QNCj4gaW50ZWxfZW5jb2RlciAqZW5jb2RlciwNCj4gIAlpbnRlbF9lZHBfcGFuZWxfdmRk
X29uKGludGVsX2RwKTsNCj4gIAlpbnRlbF9lZHBfcGFuZWxfb2ZmKGludGVsX2RwKTsNCj4gIA0K
PiAtCWlmICghaW50ZWxfcG9ydF9pc190YyhkZXZfcHJpdiwgZW5jb2Rlci0+cG9ydCkgfHwNCj4g
KwlpZiAoIWludGVsX3BoeV9pc190YyhkZXZfcHJpdiwgcGh5KSB8fA0KPiAgCSAgICBkaWdfcG9y
dC0+dGNfbW9kZSAhPSBUQ19QT1JUX1RCVF9BTFQpDQo+ICAJCWludGVsX2Rpc3BsYXlfcG93ZXJf
cHV0X3VuY2hlY2tlZChkZXZfcHJpdiwNCj4gIAkJCQkJCSAgZGlnX3BvcnQtDQo+ID5kZGlfaW9f
cG93ZXJfZG9tYWluKTsNCj4gQEAgLTM2NjksOCArMzY3Nyw5IEBAIGludGVsX2RkaV9wcmVfcGxs
X2VuYWJsZShzdHJ1Y3QgaW50ZWxfZW5jb2Rlcg0KPiAqZW5jb2RlciwNCj4gIHsNCj4gIAlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2
KTsNCj4gIAlzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCA9IGVuY190b19kaWdf
cG9ydCgmZW5jb2Rlci0NCj4gPmJhc2UpOw0KPiAtCWJvb2wgaXNfdGNfcG9ydCA9IGludGVsX3Bv
cnRfaXNfdGMoZGV2X3ByaXYsIGVuY29kZXItPnBvcnQpOw0KPiAgCWVudW0gcG9ydCBwb3J0ID0g
ZW5jb2Rlci0+cG9ydDsNCj4gKwllbnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZf
cHJpdiwgcG9ydCk7DQo+ICsJYm9vbCBpc190Y19wb3J0ID0gaW50ZWxfcGh5X2lzX3RjKGRldl9w
cml2LCBwaHkpOw0KPiAgDQo+ICAJaWYgKGlzX3RjX3BvcnQpDQo+ICAJCWludGVsX3RjX3BvcnRf
Z2V0X2xpbmsoZGlnX3BvcnQsIGNydGNfc3RhdGUtDQo+ID5sYW5lX2NvdW50KTsNCj4gQEAgLTM3
MDAsNyArMzcwOSw4IEBAIGludGVsX2RkaV9wb3N0X3BsbF9kaXNhYmxlKHN0cnVjdCBpbnRlbF9l
bmNvZGVyDQo+ICplbmNvZGVyLA0KPiAgew0KPiAgCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOw0KPiAgCXN0cnVjdCBpbnRlbF9k
aWdpdGFsX3BvcnQgKmRpZ19wb3J0ID0gZW5jX3RvX2RpZ19wb3J0KCZlbmNvZGVyLQ0KPiA+YmFz
ZSk7DQo+IC0JYm9vbCBpc190Y19wb3J0ID0gaW50ZWxfcG9ydF9pc190YyhkZXZfcHJpdiwgZW5j
b2Rlci0+cG9ydCk7DQo+ICsJZW51bSBwaHkgcGh5ID0gaW50ZWxfcG9ydF90b19waHkoZGV2X3By
aXYsIGVuY29kZXItPnBvcnQpOw0KPiArCWJvb2wgaXNfdGNfcG9ydCA9IGludGVsX3BoeV9pc190
YyhkZXZfcHJpdiwgcGh5KTsNCj4gIA0KPiAgCWlmIChpbnRlbF9jcnRjX2hhc19kcF9lbmNvZGVy
KGNydGNfc3RhdGUpIHx8IGlzX3RjX3BvcnQpDQo+ICAJCWludGVsX2Rpc3BsYXlfcG93ZXJfcHV0
X3VuY2hlY2tlZChkZXZfcHJpdiwNCj4gQEAgLTQyMTQsNiArNDIyNCw3IEBAIHZvaWQgaW50ZWxf
ZGRpX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUNCj4gKmRldl9wcml2LCBlbnVtIHBvcnQg
cG9ydCkNCj4gIAlzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXI7DQo+ICAJYm9vbCBpbml0X2hk
bWksIGluaXRfZHAsIGluaXRfbHNwY29uID0gZmFsc2U7DQo+ICAJZW51bSBwaXBlIHBpcGU7DQo+
ICsJZW51bSBwaHkgcGh5ID0gaW50ZWxfcG9ydF90b19waHkoZGV2X3ByaXYsIHBvcnQpOw0KPiAg
DQo+ICAJaW5pdF9oZG1pID0gcG9ydF9pbmZvLT5zdXBwb3J0c19kdmkgfHwgcG9ydF9pbmZvLQ0K
PiA+c3VwcG9ydHNfaGRtaTsNCj4gIAlpbml0X2RwID0gcG9ydF9pbmZvLT5zdXBwb3J0c19kcDsN
Cj4gQEAgLTQyNzcsNyArNDI4OCw3IEBAIHZvaWQgaW50ZWxfZGRpX2luaXQoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUNCj4gKmRldl9wcml2LCBlbnVtIHBvcnQgcG9ydCkNCj4gIAlpbnRlbF9kaWdf
cG9ydC0+bWF4X2xhbmVzID0NCj4gaW50ZWxfZGRpX21heF9sYW5lcyhpbnRlbF9kaWdfcG9ydCk7
DQo+ICAJaW50ZWxfZGlnX3BvcnQtPmF1eF9jaCA9IGludGVsX2Jpb3NfcG9ydF9hdXhfY2goZGV2
X3ByaXYsDQo+IHBvcnQpOw0KPiAgDQo+IC0JaWYgKGludGVsX3BvcnRfaXNfdGMoZGV2X3ByaXYs
IHBvcnQpKSB7DQo+ICsJaWYgKGludGVsX3BoeV9pc190YyhkZXZfcHJpdiwgcGh5KSkgew0KPiAg
CQlib29sIGlzX2xlZ2FjeSA9ICFwb3J0X2luZm8tPnN1cHBvcnRzX3R5cGVjX3VzYiAmJg0KPiAg
CQkJCSAhcG9ydF9pbmZvLT5zdXBwb3J0c190YnQ7DQo+ICANCj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jDQo+IGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMNCj4gaW5kZXggNGE4NWFiZWY5M2U3Li41
NTA1MzBjYzJkMjQgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGlzcGxheS5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheS5jDQo+IEBAIC02NjQ5LDIwICs2NjQ5LDYgQEAgc3RhdGljIHZvaWQgaTl4eF9w
Zml0X2VuYWJsZShjb25zdCBzdHJ1Y3QNCj4gaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkN
Cj4gIAlJOTE1X1dSSVRFKEJDTFJQQVQoY3J0Yy0+cGlwZSksIDApOw0KPiAgfQ0KPiAgDQo+IC1i
b29sIGludGVsX3BvcnRfaXNfY29tYm9waHkoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LCBlbnVtDQo+IHBvcnQgcG9ydCkNCj4gLXsNCj4gLQlpZiAocG9ydCA9PSBQT1JUX05PTkUp
DQo+IC0JCXJldHVybiBmYWxzZTsNCj4gLQ0KPiAtCWlmIChJU19FTEtIQVJUTEFLRShkZXZfcHJp
dikpDQo+IC0JCXJldHVybiBwb3J0IDw9IFBPUlRfQzsNCj4gLQ0KPiAtCWlmIChJTlRFTF9HRU4o
ZGV2X3ByaXYpID49IDExKQ0KPiAtCQlyZXR1cm4gcG9ydCA8PSBQT1JUX0I7DQo+IC0NCj4gLQly
ZXR1cm4gZmFsc2U7DQo+IC19DQo+IC0NCj4gIGJvb2wgaW50ZWxfcGh5X2lzX2NvbWJvKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgZW51bSBwaHkNCj4gcGh5KQ0KPiAgew0KPiAg
CWlmIChwaHkgPT0gUEhZX05PTkUpDQo+IEBAIC02Njc3LDE0ICs2NjYzLDYgQEAgYm9vbCBpbnRl
bF9waHlfaXNfY29tYm8oc3RydWN0DQo+IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBlbnVt
IHBoeSBwaHkpDQo+ICAJcmV0dXJuIGZhbHNlOw0KPiAgfQ0KPiAgDQo+IC1ib29sIGludGVsX3Bv
cnRfaXNfdGMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBlbnVtIHBvcnQNCj4g
cG9ydCkNCj4gLXsNCj4gLQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMSAmJiAhSVNfRUxL
SEFSVExBS0UoZGV2X3ByaXYpKQ0KPiAtCQlyZXR1cm4gcG9ydCA+PSBQT1JUX0MgJiYgcG9ydCA8
PSBQT1JUX0Y7DQo+IC0NCj4gLQlyZXR1cm4gZmFsc2U7DQo+IC19DQo+IC0NCj4gIGJvb2wgaW50
ZWxfcGh5X2lzX3RjKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgZW51bSBwaHkN
Cj4gcGh5KQ0KPiAgew0KPiAgCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDExICYmICFJU19F
TEtIQVJUTEFLRShkZXZfcHJpdikpDQo+IEBAIC02NzM0LDggKzY3MTIsOSBAQCBlbnVtIGludGVs
X2Rpc3BsYXlfcG93ZXJfZG9tYWluDQo+ICBpbnRlbF9hdXhfcG93ZXJfZG9tYWluKHN0cnVjdCBp
bnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0KQ0KPiAgew0KPiAgCXN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZGlnX3BvcnQtDQo+ID5iYXNlLmJhc2UuZGV2KTsN
Cj4gKwllbnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgZGlnX3BvcnQt
DQo+ID5iYXNlLnBvcnQpOw0KPiAgDQo+IC0JaWYgKGludGVsX3BvcnRfaXNfdGMoZGV2X3ByaXYs
IGRpZ19wb3J0LT5iYXNlLnBvcnQpICYmDQo+ICsJaWYgKGludGVsX3BoeV9pc190YyhkZXZfcHJp
diwgcGh5KSAmJg0KPiAgCSAgICBkaWdfcG9ydC0+dGNfbW9kZSA9PSBUQ19QT1JUX1RCVF9BTFQp
IHsNCj4gIAkJc3dpdGNoIChkaWdfcG9ydC0+YXV4X2NoKSB7DQo+ICAJCWNhc2UgQVVYX0NIX0M6
DQo+IEBAIC0xMDA2OSwxNiArMTAwNDgsMTcgQEAgc3RhdGljIHZvaWQgaWNlbGFrZV9nZXRfZGRp
X3BsbChzdHJ1Y3QNCj4gZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsDQo+ICAJCQkJZW51bSBw
b3J0IHBvcnQsDQo+ICAJCQkJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnKQ0K
PiAgew0KPiArCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBwb3J0
KTsNCj4gIAllbnVtIGljbF9wb3J0X2RwbGxfaWQgcG9ydF9kcGxsX2lkOw0KPiAgCWVudW0gaW50
ZWxfZHBsbF9pZCBpZDsNCj4gIAl1MzIgdGVtcDsNCj4gIA0KPiAtCWlmIChpbnRlbF9wb3J0X2lz
X2NvbWJvcGh5KGRldl9wcml2LCBwb3J0KSkgew0KPiArCWlmIChpbnRlbF9waHlfaXNfY29tYm8o
ZGV2X3ByaXYsIHBoeSkpIHsNCj4gIAkJdGVtcCA9IEk5MTVfUkVBRChEUENMS0FfQ0ZHQ1IwX0lD
TCkgJg0KPiAtCQkgICAgICAgRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NFTF9NQVNLKHBvcnQpOw0K
PiAtCQlpZCA9IHRlbXAgPj4gRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NFTF9TSElGVChwb3J0KTsN
Cj4gKwkJCUlDTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX01BU0socGh5KTsNCj4gKwkJaWQg
PSB0ZW1wID4+IElDTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX1NISUZUKHBoeSk7DQo+ICAJ
CXBvcnRfZHBsbF9pZCA9IElDTF9QT1JUX0RQTExfREVGQVVMVDsNCj4gLQl9IGVsc2UgaWYgKGlu
dGVsX3BvcnRfaXNfdGMoZGV2X3ByaXYsIHBvcnQpKSB7DQo+ICsJfSBlbHNlIGlmIChpbnRlbF9w
aHlfaXNfdGMoZGV2X3ByaXYsIHBoeSkpIHsNCj4gIAkJdTMyIGNsa19zZWwgPSBJOTE1X1JFQUQo
RERJX0NMS19TRUwocG9ydCkpICYNCj4gRERJX0NMS19TRUxfTUFTSzsNCj4gIA0KPiAgCQlpZiAo
Y2xrX3NlbCA9PSBERElfQ0xLX1NFTF9NRykgew0KPiBAQCAtMTY5MzUsOSArMTY5MTUsMTEgQEAg
aW50ZWxfbW9kZXNldF9zZXR1cF9od19zdGF0ZShzdHJ1Y3QNCj4gZHJtX2RldmljZSAqZGV2LA0K
PiAgDQo+ICAJLyogU2FuaXRpemUgdGhlIFR5cGVDIHBvcnQgbW9kZSB1cGZyb250LCBlbmNvZGVy
cyBkZXBlbmQgb24NCj4gdGhpcyAqLw0KPiAgCWZvcl9lYWNoX2ludGVsX2VuY29kZXIoZGV2LCBl
bmNvZGVyKSB7DQo+ICsJCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2
LCBlbmNvZGVyLQ0KPiA+cG9ydCk7DQo+ICsNCj4gIAkJLyogV2UgbmVlZCB0byBzYW5pdGl6ZSBv
bmx5IHRoZSBNU1QgcHJpbWFyeSBwb3J0LiAqLw0KPiAgCQlpZiAoZW5jb2Rlci0+dHlwZSAhPSBJ
TlRFTF9PVVRQVVRfRFBfTVNUICYmDQo+IC0JCSAgICBpbnRlbF9wb3J0X2lzX3RjKGRldl9wcml2
LCBlbmNvZGVyLT5wb3J0KSkNCj4gKwkJICAgIGludGVsX3BoeV9pc190YyhkZXZfcHJpdiwgcGh5
KSkNCj4gIAkJCWludGVsX3RjX3BvcnRfc2FuaXRpemUoZW5jX3RvX2RpZ19wb3J0KCZlbmNvZGVy
DQo+IC0+YmFzZSkpOw0KPiAgCX0NCj4gIA0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMNCj4gYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYw0KPiBpbmRleCA2NDYyN2MxMTdjMzEu
LjBmNmVhNGQ2ZDFlZiAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMNCj4gQEAgLTQ4Nyw3ICs0ODcsOSBAQCBzdGF0aWMg
dm9pZCBpY2xfdGNfcG9ydF9hc3NlcnRfcmVmX2hlbGQoc3RydWN0DQo+IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2LA0KPiAgCWF1eF9jaCA9IGljbF90Y19waHlfYXV4X2NoKGRldl9wcml2LCBw
b3dlcl93ZWxsKTsNCj4gIA0KPiAgCWZvcl9lYWNoX2ludGVsX2VuY29kZXIoJmRldl9wcml2LT5k
cm0sIGVuY29kZXIpIHsNCj4gLQkJaWYgKCFpbnRlbF9wb3J0X2lzX3RjKGRldl9wcml2LCBlbmNv
ZGVyLT5wb3J0KSkNCj4gKwkJZW51bSBwaHkgcGh5ID0gaW50ZWxfcG9ydF90b19waHkoZW5jb2Rl
ci0+cG9ydCk7DQo+ICsNCj4gKwkJaWYgKCFpbnRlbF9waHlfaXNfdGMoZGV2X3ByaXYsIHBoeSkp
DQo+ICAJCQljb250aW51ZTsNCj4gIA0KPiAgCQkvKiBXZSdsbCBjaGVjayB0aGUgTVNUIHByaW1h
cnkgcG9ydCAqLw0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kcC5jDQo+IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jDQo+
IGluZGV4IDhmNzE4OGQ3MWQwOC4uNjc2MDNhMjQ3ZThhIDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jDQo+IEBAIC0yOTcsOSArMjk3LDkgQEAgc3RhdGljIGlu
dCBpY2xfbWF4X3NvdXJjZV9yYXRlKHN0cnVjdCBpbnRlbF9kcA0KPiAqaW50ZWxfZHApDQo+ICB7
DQo+ICAJc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqZGlnX3BvcnQgPSBkcF90b19kaWdfcG9y
dChpbnRlbF9kcCk7DQo+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9f
aTkxNShkaWdfcG9ydC0NCj4gPmJhc2UuYmFzZS5kZXYpOw0KPiAtCWVudW0gcG9ydCBwb3J0ID0g
ZGlnX3BvcnQtPmJhc2UucG9ydDsNCj4gKwllbnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3Bo
eShkZXZfcHJpdiwgZGlnX3BvcnQtDQo+ID5iYXNlLnBvcnQpOw0KPiAgDQo+IC0JaWYgKGludGVs
X3BvcnRfaXNfY29tYm9waHkoZGV2X3ByaXYsIHBvcnQpICYmDQo+ICsJaWYgKGludGVsX3BoeV9p
c19jb21ibyhkZXZfcHJpdiwgcGh5KSAmJg0KPiAgCSAgICAhSVNfRUxLSEFSVExBS0UoZGV2X3By
aXYpICYmDQo+ICAJICAgICFpbnRlbF9kcF9pc19lZHAoaW50ZWxfZHApKQ0KPiAgCQlyZXR1cm4g
NTQwMDAwOw0KPiBAQCAtMTE5Miw3ICsxMTkyLDggQEAgaW50ZWxfZHBfYXV4X3hmZXIoc3RydWN0
IGludGVsX2RwICppbnRlbF9kcCwNCj4gIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9
DQo+ICAJCQl0b19pOTE1KGludGVsX2RpZ19wb3J0LT5iYXNlLmJhc2UuZGV2KTsNCj4gIAlzdHJ1
Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSAmaTkxNS0+dW5jb3JlOw0KPiAtCWJvb2wgaXNfdGNf
cG9ydCA9IGludGVsX3BvcnRfaXNfdGMoaTkxNSwgaW50ZWxfZGlnX3BvcnQtDQo+ID5iYXNlLnBv
cnQpOw0KPiArCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGk5MTUsIGludGVsX2Rp
Z19wb3J0LQ0KPiA+YmFzZS5wb3J0KTsNCj4gKwlib29sIGlzX3RjX3BvcnQgPSBpbnRlbF9waHlf
aXNfdGMoaTkxNSwgcGh5KTsNCj4gIAlpOTE1X3JlZ190IGNoX2N0bCwgY2hfZGF0YVs1XTsNCj4g
IAl1MzIgYXV4X2Nsb2NrX2RpdmlkZXI7DQo+ICAJZW51bSBpbnRlbF9kaXNwbGF5X3Bvd2VyX2Rv
bWFpbiBhdXhfZG9tYWluID0NCj4gQEAgLTUyMTEsMTAgKzUyMTIsMTEgQEAgc3RhdGljIGJvb2wg
aWNsX2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQoc3RydWN0DQo+IGludGVsX2VuY29kZXIgKmVuY29k
ZXIpDQo+ICB7DQo+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkx
NShlbmNvZGVyLT5iYXNlLmRldik7DQo+ICAJc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqZGln
X3BvcnQgPSBlbmNfdG9fZGlnX3BvcnQoJmVuY29kZXItDQo+ID5iYXNlKTsNCj4gKwllbnVtIHBo
eSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgZW5jb2Rlci0+cG9ydCk7DQo+ICAN
Cj4gLQlpZiAoaW50ZWxfcG9ydF9pc19jb21ib3BoeShkZXZfcHJpdiwgZW5jb2Rlci0+cG9ydCkp
DQo+ICsJaWYgKGludGVsX3BoeV9pc19jb21ibyhkZXZfcHJpdiwgcGh5KSkNCj4gIAkJcmV0dXJu
IGljbF9jb21ib19wb3J0X2Nvbm5lY3RlZChkZXZfcHJpdiwgZGlnX3BvcnQpOw0KPiAtCWVsc2Ug
aWYgKGludGVsX3BvcnRfaXNfdGMoZGV2X3ByaXYsIGVuY29kZXItPnBvcnQpKQ0KPiArCWVsc2Ug
aWYgKGludGVsX3BoeV9pc190YyhkZXZfcHJpdiwgcGh5KSkNCj4gIAkJcmV0dXJuIGludGVsX3Rj
X3BvcnRfY29ubmVjdGVkKGRpZ19wb3J0KTsNCj4gIAllbHNlDQo+ICAJCU1JU1NJTkdfQ0FTRShl
bmNvZGVyLT5ocGRfcGluKTsNCj4gQEAgLTcxMTgsNiArNzEyMCw3IEBAIGludGVsX2RwX2luaXRf
Y29ubmVjdG9yKHN0cnVjdA0KPiBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0LA0K
PiAgCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBpbnRlbF9lbmNvZGVyLT5iYXNlLmRldjsNCj4g
IAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGRldik7DQo+ICAJ
ZW51bSBwb3J0IHBvcnQgPSBpbnRlbF9lbmNvZGVyLT5wb3J0Ow0KPiArCWVudW0gcGh5IHBoeSA9
IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBwb3J0KTsNCj4gIAlpbnQgdHlwZTsNCj4gIA0K
PiAgCS8qIEluaXRpYWxpemUgdGhlIHdvcmsgZm9yIG1vZGVzZXQgaW4gY2FzZSBvZiBsaW5rIHRy
YWluDQo+IGZhaWx1cmUgKi8NCj4gQEAgLTcxNDQsNyArNzE0Nyw3IEBAIGludGVsX2RwX2luaXRf
Y29ubmVjdG9yKHN0cnVjdA0KPiBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0LA0K
PiAgCQkgKiBDdXJyZW50bHkgd2UgZG9uJ3Qgc3VwcG9ydCBlRFAgb24gVHlwZUMgcG9ydHMsDQo+
IGFsdGhvdWdoIGluDQo+ICAJCSAqIHRoZW9yeSBpdCBjb3VsZCB3b3JrIG9uIFR5cGVDIGxlZ2Fj
eSBwb3J0cy4NCj4gIAkJICovDQo+IC0JCVdBUk5fT04oaW50ZWxfcG9ydF9pc190YyhkZXZfcHJp
diwgcG9ydCkpOw0KPiArCQlXQVJOX09OKGludGVsX3BoeV9pc190YyhkZXZfcHJpdiwgcGh5KSk7
DQo+ICAJCXR5cGUgPSBEUk1fTU9ERV9DT05ORUNUT1JfZURQOw0KPiAgCX0gZWxzZSB7DQo+ICAJ
CXR5cGUgPSBEUk1fTU9ERV9DT05ORUNUT1JfRGlzcGxheVBvcnQ7DQo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwbGxfbWdyLmMNCj4gYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwbGxfbWdyLmMNCj4gaW5kZXggZjk1Mzk3MWU3
YzNiLi5mODc4MmMyNGM0NDcgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZHBsbF9tZ3IuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2RwbGxfbWdyLmMNCj4gQEAgLTI1ODAsNyArMjU4MCw4IEBAIHN0YXRpYyBib29s
IGljbF9jYWxjX2RwbGxfc3RhdGUoc3RydWN0DQo+IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3Rh
dGUsDQo+ICAJc3RydWN0IHNrbF93cnBsbF9wYXJhbXMgcGxsX3BhcmFtcyA9IHsgMCB9Ow0KPiAg
CWJvb2wgcmV0Ow0KPiAgDQo+IC0JaWYgKGludGVsX3BvcnRfaXNfdGMoZGV2X3ByaXYsIGVuY29k
ZXItPnBvcnQpKQ0KPiArCWlmIChpbnRlbF9waHlfaXNfdGMoZGV2X3ByaXYsIGludGVsX3BvcnRf
dG9fcGh5KGRldl9wcml2LA0KPiArCQkJCQkJCWVuY29kZXItDQo+ID5wb3J0KSkpDQo+ICAJCXJl
dCA9IGljbF9jYWxjX3RidF9wbGwoY3J0Y19zdGF0ZSwgJnBsbF9wYXJhbXMpOw0KPiAgCWVsc2Ug
aWYgKGludGVsX2NydGNfaGFzX3R5cGUoY3J0Y19zdGF0ZSwgSU5URUxfT1VUUFVUX0hETUkpIHx8
DQo+ICAJCSBpbnRlbF9jcnRjX2hhc190eXBlKGNydGNfc3RhdGUsIElOVEVMX09VVFBVVF9EU0kp
KQ0KPiBAQCAtMjk5MywxNCArMjk5NCwxNCBAQCBzdGF0aWMgYm9vbCBpY2xfZ2V0X2RwbGxzKHN0
cnVjdA0KPiBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLA0KPiAgCQkJICBzdHJ1Y3QgaW50ZWxf
ZW5jb2RlciAqZW5jb2RlcikNCj4gIHsNCj4gIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7DQo+IC0JZW51bSBwb3J0IHBvcnQgPSBl
bmNvZGVyLT5wb3J0Ow0KPiArCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9w
cml2LCBlbmNvZGVyLT5wb3J0KTsNCj4gIA0KPiAtCWlmIChpbnRlbF9wb3J0X2lzX2NvbWJvcGh5
KGRldl9wcml2LCBwb3J0KSkNCj4gKwlpZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBw
aHkpKQ0KPiAgCQlyZXR1cm4gaWNsX2dldF9jb21ib19waHlfZHBsbChzdGF0ZSwgY3J0YywgZW5j
b2Rlcik7DQo+IC0JZWxzZSBpZiAoaW50ZWxfcG9ydF9pc190YyhkZXZfcHJpdiwgcG9ydCkpDQo+
ICsJZWxzZSBpZiAoaW50ZWxfcGh5X2lzX3RjKGRldl9wcml2LCBwaHkpKQ0KPiAgCQlyZXR1cm4g
aWNsX2dldF90Y19waHlfZHBsbHMoc3RhdGUsIGNydGMsIGVuY29kZXIpOw0KPiAgDQo+IC0JTUlT
U0lOR19DQVNFKHBvcnQpOw0KPiArCU1JU1NJTkdfQ0FTRShwaHkpOw0KPiAgDQo+ICAJcmV0dXJu
IGZhbHNlOw0KPiAgfQ0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
ZHJ2LmgNCj4gYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcnYuaA0KPiBpbmRleCA4MTVj
MjZjMGI5OGMuLjc3MGY5ZjZhYWQ4NCAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfZHJ2LmgNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJ2LmgN
Cj4gQEAgLTE0OTIsOSArMTQ5Miw3IEBAIHZvaWQgaW50ZWxfcHBzX3VubG9ja19yZWdzX3dhKHN0
cnVjdA0KPiBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7DQo+ICB2b2lkIGludGVsX2VuY29k
ZXJfZGVzdHJveShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpOw0KPiAgc3RydWN0IGRybV9k
aXNwbGF5X21vZGUgKg0KPiAgaW50ZWxfZW5jb2Rlcl9jdXJyZW50X21vZGUoc3RydWN0IGludGVs
X2VuY29kZXIgKmVuY29kZXIpOw0KPiAtYm9vbCBpbnRlbF9wb3J0X2lzX2NvbWJvcGh5KHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgZW51bQ0KPiBwb3J0IHBvcnQpOw0KPiAgYm9v
bCBpbnRlbF9waHlfaXNfY29tYm8oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBl
bnVtIHBoeQ0KPiBwaHkpOw0KPiAtYm9vbCBpbnRlbF9wb3J0X2lzX3RjKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdiwgZW51bSBwb3J0DQo+IHBvcnQpOw0KPiAgYm9vbCBpbnRlbF9w
aHlfaXNfdGMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBlbnVtIHBoeQ0KPiBw
aHkpOw0KPiAgZW51bSB0Y19wb3J0IGludGVsX3BvcnRfdG9fdGMoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2LA0KPiAgCQkJICAgICAgZW51bSBwb3J0IHBvcnQpOw0KX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcg
bGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRl
c2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 69453BB263
	for <lists+intel-gfx@lfdr.de>; Mon, 23 Sep 2019 12:44:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 99ED9891BA;
	Mon, 23 Sep 2019 10:44:05 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 41D00891BA
 for <intel-gfx@lists.freedesktop.org>; Mon, 23 Sep 2019 10:44:04 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 23 Sep 2019 03:44:03 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,539,1559545200"; d="scan'208";a="213281388"
Received: from kgalazka-mobl.ger.corp.intel.com (HELO [10.252.3.235])
 ([10.252.3.235])
 by fmsmga004.fm.intel.com with ESMTP; 23 Sep 2019 03:44:02 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20190921095542.23205-2-chris@chris-wilson.co.uk>
 <20190923103231.27025-1-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <1f394138-6479-c39c-394d-7e5795a1d3e1@linux.intel.com>
Date: Mon, 23 Sep 2019 11:44:01 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190923103231.27025-1-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH v2] drm/i915: Only enqueue already completed
 requests
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDIzLzA5LzIwMTkgMTE6MzIsIENocmlzIFdpbHNvbiB3cm90ZToKPiBJZiB3ZSBhcmUgYXNr
ZWQgdG8gc3VibWl0IGEgY29tcGxldGVkIHJlcXVlc3QsIGp1c3QgbW92ZSBpdCBvbnRvIHRoZQo+
IGFjdGl2ZS1saXN0IHdpdGhvdXQgbW9kaWZ5aW5nIGl0J3MgcGF5bG9hZC4gSWYgd2UgdHJ5IHRv
IGVtaXQgdGhlCj4gbW9kaWZpZWQgcGF5bG9hZCBvZiBhIGNvbXBsZXRlZCByZXF1ZXN0LCB3ZSBy
aXNrIHJhY2luZyB3aXRoIHRoZQo+IHJpbmctPmhlYWQgdXBkYXRlIGR1cmluZyByZXRpcmVtZW50
IHdoaWNoIG1heSBhZHZhbmNlIHRoZSBoZWFkIHBhc3Qgb3VyCj4gYnJlYWRjcnVtYiBhbmQgc28g
d2UgZ2VuZXJhdGUgYSB3YXJuaW5nIGZvciB0aGUgZW1pc3Npb24gYmVpbmcgYmVoaW5kCj4gdGhl
IFJJTkdfSEVBRC4KPiAKPiB2MjogQ29tbWVudGFyeSBmb3IgdGhlIHNuZWFreSwgc2hhcmVkIHJl
c3BvbnNpYmlsaXR5IGJldHdlZW4gZnVuY3Rpb25zLgo+IAo+IFNpZ25lZC1vZmYtYnk6IENocmlz
IFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+IENjOiBUdnJ0a28gVXJzdWxpbiA8
dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgo+IC0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfbHJjLmMgfCA2MCArKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLQo+ICAgZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMgfCA0NCArKysrKysrKysrKysrKystLS0t
LS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5oIHwgIDIgKy0KPiAgIDMg
ZmlsZXMgY2hhbmdlZCwgNjggaW5zZXJ0aW9ucygrKSwgMzggZGVsZXRpb25zKC0pCj4gCj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiBpbmRleCAwYTQ4MTJlYmQxODQuLjhjMWVhNWMz
MTVhYyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCj4gQEAgLTc5OSw2ICs3
OTksMTcgQEAgc3RhdGljIGJvb2wgY2FuX21lcmdlX3JxKGNvbnN0IHN0cnVjdCBpOTE1X3JlcXVl
c3QgKnByZXYsCj4gICAJR0VNX0JVR19PTihwcmV2ID09IG5leHQpOwo+ICAgCUdFTV9CVUdfT04o
IWFzc2VydF9wcmlvcml0eV9xdWV1ZShwcmV2LCBuZXh0KSk7Cj4gICAKPiArCS8qCj4gKwkgKiBX
ZSBub3Qgc3VibWl0IGtub3duIGNvbXBsZXRlZCByZXF1ZXN0cy4gVGhlcmVmb3JlIGlmIHRoZSBu
ZXh0CgoiV2UgX2RvXyBub3Qgc3VibWl0Ij8KCj4gKwkgKiByZXF1ZXN0IGlzIGFscmVhZHkgY29t
cGxldGVkLCB3ZSBjYW4gcHJldGVuZCB0byBtZXJnZSBpdCBpbgo+ICsJICogd2l0aCB0aGUgcHJl
dmlvdXMgY29udGV4dCAoYW5kIHdlIHdpbGwgc2tpcCB1cGRhdGluZyB0aGUgRUxTUAo+ICsJICog
YW5kIHRyYWNraW5nKS4gVGh1cyBob3BlZnVsbHkga2VlcGluZyB0aGUgRUxTUCBmdWxsIHdpdGgg
YWN0aXZlCj4gKwkgKiBjb250ZXh0cywgZGVzcGl0ZSB0aGUgYmVzdCBlZmZvcnRzIG9mIHByZWVt
cHQtdG8tYnVzeSB0byBjb25mdXNlCj4gKwkgKiB1cy4KPiArCSAqLwo+ICsJaWYgKGk5MTVfcmVx
dWVzdF9jb21wbGV0ZWQobmV4dCkpCj4gKwkJcmV0dXJuIHRydWU7CgpJdCB3b3JrcyB3aXRoIHRo
ZSBjdXJyZW50IHVzZSBvZiBjYW5fbWVyZ2VfcnEgYnV0IGxlYXZlcyBhIGJpdCBvZiBhIApjb25j
ZXJuIGZvciB0aGUgZnV0dXJlLiBJIGRpZCBub3QgY29tZSB1cCB3aXRoIGFueSBpbnRlcmVzdGlu
ZyAKR0VNX0JVR19PTnMgdG8gYWRkLiBJIHdhcyB0aGlua2luZyBhbG9uZyB0aGUgbGluZXMgb2Yg
bWFraW5nIHN1cmUgd2UgCm5ldmVyIGVuZCB1cCBjb2FsZXNjaW5nIGRpZmZlcmVudCBjb250ZXh0
cyB0byB0aGUgc2FtZSBwb3J0LiBCdXQgbm8gCmlkZWFzIGhvdyB0byBkbyB0aGF0LgoKPiArCj4g
ICAJaWYgKCFjYW5fbWVyZ2VfY3R4KHByZXYtPmh3X2NvbnRleHQsIG5leHQtPmh3X2NvbnRleHQp
KQo+ICAgCQlyZXR1cm4gZmFsc2U7Cj4gICAKPiBAQCAtMTE4MSwyMSArMTE5Miw2IEBAIHN0YXRp
YyB2b2lkIGV4ZWNsaXN0c19kZXF1ZXVlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkK
PiAgIAkJCQljb250aW51ZTsKPiAgIAkJCX0KPiAgIAo+IC0JCQlpZiAoaTkxNV9yZXF1ZXN0X2Nv
bXBsZXRlZChycSkpIHsKPiAtCQkJCXZlLT5yZXF1ZXN0ID0gTlVMTDsKPiAtCQkJCXZlLT5iYXNl
LmV4ZWNsaXN0cy5xdWV1ZV9wcmlvcml0eV9oaW50ID0gSU5UX01JTjsKPiAtCQkJCXJiX2VyYXNl
X2NhY2hlZChyYiwgJmV4ZWNsaXN0cy0+dmlydHVhbCk7Cj4gLQkJCQlSQl9DTEVBUl9OT0RFKHJi
KTsKPiAtCj4gLQkJCQlycS0+ZW5naW5lID0gZW5naW5lOwo+IC0JCQkJX19pOTE1X3JlcXVlc3Rf
c3VibWl0KHJxKTsKPiAtCj4gLQkJCQlzcGluX3VubG9jaygmdmUtPmJhc2UuYWN0aXZlLmxvY2sp
Owo+IC0KPiAtCQkJCXJiID0gcmJfZmlyc3RfY2FjaGVkKCZleGVjbGlzdHMtPnZpcnR1YWwpOwo+
IC0JCQkJY29udGludWU7Cj4gLQkJCX0KPiAtCj4gICAJCQlpZiAobGFzdCAmJiAhY2FuX21lcmdl
X3JxKGxhc3QsIHJxKSkgewo+ICAgCQkJCXNwaW5fdW5sb2NrKCZ2ZS0+YmFzZS5hY3RpdmUubG9j
ayk7Cj4gICAJCQkJcmV0dXJuOyAvKiBsZWF2ZSB0aGlzIGZvciBhbm90aGVyICovCj4gQEAgLTEy
NDksMTEgKzEyNDUsMjMgQEAgc3RhdGljIHZvaWQgZXhlY2xpc3RzX2RlcXVldWUoc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lKQo+ICAgCQkJCUdFTV9CVUdfT04odmUtPnNpYmxpbmdzWzBd
ICE9IGVuZ2luZSk7Cj4gICAJCQl9Cj4gICAKPiAtCQkJX19pOTE1X3JlcXVlc3Rfc3VibWl0KHJx
KTsKPiAtCQkJaWYgKCFpOTE1X3JlcXVlc3RfY29tcGxldGVkKHJxKSkgewo+ICsJCQlpZiAoX19p
OTE1X3JlcXVlc3Rfc3VibWl0KHJxKSkgewo+ICAgCQkJCXN1Ym1pdCA9IHRydWU7Cj4gICAJCQkJ
bGFzdCA9IHJxOwo+ICAgCQkJfQo+ICsKPiArCQkJLyoKPiArCQkJICogSG1tLCB3ZSBoYXZlIGEg
YnVuY2ggb2YgdmlydHVhbCBlbmdpbmUgcmVxdWVzdHMsCj4gKwkJCSAqIGJ1dCB0aGUgZmlyc3Qg
b25lIHdhcyBhbHJlYWR5IGNvbXBsZXRlICh0aGFua3MKCkNvbXBsZXRlIG9yIGNvbXBsZXRlZD8g
Tm90IHN1cmUgbXlzZWxmLi4KCj4gKwkJCSAqIHByZWVtcHQtdG8tYnVzeSEpLiBLZWVwIGxvb2tp
bmcgYXQgdGhlIHZlbmcgcXVldWUKPiArCQkJICogdW50aWwgd2UgaGF2ZSBubyBtb3JlIHJlbGV2
ZW50IHJlcXVlc3RzIChpLmUuCgpyZWxldmFudAoKPiArCQkJICogdGhlIG5vcm1hbCBzdWJtaXQg
cXVldWUgaGFzIGhpZ2hlciBwcmlvcml0eSkuCj4gKwkJCSAqLwo+ICsJCQlpZiAoIXN1Ym1pdCkg
ewo+ICsJCQkJc3Bpbl91bmxvY2soJnZlLT5iYXNlLmFjdGl2ZS5sb2NrKTsKPiArCQkJCXJiID0g
cmJfZmlyc3RfY2FjaGVkKCZleGVjbGlzdHMtPnZpcnR1YWwpOwo+ICsJCQkJY29udGludWU7Cj4g
KwkJCX0KPiAgIAkJfQo+ICAgCj4gICAJCXNwaW5fdW5sb2NrKCZ2ZS0+YmFzZS5hY3RpdmUubG9j
ayk7Cj4gQEAgLTEyNjYsOCArMTI3NCw3IEBAIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19kZXF1ZXVl
KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAgIAkJaW50IGk7Cj4gICAKPiAgIAkJ
cHJpb2xpc3RfZm9yX2VhY2hfcmVxdWVzdF9jb25zdW1lKHJxLCBybiwgcCwgaSkgewo+IC0JCQlp
ZiAoaTkxNV9yZXF1ZXN0X2NvbXBsZXRlZChycSkpCj4gLQkJCQlnb3RvIHNraXA7Cj4gKwkJCWJv
b2wgbWVyZ2UgPSB0cnVlOwo+ICAgCj4gICAJCQkvKgo+ICAgCQkJICogQ2FuIHdlIGNvbWJpbmUg
dGhpcyByZXF1ZXN0IHdpdGggdGhlIGN1cnJlbnQgcG9ydD8KPiBAQCAtMTMwOCwxNCArMTMxNSwx
NyBAQCBzdGF0aWMgdm9pZCBleGVjbGlzdHNfZGVxdWV1ZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICplbmdpbmUpCj4gICAJCQkJICAgIGN0eF9zaW5nbGVfcG9ydF9zdWJtaXNzaW9uKHJxLT5od19j
b250ZXh0KSkKPiAgIAkJCQkJZ290byBkb25lOwo+ICAgCj4gLQkJCQkqcG9ydCA9IGV4ZWNsaXN0
c19zY2hlZHVsZV9pbihsYXN0LCBwb3J0IC0gZXhlY2xpc3RzLT5wZW5kaW5nKTsKPiAtCQkJCXBv
cnQrKzsKPiArCQkJCW1lcmdlID0gZmFsc2U7Cj4gICAJCQl9Cj4gICAKPiAtCQkJbGFzdCA9IHJx
Owo+IC0JCQlzdWJtaXQgPSB0cnVlOwo+IC1za2lwOgo+IC0JCQlfX2k5MTVfcmVxdWVzdF9zdWJt
aXQocnEpOwo+ICsJCQlpZiAoX19pOTE1X3JlcXVlc3Rfc3VibWl0KHJxKSkgewo+ICsJCQkJaWYg
KCFtZXJnZSkgewo+ICsJCQkJCSpwb3J0ID0gZXhlY2xpc3RzX3NjaGVkdWxlX2luKGxhc3QsIHBv
cnQgLSBleGVjbGlzdHMtPnBlbmRpbmcpOwo+ICsJCQkJCXBvcnQrKzsKPiArCQkJCX0KPiArCQkJ
CXN1Ym1pdCA9IHRydWU7Cj4gKwkJCQlsYXN0ID0gcnE7Cj4gKwkJCX0KPiAgIAkJfQo+ICAgCj4g
ICAJCXJiX2VyYXNlX2NhY2hlZCgmcC0+bm9kZSwgJmV4ZWNsaXN0cy0+cXVldWUpOwo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jCj4gaW5kZXggOWJkODUzOGIxOTA3Li4wY2E0M2NhMTVj
YTAgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYwo+IEBAIC0zNzcsOSArMzc3
LDEwIEBAIF9faTkxNV9yZXF1ZXN0X2F3YWl0X2V4ZWN1dGlvbihzdHJ1Y3QgaTkxNV9yZXF1ZXN0
ICpycSwKPiAgIAlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+IC12b2lkIF9faTkxNV9yZXF1ZXN0X3N1
Ym1pdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KQo+ICtib29sIF9faTkxNV9yZXF1ZXN0
X3N1Ym1pdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KQo+ICAgewo+ICAgCXN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9IHJlcXVlc3QtPmVuZ2luZTsKPiArCWJvb2wgcmVzdWx0
ID0gZmFsc2U7Cj4gICAKPiAgIAlHRU1fVFJBQ0UoIiVzIGZlbmNlICVsbHg6JWxsZCwgY3VycmVu
dCAlZFxuIiwKPiAgIAkJICBlbmdpbmUtPm5hbWUsCj4gQEAgLTM4OSw2ICszOTAsMjUgQEAgdm9p
ZCBfX2k5MTVfcmVxdWVzdF9zdWJtaXQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCkKPiAg
IAlHRU1fQlVHX09OKCFpcnFzX2Rpc2FibGVkKCkpOwo+ICAgCWxvY2tkZXBfYXNzZXJ0X2hlbGQo
JmVuZ2luZS0+YWN0aXZlLmxvY2spOwo+ICAgCj4gKwkvKgo+ICsJICogV2l0aCB0aGUgYWR2ZW50
IG9mIHByZWVtcHQtdG8tYnVzeSwgd2UgZnJlcXVlbnRseSBlbmNvdW50ZXIKPiArCSAqIHJlcXVl
c3RzIHRoYXQgd2UgaGF2ZSB1bnN1Ym1pdHRlZCBmcm9tIEhXLCBidXQgbGVmdCBydW5uaW5nCj4g
KwkgKiB1bnRpbCB0aGUgbmV4dCBhY2sgYW5kIGhhdmUgY29tcGxldGVkIGluIHRoZSBtZWFudGlt
ZS4gT24KPiArCSAqIHJlc3VibWlzc2lvbiBvZiB0aGF0IGNvbXBsZXRlZCByZXF1ZXN0LCB3ZSBj
YW4gc2tpcAo+ICsJICogdXBkYXRpbmcgdGhlIHBheWxvYWQgKGFuZCBleGVjbGlzdHMgY2FuIGV2
ZW4gc2tpcCBzdWJtaXR0aW5nCj4gKwkgKiB0aGUgcmVxdWVzdCkuCj4gKwkgKgo+ICsJICogV2Ug
bXVzdCByZW1vdmUgdGhlIHJlcXVlc3QgZnJvbSB0aGUgY2FsbGVyJ3MgcHJpb3JpdHkgcXVldWUs
Cj4gKwkgKiBhbmQgdGhlIGNhbGxlciBtdXN0IG9ubHkgY2FsbCB1cyB3aGVuIHRoZSByZXF1ZXN0
IGlzIGluIHRoZWlyCj4gKwkgKiBwcmlvcml0eSBxdWV1ZSwgdW5kZXIgdGhlIGFjdGl2ZS5sb2Nr
LiBUaGlzIGVuc3VyZXMgdGhhdCB0aGUKPiArCSAqIHJlcXVlc3QgaGFzICpub3QqIHlldCBiZWVu
IHJldGlyZWQgYW5kIHdlIGNhbiBzYWZlbHkgbW92ZQo+ICsJICogdGhlIHJlcXVlc3QgaW50byB0
aGUgZW5naW5lLT5hY3RpdmUubGlzdCB3aGVyZSBpdCB3aWxsIGJlCj4gKwkgKiBkcm9wcGVkIHVw
b24gcmV0aXJpbmcuIChPdGhlcndpc2UgaWYgcmVzdWJtaXQgYSAqcmV0aXJlZCoKPiArCSAqIHJl
cXVlc3QsIHRoaXMgd291bGQgYmUgYSBob3JyaWJsZSB1c2UtYWZ0ZXItZnJlZS4pCj4gKwkgKi8K
PiArCWlmIChpOTE1X3JlcXVlc3RfY29tcGxldGVkKHJlcXVlc3QpKQo+ICsJCWdvdG8geGZlcjsK
PiArCj4gICAJaWYgKGk5MTVfZ2VtX2NvbnRleHRfaXNfYmFubmVkKHJlcXVlc3QtPmdlbV9jb250
ZXh0KSkKPiAgIAkJaTkxNV9yZXF1ZXN0X3NraXAocmVxdWVzdCwgLUVJTyk7Cj4gICAKPiBAQCAt
NDEyLDEzICs0MzIsMTggQEAgdm9pZCBfX2k5MTVfcmVxdWVzdF9zdWJtaXQoc3RydWN0IGk5MTVf
cmVxdWVzdCAqcmVxdWVzdCkKPiAgIAkgICAgaTkxNV9zd19mZW5jZV9zaWduYWxlZCgmcmVxdWVz
dC0+c2VtYXBob3JlKSkKPiAgIAkJZW5naW5lLT5zYXR1cmF0ZWQgfD0gcmVxdWVzdC0+c2NoZWQu
c2VtYXBob3JlczsKPiAgIAo+IC0JLyogV2UgbWF5IGJlIHJlY3Vyc2luZyBmcm9tIHRoZSBzaWdu
YWwgY2FsbGJhY2sgb2YgYW5vdGhlciBpOTE1IGZlbmNlICovCj4gLQlzcGluX2xvY2tfbmVzdGVk
KCZyZXF1ZXN0LT5sb2NrLCBTSU5HTEVfREVQVEhfTkVTVElORyk7Cj4gKwllbmdpbmUtPmVtaXRf
ZmluaV9icmVhZGNydW1iKHJlcXVlc3QsCj4gKwkJCQkgICAgIHJlcXVlc3QtPnJpbmctPnZhZGRy
ICsgcmVxdWVzdC0+cG9zdGZpeCk7Cj4gKwo+ICsJdHJhY2VfaTkxNV9yZXF1ZXN0X2V4ZWN1dGUo
cmVxdWVzdCk7Cj4gKwllbmdpbmUtPnNlcmlhbCsrOwo+ICsJcmVzdWx0ID0gdHJ1ZTsKPiAgIAo+
IC0JbGlzdF9tb3ZlX3RhaWwoJnJlcXVlc3QtPnNjaGVkLmxpbmssICZlbmdpbmUtPmFjdGl2ZS5y
ZXF1ZXN0cyk7Cj4gK3hmZXI6CS8qIFdlIG1heSBiZSByZWN1cnNpbmcgZnJvbSB0aGUgc2lnbmFs
IGNhbGxiYWNrIG9mIGFub3RoZXIgaTkxNSBmZW5jZSAqLwo+ICsJc3Bpbl9sb2NrX25lc3RlZCgm
cmVxdWVzdC0+bG9jaywgU0lOR0xFX0RFUFRIX05FU1RJTkcpOwo+ICAgCj4gLQlHRU1fQlVHX09O
KHRlc3RfYml0KEk5MTVfRkVOQ0VfRkxBR19BQ1RJVkUsICZyZXF1ZXN0LT5mZW5jZS5mbGFncykp
Owo+IC0Jc2V0X2JpdChJOTE1X0ZFTkNFX0ZMQUdfQUNUSVZFLCAmcmVxdWVzdC0+ZmVuY2UuZmxh
Z3MpOwo+ICsJaWYgKCF0ZXN0X2FuZF9zZXRfYml0KEk5MTVfRkVOQ0VfRkxBR19BQ1RJVkUsICZy
ZXF1ZXN0LT5mZW5jZS5mbGFncykpCj4gKwkJbGlzdF9tb3ZlX3RhaWwoJnJlcXVlc3QtPnNjaGVk
LmxpbmssICZlbmdpbmUtPmFjdGl2ZS5yZXF1ZXN0cyk7Cj4gICAKPiAgIAlpZiAodGVzdF9iaXQo
RE1BX0ZFTkNFX0ZMQUdfRU5BQkxFX1NJR05BTF9CSVQsICZyZXF1ZXN0LT5mZW5jZS5mbGFncykg
JiYKPiAgIAkgICAgIXRlc3RfYml0KERNQV9GRU5DRV9GTEFHX1NJR05BTEVEX0JJVCwgJnJlcXVl
c3QtPmZlbmNlLmZsYWdzKSAmJgo+IEBAIC00MjksMTIgKzQ1NCw3IEBAIHZvaWQgX19pOTE1X3Jl
cXVlc3Rfc3VibWl0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJlcXVlc3QpCj4gICAKPiAgIAlzcGlu
X3VubG9jaygmcmVxdWVzdC0+bG9jayk7Cj4gICAKPiAtCWVuZ2luZS0+ZW1pdF9maW5pX2JyZWFk
Y3J1bWIocmVxdWVzdCwKPiAtCQkJCSAgICAgcmVxdWVzdC0+cmluZy0+dmFkZHIgKyByZXF1ZXN0
LT5wb3N0Zml4KTsKPiAtCj4gLQllbmdpbmUtPnNlcmlhbCsrOwo+IC0KPiAtCXRyYWNlX2k5MTVf
cmVxdWVzdF9leGVjdXRlKHJlcXVlc3QpOwo+ICsJcmV0dXJuIHJlc3VsdDsKPiAgIH0KPiAgIAo+
ICAgdm9pZCBpOTE1X3JlcXVlc3Rfc3VibWl0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJlcXVlc3Qp
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmgKPiBpbmRleCBiMThmNDk1MjhkZWQuLmVj
NWJiNGMyZTVhZSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVl
c3QuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5oCj4gQEAgLTI5
Miw3ICsyOTIsNyBAQCBpbnQgaTkxNV9yZXF1ZXN0X2F3YWl0X2V4ZWN1dGlvbihzdHJ1Y3QgaTkx
NV9yZXF1ZXN0ICpycSwKPiAgIAo+ICAgdm9pZCBpOTE1X3JlcXVlc3RfYWRkKHN0cnVjdCBpOTE1
X3JlcXVlc3QgKnJxKTsKPiAgIAo+IC12b2lkIF9faTkxNV9yZXF1ZXN0X3N1Ym1pdChzdHJ1Y3Qg
aTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KTsKPiArYm9vbCBfX2k5MTVfcmVxdWVzdF9zdWJtaXQoc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCk7Cj4gICB2b2lkIGk5MTVfcmVxdWVzdF9zdWJtaXQo
c3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCk7Cj4gICAKPiAgIHZvaWQgaTkxNV9yZXF1ZXN0
X3NraXAoc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCwgaW50IGVycm9yKTsKPiAKClJldmll
d2VkLWJ5OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgoKUmVnYXJk
cywKClR2cnRrbwpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

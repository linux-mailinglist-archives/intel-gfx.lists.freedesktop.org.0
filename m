Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 575F38DD69
	for <lists+intel-gfx@lfdr.de>; Wed, 14 Aug 2019 20:49:54 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A96116E7DD;
	Wed, 14 Aug 2019 18:49:52 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-ed1-x543.google.com (mail-ed1-x543.google.com
 [IPv6:2a00:1450:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3EBDB6E7DD
 for <intel-gfx@lists.freedesktop.org>; Wed, 14 Aug 2019 18:49:51 +0000 (UTC)
Received: by mail-ed1-x543.google.com with SMTP id z51so122414edz.13
 for <intel-gfx@lists.freedesktop.org>; Wed, 14 Aug 2019 11:49:51 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=LK+05XwEEx/tXmx4f/1EuCjYTnVBtBCeFTXCfcYH/5w=;
 b=ZZYHlhf82lU57s1EINyQ5hoCiOIjZ5ybHehqD9O8DhnXaD0neZcGg/n+cGdQz2m6pD
 1Z/KqUwSZNW38Lda985lKP5cYzyj3d2qbW/lIJqa9J2HeOw8a/bFrkx/vHNskoeeRUuB
 IWlHgeUxsQIglbBie2a5sjbe4WOoobQVXifRdHsr9KsTuBuw3JKXWW1BkN38eYt2Hk4U
 5J33vnEwWMRcZ4PCEgWNRcn7Vc+TXNshLkDIcDH+FXJIKN2Yn408FoHZjzzCiQouGziT
 Ee+Fg5DWS2U6IM54l7KgC2su/q372A/ootTvdh1eKCNAXOjSbhCcpFP53DMvr5yPaBdy
 pjAQ==
X-Gm-Message-State: APjAAAXOFPHlOG8Drx9yI9gpefdV9puPj0HjWRLb4nG4Bg1AoIPvdWex
 oE1xEQqVOxW5Ya2UYFwldI/Tpu4Ka69HyQ==
X-Google-Smtp-Source: APXvYqxCwCj9luSLjdGDcMGHAFt/QeqpZbiEMwgGBjYF/8zdBeO1NmKutRDTdDZ895vnHwTrfjfMYg==
X-Received: by 2002:a17:906:154d:: with SMTP id
 c13mr1023056ejd.208.1565808589469; 
 Wed, 14 Aug 2019 11:49:49 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id q13sm105261edn.92.2019.08.14.11.49.48
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 14 Aug 2019 11:49:48 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: Intel Graphics Development <intel-gfx@lists.freedesktop.org>
Date: Wed, 14 Aug 2019 20:49:41 +0200
Message-Id: <20190814184941.18355-1-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190814124933.19056-2-daniel.vetter@ffwll.ch>
References: <20190814124933.19056-2-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=LK+05XwEEx/tXmx4f/1EuCjYTnVBtBCeFTXCfcYH/5w=;
 b=QaiB2DfK6BePBfhkhxVmEUAMhK+IVzjPiTHRy9i0G+QE5AxuH2JlKs2yClI5amYhAH
 gHTnye2Gpre5Zg54H+4pD6QC+N512oXUNIYaaONiHn/+7jGCgYjqzD/fcTCJT5zibJSL
 W8Dg5ZSW0QSz66jxGAqunMd7/cbTVzVbCEF0s=
Subject: [Intel-gfx] [PATCH] RFC: drm/i915: Switch obj->mm.lock lockdep
 annotations on its head
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@ffwll.ch>,
 Daniel Vetter <daniel.vetter@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIHRyb3VibGUgd2l0aCBoYXZpbmcgYSBwbGFpbiBuZXN0aW5nIGZsYWcgZm9yIGxvY2tzIHdo
aWNoIGRvIG5vdApuYXR1cmFsbHkgbmVzdCAodW5saWtlIGJsb2NrIGRldmljZXMgYW5kIHRoZWly
IHBhcnRpdGlvbnMsIHdoaWNoIGlzCnRoZSBvcmlnaW5hbCBtb3RpdmF0aW9uIGZvciBuZXN0aW5n
IGxldmVscykgaXMgdGhhdCBsb2NrZGVwIHdpbGwKbmV2ZXIgc3BvdCBhIHRydWUgZGVhZGxvY2sg
aWYgeW91IHNjcmV3IHVwLgoKVGhpcyBwYXRjaCBpcyBhbiBhdHRlbXB0IGF0IHRyeWluZyBiZXR0
ZXIsIGJ5IGhpZ2hsaWdodGluZyBhIGJpdCBtb3JlCnRoZSBhY3R1YWwgbmF0dXJlIG9mIHRoZSBu
ZXN0aW5nIHRoYXQncyBnb2luZyBvbi4gRXNzZW50aWFsbHkgd2UgaGF2ZQp0d28ga2luZHMgb2Yg
b2JqZWN0czoKCi0gb2JqZWN0cyB3aXRob3V0IHBhZ2VzIGFsbG9jYXRlZCwgd2hpY2ggY2Fubm90
IGJlIG9uIGFueSBscnUgYW5kIGFyZQogIGhlbmNlIGluYWNjZXNzaWJsZSB0byB0aGUgc2hyaW5r
ZXIuCgotIG9iamVjdHMgd2hpY2ggaGF2ZSBwYWdlcyBhbGxvY2F0ZWQsIHdoaWNoIGFyZSBvbiBh
biBscnUsIGFuZCB3aGljaAogIHRoZSBzaHJpbmtlciBjYW4gZGVjaWRlIHRvIHRocm93IG91dC4K
CkZvciB0aGUgZm9ybWVyIHR5cGUgb2Ygb2JqZWN0LCBtZW1vcnkgYWxsY29hdGlvbnMgd2hpbGUg
aG9sZGluZwpvYmotPm1tLmxvY2sgYXJlIHBlcm1pc3NpYmxlLiBGb3IgdGhlIGxhdHRlciB0aGV5
IGFyZSBub3QuIEFuZApnZXQvcHV0X3BhZ2VzIHRyYW5zaXRpb25zIGJldHdlZW4gdGhlIHR3byB0
eXBlcyBvZiBvYmplY3RzLgoKVGhpcyBpcyBzdGlsbCBub3QgZW50aXJlbHkgZm9vbC1wcm9vZiBz
aW5jZSB0aGUgcnVsZXMgbWlnaHQgY2hhbmNlLgpCdXQgYXMgbG9uZyBhcyB3ZSBydW4gc3VjaCBh
IGNvZGUgZXZlciBhdCBydW50aW1lIGxvY2tkZXAgc2hvdWxkIGJlCmFibGUgdG8gb2JzZXJ2ZSB0
aGUgaW5jb25zaXN0ZW5jeSBhbmQgY29tcGxhaW4gKGxpa2Ugd2l0aCBhbnkgb3RoZXIKbG9ja2Rl
cCBjbGFzcyB0aGF0IHdlJ3ZlIHNwbGl0IHVwIGluIG11bHRpcGxlIGNsYXNzZXMpLiBCdXQgdGhl
cmUgYXJlCmEgZmV3IGNsZWFyIGJlbmVmaXRzOgoKLSBXZSBjYW4gZHJvcCB0aGUgbmVzdGluZyBm
bGFnIHBhcmFtZXRlciBmcm9tCiAgX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzLCBiZWNhdXNl
IHRoYXQgZnVuY3Rpb24gYnkgZGVmaW5pdGlvbiBpcwogIG5ldmVyIGdvaW5nIGFsbG9jYXRlIG1l
bW9yeSwgYW5kIGNhbGxpbmcgaXQgb24gYW4gb2JqZWN0IHdoaWNoCiAgZG9lc24ndCBoYXZlIGl0
cyBwYWdlcyBhbGxvY2F0ZWQgd291bGQgYmUgYSBidWcuCgotIFdlIHN0cmljdGx5IGNhdGNoIG1v
cmUgYnVncywgc2luY2UgdGhlcmUncyBub3Qgb25seSBvbmUgcGxhY2UgaW4gdGhlCiAgZW50aXJl
IHRyZWUgd2hpY2ggaXMgYW5ub3RhdGVkIHdpdGggdGhlIHNwZWNpYWwgY2xhc3MuIEFsbCB0aGUK
ICBvdGhlciBwbGFjZXMgdGhhdCBoYWQgZXhwbGljaXQgbG9ja2RlcCBuZXN0aW5nIGFubm90YXRp
b25zIHdlJ3JlIG5vdwogIGdvaW5nIHRvIGxlYXZlIHVwIHRvIGxvY2tkZXAgYWdhaW4uCgotIFNw
ZWNpZmljYWxseSB0aGlzIGNhdGNoZXMgc3R1ZmYgbGlrZSBjYWxsaW5nIGdldF9wYWdlcyBmcm9t
CiAgcHV0X3BhZ2VzICh3aGljaCBpc24ndCByZWFsbHkgYSBnb29kIGlkZWEsIGlmIHdlIGNhbiBj
YWxsIHB1dF9wYWdlcwogIHNvIGNvdWxkIHRoZSBzaHJpbmtlcikuIEkndmUgc2VlbiBwYXRjaGVz
IGRvIGV4YWN0bHkgdGhhdC4KCk9mIGNvdXJzZSBJIGZ1bGx5IGV4cGVjdCBDSSB3aWxsIHNob3cg
bWUgZm9yIHRoZSBmb29sIEkgYW0gd2l0aCB0aGlzCm9uZSBoZXJlIDotKQoKdjI6IFRoZXJlIGNh
biBvbmx5IGJlIG9uZSAobG9ja2RlcCBvbmx5IGhhcyBhIGNhY2hlIGZvciB0aGUgZmlyc3QKc3Vi
Y2xhc3MsIG5vdCBmb3IgZGVlcGVyIG9uZXMsIGFuZCB3ZSBkb24ndCB3YW50IHRvIG1ha2UgdGhl
c2UgbG9ja3MKZXZlbiBzbG93ZXIpLiBTdGlsbCBzZXBhcmF0ZSBlbnVtcyBmb3IgYmV0dGVyIGRv
Y3VtZW50YXRpb24uCgpSZWFsIGZpeDogZG9uIGZvcmdldCBhYm91dCBwaHlzIG9ianMgYW5kIHBp
bl9tYXAoKSwgYW5kIGZpeCB0aGUKc2hyaW5rZXIgdG8gaGF2ZSB0aGUgcmlnaHQgYW5ub3RhdGlv
bnMgLi4uIHNpbGx5IG1lLgoKQ2M6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNv
LnVrPgpDYzogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KQ2M6IEpv
b25hcyBMYWh0aW5lbiA8am9vbmFzLmxhaHRpbmVuQGxpbnV4LmludGVsLmNvbT4KU2lnbmVkLW9m
Zi1ieTogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBpbnRlbC5jb20+Ci0tLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5jICAgICAgIHwgIDIgKy0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaCAgICAgICB8IDE2ICsrKysrKysr
KysrKystLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfdHlwZXMu
aCB8IDEwICsrKysrKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdl
cy5jICAgICAgICB8ICA5ICsrKystLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX3BoeXMuYyAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9zaHJpbmtlci5jICAgICB8ICA1ICsrLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fdXNlcnB0ci5jICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMgIHwgMTIgKysrKysrLS0tLS0tCiA4IGZpbGVzIGNoYW5n
ZWQsIDM3IGluc2VydGlvbnMoKyksIDIxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYwppbmRleCAzOTI5YzNhNmIyODEuLmExYTgzNTUzOWUw
OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYwpAQCAtMTkx
LDcgKzE5MSw3IEBAIHN0YXRpYyB2b2lkIF9faTkxNV9nZW1fZnJlZV9vYmplY3RzKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1LAogCQlHRU1fQlVHX09OKCFsaXN0X2VtcHR5KCZvYmotPmx1
dF9saXN0KSk7CiAKIAkJYXRvbWljX3NldCgmb2JqLT5tbS5wYWdlc19waW5fY291bnQsIDApOwot
CQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqLCBJOTE1X01NX05PUk1BTCk7CisJCV9f
aTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhvYmopOwogCQlHRU1fQlVHX09OKGk5MTVfZ2VtX29i
amVjdF9oYXNfcGFnZXMob2JqKSk7CiAJCWJpdG1hcF9mcmVlKG9iai0+Yml0XzE3KTsKIApkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oCmluZGV4IDM3MTRjZjIzNGQ2
NC4uNWNlNTExY2E3ZmE4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fb2JqZWN0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29i
amVjdC5oCkBAIC0yODEsMTEgKzI4MSwyMSBAQCBpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMo
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKIAogZW51bSBpOTE1X21tX3N1YmNsYXNz
IHsgLyogbG9ja2RlcCBzdWJjbGFzcyBmb3Igb2JqLT5tbS5sb2NrL3N0cnVjdF9tdXRleCAqLwog
CUk5MTVfTU1fTk9STUFMID0gMCwKLQlJOTE1X01NX1NIUklOS0VSIC8qIGNhbGxlZCAicmVjdXJz
aXZlbHkiIGZyb20gZGlyZWN0LXJlY2xhaW0tZXNxdWUgKi8KKwkvKgorCSAqIE9ubHkgdXNlZCBi
eSBzdHJ1Y3RfbXV0ZXgsIHdoZW4gY2FsbGVkICJyZWN1cnNpdmVseSIgZnJvbQorCSAqIGRpcmVj
dC1yZWNsYWltLWVzcXVlLiBTYWZlIGJlY2F1c2UgdGhlcmUgaXMgb25seSBldmVyeSBvbmUKKwkg
KiBzdHJ1Y3RfbXV0ZXggaW4gdGhlIGVudGlyZSBzeXN0ZW0uICovCisJSTkxNV9NTV9TSFJJTktF
UiA9IDEsCisJLyoKKwkgKiBVc2VkIGZvciBvYmotPm1tLmxvY2sgd2hlbiBhbGxvY2F0aW5nIHBh
Z2VzLiBTYWZlIGJlY2F1c2UgdGhlIG9iamVjdAorCSAqIGlzbid0IHlldCBvbiBhbnkgTFJVLCBh
bmQgdGhlcmVmb3JlIHRoZSBzaHJpbmtlciBjYW4ndCBkZWFkbG9jayBvbgorCSAqIGl0LiBBcyBz
b29uIGFzIHRoZSBvYmplY3QgaGFzIHBhZ2VzLCBvYmotPm1tLmxvY2sgbmVzdHMgd2l0aGluCisJ
ICogZnNfcmVjbGFpbS4KKwkgKi8KKwlJOTE1X01NX0dFVF9QQUdFUyA9IDEsCiB9OwogCi1pbnQg
X19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpv
YmosCi0JCQkJZW51bSBpOTE1X21tX3N1YmNsYXNzIHN1YmNsYXNzKTsKK2ludCBfX2k5MTVfZ2Vt
X29iamVjdF9wdXRfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7CiB2b2lk
IGk5MTVfZ2VtX29iamVjdF90cnVuY2F0ZShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2Jq
KTsKIHZvaWQgaTkxNV9nZW1fb2JqZWN0X3dyaXRlYmFjayhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29i
amVjdCAqb2JqKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX29iamVjdF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29i
amVjdF90eXBlcy5oCmluZGV4IGQ0NzRjNmFjNDEwMC4uMWVhM2MzYzk2YTVhIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVzLmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oCkBAIC0xNTcs
NyArMTU3LDE1IEBAIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0IHsKIAl1bnNpZ25lZCBpbnQg
cGluX2dsb2JhbDsKIAogCXN0cnVjdCB7Ci0JCXN0cnVjdCBtdXRleCBsb2NrOyAvKiBwcm90ZWN0
cyB0aGUgcGFnZXMgYW5kIHRoZWlyIHVzZSAqLworCQkvKgorCQkgKiBQcm90ZWN0cyB0aGUgcGFn
ZXMgYW5kIHRoZWlyIHVzZS4KKwkJICoKKwkJICogSU1QT1JUQU5UOiBJdCBpcyBub3QgYWxsb3dl
ZCB0byBhbGxvY2F0ZSBtZW1vcnkgd2hpbGUgaG9sZGluZworCQkgKiB0aGlzIGxvY2ssIGJlY2F1
c2UgdGhlIHNocmlua2VyIG1pZ2h0IHJlY3Vyc2Ugb24gaXQsIGV4Y2VwdAorCQkgKiB3aGVuIHRo
ZXJlIGFyZSBubyBwYWdlcyBhbGxvY2F0ZWQgeWV0IGFuZCB0aGUgb2JqZWN0IGlzbid0CisJCSAq
IHZpc2libGUgb24gYW55IExSVS4KKwkJICovCisJCXN0cnVjdCBtdXRleCBsb2NrOwogCQlhdG9t
aWNfdCBwYWdlc19waW5fY291bnQ7CiAKIAkJc3RydWN0IHNnX3RhYmxlICpwYWdlczsKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BhZ2VzLmMKaW5kZXggMThmMGNlMDEzNWMxLi4y
MDI1MjZlODkxMGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9wYWdlcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5j
CkBAIC0xMDEsNyArMTAxLDcgQEAgaW50IF9faTkxNV9nZW1fb2JqZWN0X2dldF9wYWdlcyhzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogewogCWludCBlcnI7CiAKLQllcnIgPSBtdXRl
eF9sb2NrX2ludGVycnVwdGlibGUoJm9iai0+bW0ubG9jayk7CisJZXJyID0gbXV0ZXhfbG9ja19p
bnRlcnJ1cHRpYmxlX25lc3RlZCgmb2JqLT5tbS5sb2NrLCBJOTE1X01NX0dFVF9QQUdFUyk7CiAJ
aWYgKGVycikKIAkJcmV0dXJuIGVycjsKIApAQCAtMTc5LDggKzE3OSw3IEBAIF9faTkxNV9nZW1f
b2JqZWN0X3Vuc2V0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAJcmV0
dXJuIHBhZ2VzOwogfQogCi1pbnQgX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCi0JCQkJZW51bSBpOTE1X21tX3N1YmNsYXNzIHN1YmNs
YXNzKQoraW50IF9faTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2Vt
X29iamVjdCAqb2JqKQogewogCXN0cnVjdCBzZ190YWJsZSAqcGFnZXM7CiAJaW50IGVycjsKQEAg
LTE5MSw3ICsxOTAsNyBAQCBpbnQgX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJR0VNX0JVR19PTihhdG9taWNfcmVhZCgmb2JqLT5i
aW5kX2NvdW50KSk7CiAKIAkvKiBNYXkgYmUgY2FsbGVkIGJ5IHNocmlua2VyIGZyb20gd2l0aGlu
IGdldF9wYWdlcygpIChvbiBhbm90aGVyIGJvKSAqLwotCW11dGV4X2xvY2tfbmVzdGVkKCZvYmot
Pm1tLmxvY2ssIHN1YmNsYXNzKTsKKwltdXRleF9sb2NrKCZvYmotPm1tLmxvY2spOwogCWlmICh1
bmxpa2VseShhdG9taWNfcmVhZCgmb2JqLT5tbS5wYWdlc19waW5fY291bnQpKSkgewogCQllcnIg
PSAtRUJVU1k7CiAJCWdvdG8gdW5sb2NrOwpAQCAtMjg1LDcgKzI4NCw3IEBAIHZvaWQgKmk5MTVf
Z2VtX29iamVjdF9waW5fbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJaWYg
KHVubGlrZWx5KCFpOTE1X2dlbV9vYmplY3RfaGFzX3N0cnVjdF9wYWdlKG9iaikpKQogCQlyZXR1
cm4gRVJSX1BUUigtRU5YSU8pOwogCi0JZXJyID0gbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKCZv
YmotPm1tLmxvY2spOworCWVyciA9IG11dGV4X2xvY2tfaW50ZXJydXB0aWJsZV9uZXN0ZWQoJm9i
ai0+bW0ubG9jaywgSTkxNV9NTV9HRVRfUEFHRVMpOwogCWlmIChlcnIpCiAJCXJldHVybiBFUlJf
UFRSKGVycik7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9waHlzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGh5cy5jCmluZGV4
IDEwMmZkN2EyM2QzZC4uMjA5OTI1YmU4YTc2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fcGh5cy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9waHlzLmMKQEAgLTE1Niw3ICsxNTYsNyBAQCBpbnQgaTkxNV9nZW1fb2JqZWN0X2F0
dGFjaF9waHlzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosIGludCBhbGlnbikKIAlp
ZiAoZXJyKQogCQlyZXR1cm4gZXJyOwogCi0JbXV0ZXhfbG9jaygmb2JqLT5tbS5sb2NrKTsKKwlt
dXRleF9sb2NrX25lc3RlZCgmb2JqLT5tbS5sb2NrLCBJOTE1X01NX0dFVF9QQUdFUyk7CiAKIAlp
ZiAob2JqLT5tbS5tYWR2ICE9IEk5MTVfTUFEVl9XSUxMTkVFRCkgewogCQllcnIgPSAtRUZBVUxU
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3Nocmlua2Vy
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fc2hyaW5rZXIuYwppbmRleCBl
ZGQyMWQxNGU2NGYuLjBiMGQ2ZTI3Yjk5NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX3Nocmlua2VyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX3Nocmlua2VyLmMKQEAgLTk4LDcgKzk4LDcgQEAgc3RhdGljIGJvb2wgdW5zYWZl
X2Ryb3BfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJZmxhZ3MgPSBJ
OTE1X0dFTV9PQkpFQ1RfVU5CSU5EX0FDVElWRTsKIAogCWlmIChpOTE1X2dlbV9vYmplY3RfdW5i
aW5kKG9iaiwgZmxhZ3MpID09IDApCi0JCV9faTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhvYmos
IEk5MTVfTU1fU0hSSU5LRVIpOworCQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqKTsK
IAogCXJldHVybiAhaTkxNV9nZW1fb2JqZWN0X2hhc19wYWdlcyhvYmopOwogfQpAQCAtMjU0LDgg
KzI1NCw3IEBAIGk5MTVfZ2VtX3NocmluayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwK
IAogCQkJaWYgKHVuc2FmZV9kcm9wX3BhZ2VzKG9iaiwgc2hyaW5rKSkgewogCQkJCS8qIE1heSBh
cnJpdmUgZnJvbSBnZXRfcGFnZXMgb24gYW5vdGhlciBibyAqLwotCQkJCW11dGV4X2xvY2tfbmVz
dGVkKCZvYmotPm1tLmxvY2ssCi0JCQkJCQkgIEk5MTVfTU1fU0hSSU5LRVIpOworCQkJCW11dGV4
X2xvY2soJm9iai0+bW0ubG9jayk7CiAJCQkJaWYgKCFpOTE1X2dlbV9vYmplY3RfaGFzX3BhZ2Vz
KG9iaikpIHsKIAkJCQkJdHJ5X3RvX3dyaXRlYmFjayhvYmosIHNocmluayk7CiAJCQkJCWNvdW50
ICs9IG9iai0+YmFzZS5zaXplID4+IFBBR0VfU0hJRlQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0ci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX3VzZXJwdHIuYwppbmRleCA3MGRjNTA2YTU0MjYuLmY3NDc1ZjJjODRkMSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3VzZXJwdHIuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0ci5jCkBAIC0xNTgs
NyArMTU4LDcgQEAgdXNlcnB0cl9tbl9pbnZhbGlkYXRlX3JhbmdlX3N0YXJ0KHN0cnVjdCBtbXVf
bm90aWZpZXIgKl9tbiwKIAkJcmV0ID0gaTkxNV9nZW1fb2JqZWN0X3VuYmluZChvYmosCiAJCQkJ
CSAgICAgSTkxNV9HRU1fT0JKRUNUX1VOQklORF9BQ1RJVkUpOwogCQlpZiAocmV0ID09IDApCi0J
CQlyZXQgPSBfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqLCBJOTE1X01NX1NIUklOS0VS
KTsKKwkJCXJldCA9IF9faTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhvYmopOwogCQlpOTE1X2dl
bV9vYmplY3RfcHV0KG9iaik7CiAJCWlmIChyZXQpCiAJCQlnb3RvIHVubG9jazsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaHVnZV9wYWdlcy5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMKaW5kZXggNmNiZDRh
NjY4YzlhLi5kZjU4NjAzNWMzM2UgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9zZWxmdGVzdHMvaHVnZV9wYWdlcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9z
ZWxmdGVzdHMvaHVnZV9wYWdlcy5jCkBAIC01NjIsNyArNTYyLDcgQEAgc3RhdGljIGludCBpZ3Rf
bW9ja19wcGd0dF9taXNhbGlnbmVkX2RtYSh2b2lkICphcmcpCiAJCWk5MTVfdm1hX2Nsb3NlKHZt
YSk7CiAKIAkJaTkxNV9nZW1fb2JqZWN0X3VucGluX3BhZ2VzKG9iaik7Ci0JCV9faTkxNV9nZW1f
b2JqZWN0X3B1dF9wYWdlcyhvYmosIEk5MTVfTU1fTk9STUFMKTsKKwkJX19pOTE1X2dlbV9vYmpl
Y3RfcHV0X3BhZ2VzKG9iaik7CiAJCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKIAl9CiAKQEAg
LTU5MCw3ICs1OTAsNyBAQCBzdGF0aWMgdm9pZCBjbG9zZV9vYmplY3RfbGlzdChzdHJ1Y3QgbGlz
dF9oZWFkICpvYmplY3RzLAogCiAJCWxpc3RfZGVsKCZvYmotPnN0X2xpbmspOwogCQlpOTE1X2dl
bV9vYmplY3RfdW5waW5fcGFnZXMob2JqKTsKLQkJX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2Vz
KG9iaiwgSTkxNV9NTV9OT1JNQUwpOworCQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2Jq
KTsKIAkJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwogCX0KIH0KQEAgLTg2MCw3ICs4NjAsNyBA
QCBzdGF0aWMgaW50IGlndF9tb2NrX3BwZ3R0XzY0Syh2b2lkICphcmcpCiAJCQlpOTE1X3ZtYV9j
bG9zZSh2bWEpOwogCiAJCQlpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMob2JqKTsKLQkJCV9f
aTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhvYmosIEk5MTVfTU1fTk9STUFMKTsKKwkJCV9faTkx
NV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhvYmopOwogCQkJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmop
OwogCQl9CiAJfQpAQCAtMTI2OCw3ICsxMjY4LDcgQEAgc3RhdGljIGludCBpZ3RfcHBndHRfZXho
YXVzdF9odWdlKHZvaWQgKmFyZykKIAkJCX0KIAogCQkJaTkxNV9nZW1fb2JqZWN0X3VucGluX3Bh
Z2VzKG9iaik7Ci0JCQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqLCBJOTE1X01NX05P
Uk1BTCk7CisJCQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqKTsKIAkJCWk5MTVfZ2Vt
X29iamVjdF9wdXQob2JqKTsKIAkJfQogCX0KQEAgLTEzMzAsNyArMTMzMCw3IEBAIHN0YXRpYyBp
bnQgaWd0X3BwZ3R0X2ludGVybmFsX2h1Z2Uodm9pZCAqYXJnKQogCQl9CiAKIAkJaTkxNV9nZW1f
b2JqZWN0X3VucGluX3BhZ2VzKG9iaik7Ci0JCV9faTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhv
YmosIEk5MTVfTU1fTk9STUFMKTsKKwkJX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKG9iaik7
CiAJCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKIAl9CiAKQEAgLTEzOTksNyArMTM5OSw3IEBA
IHN0YXRpYyBpbnQgaWd0X3BwZ3R0X2dlbWZzX2h1Z2Uodm9pZCAqYXJnKQogCQl9CiAKIAkJaTkx
NV9nZW1fb2JqZWN0X3VucGluX3BhZ2VzKG9iaik7Ci0JCV9faTkxNV9nZW1fb2JqZWN0X3B1dF9w
YWdlcyhvYmosIEk5MTVfTU1fTk9STUFMKTsKKwkJX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2Vz
KG9iaik7CiAJCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKIAl9CiAKLS0gCjIuMjIuMAoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1h
aWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

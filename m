Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EFBA12116F7
	for <lists+intel-gfx@lfdr.de>; Thu,  2 Jul 2020 01:55:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B82486EA28;
	Wed,  1 Jul 2020 23:55:02 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7389F6EA22
 for <intel-gfx@lists.freedesktop.org>; Wed,  1 Jul 2020 23:54:52 +0000 (UTC)
IronPort-SDR: p+x02s/alAJ9RoQIj6XSCnGBSw2dRBn7m/AWZa378X6V+jk5jMuPE12nDeKLh1X0NuXmhrJX/0
 2DOfB4CFlIhw==
X-IronPort-AV: E=McAfee;i="6000,8403,9669"; a="231619211"
X-IronPort-AV: E=Sophos;i="5.75,302,1589266800"; d="scan'208";a="231619211"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by fmsmga105.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 01 Jul 2020 16:54:51 -0700
IronPort-SDR: QZrsO/2BA/krhfagDpKgxELlZNnpUNMNP0SPQf9zEtbLpPhH1cTqVurgz6q27CdTDBahd8oyIM
 Hnvn7yUMbN2Q==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.75,302,1589266800"; d="scan'208";a="356276421"
Received: from ldmartin1-desk.jf.intel.com ([10.165.21.151])
 by orsmga001.jf.intel.com with ESMTP; 01 Jul 2020 16:54:50 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  1 Jul 2020 16:53:38 -0700
Message-Id: <20200701235339.32608-28-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20200701235339.32608-1-lucas.demarchi@intel.com>
References: <20200701235339.32608-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 27/28] drm/i915/dg1: Add initial DG1
 workarounds
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogU3R1YXJ0IFN1bW1lcnMgPHN0dWFydC5zdW1tZXJzQGludGVsLmNvbT4KCkRHMSBzaGFy
ZXMgc29tZSB3b3JrYXJvdW5kcyB3aXRoIFRHTCBhbmQgUktMIGFuZCBhbHNvIGhhcyBzb21lCmFk
ZGl0aW9uYWwgd29ya2Fyb3VuZHMgb2YgaXRzIG93bi4KCk1lZGlhIHBvd2VyIGdhdGluZyBzaG91
bGQgbm90IGJlIGFwcGxpZWQgc28gd2UganVzdCBzZXQgaXQgdG8Kbm9wX2luaXRfY2xvY2tfZ2F0
aW5nKCkuCgpCU3BlYzogNTM1MDgKCnYyOiBBbHNvIGFkZCBXYV8xNjAxMTIyNzkyMgoKQ2M6IE1h
dHQgQXR3b29kIDxtYXR0aGV3LnMuYXR3b29kQGludGVsLmNvbT4KQ2M6IE1hdHQgUm9wZXIgPG1h
dHRoZXcuZC5yb3BlckBpbnRlbC5jb20+CkNjOiBSYWRoYWtyaXNobmEgU3JpcGFkYSA8cmFkaGFr
cmlzaG5hLnNyaXBhZGFAaW50ZWwuY29tPgpDYzogSm9zw6kgUm9iZXJ0byBkZSBTb3V6YSA8am9z
ZS5zb3V6YUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IFN0dWFydCBTdW1tZXJzIDxzdHVhcnQu
c3VtbWVyc0BpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEx1Y2FzIERlIE1hcmNoaSA8bHVjYXMu
ZGVtYXJjaGlAaW50ZWwuY29tPgotLS0KIC4uLi9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXlfcG93ZXIuYyAgICB8ICA1ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X3Nwcml0ZS5jICAgfCAgNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fy
b3VuZHMuYyAgIHwgOTEgKysrKysrKysrKysrKysrKy0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wY2kuYyAgICAgICAgICAgICAgIHwgIDIgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9yZWcuaCAgICAgICAgICAgICAgIHwgMTAgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X3BtLmMgICAgICAgICAgICAgICB8IDE3ICsrKy0KIDYgZmlsZXMgY2hhbmdlZCwgMTA4IGluc2Vy
dGlvbnMoKyksIDIxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMKaW5kZXggM2RjMTRhOWVlMDBlLi43ZmY5YzZk
NWEzNjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheV9wb3dlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheV9wb3dlci5jCkBAIC01NDYyLDggKzU0NjIsOSBAQCBzdGF0aWMgdm9pZCB0Z2xfYndfYnVk
ZHlfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJdW5zaWduZWQgbG9u
ZyBhYm94X21hc2sgPSBJTlRFTF9JTkZPKGRldl9wcml2KS0+YWJveF9tYXNrOwogCWludCBjb25m
aWcsIGk7CiAKLQlpZiAoSVNfVEdMX1JFVklEKGRldl9wcml2LCBUR0xfUkVWSURfQTAsIFRHTF9S
RVZJRF9CMCkpCi0JCS8qIFdhXzE0MDk3NjcxMDg6IHRnbCAqLworCWlmIChJU19ERzFfUkVWSUQo
ZGV2X3ByaXYsIERHMV9SRVZJRF9BMCwgREcxX1JFVklEX0EwKSB8fAorCSAgICBJU19UR0xfUkVW
SUQoZGV2X3ByaXYsIFRHTF9SRVZJRF9BMCwgVEdMX1JFVklEX0IwKSkKKwkJLyogV2FfMTQwOTc2
NzEwODp0Z2wsZGcxICovCiAJCXRhYmxlID0gd2FfMTQwOTc2NzEwOF9idWRkeV9wYWdlX21hc2tz
OwogCWVsc2UKIAkJdGFibGUgPSB0Z2xfYnVkZHlfcGFnZV9tYXNrczsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jCmluZGV4IGMyNmNhMDI5ZmMwYS4uZDAzYTIz
OWU2OTc3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nw
cml0ZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMK
QEAgLTI4NDMsOCArMjg0Myw4IEBAIHN0YXRpYyBib29sIHNrbF9wbGFuZV9mb3JtYXRfbW9kX3N1
cHBvcnRlZChzdHJ1Y3QgZHJtX3BsYW5lICpfcGxhbmUsCiBzdGF0aWMgYm9vbCBnZW4xMl9wbGFu
ZV9zdXBwb3J0c19tY19jY3Moc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJ
CQllbnVtIHBsYW5lX2lkIHBsYW5lX2lkKQogewotCS8qIFdhXzE0MDEwNDc3MDA4OnRnbFthMC4u
YzBdLHJrbFthbGxdICovCi0JaWYgKElTX1JPQ0tFVExBS0UoZGV2X3ByaXYpIHx8CisJLyogV2Ff
MTQwMTA0NzcwMDg6dGdsW2EwLi5jMF0scmtsW2FsbF0sZGcxW2FsbF0gKi8KKwlpZiAoSVNfREcx
KGRldl9wcml2KSB8fCBJU19ST0NLRVRMQUtFKGRldl9wcml2KSB8fAogCSAgICBJU19UR0xfUkVW
SUQoZGV2X3ByaXYsIFRHTF9SRVZJRF9BMCwgVEdMX1JFVklEX0MwKSkKIAkJcmV0dXJuIGZhbHNl
OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5k
cy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYwppbmRleCA3
NDE3MTBjYTJiOWEuLjA0YWJkZTFkM2JmOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF93b3JrYXJvdW5kcy5jCkBAIC02NDEsNiArNjQxLDIwIEBAIHN0YXRpYyB2b2lkIHRnbF9j
dHhfd29ya2Fyb3VuZHNfaW5pdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAJICAg
ICAgIDApOwogfQogCitzdGF0aWMgdm9pZCBkZzFfY3R4X3dvcmthcm91bmRzX2luaXQoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAorCQkJCSAgICAgc3RydWN0IGk5MTVfd2FfbGlzdCAq
d2FsKQoreworCWdlbjEyX2N0eF93b3JrYXJvdW5kc19pbml0KGVuZ2luZSwgd2FsKTsKKworCS8q
IFdhXzE0MDkwNDQ3NjQgKi8KKwlXQV9DTFJfQklUX01BU0tFRChHRU4xMV9DT01NT05fU0xJQ0Vf
Q0hJQ0tFTjMsCisJCQkgIERHMV9GTE9BVF9QT0lOVF9CTEVORF9PUFRfU1RSSUNUX01PREVfRU4p
OworCisJLyogV2FfMjIwMTA0OTMyOTggKi8KKwlXQV9TRVRfQklUX01BU0tFRChISVpfQ0hJQ0tF
TiwKKwkJCSAgREcxX0haX1JFQURfU1VQUFJFU1NJT05fT1BUSU1JWkFUSU9OX0RJU0FCTEUpOwor
fQorCiBzdGF0aWMgdm9pZAogX19pbnRlbF9lbmdpbmVfaW5pdF9jdHhfd2Eoc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqZW5naW5lLAogCQkJICAgc3RydWN0IGk5MTVfd2FfbGlzdCAqd2FsLApAQCAt
NjUzLDcgKzY2Nyw5IEBAIF9faW50ZWxfZW5naW5lX2luaXRfY3R4X3dhKHN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZSwKIAogCXdhX2luaXRfc3RhcnQod2FsLCBuYW1lLCBlbmdpbmUtPm5h
bWUpOwogCi0JaWYgKElTX1JPQ0tFVExBS0UoaTkxNSkgfHwgSVNfVElHRVJMQUtFKGk5MTUpKQor
CWlmIChJU19ERzEoaTkxNSkpCisJCWRnMV9jdHhfd29ya2Fyb3VuZHNfaW5pdChlbmdpbmUsIHdh
bCk7CisJZWxzZSBpZiAoSVNfUk9DS0VUTEFLRShpOTE1KSB8fCBJU19USUdFUkxBS0UoaTkxNSkp
CiAJCXRnbF9jdHhfd29ya2Fyb3VuZHNfaW5pdChlbmdpbmUsIHdhbCk7CiAJZWxzZSBpZiAoSVNf
R0VOKGk5MTUsIDEyKSkKIAkJZ2VuMTJfY3R4X3dvcmthcm91bmRzX2luaXQoZW5naW5lLCB3YWwp
OwpAQCAtMTIxMywxMCArMTIyOSwzMCBAQCB0Z2xfZ3Rfd29ya2Fyb3VuZHNfaW5pdChzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgc3RydWN0IGk5MTVfd2FfbGlzdCAqd2FsKQogCQkJICAg
IEwzX0NMS0dBVEVfRElTIHwgTDNfQ1IyWF9DTEtHQVRFX0RJUyk7CiB9CiAKK3N0YXRpYyB2b2lk
CitkZzFfZ3Rfd29ya2Fyb3VuZHNfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwg
c3RydWN0IGk5MTVfd2FfbGlzdCAqd2FsKQoreworCWdlbjEyX2d0X3dvcmthcm91bmRzX2luaXQo
aTkxNSwgd2FsKTsKKworCS8qIFdhXzE2MDcwODcwNTY6ZGcxICovCisJaWYgKElTX0RHMV9SRVZJ
RChpOTE1LCBERzFfUkVWSURfQTAsIERHMV9SRVZJRF9BMCkpCisJCXdhX3dyaXRlX29yKHdhbCwK
KwkJCSAgICBTTElDRV9VTklUX0xFVkVMX0NMS0dBVEUsCisJCQkgICAgTDNfQ0xLR0FURV9ESVMg
fCBMM19DUjJYX0NMS0dBVEVfRElTKTsKKworCS8qIFdhXzE0MDk0MjA2MDQ6ZGcxICovCisJaWYg
KElTX0RHMShpOTE1KSkKKwkJd2Ffd3JpdGVfb3Iod2FsLAorCQkJICAgIFNVQlNMSUNFX1VOSVRf
TEVWRUxfQ0xLR0FURTIsCisJCQkgICAgQ1BTU1VOSVRfQ0xLR0FURV9ESVMpOworfQorCiBzdGF0
aWMgdm9pZAogZ3RfaW5pdF93b3JrYXJvdW5kcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSwgc3RydWN0IGk5MTVfd2FfbGlzdCAqd2FsKQogewotCWlmIChJU19USUdFUkxBS0UoaTkxNSkp
CisJaWYgKElTX0RHMShpOTE1KSkKKwkJZGcxX2d0X3dvcmthcm91bmRzX2luaXQoaTkxNSwgd2Fs
KTsKKwllbHNlIGlmIChJU19USUdFUkxBS0UoaTkxNSkpCiAJCXRnbF9ndF93b3JrYXJvdW5kc19p
bml0KGk5MTUsIHdhbCk7CiAJZWxzZSBpZiAoSVNfR0VOKGk5MTUsIDEyKSkKIAkJZ2VuMTJfZ3Rf
d29ya2Fyb3VuZHNfaW5pdChpOTE1LCB3YWwpOwpAQCAtMTU4MSw2ICsxNjE3LDIwIEBAIHN0YXRp
YyB2b2lkIHRnbF93aGl0ZWxpc3RfYnVpbGQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5l
KQogCX0KIH0KIAorc3RhdGljIHZvaWQgZGcxX3doaXRlbGlzdF9idWlsZChzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmUpCit7CisJc3RydWN0IGk5MTVfd2FfbGlzdCAqdyA9ICZlbmdpbmUt
PndoaXRlbGlzdDsKKworCXRnbF93aGl0ZWxpc3RfYnVpbGQoZW5naW5lKTsKKworCS8qIEdFTjpC
VUc6MTQwOTI4MDQ0MTpkZzEgKi8KKwlpZiAoSVNfREcxX1JFVklEKGVuZ2luZS0+aTkxNSwgREcx
X1JFVklEX0EwLCBERzFfUkVWSURfQTApICYmCisJICAgIChlbmdpbmUtPmNsYXNzID09IFJFTkRF
Ul9DTEFTUyB8fAorCSAgICAgZW5naW5lLT5jbGFzcyA9PSBDT1BZX0VOR0lORV9DTEFTUykpCisJ
CXdoaXRlbGlzdF9yZWdfZXh0KHcsIFJJTkdfSUQoZW5naW5lLT5tbWlvX2Jhc2UpLAorCQkJCSAg
UklOR19GT1JDRV9UT19OT05QUklWX0FDQ0VTU19SRCk7Cit9CisKIHZvaWQgaW50ZWxfZW5naW5l
X2luaXRfd2hpdGVsaXN0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIHsKIAlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGVuZ2luZS0+aTkxNTsKQEAgLTE1ODgsNyArMTYz
OCw5IEBAIHZvaWQgaW50ZWxfZW5naW5lX2luaXRfd2hpdGVsaXN0KHN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZSkKIAogCXdhX2luaXRfc3RhcnQodywgIndoaXRlbGlzdCIsIGVuZ2luZS0+
bmFtZSk7CiAKLQlpZiAoSVNfR0VOKGk5MTUsIDEyKSkKKwlpZiAoSVNfREcxKGk5MTUpKQorCQlk
ZzFfd2hpdGVsaXN0X2J1aWxkKGVuZ2luZSk7CisJZWxzZSBpZiAoSVNfR0VOKGk5MTUsIDEyKSkK
IAkJdGdsX3doaXRlbGlzdF9idWlsZChlbmdpbmUpOwogCWVsc2UgaWYgKElTX0dFTihpOTE1LCAx
MSkpCiAJCWljbF93aGl0ZWxpc3RfYnVpbGQoZW5naW5lKTsKQEAgLTE2NDIsMTUgKzE2OTQsMTgg
QEAgcmNzX2VuZ2luZV93YV9pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgc3Ry
dWN0IGk5MTVfd2FfbGlzdCAqd2FsKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
ID0gZW5naW5lLT5pOTE1OwogCi0JaWYgKElTX1RHTF9SRVZJRChpOTE1LCBUR0xfUkVWSURfQTAs
IFRHTF9SRVZJRF9BMCkpIHsKKwlpZiAoSVNfREcxX1JFVklEKGk5MTUsIERHMV9SRVZJRF9BMCwg
REcxX1JFVklEX0EwKSB8fAorCSAgICBJU19UR0xfUkVWSUQoaTkxNSwgVEdMX1JFVklEX0EwLCBU
R0xfUkVWSURfQTApKSB7CiAJCS8qCi0JCSAqIFdhXzE2MDcxMzgzMzY6dGdsCi0JCSAqIFdhXzE2
MDcwNjM5ODg6dGdsCisJCSAqIFdhXzE2MDcxMzgzMzY6dGdsW2EwXSxkZzFbYTBdCisJCSAqIFdh
XzE2MDcwNjM5ODg6dGdsW2EwXSxkZzFbYTBdCiAJCSAqLwogCQl3YV93cml0ZV9vcih3YWwsCiAJ
CQkgICAgR0VOOV9DVFhfUFJFRU1QVF9SRUcsCiAJCQkgICAgR0VOMTJfRElTQUJMRV9QT1NIX0JV
U1lfRkZfRE9QX0NHKTsKKwl9CiAKKwlpZiAoSVNfVEdMX1JFVklEKGk5MTUsIFRHTF9SRVZJRF9B
MCwgVEdMX1JFVklEX0EwKSkgewogCQkvKgogCQkgKiBXYV8xNjA2Njc5MTAzOnRnbAogCQkgKiAo
c2VlIGFsc28gV2FfMTYwNjY4MjE2NjppY2wpCkBAIC0xNjY1LDMwICsxNzIwLDQwIEBAIHJjc19l
bmdpbmVfd2FfaW5pdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIHN0cnVjdCBpOTE1
X3dhX2xpc3QgKndhbCkKIAkJCSAgICBHRU4xMl9GRl9URVNTRUxBVElPTl9ET1BfR0FURV9ESVNB
QkxFKTsKIAogCQkvKiBXYV8xNDA4NjE1MDcyOnRnbCAqLworCX0KKworCWlmIChJU19ERzEoaTkx
NSkgfHwgSVNfVEdMX1JFVklEKGk5MTUsIFRHTF9SRVZJRF9BMCwgVEdMX1JFVklEX0EwKSkgewor
CQkvKiBXYV8xNDA4NjE1MDcyOnRnbFthMF0sZGcxICovCiAJCXdhX3dyaXRlX29yKHdhbCwgVU5T
TElDRV9VTklUX0xFVkVMX0NMS0dBVEUyLAogCQkJICAgIFZTVU5JVF9DTEtHQVRFX0RJU19UR0wp
OwogCX0KIAotCWlmIChJU19ST0NLRVRMQUtFKGk5MTUpIHx8IElTX1RJR0VSTEFLRShpOTE1KSkg
ewotCQkvKiBXYV8xNjA2OTMxNjAxOnRnbCxya2wgKi8KKwlpZiAoSVNfREcxKGk5MTUpIHx8IElT
X1JPQ0tFVExBS0UoaTkxNSkgfHwgSVNfVElHRVJMQUtFKGk5MTUpKSB7CisJCS8qIFdhXzE2MDY5
MzE2MDE6dGdsLHJrbCxkZzEgKi8KIAkJd2FfbWFza2VkX2VuKHdhbCwgR0VON19ST1dfQ0hJQ0tF
TjIsIEdFTjEyX0RJU0FCTEVfRUFSTFlfUkVBRCk7CisJfQogCi0JCS8qIFdhXzE0MDk4MDQ4MDg6
dGdsLHJrbCAqLworCWlmIChJU19ERzFfUkVWSUQoaTkxNSwgREcxX1JFVklEX0EwLCBERzFfUkVW
SURfQTApIHx8CisJICAgIElTX1JPQ0tFVExBS0UoaTkxNSkgfHwgSVNfVElHRVJMQUtFKGk5MTUp
KSB7CisJCS8qIFdhXzE0MDk4MDQ4MDg6dGdsLHJrbCxkZzFbYTBdICovCiAJCXdhX21hc2tlZF9l
bih3YWwsIEdFTjdfUk9XX0NISUNLRU4yLAogCQkJICAgICBHRU4xMl9QVVNIX0NPTlNUX0RFUkVG
X0hPTERfRElTKTsKIAogCQkvKgogCQkgKiBXYV8xNDA5MDg1MjI1OnRnbAotCQkgKiBXYV8xNDAx
MDIyOTIwNjp0Z2wscmtsCisJCSAqIFdhXzE0MDEwMjI5MjA2OnRnbCxya2wsZGcxW2EwXQogCQkg
Ki8KIAkJd2FfbWFza2VkX2VuKHdhbCwgR0VOOV9ST1dfQ0hJQ0tFTjQsIEdFTjEyX0RJU0FCTEVf
VERMX1BVU0gpOwogCiAJCS8qCiAJCSAqIFdhXzE2MDcwMzAzMTc6dGdsCiAJCSAqIFdhXzE2MDcx
ODY1MDA6dGdsCi0JCSAqIFdhXzE2MDcyOTc2Mjc6dGdsLHJrbCB0aGVyZSBhcmUgbXVsdGlwbGUg
ZW50cmllcyBmb3IgdGhpcwotCQkgKiBXQSBpbiB0aGUgQlNwZWM7IHNvbWUgaW5kaWNhdGUgdGhp
cyBpcyBhbiBBMC1vbmx5IFdBLAotCQkgKiBvdGhlcnMgaW5kaWNhdGUgaXQgYXBwbGllcyB0byBh
bGwgc3RlcHBpbmdzLgorCQkgKiBXYV8xNjA3Mjk3NjI3OnRnbCxya2wsZGcxW2EwXQorCQkgKgor
CQkgKiBPbiBUR0wgYW5kIFJLTCB0aGVyZSBhcmUgbXVsdGlwbGUgZW50cmllcyBmb3IgdGhpcyBX
QSBpbiB0aGUKKwkJICogQlNwZWM7IHNvbWUgaW5kaWNhdGUgdGhpcyBpcyBhbiBBMC1vbmx5IFdB
LCBvdGhlcnMgaW5kaWNhdGUKKwkJICogaXQgYXBwbGllcyB0byBhbGwgc3RlcHBpbmdzIHNvIHdl
IHRydXN0IHRoZSAiYWxsIHN0ZXBwaW5ncy4iCisJCSAqIEZvciBERzEgdGhpcyBvbmx5IGFwcGxp
ZXMgdG8gQTAuCiAJCSAqLwogCQl3YV9tYXNrZWRfZW4od2FsLAogCQkJICAgICBHRU42X1JDX1NM
RUVQX1BTTUlfQ09OVFJPTCwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
cGNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BjaS5jCmluZGV4IDhjYWU2NGFkYmIy
My4uZDUxNTQ2OGJiYjIxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Bj
aS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGNpLmMKQEAgLTkwOCw2ICs5MDgs
OCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RldmljZV9pbmZvIGRnMV9pbmZvID0gewog
CS5lbmdpbmVfbWFzayA9CiAJCUJJVChSQ1MwKSB8IEJJVChCQ1MwKSB8IEJJVChWRUNTMCkgfAog
CQlCSVQoVkNTMCkgfCBCSVQoVkNTMiksCisJLyogV2FfMTYwMTEyMjc5MjIgKi8KKwkucHBndHRf
c2l6ZSA9IDQ3LAogfTsKIAogI3VuZGVmIEdFTgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9yZWcuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKaW5kZXgg
NTkxYjMwZWViN2ZkLi5iNjkwN2E3YzdmNmUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVnLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaApAQCAt
MjUyMCw2ICsyNTIwLDcgQEAgc3RhdGljIGlubGluZSBib29sIGk5MTVfbW1pb19yZWdfdmFsaWQo
aTkxNV9yZWdfdCByZWcpCiAjZGVmaW5lIFJJTkdfUFNNSV9DVEwoYmFzZSkJX01NSU8oKGJhc2Up
ICsgMHg1MCkKICNkZWZpbmUgUklOR19NQVhfSURMRShiYXNlKQlfTU1JTygoYmFzZSkgKyAweDU0
KQogI2RlZmluZSBSSU5HX0hXU19QR0EoYmFzZSkJX01NSU8oKGJhc2UpICsgMHg4MCkKKyNkZWZp
bmUgUklOR19JRChiYXNlKQkJX01NSU8oKGJhc2UpICsgMHg4YykKICNkZWZpbmUgUklOR19IV1Nf
UEdBX0dFTjYoYmFzZSkJX01NSU8oKGJhc2UpICsgMHgyMDgwKQogI2RlZmluZSBSSU5HX1JFU0VU
X0NUTChiYXNlKQlfTU1JTygoYmFzZSkgKyAweGQwKQogI2RlZmluZSAgIFJFU0VUX0NUTF9DQVRf
RVJST1IJICAgUkVHX0JJVCgyKQpAQCAtNDEzMiw2ICs0MTMzLDcgQEAgZW51bSB7CiAKICNkZWZp
bmUgR0VOOV9DTEtHQVRFX0RJU18zCQlfTU1JTygweDQ2NTM4KQogI2RlZmluZSAgIFRHTF9WUkhf
R0FUSU5HX0RJUwkJUkVHX0JJVCgzMSkKKyNkZWZpbmUgICBEUFRfR0FUSU5HX0RJUwkJUkVHX0JJ
VCgyMikKIAogI2RlZmluZSBHRU45X0NMS0dBVEVfRElTXzQJCV9NTUlPKDB4NDY1M0MpCiAjZGVm
aW5lICAgQlhUX0dNQlVTX0dBVElOR19ESVMJCSgxIDw8IDE0KQpAQCAtODAxMSwxMiArODAxMywx
NCBAQCBlbnVtIHsKICNkZWZpbmUgR0VOOF9MM0NOVExSRUcJX01NSU8oMHg3MDM0KQogICAjZGVm
aW5lIEdFTjhfRVJSREVUQkNUUkwgKDEgPDwgOSkKIAotI2RlZmluZSBHRU4xMV9DT01NT05fU0xJ
Q0VfQ0hJQ0tFTjMJCV9NTUlPKDB4NzMwNCkKLSAgI2RlZmluZSBHRU4xMV9CTEVORF9FTUJfRklY
X0RJU0FCTEVfSU5fUkNDCSgxIDw8IDExKQotICAjZGVmaW5lIEdFTjEyX0RJU0FCTEVfQ1BTX0FX
QVJFX0NPTE9SX1BJUEUJKDEgPDwgOSkKKyNkZWZpbmUgR0VOMTFfQ09NTU9OX1NMSUNFX0NISUNL
RU4zCQkJX01NSU8oMHg3MzA0KQorI2RlZmluZSAgIERHMV9GTE9BVF9QT0lOVF9CTEVORF9PUFRf
U1RSSUNUX01PREVfRU4JUkVHX0JJVCgxMikKKyNkZWZpbmUgICBHRU4xMV9CTEVORF9FTUJfRklY
X0RJU0FCTEVfSU5fUkNDCQlSRUdfQklUKDExKQorI2RlZmluZSAgIEdFTjEyX0RJU0FCTEVfQ1BT
X0FXQVJFX0NPTE9SX1BJUEUJCVJFR19CSVQoOSkKIAogI2RlZmluZSBISVpfQ0hJQ0tFTgkJCQkJ
X01NSU8oMHg3MDE4KQogIyBkZWZpbmUgQ0hWX0haXzhYOF9NT0RFX0lOXzFYCQkJCSgxIDw8IDE1
KQorIyBkZWZpbmUgREcxX0haX1JFQURfU1VQUFJFU1NJT05fT1BUSU1JWkFUSU9OX0RJU0FCTEUg
ICAoMSA8PCAxNCkKICMgZGVmaW5lIEJEV19ISVpfUE9XRVJfQ09NUElMRVJfQ0xPQ0tfR0FUSU5H
X0RJU0FCTEUJKDEgPDwgMykKIAogI2RlZmluZSBHRU45X1NMSUNFX0NPTU1PTl9FQ09fQ0hJQ0tF
TjAJCV9NTUlPKDB4NzMwOCkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X3BtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jCmluZGV4IDU2NWEyYjlkYTNi
My4uZTY4NWQ2YmJkNjA5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9w
bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKQEAgLTcxMzIsNiArNzEz
MiwxOSBAQCBzdGF0aWMgdm9pZCB0Z2xfaW5pdF9jbG9ja19nYXRpbmcoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2KQogCQkJIDAsIERGUl9ESVNBQkxFKTsKIH0KIAorc3RhdGljIHZv
aWQgZGcxX2luaXRfY2xvY2tfZ2F0aW5nKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dikKK3sKKwkvKgorCSAqIEFzIG9wcG9zZWQgdG8gVEdMLCB3ZSBzaG91bGQgbm90IHRvdWNoIHRo
ZSByZWdpc3RlcnMgZm9yICBtZWRpYSBwb3dlcgorCSAqIGdhdGluZworCSAqLworCisJLyogV2Ff
MTQwMTAwOTY4NDQ6ZGcxW2EwXSAqLworCWlmIChJU19ERzFfUkVWSUQoZGV2X3ByaXYsIERHMV9S
RVZJRF9BMCwgREcxX1JFVklEX0EwKSkKKwkJSTkxNV9XUklURShHRU45X0NMS0dBVEVfRElTXzMs
IEk5MTVfUkVBRChHRU45X0NMS0dBVEVfRElTXzMpIHwKKwkJCSAgIERQVF9HQVRJTkdfRElTKTsK
K30KKwogc3RhdGljIHZvaWQgY25wX2luaXRfY2xvY2tfZ2F0aW5nKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdikKIHsKIAlpZiAoIUhBU19QQ0hfQ05QKGRldl9wcml2KSkKQEAgLTc1
MDgsNyArNzUyMSw5IEBAIHN0YXRpYyB2b2lkIG5vcF9pbml0X2Nsb2NrX2dhdGluZyhzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAgKi8KIHZvaWQgaW50ZWxfaW5pdF9jbG9ja19n
YXRpbmdfaG9va3Moc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogewotCWlmIChJ
U19HRU4oZGV2X3ByaXYsIDEyKSkKKwlpZiAoSVNfREcxKGRldl9wcml2KSkKKwkJZGV2X3ByaXYt
PmRpc3BsYXkuaW5pdF9jbG9ja19nYXRpbmcgPSBkZzFfaW5pdF9jbG9ja19nYXRpbmc7CisJZWxz
ZSBpZiAoSVNfR0VOKGRldl9wcml2LCAxMikpCiAJCWRldl9wcml2LT5kaXNwbGF5LmluaXRfY2xv
Y2tfZ2F0aW5nID0gdGdsX2luaXRfY2xvY2tfZ2F0aW5nOwogCWVsc2UgaWYgKElTX0dFTihkZXZf
cHJpdiwgMTEpKQogCQlkZXZfcHJpdi0+ZGlzcGxheS5pbml0X2Nsb2NrX2dhdGluZyA9IGljbF9p
bml0X2Nsb2NrX2dhdGluZzsKLS0gCjIuMjYuMgoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vaW50ZWwtZ2Z4Cg==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 983F2D4267
	for <lists+intel-gfx@lfdr.de>; Fri, 11 Oct 2019 16:10:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 293466EC46;
	Fri, 11 Oct 2019 14:10:50 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 56E8A6EC46
 for <intel-gfx@lists.freedesktop.org>; Fri, 11 Oct 2019 14:10:48 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 18805184-1500050 for multiple; Fri, 11 Oct 2019 15:10:45 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20191010071434.31195-7-chris@chris-wilson.co.uk>
 <20191011111601.26850-1-chris@chris-wilson.co.uk>
 <cdf1bb4b-b134-0ef7-f59a-9a7c5b679061@linux.intel.com>
In-Reply-To: <cdf1bb4b-b134-0ef7-f59a-9a7c5b679061@linux.intel.com>
Message-ID: <157080304275.31572.6006894956600550133@skylake-alporthouse-com>
Date: Fri, 11 Oct 2019 15:10:42 +0100
Subject: Re: [Intel-gfx] [PATCH v2] drm/i915/execlists: Cancel banned
 contexts on schedule-out
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBUdnJ0a28gVXJzdWxpbiAoMjAxOS0xMC0xMSAxNDoxMDoyMSkKPiAKPiBPbiAxMS8x
MC8yMDE5IDEyOjE2LCBDaHJpcyBXaWxzb24gd3JvdGU6Cj4gPiBPbiBzY2hlZHVsZS1vdXQgKENT
IGNvbXBsZXRpb24pIG9mIGEgYmFubmVkIGNvbnRleHQsIHNjcnViIHRoZSBjb250ZXh0Cj4gPiBp
bWFnZSBzbyB0aGF0IHdlIGRvIG5vdCByZXBsYXkgdGhlIGFjdGl2ZSBwYXlsb2FkLiBUaGUgaW50
ZW50IGlzIHRoYXQgd2UKPiA+IHNraXAgYmFubmVkIHBheWxvYWRzIG9uIHJlcXVlc3Qgc3VibWlz
c2lvbiBzbyB0aGF0IHRoZSB0aW1lbGluZQo+ID4gYWR2YW5jZW1lbnQgY29udGludWVzIG9uIGlu
IHRoZSBiYWNrZ3JvdW5kLiBIb3dldmVyLCBpZiB3ZSBhcmUgcmV0dXJuaW5nCj4gPiB0byBhIHBy
ZWVtcHRlZCByZXF1ZXN0LCBpOTE1X3JlcXVlc3Rfc2tpcCgpIGlzIGluZWZmZWN0aXZlIGFuZCBp
bnN0ZWFkIHdlCj4gPiBuZWVkIHRvIHBhdGNoIHVwIHRoZSBjb250ZXh0IGltYWdlIHNvIHRoYXQg
aXQgY29udGludWVzIGZyb20gdGhlIHN0YXJ0Cj4gPiBvZiB0aGUgbmV4dCByZXF1ZXN0Lgo+ID4g
Cj4gPiB2MjogRml4dXAgY2FuY2VsbGF0aW9uIHNvIHRoYXQgd2Ugb25seSBzY3J1YiB0aGUgcGF5
bG9hZCBvZiB0aGUgYWN0aXZlCj4gPiByZXF1ZXN0IGFuZCBkbyBub3Qgc2hvcnQtY2lyY3VpdCB0
aGUgYnJlYWRjcnVtYnMgKHdoaWNoIG1pZ2h0IGNhdXNlCj4gPiBvdGhlciBjb250ZXh0cyB0byBl
eGVjdXRlIG91dCBvZiBvcmRlcikuCj4gPiAKPiA+IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNv
biA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+ID4gQ2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0
a28udXJzdWxpbkBpbnRlbC5jb20+Cj4gPiAtLS0KPiA+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfbHJjLmMgICAgfCAgOTEgKysrKysrLS0tCj4gPiAgIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3NlbGZ0ZXN0X2xyYy5jIHwgMjczICsrKysrKysrKysrKysrKysrKysrKysrKysKPiA+
ICAgMiBmaWxlcyBjaGFuZ2VkLCAzNDEgaW5zZXJ0aW9ucygrKSwgMjMgZGVsZXRpb25zKC0pCj4g
PiAKPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCj4gPiBpbmRleCAwOWZjNWVjZmRk
MDkuLjgwOWE1ZGQ5N2MxNCAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2xyYy5jCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMu
Ywo+ID4gQEAgLTIzNCw2ICsyMzQsOSBAQCBzdGF0aWMgdm9pZCBleGVjbGlzdHNfaW5pdF9yZWdf
c3RhdGUodTMyICpyZWdfc3RhdGUsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKPiA+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0IGludGVsX3JpbmcgKnJpbmcsCj4g
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgY2xvc2UpOwo+ID4gK3N0
YXRpYyB2b2lkCj4gPiArX19leGVjbGlzdHNfdXBkYXRlX3JlZ19zdGF0ZShjb25zdCBzdHJ1Y3Qg
aW50ZWxfY29udGV4dCAqY2UsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwo+ID4gICAKPiA+ICAgc3RhdGljIHZvaWQg
X19jb250ZXh0X3Bpbl9hY3F1aXJlKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKPiA+ICAgewo+
ID4gQEAgLTI1Niw2ICsyNTksMjkgQEAgc3RhdGljIHZvaWQgbWFya19laW8oc3RydWN0IGk5MTVf
cmVxdWVzdCAqcnEpCj4gPiAgICAgICBpOTE1X3JlcXVlc3RfbWFya19jb21wbGV0ZShycSk7Cj4g
PiAgIH0KPiA+ICAgCj4gPiArc3RhdGljIHN0cnVjdCBpOTE1X3JlcXVlc3QgKmFjdGl2ZV9yZXF1
ZXN0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQo+ID4gK3sKPiA+ICsgICAgIGNvbnN0IHN0cnVj
dCBpbnRlbF9jb250ZXh0ICogY29uc3QgY2UgPSBycS0+aHdfY29udGV4dDsKPiA+ICsgICAgIHN0
cnVjdCBpOTE1X3JlcXVlc3QgKmFjdGl2ZSA9IE5VTEw7Cj4gPiArICAgICBzdHJ1Y3QgbGlzdF9o
ZWFkICpsaXN0Owo+ID4gKwo+ID4gKyAgICAgaWYgKCFpOTE1X3JlcXVlc3RfaXNfYWN0aXZlKHJx
KSkgLyogdW53b3VuZCwgYnV0IGluY29tcGxldGUhICovCj4gPiArICAgICAgICAgICAgIHJldHVy
biBycTsKPiA+ICsKPiA+ICsgICAgIGxpc3QgPSAmaTkxNV9yZXF1ZXN0X2FjdGl2ZV90aW1lbGlu
ZShycSktPnJlcXVlc3RzOwo+ID4gKyAgICAgbGlzdF9mb3JfZWFjaF9lbnRyeV9mcm9tX3JldmVy
c2UocnEsIGxpc3QsIGxpbmspIHsKPiA+ICsgICAgICAgICAgICAgaWYgKGk5MTVfcmVxdWVzdF9j
b21wbGV0ZWQocnEpKQo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ID4gKwo+ID4g
KyAgICAgICAgICAgICBpZiAocnEtPmh3X2NvbnRleHQgIT0gY2UpCj4gPiArICAgICAgICAgICAg
ICAgICAgICAgYnJlYWs7Cj4gCj4gV291bGQgaXQgYmUgb2YgYW55IHZhbHVlIGhlcmUgdG8gYWxz
byBjaGVjayB0aGUgaW5pdGlhbCBicmVhZGNydW1iIG1hdGNoZXM/CgpOb3QgY3VycmVudGx5LiBJ
IGRvbid0IGl0IG1ha2VzIGFueSBkaWZmZXJlbmNlIHdoZXRoZXIgb3Igbm90IHdlIGFyZQppbnNp
ZGUgdGhlIHBheWxvYWQgb24gY2FuY2VsX2FjdGl2ZSgpIHBhdGggYXMgd2Uga25vdyB3ZSBhbiBh
Y3RpdmUKY29udGV4dC4gTW9yZSBmdW4gYW5kIGdhbWVzIGZvciB0aGUgcmVzZXQgcGF0aCBhcyB3
ZSBuZWVkIHRvIG1pbmltaXNlCmNvbGxhdGVyYWwgZGFtYWdlLgoKPiA+ICtzdGF0aWMgdm9pZCBj
YW5jZWxfYWN0aXZlKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAo+ID4gKyAgICAgICAgICAgICAg
ICAgICAgICAgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQo+ID4gK3sKPiA+ICsgICAg
IHN0cnVjdCBpbnRlbF9jb250ZXh0ICogY29uc3QgY2UgPSBycS0+aHdfY29udGV4dDsKPiA+ICsg
ICAgIHUzMiAqcmVncyA9IGNlLT5scmNfcmVnX3N0YXRlOwo+ID4gKwo+ID4gKyAgICAgLyoKPiA+
ICsgICAgICAqIFRoZSBleGVjdXRpbmcgY29udGV4dCBoYXMgYmVlbiBjYW5jZWxsZWQuIEZpeHVw
IHRoZSBjb250ZXh0IHNvIHRoYXQKPiA+ICsgICAgICAqIGl0IGNvbnRpbnVlcyBvbiBmcm9tIHRo
ZSBicmVhZGNydW1iIGFmdGVyIHRoZSBiYXRjaCBhbmQgd2lsbCBiZQo+ID4gKyAgICAgICogbWFy
a2VkIGFzIGluY29tcGxldGUgWy1FSU9dIHVwb24gc2lnbmFsaW5nLiBXZSBwcmVzZXJ2ZSB0aGUK
PiAKPiBXaGVyZSBkb2VzIHRoZSAtRUlPIG1hcmtpbmcgaGFwcGVuIG5vdz8KCk9uIHRoZSBuZXh0
IF9faTkxNV9yZXF1ZXN0X3N1Ym1pdCgpCgo+ID4gKyAgICAgICogYnJlYWRjcnVtYnMgYW5kIHNl
bWFwaG9yZXMgb2YgdGhlIHN1YnNlcXVlbnQgcmVxdWVzdHMgc28gdGhhdAo+ID4gKyAgICAgICog
aW50ZXItdGltZWxpbmUgZGVwZW5kZW5jaWVzIHJlbWFpbiBjb3JyZWN0bHkgb3JkZXJlZC4KPiA+
ICsgICAgICAqLwo+ID4gKyAgICAgR0VNX1RSQUNFKCIlcyglcyk6IHsgcnE9JWxseDolbGxkIH1c
biIsCj4gPiArICAgICAgICAgICAgICAgX19mdW5jX18sIGVuZ2luZS0+bmFtZSwgcnEtPmZlbmNl
LmNvbnRleHQsIHJxLT5mZW5jZS5zZXFubyk7Cj4gPiArCj4gPiArICAgICBfX2NvbnRleHRfcGlu
X2FjcXVpcmUoY2UpOwo+ID4gKwo+ID4gKyAgICAgLyogT24gcmVzdWJtaXNzaW9uIG9mIHRoZSBh
Y3RpdmUgcmVxdWVzdCwgaXQncyBwYXlsb2FkIGJlIHNjcnViYmVkICovCj4gPiArICAgICBycSA9
IGFjdGl2ZV9yZXF1ZXN0KHJxKTsKPiA+ICsgICAgIGlmIChycSkKPiA+ICsgICAgICAgICAgICAg
Y2UtPnJpbmctPmhlYWQgPSBpbnRlbF9yaW5nX3dyYXAoY2UtPnJpbmcsIHJxLT5oZWFkKTsKPiA+
ICsgICAgIGVsc2UKPiA+ICsgICAgICAgICAgICAgY2UtPnJpbmctPmhlYWQgPSBjZS0+cmluZy0+
dGFpbDsKPiAKPiBJIGRvbid0IHF1aXRlIHVuZGVyc3RhbmQgeWV0Lgo+IAo+IElmIGEgY29udGV4
dCB3YXMgYmFubmVkIEknZCBleHBlY3QgYWxsIHJlcXVlc3RzIG9uIHRoZSB0bC0+cmVxdWVzdHMg
dG8gCj4gYmUgemFwcGVkIGFuZCB3ZSBvbmx5IG1vdmUgdG8gZXhlY3V0ZSB0aGUgbGFzdCBicmVh
ZGNydW1iLCBubz8KCldlIGRvIHphcCB0aGVtIGFsbCwgb24gX19pOTE1X3JlcXVlc3Rfc3VibWl0
KCkuIFdoYXQgd2UgYXJlIHByZXNlcnZpbmcKaXMgdGhlIGRlcGVuZGVuY3kgY2hhaW5zIGFzIHdl
IGRvbid0IHdhbnQgdG8gZW1pdCB0aGUgZmluYWwgYnJlYWRjcnVtYgpiZWZvcmUgaXRzIGRlcGVu
ZGVuY2llcyBoYXZlIGJlZW4gc2lnbmFsZWQuIChPdGhlcndpc2Ugb3VyIG9wdGltaXNhdGlvbgpv
ZiBvbmx5IHdhaXRpbmcgZm9yIHRoZSBlbmQgb2YgdGhlIGNoYWluIHdpbGwgYmUgYnJva2VuLCBh
cyB0aGF0IGNvbnRleHQKd2lsbCBiZWdpbiBiZWZvcmUgaXRzIHByZXJlcXVpc2l0ZXMgaGF2ZSBy
dW4uKQogCj4gU28gaWYgeW91IGZpbmQgdGhlIGFjdGl2ZV9yZXF1ZXN0IGFuZCB5b3Ugc2V0IHJp
bmcgaGVhZCB0byAKPiBhY3RpdmVfcnEtPmhlYWQgaG93IGRvZXMgdGhhdCBza2lwIHRoZSBwYXls
b2FkPwoKV2UgZG8gbWVtc2V0KHJxLT5pbmZpeCwgMCwgcnEtPnBvc3RmaXgtcnEtPmluZml4KSBp
bgpfX2k5MTVfcmVxdWVzdF9zdWJtaXQoKSBpZiAoY29udGV4dF9pc19iYW5uZWQpCgo+IEZ1cnRo
ZXJtb3JlLCBpZiBJIHRyeSB0byBza2V0Y2ggdGhlIHJxLT5yZXF1ZXN0cyB0aW1lbGluZSBsaWtl
IHRoaXM6Cj4gCj4gICAgUjAgcjEgcjIgcltlbHNwXSByNCByNQo+IAo+ICdSJyA9IGNvbXBsZXRl
ZDsgJ3InID0gaW5jb21wbGV0ZQo+IAo+IE9uIHNjaGVkdWxlX291dChyW2Vsc3BdKSBJJ2QgZXhw
ZWN0IHlvdSB3YW50IHRvIGZpbmQgcjUgYW5kIHNldCByaW5nIAo+IGhlYWQgdG8gZmluYWwgYnJl
YWRjcnVtYiBvZiBpdC4gQW5kIG1hcmsgcjEtcjUgYW5kIC1FSU8uIEFtIEkgY29tcGxldGVseSAK
PiBvbiB0aGUgd3JvbmcgdHJhY2s/Cj4gCj4gKEJlYXIgd2l0aCBtZSB3aXRoIHI0IGFuZCByNSwg
YXNzdW1pbmcgc29tZW9uZSBoYXMgc2V0IHRoZSBjb250ZXh0IGFzIAo+IHNpbmdsZSBzdWJtaXNz
aW9uIGZvciBmdXR1cmUgcHJvb2ZpbmcgdGhlIGNvZGUuKQoKSWYgd2Ugb25seSBoYWQgdG8gYmUg
Y29uY2VybmVkIGFib3V0IHRoaXMgdGltZWxpbmUsIHN1cmUsIHdlIGNvdWxkIGp1c3QKc2tpcCB0
byB0aGUgZW5kLiBJdCdzIHRpbWVsaW5lIEMgdGhhdCB3YXMgd2FpdGluZyBvbiB0aW1lbGluZSBB
IHZpYQp0aW1lbGluZSBCLCB3ZSBoYXZlIHRvIGJlIGNvbmNlcm5lZCBhYm91dCB3aGVuIGNhbmNl
bGxpbmcgdGltZWxpbmUgQi4KLUNocmlzCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2ludGVsLWdmeA==

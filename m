Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 918ED10C972
	for <lists+intel-gfx@lfdr.de>; Thu, 28 Nov 2019 14:28:12 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DC6476E808;
	Thu, 28 Nov 2019 13:28:10 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6BB576E05A
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Nov 2019 13:28:00 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19376512-1500050 
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Nov 2019 13:27:56 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 28 Nov 2019 13:27:53 +0000
Message-Id: <20191128132755.3919528-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 1/3] drm/i915: Allow i915 to manage the vma offset
 nodes instead of drm core
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogQWJkaWVsIEphbnVsZ3VlIDxhYmRpZWwuamFudWxndWVAbGludXguaW50ZWwuY29tPgoK
SGF2ZSBpOTE1IHJlcGxhY2UgdGhlIGNvcmUgZHJtX2dlbV9tbWFwIGltcGxlbWVudGF0aW9uIHRv
IG92ZXJjb21lIGl0cwpsaW1pdGF0aW9uIGluIGhhdmluZyBvbmx5IGEgc2luZ2xlIG1tYXAgb2Zm
c2V0IG5vZGUgcGVyIGdlbSBvYmplY3QuClRoaXMgY2hhbmdlIGFsbG93cyB1cyB0byBoYXZlIG11
bHRpcGxlIG1tYXAgb2Zmc2V0cyBwZXIgb2JqZWN0IGFuZAplbmFibGVzIGEgbW1hcHBpbmcgaW5z
dGFuY2UgdG8gdXNlIHVuaXF1ZSBmYXVsdC1oYW5kbGVycyBwZXIgdXNlciB2bWEuCgpUaGlzIGFs
bG93cyBpOTE1IHRvIHN0b3JlIGV4dHJhIGRhdGEgd2l0aGluIHZtYS0+dm1fcHJpdmF0ZV9kYXRh
IGFuZAphc3NpZ24gdGhlIHBhZ2VmYXVsdCBvcHMgZm9yIGVhY2ggbW1hcCBpbnN0YW5jZSBhbGxv
d2luZyBvYmplY3RzIHRvIHVzZQptdWx0aXBsZSBmYXVsdCBoYW5kbGVycyBkZXBlbmRpbmcgb24g
aXRzIGJhY2tpbmcgc3RvcmFnZS4KCnYyOgogLSBGaXggcmFjZSBjb25kaXRpb24gZXhwb3NlZCBi
eSBnZW1fbW1hcF9ndHRAY2xvc2UtcmFjZS4gU2ltcGxpZnkKICAgbGlmZXRpbWUgbWFuYWdlbWVu
dCBvZiB0aGUgbW1hcCBvZmZzZXQgb2JqZWN0cyBiZSBlbnN1cmluZyBpdCBpcwogICBvd25lZCBi
eSB0aGUgcGFyZW50IGdlbSBvYmplY3QgaW5zdGVhZCBvZiByZWZjb3VudGluZy4KIC0gVHJhY2sg
bW1vIHVzZWQgYnkgZmVuY2luZyB0byBhdm9pZCBsb2NraW5nIHdoZW4gcmV2b2tpbmcgbW1hcHMK
ICAgZHVyaW5nIEdQVSByZXNldC4KIC0gUmViYXNlLgp2MzoKIC0gU2ltcGxpZnkgbW1vIHRyYWNr
aW5nCnY0OgogLSB1c2Ugdm1hLT5tbW8gaW4gX19pOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFw
X2d0dAp2NToKIC0gUmV2b2tlIENQVSBtbWFwcyBvbiBpOTE1X2dlbV9vYmplY3RfdW5iaW5kKCkg
c2luY2UgdW5saWtlIEdUVAogICBtbWFwcywgdGhleSBkb24ndCBoYXZlIGJvdW5kIGk5MTVfdm1h
IG9iamVjdHMuIFJlYmFzZS4KdjY6IE1pbm9yIHR3ZWFrcywgaGVhZGVyIHJlLW9yZyAoQ2hyaXMp
CnY3OgotIENhbGwgZHJtX3ZtYV9ub2RlX3Jldm9rZSBmb3IgdGhlIG1tbyB3aXRoIGNvcnJlc3Bv
bmRpbmcgZmlsZSB3aGVuCiAgcmVsZWFzaW5nIHRoZSBnZW0gaGFuZGxlIGluc3RlYWQgb2YgaW4g
dGhlIG1tbydzIHRlYXJkb3duLgotIEFkZCBmbGFnIEk5MTVfQk9fUkVBRE9OTFkgaW5zdGVhZCBv
ZiBvYmotPnJlYWRvbmx5LgoKU2lnbmVkLW9mZi1ieTogQWJkaWVsIEphbnVsZ3VlIDxhYmRpZWwu
amFudWxndWVAbGludXguaW50ZWwuY29tPgpDYzogTWF0dGhldyBBdWxkIDxtYXR0aGV3LmF1bGRA
aW50ZWwuY29tPgpDYzogSm9vbmFzIExhaHRpbmVuIDxqb29uYXMubGFodGluZW5AbGludXguaW50
ZWwuY29tPgpDYzogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+ClJldmll
d2VkLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG9tYWluLmMgICAgfCAgIDMgKy0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmMgICAgICB8IDI0MSArKysrKysrKysr
KysrKystLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmggICAgICB8
ICAyOCArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5jICAgIHwg
IDE4ICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmggICAgfCAg
IDcgKy0KIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oICB8ICAx
OSArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BhZ2VzLmMgICAgIHwgICAz
ICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90aWxpbmcuYyAgICB8ICAgMSAr
CiAuLi4vZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9tbWFuLmMgICAgfCAgMjAgKy0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMgICAgICAgICB8ICAgNyArLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyAgICAgICAgICAgICAgIHwgIDExICstCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oICAgICAgICAgICAgICAgfCAgIDMgLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyAgICAgICAgICAgICAgIHwgICAzICstCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dldHBhcmFtLmMgICAgICAgICAgfCAgIDEgKwogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYyAgICAgICAgICAgICAgIHwgICAzICstCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5oICAgICAgICAgICAgICAgfCAgIDMgKwogMTYgZmlsZXMg
Y2hhbmdlZCwgMzEzIGluc2VydGlvbnMoKyksIDU4IGRlbGV0aW9ucygtKQogY3JlYXRlIG1vZGUg
MTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmgKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG9tYWluLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG9tYWluLmMKaW5kZXggOWFlYmNmMjYzMTkxLi5i
MDZjMTcyNWQ0NDUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9kb21haW4uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG9tYWlu
LmMKQEAgLTEzLDYgKzEzLDcgQEAKICNpbmNsdWRlICJpOTE1X2dlbV9vYmplY3QuaCIKICNpbmNs
dWRlICJpOTE1X3ZtYS5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX2xtZW0uaCIKKyNpbmNsdWRlICJp
OTE1X2dlbV9tbWFuLmgiCiAKIHN0YXRpYyB2b2lkIF9faTkxNV9nZW1fb2JqZWN0X2ZsdXNoX2Zv
cl9kaXNwbGF5KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiB7CkBAIC0yNjMsNyAr
MjY0LDcgQEAgaW50IGk5MTVfZ2VtX29iamVjdF9zZXRfY2FjaGVfbGV2ZWwoc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJCX0KIAogCQkJaWYgKG9iai0+dXNlcmZhdWx0X2NvdW50
KQotCQkJCV9faTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChvYmopOworCQkJCV9faTkxNV9n
ZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9ndHQob2JqKTsKIAogCQkJLyoKIAkJCSAqIEFzIHdlIG5v
IGxvbmdlciBuZWVkIGEgZmVuY2UgZm9yIEdUVCBhY2Nlc3MsCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX21tYW4uYwppbmRleCBkNjA5NzM2MDNjYzEuLjM2ZmZmYjY3MTYwMSAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX21tYW4uYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5jCkBAIC0xNCw2ICsxNCw3IEBA
CiAjaW5jbHVkZSAiaTkxNV9nZW1fZ3R0LmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1faW9jdGxzLmgi
CiAjaW5jbHVkZSAiaTkxNV9nZW1fb2JqZWN0LmgiCisjaW5jbHVkZSAiaTkxNV9nZW1fbW1hbi5o
IgogI2luY2x1ZGUgImk5MTVfdHJhY2UuaCIKICNpbmNsdWRlICJpOTE1X3ZtYS5oIgogCkBAIC0y
MTksNyArMjIwLDggQEAgdm1fZmF1bHRfdCBpOTE1X2dlbV9mYXVsdChzdHJ1Y3Qgdm1fZmF1bHQg
KnZtZikKIHsKICNkZWZpbmUgTUlOX0NIVU5LX1BBR0VTIChTWl8xTSA+PiBQQUdFX1NISUZUKQog
CXN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqYXJlYSA9IHZtZi0+dm1hOwotCXN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0ICpvYmogPSB0b19pbnRlbF9ibyhhcmVhLT52bV9wcml2YXRlX2RhdGEpOwor
CXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICpwcml2ID0gYXJlYS0+dm1fcHJpdmF0ZV9kYXRhOwor
CXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmogPSBwcml2LT5vYmo7CiAJc3RydWN0IGRy
bV9kZXZpY2UgKmRldiA9IG9iai0+YmFzZS5kZXY7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUgPSB0b19pOTE1KGRldik7CiAJc3RydWN0IGludGVsX3J1bnRpbWVfcG0gKnJwbSA9ICZp
OTE1LT5ydW50aW1lX3BtOwpAQCAtMzEyLDYgKzMxNCw5IEBAIHZtX2ZhdWx0X3QgaTkxNV9nZW1f
ZmF1bHQoc3RydWN0IHZtX2ZhdWx0ICp2bWYpCiAJCWxpc3RfYWRkKCZvYmotPnVzZXJmYXVsdF9s
aW5rLCAmaTkxNS0+Z2d0dC51c2VyZmF1bHRfbGlzdCk7CiAJbXV0ZXhfdW5sb2NrKCZpOTE1LT5n
Z3R0LnZtLm11dGV4KTsKIAorCS8qIFRyYWNrIHRoZSBtbW8gYXNzb2NpYXRlZCB3aXRoIHRoZSBm
ZW5jZWQgdm1hICovCisJdm1hLT5tbW8gPSBwcml2OworCiAJaWYgKElTX0FDVElWRShDT05GSUdf
RFJNX0k5MTVfVVNFUkZBVUxUX0FVVE9TVVNQRU5EKSkKIAkJaW50ZWxfd2FrZXJlZl9hdXRvKCZp
OTE1LT5nZ3R0LnVzZXJmYXVsdF93YWtlcmVmLAogCQkJCSAgIG1zZWNzX3RvX2ppZmZpZXNfdGlt
ZW91dChDT05GSUdfRFJNX0k5MTVfVVNFUkZBVUxUX0FVVE9TVVNQRU5EKSk7CkBAIC0zNTgsMjgg
KzM2MywxOSBAQCB2bV9mYXVsdF90IGk5MTVfZ2VtX2ZhdWx0KHN0cnVjdCB2bV9mYXVsdCAqdm1m
KQogCX0KIH0KIAotdm9pZCBfX2k5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXAoc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iaikKK3ZvaWQgX19pOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9t
bWFwX2d0dChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogewogCXN0cnVjdCBpOTE1
X3ZtYSAqdm1hOwogCiAJR0VNX0JVR19PTighb2JqLT51c2VyZmF1bHRfY291bnQpOwogCi0Jb2Jq
LT51c2VyZmF1bHRfY291bnQgPSAwOwotCWxpc3RfZGVsKCZvYmotPnVzZXJmYXVsdF9saW5rKTsK
LQlkcm1fdm1hX25vZGVfdW5tYXAoJm9iai0+YmFzZS52bWFfbm9kZSwKLQkJCSAgIG9iai0+YmFz
ZS5kZXYtPmFub25faW5vZGUtPmlfbWFwcGluZyk7Ci0KIAlmb3JfZWFjaF9nZ3R0X3ZtYSh2bWEs
IG9iaikKLQkJaTkxNV92bWFfdW5zZXRfdXNlcmZhdWx0KHZtYSk7CisJCWk5MTVfdm1hX3Jldm9r
ZV9tbWFwKHZtYSk7CisKKwlHRU1fQlVHX09OKG9iai0+dXNlcmZhdWx0X2NvdW50KTsKIH0KIAog
LyoqCi0gKiBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwIC0gcmVtb3ZlIHBoeXNpY2FsIHBh
Z2UgbWFwcGluZ3MKLSAqIEBvYmo6IG9iaiBpbiBxdWVzdGlvbgotICoKLSAqIFByZXNlcnZlIHRo
ZSByZXNlcnZhdGlvbiBvZiB0aGUgbW1hcHBpbmcgd2l0aCB0aGUgRFJNIGNvcmUgY29kZSwgYnV0
Ci0gKiByZWxpbnF1aXNoIG93bmVyc2hpcCBvZiB0aGUgcGFnZXMgYmFjayB0byB0aGUgc3lzdGVt
LgotICoKICAqIEl0IGlzIHZpdGFsIHRoYXQgd2UgcmVtb3ZlIHRoZSBwYWdlIG1hcHBpbmcgaWYg
d2UgaGF2ZSBtYXBwZWQgYSB0aWxlZAogICogb2JqZWN0IHRocm91Z2ggdGhlIEdUVCBhbmQgdGhl
biBsb3NlIHRoZSBmZW5jZSByZWdpc3RlciBkdWUgdG8KICAqIHJlc291cmNlIHByZXNzdXJlLiBT
aW1pbGFybHkgaWYgdGhlIG9iamVjdCBoYXMgYmVlbiBtb3ZlZCBvdXQgb2YgdGhlCkBAIC0zODcs
NyArMzgzLDcgQEAgdm9pZCBfX2k5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXAoc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iaikKICAqIG1hcHBpbmcgd2lsbCB0aGVuIHRyaWdnZXIgYSBw
YWdlIGZhdWx0IG9uIHRoZSBuZXh0IHVzZXIgYWNjZXNzLCBhbGxvd2luZwogICogZml4dXAgYnkg
aTkxNV9nZW1fZmF1bHQoKS4KICAqLwotdm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFw
KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCitzdGF0aWMgdm9pZCBpOTE1X2dlbV9v
YmplY3RfcmVsZWFzZV9tbWFwX2d0dChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQog
ewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShvYmotPmJhc2UuZGV2
KTsKIAlpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZjsKQEAgLTQwNiw3ICs0MDIsNyBAQCB2b2lkIGk5
MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXAoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aikKIAlpZiAoIW9iai0+dXNlcmZhdWx0X2NvdW50KQogCQlnb3RvIG91dDsKIAotCV9faTkxNV9n
ZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChvYmopOworCV9faTkxNV9nZW1fb2JqZWN0X3JlbGVhc2Vf
bW1hcF9ndHQob2JqKTsKIAogCS8qIEVuc3VyZSB0aGF0IHRoZSBDUFUncyBQVEUgYXJlIHJldm9r
ZWQgYW5kIHRoZXJlIGFyZSBub3Qgb3V0c3RhbmRpbmcKIAkgKiBtZW1vcnkgdHJhbnNhY3Rpb25z
IGZyb20gdXNlcnNwYWNlIGJlZm9yZSB3ZSByZXR1cm4uIFRoZSBUTEIKQEAgLTQyMiwxNSArNDE4
LDYzIEBAIHZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX29iamVjdCAqb2JqKQogCWludGVsX3J1bnRpbWVfcG1fcHV0KCZpOTE1LT5ydW50aW1lX3Bt
LCB3YWtlcmVmKTsKIH0KIAotc3RhdGljIGludCBjcmVhdGVfbW1hcF9vZmZzZXQoc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iaikKK3ZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1h
cF9vZmZzZXQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKK3sKKwlzdHJ1Y3QgaTkx
NV9tbWFwX29mZnNldCAqbW1vOworCisJbXV0ZXhfbG9jaygmb2JqLT5tbW9fbG9jayk7CisJbGlz
dF9mb3JfZWFjaF9lbnRyeShtbW8sICZvYmotPm1tYXBfb2Zmc2V0cywgb2Zmc2V0KSB7CisJCS8q
IHZtYV9ub2RlX3VubWFwIGZvciBHVFQgbW1hcHMgaGFuZGxlZCBhbHJlYWR5IGluCisJCSAqIF9f
aTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9ndHQKKwkJICovCisJCWlmIChtbW8tPm1tYXBf
dHlwZSAhPSBJOTE1X01NQVBfVFlQRV9HVFQpCisJCQlkcm1fdm1hX25vZGVfdW5tYXAoJm1tby0+
dm1hX25vZGUsCisJCQkJCSAgIG9iai0+YmFzZS5kZXYtPmFub25faW5vZGUtPmlfbWFwcGluZyk7
CisJfQorCW11dGV4X3VubG9jaygmb2JqLT5tbW9fbG9jayk7Cit9CisKKy8qKgorICogaTkxNV9n
ZW1fb2JqZWN0X3JlbGVhc2VfbW1hcCAtIHJlbW92ZSBwaHlzaWNhbCBwYWdlIG1hcHBpbmdzCisg
KiBAb2JqOiBvYmogaW4gcXVlc3Rpb24KKyAqCisgKiBQcmVzZXJ2ZSB0aGUgcmVzZXJ2YXRpb24g
b2YgdGhlIG1tYXBwaW5nIHdpdGggdGhlIERSTSBjb3JlIGNvZGUsIGJ1dAorICogcmVsaW5xdWlz
aCBvd25lcnNoaXAgb2YgdGhlIHBhZ2VzIGJhY2sgdG8gdGhlIHN5c3RlbS4KKyAqLwordm9pZCBp
OTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpv
YmopCit7CisJaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9ndHQob2JqKTsKKwlpOTE1X2dl
bV9vYmplY3RfcmVsZWFzZV9tbWFwX29mZnNldChvYmopOworfQorCitzdGF0aWMgdm9pZCBpbml0
X21tYXBfb2Zmc2V0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCisJCQkgICAgIHN0
cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICptbW8pCit7CisJbXV0ZXhfbG9jaygmb2JqLT5tbW9fbG9j
ayk7CisJbGlzdF9hZGQoJm1tby0+b2Zmc2V0LCAmb2JqLT5tbWFwX29mZnNldHMpOworCW11dGV4
X3VubG9jaygmb2JqLT5tbW9fbG9jayk7CisKKwltbW8tPm9iaiA9IG9iajsKKwltbW8tPmRldiA9
IG9iai0+YmFzZS5kZXY7Cit9CisKK3N0YXRpYyBpbnQgY3JlYXRlX21tYXBfb2Zmc2V0KHN0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCisJCQkgICAgICBzdHJ1Y3QgaTkxNV9tbWFwX29m
ZnNldCAqbW1vKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShv
YmotPmJhc2UuZGV2KTsKIAlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gJmk5MTUtPmd0OworCXN0cnVj
dCBkcm1fZGV2aWNlICpkZXYgPSBvYmotPmJhc2UuZGV2OwogCWludCBlcnI7CiAKLQllcnIgPSBk
cm1fZ2VtX2NyZWF0ZV9tbWFwX29mZnNldCgmb2JqLT5iYXNlKTsKLQlpZiAobGlrZWx5KCFlcnIp
KQorCWRybV92bWFfbm9kZV9yZXNldCgmbW1vLT52bWFfbm9kZSk7CisJaWYgKG1tby0+ZmlsZSkK
KwkJZHJtX3ZtYV9ub2RlX2FsbG93KCZtbW8tPnZtYV9ub2RlLCBtbW8tPmZpbGUpOworCWVyciA9
IGRybV92bWFfb2Zmc2V0X2FkZChkZXYtPnZtYV9vZmZzZXRfbWFuYWdlciwgJm1tby0+dm1hX25v
ZGUsCisJCQkJIG9iai0+YmFzZS5zaXplIC8gUEFHRV9TSVpFKTsKKwlpZiAobGlrZWx5KCFlcnIp
KSB7CisJCWluaXRfbW1hcF9vZmZzZXQob2JqLCBtbW8pOwogCQlyZXR1cm4gMDsKKwl9CiAKIAkv
KiBBdHRlbXB0IHRvIHJlYXAgc29tZSBtbWFwIHNwYWNlIGZyb20gZGVhZCBvYmplY3RzICovCiAJ
ZXJyID0gaW50ZWxfZ3RfcmV0aXJlX3JlcXVlc3RzX3RpbWVvdXQoZ3QsIE1BWF9TQ0hFRFVMRV9U
SU1FT1VUKTsKQEAgLTQzOCwzNCArNDgyLDU2IEBAIHN0YXRpYyBpbnQgY3JlYXRlX21tYXBfb2Zm
c2V0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAJCXJldHVybiBlcnI7CiAKIAlp
OTE1X2dlbV9kcmFpbl9mcmVlZF9vYmplY3RzKGk5MTUpOwotCXJldHVybiBkcm1fZ2VtX2NyZWF0
ZV9tbWFwX29mZnNldCgmb2JqLT5iYXNlKTsKKwllcnIgPSBkcm1fdm1hX29mZnNldF9hZGQoZGV2
LT52bWFfb2Zmc2V0X21hbmFnZXIsICZtbW8tPnZtYV9ub2RlLAorCQkJCSBvYmotPmJhc2Uuc2l6
ZSAvIFBBR0VfU0laRSk7CisJaWYgKGVycikKKwkJcmV0dXJuIGVycjsKKworCWluaXRfbW1hcF9v
ZmZzZXQob2JqLCBtbW8pOworCXJldHVybiAwOwogfQogCi1pbnQKLWk5MTVfZ2VtX21tYXBfZ3R0
KHN0cnVjdCBkcm1fZmlsZSAqZmlsZSwKLQkJICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAotCQkg
IHUzMiBoYW5kbGUsCi0JCSAgdTY0ICpvZmZzZXQpCitzdGF0aWMgaW50CitfX2Fzc2lnbl9nZW1f
b2JqZWN0X21tYXBfZGF0YShzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUsCisJCQkgICAgICB1MzIgaGFu
ZGxlLAorCQkJICAgICAgZW51bSBpOTE1X21tYXBfdHlwZSBtbWFwX3R5cGUsCisJCQkgICAgICB1
NjQgKm9mZnNldCkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOworCXN0cnVj
dCBpOTE1X21tYXBfb2Zmc2V0ICptbW87CiAJaW50IHJldDsKIAotCWlmICghaTkxNV9nZ3R0X2hh
c19hcGVydHVyZSgmdG9faTkxNShkZXYpLT5nZ3R0KSkKLQkJcmV0dXJuIC1FTk9ERVY7Ci0KIAlv
YmogPSBpOTE1X2dlbV9vYmplY3RfbG9va3VwKGZpbGUsIGhhbmRsZSk7CiAJaWYgKCFvYmopCiAJ
CXJldHVybiAtRU5PRU5UOwogCi0JaWYgKGk5MTVfZ2VtX29iamVjdF9uZXZlcl9iaW5kX2dndHQo
b2JqKSkgeworCWlmIChtbWFwX3R5cGUgPT0gSTkxNV9NTUFQX1RZUEVfR1RUICYmCisJICAgIGk5
MTVfZ2VtX29iamVjdF9uZXZlcl9iaW5kX2dndHQob2JqKSkgewogCQlyZXQgPSAtRU5PREVWOwog
CQlnb3RvIG91dDsKIAl9CiAKLQlyZXQgPSBjcmVhdGVfbW1hcF9vZmZzZXQob2JqKTsKLQlpZiAo
cmV0ID09IDApCi0JCSpvZmZzZXQgPSBkcm1fdm1hX25vZGVfb2Zmc2V0X2FkZHIoJm9iai0+YmFz
ZS52bWFfbm9kZSk7CisJaWYgKG1tYXBfdHlwZSAhPSBJOTE1X01NQVBfVFlQRV9HVFQgJiYKKwkg
ICAgIWk5MTVfZ2VtX29iamVjdF9oYXNfc3RydWN0X3BhZ2Uob2JqKSkgeworCQlyZXQgPSAtRU5P
REVWOworCQlnb3RvIG91dDsKKwl9CisKKwltbW8gPSBremFsbG9jKHNpemVvZigqbW1vKSwgR0ZQ
X0tFUk5FTCk7CisJaWYgKCFtbW8pIHsKKwkJcmV0ID0gLUVOT01FTTsKKwkJZ290byBvdXQ7CisJ
fQorCisJbW1vLT5maWxlID0gZmlsZTsKKwlyZXQgPSBjcmVhdGVfbW1hcF9vZmZzZXQob2JqLCBt
bW8pOworCWlmIChyZXQpIHsKKwkJa2ZyZWUobW1vKTsKKwkJZ290byBvdXQ7CisJfQogCisJbW1v
LT5tbWFwX3R5cGUgPSBtbWFwX3R5cGU7CisJKm9mZnNldCA9IGRybV92bWFfbm9kZV9vZmZzZXRf
YWRkcigmbW1vLT52bWFfbm9kZSk7CiBvdXQ6CiAJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwog
CXJldHVybiByZXQ7CkBAIC00OTIsNyArNTU4LDExNiBAQCBpOTE1X2dlbV9tbWFwX2d0dF9pb2N0
bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAogewogCXN0cnVjdCBkcm1faTkx
NV9nZW1fbW1hcF9ndHQgKmFyZ3MgPSBkYXRhOwogCi0JcmV0dXJuIGk5MTVfZ2VtX21tYXBfZ3R0
KGZpbGUsIGRldiwgYXJncy0+aGFuZGxlLCAmYXJncy0+b2Zmc2V0KTsKKwlyZXR1cm4gX19hc3Np
Z25fZ2VtX29iamVjdF9tbWFwX2RhdGEoZmlsZSwgYXJncy0+aGFuZGxlLAorCQkJCQkgICAgIEk5
MTVfTU1BUF9UWVBFX0dUVCwKKwkJCQkJICAgICAmYXJncy0+b2Zmc2V0KTsKK30KKwordm9pZCBp
OTE1X21tYXBfb2Zmc2V0X2Rlc3Ryb3koc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1tbywgc3Ry
dWN0IG11dGV4ICptdXRleCkKK3sKKwlkcm1fdm1hX29mZnNldF9yZW1vdmUobW1vLT5kZXYtPnZt
YV9vZmZzZXRfbWFuYWdlciwgJm1tby0+dm1hX25vZGUpOworCisJbXV0ZXhfbG9jayhtdXRleCk7
CisJbGlzdF9kZWwoJm1tby0+b2Zmc2V0KTsKKwltdXRleF91bmxvY2sobXV0ZXgpOworCisJa2Zy
ZWUobW1vKTsKK30KKworc3RhdGljIHZvaWQgaTkxNV9nZW1fdm1fb3BlbihzdHJ1Y3Qgdm1fYXJl
YV9zdHJ1Y3QgKnZtYSkKK3sKKwlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vID0gdm1hLT52
bV9wcml2YXRlX2RhdGE7CisJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiA9IG1tby0+
b2JqOworCisJR0VNX0JVR19PTighb2JqKTsKKwlpOTE1X2dlbV9vYmplY3RfZ2V0KG9iaik7Cit9
CisKK3N0YXRpYyB2b2lkIGk5MTVfZ2VtX3ZtX2Nsb3NlKHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAq
dm1hKQoreworCXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICptbW8gPSB2bWEtPnZtX3ByaXZhdGVf
ZGF0YTsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0gbW1vLT5vYmo7CisKKwlH
RU1fQlVHX09OKCFvYmopOworCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKK30KKworc3RhdGlj
IGNvbnN0IHN0cnVjdCB2bV9vcGVyYXRpb25zX3N0cnVjdCBpOTE1X2dlbV9ndHRfdm1fb3BzID0g
eworCS5mYXVsdCA9IGk5MTVfZ2VtX2ZhdWx0LAorCS5vcGVuID0gaTkxNV9nZW1fdm1fb3BlbiwK
KwkuY2xvc2UgPSBpOTE1X2dlbV92bV9jbG9zZSwKK307CisKKy8qIFRoaXMgb3ZlcmNvbWVzIHRo
ZSBsaW1pdGF0aW9uIGluIGRybV9nZW1fbW1hcCdzIGFzc2lnbm1lbnQgb2YgYQorICogZHJtX2dl
bV9vYmplY3QgYXMgdGhlIHZtYS0+dm1fcHJpdmF0ZV9kYXRhLiBTaW5jZSB3ZSBuZWVkIHRvCisg
KiBiZSBhYmxlIHRvIHJlc29sdmUgbXVsdGlwbGUgbW1hcCBvZmZzZXRzIHdoaWNoIGNvdWxkIGJl
IHRpZWQKKyAqIHRvIGEgc2luZ2xlIGdlbSBvYmplY3QuCisgKi8KK2ludCBpOTE1X2dlbV9tbWFw
KHN0cnVjdCBmaWxlICpmaWxwLCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSkKK3sKKwlzdHJ1
Y3QgZHJtX3ZtYV9vZmZzZXRfbm9kZSAqbm9kZTsKKwlzdHJ1Y3QgZHJtX2ZpbGUgKnByaXYgPSBm
aWxwLT5wcml2YXRlX2RhdGE7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IHByaXYtPm1pbm9y
LT5kZXY7CisJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1tbyA9IE5VTEw7CisJc3RydWN0IGRy
bV9nZW1fb2JqZWN0ICpvYmogPSBOVUxMOworCisJaWYgKGRybV9kZXZfaXNfdW5wbHVnZ2VkKGRl
dikpCisJCXJldHVybiAtRU5PREVWOworCisJZHJtX3ZtYV9vZmZzZXRfbG9ja19sb29rdXAoZGV2
LT52bWFfb2Zmc2V0X21hbmFnZXIpOworCW5vZGUgPSBkcm1fdm1hX29mZnNldF9leGFjdF9sb29r
dXBfbG9ja2VkKGRldi0+dm1hX29mZnNldF9tYW5hZ2VyLAorCQkJCQkJICB2bWEtPnZtX3Bnb2Zm
LAorCQkJCQkJICB2bWFfcGFnZXModm1hKSk7CisJaWYgKGxpa2VseShub2RlKSkgeworCQltbW8g
PSBjb250YWluZXJfb2Yobm9kZSwgc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQsCisJCQkJICAgdm1h
X25vZGUpOworCQkvKgorCQkgKiBJbiBvdXIgZGVwZW5kZW5jeSBjaGFpbiwgdGhlIGRybV92bWFf
b2Zmc2V0X25vZGUKKwkJICogZGVwZW5kcyBvbiB0aGUgdmFsaWRpdHkgb2YgdGhlIG1tbywgd2hp
Y2ggZGVwZW5kcyBvbgorCQkgKiB0aGUgZ2VtIG9iamVjdC4gSG93ZXZlciB0aGUgb25seSByZWZl
cmVuY2Ugd2UgaGF2ZQorCQkgKiBhdCB0aGlzIHBvaW50IGlzIHRoZSBtbW8gKGFzIHRoZSBwYXJl
bnQgb2YgdGhlIG5vZGUpLgorCQkgKiBUcnkgdG8gY2hlY2sgaWYgdGhlIGdlbSBvYmplY3Qgd2Fz
IGF0IGxlYXN0IGNsZWFyZWQuCisJCSAqLworCQlpZiAoIW1tbyB8fCAhbW1vLT5vYmopIHsKKwkJ
CWRybV92bWFfb2Zmc2V0X3VubG9ja19sb29rdXAoZGV2LT52bWFfb2Zmc2V0X21hbmFnZXIpOwor
CQkJcmV0dXJuIC1FSU5WQUw7CisJCX0KKwkJLyoKKwkJICogU2tpcCAwLXJlZmNudGVkIG9iamVj
dHMgYXMgaXQgaXMgaW4gdGhlIHByb2Nlc3Mgb2YgYmVpbmcKKwkJICogZGVzdHJveWVkIGFuZCB3
aWxsIGJlIGludmFsaWQgd2hlbiB0aGUgdm1hIG1hbmFnZXIgbG9jaworCQkgKiBpcyByZWxlYXNl
ZC4KKwkJICovCisJCW9iaiA9ICZtbW8tPm9iai0+YmFzZTsKKwkJaWYgKCFrcmVmX2dldF91bmxl
c3NfemVybygmb2JqLT5yZWZjb3VudCkpCisJCQlvYmogPSBOVUxMOworCisJfQorCWRybV92bWFf
b2Zmc2V0X3VubG9ja19sb29rdXAoZGV2LT52bWFfb2Zmc2V0X21hbmFnZXIpOworCisJaWYgKCFv
YmopCisJCXJldHVybiAtRUlOVkFMOworCisJaWYgKCFkcm1fdm1hX25vZGVfaXNfYWxsb3dlZChu
b2RlLCBwcml2KSkgeworCQlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQob2JqKTsKKwkJcmV0
dXJuIC1FQUNDRVM7CisJfQorCisJaWYgKGk5MTVfZ2VtX29iamVjdF9pc19yZWFkb25seSh0b19p
bnRlbF9ibyhvYmopKSkgeworCQlpZiAodm1hLT52bV9mbGFncyAmIFZNX1dSSVRFKSB7CisJCQlk
cm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQob2JqKTsKKwkJCXJldHVybiAtRUlOVkFMOworCQl9
CisJCXZtYS0+dm1fZmxhZ3MgJj0gflZNX01BWVdSSVRFOworCX0KKworCXZtYS0+dm1fZmxhZ3Mg
fD0gVk1fUEZOTUFQIHwgVk1fRE9OVEVYUEFORCB8IFZNX0RPTlREVU1QOworCXZtYS0+dm1fcGFn
ZV9wcm90ID0gcGdwcm90X3dyaXRlY29tYmluZSh2bV9nZXRfcGFnZV9wcm90KHZtYS0+dm1fZmxh
Z3MpKTsKKwl2bWEtPnZtX3BhZ2VfcHJvdCA9IHBncHJvdF9kZWNyeXB0ZWQodm1hLT52bV9wYWdl
X3Byb3QpOworCXZtYS0+dm1fcHJpdmF0ZV9kYXRhID0gbW1vOworCisJdm1hLT52bV9vcHMgPSAm
aTkxNV9nZW1fZ3R0X3ZtX29wczsKKworCXJldHVybiAwOwogfQogCiAjaWYgSVNfRU5BQkxFRChD
T05GSUdfRFJNX0k5MTVfU0VMRlRFU1QpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fbW1hbi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X21tYW4uaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjI1YTNjNGQ2
Y2Q2NQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9tbWFuLmgKQEAgLTAsMCArMSwyOCBAQAorLyoKKyAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVy
OiBNSVQKKyAqCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisK
KyNpZm5kZWYgX19JOTE1X0dFTV9NTUFOX0hfXworI2RlZmluZSBfX0k5MTVfR0VNX01NQU5fSF9f
CisKKyNpbmNsdWRlIDxsaW51eC9tbV90eXBlcy5oPgorI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+
CisKK3N0cnVjdCBkcm1fZGV2aWNlOworc3RydWN0IGRybV9maWxlOworc3RydWN0IGRybV9pOTE1
X2dlbV9vYmplY3Q7CitzdHJ1Y3QgZmlsZTsKK3N0cnVjdCBpOTE1X21tYXBfb2Zmc2V0Oworc3Ry
dWN0IG11dGV4OworCitpbnQgaTkxNV9nZW1fbW1hcChzdHJ1Y3QgZmlsZSAqZmlscCwgc3RydWN0
IHZtX2FyZWFfc3RydWN0ICp2bWEpOwordm1fZmF1bHRfdCBpOTE1X2dlbV9mYXVsdChzdHJ1Y3Qg
dm1fZmF1bHQgKnZtZik7Cit2b2lkIGk5MTVfbW1hcF9vZmZzZXRfZGVzdHJveShzdHJ1Y3QgaTkx
NV9tbWFwX29mZnNldCAqbW1vLCBzdHJ1Y3QgbXV0ZXggKm11dGV4KTsKKwordm9pZCBfX2k5MTVf
Z2VtX29iamVjdF9yZWxlYXNlX21tYXBfZ3R0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpv
YmopOwordm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmopOwordm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwX29mZnNl
dChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsKKworI2VuZGlmCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMKaW5kZXggNDU4OTQ1ZTE4MjNlLi5mMWI4
N2E4Mzk5MjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9v
YmplY3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMK
QEAgLTI5LDYgKzI5LDcgQEAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImk5MTVf
Z2VtX2NsZmx1c2guaCIKICNpbmNsdWRlICJpOTE1X2dlbV9jb250ZXh0LmgiCisjaW5jbHVkZSAi
aTkxNV9nZW1fbW1hbi5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX29iamVjdC5oIgogI2luY2x1ZGUg
Imk5MTVfZ2xvYmFscy5oIgogI2luY2x1ZGUgImk5MTVfdHJhY2UuaCIKQEAgLTYxLDYgKzYyLDkg
QEAgdm9pZCBpOTE1X2dlbV9vYmplY3RfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAq
b2JqLAogCiAJSU5JVF9MSVNUX0hFQUQoJm9iai0+bHV0X2xpc3QpOwogCisJbXV0ZXhfaW5pdCgm
b2JqLT5tbW9fbG9jayk7CisJSU5JVF9MSVNUX0hFQUQoJm9iai0+bW1hcF9vZmZzZXRzKTsKKwog
CWluaXRfcmN1X2hlYWQoJm9iai0+cmN1KTsKIAogCW9iai0+b3BzID0gb3BzOwpAQCAtOTcsNiAr
MTAxLDcgQEAgdm9pZCBpOTE1X2dlbV9jbG9zZV9vYmplY3Qoc3RydWN0IGRybV9nZW1fb2JqZWN0
ICpnZW0sIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqID0gdG9faW50ZWxfYm8oZ2VtKTsKIAlzdHJ1Y3QgZHJtX2k5MTVfZmlsZV9wcml2YXRl
ICpmcHJpdiA9IGZpbGUtPmRyaXZlcl9wcml2OwogCXN0cnVjdCBpOTE1X2x1dF9oYW5kbGUgKmx1
dCwgKmxuOworCXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICptbW8sICpvbjsKIAlMSVNUX0hFQUQo
Y2xvc2UpOwogCiAJaTkxNV9nZW1fb2JqZWN0X2xvY2sob2JqKTsKQEAgLTExMSw2ICsxMTYsOSBA
QCB2b2lkIGk5MTVfZ2VtX2Nsb3NlX29iamVjdChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdlbSwg
c3RydWN0IGRybV9maWxlICpmaWxlKQogCX0KIAlpOTE1X2dlbV9vYmplY3RfdW5sb2NrKG9iaik7
CiAKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUobW1vLCBvbiwgJm9iai0+bW1hcF9vZmZzZXRz
LCBvZmZzZXQpCisJCWRybV92bWFfbm9kZV9yZXZva2UoJm1tby0+dm1hX25vZGUsIGZpbGUpOwor
CiAJbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKGx1dCwgbG4sICZjbG9zZSwgb2JqX2xpbmspIHsK
IAkJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCA9IGx1dC0+Y3R4OwogCQlzdHJ1Y3QgaTkx
NV92bWEgKnZtYTsKQEAgLTE1OCw2ICsxNjYsOCBAQCBzdGF0aWMgdm9pZCBfX2k5MTVfZ2VtX2Zy
ZWVfb2JqZWN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKIAogCXdha2VyZWYgPSBp
bnRlbF9ydW50aW1lX3BtX2dldCgmaTkxNS0+cnVudGltZV9wbSk7CiAJbGxpc3RfZm9yX2VhY2hf
ZW50cnlfc2FmZShvYmosIG9uLCBmcmVlZCwgZnJlZWQpIHsKKwkJc3RydWN0IGk5MTVfbW1hcF9v
ZmZzZXQgKm1tbywgKm1uOworCiAJCXRyYWNlX2k5MTVfZ2VtX29iamVjdF9kZXN0cm95KG9iaik7
CiAKIAkJaWYgKCFsaXN0X2VtcHR5KCZvYmotPnZtYS5saXN0KSkgewpAQCAtMTgzLDYgKzE5Mywx
NCBAQCBzdGF0aWMgdm9pZCBfX2k5MTVfZ2VtX2ZyZWVfb2JqZWN0cyhzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSwKIAkJCXNwaW5fdW5sb2NrKCZvYmotPnZtYS5sb2NrKTsKIAkJfQogCisJ
CWk5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXAob2JqKTsKKworCQlsaXN0X2Zvcl9lYWNoX2Vu
dHJ5X3NhZmUobW1vLCBtbiwgJm9iai0+bW1hcF9vZmZzZXRzLCBvZmZzZXQpIHsKKwkJCW1tby0+
b2JqID0gTlVMTDsKKwkJCWk5MTVfbW1hcF9vZmZzZXRfZGVzdHJveShtbW8sICZvYmotPm1tb19s
b2NrKTsKKwkJfQorCisJCUdFTV9CVUdfT04oIWxpc3RfZW1wdHkoJm9iai0+bW1hcF9vZmZzZXRz
KSk7CiAJCUdFTV9CVUdfT04oYXRvbWljX3JlYWQoJm9iai0+YmluZF9jb3VudCkpOwogCQlHRU1f
QlVHX09OKG9iai0+dXNlcmZhdWx0X2NvdW50KTsKIAkJR0VNX0JVR19PTighbGlzdF9lbXB0eSgm
b2JqLT5sdXRfbGlzdCkpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX29iamVjdC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVj
dC5oCmluZGV4IGU1NzUwZDUwNmNjOS4uYTFlYjdjMGIyM2FjIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oCkBAIC0xMzIsMTMgKzEzMiwxMyBAQCB2b2lkIGk5
MTVfZ2VtX29iamVjdF91bmxvY2tfZmVuY2Uoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aiwKIHN0YXRpYyBpbmxpbmUgdm9pZAogaTkxNV9nZW1fb2JqZWN0X3NldF9yZWFkb25seShzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogewotCW9iai0+YmFzZS52bWFfbm9kZS5yZWFk
b25seSA9IHRydWU7CisJb2JqLT5mbGFncyB8PSBJOTE1X0JPX1JFQURPTkxZOwogfQogCiBzdGF0
aWMgaW5saW5lIGJvb2wKIGk5MTVfZ2VtX29iamVjdF9pc19yZWFkb25seShjb25zdCBzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogewotCXJldHVybiBvYmotPmJhc2Uudm1hX25vZGUu
cmVhZG9ubHk7CisJcmV0dXJuIG9iai0+ZmxhZ3MgJiBJOTE1X0JPX1JFQURPTkxZOwogfQogCiBz
dGF0aWMgaW5saW5lIGJvb2wKQEAgLTM4Nyw5ICszODcsNiBAQCBzdGF0aWMgaW5saW5lIHZvaWQg
aTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2Jq
KQogCWk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdlcyhvYmopOwogfQogCi12b2lkIF9faTkxNV9n
ZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsK
LXZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29i
amVjdCAqb2JqKTsKLQogdm9pZAogaTkxNV9nZW1fb2JqZWN0X2ZsdXNoX3dyaXRlX2RvbWFpbihz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCQkJCSAgIHVuc2lnbmVkIGludCBmbHVz
aF9kb21haW5zKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9vYmplY3RfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmpl
Y3RfdHlwZXMuaAppbmRleCAxNWY4Mjk3ZGMzNGUuLjhmZjA4MzRhMWQ1YyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfdHlwZXMuaApAQCAtNjMsNiAr
NjMsMjAgQEAgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Rfb3BzIHsKIAl2b2lkICgqcmVsZWFz
ZSkoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7CiB9OwogCitlbnVtIGk5MTVfbW1h
cF90eXBlIHsKKwlJOTE1X01NQVBfVFlQRV9HVFQgPSAwLAorfTsKKworc3RydWN0IGk5MTVfbW1h
cF9vZmZzZXQgeworCXN0cnVjdCBkcm1fZGV2aWNlICpkZXY7CisJc3RydWN0IGRybV92bWFfb2Zm
c2V0X25vZGUgdm1hX25vZGU7CisJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKKwlz
dHJ1Y3QgZHJtX2ZpbGUgKmZpbGU7CisJZW51bSBpOTE1X21tYXBfdHlwZSBtbWFwX3R5cGU7CisK
KwlzdHJ1Y3QgbGlzdF9oZWFkIG9mZnNldDsKK307CisKIHN0cnVjdCBkcm1faTkxNV9nZW1fb2Jq
ZWN0IHsKIAlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgYmFzZTsKIApAQCAtMTE4LDEyICsxMzIsMTcg
QEAgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgewogCXVuc2lnbmVkIGludCB1c2VyZmF1bHRf
Y291bnQ7CiAJc3RydWN0IGxpc3RfaGVhZCB1c2VyZmF1bHRfbGluazsKIAorCS8qIFByb3RlY3Rz
IGFjY2VzcyB0byBtbWFwIG9mZnNldHMgKi8KKwlzdHJ1Y3QgbXV0ZXggbW1vX2xvY2s7CisJc3Ry
dWN0IGxpc3RfaGVhZCBtbWFwX29mZnNldHM7CisKIAlJOTE1X1NFTEZURVNUX0RFQ0xBUkUoc3Ry
dWN0IGxpc3RfaGVhZCBzdF9saW5rKTsKIAogCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CiAjZGVmaW5l
IEk5MTVfQk9fQUxMT0NfQ09OVElHVU9VUyBCSVQoMCkKICNkZWZpbmUgSTkxNV9CT19BTExPQ19W
T0xBVElMRSAgIEJJVCgxKQogI2RlZmluZSBJOTE1X0JPX0FMTE9DX0ZMQUdTIChJOTE1X0JPX0FM
TE9DX0NPTlRJR1VPVVMgfCBJOTE1X0JPX0FMTE9DX1ZPTEFUSUxFKQorI2RlZmluZSBJOTE1X0JP
X1JFQURPTkxZICAgICAgICAgQklUKDIpCiAKIAkvKgogCSAqIElzIHRoZSBvYmplY3QgdG8gYmUg
bWFwcGVkIGFzIHJlYWQtb25seSB0byB0aGUgR1BVCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fcGFnZXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9wYWdlcy5jCmluZGV4IGY0MDJjMmM0MTVjMi4uNzUxOTdjYTY5NmE4IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGFnZXMuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGFnZXMuYwpAQCAtOCw2ICs4LDcgQEAKICNp
bmNsdWRlICJpOTE1X2dlbV9vYmplY3QuaCIKICNpbmNsdWRlICJpOTE1X3NjYXR0ZXJsaXN0Lmgi
CiAjaW5jbHVkZSAiaTkxNV9nZW1fbG1lbS5oIgorI2luY2x1ZGUgImk5MTVfZ2VtX21tYW4uaCIK
IAogdm9pZCBfX2k5MTVfZ2VtX29iamVjdF9zZXRfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3QgKm9iaiwKIAkJCQkgc3RydWN0IHNnX3RhYmxlICpwYWdlcywKQEAgLTIwNyw2ICsyMDgs
OCBAQCBpbnQgX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1f
b2JqZWN0ICpvYmopCiAJCWdvdG8gdW5sb2NrOwogCX0KIAorCWk5MTVfZ2VtX29iamVjdF9yZWxl
YXNlX21tYXBfb2Zmc2V0KG9iaik7CisKIAkvKgogCSAqIC0+cHV0X3BhZ2VzIG1pZ2h0IG5lZWQg
dG8gYWxsb2NhdGUgbWVtb3J5IGZvciB0aGUgYml0MTcgc3dpenpsZQogCSAqIGFycmF5LCBoZW5j
ZSBwcm90ZWN0IHRoZW0gZnJvbSBiZWluZyByZWFwZWQgYnkgcmVtb3ZpbmcgdGhlbSBmcm9tIGd0
dApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3RpbGluZy5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3RpbGluZy5jCmluZGV4IDFmYTU5
MmQ4MmFmNS4uNmM3ODI1YTJkYzJhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fdGlsaW5nLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX3RpbGluZy5jCkBAIC0xMSw2ICsxMSw3IEBACiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNp
bmNsdWRlICJpOTE1X2dlbS5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX2lvY3Rscy5oIgorI2luY2x1
ZGUgImk5MTVfZ2VtX21tYW4uaCIKICNpbmNsdWRlICJpOTE1X2dlbV9vYmplY3QuaCIKIAogLyoq
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2Vt
X21tYW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1h
bi5jCmluZGV4IDZjZTkxNjdmOGM5Zi4uZDIxNjE4YTY5ZjM2IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYwpAQCAtNTY1LDE1ICs1
NjUsMjAgQEAgc3RhdGljIGJvb2wgYXNzZXJ0X21tYXBfb2Zmc2V0KHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1LAogCQkJICAgICAgIGludCBleHBlY3RlZCkKIHsKIAlzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqOworCS8qIE93bmVyc2hpcCB0cmFuc2ZlcnJlZCB0byBwYXJlbnQg
Z2VtIG9iamVjdCBpbiBjcmVhdGVfbW1hcF9vZmZzZXQgKi8KKwlzdHJ1Y3QgaTkxNV9tbWFwX29m
ZnNldCAqbW1vID0ga3phbGxvYyhzaXplb2YoKm1tbyksIEdGUF9LRVJORUwpOwogCWludCBlcnI7
CiAKIAlvYmogPSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX2ludGVybmFsKGk5MTUsIHNpemUpOwog
CWlmIChJU19FUlIob2JqKSkKIAkJcmV0dXJuIFBUUl9FUlIob2JqKTsKIAotCWVyciA9IGNyZWF0
ZV9tbWFwX29mZnNldChvYmopOworCWVyciA9IGNyZWF0ZV9tbWFwX29mZnNldChvYmosIG1tbyk7
CisJaWYgKGVycikKKwkJa2ZyZWUobW1vKTsKIAlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7CiAK
KwogCXJldHVybiBlcnIgPT0gZXhwZWN0ZWQ7CiB9CiAKQEAgLTYwOSw2ICs2MTQsOCBAQCBzdGF0
aWMgaW50IGlndF9tbWFwX29mZnNldF9leGhhdXN0aW9uKHZvaWQgKmFyZykKIAlzdHJ1Y3QgZHJt
X21tICptbSA9ICZpOTE1LT5kcm0udm1hX29mZnNldF9tYW5hZ2VyLT52bV9hZGRyX3NwYWNlX21t
OwogCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmo7CiAJc3RydWN0IGRybV9tbV9ub2Rl
ICpob2xlLCAqbmV4dDsKKwkvKiBPd25lcnNoaXAgdHJhbnNmZXJyZWQgdG8gcGFyZW50IGdlbSBv
YmplY3QgaW4gY3JlYXRlX21tYXBfb2Zmc2V0ICovCisJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQg
Km1tbyA9IGt6YWxsb2Moc2l6ZW9mKCptbW8pLCBHRlBfS0VSTkVMKTsKIAlpbnQgbG9vcCwgZXJy
OwogCiAJLyogRGlzYWJsZSBiYWNrZ3JvdW5kIHJlYXBlciAqLwpAQCAtNjczLDkgKzY4MCwxMCBA
QCBzdGF0aWMgaW50IGlndF9tbWFwX29mZnNldF9leGhhdXN0aW9uKHZvaWQgKmFyZykKIAkJZ290
byBvdXQ7CiAJfQogCi0JZXJyID0gY3JlYXRlX21tYXBfb2Zmc2V0KG9iaik7CisJZXJyID0gY3Jl
YXRlX21tYXBfb2Zmc2V0KG9iaiwgbW1vKTsKIAlpZiAoZXJyKSB7CiAJCXByX2VycigiVW5hYmxl
IHRvIGluc2VydCBvYmplY3QgaW50byByZWNsYWltZWQgaG9sZVxuIik7CisJCWtmcmVlKG1tbyk7
CiAJCWdvdG8gZXJyX29iajsKIAl9CiAKQEAgLTcyOSw2ICs3MzcsOCBAQCBzdGF0aWMgaW50IGln
dF9tbWFwX2d0dCh2b2lkICphcmcpCiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBh
cmc7CiAJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKIAlzdHJ1Y3Qgdm1fYXJlYV9z
dHJ1Y3QgKmFyZWE7CisJLyogT3duZXJzaGlwIHRyYW5zZmVycmVkIHRvIHBhcmVudCBnZW0gb2Jq
ZWN0IGluIGNyZWF0ZV9tbWFwX29mZnNldCAqLworCXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICpt
bW8gPSBremFsbG9jKHNpemVvZigqbW1vKSwgR0ZQX0tFUk5FTCk7CiAJdW5zaWduZWQgbG9uZyBh
ZGRyOwogCXZvaWQgKnZhZGRyOwogCWludCBlcnIsIGk7CkBAIC03NDksNyArNzU5LDcgQEAgc3Rh
dGljIGludCBpZ3RfbW1hcF9ndHQodm9pZCAqYXJnKQogCWk5MTVfZ2VtX29iamVjdF9mbHVzaF9t
YXAob2JqKTsKIAlpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKG9iaik7CiAKLQllcnIgPSBjcmVh
dGVfbW1hcF9vZmZzZXQob2JqKTsKKwllcnIgPSBjcmVhdGVfbW1hcF9vZmZzZXQob2JqLCBtbW8p
OwogCWlmIChlcnIpCiAJCWdvdG8gb3V0OwogCkBAIC04NzcsNiArODg3LDggQEAgc3RhdGljIGlu
dCBpZ3RfbW1hcF9ndHRfcmV2b2tlKHZvaWQgKmFyZykKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSA9IGFyZzsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOworCS8q
IE93bmVyc2hpcCB0cmFuc2ZlcnJlZCB0byBwYXJlbnQgZ2VtIG9iamVjdCBpbiBjcmVhdGVfbW1h
cF9vZmZzZXQgKi8KKwlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vID0ga3phbGxvYyhzaXpl
b2YoKm1tbyksIEdGUF9LRVJORUwpOwogCXVuc2lnbmVkIGxvbmcgYWRkcjsKIAlpbnQgZXJyOwog
CkBAIC04ODcsNyArODk5LDcgQEAgc3RhdGljIGludCBpZ3RfbW1hcF9ndHRfcmV2b2tlKHZvaWQg
KmFyZykKIAlpZiAoSVNfRVJSKG9iaikpCiAJCXJldHVybiBQVFJfRVJSKG9iaik7CiAKLQllcnIg
PSBjcmVhdGVfbW1hcF9vZmZzZXQob2JqKTsKKwllcnIgPSBjcmVhdGVfbW1hcF9vZmZzZXQob2Jq
LCBtbW8pOwogCWlmIChlcnIpCiAJCWdvdG8gb3V0OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNldC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfcmVzZXQuYwppbmRleCAzNjE4OTIzOGUxM2MuLjBlOTRiNzIwYzk5MyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9yZXNldC5jCkBAIC02NzgsOCArNjc4LDEzIEBAIHN0YXRpYyB2b2lk
IHJldm9rZV9tbWFwcyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQogCQkJY29udGludWU7CiAKIAkJR0VN
X0JVR19PTih2bWEtPmZlbmNlICE9ICZndC0+Z2d0dC0+ZmVuY2VfcmVnc1tpXSk7Ci0JCW5vZGUg
PSAmdm1hLT5vYmotPmJhc2Uudm1hX25vZGU7CisKKwkJaWYgKCF2bWEtPm1tbykKKwkJCWNvbnRp
bnVlOworCisJCW5vZGUgPSAmdm1hLT5tbW8tPnZtYV9ub2RlOwogCQl2bWFfb2Zmc2V0ID0gdm1h
LT5nZ3R0X3ZpZXcucGFydGlhbC5vZmZzZXQgPDwgUEFHRV9TSElGVDsKKwogCQl1bm1hcF9tYXBw
aW5nX3JhbmdlKGd0LT5pOTE1LT5kcm0uYW5vbl9pbm9kZS0+aV9tYXBwaW5nLAogCQkJCSAgICBk
cm1fdm1hX25vZGVfb2Zmc2V0X2FkZHIobm9kZSkgKyB2bWFfb2Zmc2V0LAogCQkJCSAgICB2bWEt
PnNpemUsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwppbmRleCBmNTA5ZDgyNmZjYzcuLmYzMWMyODc0
OWM0YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCkBAIC02MSw2ICs2MSw3IEBACiAKICNpbmNs
dWRlICJnZW0vaTkxNV9nZW1fY29udGV4dC5oIgogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9pb2N0
bHMuaCIKKyNpbmNsdWRlICJnZW0vaTkxNV9nZW1fbW1hbi5oIgogI2luY2x1ZGUgImd0L2ludGVs
X2d0LmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZ3RfcG0uaCIKICNpbmNsdWRlICJndC9pbnRlbF9y
YzYuaCIKQEAgLTI2NjIsMTggKzI2NjMsMTIgQEAgY29uc3Qgc3RydWN0IGRldl9wbV9vcHMgaTkx
NV9wbV9vcHMgPSB7CiAJLnJ1bnRpbWVfcmVzdW1lID0gaW50ZWxfcnVudGltZV9yZXN1bWUsCiB9
OwogCi1zdGF0aWMgY29uc3Qgc3RydWN0IHZtX29wZXJhdGlvbnNfc3RydWN0IGk5MTVfZ2VtX3Zt
X29wcyA9IHsKLQkuZmF1bHQgPSBpOTE1X2dlbV9mYXVsdCwKLQkub3BlbiA9IGRybV9nZW1fdm1f
b3BlbiwKLQkuY2xvc2UgPSBkcm1fZ2VtX3ZtX2Nsb3NlLAotfTsKLQogc3RhdGljIGNvbnN0IHN0
cnVjdCBmaWxlX29wZXJhdGlvbnMgaTkxNV9kcml2ZXJfZm9wcyA9IHsKIAkub3duZXIgPSBUSElT
X01PRFVMRSwKIAkub3BlbiA9IGRybV9vcGVuLAogCS5yZWxlYXNlID0gZHJtX3JlbGVhc2UsCiAJ
LnVubG9ja2VkX2lvY3RsID0gZHJtX2lvY3RsLAotCS5tbWFwID0gZHJtX2dlbV9tbWFwLAorCS5t
bWFwID0gaTkxNV9nZW1fbW1hcCwKIAkucG9sbCA9IGRybV9wb2xsLAogCS5yZWFkID0gZHJtX3Jl
YWQsCiAJLmNvbXBhdF9pb2N0bCA9IGk5MTVfY29tcGF0X2lvY3RsLApAQCAtMjc2Miw3ICsyNzU3
LDYgQEAgc3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIGRyaXZlciA9IHsKIAogCS5nZW1fY2xvc2Vf
b2JqZWN0ID0gaTkxNV9nZW1fY2xvc2Vfb2JqZWN0LAogCS5nZW1fZnJlZV9vYmplY3RfdW5sb2Nr
ZWQgPSBpOTE1X2dlbV9mcmVlX29iamVjdCwKLQkuZ2VtX3ZtX29wcyA9ICZpOTE1X2dlbV92bV9v
cHMsCiAKIAkucHJpbWVfaGFuZGxlX3RvX2ZkID0gZHJtX2dlbV9wcmltZV9oYW5kbGVfdG9fZmQs
CiAJLnByaW1lX2ZkX3RvX2hhbmRsZSA9IGRybV9nZW1fcHJpbWVfZmRfdG9faGFuZGxlLApAQCAt
Mjc3Myw3ICsyNzY3LDYgQEAgc3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIGRyaXZlciA9IHsKIAku
Z2V0X3NjYW5vdXRfcG9zaXRpb24gPSBpOTE1X2dldF9jcnRjX3NjYW5vdXRwb3MsCiAKIAkuZHVt
Yl9jcmVhdGUgPSBpOTE1X2dlbV9kdW1iX2NyZWF0ZSwKLQkuZHVtYl9tYXBfb2Zmc2V0ID0gaTkx
NV9nZW1fbW1hcF9ndHQsCiAJLmlvY3RscyA9IGk5MTVfaW9jdGxzLAogCS5udW1faW9jdGxzID0g
QVJSQVlfU0laRShpOTE1X2lvY3RscyksCiAJLmZvcHMgPSAmaTkxNV9kcml2ZXJfZm9wcywKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IDE0NzQ0YzExNDQ3NS4uNDIyMDQ2MzZkODM2IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTE4NTcsOCArMTg1Nyw2IEBAIGk5MTVfbXV0ZXhfbG9j
a19pbnRlcnJ1cHRpYmxlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiBpbnQgaTkxNV9nZW1fZHVt
Yl9jcmVhdGUoc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYsCiAJCQkgc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwKIAkJCSBzdHJ1Y3QgZHJtX21vZGVfY3JlYXRlX2R1bWIgKmFyZ3MpOwotaW50IGk5
MTVfZ2VtX21tYXBfZ3R0KHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2LCBzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2LAotCQkgICAgICB1MzIgaGFuZGxlLCB1NjQgKm9mZnNldCk7CiBpbnQgaTkxNV9n
ZW1fbW1hcF9ndHRfdmVyc2lvbih2b2lkKTsKIAogaW50IF9fbXVzdF9jaGVjayBpOTE1X2dlbV9z
ZXRfZ2xvYmFsX3NlcW5vKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHUzMiBzZXFubyk7CkBAIC0x
ODgyLDcgKzE4ODAsNiBAQCB2b2lkIGk5MTVfZ2VtX2RyaXZlcl9yZWxlYXNlKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIGk5MTVfZ2VtX3N1c3BlbmQoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIHZvaWQgaTkxNV9nZW1fc3VzcGVuZF9sYXRlKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIGk5MTVfZ2VtX3Jlc3VtZShz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwotdm1fZmF1bHRfdCBpOTE1X2dlbV9m
YXVsdChzdHJ1Y3Qgdm1fZmF1bHQgKnZtZik7CiAKIGludCBpOTE1X2dlbV9vcGVuKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpOwogdm9pZCBpOTE1
X2dlbV9yZWxlYXNlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fZmlsZSAqZmls
ZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwppbmRleCA2MTM5NWIwMzQ0M2UuLjY3OWZiNDZhN2Nj
MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCkBAIC00NCw2ICs0NCw3IEBACiAjaW5jbHVkZSAi
Z2VtL2k5MTVfZ2VtX2NsZmx1c2guaCIKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1fY29udGV4dC5o
IgogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9pb2N0bHMuaCIKKyNpbmNsdWRlICJnZW0vaTkxNV9n
ZW1fbW1hbi5oIgogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9wbS5oIgogI2luY2x1ZGUgImd0L2lu
dGVsX2NvbnRleHQuaCIKICNpbmNsdWRlICJndC9pbnRlbF9lbmdpbmVfdXNlci5oIgpAQCAtODU1
LDcgKzg1Niw3IEBAIHZvaWQgaTkxNV9nZW1fcnVudGltZV9zdXNwZW5kKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1KQogCiAJbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKG9iaiwgb24sCiAJ
CQkJICZpOTE1LT5nZ3R0LnVzZXJmYXVsdF9saXN0LCB1c2VyZmF1bHRfbGluaykKLQkJX19pOTE1
X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKG9iaik7CisJCV9faTkxNV9nZW1fb2JqZWN0X3JlbGVh
c2VfbW1hcF9ndHQob2JqKTsKIAogCS8qCiAJICogVGhlIGZlbmNlIHdpbGwgYmUgbG9zdCB3aGVu
IHRoZSBkZXZpY2UgcG93ZXJzIGRvd24uIElmIGFueSB3ZXJlCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2dldHBhcmFtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dldHBhcmFtLmMKaW5kZXggY2Y4YThjM2VmMDQ3Li41NGZjZTgxZDU3MjQgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dldHBhcmFtLmMKQEAgLTIsNiArMiw3IEBACiAgKiBTUERYLUxpY2Vuc2Ut
SWRlbnRpZmllcjogTUlUCiAgKi8KIAorI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9tbWFuLmgiCiAj
aW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3VzZXIuaCIKIAogI2luY2x1ZGUgImk5MTVfZHJ2Lmgi
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV92bWEuYwppbmRleCBlNTUxMmYyNmUyMGEuLjUxMDhkY2IyZTViMSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jCkBAIC0xMDU0LDcgKzEwNTQsNyBAQCBzdGF0aWMgdm9p
ZCBfX2k5MTVfdm1hX2lvdW5tYXAoc3RydWN0IGk5MTVfdm1hICp2bWEpCiAKIHZvaWQgaTkxNV92
bWFfcmV2b2tlX21tYXAoc3RydWN0IGk5MTVfdm1hICp2bWEpCiB7Ci0Jc3RydWN0IGRybV92bWFf
b2Zmc2V0X25vZGUgKm5vZGUgPSAmdm1hLT5vYmotPmJhc2Uudm1hX25vZGU7CisJc3RydWN0IGRy
bV92bWFfb2Zmc2V0X25vZGUgKm5vZGU7CiAJdTY0IHZtYV9vZmZzZXQ7CiAKIAlsb2NrZGVwX2Fz
c2VydF9oZWxkKCZ2bWEtPnZtLT5tdXRleCk7CkBAIC0xMDY1LDYgKzEwNjUsNyBAQCB2b2lkIGk5
MTVfdm1hX3Jldm9rZV9tbWFwKHN0cnVjdCBpOTE1X3ZtYSAqdm1hKQogCUdFTV9CVUdfT04oIWk5
MTVfdm1hX2lzX21hcF9hbmRfZmVuY2VhYmxlKHZtYSkpOwogCUdFTV9CVUdfT04oIXZtYS0+b2Jq
LT51c2VyZmF1bHRfY291bnQpOwogCisJbm9kZSA9ICZ2bWEtPm1tby0+dm1hX25vZGU7CiAJdm1h
X29mZnNldCA9IHZtYS0+Z2d0dF92aWV3LnBhcnRpYWwub2Zmc2V0IDw8IFBBR0VfU0hJRlQ7CiAJ
dW5tYXBfbWFwcGluZ19yYW5nZSh2bWEtPnZtLT5pOTE1LT5kcm0uYW5vbl9pbm9kZS0+aV9tYXBw
aW5nLAogCQkJICAgIGRybV92bWFfbm9kZV9vZmZzZXRfYWRkcihub2RlKSArIHZtYV9vZmZzZXQs
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV92bWEuaAppbmRleCA0NjU5MzI4MTNiYzUuLmYwOWY0ZjUxM2M0MSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuaAorKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5oCkBAIC02Myw2ICs2Myw5IEBAIHN0cnVjdCBpOTE1X3Zt
YSB7CiAJdTY0IGRpc3BsYXlfYWxpZ25tZW50OwogCXN0cnVjdCBpOTE1X3BhZ2Vfc2l6ZXMgcGFn
ZV9zaXplczsKIAorCS8qIG1tYXAtb2Zmc2V0IGFzc29jaWF0ZWQgd2l0aCBmZW5jaW5nIGZvciB0
aGlzIHZtYSAqLworCXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0CSptbW87CisKIAl1MzIgZmVuY2Vf
c2l6ZTsKIAl1MzIgZmVuY2VfYWxpZ25tZW50OwogCi0tIAoyLjI0LjAKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QK
SW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

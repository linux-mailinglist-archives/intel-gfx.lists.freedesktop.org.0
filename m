Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 77CD18004E
	for <lists+intel-gfx@lfdr.de>; Fri,  2 Aug 2019 20:41:14 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AC6C86EF46;
	Fri,  2 Aug 2019 18:41:11 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D90236EF46
 for <intel-gfx@lists.freedesktop.org>; Fri,  2 Aug 2019 18:41:09 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 02 Aug 2019 11:41:09 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,339,1559545200"; d="scan'208";a="164008390"
Received: from irvmail001.ir.intel.com ([163.33.26.43])
 by orsmga007.jf.intel.com with ESMTP; 02 Aug 2019 11:41:07 -0700
Received: from mwajdecz-MOBL1.ger.corp.intel.com
 (mwajdecz-mobl1.ger.corp.intel.com [172.28.174.50])
 by irvmail001.ir.intel.com (8.14.3/8.13.6/MailSET/Hub) with ESMTP id
 x72If4tK012718; Fri, 2 Aug 2019 19:41:06 +0100
From: Michal Wajdeczko <michal.wajdeczko@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  2 Aug 2019 18:40:54 +0000
Message-Id: <20190802184055.31988-6-michal.wajdeczko@intel.com>
X-Mailer: git-send-email 2.21.0.windows.1
In-Reply-To: <20190802184055.31988-1-michal.wajdeczko@intel.com>
References: <20190802184055.31988-1-michal.wajdeczko@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v7 5/6] drm/i915/uc: Inject probe errors into
 intel_uc_init_hw
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SW5qZWN0IHByb2JlIGVycm9ycyBpbnRvIGludGVsX3VjX2luaXRfaHcgdG8gbWFrZSBzdXJlIHdl
CmNvcnJlY3RseSBoYW5kbGUgYW55IHVDIGluaXRpYWxpemF0aW9uIGZhaWx1cmUuCgpUbyBhdm9p
ZCBjb21wbGFpbnMgZnJvbSBDSSBhYm91dCBpbmplY3RlZCBlcnJvcnMgdXNlCmk5MTVfcHJvYmVf
ZXJyb3IgdG8gbG93ZXIgbWVzc2FnZSBsZXZlbC4KCnY0OiByZWJhc2VkIGFmdGVyIG1vdmluZyBo
b3QgZml4ZXMgbW92ZWQgdG8gc2VwYXJhdGUgcGF0Y2hlcwoKU2lnbmVkLW9mZi1ieTogTWljaGFs
IFdhamRlY3prbyA8bWljaGFsLndhamRlY3prb0BpbnRlbC5jb20+CkNjOiBEYW5pZWxlIENlcmFv
bG8gU3B1cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29tPgpDYzogQ2hyaXMgV2ls
c29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+ClJldmlld2VkLWJ5OiBDaHJpcyBXaWxzb24g
PGNocmlzQGNocmlzLXdpbHNvbi5jby51az4gI3YxCi0tLQogLi4uL2dwdS9kcm0vaTkxNS9ndC91
Yy9pbnRlbF9ndWNfc3VibWlzc2lvbi5jICB8ICA0ICsrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3VjL2ludGVsX2h1Yy5jICAgICAgICAgfCAgOCArKysrKy0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvdWMvaW50ZWxfdWMuYyAgICAgICAgICB8IDE0ICsrKysrKysrKysrKystCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5jICAgICAgIHwgMTggKysrKysrKysr
KysrLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jICAgICAgICAgICAgICAg
IHwgIDIgKy0KIDUgZmlsZXMgY2hhbmdlZCwgMzUgaW5zZXJ0aW9ucygrKSwgMTEgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1
Ym1pc3Npb24uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19zdWJtaXNz
aW9uLmMKaW5kZXggYjRiNTA4ZjE5YTFjLi40MTI4OTIwOTZkYWEgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19zdWJtaXNzaW9uLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uYwpAQCAtMTEyMyw2ICsx
MTIzLDEwIEBAIGludCBpbnRlbF9ndWNfc3VibWlzc2lvbl9lbmFibGUoc3RydWN0IGludGVsX2d1
YyAqZ3VjKQogCWVudW0gaW50ZWxfZW5naW5lX2lkIGlkOwogCWludCBlcnI7CiAKKwllcnIgPSBp
OTE1X2luamVjdF9sb2FkX2Vycm9yKGd0LT5pOTE1LCAtRU5YSU8pOworCWlmIChlcnIpCisJCXJl
dHVybiBlcnI7CisKIAkvKgogCSAqIFdlJ3JlIHVzaW5nIEd1QyB3b3JrIGl0ZW1zIGZvciBzdWJt
aXR0aW5nIHdvcmsgdGhyb3VnaCBHdUMuIFNpbmNlCiAJICogd2UncmUgY29hbGVzY2luZyBtdWx0
aXBsZSByZXF1ZXN0cyBmcm9tIGEgc2luZ2xlIGNvbnRleHQgaW50byBhCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9odWMuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3VjL2ludGVsX2h1Yy5jCmluZGV4IGQ2NDJiMTY3YTM4OS4uZWY1NDA1M2M1ZWY5IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9odWMuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9odWMuYwpAQCAtMTM5LDYgKzEzOSwxMCBA
QCBpbnQgaW50ZWxfaHVjX2F1dGgoc3RydWN0IGludGVsX2h1YyAqaHVjKQogCUdFTV9CVUdfT04o
IWludGVsX3VjX2Z3X2lzX2xvYWRlZCgmaHVjLT5mdykpOwogCUdFTV9CVUdfT04oaW50ZWxfaHVj
X2lzX2F1dGhlbnRpY2F0ZWQoaHVjKSk7CiAKKwlyZXQgPSBpOTE1X2luamVjdF9sb2FkX2Vycm9y
KGd0LT5pOTE1LCAtRU5YSU8pOworCWlmIChyZXQpCisJCWdvdG8gZmFpbDsKKwogCXJldCA9IGlu
dGVsX2d1Y19hdXRoX2h1YyhndWMsCiAJCQkJIGludGVsX2d1Y19nZ3R0X29mZnNldChndWMsIGh1
Yy0+cnNhX2RhdGEpKTsKIAlpZiAocmV0KSB7CkBAIC0xNTgsMTMgKzE2MiwxMSBAQCBpbnQgaW50
ZWxfaHVjX2F1dGgoc3RydWN0IGludGVsX2h1YyAqaHVjKQogCX0KIAogCWh1Yy0+Zncuc3RhdHVz
ID0gSU5URUxfVUNfRklSTVdBUkVfUlVOTklORzsKLQogCXJldHVybiAwOwogCiBmYWlsOgorCWk5
MTVfcHJvYmVfZXJyb3IoZ3QtPmk5MTUsICJIdUM6IEF1dGhlbnRpY2F0aW9uIGZhaWxlZCAlZFxu
IiwgcmV0KTsKIAlodWMtPmZ3LnN0YXR1cyA9IElOVEVMX1VDX0ZJUk1XQVJFX0ZBSUw7Ci0KLQlE
Uk1fRVJST1IoIkh1QzogQXV0aGVudGljYXRpb24gZmFpbGVkICVkXG4iLCByZXQpOwogCXJldHVy
biByZXQ7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVs
X3VjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Yy5jCmluZGV4IGU1NDIx
YzBiOWEyNS4uNjZkNmUwNzc1YzIzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC91Yy9pbnRlbF91Yy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3Vj
LmMKQEAgLTM5LDYgKzM5LDEwIEBAIHN0YXRpYyBpbnQgX19pbnRlbF91Y19yZXNldF9odyhzdHJ1
Y3QgaW50ZWxfdWMgKnVjKQogCWludCByZXQ7CiAJdTMyIGd1Y19zdGF0dXM7CiAKKwlyZXQgPSBp
OTE1X2luamVjdF9sb2FkX2Vycm9yKGd0LT5pOTE1LCAtRU5YSU8pOworCWlmIChyZXQpCisJCXJl
dHVybiByZXQ7CisKIAlyZXQgPSBpbnRlbF9yZXNldF9ndWMoZ3QpOwogCWlmIChyZXQpIHsKIAkJ
RFJNX0VSUk9SKCJGYWlsZWQgdG8gcmVzZXQgR3VDLCByZXQgPSAlZFxuIiwgcmV0KTsKQEAgLTIw
NSw2ICsyMDksMTAgQEAgc3RhdGljIGludCBndWNfZW5hYmxlX2NvbW11bmljYXRpb24oc3RydWN0
IGludGVsX2d1YyAqZ3VjKQogCiAJR0VNX0JVR19PTihndWNfY29tbXVuaWNhdGlvbl9lbmFibGVk
KGd1YykpOwogCisJcmV0ID0gaTkxNV9pbmplY3RfbG9hZF9lcnJvcihpOTE1LCAtRU5YSU8pOwor
CWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKIAlyZXQgPSBpbnRlbF9ndWNfY3RfZW5hYmxlKCZn
dWMtPmN0KTsKIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwpAQCAtMzc2LDYgKzM4NCwxMCBAQCBz
dGF0aWMgaW50IHVjX2luaXRfd29wY20oc3RydWN0IGludGVsX3VjICp1YykKIAlHRU1fQlVHX09O
KCEoc2l6ZSAmIEdVQ19XT1BDTV9TSVpFX01BU0spKTsKIAlHRU1fQlVHX09OKHNpemUgJiB+R1VD
X1dPUENNX1NJWkVfTUFTSyk7CiAKKwllcnIgPSBpOTE1X2luamVjdF9sb2FkX2Vycm9yKGd0LT5p
OTE1LCAtRU5YSU8pOworCWlmIChlcnIpCisJCXJldHVybiBlcnI7CisKIAltYXNrID0gR1VDX1dP
UENNX1NJWkVfTUFTSyB8IEdVQ19XT1BDTV9TSVpFX0xPQ0tFRDsKIAllcnIgPSBpbnRlbF91bmNv
cmVfd3JpdGVfYW5kX3ZlcmlmeSh1bmNvcmUsIEdVQ19XT1BDTV9TSVpFLCBzaXplLCBtYXNrLAog
CQkJCQkgICAgc2l6ZSB8IEdVQ19XT1BDTV9TSVpFX0xPQ0tFRCk7CkBAIC01MDIsNyArNTE0LDcg
QEAgaW50IGludGVsX3VjX2luaXRfaHcoc3RydWN0IGludGVsX3VjICp1YykKIAlpZiAoR0VNX1dB
Uk5fT04ocmV0ID09IC1FSU8pKQogCQlyZXQgPSAtRUlOVkFMOwogCi0JZGV2X2VycihpOTE1LT5k
cm0uZGV2LCAiR3VDIGluaXRpYWxpemF0aW9uIGZhaWxlZCAlZFxuIiwgcmV0KTsKKwlpOTE1X3By
b2JlX2Vycm9yKGk5MTUsICJHdUMgaW5pdGlhbGl6YXRpb24gZmFpbGVkICVkXG4iLCByZXQpOwog
CXJldHVybiByZXQ7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Vj
L2ludGVsX3VjX2Z3LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5j
CmluZGV4IDY1MGFkNjAzN2I3NC4uYTNhMjJhMjYwMTZjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3VjL2ludGVsX3VjX2Z3LmMKQEAgLTM4Myw2ICszODMsMTAgQEAgc3RhdGljIGludCB1Y19m
d194ZmVyKHN0cnVjdCBpbnRlbF91Y19mdyAqdWNfZncsIHN0cnVjdCBpbnRlbF9ndCAqZ3QsCiAJ
dTY0IG9mZnNldDsKIAlpbnQgcmV0OwogCisJcmV0ID0gaTkxNV9pbmplY3RfbG9hZF9lcnJvcihn
dC0+aTkxNSwgLUVUSU1FRE9VVCk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKwogCWludGVs
X3VuY29yZV9mb3JjZXdha2VfZ2V0KHVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7CiAKIAkvKiBTZXQg
dGhlIHNvdXJjZSBhZGRyZXNzIGZvciB0aGUgdUNvZGUgKi8KQEAgLTQ0Myw4ICs0NDcsMTMgQEAg
aW50IGludGVsX3VjX2Z3X3VwbG9hZChzdHJ1Y3QgaW50ZWxfdWNfZncgKnVjX2Z3LCBzdHJ1Y3Qg
aW50ZWxfZ3QgKmd0LAogCS8qIG1ha2Ugc3VyZSB0aGUgc3RhdHVzIHdhcyBjbGVhcmVkIHRoZSBs
YXN0IHRpbWUgd2UgcmVzZXQgdGhlIHVjICovCiAJR0VNX0JVR19PTihpbnRlbF91Y19md19pc19s
b2FkZWQodWNfZncpKTsKIAorCWVyciA9IGk5MTVfaW5qZWN0X2xvYWRfZXJyb3IoZ3QtPmk5MTUs
IC1FTk9FWEVDKTsKKwlpZiAoZXJyKQorCQlyZXR1cm4gZXJyOworCiAJaWYgKCFpbnRlbF91Y19m
d19pc19hdmFpbGFibGUodWNfZncpKQogCQlyZXR1cm4gLUVOT0VYRUM7CisKIAkvKiBDYWxsIGN1
c3RvbSBsb2FkZXIgKi8KIAlpbnRlbF91Y19md19nZ3R0X2JpbmQodWNfZncsIGd0KTsKIAllcnIg
PSB1Y19md194ZmVyKHVjX2Z3LCBndCwgd29wY21fb2Zmc2V0LCBkbWFfZmxhZ3MpOwpAQCAtNDY0
LDEzICs0NzMsMTAgQEAgaW50IGludGVsX3VjX2Z3X3VwbG9hZChzdHJ1Y3QgaW50ZWxfdWNfZncg
KnVjX2Z3LCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LAogCXJldHVybiAwOwogCiBmYWlsOgorCWk5MTVf
cHJvYmVfZXJyb3IoZ3QtPmk5MTUsICJGYWlsZWQgdG8gbG9hZCAlcyBmaXJtd2FyZSAlcyAoJWQp
XG4iLAorCQkJIGludGVsX3VjX2Z3X3R5cGVfcmVwcih1Y19mdy0+dHlwZSksIHVjX2Z3LT5wYXRo
LAorCQkJIGVycik7CiAJdWNfZnctPnN0YXR1cyA9IElOVEVMX1VDX0ZJUk1XQVJFX0ZBSUw7Ci0J
RFJNX0RFQlVHX0RSSVZFUigiJXMgZncgbG9hZCBmYWlsZWRcbiIsCi0JCQkgaW50ZWxfdWNfZndf
dHlwZV9yZXByKHVjX2Z3LT50eXBlKSk7Ci0KLQlEUk1fV0FSTigiJXM6IEZhaWxlZCB0byBsb2Fk
IGZpcm13YXJlICVzIChlcnJvciAlZClcbiIsCi0JCSBpbnRlbF91Y19md190eXBlX3JlcHIodWNf
ZnctPnR5cGUpLCB1Y19mdy0+cGF0aCwgZXJyKTsKLQogCXJldHVybiBlcnI7CiB9CiAKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2dlbS5jCmluZGV4IDVlODdhY2M0Yjc3MC4uMjQzNmNkNTk4ZTZlIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2VtLmMKQEAgLTEyNDMsNyArMTI0Myw3IEBAIGludCBpOTE1X2dlbV9pbml0
X2h3KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCS8qIFdlIGNhbid0IGVuYWJsZSBj
b250ZXh0cyB1bnRpbCBhbGwgZmlybXdhcmUgaXMgbG9hZGVkICovCiAJcmV0ID0gaW50ZWxfdWNf
aW5pdF9odygmZ3QtPnVjKTsKIAlpZiAocmV0KSB7Ci0JCURSTV9FUlJPUigiRW5hYmxpbmcgdWMg
ZmFpbGVkICglZClcbiIsIHJldCk7CisJCWk5MTVfcHJvYmVfZXJyb3IoaTkxNSwgIkVuYWJsaW5n
IHVjIGZhaWxlZCAoJWQpXG4iLCByZXQpOwogCQlnb3RvIG91dDsKIAl9CiAKLS0gCjIuMTkuMgoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4
IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

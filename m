Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4CC378AA28
	for <lists+intel-gfx@lfdr.de>; Tue, 13 Aug 2019 00:10:28 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BFF036E5ED;
	Mon, 12 Aug 2019 22:10:26 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CC3916E5ED
 for <intel-gfx@lists.freedesktop.org>; Mon, 12 Aug 2019 22:10:25 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 12 Aug 2019 15:10:25 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,379,1559545200"; d="scan'208";a="204876622"
Received: from dceraolo-linux.fm.intel.com ([10.1.27.145])
 by fmsmga002.fm.intel.com with ESMTP; 12 Aug 2019 15:10:25 -0700
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 12 Aug 2019 15:10:16 -0700
Message-Id: <20190812221016.32007-1-daniele.ceraolospurio@intel.com>
X-Mailer: git-send-email 2.22.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/guc: keep breadcrumb irq always enabled
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UgcmVseSBvbiB0aGUgdGFza2xldCB0byB1cGRhdGUgdGhlIEdUIFBNIHJlZmNvdW50LCBzbyB3
ZSBjYW4ndCBkaXNhYmxlCml0IGV2ZW4gaWYgd2UndmUgcHJvY2Vzc2VkIGFsbCB0aGUgcmVxdWVz
dHMgZm9yIHRoZSBlbmdpbmUgYmVjYXVzZSB3ZQptaWdodCBoYXZlIGRldGVjdGVkIHRoZSByZXF1
ZXN0IGNvbXBsZXRpb24gYmVmb3JlIHRoZSBpbnRlcnJ1cHQgYXJyaXZlZC4KClNpbmNlIG9uIGFs
bCBwbGF0Zm9ybXMgb24gd2hpY2ggd2UgcGxhbiB0byBzdXBwb3J0IGd1YyBzdWJtaXNzaW9uIHdl
CmRvbid0IGFsbG93IGRpc2FibGluZyB0aGUgYnJlYWRjcnVtYiBpbnRlcnJ1cHRzLCB3ZSBjYW4g
ZnVydGhlciBzaXBsaWZ5CnRoZSBwYXJrL3VucGFyayBmbG93IGJ5IHJlbW92aW5nIHRoZSBpbnRl
cnJ1cHQgcGluL3VucGluLiBBIEJVR19PTiBoYXMKYmVlbiBhZGRlZCB0byBjYXRjaCBjaGFuZ2Vz
IHRvIHRoaXMgZmxvdyB0aGF0IHdvdWxkIHJlcXVpcmUgdXMgdG8KcmVzdG9yZSBzb21lIGtpbmQg
b2YgcGlubmluZy4KClNpZ25lZC1vZmYtYnk6IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmll
bGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5jb20+CkNjOiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlz
LXdpbHNvbi5jby51az4KQ2M6IE1pY2hhbCBXYWpkZWN6a28gPG1pY2hhbC53YWpkZWN6a29AaW50
ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmMg
ICB8IDIyIC0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Vu
Z2luZS5oICAgICAgICB8ICAzIC0tLQogLi4uL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNf
c3VibWlzc2lvbi5jIHwgMjUgKysrKysrKystLS0tLS0tLS0tLQogMyBmaWxlcyBjaGFuZ2VkLCAx
MSBpbnNlcnRpb25zKCspLCAzOSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfYnJlYWRjcnVtYnMuYwppbmRleCBjZWJhMWRhNjE5NjcuLjE1YmJkZDhjNzU1MiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5jCkBAIC0yMTIs
MjggKzIxMiw2IEBAIHN0YXRpYyB2b2lkIHNpZ25hbF9pcnFfd29yayhzdHJ1Y3QgaXJxX3dvcmsg
KndvcmspCiAJaW50ZWxfZW5naW5lX2JyZWFkY3J1bWJzX2lycShlbmdpbmUpOwogfQogCi12b2lk
IGludGVsX2VuZ2luZV9waW5fYnJlYWRjcnVtYnNfaXJxKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSkKLXsKLQlzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKmIgPSAmZW5naW5lLT5icmVh
ZGNydW1iczsKLQotCXNwaW5fbG9ja19pcnEoJmItPmlycV9sb2NrKTsKLQlpZiAoIWItPmlycV9l
bmFibGVkKyspCi0JCWlycV9lbmFibGUoZW5naW5lKTsKLQlHRU1fQlVHX09OKCFiLT5pcnFfZW5h
YmxlZCk7IC8qIG5vIG92ZXJmbG93ISAqLwotCXNwaW5fdW5sb2NrX2lycSgmYi0+aXJxX2xvY2sp
OwotfQotCi12b2lkIGludGVsX2VuZ2luZV91bnBpbl9icmVhZGNydW1ic19pcnEoc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lKQotewotCXN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYiA9
ICZlbmdpbmUtPmJyZWFkY3J1bWJzOwotCi0Jc3Bpbl9sb2NrX2lycSgmYi0+aXJxX2xvY2spOwot
CUdFTV9CVUdfT04oIWItPmlycV9lbmFibGVkKTsgLyogbm8gdW5kZXJmbG93ISAqLwotCWlmICgh
LS1iLT5pcnFfZW5hYmxlZCkKLQkJaXJxX2Rpc2FibGUoZW5naW5lKTsKLQlzcGluX3VubG9ja19p
cnEoJmItPmlycV9sb2NrKTsKLX0KLQogc3RhdGljIHZvaWQgX19pbnRlbF9icmVhZGNydW1ic19h
cm1faXJxKHN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYikKIHsKIAlzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUgPQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaAppbmRl
eCBlMTIyOGIwZTU3N2YuLmJjNjk0YWRjZDllYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lLmgKQEAgLTMzOCw5ICszMzgsNiBAQCB2b2lkIGludGVsX2VuZ2luZV9pbml0X2V4
ZWNsaXN0cyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwogdm9pZCBpbnRlbF9lbmdp
bmVfaW5pdF9icmVhZGNydW1icyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwogdm9p
ZCBpbnRlbF9lbmdpbmVfZmluaV9icmVhZGNydW1icyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUpOwogCi12b2lkIGludGVsX2VuZ2luZV9waW5fYnJlYWRjcnVtYnNfaXJxKHN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7Ci12b2lkIGludGVsX2VuZ2luZV91bnBpbl9icmVhZGNy
dW1ic19pcnEoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKLQogdm9pZCBpbnRlbF9l
bmdpbmVfc2lnbmFsX2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7
CiB2b2lkIGludGVsX2VuZ2luZV9kaXNhcm1fYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMv
aW50ZWxfZ3VjX3N1Ym1pc3Npb24uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVs
X2d1Y19zdWJtaXNzaW9uLmMKaW5kZXggNDQ5Y2E2MzU3MDE4Li5kZWIwNTRlZWIzN2MgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19zdWJtaXNzaW9uLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uYwpA
QCAtMTA1OSwxOCArMTA1OSw2IEBAIHN0YXRpYyB2b2lkIGd1Y19pbnRlcnJ1cHRzX3JlbGVhc2Uo
c3RydWN0IGludGVsX2d0ICpndCkKIAlycHMtPnBtX2ludHJtc2tfbWJ6ICY9IH5BUkFUX0VYUElS
RURfSU5UUk1TSzsKIH0KIAotc3RhdGljIHZvaWQgZ3VjX3N1Ym1pc3Npb25fcGFyayhzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUpCi17Ci0JaW50ZWxfZW5naW5lX3VucGluX2JyZWFkY3J1
bWJzX2lycShlbmdpbmUpOwotCWVuZ2luZS0+ZmxhZ3MgJj0gfkk5MTVfRU5HSU5FX05FRURTX0JS
RUFEQ1JVTUJfVEFTS0xFVDsKLX0KLQotc3RhdGljIHZvaWQgZ3VjX3N1Ym1pc3Npb25fdW5wYXJr
KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKLXsKLQllbmdpbmUtPmZsYWdzIHw9IEk5
MTVfRU5HSU5FX05FRURTX0JSRUFEQ1JVTUJfVEFTS0xFVDsKLQlpbnRlbF9lbmdpbmVfcGluX2Jy
ZWFkY3J1bWJzX2lycShlbmdpbmUpOwotfQotCiBzdGF0aWMgdm9pZCBndWNfc2V0X2RlZmF1bHRf
c3VibWlzc2lvbihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiB7CiAJLyoKQEAgLTEw
ODgsOCArMTA3Niw4IEBAIHN0YXRpYyB2b2lkIGd1Y19zZXRfZGVmYXVsdF9zdWJtaXNzaW9uKHN0
cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAogCWVuZ2luZS0+ZXhlY2xpc3RzLnRhc2ts
ZXQuZnVuYyA9IGd1Y19zdWJtaXNzaW9uX3Rhc2tsZXQ7CiAKLQllbmdpbmUtPnBhcmsgPSBndWNf
c3VibWlzc2lvbl9wYXJrOwotCWVuZ2luZS0+dW5wYXJrID0gZ3VjX3N1Ym1pc3Npb25fdW5wYXJr
OworCS8qIGRvIG5vdCB1c2UgZXhlY2xpc3RzIHBhcmsvdW5wYXJrICovCisJZW5naW5lLT5wYXJr
ID0gZW5naW5lLT51bnBhcmsgPSBOVUxMOwogCiAJZW5naW5lLT5yZXNldC5wcmVwYXJlID0gZ3Vj
X3Jlc2V0X3ByZXBhcmU7CiAJZW5naW5lLT5yZXNldC5yZXNldCA9IGd1Y19yZXNldDsKQEAgLTEw
OTgsNiArMTA4NiwxNSBAQCBzdGF0aWMgdm9pZCBndWNfc2V0X2RlZmF1bHRfc3VibWlzc2lvbihz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJZW5naW5lLT5jYW5jZWxfcmVxdWVzdHMg
PSBndWNfY2FuY2VsX3JlcXVlc3RzOwogCiAJZW5naW5lLT5mbGFncyAmPSB+STkxNV9FTkdJTkVf
U1VQUE9SVFNfU1RBVFM7CisJZW5naW5lLT5mbGFncyB8PSBJOTE1X0VOR0lORV9ORUVEU19CUkVB
RENSVU1CX1RBU0tMRVQ7CisKKwkvKgorCSAqIEZvciB0aGUgYnJlYWRjcnVtYiBpcnEgdG8gd29y
ayB3ZSBuZWVkIHRoZSBpbnRlcnJ1cHRzIHRvIHN0YXkKKwkgKiBlbmFibGVkLiBIb3dldmVyLCBv
biBhbGwgcGxhdGZvcm1zIG9uIHdoaWNoIHdlJ2xsIGhhdmUgc3VwcG9ydCBmb3IKKwkgKiBHdUMg
c3VibWlzc2lvbiB3ZSBkb24ndCBhbGxvdyBkaXNhYmxpbmcgdGhlIGludGVycnVwdHMgYXQgcnVu
dGltZSwgc28KKwkgKiB3ZSdyZSBhbHdheXMgc2FmZSB3aXRoIHRoZSBjdXJyZW50IGZsb3cuCisJ
ICovCisJR0VNX0JVR19PTihlbmdpbmUtPmlycV9lbmFibGUgfHwgZW5naW5lLT5pcnFfZGlzYWJs
ZSk7CiB9CiAKIGludCBpbnRlbF9ndWNfc3VibWlzc2lvbl9lbmFibGUoc3RydWN0IGludGVsX2d1
YyAqZ3VjKQotLSAKMi4yMi4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9p
bnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id BEC7B37018
	for <lists+intel-gfx@lfdr.de>; Thu,  6 Jun 2019 11:37:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EC8DE89745;
	Thu,  6 Jun 2019 09:37:15 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B365889791
 for <Intel-gfx@lists.freedesktop.org>; Thu,  6 Jun 2019 09:37:14 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 06 Jun 2019 02:37:14 -0700
X-ExtLoop1: 1
Received: from ssirotki-mobl3.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.251.93.246])
 by orsmga006.jf.intel.com with ESMTP; 06 Jun 2019 02:37:13 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Thu,  6 Jun 2019 10:36:37 +0100
Message-Id: <20190606093639.9372-20-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190606093639.9372-1-tvrtko.ursulin@linux.intel.com>
References: <20190606093639.9372-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 19/21] drm/i915: Convert intel_vgt_(de)balloon
 to uncore
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCk1vcmUgcmVt
b3ZhbCBvZiBpbXBsaWNpdCBkZXZfcHJpdiBmcm9tIHVzaW5nIG9sZCBtbWlvIGFjY2Vzc29ycy4K
CkZ1cnRoZXJtb3JlIHRoZXNlIGNhbGxzIHJlYWxseSBvcGVyYXRlIG9uIGdndHQgc28gaXQgbG9n
aWNhbGx5IG1ha2VzIHNlbnNlCmlmIHRoZXkgdGFrZSBpdCBhcyBwYXJhbWV0ZXIuCgpTaWduZWQt
b2ZmLWJ5OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgotLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jIHwgIDQgKystLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV92Z3B1LmMgICAgfCAyNCArKysrKysrKysrKysrKy0tLS0tLS0tLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdmdwdS5oICAgIHwgIDQgKystLQogMyBmaWxlcyBjaGFu
Z2VkLCAxOCBpbnNlcnRpb25zKCspLCAxNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2VtX2d0dC5jCmluZGV4IGZlOWNkNGVhOTY3MS4uZDNiMzY3NmQxMGYzIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dlbV9ndHQuYwpAQCAtMjkxNCw3ICsyOTE0LDcgQEAgaW50IGk5MTVfZ2Vt
X2luaXRfZ2d0dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJZ2d0dC0+cGlu
X2JpYXMgPSBtYXhfdCh1MzIsIEk5MTVfR1RUX1BBR0VfU0laRSwKIAkJCSAgICAgICBpbnRlbF9n
dWNfcmVzZXJ2ZWRfZ3R0X3NpemUoJmRldl9wcml2LT5ndWMpKTsKIAotCXJldCA9IGludGVsX3Zn
dF9iYWxsb29uKGRldl9wcml2KTsKKwlyZXQgPSBpbnRlbF92Z3RfYmFsbG9vbihnZ3R0KTsKIAlp
ZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCkBAIC0yOTgyLDcgKzI5ODIsNyBAQCB2b2lkIGk5MTVf
Z2d0dF9jbGVhbnVwX2h3KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlpbnRl
bF9ndWNfcmVsZWFzZV9nZ3R0X3RvcCgmZGV2X3ByaXYtPmd1Yyk7CiAKIAlpZiAoZHJtX21tX2lu
aXRpYWxpemVkKCZnZ3R0LT52bS5tbSkpIHsKLQkJaW50ZWxfdmd0X2RlYmFsbG9vbihkZXZfcHJp
dik7CisJCWludGVsX3ZndF9kZWJhbGxvb24oZ2d0dCk7CiAJCWk5MTVfYWRkcmVzc19zcGFjZV9m
aW5pKCZnZ3R0LT52bSk7CiAJfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3ZncHUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdmdwdS5jCmluZGV4IDk0ZDM5
OTJiNTk5ZC4uNDFlZDlhM2Y1MmI0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3ZncHUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZncHUuYwpAQCAtMTE3
LDE3ICsxMTcsMTcgQEAgc3RhdGljIHZvaWQgdmd0X2RlYmFsbG9vbl9zcGFjZShzdHJ1Y3QgaTkx
NV9nZ3R0ICpnZ3R0LAogICogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgdG8gZGVhbGxvY2F0ZSB0
aGUgYmFsbG9vbmVkLW91dCBncmFwaGljIG1lbW9yeSwgd2hlbgogICogZHJpdmVyIGlzIHVubG9h
ZGVkIG9yIHdoZW4gYmFsbG9vbmluZyBmYWlscy4KICAqLwotdm9pZCBpbnRlbF92Z3RfZGViYWxs
b29uKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3ZvaWQgaW50ZWxfdmd0X2Rl
YmFsbG9vbihzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0KQogewogCWludCBpOwogCi0JaWYgKCFpbnRl
bF92Z3B1X2FjdGl2ZShkZXZfcHJpdikpCisJaWYgKCFpbnRlbF92Z3B1X2FjdGl2ZShnZ3R0LT52
bS5pOTE1KSkKIAkJcmV0dXJuOwogCiAJRFJNX0RFQlVHKCJWR1QgZGViYWxsb29uLlxuIik7CiAK
IAlmb3IgKGkgPSAwOyBpIDwgNDsgaSsrKQotCQl2Z3RfZGViYWxsb29uX3NwYWNlKCZkZXZfcHJp
di0+Z2d0dCwgJmJsX2luZm8uc3BhY2VbaV0pOworCQl2Z3RfZGViYWxsb29uX3NwYWNlKGdndHQs
ICZibF9pbmZvLnNwYWNlW2ldKTsKIH0KIAogc3RhdGljIGludCB2Z3RfYmFsbG9vbl9zcGFjZShz
dHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0LApAQCAtMTk1LDIyICsxOTUsMjYgQEAgc3RhdGljIGludCB2
Z3RfYmFsbG9vbl9zcGFjZShzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0LAogICogUmV0dXJuczoKICAq
IHplcm8gb24gc3VjY2Vzcywgbm9uLXplcm8gaWYgY29uZmlndXJhdGlvbiBpbnZhbGlkIG9yIGJh
bGxvb25pbmcgZmFpbGVkCiAgKi8KLWludCBpbnRlbF92Z3RfYmFsbG9vbihzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCitpbnQgaW50ZWxfdmd0X2JhbGxvb24oc3RydWN0IGk5MTVf
Z2d0dCAqZ2d0dCkKIHsKLQlzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0ID0gJmRldl9wcml2LT5nZ3R0
OworCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSA9ICZnZ3R0LT52bS5pOTE1LT51bmNvcmU7
CiAJdW5zaWduZWQgbG9uZyBnZ3R0X2VuZCA9IGdndHQtPnZtLnRvdGFsOwogCiAJdW5zaWduZWQg
bG9uZyBtYXBwYWJsZV9iYXNlLCBtYXBwYWJsZV9zaXplLCBtYXBwYWJsZV9lbmQ7CiAJdW5zaWdu
ZWQgbG9uZyB1bm1hcHBhYmxlX2Jhc2UsIHVubWFwcGFibGVfc2l6ZSwgdW5tYXBwYWJsZV9lbmQ7
CiAJaW50IHJldDsKIAotCWlmICghaW50ZWxfdmdwdV9hY3RpdmUoZGV2X3ByaXYpKQorCWlmICgh
aW50ZWxfdmdwdV9hY3RpdmUoZ2d0dC0+dm0uaTkxNSkpCiAJCXJldHVybiAwOwogCi0JbWFwcGFi
bGVfYmFzZSA9IEk5MTVfUkVBRCh2Z3RpZl9yZWcoYXZhaWxfcnMubWFwcGFibGVfZ21hZHIuYmFz
ZSkpOwotCW1hcHBhYmxlX3NpemUgPSBJOTE1X1JFQUQodmd0aWZfcmVnKGF2YWlsX3JzLm1hcHBh
YmxlX2dtYWRyLnNpemUpKTsKLQl1bm1hcHBhYmxlX2Jhc2UgPSBJOTE1X1JFQUQodmd0aWZfcmVn
KGF2YWlsX3JzLm5vbm1hcHBhYmxlX2dtYWRyLmJhc2UpKTsKLQl1bm1hcHBhYmxlX3NpemUgPSBJ
OTE1X1JFQUQodmd0aWZfcmVnKGF2YWlsX3JzLm5vbm1hcHBhYmxlX2dtYWRyLnNpemUpKTsKKwlt
YXBwYWJsZV9iYXNlID0KKwkgIGludGVsX3VuY29yZV9yZWFkKHVuY29yZSwgdmd0aWZfcmVnKGF2
YWlsX3JzLm1hcHBhYmxlX2dtYWRyLmJhc2UpKTsKKwltYXBwYWJsZV9zaXplID0KKwkgIGludGVs
X3VuY29yZV9yZWFkKHVuY29yZSwgdmd0aWZfcmVnKGF2YWlsX3JzLm1hcHBhYmxlX2dtYWRyLnNp
emUpKTsKKwl1bm1hcHBhYmxlX2Jhc2UgPQorCSAgaW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCB2
Z3RpZl9yZWcoYXZhaWxfcnMubm9ubWFwcGFibGVfZ21hZHIuYmFzZSkpOworCXVubWFwcGFibGVf
c2l6ZSA9CisJICBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIHZndGlmX3JlZyhhdmFpbF9ycy5u
b25tYXBwYWJsZV9nbWFkci5zaXplKSk7CiAKIAltYXBwYWJsZV9lbmQgPSBtYXBwYWJsZV9iYXNl
ICsgbWFwcGFibGVfc2l6ZTsKIAl1bm1hcHBhYmxlX2VuZCA9IHVubWFwcGFibGVfYmFzZSArIHVu
bWFwcGFibGVfc2l6ZTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdmdw
dS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92Z3B1LmgKaW5kZXggZWJlMWI3YmNlZDk4
Li5lOTE4ZjQxODUwM2YgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdmdw
dS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdmdwdS5oCkBAIC00Miw3ICs0Miw3
IEBAIGludGVsX3ZncHVfaGFzX2h1Z2VfZ3R0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdikKIAlyZXR1cm4gZGV2X3ByaXYtPnZncHUuY2FwcyAmIFZHVF9DQVBTX0hVR0VfR1RUOwog
fQogCi1pbnQgaW50ZWxfdmd0X2JhbGxvb24oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2KTsKLXZvaWQgaW50ZWxfdmd0X2RlYmFsbG9vbihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpOworaW50IGludGVsX3ZndF9iYWxsb29uKHN0cnVjdCBpOTE1X2dndHQgKmdndHQp
Owordm9pZCBpbnRlbF92Z3RfZGViYWxsb29uKHN0cnVjdCBpOTE1X2dndHQgKmdndHQpOwogCiAj
ZW5kaWYgLyogX0k5MTVfVkdQVV9IXyAqLwotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVs
LWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

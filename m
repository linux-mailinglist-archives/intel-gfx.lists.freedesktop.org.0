Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8DED4105193
	for <lists+intel-gfx@lfdr.de>; Thu, 21 Nov 2019 12:43:32 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A0D6C6EE18;
	Thu, 21 Nov 2019 11:43:30 +0000 (UTC)
X-Original-To: Intel-GFX@lists.freedesktop.org
Delivered-To: Intel-GFX@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4AFAA6EE18
 for <Intel-GFX@lists.freedesktop.org>; Thu, 21 Nov 2019 11:43:29 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 21 Nov 2019 03:43:28 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,224,1571727600"; d="scan'208";a="209876791"
Received: from irvmail001.ir.intel.com ([163.33.26.43])
 by orsmga003.jf.intel.com with ESMTP; 21 Nov 2019 03:43:27 -0800
Received: from mwajdecz-mobl1.ger.corp.intel.com
 (mwajdecz-mobl1.ger.corp.intel.com [172.28.174.50])
 by irvmail001.ir.intel.com (8.14.3/8.13.6/MailSET/Hub) with ESMTP id
 xALBhQDT016853; Thu, 21 Nov 2019 11:43:26 GMT
To: Intel-GFX@lists.freedesktop.org, John.C.Harrison@intel.com
References: <20191120235604.29047-1-John.C.Harrison@Intel.com>
 <20191120235604.29047-2-John.C.Harrison@Intel.com>
Date: Thu, 21 Nov 2019 12:43:26 +0100
MIME-Version: 1.0
From: "Michal Wajdeczko" <michal.wajdeczko@intel.com>
Message-ID: <op.0blr6oi2xaggs7@mwajdecz-mobl1.ger.corp.intel.com>
In-Reply-To: <20191120235604.29047-2-John.C.Harrison@Intel.com>
User-Agent: Opera Mail/1.0 (Win32)
Subject: Re: [Intel-gfx] [PATCH 1/3] drm/i915/guc: Add non blocking CTB send
 function
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"; DelSp="yes"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCAyMSBOb3YgMjAxOSAwMDo1NjowMiArMDEwMCwgPEpvaG4uQy5IYXJyaXNvbkBpbnRl
bC5jb20+IHdyb3RlOgoKPiBGcm9tOiBNYXR0aGV3IEJyb3N0IDxtYXR0aGV3LmJyb3N0QGludGVs
LmNvbT4KPgo+IEFkZCBub24gYmxvY2tpbmcgQ1RCIHNlbmQgZnVjdGlvbiwgaW50ZWxfZ3VjX3Nl
bmRfbmIuIEluIG9yZGVyIHRvCj4gc3VwcG9ydCBhIG5vbiBibG9ja2luZyBDVEIgc2VuZCBmdWN0
aW9uIGEgc3BpbiBsb2NrIGlzIG5lZWRlZCB0bwoKMnggdHlwb3MKCj4gcHJvdGVjdCB0aGUgQ1RC
IGRlc2NyaXB0b3JzIGZpZWxkcy4gQWxzbyB0aGUgbm9uIGJsb2NraW5nIGNhbGwgbXVzdCBub3QK
PiB1cGRhdGUgdGhlIGZlbmNlIHZhbHVlIGFzIHRoaXMgdmFsdWUgaXMgb3duZWQgYnkgdGhlIGJs
b2NraW5nIGNhbGwKPiAoaW50ZWxfZ3VjX3NlbmQpLgoKeW91IHByb2JhYmx5IG1lYW4gImludGVs
X2d1Y19zZW5kX2N0IiwgYXMgaW50ZWxfZ3VjX3NlbmQgaXMganVzdCBhIHdyYXBwZXIKYXJvdW5k
IGd1Yy0+c2VuZAoKPgo+IFRoZSBibG9ja2luZyBDVEIgbm93IG11c3QgaGF2ZSBhIGZsb3cgY29u
dHJvbCBtZWNoYW5pc20gdG8gZW5zdXJlIHRoZQo+IGJ1ZmZlciBpc24ndCBvdmVycnVuLiBBIGxh
enkgc3BpbiB3YWl0IGlzIHVzZWQgYXMgd2UgYmVsaWV2ZSB0aGUgZmxvdwo+IGNvbnRyb2wgY29u
ZGl0aW9uIHNob3VsZCBiZSByYXJlIHdpdGggcHJvcGVybHkgc2l6ZWQgYnVmZmVyLiBBIHJldHJ5
Cj4gY291bnRlciBpcyBhbHNvIGltcGxlbWVudGVkIHdoaWNoIGZhaWxzIEgyRyBDVEJzIG9uY2Ug
YSBsaW1pdCBpcwo+IHJlYWNoZWQgdG8gcHJldmVudCBkZWFkbG9jay4KPgo+IFRoZSBmdW5jdGlv
biwgaW50ZWxfZ3VjX3NlbmRfbmIsIGlzIGV4cG9ydGVkIGluIHRoaXMgcGF0Y2ggYnV0IHVudXNl
ZC4KPiBTZXZlcmFsIHBhdGNoZXMgbGF0ZXIgaW4gdGhlIHNlcmllcyBtYWtlIHVzZSBvZiB0aGlz
IGZ1bmN0aW9uLgoKSXQncyBsaWtlbHkgaW4geWV0IGFub3RoZXIgc2VyaWVzCgo+Cj4gQ2M6IEpv
aG4gSGFycmlzb24gPGpvaG4uYy5oYXJyaXNvbkBpbnRlbC5jb20+Cj4gU2lnbmVkLW9mZi1ieTog
TWF0dGhldyBCcm9zdCA8bWF0dGhldy5icm9zdEBpbnRlbC5jb20+Cj4gLS0tCj4gIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5oICAgIHwgIDIgKwo+ICBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfY3QuYyB8IDk3ICsrKysrKysrKysrKysrKysrKystLS0t
Cj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19jdC5oIHwgMTAgKystCj4g
IDMgZmlsZXMgY2hhbmdlZCwgOTEgaW5zZXJ0aW9ucygrKSwgMTggZGVsZXRpb25zKC0pCj4KPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmggIAo+IGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmgKPiBpbmRleCBlNjQwMDIwNGEy
YmQuLjc3YzVhZjkxOWFjZSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91
Yy9pbnRlbF9ndWMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1
Yy5oCj4gQEAgLTk0LDYgKzk0LDggQEAgaW50ZWxfZ3VjX3NlbmRfYW5kX3JlY2VpdmUoc3RydWN0
IGludGVsX2d1YyAqZ3VjLCAgCj4gY29uc3QgdTMyICphY3Rpb24sIHUzMiBsZW4sCj4gIAlyZXR1
cm4gZ3VjLT5zZW5kKGd1YywgYWN0aW9uLCBsZW4sIHJlc3BvbnNlX2J1ZiwgcmVzcG9uc2VfYnVm
X3NpemUpOwo+ICB9Cj4gK2ludCBpbnRlbF9ndWNfc2VuZF9uYihzdHJ1Y3QgaW50ZWxfZ3VjX2N0
ICpjdCwgY29uc3QgdTMyICphY3Rpb24sIHUzMiAgCj4gbGVuKTsKPiArCgpIbW0sIHRoaXMgbWlz
bWF0Y2ggb2YgZ3VjL2N0IHBhcmFtZXRlciBicmVha3MgdGhlIG91ciBsYXllcmluZy4KQnV0IHdl
IGNhbiBrZWVwIHRoaXMgbGF5ZXJpbmcgaW50YWN0IGJ5IGludHJvZHVjaW5nIHNvbWUgZmxhZ3Mg
dG8KdGhlIGV4aXN0aW5nIGd1Y19zZW5kKCkgZnVuY3Rpb24uIFRoZXNlIGZsYWdzIGNvdWxkIGJl
IHBhc3NlZCBhcwpoaWdoIGJpdHMgaW4gYWN0aW9uWzBdLCBsaWtlIHRoaXM6CgojZGVmaW5lIEdV
Q19BQ1RJT05fRkxBR19ET05UX1dBSVQgMHg4MDAwMDAwMAoKaW50IGludGVsX2d1Y19hdXRoX2h1
YyhzdHJ1Y3QgaW50ZWxfZ3VjICpndWMsIHUzMiByc2Ffb2Zmc2V0KQp7Cgl1MzIgYWN0aW9uW10g
PSB7CgkJSU5URUxfR1VDX0FDVElPTl9BVVRIRU5USUNBVEVfSFVDIHwgR1VDX0FDVElPTl9GTEFH
X0RPTlRfV0FJVCwKCQlyc2Ffb2Zmc2V0Cgl9OwoKCXJldHVybiBpbnRlbF9ndWNfc2VuZChndWMs
IGFjdGlvbiwgQVJSQVlfU0laRShhY3Rpb24pKTsKfQoKdGhlbiBhY3R1YWwgYmFjay1lbmQgb2Yg
Z3VjLT5zZW5kIGNhbiB0YWtlIHByb3BlciBzdGVwcyBiYXNlZCBvbiB0aGlzIGZsYWc6CgpAQCBp
bnQgaW50ZWxfZ3VjX3NlbmRfbW1pbyhzdHJ1Y3QgaW50ZWxfZ3VjICpndWMsIGNvbnN0IHUzMiAq
YWN0aW9uLCB1MzIgIApsZW4sCiAgICAgICAgIEdFTV9CVUdfT04oIWxlbik7CiAgICAgICAgIEdF
TV9CVUdfT04obGVuID4gZ3VjLT5zZW5kX3JlZ3MuY291bnQpOwoKKyAgICAgICBpZiAoKmFjdGlv
biAmIEdVQ19BQ1RJT05fRkxBR19ET05UX1dBSVQpCisgICAgICAgICAgICAgICByZXR1cm4gLUVJ
TlZBTDsKKyAgICAgICAqYWN0aW9uICY9IH5HVUNfQUNUSU9OX0ZMQUdfRE9OVF9XQUlUOworCiAg
ICAgICAgIC8qIFdlIGV4cGVjdCBvbmx5IGFjdGlvbiBjb2RlICovCiAgICAgICAgIEdFTV9CVUdf
T04oKmFjdGlvbiAmIH5JTlRFTF9HVUNfTVNHX0NPREVfTUFTSyk7CgpAQCBAQCBpbnQgaW50ZWxf
Z3VjX3NlbmRfY3Qoc3RydWN0IGludGVsX2d1YyAqZ3VjLCBjb25zdCB1MzIgKmFjdGlvbiwgdTMy
ICAKbGVuLAogICAgICAgICB1MzIgc3RhdHVzID0gfjA7IC8qIHVuZGVmaW5lZCAqLwogICAgICAg
ICBpbnQgcmV0OwoKKyAgICAgICBpZiAoKmFjdGlvbiAmIEdVQ19BQ1RJT05fRkxBR19ET05UX1dB
SVQpIHsKKyAgICAgICAgICAgICAgIEdFTV9CVUdfT04ocmVzcG9uc2VfYnVmKTsKKyAgICAgICAg
ICAgICAgIEdFTV9CVUdfT04ocmVzcG9uc2VfYnVmX3NpemUpOworICAgICAgICAgICAgICAgcmV0
dXJuIGN0Y2hfc2VuZF9uYihjdCwgY3RjaCwgYWN0aW9uLCBsZW4pOworICAgICAgIH0KKwogICAg
ICAgICBtdXRleF9sb2NrKCZndWMtPnNlbmRfbXV0ZXgpOwoKICAgICAgICAgcmV0ID0gY3RjaF9z
ZW5kKGN0LCBjdGNoLCBhY3Rpb24sIGxlbiwgcmVzcG9uc2VfYnVmLCAgCnJlc3BvbnNlX2J1Zl9z
aXplLAoKCj4gIHN0YXRpYyBpbmxpbmUgdm9pZCBpbnRlbF9ndWNfbm90aWZ5KHN0cnVjdCBpbnRl
bF9ndWMgKmd1YykKPiAgewo+ICAJZ3VjLT5ub3RpZnkoZ3VjKTsKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2N0LmMgIAo+IGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2N0LmMKPiBpbmRleCBiNDkxMTU1MTc1MTAuLmU1MGQ5
NjhiMTVkNSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9n
dWNfY3QuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19jdC5j
Cj4gQEAgLTMsNiArMyw4IEBACj4gICAqIENvcHlyaWdodCDCqSAyMDE2LTIwMTkgSW50ZWwgQ29y
cG9yYXRpb24KPiAgICovCj4gKyNpbmNsdWRlIDxsaW51eC9jaXJjX2J1Zi5oPgo+ICsKPiAgI2lu
Y2x1ZGUgImk5MTVfZHJ2LmgiCj4gICNpbmNsdWRlICJpbnRlbF9ndWNfY3QuaCIKPiBAQCAtMTIs
NiArMTQsOCBAQAo+ICAjZGVmaW5lIENUX0RFQlVHX0RSSVZFUiguLi4pCWRvIHsgfSB3aGlsZSAo
MCkKPiAgI2VuZGlmCj4gKyNkZWZpbmUgTUFYX1JFVFJZCQkweDEwMDAwMDAKPiArCj4gIHN0cnVj
dCBjdF9yZXF1ZXN0IHsKPiAgCXN0cnVjdCBsaXN0X2hlYWQgbGluazsKPiAgCXUzMiBmZW5jZTsK
PiBAQCAtNDAsNyArNDQsOCBAQCB2b2lkIGludGVsX2d1Y19jdF9pbml0X2Vhcmx5KHN0cnVjdCBp
bnRlbF9ndWNfY3QgKmN0KQo+ICAJLyogd2UncmUgdXNpbmcgc3RhdGljIGNoYW5uZWwgb3duZXJz
ICovCj4gIAljdC0+aG9zdF9jaGFubmVsLm93bmVyID0gQ1RCX09XTkVSX0hPU1Q7Cj4gLQlzcGlu
X2xvY2tfaW5pdCgmY3QtPmxvY2spOwo+ICsJc3Bpbl9sb2NrX2luaXQoJmN0LT5yZXF1ZXN0X2xv
Y2spOwo+ICsJc3Bpbl9sb2NrX2luaXQoJmN0LT5zZW5kX2xvY2spOwo+ICAJSU5JVF9MSVNUX0hF
QUQoJmN0LT5wZW5kaW5nX3JlcXVlc3RzKTsKPiAgCUlOSVRfTElTVF9IRUFEKCZjdC0+aW5jb21p
bmdfcmVxdWVzdHMpOwo+ICAJSU5JVF9XT1JLKCZjdC0+d29ya2VyLCBjdF9pbmNvbWluZ19yZXF1
ZXN0X3dvcmtlcl9mdW5jKTsKPiBAQCAtMjkxLDcgKzI5Niw4IEBAIHN0YXRpYyB1MzIgY3RjaF9n
ZXRfbmV4dF9mZW5jZShzdHJ1Y3QgIAo+IGludGVsX2d1Y19jdF9jaGFubmVsICpjdGNoKQo+ICBz
dGF0aWMgaW50IGN0Yl93cml0ZShzdHJ1Y3QgaW50ZWxfZ3VjX2N0X2J1ZmZlciAqY3RiLAo+ICAJ
CSAgICAgY29uc3QgdTMyICphY3Rpb24sCj4gIAkJICAgICB1MzIgbGVuIC8qIGluIGR3b3JkcyAq
LywKPiAtCQkgICAgIHUzMiBmZW5jZSwKPiArCQkgICAgIHUzMiBmZW5jZV92YWx1ZSwKPiArCQkg
ICAgIGJvb2wgZW5hYmxlX2ZlbmNlLAoKbWF5YmUgd2UgY2FuIGp1c3QgZ3VhcmFudGVlIHRoYXQg
ZmVuY2U9MCB3aWxsIG5ldmVyIGJlIHVzZWQgYXMgYSB2YWxpZApmZW5jZSBpZCwgdGhlbiB0aGlz
IGZsYWcgY291bGQgYmUgcmVwbGFjZWQgd2l0aCAoZmVuY2UgIT0gMCkgY2hlY2suCgo+ICAJCSAg
ICAgYm9vbCB3YW50X3Jlc3BvbnNlKQo+ICB7Cj4gIAlzdHJ1Y3QgZ3VjX2N0X2J1ZmZlcl9kZXNj
ICpkZXNjID0gY3RiLT5kZXNjOwo+IEBAIC0zMjgsMTggKzMzNCwxOCBAQCBzdGF0aWMgaW50IGN0
Yl93cml0ZShzdHJ1Y3QgaW50ZWxfZ3VjX2N0X2J1ZmZlciAgCj4gKmN0YiwKPiAgCSAqIERXMis6
IGFjdGlvbiBkYXRhCj4gIAkgKi8KPiAgCWhlYWRlciA9IChsZW4gPDwgR1VDX0NUX01TR19MRU5f
U0hJRlQpIHwKPiAtCQkgKEdVQ19DVF9NU0dfV1JJVEVfRkVOQ0VfVE9fREVTQykgfAo+ICsJCSAo
ZW5hYmxlX2ZlbmNlID8gR1VDX0NUX01TR19XUklURV9GRU5DRV9UT19ERVNDIDogMCkgfAoKSG1t
LCBldmVuIGlmIHdlIGFzayBmdyB0byBkbyBub3Qgd3JpdGUgYmFjayBmZW5jZSB0byB0aGUgZGVz
Y3JpcHRvciwKSUlSQyBjdXJyZW50IGZpcm13YXJlIHdpbGwgdW5jb25kaXRpb25hbGx5IHdyaXRl
IGJhY2sgcmV0dXJuIHN0YXR1cwpvZiB0aGlzIG5vbi1ibG9ja2luZyBjYWxsLCBwb3NzaWJseSBv
dmVyd3JpdGluZyBzdGF0dXMgb2YgdGhlIGJsb2NrZWQKY2FsbC4KCj4gIAkJICh3YW50X3Jlc3Bv
bnNlID8gR1VDX0NUX01TR19TRU5EX1NUQVRVUyA6IDApIHwKCmJ0dywgaWYgd2Ugc3dpdGNoIGFs
bCByZXF1ZXN0cyB0byBleHBlY3QgcmVwbHkgc2VuZCBiYWNrIG92ZXIgQ1RCLAp0aGVuIHdlIGNh
biBwb3NzaWJseSBkcm9wIHRoZSBzZW5kX211dGV4IGluIENUQiBwYXRocywgYW5kIGJsb2NrCm9u
bHkgd2hlbiB0aGVyZSBpcyBubyBET05UX1dBSVQgZmxhZyBhbmQgd2UgaGF2ZSB0byB3YWl0IGZv
ciByZXNwb25zZS4KCj4gIAkJIChhY3Rpb25bMF0gPDwgR1VDX0NUX01TR19BQ1RJT05fU0hJRlQp
Owo+IAlDVF9ERUJVR19EUklWRVIoIkNUOiB3cml0aW5nICUqcGggJSpwaCAlKnBoXG4iLAo+IC0J
CQk0LCAmaGVhZGVyLCA0LCAmZmVuY2UsCj4gKwkJCTQsICZoZWFkZXIsIDQsICZmZW5jZV92YWx1
ZSwKPiAgCQkJNCAqIChsZW4gLSAxKSwgJmFjdGlvblsxXSk7Cj4gCWNtZHNbdGFpbF0gPSBoZWFk
ZXI7Cj4gIAl0YWlsID0gKHRhaWwgKyAxKSAlIHNpemU7Cj4gLQljbWRzW3RhaWxdID0gZmVuY2U7
Cj4gKwljbWRzW3RhaWxdID0gZmVuY2VfdmFsdWU7Cj4gIAl0YWlsID0gKHRhaWwgKyAxKSAlIHNp
emU7Cj4gCWZvciAoaSA9IDE7IGkgPCBsZW47IGkrKykgewo+IEBAIC00NDAsNiArNDQ2LDQ3IEBA
IHN0YXRpYyBpbnQgd2FpdF9mb3JfY3RfcmVxdWVzdF91cGRhdGUoc3RydWN0ICAKPiBjdF9yZXF1
ZXN0ICpyZXEsIHUzMiAqc3RhdHVzKQo+ICAJcmV0dXJuIGVycjsKPiAgfQo+ICtzdGF0aWMgaW5s
aW5lIGJvb2wgY3RiX2hhc19yb29tKHN0cnVjdCBndWNfY3RfYnVmZmVyX2Rlc2MgKmRlc2MsIHUz
MiAgCj4gbGVuKQo+ICt7Cj4gKwl1MzIgaGVhZCA9IFJFQURfT05DRShkZXNjLT5oZWFkKTsKPiAr
CXUzMiBzcGFjZTsKPiArCj4gKwlzcGFjZSA9IENJUkNfU1BBQ0UoZGVzYy0+dGFpbCwgaGVhZCwg
ZGVzYy0+c2l6ZSk7Cj4gKwo+ICsJcmV0dXJuIHNwYWNlID49IGxlbjsKPiArfQo+ICsKPiAraW50
IGludGVsX2d1Y19zZW5kX25iKHN0cnVjdCBpbnRlbF9ndWNfY3QgKmN0LAo+ICsJCSAgICAgIGNv
bnN0IHUzMiAqYWN0aW9uLAo+ICsJCSAgICAgIHUzMiBsZW4pCj4gK3sKPiArCXN0cnVjdCBpbnRl
bF9ndWNfY3RfY2hhbm5lbCAqY3RjaCA9ICZjdC0+aG9zdF9jaGFubmVsOwo+ICsJc3RydWN0IGlu
dGVsX2d1Y19jdF9idWZmZXIgKmN0YiA9ICZjdGNoLT5jdGJzW0NUQl9TRU5EXTsKPiArCXN0cnVj
dCBndWNfY3RfYnVmZmVyX2Rlc2MgKmRlc2MgPSBjdGItPmRlc2M7Cj4gKwlpbnQgZXJyOwo+ICsK
PiArCUdFTV9CVUdfT04oIWN0Y2gtPmVuYWJsZWQpOwo+ICsJR0VNX0JVR19PTighbGVuKTsKPiAr
CUdFTV9CVUdfT04obGVuICYgfkdVQ19DVF9NU0dfTEVOX01BU0spOwo+ICsJbG9ja2RlcF9hc3Nl
cnRfaGVsZCgmY3QtPnNlbmRfbG9jayk7CgpobW0sIGRvZXMgaXQgbWVhbiB0aGF0IG5vdyBpdCdz
IGNhbGxlciByZXNwb25zaWJpbGl0eSB0byBzcGlubG9jawpvbiBDVCBwcml2YXRlIGxvY2sgPyBU
aGF0IGlzIG5vdCBob3cgb3RoZXIgZ3VjX3NlbmQoKSBmdW5jdGlvbnMgd29yay4KCj4gKwo+ICsJ
aWYgKHVubGlrZWx5KCFjdGJfaGFzX3Jvb20oZGVzYywgKGxlbiArIDEpICogNCkpKSB7Cj4gKwkJ
Y3QtPnJldHJ5Kys7Cj4gKwkJaWYgKGN0LT5yZXRyeSA+PSBNQVhfUkVUUlkpCj4gKwkJCXJldHVy
biAtRURFQURMSzsKPiArCQllbHNlCj4gKwkJCXJldHVybiAtRUJVU1k7Cj4gKwl9Cj4gKwo+ICsJ
Y3QtPnJldHJ5ID0gMDsKPiArCWVyciA9IGN0Yl93cml0ZShjdGIsIGFjdGlvbiwgbGVuLCAwLCBm
YWxzZSwgZmFsc2UpOwo+ICsJaWYgKHVubGlrZWx5KGVycikpCj4gKwkJcmV0dXJuIGVycjsKPiAr
Cj4gKwlpbnRlbF9ndWNfbm90aWZ5KGN0X3RvX2d1YyhjdCkpOwo+ICsJcmV0dXJuIDA7Cj4gK30K
PiArCj4gIHN0YXRpYyBpbnQgY3RjaF9zZW5kKHN0cnVjdCBpbnRlbF9ndWNfY3QgKmN0LAo+ICAJ
CSAgICAgc3RydWN0IGludGVsX2d1Y19jdF9jaGFubmVsICpjdGNoLAo+ICAJCSAgICAgY29uc3Qg
dTMyICphY3Rpb24sCj4gQEAgLTQ2MCwxNyArNTA3LDM1IEBAIHN0YXRpYyBpbnQgY3RjaF9zZW5k
KHN0cnVjdCBpbnRlbF9ndWNfY3QgKmN0LAo+ICAJR0VNX0JVR19PTihsZW4gJiB+R1VDX0NUX01T
R19MRU5fTUFTSyk7Cj4gIAlHRU1fQlVHX09OKCFyZXNwb25zZV9idWYgJiYgcmVzcG9uc2VfYnVm
X3NpemUpOwo+ICsJLyoKPiArCSAqIFdlIHVzZSBhIGxhenkgc3BpbiB3YWl0IGxvb3AgaGVyZSBh
cyB3ZSBiZWxpZXZlIHRoYXQgaWYgdGhlIENUCj4gKwkgKiBidWZmZXJzIGFyZSBzaXplZCBjb3Jy
ZWN0bHkgdGhlIGZsb3cgY29udHJvbCBjb25kaXRpb24gc2hvdWxkIGJlCj4gKwkgKiByYXJlLgo+
ICsJICovCj4gK3JldHJ5Ogo+ICsJc3Bpbl9sb2NrX2lycXNhdmUoJmN0LT5zZW5kX2xvY2ssIGZs
YWdzKTsKPiArCWlmICh1bmxpa2VseSghY3RiX2hhc19yb29tKGRlc2MsIChsZW4gKyAxKSAqIDQp
KSkgewo+ICsJCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmN0LT5zZW5kX2xvY2ssIGZsYWdzKTsK
PiArCQljdC0+cmV0cnkrKzsKPiArCQlpZiAoY3QtPnJldHJ5ID49IE1BWF9SRVRSWSkKPiArCQkJ
cmV0dXJuIC1FREVBRExLOwoKSSdtIG5vdCBzdXJlIHdoYXQncyBiZXR0ZXI6IGhhdmUgc2VjcmV0
IGRlYWRsb2NrIGhhcmQgdG8gcmVwcm9kdWNlLApvciBkZWFkbG9ja3MgZWFzaWVyIHRvIGNhdGNo
IHRoYXQgaGVscHMgaW1wcm92ZSB0byBiZSBkZWFkbG9jay1jbGVhbgoKPiArCQljcHVfcmVsYXgo
KTsKPiArCQlnb3RvIHJldHJ5Owo+ICsJfQo+ICsKPiArCWN0LT5yZXRyeSA9IDA7Cj4gIAlmZW5j
ZSA9IGN0Y2hfZ2V0X25leHRfZmVuY2UoY3RjaCk7Cj4gIAlyZXF1ZXN0LmZlbmNlID0gZmVuY2U7
Cj4gIAlyZXF1ZXN0LnN0YXR1cyA9IDA7Cj4gIAlyZXF1ZXN0LnJlc3BvbnNlX2xlbiA9IHJlc3Bv
bnNlX2J1Zl9zaXplOwo+ICAJcmVxdWVzdC5yZXNwb25zZV9idWYgPSByZXNwb25zZV9idWY7Cj4g
LQlzcGluX2xvY2tfaXJxc2F2ZSgmY3QtPmxvY2ssIGZsYWdzKTsKPiArCXNwaW5fbG9jaygmY3Qt
PnJlcXVlc3RfbG9jayk7Cj4gIAlsaXN0X2FkZF90YWlsKCZyZXF1ZXN0LmxpbmssICZjdC0+cGVu
ZGluZ19yZXF1ZXN0cyk7Cj4gLQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZjdC0+bG9jaywgZmxh
Z3MpOwo+ICsJc3Bpbl91bmxvY2soJmN0LT5yZXF1ZXN0X2xvY2spOwo+IC0JZXJyID0gY3RiX3dy
aXRlKGN0YiwgYWN0aW9uLCBsZW4sIGZlbmNlLCAhIXJlc3BvbnNlX2J1Zik7Cj4gKwllcnIgPSBj
dGJfd3JpdGUoY3RiLCBhY3Rpb24sIGxlbiwgZmVuY2UsIHRydWUsICEhcmVzcG9uc2VfYnVmKTsK
PiArCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmN0LT5zZW5kX2xvY2ssIGZsYWdzKTsKPiAgCWlm
ICh1bmxpa2VseShlcnIpKQo+ICAJCWdvdG8gdW5saW5rOwo+IEBAIC01MDEsOSArNTY2LDkgQEAg
c3RhdGljIGludCBjdGNoX3NlbmQoc3RydWN0IGludGVsX2d1Y19jdCAqY3QsCj4gIAl9Cj4gdW5s
aW5rOgo+IC0Jc3Bpbl9sb2NrX2lycXNhdmUoJmN0LT5sb2NrLCBmbGFncyk7Cj4gKwlzcGluX2xv
Y2tfaXJxc2F2ZSgmY3QtPnJlcXVlc3RfbG9jaywgZmxhZ3MpOwo+ICAJbGlzdF9kZWwoJnJlcXVl
c3QubGluayk7Cj4gLQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZjdC0+bG9jaywgZmxhZ3MpOwo+
ICsJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmY3QtPnJlcXVlc3RfbG9jaywgZmxhZ3MpOwo+IAly
ZXR1cm4gZXJyOwo+ICB9Cj4gQEAgLTY1Myw3ICs3MTgsNyBAQCBzdGF0aWMgaW50IGN0X2hhbmRs
ZV9yZXNwb25zZShzdHJ1Y3QgaW50ZWxfZ3VjX2N0ICAKPiAqY3QsIGNvbnN0IHUzMiAqbXNnKQo+
IAlDVF9ERUJVR19EUklWRVIoIkNUOiByZXNwb25zZSBmZW5jZSAldSBzdGF0dXMgJSN4XG4iLCBm
ZW5jZSwgc3RhdHVzKTsKPiAtCXNwaW5fbG9jaygmY3QtPmxvY2spOwo+ICsJc3Bpbl9sb2NrKCZj
dC0+cmVxdWVzdF9sb2NrKTsKPiAgCWxpc3RfZm9yX2VhY2hfZW50cnkocmVxLCAmY3QtPnBlbmRp
bmdfcmVxdWVzdHMsIGxpbmspIHsKPiAgCQlpZiAodW5saWtlbHkoZmVuY2UgIT0gcmVxLT5mZW5j
ZSkpIHsKPiAgCQkJQ1RfREVCVUdfRFJJVkVSKCJDVDogcmVxdWVzdCAldSBhd2FpdHMgcmVzcG9u
c2VcbiIsCj4gQEAgLTY3Miw3ICs3MzcsNyBAQCBzdGF0aWMgaW50IGN0X2hhbmRsZV9yZXNwb25z
ZShzdHJ1Y3QgaW50ZWxfZ3VjX2N0ICAKPiAqY3QsIGNvbnN0IHUzMiAqbXNnKQo+ICAJCWZvdW5k
ID0gdHJ1ZTsKPiAgCQlicmVhazsKPiAgCX0KPiAtCXNwaW5fdW5sb2NrKCZjdC0+bG9jayk7Cj4g
KwlzcGluX3VubG9jaygmY3QtPnJlcXVlc3RfbG9jayk7Cj4gCWlmICghZm91bmQpCj4gIAkJRFJN
X0VSUk9SKCJDVDogdW5zb2xpY2l0ZWQgcmVzcG9uc2UgJSpwaFxuIiwgNCAqIG1zZ2xlbiwgbXNn
KTsKPiBAQCAtNzEwLDEzICs3NzUsMTMgQEAgc3RhdGljIGJvb2wgY3RfcHJvY2Vzc19pbmNvbWlu
Z19yZXF1ZXN0cyhzdHJ1Y3QgIAo+IGludGVsX2d1Y19jdCAqY3QpCj4gIAl1MzIgKnBheWxvYWQ7
Cj4gIAlib29sIGRvbmU7Cj4gLQlzcGluX2xvY2tfaXJxc2F2ZSgmY3QtPmxvY2ssIGZsYWdzKTsK
PiArCXNwaW5fbG9ja19pcnFzYXZlKCZjdC0+cmVxdWVzdF9sb2NrLCBmbGFncyk7Cj4gIAlyZXF1
ZXN0ID0gbGlzdF9maXJzdF9lbnRyeV9vcl9udWxsKCZjdC0+aW5jb21pbmdfcmVxdWVzdHMsCj4g
IAkJCQkJICAgc3RydWN0IGN0X2luY29taW5nX3JlcXVlc3QsIGxpbmspOwo+ICAJaWYgKHJlcXVl
c3QpCj4gIAkJbGlzdF9kZWwoJnJlcXVlc3QtPmxpbmspOwo+ICAJZG9uZSA9ICEhbGlzdF9lbXB0
eSgmY3QtPmluY29taW5nX3JlcXVlc3RzKTsKPiAtCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmN0
LT5sb2NrLCBmbGFncyk7Cj4gKwlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZjdC0+cmVxdWVzdF9s
b2NrLCBmbGFncyk7Cj4gCWlmICghcmVxdWVzdCkKPiAgCQlyZXR1cm4gdHJ1ZTsKPiBAQCAtNzc3
LDkgKzg0Miw5IEBAIHN0YXRpYyBpbnQgY3RfaGFuZGxlX3JlcXVlc3Qoc3RydWN0IGludGVsX2d1
Y19jdCAgCj4gKmN0LCBjb25zdCB1MzIgKm1zZykKPiAgCX0KPiAgCW1lbWNweShyZXF1ZXN0LT5t
c2csIG1zZywgNCAqIG1zZ2xlbik7Cj4gLQlzcGluX2xvY2tfaXJxc2F2ZSgmY3QtPmxvY2ssIGZs
YWdzKTsKPiArCXNwaW5fbG9ja19pcnFzYXZlKCZjdC0+cmVxdWVzdF9sb2NrLCBmbGFncyk7Cj4g
IAlsaXN0X2FkZF90YWlsKCZyZXF1ZXN0LT5saW5rLCAmY3QtPmluY29taW5nX3JlcXVlc3RzKTsK
PiAtCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmN0LT5sb2NrLCBmbGFncyk7Cj4gKwlzcGluX3Vu
bG9ja19pcnFyZXN0b3JlKCZjdC0+cmVxdWVzdF9sb2NrLCBmbGFncyk7Cj4gCXF1ZXVlX3dvcmso
c3lzdGVtX3VuYm91bmRfd3EsICZjdC0+d29ya2VyKTsKPiAgCXJldHVybiAwOwo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfY3QuaCAgCj4gYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfY3QuaAo+IGluZGV4IDdjMjRkODNmNWMy
NC4uYmM2NzBhNzk2YmQ4IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Vj
L2ludGVsX2d1Y19jdC5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxf
Z3VjX2N0LmgKPiBAQCAtNjIsOCArNjIsMTEgQEAgc3RydWN0IGludGVsX2d1Y19jdCB7Cj4gIAlz
dHJ1Y3QgaW50ZWxfZ3VjX2N0X2NoYW5uZWwgaG9zdF9jaGFubmVsOwo+ICAJLyogb3RoZXIgY2hh
bm5lbHMgYXJlIHRiZCAqLwo+IC0JLyoqIEBsb2NrOiBwcm90ZWN0cyBwZW5kaW5nIHJlcXVlc3Rz
IGxpc3QgKi8KPiAtCXNwaW5sb2NrX3QgbG9jazsKPiArCS8qKiBAcmVxdWVzdF9sb2NrOiBwcm90
ZWN0cyBwZW5kaW5nIHJlcXVlc3RzIGxpc3QgKi8KPiArCXNwaW5sb2NrX3QgcmVxdWVzdF9sb2Nr
Owo+ICsKPiArCS8qKiBAc2VuZF9sb2NrOiBwcm90ZWN0cyBoMmcgY2hhbm5lbCAqLwo+ICsJc3Bp
bmxvY2tfdCBzZW5kX2xvY2s7Cj4gCS8qKiBAcGVuZGluZ19yZXF1ZXN0czogbGlzdCBvZiByZXF1
ZXN0cyB3YWl0aW5nIGZvciByZXNwb25zZSAqLwo+ICAJc3RydWN0IGxpc3RfaGVhZCBwZW5kaW5n
X3JlcXVlc3RzOwo+IEBAIC03Myw2ICs3Niw5IEBAIHN0cnVjdCBpbnRlbF9ndWNfY3Qgewo+IAkv
KiogQHdvcmtlcjogd29ya2VyIGZvciBoYW5kbGluZyBpbmNvbWluZyByZXF1ZXN0cyAqLwo+ICAJ
c3RydWN0IHdvcmtfc3RydWN0IHdvcmtlcjsKPiArCj4gKwkvKiogQHJldHJ5OiB0aGUgbnVtYmVy
IG9mIHRpbWVzIGEgSDJHIENUQiBoYXMgYmVlbiByZXRyaWVkICovCj4gKwl1MzIgcmV0cnk7Cj4g
IH07Cj4gdm9pZCBpbnRlbF9ndWNfY3RfaW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfZ3VjX2N0ICpj
dCk7Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

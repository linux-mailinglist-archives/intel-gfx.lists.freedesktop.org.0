Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B423CE709
	for <lists+intel-gfx@lfdr.de>; Mon, 29 Apr 2019 17:58:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3C06689142;
	Mon, 29 Apr 2019 15:58:19 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2A95E89142
 for <intel-gfx@lists.freedesktop.org>; Mon, 29 Apr 2019 15:58:18 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by fmsmga105.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 29 Apr 2019 08:58:17 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.60,410,1549958400"; d="scan'208";a="139819625"
Received: from jbartcza-mobl.ger.corp.intel.com (HELO [10.251.88.64])
 ([10.251.88.64])
 by orsmga006.jf.intel.com with ESMTP; 29 Apr 2019 08:58:16 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20190425092004.9995-1-chris@chris-wilson.co.uk>
 <20190425092004.9995-22-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <26c507d4-60bc-c6aa-119e-f29ac182621a@linux.intel.com>
Date: Mon, 29 Apr 2019 16:58:15 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <20190425092004.9995-22-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 22/45] drm/i915/execlists: Virtual engine
 bonding
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDI1LzA0LzIwMTkgMTA6MTksIENocmlzIFdpbHNvbiB3cm90ZToKPiBTb21lIHVzZXJzIHJl
cXVpcmUgdGhhdCB3aGVuIGEgbWFzdGVyIGJhdGNoIGlzIGV4ZWN1dGVkIG9uIG9uZSBwYXJ0aWN1
bGFyCj4gZW5naW5lLCBhIGNvbXBhbmlvbiBiYXRjaCBpcyBydW4gc2ltdWx0YW5lb3VzbHkgb24g
YSBzcGVjaWZpYyBzbGF2ZQo+IGVuZ2luZS4gRm9yIHRoaXMgcHVycG9zZSwgd2UgaW50cm9kdWNl
IHZpcnR1YWwgZW5naW5lIGJvbmRpbmcsIGFsbG93aW5nCj4gbWFwcyBvZiBtYXN0ZXI6c2xhdmVz
IHRvIGJlIGNvbnN0cnVjdGVkIHRvIGNvbnN0cmFpbiB3aGljaCBwaHlzaWNhbAo+IGVuZ2luZXMg
YSB2aXJ0dWFsIGVuZ2luZSBtYXkgc2VsZWN0IGdpdmVuIGEgZmVuY2Ugb24gYSBtYXN0ZXIgZW5n
aW5lLgo+IAo+IEZvciB0aGUgbW9tZW50LCB3ZSBjb250aW51ZSB0byBpZ25vcmUgdGhlIGlzc3Vl
IG9mIHByZWVtcHRpb24gZGVmZXJyaW5nCj4gdGhlIG1hc3RlciByZXF1ZXN0IGZvciBsYXRlci4g
SWRlYWxseSwgd2Ugd291bGQgbGlrZSB0byB0aGVuIGFsc28gcmVtb3ZlCj4gdGhlIHNsYXZlIGFu
ZCBydW4gc29tZXRoaW5nIGVsc2UgcmF0aGVyIHRoYW4gaGF2ZSBpdCBzdGFsbCB0aGUgcGlwZWxp
bmUuCj4gV2l0aCBsb2FkIGJhbGFuY2luZywgd2Ugc2hvdWxkIGJlIGFibGUgdG8gbW92ZSB3b3Jr
bG9hZCBhcm91bmQgaXQsIGJ1dAo+IHRoZXJlIGlzIGEgc2ltaWxhciBzdGFsbCBvbiB0aGUgbWFz
dGVyIHBpcGVsaW5lIHdoaWxlIGl0IG1heSB3YWl0IGZvcgo+IHRoZSBzbGF2ZSB0byBiZSBleGVj
dXRlZC4gQXQgdGhlIGNvc3Qgb2YgbW9yZSBsYXRlbmN5IGZvciB0aGUgYm9uZGVkCj4gcmVxdWVz
dCwgaXQgbWF5IGJlIGludGVyZXN0aW5nIHRvIGxhdW5jaCBib3RoIG9uIHRoZWlyIGVuZ2luZXMg
aW4KPiBsb2Nrc3RlcC4gKEJ1YmJsZXMgYWJvdW5kLikKPiAKPiBPcGVuczogQWxzbyB3aGF0IGFi
b3V0IGJvbmRpbmcgYW4gZW5naW5lIGFzIGl0cyBvd24gbWFzdGVyPyBJdCBkb2Vzbid0Cj4gYnJl
YWsgYW55dGhpbmcgaW50ZXJuYWxseSwgc28gYWxsb3cgdGhlIHNpbGxpbmVzcy4KPiAKPiB2Mjog
RW1hbmNpcGF0ZSB0aGUgYm9uZHMKPiB2MzogQ291cGxlIGluIGRlbGF5ZWQgc2NoZWR1bGluZyBm
b3IgdGhlIHNlbGZ0ZXN0cwo+IHY0OiBIYW5kbGUgaW52YWxpZCBtdXR1YWxseSBleGNsdXNpdmUg
Ym9uZGluZwo+IHY1OiBNZW50aW9uIHdoYXQgdGhlIHVhcGkgZG9lcwo+IHY2OiBzL25ib25kL251
bV9ib25kcy8KPiAKPiBTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdp
bHNvbi5jby51az4KPiBDYzogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNv
bT4KPiAtLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5o
ICB8ICAgNyArCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICAgICAg
ICAgfCAgOTggKysrKysrKysrCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMu
aCAgICAgICAgICAgfCAgIDQgKwo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rf
bHJjLmMgICAgICAgIHwgMTkxICsrKysrKysrKysrKysrKysrKwo+ICAgZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9nZW1fY29udGV4dC5jICAgICAgIHwgIDg0ICsrKysrKysrCj4gICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbGliX3N3X2ZlbmNlLmMgfCAgIDMgKwo+ICAgaW5jbHVk
ZS91YXBpL2RybS9pOTE1X2RybS5oICAgICAgICAgICAgICAgICAgIHwgIDQ0ICsrKysKPiAgIDcg
ZmlsZXMgY2hhbmdlZCwgNDMxIGluc2VydGlvbnMoKykKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAo+IGluZGV4IGIwN2QzNjg1ZTJjYi4uY2E4ZDk1
YTU3MDhkIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2lu
ZV90eXBlcy5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5
cGVzLmgKPiBAQCAtNDA1LDYgKzQwNSwxMyBAQCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzIHsKPiAg
IAkgKi8KPiAgIAl2b2lkCQkoKnN1Ym1pdF9yZXF1ZXN0KShzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpy
cSk7Cj4gICAKPiArCS8qCj4gKwkgKiBDYWxsZWQgb24gc2lnbmFsaW5nIG9mIGEgU1VCTUlUX0ZF
TkNFLCBwYXNzaW5nIGFsb25nIHRoZSBzaWduYWxpbmcKPiArCSAqIHJlcXVlc3QgZG93biB0byB0
aGUgYm9uZGVkIHBhaXJzLgo+ICsJICovCj4gKwl2b2lkICAgICAgICAgICAgKCpib25kX2V4ZWN1
dGUpKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAo+ICsJCQkJCXN0cnVjdCBkbWFfZmVuY2UgKnNp
Z25hbCk7Cj4gKwo+ICAgCS8qCj4gICAJICogQ2FsbCB3aGVuIHRoZSBwcmlvcml0eSBvbiBhIHJl
cXVlc3QgaGFzIGNoYW5nZWQgYW5kIGl0IGFuZCBpdHMKPiAgIAkgKiBkZXBlbmRlbmNpZXMgbWF5
IG5lZWQgcmVzY2hlZHVsaW5nLiBOb3RlIHRoZSByZXF1ZXN0IGl0c2VsZiBtYXkKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9scmMuYwo+IGluZGV4IDhhY2Y5ZDFjNmYyZi4uZDc5M2Q5NzY0MDJk
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiBAQCAtMTkxLDYgKzE5MSwx
OCBAQCBzdHJ1Y3QgdmlydHVhbF9lbmdpbmUgewo+ICAgCQlpbnQgcHJpbzsKPiAgIAl9IG5vZGVz
W0k5MTVfTlVNX0VOR0lORVNdOwo+ICAgCj4gKwkvKgo+ICsJICogS2VlcCB0cmFjayBvZiBib25k
ZWQgcGFpcnMgLS0gcmVzdHJpY3Rpb25zIHVwb24gb24gb3VyIHNlbGVjdGlvbgo+ICsJICogb2Yg
cGh5c2ljYWwgZW5naW5lcyBhbnkgcGFydGljdWxhciByZXF1ZXN0IG1heSBiZSBzdWJtaXR0ZWQg
dG8uCj4gKwkgKiBJZiB3ZSByZWNlaXZlIGEgc3VibWl0LWZlbmNlIGZyb20gYSBtYXN0ZXIgZW5n
aW5lLCB3ZSB3aWxsIG9ubHkKPiArCSAqIHVzZSBvbmUgb2Ygc2libGluZ19tYXNrIHBoeXNpY2Fs
IGVuZ2luZXMuCj4gKwkgKi8KPiArCXN0cnVjdCB2ZV9ib25kIHsKPiArCQljb25zdCBzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICptYXN0ZXI7Cj4gKwkJaW50ZWxfZW5naW5lX21hc2tfdCBzaWJsaW5n
X21hc2s7Cj4gKwl9ICpib25kczsKPiArCXVuc2lnbmVkIGludCBudW1fYm9uZHM7Cj4gKwo+ICAg
CS8qIEFuZCBmaW5hbGx5LCB3aGljaCBwaHlzaWNhbCBlbmdpbmVzIHRoaXMgdmlydHVhbCBlbmdp
bmUgbWFwcyBvbnRvLiAqLwo+ICAgCXVuc2lnbmVkIGludCBudW1fc2libGluZ3M7Cj4gICAJc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqc2libGluZ3NbMF07Cj4gQEAgLTk4Miw2ICs5OTQsNyBAQCBz
dGF0aWMgdm9pZCBleGVjbGlzdHNfZGVxdWV1ZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdp
bmUpCj4gICAJCQlyYl9lcmFzZV9jYWNoZWQocmIsICZleGVjbGlzdHMtPnZpcnR1YWwpOwo+ICAg
CQkJUkJfQ0xFQVJfTk9ERShyYik7Cj4gICAKPiArCQkJR0VNX0JVR19PTighKHJxLT5leGVjdXRp
b25fbWFzayAmIGVuZ2luZS0+bWFzaykpOwo+ICAgCQkJcnEtPmVuZ2luZSA9IGVuZ2luZTsKPiAg
IAo+ICAgCQkJaWYgKGVuZ2luZSAhPSB2ZS0+c2libGluZ3NbMF0pIHsKPiBAQCAtMzA5Myw2ICsz
MTA2LDggQEAgc3RhdGljIHZvaWQgdmlydHVhbF9jb250ZXh0X2Rlc3Ryb3koc3RydWN0IGtyZWYg
KmtyZWYpCj4gICAJaWYgKHZlLT5jb250ZXh0LnN0YXRlKQo+ICAgCQlfX2V4ZWNsaXN0c19jb250
ZXh0X2ZpbmkoJnZlLT5jb250ZXh0KTsKPiAgIAo+ICsJa2ZyZWUodmUtPmJvbmRzKTsKPiArCj4g
ICAJaTkxNV90aW1lbGluZV9maW5pKCZ2ZS0+YmFzZS50aW1lbGluZSk7Cj4gICAJa2ZyZWUodmUp
Owo+ICAgfQo+IEBAIC0zMjg4LDYgKzMzMDMsMzggQEAgc3RhdGljIHZvaWQgdmlydHVhbF9zdWJt
aXRfcmVxdWVzdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkKPiAgIAl0YXNrbGV0X3NjaGVkdWxl
KCZ2ZS0+YmFzZS5leGVjbGlzdHMudGFza2xldCk7Cj4gICB9Cj4gICAKPiArc3RhdGljIHN0cnVj
dCB2ZV9ib25kICoKPiArdmlydHVhbF9maW5kX2JvbmQoc3RydWN0IHZpcnR1YWxfZW5naW5lICp2
ZSwKPiArCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKm1hc3RlcikKPiArewo+ICsJ
aW50IGk7Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IHZlLT5udW1fYm9uZHM7IGkrKykgewo+ICsJ
CWlmICh2ZS0+Ym9uZHNbaV0ubWFzdGVyID09IG1hc3RlcikKPiArCQkJcmV0dXJuICZ2ZS0+Ym9u
ZHNbaV07Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIE5VTEw7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lk
Cj4gK3ZpcnR1YWxfYm9uZF9leGVjdXRlKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCBzdHJ1Y3Qg
ZG1hX2ZlbmNlICpzaWduYWwpCj4gK3sKPiArCXN0cnVjdCB2aXJ0dWFsX2VuZ2luZSAqdmUgPSB0
b192aXJ0dWFsX2VuZ2luZShycS0+ZW5naW5lKTsKPiArCXN0cnVjdCB2ZV9ib25kICpib25kOwo+
ICsKPiArCWJvbmQgPSB2aXJ0dWFsX2ZpbmRfYm9uZCh2ZSwgdG9fcmVxdWVzdChzaWduYWwpLT5l
bmdpbmUpOwo+ICsJaWYgKGJvbmQpIHsKPiArCQlpbnRlbF9lbmdpbmVfbWFza190IG9sZCwgbmV3
LCBjbXA7Cj4gKwo+ICsJCWNtcCA9IFJFQURfT05DRShycS0+ZXhlY3V0aW9uX21hc2spOwo+ICsJ
CWRvIHsKPiArCQkJb2xkID0gY21wOwo+ICsJCQluZXcgPSBjbXAgJiBib25kLT5zaWJsaW5nX21h
c2s7Cj4gKwkJfSB3aGlsZSAoKGNtcCA9IGNtcHhjaGcoJnJxLT5leGVjdXRpb25fbWFzaywgb2xk
LCBuZXcpKSAhPSBvbGQpOwo+ICsJfQo+ICt9Cj4gKwo+ICAgc3RydWN0IGludGVsX2NvbnRleHQg
Kgo+ICAgaW50ZWxfZXhlY2xpc3RzX2NyZWF0ZV92aXJ0dWFsKHN0cnVjdCBpOTE1X2dlbV9jb250
ZXh0ICpjdHgsCj4gICAJCQkgICAgICAgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqKnNpYmxpbmdz
LAo+IEBAIC0zMzI4LDYgKzMzNzUsNyBAQCBpbnRlbF9leGVjbGlzdHNfY3JlYXRlX3ZpcnR1YWwo
c3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwKPiAgIAo+ICAgCXZlLT5iYXNlLnNjaGVkdWxl
ID0gaTkxNV9zY2hlZHVsZTsKPiAgIAl2ZS0+YmFzZS5zdWJtaXRfcmVxdWVzdCA9IHZpcnR1YWxf
c3VibWl0X3JlcXVlc3Q7Cj4gKwl2ZS0+YmFzZS5ib25kX2V4ZWN1dGUgPSB2aXJ0dWFsX2JvbmRf
ZXhlY3V0ZTsKPiAgIAo+ICAgCXZlLT5iYXNlLmV4ZWNsaXN0cy5xdWV1ZV9wcmlvcml0eV9oaW50
ID0gSU5UX01JTjsKPiAgIAl0YXNrbGV0X2luaXQoJnZlLT5iYXNlLmV4ZWNsaXN0cy50YXNrbGV0
LAo+IEBAIC0zNDE3LDkgKzM0NjUsNTkgQEAgaW50ZWxfZXhlY2xpc3RzX2Nsb25lX3ZpcnR1YWwo
c3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwKPiAgIAlpZiAoSVNfRVJSKGRzdCkpCj4gICAJ
CXJldHVybiBkc3Q7Cj4gICAKPiArCWlmIChzZS0+bnVtX2JvbmRzKSB7Cj4gKwkJc3RydWN0IHZp
cnR1YWxfZW5naW5lICpkZSA9IHRvX3ZpcnR1YWxfZW5naW5lKGRzdC0+ZW5naW5lKTsKPiArCj4g
KwkJZGUtPmJvbmRzID0ga21lbWR1cChzZS0+Ym9uZHMsCj4gKwkJCQkgICAgc2l6ZW9mKCpzZS0+
Ym9uZHMpICogc2UtPm51bV9ib25kcywKPiArCQkJCSAgICBHRlBfS0VSTkVMKTsKPiArCQlpZiAo
IWRlLT5ib25kcykgewo+ICsJCQlpbnRlbF9jb250ZXh0X3B1dChkc3QpOwo+ICsJCQlyZXR1cm4g
RVJSX1BUUigtRU5PTUVNKTsKPiArCQl9Cj4gKwo+ICsJCWRlLT5udW1fYm9uZHMgPSBzZS0+bnVt
X2JvbmRzOwo+ICsJfQo+ICsKPiAgIAlyZXR1cm4gZHN0Owo+ICAgfQo+ICAgCj4gK2ludCBpbnRl
bF92aXJ0dWFsX2VuZ2luZV9hdHRhY2hfYm9uZChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdp
bmUsCj4gKwkJCQkgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKm1hc3RlciwKPiAr
CQkJCSAgICAgY29uc3Qgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqc2libGluZykKPiArewo+ICsJ
c3RydWN0IHZpcnR1YWxfZW5naW5lICp2ZSA9IHRvX3ZpcnR1YWxfZW5naW5lKGVuZ2luZSk7Cj4g
KwlzdHJ1Y3QgdmVfYm9uZCAqYm9uZDsKPiArCWludCBuOwo+ICsKPiArCS8qIFNhbml0eSBjaGVj
ayB0aGUgc2libGluZyBpcyBwYXJ0IG9mIHRoZSB2aXJ0dWFsIGVuZ2luZSAqLwo+ICsJZm9yIChu
ID0gMDsgbiA8IHZlLT5udW1fc2libGluZ3M7IG4rKykKPiArCQlpZiAoc2libGluZyA9PSB2ZS0+
c2libGluZ3Nbbl0pCj4gKwkJCWJyZWFrOwo+ICsJaWYgKG4gPT0gdmUtPm51bV9zaWJsaW5ncykK
PiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlib25kID0gdmlydHVhbF9maW5kX2JvbmQodmUs
IG1hc3Rlcik7Cj4gKwlpZiAoYm9uZCkgewo+ICsJCWJvbmQtPnNpYmxpbmdfbWFzayB8PSBzaWJs
aW5nLT5tYXNrOwo+ICsJCXJldHVybiAwOwo+ICsJfQo+ICsKPiArCWJvbmQgPSBrcmVhbGxvYyh2
ZS0+Ym9uZHMsCj4gKwkJCXNpemVvZigqYm9uZCkgKiAodmUtPm51bV9ib25kcyArIDEpLAo+ICsJ
CQlHRlBfS0VSTkVMKTsKPiArCWlmICghYm9uZCkKPiArCQlyZXR1cm4gLUVOT01FTTsKPiArCj4g
Kwlib25kW3ZlLT5udW1fYm9uZHNdLm1hc3RlciA9IG1hc3RlcjsKPiArCWJvbmRbdmUtPm51bV9i
b25kc10uc2libGluZ19tYXNrID0gc2libGluZy0+bWFzazsKPiArCj4gKwl2ZS0+Ym9uZHMgPSBi
b25kOwo+ICsJdmUtPm51bV9ib25kcysrOwo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICAg
dm9pZCBpbnRlbF9leGVjbGlzdHNfc2hvd19yZXF1ZXN0cyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICplbmdpbmUsCj4gICAJCQkJICAgc3RydWN0IGRybV9wcmludGVyICptLAo+ICAgCQkJCSAgIHZv
aWQgKCpzaG93X3JlcXVlc3QpKHN0cnVjdCBkcm1fcHJpbnRlciAqbSwKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9scmMuaAo+IGluZGV4IDU1MzA2MDYwNTJlNS4uZTAyOWFlZTg3YWRmIDEwMDY0
NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5oCj4gKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmgKPiBAQCAtMTIzLDQgKzEyMyw4IEBAIHN0
cnVjdCBpbnRlbF9jb250ZXh0ICoKPiAgIGludGVsX2V4ZWNsaXN0c19jbG9uZV92aXJ0dWFsKHN0
cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgsCj4gICAJCQkgICAgICBzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICpzcmMpOwo+ICAgCj4gK2ludCBpbnRlbF92aXJ0dWFsX2VuZ2luZV9hdHRhY2hfYm9u
ZChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCj4gKwkJCQkgICAgIGNvbnN0IHN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MgKm1hc3RlciwKPiArCQkJCSAgICAgY29uc3Qgc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqc2libGluZyk7Cj4gKwo+ICAgI2VuZGlmIC8qIF9JTlRFTF9MUkNfSF8gKi8K
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYwo+IGluZGV4IDczMzA4NzQ5OTM2
Yy4uNjhkMTAwMzhmM2M5IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X2xyYy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJj
LmMKPiBAQCAtMTMsNiArMTMsNyBAQAo+ICAgI2luY2x1ZGUgInNlbGZ0ZXN0cy9pZ3RfZ2VtX3V0
aWxzLmgiCj4gICAjaW5jbHVkZSAic2VsZnRlc3RzL2lndF9saXZlX3Rlc3QuaCIKPiAgICNpbmNs
dWRlICJzZWxmdGVzdHMvaWd0X3NwaW5uZXIuaCIKPiArI2luY2x1ZGUgInNlbGZ0ZXN0cy9saWJf
c3dfZmVuY2UuaCIKPiAgICNpbmNsdWRlICJzZWxmdGVzdHMvbW9ja19jb250ZXh0LmgiCj4gICAK
PiAgIHN0YXRpYyBpbnQgbGl2ZV9zYW5pdHljaGVjayh2b2lkICphcmcpCj4gQEAgLTE2MTAsNiAr
MTYxMSwxOTUgQEAgc3RhdGljIGludCBsaXZlX3ZpcnR1YWxfbWFzayh2b2lkICphcmcpCj4gICAJ
cmV0dXJuIGVycjsKPiAgIH0KPiAgIAo+ICtzdGF0aWMgaW50IGJvbmRfdmlydHVhbF9lbmdpbmUo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCj4gKwkJCSAgICAgICB1bnNpZ25lZCBpbnQg
Y2xhc3MsCj4gKwkJCSAgICAgICBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICoqc2libGluZ3MsCj4g
KwkJCSAgICAgICB1bnNpZ25lZCBpbnQgbnNpYmxpbmcsCj4gKwkJCSAgICAgICB1bnNpZ25lZCBp
bnQgZmxhZ3MpCj4gKyNkZWZpbmUgQk9ORF9TQ0hFRFVMRSBCSVQoMCkKPiArewo+ICsJc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqbWFzdGVyOwo+ICsJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0
eDsKPiArCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxWzE2XTsKPiArCWVudW0gaW50ZWxfZW5naW5l
X2lkIGlkOwo+ICsJdW5zaWduZWQgbG9uZyBuOwo+ICsJaW50IGVycjsKPiArCj4gKwlHRU1fQlVH
X09OKG5zaWJsaW5nID49IEFSUkFZX1NJWkUocnEpIC0gMSk7Cj4gKwo+ICsJY3R4ID0ga2VybmVs
X2NvbnRleHQoaTkxNSk7Cj4gKwlpZiAoIWN0eCkKPiArCQlyZXR1cm4gLUVOT01FTTsKPiArCj4g
KwllcnIgPSAwOwo+ICsJcnFbMF0gPSBFUlJfUFRSKC1FTk9NRU0pOwo+ICsJZm9yX2VhY2hfZW5n
aW5lKG1hc3RlciwgaTkxNSwgaWQpIHsKPiArCQlzdHJ1Y3QgaTkxNV9zd19mZW5jZSBmZW5jZSA9
IHt9Owo+ICsKPiArCQlpZiAobWFzdGVyLT5jbGFzcyA9PSBjbGFzcykKPiArCQkJY29udGludWU7
Cj4gKwo+ICsJCW1lbXNldF9wKCh2b2lkICopcnEsIEVSUl9QVFIoLUVJTlZBTCksIEFSUkFZX1NJ
WkUocnEpKTsKPiArCj4gKwkJcnFbMF0gPSBpZ3RfcmVxdWVzdF9hbGxvYyhjdHgsIG1hc3Rlcik7
Cj4gKwkJaWYgKElTX0VSUihycVswXSkpIHsKPiArCQkJZXJyID0gUFRSX0VSUihycVswXSk7Cj4g
KwkJCWdvdG8gb3V0Owo+ICsJCX0KPiArCQlpOTE1X3JlcXVlc3RfZ2V0KHJxWzBdKTsKPiArCj4g
KwkJaWYgKGZsYWdzICYgQk9ORF9TQ0hFRFVMRSkgewo+ICsJCQlvbnN0YWNrX2ZlbmNlX2luaXQo
JmZlbmNlKTsKPiArCQkJZXJyID0gaTkxNV9zd19mZW5jZV9hd2FpdF9zd19mZW5jZV9nZnAoJnJx
WzBdLT5zdWJtaXQsCj4gKwkJCQkJCQkgICAgICAgJmZlbmNlLAo+ICsJCQkJCQkJICAgICAgIEdG
UF9LRVJORUwpOwo+ICsJCX0KPiArCQlpOTE1X3JlcXVlc3RfYWRkKHJxWzBdKTsKPiArCQlpZiAo
ZXJyIDwgMCkKPiArCQkJZ290byBvdXQ7Cj4gKwo+ICsJCWZvciAobiA9IDA7IG4gPCBuc2libGlu
ZzsgbisrKSB7Cj4gKwkJCXN0cnVjdCBpbnRlbF9jb250ZXh0ICp2ZTsKPiArCj4gKwkJCXZlID0g
aW50ZWxfZXhlY2xpc3RzX2NyZWF0ZV92aXJ0dWFsKGN0eCwKPiArCQkJCQkJCSAgICBzaWJsaW5n
cywKPiArCQkJCQkJCSAgICBuc2libGluZyk7Cj4gKwkJCWlmIChJU19FUlIodmUpKSB7Cj4gKwkJ
CQllcnIgPSBQVFJfRVJSKHZlKTsKPiArCQkJCW9uc3RhY2tfZmVuY2VfZmluaSgmZmVuY2UpOwo+
ICsJCQkJZ290byBvdXQ7Cj4gKwkJCX0KPiArCj4gKwkJCWVyciA9IGludGVsX3ZpcnR1YWxfZW5n
aW5lX2F0dGFjaF9ib25kKHZlLT5lbmdpbmUsCj4gKwkJCQkJCQkgICAgICAgbWFzdGVyLAo+ICsJ
CQkJCQkJICAgICAgIHNpYmxpbmdzW25dKTsKPiArCQkJaWYgKGVycikgewo+ICsJCQkJaW50ZWxf
Y29udGV4dF9wdXQodmUpOwo+ICsJCQkJb25zdGFja19mZW5jZV9maW5pKCZmZW5jZSk7Cj4gKwkJ
CQlnb3RvIG91dDsKPiArCQkJfQo+ICsKPiArCQkJZXJyID0gaW50ZWxfY29udGV4dF9waW4odmUp
Owo+ICsJCQlpbnRlbF9jb250ZXh0X3B1dCh2ZSk7Cj4gKwkJCWlmIChlcnIpIHsKPiArCQkJCW9u
c3RhY2tfZmVuY2VfZmluaSgmZmVuY2UpOwo+ICsJCQkJZ290byBvdXQ7Cj4gKwkJCX0KPiArCj4g
KwkJCXJxW24gKyAxXSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUodmUpOwo+ICsJCQlpbnRlbF9jb250
ZXh0X3VucGluKHZlKTsKPiArCQkJaWYgKElTX0VSUihycVtuICsgMV0pKSB7Cj4gKwkJCQllcnIg
PSBQVFJfRVJSKHJxW24gKyAxXSk7Cj4gKwkJCQlvbnN0YWNrX2ZlbmNlX2ZpbmkoJmZlbmNlKTsK
PiArCQkJCWdvdG8gb3V0Owo+ICsJCQl9Cj4gKwkJCWk5MTVfcmVxdWVzdF9nZXQocnFbbiArIDFd
KTsKPiArCj4gKwkJCWVyciA9IGk5MTVfcmVxdWVzdF9hd2FpdF9leGVjdXRpb24ocnFbbiArIDFd
LAo+ICsJCQkJCQkJICAgJnJxWzBdLT5mZW5jZSwKPiArCQkJCQkJCSAgIHZlLT5lbmdpbmUtPmJv
bmRfZXhlY3V0ZSk7Cj4gKwkJCWk5MTVfcmVxdWVzdF9hZGQocnFbbiArIDFdKTsKPiArCQkJaWYg
KGVyciA8IDApIHsKPiArCQkJCW9uc3RhY2tfZmVuY2VfZmluaSgmZmVuY2UpOwo+ICsJCQkJZ290
byBvdXQ7Cj4gKwkJCX0KPiArCQl9Cj4gKwkJb25zdGFja19mZW5jZV9maW5pKCZmZW5jZSk7Cj4g
Kwo+ICsJCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChycVswXSwKPiArCQkJCSAgICAgIEk5MTVfV0FJ
VF9MT0NLRUQsCj4gKwkJCQkgICAgICBIWiAvIDEwKSA8IDApIHsKPiArCQkJcHJfZXJyKCJNYXN0
ZXIgcmVxdWVzdCBkaWQgbm90IGV4ZWN1dGUgKG9uICVzKSFcbiIsCj4gKwkJCSAgICAgICBycVsw
XS0+ZW5naW5lLT5uYW1lKTsKPiArCQkJZXJyID0gLUVJTzsKPiArCQkJZ290byBvdXQ7Cj4gKwkJ
fQo+ICsKPiArCQlmb3IgKG4gPSAwOyBuIDwgbnNpYmxpbmc7IG4rKykgewo+ICsJCQlpZiAoaTkx
NV9yZXF1ZXN0X3dhaXQocnFbbiArIDFdLAo+ICsJCQkJCSAgICAgIEk5MTVfV0FJVF9MT0NLRUQs
Cj4gKwkJCQkJICAgICAgTUFYX1NDSEVEVUxFX1RJTUVPVVQpIDwgMCkgewo+ICsJCQkJZXJyID0g
LUVJTzsKPiArCQkJCWdvdG8gb3V0Owo+ICsJCQl9Cj4gKwo+ICsJCQlpZiAocnFbbiArIDFdLT5l
bmdpbmUgIT0gc2libGluZ3Nbbl0pIHsKPiArCQkJCXByX2VycigiQm9uZGVkIHJlcXVlc3QgZGlk
IG5vdCBleGVjdXRlIG9uIHRhcmdldCBlbmdpbmU6IGV4cGVjdGVkICVzLCB1c2VkICVzOyBtYXN0
ZXIgd2FzICVzXG4iLAo+ICsJCQkJICAgICAgIHNpYmxpbmdzW25dLT5uYW1lLAo+ICsJCQkJICAg
ICAgIHJxW24gKyAxXS0+ZW5naW5lLT5uYW1lLAo+ICsJCQkJICAgICAgIHJxWzBdLT5lbmdpbmUt
Pm5hbWUpOwo+ICsJCQkJZXJyID0gLUVJTlZBTDsKPiArCQkJCWdvdG8gb3V0Owo+ICsJCQl9Cj4g
KwkJfQo+ICsKPiArCQlmb3IgKG4gPSAwOyAhSVNfRVJSKHJxW25dKTsgbisrKQo+ICsJCQlpOTE1
X3JlcXVlc3RfcHV0KHJxW25dKTsKPiArCQlycVswXSA9IEVSUl9QVFIoLUVOT01FTSk7Cj4gKwl9
Cj4gKwo+ICtvdXQ6Cj4gKwlmb3IgKG4gPSAwOyAhSVNfRVJSKHJxW25dKTsgbisrKQo+ICsJCWk5
MTVfcmVxdWVzdF9wdXQocnFbbl0pOwo+ICsJaWYgKGlndF9mbHVzaF90ZXN0KGk5MTUsIEk5MTVf
V0FJVF9MT0NLRUQpKQo+ICsJCWVyciA9IC1FSU87Cj4gKwo+ICsJa2VybmVsX2NvbnRleHRfY2xv
c2UoY3R4KTsKPiArCXJldHVybiBlcnI7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgbGl2ZV92aXJ0
dWFsX2JvbmQodm9pZCAqYXJnKQo+ICt7Cj4gKwlzdGF0aWMgY29uc3Qgc3RydWN0IHBoYXNlIHsK
PiArCQljb25zdCBjaGFyICpuYW1lOwo+ICsJCXVuc2lnbmVkIGludCBmbGFnczsKPiArCX0gcGhh
c2VzW10gPSB7Cj4gKwkJeyAiIiwgMCB9LAo+ICsJCXsgInNjaGVkdWxlIiwgQk9ORF9TQ0hFRFVM
RSB9LAo+ICsJCXsgfSwKPiArCX07Cj4gKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9
IGFyZzsKPiArCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKnNpYmxpbmdzW01BWF9FTkdJTkVfSU5T
VEFOQ0UgKyAxXTsKPiArCXVuc2lnbmVkIGludCBjbGFzcywgaW5zdDsKPiArCWludCBlcnIgPSAw
Owo+ICsKPiArCWlmIChVU0VTX0dVQ19TVUJNSVNTSU9OKGk5MTUpKQo+ICsJCXJldHVybiAwOwo+
ICsKPiArCW11dGV4X2xvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwo+ICsKPiArCWZvciAo
Y2xhc3MgPSAwOyBjbGFzcyA8PSBNQVhfRU5HSU5FX0NMQVNTOyBjbGFzcysrKSB7Cj4gKwkJY29u
c3Qgc3RydWN0IHBoYXNlICpwOwo+ICsJCWludCBuc2libGluZzsKPiArCj4gKwkJbnNpYmxpbmcg
PSAwOwo+ICsJCWZvciAoaW5zdCA9IDA7IGluc3QgPD0gTUFYX0VOR0lORV9JTlNUQU5DRTsgaW5z
dCsrKSB7Cj4gKwkJCWlmICghaTkxNS0+ZW5naW5lX2NsYXNzW2NsYXNzXVtpbnN0XSkKPiArCQkJ
CWJyZWFrOwo+ICsKPiArCQkJR0VNX0JVR19PTihuc2libGluZyA9PSBBUlJBWV9TSVpFKHNpYmxp
bmdzKSk7Cj4gKwkJCXNpYmxpbmdzW25zaWJsaW5nKytdID0gaTkxNS0+ZW5naW5lX2NsYXNzW2Ns
YXNzXVtpbnN0XTsKPiArCQl9Cj4gKwkJaWYgKG5zaWJsaW5nIDwgMikKPiArCQkJY29udGludWU7
Cj4gKwo+ICsJCWZvciAocCA9IHBoYXNlczsgcC0+bmFtZTsgcCsrKSB7Cj4gKwkJCWVyciA9IGJv
bmRfdmlydHVhbF9lbmdpbmUoaTkxNSwKPiArCQkJCQkJICBjbGFzcywgc2libGluZ3MsIG5zaWJs
aW5nLAo+ICsJCQkJCQkgIHAtPmZsYWdzKTsKPiArCQkJaWYgKGVycikgewo+ICsJCQkJcHJfZXJy
KCIlcyglcyk6IGZhaWxlZCBjbGFzcz0lZCwgbnNpYmxpbmc9JWQsIGVycj0lZFxuIiwKPiArCQkJ
CSAgICAgICBfX2Z1bmNfXywgcC0+bmFtZSwgY2xhc3MsIG5zaWJsaW5nLCBlcnIpOwo+ICsJCQkJ
Z290byBvdXRfdW5sb2NrOwo+ICsJCQl9Cj4gKwkJfQo+ICsJfQo+ICsKPiArb3V0X3VubG9jazoK
PiArCW11dGV4X3VubG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7Cj4gKwlyZXR1cm4gZXJy
Owo+ICt9Cj4gKwo+ICAgaW50IGludGVsX2V4ZWNsaXN0c19saXZlX3NlbGZ0ZXN0cyhzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKPiAgIHsKPiAgIAlzdGF0aWMgY29uc3Qgc3RydWN0IGk5
MTVfc3VidGVzdCB0ZXN0c1tdID0gewo+IEBAIC0xNjI0LDYgKzE4MTQsNyBAQCBpbnQgaW50ZWxf
ZXhlY2xpc3RzX2xpdmVfc2VsZnRlc3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQo+
ICAgCQlTVUJURVNUKGxpdmVfcHJlZW1wdF9zbW9rZSksCj4gICAJCVNVQlRFU1QobGl2ZV92aXJ0
dWFsX2VuZ2luZSksCj4gICAJCVNVQlRFU1QobGl2ZV92aXJ0dWFsX21hc2spLAo+ICsJCVNVQlRF
U1QobGl2ZV92aXJ0dWFsX2JvbmQpLAo+ICAgCX07Cj4gICAKPiAgIAlpZiAoIUhBU19FWEVDTElT
VFMoaTkxNSkpCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2Nv
bnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2NvbnRleHQuYwo+IGluZGV4
IDU3YjA5ZjYyNGJiNC4uY2JiYThmNGJkNzg2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2VtX2NvbnRleHQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2VtX2NvbnRleHQuYwo+IEBAIC0xNDkxLDggKzE0OTEsOTIgQEAgc2V0X2VuZ2luZXNfX2xv
YWRfYmFsYW5jZShzdHJ1Y3QgaTkxNV91c2VyX2V4dGVuc2lvbiBfX3VzZXIgKmJhc2UsIHZvaWQg
KmRhdGEpCj4gICAJcmV0dXJuIGVycjsKPiAgIH0KPiAgIAo+ICtzdGF0aWMgaW50Cj4gK3NldF9l
bmdpbmVzX19ib25kKHN0cnVjdCBpOTE1X3VzZXJfZXh0ZW5zaW9uIF9fdXNlciAqYmFzZSwgdm9p
ZCAqZGF0YSkKPiArewo+ICsJc3RydWN0IGk5MTVfY29udGV4dF9lbmdpbmVzX2JvbmQgX191c2Vy
ICpleHQgPQo+ICsJCWNvbnRhaW5lcl9vZl91c2VyKGJhc2UsIHR5cGVvZigqZXh0KSwgYmFzZSk7
Cj4gKwljb25zdCBzdHJ1Y3Qgc2V0X2VuZ2luZXMgKnNldCA9IGRhdGE7Cj4gKwlzdHJ1Y3QgaTkx
NV9lbmdpbmVfY2xhc3NfaW5zdGFuY2UgY2k7Cj4gKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICp2
aXJ0dWFsOwo+ICsJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqbWFzdGVyOwo+ICsJdTE2IGlkeCwg
bnVtX2JvbmRzOwo+ICsJaW50IGVyciwgbjsKPiArCj4gKwlpZiAoZ2V0X3VzZXIoaWR4LCAmZXh0
LT52aXJ0dWFsX2luZGV4KSkKPiArCQlyZXR1cm4gLUVGQVVMVDsKPiArCj4gKwlpZiAoaWR4ID49
IHNldC0+ZW5naW5lcy0+bnVtX2VuZ2luZXMpIHsKPiArCQlEUk1fREVCVUcoIkludmFsaWQgaW5k
ZXggZm9yIHZpcnR1YWwgZW5naW5lOiAlZCA+PSAlZFxuIiwKPiArCQkJICBpZHgsIHNldC0+ZW5n
aW5lcy0+bnVtX2VuZ2luZXMpOwo+ICsJCXJldHVybiAtRUlOVkFMOwo+ICsJfQo+ICsKPiArCWlk
eCA9IGFycmF5X2luZGV4X25vc3BlYyhpZHgsIHNldC0+ZW5naW5lcy0+bnVtX2VuZ2luZXMpOwo+
ICsJaWYgKCFzZXQtPmVuZ2luZXMtPmVuZ2luZXNbaWR4XSkgewo+ICsJCURSTV9ERUJVRygiSW52
YWxpZCBlbmdpbmUgYXQgJWRcbiIsIGlkeCk7Cj4gKwkJcmV0dXJuIC1FSU5WQUw7Cj4gKwl9Cj4g
Kwl2aXJ0dWFsID0gc2V0LT5lbmdpbmVzLT5lbmdpbmVzW2lkeF0tPmVuZ2luZTsKPiArCj4gKwll
cnIgPSBjaGVja191c2VyX21ieigmZXh0LT5mbGFncyk7Cj4gKwlpZiAoZXJyKQo+ICsJCXJldHVy
biBlcnI7Cj4gKwo+ICsJZm9yIChuID0gMDsgbiA8IEFSUkFZX1NJWkUoZXh0LT5tYno2NCk7IG4r
Kykgewo+ICsJCWVyciA9IGNoZWNrX3VzZXJfbWJ6KCZleHQtPm1iejY0W25dKTsKPiArCQlpZiAo
ZXJyKQo+ICsJCQlyZXR1cm4gZXJyOwo+ICsJfQo+ICsKPiArCWlmIChjb3B5X2Zyb21fdXNlcigm
Y2ksICZleHQtPm1hc3Rlciwgc2l6ZW9mKGNpKSkpCj4gKwkJcmV0dXJuIC1FRkFVTFQ7Cj4gKwo+
ICsJbWFzdGVyID0gaW50ZWxfZW5naW5lX2xvb2t1cF91c2VyKHNldC0+Y3R4LT5pOTE1LAo+ICsJ
CQkJCSAgY2kuZW5naW5lX2NsYXNzLCBjaS5lbmdpbmVfaW5zdGFuY2UpOwo+ICsJaWYgKCFtYXN0
ZXIpIHsKPiArCQlEUk1fREVCVUcoIlVucmVjb2duaXNlZCBtYXN0ZXIgZW5naW5lOiB7IGNsYXNz
OiV1LCBpbnN0YW5jZToldSB9XG4iLAo+ICsJCQkgIGNpLmVuZ2luZV9jbGFzcywgY2kuZW5naW5l
X2luc3RhbmNlKTsKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCX0KPiArCj4gKwlpZiAoZ2V0X3Vz
ZXIobnVtX2JvbmRzLCAmZXh0LT5udW1fYm9uZHMpKQo+ICsJCXJldHVybiAtRUZBVUxUOwo+ICsK
PiArCWZvciAobiA9IDA7IG4gPCBudW1fYm9uZHM7IG4rKykgewo+ICsJCXN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmJvbmQ7Cj4gKwo+ICsJCWlmIChjb3B5X2Zyb21fdXNlcigmY2ksICZleHQtPmVu
Z2luZXNbbl0sIHNpemVvZihjaSkpKQo+ICsJCQlyZXR1cm4gLUVGQVVMVDsKPiArCj4gKwkJYm9u
ZCA9IGludGVsX2VuZ2luZV9sb29rdXBfdXNlcihzZXQtPmN0eC0+aTkxNSwKPiArCQkJCQkJY2ku
ZW5naW5lX2NsYXNzLAo+ICsJCQkJCQljaS5lbmdpbmVfaW5zdGFuY2UpOwo+ICsJCWlmICghYm9u
ZCkgewo+ICsJCQlEUk1fREVCVUcoIlVucmVjb2duaXNlZCBlbmdpbmVbJWRdIGZvciBib25kaW5n
OiB7IGNsYXNzOiVkLCBpbnN0YW5jZTogJWQgfVxuIiwKPiArCQkJCSAgbiwgY2kuZW5naW5lX2Ns
YXNzLCBjaS5lbmdpbmVfaW5zdGFuY2UpOwo+ICsJCQlyZXR1cm4gLUVJTlZBTDsKPiArCQl9Cj4g
Kwo+ICsJCS8qCj4gKwkJICogQSBub24tdmlydHVhbCBlbmdpbmUgaGFzIG5vIHNpYmxpbmdzIHRv
IGNob29zZSBiZXR3ZWVuOyBhbmQKPiArCQkgKiBhIHN1Ym1pdCBmZW5jZSB3aWxsIGFsd2F5cyBi
ZSBkaXJlY3RlZCB0byB0aGUgb25lIGVuZ2luZS4KPiArCQkgKi8KPiArCQlpZiAoaW50ZWxfZW5n
aW5lX2lzX3ZpcnR1YWwodmlydHVhbCkpIHsKPiArCQkJZXJyID0gaW50ZWxfdmlydHVhbF9lbmdp
bmVfYXR0YWNoX2JvbmQodmlydHVhbCwKPiArCQkJCQkJCSAgICAgICBtYXN0ZXIsCj4gKwkJCQkJ
CQkgICAgICAgYm9uZCk7Cj4gKwkJCWlmIChlcnIpCj4gKwkJCQlyZXR1cm4gZXJyOwo+ICsJCX0K
PiArCX0KPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiAgIHN0YXRpYyBjb25zdCBpOTE1X3Vz
ZXJfZXh0ZW5zaW9uX2ZuIHNldF9lbmdpbmVzX19leHRlbnNpb25zW10gPSB7Cj4gICAJW0k5MTVf
Q09OVEVYVF9FTkdJTkVTX0VYVF9MT0FEX0JBTEFOQ0VdID0gc2V0X2VuZ2luZXNfX2xvYWRfYmFs
YW5jZSwKPiArCVtJOTE1X0NPTlRFWFRfRU5HSU5FU19FWFRfQk9ORF0gPSBzZXRfZW5naW5lc19f
Ym9uZCwKPiAgIH07Cj4gICAKPiAgIHN0YXRpYyBpbnQKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvc2VsZnRlc3RzL2xpYl9zd19mZW5jZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvc2VsZnRlc3RzL2xpYl9zd19mZW5jZS5jCj4gaW5kZXggMmJmYTcyYzE2NTRiLi5iOTc2YzEy
ODE3YzUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2xpYl9z
d19mZW5jZS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2xpYl9zd19m
ZW5jZS5jCj4gQEAgLTQ1LDYgKzQ1LDkgQEAgdm9pZCBfX29uc3RhY2tfZmVuY2VfaW5pdChzdHJ1
Y3QgaTkxNV9zd19mZW5jZSAqZmVuY2UsCj4gICAKPiAgIHZvaWQgb25zdGFja19mZW5jZV9maW5p
KHN0cnVjdCBpOTE1X3N3X2ZlbmNlICpmZW5jZSkKPiAgIHsKPiArCWlmICghZmVuY2UtPmZsYWdz
KQo+ICsJCXJldHVybjsKPiArCj4gICAJaTkxNV9zd19mZW5jZV9jb21taXQoZmVuY2UpOwo+ICAg
CWk5MTVfc3dfZmVuY2VfZmluaShmZW5jZSk7Cj4gICB9Cj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUv
dWFwaS9kcm0vaTkxNV9kcm0uaCBiL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAo+IGluZGV4
IGZmMmFiYWJjMDk4NC4uYzAwNTQwNzRiNGMzIDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvdWFwaS9k
cm0vaTkxNV9kcm0uaAo+ICsrKyBiL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAo+IEBAIC0x
NTQzLDYgKzE1NDMsMTAgQEAgc3RydWN0IGRybV9pOTE1X2dlbV9jb250ZXh0X3BhcmFtIHsKPiAg
ICAqIHNpemVkIGFyZ3VtZW50LCB3aWxsIHJldmVydCBiYWNrIHRvIGRlZmF1bHQgc2V0dGluZ3Mu
Cj4gICAgKgo+ICAgICogU2VlIHN0cnVjdCBpOTE1X2NvbnRleHRfcGFyYW1fZW5naW5lcy4KPiAr
ICoKPiArICogRXh0ZW5zaW9uczoKPiArICogICBpOTE1X2NvbnRleHRfZW5naW5lc19sb2FkX2Jh
bGFuY2UgKEk5MTVfQ09OVEVYVF9FTkdJTkVTX0VYVF9MT0FEX0JBTEFOQ0UpCj4gKyAqICAgaTkx
NV9jb250ZXh0X2VuZ2luZXNfYm9uZCAoSTkxNV9DT05URVhUX0VOR0lORVNfRVhUX0JPTkQpCj4g
ICAgKi8KPiAgICNkZWZpbmUgSTkxNV9DT05URVhUX1BBUkFNX0VOR0lORVMJMHhhCj4gICAvKiBN
dXN0IGJlIGtlcHQgY29tcGFjdCAtLSBubyBob2xlcyBhbmQgd2VsbCBkb2N1bWVudGVkICovCj4g
QEAgLTE2NDUsOSArMTY0OSw0OSBAQCBzdHJ1Y3QgaTkxNV9jb250ZXh0X2VuZ2luZXNfbG9hZF9i
YWxhbmNlIHsKPiAgIAlzdHJ1Y3QgaTkxNV9lbmdpbmVfY2xhc3NfaW5zdGFuY2UgZW5naW5lc1tO
X19dOyBcCj4gICB9IF9fYXR0cmlidXRlX18oKHBhY2tlZCkpIG5hbWVfXwo+ICAgCj4gKy8qCj4g
KyAqIGk5MTVfY29udGV4dF9lbmdpbmVzX2JvbmQ6Cj4gKyAqCj4gKyAqIENvbnN0cnVjdGVkIGJv
bmRlZCBwYWlycyBmb3IgZXhlY3V0aW9uIHdpdGhpbiBhIHZpcnR1YWwgZW5naW5lLgo+ICsgKgo+
ICsgKiBBbGwgZW5naW5lcyBhcmUgZXF1YWwsIGJ1dCBzb21lIGFyZSBtb3JlIGVxdWFsIHRoYW4g
b3RoZXJzLiBHaXZlbgo+ICsgKiB0aGUgZGlzdHJpYnV0aW9uIG9mIHJlc291cmNlcyBpbiB0aGUg
SFcsIGl0IG1heSBiZSBwcmVmZXJhYmxlIHRvIHJ1bgo+ICsgKiBhIHJlcXVlc3Qgb24gYSBnaXZl
biBzdWJzZXQgb2YgZW5naW5lcyBpbiBwYXJhbGxlbCB0byBhIHJlcXVlc3Qgb24gYQo+ICsgKiBz
cGVjaWZpYyBlbmdpbmUuIFdlIGVuYWJsZSB0aGlzIHNlbGVjdGlvbiBvZiBlbmdpbmVzIHdpdGhp
biBhIHZpcnR1YWwKPiArICogZW5naW5lIGJ5IHNwZWNpZnlpbmcgYm9uZGluZyBwYWlycywgZm9y
IGFueSBnaXZlbiBtYXN0ZXIgZW5naW5lIHdlIHdpbGwKPiArICogb25seSBleGVjdXRlIG9uIG9u
ZSBvZiB0aGUgY29ycmVzcG9uZGluZyBzaWJsaW5ncyB3aXRoaW4gdGhlIHZpcnR1YWwgZW5naW5l
Lgo+ICsgKgo+ICsgKiBUbyBleGVjdXRlIGEgcmVxdWVzdCBpbiBwYXJhbGxlbCBvbiB0aGUgbWFz
dGVyIGVuZ2luZSBhbmQgYSBzaWJsaW5nIHJlcXVpcmVzCj4gKyAqIGNvb3JkaW5hdGlvbiB3aXRo
IGEgSTkxNV9FWEVDX0ZFTkNFX1NVQk1JVC4KPiArICovCj4gK3N0cnVjdCBpOTE1X2NvbnRleHRf
ZW5naW5lc19ib25kIHsKPiArCXN0cnVjdCBpOTE1X3VzZXJfZXh0ZW5zaW9uIGJhc2U7Cj4gKwo+
ICsJc3RydWN0IGk5MTVfZW5naW5lX2NsYXNzX2luc3RhbmNlIG1hc3RlcjsKPiArCj4gKwlfX3Ux
NiB2aXJ0dWFsX2luZGV4OyAvKiBpbmRleCBvZiB2aXJ0dWFsIGVuZ2luZSBpbiBjdHgtPmVuZ2lu
ZXNbXSAqLwo+ICsJX191MTYgbnVtX2JvbmRzOwo+ICsKPiArCV9fdTY0IGZsYWdzOyAvKiBhbGwg
dW5kZWZpbmVkIGZsYWdzIG11c3QgYmUgemVybyAqLwo+ICsJX191NjQgbWJ6NjRbNF07IC8qIHJl
c2VydmVkIGZvciBmdXR1cmUgdXNlOyBtdXN0IGJlIHplcm8gKi8KPiArCj4gKwlzdHJ1Y3QgaTkx
NV9lbmdpbmVfY2xhc3NfaW5zdGFuY2UgZW5naW5lc1swXTsKPiArfSBfX2F0dHJpYnV0ZV9fKChw
YWNrZWQpKTsKPiArCj4gKyNkZWZpbmUgSTkxNV9ERUZJTkVfQ09OVEVYVF9FTkdJTkVTX0JPTkQo
bmFtZV9fLCBOX18pIHN0cnVjdCB7IFwKPiArCXN0cnVjdCBpOTE1X3VzZXJfZXh0ZW5zaW9uIGJh
c2U7IFwKPiArCXN0cnVjdCBpOTE1X2VuZ2luZV9jbGFzc19pbnN0YW5jZSBtYXN0ZXI7IFwKPiAr
CV9fdTE2IHZpcnR1YWxfaW5kZXg7IFwKPiArCV9fdTE2IG51bV9ib25kczsgXAo+ICsJX191NjQg
ZmxhZ3M7IFwKPiArCV9fdTY0IG1iejY0WzRdOyBcCj4gKwlzdHJ1Y3QgaTkxNV9lbmdpbmVfY2xh
c3NfaW5zdGFuY2UgZW5naW5lc1tOX19dOyBcCj4gK30gX19hdHRyaWJ1dGVfXygocGFja2VkKSkg
bmFtZV9fCj4gKwo+ICAgc3RydWN0IGk5MTVfY29udGV4dF9wYXJhbV9lbmdpbmVzIHsKPiAgIAlf
X3U2NCBleHRlbnNpb25zOyAvKiBsaW5rZWQgY2hhaW4gb2YgZXh0ZW5zaW9uIGJsb2NrcywgMCB0
ZXJtaW5hdGVzICovCj4gICAjZGVmaW5lIEk5MTVfQ09OVEVYVF9FTkdJTkVTX0VYVF9MT0FEX0JB
TEFOQ0UgMCAvKiBzZWUgaTkxNV9jb250ZXh0X2VuZ2luZXNfbG9hZF9iYWxhbmNlICovCj4gKyNk
ZWZpbmUgSTkxNV9DT05URVhUX0VOR0lORVNfRVhUX0JPTkQgMSAvKiBzZWUgaTkxNV9jb250ZXh0
X2VuZ2luZXNfYm9uZCAqLwo+ICAgCXN0cnVjdCBpOTE1X2VuZ2luZV9jbGFzc19pbnN0YW5jZSBl
bmdpbmVzWzBdOwo+ICAgfSBfX2F0dHJpYnV0ZV9fKChwYWNrZWQpKTsKPiAgIAo+IAoKUmV2aWV3
ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+CgpSZWdhcmRz
LAoKVHZydGtvCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

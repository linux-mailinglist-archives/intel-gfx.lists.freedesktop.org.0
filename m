Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A7D232FD3AB
	for <lists+intel-gfx@lfdr.de>; Wed, 20 Jan 2021 16:15:19 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 71D6989D6C;
	Wed, 20 Jan 2021 15:15:17 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7B30F89A4B
 for <intel-gfx@lists.freedesktop.org>; Wed, 20 Jan 2021 15:15:16 +0000 (UTC)
IronPort-SDR: N6S6P2nCUD+rLbfZkXZv7rEZjPvl53LblQ1Jkr2zphuPwWgga03rmasaUO0AMaArTUueD3S7qE
 o6+/OcFXS5qA==
X-IronPort-AV: E=McAfee;i="6000,8403,9870"; a="263931260"
X-IronPort-AV: E=Sophos;i="5.79,361,1602572400"; d="scan'208";a="263931260"
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by fmsmga105.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 20 Jan 2021 07:15:16 -0800
IronPort-SDR: KqVbbSpoPMP+pmRQ9DmQuVd+vwsme+6H/m16kOx24ZOgpLnGouzRnju1mksPQSyXim/zSROtKh
 VqpsLG9lINQw==
X-IronPort-AV: E=Sophos;i="5.79,361,1602572400"; d="scan'208";a="366274470"
Received: from kuhongje-mobl5.amr.corp.intel.com (HELO
 josouza-mobl2.intel.com) ([10.251.145.99])
 by orsmga002-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 20 Jan 2021 07:15:13 -0800
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 20 Jan 2021 07:16:10 -0800
Message-Id: <20210120151611.132591-3-jose.souza@intel.com>
X-Mailer: git-send-email 2.30.0
In-Reply-To: <20210120151611.132591-1-jose.souza@intel.com>
References: <20210120151611.132591-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 3/4] drm/i915: Fail driver probe when unable to
 load DRAM information
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RFJBTSBpbmZvcm1hdGlvbiBpcyByZXF1aXJlZCB0byBwcm9wZXJseSBwcm9ncmFtIGRpc3BsYXku
CkJlZm9yZSAiZHJtL2k5MTUvZ2VuMTErOiBPbmx5IGxvYWQgRFJBTSBpbmZvcm1hdGlvbiBmcm9t
IHBjb2RlIiB3ZQp3ZXJlIGZhaWxpbmcgZHJpdmVyIGxvYWQgaWYgdW5hYmxlIHRvIGZldGNoIERS
QU0gaW5mb3JtYXRpb24gZnJvbQpwY29kZSBmb3JtIEdFTjExKyBidXQgd2Ugc2hvdWxkIGFsc28g
ZXh0ZW5kIGl0IHRvIEdFTjkgcGxhZm9ybXMuCgpTaWduZWQtb2ZmLWJ5OiBKb3PDqSBSb2JlcnRv
IGRlIFNvdXphIDxqb3NlLnNvdXphQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Rydi5jICAgfCAgNiArKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Ry
YW0uYyB8IDEzICsrKysrKysrKy0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RyYW0u
aCB8ICAyICstCiAzIGZpbGVzIGNoYW5nZWQsIDE1IGluc2VydGlvbnMoKyksIDYgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKaW5kZXggNjZmNzYzZmU3YTgzLi42YmZjZDNlZTZj
NjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwpAQCAtNjE1LDEyICs2MTUsMTYgQEAgc3RhdGlj
IGludCBpOTE1X2RyaXZlcl9od19wcm9iZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYpCiAJICogRmlsbCB0aGUgZHJhbSBzdHJ1Y3R1cmUgdG8gZ2V0IHRoZSBzeXN0ZW0gZHJhbSBp
bmZvLiBUaGlzIHdpbGwgYmUKIAkgKiB1c2VkIGZvciBtZW1vcnkgbGF0ZW5jeSBjYWxjdWxhdGlv
bi4KIAkgKi8KLQlpbnRlbF9kcmFtX2RldGVjdChkZXZfcHJpdik7CisJcmV0ID0gaW50ZWxfZHJh
bV9kZXRlY3QoZGV2X3ByaXYpOworCWlmIChyZXQpCisJCWdvdG8gZXJyX2RyYW07CiAKIAlpbnRl
bF9id19pbml0X2h3KGRldl9wcml2KTsKIAogCXJldHVybiAwOwogCitlcnJfZHJhbToKKwlpbnRl
bF9ndnRfZHJpdmVyX3JlbW92ZShkZXZfcHJpdik7CiBlcnJfbXNpOgogCWlmIChwZGV2LT5tc2lf
ZW5hYmxlZCkKIAkJcGNpX2Rpc2FibGVfbXNpKHBkZXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaW50ZWxfZHJhbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJh
bS5jCmluZGV4IDEyOTg4MjNjOTU3Yy4uNDg3MWQ0ODU4OWY5IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF9kcmFtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfZHJhbS5jCkBAIC00ODEsNyArNDgxLDcgQEAgc3RhdGljIGludCBnZW4xMV9nZXRfZHJhbV9p
bmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCXJldHVybiBpY2xfcGNvZGVfcmVh
ZF9tZW1fZ2xvYmFsX2luZm8oaTkxNSk7CiB9CiAKLXZvaWQgaW50ZWxfZHJhbV9kZXRlY3Qoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCitpbnQgaW50ZWxfZHJhbV9kZXRlY3Qoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB7CiAJc3RydWN0IGRyYW1faW5mbyAqZHJhbV9pbmZv
ID0gJmk5MTUtPmRyYW1faW5mbzsKIAlpbnQgcmV0OwpAQCAtNDk0LDcgKzQ5NCw3IEBAIHZvaWQg
aW50ZWxfZHJhbV9kZXRlY3Qoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJZHJhbV9p
bmZvLT5pc18xNmdiX2RpbW0gPSAhSVNfR0VOOV9MUChpOTE1KTsKIAogCWlmIChJTlRFTF9HRU4o
aTkxNSkgPCA5IHx8ICFIQVNfRElTUExBWShpOTE1KSkKLQkJcmV0dXJuOworCQlyZXR1cm4gMDsK
IAogCWlmIChJTlRFTF9HRU4oaTkxNSkgPj0gMTEpCiAJCXJldCA9IGdlbjExX2dldF9kcmFtX2lu
Zm8oaTkxNSk7CkBAIC01MDIsMTMgKzUwMiwxOCBAQCB2b2lkIGludGVsX2RyYW1fZGV0ZWN0KHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCQlyZXQgPSBieHRfZ2V0X2RyYW1faW5mbyhp
OTE1KTsKIAllbHNlCiAJCXJldCA9IHNrbF9nZXRfZHJhbV9pbmZvKGk5MTUpOwotCWlmIChyZXQp
Ci0JCXJldHVybjsKKworCWlmIChyZXQpIHsKKwkJZHJtX3dhcm4oJmk5MTUtPmRybSwgIlVuYWJs
ZSB0byBsb2FkIGRyYW0gaW5mb3JtYXRpb25cbiIpOworCQlyZXR1cm4gcmV0OworCX0KIAogCWRy
bV9kYmdfa21zKCZpOTE1LT5kcm0sICJEUkFNIGNoYW5uZWxzOiAldVxuIiwgZHJhbV9pbmZvLT5u
dW1fY2hhbm5lbHMpOwogCiAJZHJtX2RiZ19rbXMoJmk5MTUtPmRybSwgIkRSQU0gMTZHYiBESU1N
czogJXNcbiIsCiAJCSAgICB5ZXNubyhkcmFtX2luZm8tPmlzXzE2Z2JfZGltbSkpOworCisJcmV0
dXJuIDA7CiB9CiAKIHN0YXRpYyB1MzIgZ2VuOV9lZHJhbV9zaXplX21iKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1LCB1MzIgY2FwKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfZHJhbS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJhbS5oCmluZGV4
IDRiYTEzYzEzMTYyYy4uMmEwZjI4M2IxYTFkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9kcmFtLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJhbS5o
CkBAIC05LDYgKzksNiBAQAogc3RydWN0IGRybV9pOTE1X3ByaXZhdGU7CiAKIHZvaWQgaW50ZWxf
ZHJhbV9lZHJhbV9kZXRlY3Qoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwotdm9pZCBp
bnRlbF9kcmFtX2RldGVjdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7CitpbnQgaW50
ZWxfZHJhbV9kZXRlY3Qoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwogCiAjZW5kaWYg
LyogX19JTlRFTF9EUkFNX0hfXyAqLwotLSAKMi4zMC4wCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9pbnRlbC1nZngK

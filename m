Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 900B511322B
	for <lists+intel-gfx@lfdr.de>; Wed,  4 Dec 2019 19:06:29 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EE7D36F454;
	Wed,  4 Dec 2019 18:06:27 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0290D6F454
 for <intel-gfx@lists.freedesktop.org>; Wed,  4 Dec 2019 18:06:26 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 04 Dec 2019 10:06:26 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,278,1571727600"; d="scan'208";a="205476858"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga008.jf.intel.com with SMTP; 04 Dec 2019 10:06:23 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Wed, 04 Dec 2019 20:06:23 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  4 Dec 2019 20:05:49 +0200
Message-Id: <20191204180549.1267-10-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191204180549.1267-1-ville.syrjala@linux.intel.com>
References: <20191204180549.1267-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 9/9] drm/i915/hdcp: Clean up local variables
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkVs
aW1pbmF0ZSB0aGUgaW5jb25zaXN0ZW5jaWVzIGluIHRoZSBoZGNwIGNvZGUgbG9jYWwgdmFyaWFi
bGVzOgotIHVzZSBkZXZfcHJpdiBvdmVyIGRldgotIHVzZSB0b19pOTE1KCkgaW5zdGVhZCBvZiBk
ZXYtPmRldl9wcml2YXRlCi0gaW5pdGlhbGl6ZSB2YXJpYWJsZXMgd2hlbiBkZWNsYXJpbmcgdGhl
bQotIGEgYml0IG9mIGRlY2xhcmF0aW9uIHN1ZmZsaW5nIHRvIG1ha2UgYXBwZWFzZSBvY2QKClNp
Z25lZC1vZmYtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5j
b20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9oZGNwLmMgfCA1NCAr
KysrKysrKysrKy0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDI1IGluc2VydGlvbnMoKyks
IDI5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfaGRjcC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9oZGNw
LmMKaW5kZXggNGI3MzIyNzY0NGYwLi4zNDU0YTkxM2RjYTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jCkBAIC04NSw4ICs4NSw4IEBAIGJvb2wgaW50ZWxfaGRj
cF9jYXBhYmxlKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIC8qIElzIEhEQ1Ay
LjIgY2FwYWJsZSBvbiBQbGF0Zm9ybSBhbmQgU2luayAqLwogYm9vbCBpbnRlbF9oZGNwMl9jYXBh
YmxlKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIHsKLQlzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNvbm5lY3Rvci0+YmFzZS5kZXYpOwogCXN0
cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0ID0gaW50ZWxfYXR0YWNoZWRf
ZGlnX3BvcnQoY29ubmVjdG9yKTsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYg
PSB0b19pOTE1KGNvbm5lY3Rvci0+YmFzZS5kZXYpOwogCXN0cnVjdCBpbnRlbF9oZGNwICpoZGNw
ID0gJmNvbm5lY3Rvci0+aGRjcDsKIAlib29sIGNhcGFibGUgPSBmYWxzZTsKIApAQCAtMjk4LDE0
ICsyOTgsMTIgQEAgaW50IGludGVsX2hkY3BfdmFsaWRhdGVfdl9wcmltZShzdHJ1Y3QgaW50ZWxf
Y29ubmVjdG9yICpjb25uZWN0b3IsCiAJCQkJdTggKmtzdl9maWZvLCB1OCBudW1fZG93bnN0cmVh
bSwgdTggKmJzdGF0dXMpCiB7CiAJc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxfZGln
X3BvcnQgPSBpbnRlbF9hdHRhY2hlZF9kaWdfcG9ydChjb25uZWN0b3IpOwotCXN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdjsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYgPSB0b19pOTE1KGNvbm5lY3Rvci0+YmFzZS5kZXYpOwogCWVudW0gdHJhbnNjb2RlciBjcHVf
dHJhbnNjb2RlciA9IGNvbm5lY3Rvci0+aGRjcC5jcHVfdHJhbnNjb2RlcjsKIAllbnVtIHBvcnQg
cG9ydCA9IGludGVsX2RpZ19wb3J0LT5iYXNlLnBvcnQ7CiAJdTMyIHZwcmltZSwgc2hhX3RleHQs
IHNoYV9sZWZ0b3ZlcnMsIHJlcF9jdGw7CiAJaW50IHJldCwgaSwgaiwgc2hhX2lkeDsKIAotCWRl
dl9wcml2ID0gaW50ZWxfZGlnX3BvcnQtPmJhc2UuYmFzZS5kZXYtPmRldl9wcml2YXRlOwotCiAJ
LyogUHJvY2VzcyBWJyB2YWx1ZXMgZnJvbSB0aGUgcmVjZWl2ZXIgKi8KIAlmb3IgKGkgPSAwOyBp
IDwgRFJNX0hEQ1BfVl9QUklNRV9OVU1fUEFSVFM7IGkrKykgewogCQlyZXQgPSBzaGltLT5yZWFk
X3ZfcHJpbWVfcGFydChpbnRlbF9kaWdfcG9ydCwgaSwgJnZwcmltZSk7CkBAIC01MTQsOCArNTEy
LDggQEAgc3RhdGljCiBpbnQgaW50ZWxfaGRjcF9hdXRoX2Rvd25zdHJlYW0oc3RydWN0IGludGVs
X2Nvbm5lY3RvciAqY29ubmVjdG9yKQogewogCXN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmlu
dGVsX2RpZ19wb3J0ID0gaW50ZWxfYXR0YWNoZWRfZGlnX3BvcnQoY29ubmVjdG9yKTsKKwlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNvbm5lY3Rvci0+YmFzZS5k
ZXYpOwogCWNvbnN0IHN0cnVjdCBpbnRlbF9oZGNwX3NoaW0gKnNoaW0gPSBjb25uZWN0b3ItPmhk
Y3Auc2hpbTsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gY29ubmVjdG9yLT5iYXNlLmRldjsK
IAl1OCBic3RhdHVzWzJdLCBudW1fZG93bnN0cmVhbSwgKmtzdl9maWZvOwogCWludCByZXQsIGks
IHRyaWVzID0gMzsKIApAQCAtNTU4LDcgKzU1Niw4IEBAIGludCBpbnRlbF9oZGNwX2F1dGhfZG93
bnN0cmVhbShzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IpCiAJaWYgKHJldCkKIAkJ
Z290byBlcnI7CiAKLQlpZiAoZHJtX2hkY3BfY2hlY2tfa3N2c19yZXZva2VkKGRldiwga3N2X2Zp
Zm8sIG51bV9kb3duc3RyZWFtKSkgeworCWlmIChkcm1faGRjcF9jaGVja19rc3ZzX3Jldm9rZWQo
JmRldl9wcml2LT5kcm0sIGtzdl9maWZvLAorCQkJCQludW1fZG93bnN0cmVhbSkpIHsKIAkJRFJN
X0VSUk9SKCJSZXZva2VkIEtzdihzKSBpbiBrc3ZfZmlmb1xuIik7CiAJCXJldCA9IC1FUEVSTTsK
IAkJZ290byBlcnI7CkBAIC01OTMsMTIgKzU5MiwxMSBAQCBpbnQgaW50ZWxfaGRjcF9hdXRoX2Rv
d25zdHJlYW0oc3RydWN0IGludGVsX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogc3RhdGljIGludCBp
bnRlbF9oZGNwX2F1dGgoc3RydWN0IGludGVsX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogewogCXN0
cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0ID0gaW50ZWxfYXR0YWNoZWRf
ZGlnX3BvcnQoY29ubmVjdG9yKTsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYg
PSB0b19pOTE1KGNvbm5lY3Rvci0+YmFzZS5kZXYpOwogCXN0cnVjdCBpbnRlbF9oZGNwICpoZGNw
ID0gJmNvbm5lY3Rvci0+aGRjcDsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gY29ubmVjdG9y
LT5iYXNlLmRldjsKIAljb25zdCBzdHJ1Y3QgaW50ZWxfaGRjcF9zaGltICpzaGltID0gaGRjcC0+
c2hpbTsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXY7CiAJZW51bSB0cmFuc2Nv
ZGVyIGNwdV90cmFuc2NvZGVyID0gY29ubmVjdG9yLT5oZGNwLmNwdV90cmFuc2NvZGVyOwotCWVu
dW0gcG9ydCBwb3J0OworCWVudW0gcG9ydCBwb3J0ID0gaW50ZWxfZGlnX3BvcnQtPmJhc2UucG9y
dDsKIAl1bnNpZ25lZCBsb25nIHIwX3ByaW1lX2dlbl9zdGFydDsKIAlpbnQgcmV0LCBpLCB0cmll
cyA9IDI7CiAJdW5pb24gewpAQCAtNjE1LDEwICs2MTMsNiBAQCBzdGF0aWMgaW50IGludGVsX2hk
Y3BfYXV0aChzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IpCiAJfSByaTsKIAlib29s
IHJlcGVhdGVyX3ByZXNlbnQsIGhkY3BfY2FwYWJsZTsKIAotCWRldl9wcml2ID0gaW50ZWxfZGln
X3BvcnQtPmJhc2UuYmFzZS5kZXYtPmRldl9wcml2YXRlOwotCi0JcG9ydCA9IGludGVsX2RpZ19w
b3J0LT5iYXNlLnBvcnQ7Ci0KIAkvKgogCSAqIERldGVjdHMgd2hldGhlciB0aGUgZGlzcGxheSBp
cyBIRENQIGNhcGFibGUuIEFsdGhvdWdoIHdlIGNoZWNrIGZvcgogCSAqIHZhbGlkIEJrc3YgYmVs
b3csIHRoZSBIRENQIG92ZXIgRFAgc3BlYyByZXF1aXJlcyB0aGF0IHdlIGNoZWNrCkBAIC02NjQs
NyArNjU4LDcgQEAgc3RhdGljIGludCBpbnRlbF9oZGNwX2F1dGgoc3RydWN0IGludGVsX2Nvbm5l
Y3RvciAqY29ubmVjdG9yKQogCWlmIChyZXQgPCAwKQogCQlyZXR1cm4gcmV0OwogCi0JaWYgKGRy
bV9oZGNwX2NoZWNrX2tzdnNfcmV2b2tlZChkZXYsIGJrc3Yuc2hpbSwgMSkpIHsKKwlpZiAoZHJt
X2hkY3BfY2hlY2tfa3N2c19yZXZva2VkKCZkZXZfcHJpdi0+ZHJtLCBia3N2LnNoaW0sIDEpKSB7
CiAJCURSTV9FUlJPUigiQktTViBpcyByZXZva2VkXG4iKTsKIAkJcmV0dXJuIC1FUEVSTTsKIAl9
CkBAIC03NTUsOSArNzQ5LDkgQEAgc3RhdGljIGludCBpbnRlbF9oZGNwX2F1dGgoc3RydWN0IGlu
dGVsX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogCiBzdGF0aWMgaW50IF9pbnRlbF9oZGNwX2Rpc2Fi
bGUoc3RydWN0IGludGVsX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogewotCXN0cnVjdCBpbnRlbF9o
ZGNwICpoZGNwID0gJmNvbm5lY3Rvci0+aGRjcDsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYgPSBjb25uZWN0b3ItPmJhc2UuZGV2LT5kZXZfcHJpdmF0ZTsKIAlzdHJ1Y3QgaW50
ZWxfZGlnaXRhbF9wb3J0ICppbnRlbF9kaWdfcG9ydCA9IGludGVsX2F0dGFjaGVkX2RpZ19wb3J0
KGNvbm5lY3Rvcik7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkx
NShjb25uZWN0b3ItPmJhc2UuZGV2KTsKKwlzdHJ1Y3QgaW50ZWxfaGRjcCAqaGRjcCA9ICZjb25u
ZWN0b3ItPmhkY3A7CiAJZW51bSBwb3J0IHBvcnQgPSBpbnRlbF9kaWdfcG9ydC0+YmFzZS5wb3J0
OwogCWVudW0gdHJhbnNjb2RlciBjcHVfdHJhbnNjb2RlciA9IGhkY3AtPmNwdV90cmFuc2NvZGVy
OwogCWludCByZXQ7CkBAIC03ODYsOCArNzgwLDggQEAgc3RhdGljIGludCBfaW50ZWxfaGRjcF9k
aXNhYmxlKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAogc3RhdGljIGludCBf
aW50ZWxfaGRjcF9lbmFibGUoc3RydWN0IGludGVsX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogewor
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY29ubmVjdG9yLT5i
YXNlLmRldik7CiAJc3RydWN0IGludGVsX2hkY3AgKmhkY3AgPSAmY29ubmVjdG9yLT5oZGNwOwot
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGNvbm5lY3Rvci0+YmFzZS5kZXYt
PmRldl9wcml2YXRlOwogCWludCBpLCByZXQsIHRyaWVzID0gMzsKIAogCURSTV9ERUJVR19LTVMo
IlslczolZF0gSERDUCBpcyBiZWluZyBlbmFibGVkLi4uXG4iLApAQCAtODM2LDkgKzgzMCw5IEBA
IHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmludGVsX2hkY3BfdG9fY29ubmVjdG9yKHN0cnVjdCBp
bnRlbF9oZGNwICpoZGNwKQogLyogSW1wbGVtZW50cyBQYXJ0IDMgb2YgdGhlIEhEQ1AgYXV0aG9y
aXphdGlvbiBwcm9jZWR1cmUgKi8KIHN0YXRpYyBpbnQgaW50ZWxfaGRjcF9jaGVja19saW5rKHN0
cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIHsKLQlzdHJ1Y3QgaW50ZWxfaGRjcCAq
aGRjcCA9ICZjb25uZWN0b3ItPmhkY3A7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gY29ubmVjdG9yLT5iYXNlLmRldi0+ZGV2X3ByaXZhdGU7CiAJc3RydWN0IGludGVsX2Rp
Z2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQgPSBpbnRlbF9hdHRhY2hlZF9kaWdfcG9ydChjb25u
ZWN0b3IpOworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY29u
bmVjdG9yLT5iYXNlLmRldik7CisJc3RydWN0IGludGVsX2hkY3AgKmhkY3AgPSAmY29ubmVjdG9y
LT5oZGNwOwogCWVudW0gcG9ydCBwb3J0ID0gaW50ZWxfZGlnX3BvcnQtPmJhc2UucG9ydDsKIAll
bnVtIHRyYW5zY29kZXIgY3B1X3RyYW5zY29kZXI7CiAJaW50IHJldCA9IDA7CkBAIC05MDEsOSAr
ODk1LDkgQEAgc3RhdGljIHZvaWQgaW50ZWxfaGRjcF9wcm9wX3dvcmsoc3RydWN0IHdvcmtfc3Ry
dWN0ICp3b3JrKQogCXN0cnVjdCBpbnRlbF9oZGNwICpoZGNwID0gY29udGFpbmVyX29mKHdvcmss
IHN0cnVjdCBpbnRlbF9oZGNwLAogCQkJCQkgICAgICAgcHJvcF93b3JrKTsKIAlzdHJ1Y3QgaW50
ZWxfY29ubmVjdG9yICpjb25uZWN0b3IgPSBpbnRlbF9oZGNwX3RvX2Nvbm5lY3RvcihoZGNwKTsK
LQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gY29ubmVjdG9yLT5iYXNlLmRldjsKKwlzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNvbm5lY3Rvci0+YmFzZS5kZXYp
OwogCi0JZHJtX21vZGVzZXRfbG9jaygmZGV2LT5tb2RlX2NvbmZpZy5jb25uZWN0aW9uX211dGV4
LCBOVUxMKTsKKwlkcm1fbW9kZXNldF9sb2NrKCZkZXZfcHJpdi0+ZHJtLm1vZGVfY29uZmlnLmNv
bm5lY3Rpb25fbXV0ZXgsIE5VTEwpOwogCW11dGV4X2xvY2soJmhkY3AtPm11dGV4KTsKIAogCS8q
CkBAIC05MTYsNyArOTEwLDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfaGRjcF9wcm9wX3dvcmsoc3Ry
dWN0IHdvcmtfc3RydWN0ICp3b3JrKQogCQkJCQkJICAgaGRjcC0+dmFsdWUpOwogCiAJbXV0ZXhf
dW5sb2NrKCZoZGNwLT5tdXRleCk7Ci0JZHJtX21vZGVzZXRfdW5sb2NrKCZkZXYtPm1vZGVfY29u
ZmlnLmNvbm5lY3Rpb25fbXV0ZXgpOworCWRybV9tb2Rlc2V0X3VubG9jaygmZGV2X3ByaXYtPmRy
bS5tb2RlX2NvbmZpZy5jb25uZWN0aW9uX211dGV4KTsKIH0KIAogYm9vbCBpc19oZGNwX3N1cHBv
cnRlZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGVudW0gcG9ydCBwb3J0KQpA
QCAtMTIxMCw4ICsxMjA0LDggQEAgc3RhdGljIGludCBoZGNwMl9kZWF1dGhlbnRpY2F0ZV9wb3J0
KHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIHN0YXRpYyBpbnQgaGRjcDJfYXV0
aGVudGljYXRpb25fa2V5X2V4Y2hhbmdlKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3Rv
cikKIHsKIAlzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICppbnRlbF9kaWdfcG9ydCA9IGludGVs
X2F0dGFjaGVkX2RpZ19wb3J0KGNvbm5lY3Rvcik7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gdG9faTkxNShjb25uZWN0b3ItPmJhc2UuZGV2KTsKIAlzdHJ1Y3QgaW50ZWxf
aGRjcCAqaGRjcCA9ICZjb25uZWN0b3ItPmhkY3A7Ci0Jc3RydWN0IGRybV9kZXZpY2UgKmRldiA9
IGNvbm5lY3Rvci0+YmFzZS5kZXY7CiAJdW5pb24gewogCQlzdHJ1Y3QgaGRjcDJfYWtlX2luaXQg
YWtlX2luaXQ7CiAJCXN0cnVjdCBoZGNwMl9ha2Vfc2VuZF9jZXJ0IHNlbmRfY2VydDsKQEAgLTEy
NDgsNyArMTI0Miw4IEBAIHN0YXRpYyBpbnQgaGRjcDJfYXV0aGVudGljYXRpb25fa2V5X2V4Y2hh
bmdlKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAogCWhkY3AtPmlzX3JlcGVh
dGVyID0gSERDUF8yXzJfUlhfUkVQRUFURVIobXNncy5zZW5kX2NlcnQucnhfY2Fwc1syXSk7CiAK
LQlpZiAoZHJtX2hkY3BfY2hlY2tfa3N2c19yZXZva2VkKGRldiwgbXNncy5zZW5kX2NlcnQuY2Vy
dF9yeC5yZWNlaXZlcl9pZCwKKwlpZiAoZHJtX2hkY3BfY2hlY2tfa3N2c19yZXZva2VkKCZkZXZf
cHJpdi0+ZHJtLAorCQkJCQltc2dzLnNlbmRfY2VydC5jZXJ0X3J4LnJlY2VpdmVyX2lkLAogCQkJ
CQkxKSkgewogCQlEUk1fRVJST1IoIlJlY2VpdmVyIElEIGlzIHJldm9rZWRcbiIpOwogCQlyZXR1
cm4gLUVQRVJNOwpAQCAtMTQwNSw4ICsxNDAwLDggQEAgc3RhdGljCiBpbnQgaGRjcDJfYXV0aGVu
dGljYXRlX3JlcGVhdGVyX3RvcG9sb2d5KHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3Rv
cikKIHsKIAlzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICppbnRlbF9kaWdfcG9ydCA9IGludGVs
X2F0dGFjaGVkX2RpZ19wb3J0KGNvbm5lY3Rvcik7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gdG9faTkxNShjb25uZWN0b3ItPmJhc2UuZGV2KTsKIAlzdHJ1Y3QgaW50ZWxf
aGRjcCAqaGRjcCA9ICZjb25uZWN0b3ItPmhkY3A7Ci0Jc3RydWN0IGRybV9kZXZpY2UgKmRldiA9
IGNvbm5lY3Rvci0+YmFzZS5kZXY7CiAJdW5pb24gewogCQlzdHJ1Y3QgaGRjcDJfcmVwX3NlbmRf
cmVjZWl2ZXJpZF9saXN0IHJlY3ZpZF9saXN0OwogCQlzdHJ1Y3QgaGRjcDJfcmVwX3NlbmRfYWNr
IHJlcF9hY2s7CkBAIC0xNDQxLDcgKzE0MzYsOCBAQCBpbnQgaGRjcDJfYXV0aGVudGljYXRlX3Jl
cGVhdGVyX3RvcG9sb2d5KHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAogCWRl
dmljZV9jbnQgPSAoSERDUF8yXzJfREVWX0NPVU5UX0hJKHJ4X2luZm9bMF0pIDw8IDQgfAogCQkg
ICAgICBIRENQXzJfMl9ERVZfQ09VTlRfTE8ocnhfaW5mb1sxXSkpOwotCWlmIChkcm1faGRjcF9j
aGVja19rc3ZzX3Jldm9rZWQoZGV2LCBtc2dzLnJlY3ZpZF9saXN0LnJlY2VpdmVyX2lkcywKKwlp
ZiAoZHJtX2hkY3BfY2hlY2tfa3N2c19yZXZva2VkKCZkZXZfcHJpdi0+ZHJtLAorCQkJCQltc2dz
LnJlY3ZpZF9saXN0LnJlY2VpdmVyX2lkcywKIAkJCQkJZGV2aWNlX2NudCkpIHsKIAkJRFJNX0VS
Uk9SKCJSZXZva2VkIHJlY2VpdmVyIElEKHMpIGlzIGluIGxpc3RcbiIpOwogCQlyZXR1cm4gLUVQ
RVJNOwpAQCAtMTUyNyw3ICsxNTIzLDcgQEAgc3RhdGljIGludCBoZGNwMl9lbmFibGVfZW5jcnlw
dGlvbihzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IpCiAJc3RydWN0IGludGVsX2Rp
Z2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQgPSBpbnRlbF9hdHRhY2hlZF9kaWdfcG9ydChjb25u
ZWN0b3IpOwogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY29u
bmVjdG9yLT5iYXNlLmRldik7CiAJc3RydWN0IGludGVsX2hkY3AgKmhkY3AgPSAmY29ubmVjdG9y
LT5oZGNwOwotCWVudW0gcG9ydCBwb3J0ID0gaW50ZWxfYXR0YWNoZWRfZW5jb2Rlcihjb25uZWN0
b3IpLT5wb3J0OworCWVudW0gcG9ydCBwb3J0ID0gaW50ZWxfZGlnX3BvcnQtPmJhc2UucG9ydDsK
IAllbnVtIHRyYW5zY29kZXIgY3B1X3RyYW5zY29kZXIgPSBoZGNwLT5jcHVfdHJhbnNjb2RlcjsK
IAlpbnQgcmV0OwogCkBAIC0xNTY1LDcgKzE1NjEsNyBAQCBzdGF0aWMgaW50IGhkY3AyX2Rpc2Fi
bGVfZW5jcnlwdGlvbihzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IpCiAJc3RydWN0
IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQgPSBpbnRlbF9hdHRhY2hlZF9kaWdf
cG9ydChjb25uZWN0b3IpOwogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRv
X2k5MTUoY29ubmVjdG9yLT5iYXNlLmRldik7CiAJc3RydWN0IGludGVsX2hkY3AgKmhkY3AgPSAm
Y29ubmVjdG9yLT5oZGNwOwotCWVudW0gcG9ydCBwb3J0ID0gaW50ZWxfYXR0YWNoZWRfZW5jb2Rl
cihjb25uZWN0b3IpLT5wb3J0OworCWVudW0gcG9ydCBwb3J0ID0gaW50ZWxfZGlnX3BvcnQtPmJh
c2UucG9ydDsKIAllbnVtIHRyYW5zY29kZXIgY3B1X3RyYW5zY29kZXIgPSBoZGNwLT5jcHVfdHJh
bnNjb2RlcjsKIAlpbnQgcmV0OwogCkBAIC0xNjc2LDcgKzE2NzIsNyBAQCBzdGF0aWMgaW50IGlu
dGVsX2hkY3AyX2NoZWNrX2xpbmsoc3RydWN0IGludGVsX2Nvbm5lY3RvciAqY29ubmVjdG9yKQog
CXN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0ID0gaW50ZWxfYXR0YWNo
ZWRfZGlnX3BvcnQoY29ubmVjdG9yKTsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYgPSB0b19pOTE1KGNvbm5lY3Rvci0+YmFzZS5kZXYpOwogCXN0cnVjdCBpbnRlbF9oZGNwICpo
ZGNwID0gJmNvbm5lY3Rvci0+aGRjcDsKLQllbnVtIHBvcnQgcG9ydCA9IGludGVsX2F0dGFjaGVk
X2VuY29kZXIoY29ubmVjdG9yKS0+cG9ydDsKKwllbnVtIHBvcnQgcG9ydCA9IGludGVsX2RpZ19w
b3J0LT5iYXNlLnBvcnQ7CiAJZW51bSB0cmFuc2NvZGVyIGNwdV90cmFuc2NvZGVyOwogCWludCBy
ZXQgPSAwOwogCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeA==

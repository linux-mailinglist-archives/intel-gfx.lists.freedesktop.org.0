Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 25F5F1D7873
	for <lists+intel-gfx@lfdr.de>; Mon, 18 May 2020 14:23:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1A9D289D60;
	Mon, 18 May 2020 12:23:11 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0660989D5E
 for <intel-gfx@lists.freedesktop.org>; Mon, 18 May 2020 12:23:09 +0000 (UTC)
IronPort-SDR: eqJ/DExgXiZYQeHE2PAPIdbyudRA7Jo7oChfOSS+holtsnoaPaaZD7S0gr4OQk3Sf8kO9X/kJO
 1WwkgIaZWHLg==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga106.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 18 May 2020 05:23:09 -0700
IronPort-SDR: qwDa4DQ3wwK27jcEDntNcyxwKsW4t2DlYLmpwqMz+PTGLqyZA9PsJlsAT6dMCU61uccWmtFGBy
 Yu870i5wK6qA==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.73,407,1583222400"; d="scan'208";a="254429109"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by fmsmga008.fm.intel.com with SMTP; 18 May 2020 05:23:06 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Mon, 18 May 2020 15:23:06 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 18 May 2020 15:23:01 +0300
Message-Id: <20200518122303.28083-2-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20200518122303.28083-1-ville.syrjala@linux.intel.com>
References: <20200518122303.28083-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 2/4] Revert "drm/i915: Move the dbuf pre/post
 plane update"
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkRi
dWYgc2xpY2UgdHJhY2tpbmcgYnVzdGVkIGFjcm9zcyBydW50aW1lIFBNLiBCYWNrIHRvIHRoZQpk
cmF3aW5nIGJvYXJkLgoKVGhpcyByZXZlcnRzIGNvbW1pdCBjN2MwZTdlYmU0ZDk5NjM1NzNmODEz
OTkzNzRlNGU5NWYzN2ZkOGUzLgoKU2lnbmVkLW9mZi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxs
ZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2Rpc3BsYXkuYyB8IDQxICsrKysrKysrKysrKysrKysrKystCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9wbS5jICAgICAgICAgICAgICB8IDM3IC0tLS0tLS0tLS0tLS0tLS0t
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uaCAgICAgICAgICAgICAgfCAgMiAtCiAz
IGZpbGVzIGNoYW5nZWQsIDM5IGluc2VydGlvbnMoKyksIDQxIGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggZTE0MDdkYzI4
ZGRjLi40OTU3N2YxOWZmOWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZGlzcGxheS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheS5jCkBAIC0xNTIwNyw2ICsxNTIwNyw0MyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9j
b21taXRfbW9kZXNldF9lbmFibGVzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQog
CX0KIH0KIAorc3RhdGljIHZvaWQgaWNsX2RidWZfc2xpY2VfcHJlX3VwZGF0ZShzdHJ1Y3QgaW50
ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7CisJY29uc3Qgc3RydWN0IGludGVsX2Ri
dWZfc3RhdGUgKm5ld19kYnVmX3N0YXRlID0KKwkJaW50ZWxfYXRvbWljX2dldF9uZXdfZGJ1Zl9z
dGF0ZShzdGF0ZSk7CisJY29uc3Qgc3RydWN0IGludGVsX2RidWZfc3RhdGUgKm9sZF9kYnVmX3N0
YXRlID0KKwkJaW50ZWxfYXRvbWljX2dldF9vbGRfZGJ1Zl9zdGF0ZShzdGF0ZSk7CisKKwlpZiAo
IW5ld19kYnVmX3N0YXRlIHx8CisJICAgIG5ld19kYnVmX3N0YXRlLT5lbmFibGVkX3NsaWNlcyA9
PSBvbGRfZGJ1Zl9zdGF0ZS0+ZW5hYmxlZF9zbGljZXMpCisJCXJldHVybjsKKworCVdBUk5fT04o
IW5ld19kYnVmX3N0YXRlLT5iYXNlLmNoYW5nZWQpOworCisJZ2VuOV9kYnVmX3NsaWNlc191cGRh
dGUoZGV2X3ByaXYsCisJCQkJb2xkX2RidWZfc3RhdGUtPmVuYWJsZWRfc2xpY2VzIHwKKwkJCQlu
ZXdfZGJ1Zl9zdGF0ZS0+ZW5hYmxlZF9zbGljZXMpOworfQorCitzdGF0aWMgdm9pZCBpY2xfZGJ1
Zl9zbGljZV9wb3N0X3VwZGF0ZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKK3sK
KwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNl
LmRldik7CisJY29uc3Qgc3RydWN0IGludGVsX2RidWZfc3RhdGUgKm5ld19kYnVmX3N0YXRlID0K
KwkJaW50ZWxfYXRvbWljX2dldF9uZXdfZGJ1Zl9zdGF0ZShzdGF0ZSk7CisJY29uc3Qgc3RydWN0
IGludGVsX2RidWZfc3RhdGUgKm9sZF9kYnVmX3N0YXRlID0KKwkJaW50ZWxfYXRvbWljX2dldF9v
bGRfZGJ1Zl9zdGF0ZShzdGF0ZSk7CisKKwlpZiAoIW5ld19kYnVmX3N0YXRlIHx8CisJICAgIG5l
d19kYnVmX3N0YXRlLT5lbmFibGVkX3NsaWNlcyA9PSBvbGRfZGJ1Zl9zdGF0ZS0+ZW5hYmxlZF9z
bGljZXMpCisJCXJldHVybjsKKworCVdBUk5fT04oIW5ld19kYnVmX3N0YXRlLT5iYXNlLmNoYW5n
ZWQpOworCisJZ2VuOV9kYnVmX3NsaWNlc191cGRhdGUoZGV2X3ByaXYsCisJCQkJbmV3X2RidWZf
c3RhdGUtPmVuYWJsZWRfc2xpY2VzKTsKK30KKwogc3RhdGljIHZvaWQgc2tsX2NvbW1pdF9tb2Rl
c2V0X2VuYWJsZXMoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCiB7CiAJc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShzdGF0ZS0+YmFzZS5kZXYpOwpA
QCAtMTU0NDcsNyArMTU0ODQsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9hdG9taWNfY29tbWl0X3Rh
aWwoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCiAJaWYgKHN0YXRlLT5tb2Rlc2V0
KQogCQlpbnRlbF9lbmNvZGVyc191cGRhdGVfcHJlcGFyZShzdGF0ZSk7CiAKLQlpbnRlbF9kYnVm
X3ByZV9wbGFuZV91cGRhdGUoc3RhdGUpOworCWljbF9kYnVmX3NsaWNlX3ByZV91cGRhdGUoc3Rh
dGUpOwogCiAJLyogTm93IGVuYWJsZSB0aGUgY2xvY2tzLCBwbGFuZSwgcGlwZSwgYW5kIGNvbm5l
Y3RvcnMgdGhhdCB3ZSBzZXQgdXAuICovCiAJZGV2X3ByaXYtPmRpc3BsYXkuY29tbWl0X21vZGVz
ZXRfZW5hYmxlcyhzdGF0ZSk7CkBAIC0xNTUwMiw3ICsxNTUzOSw3IEBAIHN0YXRpYyB2b2lkIGlu
dGVsX2F0b21pY19jb21taXRfdGFpbChzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkK
IAkJCWRldl9wcml2LT5kaXNwbGF5Lm9wdGltaXplX3dhdGVybWFya3Moc3RhdGUsIGNydGMpOwog
CX0KIAotCWludGVsX2RidWZfcG9zdF9wbGFuZV91cGRhdGUoc3RhdGUpOworCWljbF9kYnVmX3Ns
aWNlX3Bvc3RfdXBkYXRlKHN0YXRlKTsKIAogCWZvcl9lYWNoX29sZG5ld19pbnRlbF9jcnRjX2lu
X3N0YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0ZSwgbmV3X2NydGNfc3RhdGUsIGkpIHsK
IAkJaW50ZWxfcG9zdF9wbGFuZV91cGRhdGUoc3RhdGUsIGNydGMpOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X3BtLmMKaW5kZXggZDQwZDIyZWI2NWRhLi5hOTJkNTdkOWI3NTkgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfcG0uYwpAQCAtNzgwNiw0MCArNzgwNiwzIEBAIGludCBpbnRlbF9kYnVmX2luaXQoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCiAJcmV0dXJuIDA7CiB9Ci0KLXZvaWQgaW50
ZWxfZGJ1Zl9wcmVfcGxhbmVfdXBkYXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRl
KQotewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoc3RhdGUt
PmJhc2UuZGV2KTsKLQljb25zdCBzdHJ1Y3QgaW50ZWxfZGJ1Zl9zdGF0ZSAqbmV3X2RidWZfc3Rh
dGUgPQotCQlpbnRlbF9hdG9taWNfZ2V0X25ld19kYnVmX3N0YXRlKHN0YXRlKTsKLQljb25zdCBz
dHJ1Y3QgaW50ZWxfZGJ1Zl9zdGF0ZSAqb2xkX2RidWZfc3RhdGUgPQotCQlpbnRlbF9hdG9taWNf
Z2V0X29sZF9kYnVmX3N0YXRlKHN0YXRlKTsKLQotCWlmICghbmV3X2RidWZfc3RhdGUgfHwKLQkg
ICAgbmV3X2RidWZfc3RhdGUtPmVuYWJsZWRfc2xpY2VzID09IG9sZF9kYnVmX3N0YXRlLT5lbmFi
bGVkX3NsaWNlcykKLQkJcmV0dXJuOwotCi0JV0FSTl9PTighbmV3X2RidWZfc3RhdGUtPmJhc2Uu
Y2hhbmdlZCk7Ci0KLQlnZW45X2RidWZfc2xpY2VzX3VwZGF0ZShkZXZfcHJpdiwKLQkJCQlvbGRf
ZGJ1Zl9zdGF0ZS0+ZW5hYmxlZF9zbGljZXMgfAotCQkJCW5ld19kYnVmX3N0YXRlLT5lbmFibGVk
X3NsaWNlcyk7Ci19Ci0KLXZvaWQgaW50ZWxfZGJ1Zl9wb3N0X3BsYW5lX3VwZGF0ZShzdHJ1Y3Qg
aW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7Ci0JY29uc3Qgc3RydWN0IGludGVs
X2RidWZfc3RhdGUgKm5ld19kYnVmX3N0YXRlID0KLQkJaW50ZWxfYXRvbWljX2dldF9uZXdfZGJ1
Zl9zdGF0ZShzdGF0ZSk7Ci0JY29uc3Qgc3RydWN0IGludGVsX2RidWZfc3RhdGUgKm9sZF9kYnVm
X3N0YXRlID0KLQkJaW50ZWxfYXRvbWljX2dldF9vbGRfZGJ1Zl9zdGF0ZShzdGF0ZSk7Ci0KLQlp
ZiAoIW5ld19kYnVmX3N0YXRlIHx8Ci0JICAgIG5ld19kYnVmX3N0YXRlLT5lbmFibGVkX3NsaWNl
cyA9PSBvbGRfZGJ1Zl9zdGF0ZS0+ZW5hYmxlZF9zbGljZXMpCi0JCXJldHVybjsKLQotCVdBUk5f
T04oIW5ld19kYnVmX3N0YXRlLT5iYXNlLmNoYW5nZWQpOwotCi0JZ2VuOV9kYnVmX3NsaWNlc191
cGRhdGUoZGV2X3ByaXYsCi0JCQkJbmV3X2RidWZfc3RhdGUtPmVuYWJsZWRfc2xpY2VzKTsKLX0K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9wbS5oCmluZGV4IDY2MzZkMmEwNTdjZC4uM2ZjYzliNmUyY2JmIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5oCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX3BtLmgKQEAgLTgzLDcgKzgzLDUgQEAgaW50ZWxfYXRvbWljX2dl
dF9kYnVmX3N0YXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKTsKIAl0b19pbnRl
bF9kYnVmX3N0YXRlKGludGVsX2F0b21pY19nZXRfbmV3X2dsb2JhbF9vYmpfc3RhdGUoc3RhdGUs
ICZ0b19pOTE1KHN0YXRlLT5iYXNlLmRldiktPmRidWYub2JqKSkKIAogaW50IGludGVsX2RidWZf
aW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwotdm9pZCBpbnRlbF9kYnVm
X3ByZV9wbGFuZV91cGRhdGUoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpOwotdm9p
ZCBpbnRlbF9kYnVmX3Bvc3RfcGxhbmVfdXBkYXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUg
KnN0YXRlKTsKIAogI2VuZGlmIC8qIF9fSU5URUxfUE1fSF9fICovCi0tIAoyLjI2LjIKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWls
aW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 05CE663375
	for <lists+intel-gfx@lfdr.de>; Tue,  9 Jul 2019 11:32:49 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2236C6E061;
	Tue,  9 Jul 2019 09:32:46 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C09A06E035
 for <intel-gfx@lists.freedesktop.org>; Tue,  9 Jul 2019 09:32:43 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Jul 2019 02:32:43 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,470,1557212400"; d="scan'208";a="185876230"
Received: from unknown (HELO delly.ger.corp.intel.com) ([10.252.37.9])
 by fmsmga001.fm.intel.com with ESMTP; 09 Jul 2019 02:32:42 -0700
From: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  9 Jul 2019 12:32:07 +0300
Message-Id: <20190709093208.20470-12-lionel.g.landwerlin@intel.com>
X-Mailer: git-send-email 2.21.0.392.gf8f6787159e
In-Reply-To: <20190709093208.20470-1-lionel.g.landwerlin@intel.com>
References: <20190709093208.20470-1-lionel.g.landwerlin@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v7 11/12] drm/i915/perf: execute OA
 configuration from command stream
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UgaGF2ZW4ndCBydW4gaW50byBpc3N1ZXMgd2l0aCBwcm9ncmFtbWluZyB0aGUgZ2xvYmFsIE9B
L05PQQpyZWdpc3RlcnMgY29uZmlndXJhdGlvbiBmcm9tIENQVSBzbyBmYXIsIGJ1dCBIVyBlbmdp
bmVlcnMgYWN0dWFsbHkKcmVjb21tZW5kIGRvaW5nIHRoaXMgZnJvbSB0aGUgY29tbWFuZCBzdHJl
YW1lci4KClNpbmNlIHdlIGhhdmUgYSBjb21tYW5kIGJ1ZmZlciBwcmVwYXJlZCBmb3IgdGhlIGV4
ZWNidWZmZXIgc2lkZSBvZgp0aGluZ3MsIHdlIGNhbiByZXVzZSB0aGF0IGFwcHJvYWNoIGhlcmUg
dG9vLgoKVGhpcyBhbHNvIGFsbG93cyB1cyB0byBzaWduaWZpY2FudGx5IHJlZHVjZSB0aGUgYW1v
dW50IG9mIHRpbWUgd2UgaG9sZAp0aGUgbWFpbiBsb2NrLgoKdjI6IERyb3AgdGhlIGdsb2JhbCBs
b2NrIGFzIG11Y2ggYXMgcG9zc2libGUKClNpZ25lZC1vZmYtYnk6IExpb25lbCBMYW5kd2VybGlu
IDxsaW9uZWwuZy5sYW5kd2VybGluQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Rydi5oICB8ICAgNyArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyB8
IDI2MSArKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tCiAyIGZpbGVzIGNoYW5nZWQsIDE2
MSBpbnNlcnRpb25zKCspLCAxMDcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgK
aW5kZXggZGMwZTQ5ODJjNjcyLi5jNzJlN2M3NDZiNTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYu
aApAQCAtMTIwNSw2ICsxMjA1LDEzIEBAIHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtIHsKIAkgKi8K
IAlpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZjsKIAorCS8qKgorCSAqIEBpbml0aWFsX2NvbmZpZ19y
cTogRmlyc3QgcmVxdWVzdCBydW4gYXQgdGhlIG9wZW5pbmcgb2YgdGhlIGk5MTUKKwkgKiBwZXJm
IHN0cmVhbSB0byBjb25maWd1cmUgdGhlIEhXLiBTaG91bGQgYmUgTlVMTCBhZnRlciB0aGUgcGVy
ZgorCSAqIHN0cmVhbSBoYXMgYmVlbiBvcGVuZWQgc3VjY2Vzc2Z1bGx5LgorCSAqLworCXN0cnVj
dCBpOTE1X3JlcXVlc3QgKmluaXRpYWxfY29uZmlnX3JxOworCiAJLyoqCiAJICogQHNhbXBsZV9m
bGFnczogRmxhZ3MgcmVwcmVzZW50aW5nIHRoZSBgRFJNX0k5MTVfUEVSRl9QUk9QX1NBTVBMRV8q
YAogCSAqIHByb3BlcnRpZXMgZ2l2ZW4gd2hlbiBvcGVuaW5nIGEgc3RyZWFtLCByZXByZXNlbnRp
bmcgdGhlIGNvbnRlbnRzCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Bl
cmYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCmluZGV4IDFlNTAxMWQ0Y2Rh
ZS4uMDQ4YTlhYmFkMjZhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Bl
cmYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwpAQCAtMzkyLDYgKzM5
MiwxOSBAQCB2b2lkIGk5MTVfb2FfY29uZmlnX3JlbGVhc2Uoc3RydWN0IGtyZWYgKnJlZikKIAlr
ZnJlZShvYV9jb25maWcpOwogfQogCitzdGF0aWMgdm9pZCBpOTE1X29hX2NvbmZpZ19kaXNwb3Nl
X2J1ZmZlcnMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCit7CisJc3RydWN0IGk5MTVf
b2FfY29uZmlnICpvYV9jb25maWcsICpuZXh0OworCisJbXV0ZXhfbG9jaygmaTkxNS0+cGVyZi5t
ZXRyaWNzX2xvY2spOworCWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShvYV9jb25maWcsIG5leHQs
ICZpOTE1LT5wZXJmLm1ldHJpY3NfYnVmZmVycywgdm1hX2xpbmspIHsKKwkJbGlzdF9kZWwoJm9h
X2NvbmZpZy0+dm1hX2xpbmspOworCQlpOTE1X2dlbV9vYmplY3RfcHV0KG9hX2NvbmZpZy0+b2Jq
KTsKKwkJb2FfY29uZmlnLT5vYmogPSBOVUxMOworCX0KKwltdXRleF91bmxvY2soJmk5MTUtPnBl
cmYubWV0cmljc19sb2NrKTsKK30KKwogc3RhdGljIHUzMiAqd3JpdGVfY3NfbWlfbHJpKHUzMiAq
Y3MsIGNvbnN0IHN0cnVjdCBpOTE1X29hX3JlZyAqcmVnX2RhdGEsIHUzMiBuX3JlZ3MpCiB7CiAJ
dTMyIGk7CkBAIC0xNDQ5LDYgKzE0NjIsMTQgQEAgc3RhdGljIHZvaWQgb2FfcHV0X3JlbmRlcl9j
dHhfaWQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAl9CiB9CiAKK3N0YXRpYyB2
b2lkIGZyZWVfbm9hX3dhaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCit7CisJbXV0
ZXhfbG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7CisJaTkxNV92bWFfdW5waW5fYW5kX3Jl
bGVhc2UoJmk5MTUtPnBlcmYub2Eubm9hX3dhaXQsCisJCQkJICAgSTkxNV9WTUFfUkVMRUFTRV9N
QVApOworCW11dGV4X3VubG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7Cit9CisKIHN0YXRp
YyB2b2lkCiBmcmVlX29hX2J1ZmZlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsK
QEAgLTE0NjgsMTYgKzE0ODksMTcgQEAgc3RhdGljIHZvaWQgaTkxNV9vYV9zdHJlYW1fZGVzdHJv
eShzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQogCiAJQlVHX09OKHN0cmVhbSAhPSBk
ZXZfcHJpdi0+cGVyZi5vYS5leGNsdXNpdmVfc3RyZWFtKTsKIAorCWRldl9wcml2LT5wZXJmLm9h
Lm9wcy5kaXNhYmxlX21ldHJpY19zZXQoZGV2X3ByaXYpOworCiAJLyoKIAkgKiBVbnNldCBleGNs
dXNpdmVfc3RyZWFtIGZpcnN0LCBpdCB3aWxsIGJlIGNoZWNrZWQgd2hpbGUgZGlzYWJsaW5nCiAJ
ICogdGhlIG1ldHJpYyBzZXQgb24gZ2VuOCsuCiAJICovCiAJbXV0ZXhfbG9jaygmZGV2X3ByaXYt
PmRybS5zdHJ1Y3RfbXV0ZXgpOwogCWRldl9wcml2LT5wZXJmLm9hLmV4Y2x1c2l2ZV9zdHJlYW0g
PSBOVUxMOwotCWRldl9wcml2LT5wZXJmLm9hLm9wcy5kaXNhYmxlX21ldHJpY19zZXQoZGV2X3By
aXYpOwotCWk5MTVfdm1hX3VucGluX2FuZF9yZWxlYXNlKCZkZXZfcHJpdi0+cGVyZi5vYS5ub2Ff
d2FpdCwgMCk7CiAJbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+ZHJtLnN0cnVjdF9tdXRleCk7CiAK
KwlmcmVlX25vYV93YWl0KGRldl9wcml2KTsKIAlmcmVlX29hX2J1ZmZlcihkZXZfcHJpdik7CiAK
IAlpbnRlbF91bmNvcmVfZm9yY2V3YWtlX3B1dCgmZGV2X3ByaXYtPnVuY29yZSwgRk9SQ0VXQUtF
X0FMTCk7CkBAIC0xNzEwLDYgKzE3MzIsMTAgQEAgc3RhdGljIGludCBhbGxvY19ub2Ffd2FpdChz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAkJcmV0dXJuIFBUUl9FUlIoYm8pOwogCX0K
IAorCXJldCA9IGk5MTVfbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKCZpOTE1LT5kcm0pOworCWlm
IChyZXQpCisJCWdvdG8gZXJyX3VucmVmOworCiAJLyoKIAkgKiBXZSBwaW4gaW4gR0dUVCBiZWNh
dXNlIHdlIGp1bXAgaW50byB0aGlzIGJ1ZmZlciBub3cgYmVjYXVzZQogCSAqIG11bHRpcGxlIE9B
IGNvbmZpZyBCT3Mgd2lsbCBoYXZlIGEganVtcCB0byB0aGlzIGFkZHJlc3MgYW5kIGl0CkBAIC0x
NzE3LDEwICsxNzQzLDEzIEBAIHN0YXRpYyBpbnQgYWxsb2Nfbm9hX3dhaXQoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmk5MTUpCiAJICovCiAJdm1hID0gaTkxNV9nZW1fb2JqZWN0X2dndHRfcGlu
KGJvLCBOVUxMLCAwLCA0MDk2LCAwKTsKIAlpZiAoSVNfRVJSKHZtYSkpIHsKKwkJbXV0ZXhfdW5s
b2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKIAkJcmV0ID0gUFRSX0VSUih2bWEpOwogCQln
b3RvIGVycl91bnJlZjsKIAl9CiAKKwltdXRleF91bmxvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0
ZXgpOworCiAJYmF0Y2ggPSBjcyA9IGk5MTVfZ2VtX29iamVjdF9waW5fbWFwKGJvLCBJOTE1X01B
UF9XQik7CiAJaWYgKElTX0VSUihiYXRjaCkpIHsKIAkJcmV0ID0gUFRSX0VSUihiYXRjaCk7CkBA
IC0xODU0LDcgKzE4ODMsMTEgQEAgc3RhdGljIGludCBhbGxvY19ub2Ffd2FpdChzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlyZXR1cm4gMDsKIAogZXJyX3VucGluOgotCV9faTkxNV92
bWFfdW5waW4odm1hKTsKKwltdXRleF9sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKKwlp
OTE1X3ZtYV91bnBpbl9hbmRfcmVsZWFzZSgmaTkxNS0+cGVyZi5vYS5ub2Ffd2FpdCwgMCk7CisJ
bXV0ZXhfdW5sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKKworCXJldHVybiByZXQ7CiAK
IGVycl91bnJlZjoKIAlpOTE1X2dlbV9vYmplY3RfcHV0KGJvKTsKQEAgLTE4NjIsMjMgKzE4OTUs
NTUgQEAgc3RhdGljIGludCBhbGxvY19ub2Ffd2FpdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSkKIAlyZXR1cm4gcmV0OwogfQogCi1zdGF0aWMgdm9pZCBjb25maWdfb2FfcmVncyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgICBjb25zdCBzdHJ1Y3QgaTkxNV9v
YV9yZWcgKnJlZ3MsCi0JCQkgICB1MzIgbl9yZWdzKQorc3RhdGljIGludCBlbWl0X29hX2NvbmZp
ZyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKKwkJCSAgc3RydWN0IGk5MTVfcGVyZl9z
dHJlYW0gKnN0cmVhbSkKIHsKLQl1MzIgaTsKKwlzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2Nv
bmZpZyA9IHN0cmVhbS0+b2FfY29uZmlnOworCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxID0gc3Ry
ZWFtLT5pbml0aWFsX2NvbmZpZ19ycTsKKwlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKKwl1MzIgKmNz
OworCWludCBlcnI7CiAKLQlmb3IgKGkgPSAwOyBpIDwgbl9yZWdzOyBpKyspIHsKLQkJY29uc3Qg
c3RydWN0IGk5MTVfb2FfcmVnICpyZWcgPSByZWdzICsgaTsKKwl2bWEgPSBpOTE1X3ZtYV9pbnN0
YW5jZShvYV9jb25maWctPm9iaiwgJmk5MTUtPmdndHQudm0sIE5VTEwpOworCWlmICh1bmxpa2Vs
eShJU19FUlIodm1hKSkpCisJCXJldHVybiBQVFJfRVJSKHZtYSk7CisKKwllcnIgPSBpOTE1X3Zt
YV9waW4odm1hLCAwLCAwLCBQSU5fR0xPQkFMKTsKKwlpZiAoZXJyKQorCQlyZXR1cm4gZXJyOwog
Ci0JCUk5MTVfV1JJVEUocmVnLT5hZGRyLCByZWctPnZhbHVlKTsKKwllcnIgPSBpOTE1X3ZtYV9t
b3ZlX3RvX2FjdGl2ZSh2bWEsIHJxLCAwKTsKKwlpZiAoZXJyKSB7CisJCWk5MTVfdm1hX3VucGlu
KHZtYSk7CisJCXJldHVybiBlcnI7CiAJfQorCisJY3MgPSBpbnRlbF9yaW5nX2JlZ2luKHJxLCBJ
TlRFTF9HRU4oaTkxNSkgPj0gOCA/IDQgOiAyKTsKKwlpZiAoSVNfRVJSKGNzKSkgeworCQlpOTE1
X3ZtYV91bnBpbih2bWEpOworCQlyZXR1cm4gUFRSX0VSUihjcyk7CisJfQorCisJaWYgKElOVEVM
X0dFTihpOTE1KSA+IDgpIHsKKwkJKmNzKysgPSBNSV9CQVRDSF9CVUZGRVJfU1RBUlRfR0VOODsK
KwkJKmNzKysgPSBsb3dlcl8zMl9iaXRzKHZtYS0+bm9kZS5zdGFydCk7CisJCSpjcysrID0gdXBw
ZXJfMzJfYml0cyh2bWEtPm5vZGUuc3RhcnQpOworCQkqY3MrKyA9IE1JX05PT1A7CisJfSBlbHNl
IHsKKwkJKmNzKysgPSBNSV9CQVRDSF9CVUZGRVJfU1RBUlQ7CisJCSpjcysrID0gdm1hLT5ub2Rl
LnN0YXJ0OworCX0KKworCWludGVsX3JpbmdfYWR2YW5jZShycSwgY3MpOworCisJaTkxNV92bWFf
dW5waW4odm1hKTsKKworCXJldHVybiAwOwogfQogCiBzdGF0aWMgaW50IGhzd19lbmFibGVfbWV0
cmljX3NldChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQogewogCXN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHN0cmVhbS0+ZGV2X3ByaXY7Ci0JY29uc3Qgc3RydWN0
IGk5MTVfb2FfY29uZmlnICpvYV9jb25maWcgPSBzdHJlYW0tPm9hX2NvbmZpZzsKIAogCS8qIFBS
TToKIAkgKgpAQCAtMTg5NCwzNSArMTk1OSw3IEBAIHN0YXRpYyBpbnQgaHN3X2VuYWJsZV9tZXRy
aWNfc2V0KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiAJSTkxNV9XUklURShHRU42
X1VDR0NUTDEsIChJOTE1X1JFQUQoR0VONl9VQ0dDVEwxKSB8CiAJCQkJICBHRU42X0NTVU5JVF9D
TE9DS19HQVRFX0RJU0FCTEUpKTsKIAotCWNvbmZpZ19vYV9yZWdzKGRldl9wcml2LCBvYV9jb25m
aWctPm11eF9yZWdzLCBvYV9jb25maWctPm11eF9yZWdzX2xlbik7Ci0KLQkvKiBJdCBhcHBhcmVu
dGx5IHRha2VzIGEgZmFpcmx5IGxvbmcgdGltZSBmb3IgYSBuZXcgTVVYCi0JICogY29uZmlndXJh
dGlvbiB0byBiZSBiZSBhcHBsaWVkIGFmdGVyIHRoZXNlIHJlZ2lzdGVyIHdyaXRlcy4KLQkgKiBU
aGlzIGRlbGF5IGR1cmF0aW9uIHdhcyBkZXJpdmVkIGVtcGlyaWNhbGx5IGJhc2VkIG9uIHRoZQot
CSAqIHJlbmRlcl9iYXNpYyBjb25maWcgYnV0IGhvcGVmdWxseSBpdCBjb3ZlcnMgdGhlIG1heGlt
dW0KLQkgKiBjb25maWd1cmF0aW9uIGxhdGVuY3kuCi0JICoKLQkgKiBBcyBhIGZhbGxiYWNrLCB0
aGUgY2hlY2tzIGluIF9hcHBlbmRfb2FfcmVwb3J0cygpIHRvIHNraXAKLQkgKiBpbnZhbGlkIE9B
IHJlcG9ydHMgZG8gYWxzbyBzZWVtIHRvIHdvcmsgdG8gZGlzY2FyZCByZXBvcnRzCi0JICogZ2Vu
ZXJhdGVkIGJlZm9yZSB0aGlzIGNvbmZpZyBoYXMgY29tcGxldGVkIC0gYWxiZWl0IG5vdAotCSAq
IHNpbGVudGx5LgotCSAqCi0JICogVW5mb3J0dW5hdGVseSB0aGlzIGlzIGVzc2VudGlhbGx5IGEg
bWFnaWMgbnVtYmVyLCBzaW5jZSB3ZQotCSAqIGRvbid0IGN1cnJlbnRseSBrbm93IG9mIGEgcmVs
aWFibGUgbWVjaGFuaXNtIGZvciBwcmVkaWN0aW5nCi0JICogaG93IGxvbmcgdGhlIE1VWCBjb25m
aWcgd2lsbCB0YWtlIHRvIGFwcGx5IGFuZCBiZXNpZGVzCi0JICogc2VlaW5nIGludmFsaWQgcmVw
b3J0cyB3ZSBkb24ndCBrbm93IG9mIGEgcmVsaWFibGUgd2F5IHRvCi0JICogZXhwbGljaXRseSBj
aGVjayB0aGF0IHRoZSBNVVggY29uZmlnIGhhcyBsYW5kZWQuCi0JICoKLQkgKiBJdCdzIGV2ZW4g
cG9zc2libGUgd2UndmUgbWlzcyBjaGFyYWN0ZXJpemVkIHRoZSB1bmRlcmx5aW5nCi0JICogcHJv
YmxlbSAtIGl0IGp1c3Qgc2VlbXMgbGlrZSB0aGUgc2ltcGxlc3QgZXhwbGFuYXRpb24gd2h5Ci0J
ICogYSBkZWxheSBhdCB0aGlzIGxvY2F0aW9uIHdvdWxkIG1pdGlnYXRlIGFueSBpbnZhbGlkIHJl
cG9ydHMuCi0JICovCi0JdXNsZWVwX3JhbmdlKDE1MDAwLCAyMDAwMCk7Ci0KLQljb25maWdfb2Ff
cmVncyhkZXZfcHJpdiwgb2FfY29uZmlnLT5iX2NvdW50ZXJfcmVncywKLQkJICAgICAgIG9hX2Nv
bmZpZy0+Yl9jb3VudGVyX3JlZ3NfbGVuKTsKLQotCXJldHVybiAwOworCXJldHVybiBlbWl0X29h
X2NvbmZpZyhkZXZfcHJpdiwgc3RyZWFtKTsKIH0KIAogc3RhdGljIHZvaWQgaHN3X2Rpc2FibGVf
bWV0cmljX3NldChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCkBAIC0yMDI3LDEw
ICsyMDY0LDE4IEBAIHN0YXRpYyBpbnQgZ2VuOF9jb25maWd1cmVfYWxsX2NvbnRleHRzKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIHsKIAl1bnNpZ25lZCBpbnQgbWFwX3R5cGUg
PSBpOTE1X2NvaGVyZW50X21hcF90eXBlKGRldl9wcml2KTsKIAlzdHJ1Y3QgaTkxNV9nZW1fY29u
dGV4dCAqY3R4OwotCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwogCWludCByZXQ7CiAKLQlsb2Nr
ZGVwX2Fzc2VydF9oZWxkKCZkZXZfcHJpdi0+ZHJtLnN0cnVjdF9tdXRleCk7CisJLyogV2hlbiBj
YWxsaW5nIHdpdGhvdXQgYSBjb25maWd1cmF0aW9uLCB3ZSdyZSB0ZWFyaW5nIGRvd24gdGhlIGk5
MTUKKwkgKiBwZXJmIHN0cmVhbS4gRG9uJ3QgYmUgaW50ZXJydXB0aWJsZSBpbiB0aGF0IGNhc2Uu
CisJICovCisJaWYgKG9hX2NvbmZpZykgeworCQlyZXQgPSBpOTE1X211dGV4X2xvY2tfaW50ZXJy
dXB0aWJsZSgmZGV2X3ByaXYtPmRybSk7CisJCWlmIChyZXQpCisJCQlyZXR1cm4gcmV0OworCX0g
ZWxzZSB7CisJCW11dGV4X2xvY2soJmRldl9wcml2LT5kcm0uc3RydWN0X211dGV4KTsKKwl9CiAK
IAkvKgogCSAqIFRoZSBPQSByZWdpc3RlciBjb25maWcgaXMgc2V0dXAgdGhyb3VnaCB0aGUgY29u
dGV4dCBpbWFnZS4gVGhpcyBpbWFnZQpAQCAtMjA0OSw3ICsyMDk0LDcgQEAgc3RhdGljIGludCBn
ZW44X2NvbmZpZ3VyZV9hbGxfY29udGV4dHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LAogCQkJCSAgICAgSTkxNV9XQUlUX0xPQ0tFRCwKIAkJCQkgICAgIE1BWF9TQ0hFRFVMRV9U
SU1FT1VUKTsKIAlpZiAocmV0KQotCQlyZXR1cm4gcmV0OworCQlnb3RvIHVubG9jazsKIAogCS8q
IFVwZGF0ZSBhbGwgY29udGV4dHMgbm93IHRoYXQgd2UndmUgc3RhbGxlZCB0aGUgc3VibWlzc2lv
bi4gKi8KIAlsaXN0X2Zvcl9lYWNoX2VudHJ5KGN0eCwgJmRldl9wcml2LT5jb250ZXh0cy5saXN0
LCBsaW5rKSB7CkBAIC0yMDcyLDcgKzIxMTcsOCBAQCBzdGF0aWMgaW50IGdlbjhfY29uZmlndXJl
X2FsbF9jb250ZXh0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCQkJCQkg
ICAgICAgbWFwX3R5cGUpOwogCQkJaWYgKElTX0VSUihyZWdzKSkgewogCQkJCWk5MTVfZ2VtX2Nv
bnRleHRfdW5sb2NrX2VuZ2luZXMoY3R4KTsKLQkJCQlyZXR1cm4gUFRSX0VSUihyZWdzKTsKKwkJ
CQlyZXQgPSBQVFJfRVJSKHJlZ3MpOworCQkJCWdvdG8gdW5sb2NrOwogCQkJfQogCiAJCQljZS0+
c3RhdGUtPm9iai0+bW0uZGlydHkgPSB0cnVlOwpAQCAtMjA4NiwxNiArMjEzMiwxNCBAQCBzdGF0
aWMgaW50IGdlbjhfY29uZmlndXJlX2FsbF9jb250ZXh0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsCiAJfQogCiAJLyoKLQkgKiBBcHBseSB0aGUgY29uZmlndXJhdGlvbiBieSBk
b2luZyBvbmUgY29udGV4dCByZXN0b3JlIG9mIHRoZSBlZGl0ZWQKLQkgKiBjb250ZXh0IGltYWdl
LgorCSAqIFRoZSBhYm92ZSBjb25maWd1cmF0aW9uIHdpbGwgYmUgYXBwbGllZCB3aGVuIGNhbGxl
ZAorCSAqIGNvbmZpZ19vYV9yZWdzKCkuCiAJICovCi0JcnEgPSBpOTE1X3JlcXVlc3RfY3JlYXRl
KGRldl9wcml2LT5lbmdpbmVbUkNTMF0tPmtlcm5lbF9jb250ZXh0KTsKLQlpZiAoSVNfRVJSKHJx
KSkKLQkJcmV0dXJuIFBUUl9FUlIocnEpOwogCi0JaTkxNV9yZXF1ZXN0X2FkZChycSk7Cit1bmxv
Y2s6CisJbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+ZHJtLnN0cnVjdF9tdXRleCk7CiAKLQlyZXR1
cm4gMDsKKwlyZXR1cm4gcmV0OwogfQogCiBzdGF0aWMgaW50IGdlbjhfZW5hYmxlX21ldHJpY19z
ZXQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKQEAgLTIxNDIsMzUgKzIxODYsNyBA
QCBzdGF0aWMgaW50IGdlbjhfZW5hYmxlX21ldHJpY19zZXQoc3RydWN0IGk5MTVfcGVyZl9zdHJl
YW0gKnN0cmVhbSkKIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCi0JY29uZmlnX29hX3JlZ3Mo
ZGV2X3ByaXYsIG9hX2NvbmZpZy0+bXV4X3JlZ3MsIG9hX2NvbmZpZy0+bXV4X3JlZ3NfbGVuKTsK
LQotCS8qIEl0IGFwcGFyZW50bHkgdGFrZXMgYSBmYWlybHkgbG9uZyB0aW1lIGZvciBhIG5ldyBN
VVgKLQkgKiBjb25maWd1cmF0aW9uIHRvIGJlIGJlIGFwcGxpZWQgYWZ0ZXIgdGhlc2UgcmVnaXN0
ZXIgd3JpdGVzLgotCSAqIFRoaXMgZGVsYXkgZHVyYXRpb24gd2FzIGRlcml2ZWQgZW1waXJpY2Fs
bHkgYmFzZWQgb24gdGhlCi0JICogcmVuZGVyX2Jhc2ljIGNvbmZpZyBidXQgaG9wZWZ1bGx5IGl0
IGNvdmVycyB0aGUgbWF4aW11bQotCSAqIGNvbmZpZ3VyYXRpb24gbGF0ZW5jeS4KLQkgKgotCSAq
IEFzIGEgZmFsbGJhY2ssIHRoZSBjaGVja3MgaW4gX2FwcGVuZF9vYV9yZXBvcnRzKCkgdG8gc2tp
cAotCSAqIGludmFsaWQgT0EgcmVwb3J0cyBkbyBhbHNvIHNlZW0gdG8gd29yayB0byBkaXNjYXJk
IHJlcG9ydHMKLQkgKiBnZW5lcmF0ZWQgYmVmb3JlIHRoaXMgY29uZmlnIGhhcyBjb21wbGV0ZWQg
LSBhbGJlaXQgbm90Ci0JICogc2lsZW50bHkuCi0JICoKLQkgKiBVbmZvcnR1bmF0ZWx5IHRoaXMg
aXMgZXNzZW50aWFsbHkgYSBtYWdpYyBudW1iZXIsIHNpbmNlIHdlCi0JICogZG9uJ3QgY3VycmVu
dGx5IGtub3cgb2YgYSByZWxpYWJsZSBtZWNoYW5pc20gZm9yIHByZWRpY3RpbmcKLQkgKiBob3cg
bG9uZyB0aGUgTVVYIGNvbmZpZyB3aWxsIHRha2UgdG8gYXBwbHkgYW5kIGJlc2lkZXMKLQkgKiBz
ZWVpbmcgaW52YWxpZCByZXBvcnRzIHdlIGRvbid0IGtub3cgb2YgYSByZWxpYWJsZSB3YXkgdG8K
LQkgKiBleHBsaWNpdGx5IGNoZWNrIHRoYXQgdGhlIE1VWCBjb25maWcgaGFzIGxhbmRlZC4KLQkg
KgotCSAqIEl0J3MgZXZlbiBwb3NzaWJsZSB3ZSd2ZSBtaXNzIGNoYXJhY3Rlcml6ZWQgdGhlIHVu
ZGVybHlpbmcKLQkgKiBwcm9ibGVtIC0gaXQganVzdCBzZWVtcyBsaWtlIHRoZSBzaW1wbGVzdCBl
eHBsYW5hdGlvbiB3aHkKLQkgKiBhIGRlbGF5IGF0IHRoaXMgbG9jYXRpb24gd291bGQgbWl0aWdh
dGUgYW55IGludmFsaWQgcmVwb3J0cy4KLQkgKi8KLQl1c2xlZXBfcmFuZ2UoMTUwMDAsIDIwMDAw
KTsKLQotCWNvbmZpZ19vYV9yZWdzKGRldl9wcml2LCBvYV9jb25maWctPmJfY291bnRlcl9yZWdz
LAotCQkgICAgICAgb2FfY29uZmlnLT5iX2NvdW50ZXJfcmVnc19sZW4pOwotCi0JcmV0dXJuIDA7
CisJcmV0dXJuIGVtaXRfb2FfY29uZmlnKGRldl9wcml2LCBzdHJlYW0pOwogfQogCiBzdGF0aWMg
dm9pZCBnZW44X2Rpc2FibGVfbWV0cmljX3NldChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYpCkBAIC0yMzQxLDcgKzIzNTcsOSBAQCBzdGF0aWMgaW50IGk5MTVfb2Ffc3RyZWFtX2lu
aXQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKIAkJCSAgICAgICBzdHJ1Y3QgcGVy
Zl9vcGVuX3Byb3BlcnRpZXMgKnByb3BzKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiA9IHN0cmVhbS0+ZGV2X3ByaXY7CisJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Qg
Km9iajsKIAlpbnQgZm9ybWF0X3NpemU7CisJbG9uZyB0aW1lb3V0OwogCWludCByZXQ7CiAKIAkv
KiBJZiB0aGUgc3lzZnMgbWV0cmljcy8gZGlyZWN0b3J5IHdhc24ndCByZWdpc3RlcmVkIGZvciBz
b21lCkBAIC0yNDI1LDEzICsyNDQzLDYgQEAgc3RhdGljIGludCBpOTE1X29hX3N0cmVhbV9pbml0
KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCiAJCX0KIAl9CiAKLQlyZXQgPSBpOTE1
X3BlcmZfZ2V0X29hX2NvbmZpZyhkZXZfcHJpdiwgcHJvcHMtPm1ldHJpY3Nfc2V0LAotCQkJCSAg
ICAgICZzdHJlYW0tPm9hX2NvbmZpZywgTlVMTCk7Ci0JaWYgKHJldCkgewotCQlEUk1fREVCVUco
IkludmFsaWQgT0EgY29uZmlnIGlkPSVpXG4iLCBwcm9wcy0+bWV0cmljc19zZXQpOwotCQlnb3Rv
IGVycl9jb25maWc7Ci0JfQotCiAJcmV0ID0gYWxsb2Nfbm9hX3dhaXQoZGV2X3ByaXYpOwogCWlm
IChyZXQpIHsKIAkJRFJNX0RFQlVHKCJVbmFibGUgdG8gYWxsb2NhdGUgTk9BIHdhaXQgYmF0Y2gg
YnVmZmVyXG4iKTsKQEAgLTI0NTcsNDcgKzI0NjgsOTAgQEAgc3RhdGljIGludCBpOTE1X29hX3N0
cmVhbV9pbml0KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCiAJaWYgKHJldCkKIAkJ
Z290byBlcnJfb2FfYnVmX2FsbG9jOwogCisJcmV0ID0gaTkxNV9wZXJmX2dldF9vYV9jb25maWco
ZGV2X3ByaXYsIHByb3BzLT5tZXRyaWNzX3NldCwKKwkJCQkgICAgICAmc3RyZWFtLT5vYV9jb25m
aWcsICZvYmopOworCWlmIChyZXQpIHsKKwkJRFJNX0RFQlVHKCJJbnZhbGlkIE9BIGNvbmZpZyBp
ZD0laVxuIiwgcHJvcHMtPm1ldHJpY3Nfc2V0KTsKKwkJZ290byBlcnJfY29uZmlnOworCX0KKwor
CS8qCisJICogV2UganVzdCBuZWVkIHRoZSBidWZmZXIgdG8gYmUgY3JlYXRlZCwgYnV0IG5vdCBv
dXIgb3duIHJlZmVyZW5jZSBvbgorCSAqIGl0IGFzIHRoZSBvYV9jb25maWcgYWxyZWFkeSBoYXMg
b25lLgorCSAqLworCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKKworCXN0cmVhbS0+aW5pdGlh
bF9jb25maWdfcnEgPQorCQlpOTE1X3JlcXVlc3RfY3JlYXRlKGRldl9wcml2LT5lbmdpbmVbUkNT
MF0tPmtlcm5lbF9jb250ZXh0KTsKKwlpZiAoSVNfRVJSKHN0cmVhbS0+aW5pdGlhbF9jb25maWdf
cnEpKSB7CisJCXJldCA9IFBUUl9FUlIoc3RyZWFtLT5pbml0aWFsX2NvbmZpZ19ycSk7CisJCWdv
dG8gZXJyX2luaXRpYWxfY29uZmlnOworCX0KKworCXN0cmVhbS0+b3BzID0gJmk5MTVfb2Ffc3Ry
ZWFtX29wczsKKwogCXJldCA9IGk5MTVfbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKCZkZXZfcHJp
di0+ZHJtKTsKIAlpZiAocmV0KQogCQlnb3RvIGVycl9sb2NrOwogCi0Jc3RyZWFtLT5vcHMgPSAm
aTkxNV9vYV9zdHJlYW1fb3BzOworCXJldCA9IGk5MTVfYWN0aXZlX3JlcXVlc3Rfc2V0KCZkZXZf
cHJpdi0+ZW5naW5lW1JDUzBdLT5sYXN0X29hX2NvbmZpZywKKwkJCQkgICAgICBzdHJlYW0tPmlu
aXRpYWxfY29uZmlnX3JxKTsKKwlpZiAocmV0KSB7CisJCW11dGV4X3VubG9jaygmZGV2X3ByaXYt
PmRybS5zdHJ1Y3RfbXV0ZXgpOworCQlnb3RvIGVycl9sb2NrOworCX0KKwogCWRldl9wcml2LT5w
ZXJmLm9hLmV4Y2x1c2l2ZV9zdHJlYW0gPSBzdHJlYW07CiAKKwltdXRleF91bmxvY2soJmRldl9w
cml2LT5kcm0uc3RydWN0X211dGV4KTsKKwogCXJldCA9IGRldl9wcml2LT5wZXJmLm9hLm9wcy5l
bmFibGVfbWV0cmljX3NldChzdHJlYW0pOwogCWlmIChyZXQpIHsKIAkJRFJNX0RFQlVHKCJVbmFi
bGUgdG8gZW5hYmxlIG1ldHJpYyBzZXRcbiIpOwogCQlnb3RvIGVycl9lbmFibGU7CiAJfQogCi0J
RFJNX0RFQlVHKCJvcGVuaW5nIHN0cmVhbSBvYSBjb25maWcgdXVpZD0lc1xuIiwgc3RyZWFtLT5v
YV9jb25maWctPnV1aWQpOworCWk5MTVfcmVxdWVzdF9nZXQoc3RyZWFtLT5pbml0aWFsX2NvbmZp
Z19ycSk7CiAKLQltdXRleF91bmxvY2soJmRldl9wcml2LT5kcm0uc3RydWN0X211dGV4KTsKKwlp
OTE1X3JlcXVlc3RfYWRkKHN0cmVhbS0+aW5pdGlhbF9jb25maWdfcnEpOworCisJdGltZW91dCA9
IGk5MTVfcmVxdWVzdF93YWl0KHN0cmVhbS0+aW5pdGlhbF9jb25maWdfcnEsCisJCQkJICAgIEk5
MTVfV0FJVF9JTlRFUlJVUFRJQkxFLAorCQkJCSAgICBNQVhfU0NIRURVTEVfVElNRU9VVCk7CisJ
aTkxNV9yZXF1ZXN0X3B1dChzdHJlYW0tPmluaXRpYWxfY29uZmlnX3JxKTsKKwlzdHJlYW0tPmlu
aXRpYWxfY29uZmlnX3JxID0gTlVMTDsKKworCXJldCA9IHRpbWVvdXQgPCAwID8gdGltZW91dCA6
IDA7CisJaWYgKHJldCkKKwkJZ290byBlcnJfZW5hYmxlOworCisJRFJNX0RFQlVHKCJvcGVuaW5n
IHN0cmVhbSBvYSBjb25maWcgdXVpZD0lc1xuIiwgc3RyZWFtLT5vYV9jb25maWctPnV1aWQpOwog
CiAJcmV0dXJuIDA7CiAKIGVycl9lbmFibGU6CisJbXV0ZXhfbG9jaygmZGV2X3ByaXYtPmRybS5z
dHJ1Y3RfbXV0ZXgpOwogCWRldl9wcml2LT5wZXJmLm9hLmV4Y2x1c2l2ZV9zdHJlYW0gPSBOVUxM
OwotCWRldl9wcml2LT5wZXJmLm9hLm9wcy5kaXNhYmxlX21ldHJpY19zZXQoZGV2X3ByaXYpOwog
CW11dGV4X3VubG9jaygmZGV2X3ByaXYtPmRybS5zdHJ1Y3RfbXV0ZXgpOworCWRldl9wcml2LT5w
ZXJmLm9hLm9wcy5kaXNhYmxlX21ldHJpY19zZXQoZGV2X3ByaXYpOwogCiBlcnJfbG9jazoKLQlm
cmVlX29hX2J1ZmZlcihkZXZfcHJpdik7CisJaTkxNV9yZXF1ZXN0X2FkZChzdHJlYW0tPmluaXRp
YWxfY29uZmlnX3JxKTsKIAotZXJyX29hX2J1Zl9hbGxvYzoKK2Vycl9pbml0aWFsX2NvbmZpZzoK
IAlpOTE1X29hX2NvbmZpZ19wdXQoc3RyZWFtLT5vYV9jb25maWcpOworCWk5MTVfb2FfY29uZmln
X2Rpc3Bvc2VfYnVmZmVycyhkZXZfcHJpdik7CisKK2Vycl9jb25maWc6CisJZnJlZV9vYV9idWZm
ZXIoZGV2X3ByaXYpOwogCitlcnJfb2FfYnVmX2FsbG9jOgogCWludGVsX3VuY29yZV9mb3JjZXdh
a2VfcHV0KCZkZXZfcHJpdi0+dW5jb3JlLCBGT1JDRVdBS0VfQUxMKTsKIAlpbnRlbF9ydW50aW1l
X3BtX3B1dCgmZGV2X3ByaXYtPnJ1bnRpbWVfcG0sIHN0cmVhbS0+d2FrZXJlZik7CiAKLQltdXRl
eF9sb2NrKCZkZXZfcHJpdi0+ZHJtLnN0cnVjdF9tdXRleCk7Ci0JaTkxNV92bWFfdW5waW5fYW5k
X3JlbGVhc2UoJmRldl9wcml2LT5wZXJmLm9hLm5vYV93YWl0LCAwKTsKLQltdXRleF91bmxvY2so
JmRldl9wcml2LT5kcm0uc3RydWN0X211dGV4KTsKKwlmcmVlX25vYV93YWl0KGRldl9wcml2KTsK
IAogZXJyX25vYV93YWl0X2FsbG9jOgotCWk5MTVfb2FfY29uZmlnX3B1dChzdHJlYW0tPm9hX2Nv
bmZpZyk7Ci0KLWVycl9jb25maWc6CiAJaWYgKHN0cmVhbS0+Y3R4KQogCQlvYV9wdXRfcmVuZGVy
X2N0eF9pZChzdHJlYW0pOwogCkBAIC0yODU5LDIwICsyOTEzLDEzIEBAIHN0YXRpYyBpbnQgaTkx
NV9wZXJmX3JlbGVhc2Uoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGZpbGUgKmZpbGUpCiB7
CiAJc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSA9IGZpbGUtPnByaXZhdGVfZGF0YTsK
IAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSBzdHJlYW0tPmRldl9wcml2Owot
CXN0cnVjdCBpOTE1X29hX2NvbmZpZyAqb2FfY29uZmlnLCAqbmV4dDsKIAogCW11dGV4X2xvY2so
JmRldl9wcml2LT5wZXJmLmxvY2spOwogCiAJaTkxNV9wZXJmX2Rlc3Ryb3lfbG9ja2VkKHN0cmVh
bSk7CiAKIAkvKiBEaXNwb3NlIG9mIGFsbCBvYSBjb25maWcgYmF0Y2ggYnVmZmVycy4gKi8KLQlt
dXRleF9sb2NrKCZkZXZfcHJpdi0+cGVyZi5tZXRyaWNzX2xvY2spOwotCWxpc3RfZm9yX2VhY2hf
ZW50cnlfc2FmZShvYV9jb25maWcsIG5leHQsICZkZXZfcHJpdi0+cGVyZi5tZXRyaWNzX2J1ZmZl
cnMsIHZtYV9saW5rKSB7Ci0JCWxpc3RfZGVsKCZvYV9jb25maWctPnZtYV9saW5rKTsKLQkJaTkx
NV9nZW1fb2JqZWN0X3B1dChvYV9jb25maWctPm9iaik7Ci0JCW9hX2NvbmZpZy0+b2JqID0gTlVM
TDsKLQl9Ci0JbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+cGVyZi5tZXRyaWNzX2xvY2spOworCWk5
MTVfb2FfY29uZmlnX2Rpc3Bvc2VfYnVmZmVycyhkZXZfcHJpdik7CiAKIAltdXRleF91bmxvY2so
JmRldl9wcml2LT5wZXJmLmxvY2spOwogCi0tIAoyLjIxLjAuMzkyLmdmOGY2Nzg3MTU5ZQoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1h
aWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

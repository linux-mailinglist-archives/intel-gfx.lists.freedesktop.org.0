Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D68FF80208
	for <lists+intel-gfx@lfdr.de>; Fri,  2 Aug 2019 22:51:47 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 955196E642;
	Fri,  2 Aug 2019 20:51:42 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2D00A6E49C
 for <intel-gfx@lists.freedesktop.org>; Fri,  2 Aug 2019 20:51:37 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 02 Aug 2019 13:51:35 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,339,1559545200"; d="scan'208";a="175021820"
Received: from jssummer-desk.jf.intel.com ([10.165.21.197])
 by fmsmga007.fm.intel.com with ESMTP; 02 Aug 2019 13:51:35 -0700
From: Stuart Summers <stuart.summers@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  2 Aug 2019 13:51:34 -0700
Message-Id: <20190802205134.303-11-stuart.summers@intel.com>
X-Mailer: git-send-email 2.21.0.5.gaeb582a983
In-Reply-To: <20190802205134.303-1-stuart.summers@intel.com>
References: <20190802205134.303-1-stuart.summers@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 10/10] drm/i915: Expand subslice mask
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Q3VycmVudGx5LCB0aGUgc3Vic2xpY2VfbWFzayBydW50aW1lIHBhcmFtZXRlciBpcyBzdG9yZWQg
YXMgYW4KYXJyYXkgb2Ygc3Vic2xpY2VzIHBlciBzbGljZS4gRXhwYW5kIHRoZSBzdWJzbGljZSBt
YXNrIGFycmF5IHRvCmJldHRlciBtYXRjaCB3aGF0IGlzIHByZXNlbnRlZCB0byB1c2Vyc3BhY2Ug
dGhyb3VnaCB0aGUKSTkxNV9RVUVSWV9UT1BPTE9HWV9JTkZPIGlvY3RsLiBUaGUgaW5kZXggaW50
byB0aGlzIGFycmF5IGlzCnRoZW4gY2FsY3VsYXRlZDoKICBzbGljZSAqIHN1YnNsaWNlIHN0cmlk
ZSArIHN1YnNsaWNlIGluZGV4IC8gOAoKdjI6IEZpeCAzMi1iaXQgYnVpbGQKdjM6IEZpeCB0eXBv
IG9uIGhhc3dlbGwgYW5kIHVwZGF0ZSBTU0VVIHdvcmthcm91bmQgdG8gY29ycmVjdGx5CiAgICBw
cmludCBzdWJzbGljZSBtYXNrIG9uIGVycm9yLgoKU2lnbmVkLW9mZi1ieTogU3R1YXJ0IFN1bW1l
cnMgPHN0dWFydC5zdW1tZXJzQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9zc2V1LmMgICAgICAgIHwgMjcgKysrKysrKysrKysrKysrKysrKystCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmggICAgICAgIHwgIDUgKysrLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYyB8ICA1ICsrLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jICAgICAgICAgfCAgNSArKystCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jICAgIHwgIDggKysrLS0tCiA1IGZpbGVzIGNoYW5n
ZWQsIDQwIGluc2VydGlvbnMoKyksIDEwIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX3NzZXUuYwppbmRleCA2MDdjMTQ0NzI4N2MuLmU0MjZmMzRiNGRkNiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuYwpAQCAtMzAsNiArMzAsMzEgQEAgaW50ZWxfc3NldV9z
dWJzbGljZV90b3RhbChjb25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSkKIAlyZXR1cm4g
dG90YWw7CiB9CiAKK3UzMiBpbnRlbF9zc2V1X2dldF9zdWJzbGljZXMoY29uc3Qgc3RydWN0IHNz
ZXVfZGV2X2luZm8gKnNzZXUsIHU4IHNsaWNlKQoreworCWludCBpLCBvZmZzZXQgPSBzbGljZSAq
IHNzZXUtPnNzX3N0cmlkZTsKKwl1MzIgbWFzayA9IDA7CisKKwlpZiAoc2xpY2UgPj0gc3NldS0+
bWF4X3NsaWNlcykgeworCQlEUk1fRVJST1IoIiVzOiBpbnZhbGlkIHNsaWNlICVkLCBtYXg6ICVk
XG4iLAorCQkJICBfX2Z1bmNfXywgc2xpY2UsIHNzZXUtPm1heF9zbGljZXMpOworCQlyZXR1cm4g
MDsKKwl9CisKKwlpZiAoc3NldS0+c3Nfc3RyaWRlID4gc2l6ZW9mKG1hc2spKSB7CisJCURSTV9F
UlJPUigiJXM6IGludmFsaWQgc3Vic2xpY2Ugc3RyaWRlICVkLCBtYXg6ICV1XG4iLAorCQkJICBf
X2Z1bmNfXywgc3NldS0+c3Nfc3RyaWRlLAorCQkJICh1bnNpZ25lZCBpbnQpc2l6ZW9mKG1hc2sp
KTsKKwkJcmV0dXJuIDA7CisJfQorCisJZm9yIChpID0gMDsgaSA8IHNzZXUtPnNzX3N0cmlkZTsg
aSsrKQorCQltYXNrIHw9ICh1MzIpc3NldS0+c3Vic2xpY2VfbWFza1tvZmZzZXQgKyBpXSA8PAor
CQkJaSAqIEJJVFNfUEVSX0JZVEU7CisKKwlyZXR1cm4gbWFzazsKK30KKwogdm9pZCBpbnRlbF9z
c2V1X3NldF9zdWJzbGljZXMoc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUsIGludCBzbGljZSwK
IAkJCSAgICAgIHUzMiBzc19tYXNrKQogewpAQCAtNDMsNyArNjgsNyBAQCB2b2lkIGludGVsX3Nz
ZXVfc2V0X3N1YnNsaWNlcyhzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSwgaW50IHNsaWNlLAog
dW5zaWduZWQgaW50CiBpbnRlbF9zc2V1X3N1YnNsaWNlc19wZXJfc2xpY2UoY29uc3Qgc3RydWN0
IHNzZXVfZGV2X2luZm8gKnNzZXUsIHU4IHNsaWNlKQogewotCXJldHVybiBod2VpZ2h0OChzc2V1
LT5zdWJzbGljZV9tYXNrW3NsaWNlXSk7CisJcmV0dXJuIGh3ZWlnaHQzMihpbnRlbF9zc2V1X2dl
dF9zdWJzbGljZXMoc3NldSwgc2xpY2UpKTsKIH0KIAogdTMyIGludGVsX3NzZXVfbWFrZV9ycGNz
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
c3NldS5oCmluZGV4IDBlY2MxYzM1YTdhMS4uMjI5MTc2NGI3ZGI1IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfc3NldS5oCkBAIC0xNSwxMCArMTUsMTEgQEAgc3RydWN0IGRybV9pOTE1X3By
aXZhdGU7CiAjZGVmaW5lIEdFTl9NQVhfU0xJQ0VTCQkoNikgLyogQ05MIHVwcGVyIGJvdW5kICov
CiAjZGVmaW5lIEdFTl9NQVhfU1VCU0xJQ0VTCSg4KSAvKiBJQ0wgdXBwZXIgYm91bmQgKi8KICNk
ZWZpbmUgR0VOX1NTRVVfU1RSSURFKG1heF9lbnRyaWVzKSBESVZfUk9VTkRfVVAobWF4X2VudHJp
ZXMsIEJJVFNfUEVSX0JZVEUpCisjZGVmaW5lIEdFTl9NQVhfU1VCU0xJQ0VfU1RSSURFIEdFTl9T
U0VVX1NUUklERShHRU5fTUFYX1NVQlNMSUNFUykKIAogc3RydWN0IHNzZXVfZGV2X2luZm8gewog
CXU4IHNsaWNlX21hc2s7Ci0JdTggc3Vic2xpY2VfbWFza1tHRU5fTUFYX1NMSUNFU107CisJdTgg
c3Vic2xpY2VfbWFza1tHRU5fTUFYX1NMSUNFUyAqIEdFTl9NQVhfU1VCU0xJQ0VfU1RSSURFXTsK
IAl1MTYgZXVfdG90YWw7CiAJdTggZXVfcGVyX3N1YnNsaWNlOwogCXU4IG1pbl9ldV9pbl9wb29s
OwpAQCAtODUsNiArODYsOCBAQCBpbnRlbF9zc2V1X3N1YnNsaWNlX3RvdGFsKGNvbnN0IHN0cnVj
dCBzc2V1X2Rldl9pbmZvICpzc2V1KTsKIHVuc2lnbmVkIGludAogaW50ZWxfc3NldV9zdWJzbGlj
ZXNfcGVyX3NsaWNlKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1LCB1OCBzbGljZSk7
CiAKK3UzMiAgaW50ZWxfc3NldV9nZXRfc3Vic2xpY2VzKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9p
bmZvICpzc2V1LCB1OCBzbGljZSk7CisKIHZvaWQgaW50ZWxfc3NldV9zZXRfc3Vic2xpY2VzKHN0
cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1LCBpbnQgc2xpY2UsCiAJCQkgICAgICB1MzIgc3NfbWFz
ayk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91
bmRzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jCmluZGV4
IDcwNGFjZTAxZTdmNS4uNWJmYWU3ZjcxYjgzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX3dvcmthcm91bmRzLmMKQEAgLTc5NCwxMSArNzk0LDEwIEBAIHdhX2luaXRfbWNyKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwpCiAJ
fQogCiAJc2xpY2UgPSBmbHMoc3NldS0+c2xpY2VfbWFzaykgLSAxOwotCUdFTV9CVUdfT04oc2xp
Y2UgPj0gQVJSQVlfU0laRShzc2V1LT5zdWJzbGljZV9tYXNrKSk7Ci0Jc3Vic2xpY2UgPSBmbHMo
bDNfZW4gJiBzc2V1LT5zdWJzbGljZV9tYXNrW3NsaWNlXSk7CisJc3Vic2xpY2UgPSBmbHMobDNf
ZW4gJiBpbnRlbF9zc2V1X2dldF9zdWJzbGljZXMoc3NldSwgc2xpY2UpKTsKIAlpZiAoIXN1YnNs
aWNlKSB7CiAJCURSTV9XQVJOKCJObyBjb21tb24gaW5kZXggZm91bmQgYmV0d2VlbiBzdWJzbGlj
ZSBtYXNrICV4IGFuZCBMMyBiYW5rIG1hc2sgJXghXG4iLAotCQkJIHNzZXUtPnN1YnNsaWNlX21h
c2tbc2xpY2VdLCBsM19lbik7CisJCQkgaW50ZWxfc3NldV9nZXRfc3Vic2xpY2VzKHNzZXUsIHNs
aWNlKSwgbDNfZW4pOwogCQlzdWJzbGljZSA9IGZscyhsM19lbik7CiAJCVdBUk5fT04oIXN1YnNs
aWNlKTsKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCmluZGV4IDA4Mzc2N2E5ODVl
Zi4uODY2NmNlNTE2NmI0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rl
YnVnZnMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYwpAQCAtMzk0
OSwxMyArMzk0OSwxNiBAQCBzdGF0aWMgdm9pZCBnZW45X3NzZXVfZGV2aWNlX3N0YXR1cyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAKIAkJZm9yIChzcyA9IDA7IHNzIDwgaW5m
by0+c3NldS5tYXhfc3Vic2xpY2VzOyBzcysrKSB7CiAJCQl1bnNpZ25lZCBpbnQgZXVfY250Owor
CQkJdTggc3NfaWR4ID0gcyAqIGluZm8tPnNzZXUuc3Nfc3RyaWRlICsKKwkJCQkgICAgc3MgLyBC
SVRTX1BFUl9CWVRFOwogCiAJCQlpZiAoSVNfR0VOOV9MUChkZXZfcHJpdikpIHsKIAkJCQlpZiAo
IShzX3JlZ1tzXSAmIChHRU45X1BHQ1RMX1NTX0FDSyhzcykpKSkKIAkJCQkJLyogc2tpcCBkaXNh
YmxlZCBzdWJzbGljZSAqLwogCQkJCQljb250aW51ZTsKIAotCQkJCXNzZXUtPnN1YnNsaWNlX21h
c2tbc10gfD0gQklUKHNzKTsKKwkJCQlzc2V1LT5zdWJzbGljZV9tYXNrW3NzX2lkeF0gfD0KKwkJ
CQkJQklUKHNzICUgQklUU19QRVJfQllURSk7CiAJCQl9CiAKIAkJCWV1X2NudCA9IDIgKiBod2Vp
Z2h0MzIoZXVfcmVnWzIqcyArIHNzLzJdICYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2ludGVsX2RldmljZV9pbmZvLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZp
Y2VfaW5mby5jCmluZGV4IDY2ZmU2ODg3NWQxYi4uN2ZlM2FmZDBhNzM4IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMKQEAgLTkzLDkgKzkzLDkgQEAgc3RhdGljIHZv
aWQgc3NldV9kdW1wKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1LCBzdHJ1Y3QgZHJt
X3ByaW50ZXIgKnApCiAJCSAgIGh3ZWlnaHQ4KHNzZXUtPnNsaWNlX21hc2spLCBzc2V1LT5zbGlj
ZV9tYXNrKTsKIAlkcm1fcHJpbnRmKHAsICJzdWJzbGljZSB0b3RhbDogJXVcbiIsIGludGVsX3Nz
ZXVfc3Vic2xpY2VfdG90YWwoc3NldSkpOwogCWZvciAocyA9IDA7IHMgPCBzc2V1LT5tYXhfc2xp
Y2VzOyBzKyspIHsKLQkJZHJtX3ByaW50ZihwLCAic2xpY2UlZDogJXUgc3Vic2xpY2VzLCBtYXNr
PSUwNHhcbiIsCisJCWRybV9wcmludGYocCwgInNsaWNlJWQ6ICV1IHN1YnNsaWNlcywgbWFzaz0l
MDh4XG4iLAogCQkJICAgcywgaW50ZWxfc3NldV9zdWJzbGljZXNfcGVyX3NsaWNlKHNzZXUsIHMp
LAotCQkJICAgc3NldS0+c3Vic2xpY2VfbWFza1tzXSk7CisJCQkgICBpbnRlbF9zc2V1X2dldF9z
dWJzbGljZXMoc3NldSwgcykpOwogCX0KIAlkcm1fcHJpbnRmKHAsICJFVSB0b3RhbDogJXVcbiIs
IHNzZXUtPmV1X3RvdGFsKTsKIAlkcm1fcHJpbnRmKHAsICJFVSBwZXIgc3Vic2xpY2U6ICV1XG4i
LCBzc2V1LT5ldV9wZXJfc3Vic2xpY2UpOwpAQCAtMTU5LDkgKzE1OSw5IEBAIHZvaWQgaW50ZWxf
ZGV2aWNlX2luZm9fZHVtcF90b3BvbG9neShjb25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3Nl
dSwKIAl9CiAKIAlmb3IgKHMgPSAwOyBzIDwgc3NldS0+bWF4X3NsaWNlczsgcysrKSB7Ci0JCWRy
bV9wcmludGYocCwgInNsaWNlJWQ6ICV1IHN1YnNsaWNlKHMpICgweCVoaHgpOlxuIiwKKwkJZHJt
X3ByaW50ZihwLCAic2xpY2UlZDogJXUgc3Vic2xpY2UocykgKDB4JTA4eCk6XG4iLAogCQkJICAg
cywgaW50ZWxfc3NldV9zdWJzbGljZXNfcGVyX3NsaWNlKHNzZXUsIHMpLAotCQkJICAgc3NldS0+
c3Vic2xpY2VfbWFza1tzXSk7CisJCQkgICBpbnRlbF9zc2V1X2dldF9zdWJzbGljZXMoc3NldSwg
cykpOwogCiAJCWZvciAoc3MgPSAwOyBzcyA8IHNzZXUtPm1heF9zdWJzbGljZXM7IHNzKyspIHsK
IAkJCXUxNiBlbmFibGVkX2V1cyA9IHNzZXVfZ2V0X2V1cyhzc2V1LCBzLCBzcyk7Ci0tIAoyLjIx
LjAuNS5nYWViNTgyYTk4MwoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0
b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50
ZWwtZ2Z4

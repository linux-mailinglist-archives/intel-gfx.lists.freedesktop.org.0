Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8C72811C0A
	for <lists+intel-gfx@lfdr.de>; Thu,  2 May 2019 17:01:10 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D1F2989718;
	Thu,  2 May 2019 15:01:08 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8B6B189722
 for <intel-gfx@lists.freedesktop.org>; Thu,  2 May 2019 15:01:07 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 02 May 2019 08:01:07 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.60,422,1549958400"; d="scan'208";a="169963778"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.150])
 by fmsmga001.fm.intel.com with ESMTP; 02 May 2019 08:01:06 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu,  2 May 2019 18:02:46 +0300
Message-Id: <8c197872384fc35442b738c21ba0da9336e02a85.1556809195.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1556809195.git.jani.nikula@intel.com>
References: <cover.1556809195.git.jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH 12/13] drm/i915: move more generic utils to
 i915_utils.h
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UmVkdWNlIGNsdXR0ZXIgZnJvbSBpOTE1X2Rydi5oIGFuZCBpbnRlbF9kcnYuaC4KClNpZ25lZC1v
ZmYtYnk6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgIHwgIDQ0IC0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV91dGlscy5oIHwgMTUzICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJ2LmggIHwgMTA4IC0tLS0tLS0tLS0tLS0tLS0t
LS0tLQogMyBmaWxlcyBjaGFuZ2VkLCAxNTMgaW5zZXJ0aW9ucygrKSwgMTUyIGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IDVmNjVjNy4uZDE2NzA1IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZHJ2LmgKQEAgLTMzNTcsNTAgKzMzNTcsNiBAQCBleHRlcm4gdm9pZCBpbnRlbF9k
aXNwbGF5X3ByaW50X2Vycm9yX3N0YXRlKHN0cnVjdCBkcm1faTkxNV9lcnJvcl9zdGF0ZV9idWYg
KmUsCiAjZGVmaW5lIElOVEVMX0JST0FEQ0FTVF9SR0JfRlVMTCAxCiAjZGVmaW5lIElOVEVMX0JS
T0FEQ0FTVF9SR0JfTElNSVRFRCAyCiAKLXN0YXRpYyBpbmxpbmUgdW5zaWduZWQgbG9uZyBtc2Vj
c190b19qaWZmaWVzX3RpbWVvdXQoY29uc3QgdW5zaWduZWQgaW50IG0pCi17Ci0JdW5zaWduZWQg
bG9uZyBqID0gbXNlY3NfdG9famlmZmllcyhtKTsKLQotCXJldHVybiBtaW5fdCh1bnNpZ25lZCBs
b25nLCBNQVhfSklGRllfT0ZGU0VULCBqICsgMSk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdW5zaWdu
ZWQgbG9uZyBuc2Vjc190b19qaWZmaWVzX3RpbWVvdXQoY29uc3QgdTY0IG4pCi17Ci0JLyogbnNl
Y3NfdG9famlmZmllczY0KCkgZG9lcyBub3QgZ3VhcmQgYWdhaW5zdCBvdmVyZmxvdyAqLwotCWlm
IChOU0VDX1BFUl9TRUMgJSBIWiAmJgotCSAgICBkaXZfdTY0KG4sIE5TRUNfUEVSX1NFQykgPj0g
TUFYX0pJRkZZX09GRlNFVCAvIEhaKQotCQlyZXR1cm4gTUFYX0pJRkZZX09GRlNFVDsKLQotICAg
ICAgICByZXR1cm4gbWluX3QodTY0LCBNQVhfSklGRllfT0ZGU0VULCBuc2Vjc190b19qaWZmaWVz
NjQobikgKyAxKTsKLX0KLQotLyoKLSAqIElmIHlvdSBuZWVkIHRvIHdhaXQgWCBtaWxsaXNlY29u
ZHMgYmV0d2VlbiBldmVudHMgQSBhbmQgQiwgYnV0IGV2ZW50IEIKLSAqIGRvZXNuJ3QgaGFwcGVu
IGV4YWN0bHkgYWZ0ZXIgZXZlbnQgQSwgeW91IHJlY29yZCB0aGUgdGltZXN0YW1wIChqaWZmaWVz
KSBvZgotICogd2hlbiBldmVudCBBIGhhcHBlbmVkLCB0aGVuIGp1c3QgYmVmb3JlIGV2ZW50IEIg
eW91IGNhbGwgdGhpcyBmdW5jdGlvbiBhbmQKLSAqIHBhc3MgdGhlIHRpbWVzdGFtcCBhcyB0aGUg
Zmlyc3QgYXJndW1lbnQsIGFuZCBYIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQuCi0gKi8KLXN0YXRp
YyBpbmxpbmUgdm9pZAotd2FpdF9yZW1haW5pbmdfbXNfZnJvbV9qaWZmaWVzKHVuc2lnbmVkIGxv
bmcgdGltZXN0YW1wX2ppZmZpZXMsIGludCB0b193YWl0X21zKQotewotCXVuc2lnbmVkIGxvbmcg
dGFyZ2V0X2ppZmZpZXMsIHRtcF9qaWZmaWVzLCByZW1haW5pbmdfamlmZmllczsKLQotCS8qCi0J
ICogRG9uJ3QgcmUtcmVhZCB0aGUgdmFsdWUgb2YgImppZmZpZXMiIGV2ZXJ5IHRpbWUgc2luY2Ug
aXQgbWF5IGNoYW5nZQotCSAqIGJlaGluZCBvdXIgYmFjayBhbmQgYnJlYWsgdGhlIG1hdGguCi0J
ICovCi0JdG1wX2ppZmZpZXMgPSBqaWZmaWVzOwotCXRhcmdldF9qaWZmaWVzID0gdGltZXN0YW1w
X2ppZmZpZXMgKwotCQkJIG1zZWNzX3RvX2ppZmZpZXNfdGltZW91dCh0b193YWl0X21zKTsKLQot
CWlmICh0aW1lX2FmdGVyKHRhcmdldF9qaWZmaWVzLCB0bXBfamlmZmllcykpIHsKLQkJcmVtYWlu
aW5nX2ppZmZpZXMgPSB0YXJnZXRfamlmZmllcyAtIHRtcF9qaWZmaWVzOwotCQl3aGlsZSAocmVt
YWluaW5nX2ppZmZpZXMpCi0JCQlyZW1haW5pbmdfamlmZmllcyA9Ci0JCQkgICAgc2NoZWR1bGVf
dGltZW91dF91bmludGVycnVwdGlibGUocmVtYWluaW5nX2ppZmZpZXMpOwotCX0KLX0KLQogdm9p
ZCBpOTE1X21lbWNweV9pbml0X2Vhcmx5KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dik7CiBib29sIGk5MTVfbWVtY3B5X2Zyb21fd2Modm9pZCAqZHN0LCBjb25zdCB2b2lkICpzcmMs
IHVuc2lnbmVkIGxvbmcgbGVuKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV91dGlscy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV91dGlscy5oCmluZGV4IDI2
MTE3Yi4uYzg0OWNmYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV91dGls
cy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdXRpbHMuaApAQCAtMjYsNiArMjYs
NyBAQAogI2RlZmluZSBfX0k5MTVfVVRJTFNfSAogCiAjaW5jbHVkZSA8bGludXgvbGlzdC5oPgor
I2luY2x1ZGUgPGxpbnV4L3NjaGVkLmg+CiAjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4KICNpbmNs
dWRlIDxsaW51eC93b3JrcXVldWUuaD4KIApAQCAtMTc2LDYgKzE3NywxNTggQEAgc3RhdGljIGlu
bGluZSB2b2lkIGRyYWluX2RlbGF5ZWRfd29yayhzdHJ1Y3QgZGVsYXllZF93b3JrICpkdykKIAl9
IHdoaWxlIChkZWxheWVkX3dvcmtfcGVuZGluZyhkdykpOwogfQogCitzdGF0aWMgaW5saW5lIHVu
c2lnbmVkIGxvbmcgbXNlY3NfdG9famlmZmllc190aW1lb3V0KGNvbnN0IHVuc2lnbmVkIGludCBt
KQoreworCXVuc2lnbmVkIGxvbmcgaiA9IG1zZWNzX3RvX2ppZmZpZXMobSk7CisKKwlyZXR1cm4g
bWluX3QodW5zaWduZWQgbG9uZywgTUFYX0pJRkZZX09GRlNFVCwgaiArIDEpOworfQorCitzdGF0
aWMgaW5saW5lIHVuc2lnbmVkIGxvbmcgbnNlY3NfdG9famlmZmllc190aW1lb3V0KGNvbnN0IHU2
NCBuKQoreworCS8qIG5zZWNzX3RvX2ppZmZpZXM2NCgpIGRvZXMgbm90IGd1YXJkIGFnYWluc3Qg
b3ZlcmZsb3cgKi8KKwlpZiAoTlNFQ19QRVJfU0VDICUgSFogJiYKKwkgICAgZGl2X3U2NChuLCBO
U0VDX1BFUl9TRUMpID49IE1BWF9KSUZGWV9PRkZTRVQgLyBIWikKKwkJcmV0dXJuIE1BWF9KSUZG
WV9PRkZTRVQ7CisKKyAgICAgICAgcmV0dXJuIG1pbl90KHU2NCwgTUFYX0pJRkZZX09GRlNFVCwg
bnNlY3NfdG9famlmZmllczY0KG4pICsgMSk7Cit9CisKKy8qCisgKiBJZiB5b3UgbmVlZCB0byB3
YWl0IFggbWlsbGlzZWNvbmRzIGJldHdlZW4gZXZlbnRzIEEgYW5kIEIsIGJ1dCBldmVudCBCCisg
KiBkb2Vzbid0IGhhcHBlbiBleGFjdGx5IGFmdGVyIGV2ZW50IEEsIHlvdSByZWNvcmQgdGhlIHRp
bWVzdGFtcCAoamlmZmllcykgb2YKKyAqIHdoZW4gZXZlbnQgQSBoYXBwZW5lZCwgdGhlbiBqdXN0
IGJlZm9yZSBldmVudCBCIHlvdSBjYWxsIHRoaXMgZnVuY3Rpb24gYW5kCisgKiBwYXNzIHRoZSB0
aW1lc3RhbXAgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCBhbmQgWCBhcyB0aGUgc2Vjb25kIGFyZ3Vt
ZW50LgorICovCitzdGF0aWMgaW5saW5lIHZvaWQKK3dhaXRfcmVtYWluaW5nX21zX2Zyb21famlm
Zmllcyh1bnNpZ25lZCBsb25nIHRpbWVzdGFtcF9qaWZmaWVzLCBpbnQgdG9fd2FpdF9tcykKK3sK
Kwl1bnNpZ25lZCBsb25nIHRhcmdldF9qaWZmaWVzLCB0bXBfamlmZmllcywgcmVtYWluaW5nX2pp
ZmZpZXM7CisKKwkvKgorCSAqIERvbid0IHJlLXJlYWQgdGhlIHZhbHVlIG9mICJqaWZmaWVzIiBl
dmVyeSB0aW1lIHNpbmNlIGl0IG1heSBjaGFuZ2UKKwkgKiBiZWhpbmQgb3VyIGJhY2sgYW5kIGJy
ZWFrIHRoZSBtYXRoLgorCSAqLworCXRtcF9qaWZmaWVzID0gamlmZmllczsKKwl0YXJnZXRfamlm
ZmllcyA9IHRpbWVzdGFtcF9qaWZmaWVzICsKKwkJCSBtc2Vjc190b19qaWZmaWVzX3RpbWVvdXQo
dG9fd2FpdF9tcyk7CisKKwlpZiAodGltZV9hZnRlcih0YXJnZXRfamlmZmllcywgdG1wX2ppZmZp
ZXMpKSB7CisJCXJlbWFpbmluZ19qaWZmaWVzID0gdGFyZ2V0X2ppZmZpZXMgLSB0bXBfamlmZmll
czsKKwkJd2hpbGUgKHJlbWFpbmluZ19qaWZmaWVzKQorCQkJcmVtYWluaW5nX2ppZmZpZXMgPQor
CQkJICAgIHNjaGVkdWxlX3RpbWVvdXRfdW5pbnRlcnJ1cHRpYmxlKHJlbWFpbmluZ19qaWZmaWVz
KTsKKwl9Cit9CisKKy8qKgorICogX193YWl0X2ZvciAtIG1hZ2ljIHdhaXQgbWFjcm8KKyAqCisg
KiBNYWNybyB0byBoZWxwIGF2b2lkIG9wZW4gY29kaW5nIGNoZWNrL3dhaXQvdGltZW91dCBwYXR0
ZXJucy4gTm90ZSB0aGF0IGl0J3MKKyAqIGltcG9ydGFudCB0aGF0IHdlIGNoZWNrIHRoZSBjb25k
aXRpb24gYWdhaW4gYWZ0ZXIgaGF2aW5nIHRpbWVkIG91dCwgc2luY2UgdGhlCisgKiB0aW1lb3V0
IGNvdWxkIGJlIGR1ZSB0byBwcmVlbXB0aW9uIG9yIHNpbWlsYXIgYW5kIHdlJ3ZlIG5ldmVyIGhh
ZCBhIGNoYW5jZSB0bworICogY2hlY2sgdGhlIGNvbmRpdGlvbiBiZWZvcmUgdGhlIHRpbWVvdXQu
CisgKi8KKyNkZWZpbmUgX193YWl0X2ZvcihPUCwgQ09ORCwgVVMsIFdtaW4sIFdtYXgpICh7IFwK
Kwljb25zdCBrdGltZV90IGVuZF9fID0ga3RpbWVfYWRkX25zKGt0aW1lX2dldF9yYXcoKSwgMTAw
MGxsICogKFVTKSk7IFwKKwlsb25nIHdhaXRfXyA9IChXbWluKTsgLyogcmVjb21tZW5kZWQgbWlu
IGZvciB1c2xlZXAgaXMgMTAgdXMgKi8JXAorCWludCByZXRfXzsJCQkJCQkJXAorCW1pZ2h0X3Ns
ZWVwKCk7CQkJCQkJCVwKKwlmb3IgKDs7KSB7CQkJCQkJCVwKKwkJY29uc3QgYm9vbCBleHBpcmVk
X18gPSBrdGltZV9hZnRlcihrdGltZV9nZXRfcmF3KCksIGVuZF9fKTsgXAorCQlPUDsJCQkJCQkJ
XAorCQkvKiBHdWFyYW50ZWUgQ09ORCBjaGVjayBwcmlvciB0byB0aW1lb3V0ICovCQlcCisJCWJh
cnJpZXIoKTsJCQkJCQlcCisJCWlmIChDT05EKSB7CQkJCQkJXAorCQkJcmV0X18gPSAwOwkJCQkJ
XAorCQkJYnJlYWs7CQkJCQkJXAorCQl9CQkJCQkJCVwKKwkJaWYgKGV4cGlyZWRfXykgewkJCQkJ
XAorCQkJcmV0X18gPSAtRVRJTUVET1VUOwkJCQlcCisJCQlicmVhazsJCQkJCQlcCisJCX0JCQkJ
CQkJXAorCQl1c2xlZXBfcmFuZ2Uod2FpdF9fLCB3YWl0X18gKiAyKTsJCQlcCisJCWlmICh3YWl0
X18gPCAoV21heCkpCQkJCQlcCisJCQl3YWl0X18gPDw9IDE7CQkJCQlcCisJfQkJCQkJCQkJXAor
CXJldF9fOwkJCQkJCQkJXAorfSkKKworI2RlZmluZSBfd2FpdF9mb3IoQ09ORCwgVVMsIFdtaW4s
IFdtYXgpCV9fd2FpdF9mb3IoLCAoQ09ORCksIChVUyksIChXbWluKSwgXAorCQkJCQkJICAgKFdt
YXgpKQorI2RlZmluZSB3YWl0X2ZvcihDT05ELCBNUykJCV93YWl0X2ZvcigoQ09ORCksIChNUykg
KiAxMDAwLCAxMCwgMTAwMCkKKworLyogSWYgQ09ORklHX1BSRUVNUFRfQ09VTlQgaXMgZGlzYWJs
ZWQsIGluX2F0b21pYygpIGFsd2F5cyByZXBvcnRzIGZhbHNlLiAqLworI2lmIGRlZmluZWQoQ09O
RklHX0RSTV9JOTE1X0RFQlVHKSAmJiBkZWZpbmVkKENPTkZJR19QUkVFTVBUX0NPVU5UKQorIyBk
ZWZpbmUgX1dBSVRfRk9SX0FUT01JQ19DSEVDSyhBVE9NSUMpIFdBUk5fT05fT05DRSgoQVRPTUlD
KSAmJiAhaW5fYXRvbWljKCkpCisjZWxzZQorIyBkZWZpbmUgX1dBSVRfRk9SX0FUT01JQ19DSEVD
SyhBVE9NSUMpIGRvIHsgfSB3aGlsZSAoMCkKKyNlbmRpZgorCisjZGVmaW5lIF93YWl0X2Zvcl9h
dG9taWMoQ09ORCwgVVMsIEFUT01JQykgXAorKHsgXAorCWludCBjcHUsIHJldCwgdGltZW91dCA9
IChVUykgKiAxMDAwOyBcCisJdTY0IGJhc2U7IFwKKwlfV0FJVF9GT1JfQVRPTUlDX0NIRUNLKEFU
T01JQyk7IFwKKwlpZiAoIShBVE9NSUMpKSB7IFwKKwkJcHJlZW1wdF9kaXNhYmxlKCk7IFwKKwkJ
Y3B1ID0gc21wX3Byb2Nlc3Nvcl9pZCgpOyBcCisJfSBcCisJYmFzZSA9IGxvY2FsX2Nsb2NrKCk7
IFwKKwlmb3IgKDs7KSB7IFwKKwkJdTY0IG5vdyA9IGxvY2FsX2Nsb2NrKCk7IFwKKwkJaWYgKCEo
QVRPTUlDKSkgXAorCQkJcHJlZW1wdF9lbmFibGUoKTsgXAorCQkvKiBHdWFyYW50ZWUgQ09ORCBj
aGVjayBwcmlvciB0byB0aW1lb3V0ICovIFwKKwkJYmFycmllcigpOyBcCisJCWlmIChDT05EKSB7
IFwKKwkJCXJldCA9IDA7IFwKKwkJCWJyZWFrOyBcCisJCX0gXAorCQlpZiAobm93IC0gYmFzZSA+
PSB0aW1lb3V0KSB7IFwKKwkJCXJldCA9IC1FVElNRURPVVQ7IFwKKwkJCWJyZWFrOyBcCisJCX0g
XAorCQljcHVfcmVsYXgoKTsgXAorCQlpZiAoIShBVE9NSUMpKSB7IFwKKwkJCXByZWVtcHRfZGlz
YWJsZSgpOyBcCisJCQlpZiAodW5saWtlbHkoY3B1ICE9IHNtcF9wcm9jZXNzb3JfaWQoKSkpIHsg
XAorCQkJCXRpbWVvdXQgLT0gbm93IC0gYmFzZTsgXAorCQkJCWNwdSA9IHNtcF9wcm9jZXNzb3Jf
aWQoKTsgXAorCQkJCWJhc2UgPSBsb2NhbF9jbG9jaygpOyBcCisJCQl9IFwKKwkJfSBcCisJfSBc
CisJcmV0OyBcCit9KQorCisjZGVmaW5lIHdhaXRfZm9yX3VzKENPTkQsIFVTKSBcCisoeyBcCisJ
aW50IHJldF9fOyBcCisJQlVJTERfQlVHX09OKCFfX2J1aWx0aW5fY29uc3RhbnRfcChVUykpOyBc
CisJaWYgKChVUykgPiAxMCkgXAorCQlyZXRfXyA9IF93YWl0X2ZvcigoQ09ORCksIChVUyksIDEw
LCAxMCk7IFwKKwllbHNlIFwKKwkJcmV0X18gPSBfd2FpdF9mb3JfYXRvbWljKChDT05EKSwgKFVT
KSwgMCk7IFwKKwlyZXRfXzsgXAorfSkKKworI2RlZmluZSB3YWl0X2Zvcl9hdG9taWNfdXMoQ09O
RCwgVVMpIFwKKyh7IFwKKwlCVUlMRF9CVUdfT04oIV9fYnVpbHRpbl9jb25zdGFudF9wKFVTKSk7
IFwKKwlCVUlMRF9CVUdfT04oKFVTKSA+IDUwMDAwKTsgXAorCV93YWl0X2Zvcl9hdG9taWMoKENP
TkQpLCAoVVMpLCAxKTsgXAorfSkKKworI2RlZmluZSB3YWl0X2Zvcl9hdG9taWMoQ09ORCwgTVMp
IHdhaXRfZm9yX2F0b21pY191cygoQ09ORCksIChNUykgKiAxMDAwKQorCisjZGVmaW5lIEtIeih4
KSAoMTAwMCAqICh4KSkKKyNkZWZpbmUgTUh6KHgpIEtIeigxMDAwICogKHgpKQorCisjZGVmaW5l
IEtCcHMoeCkgKDEwMDAgKiAoeCkpCisjZGVmaW5lIE1CcHMoeCkgS0JwcygxMDAwICogKHgpKQor
I2RlZmluZSBHQnBzKHgpICgodTY0KTEwMDAgKiBNQnBzKCh4KSkpCisKIHN0YXRpYyBpbmxpbmUg
Y29uc3QgY2hhciAqeWVzbm8oYm9vbCB2KQogewogCXJldHVybiB2ID8gInllcyIgOiAibm8iOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJ2LmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9kcnYuaAppbmRleCBhZGRmNmYuLjQwNDllMDMgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2ludGVsX2Rydi5oCkBAIC00NiwxMTQgKzQ2LDYgQEAKIAogc3RydWN0IGRybV9wcmludGVy
OwogCi0vKioKLSAqIF9fd2FpdF9mb3IgLSBtYWdpYyB3YWl0IG1hY3JvCi0gKgotICogTWFjcm8g
dG8gaGVscCBhdm9pZCBvcGVuIGNvZGluZyBjaGVjay93YWl0L3RpbWVvdXQgcGF0dGVybnMuIE5v
dGUgdGhhdCBpdCdzCi0gKiBpbXBvcnRhbnQgdGhhdCB3ZSBjaGVjayB0aGUgY29uZGl0aW9uIGFn
YWluIGFmdGVyIGhhdmluZyB0aW1lZCBvdXQsIHNpbmNlIHRoZQotICogdGltZW91dCBjb3VsZCBi
ZSBkdWUgdG8gcHJlZW1wdGlvbiBvciBzaW1pbGFyIGFuZCB3ZSd2ZSBuZXZlciBoYWQgYSBjaGFu
Y2UgdG8KLSAqIGNoZWNrIHRoZSBjb25kaXRpb24gYmVmb3JlIHRoZSB0aW1lb3V0LgotICovCi0j
ZGVmaW5lIF9fd2FpdF9mb3IoT1AsIENPTkQsIFVTLCBXbWluLCBXbWF4KSAoeyBcCi0JY29uc3Qg
a3RpbWVfdCBlbmRfXyA9IGt0aW1lX2FkZF9ucyhrdGltZV9nZXRfcmF3KCksIDEwMDBsbCAqIChV
UykpOyBcCi0JbG9uZyB3YWl0X18gPSAoV21pbik7IC8qIHJlY29tbWVuZGVkIG1pbiBmb3IgdXNs
ZWVwIGlzIDEwIHVzICovCVwKLQlpbnQgcmV0X187CQkJCQkJCVwKLQltaWdodF9zbGVlcCgpOwkJ
CQkJCQlcCi0JZm9yICg7OykgewkJCQkJCQlcCi0JCWNvbnN0IGJvb2wgZXhwaXJlZF9fID0ga3Rp
bWVfYWZ0ZXIoa3RpbWVfZ2V0X3JhdygpLCBlbmRfXyk7IFwKLQkJT1A7CQkJCQkJCVwKLQkJLyog
R3VhcmFudGVlIENPTkQgY2hlY2sgcHJpb3IgdG8gdGltZW91dCAqLwkJXAotCQliYXJyaWVyKCk7
CQkJCQkJXAotCQlpZiAoQ09ORCkgewkJCQkJCVwKLQkJCXJldF9fID0gMDsJCQkJCVwKLQkJCWJy
ZWFrOwkJCQkJCVwKLQkJfQkJCQkJCQlcCi0JCWlmIChleHBpcmVkX18pIHsJCQkJCVwKLQkJCXJl
dF9fID0gLUVUSU1FRE9VVDsJCQkJXAotCQkJYnJlYWs7CQkJCQkJXAotCQl9CQkJCQkJCVwKLQkJ
dXNsZWVwX3JhbmdlKHdhaXRfXywgd2FpdF9fICogMik7CQkJXAotCQlpZiAod2FpdF9fIDwgKFdt
YXgpKQkJCQkJXAotCQkJd2FpdF9fIDw8PSAxOwkJCQkJXAotCX0JCQkJCQkJCVwKLQlyZXRfXzsJ
CQkJCQkJCVwKLX0pCi0KLSNkZWZpbmUgX3dhaXRfZm9yKENPTkQsIFVTLCBXbWluLCBXbWF4KQlf
X3dhaXRfZm9yKCwgKENPTkQpLCAoVVMpLCAoV21pbiksIFwKLQkJCQkJCSAgIChXbWF4KSkKLSNk
ZWZpbmUgd2FpdF9mb3IoQ09ORCwgTVMpCQlfd2FpdF9mb3IoKENPTkQpLCAoTVMpICogMTAwMCwg
MTAsIDEwMDApCi0KLS8qIElmIENPTkZJR19QUkVFTVBUX0NPVU5UIGlzIGRpc2FibGVkLCBpbl9h
dG9taWMoKSBhbHdheXMgcmVwb3J0cyBmYWxzZS4gKi8KLSNpZiBkZWZpbmVkKENPTkZJR19EUk1f
STkxNV9ERUJVRykgJiYgZGVmaW5lZChDT05GSUdfUFJFRU1QVF9DT1VOVCkKLSMgZGVmaW5lIF9X
QUlUX0ZPUl9BVE9NSUNfQ0hFQ0soQVRPTUlDKSBXQVJOX09OX09OQ0UoKEFUT01JQykgJiYgIWlu
X2F0b21pYygpKQotI2Vsc2UKLSMgZGVmaW5lIF9XQUlUX0ZPUl9BVE9NSUNfQ0hFQ0soQVRPTUlD
KSBkbyB7IH0gd2hpbGUgKDApCi0jZW5kaWYKLQotI2RlZmluZSBfd2FpdF9mb3JfYXRvbWljKENP
TkQsIFVTLCBBVE9NSUMpIFwKLSh7IFwKLQlpbnQgY3B1LCByZXQsIHRpbWVvdXQgPSAoVVMpICog
MTAwMDsgXAotCXU2NCBiYXNlOyBcCi0JX1dBSVRfRk9SX0FUT01JQ19DSEVDSyhBVE9NSUMpOyBc
Ci0JaWYgKCEoQVRPTUlDKSkgeyBcCi0JCXByZWVtcHRfZGlzYWJsZSgpOyBcCi0JCWNwdSA9IHNt
cF9wcm9jZXNzb3JfaWQoKTsgXAotCX0gXAotCWJhc2UgPSBsb2NhbF9jbG9jaygpOyBcCi0JZm9y
ICg7OykgeyBcCi0JCXU2NCBub3cgPSBsb2NhbF9jbG9jaygpOyBcCi0JCWlmICghKEFUT01JQykp
IFwKLQkJCXByZWVtcHRfZW5hYmxlKCk7IFwKLQkJLyogR3VhcmFudGVlIENPTkQgY2hlY2sgcHJp
b3IgdG8gdGltZW91dCAqLyBcCi0JCWJhcnJpZXIoKTsgXAotCQlpZiAoQ09ORCkgeyBcCi0JCQly
ZXQgPSAwOyBcCi0JCQlicmVhazsgXAotCQl9IFwKLQkJaWYgKG5vdyAtIGJhc2UgPj0gdGltZW91
dCkgeyBcCi0JCQlyZXQgPSAtRVRJTUVET1VUOyBcCi0JCQlicmVhazsgXAotCQl9IFwKLQkJY3B1
X3JlbGF4KCk7IFwKLQkJaWYgKCEoQVRPTUlDKSkgeyBcCi0JCQlwcmVlbXB0X2Rpc2FibGUoKTsg
XAotCQkJaWYgKHVubGlrZWx5KGNwdSAhPSBzbXBfcHJvY2Vzc29yX2lkKCkpKSB7IFwKLQkJCQl0
aW1lb3V0IC09IG5vdyAtIGJhc2U7IFwKLQkJCQljcHUgPSBzbXBfcHJvY2Vzc29yX2lkKCk7IFwK
LQkJCQliYXNlID0gbG9jYWxfY2xvY2soKTsgXAotCQkJfSBcCi0JCX0gXAotCX0gXAotCXJldDsg
XAotfSkKLQotI2RlZmluZSB3YWl0X2Zvcl91cyhDT05ELCBVUykgXAotKHsgXAotCWludCByZXRf
XzsgXAotCUJVSUxEX0JVR19PTighX19idWlsdGluX2NvbnN0YW50X3AoVVMpKTsgXAotCWlmICgo
VVMpID4gMTApIFwKLQkJcmV0X18gPSBfd2FpdF9mb3IoKENPTkQpLCAoVVMpLCAxMCwgMTApOyBc
Ci0JZWxzZSBcCi0JCXJldF9fID0gX3dhaXRfZm9yX2F0b21pYygoQ09ORCksIChVUyksIDApOyBc
Ci0JcmV0X187IFwKLX0pCi0KLSNkZWZpbmUgd2FpdF9mb3JfYXRvbWljX3VzKENPTkQsIFVTKSBc
Ci0oeyBcCi0JQlVJTERfQlVHX09OKCFfX2J1aWx0aW5fY29uc3RhbnRfcChVUykpOyBcCi0JQlVJ
TERfQlVHX09OKChVUykgPiA1MDAwMCk7IFwKLQlfd2FpdF9mb3JfYXRvbWljKChDT05EKSwgKFVT
KSwgMSk7IFwKLX0pCi0KLSNkZWZpbmUgd2FpdF9mb3JfYXRvbWljKENPTkQsIE1TKSB3YWl0X2Zv
cl9hdG9taWNfdXMoKENPTkQpLCAoTVMpICogMTAwMCkKLQotI2RlZmluZSBLSHooeCkgKDEwMDAg
KiAoeCkpCi0jZGVmaW5lIE1Ieih4KSBLSHooMTAwMCAqICh4KSkKLQotI2RlZmluZSBLQnBzKHgp
ICgxMDAwICogKHgpKQotI2RlZmluZSBNQnBzKHgpIEtCcHMoMTAwMCAqICh4KSkKLSNkZWZpbmUg
R0Jwcyh4KSAoKHU2NCkxMDAwICogTUJwcygoeCkpKQotCiAvKgogICogRGlzcGxheSByZWxhdGVk
IHN0dWZmCiAgKi8KLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id BE017A8398
	for <lists+intel-gfx@lfdr.de>; Wed,  4 Sep 2019 15:20:10 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2A2C5893AB;
	Wed,  4 Sep 2019 13:20:09 +0000 (UTC)
X-Original-To: intel-gfx@freedesktop.org
Delivered-To: intel-gfx@freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6FC858953E
 for <intel-gfx@freedesktop.org>; Wed,  4 Sep 2019 13:20:07 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 04 Sep 2019 06:20:06 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,467,1559545200"; d="scan'208";a="207476116"
Received: from gaia.fi.intel.com ([10.237.72.192])
 by fmsmga004.fm.intel.com with ESMTP; 04 Sep 2019 06:20:05 -0700
Received: by gaia.fi.intel.com (Postfix, from userid 1000)
 id 8D4BA5C1E29; Wed,  4 Sep 2019 16:19:57 +0300 (EEST)
From: Mika Kuoppala <mika.kuoppala@linux.intel.com>
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@freedesktop.org
In-Reply-To: <20190903062133.27360-1-chris@chris-wilson.co.uk>
References: <20190903062133.27360-1-chris@chris-wilson.co.uk>
Date: Wed, 04 Sep 2019 16:19:57 +0300
Message-ID: <87r24wtczm.fsf@gaia.fi.intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH] drm/i915: Protect debugfs per_file_stats
 with RCU lock
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Q2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+IHdyaXRlczoKCj4gSWYgd2Ug
bWFrZSBzdXJlIHdlIGdyYWIgYSBzdHJvbmcgcmVmZXJlbmNlIHRvIGVhY2ggb2JqZWN0IGFzIHdl
IGR1bXAgaXQsCj4gd2UgY2FuIHJlZHVjZSB0aGUgbG9ja3Mgb3V0c2lkZSBvZiBvdXIgaXRlcmF0
b3JzIHRvIGFuIHJjdV9yZWFkX2xvY2suCj4KPiBUaGlzIHNob3VsZCBwcmV2ZW50IGVycm9ycyBs
aWtlOgo+IFsgMjEzOC4zNzE5MTFdIEJVRzogS0FTQU46IHVzZS1hZnRlci1mcmVlIGluIHBlcl9m
aWxlX3N0YXRzKzB4NDMvMHgzODAgW2k5MTVdCj4gWyAyMTM4LjM3MTkyNF0gUmVhZCBvZiBzaXpl
IDggYXQgYWRkciBmZmZmODg4MjIzNjUxMDAwIGJ5IHRhc2sgY2F0LzgyOTMKPgo+IFsgMjEzOC4z
NzE5NDddIENQVTogMCBQSUQ6IDgyOTMgQ29tbTogY2F0IE5vdCB0YWludGVkIDUuMy4wLXJjNi1D
SS1DdXN0b21fNDM1MisgIzEKPiBbIDIxMzguMzcxOTUzXSBIYXJkd2FyZSBuYW1lOiBUbyBCZSBG
aWxsZWQgQnkgTy5FLk0uIFRvIEJlIEZpbGxlZCBCeSBPLkUuTS4vSjQyMDUtSVRYLCBCSU9TIFAx
LjQwIDA3LzE0LzIwMTcKPiBbIDIxMzguMzcxOTU5XSBDYWxsIFRyYWNlOgo+IFsgMjEzOC4zNzE5
NzRdICBkdW1wX3N0YWNrKzB4N2MvMHhiYgo+IFsgMjEzOC4zNzIwOTldICA/IHBlcl9maWxlX3N0
YXRzKzB4NDMvMHgzODAgW2k5MTVdCj4gWyAyMTM4LjM3MjEwOF0gIHByaW50X2FkZHJlc3NfZGVz
Y3JpcHRpb24rMHg3My8weDNhMAo+IFsgMjEzOC4zNzIyMzFdICA/IHBlcl9maWxlX3N0YXRzKzB4
NDMvMHgzODAgW2k5MTVdCj4gWyAyMTM4LjM3MjM1Ml0gID8gcGVyX2ZpbGVfc3RhdHMrMHg0My8w
eDM4MCBbaTkxNV0KPiBbIDIxMzguMzcyMzYyXSAgX19rYXNhbl9yZXBvcnQrMHgxNGUvMHgxOTIK
PiBbIDIxMzguMzcyNDg5XSAgPyBwZXJfZmlsZV9zdGF0cysweDQzLzB4MzgwIFtpOTE1XQo+IFsg
MjEzOC4zNzI1MDJdICBrYXNhbl9yZXBvcnQrMHhlLzB4MjAKPiBbIDIxMzguMzcyNjI1XSAgcGVy
X2ZpbGVfc3RhdHMrMHg0My8weDM4MCBbaTkxNV0KPiBbIDIxMzguMzcyNzUxXSAgPyBpOTE1X3Bh
bmVsX3Nob3crMHgxMTAvMHgxMTAgW2k5MTVdCj4gWyAyMTM4LjM3Mjc2MV0gIGlkcl9mb3JfZWFj
aCsweGE3LzB4MTYwCj4gWyAyMTM4LjM3Mjc3M10gID8gaWRyX2dldF9uZXh0X3VsKzB4MTEwLzB4
MTEwCj4gWyAyMTM4LjM3Mjc4Ml0gID8gZG9fcmF3X3NwaW5fbG9jaysweDEwYS8weDFkMAo+IFsg
MjEzOC4zNzI5MjNdICBwcmludF9jb250ZXh0X3N0YXRzKzB4MjY0LzB4NTEwIFtpOTE1XQo+Cj4g
U2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Cj4g
LS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jIHwgMTAgKysrKysrKyst
LQo+ICAxIGZpbGUgY2hhbmdlZCwgOCBpbnNlcnRpb25zKCspLCAyIGRlbGV0aW9ucygtKQo+Cj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKPiBpbmRleCA5Nzk4ZjI3YTY5N2EuLjcwODg1
NWUwNTFiNSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMu
Ywo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCj4gQEAgLTIzNyw2
ICsyMzcsOSBAQCBzdGF0aWMgaW50IHBlcl9maWxlX3N0YXRzKGludCBpZCwgdm9pZCAqcHRyLCB2
b2lkICpkYXRhKQo+ICAJc3RydWN0IGZpbGVfc3RhdHMgKnN0YXRzID0gZGF0YTsKPiAgCXN0cnVj
dCBpOTE1X3ZtYSAqdm1hOwo+ICAKPiArCWlmICgha3JlZl9nZXRfdW5sZXNzX3plcm8oJm9iai0+
YmFzZS5yZWZjb3VudCkpCj4gKwkJcmV0dXJuIDA7Cj4gKwoKTm90IGEgc2luZ2xlIGNhbGxzaXRl
IHVzaW5nIHRoaXMuIEV5ZXNvcmUgaXMgdGhlCmdldHRpbmcgdGhyb3VnaCB0aGlzIGFuZCBwdXR0
aW5nIHRocnUgbmljZSBvYmplY3Qgd3JhcHBlci4KCkJ1dCBmb3IgdGhlIGNvbnRlbnQsIHNlZW1z
IHRvIGRvIHdoYXQgaXQgY2xhaW1zLgoKUmV2aWV3ZWQtYnk6IE1pa2EgS3VvcHBhbGEgPG1pa2Eu
a3VvcHBhbGFAbGludXguaW50ZWwuY29tPgoKCj4gIAlzdGF0cy0+Y291bnQrKzsKPiAgCXN0YXRz
LT50b3RhbCArPSBvYmotPmJhc2Uuc2l6ZTsKPiAgCWlmICghYXRvbWljX3JlYWQoJm9iai0+Ymlu
ZF9jb3VudCkpCj4gQEAgLTI4NCw2ICsyODcsNyBAQCBzdGF0aWMgaW50IHBlcl9maWxlX3N0YXRz
KGludCBpZCwgdm9pZCAqcHRyLCB2b2lkICpkYXRhKQo+ICAJfQo+ICAJc3Bpbl91bmxvY2soJm9i
ai0+dm1hLmxvY2spOwo+ICAKPiArCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKPiAgCXJldHVy
biAwOwo+ICB9Cj4gIAo+IEBAIC0zMTMsMTAgKzMxNywxMiBAQCBzdGF0aWMgdm9pZCBwcmludF9j
b250ZXh0X3N0YXRzKHN0cnVjdCBzZXFfZmlsZSAqbSwKPiAgCQkJCSAgICBpOTE1X2dlbV9jb250
ZXh0X2xvY2tfZW5naW5lcyhjdHgpLCBpdCkgewo+ICAJCQlpbnRlbF9jb250ZXh0X2xvY2tfcGlu
bmVkKGNlKTsKPiAgCQkJaWYgKGludGVsX2NvbnRleHRfaXNfcGlubmVkKGNlKSkgewo+ICsJCQkJ
cmN1X3JlYWRfbG9jaygpOwo+ICAJCQkJaWYgKGNlLT5zdGF0ZSkKPiAgCQkJCQlwZXJfZmlsZV9z
dGF0cygwLAo+ICAJCQkJCQkgICAgICAgY2UtPnN0YXRlLT5vYmosICZrc3RhdHMpOwo+ICAJCQkJ
cGVyX2ZpbGVfc3RhdHMoMCwgY2UtPnJpbmctPnZtYS0+b2JqLCAma3N0YXRzKTsKPiArCQkJCXJj
dV9yZWFkX3VubG9jaygpOwo+ICAJCQl9Cj4gIAkJCWludGVsX2NvbnRleHRfdW5sb2NrX3Bpbm5l
ZChjZSk7Cj4gIAkJfQo+IEBAIC0zMjgsOSArMzM0LDkgQEAgc3RhdGljIHZvaWQgcHJpbnRfY29u
dGV4dF9zdGF0cyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sCj4gIAkJCXN0cnVjdCB0YXNrX3N0cnVjdCAq
dGFzazsKPiAgCQkJY2hhciBuYW1lWzgwXTsKPiAgCj4gLQkJCXNwaW5fbG9jaygmZmlsZS0+dGFi
bGVfbG9jayk7Cj4gKwkJCXJjdV9yZWFkX2xvY2soKTsKPiAgCQkJaWRyX2Zvcl9lYWNoKCZmaWxl
LT5vYmplY3RfaWRyLCBwZXJfZmlsZV9zdGF0cywgJnN0YXRzKTsKPiAtCQkJc3Bpbl91bmxvY2so
JmZpbGUtPnRhYmxlX2xvY2spOwo+ICsJCQlyY3VfcmVhZF91bmxvY2soKTsKPiAgCj4gIAkJCXJj
dV9yZWFkX2xvY2soKTsKPiAgCQkJdGFzayA9IHBpZF90YXNrKGN0eC0+cGlkID86IGZpbGUtPnBp
ZCwgUElEVFlQRV9QSUQpOwo+IC0tIAo+IDIuMjMuMAo+Cj4gX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KPiBJbnRlbC1nZnggbWFpbGluZyBsaXN0Cj4gSW50
ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 66494A0EA4
	for <lists+intel-gfx@lfdr.de>; Thu, 29 Aug 2019 02:33:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 370D689EF7;
	Thu, 29 Aug 2019 00:33:43 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C4A1889EF7
 for <intel-gfx@lists.freedesktop.org>; Thu, 29 Aug 2019 00:33:41 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 28 Aug 2019 17:33:41 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,442,1559545200"; d="scan'208";a="197685025"
Received: from mdroper-desk.fm.intel.com (HELO
 mdroper-desk.amr.corp.intel.com) ([10.105.128.12])
 by fmsmga001.fm.intel.com with ESMTP; 28 Aug 2019 17:33:40 -0700
Date: Wed, 28 Aug 2019 17:33:40 -0700
From: Matt Roper <matthew.d.roper@intel.com>
To: Lucas De Marchi <lucas.demarchi@intel.com>
Message-ID: <20190829003340.GO13677@mdroper-desk.amr.corp.intel.com>
References: <20190823082055.5992-1-lucas.demarchi@intel.com>
 <20190823082055.5992-22-lucas.demarchi@intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190823082055.5992-22-lucas.demarchi@intel.com>
User-Agent: Mutt/1.12.0 (2019-05-25)
Subject: Re: [Intel-gfx] [PATCH v3 21/23] drm/i915/tgl: Gen-12 render
 decompression
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@intel.com>, intel-gfx@lists.freedesktop.org,
 Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCBBdWcgMjMsIDIwMTkgYXQgMDE6MjA6NTNBTSAtMDcwMCwgTHVjYXMgRGUgTWFyY2hp
IHdyb3RlOgo+IEZyb206IERoaW5ha2FyYW4gUGFuZGl5YW4gPGRoaW5ha2FyYW4ucGFuZGl5YW5A
aW50ZWwuY29tPgo+IAo+IEdlbi0xMiBkZWNvbXByZXNzaW9uIGlzIHN1cHBvcnRlZCB3aXRoIFkt
dGlsZWQgbWFpbiBzdXJmYWNlLiBUaGUgQ0NTIGlzCj4gbGluZWFyIGFuZCBoYXMgNCBiaXRzIG9m
IGRhdGEgZm9yIGVhY2ggbWFpbiBzdXJmYWNlIGNhY2hlIGxpbmUgcGFpciwgYQo+IHJhdGlvIG9m
IDE6MjU2LiBHZW4tMTIgZGlzcGxheSBkZWNvbXByZXNzaW9uIGlzIGluY29tcGF0aWJsZSB3aXRo
IGJ1ZmZlcnMKPiBjb21wcmVzc2VkIGJ5IGVhcmxpZXIgR1BVcywgc28gbWFrZSB1c2Ugb2YgYSBu
ZXcgbW9kaWZpZXIgdG8gaWRlbnRpZnkKPiBnZW4tMTIgY29tcHJlc3Npb24uIEFub3RoZXIgbm90
YWJsZSBjaGFuZ2UgaXMgdGhhdCBkZWNvbXByZXNzaW9uIGlzCj4gc3VwcG9ydGVkIG9uIGFsbCBw
bGFuZXMgZXhjZXB0IGN1cnNvciBhbmQgb24gYWxsIHBpcGVzLiBUaGlzIHBhdGNoIGFkZHMKPiBk
ZWNvbXByZXNzaW9uIHN1cHBvcnQgZm9yIFtBLFhdQkdSODg4IHBpeGVsIGZvcm1hdHMuCj4gCj4g
QnNwZWM6IDE4NDM3CgpGb3IgVEdMIEkgdGhpbmsgeW91IHdhbnQgdG8gcG9pbnQgYXQgYnNwZWMg
IzQ5MjUyLgoKPiAKPiB2MjogRml4IGNoZWNrcGF0Y2ggd2FybmluZ3MgKEx1Y2FzKQo+IAo+IENj
OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgo+IENjOiBS
b2RyaWdvIFZpdmkgPHJvZHJpZ28udml2aUBpbnRlbC5jb20+Cj4gQ2M6IERhbmllbCBWZXR0ZXIg
PGRhbmllbC52ZXR0ZXJAaW50ZWwuY29tPgo+IFNpZ25lZC1vZmYtYnk6IERoaW5ha2FyYW4gUGFu
ZGl5YW4gPGRoaW5ha2FyYW4ucGFuZGl5YW5AaW50ZWwuY29tPgo+IFNpZ25lZC1vZmYtYnk6IEx1
Y2FzIERlIE1hcmNoaSA8bHVjYXMuZGVtYXJjaGlAaW50ZWwuY29tPgo+IC0tLQo+ICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyB8IDYzICsrKysrKysrKysrKysr
KysrLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMgIHwg
MjMgKysrKy0tLQo+ICAyIGZpbGVzIGNoYW5nZWQsIDcxIGluc2VydGlvbnMoKyksIDE1IGRlbGV0
aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eS5jCj4gaW5kZXggMTA5ZDRmZDk2MWM2Li4xOTBhZGJmZmUwNTUgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwo+IEBAIC0xOTEyLDYgKzE5MTIs
MTAgQEAgaW50ZWxfdGlsZV93aWR0aF9ieXRlcyhjb25zdCBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVy
ICpmYiwgaW50IGNvbG9yX3BsYW5lKQo+ICAJCWlmIChjb2xvcl9wbGFuZSA9PSAxKQo+ICAJCQly
ZXR1cm4gMTI4Owo+ICAJCS8qIGZhbGwgdGhyb3VnaCAqLwo+ICsJY2FzZSBJOTE1X0ZPUk1BVF9N
T0RfWV9USUxFRF9HRU4xMl9SQ19DQ1M6Cj4gKwkJaWYgKGNvbG9yX3BsYW5lID09IDEpCj4gKwkJ
CXJldHVybiBjcHA7CgpJZiB0aGUgQ0NTIGl0c2VsZiBpcyBsaW5lYXIsIGlzIHRoZXJlIGEgcmVh
c29uIHdlIGRvbid0IHRyZWF0IHRoaXMgdGhlCndheSB3ZSBub3JtYWxseSB0cmVhdCBsaW5lYXIg
c3VyZmFjZXMgKGkuZS4sIHJldHVybiBpbnRlbF90aWxlX3NpemUoKSk/Cgo+ICsJCS8qIGZhbGwg
dGhyb3VnaCAqLwo+ICAJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRDoKPiAgCQlpZiAoSVNf
R0VOKGRldl9wcml2LCAyKSB8fCBIQVNfMTI4X0JZVEVfWV9USUxJTkcoZGV2X3ByaXYpKQo+ICAJ
CQlyZXR1cm4gMTI4Owo+IEBAIC0yMDQ1LDYgKzIwNDksOCBAQCBzdGF0aWMgdW5zaWduZWQgaW50
IGludGVsX3N1cmZfYWxpZ25tZW50KGNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiLAo+
ICAJCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDkpCj4gIAkJCXJldHVybiAyNTYgKiAxMDI0
Owo+ICAJCXJldHVybiAwOwo+ICsJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9HRU4xMl9S
Q19DQ1M6Cj4gKwkJcmV0dXJuIDQgKiA0ICogMTAyNDsKClRoaXMgaXMgY29ycmVjdCwgYnV0IGlz
IHRoZXJlIGEgcmVhc29uIHdlIGRvbid0IGp1c3Qgd3JpdGUgaXQgYXMgMTYgKgoxMDI0PyAgVGhl
IGJzcGVjIHNheXMgIm11c3QgYmUgMTZLQiBhbGlnbmVkIiBzbyAxNiAqIDEwMjQgc2VlbXMgbW9y
ZQpuYXR1cmFsLgoKPiAgCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1lfVElMRURfQ0NTOgo+ICAJY2Fz
ZSBJOTE1X0ZPUk1BVF9NT0RfWWZfVElMRURfQ0NTOgo+ICAJY2FzZSBJOTE1X0ZPUk1BVF9NT0Rf
WV9USUxFRDoKPiBAQCAtMjI0Miw3ICsyMjQ4LDggQEAgc3RhdGljIHUzMiBpbnRlbF9hZGp1c3Rf
dGlsZV9vZmZzZXQoaW50ICp4LCBpbnQgKnksCj4gIAo+ICBzdGF0aWMgYm9vbCBpc19zdXJmYWNl
X2xpbmVhcih1NjQgbW9kaWZpZXIsIGludCBjb2xvcl9wbGFuZSkKPiAgewo+IC0JcmV0dXJuIG1v
ZGlmaWVyID09IERSTV9GT1JNQVRfTU9EX0xJTkVBUjsKPiArCXJldHVybiBtb2RpZmllciA9PSBE
Uk1fRk9STUFUX01PRF9MSU5FQVIgfHwKPiArCSAgICAgICAobW9kaWZpZXIgPT0gSTkxNV9GT1JN
QVRfTU9EX1lfVElMRURfR0VOMTJfUkNfQ0NTICYmIGNvbG9yX3BsYW5lID09IDEpOwo+ICB9Cj4g
IAo+ICBzdGF0aWMgdTMyIGludGVsX2FkanVzdF9hbGlnbmVkX29mZnNldChpbnQgKngsIGludCAq
eSwKPiBAQCAtMjQyOSw2ICsyNDM2LDcgQEAgc3RhdGljIHVuc2lnbmVkIGludCBpbnRlbF9mYl9t
b2RpZmllcl90b190aWxpbmcodTY0IGZiX21vZGlmaWVyKQo+ICAJCXJldHVybiBJOTE1X1RJTElO
R19YOwo+ICAJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRDoKPiAgCWNhc2UgSTkxNV9GT1JN
QVRfTU9EX1lfVElMRURfQ0NTOgo+ICsJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9HRU4x
Ml9SQ19DQ1M6Cj4gIAkJcmV0dXJuIEk5MTVfVElMSU5HX1k7Cj4gIAlkZWZhdWx0Ogo+ICAJCXJl
dHVybiBJOTE1X1RJTElOR19OT05FOwo+IEBAIC0yNDQ5LDcgKzI0NTcsNyBAQCBzdGF0aWMgdW5z
aWduZWQgaW50IGludGVsX2ZiX21vZGlmaWVyX3RvX3RpbGluZyh1NjQgZmJfbW9kaWZpZXIpCj4g
ICAqIHVzIGEgcmF0aW8gb2Ygb25lIGJ5dGUgaW4gdGhlIENDUyBmb3IgZWFjaCA4eDE2IHBpeGVs
cyBpbiB0aGUKPiAgICogbWFpbiBzdXJmYWNlLgo+ICAgKi8KPiAtc3RhdGljIGNvbnN0IHN0cnVj
dCBkcm1fZm9ybWF0X2luZm8gY2NzX2Zvcm1hdHNbXSA9IHsKPiArc3RhdGljIGNvbnN0IHN0cnVj
dCBkcm1fZm9ybWF0X2luZm8gc2tsX2Njc19mb3JtYXRzW10gPSB7Cj4gIAl7IC5mb3JtYXQgPSBE
Uk1fRk9STUFUX1hSR0I4ODg4LCAuZGVwdGggPSAyNCwgLm51bV9wbGFuZXMgPSAyLAo+ICAJICAu
Y3BwID0geyA0LCAxLCB9LCAuaHN1YiA9IDgsIC52c3ViID0gMTYsIH0sCj4gIAl7IC5mb3JtYXQg
PSBEUk1fRk9STUFUX1hCR1I4ODg4LCAuZGVwdGggPSAyNCwgLm51bV9wbGFuZXMgPSAyLAo+IEBA
IC0yNDYwLDYgKzI0NjgsMjQgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZm9ybWF0X2luZm8g
Y2NzX2Zvcm1hdHNbXSA9IHsKPiAgCSAgLmNwcCA9IHsgNCwgMSwgfSwgLmhzdWIgPSA4LCAudnN1
YiA9IDE2LCAuaGFzX2FscGhhID0gdHJ1ZSwgfSwKPiAgfTsKPiAgCj4gKy8qCj4gKyAqIEdlbi0x
MiBjb21wcmVzc2lvbiB1c2VzIDQgYml0cyBvZiBDQ1MgZGF0YSBmb3IgZWFjaCBjYWNoZSBsaW5l
IHBhaXIgaW4gdGhlCj4gKyAqIG1haW4gc3VyZmFjZS4gQW5kIGVhY2ggNjRCIENDUyBjYWNoZSBs
aW5lIHJlcHJlc2VudHMgYW4gYXJlYSBvZiA0eDEgWS10aWxlcwo+ICsgKiBpbiB0aGUgbWFpbiBz
dXJmYWNlLiBXaXRoIDQgYnl0ZSBwaXhlbHMgYW5kIGVhY2ggWS10aWxlIGhhdmluZyBkaW1lbnNp
b25zIG9mCj4gKyAqIDMyeDMyIHBpeGVscywgdGhlIHJhdGlvIHR1cm5zIG91dCB0byAxQiBpbiB0
aGUgQ0NTIGZvciBldmVyeSAyIHggMzIgcGl4ZWxzIGluCj4gKyAqIHRoZSBtYWluIHN1cmZhY2Uu
Cj4gKyAqLwo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9mb3JtYXRfaW5mbyBnZW4xMl9jY3Nf
Zm9ybWF0c1tdID0gewo+ICsJeyAuZm9ybWF0ID0gRFJNX0ZPUk1BVF9YUkdCODg4OCwgLmRlcHRo
ID0gMjQsIC5udW1fcGxhbmVzID0gMiwKPiArCSAgLmNwcCA9IHsgNCwgMSwgfSwgLmhzdWIgPSAy
LCAudnN1YiA9IDMyLCB9LAo+ICsJeyAuZm9ybWF0ID0gRFJNX0ZPUk1BVF9YQkdSODg4OCwgLmRl
cHRoID0gMjQsIC5udW1fcGxhbmVzID0gMiwKPiArCSAgLmNwcCA9IHsgNCwgMSwgfSwgLmhzdWIg
PSAyLCAudnN1YiA9IDMyLCB9LAo+ICsJeyAuZm9ybWF0ID0gRFJNX0ZPUk1BVF9BUkdCODg4OCwg
LmRlcHRoID0gMzIsIC5udW1fcGxhbmVzID0gMiwKPiArCSAgLmNwcCA9IHsgNCwgMSwgfSwgLmhz
dWIgPSAyLCAudnN1YiA9IDMyLCAuaGFzX2FscGhhID0gdHJ1ZSB9LAo+ICsJeyAuZm9ybWF0ID0g
RFJNX0ZPUk1BVF9BQkdSODg4OCwgLmRlcHRoID0gMzIsIC5udW1fcGxhbmVzID0gMiwKPiArCSAg
LmNwcCA9IHsgNCwgMSwgfSwgLmhzdWIgPSAyLCAudnN1YiA9IDMyLCAuaGFzX2FscGhhID0gdHJ1
ZSB9LAo+ICt9Owo+ICsKPiAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZm9ybWF0X2luZm8gKgo+
ICBsb29rdXBfZm9ybWF0X2luZm8oY29uc3Qgc3RydWN0IGRybV9mb3JtYXRfaW5mbyBmb3JtYXRz
W10sCj4gIAkJICAgaW50IG51bV9mb3JtYXRzLCB1MzIgZm9ybWF0KQo+IEBAIC0yNDgwLDggKzI1
MDYsMTIgQEAgaW50ZWxfZ2V0X2Zvcm1hdF9pbmZvKGNvbnN0IHN0cnVjdCBkcm1fbW9kZV9mYl9j
bWQyICpjbWQpCj4gIAlzd2l0Y2ggKGNtZC0+bW9kaWZpZXJbMF0pIHsKPiAgCWNhc2UgSTkxNV9G
T1JNQVRfTU9EX1lfVElMRURfQ0NTOgo+ICAJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWWZfVElMRURf
Q0NTOgo+IC0JCXJldHVybiBsb29rdXBfZm9ybWF0X2luZm8oY2NzX2Zvcm1hdHMsCj4gLQkJCQkJ
ICBBUlJBWV9TSVpFKGNjc19mb3JtYXRzKSwKPiArCQlyZXR1cm4gbG9va3VwX2Zvcm1hdF9pbmZv
KHNrbF9jY3NfZm9ybWF0cywKPiArCQkJCQkgIEFSUkFZX1NJWkUoc2tsX2Njc19mb3JtYXRzKSwK
PiArCQkJCQkgIGNtZC0+cGl4ZWxfZm9ybWF0KTsKPiArCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1lf
VElMRURfR0VOMTJfUkNfQ0NTOgo+ICsJCXJldHVybiBsb29rdXBfZm9ybWF0X2luZm8oZ2VuMTJf
Y2NzX2Zvcm1hdHMsCj4gKwkJCQkJICBBUlJBWV9TSVpFKGdlbjEyX2Njc19mb3JtYXRzKSwKPiAg
CQkJCQkgIGNtZC0+cGl4ZWxfZm9ybWF0KTsKPiAgCWRlZmF1bHQ6Cj4gIAkJcmV0dXJuIE5VTEw7
Cj4gQEAgLTI0OTAsNyArMjUyMCw4IEBAIGludGVsX2dldF9mb3JtYXRfaW5mbyhjb25zdCBzdHJ1
Y3QgZHJtX21vZGVfZmJfY21kMiAqY21kKQo+ICAKPiAgYm9vbCBpc19jY3NfbW9kaWZpZXIodTY0
IG1vZGlmaWVyKQo+ICB7Cj4gLQlyZXR1cm4gbW9kaWZpZXIgPT0gSTkxNV9GT1JNQVRfTU9EX1lf
VElMRURfQ0NTIHx8Cj4gKwlyZXR1cm4gbW9kaWZpZXIgPT0gSTkxNV9GT1JNQVRfTU9EX1lfVElM
RURfR0VOMTJfUkNfQ0NTIHx8Cj4gKwkgICAgICAgbW9kaWZpZXIgPT0gSTkxNV9GT1JNQVRfTU9E
X1lfVElMRURfQ0NTIHx8Cj4gIAkgICAgICAgbW9kaWZpZXIgPT0gSTkxNV9GT1JNQVRfTU9EX1lm
X1RJTEVEX0NDUzsKPiAgfQo+ICAKPiBAQCAtMjY1OSw3ICsyNjkwLDEzIEBAIGludGVsX2ZpbGxf
ZmJfaW5mbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gIAkJCWludCBtYWlu
X3gsIG1haW5feTsKPiAgCQkJaW50IGNjc194LCBjY3NfeTsKPiAgCj4gLQkJCWludGVsX3RpbGVf
ZGltcyhmYiwgaSwgJnRpbGVfd2lkdGgsICZ0aWxlX2hlaWdodCk7Cj4gKwkJCWlmICghaXNfc3Vy
ZmFjZV9saW5lYXIoZmItPm1vZGlmaWVyLCBpKSkgewo+ICsJCQkJaW50ZWxfdGlsZV9kaW1zKGZi
LCBpLCAmdGlsZV93aWR0aCwgJnRpbGVfaGVpZ2h0KTsKPiArCQkJfSBlbHNlIHsKPiArCQkJCXRp
bGVfd2lkdGggPSA2NCAvIGNwcDsKPiArCQkJCXRpbGVfaGVpZ2h0ID0gMTsKPiArCQkJfQo+ICsK
PiAgCQkJdGlsZV93aWR0aCAqPSBoc3ViOwo+ICAJCQl0aWxlX2hlaWdodCAqPSB2c3ViOwo+ICAK
PiBAQCAtNDA1Myw2ICs0MDkwLDggQEAgc3RhdGljIHUzMiBza2xfcGxhbmVfY3RsX3RpbGluZyh1
NjQgZmJfbW9kaWZpZXIpCj4gIAljYXNlIEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEOgo+ICAJCXJl
dHVybiBQTEFORV9DVExfVElMRURfWTsKPiAgCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1lfVElMRURf
Q0NTOgo+ICsJCS8qIGZhbGwgdGhyb3VnaCAqLwo+ICsJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9U
SUxFRF9HRU4xMl9SQ19DQ1M6Cj4gIAkJcmV0dXJuIFBMQU5FX0NUTF9USUxFRF9ZIHwgUExBTkVf
Q1RMX1JFTkRFUl9ERUNPTVBSRVNTSU9OX0VOQUJMRTsKPiAgCWNhc2UgSTkxNV9GT1JNQVRfTU9E
X1lmX1RJTEVEOgo+ICAJCXJldHVybiBQTEFORV9DVExfVElMRURfWUY7Cj4gQEAgLTk4MjgsNyAr
OTg2Nyw5IEBAIHNreWxha2VfZ2V0X2luaXRpYWxfcGxhbmVfY29uZmlnKHN0cnVjdCBpbnRlbF9j
cnRjICpjcnRjLAo+ICAJY2FzZSBQTEFORV9DVExfVElMRURfWToKPiAgCQlwbGFuZV9jb25maWct
PnRpbGluZyA9IEk5MTVfVElMSU5HX1k7Cj4gIAkJaWYgKHZhbCAmIFBMQU5FX0NUTF9SRU5ERVJf
REVDT01QUkVTU0lPTl9FTkFCTEUpCj4gLQkJCWZiLT5tb2RpZmllciA9IEk5MTVfRk9STUFUX01P
RF9ZX1RJTEVEX0NDUzsKPiArCQkJZmItPm1vZGlmaWVyID0gSU5URUxfR0VOKGRldl9wcml2KSA+
PSAxMiA/Cj4gKwkJCQlJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9HRU4xMl9SQ19DQ1MgOgo+ICsJ
CQkJSTkxNV9GT1JNQVRfTU9EX1lfVElMRURfQ0NTOwo+ICAJCWVsc2UKPiAgCQkJZmItPm1vZGlm
aWVyID0gSTkxNV9GT1JNQVRfTU9EX1lfVElMRUQ7Cj4gIAkJYnJlYWs7Cj4gQEAgLTE1Njk1LDYg
KzE1NzM2LDE0IEBAIHN0YXRpYyBpbnQgaW50ZWxfZnJhbWVidWZmZXJfaW5pdChzdHJ1Y3QgaW50
ZWxfZnJhbWVidWZmZXIgKmludGVsX2ZiLAo+ICAJCSAgICBpc19jY3NfbW9kaWZpZXIoZmItPm1v
ZGlmaWVyKSkKPiAgCQkJc3RyaWRlX2FsaWdubWVudCAqPSA0Owo+ICAKPiArCQkvKgo+ICsJCSAq
IFRoZSBtYWluIHN1cmZhY2UgcGl0Y2ggbXVzdCBiZSBwYWRlZCB0byBhIG11bHRpcGxlIG9mIGZv
dXIKCnMvcGFkZWQvcGFkZGVkLwoKPiArCQkgKiB0aWxlIHdpZHRocy4KPiArCQkgKi8KPiArCQlp
ZiAoZmItPm1vZGlmaWVyID09IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDUyAm
Jgo+ICsJCSAgICBpID09IDApCj4gKwkJCXN0cmlkZV9hbGlnbm1lbnQgKj0gNDsKPiArCgpJdCBt
aWdodCBiZSB3b3J0aCBtb3ZpbmcgdGhpcyBpbnRvIGludGVsX2ZiX3N0cmlkZV9hbGlnbm1lbnQg
aXRzZWxmLgoKCgpNYXR0Cgo+ICAJCWlmIChmYi0+cGl0Y2hlc1tpXSAmIChzdHJpZGVfYWxpZ25t
ZW50IC0gMSkpIHsKPiAgCQkJRFJNX0RFQlVHX0tNUygicGxhbmUgJWQgcGl0Y2ggKCVkKSBtdXN0
IGJlIGF0IGxlYXN0ICV1IGJ5dGUgYWxpZ25lZFxuIiwKPiAgCQkJCSAgICAgIGksIGZiLT5waXRj
aGVzW2ldLCBzdHJpZGVfYWxpZ25tZW50KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfc3ByaXRlLmMKPiBpbmRleCA3MWRhZTNjMmY5ZGIuLjczZDMyMDE3YmU4OSAxMDA2
NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYwo+IEBAIC01
NDcsNiArNTQ3LDcgQEAgc2tsX3Byb2dyYW1fcGxhbmUoc3RydWN0IGludGVsX3BsYW5lICpwbGFu
ZSwKPiAgCWNvbnN0IHN0cnVjdCBkcm1faW50ZWxfc3ByaXRlX2NvbG9ya2V5ICprZXkgPSAmcGxh
bmVfc3RhdGUtPmNrZXk7Cj4gIAl1MzIgc3VyZl9hZGRyID0gcGxhbmVfc3RhdGUtPmNvbG9yX3Bs
YW5lW2NvbG9yX3BsYW5lXS5vZmZzZXQ7Cj4gIAl1MzIgc3RyaWRlID0gc2tsX3BsYW5lX3N0cmlk
ZShwbGFuZV9zdGF0ZSwgY29sb3JfcGxhbmUpOwo+ICsJdTMyIGF1eF9kaXN0ID0gcGxhbmVfc3Rh
dGUtPmNvbG9yX3BsYW5lWzFdLm9mZnNldCAtIHN1cmZfYWRkcjsKPiAgCXUzMiBhdXhfc3RyaWRl
ID0gc2tsX3BsYW5lX3N0cmlkZShwbGFuZV9zdGF0ZSwgMSk7Cj4gIAlpbnQgY3J0Y194ID0gcGxh
bmVfc3RhdGUtPmJhc2UuZHN0LngxOwo+ICAJaW50IGNydGNfeSA9IHBsYW5lX3N0YXRlLT5iYXNl
LmRzdC55MTsKPiBAQCAtNTg4LDggKzU4OSwxMCBAQCBza2xfcHJvZ3JhbV9wbGFuZShzdHJ1Y3Qg
aW50ZWxfcGxhbmUgKnBsYW5lLAo+ICAJSTkxNV9XUklURV9GVyhQTEFORV9TVFJJREUocGlwZSwg
cGxhbmVfaWQpLCBzdHJpZGUpOwo+ICAJSTkxNV9XUklURV9GVyhQTEFORV9QT1MocGlwZSwgcGxh
bmVfaWQpLCAoY3J0Y195IDw8IDE2KSB8IGNydGNfeCk7Cj4gIAlJOTE1X1dSSVRFX0ZXKFBMQU5F
X1NJWkUocGlwZSwgcGxhbmVfaWQpLCAoc3JjX2ggPDwgMTYpIHwgc3JjX3cpOwo+IC0JSTkxNV9X
UklURV9GVyhQTEFORV9BVVhfRElTVChwaXBlLCBwbGFuZV9pZCksCj4gLQkJICAgICAgKHBsYW5l
X3N0YXRlLT5jb2xvcl9wbGFuZVsxXS5vZmZzZXQgLSBzdXJmX2FkZHIpIHwgYXV4X3N0cmlkZSk7
Cj4gKwo+ICsJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPCAxMikKPiArCQlhdXhfZGlzdCB8PSBh
dXhfc3RyaWRlOwo+ICsJSTkxNV9XUklURV9GVyhQTEFORV9BVVhfRElTVChwaXBlLCBwbGFuZV9p
ZCksIGF1eF9kaXN0KTsKPiAgCj4gIAlpZiAoaWNsX2lzX2hkcl9wbGFuZShkZXZfcHJpdiwgcGxh
bmVfaWQpKSB7Cj4gIAkJdTMyIGN1c19jdGwgPSAwOwo+IEBAIC0xNzQ1LDcgKzE3NDgsOCBAQCBz
dGF0aWMgaW50IHNrbF9wbGFuZV9jaGVja19mYihjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqY3J0Y19zdGF0ZSwKPiAgCSAgICAoZmItPm1vZGlmaWVyID09IEk5MTVfRk9STUFUX01PRF9Z
X1RJTEVEIHx8Cj4gIAkgICAgIGZiLT5tb2RpZmllciA9PSBJOTE1X0ZPUk1BVF9NT0RfWWZfVElM
RUQgfHwKPiAgCSAgICAgZmItPm1vZGlmaWVyID09IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0ND
UyB8fAo+IC0JICAgICBmYi0+bW9kaWZpZXIgPT0gSTkxNV9GT1JNQVRfTU9EX1lmX1RJTEVEX0ND
UykpIHsKPiArCSAgICAgZmItPm1vZGlmaWVyID09IEk5MTVfRk9STUFUX01PRF9ZZl9USUxFRF9D
Q1MgfHwKPiArCSAgICAgZmItPm1vZGlmaWVyID09IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dF
TjEyX1JDX0NDUykpIHsKPiAgCQlEUk1fREVCVUdfS01TKCJZL1lmIHRpbGluZyBub3Qgc3VwcG9y
dGVkIGluIElGLUlEIG1vZGVcbiIpOwo+ICAJCXJldHVybiAtRUlOVkFMOwo+ICAJfQo+IEBAIC0y
MTU3LDcgKzIxNjEsOCBAQCBzdGF0aWMgY29uc3QgdTY0IHNrbF9wbGFuZV9mb3JtYXRfbW9kaWZp
ZXJzX2Njc1tdID0gewo+ICAJRFJNX0ZPUk1BVF9NT0RfSU5WQUxJRAo+ICB9Owo+ICAKPiAtc3Rh
dGljIGNvbnN0IHU2NCBnZW4xMl9wbGFuZV9mb3JtYXRfbW9kaWZpZXJzX25vY2NzW10gPSB7Cj4g
K3N0YXRpYyBjb25zdCB1NjQgZ2VuMTJfcGxhbmVfZm9ybWF0X21vZGlmaWVyc19jY3NbXSA9IHsK
PiArCUk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDUywKPiAgCUk5MTVfRk9STUFU
X01PRF9ZX1RJTEVELAo+ICAJSTkxNV9GT1JNQVRfTU9EX1hfVElMRUQsCj4gIAlEUk1fRk9STUFU
X01PRF9MSU5FQVIsCj4gQEAgLTIzMTksNiArMjMyNCw3IEBAIHN0YXRpYyBib29sIGdlbjEyX3Bs
YW5lX2Zvcm1hdF9tb2Rfc3VwcG9ydGVkKHN0cnVjdCBkcm1fcGxhbmUgKl9wbGFuZSwKPiAgCWNh
c2UgRFJNX0ZPUk1BVF9NT0RfTElORUFSOgo+ICAJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWF9USUxF
RDoKPiAgCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1lfVElMRUQ6Cj4gKwljYXNlIEk5MTVfRk9STUFU
X01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDUzoKPiAgCQlicmVhazsKPiAgCWRlZmF1bHQ6Cj4gIAkJ
cmV0dXJuIGZhbHNlOwo+IEBAIC0yMzI5LDYgKzIzMzUsOSBAQCBzdGF0aWMgYm9vbCBnZW4xMl9w
bGFuZV9mb3JtYXRfbW9kX3N1cHBvcnRlZChzdHJ1Y3QgZHJtX3BsYW5lICpfcGxhbmUsCj4gIAlj
YXNlIERSTV9GT1JNQVRfWEJHUjg4ODg6Cj4gIAljYXNlIERSTV9GT1JNQVRfQVJHQjg4ODg6Cj4g
IAljYXNlIERSTV9GT1JNQVRfQUJHUjg4ODg6Cj4gKwkJaWYgKGlzX2Njc19tb2RpZmllcihtb2Rp
ZmllcikpCj4gKwkJCXJldHVybiB0cnVlOwo+ICsJCS8qIGZhbGwgdGhyb3VnaCAqLwo+ICAJY2Fz
ZSBEUk1fRk9STUFUX1JHQjU2NToKPiAgCWNhc2UgRFJNX0ZPUk1BVF9YUkdCMjEwMTAxMDoKPiAg
CWNhc2UgRFJNX0ZPUk1BVF9YQkdSMjEwMTAxMDoKPiBAQCAtMjUyNCwxMyArMjUzMywxMSBAQCBz
a2xfdW5pdmVyc2FsX3BsYW5lX2NyZWF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsCj4gIAkJZm9ybWF0cyA9IHNrbF9nZXRfcGxhbmVfZm9ybWF0cyhkZXZfcHJpdiwgcGlwZSwK
PiAgCQkJCQkJcGxhbmVfaWQsICZudW1fZm9ybWF0cyk7Cj4gIAo+ICsJcGxhbmUtPmhhc19jY3Mg
PSBza2xfcGxhbmVfaGFzX2NjcyhkZXZfcHJpdiwgcGlwZSwgcGxhbmVfaWQpOwo+ICAJaWYgKElO
VEVMX0dFTihkZXZfcHJpdikgPj0gMTIpIHsKPiAtCQkvKiBUT0RPOiBJbXBsZW1lbnQgc3VwcG9y
dCBmb3IgZ2VuLTEyIENDUyBtb2RpZmllcnMgKi8KPiAtCQlwbGFuZS0+aGFzX2NjcyA9IGZhbHNl
Owo+IC0JCW1vZGlmaWVycyA9IGdlbjEyX3BsYW5lX2Zvcm1hdF9tb2RpZmllcnNfbm9jY3M7Cj4g
KwkJbW9kaWZpZXJzID0gZ2VuMTJfcGxhbmVfZm9ybWF0X21vZGlmaWVyc19jY3M7Cj4gIAkJcGxh
bmVfZnVuY3MgPSAmZ2VuMTJfcGxhbmVfZnVuY3M7Cj4gIAl9IGVsc2Ugewo+IC0JCXBsYW5lLT5o
YXNfY2NzID0gc2tsX3BsYW5lX2hhc19jY3MoZGV2X3ByaXYsIHBpcGUsIHBsYW5lX2lkKTsKPiAg
CQlpZiAocGxhbmUtPmhhc19jY3MpCj4gIAkJCW1vZGlmaWVycyA9IHNrbF9wbGFuZV9mb3JtYXRf
bW9kaWZpZXJzX2NjczsKPiAgCQllbHNlCj4gLS0gCj4gMi4yMy4wCj4gCj4gX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBJbnRlbC1nZnggbWFpbGluZyBs
aXN0Cj4gSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4CgotLSAKTWF0dCBSb3BlcgpH
cmFwaGljcyBTb2Z0d2FyZSBFbmdpbmVlcgpWVFQtT1NHQyBQbGF0Zm9ybSBFbmFibGVtZW50Cklu
dGVsIENvcnBvcmF0aW9uCig5MTYpIDM1Ni0yNzk1Cl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeA==

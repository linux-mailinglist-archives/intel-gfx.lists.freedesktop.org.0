Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C68B31442DC
	for <lists+intel-gfx@lfdr.de>; Tue, 21 Jan 2020 18:11:35 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 77EB06EDD9;
	Tue, 21 Jan 2020 17:11:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C36E46EDD9
 for <intel-gfx@lists.freedesktop.org>; Tue, 21 Jan 2020 17:11:31 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 21 Jan 2020 09:11:31 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,346,1574150400"; d="scan'208";a="220022113"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga008.jf.intel.com with SMTP; 21 Jan 2020 09:11:28 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Tue, 21 Jan 2020 19:11:27 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 21 Jan 2020 19:10:58 +0200
Message-Id: <20200121171100.4370-10-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200121171100.4370-1-ville.syrjala@linux.intel.com>
References: <20200121171100.4370-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 09/11] drm/i915: Turn
 intel_digital_port_connected() in a vfunc
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkxl
dCdzIGdldCByaWQgb2YgdGhlIHBsYXRmb3JtIGlmIGxhZGRlcnMgaW4KaW50ZWxfZGlnaXRhbF9w
b3J0X2Nvbm5lY3RlZCgpIGFuZCBtYWtlIGl0IGEgdmZ1bmMuIE5vdyB0aGUgaWYKbGFkZGVycyBh
cmUgYXQgdGhlIGVuY29kZXIgaW5pdGlhbGl6YXRpb24gd2hpY2ggbWFrZXMgdGhlbSBhIGJpdAps
ZXNzIGNvbnZvbHV0ZWQuCgpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5
cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGRpLmMgICAgICB8ICAxOSArKysrCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5X3R5cGVzLmggICAgfCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kcC5jICAgICAgIHwgMTA3ICsrKysrLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kcC5oICAgICAgIHwgICA2ICsKIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfdGMuYyAgICAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF90Yy5oICAgICAgIHwgICAyICstCiA2IGZpbGVzIGNoYW5nZWQsIDYw
IGluc2VydGlvbnMoKyksIDc4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2RkaS5jCmluZGV4IGJiZjFjMGEyNDNhMi4uZDk4Mzg2MDU2MGNmIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKQEAgLTQ4OTAsNiArNDg5MCwyNSBA
QCB2b2lkIGludGVsX2RkaV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwg
ZW51bSBwb3J0IHBvcnQpCiAJCQkJcG9ydF9uYW1lKHBvcnQpKTsKIAl9CiAKKwlpZiAoSU5URUxf
R0VOKGRldl9wcml2KSA+PSAxMSkgeworCQlpZiAoaW50ZWxfcGh5X2lzX3RjKGRldl9wcml2LCBw
aHkpKQorCQkJaW50ZWxfZGlnX3BvcnQtPmNvbm5lY3RlZCA9IGludGVsX3RjX3BvcnRfY29ubmVj
dGVkOworCQllbHNlCisJCQlpbnRlbF9kaWdfcG9ydC0+Y29ubmVjdGVkID0gaWNwX2RpZ2l0YWxf
cG9ydF9jb25uZWN0ZWQ7CisJfSBlbHNlIGlmIChJU19HRU45X0xQKGRldl9wcml2KSkgeworCQlp
bnRlbF9kaWdfcG9ydC0+Y29ubmVjdGVkID0gYnh0X2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQ7CisJ
fSBlbHNlIGlmIChwb3J0ID09IFBPUlRfQSkgeworCQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+
PSA4KQorCQkJaW50ZWxfZGlnX3BvcnQtPmNvbm5lY3RlZCA9IGJkd19kaWdpdGFsX3BvcnRfY29u
bmVjdGVkOworCQllbHNlCisJCQlpbnRlbF9kaWdfcG9ydC0+Y29ubmVjdGVkID0gaXZiX2RpZ2l0
YWxfcG9ydF9jb25uZWN0ZWQ7CisJfSBlbHNlIHsKKwkJaWYgKElOVEVMX1BDSF9UWVBFKGRldl9w
cml2KSA+PSBQQ0hfU1BUKQorCQkJaW50ZWxfZGlnX3BvcnQtPmNvbm5lY3RlZCA9IHNwdF9kaWdp
dGFsX3BvcnRfY29ubmVjdGVkOworCQllbHNlCisJCQlpbnRlbF9kaWdfcG9ydC0+Y29ubmVjdGVk
ID0gY3B0X2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQ7CisJfQorCiAJaW50ZWxfaW5mb2ZyYW1lX2lu
aXQoaW50ZWxfZGlnX3BvcnQpOwogCiAJcmV0dXJuOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAppbmRleCA4YzljZmFmY2ExOTUuLjJi
MzA4YzYxMmEwMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5X3R5cGVzLmgKQEAgLTEzNzEsNiArMTM3MSw3IEBAIHN0cnVjdCBpbnRlbF9kaWdp
dGFsX3BvcnQgewogCQkJICAgICAgIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpj
b25uX3N0YXRlKTsKIAl1MzIgKCppbmZvZnJhbWVzX2VuYWJsZWQpKHN0cnVjdCBpbnRlbF9lbmNv
ZGVyICplbmNvZGVyLAogCQkJCSAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVf
Y29uZmlnKTsKKwlib29sICgqY29ubmVjdGVkKShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2Rl
cik7CiB9OwogCiBzdHJ1Y3QgaW50ZWxfZHBfbXN0X2VuY29kZXIgewpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kcC5jCmluZGV4IDk5NTYzNjc3MTJlOS4uNGUxZjczZjgwOTUxIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCkBAIC01MzcxLDcgKzUzNzEs
NyBAQCBzdGF0aWMgYm9vbCBpYnhfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChzdHJ1Y3QgaW50ZWxf
ZW5jb2RlciAqZW5jb2RlcikKIAlyZXR1cm4gSTkxNV9SRUFEKFNERUlTUikgJiBiaXQ7CiB9CiAK
LXN0YXRpYyBib29sIGNwdF9kaWdpdGFsX3BvcnRfY29ubmVjdGVkKHN0cnVjdCBpbnRlbF9lbmNv
ZGVyICplbmNvZGVyKQorYm9vbCBjcHRfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChzdHJ1Y3QgaW50
ZWxfZW5jb2RlciAqZW5jb2RlcikKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsKIAl1MzIgYml0OwpAQCAtNTM5NCw3ICs1
Mzk0LDcgQEAgc3RhdGljIGJvb2wgY3B0X2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQoc3RydWN0IGlu
dGVsX2VuY29kZXIgKmVuY29kZXIpCiAJcmV0dXJuIEk5MTVfUkVBRChTREVJU1IpICYgYml0Owog
fQogCi1zdGF0aWMgYm9vbCBzcHRfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChzdHJ1Y3QgaW50ZWxf
ZW5jb2RlciAqZW5jb2RlcikKK2Jvb2wgc3B0X2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQoc3RydWN0
IGludGVsX2VuY29kZXIgKmVuY29kZXIpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CiAJdTMyIGJpdDsKQEAgLTU0NjMs
NDMgKzU0NjMsMjQgQEAgc3RhdGljIGJvb2wgaWxrX2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQoc3Ry
dWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CiAKLQlpZiAoZW5jb2Rlci0+
aHBkX3BpbiA9PSBIUERfUE9SVF9BKQotCQlyZXR1cm4gSTkxNV9SRUFEKERFSVNSKSAmIERFX0RQ
X0FfSE9UUExVRzsKLQllbHNlCi0JCXJldHVybiBpYnhfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChl
bmNvZGVyKTsKKwlyZXR1cm4gSTkxNV9SRUFEKERFSVNSKSAmIERFX0RQX0FfSE9UUExVRzsKIH0K
IAotc3RhdGljIGJvb2wgc25iX2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIpCitib29sIGl2Yl9kaWdpdGFsX3BvcnRfY29ubmVjdGVkKHN0cnVjdCBp
bnRlbF9lbmNvZGVyICplbmNvZGVyKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOwogCi0JaWYgKGVuY29kZXItPmhwZF9w
aW4gPT0gSFBEX1BPUlRfQSkKLQkJcmV0dXJuIEk5MTVfUkVBRChERUlTUikgJiBERV9EUF9BX0hP
VFBMVUc7Ci0JZWxzZQotCQlyZXR1cm4gY3B0X2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQoZW5jb2Rl
cik7CisJcmV0dXJuIEk5MTVfUkVBRChERUlTUikgJiBERV9EUF9BX0hPVFBMVUdfSVZCOwogfQog
Ci1zdGF0aWMgYm9vbCBpdmJfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqZW5jb2RlcikKK2Jvb2wgYmR3X2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQoc3RydWN0IGlu
dGVsX2VuY29kZXIgKmVuY29kZXIpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CiAKLQlpZiAoZW5jb2Rlci0+aHBkX3Bp
biA9PSBIUERfUE9SVF9BKQotCQlyZXR1cm4gSTkxNV9SRUFEKERFSVNSKSAmIERFX0RQX0FfSE9U
UExVR19JVkI7Ci0JZWxzZQotCQlyZXR1cm4gY3B0X2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQoZW5j
b2Rlcik7CisJcmV0dXJuIEk5MTVfUkVBRChHRU44X0RFX1BPUlRfSVNSKSAmIEdFTjhfUE9SVF9E
UF9BX0hPVFBMVUc7CiB9CiAKLXN0YXRpYyBib29sIGJkd19kaWdpdGFsX3BvcnRfY29ubmVjdGVk
KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQotewotCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOwotCi0JaWYgKGVuY29k
ZXItPmhwZF9waW4gPT0gSFBEX1BPUlRfQSkKLQkJcmV0dXJuIEk5MTVfUkVBRChHRU44X0RFX1BP
UlRfSVNSKSAmIEdFTjhfUE9SVF9EUF9BX0hPVFBMVUc7Ci0JZWxzZQotCQlyZXR1cm4gY3B0X2Rp
Z2l0YWxfcG9ydF9jb25uZWN0ZWQoZW5jb2Rlcik7Ci19Ci0KLXN0YXRpYyBib29sIGJ4dF9kaWdp
dGFsX3BvcnRfY29ubmVjdGVkKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQorYm9vbCBi
eHRfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikK
IHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXIt
PmJhc2UuZGV2KTsKIAl1MzIgYml0OwpAQCAtNTUyMiwzMSArNTUwMywxNyBAQCBzdGF0aWMgYm9v
bCBieHRfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2Rl
cikKIAlyZXR1cm4gSTkxNV9SRUFEKEdFTjhfREVfUE9SVF9JU1IpICYgYml0OwogfQogCi1zdGF0
aWMgYm9vbCBpbnRlbF9jb21ib19waHlfY29ubmVjdGVkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiwKLQkJCQkgICAgICBlbnVtIHBoeSBwaHkpCitib29sIGljcF9kaWdpdGFsX3Bv
cnRfY29ubmVjdGVkKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQogeworCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOwor
CWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBlbmNvZGVyLT5wb3J0
KTsKKwogCWlmIChIQVNfUENIX01DQyhkZXZfcHJpdikgJiYgcGh5ID09IFBIWV9DKQogCQlyZXR1
cm4gSTkxNV9SRUFEKFNERUlTUikgJiBTREVfVENfSE9UUExVR19JQ1AoUE9SVF9UQzEpOwogCiAJ
cmV0dXJuIEk5MTVfUkVBRChTREVJU1IpICYgU0RFX0RESV9IT1RQTFVHX0lDUChwaHkpOwogfQog
Ci1zdGF0aWMgYm9vbCBpY3BfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqZW5jb2RlcikKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0
b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsKLQlzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpk
aWdfcG9ydCA9IGVuY190b19kaWdfcG9ydChlbmNvZGVyKTsKLQllbnVtIHBoeSBwaHkgPSBpbnRl
bF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgZW5jb2Rlci0+cG9ydCk7Ci0KLQlpZiAoaW50ZWxfcGh5
X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKQotCQlyZXR1cm4gaW50ZWxfY29tYm9fcGh5X2Nvbm5l
Y3RlZChkZXZfcHJpdiwgcGh5KTsKLQllbHNlIGlmIChpbnRlbF9waHlfaXNfdGMoZGV2X3ByaXYs
IHBoeSkpCi0JCXJldHVybiBpbnRlbF90Y19wb3J0X2Nvbm5lY3RlZChkaWdfcG9ydCk7Ci0JZWxz
ZQotCQlNSVNTSU5HX0NBU0UoZW5jb2Rlci0+aHBkX3Bpbik7Ci0KLQlyZXR1cm4gZmFsc2U7Ci19
Ci0KIC8qCiAgKiBpbnRlbF9kaWdpdGFsX3BvcnRfY29ubmVjdGVkIC0gaXMgdGhlIHNwZWNpZmll
ZCBwb3J0IGNvbm5lY3RlZD8KICAqIEBlbmNvZGVyOiBpbnRlbF9lbmNvZGVyCkBAIC01NTU4LDQ0
ICs1NTI1LDE1IEBAIHN0YXRpYyBib29sIGljcF9kaWdpdGFsX3BvcnRfY29ubmVjdGVkKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQogICoKICAqIFJldHVybiAldHJ1ZSBpZiBwb3J0IGlz
IGNvbm5lY3RlZCwgJWZhbHNlIG90aGVyd2lzZS4KICAqLwotc3RhdGljIGJvb2wgX19pbnRlbF9k
aWdpdGFsX3BvcnRfY29ubmVjdGVkKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQotewot
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFz
ZS5kZXYpOwotCi0JaWYgKEhBU19HTUNIKGRldl9wcml2KSkgewotCQlpZiAoSVNfR000NShkZXZf
cHJpdikpCi0JCQlyZXR1cm4gZ200NV9kaWdpdGFsX3BvcnRfY29ubmVjdGVkKGVuY29kZXIpOwot
CQllbHNlCi0JCQlyZXR1cm4gZzR4X2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQoZW5jb2Rlcik7Ci0J
fQotCi0JaWYgKElOVEVMX1BDSF9UWVBFKGRldl9wcml2KSA+PSBQQ0hfSUNQKQotCQlyZXR1cm4g
aWNwX2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQoZW5jb2Rlcik7Ci0JZWxzZSBpZiAoSU5URUxfUENI
X1RZUEUoZGV2X3ByaXYpID49IFBDSF9TUFQpCi0JCXJldHVybiBzcHRfZGlnaXRhbF9wb3J0X2Nv
bm5lY3RlZChlbmNvZGVyKTsKLQllbHNlIGlmIChJU19HRU45X0xQKGRldl9wcml2KSkKLQkJcmV0
dXJuIGJ4dF9kaWdpdGFsX3BvcnRfY29ubmVjdGVkKGVuY29kZXIpOwotCWVsc2UgaWYgKElTX0dF
TihkZXZfcHJpdiwgOCkpCi0JCXJldHVybiBiZHdfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChlbmNv
ZGVyKTsKLQllbHNlIGlmIChJU19HRU4oZGV2X3ByaXYsIDcpKQotCQlyZXR1cm4gaXZiX2RpZ2l0
YWxfcG9ydF9jb25uZWN0ZWQoZW5jb2Rlcik7Ci0JZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCA2
KSkKLQkJcmV0dXJuIHNuYl9kaWdpdGFsX3BvcnRfY29ubmVjdGVkKGVuY29kZXIpOwotCWVsc2Ug
aWYgKElTX0dFTihkZXZfcHJpdiwgNSkpCi0JCXJldHVybiBpbGtfZGlnaXRhbF9wb3J0X2Nvbm5l
Y3RlZChlbmNvZGVyKTsKLQotCU1JU1NJTkdfQ0FTRShJTlRFTF9HRU4oZGV2X3ByaXYpKTsKLQly
ZXR1cm4gZmFsc2U7Ci19Ci0KIGJvb2wgaW50ZWxfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChzdHJ1
Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsKKwlzdHJ1Y3QgaW50ZWxfZGln
aXRhbF9wb3J0ICpkaWdfcG9ydCA9IGVuY190b19kaWdfcG9ydChlbmNvZGVyKTsKIAlib29sIGlz
X2Nvbm5lY3RlZCA9IGZhbHNlOwogCWludGVsX3dha2VyZWZfdCB3YWtlcmVmOwogCiAJd2l0aF9p
bnRlbF9kaXNwbGF5X3Bvd2VyKGRldl9wcml2LCBQT1dFUl9ET01BSU5fRElTUExBWV9DT1JFLCB3
YWtlcmVmKQotCQlpc19jb25uZWN0ZWQgPSBfX2ludGVsX2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQo
ZW5jb2Rlcik7CisJCWlzX2Nvbm5lY3RlZCA9IGRpZ19wb3J0LT5jb25uZWN0ZWQoZW5jb2Rlcik7
CiAKIAlyZXR1cm4gaXNfY29ubmVjdGVkOwogfQpAQCAtNzYzNCw2ICs3NTcyLDIzIEBAIGJvb2wg
aW50ZWxfZHBfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAKIAlpbnRl
bF9kaWdfcG9ydC0+aHBkX3B1bHNlID0gaW50ZWxfZHBfaHBkX3B1bHNlOwogCisJaWYgKEhBU19H
TUNIKGRldl9wcml2KSkgeworCQlpZiAoSVNfR000NShkZXZfcHJpdikpCisJCQlpbnRlbF9kaWdf
cG9ydC0+Y29ubmVjdGVkID0gZ200NV9kaWdpdGFsX3BvcnRfY29ubmVjdGVkOworCQllbHNlCisJ
CQlpbnRlbF9kaWdfcG9ydC0+Y29ubmVjdGVkID0gZzR4X2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQ7
CisJfSBlbHNlIGlmIChwb3J0ID09IFBPUlRfQSkgeworCQlpZiAoSVNfSVZZQlJJREdFKGRldl9w
cml2KSkKKwkJCWludGVsX2RpZ19wb3J0LT5jb25uZWN0ZWQgPSBpdmJfZGlnaXRhbF9wb3J0X2Nv
bm5lY3RlZDsKKwkJZWxzZQorCQkJaW50ZWxfZGlnX3BvcnQtPmNvbm5lY3RlZCA9IGlsa19kaWdp
dGFsX3BvcnRfY29ubmVjdGVkOworCX0gZWxzZSB7CisJCWlmIChIQVNfUENIX0NQVChkZXZfcHJp
dikpCisJCQlpbnRlbF9kaWdfcG9ydC0+Y29ubmVjdGVkID0gY3B0X2RpZ2l0YWxfcG9ydF9jb25u
ZWN0ZWQ7CisJCWVsc2UKKwkJCWludGVsX2RpZ19wb3J0LT5jb25uZWN0ZWQgPSBpYnhfZGlnaXRh
bF9wb3J0X2Nvbm5lY3RlZDsKKwl9CisKIAlpZiAocG9ydCAhPSBQT1JUX0EpCiAJCWludGVsX2lu
Zm9mcmFtZV9pbml0KGludGVsX2RpZ19wb3J0KTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kcC5oCmluZGV4IDNkYTE2NjA1NDc4OC4uY2YwZGY2ZjE4NzM0IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmgKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5oCkBAIC0xMTYsNiArMTE2LDEyIEBAIHZvaWQg
aW50ZWxfZHBfdnNjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogdm9pZCBpbnRl
bF9kcF9oZHJfbWV0YWRhdGFfZW5hYmxlKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsCiAJCQkJ
ICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJCQkgIGNvbnN0
IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRlKTsKK2Jvb2wgY3B0X2RpZ2l0
YWxfcG9ydF9jb25uZWN0ZWQoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIpOworYm9vbCBz
cHRfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2Rlcik7
Citib29sIGl2Yl9kaWdpdGFsX3BvcnRfY29ubmVjdGVkKHN0cnVjdCBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyKTsKK2Jvb2wgYmR3X2RpZ2l0YWxfcG9ydF9jb25uZWN0ZWQoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIpOworYm9vbCBieHRfZGlnaXRhbF9wb3J0X2Nvbm5lY3RlZChzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2Rlcik7Citib29sIGljcF9kaWdpdGFsX3BvcnRfY29ubmVjdGVk
KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKTsKIGJvb2wgaW50ZWxfZGlnaXRhbF9wb3J0
X2Nvbm5lY3RlZChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2Rlcik7CiAKIHN0YXRpYyBpbmxp
bmUgdW5zaWduZWQgaW50IGludGVsX2RwX3VudXNlZF9sYW5lX21hc2soaW50IGxhbmVfY291bnQp
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3RjLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3RjLmMKaW5kZXggNzc3MzE2OWI3MzMx
Li5mNDk4MDc2YjEzMmMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfdGMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3RjLmMK
QEAgLTQ3Nyw4ICs0NzcsOSBAQCBzdGF0aWMgYm9vbCBpbnRlbF90Y19wb3J0X25lZWRzX3Jlc2V0
KHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0KQogICogY29ubmVjdGVkIHBvcnRz
IGFyZSB1c2FibGUsIGFuZCBhdm9pZHMgZXhwb3NpbmcgdG8gdGhlIHVzZXJzIG9iamVjdHMgdGhl
eQogICogY2FuJ3QgcmVhbGx5IHVzZS4KICAqLwotYm9vbCBpbnRlbF90Y19wb3J0X2Nvbm5lY3Rl
ZChzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCkKK2Jvb2wgaW50ZWxfdGNfcG9y
dF9jb25uZWN0ZWQoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIpCiB7CisJc3RydWN0IGlu
dGVsX2RpZ2l0YWxfcG9ydCAqZGlnX3BvcnQgPSBlbmNfdG9fZGlnX3BvcnQoZW5jb2Rlcik7CiAJ
Ym9vbCBpc19jb25uZWN0ZWQ7CiAKIAlpbnRlbF90Y19wb3J0X2xvY2soZGlnX3BvcnQpOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF90Yy5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF90Yy5oCmluZGV4IDQ2M2YxYjNjODM2Zi4uZmFl
Y2NmM2U0ZWI2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X3RjLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF90Yy5oCkBAIC0x
MSw3ICsxMSw3IEBACiAKIHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQ7CiAKLWJvb2wgaW50ZWxf
dGNfcG9ydF9jb25uZWN0ZWQoc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqZGlnX3BvcnQpOwor
Ym9vbCBpbnRlbF90Y19wb3J0X2Nvbm5lY3RlZChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2Rl
cik7CiB1MzIgaW50ZWxfdGNfcG9ydF9nZXRfbGFuZV9tYXNrKHN0cnVjdCBpbnRlbF9kaWdpdGFs
X3BvcnQgKmRpZ19wb3J0KTsKIHUzMiBpbnRlbF90Y19wb3J0X2dldF9waW5fYXNzaWdubWVudF9t
YXNrKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0KTsKIGludCBpbnRlbF90Y19w
b3J0X2ZpYV9tYXhfbGFuZV9jb3VudChzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9y
dCk7Ci0tIAoyLjI0LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVs
LWdmeAo=

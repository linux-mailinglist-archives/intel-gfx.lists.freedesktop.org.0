Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D31E58A31F
	for <lists+intel-gfx@lfdr.de>; Mon, 12 Aug 2019 18:16:56 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E6F866E578;
	Mon, 12 Aug 2019 16:16:54 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 217476E574
 for <intel-gfx@lists.freedesktop.org>; Mon, 12 Aug 2019 16:16:52 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 17972133-1500050 for multiple; Mon, 12 Aug 2019 17:16:44 +0100
MIME-Version: 1.0
To: Mika Kuoppala <mika.kuoppala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <20190812160108.16973-1-mika.kuoppala@linux.intel.com>
References: <20190812160108.16973-1-mika.kuoppala@linux.intel.com>
Message-ID: <156562660318.2301.11470842796548311941@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Mon, 12 Aug 2019 17:16:43 +0100
Subject: Re: [Intel-gfx] [PATCH 1/2] drm/i915/icl: Implement gen11 flush
 including tile cache
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBNaWthIEt1b3BwYWxhICgyMDE5LTA4LTEyIDE3OjAxOjA3KQo+IEFkZCB0aWxlIGNh
Y2hlIGZsdXNoaW5nIGZvciBnZW4xMS4gVG8gcmVsaXZlIHVzIGZyb20gdGhlCj4gYnVyZGVuIG9m
IHByZXZpb3VzIG9ic29sZXRlIHdvcmthcm91bmRzLCBtYWtlIGEgZGVkaWNhdGVkCj4gZmx1c2gv
aW52YWxpZGF0ZSBjYWxsYmFjayBmb3IgZ2VuMTEuCj4gCj4gVG8gZm9ydGlmeSBhbiBpbmRlcGVu
ZGVudCBzaW5nbGUgZmx1c2gsIGRvIHBvc3QKPiBzeW5jIG9wIGFzIHRoZXJlIGFyZSBpbmRpY2F0
aW9ucyB0aGF0IHdpdGhvdXQgaXQKPiB3ZSBkb24ndCBmbHVzaCBldmVyeXRoaW5nLiBUaGlzIHNo
b3VsZCBhbHNvIG1ha2UgdGhpcwo+IGNhbGxiYWNrIG1vcmUgcmVhZGlseSB1c2FibGUgaW4gdGds
IChzZWUgbDMgZmFicmljIGZsdXNoKS4KPiAKPiBDYzogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJp
cy13aWxzb24uY28udWs+Cj4gQ2M6IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUuY2Vy
YW9sb3NwdXJpb0BpbnRlbC5jb20+Cj4gU2lnbmVkLW9mZi1ieTogTWlrYSBLdW9wcGFsYSA8bWlr
YS5rdW9wcGFsYUBsaW51eC5pbnRlbC5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oIHwgIDEgKwo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9scmMuYyAgICAgICAgICB8IDYzICsrKysrKysrKysrKysrKysrKystCj4gIDIgZmls
ZXMgY2hhbmdlZCwgNjMgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQo+IAo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ncHVfY29tbWFuZHMuaCBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oCj4gaW5kZXggNmEwODc5YzI3
ZDE0Li45MjlhMTdlNTRmMmMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfZ3B1X2NvbW1hbmRzLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9ncHVfY29tbWFuZHMuaAo+IEBAIC0yMDgsNiArMjA4LDcgQEAKPiAgI2RlZmluZSAgIERJU1BM
QVlfUExBTkVfQSAgICAgICAgICAgKDA8PDIwKQo+ICAjZGVmaW5lICAgRElTUExBWV9QTEFORV9C
ICAgICAgICAgICAoMTw8MjApCj4gICNkZWZpbmUgR0ZYX09QX1BJUEVfQ09OVFJPTChsZW4pICAg
ICAgICgoMHgzPDwyOSl8KDB4Mzw8MjcpfCgweDI8PDI0KXwoKGxlbiktMikpCj4gKyNkZWZpbmUg
ICBQSVBFX0NPTlRST0xfVElMRV9DQUNIRV9GTFVTSCAgICAgICAgICAgICAgICAgICAgICAgICgx
PDwyOCkgLyogZ2VuMTErICovCkFjay4KCj4gICNkZWZpbmUgICBQSVBFX0NPTlRST0xfRkxVU0hf
TDMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgxPDwyNykKPiAgI2RlZmluZSAgIFBJ
UEVfQ09OVFJPTF9HTE9CQUxfR1RUX0lWQiAgICAgICAgICAgICAgICAgICgxPDwyNCkgLyogZ2Vu
NysgKi8KPiAgI2RlZmluZSAgIFBJUEVfQ09OVFJPTF9NTUlPX1dSSVRFICAgICAgICAgICAgICAg
ICAgICAgICgxPDwyMykKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwo+IGluZGV4IGI5
NzA0N2Q1OGQzZC4uODkxZGIzYzkzM2M5IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2xyYy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
bHJjLmMKPiBAQCAtMjY1NSw2ICsyNjU1LDY0IEBAIHN0YXRpYyBpbnQgZ2VuOF9lbWl0X2ZsdXNo
X3JlbmRlcihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0LAo+ICAgICAgICAgcmV0dXJuIDA7
Cj4gIH0KPiAgCj4gK3N0YXRpYyBpbnQgZ2VuMTFfZW1pdF9mbHVzaF9yZW5kZXIoc3RydWN0IGk5
MTVfcmVxdWVzdCAqcmVxdWVzdCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHUzMiBtb2RlKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUg
PSByZXF1ZXN0LT5lbmdpbmU7Cj4gKyAgICAgICBjb25zdCB1MzIgc2NyYXRjaF9hZGRyID0KPiAr
ICAgICAgICAgICAgICAgaW50ZWxfZ3Rfc2NyYXRjaF9vZmZzZXQoZW5naW5lLT5ndCwKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSU5URUxfR1RfU0NSQVRDSF9GSUVM
RF9SRU5ERVJfRkxVU0gpOwo+ICsKPiArICAgICAgIGlmIChtb2RlICYgRU1JVF9GTFVTSCkgewo+
ICsgICAgICAgICAgICAgICB1MzIgKmNzOwo+ICsgICAgICAgICAgICAgICB1MzIgZmxhZ3MgPSAw
Owo+ICsKPiArICAgICAgICAgICAgICAgZmxhZ3MgfD0gUElQRV9DT05UUk9MX0NTX1NUQUxMOwo+
ICsKPiArICAgICAgICAgICAgICAgZmxhZ3MgfD0gUElQRV9DT05UUk9MX1RJTEVfQ0FDSEVfRkxV
U0g7Cj4gKyAgICAgICAgICAgICAgIGZsYWdzIHw9IFBJUEVfQ09OVFJPTF9SRU5ERVJfVEFSR0VU
X0NBQ0hFX0ZMVVNIOwo+ICsgICAgICAgICAgICAgICBmbGFncyB8PSBQSVBFX0NPTlRST0xfREVQ
VEhfQ0FDSEVfRkxVU0g7Cj4gKyAgICAgICAgICAgICAgIGZsYWdzIHw9IFBJUEVfQ09OVFJPTF9E
Q19GTFVTSF9FTkFCTEU7Cj4gKyAgICAgICAgICAgICAgIGZsYWdzIHw9IFBJUEVfQ09OVFJPTF9G
TFVTSF9FTkFCTEU7Cj4gKyAgICAgICAgICAgICAgIGZsYWdzIHw9IFBJUEVfQ09OVFJPTF9RV19X
UklURTsKPiArICAgICAgICAgICAgICAgZmxhZ3MgfD0gUElQRV9DT05UUk9MX0dMT0JBTF9HVFRf
SVZCOwoKT2suCgo+ICsKPiArICAgICAgICAgICAgICAgY3MgPSBpbnRlbF9yaW5nX2JlZ2luKHJl
cXVlc3QsIDYpOwo+ICsgICAgICAgICAgICAgICBpZiAoSVNfRVJSKGNzKSkKPiArICAgICAgICAg
ICAgICAgICAgICAgICByZXR1cm4gUFRSX0VSUihjcyk7Cj4gKwo+ICsgICAgICAgICAgICAgICBj
cyA9IGdlbjhfZW1pdF9waXBlX2NvbnRyb2woY3MsIGZsYWdzLCBzY3JhdGNoX2FkZHIpOwo+ICsK
ClBlcnNvbmFsbHksIEkgd291bGRuJ3QgbGVhdmUgYSBuZXdsaW5lIGhlcmUuCj4gKyAgICAgICAg
ICAgICAgIGludGVsX3JpbmdfYWR2YW5jZShyZXF1ZXN0LCBjcyk7Cj4gKyAgICAgICB9Cj4gKwo+
ICsgICAgICAgaWYgKG1vZGUgJiBFTUlUX0lOVkFMSURBVEUpIHsKPiArICAgICAgICAgICAgICAg
dTMyICpjczsKPiArICAgICAgICAgICAgICAgdTMyIGZsYWdzID0gMDsKPiArCj4gKyAgICAgICAg
ICAgICAgIGZsYWdzIHw9IFBJUEVfQ09OVFJPTF9DU19TVEFMTDsKPiArCj4gKyAgICAgICAgICAg
ICAgIGZsYWdzIHw9IFBJUEVfQ09OVFJPTF9UTEJfSU5WQUxJREFURTsKPiArICAgICAgICAgICAg
ICAgZmxhZ3MgfD0gUElQRV9DT05UUk9MX0lOU1RSVUNUSU9OX0NBQ0hFX0lOVkFMSURBVEU7Cj4g
KyAgICAgICAgICAgICAgIGZsYWdzIHw9IFBJUEVfQ09OVFJPTF9URVhUVVJFX0NBQ0hFX0lOVkFM
SURBVEU7Cj4gKyAgICAgICAgICAgICAgIGZsYWdzIHw9IFBJUEVfQ09OVFJPTF9WRl9DQUNIRV9J
TlZBTElEQVRFOwo+ICsgICAgICAgICAgICAgICBmbGFncyB8PSBQSVBFX0NPTlRST0xfQ09OU1Rf
Q0FDSEVfSU5WQUxJREFURTsKPiArICAgICAgICAgICAgICAgZmxhZ3MgfD0gUElQRV9DT05UUk9M
X1NUQVRFX0NBQ0hFX0lOVkFMSURBVEU7Cj4gKyAgICAgICAgICAgICAgIGZsYWdzIHw9IFBJUEVf
Q09OVFJPTF9RV19XUklURTsKPiArICAgICAgICAgICAgICAgZmxhZ3MgfD0gUElQRV9DT05UUk9M
X0dMT0JBTF9HVFRfSVZCOwoKT2suCgo+ICsKPiArICAgICAgICAgICAgICAgY3MgPSBpbnRlbF9y
aW5nX2JlZ2luKHJlcXVlc3QsIDYpOwo+ICsgICAgICAgICAgICAgICBpZiAoSVNfRVJSKGNzKSkK
PiArICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUFRSX0VSUihjcyk7Cj4gKwo+ICsgICAg
ICAgICAgICAgICBjcyA9IGdlbjhfZW1pdF9waXBlX2NvbnRyb2woY3MsIGZsYWdzLCBzY3JhdGNo
X2FkZHIpOwo+ICsKPiArICAgICAgICAgICAgICAgaW50ZWxfcmluZ19hZHZhbmNlKHJlcXVlc3Qs
IGNzKTsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICByZXR1cm4gMDsKPiArfQo+ICsKPiAgLyoK
PiAgICogUmVzZXJ2ZSBzcGFjZSBmb3IgMiBOT09QcyBhdCB0aGUgZW5kIG9mIGVhY2ggcmVxdWVz
dCB0byBiZQo+ICAgKiB1c2VkIGFzIGEgd29ya2Fyb3VuZCBmb3Igbm90IGJlaW5nIGFsbG93ZWQg
dG8gZG8gbGl0ZQo+IEBAIC0yODI5LDcgKzI4ODcsMTAgQEAgaW50IGludGVsX2V4ZWNsaXN0c19z
dWJtaXNzaW9uX3NldHVwKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAgICAgICAg
IGxvZ2ljYWxfcmluZ19kZWZhdWx0X2lycXMoZW5naW5lKTsKPiAgCj4gICAgICAgICBpZiAoZW5n
aW5lLT5jbGFzcyA9PSBSRU5ERVJfQ0xBU1MpIHsKPiAtICAgICAgICAgICAgICAgZW5naW5lLT5l
bWl0X2ZsdXNoID0gZ2VuOF9lbWl0X2ZsdXNoX3JlbmRlcjsKPiArICAgICAgICAgICAgICAgaWYg
KElOVEVMX0dFTihlbmdpbmUtPmk5MTUpID49IDExKQo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGVuZ2luZS0+ZW1pdF9mbHVzaCA9IGdlbjExX2VtaXRfZmx1c2hfcmVuZGVyOwo+ICsgICAgICAg
ICAgICAgICBlbHNlCj4gKyAgICAgICAgICAgICAgICAgICAgICAgZW5naW5lLT5lbWl0X2ZsdXNo
ID0gZ2VuOF9lbWl0X2ZsdXNoX3JlbmRlcjsKPiAgICAgICAgICAgICAgICAgZW5naW5lLT5lbWl0
X2ZpbmlfYnJlYWRjcnVtYiA9IGdlbjhfZW1pdF9maW5pX2JyZWFkY3J1bWJfcmNzOwoKTm8gZmlu
aSBicmVhZGNydW1iIGZsdXNoPwotQ2hyaXMKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlz
dGluZm8vaW50ZWwtZ2Z4

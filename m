Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3E01AB7B85
	for <lists+intel-gfx@lfdr.de>; Thu, 19 Sep 2019 16:04:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9C31D6F7E5;
	Thu, 19 Sep 2019 14:04:30 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 67FBB6F7E5
 for <intel-gfx@lists.freedesktop.org>; Thu, 19 Sep 2019 14:04:29 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 19 Sep 2019 07:04:29 -0700
X-IronPort-AV: E=Sophos;i="5.64,523,1559545200"; d="scan'208";a="192054916"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga006-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 19 Sep 2019 07:04:26 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 19 Sep 2019 17:03:50 +0300
Message-Id: <63de4004acfe83b055ec9016f577c2d1e47e96c1.1568901239.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1568901239.git.jani.nikula@intel.com>
References: <cover.1568901239.git.jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH 03/13] drm/i915: pass i915 to
 intel_modeset_driver_remove()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SW4gZ2VuZXJhbCwgcHJlZmVyIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICogb3ZlciBzdHJ1Y3Qg
ZHJtX2RldmljZSAqCndoZW4gZWl0aGVyIHdpbGwgZG8uIFJlbmFtZSB0aGUgbG9jYWwgdmFyaWFi
bGUgdG8gaTkxNS4gQWxzbyBwcm9wYWdhdGUKdG8gaW50ZWxfaHBkX3BvbGxfZmluaSgpLiBObyBm
dW5jdGlvbmFsIGNoYW5nZXMuCgpTaWduZWQtb2ZmLWJ5OiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1
bGFAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheS5jIHwgMzggKysrKysrKysrKy0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGlzcGxheS5oIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmMgICAgICAgICAgICAgIHwgIDQgKy0tCiAzIGZpbGVzIGNoYW5nZWQsIDIxIGluc2VydGlv
bnMoKyksIDIzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kaXNwbGF5LmMKaW5kZXggMWNjNzQ4NDRkM2VhLi5jMGZjNjY5MDNmZWMgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC0xNzAyNywxMyAr
MTcwMjcsMTMgQEAgdm9pZCBpbnRlbF9kaXNwbGF5X3Jlc3VtZShzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2KQogCQlkcm1fYXRvbWljX3N0YXRlX3B1dChzdGF0ZSk7CiB9CiAKLXN0YXRpYyB2b2lkIGlu
dGVsX2hwZF9wb2xsX2Zpbmkoc3RydWN0IGRybV9kZXZpY2UgKmRldikKK3N0YXRpYyB2b2lkIGlu
dGVsX2hwZF9wb2xsX2Zpbmkoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB7CiAJc3Ry
dWN0IGludGVsX2Nvbm5lY3RvciAqY29ubmVjdG9yOwogCXN0cnVjdCBkcm1fY29ubmVjdG9yX2xp
c3RfaXRlciBjb25uX2l0ZXI7CiAKIAkvKiBLaWxsIGFsbCB0aGUgd29yayB0aGF0IG1heSBoYXZl
IGJlZW4gcXVldWVkIGJ5IGhwZC4gKi8KLQlkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9iZWdpbihk
ZXYsICZjb25uX2l0ZXIpOworCWRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKCZpOTE1LT5k
cm0sICZjb25uX2l0ZXIpOwogCWZvcl9lYWNoX2ludGVsX2Nvbm5lY3Rvcl9pdGVyKGNvbm5lY3Rv
ciwgJmNvbm5faXRlcikgewogCQlpZiAoY29ubmVjdG9yLT5tb2Rlc2V0X3JldHJ5X3dvcmsuZnVu
YykKIAkJCWNhbmNlbF93b3JrX3N5bmMoJmNvbm5lY3Rvci0+bW9kZXNldF9yZXRyeV93b3JrKTsK
QEAgLTE3MDQ1LDUxICsxNzA0NSw0OSBAQCBzdGF0aWMgdm9pZCBpbnRlbF9ocGRfcG9sbF9maW5p
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiAJZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZj
b25uX2l0ZXIpOwogfQogCi12b2lkIGludGVsX21vZGVzZXRfZHJpdmVyX3JlbW92ZShzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2KQordm9pZCBpbnRlbF9tb2Rlc2V0X2RyaXZlcl9yZW1vdmUoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2ID0gdG9faTkxNShkZXYpOwotCi0JZmx1c2hfd29ya3F1ZXVlKGRldl9wcml2LT5mbGlw
X3dxKTsKLQlmbHVzaF93b3JrcXVldWUoZGV2X3ByaXYtPm1vZGVzZXRfd3EpOworCWZsdXNoX3dv
cmtxdWV1ZShpOTE1LT5mbGlwX3dxKTsKKwlmbHVzaF93b3JrcXVldWUoaTkxNS0+bW9kZXNldF93
cSk7CiAKLQlmbHVzaF93b3JrKCZkZXZfcHJpdi0+YXRvbWljX2hlbHBlci5mcmVlX3dvcmspOwot
CVdBUk5fT04oIWxsaXN0X2VtcHR5KCZkZXZfcHJpdi0+YXRvbWljX2hlbHBlci5mcmVlX2xpc3Qp
KTsKKwlmbHVzaF93b3JrKCZpOTE1LT5hdG9taWNfaGVscGVyLmZyZWVfd29yayk7CisJV0FSTl9P
TighbGxpc3RfZW1wdHkoJmk5MTUtPmF0b21pY19oZWxwZXIuZnJlZV9saXN0KSk7CiAKIAkvKgog
CSAqIEludGVycnVwdHMgYW5kIHBvbGxpbmcgYXMgdGhlIGZpcnN0IHRoaW5nIHRvIGF2b2lkIGNy
ZWF0aW5nIGhhdm9jLgogCSAqIFRvbyBtdWNoIHN0dWZmIGhlcmUgKHR1cm5pbmcgb2YgY29ubmVj
dG9ycywgLi4uKSB3b3VsZAogCSAqIGV4cGVyaWVuY2UgZmFuY3kgcmFjZXMgb3RoZXJ3aXNlLgog
CSAqLwotCWludGVsX2lycV91bmluc3RhbGwoZGV2X3ByaXYpOworCWludGVsX2lycV91bmluc3Rh
bGwoaTkxNSk7CiAKIAkvKgogCSAqIER1ZSB0byB0aGUgaHBkIGlycSBzdG9ybSBoYW5kbGluZyB0
aGUgaG90cGx1ZyB3b3JrIGNhbiByZS1hcm0gdGhlCiAJICogcG9sbCBoYW5kbGVycy4gSGVuY2Ug
ZGlzYWJsZSBwb2xsaW5nIGFmdGVyIGhwZCBoYW5kbGluZyBpcyBzaHV0IGRvd24uCiAJICovCi0J
aW50ZWxfaHBkX3BvbGxfZmluaShkZXYpOworCWludGVsX2hwZF9wb2xsX2ZpbmkoaTkxNSk7CiAK
IAkvKiBwb2xsIHdvcmsgY2FuIGNhbGwgaW50byBmYmRldiwgaGVuY2UgY2xlYW4gdGhhdCB1cCBh
ZnRlcndhcmRzICovCi0JaW50ZWxfZmJkZXZfZmluaShkZXZfcHJpdik7CisJaW50ZWxfZmJkZXZf
ZmluaShpOTE1KTsKIAogCWludGVsX3VucmVnaXN0ZXJfZHNtX2hhbmRsZXIoKTsKIAotCWludGVs
X2ZiY19nbG9iYWxfZGlzYWJsZShkZXZfcHJpdik7CisJaW50ZWxfZmJjX2dsb2JhbF9kaXNhYmxl
KGk5MTUpOwogCiAJLyogZmx1c2ggYW55IGRlbGF5ZWQgdGFza3Mgb3IgcGVuZGluZyB3b3JrICov
CiAJZmx1c2hfc2NoZWR1bGVkX3dvcmsoKTsKIAotCWludGVsX2hkY3BfY29tcG9uZW50X2Zpbmko
ZGV2X3ByaXYpOworCWludGVsX2hkY3BfY29tcG9uZW50X2ZpbmkoaTkxNSk7CiAKLQlkcm1fbW9k
ZV9jb25maWdfY2xlYW51cChkZXYpOworCWRybV9tb2RlX2NvbmZpZ19jbGVhbnVwKCZpOTE1LT5k
cm0pOwogCi0JaW50ZWxfb3ZlcmxheV9jbGVhbnVwKGRldl9wcml2KTsKKwlpbnRlbF9vdmVybGF5
X2NsZWFudXAoaTkxNSk7CiAKLQlpbnRlbF9nbWJ1c190ZWFyZG93bihkZXZfcHJpdik7CisJaW50
ZWxfZ21idXNfdGVhcmRvd24oaTkxNSk7CiAKLQlkZXN0cm95X3dvcmtxdWV1ZShkZXZfcHJpdi0+
ZmxpcF93cSk7Ci0JZGVzdHJveV93b3JrcXVldWUoZGV2X3ByaXYtPm1vZGVzZXRfd3EpOworCWRl
c3Ryb3lfd29ya3F1ZXVlKGk5MTUtPmZsaXBfd3EpOworCWRlc3Ryb3lfd29ya3F1ZXVlKGk5MTUt
Pm1vZGVzZXRfd3EpOwogCi0JaW50ZWxfZmJjX2NsZWFudXBfY2ZiKGRldl9wcml2KTsKKwlpbnRl
bF9mYmNfY2xlYW51cF9jZmIoaTkxNSk7CiB9CiAKIC8qCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5oCmluZGV4IDY2MzMwZmNiMTBkNC4uZGZhNjI5MWYxZjM3
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXku
aAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuaApAQCAt
NTc0LDcgKzU3NCw3IEBAIHZvaWQgaW50ZWxfZGlzcGxheV9wcmludF9lcnJvcl9zdGF0ZShzdHJ1
Y3QgZHJtX2k5MTVfZXJyb3Jfc3RhdGVfYnVmICplLAogLyogbW9kZXNldHRpbmcgKi8KIHZvaWQg
aW50ZWxfbW9kZXNldF9pbml0X2h3KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwogaW50IGludGVs
X21vZGVzZXRfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKLXZvaWQgaW50ZWxfbW9kZXNl
dF9kcml2ZXJfcmVtb3ZlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwordm9pZCBpbnRlbF9tb2Rl
c2V0X2RyaXZlcl9yZW1vdmUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwogaW50IGlu
dGVsX21vZGVzZXRfdmdhX3NldF9zdGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsIGJvb2wgc3RhdGUpOwogdm9pZCBpbnRlbF9kaXNwbGF5X3Jlc3VtZShzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2KTsKIHZvaWQgaTkxNV9yZWRpc2FibGVfdmdhKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwppbmRleCAzZTRlYTVkNmZjYzIu
LmQ5YjllOTY0NGY1YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCkBAIC00MDcsNyArNDA3LDcg
QEAgc3RhdGljIGludCBpOTE1X2RyaXZlcl9tb2Rlc2V0X3Byb2JlKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1KQogCWk5MTVfZ2VtX2RyaXZlcl9yZW1vdmUoaTkxNSk7CiAJaTkxNV9nZW1f
ZHJpdmVyX3JlbGVhc2UoaTkxNSk7CiBjbGVhbnVwX21vZGVzZXQ6Ci0JaW50ZWxfbW9kZXNldF9k
cml2ZXJfcmVtb3ZlKCZpOTE1LT5kcm0pOworCWludGVsX21vZGVzZXRfZHJpdmVyX3JlbW92ZShp
OTE1KTsKIGNsZWFudXBfaXJxOgogCWludGVsX2lycV91bmluc3RhbGwoaTkxNSk7CiAJaW50ZWxf
Z21idXNfdGVhcmRvd24oaTkxNSk7CkBAIC00MjUsNyArNDI1LDcgQEAgc3RhdGljIHZvaWQgaTkx
NV9kcml2ZXJfbW9kZXNldF9yZW1vdmUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB7
CiAJc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBpOTE1LT5kcm0ucGRldjsKIAotCWludGVsX21vZGVz
ZXRfZHJpdmVyX3JlbW92ZSgmaTkxNS0+ZHJtKTsKKwlpbnRlbF9tb2Rlc2V0X2RyaXZlcl9yZW1v
dmUoaTkxNSk7CiAKIAlpbnRlbF9iaW9zX2RyaXZlcl9yZW1vdmUoaTkxNSk7CiAKLS0gCjIuMjAu
MQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwt
Z2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 253A2E3227
	for <lists+intel-gfx@lfdr.de>; Thu, 24 Oct 2019 14:21:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 54DD86E358;
	Thu, 24 Oct 2019 12:21:51 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BF09C6E356
 for <intel-gfx@lists.freedesktop.org>; Thu, 24 Oct 2019 12:21:46 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 24 Oct 2019 05:21:46 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,224,1569308400"; d="scan'208";a="197719831"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by fmsmga007.fm.intel.com with SMTP; 24 Oct 2019 05:21:44 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Thu, 24 Oct 2019 15:21:43 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 24 Oct 2019 15:21:38 +0300
Message-Id: <20191024122138.25065-3-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191024122138.25065-1-ville.syrjala@linux.intel.com>
References: <20191024122138.25065-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 3/3] drm/i915: Fix frame start delay programming
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkN1
cnJlbnRseSB3ZSdyZSBibGluZGx5IHBva2luZyBhdCB0aGUgZnJhbWUgc3RhcnQgZGVsYXkgYml0
cwppbiBQSVBFQ09ORiB3aGVuIHRyeWluZyB0byBzYW5pdGl6ZSB0aGUgaGFyZHdhcmUgc3RhdGUu
IFRob3NlCmJpdHMgZGVjaWRlZCB0byBtb3ZlIGVsc2V3aGVyZSBvbiBIU1csIHNvIG9uIG1hbnkg
cGxhdGZvcm1zCndlJ3JlIG5vdCBkb2luZyBhbnl0aGluZyBhdCBhbGwgaGVyZS4gQWxzbyB3ZSdy
ZSBmb3JnZXR0aW5nCmFib3V0IHRoZSBQQ0ggdHJhbnNjb2RlciBlbnRpcmVseS4KCkFkZCBhbGwg
dGhlIGJpdCBkZWZpbml0aW9ucyBmb3IgdGhlIHZhcmlvdXMgaG9tZXMgdGhlc2UgYml0cwpoYXZl
IGhhZCB0aHJvdWdob3V0IHRoZSB5ZWFycywgYW5kIHJlc2V0IHRoZW0gYWxsIHRvIHplcm8uCgpI
b3dldmVyIEknbSBub3QgZW50aXJlbHkgc3VyZSB0aGlzIGlzIGEgc2FmZSB0aGluZyB0byBkby4g
SWYKbm90IEkgZ3Vlc3Mgd2UnZCB3YW50IGZ1bGwgcmVhZG91dCtzdGF0ZWNoZWNrIGZvciB0aGlz
IHN0dWZmLgpGb3Igbm93IGxldCdzIHN0aWNrIHRvIHRoZSBjdXJyZW50IGxvZ2ljIGFuZCBob3Bl
IGZvciB0aGUKYmVzdC4KClNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3ly
amFsYUBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kaXNwbGF5LmMgfCAxMDEgKysrKysrKysrKysrKysrKy0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9yZWcuaCAgICAgICAgICAgICAgfCAgMTIgKystCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9wbS5jICAgICAgICAgICAgICB8ICAgMSAtCiAzIGZpbGVzIGNoYW5nZWQsIDk1
IGluc2VydGlvbnMoKyksIDE5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggNTc5NjU1Njc1YjA4Li4yODk2Y2Y4NjRmNjEg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC0x
NjQ1LDExICsxNjQ1LDE2IEBAIHN0YXRpYyB2b2lkIGlyb25sYWtlX2VuYWJsZV9wY2hfdHJhbnNj
b2Rlcihjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zCiAJYXNzZXJ0X2ZkaV9y
eF9lbmFibGVkKGRldl9wcml2LCBwaXBlKTsKIAogCWlmIChIQVNfUENIX0NQVChkZXZfcHJpdikp
IHsKLQkJLyogV29ya2Fyb3VuZDogU2V0IHRoZSB0aW1pbmcgb3ZlcnJpZGUgYml0IGJlZm9yZSBl
bmFibGluZyB0aGUKLQkJICogcGNoIHRyYW5zY29kZXIuICovCiAJCXJlZyA9IFRSQU5TX0NISUNL
RU4yKHBpcGUpOwogCQl2YWwgPSBJOTE1X1JFQUQocmVnKTsKKwkJLyoKKwkJICogV29ya2Fyb3Vu
ZDogU2V0IHRoZSB0aW1pbmcgb3ZlcnJpZGUgYml0CisJCSAqIGJlZm9yZSBlbmFibGluZyB0aGUg
cGNoIHRyYW5zY29kZXIuCisJCSAqLwogCQl2YWwgfD0gVFJBTlNfQ0hJQ0tFTjJfVElNSU5HX09W
RVJSSURFOworCQkvKiBDb25maWd1cmUgZnJhbWUgc3RhcnQgZGVsYXkgdG8gbWF0Y2ggdGhlIENQ
VSAqLworCQl2YWwgJj0gflRSQU5TX0NISUNLRU4yX0ZSQU1FX1NUQVJUX0RFTEFZX01BU0s7CisJ
CXZhbCB8PSBUUkFOU19DSElDS0VOMl9GUkFNRV9TVEFSVF9ERUxBWSgwKTsKIAkJSTkxNV9XUklU
RShyZWcsIHZhbCk7CiAJfQogCkBAIC0xNjU4LDYgKzE2NjMsMTAgQEAgc3RhdGljIHZvaWQgaXJv
bmxha2VfZW5hYmxlX3BjaF90cmFuc2NvZGVyKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpjcnRjX3MKIAlwaXBlY29uZl92YWwgPSBJOTE1X1JFQUQoUElQRUNPTkYocGlwZSkpOwogCiAJ
aWYgKEhBU19QQ0hfSUJYKGRldl9wcml2KSkgeworCQkvKiBDb25maWd1cmUgZnJhbWUgc3RhcnQg
ZGVsYXkgdG8gbWF0Y2ggdGhlIENQVSAqLworCQl2YWwgJj0gflRSQU5TX0ZSQU1FX1NUQVJUX0RF
TEFZX01BU0s7CisJCXZhbCB8PSBUUkFOU19GUkFNRV9TVEFSVF9ERUxBWSgwKTsKKwogCQkvKgog
CQkgKiBNYWtlIHRoZSBCUEMgaW4gdHJhbnNjb2RlciBiZSBjb25zaXN0ZW50IHdpdGgKIAkJICog
dGhhdCBpbiBwaXBlY29uZiByZWcuIEZvciBIRE1JIHdlIG11c3QgdXNlIDhicGMKQEAgLTE2OTUs
OSArMTcwNCwxMiBAQCBzdGF0aWMgdm9pZCBscHRfZW5hYmxlX3BjaF90cmFuc2NvZGVyKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAlhc3NlcnRfZmRpX3R4X2VuYWJsZWQoZGV2
X3ByaXYsIChlbnVtIHBpcGUpIGNwdV90cmFuc2NvZGVyKTsKIAlhc3NlcnRfZmRpX3J4X2VuYWJs
ZWQoZGV2X3ByaXYsIFBJUEVfQSk7CiAKKwl2YWwgPSBJOTE1X1JFQUQoVFJBTlNfQ0hJQ0tFTjIo
UElQRV9BKSk7CiAJLyogV29ya2Fyb3VuZDogc2V0IHRpbWluZyBvdmVycmlkZSBiaXQuICovCi0J
dmFsID0gSTkxNV9SRUFEKFRSQU5TX0NISUNLRU4yKFBJUEVfQSkpOwogCXZhbCB8PSBUUkFOU19D
SElDS0VOMl9USU1JTkdfT1ZFUlJJREU7CisJLyogQ29uZmlndXJlIGZyYW1lIHN0YXJ0IGRlbGF5
IHRvIG1hdGNoIHRoZSBDUFUgKi8KKwl2YWwgJj0gflRSQU5TX0NISUNLRU4yX0ZSQU1FX1NUQVJU
X0RFTEFZX01BU0s7CisJdmFsIHw9IFRSQU5TX0NISUNLRU4yX0ZSQU1FX1NUQVJUX0RFTEFZKDAp
OwogCUk5MTVfV1JJVEUoVFJBTlNfQ0hJQ0tFTjIoUElQRV9BKSwgdmFsKTsKIAogCXZhbCA9IFRS
QU5TX0VOQUJMRTsKQEAgLTY0NTIsNiArNjQ2NCwxOSBAQCBzdGF0aWMgdm9pZCBpY2xfcGlwZV9t
YnVzX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YykKIAlJOTE1X1dSSVRFKFBJUEVfTUJV
U19EQk9YX0NUTChwaXBlKSwgdmFsKTsKIH0KIAorc3RhdGljIHZvaWQgaHN3X3NldF9mcmFtZV9z
dGFydF9kZWxheShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKK3sK
KwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+YmFz
ZS5jcnRjKTsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNy
dGMtPmJhc2UuZGV2KTsKKwlpOTE1X3JlZ190IHJlZyA9IENISUNLRU5fVFJBTlMoY3J0Y19zdGF0
ZS0+Y3B1X3RyYW5zY29kZXIpOworCXUzMiB2YWw7CisKKwl2YWwgPSBJOTE1X1JFQUQocmVnKTsK
Kwl2YWwgJj0gfkhTV19GUkFNRV9TVEFSVF9ERUxBWV9NQVNLOworCXZhbCB8PSBIU1dfRlJBTUVf
U1RBUlRfREVMQVkoMCk7CisJSTkxNV9XUklURShyZWcsIHZhbCk7Cit9CisKIHN0YXRpYyB2b2lk
IGhhc3dlbGxfY3J0Y19lbmFibGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmln
LAogCQkJCXN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQogewpAQCAtNjQ5NCw4ICs2
NTE5LDEwIEBAIHN0YXRpYyB2b2lkIGhhc3dlbGxfY3J0Y19lbmFibGUoc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCQkJCQkgICAgICZwaXBlX2NvbmZpZy0+ZmRpX21fbiwg
TlVMTCk7CiAJfQogCi0JaWYgKCF0cmFuc2NvZGVyX2lzX2RzaShjcHVfdHJhbnNjb2RlcikpCisJ
aWYgKCF0cmFuc2NvZGVyX2lzX2RzaShjcHVfdHJhbnNjb2RlcikpIHsKKwkJaHN3X3NldF9mcmFt
ZV9zdGFydF9kZWxheShwaXBlX2NvbmZpZyk7CiAJCWhhc3dlbGxfc2V0X3BpcGVjb25mKHBpcGVf
Y29uZmlnKTsKKwl9CiAKIAlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSA5IHx8IElTX0JST0FE
V0VMTChkZXZfcHJpdikpCiAJCWJkd19zZXRfcGlwZW1pc2MocGlwZV9jb25maWcpOwpAQCAtODM5
NCw2ICs4NDIxLDggQEAgc3RhdGljIHZvaWQgaTl4eF9zZXRfcGlwZWNvbmYoY29uc3Qgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiAKIAlwaXBlY29uZiB8PSBQSVBFQ09ORl9H
QU1NQV9NT0RFKGNydGNfc3RhdGUtPmdhbW1hX21vZGUpOwogCisJcGlwZWNvbmYgfD0gUElQRUNP
TkZfRlJBTUVfU1RBUlRfREVMQVkoMCk7CisKIAlJOTE1X1dSSVRFKFBJUEVDT05GKGNydGMtPnBp
cGUpLCBwaXBlY29uZik7CiAJUE9TVElOR19SRUFEKFBJUEVDT05GKGNydGMtPnBpcGUpKTsKIH0K
QEAgLTk0NzQsNiArOTUwMyw4IEBAIHN0YXRpYyB2b2lkIGlyb25sYWtlX3NldF9waXBlY29uZihj
b25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKIAogCXZhbCB8PSBQSVBF
Q09ORl9HQU1NQV9NT0RFKGNydGNfc3RhdGUtPmdhbW1hX21vZGUpOwogCisJdmFsIHw9IFBJUEVD
T05GX0ZSQU1FX1NUQVJUX0RFTEFZKDApOworCiAJSTkxNV9XUklURShQSVBFQ09ORihwaXBlKSwg
dmFsKTsKIAlQT1NUSU5HX1JFQUQoUElQRUNPTkYocGlwZSkpOwogfQpAQCAtMTY5MTksMjUgKzE2
OTUwLDY5IEBAIHN0YXRpYyBib29sIGhhc19wY2hfdHJhbmNvZGVyKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdiwKIAkJKEhBU19QQ0hfTFBUX0goZGV2X3ByaXYpICYmIHBjaF90cmFu
c2NvZGVyID09IFBJUEVfQSk7CiB9CiAKK3N0YXRpYyB2b2lkIGludGVsX3Nhbml0aXplX2ZyYW1l
X3N0YXJ0X2RlbGF5KGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQor
eworCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0YXRlLT5i
YXNlLmNydGMpOworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUo
Y3J0Yy0+YmFzZS5kZXYpOworCWVudW0gdHJhbnNjb2RlciBjcHVfdHJhbnNjb2RlciA9IGNydGNf
c3RhdGUtPmNwdV90cmFuc2NvZGVyOworCisJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gOSB8
fAorCSAgICBJU19CUk9BRFdFTEwoZGV2X3ByaXYpIHx8IElTX0hBU1dFTEwoZGV2X3ByaXYpKSB7
CisJCWk5MTVfcmVnX3QgcmVnID0gQ0hJQ0tFTl9UUkFOUyhjcHVfdHJhbnNjb2Rlcik7CisJCXUz
MiB2YWw7CisKKwkJaWYgKHRyYW5zY29kZXJfaXNfZHNpKGNwdV90cmFuc2NvZGVyKSkKKwkJCXJl
dHVybjsKKworCQl2YWwgPSBJOTE1X1JFQUQocmVnKTsKKwkJdmFsICY9IH5IU1dfRlJBTUVfU1RB
UlRfREVMQVlfTUFTSzsKKwkJdmFsIHw9IEhTV19GUkFNRV9TVEFSVF9ERUxBWSgwKTsKKwkJSTkx
NV9XUklURShyZWcsIHZhbCk7CisJfSBlbHNlIHsKKwkJaTkxNV9yZWdfdCByZWcgPSBQSVBFQ09O
RihjcHVfdHJhbnNjb2Rlcik7CisJCXUzMiB2YWw7CisKKwkJdmFsID0gSTkxNV9SRUFEKHJlZyk7
CisJCXZhbCAmPSB+UElQRUNPTkZfRlJBTUVfU1RBUlRfREVMQVlfTUFTSzsKKwkJdmFsIHw9IFBJ
UEVDT05GX0ZSQU1FX1NUQVJUX0RFTEFZKDApOworCQlJOTE1X1dSSVRFKHJlZywgdmFsKTsKKwl9
CisKKwlpZiAoIWNydGNfc3RhdGUtPmhhc19wY2hfZW5jb2RlcikKKwkJcmV0dXJuOworCisJaWYg
KEhBU19QQ0hfSUJYKGRldl9wcml2KSkgeworCQlpOTE1X3JlZ190IHJlZyA9IFBDSF9UUkFOU0NP
TkYoY3J0Yy0+cGlwZSk7CisJCXUzMiB2YWw7CisKKwkJdmFsID0gSTkxNV9SRUFEKHJlZyk7CisJ
CXZhbCAmPSB+VFJBTlNfRlJBTUVfU1RBUlRfREVMQVlfTUFTSzsKKwkJdmFsIHw9IFRSQU5TX0ZS
QU1FX1NUQVJUX0RFTEFZKDApOworCQlJOTE1X1dSSVRFKHJlZywgdmFsKTsKKwl9IGVsc2Ugewor
CQlpOTE1X3JlZ190IHJlZyA9IFRSQU5TX0NISUNLRU4yKGNydGMtPnBpcGUpOworCQl1MzIgdmFs
OworCisJCXZhbCA9IEk5MTVfUkVBRChyZWcpOworCQl2YWwgJj0gflRSQU5TX0NISUNLRU4yX0ZS
QU1FX1NUQVJUX0RFTEFZX01BU0s7CisJCXZhbCB8PSBUUkFOU19DSElDS0VOMl9GUkFNRV9TVEFS
VF9ERUxBWSgwKTsKKwkJSTkxNV9XUklURShyZWcsIHZhbCk7CisJfQorfQorCiBzdGF0aWMgdm9p
ZCBpbnRlbF9zYW5pdGl6ZV9jcnRjKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAogCQkJCXN0cnVj
dCBkcm1fbW9kZXNldF9hY3F1aXJlX2N0eCAqY3R4KQogewogCXN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYgPSBjcnRjLT5iYXNlLmRldjsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYg
PSB0b19pOTE1KGRldik7CiAJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUgPSB0
b19pbnRlbF9jcnRjX3N0YXRlKGNydGMtPmJhc2Uuc3RhdGUpOwotCWVudW0gdHJhbnNjb2RlciBj
cHVfdHJhbnNjb2RlciA9IGNydGNfc3RhdGUtPmNwdV90cmFuc2NvZGVyOwotCi0JLyogQ2xlYXIg
YW55IGZyYW1lIHN0YXJ0IGRlbGF5cyB1c2VkIGZvciBkZWJ1Z2dpbmcgbGVmdCBieSB0aGUgQklP
UyAqLwotCWlmIChjcnRjLT5hY3RpdmUgJiYgIXRyYW5zY29kZXJfaXNfZHNpKGNwdV90cmFuc2Nv
ZGVyKSkgewotCQlpOTE1X3JlZ190IHJlZyA9IFBJUEVDT05GKGNwdV90cmFuc2NvZGVyKTsKLQot
CQlJOTE1X1dSSVRFKHJlZywKLQkJCSAgIEk5MTVfUkVBRChyZWcpICYgflBJUEVDT05GX0ZSQU1F
X1NUQVJUX0RFTEFZX01BU0spOwotCX0KIAogCWlmIChjcnRjX3N0YXRlLT5iYXNlLmFjdGl2ZSkg
ewogCQlzdHJ1Y3QgaW50ZWxfcGxhbmUgKnBsYW5lOwogCisJCS8qIENsZWFyIGFueSBmcmFtZSBz
dGFydCBkZWxheXMgdXNlZCBmb3IgZGVidWdnaW5nIGxlZnQgYnkgdGhlIEJJT1MgKi8KKwkJaW50
ZWxfc2FuaXRpemVfZnJhbWVfc3RhcnRfZGVsYXkoY3J0Y19zdGF0ZSk7CisKIAkJLyogRGlzYWJs
ZSBldmVyeXRoaW5nIGJ1dCB0aGUgcHJpbWFyeSBwbGFuZSAqLwogCQlmb3JfZWFjaF9pbnRlbF9w
bGFuZV9vbl9jcnRjKGRldiwgY3J0YywgcGxhbmUpIHsKIAkJCWNvbnN0IHN0cnVjdCBpbnRlbF9w
bGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGUgPQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9yZWcuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKaW5kZXggNTBj
MmZhMGYyY2FiLi5jYjJlMGY0Njc5YzQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfcmVnLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaApAQCAtNTY3
MSw3ICs1NjcxLDggQEAgZW51bSB7CiAjZGVmaW5lICAgUElQRUNPTkZfRE9VQkxFX1dJREUJKDEg
PDwgMzApCiAjZGVmaW5lICAgSTk2NV9QSVBFQ09ORl9BQ1RJVkUJKDEgPDwgMzApCiAjZGVmaW5l
ICAgUElQRUNPTkZfRFNJX1BMTF9MT0NLRUQJKDEgPDwgMjkpIC8qIHZsdiAmIHBpcGUgQSBvbmx5
ICovCi0jZGVmaW5lICAgUElQRUNPTkZfRlJBTUVfU1RBUlRfREVMQVlfTUFTSyAoMyA8PCAyNykK
KyNkZWZpbmUgICBQSVBFQ09ORl9GUkFNRV9TVEFSVF9ERUxBWV9NQVNLCSgzIDw8IDI3KSAvKiBw
cmUtaHN3ICovCisjZGVmaW5lICAgUElQRUNPTkZfRlJBTUVfU1RBUlRfREVMQVkoeCkJCSgoeCkg
PDwgMjcpIC8qIHByZS1oc3c6IDAtMyAqLwogI2RlZmluZSAgIFBJUEVDT05GX1NJTkdMRV9XSURF
CTAKICNkZWZpbmUgICBQSVBFQ09ORl9QSVBFX1VOTE9DS0VEIDAKICNkZWZpbmUgICBQSVBFQ09O
Rl9QSVBFX0xPQ0tFRAkoMSA8PCAyNSkKQEAgLTc2MjcsNiArNzYyOCw4IEBAIGVudW0gewogCQkJ
CQkgICAgW1RSQU5TQ09ERVJfQl0gPSBfQ0hJQ0tFTl9UUkFOU19CLCBcCiAJCQkJCSAgICBbVFJB
TlNDT0RFUl9DXSA9IF9DSElDS0VOX1RSQU5TX0MsIFwKIAkJCQkJICAgIFtUUkFOU0NPREVSX0Rd
ID0gX0NISUNLRU5fVFJBTlNfRCkpCisjZGVmaW5lICBIU1dfRlJBTUVfU1RBUlRfREVMQVlfTUFT
SwkoMyA8PCAyNykKKyNkZWZpbmUgIEhTV19GUkFNRV9TVEFSVF9ERUxBWSh4KQkoKHgpIDw8IDI3
KSAvKiAwLTMgKi8KICNkZWZpbmUgIFZTQ19EQVRBX1NFTF9TT0ZUV0FSRV9DT05UUk9MCSgxIDw8
IDI1KSAvKiBHTEsgYW5kIENOTCsgKi8KICNkZWZpbmUgIERESV9UUkFJTklOR19PVkVSUklERV9F
TkFCTEUJKDEgPDwgMTkpCiAjZGVmaW5lICBERElfVFJBSU5JTkdfT1ZFUlJJREVfVkFMVUUJKDEg
PDwgMTgpCkBAIC04MzQxLDEwICs4MzQ0LDggQEAgZW51bSB7CiAjZGVmaW5lICBUUkFOU19TVEFU
RV9NQVNLICAgICAgICgxIDw8IDMwKQogI2RlZmluZSAgVFJBTlNfU1RBVEVfRElTQUJMRSAgICAo
MCA8PCAzMCkKICNkZWZpbmUgIFRSQU5TX1NUQVRFX0VOQUJMRSAgICAgKDEgPDwgMzApCi0jZGVm
aW5lICBUUkFOU19GU1lOQ19ERUxBWV9IQjEgICgwIDw8IDI3KQotI2RlZmluZSAgVFJBTlNfRlNZ
TkNfREVMQVlfSEIyICAoMSA8PCAyNykKLSNkZWZpbmUgIFRSQU5TX0ZTWU5DX0RFTEFZX0hCMyAg
KDIgPDwgMjcpCi0jZGVmaW5lICBUUkFOU19GU1lOQ19ERUxBWV9IQjQgICgzIDw8IDI3KQorI2Rl
ZmluZSAgVFJBTlNfRlJBTUVfU1RBUlRfREVMQVlfTUFTSwkoMyA8PCAyNykgLyogaWJ4ICovCisj
ZGVmaW5lICBUUkFOU19GUkFNRV9TVEFSVF9ERUxBWSh4KQkoKHgpIDw8IDI3KSAvKiBpYng6IDAt
MyAqLwogI2RlZmluZSAgVFJBTlNfSU5URVJMQUNFX01BU0sgICAoNyA8PCAyMSkKICNkZWZpbmUg
IFRSQU5TX1BST0dSRVNTSVZFICAgICAgKDAgPDwgMjEpCiAjZGVmaW5lICBUUkFOU19JTlRFUkxB
Q0VEICAgICAgICgzIDw8IDIxKQpAQCAtODM2NSw2ICs4MzY2LDcgQEAgZW51bSB7CiAjZGVmaW5l
ICBUUkFOU19DSElDS0VOMl9USU1JTkdfT1ZFUlJJREUJCQkoMSA8PCAzMSkKICNkZWZpbmUgIFRS
QU5TX0NISUNLRU4yX0ZESV9QT0xBUklUWV9SRVZFUlNFRAkJKDEgPDwgMjkpCiAjZGVmaW5lICBU
UkFOU19DSElDS0VOMl9GUkFNRV9TVEFSVF9ERUxBWV9NQVNLCQkoMyA8PCAyNykKKyNkZWZpbmUg
IFRSQU5TX0NISUNLRU4yX0ZSQU1FX1NUQVJUX0RFTEFZKHgpCQkoKHgpIDw8IDI3KSAvKiAwLTMg
Ki8KICNkZWZpbmUgIFRSQU5TX0NISUNLRU4yX0RJU0FCTEVfREVFUF9DT0xPUl9DT1VOVEVSCSgx
IDw8IDI2KQogI2RlZmluZSAgVFJBTlNfQ0hJQ0tFTjJfRElTQUJMRV9ERUVQX0NPTE9SX01PREVT
V0lUQ0gJKDEgPDwgMjUpCiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X3BtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jCmluZGV4IDM2MjIzNDQ0OTA4
Ny4uOGIxZmJkYjM2NTM3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9w
bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKQEAgLTgwNzksNyArODA3
OSw2IEBAIHN0YXRpYyB2b2lkIGNwdF9pbml0X2Nsb2NrX2dhdGluZyhzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYpCiAJCXZhbCAmPSB+VFJBTlNfQ0hJQ0tFTjJfRkRJX1BPTEFSSVRZ
X1JFVkVSU0VEOwogCQlpZiAoZGV2X3ByaXYtPnZidC5mZGlfcnhfcG9sYXJpdHlfaW52ZXJ0ZWQp
CiAJCQl2YWwgfD0gVFJBTlNfQ0hJQ0tFTjJfRkRJX1BPTEFSSVRZX1JFVkVSU0VEOwotCQl2YWwg
Jj0gflRSQU5TX0NISUNLRU4yX0ZSQU1FX1NUQVJUX0RFTEFZX01BU0s7CiAJCXZhbCAmPSB+VFJB
TlNfQ0hJQ0tFTjJfRElTQUJMRV9ERUVQX0NPTE9SX0NPVU5URVI7CiAJCXZhbCAmPSB+VFJBTlNf
Q0hJQ0tFTjJfRElTQUJMRV9ERUVQX0NPTE9SX01PREVTV0lUQ0g7CiAJCUk5MTVfV1JJVEUoVFJB
TlNfQ0hJQ0tFTjIocGlwZSksIHZhbCk7Ci0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwt
Z2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

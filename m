Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A8A7D118588
	for <lists+intel-gfx@lfdr.de>; Tue, 10 Dec 2019 11:51:27 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0C79A6E8A9;
	Tue, 10 Dec 2019 10:51:26 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CD31E6E8A9
 for <intel-gfx@lists.freedesktop.org>; Tue, 10 Dec 2019 10:51:24 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by fmsmga105.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Dec 2019 02:51:24 -0800
X-IronPort-AV: E=Sophos;i="5.69,299,1571727600"; d="scan'208";a="387555746"
Received: from rmoran-mobl1.ger.corp.intel.com (HELO localhost)
 ([10.252.35.46])
 by orsmga005-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Dec 2019 02:51:21 -0800
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 10 Dec 2019 12:50:47 +0200
Message-Id: <b895c349d964d70e4cad26f12a629ea1898bfcc2.1575974743.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1575974743.git.jani.nikula@intel.com>
References: <cover.1575974743.git.jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [v4.1 03/16] drm/i915/bios: add support for querying
 DSC details for encoder
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWRkIGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSBEU0MgZGF0YSBmb3IgYW4gZW5jb2Rlci4K
CkluaXRpYWxseSwgdGhpcyBpcyBEU0kgc3BlY2lmaWMsIGFzIERQIGRvZXMgbm90IHVzZSBWQlQg
c2V0dGluZ3MgZm9yIERTQwphdCBhbGwuIEl0J3MgYWxzbyBub3QgdmVyeSBwcmV0dHkuCgpJbiB0
aGUgZnV0dXJlIHdlIG1pZ2h0IGhhdmUgYSBwb2ludGVyIGZyb20gZW5jb2RlciB0byB0aGUgY2hp
bGQgZGV2aWNlLAp3aGljaCB3b3VsZCBtYWtlIHRoZSBjaGlsZCBkZXZpY2UgbGlzdCBxdWVyeSBo
ZXJlIHNvIG11Y2ggbW9yZSBzZW5zaWJsZS4KCnYzOgotIHVzZSBjcnRjX3N0YXRlIGluc3RlYWQg
b2YgcGlwZV9jb25maWcKLSByZXR1cm4gdHJ1ZSBieSBkZWZhdWx0IGZyb20gaW50ZWxfYmlvc19n
ZXRfZHNjX3BhcmFtcygpCi0gZXhwYW5kIHRoZSBjb21tZW50IGFib3V0IHJjX2J1ZmZlcl9ibG9j
a19zaXplIGFuZCByY19idWZmZXJfc2l6ZQoKdjI6Ci0gbWFrZSBtb3JlIHJvYnVzdCwgZGVidWcg
bG9nIGVycm9ycyBiZXR0ZXIKCkJzcGVjOiAyOTg4NQpDYzogVmFuZGl0YSBLdWxrYXJuaSA8dmFu
ZGl0YS5rdWxrYXJuaUBpbnRlbC5jb20+CkNjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmph
bGFAbGludXguaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogVmFuZGl0YSBLdWxrYXJuaSA8dmFuZGl0
YS5rdWxrYXJuaUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEphbmkgTmlrdWxhIDxqYW5pLm5p
a3VsYUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9i
aW9zLmMgfCA5OSArKysrKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9iaW9zLmggfCAgNSArKwogMiBmaWxlcyBjaGFuZ2VkLCAxMDQgaW5zZXJ0
aW9ucygrKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
Ymlvcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9iaW9zLmMKaW5kZXgg
NzI2NTE2YWUxN2JhLi5iZDY3NGZkMzU1YjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfYmlvcy5jCkBAIC0yOSw2ICsyOSw3IEBACiAjaW5jbHVkZSA8ZHJtL2k5MTVfZHJt
Lmg+CiAKICNpbmNsdWRlICJkaXNwbGF5L2ludGVsX2Rpc3BsYXkuaCIKKyNpbmNsdWRlICJkaXNw
bGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCIKICNpbmNsdWRlICJkaXNwbGF5L2ludGVsX2dtYnVz
LmgiCiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgpAQCAtMjM5NCw2ICsyMzk1LDEwNCBAQCBib29s
IGludGVsX2Jpb3NfaXNfZHNpX3ByZXNlbnQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LAogCXJldHVybiBmYWxzZTsKIH0KIAorc3RhdGljIHZvaWQgZmlsbF9kc2Moc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCisJCSAgICAgc3RydWN0IGRzY19jb21wcmVzc2lv
bl9wYXJhbWV0ZXJzX2VudHJ5ICpkc2MsCisJCSAgICAgaW50IGRzY19tYXhfYnBjKQoreworCXN0
cnVjdCBkcm1fZHNjX2NvbmZpZyAqdmRzY19jZmcgPSAmY3J0Y19zdGF0ZS0+ZHNjLmNvbmZpZzsK
KwlpbnQgYnBjID0gODsKKworCXZkc2NfY2ZnLT5kc2NfdmVyc2lvbl9tYWpvciA9IGRzYy0+dmVy
c2lvbl9tYWpvcjsKKwl2ZHNjX2NmZy0+ZHNjX3ZlcnNpb25fbWlub3IgPSBkc2MtPnZlcnNpb25f
bWlub3I7CisKKwlpZiAoZHNjLT5zdXBwb3J0XzEyYnBjICYmIGRzY19tYXhfYnBjID49IDEyKQor
CQlicGMgPSAxMjsKKwllbHNlIGlmIChkc2MtPnN1cHBvcnRfMTBicGMgJiYgZHNjX21heF9icGMg
Pj0gMTApCisJCWJwYyA9IDEwOworCWVsc2UgaWYgKGRzYy0+c3VwcG9ydF84YnBjICYmIGRzY19t
YXhfYnBjID49IDgpCisJCWJwYyA9IDg7CisJZWxzZQorCQlEUk1fREVCVUdfS01TKCJWQlQ6IFVu
c3VwcG9ydGVkIEJQQyAlZCBmb3IgRENTXG4iLAorCQkJICAgICAgZHNjX21heF9icGMpOworCisJ
Y3J0Y19zdGF0ZS0+cGlwZV9icHAgPSBicGMgKiAzOworCisJY3J0Y19zdGF0ZS0+ZHNjLmNvbXBy
ZXNzZWRfYnBwID0gbWluKGNydGNfc3RhdGUtPnBpcGVfYnBwLAorCQkJCQkgICAgIFZCVF9EU0Nf
TUFYX0JQUChkc2MtPm1heF9icHApKTsKKworCS8qCisJICogRklYTUU6IFRoaXMgaXMgdWdseSwg
YW5kIHNsaWNlIGNvdW50IHNob3VsZCB0YWtlIERTQyBlbmdpbmUKKwkgKiB0aHJvdWdocHV0IGV0
Yy4gaW50byBhY2NvdW50LgorCSAqCisJICogQWxzbywgcGVyIHNwZWMgRFNJIHN1cHBvcnRzIDEs
IDIsIDMgb3IgNCBob3Jpem9udGFsIHNsaWNlcy4KKwkgKi8KKwlpZiAoZHNjLT5zbGljZXNfcGVy
X2xpbmUgJiBCSVQoMikpIHsKKwkJY3J0Y19zdGF0ZS0+ZHNjLnNsaWNlX2NvdW50ID0gNDsKKwl9
IGVsc2UgaWYgKGRzYy0+c2xpY2VzX3Blcl9saW5lICYgQklUKDEpKSB7CisJCWNydGNfc3RhdGUt
PmRzYy5zbGljZV9jb3VudCA9IDI7CisJfSBlbHNlIHsKKwkJLyogRklYTUUgKi8KKwkJaWYgKCEo
ZHNjLT5zbGljZXNfcGVyX2xpbmUgJiBCSVQoMCkpKQorCQkJRFJNX0RFQlVHX0tNUygiVkJUOiBV
bnN1cHBvcnRlZCBEU0Mgc2xpY2UgY291bnQgZm9yIERTSVxuIik7CisKKwkJY3J0Y19zdGF0ZS0+
ZHNjLnNsaWNlX2NvdW50ID0gMTsKKwl9CisKKwlpZiAoY3J0Y19zdGF0ZS0+aHcuYWRqdXN0ZWRf
bW9kZS5jcnRjX2hkaXNwbGF5ICUKKwkgICAgY3J0Y19zdGF0ZS0+ZHNjLnNsaWNlX2NvdW50ICE9
IDApCisJCURSTV9ERUJVR19LTVMoIlZCVDogRFNDIGhkaXNwbGF5ICVkIG5vdCBkaXZpc2libGUg
Ynkgc2xpY2UgY291bnQgJWRcbiIsCisJCQkgICAgICBjcnRjX3N0YXRlLT5ody5hZGp1c3RlZF9t
b2RlLmNydGNfaGRpc3BsYXksCisJCQkgICAgICBjcnRjX3N0YXRlLT5kc2Muc2xpY2VfY291bnQp
OworCisJLyoKKwkgKiBGSVhNRTogVXNlIFZCVCByY19idWZmZXJfYmxvY2tfc2l6ZSBhbmQgcmNf
YnVmZmVyX3NpemUgZm9yIHRoZQorCSAqIGltcGxlbWVudGF0aW9uIHNwZWNpZmljIHBoeXNpY2Fs
IHJhdGUgYnVmZmVyIHNpemUuIEN1cnJlbnRseSB3ZSB1c2UKKwkgKiB0aGUgcmVxdWlyZWQgcmF0
ZSBidWZmZXIgbW9kZWwgc2l6ZSBjYWxjdWxhdGVkIGluCisJICogZHJtX2RzY19jb21wdXRlX3Jj
X3BhcmFtZXRlcnMoKSBhY2NvcmRpbmcgdG8gVkVTQSBEU0MgQW5uZXggRS4KKwkgKgorCSAqIFRo
ZSBWQlQgcmNfYnVmZmVyX2Jsb2NrX3NpemUgYW5kIHJjX2J1ZmZlcl9zaXplIGRlZmluaXRpb25z
CisJICogY29ycmVzcG9uZCB0byBEUCAxLjQgRFBDRCBvZmZzZXRzIDB4NjIgYW5kIDB4NjMuIFRo
ZSBEUCBEU0MKKwkgKiBpbXBsZW1lbnRhdGlvbiBzaG91bGQgYWxzbyB1c2UgdGhlIERQQ0QgKG9y
IHBlcmhhcHMgVkJUIGZvciBlRFApCisJICogcHJvdmlkZWQgdmFsdWUgZm9yIHRoZSBidWZmZXIg
c2l6ZS4KKwkgKi8KKworCS8qIEZJWE1FOiBEU0kgc3BlYyBzYXlzIGJwYyArIDEgZm9yIHRoaXMg
b25lICovCisJdmRzY19jZmctPmxpbmVfYnVmX2RlcHRoID0gVkJUX0RTQ19MSU5FX0JVRkZFUl9E
RVBUSChkc2MtPmxpbmVfYnVmZmVyX2RlcHRoKTsKKworCXZkc2NfY2ZnLT5ibG9ja19wcmVkX2Vu
YWJsZSA9IGRzYy0+YmxvY2tfcHJlZGljdGlvbl9lbmFibGU7CisKKwl2ZHNjX2NmZy0+c2xpY2Vf
aGVpZ2h0ID0gZHNjLT5zbGljZV9oZWlnaHQ7Cit9CisKKy8qIEZJWE1FOiBpbml0aWFsbHkgRFNJ
IHNwZWNpZmljICovCitib29sIGludGVsX2Jpb3NfZ2V0X2RzY19wYXJhbXMoc3RydWN0IGludGVs
X2VuY29kZXIgKmVuY29kZXIsCisJCQkgICAgICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNy
dGNfc3RhdGUsCisJCQkgICAgICAgaW50IGRzY19tYXhfYnBjKQoreworCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CisJY29uc3Qgc3Ry
dWN0IGRpc3BsYXlfZGV2aWNlX2RhdGEgKmRldmRhdGE7CisJY29uc3Qgc3RydWN0IGNoaWxkX2Rl
dmljZV9jb25maWcgKmNoaWxkOworCisJbGlzdF9mb3JfZWFjaF9lbnRyeShkZXZkYXRhLCAmaTkx
NS0+dmJ0LmRpc3BsYXlfZGV2aWNlcywgbm9kZSkgeworCQljaGlsZCA9ICZkZXZkYXRhLT5jaGls
ZDsKKworCQlpZiAoIShjaGlsZC0+ZGV2aWNlX3R5cGUgJiBERVZJQ0VfVFlQRV9NSVBJX09VVFBV
VCkpCisJCQljb250aW51ZTsKKworCQlpZiAoY2hpbGQtPmR2b19wb3J0IC0gRFZPX1BPUlRfTUlQ
SUEgPT0gZW5jb2Rlci0+cG9ydCkgeworCQkJaWYgKCFkZXZkYXRhLT5kc2MpCisJCQkJcmV0dXJu
IGZhbHNlOworCisJCQlpZiAoY3J0Y19zdGF0ZSkKKwkJCQlmaWxsX2RzYyhjcnRjX3N0YXRlLCBk
ZXZkYXRhLT5kc2MsIGRzY19tYXhfYnBjKTsKKworCQkJcmV0dXJuIHRydWU7CisJCX0KKwl9CisK
KwlyZXR1cm4gZmFsc2U7Cit9CisKIC8qKgogICogaW50ZWxfYmlvc19pc19wb3J0X2hwZF9pbnZl
cnRlZCAtIGlzIEhQRCBpbnZlcnRlZCBmb3IgJXBvcnQKICAqIEBpOTE1OglpOTE1IGRldmljZSBp
bnN0YW5jZQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9i
aW9zLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jpb3MuaAppbmRleCA5
OGYwNjQ4MjhhNTcuLmQ2YTBjMjlkMzdhYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9iaW9zLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9iaW9zLmgKQEAgLTM1LDYgKzM1LDggQEAKICNpbmNsdWRlIDxkcm0vaTkxNV9kcm0u
aD4KIAogc3RydWN0IGRybV9pOTE1X3ByaXZhdGU7CitzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZTsK
K3N0cnVjdCBpbnRlbF9lbmNvZGVyOwogZW51bSBwb3J0OwogCiBlbnVtIGludGVsX2JhY2tsaWdo
dF90eXBlIHsKQEAgLTI0Miw1ICsyNDQsOCBAQCBib29sIGludGVsX2Jpb3NfaXNfcG9ydF9ocGRf
aW52ZXJ0ZWQoY29uc3Qgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiBib29sIGludGVs
X2Jpb3NfaXNfbHNwY29uX3ByZXNlbnQoY29uc3Qgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUsCiAJCQkJICBlbnVtIHBvcnQgcG9ydCk7CiBlbnVtIGF1eF9jaCBpbnRlbF9iaW9zX3BvcnRf
YXV4X2NoKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgZW51bSBwb3J0IHBvcnQp
OworYm9vbCBpbnRlbF9iaW9zX2dldF9kc2NfcGFyYW1zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyLAorCQkJICAgICAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAor
CQkJICAgICAgIGludCBkc2NfbWF4X2JwYyk7CiAKICNlbmRpZiAvKiBfSU5URUxfQklPU19IXyAq
LwotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1n
ZngK

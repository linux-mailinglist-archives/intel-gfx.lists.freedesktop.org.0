Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0B15A10CB0D
	for <lists+intel-gfx@lfdr.de>; Thu, 28 Nov 2019 15:59:20 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4892C6E83C;
	Thu, 28 Nov 2019 14:59:18 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B6E386E83C
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Nov 2019 14:59:16 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19377730-1500050 
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Nov 2019 14:59:14 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 28 Nov 2019 14:59:13 +0000
Message-Id: <20191128145913.3949081-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [CI] drm/i915: Introduce DRM_I915_GEM_MMAP_OFFSET
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogQWJkaWVsIEphbnVsZ3VlIDxhYmRpZWwuamFudWxndWVAbGludXguaW50ZWwuY29tPgoK
VGhpcyBpcyByZWFsbHkganVzdCBhbiBhbGlhcyBvZiBtbWFwX2d0dC4gVGhlICdtbWFwIG9mZnNl
dCcgbm9tZW5jbGF0dXJlCmNvbWVzIGZyb20gdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoaXMgaW9j
dGwgd2hpY2ggaXMgdGhlIG9mZnNldCBpbnRvIHRoZQpkZXZpY2UgZmQgd2hpY2ggdXNlcnBhY2Ug
dXNlcyB3aXRoIG1tYXAoMikuCgptbWFwX2d0dCB3YXMgb3VyIGluaXRpYWwgbW1hcF9vZmZzZXQg
aW1wbGVtZW50YXRpb24sIHRoaXMgZXh0ZW5kcwpvdXIgQ1BVIG1tYXAgc3VwcG9ydCB0byBhbGxv
dyBhZGRpdGlvbmFsIGZhdWx0IGhhbmRsZXJzIHRoYXQgZGVwZW5kcyBvbgp0aGUgb2JqZWN0J3Mg
YmFja2luZyBwYWdlcy4KCk5vdGUgdGhhdCB3ZSBtdWx0aXBsZXggbW1hcF9ndHQgYW5kIG1tYXBf
b2Zmc2V0IHRocm91Z2ggdGhlIHNhbWUgaW9jdGwsCmFuZCB1c2UgdGhlIHplcm8gZXh0ZW5kaW5n
IGJlaGF2aW91ciBvZiBkcm0gdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuCnRoZW0sIHdoZW4gd2Ug
aW5zcGVjdCB0aGUgZmxhZ3MuCgpUbyBzdXBwb3J0IG11bHRpcGxlIG1tYXAgdHlwZXMgb24gYW4g
b2JqZWN0IHdlIG5lZWQgdG8gc3VwcG9ydCBtdWx0aXBsZQptbWFwX29mZnNldHMgZm9yIGFuIG9i
amVjdCAoZWFjaCBvZmZzZXQgaW4gdGhlIGdsb2JhbCBkZXZpY2UgYWRkcmVzcwpzcGFjZSBjb3Jy
ZXNwb25kaW5nIHRvIGEgdW5pcXVlIGluc3RhbmNlIG9mIHRoZSBvYmplY3QgZm9yIGEgZmlsZSAr
IG1tYXAKdHlwZSkuIEFzIHdlIGRyb3AgdGhlIHNpbXBsaWZpZWQgZHJtIGNvcmUgaWRlYSBvZiBh
IHNpbmdsZSBtbWFwX29mZnNldCwKd2UgbmVlZCB0byBwcm92aWRlIHJlcGxhY2VtZW50IGhvb2tz
IGZvciB0aGUgZHVtYiBtbWFwIGludGVyZmFjZSBhcwp3ZWxsLgoKTGluazogaHR0cHM6Ly9naXRs
YWIuZnJlZWRlc2t0b3Aub3JnL21lc2EvbWVzYS9tZXJnZV9yZXF1ZXN0cy8xNjc1ClRlc3RjYXNl
OiBpZ3QvZ2VtX21tYXBfb2Zmc2V0ClNpZ25lZC1vZmYtYnk6IEFiZGllbCBKYW51bGd1ZSA8YWJk
aWVsLmphbnVsZ3VlQGxpbnV4LmludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogTWF0dGhldyBBdWxk
IDxtYXR0aGV3LmF1bGRAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9kb21haW4uYyAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2lvY3Rscy5oICAgIHwgICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fbW1hbi5jICAgICAgfCA0MjcgKysrKysrKysrKysrKysrLS0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5oICAgICAgfCAgMzEgKysKIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYyAgICB8ICAxOCArCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmggICAgfCAgIDcgKy0KIC4uLi9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oICB8ICAyMiArCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fcGFnZXMuYyAgICAgfCAgIDMgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX3RpbGluZy5jICAgIHwgICAxICsKIC4uLi9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL2k5MTVfZ2VtX21tYW4uYyAgICB8ICA2OCArKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX3Jlc2V0LmMgICAgICAgICB8ICAgNyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuYyAgICAgICAgICAgICAgIHwgIDE0ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2Rydi5oICAgICAgICAgICAgICAgfCAgIDQgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZW0uYyAgICAgICAgICAgICAgIHwgICAzICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dl
dHBhcmFtLmMgICAgICAgICAgfCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEu
YyAgICAgICAgICAgICAgIHwgICAzICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5o
ICAgICAgICAgICAgICAgfCAgIDMgKwogaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oICAgICAg
ICAgICAgICAgICAgIHwgIDI3ICsrCiAxOCBmaWxlcyBjaGFuZ2VkLCA1NDggaW5zZXJ0aW9ucygr
KSwgOTggZGVsZXRpb25zKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX21tYW4uaAoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9kb21haW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9kb21haW4uYwppbmRleCA5YWViY2YyNjMxOTEuLmIwNmMxNzI1ZDQ0NSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RvbWFpbi5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kb21haW4uYwpAQCAtMTMsNiArMTMsNyBAQAogI2lu
Y2x1ZGUgImk5MTVfZ2VtX29iamVjdC5oIgogI2luY2x1ZGUgImk5MTVfdm1hLmgiCiAjaW5jbHVk
ZSAiaTkxNV9nZW1fbG1lbS5oIgorI2luY2x1ZGUgImk5MTVfZ2VtX21tYW4uaCIKIAogc3RhdGlj
IHZvaWQgX19pOTE1X2dlbV9vYmplY3RfZmx1c2hfZm9yX2Rpc3BsYXkoc3RydWN0IGRybV9pOTE1
X2dlbV9vYmplY3QgKm9iaikKIHsKQEAgLTI2Myw3ICsyNjQsNyBAQCBpbnQgaTkxNV9nZW1fb2Jq
ZWN0X3NldF9jYWNoZV9sZXZlbChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCQkJ
fQogCiAJCQlpZiAob2JqLT51c2VyZmF1bHRfY291bnQpCi0JCQkJX19pOTE1X2dlbV9vYmplY3Rf
cmVsZWFzZV9tbWFwKG9iaik7CisJCQkJX19pOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwX2d0
dChvYmopOwogCiAJCQkvKgogCQkJICogQXMgd2Ugbm8gbG9uZ2VyIG5lZWQgYSBmZW5jZSBmb3Ig
R1RUIGFjY2VzcywKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9pb2N0bHMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9pb2N0bHMuaApp
bmRleCBkZGM3ZjJhNTJiM2UuLjg3ZDhiMjdmNDI2ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2lvY3Rscy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9pb2N0bHMuaApAQCAtMjgsOCArMjgsOCBAQCBpbnQgaTkxNV9nZW1fbWFk
dmlzZV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAogCQkJICAgc3Ry
dWN0IGRybV9maWxlICpmaWxlKTsKIGludCBpOTE1X2dlbV9tbWFwX2lvY3RsKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJCQlzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpOwotaW50
IGk5MTVfZ2VtX21tYXBfZ3R0X2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRh
dGEsCi0JCQkgICAgc3RydWN0IGRybV9maWxlICpmaWxlKTsKK2ludCBpOTE1X2dlbV9tbWFwX29m
ZnNldF9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAorCQkJICAgICAg
IHN0cnVjdCBkcm1fZmlsZSAqZmlsZSk7CiBpbnQgaTkxNV9nZW1fcHJlYWRfaW9jdGwoc3RydWN0
IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKIAkJCSBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUp
OwogaW50IGk5MTVfZ2VtX3B3cml0ZV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lk
ICpkYXRhLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX21t
YW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmMKaW5kZXggZDYw
OTczNjAzY2MxLi5iODkyZjY0NWNhMmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9tbWFuLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX21tYW4uYwpAQCAtNSw2ICs1LDcgQEAKICAqLwogCiAjaW5jbHVkZSA8bGludXgvbW1hbi5o
PgorI2luY2x1ZGUgPGxpbnV4L3Bmbl90Lmg+CiAjaW5jbHVkZSA8bGludXgvc2l6ZXMuaD4KIAog
I2luY2x1ZGUgImd0L2ludGVsX2d0LmgiCkBAIC0xNCw2ICsxNSw3IEBACiAjaW5jbHVkZSAiaTkx
NV9nZW1fZ3R0LmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1faW9jdGxzLmgiCiAjaW5jbHVkZSAiaTkx
NV9nZW1fb2JqZWN0LmgiCisjaW5jbHVkZSAiaTkxNV9nZW1fbW1hbi5oIgogI2luY2x1ZGUgImk5
MTVfdHJhY2UuaCIKICNpbmNsdWRlICJpOTE1X3ZtYS5oIgogCkBAIC0xNDQsNiArMTQ2LDkgQEAg
c3RhdGljIHVuc2lnbmVkIGludCB0aWxlX3Jvd19wYWdlcyhjb25zdCBzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX29iamVjdCAqb2JqKQogICogMyAtIFJlbW92ZSBpbXBsaWNpdCBzZXQtZG9tYWluKEdUVCkg
YW5kIHN5bmNocm9uaXNhdGlvbiBvbiBpbml0aWFsCiAgKiAgICAgcGFnZWZhdWx0OyBzd2FwaW4g
cmVtYWlucyB0cmFuc3BhcmVudC4KICAqCisgKiA0IC0gU3VwcG9ydCBtdWx0aXBsZSBmYXVsdCBo
YW5kbGVycyBwZXIgb2JqZWN0IGRlcGVuZGluZyBvbiBvYmplY3QncworICogICAgIGJhY2tpbmcg
c3RvcmFnZSAoYS5rLmEuIE1NQVBfT0ZGU0VUKS4KKyAqCiAgKiBSZXN0cmljdGlvbnM6CiAgKgog
ICogICogc25vb3BhYmxlIG9iamVjdHMgY2Fubm90IGJlIGFjY2Vzc2VkIHZpYSB0aGUgR1RULiBJ
dCBjYW4gY2F1c2UgbWFjaGluZQpAQCAtMTcxLDcgKzE3Niw3IEBAIHN0YXRpYyB1bnNpZ25lZCBp
bnQgdGlsZV9yb3dfcGFnZXMoY29uc3Qgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikK
ICAqLwogaW50IGk5MTVfZ2VtX21tYXBfZ3R0X3ZlcnNpb24odm9pZCkKIHsKLQlyZXR1cm4gMzsK
KwlyZXR1cm4gNDsKIH0KIAogc3RhdGljIGlubGluZSBzdHJ1Y3QgaTkxNV9nZ3R0X3ZpZXcKQEAg
LTE5Nyw2ICsyMDIsNzEgQEAgY29tcHV0ZV9wYXJ0aWFsX3ZpZXcoY29uc3Qgc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKm9iaiwKIAlyZXR1cm4gdmlldzsKIH0KIAorc3RhdGljIHZtX2ZhdWx0
X3QgaTkxNV9lcnJvcl90b192bWZfZmF1bHQoaW50IGVycikKK3sKKwlzd2l0Y2ggKGVycikgewor
CWRlZmF1bHQ6CisJCVdBUk5fT05DRShlcnIsICJ1bmhhbmRsZWQgZXJyb3IgaW4gJXM6ICVpXG4i
LCBfX2Z1bmNfXywgZXJyKTsKKwkJLyogZmFsbHRocm91Z2ggKi8KKwljYXNlIC1FSU86IC8qIHNo
bWVtZnMgZmFpbHVyZSBmcm9tIHN3YXAgZGV2aWNlICovCisJY2FzZSAtRUZBVUxUOiAvKiBwdXJn
ZWQgb2JqZWN0ICovCisJY2FzZSAtRU5PREVWOiAvKiBiYWQgb2JqZWN0LCBob3cgZGlkIHlvdSBn
ZXQgaGVyZSEgKi8KKwkJcmV0dXJuIFZNX0ZBVUxUX1NJR0JVUzsKKworCWNhc2UgLUVOT1NQQzog
Lyogc2htZW1mcyBhbGxvY2F0aW9uIGZhaWx1cmUgKi8KKwljYXNlIC1FTk9NRU06IC8qIG91ciBh
bGxvY2F0aW9uIGZhaWx1cmUgKi8KKwkJcmV0dXJuIFZNX0ZBVUxUX09PTTsKKworCWNhc2UgMDoK
KwljYXNlIC1FQUdBSU46CisJY2FzZSAtRVJFU1RBUlRTWVM6CisJY2FzZSAtRUlOVFI6CisJY2Fz
ZSAtRUJVU1k6CisJCS8qCisJCSAqIEVCVVNZIGlzIG9rOiB0aGlzIGp1c3QgbWVhbnMgdGhhdCBh
bm90aGVyIHRocmVhZAorCQkgKiBhbHJlYWR5IGRpZCB0aGUgam9iLgorCQkgKi8KKwkJcmV0dXJu
IFZNX0ZBVUxUX05PUEFHRTsKKwl9Cit9CisKK3N0YXRpYyB2bV9mYXVsdF90IGk5MTVfZ2VtX2Zh
dWx0X2NwdShzdHJ1Y3Qgdm1fZmF1bHQgKnZtZikKK3sKKwlzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3Qg
KmFyZWEgPSB2bWYtPnZtYTsKKwlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqcHJpdiA9IGFyZWEt
PnZtX3ByaXZhdGVfZGF0YTsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0gcHJp
di0+b2JqOworCXZtX2ZhdWx0X3Qgdm1mX3JldDsKKwl1bnNpZ25lZCBsb25nIGksIHNpemUgPSBh
cmVhLT52bV9lbmQgLSBhcmVhLT52bV9zdGFydDsKKwlib29sIHdyaXRlID0gYXJlYS0+dm1fZmxh
Z3MgJiBWTV9XUklURTsKKwlpbnQgcmV0OworCisJaWYgKCFpOTE1X2dlbV9vYmplY3RfaGFzX3N0
cnVjdF9wYWdlKG9iaikpCisJCXJldHVybiBWTV9GQVVMVF9TSUdCVVM7CisKKwkvKiBTYW5pdHkg
Y2hlY2sgdGhhdCB3ZSBhbGxvdyB3cml0aW5nIGludG8gdGhpcyBvYmplY3QgKi8KKwlpZiAoaTkx
NV9nZW1fb2JqZWN0X2lzX3JlYWRvbmx5KG9iaikgJiYgd3JpdGUpCisJCXJldHVybiBWTV9GQVVM
VF9TSUdCVVM7CisKKwlyZXQgPSBpOTE1X2dlbV9vYmplY3RfcGluX3BhZ2VzKG9iaik7CisJaWYg
KHJldCkKKwkJcmV0dXJuIGk5MTVfZXJyb3JfdG9fdm1mX2ZhdWx0KHJldCk7CisKKwkvKiBQVEVz
IGFyZSByZXZva2VkIGluIG9iai0+b3BzLT5wdXRfcGFnZXMoKSAqLworCWZvciAoaSA9IDA7IGkg
PCBzaXplID4+IFBBR0VfU0hJRlQ7IGkrKykgeworCQlzdHJ1Y3QgcGFnZSAqcGFnZSA9IGk5MTVf
Z2VtX29iamVjdF9nZXRfcGFnZShvYmosIGkpOworCisJCXZtZl9yZXQgPSB2bWZfaW5zZXJ0X3Bm
bihhcmVhLAorCQkJCQkgKHVuc2lnbmVkIGxvbmcpYXJlYS0+dm1fc3RhcnQgKyBpICogUEFHRV9T
SVpFLAorCQkJCQkgcGFnZV90b19wZm4ocGFnZSkpOworCQlpZiAodm1mX3JldCAhPSBWTV9GQVVM
VF9OT1BBR0UpCisJCQlicmVhazsKKwl9CisKKwlpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMo
b2JqKTsKKworCXJldHVybiB2bWZfcmV0OworfQorCiAvKioKICAqIGk5MTVfZ2VtX2ZhdWx0IC0g
ZmF1bHQgYSBwYWdlIGludG8gdGhlIEdUVAogICogQHZtZjogZmF1bHQgaW5mbwpAQCAtMjE5LDcg
KzI4OSw4IEBAIHZtX2ZhdWx0X3QgaTkxNV9nZW1fZmF1bHQoc3RydWN0IHZtX2ZhdWx0ICp2bWYp
CiB7CiAjZGVmaW5lIE1JTl9DSFVOS19QQUdFUyAoU1pfMU0gPj4gUEFHRV9TSElGVCkKIAlzdHJ1
Y3Qgdm1fYXJlYV9zdHJ1Y3QgKmFyZWEgPSB2bWYtPnZtYTsKLQlzdHJ1Y3QgZHJtX2k5MTVfZ2Vt
X29iamVjdCAqb2JqID0gdG9faW50ZWxfYm8oYXJlYS0+dm1fcHJpdmF0ZV9kYXRhKTsKKwlzdHJ1
Y3QgaTkxNV9tbWFwX29mZnNldCAqcHJpdiA9IGFyZWEtPnZtX3ByaXZhdGVfZGF0YTsKKwlzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0gcHJpdi0+b2JqOwogCXN0cnVjdCBkcm1fZGV2
aWNlICpkZXYgPSBvYmotPmJhc2UuZGV2OwogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
ID0gdG9faTkxNShkZXYpOwogCXN0cnVjdCBpbnRlbF9ydW50aW1lX3BtICpycG0gPSAmaTkxNS0+
cnVudGltZV9wbTsKQEAgLTMxMiw2ICszODMsOSBAQCB2bV9mYXVsdF90IGk5MTVfZ2VtX2ZhdWx0
KHN0cnVjdCB2bV9mYXVsdCAqdm1mKQogCQlsaXN0X2FkZCgmb2JqLT51c2VyZmF1bHRfbGluaywg
Jmk5MTUtPmdndHQudXNlcmZhdWx0X2xpc3QpOwogCW11dGV4X3VubG9jaygmaTkxNS0+Z2d0dC52
bS5tdXRleCk7CiAKKwkvKiBUcmFjayB0aGUgbW1vIGFzc29jaWF0ZWQgd2l0aCB0aGUgZmVuY2Vk
IHZtYSAqLworCXZtYS0+bW1vID0gcHJpdjsKKwogCWlmIChJU19BQ1RJVkUoQ09ORklHX0RSTV9J
OTE1X1VTRVJGQVVMVF9BVVRPU1VTUEVORCkpCiAJCWludGVsX3dha2VyZWZfYXV0bygmaTkxNS0+
Z2d0dC51c2VyZmF1bHRfd2FrZXJlZiwKIAkJCQkgICBtc2Vjc190b19qaWZmaWVzX3RpbWVvdXQo
Q09ORklHX0RSTV9JOTE1X1VTRVJGQVVMVF9BVVRPU1VTUEVORCkpOwpAQCAtMzMyLDU0ICs0MDYs
MjIgQEAgdm1fZmF1bHRfdCBpOTE1X2dlbV9mYXVsdChzdHJ1Y3Qgdm1fZmF1bHQgKnZtZikKIAlp
bnRlbF9ydW50aW1lX3BtX3B1dChycG0sIHdha2VyZWYpOwogCWk5MTVfZ2VtX29iamVjdF91bnBp
bl9wYWdlcyhvYmopOwogZXJyOgotCXN3aXRjaCAocmV0KSB7Ci0JZGVmYXVsdDoKLQkJV0FSTl9P
TkNFKHJldCwgInVuaGFuZGxlZCBlcnJvciBpbiAlczogJWlcbiIsIF9fZnVuY19fLCByZXQpOwot
CQkvKiBmYWxsdGhyb3VnaCAqLwotCWNhc2UgLUVJTzogLyogc2htZW1mcyBmYWlsdXJlIGZyb20g
c3dhcCBkZXZpY2UgKi8KLQljYXNlIC1FRkFVTFQ6IC8qIHB1cmdlZCBvYmplY3QgKi8KLQljYXNl
IC1FTk9ERVY6IC8qIGJhZCBvYmplY3QsIGhvdyBkaWQgeW91IGdldCBoZXJlISAqLwotCQlyZXR1
cm4gVk1fRkFVTFRfU0lHQlVTOwotCi0JY2FzZSAtRU5PU1BDOiAvKiBzaG1lbWZzIGFsbG9jYXRp
b24gZmFpbHVyZSAqLwotCWNhc2UgLUVOT01FTTogLyogb3VyIGFsbG9jYXRpb24gZmFpbHVyZSAq
LwotCQlyZXR1cm4gVk1fRkFVTFRfT09NOwotCi0JY2FzZSAwOgotCWNhc2UgLUVBR0FJTjoKLQlj
YXNlIC1FUkVTVEFSVFNZUzoKLQljYXNlIC1FSU5UUjoKLQljYXNlIC1FQlVTWToKLQkJLyoKLQkJ
ICogRUJVU1kgaXMgb2s6IHRoaXMganVzdCBtZWFucyB0aGF0IGFub3RoZXIgdGhyZWFkCi0JCSAq
IGFscmVhZHkgZGlkIHRoZSBqb2IuCi0JCSAqLwotCQlyZXR1cm4gVk1fRkFVTFRfTk9QQUdFOwot
CX0KKwlyZXR1cm4gaTkxNV9lcnJvcl90b192bWZfZmF1bHQocmV0KTsKIH0KIAotdm9pZCBfX2k5
MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXAoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aikKK3ZvaWQgX19pOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwX2d0dChzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqKQogewogCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOwogCiAJR0VNX0JV
R19PTighb2JqLT51c2VyZmF1bHRfY291bnQpOwogCi0Jb2JqLT51c2VyZmF1bHRfY291bnQgPSAw
OwotCWxpc3RfZGVsKCZvYmotPnVzZXJmYXVsdF9saW5rKTsKLQlkcm1fdm1hX25vZGVfdW5tYXAo
Jm9iai0+YmFzZS52bWFfbm9kZSwKLQkJCSAgIG9iai0+YmFzZS5kZXYtPmFub25faW5vZGUtPmlf
bWFwcGluZyk7Ci0KIAlmb3JfZWFjaF9nZ3R0X3ZtYSh2bWEsIG9iaikKLQkJaTkxNV92bWFfdW5z
ZXRfdXNlcmZhdWx0KHZtYSk7CisJCWk5MTVfdm1hX3Jldm9rZV9tbWFwKHZtYSk7CisKKwlHRU1f
QlVHX09OKG9iai0+dXNlcmZhdWx0X2NvdW50KTsKIH0KIAogLyoqCi0gKiBpOTE1X2dlbV9vYmpl
Y3RfcmVsZWFzZV9tbWFwIC0gcmVtb3ZlIHBoeXNpY2FsIHBhZ2UgbWFwcGluZ3MKLSAqIEBvYmo6
IG9iaiBpbiBxdWVzdGlvbgotICoKLSAqIFByZXNlcnZlIHRoZSByZXNlcnZhdGlvbiBvZiB0aGUg
bW1hcHBpbmcgd2l0aCB0aGUgRFJNIGNvcmUgY29kZSwgYnV0Ci0gKiByZWxpbnF1aXNoIG93bmVy
c2hpcCBvZiB0aGUgcGFnZXMgYmFjayB0byB0aGUgc3lzdGVtLgotICoKICAqIEl0IGlzIHZpdGFs
IHRoYXQgd2UgcmVtb3ZlIHRoZSBwYWdlIG1hcHBpbmcgaWYgd2UgaGF2ZSBtYXBwZWQgYSB0aWxl
ZAogICogb2JqZWN0IHRocm91Z2ggdGhlIEdUVCBhbmQgdGhlbiBsb3NlIHRoZSBmZW5jZSByZWdp
c3RlciBkdWUgdG8KICAqIHJlc291cmNlIHByZXNzdXJlLiBTaW1pbGFybHkgaWYgdGhlIG9iamVj
dCBoYXMgYmVlbiBtb3ZlZCBvdXQgb2YgdGhlCkBAIC0zODcsNyArNDI5LDcgQEAgdm9pZCBfX2k5
MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXAoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aikKICAqIG1hcHBpbmcgd2lsbCB0aGVuIHRyaWdnZXIgYSBwYWdlIGZhdWx0IG9uIHRoZSBuZXh0
IHVzZXIgYWNjZXNzLCBhbGxvd2luZwogICogZml4dXAgYnkgaTkxNV9nZW1fZmF1bHQoKS4KICAq
Lwotdm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1f
b2JqZWN0ICpvYmopCitzdGF0aWMgdm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwX2d0
dChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogewogCXN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1ID0gdG9faTkxNShvYmotPmJhc2UuZGV2KTsKIAlpbnRlbF93YWtlcmVmX3Qg
d2FrZXJlZjsKQEAgLTQwNiw3ICs0NDgsNyBAQCB2b2lkIGk5MTVfZ2VtX29iamVjdF9yZWxlYXNl
X21tYXAoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKIAlpZiAoIW9iai0+dXNlcmZh
dWx0X2NvdW50KQogCQlnb3RvIG91dDsKIAotCV9faTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1h
cChvYmopOworCV9faTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9ndHQob2JqKTsKIAogCS8q
IEVuc3VyZSB0aGF0IHRoZSBDUFUncyBQVEUgYXJlIHJldm9rZWQgYW5kIHRoZXJlIGFyZSBub3Qg
b3V0c3RhbmRpbmcKIAkgKiBtZW1vcnkgdHJhbnNhY3Rpb25zIGZyb20gdXNlcnNwYWNlIGJlZm9y
ZSB3ZSByZXR1cm4uIFRoZSBUTEIKQEAgLTQyMiwxNSArNDY0LDYzIEBAIHZvaWQgaTkxNV9nZW1f
b2JqZWN0X3JlbGVhc2VfbW1hcChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogCWlu
dGVsX3J1bnRpbWVfcG1fcHV0KCZpOTE1LT5ydW50aW1lX3BtLCB3YWtlcmVmKTsKIH0KIAotc3Rh
dGljIGludCBjcmVhdGVfbW1hcF9vZmZzZXQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aikKK3ZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9vZmZzZXQoc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKm9iaikKK3sKKwlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vOwor
CisJbXV0ZXhfbG9jaygmb2JqLT5tbW9fbG9jayk7CisJbGlzdF9mb3JfZWFjaF9lbnRyeShtbW8s
ICZvYmotPm1tYXBfb2Zmc2V0cywgb2Zmc2V0KSB7CisJCS8qIHZtYV9ub2RlX3VubWFwIGZvciBH
VFQgbW1hcHMgaGFuZGxlZCBhbHJlYWR5IGluCisJCSAqIF9faTkxNV9nZW1fb2JqZWN0X3JlbGVh
c2VfbW1hcF9ndHQKKwkJICovCisJCWlmIChtbW8tPm1tYXBfdHlwZSAhPSBJOTE1X01NQVBfVFlQ
RV9HVFQpCisJCQlkcm1fdm1hX25vZGVfdW5tYXAoJm1tby0+dm1hX25vZGUsCisJCQkJCSAgIG9i
ai0+YmFzZS5kZXYtPmFub25faW5vZGUtPmlfbWFwcGluZyk7CisJfQorCW11dGV4X3VubG9jaygm
b2JqLT5tbW9fbG9jayk7Cit9CisKKy8qKgorICogaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1h
cCAtIHJlbW92ZSBwaHlzaWNhbCBwYWdlIG1hcHBpbmdzCisgKiBAb2JqOiBvYmogaW4gcXVlc3Rp
b24KKyAqCisgKiBQcmVzZXJ2ZSB0aGUgcmVzZXJ2YXRpb24gb2YgdGhlIG1tYXBwaW5nIHdpdGgg
dGhlIERSTSBjb3JlIGNvZGUsIGJ1dAorICogcmVsaW5xdWlzaCBvd25lcnNoaXAgb2YgdGhlIHBh
Z2VzIGJhY2sgdG8gdGhlIHN5c3RlbS4KKyAqLwordm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFz
ZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCit7CisJaTkxNV9nZW1fb2Jq
ZWN0X3JlbGVhc2VfbW1hcF9ndHQob2JqKTsKKwlpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFw
X29mZnNldChvYmopOworfQorCitzdGF0aWMgdm9pZCBpbml0X21tYXBfb2Zmc2V0KHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCisJCQkgICAgIHN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0
ICptbW8pCit7CisJbXV0ZXhfbG9jaygmb2JqLT5tbW9fbG9jayk7CisJbGlzdF9hZGQoJm1tby0+
b2Zmc2V0LCAmb2JqLT5tbWFwX29mZnNldHMpOworCW11dGV4X3VubG9jaygmb2JqLT5tbW9fbG9j
ayk7CisKKwltbW8tPm9iaiA9IG9iajsKKwltbW8tPmRldiA9IG9iai0+YmFzZS5kZXY7Cit9CisK
K3N0YXRpYyBpbnQgY3JlYXRlX21tYXBfb2Zmc2V0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmosCisJCQkgICAgICBzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vKQogewogCXN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShvYmotPmJhc2UuZGV2KTsKIAlzdHJ1
Y3QgaW50ZWxfZ3QgKmd0ID0gJmk5MTUtPmd0OworCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBv
YmotPmJhc2UuZGV2OwogCWludCBlcnI7CiAKLQllcnIgPSBkcm1fZ2VtX2NyZWF0ZV9tbWFwX29m
ZnNldCgmb2JqLT5iYXNlKTsKLQlpZiAobGlrZWx5KCFlcnIpKQorCWRybV92bWFfbm9kZV9yZXNl
dCgmbW1vLT52bWFfbm9kZSk7CisJaWYgKG1tby0+ZmlsZSkKKwkJZHJtX3ZtYV9ub2RlX2FsbG93
KCZtbW8tPnZtYV9ub2RlLCBtbW8tPmZpbGUpOworCWVyciA9IGRybV92bWFfb2Zmc2V0X2FkZChk
ZXYtPnZtYV9vZmZzZXRfbWFuYWdlciwgJm1tby0+dm1hX25vZGUsCisJCQkJIG9iai0+YmFzZS5z
aXplIC8gUEFHRV9TSVpFKTsKKwlpZiAobGlrZWx5KCFlcnIpKSB7CisJCWluaXRfbW1hcF9vZmZz
ZXQob2JqLCBtbW8pOwogCQlyZXR1cm4gMDsKKwl9CiAKIAkvKiBBdHRlbXB0IHRvIHJlYXAgc29t
ZSBtbWFwIHNwYWNlIGZyb20gZGVhZCBvYmplY3RzICovCiAJZXJyID0gaW50ZWxfZ3RfcmV0aXJl
X3JlcXVlc3RzX3RpbWVvdXQoZ3QsIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsKQEAgLTQzOCw0MSAr
NTI4LDgxIEBAIHN0YXRpYyBpbnQgY3JlYXRlX21tYXBfb2Zmc2V0KHN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmopCiAJCXJldHVybiBlcnI7CiAKIAlpOTE1X2dlbV9kcmFpbl9mcmVlZF9v
YmplY3RzKGk5MTUpOwotCXJldHVybiBkcm1fZ2VtX2NyZWF0ZV9tbWFwX29mZnNldCgmb2JqLT5i
YXNlKTsKKwllcnIgPSBkcm1fdm1hX29mZnNldF9hZGQoZGV2LT52bWFfb2Zmc2V0X21hbmFnZXIs
ICZtbW8tPnZtYV9ub2RlLAorCQkJCSBvYmotPmJhc2Uuc2l6ZSAvIFBBR0VfU0laRSk7CisJaWYg
KGVycikKKwkJcmV0dXJuIGVycjsKKworCWluaXRfbW1hcF9vZmZzZXQob2JqLCBtbW8pOworCXJl
dHVybiAwOwogfQogCi1pbnQKLWk5MTVfZ2VtX21tYXBfZ3R0KHN0cnVjdCBkcm1fZmlsZSAqZmls
ZSwKLQkJICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAotCQkgIHUzMiBoYW5kbGUsCi0JCSAgdTY0
ICpvZmZzZXQpCitzdGF0aWMgaW50CitfX2Fzc2lnbl9nZW1fb2JqZWN0X21tYXBfZGF0YShzdHJ1
Y3QgZHJtX2ZpbGUgKmZpbGUsCisJCQkgICAgICB1MzIgaGFuZGxlLAorCQkJICAgICAgZW51bSBp
OTE1X21tYXBfdHlwZSBtbWFwX3R5cGUsCisJCQkgICAgICB1NjQgKm9mZnNldCkKIHsKIAlzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOworCXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICpt
bW87CiAJaW50IHJldDsKIAotCWlmICghaTkxNV9nZ3R0X2hhc19hcGVydHVyZSgmdG9faTkxNShk
ZXYpLT5nZ3R0KSkKLQkJcmV0dXJuIC1FTk9ERVY7Ci0KIAlvYmogPSBpOTE1X2dlbV9vYmplY3Rf
bG9va3VwKGZpbGUsIGhhbmRsZSk7CiAJaWYgKCFvYmopCiAJCXJldHVybiAtRU5PRU5UOwogCi0J
aWYgKGk5MTVfZ2VtX29iamVjdF9uZXZlcl9iaW5kX2dndHQob2JqKSkgeworCWlmIChtbWFwX3R5
cGUgPT0gSTkxNV9NTUFQX1RZUEVfR1RUICYmCisJICAgIGk5MTVfZ2VtX29iamVjdF9uZXZlcl9i
aW5kX2dndHQob2JqKSkgeworCQlyZXQgPSAtRU5PREVWOworCQlnb3RvIG91dDsKKwl9CisKKwlp
ZiAobW1hcF90eXBlICE9IEk5MTVfTU1BUF9UWVBFX0dUVCAmJgorCSAgICAhaTkxNV9nZW1fb2Jq
ZWN0X2hhc19zdHJ1Y3RfcGFnZShvYmopKSB7CiAJCXJldCA9IC1FTk9ERVY7CiAJCWdvdG8gb3V0
OwogCX0KIAotCXJldCA9IGNyZWF0ZV9tbWFwX29mZnNldChvYmopOwotCWlmIChyZXQgPT0gMCkK
LQkJKm9mZnNldCA9IGRybV92bWFfbm9kZV9vZmZzZXRfYWRkcigmb2JqLT5iYXNlLnZtYV9ub2Rl
KTsKKwltbW8gPSBremFsbG9jKHNpemVvZigqbW1vKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFtbW8p
IHsKKwkJcmV0ID0gLUVOT01FTTsKKwkJZ290byBvdXQ7CisJfQorCisJbW1vLT5maWxlID0gZmls
ZTsKKwlyZXQgPSBjcmVhdGVfbW1hcF9vZmZzZXQob2JqLCBtbW8pOworCWlmIChyZXQpIHsKKwkJ
a2ZyZWUobW1vKTsKKwkJZ290byBvdXQ7CisJfQogCisJbW1vLT5tbWFwX3R5cGUgPSBtbWFwX3R5
cGU7CisJKm9mZnNldCA9IGRybV92bWFfbm9kZV9vZmZzZXRfYWRkcigmbW1vLT52bWFfbm9kZSk7
CiBvdXQ6CiAJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwogCXJldHVybiByZXQ7CiB9CiAKK2lu
dAoraTkxNV9nZW1fbW1hcF9kdW1iKHN0cnVjdCBkcm1fZmlsZSAqZmlsZSwKKwkJICBzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2LAorCQkgIHUzMiBoYW5kbGUsCisJCSAgdTY0ICpvZmZzZXQpCit7CisJ
ZW51bSBpOTE1X21tYXBfdHlwZSBtbWFwX3R5cGU7CisKKwlpZiAoYm9vdF9jcHVfaGFzKFg4Nl9G
RUFUVVJFX1BBVCkpCisJCW1tYXBfdHlwZSA9IEk5MTVfTU1BUF9UWVBFX1dDOworCWVsc2UgaWYg
KCFpOTE1X2dndHRfaGFzX2FwZXJ0dXJlKCZ0b19pOTE1KGRldiktPmdndHQpKQorCQlyZXR1cm4g
LUVOT0RFVjsKKwllbHNlCisJCW1tYXBfdHlwZSA9IEk5MTVfTU1BUF9UWVBFX0dUVDsKKworCXJl
dHVybiBfX2Fzc2lnbl9nZW1fb2JqZWN0X21tYXBfZGF0YShmaWxlLCBoYW5kbGUsIG1tYXBfdHlw
ZSwgb2Zmc2V0KTsKK30KKwogLyoqCi0gKiBpOTE1X2dlbV9tbWFwX2d0dF9pb2N0bCAtIHByZXBh
cmUgYW4gb2JqZWN0IGZvciBHVFQgbW1hcCdpbmcKKyAqIGk5MTVfZ2VtX21tYXBfb2Zmc2V0X2lv
Y3RsIC0gcHJlcGFyZSBhbiBvYmplY3QgZm9yIEdUVCBtbWFwJ2luZwogICogQGRldjogRFJNIGRl
dmljZQogICogQGRhdGE6IEdUVCBtYXBwaW5nIGlvY3RsIGRhdGEKICAqIEBmaWxlOiBHRU0gb2Jq
ZWN0IGluZm8KQEAgLTQ4NywxMiArNjE3LDE4NSBAQCBpOTE1X2dlbV9tbWFwX2d0dChzdHJ1Y3Qg
ZHJtX2ZpbGUgKmZpbGUsCiAgKiB1c2Vyc3BhY2UuCiAgKi8KIGludAotaTkxNV9nZW1fbW1hcF9n
dHRfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKLQkJCXN0cnVjdCBk
cm1fZmlsZSAqZmlsZSkKK2k5MTVfZ2VtX21tYXBfb2Zmc2V0X2lvY3RsKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsIHZvaWQgKmRhdGEsCisJCQkgICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCit7CisJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KGRldik7CisJc3RydWN0IGRy
bV9pOTE1X2dlbV9tbWFwX29mZnNldCAqYXJncyA9IGRhdGE7CisJZW51bSBpOTE1X21tYXBfdHlw
ZSB0eXBlOworCisJc3dpdGNoIChhcmdzLT5mbGFncykgeworCWNhc2UgSTkxNV9NTUFQX09GRlNF
VF9HVFQ6CisJCWlmICghaTkxNV9nZ3R0X2hhc19hcGVydHVyZSgmaTkxNS0+Z2d0dCkpCisJCQly
ZXR1cm4gLUVOT0RFVjsKKwkJdHlwZSA9IEk5MTVfTU1BUF9UWVBFX0dUVDsKKwkJYnJlYWs7CisK
KwljYXNlIEk5MTVfTU1BUF9PRkZTRVRfV0M6CisJCWlmICghYm9vdF9jcHVfaGFzKFg4Nl9GRUFU
VVJFX1BBVCkpCisJCQlyZXR1cm4gLUVOT0RFVjsKKwkJdHlwZSA9IEk5MTVfTU1BUF9UWVBFX1dD
OworCQlicmVhazsKKworCWNhc2UgSTkxNV9NTUFQX09GRlNFVF9XQjoKKwkJdHlwZSA9IEk5MTVf
TU1BUF9UWVBFX1dCOworCQlicmVhazsKKworCWNhc2UgSTkxNV9NTUFQX09GRlNFVF9VQzoKKwkJ
aWYgKCFib290X2NwdV9oYXMoWDg2X0ZFQVRVUkVfUEFUKSkKKwkJCXJldHVybiAtRU5PREVWOwor
CQl0eXBlID0gSTkxNV9NTUFQX1RZUEVfVUM7CisJCWJyZWFrOworCisJZGVmYXVsdDoKKwkJcmV0
dXJuIC1FSU5WQUw7CisJfQorCisJcmV0dXJuIF9fYXNzaWduX2dlbV9vYmplY3RfbW1hcF9kYXRh
KGZpbGUsIGFyZ3MtPmhhbmRsZSwgdHlwZSwKKwkJCQkJICAgICAmYXJncy0+b2Zmc2V0KTsKK30K
Kwordm9pZCBpOTE1X21tYXBfb2Zmc2V0X2Rlc3Ryb3koc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQg
Km1tbywgc3RydWN0IG11dGV4ICptdXRleCkKK3sKKwlkcm1fdm1hX29mZnNldF9yZW1vdmUobW1v
LT5kZXYtPnZtYV9vZmZzZXRfbWFuYWdlciwgJm1tby0+dm1hX25vZGUpOworCisJbXV0ZXhfbG9j
ayhtdXRleCk7CisJbGlzdF9kZWwoJm1tby0+b2Zmc2V0KTsKKwltdXRleF91bmxvY2sobXV0ZXgp
OworCisJa2ZyZWUobW1vKTsKK30KKworc3RhdGljIHZvaWQgaTkxNV9nZW1fdm1fb3BlbihzdHJ1
Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSkKK3sKKwlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1v
ID0gdm1hLT52bV9wcml2YXRlX2RhdGE7CisJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aiA9IG1tby0+b2JqOworCisJR0VNX0JVR19PTighb2JqKTsKKwlpOTE1X2dlbV9vYmplY3RfZ2V0
KG9iaik7Cit9CisKK3N0YXRpYyB2b2lkIGk5MTVfZ2VtX3ZtX2Nsb3NlKHN0cnVjdCB2bV9hcmVh
X3N0cnVjdCAqdm1hKQoreworCXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICptbW8gPSB2bWEtPnZt
X3ByaXZhdGVfZGF0YTsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0gbW1vLT5v
Ymo7CisKKwlHRU1fQlVHX09OKCFvYmopOworCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKK30K
Kworc3RhdGljIGNvbnN0IHN0cnVjdCB2bV9vcGVyYXRpb25zX3N0cnVjdCBpOTE1X2dlbV9ndHRf
dm1fb3BzID0geworCS5mYXVsdCA9IGk5MTVfZ2VtX2ZhdWx0LAorCS5vcGVuID0gaTkxNV9nZW1f
dm1fb3BlbiwKKwkuY2xvc2UgPSBpOTE1X2dlbV92bV9jbG9zZSwKK307CisKK3N0YXRpYyBjb25z
dCBzdHJ1Y3Qgdm1fb3BlcmF0aW9uc19zdHJ1Y3QgaTkxNV9nZW1fY3B1X3ZtX29wcyA9IHsKKwku
ZmF1bHQgPSBpOTE1X2dlbV9mYXVsdF9jcHUsCisJLm9wZW4gPSBpOTE1X2dlbV92bV9vcGVuLAor
CS5jbG9zZSA9IGk5MTVfZ2VtX3ZtX2Nsb3NlLAorfTsKKworc3RhdGljIHZvaWQgc2V0X3ZtZGF0
YV9tbWFwX29mZnNldChzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vLCBzdHJ1Y3Qgdm1fYXJl
YV9zdHJ1Y3QgKnZtYSkKK3sKKwlzd2l0Y2ggKG1tby0+bW1hcF90eXBlKSB7CisJY2FzZSBJOTE1
X01NQVBfVFlQRV9XQzoKKwkJdm1hLT52bV9wYWdlX3Byb3QgPQorCQkJcGdwcm90X3dyaXRlY29t
YmluZSh2bV9nZXRfcGFnZV9wcm90KHZtYS0+dm1fZmxhZ3MpKTsKKwkJYnJlYWs7CisJY2FzZSBJ
OTE1X01NQVBfVFlQRV9XQjoKKwkJdm1hLT52bV9wYWdlX3Byb3QgPSB2bV9nZXRfcGFnZV9wcm90
KHZtYS0+dm1fZmxhZ3MpOworCQlicmVhazsKKwljYXNlIEk5MTVfTU1BUF9UWVBFX1VDOgorCQl2
bWEtPnZtX3BhZ2VfcHJvdCA9CisJCQlwZ3Byb3Rfbm9uY2FjaGVkKHZtX2dldF9wYWdlX3Byb3Qo
dm1hLT52bV9mbGFncykpOworCQlicmVhazsKKwlkZWZhdWx0OgorCQlicmVhazsKKwl9CisKKwl2
bWEtPnZtX29wcyA9ICZpOTE1X2dlbV9jcHVfdm1fb3BzOworfQorCisvKiBUaGlzIG92ZXJjb21l
cyB0aGUgbGltaXRhdGlvbiBpbiBkcm1fZ2VtX21tYXAncyBhc3NpZ25tZW50IG9mIGEKKyAqIGRy
bV9nZW1fb2JqZWN0IGFzIHRoZSB2bWEtPnZtX3ByaXZhdGVfZGF0YS4gU2luY2Ugd2UgbmVlZCB0
bworICogYmUgYWJsZSB0byByZXNvbHZlIG11bHRpcGxlIG1tYXAgb2Zmc2V0cyB3aGljaCBjb3Vs
ZCBiZSB0aWVkCisgKiB0byBhIHNpbmdsZSBnZW0gb2JqZWN0LgorICovCitpbnQgaTkxNV9nZW1f
bW1hcChzdHJ1Y3QgZmlsZSAqZmlscCwgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpCiB7Ci0J
c3RydWN0IGRybV9pOTE1X2dlbV9tbWFwX2d0dCAqYXJncyA9IGRhdGE7CisJc3RydWN0IGRybV92
bWFfb2Zmc2V0X25vZGUgKm5vZGU7CisJc3RydWN0IGRybV9maWxlICpwcml2ID0gZmlscC0+cHJp
dmF0ZV9kYXRhOworCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBwcml2LT5taW5vci0+ZGV2Owor
CXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICptbW8gPSBOVUxMOworCXN0cnVjdCBkcm1fZ2VtX29i
amVjdCAqb2JqID0gTlVMTDsKKworCWlmIChkcm1fZGV2X2lzX3VucGx1Z2dlZChkZXYpKQorCQly
ZXR1cm4gLUVOT0RFVjsKKworCWRybV92bWFfb2Zmc2V0X2xvY2tfbG9va3VwKGRldi0+dm1hX29m
ZnNldF9tYW5hZ2VyKTsKKwlub2RlID0gZHJtX3ZtYV9vZmZzZXRfZXhhY3RfbG9va3VwX2xvY2tl
ZChkZXYtPnZtYV9vZmZzZXRfbWFuYWdlciwKKwkJCQkJCSAgdm1hLT52bV9wZ29mZiwKKwkJCQkJ
CSAgdm1hX3BhZ2VzKHZtYSkpOworCWlmIChsaWtlbHkobm9kZSkpIHsKKwkJbW1vID0gY29udGFp
bmVyX29mKG5vZGUsIHN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0LAorCQkJCSAgIHZtYV9ub2RlKTsK
KwkJLyoKKwkJICogSW4gb3VyIGRlcGVuZGVuY3kgY2hhaW4sIHRoZSBkcm1fdm1hX29mZnNldF9u
b2RlCisJCSAqIGRlcGVuZHMgb24gdGhlIHZhbGlkaXR5IG9mIHRoZSBtbW8sIHdoaWNoIGRlcGVu
ZHMgb24KKwkJICogdGhlIGdlbSBvYmplY3QuIEhvd2V2ZXIgdGhlIG9ubHkgcmVmZXJlbmNlIHdl
IGhhdmUKKwkJICogYXQgdGhpcyBwb2ludCBpcyB0aGUgbW1vIChhcyB0aGUgcGFyZW50IG9mIHRo
ZSBub2RlKS4KKwkJICogVHJ5IHRvIGNoZWNrIGlmIHRoZSBnZW0gb2JqZWN0IHdhcyBhdCBsZWFz
dCBjbGVhcmVkLgorCQkgKi8KKwkJaWYgKCFtbW8gfHwgIW1tby0+b2JqKSB7CisJCQlkcm1fdm1h
X29mZnNldF91bmxvY2tfbG9va3VwKGRldi0+dm1hX29mZnNldF9tYW5hZ2VyKTsKKwkJCXJldHVy
biAtRUlOVkFMOworCQl9CisJCS8qCisJCSAqIFNraXAgMC1yZWZjbnRlZCBvYmplY3RzIGFzIGl0
IGlzIGluIHRoZSBwcm9jZXNzIG9mIGJlaW5nCisJCSAqIGRlc3Ryb3llZCBhbmQgd2lsbCBiZSBp
bnZhbGlkIHdoZW4gdGhlIHZtYSBtYW5hZ2VyIGxvY2sKKwkJICogaXMgcmVsZWFzZWQuCisJCSAq
LworCQlvYmogPSAmbW1vLT5vYmotPmJhc2U7CisJCWlmICgha3JlZl9nZXRfdW5sZXNzX3plcm8o
Jm9iai0+cmVmY291bnQpKQorCQkJb2JqID0gTlVMTDsKKworCX0KKwlkcm1fdm1hX29mZnNldF91
bmxvY2tfbG9va3VwKGRldi0+dm1hX29mZnNldF9tYW5hZ2VyKTsKIAotCXJldHVybiBpOTE1X2dl
bV9tbWFwX2d0dChmaWxlLCBkZXYsIGFyZ3MtPmhhbmRsZSwgJmFyZ3MtPm9mZnNldCk7CisJaWYg
KCFvYmopCisJCXJldHVybiAtRUlOVkFMOworCisJaWYgKCFkcm1fdm1hX25vZGVfaXNfYWxsb3dl
ZChub2RlLCBwcml2KSkgeworCQlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQob2JqKTsKKwkJ
cmV0dXJuIC1FQUNDRVM7CisJfQorCisJaWYgKGk5MTVfZ2VtX29iamVjdF9pc19yZWFkb25seSh0
b19pbnRlbF9ibyhvYmopKSkgeworCQlpZiAodm1hLT52bV9mbGFncyAmIFZNX1dSSVRFKSB7CisJ
CQlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQob2JqKTsKKwkJCXJldHVybiAtRUlOVkFMOwor
CQl9CisJCXZtYS0+dm1fZmxhZ3MgJj0gflZNX01BWVdSSVRFOworCX0KKworCXZtYS0+dm1fZmxh
Z3MgfD0gVk1fUEZOTUFQIHwgVk1fRE9OVEVYUEFORCB8IFZNX0RPTlREVU1QOworCXZtYS0+dm1f
cGFnZV9wcm90ID0gcGdwcm90X3dyaXRlY29tYmluZSh2bV9nZXRfcGFnZV9wcm90KHZtYS0+dm1f
ZmxhZ3MpKTsKKwl2bWEtPnZtX3BhZ2VfcHJvdCA9IHBncHJvdF9kZWNyeXB0ZWQodm1hLT52bV9w
YWdlX3Byb3QpOworCXZtYS0+dm1fcHJpdmF0ZV9kYXRhID0gbW1vOworCisJc3dpdGNoIChtbW8t
Pm1tYXBfdHlwZSkgeworCWNhc2UgSTkxNV9NTUFQX1RZUEVfV0M6CisJY2FzZSBJOTE1X01NQVBf
VFlQRV9XQjoKKwljYXNlIEk5MTVfTU1BUF9UWVBFX1VDOgorCQlzZXRfdm1kYXRhX21tYXBfb2Zm
c2V0KG1tbywgdm1hKTsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X01NQVBfVFlQRV9HVFQ6CisJCXZt
YS0+dm1fb3BzID0gJmk5MTVfZ2VtX2d0dF92bV9vcHM7CisJCWJyZWFrOworCX0KKworCXJldHVy
biAwOwogfQogCiAjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VMRlRFU1QpCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX21tYW4uaApuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwMDAwMDAuLjZlNzBiOTFkYWJjNAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmgKQEAgLTAsMCArMSwzMSBAQAorLyoK
KyAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKKyAqCisgKiBDb3B5cmlnaHQgwqkgMjAx
OSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpZm5kZWYgX19JOTE1X0dFTV9NTUFOX0hfXwor
I2RlZmluZSBfX0k5MTVfR0VNX01NQU5fSF9fCisKKyNpbmNsdWRlIDxsaW51eC9tbV90eXBlcy5o
PgorI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+CisKK3N0cnVjdCBkcm1fZGV2aWNlOworc3RydWN0
IGRybV9maWxlOworc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Q7CitzdHJ1Y3QgZmlsZTsKK3N0
cnVjdCBpOTE1X21tYXBfb2Zmc2V0Oworc3RydWN0IG11dGV4OworCitpbnQgaTkxNV9nZW1fbW1h
cChzdHJ1Y3QgZmlsZSAqZmlscCwgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpOwordm1fZmF1
bHRfdCBpOTE1X2dlbV9mYXVsdChzdHJ1Y3Qgdm1fZmF1bHQgKnZtZik7Cit2b2lkIGk5MTVfbW1h
cF9vZmZzZXRfZGVzdHJveShzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vLCBzdHJ1Y3QgbXV0
ZXggKm11dGV4KTsKKwordm9pZCBfX2k5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXBfZ3R0KHN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopOwordm9pZCBpOTE1X2dlbV9vYmplY3RfcmVs
ZWFzZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopOwordm9pZCBpOTE1X2dl
bV9vYmplY3RfcmVsZWFzZV9tbWFwX29mZnNldChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAq
b2JqKTsKK2ludCBpOTE1X2dlbV9tbWFwX2R1bWIoc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYs
IHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCisJCSAgICAgIHUzMiBoYW5kbGUsIHU2NCAqb2Zmc2V0
KTsKK2ludCBpOTE1X2dlbV9tbWFwX2d0dF92ZXJzaW9uKHZvaWQpOworCisjZW5kaWYKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYwppbmRleCA0NTg5NDVlMTgyM2Uu
LmYxYjg3YTgzOTkyNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX29iamVjdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmpl
Y3QuYwpAQCAtMjksNiArMjksNyBAQAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAi
aTkxNV9nZW1fY2xmbHVzaC5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX2NvbnRleHQuaCIKKyNpbmNs
dWRlICJpOTE1X2dlbV9tbWFuLmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1fb2JqZWN0LmgiCiAjaW5j
bHVkZSAiaTkxNV9nbG9iYWxzLmgiCiAjaW5jbHVkZSAiaTkxNV90cmFjZS5oIgpAQCAtNjEsNiAr
NjIsOSBAQCB2b2lkIGk5MTVfZ2VtX29iamVjdF9pbml0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2Jq
ZWN0ICpvYmosCiAKIAlJTklUX0xJU1RfSEVBRCgmb2JqLT5sdXRfbGlzdCk7CiAKKwltdXRleF9p
bml0KCZvYmotPm1tb19sb2NrKTsKKwlJTklUX0xJU1RfSEVBRCgmb2JqLT5tbWFwX29mZnNldHMp
OworCiAJaW5pdF9yY3VfaGVhZCgmb2JqLT5yY3UpOwogCiAJb2JqLT5vcHMgPSBvcHM7CkBAIC05
Nyw2ICsxMDEsNyBAQCB2b2lkIGk5MTVfZ2VtX2Nsb3NlX29iamVjdChzdHJ1Y3QgZHJtX2dlbV9v
YmplY3QgKmdlbSwgc3RydWN0IGRybV9maWxlICpmaWxlKQogCXN0cnVjdCBkcm1faTkxNV9nZW1f
b2JqZWN0ICpvYmogPSB0b19pbnRlbF9ibyhnZW0pOwogCXN0cnVjdCBkcm1faTkxNV9maWxlX3By
aXZhdGUgKmZwcml2ID0gZmlsZS0+ZHJpdmVyX3ByaXY7CiAJc3RydWN0IGk5MTVfbHV0X2hhbmRs
ZSAqbHV0LCAqbG47CisJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1tbywgKm9uOwogCUxJU1Rf
SEVBRChjbG9zZSk7CiAKIAlpOTE1X2dlbV9vYmplY3RfbG9jayhvYmopOwpAQCAtMTExLDYgKzEx
Niw5IEBAIHZvaWQgaTkxNV9nZW1fY2xvc2Vfb2JqZWN0KHN0cnVjdCBkcm1fZ2VtX29iamVjdCAq
Z2VtLCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCiAJfQogCWk5MTVfZ2VtX29iamVjdF91bmxvY2so
b2JqKTsKIAorCWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShtbW8sIG9uLCAmb2JqLT5tbWFwX29m
ZnNldHMsIG9mZnNldCkKKwkJZHJtX3ZtYV9ub2RlX3Jldm9rZSgmbW1vLT52bWFfbm9kZSwgZmls
ZSk7CisKIAlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUobHV0LCBsbiwgJmNsb3NlLCBvYmpfbGlu
aykgewogCQlzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4ID0gbHV0LT5jdHg7CiAJCXN0cnVj
dCBpOTE1X3ZtYSAqdm1hOwpAQCAtMTU4LDYgKzE2Niw4IEBAIHN0YXRpYyB2b2lkIF9faTkxNV9n
ZW1fZnJlZV9vYmplY3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCiAJd2FrZXJl
ZiA9IGludGVsX3J1bnRpbWVfcG1fZ2V0KCZpOTE1LT5ydW50aW1lX3BtKTsKIAlsbGlzdF9mb3Jf
ZWFjaF9lbnRyeV9zYWZlKG9iaiwgb24sIGZyZWVkLCBmcmVlZCkgeworCQlzdHJ1Y3QgaTkxNV9t
bWFwX29mZnNldCAqbW1vLCAqbW47CisKIAkJdHJhY2VfaTkxNV9nZW1fb2JqZWN0X2Rlc3Ryb3ko
b2JqKTsKIAogCQlpZiAoIWxpc3RfZW1wdHkoJm9iai0+dm1hLmxpc3QpKSB7CkBAIC0xODMsNiAr
MTkzLDE0IEBAIHN0YXRpYyB2b2lkIF9faTkxNV9nZW1fZnJlZV9vYmplY3RzKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1LAogCQkJc3Bpbl91bmxvY2soJm9iai0+dm1hLmxvY2spOwogCQl9
CiAKKwkJaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChvYmopOworCisJCWxpc3RfZm9yX2Vh
Y2hfZW50cnlfc2FmZShtbW8sIG1uLCAmb2JqLT5tbWFwX29mZnNldHMsIG9mZnNldCkgeworCQkJ
bW1vLT5vYmogPSBOVUxMOworCQkJaTkxNV9tbWFwX29mZnNldF9kZXN0cm95KG1tbywgJm9iai0+
bW1vX2xvY2spOworCQl9CisKKwkJR0VNX0JVR19PTighbGlzdF9lbXB0eSgmb2JqLT5tbWFwX29m
ZnNldHMpKTsKIAkJR0VNX0JVR19PTihhdG9taWNfcmVhZCgmb2JqLT5iaW5kX2NvdW50KSk7CiAJ
CUdFTV9CVUdfT04ob2JqLT51c2VyZmF1bHRfY291bnQpOwogCQlHRU1fQlVHX09OKCFsaXN0X2Vt
cHR5KCZvYmotPmx1dF9saXN0KSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fb2JqZWN0LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
b2JqZWN0LmgKaW5kZXggZTU3NTBkNTA2Y2M5Li5hMWViN2MwYjIzYWMgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmgKQEAgLTEzMiwxMyArMTMyLDEzIEBAIHZv
aWQgaTkxNV9nZW1fb2JqZWN0X3VubG9ja19mZW5jZShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqLAogc3RhdGljIGlubGluZSB2b2lkCiBpOTE1X2dlbV9vYmplY3Rfc2V0X3JlYWRvbmx5
KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiB7Ci0Jb2JqLT5iYXNlLnZtYV9ub2Rl
LnJlYWRvbmx5ID0gdHJ1ZTsKKwlvYmotPmZsYWdzIHw9IEk5MTVfQk9fUkVBRE9OTFk7CiB9CiAK
IHN0YXRpYyBpbmxpbmUgYm9vbAogaTkxNV9nZW1fb2JqZWN0X2lzX3JlYWRvbmx5KGNvbnN0IHN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiB7Ci0JcmV0dXJuIG9iai0+YmFzZS52bWFf
bm9kZS5yZWFkb25seTsKKwlyZXR1cm4gb2JqLT5mbGFncyAmIEk5MTVfQk9fUkVBRE9OTFk7CiB9
CiAKIHN0YXRpYyBpbmxpbmUgYm9vbApAQCAtMzg3LDkgKzM4Nyw2IEBAIHN0YXRpYyBpbmxpbmUg
dm9pZCBpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmopCiAJaTkxNV9nZW1fb2JqZWN0X3VucGluX3BhZ2VzKG9iaik7CiB9CiAKLXZvaWQgX19p
OTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpv
YmopOwotdm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmopOwotCiB2b2lkCiBpOTE1X2dlbV9vYmplY3RfZmx1c2hfd3JpdGVfZG9t
YWluKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJCQkJICAgdW5zaWduZWQgaW50
IGZsdXNoX2RvbWFpbnMpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX29iamVjdF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X29iamVjdF90eXBlcy5oCmluZGV4IDE1ZjgyOTdkYzM0ZS4uYzBiZWI5N2I1NmQxIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVzLmgKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oCkBAIC02
Myw2ICs2MywyMyBAQCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdF9vcHMgewogCXZvaWQgKCpy
ZWxlYXNlKShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsKIH07CiAKK2VudW0gaTkx
NV9tbWFwX3R5cGUgeworCUk5MTVfTU1BUF9UWVBFX0dUVCA9IDAsCisJSTkxNV9NTUFQX1RZUEVf
V0MsCisJSTkxNV9NTUFQX1RZUEVfV0IsCisJSTkxNV9NTUFQX1RZUEVfVUMsCit9OworCitzdHJ1
Y3QgaTkxNV9tbWFwX29mZnNldCB7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldjsKKwlzdHJ1Y3Qg
ZHJtX3ZtYV9vZmZzZXRfbm9kZSB2bWFfbm9kZTsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqOworCXN0cnVjdCBkcm1fZmlsZSAqZmlsZTsKKwllbnVtIGk5MTVfbW1hcF90eXBlIG1t
YXBfdHlwZTsKKworCXN0cnVjdCBsaXN0X2hlYWQgb2Zmc2V0OworfTsKKwogc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgewogCXN0cnVjdCBkcm1fZ2VtX29iamVjdCBiYXNlOwogCkBAIC0xMTgs
MTIgKzEzNSwxNyBAQCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCB7CiAJdW5zaWduZWQgaW50
IHVzZXJmYXVsdF9jb3VudDsKIAlzdHJ1Y3QgbGlzdF9oZWFkIHVzZXJmYXVsdF9saW5rOwogCisJ
LyogUHJvdGVjdHMgYWNjZXNzIHRvIG1tYXAgb2Zmc2V0cyAqLworCXN0cnVjdCBtdXRleCBtbW9f
bG9jazsKKwlzdHJ1Y3QgbGlzdF9oZWFkIG1tYXBfb2Zmc2V0czsKKwogCUk5MTVfU0VMRlRFU1Rf
REVDTEFSRShzdHJ1Y3QgbGlzdF9oZWFkIHN0X2xpbmspOwogCiAJdW5zaWduZWQgbG9uZyBmbGFn
czsKICNkZWZpbmUgSTkxNV9CT19BTExPQ19DT05USUdVT1VTIEJJVCgwKQogI2RlZmluZSBJOTE1
X0JPX0FMTE9DX1ZPTEFUSUxFICAgQklUKDEpCiAjZGVmaW5lIEk5MTVfQk9fQUxMT0NfRkxBR1Mg
KEk5MTVfQk9fQUxMT0NfQ09OVElHVU9VUyB8IEk5MTVfQk9fQUxMT0NfVk9MQVRJTEUpCisjZGVm
aW5lIEk5MTVfQk9fUkVBRE9OTFkgICAgICAgICBCSVQoMikKIAogCS8qCiAJICogSXMgdGhlIG9i
amVjdCB0byBiZSBtYXBwZWQgYXMgcmVhZC1vbmx5IHRvIHRoZSBHUFUKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL2k5MTVfZ2VtX3BhZ2VzLmMKaW5kZXggZjQwMmMyYzQxNWMyLi43NTE5N2NhNjk2
YTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jCkBAIC04LDYg
KzgsNyBAQAogI2luY2x1ZGUgImk5MTVfZ2VtX29iamVjdC5oIgogI2luY2x1ZGUgImk5MTVfc2Nh
dHRlcmxpc3QuaCIKICNpbmNsdWRlICJpOTE1X2dlbV9sbWVtLmgiCisjaW5jbHVkZSAiaTkxNV9n
ZW1fbW1hbi5oIgogCiB2b2lkIF9faTkxNV9nZW1fb2JqZWN0X3NldF9wYWdlcyhzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCQkJCSBzdHJ1Y3Qgc2dfdGFibGUgKnBhZ2VzLApAQCAt
MjA3LDYgKzIwOCw4IEBAIGludCBfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMoc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iaikKIAkJZ290byB1bmxvY2s7CiAJfQogCisJaTkxNV9nZW1f
b2JqZWN0X3JlbGVhc2VfbW1hcF9vZmZzZXQob2JqKTsKKwogCS8qCiAJICogLT5wdXRfcGFnZXMg
bWlnaHQgbmVlZCB0byBhbGxvY2F0ZSBtZW1vcnkgZm9yIHRoZSBiaXQxNyBzd2l6emxlCiAJICog
YXJyYXksIGhlbmNlIHByb3RlY3QgdGhlbSBmcm9tIGJlaW5nIHJlYXBlZCBieSByZW1vdmluZyB0
aGVtIGZyb20gZ3R0CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fdGlsaW5nLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdGlsaW5nLmMK
aW5kZXggMWZhNTkyZDgyYWY1Li42Yzc4MjVhMmRjMmEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90aWxpbmcuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fdGlsaW5nLmMKQEAgLTExLDYgKzExLDcgQEAKICNpbmNsdWRlICJpOTE1
X2Rydi5oIgogI2luY2x1ZGUgImk5MTVfZ2VtLmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1faW9jdGxz
LmgiCisjaW5jbHVkZSAiaTkxNV9nZW1fbW1hbi5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX29iamVj
dC5oIgogCiAvKioKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVz
dHMvaTkxNV9nZW1fbW1hbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9p
OTE1X2dlbV9tbWFuLmMKaW5kZXggNmNlOTE2N2Y4YzlmLi5lNTQ2YTE2YmQ4OGQgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1hbi5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1hbi5jCkBA
IC01NjUsMTUgKzU2NSwyMCBAQCBzdGF0aWMgYm9vbCBhc3NlcnRfbW1hcF9vZmZzZXQoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAJCQkgICAgICAgaW50IGV4cGVjdGVkKQogewogCXN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmo7CisJLyogT3duZXJzaGlwIHRyYW5zZmVycmVk
IHRvIHBhcmVudCBnZW0gb2JqZWN0IGluIGNyZWF0ZV9tbWFwX29mZnNldCAqLworCXN0cnVjdCBp
OTE1X21tYXBfb2Zmc2V0ICptbW8gPSBremFsbG9jKHNpemVvZigqbW1vKSwgR0ZQX0tFUk5FTCk7
CiAJaW50IGVycjsKIAogCW9iaiA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfaW50ZXJuYWwoaTkx
NSwgc2l6ZSk7CiAJaWYgKElTX0VSUihvYmopKQogCQlyZXR1cm4gUFRSX0VSUihvYmopOwogCi0J
ZXJyID0gY3JlYXRlX21tYXBfb2Zmc2V0KG9iaik7CisJZXJyID0gY3JlYXRlX21tYXBfb2Zmc2V0
KG9iaiwgbW1vKTsKKwlpZiAoZXJyKQorCQlrZnJlZShtbW8pOwogCWk5MTVfZ2VtX29iamVjdF9w
dXQob2JqKTsKIAorCiAJcmV0dXJuIGVyciA9PSBleHBlY3RlZDsKIH0KIApAQCAtNjA5LDYgKzYx
NCw4IEBAIHN0YXRpYyBpbnQgaWd0X21tYXBfb2Zmc2V0X2V4aGF1c3Rpb24odm9pZCAqYXJnKQog
CXN0cnVjdCBkcm1fbW0gKm1tID0gJmk5MTUtPmRybS52bWFfb2Zmc2V0X21hbmFnZXItPnZtX2Fk
ZHJfc3BhY2VfbW07CiAJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKIAlzdHJ1Y3Qg
ZHJtX21tX25vZGUgKmhvbGUsICpuZXh0OworCS8qIE93bmVyc2hpcCB0cmFuc2ZlcnJlZCB0byBw
YXJlbnQgZ2VtIG9iamVjdCBpbiBjcmVhdGVfbW1hcF9vZmZzZXQgKi8KKwlzdHJ1Y3QgaTkxNV9t
bWFwX29mZnNldCAqbW1vID0ga3phbGxvYyhzaXplb2YoKm1tbyksIEdGUF9LRVJORUwpOwogCWlu
dCBsb29wLCBlcnI7CiAKIAkvKiBEaXNhYmxlIGJhY2tncm91bmQgcmVhcGVyICovCkBAIC02NzMs
OSArNjgwLDEwIEBAIHN0YXRpYyBpbnQgaWd0X21tYXBfb2Zmc2V0X2V4aGF1c3Rpb24odm9pZCAq
YXJnKQogCQlnb3RvIG91dDsKIAl9CiAKLQllcnIgPSBjcmVhdGVfbW1hcF9vZmZzZXQob2JqKTsK
KwllcnIgPSBjcmVhdGVfbW1hcF9vZmZzZXQob2JqLCBtbW8pOwogCWlmIChlcnIpIHsKIAkJcHJf
ZXJyKCJVbmFibGUgdG8gaW5zZXJ0IG9iamVjdCBpbnRvIHJlY2xhaW1lZCBob2xlXG4iKTsKKwkJ
a2ZyZWUobW1vKTsKIAkJZ290byBlcnJfb2JqOwogCX0KIApAQCAtNzI0LDExICs3MzIsMTMgQEAg
c3RhdGljIGludCBpZ3RfbW1hcF9vZmZzZXRfZXhoYXVzdGlvbih2b2lkICphcmcpCiB9CiAKICNk
ZWZpbmUgZXhwYW5kMzIoeCkgKCgoeCkgPDwgMCkgfCAoKHgpIDw8IDgpIHwgKCh4KSA8PCAxNikg
fCAoKHgpIDw8IDI0KSkKLXN0YXRpYyBpbnQgaWd0X21tYXBfZ3R0KHZvaWQgKmFyZykKK3N0YXRp
YyBpbnQgaWd0X21tYXAodm9pZCAqYXJnLCBlbnVtIGk5MTVfbW1hcF90eXBlIHR5cGUpCiB7CiAJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBhcmc7CiAJc3RydWN0IGRybV9pOTE1X2dl
bV9vYmplY3QgKm9iajsKIAlzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKmFyZWE7CisJLyogT3duZXJz
aGlwIHRyYW5zZmVycmVkIHRvIHBhcmVudCBnZW0gb2JqZWN0IGluIGNyZWF0ZV9tbWFwX29mZnNl
dCAqLworCXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICptbW8gPSBremFsbG9jKHNpemVvZigqbW1v
KSwgR0ZQX0tFUk5FTCk7CiAJdW5zaWduZWQgbG9uZyBhZGRyOwogCXZvaWQgKnZhZGRyOwogCWlu
dCBlcnIsIGk7CkBAIC03NDksMTEgKzc1OSwxMiBAQCBzdGF0aWMgaW50IGlndF9tbWFwX2d0dCh2
b2lkICphcmcpCiAJaTkxNV9nZW1fb2JqZWN0X2ZsdXNoX21hcChvYmopOwogCWk5MTVfZ2VtX29i
amVjdF91bnBpbl9tYXAob2JqKTsKIAotCWVyciA9IGNyZWF0ZV9tbWFwX29mZnNldChvYmopOwor
CWVyciA9IGNyZWF0ZV9tbWFwX29mZnNldChvYmosIG1tbyk7CiAJaWYgKGVycikKIAkJZ290byBv
dXQ7CiAKLQlhZGRyID0gaWd0X21tYXBfbm9kZShpOTE1LCAmb2JqLT5iYXNlLnZtYV9ub2RlLAor
CW1tby0+bW1hcF90eXBlID0gdHlwZTsKKwlhZGRyID0gaWd0X21tYXBfbm9kZShpOTE1LCAmbW1v
LT52bWFfbm9kZSwKIAkJCSAgICAgMCwgUFJPVF9XUklURSwgTUFQX1NIQVJFRCk7CiAJaWYgKElT
X0VSUl9WQUxVRShhZGRyKSkgewogCQllcnIgPSBhZGRyOwpAQCAtNzY5LDggKzc4MCw4IEBAIHN0
YXRpYyBpbnQgaWd0X21tYXBfZ3R0KHZvaWQgKmFyZykKIAkJZ290byBvdXRfdW5tYXA7CiAJfQog
Ci0JaWYgKGFyZWEtPnZtX3ByaXZhdGVfZGF0YSAhPSBvYmopIHsKLQkJcHJfZXJyKCJ2bV9hcmVh
X3N0cnVjdCBkaWQgbm90IHBvaW50IGJhY2sgdG8gb3VyIG9iamVjdCFcbiIpOworCWlmIChhcmVh
LT52bV9wcml2YXRlX2RhdGEgIT0gbW1vKSB7CisJCXByX2Vycigidm1fYXJlYV9zdHJ1Y3QgZGlk
IG5vdCBwb2ludCBiYWNrIHRvIG91ciBtbWFwX29mZnNldCBvYmplY3QhXG4iKTsKIAkJZXJyID0g
LUVJTlZBTDsKIAkJZ290byBvdXRfdW5tYXA7CiAJfQpAQCAtODIxLDYgKzgzMiwxNiBAQCBzdGF0
aWMgaW50IGlndF9tbWFwX2d0dCh2b2lkICphcmcpCiAJcmV0dXJuIGVycjsKIH0KIAorc3RhdGlj
IGludCBpZ3RfbW1hcF9ndHQodm9pZCAqYXJnKQoreworCXJldHVybiBpZ3RfbW1hcChhcmcsIEk5
MTVfTU1BUF9UWVBFX0dUVCk7Cit9CisKK3N0YXRpYyBpbnQgaWd0X21tYXBfY3B1KHZvaWQgKmFy
ZykKK3sKKwlyZXR1cm4gaWd0X21tYXAoYXJnLCBJOTE1X01NQVBfVFlQRV9XQyk7Cit9CisKIHN0
YXRpYyBpbnQgY2hlY2tfcHJlc2VudF9wdGUocHRlX3QgKnB0ZSwgdW5zaWduZWQgbG9uZyBhZGRy
LCB2b2lkICpkYXRhKQogewogCWlmICghcHRlX3ByZXNlbnQoKnB0ZSkgfHwgcHRlX25vbmUoKnB0
ZSkpIHsKQEAgLTg3MywxMCArODk0LDEyIEBAIHN0YXRpYyBpbnQgcHJlZmF1bHRfcmFuZ2UodTY0
IHN0YXJ0LCB1NjQgbGVuKQogCXJldHVybiBfX2dldF91c2VyKGMsIGVuZCAtIDEpOwogfQogCi1z
dGF0aWMgaW50IGlndF9tbWFwX2d0dF9yZXZva2Uodm9pZCAqYXJnKQorc3RhdGljIGludCBpZ3Rf
bW1hcF9yZXZva2Uodm9pZCAqYXJnLCBlbnVtIGk5MTVfbW1hcF90eXBlIHR5cGUpCiB7CiAJc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBhcmc7CiAJc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3QgKm9iajsKKwkvKiBPd25lcnNoaXAgdHJhbnNmZXJyZWQgdG8gcGFyZW50IGdlbSBvYmpl
Y3QgaW4gY3JlYXRlX21tYXBfb2Zmc2V0ICovCisJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1t
byA9IGt6YWxsb2Moc2l6ZW9mKCptbW8pLCBHRlBfS0VSTkVMKTsKIAl1bnNpZ25lZCBsb25nIGFk
ZHI7CiAJaW50IGVycjsKIApAQCAtODg3LDExICs5MTAsMTIgQEAgc3RhdGljIGludCBpZ3RfbW1h
cF9ndHRfcmV2b2tlKHZvaWQgKmFyZykKIAlpZiAoSVNfRVJSKG9iaikpCiAJCXJldHVybiBQVFJf
RVJSKG9iaik7CiAKLQllcnIgPSBjcmVhdGVfbW1hcF9vZmZzZXQob2JqKTsKKwllcnIgPSBjcmVh
dGVfbW1hcF9vZmZzZXQob2JqLCBtbW8pOwogCWlmIChlcnIpCiAJCWdvdG8gb3V0OwogCi0JYWRk
ciA9IGlndF9tbWFwX25vZGUoaTkxNSwgJm9iai0+YmFzZS52bWFfbm9kZSwKKwltbW8tPm1tYXBf
dHlwZSA9IHR5cGU7CisJYWRkciA9IGlndF9tbWFwX25vZGUoaTkxNSwgJm1tby0+dm1hX25vZGUs
CiAJCQkgICAgIDAsIFBST1RfV1JJVEUsIE1BUF9TSEFSRUQpOwogCWlmIChJU19FUlJfVkFMVUUo
YWRkcikpIHsKIAkJZXJyID0gYWRkcjsKQEAgLTkwMiw3ICs5MjYsOCBAQCBzdGF0aWMgaW50IGln
dF9tbWFwX2d0dF9yZXZva2Uodm9pZCAqYXJnKQogCWlmIChlcnIpCiAJCWdvdG8gb3V0X3VubWFw
OwogCi0JR0VNX0JVR19PTighYXRvbWljX3JlYWQoJm9iai0+YmluZF9jb3VudCkpOworCUdFTV9C
VUdfT04obW1vLT5tbWFwX3R5cGUgPT0gSTkxNV9NTUFQX1RZUEVfR1RUICYmCisJCSAgICFhdG9t
aWNfcmVhZCgmb2JqLT5iaW5kX2NvdW50KSk7CiAKIAllcnIgPSBjaGVja19wcmVzZW50KGFkZHIs
IG9iai0+YmFzZS5zaXplKTsKIAlpZiAoZXJyKQpAQCAtOTIwLDYgKzk0NSwxNSBAQCBzdGF0aWMg
aW50IGlndF9tbWFwX2d0dF9yZXZva2Uodm9pZCAqYXJnKQogCX0KIAlHRU1fQlVHX09OKGF0b21p
Y19yZWFkKCZvYmotPmJpbmRfY291bnQpKTsKIAorCWlmICh0eXBlICE9IEk5MTVfTU1BUF9UWVBF
X0dUVCkgeworCQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqKTsKKwkJaWYgKGk5MTVf
Z2VtX29iamVjdF9oYXNfcGFnZXMob2JqKSkgeworCQkJcHJfZXJyKCJGYWlsZWQgdG8gcHV0LXBh
Z2VzIG9iamVjdCFcbiIpOworCQkJZXJyID0gLUVJTlZBTDsKKwkJCWdvdG8gb3V0X3VubWFwOwor
CQl9CisJfQorCiAJZXJyID0gY2hlY2tfYWJzZW50KGFkZHIsIG9iai0+YmFzZS5zaXplKTsKIAlp
ZiAoZXJyKQogCQlnb3RvIG91dF91bm1hcDsKQEAgLTkzMSw2ICs5NjUsMTYgQEAgc3RhdGljIGlu
dCBpZ3RfbW1hcF9ndHRfcmV2b2tlKHZvaWQgKmFyZykKIAlyZXR1cm4gZXJyOwogfQogCitzdGF0
aWMgaW50IGlndF9tbWFwX2d0dF9yZXZva2Uodm9pZCAqYXJnKQoreworCXJldHVybiBpZ3RfbW1h
cF9yZXZva2UoYXJnLCBJOTE1X01NQVBfVFlQRV9HVFQpOworfQorCitzdGF0aWMgaW50IGlndF9t
bWFwX2NwdV9yZXZva2Uodm9pZCAqYXJnKQoreworCXJldHVybiBpZ3RfbW1hcF9yZXZva2UoYXJn
LCBJOTE1X01NQVBfVFlQRV9XQyk7Cit9CisKIGludCBpOTE1X2dlbV9tbWFuX2xpdmVfc2VsZnRl
c3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewogCXN0YXRpYyBjb25zdCBzdHJ1
Y3QgaTkxNV9zdWJ0ZXN0IHRlc3RzW10gPSB7CkBAIC05MzgsNyArOTgyLDkgQEAgaW50IGk5MTVf
Z2VtX21tYW5fbGl2ZV9zZWxmdGVzdHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJ
CVNVQlRFU1QoaWd0X3Ntb2tlX3RpbGluZyksCiAJCVNVQlRFU1QoaWd0X21tYXBfb2Zmc2V0X2V4
aGF1c3Rpb24pLAogCQlTVUJURVNUKGlndF9tbWFwX2d0dCksCisJCVNVQlRFU1QoaWd0X21tYXBf
Y3B1KSwKIAkJU1VCVEVTVChpZ3RfbW1hcF9ndHRfcmV2b2tlKSwKKwkJU1VCVEVTVChpZ3RfbW1h
cF9jcHVfcmV2b2tlKSwKIAl9OwogCiAJcmV0dXJuIGk5MTVfc3VidGVzdHModGVzdHMsIGk5MTUp
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKaW5kZXggMzYxODkyMzhlMTNjLi4w
ZTk0YjcyMGM5OTMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jl
c2V0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYwpAQCAtNjc4
LDggKzY3OCwxMyBAQCBzdGF0aWMgdm9pZCByZXZva2VfbW1hcHMoc3RydWN0IGludGVsX2d0ICpn
dCkKIAkJCWNvbnRpbnVlOwogCiAJCUdFTV9CVUdfT04odm1hLT5mZW5jZSAhPSAmZ3QtPmdndHQt
PmZlbmNlX3JlZ3NbaV0pOwotCQlub2RlID0gJnZtYS0+b2JqLT5iYXNlLnZtYV9ub2RlOworCisJ
CWlmICghdm1hLT5tbW8pCisJCQljb250aW51ZTsKKworCQlub2RlID0gJnZtYS0+bW1vLT52bWFf
bm9kZTsKIAkJdm1hX29mZnNldCA9IHZtYS0+Z2d0dF92aWV3LnBhcnRpYWwub2Zmc2V0IDw8IFBB
R0VfU0hJRlQ7CisKIAkJdW5tYXBfbWFwcGluZ19yYW5nZShndC0+aTkxNS0+ZHJtLmFub25faW5v
ZGUtPmlfbWFwcGluZywKIAkJCQkgICAgZHJtX3ZtYV9ub2RlX29mZnNldF9hZGRyKG5vZGUpICsg
dm1hX29mZnNldCwKIAkJCQkgICAgdm1hLT5zaXplLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKaW5k
ZXggZjUwOWQ4MjZmY2M3Li5iMjljODhiOGZhMWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwpA
QCAtNjEsNiArNjEsNyBAQAogCiAjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCIKICNp
bmNsdWRlICJnZW0vaTkxNV9nZW1faW9jdGxzLmgiCisjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX21t
YW4uaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgogI2luY2x1ZGUgImd0L2ludGVsX2d0X3Bt
LmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfcmM2LmgiCkBAIC0yNjYyLDE4ICsyNjYzLDEyIEBAIGNv
bnN0IHN0cnVjdCBkZXZfcG1fb3BzIGk5MTVfcG1fb3BzID0gewogCS5ydW50aW1lX3Jlc3VtZSA9
IGludGVsX3J1bnRpbWVfcmVzdW1lLAogfTsKIAotc3RhdGljIGNvbnN0IHN0cnVjdCB2bV9vcGVy
YXRpb25zX3N0cnVjdCBpOTE1X2dlbV92bV9vcHMgPSB7Ci0JLmZhdWx0ID0gaTkxNV9nZW1fZmF1
bHQsCi0JLm9wZW4gPSBkcm1fZ2VtX3ZtX29wZW4sCi0JLmNsb3NlID0gZHJtX2dlbV92bV9jbG9z
ZSwKLX07Ci0KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZmlsZV9vcGVyYXRpb25zIGk5MTVfZHJpdmVy
X2ZvcHMgPSB7CiAJLm93bmVyID0gVEhJU19NT0RVTEUsCiAJLm9wZW4gPSBkcm1fb3BlbiwKIAku
cmVsZWFzZSA9IGRybV9yZWxlYXNlLAogCS51bmxvY2tlZF9pb2N0bCA9IGRybV9pb2N0bCwKLQku
bW1hcCA9IGRybV9nZW1fbW1hcCwKKwkubW1hcCA9IGk5MTVfZ2VtX21tYXAsCiAJLnBvbGwgPSBk
cm1fcG9sbCwKIAkucmVhZCA9IGRybV9yZWFkLAogCS5jb21wYXRfaW9jdGwgPSBpOTE1X2NvbXBh
dF9pb2N0bCwKQEAgLTI3MjAsNyArMjcxNSw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2lv
Y3RsX2Rlc2MgaTkxNV9pb2N0bHNbXSA9IHsKIAlEUk1fSU9DVExfREVGX0RSVihJOTE1X0dFTV9Q
UkVBRCwgaTkxNV9nZW1fcHJlYWRfaW9jdGwsIERSTV9SRU5ERVJfQUxMT1cpLAogCURSTV9JT0NU
TF9ERUZfRFJWKEk5MTVfR0VNX1BXUklURSwgaTkxNV9nZW1fcHdyaXRlX2lvY3RsLCBEUk1fUkVO
REVSX0FMTE9XKSwKIAlEUk1fSU9DVExfREVGX0RSVihJOTE1X0dFTV9NTUFQLCBpOTE1X2dlbV9t
bWFwX2lvY3RsLCBEUk1fUkVOREVSX0FMTE9XKSwKLQlEUk1fSU9DVExfREVGX0RSVihJOTE1X0dF
TV9NTUFQX0dUVCwgaTkxNV9nZW1fbW1hcF9ndHRfaW9jdGwsIERSTV9SRU5ERVJfQUxMT1cpLAor
CURSTV9JT0NUTF9ERUZfRFJWKEk5MTVfR0VNX01NQVBfT0ZGU0VULCBpOTE1X2dlbV9tbWFwX29m
ZnNldF9pb2N0bCwgRFJNX1JFTkRFUl9BTExPVyksCiAJRFJNX0lPQ1RMX0RFRl9EUlYoSTkxNV9H
RU1fU0VUX0RPTUFJTiwgaTkxNV9nZW1fc2V0X2RvbWFpbl9pb2N0bCwgRFJNX1JFTkRFUl9BTExP
VyksCiAJRFJNX0lPQ1RMX0RFRl9EUlYoSTkxNV9HRU1fU1dfRklOSVNILCBpOTE1X2dlbV9zd19m
aW5pc2hfaW9jdGwsIERSTV9SRU5ERVJfQUxMT1cpLAogCURSTV9JT0NUTF9ERUZfRFJWKEk5MTVf
R0VNX1NFVF9USUxJTkcsIGk5MTVfZ2VtX3NldF90aWxpbmdfaW9jdGwsIERSTV9SRU5ERVJfQUxM
T1cpLApAQCAtMjc2Miw3ICsyNzU3LDYgQEAgc3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIGRyaXZl
ciA9IHsKIAogCS5nZW1fY2xvc2Vfb2JqZWN0ID0gaTkxNV9nZW1fY2xvc2Vfb2JqZWN0LAogCS5n
ZW1fZnJlZV9vYmplY3RfdW5sb2NrZWQgPSBpOTE1X2dlbV9mcmVlX29iamVjdCwKLQkuZ2VtX3Zt
X29wcyA9ICZpOTE1X2dlbV92bV9vcHMsCiAKIAkucHJpbWVfaGFuZGxlX3RvX2ZkID0gZHJtX2dl
bV9wcmltZV9oYW5kbGVfdG9fZmQsCiAJLnByaW1lX2ZkX3RvX2hhbmRsZSA9IGRybV9nZW1fcHJp
bWVfZmRfdG9faGFuZGxlLApAQCAtMjc3Myw3ICsyNzY3LDcgQEAgc3RhdGljIHN0cnVjdCBkcm1f
ZHJpdmVyIGRyaXZlciA9IHsKIAkuZ2V0X3NjYW5vdXRfcG9zaXRpb24gPSBpOTE1X2dldF9jcnRj
X3NjYW5vdXRwb3MsCiAKIAkuZHVtYl9jcmVhdGUgPSBpOTE1X2dlbV9kdW1iX2NyZWF0ZSwKLQku
ZHVtYl9tYXBfb2Zmc2V0ID0gaTkxNV9nZW1fbW1hcF9ndHQsCisJLmR1bWJfbWFwX29mZnNldCA9
IGk5MTVfZ2VtX21tYXBfZHVtYiwKIAkuaW9jdGxzID0gaTkxNV9pb2N0bHMsCiAJLm51bV9pb2N0
bHMgPSBBUlJBWV9TSVpFKGk5MTVfaW9jdGxzKSwKIAkuZm9wcyA9ICZpOTE1X2RyaXZlcl9mb3Bz
LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5kZXggMTQ3NDRjMTE0NDc1Li4wZDRhZDE4ZTEwZGQg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaApAQCAtMTg1Nyw5ICsxODU3LDYgQEAgaTkxNV9tdXRl
eF9sb2NrX2ludGVycnVwdGlibGUoc3RydWN0IGRybV9kZXZpY2UgKmRldikKIGludCBpOTE1X2dl
bV9kdW1iX2NyZWF0ZShzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwKIAkJCSBzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LAogCQkJIHN0cnVjdCBkcm1fbW9kZV9jcmVhdGVfZHVtYiAqYXJncyk7Ci1p
bnQgaTkxNV9nZW1fbW1hcF9ndHQoc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYsIHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsCi0JCSAgICAgIHUzMiBoYW5kbGUsIHU2NCAqb2Zmc2V0KTsKLWludCBp
OTE1X2dlbV9tbWFwX2d0dF92ZXJzaW9uKHZvaWQpOwogCiBpbnQgX19tdXN0X2NoZWNrIGk5MTVf
Z2VtX3NldF9nbG9iYWxfc2Vxbm8oc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdTMyIHNlcW5vKTsK
IApAQCAtMTg4Miw3ICsxODc5LDYgQEAgdm9pZCBpOTE1X2dlbV9kcml2ZXJfcmVsZWFzZShzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBpOTE1X2dlbV9zdXNwZW5kKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIGk5MTVfZ2VtX3N1c3BlbmRf
bGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBpOTE1X2dlbV9y
ZXN1bWUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKLXZtX2ZhdWx0X3QgaTkx
NV9nZW1fZmF1bHQoc3RydWN0IHZtX2ZhdWx0ICp2bWYpOwogCiBpbnQgaTkxNV9nZW1fb3Blbihz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgc3RydWN0IGRybV9maWxlICpmaWxlKTsKIHZv
aWQgaTkxNV9nZW1fcmVsZWFzZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgZHJtX2Zp
bGUgKmZpbGUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKaW5kZXggNjEzOTViMDM0NDNlLi42Nzlm
YjQ2YTdjYzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwpAQCAtNDQsNiArNDQsNyBAQAogI2lu
Y2x1ZGUgImdlbS9pOTE1X2dlbV9jbGZsdXNoLmgiCiAjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX2Nv
bnRleHQuaCIKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1faW9jdGxzLmgiCisjaW5jbHVkZSAiZ2Vt
L2k5MTVfZ2VtX21tYW4uaCIKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1fcG0uaCIKICNpbmNsdWRl
ICJndC9pbnRlbF9jb250ZXh0LmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3VzZXIuaCIK
QEAgLTg1NSw3ICs4NTYsNyBAQCB2b2lkIGk5MTVfZ2VtX3J1bnRpbWVfc3VzcGVuZChzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAogCWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShvYmos
IG9uLAogCQkJCSAmaTkxNS0+Z2d0dC51c2VyZmF1bHRfbGlzdCwgdXNlcmZhdWx0X2xpbmspCi0J
CV9faTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChvYmopOworCQlfX2k5MTVfZ2VtX29iamVj
dF9yZWxlYXNlX21tYXBfZ3R0KG9iaik7CiAKIAkvKgogCSAqIFRoZSBmZW5jZSB3aWxsIGJlIGxv
c3Qgd2hlbiB0aGUgZGV2aWNlIHBvd2VycyBkb3duLiBJZiBhbnkgd2VyZQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9nZXRwYXJhbS5jCmluZGV4IGNmOGE4YzNlZjA0Ny4uNTRmY2U4MWQ1NzI0IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dldHBhcmFtLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jCkBAIC0yLDYgKzIsNyBAQAogICogU1BEWC1M
aWNlbnNlLUlkZW50aWZpZXI6IE1JVAogICovCiAKKyNpbmNsdWRlICJnZW0vaTkxNV9nZW1fbW1h
bi5oIgogI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV91c2VyLmgiCiAKICNpbmNsdWRlICJpOTE1
X2Rydi5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmMKaW5kZXggZTU1MTJmMjZlMjBhLi41MTA4ZGNi
MmU1YjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYwpAQCAtMTA1NCw3ICsxMDU0LDcgQEAgc3Rh
dGljIHZvaWQgX19pOTE1X3ZtYV9pb3VubWFwKHN0cnVjdCBpOTE1X3ZtYSAqdm1hKQogCiB2b2lk
IGk5MTVfdm1hX3Jldm9rZV9tbWFwKHN0cnVjdCBpOTE1X3ZtYSAqdm1hKQogewotCXN0cnVjdCBk
cm1fdm1hX29mZnNldF9ub2RlICpub2RlID0gJnZtYS0+b2JqLT5iYXNlLnZtYV9ub2RlOworCXN0
cnVjdCBkcm1fdm1hX29mZnNldF9ub2RlICpub2RlOwogCXU2NCB2bWFfb2Zmc2V0OwogCiAJbG9j
a2RlcF9hc3NlcnRfaGVsZCgmdm1hLT52bS0+bXV0ZXgpOwpAQCAtMTA2NSw2ICsxMDY1LDcgQEAg
dm9pZCBpOTE1X3ZtYV9yZXZva2VfbW1hcChzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKIAlHRU1fQlVH
X09OKCFpOTE1X3ZtYV9pc19tYXBfYW5kX2ZlbmNlYWJsZSh2bWEpKTsKIAlHRU1fQlVHX09OKCF2
bWEtPm9iai0+dXNlcmZhdWx0X2NvdW50KTsKIAorCW5vZGUgPSAmdm1hLT5tbW8tPnZtYV9ub2Rl
OwogCXZtYV9vZmZzZXQgPSB2bWEtPmdndHRfdmlldy5wYXJ0aWFsLm9mZnNldCA8PCBQQUdFX1NI
SUZUOwogCXVubWFwX21hcHBpbmdfcmFuZ2Uodm1hLT52bS0+aTkxNS0+ZHJtLmFub25faW5vZGUt
PmlfbWFwcGluZywKIAkJCSAgICBkcm1fdm1hX25vZGVfb2Zmc2V0X2FkZHIobm9kZSkgKyB2bWFf
b2Zmc2V0LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuaCBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmgKaW5kZXggNDY1OTMyODEzYmM1Li5mMDlmNGY1
MTNjNDEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuaApAQCAtNjMsNiArNjMsOSBAQCBzdHJ1Y3Qg
aTkxNV92bWEgewogCXU2NCBkaXNwbGF5X2FsaWdubWVudDsKIAlzdHJ1Y3QgaTkxNV9wYWdlX3Np
emVzIHBhZ2Vfc2l6ZXM7CiAKKwkvKiBtbWFwLW9mZnNldCBhc3NvY2lhdGVkIHdpdGggZmVuY2lu
ZyBmb3IgdGhpcyB2bWEgKi8KKwlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldAkqbW1vOworCiAJdTMy
IGZlbmNlX3NpemU7CiAJdTMyIGZlbmNlX2FsaWdubWVudDsKIApkaWZmIC0tZ2l0IGEvaW5jbHVk
ZS91YXBpL2RybS9pOTE1X2RybS5oIGIvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCmluZGV4
IDU0MDBkN2UwNTdmMS4uZTg0NGMzYThkMTk3IDEwMDY0NAotLS0gYS9pbmNsdWRlL3VhcGkvZHJt
L2k5MTVfZHJtLmgKKysrIGIvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCkBAIC0zOTUsNiAr
Mzk1LDcgQEAgdHlwZWRlZiBzdHJ1Y3QgX2RybV9pOTE1X3NhcmVhIHsKICNkZWZpbmUgRFJNX0lP
Q1RMX0k5MTVfR0VNX1BXUklURQlEUk1fSU9XIChEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVf
R0VNX1BXUklURSwgc3RydWN0IGRybV9pOTE1X2dlbV9wd3JpdGUpCiAjZGVmaW5lIERSTV9JT0NU
TF9JOTE1X0dFTV9NTUFQCQlEUk1fSU9XUihEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VN
X01NQVAsIHN0cnVjdCBkcm1faTkxNV9nZW1fbW1hcCkKICNkZWZpbmUgRFJNX0lPQ1RMX0k5MTVf
R0VNX01NQVBfR1RUCURSTV9JT1dSKERSTV9DT01NQU5EX0JBU0UgKyBEUk1fSTkxNV9HRU1fTU1B
UF9HVFQsIHN0cnVjdCBkcm1faTkxNV9nZW1fbW1hcF9ndHQpCisjZGVmaW5lIERSTV9JT0NUTF9J
OTE1X0dFTV9NTUFQX09GRlNFVAlEUk1fSU9XUihEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVf
R0VNX01NQVBfR1RULCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX21tYXBfb2Zmc2V0KQogI2RlZmluZSBE
Uk1fSU9DVExfSTkxNV9HRU1fU0VUX0RPTUFJTglEUk1fSU9XIChEUk1fQ09NTUFORF9CQVNFICsg
RFJNX0k5MTVfR0VNX1NFVF9ET01BSU4sIHN0cnVjdCBkcm1faTkxNV9nZW1fc2V0X2RvbWFpbikK
ICNkZWZpbmUgRFJNX0lPQ1RMX0k5MTVfR0VNX1NXX0ZJTklTSAlEUk1fSU9XIChEUk1fQ09NTUFO
RF9CQVNFICsgRFJNX0k5MTVfR0VNX1NXX0ZJTklTSCwgc3RydWN0IGRybV9pOTE1X2dlbV9zd19m
aW5pc2gpCiAjZGVmaW5lIERSTV9JT0NUTF9JOTE1X0dFTV9TRVRfVElMSU5HCURSTV9JT1dSIChE
Uk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX1NFVF9USUxJTkcsIHN0cnVjdCBkcm1faTkx
NV9nZW1fc2V0X3RpbGluZykKQEAgLTc5Myw2ICs3OTQsMzIgQEAgc3RydWN0IGRybV9pOTE1X2dl
bV9tbWFwX2d0dCB7CiAJX191NjQgb2Zmc2V0OwogfTsKIAorc3RydWN0IGRybV9pOTE1X2dlbV9t
bWFwX29mZnNldCB7CisJLyoqIEhhbmRsZSBmb3IgdGhlIG9iamVjdCBiZWluZyBtYXBwZWQuICov
CisJX191MzIgaGFuZGxlOworCV9fdTMyIHBhZDsKKwkvKioKKwkgKiBGYWtlIG9mZnNldCB0byB1
c2UgZm9yIHN1YnNlcXVlbnQgbW1hcCBjYWxsCisJICoKKwkgKiBUaGlzIGlzIGEgZml4ZWQtc2l6
ZSB0eXBlIGZvciAzMi82NCBjb21wYXRpYmlsaXR5LgorCSAqLworCV9fdTY0IG9mZnNldDsKKwor
CS8qKgorCSAqIEZsYWdzIGZvciBleHRlbmRlZCBiZWhhdmlvdXIuCisJICoKKwkgKiBJdCBpcyBt
YW5kYXRvcnkgdGhhdCBlaXRoZXIgb25lIG9mIHRoZSBNTUFQX09GRlNFVCBmbGFncworCSAqIHNo
b3VsZCBiZSBwYXNzZWQgaGVyZS4KKwkgKi8KKwlfX3U2NCBmbGFnczsKKyNkZWZpbmUgSTkxNV9N
TUFQX09GRlNFVF9HVFQgMAorI2RlZmluZSBJOTE1X01NQVBfT0ZGU0VUX1dDICAxCisjZGVmaW5l
IEk5MTVfTU1BUF9PRkZTRVRfV0IgIDIKKyNkZWZpbmUgSTkxNV9NTUFQX09GRlNFVF9VQyAgMwor
CisJX191NjQgZXh0ZW5zaW9uczsKK307CisKIHN0cnVjdCBkcm1faTkxNV9nZW1fc2V0X2RvbWFp
biB7CiAJLyoqIEhhbmRsZSBmb3IgdGhlIG9iamVjdCAqLwogCV9fdTMyIGhhbmRsZTsKLS0gCjIu
MjQuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50
ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

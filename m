Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 76CC2109404
	for <lists+intel-gfx@lfdr.de>; Mon, 25 Nov 2019 20:13:58 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 931C86E17D;
	Mon, 25 Nov 2019 19:13:56 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5194D6E17D;
 Mon, 25 Nov 2019 19:13:55 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 25 Nov 2019 11:13:54 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,242,1571727600"; d="scan'208";a="382913346"
Received: from fmsmsx104.amr.corp.intel.com ([10.18.124.202])
 by orsmga005.jf.intel.com with ESMTP; 25 Nov 2019 11:13:54 -0800
Received: from fmsmsx111.amr.corp.intel.com (10.18.116.5) by
 fmsmsx104.amr.corp.intel.com (10.18.124.202) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Mon, 25 Nov 2019 11:13:53 -0800
Received: from fmsmsx106.amr.corp.intel.com ([169.254.5.77]) by
 fmsmsx111.amr.corp.intel.com ([169.254.12.3]) with mapi id 14.03.0439.000;
 Mon, 25 Nov 2019 11:13:53 -0800
From: "Tang, CQ" <cq.tang@intel.com>
To: Chris Wilson <chris@chris-wilson.co.uk>, "intel-gfx@lists.freedesktop.org"
 <intel-gfx@lists.freedesktop.org>
Thread-Topic: [Intel-gfx] [PATCH i-g-t 5/9] i915/gem_ctx_isolation: Check
 engine relative registers
Thread-Index: AQHVmiFg1hz+X2kwukOphZHGyumq8aecUdTw
Date: Mon, 25 Nov 2019 19:13:52 +0000
Message-ID: <1D440B9B88E22A4ABEF89F9F1F81BC29E94AC18F@FMSMSX106.amr.corp.intel.com>
References: <20191113125240.3781-1-chris@chris-wilson.co.uk>
 <20191113125240.3781-5-chris@chris-wilson.co.uk>
In-Reply-To: <20191113125240.3781-5-chris@chris-wilson.co.uk>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-titus-metadata-40: eyJDYXRlZ29yeUxhYmVscyI6IiIsIk1ldGFkYXRhIjp7Im5zIjoiaHR0cDpcL1wvd3d3LnRpdHVzLmNvbVwvbnNcL0ludGVsMyIsImlkIjoiYTcwZWM2OWYtMDk3Mi00NDMyLTk2NDQtYWMyOGNhMDQzZWE2IiwicHJvcHMiOlt7Im4iOiJDVFBDbGFzc2lmaWNhdGlvbiIsInZhbHMiOlt7InZhbHVlIjoiQ1RQX05UIn1dfV19LCJTdWJqZWN0TGFiZWxzIjpbXSwiVE1DVmVyc2lvbiI6IjE3LjEwLjE4MDQuNDkiLCJUcnVzdGVkTGFiZWxIYXNoIjoiaUE4cm5cL0FnZ2cxS214bk9RbVlPaUNJUUd5dGY0MmV4WEVBT2ZUKzlHdWQxNGc5ZXNLREJlcTZWNG9Jam5LMnUifQ==
x-ctpclassification: CTP_NT
dlp-product: dlpe-windows
dlp-version: 11.2.0.6
dlp-reaction: no-action
x-originating-ip: [10.1.200.107]
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH i-g-t 5/9] i915/gem_ctx_isolation: Check
 engine relative registers
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "igt-dev@lists.freedesktop.org" <igt-dev@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Q2hyaXMsDQogICAgSSBhcHBsaWVkIHlvdXIgcGF0Y2hlcyBhbmQgdGVzdGVkIG9uIERHMSBoYXJk
d2FyZS4gIFRoaXMgbmV3IGNvZGUgd29ya3Mgd2VsbCwgZXhjZXB0IHRoZXJlIGFyZSBzdGlsbCB0
d28gaXNzdWVzIHRvIHRoaXMgdGVzdCAgKGdlbV9jdHhfaXNsb2F0aW9uLmMpDQoNCjEuIHRoZSB0
ZXN0IGxvb3BzIG92ZXIgYWxsIHBvc3NpYmxlIGVuZ2luZXMgKC4uLi4uLmNjczAsIGNjczEsIGNj
czIsLi4uLikuIHRoZSBsZWdhY3kgaW50ZXJmYWNlIGlzIHVzZWQgdG8gY2hlY2sgaWYgYW4gZW5n
aW5lIGlzIHN1cHBvcnRlZDoNCiAgICAgICAgICBnZW1fcmVxdWlyZV9yaW5nKGZkLCBlLT5mbGFn
cyk7DQoNCmZvciB1bnN1cHBvcnRlZCBlbmdpbmVzLCB0aGUgZm9sbG93aW5nIG1lc3NhZ2UgaXMg
cHJpbnRlZCBieSBJR1QgdGVzdCBzeXN0ZW06DQpUZXN0IHJlcXVpcmVtZW50IG5vdCBtZXQgaW4g
ZnVuY3Rpb24gZ2VtX3JlcXVpcmVfcmluZywgZmlsZSAuLi9saWIvaW9jdGxfd3JhcHBlcnMuYzox
Mjg4Og0KVGVzdCByZXF1aXJlbWVudDogZ2VtX2hhc19yaW5nKGZkLCByaW5nKQ0KDQpJIHRoaW5r
IHRoaXMgaXMgYSBtaW5vciBpc3N1ZSwgZW5oYW5jZW1lbnQgaXMgZXhwZWN0ZWQgdG8gdGhlIElH
VCB0ZXN0IGNvZGUgdG8gaGFuZGxlIGl0Lg0KDQoyLiBhbGwgdGhlIHh4eC1ub25wcml2LXN3aXRj
aCBzdWJ0ZXN0IGZhaWxzICh3aGVyZSB4eHggaXMgdGhlIHN1cHBvcnRlZCBlbmdpbmUpLCBmb3Ig
cmNzMCBleGFtcGxlOg0KDQpTdGFydGluZyBzdWJ0ZXN0OiByY3MwLW5vbnByaXYtc3dpdGNoDQoo
Z2VtX2N0eF9pc29sYXRpb246MTY0NjMpIGlndF9hdXgtQ1JJVElDQUw6IFRlc3QgYXNzZXJ0aW9u
IGZhaWx1cmUgZnVuY3Rpb24gc2lnX2Fib3J0LCBmaWxlIC4uL2xpYi9pZ3RfYXV4LmM6NTAyOg0K
KGdlbV9jdHhfaXNvbGF0aW9uOjE2NDYzKSBpZ3RfYXV4LUNSSVRJQ0FMOiBGYWlsZWQgYXNzZXJ0
aW9uOiAhIkdQVSBodW5nIg0KU3RhY2sgdHJhY2U6DQogICMwIC4uL2xpYi9pZ3RfY29yZS5jOjE4
NTAgX19pZ3RfZmFpbF9hc3NlcnQoKQ0KICAjMSAuLi9saWIvaWd0X2F1eC5jOjUwNiBpZ3RfZm9y
a19oYW5nX2RldGVjdG9yKCkNCiAgIzIgW2tpbGxwZysweDQwXQ0KICAjMyBbaW9jdGwrMHhiXQ0K
ICAjNCBbZHJtSW9jdGwrMHgzMF0NCiAgIzUgLi4vbGliL2k5MTUvZ2VtX2NvbnRleHQuYzoxMTkg
X19nZW1fY29udGV4dF9kZXN0cm95KCkNCiAgIzYgLi4vbGliL2k5MTUvZ2VtX2NvbnRleHQuYzox
MzcgZ2VtX2NvbnRleHRfZGVzdHJveSgpDQogICM3IC4uL3Rlc3RzL2k5MTUvZ2VtX2N0eF9pc29s
YXRpb24uYzo2NjYgbm9ucHJpdigpDQogICM4IC4uL3Rlc3RzL2k5MTUvZ2VtX2N0eF9pc29sYXRp
b24uYzo5NDcgX19yZWFsX21haW44OTMoKQ0KICAjOSAuLi90ZXN0cy9pOTE1L2dlbV9jdHhfaXNv
bGF0aW9uLmM6ODkzIG1haW4oKQ0KICAjMTAgW19fbGliY19zdGFydF9tYWluKzB4ZjNdDQoNCkkg
c3BlbnQgcXVpdGUgYSB3aGlsZSB0byBzdHVkeSB0aGUgc291cmNlIGNvZGUsIGJ1dCBJIHN0aWxs
IGRvbid0IHVuZGVyc3RhbmQgd2hhdCB0aGlzIHN1YnRlc3QgaXMgZG9pbmcuICBJZiB5b3Uga25v
dywgY2FuIHlvdSBleHBsYWluIHNvbWU/DQoNCi0tQ1ENCg0KDQo+IC0tLS0tT3JpZ2luYWwgTWVz
c2FnZS0tLS0tDQo+IEZyb206IEludGVsLWdmeCA8aW50ZWwtZ2Z4LWJvdW5jZXNAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnPiBPbiBCZWhhbGYgT2YNCj4gQ2hyaXMgV2lsc29uDQo+IFNlbnQ6IFdlZG5l
c2RheSwgTm92ZW1iZXIgMTMsIDIwMTkgNDo1MyBBTQ0KPiBUbzogaW50ZWwtZ2Z4QGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZw0KPiBDYzogaWd0LWRldkBsaXN0cy5mcmVlZGVza3RvcC5vcmcNCj4gU3Vi
amVjdDogW0ludGVsLWdmeF0gW1BBVENIIGktZy10IDUvOV0gaTkxNS9nZW1fY3R4X2lzb2xhdGlv
bjogQ2hlY2sgZW5naW5lDQo+IHJlbGF0aXZlIHJlZ2lzdGVycw0KPiANCj4gU29tZSBvZiB0aGUg
bm9uLXByaXZpbGVnZWQgcmVnaXN0ZXJzIGFyZSBhdCB0aGUgc2FtZSBvZmZzZXQgb24gZWFjaCBl
bmdpbmUuDQo+IFdlIGNhbiBpbXByb3ZlIG91ciBjb3ZlcmFnZSBmb3IgdW5rbm93biBIVyBsYXlv
dXQgYnkgdXNpbmcgdGhlIHJlcG9ydGVkDQo+IGVuZ2luZS0+bW1pb19iYXNlIGZvciByZWxhdGl2
ZSBvZmZzZXRzLg0KPiANCj4gU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJp
cy13aWxzb24uY28udWs+DQo+IC0tLQ0KPiAgdGVzdHMvaTkxNS9nZW1fY3R4X2lzb2xhdGlvbi5j
IHwgMTY0ICsrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLQ0KPiAgMSBmaWxlIGNoYW5n
ZWQsIDEwMCBpbnNlcnRpb25zKCspLCA2NCBkZWxldGlvbnMoLSkNCj4gDQo+IGRpZmYgLS1naXQg
YS90ZXN0cy9pOTE1L2dlbV9jdHhfaXNvbGF0aW9uLmMgYi90ZXN0cy9pOTE1L2dlbV9jdHhfaXNv
bGF0aW9uLmMNCj4gaW5kZXggNmFhMjcxMzNjLi41NDZmZmFjM2EgMTAwNjQ0DQo+IC0tLSBhL3Rl
c3RzL2k5MTUvZ2VtX2N0eF9pc29sYXRpb24uYw0KPiArKysgYi90ZXN0cy9pOTE1L2dlbV9jdHhf
aXNvbGF0aW9uLmMNCj4gQEAgLTcwLDYgKzcwLDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBuYW1l
ZF9yZWdpc3RlciB7DQo+ICAJdWludDMyX3QgaWdub3JlX2JpdHM7DQo+ICAJdWludDMyX3Qgd3Jp
dGVfbWFzazsgLyogc29tZSByZWdpc3RlcnMgYml0cyBkbyBub3QgZXhpc3QgKi8NCj4gIAlib29s
IG1hc2tlZDsNCj4gKwlib29sIHJlbGF0aXZlOw0KPiAgfSBub25wcml2X3JlZ2lzdGVyc1tdID0g
ew0KPiAgCXsgIk5PUElEIiwgTk9DVFgsIFJDUzAsIDB4MjA5NCB9LA0KPiAgCXsgIk1JX1BSRURJ
Q0FURV9SRVNVTFRfMiIsIE5PQ1RYLCBSQ1MwLCAweDIzYmMgfSwgQEAgLTEwOSw3DQo+ICsxMTAs
NiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IG5hbWVkX3JlZ2lzdGVyIHsNCj4gIAl7ICJQU19ERVBU
SF9DT1VOVF8xIiwgR0VOOCwgUkNTMCwgMHgyMmY4LCAyIH0sDQo+ICAJeyAiQkJfT0ZGU0VUIiwg
R0VOOCwgUkNTMCwgMHgyMTU4LCAuaWdub3JlX2JpdHMgPSAweDcgfSwNCj4gIAl7ICJNSV9QUkVE
SUNBVEVfUkVTVUxUXzEiLCBHRU44LCBSQ1MwLCAweDI0MWMgfSwNCj4gLQl7ICJDU19HUFIiLCBH
RU44LCBSQ1MwLCAweDI2MDAsIDMyIH0sDQo+ICAJeyAiT0FfQ1RYX0NPTlRST0wiLCBHRU44LCBS
Q1MwLCAweDIzNjAgfSwNCj4gIAl7ICJPQUNUWElEIiwgR0VOOCwgUkNTMCwgMHgyMzY0IH0sDQo+
ICAJeyAiUFNfSU5WT0NBVElPTl9DT1VOVF8yIiwgR0VOOCwgUkNTMCwgMHgyNDQ4LCAyLCAud3Jp
dGVfbWFzaw0KPiA9IH4weDMgfSwgQEAgLTEzOCw3OSArMTM4LDU2IEBAIHN0YXRpYyBjb25zdCBz
dHJ1Y3QgbmFtZWRfcmVnaXN0ZXIgew0KPiANCj4gIAl7ICJDVFhfUFJFRU1QVCIsIE5PQ1RYIC8q
IEdFTjEwICovLCBSQ1MwLCAweDIyNDggfSwNCj4gIAl7ICJDU19DSElDS0VOMSIsIEdFTjExLCBS
Q1MwLCAweDI1ODAsIC5tYXNrZWQgPSB0cnVlIH0sDQo+IC0JeyAiSERDX0NISUNLRU4xIiwgR0VO
X1JBTkdFKDEwLCAxMCksIFJDUzAsIDB4NzMwNCwgLm1hc2tlZCA9DQo+IHRydWUgfSwNCj4gDQo+
ICAJLyogUHJpdmlsZWdlZCAoZW5hYmxlZCBieSB3L2EgKyBGT1JDRV9UT19OT05QUklWKSAqLw0K
PiAgCXsgIkNUWF9QUkVFTVBUIiwgTk9DVFggLyogR0VOOSAqLywgUkNTMCwgMHgyMjQ4IH0sDQo+
ICAJeyAiQ1NfQ0hJQ0tFTjEiLCBHRU5fUkFOR0UoOSwgMTApLCBSQ1MwLCAweDI1ODAsIC5tYXNr
ZWQgPSB0cnVlIH0sDQo+ICAJeyAiQ09NTU9OX1NMSUNFX0NISUNLRU4yIiwgR0VOX1JBTkdFKDks
IDkpLCBSQ1MwLA0KPiAweDcwMTQsIC5tYXNrZWQgPSB0cnVlIH0sDQo+IC0JeyAiSERDX0NISUNL
RU4xIiwgR0VOX1JBTkdFKDksIDkpLCBSQ1MwLCAweDczMDQsIC5tYXNrZWQgPQ0KPiB0cnVlIH0s
DQo+ICsJeyAiSERDX0NISUNLRU4xIiwgR0VOX1JBTkdFKDksIDEwKSwgUkNTMCwgMHg3MzA0LCAu
bWFza2VkID0NCj4gdHJ1ZSB9LA0KPiAgCXsgIlNMSUNFX0NPTU1PTl9FQ09fQ0hJQ0tFTjEiLCBH
RU5fUkFOR0UoMTEsIDExKSAvKiArIGdsayAqLywNCj4gUkNTMCwgIDB4NzMxYywgLm1hc2tlZCA9
IHRydWUgfSwNCj4gIAl7ICJMM1NRUkVHNCIsIE5PQ1RYIC8qIEdFTjk6c2tsLGtibCAqLywgUkNT
MCwgMHhiMTE4LCAud3JpdGVfbWFzaw0KPiA9IH4weDFmZmZmMCB9LA0KPiAgCXsgIkhBTEZfU0xJ
Q0VfQ0hJQ0tFTjciLCBHRU5fUkFOR0UoMTEsIDExKSwgUkNTMCwNCj4gMHhlMTk0LCAubWFza2Vk
ID0gdHJ1ZSB9LA0KPiAgCXsgIlNBTVBMRVJfTU9ERSIsIEdFTl9SQU5HRSgxMSwgMTEpLCBSQ1Mw
LCAweGUxOGMsIC5tYXNrZWQgPQ0KPiB0cnVlIH0sDQo+IA0KPiAtCXsgIkJDU19HUFIiLCBHRU45
LCBCQ1MwLCAweDIyNjAwLCAzMiB9LA0KPiAgCXsgIkJDU19TV0NUUkwiLCBHRU44LCBCQ1MwLCAw
eDIyMjAwLCAud3JpdGVfbWFzayA9IDB4MywgLm1hc2tlZCA9DQo+IHRydWUgfSwNCj4gDQo+ICAJ
eyAiTUZDX1ZEQk9YMSIsIE5PQ1RYLCBWQ1MwLCAweDEyODAwLCA2NCB9LA0KPiAgCXsgIk1GQ19W
REJPWDIiLCBOT0NUWCwgVkNTMSwgMHgxYzgwMCwgNjQgfSwNCj4gDQo+IC0JeyAiVkNTMF9HUFIi
LCBHRU5fUkFOR0UoOSwgMTApLCBWQ1MwLCAweDEyNjAwLCAzMiB9LA0KPiAtCXsgIlZDUzFfR1BS
IiwgR0VOX1JBTkdFKDksIDEwKSwgVkNTMSwgMHgxYzYwMCwgMzIgfSwNCj4gLQl7ICJWRUNTX0dQ
UiIsIEdFTl9SQU5HRSg5LCAxMCksIFZFQ1MwLCAweDFhNjAwLCAzMiB9LA0KPiAtDQo+IC0JeyAi
VkNTMF9HUFIiLCBHRU4xMSwgVkNTMCwgMHgxYzA2MDAsIDMyIH0sDQo+IC0JeyAiVkNTMV9HUFIi
LCBHRU4xMSwgVkNTMSwgMHgxYzQ2MDAsIDMyIH0sDQo+IC0JeyAiVkNTMl9HUFIiLCBHRU4xMSwg
VkNTMiwgMHgxZDA2MDAsIDMyIH0sDQo+IC0JeyAiVkNTM19HUFIiLCBHRU4xMSwgVkNTMywgMHgx
ZDQ2MDAsIDMyIH0sDQo+IC0JeyAiVkVDU19HUFIiLCBHRU4xMSwgVkVDUzAsIDB4MWM4NjAwLCAz
MiB9LA0KPiArCXsgInhDU19HUFIiLCBHRU45LCBBTEwsIDB4NjAwLCAzMiwgLnJlbGF0aXZlID0g
dHJ1ZSB9LA0KPiANCj4gIAl7fQ0KPiAgfSwgaWdub3JlX3JlZ2lzdGVyc1tdID0gew0KPiAgCXsg
IlJDUyB0aW1lc3RhbXAiLCBHRU42LCB+MHUsIDB4MjM1OCB9LA0KPiAgCXsgIkJDUyB0aW1lc3Rh
bXAiLCBHRU43LCB+MHUsIDB4MjIzNTggfSwNCj4gDQo+IC0JeyAiVkNTMCB0aW1lc3RhbXAiLCBH
RU5fUkFOR0UoNywgMTApLCB+MHUsIDB4MTIzNTggfSwNCj4gLQl7ICJWQ1MxIHRpbWVzdGFtcCIs
IEdFTl9SQU5HRSg3LCAxMCksIH4wdSwgMHgxYzM1OCB9LA0KPiAtCXsgIlZFQ1MgdGltZXN0YW1w
IiwgR0VOX1JBTkdFKDgsIDEwKSwgfjB1LCAweDFhMzU4IH0sDQo+IC0NCj4gLQl7ICJWQ1MwIHRp
bWVzdGFtcCIsIEdFTjExLCB+MHUsIDB4MWMwMzU4IH0sDQo+IC0JeyAiVkNTMSB0aW1lc3RhbXAi
LCBHRU4xMSwgfjB1LCAweDFjNDM1OCB9LA0KPiAtCXsgIlZDUzIgdGltZXN0YW1wIiwgR0VOMTEs
IH4wdSwgMHgxZDAzNTggfSwNCj4gLQl7ICJWQ1MzIHRpbWVzdGFtcCIsIEdFTjExLCB+MHUsIDB4
MWQ0MzU4IH0sDQo+IC0JeyAiVkVDUyB0aW1lc3RhbXAiLCBHRU4xMSwgfjB1LCAweDFjODM1OCB9
LA0KPiArCXsgInhDUyB0aW1lc3RhbXAiLCBHRU44LCBBTEwsIDB4MzU4LCAucmVsYXRpdmUgPSB0
cnVlIH0sDQo+IA0KPiAgCS8qIGh1YyByZWFkIG9ubHkgKi8NCj4gLQl7ICJCU0QwIDB4MjAwMCIs
IEdFTjExLCB+MHUsIDB4MWMwMDAwICsgMHgyMDAwIH0sDQo+IC0JeyAiQlNEMCAweDIwMDAiLCBH
RU4xMSwgfjB1LCAweDFjMDAwMCArIDB4MjAxNCB9LA0KPiAtCXsgIkJTRDAgMHgyMDAwIiwgR0VO
MTEsIH4wdSwgMHgxYzAwMDAgKyAweDIzYjAgfSwNCj4gLQ0KPiAtCXsgIkJTRDEgMHgyMDAwIiwg
R0VOMTEsIH4wdSwgMHgxYzQwMDAgKyAweDIwMDAgfSwNCj4gLQl7ICJCU0QxIDB4MjAwMCIsIEdF
TjExLCB+MHUsIDB4MWM0MDAwICsgMHgyMDE0IH0sDQo+IC0JeyAiQlNEMSAweDIwMDAiLCBHRU4x
MSwgfjB1LCAweDFjNDAwMCArIDB4MjNiMCB9LA0KPiAtDQo+IC0JeyAiQlNEMiAweDIwMDAiLCBH
RU4xMSwgfjB1LCAweDFkMDAwMCArIDB4MjAwMCB9LA0KPiAtCXsgIkJTRDIgMHgyMDAwIiwgR0VO
MTEsIH4wdSwgMHgxZDAwMDAgKyAweDIwMTQgfSwNCj4gLQl7ICJCU0QyIDB4MjAwMCIsIEdFTjEx
LCB+MHUsIDB4MWQwMDAwICsgMHgyM2IwIH0sDQo+IC0NCj4gLQl7ICJCU0QzIDB4MjAwMCIsIEdF
TjExLCB+MHUsIDB4MWQ0MDAwICsgMHgyMDAwIH0sDQo+IC0JeyAiQlNEMyAweDIwMDAiLCBHRU4x
MSwgfjB1LCAweDFkNDAwMCArIDB4MjAxNCB9LA0KPiAtCXsgIkJTRDMgMHgyMDAwIiwgR0VOMTEs
IH4wdSwgMHgxZDQwMDAgKyAweDIzYjAgfSwNCj4gKwl7ICJCU0QgMHgyMDAwIiwgR0VOMTEsIEFM
TCwgMHgyMDAwLCAucmVsYXRpdmUgPSB0cnVlIH0sDQo+ICsJeyAiQlNEIDB4MjAxNCIsIEdFTjEx
LCBBTEwsIDB4MjAxNCwgLnJlbGF0aXZlID0gdHJ1ZSB9LA0KPiArCXsgIkJTRCAweDIzYjAiLCBH
RU4xMSwgQUxMLCAweDIzYjAsIC5yZWxhdGl2ZSA9IHRydWUgfSwNCj4gDQo+ICAJe30NCj4gIH07
DQo+IA0KPiAtc3RhdGljIGNvbnN0IGNoYXIgKnJlZ2lzdGVyX25hbWUodWludDMyX3Qgb2Zmc2V0
LCBjaGFyICpidWYsIHNpemVfdCBsZW4pDQo+ICtzdGF0aWMgY29uc3QgY2hhciAqDQo+ICtyZWdp
c3Rlcl9uYW1lKHVpbnQzMl90IG9mZnNldCwgdWludDMyX3QgbW1pb19iYXNlLCBjaGFyICpidWYs
IHNpemVfdA0KPiArbGVuKQ0KPiAgew0KPiAgCWZvciAoY29uc3Qgc3RydWN0IG5hbWVkX3JlZ2lz
dGVyICpyID0gbm9ucHJpdl9yZWdpc3RlcnM7IHItPm5hbWU7DQo+IHIrKykgew0KPiAgCQl1bnNp
Z25lZCBpbnQgd2lkdGggPSByLT5jb3VudCA/IDQqci0+Y291bnQgOiA0Ow0KPiAtCQlpZiAob2Zm
c2V0ID49IHItPm9mZnNldCAmJiBvZmZzZXQgPCByLT5vZmZzZXQgKyB3aWR0aCkgew0KPiArCQl1
aW50MzJfdCBiYXNlOw0KPiArDQo+ICsJCWJhc2UgPSByLT5vZmZzZXQ7DQo+ICsJCWlmIChyLT5y
ZWxhdGl2ZSkNCj4gKwkJCWJhc2UgKz0gbW1pb19iYXNlOw0KPiArDQo+ICsJCWlmIChvZmZzZXQg
Pj0gYmFzZSAmJiBvZmZzZXQgPCBiYXNlICsgd2lkdGgpIHsNCj4gIAkJCWlmIChyLT5jb3VudCA8
PSAxKQ0KPiAgCQkJCXJldHVybiByLT5uYW1lOw0KPiANCj4gIAkJCXNucHJpbnRmKGJ1ZiwgbGVu
LCAiJXNbJWRdIiwNCj4gLQkJCQkgci0+bmFtZSwgKG9mZnNldCAtIHItPm9mZnNldCkvNCk7DQo+
ICsJCQkJIHItPm5hbWUsIChvZmZzZXQgLSBiYXNlKSAvIDQpOw0KPiAgCQkJcmV0dXJuIGJ1ZjsN
Cj4gIAkJfQ0KPiAgCX0NCj4gQEAgLTIxOCwyMiArMTk1LDM1IEBAIHN0YXRpYyBjb25zdCBjaGFy
ICpyZWdpc3Rlcl9uYW1lKHVpbnQzMl90IG9mZnNldCwNCj4gY2hhciAqYnVmLCBzaXplX3QgbGVu
KQ0KPiAgCXJldHVybiAidW5rbm93biI7DQo+ICB9DQo+IA0KPiAtc3RhdGljIGNvbnN0IHN0cnVj
dCBuYW1lZF9yZWdpc3RlciAqbG9va3VwX3JlZ2lzdGVyKHVpbnQzMl90IG9mZnNldCkNCj4gK3N0
YXRpYyBjb25zdCBzdHJ1Y3QgbmFtZWRfcmVnaXN0ZXIgKg0KPiArbG9va3VwX3JlZ2lzdGVyKHVp
bnQzMl90IG9mZnNldCwgdWludDMyX3QgbW1pb19iYXNlKQ0KPiAgew0KPiAgCWZvciAoY29uc3Qg
c3RydWN0IG5hbWVkX3JlZ2lzdGVyICpyID0gbm9ucHJpdl9yZWdpc3RlcnM7IHItPm5hbWU7DQo+
IHIrKykgew0KPiAgCQl1bnNpZ25lZCBpbnQgd2lkdGggPSByLT5jb3VudCA/IDQqci0+Y291bnQg
OiA0Ow0KPiAtCQlpZiAob2Zmc2V0ID49IHItPm9mZnNldCAmJiBvZmZzZXQgPCByLT5vZmZzZXQg
KyB3aWR0aCkNCj4gKwkJdWludDMyX3QgYmFzZTsNCj4gKw0KPiArCQliYXNlID0gci0+b2Zmc2V0
Ow0KPiArCQlpZiAoci0+cmVsYXRpdmUpDQo+ICsJCQliYXNlICs9IG1taW9fYmFzZTsNCj4gKw0K
PiArCQlpZiAob2Zmc2V0ID49IGJhc2UgJiYgb2Zmc2V0IDwgYmFzZSArIHdpZHRoKQ0KPiAgCQkJ
cmV0dXJuIHI7DQo+ICAJfQ0KPiANCj4gIAlyZXR1cm4gTlVMTDsNCj4gIH0NCj4gDQo+IC1zdGF0
aWMgYm9vbCBpZ25vcmVfcmVnaXN0ZXIodWludDMyX3Qgb2Zmc2V0KQ0KPiArc3RhdGljIGJvb2wg
aWdub3JlX3JlZ2lzdGVyKHVpbnQzMl90IG9mZnNldCwgdWludDMyX3QgbW1pb19iYXNlKQ0KPiAg
ew0KPiAgCWZvciAoY29uc3Qgc3RydWN0IG5hbWVkX3JlZ2lzdGVyICpyID0gaWdub3JlX3JlZ2lz
dGVyczsgci0+bmFtZTsgcisrKQ0KPiB7DQo+ICAJCXVuc2lnbmVkIGludCB3aWR0aCA9IHItPmNv
dW50ID8gNCpyLT5jb3VudCA6IDQ7DQo+IC0JCWlmIChvZmZzZXQgPj0gci0+b2Zmc2V0ICYmIG9m
ZnNldCA8IHItPm9mZnNldCArIHdpZHRoKQ0KPiArCQl1aW50MzJfdCBiYXNlOw0KPiArDQo+ICsJ
CWJhc2UgPSByLT5vZmZzZXQ7DQo+ICsJCWlmIChyLT5yZWxhdGl2ZSkNCj4gKwkJCWJhc2UgKz0g
bW1pb19iYXNlOw0KPiArDQo+ICsJCWlmIChvZmZzZXQgPj0gYmFzZSAmJiBvZmZzZXQgPCBiYXNl
ICsgd2lkdGgpDQo+ICAJCQlyZXR1cm4gdHJ1ZTsNCj4gIAl9DQo+IA0KPiBAQCAtMjQ4LDYgKzIz
OCw3IEBAIHN0YXRpYyB2b2lkIHRtcGxfcmVncyhpbnQgZmQsICB7DQo+ICAJY29uc3QgdW5zaWdu
ZWQgaW50IGdlbl9iaXQgPSAxIDw8DQo+IGludGVsX2dlbihpbnRlbF9nZXRfZHJtX2RldmlkKGZk
KSk7DQo+ICAJY29uc3QgdW5zaWduZWQgaW50IGVuZ2luZV9iaXQgPSBFTkdJTkUoZS0+Y2xhc3Ms
IGUtPmluc3RhbmNlKTsNCj4gKwljb25zdCB1aW50MzJfdCBtbWlvX2Jhc2UgPSBnZW1fZW5naW5l
X21taW9fYmFzZShmZCwgZS0+bmFtZSk7DQo+ICAJdW5zaWduZWQgaW50IHJlZ3Nfc2l6ZTsNCj4g
IAl1aW50MzJfdCAqcmVnczsNCj4gDQo+IEBAIC0yNTksMTIgKzI1MCwyMCBAQCBzdGF0aWMgdm9p
ZCB0bXBsX3JlZ3MoaW50IGZkLA0KPiAgCQkgICAgICAgSTkxNV9HRU1fRE9NQUlOX0NQVSwgSTkx
NV9HRU1fRE9NQUlOX0NQVSk7DQo+IA0KPiAgCWZvciAoY29uc3Qgc3RydWN0IG5hbWVkX3JlZ2lz
dGVyICpyID0gbm9ucHJpdl9yZWdpc3RlcnM7IHItPm5hbWU7DQo+IHIrKykgew0KPiArCQl1aW50
MzJfdCBvZmZzZXQ7DQo+ICsNCj4gIAkJaWYgKCEoci0+ZW5naW5lX21hc2sgJiBlbmdpbmVfYml0
KSkNCj4gIAkJCWNvbnRpbnVlOw0KPiAgCQlpZiAoIShyLT5nZW5fbWFzayAmIGdlbl9iaXQpKQ0K
PiAgCQkJY29udGludWU7DQo+IC0JCWZvciAodW5zaWduZWQgY291bnQgPSByLT5jb3VudCA/OiAx
LCBvZmZzZXQgPSByLT5vZmZzZXQ7DQo+IC0JCSAgICAgY291bnQtLTsgb2Zmc2V0ICs9IDQpIHsN
Cj4gKwkJaWYgKHItPnJlbGF0aXZlICYmICFtbWlvX2Jhc2UpDQo+ICsJCQljb250aW51ZTsNCj4g
Kw0KPiArCQlvZmZzZXQgPSByLT5vZmZzZXQ7DQo+ICsJCWlmIChyLT5yZWxhdGl2ZSkNCj4gKwkJ
CW9mZnNldCArPSBtbWlvX2Jhc2U7DQo+ICsNCj4gKwkJZm9yICh1bnNpZ25lZCBjb3VudCA9IHIt
PmNvdW50ID86IDE7IGNvdW50LS07IG9mZnNldCArPSA0KSB7DQo+ICAJCQl1aW50MzJfdCB4ID0g
dmFsdWU7DQo+ICAJCQlpZiAoci0+d3JpdGVfbWFzaykNCj4gIAkJCQl4ICY9IHItPndyaXRlX21h
c2s7DQo+IEBAIC0yODQsNiArMjgzLDcgQEAgc3RhdGljIHVpbnQzMl90IHJlYWRfcmVncyhpbnQg
ZmQsDQo+ICAJY29uc3QgdW5zaWduZWQgaW50IGdlbiA9IGludGVsX2dlbihpbnRlbF9nZXRfZHJt
X2RldmlkKGZkKSk7DQo+ICAJY29uc3QgdW5zaWduZWQgaW50IGdlbl9iaXQgPSAxIDw8IGdlbjsN
Cj4gIAljb25zdCB1bnNpZ25lZCBpbnQgZW5naW5lX2JpdCA9IEVOR0lORShlLT5jbGFzcywgZS0+
aW5zdGFuY2UpOw0KPiArCWNvbnN0IHVpbnQzMl90IG1taW9fYmFzZSA9IGdlbV9lbmdpbmVfbW1p
b19iYXNlKGZkLCBlLT5uYW1lKTsNCj4gIAljb25zdCBib29sIHI2NGIgPSBnZW4gPj0gODsNCj4g
IAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNfb2JqZWN0MiBvYmpbMl07DQo+ICAJc3RydWN0IGRy
bV9pOTE1X2dlbV9yZWxvY2F0aW9uX2VudHJ5ICpyZWxvYzsgQEAgLTMxMSwxMyArMzExLDIwDQo+
IEBAIHN0YXRpYyB1aW50MzJfdCByZWFkX3JlZ3MoaW50IGZkLA0KPiANCj4gIAluID0gMDsNCj4g
IAlmb3IgKGNvbnN0IHN0cnVjdCBuYW1lZF9yZWdpc3RlciAqciA9IG5vbnByaXZfcmVnaXN0ZXJz
OyByLT5uYW1lOw0KPiByKyspIHsNCj4gKwkJdWludDMyX3Qgb2Zmc2V0Ow0KPiArDQo+ICAJCWlm
ICghKHItPmVuZ2luZV9tYXNrICYgZW5naW5lX2JpdCkpDQo+ICAJCQljb250aW51ZTsNCj4gIAkJ
aWYgKCEoci0+Z2VuX21hc2sgJiBnZW5fYml0KSkNCj4gIAkJCWNvbnRpbnVlOw0KPiArCQlpZiAo
ci0+cmVsYXRpdmUgJiYgIW1taW9fYmFzZSkNCj4gKwkJCWNvbnRpbnVlOw0KPiArDQo+ICsJCW9m
ZnNldCA9IHItPm9mZnNldDsNCj4gKwkJaWYgKHItPnJlbGF0aXZlKQ0KPiArCQkJb2Zmc2V0ICs9
IG1taW9fYmFzZTsNCj4gDQo+IC0JCWZvciAodW5zaWduZWQgY291bnQgPSByLT5jb3VudCA/OiAx
LCBvZmZzZXQgPSByLT5vZmZzZXQ7DQo+IC0JCSAgICAgY291bnQtLTsgb2Zmc2V0ICs9IDQpIHsN
Cj4gKwkJZm9yICh1bnNpZ25lZCBjb3VudCA9IHItPmNvdW50ID86IDE7IGNvdW50LS07IG9mZnNl
dCArPSA0KSB7DQo+ICAJCQkqYisrID0gMHgyNCA8PCAyMyB8ICgxICsgcjY0Yik7IC8qIFNSTSAq
Lw0KPiAgCQkJKmIrKyA9IG9mZnNldDsNCj4gIAkJCXJlbG9jW25dLnRhcmdldF9oYW5kbGUgPSBv
YmpbMF0uaGFuZGxlOyBAQCAtMzU3LDYNCj4gKzM2NCw3IEBAIHN0YXRpYyB2b2lkIHdyaXRlX3Jl
Z3MoaW50IGZkLCAgew0KPiAgCWNvbnN0IHVuc2lnbmVkIGludCBnZW5fYml0ID0gMSA8PA0KPiBp
bnRlbF9nZW4oaW50ZWxfZ2V0X2RybV9kZXZpZChmZCkpOw0KPiAgCWNvbnN0IHVuc2lnbmVkIGlu
dCBlbmdpbmVfYml0ID0gRU5HSU5FKGUtPmNsYXNzLCBlLT5pbnN0YW5jZSk7DQo+ICsJY29uc3Qg
dWludDMyX3QgbW1pb19iYXNlID0gZ2VtX2VuZ2luZV9tbWlvX2Jhc2UoZmQsIGUtPm5hbWUpOw0K
PiAgCXN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19vYmplY3QyIG9iajsNCj4gIAlzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX2V4ZWNidWZmZXIyIGV4ZWNidWY7DQo+ICAJdW5zaWduZWQgaW50IGJhdGNoX3Np
emU7DQo+IEBAIC0zNzIsMTIgKzM4MCwyMCBAQCBzdGF0aWMgdm9pZCB3cml0ZV9yZWdzKGludCBm
ZCwNCj4gIAlnZW1fc2V0X2RvbWFpbihmZCwgb2JqLmhhbmRsZSwNCj4gIAkJICAgICAgIEk5MTVf
R0VNX0RPTUFJTl9DUFUsIEk5MTVfR0VNX0RPTUFJTl9DUFUpOw0KPiAgCWZvciAoY29uc3Qgc3Ry
dWN0IG5hbWVkX3JlZ2lzdGVyICpyID0gbm9ucHJpdl9yZWdpc3RlcnM7IHItPm5hbWU7DQo+IHIr
Kykgew0KPiArCQl1aW50MzJfdCBvZmZzZXQ7DQo+ICsNCj4gIAkJaWYgKCEoci0+ZW5naW5lX21h
c2sgJiBlbmdpbmVfYml0KSkNCj4gIAkJCWNvbnRpbnVlOw0KPiAgCQlpZiAoIShyLT5nZW5fbWFz
ayAmIGdlbl9iaXQpKQ0KPiAgCQkJY29udGludWU7DQo+IC0JCWZvciAodW5zaWduZWQgY291bnQg
PSByLT5jb3VudCA/OiAxLCBvZmZzZXQgPSByLT5vZmZzZXQ7DQo+IC0JCSAgICAgY291bnQtLTsg
b2Zmc2V0ICs9IDQpIHsNCj4gKwkJaWYgKHItPnJlbGF0aXZlICYmICFtbWlvX2Jhc2UpDQo+ICsJ
CQljb250aW51ZTsNCj4gKw0KPiArCQlvZmZzZXQgPSByLT5vZmZzZXQ7DQo+ICsJCWlmIChyLT5y
ZWxhdGl2ZSkNCj4gKwkJCW9mZnNldCArPSBtbWlvX2Jhc2U7DQo+ICsNCj4gKwkJZm9yICh1bnNp
Z25lZCBjb3VudCA9IHItPmNvdW50ID86IDE7IGNvdW50LS07IG9mZnNldCArPSA0KSB7DQo+ICAJ
CQl1aW50MzJfdCB4ID0gdmFsdWU7DQo+ICAJCQlpZiAoci0+d3JpdGVfbWFzaykNCj4gIAkJCQl4
ICY9IHItPndyaXRlX21hc2s7DQo+IEBAIC00MTAsNiArNDI2LDcgQEAgc3RhdGljIHZvaWQgcmVz
dG9yZV9yZWdzKGludCBmZCwNCj4gIAljb25zdCB1bnNpZ25lZCBpbnQgZ2VuID0gaW50ZWxfZ2Vu
KGludGVsX2dldF9kcm1fZGV2aWQoZmQpKTsNCj4gIAljb25zdCB1bnNpZ25lZCBpbnQgZ2VuX2Jp
dCA9IDEgPDwgZ2VuOw0KPiAgCWNvbnN0IHVuc2lnbmVkIGludCBlbmdpbmVfYml0ID0gRU5HSU5F
KGUtPmNsYXNzLCBlLT5pbnN0YW5jZSk7DQo+ICsJY29uc3QgdWludDMyX3QgbW1pb19iYXNlID0g
Z2VtX2VuZ2luZV9tbWlvX2Jhc2UoZmQsIGUtPm5hbWUpOw0KPiAgCWNvbnN0IGJvb2wgcjY0YiA9
IGdlbiA+PSA4Ow0KPiAgCXN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19vYmplY3QyIG9ialsyXTsN
Cj4gIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyIGV4ZWNidWY7IEBAIC00MzcsMTMg
KzQ1NCwyMA0KPiBAQCBzdGF0aWMgdm9pZCByZXN0b3JlX3JlZ3MoaW50IGZkLA0KPiANCj4gIAlu
ID0gMDsNCj4gIAlmb3IgKGNvbnN0IHN0cnVjdCBuYW1lZF9yZWdpc3RlciAqciA9IG5vbnByaXZf
cmVnaXN0ZXJzOyByLT5uYW1lOw0KPiByKyspIHsNCj4gKwkJdWludDMyX3Qgb2Zmc2V0Ow0KPiAr
DQo+ICAJCWlmICghKHItPmVuZ2luZV9tYXNrICYgZW5naW5lX2JpdCkpDQo+ICAJCQljb250aW51
ZTsNCj4gIAkJaWYgKCEoci0+Z2VuX21hc2sgJiBnZW5fYml0KSkNCj4gIAkJCWNvbnRpbnVlOw0K
PiArCQlpZiAoci0+cmVsYXRpdmUgJiYgIW1taW9fYmFzZSkNCj4gKwkJCWNvbnRpbnVlOw0KPiAr
DQo+ICsJCW9mZnNldCA9IHItPm9mZnNldDsNCj4gKwkJaWYgKHItPnJlbGF0aXZlKQ0KPiArCQkJ
b2Zmc2V0ICs9IG1taW9fYmFzZTsNCj4gDQo+IC0JCWZvciAodW5zaWduZWQgY291bnQgPSByLT5j
b3VudCA/OiAxLCBvZmZzZXQgPSByLT5vZmZzZXQ7DQo+IC0JCSAgICAgY291bnQtLTsgb2Zmc2V0
ICs9IDQpIHsNCj4gKwkJZm9yICh1bnNpZ25lZCBjb3VudCA9IHItPmNvdW50ID86IDE7IGNvdW50
LS07IG9mZnNldCArPSA0KSB7DQo+ICAJCQkqYisrID0gMHgyOSA8PCAyMyB8ICgxICsgcjY0Yik7
IC8qIExSTSAqLw0KPiAgCQkJKmIrKyA9IG9mZnNldDsNCj4gIAkJCXJlbG9jW25dLnRhcmdldF9o
YW5kbGUgPSBvYmpbMF0uaGFuZGxlOyBAQCAtNDc5LDYNCj4gKzUwMyw3IEBAIHN0YXRpYyB2b2lk
IGR1bXBfcmVncyhpbnQgZmQsDQo+ICAJY29uc3QgaW50IGdlbiA9IGludGVsX2dlbihpbnRlbF9n
ZXRfZHJtX2RldmlkKGZkKSk7DQo+ICAJY29uc3QgdW5zaWduZWQgaW50IGdlbl9iaXQgPSAxIDw8
IGdlbjsNCj4gIAljb25zdCB1bnNpZ25lZCBpbnQgZW5naW5lX2JpdCA9IEVOR0lORShlLT5jbGFz
cywgZS0+aW5zdGFuY2UpOw0KPiArCWNvbnN0IHVpbnQzMl90IG1taW9fYmFzZSA9IGdlbV9lbmdp
bmVfbW1pb19iYXNlKGZkLCBlLT5uYW1lKTsNCj4gIAl1bnNpZ25lZCBpbnQgcmVnc19zaXplOw0K
PiAgCXVpbnQzMl90ICpvdXQ7DQo+IA0KPiBAQCAtNDg5LDI2ICs1MTQsMzYgQEAgc3RhdGljIHZv
aWQgZHVtcF9yZWdzKGludCBmZCwNCj4gIAlnZW1fc2V0X2RvbWFpbihmZCwgcmVncywgSTkxNV9H
RU1fRE9NQUlOX0NQVSwgMCk7DQo+IA0KPiAgCWZvciAoY29uc3Qgc3RydWN0IG5hbWVkX3JlZ2lz
dGVyICpyID0gbm9ucHJpdl9yZWdpc3RlcnM7IHItPm5hbWU7DQo+IHIrKykgew0KPiArCQl1aW50
MzJfdCBvZmZzZXQ7DQo+ICsNCj4gIAkJaWYgKCEoci0+ZW5naW5lX21hc2sgJiBlbmdpbmVfYml0
KSkNCj4gIAkJCWNvbnRpbnVlOw0KPiAgCQlpZiAoIShyLT5nZW5fbWFzayAmIGdlbl9iaXQpKQ0K
PiAgCQkJY29udGludWU7DQo+ICsJCWlmIChyLT5yZWxhdGl2ZSAmJiAhbW1pb19iYXNlKQ0KPiAr
CQkJY29udGludWU7DQo+ICsNCj4gKwkJb2Zmc2V0ID0gci0+b2Zmc2V0Ow0KPiArCQlpZiAoci0+
cmVsYXRpdmUpDQo+ICsJCQlvZmZzZXQgKz0gbW1pb19iYXNlOw0KPiANCj4gIAkJaWYgKHItPmNv
dW50IDw9IDEpIHsNCj4gIAkJCWlndF9kZWJ1ZygiMHglMDR4ICglcyk6IDB4JTA4eFxuIiwNCj4g
LQkJCQkgIHItPm9mZnNldCwgci0+bmFtZSwgb3V0W3ItPm9mZnNldC80XSk7DQo+ICsJCQkJICBv
ZmZzZXQsIHItPm5hbWUsIG91dFtvZmZzZXQgLyA0XSk7DQo+ICAJCX0gZWxzZSB7DQo+ICAJCQlm
b3IgKHVuc2lnbmVkIHggPSAwOyB4IDwgci0+Y291bnQ7IHgrKykNCj4gIAkJCQlpZ3RfZGVidWco
IjB4JTA0eCAoJXNbJWRdKTogMHglMDh4XG4iLA0KPiAtCQkJCQkgIHItPm9mZnNldCs0KngsIHIt
Pm5hbWUsIHgsDQo+IC0JCQkJCSAgb3V0W3ItPm9mZnNldC80ICsgeF0pOw0KPiArCQkJCQkgIG9m
ZnNldCArIDQgKiB4LCByLT5uYW1lLCB4LA0KPiArCQkJCQkgIG91dFtvZmZzZXQgLyA0ICsgeF0p
Ow0KPiAgCQl9DQo+ICAJfQ0KPiAgCW11bm1hcChvdXQsIHJlZ3Nfc2l6ZSk7DQo+ICB9DQo+IA0K
PiAtc3RhdGljIHZvaWQgY29tcGFyZV9yZWdzKGludCBmZCwgdWludDMyX3QgQSwgdWludDMyX3Qg
QiwgY29uc3QgY2hhciAqd2hvKQ0KPiArc3RhdGljIHZvaWQgY29tcGFyZV9yZWdzKGludCBmZCwg
Y29uc3Qgc3RydWN0IGludGVsX2V4ZWN1dGlvbl9lbmdpbmUyICplLA0KPiArCQkJIHVpbnQzMl90
IEEsIHVpbnQzMl90IEIsIGNvbnN0IGNoYXIgKndobykNCj4gIHsNCj4gKwljb25zdCB1aW50MzJf
dCBtbWlvX2Jhc2UgPSBnZW1fZW5naW5lX21taW9fYmFzZShmZCwgZS0+bmFtZSk7DQo+ICAJdW5z
aWduZWQgaW50IG51bV9lcnJvcnM7DQo+ICAJdW5zaWduZWQgaW50IHJlZ3Nfc2l6ZTsNCj4gIAl1
aW50MzJfdCAqYSwgKmI7DQo+IEBAIC01MzIsMTEgKzU2NywxMSBAQCBzdGF0aWMgdm9pZCBjb21w
YXJlX3JlZ3MoaW50IGZkLCB1aW50MzJfdCBBLA0KPiB1aW50MzJfdCBCLCBjb25zdCBjaGFyICp3
aG8pDQo+ICAJCWlmIChhW25dID09IGJbbl0pDQo+ICAJCQljb250aW51ZTsNCj4gDQo+IC0JCWlm
IChpZ25vcmVfcmVnaXN0ZXIob2Zmc2V0KSkNCj4gKwkJaWYgKGlnbm9yZV9yZWdpc3RlcihvZmZz
ZXQsIG1taW9fYmFzZSkpDQo+ICAJCQljb250aW51ZTsNCj4gDQo+ICAJCW1hc2sgPSB+MHU7DQo+
IC0JCXIgPSBsb29rdXBfcmVnaXN0ZXIob2Zmc2V0KTsNCj4gKwkJciA9IGxvb2t1cF9yZWdpc3Rl
cihvZmZzZXQsIG1taW9fYmFzZSk7DQo+ICAJCWlmIChyICYmIHItPm1hc2tlZCkNCj4gIAkJCW1h
c2sgPj49IDE2Ow0KPiAgCQlpZiAociAmJiByLT5pZ25vcmVfYml0cykNCj4gQEAgLTU0Nyw3ICs1
ODIsNyBAQCBzdGF0aWMgdm9pZCBjb21wYXJlX3JlZ3MoaW50IGZkLCB1aW50MzJfdCBBLCB1aW50
MzJfdCBCLA0KPiBjb25zdCBjaGFyICp3aG8pDQo+IA0KPiAgCQlpZ3Rfd2FybigiUmVnaXN0ZXIg
MHglMDR4ICglcyk6IEE9JTA4eCBCPSUwOHhcbiIsDQo+ICAJCQkgb2Zmc2V0LA0KPiAtCQkJIHJl
Z2lzdGVyX25hbWUob2Zmc2V0LCBidWYsIHNpemVvZihidWYpKSwNCj4gKwkJCSByZWdpc3Rlcl9u
YW1lKG9mZnNldCwgbW1pb19iYXNlLCBidWYsIHNpemVvZihidWYpKSwNCj4gIAkJCSBhW25dICYg
bWFzaywgYltuXSAmIG1hc2spOw0KPiAgCQludW1fZXJyb3JzKys7DQo+ICAJfQ0KPiBAQCAtNjM4
LDcgKzY3Myw3IEBAIHN0YXRpYyB2b2lkIG5vbnByaXYoaW50IGZkLA0KPiANCj4gIAkJaWd0X3Nw
aW5fZnJlZShmZCwgc3Bpbik7DQo+IA0KPiAtCQljb21wYXJlX3JlZ3MoZmQsIHRtcGwsIHJlZ3Nb
MV0sICJub25wcml2IHJlYWQvd3JpdGVzIik7DQo+ICsJCWNvbXBhcmVfcmVncyhmZCwgZSwgdG1w
bCwgcmVnc1sxXSwgIm5vbnByaXYgcmVhZC93cml0ZXMiKTsNCj4gDQo+ICAJCWZvciAoaW50IG4g
PSAwOyBuIDwgQVJSQVlfU0laRShyZWdzKTsgbisrKQ0KPiAgCQkJZ2VtX2Nsb3NlKGZkLCByZWdz
W25dKTsNCj4gQEAgLTcwOCw4ICs3NDMsOSBAQCBzdGF0aWMgdm9pZCBpc29sYXRpb24oaW50IGZk
LA0KPiAgCQlpZ3Rfc3Bpbl9mcmVlKGZkLCBzcGluKTsNCj4gDQo+ICAJCWlmICghKGZsYWdzICYg
RElSVFkxKSkNCj4gLQkJCWNvbXBhcmVfcmVncyhmZCwgcmVnc1swXSwgdG1wLCAidHdvIHJlYWRz
IG9mIHRoZQ0KPiBzYW1lIGN0eCIpOw0KPiAtCQljb21wYXJlX3JlZ3MoZmQsIHJlZ3NbMF0sIHJl
Z3NbMV0sICJ0d28gdmlyZ2luIGNvbnRleHRzIik7DQo+ICsJCQljb21wYXJlX3JlZ3MoZmQsIGUs
IHJlZ3NbMF0sIHRtcCwNCj4gKwkJCQkgICAgICJ0d28gcmVhZHMgb2YgdGhlIHNhbWUgY3R4Iik7
DQo+ICsJCWNvbXBhcmVfcmVncyhmZCwgZSwgcmVnc1swXSwgcmVnc1sxXSwgInR3byB2aXJnaW4g
Y29udGV4dHMiKTsNCj4gDQo+ICAJCWZvciAoaW50IG4gPSAwOyBuIDwgQVJSQVlfU0laRShjdHgp
OyBuKyspIHsNCj4gIAkJCWdlbV9jbG9zZShmZCwgcmVnc1tuXSk7DQo+IEBAIC04MjksMTMgKzg2
NSwxMyBAQCBzdGF0aWMgdm9pZCBwcmVzZXJ2YXRpb24oaW50IGZkLA0KPiAgCQljaGFyIGJ1Zls4
MF07DQo+IA0KPiAgCQlzbnByaW50ZihidWYsIHNpemVvZihidWYpLCAiZGlydHkgJXggY29udGV4
dFxuIiwgdmFsdWVzW3ZdKTsNCj4gLQkJY29tcGFyZV9yZWdzKGZkLCByZWdzW3ZdWzBdLCByZWdz
W3ZdWzFdLCBidWYpOw0KPiArCQljb21wYXJlX3JlZ3MoZmQsIGUsIHJlZ3Nbdl1bMF0sIHJlZ3Nb
dl1bMV0sIGJ1Zik7DQo+IA0KPiAgCQlnZW1fY2xvc2UoZmQsIHJlZ3Nbdl1bMF0pOw0KPiAgCQln
ZW1fY2xvc2UoZmQsIHJlZ3Nbdl1bMV0pOw0KPiAgCQlnZW1fY29udGV4dF9kZXN0cm95KGZkLCBj
dHhbdl0pOw0KPiAgCX0NCj4gLQljb21wYXJlX3JlZ3MoZmQsIHJlZ3NbbnVtX3ZhbHVlc11bMF0s
IHJlZ3NbbnVtX3ZhbHVlc11bMV0sDQo+ICJjbGVhbiIpOw0KPiArCWNvbXBhcmVfcmVncyhmZCwg
ZSwgcmVnc1tudW1fdmFsdWVzXVswXSwgcmVnc1tudW1fdmFsdWVzXVsxXSwNCj4gKyJjbGVhbiIp
Ow0KPiAgCWdlbV9jb250ZXh0X2Rlc3Ryb3koZmQsIGN0eFtudW1fdmFsdWVzXSk7ICB9DQo+IA0K
PiAtLQ0KPiAyLjI0LjANCj4gDQo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fDQo+IEludGVsLWdmeCBtYWlsaW5nIGxpc3QNCj4gSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZw0KPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeA0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
aW50ZWwtZ2Z4

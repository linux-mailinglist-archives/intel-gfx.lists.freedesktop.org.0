Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 01180C49B1
	for <lists+intel-gfx@lfdr.de>; Wed,  2 Oct 2019 10:38:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 413FD6E90D;
	Wed,  2 Oct 2019 08:38:36 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B66E46E90C
 for <intel-gfx@lists.freedesktop.org>; Wed,  2 Oct 2019 08:38:32 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18689574-1500050 
 for multiple; Wed, 02 Oct 2019 09:38:17 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  2 Oct 2019 09:38:14 +0100
Message-Id: <20191002083814.16193-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191001155307.19735-1-chris@chris-wilson.co.uk>
References: <20191001155307.19735-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3] drm/i915/selftests: Exercise potential false
 lite-restore
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SWYgZXhlY2xpc3RzJ3MgbGl0ZS1yZXN0b3JlIGlzIGJhc2VkIG9uIHRoZSBjb21tb24gR0VNIGNv
bnRleHQgdGFnCnJhdGhlciB0aGFuIHRoZSBwZXItaW50ZWxfY29udGV4dCBMUkNBLCB0aGVuIGEg
Y29udGV4dCBzd2l0Y2ggYmV0d2Vlbgp0d28gaW50ZWxfY29udGV4dHMgb24gdGhlIHNhbWUgZW5n
aW5lIGRlcml2ZWQgZnJvbSB0aGUgc2FtZSBHRU0gY29udGV4dAp3aWxsIHBlcmZvcm0gYSBsaXRl
LXJlc3RvcmUgaW5zdGVhZCBvZiBhIGZ1bGwgY29udGV4dCBzd2l0Y2guIFdlIGNhbgpleHBsb2l0
IHRoaXMgYnkgcG9pc29uaW5nIHRoZSByaW5nYnVmZmVyIG9mIHRoZSBmaXJzdCBjb250ZXh0IGFu
ZCB0cnlpbmcKdG8gdHJpY2sgYSBzaW1wbGUgUklOR19UQUlMIHVwZGF0ZSAoaS5lLiBsaXRlLXJl
c3RvcmUpCgp2MjogQWxzbyBjaGVjayB3aGF0IGhhcHBlbnMgaWYgcHJlZW1wdCBjZVswXSB3aXRo
IGNlWzFdIChib3RoIGluc3RhbmNlcwpvbiB0aGUgc2FtZSBlbmdpbmUgZnJvbSB0aGUgc2FtZSBw
YXJlbnQgY29udGV4dCkgW1R2cnRrb10KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hy
aXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGlu
QGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBp
bnRlbC5jb20+Ci0tLQpIbW0sCgo8MD4gWzUyNS43NTUzMzNdIGk5MTVfc2VsLTY4ODYgICAgNC4u
Li4gNTE1MDA3NTc3dXMgOiBsaXZlX3VubGl0ZV9yZXN0b3JlOiBsaXZlX3VubGl0ZV9yZXN0b3Jl
OjIxOSBHRU1fQlVHX09OKHJxWzBdLT50YWlsID4gcnFbMV0tPnRhaWwpCgoyIHJlcXVlc3RzIHRh
a2UgbW9yZSB0aGFuIDIgcGFnZXM/IFdlaXJkLCBidXQgZm9yIGxhdGVyLgotLS0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAgIHwgIDE4ICsrLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMgfCAxNzcgKysrKysrKysrKysrKysrKysrKysrKysrKwog
MiBmaWxlcyBjaGFuZ2VkLCAxOTEgaW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCmluZGV4IDk4NzdiNmJhMTNkZi4uMmNlZjA2YmUzODgy
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpAQCAtMjM1LDYgKzIzNSwxNiBAQCBz
dGF0aWMgdm9pZCBleGVjbGlzdHNfaW5pdF9yZWdfc3RhdGUodTMyICpyZWdfc3RhdGUsCiAJCQkJ
ICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZywKIAkJCQkgICAgIGJvb2wgY2xvc2Up
OwogCitzdGF0aWMgdm9pZCBfX2NvbnRleHRfcGluX2FjcXVpcmUoc3RydWN0IGludGVsX2NvbnRl
eHQgKmNlKQoreworICAgICAgIG11dGV4X2FjcXVpcmUoJmNlLT5waW5fbXV0ZXguZGVwX21hcCwg
MiwgMCwgX1JFVF9JUF8pOworfQorCitzdGF0aWMgdm9pZCBfX2NvbnRleHRfcGluX3JlbGVhc2Uo
c3RydWN0IGludGVsX2NvbnRleHQgKmNlKQoreworICAgICAgIG11dGV4X3JlbGVhc2UoJmNlLT5w
aW5fbXV0ZXguZGVwX21hcCwgMCwgX1JFVF9JUF8pOworfQorCiBzdGF0aWMgdm9pZCBtYXJrX2Vp
byhzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkKIHsKIAlpZiAoIWk5MTVfcmVxdWVzdF9zaWduYWxl
ZChycSkpCkBAIC0yNzYxLDcgKzI3NzEsNyBAQCBzdGF0aWMgdm9pZCBfX2V4ZWNsaXN0c19yZXNl
dChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIGJvb2wgc3RhbGxlZCkKIAlHRU1fQlVH
X09OKCFpOTE1X3ZtYV9pc19waW5uZWQoY2UtPnN0YXRlKSk7CiAKIAkvKiBQcm9jbGFpbSB3ZSBo
YXZlIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gdGhlIGNvbnRleHQgaW1hZ2UhICovCi0JbXV0ZXhfYWNx
dWlyZSgmY2UtPnBpbl9tdXRleC5kZXBfbWFwLCAyLCAwLCBfVEhJU19JUF8pOworCV9fY29udGV4
dF9waW5fYWNxdWlyZShjZSk7CiAKIAlycSA9IGFjdGl2ZV9yZXF1ZXN0KHJxKTsKIAlpZiAoIXJx
KSB7CkBAIC0yODI1LDcgKzI4MzUsNyBAQCBzdGF0aWMgdm9pZCBfX2V4ZWNsaXN0c19yZXNldChz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIGJvb2wgc3RhbGxlZCkKIAlfX2V4ZWNsaXN0
c19yZXNldF9yZWdfc3RhdGUoY2UsIGVuZ2luZSk7CiAJX19leGVjbGlzdHNfdXBkYXRlX3JlZ19z
dGF0ZShjZSwgZW5naW5lKTsKIAljZS0+bHJjX2Rlc2MgfD0gQ1RYX0RFU0NfRk9SQ0VfUkVTVE9S
RTsgLyogcGFyYW5vaWQ6IEdQVSB3YXMgcmVzZXQhICovCi0JbXV0ZXhfcmVsZWFzZSgmY2UtPnBp
bl9tdXRleC5kZXBfbWFwLCAwLCBfVEhJU19JUF8pOworCV9fY29udGV4dF9waW5fcmVsZWFzZShj
ZSk7CiAKIHVud2luZDoKIAkvKiBQdXNoIGJhY2sgYW55IGluY29tcGxldGUgcmVxdWVzdHMgZm9y
IHJlcGxheSBhZnRlciB0aGUgcmVzZXQuICovCkBAIC00NDM5LDcgKzQ0NDksNyBAQCB2b2lkIGlu
dGVsX2xyX2NvbnRleHRfcmVzZXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCQkJ
ICAgIGJvb2wgc2NydWIpCiB7CiAJR0VNX0JVR19PTighaW50ZWxfY29udGV4dF9pc19waW5uZWQo
Y2UpKTsKLQltdXRleF9hY3F1aXJlKCZjZS0+cGluX211dGV4LmRlcF9tYXAsIDIsIDAsIF9USElT
X0lQXyk7CisJX19jb250ZXh0X3Bpbl9hY3F1aXJlKGNlKTsKIAogCS8qCiAJICogV2Ugd2FudCBh
IHNpbXBsZSBjb250ZXh0ICsgcmluZyB0byBleGVjdXRlIHRoZSBicmVhZGNydW1iIHVwZGF0ZS4K
QEAgLTQ0NjUsNyArNDQ3NSw3IEBAIHZvaWQgaW50ZWxfbHJfY29udGV4dF9yZXNldChzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAJaW50ZWxfcmluZ191cGRhdGVfc3BhY2UoY2UtPnJp
bmcpOwogCiAJX19leGVjbGlzdHNfdXBkYXRlX3JlZ19zdGF0ZShjZSwgZW5naW5lKTsKLQltdXRl
eF9yZWxlYXNlKCZjZS0+cGluX211dGV4LmRlcF9tYXAsIDAsIF9USElTX0lQXyk7CisJX19jb250
ZXh0X3Bpbl9yZWxlYXNlKGNlKTsKIH0KIAogI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1
X1NFTEZURVNUKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rf
bHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYwppbmRleCA5M2Yy
ZmNkYzQ5YmYuLjBjNjAzZTI4ZjM5NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3Qvc2VsZnRlc3RfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rf
bHJjLmMKQEAgLTc5LDYgKzc5LDE4MSBAQCBzdGF0aWMgaW50IGxpdmVfc2FuaXR5Y2hlY2sodm9p
ZCAqYXJnKQogCXJldHVybiBlcnI7CiB9CiAKK3N0YXRpYyBpbnQgbGl2ZV91bmxpdGVfcmVzdG9y
ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgaW50IHByaW8pCit7CisJc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lOworCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHg7CisJ
ZW51bSBpbnRlbF9lbmdpbmVfaWQgaWQ7CisJaW50ZWxfd2FrZXJlZl90IHdha2VyZWY7CisJc3Ry
dWN0IGlndF9zcGlubmVyIHNwaW47CisJaW50IGVyciA9IC1FTk9NRU07CisKKwkvKgorCSAqIENo
ZWNrIHRoYXQgd2UgY2FuIGNvcnJlY3RseSBjb250ZXh0IHN3aXRjaCBiZXR3ZWVuIDIgaW5zdGFu
Y2VzCisJICogb24gdGhlIHNhbWUgZW5naW5lIGZyb20gdGhlIHNhbWUgcGFyZW50IGNvbnRleHQu
CisJICovCisKKwltdXRleF9sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKKwl3YWtlcmVm
ID0gaW50ZWxfcnVudGltZV9wbV9nZXQoJmk5MTUtPnJ1bnRpbWVfcG0pOworCisJaWYgKGlndF9z
cGlubmVyX2luaXQoJnNwaW4sICZpOTE1LT5ndCkpCisJCWdvdG8gZXJyX3VubG9jazsKKworCWN0
eCA9IGtlcm5lbF9jb250ZXh0KGk5MTUpOworCWlmICghY3R4KQorCQlnb3RvIGVycl9zcGluOwor
CisJZXJyID0gMDsKKwlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBpOTE1LCBpZCkgeworCQlzdHJ1
Y3QgaW50ZWxfY29udGV4dCAqY2VbMl0gPSB7fTsKKwkJc3RydWN0IGk5MTVfcmVxdWVzdCAqcnFb
Ml07CisJCXN0cnVjdCBpZ3RfbGl2ZV90ZXN0IHQ7CisJCWludCBuOworCisJCWlmIChwcmlvICYm
ICFpbnRlbF9lbmdpbmVfaGFzX3ByZWVtcHRpb24oZW5naW5lKSkKKwkJCWNvbnRpbnVlOworCisJ
CWlmICghaW50ZWxfZW5naW5lX2Nhbl9zdG9yZV9kd29yZChlbmdpbmUpKQorCQkJY29udGludWU7
CisKKwkJaWYgKGlndF9saXZlX3Rlc3RfYmVnaW4oJnQsIGk5MTUsIF9fZnVuY19fLCBlbmdpbmUt
Pm5hbWUpKSB7CisJCQllcnIgPSAtRUlPOworCQkJYnJlYWs7CisJCX0KKworCQlmb3IgKG4gPSAw
OyBuIDwgQVJSQVlfU0laRShjZSk7IG4rKykgeworCQkJc3RydWN0IGludGVsX2NvbnRleHQgKnRt
cDsKKworCQkJdG1wID0gaW50ZWxfY29udGV4dF9jcmVhdGUoY3R4LCBlbmdpbmUpOworCQkJaWYg
KElTX0VSUih0bXApKSB7CisJCQkJZXJyID0gUFRSX0VSUih0bXApOworCQkJCWdvdG8gZXJyX2Nl
OworCQkJfQorCisJCQllcnIgPSBpbnRlbF9jb250ZXh0X3Bpbih0bXApOworCQkJaWYgKGVycikg
eworCQkJCWludGVsX2NvbnRleHRfcHV0KHRtcCk7CisJCQkJZ290byBlcnJfY2U7CisJCQl9CisK
KwkJCS8qCisJCQkgKiBTZXR1cCB0aGUgcGFpciBvZiBjb250ZXh0cyBzdWNoIHRoYXQgaWYgd2UK
KwkJCSAqIGxpdGUtcmVzdG9yZSB1c2luZyB0aGUgUklOR19UQUlMIGZyb20gY2VbMV0gaXQKKwkJ
CSAqIHdpbGwgZXhlY3V0ZSBnYXJiYWdlIGZyb20gY2VbMF0tPnJpbmcuCisJCQkgKi8KKwkJCW1l
bXNldCh0bXAtPnJpbmctPnZhZGRyLAorCQkJICAgICAgIFBPSVNPTl9JTlVTRSwgLyogSVBFSFI6
IDB4NWE1YTVhNWEgW2h1bmchXSAqLworCQkJICAgICAgIHRtcC0+cmluZy0+dm1hLT5zaXplKTsK
KworCQkJY2Vbbl0gPSB0bXA7CisJCX0KKwkJR0VNX0JVR19PTighY2VbMV0tPnJpbmctPnNpemUp
OworCQlpbnRlbF9yaW5nX3Jlc2V0KGNlWzFdLT5yaW5nLCBjZVsxXS0+cmluZy0+c2l6ZSAvIDIp
OworCisJCWxvY2FsX2JoX2Rpc2FibGUoKTsgLyogYXBwZWFzZSBsb2NrZGVwICovCisJCV9fY29u
dGV4dF9waW5fYWNxdWlyZShjZVsxXSk7CisJCV9fZXhlY2xpc3RzX3VwZGF0ZV9yZWdfc3RhdGUo
Y2VbMV0sIGVuZ2luZSk7CisJCV9fY29udGV4dF9waW5fcmVsZWFzZShjZVsxXSk7CisJCWxvY2Fs
X2JoX2VuYWJsZSgpOworCisJCXJxWzBdID0gaWd0X3NwaW5uZXJfY3JlYXRlX3JlcXVlc3QoJnNw
aW4sIGNlWzBdLCBNSV9BUkJfQ0hFQ0spOworCQlpZiAoSVNfRVJSKHJxWzBdKSkgeworCQkJZXJy
ID0gUFRSX0VSUihycVswXSk7CisJCQlnb3RvIGVycl9jZTsKKwkJfQorCisJCWk5MTVfcmVxdWVz
dF9nZXQocnFbMF0pOworCQlpOTE1X3JlcXVlc3RfYWRkKHJxWzBdKTsKKwkJR0VNX0JVR19PTihy
cVswXS0+dGFpbCA+IGNlWzFdLT5yaW5nLT5lbWl0KTsKKworCQlpZiAoIWlndF93YWl0X2Zvcl9z
cGlubmVyKCZzcGluLCBycVswXSkpIHsKKwkJCWk5MTVfcmVxdWVzdF9wdXQocnFbMF0pOworCQkJ
Z290byBlcnJfY2U7CisJCX0KKworCQlycVsxXSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUoY2VbMV0p
OworCQlpZiAoSVNfRVJSKHJxWzFdKSkgeworCQkJZXJyID0gUFRSX0VSUihycVsxXSk7CisJCQlp
OTE1X3JlcXVlc3RfcHV0KHJxWzBdKTsKKwkJCWdvdG8gZXJyX2NlOworCQl9CisKKwkJaWYgKCFw
cmlvKSB7CisJCQkvKgorCQkJICogRW5zdXJlIHdlIGRvIHRoZSBzd2l0Y2ggdG8gY2VbMV0gb24g
Y29tcGxldGlvbi4KKwkJCSAqCisJCQkgKiBycVswXSBpcyBhbHJlYWR5IHN1Ym1pdHRlZCwgc28g
dGhpcyBzaG91bGQgcmVkdWNlCisJCQkgKiB0byBhIG5vLW9wIChhIHdhaXQgb24gYSByZXF1ZXN0
IG9uIHRoZSBzYW1lIGVuZ2luZQorCQkJICogdXNlcyB0aGUgc3VibWl0IGZlbmNlLCBub3QgdGhl
IGNvbXBsZXRpb24gZmVuY2UpLAorCQkJICogYnV0IGl0IHdpbGwgaW5zdGFsbCBhIGRlcGVuZGVu
Y3kgb24gcnFbMV0gZm9yIHJxWzBdCisJCQkgKiB0aGF0IHdpbGwgcHJldmVudCB0aGUgcGFpciBi
ZWluZyByZW9yZGVyZWQgYnkKKwkJCSAqIHRpbWVzbGljaW5nLgorCQkJICovCisJCQlpOTE1X3Jl
cXVlc3RfYXdhaXRfZG1hX2ZlbmNlKHJxWzFdLCAmcnFbMF0tPmZlbmNlKTsKKwkJfQorCisJCWk5
MTVfcmVxdWVzdF9nZXQocnFbMV0pOworCQlpOTE1X3JlcXVlc3RfYWRkKHJxWzFdKTsKKwkJR0VN
X0JVR19PTihycVsxXS0+dGFpbCA8PSBycVswXS0+dGFpbCk7CisJCWk5MTVfcmVxdWVzdF9wdXQo
cnFbMF0pOworCisJCWlmIChwcmlvKSB7CisJCQlzdHJ1Y3QgaTkxNV9zY2hlZF9hdHRyIGF0dHIg
PSB7CisJCQkJLnByaW9yaXR5ID0gcHJpbywKKwkJCX07CisKKwkJCS8qIEFsdGVybmF0aXZlbHkg
cHJlZW1wdCB0aGUgc3Bpbm5lciB3aXRoIGNlWzFdICovCisJCQllbmdpbmUtPnNjaGVkdWxlKHJx
WzFdLCAmYXR0cik7CisJCX0KKworCQkvKiBBbmQgc3dpdGNoIGJhY2sgdG8gY2VbMF0gZm9yIGdv
b2QgbWVhc3VyZSAqLworCQlycVswXSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUoY2VbMF0pOworCQlp
ZiAoSVNfRVJSKHJxWzBdKSkgeworCQkJZXJyID0gUFRSX0VSUihycVswXSk7CisJCQlpOTE1X3Jl
cXVlc3RfcHV0KHJxWzFdKTsKKwkJCWdvdG8gZXJyX2NlOworCQl9CisKKwkJaTkxNV9yZXF1ZXN0
X2F3YWl0X2RtYV9mZW5jZShycVswXSwgJnJxWzFdLT5mZW5jZSk7CisJCWk5MTVfcmVxdWVzdF9h
ZGQocnFbMF0pOworCQlpOTE1X3JlcXVlc3RfcHV0KHJxWzFdKTsKKworZXJyX2NlOgorCQl0YXNr
bGV0X2tpbGwoJmVuZ2luZS0+ZXhlY2xpc3RzLnRhc2tsZXQpOyAvKiBmbHVzaCBzdWJtaXNzaW9u
ICovCisJCWlndF9zcGlubmVyX2VuZCgmc3Bpbik7CisJCWZvciAobiA9IDA7IG4gPCBBUlJBWV9T
SVpFKGNlKTsgbisrKSB7CisJCQlpZiAoSVNfRVJSX09SX05VTEwoY2Vbbl0pKQorCQkJCWJyZWFr
OworCisJCQlpbnRlbF9jb250ZXh0X3VucGluKGNlW25dKTsKKwkJCWludGVsX2NvbnRleHRfcHV0
KGNlW25dKTsKKwkJfQorCisJCWlmIChpZ3RfbGl2ZV90ZXN0X2VuZCgmdCkpCisJCQllcnIgPSAt
RUlPOworCQlpZiAoZXJyKQorCQkJYnJlYWs7CisJfQorCisJa2VybmVsX2NvbnRleHRfY2xvc2Uo
Y3R4KTsKK2Vycl9zcGluOgorCWlndF9zcGlubmVyX2ZpbmkoJnNwaW4pOworZXJyX3VubG9jazoK
KwlpbnRlbF9ydW50aW1lX3BtX3B1dCgmaTkxNS0+cnVudGltZV9wbSwgd2FrZXJlZik7CisJbXV0
ZXhfdW5sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKKwlyZXR1cm4gZXJyOworfQorCitz
dGF0aWMgaW50IGxpdmVfdW5saXRlX3N3aXRjaCh2b2lkICphcmcpCit7CisJcmV0dXJuIGxpdmVf
dW5saXRlX3Jlc3RvcmUoYXJnLCAwKTsKK30KKworc3RhdGljIGludCBsaXZlX3VubGl0ZV9wcmVl
bXB0KHZvaWQgKmFyZykKK3sKKwlyZXR1cm4gbGl2ZV91bmxpdGVfcmVzdG9yZShhcmcsIEk5MTVf
VVNFUl9QUklPUklUWShJOTE1X1BSSU9SSVRZX01BWCkpOworfQorCiBzdGF0aWMgaW50CiBlbWl0
X3NlbWFwaG9yZV9jaGFpbihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgc3RydWN0IGk5MTVfdm1h
ICp2bWEsIGludCBpZHgpCiB7CkBAIC0yMTc4LDYgKzIzNTMsOCBAQCBpbnQgaW50ZWxfZXhlY2xp
c3RzX2xpdmVfc2VsZnRlc3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewogCXN0
YXRpYyBjb25zdCBzdHJ1Y3QgaTkxNV9zdWJ0ZXN0IHRlc3RzW10gPSB7CiAJCVNVQlRFU1QobGl2
ZV9zYW5pdHljaGVjayksCisJCVNVQlRFU1QobGl2ZV91bmxpdGVfc3dpdGNoKSwKKwkJU1VCVEVT
VChsaXZlX3VubGl0ZV9wcmVlbXB0KSwKIAkJU1VCVEVTVChsaXZlX3RpbWVzbGljZV9wcmVlbXB0
KSwKIAkJU1VCVEVTVChsaXZlX2J1c3l3YWl0X3ByZWVtcHQpLAogCQlTVUJURVNUKGxpdmVfcHJl
ZW1wdCksCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2lu
dGVsLWdmeA==

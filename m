Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0D396CBA3B
	for <lists+intel-gfx@lfdr.de>; Fri,  4 Oct 2019 14:20:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 636B76EB5C;
	Fri,  4 Oct 2019 12:20:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 358596EB5C
 for <intel-gfx@lists.freedesktop.org>; Fri,  4 Oct 2019 12:20:32 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 04 Oct 2019 05:20:31 -0700
X-IronPort-AV: E=Sophos;i="5.67,256,1566889200"; d="scan'208";a="196651731"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga006-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 04 Oct 2019 05:20:29 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  4 Oct 2019 15:20:18 +0300
Message-Id: <20191004122019.12009-2-jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191004122019.12009-1-jani.nikula@intel.com>
References: <20191004122019.12009-1-jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [CI 2/3] drm/i915: split out i915_switcheroo.[ch] from
 i915_drv.c
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U3BsaXQgb3V0IGNvZGUgcmVsYXRlZCB0byB2Z2Egc3dpdGNoZXJvbyByZWdpc3Rlci91bnJlZ2lz
dGVyIGFuZCBzdGF0ZQpoYW5kbGluZyBmcm9tIGk5MTVfZHJ2LmMgaW50byBuZXcgaTkxNV9zd2l0
Y2hlcm9vLltjaF0gZmlsZXMuCgpJdCdzIGEgYml0IGRpZmZpY3VsdCB0byBkcmF3IHRoZSBsaW5l
IGhvdyBtdWNoIHRvIG1vdmUgdG8gdGhlIG5ldyBmaWxlCmZyb20gaTkxNV9kcnYuYywgYnV0IGl0
IHNlZW1lZCB0byBtZSBrZWVwaW5nIGk5MTVfc3VzcGVuZF9zd2l0Y2hlcm9vKCkKYW5kIGk5MTVf
cmVzdW1lX3N3aXRjaGVyb28oKSBpbiBwbGFjZSB3YXMgdGhlIGNsZWFuZXN0LgoKTm8gZnVuY3Rp
b25hbCBjaGFuZ2VzLgoKQ2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5p
bnRlbC5jb20+CkNjOiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KUmV2
aWV3ZWQtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+
ClNpZ25lZC1vZmYtYnk6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBpbnRlbC5jb20+Ci0tLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgICAgICAgICAgfCAgMSArCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2Rydi5jICAgICAgICB8IDYzICsrKy0tLS0tLS0tLS0tLS0tLS0tLS0t
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgICAgfCAgMyArKwogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9zd2l0Y2hlcm9vLmMgfCA2NyArKysrKysrKysrKysrKysrKysr
KysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zd2l0Y2hlcm9vLmggfCAxNCArKysr
KysKIDUgZmlsZXMgY2hhbmdlZCwgOTIgaW5zZXJ0aW9ucygrKSwgNTYgZGVsZXRpb25zKC0pCiBj
cmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zd2l0Y2hlcm9vLmMK
IGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3N3aXRjaGVyb28u
aAoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvTWFrZWZpbGUKaW5kZXggZDJiNTNiNWFkZDgxLi4xMzZhMWE1MWI2ZTIgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L01ha2VmaWxlCkBAIC00Niw2ICs0Niw3IEBAIGk5MTUteSArPSBpOTE1X2Rydi5v
IFwKIAkgIGk5MTVfcGNpLm8gXAogCSAgaTkxNV9zY2F0dGVybGlzdC5vIFwKIAkgIGk5MTVfc3Vz
cGVuZC5vIFwKKwkgIGk5MTVfc3dpdGNoZXJvby5vIFwKIAkgIGk5MTVfc3lzZnMubyBcCiAJICBp
OTE1X3V0aWxzLm8gXAogCSAgaW50ZWxfY3NyLm8gXApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKaW5k
ZXggMzMwNmM2YmI1MTVhLi43MzQ5ZmQ4Yzk3OTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwpA
QCAtNzIsNiArNzIsNyBAQAogI2luY2x1ZGUgImk5MTVfcGVyZi5oIgogI2luY2x1ZGUgImk5MTVf
cXVlcnkuaCIKICNpbmNsdWRlICJpOTE1X3N1c3BlbmQuaCIKKyNpbmNsdWRlICJpOTE1X3N3aXRj
aGVyb28uaCIKICNpbmNsdWRlICJpOTE1X3N5c2ZzLmgiCiAjaW5jbHVkZSAiaTkxNV90cmFjZS5o
IgogI2luY2x1ZGUgImk5MTVfdmdwdS5oIgpAQCAtMjY5LDU2ICsyNzAsOCBAQCBpbnRlbF90ZWFy
ZG93bl9tY2hiYXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQlyZWxlYXNl
X3Jlc291cmNlKCZkZXZfcHJpdi0+bWNoX3Jlcyk7CiB9CiAKLXN0YXRpYyBpbnQgaTkxNV9yZXN1
bWVfc3dpdGNoZXJvbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7Ci1zdGF0aWMgaW50
IGk5MTVfc3VzcGVuZF9zd2l0Y2hlcm9vKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAot
CQkJCSAgIHBtX21lc3NhZ2VfdCBzdGF0ZSk7Ci0KLXN0YXRpYyB2b2lkIGk5MTVfc3dpdGNoZXJv
b19zZXRfc3RhdGUoc3RydWN0IHBjaV9kZXYgKnBkZXYsIGVudW0gdmdhX3N3aXRjaGVyb29fc3Rh
dGUgc3RhdGUpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBwZGV2X3RvX2k5
MTUocGRldik7Ci0JcG1fbWVzc2FnZV90IHBtbSA9IHsgLmV2ZW50ID0gUE1fRVZFTlRfU1VTUEVO
RCB9OwotCi0JaWYgKCFpOTE1KSB7Ci0JCWRldl9lcnIoJnBkZXYtPmRldiwgIkRSTSBub3QgaW5p
dGlhbGl6ZWQsIGFib3J0aW5nIHN3aXRjaC5cbiIpOwotCQlyZXR1cm47Ci0JfQotCi0JaWYgKHN0
YXRlID09IFZHQV9TV0lUQ0hFUk9PX09OKSB7Ci0JCXByX2luZm8oInN3aXRjaGVkIG9uXG4iKTsK
LQkJaTkxNS0+ZHJtLnN3aXRjaF9wb3dlcl9zdGF0ZSA9IERSTV9TV0lUQ0hfUE9XRVJfQ0hBTkdJ
Tkc7Ci0JCS8qIGk5MTUgcmVzdW1lIGhhbmRsZXIgZG9lc24ndCBzZXQgdG8gRDAgKi8KLQkJcGNp
X3NldF9wb3dlcl9zdGF0ZShwZGV2LCBQQ0lfRDApOwotCQlpOTE1X3Jlc3VtZV9zd2l0Y2hlcm9v
KGk5MTUpOwotCQlpOTE1LT5kcm0uc3dpdGNoX3Bvd2VyX3N0YXRlID0gRFJNX1NXSVRDSF9QT1dF
Ul9PTjsKLQl9IGVsc2UgewotCQlwcl9pbmZvKCJzd2l0Y2hlZCBvZmZcbiIpOwotCQlpOTE1LT5k
cm0uc3dpdGNoX3Bvd2VyX3N0YXRlID0gRFJNX1NXSVRDSF9QT1dFUl9DSEFOR0lORzsKLQkJaTkx
NV9zdXNwZW5kX3N3aXRjaGVyb28oaTkxNSwgcG1tKTsKLQkJaTkxNS0+ZHJtLnN3aXRjaF9wb3dl
cl9zdGF0ZSA9IERSTV9TV0lUQ0hfUE9XRVJfT0ZGOwotCX0KLX0KLQotc3RhdGljIGJvb2wgaTkx
NV9zd2l0Y2hlcm9vX2Nhbl9zd2l0Y2goc3RydWN0IHBjaV9kZXYgKnBkZXYpCi17Ci0Jc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBwZGV2X3RvX2k5MTUocGRldik7Ci0KLQkvKgotCSAq
IEZJWE1FOiBvcGVuX2NvdW50IGlzIHByb3RlY3RlZCBieSBkcm1fZ2xvYmFsX211dGV4IGJ1dCB0
aGF0IHdvdWxkIGxlYWQgdG8KLQkgKiBsb2NraW5nIGludmVyc2lvbiB3aXRoIHRoZSBkcml2ZXIg
bG9hZCBwYXRoLiBBbmQgdGhlIGFjY2VzcyBoZXJlIGlzCi0JICogY29tcGxldGVseSByYWN5IGFu
eXdheS4gU28gZG9uJ3QgYm90aGVyIHdpdGggbG9ja2luZyBmb3Igbm93LgotCSAqLwotCXJldHVy
biBpOTE1ICYmIGk5MTUtPmRybS5vcGVuX2NvdW50ID09IDA7Ci19Ci0KLXN0YXRpYyBjb25zdCBz
dHJ1Y3QgdmdhX3N3aXRjaGVyb29fY2xpZW50X29wcyBpOTE1X3N3aXRjaGVyb29fb3BzID0gewot
CS5zZXRfZ3B1X3N0YXRlID0gaTkxNV9zd2l0Y2hlcm9vX3NldF9zdGF0ZSwKLQkucmVwcm9iZSA9
IE5VTEwsCi0JLmNhbl9zd2l0Y2ggPSBpOTE1X3N3aXRjaGVyb29fY2FuX3N3aXRjaCwKLX07Ci0K
IHN0YXRpYyBpbnQgaTkxNV9kcml2ZXJfbW9kZXNldF9wcm9iZShzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSkKIHsKLQlzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IGk5MTUtPmRybS5wZGV2Owog
CWludCByZXQ7CiAKIAlpZiAoaTkxNV9pbmplY3RfcHJvYmVfZmFpbHVyZShpOTE1KSkKQEAgLTMz
OSw3ICsyOTIsNyBAQCBzdGF0aWMgaW50IGk5MTVfZHJpdmVyX21vZGVzZXRfcHJvYmUoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAKIAlpbnRlbF9yZWdpc3Rlcl9kc21faGFuZGxlcigp
OwogCi0JcmV0ID0gdmdhX3N3aXRjaGVyb29fcmVnaXN0ZXJfY2xpZW50KHBkZXYsICZpOTE1X3N3
aXRjaGVyb29fb3BzLCBmYWxzZSk7CisJcmV0ID0gaTkxNV9zd2l0Y2hlcm9vX3JlZ2lzdGVyKGk5
MTUpOwogCWlmIChyZXQpCiAJCWdvdG8gY2xlYW51cF92Z2FfY2xpZW50OwogCkBAIC0zOTQsNyAr
MzQ3LDcgQEAgc3RhdGljIGludCBpOTE1X2RyaXZlcl9tb2Rlc2V0X3Byb2JlKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1KQogY2xlYW51cF9jc3I6CiAJaW50ZWxfY3NyX3Vjb2RlX2Zpbmko
aTkxNSk7CiAJaW50ZWxfcG93ZXJfZG9tYWluc19kcml2ZXJfcmVtb3ZlKGk5MTUpOwotCXZnYV9z
d2l0Y2hlcm9vX3VucmVnaXN0ZXJfY2xpZW50KHBkZXYpOworCWk5MTVfc3dpdGNoZXJvb191bnJl
Z2lzdGVyKGk5MTUpOwogY2xlYW51cF92Z2FfY2xpZW50OgogCWludGVsX3ZnYV91bnJlZ2lzdGVy
KGk5MTUpOwogb3V0OgpAQCAtNDAzLDEzICszNTYsMTIgQEAgc3RhdGljIGludCBpOTE1X2RyaXZl
cl9tb2Rlc2V0X3Byb2JlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCiBzdGF0aWMg
dm9pZCBpOTE1X2RyaXZlcl9tb2Rlc2V0X3JlbW92ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSkKIHsKLQlzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IGk5MTUtPmRybS5wZGV2OwotCiAJaW50
ZWxfbW9kZXNldF9kcml2ZXJfcmVtb3ZlKGk5MTUpOwogCiAJaW50ZWxfYmlvc19kcml2ZXJfcmVt
b3ZlKGk5MTUpOwogCi0JdmdhX3N3aXRjaGVyb29fdW5yZWdpc3Rlcl9jbGllbnQocGRldik7CisJ
aTkxNV9zd2l0Y2hlcm9vX3VucmVnaXN0ZXIoaTkxNSk7CisKIAlpbnRlbF92Z2FfdW5yZWdpc3Rl
cihpOTE1KTsKIAogCWludGVsX2Nzcl91Y29kZV9maW5pKGk5MTUpOwpAQCAtMTgyNSw4ICsxNzc3
LDcgQEAgc3RhdGljIGludCBpOTE1X2RybV9zdXNwZW5kX2xhdGUoc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwgYm9vbCBoaWJlcm5hdGlvbikKIAlyZXR1cm4gcmV0OwogfQogCi1zdGF0aWMgaW50Ci1p
OTE1X3N1c3BlbmRfc3dpdGNoZXJvbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgcG1f
bWVzc2FnZV90IHN0YXRlKQoraW50IGk5MTVfc3VzcGVuZF9zd2l0Y2hlcm9vKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1LCBwbV9tZXNzYWdlX3Qgc3RhdGUpCiB7CiAJaW50IGVycm9yOwog
CkBAIC0xOTk0LDcgKzE5NDUsNyBAQCBzdGF0aWMgaW50IGk5MTVfZHJtX3Jlc3VtZV9lYXJseShz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCXJldHVybiByZXQ7CiB9CiAKLXN0YXRpYyBpbnQgaTkx
NV9yZXN1bWVfc3dpdGNoZXJvbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKK2ludCBp
OTE1X3Jlc3VtZV9zd2l0Y2hlcm9vKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewog
CWludCByZXQ7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2Lmgg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IDMzN2Q4MzA2NDE2YS4uMGNh
NGQ5MGRmYTQ2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTIyMjMsNiArMjIyMyw5IEBA
IGV4dGVybiBjb25zdCBzdHJ1Y3QgZGV2X3BtX29wcyBpOTE1X3BtX29wczsKIGludCBpOTE1X2Ry
aXZlcl9wcm9iZShzdHJ1Y3QgcGNpX2RldiAqcGRldiwgY29uc3Qgc3RydWN0IHBjaV9kZXZpY2Vf
aWQgKmVudCk7CiB2b2lkIGk5MTVfZHJpdmVyX3JlbW92ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSk7CiAKK2ludCBpOTE1X3Jlc3VtZV9zd2l0Y2hlcm9vKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1KTsKK2ludCBpOTE1X3N1c3BlbmRfc3dpdGNoZXJvbyhzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqaTkxNSwgcG1fbWVzc2FnZV90IHN0YXRlKTsKKwogdm9pZCBpbnRlbF9lbmdp
bmVfaW5pdF9oYW5nY2hlY2soc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKIGludCB2
bHZfZm9yY2VfZ2Z4X2Nsb2NrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgYm9v
bCBvbik7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3dpdGNoZXJv
by5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zd2l0Y2hlcm9vLmMKbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi4zOWM3OWUxYzViNTIKLS0tIC9kZXYvbnVsbAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3N3aXRjaGVyb28uYwpAQCAtMCwwICsxLDY3
IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCisvKgorICogQ29weXJpZ2h0IMKp
IDIwMTkgSW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaW5jbHVkZSA8bGludXgvdmdhX3N3aXRj
aGVyb28uaD4KKworI2luY2x1ZGUgImk5MTVfZHJ2LmgiCisjaW5jbHVkZSAiaTkxNV9zd2l0Y2hl
cm9vLmgiCisKK3N0YXRpYyB2b2lkIGk5MTVfc3dpdGNoZXJvb19zZXRfc3RhdGUoc3RydWN0IHBj
aV9kZXYgKnBkZXYsCisJCQkJICAgICAgZW51bSB2Z2Ffc3dpdGNoZXJvb19zdGF0ZSBzdGF0ZSkK
K3sKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHBkZXZfdG9faTkxNShwZGV2KTsK
KwlwbV9tZXNzYWdlX3QgcG1tID0geyAuZXZlbnQgPSBQTV9FVkVOVF9TVVNQRU5EIH07CisKKwlp
ZiAoIWk5MTUpIHsKKwkJZGV2X2VycigmcGRldi0+ZGV2LCAiRFJNIG5vdCBpbml0aWFsaXplZCwg
YWJvcnRpbmcgc3dpdGNoLlxuIik7CisJCXJldHVybjsKKwl9CisKKwlpZiAoc3RhdGUgPT0gVkdB
X1NXSVRDSEVST09fT04pIHsKKwkJcHJfaW5mbygic3dpdGNoZWQgb25cbiIpOworCQlpOTE1LT5k
cm0uc3dpdGNoX3Bvd2VyX3N0YXRlID0gRFJNX1NXSVRDSF9QT1dFUl9DSEFOR0lORzsKKwkJLyog
aTkxNSByZXN1bWUgaGFuZGxlciBkb2Vzbid0IHNldCB0byBEMCAqLworCQlwY2lfc2V0X3Bvd2Vy
X3N0YXRlKHBkZXYsIFBDSV9EMCk7CisJCWk5MTVfcmVzdW1lX3N3aXRjaGVyb28oaTkxNSk7CisJ
CWk5MTUtPmRybS5zd2l0Y2hfcG93ZXJfc3RhdGUgPSBEUk1fU1dJVENIX1BPV0VSX09OOworCX0g
ZWxzZSB7CisJCXByX2luZm8oInN3aXRjaGVkIG9mZlxuIik7CisJCWk5MTUtPmRybS5zd2l0Y2hf
cG93ZXJfc3RhdGUgPSBEUk1fU1dJVENIX1BPV0VSX0NIQU5HSU5HOworCQlpOTE1X3N1c3BlbmRf
c3dpdGNoZXJvbyhpOTE1LCBwbW0pOworCQlpOTE1LT5kcm0uc3dpdGNoX3Bvd2VyX3N0YXRlID0g
RFJNX1NXSVRDSF9QT1dFUl9PRkY7CisJfQorfQorCitzdGF0aWMgYm9vbCBpOTE1X3N3aXRjaGVy
b29fY2FuX3N3aXRjaChzdHJ1Y3QgcGNpX2RldiAqcGRldikKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSA9IHBkZXZfdG9faTkxNShwZGV2KTsKKworCS8qCisJICogRklYTUU6IG9w
ZW5fY291bnQgaXMgcHJvdGVjdGVkIGJ5IGRybV9nbG9iYWxfbXV0ZXggYnV0IHRoYXQgd291bGQg
bGVhZCB0bworCSAqIGxvY2tpbmcgaW52ZXJzaW9uIHdpdGggdGhlIGRyaXZlciBsb2FkIHBhdGgu
IEFuZCB0aGUgYWNjZXNzIGhlcmUgaXMKKwkgKiBjb21wbGV0ZWx5IHJhY3kgYW55d2F5LiBTbyBk
b24ndCBib3RoZXIgd2l0aCBsb2NraW5nIGZvciBub3cuCisJICovCisJcmV0dXJuIGk5MTUgJiYg
aTkxNS0+ZHJtLm9wZW5fY291bnQgPT0gMDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCB2Z2Ff
c3dpdGNoZXJvb19jbGllbnRfb3BzIGk5MTVfc3dpdGNoZXJvb19vcHMgPSB7CisJLnNldF9ncHVf
c3RhdGUgPSBpOTE1X3N3aXRjaGVyb29fc2V0X3N0YXRlLAorCS5yZXByb2JlID0gTlVMTCwKKwku
Y2FuX3N3aXRjaCA9IGk5MTVfc3dpdGNoZXJvb19jYW5fc3dpdGNoLAorfTsKKworaW50IGk5MTVf
c3dpdGNoZXJvb19yZWdpc3RlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKK3sKKwlz
dHJ1Y3QgcGNpX2RldiAqcGRldiA9IGk5MTUtPmRybS5wZGV2OworCisJcmV0dXJuIHZnYV9zd2l0
Y2hlcm9vX3JlZ2lzdGVyX2NsaWVudChwZGV2LCAmaTkxNV9zd2l0Y2hlcm9vX29wcywgZmFsc2Up
OworfQorCit2b2lkIGk5MTVfc3dpdGNoZXJvb191bnJlZ2lzdGVyKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1KQoreworCXN0cnVjdCBwY2lfZGV2ICpwZGV2ID0gaTkxNS0+ZHJtLnBkZXY7
CisKKwl2Z2Ffc3dpdGNoZXJvb191bnJlZ2lzdGVyX2NsaWVudChwZGV2KTsKK30KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3dpdGNoZXJvby5oIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9zd2l0Y2hlcm9vLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAw
MDAwMDAwMDAwLi41OWI2YzFlMDdkNzUKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X3N3aXRjaGVyb28uaApAQCAtMCwwICsxLDE0IEBACisvKiBTUERYLUxpY2Vu
c2UtSWRlbnRpZmllcjogTUlUICovCisvKgorICogQ29weXJpZ2h0IMKpIDIwMTkgSW50ZWwgQ29y
cG9yYXRpb24KKyAqLworCisjaWZuZGVmIF9fSTkxNV9TV0lUQ0hFUk9PX18KKyNkZWZpbmUgX19J
OTE1X1NXSVRDSEVST09fXworCitzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZTsKKworaW50IGk5MTVf
c3dpdGNoZXJvb19yZWdpc3RlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7Cit2b2lk
IGk5MTVfc3dpdGNoZXJvb191bnJlZ2lzdGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
KTsKKworI2VuZGlmIC8qIF9fSTkxNV9TV0lUQ0hFUk9PX18gKi8KLS0gCjIuMjAuMQoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxp
bmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0C5A236265D
	for <lists+intel-gfx@lfdr.de>; Fri, 16 Apr 2021 19:10:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BAC186E1D6;
	Fri, 16 Apr 2021 17:10:19 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D07C86E1B5
 for <intel-gfx@lists.freedesktop.org>; Fri, 16 Apr 2021 17:10:17 +0000 (UTC)
IronPort-SDR: NkCPh+xMYChRe0WpH5tMablZGBxaFmW7+uaISF5QAX7qB5aDO51We36UWXEwf0vFx2jSxfM6Gl
 +Yu8KbYxsBTw==
X-IronPort-AV: E=McAfee;i="6200,9189,9956"; a="259027546"
X-IronPort-AV: E=Sophos;i="5.82,226,1613462400"; d="scan'208";a="259027546"
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga105.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 16 Apr 2021 10:10:17 -0700
IronPort-SDR: thwEZXmcx0+ZCOASJyo9PyWFbZ//F+YCvm6i+d5BskGGvo257tVpHZZnyc8GRJF2sa0B5K1vzI
 chSa19w+PMeQ==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.82,226,1613462400"; d="scan'208";a="419177753"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.171])
 by fmsmga008.fm.intel.com with SMTP; 16 Apr 2021 10:10:15 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 16 Apr 2021 20:10:14 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 16 Apr 2021 20:10:04 +0300
Message-Id: <20210416171011.19012-2-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.26.3
In-Reply-To: <20210416171011.19012-1-ville.syrjala@linux.intel.com>
References: <20210416171011.19012-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 1/8] drm/i915: Collect dbuf device info into a
 sub-struct
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkNv
bGxlY3QgdGhlIHJlbGF0ZWQgZGJ1ZiBpbmZvcm1hdGlvbiBpbnRvIGEgc3RydWN0LgoKU2lnbmVk
LW9mZi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4K
LS0tCiAuLi4vZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5jICAgfCAg
NCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BjaS5jICAgICAgICAgICAgICAgICAg
fCAxNiArKysrKysrKy0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2Vf
aW5mby5oICAgICAgICAgfCAgNiArKysrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3Bt
LmMgICAgICAgICAgICAgICAgICB8IDE0ICsrKysrKystLS0tLS0tCiA0IGZpbGVzIGNoYW5nZWQs
IDIxIGluc2VydGlvbnMoKyksIDE5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMKaW5kZXggMGFmMWRlZTFhYzk1
Li4wZTQzM2EwZTFmY2UgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGlzcGxheV9wb3dlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGlzcGxheV9wb3dlci5jCkBAIC00Nzc3LDcgKzQ3NzcsNyBAQCBzdGF0aWMgdm9pZCBn
ZW45X2RidWZfc2xpY2Vfc2V0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIHZv
aWQgZ2VuOV9kYnVmX3NsaWNlc191cGRhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LAogCQkJICAgICB1OCByZXFfc2xpY2VzKQogewotCWludCBudW1fc2xpY2VzID0gSU5URUxf
SU5GTyhkZXZfcHJpdiktPm51bV9zdXBwb3J0ZWRfZGJ1Zl9zbGljZXM7CisJaW50IG51bV9zbGlj
ZXMgPSBJTlRFTF9JTkZPKGRldl9wcml2KS0+ZGJ1Zi5udW1fc2xpY2VzOwogCXN0cnVjdCBpOTE1
X3Bvd2VyX2RvbWFpbnMgKnBvd2VyX2RvbWFpbnMgPSAmZGV2X3ByaXYtPnBvd2VyX2RvbWFpbnM7
CiAJZW51bSBkYnVmX3NsaWNlIHNsaWNlOwogCkBAIC00ODI1LDcgKzQ4MjUsNyBAQCBzdGF0aWMg
dm9pZCBnZW45X2RidWZfZGlzYWJsZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYp
CiAKIHN0YXRpYyB2b2lkIGdlbjEyX2RidWZfc2xpY2VzX2NvbmZpZyhzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYpCiB7Ci0JY29uc3QgaW50IG51bV9zbGljZXMgPSBJTlRFTF9JTkZP
KGRldl9wcml2KS0+bnVtX3N1cHBvcnRlZF9kYnVmX3NsaWNlczsKKwlpbnQgbnVtX3NsaWNlcyA9
IElOVEVMX0lORk8oZGV2X3ByaXYpLT5kYnVmLm51bV9zbGljZXM7CiAJZW51bSBkYnVmX3NsaWNl
IHNsaWNlOwogCiAJZm9yIChzbGljZSA9IERCVUZfUzE7IHNsaWNlIDwgKERCVUZfUzEgKyBudW1f
c2xpY2VzKTsgc2xpY2UrKykKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
cGNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BjaS5jCmluZGV4IDQ0ZTdiOTRkYjYz
ZC4uNDg0ZDI2MzM4OTRhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Bj
aS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGNpLmMKQEAgLTY0Nyw4ICs2NDcs
OCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RldmljZV9pbmZvIGNodl9pbmZvID0gewog
CS5oYXNfZ3RfdWMgPSAxLCBcCiAJLmRpc3BsYXkuaGFzX2hkY3AgPSAxLCBcCiAJLmRpc3BsYXku
aGFzX2lwYyA9IDEsIFwKLQkuZGRiX3NpemUgPSA4OTYsIFwKLQkubnVtX3N1cHBvcnRlZF9kYnVm
X3NsaWNlcyA9IDEKKwkuZGJ1Zi5zaXplID0gODk2LCBcCisJLmRidWYubnVtX3NsaWNlcyA9IDEK
IAogI2RlZmluZSBTS0xfUExBVEZPUk0gXAogCUdFTjlfRkVBVFVSRVMsIFwKQEAgLTY4Myw3ICs2
ODMsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RldmljZV9pbmZvIHNrbF9ndDRfaW5m
byA9IHsKICNkZWZpbmUgR0VOOV9MUF9GRUFUVVJFUyBcCiAJR0VOKDkpLCBcCiAJLmlzX2xwID0g
MSwgXAotCS5udW1fc3VwcG9ydGVkX2RidWZfc2xpY2VzID0gMSwgXAorCS5kYnVmLm51bV9zbGlj
ZXMgPSAxLCBcCiAJLmRpc3BsYXkuaGFzX2hvdHBsdWcgPSAxLCBcCiAJLnBsYXRmb3JtX2VuZ2lu
ZV9tYXNrID0gQklUKFJDUzApIHwgQklUKFZDUzApIHwgQklUKEJDUzApIHwgQklUKFZFQ1MwKSwg
XAogCS5waXBlX21hc2sgPSBCSVQoUElQRV9BKSB8IEJJVChQSVBFX0IpIHwgQklUKFBJUEVfQyks
IFwKQEAgLTcyMCwxNCArNzIwLDE0IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGV2aWNl
X2luZm8gc2tsX2d0NF9pbmZvID0gewogc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZXZpY2Vf
aW5mbyBieHRfaW5mbyA9IHsKIAlHRU45X0xQX0ZFQVRVUkVTLAogCVBMQVRGT1JNKElOVEVMX0JS
T1hUT04pLAotCS5kZGJfc2l6ZSA9IDUxMiwKKwkuZGJ1Zi5zaXplID0gNTEyLAogfTsKIAogc3Rh
dGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZXZpY2VfaW5mbyBnbGtfaW5mbyA9IHsKIAlHRU45X0xQ
X0ZFQVRVUkVTLAogCVBMQVRGT1JNKElOVEVMX0dFTUlOSUxBS0UpLAogCS5kaXNwbGF5LnZlciA9
IDEwLAotCS5kZGJfc2l6ZSA9IDEwMjQsCisJLmRidWYuc2l6ZSA9IDEwMjQsCiAJR0xLX0NPTE9S
UywKIH07CiAKQEAgLTc5MCw3ICs3OTAsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2Rl
dmljZV9pbmZvIGNtbF9ndDJfaW5mbyA9IHsKICNkZWZpbmUgR0VOMTBfRkVBVFVSRVMgXAogCUdF
TjlfRkVBVFVSRVMsIFwKIAlHRU4oMTApLCBcCi0JLmRkYl9zaXplID0gMTAyNCwgXAorCS5kYnVm
LnNpemUgPSAxMDI0LCBcCiAJLmRpc3BsYXkuaGFzX2RzYyA9IDEsIFwKIAkuaGFzX2NvaGVyZW50
X2dndHQgPSBmYWxzZSwgXAogCUdMS19DT0xPUlMKQEAgLTgzMCw4ICs4MzAsOCBAQCBzdGF0aWMg
Y29uc3Qgc3RydWN0IGludGVsX2RldmljZV9pbmZvIGNubF9pbmZvID0gewogCQlbVFJBTlNDT0RF
Ul9EU0lfMV0gPSBUUkFOU0NPREVSX0RTSTFfT0ZGU0VULCBcCiAJfSwgXAogCUdFTigxMSksIFwK
LQkuZGRiX3NpemUgPSAyMDQ4LCBcCi0JLm51bV9zdXBwb3J0ZWRfZGJ1Zl9zbGljZXMgPSAyLCBc
CisJLmRidWYuc2l6ZSA9IDIwNDgsIFwKKwkuZGJ1Zi5udW1fc2xpY2VzID0gMiwgXAogCS5oYXNf
bG9naWNhbF9yaW5nX2Vsc3EgPSAxLCBcCiAJLmNvbG9yID0geyAuZGVnYW1tYV9sdXRfc2l6ZSA9
IDMzLCAuZ2FtbWFfbHV0X3NpemUgPSAyNjIxNDUgfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfZGV2aWNlX2luZm8uaAppbmRleCA4YWI0ZmE2YzdmZGQuLjc0NTkxZTRmOWM0NCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5oCkBAIC0xOTYsOCArMTk2LDEwIEBA
IHN0cnVjdCBpbnRlbF9kZXZpY2VfaW5mbyB7CiAjdW5kZWYgREVGSU5FX0ZMQUcKIAl9IGRpc3Bs
YXk7CiAKLQl1MTYgZGRiX3NpemU7IC8qIGluIGJsb2NrcyAqLwotCXU4IG51bV9zdXBwb3J0ZWRf
ZGJ1Zl9zbGljZXM7IC8qIG51bWJlciBvZiBEQnVmIHNsaWNlcyAqLworCXN0cnVjdCB7CisJCXUx
NiBzaXplOyAvKiBpbiBibG9ja3MgKi8KKwkJdTggbnVtX3NsaWNlczsKKwl9IGRidWY7CiAKIAkv
KiBSZWdpc3RlciBvZmZzZXRzIGZvciB0aGUgdmFyaW91cyBkaXNwbGF5IHBpcGVzIGFuZCB0cmFu
c2NvZGVycyAqLwogCWludCBwaXBlX29mZnNldHNbSTkxNV9NQVhfVFJBTlNDT0RFUlNdOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2ludGVsX3BtLmMKaW5kZXggZWFmNGMwNzJhZGUwLi5jZWQxZWIzMmNiNzggMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfcG0uYwpAQCAtMzYzNywxMCArMzYzNywxMCBAQCBib29sIGlsa19kaXNh
YmxlX2xwX3dtKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIHU4IGludGVsX2Vu
YWJsZWRfZGJ1Zl9zbGljZXNfbWFzayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYp
CiB7CiAJaW50IGk7Ci0JaW50IG1heF9zbGljZXMgPSBJTlRFTF9JTkZPKGRldl9wcml2KS0+bnVt
X3N1cHBvcnRlZF9kYnVmX3NsaWNlczsKKwlpbnQgbnVtX3NsaWNlcyA9IElOVEVMX0lORk8oZGV2
X3ByaXYpLT5kYnVmLm51bV9zbGljZXM7CiAJdTggZW5hYmxlZF9zbGljZXNfbWFzayA9IDA7CiAK
LQlmb3IgKGkgPSAwOyBpIDwgbWF4X3NsaWNlczsgaSsrKSB7CisJZm9yIChpID0gMDsgaSA8IG51
bV9zbGljZXM7IGkrKykgewogCQlpZiAoaW50ZWxfdW5jb3JlX3JlYWQoJmRldl9wcml2LT51bmNv
cmUsIERCVUZfQ1RMX1MoaSkpICYgREJVRl9QT1dFUl9TVEFURSkKIAkJCWVuYWJsZWRfc2xpY2Vz
X21hc2sgfD0gQklUKGkpOwogCX0KQEAgLTQwMzAsNyArNDAzMCw3IEBAIHN0YXRpYyBpbnQgaW50
ZWxfY29tcHV0ZV9zYWd2X21hc2soc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCiAK
IHN0YXRpYyBpbnQgaW50ZWxfZGJ1Zl9zaXplKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdikKIHsKLQlpbnQgZGRiX3NpemUgPSBJTlRFTF9JTkZPKGRldl9wcml2KS0+ZGRiX3NpemU7
CisJaW50IGRkYl9zaXplID0gSU5URUxfSU5GTyhkZXZfcHJpdiktPmRidWYuc2l6ZTsKIAogCWRy
bV9XQVJOX09OKCZkZXZfcHJpdi0+ZHJtLCBkZGJfc2l6ZSA9PSAwKTsKIApAQCAtNDA0Myw3ICs0
MDQzLDcgQEAgc3RhdGljIGludCBpbnRlbF9kYnVmX3NpemUoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2KQogc3RhdGljIGludCBpbnRlbF9kYnVmX3NsaWNlX3NpemUoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogewogCXJldHVybiBpbnRlbF9kYnVmX3NpemUoZGV2
X3ByaXYpIC8KLQkJSU5URUxfSU5GTyhkZXZfcHJpdiktPm51bV9zdXBwb3J0ZWRfZGJ1Zl9zbGlj
ZXM7CisJCUlOVEVMX0lORk8oZGV2X3ByaXYpLT5kYnVmLm51bV9zbGljZXM7CiB9CiAKIHN0YXRp
YyB2b2lkCkBAIC00MDcwLDggKzQwNzAsOCBAQCB1MzIgc2tsX2RkYl9kYnVmX3NsaWNlX21hc2so
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogewogCXUzMiBzbGljZV9tYXNrID0g
MDsKIAl1MTYgZGRiX3NpemUgPSBpbnRlbF9kYnVmX3NpemUoZGV2X3ByaXYpOwotCXUxNiBudW1f
c3VwcG9ydGVkX3NsaWNlcyA9IElOVEVMX0lORk8oZGV2X3ByaXYpLT5udW1fc3VwcG9ydGVkX2Ri
dWZfc2xpY2VzOwotCXUxNiBzbGljZV9zaXplID0gZGRiX3NpemUgLyBudW1fc3VwcG9ydGVkX3Ns
aWNlczsKKwlpbnQgbnVtX3NsaWNlcyA9IElOVEVMX0lORk8oZGV2X3ByaXYpLT5kYnVmLm51bV9z
bGljZXM7CisJdTE2IHNsaWNlX3NpemUgPSBkZGJfc2l6ZSAvIG51bV9zbGljZXM7CiAJdTE2IHN0
YXJ0X3NsaWNlOwogCXUxNiBlbmRfc2xpY2U7CiAKQEAgLTU4MjgsNyArNTgyOCw3IEBAIHNrbF9j
b21wdXRlX2RkYihzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIAkJCSAgICAiRW5h
YmxlZCBkYnVmIHNsaWNlcyAweCV4IC0+IDB4JXggKG91dCBvZiAlZCBkYnVmIHNsaWNlcylcbiIs
CiAJCQkgICAgb2xkX2RidWZfc3RhdGUtPmVuYWJsZWRfc2xpY2VzLAogCQkJICAgIG5ld19kYnVm
X3N0YXRlLT5lbmFibGVkX3NsaWNlcywKLQkJCSAgICBJTlRFTF9JTkZPKGRldl9wcml2KS0+bnVt
X3N1cHBvcnRlZF9kYnVmX3NsaWNlcyk7CisJCQkgICAgSU5URUxfSU5GTyhkZXZfcHJpdiktPmRi
dWYubnVtX3NsaWNlcyk7CiAJfQogCiAJZm9yX2VhY2hfbmV3X2ludGVsX2NydGNfaW5fc3RhdGUo
c3RhdGUsIGNydGMsIG5ld19jcnRjX3N0YXRlLCBpKSB7Ci0tIAoyLjI2LjMKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxp
c3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

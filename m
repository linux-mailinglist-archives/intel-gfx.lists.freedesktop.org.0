Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A0D711430FD
	for <lists+intel-gfx@lfdr.de>; Mon, 20 Jan 2020 18:47:57 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EEEAF6EA55;
	Mon, 20 Jan 2020 17:47:55 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4D3E86EAA9
 for <intel-gfx@lists.freedesktop.org>; Mon, 20 Jan 2020 17:47:52 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Jan 2020 09:47:51 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,342,1574150400"; d="scan'208";a="220725439"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by fmsmga007.fm.intel.com with SMTP; 20 Jan 2020 09:47:48 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Mon, 20 Jan 2020 19:47:49 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 20 Jan 2020 19:47:17 +0200
Message-Id: <20200120174728.21095-8-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200120174728.21095-1-ville.syrjala@linux.intel.com>
References: <20200120174728.21095-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 07/17] drm/i915: s/cdclk_state/cdclk_config/
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkkg
d2FudCB0byBoYXZlIGEgaGlnaGVyIGxldmVsIGNkY2xrIHN0YXRlIG9iamVjdCBzbyBsZXQncyBy
ZW5hbWUKdGhlIGN1cnJlbnQgbG93ZXIgbGV2ZWwgdGhpbmcgdG8gY2RjbGtfY29uZmlnIChiZWNh
dXNlIEkgbGFjawppbWFnaW5hdGlvbikuCgpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6Qg
PHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfY2RjbGsuYyAgICB8IDQyNiArKysrKysrKystLS0tLS0tLS0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY2RjbGsuaCAgICB8ICAxOCArLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgIHwgICAyICstCiAuLi4vZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMgICAgfCAgIDggKy0KIC4uLi9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCAgICB8ICAxNCArLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgICAgICAgICAgIHwgIDIwICstCiA2IGZpbGVzIGNo
YW5nZWQsIDI0NiBpbnNlcnRpb25zKCspLCAyNDIgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jZGNsay5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jZGNsay5jCmluZGV4IDlkNGNmNDEyYjY1ZC4uMmE1NDkx
ZWI4YWYzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Nk
Y2xrLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jZGNsay5jCkBA
IC01NSw0MyArNTUsNDMgQEAKICAqLwogCiBzdGF0aWMgdm9pZCBmaXhlZF8xMzNtaHpfZ2V0X2Nk
Y2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJCQkgICBzdHJ1Y3QgaW50
ZWxfY2RjbGtfc3RhdGUgKmNkY2xrX3N0YXRlKQorCQkJCSAgIHN0cnVjdCBpbnRlbF9jZGNsa19j
b25maWcgKmNkY2xrX2NvbmZpZykKIHsKLQljZGNsa19zdGF0ZS0+Y2RjbGsgPSAxMzMzMzM7CisJ
Y2RjbGtfY29uZmlnLT5jZGNsayA9IDEzMzMzMzsKIH0KIAogc3RhdGljIHZvaWQgZml4ZWRfMjAw
bWh6X2dldF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkJICAg
c3RydWN0IGludGVsX2NkY2xrX3N0YXRlICpjZGNsa19zdGF0ZSkKKwkJCQkgICBzdHJ1Y3QgaW50
ZWxfY2RjbGtfY29uZmlnICpjZGNsa19jb25maWcpCiB7Ci0JY2RjbGtfc3RhdGUtPmNkY2xrID0g
MjAwMDAwOworCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSAyMDAwMDA7CiB9CiAKIHN0YXRpYyB2b2lk
IGZpeGVkXzI2Nm1oel9nZXRfY2RjbGsoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
LAotCQkJCSAgIHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAqY2RjbGtfc3RhdGUpCisJCQkJICAg
c3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyAqY2RjbGtfY29uZmlnKQogewotCWNkY2xrX3N0YXRl
LT5jZGNsayA9IDI2NjY2NzsKKwljZGNsa19jb25maWctPmNkY2xrID0gMjY2NjY3OwogfQogCiBz
dGF0aWMgdm9pZCBmaXhlZF8zMzNtaHpfZ2V0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiwKLQkJCQkgICBzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgKmNkY2xrX3N0YXRl
KQorCQkJCSAgIHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgKmNkY2xrX2NvbmZpZykKIHsKLQlj
ZGNsa19zdGF0ZS0+Y2RjbGsgPSAzMzMzMzM7CisJY2RjbGtfY29uZmlnLT5jZGNsayA9IDMzMzMz
MzsKIH0KIAogc3RhdGljIHZvaWQgZml4ZWRfNDAwbWh6X2dldF9jZGNsayhzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkJICAgc3RydWN0IGludGVsX2NkY2xrX3N0YXRlICpj
ZGNsa19zdGF0ZSkKKwkJCQkgICBzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnICpjZGNsa19jb25m
aWcpCiB7Ci0JY2RjbGtfc3RhdGUtPmNkY2xrID0gNDAwMDAwOworCWNkY2xrX2NvbmZpZy0+Y2Rj
bGsgPSA0MDAwMDA7CiB9CiAKIHN0YXRpYyB2b2lkIGZpeGVkXzQ1MG1oel9nZXRfY2RjbGsoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAotCQkJCSAgIHN0cnVjdCBpbnRlbF9jZGNs
a19zdGF0ZSAqY2RjbGtfc3RhdGUpCisJCQkJICAgc3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyAq
Y2RjbGtfY29uZmlnKQogewotCWNkY2xrX3N0YXRlLT5jZGNsayA9IDQ1MDAwMDsKKwljZGNsa19j
b25maWctPmNkY2xrID0gNDUwMDAwOwogfQogCiBzdGF0aWMgdm9pZCBpODV4X2dldF9jZGNsayhz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgICBzdHJ1Y3QgaW50ZWxfY2Rj
bGtfc3RhdGUgKmNkY2xrX3N0YXRlKQorCQkJICAgc3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyAq
Y2RjbGtfY29uZmlnKQogewogCXN0cnVjdCBwY2lfZGV2ICpwZGV2ID0gZGV2X3ByaXYtPmRybS5w
ZGV2OwogCXUxNiBocGxsY2MgPSAwOwpAQCAtMTAyLDcgKzEwMiw3IEBAIHN0YXRpYyB2b2lkIGk4
NXhfZ2V0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkgKiBGSVhN
RSBpcyB0aGlzIHRoZSByaWdodCB3YXkgdG8gZGV0ZWN0IDg1MkdNLzg1MkdNVj8KIAkgKi8KIAlp
ZiAocGRldi0+cmV2aXNpb24gPT0gMHgxKSB7Ci0JCWNkY2xrX3N0YXRlLT5jZGNsayA9IDEzMzMz
MzsKKwkJY2RjbGtfY29uZmlnLT5jZGNsayA9IDEzMzMzMzsKIAkJcmV0dXJuOwogCX0KIApAQCAt
MTE2LDI0ICsxMTYsMjQgQEAgc3RhdGljIHZvaWQgaTg1eF9nZXRfY2RjbGsoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2LAogCWNhc2UgR0NfQ0xPQ0tfMTMzXzIwMDoKIAljYXNlIEdD
X0NMT0NLXzEzM18yMDBfMjoKIAljYXNlIEdDX0NMT0NLXzEwMF8yMDA6Ci0JCWNkY2xrX3N0YXRl
LT5jZGNsayA9IDIwMDAwMDsKKwkJY2RjbGtfY29uZmlnLT5jZGNsayA9IDIwMDAwMDsKIAkJYnJl
YWs7CiAJY2FzZSBHQ19DTE9DS18xNjZfMjUwOgotCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSAyNTAw
MDA7CisJCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSAyNTAwMDA7CiAJCWJyZWFrOwogCWNhc2UgR0Nf
Q0xPQ0tfMTAwXzEzMzoKLQkJY2RjbGtfc3RhdGUtPmNkY2xrID0gMTMzMzMzOworCQljZGNsa19j
b25maWctPmNkY2xrID0gMTMzMzMzOwogCQlicmVhazsKIAljYXNlIEdDX0NMT0NLXzEzM18yNjY6
CiAJY2FzZSBHQ19DTE9DS18xMzNfMjY2XzI6CiAJY2FzZSBHQ19DTE9DS18xNjZfMjY2OgotCQlj
ZGNsa19zdGF0ZS0+Y2RjbGsgPSAyNjY2Njc7CisJCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSAyNjY2
Njc7CiAJCWJyZWFrOwogCX0KIH0KIAogc3RhdGljIHZvaWQgaTkxNWdtX2dldF9jZGNsayhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgICAgIHN0cnVjdCBpbnRlbF9jZGNs
a19zdGF0ZSAqY2RjbGtfc3RhdGUpCisJCQkgICAgIHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcg
KmNkY2xrX2NvbmZpZykKIHsKIAlzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IGRldl9wcml2LT5kcm0u
cGRldjsKIAl1MTYgZ2NmZ2MgPSAwOwpAQCAtMTQxLDIzICsxNDEsMjMgQEAgc3RhdGljIHZvaWQg
aTkxNWdtX2dldF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJcGNp
X3JlYWRfY29uZmlnX3dvcmQocGRldiwgR0NGR0MsICZnY2ZnYyk7CiAKIAlpZiAoZ2NmZ2MgJiBH
Q19MT1dfRlJFUVVFTkNZX0VOQUJMRSkgewotCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSAxMzMzMzM7
CisJCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSAxMzMzMzM7CiAJCXJldHVybjsKIAl9CiAKIAlzd2l0
Y2ggKGdjZmdjICYgR0NfRElTUExBWV9DTE9DS19NQVNLKSB7CiAJY2FzZSBHQ19ESVNQTEFZX0NM
T0NLXzMzM18zMjBfTUhaOgotCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSAzMzMzMzM7CisJCWNkY2xr
X2NvbmZpZy0+Y2RjbGsgPSAzMzMzMzM7CiAJCWJyZWFrOwogCWRlZmF1bHQ6CiAJY2FzZSBHQ19E
SVNQTEFZX0NMT0NLXzE5MF8yMDBfTUhaOgotCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSAxOTAwMDA7
CisJCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSAxOTAwMDA7CiAJCWJyZWFrOwogCX0KIH0KIAogc3Rh
dGljIHZvaWQgaTk0NWdtX2dldF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsCi0JCQkgICAgIHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAqY2RjbGtfc3RhdGUpCisJCQkg
ICAgIHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgKmNkY2xrX2NvbmZpZykKIHsKIAlzdHJ1Y3Qg
cGNpX2RldiAqcGRldiA9IGRldl9wcml2LT5kcm0ucGRldjsKIAl1MTYgZ2NmZ2MgPSAwOwpAQCAt
MTY1LDE3ICsxNjUsMTcgQEAgc3RhdGljIHZvaWQgaTk0NWdtX2dldF9jZGNsayhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJcGNpX3JlYWRfY29uZmlnX3dvcmQocGRldiwgR0NG
R0MsICZnY2ZnYyk7CiAKIAlpZiAoZ2NmZ2MgJiBHQ19MT1dfRlJFUVVFTkNZX0VOQUJMRSkgewot
CQljZGNsa19zdGF0ZS0+Y2RjbGsgPSAxMzMzMzM7CisJCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSAx
MzMzMzM7CiAJCXJldHVybjsKIAl9CiAKIAlzd2l0Y2ggKGdjZmdjICYgR0NfRElTUExBWV9DTE9D
S19NQVNLKSB7CiAJY2FzZSBHQ19ESVNQTEFZX0NMT0NLXzMzM18zMjBfTUhaOgotCQljZGNsa19z
dGF0ZS0+Y2RjbGsgPSAzMjAwMDA7CisJCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSAzMjAwMDA7CiAJ
CWJyZWFrOwogCWRlZmF1bHQ6CiAJY2FzZSBHQ19ESVNQTEFZX0NMT0NLXzE5MF8yMDBfTUhaOgot
CQljZGNsa19zdGF0ZS0+Y2RjbGsgPSAyMDAwMDA7CisJCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSAy
MDAwMDA7CiAJCWJyZWFrOwogCX0KIH0KQEAgLTI1MCw3ICsyNTAsNyBAQCBzdGF0aWMgdW5zaWdu
ZWQgaW50IGludGVsX2hwbGxfdmNvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikK
IH0KIAogc3RhdGljIHZvaWQgZzMzX2dldF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYsCi0JCQkgIHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAqY2RjbGtfc3RhdGUpCisJ
CQkgIHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgKmNkY2xrX2NvbmZpZykKIHsKIAlzdHJ1Y3Qg
cGNpX2RldiAqcGRldiA9IGRldl9wcml2LT5kcm0ucGRldjsKIAlzdGF0aWMgY29uc3QgdTggZGl2
XzMyMDBbXSA9IHsgMTIsIDEwLCAgOCwgIDcsIDUsIDE2IH07CkBAIC0yNjEsNyArMjYxLDcgQEAg
c3RhdGljIHZvaWQgZzMzX2dldF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsCiAJdW5zaWduZWQgaW50IGNkY2xrX3NlbDsKIAl1MTYgdG1wID0gMDsKIAotCWNkY2xrX3N0
YXRlLT52Y28gPSBpbnRlbF9ocGxsX3ZjbyhkZXZfcHJpdik7CisJY2RjbGtfY29uZmlnLT52Y28g
PSBpbnRlbF9ocGxsX3ZjbyhkZXZfcHJpdik7CiAKIAlwY2lfcmVhZF9jb25maWdfd29yZChwZGV2
LCBHQ0ZHQywgJnRtcCk7CiAKQEAgLTI3MCw3ICsyNzAsNyBAQCBzdGF0aWMgdm9pZCBnMzNfZ2V0
X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAlpZiAoY2RjbGtfc2Vs
ID49IEFSUkFZX1NJWkUoZGl2XzMyMDApKQogCQlnb3RvIGZhaWw7CiAKLQlzd2l0Y2ggKGNkY2xr
X3N0YXRlLT52Y28pIHsKKwlzd2l0Y2ggKGNkY2xrX2NvbmZpZy0+dmNvKSB7CiAJY2FzZSAzMjAw
MDAwOgogCQlkaXZfdGFibGUgPSBkaXZfMzIwMDsKIAkJYnJlYWs7CkBAIC0yODcsMTggKzI4Nywx
OCBAQCBzdGF0aWMgdm9pZCBnMzNfZ2V0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiwKIAkJZ290byBmYWlsOwogCX0KIAotCWNkY2xrX3N0YXRlLT5jZGNsayA9IERJVl9S
T1VORF9DTE9TRVNUKGNkY2xrX3N0YXRlLT52Y28sCi0JCQkJCSAgICAgICBkaXZfdGFibGVbY2Rj
bGtfc2VsXSk7CisJY2RjbGtfY29uZmlnLT5jZGNsayA9IERJVl9ST1VORF9DTE9TRVNUKGNkY2xr
X2NvbmZpZy0+dmNvLAorCQkJCQkJZGl2X3RhYmxlW2NkY2xrX3NlbF0pOwogCXJldHVybjsKIAog
ZmFpbDoKIAlEUk1fRVJST1IoIlVuYWJsZSB0byBkZXRlcm1pbmUgQ0RDTEsuIEhQTEwgVkNPPSV1
IGtIeiwgQ0ZHQz0weCUwOHhcbiIsCi0JCSAgY2RjbGtfc3RhdGUtPnZjbywgdG1wKTsKLQljZGNs
a19zdGF0ZS0+Y2RjbGsgPSAxOTA0NzY7CisJCSAgY2RjbGtfY29uZmlnLT52Y28sIHRtcCk7CisJ
Y2RjbGtfY29uZmlnLT5jZGNsayA9IDE5MDQ3NjsKIH0KIAogc3RhdGljIHZvaWQgcG52X2dldF9j
ZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgIHN0cnVjdCBpbnRl
bF9jZGNsa19zdGF0ZSAqY2RjbGtfc3RhdGUpCisJCQkgIHN0cnVjdCBpbnRlbF9jZGNsa19jb25m
aWcgKmNkY2xrX2NvbmZpZykKIHsKIAlzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IGRldl9wcml2LT5k
cm0ucGRldjsKIAl1MTYgZ2NmZ2MgPSAwOwpAQCAtMzA3LDMxICszMDcsMzEgQEAgc3RhdGljIHZv
aWQgcG52X2dldF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAKIAlz
d2l0Y2ggKGdjZmdjICYgR0NfRElTUExBWV9DTE9DS19NQVNLKSB7CiAJY2FzZSBHQ19ESVNQTEFZ
X0NMT0NLXzI2N19NSFpfUE5WOgotCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSAyNjY2Njc7CisJCWNk
Y2xrX2NvbmZpZy0+Y2RjbGsgPSAyNjY2Njc7CiAJCWJyZWFrOwogCWNhc2UgR0NfRElTUExBWV9D
TE9DS18zMzNfTUhaX1BOVjoKLQkJY2RjbGtfc3RhdGUtPmNkY2xrID0gMzMzMzMzOworCQljZGNs
a19jb25maWctPmNkY2xrID0gMzMzMzMzOwogCQlicmVhazsKIAljYXNlIEdDX0RJU1BMQVlfQ0xP
Q0tfNDQ0X01IWl9QTlY6Ci0JCWNkY2xrX3N0YXRlLT5jZGNsayA9IDQ0NDQ0NDsKKwkJY2RjbGtf
Y29uZmlnLT5jZGNsayA9IDQ0NDQ0NDsKIAkJYnJlYWs7CiAJY2FzZSBHQ19ESVNQTEFZX0NMT0NL
XzIwMF9NSFpfUE5WOgotCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSAyMDAwMDA7CisJCWNkY2xrX2Nv
bmZpZy0+Y2RjbGsgPSAyMDAwMDA7CiAJCWJyZWFrOwogCWRlZmF1bHQ6CiAJCURSTV9FUlJPUigi
VW5rbm93biBwbnYgZGlzcGxheSBjb3JlIGNsb2NrIDB4JTA0eFxuIiwgZ2NmZ2MpOwogCQkvKiBm
YWxsIHRocm91Z2ggKi8KIAljYXNlIEdDX0RJU1BMQVlfQ0xPQ0tfMTMzX01IWl9QTlY6Ci0JCWNk
Y2xrX3N0YXRlLT5jZGNsayA9IDEzMzMzMzsKKwkJY2RjbGtfY29uZmlnLT5jZGNsayA9IDEzMzMz
MzsKIAkJYnJlYWs7CiAJY2FzZSBHQ19ESVNQTEFZX0NMT0NLXzE2N19NSFpfUE5WOgotCQljZGNs
a19zdGF0ZS0+Y2RjbGsgPSAxNjY2Njc7CisJCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSAxNjY2Njc7
CiAJCWJyZWFrOwogCX0KIH0KIAogc3RhdGljIHZvaWQgaTk2NWdtX2dldF9jZGNsayhzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgICAgIHN0cnVjdCBpbnRlbF9jZGNsa19z
dGF0ZSAqY2RjbGtfc3RhdGUpCisJCQkgICAgIHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgKmNk
Y2xrX2NvbmZpZykKIHsKIAlzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IGRldl9wcml2LT5kcm0ucGRl
djsKIAlzdGF0aWMgY29uc3QgdTggZGl2XzMyMDBbXSA9IHsgMTYsIDEwLCAgOCB9OwpAQCAtMzQx
LDcgKzM0MSw3IEBAIHN0YXRpYyB2b2lkIGk5NjVnbV9nZXRfY2RjbGsoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2LAogCXVuc2lnbmVkIGludCBjZGNsa19zZWw7CiAJdTE2IHRtcCA9
IDA7CiAKLQljZGNsa19zdGF0ZS0+dmNvID0gaW50ZWxfaHBsbF92Y28oZGV2X3ByaXYpOworCWNk
Y2xrX2NvbmZpZy0+dmNvID0gaW50ZWxfaHBsbF92Y28oZGV2X3ByaXYpOwogCiAJcGNpX3JlYWRf
Y29uZmlnX3dvcmQocGRldiwgR0NGR0MsICZ0bXApOwogCkBAIC0zNTAsNyArMzUwLDcgQEAgc3Rh
dGljIHZvaWQgaTk2NWdtX2dldF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsCiAJaWYgKGNkY2xrX3NlbCA+PSBBUlJBWV9TSVpFKGRpdl8zMjAwKSkKIAkJZ290byBmYWls
OwogCi0Jc3dpdGNoIChjZGNsa19zdGF0ZS0+dmNvKSB7CisJc3dpdGNoIChjZGNsa19jb25maWct
PnZjbykgewogCWNhc2UgMzIwMDAwMDoKIAkJZGl2X3RhYmxlID0gZGl2XzMyMDA7CiAJCWJyZWFr
OwpAQCAtMzY0LDYyICszNjQsNjIgQEAgc3RhdGljIHZvaWQgaTk2NWdtX2dldF9jZGNsayhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCWdvdG8gZmFpbDsKIAl9CiAKLQljZGNs
a19zdGF0ZS0+Y2RjbGsgPSBESVZfUk9VTkRfQ0xPU0VTVChjZGNsa19zdGF0ZS0+dmNvLAotCQkJ
CQkgICAgICAgZGl2X3RhYmxlW2NkY2xrX3NlbF0pOworCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSBE
SVZfUk9VTkRfQ0xPU0VTVChjZGNsa19jb25maWctPnZjbywKKwkJCQkJCWRpdl90YWJsZVtjZGNs
a19zZWxdKTsKIAlyZXR1cm47CiAKIGZhaWw6CiAJRFJNX0VSUk9SKCJVbmFibGUgdG8gZGV0ZXJt
aW5lIENEQ0xLLiBIUExMIFZDTz0ldSBrSHosIENGR0M9MHglMDR4XG4iLAotCQkgIGNkY2xrX3N0
YXRlLT52Y28sIHRtcCk7Ci0JY2RjbGtfc3RhdGUtPmNkY2xrID0gMjAwMDAwOworCQkgIGNkY2xr
X2NvbmZpZy0+dmNvLCB0bXApOworCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSAyMDAwMDA7CiB9CiAK
IHN0YXRpYyB2b2lkIGdtNDVfZ2V0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiwKLQkJCSAgIHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAqY2RjbGtfc3RhdGUpCisJCQkg
ICBzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnICpjZGNsa19jb25maWcpCiB7CiAJc3RydWN0IHBj
aV9kZXYgKnBkZXYgPSBkZXZfcHJpdi0+ZHJtLnBkZXY7CiAJdW5zaWduZWQgaW50IGNkY2xrX3Nl
bDsKIAl1MTYgdG1wID0gMDsKIAotCWNkY2xrX3N0YXRlLT52Y28gPSBpbnRlbF9ocGxsX3Zjbyhk
ZXZfcHJpdik7CisJY2RjbGtfY29uZmlnLT52Y28gPSBpbnRlbF9ocGxsX3ZjbyhkZXZfcHJpdik7
CiAKIAlwY2lfcmVhZF9jb25maWdfd29yZChwZGV2LCBHQ0ZHQywgJnRtcCk7CiAKIAljZGNsa19z
ZWwgPSAodG1wID4+IDEyKSAmIDB4MTsKIAotCXN3aXRjaCAoY2RjbGtfc3RhdGUtPnZjbykgewor
CXN3aXRjaCAoY2RjbGtfY29uZmlnLT52Y28pIHsKIAljYXNlIDI2NjY2Njc6CiAJY2FzZSA0MDAw
MDAwOgogCWNhc2UgNTMzMzMzMzoKLQkJY2RjbGtfc3RhdGUtPmNkY2xrID0gY2RjbGtfc2VsID8g
MzMzMzMzIDogMjIyMjIyOworCQljZGNsa19jb25maWctPmNkY2xrID0gY2RjbGtfc2VsID8gMzMz
MzMzIDogMjIyMjIyOwogCQlicmVhazsKIAljYXNlIDMyMDAwMDA6Ci0JCWNkY2xrX3N0YXRlLT5j
ZGNsayA9IGNkY2xrX3NlbCA/IDMyMDAwMCA6IDIyODU3MTsKKwkJY2RjbGtfY29uZmlnLT5jZGNs
ayA9IGNkY2xrX3NlbCA/IDMyMDAwMCA6IDIyODU3MTsKIAkJYnJlYWs7CiAJZGVmYXVsdDoKIAkJ
RFJNX0VSUk9SKCJVbmFibGUgdG8gZGV0ZXJtaW5lIENEQ0xLLiBIUExMIFZDTz0ldSwgQ0ZHQz0w
eCUwNHhcbiIsCi0JCQkgIGNkY2xrX3N0YXRlLT52Y28sIHRtcCk7Ci0JCWNkY2xrX3N0YXRlLT5j
ZGNsayA9IDIyMjIyMjsKKwkJCSAgY2RjbGtfY29uZmlnLT52Y28sIHRtcCk7CisJCWNkY2xrX2Nv
bmZpZy0+Y2RjbGsgPSAyMjIyMjI7CiAJCWJyZWFrOwogCX0KIH0KIAogc3RhdGljIHZvaWQgaHN3
X2dldF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgIHN0cnVj
dCBpbnRlbF9jZGNsa19zdGF0ZSAqY2RjbGtfc3RhdGUpCisJCQkgIHN0cnVjdCBpbnRlbF9jZGNs
a19jb25maWcgKmNkY2xrX2NvbmZpZykKIHsKIAl1MzIgbGNwbGwgPSBJOTE1X1JFQUQoTENQTExf
Q1RMKTsKIAl1MzIgZnJlcSA9IGxjcGxsICYgTENQTExfQ0xLX0ZSRVFfTUFTSzsKIAogCWlmIChs
Y3BsbCAmIExDUExMX0NEX1NPVVJDRV9GQ0xLKQotCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSA4MDAw
MDA7CisJCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSA4MDAwMDA7CiAJZWxzZSBpZiAoSTkxNV9SRUFE
KEZVU0VfU1RSQVApICYgSFNXX0NEQ0xLX0xJTUlUKQotCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSA0
NTAwMDA7CisJCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSA0NTAwMDA7CiAJZWxzZSBpZiAoZnJlcSA9
PSBMQ1BMTF9DTEtfRlJFUV80NTApCi0JCWNkY2xrX3N0YXRlLT5jZGNsayA9IDQ1MDAwMDsKKwkJ
Y2RjbGtfY29uZmlnLT5jZGNsayA9IDQ1MDAwMDsKIAllbHNlIGlmIChJU19IU1dfVUxUKGRldl9w
cml2KSkKLQkJY2RjbGtfc3RhdGUtPmNkY2xrID0gMzM3NTAwOworCQljZGNsa19jb25maWctPmNk
Y2xrID0gMzM3NTAwOwogCWVsc2UKLQkJY2RjbGtfc3RhdGUtPmNkY2xrID0gNTQwMDAwOworCQlj
ZGNsa19jb25maWctPmNkY2xrID0gNTQwMDAwOwogfQogCiBzdGF0aWMgaW50IHZsdl9jYWxjX2Nk
Y2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgaW50IG1pbl9jZGNsaykKQEAg
LTQ2MiwxNyArNDYyLDE3IEBAIHN0YXRpYyB1OCB2bHZfY2FsY192b2x0YWdlX2xldmVsKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgaW50IGNkY2xrKQogfQogCiBzdGF0aWMgdm9p
ZCB2bHZfZ2V0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJCSAg
c3RydWN0IGludGVsX2NkY2xrX3N0YXRlICpjZGNsa19zdGF0ZSkKKwkJCSAgc3RydWN0IGludGVs
X2NkY2xrX2NvbmZpZyAqY2RjbGtfY29uZmlnKQogewogCXUzMiB2YWw7CiAKIAl2bHZfaW9zZl9z
Yl9nZXQoZGV2X3ByaXYsCiAJCQlCSVQoVkxWX0lPU0ZfU0JfQ0NLKSB8IEJJVChWTFZfSU9TRl9T
Ql9QVU5JVCkpOwogCi0JY2RjbGtfc3RhdGUtPnZjbyA9IHZsdl9nZXRfaHBsbF92Y28oZGV2X3By
aXYpOwotCWNkY2xrX3N0YXRlLT5jZGNsayA9IHZsdl9nZXRfY2NrX2Nsb2NrKGRldl9wcml2LCAi
Y2RjbGsiLAotCQkJCQkgICAgICAgQ0NLX0RJU1BMQVlfQ0xPQ0tfQ09OVFJPTCwKLQkJCQkJICAg
ICAgIGNkY2xrX3N0YXRlLT52Y28pOworCWNkY2xrX2NvbmZpZy0+dmNvID0gdmx2X2dldF9ocGxs
X3ZjbyhkZXZfcHJpdik7CisJY2RjbGtfY29uZmlnLT5jZGNsayA9IHZsdl9nZXRfY2NrX2Nsb2Nr
KGRldl9wcml2LCAiY2RjbGsiLAorCQkJCQkJQ0NLX0RJU1BMQVlfQ0xPQ0tfQ09OVFJPTCwKKwkJ
CQkJCWNkY2xrX2NvbmZpZy0+dmNvKTsKIAogCXZhbCA9IHZsdl9wdW5pdF9yZWFkKGRldl9wcml2
LCBQVU5JVF9SRUdfRFNQU1NQTSk7CiAKQEAgLTQ4MCwxMCArNDgwLDEwIEBAIHN0YXRpYyB2b2lk
IHZsdl9nZXRfY2RjbGsoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJQklU
KFZMVl9JT1NGX1NCX0NDSykgfCBCSVQoVkxWX0lPU0ZfU0JfUFVOSVQpKTsKIAogCWlmIChJU19W
QUxMRVlWSUVXKGRldl9wcml2KSkKLQkJY2RjbGtfc3RhdGUtPnZvbHRhZ2VfbGV2ZWwgPSAodmFs
ICYgRFNQRlJFUUdVQVJfTUFTSykgPj4KKwkJY2RjbGtfY29uZmlnLT52b2x0YWdlX2xldmVsID0g
KHZhbCAmIERTUEZSRVFHVUFSX01BU0spID4+CiAJCQlEU1BGUkVRR1VBUl9TSElGVDsKIAllbHNl
Ci0JCWNkY2xrX3N0YXRlLT52b2x0YWdlX2xldmVsID0gKHZhbCAmIERTUEZSRVFHVUFSX01BU0tf
Q0hWKSA+PgorCQljZGNsa19jb25maWctPnZvbHRhZ2VfbGV2ZWwgPSAodmFsICYgRFNQRlJFUUdV
QVJfTUFTS19DSFYpID4+CiAJCQlEU1BGUkVRR1VBUl9TSElGVF9DSFY7CiB9CiAKQEAgLTUyNCwx
MSArNTI0LDExIEBAIHN0YXRpYyB2b2lkIHZsdl9wcm9ncmFtX3BmaV9jcmVkaXRzKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIH0KIAogc3RhdGljIHZvaWQgdmx2X3NldF9jZGNs
ayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgIGNvbnN0IHN0cnVjdCBp
bnRlbF9jZGNsa19zdGF0ZSAqY2RjbGtfc3RhdGUsCisJCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9j
ZGNsa19jb25maWcgKmNkY2xrX2NvbmZpZywKIAkJCSAgZW51bSBwaXBlIHBpcGUpCiB7Ci0JaW50
IGNkY2xrID0gY2RjbGtfc3RhdGUtPmNkY2xrOwotCXUzMiB2YWwsIGNtZCA9IGNkY2xrX3N0YXRl
LT52b2x0YWdlX2xldmVsOworCWludCBjZGNsayA9IGNkY2xrX2NvbmZpZy0+Y2RjbGs7CisJdTMy
IHZhbCwgY21kID0gY2RjbGtfY29uZmlnLT52b2x0YWdlX2xldmVsOwogCWludGVsX3dha2VyZWZf
dCB3YWtlcmVmOwogCiAJc3dpdGNoIChjZGNsaykgewpAQCAtNjExLDExICs2MTEsMTEgQEAgc3Rh
dGljIHZvaWQgdmx2X3NldF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYs
CiB9CiAKIHN0YXRpYyB2b2lkIGNodl9zZXRfY2RjbGsoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2LAotCQkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgKmNkY2xrX3N0
YXRlLAorCQkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnICpjZGNsa19jb25maWcs
CiAJCQkgIGVudW0gcGlwZSBwaXBlKQogewotCWludCBjZGNsayA9IGNkY2xrX3N0YXRlLT5jZGNs
azsKLQl1MzIgdmFsLCBjbWQgPSBjZGNsa19zdGF0ZS0+dm9sdGFnZV9sZXZlbDsKKwlpbnQgY2Rj
bGsgPSBjZGNsa19jb25maWctPmNkY2xrOworCXUzMiB2YWwsIGNtZCA9IGNkY2xrX2NvbmZpZy0+
dm9sdGFnZV9sZXZlbDsKIAlpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZjsKIAogCXN3aXRjaCAoY2Rj
bGspIHsKQEAgLTY4NSwzNyArNjg1LDM3IEBAIHN0YXRpYyB1OCBiZHdfY2FsY192b2x0YWdlX2xl
dmVsKGludCBjZGNsaykKIH0KIAogc3RhdGljIHZvaWQgYmR3X2dldF9jZGNsayhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgIHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAq
Y2RjbGtfc3RhdGUpCisJCQkgIHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgKmNkY2xrX2NvbmZp
ZykKIHsKIAl1MzIgbGNwbGwgPSBJOTE1X1JFQUQoTENQTExfQ1RMKTsKIAl1MzIgZnJlcSA9IGxj
cGxsICYgTENQTExfQ0xLX0ZSRVFfTUFTSzsKIAogCWlmIChsY3BsbCAmIExDUExMX0NEX1NPVVJD
RV9GQ0xLKQotCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSA4MDAwMDA7CisJCWNkY2xrX2NvbmZpZy0+
Y2RjbGsgPSA4MDAwMDA7CiAJZWxzZSBpZiAoSTkxNV9SRUFEKEZVU0VfU1RSQVApICYgSFNXX0NE
Q0xLX0xJTUlUKQotCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSA0NTAwMDA7CisJCWNkY2xrX2NvbmZp
Zy0+Y2RjbGsgPSA0NTAwMDA7CiAJZWxzZSBpZiAoZnJlcSA9PSBMQ1BMTF9DTEtfRlJFUV80NTAp
Ci0JCWNkY2xrX3N0YXRlLT5jZGNsayA9IDQ1MDAwMDsKKwkJY2RjbGtfY29uZmlnLT5jZGNsayA9
IDQ1MDAwMDsKIAllbHNlIGlmIChmcmVxID09IExDUExMX0NMS19GUkVRXzU0T19CRFcpCi0JCWNk
Y2xrX3N0YXRlLT5jZGNsayA9IDU0MDAwMDsKKwkJY2RjbGtfY29uZmlnLT5jZGNsayA9IDU0MDAw
MDsKIAllbHNlIGlmIChmcmVxID09IExDUExMX0NMS19GUkVRXzMzN181X0JEVykKLQkJY2RjbGtf
c3RhdGUtPmNkY2xrID0gMzM3NTAwOworCQljZGNsa19jb25maWctPmNkY2xrID0gMzM3NTAwOwog
CWVsc2UKLQkJY2RjbGtfc3RhdGUtPmNkY2xrID0gNjc1MDAwOworCQljZGNsa19jb25maWctPmNk
Y2xrID0gNjc1MDAwOwogCiAJLyoKIAkgKiBDYW4ndCByZWFkIHRoaXMgb3V0IDooIExldCdzIGFz
c3VtZSBpdCdzCiAJICogYXQgbGVhc3Qgd2hhdCB0aGUgQ0RDTEsgZnJlcXVlbmN5IHJlcXVpcmVz
LgogCSAqLwotCWNkY2xrX3N0YXRlLT52b2x0YWdlX2xldmVsID0KLQkJYmR3X2NhbGNfdm9sdGFn
ZV9sZXZlbChjZGNsa19zdGF0ZS0+Y2RjbGspOworCWNkY2xrX2NvbmZpZy0+dm9sdGFnZV9sZXZl
bCA9CisJCWJkd19jYWxjX3ZvbHRhZ2VfbGV2ZWwoY2RjbGtfY29uZmlnLT5jZGNsayk7CiB9CiAK
IHN0YXRpYyB2b2lkIGJkd19zZXRfY2RjbGsoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LAotCQkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgKmNkY2xrX3N0YXRlLAor
CQkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnICpjZGNsa19jb25maWcsCiAJCQkg
IGVudW0gcGlwZSBwaXBlKQogewotCWludCBjZGNsayA9IGNkY2xrX3N0YXRlLT5jZGNsazsKKwlp
bnQgY2RjbGsgPSBjZGNsa19jb25maWctPmNkY2xrOwogCXUzMiB2YWw7CiAJaW50IHJldDsKIApA
QCAtNzc4LDcgKzc3OCw3IEBAIHN0YXRpYyB2b2lkIGJkd19zZXRfY2RjbGsoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQlEUk1fRVJST1IoIlN3aXRjaGluZyBiYWNrIHRvIExD
UExMIGZhaWxlZFxuIik7CiAKIAlzYW5keWJyaWRnZV9wY29kZV93cml0ZShkZXZfcHJpdiwgSFNX
X1BDT0RFX0RFX1dSSVRFX0ZSRVFfUkVRLAotCQkJCWNkY2xrX3N0YXRlLT52b2x0YWdlX2xldmVs
KTsKKwkJCQljZGNsa19jb25maWctPnZvbHRhZ2VfbGV2ZWwpOwogCiAJSTkxNV9XUklURShDRENM
S19GUkVRLCBESVZfUk9VTkRfQ0xPU0VTVChjZGNsaywgMTAwMCkgLSAxKTsKIApAQCAtODIxLDEy
ICs4MjEsMTIgQEAgc3RhdGljIHU4IHNrbF9jYWxjX3ZvbHRhZ2VfbGV2ZWwoaW50IGNkY2xrKQog
fQogCiBzdGF0aWMgdm9pZCBza2xfZHBsbDBfdXBkYXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiwKLQkJCSAgICAgc3RydWN0IGludGVsX2NkY2xrX3N0YXRlICpjZGNsa19zdGF0
ZSkKKwkJCSAgICAgc3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyAqY2RjbGtfY29uZmlnKQogewog
CXUzMiB2YWw7CiAKLQljZGNsa19zdGF0ZS0+cmVmID0gMjQwMDA7Ci0JY2RjbGtfc3RhdGUtPnZj
byA9IDA7CisJY2RjbGtfY29uZmlnLT5yZWYgPSAyNDAwMDsKKwljZGNsa19jb25maWctPnZjbyA9
IDA7CiAKIAl2YWwgPSBJOTE1X1JFQUQoTENQTEwxX0NUTCk7CiAJaWYgKCh2YWwgJiBMQ1BMTF9Q
TExfRU5BQkxFKSA9PSAwKQpAQCAtODQ4LDExICs4NDgsMTEgQEAgc3RhdGljIHZvaWQgc2tsX2Rw
bGwwX3VwZGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJY2FzZSBEUExM
X0NUUkwxX0xJTktfUkFURShEUExMX0NUUkwxX0xJTktfUkFURV8xMzUwLCBTS0xfRFBMTDApOgog
CWNhc2UgRFBMTF9DVFJMMV9MSU5LX1JBVEUoRFBMTF9DVFJMMV9MSU5LX1JBVEVfMTYyMCwgU0tM
X0RQTEwwKToKIAljYXNlIERQTExfQ1RSTDFfTElOS19SQVRFKERQTExfQ1RSTDFfTElOS19SQVRF
XzI3MDAsIFNLTF9EUExMMCk6Ci0JCWNkY2xrX3N0YXRlLT52Y28gPSA4MTAwMDAwOworCQljZGNs
a19jb25maWctPnZjbyA9IDgxMDAwMDA7CiAJCWJyZWFrOwogCWNhc2UgRFBMTF9DVFJMMV9MSU5L
X1JBVEUoRFBMTF9DVFJMMV9MSU5LX1JBVEVfMTA4MCwgU0tMX0RQTEwwKToKIAljYXNlIERQTExf
Q1RSTDFfTElOS19SQVRFKERQTExfQ1RSTDFfTElOS19SQVRFXzIxNjAsIFNLTF9EUExMMCk6Ci0J
CWNkY2xrX3N0YXRlLT52Y28gPSA4NjQwMDAwOworCQljZGNsa19jb25maWctPnZjbyA9IDg2NDAw
MDA7CiAJCWJyZWFrOwogCWRlZmF1bHQ6CiAJCU1JU1NJTkdfQ0FTRSh2YWwgJiBEUExMX0NUUkwx
X0xJTktfUkFURV9NQVNLKFNLTF9EUExMMCkpOwpAQCAtODYxLDMyICs4NjEsMzIgQEAgc3RhdGlj
IHZvaWQgc2tsX2RwbGwwX3VwZGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYs
CiB9CiAKIHN0YXRpYyB2b2lkIHNrbF9nZXRfY2RjbGsoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2LAotCQkJICBzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgKmNkY2xrX3N0YXRlKQor
CQkJICBzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnICpjZGNsa19jb25maWcpCiB7CiAJdTMyIGNk
Y3RsOwogCi0Jc2tsX2RwbGwwX3VwZGF0ZShkZXZfcHJpdiwgY2RjbGtfc3RhdGUpOworCXNrbF9k
cGxsMF91cGRhdGUoZGV2X3ByaXYsIGNkY2xrX2NvbmZpZyk7CiAKLQljZGNsa19zdGF0ZS0+Y2Rj
bGsgPSBjZGNsa19zdGF0ZS0+YnlwYXNzID0gY2RjbGtfc3RhdGUtPnJlZjsKKwljZGNsa19jb25m
aWctPmNkY2xrID0gY2RjbGtfY29uZmlnLT5ieXBhc3MgPSBjZGNsa19jb25maWctPnJlZjsKIAot
CWlmIChjZGNsa19zdGF0ZS0+dmNvID09IDApCisJaWYgKGNkY2xrX2NvbmZpZy0+dmNvID09IDAp
CiAJCWdvdG8gb3V0OwogCiAJY2RjdGwgPSBJOTE1X1JFQUQoQ0RDTEtfQ1RMKTsKIAotCWlmIChj
ZGNsa19zdGF0ZS0+dmNvID09IDg2NDAwMDApIHsKKwlpZiAoY2RjbGtfY29uZmlnLT52Y28gPT0g
ODY0MDAwMCkgewogCQlzd2l0Y2ggKGNkY3RsICYgQ0RDTEtfRlJFUV9TRUxfTUFTSykgewogCQlj
YXNlIENEQ0xLX0ZSRVFfNDUwXzQzMjoKLQkJCWNkY2xrX3N0YXRlLT5jZGNsayA9IDQzMjAwMDsK
KwkJCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSA0MzIwMDA7CiAJCQlicmVhazsKIAkJY2FzZSBDRENM
S19GUkVRXzMzN18zMDg6Ci0JCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSAzMDg1NzE7CisJCQljZGNs
a19jb25maWctPmNkY2xrID0gMzA4NTcxOwogCQkJYnJlYWs7CiAJCWNhc2UgQ0RDTEtfRlJFUV81
NDA6Ci0JCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSA1NDAwMDA7CisJCQljZGNsa19jb25maWctPmNk
Y2xrID0gNTQwMDAwOwogCQkJYnJlYWs7CiAJCWNhc2UgQ0RDTEtfRlJFUV82NzVfNjE3OgotCQkJ
Y2RjbGtfc3RhdGUtPmNkY2xrID0gNjE3MTQzOworCQkJY2RjbGtfY29uZmlnLT5jZGNsayA9IDYx
NzE0MzsKIAkJCWJyZWFrOwogCQlkZWZhdWx0OgogCQkJTUlTU0lOR19DQVNFKGNkY3RsICYgQ0RD
TEtfRlJFUV9TRUxfTUFTSyk7CkBAIC04OTUsMTYgKzg5NSwxNiBAQCBzdGF0aWMgdm9pZCBza2xf
Z2V0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAl9IGVsc2Ugewog
CQlzd2l0Y2ggKGNkY3RsICYgQ0RDTEtfRlJFUV9TRUxfTUFTSykgewogCQljYXNlIENEQ0xLX0ZS
RVFfNDUwXzQzMjoKLQkJCWNkY2xrX3N0YXRlLT5jZGNsayA9IDQ1MDAwMDsKKwkJCWNkY2xrX2Nv
bmZpZy0+Y2RjbGsgPSA0NTAwMDA7CiAJCQlicmVhazsKIAkJY2FzZSBDRENMS19GUkVRXzMzN18z
MDg6Ci0JCQljZGNsa19zdGF0ZS0+Y2RjbGsgPSAzMzc1MDA7CisJCQljZGNsa19jb25maWctPmNk
Y2xrID0gMzM3NTAwOwogCQkJYnJlYWs7CiAJCWNhc2UgQ0RDTEtfRlJFUV81NDA6Ci0JCQljZGNs
a19zdGF0ZS0+Y2RjbGsgPSA1NDAwMDA7CisJCQljZGNsa19jb25maWctPmNkY2xrID0gNTQwMDAw
OwogCQkJYnJlYWs7CiAJCWNhc2UgQ0RDTEtfRlJFUV82NzVfNjE3OgotCQkJY2RjbGtfc3RhdGUt
PmNkY2xrID0gNjc1MDAwOworCQkJY2RjbGtfY29uZmlnLT5jZGNsayA9IDY3NTAwMDsKIAkJCWJy
ZWFrOwogCQlkZWZhdWx0OgogCQkJTUlTU0lOR19DQVNFKGNkY3RsICYgQ0RDTEtfRlJFUV9TRUxf
TUFTSyk7CkBAIC05MTcsOCArOTE3LDggQEAgc3RhdGljIHZvaWQgc2tsX2dldF9jZGNsayhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJICogQ2FuJ3QgcmVhZCB0aGlzIG91dCA6
KCBMZXQncyBhc3N1bWUgaXQncwogCSAqIGF0IGxlYXN0IHdoYXQgdGhlIENEQ0xLIGZyZXF1ZW5j
eSByZXF1aXJlcy4KIAkgKi8KLQljZGNsa19zdGF0ZS0+dm9sdGFnZV9sZXZlbCA9Ci0JCXNrbF9j
YWxjX3ZvbHRhZ2VfbGV2ZWwoY2RjbGtfc3RhdGUtPmNkY2xrKTsKKwljZGNsa19jb25maWctPnZv
bHRhZ2VfbGV2ZWwgPQorCQlza2xfY2FsY192b2x0YWdlX2xldmVsKGNkY2xrX2NvbmZpZy0+Y2Rj
bGspOwogfQogCiAvKiBjb252ZXJ0IGZyb20ga0h6IHRvIC4xIGZpeHBvaW50IE1IeiB3aXRoIC0x
TUh6IG9mZnNldCAqLwpAQCAtOTg5LDExICs5ODksMTEgQEAgc3RhdGljIHZvaWQgc2tsX2RwbGww
X2Rpc2FibGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogfQogCiBzdGF0aWMg
dm9pZCBza2xfc2V0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJ
CSAgY29uc3Qgc3RydWN0IGludGVsX2NkY2xrX3N0YXRlICpjZGNsa19zdGF0ZSwKKwkJCSAgY29u
c3Qgc3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyAqY2RjbGtfY29uZmlnLAogCQkJICBlbnVtIHBp
cGUgcGlwZSkKIHsKLQlpbnQgY2RjbGsgPSBjZGNsa19zdGF0ZS0+Y2RjbGs7Ci0JaW50IHZjbyA9
IGNkY2xrX3N0YXRlLT52Y287CisJaW50IGNkY2xrID0gY2RjbGtfY29uZmlnLT5jZGNsazsKKwlp
bnQgdmNvID0gY2RjbGtfY29uZmlnLT52Y287CiAJdTMyIGZyZXFfc2VsZWN0LCBjZGNsa19jdGw7
CiAJaW50IHJldDsKIApAQCAtMTA3NSw3ICsxMDc1LDcgQEAgc3RhdGljIHZvaWQgc2tsX3NldF9j
ZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAKIAkvKiBpbmZvcm0gUENV
IG9mIHRoZSBjaGFuZ2UgKi8KIAlzYW5keWJyaWRnZV9wY29kZV93cml0ZShkZXZfcHJpdiwgU0tM
X1BDT0RFX0NEQ0xLX0NPTlRST0wsCi0JCQkJY2RjbGtfc3RhdGUtPnZvbHRhZ2VfbGV2ZWwpOwor
CQkJCWNkY2xrX2NvbmZpZy0+dm9sdGFnZV9sZXZlbCk7CiAKIAlpbnRlbF91cGRhdGVfY2RjbGso
ZGV2X3ByaXYpOwogfQpAQCAtMTA5Myw3ICsxMDkzLDcgQEAgc3RhdGljIHZvaWQgc2tsX3Nhbml0
aXplX2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkJZ290byBzYW5p
dGl6ZTsKIAogCWludGVsX3VwZGF0ZV9jZGNsayhkZXZfcHJpdik7Ci0JaW50ZWxfZHVtcF9jZGNs
a19zdGF0ZSgmZGV2X3ByaXYtPmNkY2xrLmh3LCAiQ3VycmVudCBDRENMSyIpOworCWludGVsX2R1
bXBfY2RjbGtfY29uZmlnKCZkZXZfcHJpdi0+Y2RjbGsuaHcsICJDdXJyZW50IENEQ0xLIik7CiAK
IAkvKiBJcyBQTEwgZW5hYmxlZCBhbmQgbG9ja2VkID8gKi8KIAlpZiAoZGV2X3ByaXYtPmNkY2xr
Lmh3LnZjbyA9PSAwIHx8CkBAIC0xMTI0LDcgKzExMjQsNyBAQCBzdGF0aWMgdm9pZCBza2xfc2Fu
aXRpemVfY2RjbGsoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCiBzdGF0aWMg
dm9pZCBza2xfaW5pdF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiB7
Ci0Jc3RydWN0IGludGVsX2NkY2xrX3N0YXRlIGNkY2xrX3N0YXRlOworCXN0cnVjdCBpbnRlbF9j
ZGNsa19jb25maWcgY2RjbGtfY29uZmlnOwogCiAJc2tsX3Nhbml0aXplX2NkY2xrKGRldl9wcml2
KTsKIApAQCAtMTE0MCwyNiArMTE0MCwyNiBAQCBzdGF0aWMgdm9pZCBza2xfaW5pdF9jZGNsayhz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJCXJldHVybjsKIAl9CiAKLQljZGNs
a19zdGF0ZSA9IGRldl9wcml2LT5jZGNsay5odzsKKwljZGNsa19jb25maWcgPSBkZXZfcHJpdi0+
Y2RjbGsuaHc7CiAKLQljZGNsa19zdGF0ZS52Y28gPSBkZXZfcHJpdi0+c2tsX3ByZWZlcnJlZF92
Y29fZnJlcTsKLQlpZiAoY2RjbGtfc3RhdGUudmNvID09IDApCi0JCWNkY2xrX3N0YXRlLnZjbyA9
IDgxMDAwMDA7Ci0JY2RjbGtfc3RhdGUuY2RjbGsgPSBza2xfY2FsY19jZGNsaygwLCBjZGNsa19z
dGF0ZS52Y28pOwotCWNkY2xrX3N0YXRlLnZvbHRhZ2VfbGV2ZWwgPSBza2xfY2FsY192b2x0YWdl
X2xldmVsKGNkY2xrX3N0YXRlLmNkY2xrKTsKKwljZGNsa19jb25maWcudmNvID0gZGV2X3ByaXYt
PnNrbF9wcmVmZXJyZWRfdmNvX2ZyZXE7CisJaWYgKGNkY2xrX2NvbmZpZy52Y28gPT0gMCkKKwkJ
Y2RjbGtfY29uZmlnLnZjbyA9IDgxMDAwMDA7CisJY2RjbGtfY29uZmlnLmNkY2xrID0gc2tsX2Nh
bGNfY2RjbGsoMCwgY2RjbGtfY29uZmlnLnZjbyk7CisJY2RjbGtfY29uZmlnLnZvbHRhZ2VfbGV2
ZWwgPSBza2xfY2FsY192b2x0YWdlX2xldmVsKGNkY2xrX2NvbmZpZy5jZGNsayk7CiAKLQlza2xf
c2V0X2NkY2xrKGRldl9wcml2LCAmY2RjbGtfc3RhdGUsIElOVkFMSURfUElQRSk7CisJc2tsX3Nl
dF9jZGNsayhkZXZfcHJpdiwgJmNkY2xrX2NvbmZpZywgSU5WQUxJRF9QSVBFKTsKIH0KIAogc3Rh
dGljIHZvaWQgc2tsX3VuaW5pdF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYpCiB7Ci0Jc3RydWN0IGludGVsX2NkY2xrX3N0YXRlIGNkY2xrX3N0YXRlID0gZGV2X3ByaXYt
PmNkY2xrLmh3OworCXN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgY2RjbGtfY29uZmlnID0gZGV2
X3ByaXYtPmNkY2xrLmh3OwogCi0JY2RjbGtfc3RhdGUuY2RjbGsgPSBjZGNsa19zdGF0ZS5ieXBh
c3M7Ci0JY2RjbGtfc3RhdGUudmNvID0gMDsKLQljZGNsa19zdGF0ZS52b2x0YWdlX2xldmVsID0g
c2tsX2NhbGNfdm9sdGFnZV9sZXZlbChjZGNsa19zdGF0ZS5jZGNsayk7CisJY2RjbGtfY29uZmln
LmNkY2xrID0gY2RjbGtfY29uZmlnLmJ5cGFzczsKKwljZGNsa19jb25maWcudmNvID0gMDsKKwlj
ZGNsa19jb25maWcudm9sdGFnZV9sZXZlbCA9IHNrbF9jYWxjX3ZvbHRhZ2VfbGV2ZWwoY2RjbGtf
Y29uZmlnLmNkY2xrKTsKIAotCXNrbF9zZXRfY2RjbGsoZGV2X3ByaXYsICZjZGNsa19zdGF0ZSwg
SU5WQUxJRF9QSVBFKTsKKwlza2xfc2V0X2NkY2xrKGRldl9wcml2LCAmY2RjbGtfY29uZmlnLCBJ
TlZBTElEX1BJUEUpOwogfQogCiBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2NkY2xrX3ZhbHMg
Ynh0X2NkY2xrX3RhYmxlW10gPSB7CkBAIC0xMjg0LDE2ICsxMjg0LDE2IEBAIHN0YXRpYyB1OCBl
aGxfY2FsY192b2x0YWdlX2xldmVsKGludCBjZGNsaykKIH0KIAogc3RhdGljIHZvaWQgY25sX3Jl
YWRvdXRfcmVmY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJCSAgICAg
ICBzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgKmNkY2xrX3N0YXRlKQorCQkJICAgICAgIHN0cnVj
dCBpbnRlbF9jZGNsa19jb25maWcgKmNkY2xrX2NvbmZpZykKIHsKIAlpZiAoSTkxNV9SRUFEKFNL
TF9EU1NNKSAmIENOTF9EU1NNX0NEQ0xLX1BMTF9SRUZDTEtfMjRNSHopCi0JCWNkY2xrX3N0YXRl
LT5yZWYgPSAyNDAwMDsKKwkJY2RjbGtfY29uZmlnLT5yZWYgPSAyNDAwMDsKIAllbHNlCi0JCWNk
Y2xrX3N0YXRlLT5yZWYgPSAxOTIwMDsKKwkJY2RjbGtfY29uZmlnLT5yZWYgPSAxOTIwMDsKIH0K
IAogc3RhdGljIHZvaWQgaWNsX3JlYWRvdXRfcmVmY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiwKLQkJCSAgICAgICBzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgKmNkY2xrX3N0
YXRlKQorCQkJICAgICAgIHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgKmNkY2xrX2NvbmZpZykK
IHsKIAl1MzIgZHNzbSA9IEk5MTVfUkVBRChTS0xfRFNTTSkgJiBJQ0xfRFNTTV9DRENMS19QTExf
UkVGQ0xLX01BU0s7CiAKQEAgLTEzMDIsMjggKzEzMDIsMjggQEAgc3RhdGljIHZvaWQgaWNsX3Jl
YWRvdXRfcmVmY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJTUlTU0lO
R19DQVNFKGRzc20pOwogCQkvKiBmYWxsIHRocm91Z2ggKi8KIAljYXNlIElDTF9EU1NNX0NEQ0xL
X1BMTF9SRUZDTEtfMjRNSHo6Ci0JCWNkY2xrX3N0YXRlLT5yZWYgPSAyNDAwMDsKKwkJY2RjbGtf
Y29uZmlnLT5yZWYgPSAyNDAwMDsKIAkJYnJlYWs7CiAJY2FzZSBJQ0xfRFNTTV9DRENMS19QTExf
UkVGQ0xLXzE5XzJNSHo6Ci0JCWNkY2xrX3N0YXRlLT5yZWYgPSAxOTIwMDsKKwkJY2RjbGtfY29u
ZmlnLT5yZWYgPSAxOTIwMDsKIAkJYnJlYWs7CiAJY2FzZSBJQ0xfRFNTTV9DRENMS19QTExfUkVG
Q0xLXzM4XzRNSHo6Ci0JCWNkY2xrX3N0YXRlLT5yZWYgPSAzODQwMDsKKwkJY2RjbGtfY29uZmln
LT5yZWYgPSAzODQwMDsKIAkJYnJlYWs7CiAJfQogfQogCiBzdGF0aWMgdm9pZCBieHRfZGVfcGxs
X3JlYWRvdXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAotCQkJICAgICAgIHN0
cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAqY2RjbGtfc3RhdGUpCisJCQkgICAgICAgc3RydWN0IGlu
dGVsX2NkY2xrX2NvbmZpZyAqY2RjbGtfY29uZmlnKQogewogCXUzMiB2YWwsIHJhdGlvOwogCiAJ
aWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTEpCi0JCWljbF9yZWFkb3V0X3JlZmNsayhkZXZf
cHJpdiwgY2RjbGtfc3RhdGUpOworCQlpY2xfcmVhZG91dF9yZWZjbGsoZGV2X3ByaXYsIGNkY2xr
X2NvbmZpZyk7CiAJZWxzZSBpZiAoSVNfQ0FOTk9OTEFLRShkZXZfcHJpdikpCi0JCWNubF9yZWFk
b3V0X3JlZmNsayhkZXZfcHJpdiwgY2RjbGtfc3RhdGUpOworCQljbmxfcmVhZG91dF9yZWZjbGso
ZGV2X3ByaXYsIGNkY2xrX2NvbmZpZyk7CiAJZWxzZQotCQljZGNsa19zdGF0ZS0+cmVmID0gMTky
MDA7CisJCWNkY2xrX2NvbmZpZy0+cmVmID0gMTkyMDA7CiAKIAl2YWwgPSBJOTE1X1JFQUQoQlhU
X0RFX1BMTF9FTkFCTEUpOwogCWlmICgodmFsICYgQlhUX0RFX1BMTF9QTExfRU5BQkxFKSA9PSAw
IHx8CkBAIC0xMzMyLDcgKzEzMzIsNyBAQCBzdGF0aWMgdm9pZCBieHRfZGVfcGxsX3JlYWRvdXQo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkgKiBDRENMSyBQTEwgaXMgZGlz
YWJsZWQsIHRoZSBWQ08vcmF0aW8gZG9lc24ndCBtYXR0ZXIsIGJ1dAogCQkgKiBzZXR0aW5nIGl0
IHRvIHplcm8gaXMgYSB3YXkgdG8gc2lnbmFsIHRoYXQuCiAJCSAqLwotCQljZGNsa19zdGF0ZS0+
dmNvID0gMDsKKwkJY2RjbGtfY29uZmlnLT52Y28gPSAwOwogCQlyZXR1cm47CiAJfQogCkBAIC0x
MzQ1LDI2ICsxMzQ1LDI2IEBAIHN0YXRpYyB2b2lkIGJ4dF9kZV9wbGxfcmVhZG91dChzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJZWxzZQogCQlyYXRpbyA9IEk5MTVfUkVBRChC
WFRfREVfUExMX0NUTCkgJiBCWFRfREVfUExMX1JBVElPX01BU0s7CiAKLQljZGNsa19zdGF0ZS0+
dmNvID0gcmF0aW8gKiBjZGNsa19zdGF0ZS0+cmVmOworCWNkY2xrX2NvbmZpZy0+dmNvID0gcmF0
aW8gKiBjZGNsa19jb25maWctPnJlZjsKIH0KIAogc3RhdGljIHZvaWQgYnh0X2dldF9jZGNsayhz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgIHN0cnVjdCBpbnRlbF9jZGNs
a19zdGF0ZSAqY2RjbGtfc3RhdGUpCisJCQkgIHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgKmNk
Y2xrX2NvbmZpZykKIHsKIAl1MzIgZGl2aWRlcjsKIAlpbnQgZGl2OwogCi0JYnh0X2RlX3BsbF9y
ZWFkb3V0KGRldl9wcml2LCBjZGNsa19zdGF0ZSk7CisJYnh0X2RlX3BsbF9yZWFkb3V0KGRldl9w
cml2LCBjZGNsa19jb25maWcpOwogCiAJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIpCi0J
CWNkY2xrX3N0YXRlLT5ieXBhc3MgPSBjZGNsa19zdGF0ZS0+cmVmIC8gMjsKKwkJY2RjbGtfY29u
ZmlnLT5ieXBhc3MgPSBjZGNsa19jb25maWctPnJlZiAvIDI7CiAJZWxzZSBpZiAoSU5URUxfR0VO
KGRldl9wcml2KSA+PSAxMSkKLQkJY2RjbGtfc3RhdGUtPmJ5cGFzcyA9IDUwMDAwOworCQljZGNs
a19jb25maWctPmJ5cGFzcyA9IDUwMDAwOwogCWVsc2UKLQkJY2RjbGtfc3RhdGUtPmJ5cGFzcyA9
IGNkY2xrX3N0YXRlLT5yZWY7CisJCWNkY2xrX2NvbmZpZy0+YnlwYXNzID0gY2RjbGtfY29uZmln
LT5yZWY7CiAKLQlpZiAoY2RjbGtfc3RhdGUtPnZjbyA9PSAwKSB7Ci0JCWNkY2xrX3N0YXRlLT5j
ZGNsayA9IGNkY2xrX3N0YXRlLT5ieXBhc3M7CisJaWYgKGNkY2xrX2NvbmZpZy0+dmNvID09IDAp
IHsKKwkJY2RjbGtfY29uZmlnLT5jZGNsayA9IGNkY2xrX2NvbmZpZy0+YnlwYXNzOwogCQlnb3Rv
IG91dDsKIAl9CiAKQEAgLTEzOTEsMTUgKzEzOTEsMTUgQEAgc3RhdGljIHZvaWQgYnh0X2dldF9j
ZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCXJldHVybjsKIAl9CiAK
LQljZGNsa19zdGF0ZS0+Y2RjbGsgPSBESVZfUk9VTkRfQ0xPU0VTVChjZGNsa19zdGF0ZS0+dmNv
LCBkaXYpOworCWNkY2xrX2NvbmZpZy0+Y2RjbGsgPSBESVZfUk9VTkRfQ0xPU0VTVChjZGNsa19j
b25maWctPnZjbywgZGl2KTsKIAogIG91dDoKIAkvKgogCSAqIENhbid0IHJlYWQgdGhpcyBvdXQg
OiggTGV0J3MgYXNzdW1lIGl0J3MKIAkgKiBhdCBsZWFzdCB3aGF0IHRoZSBDRENMSyBmcmVxdWVu
Y3kgcmVxdWlyZXMuCiAJICovCi0JY2RjbGtfc3RhdGUtPnZvbHRhZ2VfbGV2ZWwgPQotCQlkZXZf
cHJpdi0+ZGlzcGxheS5jYWxjX3ZvbHRhZ2VfbGV2ZWwoY2RjbGtfc3RhdGUtPmNkY2xrKTsKKwlj
ZGNsa19jb25maWctPnZvbHRhZ2VfbGV2ZWwgPQorCQlkZXZfcHJpdi0+ZGlzcGxheS5jYWxjX3Zv
bHRhZ2VfbGV2ZWwoY2RjbGtfY29uZmlnLT5jZGNsayk7CiB9CiAKIHN0YXRpYyB2b2lkIGJ4dF9k
ZV9wbGxfZGlzYWJsZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCkBAIC0xNDg4
LDExICsxNDg4LDExIEBAIHN0YXRpYyB1MzIgYnh0X2NkY2xrX2NkMnhfcGlwZShzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGVudW0gcGlwZSBwaXBlCiB9CiAKIHN0YXRpYyB2b2lk
IGJ4dF9zZXRfY2RjbGsoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAotCQkJICBj
b25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgKmNkY2xrX3N0YXRlLAorCQkJICBjb25zdCBz
dHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnICpjZGNsa19jb25maWcsCiAJCQkgIGVudW0gcGlwZSBw
aXBlKQogewotCWludCBjZGNsayA9IGNkY2xrX3N0YXRlLT5jZGNsazsKLQlpbnQgdmNvID0gY2Rj
bGtfc3RhdGUtPnZjbzsKKwlpbnQgY2RjbGsgPSBjZGNsa19jb25maWctPmNkY2xrOworCWludCB2
Y28gPSBjZGNsa19jb25maWctPnZjbzsKIAl1MzIgdmFsLCBkaXZpZGVyOwogCWludCByZXQ7CiAK
QEAgLTE1NzMsNyArMTU3Myw3IEBAIHN0YXRpYyB2b2lkIGJ4dF9zZXRfY2RjbGsoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCiAJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0g
MTApIHsKIAkJcmV0ID0gc2FuZHlicmlkZ2VfcGNvZGVfd3JpdGUoZGV2X3ByaXYsIFNLTF9QQ09E
RV9DRENMS19DT05UUk9MLAotCQkJCQkgICAgICBjZGNsa19zdGF0ZS0+dm9sdGFnZV9sZXZlbCk7
CisJCQkJCSAgICAgIGNkY2xrX2NvbmZpZy0+dm9sdGFnZV9sZXZlbCk7CiAJfSBlbHNlIHsKIAkJ
LyoKIAkJICogVGhlIHRpbWVvdXQgaXNuJ3Qgc3BlY2lmaWVkLCB0aGUgMm1zIHVzZWQgaGVyZSBp
cyBiYXNlZCBvbgpAQCAtMTU4Myw3ICsxNTgzLDcgQEAgc3RhdGljIHZvaWQgYnh0X3NldF9jZGNs
ayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCSAqLwogCQlyZXQgPSBzYW5k
eWJyaWRnZV9wY29kZV93cml0ZV90aW1lb3V0KGRldl9wcml2LAogCQkJCQkJICAgICAgSFNXX1BD
T0RFX0RFX1dSSVRFX0ZSRVFfUkVRLAotCQkJCQkJICAgICAgY2RjbGtfc3RhdGUtPnZvbHRhZ2Vf
bGV2ZWwsCisJCQkJCQkgICAgICBjZGNsa19jb25maWctPnZvbHRhZ2VfbGV2ZWwsCiAJCQkJCQkg
ICAgICAxNTAsIDIpOwogCX0KIApAQCAtMTYwMCw3ICsxNjAwLDcgQEAgc3RhdGljIHZvaWQgYnh0
X3NldF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCSAqIENhbid0
IHJlYWQgb3V0IHRoZSB2b2x0YWdlIGxldmVsIDooCiAJCSAqIExldCdzIGp1c3QgYXNzdW1lIGV2
ZXJ5dGhpbmcgaXMgYXMgZXhwZWN0ZWQuCiAJCSAqLwotCQlkZXZfcHJpdi0+Y2RjbGsuaHcudm9s
dGFnZV9sZXZlbCA9IGNkY2xrX3N0YXRlLT52b2x0YWdlX2xldmVsOworCQlkZXZfcHJpdi0+Y2Rj
bGsuaHcudm9sdGFnZV9sZXZlbCA9IGNkY2xrX2NvbmZpZy0+dm9sdGFnZV9sZXZlbDsKIH0KIAog
c3RhdGljIHZvaWQgYnh0X3Nhbml0aXplX2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdikKQEAgLTE2MDksNyArMTYwOSw3IEBAIHN0YXRpYyB2b2lkIGJ4dF9zYW5pdGl6ZV9j
ZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJaW50IGNkY2xrLCB2Y287
CiAKIAlpbnRlbF91cGRhdGVfY2RjbGsoZGV2X3ByaXYpOwotCWludGVsX2R1bXBfY2RjbGtfc3Rh
dGUoJmRldl9wcml2LT5jZGNsay5odywgIkN1cnJlbnQgQ0RDTEsiKTsKKwlpbnRlbF9kdW1wX2Nk
Y2xrX2NvbmZpZygmZGV2X3ByaXYtPmNkY2xrLmh3LCAiQ3VycmVudCBDRENMSyIpOwogCiAJaWYg
KGRldl9wcml2LT5jZGNsay5ody52Y28gPT0gMCB8fAogCSAgICBkZXZfcHJpdi0+Y2RjbGsuaHcu
Y2RjbGsgPT0gZGV2X3ByaXYtPmNkY2xrLmh3LmJ5cGFzcykKQEAgLTE2ODMsNyArMTY4Myw3IEBA
IHN0YXRpYyB2b2lkIGJ4dF9zYW5pdGl6ZV9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpCiAKIHN0YXRpYyB2b2lkIGJ4dF9pbml0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdikKIHsKLQlzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgY2RjbGtfc3Rh
dGU7CisJc3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyBjZGNsa19jb25maWc7CiAKIAlieHRfc2Fu
aXRpemVfY2RjbGsoZGV2X3ByaXYpOwogCkBAIC0xNjkxLDMxICsxNjkxLDMxIEBAIHN0YXRpYyB2
b2lkIGJ4dF9pbml0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkg
ICAgZGV2X3ByaXYtPmNkY2xrLmh3LnZjbyAhPSAwKQogCQlyZXR1cm47CiAKLQljZGNsa19zdGF0
ZSA9IGRldl9wcml2LT5jZGNsay5odzsKKwljZGNsa19jb25maWcgPSBkZXZfcHJpdi0+Y2RjbGsu
aHc7CiAKIAkvKgogCSAqIEZJWE1FOgogCSAqIC0gVGhlIGluaXRpYWwgQ0RDTEsgbmVlZHMgdG8g
YmUgcmVhZCBmcm9tIFZCVC4KIAkgKiAgIE5lZWQgdG8gbWFrZSB0aGlzIGNoYW5nZSBhZnRlciBW
QlQgaGFzIGNoYW5nZXMgZm9yIEJYVC4KIAkgKi8KLQljZGNsa19zdGF0ZS5jZGNsayA9IGJ4dF9j
YWxjX2NkY2xrKGRldl9wcml2LCAwKTsKLQljZGNsa19zdGF0ZS52Y28gPSBieHRfY2FsY19jZGNs
a19wbGxfdmNvKGRldl9wcml2LCBjZGNsa19zdGF0ZS5jZGNsayk7Ci0JY2RjbGtfc3RhdGUudm9s
dGFnZV9sZXZlbCA9Ci0JCWRldl9wcml2LT5kaXNwbGF5LmNhbGNfdm9sdGFnZV9sZXZlbChjZGNs
a19zdGF0ZS5jZGNsayk7CisJY2RjbGtfY29uZmlnLmNkY2xrID0gYnh0X2NhbGNfY2RjbGsoZGV2
X3ByaXYsIDApOworCWNkY2xrX2NvbmZpZy52Y28gPSBieHRfY2FsY19jZGNsa19wbGxfdmNvKGRl
dl9wcml2LCBjZGNsa19jb25maWcuY2RjbGspOworCWNkY2xrX2NvbmZpZy52b2x0YWdlX2xldmVs
ID0KKwkJZGV2X3ByaXYtPmRpc3BsYXkuY2FsY192b2x0YWdlX2xldmVsKGNkY2xrX2NvbmZpZy5j
ZGNsayk7CiAKLQlieHRfc2V0X2NkY2xrKGRldl9wcml2LCAmY2RjbGtfc3RhdGUsIElOVkFMSURf
UElQRSk7CisJYnh0X3NldF9jZGNsayhkZXZfcHJpdiwgJmNkY2xrX2NvbmZpZywgSU5WQUxJRF9Q
SVBFKTsKIH0KIAogc3RhdGljIHZvaWQgYnh0X3VuaW5pdF9jZGNsayhzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYpCiB7Ci0Jc3RydWN0IGludGVsX2NkY2xrX3N0YXRlIGNkY2xrX3N0
YXRlID0gZGV2X3ByaXYtPmNkY2xrLmh3OworCXN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgY2Rj
bGtfY29uZmlnID0gZGV2X3ByaXYtPmNkY2xrLmh3OwogCi0JY2RjbGtfc3RhdGUuY2RjbGsgPSBj
ZGNsa19zdGF0ZS5ieXBhc3M7Ci0JY2RjbGtfc3RhdGUudmNvID0gMDsKLQljZGNsa19zdGF0ZS52
b2x0YWdlX2xldmVsID0KLQkJZGV2X3ByaXYtPmRpc3BsYXkuY2FsY192b2x0YWdlX2xldmVsKGNk
Y2xrX3N0YXRlLmNkY2xrKTsKKwljZGNsa19jb25maWcuY2RjbGsgPSBjZGNsa19jb25maWcuYnlw
YXNzOworCWNkY2xrX2NvbmZpZy52Y28gPSAwOworCWNkY2xrX2NvbmZpZy52b2x0YWdlX2xldmVs
ID0KKwkJZGV2X3ByaXYtPmRpc3BsYXkuY2FsY192b2x0YWdlX2xldmVsKGNkY2xrX2NvbmZpZy5j
ZGNsayk7CiAKLQlieHRfc2V0X2NkY2xrKGRldl9wcml2LCAmY2RjbGtfc3RhdGUsIElOVkFMSURf
UElQRSk7CisJYnh0X3NldF9jZGNsayhkZXZfcHJpdiwgJmNkY2xrX2NvbmZpZywgSU5WQUxJRF9Q
SVBFKTsKIH0KIAogLyoqCkBAIC0xNzUxLDE1ICsxNzUxLDE3IEBAIHZvaWQgaW50ZWxfY2RjbGtf
dW5pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogfQogCiAvKioKLSAqIGludGVs
X2NkY2xrX25lZWRzX21vZGVzZXQgLSBEZXRlcm1pbmUgaWYgdHdvIENEQ0xLIHN0YXRlcyByZXF1
aXJlIGEgbW9kZXNldCBvbiBhbGwgcGlwZXMKLSAqIEBhOiBmaXJzdCBDRENMSyBzdGF0ZQotICog
QGI6IHNlY29uZCBDRENMSyBzdGF0ZQorICogaW50ZWxfY2RjbGtfbmVlZHNfbW9kZXNldCAtIERl
dGVybWluZSBpZiBjaGFuZ29uZyBiZXR3ZWVuIHRoZSBDRENMSworICogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb25zIHJlcXVpcmVzIGEgbW9kZXNldCBvbiBhbGwgcGlw
ZXMKKyAqIEBhOiBmaXJzdCBDRENMSyBjb25maWd1cmF0aW9uCisgKiBAYjogc2Vjb25kIENEQ0xL
IGNvbmZpZ3VyYXRpb24KICAqCiAgKiBSZXR1cm5zOgotICogVHJ1ZSBpZiB0aGUgQ0RDTEsgc3Rh
dGVzIHJlcXVpcmUgcGlwZXMgdG8gYmUgb2ZmIGR1cmluZyByZXByb2dyYW1taW5nLCBmYWxzZSBp
ZiBub3QuCisgKiBUcnVlIGlmIGNoYW5naW5nIGJldHdlZW4gdGhlIHR3byBDRENMSyBjb25maWd1
cmF0aW9ucworICogcmVxdWlyZXMgYWxsIHBpcGVzIHRvIGJlIG9mZiwgZmFsc2UgaWYgbm90Lgog
ICovCi1ib29sIGludGVsX2NkY2xrX25lZWRzX21vZGVzZXQoY29uc3Qgc3RydWN0IGludGVsX2Nk
Y2xrX3N0YXRlICphLAotCQkJICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAq
YikKK2Jvb2wgaW50ZWxfY2RjbGtfbmVlZHNfbW9kZXNldChjb25zdCBzdHJ1Y3QgaW50ZWxfY2Rj
bGtfY29uZmlnICphLAorCQkJICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcg
KmIpCiB7CiAJcmV0dXJuIGEtPmNkY2xrICE9IGItPmNkY2xrIHx8CiAJCWEtPnZjbyAhPSBiLT52
Y28gfHwKQEAgLTE3NjcsMTcgKzE3NjksMTkgQEAgYm9vbCBpbnRlbF9jZGNsa19uZWVkc19tb2Rl
c2V0KGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAqYSwKIH0KIAogLyoqCi0gKiBpbnRl
bF9jZGNsa19jYW5fY2QyeF91cGRhdGUgLSBEZXRlcm1pbmUgaWYgdHdvIENEQ0xLIHN0YXRlcyBu
ZWVkIGEgY2QyeCBkaXZpZGVyIHVwZGF0ZQotICogQGRldl9wcml2OiBOb3QgYSBDRENMSyBzdGF0
ZSwgaXQncyB0aGUgZHJtX2k5MTVfcHJpdmF0ZSEKLSAqIEBhOiBmaXJzdCBDRENMSyBzdGF0ZQot
ICogQGI6IHNlY29uZCBDRENMSyBzdGF0ZQorICogaW50ZWxfY2RjbGtfY2FuX2NkMnhfdXBkYXRl
IC0gRGV0ZXJtaW5lIGlmIGNoYW5naW5nIGJldHdlZW4gdGhlIHR3byBDRENMSworICogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbnMgcmVxdWlyZXMgb25seSBhIGNk
MnggZGl2aWRlciB1cGRhdGUKKyAqIEBkZXZfcHJpdjogaTkxNSBkZXZpY2UKKyAqIEBhOiBmaXJz
dCBDRENMSyBjb25maWd1cmF0aW9uCisgKiBAYjogc2Vjb25kIENEQ0xLIGNvbmZpZ3VyYXRpb24K
ICAqCiAgKiBSZXR1cm5zOgotICogVHJ1ZSBpZiB0aGUgQ0RDTEsgc3RhdGVzIHJlcXVpcmUganVz
dCBhIGNkMnggZGl2aWRlciB1cGRhdGUsIGZhbHNlIGlmIG5vdC4KKyAqIFRydWUgaWYgY2hhbmdp
bmcgYmV0d2VlbiB0aGUgdHdvIENEQ0xLIGNvbmZpZ3VyYXRpb25zCisgKiBjYW4gYmUgZG9uZSB3
aXRoIGp1c3QgYSBjZDJ4IGRpdmlkZXIgdXBkYXRlLCBmYWxzZSBpZiBub3QuCiAgKi8KIHN0YXRp
YyBib29sIGludGVsX2NkY2xrX2Nhbl9jZDJ4X3VwZGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsCi0JCQkJCWNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAqYSwKLQkJ
CQkJY29uc3Qgc3RydWN0IGludGVsX2NkY2xrX3N0YXRlICpiKQorCQkJCQljb25zdCBzdHJ1Y3Qg
aW50ZWxfY2RjbGtfY29uZmlnICphLAorCQkJCQljb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfY29u
ZmlnICpiKQogewogCS8qIE9sZGVyIGh3IGRvZXNuJ3QgaGF2ZSB0aGUgY2FwYWJpbGl0eSAqLwog
CWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwgMTAgJiYgIUlTX0dFTjlfTFAoZGV2X3ByaXYpKQpA
QCAtMTc4OSwxNSArMTc5MywxNSBAQCBzdGF0aWMgYm9vbCBpbnRlbF9jZGNsa19jYW5fY2QyeF91
cGRhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogfQogCiAvKioKLSAqIGlu
dGVsX2NkY2xrX2NoYW5nZWQgLSBEZXRlcm1pbmUgaWYgdHdvIENEQ0xLIHN0YXRlcyBhcmUgZGlm
ZmVyZW50Ci0gKiBAYTogZmlyc3QgQ0RDTEsgc3RhdGUKLSAqIEBiOiBzZWNvbmQgQ0RDTEsgc3Rh
dGUKKyAqIGludGVsX2NkY2xrX2NoYW5nZWQgLSBEZXRlcm1pbmUgaWYgdHdvIENEQ0xLIGNvbmZp
Z3VyYXRpb25zIGFyZSBkaWZmZXJlbnQKKyAqIEBhOiBmaXJzdCBDRENMSyBjb25maWd1cmF0aW9u
CisgKiBAYjogc2Vjb25kIENEQ0xLIGNvbmZpZ3VyYXRpb24KICAqCiAgKiBSZXR1cm5zOgotICog
VHJ1ZSBpZiB0aGUgQ0RDTEsgc3RhdGVzIGRvbid0IG1hdGNoLCBmYWxzZSBpZiB0aGV5IGRvLgor
ICogVHJ1ZSBpZiB0aGUgQ0RDTEsgY29uZmlndXJhdGlvbnMgZG9uJ3QgbWF0Y2gsIGZhbHNlIGlm
IHRoZXkgZG8uCiAgKi8KLXN0YXRpYyBib29sIGludGVsX2NkY2xrX2NoYW5nZWQoY29uc3Qgc3Ry
dWN0IGludGVsX2NkY2xrX3N0YXRlICphLAotCQkJCWNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19z
dGF0ZSAqYikKK3N0YXRpYyBib29sIGludGVsX2NkY2xrX2NoYW5nZWQoY29uc3Qgc3RydWN0IGlu
dGVsX2NkY2xrX2NvbmZpZyAqYSwKKwkJCQljb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmln
ICpiKQogewogCXJldHVybiBpbnRlbF9jZGNsa19uZWVkc19tb2Rlc2V0KGEsIGIpIHx8CiAJCWEt
PnZvbHRhZ2VfbGV2ZWwgIT0gYi0+dm9sdGFnZV9sZXZlbDsKQEAgLTE4NDMsNTkgKzE4NDcsNTkg
QEAgdm9pZCBpbnRlbF9jZGNsa19zd2FwX3N0YXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUg
KnN0YXRlKQogCXN3YXAoc3RhdGUtPmNkY2xrLmFjdHVhbCwgZGV2X3ByaXYtPmNkY2xrLmFjdHVh
bCk7CiB9CiAKLXZvaWQgaW50ZWxfZHVtcF9jZGNsa19zdGF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxf
Y2RjbGtfc3RhdGUgKmNkY2xrX3N0YXRlLAotCQkJICAgIGNvbnN0IGNoYXIgKmNvbnRleHQpCit2
b2lkIGludGVsX2R1bXBfY2RjbGtfY29uZmlnKGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19jb25m
aWcgKmNkY2xrX2NvbmZpZywKKwkJCSAgICAgY29uc3QgY2hhciAqY29udGV4dCkKIHsKIAlEUk1f
REVCVUdfRFJJVkVSKCIlcyAlZCBrSHosIFZDTyAlZCBrSHosIHJlZiAlZCBrSHosIGJ5cGFzcyAl
ZCBrSHosIHZvbHRhZ2UgbGV2ZWwgJWRcbiIsCi0JCQkgY29udGV4dCwgY2RjbGtfc3RhdGUtPmNk
Y2xrLCBjZGNsa19zdGF0ZS0+dmNvLAotCQkJIGNkY2xrX3N0YXRlLT5yZWYsIGNkY2xrX3N0YXRl
LT5ieXBhc3MsCi0JCQkgY2RjbGtfc3RhdGUtPnZvbHRhZ2VfbGV2ZWwpOworCQkJIGNvbnRleHQs
IGNkY2xrX2NvbmZpZy0+Y2RjbGssIGNkY2xrX2NvbmZpZy0+dmNvLAorCQkJIGNkY2xrX2NvbmZp
Zy0+cmVmLCBjZGNsa19jb25maWctPmJ5cGFzcywKKwkJCSBjZGNsa19jb25maWctPnZvbHRhZ2Vf
bGV2ZWwpOwogfQogCiAvKioKLSAqIGludGVsX3NldF9jZGNsayAtIFB1c2ggdGhlIENEQ0xLIHN0
YXRlIHRvIHRoZSBoYXJkd2FyZQorICogaW50ZWxfc2V0X2NkY2xrIC0gUHVzaCB0aGUgQ0RDTEsg
Y29uZmlndXJhdGlvbiB0byB0aGUgaGFyZHdhcmUKICAqIEBkZXZfcHJpdjogaTkxNSBkZXZpY2UK
LSAqIEBjZGNsa19zdGF0ZTogbmV3IENEQ0xLIHN0YXRlCisgKiBAY2RjbGtfY29uZmlnOiBuZXcg
Q0RDTEsgY29uZmlndXJhdGlvbgogICogQHBpcGU6IHBpcGUgd2l0aCB3aGljaCB0byBzeW5jaHJv
bml6ZSB0aGUgdXBkYXRlCiAgKgogICogUHJvZ3JhbSB0aGUgaGFyZHdhcmUgYmFzZWQgb24gdGhl
IHBhc3NlZCBpbiBDRENMSyBzdGF0ZSwKICAqIGlmIG5lY2Vzc2FyeS4KICAqLwogc3RhdGljIHZv
aWQgaW50ZWxfc2V0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJ
CSAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgKmNkY2xrX3N0YXRlLAorCQkJICAg
IGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgKmNkY2xrX2NvbmZpZywKIAkJCSAgICBl
bnVtIHBpcGUgcGlwZSkKIHsKLQlpZiAoIWludGVsX2NkY2xrX2NoYW5nZWQoJmRldl9wcml2LT5j
ZGNsay5odywgY2RjbGtfc3RhdGUpKQorCWlmICghaW50ZWxfY2RjbGtfY2hhbmdlZCgmZGV2X3By
aXYtPmNkY2xrLmh3LCBjZGNsa19jb25maWcpKQogCQlyZXR1cm47CiAKIAlpZiAoV0FSTl9PTl9P
TkNFKCFkZXZfcHJpdi0+ZGlzcGxheS5zZXRfY2RjbGspKQogCQlyZXR1cm47CiAKLQlpbnRlbF9k
dW1wX2NkY2xrX3N0YXRlKGNkY2xrX3N0YXRlLCAiQ2hhbmdpbmcgQ0RDTEsgdG8iKTsKKwlpbnRl
bF9kdW1wX2NkY2xrX2NvbmZpZyhjZGNsa19jb25maWcsICJDaGFuZ2luZyBDRENMSyB0byIpOwog
Ci0JZGV2X3ByaXYtPmRpc3BsYXkuc2V0X2NkY2xrKGRldl9wcml2LCBjZGNsa19zdGF0ZSwgcGlw
ZSk7CisJZGV2X3ByaXYtPmRpc3BsYXkuc2V0X2NkY2xrKGRldl9wcml2LCBjZGNsa19jb25maWcs
IHBpcGUpOwogCi0JaWYgKFdBUk4oaW50ZWxfY2RjbGtfY2hhbmdlZCgmZGV2X3ByaXYtPmNkY2xr
Lmh3LCBjZGNsa19zdGF0ZSksCisJaWYgKFdBUk4oaW50ZWxfY2RjbGtfY2hhbmdlZCgmZGV2X3By
aXYtPmNkY2xrLmh3LCBjZGNsa19jb25maWcpLAogCQkgImNkY2xrIHN0YXRlIGRvZXNuJ3QgbWF0
Y2ghXG4iKSkgewotCQlpbnRlbF9kdW1wX2NkY2xrX3N0YXRlKCZkZXZfcHJpdi0+Y2RjbGsuaHcs
ICJbaHcgc3RhdGVdIik7Ci0JCWludGVsX2R1bXBfY2RjbGtfc3RhdGUoY2RjbGtfc3RhdGUsICJb
c3cgc3RhdGVdIik7CisJCWludGVsX2R1bXBfY2RjbGtfY29uZmlnKCZkZXZfcHJpdi0+Y2RjbGsu
aHcsICJbaHcgc3RhdGVdIik7CisJCWludGVsX2R1bXBfY2RjbGtfY29uZmlnKGNkY2xrX2NvbmZp
ZywgIltzdyBzdGF0ZV0iKTsKIAl9CiB9CiAKIC8qKgotICogaW50ZWxfc2V0X2NkY2xrX3ByZV9w
bGFuZV91cGRhdGUgLSBQdXNoIHRoZSBDRENMSyBzdGF0ZSB0byB0aGUgaGFyZHdhcmUKKyAqIGlu
dGVsX3NldF9jZGNsa19wcmVfcGxhbmVfdXBkYXRlIC0gUHVzaCB0aGUgQ0RDTEsgY29uZmlndXJh
dGlvbiB0byB0aGUgaGFyZHdhcmUKICAqIEBkZXZfcHJpdjogaTkxNSBkZXZpY2UKLSAqIEBvbGRf
c3RhdGU6IG9sZCBDRENMSyBzdGF0ZQotICogQG5ld19zdGF0ZTogbmV3IENEQ0xLIHN0YXRlCisg
KiBAb2xkX3N0YXRlOiBvbGQgQ0RDTEsgY29uZmlndXJhdGlvbgorICogQG5ld19zdGF0ZTogbmV3
IENEQ0xLIGNvbmZpZ3VyYXRpb24KICAqIEBwaXBlOiBwaXBlIHdpdGggd2hpY2ggdG8gc3luY2hy
b25pemUgdGhlIHVwZGF0ZQogICoKICAqIFByb2dyYW0gdGhlIGhhcmR3YXJlIGJlZm9yZSB1cGRh
dGluZyB0aGUgSFcgcGxhbmUgc3RhdGUgYmFzZWQgb24gdGhlIHBhc3NlZAotICogaW4gQ0RDTEsg
c3RhdGUsIGlmIG5lY2Vzc2FyeS4KKyAqIGluIENEQ0xLIGNvbmZpZ3VyYXRpb24sIGlmIG5lY2Vz
c2FyeS4KICAqLwogdm9pZAogaW50ZWxfc2V0X2NkY2xrX3ByZV9wbGFuZV91cGRhdGUoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAotCQkJCSBjb25zdCBzdHJ1Y3QgaW50ZWxfY2Rj
bGtfc3RhdGUgKm9sZF9zdGF0ZSwKLQkJCQkgY29uc3Qgc3RydWN0IGludGVsX2NkY2xrX3N0YXRl
ICpuZXdfc3RhdGUsCisJCQkJIGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgKm9sZF9z
dGF0ZSwKKwkJCQkgY29uc3Qgc3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyAqbmV3X3N0YXRlLAog
CQkJCSBlbnVtIHBpcGUgcGlwZSkKIHsKIAlpZiAocGlwZSA9PSBJTlZBTElEX1BJUEUgfHwgb2xk
X3N0YXRlLT5jZGNsayA8PSBuZXdfc3RhdGUtPmNkY2xrKQpAQCAtMTkwMywxOSArMTkwNywxOSBA
QCBpbnRlbF9zZXRfY2RjbGtfcHJlX3BsYW5lX3VwZGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsCiB9CiAKIC8qKgotICogaW50ZWxfc2V0X2NkY2xrX3Bvc3RfcGxhbmVfdXBk
YXRlIC0gUHVzaCB0aGUgQ0RDTEsgc3RhdGUgdG8gdGhlIGhhcmR3YXJlCisgKiBpbnRlbF9zZXRf
Y2RjbGtfcG9zdF9wbGFuZV91cGRhdGUgLSBQdXNoIHRoZSBDRENMSyBjb25maWd1cmF0aW9uIHRv
IHRoZSBoYXJkd2FyZQogICogQGRldl9wcml2OiBpOTE1IGRldmljZQotICogQG9sZF9zdGF0ZTog
b2xkIENEQ0xLIHN0YXRlCi0gKiBAbmV3X3N0YXRlOiBuZXcgQ0RDTEsgc3RhdGUKKyAqIEBvbGRf
c3RhdGU6IG9sZCBDRENMSyBjb25maWd1cmF0aW9uCisgKiBAbmV3X3N0YXRlOiBuZXcgQ0RDTEsg
Y29uZmlndXJhdGlvbgogICogQHBpcGU6IHBpcGUgd2l0aCB3aGljaCB0byBzeW5jaHJvbml6ZSB0
aGUgdXBkYXRlCiAgKgogICogUHJvZ3JhbSB0aGUgaGFyZHdhcmUgYWZ0ZXIgdXBkYXRpbmcgdGhl
IEhXIHBsYW5lIHN0YXRlIGJhc2VkIG9uIHRoZSBwYXNzZWQKLSAqIGluIENEQ0xLIHN0YXRlLCBp
ZiBuZWNlc3NhcnkuCisgKiBpbiBDRENMSyBjb25maWd1cmF0aW9uLCBpZiBuZWNlc3NhcnkuCiAg
Ki8KIHZvaWQKIGludGVsX3NldF9jZGNsa19wb3N0X3BsYW5lX3VwZGF0ZShzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfc3Rh
dGUgKm9sZF9zdGF0ZSwKLQkJCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAqbmV3
X3N0YXRlLAorCQkJCSAgY29uc3Qgc3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyAqb2xkX3N0YXRl
LAorCQkJCSAgY29uc3Qgc3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyAqbmV3X3N0YXRlLAogCQkJ
CSAgZW51bSBwaXBlIHBpcGUpCiB7CiAJaWYgKHBpcGUgIT0gSU5WQUxJRF9QSVBFICYmIG9sZF9z
dGF0ZS0+Y2RjbGsgPiBuZXdfc3RhdGUtPmNkY2xrKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jZGNsay5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9jZGNsay5oCmluZGV4IDNmMzc3M2M1ODJhZS4uNzEyY2RhZWE0ZmVmIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NkY2xrLmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jZGNsay5oCkBAIC0xMiw3ICsxMiw3
IEBACiAKIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlOwogc3RydWN0IGludGVsX2F0b21pY19zdGF0
ZTsKLXN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZTsKK3N0cnVjdCBpbnRlbF9jZGNsa19jb25maWc7
CiBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZTsKIAogc3RydWN0IGludGVsX2NkY2xrX3ZhbHMgewpA
QCAtMjksMjIgKzI5LDIyIEBAIHZvaWQgaW50ZWxfaW5pdF9jZGNsa19ob29rcyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBpbnRlbF91cGRhdGVfbWF4X2NkY2xrKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIGludGVsX3VwZGF0ZV9jZGNs
ayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBpbnRlbF91cGRhdGVf
cmF3Y2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7Ci1ib29sIGludGVsX2Nk
Y2xrX25lZWRzX21vZGVzZXQoY29uc3Qgc3RydWN0IGludGVsX2NkY2xrX3N0YXRlICphLAotCQkJ
ICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAqYik7Citib29sIGludGVsX2Nk
Y2xrX25lZWRzX21vZGVzZXQoY29uc3Qgc3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyAqYSwKKwkJ
CSAgICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnICpiKTsKIHZvaWQgaW50ZWxf
Y2RjbGtfY2xlYXJfc3RhdGUoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpOwogdm9p
ZCBpbnRlbF9jZGNsa19zd2FwX3N0YXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRl
KTsKIHZvaWQKIGludGVsX3NldF9jZGNsa19wcmVfcGxhbmVfdXBkYXRlKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdiwKLQkJCQkgY29uc3Qgc3RydWN0IGludGVsX2NkY2xrX3N0YXRl
ICpvbGRfc3RhdGUsCi0JCQkJIGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAqbmV3X3N0
YXRlLAorCQkJCSBjb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnICpvbGRfc3RhdGUsCisJ
CQkJIGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgKm5ld19zdGF0ZSwKIAkJCQkgZW51
bSBwaXBlIHBpcGUpOwogdm9pZAogaW50ZWxfc2V0X2NkY2xrX3Bvc3RfcGxhbmVfdXBkYXRlKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJCQkgIGNvbnN0IHN0cnVjdCBpbnRl
bF9jZGNsa19zdGF0ZSAqb2xkX3N0YXRlLAotCQkJCSAgY29uc3Qgc3RydWN0IGludGVsX2NkY2xr
X3N0YXRlICpuZXdfc3RhdGUsCisJCQkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmln
ICpvbGRfc3RhdGUsCisJCQkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnICpuZXdf
c3RhdGUsCiAJCQkJICBlbnVtIHBpcGUgcGlwZSk7Ci12b2lkIGludGVsX2R1bXBfY2RjbGtfc3Rh
dGUoY29uc3Qgc3RydWN0IGludGVsX2NkY2xrX3N0YXRlICpjZGNsa19zdGF0ZSwKLQkJCSAgICBj
b25zdCBjaGFyICpjb250ZXh0KTsKK3ZvaWQgaW50ZWxfZHVtcF9jZGNsa19jb25maWcoY29uc3Qg
c3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyAqY2RjbGtfY29uZmlnLAorCQkJICAgICBjb25zdCBj
aGFyICpjb250ZXh0KTsKIGludCBpbnRlbF9tb2Rlc2V0X2NhbGNfY2RjbGsoc3RydWN0IGludGVs
X2F0b21pY19zdGF0ZSAqc3RhdGUpOwogCiAjZW5kaWYgLyogX19JTlRFTF9DRENMS19IX18gKi8K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggZjNm
OWZlOTRlZDQxLi5kZTJhYjQ0YjkxNTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZGlzcGxheS5jCkBAIC0xNzM1OSw3ICsxNzM1OSw3IEBAIHZvaWQgaW50ZWxfaW5p
dF9kaXNwbGF5X2hvb2tzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIHZvaWQg
aW50ZWxfbW9kZXNldF9pbml0X2h3KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewog
CWludGVsX3VwZGF0ZV9jZGNsayhpOTE1KTsKLQlpbnRlbF9kdW1wX2NkY2xrX3N0YXRlKCZpOTE1
LT5jZGNsay5odywgIkN1cnJlbnQgQ0RDTEsiKTsKKwlpbnRlbF9kdW1wX2NkY2xrX2NvbmZpZygm
aTkxNS0+Y2RjbGsuaHcsICJDdXJyZW50IENEQ0xLIik7CiAJaTkxNS0+Y2RjbGsubG9naWNhbCA9
IGk5MTUtPmNkY2xrLmFjdHVhbCA9IGk5MTUtPmNkY2xrLmh3OwogfQogCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5jCmluZGV4IDIxNTYx
YWNmYTNhYy4uMmRjMDBkNGIxMTViIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYwpAQCAtMTAzNyw3ICsxMDM3LDcgQEAgc3RhdGlj
IHZvaWQgZ2VuOV9hc3NlcnRfZGJ1Zl9lbmFibGVkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdikKIAogc3RhdGljIHZvaWQgZ2VuOV9kaXNhYmxlX2RjX3N0YXRlcyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiB7Ci0Jc3RydWN0IGludGVsX2NkY2xrX3N0YXRlIGNk
Y2xrX3N0YXRlID0ge307CisJc3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyBjZGNsa19jb25maWcg
PSB7fTsKIAogCWlmIChkZXZfcHJpdi0+Y3NyLnRhcmdldF9kY19zdGF0ZSA9PSBEQ19TVEFURV9F
Tl9EQzNDTykgewogCQl0Z2xfZGlzYWJsZV9kYzNjbyhkZXZfcHJpdik7CkBAIC0xMDQ2LDkgKzEw
NDYsOSBAQCBzdGF0aWMgdm9pZCBnZW45X2Rpc2FibGVfZGNfc3RhdGVzKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdikKIAogCWdlbjlfc2V0X2RjX3N0YXRlKGRldl9wcml2LCBEQ19T
VEFURV9ESVNBQkxFKTsKIAotCWRldl9wcml2LT5kaXNwbGF5LmdldF9jZGNsayhkZXZfcHJpdiwg
JmNkY2xrX3N0YXRlKTsKKwlkZXZfcHJpdi0+ZGlzcGxheS5nZXRfY2RjbGsoZGV2X3ByaXYsICZj
ZGNsa19jb25maWcpOwogCS8qIENhbid0IHJlYWQgb3V0IHZvbHRhZ2VfbGV2ZWwgc28gY2FuJ3Qg
dXNlIGludGVsX2NkY2xrX2NoYW5nZWQoKSAqLwotCVdBUk5fT04oaW50ZWxfY2RjbGtfbmVlZHNf
bW9kZXNldCgmZGV2X3ByaXYtPmNkY2xrLmh3LCAmY2RjbGtfc3RhdGUpKTsKKwlXQVJOX09OKGlu
dGVsX2NkY2xrX25lZWRzX21vZGVzZXQoJmRldl9wcml2LT5jZGNsay5odywgJmNkY2xrX2NvbmZp
ZykpOwogCiAJZ2VuOV9hc3NlcnRfZGJ1Zl9lbmFibGVkKGRldl9wcml2KTsKIApAQCAtNDY1OSw3
ICs0NjU5LDcgQEAgc3RhdGljIHZvaWQgaHN3X3Jlc3RvcmVfbGNwbGwoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2KQogCWludGVsX3VuY29yZV9mb3JjZXdha2VfcHV0KCZkZXZfcHJp
di0+dW5jb3JlLCBGT1JDRVdBS0VfQUxMKTsKIAogCWludGVsX3VwZGF0ZV9jZGNsayhkZXZfcHJp
dik7Ci0JaW50ZWxfZHVtcF9jZGNsa19zdGF0ZSgmZGV2X3ByaXYtPmNkY2xrLmh3LCAiQ3VycmVu
dCBDRENMSyIpOworCWludGVsX2R1bXBfY2RjbGtfY29uZmlnKCZkZXZfcHJpdi0+Y2RjbGsuaHcs
ICJDdXJyZW50IENEQ0xLIik7CiB9CiAKIC8qCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCmluZGV4IGE2Yjk1YThhYjMyMy4uNDg1YjI2
ZDA1ZTkwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXlfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXlfdHlwZXMuaApAQCAtNDYzLDE3ICs0NjMsMTcgQEAgc3RydWN0IGludGVsX2F0b21pY19z
dGF0ZSB7CiAKIAlzdHJ1Y3QgewogCQkvKgotCQkgKiBMb2dpY2FsIHN0YXRlIG9mIGNkY2xrICh1
c2VkIGZvciBhbGwgc2NhbGluZywgd2F0ZXJtYXJrLAotCQkgKiBldGMuIGNhbGN1bGF0aW9ucyBh
bmQgY2hlY2tzKS4gVGhpcyBpcyBjb21wdXRlZCBhcyBpZiBhbGwKLQkJICogZW5hYmxlZCBjcnRj
cyB3ZXJlIGFjdGl2ZS4KKwkJICogTG9naWNhbCBjb25maWd1cmF0aW9uIG9mIGNkY2xrICh1c2Vk
IGZvciBhbGwgc2NhbGluZywKKwkJICogd2F0ZXJtYXJrLCBldGMuIGNhbGN1bGF0aW9ucyBhbmQg
Y2hlY2tzKS4gVGhpcyBpcworCQkgKiBjb21wdXRlZCBhcyBpZiBhbGwgZW5hYmxlZCBjcnRjcyB3
ZXJlIGFjdGl2ZS4KIAkJICovCi0JCXN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSBsb2dpY2FsOwor
CQlzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnIGxvZ2ljYWw7CiAKIAkJLyoKLQkJICogQWN0dWFs
IHN0YXRlIG9mIGNkY2xrLCBjYW4gYmUgZGlmZmVyZW50IGZyb20gdGhlIGxvZ2ljYWwKLQkJICog
c3RhdGUgb25seSB3aGVuIGFsbCBjcnRjJ3MgYXJlIERQTVMgb2ZmLgorCQkgKiBBY3R1YWwgY29u
ZmlndXJhdGlvbiBvZiBjZGNsaywgY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZQorCQkgKiBsb2dp
Y2FsIGNvbmZpZ3VyYXRpb24gb25seSB3aGVuIGFsbCBjcnRjJ3MgYXJlIERQTVMgb2ZmLgogCQkg
Ki8KLQkJc3RydWN0IGludGVsX2NkY2xrX3N0YXRlIGFjdHVhbDsKKwkJc3RydWN0IGludGVsX2Nk
Y2xrX2NvbmZpZyBhY3R1YWw7CiAKIAkJaW50IGZvcmNlX21pbl9jZGNsazsKIAkJYm9vbCBmb3Jj
ZV9taW5fY2RjbGtfY2hhbmdlZDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IDY1MGY0MmJk
OWNmYi4uNDkyNzZjZTI4MTlmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTI1NSwxOCAr
MjU1LDE4IEBAIHN0cnVjdCBzZHZvX2RldmljZV9tYXBwaW5nIHsKIHN0cnVjdCBpbnRlbF9jb25u
ZWN0b3I7CiBzdHJ1Y3QgaW50ZWxfZW5jb2RlcjsKIHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGU7
CitzdHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnOwogc3RydWN0IGludGVsX2NydGNfc3RhdGU7CiBz
dHJ1Y3QgaW50ZWxfaW5pdGlhbF9wbGFuZV9jb25maWc7CiBzdHJ1Y3QgaW50ZWxfY3J0YzsKIHN0
cnVjdCBpbnRlbF9saW1pdDsKIHN0cnVjdCBkcGxsOwotc3RydWN0IGludGVsX2NkY2xrX3N0YXRl
OwogCiBzdHJ1Y3QgZHJtX2k5MTVfZGlzcGxheV9mdW5jcyB7CiAJdm9pZCAoKmdldF9jZGNsayko
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAotCQkJICBzdHJ1Y3QgaW50ZWxfY2Rj
bGtfc3RhdGUgKmNkY2xrX3N0YXRlKTsKKwkJCSAgc3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyAq
Y2RjbGtfY29uZmlnKTsKIAl2b2lkICgqc2V0X2NkY2xrKShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsCi0JCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSAqY2RjbGtf
c3RhdGUsCisJCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgKmNkY2xrX2NvbmZp
ZywKIAkJCSAgZW51bSBwaXBlIHBpcGUpOwogCWludCAoKmdldF9maWZvX3NpemUpKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJCSAgICAgZW51bSBpOXh4X3BsYW5lX2lkIGk5
eHhfcGxhbmUpOwpAQCAtODgwLDcgKzg4MCw3IEBAIHN0cnVjdCBpbnRlbF93bV9jb25maWcgewog
CWJvb2wgc3ByaXRlc19zY2FsZWQ7CiB9OwogCi1zdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgewor
c3RydWN0IGludGVsX2NkY2xrX2NvbmZpZyB7CiAJdW5zaWduZWQgaW50IGNkY2xrLCB2Y28sIHJl
ZiwgYnlwYXNzOwogCXU4IHZvbHRhZ2VfbGV2ZWw7CiB9OwpAQCAtMTAxMSwxNyArMTAxMSwxNyBA
QCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSB7CiAJICovCiAJc3RydWN0IHsKIAkJLyoKLQkJICog
VGhlIGN1cnJlbnQgbG9naWNhbCBjZGNsayBzdGF0ZS4KKwkJICogVGhlIGN1cnJlbnQgbG9naWNh
bCBjZGNsayBjb25maWd1cmF0aW9uLgogCQkgKiBTZWUgaW50ZWxfYXRvbWljX3N0YXRlLmNkY2xr
LmxvZ2ljYWwKIAkJICovCi0JCXN0cnVjdCBpbnRlbF9jZGNsa19zdGF0ZSBsb2dpY2FsOworCQlz
dHJ1Y3QgaW50ZWxfY2RjbGtfY29uZmlnIGxvZ2ljYWw7CiAJCS8qCi0JCSAqIFRoZSBjdXJyZW50
IGFjdHVhbCBjZGNsayBzdGF0ZS4KKwkJICogVGhlIGN1cnJlbnQgYWN0dWFsIGNkY2xrIGNvbmZp
Z3VyYXRpb24uCiAJCSAqIFNlZSBpbnRlbF9hdG9taWNfc3RhdGUuY2RjbGsuYWN0dWFsCiAJCSAq
LwotCQlzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgYWN0dWFsOwotCQkvKiBUaGUgY3VycmVudCBo
YXJkd2FyZSBjZGNsayBzdGF0ZSAqLwotCQlzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgaHc7CisJ
CXN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcgYWN0dWFsOworCQkvKiBUaGUgY3VycmVudCBoYXJk
d2FyZSBjZGNsayBjb25maWd1cmF0aW9uICovCisJCXN0cnVjdCBpbnRlbF9jZGNsa19jb25maWcg
aHc7CiAKIAkJLyogY2RjbGssIGRpdmlkZXIsIGFuZCByYXRpbyB0YWJsZSBmcm9tIGJzcGVjICov
CiAJCWNvbnN0IHN0cnVjdCBpbnRlbF9jZGNsa192YWxzICp0YWJsZTsKLS0gCjIuMjQuMQoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1h
aWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

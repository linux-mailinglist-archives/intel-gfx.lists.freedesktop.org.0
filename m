Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E90F110EE05
	for <lists+intel-gfx@lfdr.de>; Mon,  2 Dec 2019 18:18:19 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 56110894FE;
	Mon,  2 Dec 2019 17:18:18 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-vk1-xa44.google.com (mail-vk1-xa44.google.com
 [IPv6:2607:f8b0:4864:20::a44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6019E894FE
 for <intel-gfx@lists.freedesktop.org>; Mon,  2 Dec 2019 17:18:16 +0000 (UTC)
Received: by mail-vk1-xa44.google.com with SMTP id b64so209873vkg.0
 for <intel-gfx@lists.freedesktop.org>; Mon, 02 Dec 2019 09:18:16 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=XfBee5QwjpBw6an+gOBTGYfdrW6ntoHrn33dB8VJLN4=;
 b=EsBkLFLBBDrC71sP4eJPzbnlb/eZsU46Vs54upwnGR4BYgQ7ZpCdy3uu1ws2I64zQE
 EqnDhrzrFLf0alSGGxOp6Q+UL/d8DJ+E8hgKlEPkFW+jgxNpQV/RlNXPuAmFNM1+nret
 pIF/hF4zjkzRkcgdk+54bVWWFQvsX/zB9fpRG/osapQFy99tj0Z4VfnI/rfPrKFqTD7K
 kFYLO34OrV5v8lNht8ktkiswFj+qe81ahyRqcEpQb05hpB9KpIKgMhkjrL6a44C8EV59
 q0SRw+6FWKCQ1FJy2iZ5xEM5pCX++vKsVORzZ8nImzyOPrp4oyILGrRWE63vghljBKu4
 0PUg==
X-Gm-Message-State: APjAAAWPfCtuz0PJ0btWoO6hlp3l5pqyASNJiAWJ1pTYaTKZd7D52Cl3
 cRhkCXyKgcgzoUXBswmCnXD5+FCn/G5kAn78ETQiQg==
X-Google-Smtp-Source: APXvYqxDUuPmerZqjN/hpvGtDzE10MY0diMwmEmZaOCgRfgMorstsnMW6+NuV+JpaEBPMv1RhmTT4EE6rc6FFoczH5U=
X-Received: by 2002:a1f:5fc1:: with SMTP id t184mr374441vkb.57.1575307095137; 
 Mon, 02 Dec 2019 09:18:15 -0800 (PST)
MIME-Version: 1.0
References: <20191128224214.496728-1-chris@chris-wilson.co.uk>
In-Reply-To: <20191128224214.496728-1-chris@chris-wilson.co.uk>
From: Matthew Auld <matthew.william.auld@gmail.com>
Date: Mon, 2 Dec 2019 17:17:48 +0000
Message-ID: <CAM0jSHOBEjHcBjdq=Z5Ck9Q7pEmHr0xYLUjvpKTitz6aXEOTzA@mail.gmail.com>
To: Chris Wilson <chris@chris-wilson.co.uk>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=XfBee5QwjpBw6an+gOBTGYfdrW6ntoHrn33dB8VJLN4=;
 b=Ayw72OmBj1mn7NK6cCqU7cxyKOvLJZ6h4uXa7SfC+5Ky2DFNzS68qBPsv3gMzWeStF
 R1xJY+XVixBDhzcS2wrqVZOtaE6w5dDNgpfmXx7oJ/fnaeYpHrda6b2MQSKFtGrySOPP
 MULj2gsvrD3aqrEeVM1Nx78SKtHMfIzrQUZ743HJX32fNSAHJVWASC9TUFj2Mq4DJUpK
 FStetpG2R4LwxSr+MQdvVxxKNEbcsmB/pJaAeGZ/LYcpNZ7j5yN1piSZMDyrP5DHtll3
 FsR1OOmazyLP0GXY4hhCE2gXvsXEmetWi1Z1M05WHJLU7dObcl64HGgOeJixSOgQdar5
 LfyA==
Subject: Re: [Intel-gfx] [PATCH] drm/i915/gem: Unbind all current vma on
 changing cache-level
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel Graphics Development <intel-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCAyOCBOb3YgMjAxOSBhdCAyMjo0MiwgQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13
aWxzb24uY28udWs+IHdyb3RlOgo+Cj4gQXZvaWQgZGFuZ2Vyb3VzIHJhY2UgaGFuZGxpbmcgb2Yg
ZGVzdHJveWVkIHZtYSBieSB1bmJpbmRpbmcgYWxsIHZtYQo+IGluc3RlYWQuIFVuZm9ydHVuYXRl
bHksIHRoaXMgc3RvcHMgdXMgZnJvbSB0cnlpbmcgdG8gYmUgY2xldmVyIGFuZCBvbmx5Cj4gZG9p
bmcgdGhlIG1pbmltYWwgY2hhbmdlIHJlcXVpcmVkLCBzbyBvbiBmaXJzdCB1c2Ugb2Ygc2Nhbm91
dCB3ZSBtYXkKPiBlbmNvdW50ZXIgYW4gYW5ub3lpbmcgc3RhbGwgYXMgaXQgdHJhbnNpdGlvbnMg
dG8gYSBuZXcgY2FjaGUgbGV2ZWwuCj4KPiBCdWd6aWxsYTogaHR0cHM6Ly9idWdzLmZyZWVkZXNr
dG9wLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTEyNDEzCj4gU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2ls
c29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9kb21haW4uYyB8IDEyNCArKy0tLS0tLS0tLS0tLS0tLS0tLS0KPiAg
MSBmaWxlIGNoYW5nZWQsIDcgaW5zZXJ0aW9ucygrKSwgMTE3IGRlbGV0aW9ucygtKQo+Cj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kb21haW4uYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kb21haW4uYwo+IGluZGV4IDlhZWJjZjI2
MzE5MS4uYmQ4NDZiNGZlYzIwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9kb21haW4uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9kb21haW4uYwo+IEBAIC0xOTIsMTI2ICsxOTIsMTYgQEAgaW50IGk5MTVfZ2VtX29iamVj
dF9zZXRfY2FjaGVfbGV2ZWwoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKPiAgICAg
ICAgIGlmIChvYmotPmNhY2hlX2xldmVsID09IGNhY2hlX2xldmVsKQo+ICAgICAgICAgICAgICAg
ICByZXR1cm4gMDsKPgo+IC0gICAgICAgLyogSW5zcGVjdCB0aGUgbGlzdCBvZiBjdXJyZW50bHkg
Ym91bmQgVk1BIGFuZCB1bmJpbmQgYW55IHRoYXQgd291bGQKPiAtICAgICAgICAqIGJlIGludmFs
aWQgZ2l2ZW4gdGhlIG5ldyBjYWNoZS1sZXZlbC4gVGhpcyBpcyBwcmluY2lwYWxseSB0bwo+IC0g
ICAgICAgICogY2F0Y2ggdGhlIGlzc3VlIG9mIHRoZSBDUyBwcmVmZXRjaCBjcm9zc2luZyBwYWdl
IGJvdW5kYXJpZXMgYW5kCj4gLSAgICAgICAgKiByZWFkaW5nIGFuIGludmFsaWQgUFRFIG9uIG9s
ZGVyIGFyY2hpdGVjdHVyZXMuCj4gLSAgICAgICAgKi8KPiAtcmVzdGFydDoKPiAtICAgICAgIGxp
c3RfZm9yX2VhY2hfZW50cnkodm1hLCAmb2JqLT52bWEubGlzdCwgb2JqX2xpbmspIHsKPiAtICAg
ICAgICAgICAgICAgaWYgKCFkcm1fbW1fbm9kZV9hbGxvY2F0ZWQoJnZtYS0+bm9kZSkpCj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgY29udGludWU7Cj4gLQo+IC0gICAgICAgICAgICAgICBpZiAo
aTkxNV92bWFfaXNfcGlubmVkKHZtYSkpIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICBEUk1f
REVCVUcoImNhbiBub3QgY2hhbmdlIHRoZSBjYWNoZSBsZXZlbCBvZiBwaW5uZWQgb2JqZWN0c1xu
Iik7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1FQlVTWTsKPiAtICAgICAgICAg
ICAgICAgfQo+IC0KPiAtICAgICAgICAgICAgICAgaWYgKCFpOTE1X3ZtYV9pc19jbG9zZWQodm1h
KSAmJgo+IC0gICAgICAgICAgICAgICAgICAgaTkxNV9nZW1fdmFsaWRfZ3R0X3NwYWNlKHZtYSwg
Y2FjaGVfbGV2ZWwpKQo+IC0gICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwo+IC0KPiAt
ICAgICAgICAgICAgICAgcmV0ID0gaTkxNV92bWFfdW5iaW5kKHZtYSk7Cj4gLSAgICAgICAgICAg
ICAgIGlmIChyZXQpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiAtCj4g
LSAgICAgICAgICAgICAgIC8qIEFzIHVuYmluZGluZyBtYXkgYWZmZWN0IG90aGVyIGVsZW1lbnRz
IGluIHRoZQo+IC0gICAgICAgICAgICAgICAgKiBvYmotPnZtYV9saXN0IChkdWUgdG8gc2lkZS1l
ZmZlY3RzIGZyb20gcmV0aXJpbmcKPiAtICAgICAgICAgICAgICAgICogYW4gYWN0aXZlIHZtYSks
IHBsYXkgc2FmZSBhbmQgcmVzdGFydCB0aGUgaXRlcmF0b3IuCj4gLSAgICAgICAgICAgICAgICAq
Lwo+IC0gICAgICAgICAgICAgICBnb3RvIHJlc3RhcnQ7Cj4gLSAgICAgICB9Cj4gLQo+IC0gICAg
ICAgLyogV2UgY2FuIHJldXNlIHRoZSBleGlzdGluZyBkcm1fbW0gbm9kZXMgYnV0IG5lZWQgdG8g
Y2hhbmdlIHRoZQo+IC0gICAgICAgICogY2FjaGUtbGV2ZWwgb24gdGhlIFBURS4gV2UgY291bGQg
c2ltcGx5IHVuYmluZCB0aGVtIGFsbCBhbmQKPiAtICAgICAgICAqIHJlYmluZCB3aXRoIHRoZSBj
b3JyZWN0IGNhY2hlLWxldmVsIG9uIG5leHQgdXNlLiBIb3dldmVyIHNpbmNlCj4gLSAgICAgICAg
KiB3ZSBhbHJlYWR5IGhhdmUgYSB2YWxpZCBzbG90LCBkbWEgbWFwcGluZywgcGFnZXMgZXRjLCB3
ZSBtYXkgYXMKPiAtICAgICAgICAqIHJld3JpdGUgdGhlIFBURSBpbiB0aGUgYmVsaWVmIHRoYXQg
ZG9pbmcgc28gdHJhbXBsZXMgdXBvbiBsZXNzCj4gLSAgICAgICAgKiBzdGF0ZSBhbmQgc28gaW52
b2x2ZXMgbGVzcyB3b3JrLgo+IC0gICAgICAgICovCj4gLSAgICAgICBpZiAoYXRvbWljX3JlYWQo
Jm9iai0+YmluZF9jb3VudCkpIHsKPiAtICAgICAgICAgICAgICAgc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTUgPSB0b19pOTE1KG9iai0+YmFzZS5kZXYpOwo+IC0KPiAtICAgICAgICAgICAg
ICAgLyogQmVmb3JlIHdlIGNoYW5nZSB0aGUgUFRFLCB0aGUgR1BVIG11c3Qgbm90IGJlIGFjY2Vz
c2luZyBpdC4KPiAtICAgICAgICAgICAgICAgICogSWYgd2Ugd2FpdCB1cG9uIHRoZSBvYmplY3Qs
IHdlIGtub3cgdGhhdCBhbGwgdGhlIGJvdW5kCj4gLSAgICAgICAgICAgICAgICAqIFZNQSBhcmUg
bm8gbG9uZ2VyIGFjdGl2ZS4KPiAtICAgICAgICAgICAgICAgICovCj4gLSAgICAgICAgICAgICAg
IHJldCA9IGk5MTVfZ2VtX29iamVjdF93YWl0KG9iaiwKPiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgSTkxNV9XQUlUX0lOVEVSUlVQVElCTEUgfAo+IC0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJOTE1X1dBSVRfQUxMLAo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNQVhfU0NIRURVTEVfVElNRU9V
VCk7Cj4gLSAgICAgICAgICAgICAgIGlmIChyZXQpCj4gLSAgICAgICAgICAgICAgICAgICAgICAg
cmV0dXJuIHJldDsKPiAtCj4gLSAgICAgICAgICAgICAgIGlmICghSEFTX0xMQyhpOTE1KSAmJiBj
YWNoZV9sZXZlbCAhPSBJOTE1X0NBQ0hFX05PTkUpIHsKPiAtICAgICAgICAgICAgICAgICAgICAg
ICBpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZiA9Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpbnRlbF9ydW50aW1lX3BtX2dldCgmaTkxNS0+cnVudGltZV9wbSk7Cj4gLQo+IC0gICAg
ICAgICAgICAgICAgICAgICAgIC8qCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICogQWNjZXNz
IHRvIHNub29wYWJsZSBwYWdlcyB0aHJvdWdoIHRoZSBHVFQgaXMKPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgKiBpbmNvaGVyZW50IGFuZCBvbiBzb21lIG1hY2hpbmVzIGNhdXNlcyBhIGhhcmQK
PiAtICAgICAgICAgICAgICAgICAgICAgICAgKiBsb2NrdXAuIFJlbGlucXVpc2ggdGhlIENQVSBt
bWFwaW5nIHRvIGZvcmNlCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICogdXNlcnNwYWNlIHRv
IHJlZmF1bHQgaW4gdGhlIHBhZ2VzIGFuZCB3ZSBjYW4KPiAtICAgICAgICAgICAgICAgICAgICAg
ICAgKiB0aGVuIGRvdWJsZSBjaGVjayBpZiB0aGUgR1RUIG1hcHBpbmcgaXMgc3RpbGwKPiAtICAg
ICAgICAgICAgICAgICAgICAgICAgKiB2YWxpZCBmb3IgdGhhdCBwb2ludGVyIGFjY2Vzcy4KPiAt
ICAgICAgICAgICAgICAgICAgICAgICAgKi8KPiAtICAgICAgICAgICAgICAgICAgICAgICByZXQg
PSBtdXRleF9sb2NrX2ludGVycnVwdGlibGUoJmk5MTUtPmdndHQudm0ubXV0ZXgpOwo+IC0gICAg
ICAgICAgICAgICAgICAgICAgIGlmIChyZXQpIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGludGVsX3J1bnRpbWVfcG1fcHV0KCZpOTE1LT5ydW50aW1lX3BtLAo+IC0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FrZXJlZik7Cj4g
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+IC0gICAgICAgICAg
ICAgICAgICAgICAgIH0KPiAtCj4gLSAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai0+dXNl
cmZhdWx0X2NvdW50KQo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19pOTE1X2dl
bV9vYmplY3RfcmVsZWFzZV9tbWFwKG9iaik7Cj4gLQo+IC0gICAgICAgICAgICAgICAgICAgICAg
IC8qCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICogQXMgd2Ugbm8gbG9uZ2VyIG5lZWQgYSBm
ZW5jZSBmb3IgR1RUIGFjY2VzcywKPiAtICAgICAgICAgICAgICAgICAgICAgICAgKiB3ZSBjYW4g
cmVsaW5xdWlzaCBpdCBub3cgKGFuZCBzbyBwcmV2ZW50IGhhdmluZwo+IC0gICAgICAgICAgICAg
ICAgICAgICAgICAqIHRvIHN0ZWFsIGEgZmVuY2UgZnJvbSBzb21lb25lIGVsc2Ugb24gdGhlIG5l
eHQKPiAtICAgICAgICAgICAgICAgICAgICAgICAgKiBmZW5jZSByZXF1ZXN0KS4gTm90ZSBHUFUg
YWN0aXZpdHkgd291bGQgaGF2ZQo+IC0gICAgICAgICAgICAgICAgICAgICAgICAqIGRyb3BwZWQg
dGhlIGZlbmNlIGFzIGFsbCBzbm9vcGFibGUgYWNjZXNzIGlzCj4gLSAgICAgICAgICAgICAgICAg
ICAgICAgICogc3VwcG9zZWQgdG8gYmUgbGluZWFyLgo+IC0gICAgICAgICAgICAgICAgICAgICAg
ICAqLwo+IC0gICAgICAgICAgICAgICAgICAgICAgIGZvcl9lYWNoX2dndHRfdm1hKHZtYSwgb2Jq
KSB7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBpOTE1X3ZtYV9yZXZv
a2VfZmVuY2Uodm1hKTsKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXQp
Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+IC0gICAg
ICAgICAgICAgICAgICAgICAgIH0KPiAtICAgICAgICAgICAgICAgICAgICAgICBtdXRleF91bmxv
Y2soJmk5MTUtPmdndHQudm0ubXV0ZXgpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIGludGVs
X3J1bnRpbWVfcG1fcHV0KCZpOTE1LT5ydW50aW1lX3BtLCB3YWtlcmVmKTsKPiAtICAgICAgICAg
ICAgICAgICAgICAgICBpZiAocmV0KQo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
cmV0dXJuIHJldDsKPiAtICAgICAgICAgICAgICAgfSBlbHNlIHsKPiAtICAgICAgICAgICAgICAg
ICAgICAgICAvKgo+IC0gICAgICAgICAgICAgICAgICAgICAgICAqIFdlIGVpdGhlciBoYXZlIGlu
Y29oZXJlbnQgYmFja2luZyBzdG9yZSBhbmQKPiAtICAgICAgICAgICAgICAgICAgICAgICAgKiBz
byBubyBHVFQgYWNjZXNzIG9yIHRoZSBhcmNoaXRlY3R1cmUgaXMgZnVsbHkKPiAtICAgICAgICAg
ICAgICAgICAgICAgICAgKiBjb2hlcmVudC4gSW4gc3VjaCBjYXNlcywgZXhpc3RpbmcgR1RUIG1t
YXBzCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICogaWdub3JlIHRoZSBjYWNoZSBiaXQgaW4g
dGhlIFBURSBhbmQgd2UgY2FuCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICogcmV3cml0ZSBp
dCB3aXRob3V0IGNvbmZ1c2luZyB0aGUgR1BVIG9yIGhhdmluZwo+IC0gICAgICAgICAgICAgICAg
ICAgICAgICAqIHRvIGZvcmNlIHVzZXJzcGFjZSB0byBmYXVsdCBiYWNrIGluIGl0cyBtbWFwcy4K
PiAtICAgICAgICAgICAgICAgICAgICAgICAgKi8KPiAtICAgICAgICAgICAgICAgfQo+IC0KPiAt
ICAgICAgICAgICAgICAgbGlzdF9mb3JfZWFjaF9lbnRyeSh2bWEsICZvYmotPnZtYS5saXN0LCBv
YmpfbGluaykgewo+IC0gICAgICAgICAgICAgICAgICAgICAgIGlmICghZHJtX21tX25vZGVfYWxs
b2NhdGVkKCZ2bWEtPm5vZGUpKQo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29u
dGludWU7Cj4gLQo+IC0gICAgICAgICAgICAgICAgICAgICAgIC8qIFdhaXQgZm9yIGFuIGVhcmxp
ZXIgYXN5bmMgYmluZCwgbmVlZCB0byByZXdyaXRlIGl0ICovCj4gLSAgICAgICAgICAgICAgICAg
ICAgICAgcmV0ID0gaTkxNV92bWFfc3luYyh2bWEpOwo+IC0gICAgICAgICAgICAgICAgICAgICAg
IGlmIChyZXQpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+
IC0KPiAtICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBpOTE1X3ZtYV9iaW5kKHZtYSwgY2Fj
aGVfbGV2ZWwsIFBJTl9VUERBVEUsIE5VTEwpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIGlm
IChyZXQpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+IC0g
ICAgICAgICAgICAgICB9Cj4gLSAgICAgICB9Cj4gKyAgICAgICByZXQgPSBpOTE1X2dlbV9vYmpl
Y3RfdW5iaW5kKG9iaiwgSTkxNV9HRU1fT0JKRUNUX1VOQklORF9BQ1RJVkUpOwo+ICsgICAgICAg
aWYgKHJldCkKPiArICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPgo+IC0gICAgICAgbGlzdF9m
b3JfZWFjaF9lbnRyeSh2bWEsICZvYmotPnZtYS5saXN0LCBvYmpfbGluaykgewo+ICsgICAgICAg
c3Bpbl9sb2NrKCZvYmotPnZtYS5sb2NrKTsKPiArICAgICAgIGxpc3RfZm9yX2VhY2hfZW50cnko
dm1hLCAmb2JqLT52bWEubGlzdCwgb2JqX2xpbmspCj4gICAgICAgICAgICAgICAgIGlmIChpOTE1
X3ZtX2hhc19jYWNoZV9jb2xvcmluZyh2bWEtPnZtKSkKPiAgICAgICAgICAgICAgICAgICAgICAg
ICB2bWEtPm5vZGUuY29sb3IgPSBjYWNoZV9sZXZlbDsKPiAtICAgICAgIH0KPiArICAgICAgIHNw
aW5fdW5sb2NrKCZvYmotPnZtYS5sb2NrKTsKCkRvIHdlIHN0aWxsIG5lZWQgdG8gYm90aGVyIHNl
dHRpbmcgbm9kZS5jb2xvcjsgaWYgd2UgdW5iaW5kIHRoZSB2bWEsCnRoZSBjb2xvciB3aWxsIGJl
IHNldCBhZ2FpbiBpZiB3ZSByZS1iaW5kIGl0PyBBbHRob3VnaCB3ZSBvbmx5IHNldCB0aGUKY2Fj
aGUtbGV2ZWwgYmVsb3cgc28gc2VlbXMga2luZGEgcmFjeSBlaXRoZXIgd2F5PwoKUmV2aWV3ZWQt
Ynk6IE1hdHRoZXcgQXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KCj4gKwo+ICAgICAgICAg
aTkxNV9nZW1fb2JqZWN0X3NldF9jYWNoZV9jb2hlcmVuY3kob2JqLCBjYWNoZV9sZXZlbCk7Cj4g
ICAgICAgICBvYmotPmNhY2hlX2RpcnR5ID0gdHJ1ZTsgLyogQWx3YXlzIGludmFsaWRhdGUgc3Rh
bGUgY2FjaGVsaW5lcyAqLwo+Cj4gLS0KPiAyLjI0LjAKPgo+IF9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCj4gSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdAo+IElu
dGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeApfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9pbnRlbC1nZng=

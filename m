Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D23B5F7353
	for <lists+intel-gfx@lfdr.de>; Mon, 11 Nov 2019 12:43:31 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F005A6E8CB;
	Mon, 11 Nov 2019 11:43:28 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7660389FA5
 for <intel-gfx@lists.freedesktop.org>; Mon, 11 Nov 2019 11:43:27 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19158478-1500050 
 for <intel-gfx@lists.freedesktop.org>; Mon, 11 Nov 2019 11:43:26 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 11 Nov 2019 11:43:20 +0000
Message-Id: <20191111114323.5833-2-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191111114323.5833-1-chris@chris-wilson.co.uk>
References: <20191111114323.5833-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 2/5] drm/i915/gem: Embed context/timeline name
 inside the GEM context
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VXNlIGEgc21hbGwgY2hhciBidWZmZXIgaW5zaWRlIHRoZSBpOTE1X2dlbV9jb250ZXh0IHRvIHN0
b3JlIHRoZSB1c2VyCmZyaWVuZGx5IG5hbWUgc28gdGhhdCBjdHgtPm5hbWUgaGFzIHRoZSBzYW1l
IGxpZmV0aW1lIGFzIHRoZSBSQ1UKcHJvdGVjdGVkIEdFTSBjb250ZXh0LiBUaGF0IGlzLCBlLmcu
IHdoZW4gdXNpbmcgcHJpbnRfcmVxdWVzdCgpIHRoYXQKcHJpbnRzIHRoZSB0aW1lbGluZSBuYW1l
IChjdHgtPm5hbWUpLCB0aGUgbmFtZSB3aWxsIG5vdCBiZSBwcmVtYXR1cmVseQpmcmVlZCB1cG9u
IHRoZSBjb250ZXh0IGJlaW5nIGNsb3NlZCBhbmQgdGhlIGxhc3QgcmVmZXJlbmNlIGRyb3BwZWQu
CgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4K
Q2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+CkNjOiBNYXR0aGV3
IEF1bGQgPG1hdHRoZXcuYXVsZEBpbnRlbC5jb20+ClJldmlld2VkLWJ5OiBNaWthIEt1b3BwYWxh
IDxtaWthLmt1b3BwYWxhQGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fY29udGV4dC5jICAgIHwgMTIgKystLS0tLS0tLS0tCiAuLi4vZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0X3R5cGVzLmggIHwgMTggKysrKysrKysrLS0tLS0t
LS0tCiAuLi4vZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmMgIHwgIDQg
Ky0tLQogMyBmaWxlcyBjaGFuZ2VkLCAxMiBpbnNlcnRpb25zKCspLCAyMiBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwppbmRleCA5NGI1
MWIxM2VmMTcuLjk4Mjc3MGU4MTYzZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fY29udGV4dC5jCkBAIC0yNzcsOSArMjc3LDcgQEAgc3RhdGljIHZvaWQgaTkxNV9nZW1f
Y29udGV4dF9mcmVlKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCiAJaWYgKGN0eC0+dGlt
ZWxpbmUpCiAJCWludGVsX3RpbWVsaW5lX3B1dChjdHgtPnRpbWVsaW5lKTsKIAotCWtmcmVlKGN0
eC0+bmFtZSk7CiAJcHV0X3BpZChjdHgtPnBpZCk7Ci0KIAltdXRleF9kZXN0cm95KCZjdHgtPm11
dGV4KTsKIAogCWtmcmVlX3JjdShjdHgsIHJjdSk7CkBAIC03ODksMTIgKzc4Nyw4IEBAIHN0YXRp
YyBpbnQgZ2VtX2NvbnRleHRfcmVnaXN0ZXIoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwK
IAltdXRleF91bmxvY2soJmN0eC0+bXV0ZXgpOwogCiAJY3R4LT5waWQgPSBnZXRfdGFza19waWQo
Y3VycmVudCwgUElEVFlQRV9QSUQpOwotCWN0eC0+bmFtZSA9IGthc3ByaW50ZihHRlBfS0VSTkVM
LCAiJXNbJWRdIiwKLQkJCSAgICAgIGN1cnJlbnQtPmNvbW0sIHBpZF9ucihjdHgtPnBpZCkpOwot
CWlmICghY3R4LT5uYW1lKSB7Ci0JCXJldCA9IC1FTk9NRU07Ci0JCWdvdG8gZXJyX3BpZDsKLQl9
CisJc25wcmludGYoY3R4LT5uYW1lLCBzaXplb2YoY3R4LT5uYW1lKSwgIiVzWyVkXSIsCisJCSBj
dXJyZW50LT5jb21tLCBwaWRfbnIoY3R4LT5waWQpKTsKIAogCS8qIEFuZCBmaW5hbGx5IGV4cG9z
ZSBvdXJzZWx2ZXMgdG8gdXNlcnNwYWNlIHZpYSB0aGUgaWRyICovCiAJbXV0ZXhfbG9jaygmZnBy
aXYtPmNvbnRleHRfaWRyX2xvY2spOwpAQCAtODAzLDggKzc5Nyw2IEBAIHN0YXRpYyBpbnQgZ2Vt
X2NvbnRleHRfcmVnaXN0ZXIoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwKIAlpZiAocmV0
ID49IDApCiAJCWdvdG8gb3V0OwogCi0Ja2ZyZWUoZmV0Y2hfYW5kX3plcm8oJmN0eC0+bmFtZSkp
OwotZXJyX3BpZDoKIAlwdXRfcGlkKGZldGNoX2FuZF96ZXJvKCZjdHgtPnBpZCkpOwogb3V0Ogog
CXJldHVybiByZXQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fY29udGV4dF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2Nv
bnRleHRfdHlwZXMuaAppbmRleCA4NjFkN2Q5MmZlOWYuLjY5ZGY1NDU5YzM1MCAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dF90eXBlcy5oCkBAIC0x
MDAsMTUgKzEwMCw2IEBAIHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0IHsKIAkgKi8KIAlzdHJ1Y3Qg
cGlkICpwaWQ7CiAKLQkvKioKLQkgKiBAbmFtZTogYXJiaXRyYXJ5IG5hbWUKLQkgKgotCSAqIEEg
bmFtZSBpcyBjb25zdHJ1Y3RlZCBmb3IgdGhlIGNvbnRleHQgZnJvbSB0aGUgY3JlYXRvcidzIHBy
b2Nlc3MKLQkgKiBuYW1lLCBwaWQgYW5kIHVzZXIgaGFuZGxlIGluIG9yZGVyIHRvIHVuaXF1ZWx5
IGlkZW50aWZ5IHRoZQotCSAqIGNvbnRleHQgaW4gbWVzc2FnZXMuCi0JICovCi0JY29uc3QgY2hh
ciAqbmFtZTsKLQogCS8qKiBsaW5rOiBwbGFjZSB3aXRoICZkcm1faTkxNV9wcml2YXRlLmNvbnRl
eHRfbGlzdCAqLwogCXN0cnVjdCBsaXN0X2hlYWQgbGluazsKIAlzdHJ1Y3QgbGxpc3Rfbm9kZSBm
cmVlX2xpbms7CkBAIC0xNzYsNiArMTY3LDE1IEBAIHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0IHsK
IAkgKiBwZXIgdm0sIHdoaWNoIG1heSBiZSBvbmUgcGVyIGNvbnRleHQgb3Igc2hhcmVkIHdpdGgg
dGhlIGdsb2JhbCBHVFQpCiAJICovCiAJc3RydWN0IHJhZGl4X3RyZWVfcm9vdCBoYW5kbGVzX3Zt
YTsKKworCS8qKgorCSAqIEBuYW1lOiBhcmJpdHJhcnkgbmFtZSwgdXNlZCBmb3IgdXNlciBkZWJ1
ZworCSAqCisJICogQSBuYW1lIGlzIGNvbnN0cnVjdGVkIGZvciB0aGUgY29udGV4dCBmcm9tIHRo
ZSBjcmVhdG9yJ3MgcHJvY2VzcworCSAqIG5hbWUsIHBpZCBhbmQgdXNlciBoYW5kbGUgaW4gb3Jk
ZXIgdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhlCisJICogY29udGV4dCBpbiBtZXNzYWdlcy4KKwkg
Ki8KKwljaGFyIG5hbWVbVEFTS19DT01NX0xFTiArIDhdOwogfTsKIAogI2VuZGlmIC8qIF9fSTkx
NV9HRU1fQ09OVEVYVF9UWVBFU19IX18gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5jCmluZGV4IGNkY2IwMDYzMjFhNy4uNTNlODllZmIw
OWMwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tf
Y29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19j
b250ZXh0LmMKQEAgLTM3LDkgKzM3LDcgQEAgbW9ja19jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1LAogCWlmIChuYW1lKSB7CiAJCXN0cnVjdCBpOTE1X3BwZ3R0ICpwcGd0dDsK
IAotCQljdHgtPm5hbWUgPSBrc3RyZHVwKG5hbWUsIEdGUF9LRVJORUwpOwotCQlpZiAoIWN0eC0+
bmFtZSkKLQkJCWdvdG8gZXJyX3B1dDsKKwkJc3RybmNweShjdHgtPm5hbWUsIG5hbWUsIHNpemVv
ZihjdHgtPm5hbWUpKTsKIAogCQlwcGd0dCA9IG1vY2tfcHBndHQoaTkxNSwgbmFtZSk7CiAJCWlm
ICghcHBndHQpCi0tIAoyLjI0LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeA==

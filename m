Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D764A182688
	for <lists+intel-gfx@lfdr.de>; Thu, 12 Mar 2020 02:17:24 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8E6346EA06;
	Thu, 12 Mar 2020 01:17:22 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E3F1F6E9FF
 for <intel-gfx@lists.freedesktop.org>; Thu, 12 Mar 2020 01:17:18 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 11 Mar 2020 18:17:17 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,542,1574150400"; d="scan'208";a="236479657"
Received: from dceraolo-linux.fm.intel.com ([10.1.27.145])
 by fmsmga008.fm.intel.com with ESMTP; 11 Mar 2020 18:17:17 -0700
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 11 Mar 2020 18:16:30 -0700
Message-Id: <20200312011631.15262-6-daniele.ceraolospurio@intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200312011631.15262-1-daniele.ceraolospurio@intel.com>
References: <20200312011631.15262-1-daniele.ceraolospurio@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 5/6] drm/i915/uc: Move uC debugfs to its own
 folder under GT
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

dUMgaXMgYSBjb21wb25lbnQgb2YgdGhlIEdULCBzbyBpdCBtYWtlcyBzZW5zZSBmb3IgdGhlIHVD
IGRlYnVnZnMgZmlsZXMKdG8gYmUgaW4gdGhlIEdUIGZvbGRlci4gQSBzdWJmb2xkZXIgaGFzIGJl
ZW4gdXNlZCB0byBrZWVwIHRoZSBzYW1lCnN0cnVjdHVyZSB3ZSBoYXZlIGZvciB0aGUgY29kZS4K
CnYyOiB1c2UgaW50ZWxfKiBwcmVmaXggKEphbmkpLCByZWJhc2Ugb24gbmV3IGd0X2RlYnVnZnNf
cmVnaXN0ZXJfZmlsZXMsCiAgICBmaXggcGVybWlzc2lvbnMgZm9yIHdyaXRhYmxlIGRlYnVnZnMg
ZmlsZXMuCgpTaWduZWQtb2ZmLWJ5OiBEYW5pZWxlIENlcmFvbG8gU3B1cmlvIDxkYW5pZWxlLmNl
cmFvbG9zcHVyaW9AaW50ZWwuY29tPgpDYzogQW5kaSBTaHl0aSA8YW5kaS5zaHl0aUBpbnRlbC5j
b20+CkNjOiBNaWNoYWwgV2FqZGVjemtvIDxtaWNoYWwud2FqZGVjemtvQGludGVsLmNvbT4KQ2M6
IEpvaG4gSGFycmlzb24gPEpvaG4uQy5IYXJyaXNvbkBJbnRlbC5jb20+CkNjOiBNYXR0aGV3IEJy
b3N0IDxtYXR0aGV3LmJyb3N0QGludGVsLmNvbT4KQ2M6IFRvbnkgWWUgPHRvbnkueWVAaW50ZWwu
Y29tPgpDYzogSmFuaSBOaWt1bGEgPGphbmkubmlrdWxhQGxpbnV4LmludGVsLmNvbT4KLS0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgICAgICAgICB8ICAgNyArLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvZGVidWdmc19ndC5jICAgICAgICAgfCAgIDYgKy0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L3VjL2RlYnVnZnNfZ3VjLmMgICAgIHwgIDQyICsrKysrKwogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvZGVidWdmc19ndWMuaCAgICAgfCAgMTQgKysKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L3VjL2RlYnVnZnNfZ3VjX2xvZy5jIHwgMTI0ICsrKysrKysrKysr
KysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9kZWJ1Z2ZzX2d1Y19sb2cuaCB8ICAx
NSArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvZGVidWdmc19odWMuYyAgICAgfCAgMzYg
KysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2RlYnVnZnNfaHVjLmggICAgIHwgIDE0
ICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9kZWJ1Z2ZzX3VjLmMgICAgICB8ICAzMSAr
KysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvZGVidWdmc191Yy5oICAgICAgfCAgMTQg
KysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5oICAgICAgIHwgICA1ICsK
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19sb2cuYyAgIHwgICA1IC0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jICAgICAgICAgIHwgMTM3IC0tLS0tLS0t
LS0tLS0tLS0tLS0KIDEzIGZpbGVzIGNoYW5nZWQsIDMwNiBpbnNlcnRpb25zKCspLCAxNDQgZGVs
ZXRpb25zKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMv
ZGVidWdmc19ndWMuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L3VjL2RlYnVnZnNfZ3VjLmgKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC91Yy9kZWJ1Z2ZzX2d1Y19sb2cuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L3VjL2RlYnVnZnNfZ3VjX2xvZy5oCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvZGVidWdmc19odWMuYwogY3JlYXRlIG1vZGUgMTAwNjQ0
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2RlYnVnZnNfaHVjLmgKIGNyZWF0ZSBtb2RlIDEw
MDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9kZWJ1Z2ZzX3VjLmMKIGNyZWF0ZSBtb2Rl
IDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9kZWJ1Z2ZzX3VjLmgKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L01ha2VmaWxlCmluZGV4IDlmODg3YTg2ZTU1NS4uZjg2MmFjNjYxNWQ4IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9N
YWtlZmlsZQpAQCAtMTY2LDcgKzE2NiwxMiBAQCBpOTE1LXkgKz0gXAogCSAgaW50ZWxfd29wY20u
bwogCiAjIGdlbmVyYWwtcHVycG9zZSBtaWNyb2NvbnRyb2xsZXIgKEd1Qykgc3VwcG9ydAotaTkx
NS15ICs9IGd0L3VjL2ludGVsX3VjLm8gXAoraTkxNS15ICs9IFwKKwkgIGd0L3VjL2RlYnVnZnNf
Z3VjLm8gXAorCSAgZ3QvdWMvZGVidWdmc19ndWNfbG9nLm8gXAorCSAgZ3QvdWMvZGVidWdmc19o
dWMubyBcCisJICBndC91Yy9kZWJ1Z2ZzX3VjLm8gXAorCSAgZ3QvdWMvaW50ZWxfdWMubyBcCiAJ
ICBndC91Yy9pbnRlbF91Y19mdy5vIFwKIAkgIGd0L3VjL2ludGVsX2d1Yy5vIFwKIAkgIGd0L3Vj
L2ludGVsX2d1Y19hZHMubyBcCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9k
ZWJ1Z2ZzX2d0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9kZWJ1Z2ZzX2d0LmMKaW5kZXgg
ZGU3M2I2M2Q2YmE3Li5mY2JjNTdlMjI2YzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2RlYnVnZnNfZ3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9kZWJ1Z2Zz
X2d0LmMKQEAgLTksNiArOSw3IEBACiAjaW5jbHVkZSAiZGVidWdmc19lbmdpbmVzLmgiCiAjaW5j
bHVkZSAiZGVidWdmc19ndC5oIgogI2luY2x1ZGUgImRlYnVnZnNfZ3RfcG0uaCIKKyNpbmNsdWRl
ICJ1Yy9kZWJ1Z2ZzX3VjLmgiCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKIAogdm9pZCBkZWJ1Z2Zz
X2d0X3JlZ2lzdGVyKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCkBAIC0yNCw2ICsyNSw4IEBAIHZvaWQg
ZGVidWdmc19ndF9yZWdpc3RlcihzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQogCiAJZGVidWdmc19lbmdp
bmVzX3JlZ2lzdGVyKGd0LCByb290KTsKIAlkZWJ1Z2ZzX2d0X3BtX3JlZ2lzdGVyKGd0LCByb290
KTsKKworCWludGVsX3VjX2RlYnVnZnNfcmVnaXN0ZXIoJmd0LT51Yywgcm9vdCk7CiB9CiAKIHZv
aWQgaW50ZWxfZ3RfZGVidWdmc19yZWdpc3Rlcl9maWxlcyhzdHJ1Y3QgZGVudHJ5ICpyb290LApA
QCAtMzEsOSArMzQsMTAgQEAgdm9pZCBpbnRlbF9ndF9kZWJ1Z2ZzX3JlZ2lzdGVyX2ZpbGVzKHN0
cnVjdCBkZW50cnkgKnJvb3QsCiAJCQkJICAgICB1bnNpZ25lZCBsb25nIGNvdW50LCB2b2lkICpk
YXRhKQogewogCXdoaWxlIChjb3VudC0tKSB7CisJCXVtb2RlX3QgbW9kZSA9IGZpbGVzLT5mb3Bz
LT53cml0ZSA/IDA2NDQgOiAwNDQ0OwogCQlpZiAoIWZpbGVzLT5ldmFsIHx8IGZpbGVzLT5ldmFs
KGRhdGEpKQogCQkJZGVidWdmc19jcmVhdGVfZmlsZShmaWxlcy0+bmFtZSwKLQkJCQkJICAgIDA0
NDQsIHJvb3QsIGRhdGEsCisJCQkJCSAgICBtb2RlLCByb290LCBkYXRhLAogCQkJCQkgICAgZmls
ZXMtPmZvcHMpOwogCiAJCWZpbGVzKys7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC91Yy9kZWJ1Z2ZzX2d1Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvZGVidWdm
c19ndWMuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjQ1MDZiNTJh
NjFmMgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2RlYnVn
ZnNfZ3VjLmMKQEAgLTAsMCArMSw0MiBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1J
VAorCisvKgorICogQ29weXJpZ2h0IMKpIDIwMjAgSW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisj
aW5jbHVkZSA8ZHJtL2RybV9wcmludC5oPgorCisjaW5jbHVkZSAiZ3QvZGVidWdmc19ndC5oIgor
I2luY2x1ZGUgImRlYnVnZnNfZ3VjX2xvZy5oIgorI2luY2x1ZGUgImludGVsX2d1Yy5oIgorCitz
dGF0aWMgaW50IGd1Y19pbmZvX3Nob3coc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQor
eworCXN0cnVjdCBpbnRlbF9ndWMgKmd1YyA9IG0tPnByaXZhdGU7CisJc3RydWN0IGRybV9wcmlu
dGVyIHAgPSBkcm1fc2VxX2ZpbGVfcHJpbnRlcihtKTsKKworCWlmICghaW50ZWxfZ3VjX2lzX3N1
cHBvcnRlZChndWMpKQorCQlyZXR1cm4gLUVOT0RFVjsKKworCWludGVsX2d1Y19sb2FkX3N0YXR1
cyhndWMsICZwKTsKKwlkcm1fcHV0cygmcCwgIlxuIik7CisJaW50ZWxfZ3VjX2xvZ19pbmZvKCZn
dWMtPmxvZywgJnApOworCisJLyogQWRkIG1vcmUgYXMgcmVxdWlyZWQgLi4uICovCisKKwlyZXR1
cm4gMDsKK30KK0RFRklORV9HVF9ERUJVR0ZTX0FUVFJJQlVURShndWNfaW5mbyk7CisKK3ZvaWQg
aW50ZWxfZ3VjX2RlYnVnZnNfcmVnaXN0ZXIoc3RydWN0IGludGVsX2d1YyAqZ3VjLCBzdHJ1Y3Qg
ZGVudHJ5ICpyb290KQoreworCXN0YXRpYyBjb25zdCBzdHJ1Y3QgZGVidWdmc19ndF9maWxlIGZp
bGVzW10gPSB7CisJCXsgImd1Y19pbmZvIiwgJmd1Y19pbmZvX2ZvcHMsIE5VTEwgfSwKKwl9Owor
CisJaWYgKCFpbnRlbF9ndWNfaXNfc3VwcG9ydGVkKGd1YykpCisJCXJldHVybjsKKworCWludGVs
X2d0X2RlYnVnZnNfcmVnaXN0ZXJfZmlsZXMocm9vdCwgZmlsZXMsIEFSUkFZX1NJWkUoZmlsZXMp
LCBndWMpOworCWludGVsX2d1Y19sb2dfZGVidWdmc19yZWdpc3RlcigmZ3VjLT5sb2csIHJvb3Qp
OworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvZGVidWdmc19ndWMu
aCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2RlYnVnZnNfZ3VjLmgKbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi40MjRjMjY2NjVjZjEKLS0tIC9kZXYvbnVsbAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9kZWJ1Z2ZzX2d1Yy5oCkBAIC0wLDAgKzEs
MTQgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQgKi8KKy8qCisgKiBDb3B5cmln
aHQgwqkgMjAyMCBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpZm5kZWYgREVCVUdGU19HVUNf
SAorI2RlZmluZSBERUJVR0ZTX0dVQ19ICisKK3N0cnVjdCBpbnRlbF9ndWM7CitzdHJ1Y3QgZGVu
dHJ5OworCit2b2lkIGludGVsX2d1Y19kZWJ1Z2ZzX3JlZ2lzdGVyKHN0cnVjdCBpbnRlbF9ndWMg
Kmd1Yywgc3RydWN0IGRlbnRyeSAqcm9vdCk7CisKKyNlbmRpZiAvKiBERUJVR0ZTX0dVQ19IICov
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9kZWJ1Z2ZzX2d1Y19sb2cu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2RlYnVnZnNfZ3VjX2xvZy5jCm5ldyBmaWxl
IG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uOGJjMjkyMjkxNWY0Ci0tLSAvZGV2L251
bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvZGVidWdmc19ndWNfbG9nLmMKQEAg
LTAsMCArMSwxMjQgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKKworLyoKKyAq
IENvcHlyaWdodCDCqSAyMDIwIEludGVsIENvcnBvcmF0aW9uCisgKi8KKworI2luY2x1ZGUgPGxp
bnV4L2ZzLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9wcmludC5oPgorCisjaW5jbHVkZSAiZ3QvZGVi
dWdmc19ndC5oIgorI2luY2x1ZGUgImludGVsX2d1Yy5oIgorI2luY2x1ZGUgImludGVsX2d1Y19s
b2cuaCIKKworc3RhdGljIGludCBndWNfbG9nX2R1bXBfc2hvdyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0s
IHZvaWQgKmRhdGEpCit7CisJc3RydWN0IGRybV9wcmludGVyIHAgPSBkcm1fc2VxX2ZpbGVfcHJp
bnRlcihtKTsKKworCXJldHVybiBpbnRlbF9ndWNfbG9nX2R1bXAobS0+cHJpdmF0ZSwgJnAsIGZh
bHNlKTsKK30KK0RFRklORV9HVF9ERUJVR0ZTX0FUVFJJQlVURShndWNfbG9nX2R1bXApOworCitz
dGF0aWMgaW50IGd1Y19sb2FkX2Vycl9sb2dfZHVtcF9zaG93KHN0cnVjdCBzZXFfZmlsZSAqbSwg
dm9pZCAqZGF0YSkKK3sKKwlzdHJ1Y3QgZHJtX3ByaW50ZXIgcCA9IGRybV9zZXFfZmlsZV9wcmlu
dGVyKG0pOworCisJcmV0dXJuIGludGVsX2d1Y19sb2dfZHVtcChtLT5wcml2YXRlLCAmcCwgdHJ1
ZSk7Cit9CitERUZJTkVfR1RfREVCVUdGU19BVFRSSUJVVEUoZ3VjX2xvYWRfZXJyX2xvZ19kdW1w
KTsKKworc3RhdGljIGludCBndWNfbG9nX2xldmVsX2dldCh2b2lkICpkYXRhLCB1NjQgKnZhbCkK
K3sKKwlzdHJ1Y3QgaW50ZWxfZ3VjX2xvZyAqbG9nID0gZGF0YTsKKworCWlmICghaW50ZWxfZ3Vj
X2lzX3VzZWQobG9nX3RvX2d1Yyhsb2cpKSkKKwkJcmV0dXJuIC1FTk9ERVY7CisKKwkqdmFsID0g
aW50ZWxfZ3VjX2xvZ19nZXRfbGV2ZWwobG9nKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMg
aW50IGd1Y19sb2dfbGV2ZWxfc2V0KHZvaWQgKmRhdGEsIHU2NCB2YWwpCit7CisJc3RydWN0IGlu
dGVsX2d1Y19sb2cgKmxvZyA9IGRhdGE7CisKKwlpZiAoIWludGVsX2d1Y19pc191c2VkKGxvZ190
b19ndWMobG9nKSkpCisJCXJldHVybiAtRU5PREVWOworCisJcmV0dXJuIGludGVsX2d1Y19sb2df
c2V0X2xldmVsKGxvZywgdmFsKTsKK30KKworREVGSU5FX1NJTVBMRV9BVFRSSUJVVEUoZ3VjX2xv
Z19sZXZlbF9mb3BzLAorCQkJZ3VjX2xvZ19sZXZlbF9nZXQsIGd1Y19sb2dfbGV2ZWxfc2V0LAor
CQkJIiVsbGRcbiIpOworCitzdGF0aWMgaW50IGd1Y19sb2dfcmVsYXlfb3BlbihzdHJ1Y3QgaW5v
ZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlsZSkKK3sKKwlzdHJ1Y3QgaW50ZWxfZ3VjX2xvZyAq
bG9nID0gaW5vZGUtPmlfcHJpdmF0ZTsKKworCWlmICghaW50ZWxfZ3VjX2lzX3JlYWR5KGxvZ190
b19ndWMobG9nKSkpCisJCXJldHVybiAtRU5PREVWOworCisJZmlsZS0+cHJpdmF0ZV9kYXRhID0g
bG9nOworCisJcmV0dXJuIGludGVsX2d1Y19sb2dfcmVsYXlfb3Blbihsb2cpOworfQorCitzdGF0
aWMgc3NpemVfdAorZ3VjX2xvZ19yZWxheV93cml0ZShzdHJ1Y3QgZmlsZSAqZmlscCwKKwkJICAg
IGNvbnN0IGNoYXIgX191c2VyICp1YnVmLAorCQkgICAgc2l6ZV90IGNudCwKKwkJICAgIGxvZmZf
dCAqcHBvcykKK3sKKwlzdHJ1Y3QgaW50ZWxfZ3VjX2xvZyAqbG9nID0gZmlscC0+cHJpdmF0ZV9k
YXRhOworCWludCB2YWw7CisJaW50IHJldDsKKworCXJldCA9IGtzdHJ0b2ludF9mcm9tX3VzZXIo
dWJ1ZiwgY250LCAwLCAmdmFsKTsKKwlpZiAocmV0IDwgMCkKKwkJcmV0dXJuIHJldDsKKworCS8q
CisJICogRW5hYmxlIGFuZCBzdGFydCB0aGUgZ3VjIGxvZyByZWxheSBvbiB2YWx1ZSBvZiAxLgor
CSAqIEZsdXNoIGxvZyByZWxheSBmb3IgYW55IG90aGVyIHZhbHVlLgorCSAqLworCWlmICh2YWwg
PT0gMSkKKwkJcmV0ID0gaW50ZWxfZ3VjX2xvZ19yZWxheV9zdGFydChsb2cpOworCWVsc2UKKwkJ
aW50ZWxfZ3VjX2xvZ19yZWxheV9mbHVzaChsb2cpOworCisJcmV0dXJuIHJldCA/OiBjbnQ7Cit9
CisKK3N0YXRpYyBpbnQgZ3VjX2xvZ19yZWxheV9yZWxlYXNlKHN0cnVjdCBpbm9kZSAqaW5vZGUs
IHN0cnVjdCBmaWxlICpmaWxlKQoreworCXN0cnVjdCBpbnRlbF9ndWNfbG9nICpsb2cgPSBpbm9k
ZS0+aV9wcml2YXRlOworCisJaW50ZWxfZ3VjX2xvZ19yZWxheV9jbG9zZShsb2cpOworCXJldHVy
biAwOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGZpbGVfb3BlcmF0aW9ucyBndWNfbG9nX3Jl
bGF5X2ZvcHMgPSB7CisJLm93bmVyID0gVEhJU19NT0RVTEUsCisJLm9wZW4gPSBndWNfbG9nX3Jl
bGF5X29wZW4sCisJLndyaXRlID0gZ3VjX2xvZ19yZWxheV93cml0ZSwKKwkucmVsZWFzZSA9IGd1
Y19sb2dfcmVsYXlfcmVsZWFzZSwKK307CisKK3ZvaWQgaW50ZWxfZ3VjX2xvZ19kZWJ1Z2ZzX3Jl
Z2lzdGVyKHN0cnVjdCBpbnRlbF9ndWNfbG9nICpsb2csCisJCQkJICAgIHN0cnVjdCBkZW50cnkg
KnJvb3QpCit7CisJc3RhdGljIGNvbnN0IHN0cnVjdCBkZWJ1Z2ZzX2d0X2ZpbGUgZmlsZXNbXSA9
IHsKKwkJeyAiZ3VjX2xvZ19kdW1wIiwgJmd1Y19sb2dfZHVtcF9mb3BzLCBOVUxMIH0sCisJCXsg
Imd1Y19sb2FkX2Vycl9sb2dfZHVtcCIsICZndWNfbG9hZF9lcnJfbG9nX2R1bXBfZm9wcywgTlVM
TCB9LAorCQl7ICJndWNfbG9nX2xldmVsIiwgJmd1Y19sb2dfbGV2ZWxfZm9wcywgTlVMTCB9LAor
CQl7ICJndWNfbG9nX3JlbGF5IiwgJmd1Y19sb2dfcmVsYXlfZm9wcywgTlVMTCB9LAorCX07CisK
KwlpZiAoIWludGVsX2d1Y19pc19zdXBwb3J0ZWQobG9nX3RvX2d1Yyhsb2cpKSkKKwkJcmV0dXJu
OworCisJaW50ZWxfZ3RfZGVidWdmc19yZWdpc3Rlcl9maWxlcyhyb290LCBmaWxlcywgQVJSQVlf
U0laRShmaWxlcyksIGxvZyk7Cit9CisKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3VjL2RlYnVnZnNfZ3VjX2xvZy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvZGVi
dWdmc19ndWNfbG9nLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5l
ODkwMGUzZDc0ZWEKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91
Yy9kZWJ1Z2ZzX2d1Y19sb2cuaApAQCAtMCwwICsxLDE1IEBACisvKiBTUERYLUxpY2Vuc2UtSWRl
bnRpZmllcjogTUlUICovCisvKgorICogQ29weXJpZ2h0IMKpIDIwMjAgSW50ZWwgQ29ycG9yYXRp
b24KKyAqLworCisjaWZuZGVmIERFQlVHRlNfR1VDX0xPR19ICisjZGVmaW5lIERFQlVHRlNfR1VD
X0xPR19ICisKK3N0cnVjdCBpbnRlbF9ndWNfbG9nOworc3RydWN0IGRlbnRyeTsKKwordm9pZCBp
bnRlbF9ndWNfbG9nX2RlYnVnZnNfcmVnaXN0ZXIoc3RydWN0IGludGVsX2d1Y19sb2cgKmxvZywK
KwkJCQkgICAgc3RydWN0IGRlbnRyeSAqcm9vdCk7CisKKyNlbmRpZiAvKiBERUJVR0ZTX0dVQ19M
T0dfSCAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvZGVidWdmc19o
dWMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2RlYnVnZnNfaHVjLmMKbmV3IGZpbGUg
bW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi40OTdlNGM2OTNmODMKLS0tIC9kZXYvbnVs
bAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9kZWJ1Z2ZzX2h1Yy5jCkBAIC0wLDAg
KzEsMzYgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKKworLyoKKyAqIENvcHly
aWdodCDCqSAyMDIwIEludGVsIENvcnBvcmF0aW9uCisgKi8KKworI2luY2x1ZGUgPGRybS9kcm1f
cHJpbnQuaD4KKworI2luY2x1ZGUgImd0L2RlYnVnZnNfZ3QuaCIKKyNpbmNsdWRlICJpbnRlbF9o
dWMuaCIKKworc3RhdGljIGludCBodWNfaW5mb19zaG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9p
ZCAqZGF0YSkKK3sKKwlzdHJ1Y3QgaW50ZWxfaHVjICpodWMgPSBtLT5wcml2YXRlOworCXN0cnVj
dCBkcm1fcHJpbnRlciBwID0gZHJtX3NlcV9maWxlX3ByaW50ZXIobSk7CisKKwlpZiAoIWludGVs
X2h1Y19pc19zdXBwb3J0ZWQoaHVjKSkKKwkJcmV0dXJuIC1FTk9ERVY7CisKKwlpbnRlbF9odWNf
bG9hZF9zdGF0dXMoaHVjLCAmcCk7CisKKwlyZXR1cm4gMDsKK30KK0RFRklORV9HVF9ERUJVR0ZT
X0FUVFJJQlVURShodWNfaW5mbyk7CisKK3ZvaWQgaW50ZWxfaHVjX2RlYnVnZnNfcmVnaXN0ZXIo
c3RydWN0IGludGVsX2h1YyAqaHVjLCBzdHJ1Y3QgZGVudHJ5ICpyb290KQoreworCXN0YXRpYyBj
b25zdCBzdHJ1Y3QgZGVidWdmc19ndF9maWxlIGZpbGVzW10gPSB7CisJCXsgImh1Y19pbmZvIiwg
Jmh1Y19pbmZvX2ZvcHMsIE5VTEwgfSwKKwl9OworCisJaWYgKCFpbnRlbF9odWNfaXNfc3VwcG9y
dGVkKGh1YykpCisJCXJldHVybjsKKworCWludGVsX2d0X2RlYnVnZnNfcmVnaXN0ZXJfZmlsZXMo
cm9vdCwgZmlsZXMsIEFSUkFZX1NJWkUoZmlsZXMpLCBodWMpOworfQpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvZGVidWdmc19odWMuaCBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3VjL2RlYnVnZnNfaHVjLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MDAwMDAwLi5iZTc5ZTk5MmY5NzYKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC91Yy9kZWJ1Z2ZzX2h1Yy5oCkBAIC0wLDAgKzEsMTQgQEAKKy8qIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBNSVQgKi8KKy8qCisgKiBDb3B5cmlnaHQgwqkgMjAyMCBJbnRlbCBDb3Jw
b3JhdGlvbgorICovCisKKyNpZm5kZWYgREVCVUdGU19IVUNfSAorI2RlZmluZSBERUJVR0ZTX0hV
Q19ICisKK3N0cnVjdCBpbnRlbF9odWM7CitzdHJ1Y3QgZGVudHJ5OworCit2b2lkIGludGVsX2h1
Y19kZWJ1Z2ZzX3JlZ2lzdGVyKHN0cnVjdCBpbnRlbF9odWMgKmh1Yywgc3RydWN0IGRlbnRyeSAq
cm9vdCk7CisKKyNlbmRpZiAvKiBERUJVR0ZTX0hVQ19IICovCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC91Yy9kZWJ1Z2ZzX3VjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC91Yy9kZWJ1Z2ZzX3VjLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAw
Li5mZDE4MzQ3ZjhkMWMKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC91Yy9kZWJ1Z2ZzX3VjLmMKQEAgLTAsMCArMSwzMSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50
aWZpZXI6IE1JVAorCisvKgorICogQ29weXJpZ2h0IMKpIDIwMjAgSW50ZWwgQ29ycG9yYXRpb24K
KyAqLworCisjaW5jbHVkZSA8bGludXgvZGVidWdmcy5oPgorCisjaW5jbHVkZSAiZGVidWdmc19n
dWMuaCIKKyNpbmNsdWRlICJkZWJ1Z2ZzX2h1Yy5oIgorI2luY2x1ZGUgImRlYnVnZnNfdWMuaCIK
KyNpbmNsdWRlICJpbnRlbF91Yy5oIgorCit2b2lkIGludGVsX3VjX2RlYnVnZnNfcmVnaXN0ZXIo
c3RydWN0IGludGVsX3VjICp1Yywgc3RydWN0IGRlbnRyeSAqZ3Rfcm9vdCkKK3sKKwlzdHJ1Y3Qg
ZGVudHJ5ICpyb290OworCisJaWYgKCFndF9yb290KQorCQlyZXR1cm47CisKKwkvKiBHdUMgYW5k
IEh1QyBnbyBhbHdheXMgaW4gcGFpciwgbm8gbmVlZCB0byBjaGVjayBib3RoICovCisJaWYgKCFp
bnRlbF91Y19zdXBwb3J0c19ndWModWMpKQorCQlyZXR1cm47CisKKwlyb290ID0gZGVidWdmc19j
cmVhdGVfZGlyKCJ1YyIsIGd0X3Jvb3QpOworCWlmIChJU19FUlIocm9vdCkpCisJCXJldHVybjsK
KworCWludGVsX2d1Y19kZWJ1Z2ZzX3JlZ2lzdGVyKCZ1Yy0+Z3VjLCByb290KTsKKwlpbnRlbF9o
dWNfZGVidWdmc19yZWdpc3RlcigmdWMtPmh1Yywgcm9vdCk7Cit9CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9kZWJ1Z2ZzX3VjLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC91Yy9kZWJ1Z2ZzX3VjLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAw
MDAwLi4wMTBjZTI1MGQyMjMKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC91Yy9kZWJ1Z2ZzX3VjLmgKQEAgLTAsMCArMSwxNCBAQAorLyogU1BEWC1MaWNlbnNlLUlk
ZW50aWZpZXI6IE1JVCAqLworLyoKKyAqIENvcHlyaWdodCDCqSAyMDIwIEludGVsIENvcnBvcmF0
aW9uCisgKi8KKworI2lmbmRlZiBERUJVR0ZTX1VDX0gKKyNkZWZpbmUgREVCVUdGU19VQ19ICisK
K3N0cnVjdCBpbnRlbF91YzsKK3N0cnVjdCBkZW50cnk7CisKK3ZvaWQgaW50ZWxfdWNfZGVidWdm
c19yZWdpc3RlcihzdHJ1Y3QgaW50ZWxfdWMgKnVjLCBzdHJ1Y3QgZGVudHJ5ICpndF9yb290KTsK
KworI2VuZGlmIC8qIERFQlVHRlNfVUNfSCAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRl
bF9ndWMuaAppbmRleCBhNWQ3YTg2YmU0Y2YuLmU4NGFiNjdiMzE3ZCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmgKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmgKQEAgLTc0LDYgKzc0LDExIEBAIHN0cnVjdCBpbnRlbF9n
dWMgewogCXN0cnVjdCBtdXRleCBzZW5kX211dGV4OwogfTsKIAorc3RhdGljIGlubGluZSBzdHJ1
Y3QgaW50ZWxfZ3VjICpsb2dfdG9fZ3VjKHN0cnVjdCBpbnRlbF9ndWNfbG9nICpsb2cpCit7CisJ
cmV0dXJuIGNvbnRhaW5lcl9vZihsb2csIHN0cnVjdCBpbnRlbF9ndWMsIGxvZyk7Cit9CisKIHN0
YXRpYwogaW5saW5lIGludCBpbnRlbF9ndWNfc2VuZChzdHJ1Y3QgaW50ZWxfZ3VjICpndWMsIGNv
bnN0IHUzMiAqYWN0aW9uLCB1MzIgbGVuKQogewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2xvZy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMv
aW50ZWxfZ3VjX2xvZy5jCmluZGV4IDhjZGQ2ZGMzZGY1OC4uNWIxMWE2ZDhlMjdmIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfbG9nLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX2xvZy5jCkBAIC01NSwxMSArNTUsNiBA
QCBzdGF0aWMgaW50IGd1Y19hY3Rpb25fY29udHJvbF9sb2coc3RydWN0IGludGVsX2d1YyAqZ3Vj
LCBib29sIGVuYWJsZSwKIAlyZXR1cm4gaW50ZWxfZ3VjX3NlbmQoZ3VjLCBhY3Rpb24sIEFSUkFZ
X1NJWkUoYWN0aW9uKSk7CiB9CiAKLXN0YXRpYyBpbmxpbmUgc3RydWN0IGludGVsX2d1YyAqbG9n
X3RvX2d1YyhzdHJ1Y3QgaW50ZWxfZ3VjX2xvZyAqbG9nKQotewotCXJldHVybiBjb250YWluZXJf
b2YobG9nLCBzdHJ1Y3QgaW50ZWxfZ3VjLCBsb2cpOwotfQotCiBzdGF0aWMgdm9pZCBndWNfbG9n
X2VuYWJsZV9mbHVzaF9ldmVudHMoc3RydWN0IGludGVsX2d1Y19sb2cgKmxvZykKIHsKIAlpbnRl
bF9ndWNfZW5hYmxlX21zZyhsb2dfdG9fZ3VjKGxvZyksCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVi
dWdmcy5jCmluZGV4IDU2NTA0YmUyYTZlYy4uZTYwYTU3NTBlYTQ0IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2RlYnVnZnMuYwpAQCAtMzcsNyArMzcsNiBAQAogI2luY2x1ZGUgImd0L2ludGVsX3Jl
c2V0LmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfcmM2LmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfcnBz
LmgiCi0jaW5jbHVkZSAiZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uaCIKIAogI2luY2x1ZGUg
Imk5MTVfZGVidWdmcy5oIgogI2luY2x1ZGUgImk5MTVfZGVidWdmc19wYXJhbXMuaCIKQEAgLTEy
NTEsMTM2ICsxMjUwLDYgQEAgc3RhdGljIGludCBpOTE1X2xsYyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0s
IHZvaWQgKmRhdGEpCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyBpbnQgaTkxNV9odWNfaW5mbyhz
dHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2ID0gbm9kZV90b19pOTE1KG0tPnByaXZhdGUpOwotCXN0cnVjdCBpbnRlbF9o
dWMgKmh1YyA9ICZkZXZfcHJpdi0+Z3QudWMuaHVjOwotCXN0cnVjdCBkcm1fcHJpbnRlciBwID0g
ZHJtX3NlcV9maWxlX3ByaW50ZXIobSk7Ci0KLQlpZiAoIWludGVsX2h1Y19pc19zdXBwb3J0ZWQo
aHVjKSkKLQkJcmV0dXJuIC1FTk9ERVY7Ci0KLQlpbnRlbF9odWNfbG9hZF9zdGF0dXMoaHVjLCAm
cCk7Ci0KLQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIGludCBpOTE1X2d1Y19pbmZvKHN0cnVjdCBz
ZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYgPSBub2RlX3RvX2k5MTUobS0+cHJpdmF0ZSk7Ci0Jc3RydWN0IGludGVsX2d1YyAqZ3Vj
ID0gJmRldl9wcml2LT5ndC51Yy5ndWM7Ci0Jc3RydWN0IGRybV9wcmludGVyIHAgPSBkcm1fc2Vx
X2ZpbGVfcHJpbnRlcihtKTsKLQotCWlmICghaW50ZWxfZ3VjX2lzX3N1cHBvcnRlZChndWMpKQot
CQlyZXR1cm4gLUVOT0RFVjsKLQotCWludGVsX2d1Y19sb2FkX3N0YXR1cyhndWMsICZwKTsKLQlk
cm1fcHV0cygmcCwgIlxuIik7Ci0JaW50ZWxfZ3VjX2xvZ19pbmZvKCZndWMtPmxvZywgJnApOwot
Ci0JLyogQWRkIG1vcmUgYXMgcmVxdWlyZWQgLi4uICovCi0KLQlyZXR1cm4gMDsKLX0KLQotc3Rh
dGljIGludCBpOTE1X2d1Y19sb2dfZHVtcChzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEp
Ci17Ci0Jc3RydWN0IGRybV9pbmZvX25vZGUgKm5vZGUgPSBtLT5wcml2YXRlOwotCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IG5vZGVfdG9faTkxNShub2RlKTsKLQlzdHJ1Y3Qg
aW50ZWxfZ3VjICpndWMgPSAmZGV2X3ByaXYtPmd0LnVjLmd1YzsKLQlib29sIGR1bXBfbG9hZF9l
cnIgPSAhIW5vZGUtPmluZm9fZW50LT5kYXRhOwotCXN0cnVjdCBkcm1fcHJpbnRlciBwID0gZHJt
X3NlcV9maWxlX3ByaW50ZXIobSk7Ci0KLQlpZiAoIWludGVsX2d1Y19pc19zdXBwb3J0ZWQoZ3Vj
KSkKLQkJcmV0dXJuIC1FTk9ERVY7Ci0KLQlyZXR1cm4gaW50ZWxfZ3VjX2xvZ19kdW1wKCZndWMt
PmxvZywgJnAsIGR1bXBfbG9hZF9lcnIpOwotfQotCi1zdGF0aWMgaW50IGk5MTVfZ3VjX2xvZ19s
ZXZlbF9nZXQodm9pZCAqZGF0YSwgdTY0ICp2YWwpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2ID0gZGF0YTsKLQlzdHJ1Y3QgaW50ZWxfdWMgKnVjID0gJmRldl9wcml2LT5n
dC51YzsKLQotCWlmICghaW50ZWxfdWNfdXNlc19ndWModWMpKQotCQlyZXR1cm4gLUVOT0RFVjsK
LQotCSp2YWwgPSBpbnRlbF9ndWNfbG9nX2dldF9sZXZlbCgmdWMtPmd1Yy5sb2cpOwotCi0JcmV0
dXJuIDA7Ci19Ci0KLXN0YXRpYyBpbnQgaTkxNV9ndWNfbG9nX2xldmVsX3NldCh2b2lkICpkYXRh
LCB1NjQgdmFsKQotewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGRhdGE7
Ci0Jc3RydWN0IGludGVsX3VjICp1YyA9ICZkZXZfcHJpdi0+Z3QudWM7Ci0KLQlpZiAoIWludGVs
X3VjX3VzZXNfZ3VjKHVjKSkKLQkJcmV0dXJuIC1FTk9ERVY7Ci0KLQlyZXR1cm4gaW50ZWxfZ3Vj
X2xvZ19zZXRfbGV2ZWwoJnVjLT5ndWMubG9nLCB2YWwpOwotfQotCi1ERUZJTkVfU0lNUExFX0FU
VFJJQlVURShpOTE1X2d1Y19sb2dfbGV2ZWxfZm9wcywKLQkJCWk5MTVfZ3VjX2xvZ19sZXZlbF9n
ZXQsIGk5MTVfZ3VjX2xvZ19sZXZlbF9zZXQsCi0JCQkiJWxsZFxuIik7Ci0KLXN0YXRpYyBpbnQg
aTkxNV9ndWNfbG9nX3JlbGF5X29wZW4oc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGZpbGUg
KmZpbGUpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBpbm9kZS0+aV9wcml2
YXRlOwotCXN0cnVjdCBpbnRlbF9ndWMgKmd1YyA9ICZpOTE1LT5ndC51Yy5ndWM7Ci0Jc3RydWN0
IGludGVsX2d1Y19sb2cgKmxvZyA9ICZndWMtPmxvZzsKLQotCWlmICghaW50ZWxfZ3VjX2lzX3Jl
YWR5KGd1YykpCi0JCXJldHVybiAtRU5PREVWOwotCi0JZmlsZS0+cHJpdmF0ZV9kYXRhID0gbG9n
OwotCi0JcmV0dXJuIGludGVsX2d1Y19sb2dfcmVsYXlfb3Blbihsb2cpOwotfQotCi1zdGF0aWMg
c3NpemVfdAotaTkxNV9ndWNfbG9nX3JlbGF5X3dyaXRlKHN0cnVjdCBmaWxlICpmaWxwLAotCQkJ
IGNvbnN0IGNoYXIgX191c2VyICp1YnVmLAotCQkJIHNpemVfdCBjbnQsCi0JCQkgbG9mZl90ICpw
cG9zKQotewotCXN0cnVjdCBpbnRlbF9ndWNfbG9nICpsb2cgPSBmaWxwLT5wcml2YXRlX2RhdGE7
Ci0JaW50IHZhbDsKLQlpbnQgcmV0OwotCi0JcmV0ID0ga3N0cnRvaW50X2Zyb21fdXNlcih1YnVm
LCBjbnQsIDAsICZ2YWwpOwotCWlmIChyZXQgPCAwKQotCQlyZXR1cm4gcmV0OwotCi0JLyoKLQkg
KiBFbmFibGUgYW5kIHN0YXJ0IHRoZSBndWMgbG9nIHJlbGF5IG9uIHZhbHVlIG9mIDEuCi0JICog
Rmx1c2ggbG9nIHJlbGF5IGZvciBhbnkgb3RoZXIgdmFsdWUuCi0JICovCi0JaWYgKHZhbCA9PSAx
KQotCQlyZXQgPSBpbnRlbF9ndWNfbG9nX3JlbGF5X3N0YXJ0KGxvZyk7Ci0JZWxzZQotCQlpbnRl
bF9ndWNfbG9nX3JlbGF5X2ZsdXNoKGxvZyk7Ci0KLQlyZXR1cm4gcmV0ID86IGNudDsKLX0KLQot
c3RhdGljIGludCBpOTE1X2d1Y19sb2dfcmVsYXlfcmVsZWFzZShzdHJ1Y3QgaW5vZGUgKmlub2Rl
LCBzdHJ1Y3QgZmlsZSAqZmlsZSkKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9
IGlub2RlLT5pX3ByaXZhdGU7Ci0Jc3RydWN0IGludGVsX2d1YyAqZ3VjID0gJmk5MTUtPmd0LnVj
Lmd1YzsKLQotCWludGVsX2d1Y19sb2dfcmVsYXlfY2xvc2UoJmd1Yy0+bG9nKTsKLQlyZXR1cm4g
MDsKLX0KLQotc3RhdGljIGNvbnN0IHN0cnVjdCBmaWxlX29wZXJhdGlvbnMgaTkxNV9ndWNfbG9n
X3JlbGF5X2ZvcHMgPSB7Ci0JLm93bmVyID0gVEhJU19NT0RVTEUsCi0JLm9wZW4gPSBpOTE1X2d1
Y19sb2dfcmVsYXlfb3BlbiwKLQkud3JpdGUgPSBpOTE1X2d1Y19sb2dfcmVsYXlfd3JpdGUsCi0J
LnJlbGVhc2UgPSBpOTE1X2d1Y19sb2dfcmVsYXlfcmVsZWFzZSwKLX07Ci0KIHN0YXRpYyBpbnQg
aTkxNV9ydW50aW1lX3BtX3N0YXR1cyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkK
IHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSBub2RlX3RvX2k5MTUobS0+
cHJpdmF0ZSk7CkBAIC0xOTg5LDEwICsxODU4LDYgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1f
aW5mb19saXN0IGk5MTVfZGVidWdmc19saXN0W10gPSB7CiAJeyJpOTE1X2dlbV9vYmplY3RzIiwg
aTkxNV9nZW1fb2JqZWN0X2luZm8sIDB9LAogCXsiaTkxNV9nZW1fZmVuY2VfcmVncyIsIGk5MTVf
Z2VtX2ZlbmNlX3JlZ3NfaW5mbywgMH0sCiAJeyJpOTE1X2dlbV9pbnRlcnJ1cHQiLCBpOTE1X2lu
dGVycnVwdF9pbmZvLCAwfSwKLQl7Imk5MTVfZ3VjX2luZm8iLCBpOTE1X2d1Y19pbmZvLCAwfSwK
LQl7Imk5MTVfZ3VjX2xvZ19kdW1wIiwgaTkxNV9ndWNfbG9nX2R1bXAsIDB9LAotCXsiaTkxNV9n
dWNfbG9hZF9lcnJfbG9nX2R1bXAiLCBpOTE1X2d1Y19sb2dfZHVtcCwgMCwgKHZvaWQgKikxfSwK
LQl7Imk5MTVfaHVjX2luZm8iLCBpOTE1X2h1Y19pbmZvLCAwfSwKIAl7Imk5MTVfZnJlcXVlbmN5
X2luZm8iLCBpOTE1X2ZyZXF1ZW5jeV9pbmZvLCAwfSwKIAl7Imk5MTVfcmluZ19mcmVxX3RhYmxl
IiwgaTkxNV9yaW5nX2ZyZXFfdGFibGUsIDB9LAogCXsiaTkxNV9jb250ZXh0X3N0YXR1cyIsIGk5
MTVfY29udGV4dF9zdGF0dXMsIDB9LApAQCAtMjAyMCw4ICsxODg1LDYgQEAgc3RhdGljIGNvbnN0
IHN0cnVjdCBpOTE1X2RlYnVnZnNfZmlsZXMgewogCXsiaTkxNV9lcnJvcl9zdGF0ZSIsICZpOTE1
X2Vycm9yX3N0YXRlX2ZvcHN9LAogCXsiaTkxNV9ncHVfaW5mbyIsICZpOTE1X2dwdV9pbmZvX2Zv
cHN9LAogI2VuZGlmCi0JeyJpOTE1X2d1Y19sb2dfbGV2ZWwiLCAmaTkxNV9ndWNfbG9nX2xldmVs
X2ZvcHN9LAotCXsiaTkxNV9ndWNfbG9nX3JlbGF5IiwgJmk5MTVfZ3VjX2xvZ19yZWxheV9mb3Bz
fSwKIH07CiAKIGludCBpOTE1X2RlYnVnZnNfcmVnaXN0ZXIoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2KQotLSAKMi4yNC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9pbnRlbC1nZngK

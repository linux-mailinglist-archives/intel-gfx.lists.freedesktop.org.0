Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 883FFBDBA1
	for <lists+intel-gfx@lfdr.de>; Wed, 25 Sep 2019 12:01:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8C4E76EB68;
	Wed, 25 Sep 2019 10:01:46 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0B9F56EB66
 for <intel-gfx@lists.freedesktop.org>; Wed, 25 Sep 2019 10:01:43 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18609380-1500050 
 for multiple; Wed, 25 Sep 2019 11:01:46 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 25 Sep 2019 11:01:29 +0100
Message-Id: <20190925100137.17956-20-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20190925100137.17956-1-chris@chris-wilson.co.uk>
References: <20190925100137.17956-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 19/27] drm/i915: Replace hangcheck by heartbeats
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UmVwbGFjZSBzYW1wbGluZyB0aGUgZW5naW5lIHN0YXRlIGV2ZXJ5IHNvIG9mdGVuIHdpdGggYSBw
ZXJpb2RpYwpoZWFydGJlYXQgcmVxdWVzdCB0byBtZWFzdXJlIHRoZSBoZWFsdGggb2YgYW4gZW5n
aW5lLiBUaGlzIGlzIGNvdXBsZWQKd2l0aCB0aGUgZm9yY2VkLXByZWVtcHRpb24gdG8gYWxsb3cg
bG9uZyBydW5uaW5nIHJlcXVlc3RzIHRvIHN1cnZpdmUgc28KbG9uZyBhcyB0aGV5IGRvIG5vdCBi
bG9jayBvdGhlciB1c2Vycy4KCnYyOiBDb3VwbGUgaW4gc3lzZnMgY29udHJvbHMKClNpZ25lZC1v
ZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogSm9vbmFz
IExhaHRpbmVuIDxqb29uYXMubGFodGluZW5AbGludXguaW50ZWwuY29tPgpDYzogVHZydGtvIFVy
c3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KQ2M6IEpvbiBCbG9vbWZpZWxkIDxqb24u
Ymxvb21maWVsZEBpbnRlbC5jb20+ClJldmlld2VkLWJ5OiBKb24gQmxvb21maWVsZCA8am9uLmJs
b29tZmllbGRAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcucHJv
ZmlsZSAgICAgICAgICB8ICAxMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAg
ICAgICAgICAgICAgfCAgIDEgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5LmMgIHwgICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2Jq
ZWN0LmggICAgfCAgIDEgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BtLmMg
ICAgICAgIHwgICAyIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oICAg
ICAgICB8ICAzMiAtLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMg
ICAgIHwgIDExICstCiAuLi4vZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQu
YyAgfCAxMTUgKysrKysrCiAuLi4vZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9oZWFydGJl
YXQuaCAgfCAgIDUgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3BtLmMg
ICAgIHwgICA1ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMu
YyAgfCAgMjkgKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5o
ICB8ICAxNyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYyAgICAgICAgICAg
IHwgICAxIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmggICAgICAgICAgICB8
ICAgNCAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jICAgICAgICAgfCAg
IDEgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaCAgICAgIHwgICA5
IC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2hhbmdjaGVjay5jICAgICB8IDM2MSAt
LS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMg
ICAgICAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2No
ZWNrLmMgIHwgICA0IC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jICAgICAg
ICAgICB8ICA4NyAtLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyAgICAgICAg
ICAgICAgIHwgICAzIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAg
ICAgICB8ICAgMSAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jICAgICAg
ICAgfCAgMzMgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmggICAgICAg
ICB8ICAgMiAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ByaW9saXN0X3R5cGVzLmggICAg
fCAgIDYgKwogMjUgZmlsZXMgY2hhbmdlZCwgMTkxIGluc2VydGlvbnMoKyksIDU1NSBkZWxldGlv
bnMoLSkKIGRlbGV0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9o
YW5nY2hlY2suYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcucHJv
ZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcucHJvZmlsZQppbmRleCAzMTg0ZTg0
OTEzMzMuLmFhZmI1N2Y4NDE2OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvS2Nv
bmZpZy5wcm9maWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcucHJvZmlsZQpA
QCAtMzcsMyArMzcsMTQgQEAgY29uZmlnIERSTV9JOTE1X1BSRUVNUFRfVElNRU9VVAogCSAgdG8g
ZXhlY3V0ZS4KIAogCSAgTWF5IGJlIDAgdG8gZGlzYWJsZSB0aGUgdGltZW91dC4KKworY29uZmln
IERSTV9JOTE1X0hFQVJUQkVBVF9JTlRFUlZBTAorCWludCAiSW50ZXJ2YWwgYmV0d2VlbiBoZWFy
dGJlYXQgcHVsc2VzIChtcykiCisJZGVmYXVsdCAyNTAwICMgbWljcm9zZWNvbmRzCisJaGVscAor
CSAgV2hpbGUgYWN0aXZlIHRoZSBkcml2ZXIgdXNlcyBhIHBlcmlvZGljIHJlcXVlc3QsIGEgaGVh
cnRiZWF0LCB0bworCSAgY2hlY2sgdGhlIHdlbGxuZXNzIG9mIHRoZSBHUFUgYW5kIHRvIHJlZ3Vs
YXJseSBmbHVzaCBzdGF0ZSBjaGFuZ2VzCisJICAoaWRsZSBiYXJyaWVycykuCisKKwkgIE1heSBi
ZSAwIHRvIGRpc2FibGUgaGVhcnRiZWF0cyBhbmQgdGhlcmVmb3JlIGRpc2FibGUgYXV0b21hdGlj
IEdQVQorCSAgaGFuZyBkZXRlY3Rpb24uCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCmluZGV4IDgyMDg4Zjc0
ODQwOS4uZjFmMTUwMzQ0NTQxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtl
ZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQpAQCAtODYsNyArODYsNiBA
QCBndC15ICs9IFwKIAlndC9pbnRlbF9ndF9wbS5vIFwKIAlndC9pbnRlbF9ndF9wbV9pcnEubyBc
CiAJZ3QvaW50ZWxfZ3RfcmVxdWVzdHMubyBcCi0JZ3QvaW50ZWxfaGFuZ2NoZWNrLm8gXAogCWd0
L2ludGVsX2xyYy5vIFwKIAlndC9pbnRlbF9yZW5kZXJzdGF0ZS5vIFwKIAlndC9pbnRlbF9yZXNl
dC5vIFwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKaW5k
ZXggMTJhYmNkMWU0NzFiLi45OWRkYmI3YmVkYmMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC0xNDM0NSw3ICsxNDM0NSw3IEBAIHN0YXRpYyB2
b2lkIGludGVsX3BsYW5lX3VucGluX2ZiKHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqb2xkX3Bs
YW5lX3N0YXRlKQogc3RhdGljIHZvaWQgZmJfb2JqX2J1bXBfcmVuZGVyX3ByaW9yaXR5KHN0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiB7CiAJc3RydWN0IGk5MTVfc2NoZWRfYXR0ciBh
dHRyID0gewotCQkucHJpb3JpdHkgPSBJOTE1X1BSSU9SSVRZX0RJU1BMQVksCisJCS5wcmlvcml0
eSA9IEk5MTVfVVNFUl9QUklPUklUWShJOTE1X1BSSU9SSVRZX0RJU1BMQVkpLAogCX07CiAKIAlp
OTE1X2dlbV9vYmplY3Rfd2FpdF9wcmlvcml0eShvYmosIDAsICZhdHRyKTsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaAppbmRleCBhNzhhZjI1ZGNlMzYuLjk2N2Mz
MDczN2RjNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29i
amVjdC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaApA
QCAtNDI5LDYgKzQyOSw1IEBAIGludCBpOTE1X2dlbV9vYmplY3Rfd2FpdChzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqLAogaW50IGk5MTVfZ2VtX29iamVjdF93YWl0X3ByaW9yaXR5KHN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJCQkJICB1bnNpZ25lZCBpbnQgZmxhZ3Ms
CiAJCQkJICBjb25zdCBzdHJ1Y3QgaTkxNV9zY2hlZF9hdHRyICphdHRyKTsKLSNkZWZpbmUgSTkx
NV9QUklPUklUWV9ESVNQTEFZIEk5MTVfVVNFUl9QUklPUklUWShJOTE1X1BSSU9SSVRZX01BWCkK
IAogI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
cG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wbS5jCmluZGV4IDliNTJh
Y2E3MGVlZS4uZTA0ZTRmZjdiNTJlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fcG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
cG0uYwpAQCAtMTAwLDggKzEwMCw2IEBAIHZvaWQgaTkxNV9nZW1fc3VzcGVuZChzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAkgKi8KIAlzd2l0Y2hfdG9fa2VybmVsX2NvbnRleHRfc3lu
YygmaTkxNS0+Z3QpOwogCi0JY2FuY2VsX2RlbGF5ZWRfd29ya19zeW5jKCZpOTE1LT5ndC5oYW5n
Y2hlY2sud29yayk7Ci0KIAlpOTE1X2dlbV9kcmFpbl9mcmVlZF9vYmplY3RzKGk5MTUpOwogCiAJ
aW50ZWxfdWNfc3VzcGVuZCgmaTkxNS0+Z3QudWMpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9lbmdpbmUuaAppbmRleCBkM2M2OTkzZjRmNDYuLmRhMDllZWEwZmI4NiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKQEAgLTg5LDM4ICs4OSw2IEBAIHN0cnVjdCBkcm1f
cHJpbnRlcjsKIC8qIHNlcW5vIHNpemUgaXMgYWN0dWFsbHkgb25seSBhIHVpbnQzMiwgYnV0IHNp
bmNlIHdlIHBsYW4gdG8gdXNlIE1JX0ZMVVNIX0RXIHRvCiAgKiBkbyB0aGUgd3JpdGVzLCBhbmQg
dGhhdCBtdXN0IGhhdmUgcXcgYWxpZ25lZCBvZmZzZXRzLCBzaW1wbHkgcHJldGVuZCBpdCdzIDhi
LgogICovCi1lbnVtIGludGVsX2VuZ2luZV9oYW5nY2hlY2tfYWN0aW9uIHsKLQlFTkdJTkVfSURM
RSA9IDAsCi0JRU5HSU5FX1dBSVQsCi0JRU5HSU5FX0FDVElWRV9TRVFOTywKLQlFTkdJTkVfQUNU
SVZFX0hFQUQsCi0JRU5HSU5FX0FDVElWRV9TVUJVTklUUywKLQlFTkdJTkVfV0FJVF9LSUNLLAot
CUVOR0lORV9ERUFELAotfTsKLQotc3RhdGljIGlubGluZSBjb25zdCBjaGFyICoKLWhhbmdjaGVj
a19hY3Rpb25fdG9fc3RyKGNvbnN0IGVudW0gaW50ZWxfZW5naW5lX2hhbmdjaGVja19hY3Rpb24g
YSkKLXsKLQlzd2l0Y2ggKGEpIHsKLQljYXNlIEVOR0lORV9JRExFOgotCQlyZXR1cm4gImlkbGUi
OwotCWNhc2UgRU5HSU5FX1dBSVQ6Ci0JCXJldHVybiAid2FpdCI7Ci0JY2FzZSBFTkdJTkVfQUNU
SVZFX1NFUU5POgotCQlyZXR1cm4gImFjdGl2ZSBzZXFubyI7Ci0JY2FzZSBFTkdJTkVfQUNUSVZF
X0hFQUQ6Ci0JCXJldHVybiAiYWN0aXZlIGhlYWQiOwotCWNhc2UgRU5HSU5FX0FDVElWRV9TVUJV
TklUUzoKLQkJcmV0dXJuICJhY3RpdmUgc3VidW5pdHMiOwotCWNhc2UgRU5HSU5FX1dBSVRfS0lD
SzoKLQkJcmV0dXJuICJ3YWl0IGtpY2siOwotCWNhc2UgRU5HSU5FX0RFQUQ6Ci0JCXJldHVybiAi
ZGVhZCI7Ci0JfQotCi0JcmV0dXJuICJ1bmtub3duIjsKLX0KIAogc3RhdGljIGlubGluZSB1bnNp
Z25lZCBpbnQKIGV4ZWNsaXN0c19udW1fcG9ydHMoY29uc3Qgc3RydWN0IGludGVsX2VuZ2luZV9l
eGVjbGlzdHMgKiBjb25zdCBleGVjbGlzdHMpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZV9jcy5jCmluZGV4IDEyODU1OTQ3YmM5Yi4uMzU4MzMzZGU0MDljIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwpAQCAtMzA1LDYgKzMwNSw3IEBAIHN0
YXRpYyBpbnQgaW50ZWxfZW5naW5lX3NldHVwKHN0cnVjdCBpbnRlbF9ndCAqZ3QsIGVudW0gaW50
ZWxfZW5naW5lX2lkIGlkKQogCV9fc3ByaW50X2VuZ2luZV9uYW1lKGVuZ2luZSk7CiAKIAllbmdp
bmUtPnByb3BzLnByZWVtcHRfdGltZW91dCA9IENPTkZJR19EUk1fSTkxNV9QUkVFTVBUX1RJTUVP
VVQ7CisJZW5naW5lLT5wcm9wcy5oZWFydGJlYXRfaW50ZXJ2YWwgPSBDT05GSUdfRFJNX0k5MTVf
SEVBUlRCRUFUX0lOVEVSVkFMOwogCiAJLyoKIAkgKiBUbyBiZSBvdmVycmlkZGVuIGJ5IHRoZSBi
YWNrZW5kIG9uIHNldHVwLiBIb3dldmVyIHRvIGZhY2lsaXRhdGUKQEAgLTU5OSw3ICs2MDAsNiBA
QCBzdGF0aWMgaW50IGludGVsX2VuZ2luZV9zZXR1cF9jb21tb24oc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lKQogCWludGVsX2VuZ2luZV9pbml0X2FjdGl2ZShlbmdpbmUsIEVOR0lORV9Q
SFlTSUNBTCk7CiAJaW50ZWxfZW5naW5lX2luaXRfYnJlYWRjcnVtYnMoZW5naW5lKTsKIAlpbnRl
bF9lbmdpbmVfaW5pdF9leGVjbGlzdHMoZW5naW5lKTsKLQlpbnRlbF9lbmdpbmVfaW5pdF9oYW5n
Y2hlY2soZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9jbWRfcGFyc2VyKGVuZ2luZSk7CiAJ
aW50ZWxfZW5naW5lX2luaXRfX3BtKGVuZ2luZSk7CiAKQEAgLTE0MTYsOCArMTQxNiwxMyBAQCB2
b2lkIGludGVsX2VuZ2luZV9kdW1wKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAkJ
ZHJtX3ByaW50ZihtLCAiKioqIFdFREdFRCAqKipcbiIpOwogCiAJZHJtX3ByaW50ZihtLCAiXHRB
d2FrZT8gJWRcbiIsIGF0b21pY19yZWFkKCZlbmdpbmUtPndha2VyZWYuY291bnQpKTsKLQlkcm1f
cHJpbnRmKG0sICJcdEhhbmdjaGVjazogJWQgbXMgYWdvXG4iLAotCQkgICBqaWZmaWVzX3RvX21z
ZWNzKGppZmZpZXMgLSBlbmdpbmUtPmhhbmdjaGVjay5hY3Rpb25fdGltZXN0YW1wKSk7CisKKwly
Y3VfcmVhZF9sb2NrKCk7CisJcnEgPSBSRUFEX09OQ0UoZW5naW5lLT5oZWFydGJlYXQuc3lzdG9s
ZSk7CisJaWYgKHJxKQorCQlkcm1fcHJpbnRmKG0sICJcdEhlYXJ0YmVhdDogJWQgbXMgYWdvXG4i
LAorCQkJICAgamlmZmllc190b19tc2VjcyhqaWZmaWVzIC0gcnEtPmVtaXR0ZWRfamlmZmllcykp
OworCXJjdV9yZWFkX3VubG9jaygpOwogCWRybV9wcmludGYobSwgIlx0UmVzZXQgY291bnQ6ICVk
IChnbG9iYWwgJWQpXG4iLAogCQkgICBpOTE1X3Jlc2V0X2VuZ2luZV9jb3VudChlcnJvciwgZW5n
aW5lKSwKIAkJICAgaTkxNV9yZXNldF9jb3VudChlcnJvcikpOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5jCmluZGV4IDJmYzQxM2Y5ZDUwNi4u
ZjY4YWNmOTExOGYzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfaGVhcnRiZWF0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5n
aW5lX2hlYXJ0YmVhdC5jCkBAIC0xMSw2ICsxMSwyNyBAQAogI2luY2x1ZGUgImludGVsX2VuZ2lu
ZV9wbS5oIgogI2luY2x1ZGUgImludGVsX2VuZ2luZS5oIgogI2luY2x1ZGUgImludGVsX2d0Lmgi
CisjaW5jbHVkZSAiaW50ZWxfcmVzZXQuaCIKKworLyoKKyAqIFdoaWxlIHRoZSBlbmdpbmUgaXMg
YWN0aXZlLCB3ZSBzZW5kIGEgcGVyaW9kaWMgcHVsc2UgYWxvbmcgdGhlIGVuZ2luZQorICogdG8g
Y2hlY2sgb24gaXRzIGhlYWx0aCBhbmQgdG8gZmx1c2ggYW55IGlkbGUtYmFycmllcnMuIElmIHRo
YXQgcmVxdWVzdAorICogaXMgc3R1Y2ssIGFuZCB3ZSBmYWlsIHRvIHByZWVtcHQgaXQsIHdlIGRl
Y2xhcmUgdGhlIGVuZ2luZSBodW5nIGFuZAorICogaXNzdWUgYSByZXNldCAtLSBpbiB0aGUgaG9w
ZSB0aGF0IHJlc3RvcmVzIHByb2dyZXNzLgorICovCisKK3N0YXRpYyB2b2lkIG5leHRfaGVhcnRi
ZWF0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKK3sKKwlsb25nIGRlbGF5OworCisJ
ZGVsYXkgPSBSRUFEX09OQ0UoZW5naW5lLT5wcm9wcy5oZWFydGJlYXRfaW50ZXJ2YWwpOworCWlm
ICghZGVsYXkpCisJCXJldHVybjsKKworCWRlbGF5ID0gbXNlY3NfdG9famlmZmllc190aW1lb3V0
KGRlbGF5KTsKKwlzY2hlZHVsZV9kZWxheWVkX3dvcmsoJmVuZ2luZS0+aGVhcnRiZWF0Lndvcmss
CisJCQkgICAgICByb3VuZF9qaWZmaWVzX3VwX3JlbGF0aXZlKGRlbGF5KSk7Cit9CiAKIHN0YXRp
YyB2b2lkIGlkbGVfcHVsc2Uoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCBzdHJ1Y3Qg
aTkxNV9yZXF1ZXN0ICpycSkKIHsKQEAgLTE4LDYgKzM5LDEwMCBAQCBzdGF0aWMgdm9pZCBpZGxl
X3B1bHNlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgc3RydWN0IGk5MTVfcmVxdWVz
dCAqcnEpCiAJaTkxNV9yZXF1ZXN0X2FkZF9hY3RpdmVfYmFycmllcnMocnEpOwogfQogCitzdGF0
aWMgdm9pZCBoZWFydGJlYXQoc3RydWN0IHdvcmtfc3RydWN0ICp3cmspCit7CisJc3RydWN0IGk5
MTVfc2NoZWRfYXR0ciBhdHRyID0geworCQkucHJpb3JpdHkgPSBJOTE1X1VTRVJfUFJJT1JJVFko
STkxNV9QUklPUklUWV9NSU4pLAorCX07CisJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5l
ID0KKwkJY29udGFpbmVyX29mKHdyaywgdHlwZW9mKCplbmdpbmUpLCBoZWFydGJlYXQud29yay53
b3JrKTsKKwlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UgPSBlbmdpbmUtPmtlcm5lbF9jb250ZXh0
OworCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOworCisJaWYgKCFpbnRlbF9lbmdpbmVfcG1fZ2V0
X2lmX2F3YWtlKGVuZ2luZSkpCisJCXJldHVybjsKKworCXJxID0gZW5naW5lLT5oZWFydGJlYXQu
c3lzdG9sZTsKKwlpZiAocnEgJiYgaTkxNV9yZXF1ZXN0X2NvbXBsZXRlZChycSkpIHsKKwkJaTkx
NV9yZXF1ZXN0X3B1dChycSk7CisJCWVuZ2luZS0+aGVhcnRiZWF0LnN5c3RvbGUgPSBOVUxMOwor
CX0KKworCWlmIChpbnRlbF9ndF9pc193ZWRnZWQoZW5naW5lLT5ndCkpCisJCWdvdG8gb3V0Owor
CisJaWYgKGVuZ2luZS0+aGVhcnRiZWF0LnN5c3RvbGUpIHsKKwkJaWYgKElTX0VOQUJMRUQoQ09O
RklHX0RSTV9JOTE1X0RFQlVHX0dFTSkpIHsKKwkJCXN0cnVjdCBkcm1fcHJpbnRlciBwID0gZHJt
X2RlYnVnX3ByaW50ZXIoX19mdW5jX18pOworCisJCQlpbnRlbF9lbmdpbmVfZHVtcChlbmdpbmUs
ICZwLAorCQkJCQkgICIlcyBoZWFydGJlYXQgbm90IHRpY2tpbmdcbiIsCisJCQkJCSAgZW5naW5l
LT5uYW1lKTsKKwkJfQorCisJCWlmIChlbmdpbmUtPnNjaGVkdWxlICYmCisJCSAgICBycS0+c2No
ZWQuYXR0ci5wcmlvcml0eSA8IEk5MTVfUFJJT1JJVFlfQkFSUklFUikgeworCQkJYXR0ci5wcmlv
cml0eSA9CisJCQkJSTkxNV9VU0VSX1BSSU9SSVRZKEk5MTVfUFJJT1JJVFlfSEVBUlRCRUFUKTsK
KwkJCWlmIChycS0+c2NoZWQuYXR0ci5wcmlvcml0eSA+PSBhdHRyLnByaW9yaXR5KQorCQkJCWF0
dHIucHJpb3JpdHkgPSBJOTE1X1BSSU9SSVRZX0JBUlJJRVI7CisKKwkJCWxvY2FsX2JoX2Rpc2Fi
bGUoKTsKKwkJCWVuZ2luZS0+c2NoZWR1bGUocnEsICZhdHRyKTsKKwkJCWxvY2FsX2JoX2VuYWJs
ZSgpOworCQl9IGVsc2UgeworCQkJaW50ZWxfZ3RfaGFuZGxlX2Vycm9yKGVuZ2luZS0+Z3QsIGVu
Z2luZS0+bWFzaywKKwkJCQkJICAgICAgSTkxNV9FUlJPUl9DQVBUVVJFLAorCQkJCQkgICAgICAi
c3RvcHBlZCBoZWFydGJlYXQgb24gJXMiLAorCQkJCQkgICAgICBlbmdpbmUtPm5hbWUpOworCQl9
CisJCWdvdG8gb3V0OworCX0KKworCWlmIChlbmdpbmUtPndha2VyZWZfc2VyaWFsID09IGVuZ2lu
ZS0+c2VyaWFsKQorCQlnb3RvIG91dDsKKworCW11dGV4X2xvY2soJmNlLT50aW1lbGluZS0+bXV0
ZXgpOworCisJaW50ZWxfY29udGV4dF9lbnRlcihjZSk7CisJcnEgPSBfX2k5MTVfcmVxdWVzdF9j
cmVhdGUoY2UsIEdGUF9OT1dBSVQgfCBfX0dGUF9OT1dBUk4pOworCWludGVsX2NvbnRleHRfZXhp
dChjZSk7CisJaWYgKElTX0VSUihycSkpCisJCWdvdG8gdW5sb2NrOworCisJaWRsZV9wdWxzZShl
bmdpbmUsIHJxKTsKKwlpZiAoaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2hhbmdjaGVjaykKKwkJZW5n
aW5lLT5oZWFydGJlYXQuc3lzdG9sZSA9IGk5MTVfcmVxdWVzdF9nZXQocnEpOworCisJX19pOTE1
X3JlcXVlc3RfY29tbWl0KHJxKTsKKwlfX2k5MTVfcmVxdWVzdF9xdWV1ZShycSwgJmF0dHIpOwor
Cit1bmxvY2s6CisJbXV0ZXhfdW5sb2NrKCZjZS0+dGltZWxpbmUtPm11dGV4KTsKK291dDoKKwlu
ZXh0X2hlYXJ0YmVhdChlbmdpbmUpOworCWludGVsX2VuZ2luZV9wbV9wdXQoZW5naW5lKTsKK30K
Kwordm9pZCBpbnRlbF9lbmdpbmVfdW5wYXJrX2hlYXJ0YmVhdChzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmUpCit7CisJaWYgKCFDT05GSUdfRFJNX0k5MTVfSEVBUlRCRUFUX0lOVEVSVkFM
KQorCQlyZXR1cm47CisKKwluZXh0X2hlYXJ0YmVhdChlbmdpbmUpOworfQorCit2b2lkIGludGVs
X2VuZ2luZV9wYXJrX2hlYXJ0YmVhdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCit7
CisJY2FuY2VsX2RlbGF5ZWRfd29yaygmZW5naW5lLT5oZWFydGJlYXQud29yayk7CisJaTkxNV9y
ZXF1ZXN0X3B1dChmZXRjaF9hbmRfemVybygmZW5naW5lLT5oZWFydGJlYXQuc3lzdG9sZSkpOwor
fQorCit2b2lkIGludGVsX2VuZ2luZV9pbml0X2hlYXJ0YmVhdChzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmUpCit7CisJSU5JVF9ERUxBWUVEX1dPUksoJmVuZ2luZS0+aGVhcnRiZWF0Lndv
cmssIGhlYXJ0YmVhdCk7Cit9CisKIGludCBpbnRlbF9lbmdpbmVfcHVsc2Uoc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqZW5naW5lKQogewogCXN0cnVjdCBpOTE1X3NjaGVkX2F0dHIgYXR0ciA9IHsg
LnByaW9yaXR5ID0gSTkxNV9QUklPUklUWV9CQVJSSUVSIH07CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmggYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmgKaW5kZXggYjk1MDQ1MWI1OTk4Li4z
OTM5MTAwNDU1NGQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Vu
Z2luZV9oZWFydGJlYXQuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdp
bmVfaGVhcnRiZWF0LmgKQEAgLTksNiArOSwxMSBAQAogCiBzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
OwogCit2b2lkIGludGVsX2VuZ2luZV9pbml0X2hlYXJ0YmVhdChzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmUpOworCit2b2lkIGludGVsX2VuZ2luZV9wYXJrX2hlYXJ0YmVhdChzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwordm9pZCBpbnRlbF9lbmdpbmVfdW5wYXJrX2hlYXJ0
YmVhdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOworCiBpbnQgaW50ZWxfZW5naW5l
X3B1bHNlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7CiAKICNlbmRpZiAvKiBJTlRF
TF9FTkdJTkVfSEVBUlRCRUFUX0ggKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2VuZ2luZV9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5n
aW5lX3BtLmMKaW5kZXggZDExMTA3ZDkyNjUxLi5mMmVjOTc2Y2ExZGQgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5jCkBAIC03LDYgKzcsNyBAQAogI2luY2x1ZGUg
Imk5MTVfZHJ2LmgiCiAKICNpbmNsdWRlICJpbnRlbF9lbmdpbmUuaCIKKyNpbmNsdWRlICJpbnRl
bF9lbmdpbmVfaGVhcnRiZWF0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3BtLmgiCiAjaW5j
bHVkZSAiaW50ZWxfZW5naW5lX3Bvb2wuaCIKICNpbmNsdWRlICJpbnRlbF9ndC5oIgpAQCAtMzMs
NyArMzQsNyBAQCBzdGF0aWMgaW50IF9fZW5naW5lX3VucGFyayhzdHJ1Y3QgaW50ZWxfd2FrZXJl
ZiAqd2YpCiAJaWYgKGVuZ2luZS0+dW5wYXJrKQogCQllbmdpbmUtPnVucGFyayhlbmdpbmUpOwog
Ci0JaW50ZWxfZW5naW5lX2luaXRfaGFuZ2NoZWNrKGVuZ2luZSk7CisJaW50ZWxfZW5naW5lX3Vu
cGFya19oZWFydGJlYXQoZW5naW5lKTsKIAlyZXR1cm4gMDsKIH0KIApAQCAtMTU3LDYgKzE1OCw3
IEBAIHN0YXRpYyBpbnQgX19lbmdpbmVfcGFyayhzdHJ1Y3QgaW50ZWxfd2FrZXJlZiAqd2YpCiAK
IAljYWxsX2lkbGVfYmFycmllcnMoZW5naW5lKTsgLyogY2xlYW51cCBhZnRlciB3ZWRnaW5nICov
CiAKKwlpbnRlbF9lbmdpbmVfcGFya19oZWFydGJlYXQoZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVf
ZGlzYXJtX2JyZWFkY3J1bWJzKGVuZ2luZSk7CiAJaW50ZWxfZW5naW5lX3Bvb2xfcGFyaygmZW5n
aW5lLT5wb29sKTsKIApAQCAtMTg3LDYgKzE4OSw3IEBAIHZvaWQgaW50ZWxfZW5naW5lX2luaXRf
X3BtKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAlzdHJ1Y3QgaW50ZWxfcnVudGlt
ZV9wbSAqcnBtID0gJmVuZ2luZS0+aTkxNS0+cnVudGltZV9wbTsKIAogCWludGVsX3dha2VyZWZf
aW5pdCgmZW5naW5lLT53YWtlcmVmLCBycG0sICZ3Zl9vcHMpOworCWludGVsX2VuZ2luZV9pbml0
X2hlYXJ0YmVhdChlbmdpbmUpOwogfQogCiAjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVf
U0VMRlRFU1QpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdp
bmVfc3lzZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9zeXNmcy5j
CmluZGV4IDVhYTNiNjdiZDZjZC4uYmU1ODhlYmExMTU2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMuYwpAQCAtNjksMTIgKzY5LDM4IEBAIHByZWVtcHRf
dGltZW91dF9zdG9yZShzdHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IGtvYmpfYXR0cmlidXRl
ICphdHRyLAogCXJldHVybiBjb3VudDsKIH0KIAorc3RhdGljIHNzaXplX3QKK2hlYXJ0YmVhdF9p
bnRlcnZhbF9zaG93KHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUg
KmF0dHIsIGNoYXIgKmJ1ZikKK3sKKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUgPSBr
b2JqX3RvX2VuZ2luZShrb2JqKTsKKworCXJldHVybiBzcHJpbnRmKGJ1ZiwgIiVsdVxuIiwgZW5n
aW5lLT5wcm9wcy5oZWFydGJlYXRfaW50ZXJ2YWwpOworfQorCitzdGF0aWMgc3NpemVfdAoraGVh
cnRiZWF0X2ludGVydmFsX3N0b3JlKHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3Qga29ial9h
dHRyaWJ1dGUgKmF0dHIsCisJCQkgY29uc3QgY2hhciAqYnVmLCBzaXplX3QgY291bnQpCit7CisJ
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lID0ga29ial90b19lbmdpbmUoa29iaik7CisJ
dW5zaWduZWQgbG9uZyBkZWxheTsKKwlpbnQgZXJyOworCisJZXJyID0ga3N0cnRvdWwoYnVmLCAw
LCAmZGVsYXkpOworCWlmIChlcnIpCisJCXJldHVybiBlcnI7CisKKwllbmdpbmUtPnByb3BzLmhl
YXJ0YmVhdF9pbnRlcnZhbCA9IGRlbGF5OworCXJldHVybiBjb3VudDsKK30KKwogc3RhdGljIHN0
cnVjdCBrb2JqX2F0dHJpYnV0ZSBuYW1lX2F0dHIgPSBfX0FUVFIobmFtZSwgMDQ0NCwgbmFtZV9z
aG93LCBOVUxMKTsKIHN0YXRpYyBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgY2xhc3NfYXR0ciA9IF9f
QVRUUihjbGFzcywgMDQ0NCwgY2xhc3Nfc2hvdywgTlVMTCk7CiBzdGF0aWMgc3RydWN0IGtvYmpf
YXR0cmlidXRlIGluc3RfYXR0ciA9IF9fQVRUUihpbnN0YW5jZSwgMDQ0NCwgaW5zdF9zaG93LCBO
VUxMKTsKIHN0YXRpYyBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgbW1pb19hdHRyID0gX19BVFRSKG1t
aW9fYmFzZSwgMDQ0NCwgbW1pb19zaG93LCBOVUxMKTsKIHN0YXRpYyBzdHJ1Y3Qga29ial9hdHRy
aWJ1dGUgcHJlZW1wdF90aW1lb3V0X2F0dHIgPQogX19BVFRSKHByZWVtcHRfdGltZW91dF9tcywg
MDYwMCwgcHJlZW1wdF90aW1lb3V0X3Nob3csIHByZWVtcHRfdGltZW91dF9zdG9yZSk7CitzdGF0
aWMgc3RydWN0IGtvYmpfYXR0cmlidXRlIGhlYXJ0YmVhdF9pbnRlcnZhbF9hdHRyID0KK19fQVRU
UihoZWFydGJlYXRfaW50ZXJ2YWxfbXMsIDA2MDAsIGhlYXJ0YmVhdF9pbnRlcnZhbF9zaG93LCBo
ZWFydGJlYXRfaW50ZXJ2YWxfc3RvcmUpOwogCiBzdGF0aWMgdm9pZCBrb2JqX2VuZ2luZV9yZWxl
YXNlKHN0cnVjdCBrb2JqZWN0ICprb2JqKQogewpAQCAtMTE0LDYgKzE0MCw5IEBAIHZvaWQgaW50
ZWxfZW5naW5lc19hZGRfc3lzZnMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJCSZj
bGFzc19hdHRyLmF0dHIsCiAJCSZpbnN0X2F0dHIuYXR0ciwKIAkJJm1taW9fYXR0ci5hdHRyLAor
I2lmIENPTkZJR19EUk1fSTkxNV9IRUFSVEJFQVRfSU5URVJWQUwKKwkJJmhlYXJ0YmVhdF9pbnRl
cnZhbF9hdHRyLmF0dHIsCisjZW5kaWYKIAkJTlVMTAogCX07CiAKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKaW5kZXggYjE0NDcwNGQyZjIxLi5kYTRiNDVh
YTg0YjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90
eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5o
CkBAIC0xNSw2ICsxNSw3IEBACiAjaW5jbHVkZSA8bGludXgvcmJ0cmVlLmg+CiAjaW5jbHVkZSA8
bGludXgvdGltZXIuaD4KICNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgorI2luY2x1ZGUgPGxpbnV4
L3dvcmtxdWV1ZS5oPgogCiAjaW5jbHVkZSAiaTkxNV9nZW0uaCIKICNpbmNsdWRlICJpOTE1X3Bt
dS5oIgpAQCAtNzYsMTQgKzc3LDYgQEAgc3RydWN0IGludGVsX2luc3Rkb25lIHsKIAl1MzIgcm93
W0k5MTVfTUFYX1NMSUNFU11bSTkxNV9NQVhfU1VCU0xJQ0VTXTsKIH07CiAKLXN0cnVjdCBpbnRl
bF9lbmdpbmVfaGFuZ2NoZWNrIHsKLQl1NjQgYWN0aGQ7Ci0JdTMyIGxhc3RfcmluZzsKLQl1MzIg
bGFzdF9oZWFkOwotCXVuc2lnbmVkIGxvbmcgYWN0aW9uX3RpbWVzdGFtcDsKLQlzdHJ1Y3QgaW50
ZWxfaW5zdGRvbmUgaW5zdGRvbmU7Ci19OwotCiBzdHJ1Y3QgaW50ZWxfcmluZyB7CiAJc3RydWN0
IGtyZWYgcmVmOwogCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOwpAQCAtMzIzLDYgKzMxNiwxMSBAQCBz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzIHsKIAogCWludGVsX2VuZ2luZV9tYXNrX3Qgc2F0dXJhdGVk
OyAvKiBzdWJtaXR0aW5nIHNlbWFwaG9yZXMgdG9vIGxhdGU/ICovCiAKKwlzdHJ1Y3QgeworCQlz
dHJ1Y3QgZGVsYXllZF93b3JrIHdvcms7CisJCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnN5c3RvbGU7
CisJfSBoZWFydGJlYXQ7CisKIAl1bnNpZ25lZCBsb25nIHNlcmlhbDsKIAogCXVuc2lnbmVkIGxv
bmcgd2FrZXJlZl9zZXJpYWw7CkBAIC00NzMsOCArNDcxLDYgQEAgc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyB7CiAJLyogc3RhdHVzX25vdGlmaWVyOiBsaXN0IG9mIGNhbGxiYWNrcyBmb3IgY29udGV4
dC1zd2l0Y2ggY2hhbmdlcyAqLwogCXN0cnVjdCBhdG9taWNfbm90aWZpZXJfaGVhZCBjb250ZXh0
X3N0YXR1c19ub3RpZmllcjsKIAotCXN0cnVjdCBpbnRlbF9lbmdpbmVfaGFuZ2NoZWNrIGhhbmdj
aGVjazsKLQogI2RlZmluZSBJOTE1X0VOR0lORV9ORUVEU19DTURfUEFSU0VSIEJJVCgwKQogI2Rl
ZmluZSBJOTE1X0VOR0lORV9TVVBQT1JUU19TVEFUUyAgIEJJVCgxKQogI2RlZmluZSBJOTE1X0VO
R0lORV9IQVNfUFJFRU1QVElPTiAgIEJJVCgyKQpAQCAtNTQyLDYgKzUzOCw3IEBAIHN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgewogCiAJc3RydWN0IHsKIAkJdW5zaWduZWQgbG9uZyBwcmVlbXB0X3Rp
bWVvdXQ7CisJCXVuc2lnbmVkIGxvbmcgaGVhcnRiZWF0X2ludGVydmFsOwogCX0gcHJvcHM7CiB9
OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYwppbmRleCAzOWZiNjk2MDliZTQuLjcwMGJl
NzVhMTE3NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5jCkBAIC0yMSw3ICsyMSw2IEBA
IHZvaWQgaW50ZWxfZ3RfaW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCBzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlJTklUX0xJU1RfSEVBRCgmZ3QtPmNsb3NlZF92bWEpOwog
CXNwaW5fbG9ja19pbml0KCZndC0+Y2xvc2VkX2xvY2spOwogCi0JaW50ZWxfZ3RfaW5pdF9oYW5n
Y2hlY2soZ3QpOwogCWludGVsX2d0X2luaXRfcmVzZXQoZ3QpOwogCWludGVsX2d0X2luaXRfcmVx
dWVzdHMoZ3QpOwogCWludGVsX2d0X3BtX2luaXRfZWFybHkoZ3QpOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2d0LmgKaW5kZXggZTZhYjBiZmYwZWZiLi41YjZlZmZlZDM3MTMgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZ3QuaApAQCAtNDYsOCArNDYsNiBAQCB2b2lkIGludGVsX2d0X2NsZWFy
X2Vycm9yX3JlZ2lzdGVycyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0LAogdm9pZCBpbnRlbF9ndF9mbHVz
aF9nZ3R0X3dyaXRlcyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKIHZvaWQgaW50ZWxfZ3RfY2hpcHNl
dF9mbHVzaChzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKIAotdm9pZCBpbnRlbF9ndF9pbml0X2hhbmdj
aGVjayhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKLQogc3RhdGljIGlubGluZSB1MzIgaW50ZWxfZ3Rf
c2NyYXRjaF9vZmZzZXQoY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCwKIAkJCQkJICBlbnVtIGlu
dGVsX2d0X3NjcmF0Y2hfZmllbGQgZmllbGQpCiB7CkBAIC01OSw2ICs1Nyw0IEBAIHN0YXRpYyBp
bmxpbmUgYm9vbCBpbnRlbF9ndF9pc193ZWRnZWQoc3RydWN0IGludGVsX2d0ICpndCkKIAlyZXR1
cm4gX19pbnRlbF9yZXNldF9mYWlsZWQoJmd0LT5yZXNldCk7CiB9CiAKLXZvaWQgaW50ZWxfZ3Rf
cXVldWVfaGFuZ2NoZWNrKHN0cnVjdCBpbnRlbF9ndCAqZ3QpOwotCiAjZW5kaWYgLyogX19JTlRF
TF9HVF9IX18gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0
X3BtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jCmluZGV4IDY2MDg1
N2E2NjVlNy4uNDc1MDgzZjk2ODBiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ndF9wbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3Bt
LmMKQEAgLTUxLDcgKzUxLDYgQEAgc3RhdGljIGludCBfX2d0X3VucGFyayhzdHJ1Y3QgaW50ZWxf
d2FrZXJlZiAqd2YpCiAKIAlpOTE1X3BtdV9ndF91bnBhcmtlZChpOTE1KTsKIAotCWludGVsX2d0
X3F1ZXVlX2hhbmdjaGVjayhndCk7CiAJaW50ZWxfZ3RfdW5wYXJrX3JlcXVlc3RzKGd0KTsKIAog
CXBtX25vdGlmeShndCwgSU5URUxfR1RfVU5QQVJLKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9ndF90eXBlcy5oCmluZGV4IGY1MjQ5NDJjODJhYS4uZTA0NTM1NGU3OGUyIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5oCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmgKQEAgLTI1LDE0ICsyNSw2IEBAIHN0
cnVjdCBpOTE1X2dndHQ7CiBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzOwogc3RydWN0IGludGVsX3Vu
Y29yZTsKIAotc3RydWN0IGludGVsX2hhbmdjaGVjayB7Ci0JLyogRm9yIGhhbmdjaGVjayB0aW1l
ciAqLwotI2RlZmluZSBEUk1fSTkxNV9IQU5HQ0hFQ0tfUEVSSU9EIDE1MDAgLyogaW4gbXMgKi8K
LSNkZWZpbmUgRFJNX0k5MTVfSEFOR0NIRUNLX0pJRkZJRVMgbXNlY3NfdG9famlmZmllcyhEUk1f
STkxNV9IQU5HQ0hFQ0tfUEVSSU9EKQotCi0Jc3RydWN0IGRlbGF5ZWRfd29yayB3b3JrOwotfTsK
LQogc3RydWN0IGludGVsX2d0IHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNTsKIAlz
dHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmU7CkBAIC02Niw3ICs1OCw2IEBAIHN0cnVjdCBpbnRl
bF9ndCB7CiAJc3RydWN0IGxpc3RfaGVhZCBjbG9zZWRfdm1hOwogCXNwaW5sb2NrX3QgY2xvc2Vk
X2xvY2s7IC8qIGd1YXJkcyB0aGUgbGlzdCBvZiBjbG9zZWRfdm1hICovCiAKLQlzdHJ1Y3QgaW50
ZWxfaGFuZ2NoZWNrIGhhbmdjaGVjazsKIAlzdHJ1Y3QgaW50ZWxfcmVzZXQgcmVzZXQ7CiAKIAkv
KioKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2hhbmdjaGVjay5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfaGFuZ2NoZWNrLmMKZGVsZXRlZCBmaWxl
IG1vZGUgMTAwNjQ0CmluZGV4IDQwZjYyZjc4MGJlNS4uMDAwMDAwMDAwMDAwCi0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2hhbmdjaGVjay5jCisrKyAvZGV2L251bGwKQEAgLTEs
MzYxICswLDAgQEAKLS8qCi0gKiBDb3B5cmlnaHQgwqkgMjAxNiBJbnRlbCBDb3Jwb3JhdGlvbgot
ICoKLSAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBh
bnkgcGVyc29uIG9idGFpbmluZyBhCi0gKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29j
aWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAotICogdG8gZGVhbCBp
biB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGlt
aXRhdGlvbgotICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxp
c2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsCi0gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhl
IFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKLSAqIFNvZnR3YXJl
IGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlv
bnM6Ci0gKgotICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lv
biBub3RpY2UgKGluY2x1ZGluZyB0aGUgbmV4dAotICogcGFyYWdyYXBoKSBzaGFsbCBiZSBpbmNs
dWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZQotICogU29m
dHdhcmUuCi0gKgotICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQg
V0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKLSAqIElNUExJRUQsIElOQ0xVRElORyBC
VVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAotICog
RklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElO
IE5PIEVWRU5UIFNIQUxMCi0gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBM
SUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgotICogTElBQklMSVRZLCBXSEVU
SEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcK
LSAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRI
RSBVU0UgT1IgT1RIRVIgREVBTElOR1MKLSAqIElOIFRIRSBTT0ZUV0FSRS4KLSAqCi0gKi8KLQot
I2luY2x1ZGUgImk5MTVfZHJ2LmgiCi0jaW5jbHVkZSAiaW50ZWxfZW5naW5lLmgiCi0jaW5jbHVk
ZSAiaW50ZWxfZ3QuaCIKLSNpbmNsdWRlICJpbnRlbF9yZXNldC5oIgotCi1zdHJ1Y3QgaGFuZ2No
ZWNrIHsKLQl1NjQgYWN0aGQ7Ci0JdTMyIHJpbmc7Ci0JdTMyIGhlYWQ7Ci0JZW51bSBpbnRlbF9l
bmdpbmVfaGFuZ2NoZWNrX2FjdGlvbiBhY3Rpb247Ci0JdW5zaWduZWQgbG9uZyBhY3Rpb25fdGlt
ZXN0YW1wOwotCWludCBkZWFkbG9jazsKLQlzdHJ1Y3QgaW50ZWxfaW5zdGRvbmUgaW5zdGRvbmU7
Ci0JYm9vbCB3ZWRnZWQ6MTsKLQlib29sIHN0YWxsZWQ6MTsKLX07Ci0KLXN0YXRpYyBib29sIGlu
c3Rkb25lX3VuY2hhbmdlZCh1MzIgY3VycmVudF9pbnN0ZG9uZSwgdTMyICpvbGRfaW5zdGRvbmUp
Ci17Ci0JdTMyIHRtcCA9IGN1cnJlbnRfaW5zdGRvbmUgfCAqb2xkX2luc3Rkb25lOwotCWJvb2wg
dW5jaGFuZ2VkOwotCi0JdW5jaGFuZ2VkID0gdG1wID09ICpvbGRfaW5zdGRvbmU7Ci0JKm9sZF9p
bnN0ZG9uZSB8PSB0bXA7Ci0KLQlyZXR1cm4gdW5jaGFuZ2VkOwotfQotCi1zdGF0aWMgYm9vbCBz
dWJ1bml0c19zdHVjayhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCi17Ci0Jc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gZW5naW5lLT5pOTE1OwotCWNvbnN0IHN0cnVj
dCBzc2V1X2Rldl9pbmZvICpzc2V1ID0gJlJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnNzZXU7Ci0J
c3RydWN0IGludGVsX2luc3Rkb25lIGluc3Rkb25lOwotCXN0cnVjdCBpbnRlbF9pbnN0ZG9uZSAq
YWNjdV9pbnN0ZG9uZSA9ICZlbmdpbmUtPmhhbmdjaGVjay5pbnN0ZG9uZTsKLQlib29sIHN0dWNr
OwotCWludCBzbGljZTsKLQlpbnQgc3Vic2xpY2U7Ci0KLQlpbnRlbF9lbmdpbmVfZ2V0X2luc3Rk
b25lKGVuZ2luZSwgJmluc3Rkb25lKTsKLQotCS8qIFRoZXJlIG1pZ2h0IGJlIHVuc3RhYmxlIHN1
YnVuaXQgc3RhdGVzIGV2ZW4gd2hlbgotCSAqIGFjdHVhbCBoZWFkIGlzIG5vdCBtb3ZpbmcuIEZp
bHRlciBvdXQgdGhlIHVuc3RhYmxlIG9uZXMgYnkKLQkgKiBhY2N1bXVsYXRpbmcgdGhlIHVuZG9u
ZSAtPiBkb25lIHRyYW5zaXRpb25zIGFuZCBvbmx5Ci0JICogY29uc2lkZXIgdGhvc2UgYXMgcHJv
Z3Jlc3MuCi0JICovCi0Jc3R1Y2sgPSBpbnN0ZG9uZV91bmNoYW5nZWQoaW5zdGRvbmUuaW5zdGRv
bmUsCi0JCQkJICAgJmFjY3VfaW5zdGRvbmUtPmluc3Rkb25lKTsKLQlzdHVjayAmPSBpbnN0ZG9u
ZV91bmNoYW5nZWQoaW5zdGRvbmUuc2xpY2VfY29tbW9uLAotCQkJCSAgICAmYWNjdV9pbnN0ZG9u
ZS0+c2xpY2VfY29tbW9uKTsKLQotCWZvcl9lYWNoX2luc3Rkb25lX3NsaWNlX3N1YnNsaWNlKGRl
dl9wcml2LCBzc2V1LCBzbGljZSwgc3Vic2xpY2UpIHsKLQkJc3R1Y2sgJj0gaW5zdGRvbmVfdW5j
aGFuZ2VkKGluc3Rkb25lLnNhbXBsZXJbc2xpY2VdW3N1YnNsaWNlXSwKLQkJCQkJICAgICZhY2N1
X2luc3Rkb25lLT5zYW1wbGVyW3NsaWNlXVtzdWJzbGljZV0pOwotCQlzdHVjayAmPSBpbnN0ZG9u
ZV91bmNoYW5nZWQoaW5zdGRvbmUucm93W3NsaWNlXVtzdWJzbGljZV0sCi0JCQkJCSAgICAmYWNj
dV9pbnN0ZG9uZS0+cm93W3NsaWNlXVtzdWJzbGljZV0pOwotCX0KLQotCXJldHVybiBzdHVjazsK
LX0KLQotc3RhdGljIGVudW0gaW50ZWxfZW5naW5lX2hhbmdjaGVja19hY3Rpb24KLWhlYWRfc3R1
Y2soc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCB1NjQgYWN0aGQpCi17Ci0JaWYgKGFj
dGhkICE9IGVuZ2luZS0+aGFuZ2NoZWNrLmFjdGhkKSB7Ci0KLQkJLyogQ2xlYXIgc3VidW5pdCBz
dGF0ZXMgb24gaGVhZCBtb3ZlbWVudCAqLwotCQltZW1zZXQoJmVuZ2luZS0+aGFuZ2NoZWNrLmlu
c3Rkb25lLCAwLAotCQkgICAgICAgc2l6ZW9mKGVuZ2luZS0+aGFuZ2NoZWNrLmluc3Rkb25lKSk7
Ci0KLQkJcmV0dXJuIEVOR0lORV9BQ1RJVkVfSEVBRDsKLQl9Ci0KLQlpZiAoIXN1YnVuaXRzX3N0
dWNrKGVuZ2luZSkpCi0JCXJldHVybiBFTkdJTkVfQUNUSVZFX1NVQlVOSVRTOwotCi0JcmV0dXJu
IEVOR0lORV9ERUFEOwotfQotCi1zdGF0aWMgZW51bSBpbnRlbF9lbmdpbmVfaGFuZ2NoZWNrX2Fj
dGlvbgotZW5naW5lX3N0dWNrKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgdTY0IGFj
dGhkKQotewotCWVudW0gaW50ZWxfZW5naW5lX2hhbmdjaGVja19hY3Rpb24gaGE7Ci0JdTMyIHRt
cDsKLQotCWhhID0gaGVhZF9zdHVjayhlbmdpbmUsIGFjdGhkKTsKLQlpZiAoaGEgIT0gRU5HSU5F
X0RFQUQpCi0JCXJldHVybiBoYTsKLQotCWlmIChJU19HRU4oZW5naW5lLT5pOTE1LCAyKSkKLQkJ
cmV0dXJuIEVOR0lORV9ERUFEOwotCi0JLyogSXMgdGhlIGNoaXAgaGFuZ2luZyBvbiBhIFdBSVRf
Rk9SX0VWRU5UPwotCSAqIElmIHNvIHdlIGNhbiBzaW1wbHkgcG9rZSB0aGUgUkJfV0FJVCBiaXQK
LQkgKiBhbmQgYnJlYWsgdGhlIGhhbmcuIFRoaXMgc2hvdWxkIHdvcmsgb24KLQkgKiBhbGwgYnV0
IHRoZSBzZWNvbmQgZ2VuZXJhdGlvbiBjaGlwc2V0cy4KLQkgKi8KLQl0bXAgPSBFTkdJTkVfUkVB
RChlbmdpbmUsIFJJTkdfQ1RMKTsKLQlpZiAodG1wICYgUklOR19XQUlUKSB7Ci0JCWludGVsX2d0
X2hhbmRsZV9lcnJvcihlbmdpbmUtPmd0LCBlbmdpbmUtPm1hc2ssIDAsCi0JCQkJICAgICAgInN0
dWNrIHdhaXQgb24gJXMiLCBlbmdpbmUtPm5hbWUpOwotCQlFTkdJTkVfV1JJVEUoZW5naW5lLCBS
SU5HX0NUTCwgdG1wKTsKLQkJcmV0dXJuIEVOR0lORV9XQUlUX0tJQ0s7Ci0JfQotCi0JcmV0dXJu
IEVOR0lORV9ERUFEOwotfQotCi1zdGF0aWMgdm9pZCBoYW5nY2hlY2tfbG9hZF9zYW1wbGUoc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAotCQkJCSAgc3RydWN0IGhhbmdjaGVjayAqaGMp
Ci17Ci0JaGMtPmFjdGhkID0gaW50ZWxfZW5naW5lX2dldF9hY3RpdmVfaGVhZChlbmdpbmUpOwot
CWhjLT5yaW5nID0gRU5HSU5FX1JFQUQoZW5naW5lLCBSSU5HX1NUQVJUKTsKLQloYy0+aGVhZCA9
IEVOR0lORV9SRUFEKGVuZ2luZSwgUklOR19IRUFEKTsKLX0KLQotc3RhdGljIHZvaWQgaGFuZ2No
ZWNrX3N0b3JlX3NhbXBsZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCi0JCQkJICAg
Y29uc3Qgc3RydWN0IGhhbmdjaGVjayAqaGMpCi17Ci0JZW5naW5lLT5oYW5nY2hlY2suYWN0aGQg
PSBoYy0+YWN0aGQ7Ci0JZW5naW5lLT5oYW5nY2hlY2subGFzdF9yaW5nID0gaGMtPnJpbmc7Ci0J
ZW5naW5lLT5oYW5nY2hlY2subGFzdF9oZWFkID0gaGMtPmhlYWQ7Ci19Ci0KLXN0YXRpYyBlbnVt
IGludGVsX2VuZ2luZV9oYW5nY2hlY2tfYWN0aW9uCi1oYW5nY2hlY2tfZ2V0X2FjdGlvbihzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCi0JCSAgICAgY29uc3Qgc3RydWN0IGhhbmdjaGVj
ayAqaGMpCi17Ci0JaWYgKGludGVsX2VuZ2luZV9pc19pZGxlKGVuZ2luZSkpCi0JCXJldHVybiBF
TkdJTkVfSURMRTsKLQotCWlmIChlbmdpbmUtPmhhbmdjaGVjay5sYXN0X3JpbmcgIT0gaGMtPnJp
bmcpCi0JCXJldHVybiBFTkdJTkVfQUNUSVZFX1NFUU5POwotCi0JaWYgKGVuZ2luZS0+aGFuZ2No
ZWNrLmxhc3RfaGVhZCAhPSBoYy0+aGVhZCkKLQkJcmV0dXJuIEVOR0lORV9BQ1RJVkVfU0VRTk87
Ci0KLQlyZXR1cm4gZW5naW5lX3N0dWNrKGVuZ2luZSwgaGMtPmFjdGhkKTsKLX0KLQotc3RhdGlj
IHZvaWQgaGFuZ2NoZWNrX2FjY3VtdWxhdGVfc2FtcGxlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSwKLQkJCQkJc3RydWN0IGhhbmdjaGVjayAqaGMpCi17Ci0JdW5zaWduZWQgbG9uZyB0
aW1lb3V0ID0gSTkxNV9FTkdJTkVfREVBRF9USU1FT1VUOwotCi0JaGMtPmFjdGlvbiA9IGhhbmdj
aGVja19nZXRfYWN0aW9uKGVuZ2luZSwgaGMpOwotCi0JLyogV2UgYWx3YXlzIGluY3JlbWVudCB0
aGUgcHJvZ3Jlc3MKLQkgKiBpZiB0aGUgZW5naW5lIGlzIGJ1c3kgYW5kIHN0aWxsIHByb2Nlc3Np
bmcKLQkgKiB0aGUgc2FtZSByZXF1ZXN0LCBzbyB0aGF0IG5vIHNpbmdsZSByZXF1ZXN0Ci0JICog
Y2FuIHJ1biBpbmRlZmluaXRlbHkgKHN1Y2ggYXMgYSBjaGFpbiBvZgotCSAqIGJhdGNoZXMpLiBU
aGUgb25seSB0aW1lIHdlIGRvIG5vdCBpbmNyZW1lbnQKLQkgKiB0aGUgaGFuZ2NoZWNrIHNjb3Jl
IG9uIHRoaXMgcmluZywgaWYgdGhpcwotCSAqIGVuZ2luZSBpcyBpbiBhIGxlZ2l0aW1hdGUgd2Fp
dCBmb3IgYW5vdGhlcgotCSAqIGVuZ2luZS4gSW4gdGhhdCBjYXNlIHRoZSB3YWl0aW5nIGVuZ2lu
ZSBpcyBhCi0JICogdmljdGltIGFuZCB3ZSB3YW50IHRvIGJlIHN1cmUgd2UgY2F0Y2ggdGhlCi0J
ICogcmlnaHQgY3VscHJpdC4gVGhlbiBldmVyeSB0aW1lIHdlIGRvIGtpY2sKLQkgKiB0aGUgcmlu
ZywgbWFrZSBpdCBhcyBhIHByb2dyZXNzIGFzIHRoZSBzZXFubwotCSAqIGFkdmFuY2VtZW50IG1p
Z2h0IGVuc3VyZSBhbmQgaWYgbm90LCBpdAotCSAqIHdpbGwgY2F0Y2ggdGhlIGhhbmdpbmcgZW5n
aW5lLgotCSAqLwotCi0Jc3dpdGNoIChoYy0+YWN0aW9uKSB7Ci0JY2FzZSBFTkdJTkVfSURMRToK
LQljYXNlIEVOR0lORV9BQ1RJVkVfU0VRTk86Ci0JCS8qIENsZWFyIGhlYWQgYW5kIHN1YnVuaXQg
c3RhdGVzIG9uIHNlcW5vIG1vdmVtZW50ICovCi0JCWhjLT5hY3RoZCA9IDA7Ci0KLQkJbWVtc2V0
KCZlbmdpbmUtPmhhbmdjaGVjay5pbnN0ZG9uZSwgMCwKLQkJICAgICAgIHNpemVvZihlbmdpbmUt
PmhhbmdjaGVjay5pbnN0ZG9uZSkpOwotCi0JCS8qIEludGVudGlvbmFsIGZhbGwgdGhyb3VnaCAq
LwotCWNhc2UgRU5HSU5FX1dBSVRfS0lDSzoKLQljYXNlIEVOR0lORV9XQUlUOgotCQllbmdpbmUt
PmhhbmdjaGVjay5hY3Rpb25fdGltZXN0YW1wID0gamlmZmllczsKLQkJYnJlYWs7Ci0KLQljYXNl
IEVOR0lORV9BQ1RJVkVfSEVBRDoKLQljYXNlIEVOR0lORV9BQ1RJVkVfU1VCVU5JVFM6Ci0JCS8q
Ci0JCSAqIFNlcW5vIHN0dWNrIHdpdGggc3RpbGwgYWN0aXZlIGVuZ2luZSBnZXRzIGxlZXdheSwK
LQkJICogaW4gaG9wZXMgdGhhdCBpdCBpcyBqdXN0IGEgbG9uZyBzaGFkZXIuCi0JCSAqLwotCQl0
aW1lb3V0ID0gSTkxNV9TRVFOT19ERUFEX1RJTUVPVVQ7Ci0JCWJyZWFrOwotCi0JY2FzZSBFTkdJ
TkVfREVBRDoKLQkJYnJlYWs7Ci0KLQlkZWZhdWx0OgotCQlNSVNTSU5HX0NBU0UoaGMtPmFjdGlv
bik7Ci0JfQotCi0JaGMtPnN0YWxsZWQgPSB0aW1lX2FmdGVyKGppZmZpZXMsCi0JCQkJIGVuZ2lu
ZS0+aGFuZ2NoZWNrLmFjdGlvbl90aW1lc3RhbXAgKyB0aW1lb3V0KTsKLQloYy0+d2VkZ2VkID0g
dGltZV9hZnRlcihqaWZmaWVzLAotCQkJCSBlbmdpbmUtPmhhbmdjaGVjay5hY3Rpb25fdGltZXN0
YW1wICsKLQkJCQkgSTkxNV9FTkdJTkVfV0VER0VEX1RJTUVPVVQpOwotfQotCi1zdGF0aWMgdm9p
ZCBoYW5nY2hlY2tfZGVjbGFyZV9oYW5nKHN0cnVjdCBpbnRlbF9ndCAqZ3QsCi0JCQkJICAgaW50
ZWxfZW5naW5lX21hc2tfdCBodW5nLAotCQkJCSAgIGludGVsX2VuZ2luZV9tYXNrX3Qgc3R1Y2sp
Ci17Ci0Jc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOwotCWludGVsX2VuZ2luZV9tYXNr
X3QgdG1wOwotCWNoYXIgbXNnWzgwXTsKLQlpbnQgbGVuOwotCi0JLyogSWYgc29tZSByaW5ncyBo
dW5nIGJ1dCBvdGhlcnMgd2VyZSBzdGlsbCBidXN5LCBvbmx5Ci0JICogYmxhbWUgdGhlIGhhbmdp
bmcgcmluZ3MgaW4gdGhlIHN5bm9wc2lzLgotCSAqLwotCWlmIChzdHVjayAhPSBodW5nKQotCQlo
dW5nICY9IH5zdHVjazsKLQlsZW4gPSBzY25wcmludGYobXNnLCBzaXplb2YobXNnKSwKLQkJCSIl
cyBvbiAiLCBzdHVjayA9PSBodW5nID8gIm5vIHByb2dyZXNzIiA6ICJoYW5nIik7Ci0JZm9yX2Vh
Y2hfZW5naW5lX21hc2tlZChlbmdpbmUsIGd0LT5pOTE1LCBodW5nLCB0bXApCi0JCWxlbiArPSBz
Y25wcmludGYobXNnICsgbGVuLCBzaXplb2YobXNnKSAtIGxlbiwKLQkJCQkgIiVzLCAiLCBlbmdp
bmUtPm5hbWUpOwotCW1zZ1tsZW4tMl0gPSAnXDAnOwotCi0JcmV0dXJuIGludGVsX2d0X2hhbmRs
ZV9lcnJvcihndCwgaHVuZywgSTkxNV9FUlJPUl9DQVBUVVJFLCAiJXMiLCBtc2cpOwotfQotCi0v
KgotICogVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgY2hpcCBoYXNuJ3QgcmVwb3J0ZWQgYmFjayB3
aXRoIGNvbXBsZXRlZAotICogYmF0Y2hidWZmZXJzIGluIGEgbG9uZyB0aW1lLiBXZSBrZWVwIHRy
YWNrIHBlciByaW5nIHNlcW5vIHByb2dyZXNzIGFuZAotICogaWYgdGhlcmUgYXJlIG5vIHByb2dy
ZXNzLCBoYW5nY2hlY2sgc2NvcmUgZm9yIHRoYXQgcmluZyBpcyBpbmNyZWFzZWQuCi0gKiBGdXJ0
aGVyLCBhY3RoZCBpcyBpbnNwZWN0ZWQgdG8gc2VlIGlmIHRoZSByaW5nIGlzIHN0dWNrLiBPbiBz
dHVjayBjYXNlCi0gKiB3ZSBraWNrIHRoZSByaW5nLiBJZiB3ZSBzZWUgbm8gcHJvZ3Jlc3Mgb24g
dGhyZWUgc3Vic2VxdWVudCBjYWxscwotICogd2UgYXNzdW1lIGNoaXAgaXMgd2VkZ2VkIGFuZCB0
cnkgdG8gZml4IGl0IGJ5IHJlc2V0dGluZyB0aGUgY2hpcC4KLSAqLwotc3RhdGljIHZvaWQgaGFu
Z2NoZWNrX2VsYXBzZWQoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQotewotCXN0cnVjdCBpbnRl
bF9ndCAqZ3QgPQotCQljb250YWluZXJfb2Yod29yaywgdHlwZW9mKCpndCksIGhhbmdjaGVjay53
b3JrLndvcmspOwotCWludGVsX2VuZ2luZV9tYXNrX3QgaHVuZyA9IDAsIHN0dWNrID0gMCwgd2Vk
Z2VkID0gMDsKLQlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7Ci0JZW51bSBpbnRlbF9l
bmdpbmVfaWQgaWQ7Ci0JaW50ZWxfd2FrZXJlZl90IHdha2VyZWY7Ci0KLQlpZiAoIWk5MTVfbW9k
cGFyYW1zLmVuYWJsZV9oYW5nY2hlY2spCi0JCXJldHVybjsKLQotCWlmICghUkVBRF9PTkNFKGd0
LT5hd2FrZSkpCi0JCXJldHVybjsKLQotCWlmIChpbnRlbF9ndF9pc193ZWRnZWQoZ3QpKQotCQly
ZXR1cm47Ci0KLQl3YWtlcmVmID0gaW50ZWxfcnVudGltZV9wbV9nZXRfaWZfaW5fdXNlKCZndC0+
aTkxNS0+cnVudGltZV9wbSk7Ci0JaWYgKCF3YWtlcmVmKQotCQlyZXR1cm47Ci0KLQkvKiBBcyBl
bmFibGluZyB0aGUgR1BVIHJlcXVpcmVzIGZhaXJseSBleHRlbnNpdmUgbW1pbyBhY2Nlc3MsCi0J
ICogcGVyaW9kaWNhbGx5IGFybSB0aGUgbW1pbyBjaGVja2VyIHRvIHNlZSBpZiB3ZSBhcmUgdHJp
Z2dlcmluZwotCSAqIGFueSBpbnZhbGlkIGFjY2Vzcy4KLQkgKi8KLQlpbnRlbF91bmNvcmVfYXJt
X3VuY2xhaW1lZF9tbWlvX2RldGVjdGlvbihndC0+dW5jb3JlKTsKLQotCWZvcl9lYWNoX2VuZ2lu
ZShlbmdpbmUsIGd0LT5pOTE1LCBpZCkgewotCQlzdHJ1Y3QgaGFuZ2NoZWNrIGhjOwotCi0JCWlu
dGVsX2VuZ2luZV9zaWduYWxfYnJlYWRjcnVtYnMoZW5naW5lKTsKLQotCQloYW5nY2hlY2tfbG9h
ZF9zYW1wbGUoZW5naW5lLCAmaGMpOwotCQloYW5nY2hlY2tfYWNjdW11bGF0ZV9zYW1wbGUoZW5n
aW5lLCAmaGMpOwotCQloYW5nY2hlY2tfc3RvcmVfc2FtcGxlKGVuZ2luZSwgJmhjKTsKLQotCQlp
ZiAoaGMuc3RhbGxlZCkgewotCQkJaHVuZyB8PSBlbmdpbmUtPm1hc2s7Ci0JCQlpZiAoaGMuYWN0
aW9uICE9IEVOR0lORV9ERUFEKQotCQkJCXN0dWNrIHw9IGVuZ2luZS0+bWFzazsKLQkJfQotCi0J
CWlmIChoYy53ZWRnZWQpCi0JCQl3ZWRnZWQgfD0gZW5naW5lLT5tYXNrOwotCX0KLQotCWlmIChH
RU1fU0hPV19ERUJVRygpICYmIChodW5nIHwgc3R1Y2spKSB7Ci0JCXN0cnVjdCBkcm1fcHJpbnRl
ciBwID0gZHJtX2RlYnVnX3ByaW50ZXIoImhhbmdjaGVjayIpOwotCi0JCWZvcl9lYWNoX2VuZ2lu
ZShlbmdpbmUsIGd0LT5pOTE1LCBpZCkgewotCQkJaWYgKGludGVsX2VuZ2luZV9pc19pZGxlKGVu
Z2luZSkpCi0JCQkJY29udGludWU7Ci0KLQkJCWludGVsX2VuZ2luZV9kdW1wKGVuZ2luZSwgJnAs
ICIlc1xuIiwgZW5naW5lLT5uYW1lKTsKLQkJfQotCX0KLQotCWlmICh3ZWRnZWQpIHsKLQkJZGV2
X2VycihndC0+aTkxNS0+ZHJtLmRldiwKLQkJCSJHUFUgcmVjb3ZlcnkgdGltZWQgb3V0LCIKLQkJ
CSIgY2FuY2VsbGluZyBhbGwgaW4tZmxpZ2h0IHJlbmRlcmluZy5cbiIpOwotCQlHRU1fVFJBQ0Vf
RFVNUCgpOwotCQlpbnRlbF9ndF9zZXRfd2VkZ2VkKGd0KTsKLQl9Ci0KLQlpZiAoaHVuZykKLQkJ
aGFuZ2NoZWNrX2RlY2xhcmVfaGFuZyhndCwgaHVuZywgc3R1Y2spOwotCi0JaW50ZWxfcnVudGlt
ZV9wbV9wdXQoJmd0LT5pOTE1LT5ydW50aW1lX3BtLCB3YWtlcmVmKTsKLQotCS8qIFJlc2V0IHRp
bWVyIGluIGNhc2UgR1BVIGhhbmdzIHdpdGhvdXQgYW5vdGhlciByZXF1ZXN0IGJlaW5nIGFkZGVk
ICovCi0JaW50ZWxfZ3RfcXVldWVfaGFuZ2NoZWNrKGd0KTsKLX0KLQotdm9pZCBpbnRlbF9ndF9x
dWV1ZV9oYW5nY2hlY2soc3RydWN0IGludGVsX2d0ICpndCkKLXsKLQl1bnNpZ25lZCBsb25nIGRl
bGF5OwotCi0JaWYgKHVubGlrZWx5KCFpOTE1X21vZHBhcmFtcy5lbmFibGVfaGFuZ2NoZWNrKSkK
LQkJcmV0dXJuOwotCi0JLyoKLQkgKiBEb24ndCBjb250aW51YWxseSBkZWZlciB0aGUgaGFuZ2No
ZWNrIHNvIHRoYXQgaXQgaXMgYWx3YXlzIHJ1biBhdAotCSAqIGxlYXN0IG9uY2UgYWZ0ZXIgd29y
ayBoYXMgYmVlbiBzY2hlZHVsZWQgb24gYW55IHJpbmcuIE90aGVyd2lzZSwKLQkgKiB3ZSB3aWxs
IGlnbm9yZSBhIGh1bmcgcmluZyBpZiBhIHNlY29uZCByaW5nIGlzIGtlcHQgYnVzeS4KLQkgKi8K
LQotCWRlbGF5ID0gcm91bmRfamlmZmllc191cF9yZWxhdGl2ZShEUk1fSTkxNV9IQU5HQ0hFQ0tf
SklGRklFUyk7Ci0JcXVldWVfZGVsYXllZF93b3JrKHN5c3RlbV9sb25nX3dxLCAmZ3QtPmhhbmdj
aGVjay53b3JrLCBkZWxheSk7Ci19Ci0KLXZvaWQgaW50ZWxfZW5naW5lX2luaXRfaGFuZ2NoZWNr
KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKLXsKLQltZW1zZXQoJmVuZ2luZS0+aGFu
Z2NoZWNrLCAwLCBzaXplb2YoZW5naW5lLT5oYW5nY2hlY2spKTsKLQllbmdpbmUtPmhhbmdjaGVj
ay5hY3Rpb25fdGltZXN0YW1wID0gamlmZmllczsKLX0KLQotdm9pZCBpbnRlbF9ndF9pbml0X2hh
bmdjaGVjayhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQotewotCUlOSVRfREVMQVlFRF9XT1JLKCZndC0+
aGFuZ2NoZWNrLndvcmssIGhhbmdjaGVja19lbGFwc2VkKTsKLX0KLQotI2lmIElTX0VOQUJMRUQo
Q09ORklHX0RSTV9JOTE1X1NFTEZURVNUKQotI2luY2x1ZGUgInNlbGZ0ZXN0X2hhbmdjaGVjay5j
IgotI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNl
dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYwppbmRleCBlOGM4ZDAw
NDFlOGYuLjI2ODVjMDEwM2U5MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfcmVzZXQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNldC5j
CkBAIC05OTcsOCArOTk3LDYgQEAgdm9pZCBpbnRlbF9ndF9yZXNldChzdHJ1Y3QgaW50ZWxfZ3Qg
Kmd0LAogCWlmIChyZXQpCiAJCWdvdG8gdGFpbnQ7CiAKLQlpbnRlbF9ndF9xdWV1ZV9oYW5nY2hl
Y2soZ3QpOwotCiBmaW5pc2g6CiAJcmVzZXRfZmluaXNoKGd0LCBhd2FrZSk7CiB1bmxvY2s6CkBA
IC0xMzIyLDQgKzEzMjAsNSBAQCB2b2lkIF9faW50ZWxfZmluaV93ZWRnZShzdHJ1Y3QgaW50ZWxf
d2VkZ2VfbWUgKncpCiAKICNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9TRUxGVEVTVCkK
ICNpbmNsdWRlICJzZWxmdGVzdF9yZXNldC5jIgorI2luY2x1ZGUgInNlbGZ0ZXN0X2hhbmdjaGVj
ay5jIgogI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVz
dF9oYW5nY2hlY2suYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2hhbmdjaGVj
ay5jCmluZGV4IGZjNGQwMjQwNjUzNi4uZjJiNWFiMWU1YTJlIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2suYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2suYwpAQCAtMTY4MSw3ICsxNjgxLDYgQEAgaW50
IGludGVsX2hhbmdjaGVja19saXZlX3NlbGZ0ZXN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSkKIAl9OwogCXN0cnVjdCBpbnRlbF9ndCAqZ3QgPSAmaTkxNS0+Z3Q7CiAJaW50ZWxfd2Fr
ZXJlZl90IHdha2VyZWY7Ci0JYm9vbCBzYXZlZF9oYW5nY2hlY2s7CiAJaW50IGVycjsKIAogCWlm
ICghaW50ZWxfaGFzX2dwdV9yZXNldChndC0+aTkxNSkpCkBAIC0xNjkxLDEyICsxNjkwLDkgQEAg
aW50IGludGVsX2hhbmdjaGVja19saXZlX3NlbGZ0ZXN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSkKIAkJcmV0dXJuIC1FSU87IC8qIHdlJ3JlIGxvbmcgcGFzdCBob3BlIG9mIGEgc3Vj
Y2Vzc2Z1bCByZXNldCAqLwogCiAJd2FrZXJlZiA9IGludGVsX3J1bnRpbWVfcG1fZ2V0KCZndC0+
aTkxNS0+cnVudGltZV9wbSk7Ci0Jc2F2ZWRfaGFuZ2NoZWNrID0gZmV0Y2hfYW5kX3plcm8oJmk5
MTVfbW9kcGFyYW1zLmVuYWJsZV9oYW5nY2hlY2spOwotCWRyYWluX2RlbGF5ZWRfd29yaygmZ3Qt
PmhhbmdjaGVjay53b3JrKTsgLyogZmx1c2ggcGFyYW0gKi8KIAogCWVyciA9IGludGVsX2d0X2xp
dmVfc3VidGVzdHModGVzdHMsIGd0KTsKIAotCWk5MTVfbW9kcGFyYW1zLmVuYWJsZV9oYW5nY2hl
Y2sgPSBzYXZlZF9oYW5nY2hlY2s7CiAJaW50ZWxfcnVudGltZV9wbV9wdXQoJmd0LT5pOTE1LT5y
dW50aW1lX3BtLCB3YWtlcmVmKTsKIAogCXJldHVybiBlcnI7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZGVidWdmcy5jCmluZGV4IDVmOTcwM2NhMzEwNC4uZmQ0MTUwNWQ1MmVjIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2RlYnVnZnMuYwpAQCAtMTAwMyw5MiArMTAwMyw2IEBAIHN0YXRpYyBpbnQgaTkx
NV9mcmVxdWVuY3lfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIAlyZXR1
cm4gcmV0OwogfQogCi1zdGF0aWMgdm9pZCBpOTE1X2luc3Rkb25lX2luZm8oc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2LAotCQkJICAgICAgIHN0cnVjdCBzZXFfZmlsZSAqbSwKLQkJ
CSAgICAgICBzdHJ1Y3QgaW50ZWxfaW5zdGRvbmUgKmluc3Rkb25lKQotewotCWNvbnN0IHN0cnVj
dCBzc2V1X2Rldl9pbmZvICpzc2V1ID0gJlJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnNzZXU7Ci0J
aW50IHNsaWNlOwotCWludCBzdWJzbGljZTsKLQotCXNlcV9wcmludGYobSwgIlx0XHRJTlNURE9O
RTogMHglMDh4XG4iLAotCQkgICBpbnN0ZG9uZS0+aW5zdGRvbmUpOwotCi0JaWYgKElOVEVMX0dF
TihkZXZfcHJpdikgPD0gMykKLQkJcmV0dXJuOwotCi0Jc2VxX3ByaW50ZihtLCAiXHRcdFNDX0lO
U1RET05FOiAweCUwOHhcbiIsCi0JCSAgIGluc3Rkb25lLT5zbGljZV9jb21tb24pOwotCi0JaWYg
KElOVEVMX0dFTihkZXZfcHJpdikgPD0gNikKLQkJcmV0dXJuOwotCi0JZm9yX2VhY2hfaW5zdGRv
bmVfc2xpY2Vfc3Vic2xpY2UoZGV2X3ByaXYsIHNzZXUsIHNsaWNlLCBzdWJzbGljZSkKLQkJc2Vx
X3ByaW50ZihtLCAiXHRcdFNBTVBMRVJfSU5TVERPTkVbJWRdWyVkXTogMHglMDh4XG4iLAotCQkJ
ICAgc2xpY2UsIHN1YnNsaWNlLCBpbnN0ZG9uZS0+c2FtcGxlcltzbGljZV1bc3Vic2xpY2VdKTsK
LQotCWZvcl9lYWNoX2luc3Rkb25lX3NsaWNlX3N1YnNsaWNlKGRldl9wcml2LCBzc2V1LCBzbGlj
ZSwgc3Vic2xpY2UpCi0JCXNlcV9wcmludGYobSwgIlx0XHRST1dfSU5TVERPTkVbJWRdWyVkXTog
MHglMDh4XG4iLAotCQkJICAgc2xpY2UsIHN1YnNsaWNlLCBpbnN0ZG9uZS0+cm93W3NsaWNlXVtz
dWJzbGljZV0pOwotfQotCi1zdGF0aWMgaW50IGk5MTVfaGFuZ2NoZWNrX2luZm8oc3RydWN0IHNl
cV9maWxlICptLCB2b2lkICp1bnVzZWQpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUgPSBub2RlX3RvX2k5MTUobS0+cHJpdmF0ZSk7Ci0Jc3RydWN0IGludGVsX2d0ICpndCA9ICZp
OTE1LT5ndDsKLQlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7Ci0JaW50ZWxfd2FrZXJl
Zl90IHdha2VyZWY7Ci0JZW51bSBpbnRlbF9lbmdpbmVfaWQgaWQ7Ci0KLQlzZXFfcHJpbnRmKG0s
ICJSZXNldCBmbGFnczogJWx4XG4iLCBndC0+cmVzZXQuZmxhZ3MpOwotCWlmICh0ZXN0X2JpdChJ
OTE1X1dFREdFRCwgJmd0LT5yZXNldC5mbGFncykpCi0JCXNlcV9wdXRzKG0sICJcdFdlZGdlZFxu
Iik7Ci0JaWYgKHRlc3RfYml0KEk5MTVfUkVTRVRfQkFDS09GRiwgJmd0LT5yZXNldC5mbGFncykp
Ci0JCXNlcV9wdXRzKG0sICJcdERldmljZSAoZ2xvYmFsKSByZXNldCBpbiBwcm9ncmVzc1xuIik7
Ci0KLQlpZiAoIWk5MTVfbW9kcGFyYW1zLmVuYWJsZV9oYW5nY2hlY2spIHsKLQkJc2VxX3B1dHMo
bSwgIkhhbmdjaGVjayBkaXNhYmxlZFxuIik7Ci0JCXJldHVybiAwOwotCX0KLQotCWlmICh0aW1l
cl9wZW5kaW5nKCZndC0+aGFuZ2NoZWNrLndvcmsudGltZXIpKQotCQlzZXFfcHJpbnRmKG0sICJI
YW5nY2hlY2sgYWN0aXZlLCB0aW1lciBmaXJlcyBpbiAlZG1zXG4iLAotCQkJICAgamlmZmllc190
b19tc2VjcyhndC0+aGFuZ2NoZWNrLndvcmsudGltZXIuZXhwaXJlcyAtCi0JCQkJCSAgICBqaWZm
aWVzKSk7Ci0JZWxzZSBpZiAoZGVsYXllZF93b3JrX3BlbmRpbmcoJmd0LT5oYW5nY2hlY2sud29y
aykpCi0JCXNlcV9wdXRzKG0sICJIYW5nY2hlY2sgYWN0aXZlLCB3b3JrIHBlbmRpbmdcbiIpOwot
CWVsc2UKLQkJc2VxX3B1dHMobSwgIkhhbmdjaGVjayBpbmFjdGl2ZVxuIik7Ci0KLQlzZXFfcHJp
bnRmKG0sICJHVCBhY3RpdmU/ICVzXG4iLCB5ZXNubyhndC0+YXdha2UpKTsKLQotCXdpdGhfaW50
ZWxfcnVudGltZV9wbSgmaTkxNS0+cnVudGltZV9wbSwgd2FrZXJlZikgewotCQlmb3JfZWFjaF9l
bmdpbmUoZW5naW5lLCBpOTE1LCBpZCkgewotCQkJc3RydWN0IGludGVsX2luc3Rkb25lIGluc3Rk
b25lOwotCi0JCQlzZXFfcHJpbnRmKG0sICIlczogJWQgbXMgYWdvXG4iLAotCQkJCSAgIGVuZ2lu
ZS0+bmFtZSwKLQkJCQkgICBqaWZmaWVzX3RvX21zZWNzKGppZmZpZXMgLQotCQkJCQkJICAgIGVu
Z2luZS0+aGFuZ2NoZWNrLmFjdGlvbl90aW1lc3RhbXApKTsKLQotCQkJc2VxX3ByaW50ZihtLCAi
XHRBQ1RIRCA9IDB4JTA4bGx4IFtjdXJyZW50IDB4JTA4bGx4XVxuIiwKLQkJCQkgICAobG9uZyBs
b25nKWVuZ2luZS0+aGFuZ2NoZWNrLmFjdGhkLAotCQkJCSAgIGludGVsX2VuZ2luZV9nZXRfYWN0
aXZlX2hlYWQoZW5naW5lKSk7Ci0KLQkJCWludGVsX2VuZ2luZV9nZXRfaW5zdGRvbmUoZW5naW5l
LCAmaW5zdGRvbmUpOwotCi0JCQlzZXFfcHV0cyhtLCAiXHRpbnN0ZG9uZSByZWFkID1cbiIpOwot
CQkJaTkxNV9pbnN0ZG9uZV9pbmZvKGk5MTUsIG0sICZpbnN0ZG9uZSk7Ci0KLQkJCXNlcV9wdXRz
KG0sICJcdGluc3Rkb25lIGFjY3UgPVxuIik7Ci0JCQlpOTE1X2luc3Rkb25lX2luZm8oaTkxNSwg
bSwKLQkJCQkJICAgJmVuZ2luZS0+aGFuZ2NoZWNrLmluc3Rkb25lKTsKLQkJfQotCX0KLQotCXJl
dHVybiAwOwotfQotCiBzdGF0aWMgaW50IGlyb25sYWtlX2RycGNfaW5mbyhzdHJ1Y3Qgc2VxX2Zp
bGUgKm0pCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBub2RlX3RvX2k5MTUo
bS0+cHJpdmF0ZSk7CkBAIC00MzAyLDcgKzQyMTYsNiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9pbmZvX2xpc3QgaTkxNV9kZWJ1Z2ZzX2xpc3RbXSA9IHsKIAl7Imk5MTVfZ3VjX3N0YWdlX3Bv
b2wiLCBpOTE1X2d1Y19zdGFnZV9wb29sLCAwfSwKIAl7Imk5MTVfaHVjX2xvYWRfc3RhdHVzIiwg
aTkxNV9odWNfbG9hZF9zdGF0dXNfaW5mbywgMH0sCiAJeyJpOTE1X2ZyZXF1ZW5jeV9pbmZvIiwg
aTkxNV9mcmVxdWVuY3lfaW5mbywgMH0sCi0JeyJpOTE1X2hhbmdjaGVja19pbmZvIiwgaTkxNV9o
YW5nY2hlY2tfaW5mbywgMH0sCiAJeyJpOTE1X2RycGNfaW5mbyIsIGk5MTVfZHJwY19pbmZvLCAw
fSwKIAl7Imk5MTVfcmluZ19mcmVxX3RhYmxlIiwgaTkxNV9yaW5nX2ZyZXFfdGFibGUsIDB9LAog
CXsiaTkxNV9mcm9udGJ1ZmZlcl90cmFja2luZyIsIGk5MTVfZnJvbnRidWZmZXJfdHJhY2tpbmcs
IDB9LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKaW5kZXggYWIwMGJhNmY2OTViLi44Y2FjNjEyNGQx
NmEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwpAQCAtMTYyMSwxMCArMTYyMSw3IEBAIHZvaWQg
aTkxNV9kcml2ZXJfcmVtb3ZlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCiAJaTkx
NV9kcml2ZXJfbW9kZXNldF9yZW1vdmUoaTkxNSk7CiAKLQkvKiBGcmVlIGVycm9yIHN0YXRlIGFm
dGVyIGludGVycnVwdHMgYXJlIGZ1bGx5IGRpc2FibGVkLiAqLwotCWNhbmNlbF9kZWxheWVkX3dv
cmtfc3luYygmaTkxNS0+Z3QuaGFuZ2NoZWNrLndvcmspOwogCWk5MTVfcmVzZXRfZXJyb3Jfc3Rh
dGUoaTkxNSk7Ci0KIAlpOTE1X2dlbV9kcml2ZXJfcmVtb3ZlKGk5MTUpOwogCiAJaW50ZWxfcG93
ZXJfZG9tYWluc19kcml2ZXJfcmVtb3ZlKGk5MTUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5k
ZXggNGUwYzRiYTJkMjU3Li5hZDdlZDdmNzJkYTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaApA
QCAtMjIxMiw3ICsyMjEyLDYgQEAgZXh0ZXJuIGNvbnN0IHN0cnVjdCBkZXZfcG1fb3BzIGk5MTVf
cG1fb3BzOwogaW50IGk5MTVfZHJpdmVyX3Byb2JlKHN0cnVjdCBwY2lfZGV2ICpwZGV2LCBjb25z
dCBzdHJ1Y3QgcGNpX2RldmljZV9pZCAqZW50KTsKIHZvaWQgaTkxNV9kcml2ZXJfcmVtb3ZlKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKIAotdm9pZCBpbnRlbF9lbmdpbmVfaW5pdF9o
YW5nY2hlY2soc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKIGludCB2bHZfZm9yY2Vf
Z2Z4X2Nsb2NrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgYm9vbCBvbik7CiAK
IHN0YXRpYyBpbmxpbmUgYm9vbCBpbnRlbF9ndnRfYWN0aXZlKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1
X2Vycm9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jCmluZGV4IGEy
OGVlNzU0YjdiNC4uYTg2ZDI4YmRhNmRkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dwdV9lcnJvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vy
cm9yLmMKQEAgLTUzNCwxMCArNTM0LDYgQEAgc3RhdGljIHZvaWQgZXJyb3JfcHJpbnRfZW5naW5l
KHN0cnVjdCBkcm1faTkxNV9lcnJvcl9zdGF0ZV9idWYgKm0sCiAJfQogCWVycl9wcmludGYobSwg
IiAgcmluZy0+aGVhZDogMHglMDh4XG4iLCBlZS0+Y3B1X3JpbmdfaGVhZCk7CiAJZXJyX3ByaW50
ZihtLCAiICByaW5nLT50YWlsOiAweCUwOHhcbiIsIGVlLT5jcHVfcmluZ190YWlsKTsKLQllcnJf
cHJpbnRmKG0sICIgIGhhbmdjaGVjayB0aW1lc3RhbXA6ICVkbXMgKCVsdSVzKVxuIiwKLQkJICAg
amlmZmllc190b19tc2VjcyhlZS0+aGFuZ2NoZWNrX3RpbWVzdGFtcCAtIGVwb2NoKSwKLQkJICAg
ZWUtPmhhbmdjaGVja190aW1lc3RhbXAsCi0JCSAgIGVlLT5oYW5nY2hlY2tfdGltZXN0YW1wID09
IGVwb2NoID8gIjsgZXBvY2giIDogIiIpOwogCWVycl9wcmludGYobSwgIiAgZW5naW5lIHJlc2V0
IGNvdW50OiAldVxuIiwgZWUtPnJlc2V0X2NvdW50KTsKIAogCWZvciAobiA9IDA7IG4gPCBlZS0+
bnVtX3BvcnRzOyBuKyspIHsKQEAgLTY3OSwxMSArNjc1LDggQEAgc3RhdGljIHZvaWQgX19lcnJf
cHJpbnRfdG9fc2dsKHN0cnVjdCBkcm1faTkxNV9lcnJvcl9zdGF0ZV9idWYgKm0sCiAJdHMgPSBr
dGltZV90b190aW1lc3BlYzY0KGVycm9yLT51cHRpbWUpOwogCWVycl9wcmludGYobSwgIlVwdGlt
ZTogJWxsZCBzICVsZCB1c1xuIiwKIAkJICAgKHM2NCl0cy50dl9zZWMsIHRzLnR2X25zZWMgLyBO
U0VDX1BFUl9VU0VDKTsKLQllcnJfcHJpbnRmKG0sICJFcG9jaDogJWx1IGppZmZpZXMgKCV1IEha
KVxuIiwgZXJyb3ItPmVwb2NoLCBIWik7Ci0JZXJyX3ByaW50ZihtLCAiQ2FwdHVyZTogJWx1IGpp
ZmZpZXM7ICVkIG1zIGFnbywgJWQgbXMgYWZ0ZXIgZXBvY2hcbiIsCi0JCSAgIGVycm9yLT5jYXB0
dXJlLAotCQkgICBqaWZmaWVzX3RvX21zZWNzKGppZmZpZXMgLSBlcnJvci0+Y2FwdHVyZSksCi0J
CSAgIGppZmZpZXNfdG9fbXNlY3MoZXJyb3ItPmNhcHR1cmUgLSBlcnJvci0+ZXBvY2gpKTsKKwll
cnJfcHJpbnRmKG0sICJDYXB0dXJlOiAlbHUgamlmZmllczsgJWQgbXMgYWdvXG4iLAorCQkgICBl
cnJvci0+Y2FwdHVyZSwgamlmZmllc190b19tc2VjcyhqaWZmaWVzIC0gZXJyb3ItPmNhcHR1cmUp
KTsKIAogCWZvciAoZWUgPSBlcnJvci0+ZW5naW5lOyBlZTsgZWUgPSBlZS0+bmV4dCkKIAkJZXJy
X3ByaW50ZihtLCAiQWN0aXZlIHByb2Nlc3MgKG9uIHJpbmcgJXMpOiAlcyBbJWRdXG4iLApAQCAt
NzQyLDcgKzczNSw3IEBAIHN0YXRpYyB2b2lkIF9fZXJyX3ByaW50X3RvX3NnbChzdHJ1Y3QgZHJt
X2k5MTVfZXJyb3Jfc3RhdGVfYnVmICptLAogCQllcnJfcHJpbnRmKG0sICJHVFRfQ0FDSEVfRU46
IDB4JTA4eFxuIiwgZXJyb3ItPmd0dF9jYWNoZSk7CiAKIAlmb3IgKGVlID0gZXJyb3ItPmVuZ2lu
ZTsgZWU7IGVlID0gZWUtPm5leHQpCi0JCWVycm9yX3ByaW50X2VuZ2luZShtLCBlZSwgZXJyb3It
PmVwb2NoKTsKKwkJZXJyb3JfcHJpbnRfZW5naW5lKG0sIGVlLCBlcnJvci0+Y2FwdHVyZSk7CiAK
IAlmb3IgKGVlID0gZXJyb3ItPmVuZ2luZTsgZWU7IGVlID0gZWUtPm5leHQpIHsKIAkJY29uc3Qg
c3RydWN0IGRybV9pOTE1X2Vycm9yX29iamVjdCAqb2JqOwpAQCAtNzcwLDcgKzc2Myw3IEBAIHN0
YXRpYyB2b2lkIF9fZXJyX3ByaW50X3RvX3NnbChzdHJ1Y3QgZHJtX2k5MTVfZXJyb3Jfc3RhdGVf
YnVmICptLAogCQkJZm9yIChqID0gMDsgaiA8IGVlLT5udW1fcmVxdWVzdHM7IGorKykKIAkJCQll
cnJvcl9wcmludF9yZXF1ZXN0KG0sICIgIiwKIAkJCQkJCSAgICAmZWUtPnJlcXVlc3RzW2pdLAot
CQkJCQkJICAgIGVycm9yLT5lcG9jaCk7CisJCQkJCQkgICAgZXJyb3ItPmNhcHR1cmUpOwogCQl9
CiAKIAkJcHJpbnRfZXJyb3Jfb2JqKG0sIGVlLT5lbmdpbmUsICJyaW5nYnVmZmVyIiwgZWUtPnJp
bmdidWZmZXIpOwpAQCAtMTE0NCw4ICsxMTM3LDYgQEAgc3RhdGljIHZvaWQgZXJyb3JfcmVjb3Jk
X2VuZ2luZV9yZWdpc3RlcnMoc3RydWN0IGk5MTVfZ3B1X3N0YXRlICplcnJvciwKIAl9CiAKIAll
ZS0+aWRsZSA9IGludGVsX2VuZ2luZV9pc19pZGxlKGVuZ2luZSk7Ci0JaWYgKCFlZS0+aWRsZSkK
LQkJZWUtPmhhbmdjaGVja190aW1lc3RhbXAgPSBlbmdpbmUtPmhhbmdjaGVjay5hY3Rpb25fdGlt
ZXN0YW1wOwogCWVlLT5yZXNldF9jb3VudCA9IGk5MTVfcmVzZXRfZW5naW5lX2NvdW50KCZkZXZf
cHJpdi0+Z3B1X2Vycm9yLAogCQkJCQkJICBlbmdpbmUpOwogCkBAIC0xNjU4LDIwICsxNjQ5LDYg
QEAgc3RhdGljIHZvaWQgY2FwdHVyZV9wYXJhbXMoc3RydWN0IGk5MTVfZ3B1X3N0YXRlICplcnJv
cikKIAlpOTE1X3BhcmFtc19jb3B5KCZlcnJvci0+cGFyYW1zLCAmaTkxNV9tb2RwYXJhbXMpOwog
fQogCi1zdGF0aWMgdW5zaWduZWQgbG9uZyBjYXB0dXJlX2ZpbmRfZXBvY2goY29uc3Qgc3RydWN0
IGk5MTVfZ3B1X3N0YXRlICplcnJvcikKLXsKLQljb25zdCBzdHJ1Y3QgZHJtX2k5MTVfZXJyb3Jf
ZW5naW5lICplZTsKLQl1bnNpZ25lZCBsb25nIGVwb2NoID0gZXJyb3ItPmNhcHR1cmU7Ci0KLQlm
b3IgKGVlID0gZXJyb3ItPmVuZ2luZTsgZWU7IGVlID0gZWUtPm5leHQpIHsKLQkJaWYgKGVlLT5o
YW5nY2hlY2tfdGltZXN0YW1wICYmCi0JCSAgICB0aW1lX2JlZm9yZShlZS0+aGFuZ2NoZWNrX3Rp
bWVzdGFtcCwgZXBvY2gpKQotCQkJZXBvY2ggPSBlZS0+aGFuZ2NoZWNrX3RpbWVzdGFtcDsKLQl9
Ci0KLQlyZXR1cm4gZXBvY2g7Ci19Ci0KIHN0YXRpYyB2b2lkIGNhcHR1cmVfZmluaXNoKHN0cnVj
dCBpOTE1X2dwdV9zdGF0ZSAqZXJyb3IpCiB7CiAJc3RydWN0IGk5MTVfZ2d0dCAqZ2d0dCA9ICZl
cnJvci0+aTkxNS0+Z2d0dDsKQEAgLTE3MjMsOCArMTcwMCw2IEBAIGk5MTVfY2FwdHVyZV9ncHVf
c3RhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJZXJyb3ItPm92ZXJsYXkgPSBp
bnRlbF9vdmVybGF5X2NhcHR1cmVfZXJyb3Jfc3RhdGUoaTkxNSk7CiAJZXJyb3ItPmRpc3BsYXkg
PSBpbnRlbF9kaXNwbGF5X2NhcHR1cmVfZXJyb3Jfc3RhdGUoaTkxNSk7CiAKLQllcnJvci0+ZXBv
Y2ggPSBjYXB0dXJlX2ZpbmRfZXBvY2goZXJyb3IpOwotCiAJY2FwdHVyZV9maW5pc2goZXJyb3Ip
OwogCWNvbXByZXNzX2ZpbmkoJmNvbXByZXNzKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1
X2Vycm9yLmgKaW5kZXggNjNjZjM4NzQxMWUwLi5jYWFlZDUwOTNkOTUgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmgKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9ncHVfZXJyb3IuaApAQCAtMzQsNyArMzQsNiBAQCBzdHJ1Y3QgaTkxNV9ncHVf
c3RhdGUgewogCWt0aW1lX3QgYm9vdHRpbWU7CiAJa3RpbWVfdCB1cHRpbWU7CiAJdW5zaWduZWQg
bG9uZyBjYXB0dXJlOwotCXVuc2lnbmVkIGxvbmcgZXBvY2g7CiAKIAlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNTsKIApAQCAtODYsNyArODUsNiBAQCBzdHJ1Y3QgaTkxNV9ncHVfc3RhdGUg
ewogCiAJCS8qIFNvZnR3YXJlIHRyYWNrZWQgc3RhdGUgKi8KIAkJYm9vbCBpZGxlOwotCQl1bnNp
Z25lZCBsb25nIGhhbmdjaGVja190aW1lc3RhbXA7CiAJCWludCBudW1fcmVxdWVzdHM7CiAJCXUz
MiByZXNldF9jb3VudDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9w
cmlvbGlzdF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wcmlvbGlzdF90eXBl
cy5oCmluZGV4IGFlOGJiM2NiNjI3ZS4uNzMyYWFkMTQ4ODgxIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3ByaW9saXN0X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9wcmlvbGlzdF90eXBlcy5oCkBAIC0xNiw2ICsxNiwxMiBAQCBlbnVtIHsKIAlJ
OTE1X1BSSU9SSVRZX01JTiA9IEk5MTVfQ09OVEVYVF9NSU5fVVNFUl9QUklPUklUWSAtIDEsCiAJ
STkxNV9QUklPUklUWV9OT1JNQUwgPSBJOTE1X0NPTlRFWFRfREVGQVVMVF9QUklPUklUWSwKIAlJ
OTE1X1BSSU9SSVRZX01BWCA9IEk5MTVfQ09OVEVYVF9NQVhfVVNFUl9QUklPUklUWSArIDEsCisK
KwkvKiBBIHByZWVtcHRpdmUgcHVsc2UgdXNlZCB0byBtb25pdG9yIHRoZSBoZWFsdGggb2YgZWFj
aCBlbmdpbmUgKi8KKwlJOTE1X1BSSU9SSVRZX0hFQVJUQkVBVCwKKworCS8qIEludGVyYWN0aXZl
IHdvcmtsb2FkLCBzY2hlZHVsZWQgZm9yIGltbWVkaWF0ZSBwYWdlZmxpcHBpbmcgKi8KKwlJOTE1
X1BSSU9SSVRZX0RJU1BMQVksCiB9OwogCiAjZGVmaW5lIEk5MTVfVVNFUl9QUklPUklUWV9TSElG
VCAyCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVs
LWdmeA==

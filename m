Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id BA1E5FCEE1
	for <lists+intel-gfx@lfdr.de>; Thu, 14 Nov 2019 20:45:16 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 69FE76E3C4;
	Thu, 14 Nov 2019 19:45:14 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7A74F6E3C4
 for <intel-gfx@lists.freedesktop.org>; Thu, 14 Nov 2019 19:45:12 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 14 Nov 2019 11:45:08 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,305,1569308400"; d="scan'208";a="203165933"
Received: from orsosgc001.ra.intel.com (HELO orsosgc001.amr.corp.intel.com)
 ([10.23.184.150])
 by fmsmga008.fm.intel.com with ESMTP; 14 Nov 2019 11:45:07 -0800
Date: Thu, 14 Nov 2019 11:45:07 -0800
From: Umesh Nerlige Ramappa <umesh.nerlige.ramappa@intel.com>
To: intel-gfx@lists.freedesktop.org,
 Lionel G Landwerlin <lionel.g.landwerlin@intel.com>,
 Chris Wilson <chris.p.wilson@intel.com>
Message-ID: <20191114194507.GA61651@orsosgc001.amr.corp.intel.com>
References: <20191114192114.61547-1-umesh.nerlige.ramappa@intel.com>
 <20191114192114.61547-2-umesh.nerlige.ramappa@intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191114192114.61547-2-umesh.nerlige.ramappa@intel.com>
User-Agent: Mutt/1.12.0 (2019-05-25)
Subject: Re: [Intel-gfx] [PATCH 2/2] drm/i915/perf: Configure OAR for
 specific context
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCBOb3YgMTQsIDIwMTkgYXQgMTE6MjE6MTRBTSAtMDgwMCwgVW1lc2ggTmVybGlnZSBS
YW1hcHBhIHdyb3RlOgo+R2VuMTIgc3VwcG9ydHMgc2F2aW5nL3Jlc3RvcmluZyByZW5kZXIgY291
bnRlcnMgcGVyIGNvbnRleHQuIEFwcGx5IE9BUgo+Y29uZmlndXJhdGlvbiBvbmx5IGZvciB0aGUg
Y29udGV4dCB0aGF0IGlzIHBhc3NlZCBpbiB0byBwZXJmLgo+Cj52MjoKPi0gRml4IE9BQ1RYQ09O
VFJPTCB2YWx1ZSB0byBvbmx5IHN0b3AvcmVzdW1lIGNvdW50ZXJzLgo+LSBSZW1vdmUgZ2VuMTJf
dXBkYXRlX3JlZ19zdGF0ZV91bmxvY2tlZCBhcyBwb3dlciBzdGF0ZSBpcyBhbHJlYWR5Cj4gIGFw
cGxpZWQgYnkgdGhlIGNhbGxlci4KPgo+U2lnbmVkLW9mZi1ieTogVW1lc2ggTmVybGlnZSBSYW1h
cHBhIDx1bWVzaC5uZXJsaWdlLnJhbWFwcGFAaW50ZWwuY29tPgoKSUdUIFRlc3RzIGluIHRoaXMg
c2VyaWVzOgpodHRwczovL3BhdGNod29yay5mcmVlZGVza3RvcC5vcmcvc2VyaWVzLzY5MzIyLwoK
Z2VuMTItbWktcnBjCmdlbjEyLXVucHJpdmlsZWdlZC1zaW5nbGUtY3R4LWNvdW50ZXJzCgpUaGFu
a3MsClVtZXNoCgo+LS0tCj4gZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMgfCAxOTMg
KysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLQo+IDEgZmlsZSBjaGFuZ2VkLCAxMDggaW5z
ZXJ0aW9ucygrKSwgODUgZGVsZXRpb25zKC0pCj4KPmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X3BlcmYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCj5p
bmRleCAyMjFjMTA5MGFlOTMuLjJmMGJlNWZiZWY0YiAxMDA2NDQKPi0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfcGVyZi5jCj4rKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Bl
cmYuYwo+QEAgLTIwNzgsMjAgKzIwNzgsMTIgQEAgZ2VuOF91cGRhdGVfcmVnX3N0YXRlX3VubG9j
a2VkKGNvbnN0IHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKPiAJdTMyICpyZWdfc3RhdGUgPSBj
ZS0+bHJjX3JlZ19zdGF0ZTsKPiAJaW50IGk7Cj4KPi0JaWYgKElTX0dFTihzdHJlYW0tPnBlcmYt
Pmk5MTUsIDEyKSkgewo+LQkJdTMyIGZvcm1hdCA9IHN0cmVhbS0+b2FfYnVmZmVyLmZvcm1hdDsK
PisJcmVnX3N0YXRlW2N0eF9vYWN0eGN0cmwgKyAxXSA9Cj4rCQkoc3RyZWFtLT5wZXJpb2RfZXhw
b25lbnQgPDwgR0VOOF9PQV9USU1FUl9QRVJJT0RfU0hJRlQpIHwKPisJCShzdHJlYW0tPnBlcmlv
ZGljID8gR0VOOF9PQV9USU1FUl9FTkFCTEUgOiAwKSB8Cj4rCQlHRU44X09BX0NPVU5URVJfUkVT
VU1FOwo+Cj4tCQlyZWdfc3RhdGVbY3R4X29hY3R4Y3RybCArIDFdID0KPi0JCQkoZm9ybWF0IDw8
IEdFTjEyX09BUl9PQUNPTlRST0xfQ09VTlRFUl9GT1JNQVRfU0hJRlQpIHwKPi0JCQkoc3RyZWFt
LT5vYV9jb25maWcgPyBHRU4xMl9PQVJfT0FDT05UUk9MX0NPVU5URVJfRU5BQkxFIDogMCk7Cj4t
CX0gZWxzZSB7Cj4tCQlyZWdfc3RhdGVbY3R4X29hY3R4Y3RybCArIDFdID0KPi0JCQkoc3RyZWFt
LT5wZXJpb2RfZXhwb25lbnQgPDwgR0VOOF9PQV9USU1FUl9QRVJJT0RfU0hJRlQpIHwKPi0JCQko
c3RyZWFtLT5wZXJpb2RpYyA/IEdFTjhfT0FfVElNRVJfRU5BQkxFIDogMCkgfAo+LQkJCUdFTjhf
T0FfQ09VTlRFUl9SRVNVTUU7Cj4tCX0KPi0KPi0JZm9yIChpID0gMDsgISFjdHhfZmxleGV1MCAm
JiBpIDwgQVJSQVlfU0laRShmbGV4X3JlZ3MpOyBpKyspCj4rCWZvciAoaSA9IDA7IGkgPCBBUlJB
WV9TSVpFKGZsZXhfcmVncyk7IGkrKykKPiAJCXJlZ19zdGF0ZVtjdHhfZmxleGV1MCArIGkgKiAy
ICsgMV0gPQo+IAkJCW9hX2NvbmZpZ19mbGV4X3JlZyhzdHJlYW0tPm9hX2NvbmZpZywgZmxleF9y
ZWdzW2ldKTsKPgo+QEAgLTIyMjQsMzQgKzIyMTYsNDkgQEAgc3RhdGljIGludCBnZW44X2NvbmZp
Z3VyZV9jb250ZXh0KHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgsCj4gCXJldHVybiBlcnI7
Cj4gfQo+Cj4tc3RhdGljIGludCBnZW4xMl9lbWl0X29hcl9jb25maWcoc3RydWN0IGludGVsX2Nv
bnRleHQgKmNlLCBib29sIGVuYWJsZSkKPitzdGF0aWMgaW50IGdlbjEyX2NvbmZpZ3VyZV9vYXJf
Y29udGV4dChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLCBib29sIGVuYWJsZSkKPiB7
Cj4tCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+LQl1MzIgKmNzOwo+LQlpbnQgZXJyID0gMDsK
Pi0KPi0JcnEgPSBpOTE1X3JlcXVlc3RfY3JlYXRlKGNlKTsKPi0JaWYgKElTX0VSUihycSkpCj4t
CQlyZXR1cm4gUFRSX0VSUihycSk7Cj4rCWludCBlcnI7Cj4rCXN0cnVjdCBpbnRlbF9jb250ZXh0
ICpjZSA9IHN0cmVhbS0+cGlubmVkX2N0eDsKPisJc3RydWN0IGZsZXggcmVnc19jb250ZXh0W10g
PSB7Cj4rCQl7Cj4rCQkJR0VOOF9PQUNUWENPTlRST0wsCj4rCQkJc3RyZWFtLT5wZXJmLT5jdHhf
b2FjdHhjdHJsX29mZnNldCArIDEsCj4rCQkJZW5hYmxlID8gR0VOOF9PQV9DT1VOVEVSX1JFU1VN
RSA6IDAsCj4rCQl9LAo+Kwl9Owo+KwlzdHJ1Y3QgZmxleCByZWdzX2xyaVtdID0gewo+KwkJewo+
KwkJCUdFTjEyX09BUl9PQUNPTlRST0wsCj4rCQl9LAo+KwkJewo+KwkJCVJJTkdfQ09OVEVYVF9D
T05UUk9MKGNlLT5lbmdpbmUtPm1taW9fYmFzZSksCj4rCQl9LAo+Kwl9Owo+Kwl1MzIgZm9ybWF0
ID0gc3RyZWFtLT5vYV9idWZmZXIuZm9ybWF0Owo+Cj4tCWNzID0gaW50ZWxfcmluZ19iZWdpbihy
cSwgNCk7Cj4tCWlmIChJU19FUlIoY3MpKSB7Cj4tCQllcnIgPSBQVFJfRVJSKGNzKTsKPi0JCWdv
dG8gb3V0Owo+LQl9Cj4rCXJlZ3NfbHJpWzBdLnZhbHVlID0KPisJCShmb3JtYXQgPDwgR0VOMTJf
T0FSX09BQ09OVFJPTF9DT1VOVEVSX0ZPUk1BVF9TSElGVCkgfAo+KwkJKGVuYWJsZSA/IEdFTjEy
X09BUl9PQUNPTlRST0xfQ09VTlRFUl9FTkFCTEUgOiAwKTsKPgo+LQkqY3MrKyA9IE1JX0xPQURf
UkVHSVNURVJfSU1NKDEpOwo+LQkqY3MrKyA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KFJJTkdfQ09O
VEVYVF9DT05UUk9MKGNlLT5lbmdpbmUtPm1taW9fYmFzZSkpOwo+LQkqY3MrKyA9IF9NQVNLRURf
RklFTEQoR0VOMTJfQ1RYX0NUUkxfT0FSX0NPTlRFWFRfRU5BQkxFLAo+LQkJCSAgICAgIGVuYWJs
ZSA/IEdFTjEyX0NUWF9DVFJMX09BUl9DT05URVhUX0VOQUJMRSA6IDApOwo+LQkqY3MrKyA9IE1J
X05PT1A7Cj4rCXJlZ3NfbHJpWzFdLnZhbHVlID0KPisJCV9NQVNLRURfRklFTEQoR0VOMTJfQ1RY
X0NUUkxfT0FSX0NPTlRFWFRfRU5BQkxFLAo+KwkJCSAgICAgIGVuYWJsZSA/Cj4rCQkJICAgICAg
R0VOMTJfQ1RYX0NUUkxfT0FSX0NPTlRFWFRfRU5BQkxFIDoKPisJCQkgICAgICAwKTsKPgo+LQlp
bnRlbF9yaW5nX2FkdmFuY2UocnEsIGNzKTsKPisJLyogTW9kaWZ5IHRoZSBjb250ZXh0IGltYWdl
IG9mIHBpbm5lZCBjb250ZXh0IHdpdGggcmVnc19jb250ZXh0Ki8KPisJZXJyID0gaW50ZWxfY29u
dGV4dF9sb2NrX3Bpbm5lZChjZSk7Cj4rCWlmIChlcnIpCj4rCQlyZXR1cm4gZXJyOwo+Cj4tb3V0
Ogo+LQlpOTE1X3JlcXVlc3RfYWRkKHJxKTsKPisJZXJyID0gZ2VuOF9tb2RpZnlfY29udGV4dChj
ZSwgcmVnc19jb250ZXh0LCBBUlJBWV9TSVpFKHJlZ3NfY29udGV4dCkpOwo+KwlpbnRlbF9jb250
ZXh0X3VubG9ja19waW5uZWQoY2UpOwo+KwlpZiAoZXJyKQo+KwkJcmV0dXJuIGVycjsKPgo+LQly
ZXR1cm4gZXJyOwo+KwkvKiBBcHBseSByZWdzX2xyaSB1c2luZyBMUkkgd2l0aCBwaW5uZWQgY29u
dGV4dCAqLwo+KwlyZXR1cm4gZ2VuOF9tb2RpZnlfc2VsZihjZSwgcmVnc19scmksIEFSUkFZX1NJ
WkUocmVnc19scmkpKTsKPiB9Cj4KPiAvKgo+QEAgLTIyNzcsNTMgKzIyODQsMTYgQEAgc3RhdGlj
IGludCBnZW4xMl9lbWl0X29hcl9jb25maWcoc3RydWN0IGludGVsX2NvbnRleHQgKmNlLCBib29s
IGVuYWJsZSkKPiAgKiAgIHBlci1jb250ZXh0IE9BIHN0YXRlLgo+ICAqCj4gICogTm90ZTogaXQn
cyBvbmx5IHRoZSBSQ1MvUmVuZGVyIGNvbnRleHQgdGhhdCBoYXMgYW55IE9BIHN0YXRlLgo+KyAq
IE5vdGU6IHRoZSBmaXJzdCBmbGV4IHJlZ2lzdGVyIHBhc3NlZCBtdXN0IGFsd2F5cyBiZSBSX1BX
Ul9DTEtfU1RBVEUKPiAgKi8KPi1zdGF0aWMgaW50IGxyY19jb25maWd1cmVfYWxsX2NvbnRleHRz
KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCj4tCQkJCSAgICAgIGNvbnN0IHN0cnVj
dCBpOTE1X29hX2NvbmZpZyAqb2FfY29uZmlnKQo+K3N0YXRpYyBpbnQgb2FfY29uZmlndXJlX2Fs
bF9jb250ZXh0cyhzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAo+KwkJCQkgICAgIHN0
cnVjdCBmbGV4ICpyZWdzLAo+KwkJCQkgICAgIHNpemVfdCBudW1fcmVncykKPiB7Cj4gCXN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gc3RyZWFtLT5wZXJmLT5pOTE1Owo+LQkvKiBUaGUg
TU1JTyBvZmZzZXRzIGZvciBGbGV4IEVVIHJlZ2lzdGVycyBhcmVuJ3QgY29udGlndW91cyAqLwo+
LQljb25zdCB1MzIgY3R4X2ZsZXhldTAgPSBzdHJlYW0tPnBlcmYtPmN0eF9mbGV4ZXUwX29mZnNl
dDsKPi0jZGVmaW5lIGN0eF9mbGV4ZXVOKE4pIChjdHhfZmxleGV1MCArIDIgKiAoTikgKyAxKQo+
LQlzdHJ1Y3QgZmxleCByZWdzW10gPSB7Cj4tCQl7Cj4tCQkJR0VOOF9SX1BXUl9DTEtfU1RBVEUs
Cj4tCQkJQ1RYX1JfUFdSX0NMS19TVEFURSwKPi0JCX0sCj4tCQl7Cj4tCQkJSVNfR0VOKGk5MTUs
IDEyKSA/Cj4tCQkJR0VOMTJfT0FSX09BQ09OVFJPTCA6IEdFTjhfT0FDVFhDT05UUk9MLAo+LQkJ
CXN0cmVhbS0+cGVyZi0+Y3R4X29hY3R4Y3RybF9vZmZzZXQgKyAxLAo+LQkJfSwKPi0JCXsgRVVf
UEVSRl9DTlRMMCwgY3R4X2ZsZXhldU4oMCkgfSwKPi0JCXsgRVVfUEVSRl9DTlRMMSwgY3R4X2Zs
ZXhldU4oMSkgfSwKPi0JCXsgRVVfUEVSRl9DTlRMMiwgY3R4X2ZsZXhldU4oMikgfSwKPi0JCXsg
RVVfUEVSRl9DTlRMMywgY3R4X2ZsZXhldU4oMykgfSwKPi0JCXsgRVVfUEVSRl9DTlRMNCwgY3R4
X2ZsZXhldU4oNCkgfSwKPi0JCXsgRVVfUEVSRl9DTlRMNSwgY3R4X2ZsZXhldU4oNSkgfSwKPi0J
CXsgRVVfUEVSRl9DTlRMNiwgY3R4X2ZsZXhldU4oNikgfSwKPi0JfTsKPi0jdW5kZWYgY3R4X2Zs
ZXhldU4KPiAJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOwo+IAlzdHJ1Y3QgaTkxNV9n
ZW1fY29udGV4dCAqY3R4LCAqY247Cj4tCXNpemVfdCBhcnJheV9zaXplID0gSVNfR0VOKGk5MTUs
IDEyKSA/IDIgOiBBUlJBWV9TSVpFKHJlZ3MpOwo+LQlpbnQgaSwgZXJyOwo+LQo+LQlpZiAoSVNf
R0VOKGk5MTUsIDEyKSkgewo+LQkJdTMyIGZvcm1hdCA9IHN0cmVhbS0+b2FfYnVmZmVyLmZvcm1h
dDsKPi0KPi0JCXJlZ3NbMV0udmFsdWUgPQo+LQkJCShmb3JtYXQgPDwgR0VOMTJfT0FSX09BQ09O
VFJPTF9DT1VOVEVSX0ZPUk1BVF9TSElGVCkgfAo+LQkJCShvYV9jb25maWcgPyBHRU4xMl9PQVJf
T0FDT05UUk9MX0NPVU5URVJfRU5BQkxFIDogMCk7Cj4tCX0gZWxzZSB7Cj4tCQlyZWdzWzFdLnZh
bHVlID0KPi0JCQkoc3RyZWFtLT5wZXJpb2RfZXhwb25lbnQgPDwgR0VOOF9PQV9USU1FUl9QRVJJ
T0RfU0hJRlQpIHwKPi0JCQkoc3RyZWFtLT5wZXJpb2RpYyA/IEdFTjhfT0FfVElNRVJfRU5BQkxF
IDogMCkgfAo+LQkJCUdFTjhfT0FfQ09VTlRFUl9SRVNVTUU7Cj4tCX0KPi0KPi0JZm9yIChpID0g
MjsgISFjdHhfZmxleGV1MCAmJiBpIDwgYXJyYXlfc2l6ZTsgaSsrKQo+LQkJcmVnc1tpXS52YWx1
ZSA9IG9hX2NvbmZpZ19mbGV4X3JlZyhvYV9jb25maWcsIHJlZ3NbaV0ucmVnKTsKPisJaW50IGVy
cjsKPgo+IAlsb2NrZGVwX2Fzc2VydF9oZWxkKCZzdHJlYW0tPnBlcmYtPmxvY2spOwo+Cj5AQCAt
MjM1Myw3ICsyMzIzLDcgQEAgc3RhdGljIGludCBscmNfY29uZmlndXJlX2FsbF9jb250ZXh0cyhz
dHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAo+Cj4gCQlzcGluX3VubG9jaygmaTkxNS0+
Z2VtLmNvbnRleHRzLmxvY2spOwo+Cj4tCQllcnIgPSBnZW44X2NvbmZpZ3VyZV9jb250ZXh0KGN0
eCwgcmVncywgYXJyYXlfc2l6ZSk7Cj4rCQllcnIgPSBnZW44X2NvbmZpZ3VyZV9jb250ZXh0KGN0
eCwgcmVncywgbnVtX3JlZ3MpOwo+IAkJaWYgKGVycikgewo+IAkJCWk5MTVfZ2VtX2NvbnRleHRf
cHV0KGN0eCk7Cj4gCQkJcmV0dXJuIGVycjsKPkBAIC0yMzc4LDcgKzIzNDgsNyBAQCBzdGF0aWMg
aW50IGxyY19jb25maWd1cmVfYWxsX2NvbnRleHRzKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpz
dHJlYW0sCj4KPiAJCXJlZ3NbMF0udmFsdWUgPSBpbnRlbF9zc2V1X21ha2VfcnBjcyhpOTE1LCAm
Y2UtPnNzZXUpOwo+Cj4tCQllcnIgPSBnZW44X21vZGlmeV9zZWxmKGNlLCByZWdzLCBhcnJheV9z
aXplKTsKPisJCWVyciA9IGdlbjhfbW9kaWZ5X3NlbGYoY2UsIHJlZ3MsIG51bV9yZWdzKTsKPiAJ
CWlmIChlcnIpCj4gCQkJcmV0dXJuIGVycjsKPiAJfQo+QEAgLTIzODYsNiArMjM1Niw1NiBAQCBz
dGF0aWMgaW50IGxyY19jb25maWd1cmVfYWxsX2NvbnRleHRzKHN0cnVjdCBpOTE1X3BlcmZfc3Ry
ZWFtICpzdHJlYW0sCj4gCXJldHVybiAwOwo+IH0KPgo+K3N0YXRpYyBpbnQgZ2VuMTJfY29uZmln
dXJlX2FsbF9jb250ZXh0cyhzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAo+KwkJCQkJ
Y29uc3Qgc3RydWN0IGk5MTVfb2FfY29uZmlnICpvYV9jb25maWcpCj4rewo+KwlzdHJ1Y3QgZmxl
eCByZWdzW10gPSB7Cj4rCQl7Cj4rCQkJR0VOOF9SX1BXUl9DTEtfU1RBVEUsCj4rCQkJQ1RYX1Jf
UFdSX0NMS19TVEFURSwKPisJCX0sCj4rCX07Cj4rCj4rCXJldHVybiBvYV9jb25maWd1cmVfYWxs
X2NvbnRleHRzKHN0cmVhbSwgcmVncywgQVJSQVlfU0laRShyZWdzKSk7Cj4rfQo+Kwo+K3N0YXRp
YyBpbnQgbHJjX2NvbmZpZ3VyZV9hbGxfY29udGV4dHMoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0g
KnN0cmVhbSwKPisJCQkJICAgICAgY29uc3Qgc3RydWN0IGk5MTVfb2FfY29uZmlnICpvYV9jb25m
aWcpCj4rewo+KwkvKiBUaGUgTU1JTyBvZmZzZXRzIGZvciBGbGV4IEVVIHJlZ2lzdGVycyBhcmVu
J3QgY29udGlndW91cyAqLwo+Kwljb25zdCB1MzIgY3R4X2ZsZXhldTAgPSBzdHJlYW0tPnBlcmYt
PmN0eF9mbGV4ZXUwX29mZnNldDsKPisjZGVmaW5lIGN0eF9mbGV4ZXVOKE4pIChjdHhfZmxleGV1
MCArIDIgKiAoTikgKyAxKQo+KwlzdHJ1Y3QgZmxleCByZWdzW10gPSB7Cj4rCQl7Cj4rCQkJR0VO
OF9SX1BXUl9DTEtfU1RBVEUsCj4rCQkJQ1RYX1JfUFdSX0NMS19TVEFURSwKPisJCX0sCj4rCQl7
Cj4rCQkJR0VOOF9PQUNUWENPTlRST0wsCj4rCQkJc3RyZWFtLT5wZXJmLT5jdHhfb2FjdHhjdHJs
X29mZnNldCArIDEsCj4rCQl9LAo+KwkJeyBFVV9QRVJGX0NOVEwwLCBjdHhfZmxleGV1TigwKSB9
LAo+KwkJeyBFVV9QRVJGX0NOVEwxLCBjdHhfZmxleGV1TigxKSB9LAo+KwkJeyBFVV9QRVJGX0NO
VEwyLCBjdHhfZmxleGV1TigyKSB9LAo+KwkJeyBFVV9QRVJGX0NOVEwzLCBjdHhfZmxleGV1Tigz
KSB9LAo+KwkJeyBFVV9QRVJGX0NOVEw0LCBjdHhfZmxleGV1Tig0KSB9LAo+KwkJeyBFVV9QRVJG
X0NOVEw1LCBjdHhfZmxleGV1Tig1KSB9LAo+KwkJeyBFVV9QRVJGX0NOVEw2LCBjdHhfZmxleGV1
Tig2KSB9LAo+Kwl9Owo+KyN1bmRlZiBjdHhfZmxleGV1Tgo+KwlpbnQgaTsKPisKPisJcmVnc1sx
XS52YWx1ZSA9Cj4rCQkoc3RyZWFtLT5wZXJpb2RfZXhwb25lbnQgPDwgR0VOOF9PQV9USU1FUl9Q
RVJJT0RfU0hJRlQpIHwKPisJCShzdHJlYW0tPnBlcmlvZGljID8gR0VOOF9PQV9USU1FUl9FTkFC
TEUgOiAwKSB8Cj4rCQlHRU44X09BX0NPVU5URVJfUkVTVU1FOwo+Kwo+Kwlmb3IgKGkgPSAyOyBp
IDwgQVJSQVlfU0laRShyZWdzKTsgaSsrKQo+KwkJcmVnc1tpXS52YWx1ZSA9IG9hX2NvbmZpZ19m
bGV4X3JlZyhvYV9jb25maWcsIHJlZ3NbaV0ucmVnKTsKPisKPisJcmV0dXJuIG9hX2NvbmZpZ3Vy
ZV9hbGxfY29udGV4dHMoc3RyZWFtLCByZWdzLCBBUlJBWV9TSVpFKHJlZ3MpKTsKPit9Cj4rCj4g
c3RhdGljIGludCBnZW44X2VuYWJsZV9tZXRyaWNfc2V0KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFt
ICpzdHJlYW0pCj4gewo+IAlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSBzdHJlYW0tPnVu
Y29yZTsKPkBAIC0yNDY5LDcgKzI0ODksNyBAQCBzdGF0aWMgaW50IGdlbjEyX2VuYWJsZV9tZXRy
aWNfc2V0KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCj4gCSAqIHRvIG1ha2Ugc3Vy
ZSBhbGwgc2xpY2VzL3N1YnNsaWNlcyBhcmUgT04gYmVmb3JlIHdyaXRpbmcgdG8gTk9BCj4gCSAq
IHJlZ2lzdGVycy4KPiAJICovCj4tCXJldCA9IGxyY19jb25maWd1cmVfYWxsX2NvbnRleHRzKHN0
cmVhbSwgb2FfY29uZmlnKTsKPisJcmV0ID0gZ2VuMTJfY29uZmlndXJlX2FsbF9jb250ZXh0cyhz
dHJlYW0sIG9hX2NvbmZpZyk7Cj4gCWlmIChyZXQpCj4gCQlyZXR1cm4gcmV0Owo+Cj5AQCAtMjQ3
OSw4ICsyNDk5LDcgQEAgc3RhdGljIGludCBnZW4xMl9lbmFibGVfbWV0cmljX3NldChzdHJ1Y3Qg
aTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQo+IAkgKiByZXF1ZXN0ZWQgdGhpcy4KPiAJICovCj4g
CWlmIChzdHJlYW0tPmN0eCkgewo+LQkJcmV0ID0gZ2VuMTJfZW1pdF9vYXJfY29uZmlnKHN0cmVh
bS0+cGlubmVkX2N0eCwKPi0JCQkJCSAgICBvYV9jb25maWcgIT0gTlVMTCk7Cj4rCQlyZXQgPSBn
ZW4xMl9jb25maWd1cmVfb2FyX2NvbnRleHQoc3RyZWFtLCBvYV9jb25maWcgIT0gTlVMTCk7Cj4g
CQlpZiAocmV0KQo+IAkJCXJldHVybiByZXQ7Cj4gCX0KPkBAIC0yNTE0LDExICsyNTMzLDExIEBA
IHN0YXRpYyB2b2lkIGdlbjEyX2Rpc2FibGVfbWV0cmljX3NldChzdHJ1Y3QgaTkxNV9wZXJmX3N0
cmVhbSAqc3RyZWFtKQo+IAlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSBzdHJlYW0tPnVu
Y29yZTsKPgo+IAkvKiBSZXNldCBhbGwgY29udGV4dHMnIHNsaWNlcy9zdWJzbGljZXMgY29uZmln
dXJhdGlvbnMuICovCj4tCWxyY19jb25maWd1cmVfYWxsX2NvbnRleHRzKHN0cmVhbSwgTlVMTCk7
Cj4rCWdlbjEyX2NvbmZpZ3VyZV9hbGxfY29udGV4dHMoc3RyZWFtLCBOVUxMKTsKPgo+IAkvKiBk
aXNhYmxlIHRoZSBjb250ZXh0IHNhdmUvcmVzdG9yZSBvciBPQVIgY291bnRlcnMgKi8KPiAJaWYg
KHN0cmVhbS0+Y3R4KQo+LQkJZ2VuMTJfZW1pdF9vYXJfY29uZmlnKHN0cmVhbS0+cGlubmVkX2N0
eCwgZmFsc2UpOwo+KwkJZ2VuMTJfY29uZmlndXJlX29hcl9jb250ZXh0KHN0cmVhbSwgZmFsc2Up
Owo+Cj4gCS8qIE1ha2Ugc3VyZSB3ZSBkaXNhYmxlIG5vYSB0byBzYXZlIHBvd2VyLiAqLwo+IAlp
bnRlbF91bmNvcmVfcm13KHVuY29yZSwgUlBNX0NPTkZJRzEsIEdFTjEwX0dUX05PQV9FTkFCTEUs
IDApOwo+QEAgLTI4NjAsNyArMjg3OSwxMSBAQCB2b2lkIGk5MTVfb2FfaW5pdF9yZWdfc3RhdGUo
Y29uc3Qgc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAo+IAkJcmV0dXJuOwo+Cj4gCXN0cmVhbSA9
IGVuZ2luZS0+aTkxNS0+cGVyZi5leGNsdXNpdmVfc3RyZWFtOwo+LQlpZiAoc3RyZWFtKQo+Kwkv
Kgo+KwkgKiBGb3IgZ2VuMTIsIG9ubHkgQ1RYX1JfUFdSX0NMS19TVEFURSBuZWVkcyB1cGRhdGUs
IGJ1dCB0aGUgY2FsbGVyCj4rCSAqIGlzIGFscmVhZHkgZG9pbmcgdGhhdCwgc28gbm90aGluZyB0
byBiZSBkb25lIGZvciBnZW4xMiBoZXJlLgo+KwkgKi8KPisJaWYgKHN0cmVhbSAmJiBJTlRFTF9H
RU4oc3RyZWFtLT5wZXJmLT5pOTE1KSA8IDEyKQo+IAkJZ2VuOF91cGRhdGVfcmVnX3N0YXRlX3Vu
bG9ja2VkKGNlLCBzdHJlYW0pOwo+IH0KPgo+LS0gCj4yLjIwLjEKPgo+X19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPkludGVsLWdmeCBtYWlsaW5nIGxpc3QK
PkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

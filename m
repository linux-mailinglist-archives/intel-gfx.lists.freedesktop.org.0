Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A2A6328E730
	for <lists+intel-gfx@lfdr.de>; Wed, 14 Oct 2020 21:20:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A688489CA1;
	Wed, 14 Oct 2020 19:20:55 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0D0AD6EB35
 for <intel-gfx@lists.freedesktop.org>; Wed, 14 Oct 2020 19:20:51 +0000 (UTC)
IronPort-SDR: j/BqWsEBQJYO8fQHgrS86FsbNrDzV1wrZcZuhl8s/cIt44u4ehUI3mkmJBtC2JwJaRk1zq/m0E
 i3BbbPu51nYA==
X-IronPort-AV: E=McAfee;i="6000,8403,9774"; a="183703020"
X-IronPort-AV: E=Sophos;i="5.77,375,1596524400"; d="scan'208";a="183703020"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by fmsmga101.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 14 Oct 2020 12:20:44 -0700
IronPort-SDR: T1cIWzvhzT8eBISnwpVaS2dtTwMWNNcVtSmEUn4tfZPdhCgoaAevhv4pbTgIaVgiYqSPnBfYVO
 VH1Cq+/BnwSg==
X-IronPort-AV: E=Sophos;i="5.77,375,1596524400"; d="scan'208";a="345781257"
Received: from lucas-s2600cw.jf.intel.com ([10.165.21.202])
 by fmsmga004-auth.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 14 Oct 2020 12:20:44 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 14 Oct 2020 12:19:34 -0700
Message-Id: <20201014191937.1266226-8-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.28.0
In-Reply-To: <20201014191937.1266226-1-lucas.demarchi@intel.com>
References: <20201014191937.1266226-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 08/11] drm/i915/dg1: Add initial DG1 workarounds
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogU3R1YXJ0IFN1bW1lcnMgPHN0dWFydC5zdW1tZXJzQGludGVsLmNvbT4KCkRHMSBzaGFy
ZXMgc29tZSB3b3JrYXJvdW5kcyB3aXRoIFRHTCBhbmQgUktMIGFuZCBhbHNvIGhhcyBzb21lCmFk
ZGl0aW9uYWwgd29ya2Fyb3VuZHMgb2YgaXRzIG93bi4KCnYyOiBDb3JyZWN0IGxvY2F0aW9uIG9m
IFdhXzE0MDg2MTUwNzIgKEpvaG5IKS4KdjM6IEFwcGx5IFdBcyAxNjA2NzAwNjE3LCAxODAxMTQ2
NDE2NCBhbmQgMjIwMTA5MzEyOTYgdG8gREcxIChKb3PDqSkKdjQgKEFudXNoYSkKICAtIEFkZCBX
YV8yMjAxMDI3MTAyMQogIC0gcy9XYV8xNDAxMDA5Njg0NC9XYV8xNDA5ODM2Njg2CnY1OgogIC0g
RXh0ZW5kIFdhXzE0MDEwOTE5MTM4IHRvIGFsbCByZXZzIChNYXR0IEF0d29vZCkKICAtIFBvd2Vy
IGdhdGUgbWVkaWEgaXMgZ2xvYmFsIGdlbjEyIGRlc2lnbi4gKFJvZHJpZ28pCiAgLSBSZWJhc2Ug
KEx1Y2FzKQp2NjogdXNlIFJFR19CSVQoKSB0byBmaXggY2hlY2twYXRjaCB3YXJuaW5nIChMdWNh
cykKCkJTcGVjOiA1MzUwOAoKQ2M6IE1hdHQgQXR3b29kIDxtYXR0aGV3LnMuYXR3b29kQGludGVs
LmNvbT4KQ2M6IE1hdHQgUm9wZXIgPG1hdHRoZXcuZC5yb3BlckBpbnRlbC5jb20+CkNjOiBSYWRo
YWtyaXNobmEgU3JpcGFkYSA8cmFkaGFrcmlzaG5hLnNyaXBhZGFAaW50ZWwuY29tPgpDYzogSm9z
w6kgUm9iZXJ0byBkZSBTb3V6YSA8am9zZS5zb3V6YUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6
IFN0dWFydCBTdW1tZXJzIDxzdHVhcnQuc3VtbWVyc0BpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6
IEFudXNoYSBTcml2YXRzYSA8YW51c2hhLnNyaXZhdHNhQGludGVsLmNvbT4KU2lnbmVkLW9mZi1i
eTogUm9kcmlnbyBWaXZpIDxyb2RyaWdvLnZpdmlAaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogTHVj
YXMgRGUgTWFyY2hpIDxsdWNhcy5kZW1hcmNoaUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEx1
Y2FzIERlIE1hcmNoaSA8bHVjYXMuZGVtYXJjaGlAaW50ZWwuY29tPgotLS0KIC4uLi9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYyAgICB8ICAgNSArLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYyAgIHwgICA0ICstCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jICAgfCAxMTEgKysrKysrKysrKysrKystLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BjaS5jICAgICAgICAgICAgICAgfCAgIDIgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCAgICAgICAgICAgICAgIHwgIDE0ICsrLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyAgICAgICAgICAgICAgIHwgIDM5ICsrKyst
LQogNiBmaWxlcyBjaGFuZ2VkLCAxMzEgaW5zZXJ0aW9ucygrKSwgNDQgZGVsZXRpb25zKC0pCgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bv
d2VyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIu
YwppbmRleCA0OTM0Yzg5ODgyYjEuLjE4YWYwNzhjMjA4YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMKQEAgLTUyNzMsOCArNTI3
Myw5IEBAIHN0YXRpYyB2b2lkIHRnbF9id19idWRkeV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikKIAl1bnNpZ25lZCBsb25nIGFib3hfbWFzayA9IElOVEVMX0lORk8oZGV2
X3ByaXYpLT5hYm94X21hc2s7CiAJaW50IGNvbmZpZywgaTsKIAotCWlmIChJU19UR0xfRElTUF9S
RVZJRChkZXZfcHJpdiwgVEdMX1JFVklEX0EwLCBUR0xfUkVWSURfQjApKQotCQkvKiBXYV8xNDA5
NzY3MTA4OiB0Z2wgKi8KKwlpZiAoSVNfREcxX1JFVklEKGRldl9wcml2LCBERzFfUkVWSURfQTAs
IERHMV9SRVZJRF9BMCkgfHwKKwkgICAgSVNfVEdMX0RJU1BfUkVWSUQoZGV2X3ByaXYsIFRHTF9S
RVZJRF9BMCwgVEdMX1JFVklEX0IwKSkKKwkJLyogV2FfMTQwOTc2NzEwODp0Z2wsZGcxICovCiAJ
CXRhYmxlID0gd2FfMTQwOTc2NzEwOF9idWRkeV9wYWdlX21hc2tzOwogCWVsc2UKIAkJdGFibGUg
PSB0Z2xfYnVkZHlfcGFnZV9tYXNrczsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX3Nwcml0ZS5jCmluZGV4IDNhZTc0NzBjMWI4Yi4uODhiZmViZGY5MjI4IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMKQEAgLTI4ODYsOCArMjg4Niw4
IEBAIHN0YXRpYyBib29sIHNrbF9wbGFuZV9mb3JtYXRfbW9kX3N1cHBvcnRlZChzdHJ1Y3QgZHJt
X3BsYW5lICpfcGxhbmUsCiBzdGF0aWMgYm9vbCBnZW4xMl9wbGFuZV9zdXBwb3J0c19tY19jY3Mo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJCQllbnVtIHBsYW5lX2lkIHBs
YW5lX2lkKQogewotCS8qIFdhXzE0MDEwNDc3MDA4OnRnbFthMC4uYzBdLHJrbFthbGxdICovCi0J
aWYgKElTX1JPQ0tFVExBS0UoZGV2X3ByaXYpIHx8CisJLyogV2FfMTQwMTA0NzcwMDg6dGdsW2Ew
Li5jMF0scmtsW2FsbF0sZGcxW2FsbF0gKi8KKwlpZiAoSVNfREcxKGRldl9wcml2KSB8fCBJU19S
T0NLRVRMQUtFKGRldl9wcml2KSB8fAogCSAgICBJU19UR0xfRElTUF9SRVZJRChkZXZfcHJpdiwg
VEdMX1JFVklEX0EwLCBUR0xfUkVWSURfQzApKQogCQlyZXR1cm4gZmFsc2U7CiAKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jCmluZGV4IGM2NDMzYjcyZjVlOS4u
ZmVkOTUwM2E3YzRlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93
b3JrYXJvdW5kcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91
bmRzLmMKQEAgLTY3Miw2ICs2NzIsMjAgQEAgc3RhdGljIHZvaWQgdGdsX2N0eF93b3JrYXJvdW5k
c19pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAkgICAgICAgMCk7CiB9CiAK
K3N0YXRpYyB2b2lkIGRnMV9jdHhfd29ya2Fyb3VuZHNfaW5pdChzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmUsCisJCQkJICAgICBzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwpCit7CisJZ2Vu
MTJfY3R4X3dvcmthcm91bmRzX2luaXQoZW5naW5lLCB3YWwpOworCisJLyogV2FfMTQwOTA0NDc2
NCAqLworCVdBX0NMUl9CSVRfTUFTS0VEKEdFTjExX0NPTU1PTl9TTElDRV9DSElDS0VOMywKKwkJ
CSAgREcxX0ZMT0FUX1BPSU5UX0JMRU5EX09QVF9TVFJJQ1RfTU9ERV9FTik7CisKKwkvKiBXYV8y
MjAxMDQ5MzI5OCAqLworCVdBX1NFVF9CSVRfTUFTS0VEKEhJWl9DSElDS0VOLAorCQkJICBERzFf
SFpfUkVBRF9TVVBQUkVTU0lPTl9PUFRJTUlaQVRJT05fRElTQUJMRSk7Cit9CisKIHN0YXRpYyB2
b2lkCiBfX2ludGVsX2VuZ2luZV9pbml0X2N0eF93YShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUsCiAJCQkgICBzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwsCkBAIC02ODQsNyArNjk4LDkg
QEAgX19pbnRlbF9lbmdpbmVfaW5pdF9jdHhfd2Eoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5n
aW5lLAogCiAJd2FfaW5pdF9zdGFydCh3YWwsIG5hbWUsIGVuZ2luZS0+bmFtZSk7CiAKLQlpZiAo
SVNfUk9DS0VUTEFLRShpOTE1KSB8fCBJU19USUdFUkxBS0UoaTkxNSkpCisJaWYgKElTX0RHMShp
OTE1KSkKKwkJZGcxX2N0eF93b3JrYXJvdW5kc19pbml0KGVuZ2luZSwgd2FsKTsKKwllbHNlIGlm
IChJU19ST0NLRVRMQUtFKGk5MTUpIHx8IElTX1RJR0VSTEFLRShpOTE1KSkKIAkJdGdsX2N0eF93
b3JrYXJvdW5kc19pbml0KGVuZ2luZSwgd2FsKTsKIAllbHNlIGlmIChJU19HRU4oaTkxNSwgMTIp
KQogCQlnZW4xMl9jdHhfd29ya2Fyb3VuZHNfaW5pdChlbmdpbmUsIHdhbCk7CkBAIC0xMjQ0LDEw
ICsxMjYwLDM2IEBAIHRnbF9ndF93b3JrYXJvdW5kc19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1LCBzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwpCiAJCQkgICAgTDNfQ0xLR0FURV9E
SVMgfCBMM19DUjJYX0NMS0dBVEVfRElTKTsKIH0KIAorc3RhdGljIHZvaWQKK2RnMV9ndF93b3Jr
YXJvdW5kc19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBzdHJ1Y3QgaTkxNV93
YV9saXN0ICp3YWwpCit7CisJZ2VuMTJfZ3Rfd29ya2Fyb3VuZHNfaW5pdChpOTE1LCB3YWwpOwor
CisJLyogV2FfMTYwNzA4NzA1NjpkZzEgKi8KKwlpZiAoSVNfREcxX1JFVklEKGk5MTUsIERHMV9S
RVZJRF9BMCwgREcxX1JFVklEX0EwKSkKKwkJd2Ffd3JpdGVfb3Iod2FsLAorCQkJICAgIFNMSUNF
X1VOSVRfTEVWRUxfQ0xLR0FURSwKKwkJCSAgICBMM19DTEtHQVRFX0RJUyB8IEwzX0NSMlhfQ0xL
R0FURV9ESVMpOworCisJLyogV2FfMTQwOTQyMDYwNDpkZzEgKi8KKwlpZiAoSVNfREcxKGk5MTUp
KQorCQl3YV93cml0ZV9vcih3YWwsCisJCQkgICAgU1VCU0xJQ0VfVU5JVF9MRVZFTF9DTEtHQVRF
MiwKKwkJCSAgICBDUFNTVU5JVF9DTEtHQVRFX0RJUyk7CisKKwkvKiBXYV8xNDA4NjE1MDcyOmRn
MSAqLworCS8qIEVtcGlyaWNhbCB0ZXN0aW5nIHNob3dzIHRoaXMgcmVnaXN0ZXIgaXMgdW5hZmZl
Y3RlZCBieSBlbmdpbmUgcmVzZXQuICovCisJaWYgKElTX0RHMShpOTE1KSkKKwkJd2Ffd3JpdGVf
b3Iod2FsLCBVTlNMSUNFX1VOSVRfTEVWRUxfQ0xLR0FURTIsCisJCQkgICAgVlNVTklUX0NMS0dB
VEVfRElTX1RHTCk7Cit9CisKIHN0YXRpYyB2b2lkCiBndF9pbml0X3dvcmthcm91bmRzKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwpCiB7Ci0J
aWYgKElTX1RJR0VSTEFLRShpOTE1KSkKKwlpZiAoSVNfREcxKGk5MTUpKQorCQlkZzFfZ3Rfd29y
a2Fyb3VuZHNfaW5pdChpOTE1LCB3YWwpOworCWVsc2UgaWYgKElTX1RJR0VSTEFLRShpOTE1KSkK
IAkJdGdsX2d0X3dvcmthcm91bmRzX2luaXQoaTkxNSwgd2FsKTsKIAllbHNlIGlmIChJU19HRU4o
aTkxNSwgMTIpKQogCQlnZW4xMl9ndF93b3JrYXJvdW5kc19pbml0KGk5MTUsIHdhbCk7CkBAIC0x
NjEyLDYgKzE2NTQsMjAgQEAgc3RhdGljIHZvaWQgdGdsX3doaXRlbGlzdF9idWlsZChzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJfQogfQogCitzdGF0aWMgdm9pZCBkZzFfd2hpdGVs
aXN0X2J1aWxkKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKK3sKKwlzdHJ1Y3QgaTkx
NV93YV9saXN0ICp3ID0gJmVuZ2luZS0+d2hpdGVsaXN0OworCisJdGdsX3doaXRlbGlzdF9idWls
ZChlbmdpbmUpOworCisJLyogR0VOOkJVRzoxNDA5MjgwNDQxOmRnMSAqLworCWlmIChJU19ERzFf
UkVWSUQoZW5naW5lLT5pOTE1LCBERzFfUkVWSURfQTAsIERHMV9SRVZJRF9BMCkgJiYKKwkgICAg
KGVuZ2luZS0+Y2xhc3MgPT0gUkVOREVSX0NMQVNTIHx8CisJICAgICBlbmdpbmUtPmNsYXNzID09
IENPUFlfRU5HSU5FX0NMQVNTKSkKKwkJd2hpdGVsaXN0X3JlZ19leHQodywgUklOR19JRChlbmdp
bmUtPm1taW9fYmFzZSksCisJCQkJICBSSU5HX0ZPUkNFX1RPX05PTlBSSVZfQUNDRVNTX1JEKTsK
K30KKwogdm9pZCBpbnRlbF9lbmdpbmVfaW5pdF93aGl0ZWxpc3Qoc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gZW5naW5l
LT5pOTE1OwpAQCAtMTYxOSw3ICsxNjc1LDkgQEAgdm9pZCBpbnRlbF9lbmdpbmVfaW5pdF93aGl0
ZWxpc3Qoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCiAJd2FfaW5pdF9zdGFydCh3
LCAid2hpdGVsaXN0IiwgZW5naW5lLT5uYW1lKTsKIAotCWlmIChJU19HRU4oaTkxNSwgMTIpKQor
CWlmIChJU19ERzEoaTkxNSkpCisJCWRnMV93aGl0ZWxpc3RfYnVpbGQoZW5naW5lKTsKKwllbHNl
IGlmIChJU19HRU4oaTkxNSwgMTIpKQogCQl0Z2xfd2hpdGVsaXN0X2J1aWxkKGVuZ2luZSk7CiAJ
ZWxzZSBpZiAoSVNfR0VOKGk5MTUsIDExKSkKIAkJaWNsX3doaXRlbGlzdF9idWlsZChlbmdpbmUp
OwpAQCAtMTY3MywxNSArMTczMSwxOCBAQCByY3NfZW5naW5lX3dhX2luaXQoc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqZW5naW5lLCBzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwpCiB7CiAJc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBlbmdpbmUtPmk5MTU7CiAKLQlpZiAoSVNfVEdMX1VZ
X0dUX1JFVklEKGk5MTUsIFRHTF9SRVZJRF9BMCwgVEdMX1JFVklEX0EwKSkgeworCWlmIChJU19E
RzFfUkVWSUQoaTkxNSwgREcxX1JFVklEX0EwLCBERzFfUkVWSURfQTApIHx8CisJICAgIElTX1RH
TF9VWV9HVF9SRVZJRChpOTE1LCBUR0xfUkVWSURfQTAsIFRHTF9SRVZJRF9BMCkpIHsKIAkJLyoK
LQkJICogV2FfMTYwNzEzODMzNjp0Z2wKLQkJICogV2FfMTYwNzA2Mzk4ODp0Z2wKKwkJICogV2Ff
MTYwNzEzODMzNjp0Z2xbYTBdLGRnMVthMF0KKwkJICogV2FfMTYwNzA2Mzk4ODp0Z2xbYTBdLGRn
MVthMF0KIAkJICovCiAJCXdhX3dyaXRlX29yKHdhbCwKIAkJCSAgICBHRU45X0NUWF9QUkVFTVBU
X1JFRywKIAkJCSAgICBHRU4xMl9ESVNBQkxFX1BPU0hfQlVTWV9GRl9ET1BfQ0cpOworCX0KIAor
CWlmIChJU19UR0xfVVlfR1RfUkVWSUQoaTkxNSwgVEdMX1JFVklEX0EwLCBUR0xfUkVWSURfQTAp
KSB7CiAJCS8qCiAJCSAqIFdhXzE2MDY2NzkxMDM6dGdsCiAJCSAqIChzZWUgYWxzbyBXYV8xNjA2
NjgyMTY2OmljbCkKQEAgLTE2OTUsMzUgKzE3NTYsNDEgQEAgcmNzX2VuZ2luZV93YV9pbml0KHN0
cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgc3RydWN0IGk5MTVfd2FfbGlzdCAqd2FsKQog
CQkJICAgIFZTVU5JVF9DTEtHQVRFX0RJU19UR0wpOwogCX0KIAotCWlmIChJU19ST0NLRVRMQUtF
KGk5MTUpIHx8IElTX1RJR0VSTEFLRShpOTE1KSkgewotCQkvKiBXYV8xNjA2OTMxNjAxOnRnbCxy
a2wgKi8KKwlpZiAoSVNfREcxKGk5MTUpIHx8IElTX1JPQ0tFVExBS0UoaTkxNSkgfHwgSVNfVElH
RVJMQUtFKGk5MTUpKSB7CisJCS8qIFdhXzE2MDY5MzE2MDE6dGdsLHJrbCxkZzEgKi8KIAkJd2Ff
bWFza2VkX2VuKHdhbCwgR0VON19ST1dfQ0hJQ0tFTjIsIEdFTjEyX0RJU0FCTEVfRUFSTFlfUkVB
RCk7CiAKLQkJLyogV2FfMTQwOTgwNDgwODp0Z2wscmtsICovCisJCS8qCisJCSAqIFdhXzE0MDc5
Mjg5Nzk6dGdsIEEqCisJCSAqIFdhXzE4MDExNDY0MTY0OnRnbFtCMCtdLGRnMVtCMCtdCisJCSAq
IFdhXzIyMDEwOTMxMjk2OnRnbFtCMCtdLGRnMVtCMCtdCisJCSAqIFdhXzE0MDEwOTE5MTM4OnJr
bCwgZGcxCisJCSAqLworCQl3YV93cml0ZV9vcih3YWwsIEdFTjdfRkZfVEhSRUFEX01PREUsCisJ
CQkgICAgR0VOMTJfRkZfVEVTU0VMQVRJT05fRE9QX0dBVEVfRElTQUJMRSk7CisJfQorCisJaWYg
KElTX0RHMV9SRVZJRChpOTE1LCBERzFfUkVWSURfQTAsIERHMV9SRVZJRF9BMCkgfHwKKwkgICAg
SVNfUk9DS0VUTEFLRShpOTE1KSB8fCBJU19USUdFUkxBS0UoaTkxNSkpIHsKKwkJLyogV2FfMTQw
OTgwNDgwODp0Z2wscmtsLGRnMVthMF0gKi8KIAkJd2FfbWFza2VkX2VuKHdhbCwgR0VON19ST1df
Q0hJQ0tFTjIsCiAJCQkgICAgIEdFTjEyX1BVU0hfQ09OU1RfREVSRUZfSE9MRF9ESVMpOwogCiAJ
CS8qCiAJCSAqIFdhXzE0MDkwODUyMjU6dGdsCi0JCSAqIFdhXzE0MDEwMjI5MjA2OnRnbCxya2wK
KwkJICogV2FfMTQwMTAyMjkyMDY6dGdsLHJrbCxkZzFbYTBdCiAJCSAqLwogCQl3YV9tYXNrZWRf
ZW4od2FsLCBHRU45X1JPV19DSElDS0VONCwgR0VOMTJfRElTQUJMRV9URExfUFVTSCk7CiAKLQkJ
LyoKLQkJICogV2FfMTQwNzkyODk3OTp0Z2wgQSoKLQkJICogV2FfMTgwMTE0NjQxNjQ6dGdsIEIw
KwotCQkgKiBXYV8yMjAxMDkzMTI5Njp0Z2wgQjArCi0JCSAqIFdhXzE0MDEwOTE5MTM4OnJrbCx0
Z2wKLQkJICovCi0JCXdhX3dyaXRlX29yKHdhbCwgR0VON19GRl9USFJFQURfTU9ERSwKLQkJCSAg
ICBHRU4xMl9GRl9URVNTRUxBVElPTl9ET1BfR0FURV9ESVNBQkxFKTsKLQogCQkvKgogCQkgKiBX
YV8xNjA3MDMwMzE3OnRnbAogCQkgKiBXYV8xNjA3MTg2NTAwOnRnbAotCQkgKiBXYV8xNjA3Mjk3
NjI3OnRnbCxya2wgdGhlcmUgYXJlIG11bHRpcGxlIGVudHJpZXMgZm9yIHRoaXMKLQkJICogV0Eg
aW4gdGhlIEJTcGVjOyBzb21lIGluZGljYXRlIHRoaXMgaXMgYW4gQTAtb25seSBXQSwKLQkJICog
b3RoZXJzIGluZGljYXRlIGl0IGFwcGxpZXMgdG8gYWxsIHN0ZXBwaW5ncy4KKwkJICogV2FfMTYw
NzI5NzYyNzp0Z2wscmtsLGRnMVthMF0KKwkJICoKKwkJICogT24gVEdMIGFuZCBSS0wgdGhlcmUg
YXJlIG11bHRpcGxlIGVudHJpZXMgZm9yIHRoaXMgV0EgaW4gdGhlCisJCSAqIEJTcGVjOyBzb21l
IGluZGljYXRlIHRoaXMgaXMgYW4gQTAtb25seSBXQSwgb3RoZXJzIGluZGljYXRlCisJCSAqIGl0
IGFwcGxpZXMgdG8gYWxsIHN0ZXBwaW5ncyBzbyB3ZSB0cnVzdCB0aGUgImFsbCBzdGVwcGluZ3Mu
IgorCQkgKiBGb3IgREcxIHRoaXMgb25seSBhcHBsaWVzIHRvIEEwLgogCQkgKi8KIAkJd2FfbWFz
a2VkX2VuKHdhbCwKIAkJCSAgICAgR0VONl9SQ19TTEVFUF9QU01JX0NPTlRST0wsCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BjaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9wY2kuYwppbmRleCAxNmQ0ZTcyYmVkMDkuLmQwZWViMjE4MWU3NCAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wY2kuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X3BjaS5jCkBAIC05MTgsNiArOTE4LDggQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBp
bnRlbF9kZXZpY2VfaW5mbyBkZzFfaW5mbyBfX21heWJlX3VudXNlZCA9IHsKIAkucGxhdGZvcm1f
ZW5naW5lX21hc2sgPQogCQlCSVQoUkNTMCkgfCBCSVQoQkNTMCkgfCBCSVQoVkVDUzApIHwKIAkJ
QklUKFZDUzApIHwgQklUKFZDUzIpLAorCS8qIFdhXzE2MDExMjI3OTIyICovCisJLnBwZ3R0X3Np
emUgPSA0NywKIH07CiAKICN1bmRlZiBHRU4KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVnLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCmluZGV4IDQ5
OTQ1ZTMzZjU3My4uZDMzZDAwNTdhZWY0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3JlZy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKQEAgLTI1
MjgsNiArMjUyOCw3IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBpOTE1X21taW9fcmVnX3ZhbGlkKGk5
MTVfcmVnX3QgcmVnKQogI2RlZmluZSBSSU5HX1BTTUlfQ1RMKGJhc2UpCV9NTUlPKChiYXNlKSAr
IDB4NTApCiAjZGVmaW5lIFJJTkdfTUFYX0lETEUoYmFzZSkJX01NSU8oKGJhc2UpICsgMHg1NCkK
ICNkZWZpbmUgUklOR19IV1NfUEdBKGJhc2UpCV9NTUlPKChiYXNlKSArIDB4ODApCisjZGVmaW5l
IFJJTkdfSUQoYmFzZSkJCV9NTUlPKChiYXNlKSArIDB4OGMpCiAjZGVmaW5lIFJJTkdfSFdTX1BH
QV9HRU42KGJhc2UpCV9NTUlPKChiYXNlKSArIDB4MjA4MCkKICNkZWZpbmUgUklOR19SRVNFVF9D
VEwoYmFzZSkJX01NSU8oKGJhc2UpICsgMHhkMCkKICNkZWZpbmUgICBSRVNFVF9DVExfQ0FUX0VS
Uk9SCSAgIFJFR19CSVQoMikKQEAgLTQxNDcsNiArNDE0OCw3IEBAIGVudW0gewogCiAjZGVmaW5l
IEdFTjlfQ0xLR0FURV9ESVNfMwkJX01NSU8oMHg0NjUzOCkKICNkZWZpbmUgICBUR0xfVlJIX0dB
VElOR19ESVMJCVJFR19CSVQoMzEpCisjZGVmaW5lICAgRFBUX0dBVElOR19ESVMJCVJFR19CSVQo
MjIpCiAKICNkZWZpbmUgR0VOOV9DTEtHQVRFX0RJU180CQlfTU1JTygweDQ2NTNDKQogI2RlZmlu
ZSAgIEJYVF9HTUJVU19HQVRJTkdfRElTCQkoMSA8PCAxNCkKQEAgLTgwMTksMTMgKzgwMjEsMTUg
QEAgZW51bSB7CiAjZGVmaW5lIEdFTjhfTDNDTlRMUkVHCV9NTUlPKDB4NzAzNCkKICAgI2RlZmlu
ZSBHRU44X0VSUkRFVEJDVFJMICgxIDw8IDkpCiAKLSNkZWZpbmUgR0VOMTFfQ09NTU9OX1NMSUNF
X0NISUNLRU4zCQlfTU1JTygweDczMDQpCi0gICNkZWZpbmUgR0VOMTFfQkxFTkRfRU1CX0ZJWF9E
SVNBQkxFX0lOX1JDQwkoMSA8PCAxMSkKLSAgI2RlZmluZSBHRU4xMl9ESVNBQkxFX0NQU19BV0FS
RV9DT0xPUl9QSVBFCSgxIDw8IDkpCisjZGVmaW5lIEdFTjExX0NPTU1PTl9TTElDRV9DSElDS0VO
MwkJCV9NTUlPKDB4NzMwNCkKKyAgI2RlZmluZSBERzFfRkxPQVRfUE9JTlRfQkxFTkRfT1BUX1NU
UklDVF9NT0RFX0VOCVJFR19CSVQoMTIpCisgICNkZWZpbmUgR0VOMTFfQkxFTkRfRU1CX0ZJWF9E
SVNBQkxFX0lOX1JDQwkJUkVHX0JJVCgxMSkKKyAgI2RlZmluZSBHRU4xMl9ESVNBQkxFX0NQU19B
V0FSRV9DT0xPUl9QSVBFCQlSRUdfQklUKDkpCiAKICNkZWZpbmUgSElaX0NISUNLRU4JCQkJCV9N
TUlPKDB4NzAxOCkKLSMgZGVmaW5lIENIVl9IWl84WDhfTU9ERV9JTl8xWAkJCQkoMSA8PCAxNSkK
LSMgZGVmaW5lIEJEV19ISVpfUE9XRVJfQ09NUElMRVJfQ0xPQ0tfR0FUSU5HX0RJU0FCTEUJKDEg
PDwgMykKKyMgZGVmaW5lIENIVl9IWl84WDhfTU9ERV9JTl8xWAkJCQlSRUdfQklUKDE1KQorIyBk
ZWZpbmUgREcxX0haX1JFQURfU1VQUFJFU1NJT05fT1BUSU1JWkFUSU9OX0RJU0FCTEUgICBSRUdf
QklUKDE0KQorIyBkZWZpbmUgQkRXX0hJWl9QT1dFUl9DT01QSUxFUl9DTE9DS19HQVRJTkdfRElT
QUJMRQlSRUdfQklUKDMpCiAKICNkZWZpbmUgR0VOOV9TTElDRV9DT01NT05fRUNPX0NISUNLRU4w
CQlfTU1JTygweDczMDgpCiAjZGVmaW5lICBESVNBQkxFX1BJWEVMX01BU0tfQ0FNTUlORwkJKDEg
PDwgMTQpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYwppbmRleCA4Y2Q2MjQwMmQ1OTcuLmFlNmIzNjdl
NjNjYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jCkBAIC03MTE2LDI1ICs3MTE2LDI2IEBAIHN0
YXRpYyB2b2lkIGljbF9pbml0X2Nsb2NrX2dhdGluZyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpCiAJCQkgMCwgQ05MX0RFTEFZX1BNUlNQKTsKIH0KIAotc3RhdGljIHZvaWQgdGds
X2luaXRfY2xvY2tfZ2F0aW5nKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3N0
YXRpYyB2b2lkIGdlbjEyX2luaXRfY2xvY2tfZ2F0aW5nKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1KQogewotCXUzMiB2ZF9wZ19lbmFibGUgPSAwOwogCXVuc2lnbmVkIGludCBpOwogCisJ
LyogVGhpcyBpcyBub3QgYSBXQS4gRW5hYmxlIFZEIEhDUCAmIE1GWF9FTkMgcG93ZXJnYXRlICov
CisJZm9yIChpID0gMDsgaSA8IEk5MTVfTUFYX1ZDUzsgaSsrKQorCQlpZiAoSEFTX0VOR0lORSgm
aTkxNS0+Z3QsIF9WQ1MoaSkpKQorCQkJaW50ZWxfdW5jb3JlX3JtdygmaTkxNS0+dW5jb3JlLCBQ
T1dFUkdBVEVfRU5BQkxFLCAwLAorCQkJCQkgVkROX0hDUF9QT1dFUkdBVEVfRU5BQkxFKGkpIHwK
KwkJCQkJIFZETl9NRlhfUE9XRVJHQVRFX0VOQUJMRShpKSk7Cit9CisKK3N0YXRpYyB2b2lkIHRn
bF9pbml0X2Nsb2NrX2dhdGluZyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCit7
CisJZ2VuMTJfaW5pdF9jbG9ja19nYXRpbmcoZGV2X3ByaXYpOworCiAJLyogV2FfMTQwOTEyMDAx
Mzp0Z2wgKi8KIAlJOTE1X1dSSVRFKElMS19EUEZDX0NISUNLRU4sCiAJCSAgIElMS19EUEZDX0NI
SUNLRU5fQ09NUF9EVU1NWV9QSVhFTCk7CiAKLQkvKiBUaGlzIGlzIG5vdCBhIFdBLiBFbmFibGUg
VkQgSENQICYgTUZYX0VOQyBwb3dlcmdhdGUgKi8KLQlmb3IgKGkgPSAwOyBpIDwgSTkxNV9NQVhf
VkNTOyBpKyspIHsKLQkJaWYgKEhBU19FTkdJTkUoJmRldl9wcml2LT5ndCwgX1ZDUyhpKSkpCi0J
CQl2ZF9wZ19lbmFibGUgfD0gVkROX0hDUF9QT1dFUkdBVEVfRU5BQkxFKGkpIHwKLQkJCQkJVkRO
X01GWF9QT1dFUkdBVEVfRU5BQkxFKGkpOwotCX0KLQotCUk5MTVfV1JJVEUoUE9XRVJHQVRFX0VO
QUJMRSwKLQkJICAgSTkxNV9SRUFEKFBPV0VSR0FURV9FTkFCTEUpIHwgdmRfcGdfZW5hYmxlKTsK
LQogCS8qIFdhXzE0MDk4MjUzNzY6dGdsIChwcmUtcHJvZCkqLwogCWlmIChJU19UR0xfRElTUF9S
RVZJRChkZXZfcHJpdiwgVEdMX1JFVklEX0EwLCBUR0xfUkVWSURfQjEpKQogCQlJOTE1X1dSSVRF
KEdFTjlfQ0xLR0FURV9ESVNfMywgSTkxNV9SRUFEKEdFTjlfQ0xLR0FURV9ESVNfMykgfApAQCAt
NzE0NSw2ICs3MTQ2LDE2IEBAIHN0YXRpYyB2b2lkIHRnbF9pbml0X2Nsb2NrX2dhdGluZyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJCQkgMCwgREZSX0RJU0FCTEUpOwogfQog
CitzdGF0aWMgdm9pZCBkZzFfaW5pdF9jbG9ja19nYXRpbmcoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2KQoreworCWdlbjEyX2luaXRfY2xvY2tfZ2F0aW5nKGRldl9wcml2KTsKKwor
CS8qIFdhXzE0MDk4MzY2ODY6ZGcxW2EwXSAqLworCWlmIChJU19ERzFfUkVWSUQoZGV2X3ByaXYs
IERHMV9SRVZJRF9BMCwgREcxX1JFVklEX0EwKSkKKwkJSTkxNV9XUklURShHRU45X0NMS0dBVEVf
RElTXzMsIEk5MTVfUkVBRChHRU45X0NMS0dBVEVfRElTXzMpIHwKKwkJCSAgIERQVF9HQVRJTkdf
RElTKTsKK30KKwogc3RhdGljIHZvaWQgY25wX2luaXRfY2xvY2tfZ2F0aW5nKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdikKIHsKIAlpZiAoIUhBU19QQ0hfQ05QKGRldl9wcml2KSkK
QEAgLTc1OTAsNyArNzYwMSw5IEBAIHN0YXRpYyB2b2lkIG5vcF9pbml0X2Nsb2NrX2dhdGluZyhz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAgKi8KIHZvaWQgaW50ZWxfaW5pdF9j
bG9ja19nYXRpbmdfaG9va3Moc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogewot
CWlmIChJU19HRU4oZGV2X3ByaXYsIDEyKSkKKwlpZiAoSVNfREcxKGRldl9wcml2KSkKKwkJZGV2
X3ByaXYtPmRpc3BsYXkuaW5pdF9jbG9ja19nYXRpbmcgPSBkZzFfaW5pdF9jbG9ja19nYXRpbmc7
CisJZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCAxMikpCiAJCWRldl9wcml2LT5kaXNwbGF5Lmlu
aXRfY2xvY2tfZ2F0aW5nID0gdGdsX2luaXRfY2xvY2tfZ2F0aW5nOwogCWVsc2UgaWYgKElTX0dF
TihkZXZfcHJpdiwgMTEpKQogCQlkZXZfcHJpdi0+ZGlzcGxheS5pbml0X2Nsb2NrX2dhdGluZyA9
IGljbF9pbml0X2Nsb2NrX2dhdGluZzsKLS0gCjIuMjguMAoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

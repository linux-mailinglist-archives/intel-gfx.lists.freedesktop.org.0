Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 83C35F3A99
	for <lists+intel-gfx@lfdr.de>; Thu,  7 Nov 2019 22:39:49 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 179AE6E52D;
	Thu,  7 Nov 2019 21:39:47 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 09E1C6E52D
 for <intel-gfx@lists.freedesktop.org>; Thu,  7 Nov 2019 21:39:45 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19121455-1500050 
 for multiple; Thu, 07 Nov 2019 21:39:30 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu,  7 Nov 2019 21:39:29 +0000
Message-Id: <20191107213929.23286-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/selftests: Complete transition to a
 real struct file mock
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U2luY2UgZHJtIHByb3ZpZGVkIHVzIHdpdGggYSByZWFsIHN0cnVjdCBmaWxlIHdlIGNhbiB1c2Ug
Zm9yIG91cgphbm9ueW1vdXMgaW50ZXJuYWwgY2xpZW50cyAobW9ja19maWxlKSwgY29tcGxldGUg
b3VyIHRyYW5zaXRpb24gdG8gdXNpbmcKdGhhdCBhcyB0aGUgcHJpbWFyeSBpbnRlcmZhY2UgKGFu
ZCBub3QgdGhlIG1vY2tlZCB1cCBzdHJ1Y3QgZHJtX2ZpbGUgd2UKcHJldmlvdXMgd2VyZSB1c2lu
ZykuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51
az4KQ2M6IE1hdHRoZXcgQXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KLS0tCiAuLi4vZ3B1
L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaHVnZV9wYWdlcy5jICAgfCAgNCArLQogLi4uL2RybS9p
OTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jIHwgMzEgKysrKysrKy0tLS0tLS0t
CiAuLi4vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX29iamVjdF9ibHQuYyAgfCAgOCArKy0t
CiAuLi4vZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmMgfCAgNSArKy0K
IC4uLi9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRleHQuaCB8ICAyICstCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9jb250ZXh0LmMgICAgfCAgOCArKy0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2suYyAgfCAxNiArKysrLS0t
LQogLi4uL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF93b3JrYXJvdW5kcy5jICAgIHwgIDQgKy0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgICAgICAgICAgICAgICB8ICA0IC0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW0uYyAgICAgfCAgOCArKy0tCiAu
Li4vZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ldmljdC5jICAgfCAgNCArLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2d0dC5jIHwgIDggKystLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcmVxdWVzdC5jIHwgIDQgKy0KIC4uLi9k
cm0vaTkxNS9zZWxmdGVzdHMvaW50ZWxfbWVtb3J5X3JlZ2lvbi5jICB8ICA0ICstCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19kcm0uYyAgICAgfCAzOCAtLS0tLS0tLS0tLS0t
LS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19kcm0uaCAgICAgfCAx
NSArKysrKystLQogMTYgZmlsZXMgY2hhbmdlZCwgNjUgaW5zZXJ0aW9ucygrKSwgOTggZGVsZXRp
b25zKC0pCiBkZWxldGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3Rz
L21vY2tfZHJtLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL2h1Z2VfcGFnZXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaHVn
ZV9wYWdlcy5jCmluZGV4IDIzMTBlZDliOGY4OS4uM2Y5OTI0OTFmNTM3IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYwpAQCAtMTkxMiw5ICsx
OTEyLDkgQEAgaW50IGk5MTVfZ2VtX2h1Z2VfcGFnZV9saXZlX3NlbGZ0ZXN0cyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAkJU1VCVEVTVChpZ3RfcHBndHRfc21va2VfaHVnZSksCiAJ
CVNVQlRFU1QoaWd0X3BwZ3R0X3Nhbml0eV9jaGVjayksCiAJfTsKLQlzdHJ1Y3QgZHJtX2ZpbGUg
KmZpbGU7CiAJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eDsKIAlzdHJ1Y3QgaTkxNV9hZGRy
ZXNzX3NwYWNlICp2bTsKKwlzdHJ1Y3QgZmlsZSAqZmlsZTsKIAlpbnQgZXJyOwogCiAJaWYgKCFI
QVNfUFBHVFQoaTkxNSkpIHsKQEAgLTE5NDQsNiArMTk0NCw2IEBAIGludCBpOTE1X2dlbV9odWdl
X3BhZ2VfbGl2ZV9zZWxmdGVzdHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJZXJy
ID0gaTkxNV9zdWJ0ZXN0cyh0ZXN0cywgY3R4KTsKIAogb3V0X2ZpbGU6Ci0JbW9ja19maWxlX3B1
dChmaWxlKTsKKwlmcHV0KGZpbGUpOwogCXJldHVybiBlcnI7CiB9CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jCmluZGV4IDQ3
ODkwYzkyNTM0Yy4uMThhZTJjZmE2MmVkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYwpAQCAtMzMsNyArMzMsNyBAQCBz
dGF0aWMgaW50IGxpdmVfbm9wX3N3aXRjaCh2b2lkICphcmcpCiAJc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lOwogCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICoqY3R4OwogCXN0cnVjdCBp
Z3RfbGl2ZV90ZXN0IHQ7Ci0Jc3RydWN0IGRybV9maWxlICpmaWxlOworCXN0cnVjdCBmaWxlICpm
aWxlOwogCXVuc2lnbmVkIGxvbmcgbjsKIAlpbnQgZXJyID0gLUVOT0RFVjsKIApAQCAtMTQ5LDcg
KzE0OSw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9ub3Bfc3dpdGNoKHZvaWQgKmFyZykKIAl9CiAKIG91
dF9maWxlOgotCW1vY2tfZmlsZV9wdXQoZmlsZSk7CisJZnB1dChmaWxlKTsKIAlyZXR1cm4gZXJy
OwogfQogCkBAIC0yNTUsNyArMjU1LDcgQEAgc3RhdGljIGludCBsaXZlX3BhcmFsbGVsX3N3aXRj
aCh2b2lkICphcmcpCiAJaW50ICgqIGNvbnN0ICpmbikodm9pZCAqYXJnKTsKIAlzdHJ1Y3QgaTkx
NV9nZW1fY29udGV4dCAqY3R4OwogCXN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZTsKLQlzdHJ1Y3Qg
ZHJtX2ZpbGUgKmZpbGU7CisJc3RydWN0IGZpbGUgKmZpbGU7CiAJaW50IG4sIG0sIGNvdW50Owog
CWludCBlcnIgPSAwOwogCkBAIC0zNzcsNyArMzc3LDcgQEAgc3RhdGljIGludCBsaXZlX3BhcmFs
bGVsX3N3aXRjaCh2b2lkICphcmcpCiAJfQogCWtmcmVlKGRhdGEpOwogb3V0X2ZpbGU6Ci0JbW9j
a19maWxlX3B1dChmaWxlKTsKKwlmcHV0KGZpbGUpOwogCXJldHVybiBlcnI7CiB9CiAKQEAgLTUw
Miw3ICs1MDIsNyBAQCBzdGF0aWMgbm9pbmxpbmUgaW50IGNwdV9jaGVjayhzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqLAogCXJldHVybiBlcnI7CiB9CiAKLXN0YXRpYyBpbnQgZmlsZV9h
ZGRfb2JqZWN0KHN0cnVjdCBkcm1fZmlsZSAqZmlsZSwKK3N0YXRpYyBpbnQgZmlsZV9hZGRfb2Jq
ZWN0KHN0cnVjdCBmaWxlICpmaWxlLAogCQkJICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmopCiB7CiAJaW50IGVycjsKQEAgLTUxMCw3ICs1MTAsOCBAQCBzdGF0aWMgaW50IGZpbGVf
YWRkX29iamVjdChzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUsCiAJR0VNX0JVR19PTihvYmotPmJhc2Uu
aGFuZGxlX2NvdW50KTsKIAogCS8qIHRpZSB0aGUgb2JqZWN0IHRvIHRoZSBkcm1fZmlsZSBmb3Ig
ZWFzeSByZWFwaW5nICovCi0JZXJyID0gaWRyX2FsbG9jKCZmaWxlLT5vYmplY3RfaWRyLCAmb2Jq
LT5iYXNlLCAxLCAwLCBHRlBfS0VSTkVMKTsKKwllcnIgPSBpZHJfYWxsb2MoJnRvX2RybV9maWxl
KGZpbGUpLT5vYmplY3RfaWRyLAorCQkJJm9iai0+YmFzZSwgMSwgMCwgR0ZQX0tFUk5FTCk7CiAJ
aWYgKGVyciA8IDApCiAJCXJldHVybiAgZXJyOwogCkBAIC01MjEsNyArNTIyLDcgQEAgc3RhdGlj
IGludCBmaWxlX2FkZF9vYmplY3Qoc3RydWN0IGRybV9maWxlICpmaWxlLAogCiBzdGF0aWMgc3Ry
dWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKgogY3JlYXRlX3Rlc3Rfb2JqZWN0KHN0cnVjdCBpOTE1
X2FkZHJlc3Nfc3BhY2UgKnZtLAotCQkgICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUsCisJCSAgIHN0
cnVjdCBmaWxlICpmaWxlLAogCQkgICBzdHJ1Y3QgbGlzdF9oZWFkICpvYmplY3RzKQogewogCXN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmo7CkBAIC02MjEsOSArNjIyLDkgQEAgc3RhdGlj
IGludCBpZ3RfY3R4X2V4ZWModm9pZCAqYXJnKQogCQl1bnNpZ25lZCBsb25nIG5jb250ZXh0cywg
bmR3b3JkcywgZHc7CiAJCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnRxWzVdID0ge307CiAJCXN0cnVj
dCBpZ3RfbGl2ZV90ZXN0IHQ7Ci0JCXN0cnVjdCBkcm1fZmlsZSAqZmlsZTsKIAkJSUdUX1RJTUVP
VVQoZW5kX3RpbWUpOwogCQlMSVNUX0hFQUQob2JqZWN0cyk7CisJCXN0cnVjdCBmaWxlICpmaWxl
OwogCiAJCWlmICghaW50ZWxfZW5naW5lX2Nhbl9zdG9yZV9kd29yZChlbmdpbmUpKQogCQkJY29u
dGludWU7CkBAIC03MTYsNyArNzE3LDcgQEAgc3RhdGljIGludCBpZ3RfY3R4X2V4ZWModm9pZCAq
YXJnKQogCQlpZiAoaWd0X2xpdmVfdGVzdF9lbmQoJnQpKQogCQkJZXJyID0gLUVJTzsKIAotCQlt
b2NrX2ZpbGVfcHV0KGZpbGUpOworCQlmcHV0KGZpbGUpOwogCQlpZiAoZXJyKQogCQkJcmV0dXJu
IGVycjsKIApAQCAtNzMzLDcgKzczNCw3IEBAIHN0YXRpYyBpbnQgaWd0X3NoYXJlZF9jdHhfZXhl
Yyh2b2lkICphcmcpCiAJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKnBhcmVudDsKIAlzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmU7CiAJc3RydWN0IGlndF9saXZlX3Rlc3QgdDsKLQlzdHJ1
Y3QgZHJtX2ZpbGUgKmZpbGU7CisJc3RydWN0IGZpbGUgKmZpbGU7CiAJaW50IGVyciA9IDA7CiAK
IAkvKgpAQCAtODU0LDcgKzg1NSw3IEBAIHN0YXRpYyBpbnQgaWd0X3NoYXJlZF9jdHhfZXhlYyh2
b2lkICphcmcpCiAJaWYgKGlndF9saXZlX3Rlc3RfZW5kKCZ0KSkKIAkJZXJyID0gLUVJTzsKIG91
dF9maWxlOgotCW1vY2tfZmlsZV9wdXQoZmlsZSk7CisJZnB1dChmaWxlKTsKIAlyZXR1cm4gZXJy
OwogfQogCkBAIC0xMzE3LDEwICsxMzE4LDEwIEBAIHN0YXRpYyBpbnQgaWd0X2N0eF9yZWFkb25s
eSh2b2lkICphcmcpCiAJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eDsKIAl1bnNpZ25lZCBs
b25nIGlkeCwgbmR3b3JkcywgZHc7CiAJc3RydWN0IGlndF9saXZlX3Rlc3QgdDsKLQlzdHJ1Y3Qg
ZHJtX2ZpbGUgKmZpbGU7CiAJSTkxNV9STkRfU1RBVEUocHJuZyk7CiAJSUdUX1RJTUVPVVQoZW5k
X3RpbWUpOwogCUxJU1RfSEVBRChvYmplY3RzKTsKKwlzdHJ1Y3QgZmlsZSAqZmlsZTsKIAlpbnQg
ZXJyID0gLUVOT0RFVjsKIAogCS8qCkBAIC0xNDI2LDcgKzE0MjcsNyBAQCBzdGF0aWMgaW50IGln
dF9jdHhfcmVhZG9ubHkodm9pZCAqYXJnKQogCWlmIChpZ3RfbGl2ZV90ZXN0X2VuZCgmdCkpCiAJ
CWVyciA9IC1FSU87CiAKLQltb2NrX2ZpbGVfcHV0KGZpbGUpOworCWZwdXQoZmlsZSk7CiAJcmV0
dXJuIGVycjsKIH0KIApAQCAtMTY2Myw5ICsxNjY0LDkgQEAgc3RhdGljIGludCBpZ3Rfdm1faXNv
bGF0aW9uKHZvaWQgKmFyZykKIAlzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4X2EsICpjdHhf
YjsKIAlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7CiAJc3RydWN0IGlndF9saXZlX3Rl
c3QgdDsKLQlzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGU7CiAJSTkxNV9STkRfU1RBVEUocHJuZyk7CiAJ
dW5zaWduZWQgbG9uZyBjb3VudDsKKwlzdHJ1Y3QgZmlsZSAqZmlsZTsKIAl1NjQgdm1fdG90YWw7
CiAJaW50IGVycjsKIApAQCAtMTc1MCw3ICsxNzUxLDcgQEAgc3RhdGljIGludCBpZ3Rfdm1faXNv
bGF0aW9uKHZvaWQgKmFyZykKIG91dF9maWxlOgogCWlmIChpZ3RfbGl2ZV90ZXN0X2VuZCgmdCkp
CiAJCWVyciA9IC1FSU87Ci0JbW9ja19maWxlX3B1dChmaWxlKTsKKwlmcHV0KGZpbGUpOwogCXJl
dHVybiBlcnI7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxm
dGVzdHMvaTkxNV9nZW1fb2JqZWN0X2JsdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3Nl
bGZ0ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0LmMKaW5kZXggZDlmZGZkZGI3MDkxLi5kZDQzZWEw
YzkwMjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkx
NV9nZW1fb2JqZWN0X2JsdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVz
dHMvaTkxNV9nZW1fb2JqZWN0X2JsdC5jCkBAIC0xOTgsNyArMTk4LDcgQEAgc3RhdGljIGludCBp
Z3RfZmlsbF9ibHRfdGhyZWFkKHZvaWQgKmFyZykKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqOwogCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHg7CiAJc3RydWN0IGludGVsX2Nv
bnRleHQgKmNlOwotCXN0cnVjdCBkcm1fZmlsZSAqZmlsZTsKKwlzdHJ1Y3QgZmlsZSAqZmlsZTsK
IAl1bnNpZ25lZCBpbnQgcHJpbzsKIAlJR1RfVElNRU9VVChlbmQpOwogCWludCBlcnI7CkBAIC0z
MDEsNyArMzAxLDcgQEAgc3RhdGljIGludCBpZ3RfZmlsbF9ibHRfdGhyZWFkKHZvaWQgKmFyZykK
IAogCWludGVsX2NvbnRleHRfcHV0KGNlKTsKIG91dF9maWxlOgotCW1vY2tfZmlsZV9wdXQoZmls
ZSk7CisJZnB1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQogCkBAIC0zMTMsNyArMzEzLDcgQEAg
c3RhdGljIGludCBpZ3RfY29weV9ibHRfdGhyZWFkKHZvaWQgKmFyZykKIAlzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqc3JjLCAqZHN0OwogCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHg7
CiAJc3RydWN0IGludGVsX2NvbnRleHQgKmNlOwotCXN0cnVjdCBkcm1fZmlsZSAqZmlsZTsKKwlz
dHJ1Y3QgZmlsZSAqZmlsZTsKIAl1bnNpZ25lZCBpbnQgcHJpbzsKIAlJR1RfVElNRU9VVChlbmQp
OwogCWludCBlcnI7CkBAIC00MzIsNyArNDMyLDcgQEAgc3RhdGljIGludCBpZ3RfY29weV9ibHRf
dGhyZWFkKHZvaWQgKmFyZykKIAogCWludGVsX2NvbnRleHRfcHV0KGNlKTsKIG91dF9maWxlOgot
CW1vY2tfZmlsZV9wdXQoZmlsZSk7CisJZnB1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4
dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRleHQuYwpp
bmRleCAyOWI4OTg0ZjBlNDcuLmNkY2IwMDYzMjFhNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5jCkBAIC01LDYgKzUsNyBAQAogICov
CiAKICNpbmNsdWRlICJtb2NrX2NvbnRleHQuaCIKKyNpbmNsdWRlICJzZWxmdGVzdHMvbW9ja19k
cm0uaCIKICNpbmNsdWRlICJzZWxmdGVzdHMvbW9ja19ndHQuaCIKIAogc3RydWN0IGk5MTVfZ2Vt
X2NvbnRleHQgKgpAQCAtNzQsNyArNzUsNyBAQCB2b2lkIG1vY2tfaW5pdF9jb250ZXh0cyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIH0KIAogc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQg
KgotbGl2ZV9jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBzdHJ1Y3QgZHJt
X2ZpbGUgKmZpbGUpCitsaXZlX2NvbnRleHQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUs
IHN0cnVjdCBmaWxlICpmaWxlKQogewogCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHg7CiAJ
aW50IGVycjsKQEAgLTgzLDcgKzg0LDcgQEAgbGl2ZV9jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCiAJaWYgKElTX0VSUihjdHgpKQog
CQlyZXR1cm4gY3R4OwogCi0JZXJyID0gZ2VtX2NvbnRleHRfcmVnaXN0ZXIoY3R4LCBmaWxlLT5k
cml2ZXJfcHJpdik7CisJZXJyID0gZ2VtX2NvbnRleHRfcmVnaXN0ZXIoY3R4LCB0b19kcm1fZmls
ZShmaWxlKS0+ZHJpdmVyX3ByaXYpOwogCWlmIChlcnIgPCAwKQogCQlnb3RvIGVycl9jdHg7CiAK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250
ZXh0LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5o
CmluZGV4IDBiOTI2NjUzOTE0Zi4uOGU2YWY5MWQ4MmFlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5oCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmgKQEAgLTE2LDcgKzE2LDcgQEAg
bW9ja19jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogdm9pZCBtb2NrX2Nv
bnRleHRfY2xvc2Uoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCk7CiAKIHN0cnVjdCBpOTE1
X2dlbV9jb250ZXh0ICoKLWxpdmVfY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSwgc3RydWN0IGRybV9maWxlICpmaWxlKTsKK2xpdmVfY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSwgc3RydWN0IGZpbGUgKmZpbGUpOwogCiBzdHJ1Y3QgaTkxNV9nZW1fY29u
dGV4dCAqa2VybmVsX2NvbnRleHQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwogdm9p
ZCBrZXJuZWxfY29udGV4dF9jbG9zZShzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KTsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2NvbnRleHQuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2NvbnRleHQuYwppbmRleCBhNTY4OGY3ZDkw
NzMuLjE0YmE2Y2ViOTE3NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2Vs
ZnRlc3RfY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2Nv
bnRleHQuYwpAQCAtMjg5LDcgKzI4OSw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9hY3RpdmVfY29udGV4
dCh2b2lkICphcmcpCiAJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOwogCXN0cnVjdCBp
OTE1X2dlbV9jb250ZXh0ICpmaXhtZTsKIAllbnVtIGludGVsX2VuZ2luZV9pZCBpZDsKLQlzdHJ1
Y3QgZHJtX2ZpbGUgKmZpbGU7CisJc3RydWN0IGZpbGUgKmZpbGU7CiAJaW50IGVyciA9IDA7CiAK
IAlmaWxlID0gbW9ja19maWxlKGd0LT5pOTE1KTsKQEAgLTMxMyw3ICszMTMsNyBAQCBzdGF0aWMg
aW50IGxpdmVfYWN0aXZlX2NvbnRleHQodm9pZCAqYXJnKQogCX0KIAogb3V0X2ZpbGU6Ci0JbW9j
a19maWxlX3B1dChmaWxlKTsKKwlmcHV0KGZpbGUpOwogCXJldHVybiBlcnI7CiB9CiAKQEAgLTM5
OSw3ICszOTksNyBAQCBzdGF0aWMgaW50IGxpdmVfcmVtb3RlX2NvbnRleHQodm9pZCAqYXJnKQog
CXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZTsKIAlzdHJ1Y3QgaTkxNV9nZW1fY29udGV4
dCAqZml4bWU7CiAJZW51bSBpbnRlbF9lbmdpbmVfaWQgaWQ7Ci0Jc3RydWN0IGRybV9maWxlICpm
aWxlOworCXN0cnVjdCBmaWxlICpmaWxlOwogCWludCBlcnIgPSAwOwogCiAJZmlsZSA9IG1vY2tf
ZmlsZShndC0+aTkxNSk7CkBAIC00MjMsNyArNDIzLDcgQEAgc3RhdGljIGludCBsaXZlX3JlbW90
ZV9jb250ZXh0KHZvaWQgKmFyZykKIAl9CiAKIG91dF9maWxlOgotCW1vY2tfZmlsZV9wdXQoZmls
ZSk7CisJZnB1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2suYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3NlbGZ0ZXN0X2hhbmdjaGVjay5jCmluZGV4IGNkYWFlZTQ0MzJiMi4uZDE1NWM5Mzc0
NDUzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hl
Y2suYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2suYwpA
QCAtMzgwLDggKzM4MCw4IEBAIHN0YXRpYyBpbnQgaWd0X3Jlc2V0X25vcCh2b2lkICphcmcpCiAJ
c3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eDsKIAl1bnNpZ25lZCBpbnQgcmVzZXRfY291bnQs
IGNvdW50OwogCWVudW0gaW50ZWxfZW5naW5lX2lkIGlkOwotCXN0cnVjdCBkcm1fZmlsZSAqZmls
ZTsKIAlJR1RfVElNRU9VVChlbmRfdGltZSk7CisJc3RydWN0IGZpbGUgKmZpbGU7CiAJaW50IGVy
ciA9IDA7CiAKIAkvKiBDaGVjayB0aGF0IHdlIGNhbiByZXNldCBkdXJpbmcgbm9uLXVzZXIgcG9y
dGlvbnMgb2YgcmVxdWVzdHMgKi8KQEAgLTQzOSw3ICs0MzksNyBAQCBzdGF0aWMgaW50IGlndF9y
ZXNldF9ub3Aodm9pZCAqYXJnKQogCiAJZXJyID0gaWd0X2ZsdXNoX3Rlc3QoZ3QtPmk5MTUpOwog
b3V0OgotCW1vY2tfZmlsZV9wdXQoZmlsZSk7CisJZnB1dChmaWxlKTsKIAlpZiAoaW50ZWxfZ3Rf
aXNfd2VkZ2VkKGd0KSkKIAkJZXJyID0gLUVJTzsKIAlyZXR1cm4gZXJyOwpAQCAtNDUyLDcgKzQ1
Miw3IEBAIHN0YXRpYyBpbnQgaWd0X3Jlc2V0X25vcF9lbmdpbmUodm9pZCAqYXJnKQogCXN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZTsKIAlzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4
OwogCWVudW0gaW50ZWxfZW5naW5lX2lkIGlkOwotCXN0cnVjdCBkcm1fZmlsZSAqZmlsZTsKKwlz
dHJ1Y3QgZmlsZSAqZmlsZTsKIAlpbnQgZXJyID0gMDsKIAogCS8qIENoZWNrIHRoYXQgd2UgY2Fu
IGVuZ2luZS1yZXNldCBkdXJpbmcgbm9uLXVzZXIgcG9ydGlvbnMgKi8KQEAgLTUzNSw3ICs1MzUs
NyBAQCBzdGF0aWMgaW50IGlndF9yZXNldF9ub3BfZW5naW5lKHZvaWQgKmFyZykKIAogCWVyciA9
IGlndF9mbHVzaF90ZXN0KGd0LT5pOTE1KTsKIG91dDoKLQltb2NrX2ZpbGVfcHV0KGZpbGUpOwor
CWZwdXQoZmlsZSk7CiAJaWYgKGludGVsX2d0X2lzX3dlZGdlZChndCkpCiAJCWVyciA9IC1FSU87
CiAJcmV0dXJuIGVycjsKQEAgLTcwMCw4ICs3MDAsOCBAQCBzdGF0aWMgaW50IGFjdGl2ZV9lbmdp
bmUodm9pZCAqZGF0YSkKIAlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUgPSBhcmctPmVu
Z2luZTsKIAlzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycVs4XSA9IHt9OwogCXN0cnVjdCBpOTE1X2dl
bV9jb250ZXh0ICpjdHhbQVJSQVlfU0laRShycSldOwotCXN0cnVjdCBkcm1fZmlsZSAqZmlsZTsK
IAl1bnNpZ25lZCBsb25nIGNvdW50ID0gMDsKKwlzdHJ1Y3QgZmlsZSAqZmlsZTsKIAlpbnQgZXJy
ID0gMDsKIAogCWZpbGUgPSBtb2NrX2ZpbGUoZW5naW5lLT5pOTE1KTsKQEAgLTc1Miw3ICs3NTIs
NyBAQCBzdGF0aWMgaW50IGFjdGl2ZV9lbmdpbmUodm9pZCAqZGF0YSkKIAl9CiAKIGVycl9maWxl
OgotCW1vY2tfZmlsZV9wdXQoZmlsZSk7CisJZnB1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQog
CkBAIC0xMzAyLDcgKzEzMDIsNyBAQCBzdGF0aWMgaW50IGlndF9yZXNldF9ldmljdF9wcGd0dCh2
b2lkICphcmcpCiAJc3RydWN0IGludGVsX2d0ICpndCA9IGFyZzsKIAlzdHJ1Y3QgaTkxNV9nZW1f
Y29udGV4dCAqY3R4OwogCXN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtOwotCXN0cnVjdCBk
cm1fZmlsZSAqZmlsZTsKKwlzdHJ1Y3QgZmlsZSAqZmlsZTsKIAlpbnQgZXJyOwogCiAJZmlsZSA9
IG1vY2tfZmlsZShndC0+aTkxNSk7CkBAIC0xMzI1LDcgKzEzMjUsNyBAQCBzdGF0aWMgaW50IGln
dF9yZXNldF9ldmljdF9wcGd0dCh2b2lkICphcmcpCiAJaTkxNV92bV9wdXQodm0pOwogCiBvdXQ6
Ci0JbW9ja19maWxlX3B1dChmaWxlKTsKKwlmcHV0KGZpbGUpOwogCXJldHVybiBlcnI7CiB9CiAK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3dvcmthcm91bmRz
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF93b3JrYXJvdW5kcy5jCmluZGV4
IDVjNjllYzVjNWVmOS4uZDVkMWUxYTMyMTg3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9zZWxmdGVzdF93b3JrYXJvdW5kcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3NlbGZ0ZXN0X3dvcmthcm91bmRzLmMKQEAgLTcxMSw3ICs3MTEsNyBAQCBzdGF0aWMgaW50
IGxpdmVfZGlydHlfd2hpdGVsaXN0KHZvaWQgKmFyZykKIAlzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICplbmdpbmU7CiAJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eDsKIAllbnVtIGludGVsX2Vu
Z2luZV9pZCBpZDsKLQlzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGU7CisJc3RydWN0IGZpbGUgKmZpbGU7
CiAJaW50IGVyciA9IDA7CiAKIAkvKiBDYW4gdGhlIHVzZXIgd3JpdGUgdG8gdGhlIHdoaXRlbGlz
dGVkIHJlZ2lzdGVycz8gKi8KQEAgLTczOSw3ICs3MzksNyBAQCBzdGF0aWMgaW50IGxpdmVfZGly
dHlfd2hpdGVsaXN0KHZvaWQgKmFyZykKIAl9CiAKIG91dF9maWxlOgotCW1vY2tfZmlsZV9wdXQo
ZmlsZSk7CisJZnB1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQogCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuYwppbmRleCA4MmU0ZTZiZjA4YzMuLjY0ZjhiYTM0NDllZCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2Rydi5jCkBAIC0yNzgxLDcgKzI3ODEsMyBAQCBzdGF0aWMgc3RydWN0IGRybV9kcml2ZXIgZHJp
dmVyID0gewogCS5taW5vciA9IERSSVZFUl9NSU5PUiwKIAkucGF0Y2hsZXZlbCA9IERSSVZFUl9Q
QVRDSExFVkVMLAogfTsKLQotI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1X1NFTEZURVNU
KQotI2luY2x1ZGUgInNlbGZ0ZXN0cy9tb2NrX2RybS5jIgotI2VuZGlmCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW0uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbS5jCmluZGV4IGFhNjI4MmFkZmQwOS4uNjU3ZTIzYThk
ZDExIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW0u
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW0uYwpAQCAtMTM2
LDcgKzEzNiw3IEBAIHN0YXRpYyBpbnQgaWd0X2dlbV9zdXNwZW5kKHZvaWQgKmFyZykKIHsKIAlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGFyZzsKIAlzdHJ1Y3QgaTkxNV9nZW1fY29u
dGV4dCAqY3R4OwotCXN0cnVjdCBkcm1fZmlsZSAqZmlsZTsKKwlzdHJ1Y3QgZmlsZSAqZmlsZTsK
IAlpbnQgZXJyOwogCiAJZmlsZSA9IG1vY2tfZmlsZShpOTE1KTsKQEAgLTE2Myw3ICsxNjMsNyBA
QCBzdGF0aWMgaW50IGlndF9nZW1fc3VzcGVuZCh2b2lkICphcmcpCiAKIAllcnIgPSBzd2l0Y2hf
dG9fY29udGV4dChjdHgpOwogb3V0OgotCW1vY2tfZmlsZV9wdXQoZmlsZSk7CisJZnB1dChmaWxl
KTsKIAlyZXR1cm4gZXJyOwogfQogCkBAIC0xNzEsNyArMTcxLDcgQEAgc3RhdGljIGludCBpZ3Rf
Z2VtX2hpYmVybmF0ZSh2b2lkICphcmcpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUgPSBhcmc7CiAJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eDsKLQlzdHJ1Y3QgZHJtX2Zp
bGUgKmZpbGU7CisJc3RydWN0IGZpbGUgKmZpbGU7CiAJaW50IGVycjsKIAogCWZpbGUgPSBtb2Nr
X2ZpbGUoaTkxNSk7CkBAIC0xOTgsNyArMTk4LDcgQEAgc3RhdGljIGludCBpZ3RfZ2VtX2hpYmVy
bmF0ZSh2b2lkICphcmcpCiAKIAllcnIgPSBzd2l0Y2hfdG9fY29udGV4dChjdHgpOwogb3V0Ogot
CW1vY2tfZmlsZV9wdXQoZmlsZSk7CisJZnB1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3Qu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ldmljdC5jCmluZGV4
IDQxMDkyZGNlYTViMS4uNWYxMzNkMTc3MjEyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYwpAQCAtNDY2LDcgKzQ2Niw3IEBAIHN0YXRpYyBp
bnQgaWd0X2V2aWN0X2NvbnRleHRzKHZvaWQgKmFyZykKIAkvKiBPdmVyZmlsbCB0aGUgR0dUVCB3
aXRoIGNvbnRleHQgb2JqZWN0cyBhbmQgc28gdHJ5IHRvIGV2aWN0IG9uZS4gKi8KIAlmb3JfZWFj
aF9lbmdpbmUoZW5naW5lLCBndCwgaWQpIHsKIAkJc3RydWN0IGk5MTVfc3dfZmVuY2UgZmVuY2U7
Ci0JCXN0cnVjdCBkcm1fZmlsZSAqZmlsZTsKKwkJc3RydWN0IGZpbGUgKmZpbGU7CiAKIAkJZmls
ZSA9IG1vY2tfZmlsZShpOTE1KTsKIAkJaWYgKElTX0VSUihmaWxlKSkgewpAQCAtNTE1LDcgKzUx
NSw3IEBAIHN0YXRpYyBpbnQgaWd0X2V2aWN0X2NvbnRleHRzKHZvaWQgKmFyZykKIAkJcHJfaW5m
bygiU3VibWl0dGVkICVsdSBjb250ZXh0cy9yZXF1ZXN0cyBvbiAlc1xuIiwKIAkJCWNvdW50LCBl
bmdpbmUtPm5hbWUpOwogCi0JCW1vY2tfZmlsZV9wdXQoZmlsZSk7CisJCWZwdXQoZmlsZSk7CiAJ
CWlmIChlcnIpCiAJCQlicmVhazsKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9zZWxmdGVzdHMvaTkxNV9nZW1fZ3R0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVz
dHMvaTkxNV9nZW1fZ3R0LmMKaW5kZXggYzNlMGQ2M2M0ZDBjLi5kOTRkYjQ4N2M0ZGQgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ndHQuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZ3R0LmMKQEAgLTEwMDEs
OSArMTAwMSw5IEBAIHN0YXRpYyBpbnQgZXhlcmNpc2VfcHBndHQoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2LAogCQkJCSAgICAgIHU2NCBob2xlX3N0YXJ0LCB1NjQgaG9sZV9lbmQs
CiAJCQkJICAgICAgdW5zaWduZWQgbG9uZyBlbmRfdGltZSkpCiB7Ci0Jc3RydWN0IGRybV9maWxl
ICpmaWxlOwogCXN0cnVjdCBpOTE1X3BwZ3R0ICpwcGd0dDsKIAlJR1RfVElNRU9VVChlbmRfdGlt
ZSk7CisJc3RydWN0IGZpbGUgKmZpbGU7CiAJaW50IGVycjsKIAogCWlmICghSEFTX0ZVTExfUFBH
VFQoZGV2X3ByaXYpKQpAQCAtMTAyNiw3ICsxMDI2LDcgQEAgc3RhdGljIGludCBleGVyY2lzZV9w
cGd0dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJaTkxNV92bV9wdXQoJnBw
Z3R0LT52bSk7CiAKIG91dF9mcmVlOgotCW1vY2tfZmlsZV9wdXQoZmlsZSk7CisJZnB1dChmaWxl
KTsKIAlyZXR1cm4gZXJyOwogfQogCkBAIC0xNzgyLDkgKzE3ODIsOSBAQCBzdGF0aWMgaW50IGln
dF9jc190bGIodm9pZCAqYXJnKQogCXN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtOwogCXN0
cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHg7CiAJc3RydWN0IGludGVsX2NvbnRleHQgKmNlOwot
CXN0cnVjdCBkcm1fZmlsZSAqZmlsZTsKIAlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKIAlJOTE1X1JO
RF9TVEFURShwcm5nKTsKKwlzdHJ1Y3QgZmlsZSAqZmlsZTsKIAl1bnNpZ25lZCBpbnQgaTsKIAl1
MzIgKnJlc3VsdDsKIAl1MzIgKmJhdGNoOwpAQCAtMjAyMiw3ICsyMDIyLDcgQEAgc3RhdGljIGlu
dCBpZ3RfY3NfdGxiKHZvaWQgKmFyZykKIG91dF92bToKIAlpOTE1X3ZtX3B1dCh2bSk7CiBvdXRf
dW5sb2NrOgotCW1vY2tfZmlsZV9wdXQoZmlsZSk7CisJZnB1dChmaWxlKTsKIAlyZXR1cm4gZXJy
OwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9y
ZXF1ZXN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9yZXF1ZXN0LmMK
aW5kZXggN2M1NmVlMzhjYzViLi41MGNjN2NhOWFmYmEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3JlcXVlc3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9zZWxmdGVzdHMvaTkxNV9yZXF1ZXN0LmMKQEAgLTEzMDYsOSArMTMwNiw5IEBAIHN0YXRp
YyBpbnQgbGl2ZV9icmVhZGNydW1ic19zbW9rZXRlc3Qodm9pZCAqYXJnKQogCXN0cnVjdCB0YXNr
X3N0cnVjdCAqKnRocmVhZHM7CiAJc3RydWN0IGlndF9saXZlX3Rlc3QgbGl2ZTsKIAlpbnRlbF93
YWtlcmVmX3Qgd2FrZXJlZjsKLQlzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGU7CiAJc3RydWN0IHNtb2tl
dGVzdCAqc21va2U7CiAJdW5zaWduZWQgaW50IG4sIGlkeDsKKwlzdHJ1Y3QgZmlsZSAqZmlsZTsK
IAlpbnQgcmV0ID0gMDsKIAogCS8qCkBAIC0xNDMwLDcgKzE0MzAsNyBAQCBzdGF0aWMgaW50IGxp
dmVfYnJlYWRjcnVtYnNfc21va2V0ZXN0KHZvaWQgKmFyZykKIG91dF9zbW9rZToKIAlrZnJlZShz
bW9rZSk7CiBvdXRfZmlsZToKLQltb2NrX2ZpbGVfcHV0KGZpbGUpOworCWZwdXQoZmlsZSk7CiBv
dXRfcnBtOgogCWludGVsX3J1bnRpbWVfcG1fcHV0KCZpOTE1LT5ydW50aW1lX3BtLCB3YWtlcmVm
KTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX21l
bW9yeV9yZWdpb24uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pbnRlbF9tZW1v
cnlfcmVnaW9uLmMKaW5kZXggZjg0OTdhZDkwZjUzLi5iNjA5MTY1NjE0NjIgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pbnRlbF9tZW1vcnlfcmVnaW9uLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX21lbW9yeV9yZWdpb24uYwpA
QCAtNDA0LDcgKzQwNCw3IEBAIHN0YXRpYyBpbnQgaWd0X2xtZW1fd3JpdGVfZ3B1KHZvaWQgKmFy
ZykKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGFyZzsKIAlzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqOwogCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHg7Ci0Jc3Ry
dWN0IGRybV9maWxlICpmaWxlOworCXN0cnVjdCBmaWxlICpmaWxlOwogCUk5MTVfUk5EX1NUQVRF
KHBybmcpOwogCXUzMiBzejsKIAlpbnQgZXJyOwpAQCAtNDM5LDcgKzQzOSw3IEBAIHN0YXRpYyBp
bnQgaWd0X2xtZW1fd3JpdGVfZ3B1KHZvaWQgKmFyZykKIG91dF9wdXQ6CiAJaTkxNV9nZW1fb2Jq
ZWN0X3B1dChvYmopOwogb3V0X2ZpbGU6Ci0JbW9ja19maWxlX3B1dChmaWxlKTsKKwlmcHV0KGZp
bGUpOwogCXJldHVybiBlcnI7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L3NlbGZ0ZXN0cy9tb2NrX2RybS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL21v
Y2tfZHJtLmMKZGVsZXRlZCBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IGMxMDBjM2VmZTIzOS4uMDAw
MDAwMDAwMDAwCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2RybS5j
CisrKyAvZGV2L251bGwKQEAgLTEsMzggKzAsMCBAQAotLyoKLSAqIENvcHlyaWdodCDCqSAyMDE3
IEludGVsIENvcnBvcmF0aW9uCi0gKgotICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwg
ZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLSAqIGNvcHkgb2YgdGhp
cyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3
YXJlIiksCi0gKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBp
bmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uCi0gKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwg
bW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKLSAqIGFuZC9v
ciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3
aG9tIHRoZQotICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRo
ZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKLSAqCi0gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGlj
ZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSAoaW5jbHVkaW5nIHRoZSBuZXh0Ci0gKiBwYXJh
Z3JhcGgpIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9y
dGlvbnMgb2YgdGhlCi0gKiBTb2Z0d2FyZS4KLSAqCi0gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklE
RUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgotICog
SU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBN
RVJDSEFOVEFCSUxJVFksCi0gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQg
Tk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKLSAqIFRIRSBBVVRIT1JTIE9SIENP
UFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVS
Ci0gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9S
IE9USEVSV0lTRSwgQVJJU0lORwotICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lU
SCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUwotICogSU4gVEhFIFNP
RlRXQVJFLgotICoKLSAqLwotCi0jaW5jbHVkZSA8ZHJtL2RybV9maWxlLmg+Ci0KLSNpbmNsdWRl
ICJtb2NrX2RybS5oIgotCi1zdHJ1Y3QgZHJtX2ZpbGUgKm1vY2tfZmlsZShzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqaTkxNSkKLXsKLQlzdHJ1Y3QgZmlsZSAqZmlsZTsKLQotCWZpbGUgPSBtb2Nr
X2RybV9nZXRmaWxlKGk5MTUtPmRybS5wcmltYXJ5LCBPX1JEV1IpOwotCWlmIChJU19FUlIoZmls
ZSkpCi0JCXJldHVybiBFUlJfQ0FTVChmaWxlKTsKLQotCXJldHVybiBmaWxlLT5wcml2YXRlX2Rh
dGE7Ci19CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19k
cm0uaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2RybS5oCmluZGV4IGRj
NDE5MGJkM2Y1YS4uZDdmNDllMTQ5ZjBjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9zZWxmdGVzdHMvbW9ja19kcm0uaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVz
dHMvbW9ja19kcm0uaApAQCAtMjUsMTMgKzI1LDIwIEBACiAjaWZuZGVmIF9fTU9DS19EUk1fSAog
I2RlZmluZSBfX01PQ0tfRFJNX0gKIAotc3RydWN0IGRybV9maWxlOworI2luY2x1ZGUgPGRybS9k
cm1fZmlsZS5oPgorCiBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZTsKK3N0cnVjdCBkcm1fZmlsZTsK
K3N0cnVjdCBmaWxlOworCitzdGF0aWMgaW5saW5lIHN0cnVjdCBmaWxlICptb2NrX2ZpbGUoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCit7CisJcmV0dXJuIG1vY2tfZHJtX2dldGZpbGUo
aTkxNS0+ZHJtLnByaW1hcnksIE9fUkRXUik7Cit9CiAKLXN0cnVjdCBkcm1fZmlsZSAqbW9ja19m
aWxlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKLXN0YXRpYyBpbmxpbmUgdm9pZCBt
b2NrX2ZpbGVfcHV0KHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkKK3N0YXRpYyBpbmxpbmUgc3RydWN0
IGRybV9maWxlICp0b19kcm1fZmlsZShzdHJ1Y3QgZmlsZSAqZikKIHsKLQlmcHV0KGZpbGUtPmZp
bHApOworCXJldHVybiBmLT5wcml2YXRlX2RhdGE7CiB9CiAKICNlbmRpZiAvKiAhX19NT0NLX0RS
TV9IICovCi0tIAoyLjI0LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2lu
dGVsLWdmeA==

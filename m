Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8EA6811564E
	for <lists+intel-gfx@lfdr.de>; Fri,  6 Dec 2019 18:19:26 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 806936FA70;
	Fri,  6 Dec 2019 17:19:24 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9FB816FA6F;
 Fri,  6 Dec 2019 17:19:22 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19487875-1500050 
 for multiple; Fri, 06 Dec 2019 17:18:46 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  6 Dec 2019 17:18:45 +0000
Message-Id: <20191206171845.1671245-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t] i915/gem_exec_parse: Prepare for async
 cmd parser
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U2ltaWxhciB0byAoYW5kIGluIGZhY3QgY29waWVkIGZyb20pIHRoZSBwcmVwYXJhdGlvbnMgbWFk
ZSB0bwpnZW1fZXhlY19wYXJzZV9ibHQsIHVzZSBhIGZlbmNlIHRvIHF1ZXJ5IHRoZSByZXN1bHQg
b2YgdGhlIGV4ZWNidWYgdG8KYWNjb21tb2RhdGUgYXN5bmNocm9ub3VzIGNvbW1hbmQgcGFyc2lu
Zy4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVr
PgpDYzogTWlrYSBLdW9wcGFsYSA8bWlrYS5rdW9wcGFsYUBsaW51eC5pbnRlbC5jb20+Ci0tLQog
dGVzdHMvaTkxNS9nZW1fZXhlY19wYXJzZS5jIHwgMzYgKysrKysrKysrKysrKysrKysrKysrKy0t
LS0tLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgMjIgaW5zZXJ0aW9ucygrKSwgMTQgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvdGVzdHMvaTkxNS9nZW1fZXhlY19wYXJzZS5jIGIvdGVzdHMv
aTkxNS9nZW1fZXhlY19wYXJzZS5jCmluZGV4IDYwYmVlMjZkZS4uMGM2ZGU2NzdlIDEwMDY0NAot
LS0gYS90ZXN0cy9pOTE1L2dlbV9leGVjX3BhcnNlLmMKKysrIGIvdGVzdHMvaTkxNS9nZW1fZXhl
Y19wYXJzZS5jCkBAIC0zMCw5ICszMCw3IEBACiAKICNpbmNsdWRlIDxkcm0uaD4KIAotI2lmbmRl
ZiBJOTE1X1BBUkFNX0NNRF9QQVJTRVJfVkVSU0lPTgotI2RlZmluZSBJOTE1X1BBUkFNX0NNRF9Q
QVJTRVJfVkVSU0lPTiAgICAgICAyOAotI2VuZGlmCisjaW5jbHVkZSAic3dfc3luYy5oIgogCiAj
ZGVmaW5lIERFUlJNUiAweDQ0MDUwCiAjZGVmaW5lIE9BU1RBVFVTMiAweDIzNjgKQEAgLTYwLDE4
ICs1OCwyOCBAQCBzdGF0aWMgaW50IHBhcnNlcl92ZXJzaW9uOwogCiBzdHJ1Y3QgaW50ZWxfbW1p
b19kYXRhIG1taW9fZGF0YTsKIAotc3RhdGljIGludCBjb21tYW5kX3BhcnNlcl92ZXJzaW9uKGlu
dCBmZCkKK3N0YXRpYyBpbnQKK19fY2hlY2tlZF9leGVjYnVmKGludCBpOTE1LCBzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX2V4ZWNidWZmZXIyICplYikKIHsKLQlpbnQgdmVyc2lvbiA9IC0xOwotCWRybV9p
OTE1X2dldHBhcmFtX3QgZ3A7CisJaW50IGZlbmNlOworCWludCBlcnI7CiAKLQlncC5wYXJhbSA9
IEk5MTVfUEFSQU1fQ01EX1BBUlNFUl9WRVJTSU9OOwotCWdwLnZhbHVlID0gJnZlcnNpb247CisJ
aWd0X2Fzc2VydCghKGViLT5mbGFncyAmIEk5MTVfRVhFQ19GRU5DRV9PVVQpKTsKKwllYi0+Zmxh
Z3MgfD0gSTkxNV9FWEVDX0ZFTkNFX09VVDsKKwllcnIgPSBfX2dlbV9leGVjYnVmX3dyKGk5MTUs
IGViKTsKKwllYi0+ZmxhZ3MgJj0gfkk5MTVfRVhFQ19GRU5DRV9PVVQ7CisJaWYgKGVycikKKwkJ
cmV0dXJuIGVycjsKIAotCWlmIChkcm1Jb2N0bChmZCwgRFJNX0lPQ1RMX0k5MTVfR0VUUEFSQU0s
ICZncCkgPT0gMCkKLQkJcmV0dXJuIHZlcnNpb247CisJZmVuY2UgPSBlYi0+cnN2ZDIgPj4gMzI7
CiAKLQlyZXR1cm4gLTE7CisJc3luY19mZW5jZV93YWl0KGZlbmNlLCAtMSk7CisJZXJyID0gc3lu
Y19mZW5jZV9zdGF0dXMoZmVuY2UpOworCWNsb3NlKGZlbmNlKTsKKwlpZiAoZXJyIDwgMCkKKwkJ
cmV0dXJuIGVycjsKKworCXJldHVybiAwOwogfQogCiBzdGF0aWMgdWludDY0X3QgX19leGVjX2Jh
dGNoX3BhdGNoZWQoaW50IGZkLCB1aW50MzJfdCBjbWRfYm8sIHVpbnQzMl90ICpjbWRzLApAQCAt
MTQxLDcgKzE0OSw3IEBAIHN0YXRpYyBpbnQgX19leGVjX2JhdGNoKGludCBmZCwgdWludDMyX3Qg
Y21kX2JvLCB1aW50MzJfdCAqY21kcywKIAlleGVjYnVmLmJhdGNoX2xlbiA9IHNpemU7CiAJZXhl
Y2J1Zi5mbGFncyA9IHJpbmc7CiAKLQlyZXR1cm4gX19nZW1fZXhlY2J1ZihmZCwgJmV4ZWNidWYp
OworCXJldHVybiBfX2NoZWNrZWRfZXhlY2J1ZihmZCwgJmV4ZWNidWYpOwogfQogI2RlZmluZSBl
eGVjX2JhdGNoKGZkLCBibywgY21kcywgc3osIHJpbmcsIGV4cGVjdGVkKSBcCiAJaWd0X2Fzc2Vy
dF9lcShfX2V4ZWNfYmF0Y2goZmQsIGJvLCBjbWRzLCBzeiwgcmluZyksIGV4cGVjdGVkKQpAQCAt
MTg0LDcgKzE5Miw3IEBAIHN0YXRpYyB2b2lkIGV4ZWNfc3BsaXRfYmF0Y2goaW50IGZkLCB1aW50
MzJfdCAqY21kcywKIAkJICAgICAgMHg4KTsKIAlleGVjYnVmLmZsYWdzID0gcmluZzsKIAotCWln
dF9hc3NlcnRfZXEoX19nZW1fZXhlY2J1ZihmZCwgJmV4ZWNidWYpLCBleHBlY3RlZF9yZXQpOwor
CWlndF9hc3NlcnRfZXEoX19jaGVja2VkX2V4ZWNidWYoZmQsICZleGVjYnVmKSwgZXhwZWN0ZWRf
cmV0KTsKIAogCWdlbV9zeW5jKGZkLCBjbWRfYm8pOwogCWdlbV9jbG9zZShmZCwgY21kX2JvKTsK
QEAgLTQzNiw3ICs0NDQsNyBAQCBpZ3RfbWFpbgogCQlmZCA9IGRybV9vcGVuX2RyaXZlcihEUklW
RVJfSU5URUwpOwogCQlpZ3RfcmVxdWlyZV9nZW0oZmQpOwogCi0JCXBhcnNlcl92ZXJzaW9uID0g
Y29tbWFuZF9wYXJzZXJfdmVyc2lvbihmZCk7CisJCXBhcnNlcl92ZXJzaW9uID0gZ2VtX2NtZHBh
cnNlcl92ZXJzaW9uKGZkLCAwKTsKIAkJaWd0X3JlcXVpcmUocGFyc2VyX3ZlcnNpb24gIT0gLTEp
OwogCiAJCWlndF9yZXF1aXJlKGdlbV91c2VzX3BwZ3R0KGZkKSk7Ci0tIAoyLjI0LjAKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWls
aW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

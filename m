Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 41137126E25
	for <lists+intel-gfx@lfdr.de>; Thu, 19 Dec 2019 20:44:44 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 77E7B6E3D6;
	Thu, 19 Dec 2019 19:44:42 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3ABC96E3D6
 for <intel-gfx@lists.freedesktop.org>; Thu, 19 Dec 2019 19:44:41 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 19 Dec 2019 11:44:40 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,333,1571727600"; d="scan'208";a="213353975"
Received: from orsmsx106.amr.corp.intel.com ([10.22.225.133])
 by fmsmga008.fm.intel.com with ESMTP; 19 Dec 2019 11:44:40 -0800
Received: from orsmsx111.amr.corp.intel.com (10.22.240.12) by
 ORSMSX106.amr.corp.intel.com (10.22.225.133) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Thu, 19 Dec 2019 11:44:39 -0800
Received: from orsmsx101.amr.corp.intel.com ([169.254.8.147]) by
 ORSMSX111.amr.corp.intel.com ([169.254.12.24]) with mapi id 14.03.0439.000;
 Thu, 19 Dec 2019 11:44:39 -0800
From: "Sripada, Radhakrishna" <radhakrishna.sripada@intel.com>
To: "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>,
 "Deak, Imre" <imre.deak@intel.com>
Thread-Topic: [Intel-gfx] [PATCH 06/15] drm/i915/tgl: Gen-12 render
 decompression
Thread-Index: AQHVtb4ajYg571kjgU+aKHnNbKayx6fCZBSA
Date: Thu, 19 Dec 2019 19:44:38 +0000
Message-ID: <e575208e62e006e66c0892db57f872259838ac0c.camel@intel.com>
References: <20191218161105.30638-1-imre.deak@intel.com>
 <20191218161105.30638-7-imre.deak@intel.com>
In-Reply-To: <20191218161105.30638-7-imre.deak@intel.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.24.15.3]
Content-ID: <9E216CD202B82F4EB6DA152CE8826177@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH 06/15] drm/i915/tgl: Gen-12 render
 decompression
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "De Marchi, Lucas" <lucas.demarchi@intel.com>, "Chery,
 Nanley G" <nanley.g.chery@intel.com>, "Pandiyan,
 Dhinakaran" <dhinakaran.pandiyan@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCAyMDE5LTEyLTE4IGF0IDE4OjEwICswMjAwLCBJbXJlIERlYWsgd3JvdGU6DQo+IEZy
b206IERoaW5ha2FyYW4gUGFuZGl5YW4gPGRoaW5ha2FyYW4ucGFuZGl5YW5AaW50ZWwuY29tPg0K
PiANCj4gR2VuLTEyIGRpc3BsYXkgZGVjb21wcmVzc2lvbiBvcGVyYXRlcyBvbiBZLXRpbGVkIGNv
bXByZXNzZWQgbWFpbg0KPiBzdXJmYWNlLg0KPiBUaGUgQ0NTIGlzIGxpbmVhciBhbmQgaGFzIDQg
Yml0cyBvZiBtZXRhZGF0YSBmb3IgZWFjaCBtYWluIHN1cmZhY2UNCj4gY2FjaGUNCj4gbGluZSBw
YWlyLCBhIHNpemUgcmF0aW8gb2YgMToyNTYuIEdlbi0xMiBkaXNwbGF5IGRlY29tcHJlc3Npb24g
aXMNCj4gaW5jb21wYXRpYmxlIHdpdGggYnVmZmVycyBjb21wcmVzc2VkIGJ5IGVhcmxpZXIgR1BV
cywgc28gbWFrZSB1c2Ugb2YNCj4gYSBuZXcNCj4gbW9kaWZpZXIgdG8gaWRlbnRpZnkgZ2VuLTEy
IGNvbXByZXNzaW9uLiBBbm90aGVyIG5vdGFibGUgY2hhbmdlIGlzDQo+IHRoYXQNCj4gcmVuZGVy
IGRlY29tcHJlc3Npb24gaXMgc3VwcG9ydGVkIG9uIGFsbCBwbGFuZXMgZXhjZXB0IGN1cnNvciBh
bmQgb24NCj4gYWxsDQo+IHBpcGVzLiBTdGFydCBieSBhZGRpbmcgcmVuZGVyIGRlY29tcHJlc3Np
b24gc3VwcG9ydCBmb3IgW0EsWF1CR1I4ODgNCj4gcGl4ZWwNCj4gZm9ybWF0cy4NCj4gDQo+IHYy
OiBGaXggY2hlY2twYXRjaCB3YXJuaW5ncyAoTHVjYXMpDQo+IHYzOg0KPiBSZWJhc2UsIGRpc2Fi
bGUgY29sb3IgY2xlYXIsIHN0eWxpbmcgY2hhbmdlcyBhbmQgbW9kaWZ5DQo+IGludGVsX3RpbGVf
d2lkdGhfYnl0ZXMgYW5kIGludGVsX3RpbGVfaGVpZ2h0IHRvIGhhbmRsZSBsaW5lYXIgQ0NTDQo+
IHY0Og0KPiAtIFVzZSBmb3JtYXQgYmxvY2sgZGVzY3JpcHRvcnMgYW5kIHRoZSBpOTE1IHNwZWNp
ZmljIGZ1bmMgdG8gZ2V0IHRoZQ0KPiAgIHN1YnNhbXBsaW5nIGZvciBlYWNoIGNvbG9yIHBsYW5l
Lg0KPiAtIFVzZSBoZWxwZXJzIHRvIGNvbnZlcnQgYmV0d2VlbiBDQ1MgYW5kIG1haW4gcGxhbmVz
Lg0KPiANCj4gQ2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5j
b20+DQo+IENjOiBNYXR0IFJvcGVyIDxtYXR0aGV3LmQucm9wZXJAaW50ZWwuY29tPg0KPiBDYzog
TmFubGV5IEcgQ2hlcnkgPG5hbmxleS5nLmNoZXJ5QGludGVsLmNvbT4NCj4gQ2M6IEphc29uIEVr
c3RyYW5kIDxqYXNvbkBqbGVrc3RyYW5kLm5ldD4NClJldmlld2VkLWJ5OiBSYWRoYWtyaXNobmEg
U3JpcGFkYSA8cmFkaGFrcmlzaG5hLnNyaXBhZGFAaW50ZWwuY29tPg0KDQo+IFNpZ25lZC1vZmYt
Ynk6IERoaW5ha2FyYW4gUGFuZGl5YW4gPGRoaW5ha2FyYW4ucGFuZGl5YW5AaW50ZWwuY29tPg0K
PiBTaWduZWQtb2ZmLWJ5OiBMdWNhcyBEZSBNYXJjaGkgPGx1Y2FzLmRlbWFyY2hpQGludGVsLmNv
bT4NCj4gU2lnbmVkLW9mZi1ieTogSW1yZSBEZWFrIDxpbXJlLmRlYWtAaW50ZWwuY29tPg0KPiAt
LS0NCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIHwgMTg1
ICsrKysrKysrKysrKysrKw0KPiAtLS0tDQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX3Nwcml0ZS5jICB8ICAyMyArKy0NCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
cmVnLmggICAgICAgICAgICAgIHwgICAxICsNCj4gIDMgZmlsZXMgY2hhbmdlZCwgMTY5IGluc2Vy
dGlvbnMoKyksIDQwIGRlbGV0aW9ucygtKQ0KPiANCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jDQo+IGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMNCj4gaW5kZXggNmJkYTM5N2FlNjc3Li42NDFlYTI0
NTM5ZWIgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheS5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheS5jDQo+IEBAIC0xOTQxLDYgKzE5NDEsMTYgQEAgc3RhdGljIGJvb2wgaXNfY2NzX3BsYW5l
KGNvbnN0IHN0cnVjdA0KPiBkcm1fZnJhbWVidWZmZXIgKmZiLCBpbnQgcGxhbmUpDQo+ICAJcmV0
dXJuIHBsYW5lID49IGZiLT5mb3JtYXQtPm51bV9wbGFuZXMgLyAyOw0KPiAgfQ0KPiAgDQo+ICtz
dGF0aWMgYm9vbCBpc19nZW4xMl9jY3NfbW9kaWZpZXIodTY0IG1vZGlmaWVyKQ0KPiArew0KPiAr
CXJldHVybiBtb2RpZmllciA9PSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9HRU4xMl9SQ19DQ1M7
DQo+ICt9DQo+ICsNCj4gK3N0YXRpYyBib29sIGlzX2dlbjEyX2Njc19wbGFuZShjb25zdCBzdHJ1
Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiwgaW50DQo+IHBsYW5lKQ0KPiArew0KPiArCXJldHVybiBp
c19nZW4xMl9jY3NfbW9kaWZpZXIoZmItPm1vZGlmaWVyKSAmJiBpc19jY3NfcGxhbmUoZmIsDQo+
IHBsYW5lKTsNCj4gK30NCj4gKw0KPiAgc3RhdGljIGJvb2wgaXNfYXV4X3BsYW5lKGNvbnN0IHN0
cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiLCBpbnQNCj4gcGxhbmUpDQo+ICB7DQo+ICAJaWYgKGlz
X2Njc19tb2RpZmllcihmYi0+bW9kaWZpZXIpKQ0KPiBAQCAtMTk1Nyw2ICsxOTY3LDE0IEBAIHN0
YXRpYyBpbnQgbWFpbl90b19jY3NfcGxhbmUoY29uc3Qgc3RydWN0DQo+IGRybV9mcmFtZWJ1ZmZl
ciAqZmIsIGludCBtYWluX3BsYW5lKQ0KPiAgCXJldHVybiBmYi0+Zm9ybWF0LT5udW1fcGxhbmVz
IC8gMiArIG1haW5fcGxhbmU7DQo+ICB9DQo+ICANCj4gK3N0YXRpYyBpbnQgY2NzX3RvX21haW5f
cGxhbmUoY29uc3Qgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsIGludA0KPiBjY3NfcGxhbmUp
DQo+ICt7DQo+ICsJV0FSTl9PTighaXNfY2NzX21vZGlmaWVyKGZiLT5tb2RpZmllcikgfHwNCj4g
KwkJY2NzX3BsYW5lIDwgZmItPmZvcm1hdC0+bnVtX3BsYW5lcyAvIDIpOw0KPiArDQo+ICsJcmV0
dXJuIGNjc19wbGFuZSAtIGZiLT5mb3JtYXQtPm51bV9wbGFuZXMgLyAyOw0KPiArfQ0KPiArDQo+
ICAvKiBSZXR1cm4gZWl0aGVyIHRoZSBtYWluIHBsYW5lJ3MgQ0NTIG9yIC0gaWYgbm90IGEgQ0NT
IEZCIC0gVVYNCj4gcGxhbmUgKi8NCj4gIHN0YXRpYyBpbnQNCj4gIGludGVsX21haW5fdG9fYXV4
X3BsYW5lKGNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiLCBpbnQNCj4gbWFpbl9wbGFu
ZSkNCj4gQEAgLTE5ODUsNiArMjAwMywxMCBAQCBpbnRlbF90aWxlX3dpZHRoX2J5dGVzKGNvbnN0
IHN0cnVjdA0KPiBkcm1fZnJhbWVidWZmZXIgKmZiLCBpbnQgY29sb3JfcGxhbmUpDQo+ICAJCWlm
IChpc19jY3NfcGxhbmUoZmIsIGNvbG9yX3BsYW5lKSkNCj4gIAkJCXJldHVybiAxMjg7DQo+ICAJ
CS8qIGZhbGwgdGhyb3VnaCAqLw0KPiArCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1lfVElMRURfR0VO
MTJfUkNfQ0NTOg0KPiArCQlpZiAoaXNfY2NzX3BsYW5lKGZiLCBjb2xvcl9wbGFuZSkpDQo+ICsJ
CQlyZXR1cm4gNjQ7DQo+ICsJCS8qIGZhbGwgdGhyb3VnaCAqLw0KPiAgCWNhc2UgSTkxNV9GT1JN
QVRfTU9EX1lfVElMRUQ6DQo+ICAJCWlmIChJU19HRU4oZGV2X3ByaXYsIDIpIHx8DQo+IEhBU18x
MjhfQllURV9ZX1RJTElORyhkZXZfcHJpdikpDQo+ICAJCQlyZXR1cm4gMTI4Ow0KPiBAQCAtMjAx
OCw2ICsyMDQwLDkgQEAgaW50ZWxfdGlsZV93aWR0aF9ieXRlcyhjb25zdCBzdHJ1Y3QNCj4gZHJt
X2ZyYW1lYnVmZmVyICpmYiwgaW50IGNvbG9yX3BsYW5lKQ0KPiAgc3RhdGljIHVuc2lnbmVkIGlu
dA0KPiAgaW50ZWxfdGlsZV9oZWlnaHQoY29uc3Qgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIs
IGludCBjb2xvcl9wbGFuZSkNCj4gIHsNCj4gKwlpZiAoaXNfZ2VuMTJfY2NzX3BsYW5lKGZiLCBj
b2xvcl9wbGFuZSkpDQo+ICsJCXJldHVybiAxOw0KPiArDQo+ICAJcmV0dXJuIGludGVsX3RpbGVf
c2l6ZSh0b19pOTE1KGZiLT5kZXYpKSAvDQo+ICAJCWludGVsX3RpbGVfd2lkdGhfYnl0ZXMoZmIs
IGNvbG9yX3BsYW5lKTsNCj4gIH0NCj4gQEAgLTIxMTgsNiArMjE0Myw4IEBAIHN0YXRpYyB1bnNp
Z25lZCBpbnQgaW50ZWxfc3VyZl9hbGlnbm1lbnQoY29uc3QNCj4gc3RydWN0IGRybV9mcmFtZWJ1
ZmZlciAqZmIsDQo+ICAJCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDkpDQo+ICAJCQlyZXR1
cm4gMjU2ICogMTAyNDsNCj4gIAkJcmV0dXJuIDA7DQo+ICsJY2FzZSBJOTE1X0ZPUk1BVF9NT0Rf
WV9USUxFRF9HRU4xMl9SQ19DQ1M6DQo+ICsJCXJldHVybiAxNiAqIDEwMjQ7DQo+ICAJY2FzZSBJ
OTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9DQ1M6DQo+ICAJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWWZf
VElMRURfQ0NTOg0KPiAgCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1lfVElMRUQ6DQo+IEBAIC0yMzEw
LDkgKzIzMzcsMTAgQEAgc3RhdGljIHUzMiBpbnRlbF9hZGp1c3RfdGlsZV9vZmZzZXQoaW50ICp4
LA0KPiBpbnQgKnksDQo+ICAJcmV0dXJuIG5ld19vZmZzZXQ7DQo+ICB9DQo+ICANCj4gLXN0YXRp
YyBib29sIGlzX3N1cmZhY2VfbGluZWFyKHU2NCBtb2RpZmllciwgaW50IGNvbG9yX3BsYW5lKQ0K
PiArc3RhdGljIGJvb2wgaXNfc3VyZmFjZV9saW5lYXIoY29uc3Qgc3RydWN0IGRybV9mcmFtZWJ1
ZmZlciAqZmIsIGludA0KPiBjb2xvcl9wbGFuZSkNCj4gIHsNCj4gLQlyZXR1cm4gbW9kaWZpZXIg
PT0gRFJNX0ZPUk1BVF9NT0RfTElORUFSOw0KPiArCXJldHVybiBmYi0+bW9kaWZpZXIgPT0gRFJN
X0ZPUk1BVF9NT0RfTElORUFSIHx8DQo+ICsJICAgICAgIGlzX2dlbjEyX2Njc19wbGFuZShmYiwg
Y29sb3JfcGxhbmUpOw0KPiAgfQ0KPiAgDQo+ICBzdGF0aWMgdTMyIGludGVsX2FkanVzdF9hbGln
bmVkX29mZnNldChpbnQgKngsIGludCAqeSwNCj4gQEAgLTIzMjcsNyArMjM1NSw3IEBAIHN0YXRp
YyB1MzIgaW50ZWxfYWRqdXN0X2FsaWduZWRfb2Zmc2V0KGludCAqeCwNCj4gaW50ICp5LA0KPiAg
DQo+ICAJV0FSTl9PTihuZXdfb2Zmc2V0ID4gb2xkX29mZnNldCk7DQo+ICANCj4gLQlpZiAoIWlz
X3N1cmZhY2VfbGluZWFyKGZiLT5tb2RpZmllciwgY29sb3JfcGxhbmUpKSB7DQo+ICsJaWYgKCFp
c19zdXJmYWNlX2xpbmVhcihmYiwgY29sb3JfcGxhbmUpKSB7DQo+ICAJCXVuc2lnbmVkIGludCB0
aWxlX3NpemUsIHRpbGVfd2lkdGgsIHRpbGVfaGVpZ2h0Ow0KPiAgCQl1bnNpZ25lZCBpbnQgcGl0
Y2hfdGlsZXM7DQo+ICANCj4gQEAgLTIzOTcsNyArMjQyNSw3IEBAIHN0YXRpYyB1MzIgaW50ZWxf
Y29tcHV0ZV9hbGlnbmVkX29mZnNldChzdHJ1Y3QNCj4gZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsDQo+ICAJaWYgKGFsaWdubWVudCkNCj4gIAkJYWxpZ25tZW50LS07DQo+ICANCj4gLQlpZiAo
IWlzX3N1cmZhY2VfbGluZWFyKGZiLT5tb2RpZmllciwgY29sb3JfcGxhbmUpKSB7DQo+ICsJaWYg
KCFpc19zdXJmYWNlX2xpbmVhcihmYiwgY29sb3JfcGxhbmUpKSB7DQo+ICAJCXVuc2lnbmVkIGlu
dCB0aWxlX3NpemUsIHRpbGVfd2lkdGgsIHRpbGVfaGVpZ2h0Ow0KPiAgCQl1bnNpZ25lZCBpbnQg
dGlsZV9yb3dzLCB0aWxlcywgcGl0Y2hfdGlsZXM7DQo+ICANCj4gQEAgLTI0OTksNiArMjUyNyw3
IEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQNCj4gaW50ZWxfZmJfbW9kaWZpZXJfdG9fdGlsaW5nKHU2
NCBmYl9tb2RpZmllcikNCj4gIAkJcmV0dXJuIEk5MTVfVElMSU5HX1g7DQo+ICAJY2FzZSBJOTE1
X0ZPUk1BVF9NT0RfWV9USUxFRDoNCj4gIAljYXNlIEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0ND
UzoNCj4gKwljYXNlIEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDUzoNCj4gIAkJ
cmV0dXJuIEk5MTVfVElMSU5HX1k7DQo+ICAJZGVmYXVsdDoNCj4gIAkJcmV0dXJuIEk5MTVfVElM
SU5HX05PTkU7DQo+IEBAIC0yNTE5LDcgKzI1NDgsNyBAQCBzdGF0aWMgdW5zaWduZWQgaW50DQo+
IGludGVsX2ZiX21vZGlmaWVyX3RvX3RpbGluZyh1NjQgZmJfbW9kaWZpZXIpDQo+ICAgKiB1cyBh
IHJhdGlvIG9mIG9uZSBieXRlIGluIHRoZSBDQ1MgZm9yIGVhY2ggOHgxNiBwaXhlbHMgaW4gdGhl
DQo+ICAgKiBtYWluIHN1cmZhY2UuDQo+ICAgKi8NCj4gLXN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJt
X2Zvcm1hdF9pbmZvIGNjc19mb3JtYXRzW10gPSB7DQo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9mb3JtYXRfaW5mbyBza2xfY2NzX2Zvcm1hdHNbXSA9IHsNCj4gIAl7IC5mb3JtYXQgPSBEUk1f
Rk9STUFUX1hSR0I4ODg4LCAuZGVwdGggPSAyNCwgLm51bV9wbGFuZXMgPSAyLA0KPiAgCSAgLmNw
cCA9IHsgNCwgMSwgfSwgLmhzdWIgPSA4LCAudnN1YiA9IDE2LCB9LA0KPiAgCXsgLmZvcm1hdCA9
IERSTV9GT1JNQVRfWEJHUjg4ODgsIC5kZXB0aCA9IDI0LCAubnVtX3BsYW5lcyA9IDIsDQo+IEBA
IC0yNTMwLDYgKzI1NTksMjggQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZm9ybWF0X2luZm8N
Cj4gY2NzX2Zvcm1hdHNbXSA9IHsNCj4gIAkgIC5jcHAgPSB7IDQsIDEsIH0sIC5oc3ViID0gOCwg
LnZzdWIgPSAxNiwgLmhhc19hbHBoYSA9IHRydWUsDQo+IH0sDQo+ICB9Ow0KPiAgDQo+ICsvKg0K
PiArICogR2VuLTEyIGNvbXByZXNzaW9uIHVzZXMgNCBiaXRzIG9mIENDUyBkYXRhIGZvciBlYWNo
IGNhY2hlIGxpbmUNCj4gcGFpciBpbiB0aGUNCj4gKyAqIG1haW4gc3VyZmFjZS4gQW5kIGVhY2gg
NjRCIENDUyBjYWNoZSBsaW5lIHJlcHJlc2VudHMgYW4gYXJlYSBvZg0KPiA0eDEgWS10aWxlcw0K
PiArICogaW4gdGhlIG1haW4gc3VyZmFjZS4gV2l0aCA0IGJ5dGUgcGl4ZWxzIGFuZCBlYWNoIFkt
dGlsZSBoYXZpbmcNCj4gZGltZW5zaW9ucyBvZg0KPiArICogMzJ4MzIgcGl4ZWxzLCB0aGUgcmF0
aW8gdHVybnMgb3V0IHRvIDFCIGluIHRoZSBDQ1MgZm9yIGV2ZXJ5IDJ4MzINCj4gcGl4ZWxzIGlu
DQo+ICsgKiB0aGUgbWFpbiBzdXJmYWNlLg0KPiArICovDQo+ICtzdGF0aWMgY29uc3Qgc3RydWN0
IGRybV9mb3JtYXRfaW5mbyBnZW4xMl9jY3NfZm9ybWF0c1tdID0gew0KPiArCXsgLmZvcm1hdCA9
IERSTV9GT1JNQVRfWFJHQjg4ODgsIC5kZXB0aCA9IDI0LCAubnVtX3BsYW5lcyA9IDIsDQo+ICsJ
ICAuY2hhcl9wZXJfYmxvY2sgPSB7IDQsIDEgfSwgLmJsb2NrX3cgPSB7IDEsIDIgfSwgLmJsb2Nr
X2ggPSB7DQo+IDEsIDEgfSwNCj4gKwkgIC5oc3ViID0gMSwgLnZzdWIgPSAxLCB9LA0KPiArCXsg
LmZvcm1hdCA9IERSTV9GT1JNQVRfWEJHUjg4ODgsIC5kZXB0aCA9IDI0LCAubnVtX3BsYW5lcyA9
IDIsDQo+ICsJICAuY2hhcl9wZXJfYmxvY2sgPSB7IDQsIDEgfSwgLmJsb2NrX3cgPSB7IDEsIDIg
fSwgLmJsb2NrX2ggPSB7DQo+IDEsIDEgfSwNCj4gKwkgIC5oc3ViID0gMSwgLnZzdWIgPSAxLCB9
LA0KPiArCXsgLmZvcm1hdCA9IERSTV9GT1JNQVRfQVJHQjg4ODgsIC5kZXB0aCA9IDMyLCAubnVt
X3BsYW5lcyA9IDIsDQo+ICsJICAuY2hhcl9wZXJfYmxvY2sgPSB7IDQsIDEgfSwgLmJsb2NrX3cg
PSB7IDEsIDIgfSwgLmJsb2NrX2ggPSB7DQo+IDEsIDEgfSwNCj4gKwkgIC5oc3ViID0gMSwgLnZz
dWIgPSAxLCAuaGFzX2FscGhhID0gdHJ1ZSB9LA0KPiArCXsgLmZvcm1hdCA9IERSTV9GT1JNQVRf
QUJHUjg4ODgsIC5kZXB0aCA9IDMyLCAubnVtX3BsYW5lcyA9IDIsDQo+ICsJICAuY2hhcl9wZXJf
YmxvY2sgPSB7IDQsIDEgfSwgLmJsb2NrX3cgPSB7IDEsIDIgfSwgLmJsb2NrX2ggPSB7DQo+IDEs
IDEgfSwNCj4gKwkgIC5oc3ViID0gMSwgLnZzdWIgPSAxLCAuaGFzX2FscGhhID0gdHJ1ZSB9LA0K
PiArfTsNCj4gKw0KPiAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZm9ybWF0X2luZm8gKg0KPiAg
bG9va3VwX2Zvcm1hdF9pbmZvKGNvbnN0IHN0cnVjdCBkcm1fZm9ybWF0X2luZm8gZm9ybWF0c1td
LA0KPiAgCQkgICBpbnQgbnVtX2Zvcm1hdHMsIHUzMiBmb3JtYXQpDQo+IEBAIC0yNTUwLDggKzI2
MDEsMTIgQEAgaW50ZWxfZ2V0X2Zvcm1hdF9pbmZvKGNvbnN0IHN0cnVjdA0KPiBkcm1fbW9kZV9m
Yl9jbWQyICpjbWQpDQo+ICAJc3dpdGNoIChjbWQtPm1vZGlmaWVyWzBdKSB7DQo+ICAJY2FzZSBJ
OTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9DQ1M6DQo+ICAJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWWZf
VElMRURfQ0NTOg0KPiAtCQlyZXR1cm4gbG9va3VwX2Zvcm1hdF9pbmZvKGNjc19mb3JtYXRzLA0K
PiAtCQkJCQkgIEFSUkFZX1NJWkUoY2NzX2Zvcm1hdHMpLA0KPiArCQlyZXR1cm4gbG9va3VwX2Zv
cm1hdF9pbmZvKHNrbF9jY3NfZm9ybWF0cywNCj4gKwkJCQkJICBBUlJBWV9TSVpFKHNrbF9jY3Nf
Zm9ybWF0cyksDQo+ICsJCQkJCSAgY21kLT5waXhlbF9mb3JtYXQpOw0KPiArCWNhc2UgSTkxNV9G
T1JNQVRfTU9EX1lfVElMRURfR0VOMTJfUkNfQ0NTOg0KPiArCQlyZXR1cm4gbG9va3VwX2Zvcm1h
dF9pbmZvKGdlbjEyX2Njc19mb3JtYXRzLA0KPiArCQkJCQkgIEFSUkFZX1NJWkUoZ2VuMTJfY2Nz
X2Zvcm1hdHMpDQo+ICwNCj4gIAkJCQkJICBjbWQtPnBpeGVsX2Zvcm1hdCk7DQo+ICAJZGVmYXVs
dDoNCj4gIAkJcmV0dXJuIE5VTEw7DQo+IEBAIC0yNTYwLDcgKzI2MTUsOCBAQCBpbnRlbF9nZXRf
Zm9ybWF0X2luZm8oY29uc3Qgc3RydWN0DQo+IGRybV9tb2RlX2ZiX2NtZDIgKmNtZCkNCj4gIA0K
PiAgYm9vbCBpc19jY3NfbW9kaWZpZXIodTY0IG1vZGlmaWVyKQ0KPiAgew0KPiAtCXJldHVybiBt
b2RpZmllciA9PSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9DQ1MgfHwNCj4gKwlyZXR1cm4gbW9k
aWZpZXIgPT0gSTkxNV9GT1JNQVRfTU9EX1lfVElMRURfR0VOMTJfUkNfQ0NTIHx8DQo+ICsJICAg
ICAgIG1vZGlmaWVyID09IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0NDUyB8fA0KPiAgCSAgICAg
ICBtb2RpZmllciA9PSBJOTE1X0ZPUk1BVF9NT0RfWWZfVElMRURfQ0NTOw0KPiAgfQ0KPiAgDQo+
IEBAIC0yNjA4LDggKzI2NjQsOSBAQCBzdGF0aWMgdTMyDQo+ICBpbnRlbF9mYl9zdHJpZGVfYWxp
Z25tZW50KGNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiLCBpbnQNCj4gY29sb3JfcGxh
bmUpDQo+ICB7DQo+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkx
NShmYi0+ZGV2KTsNCj4gKwl1MzIgdGlsZV93aWR0aDsNCj4gIA0KPiAtCWlmIChmYi0+bW9kaWZp
ZXIgPT0gRFJNX0ZPUk1BVF9NT0RfTElORUFSKSB7DQo+ICsJaWYgKGlzX3N1cmZhY2VfbGluZWFy
KGZiLCBjb2xvcl9wbGFuZSkpIHsNCj4gIAkJdTMyIG1heF9zdHJpZGUgPSBpbnRlbF9wbGFuZV9m
Yl9tYXhfc3RyaWRlKGRldl9wcml2LA0KPiAgCQkJCQkJCSAgIGZiLT5mb3JtYXQtDQo+ID5mb3Jt
YXQsDQo+ICAJCQkJCQkJICAgZmItDQo+ID5tb2RpZmllcik7DQo+IEBAIC0yNjE4LDEzICsyNjc1
LDE0IEBAIGludGVsX2ZiX3N0cmlkZV9hbGlnbm1lbnQoY29uc3Qgc3RydWN0DQo+IGRybV9mcmFt
ZWJ1ZmZlciAqZmIsIGludCBjb2xvcl9wbGFuZSkNCj4gIAkJICogVG8gbWFrZSByZW1hcHBpbmcg
d2l0aCBsaW5lYXIgZ2VuZXJhbGx5IGZlYXNpYmxlDQo+ICAJCSAqIHdlIG5lZWQgdGhlIHN0cmlk
ZSB0byBiZSBwYWdlIGFsaWduZWQuDQo+ICAJCSAqLw0KPiAtCQlpZiAoZmItPnBpdGNoZXNbY29s
b3JfcGxhbmVdID4gbWF4X3N0cmlkZSkNCj4gKwkJaWYgKGZiLT5waXRjaGVzW2NvbG9yX3BsYW5l
XSA+IG1heF9zdHJpZGUgJiYNCj4gIWlzX2Njc19tb2RpZmllcihmYi0+bW9kaWZpZXIpKQ0KPiAg
CQkJcmV0dXJuIGludGVsX3RpbGVfc2l6ZShkZXZfcHJpdik7DQo+ICAJCWVsc2UNCj4gIAkJCXJl
dHVybiA2NDsNCj4gLQl9IGVsc2Ugew0KPiAtCQl1MzIgdGlsZV93aWR0aCA9IGludGVsX3RpbGVf
d2lkdGhfYnl0ZXMoZmIsDQo+IGNvbG9yX3BsYW5lKTsNCj4gKwl9DQo+ICANCj4gKwl0aWxlX3dp
ZHRoID0gaW50ZWxfdGlsZV93aWR0aF9ieXRlcyhmYiwgY29sb3JfcGxhbmUpOw0KPiArCWlmIChp
c19jY3NfbW9kaWZpZXIoZmItPm1vZGlmaWVyKSAmJiBjb2xvcl9wbGFuZSA9PSAwKSB7DQo+ICAJ
CS8qDQo+ICAJCSAqIERpc3BsYXkgV0EgIzA1MzE6IHNrbCxieHQsa2JsLGdsaw0KPiAgCQkgKg0K
PiBAQCAtMjYzNCwxMiArMjY5MiwxNiBAQCBpbnRlbF9mYl9zdHJpZGVfYWxpZ25tZW50KGNvbnN0
IHN0cnVjdA0KPiBkcm1fZnJhbWVidWZmZXIgKmZiLCBpbnQgY29sb3JfcGxhbmUpDQo+ICAJCSAq
IHJlcXVpcmUgdGhlIGVudGlyZSBmYiB0byBhY2NvbW1vZGF0ZSB0aGF0IHRvIGF2b2lkDQo+ICAJ
CSAqIHBvdGVudGlhbCBydW50aW1lIGVycm9ycyBhdCBwbGFuZSBjb25maWd1cmF0aW9uDQo+IHRp
bWUuDQo+ICAJCSAqLw0KPiAtCQlpZiAoSVNfR0VOKGRldl9wcml2LCA5KSAmJiBpc19jY3NfbW9k
aWZpZXIoZmItDQo+ID5tb2RpZmllcikgJiYNCj4gLQkJICAgIGNvbG9yX3BsYW5lID09IDAgJiYg
ZmItPndpZHRoID4gMzg0MCkNCj4gKwkJaWYgKElTX0dFTihkZXZfcHJpdiwgOSkgJiYgZmItPndp
ZHRoID4gMzg0MCkNCj4gKwkJCXRpbGVfd2lkdGggKj0gNDsNCj4gKwkJLyoNCj4gKwkJICogVGhl
IG1haW4gc3VyZmFjZSBwaXRjaCBtdXN0IGJlIHBhZGRlZCB0byBhIG11bHRpcGxlDQo+IG9mIGZv
dXINCj4gKwkJICogdGlsZSB3aWR0aHMuDQo+ICsJCSAqLw0KPiArCQllbHNlIGlmIChJTlRFTF9H
RU4oZGV2X3ByaXYpID49IDEyKQ0KPiAgCQkJdGlsZV93aWR0aCAqPSA0Ow0KPiAtDQo+IC0JCXJl
dHVybiB0aWxlX3dpZHRoOw0KPiAgCX0NCj4gKwlyZXR1cm4gdGlsZV93aWR0aDsNCj4gIH0NCj4g
IA0KPiAgYm9vbCBpbnRlbF9wbGFuZV9jYW5fcmVtYXAoY29uc3Qgc3RydWN0IGludGVsX3BsYW5l
X3N0YXRlDQo+ICpwbGFuZV9zdGF0ZSkNCj4gQEAgLTI3MTAsMjUgKzI3NzIsNzQgQEAgc3RhdGlj
IGJvb2wgaW50ZWxfcGxhbmVfbmVlZHNfcmVtYXAoY29uc3QNCj4gc3RydWN0IGludGVsX3BsYW5l
X3N0YXRlICpwbGFuZV9zdGF0ZSkNCj4gIAlyZXR1cm4gc3RyaWRlID4gbWF4X3N0cmlkZTsNCj4g
IH0NCj4gIA0KPiArc3RhdGljIHZvaWQNCj4gK2ludGVsX2ZiX3BsYW5lX2dldF9zdWJzYW1wbGlu
ZyhpbnQgKmhzdWIsIGludCAqdnN1YiwNCj4gKwkJCSAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Zy
YW1lYnVmZmVyICpmYiwNCj4gKwkJCSAgICAgICBpbnQgY29sb3JfcGxhbmUpDQo+ICt7DQo+ICsJ
aW50IG1haW5fcGxhbmU7DQo+ICsNCj4gKwlpZiAoY29sb3JfcGxhbmUgPT0gMCkgew0KPiArCQkq
aHN1YiA9IDE7DQo+ICsJCSp2c3ViID0gMTsNCj4gKw0KPiArCQlyZXR1cm47DQo+ICsJfQ0KPiAr
DQo+ICsJLyoNCj4gKwkgKiBUT0RPOiBEZWR1Y3QgdGhlIHN1YnNhbXBsaW5nIGZyb20gdGhlIGNo
YXIgYmxvY2sgZm9yIGFsbCBDQ1MNCj4gKwkgKiBmb3JtYXRzIGFuZCBwbGFuZXMuDQo+ICsJICov
DQo+ICsJaWYgKCFpc19nZW4xMl9jY3NfcGxhbmUoZmIsIGNvbG9yX3BsYW5lKSkgew0KPiArCQkq
aHN1YiA9IGZiLT5mb3JtYXQtPmhzdWI7DQo+ICsJCSp2c3ViID0gZmItPmZvcm1hdC0+dnN1YjsN
Cj4gKw0KPiArCQlyZXR1cm47DQo+ICsJfQ0KPiArDQo+ICsJbWFpbl9wbGFuZSA9IGNjc190b19t
YWluX3BsYW5lKGZiLCBjb2xvcl9wbGFuZSk7DQo+ICsJKmhzdWIgPSBkcm1fZm9ybWF0X2luZm9f
YmxvY2tfd2lkdGgoZmItPmZvcm1hdCwgY29sb3JfcGxhbmUpIC8NCj4gKwkgICAgICAgIGRybV9m
b3JtYXRfaW5mb19ibG9ja193aWR0aChmYi0+Zm9ybWF0LCBtYWluX3BsYW5lKTsNCj4gKw0KPiAr
CS8qDQo+ICsJICogVGhlIG1pbiBzdHJpZGUgY2hlY2sgaW4gdGhlIGNvcmUgZnJhbWVidWZmZXJf
Y2hlY2soKQ0KPiBmdW5jdGlvbg0KPiArCSAqIGFzc3VtZXMgdGhhdCBmb3JtYXQtPmhzdWIgYXBw
bGllcyB0byBldmVyeSBwbGFuZSBleGNlcHQgZm9yDQo+IHRoZQ0KPiArCSAqIGZpcnN0IHBsYW5l
LiBUaGF0J3MgaW5jb3JyZWN0IGZvciB0aGUgQ0NTIEFVWCBwbGFuZSBvZiB0aGUNCj4gZmlyc3QN
Cj4gKwkgKiBwbGFuZSwgYnV0IGZvciB0aGUgYWJvdmUgY2hlY2sgdG8gcGFzcyB3ZSBtdXN0IGRl
ZmluZSB0aGUNCj4gYmxvY2sNCj4gKwkgKiB3aWR0aCB3aXRoIHRoYXQgc3Vic2FtcGxpbmcgYXBw
bGllZCB0byBpdC4gQWRqdXN0IHRoZSB3aWR0aA0KPiBoZXJlDQo+ICsJICogYWNjb3JkaW5nbHks
IHNvIHdlIGNhbiBjYWxjdWxhdGUgdGhlIGFjdHVhbCBzdWJzYW1wbGluZw0KPiBmYWN0b3IuDQo+
ICsJICovDQo+ICsJaWYgKGNvbG9yX3BsYW5lID09IDEpDQo+ICsJCSpoc3ViICo9IGZiLT5mb3Jt
YXQtPmhzdWI7DQo+ICsNCj4gKwkqdnN1YiA9IDMyOw0KPiArfQ0KPiAgc3RhdGljIGludA0KPiAg
aW50ZWxfZmJfY2hlY2tfY2NzX3h5KHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiLCBpbnQgeCwg
aW50IHkpDQo+ICB7DQo+ICAJc3RydWN0IGludGVsX2ZyYW1lYnVmZmVyICppbnRlbF9mYiA9IHRv
X2ludGVsX2ZyYW1lYnVmZmVyKGZiKTsNCj4gLQlpbnQgaHN1YiA9IGZiLT5mb3JtYXQtPmhzdWI7
DQo+IC0JaW50IHZzdWIgPSBmYi0+Zm9ybWF0LT52c3ViOw0KPiArCWludCBtYWluX3BsYW5lOw0K
PiArCWludCBoc3ViLCB2c3ViOw0KPiAgCWludCB0aWxlX3dpZHRoLCB0aWxlX2hlaWdodDsNCj4g
IAlpbnQgY2NzX3gsIGNjc195Ow0KPiAgCWludCBtYWluX3gsIG1haW5feTsNCj4gKwlpbnQgY2Nz
X3BsYW5lID0gMTsNCj4gIA0KPiAtCWludGVsX3RpbGVfZGltcyhmYiwgMSwgJnRpbGVfd2lkdGgs
ICZ0aWxlX2hlaWdodCk7DQo+ICsJaWYgKCFpc19jY3NfcGxhbmUoZmIsIGNjc19wbGFuZSkpDQo+
ICsJCXJldHVybiAwOw0KPiArDQo+ICsJaW50ZWxfdGlsZV9kaW1zKGZiLCBjY3NfcGxhbmUsICZ0
aWxlX3dpZHRoLCAmdGlsZV9oZWlnaHQpOw0KPiArCWludGVsX2ZiX3BsYW5lX2dldF9zdWJzYW1w
bGluZygmaHN1YiwgJnZzdWIsIGZiLCBjY3NfcGxhbmUpOw0KPiAgDQo+ICAJdGlsZV93aWR0aCAq
PSBoc3ViOw0KPiAgCXRpbGVfaGVpZ2h0ICo9IHZzdWI7DQo+ICANCj4gIAljY3NfeCA9ICh4ICog
aHN1YikgJSB0aWxlX3dpZHRoOw0KPiAgCWNjc195ID0gKHkgKiB2c3ViKSAlIHRpbGVfaGVpZ2h0
Ow0KPiAtCW1haW5feCA9IGludGVsX2ZiLT5ub3JtYWxbMF0ueCAlIHRpbGVfd2lkdGg7DQo+IC0J
bWFpbl95ID0gaW50ZWxfZmItPm5vcm1hbFswXS55ICUgdGlsZV9oZWlnaHQ7DQo+ICsNCj4gKwlt
YWluX3BsYW5lID0gY2NzX3RvX21haW5fcGxhbmUoZmIsIGNjc19wbGFuZSk7DQo+ICsJbWFpbl94
ID0gaW50ZWxfZmItPm5vcm1hbFttYWluX3BsYW5lXS54ICUgdGlsZV93aWR0aDsNCj4gKwltYWlu
X3kgPSBpbnRlbF9mYi0+bm9ybWFsW21haW5fcGxhbmVdLnkgJSB0aWxlX2hlaWdodDsNCj4gIA0K
PiAgCS8qDQo+ICAJICogQ0NTIGRvZXNuJ3QgaGF2ZSBpdHMgb3duIHgveSBvZmZzZXQgcmVnaXN0
ZXIsIHNvIHRoZSBpbnRyYQ0KPiBDQ1MgdGlsZQ0KPiBAQCAtMjczOCw4ICsyODQ5LDggQEAgaW50
ZWxfZmJfY2hlY2tfY2NzX3h5KHN0cnVjdCBkcm1fZnJhbWVidWZmZXINCj4gKmZiLCBpbnQgeCwg
aW50IHkpDQo+ICAJCURSTV9ERUJVR19LTVMoIkJhZCBDQ1MgeC95IChtYWluICVkLCVkIGNjcyAl
ZCwlZCkgZnVsbA0KPiAobWFpbiAlZCwlZCBjY3MgJWQsJWQpXG4iLA0KPiAgCQkJICAgICAgbWFp
bl94LCBtYWluX3ksDQo+ICAJCQkgICAgICBjY3NfeCwgY2NzX3ksDQo+IC0JCQkgICAgICBpbnRl
bF9mYi0+bm9ybWFsWzBdLngsDQo+IC0JCQkgICAgICBpbnRlbF9mYi0+bm9ybWFsWzBdLnksDQo+
ICsJCQkgICAgICBpbnRlbF9mYi0+bm9ybWFsW21haW5fcGxhbmVdLngsDQo+ICsJCQkgICAgICBp
bnRlbF9mYi0+bm9ybWFsW21haW5fcGxhbmVdLnksDQo+ICAJCQkgICAgICB4LCB5KTsNCj4gIAkJ
cmV0dXJuIC1FSU5WQUw7DQo+ICAJfQ0KPiBAQCAtMjgxMCw3ICsyOTIxLDcgQEAgaW50ZWxfZmls
bF9mYl9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlDQo+ICpkZXZfcHJpdiwNCj4gIAkJCQkJ
CSAgICAgIHRpbGVfc2l6ZSk7DQo+ICAJCW9mZnNldCAvPSB0aWxlX3NpemU7DQo+ICANCj4gLQkJ
aWYgKCFpc19zdXJmYWNlX2xpbmVhcihmYi0+bW9kaWZpZXIsIGkpKSB7DQo+ICsJCWlmICghaXNf
c3VyZmFjZV9saW5lYXIoZmIsIGkpKSB7DQo+ICAJCQl1bnNpZ25lZCBpbnQgdGlsZV93aWR0aCwg
dGlsZV9oZWlnaHQ7DQo+ICAJCQl1bnNpZ25lZCBpbnQgcGl0Y2hfdGlsZXM7DQo+ICAJCQlzdHJ1
Y3QgZHJtX3JlY3QgcjsNCj4gQEAgLTM0ODksMTQgKzM2MDAsMTUgQEAgc3RhdGljIGJvb2wNCj4g
c2tsX2NoZWNrX21haW5fY2NzX2Nvb3JkaW5hdGVzKHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAq
cGxhbmVfc3RhdGUNCj4gIAkJCQkJICAgaW50IG1haW5feCwgaW50IG1haW5feSwgdTMyDQo+IG1h
aW5fb2Zmc2V0KQ0KPiAgew0KPiAgCWNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0g
cGxhbmVfc3RhdGUtPmh3LmZiOw0KPiAtCWludCBoc3ViID0gZmItPmZvcm1hdC0+aHN1YjsNCj4g
LQlpbnQgdnN1YiA9IGZiLT5mb3JtYXQtPnZzdWI7DQo+ICAJaW50IGNjc19wbGFuZSA9IG1haW5f
dG9fY2NzX3BsYW5lKGZiLCAwKTsNCj4gIAlpbnQgYXV4X3ggPSBwbGFuZV9zdGF0ZS0+Y29sb3Jf
cGxhbmVbY2NzX3BsYW5lXS54Ow0KPiAgCWludCBhdXhfeSA9IHBsYW5lX3N0YXRlLT5jb2xvcl9w
bGFuZVtjY3NfcGxhbmVdLnk7DQo+ICAJdTMyIGF1eF9vZmZzZXQgPSBwbGFuZV9zdGF0ZS0+Y29s
b3JfcGxhbmVbY2NzX3BsYW5lXS5vZmZzZXQ7DQo+ICAJdTMyIGFsaWdubWVudCA9IGludGVsX3N1
cmZfYWxpZ25tZW50KGZiLCBjY3NfcGxhbmUpOw0KPiArCWludCBoc3ViOw0KPiArCWludCB2c3Vi
Ow0KPiAgDQo+ICsJaW50ZWxfZmJfcGxhbmVfZ2V0X3N1YnNhbXBsaW5nKCZoc3ViLCAmdnN1Yiwg
ZmIsIGNjc19wbGFuZSk7DQo+ICAJd2hpbGUgKGF1eF9vZmZzZXQgPj0gbWFpbl9vZmZzZXQgJiYg
YXV4X3kgPD0gbWFpbl95KSB7DQo+ICAJCWludCB4LCB5Ow0KPiAgDQo+IEBAIC0zNjU3LDEyICsz
NzY5LDE1IEBAIHN0YXRpYyBpbnQgc2tsX2NoZWNrX2Njc19hdXhfc3VyZmFjZShzdHJ1Y3QNCj4g
aW50ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlKQ0KPiAgCWNvbnN0IHN0cnVjdCBkcm1fZnJh
bWVidWZmZXIgKmZiID0gcGxhbmVfc3RhdGUtPmh3LmZiOw0KPiAgCWludCBzcmNfeCA9IHBsYW5l
X3N0YXRlLT51YXBpLnNyYy54MSA+PiAxNjsNCj4gIAlpbnQgc3JjX3kgPSBwbGFuZV9zdGF0ZS0+
dWFwaS5zcmMueTEgPj4gMTY7DQo+IC0JaW50IGhzdWIgPSBmYi0+Zm9ybWF0LT5oc3ViOw0KPiAt
CWludCB2c3ViID0gZmItPmZvcm1hdC0+dnN1YjsNCj4gLQlpbnQgeCA9IHNyY194IC8gaHN1YjsN
Cj4gLQlpbnQgeSA9IHNyY195IC8gdnN1YjsNCj4gKwlpbnQgaHN1YjsNCj4gKwlpbnQgdnN1YjsN
Cj4gKwlpbnQgeDsNCj4gKwlpbnQgeTsNCj4gIAl1MzIgb2Zmc2V0Ow0KPiAgDQo+ICsJaW50ZWxf
ZmJfcGxhbmVfZ2V0X3N1YnNhbXBsaW5nKCZoc3ViLCAmdnN1YiwgZmIsIDEpOw0KPiArCXggPSBz
cmNfeCAvIGhzdWI7DQo+ICsJeSA9IHNyY195IC8gdnN1YjsNCj4gIAlpbnRlbF9hZGRfZmJfb2Zm
c2V0cygmeCwgJnksIHBsYW5lX3N0YXRlLCAxKTsNCj4gIAlvZmZzZXQgPSBpbnRlbF9wbGFuZV9j
b21wdXRlX2FsaWduZWRfb2Zmc2V0KCZ4LCAmeSwNCj4gcGxhbmVfc3RhdGUsIDEpOw0KPiAgDQo+
IEBAIC00MTU4LDcgKzQyNzMsNyBAQCBzdGF0aWMgdW5zaWduZWQgaW50IHNrbF9wbGFuZV9zdHJp
ZGVfbXVsdChjb25zdA0KPiBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiwNCj4gIAkgKiBUaGUg
c3RyaWRlIGlzIGVpdGhlciBleHByZXNzZWQgYXMgYSBtdWx0aXBsZSBvZiA2NCBieXRlcw0KPiBj
aHVua3MgZm9yDQo+ICAJICogbGluZWFyIGJ1ZmZlcnMgb3IgaW4gbnVtYmVyIG9mIHRpbGVzIGZv
ciB0aWxlZCBidWZmZXJzLg0KPiAgCSAqLw0KPiAtCWlmIChmYi0+bW9kaWZpZXIgPT0gRFJNX0ZP
Uk1BVF9NT0RfTElORUFSKQ0KPiArCWlmIChpc19zdXJmYWNlX2xpbmVhcihmYiwgY29sb3JfcGxh
bmUpKQ0KPiAgCQlyZXR1cm4gNjQ7DQo+ICAJZWxzZSBpZiAoZHJtX3JvdGF0aW9uXzkwX29yXzI3
MChyb3RhdGlvbikpDQo+ICAJCXJldHVybiBpbnRlbF90aWxlX2hlaWdodChmYiwgY29sb3JfcGxh
bmUpOw0KPiBAQCAtNDI4Niw2ICs0NDAxLDEwIEBAIHN0YXRpYyB1MzIgc2tsX3BsYW5lX2N0bF90
aWxpbmcodTY0DQo+IGZiX21vZGlmaWVyKQ0KPiAgCQlyZXR1cm4gUExBTkVfQ1RMX1RJTEVEX1k7
DQo+ICAJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9DQ1M6DQo+ICAJCXJldHVybiBQTEFO
RV9DVExfVElMRURfWSB8DQo+IFBMQU5FX0NUTF9SRU5ERVJfREVDT01QUkVTU0lPTl9FTkFCTEU7
DQo+ICsJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9HRU4xMl9SQ19DQ1M6DQo+ICsJCXJl
dHVybiBQTEFORV9DVExfVElMRURfWSB8DQo+ICsJCSAgICAgICBQTEFORV9DVExfUkVOREVSX0RF
Q09NUFJFU1NJT05fRU5BQkxFIHwNCj4gKwkJICAgICAgIFBMQU5FX0NUTF9DTEVBUl9DT0xPUl9E
SVNBQkxFOw0KPiAgCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1lmX1RJTEVEOg0KPiAgCQlyZXR1cm4g
UExBTkVfQ1RMX1RJTEVEX1lGOw0KPiAgCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1lmX1RJTEVEX0ND
UzoNCj4gQEAgLTEwMDIxLDcgKzEwMTQwLDkgQEAgc2t5bGFrZV9nZXRfaW5pdGlhbF9wbGFuZV9j
b25maWcoc3RydWN0DQo+IGludGVsX2NydGMgKmNydGMsDQo+ICAJY2FzZSBQTEFORV9DVExfVElM
RURfWToNCj4gIAkJcGxhbmVfY29uZmlnLT50aWxpbmcgPSBJOTE1X1RJTElOR19ZOw0KPiAgCQlp
ZiAodmFsICYgUExBTkVfQ1RMX1JFTkRFUl9ERUNPTVBSRVNTSU9OX0VOQUJMRSkNCj4gLQkJCWZi
LT5tb2RpZmllciA9IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0NDUzsNCj4gKwkJCWZiLT5tb2Rp
ZmllciA9IElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIgPw0KPiArCQkJCUk5MTVfRk9STUFUX01P
RF9ZX1RJTEVEX0dFTjEyX1JDX0NDUyA6DQo+ICsJCQkJSTkxNV9GT1JNQVRfTU9EX1lfVElMRURf
Q0NTOw0KPiAgCQllbHNlDQo+ICAJCQlmYi0+bW9kaWZpZXIgPSBJOTE1X0ZPUk1BVF9NT0RfWV9U
SUxFRDsNCj4gIAkJYnJlYWs7DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX3Nwcml0ZS5jDQo+IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9zcHJpdGUuYw0KPiBpbmRleCA4Mzk0NTAyYjA5MmQuLjY3YTkwMDU5OTAwZiAxMDA2NDQN
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYw0KPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jDQo+IEBAIC01
ODMsNiArNTgzLDcgQEAgc2tsX3Byb2dyYW1fcGxhbmUoc3RydWN0IGludGVsX3BsYW5lICpwbGFu
ZSwNCj4gIAljb25zdCBzdHJ1Y3QgZHJtX2ludGVsX3Nwcml0ZV9jb2xvcmtleSAqa2V5ID0gJnBs
YW5lX3N0YXRlLQ0KPiA+Y2tleTsNCj4gIAl1MzIgc3VyZl9hZGRyID0gcGxhbmVfc3RhdGUtPmNv
bG9yX3BsYW5lW2NvbG9yX3BsYW5lXS5vZmZzZXQ7DQo+ICAJdTMyIHN0cmlkZSA9IHNrbF9wbGFu
ZV9zdHJpZGUocGxhbmVfc3RhdGUsIGNvbG9yX3BsYW5lKTsNCj4gKwl1MzIgYXV4X2Rpc3QgPSBw
bGFuZV9zdGF0ZS0+Y29sb3JfcGxhbmVbMV0ub2Zmc2V0IC0gc3VyZl9hZGRyOw0KPiAgCXUzMiBh
dXhfc3RyaWRlID0gc2tsX3BsYW5lX3N0cmlkZShwbGFuZV9zdGF0ZSwgMSk7DQo+ICAJaW50IGNy
dGNfeCA9IHBsYW5lX3N0YXRlLT51YXBpLmRzdC54MTsNCj4gIAlpbnQgY3J0Y195ID0gcGxhbmVf
c3RhdGUtPnVhcGkuZHN0LnkxOw0KPiBAQCAtNjI0LDggKzYyNSwxMCBAQCBza2xfcHJvZ3JhbV9w
bGFuZShzdHJ1Y3QgaW50ZWxfcGxhbmUgKnBsYW5lLA0KPiAgCUk5MTVfV1JJVEVfRlcoUExBTkVf
U1RSSURFKHBpcGUsIHBsYW5lX2lkKSwgc3RyaWRlKTsNCj4gIAlJOTE1X1dSSVRFX0ZXKFBMQU5F
X1BPUyhwaXBlLCBwbGFuZV9pZCksIChjcnRjX3kgPDwgMTYpIHwNCj4gY3J0Y194KTsNCj4gIAlJ
OTE1X1dSSVRFX0ZXKFBMQU5FX1NJWkUocGlwZSwgcGxhbmVfaWQpLCAoc3JjX2ggPDwgMTYpIHwN
Cj4gc3JjX3cpOw0KPiAtCUk5MTVfV1JJVEVfRlcoUExBTkVfQVVYX0RJU1QocGlwZSwgcGxhbmVf
aWQpLA0KPiAtCQkgICAgICAocGxhbmVfc3RhdGUtPmNvbG9yX3BsYW5lWzFdLm9mZnNldCAtIHN1
cmZfYWRkcikNCj4gfCBhdXhfc3RyaWRlKTsNCj4gKw0KPiArCWlmIChJTlRFTF9HRU4oZGV2X3By
aXYpIDwgMTIpDQo+ICsJCWF1eF9kaXN0IHw9IGF1eF9zdHJpZGU7DQo+ICsJSTkxNV9XUklURV9G
VyhQTEFORV9BVVhfRElTVChwaXBlLCBwbGFuZV9pZCksIGF1eF9kaXN0KTsNCj4gIA0KPiAgCWlm
IChpY2xfaXNfaGRyX3BsYW5lKGRldl9wcml2LCBwbGFuZV9pZCkpDQo+ICAJCUk5MTVfV1JJVEVf
RlcoUExBTkVfQ1VTX0NUTChwaXBlLCBwbGFuZV9pZCksDQo+IHBsYW5lX3N0YXRlLT5jdXNfY3Rs
KTsNCj4gQEAgLTIxMDIsNyArMjEwNSw4IEBAIHN0YXRpYyBpbnQgc2tsX3BsYW5lX2NoZWNrX2Zi
KGNvbnN0IHN0cnVjdA0KPiBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLA0KPiAgCSAgICAo
ZmItPm1vZGlmaWVyID09IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEIHx8DQo+ICAJICAgICBmYi0+
bW9kaWZpZXIgPT0gSTkxNV9GT1JNQVRfTU9EX1lmX1RJTEVEIHx8DQo+ICAJICAgICBmYi0+bW9k
aWZpZXIgPT0gSTkxNV9GT1JNQVRfTU9EX1lfVElMRURfQ0NTIHx8DQo+IC0JICAgICBmYi0+bW9k
aWZpZXIgPT0gSTkxNV9GT1JNQVRfTU9EX1lmX1RJTEVEX0NDUykpIHsNCj4gKwkgICAgIGZiLT5t
b2RpZmllciA9PSBJOTE1X0ZPUk1BVF9NT0RfWWZfVElMRURfQ0NTIHx8DQo+ICsJICAgICBmYi0+
bW9kaWZpZXIgPT0gSTkxNV9GT1JNQVRfTU9EX1lfVElMRURfR0VOMTJfUkNfQ0NTKSkgew0KPiAg
CQlEUk1fREVCVUdfS01TKCJZL1lmIHRpbGluZyBub3Qgc3VwcG9ydGVkIGluIElGLUlEDQo+IG1v
ZGVcbiIpOw0KPiAgCQlyZXR1cm4gLUVJTlZBTDsNCj4gIAl9DQo+IEBAIC0yNTczLDcgKzI1Nzcs
OCBAQCBzdGF0aWMgY29uc3QgdTY0DQo+IHNrbF9wbGFuZV9mb3JtYXRfbW9kaWZpZXJzX2Njc1td
ID0gew0KPiAgCURSTV9GT1JNQVRfTU9EX0lOVkFMSUQNCj4gIH07DQo+ICANCj4gLXN0YXRpYyBj
b25zdCB1NjQgZ2VuMTJfcGxhbmVfZm9ybWF0X21vZGlmaWVyc19ub2Njc1tdID0gew0KPiArc3Rh
dGljIGNvbnN0IHU2NCBnZW4xMl9wbGFuZV9mb3JtYXRfbW9kaWZpZXJzX2Njc1tdID0gew0KPiAr
CUk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDUywNCj4gIAlJOTE1X0ZPUk1BVF9N
T0RfWV9USUxFRCwNCj4gIAlJOTE1X0ZPUk1BVF9NT0RfWF9USUxFRCwNCj4gIAlEUk1fRk9STUFU
X01PRF9MSU5FQVIsDQo+IEBAIC0yNzQ0LDYgKzI3NDksNyBAQCBzdGF0aWMgYm9vbA0KPiBnZW4x
Ml9wbGFuZV9mb3JtYXRfbW9kX3N1cHBvcnRlZChzdHJ1Y3QgZHJtX3BsYW5lICpfcGxhbmUsDQo+
ICAJY2FzZSBEUk1fRk9STUFUX01PRF9MSU5FQVI6DQo+ICAJY2FzZSBJOTE1X0ZPUk1BVF9NT0Rf
WF9USUxFRDoNCj4gIAljYXNlIEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEOg0KPiArCWNhc2UgSTkx
NV9GT1JNQVRfTU9EX1lfVElMRURfR0VOMTJfUkNfQ0NTOg0KPiAgCQlicmVhazsNCj4gIAlkZWZh
dWx0Og0KPiAgCQlyZXR1cm4gZmFsc2U7DQo+IEBAIC0yNzU0LDYgKzI3NjAsOSBAQCBzdGF0aWMg
Ym9vbA0KPiBnZW4xMl9wbGFuZV9mb3JtYXRfbW9kX3N1cHBvcnRlZChzdHJ1Y3QgZHJtX3BsYW5l
ICpfcGxhbmUsDQo+ICAJY2FzZSBEUk1fRk9STUFUX1hCR1I4ODg4Og0KPiAgCWNhc2UgRFJNX0ZP
Uk1BVF9BUkdCODg4ODoNCj4gIAljYXNlIERSTV9GT1JNQVRfQUJHUjg4ODg6DQo+ICsJCWlmIChp
c19jY3NfbW9kaWZpZXIobW9kaWZpZXIpKQ0KPiArCQkJcmV0dXJuIHRydWU7DQo+ICsJCS8qIGZh
bGwgdGhyb3VnaCAqLw0KPiAgCWNhc2UgRFJNX0ZPUk1BVF9SR0I1NjU6DQo+ICAJY2FzZSBEUk1f
Rk9STUFUX1hSR0IyMTAxMDEwOg0KPiAgCWNhc2UgRFJNX0ZPUk1BVF9YQkdSMjEwMTAxMDoNCj4g
QEAgLTI5NjMsMTMgKzI5NzIsMTEgQEAgc2tsX3VuaXZlcnNhbF9wbGFuZV9jcmVhdGUoc3RydWN0
DQo+IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LA0KPiAgCQlmb3JtYXRzID0gc2tsX2dldF9w
bGFuZV9mb3JtYXRzKGRldl9wcml2LCBwaXBlLA0KPiAgCQkJCQkJcGxhbmVfaWQsDQo+ICZudW1f
Zm9ybWF0cyk7DQo+ICANCj4gKwlwbGFuZS0+aGFzX2NjcyA9IHNrbF9wbGFuZV9oYXNfY2NzKGRl
dl9wcml2LCBwaXBlLCBwbGFuZV9pZCk7DQo+ICAJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0g
MTIpIHsNCj4gLQkJLyogVE9ETzogSW1wbGVtZW50IHN1cHBvcnQgZm9yIGdlbi0xMiBDQ1MgbW9k
aWZpZXJzICovDQo+IC0JCXBsYW5lLT5oYXNfY2NzID0gZmFsc2U7DQo+IC0JCW1vZGlmaWVycyA9
IGdlbjEyX3BsYW5lX2Zvcm1hdF9tb2RpZmllcnNfbm9jY3M7DQo+ICsJCW1vZGlmaWVycyA9IGdl
bjEyX3BsYW5lX2Zvcm1hdF9tb2RpZmllcnNfY2NzOw0KPiAgCQlwbGFuZV9mdW5jcyA9ICZnZW4x
Ml9wbGFuZV9mdW5jczsNCj4gIAl9IGVsc2Ugew0KPiAtCQlwbGFuZS0+aGFzX2NjcyA9IHNrbF9w
bGFuZV9oYXNfY2NzKGRldl9wcml2LCBwaXBlLA0KPiBwbGFuZV9pZCk7DQo+ICAJCWlmIChwbGFu
ZS0+aGFzX2NjcykNCj4gIAkJCW1vZGlmaWVycyA9IHNrbF9wbGFuZV9mb3JtYXRfbW9kaWZpZXJz
X2NjczsNCj4gIAkJZWxzZQ0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9yZWcuaA0KPiBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgNCj4gaW5kZXggY2Ji
NDY4OWFmNDMyLi5iYmZlZGViMDBiN2YgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVnLmgNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaA0K
PiBAQCAtNjgwMCw2ICs2ODAwLDcgQEAgZW51bSB7DQo+ICAjZGVmaW5lICAgUExBTkVfQ1RMX1lV
VjQyMl9WWVVZCQkJKDMgPDwgMTYpDQo+ICAjZGVmaW5lICAgUExBTkVfQ1RMX1JFTkRFUl9ERUNP
TVBSRVNTSU9OX0VOQUJMRQkoMSA8PCAxNSkNCj4gICNkZWZpbmUgICBQTEFORV9DVExfVFJJQ0tM
RV9GRUVEX0RJU0FCTEUJKDEgPDwgMTQpDQo+ICsjZGVmaW5lICAgUExBTkVfQ1RMX0NMRUFSX0NP
TE9SX0RJU0FCTEUJCSgxIDw8IDEzKSAvKg0KPiBUR0wrICovDQo+ICAjZGVmaW5lICAgUExBTkVf
Q1RMX1BMQU5FX0dBTU1BX0RJU0FCTEUJCSgxIDw8IDEzKSAvKg0KPiBQcmUtR0xLICovDQo+ICAj
ZGVmaW5lICAgUExBTkVfQ1RMX1RJTEVEX01BU0sJCQkoMHg3IDw8IDEwKQ0KPiAgI2RlZmluZSAg
IFBMQU5FX0NUTF9USUxFRF9MSU5FQVIJCSgwIDw8IDEwKQ0KX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 56C2D2518B
	for <lists+intel-gfx@lfdr.de>; Tue, 21 May 2019 16:09:28 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A74CD89359;
	Tue, 21 May 2019 14:09:25 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7515289349
 for <intel-gfx@lists.freedesktop.org>; Tue, 21 May 2019 14:09:24 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 21 May 2019 07:09:24 -0700
X-ExtLoop1: 1
Received: from ylukoyan-mobl.ccr.corp.intel.com (HELO
 delly.ger.corp.intel.com) ([10.251.94.80])
 by fmsmga005.fm.intel.com with ESMTP; 21 May 2019 07:09:23 -0700
From: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 21 May 2019 15:08:52 +0100
Message-Id: <20190521140855.3957-3-lionel.g.landwerlin@intel.com>
X-Mailer: git-send-email 2.21.0.392.gf8f6787159e
In-Reply-To: <20190521140855.3957-1-lionel.g.landwerlin@intel.com>
References: <20190521140855.3957-1-lionel.g.landwerlin@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 2/5] drm/i915/perf: allow holding preemption on
 filtered ctx
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2Ugd291bGQgbGlrZSB0byBtYWtlIHVzZSBvZiBwZXJmIGluIFZ1bGthbi4gVGhlIFZ1bGthbiBB
UEkgaXMgbXVjaApsb3dlciBsZXZlbCB0aGFuIE9wZW5HTCwgd2l0aCBhcHBsaWNhdGlvbnMgZGly
ZWN0bHkgZXhwb3NlZCB0byB0aGUKY29uY2VwdCBvZiBjb21tYW5kIGJ1ZmZlcnMgKHByZXR0eSBt
dWNoIGVxdWl2YWxlbnQgdG8gb3VyIGJhdGNoCmJ1ZmZlcnMpLiBJbiBWdWxrYW4sIHF1ZXJpZXMg
YXJlIGFsd2F5cyBsaW1pdGVkIGluIHNjb3BlIHRvIGEgY29tbWFuZApidWZmZXIuIEluIE9wZW5H
TCwgdGhlIGxhY2sgb2YgY29tbWFuZCBidWZmZXIgY29uY2VwdCBtZWFudCB0aGF0CnF1ZXJpZXMn
IGR1cmF0aW9uIGNvdWxkIHNwYW4gbXVsdGlwbGUgY29tbWFuZCBidWZmZXJzLgoKV2l0aCB0aGF0
IHJlc3RyaWN0aW9uIGdvbmUgaW4gVnVsa2FuLCB3ZSB3b3VsZCBsaWtlIHRvIHNpbXBsaWZ5Cm1l
YXN1cmluZyBwZXJmb3JtYW5jZSBqdXN0IGJ5IG1lYXN1cmluZyB0aGUgZGVsdGFzIGJldHdlZW4g
dGhlIGNvdW50ZXIKc25hcHNob3RzIHdyaXR0ZW4gYnkgMiBNSV9SRUNPUkRfUEVSRl9DT1VOVCBj
b21tYW5kcywgcmF0aGVyIHRoYW4gdGhlCm1vcmUgY29tcGxleCBzY2hlbWUgd2UgY3VycmVudGx5
IGhhdmUgaW4gdGhlIEdMIGRyaXZlciwgdXNpbmcgMgpNSV9SRUNPUkRfUEVSRl9DT1VOVCBjb21t
YW5kcyBhbmQgZG9pbmcgc29tZSBwb3N0IHByb2Nlc3Npbmcgb24gdGhlCnN0cmVhbSBvZiBPQSBy
ZXBvcnRzLCBjb21pbmcgZnJvbSB0aGUgZ2xvYmFsIE9BIGJ1ZmZlciwgdG8gcmVtb3ZlIGFueQp1
bnJlbGF0ZWQgZGVsdGFzIGluIGJldHdlZW4gdGhlIDIgTUlfUkVDT1JEX1BFUkZfQ09VTlQuCgpE
aXNhYmxpbmcgcHJlZW1wdGlvbiBvbmx5IGFwcGx5IHRvIGEgc2luZ2xlIGNvbnRleHQgd2l0aCB3
aGljaCB3YW50IHRvCnF1ZXJ5IHBlcmZvcm1hbmNlIGNvdW50ZXJzIGZvciBhbmQgaXMgY29uc2lk
ZXJlZCBhIHByaXZpbGVnZWQKb3BlcmF0aW9uLCBieSBkZWZhdWx0IHByb3RlY3RlZCBieSBDQVBf
U1lTX0FETUlOLiBJdCBpcyBwb3NzaWJsZSB0bwplbmFibGUgaXQgZm9yIGEgbm9ybWFsIHVzZXIg
YnkgZGlzYWJsaW5nIHRoZSBwYXJhbm9pZCBzdHJlYW0gc2V0dGluZy4KCnYyOiBTdG9yZSBwcmVl
bXB0aW9uIHNldHRpbmcgaW4gaW50ZWxfY29udGV4dCAoQ2hyaXMpCgpTaWduZWQtb2ZmLWJ5OiBM
aW9uZWwgTGFuZHdlcmxpbiA8bGlvbmVsLmcubGFuZHdlcmxpbkBpbnRlbC5jb20+Ci0tLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jICAgICAgIHwgIDEgKwogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBlcy5oIHwgIDMgKysKIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2Rydi5jICAgICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9wZXJmLmMgICAgICAgICAgICAgIHwgMzUgKysrKysrKysrKysrKysrLS0t
LQogaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oICAgICAgICAgICAgICAgICAgIHwgMTAgKysr
KysrCiA2IGZpbGVzIGNoYW5nZWQsIDQ0IGluc2VydGlvbnMoKyksIDkgZGVsZXRpb25zKC0pCgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jCmluZGV4IDViMzFlMWUwNWRkZC4u
NjhhNGI4ODhmYjFhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9j
b250ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jCkBA
IC0xMTcsNiArMTE3LDcgQEAgaW50ZWxfY29udGV4dF9pbml0KHN0cnVjdCBpbnRlbF9jb250ZXh0
ICpjZSwKIAljZS0+b3BzID0gZW5naW5lLT5jb3BzOwogCWNlLT5zc2V1ID0gZW5naW5lLT5zc2V1
OwogCWNlLT5zYXR1cmF0ZWQgPSAwOworCWNlLT5hcmJfZW5hYmxlID0gTUlfQVJCX0VOQUJMRTsK
IAogCUlOSVRfTElTVF9IRUFEKCZjZS0+c2lnbmFsX2xpbmspOwogCUlOSVRfTElTVF9IRUFEKCZj
ZS0+c2lnbmFscyk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9j
b250ZXh0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0X3R5
cGVzLmgKaW5kZXggOTYzYTMxMjQzMGU2Li4wN2Y1ODZlMzYwOGQgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0X3R5cGVzLmgKQEAgLTY1LDYgKzY1LDkgQEAgc3Ry
dWN0IGludGVsX2NvbnRleHQgewogCiAJLyoqIHNzZXU6IENvbnRyb2wgZXUvc2xpY2UgcGFydGl0
aW9uaW5nICovCiAJc3RydWN0IGludGVsX3NzZXUgc3NldTsKKworCS8qKiBhcmJfZW5hYmxlOiBD
b250cm9sIHByZWVtcHRpb24gKi8KKwl1MzIgYXJiX2VuYWJsZTsKIH07CiAKICNlbmRpZiAvKiBf
X0lOVEVMX0NPTlRFWFRfVFlQRVNfXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpp
bmRleCBmMjYzYTgzNzQyNzMuLjJhZDk1OTc3ZjdhOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfbHJjLmMKQEAgLTIwODUsNyArMjA4NSw3IEBAIHN0YXRpYyBpbnQgZ2VuOV9lbWl0X2JiX3N0
YXJ0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAogCWlmIChJU19FUlIoY3MpKQogCQlyZXR1cm4g
UFRSX0VSUihjcyk7CiAKLQkqY3MrKyA9IE1JX0FSQl9PTl9PRkYgfCBNSV9BUkJfRU5BQkxFOwor
CSpjcysrID0gTUlfQVJCX09OX09GRiB8IHJxLT5od19jb250ZXh0LT5hcmJfZW5hYmxlOwogCiAJ
KmNzKysgPSBNSV9CQVRDSF9CVUZGRVJfU1RBUlRfR0VOOCB8CiAJCShmbGFncyAmIEk5MTVfRElT
UEFUQ0hfU0VDVVJFID8gMCA6IEJJVCg4KSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwppbmRleCBm
MzA5YTBiMmNjZmMuLjU4NzFlMGNmYmFiMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCkBAIC00
NzAsNyArNDcwLDcgQEAgc3RhdGljIGludCBpOTE1X2dldHBhcmFtX2lvY3RsKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJCXZhbHVlID0gSU5URUxfSU5GTyhkZXZfcHJpdikt
Pmhhc19jb2hlcmVudF9nZ3R0OwogCQlicmVhazsKIAljYXNlIEk5MTVfUEFSQU1fUEVSRl9SRVZJ
U0lPTjoKLQkJdmFsdWUgPSAxOworCQl2YWx1ZSA9IDI7CiAJCWJyZWFrOwogCWRlZmF1bHQ6CiAJ
CURSTV9ERUJVRygiVW5rbm93biBwYXJhbWV0ZXIgJWRcbiIsIHBhcmFtLT5wYXJhbSk7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfcGVyZi5jCmluZGV4IGM0OTk1ZDVhMTZkMi4uOGM3ZmE3ZjcwMTRiIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3BlcmYuYwpAQCAtMzU1LDYgKzM1NSw3IEBAIHN0cnVjdCBwZXJmX29w
ZW5fcHJvcGVydGllcyB7CiAJdTMyIHNhbXBsZV9mbGFnczsKIAogCXU2NCBzaW5nbGVfY29udGV4
dDoxOworCXU2NCBjb250ZXh0X2Rpc2FibGVfcHJlZW1wdGlvbjoxOwogCXU2NCBjdHhfaGFuZGxl
OwogCiAJLyogT0Egc2FtcGxpbmcgc3RhdGUgKi8KQEAgLTEyMDEsNyArMTIwMiw4IEBAIHN0YXRp
YyBpbnQgaTkxNV9vYV9yZWFkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCiB9CiAK
IHN0YXRpYyBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqb2FfcGluX2NvbnRleHQoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmk5MTUsCi0JCQkJCSAgICBzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4
KQorCQkJCQkgICAgc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwKKwkJCQkJICAgIGJvb2wg
ZGlzYWJsZV9wcmVlbXB0aW9uKQogewogCXN0cnVjdCBpOTE1X2dlbV9lbmdpbmVzX2l0ZXIgaXQ7
CiAJc3RydWN0IGludGVsX2NvbnRleHQgKmNlOwpAQCAtMTIyMiw2ICsxMjI0LDcgQEAgc3RhdGlj
IHN0cnVjdCBpbnRlbF9jb250ZXh0ICpvYV9waW5fY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSwKIAkJZXJyID0gaW50ZWxfY29udGV4dF9waW4oY2UpOwogCQlpZiAoZXJyID09
IDApIHsKIAkJCWk5MTUtPnBlcmYub2EucGlubmVkX2N0eCA9IGNlOworCQkJY2UtPmFyYl9lbmFi
bGUgPSBNSV9BUkJfRElTQUJMRTsKIAkJCWJyZWFrOwogCQl9CiAJfQpAQCAtMTIzNywxOSArMTI0
MCwyMiBAQCBzdGF0aWMgc3RydWN0IGludGVsX2NvbnRleHQgKm9hX3Bpbl9jb250ZXh0KHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogLyoqCiAgKiBvYV9nZXRfcmVuZGVyX2N0eF9pZCAt
IGRldGVybWluZSBhbmQgaG9sZCBjdHggaHcgaWQKICAqIEBzdHJlYW06IEFuIGk5MTUtcGVyZiBz
dHJlYW0gb3BlbmVkIGZvciBPQSBtZXRyaWNzCisgKiBAZGlzYWJsZV9wcmVlbXB0aW9uOiBXaGV0
aGVyIHRvIGRpc2FibGUgcHJlZW1wdGlvbiBvbiB0aGUgY29udGV4dAogICoKICAqIERldGVybWlu
ZSB0aGUgcmVuZGVyIGNvbnRleHQgaHcgaWQsIGFuZCBlbnN1cmUgaXQgcmVtYWlucyBmaXhlZCBm
b3IgdGhlCiAgKiBsaWZldGltZSBvZiB0aGUgc3RyZWFtLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSBk
b24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0Ci0gKiB1cGRhdGluZyB0aGUgY29udGV4dCBJRCBpbiBP
QUNPTlRST0wgb24gdGhlIGZseS4KKyAqIHVwZGF0aW5nIHRoZSBjb250ZXh0IElEIGluIE9BQ09O
VFJPTCBvbiB0aGUgZmx5LiBBbHNvIGRpc2FibGUgcHJlZW1wdGlvbiBvbgorICogdGhlIGNvbnRl
eHQgaWYgbmVlZGVkLgogICoKICAqIFJldHVybnM6IHplcm8gb24gc3VjY2VzcyBvciBhIG5lZ2F0
aXZlIGVycm9yIGNvZGUKICAqLwotc3RhdGljIGludCBvYV9nZXRfcmVuZGVyX2N0eF9pZChzdHJ1
Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQorc3RhdGljIGludCBvYV9nZXRfcmVuZGVyX2N0
eF9pZChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAorCQkJCWJvb2wgZGlzYWJsZV9w
cmVlbXB0aW9uKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gc3RyZWFtLT5k
ZXZfcHJpdjsKIAlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2U7CiAKLQljZSA9IG9hX3Bpbl9jb250
ZXh0KGk5MTUsIHN0cmVhbS0+Y3R4KTsKKwljZSA9IG9hX3Bpbl9jb250ZXh0KGk5MTUsIHN0cmVh
bS0+Y3R4LCBkaXNhYmxlX3ByZWVtcHRpb24pOwogCWlmIChJU19FUlIoY2UpKQogCQlyZXR1cm4g
UFRSX0VSUihjZSk7CiAKQEAgLTEzMzcsNiArMTM0Myw3IEBAIHN0YXRpYyB2b2lkIG9hX3B1dF9y
ZW5kZXJfY3R4X2lkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiAJY2UgPSBmZXRj
aF9hbmRfemVybygmZGV2X3ByaXYtPnBlcmYub2EucGlubmVkX2N0eCk7CiAJaWYgKGNlKSB7CiAJ
CW11dGV4X2xvY2soJmRldl9wcml2LT5kcm0uc3RydWN0X211dGV4KTsKKwkJY2UtPmFyYl9lbmFi
bGUgPSBNSV9BUkJfRU5BQkxFOwogCQlpbnRlbF9jb250ZXh0X3VucGluKGNlKTsKIAkJbXV0ZXhf
dW5sb2NrKCZkZXZfcHJpdi0+ZHJtLnN0cnVjdF9tdXRleCk7CiAJfQpAQCAtMjA4NSw3ICsyMDky
LDcgQEAgc3RhdGljIGludCBpOTE1X29hX3N0cmVhbV9pbml0KHN0cnVjdCBpOTE1X3BlcmZfc3Ry
ZWFtICpzdHJlYW0sCiAJCWRldl9wcml2LT5wZXJmLm9hLnBlcmlvZF9leHBvbmVudCA9IHByb3Bz
LT5vYV9wZXJpb2RfZXhwb25lbnQ7CiAKIAlpZiAoc3RyZWFtLT5jdHgpIHsKLQkJcmV0ID0gb2Ff
Z2V0X3JlbmRlcl9jdHhfaWQoc3RyZWFtKTsKKwkJcmV0ID0gb2FfZ2V0X3JlbmRlcl9jdHhfaWQo
c3RyZWFtLCBwcm9wcy0+Y29udGV4dF9kaXNhYmxlX3ByZWVtcHRpb24pOwogCQlpZiAocmV0KSB7
CiAJCQlEUk1fREVCVUcoIkludmFsaWQgY29udGV4dCBpZCB0byBmaWx0ZXIgd2l0aFxuIik7CiAJ
CQlyZXR1cm4gcmV0OwpAQCAtMjU4Myw2ICsyNTkwLDE1IEBAIGk5MTVfcGVyZl9vcGVuX2lvY3Rs
X2xvY2tlZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCX0KIAl9CiAKKwlp
ZiAocHJvcHMtPmNvbnRleHRfZGlzYWJsZV9wcmVlbXB0aW9uKSB7CisJCWlmICghcHJvcHMtPnNp
bmdsZV9jb250ZXh0KSB7CisJCQlEUk1fREVCVUcoInByZWVtcHRpb24gZGlzYWJsZSB3aXRoIG5v
IGNvbnRleHRcbiIpOworCQkJcmV0ID0gLUVJTlZBTDsKKwkJCWdvdG8gZXJyOworCQl9CisJCXBy
aXZpbGVnZWRfb3AgPSB0cnVlOworCX0KKwogCS8qCiAJICogT24gSGFzd2VsbCB0aGUgT0EgdW5p
dCBzdXBwb3J0cyBjbG9jayBnYXRpbmcgb2ZmIGZvciBhIHNwZWNpZmljCiAJICogY29udGV4dCBh
bmQgaW4gdGhpcyBtb2RlIHRoZXJlJ3Mgbm8gdmlzaWJpbGl0eSBvZiBtZXRyaWNzIGZvciB0aGUK
QEAgLTI1OTcsOCArMjYxMywxMCBAQCBpOTE1X3BlcmZfb3Blbl9pb2N0bF9sb2NrZWQoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCSAqIE1JX1JFUE9SVF9QRVJGX0NPVU5UIGNv
bW1hbmRzIGFuZCBzbyBjb25zaWRlciBpdCBhIHByaXZpbGVnZWQgb3AgdG8KIAkgKiBlbmFibGUg
dGhlIE9BIHVuaXQgYnkgZGVmYXVsdC4KIAkgKi8KLQlpZiAoSVNfSEFTV0VMTChkZXZfcHJpdikg
JiYgc3BlY2lmaWNfY3R4KQorCWlmIChJU19IQVNXRUxMKGRldl9wcml2KSAmJiBzcGVjaWZpY19j
dHggJiYKKwkgICAgIXByb3BzLT5jb250ZXh0X2Rpc2FibGVfcHJlZW1wdGlvbikgewogCQlwcml2
aWxlZ2VkX29wID0gZmFsc2U7CisJfQogCiAJLyogU2ltaWxhciB0byBwZXJmJ3Mga2VybmVsLnBl
cmZfcGFyYW5vaWRfY3B1IHN5c2N0bCBvcHRpb24KIAkgKiB3ZSBjaGVjayBhIGRldi5pOTE1LnBl
cmZfc3RyZWFtX3BhcmFub2lkIHN5c2N0bCBvcHRpb24KQEAgLTI2MDcsNyArMjYyNSw3IEBAIGk5
MTVfcGVyZl9vcGVuX2lvY3RsX2xvY2tlZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsCiAJICovCiAJaWYgKHByaXZpbGVnZWRfb3AgJiYKIAkgICAgaTkxNV9wZXJmX3N0cmVhbV9w
YXJhbm9pZCAmJiAhY2FwYWJsZShDQVBfU1lTX0FETUlOKSkgewotCQlEUk1fREVCVUcoIkluc3Vm
ZmljaWVudCBwcml2aWxlZ2VzIHRvIG9wZW4gc3lzdGVtLXdpZGUgaTkxNSBwZXJmIHN0cmVhbVxu
Iik7CisJCURSTV9ERUJVRygiSW5zdWZmaWNpZW50IHByaXZpbGVnZXMgdG8gb3BlbiBpOTE1IHBl
cmYgc3RyZWFtXG4iKTsKIAkJcmV0ID0gLUVBQ0NFUzsKIAkJZ290byBlcnJfY3R4OwogCX0KQEAg
LTI3OTksNiArMjgxNyw5IEBAIHN0YXRpYyBpbnQgcmVhZF9wcm9wZXJ0aWVzX3VubG9ja2VkKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJCXByb3BzLT5vYV9wZXJpb2RpYyA9
IHRydWU7CiAJCQlwcm9wcy0+b2FfcGVyaW9kX2V4cG9uZW50ID0gdmFsdWU7CiAJCQlicmVhazsK
KwkJY2FzZSBEUk1fSTkxNV9QRVJGX1BST1BfSE9MRF9QUkVFTVBUSU9OOgorCQkJcHJvcHMtPmNv
bnRleHRfZGlzYWJsZV9wcmVlbXB0aW9uID0gdmFsdWUgIT0gMCA/IDEgOiAwOworCQkJYnJlYWs7
CiAJCWNhc2UgRFJNX0k5MTVfUEVSRl9QUk9QX01BWDoKIAkJCU1JU1NJTkdfQ0FTRShpZCk7CiAJ
CQlyZXR1cm4gLUVJTlZBTDsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0u
aCBiL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAppbmRleCBhZDhhM2U0ZjYzNTUuLjU2MDFk
YzY4ODI5NSAxMDA2NDQKLS0tIGEvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCisrKyBiL2lu
Y2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaApAQCAtMTcyNyw2ICsxNzI3LDE2IEBAIGVudW0gZHJt
X2k5MTVfcGVyZl9wcm9wZXJ0eV9pZCB7CiAJICovCiAJRFJNX0k5MTVfUEVSRl9QUk9QX09BX0VY
UE9ORU5ULAogCisJLyoqCisJICogU3BlY2lmeWluZyB0aGlzIHByb3BlcnR5IGlzIG9ubHkgdmFs
aWQgd2hlbiBzcGVjaWZ5IGEgY29udGV4dCB0bworCSAqIGZpbHRlciB3aXRoIERSTV9JOTE1X1BF
UkZfUFJPUF9DVFhfSEFORExFLiBTcGVjaWZ5aW5nIHRoaXMgcHJvcGVydHkKKwkgKiB3aWxsIGhv
bGQgcHJlZW1wdGlvbiBvZiB0aGUgcGFydGljdWxhciBjb250ZXh0IHdlIHdhbnQgdG8gZ2F0aGVy
CisJICogcGVyZm9ybWFuY2UgZGF0YSBhYm91dC4KKwkgKgorCSAqIFRoaXMgcHJvcGVydHkgaXMg
YXZhaWxhYmxlIGluIHBlcmYgcmV2aXNpb24gMi4KKwkgKi8KKwlEUk1fSTkxNV9QRVJGX1BST1Bf
SE9MRF9QUkVFTVBUSU9OLAorCiAJRFJNX0k5MTVfUEVSRl9QUk9QX01BWCAvKiBub24tQUJJICov
CiB9OwogCi0tIAoyLjIxLjAuMzkyLmdmOGY2Nzg3MTU5ZQoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

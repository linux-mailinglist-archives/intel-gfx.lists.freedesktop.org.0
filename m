Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 805A62EAF2D
	for <lists+intel-gfx@lfdr.de>; Tue,  5 Jan 2021 16:46:22 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 53B4E6E156;
	Tue,  5 Jan 2021 15:45:51 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mblankhorst.nl (mblankhorst.nl [141.105.120.124])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E35216E19B
 for <intel-gfx@lists.freedesktop.org>; Tue,  5 Jan 2021 15:45:43 +0000 (UTC)
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  5 Jan 2021 16:34:59 +0100
Message-Id: <20210105153558.134272-6-maarten.lankhorst@linux.intel.com>
X-Mailer: git-send-email 2.30.0.rc1
In-Reply-To: <20210105153558.134272-1-maarten.lankhorst@linux.intel.com>
References: <20210105153558.134272-1-maarten.lankhorst@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v6 05/64] drm/i915: Ensure we hold the object
 mutex in pin correctly.
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Thomas=20Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Q3VycmVudGx5IHdlIGhhdmUgYSBsb3Qgb2YgcGxhY2VzIHdoZXJlIHdlIGhvbGQgdGhlIGdlbSBv
YmplY3QgbG9jaywKYnV0IGhhdmVuJ3QgeWV0IGJlZW4gY29udmVydGVkIHRvIHRoZSB3dyBkYW5j
ZS4gQ29tcGxhaW4gbG91ZGx5IGFib3V0CnRob3NlIHBsYWNlcy4KCmk5MTVfdm1hX3BpbiBzaG91
bGRuJ3QgaGF2ZSB0aGUgb2JqIGxvY2sgaGVsZCwgc28gd2UgY2FuIGRvIGEgd3cgZGFuY2UsCndo
aWxlIGk5MTVfdm1hX3Bpbl93dyBzaG91bGQuCgpTaWduZWQtb2ZmLWJ5OiBNYWFydGVuIExhbmto
b3JzdCA8bWFhcnRlbi5sYW5raG9yc3RAbGludXguaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogVGhv
bWFzIEhlbGxzdHLDtm0gPHRob21hcy5oZWxsc3Ryb21AbGludXguaW50ZWwuY29tPiAjaXJjCi0t
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVuZGVyc3RhdGUuYyB8ICAyICstCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jICAgICAgICAgICAgIHwgMTEgKysrKysrKysr
Ky0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmggICAgICAgICAgICAgfCAgMyArKysK
IDMgZmlsZXMgY2hhbmdlZCwgMTQgaW5zZXJ0aW9ucygrKSwgMiBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZW5kZXJzdGF0ZS5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVuZGVyc3RhdGUuYwppbmRleCBjYTgxNmJhMjIx
OTcuLjMzNGM1NTc2NzNkZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfcmVuZGVyc3RhdGUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZW5k
ZXJzdGF0ZS5jCkBAIC0xOTcsNyArMTk3LDcgQEAgaW50IGludGVsX3JlbmRlcnN0YXRlX2luaXQo
c3RydWN0IGludGVsX3JlbmRlcnN0YXRlICpzbywKIAlpZiAoZXJyKQogCQlnb3RvIGVycl9jb250
ZXh0OwogCi0JZXJyID0gaTkxNV92bWFfcGluKHNvLT52bWEsIDAsIDAsIFBJTl9HTE9CQUwgfCBQ
SU5fSElHSCk7CisJZXJyID0gaTkxNV92bWFfcGluX3d3KHNvLT52bWEsICZzby0+d3csIDAsIDAs
IFBJTl9HTE9CQUwgfCBQSU5fSElHSCk7CiAJaWYgKGVycikKIAkJZ290byBlcnJfY29udGV4dDsK
IApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfdm1hLmMKaW5kZXggY2FhOWIwNDE2MTZiLi43MzEwODkzMDg2Zjcg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYwpAQCAtODY1LDYgKzg2NSw4IEBAIGludCBpOTE1X3Zt
YV9waW5fd3coc3RydWN0IGk5MTVfdm1hICp2bWEsIHN0cnVjdCBpOTE1X2dlbV93d19jdHggKnd3
LAogI2lmZGVmIENPTkZJR19QUk9WRV9MT0NLSU5HCiAJaWYgKGRlYnVnX2xvY2tzICYmIGxvY2tk
ZXBfaXNfaGVsZCgmdm1hLT52bS0+aTkxNS0+ZHJtLnN0cnVjdF9tdXRleCkpCiAJCVdBUk5fT04o
IXd3KTsKKwlpZiAoZGVidWdfbG9ja3MgJiYgd3cgJiYgdm1hLT5yZXN2KQorCQlhc3NlcnRfdm1h
X2hlbGQodm1hKTsKICNlbmRpZgogCiAJQlVJTERfQlVHX09OKFBJTl9HTE9CQUwgIT0gSTkxNV9W
TUFfR0xPQkFMX0JJTkQpOwpAQCAtMTAyMCw4ICsxMDIyLDE1IEBAIGludCBpOTE1X2dndHRfcGlu
KHN0cnVjdCBpOTE1X3ZtYSAqdm1hLCBzdHJ1Y3QgaTkxNV9nZW1fd3dfY3R4ICp3dywKIAogCUdF
TV9CVUdfT04oIWk5MTVfdm1hX2lzX2dndHQodm1hKSk7CiAKKyNpZmRlZiBDT05GSUdfTE9DS0RF
UAorCVdBUk5fT04oIXd3ICYmIHZtYS0+cmVzdiAmJiBkbWFfcmVzdl9oZWxkKHZtYS0+cmVzdikp
OworI2VuZGlmCisKIAlkbyB7Ci0JCWVyciA9IGk5MTVfdm1hX3Bpbl93dyh2bWEsIHd3LCAwLCBh
bGlnbiwgZmxhZ3MgfCBQSU5fR0xPQkFMKTsKKwkJaWYgKHd3KQorCQkJZXJyID0gaTkxNV92bWFf
cGluX3d3KHZtYSwgd3csIDAsIGFsaWduLCBmbGFncyB8IFBJTl9HTE9CQUwpOworCQllbHNlCisJ
CQllcnIgPSBpOTE1X3ZtYV9waW4odm1hLCAwLCBhbGlnbiwgZmxhZ3MgfCBQSU5fR0xPQkFMKTsK
IAkJaWYgKGVyciAhPSAtRU5PU1BDKSB7CiAJCQlpZiAoIWVycikgewogCQkJCWVyciA9IGk5MTVf
dm1hX3dhaXRfZm9yX2JpbmQodm1hKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfdm1hLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5oCmluZGV4IDViM2Ez
YzY1MzQ1NC4uODM4YmJiZWIxMWNjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3ZtYS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmgKQEAgLTI0Myw2
ICsyNDMsOSBAQCBpOTE1X3ZtYV9waW5fd3coc3RydWN0IGk5MTVfdm1hICp2bWEsIHN0cnVjdCBp
OTE1X2dlbV93d19jdHggKnd3LAogc3RhdGljIGlubGluZSBpbnQgX19tdXN0X2NoZWNrCiBpOTE1
X3ZtYV9waW4oc3RydWN0IGk5MTVfdm1hICp2bWEsIHU2NCBzaXplLCB1NjQgYWxpZ25tZW50LCB1
NjQgZmxhZ3MpCiB7CisjaWZkZWYgQ09ORklHX0xPQ0tERVAKKwlXQVJOX09OX09OQ0Uodm1hLT5y
ZXN2ICYmIGRtYV9yZXN2X2hlbGQodm1hLT5yZXN2KSk7CisjZW5kaWYKIAlyZXR1cm4gaTkxNV92
bWFfcGluX3d3KHZtYSwgTlVMTCwgc2l6ZSwgYWxpZ25tZW50LCBmbGFncyk7CiB9CiAKLS0gCjIu
MzAuMC5yYzEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B9B523B8A2
	for <lists+intel-gfx@lfdr.de>; Mon, 10 Jun 2019 17:54:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C494289183;
	Mon, 10 Jun 2019 15:54:33 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BA52689182
 for <Intel-gfx@lists.freedesktop.org>; Mon, 10 Jun 2019 15:54:31 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Jun 2019 08:54:31 -0700
X-ExtLoop1: 1
Received: from jwwillia-mobl1.amr.corp.intel.com (HELO localhost.localdomain)
 ([10.252.8.43])
 by fmsmga001.fm.intel.com with ESMTP; 10 Jun 2019 08:54:30 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Mon, 10 Jun 2019 16:54:10 +0100
Message-Id: <20190610155419.23723-6-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190610155419.23723-1-tvrtko.ursulin@linux.intel.com>
References: <20190610155419.23723-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC 05/14] drm/i915: Convert i915_gem_init_swizzling
 to intel_gt
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KClN0YXJ0IHVz
aW5nIHRoZSBuZXdseSBpbnRyb2R1Y2VkIHN0cnVjdCBpbnRlbF9ndCB0byBmdXNlIHRvZ2V0aGVy
IGNvcnJlY3QKbG9naWNhbCBpbml0IGZsb3cgd2l0aCB1bmNvcmUgZm9yIG1vcmUgcmVtb3ZhbCBv
ZiBpbXBsaWNpdCBkZXZfcHJpdiBpbgptbWlvIGFjY2Vzcy4KClNpZ25lZC1vZmYtYnk6IFR2cnRr
byBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvTWFrZWZpbGUgICAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2d0LmMgfCA0NCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2d0LmggfCAgMiArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuYyAgICB8ICA1ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgfCAg
MSAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jICAgIHwgMjYgKystLS0tLS0tLS0t
LS0tLS0tCiA2IGZpbGVzIGNoYW5nZWQsIDUyIGluc2VydGlvbnMoKyksIDI3IGRlbGV0aW9ucygt
KQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmMK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L01ha2VmaWxlCmluZGV4IGMwYTdiMjk5NDA3Ny4uOGRmMWJmMjg1NWQwIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9NYWtlZmlsZQpAQCAtNzMsNiArNzMsNyBAQCBndC15ICs9IFwKIAlndC9pbnRlbF9j
b250ZXh0Lm8gXAogCWd0L2ludGVsX2VuZ2luZV9jcy5vIFwKIAlndC9pbnRlbF9lbmdpbmVfcG0u
byBcCisJZ3QvaW50ZWxfZ3QubyBcCiAJZ3QvaW50ZWxfZ3RfcG0ubyBcCiAJZ3QvaW50ZWxfaGFu
Z2NoZWNrLm8gXAogCWd0L2ludGVsX2xyYy5vIFwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2d0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5j
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uNGJjMGJiNGQzNDNlCi0t
LSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYwpAQCAt
MCwwICsxLDQ0IEBACisvKgorICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVAorICoKKyAq
IENvcHlyaWdodCDCqSAyMDA4LTIwMTggSW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaW5jbHVk
ZSAiaW50ZWxfZ3QuaCIKKwordm9pZCBpbnRlbF9ndF9pbml0X3N3aXp6bGluZyhzdHJ1Y3QgaW50
ZWxfZ3QgKmd0KQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gZ3RfdG9faTkx
NShndCk7CisJc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlID0gZ3RfdG9fdW5jb3JlKGd0KTsK
KworCWlmIChJTlRFTF9HRU4oaTkxNSkgPCA1IHx8CisJICAgIGk5MTUtPm1tLmJpdF82X3N3aXp6
bGVfeCA9PSBJOTE1X0JJVF82X1NXSVpaTEVfTk9ORSkKKwkJcmV0dXJuOworCisJaW50ZWxfdW5j
b3JlX3dyaXRlKHVuY29yZSwKKwkJCSAgIERJU1BfQVJCX0NUTCwKKwkJCSAgIGludGVsX3VuY29y
ZV9yZWFkKHVuY29yZSwgRElTUF9BUkJfQ1RMKSB8CisJCQkgICBESVNQX1RJTEVfU1VSRkFDRV9T
V0laWkxJTkcpOworCisJaWYgKElTX0dFTihpOTE1LCA1KSkKKwkJcmV0dXJuOworCisJaW50ZWxf
dW5jb3JlX3dyaXRlKHVuY29yZSwKKwkJCSAgIFRJTEVDVEwsCisJCQkgICBpbnRlbF91bmNvcmVf
cmVhZCh1bmNvcmUsIFRJTEVDVEwpIHwgVElMRUNUTF9TV1pDVEwpOworCisJaWYgKElTX0dFTihp
OTE1LCA2KSkKKwkJaW50ZWxfdW5jb3JlX3dyaXRlKHVuY29yZSwKKwkJCQkgICBBUkJfTU9ERSwK
KwkJCQkgICBfTUFTS0VEX0JJVF9FTkFCTEUoQVJCX01PREVfU1dJWlpMRV9TTkIpKTsKKwllbHNl
IGlmIChJU19HRU4oaTkxNSwgNykpCisJCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCisJCQkJ
ICAgQVJCX01PREUsCisJCQkJICAgX01BU0tFRF9CSVRfRU5BQkxFKEFSQl9NT0RFX1NXSVpaTEVf
SVZCKSk7CisJZWxzZSBpZiAoSVNfR0VOKGk5MTUsIDgpKQorCQlpbnRlbF91bmNvcmVfd3JpdGUo
dW5jb3JlLAorCQkJCSAgIEdBTVRBUkJNT0RFLAorCQkJCSAgIF9NQVNLRURfQklUX0VOQUJMRShB
UkJfTU9ERV9TV0laWkxFX0JEVykpOworCWVsc2UKKwkJTUlTU0lOR19DQVNFKElOVEVMX0dFTihp
OTE1KSk7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5o
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuaAppbmRleCBiNjcyZjhiMDNiZmQu
LjIwNTk0ZTcxMDM1NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
Z3QuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5oCkBAIC0yMyw0ICsy
Myw2IEBAIHN0YXRpYyBpbmxpbmUgc3RydWN0IGludGVsX3VuY29yZSAqZ3RfdG9fdW5jb3JlKHN0
cnVjdCBpbnRlbF9ndCAqZ3QpCiAJcmV0dXJuICZndF90b19pOTE1KGd0KS0+dW5jb3JlOwogfQog
Cit2b2lkIGludGVsX2d0X2luaXRfc3dpenpsaW5nKHN0cnVjdCBpbnRlbF9ndCAqZ3QpOworCiAj
ZW5kaWYgLyogX19JTlRFTF9HVF9IX18gKi8KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kcnYuYwppbmRleCBlZTlhZjQyOTMxMzMuLjU2NDIzZjQzMTYxMyAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2Rydi5jCkBAIC00OSw2ICs0OSw3IEBACiAKICNpbmNsdWRlICJnZW0v
aTkxNV9nZW1fY29udGV4dC5oIgogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9pb2N0bHMuaCIKKyNp
bmNsdWRlICJndC9pbnRlbF9ndC5oIgogI2luY2x1ZGUgImd0L2ludGVsX2d0X3BtLmgiCiAjaW5j
bHVkZSAiZ3QvaW50ZWxfcmVzZXQuaCIKICNpbmNsdWRlICJndC9pbnRlbF93b3JrYXJvdW5kcy5o
IgpAQCAtMjkzNSw3ICsyOTM2LDcgQEAgc3RhdGljIGludCBpbnRlbF9ydW50aW1lX3N1c3BlbmQo
c3RydWN0IGRldmljZSAqa2RldikKIAogCQlpbnRlbF91Y19yZXN1bWUoZGV2X3ByaXYpOwogCi0J
CWk5MTVfZ2VtX2luaXRfc3dpenpsaW5nKGRldl9wcml2KTsKKwkJaW50ZWxfZ3RfaW5pdF9zd2l6
emxpbmcoJmRldl9wcml2LT5ndCk7CiAJCWk5MTVfZ2VtX3Jlc3RvcmVfZmVuY2VzKGRldl9wcml2
KTsKIAogCQllbmFibGVfcnBtX3dha2VyZWZfYXNzZXJ0cyhkZXZfcHJpdik7CkBAIC0zMDM2LDcg
KzMwMzcsNyBAQCBzdGF0aWMgaW50IGludGVsX3J1bnRpbWVfcmVzdW1lKHN0cnVjdCBkZXZpY2Ug
KmtkZXYpCiAJICogTm8gcG9pbnQgb2Ygcm9sbGluZyBiYWNrIHRoaW5ncyBpbiBjYXNlIG9mIGFu
IGVycm9yLCBhcyB0aGUgYmVzdAogCSAqIHdlIGNhbiBkbyBpcyB0byBob3BlIHRoYXQgdGhpbmdz
IHdpbGwgc3RpbGwgd29yayAoYW5kIGRpc2FibGUgUlBNKS4KIAkgKi8KLQlpOTE1X2dlbV9pbml0
X3N3aXp6bGluZyhkZXZfcHJpdik7CisJaW50ZWxfZ3RfaW5pdF9zd2l6emxpbmcoJmRldl9wcml2
LT5ndCk7CiAJaTkxNV9nZW1fcmVzdG9yZV9mZW5jZXMoZGV2X3ByaXYpOwogCiAJLyoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5oCmluZGV4IDJjY2E2NTYzM2JjYy4uMTkwODQ1NDlmNDRmIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTI2MDYsNyArMjYwNiw2IEBAIGJvb2wgaTkxNV9nZW1fdW5z
ZXRfd2VkZ2VkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIGk5MTVf
Z2VtX2luaXRfbW1pbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7CiBpbnQgX19tdXN0
X2NoZWNrIGk5MTVfZ2VtX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsK
IGludCBfX211c3RfY2hlY2sgaTkxNV9nZW1faW5pdF9odyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYpOwotdm9pZCBpOTE1X2dlbV9pbml0X3N3aXp6bGluZyhzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBpOTE1X2dlbV9maW5pX2h3KHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIGk5MTVfZ2VtX2Zpbmkoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIGludCBpOTE1X2dlbV93YWl0X2Zvcl9pZGxlKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCmluZGV4
IDk0ZDg1YjBmYjg2MC4uMGUwZTZiYjA4ZTIzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2dlbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKQEAg
LTQ0LDYgKzQ0LDcgQEAKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1fcG0uaCIKICNpbmNsdWRlICJn
ZW0vaTkxNV9nZW1mcy5oIgogI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV9wbS5oIgorI2luY2x1
ZGUgImd0L2ludGVsX2d0LmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZ3RfcG0uaCIKICNpbmNsdWRl
ICJndC9pbnRlbF9tb2NzLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfcmVzZXQuaCIKQEAgLTEyMDAs
MjkgKzEyMDEsNiBAQCB2b2lkIGk5MTVfZ2VtX3Nhbml0aXplKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1KQogCW11dGV4X3VubG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7CiB9CiAK
LXZvaWQgaTkxNV9nZW1faW5pdF9zd2l6emxpbmcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2KQotewotCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwgNSB8fAotCSAgICBkZXZfcHJp
di0+bW0uYml0XzZfc3dpenpsZV94ID09IEk5MTVfQklUXzZfU1dJWlpMRV9OT05FKQotCQlyZXR1
cm47Ci0KLQlJOTE1X1dSSVRFKERJU1BfQVJCX0NUTCwgSTkxNV9SRUFEKERJU1BfQVJCX0NUTCkg
fAotCQkJCSBESVNQX1RJTEVfU1VSRkFDRV9TV0laWkxJTkcpOwotCi0JaWYgKElTX0dFTihkZXZf
cHJpdiwgNSkpCi0JCXJldHVybjsKLQotCUk5MTVfV1JJVEUoVElMRUNUTCwgSTkxNV9SRUFEKFRJ
TEVDVEwpIHwgVElMRUNUTF9TV1pDVEwpOwotCWlmIChJU19HRU4oZGV2X3ByaXYsIDYpKQotCQlJ
OTE1X1dSSVRFKEFSQl9NT0RFLCBfTUFTS0VEX0JJVF9FTkFCTEUoQVJCX01PREVfU1dJWlpMRV9T
TkIpKTsKLQllbHNlIGlmIChJU19HRU4oZGV2X3ByaXYsIDcpKQotCQlJOTE1X1dSSVRFKEFSQl9N
T0RFLCBfTUFTS0VEX0JJVF9FTkFCTEUoQVJCX01PREVfU1dJWlpMRV9JVkIpKTsKLQllbHNlIGlm
IChJU19HRU4oZGV2X3ByaXYsIDgpKQotCQlJOTE1X1dSSVRFKEdBTVRBUkJNT0RFLCBfTUFTS0VE
X0JJVF9FTkFCTEUoQVJCX01PREVfU1dJWlpMRV9CRFcpKTsKLQllbHNlCi0JCUJVRygpOwotfQot
CiBzdGF0aWMgdm9pZCBpbml0X3VudXNlZF9yaW5nKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiwgdTMyIGJhc2UpCiB7CiAJSTkxNV9XUklURShSSU5HX0NUTChiYXNlKSwgMCk7CkBA
IC0xMjY5LDcgKzEyNDcsNyBAQCBpbnQgaTkxNV9nZW1faW5pdF9odyhzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYpCiAJLyogLi4uYW5kIGRldGVybWluZSB3aGV0aGVyIHRoZXkgYXJl
IHN0aWNraW5nLiAqLwogCWludGVsX2d0X3ZlcmlmeV93b3JrYXJvdW5kcyhkZXZfcHJpdiwgImlu
aXQiKTsKIAotCWk5MTVfZ2VtX2luaXRfc3dpenpsaW5nKGRldl9wcml2KTsKKwlpbnRlbF9ndF9p
bml0X3N3aXp6bGluZygmZGV2X3ByaXYtPmd0KTsKIAogCS8qCiAJICogQXQgbGVhc3QgODMwIGNh
biBsZWF2ZSBzb21lIG9mIHRoZSB1bnVzZWQgcmluZ3MKLS0gCjIuMjAuMQoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlz
dApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 177D0108D1B
	for <lists+intel-gfx@lfdr.de>; Mon, 25 Nov 2019 12:39:24 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id ED9B689F49;
	Mon, 25 Nov 2019 11:39:21 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 13AAB89F49
 for <intel-gfx@lists.freedesktop.org>; Mon, 25 Nov 2019 11:39:21 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 25 Nov 2019 03:39:20 -0800
X-IronPort-AV: E=Sophos;i="5.69,241,1571727600"; d="scan'208";a="202321878"
Received: from aburk3x-mobl1.ger.corp.intel.com (HELO [10.252.19.231])
 ([10.252.19.231])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 25 Nov 2019 03:39:17 -0800
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191125105858.1718307-1-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <010efe40-171e-7935-859e-2e3f67582e5c@linux.intel.com>
Date: Mon, 25 Nov 2019 11:39:17 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191125105858.1718307-1-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [CI 1/3] drm/i915: Serialise with engine-pm around
 requests on the kernel_context
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDI1LzExLzIwMTkgMTA6NTgsIENocmlzIFdpbHNvbiB3cm90ZToKPiBBcyB0aGUgZW5naW5l
LT5rZXJuZWxfY29udGV4dCBpcyB1c2VkIHdpdGhpbiB0aGUgZW5naW5lLXBtIGJhcnJpZXIsIHdl
Cj4gaGF2ZSB0byBiZSBjYXJlZnVsIHdoZW4gZW1pdHRpbmcgcmVxdWVzdHMgb3V0c2lkZSBvZiB0
aGUgYmFycmllciwgYXMgdGhlCj4gc3RyaWN0IHRpbWVsaW5lIGxvY2tpbmcgcnVsZXMgZG8gbm90
IGFwcGx5LiBJbnN0ZWFkLCB3ZSBtdXN0IGVuc3VyZSB0aGUKPiBlbmdpbmVfcGFyaygpIGNhbm5v
dCBiZSBlbnRlcmVkIGFzIHdlIGJ1aWxkIHRoZSByZXF1ZXN0LCB3aGljaCBpcwo+IHNpbXBsZXN0
IGJ5IHRha2luZyBhbiBleHBsaWNpdCBlbmdpbmUtcG0gd2FrZXJlZiBhcm91bmQgdGhlIHJlcXVl
c3QKPiBjb25zdHJ1Y3Rpb24uCj4gCj4gU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJp
c0BjaHJpcy13aWxzb24uY28udWs+CgpSZXZpZXdlZC1ieTogVHZydGtvIFVyc3VsaW4gPHR2cnRr
by51cnN1bGluQGludGVsLmNvbT4KClJlZ2FyZHMsCgpUdnJ0a28KCj4gLS0tCj4gICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jICAgfCAgMyArLQo+ICAgLi4uL2k5
MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jbGllbnRfYmx0LmMgIHwgIDIgKwo+ICAgLi4uL2k5
MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb2hlcmVuY3kuYyAgIHwgIDMgKy0KPiAgIC4uLi9k
cm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYyB8ICA3ICsrKy0KPiAgIC4u
Li9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYyAgICB8ICAzICstCj4gICAu
Li4vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX29iamVjdF9ibHQuYyAgfCAxOCArKysrKyst
LS0KPiAgIC4uLi9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5jICB8IDE0
ICsrKysrLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5oICAg
ICB8IDIxICsrKysrKysrKysKPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmth
cm91bmRzLmMgICB8ICAzICsrCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9j
b250ZXh0LmMgICAgfCAgMiArLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rf
ZW5naW5lX2NzLmMgIHwgMTIgKysrKysrCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxm
dGVzdF9scmMuYyAgICAgICAgfCAgNiArLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X21vY3MuYyAgICAgICB8ICAyICsKPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X3RpbWVsaW5lLmMgICB8ICA2ICstLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9wZXJmLmMgICAgICAgICAgICAgIHwgIDQgKy0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L3Nl
bGZ0ZXN0cy9pOTE1X2FjdGl2ZS5jICB8ICAyICstCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9z
ZWxmdGVzdHMvaTkxNV9wZXJmLmMgICAgfCAgMiArLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUv
c2VsZnRlc3RzL2k5MTVfcmVxdWVzdC5jIHwgNDAgKysrKysrKysrKysrKystLS0tLQo+ICAgLi4u
L2RybS9pOTE1L3NlbGZ0ZXN0cy9pbnRlbF9tZW1vcnlfcmVnaW9uLmMgIHwgIDIgKwo+ICAgMTkg
ZmlsZXMgY2hhbmdlZCwgMTE5IGluc2VydGlvbnMoKyksIDMzIGRlbGV0aW9ucygtKQo+IAo+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwo+IGluZGV4IDZmMWU2
MTgxZjY3YS4uYzk0YWM4Mzg0MDFhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fY29udGV4dC5jCj4gQEAgLTcwLDYgKzcwLDcgQEAKPiAgICNpbmNsdWRlIDxkcm0v
aTkxNV9kcm0uaD4KPiAgIAo+ICAgI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQu
aCIKPiArI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV9wbS5oIgo+ICAgI2luY2x1ZGUgImd0L2lu
dGVsX2VuZ2luZV91c2VyLmgiCj4gICAjaW5jbHVkZSAiZ3QvaW50ZWxfbHJjX3JlZy5oIgo+ICAg
I2luY2x1ZGUgImd0L2ludGVsX3JpbmcuaCIKPiBAQCAtMTI2NSw3ICsxMjY2LDcgQEAgZ2VuOF9t
b2RpZnlfcnBjcyhzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsIHN0cnVjdCBpbnRlbF9zc2V1IHNz
ZXUpCj4gICAJaWYgKCFpbnRlbF9jb250ZXh0X2lzX3Bpbm5lZChjZSkpCj4gICAJCXJldHVybiAw
Owo+ICAgCj4gLQlycSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUoY2UtPmVuZ2luZS0+a2VybmVsX2Nv
bnRleHQpOwo+ICsJcnEgPSBpbnRlbF9lbmdpbmVfY3JlYXRlX2tlcm5lbF9yZXF1ZXN0KGNlLT5l
bmdpbmUpOwo+ICAgCWlmIChJU19FUlIocnEpKQo+ICAgCQlyZXR1cm4gUFRSX0VSUihycSk7Cj4g
ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1
X2dlbV9jbGllbnRfYmx0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5
MTVfZ2VtX2NsaWVudF9ibHQuYwo+IGluZGV4IGRhOGVkZWU0ZmUwYS4uYjk3MmJlMTY1ZTg1IDEw
MDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1f
Y2xpZW50X2JsdC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9p
OTE1X2dlbV9jbGllbnRfYmx0LmMKPiBAQCAtMjQsNiArMjQsNyBAQCBzdGF0aWMgaW50IF9faWd0
X2NsaWVudF9maWxsKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAgIAo+ICAgCXBy
YW5kb21fc2VlZF9zdGF0ZSgmcHJuZywgaTkxNV9zZWxmdGVzdC5yYW5kb21fc2VlZCk7Cj4gICAK
PiArCWludGVsX2VuZ2luZV9wbV9nZXQoZW5naW5lKTsKPiAgIAlkbyB7Cj4gICAJCWNvbnN0IHUz
MiBtYXhfYmxvY2tfc2l6ZSA9IFMxNl9NQVggKiBQQUdFX1NJWkU7Cj4gICAJCXUzMiBzeiA9IG1p
bl90KHU2NCwgY2UtPnZtLT50b3RhbCA+PiA0LCBwcmFuZG9tX3UzMl9zdGF0ZSgmcHJuZykpOwo+
IEBAIC05OSw2ICsxMDAsNyBAQCBzdGF0aWMgaW50IF9faWd0X2NsaWVudF9maWxsKHN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAgIGVycl9mbHVzaDoKPiAgIAlpZiAoZXJyID09IC1F
Tk9NRU0pCj4gICAJCWVyciA9IDA7Cj4gKwlpbnRlbF9lbmdpbmVfcG1fcHV0KGVuZ2luZSk7Cj4g
ICAKPiAgIAlyZXR1cm4gZXJyOwo+ICAgfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvaGVyZW5jeS5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb2hlcmVuY3kuYwo+IGluZGV4IDJiMjlmNmI0
ZTFkZC4uOWQzY2QxYWY2MWY2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9zZWxmdGVzdHMvaTkxNV9nZW1fY29oZXJlbmN5LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvaGVyZW5jeS5jCj4gQEAgLTYsNiArNiw3IEBA
Cj4gICAKPiAgICNpbmNsdWRlIDxsaW51eC9wcmltZV9udW1iZXJzLmg+Cj4gICAKPiArI2luY2x1
ZGUgImd0L2ludGVsX2VuZ2luZV9wbS5oIgo+ICAgI2luY2x1ZGUgImd0L2ludGVsX2d0LmgiCj4g
ICAjaW5jbHVkZSAiZ3QvaW50ZWxfZ3RfcG0uaCIKPiAgICNpbmNsdWRlICJndC9pbnRlbF9yaW5n
LmgiCj4gQEAgLTIwMCw3ICsyMDEsNyBAQCBzdGF0aWMgaW50IGdwdV9zZXQoc3RydWN0IGNvbnRl
eHQgKmN0eCwgdW5zaWduZWQgbG9uZyBvZmZzZXQsIHUzMiB2KQo+ICAgCWlmIChJU19FUlIodm1h
KSkKPiAgIAkJcmV0dXJuIFBUUl9FUlIodm1hKTsKPiAgIAo+IC0JcnEgPSBpOTE1X3JlcXVlc3Rf
Y3JlYXRlKGN0eC0+ZW5naW5lLT5rZXJuZWxfY29udGV4dCk7Cj4gKwlycSA9IGludGVsX2VuZ2lu
ZV9jcmVhdGVfa2VybmVsX3JlcXVlc3QoY3R4LT5lbmdpbmUpOwo+ICAgCWlmIChJU19FUlIocnEp
KSB7Cj4gICAJCWk5MTVfdm1hX3VucGluKHZtYSk7Cj4gICAJCXJldHVybiBQVFJfRVJSKHJxKTsK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dl
bV9jb250ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2Vt
X2NvbnRleHQuYwo+IGluZGV4IGUxZDhjY2QxMTQwOS4uMmVhNDc5MGYzNzIxIDEwMDY0NAo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250
ZXh0LmMKPiBAQCAtNyw2ICs3LDcgQEAKPiAgICNpbmNsdWRlIDxsaW51eC9wcmltZV9udW1iZXJz
Lmg+Cj4gICAKPiAgICNpbmNsdWRlICJnZW0vaTkxNV9nZW1fcG0uaCIKPiArI2luY2x1ZGUgImd0
L2ludGVsX2VuZ2luZV9wbS5oIgo+ICAgI2luY2x1ZGUgImd0L2ludGVsX2d0LmgiCj4gICAjaW5j
bHVkZSAiZ3QvaW50ZWxfZ3RfcmVxdWVzdHMuaCIKPiAgICNpbmNsdWRlICJndC9pbnRlbF9yZXNl
dC5oIgo+IEBAIC0xMTkwLDkgKzExOTEsMTEgQEAgX19zc2V1X3Rlc3QoY29uc3QgY2hhciAqbmFt
ZSwKPiAgIAlzdHJ1Y3QgaWd0X3NwaW5uZXIgKnNwaW4gPSBOVUxMOwo+ICAgCWludCByZXQ7Cj4g
ICAKPiArCWludGVsX2VuZ2luZV9wbV9nZXQoY2UtPmVuZ2luZSk7Cj4gKwo+ICAgCXJldCA9IF9f
c3NldV9wcmVwYXJlKG5hbWUsIGZsYWdzLCBjZSwgJnNwaW4pOwo+ICAgCWlmIChyZXQpCj4gLQkJ
cmV0dXJuIHJldDsKPiArCQlnb3RvIG91dF9wbTsKPiAgIAo+ICAgCXJldCA9IGludGVsX2NvbnRl
eHRfcmVjb25maWd1cmVfc3NldShjZSwgc3NldSk7Cj4gICAJaWYgKHJldCkKPiBAQCAtMTIwNyw2
ICsxMjEwLDggQEAgX19zc2V1X3Rlc3QoY29uc3QgY2hhciAqbmFtZSwKPiAgIAkJaWd0X3NwaW5u
ZXJfZmluaShzcGluKTsKPiAgIAkJa2ZyZWUoc3Bpbik7Cj4gICAJfQo+ICtvdXRfcG06Cj4gKwlp
bnRlbF9lbmdpbmVfcG1fcHV0KGNlLT5lbmdpbmUpOwo+ICAgCXJldHVybiByZXQ7Cj4gICB9Cj4g
ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1
X2dlbV9tbWFuLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2Vt
X21tYW4uYwo+IGluZGV4IDlmMWE2OTAyN2EwNC4uNmNlOTE2N2Y4YzlmIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1hbi5jCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9tbWFuLmMKPiBA
QCAtNiw2ICs2LDcgQEAKPiAgIAo+ICAgI2luY2x1ZGUgPGxpbnV4L3ByaW1lX251bWJlcnMuaD4K
PiAgIAo+ICsjaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3BtLmgiCj4gICAjaW5jbHVkZSAiZ3Qv
aW50ZWxfZ3QuaCIKPiAgICNpbmNsdWRlICJndC9pbnRlbF9ndF9wbS5oIgo+ICAgI2luY2x1ZGUg
Imh1Z2VfZ2VtX29iamVjdC5oIgo+IEBAIC01MzYsNyArNTM3LDcgQEAgc3RhdGljIGludCBtYWtl
X29ial9idXN5KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCj4gICAJCWlmIChlcnIp
Cj4gICAJCQlyZXR1cm4gZXJyOwo+ICAgCj4gLQkJcnEgPSBpOTE1X3JlcXVlc3RfY3JlYXRlKGVu
Z2luZS0+a2VybmVsX2NvbnRleHQpOwo+ICsJCXJxID0gaW50ZWxfZW5naW5lX2NyZWF0ZV9rZXJu
ZWxfcmVxdWVzdChlbmdpbmUpOwo+ICAgCQlpZiAoSVNfRVJSKHJxKSkgewo+ICAgCQkJaTkxNV92
bWFfdW5waW4odm1hKTsKPiAgIAkJCXJldHVybiBQVFJfRVJSKHJxKTsKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX29iamVjdF9ibHQu
Ywo+IGluZGV4IDY3NWMxYTIwYTJmMS4uNjIwNzdmZTQ2NzE1IDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fb2JqZWN0X2JsdC5jCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0
LmMKPiBAQCAtNDEsNiArNDEsNyBAQCBzdGF0aWMgaW50IF9fcGVyZl9maWxsX2JsdChzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQo+ICAgCQlpZiAoIWVuZ2luZSkKPiAgIAkJCXJldHVy
biAwOwo+ICAgCj4gKwkJaW50ZWxfZW5naW5lX3BtX2dldChlbmdpbmUpOwo+ICAgCQlmb3IgKHBh
c3MgPSAwOyBwYXNzIDwgQVJSQVlfU0laRSh0KTsgcGFzcysrKSB7Cj4gICAJCQlzdHJ1Y3QgaW50
ZWxfY29udGV4dCAqY2UgPSBlbmdpbmUtPmtlcm5lbF9jb250ZXh0Owo+ICAgCQkJa3RpbWVfdCB0
MCwgdDE7Cj4gQEAgLTQ5LDE3ICs1MCwyMCBAQCBzdGF0aWMgaW50IF9fcGVyZl9maWxsX2JsdChz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQo+ICAgCj4gICAJCQllcnIgPSBpOTE1X2dl
bV9vYmplY3RfZmlsbF9ibHQob2JqLCBjZSwgMCk7Cj4gICAJCQlpZiAoZXJyKQo+IC0JCQkJcmV0
dXJuIGVycjsKPiArCQkJCWJyZWFrOwo+ICAgCj4gICAJCQllcnIgPSBpOTE1X2dlbV9vYmplY3Rf
d2FpdChvYmosCj4gICAJCQkJCQkgICBJOTE1X1dBSVRfQUxMLAo+ICAgCQkJCQkJICAgTUFYX1ND
SEVEVUxFX1RJTUVPVVQpOwo+ICAgCQkJaWYgKGVycikKPiAtCQkJCXJldHVybiBlcnI7Cj4gKwkJ
CQlicmVhazsKPiAgIAo+ICAgCQkJdDEgPSBrdGltZV9nZXQoKTsKPiAgIAkJCXRbcGFzc10gPSBr
dGltZV9zdWIodDEsIHQwKTsKPiAgIAkJfQo+ICsJCWludGVsX2VuZ2luZV9wbV9wdXQoZW5naW5l
KTsKPiArCQlpZiAoZXJyKQo+ICsJCQlyZXR1cm4gZXJyOwo+ICAgCj4gICAJCXNvcnQodCwgQVJS
QVlfU0laRSh0KSwgc2l6ZW9mKCp0KSwgd3JhcF9rdGltZV9jb21wYXJlLCBOVUxMKTsKPiAgIAkJ
cHJfaW5mbygiJXM6IGJsdCAlemQgS2lCIGZpbGw6ICVsbGQgTWlCL3NcbiIsCj4gQEAgLTEwOSw2
ICsxMTMsNyBAQCBzdGF0aWMgaW50IF9fcGVyZl9jb3B5X2JsdChzdHJ1Y3QgZHJtX2k5MTVfZ2Vt
X29iamVjdCAqc3JjLAo+ICAgCQlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7Cj4gICAJ
CWt0aW1lX3QgdFs1XTsKPiAgIAkJaW50IHBhc3M7Cj4gKwkJaW50IGVyciA9IDA7Cj4gICAKPiAg
IAkJZW5naW5lID0gaW50ZWxfZW5naW5lX2xvb2t1cF91c2VyKGk5MTUsCj4gICAJCQkJCQkgIEk5
MTVfRU5HSU5FX0NMQVNTX0NPUFksCj4gQEAgLTExNiwyNiArMTIxLDI5IEBAIHN0YXRpYyBpbnQg
X19wZXJmX2NvcHlfYmx0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpzcmMsCj4gICAJCWlm
ICghZW5naW5lKQo+ICAgCQkJcmV0dXJuIDA7Cj4gICAKPiArCQlpbnRlbF9lbmdpbmVfcG1fZ2V0
KGVuZ2luZSk7Cj4gICAJCWZvciAocGFzcyA9IDA7IHBhc3MgPCBBUlJBWV9TSVpFKHQpOyBwYXNz
KyspIHsKPiAgIAkJCXN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSA9IGVuZ2luZS0+a2VybmVsX2Nv
bnRleHQ7Cj4gICAJCQlrdGltZV90IHQwLCB0MTsKPiAtCQkJaW50IGVycjsKPiAgIAo+ICAgCQkJ
dDAgPSBrdGltZV9nZXQoKTsKPiAgIAo+ICAgCQkJZXJyID0gaTkxNV9nZW1fb2JqZWN0X2NvcHlf
Ymx0KHNyYywgZHN0LCBjZSk7Cj4gICAJCQlpZiAoZXJyKQo+IC0JCQkJcmV0dXJuIGVycjsKPiAr
CQkJCWJyZWFrOwo+ICAgCj4gICAJCQllcnIgPSBpOTE1X2dlbV9vYmplY3Rfd2FpdChkc3QsCj4g
ICAJCQkJCQkgICBJOTE1X1dBSVRfQUxMLAo+ICAgCQkJCQkJICAgTUFYX1NDSEVEVUxFX1RJTUVP
VVQpOwo+ICAgCQkJaWYgKGVycikKPiAtCQkJCXJldHVybiBlcnI7Cj4gKwkJCQlicmVhazsKPiAg
IAo+ICAgCQkJdDEgPSBrdGltZV9nZXQoKTsKPiAgIAkJCXRbcGFzc10gPSBrdGltZV9zdWIodDEs
IHQwKTsKPiAgIAkJfQo+ICsJCWludGVsX2VuZ2luZV9wbV9wdXQoZW5naW5lKTsKPiArCQlpZiAo
ZXJyKQo+ICsJCQlyZXR1cm4gZXJyOwo+ICAgCj4gICAJCXNvcnQodCwgQVJSQVlfU0laRSh0KSwg
c2l6ZW9mKCp0KSwgd3JhcF9rdGltZV9jb21wYXJlLCBOVUxMKTsKPiAgIAkJcHJfaW5mbygiJXM6
IGJsdCAlemQgS2lCIGNvcHk6ICVsbGQgTWlCL3NcbiIsCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQuYwo+IGluZGV4IGM5MWZkNGU0YWYyOS4u
NzQyNjI4ZTQwMjAxIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZV9oZWFydGJlYXQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZV9oZWFydGJlYXQuYwo+IEBAIC0yMTUsMTggKzIxNSwyNiBAQCBpbnQgaW50ZWxfZW5n
aW5lX3B1bHNlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAgIGludCBpbnRlbF9l
bmdpbmVfZmx1c2hfYmFycmllcnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQo+ICAg
ewo+ICAgCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+ICsJaW50IGVyciA9IDA7Cj4gICAKPiAg
IAlpZiAobGxpc3RfZW1wdHkoJmVuZ2luZS0+YmFycmllcl90YXNrcykpCj4gICAJCXJldHVybiAw
Owo+ICAgCj4gKwlpZiAoIWludGVsX2VuZ2luZV9wbV9nZXRfaWZfYXdha2UoZW5naW5lKSkKPiAr
CQlyZXR1cm4gMDsKPiArCj4gICAJcnEgPSBpOTE1X3JlcXVlc3RfY3JlYXRlKGVuZ2luZS0+a2Vy
bmVsX2NvbnRleHQpOwo+IC0JaWYgKElTX0VSUihycSkpCj4gLQkJcmV0dXJuIFBUUl9FUlIocnEp
Owo+ICsJaWYgKElTX0VSUihycSkpIHsKPiArCQllcnIgPSBQVFJfRVJSKHJxKTsKPiArCQlnb3Rv
IG91dF9ycG07Cj4gKwl9Cj4gICAKPiAgIAlpZGxlX3B1bHNlKGVuZ2luZSwgcnEpOwo+ICAgCWk5
MTVfcmVxdWVzdF9hZGQocnEpOwo+ICAgCj4gLQlyZXR1cm4gMDsKPiArb3V0X3JwbToKPiArCWlu
dGVsX2VuZ2luZV9wbV9wdXQoZW5naW5lKTsKPiArCXJldHVybiBlcnI7Cj4gICB9Cj4gICAKPiAg
ICNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9TRUxGVEVTVCkKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3BtLmggYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uaAo+IGluZGV4IDI0ZTIwMzQ0ZGMyMi4uZTUyYzJi
MGNiMjQ1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2lu
ZV9wbS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3BtLmgK
PiBAQCAtNyw2ICs3LDcgQEAKPiAgICNpZm5kZWYgSU5URUxfRU5HSU5FX1BNX0gKPiAgICNkZWZp
bmUgSU5URUxfRU5HSU5FX1BNX0gKPiAgIAo+ICsjaW5jbHVkZSAiaTkxNV9yZXF1ZXN0LmgiCj4g
ICAjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3R5cGVzLmgiCj4gICAjaW5jbHVkZSAiaW50ZWxfd2Fr
ZXJlZi5oIgo+ICAgCj4gQEAgLTQxLDYgKzQyLDI2IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBpbnRl
bF9lbmdpbmVfcG1fZmx1c2goc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQo+ICAgCWlu
dGVsX3dha2VyZWZfdW5sb2NrX3dhaXQoJmVuZ2luZS0+d2FrZXJlZik7Cj4gICB9Cj4gICAKPiAr
c3RhdGljIGlubGluZSBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICoKPiAraW50ZWxfZW5naW5lX2NyZWF0
ZV9rZXJuZWxfcmVxdWVzdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCj4gK3sKPiAr
CXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+ICsKPiArCS8qCj4gKwkgKiBUaGUgZW5naW5lLT5r
ZXJuZWxfY29udGV4dCBpcyBzcGVjaWFsIGFzIGl0IGlzIHVzZWQgaW5zaWRlCj4gKwkgKiB0aGUg
ZW5naW5lLXBtIGJhcnJpZXIgKHNlZSBfX2VuZ2luZV9wYXJrKCkpLCBjaXJjdW12ZW50aW5nCj4g
KwkgKiB0aGUgdXN1YWwgbXV0ZXhlcyBhbmQgcmVseWluZyBvbiB0aGUgZW5naW5lLXBtIGJhcnJp
ZXIKPiArCSAqIGluc3RlYWQuIFNvIHdoZW5ldmVyIHdlIHVzZSB0aGUgZW5naW5lLT5rZXJuZWxf
Y29udGV4dAo+ICsJICogb3V0c2lkZSBvZiB0aGUgYmFycmllciwgd2UgbXVzdCBtYW51YWxseSBo
YW5kbGUgdGhlCj4gKwkgKiBlbmdpbmUgd2FrZXJlZiB0byBzZXJpYWxpc2Ugd2l0aCB0aGUgdXNl
IGluc2lkZS4KPiArCSAqLwo+ICsJaW50ZWxfZW5naW5lX3BtX2dldChlbmdpbmUpOwo+ICsJcnEg
PSBpOTE1X3JlcXVlc3RfY3JlYXRlKGVuZ2luZS0+a2VybmVsX2NvbnRleHQpOwo+ICsJaW50ZWxf
ZW5naW5lX3BtX3B1dChlbmdpbmUpOwo+ICsKPiArCXJldHVybiBycTsKPiArfQo+ICsKPiAgIHZv
aWQgaW50ZWxfZW5naW5lX2luaXRfX3BtKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7
Cj4gICAKPiAgICNlbmRpZiAvKiBJTlRFTF9FTkdJTkVfUE1fSCAqLwo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYwo+IGluZGV4IDIyNmJkNGNjY2I0OC4uMGM2
ZDM5ODk4MGJhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dv
cmthcm91bmRzLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJv
dW5kcy5jCj4gQEAgLTYsNiArNiw3IEBACj4gICAKPiAgICNpbmNsdWRlICJpOTE1X2Rydi5oIgo+
ICAgI2luY2x1ZGUgImludGVsX2NvbnRleHQuaCIKPiArI2luY2x1ZGUgImludGVsX2VuZ2luZV9w
bS5oIgo+ICAgI2luY2x1ZGUgImludGVsX2d0LmgiCj4gICAjaW5jbHVkZSAiaW50ZWxfcmluZy5o
Igo+ICAgI2luY2x1ZGUgImludGVsX3dvcmthcm91bmRzLmgiCj4gQEAgLTE1ODIsNyArMTU4Myw5
IEBAIHN0YXRpYyBpbnQgZW5naW5lX3dhX2xpc3RfdmVyaWZ5KHN0cnVjdCBpbnRlbF9jb250ZXh0
ICpjZSwKPiAgIAlpZiAoSVNfRVJSKHZtYSkpCj4gICAJCXJldHVybiBQVFJfRVJSKHZtYSk7Cj4g
ICAKPiArCWludGVsX2VuZ2luZV9wbV9nZXQoY2UtPmVuZ2luZSk7Cj4gICAJcnEgPSBpbnRlbF9j
b250ZXh0X2NyZWF0ZV9yZXF1ZXN0KGNlKTsKPiArCWludGVsX2VuZ2luZV9wbV9wdXQoY2UtPmVu
Z2luZSk7Cj4gICAJaWYgKElTX0VSUihycSkpIHsKPiAgIAkJZXJyID0gUFRSX0VSUihycSk7Cj4g
ICAJCWdvdG8gZXJyX3ZtYTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
c2VsZnRlc3RfY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfY29u
dGV4dC5jCj4gaW5kZXggNWJjMTI0NTc0MTcwLi5hZjM1NGNjZGJmNDAgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfY29udGV4dC5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfY29udGV4dC5jCj4gQEAgLTEyMSw3ICsxMjEsNyBA
QCBzdGF0aWMgaW50IF9fbGl2ZV9jb250ZXh0X3NpemUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lLAo+ICAgCQlnb3RvIGVycl91bnBpbjsKPiAgIAo+ICAgCS8qIEZvcmNlIHRoZSBjb250
ZXh0IHN3aXRjaCAqLwo+IC0JcnEgPSBpOTE1X3JlcXVlc3RfY3JlYXRlKGVuZ2luZS0+a2VybmVs
X2NvbnRleHQpOwo+ICsJcnEgPSBpbnRlbF9lbmdpbmVfY3JlYXRlX2tlcm5lbF9yZXF1ZXN0KGVu
Z2luZSk7Cj4gICAJaWYgKElTX0VSUihycSkpIHsKPiAgIAkJZXJyID0gUFRSX0VSUihycSk7Cj4g
ICAJCWdvdG8gZXJyX3VucGluOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9zZWxmdGVzdF9lbmdpbmVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0
X2VuZ2luZV9jcy5jCj4gaW5kZXggNTk4MWE3YjcxZWM5Li43NjFkODFmNGJkNjggMTAwNjQ0Cj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5lX2NzLmMKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9lbmdpbmVfY3MuYwo+IEBAIC0xMzIs
MTQgKzEzMiwxOCBAQCBzdGF0aWMgaW50IHBlcmZfbWlfYmJfc3RhcnQodm9pZCAqYXJnKQo+ICAg
CQl1MzIgY3ljbGVzW0NPVU5UXTsKPiAgIAkJaW50IGk7Cj4gICAKPiArCQlpbnRlbF9lbmdpbmVf
cG1fZ2V0KGVuZ2luZSk7Cj4gKwo+ICAgCQliYXRjaCA9IGNyZWF0ZV9lbXB0eV9iYXRjaChjZSk7
Cj4gICAJCWlmIChJU19FUlIoYmF0Y2gpKSB7Cj4gICAJCQllcnIgPSBQVFJfRVJSKGJhdGNoKTsK
PiArCQkJaW50ZWxfZW5naW5lX3BtX3B1dChlbmdpbmUpOwo+ICAgCQkJYnJlYWs7Cj4gICAJCX0K
PiAgIAo+ICAgCQllcnIgPSBpOTE1X3ZtYV9zeW5jKGJhdGNoKTsKPiAgIAkJaWYgKGVycikgewo+
ICsJCQlpbnRlbF9lbmdpbmVfcG1fcHV0KGVuZ2luZSk7Cj4gICAJCQlpOTE1X3ZtYV9wdXQoYmF0
Y2gpOwo+ICAgCQkJYnJlYWs7Cj4gICAJCX0KPiBAQCAtMTgwLDYgKzE4NCw3IEBAIHN0YXRpYyBp
bnQgcGVyZl9taV9iYl9zdGFydCh2b2lkICphcmcpCj4gICAJCQljeWNsZXNbaV0gPSBycS0+aHdz
cF9zZXFub1szXSAtIHJxLT5od3NwX3NlcW5vWzJdOwo+ICAgCQl9Cj4gICAJCWk5MTVfdm1hX3B1
dChiYXRjaCk7Cj4gKwkJaW50ZWxfZW5naW5lX3BtX3B1dChlbmdpbmUpOwo+ICAgCQlpZiAoZXJy
KQo+ICAgCQkJYnJlYWs7Cj4gICAKPiBAQCAtMjUxLDE1ICsyNTYsMTkgQEAgc3RhdGljIGludCBw
ZXJmX21pX25vb3Aodm9pZCAqYXJnKQo+ICAgCQl1MzIgY3ljbGVzW0NPVU5UXTsKPiAgIAkJaW50
IGk7Cj4gICAKPiArCQlpbnRlbF9lbmdpbmVfcG1fZ2V0KGVuZ2luZSk7Cj4gKwo+ICAgCQliYXNl
ID0gY3JlYXRlX2VtcHR5X2JhdGNoKGNlKTsKPiAgIAkJaWYgKElTX0VSUihiYXNlKSkgewo+ICAg
CQkJZXJyID0gUFRSX0VSUihiYXNlKTsKPiArCQkJaW50ZWxfZW5naW5lX3BtX3B1dChlbmdpbmUp
Owo+ICAgCQkJYnJlYWs7Cj4gICAJCX0KPiAgIAo+ICAgCQllcnIgPSBpOTE1X3ZtYV9zeW5jKGJh
c2UpOwo+ICAgCQlpZiAoZXJyKSB7Cj4gICAJCQlpOTE1X3ZtYV9wdXQoYmFzZSk7Cj4gKwkJCWlu
dGVsX2VuZ2luZV9wbV9wdXQoZW5naW5lKTsKPiAgIAkJCWJyZWFrOwo+ICAgCQl9Cj4gICAKPiBA
QCAtMjY3LDYgKzI3Niw3IEBAIHN0YXRpYyBpbnQgcGVyZl9taV9ub29wKHZvaWQgKmFyZykKPiAg
IAkJaWYgKElTX0VSUihub3ApKSB7Cj4gICAJCQllcnIgPSBQVFJfRVJSKG5vcCk7Cj4gICAJCQlp
OTE1X3ZtYV9wdXQoYmFzZSk7Cj4gKwkJCWludGVsX2VuZ2luZV9wbV9wdXQoZW5naW5lKTsKPiAg
IAkJCWJyZWFrOwo+ICAgCQl9Cj4gICAKPiBAQCAtMjc0LDYgKzI4NCw3IEBAIHN0YXRpYyBpbnQg
cGVyZl9taV9ub29wKHZvaWQgKmFyZykKPiAgIAkJaWYgKGVycikgewo+ICAgCQkJaTkxNV92bWFf
cHV0KG5vcCk7Cj4gICAJCQlpOTE1X3ZtYV9wdXQoYmFzZSk7Cj4gKwkJCWludGVsX2VuZ2luZV9w
bV9wdXQoZW5naW5lKTsKPiAgIAkJCWJyZWFrOwo+ICAgCQl9Cj4gICAKPiBAQCAtMzI3LDYgKzMz
OCw3IEBAIHN0YXRpYyBpbnQgcGVyZl9taV9ub29wKHZvaWQgKmFyZykKPiAgIAkJfQo+ICAgCQlp
OTE1X3ZtYV9wdXQobm9wKTsKPiAgIAkJaTkxNV92bWFfcHV0KGJhc2UpOwo+ICsJCWludGVsX2Vu
Z2luZV9wbV9wdXQoZW5naW5lKTsKPiAgIAkJaWYgKGVycikKPiAgIAkJCWJyZWFrOwo+ICAgCj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xyYy5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKPiBpbmRleCBmYzE0MmRkNjFkZDEu
LmFjOGI5MTE2ZDMwNyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxm
dGVzdF9scmMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xyYy5j
Cj4gQEAgLTM0OCw3ICszNDgsNyBAQCByZWxlYXNlX3F1ZXVlKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSwKPiAgIAlzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycTsKPiAgIAl1MzIgKmNzOwo+
ICAgCj4gLQlycSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUoZW5naW5lLT5rZXJuZWxfY29udGV4dCk7
Cj4gKwlycSA9IGludGVsX2VuZ2luZV9jcmVhdGVfa2VybmVsX3JlcXVlc3QoZW5naW5lKTsKPiAg
IAlpZiAoSVNfRVJSKHJxKSkKPiAgIAkJcmV0dXJuIFBUUl9FUlIocnEpOwo+ICAgCj4gQEAgLTQ5
Nyw3ICs0OTcsNyBAQCBzdGF0aWMgc3RydWN0IGk5MTVfcmVxdWVzdCAqbm9wX3JlcXVlc3Qoc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQo+ICAgewo+ICAgCXN0cnVjdCBpOTE1X3JlcXVl
c3QgKnJxOwo+ICAgCj4gLQlycSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUoZW5naW5lLT5rZXJuZWxf
Y29udGV4dCk7Cj4gKwlycSA9IGludGVsX2VuZ2luZV9jcmVhdGVfa2VybmVsX3JlcXVlc3QoZW5n
aW5lKTsKPiAgIAlpZiAoSVNfRVJSKHJxKSkKPiAgIAkJcmV0dXJuIHJxOwo+ICAgCj4gQEAgLTM2
OTgsNyArMzY5OCw3IEBAIHN0YXRpYyBpbnQgZ3ByX21ha2VfZGlydHkoc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lKQo+ICAgCXUzMiAqY3M7Cj4gICAJaW50IG47Cj4gICAKPiAtCXJxID0g
aTkxNV9yZXF1ZXN0X2NyZWF0ZShlbmdpbmUtPmtlcm5lbF9jb250ZXh0KTsKPiArCXJxID0gaW50
ZWxfZW5naW5lX2NyZWF0ZV9rZXJuZWxfcmVxdWVzdChlbmdpbmUpOwo+ICAgCWlmIChJU19FUlIo
cnEpKQo+ICAgCQlyZXR1cm4gUFRSX0VSUihycSk7Cj4gICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbW9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3Qvc2VsZnRlc3RfbW9jcy5jCj4gaW5kZXggYTM0ZDRmYjUyZmExLi5kZTAxMGY1Mjc3NTcgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbW9jcy5jCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbW9jcy5jCj4gQEAgLTI2MSw3ICsy
NjEsOSBAQCBzdGF0aWMgaW50IGxpdmVfbW9jc19rZXJuZWwodm9pZCAqYXJnKQo+ICAgCQlyZXR1
cm4gZXJyOwo+ICAgCj4gICAJZm9yX2VhY2hfZW5naW5lKGVuZ2luZSwgZ3QsIGlkKSB7Cj4gKwkJ
aW50ZWxfZW5naW5lX3BtX2dldChlbmdpbmUpOwo+ICAgCQllcnIgPSBjaGVja19tb2NzX2VuZ2lu
ZSgmbW9jcywgZW5naW5lLT5rZXJuZWxfY29udGV4dCk7Cj4gKwkJaW50ZWxfZW5naW5lX3BtX3B1
dChlbmdpbmUpOwo+ICAgCQlpZiAoZXJyKQo+ICAgCQkJYnJlYWs7Cj4gICAJfQo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF90aW1lbGluZS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfdGltZWxpbmUuYwo+IGluZGV4IGYwNGE1OWZlNWQy
Yy4uZTJkNzhjYzIyZmI0IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X3RpbWVsaW5lLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVz
dF90aW1lbGluZS5jCj4gQEAgLTQ1OCw3ICs0NTgsNyBAQCB0bF93cml0ZShzdHJ1Y3QgaW50ZWxf
dGltZWxpbmUgKnRsLCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIHUzMiB2YWx1ZSkK
PiAgIAkJZ290byBvdXQ7Cj4gICAJfQo+ICAgCj4gLQlycSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUo
ZW5naW5lLT5rZXJuZWxfY29udGV4dCk7Cj4gKwlycSA9IGludGVsX2VuZ2luZV9jcmVhdGVfa2Vy
bmVsX3JlcXVlc3QoZW5naW5lKTsKPiAgIAlpZiAoSVNfRVJSKHJxKSkKPiAgIAkJZ290byBvdXRf
dW5waW47Cj4gICAKPiBAQCAtNjc1LDkgKzY3NSw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9od3NwX3dy
YXAodm9pZCAqYXJnKQo+ICAgCQlpZiAoIWludGVsX2VuZ2luZV9jYW5fc3RvcmVfZHdvcmQoZW5n
aW5lKSkKPiAgIAkJCWNvbnRpbnVlOwo+ICAgCj4gLQkJaW50ZWxfZW5naW5lX3BtX2dldChlbmdp
bmUpOwo+IC0JCXJxID0gaTkxNV9yZXF1ZXN0X2NyZWF0ZShlbmdpbmUtPmtlcm5lbF9jb250ZXh0
KTsKPiAtCQlpbnRlbF9lbmdpbmVfcG1fcHV0KGVuZ2luZSk7Cj4gKwkJcnEgPSBpbnRlbF9lbmdp
bmVfY3JlYXRlX2tlcm5lbF9yZXF1ZXN0KGVuZ2luZSk7Cj4gICAJCWlmIChJU19FUlIocnEpKSB7
Cj4gICAJCQllcnIgPSBQVFJfRVJSKHJxKTsKPiAgIAkJCWdvdG8gb3V0Owo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfcGVyZi5jCj4gaW5kZXggNjA4ZTZjM2YzYzFhLi5iNDY3MTViNTc1NzYgMTAwNjQ0Cj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKPiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3BlcmYuYwo+IEBAIC0xOTY4LDcgKzE5NjgsOSBAQCBzdGF0aWMgaW50
IGVtaXRfb2FfY29uZmlnKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCj4gICAJaWYg
KGVycikKPiAgIAkJZ290byBlcnJfdm1hX3B1dDsKPiAgIAo+ICsJaW50ZWxfZW5naW5lX3BtX2dl
dChjZS0+ZW5naW5lKTsKPiAgIAlycSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUoY2UpOwo+ICsJaW50
ZWxfZW5naW5lX3BtX3B1dChjZS0+ZW5naW5lKTsKPiAgIAlpZiAoSVNfRVJSKHJxKSkgewo+ICAg
CQllcnIgPSBQVFJfRVJSKHJxKTsKPiAgIAkJZ290byBlcnJfdm1hX3VucGluOwo+IEBAIC0yMTY1
LDcgKzIxNjcsNyBAQCBzdGF0aWMgaW50IGdlbjhfbW9kaWZ5X2NvbnRleHQoc3RydWN0IGludGVs
X2NvbnRleHQgKmNlLAo+ICAgCj4gICAJbG9ja2RlcF9hc3NlcnRfaGVsZCgmY2UtPnBpbl9tdXRl
eCk7Cj4gICAKPiAtCXJxID0gaTkxNV9yZXF1ZXN0X2NyZWF0ZShjZS0+ZW5naW5lLT5rZXJuZWxf
Y29udGV4dCk7Cj4gKwlycSA9IGludGVsX2VuZ2luZV9jcmVhdGVfa2VybmVsX3JlcXVlc3QoY2Ut
PmVuZ2luZSk7Cj4gICAJaWYgKElTX0VSUihycSkpCj4gICAJCXJldHVybiBQVFJfRVJSKHJxKTsK
PiAgIAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9h
Y3RpdmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2FjdGl2ZS5jCj4g
aW5kZXggNjAyOTBmNzg3NTBkLi42YzFkYjNkZWQ0NDYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfYWN0aXZlLmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9hY3RpdmUuYwo+IEBAIC05OSw3ICs5OSw3IEBAIF9fbGl2
ZV9hY3RpdmVfc2V0dXAoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCj4gICAJZm9yX2Vh
Y2hfdWFiaV9lbmdpbmUoZW5naW5lLCBpOTE1KSB7Cj4gICAJCXN0cnVjdCBpOTE1X3JlcXVlc3Qg
KnJxOwo+ICAgCj4gLQkJcnEgPSBpOTE1X3JlcXVlc3RfY3JlYXRlKGVuZ2luZS0+a2VybmVsX2Nv
bnRleHQpOwo+ICsJCXJxID0gaW50ZWxfZW5naW5lX2NyZWF0ZV9rZXJuZWxfcmVxdWVzdChlbmdp
bmUpOwo+ICAgCQlpZiAoSVNfRVJSKHJxKSkgewo+ICAgCQkJZXJyID0gUFRSX0VSUihycSk7Cj4g
ICAJCQlicmVhazsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3Rz
L2k5MTVfcGVyZi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcGVyZi5j
Cj4gaW5kZXggYWFiZDA3ZjY3ZTQ5Li5kMWExNTY4YzQ3YmEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcGVyZi5jCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcGVyZi5jCj4gQEAgLTEzMiw3ICsxMzIsNyBAQCBzdGF0
aWMgaW50IGxpdmVfbm9hX2RlbGF5KHZvaWQgKmFyZykKPiAgIAlmb3IgKGkgPSAwOyBpIDwgNDsg
aSsrKQo+ICAgCQlpbnRlbF93cml0ZV9zdGF0dXNfcGFnZShzdHJlYW0tPmVuZ2luZSwgMHgxMDAg
KyBpLCAwKTsKPiAgIAo+IC0JcnEgPSBpOTE1X3JlcXVlc3RfY3JlYXRlKHN0cmVhbS0+ZW5naW5l
LT5rZXJuZWxfY29udGV4dCk7Cj4gKwlycSA9IGludGVsX2VuZ2luZV9jcmVhdGVfa2VybmVsX3Jl
cXVlc3Qoc3RyZWFtLT5lbmdpbmUpOwo+ICAgCWlmIChJU19FUlIocnEpKSB7Cj4gICAJCWVyciA9
IFBUUl9FUlIocnEpOwo+ICAgCQlnb3RvIG91dDsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcmVxdWVzdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
c2VsZnRlc3RzL2k5MTVfcmVxdWVzdC5jCj4gaW5kZXggYzE2ZDFlZmQyYWQ0Li45OWM5NGI0ZjY5
ZmIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcmVx
dWVzdC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcmVxdWVz
dC5jCj4gQEAgLTI3LDYgKzI3LDcgQEAKPiAgICNpbmNsdWRlICJnZW0vaTkxNV9nZW1fcG0uaCIK
PiAgICNpbmNsdWRlICJnZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5oIgo+ICAgCj4gKyNpbmNs
dWRlICJndC9pbnRlbF9lbmdpbmVfcG0uaCIKPiAgICNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgo+
ICAgCj4gICAjaW5jbHVkZSAiaTkxNV9yYW5kb20uaCIKPiBAQCAtNTQxLDYgKzU0Miw3IEBAIHN0
YXRpYyBpbnQgbGl2ZV9ub3BfcmVxdWVzdCh2b2lkICphcmcpCj4gICAJCWlmIChlcnIpCj4gICAJ
CQlyZXR1cm4gZXJyOwo+ICAgCj4gKwkJaW50ZWxfZW5naW5lX3BtX2dldChlbmdpbmUpOwo+ICAg
CQlmb3JfZWFjaF9wcmltZV9udW1iZXJfZnJvbShwcmltZSwgMSwgODE5Mikgewo+ICAgCQkJc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCA9IE5VTEw7Cj4gICAKPiBAQCAtNTc5LDYgKzU4MSw3
IEBAIHN0YXRpYyBpbnQgbGl2ZV9ub3BfcmVxdWVzdCh2b2lkICphcmcpCj4gICAJCQlpZiAoX19p
Z3RfdGltZW91dChlbmRfdGltZSwgTlVMTCkpCj4gICAJCQkJYnJlYWs7Cj4gICAJCX0KPiArCQlp
bnRlbF9lbmdpbmVfcG1fcHV0KGVuZ2luZSk7Cj4gICAKPiAgIAkJZXJyID0gaWd0X2xpdmVfdGVz
dF9lbmQoJnQpOwo+ICAgCQlpZiAoZXJyKQo+IEBAIC02OTMsMTAgKzY5NiwxMyBAQCBzdGF0aWMg
aW50IGxpdmVfZW1wdHlfcmVxdWVzdCh2b2lkICphcmcpCj4gICAJCWlmIChlcnIpCj4gICAJCQln
b3RvIG91dF9iYXRjaDsKPiAgIAo+ICsJCWludGVsX2VuZ2luZV9wbV9nZXQoZW5naW5lKTsKPiAr
Cj4gICAJCS8qIFdhcm11cCAvIHByZWxvYWQgKi8KPiAgIAkJcmVxdWVzdCA9IGVtcHR5X3JlcXVl
c3QoZW5naW5lLCBiYXRjaCk7Cj4gICAJCWlmIChJU19FUlIocmVxdWVzdCkpIHsKPiAgIAkJCWVy
ciA9IFBUUl9FUlIocmVxdWVzdCk7Cj4gKwkJCWludGVsX2VuZ2luZV9wbV9wdXQoZW5naW5lKTsK
PiAgIAkJCWdvdG8gb3V0X2JhdGNoOwo+ICAgCQl9Cj4gICAJCWk5MTVfcmVxdWVzdF93YWl0KHJl
cXVlc3QsIDAsIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsKPiBAQCAtNzA5LDYgKzcxNSw3IEBAIHN0
YXRpYyBpbnQgbGl2ZV9lbXB0eV9yZXF1ZXN0KHZvaWQgKmFyZykKPiAgIAkJCQlyZXF1ZXN0ID0g
ZW1wdHlfcmVxdWVzdChlbmdpbmUsIGJhdGNoKTsKPiAgIAkJCQlpZiAoSVNfRVJSKHJlcXVlc3Qp
KSB7Cj4gICAJCQkJCWVyciA9IFBUUl9FUlIocmVxdWVzdCk7Cj4gKwkJCQkJaW50ZWxfZW5naW5l
X3BtX3B1dChlbmdpbmUpOwo+ICAgCQkJCQlnb3RvIG91dF9iYXRjaDsKPiAgIAkJCQl9Cj4gICAJ
CQl9Cj4gQEAgLTcyMiw2ICs3MjksNyBAQCBzdGF0aWMgaW50IGxpdmVfZW1wdHlfcmVxdWVzdCh2
b2lkICphcmcpCj4gICAJCQkJYnJlYWs7Cj4gICAJCX0KPiAgIAkJaTkxNV9yZXF1ZXN0X3B1dChy
ZXF1ZXN0KTsKPiArCQlpbnRlbF9lbmdpbmVfcG1fcHV0KGVuZ2luZSk7Cj4gICAKPiAgIAkJZXJy
ID0gaWd0X2xpdmVfdGVzdF9lbmQoJnQpOwo+ICAgCQlpZiAoZXJyKQo+IEBAIC04NDYsNyArODU0
LDcgQEAgc3RhdGljIGludCBsaXZlX2FsbF9lbmdpbmVzKHZvaWQgKmFyZykKPiAgIAo+ICAgCWlk
eCA9IDA7Cj4gICAJZm9yX2VhY2hfdWFiaV9lbmdpbmUoZW5naW5lLCBpOTE1KSB7Cj4gLQkJcmVx
dWVzdFtpZHhdID0gaTkxNV9yZXF1ZXN0X2NyZWF0ZShlbmdpbmUtPmtlcm5lbF9jb250ZXh0KTsK
PiArCQlyZXF1ZXN0W2lkeF0gPSBpbnRlbF9lbmdpbmVfY3JlYXRlX2tlcm5lbF9yZXF1ZXN0KGVu
Z2luZSk7Cj4gICAJCWlmIChJU19FUlIocmVxdWVzdFtpZHhdKSkgewo+ICAgCQkJZXJyID0gUFRS
X0VSUihyZXF1ZXN0W2lkeF0pOwo+ICAgCQkJcHJfZXJyKCIlczogUmVxdWVzdCBhbGxvY2F0aW9u
IGZhaWxlZCB3aXRoIGVycj0lZFxuIiwKPiBAQCAtOTYzLDcgKzk3MSw3IEBAIHN0YXRpYyBpbnQg
bGl2ZV9zZXF1ZW50aWFsX2VuZ2luZXModm9pZCAqYXJnKQo+ICAgCQkJZ290byBvdXRfZnJlZTsK
PiAgIAkJfQo+ICAgCj4gLQkJcmVxdWVzdFtpZHhdID0gaTkxNV9yZXF1ZXN0X2NyZWF0ZShlbmdp
bmUtPmtlcm5lbF9jb250ZXh0KTsKPiArCQlyZXF1ZXN0W2lkeF0gPSBpbnRlbF9lbmdpbmVfY3Jl
YXRlX2tlcm5lbF9yZXF1ZXN0KGVuZ2luZSk7Cj4gICAJCWlmIChJU19FUlIocmVxdWVzdFtpZHhd
KSkgewo+ICAgCQkJZXJyID0gUFRSX0VSUihyZXF1ZXN0W2lkeF0pOwo+ICAgCQkJcHJfZXJyKCIl
czogUmVxdWVzdCBhbGxvY2F0aW9uIGZhaWxlZCBmb3IgJXMgd2l0aCBlcnI9JWRcbiIsCj4gQEAg
LTEwNjgsMTUgKzEwNzYsMTkgQEAgc3RhdGljIGludCBfX2xpdmVfcGFyYWxsZWxfZW5naW5lMSh2
b2lkICphcmcpCj4gICAJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lID0gYXJnOwo+ICAg
CUlHVF9USU1FT1VUKGVuZF90aW1lKTsKPiAgIAl1bnNpZ25lZCBsb25nIGNvdW50Owo+ICsJaW50
IGVyciA9IDA7Cj4gICAKPiAgIAljb3VudCA9IDA7Cj4gKwlpbnRlbF9lbmdpbmVfcG1fZ2V0KGVu
Z2luZSk7Cj4gICAJZG8gewo+ICAgCQlzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycTsKPiAtCQlpbnQg
ZXJyOwo+ICAgCj4gICAJCXJxID0gaTkxNV9yZXF1ZXN0X2NyZWF0ZShlbmdpbmUtPmtlcm5lbF9j
b250ZXh0KTsKPiAtCQlpZiAoSVNfRVJSKHJxKSkKPiAtCQkJcmV0dXJuIFBUUl9FUlIocnEpOwo+
ICsJCWlmIChJU19FUlIocnEpKSB7Cj4gKwkJCWVyciA9IFBUUl9FUlIocnEpOwo+ICsJCQlpZiAo
ZXJyKQo+ICsJCQkJYnJlYWs7Cj4gKwkJfQo+ICAgCj4gICAJCWk5MTVfcmVxdWVzdF9nZXQocnEp
Owo+ICAgCQlpOTE1X3JlcXVlc3RfYWRkKHJxKTsKPiBAQCAtMTA4NiwxMyArMTA5OCwxNCBAQCBz
dGF0aWMgaW50IF9fbGl2ZV9wYXJhbGxlbF9lbmdpbmUxKHZvaWQgKmFyZykKPiAgIAkJCWVyciA9
IC1FVElNRTsKPiAgIAkJaTkxNV9yZXF1ZXN0X3B1dChycSk7Cj4gICAJCWlmIChlcnIpCj4gLQkJ
CXJldHVybiBlcnI7Cj4gKwkJCWJyZWFrOwo+ICAgCj4gICAJCWNvdW50Kys7Cj4gICAJfSB3aGls
ZSAoIV9faWd0X3RpbWVvdXQoZW5kX3RpbWUsIE5VTEwpKTsKPiArCWludGVsX2VuZ2luZV9wbV9w
dXQoZW5naW5lKTsKPiAgIAo+ICAgCXByX2luZm8oIiVzOiAlbHUgcmVxdWVzdCArIHN5bmNcbiIs
IGVuZ2luZS0+bmFtZSwgY291bnQpOwo+IC0JcmV0dXJuIDA7Cj4gKwlyZXR1cm4gZXJyOwo+ICAg
fQo+ICAgCj4gICBzdGF0aWMgaW50IF9fbGl2ZV9wYXJhbGxlbF9lbmdpbmVOKHZvaWQgKmFyZykK
PiBAQCAtMTEwMCwyMSArMTExMywyNiBAQCBzdGF0aWMgaW50IF9fbGl2ZV9wYXJhbGxlbF9lbmdp
bmVOKHZvaWQgKmFyZykKPiAgIAlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUgPSBhcmc7
Cj4gICAJSUdUX1RJTUVPVVQoZW5kX3RpbWUpOwo+ICAgCXVuc2lnbmVkIGxvbmcgY291bnQ7Cj4g
KwlpbnQgZXJyID0gMDsKPiAgIAo+ICAgCWNvdW50ID0gMDsKPiArCWludGVsX2VuZ2luZV9wbV9n
ZXQoZW5naW5lKTsKPiAgIAlkbyB7Cj4gICAJCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+ICAg
Cj4gICAJCXJxID0gaTkxNV9yZXF1ZXN0X2NyZWF0ZShlbmdpbmUtPmtlcm5lbF9jb250ZXh0KTsK
PiAtCQlpZiAoSVNfRVJSKHJxKSkKPiAtCQkJcmV0dXJuIFBUUl9FUlIocnEpOwo+ICsJCWlmIChJ
U19FUlIocnEpKSB7Cj4gKwkJCWVyciA9IFBUUl9FUlIocnEpOwo+ICsJCQlicmVhazsKPiArCQl9
Cj4gICAKPiAgIAkJaTkxNV9yZXF1ZXN0X2FkZChycSk7Cj4gICAJCWNvdW50Kys7Cj4gICAJfSB3
aGlsZSAoIV9faWd0X3RpbWVvdXQoZW5kX3RpbWUsIE5VTEwpKTsKPiArCWludGVsX2VuZ2luZV9w
bV9wdXQoZW5naW5lKTsKPiAgIAo+ICAgCXByX2luZm8oIiVzOiAlbHUgcmVxdWVzdHNcbiIsIGVu
Z2luZS0+bmFtZSwgY291bnQpOwo+IC0JcmV0dXJuIDA7Cj4gKwlyZXR1cm4gZXJyOwo+ICAgfQo+
ICAgCj4gICBzdGF0aWMgYm9vbCB3YWtlX2FsbChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSkKPiBAQCAtMTE1OCw5ICsxMTc2LDExIEBAIHN0YXRpYyBpbnQgX19saXZlX3BhcmFsbGVsX3Nw
aW4odm9pZCAqYXJnKQo+ICAgCQlyZXR1cm4gLUVOT01FTTsKPiAgIAl9Cj4gICAKPiArCWludGVs
X2VuZ2luZV9wbV9nZXQoZW5naW5lKTsKPiAgIAlycSA9IGlndF9zcGlubmVyX2NyZWF0ZV9yZXF1
ZXN0KCZzcGluLAo+ICAgCQkJCQllbmdpbmUtPmtlcm5lbF9jb250ZXh0LAo+ICAgCQkJCQlNSV9O
T09QKTsgLyogbm8gcHJlZW1wdGlvbiAqLwo+ICsJaW50ZWxfZW5naW5lX3BtX3B1dChlbmdpbmUp
Owo+ICAgCWlmIChJU19FUlIocnEpKSB7Cj4gICAJCWVyciA9IFBUUl9FUlIocnEpOwo+ICAgCQlp
ZiAoZXJyID09IC1FTk9ERVYpCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3Nl
bGZ0ZXN0cy9pbnRlbF9tZW1vcnlfcmVnaW9uLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvaW50ZWxfbWVtb3J5X3JlZ2lvbi5jCj4gaW5kZXggYjYwOTE2NTYxNDYyLi4wNGQwYWE3
YjM0OWUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVs
X21lbW9yeV9yZWdpb24uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9p
bnRlbF9tZW1vcnlfcmVnaW9uLmMKPiBAQCAtNTA2LDcgKzUwNiw5IEBAIHN0YXRpYyBpbnQgaWd0
X2xtZW1fd3JpdGVfY3B1KHZvaWQgKmFyZykKPiAgIAl9Cj4gICAKPiAgIAkvKiBQdXQgdGhlIHBh
Z2VzIGludG8gYSBrbm93biBzdGF0ZSAtLSBmcm9tIHRoZSBncHUgZm9yIGFkZGVkIGZ1biAqLwo+
ICsJaW50ZWxfZW5naW5lX3BtX2dldChlbmdpbmUpOwo+ICAgCWVyciA9IGk5MTVfZ2VtX29iamVj
dF9maWxsX2JsdChvYmosIGVuZ2luZS0+a2VybmVsX2NvbnRleHQsIDB4ZGVhZGJlYWYpOwo+ICsJ
aW50ZWxfZW5naW5lX3BtX3B1dChlbmdpbmUpOwo+ICAgCWlmIChlcnIpCj4gICAJCWdvdG8gb3V0
X3VucGluOwo+ICAgCj4gCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVs
LWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B13F4D708E
	for <lists+intel-gfx@lfdr.de>; Tue, 15 Oct 2019 09:55:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BF1B989DBA;
	Tue, 15 Oct 2019 07:55:34 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BACD689DBA
 for <intel-gfx@lists.freedesktop.org>; Tue, 15 Oct 2019 07:55:32 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 15 Oct 2019 00:55:28 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,298,1566889200"; d="scan'208";a="199652850"
Received: from cwilso3-mobl.fi.intel.com (HELO localhost) ([10.251.82.199])
 by orsmga006.jf.intel.com with ESMTP; 15 Oct 2019 00:55:23 -0700
MIME-Version: 1.0
To: Prathap Kumar Valsan <prathap.kumar.valsan@intel.com>,
 intel-gfx@lists.freedesktop.org
From: Chris Wilson <chris.p.wilson@intel.com>
In-Reply-To: <20191015073129.2375-2-prathap.kumar.valsan@intel.com>
References: <20191015073129.2375-1-prathap.kumar.valsan@intel.com>
 <20191015073129.2375-2-prathap.kumar.valsan@intel.com>
Message-ID: <157112612112.26140.13417455453610846890@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Tue, 15 Oct 2019 08:55:21 +0100
Subject: Re: [Intel-gfx] [PATCH v4 1/1] drm/i915: Add sysfs interface to
 control class-of-service
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: reinette.chatre@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBQcmF0aGFwIEt1bWFyIFZhbHNhbiAoMjAxOS0xMC0xNSAwODozMToyOSkKPiAraW50
IGludGVsX21vY3NfZW1pdF9hbGxfZW5naW5lcyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQo+ICt7Cj4g
KyAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGd0LT5pOTE1Owo+ICsgICAg
ICAgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOwo+ICsgICAgICAgZW51bSBpbnRlbF9l
bmdpbmVfaWQgaWQ7Cj4gKyAgICAgICBpbnQgZXJyOwo+ICsKPiArICAgICAgIGZvcl9lYWNoX2Vu
Z2luZShlbmdpbmUsIGk5MTUsIGlkKSB7CgpQYXNzIGk5MTUsIGFuZCB1c2UgZm9yX2VhY2hfdWFi
aV9lbmdpbmUoZW5naW5lLCBpOTE1KSBpbnN0ZWFkLgoKPiArICAgICAgICAgICAgICAgc3RydWN0
IGk5MTVfcmVxdWVzdCAqcnE7Cj4gKyAgICAgICAgICAgICAgIHN0cnVjdCBkcm1faTkxNV9tb2Nz
X3RhYmxlIHQ7Cj4gKwo+ICsgICAgICAgICAgICAgICBycSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUo
ZW5naW5lLT5rZXJuZWxfY29udGV4dCk7Cj4gKyAgICAgICAgICAgICAgIGlmIChJU19FUlIocnEp
KQo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQVFJfRVJSKHJxKTsKPiArCj4gKyAg
ICAgICAgICAgICAgIGdldF9tb2NzX3NldHRpbmdzKHJxLT5lbmdpbmUtPmd0LCAmdCk7Cj4gKyAg
ICAgICAgICAgICAgIGVyciA9IGVtaXRfbW9jc19jb250cm9sX3RhYmxlKHJxLCAmdCk7Cj4gKyAg
ICAgICAgICAgICAgIGlmIChlcnIpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBpOTE1X3Jl
cXVlc3Rfc2tpcChycSwgZXJyKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBpOTE1X3JlcXVl
c3RfYWRkKHJxKTsKPiArICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyOwo+ICsgICAg
ICAgICAgICAgICB9Cj4gKwo+ICsgICAgICAgICAgICAgICBpOTE1X3JlcXVlc3RfYWRkKHJxKTsK
PiArICAgICAgIH0KPiArCj4gKyAgICAgICByZXR1cm4gMDsKPiArfQo+ICsKPiAgdm9pZCBpbnRl
bF9tb2NzX2luaXQoc3RydWN0IGludGVsX2d0ICpndCkKPiAgewo+ICAgICAgICAgaW50ZWxfbW9j
c19pbml0X2wzY2NfdGFibGUoZ3QpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9tb2NzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9tb2NzLmgK
PiBpbmRleCAyYWU4MTZiN2NhMTkuLjZhNTg0YWEzNjM3MCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9tb2NzLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9tb2NzLmgKPiBAQCAtNDksMTMgKzQ5LDIwIEBACj4gICAqIGNvbnRleHQgaGFu
ZGxpbmcga2VlcCB0aGUgTU9DUyBpbiBzdGVwLgo+ICAgKi8KPiAgCj4gKyNpbmNsdWRlIDxsaW51
eC90eXBlcy5oPgo+ICsKPiAgc3RydWN0IGk5MTVfcmVxdWVzdDsKPiAgc3RydWN0IGludGVsX2Vu
Z2luZV9jczsKPiArc3RydWN0IGludGVsX2NvbnRleHQ7Cj4gIHN0cnVjdCBpbnRlbF9ndDsKPiAg
Cj4gIHZvaWQgaW50ZWxfbW9jc19pbml0KHN0cnVjdCBpbnRlbF9ndCAqZ3QpOwo+ICB2b2lkIGlu
dGVsX21vY3NfaW5pdF9lbmdpbmUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKPiAr
dm9pZCBpbnRlbF9tb2NzX2luaXRfcmVnX3N0YXRlKGNvbnN0IHN0cnVjdCBpbnRlbF9jb250ZXh0
ICpjZSk7Cj4gIAo+ICBpbnQgaW50ZWxfbW9jc19lbWl0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJx
KTsKPiAraW50IGludGVsX21vY3NfZW1pdF9hbGxfZW5naW5lcyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0
KTsKPiArCj4gK2ludCBpbnRlbF9tb2NzX3N0b3JlX2Nsb3Moc3RydWN0IGk5MTVfcmVxdWVzdCAq
cnEsIHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSk7Cj4gIAo+ICAjZW5kaWYKPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9jbG9zLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Nsb3MuYwo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAw
Li5lYWQ2ZmFkY2I1YjMKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9jbG9zLmMKPiBAQCAtMCwwICsxLDEyOCBAQAo+ICsvKgo+ICsgKiBTUERYLUxpY2Vu
c2UtSWRlbnRpZmllcjogTUlUCj4gKyAqCj4gKyAqIENvcHlyaWdodCDCqSAyMDE5IEludGVsIENv
cnBvcmF0aW9uCj4gKyAqLwo+ICsKPiArI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9jb250ZXh0Lmgi
Cj4gKyNpbmNsdWRlICJndC9pbnRlbF9jb250ZXh0LmgiCj4gKyNpbmNsdWRlICJndC9pbnRlbF9t
b2NzLmgiCj4gKwo+ICsjaW5jbHVkZSAiaTkxNV9jbG9zLmgiCj4gKyNpbmNsdWRlICJpOTE1X2Ry
di5oIgo+ICsjaW5jbHVkZSAiaW50ZWxfc2lkZWJhbmQuaCIKPiArCj4gKyNkZWZpbmUgR0VOMTFf
REVGQVVMVF9DTE9TIDAKPiArCj4gK3N0YXRpYyBpbnQgY2xvc19tb2RpZnlfY29udGV4dChzdHJ1
Y3QgaW50ZWxfY29udGV4dCAqY2UpCj4gK3sKPiArICAgICAgIHN0cnVjdCBpOTE1X3JlcXVlc3Qg
KnJxOwo+ICsgICAgICAgaW50IGVycjsKPiArCj4gKyAgICAgICBsb2NrZGVwX2Fzc2VydF9oZWxk
KCZjZS0+cGluX211dGV4KTsKPiArCj4gKyAgICAgICBycSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUo
Y2UtPmVuZ2luZS0+a2VybmVsX2NvbnRleHQpOwo+ICsgICAgICAgaWYgKElTX0VSUihycSkpCj4g
KyAgICAgICAgICAgICAgIHJldHVybiBQVFJfRVJSKHJxKTsKPiArCj4gKyAgICAgICAvKiBTZXJp
YWxpc2Ugd2l0aCB0aGUgcmVtb3RlIGNvbnRleHQgKi8KPiArICAgICAgIGVyciA9IGludGVsX2Nv
bnRleHRfcHJlcGFyZV9yZW1vdGVfcmVxdWVzdChjZSwgcnEpOwo+ICsgICAgICAgaWYgKGVyciA9
PSAwKQo+ICsgICAgICAgICAgICAgICBlcnIgPSBpbnRlbF9tb2NzX3N0b3JlX2Nsb3MocnEsIGNl
KTsKPiArCj4gKyAgICAgICBpOTE1X3JlcXVlc3RfYWRkKHJxKTsKPiArICAgICAgIHJldHVybiBl
cnI7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgY2xvc19jb25maWd1cmVfY29udGV4dChzdHJ1Y3Qg
aTkxNV9nZW1fY29udGV4dCAqY3R4KQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgaTkxNV9nZW1fZW5n
aW5lc19pdGVyIGl0Owo+ICsgICAgICAgc3RydWN0IGludGVsX2NvbnRleHQgKmNlOwo+ICsgICAg
ICAgaW50IGVyciA9IDA7Cj4gKwo+ICsgICAgICAgZm9yX2VhY2hfZ2VtX2VuZ2luZShjZSwgaTkx
NV9nZW1fY29udGV4dF9sb2NrX2VuZ2luZXMoY3R4KSwgaXQpIHsKPiArICAgICAgICAgICAgICAg
R0VNX0JVR19PTihjZSA9PSBjZS0+ZW5naW5lLT5rZXJuZWxfY29udGV4dCk7Cj4gKwo+ICsgICAg
ICAgICAgICAgICBpZiAoY2UtPmVuZ2luZS0+Y2xhc3MgIT0gUkVOREVSX0NMQVNTKQo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwo+ICsKPiArICAgICAgICAgICAgICAgZXJyID0g
aW50ZWxfY29udGV4dF9sb2NrX3Bpbm5lZChjZSk7Cj4gKyAgICAgICAgICAgICAgIGlmIChlcnIp
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gKwo+ICsgICAgICAgICAgICAgICBp
ZiAoaW50ZWxfY29udGV4dF9pc19waW5uZWQoY2UpKQo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGVyciA9IGNsb3NfbW9kaWZ5X2NvbnRleHQoY2UpOwo+ICsKPiArICAgICAgICAgICAgICAgaW50
ZWxfY29udGV4dF91bmxvY2tfcGlubmVkKGNlKTsKPiArICAgICAgICAgICAgICAgaWYgKGVycikK
PiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgIH0KPiArICAgICAgIGk5
MTVfZ2VtX2NvbnRleHRfdW5sb2NrX2VuZ2luZXMoY3R4KTsKPiArCj4gKyAgICAgICByZXR1cm4g
ZXJyOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IGNsb3NfY29uZmlndXJlX2FsbF9jb250ZXh0cyhz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKPiArewo+ICsgICAgICAgc3RydWN0IGk5MTVf
Z2VtX2NvbnRleHQgKmN0eCwgKmNuOwo+ICsgICAgICAgaW50IGVycjsKPiArCj4gKyAgICAgICAv
Kgo+ICsgICAgICAgICogTU9DUyByZWdpc3RlcnMgb2YgcmVuZGVyIGVuZ2luZSBhcmUgY29udGV4
dCBzYXZlZCBhbmQgcmVzdG9yZWQgdG8gYW5kCj4gKyAgICAgICAgKiBmcm9tIGEgY29udGV4dCBp
bWFnZS4KPiArICAgICAgICAqIFNvIGZvciBhbnkgTU9DUyB1cGRhdGUgdG8gcmVmbGVjdCBvbiB0
aGUgZXhpc3RpbmcgY29udGV4dHMgcmVxdWlyZXMKPiArICAgICAgICAqIHVwZGF0aW5nIHRoZSBj
b250ZXh0IGltYWdlLgo+ICsgICAgICAgICovCj4gKyAgICAgICBzcGluX2xvY2soJmk5MTUtPmdl
bS5jb250ZXh0cy5sb2NrKTsKPiArICAgICAgIGxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShjdHgs
IGNuLCAmaTkxNS0+Z2VtLmNvbnRleHRzLmxpc3QsIGxpbmspIHsKPiArICAgICAgICAgICAgICAg
aWYgKGN0eCA9PSBpOTE1LT5rZXJuZWxfY29udGV4dCkKPiArICAgICAgICAgICAgICAgICAgICAg
ICBjb250aW51ZTsKCkRpZCB5b3UgZm9yZ2V0IHNvbWV0aGluZyBoZXJlPwoKPiArCj4gKyAgICAg
ICAgICAgICAgIHNwaW5fdW5sb2NrKCZpOTE1LT5nZW0uY29udGV4dHMubG9jayk7Cj4gKwo+ICsg
ICAgICAgICAgICAgICBlcnIgPSBjbG9zX2NvbmZpZ3VyZV9jb250ZXh0KGN0eCk7Cj4gKyAgICAg
ICAgICAgICAgIGlmIChlcnIpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjsK
PiArCj4gKyAgICAgICAgICAgICAgIHNwaW5fbG9jaygmaTkxNS0+Z2VtLmNvbnRleHRzLmxvY2sp
Owo+ICsgICAgICAgICAgICAgICBsaXN0X3NhZmVfcmVzZXRfbmV4dChjdHgsIGNuLCBsaW5rKTsK
PiArICAgICAgICAgICAgICAgaTkxNV9nZW1fY29udGV4dF9wdXQoY3R4KTsKCi4uLiBTb21ldGhp
bmcgdGhhdCBwYWlycyB3aXRoIHRoZSBwdXQ/Cgo+ICsgICAgICAgfQo+ICsgICAgICAgc3Bpbl91
bmxvY2soJmk5MTUtPmdlbS5jb250ZXh0cy5sb2NrKTsKPiArICAgICAgIC8qCj4gKyAgICAgICAg
KiBBZnRlciB1cGRhdGluZyBhbGwgb3RoZXIgY29udGV4dHMsIHVwZGF0ZSByZW5kZXIgY29udGV4
dCBpbWFnZSBvZgo+ICsgICAgICAgICoga2VybmVsIGNvbnRleHQuIEFsc28gdXBkYXRlIHRoZSBN
T0NTIG9mIG5vbi1yZW5kZXIgZW5naW5lcy4KPiArICAgICAgICAqLwo+ICsgICAgICAgZXJyID0g
aW50ZWxfbW9jc19lbWl0X2FsbF9lbmdpbmVzKCZpOTE1LT5ndCk7Cj4gKwo+ICsgICAgICAgcmV0
dXJuIGVycjsKPiArfQo+ICsKPiAraW50IGk5MTVfbW9jc191cGRhdGVfY2xvcyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKPiArewo+ICsgICAgICAgcmV0dXJuIGNsb3NfY29uZmlndXJl
X2FsbF9jb250ZXh0cyhpOTE1KTsKPiArfQo+ICsKPiArdm9pZCBpOTE1X3JlYWRfY2xvc193YXlf
bWFzayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKPiArewo+ICsgICAgICAgaW50IHJl
dCwgaTsKPiArICAgICAgIHUzMiB2YWw7Cj4gKwo+ICsgICAgICAgaTkxNS0+Y2xvcy5hY3RpdmVf
Y2xvcyA9IEdFTjExX0RFRkFVTFRfQ0xPUzsKPiArCj4gKyAgICAgICBmb3IgKGkgPSAwOyBpIDwg
TlVNX09GX0NMT1M7IGkrKykgewo+ICsgICAgICAgICAgICAgICB2YWwgPSBpOwo+ICsgICAgICAg
ICAgICAgICByZXQgPSBzYW5keWJyaWRnZV9wY29kZV9yZWFkKGk5MTUsCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSUNMX1BDT0RFX0xMQ19DT1NfV0FZX01B
U0tfSU5GTywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAm
dmFsLCBOVUxMKTsKPiArICAgICAgICAgICAgICAgaWYgKHJldCkgewo+ICsgICAgICAgICAgICAg
ICAgICAgICAgIERSTV9FUlJPUigiTWFpbGJveCByZWFkIGVycm9yID0gJWRcbiIsIHJldCk7Cj4g
KyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwo+ICsgICAgICAgICAgICAgICB9Cj4gKwo+
ICsgICAgICAgICAgICAgICBpOTE1LT5jbG9zLndheV9tYXNrW2ldID0gdmFsOwo+ICsgICAgICAg
fQo+ICsKPiArICAgICAgIGk5MTUtPmNsb3Muc3VwcG9ydF93YXlfbWFza19yZWFkID0gdHJ1ZTsK
ClNvIHlvdSBvcHQgZm9yIGJvb3QgZmFpbHVyZSBvbiAxMCBnZW5lcmF0aW9ucz8KCj4gK30KPiAr
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfY2xvcy5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9jbG9zLmgKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4
IDAwMDAwMDAwMDAwMC4uMDJiZmJkYWYwY2EzCj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfY2xvcy5oCj4gQEAgLTAsMCArMSwxNSBAQAo+ICsvKgo+ICsg
KiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCj4gKyAqCj4gKyAqIENvcHlyaWdodCDCqSAy
MDE5IEludGVsIENvcnBvcmF0aW9uCj4gKyAqLwo+ICsKPiArI2lmbmRlZiBfX0k5MTVfQ0xPU19I
X18KPiArI2RlZmluZSBfX0k5MTVfQ0xPU19IX18KPiArCj4gK3N0cnVjdCBkcm1faTkxNV9wcml2
YXRlOwo+ICsKPiAraW50IGk5MTVfbW9jc191cGRhdGVfY2xvcyhzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSk7Cj4gK3ZvaWQgaTkxNV9yZWFkX2Nsb3Nfd2F5X21hc2soc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmk5MTUpOwo+ICsKPiArI2VuZGlmIC8qIF9fSTkxNV9DTE9TX0hfXyAqLwo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaAo+IGluZGV4IGM0NmIzMzkwNjRjMC4uNzNkMWY3OWYzNDdl
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCj4gQEAgLTEzMTMsNiArMTMxMywxNiBAQCBz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSB7Cj4gICAgICAgICAgICAgICAgIGJvb2wgZGlzdHJ1c3Rf
Ymlvc193bTsKPiAgICAgICAgIH0gd207Cj4gIAo+ICsgICAgICAgLyogTGFzdCBMZXZlbCBDYWNo
ZSAgQ2xhc3Mgb2YgU2VydmljZSAqLwo+ICsgICAgICAgc3RydWN0IHsKPiArICAgICAgICAgICAg
ICAgYm9vbCBzdXBwb3J0X3dheV9tYXNrX3JlYWQ7Cj4gKyAgICAgICAgICAgICAgIHUzMiBhY3Rp
dmVfY2xvczsKPiArI2RlZmluZSBOVU1fT0ZfQ0xPUyA0CgpXZSBkb24ndCB1c2UgX09GXwoKPiAr
ICAgICAgICAgICAgICAgdTE2IHdheV9tYXNrW05VTV9PRl9DTE9TXTsKPiArICAgICAgICAgICAg
ICAgLyogTG9jayB0byBzZXJpYWxpemUgdXBkYXRpbmcgZGV2aWNlIGNsb3MgdmlhIHN5c2ZzIGlu
dGVyZmFjZS4qLwo+ICsgICAgICAgICAgICAgICBzdHJ1Y3QgbXV0ZXggbG9jazsKCkF0IGxlYXN0
IHRyeSB0byByZW9yZGVyIHRoaXMgc28gdGhlIGhvbGVzIGFyZSBsZXNzIG9idmlvdXMuCgo+ICsg
ICAgICAgfSBjbG9zOwo+ICsKPiAgICAgICAgIHN0cnVjdCBkcmFtX2luZm8gewo+ICAgICAgICAg
ICAgICAgICBib29sIHZhbGlkOwo+ICAgICAgICAgICAgICAgICBib29sIGlzXzE2Z2JfZGltbTsK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKPiBpbmRleCAwZGRiZDNhNWZiOGQuLmIyYjg5Y2E4Yzcy
NiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCj4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwo+IEBAIC01NCw2ICs1NCw3IEBACj4gICNp
bmNsdWRlICJndC9pbnRlbF9yZW5kZXJzdGF0ZS5oIgo+ICAjaW5jbHVkZSAiZ3QvaW50ZWxfd29y
a2Fyb3VuZHMuaCIKPiAgCj4gKyNpbmNsdWRlICJpOTE1X2Nsb3MuaCIKPiAgI2luY2x1ZGUgImk5
MTVfZHJ2LmgiCj4gICNpbmNsdWRlICJpOTE1X3NjYXR0ZXJsaXN0LmgiCj4gICNpbmNsdWRlICJp
OTE1X3RyYWNlLmgiCj4gQEAgLTEyODEsNiArMTI4Miw4IEBAIGludCBpOTE1X2dlbV9pbml0KHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgCj4gICAgICAgICBpbnRlbF91Y19p
bml0KCZkZXZfcHJpdi0+Z3QudWMpOwo+ICAKPiArICAgICAgIGk5MTVfcmVhZF9jbG9zX3dheV9t
YXNrKGRldl9wcml2KTsKClRoaXMgc2VlbXMgdmVyeSBvdXQgb2YgcGxhY2UuCgo+ICAgICAgICAg
cmV0ID0gaW50ZWxfZ3RfaW5pdF9odygmZGV2X3ByaXYtPmd0KTsKPiAgICAgICAgIGlmIChyZXQp
Cj4gICAgICAgICAgICAgICAgIGdvdG8gZXJyX3VjX2luaXQ7Cj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Jl
Zy5oCj4gaW5kZXggZTI0OTkxZTU0ODk3Li5kOTY4OWE0OTQ5MTAgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfcmVnLmgKPiBAQCAtODg2OSw2ICs4ODY5LDcgQEAgZW51bSB7Cj4gICNkZWZpbmUgICBJ
Q0xfUENPREVfTUVNX1NVQlNZU1lTVEVNX0lORk8gICAgICAgMHhkCj4gICNkZWZpbmUgICAgIElD
TF9QQ09ERV9NRU1fU1NfUkVBRF9HTE9CQUxfSU5GTyAgKDB4MCA8PCA4KQo+ICAjZGVmaW5lICAg
ICBJQ0xfUENPREVfTUVNX1NTX1JFQURfUUdWX1BPSU5UX0lORk8ocG9pbnQpICAgICAgICAoKChw
b2ludCkgPDwgMTYpIHwgKDB4MSA8PCA4KSkKPiArI2RlZmluZSAgIElDTF9QQ09ERV9MTENfQ09T
X1dBWV9NQVNLX0lORk8gICAgICAweDFkCj4gICNkZWZpbmUgICBHRU42X1BDT0RFX1JFQURfRF9D
T01QICAgICAgICAgICAgICAgMHgxMAo+ICAjZGVmaW5lICAgR0VONl9QQ09ERV9XUklURV9EX0NP
TVAgICAgICAgICAgICAgIDB4MTEKPiAgI2RlZmluZSAgIEhTV19QQ09ERV9ERV9XUklURV9GUkVR
X1JFUSAgICAgICAgICAweDE3Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfc3lzZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3lzZnMuYwo+IGluZGV4IGJm
MDM5YjhiYTU5My4uY2I5MGNlZTQ3NGZiIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfc3lzZnMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3lzZnMu
Ywo+IEBAIC0zMiwxMCArMzIsMTIgQEAKPiAgCj4gICNpbmNsdWRlICJndC9pbnRlbF9yYzYuaCIK
PiAgCj4gKyNpbmNsdWRlICJpOTE1X2Nsb3MuaCIKPiAgI2luY2x1ZGUgImk5MTVfZHJ2LmgiCj4g
ICNpbmNsdWRlICJpOTE1X3N5c2ZzLmgiCj4gICNpbmNsdWRlICJpbnRlbF9wbS5oIgo+ICAjaW5j
bHVkZSAiaW50ZWxfc2lkZWJhbmQuaCIKPiArI2luY2x1ZGUgImd0L2ludGVsX21vY3MuaCIKPiAg
Cj4gIHN0YXRpYyBpbmxpbmUgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmtkZXZfbWlub3JfdG9f
aTkxNShzdHJ1Y3QgZGV2aWNlICprZGV2KQo+ICB7Cj4gQEAgLTI1NSw2ICsyNTcsOTIgQEAgc3Rh
dGljIGNvbnN0IHN0cnVjdCBiaW5fYXR0cmlidXRlIGRwZl9hdHRyc18xID0gewo+ICAgICAgICAg
LnByaXZhdGUgPSAodm9pZCAqKTEKPiAgfTsKPiAgCj4gK3N0YXRpYyBzc2l6ZV90IGxsY19jbG9z
X3Nob3coc3RydWN0IGRldmljZSAqa2RldiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICphdHRyLCBjaGFyICpidWYpCj4gK3sKPiArICAgICAg
IHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGtkZXZfbWlub3JfdG9faTkxNShr
ZGV2KTsKPiArICAgICAgIHNzaXplX3QgbGVuID0gMDsKPiArICAgICAgIGludCBhY3RpdmVfY2xv
czsKPiArCj4gKyAgICAgICBhY3RpdmVfY2xvcyA9IGRldl9wcml2LT5jbG9zLmFjdGl2ZV9jbG9z
Owo+ICsgICAgICAgbGVuICs9IHNucHJpbnRmKGJ1ZiArIGxlbiwgUEFHRV9TSVpFLCAiMHgleFxu
IiwKPiArICAgICAgICAgICAgICAgICAgICAgICBkZXZfcHJpdi0+Y2xvcy53YXlfbWFza1thY3Rp
dmVfY2xvc10pOwoKR28gdGhyb3VnaCB0aGlzIHBhaXIgd2l0aCBSRUFEL1dSSVRFX09OQ0UgdG8g
aGlnaGxpZ2h0IHRoZSByYWNlcyB0bwp5b3Vyc2VsZiBhbmQgd29yayBvdXQgaWYgdGhleSBhcmUg
bGVnYWwgKGFuZCBwcmV2ZW50IHRoZSBjb21waWxlciBmcm9tCmZvdWxpbmcgdXAgeW91ciByYWNl
IHByZXZlbnRpb24gbG9naWMpLgoKPiArICAgICAgIHJldHVybiBsZW47Cj4gK30KPiArCj4gKy8q
Cj4gKyAqIFRoaXMgd2lsbCB0aWUgdGhlIEdQVSBkZXZpY2UgdG8gYSBjbGFzcy1vZi1zZXJ2aWNl
LiBFYWNoIGNsYXNzLW9mLXNlcnZpY2UKPiArICogaGFzIHdheV9tYXNrIGFzc29jaWF0ZWQgd2l0
aCBpdC4gQSB3YXktbWFzayBkZXRlcm1pbmVzIHRoZSBMTEMgY2FjaGUgd2F5cwo+ICsgKiB0aGF0
IHdpbCBiZSB1c2VkIHRvIGFsbG9jYXRlIGNhY2hlbGluZXMgZm9yIHRoZSBHUFUgbWVtb3J5IGFj
Y2Vzc2VzLgo+ICsgKi8KPiArc3RhdGljIHNzaXplX3QgbGxjX2Nsb3Nfc3RvcmUoc3RydWN0IGRl
dmljZSAqa2RldiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZGV2aWNl
X2F0dHJpYnV0ZSAqYXR0ciwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBj
aGFyICpidWYsIHNpemVfdCBjb3VudCkKPiArewo+ICsgICAgICAgc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2ID0ga2Rldl9taW5vcl90b19pOTE1KGtkZXYpOwo+ICsgICAgICAgdTgg
YWN0aXZlX2Nsb3MsIG5ld19jbG9zLCBjbG9zX2luZGV4Owo+ICsgICAgICAgYm9vbCB2YWxpZF9t
YXNrID0gZmFsc2U7Cj4gKyAgICAgICBzc2l6ZV90IHJldDsKPiArICAgICAgIHUxNiB3YXlfbWFz
azsKPiArCj4gKyAgICAgICByZXQgPSBrc3RydG91MTYoYnVmLCAwLCAmd2F5X21hc2spOwo+ICsg
ICAgICAgaWYgKHJldCkKPiArICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiArCj4gKyAgICAg
ICBhY3RpdmVfY2xvcyA9IGRldl9wcml2LT5jbG9zLmFjdGl2ZV9jbG9zOwo+ICsKPiArICAgICAg
IGlmIChkZXZfcHJpdi0+Y2xvcy53YXlfbWFza1thY3RpdmVfY2xvc10gPT0gd2F5X21hc2spCj4g
KyAgICAgICAgICAgICAgIHJldHVybiBjb3VudDsKPiArCj4gKyAgICAgICBmb3IgKGNsb3NfaW5k
ZXggPSAwOyBjbG9zX2luZGV4IDwgTlVNX09GX0NMT1M7IGNsb3NfaW5kZXgrKykgewo+ICsgICAg
ICAgICAgICAgICBpZiAoZGV2X3ByaXYtPmNsb3Mud2F5X21hc2tbY2xvc19pbmRleF0gPT0gd2F5
X21hc2spIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBuZXdfY2xvcyA9IGNsb3NfaW5kZXg7
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRfbWFzayA9IHRydWU7Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgYnJlYWs7Cj4gKyAgICAgICAgICAgICAgIH0KPiArICAgICAgIH0KPiAr
Cj4gKyAgICAgICBpZiAoIXZhbGlkX21hc2spCj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRUlO
VkFMOwo+ICsKPiArICAgICAgIHJldCA9IG11dGV4X2xvY2tfaW50ZXJydXB0aWJsZSgmZGV2X3By
aXYtPmNsb3MubG9jayk7Cj4gKyAgICAgICBpZiAocmV0KQo+ICsgICAgICAgICAgICAgICByZXR1
cm4gcmV0Owo+ICsKPiArICAgICAgIGRldl9wcml2LT5jbG9zLmFjdGl2ZV9jbG9zID0gbmV3X2Ns
b3M7Cj4gKyAgICAgICByZXQgPSBpOTE1X21vY3NfdXBkYXRlX2Nsb3MoZGV2X3ByaXYpOwo+ICsg
ICAgICAgaWYgKHJldCkgewo+ICsgICAgICAgICAgICAgICBEUk1fRVJST1IoIkZhaWxlZCB0byB1
cGRhdGUgQ2xhc3Mgb2Ygc2VydmljZVxuIik7Cj4gKyAgICAgICAgICAgICAgIGRldl9wcml2LT5j
bG9zLmFjdGl2ZV9jbG9zID0gYWN0aXZlX2Nsb3M7CgpIYWxmIHRoZSBjb250ZXh0cyBhcmUgdXNp
bmcgbmV3X2Nsb3MuIE9uZSB3YXkgb3V0IG1pZ2h0IGJlIHRvIHNldF93ZWRnZWQKYW5kIGJ1cm4g
YWxsIHRoZSBldmlkZW5jZS4KCj4gKyAgICAgICAgICAgICAgIG11dGV4X3VubG9jaygmZGV2X3By
aXYtPmNsb3MubG9jayk7Cj4gKyAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gKyAgICAgICB9
Cj4gKwo+ICsgICAgICAgbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+Y2xvcy5sb2NrKTsKPiArCj4g
KyAgICAgICByZXR1cm4gY291bnQ7Cj4gK30KPiArCj4gK3N0YXRpYyBzc2l6ZV90IGxsY19jbG9z
X21vZGVzX3Nob3coc3RydWN0IGRldmljZSAqa2RldiwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICphdHRyLCBjaGFyICpidWYpCj4g
K3sKPiArICAgICAgIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGtkZXZfbWlu
b3JfdG9faTkxNShrZGV2KTsKPiArICAgICAgIHNzaXplX3QgbGVuID0gMDsKPiArICAgICAgIGlu
dCBpOwo+ICsKPiArICAgICAgIGZvciAoaSA9IDA7IGkgPCBOVU1fT0ZfQ0xPUzsgaSsrKQo+ICsg
ICAgICAgICAgICAgICBsZW4gKz0gc25wcmludGYoYnVmICsgbGVuLCBQQUdFX1NJWkUsICIweCV4
ICIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZfcHJpdi0+Y2xvcy53YXlf
bWFza1tpXSk7Cj4gKwo+ICsgICAgICAgbGVuICs9IHNucHJpbnRmKGJ1ZiArIGxlbiwgUEFHRV9T
SVpFLCAiXG4iKTsKCk9uZSB3YXkgb3RoZXIgc3lzZnMgdXNlIGZvciBhIHNpbmdsZSBpbnRlcmZh
Y2UgaXMgdG8gc2hvdyB0aGUgYWN0aXZlCm1vZGUgd2l0aCBhbiBhc3RlcmlzayBbKl0uCgo+ICsK
PiArICAgICAgIHJldHVybiBsZW47Cj4gK30KPiArCj4gK3N0YXRpYyBERVZJQ0VfQVRUUl9SVyhs
bGNfY2xvcyk7Cj4gK3N0YXRpYyBERVZJQ0VfQVRUUl9STyhsbGNfY2xvc19tb2Rlcyk7Cj4gKwo+
ICBzdGF0aWMgc3NpemVfdCBndF9hY3RfZnJlcV9taHpfc2hvdyhzdHJ1Y3QgZGV2aWNlICprZGV2
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkZXZpY2VfYXR0
cmlidXRlICphdHRyLCBjaGFyICpidWYpCj4gIHsKPiBAQCAtNTc0LDYgKzY2MiwxOCBAQCB2b2lk
IGk5MTVfc2V0dXBfc3lzZnMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+ICAg
ICAgICAgc3RydWN0IGRldmljZSAqa2RldiA9IGRldl9wcml2LT5kcm0ucHJpbWFyeS0+a2RldjsK
PiAgICAgICAgIGludCByZXQ7Cj4gIAo+ICsgICAgICAgaWYgKGRldl9wcml2LT5jbG9zLnN1cHBv
cnRfd2F5X21hc2tfcmVhZCkgewo+ICsgICAgICAgICAgICAgICByZXQgPSBzeXNmc19jcmVhdGVf
ZmlsZSgma2Rldi0+a29iaiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgJmRldl9hdHRyX2xsY19jbG9zLmF0dHIpOwo+ICsgICAgICAgICAgICAgICBpZiAocmV0KQo+
ICsgICAgICAgICAgICAgICAgICAgICAgIERSTV9FUlJPUigiTExDIENPUyBzeXNmcyBzZXR1cCBm
YWlsZWRcbiIpOwo+ICsKPiArICAgICAgICAgICAgICAgcmV0ID0gc3lzZnNfY3JlYXRlX2ZpbGUo
JmtkZXYtPmtvYmosCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZk
ZXZfYXR0cl9sbGNfY2xvc19tb2Rlcy5hdHRyKTsKPiArICAgICAgICAgICAgICAgaWYgKHJldCkK
PiArICAgICAgICAgICAgICAgICAgICAgICBEUk1fRVJST1IoIkxMQyBDT1Mgc3lzZnMgc2V0dXAg
ZmFpbGVkXG4iKTsKCk9uIHRoZSBzY2FsZSBvZiAwLTksIGhvdyBzZXJpb3VzIGlzIHRoaXMgYWN0
dWFsbHk/CgpNb3JlIGxpa2UgYSA0IHRoYW4gNj8KCj4gKyAgICAgICB9CgotLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
SW50ZWwgQ29ycG9yYXRpb24gKFVLKSBMaW1pdGVkClJlZ2lzdGVyZWQgTm8uIDExMzQ5NDUgKEVu
Z2xhbmQpClJlZ2lzdGVyZWQgT2ZmaWNlOiBQaXBlcnMgV2F5LCBTd2luZG9uIFNOMyAxUkoKVkFU
IE5vOiA4NjAgMjE3MyA0NwoKVGhpcyBlLW1haWwgYW5kIGFueSBhdHRhY2htZW50cyBtYXkgY29u
dGFpbiBjb25maWRlbnRpYWwgbWF0ZXJpYWwgZm9yCnRoZSBzb2xlIHVzZSBvZiB0aGUgaW50ZW5k
ZWQgcmVjaXBpZW50KHMpLiBBbnkgcmV2aWV3IG9yIGRpc3RyaWJ1dGlvbgpieSBvdGhlcnMgaXMg
c3RyaWN0bHkgcHJvaGliaXRlZC4gSWYgeW91IGFyZSBub3QgdGhlIGludGVuZGVkCnJlY2lwaWVu
dCwgcGxlYXNlIGNvbnRhY3QgdGhlIHNlbmRlciBhbmQgZGVsZXRlIGFsbCBjb3BpZXMuCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWls
aW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

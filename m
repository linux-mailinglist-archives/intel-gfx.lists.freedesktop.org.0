Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 64845105B95
	for <lists+intel-gfx@lfdr.de>; Thu, 21 Nov 2019 22:07:21 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A90796E1B2;
	Thu, 21 Nov 2019 21:07:18 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 948826E198;
 Thu, 21 Nov 2019 21:07:16 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 21 Nov 2019 13:07:16 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,227,1571727600"; d="scan'208";a="357922933"
Received: from fmsmsx105.amr.corp.intel.com ([10.18.124.203])
 by orsmga004.jf.intel.com with ESMTP; 21 Nov 2019 13:07:15 -0800
Received: from fmsmsx155.amr.corp.intel.com (10.18.116.71) by
 FMSMSX105.amr.corp.intel.com (10.18.124.203) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Thu, 21 Nov 2019 13:07:15 -0800
Received: from fmsmsx106.amr.corp.intel.com ([169.254.5.77]) by
 FMSMSX155.amr.corp.intel.com ([169.254.5.120]) with mapi id 14.03.0439.000;
 Thu, 21 Nov 2019 13:07:14 -0800
From: "Tang, CQ" <cq.tang@intel.com>
To: Chris Wilson <chris@chris-wilson.co.uk>, "intel-gfx@lists.freedesktop.org"
 <intel-gfx@lists.freedesktop.org>
Thread-Topic: [Intel-gfx] [PATCH i-g-t 5/9] i915/gem_ctx_isolation: Check
 engine relative registers
Thread-Index: AQHVmiFg1hz+X2kwukOphZHGyumq8aeWKqqw
Date: Thu, 21 Nov 2019 21:07:13 +0000
Message-ID: <1D440B9B88E22A4ABEF89F9F1F81BC29E94A5E2E@FMSMSX106.amr.corp.intel.com>
References: <20191113125240.3781-1-chris@chris-wilson.co.uk>
 <20191113125240.3781-5-chris@chris-wilson.co.uk>
In-Reply-To: <20191113125240.3781-5-chris@chris-wilson.co.uk>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-titus-metadata-40: eyJDYXRlZ29yeUxhYmVscyI6IiIsIk1ldGFkYXRhIjp7Im5zIjoiaHR0cDpcL1wvd3d3LnRpdHVzLmNvbVwvbnNcL0ludGVsMyIsImlkIjoiMDkzYTE3ZTctNmQyOC00Mjc1LWIyMjMtOWY1NWVhOWJjZWQ4IiwicHJvcHMiOlt7Im4iOiJDVFBDbGFzc2lmaWNhdGlvbiIsInZhbHMiOlt7InZhbHVlIjoiQ1RQX05UIn1dfV19LCJTdWJqZWN0TGFiZWxzIjpbXSwiVE1DVmVyc2lvbiI6IjE3LjEwLjE4MDQuNDkiLCJUcnVzdGVkTGFiZWxIYXNoIjoiNnhGaFM1R2dYSTNlQmRKTjBZSUNIYUFrQmJFeWt0eGdrUXZ3Z01oNGxrcUhWbUZkV2lQTTFveFwvajVQQUNvOFMifQ==
x-ctpclassification: CTP_NT
dlp-product: dlpe-windows
dlp-version: 11.2.0.6
dlp-reaction: no-action
x-originating-ip: [10.1.200.106]
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH i-g-t 5/9] i915/gem_ctx_isolation: Check
 engine relative registers
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "igt-dev@lists.freedesktop.org" <igt-dev@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

DQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogSW50ZWwtZ2Z4IDxpbnRl
bC1nZngtYm91bmNlc0BsaXN0cy5mcmVlZGVza3RvcC5vcmc+IE9uIEJlaGFsZiBPZg0KPiBDaHJp
cyBXaWxzb24NCj4gU2VudDogV2VkbmVzZGF5LCBOb3ZlbWJlciAxMywgMjAxOSA0OjUzIEFNDQo+
IFRvOiBpbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnDQo+IENjOiBpZ3QtZGV2QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZw0KPiBTdWJqZWN0OiBbSW50ZWwtZ2Z4XSBbUEFUQ0ggaS1nLXQgNS85
XSBpOTE1L2dlbV9jdHhfaXNvbGF0aW9uOiBDaGVjayBlbmdpbmUNCj4gcmVsYXRpdmUgcmVnaXN0
ZXJzDQo+IA0KPiBTb21lIG9mIHRoZSBub24tcHJpdmlsZWdlZCByZWdpc3RlcnMgYXJlIGF0IHRo
ZSBzYW1lIG9mZnNldCBvbiBlYWNoIGVuZ2luZS4NCj4gV2UgY2FuIGltcHJvdmUgb3VyIGNvdmVy
YWdlIGZvciB1bmtub3duIEhXIGxheW91dCBieSB1c2luZyB0aGUgcmVwb3J0ZWQNCj4gZW5naW5l
LT5tbWlvX2Jhc2UgZm9yIHJlbGF0aXZlIG9mZnNldHMuDQo+IA0KPiBTaWduZWQtb2ZmLWJ5OiBD
aHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4NCj4gLS0tDQo+ICB0ZXN0cy9p
OTE1L2dlbV9jdHhfaXNvbGF0aW9uLmMgfCAxNjQgKysrKysrKysrKysrKysrKysrKystLS0tLS0t
LS0tLS0tDQo+ICAxIGZpbGUgY2hhbmdlZCwgMTAwIGluc2VydGlvbnMoKyksIDY0IGRlbGV0aW9u
cygtKQ0KPiANCj4gZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX2N0eF9pc29sYXRpb24uYyBi
L3Rlc3RzL2k5MTUvZ2VtX2N0eF9pc29sYXRpb24uYw0KPiBpbmRleCA2YWEyNzEzM2MuLjU0NmZm
YWMzYSAxMDA2NDQNCj4gLS0tIGEvdGVzdHMvaTkxNS9nZW1fY3R4X2lzb2xhdGlvbi5jDQo+ICsr
KyBiL3Rlc3RzL2k5MTUvZ2VtX2N0eF9pc29sYXRpb24uYw0KPiBAQCAtNzAsNiArNzAsNyBAQCBz
dGF0aWMgY29uc3Qgc3RydWN0IG5hbWVkX3JlZ2lzdGVyIHsNCj4gIAl1aW50MzJfdCBpZ25vcmVf
Yml0czsNCj4gIAl1aW50MzJfdCB3cml0ZV9tYXNrOyAvKiBzb21lIHJlZ2lzdGVycyBiaXRzIGRv
IG5vdCBleGlzdCAqLw0KPiAgCWJvb2wgbWFza2VkOw0KPiArCWJvb2wgcmVsYXRpdmU7DQo+ICB9
IG5vbnByaXZfcmVnaXN0ZXJzW10gPSB7DQo+ICAJeyAiTk9QSUQiLCBOT0NUWCwgUkNTMCwgMHgy
MDk0IH0sDQo+ICAJeyAiTUlfUFJFRElDQVRFX1JFU1VMVF8yIiwgTk9DVFgsIFJDUzAsIDB4MjNi
YyB9LCBAQCAtMTA5LDcNCj4gKzExMCw2IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgbmFtZWRfcmVn
aXN0ZXIgew0KPiAgCXsgIlBTX0RFUFRIX0NPVU5UXzEiLCBHRU44LCBSQ1MwLCAweDIyZjgsIDIg
fSwNCj4gIAl7ICJCQl9PRkZTRVQiLCBHRU44LCBSQ1MwLCAweDIxNTgsIC5pZ25vcmVfYml0cyA9
IDB4NyB9LA0KPiAgCXsgIk1JX1BSRURJQ0FURV9SRVNVTFRfMSIsIEdFTjgsIFJDUzAsIDB4MjQx
YyB9LA0KPiAtCXsgIkNTX0dQUiIsIEdFTjgsIFJDUzAsIDB4MjYwMCwgMzIgfSwNCj4gIAl7ICJP
QV9DVFhfQ09OVFJPTCIsIEdFTjgsIFJDUzAsIDB4MjM2MCB9LA0KPiAgCXsgIk9BQ1RYSUQiLCBH
RU44LCBSQ1MwLCAweDIzNjQgfSwNCj4gIAl7ICJQU19JTlZPQ0FUSU9OX0NPVU5UXzIiLCBHRU44
LCBSQ1MwLCAweDI0NDgsIDIsIC53cml0ZV9tYXNrDQo+ID0gfjB4MyB9LCBAQCAtMTM4LDc5ICsx
MzgsNTYgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBuYW1lZF9yZWdpc3RlciB7DQo+IA0KPiAgCXsg
IkNUWF9QUkVFTVBUIiwgTk9DVFggLyogR0VOMTAgKi8sIFJDUzAsIDB4MjI0OCB9LA0KPiAgCXsg
IkNTX0NISUNLRU4xIiwgR0VOMTEsIFJDUzAsIDB4MjU4MCwgLm1hc2tlZCA9IHRydWUgfSwNCj4g
LQl7ICJIRENfQ0hJQ0tFTjEiLCBHRU5fUkFOR0UoMTAsIDEwKSwgUkNTMCwgMHg3MzA0LCAubWFz
a2VkID0NCj4gdHJ1ZSB9LA0KPiANCj4gIAkvKiBQcml2aWxlZ2VkIChlbmFibGVkIGJ5IHcvYSAr
IEZPUkNFX1RPX05PTlBSSVYpICovDQo+ICAJeyAiQ1RYX1BSRUVNUFQiLCBOT0NUWCAvKiBHRU45
ICovLCBSQ1MwLCAweDIyNDggfSwNCj4gIAl7ICJDU19DSElDS0VOMSIsIEdFTl9SQU5HRSg5LCAx
MCksIFJDUzAsIDB4MjU4MCwgLm1hc2tlZCA9IHRydWUgfSwNCj4gIAl7ICJDT01NT05fU0xJQ0Vf
Q0hJQ0tFTjIiLCBHRU5fUkFOR0UoOSwgOSksIFJDUzAsDQo+IDB4NzAxNCwgLm1hc2tlZCA9IHRy
dWUgfSwNCj4gLQl7ICJIRENfQ0hJQ0tFTjEiLCBHRU5fUkFOR0UoOSwgOSksIFJDUzAsIDB4NzMw
NCwgLm1hc2tlZCA9DQo+IHRydWUgfSwNCj4gKwl7ICJIRENfQ0hJQ0tFTjEiLCBHRU5fUkFOR0Uo
OSwgMTApLCBSQ1MwLCAweDczMDQsIC5tYXNrZWQgPQ0KPiB0cnVlIH0sDQo+ICAJeyAiU0xJQ0Vf
Q09NTU9OX0VDT19DSElDS0VOMSIsIEdFTl9SQU5HRSgxMSwgMTEpIC8qICsgZ2xrICovLA0KPiBS
Q1MwLCAgMHg3MzFjLCAubWFza2VkID0gdHJ1ZSB9LA0KPiAgCXsgIkwzU1FSRUc0IiwgTk9DVFgg
LyogR0VOOTpza2wsa2JsICovLCBSQ1MwLCAweGIxMTgsIC53cml0ZV9tYXNrDQo+ID0gfjB4MWZm
ZmYwIH0sDQo+ICAJeyAiSEFMRl9TTElDRV9DSElDS0VONyIsIEdFTl9SQU5HRSgxMSwgMTEpLCBS
Q1MwLA0KPiAweGUxOTQsIC5tYXNrZWQgPSB0cnVlIH0sDQo+ICAJeyAiU0FNUExFUl9NT0RFIiwg
R0VOX1JBTkdFKDExLCAxMSksIFJDUzAsIDB4ZTE4YywgLm1hc2tlZCA9DQo+IHRydWUgfSwNCj4g
DQo+IC0JeyAiQkNTX0dQUiIsIEdFTjksIEJDUzAsIDB4MjI2MDAsIDMyIH0sDQo+ICAJeyAiQkNT
X1NXQ1RSTCIsIEdFTjgsIEJDUzAsIDB4MjIyMDAsIC53cml0ZV9tYXNrID0gMHgzLCAubWFza2Vk
ID0NCj4gdHJ1ZSB9LA0KPiANCj4gIAl7ICJNRkNfVkRCT1gxIiwgTk9DVFgsIFZDUzAsIDB4MTI4
MDAsIDY0IH0sDQo+ICAJeyAiTUZDX1ZEQk9YMiIsIE5PQ1RYLCBWQ1MxLCAweDFjODAwLCA2NCB9
LA0KPiANCj4gLQl7ICJWQ1MwX0dQUiIsIEdFTl9SQU5HRSg5LCAxMCksIFZDUzAsIDB4MTI2MDAs
IDMyIH0sDQo+IC0JeyAiVkNTMV9HUFIiLCBHRU5fUkFOR0UoOSwgMTApLCBWQ1MxLCAweDFjNjAw
LCAzMiB9LA0KPiAtCXsgIlZFQ1NfR1BSIiwgR0VOX1JBTkdFKDksIDEwKSwgVkVDUzAsIDB4MWE2
MDAsIDMyIH0sDQo+IC0NCj4gLQl7ICJWQ1MwX0dQUiIsIEdFTjExLCBWQ1MwLCAweDFjMDYwMCwg
MzIgfSwNCj4gLQl7ICJWQ1MxX0dQUiIsIEdFTjExLCBWQ1MxLCAweDFjNDYwMCwgMzIgfSwNCj4g
LQl7ICJWQ1MyX0dQUiIsIEdFTjExLCBWQ1MyLCAweDFkMDYwMCwgMzIgfSwNCj4gLQl7ICJWQ1Mz
X0dQUiIsIEdFTjExLCBWQ1MzLCAweDFkNDYwMCwgMzIgfSwNCj4gLQl7ICJWRUNTX0dQUiIsIEdF
TjExLCBWRUNTMCwgMHgxYzg2MDAsIDMyIH0sDQo+ICsJeyAieENTX0dQUiIsIEdFTjksIEFMTCwg
MHg2MDAsIDMyLCAucmVsYXRpdmUgPSB0cnVlIH0sDQo+IA0KPiAgCXt9DQo+ICB9LCBpZ25vcmVf
cmVnaXN0ZXJzW10gPSB7DQo+ICAJeyAiUkNTIHRpbWVzdGFtcCIsIEdFTjYsIH4wdSwgMHgyMzU4
IH0sDQo+ICAJeyAiQkNTIHRpbWVzdGFtcCIsIEdFTjcsIH4wdSwgMHgyMjM1OCB9LA0KPiANCj4g
LQl7ICJWQ1MwIHRpbWVzdGFtcCIsIEdFTl9SQU5HRSg3LCAxMCksIH4wdSwgMHgxMjM1OCB9LA0K
PiAtCXsgIlZDUzEgdGltZXN0YW1wIiwgR0VOX1JBTkdFKDcsIDEwKSwgfjB1LCAweDFjMzU4IH0s
DQo+IC0JeyAiVkVDUyB0aW1lc3RhbXAiLCBHRU5fUkFOR0UoOCwgMTApLCB+MHUsIDB4MWEzNTgg
fSwNCj4gLQ0KPiAtCXsgIlZDUzAgdGltZXN0YW1wIiwgR0VOMTEsIH4wdSwgMHgxYzAzNTggfSwN
Cj4gLQl7ICJWQ1MxIHRpbWVzdGFtcCIsIEdFTjExLCB+MHUsIDB4MWM0MzU4IH0sDQo+IC0JeyAi
VkNTMiB0aW1lc3RhbXAiLCBHRU4xMSwgfjB1LCAweDFkMDM1OCB9LA0KPiAtCXsgIlZDUzMgdGlt
ZXN0YW1wIiwgR0VOMTEsIH4wdSwgMHgxZDQzNTggfSwNCj4gLQl7ICJWRUNTIHRpbWVzdGFtcCIs
IEdFTjExLCB+MHUsIDB4MWM4MzU4IH0sDQo+ICsJeyAieENTIHRpbWVzdGFtcCIsIEdFTjgsIEFM
TCwgMHgzNTgsIC5yZWxhdGl2ZSA9IHRydWUgfSwNCj4gDQo+ICAJLyogaHVjIHJlYWQgb25seSAq
Lw0KPiAtCXsgIkJTRDAgMHgyMDAwIiwgR0VOMTEsIH4wdSwgMHgxYzAwMDAgKyAweDIwMDAgfSwN
Cj4gLQl7ICJCU0QwIDB4MjAwMCIsIEdFTjExLCB+MHUsIDB4MWMwMDAwICsgMHgyMDE0IH0sDQo+
IC0JeyAiQlNEMCAweDIwMDAiLCBHRU4xMSwgfjB1LCAweDFjMDAwMCArIDB4MjNiMCB9LA0KPiAt
DQo+IC0JeyAiQlNEMSAweDIwMDAiLCBHRU4xMSwgfjB1LCAweDFjNDAwMCArIDB4MjAwMCB9LA0K
PiAtCXsgIkJTRDEgMHgyMDAwIiwgR0VOMTEsIH4wdSwgMHgxYzQwMDAgKyAweDIwMTQgfSwNCj4g
LQl7ICJCU0QxIDB4MjAwMCIsIEdFTjExLCB+MHUsIDB4MWM0MDAwICsgMHgyM2IwIH0sDQo+IC0N
Cj4gLQl7ICJCU0QyIDB4MjAwMCIsIEdFTjExLCB+MHUsIDB4MWQwMDAwICsgMHgyMDAwIH0sDQo+
IC0JeyAiQlNEMiAweDIwMDAiLCBHRU4xMSwgfjB1LCAweDFkMDAwMCArIDB4MjAxNCB9LA0KPiAt
CXsgIkJTRDIgMHgyMDAwIiwgR0VOMTEsIH4wdSwgMHgxZDAwMDAgKyAweDIzYjAgfSwNCj4gLQ0K
PiAtCXsgIkJTRDMgMHgyMDAwIiwgR0VOMTEsIH4wdSwgMHgxZDQwMDAgKyAweDIwMDAgfSwNCj4g
LQl7ICJCU0QzIDB4MjAwMCIsIEdFTjExLCB+MHUsIDB4MWQ0MDAwICsgMHgyMDE0IH0sDQo+IC0J
eyAiQlNEMyAweDIwMDAiLCBHRU4xMSwgfjB1LCAweDFkNDAwMCArIDB4MjNiMCB9LA0KPiArCXsg
IkJTRCAweDIwMDAiLCBHRU4xMSwgQUxMLCAweDIwMDAsIC5yZWxhdGl2ZSA9IHRydWUgfSwNCj4g
Kwl7ICJCU0QgMHgyMDE0IiwgR0VOMTEsIEFMTCwgMHgyMDE0LCAucmVsYXRpdmUgPSB0cnVlIH0s
DQo+ICsJeyAiQlNEIDB4MjNiMCIsIEdFTjExLCBBTEwsIDB4MjNiMCwgLnJlbGF0aXZlID0gdHJ1
ZSB9LA0KPiANCj4gIAl7fQ0KPiAgfTsNCj4gDQo+IC1zdGF0aWMgY29uc3QgY2hhciAqcmVnaXN0
ZXJfbmFtZSh1aW50MzJfdCBvZmZzZXQsIGNoYXIgKmJ1Ziwgc2l6ZV90IGxlbikNCj4gK3N0YXRp
YyBjb25zdCBjaGFyICoNCj4gK3JlZ2lzdGVyX25hbWUodWludDMyX3Qgb2Zmc2V0LCB1aW50MzJf
dCBtbWlvX2Jhc2UsIGNoYXIgKmJ1Ziwgc2l6ZV90DQo+ICtsZW4pDQo+ICB7DQo+ICAJZm9yIChj
b25zdCBzdHJ1Y3QgbmFtZWRfcmVnaXN0ZXIgKnIgPSBub25wcml2X3JlZ2lzdGVyczsgci0+bmFt
ZTsNCj4gcisrKSB7DQo+ICAJCXVuc2lnbmVkIGludCB3aWR0aCA9IHItPmNvdW50ID8gNCpyLT5j
b3VudCA6IDQ7DQo+IC0JCWlmIChvZmZzZXQgPj0gci0+b2Zmc2V0ICYmIG9mZnNldCA8IHItPm9m
ZnNldCArIHdpZHRoKSB7DQo+ICsJCXVpbnQzMl90IGJhc2U7DQo+ICsNCj4gKwkJYmFzZSA9IHIt
Pm9mZnNldDsNCj4gKwkJaWYgKHItPnJlbGF0aXZlKQ0KPiArCQkJYmFzZSArPSBtbWlvX2Jhc2U7
DQo+ICsNCj4gKwkJaWYgKG9mZnNldCA+PSBiYXNlICYmIG9mZnNldCA8IGJhc2UgKyB3aWR0aCkg
ew0KPiAgCQkJaWYgKHItPmNvdW50IDw9IDEpDQo+ICAJCQkJcmV0dXJuIHItPm5hbWU7DQo+IA0K
PiAgCQkJc25wcmludGYoYnVmLCBsZW4sICIlc1slZF0iLA0KPiAtCQkJCSByLT5uYW1lLCAob2Zm
c2V0IC0gci0+b2Zmc2V0KS80KTsNCj4gKwkJCQkgci0+bmFtZSwgKG9mZnNldCAtIGJhc2UpIC8g
NCk7DQo+ICAJCQlyZXR1cm4gYnVmOw0KPiAgCQl9DQo+ICAJfQ0KPiBAQCAtMjE4LDIyICsxOTUs
MzUgQEAgc3RhdGljIGNvbnN0IGNoYXIgKnJlZ2lzdGVyX25hbWUodWludDMyX3Qgb2Zmc2V0LA0K
PiBjaGFyICpidWYsIHNpemVfdCBsZW4pDQo+ICAJcmV0dXJuICJ1bmtub3duIjsNCj4gIH0NCj4g
DQo+IC1zdGF0aWMgY29uc3Qgc3RydWN0IG5hbWVkX3JlZ2lzdGVyICpsb29rdXBfcmVnaXN0ZXIo
dWludDMyX3Qgb2Zmc2V0KQ0KPiArc3RhdGljIGNvbnN0IHN0cnVjdCBuYW1lZF9yZWdpc3RlciAq
DQo+ICtsb29rdXBfcmVnaXN0ZXIodWludDMyX3Qgb2Zmc2V0LCB1aW50MzJfdCBtbWlvX2Jhc2Up
DQo+ICB7DQo+ICAJZm9yIChjb25zdCBzdHJ1Y3QgbmFtZWRfcmVnaXN0ZXIgKnIgPSBub25wcml2
X3JlZ2lzdGVyczsgci0+bmFtZTsNCj4gcisrKSB7DQo+ICAJCXVuc2lnbmVkIGludCB3aWR0aCA9
IHItPmNvdW50ID8gNCpyLT5jb3VudCA6IDQ7DQo+IC0JCWlmIChvZmZzZXQgPj0gci0+b2Zmc2V0
ICYmIG9mZnNldCA8IHItPm9mZnNldCArIHdpZHRoKQ0KPiArCQl1aW50MzJfdCBiYXNlOw0KPiAr
DQo+ICsJCWJhc2UgPSByLT5vZmZzZXQ7DQo+ICsJCWlmIChyLT5yZWxhdGl2ZSkNCj4gKwkJCWJh
c2UgKz0gbW1pb19iYXNlOw0KPiArDQo+ICsJCWlmIChvZmZzZXQgPj0gYmFzZSAmJiBvZmZzZXQg
PCBiYXNlICsgd2lkdGgpDQo+ICAJCQlyZXR1cm4gcjsNCj4gIAl9DQo+IA0KPiAgCXJldHVybiBO
VUxMOw0KPiAgfQ0KPiANCj4gLXN0YXRpYyBib29sIGlnbm9yZV9yZWdpc3Rlcih1aW50MzJfdCBv
ZmZzZXQpDQo+ICtzdGF0aWMgYm9vbCBpZ25vcmVfcmVnaXN0ZXIodWludDMyX3Qgb2Zmc2V0LCB1
aW50MzJfdCBtbWlvX2Jhc2UpDQo+ICB7DQo+ICAJZm9yIChjb25zdCBzdHJ1Y3QgbmFtZWRfcmVn
aXN0ZXIgKnIgPSBpZ25vcmVfcmVnaXN0ZXJzOyByLT5uYW1lOyByKyspDQo+IHsNCj4gIAkJdW5z
aWduZWQgaW50IHdpZHRoID0gci0+Y291bnQgPyA0KnItPmNvdW50IDogNDsNCj4gLQkJaWYgKG9m
ZnNldCA+PSByLT5vZmZzZXQgJiYgb2Zmc2V0IDwgci0+b2Zmc2V0ICsgd2lkdGgpDQo+ICsJCXVp
bnQzMl90IGJhc2U7DQo+ICsNCj4gKwkJYmFzZSA9IHItPm9mZnNldDsNCj4gKwkJaWYgKHItPnJl
bGF0aXZlKQ0KPiArCQkJYmFzZSArPSBtbWlvX2Jhc2U7DQo+ICsNCj4gKwkJaWYgKG9mZnNldCA+
PSBiYXNlICYmIG9mZnNldCA8IGJhc2UgKyB3aWR0aCkNCj4gIAkJCXJldHVybiB0cnVlOw0KPiAg
CX0NCj4gDQo+IEBAIC0yNDgsNiArMjM4LDcgQEAgc3RhdGljIHZvaWQgdG1wbF9yZWdzKGludCBm
ZCwgIHsNCj4gIAljb25zdCB1bnNpZ25lZCBpbnQgZ2VuX2JpdCA9IDEgPDwNCj4gaW50ZWxfZ2Vu
KGludGVsX2dldF9kcm1fZGV2aWQoZmQpKTsNCj4gIAljb25zdCB1bnNpZ25lZCBpbnQgZW5naW5l
X2JpdCA9IEVOR0lORShlLT5jbGFzcywgZS0+aW5zdGFuY2UpOw0KPiArCWNvbnN0IHVpbnQzMl90
IG1taW9fYmFzZSA9IGdlbV9lbmdpbmVfbW1pb19iYXNlKGZkLCBlLT5uYW1lKTsNCg0KQ2hyaXMs
IEkgdHJpZWQgdG8gdGVzdCB0aGlzIHBhdGNoLCBidXQgImdlbV9lbmdpbmVfbW1pb19iYXNlKCki
IGFib3ZlIGlzIG5vdCBkZWZpbmVkLg0KQ2FuIHlvdSBjaGVjaz8NCg0KLS1DUQ0KDQoNCj4gIAl1
bnNpZ25lZCBpbnQgcmVnc19zaXplOw0KPiAgCXVpbnQzMl90ICpyZWdzOw0KPiANCj4gQEAgLTI1
OSwxMiArMjUwLDIwIEBAIHN0YXRpYyB2b2lkIHRtcGxfcmVncyhpbnQgZmQsDQo+ICAJCSAgICAg
ICBJOTE1X0dFTV9ET01BSU5fQ1BVLCBJOTE1X0dFTV9ET01BSU5fQ1BVKTsNCj4gDQo+ICAJZm9y
IChjb25zdCBzdHJ1Y3QgbmFtZWRfcmVnaXN0ZXIgKnIgPSBub25wcml2X3JlZ2lzdGVyczsgci0+
bmFtZTsNCj4gcisrKSB7DQo+ICsJCXVpbnQzMl90IG9mZnNldDsNCj4gKw0KPiAgCQlpZiAoIShy
LT5lbmdpbmVfbWFzayAmIGVuZ2luZV9iaXQpKQ0KPiAgCQkJY29udGludWU7DQo+ICAJCWlmICgh
KHItPmdlbl9tYXNrICYgZ2VuX2JpdCkpDQo+ICAJCQljb250aW51ZTsNCj4gLQkJZm9yICh1bnNp
Z25lZCBjb3VudCA9IHItPmNvdW50ID86IDEsIG9mZnNldCA9IHItPm9mZnNldDsNCj4gLQkJICAg
ICBjb3VudC0tOyBvZmZzZXQgKz0gNCkgew0KPiArCQlpZiAoci0+cmVsYXRpdmUgJiYgIW1taW9f
YmFzZSkNCj4gKwkJCWNvbnRpbnVlOw0KPiArDQo+ICsJCW9mZnNldCA9IHItPm9mZnNldDsNCj4g
KwkJaWYgKHItPnJlbGF0aXZlKQ0KPiArCQkJb2Zmc2V0ICs9IG1taW9fYmFzZTsNCj4gKw0KPiAr
CQlmb3IgKHVuc2lnbmVkIGNvdW50ID0gci0+Y291bnQgPzogMTsgY291bnQtLTsgb2Zmc2V0ICs9
IDQpIHsNCj4gIAkJCXVpbnQzMl90IHggPSB2YWx1ZTsNCj4gIAkJCWlmIChyLT53cml0ZV9tYXNr
KQ0KPiAgCQkJCXggJj0gci0+d3JpdGVfbWFzazsNCj4gQEAgLTI4NCw2ICsyODMsNyBAQCBzdGF0
aWMgdWludDMyX3QgcmVhZF9yZWdzKGludCBmZCwNCj4gIAljb25zdCB1bnNpZ25lZCBpbnQgZ2Vu
ID0gaW50ZWxfZ2VuKGludGVsX2dldF9kcm1fZGV2aWQoZmQpKTsNCj4gIAljb25zdCB1bnNpZ25l
ZCBpbnQgZ2VuX2JpdCA9IDEgPDwgZ2VuOw0KPiAgCWNvbnN0IHVuc2lnbmVkIGludCBlbmdpbmVf
Yml0ID0gRU5HSU5FKGUtPmNsYXNzLCBlLT5pbnN0YW5jZSk7DQo+ICsJY29uc3QgdWludDMyX3Qg
bW1pb19iYXNlID0gZ2VtX2VuZ2luZV9tbWlvX2Jhc2UoZmQsIGUtPm5hbWUpOw0KPiAgCWNvbnN0
IGJvb2wgcjY0YiA9IGdlbiA+PSA4Ow0KPiAgCXN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19vYmpl
Y3QyIG9ialsyXTsNCj4gIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX3JlbG9jYXRpb25fZW50cnkgKnJl
bG9jOyBAQCAtMzExLDEzICszMTEsMjANCj4gQEAgc3RhdGljIHVpbnQzMl90IHJlYWRfcmVncyhp
bnQgZmQsDQo+IA0KPiAgCW4gPSAwOw0KPiAgCWZvciAoY29uc3Qgc3RydWN0IG5hbWVkX3JlZ2lz
dGVyICpyID0gbm9ucHJpdl9yZWdpc3RlcnM7IHItPm5hbWU7DQo+IHIrKykgew0KPiArCQl1aW50
MzJfdCBvZmZzZXQ7DQo+ICsNCj4gIAkJaWYgKCEoci0+ZW5naW5lX21hc2sgJiBlbmdpbmVfYml0
KSkNCj4gIAkJCWNvbnRpbnVlOw0KPiAgCQlpZiAoIShyLT5nZW5fbWFzayAmIGdlbl9iaXQpKQ0K
PiAgCQkJY29udGludWU7DQo+ICsJCWlmIChyLT5yZWxhdGl2ZSAmJiAhbW1pb19iYXNlKQ0KPiAr
CQkJY29udGludWU7DQo+ICsNCj4gKwkJb2Zmc2V0ID0gci0+b2Zmc2V0Ow0KPiArCQlpZiAoci0+
cmVsYXRpdmUpDQo+ICsJCQlvZmZzZXQgKz0gbW1pb19iYXNlOw0KPiANCj4gLQkJZm9yICh1bnNp
Z25lZCBjb3VudCA9IHItPmNvdW50ID86IDEsIG9mZnNldCA9IHItPm9mZnNldDsNCj4gLQkJICAg
ICBjb3VudC0tOyBvZmZzZXQgKz0gNCkgew0KPiArCQlmb3IgKHVuc2lnbmVkIGNvdW50ID0gci0+
Y291bnQgPzogMTsgY291bnQtLTsgb2Zmc2V0ICs9IDQpIHsNCj4gIAkJCSpiKysgPSAweDI0IDw8
IDIzIHwgKDEgKyByNjRiKTsgLyogU1JNICovDQo+ICAJCQkqYisrID0gb2Zmc2V0Ow0KPiAgCQkJ
cmVsb2Nbbl0udGFyZ2V0X2hhbmRsZSA9IG9ialswXS5oYW5kbGU7IEBAIC0zNTcsNg0KPiArMzY0
LDcgQEAgc3RhdGljIHZvaWQgd3JpdGVfcmVncyhpbnQgZmQsICB7DQo+ICAJY29uc3QgdW5zaWdu
ZWQgaW50IGdlbl9iaXQgPSAxIDw8DQo+IGludGVsX2dlbihpbnRlbF9nZXRfZHJtX2RldmlkKGZk
KSk7DQo+ICAJY29uc3QgdW5zaWduZWQgaW50IGVuZ2luZV9iaXQgPSBFTkdJTkUoZS0+Y2xhc3Ms
IGUtPmluc3RhbmNlKTsNCj4gKwljb25zdCB1aW50MzJfdCBtbWlvX2Jhc2UgPSBnZW1fZW5naW5l
X21taW9fYmFzZShmZCwgZS0+bmFtZSk7DQo+ICAJc3RydWN0IGRybV9pOTE1X2dlbV9leGVjX29i
amVjdDIgb2JqOw0KPiAgCXN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcjIgZXhlY2J1ZjsN
Cj4gIAl1bnNpZ25lZCBpbnQgYmF0Y2hfc2l6ZTsNCj4gQEAgLTM3MiwxMiArMzgwLDIwIEBAIHN0
YXRpYyB2b2lkIHdyaXRlX3JlZ3MoaW50IGZkLA0KPiAgCWdlbV9zZXRfZG9tYWluKGZkLCBvYmou
aGFuZGxlLA0KPiAgCQkgICAgICAgSTkxNV9HRU1fRE9NQUlOX0NQVSwgSTkxNV9HRU1fRE9NQUlO
X0NQVSk7DQo+ICAJZm9yIChjb25zdCBzdHJ1Y3QgbmFtZWRfcmVnaXN0ZXIgKnIgPSBub25wcml2
X3JlZ2lzdGVyczsgci0+bmFtZTsNCj4gcisrKSB7DQo+ICsJCXVpbnQzMl90IG9mZnNldDsNCj4g
Kw0KPiAgCQlpZiAoIShyLT5lbmdpbmVfbWFzayAmIGVuZ2luZV9iaXQpKQ0KPiAgCQkJY29udGlu
dWU7DQo+ICAJCWlmICghKHItPmdlbl9tYXNrICYgZ2VuX2JpdCkpDQo+ICAJCQljb250aW51ZTsN
Cj4gLQkJZm9yICh1bnNpZ25lZCBjb3VudCA9IHItPmNvdW50ID86IDEsIG9mZnNldCA9IHItPm9m
ZnNldDsNCj4gLQkJICAgICBjb3VudC0tOyBvZmZzZXQgKz0gNCkgew0KPiArCQlpZiAoci0+cmVs
YXRpdmUgJiYgIW1taW9fYmFzZSkNCj4gKwkJCWNvbnRpbnVlOw0KPiArDQo+ICsJCW9mZnNldCA9
IHItPm9mZnNldDsNCj4gKwkJaWYgKHItPnJlbGF0aXZlKQ0KPiArCQkJb2Zmc2V0ICs9IG1taW9f
YmFzZTsNCj4gKw0KPiArCQlmb3IgKHVuc2lnbmVkIGNvdW50ID0gci0+Y291bnQgPzogMTsgY291
bnQtLTsgb2Zmc2V0ICs9IDQpIHsNCj4gIAkJCXVpbnQzMl90IHggPSB2YWx1ZTsNCj4gIAkJCWlm
IChyLT53cml0ZV9tYXNrKQ0KPiAgCQkJCXggJj0gci0+d3JpdGVfbWFzazsNCj4gQEAgLTQxMCw2
ICs0MjYsNyBAQCBzdGF0aWMgdm9pZCByZXN0b3JlX3JlZ3MoaW50IGZkLA0KPiAgCWNvbnN0IHVu
c2lnbmVkIGludCBnZW4gPSBpbnRlbF9nZW4oaW50ZWxfZ2V0X2RybV9kZXZpZChmZCkpOw0KPiAg
CWNvbnN0IHVuc2lnbmVkIGludCBnZW5fYml0ID0gMSA8PCBnZW47DQo+ICAJY29uc3QgdW5zaWdu
ZWQgaW50IGVuZ2luZV9iaXQgPSBFTkdJTkUoZS0+Y2xhc3MsIGUtPmluc3RhbmNlKTsNCj4gKwlj
b25zdCB1aW50MzJfdCBtbWlvX2Jhc2UgPSBnZW1fZW5naW5lX21taW9fYmFzZShmZCwgZS0+bmFt
ZSk7DQo+ICAJY29uc3QgYm9vbCByNjRiID0gZ2VuID49IDg7DQo+ICAJc3RydWN0IGRybV9pOTE1
X2dlbV9leGVjX29iamVjdDIgb2JqWzJdOw0KPiAgCXN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1
ZmZlcjIgZXhlY2J1ZjsgQEAgLTQzNywxMyArNDU0LDIwDQo+IEBAIHN0YXRpYyB2b2lkIHJlc3Rv
cmVfcmVncyhpbnQgZmQsDQo+IA0KPiAgCW4gPSAwOw0KPiAgCWZvciAoY29uc3Qgc3RydWN0IG5h
bWVkX3JlZ2lzdGVyICpyID0gbm9ucHJpdl9yZWdpc3RlcnM7IHItPm5hbWU7DQo+IHIrKykgew0K
PiArCQl1aW50MzJfdCBvZmZzZXQ7DQo+ICsNCj4gIAkJaWYgKCEoci0+ZW5naW5lX21hc2sgJiBl
bmdpbmVfYml0KSkNCj4gIAkJCWNvbnRpbnVlOw0KPiAgCQlpZiAoIShyLT5nZW5fbWFzayAmIGdl
bl9iaXQpKQ0KPiAgCQkJY29udGludWU7DQo+ICsJCWlmIChyLT5yZWxhdGl2ZSAmJiAhbW1pb19i
YXNlKQ0KPiArCQkJY29udGludWU7DQo+ICsNCj4gKwkJb2Zmc2V0ID0gci0+b2Zmc2V0Ow0KPiAr
CQlpZiAoci0+cmVsYXRpdmUpDQo+ICsJCQlvZmZzZXQgKz0gbW1pb19iYXNlOw0KPiANCj4gLQkJ
Zm9yICh1bnNpZ25lZCBjb3VudCA9IHItPmNvdW50ID86IDEsIG9mZnNldCA9IHItPm9mZnNldDsN
Cj4gLQkJICAgICBjb3VudC0tOyBvZmZzZXQgKz0gNCkgew0KPiArCQlmb3IgKHVuc2lnbmVkIGNv
dW50ID0gci0+Y291bnQgPzogMTsgY291bnQtLTsgb2Zmc2V0ICs9IDQpIHsNCj4gIAkJCSpiKysg
PSAweDI5IDw8IDIzIHwgKDEgKyByNjRiKTsgLyogTFJNICovDQo+ICAJCQkqYisrID0gb2Zmc2V0
Ow0KPiAgCQkJcmVsb2Nbbl0udGFyZ2V0X2hhbmRsZSA9IG9ialswXS5oYW5kbGU7IEBAIC00Nzks
Ng0KPiArNTAzLDcgQEAgc3RhdGljIHZvaWQgZHVtcF9yZWdzKGludCBmZCwNCj4gIAljb25zdCBp
bnQgZ2VuID0gaW50ZWxfZ2VuKGludGVsX2dldF9kcm1fZGV2aWQoZmQpKTsNCj4gIAljb25zdCB1
bnNpZ25lZCBpbnQgZ2VuX2JpdCA9IDEgPDwgZ2VuOw0KPiAgCWNvbnN0IHVuc2lnbmVkIGludCBl
bmdpbmVfYml0ID0gRU5HSU5FKGUtPmNsYXNzLCBlLT5pbnN0YW5jZSk7DQo+ICsJY29uc3QgdWlu
dDMyX3QgbW1pb19iYXNlID0gZ2VtX2VuZ2luZV9tbWlvX2Jhc2UoZmQsIGUtPm5hbWUpOw0KPiAg
CXVuc2lnbmVkIGludCByZWdzX3NpemU7DQo+ICAJdWludDMyX3QgKm91dDsNCj4gDQo+IEBAIC00
ODksMjYgKzUxNCwzNiBAQCBzdGF0aWMgdm9pZCBkdW1wX3JlZ3MoaW50IGZkLA0KPiAgCWdlbV9z
ZXRfZG9tYWluKGZkLCByZWdzLCBJOTE1X0dFTV9ET01BSU5fQ1BVLCAwKTsNCj4gDQo+ICAJZm9y
IChjb25zdCBzdHJ1Y3QgbmFtZWRfcmVnaXN0ZXIgKnIgPSBub25wcml2X3JlZ2lzdGVyczsgci0+
bmFtZTsNCj4gcisrKSB7DQo+ICsJCXVpbnQzMl90IG9mZnNldDsNCj4gKw0KPiAgCQlpZiAoIShy
LT5lbmdpbmVfbWFzayAmIGVuZ2luZV9iaXQpKQ0KPiAgCQkJY29udGludWU7DQo+ICAJCWlmICgh
KHItPmdlbl9tYXNrICYgZ2VuX2JpdCkpDQo+ICAJCQljb250aW51ZTsNCj4gKwkJaWYgKHItPnJl
bGF0aXZlICYmICFtbWlvX2Jhc2UpDQo+ICsJCQljb250aW51ZTsNCj4gKw0KPiArCQlvZmZzZXQg
PSByLT5vZmZzZXQ7DQo+ICsJCWlmIChyLT5yZWxhdGl2ZSkNCj4gKwkJCW9mZnNldCArPSBtbWlv
X2Jhc2U7DQo+IA0KPiAgCQlpZiAoci0+Y291bnQgPD0gMSkgew0KPiAgCQkJaWd0X2RlYnVnKCIw
eCUwNHggKCVzKTogMHglMDh4XG4iLA0KPiAtCQkJCSAgci0+b2Zmc2V0LCByLT5uYW1lLCBvdXRb
ci0+b2Zmc2V0LzRdKTsNCj4gKwkJCQkgIG9mZnNldCwgci0+bmFtZSwgb3V0W29mZnNldCAvIDRd
KTsNCj4gIAkJfSBlbHNlIHsNCj4gIAkJCWZvciAodW5zaWduZWQgeCA9IDA7IHggPCByLT5jb3Vu
dDsgeCsrKQ0KPiAgCQkJCWlndF9kZWJ1ZygiMHglMDR4ICglc1slZF0pOiAweCUwOHhcbiIsDQo+
IC0JCQkJCSAgci0+b2Zmc2V0KzQqeCwgci0+bmFtZSwgeCwNCj4gLQkJCQkJICBvdXRbci0+b2Zm
c2V0LzQgKyB4XSk7DQo+ICsJCQkJCSAgb2Zmc2V0ICsgNCAqIHgsIHItPm5hbWUsIHgsDQo+ICsJ
CQkJCSAgb3V0W29mZnNldCAvIDQgKyB4XSk7DQo+ICAJCX0NCj4gIAl9DQo+ICAJbXVubWFwKG91
dCwgcmVnc19zaXplKTsNCj4gIH0NCj4gDQo+IC1zdGF0aWMgdm9pZCBjb21wYXJlX3JlZ3MoaW50
IGZkLCB1aW50MzJfdCBBLCB1aW50MzJfdCBCLCBjb25zdCBjaGFyICp3aG8pDQo+ICtzdGF0aWMg
dm9pZCBjb21wYXJlX3JlZ3MoaW50IGZkLCBjb25zdCBzdHJ1Y3QgaW50ZWxfZXhlY3V0aW9uX2Vu
Z2luZTIgKmUsDQo+ICsJCQkgdWludDMyX3QgQSwgdWludDMyX3QgQiwgY29uc3QgY2hhciAqd2hv
KQ0KPiAgew0KPiArCWNvbnN0IHVpbnQzMl90IG1taW9fYmFzZSA9IGdlbV9lbmdpbmVfbW1pb19i
YXNlKGZkLCBlLT5uYW1lKTsNCj4gIAl1bnNpZ25lZCBpbnQgbnVtX2Vycm9yczsNCj4gIAl1bnNp
Z25lZCBpbnQgcmVnc19zaXplOw0KPiAgCXVpbnQzMl90ICphLCAqYjsNCj4gQEAgLTUzMiwxMSAr
NTY3LDExIEBAIHN0YXRpYyB2b2lkIGNvbXBhcmVfcmVncyhpbnQgZmQsIHVpbnQzMl90IEEsDQo+
IHVpbnQzMl90IEIsIGNvbnN0IGNoYXIgKndobykNCj4gIAkJaWYgKGFbbl0gPT0gYltuXSkNCj4g
IAkJCWNvbnRpbnVlOw0KPiANCj4gLQkJaWYgKGlnbm9yZV9yZWdpc3RlcihvZmZzZXQpKQ0KPiAr
CQlpZiAoaWdub3JlX3JlZ2lzdGVyKG9mZnNldCwgbW1pb19iYXNlKSkNCj4gIAkJCWNvbnRpbnVl
Ow0KPiANCj4gIAkJbWFzayA9IH4wdTsNCj4gLQkJciA9IGxvb2t1cF9yZWdpc3RlcihvZmZzZXQp
Ow0KPiArCQlyID0gbG9va3VwX3JlZ2lzdGVyKG9mZnNldCwgbW1pb19iYXNlKTsNCj4gIAkJaWYg
KHIgJiYgci0+bWFza2VkKQ0KPiAgCQkJbWFzayA+Pj0gMTY7DQo+ICAJCWlmIChyICYmIHItPmln
bm9yZV9iaXRzKQ0KPiBAQCAtNTQ3LDcgKzU4Miw3IEBAIHN0YXRpYyB2b2lkIGNvbXBhcmVfcmVn
cyhpbnQgZmQsIHVpbnQzMl90IEEsIHVpbnQzMl90IEIsDQo+IGNvbnN0IGNoYXIgKndobykNCj4g
DQo+ICAJCWlndF93YXJuKCJSZWdpc3RlciAweCUwNHggKCVzKTogQT0lMDh4IEI9JTA4eFxuIiwN
Cj4gIAkJCSBvZmZzZXQsDQo+IC0JCQkgcmVnaXN0ZXJfbmFtZShvZmZzZXQsIGJ1Ziwgc2l6ZW9m
KGJ1ZikpLA0KPiArCQkJIHJlZ2lzdGVyX25hbWUob2Zmc2V0LCBtbWlvX2Jhc2UsIGJ1Ziwgc2l6
ZW9mKGJ1ZikpLA0KPiAgCQkJIGFbbl0gJiBtYXNrLCBiW25dICYgbWFzayk7DQo+ICAJCW51bV9l
cnJvcnMrKzsNCj4gIAl9DQo+IEBAIC02MzgsNyArNjczLDcgQEAgc3RhdGljIHZvaWQgbm9ucHJp
dihpbnQgZmQsDQo+IA0KPiAgCQlpZ3Rfc3Bpbl9mcmVlKGZkLCBzcGluKTsNCj4gDQo+IC0JCWNv
bXBhcmVfcmVncyhmZCwgdG1wbCwgcmVnc1sxXSwgIm5vbnByaXYgcmVhZC93cml0ZXMiKTsNCj4g
KwkJY29tcGFyZV9yZWdzKGZkLCBlLCB0bXBsLCByZWdzWzFdLCAibm9ucHJpdiByZWFkL3dyaXRl
cyIpOw0KPiANCj4gIAkJZm9yIChpbnQgbiA9IDA7IG4gPCBBUlJBWV9TSVpFKHJlZ3MpOyBuKysp
DQo+ICAJCQlnZW1fY2xvc2UoZmQsIHJlZ3Nbbl0pOw0KPiBAQCAtNzA4LDggKzc0Myw5IEBAIHN0
YXRpYyB2b2lkIGlzb2xhdGlvbihpbnQgZmQsDQo+ICAJCWlndF9zcGluX2ZyZWUoZmQsIHNwaW4p
Ow0KPiANCj4gIAkJaWYgKCEoZmxhZ3MgJiBESVJUWTEpKQ0KPiAtCQkJY29tcGFyZV9yZWdzKGZk
LCByZWdzWzBdLCB0bXAsICJ0d28gcmVhZHMgb2YgdGhlDQo+IHNhbWUgY3R4Iik7DQo+IC0JCWNv
bXBhcmVfcmVncyhmZCwgcmVnc1swXSwgcmVnc1sxXSwgInR3byB2aXJnaW4gY29udGV4dHMiKTsN
Cj4gKwkJCWNvbXBhcmVfcmVncyhmZCwgZSwgcmVnc1swXSwgdG1wLA0KPiArCQkJCSAgICAgInR3
byByZWFkcyBvZiB0aGUgc2FtZSBjdHgiKTsNCj4gKwkJY29tcGFyZV9yZWdzKGZkLCBlLCByZWdz
WzBdLCByZWdzWzFdLCAidHdvIHZpcmdpbiBjb250ZXh0cyIpOw0KPiANCj4gIAkJZm9yIChpbnQg
biA9IDA7IG4gPCBBUlJBWV9TSVpFKGN0eCk7IG4rKykgew0KPiAgCQkJZ2VtX2Nsb3NlKGZkLCBy
ZWdzW25dKTsNCj4gQEAgLTgyOSwxMyArODY1LDEzIEBAIHN0YXRpYyB2b2lkIHByZXNlcnZhdGlv
bihpbnQgZmQsDQo+ICAJCWNoYXIgYnVmWzgwXTsNCj4gDQo+ICAJCXNucHJpbnRmKGJ1Ziwgc2l6
ZW9mKGJ1ZiksICJkaXJ0eSAleCBjb250ZXh0XG4iLCB2YWx1ZXNbdl0pOw0KPiAtCQljb21wYXJl
X3JlZ3MoZmQsIHJlZ3Nbdl1bMF0sIHJlZ3Nbdl1bMV0sIGJ1Zik7DQo+ICsJCWNvbXBhcmVfcmVn
cyhmZCwgZSwgcmVnc1t2XVswXSwgcmVnc1t2XVsxXSwgYnVmKTsNCj4gDQo+ICAJCWdlbV9jbG9z
ZShmZCwgcmVnc1t2XVswXSk7DQo+ICAJCWdlbV9jbG9zZShmZCwgcmVnc1t2XVsxXSk7DQo+ICAJ
CWdlbV9jb250ZXh0X2Rlc3Ryb3koZmQsIGN0eFt2XSk7DQo+ICAJfQ0KPiAtCWNvbXBhcmVfcmVn
cyhmZCwgcmVnc1tudW1fdmFsdWVzXVswXSwgcmVnc1tudW1fdmFsdWVzXVsxXSwNCj4gImNsZWFu
Iik7DQo+ICsJY29tcGFyZV9yZWdzKGZkLCBlLCByZWdzW251bV92YWx1ZXNdWzBdLCByZWdzW251
bV92YWx1ZXNdWzFdLA0KPiArImNsZWFuIik7DQo+ICAJZ2VtX2NvbnRleHRfZGVzdHJveShmZCwg
Y3R4W251bV92YWx1ZXNdKTsgIH0NCj4gDQo+IC0tDQo+IDIuMjQuMA0KPiANCj4gX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18NCj4gSW50ZWwtZ2Z4IG1haWxp
bmcgbGlzdA0KPiBJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnDQo+IGh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4DQpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBs
aXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

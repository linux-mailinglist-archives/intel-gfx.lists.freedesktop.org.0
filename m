Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0605810A773
	for <lists+intel-gfx@lfdr.de>; Wed, 27 Nov 2019 01:24:58 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C75126E1ED;
	Wed, 27 Nov 2019 00:24:55 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 85C536E1ED
 for <intel-gfx@lists.freedesktop.org>; Wed, 27 Nov 2019 00:24:54 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Nov 2019 16:24:53 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,247,1571727600"; d="scan'208";a="408832700"
Received: from invictus.jf.intel.com ([10.54.75.159])
 by fmsmga005.fm.intel.com with ESMTP; 26 Nov 2019 16:24:53 -0800
From: Radhakrishna Sripada <radhakrishna.sripada@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 26 Nov 2019 16:26:58 -0800
Message-Id: <20191127002658.20300-1-radhakrishna.sripada@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191126002635.5779-8-radhakrishna.sripada@intel.com>
References: <20191126002635.5779-8-radhakrishna.sripada@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v8 7/7] drm/i915/tgl: Add Clear Color support
 for TGL Render Decompression
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Nanley G Chery <nanley.g.chery@intel.com>,
 Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>,
 Ville Syrjala <ville.syrjala@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UmVuZGVyIERlY29tcHJlc3Npb24gaXMgc3VwcG9ydGVkIHdpdGggWS1UaWxlZCBtYWluIHN1cmZh
Y2UuIFRoZSBDQ1MgaXMKbGluZWFyIGFuZCBoYXMgNCBiaXRzIG9mIGRhdGEgZm9yIGVhY2ggbWFp
biBzdXJmYWNlIGNhY2hlIGxpbmUgcGFpciwgYQpyYXRpbyBvZiAxOjI1Ni4gQWRkaXRpb25hbCBD
bGVhciBDb2xvciBpbmZvcm1hdGlvbiBpcyBwYXNzZWQgZnJvbSB0aGUKdXNlci1zcGFjZSB0aHJv
dWdoIGFuIG9mZnNldCBpbiB0aGUgR0VNIEJPLiBBZGQgYSBuZXcgbW9kaWZpZXIgdG8gaWRlbnRp
ZnkKYW5kIHBhcnNlIG5ldyBDbGVhciBDb2xvciBpbmZvcm1hdGlvbiBhbmQgZXh0ZW5kIEdlbjEy
IHJlbmRlciBkZWNvbXByZXNzaW9uCmZ1bmN0aW9uYWxpdHkgdG8gdGhlIG5ld2x5IGFkZGVkIG1v
ZGlmaWVyLgoKdjI6IEZpeCBoYXNfYWxwaGEgZmxhZyBmb3IgbW9kaWZpZXJzLCBvbWl0IENDIG1v
ZGlmaWVyIGR1cmluZyBpbml0aWFsCiAgICBwbGFuZSBjb25maWcoTWF0dCkuIEZpeCBMb29rdXAg
ZXJyb3IuCnYzOiBGaXggdGhlIHBhbmljIHdoaWxlIHJ1bm5pbmcga21zX2N1YmUKdjQ6IEFkZCBh
bGlnbm1lbnQgY2hlY2sgYW5kIHJldXNlIHRoZSBjb21tZW50cyBmb3IgZ2UxMl9jY3NfZm9ybWF0
cyhNYXR0KQp2NTogRml4IHR5cG9zIGFuZCB3cmFwIGNvbW1lbnRzKE1hdHQpCnY2OiBSZWJhc2UK
djc6IFJlYmFzZSwgQWRkIG1pc3NpbmcgY2FzZSBpbiBpbnRlbF90aWxlX2hlaWdodChSSykKdjg6
IE5pdCBjbGVhbnVwcyhNYXR0KQoKQ2M6IERoaW5ha2FyYW4gUGFuZGl5YW4gPGRoaW5ha2FyYW4u
cGFuZGl5YW5AaW50ZWwuY29tPgpDYzogVmlsbGUgU3lyamFsYSA8dmlsbGUuc3lyamFsYUBpbnRl
bC5jb20+CkNjOiBTaGFzaGFuayBTaGFybWEgPHNoYXNoYW5rLnNoYXJtYUBpbnRlbC5jb20+CkNj
OiBSYWZhZWwgQW50b2dub2xsaSA8cmFmYWVsLmFudG9nbm9sbGlAaW50ZWwuY29tPgpDYzogTmFu
bGV5IEcgQ2hlcnkgPG5hbmxleS5nLmNoZXJ5QGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IE1hdHQg
Um9wZXIgPG1hdHRoZXcuZC5yb3BlckBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IFJhZGhha3Jp
c2huYSBTcmlwYWRhIDxyYWRoYWtyaXNobmEuc3JpcGFkYUBpbnRlbC5jb20+Ci0tLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgIHwgNjMgKysrKysrKysrKysr
KysrKystLQogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oICAgIHwg
IDMgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYyAgIHwgMTAg
KystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oICAgICAgICAgICAgICAgfCAxMiAr
KysrCiA0IGZpbGVzIGNoYW5nZWQsIDgzIGluc2VydGlvbnMoKyksIDUgZGVsZXRpb25zKC0pCgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwppbmRleCA2YzQy
NzRjMTU2NGQuLjEyZDgxYjA5ZGVlZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5LmMKQEAgLTE5NzIsNyArMTk3Miw4IEBAIGludGVsX3RpbGVfd2lkdGhf
Ynl0ZXMoY29uc3Qgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsIGludCBjb2xvcl9wbGFuZSkK
IAkJCXJldHVybiAxMjg7CiAJCS8qIGZhbGwgdGhyb3VnaCAqLwogCWNhc2UgSTkxNV9GT1JNQVRf
TU9EX1lfVElMRURfR0VOMTJfUkNfQ0NTOgotCQlpZiAoY29sb3JfcGxhbmUgPT0gMSkKKwljYXNl
IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDU19DQzoKKwkJaWYgKGNvbG9yX3Bs
YW5lID09IDEgfHwgY29sb3JfcGxhbmUgPT0gMikKIAkJCXJldHVybiA2NDsKIAkJLyogZmFsbCB0
aHJvdWdoICovCiAJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRDoKQEAgLTIwMTAsNyArMjAx
MSw4IEBAIGludGVsX3RpbGVfaGVpZ2h0KGNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZi
LCBpbnQgY29sb3JfcGxhbmUpCiB7CiAJc3dpdGNoIChmYi0+bW9kaWZpZXIpIHsKIAljYXNlIEk5
MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDUzoKLQkJaWYgKGNvbG9yX3BsYW5lID09
IDEpCisJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9HRU4xMl9SQ19DQ1NfQ0M6CisJCWlm
IChjb2xvcl9wbGFuZSA9PSAxIHx8IGNvbG9yX3BsYW5lID09IDIpCiAJCQlyZXR1cm4gMTsKIAkJ
LyogZmFsbCB0aHJvdWdoICovCiAJZGVmYXVsdDoKQEAgLTIxMTYsNiArMjExOCw3IEBAIHN0YXRp
YyB1bnNpZ25lZCBpbnQgaW50ZWxfc3VyZl9hbGlnbm1lbnQoY29uc3Qgc3RydWN0IGRybV9mcmFt
ZWJ1ZmZlciAqZmIsCiAJCQlyZXR1cm4gMjU2ICogMTAyNDsKIAkJcmV0dXJuIDA7CiAJY2FzZSBJ
OTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9HRU4xMl9SQ19DQ1M6CisJY2FzZSBJOTE1X0ZPUk1BVF9N
T0RfWV9USUxFRF9HRU4xMl9SQ19DQ1NfQ0M6CiAJCXJldHVybiAxNiAqIDEwMjQ7CiAJY2FzZSBJ
OTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9DQ1M6CiAJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWWZfVElM
RURfQ0NTOgpAQCAtMjMxMyw4ICsyMzE2LDE2IEBAIHN0YXRpYyB1MzIgaW50ZWxfYWRqdXN0X3Rp
bGVfb2Zmc2V0KGludCAqeCwgaW50ICp5LAogCiBzdGF0aWMgYm9vbCBpc19zdXJmYWNlX2xpbmVh
cih1NjQgbW9kaWZpZXIsIGludCBjb2xvcl9wbGFuZSkKIHsKLQlyZXR1cm4gbW9kaWZpZXIgPT0g
RFJNX0ZPUk1BVF9NT0RfTElORUFSIHx8Ci0JICAgICAgIChtb2RpZmllciA9PSBJOTE1X0ZPUk1B
VF9NT0RfWV9USUxFRF9HRU4xMl9SQ19DQ1MgJiYgY29sb3JfcGxhbmUgPT0gMSk7CisJc3dpdGNo
IChtb2RpZmllcikgeworCWNhc2UgRFJNX0ZPUk1BVF9NT0RfTElORUFSOgorCQlyZXR1cm4gdHJ1
ZTsKKwljYXNlIEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDUzoKKwkJcmV0dXJu
IGNvbG9yX3BsYW5lID09IDE7CisJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9HRU4xMl9S
Q19DQ1NfQ0M6CisJCXJldHVybiBjb2xvcl9wbGFuZSA9PSAxIHx8IGNvbG9yX3BsYW5lID09IDI7
CisJZGVmYXVsdDoKKwkJcmV0dXJuIGZhbHNlOworCX0KIH0KIAogc3RhdGljIHUzMiBpbnRlbF9h
ZGp1c3RfYWxpZ25lZF9vZmZzZXQoaW50ICp4LCBpbnQgKnksCkBAIC0yNTAyLDYgKzI1MTMsNyBA
QCBzdGF0aWMgdW5zaWduZWQgaW50IGludGVsX2ZiX21vZGlmaWVyX3RvX3RpbGluZyh1NjQgZmJf
bW9kaWZpZXIpCiAJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRDoKIAljYXNlIEk5MTVfRk9S
TUFUX01PRF9ZX1RJTEVEX0NDUzoKIAljYXNlIEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEy
X1JDX0NDUzoKKwljYXNlIEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDU19DQzoK
IAkJcmV0dXJuIEk5MTVfVElMSU5HX1k7CiAJZGVmYXVsdDoKIAkJcmV0dXJuIEk5MTVfVElMSU5H
X05PTkU7CkBAIC0yNTUxLDYgKzI1NjMsMjEgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZm9y
bWF0X2luZm8gZ2VuMTJfY2NzX2Zvcm1hdHNbXSA9IHsKIAkgIC5jcHAgPSB7IDQsIDEsIH0sIC5o
c3ViID0gMiwgLnZzdWIgPSAzMiwgLmhhc19hbHBoYSA9IHRydWUgfSwKIH07CiAKKy8qCisgKiBT
YW1lIGFzIGdlbjEyX2Njc19mb3JtYXRzW10gYWJvdmUsIGJ1dCB3aXRoIGFkZGl0aW9uYWwgc3Vy
ZmFjZSB1c2VkCisgKiB0byBwYXNzIENsZWFyIENvbG9yIGluZm9ybWF0aW9uIGluIHBsYW5lIDIg
d2l0aCA2NCBiaXRzIG9mIGRhdGEuCisgKi8KK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Zvcm1h
dF9pbmZvIGdlbjEyX2Njc19jY19mb3JtYXRzW10gPSB7CisJeyAuZm9ybWF0ID0gRFJNX0ZPUk1B
VF9YUkdCODg4OCwgLmRlcHRoID0gMjQsIC5udW1fcGxhbmVzID0gMywKKwkgIC5jcHAgPSB7IDQs
IDEsIDAsIH0sIC5oc3ViID0gMiwgLnZzdWIgPSAzMiwgfSwKKwl7IC5mb3JtYXQgPSBEUk1fRk9S
TUFUX1hCR1I4ODg4LCAuZGVwdGggPSAyNCwgLm51bV9wbGFuZXMgPSAzLAorCSAgLmNwcCA9IHsg
NCwgMSwgMCwgfSwgLmhzdWIgPSAyLCAudnN1YiA9IDMyLCB9LAorCXsgLmZvcm1hdCA9IERSTV9G
T1JNQVRfQVJHQjg4ODgsIC5kZXB0aCA9IDMyLCAubnVtX3BsYW5lcyA9IDMsCisJICAuY3BwID0g
eyA0LCAxLCAwLCB9LCAuaHN1YiA9IDIsIC52c3ViID0gMzIsIC5oYXNfYWxwaGEgPSB0cnVlIH0s
CisJeyAuZm9ybWF0ID0gRFJNX0ZPUk1BVF9BQkdSODg4OCwgLmRlcHRoID0gMzIsIC5udW1fcGxh
bmVzID0gMywKKwkgIC5jcHAgPSB7IDQsIDEsIDAsIH0sIC5oc3ViID0gMiwgLnZzdWIgPSAzMiwg
Lmhhc19hbHBoYSA9IHRydWUgfSwKK307CisKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Zvcm1h
dF9pbmZvICoKIGxvb2t1cF9mb3JtYXRfaW5mbyhjb25zdCBzdHJ1Y3QgZHJtX2Zvcm1hdF9pbmZv
IGZvcm1hdHNbXSwKIAkJICAgaW50IG51bV9mb3JtYXRzLCB1MzIgZm9ybWF0KQpAQCAtMjU3OCw2
ICsyNjA1LDEwIEBAIGludGVsX2dldF9mb3JtYXRfaW5mbyhjb25zdCBzdHJ1Y3QgZHJtX21vZGVf
ZmJfY21kMiAqY21kKQogCQlyZXR1cm4gbG9va3VwX2Zvcm1hdF9pbmZvKGdlbjEyX2Njc19mb3Jt
YXRzLAogCQkJCQkgIEFSUkFZX1NJWkUoZ2VuMTJfY2NzX2Zvcm1hdHMpLAogCQkJCQkgIGNtZC0+
cGl4ZWxfZm9ybWF0KTsKKwljYXNlIEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0ND
U19DQzoKKwkJcmV0dXJuIGxvb2t1cF9mb3JtYXRfaW5mbyhnZW4xMl9jY3NfY2NfZm9ybWF0cywK
KwkJCQkJICBBUlJBWV9TSVpFKGdlbjEyX2Njc19jY19mb3JtYXRzKSwKKwkJCQkJICBjbWQtPnBp
eGVsX2Zvcm1hdCk7CiAJZGVmYXVsdDoKIAkJcmV0dXJuIE5VTEw7CiAJfQpAQCAtMjU4Niw2ICsy
NjE3LDcgQEAgaW50ZWxfZ2V0X2Zvcm1hdF9pbmZvKGNvbnN0IHN0cnVjdCBkcm1fbW9kZV9mYl9j
bWQyICpjbWQpCiBib29sIGlzX2Njc19tb2RpZmllcih1NjQgbW9kaWZpZXIpCiB7CiAJcmV0dXJu
IG1vZGlmaWVyID09IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDUyB8fAorCSAg
ICAgICBtb2RpZmllciA9PSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9HRU4xMl9SQ19DQ1NfQ0Mg
fHwKIAkgICAgICAgbW9kaWZpZXIgPT0gSTkxNV9GT1JNQVRfTU9EX1lfVElMRURfQ0NTIHx8CiAJ
ICAgICAgIG1vZGlmaWVyID09IEk5MTVfRk9STUFUX01PRF9ZZl9USUxFRF9DQ1M7CiB9CkBAIC0y
Nzk4LDYgKzI4MzAsMTkgQEAgaW50ZWxfZmlsbF9mYl9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiwKIAkJaW50IHgsIHk7CiAJCWludCByZXQ7CiAKKwkJLyoKKwkJICogUGxh
bmUgMiBvZiBSZW5kZXIgQ29tcHJlc3Npb24gd2l0aCBDbGVhciBDb2xvciBmYiBtb2RpZmllcgor
CQkgKiBpcyBjb25zdW1lZCBieSB0aGUgZHJpdmVyIGFuZCBub3QgcGFzc2VkIHRvIERFLiBTa2lw
IHRoZQorCQkgKiBhcml0aG1ldGljIHJlbGF0ZWQgdG8gYWxpZ25tZW50IGFuZCBvZmZzZXQgY2Fs
Y3VsYXRpb24uCisJCSAqLworCQlpZiAoaSA9PSAyICYmCisJCSAgICBmYi0+bW9kaWZpZXIgPT0g
STkxNV9GT1JNQVRfTU9EX1lfVElMRURfR0VOMTJfUkNfQ0NTX0NDKSB7CisJCQlpZiAoSVNfQUxJ
R05FRChmYi0+b2Zmc2V0c1syXSwgUEFHRV9TSVpFKSkKKwkJCQljb250aW51ZTsKKwkJCWVsc2UK
KwkJCQlyZXR1cm4gLUVJTlZBTDsKKwkJfQorCiAJCWNwcCA9IGZiLT5mb3JtYXQtPmNwcFtpXTsK
IAkJd2lkdGggPSBkcm1fZnJhbWVidWZmZXJfcGxhbmVfd2lkdGgoZmItPndpZHRoLCBmYiwgaSk7
CiAJCWhlaWdodCA9IGRybV9mcmFtZWJ1ZmZlcl9wbGFuZV9oZWlnaHQoZmItPmhlaWdodCwgZmIs
IGkpOwpAQCAtNDI5NSw2ICs0MzQwLDcgQEAgc3RhdGljIHUzMiBza2xfcGxhbmVfY3RsX3RpbGlu
Zyh1NjQgZmJfbW9kaWZpZXIpCiAJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRDoKIAkJcmV0
dXJuIFBMQU5FX0NUTF9USUxFRF9ZOwogCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1lfVElMRURfQ0NT
OgorCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1lfVElMRURfR0VOMTJfUkNfQ0NTX0NDOgogCQlyZXR1
cm4gUExBTkVfQ1RMX1RJTEVEX1kgfCBQTEFORV9DVExfUkVOREVSX0RFQ09NUFJFU1NJT05fRU5B
QkxFOwogCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1lfVElMRURfR0VOMTJfUkNfQ0NTOgogCQlyZXR1
cm4gUExBTkVfQ1RMX1RJTEVEX1kgfApAQCAtMTUyNDUsNiArMTUyOTEsMTUgQEAgc3RhdGljIGlu
dCBpbnRlbF9wbGFuZV9waW5fZmIoc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0
ZSkKIAogCXBsYW5lX3N0YXRlLT52bWEgPSB2bWE7CiAKKwlpZiAoZmItPm1vZGlmaWVyID09IEk5
MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDU19DQykgeworCQl1MzIgKmNjYWRkciA9
IGttYXBfYXRvbWljKGk5MTVfZ2VtX29iamVjdF9nZXRfcGFnZShpbnRlbF9mYl9vYmooZmIpLAor
CQkJCQkJCQkgIGZiLT5vZmZzZXRzWzJdID4+IFBBR0VfU0hJRlQpKTsKKworCQlwbGFuZV9zdGF0
ZS0+Y2N2YWwgPSAoKHU2NCkqKGNjYWRkciArIENDX1ZBTF9ISUdIRVJfT0ZGU0VUKSA8PCAzMikK
KwkJCQkgICAgIHwgKihjY2FkZHIgKyBDQ19WQUxfTE9XRVJfT0ZGU0VUKTsKKwkJa3VubWFwX2F0
b21pYyhjY2FkZHIpOworCX0KKwogCXJldHVybiAwOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCmluZGV4IDgzZWEwNDE0OWI3
Ny4uZTFiZDE4MTIyY2U2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXlfdHlwZXMuaApAQCAtNjA3LDYgKzYwNyw5IEBAIHN0cnVjdCBpbnRlbF9w
bGFuZV9zdGF0ZSB7CiAJdTMyIHBsYW5hcl9zbGF2ZTsKIAogCXN0cnVjdCBkcm1faW50ZWxfc3By
aXRlX2NvbG9ya2V5IGNrZXk7CisKKwkvKiBDbGVhciBDb2xvciBWYWx1ZSAqLworCXU2NCBjY3Zh
bDsKIH07CiAKIHN0cnVjdCBpbnRlbF9pbml0aWFsX3BsYW5lX2NvbmZpZyB7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYwppbmRleCA2N2E5MDA1OTkwMGYuLjg5
ZjdmYmM4N2FkOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9zcHJpdGUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0
ZS5jCkBAIC01OTcsNiArNTk3LDcgQEAgc2tsX3Byb2dyYW1fcGxhbmUoc3RydWN0IGludGVsX3Bs
YW5lICpwbGFuZSwKIAl1bnNpZ25lZCBsb25nIGlycWZsYWdzOwogCXUzMiBrZXltc2ssIGtleW1h
eDsKIAl1MzIgcGxhbmVfY3RsID0gcGxhbmVfc3RhdGUtPmN0bDsKKwl1NjQgY2N2YWwgPSBwbGFu
ZV9zdGF0ZS0+Y2N2YWw7CiAKIAlwbGFuZV9jdGwgfD0gc2tsX3BsYW5lX2N0bF9jcnRjKGNydGNf
c3RhdGUpOwogCkBAIC02MzksNiArNjQwLDEwIEBAIHNrbF9wcm9ncmFtX3BsYW5lKHN0cnVjdCBp
bnRlbF9wbGFuZSAqcGxhbmUsCiAJaWYgKGZiLT5mb3JtYXQtPmlzX3l1diAmJiBpY2xfaXNfaGRy
X3BsYW5lKGRldl9wcml2LCBwbGFuZV9pZCkpCiAJCWljbF9wcm9ncmFtX2lucHV0X2NzYyhwbGFu
ZSwgY3J0Y19zdGF0ZSwgcGxhbmVfc3RhdGUpOwogCisJaWYgKGZiLT5tb2RpZmllciA9PSBJOTE1
X0ZPUk1BVF9NT0RfWV9USUxFRF9HRU4xMl9SQ19DQ1NfQ0MpCisJCWludGVsX3VuY29yZV93cml0
ZTY0X2Z3KCZkZXZfcHJpdi0+dW5jb3JlLAorCQkJCQlQTEFORV9DQ19WQUwocGlwZSwgcGxhbmVf
aWQpLCBjY3ZhbCk7CisKIAlza2xfd3JpdGVfcGxhbmVfd20ocGxhbmUsIGNydGNfc3RhdGUpOwog
CiAJSTkxNV9XUklURV9GVyhQTEFORV9LRVlWQUwocGlwZSwgcGxhbmVfaWQpLCBrZXktPm1pbl92
YWx1ZSk7CkBAIC0yMTA2LDcgKzIxMTEsOCBAQCBzdGF0aWMgaW50IHNrbF9wbGFuZV9jaGVja19m
Yihjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkgICAgIGZiLT5t
b2RpZmllciA9PSBJOTE1X0ZPUk1BVF9NT0RfWWZfVElMRUQgfHwKIAkgICAgIGZiLT5tb2RpZmll
ciA9PSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRF9DQ1MgfHwKIAkgICAgIGZiLT5tb2RpZmllciA9
PSBJOTE1X0ZPUk1BVF9NT0RfWWZfVElMRURfQ0NTIHx8Ci0JICAgICBmYi0+bW9kaWZpZXIgPT0g
STkxNV9GT1JNQVRfTU9EX1lfVElMRURfR0VOMTJfUkNfQ0NTKSkgeworCSAgICAgZmItPm1vZGlm
aWVyID09IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDUyB8fAorCSAgICAgZmIt
Pm1vZGlmaWVyID09IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDU19DQykpIHsK
IAkJRFJNX0RFQlVHX0tNUygiWS9ZZiB0aWxpbmcgbm90IHN1cHBvcnRlZCBpbiBJRi1JRCBtb2Rl
XG4iKTsKIAkJcmV0dXJuIC1FSU5WQUw7CiAJfQpAQCAtMjU3OSw2ICsyNTg1LDcgQEAgc3RhdGlj
IGNvbnN0IHU2NCBza2xfcGxhbmVfZm9ybWF0X21vZGlmaWVyc19jY3NbXSA9IHsKIAogc3RhdGlj
IGNvbnN0IHU2NCBnZW4xMl9wbGFuZV9mb3JtYXRfbW9kaWZpZXJzX2Njc1tdID0gewogCUk5MTVf
Rk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0NDUywKKwlJOTE1X0ZPUk1BVF9NT0RfWV9USUxF
RF9HRU4xMl9SQ19DQ1NfQ0MsCiAJSTkxNV9GT1JNQVRfTU9EX1lfVElMRUQsCiAJSTkxNV9GT1JN
QVRfTU9EX1hfVElMRUQsCiAJRFJNX0ZPUk1BVF9NT0RfTElORUFSLApAQCAtMjc1MCw2ICsyNzU3
LDcgQEAgc3RhdGljIGJvb2wgZ2VuMTJfcGxhbmVfZm9ybWF0X21vZF9zdXBwb3J0ZWQoc3RydWN0
IGRybV9wbGFuZSAqX3BsYW5lLAogCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1hfVElMRUQ6CiAJY2Fz
ZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRDoKIAljYXNlIEk5MTVfRk9STUFUX01PRF9ZX1RJTEVE
X0dFTjEyX1JDX0NDUzoKKwljYXNlIEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0dFTjEyX1JDX0ND
U19DQzoKIAkJYnJlYWs7CiAJZGVmYXVsdDoKIAkJcmV0dXJuIGZhbHNlOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcmVnLmgKaW5kZXggMmU0NDRhMThlZDBiLi40YTY4M2RiMjY3YzEgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9yZWcuaApAQCAtNjg0MCw2ICs2ODQwLDggQEAgZW51bSB7CiAjZGVmaW5lIF9QTEFORV9L
RVlNQVhfMV9BCQkJMHg3MDFhMAogI2RlZmluZSBfUExBTkVfS0VZTUFYXzJfQQkJCTB4NzAyYTAK
ICNkZWZpbmUgIFBMQU5FX0tFWU1BWF9BTFBIQShhKQkJCSgoYSkgPDwgMjQpCisjZGVmaW5lIF9Q
TEFORV9DQ19WQUxfMV9BCQkJMHg3MDFiNAorI2RlZmluZSBfUExBTkVfQ0NfVkFMXzJfQQkJCTB4
NzAyYjQKICNkZWZpbmUgX1BMQU5FX0FVWF9ESVNUXzFfQQkJCTB4NzAxYzAKICNkZWZpbmUgX1BM
QU5FX0FVWF9ESVNUXzJfQQkJCTB4NzAyYzAKICNkZWZpbmUgX1BMQU5FX0FVWF9PRkZTRVRfMV9B
CQkJMHg3MDFjNApAQCAtNjg3OSw2ICs2ODgxLDE2IEBAIGVudW0gewogI2RlZmluZSBfUExBTkVf
TlYxMl9CVUZfQ0ZHXzFfQQkJMHg3MDI3OAogI2RlZmluZSBfUExBTkVfTlYxMl9CVUZfQ0ZHXzJf
QQkJMHg3MDM3OAogCisjZGVmaW5lIF9QTEFORV9DQ19WQUxfMV9CCQkJMHg3MTFiNAorI2RlZmlu
ZSBfUExBTkVfQ0NfVkFMXzJfQgkJCTB4NzEyYjQKKyNkZWZpbmUgX1BMQU5FX0NDX1ZBTF8xKHBp
cGUpCV9QSVBFKHBpcGUsIF9QTEFORV9DQ19WQUxfMV9BLCBfUExBTkVfQ0NfVkFMXzFfQikKKyNk
ZWZpbmUgX1BMQU5FX0NDX1ZBTF8yKHBpcGUpCV9QSVBFKHBpcGUsIF9QTEFORV9DQ19WQUxfMl9B
LCBfUExBTkVfQ0NfVkFMXzJfQikKKyNkZWZpbmUgUExBTkVfQ0NfVkFMKHBpcGUsIHBsYW5lKQlc
CisJX01NSU9fUExBTkUocGxhbmUsIF9QTEFORV9DQ19WQUxfMShwaXBlKSwgX1BMQU5FX0NDX1ZB
TF8yKHBpcGUpKQorCisjZGVmaW5lIENDX1ZBTF9MT1dFUl9PRkZTRVQJCTQKKyNkZWZpbmUgQ0Nf
VkFMX0hJR0hFUl9PRkZTRVQJCTUKKwogLyogSW5wdXQgQ1NDIFJlZ2lzdGVyIERlZmluaXRpb25z
ICovCiAjZGVmaW5lIF9QTEFORV9JTlBVVF9DU0NfUllfR1lfMV9BCTB4NzAxRTAKICNkZWZpbmUg
X1BMQU5FX0lOUFVUX0NTQ19SWV9HWV8yX0EJMHg3MDJFMAotLSAKMi4yMC4xCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBs
aXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

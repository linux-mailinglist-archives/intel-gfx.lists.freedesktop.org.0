Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 331DF23CA90
	for <lists+intel-gfx@lfdr.de>; Wed,  5 Aug 2020 14:23:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 527936E5BE;
	Wed,  5 Aug 2020 12:23:00 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (unknown [77.68.26.236])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1419C6E57E
 for <intel-gfx@lists.freedesktop.org>; Wed,  5 Aug 2020 12:22:49 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 22039479-1500050 
 for multiple; Wed, 05 Aug 2020 13:22:34 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  5 Aug 2020 13:22:14 +0100
Message-Id: <20200805122231.23313-21-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20200805122231.23313-1-chris@chris-wilson.co.uk>
References: <20200805122231.23313-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 20/37] drm/i915/gem: Bind the fence async for
 execbuf
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Thomas=20Hellstr=C3=B6m?= <thomas.hellstrom@intel.com>,
 Chris Wilson <chris@chris-wilson.co.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SXQgaXMgaWxsZWdhbCB0byB3YWl0IG9uIGFuIGFub3RoZXIgdm1hIHdoaWxlIGhvbGRpbmcgdGhl
IHZtLT5tdXRleCwgYXMKdGhhdCBlYXNpbHkgbGVhZHMgdG8gQUJCQSBkZWFkbG9ja3MgKHdlIHdh
aXQgb24gYSBzZWNvbmQgdm1hIHRoYXQgd2FpdHMKb24gdXMgdG8gcmVsZWFzZSB0aGUgdm0tPm11
dGV4KS4gU28gd2hpbGUgdGhlIHZtLT5tdXRleCBleGlzdHMsIHdlCmNvbXB1dGUgdGhlIHJlcXVp
cmVkIHJlZ2lzdGVyIHRyYW5zZmVyIGluc2lkZSB0aGUgaTkxNV9nZ3R0Lm11dGV4LCBzZXR0aW5n
CnVwIGEgZmVuY2UgZm9yIHRyYWNraW5nIHRoZSByZWdpc3RlciB3cml0ZXMsIGJ1dCBtb3ZlIHRo
ZSB3YWl0aW5nIG91dHNpZGUKb2YgdGhlIGxvY2sgaW50byB0aGUgYXN5bmMgYmluZGluZyBwaXBl
bGluZS4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNv
LnVrPgpSZXZpZXdlZC1ieTogVGhvbWFzIEhlbGxzdHLDtm0gPHRob21hcy5oZWxsc3Ryb21AaW50
ZWwuY29tPgotLS0KIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYyAg
ICB8ICAyMSArLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dndHRfZmVuY2luZy5j
ICB8IDEzOSArKysrKysrKysrKysrKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2dndHRfZmVuY2luZy5oICB8ICAgNSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5o
ICAgICAgICAgICAgICAgfCAgIDIgLQogNCBmaWxlcyBjaGFuZ2VkLCAxNTIgaW5zZXJ0aW9ucygr
KSwgMTUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX2V4ZWNidWZmZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9leGVjYnVmZmVyLmMKaW5kZXggMzAxZTY3ZGNkYmRlLi40Y2RhZjVkODFlZjEgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYwpAQCAtMTA1NCwx
NSArMTA1NCw2IEBAIHN0YXRpYyBpbnQgZWJfcmVzZXJ2ZV92bWEoc3RydWN0IGViX3ZtX3dvcmsg
KndvcmssIHN0cnVjdCBlYl9iaW5kX3ZtYSAqYmluZCkKIAkJcmV0dXJuIGVycjsKIAogcGluOgot
CWlmICh1bmxpa2VseShleGVjX2ZsYWdzICYgRVhFQ19PQkpFQ1RfTkVFRFNfRkVOQ0UpKSB7Ci0J
CWVyciA9IF9faTkxNV92bWFfcGluX2ZlbmNlKHZtYSk7IC8qIFhYWCBubyB3YWl0aW5nICovCi0J
CWlmICh1bmxpa2VseShlcnIpKQotCQkJcmV0dXJuIGVycjsKLQotCQlpZiAodm1hLT5mZW5jZSkK
LQkJCWJpbmQtPmV2LT5mbGFncyB8PSBfX0VYRUNfT0JKRUNUX0hBU19GRU5DRTsKLQl9Ci0KIAli
aW5kX2ZsYWdzICY9IH5hdG9taWNfcmVhZCgmdm1hLT5mbGFncyk7CiAJaWYgKGJpbmRfZmxhZ3Mp
IHsKIAkJZXJyID0gc2V0X2JpbmRfZmVuY2Uodm1hLCB3b3JrKTsKQEAgLTEwOTMsNiArMTA4NCwx
NSBAQCBzdGF0aWMgaW50IGViX3Jlc2VydmVfdm1hKHN0cnVjdCBlYl92bV93b3JrICp3b3JrLCBz
dHJ1Y3QgZWJfYmluZF92bWEgKmJpbmQpCiAJYmluZC0+ZXYtPmZsYWdzIHw9IF9fRVhFQ19PQkpF
Q1RfSEFTX1BJTjsKIAlHRU1fQlVHX09OKGViX3ZtYV9taXNwbGFjZWQoZW50cnksIHZtYSwgYmlu
ZC0+ZXYtPmZsYWdzKSk7CiAKKwlpZiAodW5saWtlbHkoZXhlY19mbGFncyAmIEVYRUNfT0JKRUNU
X05FRURTX0ZFTkNFKSkgeworCQllcnIgPSBfX2k5MTVfdm1hX3Bpbl9mZW5jZV9hc3luYyh2bWEs
ICZ3b3JrLT5iYXNlKTsKKwkJaWYgKHVubGlrZWx5KGVycikpCisJCQlyZXR1cm4gZXJyOworCisJ
CWlmICh2bWEtPmZlbmNlKQorCQkJYmluZC0+ZXYtPmZsYWdzIHw9IF9fRVhFQ19PQkpFQ1RfSEFT
X0ZFTkNFOworCX0KKwogCXJldHVybiAwOwogfQogCkBAIC0xMTU4LDYgKzExNTgsOSBAQCBzdGF0
aWMgdm9pZCBfX2ViX2JpbmRfdm1hKHN0cnVjdCBlYl92bV93b3JrICp3b3JrKQogCQlzdHJ1Y3Qg
ZWJfYmluZF92bWEgKmJpbmQgPSAmd29yay0+YmluZFtuXTsKIAkJc3RydWN0IGk5MTVfdm1hICp2
bWEgPSBiaW5kLT5ldi0+dm1hOwogCisJCWlmIChiaW5kLT5ldi0+ZmxhZ3MgJiBfX0VYRUNfT0JK
RUNUX0hBU19GRU5DRSkKKwkJCV9faTkxNV92bWFfYXBwbHlfZmVuY2VfYXN5bmModm1hKTsKKwog
CQlpZiAoIWJpbmQtPmJpbmRfZmxhZ3MpCiAJCQlnb3RvIHB1dDsKIApkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ2d0dF9mZW5jaW5nLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9nZ3R0X2ZlbmNpbmcuYwppbmRleCA3ZmIzNmIxMmZlN2EuLmNlMDZi
OTQ5ZGM3YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ2d0dF9m
ZW5jaW5nLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ2d0dF9mZW5jaW5n
LmMKQEAgLTIxLDEwICsyMSwxMyBAQAogICogSU4gVEhFIFNPRlRXQVJFLgogICovCiAKKyNpbmNs
dWRlICJpOTE1X2FjdGl2ZS5oIgogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkx
NV9zY2F0dGVybGlzdC5oIgorI2luY2x1ZGUgImk5MTVfc3dfZmVuY2Vfd29yay5oIgogI2luY2x1
ZGUgImk5MTVfcHZpbmZvLmgiCiAjaW5jbHVkZSAiaTkxNV92Z3B1LmgiCisjaW5jbHVkZSAiaTkx
NV92bWEuaCIKIAogLyoqCiAgKiBET0M6IGZlbmNlIHJlZ2lzdGVyIGhhbmRsaW5nCkBAIC0zNDAs
MTkgKzM0MywzNyBAQCBzdGF0aWMgc3RydWN0IGk5MTVfZmVuY2VfcmVnICpmZW5jZV9maW5kKHN0
cnVjdCBpOTE1X2dndHQgKmdndHQpCiAJcmV0dXJuIEVSUl9QVFIoLUVERUFETEspOwogfQogCi1p
bnQgX19pOTE1X3ZtYV9waW5fZmVuY2Uoc3RydWN0IGk5MTVfdm1hICp2bWEpCitzdGF0aWMgaW50
IGZlbmNlX3dhaXRfYmluZChzdHJ1Y3QgaTkxNV9mZW5jZV9yZWcgKnJlZykKK3sKKwlzdHJ1Y3Qg
ZG1hX2ZlbmNlICpmZW5jZTsKKwlpbnQgZXJyID0gMDsKKworCWZlbmNlID0gaTkxNV9hY3RpdmVf
ZmVuY2VfZ2V0KCZyZWctPmFjdGl2ZS5leGNsKTsKKwlpZiAoZmVuY2UpIHsKKwkJZXJyID0gZG1h
X2ZlbmNlX3dhaXQoZmVuY2UsIHRydWUpOworCQlkbWFfZmVuY2VfcHV0KGZlbmNlKTsKKwl9CisK
KwlyZXR1cm4gZXJyOworfQorCitzdGF0aWMgaW50IF9faTkxNV92bWFfcGluX2ZlbmNlKHN0cnVj
dCBpOTE1X3ZtYSAqdm1hKQogewogCXN0cnVjdCBpOTE1X2dndHQgKmdndHQgPSBpOTE1X3ZtX3Rv
X2dndHQodm1hLT52bSk7Ci0Jc3RydWN0IGk5MTVfZmVuY2VfcmVnICpmZW5jZTsKKwlzdHJ1Y3Qg
aTkxNV9mZW5jZV9yZWcgKmZlbmNlID0gdm1hLT5mZW5jZTsKIAlzdHJ1Y3QgaTkxNV92bWEgKnNl
dCA9IGk5MTVfZ2VtX29iamVjdF9pc190aWxlZCh2bWEtPm9iaikgPyB2bWEgOiBOVUxMOwogCWlu
dCBlcnI7CiAKIAlsb2NrZGVwX2Fzc2VydF9oZWxkKCZ2bWEtPnZtLT5tdXRleCk7CiAKIAkvKiBK
dXN0IHVwZGF0ZSBvdXIgcGxhY2UgaW4gdGhlIExSVSBpZiBvdXIgZmVuY2UgaXMgZ2V0dGluZyBy
ZXVzZWQuICovCi0JaWYgKHZtYS0+ZmVuY2UpIHsKLQkJZmVuY2UgPSB2bWEtPmZlbmNlOworCWlm
IChmZW5jZSkgewogCQlHRU1fQlVHX09OKGZlbmNlLT52bWEgIT0gdm1hKTsKKworCQllcnIgPSBm
ZW5jZV93YWl0X2JpbmQoZmVuY2UpOworCQlpZiAoZXJyKQorCQkJcmV0dXJuIGVycjsKKwogCQlh
dG9taWNfaW5jKCZmZW5jZS0+cGluX2NvdW50KTsKIAkJaWYgKCFmZW5jZS0+ZGlydHkpIHsKIAkJ
CWxpc3RfbW92ZV90YWlsKCZmZW5jZS0+bGluaywgJmdndHQtPmZlbmNlX2xpc3QpOwpAQCAtMzg0
LDYgKzQwNSwxMTYgQEAgaW50IF9faTkxNV92bWFfcGluX2ZlbmNlKHN0cnVjdCBpOTE1X3ZtYSAq
dm1hKQogCXJldHVybiBlcnI7CiB9CiAKK3N0YXRpYyBpbnQgc2V0X2JpbmRfZmVuY2Uoc3RydWN0
IGk5MTVfZmVuY2VfcmVnICpmZW5jZSwKKwkJCSAgc3RydWN0IGRtYV9mZW5jZV93b3JrICp3b3Jr
KQoreworCXN0cnVjdCBkbWFfZmVuY2UgKnByZXY7CisJaW50IGVycjsKKworCWlmIChyY3VfYWNj
ZXNzX3BvaW50ZXIoZmVuY2UtPmFjdGl2ZS5leGNsLmZlbmNlKSA9PSAmd29yay0+ZG1hKQorCQly
ZXR1cm4gMDsKKworCWVyciA9IGk5MTVfc3dfZmVuY2VfYXdhaXRfYWN0aXZlKCZ3b3JrLT5jaGFp
biwKKwkJCQkJICZmZW5jZS0+YWN0aXZlLAorCQkJCQkgSTkxNV9BQ1RJVkVfQVdBSVRfQUNUSVZF
KTsKKwlpZiAoZXJyKQorCQlyZXR1cm4gZXJyOworCisJaWYgKGk5MTVfYWN0aXZlX2FjcXVpcmUo
JmZlbmNlLT5hY3RpdmUpKQorCQlyZXR1cm4gLUVOT0VOVDsKKworCXByZXYgPSBpOTE1X2FjdGl2
ZV9zZXRfZXhjbHVzaXZlKCZmZW5jZS0+YWN0aXZlLCAmd29yay0+ZG1hKTsKKwlpZiAodW5saWtl
bHkocHJldikpIHsKKwkJZXJyID0gaTkxNV9zd19mZW5jZV9hd2FpdF9kbWFfZmVuY2UoJndvcmst
PmNoYWluLCBwcmV2LCAwLAorCQkJCQkJICAgIEdGUF9OT1dBSVQgfCBfX0dGUF9OT1dBUk4pOwor
CQlkbWFfZmVuY2VfcHV0KHByZXYpOworCX0KKworCWk5MTVfYWN0aXZlX3JlbGVhc2UoJmZlbmNl
LT5hY3RpdmUpOworCXJldHVybiBlcnIgPCAwID8gZXJyIDogMDsKK30KKworaW50IF9faTkxNV92
bWFfcGluX2ZlbmNlX2FzeW5jKHN0cnVjdCBpOTE1X3ZtYSAqdm1hLAorCQkJICAgICAgIHN0cnVj
dCBkbWFfZmVuY2Vfd29yayAqd29yaykKK3sKKwlzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0ID0gaTkx
NV92bV90b19nZ3R0KHZtYS0+dm0pOworCXN0cnVjdCBpOTE1X3ZtYSAqc2V0ID0gaTkxNV9nZW1f
b2JqZWN0X2lzX3RpbGVkKHZtYS0+b2JqKSA/IHZtYSA6IE5VTEw7CisJc3RydWN0IGk5MTVfZmVu
Y2VfcmVnICpmZW5jZSA9IHZtYS0+ZmVuY2U7CisJaW50IGVycjsKKworCWxvY2tkZXBfYXNzZXJ0
X2hlbGQoJnZtYS0+dm0tPm11dGV4KTsKKworCS8qIEp1c3QgdXBkYXRlIG91ciBwbGFjZSBpbiB0
aGUgTFJVIGlmIG91ciBmZW5jZSBpcyBnZXR0aW5nIHJldXNlZC4gKi8KKwlpZiAoZmVuY2UpIHsK
KwkJR0VNX0JVR19PTihmZW5jZS0+dm1hICE9IHZtYSk7CisJCUdFTV9CVUdfT04oIWk5MTVfdm1h
X2lzX21hcF9hbmRfZmVuY2VhYmxlKHZtYSkpOworCX0gZWxzZSBpZiAoc2V0KSB7CisJCWlmICgh
aTkxNV92bWFfaXNfbWFwX2FuZF9mZW5jZWFibGUodm1hKSkKKwkJCXJldHVybiAtRUlOVkFMOwor
CisJCWZlbmNlID0gZmVuY2VfZmluZChnZ3R0KTsKKwkJaWYgKElTX0VSUihmZW5jZSkpCisJCQly
ZXR1cm4gLUVOT1NQQzsKKworCQlHRU1fQlVHX09OKGF0b21pY19yZWFkKCZmZW5jZS0+cGluX2Nv
dW50KSk7CisJCWZlbmNlLT5kaXJ0eSA9IHRydWU7CisJfSBlbHNlIHsKKwkJcmV0dXJuIDA7CisJ
fQorCisJYXRvbWljX2luYygmZmVuY2UtPnBpbl9jb3VudCk7CisJbGlzdF9tb3ZlX3RhaWwoJmZl
bmNlLT5saW5rLCAmZ2d0dC0+ZmVuY2VfbGlzdCk7CisJaWYgKCFmZW5jZS0+ZGlydHkpCisJCXJl
dHVybiAwOworCisJaWYgKElOVEVMX0dFTihmZW5jZV90b19pOTE1KGZlbmNlKSkgPCA0ICYmCisJ
ICAgIHJjdV9hY2Nlc3NfcG9pbnRlcih2bWEtPmFjdGl2ZS5leGNsLmZlbmNlKSAhPSAmd29yay0+
ZG1hKSB7CisJCS8qIGltcGxpY2l0ICd1bmZlbmNlZCcgR1BVIGJsaXRzICovCisJCWVyciA9IGk5
MTVfc3dfZmVuY2VfYXdhaXRfYWN0aXZlKCZ3b3JrLT5jaGFpbiwKKwkJCQkJCSAmdm1hLT5hY3Rp
dmUsCisJCQkJCQkgSTkxNV9BQ1RJVkVfQVdBSVRfQUNUSVZFKTsKKwkJaWYgKGVycikKKwkJCWdv
dG8gZXJyX3VucGluOworCX0KKworCWVyciA9IHNldF9iaW5kX2ZlbmNlKGZlbmNlLCB3b3JrKTsK
KwlpZiAoZXJyKQorCQlnb3RvIGVycl91bnBpbjsKKworCWlmIChzZXQpIHsKKwkJZmVuY2UtPnN0
YXJ0ID0gdm1hLT5ub2RlLnN0YXJ0OworCQlmZW5jZS0+c2l6ZSAgPSB2bWEtPmZlbmNlX3NpemU7
CisJCWZlbmNlLT5zdHJpZGUgPSBpOTE1X2dlbV9vYmplY3RfZ2V0X3N0cmlkZSh2bWEtPm9iaik7
CisJCWZlbmNlLT50aWxpbmcgPSBpOTE1X2dlbV9vYmplY3RfZ2V0X3RpbGluZyh2bWEtPm9iaik7
CisKKwkJdm1hLT5mZW5jZSA9IGZlbmNlOworCX0gZWxzZSB7CisJCWZlbmNlLT50aWxpbmcgPSAw
OworCQl2bWEtPmZlbmNlID0gTlVMTDsKKwl9CisKKwlzZXQgPSB4Y2hnKCZmZW5jZS0+dm1hLCBz
ZXQpOworCWlmIChzZXQgJiYgc2V0ICE9IHZtYSkgeworCQlHRU1fQlVHX09OKHNldC0+ZmVuY2Ug
IT0gZmVuY2UpOworCQlXUklURV9PTkNFKHNldC0+ZmVuY2UsIE5VTEwpOworCQlpOTE1X3ZtYV9y
ZXZva2VfbW1hcChzZXQpOworCX0KKworCXJldHVybiAwOworCitlcnJfdW5waW46CisJYXRvbWlj
X2RlYygmZmVuY2UtPnBpbl9jb3VudCk7CisJcmV0dXJuIGVycjsKK30KKwordm9pZCBfX2k5MTVf
dm1hX2FwcGx5X2ZlbmNlX2FzeW5jKHN0cnVjdCBpOTE1X3ZtYSAqdm1hKQoreworCXN0cnVjdCBp
OTE1X2ZlbmNlX3JlZyAqZmVuY2UgPSB2bWEtPmZlbmNlOworCisJaWYgKGZlbmNlLT5kaXJ0eSkK
KwkJZmVuY2Vfd3JpdGUoZmVuY2UpOworfQorCiAvKioKICAqIGk5MTVfdm1hX3Bpbl9mZW5jZSAt
IHNldCB1cCBmZW5jaW5nIGZvciBhIHZtYQogICogQHZtYTogdm1hIHRvIG1hcCB0aHJvdWdoIGEg
ZmVuY2UgcmVnCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9nZ3R0
X2ZlbmNpbmcuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dndHRfZmVuY2luZy5o
CmluZGV4IDllZWY2NzllMTMxMS4uZDMwNmFjMTRkNDdlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9nZ3R0X2ZlbmNpbmcuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9nZ3R0X2ZlbmNpbmcuaApAQCAtMzAsNiArMzAsNyBAQAogCiAjaW5jbHVk
ZSAiaTkxNV9hY3RpdmUuaCIKIAorc3RydWN0IGRtYV9mZW5jZV93b3JrOwogc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3Q7CiBzdHJ1Y3QgaTkxNV9nZ3R0Owogc3RydWN0IGk5MTVfdm1hOwpAQCAt
NzAsNiArNzEsMTAgQEAgdm9pZCBpOTE1X2dlbV9vYmplY3RfZG9fYml0XzE3X3N3aXp6bGUoc3Ry
dWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIHZvaWQgaTkxNV9nZW1fb2JqZWN0X3NhdmVf
Yml0XzE3X3N3aXp6bGUoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJCQkJIHN0
cnVjdCBzZ190YWJsZSAqcGFnZXMpOwogCitpbnQgX19pOTE1X3ZtYV9waW5fZmVuY2VfYXN5bmMo
c3RydWN0IGk5MTVfdm1hICp2bWEsCisJCQkgICAgICAgc3RydWN0IGRtYV9mZW5jZV93b3JrICp3
b3JrKTsKK3ZvaWQgX19pOTE1X3ZtYV9hcHBseV9mZW5jZV9hc3luYyhzdHJ1Y3QgaTkxNV92bWEg
KnZtYSk7CisKIHZvaWQgaW50ZWxfZ2d0dF9pbml0X2ZlbmNlcyhzdHJ1Y3QgaTkxNV9nZ3R0ICpn
Z3R0KTsKIHZvaWQgaW50ZWxfZ2d0dF9maW5pX2ZlbmNlcyhzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0
KTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuaCBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmgKaW5kZXggOWEyNmU2Y2JlOGNkLi40YzA4ODIwNDE1
MTMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuaApAQCAtMzM0LDggKzMzNCw2IEBAIHN0YXRpYyBp
bmxpbmUgc3RydWN0IHBhZ2UgKmk5MTVfdm1hX2ZpcnN0X3BhZ2Uoc3RydWN0IGk5MTVfdm1hICp2
bWEpCiBpbnQgX19tdXN0X2NoZWNrIGk5MTVfdm1hX3Bpbl9mZW5jZShzdHJ1Y3QgaTkxNV92bWEg
KnZtYSk7CiB2b2lkIGk5MTVfdm1hX3Jldm9rZV9mZW5jZShzdHJ1Y3QgaTkxNV92bWEgKnZtYSk7
CiAKLWludCBfX2k5MTVfdm1hX3Bpbl9mZW5jZShzdHJ1Y3QgaTkxNV92bWEgKnZtYSk7Ci0KIHN0
YXRpYyBpbmxpbmUgdm9pZCBfX2k5MTVfdm1hX3VucGluX2ZlbmNlKHN0cnVjdCBpOTE1X3ZtYSAq
dm1hKQogewogCUdFTV9CVUdfT04oYXRvbWljX3JlYWQoJnZtYS0+ZmVuY2UtPnBpbl9jb3VudCkg
PD0gMCk7Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2lu
dGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E6CD6D29BD
	for <lists+intel-gfx@lfdr.de>; Thu, 10 Oct 2019 14:42:27 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D54ED6E258;
	Thu, 10 Oct 2019 12:42:24 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2E4516E249
 for <intel-gfx@lists.freedesktop.org>; Thu, 10 Oct 2019 12:42:23 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Oct 2019 05:42:22 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,280,1566889200"; d="scan'208";a="184399162"
Received: from pashteka-mobl.ger.corp.intel.com (HELO [10.252.41.207])
 ([10.252.41.207])
 by orsmga007.jf.intel.com with ESMTP; 10 Oct 2019 05:42:21 -0700
To: =?UTF-8?B?VmlsbGUgU3lyasOkbMOk?= <ville.syrjala@linux.intel.com>
References: <20191004113514.17064-1-maarten.lankhorst@linux.intel.com>
 <20191004113514.17064-16-maarten.lankhorst@linux.intel.com>
 <20191008194022.GW1208@intel.com>
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Message-ID: <2887353f-c30c-0e80-3338-4566661ed3da@linux.intel.com>
Date: Thu, 10 Oct 2019 14:42:20 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191008194022.GW1208@intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 15/24] drm/i915: Try to make bigjoiner work
 in atomic check, v2.
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T3AgMDgtMTAtMjAxOSBvbSAyMTo0MCBzY2hyZWVmIFZpbGxlIFN5cmrDpGzDpDoKPiBPbiBGcmks
IE9jdCAwNCwgMjAxOSBhdCAwMTozNTowNVBNICswMjAwLCBNYWFydGVuIExhbmtob3JzdCB3cm90
ZToKPj4gV2hlbiB0aGUgY2xvY2sgaXMgaGlnaGVyIHRoYW4gdGhlIGRvdGNsb2NrLCB0cnkgd2l0
aCAyIHBpcGVzIGVuYWJsZWQuCj4+IElmIHdlIGNhbiBlbmFibGUgMiwgdGhlbiB3ZSB3aWxsIGdv
IGludG8gYmlnIGpvaW5lciBtb2RlLCBhbmQgc3RlYWwKPj4gdGhlIGFkamFjZW50IGNydGMuCj4+
Cj4+IFRoaXMgb25seSBsaW5rcyB0aGUgY3J0YydzIGluIHNvZnR3YXJlLCBubyBoYXJkd2FyZSBv
ciBwbGFuZQo+PiBwcm9ncmFtbWluZyBpcyBkb25lIHlldC4gQmxvYnMgYXJlIGFsc28gY29waWVk
IGZyb20gdGhlIG1hc3RlcidzCj4+IGNydGNfc3RhdGUsIHNvIGl0IGRvZXNuJ3QgZGVwZW5kIGF0
IGNvbW1pdCB0aW1lIG9uIHRoZSBvdGhlcgo+PiBjcnRjX3N0YXRlLgo+Pgo+PiBDaGFuZ2VzIHNp
bmNlIHYxOgo+PiAtIFJlbmFtZSBwaXBlIHRpbWluZ3MgdG8gdHJhbnNjb2RlciB0aW1pbmdzLCBh
cyB0aGV5IGFyZSBub3cgZGlmZmVyZW50Lgo+Pgo+PiBTaWduZWQtb2ZmLWJ5OiBNYWFydGVuIExh
bmtob3JzdCA8bWFhcnRlbi5sYW5raG9yc3RAbGludXguaW50ZWwuY29tPgo+PiAtLS0KPj4gIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmMgICB8ICAxNSArLQo+PiAg
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWMuaCAgIHwgICAzICstCj4+
ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyAgfCAyMTggKysr
KysrKysrKysrKysrKy0tCj4+ICAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5
cGVzLmggICAgfCAgMTEgKy0KPj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHAuYyAgICAgICB8ICAyNSArLQo+PiAgNSBmaWxlcyBjaGFuZ2VkLCAyMzQgaW5zZXJ0aW9ucygr
KSwgMzggZGVsZXRpb25zKC0pCj4+Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2F0b21pYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9hdG9taWMuYwo+PiBpbmRleCA0NzgzZDdmZjRmY2YuLmE1YjExYmQ5ZGE2OCAxMDA2NDQK
Pj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWMuYwo+PiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pYy5jCj4+IEBAIC0y
MjgsMjUgKzIyOCwyNiBAQCB2b2lkIGludGVsX2NydGNfZnJlZV9od19zdGF0ZShzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKPj4gIAlpbnRlbF9jcnRjX3B1dF9jb2xvcl9ibG9i
cyhjcnRjX3N0YXRlKTsKPj4gIH0KPj4gIAo+PiAtdm9pZCBpbnRlbF9jcnRjX2NvcHlfY29sb3Jf
YmxvYnMoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCj4+ICt2b2lkIGludGVs
X2NydGNfY29weV9jb2xvcl9ibG9icyhzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0
ZSwKPj4gKwkJCQkgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmZyb21fY3J0Y19zdGF0
ZSkKPj4gIHsKPj4gIAlpbnRlbF9jcnRjX3B1dF9jb2xvcl9ibG9icyhjcnRjX3N0YXRlKTsKPj4g
IAo+PiAtCWlmIChjcnRjX3N0YXRlLT51YXBpLmRlZ2FtbWFfbHV0KQo+PiArCWlmIChmcm9tX2Ny
dGNfc3RhdGUtPnVhcGkuZGVnYW1tYV9sdXQpCj4+ICAJCWNydGNfc3RhdGUtPmh3LmRlZ2FtbWFf
bHV0ID0KPj4gLQkJCWRybV9wcm9wZXJ0eV9ibG9iX2dldChjcnRjX3N0YXRlLT51YXBpLmRlZ2Ft
bWFfbHV0KTsKPj4gKwkJCWRybV9wcm9wZXJ0eV9ibG9iX2dldChmcm9tX2NydGNfc3RhdGUtPnVh
cGkuZGVnYW1tYV9sdXQpOwo+PiAgCWVsc2UKPj4gIAkJY3J0Y19zdGF0ZS0+aHcuZGVnYW1tYV9s
dXQgPSBOVUxMOwo+PiAgCj4+IC0JaWYgKGNydGNfc3RhdGUtPnVhcGkuZ2FtbWFfbHV0KQo+PiAr
CWlmIChmcm9tX2NydGNfc3RhdGUtPnVhcGkuZ2FtbWFfbHV0KQo+PiAgCQljcnRjX3N0YXRlLT5o
dy5nYW1tYV9sdXQgPQo+PiAtCQkJZHJtX3Byb3BlcnR5X2Jsb2JfZ2V0KGNydGNfc3RhdGUtPnVh
cGkuZ2FtbWFfbHV0KTsKPj4gKwkJCWRybV9wcm9wZXJ0eV9ibG9iX2dldChmcm9tX2NydGNfc3Rh
dGUtPnVhcGkuZ2FtbWFfbHV0KTsKPj4gIAllbHNlCj4+ICAJCWNydGNfc3RhdGUtPmh3LmdhbW1h
X2x1dCA9IE5VTEw7Cj4+ICAKPj4gLQlpZiAoY3J0Y19zdGF0ZS0+dWFwaS5jdG0pCj4+ICsJaWYg
KGZyb21fY3J0Y19zdGF0ZS0+dWFwaS5jdG0pCj4+ICAJCWNydGNfc3RhdGUtPmh3LmN0bSA9Cj4+
IC0JCQlkcm1fcHJvcGVydHlfYmxvYl9nZXQoY3J0Y19zdGF0ZS0+dWFwaS5jdG0pOwo+PiArCQkJ
ZHJtX3Byb3BlcnR5X2Jsb2JfZ2V0KGZyb21fY3J0Y19zdGF0ZS0+dWFwaS5jdG0pOwo+PiAgCWVs
c2UKPj4gIAkJY3J0Y19zdGF0ZS0+aHcuY3RtID0gTlVMTDsKPj4gIH0KPj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pYy5oCj4+IGluZGV4IDQyYmU5MWUwNzcyYS4u
OGRhODRkNjRhYTA0IDEwMDY0NAo+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2F0b21pYy5oCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfYXRvbWljLmgKPj4gQEAgLTM2LDcgKzM2LDggQEAgc3RydWN0IGRybV9jcnRjX3N0YXRlICpp
bnRlbF9jcnRjX2R1cGxpY2F0ZV9zdGF0ZShzdHJ1Y3QgZHJtX2NydGMgKmNydGMpOwo+PiAgdm9p
ZCBpbnRlbF9jcnRjX2Rlc3Ryb3lfc3RhdGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAo+PiAgCQkJ
ICAgICAgIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqc3RhdGUpOwo+PiAgdm9pZCBpbnRlbF9jcnRj
X2ZyZWVfaHdfc3RhdGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpOwo+PiAt
dm9pZCBpbnRlbF9jcnRjX2NvcHlfY29sb3JfYmxvYnMoc3RydWN0IGludGVsX2NydGNfc3RhdGUg
KmNydGNfc3RhdGUpOwo+PiArdm9pZCBpbnRlbF9jcnRjX2NvcHlfY29sb3JfYmxvYnMoc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCj4+ICsJCQkJIGNvbnN0IHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpmcm9tX2NydGNfc3RhdGUpOwo+PiAgc3RydWN0IGRybV9hdG9taWNfc3Rh
dGUgKmludGVsX2F0b21pY19zdGF0ZV9hbGxvYyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKPj4g
IHZvaWQgaW50ZWxfYXRvbWljX3N0YXRlX2NsZWFyKHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpz
dGF0ZSk7Cj4+ICAKPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5LmMKPj4gaW5kZXggY2FhYjhjZmRkY2JkLi5jMmIzYzdiNmYzOWIgMTAwNjQ0Cj4+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCj4+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCj4+IEBAIC0xMjMsNyAr
MTIzLDcgQEAgc3RhdGljIHZvaWQgaXJvbmxha2VfcGNoX2Nsb2NrX2dldChzdHJ1Y3QgaW50ZWxf
Y3J0YyAqY3J0YywKPj4gIHN0YXRpYyBpbnQgaW50ZWxfZnJhbWVidWZmZXJfaW5pdChzdHJ1Y3Qg
aW50ZWxfZnJhbWVidWZmZXIgKmlmYiwKPj4gIAkJCQkgIHN0cnVjdCBkcm1faTkxNV9nZW1fb2Jq
ZWN0ICpvYmosCj4+ICAJCQkJICBzdHJ1Y3QgZHJtX21vZGVfZmJfY21kMiAqbW9kZV9jbWQpOwo+
PiAtc3RhdGljIHZvaWQgaW50ZWxfc2V0X3BpcGVfdGltaW5ncyhjb25zdCBzdHJ1Y3QgaW50ZWxf
Y3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSk7Cj4+ICtzdGF0aWMgdm9pZCBpbnRlbF9zZXRfdHJhbnNj
b2Rlcl90aW1pbmdzKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKTsK
Pj4gIHN0YXRpYyB2b2lkIGludGVsX3NldF9waXBlX3NyY19zaXplKGNvbnN0IHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKTsKPj4gIHN0YXRpYyB2b2lkIGludGVsX2NwdV90cmFu
c2NvZGVyX3NldF9tX24oY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUs
Cj4+ICAJCQkJCSBjb25zdCBzdHJ1Y3QgaW50ZWxfbGlua19tX24gKm1fbiwKPj4gQEAgLTYzMDgs
NyArNjMwOCw3IEBAIHN0YXRpYyB2b2lkIGlyb25sYWtlX2NydGNfZW5hYmxlKHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZywKPj4gIAlpZiAoaW50ZWxfY3J0Y19oYXNfZHBfZW5j
b2RlcihwaXBlX2NvbmZpZykpCj4+ICAJCWludGVsX2RwX3NldF9tX24ocGlwZV9jb25maWcsIE0x
X04xKTsKPj4gIAo+PiAtCWludGVsX3NldF9waXBlX3RpbWluZ3MocGlwZV9jb25maWcpOwo+PiAr
CWludGVsX3NldF90cmFuc2NvZGVyX3RpbWluZ3MocGlwZV9jb25maWcpOwo+PiAgCWludGVsX3Nl
dF9waXBlX3NyY19zaXplKHBpcGVfY29uZmlnKTsKPj4gIAo+PiAgCWlmIChwaXBlX2NvbmZpZy0+
aGFzX3BjaF9lbmNvZGVyKSB7Cj4+IEBAIC02NDM1LDcgKzY0MzUsNyBAQCBzdGF0aWMgdm9pZCBo
YXN3ZWxsX2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZywK
Pj4gIAkJaW50ZWxfZHBfc2V0X21fbihwaXBlX2NvbmZpZywgTTFfTjEpOwo+PiAgCj4+ICAJaWYg
KCF0cmFuc2NvZGVyX2lzX2RzaShjcHVfdHJhbnNjb2RlcikpCj4+IC0JCWludGVsX3NldF9waXBl
X3RpbWluZ3MocGlwZV9jb25maWcpOwo+PiArCQlpbnRlbF9zZXRfdHJhbnNjb2Rlcl90aW1pbmdz
KHBpcGVfY29uZmlnKTsKPj4gIAo+PiAgCWludGVsX3NldF9waXBlX3NyY19zaXplKHBpcGVfY29u
ZmlnKTsKPj4gIAo+PiBAQCAtNjgzOCw3ICs2ODM4LDcgQEAgc3RhdGljIHZvaWQgdmFsbGV5dmll
d19jcnRjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcsCj4+ICAJ
aWYgKGludGVsX2NydGNfaGFzX2RwX2VuY29kZXIocGlwZV9jb25maWcpKQo+PiAgCQlpbnRlbF9k
cF9zZXRfbV9uKHBpcGVfY29uZmlnLCBNMV9OMSk7Cj4+ICAKPj4gLQlpbnRlbF9zZXRfcGlwZV90
aW1pbmdzKHBpcGVfY29uZmlnKTsKPj4gKwlpbnRlbF9zZXRfdHJhbnNjb2Rlcl90aW1pbmdzKHBp
cGVfY29uZmlnKTsKPj4gIAlpbnRlbF9zZXRfcGlwZV9zcmNfc2l6ZShwaXBlX2NvbmZpZyk7Cj4+
ICAKPj4gIAlpZiAoSVNfQ0hFUlJZVklFVyhkZXZfcHJpdikgJiYgcGlwZSA9PSBQSVBFX0IpIHsK
Pj4gQEAgLTY5MDYsNyArNjkwNiw3IEBAIHN0YXRpYyB2b2lkIGk5eHhfY3J0Y19lbmFibGUoc3Ry
dWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAo+PiAgCWlmIChpbnRlbF9jcnRjX2hh
c19kcF9lbmNvZGVyKHBpcGVfY29uZmlnKSkKPj4gIAkJaW50ZWxfZHBfc2V0X21fbihwaXBlX2Nv
bmZpZywgTTFfTjEpOwo+PiAgCj4+IC0JaW50ZWxfc2V0X3BpcGVfdGltaW5ncyhwaXBlX2NvbmZp
Zyk7Cj4+ICsJaW50ZWxfc2V0X3RyYW5zY29kZXJfdGltaW5ncyhwaXBlX2NvbmZpZyk7Cj4+ICAJ
aW50ZWxfc2V0X3BpcGVfc3JjX3NpemUocGlwZV9jb25maWcpOwo+PiAgCj4+ICAJaTl4eF9zZXRf
cGlwZWNvbmYocGlwZV9jb25maWcpOwo+PiBAQCAtNzM5Niw3ICs3Mzk2LDcgQEAgc3RhdGljIGlu
dCBpbnRlbF9jcnRjX2NvbXB1dGVfY29uZmlnKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAo+PiAg
CQkJCSAgICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnKQo+PiAgewo+PiAg
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY3J0Yy0+YmFzZS5k
ZXYpOwo+PiAtCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlID0g
JnBpcGVfY29uZmlnLT5ody5hZGp1c3RlZF9tb2RlOwo+PiArCXN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlICphZGp1c3RlZF9tb2RlID0gJnBpcGVfY29uZmlnLT5ody5hZGp1c3RlZF9tb2RlOwo+PiAg
CWludCBjbG9ja19saW1pdCA9IGRldl9wcml2LT5tYXhfZG90Y2xrX2ZyZXE7Cj4+ICAKPj4gIAlp
ZiAoSU5URUxfR0VOKGRldl9wcml2KSA8IDQpIHsKPj4gQEAgLTc0MTMsNiArNzQxMywyNSBAQCBz
dGF0aWMgaW50IGludGVsX2NydGNfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2NydGMgKmNy
dGMsCj4+ICAJCX0KPj4gIAl9Cj4+ICAKPj4gKwkvKgo+PiArCSAqIGNvcHkgaHcgbW9kZSB0byB0
cmFuc2NvZGVyIG1vZGUuCj4+ICsJICogVGhpcyBtYXR0ZXJzIG1vc3RseSBmb3IgYmlnIGpvaW5l
ciwgd2hpY2ggc3BsaXRzIHRoZSBtb2RlIGluIGhhbGYuCj4+ICsJICovCj4+ICsJcGlwZV9jb25m
aWctPmh3LnRyYW5zY29kZXJfbW9kZSA9IHBpcGVfY29uZmlnLT5ody5hZGp1c3RlZF9tb2RlOwo+
PiArCWlmIChwaXBlX2NvbmZpZy0+Ymlnam9pbmVyKSB7Cj4+ICsJCS8qIE1ha2Ugc3VyZSB0aGUg
Y3J0YyBjb25maWcgaXMgaGFsdmVkIGhvcml6b250YWxseSAqLwo+PiArCQlhZGp1c3RlZF9tb2Rl
LT5jcnRjX2Nsb2NrIC89IDI7Cj4+ICsJCWFkanVzdGVkX21vZGUtPmNydGNfaGRpc3BsYXkgLz0g
MjsKPj4gKwkJYWRqdXN0ZWRfbW9kZS0+Y3J0Y19oYmxhbmtfc3RhcnQgLz0gMjsKPj4gKwkJYWRq
dXN0ZWRfbW9kZS0+Y3J0Y19oYmxhbmtfZW5kIC89IDI7Cj4+ICsJCWFkanVzdGVkX21vZGUtPmNy
dGNfaHN5bmNfc3RhcnQgLz0gMjsKPj4gKwkJYWRqdXN0ZWRfbW9kZS0+Y3J0Y19oc3luY19lbmQg
Lz0gMjsKPj4gKwkJYWRqdXN0ZWRfbW9kZS0+Y3J0Y19odG90YWwgLz0gMjsKPj4gKwkJYWRqdXN0
ZWRfbW9kZS0+Y3J0Y19oc2tldyAvPSAyOwo+PiArCj4+ICsJCXBpcGVfY29uZmlnLT5waXBlX3Ny
Y193IC89IDI7Cj4+ICsJfQo+IEhtbS4gT2ggcmlnaHQsIHdlIHN0aWxsIG5lZWQgdG8ga2VlcCB0
aGUgZnVsbCB0aW1pbmdzIHNpbmNlCj4gdGhlIGpvaW5lciBpcyBiZXR3ZWVuIHRoZSBwaXBlIGFu
ZCB0cmFuc2NvZGVyIDovCj4KPiBXZSBwcm9iYWJseSBuZWVkIGEgY2hlY2sgdG8gbWFrZSBzdXJl
IHRoZSBub24taGFsdmVkIGhvcml6Cj4gdGltaW5ncyBhcmUgZXZlbi4KPgo+IGhza2V3IHdlIGRv
bid0IHVzZSBzbyBkb24ndCBuZWVkIHRvIGZyb2IgdGhhdC4KPgo+IEkgd29uZGVyIGlmIHRoZXJl
IGFyZSBvdGhlciBwbGFjZXMgdGhhdCBuZWVkIHRoZSBmdWxsIHZhbHVlcy4gUXVpY2sKPiBnbGFu
Y2Ugb25seSByZWFsbHkgcmV2ZWFscyBlbmNvZGVyIGFuZCBhdWRpbyBjb2RlLiBNb3N0IGVuY29k
ZXIgY29kZQo+IEkgZ3Vlc3MgZG9lc24ndCByZWFsbHkgbWF0dGVyIHNpbmNlIGJpZ2pvaW5lciBp
cyBEUCBvbmx5LiBBbmQgdGhlIERQCj4gY29kZSBpdHNlbGYgbG9va3MgZmluZSBzaW5jZSB0aGlz
IGhhbHZpbmcgaGFwcGVucyBhZnRlcgo+IC5jb21wdXRlX2NvbmZvZygpLiBBbmQgdGhlIGF1ZGlv
IGNvZGUgb25seSB1c2VzIGNydGNfY2xvY2sgb24gSERNSQo+IChub3Qgc3VyZSBpdCBzaG91bGQg
dXNlIGl0IHRoZXJlIGVpdGhlciwgYnV0IHRoYXQncyBhIHNlcGFyYXRlIGlzc3VlKS4KPgo+PiAr
Cj4+ICAJaWYgKGFkanVzdGVkX21vZGUtPmNydGNfY2xvY2sgPiBjbG9ja19saW1pdCkgewo+PiAg
CQlEUk1fREVCVUdfS01TKCJyZXF1ZXN0ZWQgcGl4ZWwgY2xvY2sgKCVkIGtIeikgdG9vIGhpZ2gg
KG1heDogJWQga0h6LCBkb3VibGUgd2lkZTogJXMpXG4iLAo+PiAgCQkJICAgICAgYWRqdXN0ZWRf
bW9kZS0+Y3J0Y19jbG9jaywgY2xvY2tfbGltaXQsCj4+IEBAIC04MTE0LDEzICs4MTMzLDEzIEBA
IHN0YXRpYyB2b2lkIGk4eHhfY29tcHV0ZV9kcGxsKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAo+
PiAgCWNydGNfc3RhdGUtPmRwbGxfaHdfc3RhdGUuZHBsbCA9IGRwbGw7Cj4+ICB9Cj4+ICAKPj4g
LXN0YXRpYyB2b2lkIGludGVsX3NldF9waXBlX3RpbWluZ3MoY29uc3Qgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUpCj4+ICtzdGF0aWMgdm9pZCBpbnRlbF9zZXRfdHJhbnNjb2Rl
cl90aW1pbmdzKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQo+PiAg
ewo+PiAgCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0YXRl
LT51YXBpLmNydGMpOwo+PiAgCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRv
X2k5MTUoY3J0Yy0+YmFzZS5kZXYpOwo+PiAgCWVudW0gcGlwZSBwaXBlID0gY3J0Yy0+cGlwZTsK
Pj4gIAllbnVtIHRyYW5zY29kZXIgY3B1X3RyYW5zY29kZXIgPSBjcnRjX3N0YXRlLT5jcHVfdHJh
bnNjb2RlcjsKPj4gLQljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9k
ZSA9ICZjcnRjX3N0YXRlLT5ody5hZGp1c3RlZF9tb2RlOwo+PiArCWNvbnN0IHN0cnVjdCBkcm1f
ZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlID0gJmNydGNfc3RhdGUtPmh3LnRyYW5zY29kZXJf
bW9kZTsKPj4gIAl1MzIgY3J0Y192dG90YWwsIGNydGNfdmJsYW5rX2VuZDsKPj4gIAlpbnQgdnN5
bmNzaGlmdCA9IDA7Cj4+ICAKPj4gQEAgLTgyMDUsOCArODIyNCw4IEBAIHN0YXRpYyBib29sIGlu
dGVsX3BpcGVfaXNfaW50ZXJsYWNlZChjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0
Y19zdGF0ZSkKPj4gIAkJcmV0dXJuIEk5MTVfUkVBRChQSVBFQ09ORihjcHVfdHJhbnNjb2Rlcikp
ICYgUElQRUNPTkZfSU5URVJMQUNFX01BU0s7Cj4+ICB9Cj4+ICAKPj4gLXN0YXRpYyB2b2lkIGlu
dGVsX2dldF9waXBlX3RpbWluZ3Moc3RydWN0IGludGVsX2NydGMgKmNydGMsCj4+IC0JCQkJICAg
c3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnKQo+PiArc3RhdGljIHZvaWQgaW50
ZWxfZ2V0X3RyYW5zY29kZXJfdGltaW5ncyhzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKPj4gKwkJ
CQkJIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZykKPiBNaXNzaW5nIHRoZSB0
cmFuc2NvZGVyX21vZGUgcmVhZG91dCArIGFkanVzdGVkX21vZGUvMiBoZXJlPwo+Cj4+ICB7Cj4+
ICAJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtPmJhc2UuZGV2Owo+PiAgCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZGV2KTsKPj4gQEAgLTg4MDksNyAr
ODgyOCw3IEBAIHN0YXRpYyBib29sIGk5eHhfZ2V0X3BpcGVfY29uZmlnKHN0cnVjdCBpbnRlbF9j
cnRjICpjcnRjLAo+PiAgCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwgNCkKPj4gIAkJcGlwZV9j
b25maWctPmRvdWJsZV93aWRlID0gdG1wICYgUElQRUNPTkZfRE9VQkxFX1dJREU7Cj4+ICAKPj4g
LQlpbnRlbF9nZXRfcGlwZV90aW1pbmdzKGNydGMsIHBpcGVfY29uZmlnKTsKPj4gKwlpbnRlbF9n
ZXRfdHJhbnNjb2Rlcl90aW1pbmdzKGNydGMsIHBpcGVfY29uZmlnKTsKPj4gIAlpbnRlbF9nZXRf
cGlwZV9zcmNfc2l6ZShjcnRjLCBwaXBlX2NvbmZpZyk7Cj4+ICAKPj4gIAlpOXh4X2dldF9wZml0
X2NvbmZpZyhjcnRjLCBwaXBlX2NvbmZpZyk7Cj4+IEBAIC0xMDA0NSw3ICsxMDA2NCw3IEBAIHN0
YXRpYyBib29sIGlyb25sYWtlX2dldF9waXBlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0
YywKPj4gIAkJcGlwZV9jb25maWctPnBpeGVsX211bHRpcGxpZXIgPSAxOwo+PiAgCX0KPj4gIAo+
PiAtCWludGVsX2dldF9waXBlX3RpbWluZ3MoY3J0YywgcGlwZV9jb25maWcpOwo+PiArCWludGVs
X2dldF90cmFuc2NvZGVyX3RpbWluZ3MoY3J0YywgcGlwZV9jb25maWcpOwo+PiAgCWludGVsX2dl
dF9waXBlX3NyY19zaXplKGNydGMsIHBpcGVfY29uZmlnKTsKPj4gIAo+PiAgCWlyb25sYWtlX2dl
dF9wZml0X2NvbmZpZyhjcnRjLCBwaXBlX2NvbmZpZyk7Cj4+IEBAIC0xMDQ0NSw3ICsxMDQ2NCw3
IEBAIHN0YXRpYyBib29sIGhhc3dlbGxfZ2V0X3BpcGVfY29uZmlnKHN0cnVjdCBpbnRlbF9jcnRj
ICpjcnRjLAo+PiAgCWlmICghdHJhbnNjb2Rlcl9pc19kc2kocGlwZV9jb25maWctPmNwdV90cmFu
c2NvZGVyKSB8fAo+PiAgCSAgICBJTlRFTF9HRU4oZGV2X3ByaXYpID49IDExKSB7Cj4+ICAJCWhh
c3dlbGxfZ2V0X2RkaV9wb3J0X3N0YXRlKGNydGMsIHBpcGVfY29uZmlnKTsKPj4gLQkJaW50ZWxf
Z2V0X3BpcGVfdGltaW5ncyhjcnRjLCBwaXBlX2NvbmZpZyk7Cj4+ICsJCWludGVsX2dldF90cmFu
c2NvZGVyX3RpbWluZ3MoY3J0YywgcGlwZV9jb25maWcpOwo+PiAgCX0KPj4gIAo+PiAgCWludGVs
X2dldF9waXBlX3NyY19zaXplKGNydGMsIHBpcGVfY29uZmlnKTsKPj4gQEAgLTExODE0LDYgKzEx
ODMzLDcgQEAgc3RhdGljIGludCBpbnRlbF9jcnRjX2F0b21pY19jaGVjayhzdHJ1Y3QgaW50ZWxf
YXRvbWljX3N0YXRlICpzdGF0ZSwKPj4gIAo+PiAgCWlmIChtb2RlX2NoYW5nZWQgJiYgY3J0Y19z
dGF0ZS0+aHcuZW5hYmxlICYmCj4+ICAJICAgIGRldl9wcml2LT5kaXNwbGF5LmNydGNfY29tcHV0
ZV9jbG9jayAmJgo+PiArCSAgICAhY3J0Y19zdGF0ZS0+Ymlnam9pbmVyX3NsYXZlICYmCj4+ICAJ
ICAgICFXQVJOX09OKGNydGNfc3RhdGUtPnNoYXJlZF9kcGxsKSkgewo+PiAgCQlyZXQgPSBkZXZf
cHJpdi0+ZGlzcGxheS5jcnRjX2NvbXB1dGVfY2xvY2soY3J0YywgY3J0Y19zdGF0ZSk7Cj4+ICAJ
CWlmIChyZXQpCj4+IEBAIC0xMjI3OCw3ICsxMjI5OCw3IEBAIHN0YXRpYyB2b2lkIGNvcHlfdWFw
aV90b19od19zdGF0ZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKPj4gIAlj
cnRjX3N0YXRlLT5ody5hY3RpdmUgPSBjcnRjX3N0YXRlLT51YXBpLmFjdGl2ZTsKPj4gIAljcnRj
X3N0YXRlLT5ody5tb2RlID0gY3J0Y19zdGF0ZS0+dWFwaS5tb2RlOwo+PiAgCWNydGNfc3RhdGUt
Pmh3LmFkanVzdGVkX21vZGUgPSBjcnRjX3N0YXRlLT51YXBpLmFkanVzdGVkX21vZGU7Cj4+IC0J
aW50ZWxfY3J0Y19jb3B5X2NvbG9yX2Jsb2JzKGNydGNfc3RhdGUpOwo+PiArCWludGVsX2NydGNf
Y29weV9jb2xvcl9ibG9icyhjcnRjX3N0YXRlLCBjcnRjX3N0YXRlKTsKPj4gIH0KPj4gIAo+PiAg
c3RhdGljIHZvaWQgY29weV9od190b191YXBpX3N0YXRlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpjcnRjX3N0YXRlKQo+PiBAQCAtMTIyODYsNyArMTIzMDYsNDggQEAgc3RhdGljIHZvaWQgY29w
eV9od190b191YXBpX3N0YXRlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQo+
PiAgCWNydGNfc3RhdGUtPnVhcGkuZW5hYmxlID0gY3J0Y19zdGF0ZS0+aHcuZW5hYmxlOwo+PiAg
CWNydGNfc3RhdGUtPnVhcGkuYWN0aXZlID0gY3J0Y19zdGF0ZS0+aHcuYWN0aXZlOwo+PiAgCWNy
dGNfc3RhdGUtPnVhcGkubW9kZSA9IGNydGNfc3RhdGUtPmh3Lm1vZGU7Cj4+IC0JY3J0Y19zdGF0
ZS0+dWFwaS5hZGp1c3RlZF9tb2RlID0gY3J0Y19zdGF0ZS0+aHcuYWRqdXN0ZWRfbW9kZTsKPj4g
KwljcnRjX3N0YXRlLT51YXBpLmFkanVzdGVkX21vZGUgPSBjcnRjX3N0YXRlLT5ody50cmFuc2Nv
ZGVyX21vZGU7Cj4+ICt9Cj4+ICsKPj4gK3N0YXRpYyBpbnQKPj4gK2NvcHlfYmlnam9pbmVyX2Ny
dGNfc3RhdGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCj4+ICsJCQkgIGNv
bnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpmcm9tX2NydGNfc3RhdGUpCj4+ICt7Cj4+ICsJ
c3RydWN0IGludGVsX2NydGNfc3RhdGUgKnNhdmVkX3N0YXRlOwo+PiArCXN0cnVjdCBpbnRlbF9j
cnRjICpjcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOwo+PiArCj4+
ICsJc2F2ZWRfc3RhdGUgPSBrbWVtZHVwKGZyb21fY3J0Y19zdGF0ZSwgc2l6ZW9mKCpzYXZlZF9z
dGF0ZSksIEdGUF9LRVJORUwpOwo+PiArCWlmICghc2F2ZWRfc3RhdGUpCj4+ICsJCXJldHVybiAt
RU5PTUVNOwo+PiArCj4+ICsJc2F2ZWRfc3RhdGUtPnVhcGkgPSBjcnRjX3N0YXRlLT51YXBpOwo+
PiArCXNhdmVkX3N0YXRlLT5zY2FsZXJfc3RhdGUgPSBjcnRjX3N0YXRlLT5zY2FsZXJfc3RhdGU7
Cj4+ICsJc2F2ZWRfc3RhdGUtPnNoYXJlZF9kcGxsID0gY3J0Y19zdGF0ZS0+c2hhcmVkX2RwbGw7
Cj4+ICsJc2F2ZWRfc3RhdGUtPmRwbGxfaHdfc3RhdGUgPSBjcnRjX3N0YXRlLT5kcGxsX2h3X3N0
YXRlOwo+PiArCXNhdmVkX3N0YXRlLT5jcmNfZW5hYmxlZCA9IGNydGNfc3RhdGUtPmNyY19lbmFi
bGVkOwo+PiArCj4+ICsJaW50ZWxfY3J0Y19mcmVlX2h3X3N0YXRlKGNydGNfc3RhdGUpOwo+PiAr
CW1lbWNweShjcnRjX3N0YXRlLCBzYXZlZF9zdGF0ZSwgc2l6ZW9mKCpjcnRjX3N0YXRlKSk7Cj4+
ICsJa2ZyZWUoc2F2ZWRfc3RhdGUpOwo+PiArCj4+ICsJLyogUmUtaW5pdCBodyBzdGF0ZSAqLwo+
PiArCW1lbXNldCgmY3J0Y19zdGF0ZS0+aHcsIDAsIHNpemVvZihzYXZlZF9zdGF0ZS0+aHcpKTsK
Pj4gKwljcnRjX3N0YXRlLT5ody5lbmFibGUgPSBmcm9tX2NydGNfc3RhdGUtPmh3LmVuYWJsZTsK
Pj4gKwljcnRjX3N0YXRlLT5ody5hY3RpdmUgPSBmcm9tX2NydGNfc3RhdGUtPmh3LmFjdGl2ZTsK
Pj4gKwljcnRjX3N0YXRlLT5ody5tb2RlID0gZnJvbV9jcnRjX3N0YXRlLT5ody5tb2RlOwo+PiAr
CWNydGNfc3RhdGUtPmh3LmFkanVzdGVkX21vZGUgPSBmcm9tX2NydGNfc3RhdGUtPmh3LmFkanVz
dGVkX21vZGU7Cj4+ICsKPj4gKwkvKiBTb21lIGZpeHVwcyAqLwo+PiArCWNydGNfc3RhdGUtPnVh
cGkubW9kZV9jaGFuZ2VkID0gZnJvbV9jcnRjX3N0YXRlLT51YXBpLm1vZGVfY2hhbmdlZDsKPj4g
KwljcnRjX3N0YXRlLT51YXBpLmNvbm5lY3RvcnNfY2hhbmdlZCA9IGZyb21fY3J0Y19zdGF0ZS0+
dWFwaS5jb25uZWN0b3JzX2NoYW5nZWQ7Cj4+ICsJY3J0Y19zdGF0ZS0+dWFwaS5hY3RpdmVfY2hh
bmdlZCA9IGZyb21fY3J0Y19zdGF0ZS0+dWFwaS5hY3RpdmVfY2hhbmdlZDsKPj4gKwljcnRjX3N0
YXRlLT5udjEyX3BsYW5lcyA9IGNydGNfc3RhdGUtPmM4X3BsYW5lcyA9IGNydGNfc3RhdGUtPnVw
ZGF0ZV9wbGFuZXMgPSAwOwo+PiArCWNydGNfc3RhdGUtPmJpZ2pvaW5lcl9saW5rZWRfY3J0YyA9
IHRvX2ludGVsX2NydGMoZnJvbV9jcnRjX3N0YXRlLT51YXBpLmNydGMpOwo+PiArCWNydGNfc3Rh
dGUtPmJpZ2pvaW5lcl9zbGF2ZSA9IHRydWU7Cj4+ICsJY3J0Y19zdGF0ZS0+Y3B1X3RyYW5zY29k
ZXIgPSAoZW51bSB0cmFuc2NvZGVyKWNydGMtPnBpcGU7Cj4+ICsJY3J0Y19zdGF0ZS0+aGFzX2F1
ZGlvID0gZmFsc2U7Cj4+ICsKPj4gKwlyZXR1cm4gMDsKPj4gIH0KPj4gIAo+PiAgc3RhdGljIGlu
dAo+PiBAQCAtMTI0NTksNyArMTI1MjAsNyBAQCBpbnRlbF9tb2Rlc2V0X3BpcGVfY29uZmlnKHN0
cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZykKPj4gIAkJICAgICAgYmFzZV9icHAs
IHBpcGVfY29uZmlnLT5waXBlX2JwcCwgcGlwZV9jb25maWctPmRpdGhlcik7Cj4+ICAKPj4gIAkv
KiB1YXBpIHdhbnRzIGEgY29weSBvZiB0aGUgYWRqdXN0ZWRfbW9kZSBmb3IgdmJsYW5rIGJvb2tr
ZWVwaW5nICovCj4+IC0JcGlwZV9jb25maWctPnVhcGkuYWRqdXN0ZWRfbW9kZSA9IHBpcGVfY29u
ZmlnLT5ody5hZGp1c3RlZF9tb2RlOwo+PiArCXBpcGVfY29uZmlnLT51YXBpLmFkanVzdGVkX21v
ZGUgPSBwaXBlX2NvbmZpZy0+aHcudHJhbnNjb2Rlcl9tb2RlOwo+PiAgCj4+ICAJcmV0dXJuIDA7
Cj4+ICB9Cj4+IEBAIC0xMzYxMiw2ICsxMzY3MywxMDkgQEAgc3RhdGljIGludCBpbnRlbF9hdG9t
aWNfY2hlY2tfY3J0Y3Moc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4+ICAJcmV0
dXJuIDA7Cj4+ICB9Cj4+ICAKPj4gK3N0YXRpYyBpbnQgaW50ZWxfYXRvbWljX2NoZWNrX2JpZ2pv
aW5lcihzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKPj4gK3sKPj4gKwlzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7Cj4+
ICsJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9jcnRjX3N0YXRlLCAqbmV3X2NydGNfc3Rh
dGUsICpzbGF2ZV9jcnRjX3N0YXRlLCAqbWFzdGVyX2NydGNfc3RhdGU7Cj4+ICsJc3RydWN0IGlu
dGVsX2NydGMgKmNydGMsICpzbGF2ZSwgKm1hc3RlcjsKPj4gKwlpbnQgaSwgcmV0ID0gMDsKPj4g
Kwo+PiArCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwgMTEpCj4+ICsJCXJldHVybiAwOwo+PiAr
Cj4+ICsJZm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsIG9s
ZF9jcnRjX3N0YXRlLAo+PiArCQkJCQkgICAgbmV3X2NydGNfc3RhdGUsIGkpIHsKPj4gKwkJaWYg
KCFvbGRfY3J0Y19zdGF0ZS0+Ymlnam9pbmVyX3NsYXZlKQo+IEkga2VlcCB0aGlua2luZyB0aGF0
IHBvaW50cyBhdCB0aGUgc2xhdmUuICJpc19iaWdqb2luZXJfc2xhdmUiIHdvdWxkIGJlCj4gYSBs
ZXNzIGNvbmZ1c2luZyBuYW1lIHBlcmhhcHMuCj4KPj4gKwkJCWNvbnRpbnVlOwo+PiArCj4+ICsJ
CWlmIChjcnRjLT5waXBlID09IFBJUEVfQSkgewo+PiArCQkJRFJNX0VSUk9SKCJCaWdqb2luZXIg
c2xhdmUgb24gcGlwZSBBP1xuIik7Cj4+ICsJCQlyZXR1cm4gLUVJTlZBTDsKPj4gKwkJfQo+IERl
YWQgY29kZT8KPgo+PiArCj4+ICsJCS8qIGNydGMgc3RheWluZyBpbiBzbGF2ZSBtb2RlPyAqLwo+
PiArCQlpZiAoIW5ld19jcnRjX3N0YXRlLT51YXBpLmVuYWJsZSkKPj4gKwkJCWNvbnRpbnVlOwo+
PiArCj4+ICsJCWlmIChuZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSB8fCBuZXdfY3J0Y19z
dGF0ZS0+dXBkYXRlX3BpcGUpIHsKPiBBcmUgdGhlc2UgY2hlY2tzIGV2ZW4gbmVlZGVkPyBXZSd2
ZSBhbHJlYWR5IGRldGVybWluZWQgd2Ugd2VyZSBhCj4gc2xhdmUgYW5kIHRoZSB1YXBpIGNydGMg
aXMgbm93IGVuYWJsZWQsIHNvIHdlIGhhdmUgdG8gZ2l2ZSB0aGUKPiBwaXBlIGJhY2sgdG8gdGhl
IHVhcGkgdXNlciBubyBtYXR0ZXIgd2hhdC4KPgo+PiArCQkJbWFzdGVyID0gb2xkX2NydGNfc3Rh
dGUtPmJpZ2pvaW5lcl9saW5rZWRfY3J0YzsKPj4gKwkJCW1hc3Rlcl9jcnRjX3N0YXRlID0gaW50
ZWxfYXRvbWljX2dldF9jcnRjX3N0YXRlKCZzdGF0ZS0+YmFzZSwgbWFzdGVyKTsKPj4gKwkJCWlm
IChJU19FUlIobWFzdGVyX2NydGNfc3RhdGUpKQo+PiArCQkJCXJldHVybiBQVFJfRVJSKG1hc3Rl
cl9jcnRjX3N0YXRlKTsKPj4gKwo+PiArCQkJLyoKPj4gKwkJCSAqIEZvcmNlIG1vZGVzZXQgb24g
bWFzdGVyLCB0byByZWNhbGN1bGF0ZSBiaWdqb2luZXIKPj4gKwkJCSAqIHN0YXRlLgo+PiArCQkJ
ICoKPj4gKwkJCSAqIElmIG1hc3Rlcl9jcnRjX3N0YXRlIHdhcyBub3QgcGFydCBvZiB0aGUgYXRv
bWljIGNvbW1pdCwKPj4gKwkJCSAqIHdlIHdpbGwgZmFpbCBiZWNhdXNlIHRoZSBtYXN0ZXIgd2Fz
IG5vdCBkZWNvbmZpZ3VyZWQsCj4+ICsJCQkgKiBidXQgYXQgbGVhc3QgZmFpbCBiZWxvdyB0byB1
bmlmeSB0aGUgY2hlY2tzLgo+PiArCQkJICovCj4+ICsJCQltYXN0ZXJfY3J0Y19zdGF0ZS0+dWFw
aS5tb2RlX2NoYW5nZWQgPSB0cnVlOwo+PiArCj4+ICsJCQlyZXQgPSBkcm1fYXRvbWljX2FkZF9h
ZmZlY3RlZF9wbGFuZXMoJnN0YXRlLT5iYXNlLCAmY3J0Yy0+YmFzZSk7Cj4+ICsJCQlpZiAocmV0
KQo+PiArCQkJCXJldHVybiByZXQ7Cj4+ICsKPj4gKwkJCXJldCA9IGRybV9hdG9taWNfYWRkX2Fm
ZmVjdGVkX2Nvbm5lY3RvcnMoJnN0YXRlLT5iYXNlLCAmY3J0Yy0+YmFzZSk7Cj4+ICsJCQlpZiAo
cmV0KQo+PiArCQkJCXJldHVybiByZXQ7Cj4gVGhpcyB3aG9sZSB0aGluZyBmZWVscyBhIGJpdCBs
YXRlIHRvIGJlIGRvaW5nIGl0LiBDYW4ndCB3ZSBqdXN0IGRvIHRoaXMKPiBzdHVmZiBiZWZvcmUg
LmNvbXB1dGVfY29uZmlnKCk/IFRoZW4gYXQgbGVhc3QgaW4gdGhlb3J5IHRoZSBtYXN0ZXIgY291
bGQKPiBoYXZlIGEgY2hhbmNlIHRvIHJlY29uZmlndXJlIGl0c2VsZiB0byBub3QgdXNlIHRoZSBi
aWdqb2luZXI/IEkgc3VwcG9zZQo+IHRoZXJlIGlzIG5vdGhpbmcgaXQgcmVhbGx5IGNhbiBkbyB0
byBtYWtlIHRoZSBjb25maWd1cmF0aW9uIHdvcmssIGJ1dAo+IEkgdGhpbmsgaXQgd291bGQgc3Rp
bGwgZmVlbCBsaWtlIHRoZSBtb3JlIG5hdHVyYWwgb3JkZXIgb2YgdGhpbmdzLgo+Cj4+ICsJCX0K
Pj4gKwl9Cj4+ICsKPj4gKwlmb3JfZWFjaF9vbGRuZXdfaW50ZWxfY3J0Y19pbl9zdGF0ZShzdGF0
ZSwgY3J0Yywgb2xkX2NydGNfc3RhdGUsCj4+ICsJCQkJCSAgICBuZXdfY3J0Y19zdGF0ZSwgaSkg
ewo+PiArCQlpZiAoIW5ld19jcnRjX3N0YXRlLT51YXBpLmVuYWJsZSB8fCAhbmV3X2NydGNfc3Rh
dGUtPmJpZ2pvaW5lcikgewo+PiArCQkJaWYgKCFvbGRfY3J0Y19zdGF0ZS0+Ymlnam9pbmVyKQo+
PiArCQkJCWNvbnRpbnVlOwo+IEknbSBoYXZpbmcgYSBoYXJkIHRpbWUgZGVjb2RpbmcgdGhhdC4g
V2hhdCBhcmUgd2UgdHJ5aW5nIHRvIGRvPwpCcmVhayBhbmQgbWVyZ2UgdGhlIGJpZ2pvaW5lciBz
bGF2ZSBjb25maWdzLiBBbHRob3VnaCBJIGd1ZXNzIHdlIGNhbiBwcm9iYWJseSBkbyB0aGlzIGlu
c2lkZSB0aGUgcGlwZSBjaGVjayBub3cuIEkgbWF5IGhhdmUgbWFkZSBpdCB0b28gY29tcGxpY2F0
ZWQgYmVmb3JlLiA6KQo+Cj4+ICsJCX0KPj4gKwo+PiArCQlpZiAoIW5lZWRzX21vZGVzZXQobmV3
X2NydGNfc3RhdGUpICYmICFuZXdfY3J0Y19zdGF0ZS0+dXBkYXRlX3BpcGUpCj4+ICsJCQljb250
aW51ZTsKPj4gKwo+PiArCQlpZiAobmV3X2NydGNfc3RhdGUtPmJpZ2pvaW5lciAmJiAhbmV3X2Ny
dGNfc3RhdGUtPmJpZ2pvaW5lcl9zbGF2ZSkgewo+PiArCQkJaWYgKDEgKyBjcnRjLT5waXBlID49
IElOVEVMX05VTV9QSVBFUyhkZXZfcHJpdikpIHsKPj4gKwkJCQlEUk1fREVCVUdfS01TKCJCaWcg
am9pbmVyIGNvbmZpZ3VyYXRpb24gcmVxdWlyZXMgQ1JUQyArIDEgdG8gYmUgdXNlZCwgZG9lc24n
dCBleGlzdFxuIik7Cj4+ICsJCQkJcmV0dXJuIC1FSU5WQUw7Cj4+ICsJCQl9Cj4gSSB0aGluayB3
ZSBzaG91bGQgYmUgYWJsZSB0byByZWplY3Qgc3VjaCBhIGNvbmZpZ3VyYXRpb24gYWxyZWFkeQo+
IHdoZW4gd2UgZGVjaWRlZCB0aGF0IHdlIG5lZWQgdG8gdXNlIHRoZSBiaWdqb2luZXIuIFNob3Vs
ZCBwcm9iYWJseQo+IHdyaXRlIGl0IHdpdGggYml0bWFza3MgdG8gYmUgZnV0dXJlIHByb29mLgpZ
ZWFoLCBzZWUgYWJvdmUuIEkgdGhpbmsgbm90IGZ1dHVyZSBwcm9vZmluZyBpcyBmaW5lIGZvciBu
b3cuIDopCj4+ICsKPj4gKwkJCXNsYXZlID0gbmV3X2NydGNfc3RhdGUtPmJpZ2pvaW5lcl9saW5r
ZWRfY3J0YyA9Cj4+ICsJCQkJaW50ZWxfZ2V0X2NydGNfZm9yX3BpcGUoZGV2X3ByaXYsIGNydGMt
PnBpcGUgKyAxKTsKPj4gKwkJCXNsYXZlX2NydGNfc3RhdGUgPSBpbnRlbF9hdG9taWNfZ2V0X2Ny
dGNfc3RhdGUoJnN0YXRlLT5iYXNlLCBzbGF2ZSk7Cj4+ICsJCQlpZiAoSVNfRVJSKHNsYXZlX2Ny
dGNfc3RhdGUpKQo+PiArCQkJCXJldHVybiBQVFJfRVJSKHNsYXZlX2NydGNfc3RhdGUpOwo+PiAr
Cj4+ICsJCQlpZiAoc2xhdmVfY3J0Y19zdGF0ZS0+dWFwaS5lbmFibGUpIHsKPj4gKwkJCQlEUk1f
REVCVUdfS01TKCJbQ1JUQzolZDolc10gQmlnIGpvaW5lciBjb25maWd1cmF0aW9uIHJlcXVpcmVz
IHRoaXMgQ1JUQyB0byBiZSB1bmNvbmZpZ3VyZWRcbiIsCj4+ICsJCQkJCSAgICAgIHNsYXZlLT5i
YXNlLmJhc2UuaWQsIHNsYXZlLT5iYXNlLm5hbWUpOwo+PiArCQkJCXJldHVybiAtRUlOVkFMOwo+
PiArCQkJfSBlbHNlIHsKPj4gKwkJCQlEUk1fREVCVUdfS01TKCJbQ1JUQzolZDolc10gVXNlZCBh
cyBzbGF2ZSBmb3IgYmlnIGpvaW5lclxuIiwKPj4gKwkJCQkJICAgICAgc2xhdmUtPmJhc2UuYmFz
ZS5pZCwgc2xhdmUtPmJhc2UubmFtZSk7Cj4+ICsJCQkJcmV0ID0gY29weV9iaWdqb2luZXJfY3J0
Y19zdGF0ZShzbGF2ZV9jcnRjX3N0YXRlLCBuZXdfY3J0Y19zdGF0ZSk7Cj4+ICsJCQl9Cj4+ICsJ
CX0gZWxzZSB7Cj4gSSBndWVzcyB0aGlzIG1lYW5zIHdlJ3JlIGFsd2F5cyBsb29raW5nIHRvIGFz
c29jaWF0ZSB0aGUgYmlnam9pbmVyCj4gbWFzdGVyIHdpdGggdGhlIHVhcGkgY3J0Yz8gSSB0aGlu
ayBpbiB0aGVvcnkgd2Ugc2hvdWxkIGJlIGFibGUgdG8KPiBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUg
dGhlIHNsYXZlIGlzIHRoZSB1YXBpIGNydGMgYXMgd2VsbC4gQnV0IG1heWJlCj4gaXQgZG9lc24n
dCBtYXR0ZXIgc28gbXVjaCBhcyB1c2Vyc3BhY2UgcHJvYmFibHkgcGlja3MgY3J0Y3MgaW4gb3Jk
ZXIKPiBhbnl3YXkuIEhtbSwgbWF5YmUgaXQgd291bGQgZXZlbiBiZSBoYXJkIHRvIGRlYWwgd2l0
aCB0aGF0Li4uCkkgdGhpbmsganVzdCBkb2luZyB0aGUgZWFzeSB0aGluZyBmaXJzdCBtYWtlcyBp
dCBsZXNzIGxpa2VseSB0byBtZXNzIHVwLiBJbiB0aGVvcnkgd2UgY2FuIGRvIHRoaXMsIGJ1dCBJ
IHRoaW5rIGl0J3Mgbm90IHdvcnRoIGhhbmRsaW5nIHRoaXMgc3BlY2lhbCBjYXNlLgo+PiArCQkJ
bWFzdGVyID0gbmV3X2NydGNfc3RhdGUtPmJpZ2pvaW5lcl9saW5rZWRfY3J0YzsKPj4gKwkJCWlm
ICghbWFzdGVyKQo+PiArCQkJCWNvbnRpbnVlOwo+PiArCj4+ICsJCQltYXN0ZXJfY3J0Y19zdGF0
ZSA9IGludGVsX2F0b21pY19nZXRfY3J0Y19zdGF0ZSgmc3RhdGUtPmJhc2UsIG1hc3Rlcik7Cj4+
ICsJCQlpZiAoSVNfRVJSKG1hc3Rlcl9jcnRjX3N0YXRlKSkKPj4gKwkJCQlyZXR1cm4gUFRSX0VS
UihtYXN0ZXJfY3J0Y19zdGF0ZSk7Cj4+ICsKPj4gKwkJCWlmICghbWFzdGVyX2NydGNfc3RhdGUt
PnVhcGkuZW5hYmxlICYmICFuZXdfY3J0Y19zdGF0ZS0+dWFwaS5lbmFibGUpIHsKPj4gKwkJCQlE
Uk1fREVCVUdfS01TKCJbQ1JUQzolZDolc10gRGlzYWJsaW5nIHNsYXZlIGZyb20gYmlnIGpvaW5l
clxuIiwKPj4gKwkJCQkJICAgICAgY3J0Yy0+YmFzZS5iYXNlLmlkLCBjcnRjLT5iYXNlLm5hbWUp
Owo+PiArCQkJCXJldCA9IGNsZWFyX2ludGVsX2NydGNfc3RhdGUobmV3X2NydGNfc3RhdGUpOwo+
PiArCQkJfQo+IFRoaXMgdG9vIGZlZWxzIGxpa2UgaXQgY291bGQgYmUgZG9uZSBiZWZvcmUgd2Un
dmUgY29tcHV0ZSBhbnl0aGluZy4KPgo+IFNvbWV0aGluZyBsaWtlIHRoaXMgaXMgd2hhdCBJIHdh
cyB0aGlua2luZyBlYXJsaWVyOgo+Cj4gZGV0YWNoX2pvaW5lcigpIHsKPiAJbWFzdGVyLmJpZ2pv
aW5lciA9IHt9Owo+IAlzbGF2ZS5iaWdqb2luZXIgPSB7fTsKPiB9Cj4KPiBzZXR1cF9zdGF0ZV90
aGluZygpIHsKPiAJaWYgKG5ld19jcnRjX3N0YXRlLT51YXBpLmVuYWJsZSkgewo+IAkJaWYgKGlz
X3NsYXZlKSB7Cj4gCQkJYXNzZXJ0KG5lZWRzX21vZGVzZXQobmV3X2NydGNfc3RhdGUpKTsKPiAJ
CQltYXN0ZXIgPSBnZXRfbGlua2VkKCk7Cj4gCQkJbWFzdGVyLm1vZGVzZXQgPSB0cnVlOwo+IAkJ
CWRldGFjaF9qb2luZXIoKTsKPiAJCX0gZWxzZSBpZiAoaXNfbWFzdGVyKSB7Cj4gCQkJc2xhdmUg
PSBnZXRfbGlua2VkKCk7Cj4gCQkJaWYgKG5lZWRzX21vZGVzZXQobmV3X2NydGNfc3RhdGUpKSB7
Cj4gCQkJCXNsYXZlLm1vZGVzZXQgPSB0cnVlOwo+IAkJCQlkZXRhY2hfam9pbmVyKCk7Cj4gCQkJ
fQo+IAkJfQo+IAkJY29weV91YXBpX3RvX2h3KG5ld19jcnRjX3N0YXRlKTsKPiAJfSBlbHNlIHsK
PiAJCWlmIChpc19tYXN0ZXIpIHsKPiAJCQlhc3NlcnQobmVlZHNfbW9kZXNldChuZXdfY3J0Y19z
dGF0ZSkpOwo+IAkJCXNsYXZlID0gZ2V0X2xpbmtlZCgpOwo+IAkJCXNsYXZlLm1vZGVzZXQgPSB0
cnVlOwo+IAkJCWRldGFjaF9qb2luZXIoKTsKPiAJCX0KPiAJCWlmICghaXNfc2xhdmUgJiYgbmVl
ZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkpCj4gCQkJY29weV91YXBpX3RvX2h3KG5ld19jcnRj
X3N0YXRlKTsKPiAJfQo+IH0KPgo+ICAgZHJtX2F0b21pY19oZWxwZXJfY2hlY2tfbW9kZXNldCgp
Owo+ICsgc2V0dXBfc3RhdGVfdGhpbmcoKTsKWWVhaCwgY2FuIGRvIGl0IGltbWVkaWF0ZWx5IGFm
dGVyIGluIGludGVsX2NydGNfY2hlY2tfZmFzdHNldCgpLCB3aWxsIGZpeCB0aGUgc2VyaWVzLiA6
KQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1n
ZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

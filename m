Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E9A17281FAE
	for <lists+intel-gfx@lfdr.de>; Sat,  3 Oct 2020 02:19:02 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8C2B66E9FE;
	Sat,  3 Oct 2020 00:18:56 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C0A8F6EA00
 for <intel-gfx@lists.freedesktop.org>; Sat,  3 Oct 2020 00:18:55 +0000 (UTC)
IronPort-SDR: y0y2/czyt2K9VqBeXCdHzAw2iLCb9Q7bv/xZn6OYGpmXraZU1O95tO8UBa87Ye+e5ATdP3WZUg
 TuAL3D6AMG+w==
X-IronPort-AV: E=McAfee;i="6000,8403,9762"; a="143102225"
X-IronPort-AV: E=Sophos;i="5.77,329,1596524400"; d="scan'208";a="143102225"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by fmsmga107.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 02 Oct 2020 17:18:55 -0700
IronPort-SDR: 1oLzkkyTjr9qDjdx1jHq5V1EbNgs7RaWIFDRCve6tpmXaPB4Wk+ObUbSMecwslfs2PYQ+2xBRL
 639xaSOFOvtA==
X-IronPort-AV: E=Sophos;i="5.77,329,1596524400"; d="scan'208";a="511239652"
Received: from ideak-desk.fi.intel.com ([10.237.68.141])
 by orsmga005-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 02 Oct 2020 17:18:54 -0700
From: Imre Deak <imre.deak@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Sat,  3 Oct 2020 03:18:46 +0300
Message-Id: <20201003001846.1271151-6-imre.deak@intel.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20201003001846.1271151-1-imre.deak@intel.com>
References: <20201003001846.1271151-1-imre.deak@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 5/5] drm/i915/tgl: Fix Combo PHY DPLL fractional
 divider for 38.4MHz ref clock
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXBwbHkgRGlzcGxheSBXQSAjMjIwMTA0OTI0MzIgZm9yIGNvbWJvIFBIWSBQTExzIHRvby4gVGhp
cyBzaG91bGQgZml4IGEKcHJvYmxlbSB3aGVyZSB0aGUgUExMIG91dHB1dCBmcmVxdWVuY3kgaXMg
c2xpZ2h0bHkgb2ZmIHdpdGggdGhlIGN1cnJlbnQKUExMIGZyYWN0aW9uYWwgZGl2aWRlciB2YWx1
ZS4KCkkgaGF2ZW4ndCBzZWVuIGFuIGFjdHVhbCBjYXNlIHdoZXJlIHRoaXMgY2F1c2VzIGEgcHJv
YmxlbSwgYnV0IGxldCdzCmZvbGxvdyB0aGUgc3BlYy4gSXQncyBhbHNvIG5lZWRlZCBvbiBzb21l
IEVITCBwbGF0Zm9ybXMsIGJ1dCBmb3IgdGhhdCB3ZQphbHNvIG5lZWQgYSB3YXkgdG8gZGlzdGlu
Z3Vpc2ggdGhlIGFmZmVjdGVkIEVITCBTS1VzLCBzbyBJIGxlYXZlIHRoYXQKZm9yIGEgZm9sbG93
LXVwLgoKdjI6Ci0gQXBwbHkgdGhlIFdBIGF0IG9uZSBwbGFjZSB3aGVuIGNhbGN1bGF0aW5nIHRo
ZSBQTEwgZGl2aWRlcnMgZnJvbSB0aGUKICBmcmVxdWVuY3kgYW5kIHRoZSBmcmVxdWVuY3kgZnJv
bSB0aGUgZGl2aWRlcnMgZm9yIGFsbCB0aGUgY29tYm8gUExMCiAgdXNlIGNhc2VzIChEUCwgSERN
SSwgVEJUKS4gKFZpbGxlKQoKQ2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51
eC5pbnRlbC5jb20+ClJldmlld2VkLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFA
bGludXguaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBJbXJlIERlYWsgPGltcmUuZGVha0BpbnRl
bC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcGxsX21nci5j
IHwgNDEgKysrKysrKysrKystLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDI1IGluc2VydGlvbnMo
KyksIDE2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZHBsbF9tZ3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZHBsbF9tZ3IuYwppbmRleCA2MWNiNTU4YzYwZDEuLjQyMTE3NmRlNWNmYiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcGxsX21nci5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBsbF9tZ3IuYwpAQCAtMjYzNiwxMSAr
MjYzNiwyMiBAQCBzdGF0aWMgYm9vbCBjbmxfZGRpX2hkbWlfcGxsX2RpdmlkZXJzKHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogCXJldHVybiB0cnVlOwogfQogCisvKgorICog
RGlzcGxheSBXQSAjMjIwMTA0OTI0MzI6IHRnbAorICogUHJvZ3JhbSBoYWxmIG9mIHRoZSBub21p
bmFsIERDTyBkaXZpZGVyIGZyYWN0aW9uIHZhbHVlLgorICovCitzdGF0aWMgYm9vbAordGdsX2Nv
bWJvX3BsbF9kaXZfZnJhY193YV9uZWVkZWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUp
Cit7CisJcmV0dXJuIElTX1RJR0VSTEFLRShpOTE1KSAmJiBpOTE1LT5kcGxsLnJlZl9jbGtzLm5z
c2MgPT0gMzg0MDA7Cit9CisKIHN0YXRpYyBpbnQgX19jbmxfZGRpX3dycGxsX2dldF9mcmVxKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJCQkgICAgY29uc3Qgc3RydWN0IGlu
dGVsX3NoYXJlZF9kcGxsICpwbGwsCiAJCQkJICAgIGludCByZWZfY2xvY2spCiB7CiAJY29uc3Qg
c3RydWN0IGludGVsX2RwbGxfaHdfc3RhdGUgKnBsbF9zdGF0ZSA9ICZwbGwtPnN0YXRlLmh3X3N0
YXRlOworCXUzMiBkY29fZnJhY3Rpb247CiAJdTMyIHAwLCBwMSwgcDIsIGRjb19mcmVxOwogCiAJ
cDAgPSBwbGxfc3RhdGUtPmNmZ2NyMSAmIERQTExfQ0ZHQ1IxX1BESVZfTUFTSzsKQEAgLTI2ODMs
OCArMjY5NCwxMyBAQCBzdGF0aWMgaW50IF9fY25sX2RkaV93cnBsbF9nZXRfZnJlcShzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJZGNvX2ZyZXEgPSAocGxsX3N0YXRlLT5jZmdj
cjAgJiBEUExMX0NGR0NSMF9EQ09fSU5URUdFUl9NQVNLKSAqCiAJCSAgIHJlZl9jbG9jazsKIAot
CWRjb19mcmVxICs9ICgoKHBsbF9zdGF0ZS0+Y2ZnY3IwICYgRFBMTF9DRkdDUjBfRENPX0ZSQUNU
SU9OX01BU0spID4+Ci0JCSAgICAgIERQTExfQ0ZHQ1IwX0RDT19GUkFDVElPTl9TSElGVCkgKiBy
ZWZfY2xvY2spIC8gMHg4MDAwOworCWRjb19mcmFjdGlvbiA9IChwbGxfc3RhdGUtPmNmZ2NyMCAm
IERQTExfQ0ZHQ1IwX0RDT19GUkFDVElPTl9NQVNLKSA+PgorCQkgICAgICAgRFBMTF9DRkdDUjBf
RENPX0ZSQUNUSU9OX1NISUZUOworCisJaWYgKHRnbF9jb21ib19wbGxfZGl2X2ZyYWNfd2FfbmVl
ZGVkKGRldl9wcml2KSkKKwkJZGNvX2ZyYWN0aW9uICo9IDI7CisKKwlkY29fZnJlcSArPSAoZGNv
X2ZyYWN0aW9uICogcmVmX2Nsb2NrKSAvIDB4ODAwMDsKIAogCWlmIChkcm1fV0FSTl9PTigmZGV2
X3ByaXYtPmRybSwgcDAgPT0gMCB8fCBwMSA9PSAwIHx8IHAyID09IDApKQogCQlyZXR1cm4gMDsK
QEAgLTI5NjIsMTYgKzI5NzgsNiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHNrbF93cnBsbF9wYXJh
bXMgdGdsX3RidF9wbGxfMjRNSHpfdmFsdWVzID0gewogCS8qIHRoZSBmb2xsb3dpbmcgcGFyYW1z
IGFyZSB1bnVzZWQgKi8KIH07CiAKLS8qCi0gKiBEaXNwbGF5IFdBICMyMjAxMDQ5MjQzMjogdGds
Ci0gKiBEaXZpZGUgdGhlIG5vbWluYWwgLmRjb19mcmFjdGlvbiB2YWx1ZSBieSAyLgotICovCi1z
dGF0aWMgY29uc3Qgc3RydWN0IHNrbF93cnBsbF9wYXJhbXMgdGdsX3RidF9wbGxfMzhfNE1Iel92
YWx1ZXMgPSB7Ci0JLmRjb19pbnRlZ2VyID0gMHg1NCwgLmRjb19mcmFjdGlvbiA9IDB4MTgwMCwK
LQkvKiB0aGUgZm9sbG93aW5nIHBhcmFtcyBhcmUgdW51c2VkICovCi0JLnBkaXYgPSAwLCAua2Rp
diA9IDAsIC5xZGl2X21vZGUgPSAwLCAucWRpdl9yYXRpbyA9IDAsCi19OwotCiBzdGF0aWMgYm9v
bCBpY2xfY2FsY19kcF9jb21ib19wbGwoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3Rh
dGUsCiAJCQkJICBzdHJ1Y3Qgc2tsX3dycGxsX3BhcmFtcyAqcGxsX3BhcmFtcykKIHsKQEAgLTMw
MDUsMTQgKzMwMTEsMTIgQEAgc3RhdGljIGJvb2wgaWNsX2NhbGNfdGJ0X3BsbChzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJCU1JU1NJTkdfQ0FTRShkZXZfcHJpdi0+ZHBs
bC5yZWZfY2xrcy5uc3NjKTsKIAkJCWZhbGx0aHJvdWdoOwogCQljYXNlIDE5MjAwOgorCQljYXNl
IDM4NDAwOgogCQkJKnBsbF9wYXJhbXMgPSB0Z2xfdGJ0X3BsbF8xOV8yTUh6X3ZhbHVlczsKIAkJ
CWJyZWFrOwogCQljYXNlIDI0MDAwOgogCQkJKnBsbF9wYXJhbXMgPSB0Z2xfdGJ0X3BsbF8yNE1I
el92YWx1ZXM7CiAJCQlicmVhazsKLQkJY2FzZSAzODQwMDoKLQkJCSpwbGxfcGFyYW1zID0gdGds
X3RidF9wbGxfMzhfNE1Iel92YWx1ZXM7Ci0JCQlicmVhazsKIAkJfQogCX0gZWxzZSB7CiAJCXN3
aXRjaCAoZGV2X3ByaXYtPmRwbGwucmVmX2Nsa3MubnNzYykgewpAQCAtMzA3OSw5ICszMDgzLDE0
IEBAIHN0YXRpYyB2b2lkIGljbF9jYWxjX2RwbGxfc3RhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUsCiAJCQkJY29uc3Qgc3RydWN0IHNrbF93cnBsbF9wYXJhbXMgKnBsbF9wYXJhbXMs
CiAJCQkJc3RydWN0IGludGVsX2RwbGxfaHdfc3RhdGUgKnBsbF9zdGF0ZSkKIHsKKwl1MzIgZGNv
X2ZyYWN0aW9uID0gcGxsX3BhcmFtcy0+ZGNvX2ZyYWN0aW9uOworCiAJbWVtc2V0KHBsbF9zdGF0
ZSwgMCwgc2l6ZW9mKCpwbGxfc3RhdGUpKTsKIAotCXBsbF9zdGF0ZS0+Y2ZnY3IwID0gRFBMTF9D
RkdDUjBfRENPX0ZSQUNUSU9OKHBsbF9wYXJhbXMtPmRjb19mcmFjdGlvbikgfAorCWlmICh0Z2xf
Y29tYm9fcGxsX2Rpdl9mcmFjX3dhX25lZWRlZChpOTE1KSkKKwkJZGNvX2ZyYWN0aW9uID0gRElW
X1JPVU5EX0NMT1NFU1QoZGNvX2ZyYWN0aW9uLCAyKTsKKworCXBsbF9zdGF0ZS0+Y2ZnY3IwID0g
RFBMTF9DRkdDUjBfRENPX0ZSQUNUSU9OKGRjb19mcmFjdGlvbikgfAogCQkJICAgIHBsbF9wYXJh
bXMtPmRjb19pbnRlZ2VyOwogCiAJcGxsX3N0YXRlLT5jZmdjcjEgPSBEUExMX0NGR0NSMV9RRElW
X1JBVElPKHBsbF9wYXJhbXMtPnFkaXZfcmF0aW8pIHwKLS0gCjIuMjUuMQoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlz
dApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E21B3E9A2
	for <lists+intel-gfx@lfdr.de>; Mon, 29 Apr 2019 20:00:49 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 454E289312;
	Mon, 29 Apr 2019 18:00:47 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BDD5E89312
 for <intel-gfx@lists.freedesktop.org>; Mon, 29 Apr 2019 18:00:45 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16399167-1500050 
 for multiple; Mon, 29 Apr 2019 19:00:25 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 29 Apr 2019 19:00:19 +0100
Message-Id: <20190429180020.27274-4-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190429180020.27274-1-chris@chris-wilson.co.uk>
References: <20190429180020.27274-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 4/5] drm/i915: Disable semaphore busywaits on
 saturated systems
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Dmitry Ermilov <dmitry.ermilov@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXNraW5nIHRoZSBHUFUgdG8gYnVzeXdhaXQgb24gYSBtZW1vcnkgYWRkcmVzcywgcGVyaGFwcyBu
b3QgdW5leHBlY3RlZGx5CmluIGhpbmRzaWdodCBmb3IgYSBzaGFyZWQgc3lzdGVtLCBsZWFkcyB0
byBidXMgY29udGVudGlvbiB0aGF0IGFmZmVjdHMKQ1BVIHByb2dyYW1zIHRyeWluZyB0byBjb25j
dXJyZW50bHkgYWNjZXNzIG1lbW9yeS4gVGhpcyBjYW4gbWFuaWZlc3QgYXMKYSBkcm9wIGluIHRy
YW5zY29kZSB0aHJvdWdocHV0IG9uIGhpZ2hseSBvdmVyLXNhdHVyYXRlZCB3b3JrbG9hZHMuCgpU
aGUgb25seSBjbHVlIG9mZmVyZWQgYnkgcGVyZiwgaXMgdGhhdCB0aGUgYnVzLWN5Y2xlcyAocGVy
ZiBzdGF0IC1lCmJ1cy1jeWNsZXMpIGp1bXBlZCBieSA1MCUgd2hlbiBlbmFibGluZyBzZW1hcGhv
cmVzLiBUaGlzIGNvcnJlc3BvbmRzCndpdGggZXh0cmEgQ1BVIGFjdGl2ZSBjeWNsZXMgYmVpbmcg
YXR0cmlidXRlZCB0byBpbnRlbF9pZGxlJ3MgbXdhaXQuCgpUaGlzIHBhdGNoIGludHJvZHVjZXMg
YSBoZXVyaXN0aWMgdG8gdHJ5IGFuZCBkZXRlY3Qgd2hlbiBtb3JlIHRoYW4gb25lCmNsaWVudCBp
cyBzdWJtaXR0aW5nIHRvIHRoZSBHUFUgcHVzaGluZyBpdCBpbnRvIGFuIG92ZXJzYXR1cmF0ZWQg
c3RhdGUuCkFzIHdlIGFscmVhZHkga2VlcCB0cmFjayBvZiB3aGVuIHRoZSBzZW1hcGhvcmVzIGFy
ZSBzaWduYWxlZCwgd2UgY2FuCmluc3BlY3QgdGhlaXIgc3RhdGUgb24gc3VibWl0dGluZyB0aGUg
YnVzeXdhaXQgYmF0Y2ggYW5kIGlmIHdlIHBsYW5uZWQKdG8gdXNlIGEgc2VtYXBob3JlIGJ1dCB3
ZXJlIHRvbyBsYXRlLCBjb25jbHVkZSB0aGF0IHRoZSBHUFUgaXMKb3ZlcmxvYWRlZCBhbmQgbm90
IHRyeSB0byB1c2Ugc2VtYXBob3JlcyBpbiBmdXR1cmUgcmVxdWVzdHMuIEluCnByYWN0aWNlLCB0
aGlzIG1lYW5zIHdlIG9wdGltaXN0aWNhbGx5IHRyeSB0byB1c2Ugc2VtYXBob3JlcyBmb3IgdGhl
CmZpcnN0IGZyYW1lIG9mIGEgdHJhbnNjb2RlIGpvYiBzcGxpdCBvdmVyIG11bHRpcGxlIGVuZ2lu
ZXMsIGFuZCBmYWlsIGlzCnRoZXJlIGFyZSBtdWx0aXBsZSBjbGllbnRzIGFjdGl2ZSBhbmQgY29u
dGludWUgbm90IHRvIHVzZSBzZW1hcGhvcmVzIGZvcgp0aGUgc3Vic2VxdWVudCBmcmFtZXMgaW4g
dGhlIHNlcXVlbmNlLiBQZXJpb2RpY2FsbHksIHRyeWluZyB0bwpvcHRpbWlzdGljYWxseSBzd2l0
Y2ggc2VtYXBob3JlcyBiYWNrIG9uIHdoZW5ldmVyIHRoZSBjbGllbnQgd2FpdHMgdG8KY2F0Y2gg
dXAgd2l0aCB0aGUgdHJhbnNjb2RlIHJlc3VsdHMuCgpXaXRoIDEgY2xpZW50LCBvbiBCcm94dG9u
IEozNDU1LCB3aXRoIHRoZSByZWxhdGl2ZSBmcHMgbm9ybWFsaXplZCBieSAlY3B1OgoKeCBubyBz
ZW1hcGhvcmVzCisgZHJtLXRpcAoqIHRocm90dGxlCistLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rCnwgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAg
ICAgICAgICB8CnwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgKisgICAgICAgICAgICAgICAgICB8CnwgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgKiorICAgICAgICAgICAgICAgICB8CnwgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiorICB4ICAgICAgICAg
ICAgICB8CnwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggICAgICAgICAgICAgICAq
ICArKiorICB4ICAgICAgICAgICAgICB8CnwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHggIHggICAgICAgKiAgICAqICArKioqeCB4eCAgICAgICAgICAgICB8CnwgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHggIHggICAgICAgKiAgICAqICorKioqeCAqeCAgICAgICAgICAg
ICB8CnwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggIHgqICAgKyAgKiAgICAqICoq
KioqeCAqeCB4ICAgICAgICAgICB8CnwgICAgICAgICAgICAgICAgICAgICAgICAgKyAgICB4IHh4
K3gqICAgKyAqKiogICAqICoqKioqKioqKiB4ICAgKiAgICAgICB8CnwgICAgICAgICAgICAgICAg
ICAgICAgICAgKyAgICB4IHh4K3gqICAgKiAqKiogKyoqICoqKioqKioqKiB4eCAgKiAgICAgICB8
CnwgICAgKiAgICsgICAgICAgICArKysrKiAgKyAgICB4KngqKioqKyorKiAqKiorKioqKioqKioq
KioqKit4KiAgKiAgICAgICB8CnwqKyArKiogKisgKyArKiArICorKyoqKioqKiAqeHh4KioqKioq
KioqKngqKiorKioqKioqKioqKioqKioqKiorKisrICAgICp8CnwgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHxfX19fX19fX19fQV9fX19fTV9fX19ffCAgICAgICAgICAgICB8Cnwg
ICAgICAgICAgICAgICAgICAgICAgICAgICB8X19fX19fX19fX19fX19fQV9fX19NX19fX19fX19f
fCAgICAgICAgICAgICB8CnwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8X19fX19f
X19fX19fQV9fX01fX19fX19fX3wgICAgICAgICAgICB8CistLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rCiAgICBO
ICAgICAgICAgICBNaW4gICAgICAgICAgIE1heCAgICAgICAgTWVkaWFuICAgICAgICAgICBBdmcg
ICAgICAgIFN0ZGRldgp4IDEyMCAgICAgICAyLjYwNDc1ICAgICAgIDMuNTA5NDEgICAgICAgMy4z
MTEyMyAgICAgMy4yMTQzOTUzICAgIDAuMjExMTczOTkKKyAxMjAgICAgICAgIDIuMzgyNiAgICAg
ICAzLjU3MDc3ICAgICAgIDMuMjUxMDEgICAgIDMuMTQxNDE2MSAgICAwLjI4MTQ2NDA3CkRpZmZl
cmVuY2UgYXQgOTUuMCUgY29uZmlkZW5jZQoJLTAuMDcyOTc5MiArLy0gMC4wNjI5NTg1CgktMi4y
NzAzOSUgKy8tIDEuOTU4NjQlCgkoU3R1ZGVudCdzIHQsIHBvb2xlZCBzID0gMC4yNDg4MTQpCiog
MTIwICAgICAgIDIuMzU1MzYgICAgICAgMy42NjcxMyAgICAgICAgMy4yODQ5ICAgICAzLjIwNTk5
MTcgICAgMC4yNDYxODU2NQpObyBkaWZmZXJlbmNlIHByb3ZlbiBhdCA5NS4wJSBjb25maWRlbmNl
CgpXaXRoIDEwIGNsaWVudHMgb3Zlci1zYXR1cmF0aW5nIHRoZSBwaXBlbGluZToKCnggbm8gc2Vt
YXBob3JlcworIGRybS10aXAKKiBwYXRjaAorLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKwp8ICAgICAgICAgICAg
ICAgICAgICAgKysgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiogICAg
ICAgfAp8ICAgICAgICAgICAgICAgICAgICAgKysgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgKiogICAgICAgfAp8ICAgICAgICAgICAgICAgICAgICAgKysgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiogICAgICAgfAp8ICAgICAgICAgICAgICAg
ICAgICAgKysgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiogICAgICAg
fAp8ICAgICAgICAgICAgICAgICAgICAgKysgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB4eCAqKiogICAgICAgfAp8ICAgICAgICAgICAgICAgICAgICAgKysgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB4eCAqKiogICAgICAgfAp8ICAgICAgICAgICAgICAgICAg
ICAgKysgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4eHgqKiogICAgICAgfAp8
ICAgICAgICAgICAgICAgICAgICAgKysgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB4eHgqKiogICAgICAgfAp8ICAgICAgICAgICAgICAgICAgICArKysgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB4eHgqKiogICAgICAgfAp8ICAgICAgICAgICAgICAgICAgICAr
KysgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4eCoqKiogICAgICAgfAp8ICAg
ICAgICAgICAgICAgICAgICArKysgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4
eCoqKiogICAgICAgfAp8ICAgICAgICAgICAgICAgICAgICArKysgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB4eCoqKiogICAgICAgfAp8ICAgICAgICAgICAgICAgICAgICArKysg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4eCoqKiogICAgICAgfAp8ICAgICAg
ICAgICAgICAgICAgICArKysrICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4eCoq
KiogICAgICAgfAp8ICAgICAgICAgICAgICAgICAgICsrKysrICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB4eCoqKiogICAgICAgfAp8ICAgICAgICAgICAgICAgICAgICsrKysrICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCB4KioqKioqICAgICAgfAp8ICAgICAgICAg
ICAgICAgICAgKysrKysrICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeHh4KioqKioq
KiAgICAgfAp8ICAgICAgICAgICAgICAgICAgKysrKysrICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgeHh4KioqKioqKiAgICAgfAp8ICAgICAgICAgICAgICAgICAgKysrKysrICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgeHh4KioqKioqKiAgICAgfAp8ICAgICAgICAgICAg
ICAgICAgKysrKysrICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeHgqKioqKioqKiAg
ICAgfAp8ICAgICAgICAgICAgICAgICAgKysrKysrICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHh4eHgqKioqKioqKiAgICAgfAp8ICAgICAgICAgICAgICAgICAgKysrKysrICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHh4eHgqKioqKioqKiAgICAgfAp8ICAgICAgICAgICAgICAg
ICsrKysrKysrICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4eHh4eCoqKioqKioqKiAgICAg
fAp8KyArICArICAgICAgICArICsrKysrKysrICAgICAgICAgICAgICAgICAgICAgICAgICAgeHh4
Knh4KioqKioqKioqKngqICAqfAp8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgfF9fQV9ffCAgICAgICAgfAp8ICAgICAgICAgICAgICAgICB8
X19BTV9ffCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAp8
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgfF9fQV98ICAgICAgfAorLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKwogICAgTiAgICAgICAgICAgTWluICAg
ICAgICAgICBNYXggICAgICAgIE1lZGlhbiAgICAgICAgICAgQXZnICAgICAgICBTdGRkZXYKeCAx
MjAgICAgICAgMi40Nzg1NSAgICAgICAgMi44OTcyICAgICAgIDIuNzIzNzYgICAgIDIuNzE5MzQw
MiAgIDAuMDc0NjA0OTMzCisgMTIwICAgICAgIDEuMTczNjcgICAgICAgMS43NzQ1OSAgICAgICAx
LjcxOTc3ICAgICAxLjY5NjY3ODIgICAwLjA4NTg1MDY5NwpEaWZmZXJlbmNlIGF0IDk1LjAlIGNv
bmZpZGVuY2UKCS0xLjAyMjY2ICsvLSAwLjAyMDM1MDIKCS0zNy42MDclICsvLSAwLjc0ODM1MiUK
CShTdHVkZW50J3MgdCwgcG9vbGVkIHMgPSAwLjA4MDQyNDYpCiogMTIwICAgICAgIDIuNTc4Njgg
ICAgICAgMy4wMDgyMSAgICAgICAyLjgwMTQyICAgICAyLjc5MjM4NzggICAwLjA1ODY0NjQ3NwpE
aWZmZXJlbmNlIGF0IDk1LjAlIGNvbmZpZGVuY2UKCTAuMDczMDQ3NiArLy0gMC4wMTY5NzkxCgky
LjY4NjIyJSArLy0gMC42MjQzODMlCgkoU3R1ZGVudCdzIHQsIHBvb2xlZCBzID0gMC4wNjcxMDE4
KQoKSW5kaWNhdGluZyB0aGF0IHdlJ3ZlIHJlY292ZXJlZCB0aGUgcmVncmVzc2lvbiBmcm9tIGVu
YWJsaW5nIHNlbWFwaG9yZXMKb24gdGhpcyBzYXR1cmF0ZWQgc2V0dXAsIHdpdGggYSBoaW50IHRv
d2FyZHMgYW4gb3ZlcmFsbCBpbXByb3ZlbWVudC4KClZlcnkgc2ltaWxhciwgYnV0IG9mIHNtYWxs
ZXIgbWFnbml0dWRlLCByZXN1bHRzIGFyZSBvYnNlcnZlZCBvbiBib3RoClNreWxha2UoZ3QyKSBh
bmQgS2FieWxha2UoZ3Q0KS4gVGhpcyBtYXkgYmUgZHVlIHRvIHRoZSByZWR1Y2VkIGltcGFjdCBv
ZgpidXMtY3ljbGVzLCB3aGVyZSB3ZSBzZWUgYSA1MCUgaGl0IG9uIEJyb3h0b24sIGl0IGlzIG9u
bHkgMTAlIG9uIHRoZSBiaWcKY29yZSwgaW4gdGhpcyBwYXJ0aWN1bGFyIHRlc3QuCgpPbmUgb2Jz
ZXJ2YXRpb24gdG8gbWFrZSBoZXJlIGlzIHRoYXQgZm9yIGEgZ3JlZWR5IGNsaWVudCB0cnlpbmcg
dG8KbWF4aW1pc2UgaXRzIG93biB0aHJvdWdocHV0LCB1c2luZyBzZW1hcGhvcmVzIGlzIHRoZSBy
aWdodCBjaG9pY2UuIEl0IGlzCm9ubHkgdGhlIGhvbGlzdGljIHN5c3RlbS13aWRlIHZpZXcgdGhh
dCBzZW1hcGhvcmVzIG9mIG9uZSBjbGllbnQKaW1wYWN0cyBhbm90aGVyIGFuZCByZWR1Y2VzIHRo
ZSBvdmVyYWxsIHRocm91Z2hwdXQgd2hlcmUgd2Ugd291bGQgY2hvb3NlCnRvIGRpc2FibGUgc2Vt
YXBob3Jlcy4KClRoZSBtb3N0IG5vdGljZWFibGUgbmVnYWN0aXZlIGltcGFjdCB0aGlzIGhhcyBp
cyBvbiB0aGUgbm8tb3AKbWljcm9iZW5jaG1hcmtzLCB3aGljaCBhcmUgYWxzbyB2ZXJ5IG5vdGFi
bGUgZm9yIGhhdmluZyBubyBjcHUgYnVzIGxvYWQuCkluIHBhcnRpY3VsYXIsIHRoaXMgaW5jcmVh
c2VzIHRoZSBydW50aW1lIGFuZCBlbmVyZ3kgY29uc3VtcHRpb24gb2YKZ2VtX2V4ZWNfd2hpc3Bl
ci4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVr
PgpDYzogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KQ2M6IERtaXRy
eSBSb2dvemhraW4gPGRtaXRyeS52LnJvZ296aGtpbkBpbnRlbC5jb20+CkNjOiBEbWl0cnkgRXJt
aWxvdiA8ZG1pdHJ5LmVybWlsb3ZAaW50ZWwuY29tPgpDYzogSm9vbmFzIExhaHRpbmVuIDxqb29u
YXMubGFodGluZW5AbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2NvbnRleHQuYyAgICAgICB8ICAyICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9jb250ZXh0X3R5cGVzLmggfCAgMyArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9y
ZXF1ZXN0LmMgICAgICAgICAgIHwgMjggKysrKysrKysrKysrKysrKysrLQogMyBmaWxlcyBjaGFu
Z2VkLCAzMiBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfY29udGV4dC5jCmluZGV4IDFmMTc2MWZjNjU5Ny4uNWIzMWUxZTA1ZGRkIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jCkBAIC0xMTYsNiArMTE2LDcgQEAg
aW50ZWxfY29udGV4dF9pbml0KHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKIAljZS0+ZW5naW5l
ID0gZW5naW5lOwogCWNlLT5vcHMgPSBlbmdpbmUtPmNvcHM7CiAJY2UtPnNzZXUgPSBlbmdpbmUt
PnNzZXU7CisJY2UtPnNhdHVyYXRlZCA9IDA7CiAKIAlJTklUX0xJU1RfSEVBRCgmY2UtPnNpZ25h
bF9saW5rKTsKIAlJTklUX0xJU1RfSEVBRCgmY2UtPnNpZ25hbHMpOwpAQCAtMTU4LDYgKzE1OSw3
IEBAIHZvaWQgaW50ZWxfY29udGV4dF9lbnRlcl9lbmdpbmUoc3RydWN0IGludGVsX2NvbnRleHQg
KmNlKQogCiB2b2lkIGludGVsX2NvbnRleHRfZXhpdF9lbmdpbmUoc3RydWN0IGludGVsX2NvbnRl
eHQgKmNlKQogeworCWNlLT5zYXR1cmF0ZWQgPSAwOwogCWludGVsX2VuZ2luZV9wbV9wdXQoY2Ut
PmVuZ2luZSk7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2NvbnRleHRfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHRf
dHlwZXMuaAppbmRleCBkNWE3ZGJkMGRhZWUuLjk2M2EzMTI0MzBlNiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBlcy5oCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaApAQCAtMTMsNiArMTMsNyBAQAog
I2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+CiAKICNpbmNsdWRlICJpOTE1X2FjdGl2ZV90eXBlcy5o
IgorI2luY2x1ZGUgImludGVsX2VuZ2luZV90eXBlcy5oIgogI2luY2x1ZGUgImludGVsX3NzZXUu
aCIKIAogc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQ7CkBAIC01Miw2ICs1Myw4IEBAIHN0cnVjdCBp
bnRlbF9jb250ZXh0IHsKIAlhdG9taWNfdCBwaW5fY291bnQ7CiAJc3RydWN0IG11dGV4IHBpbl9t
dXRleDsgLyogZ3VhcmRzIHBpbm5pbmcgYW5kIGFzc29jaWF0ZWQgb24tZ3B1aW5nICovCiAKKwlp
bnRlbF9lbmdpbmVfbWFza190IHNhdHVyYXRlZDsgLyogc3VibWl0dGluZyBzZW1hcGhvcmVzIHRv
byBsYXRlPyAqLworCiAJLyoqCiAJICogYWN0aXZlX3RyYWNrZXI6IEFjdGl2ZSB0cmFja2VyIGZv
ciB0aGUgZXh0ZXJuYWwgcnEgYWN0aXZpdHkKIAkgKiBvbiB0aGlzIGludGVsX2NvbnRleHQgb2Jq
ZWN0LgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYwppbmRleCA4Y2IzZWQ1NTMxZTMuLjJk
NDI5OTY3ZjQwMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMKQEAgLTQxMCw2ICs0
MTAsMjYgQEAgdm9pZCBfX2k5MTVfcmVxdWVzdF9zdWJtaXQoc3RydWN0IGk5MTVfcmVxdWVzdCAq
cmVxdWVzdCkKIAlpZiAoaTkxNV9nZW1fY29udGV4dF9pc19iYW5uZWQocmVxdWVzdC0+Z2VtX2Nv
bnRleHQpKQogCQlpOTE1X3JlcXVlc3Rfc2tpcChyZXF1ZXN0LCAtRUlPKTsKIAorCS8qCisJICog
QXJlIHdlIHVzaW5nIHNlbWFwaG9yZXMgd2hlbiB0aGUgZ3B1IGlzIGFscmVhZHkgc2F0dXJhdGVk
PworCSAqCisJICogVXNpbmcgc2VtYXBob3JlcyBpbmN1cnMgYSBjb3N0IGluIGhhdmluZyB0aGUg
R1BVIHBvbGwgYQorCSAqIG1lbW9yeSBsb2NhdGlvbiwgYnVzeXdhaXRpbmcgZm9yIGl0IHRvIGNo
YW5nZS4gVGhlIGNvbnRpbnVhbAorCSAqIG1lbW9yeSByZWFkcyBjYW4gaGF2ZSBhIG5vdGljZWFi
bGUgaW1wYWN0IG9uIHRoZSByZXN0IG9mIHRoZQorCSAqIHN5c3RlbSB3aXRoIHRoZSBleHRyYSBi
dXMgdHJhZmZpYywgc3RhbGxpbmcgdGhlIGNwdSBhcyBpdCB0b28KKwkgKiB0cmllcyB0byBhY2Nl
c3MgbWVtb3J5IGFjcm9zcyB0aGUgYnVzIChwZXJmIHN0YXQgLWUgYnVzLWN5Y2xlcykuCisJICoK
KwkgKiBJZiB3ZSBpbnN0YWxsZWQgYSBzZW1hcGhvcmUgb24gdGhpcyByZXF1ZXN0IGFuZCB3ZSBv
bmx5IHN1Ym1pdAorCSAqIHRoZSByZXF1ZXN0IGFmdGVyIHRoZSBzaWduYWxlciBjb21wbGV0ZWQs
IHRoYXQgaW5kaWNhdGVzIHRoZQorCSAqIHN5c3RlbSBpcyBvdmVybG9hZGVkIGFuZCB1c2luZyBz
ZW1hcGhvcmVzIGF0IHRoaXMgdGltZSBvbmx5CisJICogaW5jcmVhc2VzIHRoZSBhbW91bnQgb2Yg
d29yayB3ZSBhcmUgZG9pbmcuIElmIHNvLCB3ZSBkaXNhYmxlCisJICogZnVydGhlciB1c2Ugb2Yg
c2VtYXBob3JlcyB1bnRpbCB3ZSBhcmUgaWRsZSBhZ2Fpbiwgd2hlbmNlIHdlCisJICogb3B0aW1p
c3RpY2FsbHkgdHJ5IGFnYWluLgorCSAqLworCWlmIChyZXF1ZXN0LT5zY2hlZC5zZW1hcGhvcmVz
ICYmCisJICAgIGk5MTVfc3dfZmVuY2Vfc2lnbmFsZWQoJnJlcXVlc3QtPnNlbWFwaG9yZSkpCisJ
CXJlcXVlc3QtPmh3X2NvbnRleHQtPnNhdHVyYXRlZCB8PSByZXF1ZXN0LT5zY2hlZC5zZW1hcGhv
cmVzOworCiAJLyogV2UgbWF5IGJlIHJlY3Vyc2luZyBmcm9tIHRoZSBzaWduYWwgY2FsbGJhY2sg
b2YgYW5vdGhlciBpOTE1IGZlbmNlICovCiAJc3Bpbl9sb2NrX25lc3RlZCgmcmVxdWVzdC0+bG9j
aywgU0lOR0xFX0RFUFRIX05FU1RJTkcpOwogCkBAIC03ODUsNiArODA1LDEyIEBAIGk5MTVfcmVx
dWVzdF9hd2FpdF9zdGFydChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgc3RydWN0IGk5MTVfcmVx
dWVzdCAqc2lnbmFsKQogCQkJCQkgICAgIEk5MTVfRkVOQ0VfR0ZQKTsKIH0KIAorc3RhdGljIGlu
dGVsX2VuZ2luZV9tYXNrX3QKK2FscmVhZHlfYnVzeXdhaXRpbmcoc3RydWN0IGk5MTVfcmVxdWVz
dCAqcnEpCit7CisJcmV0dXJuIHJxLT5zY2hlZC5zZW1hcGhvcmVzIHwgcnEtPmh3X2NvbnRleHQt
PnNhdHVyYXRlZDsKK30KKwogc3RhdGljIGludAogZW1pdF9zZW1hcGhvcmVfd2FpdChzdHJ1Y3Qg
aTkxNV9yZXF1ZXN0ICp0bywKIAkJICAgIHN0cnVjdCBpOTE1X3JlcXVlc3QgKmZyb20sCkBAIC03
OTgsNyArODI0LDcgQEAgZW1pdF9zZW1hcGhvcmVfd2FpdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICp0
bywKIAlHRU1fQlVHX09OKElOVEVMX0dFTih0by0+aTkxNSkgPCA4KTsKIAogCS8qIEp1c3QgZW1p
dCB0aGUgZmlyc3Qgc2VtYXBob3JlIHdlIHNlZSBhcyByZXF1ZXN0IHNwYWNlIGlzIGxpbWl0ZWQu
ICovCi0JaWYgKHRvLT5zY2hlZC5zZW1hcGhvcmVzICYgZnJvbS0+ZW5naW5lLT5tYXNrKQorCWlm
IChhbHJlYWR5X2J1c3l3YWl0aW5nKHRvKSAmIGZyb20tPmVuZ2luZS0+bWFzaykKIAkJcmV0dXJu
IGk5MTVfc3dfZmVuY2VfYXdhaXRfZG1hX2ZlbmNlKCZ0by0+c3VibWl0LAogCQkJCQkJICAgICAm
ZnJvbS0+ZmVuY2UsIDAsCiAJCQkJCQkgICAgIEk5MTVfRkVOQ0VfR0ZQKTsKLS0gCjIuMjAuMQoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4
IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7AB36E0B18
	for <lists+intel-gfx@lfdr.de>; Tue, 22 Oct 2019 19:56:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 83DA06E8C0;
	Tue, 22 Oct 2019 17:56:24 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 27E746E8BD
 for <intel-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 17:56:21 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 Oct 2019 10:56:20 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,217,1569308400"; d="scan'208";a="196515515"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by fmsmga008.fm.intel.com with SMTP; 22 Oct 2019 10:56:15 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Tue, 22 Oct 2019 20:56:15 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 22 Oct 2019 20:55:53 +0300
Message-Id: <20191022175554.18012-8-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191022175554.18012-1-ville.syrjala@linux.intel.com>
References: <20191022175554.18012-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 7/8] drm/i915: Pass connector state to pfit
 calculations
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClBh
c3MgdGhlIGVudGlyZSBjb25uZWN0b3Igc3RhdGUgdG8gaW50ZWxfe2dtY2gscGNofV9wYW5lbF9m
aXR0aW5nKCkuCkZvciBub3cgd2UganVzdCBuZWVkIHRvIGdldCBhdCAuc2NhbGluZ19tb2RlIGJ1
dCBpbiB0aGUgZnV0dXJlIHdlJ2xsCndhbnQgYWNjZXNzIHRvIHRoZSBtYXJnaW4gcHJvcGVydGll
cyBhcyB3ZWxsLgoKdjI6IERlYWwgd2l0aCBpbnRlbF9kcF95Y2JjcjQyMF9jb25maWcoKQoKU2ln
bmVkLW9mZi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNv
bT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ljbF9kc2kuYyAgICAgfCAgMiAr
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jICAgIHwgMTcgKysrKysr
KystLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5jICB8
IDEyICsrKysrKystLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9sdmRz
LmMgIHwgIDcgKystLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wYW5l
bC5jIHwgMTYgKysrKysrKysrKy0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9wYW5lbC5oIHwgIDQgKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS92bHZf
ZHNpLmMgICAgIHwgIDYgKystLS0tCiA3IGZpbGVzIGNoYW5nZWQsIDMyIGluc2VydGlvbnMoKyks
IDMyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaWNsX2RzaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pY2xfZHNpLmMKaW5k
ZXggNjI3Y2JkODgwMjI0Li5kMjUyZjY4ZTVkMDkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaWNsX2RzaS5jCkBAIC0xMjcyLDcgKzEyNzIsNyBAQCBzdGF0aWMgaW50IGdlbjExX2RzaV9j
b21wdXRlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAogCXBpcGVfY29u
ZmlnLT5vdXRwdXRfZm9ybWF0ID0gSU5URUxfT1VUUFVUX0ZPUk1BVF9SR0I7CiAJaW50ZWxfZml4
ZWRfcGFuZWxfbW9kZShmaXhlZF9tb2RlLCBhZGp1c3RlZF9tb2RlKTsKLQlpbnRlbF9wY2hfcGFu
ZWxfZml0dGluZyhwaXBlX2NvbmZpZywgY29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKTsKKwlpbnRl
bF9wY2hfcGFuZWxfZml0dGluZyhwaXBlX2NvbmZpZywgY29ubl9zdGF0ZSk7CiAKIAlhZGp1c3Rl
ZF9tb2RlLT5mbGFncyA9IDA7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZHAuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAu
YwppbmRleCBkY2Q2Yjk2ZGU5YWMuLjhjYTM1YmE5MTczMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHAuYwpAQCAtMjIzOCw5ICsyMjM4LDEwIEBAIGludGVsX2RwX2NvbXB1
dGVfbGlua19jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAKIHN0YXRpYyBp
bnQKIGludGVsX2RwX3ljYmNyNDIwX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAot
CQkJIHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCi0JCQkgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUpCisJCQkgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNf
c3RhdGUsCisJCQkgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGUp
CiB7CisJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciA9IGNvbm5fc3RhdGUtPmNvbm5l
Y3RvcjsKIAljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfaW5mbyAqaW5mbyA9ICZjb25uZWN0b3It
PmRpc3BsYXlfaW5mbzsKIAljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRf
bW9kZSA9CiAJCSZjcnRjX3N0YXRlLT5iYXNlLmFkanVzdGVkX21vZGU7CkBAIC0yMjUyLDcgKzIy
NTMsNyBAQCBpbnRlbF9kcF95Y2JjcjQyMF9jb25maWcoc3RydWN0IGludGVsX2RwICppbnRlbF9k
cCwKIAogCWNydGNfc3RhdGUtPm91dHB1dF9mb3JtYXQgPSBJTlRFTF9PVVRQVVRfRk9STUFUX1lD
QkNSNDIwOwogCi0JaW50ZWxfcGNoX3BhbmVsX2ZpdHRpbmcoY3J0Y19zdGF0ZSwgRFJNX01PREVf
U0NBTEVfRlVMTFNDUkVFTik7CisJaW50ZWxfcGNoX3BhbmVsX2ZpdHRpbmcoY3J0Y19zdGF0ZSwg
Y29ubl9zdGF0ZSk7CiAKIAlyZXR1cm4gMDsKIH0KQEAgLTIzMTUsOCArMjMxNiw4IEBAIGludGVs
X2RwX2NvbXB1dGVfY29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCWlmIChs
c3Bjb24tPmFjdGl2ZSkKIAkJbHNwY29uX3ljYmNyNDIwX2NvbmZpZygmaW50ZWxfY29ubmVjdG9y
LT5iYXNlLCBwaXBlX2NvbmZpZyk7CiAJZWxzZQotCQlyZXQgPSBpbnRlbF9kcF95Y2JjcjQyMF9j
b25maWcoaW50ZWxfZHAsICZpbnRlbF9jb25uZWN0b3ItPmJhc2UsCi0JCQkJCSAgICAgICBwaXBl
X2NvbmZpZyk7CisJCXJldCA9IGludGVsX2RwX3ljYmNyNDIwX2NvbmZpZyhpbnRlbF9kcCwgcGlw
ZV9jb25maWcsCisJCQkJCSAgICAgICBjb25uX3N0YXRlKTsKIAlpZiAocmV0KQogCQlyZXR1cm4g
cmV0OwogCkBAIC0yMzMzLDExICsyMzM0LDkgQEAgaW50ZWxfZHBfY29tcHV0ZV9jb25maWcoc3Ry
dWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQkJICAgICAgIGFkanVzdGVkX21vZGUpOwog
CiAJCWlmIChIQVNfR01DSChkZXZfcHJpdikpCi0JCQlpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmco
cGlwZV9jb25maWcsCi0JCQkJCQkgY29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKTsKKwkJCWludGVs
X2dtY2hfcGFuZWxfZml0dGluZyhwaXBlX2NvbmZpZywgY29ubl9zdGF0ZSk7CiAJCWVsc2UKLQkJ
CWludGVsX3BjaF9wYW5lbF9maXR0aW5nKHBpcGVfY29uZmlnLAotCQkJCQkJY29ubl9zdGF0ZS0+
c2NhbGluZ19tb2RlKTsKKwkJCWludGVsX3BjaF9wYW5lbF9maXR0aW5nKHBpcGVfY29uZmlnLCBj
b25uX3N0YXRlKTsKIAl9CiAKIAlpZiAoYWRqdXN0ZWRfbW9kZS0+ZmxhZ3MgJiBEUk1fTU9ERV9G
TEFHX0RCTFNDQU4pCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2hkbWkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5jCmlu
ZGV4IDBhN2RjNzhkYjMwNy4uNDI2ZGVjOTc5OTkyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkbWkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2hkbWkuYwpAQCAtMjI3OCwxNyArMjI3OCwxOSBAQCBzdGF0aWMgYm9vbCBo
ZG1pX2RlZXBfY29sb3JfcG9zc2libGUoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNy
dGNfc3RhdGUsCiB9CiAKIHN0YXRpYyBib29sCi1pbnRlbF9oZG1pX3ljYmNyNDIwX2NvbmZpZyhz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAotCQkJICAgc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKmNvbmZpZykKK2ludGVsX2hkbWlfeWNiY3I0MjBfY29uZmlnKHN0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlICpjcnRjX3N0YXRlLAorCQkJICAgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3Jf
c3RhdGUgKmNvbm5fc3RhdGUpCiB7CisJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciA9
IGNvbm5fc3RhdGUtPmNvbm5lY3RvcjsKKwogCWlmICghY29ubmVjdG9yLT55Y2Jjcl80MjBfYWxs
b3dlZCkgewogCQlEUk1fRVJST1IoIlBsYXRmb3JtIGRvZXNuJ3Qgc3VwcG9ydCBZQ0JDUjQyMCBv
dXRwdXRcbiIpOwogCQlyZXR1cm4gZmFsc2U7CiAJfQogCi0JY29uZmlnLT5vdXRwdXRfZm9ybWF0
ID0gSU5URUxfT1VUUFVUX0ZPUk1BVF9ZQ0JDUjQyMDsKKwljcnRjX3N0YXRlLT5vdXRwdXRfZm9y
bWF0ID0gSU5URUxfT1VUUFVUX0ZPUk1BVF9ZQ0JDUjQyMDsKIAotCWludGVsX3BjaF9wYW5lbF9m
aXR0aW5nKGNvbmZpZywgRFJNX01PREVfU0NBTEVfRlVMTFNDUkVFTik7CisJaW50ZWxfcGNoX3Bh
bmVsX2ZpdHRpbmcoY3J0Y19zdGF0ZSwgY29ubl9zdGF0ZSk7CiAKIAlyZXR1cm4gdHJ1ZTsKIH0K
QEAgLTI0MTgsNyArMjQyMCw3IEBAIGludCBpbnRlbF9oZG1pX2NvbXB1dGVfY29uZmlnKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQlwaXBlX2NvbmZpZy0+cGl4ZWxfbXVsdGlwbGll
ciA9IDI7CiAKIAlpZiAoZHJtX21vZGVfaXNfNDIwX29ubHkoJmNvbm5lY3Rvci0+ZGlzcGxheV9p
bmZvLCBhZGp1c3RlZF9tb2RlKSkgewotCQlpZiAoIWludGVsX2hkbWlfeWNiY3I0MjBfY29uZmln
KGNvbm5lY3RvciwgcGlwZV9jb25maWcpKSB7CisJCWlmICghaW50ZWxfaGRtaV95Y2JjcjQyMF9j
b25maWcocGlwZV9jb25maWcsIGNvbm5fc3RhdGUpKSB7CiAJCQlEUk1fRVJST1IoIkNhbid0IHN1
cHBvcnQgWUNCQ1I0MjAgb3V0cHV0XG4iKTsKIAkJCXJldHVybiAtRUlOVkFMOwogCQl9CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2x2ZHMuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfbHZkcy5jCmluZGV4IDA5NDkzNTA1OTQwYi4u
MDNlOGRhNzc5N2RjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2x2ZHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2x2ZHMu
YwpAQCAtNDMwLDEyICs0MzAsOSBAQCBzdGF0aWMgaW50IGludGVsX2x2ZHNfY29tcHV0ZV9jb25m
aWcoc3RydWN0IGludGVsX2VuY29kZXIgKmludGVsX2VuY29kZXIsCiAJaWYgKEhBU19QQ0hfU1BM
SVQoZGV2X3ByaXYpKSB7CiAJCXBpcGVfY29uZmlnLT5oYXNfcGNoX2VuY29kZXIgPSB0cnVlOwog
Ci0JCWludGVsX3BjaF9wYW5lbF9maXR0aW5nKHBpcGVfY29uZmlnLAotCQkJCQljb25uX3N0YXRl
LT5zY2FsaW5nX21vZGUpOworCQlpbnRlbF9wY2hfcGFuZWxfZml0dGluZyhwaXBlX2NvbmZpZywg
Y29ubl9zdGF0ZSk7CiAJfSBlbHNlIHsKLQkJaW50ZWxfZ21jaF9wYW5lbF9maXR0aW5nKHBpcGVf
Y29uZmlnLAotCQkJCQkgY29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKTsKLQorCQlpbnRlbF9nbWNo
X3BhbmVsX2ZpdHRpbmcocGlwZV9jb25maWcsIGNvbm5fc3RhdGUpOwogCX0KIAogCS8qCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3BhbmVsLmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3BhbmVsLmMKaW5kZXggMzUxMjVhYTk3YTlm
Li4yOTgxZDE3NTE4NzcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfcGFuZWwuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Bh
bmVsLmMKQEAgLTE3NSw3ICsxNzUsNyBAQCBpbnRlbF9wYW5lbF92YnRfZml4ZWRfbW9kZShzdHJ1
Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IpCiAvKiBhZGp1c3RlZF9tb2RlIGhhcyBiZWVu
IHByZXNldCB0byBiZSB0aGUgcGFuZWwncyBmaXhlZCBtb2RlICovCiB2b2lkCiBpbnRlbF9wY2hf
cGFuZWxfZml0dGluZyhzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKLQkJCWlu
dCBmaXR0aW5nX21vZGUpCisJCQljb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29u
bl9zdGF0ZSkKIHsKIAljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9k
ZSA9CiAJCSZjcnRjX3N0YXRlLT5iYXNlLmFkanVzdGVkX21vZGU7CkBAIC0xODcsNyArMTg3LDcg
QEAgaW50ZWxfcGNoX3BhbmVsX2ZpdHRpbmcoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNf
c3RhdGUsCiAJICAgIGNydGNfc3RhdGUtPm91dHB1dF9mb3JtYXQgIT0gSU5URUxfT1VUUFVUX0ZP
Uk1BVF9ZQ0JDUjQyMCkKIAkJcmV0dXJuOwogCi0Jc3dpdGNoIChmaXR0aW5nX21vZGUpIHsKKwlz
d2l0Y2ggKGNvbm5fc3RhdGUtPnNjYWxpbmdfbW9kZSkgewogCWNhc2UgRFJNX01PREVfU0NBTEVf
Q0VOVEVSOgogCQl3aWR0aCA9IGNydGNfc3RhdGUtPnBpcGVfc3JjX3c7CiAJCWhlaWdodCA9IGNy
dGNfc3RhdGUtPnBpcGVfc3JjX2g7CkBAIC0yMjQsNiArMjI0LDEwIEBAIGludGVsX3BjaF9wYW5l
bF9maXR0aW5nKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCQl9CiAJCWJy
ZWFrOwogCisJY2FzZSBEUk1fTU9ERV9TQ0FMRV9OT05FOgorCQlXQVJOX09OKGFkanVzdGVkX21v
ZGUtPmNydGNfaGRpc3BsYXkgIT0gY3J0Y19zdGF0ZS0+cGlwZV9zcmNfdyk7CisJCVdBUk5fT04o
YWRqdXN0ZWRfbW9kZS0+Y3J0Y192ZGlzcGxheSAhPSBjcnRjX3N0YXRlLT5waXBlX3NyY19oKTsK
KwkJLyogZmFsbCB0aHJvdWdoICovCiAJY2FzZSBEUk1fTU9ERV9TQ0FMRV9GVUxMU0NSRUVOOgog
CQl4ID0geSA9IDA7CiAJCXdpZHRoID0gYWRqdXN0ZWRfbW9kZS0+Y3J0Y19oZGlzcGxheTsKQEAg
LTIzMSw3ICsyMzUsNyBAQCBpbnRlbF9wY2hfcGFuZWxfZml0dGluZyhzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJYnJlYWs7CiAKIAlkZWZhdWx0OgotCQlNSVNTSU5HX0NB
U0UoZml0dGluZ19tb2RlKTsKKwkJTUlTU0lOR19DQVNFKGNvbm5fc3RhdGUtPnNjYWxpbmdfbW9k
ZSk7CiAJCXJldHVybjsKIAl9CiAKQEAgLTM3NCw3ICszNzgsNyBAQCBzdGF0aWMgdm9pZCBpOXh4
X3NjYWxlX2FzcGVjdChzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIH0KIAog
dm9pZCBpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmcoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNy
dGNfc3RhdGUsCi0JCQkgICAgICBpbnQgZml0dGluZ19tb2RlKQorCQkJICAgICAgY29uc3Qgc3Ry
dWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGUpCiB7CiAJc3RydWN0IGludGVsX2Ny
dGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPmJhc2UuY3J0Yyk7CiAJc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShjcnRjLT5iYXNlLmRldik7CkBA
IC0zODYsNyArMzkwLDcgQEAgdm9pZCBpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmcoc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJICAgIGFkanVzdGVkX21vZGUtPmNydGNfdmRp
c3BsYXkgPT0gY3J0Y19zdGF0ZS0+cGlwZV9zcmNfaCkKIAkJZ290byBvdXQ7CiAKLQlzd2l0Y2gg
KGZpdHRpbmdfbW9kZSkgeworCXN3aXRjaCAoY29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKSB7CiAJ
Y2FzZSBEUk1fTU9ERV9TQ0FMRV9DRU5URVI6CiAJCS8qCiAJCSAqIEZvciBjZW50ZXJlZCBtb2Rl
cywgd2UgaGF2ZSB0byBjYWxjdWxhdGUgYm9yZGVyIHdpZHRocyAmCkBAIC00MjIsNyArNDI2LDcg
QEAgdm9pZCBpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmcoc3RydWN0IGludGVsX2NydGNfc3RhdGUg
KmNydGNfc3RhdGUsCiAJCX0KIAkJYnJlYWs7CiAJZGVmYXVsdDoKLQkJV0FSTigxLCAiYmFkIHBh
bmVsIGZpdCBtb2RlOiAlZFxuIiwgZml0dGluZ19tb2RlKTsKKwkJTUlTU0lOR19DQVNFKGNvbm5f
c3RhdGUtPnNjYWxpbmdfbW9kZSk7CiAJCXJldHVybjsKIAl9CiAKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcGFuZWwuaCBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfcGFuZWwuaAppbmRleCBlMTgwNGU2ZTgzMjUuLmUyZmExNTQzYTYx
ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wYW5lbC5o
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcGFuZWwuaApAQCAtMjYs
OSArMjYsOSBAQCB2b2lkIGludGVsX3BhbmVsX2Zpbmkoc3RydWN0IGludGVsX3BhbmVsICpwYW5l
bCk7CiB2b2lkIGludGVsX2ZpeGVkX3BhbmVsX21vZGUoY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKmZpeGVkX21vZGUsCiAJCQkgICAgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVz
dGVkX21vZGUpOwogdm9pZCBpbnRlbF9wY2hfcGFuZWxfZml0dGluZyhzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKLQkJCSAgICAgaW50IGZpdHRpbmdfbW9kZSk7CisJCQkgICAg
IGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRlKTsKIHZvaWQgaW50
ZWxfZ21jaF9wYW5lbF9maXR0aW5nKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
LAotCQkJICAgICAgaW50IGZpdHRpbmdfbW9kZSk7CisJCQkgICAgICBjb25zdCBzdHJ1Y3QgZHJt
X2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZSk7CiB2b2lkIGludGVsX3BhbmVsX3NldF9iYWNr
bGlnaHRfYWNwaShjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZSwK
IAkJCQkgICAgdTMyIGxldmVsLCB1MzIgbWF4KTsKIGludCBpbnRlbF9wYW5lbF9zZXR1cF9iYWNr
bGlnaHQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvdmx2X2RzaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS92bHZfZHNpLmMKaW5kZXggNmEyMGM0MTY5YTUzLi45ZjRmN2M2NzBjYzggMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvdmx2X2RzaS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvdmx2X2RzaS5jCkBAIC0yNzIsMTEgKzI3Miw5IEBAIHN0
YXRpYyBpbnQgaW50ZWxfZHNpX2NvbXB1dGVfY29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyLAogCQlpbnRlbF9maXhlZF9wYW5lbF9tb2RlKGZpeGVkX21vZGUsIGFkanVzdGVkX21v
ZGUpOwogCiAJCWlmIChIQVNfR01DSChkZXZfcHJpdikpCi0JCQlpbnRlbF9nbWNoX3BhbmVsX2Zp
dHRpbmcocGlwZV9jb25maWcsCi0JCQkJCQkgY29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKTsKKwkJ
CWludGVsX2dtY2hfcGFuZWxfZml0dGluZyhwaXBlX2NvbmZpZywgY29ubl9zdGF0ZSk7CiAJCWVs
c2UKLQkJCWludGVsX3BjaF9wYW5lbF9maXR0aW5nKHBpcGVfY29uZmlnLAotCQkJCQkJY29ubl9z
dGF0ZS0+c2NhbGluZ19tb2RlKTsKKwkJCWludGVsX3BjaF9wYW5lbF9maXR0aW5nKHBpcGVfY29u
ZmlnLCBjb25uX3N0YXRlKTsKIAl9CiAKIAlpZiAoYWRqdXN0ZWRfbW9kZS0+ZmxhZ3MgJiBEUk1f
TU9ERV9GTEFHX0RCTFNDQU4pCi0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeA==

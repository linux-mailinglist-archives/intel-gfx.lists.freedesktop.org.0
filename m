Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 792B56C9A2
	for <lists+intel-gfx@lfdr.de>; Thu, 18 Jul 2019 09:01:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 76F1A6E32D;
	Thu, 18 Jul 2019 07:01:05 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 70ACC6E312
 for <intel-gfx@lists.freedesktop.org>; Thu, 18 Jul 2019 07:00:42 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 17390386-1500050 
 for multiple; Thu, 18 Jul 2019 08:00:38 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 18 Jul 2019 08:00:14 +0100
Message-Id: <20190718070024.21781-10-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190718070024.21781-1-chris@chris-wilson.co.uk>
References: <20190718070024.21781-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 10/20] drm/i915: Isolate i915_getparam_ioctl()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhpcyBnaWFudCBzd2l0Y2ggaGFzIHRlbmRyaWxzIG92ZXIgb3RoZXIgdGhlIHN0cnVjdCBhbmQg
ZG9lcyBub3QgZml0CmludG8gdGhlIHJlc3Qgb2YgdGhlIGRyaXZlciBicmluZyB1cCBhbmQgY29u
dHJvbCBvZiBpOTE1X2Rydi5jLiBQdXNoIGl0CnRvIG9uZSBzaWRlIHNvIHRoYXQgaXQgY2FuIGdy
b3cgaW4gcGVhY2UuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdp
bHNvbi5jby51az4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgfCAg
IDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyAgICAgIHwgMTY5IC0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAg
IHwgICAzICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYyB8IDE2OCArKysr
KysrKysrKysrKysrKysrKysrKysrKwogNCBmaWxlcyBjaGFuZ2VkLCAxNzIgaW5zZXJ0aW9ucygr
KSwgMTY5IGRlbGV0aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZ2V0cGFyYW0uYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01h
a2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKaW5kZXggZmFmYzM3NjNkYzJk
Li5kMmMxZGNkYTIwYTEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxl
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCkBAIC00Miw2ICs0Miw3IEBAIHN1
YmRpci1jY2ZsYWdzLXkgKz0gLUkkKHNyY3RyZWUpLyQoc3JjKQogIyBjb3JlIGRyaXZlciBjb2Rl
CiBpOTE1LXkgKz0gaTkxNV9kcnYubyBcCiAJICBpOTE1X2lycS5vIFwKKwkgIGk5MTVfZ2V0cGFy
YW0ubyBcCiAJICBpOTE1X3BhcmFtcy5vIFwKIAkgIGk5MTVfcGNpLm8gXAogCSAgaTkxNV9zY2F0
dGVybGlzdC5vIFwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCmluZGV4IDM2N2JkYzQ2ODlmMS4uYzk5
OGFmMTM4Njg5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKQEAgLTYxLDIyICs2MSwxNSBAQAog
CiAjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCIKICNpbmNsdWRlICJnZW0vaTkxNV9n
ZW1faW9jdGxzLmgiCi0jaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3VzZXIuaCIKICNpbmNsdWRl
ICJndC9pbnRlbF9ndC5oIgogI2luY2x1ZGUgImd0L2ludGVsX2d0X3BtLmgiCi0jaW5jbHVkZSAi
Z3QvaW50ZWxfcmVzZXQuaCIKLSNpbmNsdWRlICJndC9pbnRlbF93b3JrYXJvdW5kcy5oIgotI2lu
Y2x1ZGUgImd0L3VjL2ludGVsX3VjLmgiCiAKICNpbmNsdWRlICJpOTE1X2RlYnVnZnMuaCIKICNp
bmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImk5MTVfaXJxLmgiCi0jaW5jbHVkZSAiaTkx
NV9wbXUuaCIKICNpbmNsdWRlICJpOTE1X3F1ZXJ5LmgiCi0jaW5jbHVkZSAiaTkxNV90cmFjZS5o
IgogI2luY2x1ZGUgImk5MTVfdmdwdS5oIgogI2luY2x1ZGUgImludGVsX2Nzci5oIgotI2luY2x1
ZGUgImludGVsX2Rydi5oIgogI2luY2x1ZGUgImludGVsX3BtLmgiCiAKIHN0YXRpYyBzdHJ1Y3Qg
ZHJtX2RyaXZlciBkcml2ZXI7CkBAIC0zNDMsMTY4ICszMzYsNiBAQCBzdGF0aWMgdm9pZCBpbnRl
bF9kZXRlY3RfcGNoKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlwY2lfZGV2
X3B1dChwY2gpOwogfQogCi1zdGF0aWMgaW50IGk5MTVfZ2V0cGFyYW1faW9jdGwoc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKLQkJCSAgICAgICBzdHJ1Y3QgZHJtX2ZpbGUgKmZp
bGVfcHJpdikKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1
KGRldik7Ci0Jc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBkZXZfcHJpdi0+ZHJtLnBkZXY7Ci0JY29u
c3Qgc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUgPSAmUlVOVElNRV9JTkZPKGRldl9wcml2KS0+
c3NldTsKLQlkcm1faTkxNV9nZXRwYXJhbV90ICpwYXJhbSA9IGRhdGE7Ci0JaW50IHZhbHVlOwot
Ci0Jc3dpdGNoIChwYXJhbS0+cGFyYW0pIHsKLQljYXNlIEk5MTVfUEFSQU1fSVJRX0FDVElWRToK
LQljYXNlIEk5MTVfUEFSQU1fQUxMT1dfQkFUQ0hCVUZGRVI6Ci0JY2FzZSBJOTE1X1BBUkFNX0xB
U1RfRElTUEFUQ0g6Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX0NPTlNUQU5UUzoKLQkJLyog
UmVqZWN0IGFsbCBvbGQgdW1zL2RyaSBwYXJhbXMuICovCi0JCXJldHVybiAtRU5PREVWOwotCWNh
c2UgSTkxNV9QQVJBTV9DSElQU0VUX0lEOgotCQl2YWx1ZSA9IHBkZXYtPmRldmljZTsKLQkJYnJl
YWs7Ci0JY2FzZSBJOTE1X1BBUkFNX1JFVklTSU9OOgotCQl2YWx1ZSA9IHBkZXYtPnJldmlzaW9u
OwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fTlVNX0ZFTkNFU19BVkFJTDoKLQkJdmFsdWUg
PSBkZXZfcHJpdi0+Z2d0dC5udW1fZmVuY2VzOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1f
SEFTX09WRVJMQVk6Ci0JCXZhbHVlID0gZGV2X3ByaXYtPm92ZXJsYXkgPyAxIDogMDsKLQkJYnJl
YWs7Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19CU0Q6Ci0JCXZhbHVlID0gISFpbnRlbF9lbmdpbmVf
bG9va3VwX3VzZXIoZGV2X3ByaXYsCi0JCQkJCQkgICBJOTE1X0VOR0lORV9DTEFTU19WSURFTywg
MCk7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfQkxUOgotCQl2YWx1ZSA9ICEhaW50
ZWxfZW5naW5lX2xvb2t1cF91c2VyKGRldl9wcml2LAotCQkJCQkJICAgSTkxNV9FTkdJTkVfQ0xB
U1NfQ09QWSwgMCk7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfVkVCT1g6Ci0JCXZh
bHVlID0gISFpbnRlbF9lbmdpbmVfbG9va3VwX3VzZXIoZGV2X3ByaXYsCi0JCQkJCQkgICBJOTE1
X0VOR0lORV9DTEFTU19WSURFT19FTkhBTkNFLCAwKTsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BB
UkFNX0hBU19CU0QyOgotCQl2YWx1ZSA9ICEhaW50ZWxfZW5naW5lX2xvb2t1cF91c2VyKGRldl9w
cml2LAotCQkJCQkJICAgSTkxNV9FTkdJTkVfQ0xBU1NfVklERU8sIDEpOwotCQlicmVhazsKLQlj
YXNlIEk5MTVfUEFSQU1fSEFTX0xMQzoKLQkJdmFsdWUgPSBIQVNfTExDKGRldl9wcml2KTsKLQkJ
YnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19XVDoKLQkJdmFsdWUgPSBIQVNfV1QoZGV2X3By
aXYpOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fSEFTX0FMSUFTSU5HX1BQR1RUOgotCQl2
YWx1ZSA9IElOVEVMX1BQR1RUKGRldl9wcml2KTsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFN
X0hBU19TRU1BUEhPUkVTOgotCQl2YWx1ZSA9ICEhKGRldl9wcml2LT5jYXBzLnNjaGVkdWxlciAm
IEk5MTVfU0NIRURVTEVSX0NBUF9TRU1BUEhPUkVTKTsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BB
UkFNX0hBU19TRUNVUkVfQkFUQ0hFUzoKLQkJdmFsdWUgPSBjYXBhYmxlKENBUF9TWVNfQURNSU4p
OwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fQ01EX1BBUlNFUl9WRVJTSU9OOgotCQl2YWx1
ZSA9IGk5MTVfY21kX3BhcnNlcl9nZXRfdmVyc2lvbihkZXZfcHJpdik7Ci0JCWJyZWFrOwotCWNh
c2UgSTkxNV9QQVJBTV9TVUJTTElDRV9UT1RBTDoKLQkJdmFsdWUgPSBpbnRlbF9zc2V1X3N1YnNs
aWNlX3RvdGFsKHNzZXUpOwotCQlpZiAoIXZhbHVlKQotCQkJcmV0dXJuIC1FTk9ERVY7Ci0JCWJy
ZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9FVV9UT1RBTDoKLQkJdmFsdWUgPSBzc2V1LT5ldV90b3Rh
bDsKLQkJaWYgKCF2YWx1ZSkKLQkJCXJldHVybiAtRU5PREVWOwotCQlicmVhazsKLQljYXNlIEk5
MTVfUEFSQU1fSEFTX0dQVV9SRVNFVDoKLQkJdmFsdWUgPSBpOTE1X21vZHBhcmFtcy5lbmFibGVf
aGFuZ2NoZWNrICYmCi0JCQlpbnRlbF9oYXNfZ3B1X3Jlc2V0KGRldl9wcml2KTsKLQkJaWYgKHZh
bHVlICYmIGludGVsX2hhc19yZXNldF9lbmdpbmUoZGV2X3ByaXYpKQotCQkJdmFsdWUgPSAyOwot
CQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fSEFTX1JFU09VUkNFX1NUUkVBTUVSOgotCQl2YWx1
ZSA9IDA7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfUE9PTEVEX0VVOgotCQl2YWx1
ZSA9IEhBU19QT09MRURfRVUoZGV2X3ByaXYpOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1f
TUlOX0VVX0lOX1BPT0w6Ci0JCXZhbHVlID0gc3NldS0+bWluX2V1X2luX3Bvb2w7Ci0JCWJyZWFr
OwotCWNhc2UgSTkxNV9QQVJBTV9IVUNfU1RBVFVTOgotCQl2YWx1ZSA9IGludGVsX2h1Y19jaGVj
a19zdGF0dXMoJmRldl9wcml2LT5ndC51Yy5odWMpOwotCQlpZiAodmFsdWUgPCAwKQotCQkJcmV0
dXJuIHZhbHVlOwotCQlicmVhazsKLQljYXNlIEk5MTVfUEFSQU1fTU1BUF9HVFRfVkVSU0lPTjoK
LQkJLyogVGhvdWdoIHdlJ3ZlIHN0YXJ0ZWQgb3VyIG51bWJlcmluZyBmcm9tIDEsIGFuZCBzbyBj
bGFzcyBhbGwKLQkJICogZWFybGllciB2ZXJzaW9ucyBhcyAwLCBpbiBlZmZlY3QgdGhlaXIgdmFs
dWUgaXMgdW5kZWZpbmVkIGFzCi0JCSAqIHRoZSBpb2N0bCB3aWxsIHJlcG9ydCBFSU5WQUwgZm9y
IHRoZSB1bmtub3duIHBhcmFtIQotCQkgKi8KLQkJdmFsdWUgPSBpOTE1X2dlbV9tbWFwX2d0dF92
ZXJzaW9uKCk7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfU0NIRURVTEVSOgotCQl2
YWx1ZSA9IGRldl9wcml2LT5jYXBzLnNjaGVkdWxlcjsKLQkJYnJlYWs7Ci0KLQljYXNlIEk5MTVf
UEFSQU1fTU1BUF9WRVJTSU9OOgotCQkvKiBSZW1lbWJlciB0byBidW1wIHRoaXMgaWYgdGhlIHZl
cnNpb24gY2hhbmdlcyEgKi8KLQljYXNlIEk5MTVfUEFSQU1fSEFTX0dFTToKLQljYXNlIEk5MTVf
UEFSQU1fSEFTX1BBR0VGTElQUElORzoKLQljYXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNCVUYyOiAv
KiBkZXBlbmRzIG9uIEdFTSAqLwotCWNhc2UgSTkxNV9QQVJBTV9IQVNfUkVMQVhFRF9GRU5DSU5H
OgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfQ09IRVJFTlRfUklOR1M6Ci0JY2FzZSBJOTE1X1BBUkFN
X0hBU19SRUxBWEVEX0RFTFRBOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfR0VON19TT0xfUkVTRVQ6
Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19XQUlUX1RJTUVPVVQ6Ci0JY2FzZSBJOTE1X1BBUkFNX0hB
U19QUklNRV9WTUFQX0ZMVVNIOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfUElOTkVEX0JBVENIRVM6
Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX05PX1JFTE9DOgotCWNhc2UgSTkxNV9QQVJBTV9I
QVNfRVhFQ19IQU5ETEVfTFVUOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfQ09IRVJFTlRfUEhZU19H
VFQ6Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX1NPRlRQSU46Ci0JY2FzZSBJOTE1X1BBUkFN
X0hBU19FWEVDX0FTWU5DOgotCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19GRU5DRToKLQljYXNl
IEk5MTVfUEFSQU1fSEFTX0VYRUNfQ0FQVFVSRToKLQljYXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNf
QkFUQ0hfRklSU1Q6Ci0JY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX0ZFTkNFX0FSUkFZOgotCWNh
c2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19TVUJNSVRfRkVOQ0U6Ci0JCS8qIEZvciB0aGUgdGltZSBi
ZWluZyBhbGwgb2YgdGhlc2UgYXJlIGFsd2F5cyB0cnVlOwotCQkgKiBpZiBzb21lIHN1cHBvcnRl
ZCBoYXJkd2FyZSBkb2VzIG5vdCBoYXZlIG9uZSBvZiB0aGVzZQotCQkgKiBmZWF0dXJlcyB0aGlz
IHZhbHVlIG5lZWRzIHRvIGJlIHByb3ZpZGVkIGZyb20KLQkJICogSU5URUxfSU5GTygpLCBhIGZl
YXR1cmUgbWFjcm8sIG9yIHNpbWlsYXIuCi0JCSAqLwotCQl2YWx1ZSA9IDE7Ci0JCWJyZWFrOwot
CWNhc2UgSTkxNV9QQVJBTV9IQVNfQ09OVEVYVF9JU09MQVRJT046Ci0JCXZhbHVlID0gaW50ZWxf
ZW5naW5lc19oYXNfY29udGV4dF9pc29sYXRpb24oZGV2X3ByaXYpOwotCQlicmVhazsKLQljYXNl
IEk5MTVfUEFSQU1fU0xJQ0VfTUFTSzoKLQkJdmFsdWUgPSBzc2V1LT5zbGljZV9tYXNrOwotCQlp
ZiAoIXZhbHVlKQotCQkJcmV0dXJuIC1FTk9ERVY7Ci0JCWJyZWFrOwotCWNhc2UgSTkxNV9QQVJB
TV9TVUJTTElDRV9NQVNLOgotCQl2YWx1ZSA9IHNzZXUtPnN1YnNsaWNlX21hc2tbMF07Ci0JCWlm
ICghdmFsdWUpCi0JCQlyZXR1cm4gLUVOT0RFVjsKLQkJYnJlYWs7Ci0JY2FzZSBJOTE1X1BBUkFN
X0NTX1RJTUVTVEFNUF9GUkVRVUVOQ1k6Ci0JCXZhbHVlID0gMTAwMCAqIFJVTlRJTUVfSU5GTyhk
ZXZfcHJpdiktPmNzX3RpbWVzdGFtcF9mcmVxdWVuY3lfa2h6OwotCQlicmVhazsKLQljYXNlIEk5
MTVfUEFSQU1fTU1BUF9HVFRfQ09IRVJFTlQ6Ci0JCXZhbHVlID0gSU5URUxfSU5GTyhkZXZfcHJp
diktPmhhc19jb2hlcmVudF9nZ3R0OwotCQlicmVhazsKLQlkZWZhdWx0OgotCQlEUk1fREVCVUco
IlVua25vd24gcGFyYW1ldGVyICVkXG4iLCBwYXJhbS0+cGFyYW0pOwotCQlyZXR1cm4gLUVJTlZB
TDsKLQl9Ci0KLQlpZiAocHV0X3VzZXIodmFsdWUsIHBhcmFtLT52YWx1ZSkpCi0JCXJldHVybiAt
RUZBVUxUOwotCi0JcmV0dXJuIDA7Ci19Ci0KIHN0YXRpYyBpbnQgaTkxNV9nZXRfYnJpZGdlX2Rl
dihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiB7CiAJaW50IGRvbWFpbiA9IHBj
aV9kb21haW5fbnIoZGV2X3ByaXYtPmRybS5wZGV2LT5idXMpOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmgKaW5kZXggOGQxYWQyN2IxMzJkLi5kZmYyOGY1MDU4YmMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuaApAQCAtMjQwNyw2ICsyNDA3LDkgQEAgc3RhdGljIGlubGluZSBib29sIGludGVsX3ZncHVf
YWN0aXZlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlyZXR1cm4gZGV2X3By
aXYtPnZncHUuYWN0aXZlOwogfQogCitpbnQgaTkxNV9nZXRwYXJhbV9pb2N0bChzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAorCQkJc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYp
OworCiAvKiBpOTE1X2dlbS5jICovCiBpbnQgaTkxNV9nZW1faW5pdF91c2VycHRyKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIGk5MTVfZ2VtX2NsZWFudXBfdXNlcnB0
cihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9nZXRwYXJhbS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uNWQ5
MTAxMzc2YTNkCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZXRwYXJhbS5jCkBAIC0wLDAgKzEsMTY4IEBACisvKgorICogU1BEWC1MaWNlbnNlLUlkZW50aWZp
ZXI6IE1JVAorICovCisKKyNpbmNsdWRlICJndC9pbnRlbF9lbmdpbmVfdXNlci5oIgorCisjaW5j
bHVkZSAiaTkxNV9kcnYuaCIKKworaW50IGk5MTVfZ2V0cGFyYW1faW9jdGwoc3RydWN0IGRybV9k
ZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKKwkJCXN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2KQor
eworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShkZXYpOworCWNvbnN0
IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1ID0gJlJVTlRJTUVfSU5GTyhpOTE1KS0+c3NldTsK
Kwlkcm1faTkxNV9nZXRwYXJhbV90ICpwYXJhbSA9IGRhdGE7CisJaW50IHZhbHVlOworCisJc3dp
dGNoIChwYXJhbS0+cGFyYW0pIHsKKwljYXNlIEk5MTVfUEFSQU1fSVJRX0FDVElWRToKKwljYXNl
IEk5MTVfUEFSQU1fQUxMT1dfQkFUQ0hCVUZGRVI6CisJY2FzZSBJOTE1X1BBUkFNX0xBU1RfRElT
UEFUQ0g6CisJY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX0NPTlNUQU5UUzoKKwkJLyogUmVqZWN0
IGFsbCBvbGQgdW1zL2RyaSBwYXJhbXMuICovCisJCXJldHVybiAtRU5PREVWOworCWNhc2UgSTkx
NV9QQVJBTV9DSElQU0VUX0lEOgorCQl2YWx1ZSA9IGk5MTUtPmRybS5wZGV2LT5kZXZpY2U7CisJ
CWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9SRVZJU0lPTjoKKwkJdmFsdWUgPSBpOTE1LT5kcm0u
cGRldi0+cmV2aXNpb247CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9OVU1fRkVOQ0VTX0FW
QUlMOgorCQl2YWx1ZSA9IGk5MTUtPmdndHQubnVtX2ZlbmNlczsKKwkJYnJlYWs7CisJY2FzZSBJ
OTE1X1BBUkFNX0hBU19PVkVSTEFZOgorCQl2YWx1ZSA9ICEhaTkxNS0+b3ZlcmxheTsKKwkJYnJl
YWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19CU0Q6CisJCXZhbHVlID0gISFpbnRlbF9lbmdpbmVf
bG9va3VwX3VzZXIoaTkxNSwKKwkJCQkJCSAgIEk5MTVfRU5HSU5FX0NMQVNTX1ZJREVPLCAwKTsK
KwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19CTFQ6CisJCXZhbHVlID0gISFpbnRlbF9l
bmdpbmVfbG9va3VwX3VzZXIoaTkxNSwKKwkJCQkJCSAgIEk5MTVfRU5HSU5FX0NMQVNTX0NPUFks
IDApOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fSEFTX1ZFQk9YOgorCQl2YWx1ZSA9ICEh
aW50ZWxfZW5naW5lX2xvb2t1cF91c2VyKGk5MTUsCisJCQkJCQkgICBJOTE1X0VOR0lORV9DTEFT
U19WSURFT19FTkhBTkNFLCAwKTsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19CU0Qy
OgorCQl2YWx1ZSA9ICEhaW50ZWxfZW5naW5lX2xvb2t1cF91c2VyKGk5MTUsCisJCQkJCQkgICBJ
OTE1X0VOR0lORV9DTEFTU19WSURFTywgMSk7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9I
QVNfTExDOgorCQl2YWx1ZSA9IEhBU19MTEMoaTkxNSk7CisJCWJyZWFrOworCWNhc2UgSTkxNV9Q
QVJBTV9IQVNfV1Q6CisJCXZhbHVlID0gSEFTX1dUKGk5MTUpOworCQlicmVhazsKKwljYXNlIEk5
MTVfUEFSQU1fSEFTX0FMSUFTSU5HX1BQR1RUOgorCQl2YWx1ZSA9IElOVEVMX1BQR1RUKGk5MTUp
OworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fSEFTX1NFTUFQSE9SRVM6CisJCXZhbHVlID0g
ISEoaTkxNS0+Y2Fwcy5zY2hlZHVsZXIgJiBJOTE1X1NDSEVEVUxFUl9DQVBfU0VNQVBIT1JFUyk7
CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9IQVNfU0VDVVJFX0JBVENIRVM6CisJCXZhbHVl
ID0gY2FwYWJsZShDQVBfU1lTX0FETUlOKTsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0NN
RF9QQVJTRVJfVkVSU0lPTjoKKwkJdmFsdWUgPSBpOTE1X2NtZF9wYXJzZXJfZ2V0X3ZlcnNpb24o
aTkxNSk7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9TVUJTTElDRV9UT1RBTDoKKwkJdmFs
dWUgPSBpbnRlbF9zc2V1X3N1YnNsaWNlX3RvdGFsKHNzZXUpOworCQlpZiAoIXZhbHVlKQorCQkJ
cmV0dXJuIC1FTk9ERVY7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9FVV9UT1RBTDoKKwkJ
dmFsdWUgPSBzc2V1LT5ldV90b3RhbDsKKwkJaWYgKCF2YWx1ZSkKKwkJCXJldHVybiAtRU5PREVW
OworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0dQVV9SRVNFVDoKKwkJdmFsdWUgPSBp
OTE1X21vZHBhcmFtcy5lbmFibGVfaGFuZ2NoZWNrICYmCisJCQlpbnRlbF9oYXNfZ3B1X3Jlc2V0
KGk5MTUpOworCQlpZiAodmFsdWUgJiYgaW50ZWxfaGFzX3Jlc2V0X2VuZ2luZShpOTE1KSkKKwkJ
CXZhbHVlID0gMjsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19SRVNPVVJDRV9TVFJF
QU1FUjoKKwkJdmFsdWUgPSAwOworCQlicmVhazsKKwljYXNlIEk5MTVfUEFSQU1fSEFTX1BPT0xF
RF9FVToKKwkJdmFsdWUgPSBIQVNfUE9PTEVEX0VVKGk5MTUpOworCQlicmVhazsKKwljYXNlIEk5
MTVfUEFSQU1fTUlOX0VVX0lOX1BPT0w6CisJCXZhbHVlID0gc3NldS0+bWluX2V1X2luX3Bvb2w7
CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9IVUNfU1RBVFVTOgorCQl2YWx1ZSA9IGludGVs
X2h1Y19jaGVja19zdGF0dXMoJmk5MTUtPmd0LnVjLmh1Yyk7CisJCWlmICh2YWx1ZSA8IDApCisJ
CQlyZXR1cm4gdmFsdWU7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9NTUFQX0dUVF9WRVJT
SU9OOgorCQkvKiBUaG91Z2ggd2UndmUgc3RhcnRlZCBvdXIgbnVtYmVyaW5nIGZyb20gMSwgYW5k
IHNvIGNsYXNzIGFsbAorCQkgKiBlYXJsaWVyIHZlcnNpb25zIGFzIDAsIGluIGVmZmVjdCB0aGVp
ciB2YWx1ZSBpcyB1bmRlZmluZWQgYXMKKwkJICogdGhlIGlvY3RsIHdpbGwgcmVwb3J0IEVJTlZB
TCBmb3IgdGhlIHVua25vd24gcGFyYW0hCisJCSAqLworCQl2YWx1ZSA9IGk5MTVfZ2VtX21tYXBf
Z3R0X3ZlcnNpb24oKTsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0hBU19TQ0hFRFVMRVI6
CisJCXZhbHVlID0gaTkxNS0+Y2Fwcy5zY2hlZHVsZXI7CisJCWJyZWFrOworCisJY2FzZSBJOTE1
X1BBUkFNX01NQVBfVkVSU0lPTjoKKwkJLyogUmVtZW1iZXIgdG8gYnVtcCB0aGlzIGlmIHRoZSB2
ZXJzaW9uIGNoYW5nZXMhICovCisJY2FzZSBJOTE1X1BBUkFNX0hBU19HRU06CisJY2FzZSBJOTE1
X1BBUkFNX0hBU19QQUdFRkxJUFBJTkc6CisJY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDQlVGMjog
LyogZGVwZW5kcyBvbiBHRU0gKi8KKwljYXNlIEk5MTVfUEFSQU1fSEFTX1JFTEFYRURfRkVOQ0lO
RzoKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0NPSEVSRU5UX1JJTkdTOgorCWNhc2UgSTkxNV9QQVJB
TV9IQVNfUkVMQVhFRF9ERUxUQToKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0dFTjdfU09MX1JFU0VU
OgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfV0FJVF9USU1FT1VUOgorCWNhc2UgSTkxNV9QQVJBTV9I
QVNfUFJJTUVfVk1BUF9GTFVTSDoKKwljYXNlIEk5MTVfUEFSQU1fSEFTX1BJTk5FRF9CQVRDSEVT
OgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19OT19SRUxPQzoKKwljYXNlIEk5MTVfUEFSQU1f
SEFTX0VYRUNfSEFORExFX0xVVDoKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0NPSEVSRU5UX1BIWVNf
R1RUOgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19TT0ZUUElOOgorCWNhc2UgSTkxNV9QQVJB
TV9IQVNfRVhFQ19BU1lOQzoKKwljYXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfRkVOQ0U6CisJY2Fz
ZSBJOTE1X1BBUkFNX0hBU19FWEVDX0NBUFRVUkU6CisJY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVD
X0JBVENIX0ZJUlNUOgorCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19GRU5DRV9BUlJBWToKKwlj
YXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfU1VCTUlUX0ZFTkNFOgorCQkvKiBGb3IgdGhlIHRpbWUg
YmVpbmcgYWxsIG9mIHRoZXNlIGFyZSBhbHdheXMgdHJ1ZTsKKwkJICogaWYgc29tZSBzdXBwb3J0
ZWQgaGFyZHdhcmUgZG9lcyBub3QgaGF2ZSBvbmUgb2YgdGhlc2UKKwkJICogZmVhdHVyZXMgdGhp
cyB2YWx1ZSBuZWVkcyB0byBiZSBwcm92aWRlZCBmcm9tCisJCSAqIElOVEVMX0lORk8oKSwgYSBm
ZWF0dXJlIG1hY3JvLCBvciBzaW1pbGFyLgorCQkgKi8KKwkJdmFsdWUgPSAxOworCQlicmVhazsK
KwljYXNlIEk5MTVfUEFSQU1fSEFTX0NPTlRFWFRfSVNPTEFUSU9OOgorCQl2YWx1ZSA9IGludGVs
X2VuZ2luZXNfaGFzX2NvbnRleHRfaXNvbGF0aW9uKGk5MTUpOworCQlicmVhazsKKwljYXNlIEk5
MTVfUEFSQU1fU0xJQ0VfTUFTSzoKKwkJdmFsdWUgPSBzc2V1LT5zbGljZV9tYXNrOworCQlpZiAo
IXZhbHVlKQorCQkJcmV0dXJuIC1FTk9ERVY7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJBTV9T
VUJTTElDRV9NQVNLOgorCQl2YWx1ZSA9IHNzZXUtPnN1YnNsaWNlX21hc2tbMF07CisJCWlmICgh
dmFsdWUpCisJCQlyZXR1cm4gLUVOT0RFVjsKKwkJYnJlYWs7CisJY2FzZSBJOTE1X1BBUkFNX0NT
X1RJTUVTVEFNUF9GUkVRVUVOQ1k6CisJCXZhbHVlID0gMTAwMCAqIFJVTlRJTUVfSU5GTyhpOTE1
KS0+Y3NfdGltZXN0YW1wX2ZyZXF1ZW5jeV9raHo7CisJCWJyZWFrOworCWNhc2UgSTkxNV9QQVJB
TV9NTUFQX0dUVF9DT0hFUkVOVDoKKwkJdmFsdWUgPSBJTlRFTF9JTkZPKGk5MTUpLT5oYXNfY29o
ZXJlbnRfZ2d0dDsKKwkJYnJlYWs7CisJZGVmYXVsdDoKKwkJRFJNX0RFQlVHKCJVbmtub3duIHBh
cmFtZXRlciAlZFxuIiwgcGFyYW0tPnBhcmFtKTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCisJ
aWYgKHB1dF91c2VyKHZhbHVlLCBwYXJhbS0+dmFsdWUpKQorCQlyZXR1cm4gLUVGQVVMVDsKKwor
CXJldHVybiAwOworfQotLSAKMi4yMi4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9pbnRlbC1nZng=

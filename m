Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1A9959D48D
	for <lists+intel-gfx@lfdr.de>; Mon, 26 Aug 2019 18:56:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4B7616E273;
	Mon, 26 Aug 2019 16:56:46 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AED006E273
 for <intel-gfx@lists.freedesktop.org>; Mon, 26 Aug 2019 16:56:45 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 18268466-1500050 for multiple; Mon, 26 Aug 2019 17:56:35 +0100
MIME-Version: 1.0
To: "Bloomfield, Jon" <jon.bloomfield@intel.com>,
 "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <AD48BB7FB99B174FBCC69E228F58B3B68B3D9198@fmsmsx120.amr.corp.intel.com>
References: <20190826072149.9447-1-chris@chris-wilson.co.uk>
 <20190826072149.9447-28-chris@chris-wilson.co.uk>
 <AD48BB7FB99B174FBCC69E228F58B3B68B3D9198@fmsmsx120.amr.corp.intel.com>
Message-ID: <156683859276.14306.6988350986402734188@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Mon, 26 Aug 2019 17:56:32 +0100
Subject: Re: [Intel-gfx] [PATCH 28/28] drm/i915: Replace hangcheck by
 heartbeats
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBCbG9vbWZpZWxkLCBKb24gKDIwMTktMDgtMjYgMTU6MDg6MDIpCj4gPiAtLS0tLU9y
aWdpbmFsIE1lc3NhZ2UtLS0tLQo+ID4gRnJvbTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13
aWxzb24uY28udWs+Cj4gPiArICogV2hpbGUgdGhlIGVuZ2luZSBpcyBhY3RpdmUsIHdlIHNlbmQg
YSBwZXJpb2RpYyBwdWxzZSBhbG9uZyB0aGUgZW50aXJlCj4gCj4gYWxvbmcgdGhlIGVudGlyZSB3
aGF0PwoKcy9lbnRpcmUvZW5naW5lLwoKPiA+ICsgKiB0byBjaGVjayBvbiBpdHMgaGVhbHRoIGFu
ZCB0byBmbHVzaCBhbnkgaWRsZS1iYXJyaWVycy4gSWYgdGhhdCByZXF1ZXN0Cj4gPiArICogaXMg
c3R1Y2ssIGFuZCB3ZSBmYWlsIHRvIHByZWVtcHQgaXQsIHdlIGRlY2xhcmUgdGhlIGVuZ2luZSBo
dW5nIGFuZAo+ID4gKyAqIGlzc3VlIGEgcmVzZXQgLS0gaW4gdGhlIGhvcGUgdGhhdCByZXN0b3Jl
cyBwcm9ncmVzcy4KPiA+ICsgKi8KPiA+ICsKPiA+ICtzdGF0aWMgbG9uZyBkZWxheSh2b2lkKQo+
IAo+IFByb2JhYmx5IE5PVCB0aGUgYmVzdCBmdW5jdGlvbiBuYW1lIGluIHRoZSB3b3JsZCwgZXZl
ci4gJ2RlbGF5JyBjb3VsZCBlcXVhbGx5IGJlIGEgdmVyYiwgc28gaXQncyBub3Qgc2VsZi1kZXNj
cmlwdGl2ZS4KCklzIGl0IGEgbm91biBvciB2ZXJiIGluIHRoaXMgY2FzZT8gT3IganVzdCBzaG9y
dGhhbmQuCgo+ID4gK3sKPiA+ICsgICAgIGNvbnN0IGxvbmcgdCA9Cj4gPiBtc2Vjc190b19qaWZm
aWVzKENPTkZJR19EUk1fSTkxNV9IRUFSVEJFQVRfSU5URVJWQUwpOwo+ID4gKwo+ID4gKyAgICAg
cmV0dXJuIHJvdW5kX2ppZmZpZXNfdXBfcmVsYXRpdmUodCk7Cj4gPiArfQoKPiA+ICtzdGF0aWMg
dm9pZCBoZWFydGJlYXQoc3RydWN0IHdvcmtfc3RydWN0ICp3cmspCj4gPiArewo+ID4gKyAgICAg
c3RydWN0IGk5MTVfc2NoZWRfYXR0ciBhdHRyID0gewo+ID4gKyAgICAgICAgICAgICAucHJpb3Jp
dHkgPSBJOTE1X1VTRVJfUFJJT1JJVFkoSTkxNV9QUklPUklUWV9NSU4pLAo+ID4gKyAgICAgfTsK
PiA+ICsgICAgIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9Cj4gPiArICAgICAgICAg
ICAgIGNvbnRhaW5lcl9vZih3cmssIHR5cGVvZigqZW5naW5lKSwgaGVhcnRiZWF0LndvcmspOwo+
ID4gKyAgICAgc3RydWN0IGludGVsX2NvbnRleHQgKmNlID0gZW5naW5lLT5rZXJuZWxfY29udGV4
dDsKPiA+ICsgICAgIHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+ID4gKwo+ID4gKyAgICAgaWYg
KCFpbnRlbF9lbmdpbmVfcG1fZ2V0X2lmX2F3YWtlKGVuZ2luZSkpCj4gPiArICAgICAgICAgICAg
IHJldHVybjsKPiA+ICsKPiA+ICsgICAgIHJxID0gZW5naW5lLT5sYXN0X2hlYXJ0YmVhdDsKPiA+
ICsgICAgIGlmIChycSAmJiBpOTE1X3JlcXVlc3RfY29tcGxldGVkKHJxKSkgewo+ID4gKyAgICAg
ICAgICAgICBpOTE1X3JlcXVlc3RfcHV0KHJxKTsKPiA+ICsgICAgICAgICAgICAgZW5naW5lLT5s
YXN0X2hlYXJ0YmVhdCA9IE5VTEw7Cj4gPiArICAgICB9Cj4gPiArCj4gPiArICAgICBpZiAoaW50
ZWxfZ3RfaXNfd2VkZ2VkKGVuZ2luZS0+Z3QpKQo+ID4gKyAgICAgICAgICAgICBnb3RvIG91dDsK
PiA+ICsKPiA+ICsgICAgIGlmIChlbmdpbmUtPmxhc3RfaGVhcnRiZWF0KSB7Cj4gPiArICAgICAg
ICAgICAgIGlmIChJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9ERUJVR19HRU0pKSB7Cj4gPiAr
ICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRybV9wcmludGVyIHAgPSBkcm1fZGVidWdfcHJp
bnRlcihfX2Z1bmNfXyk7Cj4gPiArCj4gPiArICAgICAgICAgICAgICAgICAgICAgaW50ZWxfZW5n
aW5lX2R1bXAoZW5naW5lLCAmcCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAiJXMgaGVhcnRiZWF0IG5vdCB0aWNraW5nXG4iLAo+ID4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2luZS0+bmFtZSk7Cj4gPiArICAgICAgICAgICAg
IH0KPiA+ICsKPiA+ICsgICAgICAgICAgICAgaWYgKGVuZ2luZS0+c2NoZWR1bGUgJiYKPiA+ICsg
ICAgICAgICAgICAgICAgIHJxLT5zY2hlZC5hdHRyLnByaW9yaXR5IDwgSTkxNV9QUklPUklUWV9C
QVJSSUVSKSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgYXR0ci5wcmlvcml0eSA9Cj4gPiAr
Cj4gPiAgICAgICBJOTE1X1VTRVJfUFJJT1JJVFkoSTkxNV9QUklPUklUWV9IRUFSVEJFQVQpOwo+
ID4gKyAgICAgICAgICAgICAgICAgICAgIGlmIChycS0+c2NoZWQuYXR0ci5wcmlvcml0eSA+PSBh
dHRyLnByaW9yaXR5KQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ci5wcmlv
cml0eSA9IEk5MTVfUFJJT1JJVFlfQkFSUklFUjsKPiA+ICsKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICBsb2NhbF9iaF9kaXNhYmxlKCk7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgZW5naW5l
LT5zY2hlZHVsZShycSwgJmF0dHIpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGxvY2FsX2Jo
X2VuYWJsZSgpOwo+ID4gKyAgICAgICAgICAgICB9IGVsc2Ugewo+ID4gKyAgICAgICAgICAgICAg
ICAgICAgIGludGVsX2d0X2hhbmRsZV9lcnJvcihlbmdpbmUtPmd0LCBlbmdpbmUtPm1hc2ssCj4g
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEk5MTVfRVJST1Jf
Q0FQVFVSRSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
InN0b3BwZWQgaGVhcnRiZWF0IG9uICVzIiwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZW5naW5lLT5uYW1lKTsKPiA+ICsgICAgICAgICAgICAgfQo+ID4g
KyAgICAgICAgICAgICBnb3RvIG91dDsKPiA+ICsgICAgIH0KPiA+ICsKPiA+ICsgICAgIGlmIChl
bmdpbmUtPndha2VyZWZfc2VyaWFsID09IGVuZ2luZS0+c2VyaWFsKQo+ID4gKyAgICAgICAgICAg
ICBnb3RvIG91dDsKPiA+ICsKPiA+ICsgICAgIG11dGV4X2xvY2soJmNlLT50aW1lbGluZS0+bXV0
ZXgpOwo+ID4gKwo+ID4gKyAgICAgaW50ZWxfY29udGV4dF9lbnRlcihjZSk7Cj4gPiArICAgICBy
cSA9IF9faTkxNV9yZXF1ZXN0X2NyZWF0ZShjZSwgR0ZQX05PV0FJVCB8IF9fR0ZQX05PV0FSTik7
Cj4gPiArICAgICBpbnRlbF9jb250ZXh0X2V4aXQoY2UpOwo+ID4gKyAgICAgaWYgKElTX0VSUihy
cSkpCj4gPiArICAgICAgICAgICAgIGdvdG8gdW5sb2NrOwo+ID4gKwo+ID4gKyAgICAgaWRsZV9w
dWxzZShlbmdpbmUsIHJxKTsKPiA+ICsgICAgIGlmIChpOTE1X21vZHBhcmFtcy5lbmFibGVfaGFu
Z2NoZWNrKQo+ID4gKyAgICAgICAgICAgICBlbmdpbmUtPmxhc3RfaGVhcnRiZWF0ID0gaTkxNV9y
ZXF1ZXN0X2dldChycSk7Cj4gPiArCj4gPiArICAgICBfX2k5MTVfcmVxdWVzdF9jb21taXQocnEp
Owo+ID4gKyAgICAgX19pOTE1X3JlcXVlc3RfcXVldWUocnEsICZhdHRyKTsKPiA+ICsKPiA+ICt1
bmxvY2s6Cj4gPiArICAgICBtdXRleF91bmxvY2soJmNlLT50aW1lbGluZS0+bXV0ZXgpOwo+ID4g
K291dDoKPiA+ICsgICAgIHNjaGVkdWxlX2RlbGF5ZWRfd29yaygmZW5naW5lLT5oZWFydGJlYXQs
IGRlbGF5KCkpOwo+IAo+IElzbid0IGVuZ2luZS0+aGVhcnRiZWF0IG5vdyBOVUxMIGluIHNvbWUg
Y2FzZXM/CgplbmdpbmUtPmhlYXJ0YmVhdCwgdGhlIHdvcmtlcgp2cwplbmdpbmUtPmxhc3RfaGVh
cnRiZWF0CgpNYXliZSwKCnN0cnVjdCBpbnRlbF9lbmdpbmVfaGVhcnRiZWF0IHsKCXdvcms7Cglz
eXN0b2xlOwp9OwoKCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZXRwYXJhbS5jCj4gPiBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYwo+ID4g
aW5kZXggNWQ5MTAxMzc2YTNkLi5lNmMzNTEwODA1OTMgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2dldHBhcmFtLmMKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZ2V0cGFyYW0uYwo+ID4gQEAgLTc4LDggKzc4LDcgQEAgaW50IGk5MTVfZ2V0cGFy
YW1faW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZAo+ID4gKmRhdGEsCj4gPiAgICAg
ICAgICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9ERVY7Cj4gPiAgICAgICAgICAgICAgIGJyZWFr
Owo+ID4gICAgICAgY2FzZSBJOTE1X1BBUkFNX0hBU19HUFVfUkVTRVQ6Cj4gPiAtICAgICAgICAg
ICAgIHZhbHVlID0gaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2hhbmdjaGVjayAmJgo+ID4gLSAgICAg
ICAgICAgICAgICAgICAgIGludGVsX2hhc19ncHVfcmVzZXQoaTkxNSk7Cj4gPiArICAgICAgICAg
ICAgIHZhbHVlID0gaW50ZWxfaGFzX2dwdV9yZXNldChpOTE1KTsKPiAKPiBEb24ndCB1bmRlcnN0
YW5kIHRoaXMgdHdlYWsuIFdlIGhhdmVuJ3QgcmVhbGx5IGNoYW5nZWQgdGhlIGVzc2VuY2Ugb2Yg
aGFuZ2NoZWNrLCBqdXN0IGltcHJvdmVkIGl0LCBzbyB3aHkgZG8gd2UgY2hhbmdlIHRoaXMgZ2V0
X3BhcmFtPwoKSSBkZWxldGVkIHRoZSBtb2RwYXJhbSBpbiBlYXJsaWVyIHBhdGNoZXMuIEJ1dCBh
bnRpY2lwYXRlZCB5b3Ugd291bGQKb2JqZWN0Li4uCi1DaHJpcwpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVs
LWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

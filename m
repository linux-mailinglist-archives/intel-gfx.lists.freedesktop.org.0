Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5C3EC1072BC
	for <lists+intel-gfx@lfdr.de>; Fri, 22 Nov 2019 14:05:30 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2D5066E2CF;
	Fri, 22 Nov 2019 13:05:27 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 216606E2CF
 for <intel-gfx@lists.freedesktop.org>; Fri, 22 Nov 2019 13:05:26 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 Nov 2019 05:05:25 -0800
X-IronPort-AV: E=Sophos;i="5.69,229,1571727600"; d="scan'208";a="201513047"
Received: from aburk3x-mobl1.ger.corp.intel.com (HELO [10.252.19.231])
 ([10.252.19.231])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 22 Nov 2019 05:05:24 -0800
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191122112152.660743-1-chris@chris-wilson.co.uk>
 <20191122112152.660743-5-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <a15e8f59-5b68-6c16-c2e0-8762e215670a@linux.intel.com>
Date: Fri, 22 Nov 2019 13:05:23 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191122112152.660743-5-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 5/5] drm/i915/gt: Schedule request
 retirement when timeline idles
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDIyLzExLzIwMTkgMTE6MjEsIENocmlzIFdpbHNvbiB3cm90ZToKPiBUaGUgbWFqb3IgZHJh
d2JhY2sgb2YgY29tbWl0IDdlMzRmNGU0YWFkMyAoImRybS9pOTE1L2dlbjgrOiBBZGQgUkM2IENU
WAo+IGNvcnJ1cHRpb24gV0EiKSBpcyB0aGF0IGl0IGRpc2FibGVzIFJDNiB3aGlsZSBTa3lsYWtl
IChhbmQgZnJpZW5kcykgaXMKPiBhY3RpdmUsIGFuZCB3ZSBkbyBub3QgY29uc2lkZXIgdGhlIEdQ
VSBpZGxlIHVudGlsIGFsbCBvdXRzdGFuZGluZwo+IHJlcXVlc3RzIGhhdmUgYmVlbiByZXRpcmVk
IGFuZCB0aGUgZW5naW5lIHN3aXRjaGVkIG92ZXIgdG8gdGhlIGtlcm5lbAo+IGNvbnRleHQuIElm
IHVzZXJzcGFjZSBpcyBpZGxlLCB0aGlzIHRhc2sgZmFsbHMgb250byBvdXIgYmFja2dyb3VuZCBp
ZGxlCj4gd29ya2VyLCB3aGljaCBvbmx5IHJ1bnMgcm91Z2hseSBvbmNlIGEgc2Vjb25kLCBtZWFu
aW5nIHRoYXQgdXNlcnNwYWNlIGhhcwo+IHRvIGhhdmUgYmVlbiBpZGxlIGZvciBhIGNvdXBsZSBv
ZiBzZWNvbmRzIGJlZm9yZSB3ZSBlbmFibGUgUkM2IGFnYWluLgo+IE5hdHVyYWxseSwgdGhpcyBj
YXVzZXMgdXMgdG8gY29uc3VtZSBjb25zaWRlcmFibHkgbW9yZSBlbmVyZ3kgdGhhbgo+IGJlZm9y
ZSBhcyBwb3dlcnNhdmluZyBpcyBlZmZlY3RpdmVseSBkaXNhYmxlZCB3aGlsZSBhIGRpc3BsYXkg
c2VydmVyCj4gKGhlcmUncyBsb29raW5nIGF0IHlvdSBYb3JnKSBpcyBydW5uaW5nLgo+IAo+IEFz
IGV4ZWNsaXN0cyB3aWxsIGdldCBhIGNvbXBsZXRpb24gZXZlbnQgYXMgZWFjaCBjb250ZXh0IGlz
IGNvbXBsZXRlZCwKPiB3ZSBjYW4gdXNlIHRoaXMgaW50ZXJydXB0IHRvIHF1ZXVlIGEgcmV0aXJl
IHdvcmtlciBib3VuZCB0byB0aGlzIGVuZ2luZQo+IHRvIGNsZWFudXAgaWRsZSB0aW1lbGluZXMu
IFdlIHdpbGwgdGhlbiBpbW1lZGlhdGVseSBub3RpY2UgdGhlIGlkbGUKPiBlbmdpbmUgKHdpdGhv
dXQgdXNlcnNwYWNlIGludGVydmVudGlvbiBvciB0aGUgYWlkIG9mIHRoZSBiYWNrZ3JvdW5kCj4g
cmV0aXJlIHdvcmtlcikgYW5kIHN0YXJ0IHBhcmtpbmcgdGhlIEdQVS4gVGh1cyBkdXJpbmcgbGln
aHQgd29ya2xvYWRzLAo+IHdlIHdpbGwgZG8gbXVjaCBtb3JlIHdvcmsgdG8gaWRsZSB0aGUgR1BV
IGZhc3Rlci4uLiAgSG9wZWZ1bGx5IHdpdGgKPiBjb21tZW5zdXJhdGUgcG93ZXIgc2F2aW5nIQo+
IAo+IHYyOiBXYXRjaCBjb250ZXh0IGNvbXBsZXRpb25zIGFuZCBvbmx5IGxvb2sgYXQgdGhvc2Ug
bG9jYWwgdG8gdGhlIGVuZ2luZQo+IHdoZW4gcmV0aXJpbmcgdG8gcmVkdWNlIHRoZSBhbW91bnQg
b2YgZXhjZXNzIHdvcmsgd2UgcGVyZm9ybS4KPiAKPiBSZWZlcmVuY2VzOiBodHRwczovL2J1Z3Mu
ZnJlZWRlc2t0b3Aub3JnL3Nob3dfYnVnLmNnaT9pZD0xMTIzMTUKPiBSZWZlcmVuY2VzOiA3ZTM0
ZjRlNGFhZDMgKCJkcm0vaTkxNS9nZW44KzogQWRkIFJDNiBDVFggY29ycnVwdGlvbiBXQSIpCj4g
UmVmZXJlbmNlczogMjI0OGEyODM4NGZlICgiZHJtL2k5MTUvZ2VuOCs6IEFkZCBSQzYgQ1RYIGNv
cnJ1cHRpb24gV0EiKQo+IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMt
d2lsc29uLmNvLnVrPgo+IENjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwu
Y29tPgoKUmV2aWV3ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5j
b20+CgpSZWdhcmRzLAoKVHZydGtvCgo+IC0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfZW5naW5lX2NzLmMgICAgIHwgIDggKy0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZV90eXBlcy5oICB8ICA4ICsrCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ndF9yZXF1ZXN0cy5jICAgfCA3MyArKysrKysrKysrKysrKysrKysrCj4gICBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9yZXF1ZXN0cy5oICAgfCAxMiArKy0KPiAgIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAgICAgICAgICB8ICA5ICsrKwo+ICAg
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuYyAgICAgIHwgIDEgKwo+ICAg
Li4uL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZV90eXBlcy5oICAgIHwgIDMgKwo+ICAg
NyBmaWxlcyBjaGFuZ2VkLCAxMTAgaW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMoLSkKPiAKPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwo+IGluZGV4IGI5NjEzZDA0
NDM5My4uOGY2ZTM1M2NhYTY2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZV9jcy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
ZW5naW5lX2NzLmMKPiBAQCAtMjgsMTMgKzI4LDEzIEBACj4gICAKPiAgICNpbmNsdWRlICJpOTE1
X2Rydi5oIgo+ICAgCj4gLSNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgo+IC0KPiArI2luY2x1ZGUg
ImludGVsX2NvbnRleHQuaCIKPiAgICNpbmNsdWRlICJpbnRlbF9lbmdpbmUuaCIKPiAgICNpbmNs
dWRlICJpbnRlbF9lbmdpbmVfcG0uaCIKPiAgICNpbmNsdWRlICJpbnRlbF9lbmdpbmVfcG9vbC5o
Igo+ICAgI2luY2x1ZGUgImludGVsX2VuZ2luZV91c2VyLmgiCj4gLSNpbmNsdWRlICJpbnRlbF9j
b250ZXh0LmgiCj4gKyNpbmNsdWRlICJpbnRlbF9ndC5oIgo+ICsjaW5jbHVkZSAiaW50ZWxfZ3Rf
cmVxdWVzdHMuaCIKPiAgICNpbmNsdWRlICJpbnRlbF9scmMuaCIKPiAgICNpbmNsdWRlICJpbnRl
bF9yZXNldC5oIgo+ICAgI2luY2x1ZGUgImludGVsX3JpbmcuaCIKPiBAQCAtNjE3LDYgKzYxNyw3
IEBAIHN0YXRpYyBpbnQgaW50ZWxfZW5naW5lX3NldHVwX2NvbW1vbihzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUpCj4gICAJaW50ZWxfZW5naW5lX2luaXRfZXhlY2xpc3RzKGVuZ2luZSk7
Cj4gICAJaW50ZWxfZW5naW5lX2luaXRfY21kX3BhcnNlcihlbmdpbmUpOwo+ICAgCWludGVsX2Vu
Z2luZV9pbml0X19wbShlbmdpbmUpOwo+ICsJaW50ZWxfZW5naW5lX2luaXRfcmV0aXJlKGVuZ2lu
ZSk7Cj4gICAKPiAgIAlpbnRlbF9lbmdpbmVfcG9vbF9pbml0KCZlbmdpbmUtPnBvb2wpOwo+ICAg
Cj4gQEAgLTgzOSw2ICs4NDAsNyBAQCB2b2lkIGludGVsX2VuZ2luZV9jbGVhbnVwX2NvbW1vbihz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCj4gICAKPiAgIAljbGVhbnVwX3N0YXR1c19w
YWdlKGVuZ2luZSk7Cj4gICAKPiArCWludGVsX2VuZ2luZV9maW5pX3JldGlyZShlbmdpbmUpOwo+
ICAgCWludGVsX2VuZ2luZV9wb29sX2ZpbmkoJmVuZ2luZS0+cG9vbCk7Cj4gICAJaW50ZWxfZW5n
aW5lX2ZpbmlfYnJlYWRjcnVtYnMoZW5naW5lKTsKPiAgIAlpbnRlbF9lbmdpbmVfY2xlYW51cF9j
bWRfcGFyc2VyKGVuZ2luZSk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZV90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5n
aW5lX3R5cGVzLmgKPiBpbmRleCA3NThmMGU4ZWM2NzIuLjE3ZjFmMTQ0MWVmYyAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCj4gQEAgLTQ1MSw2
ICs0NTEsMTQgQEAgc3RydWN0IGludGVsX2VuZ2luZV9jcyB7Cj4gICAKPiAgIAlzdHJ1Y3QgaW50
ZWxfZW5naW5lX2V4ZWNsaXN0cyBleGVjbGlzdHM7Cj4gICAKPiArCS8qCj4gKwkgKiBLZWVwIHRy
YWNrIG9mIGNvbXBsZXRlZCB0aW1lbGluZXMgb24gdGhpcyBlbmdpbmUgZm9yIGVhcmx5Cj4gKwkg
KiByZXRpcmVtZW50IHdpdGggdGhlIGdvYWwgb2YgcXVpY2tseSBlbmFibGluZyBwb3dlcnNhdmlu
ZyBhcwo+ICsJICogc29vbiBhcyB0aGUgZW5naW5lIGlzIGlkbGUuCj4gKwkgKi8KPiArCXN0cnVj
dCBpbnRlbF90aW1lbGluZSAqcmV0aXJlOwo+ICsJc3RydWN0IHdvcmtfc3RydWN0IHJldGlyZV93
b3JrOwo+ICsKPiAgIAkvKiBzdGF0dXNfbm90aWZpZXI6IGxpc3Qgb2YgY2FsbGJhY2tzIGZvciBj
b250ZXh0LXN3aXRjaCBjaGFuZ2VzICovCj4gICAJc3RydWN0IGF0b21pY19ub3RpZmllcl9oZWFk
IGNvbnRleHRfc3RhdHVzX25vdGlmaWVyOwo+ICAgCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2d0X3JlcXVlc3RzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ndF9yZXF1ZXN0cy5jCj4gaW5kZXggODE5YTI2NmE4ZjI5Li41NjM5Mzk4ZTlmNjAg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcmVxdWVzdHMu
Ywo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3JlcXVlc3RzLmMKPiBA
QCAtMjksNiArMjksNzkgQEAgc3RhdGljIHZvaWQgZmx1c2hfc3VibWlzc2lvbihzdHJ1Y3QgaW50
ZWxfZ3QgKmd0KQo+ICAgCQlpbnRlbF9lbmdpbmVfZmx1c2hfc3VibWlzc2lvbihlbmdpbmUpOwo+
ICAgfQo+ICAgCj4gK3N0YXRpYyB2b2lkIGVuZ2luZV9yZXRpcmUoc3RydWN0IHdvcmtfc3RydWN0
ICp3b3JrKQo+ICt7Cj4gKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUgPQo+ICsJCWNv
bnRhaW5lcl9vZih3b3JrLCB0eXBlb2YoKmVuZ2luZSksIHJldGlyZV93b3JrKTsKPiArCXN0cnVj
dCBpbnRlbF90aW1lbGluZSAqdGwgPSB4Y2hnKCZlbmdpbmUtPnJldGlyZSwgTlVMTCk7Cj4gKwo+
ICsJZG8gewo+ICsJCXN0cnVjdCBpbnRlbF90aW1lbGluZSAqbmV4dCA9IHhjaGcoJnRsLT5yZXRp
cmUsIE5VTEwpOwo+ICsKPiArCQkvKgo+ICsJCSAqIE91ciBnb2FsIGhlcmUgaXMgdG8gcmV0aXJl
IF9pZGxlXyB0aW1lbGluZXMgYXMgc29vbiBhcwo+ICsJCSAqIHBvc3NpYmxlIChhcyB0aGV5IGFy
ZSBpZGxlLCB3ZSBkbyBub3QgZXhwZWN0IHVzZXJzcGFjZQo+ICsJCSAqIHRvIGJlIGNsZWFuaW5n
IHVwIGFueXRpbWUgc29vbikuCj4gKwkJICoKPiArCQkgKiBJZiB0aGUgdGltZWxpbmUgaXMgY3Vy
cmVudGx5IGxvY2tlZCwgZWl0aGVyIGl0IGlzIGJlaW5nCj4gKwkJICogcmV0aXJlZCBlbHNld2hl
cmUgb3IgYWJvdXQgdG8gYmUhCj4gKwkJICovCj4gKwkJaWYgKG11dGV4X3RyeWxvY2soJnRsLT5t
dXRleCkpIHsKPiArCQkJcmV0aXJlX3JlcXVlc3RzKHRsKTsKPiArCQkJbXV0ZXhfdW5sb2NrKCZ0
bC0+bXV0ZXgpOwo+ICsJCX0KPiArCQlpbnRlbF90aW1lbGluZV9wdXQodGwpOwo+ICsKPiArCQlH
RU1fQlVHX09OKCFuZXh0KTsKPiArCQl0bCA9IHB0cl9tYXNrX2JpdHMobmV4dCwgMSk7Cj4gKwl9
IHdoaWxlICh0bCk7Cj4gK30KPiArCj4gK3N0YXRpYyBib29sIGFkZF9yZXRpcmUoc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lLAo+ICsJCSAgICAgICBzdHJ1Y3QgaW50ZWxfdGltZWxpbmUg
KnRsKQo+ICt7Cj4gKwlzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKmZpcnN0Owo+ICsKPiArCS8qCj4g
KwkgKiBXZSBvcGVuLWNvZGUgYSBsbGlzdCBoZXJlIHRvIGluY2x1ZGUgdGhlIGFkZGl0aW9uYWwg
dGFnIFtCSVQoMCldCj4gKwkgKiBzbyB0aGF0IHdlIGtub3cgd2hlbiB0aGUgdGltZWxpbmUgaXMg
YWxyZWFkeSBvbiBhCj4gKwkgKiByZXRpcmVtZW50IHF1ZXVlOiBlaXRoZXIgdGhpcyBlbmdpbmUg
b3IgYW5vdGhlci4KPiArCSAqCj4gKwkgKiBIb3dldmVyLCB3ZSByZWx5IG9uIHRoYXQgYSB0aW1l
bGluZSBjYW4gb25seSBiZSBhY3RpdmUgb24gYSBzaW5nbGUKPiArCSAqIGVuZ2luZSBhdCBhbnkg
b25lIHRpbWUgYW5kIHRoYXQgYWRkX3JldGlyZSgpIGlzIGNhbGxlZCBiZWZvcmUgdGhlCj4gKwkg
KiBlbmdpbmUgcmVsZWFzZXMgdGhlIHRpbWVsaW5lIGFuZCB0cmFuc2ZlcnJlZCB0byBhbm90aGVy
IHRvIHJldGlyZS4KPiArCSAqLwo+ICsKPiArCWlmIChSRUFEX09OQ0UodGwtPnJldGlyZSkpIC8q
IGFscmVhZHkgcXVldWVkICovCj4gKwkJcmV0dXJuIGZhbHNlOwo+ICsKPiArCWludGVsX3RpbWVs
aW5lX2dldCh0bCk7Cj4gKwlmaXJzdCA9IFJFQURfT05DRShlbmdpbmUtPnJldGlyZSk7Cj4gKwlk
bwo+ICsJCXRsLT5yZXRpcmUgPSBwdHJfcGFja19iaXRzKGZpcnN0LCAxLCAxKTsKPiArCXdoaWxl
ICghdHJ5X2NtcHhjaGcoJmVuZ2luZS0+cmV0aXJlLCAmZmlyc3QsIHRsKSk7Cj4gKwo+ICsJcmV0
dXJuICFmaXJzdDsKPiArfQo+ICsKPiArdm9pZCBpbnRlbF9lbmdpbmVfYWRkX3JldGlyZShzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCj4gKwkJCSAgICAgc3RydWN0IGludGVsX3RpbWVs
aW5lICp0bCkKPiArewo+ICsJaWYgKGFkZF9yZXRpcmUoZW5naW5lLCB0bCkpCj4gKwkJc2NoZWR1
bGVfd29yaygmZW5naW5lLT5yZXRpcmVfd29yayk7Cj4gK30KPiArCj4gK3ZvaWQgaW50ZWxfZW5n
aW5lX2luaXRfcmV0aXJlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiArewo+ICsJ
SU5JVF9XT1JLKCZlbmdpbmUtPnJldGlyZV93b3JrLCBlbmdpbmVfcmV0aXJlKTsKPiArfQo+ICsK
PiArdm9pZCBpbnRlbF9lbmdpbmVfZmluaV9yZXRpcmUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lKQo+ICt7Cj4gKwlmbHVzaF93b3JrKCZlbmdpbmUtPnJldGlyZV93b3JrKTsKPiArCUdF
TV9CVUdfT04oZW5naW5lLT5yZXRpcmUpOwo+ICt9Cj4gKwo+ICAgbG9uZyBpbnRlbF9ndF9yZXRp
cmVfcmVxdWVzdHNfdGltZW91dChzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCBsb25nIHRpbWVvdXQpCj4g
ICB7Cj4gICAJc3RydWN0IGludGVsX2d0X3RpbWVsaW5lcyAqdGltZWxpbmVzID0gJmd0LT50aW1l
bGluZXM7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3Jl
cXVlc3RzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9yZXF1ZXN0cy5oCj4g
aW5kZXggZmRlNTQ2NDI0YzYzLi4yNTJjNjA2NDk4OWMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcmVxdWVzdHMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2d0X3JlcXVlc3RzLmgKPiBAQCAtNyw3ICs3LDEyIEBACj4gICAjaWZu
ZGVmIElOVEVMX0dUX1JFUVVFU1RTX0gKPiAgICNkZWZpbmUgSU5URUxfR1RfUkVRVUVTVFNfSAo+
ICAgCj4gLXN0cnVjdCBpbnRlbF9ndDsKPiArI2luY2x1ZGUgPGxpbnV4L3dvcmtxdWV1ZS5oPgo+
ICsKPiArI2luY2x1ZGUgImludGVsX2d0X3R5cGVzLmgiCj4gKwo+ICtzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzOwo+ICtzdHJ1Y3QgaW50ZWxfdGltZWxpbmU7Cj4gICAKPiAgIGxvbmcgaW50ZWxfZ3Rf
cmV0aXJlX3JlcXVlc3RzX3RpbWVvdXQoc3RydWN0IGludGVsX2d0ICpndCwgbG9uZyB0aW1lb3V0
KTsKPiAgIHN0YXRpYyBpbmxpbmUgdm9pZCBpbnRlbF9ndF9yZXRpcmVfcmVxdWVzdHMoc3RydWN0
IGludGVsX2d0ICpndCkKPiBAQCAtMTUsNiArMjAsMTEgQEAgc3RhdGljIGlubGluZSB2b2lkIGlu
dGVsX2d0X3JldGlyZV9yZXF1ZXN0cyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQo+ICAgCWludGVsX2d0
X3JldGlyZV9yZXF1ZXN0c190aW1lb3V0KGd0LCAwKTsKPiAgIH0KPiAgIAo+ICt2b2lkIGludGVs
X2VuZ2luZV9pbml0X3JldGlyZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwo+ICt2
b2lkIGludGVsX2VuZ2luZV9hZGRfcmV0aXJlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZSwKPiArCQkJICAgICBzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRsKTsKPiArdm9pZCBpbnRlbF9l
bmdpbmVfZmluaV9yZXRpcmUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKPiArCj4g
ICBpbnQgaW50ZWxfZ3Rfd2FpdF9mb3JfaWRsZShzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCBsb25nIHRp
bWVvdXQpOwo+ICAgCj4gICB2b2lkIGludGVsX2d0X2luaXRfcmVxdWVzdHMoc3RydWN0IGludGVs
X2d0ICpndCk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xy
Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiBpbmRleCAwZTIwNjVh
MTNmMjQuLjA2MmRkOGFjNDcyYSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9scmMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5j
Cj4gQEAgLTE0Miw2ICsxNDIsNyBAQAo+ICAgI2luY2x1ZGUgImludGVsX2VuZ2luZV9wbS5oIgo+
ICAgI2luY2x1ZGUgImludGVsX2d0LmgiCj4gICAjaW5jbHVkZSAiaW50ZWxfZ3RfcG0uaCIKPiAr
I2luY2x1ZGUgImludGVsX2d0X3JlcXVlc3RzLmgiCj4gICAjaW5jbHVkZSAiaW50ZWxfbHJjX3Jl
Zy5oIgo+ICAgI2luY2x1ZGUgImludGVsX21vY3MuaCIKPiAgICNpbmNsdWRlICJpbnRlbF9yZXNl
dC5oIgo+IEBAIC0xMTcwLDYgKzExNzEsMTQgQEAgX19leGVjbGlzdHNfc2NoZWR1bGVfb3V0KHN0
cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAo+ICAgCSAqIHJlZnJhaW4gZnJvbSBkb2luZyBub24tdHJp
dmlhbCB3b3JrIGhlcmUuCj4gICAJICovCj4gICAKPiArCS8qCj4gKwkgKiBJZiB3ZSBoYXZlIGp1
c3QgY29tcGxldGVkIHRoaXMgY29udGV4dCwgdGhlIGVuZ2luZSBtYXkgbm93IGJlCj4gKwkgKiBp
ZGxlIGFuZCB3ZSB3YW50IHRvIHJlLWVudGVyIHBvd2Vyc2F2aW5nLgo+ICsJICovCj4gKwlpZiAo
bGlzdF9pc19sYXN0KCZycS0+bGluaywgJmNlLT50aW1lbGluZS0+cmVxdWVzdHMpICYmCj4gKwkg
ICAgaTkxNV9yZXF1ZXN0X2NvbXBsZXRlZChycSkpCj4gKwkJaW50ZWxfZW5naW5lX2FkZF9yZXRp
cmUoZW5naW5lLCBjZS0+dGltZWxpbmUpOwo+ICsKPiAgIAlpbnRlbF9lbmdpbmVfY29udGV4dF9v
dXQoZW5naW5lKTsKPiAgIAlleGVjbGlzdHNfY29udGV4dF9zdGF0dXNfY2hhbmdlKHJxLCBJTlRF
TF9DT05URVhUX1NDSEVEVUxFX09VVCk7Cj4gICAJaW50ZWxfZ3RfcG1fcHV0X2FzeW5jKGVuZ2lu
ZS0+Z3QpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1l
bGluZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuYwo+IGluZGV4
IGIxOTBhNWQ5YWIwMi4uYzFkMjQxOTQ0NGY4IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX3RpbWVsaW5lLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF90aW1lbGluZS5jCj4gQEAgLTI3Nyw2ICsyNzcsNyBAQCB2b2lkIGludGVsX3RpbWVs
aW5lX2Zpbmkoc3RydWN0IGludGVsX3RpbWVsaW5lICp0aW1lbGluZSkKPiAgIHsKPiAgIAlHRU1f
QlVHX09OKGF0b21pY19yZWFkKCZ0aW1lbGluZS0+cGluX2NvdW50KSk7Cj4gICAJR0VNX0JVR19P
TighbGlzdF9lbXB0eSgmdGltZWxpbmUtPnJlcXVlc3RzKSk7Cj4gKwlHRU1fQlVHX09OKHRpbWVs
aW5lLT5yZXRpcmUpOwo+ICAgCj4gICAJaWYgKHRpbWVsaW5lLT5od3NwX2NhY2hlbGluZSkKPiAg
IAkJY2FjaGVsaW5lX2ZyZWUodGltZWxpbmUtPmh3c3BfY2FjaGVsaW5lKTsKPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmVfdHlwZXMuaCBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3RpbWVsaW5lX3R5cGVzLmgKPiBpbmRleCA1MjQ0NjE1
ZWQxY2IuLmFhZjE1Y2JlMWNlMSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF90aW1lbGluZV90eXBlcy5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfdGltZWxpbmVfdHlwZXMuaAo+IEBAIC02Niw2ICs2Niw5IEBAIHN0cnVjdCBpbnRlbF90
aW1lbGluZSB7Cj4gICAJICovCj4gICAJc3RydWN0IGk5MTVfYWN0aXZlX2ZlbmNlIGxhc3RfcmVx
dWVzdDsKPiAgIAo+ICsJLyoqIEEgY2hhaW4gb2YgY29tcGxldGVkIHRpbWVsaW5lcyByZWFkeSBm
b3IgZWFybHkgcmV0aXJlbWVudC4gKi8KPiArCXN0cnVjdCBpbnRlbF90aW1lbGluZSAqcmV0aXJl
Owo+ICsKPiAgIAkvKioKPiAgIAkgKiBXZSB0cmFjayB0aGUgbW9zdCByZWNlbnQgc2Vxbm8gdGhh
dCB3ZSB3YWl0IG9uIGluIGV2ZXJ5IGNvbnRleHQgc28KPiAgIAkgKiB0aGF0IHdlIG9ubHkgaGF2
ZSB0byBlbWl0IGEgbmV3IGF3YWl0IGFuZCBkZXBlbmRlbmN5IG9uIGEgbW9yZQo+IApfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGlu
ZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

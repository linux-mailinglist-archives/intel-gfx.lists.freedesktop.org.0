Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 233863C944
	for <lists+intel-gfx@lfdr.de>; Tue, 11 Jun 2019 12:46:02 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 73553891B1;
	Tue, 11 Jun 2019 10:46:00 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7574D89159
 for <Intel-gfx@lists.freedesktop.org>; Tue, 11 Jun 2019 10:45:54 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 11 Jun 2019 03:45:53 -0700
X-ExtLoop1: 1
Received: from nmanovic-mobl.ccr.corp.intel.com (HELO localhost.localdomain)
 ([10.252.13.223])
 by orsmga003.jf.intel.com with ESMTP; 11 Jun 2019 03:45:52 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Tue, 11 Jun 2019 11:45:47 +0100
Message-Id: <20190611104548.30545-5-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190611104548.30545-1-tvrtko.ursulin@linux.intel.com>
References: <20190611104548.30545-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 5/6] drm/i915: Remove I915_READ_NOTRACE
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCk9ubHkgYSBm
ZXcgY2FsbCBzaXRlcyByZW1haW4gd2hpY2ggaGF2ZSBiZWVuIGNvbnZlcnRlZCB0byB1bmNvcmUg
bW1pbwphY2Nlc3NvcnMgYW5kIHNvIHRoZSBtYWNybyBjYW4gYmUgcmVtb3ZlZC4KClNpZ25lZC1v
ZmYtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+ClJldmlld2Vk
LWJ5OiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1bGFAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2d2dC9kZWJ1Z2ZzLmMgIHwgIDQgKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dnQvZmlybXdhcmUuYyB8ICA1ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMg
ICAgIHwgIDYgKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgfCAgMSAt
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BtdS5jICAgICB8ICA4ICsrKystLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfZHAuYyAgICAgfCA0MyArKysrKysrKysrKysrKystLS0tLS0t
LS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ21idXMuYyAgfCAxMSArKysrLS0t
LQogNyBmaWxlcyBjaGFuZ2VkLCA0MyBpbnNlcnRpb25zKCspLCAzNSBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvZGVidWdmcy5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3Z0L2RlYnVnZnMuYwppbmRleCA4YTk2MDZmOTFlNjguLjJmYjdiNzNiMjYw
ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2RlYnVnZnMuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvZGVidWdmcy5jCkBAIC01OCwxMiArNTgsMTIgQEAgc3Rh
dGljIGludCBtbWlvX29mZnNldF9jb21wYXJlKHZvaWQgKnByaXYsCiBzdGF0aWMgaW5saW5lIGlu
dCBtbWlvX2RpZmZfaGFuZGxlcihzdHJ1Y3QgaW50ZWxfZ3Z0ICpndnQsCiAJCQkJICAgIHUzMiBv
ZmZzZXQsIHZvaWQgKmRhdGEpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
ID0gZ3Z0LT5kZXZfcHJpdjsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGd2dC0+
ZGV2X3ByaXY7CiAJc3RydWN0IG1taW9fZGlmZl9wYXJhbSAqcGFyYW0gPSBkYXRhOwogCXN0cnVj
dCBkaWZmX21taW8gKm5vZGU7CiAJdTMyIHByZWcsIHZyZWc7CiAKLQlwcmVnID0gSTkxNV9SRUFE
X05PVFJBQ0UoX01NSU8ob2Zmc2V0KSk7CisJcHJlZyA9IGludGVsX3VuY29yZV9yZWFkX25vdHJh
Y2UoJmk5MTUtPnVuY29yZSwgX01NSU8ob2Zmc2V0KSk7CiAJdnJlZyA9IHZncHVfdnJlZyhwYXJh
bS0+dmdwdSwgb2Zmc2V0KTsKIAogCWlmIChwcmVnICE9IHZyZWcpIHsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9maXJtd2FyZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3Z0L2Zpcm13YXJlLmMKaW5kZXggNGFjMThiNDQ3MjQ3Li4wNDk3NzVlOGUzNTAgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9maXJtd2FyZS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d2dC9maXJtd2FyZS5jCkBAIC02OCw5ICs2OCwxMCBAQCBzdGF0aWMgc3RydWN0
IGJpbl9hdHRyaWJ1dGUgZmlybXdhcmVfYXR0ciA9IHsKIAogc3RhdGljIGludCBtbWlvX3NuYXBz
aG90X2hhbmRsZXIoc3RydWN0IGludGVsX2d2dCAqZ3Z0LCB1MzIgb2Zmc2V0LCB2b2lkICpkYXRh
KQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGd2dC0+ZGV2X3ByaXY7
CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBndnQtPmRldl9wcml2OwogCi0JKih1
MzIgKikoZGF0YSArIG9mZnNldCkgPSBJOTE1X1JFQURfTk9UUkFDRShfTU1JTyhvZmZzZXQpKTsK
KwkqKHUzMiAqKShkYXRhICsgb2Zmc2V0KSA9IGludGVsX3VuY29yZV9yZWFkX25vdHJhY2UoJmk5
MTUtPnVuY29yZSwKKwkJCQkJCQkgICAgX01NSU8ob2Zmc2V0KSk7CiAJcmV0dXJuIDA7CiB9CiAK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2Rydi5jCmluZGV4IDFhZjY3NTFlMWIzNi4uODFmZjJjNzhmZDU1IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKQEAgLTI3MDgsNyArMjcwOCw3IEBAIHN0YXRpYyB2b2lk
IHZsdl9yZXN0b3JlX2d1bml0X3MwaXhfc3RhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2KQogCUk5MTVfV1JJVEUoVkxWX0dVTklUX0NMT0NLX0dBVEUyLAlzLT5jbG9ja19nYXRl
X2RpczIpOwogfQogCi1zdGF0aWMgaW50IHZsdl93YWl0X2Zvcl9wd19zdGF0dXMoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAorc3RhdGljIGludCB2bHZfd2FpdF9mb3JfcHdfc3Rh
dHVzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCQkJCSAgdTMyIG1hc2ssIHUzMiB2
YWwpCiB7CiAJaTkxNV9yZWdfdCByZWcgPSBWTFZfR1RMQ19QV19TVEFUVVM7CkBAIC0yNzIyLDcg
KzI3MjIsOSBAQCBzdGF0aWMgaW50IHZsdl93YWl0X2Zvcl9wd19zdGF0dXMoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2LAogCSAqIFRyYW5zaXRpb25pbmcgYmV0d2VlbiBSQzYgc3Rh
dGVzIHNob3VsZCBiZSBhdCBtb3N0IDJtcyAoc2VlCiAJICogdmFsbGV5dmlld19lbmFibGVfcnBz
KSBzbyB1c2UgYSAzbXMgdGltZW91dC4KIAkgKi8KLQlyZXQgPSB3YWl0X2ZvcigoKHJlZ192YWx1
ZSA9IEk5MTVfUkVBRF9OT1RSQUNFKHJlZykpICYgbWFzaykgPT0gdmFsLCAzKTsKKwlyZXQgPSB3
YWl0X2ZvcigoKHJlZ192YWx1ZSA9CisJCQkgaW50ZWxfdW5jb3JlX3JlYWRfbm90cmFjZSgmaTkx
NS0+dW5jb3JlLCByZWcpKSAmIG1hc2spCisJCSAgICAgICA9PSB2YWwsIDMpOwogCiAJLyoganVz
dCB0cmFjZSB0aGUgZmluYWwgdmFsdWUgKi8KIAl0cmFjZV9pOTE1X3JlZ19ydyhmYWxzZSwgcmVn
LCByZWdfdmFsdWUsIHNpemVvZihyZWdfdmFsdWUpLCB0cnVlKTsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5oCmluZGV4IDMwNjU2NTQzMTU5Yi4uNjY0OThkMDEwYzM5IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmgKQEAgLTI4NDYsNyArMjg0Niw2IEBAIGV4dGVybiB2b2lkIGludGVsX2Rpc3BsYXlfcHJp
bnRfZXJyb3Jfc3RhdGUoc3RydWN0IGRybV9pOTE1X2Vycm9yX3N0YXRlX2J1ZiAqZSwKIAogI2Rl
ZmluZSBJOTE1X1JFQUQocmVnX18pCSBfX0k5MTVfUkVHX09QKHJlYWQsIGRldl9wcml2LCAocmVn
X18pKQogI2RlZmluZSBJOTE1X1dSSVRFKHJlZ19fLCB2YWxfXykgX19JOTE1X1JFR19PUCh3cml0
ZSwgZGV2X3ByaXYsIChyZWdfXyksICh2YWxfXykpCi0jZGVmaW5lIEk5MTVfUkVBRF9OT1RSQUNF
KHJlZ19fKQkgX19JOTE1X1JFR19PUChyZWFkX25vdHJhY2UsIGRldl9wcml2LCAocmVnX18pKQog
CiAjZGVmaW5lIFBPU1RJTkdfUkVBRChyZWdfXykJX19JOTE1X1JFR19PUChwb3N0aW5nX3JlYWQs
IGRldl9wcml2LCAocmVnX18pKQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3BtdS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wbXUuYwppbmRleCAxY2NkYTBl
ZTRmZjUuLmViOWMwZTBlNTQ1YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9wbXUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BtdS5jCkBAIC0yMjcsOSAr
MjI3LDExIEBAIGZyZXF1ZW5jeV9zYW1wbGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LCB1bnNpZ25lZCBpbnQgcGVyaW9kX25zKQogCQlpZiAoZGV2X3ByaXYtPmd0LmF3YWtlKSB7
CiAJCQlpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZjsKIAotCQkJd2l0aF9pbnRlbF9ydW50aW1lX3Bt
X2lmX2luX3VzZShkZXZfcHJpdiwgd2FrZXJlZikKLQkJCQl2YWwgPSBpbnRlbF9nZXRfY2FnZihk
ZXZfcHJpdiwKLQkJCQkJCSAgICAgSTkxNV9SRUFEX05PVFJBQ0UoR0VONl9SUFNUQVQxKSk7CisJ
CQl3aXRoX2ludGVsX3J1bnRpbWVfcG1faWZfaW5fdXNlKGRldl9wcml2LCB3YWtlcmVmKSB7CisJ
CQkJdmFsID0gaW50ZWxfdW5jb3JlX3JlYWRfbm90cmFjZSgmZGV2X3ByaXYtPnVuY29yZSwKKwkJ
CQkJCQkJR0VONl9SUFNUQVQxKTsKKwkJCQl2YWwgPSBpbnRlbF9nZXRfY2FnZihkZXZfcHJpdiwg
dmFsKTsKKwkJCX0KIAkJfQogCiAJCWFkZF9zYW1wbGVfbXVsdCgmZGV2X3ByaXYtPnBtdS5zYW1w
bGVbX19JOTE1X1NBTVBMRV9GUkVRX0FDVF0sCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9kcC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHAuYwppbmRleCAz
YWVmMTIwNDE2NzIuLjQzMzZkZjQ2ZmU3OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfZHAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcC5jCkBAIC0x
MDgyLDEzICsxMDgyLDEzIEBAIGludGVsX2RwX2NoZWNrX2VkcChzdHJ1Y3QgaW50ZWxfZHAgKmlu
dGVsX2RwKQogc3RhdGljIHUzMgogaW50ZWxfZHBfYXV4X3dhaXRfZG9uZShzdHJ1Y3QgaW50ZWxf
ZHAgKmludGVsX2RwKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGRw
X3RvX2k5MTUoaW50ZWxfZHApOworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gZHBf
dG9faTkxNShpbnRlbF9kcCk7CiAJaTkxNV9yZWdfdCBjaF9jdGwgPSBpbnRlbF9kcC0+YXV4X2No
X2N0bF9yZWcoaW50ZWxfZHApOwogCXUzMiBzdGF0dXM7CiAJYm9vbCBkb25lOwogCi0jZGVmaW5l
IEMgKCgoc3RhdHVzID0gSTkxNV9SRUFEX05PVFJBQ0UoY2hfY3RsKSkgJiBEUF9BVVhfQ0hfQ1RM
X1NFTkRfQlVTWSkgPT0gMCkKLQlkb25lID0gd2FpdF9ldmVudF90aW1lb3V0KGRldl9wcml2LT5n
bWJ1c193YWl0X3F1ZXVlLCBDLAorI2RlZmluZSBDICgoKHN0YXR1cyA9IGludGVsX3VuY29yZV9y
ZWFkX25vdHJhY2UoJmk5MTUtPnVuY29yZSwgY2hfY3RsKSkgJiBEUF9BVVhfQ0hfQ1RMX1NFTkRf
QlVTWSkgPT0gMCkKKwlkb25lID0gd2FpdF9ldmVudF90aW1lb3V0KGk5MTUtPmdtYnVzX3dhaXRf
cXVldWUsIEMsCiAJCQkJICBtc2Vjc190b19qaWZmaWVzX3RpbWVvdXQoMTApKTsKIAogCS8qIGp1
c3QgdHJhY2UgdGhlIGZpbmFsIHZhbHVlICovCkBAIC0xMjIxLDggKzEyMjEsOSBAQCBpbnRlbF9k
cF9hdXhfeGZlcihzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogCQkgIHUzMiBhdXhfc2VuZF9j
dGxfZmxhZ3MpCiB7CiAJc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQg
PSBkcF90b19kaWdfcG9ydChpbnRlbF9kcCk7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2ID0KKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9CiAJCQl0b19pOTE1KGlu
dGVsX2RpZ19wb3J0LT5iYXNlLmJhc2UuZGV2KTsKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNv
cmUgPSAmaTkxNS0+dW5jb3JlOwogCWk5MTVfcmVnX3QgY2hfY3RsLCBjaF9kYXRhWzVdOwogCXUz
MiBhdXhfY2xvY2tfZGl2aWRlcjsKIAllbnVtIGludGVsX2Rpc3BsYXlfcG93ZXJfZG9tYWluIGF1
eF9kb21haW4gPQpAQCAtMTIzOCw3ICsxMjM5LDcgQEAgaW50ZWxfZHBfYXV4X3hmZXIoc3RydWN0
IGludGVsX2RwICppbnRlbF9kcCwKIAlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShjaF9kYXRh
KTsgaSsrKQogCQljaF9kYXRhW2ldID0gaW50ZWxfZHAtPmF1eF9jaF9kYXRhX3JlZyhpbnRlbF9k
cCwgaSk7CiAKLQlhdXhfd2FrZXJlZiA9IGludGVsX2Rpc3BsYXlfcG93ZXJfZ2V0KGRldl9wcml2
LCBhdXhfZG9tYWluKTsKKwlhdXhfd2FrZXJlZiA9IGludGVsX2Rpc3BsYXlfcG93ZXJfZ2V0KGk5
MTUsIGF1eF9kb21haW4pOwogCXBwc193YWtlcmVmID0gcHBzX2xvY2soaW50ZWxfZHApOwogCiAJ
LyoKQEAgLTEyNTMsMTMgKzEyNTQsMTMgQEAgaW50ZWxfZHBfYXV4X3hmZXIoc3RydWN0IGludGVs
X2RwICppbnRlbF9kcCwKIAkgKiBsb3dlc3QgcG9zc2libGUgd2FrZXVwIGxhdGVuY3kgYW5kIHNv
IHByZXZlbnQgdGhlIGNwdSBmcm9tIGdvaW5nIGludG8KIAkgKiBkZWVwIHNsZWVwIHN0YXRlcy4K
IAkgKi8KLQlwbV9xb3NfdXBkYXRlX3JlcXVlc3QoJmRldl9wcml2LT5wbV9xb3MsIDApOworCXBt
X3Fvc191cGRhdGVfcmVxdWVzdCgmaTkxNS0+cG1fcW9zLCAwKTsKIAogCWludGVsX2RwX2NoZWNr
X2VkcChpbnRlbF9kcCk7CiAKIAkvKiBUcnkgdG8gd2FpdCBmb3IgYW55IHByZXZpb3VzIEFVWCBj
aGFubmVsIGFjdGl2aXR5ICovCiAJZm9yICh0cnkgPSAwOyB0cnkgPCAzOyB0cnkrKykgewotCQlz
dGF0dXMgPSBJOTE1X1JFQURfTk9UUkFDRShjaF9jdGwpOworCQlzdGF0dXMgPSBpbnRlbF91bmNv
cmVfcmVhZF9ub3RyYWNlKHVuY29yZSwgY2hfY3RsKTsKIAkJaWYgKChzdGF0dXMgJiBEUF9BVVhf
Q0hfQ1RMX1NFTkRfQlVTWSkgPT0gMCkKIAkJCWJyZWFrOwogCQltc2xlZXAoMSk7CkBAIC0xMjY5
LDcgKzEyNzAsNyBAQCBpbnRlbF9kcF9hdXhfeGZlcihzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2Rw
LAogCiAJaWYgKHRyeSA9PSAzKSB7CiAJCXN0YXRpYyB1MzIgbGFzdF9zdGF0dXMgPSAtMTsKLQkJ
Y29uc3QgdTMyIHN0YXR1cyA9IEk5MTVfUkVBRChjaF9jdGwpOworCQljb25zdCB1MzIgc3RhdHVz
ID0gaW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBjaF9jdGwpOwogCiAJCWlmIChzdGF0dXMgIT0g
bGFzdF9zdGF0dXMpIHsKIAkJCVdBUk4oMSwgImRwX2F1eF9jaCBub3Qgc3RhcnRlZCBzdGF0dXMg
MHglMDh4XG4iLApAQCAtMTI5OCwyMSArMTI5OSwyMyBAQCBpbnRlbF9kcF9hdXhfeGZlcihzdHJ1
Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogCQlmb3IgKHRyeSA9IDA7IHRyeSA8IDU7IHRyeSsrKSB7
CiAJCQkvKiBMb2FkIHRoZSBzZW5kIGRhdGEgaW50byB0aGUgYXV4IGNoYW5uZWwgZGF0YSByZWdp
c3RlcnMgKi8KIAkJCWZvciAoaSA9IDA7IGkgPCBzZW5kX2J5dGVzOyBpICs9IDQpCi0JCQkJSTkx
NV9XUklURShjaF9kYXRhW2kgPj4gMl0sCi0JCQkJCSAgIGludGVsX2RwX3BhY2tfYXV4KHNlbmQg
KyBpLAotCQkJCQkJCSAgICAgc2VuZF9ieXRlcyAtIGkpKTsKKwkJCQlpbnRlbF91bmNvcmVfd3Jp
dGUodW5jb3JlLAorCQkJCQkJICAgY2hfZGF0YVtpID4+IDJdLAorCQkJCQkJICAgaW50ZWxfZHBf
cGFja19hdXgoc2VuZCArIGksCisJCQkJCQkJCSAgICAgc2VuZF9ieXRlcyAtIGkpKTsKIAogCQkJ
LyogU2VuZCB0aGUgY29tbWFuZCBhbmQgd2FpdCBmb3IgaXQgdG8gY29tcGxldGUgKi8KLQkJCUk5
MTVfV1JJVEUoY2hfY3RsLCBzZW5kX2N0bCk7CisJCQlpbnRlbF91bmNvcmVfd3JpdGUodW5jb3Jl
LCBjaF9jdGwsIHNlbmRfY3RsKTsKIAogCQkJc3RhdHVzID0gaW50ZWxfZHBfYXV4X3dhaXRfZG9u
ZShpbnRlbF9kcCk7CiAKIAkJCS8qIENsZWFyIGRvbmUgc3RhdHVzIGFuZCBhbnkgZXJyb3JzICov
Ci0JCQlJOTE1X1dSSVRFKGNoX2N0bCwKLQkJCQkgICBzdGF0dXMgfAotCQkJCSAgIERQX0FVWF9D
SF9DVExfRE9ORSB8Ci0JCQkJICAgRFBfQVVYX0NIX0NUTF9USU1FX09VVF9FUlJPUiB8Ci0JCQkJ
ICAgRFBfQVVYX0NIX0NUTF9SRUNFSVZFX0VSUk9SKTsKKwkJCWludGVsX3VuY29yZV93cml0ZSh1
bmNvcmUsCisJCQkJCSAgIGNoX2N0bCwKKwkJCQkJICAgc3RhdHVzIHwKKwkJCQkJICAgRFBfQVVY
X0NIX0NUTF9ET05FIHwKKwkJCQkJICAgRFBfQVVYX0NIX0NUTF9USU1FX09VVF9FUlJPUiB8CisJ
CQkJCSAgIERQX0FVWF9DSF9DVExfUkVDRUlWRV9FUlJPUik7CiAKIAkJCS8qIERQIENUUyAxLjIg
Q29yZSBSZXYgMS4xLCA0LjIuMS4xICYgNC4yLjEuMgogCQkJICogICA0MDB1cyBkZWxheSByZXF1
aXJlZCBmb3IgZXJyb3JzIGFuZCB0aW1lb3V0cwpAQCAtMTM3NSwxOCArMTM3OCwxOCBAQCBpbnRl
bF9kcF9hdXhfeGZlcihzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogCQlyZWN2X2J5dGVzID0g
cmVjdl9zaXplOwogCiAJZm9yIChpID0gMDsgaSA8IHJlY3ZfYnl0ZXM7IGkgKz0gNCkKLQkJaW50
ZWxfZHBfdW5wYWNrX2F1eChJOTE1X1JFQUQoY2hfZGF0YVtpID4+IDJdKSwKKwkJaW50ZWxfZHBf
dW5wYWNrX2F1eChpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIGNoX2RhdGFbaSA+PiAyXSksCiAJ
CQkJICAgIHJlY3YgKyBpLCByZWN2X2J5dGVzIC0gaSk7CiAKIAlyZXQgPSByZWN2X2J5dGVzOwog
b3V0OgotCXBtX3Fvc191cGRhdGVfcmVxdWVzdCgmZGV2X3ByaXYtPnBtX3FvcywgUE1fUU9TX0RF
RkFVTFRfVkFMVUUpOworCXBtX3Fvc191cGRhdGVfcmVxdWVzdCgmaTkxNS0+cG1fcW9zLCBQTV9R
T1NfREVGQVVMVF9WQUxVRSk7CiAKIAlpZiAodmRkKQogCQllZHBfcGFuZWxfdmRkX29mZihpbnRl
bF9kcCwgZmFsc2UpOwogCiAJcHBzX3VubG9jayhpbnRlbF9kcCwgcHBzX3dha2VyZWYpOwotCWlu
dGVsX2Rpc3BsYXlfcG93ZXJfcHV0X2FzeW5jKGRldl9wcml2LCBhdXhfZG9tYWluLCBhdXhfd2Fr
ZXJlZik7CisJaW50ZWxfZGlzcGxheV9wb3dlcl9wdXRfYXN5bmMoaTkxNSwgYXV4X2RvbWFpbiwg
YXV4X3dha2VyZWYpOwogCiAJcmV0dXJuIHJldDsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX2dtYnVzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9nbWJ1
cy5jCmluZGV4IDVlNGM1NDNlODJlOC4uYWE4OGU2ZTdjYzY1IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF9nbWJ1cy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2lu
dGVsX2dtYnVzLmMKQEAgLTE4NiwxNCArMTg2LDE1IEBAIHN0YXRpYyB2b2lkIGJ4dF9nbWJ1c19j
bG9ja19nYXRpbmcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCiBzdGF0aWMg
dTMyIGdldF9yZXNlcnZlZChzdHJ1Y3QgaW50ZWxfZ21idXMgKmJ1cykKIHsKLQlzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSBidXMtPmRldl9wcml2OworCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1ID0gYnVzLT5kZXZfcHJpdjsKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1
bmNvcmUgPSAmaTkxNS0+dW5jb3JlOwogCXUzMiByZXNlcnZlZCA9IDA7CiAKIAkvKiBPbiBtb3N0
IGNoaXBzLCB0aGVzZSBiaXRzIG11c3QgYmUgcHJlc2VydmVkIGluIHNvZnR3YXJlLiAqLwotCWlm
ICghSVNfSTgzMChkZXZfcHJpdikgJiYgIUlTX0k4NDVHKGRldl9wcml2KSkKLQkJcmVzZXJ2ZWQg
PSBJOTE1X1JFQURfTk9UUkFDRShidXMtPmdwaW9fcmVnKSAmCi0JCQkJCSAgICAgKEdQSU9fREFU
QV9QVUxMVVBfRElTQUJMRSB8Ci0JCQkJCSAgICAgIEdQSU9fQ0xPQ0tfUFVMTFVQX0RJU0FCTEUp
OworCWlmICghSVNfSTgzMChpOTE1KSAmJiAhSVNfSTg0NUcoaTkxNSkpCisJCXJlc2VydmVkID0g
aW50ZWxfdW5jb3JlX3JlYWRfbm90cmFjZSh1bmNvcmUsIGJ1cy0+Z3Bpb19yZWcpICYKKwkJCSAg
IChHUElPX0RBVEFfUFVMTFVQX0RJU0FCTEUgfAorCQkJICAgIEdQSU9fQ0xPQ0tfUFVMTFVQX0RJ
U0FCTEUpOwogCiAJcmV0dXJuIHJlc2VydmVkOwogfQotLSAKMi4yMC4xCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0
CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

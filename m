Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C2C8EF7986
	for <lists+intel-gfx@lfdr.de>; Mon, 11 Nov 2019 18:11:08 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5F2566E94F;
	Mon, 11 Nov 2019 17:11:06 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-vk1-xa42.google.com (mail-vk1-xa42.google.com
 [IPv6:2607:f8b0:4864:20::a42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4C9616E94F
 for <intel-gfx@lists.freedesktop.org>; Mon, 11 Nov 2019 17:11:05 +0000 (UTC)
Received: by mail-vk1-xa42.google.com with SMTP id o82so3749183vka.5
 for <intel-gfx@lists.freedesktop.org>; Mon, 11 Nov 2019 09:11:05 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=akNK07e9TgmOxhi8QJ9ctu3kk0EywaNyWd0II8pdmq0=;
 b=UbULF7QFafn0cwkuRTaiHq2iopBmHaEuiN97uMSPNcu7Dj/PMgzZU5K2Y/e85uC2xD
 VGsazngaycjjSG4/e5Xl+MNocx/NN+sqGFk+RxqPz/eUYB4Kb62VrLLgnD+ZosmRbn6E
 qUPEBQMtc8R9ddZOG43+dAFdbOKMgB/n1wa/rchTRjv5IzIjDO6XO+uQ+MCGCDoISqg2
 RlY6zZfcSXo1jN8RTYPr9jWBXsqfffUm03E1gwCY/JHmoM2glrmg6+BD6xRVT+rOM7Rh
 yW7mwBc/DqSkGDVHDLdwZR0Z2qTfOUMCvUFR7t+DrcCkLh8qruoMGPQCI1rTUnOS1tFp
 zePg==
X-Gm-Message-State: APjAAAVmDbpX9yeQBp7MAywvseWyQJqb1Y6EQmOfGhL5uNix6NdPpGnr
 tWYRpkx8CXYGRalms+wSz2FzgvLuJToJFo7kCK4=
X-Google-Smtp-Source: APXvYqyUW9nKCJwqClkMbkDX+Wh5Tk+FGuPBgwBw5Etc72FiYJ9UjzT/JdF6Rp4rJXBtgD6EpI49gGJhBFUGcVRSVTs=
X-Received: by 2002:a1f:5f08:: with SMTP id t8mr19118472vkb.87.1573492263918; 
 Mon, 11 Nov 2019 09:11:03 -0800 (PST)
MIME-Version: 1.0
References: <20191110185806.17413-1-chris@chris-wilson.co.uk>
 <20191110185806.17413-15-chris@chris-wilson.co.uk>
In-Reply-To: <20191110185806.17413-15-chris@chris-wilson.co.uk>
From: Matthew Auld <matthew.william.auld@gmail.com>
Date: Mon, 11 Nov 2019 17:10:37 +0000
Message-ID: <CAM0jSHOSyh0x9r78ap1iG-EENXyS3GBGSY9pQ9YWNOHc7v66=w@mail.gmail.com>
To: Chris Wilson <chris@chris-wilson.co.uk>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=akNK07e9TgmOxhi8QJ9ctu3kk0EywaNyWd0II8pdmq0=;
 b=owecV9M/AUY7opxnZLSQBHDlUUfgx/lvNuFC7ekH5BRIMqzCBQW7dccmDmoPZLbSnQ
 x9GheIN6x1kFwEFPlCPevuU5bS9hLvyA1sCDJp+iNuuTBGvL//N49st5hLB/Nf6SydgP
 Kn1QW1lZcH/UdconekrH5l7VawXP4jtGz4f/dMyl2fKE3JWvBlGbouKrf1dPaP/20WBe
 jK//ssYLOlIX4pAzbabdIYAQskkEZOtYZvfo6zeqHjrjTeKWiJIg01tlX7EH2lVBtnql
 W6gVJuc9iDXqimh9jM4LVXWe4Xl7kF4QWkmTwsLJNg6Qx6mjR7SeW/K8d855kY/cI+39
 bQvg==
Subject: Re: [Intel-gfx] [PATCH 15/25] drm/i915/selftests: Perform some
 basic cycle counting of MI ops
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Anna Karas <anna.karas@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gU3VuLCAxMCBOb3YgMjAxOSBhdCAxODo1OCwgQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13
aWxzb24uY28udWs+IHdyb3RlOgo+Cj4gU29tZSBiYXNpYyBpbmZvcm1hdGlvbiB0aGF0IGlzIHVz
ZWZ1bCB0byBrbm93LCBzdWNoIGFzIGhvdyBtYW55IGN5Y2xlcwo+IGlzIGEgTUlfTk9PUC4KPgo+
IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+
IENjOiBBbm5hIEthcmFzIDxhbm5hLmthcmFzQGludGVsLmNvbT4KPiBDYzogVHZydGtvIFVyc3Vs
aW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KPiAtLS0KPiAgLi4uL2k5MTUvZ2VtL3NlbGZ0
ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0LmMgIHwgIDE1ICstCj4gIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3NlbGZ0ZXN0X2VuZ2luZV9jcy5jICB8IDMzOSArKysrKysrKysrKysrKysrKy0KPiAg
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wY2kuYyAgICAgICAgICAgICAgIHwgICA2ICsKPiAg
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zZWxmdGVzdC5oICAgICAgICAgIHwgICA0ICsKPiAg
Li4uL2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3BlcmZfc2VsZnRlc3RzLmggIHwgIDEzICsKPiAg
Li4uL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9zZWxmdGVzdC5jICAgIHwgIDQzICsrKwo+
ICA2IGZpbGVzIGNoYW5nZWQsIDQxNyBpbnNlcnRpb25zKCspLCAzIGRlbGV0aW9ucygtKQo+ICBj
cmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcGVy
Zl9zZWxmdGVzdHMuaAo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9z
ZWxmdGVzdHMvaTkxNV9nZW1fb2JqZWN0X2JsdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L3NlbGZ0ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0LmMKPiBpbmRleCA4YTBmYmE3ZDVkNGYuLmM4
YThjMDdlMDdhYiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL2k5MTVfZ2VtX29iamVjdF9ibHQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9zZWxmdGVzdHMvaTkxNV9nZW1fb2JqZWN0X2JsdC5jCj4gQEAgLTUyNiw4ICs1MjYsNiBAQCBz
dGF0aWMgaW50IGlndF9jb3B5X2JsdF9jdHgwKHZvaWQgKmFyZykKPiAgaW50IGk5MTVfZ2VtX29i
amVjdF9ibHRfbGl2ZV9zZWxmdGVzdHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCj4g
IHsKPiAgICAgICAgIHN0YXRpYyBjb25zdCBzdHJ1Y3QgaTkxNV9zdWJ0ZXN0IHRlc3RzW10gPSB7
Cj4gLSAgICAgICAgICAgICAgIFNVQlRFU1QocGVyZl9maWxsX2JsdCksCj4gLSAgICAgICAgICAg
ICAgIFNVQlRFU1QocGVyZl9jb3B5X2JsdCksCj4gICAgICAgICAgICAgICAgIFNVQlRFU1QoaWd0
X2ZpbGxfYmx0KSwKPiAgICAgICAgICAgICAgICAgU1VCVEVTVChpZ3RfZmlsbF9ibHRfY3R4MCks
Cj4gICAgICAgICAgICAgICAgIFNVQlRFU1QoaWd0X2NvcHlfYmx0KSwKPiBAQCAtNTQyLDMgKzU0
MCwxNiBAQCBpbnQgaTkxNV9nZW1fb2JqZWN0X2JsdF9saXZlX3NlbGZ0ZXN0cyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKPgo+ICAgICAgICAgcmV0dXJuIGk5MTVfbGl2ZV9zdWJ0ZXN0
cyh0ZXN0cywgaTkxNSk7Cj4gIH0KPiArCj4gK2ludCBpOTE1X2dlbV9vYmplY3RfYmx0X3BlcmZf
c2VsZnRlc3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQo+ICt7Cj4gKyAgICAgICBz
dGF0aWMgY29uc3Qgc3RydWN0IGk5MTVfc3VidGVzdCB0ZXN0c1tdID0gewo+ICsgICAgICAgICAg
ICAgICBTVUJURVNUKHBlcmZfZmlsbF9ibHQpLAo+ICsgICAgICAgICAgICAgICBTVUJURVNUKHBl
cmZfY29weV9ibHQpLAo+ICsgICAgICAgfTsKPiArCj4gKyAgICAgICBpZiAoaW50ZWxfZ3RfaXNf
d2VkZ2VkKCZpOTE1LT5ndCkpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICsKPiArICAg
ICAgIHJldHVybiBpOTE1X2xpdmVfc3VidGVzdHModGVzdHMsIGk5MTUpOwo+ICt9Cj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2VuZ2luZV9jcy5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5lX2NzLmMKPiBpbmRleCAzODgwZjA3
YzI5YjguLjBhZDgzMWY2YTI1YSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9zZWxmdGVzdF9lbmdpbmVfY3MuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X2VuZ2luZV9jcy5jCj4gQEAgLTQsNyArNCwzNDQgQEAKPiAgICogQ29weXJpZ2h0IMKp
IDIwMTggSW50ZWwgQ29ycG9yYXRpb24KPiAgICovCj4KPiAtI2luY2x1ZGUgIi4uL2k5MTVfc2Vs
ZnRlc3QuaCIKPiArI2luY2x1ZGUgPGxpbnV4L3NvcnQuaD4KPiArCj4gKyNpbmNsdWRlICJpbnRl
bF9ndF9wbS5oIgo+ICsjaW5jbHVkZSAiaW50ZWxfcnBzLmgiCj4gKwo+ICsjaW5jbHVkZSAiaTkx
NV9zZWxmdGVzdC5oIgo+ICsjaW5jbHVkZSAic2VsZnRlc3RzL2lndF9mbHVzaF90ZXN0LmgiCj4g
Kwo+ICsjZGVmaW5lIENPVU5UIDUKPiArCj4gK3N0YXRpYyBpbnQgY21wX3UzMihjb25zdCB2b2lk
ICpBLCBjb25zdCB2b2lkICpCKQo+ICt7Cj4gKyAgICAgICBjb25zdCB1MzIgKmEgPSBBLCAqYiA9
IEI7Cj4gKwo+ICsgICAgICAgcmV0dXJuICphIC0gKmI7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lk
IHBlcmZfYmVnaW4oc3RydWN0IGludGVsX2d0ICpndCkKPiArewo+ICsgICAgICAgaW50ZWxfZ3Rf
cG1fZ2V0KGd0KTsKPiArCj4gKyAgICAgICAvKiBCb29zdCBncHVmcmVxIHRvIG1heCBbd2FpdGJv
b3N0XSBhbmQga2VlcCBpdCBmaXhlZCAqLwo+ICsgICAgICAgYXRvbWljX2luYygmZ3QtPnJwcy5u
dW1fd2FpdGVycyk7Cj4gKyAgICAgICBzY2hlZHVsZV93b3JrKCZndC0+cnBzLndvcmspOwo+ICsg
ICAgICAgZmx1c2hfd29yaygmZ3QtPnJwcy53b3JrKTsKPiArfQo+ICsKPiArc3RhdGljIGludCBw
ZXJmX2VuZChzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQo+ICt7Cj4gKyAgICAgICBhdG9taWNfZGVjKCZn
dC0+cnBzLm51bV93YWl0ZXJzKTsKPiArICAgICAgIGludGVsX2d0X3BtX3B1dChndCk7Cj4gKwo+
ICsgICAgICAgcmV0dXJuIGlndF9mbHVzaF90ZXN0KGd0LT5pOTE1KTsKPiArfQo+ICsKPiArc3Rh
dGljIGludCB3cml0ZV90aW1lc3RhbXAoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsIGludCBzbG90
KQo+ICt7Cj4gKyAgICAgICB1MzIgY21kOwo+ICsgICAgICAgdTMyICpjczsKPiArCj4gKyAgICAg
ICBjcyA9IGludGVsX3JpbmdfYmVnaW4ocnEsIDQpOwo+ICsgICAgICAgaWYgKElTX0VSUihjcykp
Cj4gKyAgICAgICAgICAgICAgIHJldHVybiBQVFJfRVJSKGNzKTsKPiArCj4gKyAgICAgICBjbWQg
PSBNSV9TVE9SRV9SRUdJU1RFUl9NRU0gfCBNSV9VU0VfR0dUVDsKPiArICAgICAgIGlmIChJTlRF
TF9HRU4ocnEtPmk5MTUpID49IDgpCj4gKyAgICAgICAgICAgICAgIGNtZCsrOwo+ICsgICAgICAg
KmNzKysgPSBjbWQ7Cj4gKyAgICAgICAqY3MrKyA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KFJJTkdf
VElNRVNUQU1QKHJxLT5lbmdpbmUtPm1taW9fYmFzZSkpOwo+ICsgICAgICAgKmNzKysgPSBpOTE1
X3JlcXVlc3RfdGltZWxpbmUocnEpLT5od3NwX29mZnNldCArIHNsb3QgKiBzaXplb2YodTMyKTsK
PiArICAgICAgICpjcysrID0gMDsKPiArCj4gKyAgICAgICBpbnRlbF9yaW5nX2FkdmFuY2UocnEs
IGNzKTsKPiArCj4gKyAgICAgICByZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIHN0cnVjdCBp
OTE1X3ZtYSAqY3JlYXRlX2VtcHR5X2JhdGNoKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKPiAr
ewo+ICsgICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKPiArICAgICAgIHN0
cnVjdCBpOTE1X3ZtYSAqdm1hOwo+ICsgICAgICAgdTMyICpjczsKPiArICAgICAgIGludCBlcnI7
Cj4gKwo+ICsgICAgICAgb2JqID0gaTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9pbnRlcm5hbChjZS0+
ZW5naW5lLT5pOTE1LCBQQUdFX1NJWkUpOwo+ICsgICAgICAgaWYgKElTX0VSUihvYmopKQo+ICsg
ICAgICAgICAgICAgICByZXR1cm4gRVJSX0NBU1Qob2JqKTsKPiArCj4gKyAgICAgICBjcyA9IGk5
MTVfZ2VtX29iamVjdF9waW5fbWFwKG9iaiwgSTkxNV9NQVBfV0IpOwo+ICsgICAgICAgaWYgKElT
X0VSUihjcykpIHsKPiArICAgICAgICAgICAgICAgaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwo+
ICsgICAgICAgICAgICAgICByZXR1cm4gRVJSX0NBU1QoY3MpOwo+ICsgICAgICAgfQo+ICsKPiAr
ICAgICAgIGNzWzBdID0gTUlfQkFUQ0hfQlVGRkVSX0VORDsKPiArCj4gKyAgICAgICBpOTE1X2dl
bV9vYmplY3RfZmx1c2hfbWFwKG9iaik7Cj4gKyAgICAgICBpOTE1X2dlbV9vYmplY3RfdW5waW5f
bWFwKG9iaik7Cj4gKwo+ICsgICAgICAgdm1hID0gaTkxNV92bWFfaW5zdGFuY2Uob2JqLCBjZS0+
dm0sIE5VTEwpOwo+ICsgICAgICAgaWYgKElTX0VSUih2bWEpKSB7Cj4gKyAgICAgICAgICAgICAg
IGk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKPiArICAgICAgICAgICAgICAgcmV0dXJuIHZtYTsK
PiArICAgICAgIH0KPiArCj4gKyAgICAgICBlcnIgPSBpOTE1X3ZtYV9waW4odm1hLCAwLCAwLCBQ
SU5fVVNFUik7Cj4gKyAgICAgICBpZiAoZXJyKSB7Cj4gKyAgICAgICAgICAgICAgIGk5MTVfZ2Vt
X29iamVjdF9wdXQob2JqKTsKPiArICAgICAgICAgICAgICAgcmV0dXJuIEVSUl9QVFIoZXJyKTsK
PiArICAgICAgIH0KCkxpdmluZyBkYW5nZXJvdXNseT8gT2JqZWN0IGlzIHZvbGF0aWxlLCBiZWxv
dyBhbHNvLgoKPiArCj4gKyAgICAgICByZXR1cm4gdm1hOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdTMy
IHRyaWZpbHRlcih1MzIgKmEpCj4gK3sKPiArICAgICAgIHU2NCBzdW07Cj4gKwo+ICsgICAgICAg
c29ydChhLCBDT1VOVCwgc2l6ZW9mKCphKSwgY21wX3UzMiwgTlVMTCk7Cj4gKwo+ICsgICAgICAg
c3VtICs9IG11bF91MzJfdTMyKGFbMl0sIDIpOwo+ICsgICAgICAgc3VtICs9IGFbMV07Cj4gKyAg
ICAgICBzdW0gKz0gYVszXTsKPiArCj4gKyAgICAgICByZXR1cm4gc3VtID4+IDI7Cj4gK30KPiAr
Cj4gK3N0YXRpYyBpbnQgcGVyZl9taV9iYl9zdGFydCh2b2lkICphcmcpCj4gK3sKPiArICAgICAg
IHN0cnVjdCBpbnRlbF9ndCAqZ3QgPSBhcmc7Cj4gKyAgICAgICBzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmU7Cj4gKyAgICAgICBlbnVtIGludGVsX2VuZ2luZV9pZCBpZDsKPiArICAgICAg
IGludCBlcnIgPSAwOwo+ICsKPiArICAgICAgIGlmIChJTlRFTF9HRU4oZ3QtPmk5MTUpIDwgNykg
LyogZm9yIHBlci1lbmdpbmUgQ1NfVElNRVNUQU1QICovCj4gKyAgICAgICAgICAgICAgIHJldHVy
biAwOwo+ICsKPiArICAgICAgIHBlcmZfYmVnaW4oZ3QpOwo+ICsgICAgICAgZm9yX2VhY2hfZW5n
aW5lKGVuZ2luZSwgZ3QsIGlkKSB7Cj4gKyAgICAgICAgICAgICAgIHN0cnVjdCBpbnRlbF9jb250
ZXh0ICpjZSA9IGVuZ2luZS0+a2VybmVsX2NvbnRleHQ7Cj4gKyAgICAgICAgICAgICAgIHN0cnVj
dCBpOTE1X3ZtYSAqYmF0Y2g7Cj4gKyAgICAgICAgICAgICAgIHUzMiBjeWNsZXNbQ09VTlRdOwo+
ICsgICAgICAgICAgICAgICBpbnQgaTsKPiArCj4gKyAgICAgICAgICAgICAgIGJhdGNoID0gY3Jl
YXRlX2VtcHR5X2JhdGNoKGNlKTsKPiArICAgICAgICAgICAgICAgaWYgKElTX0VSUihiYXRjaCkp
IHsKPiArICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBQVFJfRVJSKGJhdGNoKTsKPiArICAg
ICAgICAgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgICAgICAgICAgfQo+ICsKPiArICAg
ICAgICAgICAgICAgZXJyID0gaTkxNV92bWFfc3luYyhiYXRjaCk7Cj4gKyAgICAgICAgICAgICAg
IGlmIChlcnIpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBpOTE1X3ZtYV9wdXQoYmF0Y2gp
Owo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAgICB9Cj4g
Kwo+ICsgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShjeWNsZXMpOyBp
KyspIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycTsK
PiArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgcnEgPSBpOTE1X3JlcXVlc3RfY3JlYXRlKGNl
KTsKPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAoSVNfRVJSKHJxKSkgewo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gUFRSX0VSUihycSk7Cj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgICAgICAgICAgICAgICAgICB9Cj4g
Kwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IHdyaXRlX3RpbWVzdGFtcChycSwgMik7
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGdvdG8gb3V0Owo+ICsKPiArICAgICAgICAgICAgICAgICAgICAgICBlcnIg
PSBycS0+ZW5naW5lLT5lbWl0X2JiX3N0YXJ0KHJxLAo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2gtPm5vZGUuc3RhcnQsIDgsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAw
KTsKPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKQo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4gKwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGVy
ciA9IHdyaXRlX3RpbWVzdGFtcChycSwgMyk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYg
KGVycikKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gb3V0Owo+ICsKPiAr
b3V0Ogo+ICsgICAgICAgICAgICAgICAgICAgICAgIGk5MTVfcmVxdWVzdF9nZXQocnEpOwo+ICsg
ICAgICAgICAgICAgICAgICAgICAgIGk5MTVfcmVxdWVzdF9hZGQocnEpOwo+ICsKPiArICAgICAg
ICAgICAgICAgICAgICAgICBpZiAoaTkxNV9yZXF1ZXN0X3dhaXQocnEsIDAsIEhaIC8gNSkgPCAw
KQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gLUVJTzsKPiArICAgICAg
ICAgICAgICAgICAgICAgICBpOTE1X3JlcXVlc3RfcHV0KHJxKTsKPiArICAgICAgICAgICAgICAg
ICAgICAgICBpZiAoZXJyKQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7
Cj4gKwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGN5Y2xlc1tpXSA9IHJxLT5od3NwX3NlcW5v
WzNdIC0gcnEtPmh3c3Bfc2Vxbm9bMl07Cj4gKyAgICAgICAgICAgICAgIH0KPiArICAgICAgICAg
ICAgICAgaTkxNV92bWFfcHV0KGJhdGNoKTsKPiArICAgICAgICAgICAgICAgaWYgKGVycikKPiAr
ICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPiArCj4gKyAgICAgICAgICAgICAgIHByX2lu
Zm8oIiVzOiBNSV9CQl9TVEFSVCBjeWNsZXM6ICV1XG4iLAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIGVuZ2luZS0+bmFtZSwgdHJpZmlsdGVyKGN5Y2xlcykpOwo+ICsgICAgICAgfQo+ICsgICAg
ICAgaWYgKHBlcmZfZW5kKGd0KSkKPiArICAgICAgICAgICAgICAgZXJyID0gLUVJTzsKPiArCj4g
KyAgICAgICByZXR1cm4gZXJyOwo+ICt9Cj4gKwo+ICtzdGF0aWMgc3RydWN0IGk5MTVfdm1hICpj
cmVhdGVfbm9wX2JhdGNoKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKPiArewo+ICsgICAgICAg
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKPiArICAgICAgIHN0cnVjdCBpOTE1X3Zt
YSAqdm1hOwo+ICsgICAgICAgdTMyICpjczsKPiArICAgICAgIGludCBlcnI7Cj4gKwo+ICsgICAg
ICAgb2JqID0gaTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9pbnRlcm5hbChjZS0+ZW5naW5lLT5pOTE1
LCBTWl82NEspOwo+ICsgICAgICAgaWYgKElTX0VSUihvYmopKQo+ICsgICAgICAgICAgICAgICBy
ZXR1cm4gRVJSX0NBU1Qob2JqKTsKPiArCj4gKyAgICAgICBjcyA9IGk5MTVfZ2VtX29iamVjdF9w
aW5fbWFwKG9iaiwgSTkxNV9NQVBfV0IpOwo+ICsgICAgICAgaWYgKElTX0VSUihjcykpIHsKPiAr
ICAgICAgICAgICAgICAgaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwo+ICsgICAgICAgICAgICAg
ICByZXR1cm4gRVJSX0NBU1QoY3MpOwo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIG1lbXNldChj
cywgMCwgU1pfNjRLKTsKPiArICAgICAgIGNzW1NaXzY0SyAvIHNpemVvZigqY3MpIC0gMV0gPSBN
SV9CQVRDSF9CVUZGRVJfRU5EOwo+ICsKPiArICAgICAgIGk5MTVfZ2VtX29iamVjdF9mbHVzaF9t
YXAob2JqKTsKPiArICAgICAgIGk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAob2JqKTsKPiArCj4g
KyAgICAgICB2bWEgPSBpOTE1X3ZtYV9pbnN0YW5jZShvYmosIGNlLT52bSwgTlVMTCk7Cj4gKyAg
ICAgICBpZiAoSVNfRVJSKHZtYSkpIHsKPiArICAgICAgICAgICAgICAgaTkxNV9nZW1fb2JqZWN0
X3B1dChvYmopOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gdm1hOwo+ICsgICAgICAgfQo+ICsK
PiArICAgICAgIGVyciA9IGk5MTVfdm1hX3Bpbih2bWEsIDAsIDAsIFBJTl9VU0VSKTsKPiArICAg
ICAgIGlmIChlcnIpIHsKPiArICAgICAgICAgICAgICAgaTkxNV9nZW1fb2JqZWN0X3B1dChvYmop
Owo+ICsgICAgICAgICAgICAgICByZXR1cm4gRVJSX1BUUihlcnIpOwo+ICsgICAgICAgfQo+ICsK
PiArICAgICAgIHJldHVybiB2bWE7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgcGVyZl9taV9ub29w
KHZvaWQgKmFyZykKPiArewo+ICsgICAgICAgc3RydWN0IGludGVsX2d0ICpndCA9IGFyZzsKPiAr
ICAgICAgIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZTsKPiArICAgICAgIGVudW0gaW50
ZWxfZW5naW5lX2lkIGlkOwo+ICsgICAgICAgaW50IGVyciA9IDA7Cj4gKwo+ICsgICAgICAgaWYg
KElOVEVMX0dFTihndC0+aTkxNSkgPCA3KSAvKiBmb3IgcGVyLWVuZ2luZSBDU19USU1FU1RBTVAg
Ki8KPiArICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4gKwo+ICsgICAgICAgcGVyZl9iZWdpbihn
dCk7Cj4gKyAgICAgICBmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBndCwgaWQpIHsKPiArICAgICAg
ICAgICAgICAgc3RydWN0IGludGVsX2NvbnRleHQgKmNlID0gZW5naW5lLT5rZXJuZWxfY29udGV4
dDsKPiArICAgICAgICAgICAgICAgc3RydWN0IGk5MTVfdm1hICpiYXNlLCAqbm9wOwo+ICsgICAg
ICAgICAgICAgICB1MzIgY3ljbGVzW0NPVU5UXTsKPiArICAgICAgICAgICAgICAgaW50IGk7Cj4g
Kwo+ICsgICAgICAgICAgICAgICBiYXNlID0gY3JlYXRlX2VtcHR5X2JhdGNoKGNlKTsKPiArICAg
ICAgICAgICAgICAgaWYgKElTX0VSUihiYXNlKSkgewo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGVyciA9IFBUUl9FUlIoYmFzZSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4g
KyAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAgIGVyciA9IGk5MTVfdm1hX3N5
bmMoYmFzZSk7Cj4gKyAgICAgICAgICAgICAgIGlmIChlcnIpIHsKPiArICAgICAgICAgICAgICAg
ICAgICAgICBpOTE1X3ZtYV9wdXQoYmFzZSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJl
YWs7Cj4gKyAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAgIG5vcCA9IGNyZWF0
ZV9ub3BfYmF0Y2goY2UpOwo+ICsgICAgICAgICAgICAgICBpZiAoSVNfRVJSKG5vcCkpIHsKPiAr
ICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBQVFJfRVJSKG5vcCk7Cj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgaTkxNV92bWFfcHV0KGJhc2UpOwo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGJyZWFrOwo+ICsgICAgICAgICAgICAgICB9Cj4gKwo+ICsgICAgICAgICAgICAgICBlcnIgPSBp
OTE1X3ZtYV9zeW5jKG5vcCk7Cj4gKyAgICAgICAgICAgICAgIGlmIChlcnIpIHsKPiArICAgICAg
ICAgICAgICAgICAgICAgICBpOTE1X3ZtYV9wdXQobm9wKTsKPiArICAgICAgICAgICAgICAgICAg
ICAgICBpOTE1X3ZtYV9wdXQoYmFzZSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7
Cj4gKyAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkg
PCBBUlJBWV9TSVpFKGN5Y2xlcyk7IGkrKykgewo+ICsgICAgICAgICAgICAgICAgICAgICAgIHN0
cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+ICsKPiArICAgICAgICAgICAgICAgICAgICAgICBycSA9
IGk5MTVfcmVxdWVzdF9jcmVhdGUoY2UpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGlmIChJ
U19FUlIocnEpKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBQVFJf
RVJSKHJxKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgZXJyID0g
d3JpdGVfdGltZXN0YW1wKHJxLCAyKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJy
KQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4gKwo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIGVyciA9IHJxLT5lbmdpbmUtPmVtaXRfYmJfc3RhcnQocnEsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBi
YXNlLT5ub2RlLnN0YXJ0LCA4LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgMCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVy
cikKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gb3V0Owo+ICsKPiArICAg
ICAgICAgICAgICAgICAgICAgICBlcnIgPSB3cml0ZV90aW1lc3RhbXAocnEsIDMpOwo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIGlmIChlcnIpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBnb3RvIG91dDsKPiArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gcnEtPmVu
Z2luZS0+ZW1pdF9iYl9zdGFydChycSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIG5vcC0+bm9kZS5zdGFydCwgNDA5NiwKClRoYXQgc2hv
dWxkIGJlIDY0Sz8gQ2FuJ3Qgd2UganVzdCBtYWtlIHRoZXNlIG5vZGUuc2l6ZT8KCkFsc28gd2h5
IGRvIHdlIG1lYXN1cmUgYm90aCBlbXB0eSArIG5vcCBoZXJlPwpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVs
LWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

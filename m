Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7ABE4FB996
	for <lists+intel-gfx@lfdr.de>; Wed, 13 Nov 2019 21:20:54 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3444A6EE4B;
	Wed, 13 Nov 2019 20:20:52 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 805B06EE4B;
 Wed, 13 Nov 2019 20:20:50 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19192631-1500050 
 for multiple; Wed, 13 Nov 2019 20:20:34 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 13 Nov 2019 20:20:31 +0000
Message-Id: <20191113202031.21574-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191113201355.17469-1-chris@chris-wilson.co.uk>
References: <20191113201355.17469-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t] igt: Use COND_BBEND for busy spinning on
 gen9
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org, Joonas Lahtinen <joonas.lahtinen@intel.com>,
 Mika Kuoppala <mika.kuoppala@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogSm9uIEJsb29tZmllbGQgPGpvbi5ibG9vbWZpZWxkQGludGVsLmNvbT4KCmdlbjkrIGlu
dHJvZHVjZXMgYSBjbWRwYXJzZXIgZm9yIHRoZSBCTFQgZW5naW5lIHdoaWNoIGNvcGllcyB0aGUK
aW5jb21pbmcgQkIgdG8gYSBrbWQgb3duZWQgYnVmZmVyIGZvciBzdWJtaXNzaW9uICh0byBwcmV2
ZW50IGNoYW5nZXMKYmVpbmcgbWFkZSBhZnRlciB0aGUgYmIgaGFzIGJlZW4gc2FmZWx5IHNjYW5u
ZWQpLiBUaGlzIGJyZWFrcyB0aGUKc3BpbiBmdW5jdGlvbmFsaXR5IGJlY2F1c2UgaXQgcmVsaWVz
IG9uIGNoYW5naW5nIHRoZSBzdWJtaXR0ZWQgc3BpbgpidWZmZXJzIGluIG9yZGVyIHRvIHRlcm1p
bmF0ZSB0aGVtLgoKSW5zdGVhZCwgZm9yIGdlbjkrLCB3ZSBjaGFuZ2UgdGhlIHNlbWFudGljcyBi
eSBpbnRyb2R1Y2luZyBhIENPTkRfQkJfRU5ECmludG8gdGhlIGluZmluaXRlIGxvb3AsIHRvIHdh
aXQgdW50aWwgYSBtZW1vcnkgZmxhZyAoaW4gYW5vdGhlIGJvKSBpcwpjbGVhcmVkLgoKdjI6IENv
cnJlY3Qgbm9wIGxlbmd0aCB0byBhdm9pZCBvdmVyd3JpdGluZyBiYl9lbmQgaW5zdHIgd2hlbiB1
c2luZwogICAgYSBkZXBlbmRlbmN5IGJvIChjb3JrKQp2MzogZml4IGNvbmZsaWN0cyBvbiBpZ3Rf
ZHVtbXlsb2FkIChNaWthKQp2NDogcy9ib29sIHJ1bm5pbmcvdWludDMyX3QgcnVubmluZywgZml4
IHItPmRlbHRhIChNaWthKQp2NTogcmVtb3ZlIG92ZXJ6ZWFsb3VzIGFzc2VydCAoTWlrYSkKdjY6
IHJlYmFzZSBvbiB0b3Agb2YgbGliIGNoYW5nZXMgKE1pa2EpCnY3OiByZXdvcmsgb24gdG9wIG9m
IHB1YmxpYyBpZ3QgbGliIGNoYW5nZXMgKE1pa2EpCnY4OiByZWJhc2UKdjk6IHNpbXBsaWZ5IGJ5
IHVzaW5nIGJiIGVuZCBhcyBjb25kaXRpb25hbCAoQ2hyaXMpCgpTaWduZWQtb2ZmLWJ5OiBKb24g
Qmxvb21maWVsZCA8am9uLmJsb29tZmllbGRAaW50ZWwuY29tPiAodjIpCkNjOiBKb29uYXMgTGFo
dGluZW4gPGpvb25hcy5sYWh0aW5lbkBpbnRlbC5jb20+CkNjOiBSb2RyaWdvIFZpdmkgPHJvZHJp
Z28udml2aUBpbnRlbC5jb20+CkNjOiBNaWthIEt1b3BwYWxhIDxtaWthLmt1b3BwYWxhQGludGVs
LmNvbT4KU2lnbmVkLW9mZi1ieTogTWlrYSBLdW9wcGFsYSA8bWlrYS5rdW9wcGFsYUBsaW51eC5p
bnRlbC5jb20+Ci0tLQpDb21waWxlIGFmdGVyIHJlYmFzZSEKLS0tCiBsaWIvaTgzMF9yZWcuaCAg
ICAgICAgICAgICAgICAgICAgICAgICAgfCAgMiArLQogbGliL2lndF9kdW1teWxvYWQuYyAgICAg
ICAgICAgICAgICAgICAgIHwgMjcgKysrKysrKysrKysrKysrKysrKysrKystLQogbGliL2ludGVs
X3JlZy5oICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDMgKysrCiB0ZXN0cy9pOTE1L2dlbV9k
b3VibGVfaXJxX2xvb3AuYyAgICAgICAgfCAgMiAtLQogdGVzdHMvaTkxNS9nZW1fd3JpdGVfcmVh
ZF9yaW5nX3N3aXRjaC5jIHwgIDIgKy0KIDUgZmlsZXMgY2hhbmdlZCwgMzAgaW5zZXJ0aW9ucygr
KSwgNiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9saWIvaTgzMF9yZWcuaCBiL2xpYi9pODMw
X3JlZy5oCmluZGV4IGE1NzY5MWM3ZS4uNDEwMjAyNTY3IDEwMDY0NAotLS0gYS9saWIvaTgzMF9y
ZWcuaAorKysgYi9saWIvaTgzMF9yZWcuaApAQCAtNDMsNyArNDMsNyBAQAogLyogYnJvYWR3YXRl
ciBmbHVzaCBiaXRzICovCiAjZGVmaW5lIEJSV19NSV9HTE9CQUxfU05BUFNIT1RfUkVTRVQgICAo
MSA8PCAzKQogCi0jZGVmaW5lIE1JX0NPTkRfQkFUQ0hfQlVGRkVSX0VORAkoMHgzNjw8MjMgfCAx
KQorI2RlZmluZSBNSV9DT05EX0JBVENIX0JVRkZFUl9FTkQJKDB4MzYgPDwgMjMpCiAjZGVmaW5l
IE1JX0RPX0NPTVBBUkUJCQkoMTw8MjEpCiAKICNkZWZpbmUgTUlfQkFUQ0hfQlVGRkVSX0VORAko
MHhBIDw8IDIzKQpkaWZmIC0tZ2l0IGEvbGliL2lndF9kdW1teWxvYWQuYyBiL2xpYi9pZ3RfZHVt
bXlsb2FkLmMKaW5kZXggYjllMjM5ZGIzLi41NjNhNDUxZGEgMTAwNjQ0Ci0tLSBhL2xpYi9pZ3Rf
ZHVtbXlsb2FkLmMKKysrIGIvbGliL2lndF9kdW1teWxvYWQuYwpAQCAtNzUsNyArNzUsNyBAQCBl
bWl0X3JlY3Vyc2l2ZV9iYXRjaChpZ3Rfc3Bpbl90ICpzcGluLAogI2RlZmluZSBTQ1JBVENIIDAK
ICNkZWZpbmUgQkFUQ0ggSUdUX1NQSU5fQkFUQ0gKIAljb25zdCBpbnQgZ2VuID0gaW50ZWxfZ2Vu
KGludGVsX2dldF9kcm1fZGV2aWQoZmQpKTsKLQlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX3JlbG9jYXRp
b25fZW50cnkgcmVsb2NzWzJdLCAqcjsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX3JlbG9jYXRpb25f
ZW50cnkgcmVsb2NzWzNdLCAqcjsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyICpl
eGVjYnVmOwogCXN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19vYmplY3QyICpvYmo7CiAJdW5zaWdu
ZWQgaW50IGZsYWdzW0dFTV9NQVhfRU5HSU5FU107CkBAIC0yMDUsNyArMjA1LDMwIEBAIGVtaXRf
cmVjdXJzaXZlX2JhdGNoKGlndF9zcGluX3QgKnNwaW4sCiAJICogdHJvdWJsZS4gU2VlIGh0dHBz
Oi8vYnVncy5mcmVlZGVza3RvcC5vcmcvc2hvd19idWcuY2dpP2lkPTEwMjI2MgogCSAqLwogCWlm
ICghKG9wdHMtPmZsYWdzICYgSUdUX1NQSU5fRkFTVCkpCi0JCWNzICs9IDEwMDA7CisJCWNzICs9
IDk2MDsKKworCS8qCisJICogV2hlbiB1c2luZyBhIGNtZHBhcnNlciwgdGhlIGJhdGNoIGlzIGNv
cGllZCBpbnRvIGEgcmVhZCBvbmx5IGxvY2F0aW9uCisJICogYW5kIHZhbGlkYXRlZC4gV2UgYXJl
IHRoZW4gdW5hYmxlIHRvIGFsdGVyIHRoZSBleGVjdXRpbmcgYmF0Y2gsCisJICogYnJlYWtpbmcg
dGhlIG9sZGVyICpzcGluLT5jb25kaXRpb24gPSBNSV9CQl9FTkQgdGVybWluYXRpb24uCisJICog
SW5zdGVhZCB3ZSBjYW4gdXNlIGEgY29uZGl0aW9uYWwgTUlfQkJfRU5EIGhlcmUgdGhhdCBsb29r
cyBhdAorCSAqIHRoZSB1c2VyJ3MgY29weSBvZiB0aGUgYmF0Y2ggYW5kIHRlcm1pbmF0ZXMgd2hl
biB0aGV5IG1vZGlmaWVkIGl0LAorCSAqIG5vIG1hdHRlciBob3cgdGhleSBtb2RpZnkgaXQgKGZy
b20gZWl0aGVyIHRoZSBHUFUgb3IgQ1BVKS4KKwkgKi8KKwlpZiAoZ2VuID49IDkpIHsKKwkJciA9
ICZyZWxvY3Nbb2JqW0JBVENIXS5yZWxvY2F0aW9uX2NvdW50KytdOworCisJCXItPnByZXN1bWVk
X29mZnNldCA9IDA7CisJCXItPnRhcmdldF9oYW5kbGUgPSBvYmpbQkFUQ0hdLmhhbmRsZTsKKwkJ
ci0+b2Zmc2V0ID0gKGNzICsgMiAtIGJhdGNoKSAqIHNpemVvZigqY3MpOworCQlyLT5yZWFkX2Rv
bWFpbnMgPSBJOTE1X0dFTV9ET01BSU5fQ09NTUFORDsKKwkJci0+ZGVsdGEgPSAoc3Bpbi0+Y29u
ZGl0aW9uIC0gYmF0Y2gpICogc2l6ZW9mKCpjcyk7CisKKwkJKmNzKysgPSBNSV9DT05EX0JBVENI
X0JVRkZFUl9FTkQgfCAxIDw8IDIxIHwgNSA8PCAxMiB8IDI7CisJCSpjcysrID0gTUlfQkFUQ0hf
QlVGRkVSX0VORDsKKwkJKmNzKysgPSByLT5kZWx0YTsKKwkJKmNzKysgPSAwOworCX0KIAogCS8q
IHJlY3Vyc2UgKi8KIAlyID0gJnJlbG9jc1tvYmpbQkFUQ0hdLnJlbG9jYXRpb25fY291bnQrK107
CmRpZmYgLS1naXQgYS9saWIvaW50ZWxfcmVnLmggYi9saWIvaW50ZWxfcmVnLmgKaW5kZXggMDY5
NDQwY2I3Li4xMGNhNzYwYTIgMTAwNjQ0Ci0tLSBhL2xpYi9pbnRlbF9yZWcuaAorKysgYi9saWIv
aW50ZWxfcmVnLmgKQEAgLTI1OTMsNiArMjU5Myw5IEBAIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1Ig
T1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgogI2RlZmluZSBNSV9CQVRDSF9CVUZGRVIJ
CSgoMHgzMCA8PCAyMykgfCAxKQogI2RlZmluZSBNSV9CQVRDSF9CVUZGRVJfU1RBUlQJKDB4MzEg
PDwgMjMpCiAjZGVmaW5lIE1JX0JBVENIX0JVRkZFUl9FTkQJKDB4QSA8PCAyMykKKyNkZWZpbmUg
TUlfQ09ORF9CQVRDSF9CVUZGRVJfRU5ECSgweDM2IDw8IDIzKQorI2RlZmluZSBNSV9ET19DT01Q
QVJFICAgICAgICAgICAgICAgICAgICgxPDwyMSkKKwogI2RlZmluZSBNSV9CQVRDSF9OT05fU0VD
VVJFCQkoMSkKICNkZWZpbmUgTUlfQkFUQ0hfTk9OX1NFQ1VSRV9JOTY1CSgxIDw8IDgpCiAjZGVm
aW5lIE1JX0JBVENIX05PTl9TRUNVUkVfSFNXCQkoMTw8MTMpIC8qIEFkZGl0aW9uYWwgYml0IGZv
ciBSQ1MgKi8KZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX2RvdWJsZV9pcnFfbG9vcC5jIGIv
dGVzdHMvaTkxNS9nZW1fZG91YmxlX2lycV9sb29wLmMKaW5kZXggYjMyNmZjNThhLi5mMTdmNjFj
MTkgMTAwNjQ0Ci0tLSBhL3Rlc3RzL2k5MTUvZ2VtX2RvdWJsZV9pcnFfbG9vcC5jCisrKyBiL3Rl
c3RzL2k5MTUvZ2VtX2RvdWJsZV9pcnFfbG9vcC5jCkBAIC01Miw4ICs1Miw2IEBAIHN0YXRpYyBk
cm1faW50ZWxfYm8gKnRhcmdldF9idWZmZXIsICpibHRfYm87CiBJR1RfVEVTVF9ERVNDUklQVElP
TigiQmFzaWMgY2hlY2sgZm9yIG1pc3NlZCBJUlFzIG9uIGJsdCByaW5nLiIpOwogCiAKLSNkZWZp
bmUgTUlfQ09ORF9CQVRDSF9CVUZGRVJfRU5ECSgweDM2PDwyMyB8IDEpCi0jZGVmaW5lIE1JX0RP
X0NPTVBBUkUJCQkoMTw8MjEpCiBzdGF0aWMgdm9pZAogZHVtbXlfcmVsb2NfbG9vcCh2b2lkKQog
ewpkaWZmIC0tZ2l0IGEvdGVzdHMvaTkxNS9nZW1fd3JpdGVfcmVhZF9yaW5nX3N3aXRjaC5jIGIv
dGVzdHMvaTkxNS9nZW1fd3JpdGVfcmVhZF9yaW5nX3N3aXRjaC5jCmluZGV4IGVmMjI5Y2M1OS4u
MDk1YzEzYzM0IDEwMDY0NAotLS0gYS90ZXN0cy9pOTE1L2dlbV93cml0ZV9yZWFkX3Jpbmdfc3dp
dGNoLmMKKysrIGIvdGVzdHMvaTkxNS9nZW1fd3JpdGVfcmVhZF9yaW5nX3N3aXRjaC5jCkBAIC0x
MTUsNyArMTE1LDcgQEAgc3RhdGljIHZvaWQgcnVuX3Rlc3QoaW50IHJpbmcpCiAJICogb3RoZXJ3
aXNlIHRoZSBvYmotPmxhc3Rfd3JpdGVfc2Vxbm8gd2lsbCBiZSB1cGRhdGVkLiAqLwogCWlmIChy
aW5nID09IEk5MTVfRVhFQ19SRU5ERVIpIHsKIAkJQkVHSU5fQkFUQ0goNCwgMSk7Ci0JCU9VVF9C
QVRDSChNSV9DT05EX0JBVENIX0JVRkZFUl9FTkQgfCBNSV9ET19DT01QQVJFKTsKKwkJT1VUX0JB
VENIKE1JX0NPTkRfQkFUQ0hfQlVGRkVSX0VORCB8IE1JX0RPX0NPTVBBUkUgfCAxKTsKIAkJT1VU
X0JBVENIKDB4ZmZmZmZmZmYpOyAvKiBjb21wYXJlIGR3b3JkICovCiAJCU9VVF9SRUxPQyh0YXJn
ZXRfYm8sIEk5MTVfR0VNX0RPTUFJTl9SRU5ERVIsIDAsIDApOwogCQlPVVRfQkFUQ0goTUlfTk9P
UCk7Ci0tIAoyLjI0LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVs
LWdmeA==

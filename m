Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8B9271C6F3C
	for <lists+intel-gfx@lfdr.de>; Wed,  6 May 2020 13:23:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D329B6E860;
	Wed,  6 May 2020 11:23:44 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 44C5E6E85E
 for <intel-gfx@lists.freedesktop.org>; Wed,  6 May 2020 11:23:42 +0000 (UTC)
IronPort-SDR: ZwL806bvPEwoDW/GP/zFGvcw7lNPejdGGtD/yNIN0UkkXix96zhz83V7WZRtMSsTU3C/QBa86/
 9YY/5fBXUp/w==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by fmsmga106.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 06 May 2020 04:23:41 -0700
IronPort-SDR: MOKIX20F7MG77Wv8V1pN6aBv0R0AiZaO8dEb8GB9RSZ8goKHjgP90uxZyBirgUefEa6rSwxTOQ
 ByIl8Nl1FlhQ==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.73,358,1583222400"; d="scan'208";a="304774659"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by FMSMGA003.fm.intel.com with SMTP; 06 May 2020 04:23:40 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Wed, 06 May 2020 14:23:39 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  6 May 2020 14:23:23 +0300
Message-Id: <20200506112328.16562-5-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200506112328.16562-1-ville.syrjala@linux.intel.com>
References: <20200506112328.16562-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 4/9] drm/i915: Add {preemph,
 voltage}_max() vfuncs
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkRp
ZmZlcmVudCBwbGF0Zm9ybXMgaGF2ZSBkaWZmZXJlbnQgbWF4IHZzd2luZy9wcmVlbXBoIHNldHRp
bmdzLgpUdXJuIHRoYXQgaW50byBhIHBhaXIgdmZ1bmNzIHNvIHdlIGNhbiBkZWNvdXBsZSBpbnRl
bF9kcC5jIGFuZAppbnRlbF9kZGkuYyBmdXJ0aGVyLgoKU2lnbmVkLW9mZi1ieTogVmlsbGUgU3ly
asOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jICAgICAgfCAyMSArKy0tLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmggICAgICB8ICAzIC0KIC4uLi9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCAgICB8ICAzICsKIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZHAuYyAgICAgICB8IDY3ICsrKysrKy0tLS0tLS0tLS0tLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuaCAgICAgICB8ICA0IC0tCiAuLi4v
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcF9saW5rX3RyYWluaW5nLmMgfCAyMCArKysrKy0KIDYg
ZmlsZXMgY2hhbmdlZCwgNDkgaW5zZXJ0aW9ucygrKSwgNjkgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKaW5kZXggNTYwMTY3M2MzZjMwLi40MDli
OGE2ODU3MGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGRpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYwpAQCAt
MjA5NSwxMCArMjA5NSwxMCBAQCBzdGF0aWMgdm9pZCBieHRfZGRpX3Zzd2luZ19zZXF1ZW5jZShz
dHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJCQkgICAgIGRkaV90cmFuc2xhdGlvbnNb
bGV2ZWxdLmRlZW1waGFzaXMpOwogfQogCi11OCBpbnRlbF9kZGlfZHBfdm9sdGFnZV9tYXgoc3Ry
dWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIpCitzdGF0aWMgdTggaW50ZWxfZGRpX2RwX3ZvbHRh
Z2VfbWF4KHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHApCiB7CisJc3RydWN0IGludGVsX2VuY29k
ZXIgKmVuY29kZXIgPSAmZHBfdG9fZGlnX3BvcnQoaW50ZWxfZHApLT5iYXNlOwogCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOwot
CXN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAgPSBlbmNfdG9faW50ZWxfZHAoZW5jb2Rlcik7CiAJ
ZW51bSBwb3J0IHBvcnQgPSBlbmNvZGVyLT5wb3J0OwogCWVudW0gcGh5IHBoeSA9IGludGVsX3Bv
cnRfdG9fcGh5KGRldl9wcml2LCBwb3J0KTsKIAlpbnQgbl9lbnRyaWVzOwpAQCAtMjE1MSwxOSAr
MjE1MSw5IEBAIHU4IGludGVsX2RkaV9kcF92b2x0YWdlX21heChzdHJ1Y3QgaW50ZWxfZW5jb2Rl
ciAqZW5jb2RlcikKICAqIHVzZWQgb24gYWxsIERESSBwbGF0Zm9ybXMuIFNob3VsZCB0aGF0IGNo
YW5nZSB3ZSBuZWVkIHRvCiAgKiByZXRoaW5rIHRoaXMgY29kZS4KICAqLwotdTggaW50ZWxfZGRp
X2RwX3ByZV9lbXBoYXNpc19tYXgoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsIHU4IHZv
bHRhZ2Vfc3dpbmcpCitzdGF0aWMgdTggaW50ZWxfZGRpX2RwX3ByZWVtcGhfbWF4KHN0cnVjdCBp
bnRlbF9kcCAqaW50ZWxfZHApCiB7Ci0Jc3dpdGNoICh2b2x0YWdlX3N3aW5nICYgRFBfVFJBSU5f
Vk9MVEFHRV9TV0lOR19NQVNLKSB7Ci0JY2FzZSBEUF9UUkFJTl9WT0xUQUdFX1NXSU5HX0xFVkVM
XzA6Ci0JCXJldHVybiBEUF9UUkFJTl9QUkVfRU1QSF9MRVZFTF8zOwotCWNhc2UgRFBfVFJBSU5f
Vk9MVEFHRV9TV0lOR19MRVZFTF8xOgotCQlyZXR1cm4gRFBfVFJBSU5fUFJFX0VNUEhfTEVWRUxf
MjsKLQljYXNlIERQX1RSQUlOX1ZPTFRBR0VfU1dJTkdfTEVWRUxfMjoKLQkJcmV0dXJuIERQX1RS
QUlOX1BSRV9FTVBIX0xFVkVMXzE7Ci0JY2FzZSBEUF9UUkFJTl9WT0xUQUdFX1NXSU5HX0xFVkVM
XzM6Ci0JZGVmYXVsdDoKLQkJcmV0dXJuIERQX1RSQUlOX1BSRV9FTVBIX0xFVkVMXzA7Ci0JfQor
CXJldHVybiBEUF9UUkFJTl9QUkVfRU1QSF9MRVZFTF8zOwogfQogCiBzdGF0aWMgdm9pZCBjbmxf
ZGRpX3Zzd2luZ19wcm9ncmFtKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLApAQCAtNDUx
MCw2ICs0NTAwLDkgQEAgaW50ZWxfZGRpX2luaXRfZHBfY29ubmVjdG9yKHN0cnVjdCBpbnRlbF9k
aWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0KQogCWVsc2UKIAkJaW50ZWxfZGlnX3BvcnQtPmRw
LnNldF9zaWduYWxfbGV2ZWxzID0gaHN3X3NldF9zaWduYWxfbGV2ZWxzOwogCisJaW50ZWxfZGln
X3BvcnQtPmRwLnZvbHRhZ2VfbWF4ID0gaW50ZWxfZGRpX2RwX3ZvbHRhZ2VfbWF4OworCWludGVs
X2RpZ19wb3J0LT5kcC5wcmVlbXBoX21heCA9IGludGVsX2RkaV9kcF9wcmVlbXBoX21heDsKKwog
CWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwgMTIpIHsKIAkJaW50ZWxfZGlnX3BvcnQtPmRwLnJl
Z3MuZHBfdHBfY3RsID0gRFBfVFBfQ1RMKHBvcnQpOwogCQlpbnRlbF9kaWdfcG9ydC0+ZHAucmVn
cy5kcF90cF9zdGF0dXMgPSBEUF9UUF9TVEFUVVMocG9ydCk7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kZGkuaAppbmRleCBmYmRmOGRkZGU0ODYuLjA3N2U5ZGJiZTM2NyAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuaAorKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5oCkBAIC00Miw5ICs0Miw2IEBA
IHZvaWQgaW50ZWxfZGRpX2NvbXB1dGVfbWluX3ZvbHRhZ2VfbGV2ZWwoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2LAogCQkJCQkgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNf
c3RhdGUpOwogdTMyIGJ4dF9zaWduYWxfbGV2ZWxzKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAp
OwogdTMyIGRkaV9zaWduYWxfbGV2ZWxzKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHApOwotdTgg
aW50ZWxfZGRpX2RwX3ZvbHRhZ2VfbWF4KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKTsK
LXU4IGludGVsX2RkaV9kcF9wcmVfZW1waGFzaXNfbWF4KHN0cnVjdCBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyLAotCQkJCSB1OCB2b2x0YWdlX3N3aW5nKTsKIGludCBpbnRlbF9kZGlfdG9nZ2xlX2hk
Y3Bfc2lnbmFsbGluZyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqaW50ZWxfZW5jb2RlciwKIAkJCQkg
ICAgIGJvb2wgZW5hYmxlKTsKIHZvaWQgaWNsX3Nhbml0aXplX2VuY29kZXJfcGxsX21hcHBpbmco
c3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAppbmRleCA5NDg4NDQ5ZTRiOTQuLmUw
Mzg0YWY0ODljMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5X3R5cGVzLmgKQEAgLTEzNzEsNiArMTM3MSw5IEBAIHN0cnVjdCBpbnRlbF9kcCB7
CiAJdm9pZCAoKnNldF9pZGxlX2xpbmtfdHJhaW4pKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAp
OwogCXZvaWQgKCpzZXRfc2lnbmFsX2xldmVscykoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCk7
CiAKKwl1OCAoKnByZWVtcGhfbWF4KShzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKTsKKwl1OCAo
KnZvbHRhZ2VfbWF4KShzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKTsKKwogCS8qIERpc3BsYXlw
b3J0IGNvbXBsaWFuY2UgdGVzdGluZyAqLwogCXN0cnVjdCBpbnRlbF9kcF9jb21wbGlhbmNlIGNv
bXBsaWFuY2U7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZHAuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYwppbmRleCBh
NTJmMDFjNDg2NDQuLjFiNzg2ZDVhZjM4MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZHAuYwpAQCAtMzk0Nyw1OCArMzk0NywyNCBAQCBpbnRlbF9kcF9nZXRfbGlua19zdGF0
dXMoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwgdTggbGlua19zdGF0dXNbRFBfTElOS19TVEFU
VQogCQkJCURQX0xJTktfU1RBVFVTX1NJWkUpID09IERQX0xJTktfU1RBVFVTX1NJWkU7CiB9CiAK
LS8qIFRoZXNlIGFyZSBzb3VyY2Utc3BlY2lmaWMgdmFsdWVzLiAqLwotdTgKLWludGVsX2RwX3Zv
bHRhZ2VfbWF4KHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHApCitzdGF0aWMgdTggaW50ZWxfZHBf
dm9sdGFnZV9tYXhfMihzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKQogewotCXN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGRwX3RvX2k5MTUoaW50ZWxfZHApOwotCXN0cnVjdCBp
bnRlbF9lbmNvZGVyICplbmNvZGVyID0gJmRwX3RvX2RpZ19wb3J0KGludGVsX2RwKS0+YmFzZTsK
LQllbnVtIHBvcnQgcG9ydCA9IGVuY29kZXItPnBvcnQ7CisJcmV0dXJuIERQX1RSQUlOX1ZPTFRB
R0VfU1dJTkdfTEVWRUxfMjsKK30KIAotCWlmIChIQVNfRERJKGRldl9wcml2KSkKLQkJcmV0dXJu
IGludGVsX2RkaV9kcF92b2x0YWdlX21heChlbmNvZGVyKTsKLQllbHNlIGlmIChJU19WQUxMRVlW
SUVXKGRldl9wcml2KSB8fCBJU19DSEVSUllWSUVXKGRldl9wcml2KSB8fAotCQkgKEhBU19QQ0hf
U1BMSVQoZGV2X3ByaXYpICYmIHBvcnQgIT0gUE9SVF9BKSkKLQkJcmV0dXJuIERQX1RSQUlOX1ZP
TFRBR0VfU1dJTkdfTEVWRUxfMzsKLQllbHNlCi0JCXJldHVybiBEUF9UUkFJTl9WT0xUQUdFX1NX
SU5HX0xFVkVMXzI7CitzdGF0aWMgdTggaW50ZWxfZHBfdm9sdGFnZV9tYXhfMyhzdHJ1Y3QgaW50
ZWxfZHAgKmludGVsX2RwKQoreworCXJldHVybiBEUF9UUkFJTl9WT0xUQUdFX1NXSU5HX0xFVkVM
XzM7CiB9CiAKLXU4Ci1pbnRlbF9kcF9wcmVfZW1waGFzaXNfbWF4KHN0cnVjdCBpbnRlbF9kcCAq
aW50ZWxfZHAsIHU4IHZvbHRhZ2Vfc3dpbmcpCitzdGF0aWMgdTggaW50ZWxfZHBfcHJlX2VtcGVt
cGhfbWF4XzIoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCkKIHsKLQlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYgPSBkcF90b19pOTE1KGludGVsX2RwKTsKLQlzdHJ1Y3QgaW50ZWxf
ZW5jb2RlciAqZW5jb2RlciA9ICZkcF90b19kaWdfcG9ydChpbnRlbF9kcCktPmJhc2U7Ci0JZW51
bSBwb3J0IHBvcnQgPSBlbmNvZGVyLT5wb3J0OworCXJldHVybiBEUF9UUkFJTl9QUkVfRU1QSF9M
RVZFTF8yOworfQogCi0JaWYgKEhBU19EREkoZGV2X3ByaXYpKSB7Ci0JCXJldHVybiBpbnRlbF9k
ZGlfZHBfcHJlX2VtcGhhc2lzX21heChlbmNvZGVyLCB2b2x0YWdlX3N3aW5nKTsKLQl9IGVsc2Ug
aWYgKElTX1ZBTExFWVZJRVcoZGV2X3ByaXYpIHx8IElTX0NIRVJSWVZJRVcoZGV2X3ByaXYpIHx8
Ci0JCSAgIChIQVNfUENIX1NQTElUKGRldl9wcml2KSAmJiBwb3J0ICE9IFBPUlRfQSkpIHsKLQkJ
c3dpdGNoICh2b2x0YWdlX3N3aW5nICYgRFBfVFJBSU5fVk9MVEFHRV9TV0lOR19NQVNLKSB7Ci0J
CWNhc2UgRFBfVFJBSU5fVk9MVEFHRV9TV0lOR19MRVZFTF8wOgotCQkJcmV0dXJuIERQX1RSQUlO
X1BSRV9FTVBIX0xFVkVMXzM7Ci0JCWNhc2UgRFBfVFJBSU5fVk9MVEFHRV9TV0lOR19MRVZFTF8x
OgotCQkJcmV0dXJuIERQX1RSQUlOX1BSRV9FTVBIX0xFVkVMXzI7Ci0JCWNhc2UgRFBfVFJBSU5f
Vk9MVEFHRV9TV0lOR19MRVZFTF8yOgotCQkJcmV0dXJuIERQX1RSQUlOX1BSRV9FTVBIX0xFVkVM
XzE7Ci0JCWNhc2UgRFBfVFJBSU5fVk9MVEFHRV9TV0lOR19MRVZFTF8zOgotCQlkZWZhdWx0Ogot
CQkJcmV0dXJuIERQX1RSQUlOX1BSRV9FTVBIX0xFVkVMXzA7Ci0JCX0KLQl9IGVsc2UgewotCQlz
d2l0Y2ggKHZvbHRhZ2Vfc3dpbmcgJiBEUF9UUkFJTl9WT0xUQUdFX1NXSU5HX01BU0spIHsKLQkJ
Y2FzZSBEUF9UUkFJTl9WT0xUQUdFX1NXSU5HX0xFVkVMXzA6Ci0JCQlyZXR1cm4gRFBfVFJBSU5f
UFJFX0VNUEhfTEVWRUxfMjsKLQkJY2FzZSBEUF9UUkFJTl9WT0xUQUdFX1NXSU5HX0xFVkVMXzE6
Ci0JCQlyZXR1cm4gRFBfVFJBSU5fUFJFX0VNUEhfTEVWRUxfMjsKLQkJY2FzZSBEUF9UUkFJTl9W
T0xUQUdFX1NXSU5HX0xFVkVMXzI6Ci0JCQlyZXR1cm4gRFBfVFJBSU5fUFJFX0VNUEhfTEVWRUxf
MTsKLQkJY2FzZSBEUF9UUkFJTl9WT0xUQUdFX1NXSU5HX0xFVkVMXzM6Ci0JCWRlZmF1bHQ6Ci0J
CQlyZXR1cm4gRFBfVFJBSU5fUFJFX0VNUEhfTEVWRUxfMDsKLQkJfQotCX0KK3N0YXRpYyB1OCBp
bnRlbF9kcF9wcmVfZW1wZW1waF9tYXhfMyhzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKQorewor
CXJldHVybiBEUF9UUkFJTl9QUkVfRU1QSF9MRVZFTF8zOwogfQogCiBzdGF0aWMgdm9pZCB2bHZf
c2V0X3NpZ25hbF9sZXZlbHMoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCkKQEAgLTg0OTEsNiAr
ODQ1NywxNSBAQCBib29sIGludGVsX2RwX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2LAogCWVsc2UKIAkJaW50ZWxfZGlnX3BvcnQtPmRwLnNldF9zaWduYWxfbGV2ZWxzID0g
ZzR4X3NldF9zaWduYWxfbGV2ZWxzOwogCisJaWYgKElTX1ZBTExFWVZJRVcoZGV2X3ByaXYpIHx8
IElTX0NIRVJSWVZJRVcoZGV2X3ByaXYpIHx8CisJICAgIChIQVNfUENIX1NQTElUKGRldl9wcml2
KSAmJiBwb3J0ICE9IFBPUlRfQSkpIHsKKwkJaW50ZWxfZGlnX3BvcnQtPmRwLnByZWVtcGhfbWF4
ID0gaW50ZWxfZHBfcHJlX2VtcGVtcGhfbWF4XzM7CisJCWludGVsX2RpZ19wb3J0LT5kcC52b2x0
YWdlX21heCA9IGludGVsX2RwX3ZvbHRhZ2VfbWF4XzM7CisJfSBlbHNlIHsKKwkJaW50ZWxfZGln
X3BvcnQtPmRwLnByZWVtcGhfbWF4ID0gaW50ZWxfZHBfcHJlX2VtcGVtcGhfbWF4XzI7CisJCWlu
dGVsX2RpZ19wb3J0LT5kcC52b2x0YWdlX21heCA9IGludGVsX2RwX3ZvbHRhZ2VfbWF4XzI7CisJ
fQorCiAJaW50ZWxfZGlnX3BvcnQtPmRwLm91dHB1dF9yZWcgPSBvdXRwdXRfcmVnOwogCWludGVs
X2RpZ19wb3J0LT5tYXhfbGFuZXMgPSA0OwogCWludGVsX2RpZ19wb3J0LT5kcC5yZWdzLmRwX3Rw
X2N0bCA9IERQX1RQX0NUTChwb3J0KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHAuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHAuaAppbmRleCA2NjU5Y2UxNWE2OTMuLmU4Mzc1YTc1YzNlYyAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZHAuaApAQCAtOTEsMTAgKzkxLDYgQEAgaW50ZWxfZHBfcHJvZ3Jh
bV9saW5rX3RyYWluaW5nX3BhdHRlcm4oc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwKIHZvaWQK
IGludGVsX2RwX3NldF9zaWduYWxfbGV2ZWxzKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHApOwog
dm9pZCBpbnRlbF9kcF9zZXRfaWRsZV9saW5rX3RyYWluKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxf
ZHApOwotdTgKLWludGVsX2RwX3ZvbHRhZ2VfbWF4KHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAp
OwotdTgKLWludGVsX2RwX3ByZV9lbXBoYXNpc19tYXgoc3RydWN0IGludGVsX2RwICppbnRlbF9k
cCwgdTggdm9sdGFnZV9zd2luZyk7CiB2b2lkIGludGVsX2RwX2NvbXB1dGVfcmF0ZShzdHJ1Y3Qg
aW50ZWxfZHAgKmludGVsX2RwLCBpbnQgcG9ydF9jbG9jaywKIAkJCSAgIHU4ICpsaW5rX2J3LCB1
OCAqcmF0ZV9zZWxlY3QpOwogYm9vbCBpbnRlbF9kcF9zb3VyY2Vfc3VwcG9ydHNfaGJyMihzdHJ1
Y3QgaW50ZWxfZHAgKmludGVsX2RwKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHBfbGlua190cmFpbmluZy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kcF9saW5rX3RyYWluaW5nLmMKaW5kZXggZTRmMTg0MzE3MGI3Li4xNzFk
OWU4NDJmYzAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHBfbGlua190cmFpbmluZy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZHBfbGlua190cmFpbmluZy5jCkBAIC0zNCw2ICszNCwyMSBAQCBpbnRlbF9kcF9kdW1wX2xp
bmtfc3RhdHVzKGNvbnN0IHU4IGxpbmtfc3RhdHVzW0RQX0xJTktfU1RBVFVTX1NJWkVdKQogCQkg
ICAgICBsaW5rX3N0YXR1c1szXSwgbGlua19zdGF0dXNbNF0sIGxpbmtfc3RhdHVzWzVdKTsKIH0K
IAorc3RhdGljIHU4IGRwX3ByZV9lbXBoYXNpc19tYXgodTggdm9sdGFnZV9zd2luZykKK3sKKwlz
d2l0Y2ggKHZvbHRhZ2Vfc3dpbmcgJiBEUF9UUkFJTl9WT0xUQUdFX1NXSU5HX01BU0spIHsKKwlj
YXNlIERQX1RSQUlOX1ZPTFRBR0VfU1dJTkdfTEVWRUxfMDoKKwkJcmV0dXJuIERQX1RSQUlOX1BS
RV9FTVBIX0xFVkVMXzM7CisJY2FzZSBEUF9UUkFJTl9WT0xUQUdFX1NXSU5HX0xFVkVMXzE6CisJ
CXJldHVybiBEUF9UUkFJTl9QUkVfRU1QSF9MRVZFTF8yOworCWNhc2UgRFBfVFJBSU5fVk9MVEFH
RV9TV0lOR19MRVZFTF8yOgorCQlyZXR1cm4gRFBfVFJBSU5fUFJFX0VNUEhfTEVWRUxfMTsKKwlj
YXNlIERQX1RSQUlOX1ZPTFRBR0VfU1dJTkdfTEVWRUxfMzoKKwlkZWZhdWx0OgorCQlyZXR1cm4g
RFBfVFJBSU5fUFJFX0VNUEhfTEVWRUxfMDsKKwl9Cit9CisKIHZvaWQgaW50ZWxfZHBfZ2V0X2Fk
anVzdF90cmFpbihzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogCQkJICAgICAgIGNvbnN0IHU4
IGxpbmtfc3RhdHVzW0RQX0xJTktfU1RBVFVTX1NJWkVdKQogewpAQCAtNTMsMTEgKzY4LDEyIEBA
IHZvaWQgaW50ZWxfZHBfZ2V0X2FkanVzdF90cmFpbihzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2Rw
LAogCQkJcCA9IHRoaXNfcDsKIAl9CiAKLQl2b2x0YWdlX21heCA9IGludGVsX2RwX3ZvbHRhZ2Vf
bWF4KGludGVsX2RwKTsKKwl2b2x0YWdlX21heCA9IGludGVsX2RwLT52b2x0YWdlX21heChpbnRl
bF9kcCk7CiAJaWYgKHYgPj0gdm9sdGFnZV9tYXgpCiAJCXYgPSB2b2x0YWdlX21heCB8IERQX1RS
QUlOX01BWF9TV0lOR19SRUFDSEVEOwogCi0JcHJlZW1waF9tYXggPSBpbnRlbF9kcF9wcmVfZW1w
aGFzaXNfbWF4KGludGVsX2RwLCB2KTsKKwlwcmVlbXBoX21heCA9IG1pbihpbnRlbF9kcC0+cHJl
ZW1waF9tYXgoaW50ZWxfZHApLAorCQkJICBkcF9wcmVfZW1waGFzaXNfbWF4KHYpKTsKIAlpZiAo
cCA+PSBwcmVlbXBoX21heCkKIAkJcCA9IHByZWVtcGhfbWF4IHwgRFBfVFJBSU5fTUFYX1BSRV9F
TVBIQVNJU19SRUFDSEVEOwogCi0tIAoyLjI0LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeAo=

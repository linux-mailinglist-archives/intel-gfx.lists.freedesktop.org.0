Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 21EF052398
	for <lists+intel-gfx@lfdr.de>; Tue, 25 Jun 2019 08:35:00 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8148589F3B;
	Tue, 25 Jun 2019 06:34:58 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-wm1-x343.google.com (mail-wm1-x343.google.com
 [IPv6:2a00:1450:4864:20::343])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2369689F3B
 for <intel-gfx@lists.freedesktop.org>; Tue, 25 Jun 2019 06:34:56 +0000 (UTC)
Received: by mail-wm1-x343.google.com with SMTP id a15so1523469wmj.5
 for <intel-gfx@lists.freedesktop.org>; Mon, 24 Jun 2019 23:34:56 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=QONe0+LzDFNxFsy4iReLNlTIEOZiEZZeRJdYbIXl5/g=;
 b=tI1vIq50jZ1G4+b7BKGj4RkGjlUl7UCmtO5axTnyM3S1ehGF3VqEWY/6Az5ov2ftor
 eKP3JS4Vda0QiHZyLhWHhBn/38OvXXFeN74/Puw/c5iloIIh5a/Vcu4WRr7U7AO5u6Mh
 9we6PB6MkNpqOWA/OAW/grnbO0rxVAyuseHv9x0OVZd6zWK1jV/JDfMwk4xQCCj71Zcs
 Qs/LdDyJmyhqV3aZELISnyVIKenuEglR3jOEoTfhSVUEVdYxCmNHD4rzN7CjcTW1NMyn
 eOUvLji5FSsmCosNklYIKuiGMIa5O3ne9rjxWiRJvOjaAbSu8M1CouplcshwlBHiZD8S
 ytPQ==
X-Gm-Message-State: APjAAAVMEdZ3u3hYByJcHuucgRgCTRK4ewXPH8n477uMwTdkPWUyGbcQ
 24BGjoD6+Bao9wv2LGwarZfRfzd+Vx3gtFBM/tQ=
X-Google-Smtp-Source: APXvYqwfAaSEytV1MBJW7b5GwVLhXoeovbMg3EAuDMk6r7N9f+6pxfD0odbKy/0XAr0YnDjgWlctB6bHPAc4/2rd07g=
X-Received: by 2002:a1c:1947:: with SMTP id 68mr17903368wmz.165.1561444494595; 
 Mon, 24 Jun 2019 23:34:54 -0700 (PDT)
MIME-Version: 1.0
References: <20190624210850.17223-1-manasi.d.navare@intel.com>
 <20190624210850.17223-9-manasi.d.navare@intel.com>
In-Reply-To: <20190624210850.17223-9-manasi.d.navare@intel.com>
From: Lucas De Marchi <lucas.de.marchi@gmail.com>
Date: Mon, 24 Jun 2019 23:34:42 -0700
Message-ID: <CAKi4VAL-tKKmqETqUTtp8zfZ=aAawEvmxesvT9sPBhTg=TY_gA@mail.gmail.com>
To: Manasi Navare <manasi.d.navare@intel.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=QONe0+LzDFNxFsy4iReLNlTIEOZiEZZeRJdYbIXl5/g=;
 b=LZZjtbr4T4ay0bVIFNj3iDMVCmLuUcD1HnLa6AfM6KfJApHKDA2Z1EfRwn02cFnxSL
 IfH+ds8CKuhXQoWfhvlUV9PKVJF7HyAkrLbSHaO2hQqibTmj+YlIud+2LWScHoYnd3kS
 zohYmhzetYw2xE9Uy0mc6qQHKMPTeT36a0lFWEYY/jXc0FT/gFdFkv/XvupljfbV3duS
 8Q8UWGwXuwgEe2IzyzzHAtE1d3+hHmXLtnxmEcypnv4abV81OTf57v2G3MhsdIn1+YVm
 8Mcs/NP8LXPfVYMAYedS6LW+84L9QKKlXL7jBXdmes2KrBaxPT/iEc6o3iIyjFZsfq9q
 MfRg==
Subject: Re: [Intel-gfx] [PATCH v3 8/8] drm/i915/display/icl: In port sync
 mode disable slaves first then masters
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>,
 Intel Graphics <intel-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gTW9uLCBKdW4gMjQsIDIwMTkgYXQgMjowNyBQTSBNYW5hc2kgTmF2YXJlIDxtYW5hc2kuZC5u
YXZhcmVAaW50ZWwuY29tPiB3cm90ZToKPgo+IEluIHRoZSB0cmFuc2NvZGVyIHBvcnQgc3luYyBt
b2RlLCB0aGUgc2xhdmUgdHJhbnNjb2RlcnMgbWFzayB0aGVpciB2YmxhbmtzCj4gdW50aWwgbWFz
dGVyIHRyYW5zY29kZXIncyB2Ymxhbmsgc28gd2hpbGUgZGlzYWJsaW5nIHRoZW0sIG1ha2UKPiBz
dXJlIHNsYXZlcyBhcmUgZGlzYWJsZWQgZmlyc3QgYW5kIHRoZW4gdGhlIG1hc3RlcnMuCj4KPiBD
YzogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KPiBDYzog
TWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KPiBD
YzogTWF0dCBSb3BlciA8bWF0dGhldy5kLnJvcGVyQGludGVsLmNvbT4KPiBDYzogSmFuaSBOaWt1
bGEgPGphbmkubmlrdWxhQGludGVsLmNvbT4KPiBTaWduZWQtb2ZmLWJ5OiBNYW5hc2kgTmF2YXJl
IDxtYW5hc2kuZC5uYXZhcmVAaW50ZWwuY29tPgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyB8IDExNyArKysrKysrKysrKysrKysrKystCj4gIDEg
ZmlsZSBjaGFuZ2VkLCAxMTEgaW5zZXJ0aW9ucygrKSwgNiBkZWxldGlvbnMoLSkKPgo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCj4gaW5kZXggMGEwZDk3
ZWYwM2Q2Li44NTc0NmEyNmQwZTAgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2Rpc3BsYXkuYwo+IEBAIC0xMzkwMSw2ICsxMzkwMSwxMDYgQEAgc3RhdGljIHZv
aWQgaW50ZWxfY29tbWl0X21vZGVzZXRfZGlzYWJsZXMoc3RydWN0IGRybV9hdG9taWNfc3RhdGUg
KnN0YXRlKQo+ICAgICAgICAgfQo+ICB9Cj4KPiArc3RhdGljIHZvaWQgaWNsX2NvbW1pdF9tb2Rl
c2V0X2Rpc2FibGVzKHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSkKPiArewo+ICsgICAg
ICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IHN0YXRlLT5kZXY7Cj4gKyAgICAgICBzdHJ1Y3Qg
aW50ZWxfYXRvbWljX3N0YXRlICppbnRlbF9zdGF0ZSA9IHRvX2ludGVsX2F0b21pY19zdGF0ZShz
dGF0ZSk7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19p
OTE1KGRldik7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKm9sZF9jcnRjX3N0YXRl
LCAqbmV3X2NydGNfc3RhdGU7Cj4gKyAgICAgICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqbmV3
X2ludGVsX2NydGNfc3RhdGUsICpvbGRfaW50ZWxfY3J0Y19zdGF0ZTsKPiArICAgICAgIHN0cnVj
dCBkcm1fY3J0YyAqY3J0YzsKPiArICAgICAgIHN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRj
Owo+ICsgICAgICAgaW50IGk7Cj4gKwo+ICsgICAgICAgLyoKPiArICAgICAgICAqIERpc2FibGUg
YWxsIHRoZSBQb3J0IFN5bmMgU2xhdmVzIGZpcnN0Cj4gKyAgICAgICAgKi8KPiArICAgICAgIGZv
cl9lYWNoX29sZG5ld19jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0ZSwg
bmV3X2NydGNfc3RhdGUsIGkpIHsKPiArICAgICAgICAgICAgICAgb2xkX2ludGVsX2NydGNfc3Rh
dGUgPSB0b19pbnRlbF9jcnRjX3N0YXRlKG9sZF9jcnRjX3N0YXRlKTsKPiArICAgICAgICAgICAg
ICAgbmV3X2ludGVsX2NydGNfc3RhdGUgPSB0b19pbnRlbF9jcnRjX3N0YXRlKG5ld19jcnRjX3N0
YXRlKTsKPiArICAgICAgICAgICAgICAgaW50ZWxfY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Yyk7
Cj4gKwo+ICsgICAgICAgICAgICAgICBpZiAoIW5lZWRzX21vZGVzZXQobmV3X2NydGNfc3RhdGUp
IHx8Cj4gKyAgICAgICAgICAgICAgICAgICAhaXNfdHJhbnNfcG9ydF9zeW5jX3NsYXZlKG9sZF9p
bnRlbF9jcnRjX3N0YXRlKSkKPiArICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPiAr
Cj4gKyAgICAgICAgICAgICAgIGludGVsX3ByZV9wbGFuZV91cGRhdGUob2xkX2ludGVsX2NydGNf
c3RhdGUsIG5ld19pbnRlbF9jcnRjX3N0YXRlKTsKPiArCj4gKyAgICAgICAgICAgICAgIGlmIChv
bGRfY3J0Y19zdGF0ZS0+YWN0aXZlKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaW50ZWxf
Y3J0Y19kaXNhYmxlX3BsYW5lcyhpbnRlbF9zdGF0ZSwgaW50ZWxfY3J0Yyk7Cj4gKwo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIC8qCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICogV2UgbmVl
ZCB0byBkaXNhYmxlIHBpcGUgQ1JDIGJlZm9yZSBkaXNhYmxpbmcgdGhlIHBpcGUsCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICogb3Igd2UgcmFjZSBhZ2FpbnN0IHZibGFuayBvZmYuCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICovCj4gKyAgICAgICAgICAgICAgICAgICAgICAgaW50ZWxf
Y3J0Y19kaXNhYmxlX3BpcGVfY3JjKGludGVsX2NydGMpOwo+ICsKPiArICAgICAgICAgICAgICAg
ICAgICAgICBkZXZfcHJpdi0+ZGlzcGxheS5jcnRjX2Rpc2FibGUob2xkX2ludGVsX2NydGNfc3Rh
dGUsIHN0YXRlKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBpbnRlbF9jcnRjLT5hY3RpdmUg
PSBmYWxzZTsKPiArICAgICAgICAgICAgICAgICAgICAgICBpbnRlbF9mYmNfZGlzYWJsZShpbnRl
bF9jcnRjKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBpbnRlbF9kaXNhYmxlX3NoYXJlZF9k
cGxsKG9sZF9pbnRlbF9jcnRjX3N0YXRlKTsKPiArCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
LyoKPiArICAgICAgICAgICAgICAgICAgICAgICAgKiBVbmRlcnJ1bnMgZG9uJ3QgYWx3YXlzIHJh
aXNlIGludGVycnVwdHMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICogc28gY2hlY2sgbWFu
dWFsbHkuCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICovCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgaW50ZWxfY2hlY2tfY3B1X2ZpZm9fdW5kZXJydW5zKGRldl9wcml2KTsKPiArICAgICAg
ICAgICAgICAgICAgICAgICBpbnRlbF9jaGVja19wY2hfZmlmb191bmRlcnJ1bnMoZGV2X3ByaXYp
Owo+ICsKPiArICAgICAgICAgICAgICAgICAgICAgICAvKiBGSVhNRSB1bmlmeSB0aGlzIGZvciBh
bGwgcGxhdGZvcm1zICovCj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdfY3J0Y19z
dGF0ZS0+YWN0aXZlICYmCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICFIQVNfR01DSChk
ZXZfcHJpdikgJiYKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2X3ByaXYtPmRpc3Bs
YXkuaW5pdGlhbF93YXRlcm1hcmtzKQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZGV2X3ByaXYtPmRpc3BsYXkuaW5pdGlhbF93YXRlcm1hcmtzKGludGVsX3N0YXRlLAo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIG5ld19pbnRlbF9jcnRjX3N0YXRlKTsKPiArICAgICAgICAgICAgICAgfQo+ICsgICAg
ICAgfQo+ICsKPiArICAgICAgIC8qCj4gKyAgICAgICAgKiBEaXNhYmxlIHJlc3Qgb2YgdGhlIENS
VENzIG90aGVyIHRoYW4gc2xhdmVzCj4gKyAgICAgICAgKi8KPiArICAgICAgIGZvcl9lYWNoX29s
ZG5ld19jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0ZSwgbmV3X2NydGNf
c3RhdGUsIGkpIHsKPiArICAgICAgICAgICAgICAgb2xkX2ludGVsX2NydGNfc3RhdGUgPSB0b19p
bnRlbF9jcnRjX3N0YXRlKG9sZF9jcnRjX3N0YXRlKTsKPiArICAgICAgICAgICAgICAgbmV3X2lu
dGVsX2NydGNfc3RhdGUgPSB0b19pbnRlbF9jcnRjX3N0YXRlKG5ld19jcnRjX3N0YXRlKTsKPiAr
ICAgICAgICAgICAgICAgaW50ZWxfY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Yyk7Cj4gKwo+ICsg
ICAgICAgICAgICAgICBpZiAoIW5lZWRzX21vZGVzZXQobmV3X2NydGNfc3RhdGUpIHx8Cj4gKyAg
ICAgICAgICAgICAgICAgICBpc190cmFuc19wb3J0X3N5bmNfc2xhdmUob2xkX2ludGVsX2NydGNf
c3RhdGUpKQo+ICsgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwo+ICsKPiArICAgICAg
ICAgICAgICAgaW50ZWxfcHJlX3BsYW5lX3VwZGF0ZShvbGRfaW50ZWxfY3J0Y19zdGF0ZSwgbmV3
X2ludGVsX2NydGNfc3RhdGUpOwo+ICsKPiArICAgICAgICAgICAgICAgaWYgKG9sZF9jcnRjX3N0
YXRlLT5hY3RpdmUpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBpbnRlbF9jcnRjX2Rpc2Fi
bGVfcGxhbmVzKGludGVsX3N0YXRlLCBpbnRlbF9jcnRjKTsKPiArCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgLyoKPiArICAgICAgICAgICAgICAgICAgICAgICAgKiBXZSBuZWVkIHRvIGRpc2Fi
bGUgcGlwZSBDUkMgYmVmb3JlIGRpc2FibGluZyB0aGUgcGlwZSwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgKiBvciB3ZSByYWNlIGFnYWluc3QgdmJsYW5rIG9mZi4KPiArICAgICAgICAgICAg
ICAgICAgICAgICAgKi8KPiArICAgICAgICAgICAgICAgICAgICAgICBpbnRlbF9jcnRjX2Rpc2Fi
bGVfcGlwZV9jcmMoaW50ZWxfY3J0Yyk7Cj4gKwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGRl
dl9wcml2LT5kaXNwbGF5LmNydGNfZGlzYWJsZShvbGRfaW50ZWxfY3J0Y19zdGF0ZSwgc3RhdGUp
Owo+ICsgICAgICAgICAgICAgICAgICAgICAgIGludGVsX2NydGMtPmFjdGl2ZSA9IGZhbHNlOwo+
ICsgICAgICAgICAgICAgICAgICAgICAgIGludGVsX2ZiY19kaXNhYmxlKGludGVsX2NydGMpOwo+
ICsgICAgICAgICAgICAgICAgICAgICAgIGludGVsX2Rpc2FibGVfc2hhcmVkX2RwbGwob2xkX2lu
dGVsX2NydGNfc3RhdGUpOwo+ICsKPiArICAgICAgICAgICAgICAgICAgICAgICAvKgo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAqIFVuZGVycnVucyBkb24ndCBhbHdheXMgcmFpc2UgaW50ZXJy
dXB0cywKPiArICAgICAgICAgICAgICAgICAgICAgICAgKiBzbyBjaGVjayBtYW51YWxseS4KPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgKi8KPiArICAgICAgICAgICAgICAgICAgICAgICBpbnRl
bF9jaGVja19jcHVfZmlmb191bmRlcnJ1bnMoZGV2X3ByaXYpOwo+ICsgICAgICAgICAgICAgICAg
ICAgICAgIGludGVsX2NoZWNrX3BjaF9maWZvX3VuZGVycnVucyhkZXZfcHJpdik7Cj4gKwo+ICsg
ICAgICAgICAgICAgICAgICAgICAgIC8qIEZJWE1FIHVuaWZ5IHRoaXMgZm9yIGFsbCBwbGF0Zm9y
bXMgKi8KPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld19jcnRjX3N0YXRlLT5hY3Rp
dmUgJiYKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgIUhBU19HTUNIKGRldl9wcml2KSAm
Jgo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZfcHJpdi0+ZGlzcGxheS5pbml0aWFs
X3dhdGVybWFya3MpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZfcHJpdi0+
ZGlzcGxheS5pbml0aWFsX3dhdGVybWFya3MoaW50ZWxfc3RhdGUsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3
X2ludGVsX2NydGNfc3RhdGUpOwo+ICsgICAgICAgICAgICAgICB9Cj4gKyAgICAgICB9CgpOb3Qg
YSBmYW4gb2YgdGhpcyBkdXBsaWNhdGUgY29kZSBoZXJlLiBBdCBsZWFzdCBhIGhlbHBlciBmdW5j
dGlvbgp3b3VsZCBiZSBuZWVkZWQuCgpKb3NlLCBkaWRuJ3QgeW91IGhhdmUgYSBwZW5kaW5nIHBh
dGNoIHRvIGRpc2FibGUgaW4gcmV2ZXJzZSBvcmRlciB0bwpzb2x2ZSB0aGlzIHNhbWUgcHJvYmxl
bT8KCkx1Y2FzIERlIE1hcmNoaQoKPiArfQo+ICsKPiAgc3RhdGljIHZvaWQgaW50ZWxfY29tbWl0
X21vZGVzZXRfZW5hYmxlcyhzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gIHsKPiAg
ICAgICAgIHN0cnVjdCBkcm1fY3J0YyAqY3J0YzsKPiBAQCAtMTQyNTcsNiArMTQzNTcsMTEgQEAg
c3RhdGljIHZvaWQgaW50ZWxfYXRvbWljX2NvbW1pdF90YWlsKHN0cnVjdCBkcm1fYXRvbWljX3N0
YXRlICpzdGF0ZSkKPgo+ICAgICAgICAgaW50ZWxfYXRvbWljX2NvbW1pdF9mZW5jZV93YWl0KGlu
dGVsX3N0YXRlKTsKPgo+ICsgICAgICAgZHJtX2F0b21pY19oZWxwZXJfd2FpdF9mb3JfZGVwZW5k
ZW5jaWVzKHN0YXRlKTsKPiArCj4gKyAgICAgICBpZiAoaW50ZWxfc3RhdGUtPm1vZGVzZXQpCj4g
KyAgICAgICAgICAgICAgIHdha2VyZWYgPSBpbnRlbF9kaXNwbGF5X3Bvd2VyX2dldChkZXZfcHJp
diwgUE9XRVJfRE9NQUlOX01PREVTRVQpOwo+ICsKPiAgICAgICAgIGZvcl9lYWNoX29sZG5ld19j
cnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0ZSwgbmV3X2NydGNfc3RhdGUs
IGkpIHsKPiAgICAgICAgICAgICAgICAgbmV3X2ludGVsX2NydGNfc3RhdGUgPSB0b19pbnRlbF9j
cnRjX3N0YXRlKG5ld19jcnRjX3N0YXRlKTsKPiAgICAgICAgICAgICAgICAgaW50ZWxfY3J0YyA9
IHRvX2ludGVsX2NydGMoY3J0Yyk7Cj4gQEAgLTE0MjY5LDExICsxNDM3NCw2IEBAIHN0YXRpYyB2
b2lkIGludGVsX2F0b21pY19jb21taXRfdGFpbChzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3Rh
dGUpCj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPgo+IC0gICAgICAgZHJtX2F0b21p
Y19oZWxwZXJfd2FpdF9mb3JfZGVwZW5kZW5jaWVzKHN0YXRlKTsKPiAtCj4gLSAgICAgICBpZiAo
aW50ZWxfc3RhdGUtPm1vZGVzZXQpCj4gLSAgICAgICAgICAgICAgIHdha2VyZWYgPSBpbnRlbF9k
aXNwbGF5X3Bvd2VyX2dldChkZXZfcHJpdiwgUE9XRVJfRE9NQUlOX01PREVTRVQpOwo+IC0KPiAg
ICAgICAgIGRldl9wcml2LT5kaXNwbGF5LmNvbW1pdF9tb2Rlc2V0X2Rpc2FibGVzKHN0YXRlKTsK
Pgo+ICAgICAgICAgLyogRklYTUU6IEV2ZW50dWFsbHkgZ2V0IHJpZCBvZiBvdXIgaW50ZWxfY3J0
Yy0+Y29uZmlnIHBvaW50ZXIgKi8KPiBAQCAtMTYxNzAsNyArMTYyNzAsMTIgQEAgdm9pZCBpbnRl
bF9pbml0X2Rpc3BsYXlfaG9va3Moc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+
ICAgICAgICAgZWxzZQo+ICAgICAgICAgICAgICAgICBkZXZfcHJpdi0+ZGlzcGxheS5jb21taXRf
bW9kZXNldF9lbmFibGVzID0gaW50ZWxfY29tbWl0X21vZGVzZXRfZW5hYmxlczsKPgo+IC0gICAg
ICAgZGV2X3ByaXYtPmRpc3BsYXkuY29tbWl0X21vZGVzZXRfZGlzYWJsZXMgPSBpbnRlbF9jb21t
aXRfbW9kZXNldF9kaXNhYmxlczsKPiArICAgICAgIGlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49
IDExKQo+ICsgICAgICAgICAgICAgICBkZXZfcHJpdi0+ZGlzcGxheS5jb21taXRfbW9kZXNldF9k
aXNhYmxlcyA9Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWNsX2NvbW1pdF9tb2Rlc2V0X2Rp
c2FibGVzOwo+ICsgICAgICAgZWxzZQo+ICsgICAgICAgICAgICAgICBkZXZfcHJpdi0+ZGlzcGxh
eS5jb21taXRfbW9kZXNldF9kaXNhYmxlcyA9Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaW50
ZWxfY29tbWl0X21vZGVzZXRfZGlzYWJsZXM7Cj4KPiAgfQo+Cj4gLS0KPiAyLjE5LjEKPgo+IF9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCj4gSW50ZWwtZ2Z4
IG1haWxpbmcgbGlzdAo+IEludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAoKCgotLSAK
THVjYXMgRGUgTWFyY2hpCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVs
LWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 689DB223885
	for <lists+intel-gfx@lfdr.de>; Fri, 17 Jul 2020 11:35:57 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9F9956E0DB;
	Fri, 17 Jul 2020 09:35:52 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (unknown [77.68.26.236])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B411C6E107
 for <intel-gfx@lists.freedesktop.org>; Fri, 17 Jul 2020 09:35:50 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 21847336-1500050 
 for multiple; Fri, 17 Jul 2020 10:35:42 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 17 Jul 2020 10:35:41 +0100
Message-Id: <20200717093541.17030-4-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20200717093541.17030-1-chris@chris-wilson.co.uk>
References: <20200717093541.17030-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 4/4] drm/i915/gt: Distinguish the virtual
 breadcrumbs from the irq breadcrumbs
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Chris Wilson <chris@chris-wilson.co.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gdGhlIHZpcnR1YWwgZW5naW5lcywgd2Ugb25seSB1c2UgdGhlIGludGVsX2JyZWFkY3J1bWJz
IGZvciB0cmFja2luZwpzaWduYWxpbmcgb2Ygc3RhbGUgYnJlYWRjcnVtYnMgZnJvbSB0aGUgaXJx
X3dvcmtlcnMuIFRoZXkgZG8gbm90IGhhdmUKYW55IGFzc29jaWF0ZWQgaW50ZXJydXB0IGhhbmRs
aW5nLCBhY3RpdmUgcmVxdWVzdHMgYXJlIHBhc3NlZCB0byBhCnBoeXNpY2FsIGVuZ2luZSBhbmQg
YXNzb2NpYXRlZCBicmVhZGNydW1iIGludGVycnVwdCBoYW5kbGVyLiBUaGlzIGNhdXNlcwppc3N1
ZXMgZm9yIHVzIGFzIHdlIG5lZWQgdG8gZW5zdXJlIHRoYXQgd2UgZG8gbm90IGFjdHVhbGx5IHRy
eSBhbmQKZW5hYmxlIGludGVycnVwdHMgYW5kIHRoZSBwb3dlcm1hbmFnZW1lbnQgcmVxdWlyZWQg
Zm9yIHRoZW0gb24gdGhlCnZpcnR1YWwgZW5naW5lLCBhcyB0aGV5IHdpbGwgbmV2ZXIgYmUgZGlz
YWJsZWQuIEluc3RlYWQsIGxldCdzCnNwZWNpZnkgdGhlIHBoeXNpY2FsIGVuZ2luZSB1c2VkIGZv
ciBpbnRlcnJ1cHQgaGFuZGxlciBvbiBhIHBhcnRpY3VsYXIKYnJlYWRjcnVtYi4KClNpZ25lZC1v
ZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogVHZydGtv
IFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5jICAgfCA3MSArKysrKysrKysrLS0tLS0tLS0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5oICAgfCAzNiArKysrKysr
KysrCiAuLi4vZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzX3R5cGVzLmggfCA0NyAr
KysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oICAgICAg
ICB8IDE3IC0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyAg
ICAgfCAxNCArKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYyAg
ICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgg
IHwgMzEgKy0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2lycS5jICAg
ICAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAgICAgICAg
ICB8IDExICsrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYyAgICAgICAg
IHwgIDEgKwogLi4uL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1Ym1pc3Npb24uYyAgIHwg
IDMgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jwcy5jICAgICAgICAgICB8ICAx
ICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMgICAgICAgICB8IDEwICsr
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYyAgICAgICAgICAgICAgIHwgIDEgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMgICAgICAgICAgIHwgIDEgKwogZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmggICAgICAgICAgIHwgIDQgLS0KIDE2IGZp
bGVzIGNoYW5nZWQsIDE2MSBpbnNlcnRpb25zKCspLCA5MSBkZWxldGlvbnMoLSkKIGNyZWF0ZSBt
b2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5oCiBj
cmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVt
YnNfdHlwZXMuaAoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Jy
ZWFkY3J1bWJzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5j
CmluZGV4IGFkYjZjMWMxMjczZS4uZDc2YjFhMjEwOTJjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmMKQEAgLTU1LDIyICs1NSwyMSBAQCBzdGF0aWMgdm9p
ZCBpcnFfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAKIHN0YXRpYyB2
b2lkIF9faW50ZWxfYnJlYWRjcnVtYnNfZGlzYXJtX2lycShzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVt
YnMgKmIpCiB7Ci0Jc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lID0KLQkJY29udGFpbmVy
X29mKGIsIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MsIGJyZWFkY3J1bWJzKTsKLQogCWxvY2tkZXBf
YXNzZXJ0X2hlbGQoJmItPmlycV9sb2NrKTsKIAorCWlmICghYi0+aXJxX2VuZ2luZSkKKwkJcmV0
dXJuOworCiAJR0VNX0JVR19PTighYi0+aXJxX2VuYWJsZWQpOwogCWlmICghLS1iLT5pcnFfZW5h
YmxlZCkKLQkJaXJxX2Rpc2FibGUoZW5naW5lKTsKKwkJaXJxX2Rpc2FibGUoYi0+aXJxX2VuZ2lu
ZSk7CiAKIAlXUklURV9PTkNFKGItPmlycV9hcm1lZCwgZmFsc2UpOwotCWludGVsX2d0X3BtX3B1
dF9hc3luYyhlbmdpbmUtPmd0KTsKKwlpbnRlbF9ndF9wbV9wdXRfYXN5bmMoYi0+aXJxX2VuZ2lu
ZS0+Z3QpOwogfQogCi12b2lkIGludGVsX2VuZ2luZV9kaXNhcm1fYnJlYWRjcnVtYnMoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQordm9pZCBpbnRlbF9icmVhZGNydW1ic19wYXJrKHN0
cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYikKIHsKLQlzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMg
KmIgPSAmZW5naW5lLT5icmVhZGNydW1iczsKIAl1bnNpZ25lZCBsb25nIGZsYWdzOwogCiAJaWYg
KCFSRUFEX09OQ0UoYi0+aXJxX2FybWVkKSkKQEAgLTEzMywxMyArMTMyLDggQEAgX19kbWFfZmVu
Y2Vfc2lnbmFsX19ub3RpZnkoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsCiAKIHN0YXRpYyB2b2lk
IGFkZF9yZXRpcmUoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiLCBzdHJ1Y3QgaW50ZWxfdGlt
ZWxpbmUgKnRsKQogewotCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9Ci0JCWNvbnRh
aW5lcl9vZihiLCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzLCBicmVhZGNydW1icyk7Ci0KLQlpZiAo
dW5saWtlbHkoaW50ZWxfZW5naW5lX2lzX3ZpcnR1YWwoZW5naW5lKSkpCi0JCWVuZ2luZSA9IGlu
dGVsX3ZpcnR1YWxfZW5naW5lX2dldF9zaWJsaW5nKGVuZ2luZSwgMCk7Ci0KLQlpbnRlbF9lbmdp
bmVfYWRkX3JldGlyZShlbmdpbmUsIHRsKTsKKwlpZiAoYi0+aXJxX2VuZ2luZSkKKwkJaW50ZWxf
ZW5naW5lX2FkZF9yZXRpcmUoYi0+aXJxX2VuZ2luZSwgdGwpOwogfQogCiBzdGF0aWMgdm9pZCBf
X3NpZ25hbF9yZXF1ZXN0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCBzdHJ1Y3QgbGlzdF9oZWFk
ICpzaWduYWxzKQpAQCAtMjIxLDE0ICsyMTUsMTMgQEAgc3RhdGljIHZvaWQgc2lnbmFsX2lycV93
b3JrKHN0cnVjdCBpcnFfd29yayAqd29yaykKIAogc3RhdGljIHZvaWQgX19pbnRlbF9icmVhZGNy
dW1ic19hcm1faXJxKHN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYikKIHsKLQlzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzICplbmdpbmUgPQotCQljb250YWluZXJfb2YoYiwgc3RydWN0IGludGVsX2Vu
Z2luZV9jcywgYnJlYWRjcnVtYnMpOwotCiAJbG9ja2RlcF9hc3NlcnRfaGVsZCgmYi0+aXJxX2xv
Y2spOworCiAJaWYgKGItPmlycV9hcm1lZCkKIAkJcmV0dXJuOwogCi0JaWYgKCFpbnRlbF9ndF9w
bV9nZXRfaWZfYXdha2UoZW5naW5lLT5ndCkpCisJR0VNX0JVR19PTighYi0+aXJxX2VuZ2luZSk7
CisJaWYgKCFpbnRlbF9ndF9wbV9nZXRfaWZfYXdha2UoYi0+aXJxX2VuZ2luZS0+Z3QpKQogCQly
ZXR1cm47CiAKIAkvKgpAQCAtMjQ4LDM3ICsyNDEsNTEgQEAgc3RhdGljIHZvaWQgX19pbnRlbF9i
cmVhZGNydW1ic19hcm1faXJxKHN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYikKIAkgKi8KIAog
CWlmICghYi0+aXJxX2VuYWJsZWQrKykKLQkJaXJxX2VuYWJsZShlbmdpbmUpOworCQlpcnFfZW5h
YmxlKGItPmlycV9lbmdpbmUpOwogfQogCi12b2lkIGludGVsX2VuZ2luZV9pbml0X2JyZWFkY3J1
bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKK3N0cnVjdCBpbnRlbF9icmVhZGNy
dW1icyAqCitpbnRlbF9icmVhZGNydW1ic19jcmVhdGUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
aXJxX2VuZ2luZSkKIHsKLQlzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKmIgPSAmZW5naW5lLT5i
cmVhZGNydW1iczsKKwlzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKmI7CisKKwliID0ga3phbGxv
YyhzaXplb2YoKmIpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIWIpCisJCXJldHVybiBOVUxMOwogCiAJ
c3Bpbl9sb2NrX2luaXQoJmItPmlycV9sb2NrKTsKIAlJTklUX0xJU1RfSEVBRCgmYi0+c2lnbmFs
ZXJzKTsKIAlJTklUX0xJU1RfSEVBRCgmYi0+c2lnbmFsZWRfcmVxdWVzdHMpOwogCiAJaW5pdF9p
cnFfd29yaygmYi0+aXJxX3dvcmssIHNpZ25hbF9pcnFfd29yayk7CisKKwliLT5pcnFfZW5naW5l
ID0gaXJxX2VuZ2luZTsKKwlpZiAoIWlycV9lbmdpbmUpCisJCWItPmlycV9hcm1lZCA9IHRydWU7
IC8qIGZha2UgSFcsIHVzZWQgZm9yIGlycV93b3JrICovCisKKwlyZXR1cm4gYjsKIH0KIAotdm9p
ZCBpbnRlbF9lbmdpbmVfcmVzZXRfYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lKQordm9pZCBpbnRlbF9icmVhZGNydW1ic19yZXNldChzdHJ1Y3QgaW50ZWxfYnJlYWRj
cnVtYnMgKmIpCiB7Ci0Jc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiID0gJmVuZ2luZS0+YnJl
YWRjcnVtYnM7CiAJdW5zaWduZWQgbG9uZyBmbGFnczsKIAorCWlmICghYi0+aXJxX2VuZ2luZSkK
KwkJcmV0dXJuOworCiAJc3Bpbl9sb2NrX2lycXNhdmUoJmItPmlycV9sb2NrLCBmbGFncyk7CiAK
IAlpZiAoYi0+aXJxX2VuYWJsZWQpCi0JCWlycV9lbmFibGUoZW5naW5lKTsKKwkJaXJxX2VuYWJs
ZShiLT5pcnFfZW5naW5lKTsKIAllbHNlCi0JCWlycV9kaXNhYmxlKGVuZ2luZSk7CisJCWlycV9k
aXNhYmxlKGItPmlycV9lbmdpbmUpOwogCiAJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmYi0+aXJx
X2xvY2ssIGZsYWdzKTsKIH0KIAotdm9pZCBpbnRlbF9lbmdpbmVfZmluaV9icmVhZGNydW1icyhz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCit2b2lkIGludGVsX2JyZWFkY3J1bWJzX2Zy
ZWUoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiKQogeworCWtmcmVlKGIpOwogfQogCiBzdGF0
aWMgdm9pZCBpbnNlcnRfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwKQEAgLTM2
NywxMSArMzc0LDExIEBAIGJvb2wgaTkxNV9yZXF1ZXN0X2VuYWJsZV9icmVhZGNydW1iKHN0cnVj
dCBpOTE1X3JlcXVlc3QgKnJxKQogCSAqIHJlcXVlc3Qgc3VibWl0L3Vuc3VibWl0IHBhdGgsIGFu
ZCBzbyB3ZSBtdXN0IGJlIG1vcmUgY2FyZWZ1bCB0bwogCSAqIGFjcXVpcmUgdGhlIHJpZ2h0IGxv
Y2suCiAJICovCi0JYiA9ICZSRUFEX09OQ0UocnEtPmVuZ2luZSktPmJyZWFkY3J1bWJzOworCWIg
PSBSRUFEX09OQ0UocnEtPmVuZ2luZSktPmJyZWFkY3J1bWJzOwogCXNwaW5fbG9jaygmYi0+aXJx
X2xvY2spOwotCXdoaWxlICh1bmxpa2VseShiICE9ICZSRUFEX09OQ0UocnEtPmVuZ2luZSktPmJy
ZWFkY3J1bWJzKSkgeworCXdoaWxlICh1bmxpa2VseShiICE9IFJFQURfT05DRShycS0+ZW5naW5l
KS0+YnJlYWRjcnVtYnMpKSB7CiAJCXNwaW5fdW5sb2NrKCZiLT5pcnFfbG9jayk7Ci0JCWIgPSAm
UkVBRF9PTkNFKHJxLT5lbmdpbmUpLT5icmVhZGNydW1iczsKKwkJYiA9IFJFQURfT05DRShycS0+
ZW5naW5lKS0+YnJlYWRjcnVtYnM7CiAJCXNwaW5fbG9jaygmYi0+aXJxX2xvY2spOwogCX0KIApA
QCAtMzkyLDcgKzM5OSw3IEBAIGJvb2wgaTkxNV9yZXF1ZXN0X2VuYWJsZV9icmVhZGNydW1iKHN0
cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQogCiB2b2lkIGk5MTVfcmVxdWVzdF9jYW5jZWxfYnJlYWRj
cnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkKIHsKLQlzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVt
YnMgKmIgPSAmcnEtPmVuZ2luZS0+YnJlYWRjcnVtYnM7CisJc3RydWN0IGludGVsX2JyZWFkY3J1
bWJzICpiID0gcnEtPmVuZ2luZS0+YnJlYWRjcnVtYnM7CiAKIAkvKgogCSAqIFdlIG11c3Qgd2Fp
dCBmb3IgYi0+aXJxX2xvY2sgc28gdGhhdCB3ZSBrbm93IHRoZSBpbnRlcnJ1cHQgaGFuZGxlcgpA
QCAtNDE2LDExICs0MjMsMTEgQEAgdm9pZCBpOTE1X3JlcXVlc3RfY2FuY2VsX2JyZWFkY3J1bWIo
c3RydWN0IGk5MTVfcmVxdWVzdCAqcnEpCiB2b2lkIGludGVsX2VuZ2luZV9wcmludF9icmVhZGNy
dW1icyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAJCQkJICAgIHN0cnVjdCBkcm1f
cHJpbnRlciAqcCkKIHsKLQlzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKmIgPSAmZW5naW5lLT5i
cmVhZGNydW1iczsKKwlzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKmIgPSBlbmdpbmUtPmJyZWFk
Y3J1bWJzOwogCXN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZTsKIAlzdHJ1Y3QgaTkxNV9yZXF1ZXN0
ICpycTsKIAotCWlmIChsaXN0X2VtcHR5KCZiLT5zaWduYWxlcnMpKQorCWlmICghYiB8fCBsaXN0
X2VtcHR5KCZiLT5zaWduYWxlcnMpKQogCQlyZXR1cm47CiAKIAlkcm1fcHJpbnRmKHAsICJTaWdu
YWxzOlxuIik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVh
ZGNydW1icy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuaApu
ZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjBkMjVmNzkzMTU5ZQotLS0g
L2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJz
LmgKQEAgLTAsMCArMSwzNiBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVCAqLwor
LyoKKyAqIENvcHlyaWdodCDCqSAyMDE5IEludGVsIENvcnBvcmF0aW9uCisgKi8KKworI2lmbmRl
ZiBfX0lOVEVMX0JSRUFEQ1JVTUJTX19fCisjZGVmaW5lIF9fSU5URUxfQlJFQURDUlVNQlNfXwor
CisjaW5jbHVkZSA8bGludXgvaXJxX3dvcmsuaD4KKworI2luY2x1ZGUgImludGVsX2VuZ2luZV90
eXBlcy5oIgorCitzdHJ1Y3QgZHJtX3ByaW50ZXI7CitzdHJ1Y3QgaTkxNV9yZXF1ZXN0Oworc3Ry
dWN0IGludGVsX2JyZWFkY3J1bWJzOworCitzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKgoraW50
ZWxfYnJlYWRjcnVtYnNfY3JlYXRlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmlycV9lbmdpbmUp
Owordm9pZCBpbnRlbF9icmVhZGNydW1ic19mcmVlKHN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAq
Yik7CisKK3ZvaWQgaW50ZWxfYnJlYWRjcnVtYnNfcmVzZXQoc3RydWN0IGludGVsX2JyZWFkY3J1
bWJzICpiKTsKK3ZvaWQgaW50ZWxfYnJlYWRjcnVtYnNfcGFyayhzdHJ1Y3QgaW50ZWxfYnJlYWRj
cnVtYnMgKmIpOworCitzdGF0aWMgaW5saW5lIHZvaWQKK2ludGVsX2VuZ2luZV9zaWduYWxfYnJl
YWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQoreworCWlycV93b3JrX3F1
ZXVlKCZlbmdpbmUtPmJyZWFkY3J1bWJzLT5pcnFfd29yayk7Cit9CisKK3ZvaWQgaW50ZWxfZW5n
aW5lX3ByaW50X2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKKwkJ
CQkgICAgc3RydWN0IGRybV9wcmludGVyICpwKTsKKworYm9vbCBpOTE1X3JlcXVlc3RfZW5hYmxl
X2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCk7Cit2b2lkIGk5MTVfcmVx
dWVzdF9jYW5jZWxfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KTsKKwor
I2VuZGlmIC8qIF9fSU5URUxfQlJFQURDUlVNQlNfXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnNfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzX3R5cGVzLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMDAwMDAwLi44ZTUzYjk5NDI2OTUKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1ic190eXBlcy5oCkBAIC0wLDAgKzEs
NDcgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQgKi8KKy8qCisgKiBDb3B5cmln
aHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpZm5kZWYgX19JTlRFTF9CUkVB
RENSVU1CU19UWVBFU19fCisjZGVmaW5lIF9fSU5URUxfQlJFQURDUlVNQlNfVFlQRVNfXworCisj
aW5jbHVkZSA8bGludXgvaXJxX3dvcmsuaD4KKyNpbmNsdWRlIDxsaW51eC9saXN0Lmg+CisjaW5j
bHVkZSA8bGludXgvc3BpbmxvY2suaD4KKyNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgorCisvKgor
ICogUmF0aGVyIHRoYW4gaGF2ZSBldmVyeSBjbGllbnQgd2FpdCB1cG9uIGFsbCB1c2VyIGludGVy
cnVwdHMsCisgKiB3aXRoIHRoZSBoZXJkIHdha2luZyBhZnRlciBldmVyeSBpbnRlcnJ1cHQgYW5k
IGVhY2ggZG9pbmcgdGhlCisgKiBoZWF2eXdlaWdodCBzZXFubyBkYW5jZSwgd2UgZGVsZWdhdGUg
dGhlIHRhc2sgKG9mIGJlaW5nIHRoZQorICogYm90dG9tLWhhbGYgb2YgdGhlIHVzZXIgaW50ZXJy
dXB0KSB0byB0aGUgZmlyc3QgY2xpZW50LiBBZnRlcgorICogZXZlcnkgaW50ZXJydXB0LCB3ZSB3
YWtlIHVwIG9uZSBjbGllbnQsIHdobyBkb2VzIHRoZSBoZWF2eXdlaWdodAorICogY29oZXJlbnQg
c2Vxbm8gcmVhZCBhbmQgZWl0aGVyIGdvZXMgYmFjayB0byBzbGVlcCAoaWYgaW5jb21wbGV0ZSks
CisgKiBvciB3YWtlcyB1cCBhbGwgdGhlIGNvbXBsZXRlZCBjbGllbnRzIGluIHBhcmFsbGVsLCBi
ZWZvcmUgdGhlbgorICogdHJhbnNmZXJyaW5nIHRoZSBib3R0b20taGFsZiBzdGF0dXMgdG8gdGhl
IG5leHQgY2xpZW50IGluIHRoZSBxdWV1ZS4KKyAqCisgKiBDb21wYXJlZCB0byB3YWxraW5nIHRo
ZSBlbnRpcmUgbGlzdCBvZiB3YWl0ZXJzIGluIGEgc2luZ2xlIGRlZGljYXRlZAorICogYm90dG9t
LWhhbGYsIHdlIHJlZHVjZSB0aGUgbGF0ZW5jeSBvZiB0aGUgZmlyc3Qgd2FpdGVyIGJ5IGF2b2lk
aW5nCisgKiBhIGNvbnRleHQgc3dpdGNoLCBidXQgaW5jdXIgYWRkaXRpb25hbCBjb2hlcmVudCBz
ZXFubyByZWFkcyB3aGVuCisgKiBmb2xsb3dpbmcgdGhlIGNoYWluIG9mIHJlcXVlc3QgYnJlYWRj
cnVtYnMuIFNpbmNlIGl0IGlzIG1vc3QgbGlrZWx5CisgKiB0aGF0IHdlIGhhdmUgYSBzaW5nbGUg
Y2xpZW50IHdhaXRpbmcgb24gZWFjaCBzZXFubywgdGhlbiByZWR1Y2luZworICogdGhlIG92ZXJo
ZWFkIG9mIHdha2luZyB0aGF0IGNsaWVudCBpcyBtdWNoIHByZWZlcnJlZC4KKyAqLworc3RydWN0
IGludGVsX2JyZWFkY3J1bWJzIHsKKwlzcGlubG9ja190IGlycV9sb2NrOyAvKiBwcm90ZWN0cyB0
aGUgbGlzdHMgdXNlZCBpbiBoYXJkaXJxIGNvbnRleHQgKi8KKworCS8qIE5vdCBhbGwgYnJlYWRj
cnVtYnMgYXJlIGF0dGFjaGVkIHRvIHBoeXNpY2FsIEhXICovCisJc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqaXJxX2VuZ2luZTsKKworCXN0cnVjdCBsaXN0X2hlYWQgc2lnbmFsZXJzOworCXN0cnVj
dCBsaXN0X2hlYWQgc2lnbmFsZWRfcmVxdWVzdHM7CisKKwlzdHJ1Y3QgaXJxX3dvcmsgaXJxX3dv
cms7IC8qIGZvciB1c2UgZnJvbSBpbnNpZGUgaXJxX2xvY2sgKi8KKworCXVuc2lnbmVkIGludCBp
cnFfZW5hYmxlZDsKKworCWJvb2wgaXJxX2FybWVkOworfTsKKworI2VuZGlmIC8qIF9fSU5URUxf
QlJFQURDUlVNQlNfVFlQRVNfXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZW5naW5lLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUu
aAppbmRleCBmYWYwMGEzNTNlMjUuLjA4ZTJjMDAwZGNjMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZW5naW5lLmgKQEAgLTIyMywyMyArMjIzLDYgQEAgdm9pZCBpbnRlbF9lbmdpbmVf
Z2V0X2luc3Rkb25lKGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAogdm9p
ZCBpbnRlbF9lbmdpbmVfaW5pdF9leGVjbGlzdHMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5n
aW5lKTsKIAotdm9pZCBpbnRlbF9lbmdpbmVfaW5pdF9icmVhZGNydW1icyhzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmUpOwotdm9pZCBpbnRlbF9lbmdpbmVfZmluaV9icmVhZGNydW1icyhz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwotCi12b2lkIGludGVsX2VuZ2luZV9kaXNh
cm1fYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKLQotc3RhdGlj
IGlubGluZSB2b2lkCi1pbnRlbF9lbmdpbmVfc2lnbmFsX2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSkKLXsKLQlpcnFfd29ya19xdWV1ZSgmZW5naW5lLT5icmVhZGNy
dW1icy5pcnFfd29yayk7Ci19Ci0KLXZvaWQgaW50ZWxfZW5naW5lX3Jlc2V0X2JyZWFkY3J1bWJz
KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7Ci12b2lkIGludGVsX2VuZ2luZV9maW5p
X2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7Ci0KLXZvaWQgaW50
ZWxfZW5naW5lX3ByaW50X2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZSwKLQkJCQkgICAgc3RydWN0IGRybV9wcmludGVyICpwKTsKLQogc3RhdGljIGlubGluZSB1MzIg
Kl9fZ2VuOF9lbWl0X3BpcGVfY29udHJvbCh1MzIgKmJhdGNoLCB1MzIgZmxhZ3MwLCB1MzIgZmxh
Z3MxLCB1MzIgb2Zmc2V0KQogewogCW1lbXNldChiYXRjaCwgMCwgNiAqIHNpemVvZih1MzIpKTsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKaW5kZXggZGQxYTQyYzRk
MzQ0Li5jMjBhOTFjMTMxOGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2VuZ2luZV9jcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2lu
ZV9jcy5jCkBAIC0yOCw2ICsyOCw3IEBACiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogCisjaW5j
bHVkZSAiaW50ZWxfYnJlYWRjcnVtYnMuaCIKICNpbmNsdWRlICJpbnRlbF9jb250ZXh0LmgiCiAj
aW5jbHVkZSAiaW50ZWxfZW5naW5lLmgiCiAjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3BtLmgiCkBA
IC03MDAsOCArNzAxLDEzIEBAIHN0YXRpYyBpbnQgZW5naW5lX3NldHVwX2NvbW1vbihzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJaWYgKGVycikKIAkJcmV0dXJuIGVycjsKIAorCWVu
Z2luZS0+YnJlYWRjcnVtYnMgPSBpbnRlbF9icmVhZGNydW1ic19jcmVhdGUoZW5naW5lKTsKKwlp
ZiAoIWVuZ2luZS0+YnJlYWRjcnVtYnMpIHsKKwkJZXJyID0gLUVOT01FTTsKKwkJZ290byBlcnJf
c3RhdHVzOworCX0KKwogCWludGVsX2VuZ2luZV9pbml0X2FjdGl2ZShlbmdpbmUsIEVOR0lORV9Q
SFlTSUNBTCk7Ci0JaW50ZWxfZW5naW5lX2luaXRfYnJlYWRjcnVtYnMoZW5naW5lKTsKIAlpbnRl
bF9lbmdpbmVfaW5pdF9leGVjbGlzdHMoZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9jbWRf
cGFyc2VyKGVuZ2luZSk7CiAJaW50ZWxfZW5naW5lX2luaXRfX3BtKGVuZ2luZSk7CkBAIC03MTYs
NiArNzIyLDEwIEBAIHN0YXRpYyBpbnQgZW5naW5lX3NldHVwX2NvbW1vbihzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmUpCiAJaW50ZWxfZW5naW5lX2luaXRfY3R4X3dhKGVuZ2luZSk7CiAK
IAlyZXR1cm4gMDsKKworZXJyX3N0YXR1czoKKwljbGVhbnVwX3N0YXR1c19wYWdlKGVuZ2luZSk7
CisJcmV0dXJuIGVycjsKIH0KIAogc3RydWN0IG1lYXN1cmVfYnJlYWRjcnVtYiB7CkBAIC05MDIs
OSArOTEyLDkgQEAgdm9pZCBpbnRlbF9lbmdpbmVfY2xlYW51cF9jb21tb24oc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqZW5naW5lKQogCXRhc2tsZXRfa2lsbCgmZW5naW5lLT5leGVjbGlzdHMudGFz
a2xldCk7IC8qIGZsdXNoIHRoZSBjYWxsYmFjayAqLwogCiAJY2xlYW51cF9zdGF0dXNfcGFnZShl
bmdpbmUpOworCWludGVsX2JyZWFkY3J1bWJzX2ZyZWUoZW5naW5lLT5icmVhZGNydW1icyk7CiAK
IAlpbnRlbF9lbmdpbmVfZmluaV9yZXRpcmUoZW5naW5lKTsKLQlpbnRlbF9lbmdpbmVfZmluaV9i
cmVhZGNydW1icyhlbmdpbmUpOwogCWludGVsX2VuZ2luZV9jbGVhbnVwX2NtZF9wYXJzZXIoZW5n
aW5lKTsKIAogCWlmIChlbmdpbmUtPmRlZmF1bHRfc3RhdGUpCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2VuZ2luZV9wbS5jCmluZGV4IDhlYzNlZWNmM2UzOS4uZjdiMmUwN2UyMjI5IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYwpAQCAtNiw2ICs2LDcg
QEAKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAKKyNpbmNsdWRlICJpbnRlbF9icmVhZGNydW1i
cy5oIgogI2luY2x1ZGUgImludGVsX2NvbnRleHQuaCIKICNpbmNsdWRlICJpbnRlbF9lbmdpbmUu
aCIKICNpbmNsdWRlICJpbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmgiCkBAIC0yNDcsNyArMjQ4LDcg
QEAgc3RhdGljIGludCBfX2VuZ2luZV9wYXJrKHN0cnVjdCBpbnRlbF93YWtlcmVmICp3ZikKIAlj
YWxsX2lkbGVfYmFycmllcnMoZW5naW5lKTsgLyogY2xlYW51cCBhZnRlciB3ZWRnaW5nICovCiAK
IAlpbnRlbF9lbmdpbmVfcGFya19oZWFydGJlYXQoZW5naW5lKTsKLQlpbnRlbF9lbmdpbmVfZGlz
YXJtX2JyZWFkY3J1bWJzKGVuZ2luZSk7CisJaW50ZWxfYnJlYWRjcnVtYnNfcGFyayhlbmdpbmUt
PmJyZWFkY3J1bWJzKTsKIAogCS8qIE11c3QgYmUgcmVzZXQgdXBvbiBpZGxpbmcsIG9yIHdlIG1h
eSBtaXNzIHRoZSBidXN5IHdha2V1cC4gKi8KIAlHRU1fQlVHX09OKGVuZ2luZS0+ZXhlY2xpc3Rz
LnF1ZXVlX3ByaW9yaXR5X2hpbnQgIT0gSU5UX01JTik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCmluZGV4IDhkZTkyZmQ3ZDM5Mi4uYzQwMGFhYTIyODdi
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMu
aAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaApAQCAt
MjIsNiArMjIsNyBAQAogI2luY2x1ZGUgImk5MTVfcG11LmgiCiAjaW5jbHVkZSAiaTkxNV9wcmlv
bGlzdF90eXBlcy5oIgogI2luY2x1ZGUgImk5MTVfc2VsZnRlc3QuaCIKKyNpbmNsdWRlICJpbnRl
bF9icmVhZGNydW1ic190eXBlcy5oIgogI2luY2x1ZGUgImludGVsX3NzZXUuaCIKICNpbmNsdWRl
ICJpbnRlbF90aW1lbGluZV90eXBlcy5oIgogI2luY2x1ZGUgImludGVsX3VuY29yZS5oIgpAQCAt
MzczLDM0ICszNzQsOCBAQCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzIHsKIAkgKi8KIAlzdHJ1Y3Qg
ZXdtYV9fZW5naW5lX2xhdGVuY3kgbGF0ZW5jeTsKIAotCS8qIFJhdGhlciB0aGFuIGhhdmUgZXZl
cnkgY2xpZW50IHdhaXQgdXBvbiBhbGwgdXNlciBpbnRlcnJ1cHRzLAotCSAqIHdpdGggdGhlIGhl
cmQgd2FraW5nIGFmdGVyIGV2ZXJ5IGludGVycnVwdCBhbmQgZWFjaCBkb2luZyB0aGUKLQkgKiBo
ZWF2eXdlaWdodCBzZXFubyBkYW5jZSwgd2UgZGVsZWdhdGUgdGhlIHRhc2sgKG9mIGJlaW5nIHRo
ZQotCSAqIGJvdHRvbS1oYWxmIG9mIHRoZSB1c2VyIGludGVycnVwdCkgdG8gdGhlIGZpcnN0IGNs
aWVudC4gQWZ0ZXIKLQkgKiBldmVyeSBpbnRlcnJ1cHQsIHdlIHdha2UgdXAgb25lIGNsaWVudCwg
d2hvIGRvZXMgdGhlIGhlYXZ5d2VpZ2h0Ci0JICogY29oZXJlbnQgc2Vxbm8gcmVhZCBhbmQgZWl0
aGVyIGdvZXMgYmFjayB0byBzbGVlcCAoaWYgaW5jb21wbGV0ZSksCi0JICogb3Igd2FrZXMgdXAg
YWxsIHRoZSBjb21wbGV0ZWQgY2xpZW50cyBpbiBwYXJhbGxlbCwgYmVmb3JlIHRoZW4KLQkgKiB0
cmFuc2ZlcnJpbmcgdGhlIGJvdHRvbS1oYWxmIHN0YXR1cyB0byB0aGUgbmV4dCBjbGllbnQgaW4g
dGhlIHF1ZXVlLgotCSAqCi0JICogQ29tcGFyZWQgdG8gd2Fsa2luZyB0aGUgZW50aXJlIGxpc3Qg
b2Ygd2FpdGVycyBpbiBhIHNpbmdsZSBkZWRpY2F0ZWQKLQkgKiBib3R0b20taGFsZiwgd2UgcmVk
dWNlIHRoZSBsYXRlbmN5IG9mIHRoZSBmaXJzdCB3YWl0ZXIgYnkgYXZvaWRpbmcKLQkgKiBhIGNv
bnRleHQgc3dpdGNoLCBidXQgaW5jdXIgYWRkaXRpb25hbCBjb2hlcmVudCBzZXFubyByZWFkcyB3
aGVuCi0JICogZm9sbG93aW5nIHRoZSBjaGFpbiBvZiByZXF1ZXN0IGJyZWFkY3J1bWJzLiBTaW5j
ZSBpdCBpcyBtb3N0IGxpa2VseQotCSAqIHRoYXQgd2UgaGF2ZSBhIHNpbmdsZSBjbGllbnQgd2Fp
dGluZyBvbiBlYWNoIHNlcW5vLCB0aGVuIHJlZHVjaW5nCi0JICogdGhlIG92ZXJoZWFkIG9mIHdh
a2luZyB0aGF0IGNsaWVudCBpcyBtdWNoIHByZWZlcnJlZC4KLQkgKi8KLQlzdHJ1Y3QgaW50ZWxf
YnJlYWRjcnVtYnMgewotCQlzcGlubG9ja190IGlycV9sb2NrOwotCQlzdHJ1Y3QgbGlzdF9oZWFk
IHNpZ25hbGVyczsKLQotCQlzdHJ1Y3QgbGlzdF9oZWFkIHNpZ25hbGVkX3JlcXVlc3RzOwotCi0J
CXN0cnVjdCBpcnFfd29yayBpcnFfd29yazsgLyogZm9yIHVzZSBmcm9tIGluc2lkZSBpcnFfbG9j
ayAqLwotCi0JCXVuc2lnbmVkIGludCBpcnFfZW5hYmxlZDsKLQotCQlib29sIGlycV9hcm1lZDsK
LQl9IGJyZWFkY3J1bWJzOworCS8qIEtlZXAgdHJhY2sgb2YgYWxsIHRoZSBzZXFubyB1c2VkLCBh
IHRyYWlsIG9mIGJyZWFkY3J1bWJzICovCisJc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpicmVh
ZGNydW1iczsKIAogCXN0cnVjdCBpbnRlbF9lbmdpbmVfcG11IHsKIAkJLyoqCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9pcnEuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2d0X2lycS5jCmluZGV4IGIwNWRhNjhlNTJmNC4uMjU3MDYzYTU3MTAx
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9pcnEuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9pcnEuYwpAQCAtOCw2ICs4LDcgQEAK
IAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9pcnEuaCIKKyNpbmNsdWRl
ICJpbnRlbF9icmVhZGNydW1icy5oIgogI2luY2x1ZGUgImludGVsX2d0LmgiCiAjaW5jbHVkZSAi
aW50ZWxfZ3RfaXJxLmgiCiAjaW5jbHVkZSAiaW50ZWxfdW5jb3JlLmgiCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2xyYy5jCmluZGV4IDVlODI3OGU4YWM3OS4uOTExMmJiMDdhMDY4IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpAQCAtMTM3LDYgKzEzNyw3IEBACiAjaW5jbHVkZSAi
aTkxNV9wZXJmLmgiCiAjaW5jbHVkZSAiaTkxNV90cmFjZS5oIgogI2luY2x1ZGUgImk5MTVfdmdw
dS5oIgorI2luY2x1ZGUgImludGVsX2JyZWFkY3J1bWJzLmgiCiAjaW5jbHVkZSAiaW50ZWxfY29u
dGV4dC5oIgogI2luY2x1ZGUgImludGVsX2VuZ2luZV9wbS5oIgogI2luY2x1ZGUgImludGVsX2d0
LmgiCkBAIC00MTE5LDcgKzQxMjAsNyBAQCBzdGF0aWMgaW50IGV4ZWNsaXN0c19yZXN1bWUoc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogewogCWludGVsX21vY3NfaW5pdF9lbmdpbmUo
ZW5naW5lKTsKIAotCWludGVsX2VuZ2luZV9yZXNldF9icmVhZGNydW1icyhlbmdpbmUpOworCWlu
dGVsX2JyZWFkY3J1bWJzX3Jlc2V0KGVuZ2luZS0+YnJlYWRjcnVtYnMpOwogCiAJaWYgKEdFTV9T
SE9XX0RFQlVHKCkgJiYgdW5leHBlY3RlZF9zdGFydGluZ19zdGF0ZShlbmdpbmUpKSB7CiAJCXN0
cnVjdCBkcm1fcHJpbnRlciBwID0gZHJtX2RlYnVnX3ByaW50ZXIoX19mdW5jX18pOwpAQCAtNTcw
NCw5ICs1NzA1LDcgQEAgaW50ZWxfZXhlY2xpc3RzX2NyZWF0ZV92aXJ0dWFsKHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKipzaWJsaW5ncywKIAlzbnByaW50Zih2ZS0+YmFzZS5uYW1lLCBzaXplb2Yo
dmUtPmJhc2UubmFtZSksICJ2aXJ0dWFsIik7CiAKIAlpbnRlbF9lbmdpbmVfaW5pdF9hY3RpdmUo
JnZlLT5iYXNlLCBFTkdJTkVfVklSVFVBTCk7Ci0JaW50ZWxfZW5naW5lX2luaXRfYnJlYWRjcnVt
YnMoJnZlLT5iYXNlKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9leGVjbGlzdHMoJnZlLT5iYXNlKTsK
LQl2ZS0+YmFzZS5icmVhZGNydW1icy5pcnFfYXJtZWQgPSB0cnVlOyAvKiBmYWtlIEhXLCB1c2Vk
IGZvciBpcnFfd29yayAqLwogCiAJdmUtPmJhc2UuY29wcyA9ICZ2aXJ0dWFsX2NvbnRleHRfb3Bz
OwogCXZlLT5iYXNlLnJlcXVlc3RfYWxsb2MgPSBleGVjbGlzdHNfcmVxdWVzdF9hbGxvYzsKQEAg
LTU3MjMsNiArNTcyMiwxMiBAQCBpbnRlbF9leGVjbGlzdHNfY3JlYXRlX3ZpcnR1YWwoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqKnNpYmxpbmdzLAogCiAJaW50ZWxfY29udGV4dF9pbml0KCZ2ZS0+
Y29udGV4dCwgJnZlLT5iYXNlKTsKIAorCXZlLT5iYXNlLmJyZWFkY3J1bWJzID0gaW50ZWxfYnJl
YWRjcnVtYnNfY3JlYXRlKE5VTEwpOworCWlmICghdmUtPmJhc2UuYnJlYWRjcnVtYnMpIHsKKwkJ
ZXJyID0gLUVOT01FTTsKKwkJZ290byBlcnJfcHV0OworCX0KKwogCWZvciAobiA9IDA7IG4gPCBj
b3VudDsgbisrKSB7CiAJCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKnNpYmxpbmcgPSBzaWJsaW5n
c1tuXTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKaW5kZXggNDZhNWNlZmZj
MjJmLi5hYzM2YjY3ZmI0NmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX3Jlc2V0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYwpA
QCAtMTUsNiArMTUsNyBAQAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9n
cHVfZXJyb3IuaCIKICNpbmNsdWRlICJpOTE1X2lycS5oIgorI2luY2x1ZGUgImludGVsX2JyZWFk
Y3J1bWJzLmgiCiAjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3BtLmgiCiAjaW5jbHVkZSAiaW50ZWxf
Z3QuaCIKICNpbmNsdWRlICJpbnRlbF9ndF9wbS5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ19zdWJtaXNzaW9uLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9yaW5nX3N1Ym1pc3Npb24uYwppbmRleCA5NDkxNWY2Njg3MTUuLjE4NmFhMmQz
YTgzZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ19zdWJt
aXNzaW9uLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ19zdWJtaXNz
aW9uLmMKQEAgLTMyLDYgKzMyLDcgQEAKICNpbmNsdWRlICJnZW42X3BwZ3R0LmgiCiAjaW5jbHVk
ZSAiZ2VuN19yZW5kZXJjbGVhci5oIgogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCisjaW5jbHVkZSAi
aW50ZWxfYnJlYWRjcnVtYnMuaCIKICNpbmNsdWRlICJpbnRlbF9jb250ZXh0LmgiCiAjaW5jbHVk
ZSAiaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJpbnRlbF9yZXNldC5oIgpAQCAtMjU1LDcgKzI1Niw3
IEBAIHN0YXRpYyBpbnQgeGNzX3Jlc3VtZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUp
CiAJZWxzZQogCQlyaW5nX3NldHVwX3N0YXR1c19wYWdlKGVuZ2luZSk7CiAKLQlpbnRlbF9lbmdp
bmVfcmVzZXRfYnJlYWRjcnVtYnMoZW5naW5lKTsKKwlpbnRlbF9icmVhZGNydW1ic19yZXNldChl
bmdpbmUtPmJyZWFkY3J1bWJzKTsKIAogCS8qIEVuZm9yY2Ugb3JkZXJpbmcgYnkgcmVhZGluZyBI
RUFEIHJlZ2lzdGVyIGJhY2sgKi8KIAlFTkdJTkVfUE9TVElOR19SRUFEKGVuZ2luZSwgUklOR19I
RUFEKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jwcy5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcnBzLmMKaW5kZXggOTdiYTE0YWQ1MmU0Li5l
NmEwMGVlYTA2MzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jw
cy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jwcy5jCkBAIC03LDYgKzcs
NyBAQAogI2luY2x1ZGUgPGRybS9pOTE1X2RybS5oPgogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIK
KyNpbmNsdWRlICJpbnRlbF9icmVhZGNydW1icy5oIgogI2luY2x1ZGUgImludGVsX2d0LmgiCiAj
aW5jbHVkZSAiaW50ZWxfZ3RfY2xvY2tfdXRpbHMuaCIKICNpbmNsdWRlICJpbnRlbF9ndF9pcnEu
aCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9tb2NrX2VuZ2luZS5jCmluZGV4IDA2MzAzYmE5OGMxOS4u
ZDE5NzFmZmRjYTQyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9tb2NrX2Vu
Z2luZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMKQEAgLTI2
MSwxMSArMjYxLDEyIEBAIHN0YXRpYyB2b2lkIG1vY2tfZW5naW5lX3JlbGVhc2Uoc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCiAJR0VNX0JVR19PTih0aW1lcl9wZW5kaW5nKCZtb2Nr
LT5od19kZWxheSkpOwogCisJaW50ZWxfYnJlYWRjcnVtYnNfZnJlZShlbmdpbmUtPmJyZWFkY3J1
bWJzKTsKKwogCWludGVsX2NvbnRleHRfdW5waW4oZW5naW5lLT5rZXJuZWxfY29udGV4dCk7CiAJ
aW50ZWxfY29udGV4dF9wdXQoZW5naW5lLT5rZXJuZWxfY29udGV4dCk7CiAKIAlpbnRlbF9lbmdp
bmVfZmluaV9yZXRpcmUoZW5naW5lKTsKLQlpbnRlbF9lbmdpbmVfZmluaV9icmVhZGNydW1icyhl
bmdpbmUpOwogfQogCiBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICptb2NrX2VuZ2luZShzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKQEAgLTMyMywxMSArMzI0LDE0IEBAIGludCBtb2NrX2Vu
Z2luZV9pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAlzdHJ1Y3QgaW50ZWxf
Y29udGV4dCAqY2U7CiAKIAlpbnRlbF9lbmdpbmVfaW5pdF9hY3RpdmUoZW5naW5lLCBFTkdJTkVf
TU9DSyk7Ci0JaW50ZWxfZW5naW5lX2luaXRfYnJlYWRjcnVtYnMoZW5naW5lKTsKIAlpbnRlbF9l
bmdpbmVfaW5pdF9leGVjbGlzdHMoZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9fcG0oZW5n
aW5lKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9yZXRpcmUoZW5naW5lKTsKIAorCWVuZ2luZS0+YnJl
YWRjcnVtYnMgPSBpbnRlbF9icmVhZGNydW1ic19jcmVhdGUoTlVMTCk7CisJaWYgKCFlbmdpbmUt
PmJyZWFkY3J1bWJzKQorCQlyZXR1cm4gLUVOT01FTTsKKwogCWNlID0gY3JlYXRlX2tlcm5lbF9j
b250ZXh0KGVuZ2luZSk7CiAJaWYgKElTX0VSUihjZSkpCiAJCWdvdG8gZXJyX2JyZWFkY3J1bWJz
OwpAQCAtMzM5LDcgKzM0Myw3IEBAIGludCBtb2NrX2VuZ2luZV9pbml0KHN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZSkKIAlyZXR1cm4gMDsKIAogZXJyX2JyZWFkY3J1bWJzOgotCWludGVs
X2VuZ2luZV9maW5pX2JyZWFkY3J1bWJzKGVuZ2luZSk7CisJaW50ZWxfYnJlYWRjcnVtYnNfZnJl
ZShlbmdpbmUtPmJyZWFkY3J1bWJzKTsKIAlyZXR1cm4gLUVOT01FTTsKIH0KIApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfaXJxLmMKaW5kZXggMWZhNjc3MDBkOGY0Li5mMTEzZmU0NDU3MmIgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9pcnEuYwpAQCAtNDEsNiArNDEsNyBAQAogI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxf
bHBlX2F1ZGlvLmgiCiAjaW5jbHVkZSAiZGlzcGxheS9pbnRlbF9wc3IuaCIKIAorI2luY2x1ZGUg
Imd0L2ludGVsX2JyZWFkY3J1bWJzLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZ3QuaCIKICNpbmNs
dWRlICJndC9pbnRlbF9ndF9pcnEuaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndF9wbV9pcnEuaCIK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMKaW5kZXggNmM0MmIyMjk2NjE1Li5hN2EzZDQ1
N2E4MzcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jCkBAIC0zMSw2ICszMSw3IEBA
CiAjaW5jbHVkZSA8bGludXgvc2NoZWQvc2lnbmFsLmg+CiAKICNpbmNsdWRlICJnZW0vaTkxNV9n
ZW1fY29udGV4dC5oIgorI2luY2x1ZGUgImd0L2ludGVsX2JyZWFkY3J1bWJzLmgiCiAjaW5jbHVk
ZSAiZ3QvaW50ZWxfY29udGV4dC5oIgogI2luY2x1ZGUgImd0L2ludGVsX3JpbmcuaCIKICNpbmNs
dWRlICJndC9pbnRlbF9ycHMuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcmVxdWVzdC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmgKaW5kZXgg
NTkwNzYyODIwNzYxLi41MTNjMTJkMjNjMmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVxdWVzdC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVz
dC5oCkBAIC0zNjUsMTAgKzM2NSw2IEBAIHZvaWQgaTkxNV9yZXF1ZXN0X3N1Ym1pdChzdHJ1Y3Qg
aTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KTsKIHZvaWQgX19pOTE1X3JlcXVlc3RfdW5zdWJtaXQoc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCk7CiB2b2lkIGk5MTVfcmVxdWVzdF91bnN1Ym1pdChz
dHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KTsKIAotLyogTm90ZTogcGFydCBvZiB0aGUgaW50
ZWxfYnJlYWRjcnVtYnMgZmFtaWx5ICovCi1ib29sIGk5MTVfcmVxdWVzdF9lbmFibGVfYnJlYWRj
cnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KTsKLXZvaWQgaTkxNV9yZXF1ZXN0X2Nh
bmNlbF9icmVhZGNydW1iKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJlcXVlc3QpOwotCiBsb25nIGk5
MTVfcmVxdWVzdF93YWl0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAogCQkgICAgICAgdW5zaWdu
ZWQgaW50IGZsYWdzLAogCQkgICAgICAgbG9uZyB0aW1lb3V0KQotLSAKMi4yMC4xCgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGlu
ZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

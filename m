Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7C8BAA9532
	for <lists+intel-gfx@lfdr.de>; Wed,  4 Sep 2019 23:34:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 611BF89C84;
	Wed,  4 Sep 2019 21:34:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7EB4E89BC2
 for <intel-gfx@lists.freedesktop.org>; Wed,  4 Sep 2019 21:34:31 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 04 Sep 2019 14:34:31 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,468,1559545200"; d="scan'208";a="199121708"
Received: from josouza-mobl.jf.intel.com (HELO josouza-MOBL.intel.com)
 ([10.24.9.135])
 by fmsmga001.fm.intel.com with ESMTP; 04 Sep 2019 14:34:31 -0700
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  4 Sep 2019 14:34:17 -0700
Message-Id: <20190904213419.27547-5-jose.souza@intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20190904213419.27547-1-jose.souza@intel.com>
References: <20190904213419.27547-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 4/6] drm/i915/tgl: move DP_TP_* to transcoder
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogTHVjYXMgRGUgTWFyY2hpIDxsdWNhcy5kZW1hcmNoaUBpbnRlbC5jb20+CgpHZW4gMTIg
b253YXJkcyBtb3ZlcyB0aGUgRFBfVFBfKiByZWdpc3RlcnMgdG8gYmUgdHJhbnNjb2Rlci1iYXNl
ZCByYXRoZXIKdGhhbiBwb3J0LWJhc2VkLiBUaGlzIGFkZHMgdGhlIG5ldyByZWdpc3RlciBhZGRy
ZXNzZXMgYW5kIGNoYW5nZXMgYWxsCnRoZSBjYWxsZXJzIHRvIHVzZSB0aGUgcmVnaXN0ZXIgc2F2
ZWQgaW4gaW50ZWxfZHAtPnJlZ3MuKi4gVGhpcyBpcwpmaWxsZWQgb3V0IHdoZW4gcHJlcGFyaW5n
IHRvIGVuYWJsZSB0aGUgcG9ydCBzbyB3ZSB0YWtlIGludG8gYWNjb3VudCBpZgp3ZSBzaG91bGQg
dXNlIHRoZSB0cmFuc2NvZGVyIG9yIHRoZSBwb3J0LgoKdjI6IHJlaW1wbGVtZW50IGJ5IHN0YXNo
aW5nIHRoZSByZWdpc3RlcnMgd2Ugd2FudCB0byBhY2Nlc3MgdW5kZXIKaW50ZWxfZHAtPnJlZy4g
Tm93IHRoZXkgYXJlIGluaXRpYWxpemVkIHdoZW4gZW5hYmxpbmcgdGhlIHBvcnQuClZpbGxlIHN1
Z2dlc3RlZCB0byBzdG9yZSB0aGUgdHJhbnNjb2RlciB0byBiZSB1c2VkIGV4Y2x1c2l2ZWx5CmJ5
IFRHTCsuIEFmdGVyIGltcGxlbWVudGluZyBJIHRob3VnaHQganVzdCBzdG9yaW5nIHRoZSByZWdp
c3RlciBkaXJlY3RseQptYWRlIGl0IGNsZWFuZXIuCgpDYzogTWF0dCBSb3BlciA8bWF0dGhldy5k
LnJvcGVyQGludGVsLmNvbT4KQ2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51
eC5pbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEx1Y2FzIERlIE1hcmNoaSA8bHVjYXMuZGVtYXJj
aGlAaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogTWF0dCBSb3BlciA8bWF0dGhldy5kLnJvcGVyQGlu
dGVsLmNvbT4KUmV2aWV3ZWQtYnk6IEpvc8OpIFJvYmVydG8gZGUgU291emEgPGpvc2Uuc291emFA
aW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMg
ICAgICB8IDQzICsrKysrKysrKysrKy0tLS0tLS0KIC4uLi9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXlfdHlwZXMuaCAgICB8ICA5ICsrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZHAuYyAgICAgICB8IDEzICsrKy0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kcF9tc3QuYyAgIHwgIDggKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9yZWcuaCAgICAgICAgICAgICAgIHwgIDQgKysKIDUgZmlsZXMgY2hhbmdlZCwgNTEgaW5zZXJ0
aW9ucygrKSwgMjYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kZGkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGRpLmMKaW5kZXggZWMxMzJjZDZhZGQ4Li4zZTYzOTQxMzk5NjQgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYwpAQCAtMzE2NywxNyArMzE2NywxOCBAQCBzdGF0
aWMgdm9pZCBpbnRlbF9kZGlfZW5hYmxlX2ZlYyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2Rl
ciwKIAkJCQkgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiB7CiAJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNl
LmRldik7Ci0JZW51bSBwb3J0IHBvcnQgPSBlbmNvZGVyLT5wb3J0OworCXN0cnVjdCBpbnRlbF9k
cCAqaW50ZWxfZHA7CiAJdTMyIHZhbDsKIAogCWlmICghY3J0Y19zdGF0ZS0+ZmVjX2VuYWJsZSkK
IAkJcmV0dXJuOwogCi0JdmFsID0gSTkxNV9SRUFEKERQX1RQX0NUTChwb3J0KSk7CisJaW50ZWxf
ZHAgPSBlbmNfdG9faW50ZWxfZHAoJmVuY29kZXItPmJhc2UpOworCXZhbCA9IEk5MTVfUkVBRChp
bnRlbF9kcC0+cmVncy5kcF90cF9jdGwpOwogCXZhbCB8PSBEUF9UUF9DVExfRkVDX0VOQUJMRTsK
LQlJOTE1X1dSSVRFKERQX1RQX0NUTChwb3J0KSwgdmFsKTsKKwlJOTE1X1dSSVRFKGludGVsX2Rw
LT5yZWdzLmRwX3RwX2N0bCwgdmFsKTsKIAotCWlmIChpbnRlbF9kZV93YWl0X2Zvcl9zZXQoZGV2
X3ByaXYsIERQX1RQX1NUQVRVUyhwb3J0KSwKKwlpZiAoaW50ZWxfZGVfd2FpdF9mb3Jfc2V0KGRl
dl9wcml2LCBpbnRlbF9kcC0+cmVncy5kcF90cF9zdGF0dXMsCiAJCQkJICBEUF9UUF9TVEFUVVNf
RkVDX0VOQUJMRV9MSVZFLCAxKSkKIAkJRFJNX0VSUk9SKCJUaW1lZCBvdXQgd2FpdGluZyBmb3Ig
RkVDIEVuYWJsZSBTdGF0dXNcbiIpOwogfQpAQCAtMzE4NiwxNiArMzE4NywxNyBAQCBzdGF0aWMg
dm9pZCBpbnRlbF9kZGlfZGlzYWJsZV9mZWNfc3RhdGUoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIsCiAJCQkJCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQog
ewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+
YmFzZS5kZXYpOwotCWVudW0gcG9ydCBwb3J0ID0gZW5jb2Rlci0+cG9ydDsKKwlzdHJ1Y3QgaW50
ZWxfZHAgKmludGVsX2RwOwogCXUzMiB2YWw7CiAKIAlpZiAoIWNydGNfc3RhdGUtPmZlY19lbmFi
bGUpCiAJCXJldHVybjsKIAotCXZhbCA9IEk5MTVfUkVBRChEUF9UUF9DVEwocG9ydCkpOworCWlu
dGVsX2RwID0gZW5jX3RvX2ludGVsX2RwKCZlbmNvZGVyLT5iYXNlKTsKKwl2YWwgPSBJOTE1X1JF
QUQoaW50ZWxfZHAtPnJlZ3MuZHBfdHBfY3RsKTsKIAl2YWwgJj0gfkRQX1RQX0NUTF9GRUNfRU5B
QkxFOwotCUk5MTVfV1JJVEUoRFBfVFBfQ1RMKHBvcnQpLCB2YWwpOwotCVBPU1RJTkdfUkVBRChE
UF9UUF9DVEwocG9ydCkpOworCUk5MTVfV1JJVEUoaW50ZWxfZHAtPnJlZ3MuZHBfdHBfY3RsLCB2
YWwpOworCVBPU1RJTkdfUkVBRChpbnRlbF9kcC0+cmVncy5kcF90cF9jdGwpOwogfQogCiBzdGF0
aWMgdm9pZCB0Z2xfZGRpX3ByZV9lbmFibGVfZHAoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29k
ZXIsCkBAIC0zMjA4LDEwICszMjEwLDE0IEBAIHN0YXRpYyB2b2lkIHRnbF9kZGlfcHJlX2VuYWJs
ZV9kcChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAlzdHJ1Y3QgaW50ZWxfZGlnaXRh
bF9wb3J0ICpkaWdfcG9ydCA9IGVuY190b19kaWdfcG9ydCgmZW5jb2Rlci0+YmFzZSk7CiAJYm9v
bCBpc19tc3QgPSBpbnRlbF9jcnRjX2hhc190eXBlKGNydGNfc3RhdGUsIElOVEVMX09VVFBVVF9E
UF9NU1QpOwogCWludCBsZXZlbCA9IGludGVsX2RkaV9kcF9sZXZlbChpbnRlbF9kcCk7CisJZW51
bSB0cmFuc2NvZGVyIHRyYW5zY29kZXIgPSBjcnRjX3N0YXRlLT5jcHVfdHJhbnNjb2RlcjsKIAog
CWludGVsX2RwX3NldF9saW5rX3BhcmFtcyhpbnRlbF9kcCwgY3J0Y19zdGF0ZS0+cG9ydF9jbG9j
aywKIAkJCQkgY3J0Y19zdGF0ZS0+bGFuZV9jb3VudCwgaXNfbXN0KTsKIAorCWludGVsX2RwLT5y
ZWdzLmRwX3RwX2N0bCA9IFRHTF9EUF9UUF9DVEwodHJhbnNjb2Rlcik7CisJaW50ZWxfZHAtPnJl
Z3MuZHBfdHBfc3RhdHVzID0gVEdMX0RQX1RQX1NUQVRVUyh0cmFuc2NvZGVyKTsKKwogCS8qIDEu
YSBnb3Qgb24gaW50ZWxfYXRvbWljX2NvbW1pdF90YWlsKCkgKi8KIAogCS8qIDIuICovCkBAIC0z
MzAwLDYgKzMzMDYsOSBAQCBzdGF0aWMgdm9pZCBoc3dfZGRpX3ByZV9lbmFibGVfZHAoc3RydWN0
IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJaW50ZWxfZHBfc2V0X2xpbmtfcGFyYW1zKGludGVs
X2RwLCBjcnRjX3N0YXRlLT5wb3J0X2Nsb2NrLAogCQkJCSBjcnRjX3N0YXRlLT5sYW5lX2NvdW50
LCBpc19tc3QpOwogCisJaW50ZWxfZHAtPnJlZ3MuZHBfdHBfY3RsID0gRFBfVFBfQ1RMKHBvcnQp
OworCWludGVsX2RwLT5yZWdzLmRwX3RwX3N0YXR1cyA9IERQX1RQX1NUQVRVUyhwb3J0KTsKKwog
CWludGVsX2VkcF9wYW5lbF9vbihpbnRlbF9kcCk7CiAKIAlpbnRlbF9kZGlfY2xrX3NlbGVjdChl
bmNvZGVyLCBjcnRjX3N0YXRlKTsKQEAgLTM0NjYsMTAgKzM0NzUsMTIgQEAgc3RhdGljIHZvaWQg
aW50ZWxfZGlzYWJsZV9kZGlfYnVmKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCX0K
IAogCWlmIChpbnRlbF9jcnRjX2hhc19kcF9lbmNvZGVyKGNydGNfc3RhdGUpKSB7Ci0JCXZhbCA9
IEk5MTVfUkVBRChEUF9UUF9DVEwocG9ydCkpOworCQlzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2Rw
ID0gZW5jX3RvX2ludGVsX2RwKCZlbmNvZGVyLT5iYXNlKTsKKworCQl2YWwgPSBJOTE1X1JFQUQo
aW50ZWxfZHAtPnJlZ3MuZHBfdHBfY3RsKTsKIAkJdmFsICY9IH4oRFBfVFBfQ1RMX0VOQUJMRSB8
IERQX1RQX0NUTF9MSU5LX1RSQUlOX01BU0spOwogCQl2YWwgfD0gRFBfVFBfQ1RMX0xJTktfVFJB
SU5fUEFUMTsKLQkJSTkxNV9XUklURShEUF9UUF9DVEwocG9ydCksIHZhbCk7CisJCUk5MTVfV1JJ
VEUoaW50ZWxfZHAtPnJlZ3MuZHBfdHBfY3RsLCB2YWwpOwogCX0KIAogCS8qIERpc2FibGUgRkVD
IGluIERQIFNpbmsgKi8KQEAgLTM4OTgsNyArMzkwOSw3IEBAIHN0YXRpYyB2b2lkIGludGVsX2Rk
aV9wcmVwYXJlX2xpbmtfcmV0cmFpbihzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKQogCXUzMiB2
YWw7CiAJYm9vbCB3YWl0ID0gZmFsc2U7CiAKLQlpZiAoSTkxNV9SRUFEKERQX1RQX0NUTChwb3J0
KSkgJiBEUF9UUF9DVExfRU5BQkxFKSB7CisJaWYgKEk5MTVfUkVBRChpbnRlbF9kcC0+cmVncy5k
cF90cF9jdGwpICYgRFBfVFBfQ1RMX0VOQUJMRSkgewogCQl2YWwgPSBJOTE1X1JFQUQoRERJX0JV
Rl9DVEwocG9ydCkpOwogCQlpZiAodmFsICYgRERJX0JVRl9DVExfRU5BQkxFKSB7CiAJCQl2YWwg
Jj0gfkRESV9CVUZfQ1RMX0VOQUJMRTsKQEAgLTM5MDYsMTEgKzM5MTcsMTEgQEAgc3RhdGljIHZv
aWQgaW50ZWxfZGRpX3ByZXBhcmVfbGlua19yZXRyYWluKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxf
ZHApCiAJCQl3YWl0ID0gdHJ1ZTsKIAkJfQogCi0JCXZhbCA9IEk5MTVfUkVBRChEUF9UUF9DVEwo
cG9ydCkpOworCQl2YWwgPSBJOTE1X1JFQUQoaW50ZWxfZHAtPnJlZ3MuZHBfdHBfY3RsKTsKIAkJ
dmFsICY9IH4oRFBfVFBfQ1RMX0VOQUJMRSB8IERQX1RQX0NUTF9MSU5LX1RSQUlOX01BU0spOwog
CQl2YWwgfD0gRFBfVFBfQ1RMX0xJTktfVFJBSU5fUEFUMTsKLQkJSTkxNV9XUklURShEUF9UUF9D
VEwocG9ydCksIHZhbCk7Ci0JCVBPU1RJTkdfUkVBRChEUF9UUF9DVEwocG9ydCkpOworCQlJOTE1
X1dSSVRFKGludGVsX2RwLT5yZWdzLmRwX3RwX2N0bCwgdmFsKTsKKwkJUE9TVElOR19SRUFEKGlu
dGVsX2RwLT5yZWdzLmRwX3RwX2N0bCk7CiAKIAkJaWYgKHdhaXQpCiAJCQlpbnRlbF93YWl0X2Rk
aV9idWZfaWRsZShkZXZfcHJpdiwgcG9ydCk7CkBAIC0zOTI1LDggKzM5MzYsOCBAQCBzdGF0aWMg
dm9pZCBpbnRlbF9kZGlfcHJlcGFyZV9saW5rX3JldHJhaW4oc3RydWN0IGludGVsX2RwICppbnRl
bF9kcCkKIAkJaWYgKGRybV9kcF9lbmhhbmNlZF9mcmFtZV9jYXAoaW50ZWxfZHAtPmRwY2QpKQog
CQkJdmFsIHw9IERQX1RQX0NUTF9FTkhBTkNFRF9GUkFNRV9FTkFCTEU7CiAJfQotCUk5MTVfV1JJ
VEUoRFBfVFBfQ1RMKHBvcnQpLCB2YWwpOwotCVBPU1RJTkdfUkVBRChEUF9UUF9DVEwocG9ydCkp
OworCUk5MTVfV1JJVEUoaW50ZWxfZHAtPnJlZ3MuZHBfdHBfY3RsLCB2YWwpOworCVBPU1RJTkdf
UkVBRChpbnRlbF9kcC0+cmVncy5kcF90cF9jdGwpOwogCiAJaW50ZWxfZHAtPkRQIHw9IERESV9C
VUZfQ1RMX0VOQUJMRTsKIAlJOTE1X1dSSVRFKERESV9CVUZfQ1RMKHBvcnQpLCBpbnRlbF9kcC0+
RFApOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlf
dHlwZXMuaAppbmRleCA2MTI3N2E4N2RiZTcuLmQ1Y2M0YjgxMGQ5ZSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgKQEAgLTEyMTgs
NiArMTIxOCwxNSBAQCBzdHJ1Y3QgaW50ZWxfZHAgewogCWJvb2wgY2FuX21zdDsgLyogdGhpcyBw
b3J0IHN1cHBvcnRzIG1zdCAqLwogCWJvb2wgaXNfbXN0OwogCWludCBhY3RpdmVfbXN0X2xpbmtz
OworCisJLyoKKwkgKiBEUF9UUF8qIHJlZ2lzdGVycyBtYXkgYmUgZWl0aGVyIG9uIHBvcnQgb3Ig
dHJhbnNjb2RlciByZWdpc3RlciBzcGFjZS4KKwkgKi8KKwlzdHJ1Y3QgeworCQlpOTE1X3JlZ190
IGRwX3RwX2N0bDsKKwkJaTkxNV9yZWdfdCBkcF90cF9zdGF0dXM7CisJfSByZWdzOworCiAJLyog
Y29ubmVjdG9yIGRpcmVjdGx5IGF0dGFjaGVkIC0gd29uJ3QgYmUgdXNlIGZvciBtb2Rlc2V0IGlu
IG1zdCB3b3JsZCAqLwogCXN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmF0dGFjaGVkX2Nvbm5lY3Rv
cjsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCmluZGV4IDU2NzNlZDc1
ZTQyOC4uZDA5MTMzYTk1OGUxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2RwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
cC5jCkBAIC0yMjk3LDYgKzIyOTcsOSBAQCBzdGF0aWMgdm9pZCBpbnRlbF9kcF9wcmVwYXJlKHN0
cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkJCSBpbnRlbF9jcnRjX2hhc190eXBlKHBp
cGVfY29uZmlnLAogCQkJCQkJICAgICBJTlRFTF9PVVRQVVRfRFBfTVNUKSk7CiAKKwlpbnRlbF9k
cC0+cmVncy5kcF90cF9jdGwgPSBEUF9UUF9DVEwocG9ydCk7CisJaW50ZWxfZHAtPnJlZ3MuZHBf
dHBfc3RhdHVzID0gRFBfVFBfU1RBVFVTKHBvcnQpOworCiAJLyoKIAkgKiBUaGVyZSBhcmUgZm91
ciBraW5kcyBvZiBEUCByZWdpc3RlcnM6CiAJICoKQEAgLTMyNTMsNyArMzI1Niw3IEBAIF9pbnRl
bF9kcF9zZXRfbGlua190cmFpbihzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogCQkJICAgICAg
ZHBfdHJhaW5fcGF0ICYgdHJhaW5fcGF0X21hc2spOwogCiAJaWYgKEhBU19EREkoZGV2X3ByaXYp
KSB7Ci0JCXUzMiB0ZW1wID0gSTkxNV9SRUFEKERQX1RQX0NUTChwb3J0KSk7CisJCXUzMiB0ZW1w
ID0gSTkxNV9SRUFEKGludGVsX2RwLT5yZWdzLmRwX3RwX2N0bCk7CiAKIAkJaWYgKGRwX3RyYWlu
X3BhdCAmIERQX0xJTktfU0NSQU1CTElOR19ESVNBQkxFKQogCQkJdGVtcCB8PSBEUF9UUF9DVExf
U0NSQU1CTEVfRElTQUJMRTsKQEAgLTMyNzksNyArMzI4Miw3IEBAIF9pbnRlbF9kcF9zZXRfbGlu
a190cmFpbihzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogCQkJdGVtcCB8PSBEUF9UUF9DVExf
TElOS19UUkFJTl9QQVQ0OwogCQkJYnJlYWs7CiAJCX0KLQkJSTkxNV9XUklURShEUF9UUF9DVEwo
cG9ydCksIHRlbXApOworCQlJOTE1X1dSSVRFKGludGVsX2RwLT5yZWdzLmRwX3RwX2N0bCwgdGVt
cCk7CiAKIAl9IGVsc2UgaWYgKChJU19JVllCUklER0UoZGV2X3ByaXYpICYmIHBvcnQgPT0gUE9S
VF9BKSB8fAogCQkgICAoSEFTX1BDSF9DUFQoZGV2X3ByaXYpICYmIHBvcnQgIT0gUE9SVF9BKSkg
ewpAQCAtMzk4MCwxMCArMzk4MywxMCBAQCB2b2lkIGludGVsX2RwX3NldF9pZGxlX2xpbmtfdHJh
aW4oc3RydWN0IGludGVsX2RwICppbnRlbF9kcCkKIAlpZiAoIUhBU19EREkoZGV2X3ByaXYpKQog
CQlyZXR1cm47CiAKLQl2YWwgPSBJOTE1X1JFQUQoRFBfVFBfQ1RMKHBvcnQpKTsKKwl2YWwgPSBJ
OTE1X1JFQUQoaW50ZWxfZHAtPnJlZ3MuZHBfdHBfY3RsKTsKIAl2YWwgJj0gfkRQX1RQX0NUTF9M
SU5LX1RSQUlOX01BU0s7CiAJdmFsIHw9IERQX1RQX0NUTF9MSU5LX1RSQUlOX0lETEU7Ci0JSTkx
NV9XUklURShEUF9UUF9DVEwocG9ydCksIHZhbCk7CisJSTkxNV9XUklURShpbnRlbF9kcC0+cmVn
cy5kcF90cF9jdGwsIHZhbCk7CiAKIAkvKgogCSAqIFVudGlsIFRHTCBvbiBQT1JUX0Egd2UgY2Fu
IGhhdmUgb25seSBlRFAgaW4gU1NUIG1vZGUuIFRoZXJlIHRoZSBvbmx5CkBAIC0zOTk1LDcgKzM5
OTgsNyBAQCB2b2lkIGludGVsX2RwX3NldF9pZGxlX2xpbmtfdHJhaW4oc3RydWN0IGludGVsX2Rw
ICppbnRlbF9kcCkKIAlpZiAocG9ydCA9PSBQT1JUX0EgJiYgSU5URUxfR0VOKGRldl9wcml2KSA8
IDEyKQogCQlyZXR1cm47CiAKLQlpZiAoaW50ZWxfZGVfd2FpdF9mb3Jfc2V0KGRldl9wcml2LCBE
UF9UUF9TVEFUVVMocG9ydCksCisJaWYgKGludGVsX2RlX3dhaXRfZm9yX3NldChkZXZfcHJpdiwg
aW50ZWxfZHAtPnJlZ3MuZHBfdHBfc3RhdHVzLAogCQkJCSAgRFBfVFBfU1RBVFVTX0lETEVfRE9O
RSwgMSkpCiAJCURSTV9FUlJPUigiVGltZWQgb3V0IHdhaXRpbmcgZm9yIERQIGlkbGUgcGF0dGVy
bnNcbiIpOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kcF9tc3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMK
aW5kZXggMzczNjZmODEyNTViLi4zZjljZGJhYWI5NWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kcF9tc3QuYwpAQCAtMjk1LDcgKzI5NSw2IEBAIHN0YXRpYyB2b2lk
IGludGVsX21zdF9wcmVfZW5hYmxlX2RwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAog
CXN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0ID0gaW50ZWxfbXN0LT5w
cmltYXJ5OwogCXN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAgPSAmaW50ZWxfZGlnX3BvcnQtPmRw
OwogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+
YmFzZS5kZXYpOwotCWVudW0gcG9ydCBwb3J0ID0gaW50ZWxfZGlnX3BvcnQtPmJhc2UucG9ydDsK
IAlzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IgPQogCQl0b19pbnRlbF9jb25uZWN0
b3IoY29ubl9zdGF0ZS0+Y29ubmVjdG9yKTsKIAlpbnQgcmV0OwpAQCAtMzI2LDggKzMyNSw4IEBA
IHN0YXRpYyB2b2lkIGludGVsX21zdF9wcmVfZW5hYmxlX2RwKHN0cnVjdCBpbnRlbF9lbmNvZGVy
ICplbmNvZGVyLAogCQlEUk1fRVJST1IoImZhaWxlZCB0byBhbGxvY2F0ZSB2Y3BpXG4iKTsKIAog
CWludGVsX2RwLT5hY3RpdmVfbXN0X2xpbmtzKys7Ci0JdGVtcCA9IEk5MTVfUkVBRChEUF9UUF9T
VEFUVVMocG9ydCkpOwotCUk5MTVfV1JJVEUoRFBfVFBfU1RBVFVTKHBvcnQpLCB0ZW1wKTsKKwl0
ZW1wID0gSTkxNV9SRUFEKGludGVsX2RwLT5yZWdzLmRwX3RwX3N0YXR1cyk7CisJSTkxNV9XUklU
RShpbnRlbF9kcC0+cmVncy5kcF90cF9zdGF0dXMsIHRlbXApOwogCiAJcmV0ID0gZHJtX2RwX3Vw
ZGF0ZV9wYXlsb2FkX3BhcnQxKCZpbnRlbF9kcC0+bXN0X21ncik7CiAKQEAgLTM0MiwxMSArMzQx
LDEwIEBAIHN0YXRpYyB2b2lkIGludGVsX21zdF9lbmFibGVfZHAoc3RydWN0IGludGVsX2VuY29k
ZXIgKmVuY29kZXIsCiAJc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQg
PSBpbnRlbF9tc3QtPnByaW1hcnk7CiAJc3RydWN0IGludGVsX2RwICppbnRlbF9kcCA9ICZpbnRl
bF9kaWdfcG9ydC0+ZHA7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9f
aTkxNShlbmNvZGVyLT5iYXNlLmRldik7Ci0JZW51bSBwb3J0IHBvcnQgPSBpbnRlbF9kaWdfcG9y
dC0+YmFzZS5wb3J0OwogCiAJRFJNX0RFQlVHX0tNUygiYWN0aXZlIGxpbmtzICVkXG4iLCBpbnRl
bF9kcC0+YWN0aXZlX21zdF9saW5rcyk7CiAKLQlpZiAoaW50ZWxfZGVfd2FpdF9mb3Jfc2V0KGRl
dl9wcml2LCBEUF9UUF9TVEFUVVMocG9ydCksCisJaWYgKGludGVsX2RlX3dhaXRfZm9yX3NldChk
ZXZfcHJpdiwgaW50ZWxfZHAtPnJlZ3MuZHBfdHBfc3RhdHVzLAogCQkJCSAgRFBfVFBfU1RBVFVT
X0FDVF9TRU5ULCAxKSkKIAkJRFJNX0VSUk9SKCJUaW1lZCBvdXQgd2FpdGluZyBmb3IgQUNUIHNl
bnRcbiIpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAppbmRleCBkZTllNjc5ZTkwYmIuLjAwNmNm
ZmQ1NmJlMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCkBAIC05NTQ2LDcgKzk1NDYsOSBAQCBl
bnVtIHNrbF9wb3dlcl9nYXRlIHsKIC8qIERpc3BsYXlQb3J0IFRyYW5zcG9ydCBDb250cm9sICov
CiAjZGVmaW5lIF9EUF9UUF9DVExfQQkJCTB4NjQwNDAKICNkZWZpbmUgX0RQX1RQX0NUTF9CCQkJ
MHg2NDE0MAorI2RlZmluZSBfVEdMX0RQX1RQX0NUTF9BCQkweDYwNTQwCiAjZGVmaW5lIERQX1RQ
X0NUTChwb3J0KSBfTU1JT19QT1JUKHBvcnQsIF9EUF9UUF9DVExfQSwgX0RQX1RQX0NUTF9CKQor
I2RlZmluZSBUR0xfRFBfVFBfQ1RMKHRyYW4pIF9NTUlPX1RSQU5TMigodHJhbiksIF9UR0xfRFBf
VFBfQ1RMX0EpCiAjZGVmaW5lICBEUF9UUF9DVExfRU5BQkxFCQkJKDEgPDwgMzEpCiAjZGVmaW5l
ICBEUF9UUF9DVExfRkVDX0VOQUJMRQkJCSgxIDw8IDMwKQogI2RlZmluZSAgRFBfVFBfQ1RMX01P
REVfU1NUCQkJKDAgPDwgMjcpCkBAIC05NTY2LDcgKzk1NjgsOSBAQCBlbnVtIHNrbF9wb3dlcl9n
YXRlIHsKIC8qIERpc3BsYXlQb3J0IFRyYW5zcG9ydCBTdGF0dXMgKi8KICNkZWZpbmUgX0RQX1RQ
X1NUQVRVU19BCQkJMHg2NDA0NAogI2RlZmluZSBfRFBfVFBfU1RBVFVTX0IJCQkweDY0MTQ0Cisj
ZGVmaW5lIF9UR0xfRFBfVFBfU1RBVFVTX0EJCTB4NjA1NDQKICNkZWZpbmUgRFBfVFBfU1RBVFVT
KHBvcnQpIF9NTUlPX1BPUlQocG9ydCwgX0RQX1RQX1NUQVRVU19BLCBfRFBfVFBfU1RBVFVTX0Ip
CisjZGVmaW5lIFRHTF9EUF9UUF9TVEFUVVModHJhbikgX01NSU9fVFJBTlMyKCh0cmFuKSwgX1RH
TF9EUF9UUF9TVEFUVVNfQSkKICNkZWZpbmUgIERQX1RQX1NUQVRVU19GRUNfRU5BQkxFX0xJVkUJ
CSgxIDw8IDI4KQogI2RlZmluZSAgRFBfVFBfU1RBVFVTX0lETEVfRE9ORQkJCSgxIDw8IDI1KQog
I2RlZmluZSAgRFBfVFBfU1RBVFVTX0FDVF9TRU5UCQkJKDEgPDwgMjQpCi0tIAoyLjIzLjAKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBt
YWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

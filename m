Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C935DD6AA0
	for <lists+intel-gfx@lfdr.de>; Mon, 14 Oct 2019 22:14:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DBE4A6E546;
	Mon, 14 Oct 2019 20:14:10 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A838C6E528
 for <intel-gfx@lists.freedesktop.org>; Mon, 14 Oct 2019 20:14:08 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18836951-1500050 
 for <intel-gfx@lists.freedesktop.org>; Mon, 14 Oct 2019 21:14:05 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 14 Oct 2019 21:14:03 +0100
Message-Id: <20191014201404.22468-3-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191014201404.22468-1-chris@chris-wilson.co.uk>
References: <20191014201404.22468-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 3/4] drm/i915/perf: Allow dynamic reconfiguration
 of the OA stream
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SW50cm9kdWNlIGEgbmV3IHBlcmZfaW9jdGwgY29tbWFuZCB0byBjaGFuZ2UgdGhlIE9BIGNvbmZp
Z3VyYXRpb24gb2YgdGhlCmFjdGl2ZSBzdHJlYW0uIFRoaXMgYWxsb3dzIHRoZSBPQSBzdHJlYW0g
dG8gYmUgcmVjb25maWd1cmVkIGJldHdlZW4KYmF0Y2ggYnVmZmVycywgZ2l2aW5nIGdyZWF0ZXIg
ZmxleGliaWxpdHkgaW4gc2FtcGxpbmcuIFdlIGluamVjdCBhCnJlcXVlc3QgaW50byB0aGUgT0Eg
Y29udGV4dCB0byByZWNvbmZpZ3VyZSB0aGUgc3RyZWFtIGFzeW5jaHJvbm91c2x5IG9uCnRoZSBH
UFUgaW4gYmV0d2VlbiBhbmQgb3JkZXJlZCB3aXRoIGV4ZWNidWZmZXIgY2FsbHMuCgpPcmlnaW5h
bCBwYXRjaCBmb3IgZHluYW1pYyByZWNvbmZpZ3VyYXRpb24gYnkgTGlvbmVsIExhbmR3ZXJsaW4u
CgpMaW5rOiBodHRwczovL2dpdGxhYi5mcmVlZGVza3RvcC5vcmcvbWVzYS9tZXNhL21lcmdlX3Jl
cXVlc3RzLzkzMgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNv
bi5jby51az4KUmV2aWV3ZWQtYnk6IExpb25lbCBMYW5kd2VybGluIDxsaW9uZWwuZy5sYW5kd2Vy
bGluQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyB8IDQ2
ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystCiBpbmNsdWRlL3VhcGkvZHJtL2k5MTVf
ZHJtLmggICAgICB8IDEzICsrKysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCA1OCBpbnNlcnRpb25z
KCspLCAxIGRlbGV0aW9uKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9wZXJmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwppbmRleCAxMDk3ODJl
YTMwYWQuLjM3MmM5MWY2YTI4ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9wZXJmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKQEAgLTI4NjIs
NiArMjg2Miw0MCBAQCBzdGF0aWMgdm9pZCBpOTE1X3BlcmZfZGlzYWJsZV9sb2NrZWQoc3RydWN0
IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAkJc3RyZWFtLT5vcHMtPmRpc2FibGUoc3RyZWFt
KTsKIH0KIAorc3RhdGljIGxvbmcgaTkxNV9wZXJmX2NvbmZpZ19sb2NrZWQoc3RydWN0IGk5MTVf
cGVyZl9zdHJlYW0gKnN0cmVhbSwKKwkJCQkgICAgdW5zaWduZWQgbG9uZyBtZXRyaWNzX3NldCkK
K3sKKwlzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKmNvbmZpZzsKKwlsb25nIHJldCA9IHN0cmVhbS0+
b2FfY29uZmlnLT5pZDsKKworCWNvbmZpZyA9IGk5MTVfcGVyZl9nZXRfb2FfY29uZmlnKHN0cmVh
bS0+cGVyZiwgbWV0cmljc19zZXQpOworCWlmICghY29uZmlnKQorCQlyZXR1cm4gLUVJTlZBTDsK
KworCWlmIChjb25maWcgIT0gc3RyZWFtLT5vYV9jb25maWcpIHsKKwkJaW50IGVycjsKKworCQkv
KgorCQkgKiBJZiBPQSBpcyBib3VuZCB0byBhIHNwZWNpZmljIGNvbnRleHQsIGVtaXQgdGhlCisJ
CSAqIHJlY29uZmlndXJhdGlvbiBpbmxpbmUgZnJvbSB0aGF0IGNvbnRleHQuIFRoZSB1cGRhdGUK
KwkJICogd2lsbCB0aGVuIGJlIG9yZGVyZWQgd2l0aCByZXNwZWN0IHRvIHN1Ym1pc3Npb24gb24g
dGhhdAorCQkgKiBjb250ZXh0LgorCQkgKgorCQkgKiBXaGVuIHNldCBnbG9iYWxseSwgd2UgdXNl
IGEgbG93IHByaW9yaXR5IGtlcm5lbCBjb250ZXh0LAorCQkgKiBzbyBpdCB3aWxsIGVmZmVjdGl2
ZWx5IHRha2UgZWZmZWN0IHdoZW4gaWRsZS4KKwkJICovCisJCWVyciA9IGVtaXRfb2FfY29uZmln
KHN0cmVhbSwgb2FfY29udGV4dChzdHJlYW0pKTsKKwkJaWYgKGVyciA9PSAwKQorCQkJY29uZmln
ID0geGNoZygmc3RyZWFtLT5vYV9jb25maWcsIGNvbmZpZyk7CisJCWVsc2UKKwkJCXJldCA9IGVy
cjsKKwl9CisKKwlpOTE1X29hX2NvbmZpZ19wdXQoY29uZmlnKTsKKworCXJldHVybiByZXQ7Cit9
CisKIC8qKgogICogaTkxNV9wZXJmX2lvY3RsIC0gc3VwcG9ydCBpb2N0bCgpIHVzYWdlIHdpdGgg
aTkxNSBwZXJmIHN0cmVhbSBGRHMKICAqIEBzdHJlYW06IEFuIGk5MTUgcGVyZiBzdHJlYW0KQEAg
LTI4ODUsNiArMjkxOSw4IEBAIHN0YXRpYyBsb25nIGk5MTVfcGVyZl9pb2N0bF9sb2NrZWQoc3Ry
dWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKIAljYXNlIEk5MTVfUEVSRl9JT0NUTF9ESVNB
QkxFOgogCQlpOTE1X3BlcmZfZGlzYWJsZV9sb2NrZWQoc3RyZWFtKTsKIAkJcmV0dXJuIDA7CisJ
Y2FzZSBJOTE1X1BFUkZfSU9DVExfQ09ORklHOgorCQlyZXR1cm4gaTkxNV9wZXJmX2NvbmZpZ19s
b2NrZWQoc3RyZWFtLCBhcmcpOwogCX0KIAogCXJldHVybiAtRUlOVkFMOwpAQCAtNDAyMyw3ICs0
MDU5LDE1IEBAIHZvaWQgaTkxNV9wZXJmX2Zpbmkoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUpCiAgKi8KIGludCBpOTE1X3BlcmZfaW9jdGxfdmVyc2lvbih2b2lkKQogewotCXJldHVybiAx
OworCS8qCisJICogMTogSW5pdGlhbCB2ZXJzaW9uCisJICogICBJOTE1X1BFUkZfSU9DVExfRU5B
QkxFCisJICogICBJOTE1X1BFUkZfSU9DVExfRElTQUJMRQorCSAqCisJICogMjogQWRkZWQgcnVu
dGltZSBtb2RpZmljYXRpb24gb2YgT0EgY29uZmlnLgorCSAqICAgSTkxNV9QRVJGX0lPQ1RMX0NP
TkZJRworCSAqLworCXJldHVybiAyOwogfQogCiAjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5
MTVfU0VMRlRFU1QpCmRpZmYgLS1naXQgYS9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmggYi9p
bmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgKaW5kZXggMGM3YjI4MTVmYmYxLi5iMDA4Y2U4YjRl
NmYgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAorKysgYi9pbmNsdWRl
L3VhcGkvZHJtL2k5MTVfZHJtLmgKQEAgLTE5MzIsNiArMTkzMiwxOSBAQCBzdHJ1Y3QgZHJtX2k5
MTVfcGVyZl9vcGVuX3BhcmFtIHsKICAqLwogI2RlZmluZSBJOTE1X1BFUkZfSU9DVExfRElTQUJM
RQlfSU8oJ2knLCAweDEpCiAKKy8qKgorICogQ2hhbmdlIG1ldHJpY3Nfc2V0IGNhcHR1cmVkIGJ5
IGEgc3RyZWFtLgorICoKKyAqIElmIHRoZSBzdHJlYW0gaXMgYm91bmQgdG8gYSBzcGVjaWZpYyBj
b250ZXh0LCB0aGUgY29uZmlndXJhdGlvbiBjaGFuZ2UKKyAqIHdpbGwgcGVyZm9ybWVkIGlubGlu
ZSB3aXRoIHRoYXQgY29udGV4dCBzdWNoIHRoYXQgaXQgdGFrZXMgZWZmZWN0IGJlZm9yZQorICog
dGhlIG5leHQgZXhlY2J1ZiBzdWJtaXNzaW9uLgorICoKKyAqIFJldHVybnMgdGhlIHByZXZpb3Vz
bHkgYm91bmQgbWV0cmljcyBzZXQgaWQsIG9yIGEgbmVnYXRpdmUgZXJyb3IgY29kZS4KKyAqCisg
KiBUaGlzIGlvY3RsIGlzIGF2YWlsYWJsZSBpbiBwZXJmIHJldmlzaW9uIDIuCisgKi8KKyNkZWZp
bmUgSTkxNV9QRVJGX0lPQ1RMX0NPTkZJRwlfSU8oJ2knLCAweDIpCisKIC8qKgogICogQ29tbW9u
IHRvIGFsbCBpOTE1IHBlcmYgcmVjb3JkcwogICovCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QK
SW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

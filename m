Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7B841307B3F
	for <lists+intel-gfx@lfdr.de>; Thu, 28 Jan 2021 17:47:28 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C9C276E0D0;
	Thu, 28 Jan 2021 16:47:26 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-ej1-x636.google.com (mail-ej1-x636.google.com
 [IPv6:2a00:1450:4864:20::636])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 509B86E0D0
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Jan 2021 16:47:25 +0000 (UTC)
Received: by mail-ej1-x636.google.com with SMTP id g12so8749786ejf.8
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Jan 2021 08:47:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=jlekstrand-net.20150623.gappssmtp.com; s=20150623;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=2Jfn7BbR5HvAa+AMScqJgGPo7x0wSQDBkMceQtbW+t0=;
 b=E7w6Bn5BafuyCbvy7/IvUpEQJkUavfuc/rROwAPPF91PuybGkVOzlsfgBvYkQjkDnt
 akkLn+aVzYE3d8gJov+ThBLMereffBX7jn8WLfMY1E1sxvSyK3Svy3i/NZcBZW9/gAqC
 Yl52heXiJkffKQby1+QV1nCs/ant26WJy+Kf+GxzYqLtJ6xKY+7NWoYtDIKWvEuOl5fi
 RMfu0Ed9QVPs/+Tia53MZsBMzz5EL1hbqQ/nr+XaZ8OgbqykEMEZ/DM48N3MaF2E6N0r
 y3LI/TRnGmIwJ09svFFpE+Y22eG4ojl0sfYmNQ5SC4KzBuPeQRvC92z6eZOf1VGzlK2F
 bxJw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=2Jfn7BbR5HvAa+AMScqJgGPo7x0wSQDBkMceQtbW+t0=;
 b=X1hhG54P6ho3Hsiru0H2/+u9telP/cnwicPUPNxSs0XBfSoY0Lx/3ArG1rcUvSye/s
 4zlkVBlxVR1gT/zO6poRf3adVnALEx5o+kttmH6Z7b1vgQMRIZoavKg/H4hP+g90MhEF
 +3O+zyT4z7+FQdCAqQwfHoX8X67BKQ3GMaCcH0dP4l+fsA2/qOfpmGqB4UTHkeP9T24k
 Y3xa2cKasLJABWEMCTLB2K4CaJp86fBK0A1xCQ4lAMXKta4/YSvvq9nCT1LAqgDLaC/M
 8IZj4Dt0HunMpVPqz3HVUMw6wbnsTg4zXpexZoo0oJuc6hn0DNTCSf4r2BlTKXo/rJTz
 TVzQ==
X-Gm-Message-State: AOAM531nI0u/HXzfAhyJPXocBgMGA1ofYflKy2NySzLvQhImJdzcXPwx
 5e+6VOaAzyo2JbtW/TXuBPfAr87GniwLmu32ASPUPQ==
X-Google-Smtp-Source: ABdhPJzB3VbRYqksEfSfBmOpRABjpVEjB3LCBirE0uoeVl92CFRLUnG6GH43OgS+02JqKC6O0xHax9nbxEDYIOdi79E=
X-Received: by 2002:a17:906:dfce:: with SMTP id
 jt14mr217395ejc.435.1611852443825; 
 Thu, 28 Jan 2021 08:47:23 -0800 (PST)
MIME-Version: 1.0
References: <20210128162612.927917-1-maarten.lankhorst@linux.intel.com>
 <20210128162612.927917-14-maarten.lankhorst@linux.intel.com>
In-Reply-To: <20210128162612.927917-14-maarten.lankhorst@linux.intel.com>
From: Jason Ekstrand <jason@jlekstrand.net>
Date: Thu, 28 Jan 2021 10:47:12 -0600
Message-ID: <CAOFGe94cG3qTm-n0rA4u8S3Q9S7yXKjs+s1hwna9PO-=GaMNfA@mail.gmail.com>
To: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Subject: Re: [Intel-gfx] [PATCH v7 13/63] drm/i915: Reject more ioctls for
 userptr
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?Q?Thomas_Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>,
 Intel GFX <intel-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCBKYW4gMjgsIDIwMjEgYXQgMTA6MjYgQU0gTWFhcnRlbiBMYW5raG9yc3QKPG1hYXJ0
ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4gd3JvdGU6Cj4KPiBUaGVyZSBhcmUgYSBjb3Vw
bGUgb2YgaW9jdGwncyByZWxhdGVkIHRvIHRpbGluZyBhbmQgY2FjaGUgcGxhY2VtZW50LAo+IHRo
YXQgbWFrZSBubyBzZW5zZSBmb3IgdXNlcnB0ciwgcmVqZWN0IHRob3NlOgo+IC0gaTkxNV9nZW1f
c2V0X3RpbGluZ19pb2N0bCgpCj4gICAgIFRpbGluZyBzaG91bGQgYWx3YXlzIGJlIGxpbmVhciBm
b3IgdXNlcnB0ci4gQ2hhbmdpbmcgcGxhY2VtZW50IHdpbGwKPiAgICAgZmFpbCB3aXRoIC1FTlhJ
Ty4KPiAtIGk5MTVfZ2VtX3NldF9jYWNoaW5nX2lvY3RsKCkKPiAgICAgVXNlcnB0ciBtZW1vcnkg
c2hvdWxkIGFsd2F5cyBiZSBjYWNoZWQuIENoYW5naW5nIGNhY2hpbmcgbW9kZSB3aWxsCj4gICAg
IGZhaWwgd2l0aCAtRU5YSU8uCj4gLSBpOTE1X2dlbV9zZXRfZG9tYWluX2lvY3RsKCkKPiAgICAg
Q2hhbmdlZCB0byBiZSBlcXVpdmFsZW50IHRvIGdlbV93YWl0LCB3aGljaCBpcyBjb3JyZWN0IGZv
ciB0aGUKPiAgICAgY2FjaGVkIGxpbmVhciB1c2VycHRyIHBvaW50ZXJzLiBUaGlzIGlzIHJlcXVp
cmVkIGJlY2F1c2Ugd2UKPiAgICAgY2Fubm90IGdyYWIgYSByZWZlcmVuY2UgdG8gdGhlIHBhZ2Vz
IGluIHRoZSByZXdvcmssIGJ1dCB3YWl0aW5nCj4gICAgIGZvciBpZGxlIHdpbGwgZG8gdGhlIHNh
bWUuCj4KPiBUaGlzIHBsdXMgdGhlIHByZXZpb3VzIGNoYW5nZXMgaGF2ZSBiZWVuIHRlc3RlZCBh
Z2FpbnN0IGJlaWduZXQKPiBieSB1c2luZyBpdHMgb3duIHVuaXQgdGVzdHMsIGFuZCBpbnRlbC12
aWRlby1jb21wdXRlIGJ5IHVzaW5nCj4gcGlnbGl0J3Mgb3BlbmNsIHRlc3RzLgoKRGlkIHlvdSB0
ZXN0IGFnYWluc3QgbWVzYSBhdCBhbGw/Cgo+Cj4gU2lnbmVkLW9mZi1ieTogTWFhcnRlbiBMYW5r
aG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KPiBSZXZpZXdlZC1ieTog
VGhvbWFzIEhlbGxzdHLDtm0gPHRob21hcy5oZWxsc3Ryb21AbGludXguaW50ZWwuY29tPgo+IENj
OiBKYXNvbiBFa3N0cmFuZCA8amFzb25Aamxla3N0cmFuZC5uZXQ+Cj4KPiAtLSBTdGlsbCBuZWVk
cyBhbiBhY2sgZnJvbSByZWxldmFudCB1c2Vyc3BhY2UgdGhhdCBpdCB3b24ndCBicmVhaywgYnV0
IHNob3VsZCBiZSBnb29kLgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Rpc3BsYXkuYyB8ICAyICstCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9kb21haW4uYyAgIHwgMTIgKysrKysrKysrKy0tCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9vYmplY3QuaCAgIHwgIDYgKysrKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV91c2VycHRyLmMgIHwgIDMgKystCj4gIDQgZmlsZXMgY2hhbmdlZCwgMTkg
aW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCj4gaW5kZXggZDAxM2IwZmFiMTI4Li4zZTI0ZGI4Yjlh
ZDYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXku
Ywo+IEBAIC0xNDE3Miw3ICsxNDE3Miw3IEBAIHN0YXRpYyBpbnQgaW50ZWxfdXNlcl9mcmFtZWJ1
ZmZlcl9jcmVhdGVfaGFuZGxlKHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiLAo+ICAgICAgICAg
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiA9IGludGVsX2ZiX29iaihmYik7Cj4gICAg
ICAgICBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUob2JqLT5iYXNlLmRl
dik7Cj4KPiAtICAgICAgIGlmIChvYmotPnVzZXJwdHIubW0pIHsKPiArICAgICAgIGlmIChpOTE1
X2dlbV9vYmplY3RfaXNfdXNlcnB0cihvYmopKSB7Cj4gICAgICAgICAgICAgICAgIGRybV9kYmco
Jmk5MTUtPmRybSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAiYXR0ZW1wdGluZyB0byB1c2Ug
YSB1c2VycHRyIGZvciBhIGZyYW1lYnVmZmVyLCBkZW5pZWRcbiIpOwo+ICAgICAgICAgICAgICAg
ICByZXR1cm4gLUVJTlZBTDsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX2RvbWFpbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2Rv
bWFpbi5jCj4gaW5kZXggMzZmNTRjZWRhYWViLi4zMDc4ZTlhMDlmNzAgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RvbWFpbi5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RvbWFpbi5jCj4gQEAgLTMzNSw3ICszMzUsMTMg
QEAgaW50IGk5MTVfZ2VtX3NldF9jYWNoaW5nX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYs
IHZvaWQgKmRhdGEsCj4gICAgICAgICAgKiBub3QgYWxsb3dlZCB0byBiZSBjaGFuZ2VkIGJ5IHVz
ZXJzcGFjZS4KPiAgICAgICAgICAqLwo+ICAgICAgICAgaWYgKGk5MTVfZ2VtX29iamVjdF9pc19w
cm94eShvYmopKSB7Cj4gLSAgICAgICAgICAgICAgIHJldCA9IC1FTlhJTzsKPiArICAgICAgICAg
ICAgICAgLyoKPiArICAgICAgICAgICAgICAgICogU2lsZW50bHkgYWxsb3cgY2FjaGVkIGZvciB1
c2VycHRyOyB0aGUgdnVsa2FuIGRyaXZlcgo+ICsgICAgICAgICAgICAgICAgKiBzZXRzIGFsbCBv
YmplY3RzIHRvIGNhY2hlZAo+ICsgICAgICAgICAgICAgICAgKi8KPiArICAgICAgICAgICAgICAg
aWYgKCFpOTE1X2dlbV9vYmplY3RfaXNfdXNlcnB0cihvYmopIHx8Cj4gKyAgICAgICAgICAgICAg
ICAgICBhcmdzLT5jYWNoaW5nICE9IEk5MTVfQ0FDSElOR19DQUNIRUQpCgpUaGFua3MgZm9yIGxv
b2tpbmcgb3V0IGZvciB0aGlzIGNhc2UuICBJIGp1c3QgZG91YmxlLWNoZWNrZWQgYW5kLCB5ZXMs
CndlIHNldCBjYWNoaW5nIG9uIHVzZXJwdHIgYnV0IHdlIGFsd2F5cyBzZXQgaXQgdG8gQ0FDSEVE
IHNvIHRoaXMKc2hvdWxkIHRha2UgY2FyZSBvZiB1cywgYXNzdW1pbmcgaXQgZG9lcyB3aGF0IGl0
IGxvb2tzIGxpa2UgaXQgZG9lcy4KCkFja2VkLWJ5OiBKYXNvbiBFa3N0cmFuZCA8amFzb25Aamxl
a3N0cmFuZC5uZXQ+Cgo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IC1FTlhJTzsKPiAg
ICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4gICAgICAgICB9Cj4KPiBAQCAtNTMzLDcgKzUzOSw5
IEBAIGk5MTVfZ2VtX3NldF9kb21haW5faW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9p
ZCAqZGF0YSwKPiAgICAgICAgICAqIGNvbnNpZGVyZWQgdG8gYmUgb3V0c2lkZSBvZiBhbnkgY2Fj
aGUgZG9tYWluLgo+ICAgICAgICAgICovCj4gICAgICAgICBpZiAoaTkxNV9nZW1fb2JqZWN0X2lz
X3Byb3h5KG9iaikpIHsKPiAtICAgICAgICAgICAgICAgZXJyID0gLUVOWElPOwo+ICsgICAgICAg
ICAgICAgICAvKiBzaWxlbnRseSBhbGxvdyB1c2VycHRyIHRvIGNvbXBsZXRlICovCj4gKyAgICAg
ICAgICAgICAgIGlmICghaTkxNV9nZW1fb2JqZWN0X2lzX3VzZXJwdHIob2JqKSkKPiArICAgICAg
ICAgICAgICAgICAgICAgICBlcnIgPSAtRU5YSU87Cj4gICAgICAgICAgICAgICAgIGdvdG8gb3V0
Owo+ICAgICAgICAgfQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9vYmplY3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmpl
Y3QuaAo+IGluZGV4IGU5YThlZTk2ZDY0Yy4uM2YzMDBhMWQyN2JhIDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaAo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaAo+IEBAIC01NzQsNiArNTc0LDEyIEBA
IHZvaWQgX19pOTE1X2dlbV9vYmplY3RfZmx1c2hfZnJvbnRidWZmZXIoc3RydWN0IGRybV9pOTE1
X2dlbV9vYmplY3QgKm9iaiwKPiAgdm9pZCBfX2k5MTVfZ2VtX29iamVjdF9pbnZhbGlkYXRlX2Zy
b250YnVmZmVyKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW0gZmJfb3Bfb3JpZ2luIG9yaWdp
bik7Cj4KPiArc3RhdGljIGlubGluZSBib29sCj4gK2k5MTVfZ2VtX29iamVjdF9pc191c2VycHRy
KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCj4gK3sKPiArICAgICAgIHJldHVybiBv
YmotPnVzZXJwdHIubW07Cj4gK30KPiArCj4gIHN0YXRpYyBpbmxpbmUgdm9pZAo+ICBpOTE1X2dl
bV9vYmplY3RfZmx1c2hfZnJvbnRidWZmZXIoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bSBmYl9vcF9vcmlnaW4g
b3JpZ2luKQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
dXNlcnB0ci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3VzZXJwdHIuYwo+
IGluZGV4IDBjMzBjYTUyZGVlMy4uYzg5Y2Y5MTFmYjI5IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV91c2VycHRyLmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0ci5jCj4gQEAgLTcyMSw3ICs3MjEsOCBAQCBzdGF0
aWMgY29uc3Qgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Rfb3BzIGk5MTVfZ2VtX3VzZXJwdHJf
b3BzID0gewo+ICAgICAgICAgLm5hbWUgPSAiaTkxNV9nZW1fb2JqZWN0X3VzZXJwdHIiLAo+ICAg
ICAgICAgLmZsYWdzID0gSTkxNV9HRU1fT0JKRUNUX0lTX1NIUklOS0FCTEUgfAo+ICAgICAgICAg
ICAgICAgICAgSTkxNV9HRU1fT0JKRUNUX05PX01NQVAgfAo+IC0gICAgICAgICAgICAgICAgSTkx
NV9HRU1fT0JKRUNUX0FTWU5DX0NBTkNFTCwKPiArICAgICAgICAgICAgICAgIEk5MTVfR0VNX09C
SkVDVF9BU1lOQ19DQU5DRUwgfAo+ICsgICAgICAgICAgICAgICAgSTkxNV9HRU1fT0JKRUNUX0lT
X1BST1hZLAo+ICAgICAgICAgLmdldF9wYWdlcyA9IGk5MTVfZ2VtX3VzZXJwdHJfZ2V0X3BhZ2Vz
LAo+ICAgICAgICAgLnB1dF9wYWdlcyA9IGk5MTVfZ2VtX3VzZXJwdHJfcHV0X3BhZ2VzLAo+ICAg
ICAgICAgLmRtYWJ1Zl9leHBvcnQgPSBpOTE1X2dlbV91c2VycHRyX2RtYWJ1Zl9leHBvcnQsCj4g
LS0KPiAyLjMwLjAKPgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1n
ZngK

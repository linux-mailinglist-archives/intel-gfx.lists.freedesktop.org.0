Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A5BBA4BF35
	for <lists+intel-gfx@lfdr.de>; Wed, 19 Jun 2019 19:02:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1A9DC6E444;
	Wed, 19 Jun 2019 17:02:02 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7F24E6E444
 for <intel-gfx@lists.freedesktop.org>; Wed, 19 Jun 2019 17:02:00 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16956320-1500050 
 for multiple; Wed, 19 Jun 2019 18:01:33 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 19 Jun 2019 18:01:35 +0100
Message-Id: <20190619170135.15281-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190619153942.8518-1-chris@chris-wilson.co.uk>
References: <20190619153942.8518-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3] drm/i915: Keep rings pinned while the
 context is active
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UmVtZW1iZXIgdG8ga2VlcCB0aGUgcmluZ3MgcGlubmVkIGFzIHdlbGwgYXMgdGhlIGNvbnRleHQg
aW1hZ2UgdW50aWwgdGhlCkdQVSBpcyBubyBsb25nZXIgYWN0aXZlLgoKdjI6IEludHJvZHVjZSBh
IHJpbmctPnBpbl9jb3VudCBwcmltYXJpbHkgdG8gaGlkZSB0aGUKbW9ja19yaW5nIHRoYXQgZG9l
c24ndCBmaXQgaW50byB0aGUgbm9ybWFsIEdHVFQgdm1hIHBpY3R1cmUuCgp2MzogT3JkZXIgaXMg
aW1wb3J0YW50IGluIHRlYXJkb3duLCByaW5nYnVmZmVyIHN1Ym1pc3Npb24gbmVlZHMgdG8gZHJv
cAp0aGUgcGluIGNvdW50IG9uIHRoZSBlbmdpbmUtPmtlcm5lbF9jb250ZXh0IGJlZm9yZSBpdCBj
YW4gZ2xlZWZ1bGx5IGZyZWUKaXRzIHJpbmcuCgpCdWd6aWxsYTogaHR0cHM6Ly9idWdzLmZyZWVk
ZXNrdG9wLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTEwOTQ2CkZpeGVzOiBjZTQ3NmM4MGI4YmYgKCJk
cm0vaTkxNTogS2VlcCBjb250ZXh0cyBwaW5uZWQgdW50aWwgYWZ0ZXIgdGhlIG5leHQga2VybmVs
IGNvbnRleHQgc3dpdGNoIikKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJp
cy13aWxzb24uY28udWs+CkNjOiBNaWthIEt1b3BwYWxhIDxtaWthLmt1b3BwYWxhQGxpbnV4Lmlu
dGVsLmNvbT4KQ2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+ClJl
dmlld2VkLWJ5OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgotLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYyAgICAgIHwgMjcgKysrKysr
KysrKystLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5o
IHwgMTIgKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAgICAg
ICAgIHwgMTAgKystLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ2J1ZmZl
ci5jICAgfCAzMSArKysrKysrKysrKysrLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
bW9ja19lbmdpbmUuYyAgICAgICAgfCAgMSArCiA1IGZpbGVzIGNoYW5nZWQsIDUzIGluc2VydGlv
bnMoKyksIDI4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRl
eHQuYwppbmRleCAyYzQ1NGYyMjdjMmUuLjIzMTIwOTAxYzU1ZiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2NvbnRleHQuYwpAQCAtMTI2LDYgKzEyNiw3IEBAIHN0YXRpYyB2b2lkIGlu
dGVsX2NvbnRleHRfcmV0aXJlKHN0cnVjdCBpOTE1X2FjdGl2ZSAqYWN0aXZlKQogCWlmIChjZS0+
c3RhdGUpCiAJCV9fY29udGV4dF91bnBpbl9zdGF0ZShjZS0+c3RhdGUpOwogCisJaW50ZWxfcmlu
Z191bnBpbihjZS0+cmluZyk7CiAJaW50ZWxfY29udGV4dF9wdXQoY2UpOwogfQogCkBAIC0xNjAs
MjcgKzE2MSwzNSBAQCBpbnQgaW50ZWxfY29udGV4dF9hY3RpdmVfYWNxdWlyZShzdHJ1Y3QgaW50
ZWxfY29udGV4dCAqY2UsIHVuc2lnbmVkIGxvbmcgZmxhZ3MpCiAKIAlpbnRlbF9jb250ZXh0X2dl
dChjZSk7CiAKKwllcnIgPSBpbnRlbF9yaW5nX3BpbihjZS0+cmluZyk7CisJaWYgKGVycikKKwkJ
Z290byBlcnJfcHV0OworCiAJaWYgKCFjZS0+c3RhdGUpCiAJCXJldHVybiAwOwogCiAJZXJyID0g
X19jb250ZXh0X3Bpbl9zdGF0ZShjZS0+c3RhdGUsIGZsYWdzKTsKLQlpZiAoZXJyKSB7Ci0JCWk5
MTVfYWN0aXZlX2NhbmNlbCgmY2UtPmFjdGl2ZSk7Ci0JCWludGVsX2NvbnRleHRfcHV0KGNlKTsK
LQkJcmV0dXJuIGVycjsKLQl9CisJaWYgKGVycikKKwkJZ290byBlcnJfcmluZzsKIAogCS8qIFBy
ZWFsbG9jYXRlIHRyYWNraW5nIG5vZGVzICovCiAJaWYgKCFpOTE1X2dlbV9jb250ZXh0X2lzX2tl
cm5lbChjZS0+Z2VtX2NvbnRleHQpKSB7CiAJCWVyciA9IGk5MTVfYWN0aXZlX2FjcXVpcmVfcHJl
YWxsb2NhdGVfYmFycmllcigmY2UtPmFjdGl2ZSwKIAkJCQkJCQkgICAgICBjZS0+ZW5naW5lKTsK
LQkJaWYgKGVycikgewotCQkJaTkxNV9hY3RpdmVfcmVsZWFzZSgmY2UtPmFjdGl2ZSk7Ci0JCQly
ZXR1cm4gZXJyOwotCQl9CisJCWlmIChlcnIpCisJCQlnb3RvIGVycl9zdGF0ZTsKIAl9CiAKIAly
ZXR1cm4gMDsKKworZXJyX3N0YXRlOgorCV9fY29udGV4dF91bnBpbl9zdGF0ZShjZS0+c3RhdGUp
OworZXJyX3Jpbmc6CisJaW50ZWxfcmluZ191bnBpbihjZS0+cmluZyk7CitlcnJfcHV0OgorCWlu
dGVsX2NvbnRleHRfcHV0KGNlKTsKKwlpOTE1X2FjdGl2ZV9jYW5jZWwoJmNlLT5hY3RpdmUpOwor
CXJldHVybiBlcnI7CiB9CiAKIHZvaWQgaW50ZWxfY29udGV4dF9hY3RpdmVfcmVsZWFzZShzdHJ1
Y3QgaW50ZWxfY29udGV4dCAqY2UpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9lbmdpbmVfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Vu
Z2luZV90eXBlcy5oCmluZGV4IDg2OGIyMjAyMTRmOC4uY2M2YjhlYjBjZGEwIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaApAQCAtNzAsNiArNzAsMTgg
QEAgc3RydWN0IGludGVsX3JpbmcgewogCXN0cnVjdCBsaXN0X2hlYWQgcmVxdWVzdF9saXN0Owog
CXN0cnVjdCBsaXN0X2hlYWQgYWN0aXZlX2xpbms7CiAKKwkvKgorCSAqIEFzIHdlIGhhdmUgdHdv
IHR5cGVzIG9mIHJpbmdzLCBvbmUgZ2xvYmFsIHRvIHRoZSBlbmdpbmUgdXNlZAorCSAqIGJ5IHJp
bmdidWZmZXIgc3VibWlzc2lvbiBhbmQgdGhvc2UgdGhhdCBhcmUgZXhjbHVzaXZlIHRvIGEKKwkg
KiBjb250ZXh0IHVzZWQgYnkgZXhlY2xpc3RzLCB3ZSBoYXZlIHRvIHBsYXkgc2FmZSBhbmQgYWxs
b3cKKwkgKiBhdG9taWMgdXBkYXRlcyB0byB0aGUgcGluX2NvdW50LiBIb3dldmVyLCB0aGUgYWN0
dWFsIHBpbm5pbmcKKwkgKiBvZiB0aGUgY29udGV4dCBpcyBlaXRoZXIgZG9uZSBkdXJpbmcgaW5p
dGlhbGlzYXRpb24gZm9yCisJICogcmluZ2J1ZmZlciBzdWJtaXNzaW9uIG9yIHNlcmlhbGlzZWQg
YXMgcGFydCBvZiB0aGUgY29udGV4dAorCSAqIHBpbm5pbmcgZm9yIGV4ZWNsaXN0cywgYW5kIHNv
IHdlIGRvIG5vdCBuZWVkIGEgbXV0ZXggb3Vyc2VsdmVzCisJICogdG8gKiBzZXJpYWxpc2UgaW50
ZWxfcmluZ19waW4vaW50ZWxfcmluZ191bnBpbi4KKwkgKi8KKwlhdG9taWNfdCBwaW5fY291bnQ7
CisKIAl1MzIgaGVhZDsKIAl1MzIgdGFpbDsKIAl1MzIgZW1pdDsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfbHJjLmMKaW5kZXggYjQyYjVmMTU4Mjk1Li44MmI3YWNlNjJkOTcgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2xyYy5jCkBAIC0xNDE0LDYgKzE0MTQsNyBAQCBzdGF0aWMgdm9pZCBl
eGVjbGlzdHNfY29udGV4dF9kZXN0cm95KHN0cnVjdCBrcmVmICprcmVmKQogewogCXN0cnVjdCBp
bnRlbF9jb250ZXh0ICpjZSA9IGNvbnRhaW5lcl9vZihrcmVmLCB0eXBlb2YoKmNlKSwgcmVmKTsK
IAorCUdFTV9CVUdfT04oIWk5MTVfYWN0aXZlX2lzX2lkbGUoJmNlLT5hY3RpdmUpKTsKIAlHRU1f
QlVHX09OKGludGVsX2NvbnRleHRfaXNfcGlubmVkKGNlKSk7CiAKIAlpZiAoY2UtPnN0YXRlKQpA
QCAtMTQyNiw3ICsxNDI3LDYgQEAgc3RhdGljIHZvaWQgZXhlY2xpc3RzX2NvbnRleHRfdW5waW4o
c3RydWN0IGludGVsX2NvbnRleHQgKmNlKQogewogCWk5MTVfZ2VtX2NvbnRleHRfdW5waW5faHdf
aWQoY2UtPmdlbV9jb250ZXh0KTsKIAlpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKGNlLT5zdGF0
ZS0+b2JqKTsKLQlpbnRlbF9yaW5nX3VucGluKGNlLT5yaW5nKTsKIH0KIAogc3RhdGljIHZvaWQK
QEAgLTE0NzgsMTMgKzE0NzgsOSBAQCBfX2V4ZWNsaXN0c19jb250ZXh0X3BpbihzdHJ1Y3QgaW50
ZWxfY29udGV4dCAqY2UsCiAJCWdvdG8gdW5waW5fYWN0aXZlOwogCX0KIAotCXJldCA9IGludGVs
X3JpbmdfcGluKGNlLT5yaW5nKTsKLQlpZiAocmV0KQotCQlnb3RvIHVucGluX21hcDsKLQogCXJl
dCA9IGk5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lkKGNlLT5nZW1fY29udGV4dCk7CiAJaWYgKHJl
dCkKLQkJZ290byB1bnBpbl9yaW5nOworCQlnb3RvIHVucGluX21hcDsKIAogCWNlLT5scmNfZGVz
YyA9IGxyY19kZXNjcmlwdG9yKGNlLCBlbmdpbmUpOwogCWNlLT5scmNfcmVnX3N0YXRlID0gdmFk
ZHIgKyBMUkNfU1RBVEVfUE4gKiBQQUdFX1NJWkU7CkBAIC0xNDkyLDggKzE0ODgsNiBAQCBfX2V4
ZWNsaXN0c19jb250ZXh0X3BpbihzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCiAKIAlyZXR1cm4g
MDsKIAotdW5waW5fcmluZzoKLQlpbnRlbF9yaW5nX3VucGluKGNlLT5yaW5nKTsKIHVucGluX21h
cDoKIAlpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKGNlLT5zdGF0ZS0+b2JqKTsKIHVucGluX2Fj
dGl2ZToKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3JpbmdidWZm
ZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3JpbmdidWZmZXIuYwppbmRleCBj
NjAyM2JjOTQ1MmQuLjEyMDEwZTc5ODg2OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfcmluZ2J1ZmZlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX3JpbmdidWZmZXIuYwpAQCAtMTE0OSwxNiArMTE0OSwxNiBAQCBpOTE1X2VtaXRfYmJfc3Rh
cnQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCiBpbnQgaW50ZWxfcmluZ19waW4oc3RydWN0IGlu
dGVsX3JpbmcgKnJpbmcpCiB7CiAJc3RydWN0IGk5MTVfdm1hICp2bWEgPSByaW5nLT52bWE7Ci0J
ZW51bSBpOTE1X21hcF90eXBlIG1hcCA9IGk5MTVfY29oZXJlbnRfbWFwX3R5cGUodm1hLT52bS0+
aTkxNSk7CiAJdW5zaWduZWQgaW50IGZsYWdzOwogCXZvaWQgKmFkZHI7CiAJaW50IHJldDsKIAot
CUdFTV9CVUdfT04ocmluZy0+dmFkZHIpOworCWlmIChhdG9taWNfZmV0Y2hfaW5jKCZyaW5nLT5w
aW5fY291bnQpKQorCQlyZXR1cm4gMDsKIAogCXJldCA9IGk5MTVfdGltZWxpbmVfcGluKHJpbmct
PnRpbWVsaW5lKTsKIAlpZiAocmV0KQotCQlyZXR1cm4gcmV0OworCQlnb3RvIGVycl91bnBpbjsK
IAogCWZsYWdzID0gUElOX0dMT0JBTDsKIApAQCAtMTE3MiwyNiArMTE3MiwzMSBAQCBpbnQgaW50
ZWxfcmluZ19waW4oc3RydWN0IGludGVsX3JpbmcgKnJpbmcpCiAKIAlyZXQgPSBpOTE1X3ZtYV9w
aW4odm1hLCAwLCAwLCBmbGFncyk7CiAJaWYgKHVubGlrZWx5KHJldCkpCi0JCWdvdG8gdW5waW5f
dGltZWxpbmU7CisJCWdvdG8gZXJyX3RpbWVsaW5lOwogCiAJaWYgKGk5MTVfdm1hX2lzX21hcF9h
bmRfZmVuY2VhYmxlKHZtYSkpCiAJCWFkZHIgPSAodm9pZCBfX2ZvcmNlICopaTkxNV92bWFfcGlu
X2lvbWFwKHZtYSk7CiAJZWxzZQotCQlhZGRyID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9tYXAodm1h
LT5vYmosIG1hcCk7CisJCWFkZHIgPSBpOTE1X2dlbV9vYmplY3RfcGluX21hcCh2bWEtPm9iaiwK
KwkJCQkJICAgICAgIGk5MTVfY29oZXJlbnRfbWFwX3R5cGUodm1hLT52bS0+aTkxNSkpOwogCWlm
IChJU19FUlIoYWRkcikpIHsKIAkJcmV0ID0gUFRSX0VSUihhZGRyKTsKLQkJZ290byB1bnBpbl9y
aW5nOworCQlnb3RvIGVycl9yaW5nOwogCX0KIAogCXZtYS0+b2JqLT5waW5fZ2xvYmFsKys7CiAK
KwlHRU1fQlVHX09OKHJpbmctPnZhZGRyKTsKIAlyaW5nLT52YWRkciA9IGFkZHI7CisKIAlyZXR1
cm4gMDsKIAotdW5waW5fcmluZzoKK2Vycl9yaW5nOgogCWk5MTVfdm1hX3VucGluKHZtYSk7Ci11
bnBpbl90aW1lbGluZToKK2Vycl90aW1lbGluZToKIAlpOTE1X3RpbWVsaW5lX3VucGluKHJpbmct
PnRpbWVsaW5lKTsKK2Vycl91bnBpbjoKKwlhdG9taWNfZGVjKCZyaW5nLT5waW5fY291bnQpOwog
CXJldHVybiByZXQ7CiB9CiAKQEAgLTEyMDcsMTYgKzEyMTIsMTkgQEAgdm9pZCBpbnRlbF9yaW5n
X3Jlc2V0KHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nLCB1MzIgdGFpbCkKIAogdm9pZCBpbnRlbF9y
aW5nX3VucGluKHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nKQogewotCUdFTV9CVUdfT04oIXJpbmct
PnZtYSk7Ci0JR0VNX0JVR19PTighcmluZy0+dmFkZHIpOworCWlmICghYXRvbWljX2RlY19hbmRf
dGVzdCgmcmluZy0+cGluX2NvdW50KSkKKwkJcmV0dXJuOwogCiAJLyogRGlzY2FyZCBhbnkgdW51
c2VkIGJ5dGVzIGJleW9uZCB0aGF0IHN1Ym1pdHRlZCB0byBody4gKi8KIAlpbnRlbF9yaW5nX3Jl
c2V0KHJpbmcsIHJpbmctPnRhaWwpOwogCisJR0VNX0JVR19PTighcmluZy0+dm1hKTsKIAlpZiAo
aTkxNV92bWFfaXNfbWFwX2FuZF9mZW5jZWFibGUocmluZy0+dm1hKSkKIAkJaTkxNV92bWFfdW5w
aW5faW9tYXAocmluZy0+dm1hKTsKIAllbHNlCiAJCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAo
cmluZy0+dm1hLT5vYmopOworCisJR0VNX0JVR19PTighcmluZy0+dmFkZHIpOwogCXJpbmctPnZh
ZGRyID0gTlVMTDsKIAogCXJpbmctPnZtYS0+b2JqLT5waW5fZ2xvYmFsLS07CkBAIC0yMDgxLDEw
ICsyMDg5LDExIEBAIHN0YXRpYyB2b2lkIHJpbmdfZGVzdHJveShzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmUpCiAJV0FSTl9PTihJTlRFTF9HRU4oZGV2X3ByaXYpID4gMiAmJgogCQkoRU5H
SU5FX1JFQUQoZW5naW5lLCBSSU5HX01JX01PREUpICYgTU9ERV9JRExFKSA9PSAwKTsKIAorCWlu
dGVsX2VuZ2luZV9jbGVhbnVwX2NvbW1vbihlbmdpbmUpOworCiAJaW50ZWxfcmluZ191bnBpbihl
bmdpbmUtPmJ1ZmZlcik7CiAJaW50ZWxfcmluZ19wdXQoZW5naW5lLT5idWZmZXIpOwogCi0JaW50
ZWxfZW5naW5lX2NsZWFudXBfY29tbW9uKGVuZ2luZSk7CiAJa2ZyZWUoZW5naW5lKTsKIH0KIApk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvbW9ja19lbmdpbmUuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMKaW5kZXggMDg2ODAxYjUxNDQxLi40ODZj
Njk1M2RjYjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5l
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvbW9ja19lbmdpbmUuYwpAQCAtNjYsNiAr
NjYsNyBAQCBzdGF0aWMgc3RydWN0IGludGVsX3JpbmcgKm1vY2tfcmluZyhzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmUpCiAJcmluZy0+YmFzZS5lZmZlY3RpdmVfc2l6ZSA9IHN6OwogCXJp
bmctPmJhc2UudmFkZHIgPSAodm9pZCAqKShyaW5nICsgMSk7CiAJcmluZy0+YmFzZS50aW1lbGlu
ZSA9ICZyaW5nLT50aW1lbGluZTsKKwlhdG9taWNfc2V0KCZyaW5nLT5iYXNlLnBpbl9jb3VudCwg
MSk7CiAKIAlJTklUX0xJU1RfSEVBRCgmcmluZy0+YmFzZS5yZXF1ZXN0X2xpc3QpOwogCWludGVs
X3JpbmdfdXBkYXRlX3NwYWNlKCZyaW5nLT5iYXNlKTsKLS0gCjIuMjAuMQoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlz
dApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

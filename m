Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EFC0DA1AC3
	for <lists+intel-gfx@lfdr.de>; Thu, 29 Aug 2019 15:05:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DDCE96E0EE;
	Thu, 29 Aug 2019 13:05:44 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C0BC989740;
 Thu, 29 Aug 2019 13:05:39 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18304450-1500050 
 for multiple; Thu, 29 Aug 2019 14:05:27 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: igt-dev@lists.freedesktop.org
Date: Thu, 29 Aug 2019 14:05:25 +0100
Message-Id: <20190829130525.28555-4-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20190829130525.28555-1-chris@chris-wilson.co.uk>
References: <20190829130525.28555-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t 4/4] igt/kms_frontbuffer_tracking: Skip
 over IGT_DRAW_BLT when there's no BLT
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SWYgdGhlIGJsaXR0ZXIgaXMgbm90IGF2YWlsYWJsZSwgd2UgY2Fubm90IHVzZSBpdCBhcyBhIHNv
dXJjZSBmb3IgZGlydHkKcmVjdGFuZ2xlcy4gV2Ugc2hhbGwgaGF2ZSB0byByZWx5IG9uIHRoZSBv
dGhlciBlbmdpbmVzIHRvIGNyZWF0ZSBHUFUKZGlydHkgaW5zdGVhZC4KCnYyOiBUcnkgdXNpbmcg
bG90cyBvZiBzdWJncm91cCtmaXh0dXJlcwoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxj
aHJpc0BjaHJpcy13aWxzb24uY28udWs+Ci0tLQogdGVzdHMva21zX2Zyb250YnVmZmVyX3RyYWNr
aW5nLmMgfCA1OCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKystLQogMSBmaWxlIGNoYW5n
ZWQsIDU2IGluc2VydGlvbnMoKyksIDIgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvdGVzdHMv
a21zX2Zyb250YnVmZmVyX3RyYWNraW5nLmMgYi90ZXN0cy9rbXNfZnJvbnRidWZmZXJfdHJhY2tp
bmcuYwppbmRleCBjNzg4YjU5ZWUuLmUzNDA5NDI0YyAxMDA2NDQKLS0tIGEvdGVzdHMva21zX2Zy
b250YnVmZmVyX3RyYWNraW5nLmMKKysrIGIvdGVzdHMva21zX2Zyb250YnVmZmVyX3RyYWNraW5n
LmMKQEAgLTMwMjIsNiArMzAyMiw5IEBAIHN0YXRpYyB2b2lkIGJhc2ljX3N1YnRlc3QoY29uc3Qg
c3RydWN0IHRlc3RfbW9kZSAqdCkKIAlmYjEgPSBwYXJhbXMtPnByaW1hcnkuZmI7CiAKIAlmb3Ig
KHIgPSAwLCBtZXRob2QgPSAwOyBtZXRob2QgPCBJR1RfRFJBV19NRVRIT0RfQ09VTlQ7IG1ldGhv
ZCsrLCByKyspIHsKKwkJaWYgKG1ldGhvZCA9PSBJR1RfRFJBV19CTFQgJiYgISAgZ2VtX2hhc19i
bGl0dGVyKGRybS5mZCkpCisJCQljb250aW51ZTsKKwogCQlpZiAociA9PSBwYXR0ZXJuLT5uX3Jl
Y3RzKSB7CiAJCQlwYXJhbXMtPnByaW1hcnkuZmIgPSAocGFyYW1zLT5wcmltYXJ5LmZiID09IGZi
MSkgPyAmZmIyIDogZmIxOwogCkBAIC0zMjQ4LDEwICszMjUxLDExIEBAIHN0YXRpYyBjb25zdCBj
aGFyICpmbGlwX3N0cihlbnVtIGZsaXBfdHlwZSBmbGlwKQogCQkJY29udGludWU7CQkJCQkgICBc
CiAJCWlmICghb3B0LnNob3dfaGlkZGVuICYmIHQuZmJzID09IEZCU19TSEFSRUQgJiYJCSAgIFwK
IAkJICAgICh0LnBsYW5lID09IFBMQU5FX0NVUiB8fCB0LnBsYW5lID09IFBMQU5FX1NQUikpCSAg
IFwKLQkJCWNvbnRpbnVlOworCQkJY29udGludWU7CQkJCQkgICBcCisJCWlndF9zdWJ0ZXN0X2dy
b3VwIHsKIAogCi0jZGVmaW5lIFRFU1RfTU9ERV9JVEVSX0VORCB9IH0gfSB9IH0gfQorI2RlZmlu
ZSBURVNUX01PREVfSVRFUl9FTkQgfSB9IH0gfSB9IH0gfQogCiBzdHJ1Y3Qgb3B0aW9uIGxvbmdf
b3B0aW9uc1tdID0gewogCXsgIm5vLXN0YXR1cy1jaGVjayIsICAgICAgICAgIDAsIDAsICdzJ30s
CkBAIC0zMjk3LDYgKzMzMDEsMTAgQEAgaWd0X21haW5fYXJncygiIiwgbG9uZ19vcHRpb25zLCBo
ZWxwX3N0ciwgb3B0X2hhbmRsZXIsIE5VTEwpCiAJfQogCiAJVEVTVF9NT0RFX0lURVJfQkVHSU4o
dCkKKwkJaWd0X2ZpeHR1cmUgeworCQkJaWYgKHQubWV0aG9kID09IElHVF9EUkFXX0JMVCkKKwkJ
CQlnZW1fcmVxdWlyZV9ibGl0dGVyKGRybS5mZCk7CisJCX0KIAkJaWd0X3N1YnRlc3RfZigiJXMt
JXMtJXMtJXMtJXMtZHJhdy0lcyIsCiAJCQkgICAgICBmZWF0dXJlX3N0cih0LmZlYXR1cmUpLAog
CQkJICAgICAgcGlwZXNfc3RyKHQucGlwZXMpLApAQCAtMzMxMyw2ICszMzIxLDExIEBAIGlndF9t
YWluX2FyZ3MoIiIsIGxvbmdfb3B0aW9ucywgaGVscF9zdHIsIG9wdF9oYW5kbGVyLCBOVUxMKQog
CQkgICAgKCFvcHQuc2hvd19oaWRkZW4gJiYgdC5tZXRob2QgIT0gSUdUX0RSQVdfQkxUKSkKIAkJ
CWNvbnRpbnVlOwogCisJCWlndF9maXh0dXJlIHsKKwkJCWlmICh0Lm1ldGhvZCA9PSBJR1RfRFJB
V19CTFQpCisJCQkJZ2VtX3JlcXVpcmVfYmxpdHRlcihkcm0uZmQpOworCQl9CisKIAkJZm9yICh0
LmZsaXAgPSAwOyB0LmZsaXAgPCBGTElQX0NPVU5UOyB0LmZsaXArKykKIAkJCWlndF9zdWJ0ZXN0
X2YoIiVzLSVzLSVzLSVzLSVzZmxpcC0lcyIsCiAJCQkJICAgICAgZmVhdHVyZV9zdHIodC5mZWF0
dXJlKSwKQEAgLTMzMzEsNiArMzM0NCwxMSBAQCBpZ3RfbWFpbl9hcmdzKCIiLCBsb25nX29wdGlv
bnMsIGhlbHBfc3RyLCBvcHRfaGFuZGxlciwgTlVMTCkKIAkJICAgICh0LmZlYXR1cmUgJiBGRUFU
VVJFX0ZCQykgPT0gMCkKIAkJCWNvbnRpbnVlOwogCisJCWlndF9maXh0dXJlIHsKKwkJCWlmICh0
Lm1ldGhvZCA9PSBJR1RfRFJBV19CTFQpCisJCQkJZ2VtX3JlcXVpcmVfYmxpdHRlcihkcm0uZmQp
OworCQl9CisKIAkJaWd0X3N1YnRlc3RfZigiJXMtJXMtJXMtZmxpcHRyYWNrIiwKIAkJCSAgICAg
IGZlYXR1cmVfc3RyKHQuZmVhdHVyZSksCiAJCQkgICAgICBwaXBlc19zdHIodC5waXBlcyksCkBA
IC0zMzQ0LDYgKzMzNjIsMTEgQEAgaWd0X21haW5fYXJncygiIiwgbG9uZ19vcHRpb25zLCBoZWxw
X3N0ciwgb3B0X2hhbmRsZXIsIE5VTEwpCiAJCSAgICB0LnBsYW5lID09IFBMQU5FX1BSSSkKIAkJ
CWNvbnRpbnVlOwogCisJCWlndF9maXh0dXJlIHsKKwkJCWlmICh0Lm1ldGhvZCA9PSBJR1RfRFJB
V19CTFQpCisJCQkJZ2VtX3JlcXVpcmVfYmxpdHRlcihkcm0uZmQpOworCQl9CisKIAkJaWd0X3N1
YnRlc3RfZigiJXMtJXMtJXMtJXMtJXMtbW92ZSIsCiAJCQkgICAgICBmZWF0dXJlX3N0cih0LmZl
YXR1cmUpLAogCQkJICAgICAgcGlwZXNfc3RyKHQucGlwZXMpLApAQCAtMzM2Nyw2ICszMzkwLDEx
IEBAIGlndF9tYWluX2FyZ3MoIiIsIGxvbmdfb3B0aW9ucywgaGVscF9zdHIsIG9wdF9oYW5kbGVy
LCBOVUxMKQogCQkgICAgdC5wbGFuZSAhPSBQTEFORV9TUFIpCiAJCQljb250aW51ZTsKIAorCQlp
Z3RfZml4dHVyZSB7CisJCQlpZiAodC5tZXRob2QgPT0gSUdUX0RSQVdfQkxUKQorCQkJCWdlbV9y
ZXF1aXJlX2JsaXR0ZXIoZHJtLmZkKTsKKwkJfQorCiAJCWlndF9zdWJ0ZXN0X2YoIiVzLSVzLSVz
LSVzLSVzLWZ1bGxzY3JlZW4iLAogCQkJICAgICAgZmVhdHVyZV9zdHIodC5mZWF0dXJlKSwKIAkJ
CSAgICAgIHBpcGVzX3N0cih0LnBpcGVzKSwKQEAgLTMzODMsNiArMzQxMSwxMSBAQCBpZ3RfbWFp
bl9hcmdzKCIiLCBsb25nX29wdGlvbnMsIGhlbHBfc3RyLCBvcHRfaGFuZGxlciwgTlVMTCkKIAkJ
ICAgICghb3B0LnNob3dfaGlkZGVuICYmIHQuZmJzICE9IEZCU19JTkRJVklEVUFMKSkKIAkJCWNv
bnRpbnVlOwogCisJCWlndF9maXh0dXJlIHsKKwkJCWlmICh0Lm1ldGhvZCA9PSBJR1RfRFJBV19C
TFQpCisJCQkJZ2VtX3JlcXVpcmVfYmxpdHRlcihkcm0uZmQpOworCQl9CisKIAkJaWd0X3N1YnRl
c3RfZigiJXMtJXMtJXMtJXMtbXVsdGlkcmF3IiwKIAkJCSAgICAgIGZlYXR1cmVfc3RyKHQuZmVh
dHVyZSksCiAJCQkgICAgICBwaXBlc19zdHIodC5waXBlcyksCkBAIC0zMzk5LDYgKzM0MzIsMTEg
QEAgaWd0X21haW5fYXJncygiIiwgbG9uZ19vcHRpb25zLCBoZWxwX3N0ciwgb3B0X2hhbmRsZXIs
IE5VTEwpCiAJCSAgICB0Lm1ldGhvZCAhPSBJR1RfRFJBV19NTUFQX0dUVCkKIAkJCWNvbnRpbnVl
OwogCisJCWlndF9maXh0dXJlIHsKKwkJCWlmICh0Lm1ldGhvZCA9PSBJR1RfRFJBV19CTFQpCisJ
CQkJZ2VtX3JlcXVpcmVfYmxpdHRlcihkcm0uZmQpOworCQl9CisKIAkJaWd0X3N1YnRlc3RfZigi
JXMtZmFyZnJvbWZlbmNlIiwgZmVhdHVyZV9zdHIodC5mZWF0dXJlKSkKIAkJCWZhcmZyb21mZW5j
ZV9zdWJ0ZXN0KCZ0KTsKIAlURVNUX01PREVfSVRFUl9FTkQKQEAgLTM0MTAsNiArMzQ0OCwxMSBA
QCBpZ3RfbWFpbl9hcmdzKCIiLCBsb25nX29wdGlvbnMsIGhlbHBfc3RyLCBvcHRfaGFuZGxlciwg
TlVMTCkKIAkJICAgIHQuZmJzICE9IEZCU19JTkRJVklEVUFMKQogCQkJY29udGludWU7CiAKKwkJ
aWd0X2ZpeHR1cmUgeworCQkJaWYgKHQubWV0aG9kID09IElHVF9EUkFXX0JMVCkKKwkJCQlnZW1f
cmVxdWlyZV9ibGl0dGVyKGRybS5mZCk7CisJCX0KKwogCQlmb3IgKHQuZm9ybWF0ID0gMDsgdC5m
b3JtYXQgPCBGT1JNQVRfQ09VTlQ7IHQuZm9ybWF0KyspIHsKIAkJCS8qIFNraXAgd2hhdCB3ZSBh
bHJlYWR5IHRlc3RlZC4gKi8KIAkJCWlmICh0LmZvcm1hdCA9PSBGT1JNQVRfREVGQVVMVCkKQEAg
LTM0MjksNiArMzQ3MiwxMiBAQCBpZ3RfbWFpbl9hcmdzKCIiLCBsb25nX29wdGlvbnMsIGhlbHBf
c3RyLCBvcHRfaGFuZGxlciwgTlVMTCkKIAkJICAgIHQucGxhbmUgIT0gUExBTkVfUFJJIHx8CiAJ
CSAgICB0Lm1ldGhvZCAhPSBJR1RfRFJBV19CTFQpCiAJCQljb250aW51ZTsKKworCQlpZ3RfZml4
dHVyZSB7CisJCQlpZiAodC5tZXRob2QgPT0gSUdUX0RSQVdfQkxUKQorCQkJCWdlbV9yZXF1aXJl
X2JsaXR0ZXIoZHJtLmZkKTsKKwkJfQorCiAJCWlndF9zdWJ0ZXN0X2YoIiVzLSVzLXNjYWxlZHBy
aW1hcnkiLAogCQkJICAgICAgZmVhdHVyZV9zdHIodC5mZWF0dXJlKSwKIAkJCSAgICAgIGZic19z
dHIodC5mYnMpKQpAQCAtMzQ0Myw2ICszNDkyLDExIEBAIGlndF9tYWluX2FyZ3MoIiIsIGxvbmdf
b3B0aW9ucywgaGVscF9zdHIsIG9wdF9oYW5kbGVyLCBOVUxMKQogCQkgICAgdC5tZXRob2QgIT0g
SUdUX0RSQVdfQkxUKQogCQkJY29udGludWU7CiAKKwkJaWd0X2ZpeHR1cmUgeworCQkJaWYgKHQu
bWV0aG9kID09IElHVF9EUkFXX0JMVCkKKwkJCQlnZW1fcmVxdWlyZV9ibGl0dGVyKGRybS5mZCk7
CisJCX0KKwogCQlpZ3Rfc3VidGVzdF9mKCIlcy1tb2Rlc2V0ZnJvbWJ1c3kiLCBmZWF0dXJlX3N0
cih0LmZlYXR1cmUpKQogCQkJbW9kZXNldGZyb21idXN5X3N1YnRlc3QoJnQpOwogCi0tIAoyLjIz
LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

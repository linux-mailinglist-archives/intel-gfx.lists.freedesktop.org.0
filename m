Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EB5F6580F6
	for <lists+intel-gfx@lfdr.de>; Thu, 27 Jun 2019 12:56:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 227BC6E0CF;
	Thu, 27 Jun 2019 10:56:00 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EC1406E0C5;
 Thu, 27 Jun 2019 10:55:58 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 27 Jun 2019 03:55:58 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,423,1557212400"; d="scan'208";a="156201502"
Received: from czwolak-mobl2.ger.corp.intel.com (HELO [10.252.4.8])
 ([10.252.4.8])
 by orsmga008.jf.intel.com with ESMTP; 27 Jun 2019 03:55:56 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, igt-dev@lists.freedesktop.org
References: <20190627102019.9019-1-tvrtko.ursulin@linux.intel.com>
 <156163172754.20851.9496452054329054119@skylake-alporthouse-com>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <64046d00-7562-1731-1d2f-8f89183696d8@linux.intel.com>
Date: Thu, 27 Jun 2019 11:55:56 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.1
MIME-Version: 1.0
In-Reply-To: <156163172754.20851.9496452054329054119@skylake-alporthouse-com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH i-g-t] tests/i915/gem_ctx_switch: Update
 with engine discovery
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDI3LzA2LzIwMTkgMTE6MzUsIENocmlzIFdpbHNvbiB3cm90ZToKPiBRdW90aW5nIFR2cnRr
byBVcnN1bGluICgyMDE5LTA2LTI3IDExOjIwOjE5KQo+PiBkaWZmIC0tZ2l0IGEvdGVzdHMvaTkx
NS9nZW1fY3R4X3N3aXRjaC5jIGIvdGVzdHMvaTkxNS9nZW1fY3R4X3N3aXRjaC5jCj4+IGluZGV4
IDY0NzkxMWQ0YzQyZS4uZGUzOTc0ODM0NGI4IDEwMDY0NAo+PiAtLS0gYS90ZXN0cy9pOTE1L2dl
bV9jdHhfc3dpdGNoLmMKPj4gKysrIGIvdGVzdHMvaTkxNS9nZW1fY3R4X3N3aXRjaC5jCj4+IEBA
IC01NSw3ICs1NSw3IEBAIHN0YXRpYyBkb3VibGUgZWxhcHNlZChjb25zdCBzdHJ1Y3QgdGltZXNw
ZWMgKnN0YXJ0LCBjb25zdCBzdHJ1Y3QgdGltZXNwZWMgKmVuZCkKPj4gICAKPj4gICBzdGF0aWMg
aW50IG1lYXN1cmVfcWxlbihpbnQgZmQsCj4+ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyICpleGVjYnVmLAo+PiAtICAgICAgICAgICAgICAg
ICAgICAgICB1bnNpZ25lZCBpbnQgKmVuZ2luZSwgdW5zaWduZWQgaW50IG5lbmdpbmUsCj4+ICsg
ICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfZGF0YSAqZW5n
aW5lcywKPj4gICAgICAgICAgICAgICAgICAgICAgICAgIGludCB0aW1lb3V0KQo+PiAgIHsKPj4g
ICAgICAgICAgY29uc3Qgc3RydWN0IGRybV9pOTE1X2dlbV9leGVjX29iamVjdDIgKiBjb25zdCBv
YmogPQo+PiBAQCAtNjMsMTUgKzYzLDE3IEBAIHN0YXRpYyBpbnQgbWVhc3VyZV9xbGVuKGludCBm
ZCwKPj4gICAgICAgICAgdWludDMyX3QgY3R4WzY0XTsKPj4gICAgICAgICAgaW50IG1pbiA9IElO
VF9NQVgsIG1heCA9IDA7Cj4+ICAgCj4+IC0gICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBBUlJB
WV9TSVpFKGN0eCk7IGkrKykKPj4gKyAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEFSUkFZX1NJ
WkUoY3R4KTsgaSsrKSB7Cj4+ICAgICAgICAgICAgICAgICAgY3R4W2ldID0gZ2VtX2NvbnRleHRf
Y3JlYXRlKGZkKTsKPj4gKyAgICAgICAgICAgICAgIGdlbV9jb250ZXh0X3NldF9hbGxfZW5naW5l
cyhmZCwgY3R4W2ldKTsKPj4gKyAgICAgICB9Cj4+ICAgCj4+IC0gICAgICAgZm9yICh1bnNpZ25l
ZCBpbnQgbiA9IDA7IG4gPCBuZW5naW5lOyBuKyspIHsKPj4gKyAgICAgICBmb3IgKHVuc2lnbmVk
IGludCBuID0gMDsgbiA8IGVuZ2luZXMtPm5lbmdpbmVzOyBuKyspIHsKPj4gICAgICAgICAgICAg
ICAgICB1aW50NjRfdCBzYXZlZCA9IGV4ZWNidWYtPmZsYWdzOwo+PiAgICAgICAgICAgICAgICAg
IHN0cnVjdCB0aW1lc3BlYyB0diA9IHt9Owo+PiAgICAgICAgICAgICAgICAgIGludCBxOwo+PiAg
IAo+PiAtICAgICAgICAgICAgICAgZXhlY2J1Zi0+ZmxhZ3MgfD0gZW5naW5lW25dOwo+PiArICAg
ICAgICAgICAgICAgZXhlY2J1Zi0+ZmxhZ3MgfD0gZW5naW5lcy0+ZW5naW5lc1tuXS5mbGFnczsK
Pj4gICAKPj4gICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEFSUkFZX1NJWkUo
Y3R4KTsgaSsrKSB7Cj4+ICAgICAgICAgICAgICAgICAgICAgICAgICBleGVjYnVmLT5yc3ZkMSA9
IGN0eFtpXTsKPj4gQEAgLTkwLDcgKzkyLDggQEAgc3RhdGljIGludCBtZWFzdXJlX3FsZW4oaW50
IGZkLAo+PiAgICAgICAgICAgICAgICAgICAqIEJlIGNvbnNlcnZhdGl2ZSBhbmQgYWltIG5vdCB0
byBvdmVyc2hvb3QgdGltZW91dCwgc28gc2NhbGUKPj4gICAgICAgICAgICAgICAgICAgKiBkb3du
IGJ5IDggZm9yIGhvcGVmdWxseSBhIG1heCBvZiAxMi41JSBlcnJvci4KPj4gICAgICAgICAgICAg
ICAgICAgKi8KPj4gLSAgICAgICAgICAgICAgIHEgPSBBUlJBWV9TSVpFKGN0eCkgKiB0aW1lb3V0
ICogMWU5IC8gaWd0X25zZWNfZWxhcHNlZCgmdHYpIC8gOCArIDE7Cj4+ICsgICAgICAgICAgICAg
ICBxID0gQVJSQVlfU0laRShjdHgpICogdGltZW91dCAqIDFlOSAvIGlndF9uc2VjX2VsYXBzZWQo
JnR2KSAvCj4+ICsgICAgICAgICAgICAgICAgICAgOCArIDE7Cj4+ICAgICAgICAgICAgICAgICAg
aWYgKHEgPCBtaW4pCj4+ICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4gPSBxOwo+PiAgICAg
ICAgICAgICAgICAgIGlmIChxID4gbWF4KQo+PiBAQCAtMTA3LDcgKzExMCw3IEBAIHN0YXRpYyBp
bnQgbWVhc3VyZV9xbGVuKGludCBmZCwKPj4gICB9Cj4+ICAgCj4+ICAgc3RhdGljIHZvaWQgc2lu
Z2xlKGludCBmZCwgdWludDMyX3QgaGFuZGxlLAo+PiAtICAgICAgICAgICAgICAgICAgY29uc3Qg
c3RydWN0IGludGVsX2V4ZWN1dGlvbl9lbmdpbmUgKmUsCj4+ICsgICAgICAgICAgICAgICAgICBj
b25zdCBzdHJ1Y3QgaW50ZWxfZXhlY3V0aW9uX2VuZ2luZTIgKmUyLAo+PiAgICAgICAgICAgICAg
ICAgICAgIHVuc2lnbmVkIGZsYWdzLAo+PiAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludCBu
Y3B1cywKPj4gICAgICAgICAgICAgICAgICAgICBpbnQgdGltZW91dCkKPj4gQEAgLTEyNSwxMyAr
MTI4LDE0IEBAIHN0YXRpYyB2b2lkIHNpbmdsZShpbnQgZmQsIHVpbnQzMl90IGhhbmRsZSwKPj4g
ICAgICAgICAgc2hhcmVkID0gbW1hcChOVUxMLCA0MDk2LCBQUk9UX1dSSVRFLCBNQVBfU0hBUkVE
IHwgTUFQX0FOT04sIC0xLCAwKTsKPj4gICAgICAgICAgaWd0X2Fzc2VydChzaGFyZWQgIT0gTUFQ
X0ZBSUxFRCk7Cj4+ICAgCj4+IC0gICAgICAgZ2VtX3JlcXVpcmVfcmluZyhmZCwgZS0+ZXhlY19p
ZCB8IGUtPmZsYWdzKTsKPj4gLQo+PiAgICAgICAgICBmb3IgKG4gPSAwOyBuIDwgNjQ7IG4rKykg
ewo+PiAgICAgICAgICAgICAgICAgIGlmIChmbGFncyAmIFFVRVVFKQo+PiAgICAgICAgICAgICAg
ICAgICAgICAgICAgY29udGV4dHNbbl0gPSBnZW1fcXVldWVfY3JlYXRlKGZkKTsKPj4gICAgICAg
ICAgICAgICAgICBlbHNlCj4+ICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0c1tuXSA9
IGdlbV9jb250ZXh0X2NyZWF0ZShmZCk7Cj4+ICsKPj4gKyAgICAgICAgICAgICAgIGlmIChnZW1f
Y29udGV4dF9oYXNfZW5naW5lX21hcChmZCwgMCkpCj4+ICsgICAgICAgICAgICAgICAgICAgICAg
IGdlbV9jb250ZXh0X3NldF9hbGxfZW5naW5lcyhmZCwgY29udGV4dHNbbl0pOwo+IAo+IFRoYXQg
d2FzIGEgbW9tZW50IG9mIGRvdWJ0IG9uIGhvdyB3ZWxsIHNldHRpbmcgZW5naW5lcyBvbiBhICJx
dWV1ZSIKPiB3b3JrZWQgOikKCldoeSBpdCB3b3VsZG4ndCB3b3JrPwoKPiAKPj4gICAgICAgICAg
fQo+PiAgIAo+PiAgICAgICAgICBtZW1zZXQoJm9iaiwgMCwgc2l6ZW9mKG9iaikpOwo+PiBAQCAt
MTUyLDEyICsxNTYsMTIgQEAgc3RhdGljIHZvaWQgc2luZ2xlKGludCBmZCwgdWludDMyX3QgaGFu
ZGxlLAo+PiAgICAgICAgICBleGVjYnVmLmJ1ZmZlcnNfcHRyID0gdG9fdXNlcl9wb2ludGVyKCZv
YmopOwo+PiAgICAgICAgICBleGVjYnVmLmJ1ZmZlcl9jb3VudCA9IDE7Cj4+ICAgICAgICAgIGV4
ZWNidWYucnN2ZDEgPSBjb250ZXh0c1swXTsKPj4gLSAgICAgICBleGVjYnVmLmZsYWdzID0gZS0+
ZXhlY19pZCB8IGUtPmZsYWdzOwo+PiArICAgICAgIGV4ZWNidWYuZmxhZ3MgPSBlMi0+ZmxhZ3M7
Cj4+ICAgICAgICAgIGV4ZWNidWYuZmxhZ3MgfD0gTE9DQUxfSTkxNV9FWEVDX0hBTkRMRV9MVVQ7
Cj4+ICAgICAgICAgIGV4ZWNidWYuZmxhZ3MgfD0gTE9DQUxfSTkxNV9FWEVDX05PX1JFTE9DOwo+
PiAgICAgICAgICBpZ3RfcmVxdWlyZShfX2dlbV9leGVjYnVmKGZkLCAmZXhlY2J1ZikgPT0gMCk7
Cj4+ICAgICAgICAgIGlmIChfX2dlbV9leGVjYnVmKGZkLCAmZXhlY2J1ZikpIHsKPj4gLSAgICAg
ICAgICAgICAgIGV4ZWNidWYuZmxhZ3MgPSBlLT5leGVjX2lkIHwgZS0+ZmxhZ3M7Cj4+ICsgICAg
ICAgICAgICAgICBleGVjYnVmLmZsYWdzID0gZTItPmZsYWdzOwo+PiAgICAgICAgICAgICAgICAg
IHJlbG9jLnRhcmdldF9oYW5kbGUgPSBvYmouaGFuZGxlOwo+PiAgICAgICAgICAgICAgICAgIGdl
bV9leGVjYnVmKGZkLCAmZXhlY2J1Zik7Cj4+ICAgICAgICAgIH0KPj4gQEAgLTE5MCw3ICsxOTQs
OCBAQCBzdGF0aWMgdm9pZCBzaW5nbGUoaW50IGZkLCB1aW50MzJfdCBoYW5kbGUsCj4+ICAgICAg
ICAgICAgICAgICAgY2xvY2tfZ2V0dGltZShDTE9DS19NT05PVE9OSUMsICZub3cpOwo+PiAgIAo+
PiAgICAgICAgICAgICAgICAgIGlndF9pbmZvKCJbJWRdICVzOiAlJ3UgY3ljbGVzOiAlLjNmdXMl
c1xuIiwKPj4gLSAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLCBlLT5uYW1lLCBjb3VudCwg
ZWxhcHNlZCgmc3RhcnQsICZub3cpKjFlNiAvIGNvdW50LAo+PiArICAgICAgICAgICAgICAgICAg
ICAgICAgY2hpbGQsIGUyLT5uYW1lLCBjb3VudCwKPj4gKyAgICAgICAgICAgICAgICAgICAgICAg
IGVsYXBzZWQoJnN0YXJ0LCAmbm93KSAqIDFlNiAvIGNvdW50LAo+PiAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGZsYWdzICYgSU5URVJSVVBUSUJMRSA/ICIgKGludGVycnVwdGlibGUpIiA6ICIi
KTsKPj4gICAKPj4gICAgICAgICAgICAgICAgICBzaGFyZWRbY2hpbGRdLmVsYXBzZWQgPSBlbGFw
c2VkKCZzdGFydCwgJm5vdyk7Cj4+IEBAIC0yMDksNyArMjE0LDcgQEAgc3RhdGljIHZvaWQgc2lu
Z2xlKGludCBmZCwgdWludDMyX3QgaGFuZGxlLAo+PiAgICAgICAgICAgICAgICAgIH0KPj4gICAK
Pj4gICAgICAgICAgICAgICAgICBpZ3RfaW5mbygiVG90YWwgJXM6ICUnbHUgY3ljbGVzOiAlLjNm
dXMlc1xuIiwKPj4gLSAgICAgICAgICAgICAgICAgICAgICAgIGUtPm5hbWUsIHRvdGFsLCBtYXgq
MWU2IC8gdG90YWwsCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICBlMi0+bmFtZSwgdG90YWws
IG1heCoxZTYgLyB0b3RhbCwKPj4gICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFncyAmIElO
VEVSUlVQVElCTEUgPyAiIChpbnRlcnJ1cHRpYmxlKSIgOiAiIik7Cj4+ICAgICAgICAgIH0KPj4g
ICAKPj4gQEAgLTIyMywyNSArMjI4LDIwIEBAIHN0YXRpYyB2b2lkIGFsbChpbnQgZmQsIHVpbnQz
Ml90IGhhbmRsZSwgdW5zaWduZWQgZmxhZ3MsIGludCB0aW1lb3V0KQo+PiAgIHsKPj4gICAgICAg
ICAgc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiBleGVjYnVmOwo+PiAgICAgICAgICBz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNfb2JqZWN0MiBvYmpbMl07Cj4+IC0gICAgICAgdW5zaWdu
ZWQgaW50IGVuZ2luZVsxNl0sIGU7Cj4+IC0gICAgICAgY29uc3QgY2hhciAqbmFtZVsxNl07Cj4+
ICsgICAgICAgc3RydWN0IGludGVsX2VuZ2luZV9kYXRhIGVuZ2luZXMgPSB7IH07Cj4+ICAgICAg
ICAgIHVpbnQzMl90IGNvbnRleHRzWzY1XTsKPj4gLSAgICAgICB1bnNpZ25lZCBpbnQgbmVuZ2lu
ZTsKPj4gICAgICAgICAgaW50IG4sIHFsZW47Cj4+ICAgCj4+IC0gICAgICAgbmVuZ2luZSA9IDA7
Cj4+IC0gICAgICAgZm9yX2VhY2hfcGh5c2ljYWxfZW5naW5lKGZkLCBlKSB7Cj4+IC0gICAgICAg
ICAgICAgICBlbmdpbmVbbmVuZ2luZV0gPSBlOwo+PiAtICAgICAgICAgICAgICAgbmFtZVtuZW5n
aW5lXSA9IGVfXy0+bmFtZTsKPj4gLSAgICAgICAgICAgICAgIG5lbmdpbmUrKzsKPj4gLSAgICAg
ICB9Cj4+IC0gICAgICAgaWd0X3JlcXVpcmUobmVuZ2luZSk7Cj4+ICsgICAgICAgZW5naW5lcyA9
IGludGVsX2luaXRfZW5naW5lX2xpc3QoZmQsIDApOwo+PiArICAgICAgIGlndF9yZXF1aXJlKGVu
Z2luZXMubmVuZ2luZXMpOwo+PiAgIAo+PiAgICAgICAgICBmb3IgKG4gPSAwOyBuIDwgQVJSQVlf
U0laRShjb250ZXh0cyk7IG4rKykgewo+PiAgICAgICAgICAgICAgICAgIGlmIChmbGFncyAmIFFV
RVVFKQo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dHNbbl0gPSBnZW1fcXVldWVf
Y3JlYXRlKGZkKTsKPj4gICAgICAgICAgICAgICAgICBlbHNlCj4+ICAgICAgICAgICAgICAgICAg
ICAgICAgICBjb250ZXh0c1tuXSA9IGdlbV9jb250ZXh0X2NyZWF0ZShmZCk7Cj4+ICsKPj4gKyAg
ICAgICAgICAgICAgIGdlbV9jb250ZXh0X3NldF9hbGxfZW5naW5lcyhmZCwgY29udGV4dHNbbl0p
Owo+PiAgICAgICAgICB9Cj4+ICAgCj4+ICAgICAgICAgIG1lbXNldChvYmosIDAsIHNpemVvZihv
YmopKTsKPj4gQEAgLTI1Niw3ICsyNTYsNyBAQCBzdGF0aWMgdm9pZCBhbGwoaW50IGZkLCB1aW50
MzJfdCBoYW5kbGUsIHVuc2lnbmVkIGZsYWdzLCBpbnQgdGltZW91dCkKPj4gICAgICAgICAgaWd0
X3JlcXVpcmUoX19nZW1fZXhlY2J1ZihmZCwgJmV4ZWNidWYpID09IDApOwo+PiAgICAgICAgICBn
ZW1fc3luYyhmZCwgaGFuZGxlKTsKPj4gICAKPj4gLSAgICAgICBxbGVuID0gbWVhc3VyZV9xbGVu
KGZkLCAmZXhlY2J1ZiwgZW5naW5lLCBuZW5naW5lLCB0aW1lb3V0KTsKPj4gKyAgICAgICBxbGVu
ID0gbWVhc3VyZV9xbGVuKGZkLCAmZXhlY2J1ZiwgJmVuZ2luZXMsIHRpbWVvdXQpOwo+PiAgICAg
ICAgICBpZ3RfaW5mbygiVXNpbmcgdGltaW5nIGRlcHRoIG9mICVkIGJhdGNoZXNcbiIsIHFsZW4p
Owo+PiAgIAo+PiAgICAgICAgICBleGVjYnVmLmJ1ZmZlcnNfcHRyID0gdG9fdXNlcl9wb2ludGVy
KG9iaik7Cj4+IEBAIC0yNjQsMTMgKzI2NCwxNSBAQCBzdGF0aWMgdm9pZCBhbGwoaW50IGZkLCB1
aW50MzJfdCBoYW5kbGUsIHVuc2lnbmVkIGZsYWdzLCBpbnQgdGltZW91dCkKPj4gICAKPj4gICAg
ICAgICAgZm9yIChpbnQgcG90ID0gMjsgcG90IDw9IDY0OyBwb3QgKj0gMikgewo+PiAgICAgICAg
ICAgICAgICAgIGZvciAoaW50IG5jdHggPSBwb3QgLSAxOyBuY3R4IDw9IHBvdCArIDE7IG5jdHgr
Kykgewo+PiAtICAgICAgICAgICAgICAgICAgICAgICBpZ3RfZm9yayhjaGlsZCwgbmVuZ2luZSkg
ewo+PiArICAgICAgICAgICAgICAgICAgICAgICBpZ3RfZm9yayhjaGlsZCwgZW5naW5lcy5uZW5n
aW5lcykgewo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdGltZXNw
ZWMgc3RhcnQsIG5vdzsKPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWdu
ZWQgaW50IGNvdW50ID0gMDsKPj4gICAKPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgb2JqWzBdLmhhbmRsZSA9IGdlbV9jcmVhdGUoZmQsIDQwOTYpOwo+PiAtICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGV4ZWNidWYuZmxhZ3MgfD0gZW5naW5lW2NoaWxkXTsKPj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBsb29wID0gMDsgbG9vcCA8IEFS
UkFZX1NJWkUoY29udGV4dHMpOyBsb29wKyspIHsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBleGVjYnVmLmZsYWdzIHw9IGVuZ2luZXMuZW5naW5lc1tjaGlsZF0uZmxhZ3M7Cj4+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgbG9vcCA9IDA7Cj4+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wIDwgQVJSQVlfU0laRShjb250
ZXh0cyk7Cj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wKyspIHsK
Pj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGVjYnVmLnJzdmQx
ID0gY29udGV4dHNbbG9vcF07Cj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZ2VtX2V4ZWNidWYoZmQsICZleGVjYnVmKTsKPj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgfQo+PiBAQCAtMjc5LDcgKzI4MSw4IEBAIHN0YXRpYyB2b2lkIGFsbChpbnQg
ZmQsIHVpbnQzMl90IGhhbmRsZSwgdW5zaWduZWQgZmxhZ3MsIGludCB0aW1lb3V0KQo+PiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9ja19nZXR0aW1lKENMT0NLX01PTk9UT05J
QywgJnN0YXJ0KTsKPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG8gewo+PiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGxvb3AgPSAw
OyBsb29wIDwgcWxlbjsgbG9vcCsrKSB7Cj4+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGV4ZWNidWYucnN2ZDEgPSBjb250ZXh0c1tsb29wICUgbmN0eF07
Cj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWNi
dWYucnN2ZDEgPQo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGNvbnRleHRzW2xvb3AgJSBuY3R4XTsKPj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbV9leGVjYnVmKGZkLCAmZXhlY2J1Zik7
Cj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQo+PiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IHFsZW47Cj4+IEBAIC0y
OTEsOCArMjk0LDExIEBAIHN0YXRpYyB2b2lkIGFsbChpbnQgZmQsIHVpbnQzMl90IGhhbmRsZSwg
dW5zaWduZWQgZmxhZ3MsIGludCB0aW1lb3V0KQo+PiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBnZW1fY2xvc2UoZmQsIG9ialswXS5oYW5kbGUpOwo+PiAgIAo+PiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBpZ3RfaW5mbygiWyVkOiVkXSAlczogJSd1IGN5Y2xlczog
JS4zZnVzJXMgKGVsYXBzZWQ6ICUuM2ZzKVxuIiwKPj4gLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBuY3R4LCBjaGlsZCwgbmFtZVtjaGlsZF0sIGNvdW50LCBlbGFwc2Vk
KCZzdGFydCwgJm5vdykqMWU2IC8gY291bnQsCj4+IC0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZmxhZ3MgJiBJTlRFUlJVUFRJQkxFID8gIiAoaW50ZXJydXB0aWJsZSki
IDogIiIsCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmN0eCwg
Y2hpbGQsCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5naW5l
cy5lbmdpbmVzW2NoaWxkXS5uYW1lLCBjb3VudCwKPj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBlbGFwc2VkKCZzdGFydCwgJm5vdykgKiAxZTYgLyBjb3VudCwKPj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFncyAmIElOVEVSUlVQ
VElCTEUgPwo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgKGlu
dGVycnVwdGlibGUpIiA6ICIiLAo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBlbGFwc2VkKCZzdGFydCwgJm5vdykpOwo+PiAgICAgICAgICAgICAgICAgICAgICAg
ICAgfQo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgaWd0X3dhaXRjaGlsZHJlbigpOwo+PiBA
QCAtMzA2LDYgKzMxMiw3IEBAIHN0YXRpYyB2b2lkIGFsbChpbnQgZmQsIHVpbnQzMl90IGhhbmRs
ZSwgdW5zaWduZWQgZmxhZ3MsIGludCB0aW1lb3V0KQo+PiAgIGlndF9tYWluCj4+ICAgewo+PiAg
ICAgICAgICBjb25zdCBpbnQgbmNwdXMgPSBzeXNjb25mKF9TQ19OUFJPQ0VTU09SU19PTkxOKTsK
Pj4gKyAgICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfZXhlY3V0aW9uX2VuZ2luZTIgKmUyOwo+PiAg
ICAgICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfZXhlY3V0aW9uX2VuZ2luZSAqZTsKPj4gICAgICAg
ICAgc3RhdGljIGNvbnN0IHN0cnVjdCB7Cj4+ICAgICAgICAgICAgICAgICAgY29uc3QgY2hhciAq
bmFtZTsKPj4gQEAgLTMzOCw3ICszNDUsNDkgQEAgaWd0X21haW4KPj4gICAgICAgICAgICAgICAg
ICBpZ3RfZm9ya19oYW5nX2RldGVjdG9yKGZkKTsKPj4gICAgICAgICAgfQo+PiAgIAo+PiArICAg
ICAgIC8qIExlZ2FjeSB0ZXN0aW5nIG11c3QgYmUgZmlyc3QuICovCj4+ICAgICAgICAgIGZvciAo
ZSA9IGludGVsX2V4ZWN1dGlvbl9lbmdpbmVzOyBlLT5uYW1lOyBlKyspIHsKPj4gKyAgICAgICAg
ICAgICAgIGUyID0gZ2VtX2ViX2ZsYWdzX3RvX2VuZ2luZShlLT5leGVjX2lkIHwgZS0+ZmxhZ3Mp
Owo+PiArICAgICAgICAgICAgICAgaWYgKCFlMikKPj4gKyAgICAgICAgICAgICAgICAgICAgICAg
Y29udGludWU7IC8qIEk5MTVfRVhFQ19CU0Qgd2l0aCBubyByaW5nIHNlbGVjdG9ycyAqLwo+PiAr
Cj4+ICsgICAgICAgICAgICAgICBmb3IgKHR5cGVvZigqcGhhc2VzKSAqcCA9IHBoYXNlczsgcC0+
bmFtZTsgcCsrKSB7Cj4+ICsgICAgICAgICAgICAgICAgICAgICAgIGlndF9zdWJ0ZXN0X2dyb3Vw
IHsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ3RfZml4dHVyZSB7Cj4+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW1fcmVxdWlyZV9yaW5nKGZk
LCBlMi0+ZmxhZ3MpOwo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
aWYgKHAtPnJlcXVpcmUpCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGlndF9yZXF1aXJlKHAtPnJlcXVpcmUoZmQpKTsKPj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB9Cj4+ICsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpZ3Rfc3VidGVzdF9mKCJsZWdhY3ktJXMlcyVzIiwKPj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGUtPm5hbWUsCj4+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAqcC0+bmFtZSA/ICItIiA6ICIiLAo+PiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC0+bmFtZSkKPj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZShmZCwgbGlnaHQsIGUyLCBw
LT5mbGFncywgMSwgNSk7Cj4+ICsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
Z3Rfc2tpcF9vbl9zaW11bGF0aW9uKCk7Cj4+ICsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpZ3Rfc3VidGVzdF9mKCJsZWdhY3ktJXMlcy1oZWF2eSVzIiwKPj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUtPmV4ZWNfaWQgPT0gMCA/ICJi
YXNpYy0iIDogIiIsCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBlLT5uYW1lLAo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgcC0+bmFtZSkKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNpbmdsZShmZCwgaGVhdnksIGUyLCBwLT5mbGFncywgMSwgNSk7Cj4+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgaWd0X3N1YnRlc3RfZigibGVnYWN5LWZvcmtlZC0lcyVzIiwKPj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUtPm5hbWUsCj4+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLT5uYW1lKQo+
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlKGZkLCBsaWdo
dCwgZTIsIHAtPmZsYWdzLCBuY3B1cywKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAxNTApOwo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGlndF9zdWJ0ZXN0X2YoImxlZ2FjeS1mb3JrZWQtJXMtaGVhdnklcyIsCj4+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLT5uYW1lLAo+PiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC0+bmFtZSkKPj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZShmZCwgaGVhdnksIGUyLCBwLT5m
bGFncywgbmNwdXMsCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgMTUwKTsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgfQo+PiArICAgICAgICAgICAg
ICAgfQo+PiArICAgICAgIH0KPj4gKwo+PiArICAgICAgIC8qIE11c3QgY29tZSBhZnRlciBsZWdh
Y3kgc3VidGVzdHMuICovCj4+ICsgICAgICAgX19mb3JfZWFjaF9waHlzaWNhbF9lbmdpbmUoZmQs
IGUyKSB7Cj4+ICAgICAgICAgICAgICAgICAgZm9yICh0eXBlb2YoKnBoYXNlcykgKnAgPSBwaGFz
ZXM7IHAtPm5hbWU7IHArKykgewo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgaWd0X3N1YnRl
c3RfZ3JvdXAgewo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ3RfZml4dHVy
ZSB7Cj4+IEBAIC0zNDYsMzMgKzM5NSw0MCBAQCBpZ3RfbWFpbgo+PiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWd0X3JlcXVpcmUocC0+cmVxdWlyZShm
ZCkpOwo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Cj4+ICAgCj4+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaWd0X3N1YnRlc3RfZigiJXMlcyVzIiwgZS0+ZXhl
Y19pZCA9PSAwID8gImJhc2ljLSIgOiAiIiwgZS0+bmFtZSwgcC0+bmFtZSkKPj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZShmZCwgbGlnaHQsIGUsIHAtPmZs
YWdzLCAxLCA1KTsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ3Rfc3VidGVz
dF9mKCIlcyVzJXMiLAo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZTItPm5hbWUsCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAqcC0+bmFtZSA/ICItIiA6ICIiLAo+PiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcC0+bmFtZSkKPj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNpbmdsZShmZCwgbGlnaHQsIGUyLCBwLT5mbGFncywgMSwgNSk7Cj4+
ICAgCj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlndF9za2lwX29uX3NpbXVs
YXRpb24oKTsKPj4gICAKPj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ3Rfc3Vi
dGVzdF9mKCIlcyVzLWhlYXZ5JXMiLCBlLT5leGVjX2lkID09IDAgPyAiYmFzaWMtIiA6ICIiLCBl
LT5uYW1lLCBwLT5uYW1lKQo+PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2luZ2xlKGZkLCBoZWF2eSwgZSwgcC0+ZmxhZ3MsIDEsIDUpOwo+PiAtICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGlndF9zdWJ0ZXN0X2YoImZvcmtlZC0lcyVzIiwgZS0+bmFtZSwg
cC0+bmFtZSkKPj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbmds
ZShmZCwgbGlnaHQsIGUsIHAtPmZsYWdzLCBuY3B1cywgMTUwKTsKPj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpZ3Rfc3VidGVzdF9mKCJmb3JrZWQtJXMtaGVhdnklcyIsIGUtPm5h
bWUsIHAtPm5hbWUpCj4+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
aW5nbGUoZmQsIGhlYXZ5LCBlLCBwLT5mbGFncywgbmNwdXMsIDE1MCk7Cj4+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgaWd0X3N1YnRlc3RfZigiJXMtaGVhdnklcyIsIGUyLT5uYW1l
LCBwLT5uYW1lKQo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lu
Z2xlKGZkLCBoZWF2eSwgZTIsIHAtPmZsYWdzLCAxLCA1KTsKPj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBpZ3Rfc3VidGVzdF9mKCIlcy1mb3JrZWQlcyIsIGUyLT5uYW1lLCBwLT5u
YW1lKQo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlKGZk
LCBsaWdodCwgZTIsIHAtPmZsYWdzLCBuY3B1cywKPj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAxNTApOwo+PiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGlndF9zdWJ0ZXN0X2YoIiVzLWZvcmtlZC1oZWF2eSVzIiwKPj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUyLT5uYW1lLAo+PiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC0+bmFtZSkKPj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZShmZCwgaGVhdnksIGUyLCBwLT5m
bGFncywgbmNwdXMsCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgMTUwKTsKPj4gICAgICAgICAgICAgICAgICAgICAgICAgIH0KPj4gICAgICAgICAgICAg
ICAgICB9Cj4+ICAgICAgICAgIH0KPiAKPiBPaywgdGhhdCBsb29rcyBsaWtlIHdoYXQgSSB3b3Vs
ZCBleHBlY3QuIEZvciBjcnV4IHRlc3RzLCB3ZSBpdGVyYXRlIG92ZXIKPiBib3RoIHRoZSBsZWdh
Y3kgcmluZyBzZWxlY3RvciwgYW5kIGFsb25nIHRoZSBlbmdpbmVbXSBpbmRpY2VzLgo+IAo+PiAt
ICAgICAgIGlndF9zdWJ0ZXN0KCJiYXNpYy1hbGwtbGlnaHQiKQo+PiArICAgICAgIGlndF9zdWJ0
ZXN0KCJhbGwtbGlnaHQiKQo+PiAgICAgICAgICAgICAgICAgIGFsbChmZCwgbGlnaHQsIDAsIDUp
Owo+PiAtICAgICAgIGlndF9zdWJ0ZXN0KCJiYXNpYy1hbGwtaGVhdnkiKQo+PiArICAgICAgIGln
dF9zdWJ0ZXN0KCJhbGwtaGVhdnkiKQo+PiAgICAgICAgICAgICAgICAgIGFsbChmZCwgaGVhdnks
IDAsIDUpOwo+IAo+IEFuZCBmb3IgImFsbCIgdGVzdHMgd2hlcmUgd2UgYXJlIGp1c3QgdHJ5aW5n
IHRvIHV0aWxpc2UgYWxsIGVuZ2luZXMgYXQKPiBvbmNlLCB3ZSBvbmx5IGNhcmUgYWJvdXQgdGhl
IHVuZGVybHlpbmcgSFcgdXRpbGlzYXRpb24gYW5kIHNvIHRoZSBuZXcKPiBxdWVyeSBpbnRlcmZh
Y2Ugd29ya3MgYmVzdC4KCkNvb2wsIHNvIG5vIGNvbXBsYWludHM/CgpSZWdhcmRzLAoKVHZydGtv
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdm
eCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D076D10B24E
	for <lists+intel-gfx@lfdr.de>; Wed, 27 Nov 2019 16:20:41 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 167576E0C6;
	Wed, 27 Nov 2019 15:20:40 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C9ED66E0C6;
 Wed, 27 Nov 2019 15:20:37 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 27 Nov 2019 07:20:37 -0800
X-IronPort-AV: E=Sophos;i="5.69,249,1571727600"; d="scan'208";a="203105192"
Received: from kjbrenna-mobl1.ger.corp.intel.com (HELO [10.251.83.147])
 ([10.251.83.147])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 27 Nov 2019 07:20:36 -0800
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191127145026.3438876-1-chris@chris-wilson.co.uk>
 <3bf4aa73-c9c0-fca5-664e-4fd41e2874f7@linux.intel.com>
 <157486771776.18552.5902480514258864541@skylake-alporthouse-com>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <af76eedb-7b69-aff5-411d-cac16b5205ba@linux.intel.com>
Date: Wed, 27 Nov 2019 15:20:34 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <157486771776.18552.5902480514258864541@skylake-alporthouse-com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH i-g-t] i915/gem_exec_balance: Check chain of
 submit dependencies
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDI3LzExLzIwMTkgMTU6MTUsIENocmlzIFdpbHNvbiB3cm90ZToKPiBRdW90aW5nIFR2cnRr
byBVcnN1bGluICgyMDE5LTExLTI3IDE1OjA4OjI1KQo+Pgo+PiBPbiAyNy8xMS8yMDE5IDE0OjUw
LCBDaHJpcyBXaWxzb24gd3JvdGU6Cj4+PiBDaGVjayB0aGF0IHRoZSBzdWJtaXQgZmVuY2UgY291
cGxlcyBpbnRvIHRoZSBkZXBlbmRlbmN5IGNoYWluIHNvIHRoYXQKPj4+IHRoZSBib25kZWQgcGFp
ciBjYW5ub3Qgb3ZlciB0YWtlIGFueSBvZiB0aGUgZWFybGllciByZXF1ZXN0cy4KPj4+Cj4+PiBT
aWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KPj4+
IENjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgo+Pj4gLS0tCj4+
PiAgICB0ZXN0cy9pOTE1L2dlbV9leGVjX2JhbGFuY2VyLmMgfCA4OCArKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrCj4+PiAgICAxIGZpbGUgY2hhbmdlZCwgODggaW5zZXJ0aW9ucygr
KQo+Pj4KPj4+IGRpZmYgLS1naXQgYS90ZXN0cy9pOTE1L2dlbV9leGVjX2JhbGFuY2VyLmMgYi90
ZXN0cy9pOTE1L2dlbV9leGVjX2JhbGFuY2VyLmMKPj4+IGluZGV4IDg2MDI4Y2ZkZC4uZmY1YmQw
MTM0IDEwMDY0NAo+Pj4gLS0tIGEvdGVzdHMvaTkxNS9nZW1fZXhlY19iYWxhbmNlci5jCj4+PiAr
KysgYi90ZXN0cy9pOTE1L2dlbV9leGVjX2JhbGFuY2VyLmMKPj4+IEBAIC04NTUsNiArODU1LDkx
IEBAIHN0YXRpYyB2b2lkIGJvbmRlZF9zbGljZShpbnQgaTkxNSkKPj4+ICAgICAgICBtdW5tYXAo
c3RvcCwgNDA5Nik7Cj4+PiAgICB9Cj4+PiAgICAKPj4+ICtzdGF0aWMgdm9pZCBib25kZWRfY2hh
aW4oaW50IGk5MTUpCj4+PiArewo+Pj4gKyAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9leGVjX29i
amVjdDIgYmF0Y2ggPSB7Cj4+PiArICAgICAgICAgICAgIC5oYW5kbGUgPSBiYXRjaF9jcmVhdGUo
aTkxNSksCj4+PiArICAgICB9Owo+Pj4gKyAgICAgdWludDMyX3QgY3R4Owo+Pj4gKwo+Pj4gKyAg
ICAgLyoKPj4+ICsgICAgICAqIEdpdmVuIGJhdGNoZXMgQSwgQiBhbmQgQicsIHdoZXJlIEIgYW5k
IEInIGFyZSBhIGJvbmRlZCBwYWlyLCB3aXRoCj4+PiArICAgICAgKiBCJyBkZXBlbmRpbmcgb24g
QiB3aXRoIGEgc3VibWl0IGZlbmNlIGFuZCBCIGRlcGVuZGluZyBvbiBBIGFzCj4+PiArICAgICAg
KiBhbiBvcmRpbmFyeSBmZW5jZTsgcHJvdmUgQicgY2Fubm90IGNvbXBsZXRlIGJlZm9yZSBBLgo+
Pj4gKyAgICAgICovCj4+PiArCj4+PiArICAgICBjdHggPSBnZW1fY29udGV4dF9jcmVhdGUoaTkx
NSk7Cj4+PiArCj4+PiArICAgICBmb3IgKGludCBjbGFzcyA9IDA7IGNsYXNzIDwgMzI7IGNsYXNz
KyspIHsKPj4+ICsgICAgICAgICAgICAgc3RydWN0IGk5MTVfZW5naW5lX2NsYXNzX2luc3RhbmNl
ICpzaWJsaW5nczsKPj4+ICsgICAgICAgICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVm
ZmVyMiBleGVjYnVmID0gewo+Pj4gKyAgICAgICAgICAgICAgICAgICAgIC5idWZmZXJzX3B0ciA9
IHRvX3VzZXJfcG9pbnRlcigmYmF0Y2gpLAo+Pj4gKyAgICAgICAgICAgICAgICAgICAgIC5idWZm
ZXJfY291bnQgPSAxLAo+Pj4gKyAgICAgICAgICAgICAgICAgICAgIC5yc3ZkMSA9IGN0eCwKPj4+
ICsgICAgICAgICAgICAgfTsKPj4+ICsgICAgICAgICAgICAgdW5zaWduZWQgaW50IGNvdW50Owo+
Pj4gKyAgICAgICAgICAgICBpZ3Rfc3Bpbl90ICpzcGluOwo+Pj4gKwo+Pj4gKyAgICAgICAgICAg
ICBzaWJsaW5ncyA9IGxpc3RfZW5naW5lcyhpOTE1LCAxdSA8PCBjbGFzcywgJmNvdW50KTsKPj4+
ICsgICAgICAgICAgICAgaWYgKCFzaWJsaW5ncykKPj4+ICsgICAgICAgICAgICAgICAgICAgICBj
b250aW51ZTsKPj4+ICsKPj4+ICsgICAgICAgICAgICAgaWYgKGNvdW50IDwgMikgewo+Pj4gKyAg
ICAgICAgICAgICAgICAgICAgIGZyZWUoc2libGluZ3MpOwo+Pj4gKyAgICAgICAgICAgICAgICAg
ICAgIGNvbnRpbnVlOwo+Pj4gKyAgICAgICAgICAgICB9Cj4+PiArCj4+PiArICAgICAgICAgICAg
IC8qIEE6IHNwaW4gZm9yZXZlciBvbiBlbmdpbmUgMSAqLwo+Pj4gKyAgICAgICAgICAgICBzZXRf
bG9hZF9iYWxhbmNlcihpOTE1LCBjdHgsIHNpYmxpbmdzLCBjb3VudCwgTlVMTCk7Cj4+PiArICAg
ICAgICAgICAgIHNwaW4gPSBpZ3Rfc3Bpbl9uZXcoaTkxNSwKPj4+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAuY3R4ID0gY3R4LAo+Pj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIC5lbmdpbmUgPSAxLAo+Pj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIC5mbGFncyA9IChJR1RfU1BJTl9QT0xMX1JVTiB8Cj4+PiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIElHVF9TUElOX0ZFTkNFX09VVCkpOwo+Pj4gKyAgICAg
ICAgICAgICBpZ3Rfc3Bpbl9idXN5d2FpdF91bnRpbF9zdGFydGVkKHNwaW4pOwo+Pj4gKwo+Pj4g
KyAgICAgICAgICAgICAvKiBCOiB3YWl0cyBmb3IgQSBvbiBlbmdpbmUgMiAqLwo+Pj4gKyAgICAg
ICAgICAgICBzZXRfbG9hZF9iYWxhbmNlcihpOTE1LCBjdHgsIHNpYmxpbmdzLCBjb3VudCwgTlVM
TCk7Cj4+PiArICAgICAgICAgICAgIGV4ZWNidWYucnN2ZDIgPSBzcGluLT5vdXRfZmVuY2U7Cj4+
PiArICAgICAgICAgICAgIGV4ZWNidWYuZmxhZ3MgPSBJOTE1X0VYRUNfRkVOQ0VfSU4gfCBJOTE1
X0VYRUNfRkVOQ0VfT1VUOwo+Pj4gKyAgICAgICAgICAgICBleGVjYnVmLmZsYWdzIHw9IDI7IC8q
IG9wcG9zaXRlIGVuZ2luZSB0byBzcGlubmVyICovCj4+Cj4+IFdoeSBvcj8KPiAKPiBleGVjYnVm
LmZsYWdzID0gMiB8IEZFTkNFX0lOIHwgRkVOQ0VfT1VUCgovbWUgZmFjZXBhbG1zCgo+Pgo+Pj4g
KyAgICAgICAgICAgICBnZW1fZXhlY2J1Zl93cihpOTE1LCAmZXhlY2J1Zik7Cj4+PiArCj4+PiAr
ICAgICAgICAgICAgIC8qIEInOiBydW4gaW4gcGFyYWxsZWwgd2l0aCBCIG9uIGVuZ2luZSAxLCBp
LmUuIG5vdCBiZWZvcmUgQSEgKi8KPj4+ICsgICAgICAgICAgICAgc2V0X2xvYWRfYmFsYW5jZXIo
aTkxNSwgY3R4LCBzaWJsaW5ncywgY291bnQsIE5VTEwpOwo+Pgo+PiBXaHkgYXJlIHlvdSByZXBl
YXRpbmcgdGhlIHNhbWUgc2V0X2xvYWRfYmFsYW5jZXIgY2FsbHM/Cj4gCj4gQmVjYXVzZSB3ZSBu
ZWVkIGEgbmV3IHRpbWVsaW5lIHdydCB0aGUgc3Bpbm5lci4KPiAoV2VsbCBCJyBkb2VzLiBJIG9y
aWdpbmFsbHkgdHJpZWQgdXNpbmcgdGhlIHZpcnR1YWwgZW5naW5lIGhlcmUsIGJ1dAo+IHNlbWFw
aG9yZXMgYXJlIG5vdCBndWFyYW50ZWVkIHNvIGl0IHdvcmtzIGJldHRlciBieSBmb3JjaW5nIHRo
ZSBlbmdpbmUKPiBzZWxlY3Rpb24gdG8gdGhlIGtub3duIGJhZCBwYXR0ZXJuLikKClllYWguLiBt
YWtlcyBzZW5zZS4gUGxlYXNlIGRyb3AgYSBzaG9ydCBjb21tZW50IHRvIHRoYXQgZWZmZWN0IGFu
ZCB3aXRoIAp0aGF0OgoKUmV2aWV3ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxp
bkBpbnRlbC5jb20+CgpSZWdhcmRzLAoKVHZydGtvCgo+Pj4gKyAgICAgICAgICAgICBleGVjYnVm
LmZsYWdzID0gSTkxNV9FWEVDX0ZFTkNFX1NVQk1JVCB8IEk5MTVfRVhFQ19GRU5DRV9PVVQ7Cj4+
PiArICAgICAgICAgICAgIGV4ZWNidWYuZmxhZ3MgfD0gMTsgLyogc2FtZSBlbmdpbmUgYXMgc3Bp
bm5lciAqLwo+Pgo+PiBFbmdpbmUgMz8gQnV0IHRoZXJlIGFyZSBvbmx5IHR3byBlbmdpbmVzIGlu
IHRoZSBtYXAsIHBsdXMgdGhlIHZpcnR1YWwuCj4+IFNvIDAsIDEsIDIgLSBob3cgZG9lcyB0aGlz
IHdvcmsgZm9yIHlvdT8KPiAKPiBleGVjYnVmLmZsYWdzID0gMSB8IEZFTkNFX1NVQk1JVCB8IEZF
TkNFX09VVDsKPiAKPj4+ICsgICAgICAgICAgICAgZXhlY2J1Zi5yc3ZkMiA+Pj0gMzI7Cj4+PiAr
ICAgICAgICAgICAgIGdlbV9leGVjYnVmX3dyKGk5MTUsICZleGVjYnVmKTsKPj4+ICsKPj4+ICsg
ICAgICAgICAgICAgLyogV2FpdCBmb3IgYW55IG1hZ2ljIHRpbWVzbGljaW5nIG9yIHByZWVtcHRp
b25zLi4uICovCj4+PiArICAgICAgICAgICAgIGlndF9hc3NlcnRfZXEoc3luY19mZW5jZV93YWl0
KGV4ZWNidWYucnN2ZDIgPj4gMzIsIDEwMDApLAo+Pj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgIC1FVElNRSk7Cj4+PiArCj4+PiArICAgICAgICAgICAgIGlndF9kZWJ1Z2ZzX2R1bXAoaTkx
NSwgImk5MTVfZW5naW5lX2luZm8iKTsKPj4+ICsKPj4+ICsgICAgICAgICAgICAgLyoKPj4+ICsg
ICAgICAgICAgICAgICogLi4uIHdoaWNoIHNob3VsZCBub3QgaGF2ZSBoYXBwZW5lZCwgc28gZXZl
cnl0aGluZyBpcyBzdGlsbAo+Pj4gKyAgICAgICAgICAgICAgKiB3YWl0aW5nIG9uIHRoZSBzcGlu
bmVyCj4+PiArICAgICAgICAgICAgICAqLwo+Pj4gKyAgICAgICAgICAgICBpZ3RfYXNzZXJ0X2Vx
KHN5bmNfZmVuY2Vfc3RhdHVzKHNwaW4tPm91dF9mZW5jZSksIDApOwo+Pj4gKyAgICAgICAgICAg
ICBpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfc3RhdHVzKGV4ZWNidWYucnN2ZDIgJiAweGZmZmZm
ZmZmKSwgMCk7Cj4+PiArICAgICAgICAgICAgIGlndF9hc3NlcnRfZXEoc3luY19mZW5jZV9zdGF0
dXMoZXhlY2J1Zi5yc3ZkMiA+PiAzMiksIDApOwo+Pj4gKwo+Pj4gKyAgICAgICAgICAgICBpZ3Rf
c3Bpbl9mcmVlKGk5MTUsIHNwaW4pOwo+Pj4gKyAgICAgICAgICAgICBnZW1fc3luYyhpOTE1LCBi
YXRjaC5oYW5kbGUpOwo+Pj4gKwo+Pj4gKyAgICAgICAgICAgICBpZ3RfYXNzZXJ0X2VxKHN5bmNf
ZmVuY2Vfc3RhdHVzKGV4ZWNidWYucnN2ZDIgJiAweGZmZmZmZmZmKSwgMSk7Cj4+PiArICAgICAg
ICAgICAgIGlndF9hc3NlcnRfZXEoc3luY19mZW5jZV9zdGF0dXMoZXhlY2J1Zi5yc3ZkMiA+PiAz
MiksIDEpOwo+Pj4gKwo+Pj4gKyAgICAgICAgICAgICBjbG9zZShleGVjYnVmLnJzdmQyKTsKPj4+
ICsgICAgICAgICAgICAgY2xvc2UoZXhlY2J1Zi5yc3ZkMiA+PiAzMik7Cj4+PiArICAgICB9Cj4+
Cj4+IEhvdyBldmlsIHRvIGxvd2VyIGN0eCBwcmlvIGZvciBBIG9ubHk/Cj4gCj4gQSBkcmF3LiBZ
b3Ugc3dhcCB0aGUgdGltZXNsaWNpbmcgY2F0Y2ggZm9yIHRoZSBleHBsaWNpdCBwcmVlbXB0aW9u
Cj4gY2hlY2suCj4gLUNocmlzCj4gCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8A15D63615
	for <lists+intel-gfx@lfdr.de>; Tue,  9 Jul 2019 14:41:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CF18789533;
	Tue,  9 Jul 2019 12:41:51 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A7BD589533
 for <intel-gfx@lists.freedesktop.org>; Tue,  9 Jul 2019 12:41:50 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Jul 2019 05:41:50 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,470,1557212400"; d="scan'208";a="188816320"
Received: from gaia.fi.intel.com ([10.237.72.192])
 by fmsmga004.fm.intel.com with ESMTP; 09 Jul 2019 05:41:49 -0700
Received: by gaia.fi.intel.com (Postfix, from userid 1000)
 id 4CC7A5C053C; Tue,  9 Jul 2019 15:41:37 +0300 (EEST)
From: Mika Kuoppala <mika.kuoppala@linux.intel.com>
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
In-Reply-To: <156267536884.9375.17191983325513622086@skylake-alporthouse-com>
References: <20190707210024.26192-1-chris@chris-wilson.co.uk>
 <20190707210024.26192-2-chris@chris-wilson.co.uk>
 <87h87v1jlw.fsf@gaia.fi.intel.com>
 <156267536884.9375.17191983325513622086@skylake-alporthouse-com>
Date: Tue, 09 Jul 2019 15:41:37 +0300
Message-ID: <87ef2z1ita.fsf@gaia.fi.intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH 01/11] drm/i915/gtt: Use shallow dma pages
 for scratch
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Q2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+IHdyaXRlczoKCj4gUXVvdGlu
ZyBNaWthIEt1b3BwYWxhICgyMDE5LTA3LTA5IDEzOjI0OjI3KQo+PiBDaHJpcyBXaWxzb24gPGNo
cmlzQGNocmlzLXdpbHNvbi5jby51az4gd3JpdGVzOgo+PiAKPj4gPiBXZSBvbmx5IHVzZSB0aGUg
ZG1hIHBhZ2VzIGZvciBzY3JhdGNoLCBhbmQgc28gZG8gbm90IG5lZWQgdG8gYWxsb2NhdGUKPj4g
PiB0aGUgZXh0cmEgc3RvcmFnZSBmb3IgdGhlIHNoYWRvdyBwYWdlIGRpcmVjdG9yeS4KPj4gPgo+
PiA+IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVr
Pgo+PiA+IENjOiBNaWthIEt1b3BwYWxhIDxtaWthLmt1b3BwYWxhQGxpbnV4LmludGVsLmNvbT4K
Pj4gPiAtLS0KPj4gPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMgfCAxOTIg
KysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLQo+PiA+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2dlbV9ndHQuaCB8ICAgNiArLQo+PiA+ICAyIGZpbGVzIGNoYW5nZWQsIDg1IGluc2VydGlv
bnMoKyksIDExMyBkZWxldGlvbnMoLSkKPj4gPgo+PiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2Vt
X2d0dC5jCj4+ID4gaW5kZXggMjM2Yzk2NGRkNzYxLi45MzcyMzY5MTNlNzAgMTAwNjQ0Cj4+ID4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKPj4gPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYwo+PiA+IEBAIC01OTQsMjUgKzU5NCwxNyBA
QCBzdGF0aWMgdm9pZCBjbGVhbnVwX3BhZ2VfZG1hKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2Ug
KnZtLAo+PiA+ICAKPj4gPiAgI2RlZmluZSBrbWFwX2F0b21pY19weChweCkga21hcF9hdG9taWMo
cHhfYmFzZShweCktPnBhZ2UpCj4+ID4gIAo+PiA+IC0jZGVmaW5lIGZpbGxfcHgodm0sIHB4LCB2
KSBmaWxsX3BhZ2VfZG1hKCh2bSksIHB4X2Jhc2UocHgpLCAodikpCj4+ID4gLSNkZWZpbmUgZmls
bDMyX3B4KHZtLCBweCwgdikgZmlsbF9wYWdlX2RtYV8zMigodm0pLCBweF9iYXNlKHB4KSwgKHYp
KQo+PiA+ICsjZGVmaW5lIGZpbGxfcHgocHgsIHYpIGZpbGxfcGFnZV9kbWEocHhfYmFzZShweCks
ICh2KSkKPj4gPiArI2RlZmluZSBmaWxsMzJfcHgocHgsIHYpIGZpbGxfcGFnZV9kbWFfMzIocHhf
YmFzZShweCksICh2KSkKPj4gPiAgCj4+ID4gLXN0YXRpYyB2b2lkIGZpbGxfcGFnZV9kbWEoc3Ry
dWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0sCj4+ID4gLSAgICAgICAgICAgICAgICAgICAgICAg
c3RydWN0IGk5MTVfcGFnZV9kbWEgKnAsCj4+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgY29u
c3QgdTY0IHZhbCkKPj4gPiArc3RhdGljIHZvaWQgZmlsbF9wYWdlX2RtYShzdHJ1Y3QgaTkxNV9w
YWdlX2RtYSAqcCwgY29uc3QgdTY0IHZhbCkKPj4gPiAgewo+PiA+IC0gICAgIHU2NCAqIGNvbnN0
IHZhZGRyID0ga21hcF9hdG9taWMocC0+cGFnZSk7Cj4+ID4gLQo+PiA+IC0gICAgIG1lbXNldDY0
KHZhZGRyLCB2YWwsIFBBR0VfU0laRSAvIHNpemVvZih2YWwpKTsKPj4gPiAtCj4+ID4gLSAgICAg
a3VubWFwX2F0b21pYyh2YWRkcik7Cj4+ID4gKyAgICAga3VubWFwX2F0b21pYyhtZW1zZXQ2NChr
bWFwX2F0b21pYyhwLT5wYWdlKSwgdmFsLCBJOTE1X1BERVMpKTsKPj4gCj4+IE5lYXQuCj4+IAo+
PiBJIHdvdWxkIGdvIGZvciA1MTIgaW5zdGVhZCBvZiBJOTE1X1BERVMuIFRoZXJlIGlzIG5vIG1h
Z2ljCj4+IGFuZCB0aGVyZSBuZXZlciB3aWxsIGJlIG1hZ2ljIGFzIGl0IGlzIGFzIGNvbnN0IGFz
IGNhcnZlZCBpbnRvIHN0b25lLgo+Cj4gSSB3YXMganVzdCBnb2luZyB3aXRoIEk5MTVfUERFUyBh
bmQgSTkxNV9QREVfTUFTSyB0aHJvdWdob3V0LiBMYXRlciB0aGlzCj4gb25lIGJlY29tZXMgY291
bnQsIGZ3aXcuCj4+IAo+PiA+ICB9Cj4+ID4gIAo+PiA+IC1zdGF0aWMgdm9pZCBmaWxsX3BhZ2Vf
ZG1hXzMyKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+PiA+IC0gICAgICAgICAgICAg
ICAgICAgICAgICAgIHN0cnVjdCBpOTE1X3BhZ2VfZG1hICpwLAo+PiA+IC0gICAgICAgICAgICAg
ICAgICAgICAgICAgIGNvbnN0IHUzMiB2KQo+PiA+ICtzdGF0aWMgdm9pZCBmaWxsX3BhZ2VfZG1h
XzMyKHN0cnVjdCBpOTE1X3BhZ2VfZG1hICpwLCBjb25zdCB1MzIgdikKPj4gPiAgewo+PiA+IC0g
ICAgIGZpbGxfcGFnZV9kbWEodm0sIHAsICh1NjQpdiA8PCAzMiB8IHYpOwo+PiA+ICsgICAgIGZp
bGxfcGFnZV9kbWEocCwgKHU2NCl2IDw8IDMyIHwgdik7Cj4+ID4gIH0KPj4gPiAgCj4+ID4gIHN0
YXRpYyBpbnQKPj4gPiBAQCAtNjg3LDYgKzY3OSwyMSBAQCBzdGF0aWMgdm9pZCBjbGVhbnVwX3Nj
cmF0Y2hfcGFnZShzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSkKPj4gPiAgICAgICBfX2Zy
ZWVfcGFnZXMocC0+cGFnZSwgb3JkZXIpOwo+PiA+ICB9Cj4+ID4gIAo+PiA+ICtzdGF0aWMgdm9p
ZCBmcmVlX3NjcmF0Y2goc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0pCj4+ID4gK3sKPj4g
PiArICAgICBpZiAoIXZtLT5zY3JhdGNoX3BhZ2UuZGFkZHIpIC8qIHNldCB0byAwIG9uIGNsb25l
cyAqLwo+PiA+ICsgICAgICAgICAgICAgcmV0dXJuOwo+PiA+ICsKPj4gPiArICAgICBpZiAodm0t
PnNjcmF0Y2hfcGRwLmRhZGRyKQo+PiA+ICsgICAgICAgICAgICAgY2xlYW51cF9wYWdlX2RtYSh2
bSwgJnZtLT5zY3JhdGNoX3BkcCk7Cj4+ID4gKyAgICAgaWYgKHZtLT5zY3JhdGNoX3BkLmRhZGRy
KQo+PiA+ICsgICAgICAgICAgICAgY2xlYW51cF9wYWdlX2RtYSh2bSwgJnZtLT5zY3JhdGNoX3Bk
KTsKPj4gPiArICAgICBpZiAodm0tPnNjcmF0Y2hfcHQuZGFkZHIpCj4+ID4gKyAgICAgICAgICAg
ICBjbGVhbnVwX3BhZ2VfZG1hKHZtLCAmdm0tPnNjcmF0Y2hfcHQpOwo+PiA+ICsKPj4gPiArICAg
ICBjbGVhbnVwX3NjcmF0Y2hfcGFnZSh2bSk7Cj4+ID4gK30KPj4gPiArCj4+ID4gIHN0YXRpYyBz
dHJ1Y3QgaTkxNV9wYWdlX3RhYmxlICphbGxvY19wdChzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNl
ICp2bSkKPj4gPiAgewo+PiA+ICAgICAgIHN0cnVjdCBpOTE1X3BhZ2VfdGFibGUgKnB0Owo+PiA+
IEBAIC03MTEsMTggKzcxOCw2IEBAIHN0YXRpYyB2b2lkIGZyZWVfcHQoc3RydWN0IGk5MTVfYWRk
cmVzc19zcGFjZSAqdm0sIHN0cnVjdCBpOTE1X3BhZ2VfdGFibGUgKnB0KQo+PiA+ICAgICAgIGtm
cmVlKHB0KTsKPj4gPiAgfQo+PiA+ICAKPj4gPiAtc3RhdGljIHZvaWQgZ2VuOF9pbml0aWFsaXpl
X3B0KHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+PiA+IC0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc3RydWN0IGk5MTVfcGFnZV90YWJsZSAqcHQpCj4+ID4gLXsKPj4gPiAtICAg
ICBmaWxsX3B4KHZtLCBwdCwgdm0tPnNjcmF0Y2hfcHRlKTsKPj4gPiAtfQo+PiA+IC0KPj4gPiAt
c3RhdGljIHZvaWQgZ2VuNl9pbml0aWFsaXplX3B0KHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2Ug
KnZtLAo+PiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGk5MTVfcGFnZV90
YWJsZSAqcHQpCj4+ID4gLXsKPj4gPiAtICAgICBmaWxsMzJfcHgodm0sIHB0LCB2bS0+c2NyYXRj
aF9wdGUpOwo+PiA+IC19Cj4+ID4gLQo+PiA+ICBzdGF0aWMgc3RydWN0IGk5MTVfcGFnZV9kaXJl
Y3RvcnkgKl9fYWxsb2NfcGQodm9pZCkKPj4gPiAgewo+PiA+ICAgICAgIHN0cnVjdCBpOTE1X3Bh
Z2VfZGlyZWN0b3J5ICpwZDsKPj4gPiBAQCAtNzY1LDkgKzc2MCwxMSBAQCBzdGF0aWMgdm9pZCBm
cmVlX3BkKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+PiA+ICAgICAgIGtmcmVlKHBk
KTsKPj4gPiAgfQo+PiA+ICAKPj4gPiAtI2RlZmluZSBpbml0X3BkKHZtLCBwZCwgdG8pIHsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAo+PiA+IC0gICAgIGZpbGxfcHgo
KHZtKSwgKHBkKSwgZ2VuOF9wZGVfZW5jb2RlKHB4X2RtYSh0byksIEk5MTVfQ0FDSEVfTExDKSk7
IFwKPj4gPiAtICAgICBtZW1zZXRfcCgocGQpLT5lbnRyeSwgKHRvKSwgNTEyKTsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgXAo+PiA+ICtzdGF0aWMgdm9pZCBpbml0X3BkKHN0cnVjdCBp
OTE1X3BhZ2VfZGlyZWN0b3J5ICpwZCwKPj4gPiArICAgICAgICAgICAgICAgICBzdHJ1Y3QgaTkx
NV9wYWdlX2RtYSAqc2NyYXRjaCkKPj4gPiArewo+PiA+ICsgICAgIGZpbGxfcHgocGQsIGdlbjhf
cGRlX2VuY29kZShzY3JhdGNoLT5kYWRkciwgSTkxNV9DQUNIRV9MTEMpKTsKPj4gPiArICAgICBt
ZW1zZXRfcChwZC0+ZW50cnksIHNjcmF0Y2gsIDUxMik7Cj4+ID4gIH0KPj4gPiAgCj4+ID4gIHN0
YXRpYyBpbmxpbmUgdm9pZAo+PiA+IEBAIC04NjksMTIgKzg2NiwxMSBAQCBzdGF0aWMgdm9pZCBn
ZW44X3BwZ3R0X2NsZWFyX3BkKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+PiA+ICAg
ICAgIHUzMiBwZGU7Cj4+ID4gIAo+PiA+ICAgICAgIGdlbjhfZm9yX2VhY2hfcGRlKHB0LCBwZCwg
c3RhcnQsIGxlbmd0aCwgcGRlKSB7Cj4+ID4gLSAgICAgICAgICAgICBHRU1fQlVHX09OKHB0ID09
IHZtLT5zY3JhdGNoX3B0KTsKPj4gPiArICAgICAgICAgICAgIEdFTV9CVUdfT04ocHhfYmFzZShw
dCkgPT0gJnZtLT5zY3JhdGNoX3B0KTsKPj4gPiAgCj4+ID4gICAgICAgICAgICAgICBhdG9taWNf
aW5jKCZwdC0+dXNlZCk7Cj4+ID4gICAgICAgICAgICAgICBnZW44X3BwZ3R0X2NsZWFyX3B0KHZt
LCBwdCwgc3RhcnQsIGxlbmd0aCk7Cj4+ID4gLSAgICAgICAgICAgICBpZiAocmVsZWFzZV9wZF9l
bnRyeShwZCwgcGRlLCAmcHQtPnVzZWQsCj4+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBweF9iYXNlKHZtLT5zY3JhdGNoX3B0KSkpCj4+ID4gKyAgICAgICAgICAgICBpZiAo
cmVsZWFzZV9wZF9lbnRyeShwZCwgcGRlLCAmcHQtPnVzZWQsICZ2bS0+c2NyYXRjaF9wdCkpCj4+
ID4gICAgICAgICAgICAgICAgICAgICAgIGZyZWVfcHQodm0sIHB0KTsKPj4gPiAgICAgICB9Cj4+
ID4gIH0KPj4gPiBAQCAtODkwLDEyICs4ODYsMTEgQEAgc3RhdGljIHZvaWQgZ2VuOF9wcGd0dF9j
bGVhcl9wZHAoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0sCj4+ID4gICAgICAgdW5zaWdu
ZWQgaW50IHBkcGU7Cj4+ID4gIAo+PiA+ICAgICAgIGdlbjhfZm9yX2VhY2hfcGRwZShwZCwgcGRw
LCBzdGFydCwgbGVuZ3RoLCBwZHBlKSB7Cj4+ID4gLSAgICAgICAgICAgICBHRU1fQlVHX09OKHBk
ID09IHZtLT5zY3JhdGNoX3BkKTsKPj4gPiArICAgICAgICAgICAgIEdFTV9CVUdfT04ocHhfYmFz
ZShwZCkgPT0gJnZtLT5zY3JhdGNoX3BkKTsKPj4gCj4+IFBlcmhhcHMgZnV0dXJlIHdpbGwgYnJp
bmcgcGRfcG9pbnRzX3NjcmF0Y2gocGQpLgo+PiAKPj4gTm93IHRoZSBpbnRyaWd1aW5nLCBib3Jk
ZXJpbmcgaXJyaXRhdGluZywgcXVlc3Rpb24gaW4gbXkgbWluZCBpcwo+PiB0aGF0IGNhbiB3ZSBm
b2xkIHRoZSBzY3JhdGNoX3BkIGFuZCBzY3JhdGNoX3BkcCB0byBiZSB0aGUgc2FtZSB0aGluZy4K
Pgo+IE5vLCB3ZSBjYW4gZm9sZCB0aGUgc2NyYXRjaF9wZCB0byBiZSB0aGUgc2FtZSAoZG1hIHdp
c2UpIGFzIHRoZXkgZG8gbmVlZAo+IHRvIGVuZCB1cCBhdCB0aGUgc2NyYXRjaF9wdGUuIEFuZCBz
YWRseSB3ZSBjYW4ndCB1c2UgdGhlIHNjcmF0Y2hfcHRlIGFzCj4gdGhlIGZpbGxlciBmb3Igc2Ny
YXRjaF9wZC4KCk9oIGluZGVlZC4gaXQgbmVlZHMgdG8gYmUgaGllcmFyY2h5IGV2ZW4gb24gdXBw
ZXIgbGV2ZWwgdG8gYnJlYWsKb3V0LiAqYmx1c2gqCgo+Cj4+IFBhdGNoIGxndG0gd2l0aCBzb21l
IGRpc2xpa2UgdG93YXJkcyBJOTE1X1BERVMsCj4KPiBJJ20gbm90IGtlZW4gb24gaXQgdGJoLiBC
dXQgdGhlIG1peCBvZiBhbHRlcm5hdGluZyBiZXR3ZWVuIDUxMi8weDFmZgo+IGRvZXMgc3VnZ2Vz
dCB0byB1c2Ugc29tZSBuYW1lLgoKNTEyIGV2ZXJ5d2hlcmUuCi1NaWthCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QK
SW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

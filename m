Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AE86D27F10
	for <lists+intel-gfx@lfdr.de>; Thu, 23 May 2019 16:05:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 18B7989998;
	Thu, 23 May 2019 14:05:15 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2DD4C89998;
 Thu, 23 May 2019 14:05:14 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 16655994-1500050 for multiple; Thu, 23 May 2019 15:05:06 +0100
MIME-Version: 1.0
To: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
 igt-dev@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <20190522155720.28723-8-tvrtko.ursulin@linux.intel.com>
References: <20190522155720.28723-1-tvrtko.ursulin@linux.intel.com>
 <20190522155720.28723-8-tvrtko.ursulin@linux.intel.com>
Message-ID: <155862030582.28319.3804244470704978759@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Thu, 23 May 2019 15:05:05 +0100
Subject: Re: [Intel-gfx] [PATCH i-g-t 07/15] gem_wsim: Infinite batch support
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBUdnJ0a28gVXJzdWxpbiAoMjAxOS0wNS0yMiAxNjo1NzoxMikKPiAtc3RhdGljIHZv
aWQKPiArc3RhdGljIHVuc2lnbmVkIGludAo+ICB0ZXJtaW5hdGVfYmIoc3RydWN0IHdfc3RlcCAq
dywgdW5zaWduZWQgaW50IGZsYWdzKQo+ICB7Cj4gICAgICAgICBjb25zdCB1aW50MzJfdCBiYmUg
PSAweGEgPDwgMjM7Cj4gICAgICAgICB1bnNpZ25lZCBsb25nIG1tYXBfc3RhcnQsIG1tYXBfbGVu
Owo+ICAgICAgICAgdW5zaWduZWQgbG9uZyBiYXRjaF9zdGFydCA9IHctPmJiX3N6Owo+ICsgICAg
ICAgdW5zaWduZWQgaW50IHIgPSAwOwo+ICAgICAgICAgdWludDMyX3QgKnB0ciwgKmNzOwo+ICAK
PiAgICAgICAgIGlndF9hc3NlcnQoKChmbGFncyAmIFJUKSAmJiAoZmxhZ3MgJiBTRVFOTykpIHx8
ICEoZmxhZ3MgJiBSVCkpOwo+IEBAIC04MzgsNiArODU0LDkgQEAgdGVybWluYXRlX2JiKHN0cnVj
dCB3X3N0ZXAgKncsIHVuc2lnbmVkIGludCBmbGFncykKPiAgICAgICAgIGlmIChmbGFncyAmIFJU
KQo+ICAgICAgICAgICAgICAgICBiYXRjaF9zdGFydCAtPSAxMiAqIHNpemVvZih1aW50MzJfdCk7
Cj4gIAo+ICsgICAgICAgaWYgKHctPnVuYm91bmRfZHVyYXRpb24pCj4gKyAgICAgICAgICAgICAg
IGJhdGNoX3N0YXJ0IC09IDQgKiBzaXplb2YodWludDMyX3QpOyAvKiBNSV9BUkJfQ0hLICsgTUlf
QkFUQ0hfQlVGRkVSX1NUQVJUICovCj4gKwo+ICAgICAgICAgbW1hcF9zdGFydCA9IHJvdW5kZG93
bihiYXRjaF9zdGFydCwgUEFHRV9TSVpFKTsKPiAgICAgICAgIG1tYXBfbGVuID0gQUxJR04ody0+
YmJfc3ogLSBtbWFwX3N0YXJ0LCBQQUdFX1NJWkUpOwo+ICAKPiBAQCAtODQ3LDggKzg2NiwxOSBA
QCB0ZXJtaW5hdGVfYmIoc3RydWN0IHdfc3RlcCAqdywgdW5zaWduZWQgaW50IGZsYWdzKQo+ICAg
ICAgICAgcHRyID0gZ2VtX21tYXBfX3djKGZkLCB3LT5iYl9oYW5kbGUsIG1tYXBfc3RhcnQsIG1t
YXBfbGVuLCBQUk9UX1dSSVRFKTsKPiAgICAgICAgIGNzID0gKHVpbnQzMl90ICopKChjaGFyICop
cHRyICsgYmF0Y2hfc3RhcnQgLSBtbWFwX3N0YXJ0KTsKPiAgCj4gKyAgICAgICBpZiAody0+dW5i
b3VuZF9kdXJhdGlvbikgewo+ICsgICAgICAgICAgICAgICB3LT5yZWxvY1tyKytdLm9mZnNldCA9
IGJhdGNoX3N0YXJ0ICsgMiAqIHNpemVvZih1aW50MzJfdCk7Cj4gKyAgICAgICAgICAgICAgIGJh
dGNoX3N0YXJ0ICs9IDQgKiBzaXplb2YodWludDMyX3QpOwo+ICsKPiArICAgICAgICAgICAgICAg
KmNzKysgPSB3LT5wcmVlbXB0X3VzID8gMHg1IDw8IDIzIC8qIE1JX0FSQl9DSEs7ICovIDogTUlf
Tk9PUDsKPiArICAgICAgICAgICAgICAgdy0+cmVjdXJzaXZlX2JiX3N0YXJ0ID0gY3M7Cj4gKyAg
ICAgICAgICAgICAgICpjcysrID0gTUlfQkFUQ0hfQlVGRkVSX1NUQVJUIHwgMSA8PCA4IHwgMTsK
PiArICAgICAgICAgICAgICAgKmNzKysgPSAwOwo+ICsgICAgICAgICAgICAgICAqY3MrKyA9IDA7
CgpkZWx0YSBpcyB6ZXJvLCBhbmQgbW1hcF9sZW4gaXMgY29uc2lzdGVudCwgc28geXVwIHRoaXMg
Z2l2ZXMgYSBwYWdlIG9mCm5vcHMgYmVmb3JlIGxvb3BpbmcuCgo+ICsgICAgICAgfQo+ICsKPiAg
ICAgICAgIGlmIChmbGFncyAmIFNFUU5PKSB7Cj4gLSAgICAgICAgICAgICAgIHctPnJlbG9jWzBd
Lm9mZnNldCA9IGJhdGNoX3N0YXJ0ICsgc2l6ZW9mKHVpbnQzMl90KTsKPiArICAgICAgICAgICAg
ICAgdy0+cmVsb2NbcisrXS5vZmZzZXQgPSBiYXRjaF9zdGFydCArIHNpemVvZih1aW50MzJfdCk7
Cj4gICAgICAgICAgICAgICAgIGJhdGNoX3N0YXJ0ICs9IDQgKiBzaXplb2YodWludDMyX3QpOwo+
ICAKPiAgICAgICAgICAgICAgICAgKmNzKysgPSBNSV9TVE9SRV9EV09SRF9JTU07Cj4gQEAgLTg2
MCw3ICs4OTAsNyBAQCB0ZXJtaW5hdGVfYmIoc3RydWN0IHdfc3RlcCAqdywgdW5zaWduZWQgaW50
IGZsYWdzKQo+ICAgICAgICAgfQo+ICAKPiAgICAgICAgIGlmIChmbGFncyAmIFJUKSB7Cj4gLSAg
ICAgICAgICAgICAgIHctPnJlbG9jWzFdLm9mZnNldCA9IGJhdGNoX3N0YXJ0ICsgc2l6ZW9mKHVp
bnQzMl90KTsKPiArICAgICAgICAgICAgICAgdy0+cmVsb2NbcisrXS5vZmZzZXQgPSBiYXRjaF9z
dGFydCArIHNpemVvZih1aW50MzJfdCk7Cj4gICAgICAgICAgICAgICAgIGJhdGNoX3N0YXJ0ICs9
IDQgKiBzaXplb2YodWludDMyX3QpOwo+ICAKPiAgICAgICAgICAgICAgICAgKmNzKysgPSBNSV9T
VE9SRV9EV09SRF9JTU07Cj4gQEAgLTg3MCw3ICs5MDAsNyBAQCB0ZXJtaW5hdGVfYmIoc3RydWN0
IHdfc3RlcCAqdywgdW5zaWduZWQgaW50IGZsYWdzKQo+ICAgICAgICAgICAgICAgICB3LT5ydDBf
dmFsdWUgPSBjczsKPiAgICAgICAgICAgICAgICAgKmNzKysgPSAwOwo+ICAKPiAtICAgICAgICAg
ICAgICAgdy0+cmVsb2NbMl0ub2Zmc2V0ID0gYmF0Y2hfc3RhcnQgKyAyICogc2l6ZW9mKHVpbnQz
Ml90KTsKPiArICAgICAgICAgICAgICAgdy0+cmVsb2NbcisrXS5vZmZzZXQgPSBiYXRjaF9zdGFy
dCArIDIgKiBzaXplb2YodWludDMyX3QpOwo+ICAgICAgICAgICAgICAgICBiYXRjaF9zdGFydCAr
PSA0ICogc2l6ZW9mKHVpbnQzMl90KTsKPiAgCj4gICAgICAgICAgICAgICAgICpjcysrID0gMHgy
NCA8PCAyMyB8IDI7IC8qIE1JX1NUT1JFX1JFR19NRU0gKi8KPiBAQCAtODc5LDcgKzkwOSw3IEBA
IHRlcm1pbmF0ZV9iYihzdHJ1Y3Qgd19zdGVwICp3LCB1bnNpZ25lZCBpbnQgZmxhZ3MpCj4gICAg
ICAgICAgICAgICAgICpjcysrID0gMDsKPiAgICAgICAgICAgICAgICAgKmNzKysgPSAwOwo+ICAK
PiAtICAgICAgICAgICAgICAgdy0+cmVsb2NbM10ub2Zmc2V0ID0gYmF0Y2hfc3RhcnQgKyBzaXpl
b2YodWludDMyX3QpOwo+ICsgICAgICAgICAgICAgICB3LT5yZWxvY1tyKytdLm9mZnNldCA9IGJh
dGNoX3N0YXJ0ICsgc2l6ZW9mKHVpbnQzMl90KTsKPiAgICAgICAgICAgICAgICAgYmF0Y2hfc3Rh
cnQgKz0gNCAqIHNpemVvZih1aW50MzJfdCk7Cj4gIAo+ICAgICAgICAgICAgICAgICAqY3MrKyA9
IE1JX1NUT1JFX0RXT1JEX0lNTTsKPiBAQCAtODkxLDYgKzkyMSw4IEBAIHRlcm1pbmF0ZV9iYihz
dHJ1Y3Qgd19zdGVwICp3LCB1bnNpZ25lZCBpbnQgZmxhZ3MpCj4gICAgICAgICB9Cj4gIAo+ICAg
ICAgICAgKmNzID0gYmJlOwo+ICsKPiArICAgICAgIHJldHVybiByOwo+ICB9Cj4gIAo+ICBzdGF0
aWMgY29uc3QgdW5zaWduZWQgaW50IGViX2VuZ2luZV9tYXBbTlVNX0VOR0lORVNdID0gewo+IEBA
IC0xMDExLDE5ICsxMDQzLDIyIEBAIGFsbG9jX3N0ZXBfYmF0Y2goc3RydWN0IHdvcmtsb2FkICp3
cmssIHN0cnVjdCB3X3N0ZXAgKncsIHVuc2lnbmVkIGludCBmbGFncykKPiAgICAgICAgICAgICAg
ICAgfQo+ICAgICAgICAgfQo+ICAKPiAtICAgICAgIHctPmJiX3N6ID0gZ2V0X2JiX3N6KHctPmR1
cmF0aW9uLm1heCk7Cj4gLSAgICAgICB3LT5iYl9oYW5kbGUgPSB3LT5vYmpbal0uaGFuZGxlID0g
Z2VtX2NyZWF0ZShmZCwgdy0+YmJfc3opOwo+ICsgICAgICAgaWYgKHctPnVuYm91bmRfZHVyYXRp
b24pCj4gKyAgICAgICAgICAgICAgIC8qIG5vcHMgKyBNSV9BUkJfQ0hLICsgTUlfQkFUQ0hfQlVG
RkVSX1NUQVJUICovCj4gKyAgICAgICAgICAgICAgIHctPmJiX3N6ID0gbWF4KFBBR0VfU0laRSwg
Z2V0X2JiX3N6KHctPnByZWVtcHRfdXMpKSArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
KDEgKyAzKSAqIHNpemVvZih1aW50MzJfdCk7Cj4gKyAgICAgICBlbHNlCj4gKyAgICAgICAgICAg
ICAgIHctPmJiX3N6ID0gZ2V0X2JiX3N6KHctPmR1cmF0aW9uLm1heCk7Cj4gKyAgICAgICB3LT5i
Yl9oYW5kbGUgPSB3LT5vYmpbal0uaGFuZGxlID0gZ2VtX2NyZWF0ZShmZCwgdy0+YmJfc3ogKyAo
dy0+dW5ib3VuZF9kdXJhdGlvbiA/IDQwOTYgOiAwKSk7Cj4gICAgICAgICBpbml0X2JiKHcsIGZs
YWdzKTsKPiAtICAgICAgIHRlcm1pbmF0ZV9iYih3LCBmbGFncyk7Cj4gKyAgICAgICB3LT5vYmpb
al0ucmVsb2NhdGlvbl9jb3VudCA9IHRlcm1pbmF0ZV9iYih3LCBmbGFncyk7Cj4gIAo+IC0gICAg
ICAgaWYgKGZsYWdzICYgU0VRTk8pIHsKPiArICAgICAgIGlmICh3LT5vYmpbal0ucmVsb2NhdGlv
bl9jb3VudCkgewo+ICAgICAgICAgICAgICAgICB3LT5vYmpbal0ucmVsb2NzX3B0ciA9IHRvX3Vz
ZXJfcG9pbnRlcigmdy0+cmVsb2MpOwo+IC0gICAgICAgICAgICAgICBpZiAoZmxhZ3MgJiBSVCkK
PiAtICAgICAgICAgICAgICAgICAgICAgICB3LT5vYmpbal0ucmVsb2NhdGlvbl9jb3VudCA9IDQ7
Cj4gLSAgICAgICAgICAgICAgIGVsc2UKPiAtICAgICAgICAgICAgICAgICAgICAgICB3LT5vYmpb
al0ucmVsb2NhdGlvbl9jb3VudCA9IDE7Cj4gICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkg
PCB3LT5vYmpbal0ucmVsb2NhdGlvbl9jb3VudDsgaSsrKQo+ICAgICAgICAgICAgICAgICAgICAg
ICAgIHctPnJlbG9jW2ldLnRhcmdldF9oYW5kbGUgPSAxOwo+ICsgICAgICAgICAgICAgICBpZiAo
dy0+dW5ib3VuZF9kdXJhdGlvbikKPiArICAgICAgICAgICAgICAgICAgICAgICB3LT5yZWxvY1sw
XS50YXJnZXRfaGFuZGxlID0gajsKPiAgICAgICAgIH0KClRoYXQgZmxvd3MgbXVjaCBiZXR0ZXIu
CgpSZXZpZXdlZC1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Ci1D
aHJpcwpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRl
bC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

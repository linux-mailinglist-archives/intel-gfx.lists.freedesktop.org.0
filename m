Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 13957307B2A
	for <lists+intel-gfx@lfdr.de>; Thu, 28 Jan 2021 17:42:11 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4EAE56E98D;
	Thu, 28 Jan 2021 16:42:09 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id ED4D16E221
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Jan 2021 16:42:02 +0000 (UTC)
IronPort-SDR: aW9xXR+6s9xSlwn96EZ6fA0vkswDPgnV4SW6b6EIRGMFRaBwAP868m6wlNuvtbpHM5njugphWF
 KrUhE3I82rAA==
X-IronPort-AV: E=McAfee;i="6000,8403,9878"; a="159438537"
X-IronPort-AV: E=Sophos;i="5.79,383,1602572400"; d="scan'208";a="159438537"
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by fmsmga106.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 28 Jan 2021 08:42:02 -0800
IronPort-SDR: jdjMSnbi5dWTgxEUCiAbIOXe5NupAUxFikj52wgbgH0C2hca9O1zudgah7N8T4PkXe/8K0ESMC
 qeJ2qQEyq+HQ==
X-IronPort-AV: E=Sophos;i="5.79,383,1602572400"; d="scan'208";a="505370916"
Received: from arielher-mobl1.amr.corp.intel.com (HELO
 josouza-mobl2.intel.com) ([10.251.148.117])
 by orsmga004-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 28 Jan 2021 08:42:01 -0800
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 28 Jan 2021 08:43:11 -0800
Message-Id: <20210128164312.91160-2-jose.souza@intel.com>
X-Mailer: git-send-email 2.30.0
In-Reply-To: <20210128164312.91160-1-jose.souza@intel.com>
References: <20210128164312.91160-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH CI 2/3] drm/i915/gen11+: Only load DRAM
 information from pcode
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VXAgdG8gbm93IHdlIHdlcmUgcmVhZGluZyBzb21lIERSQU0gaW5mb3JtYXRpb24gZnJvbSBNQ0hC
QVIgcmVnaXN0ZXIKYW5kIGZyb20gcGNvZGUgd2hhdCBpcyBhbHJlYWR5IG5vdCBnb29kIGJ1dCBz
b21lIEdFTjEyKFRHTC1IIGFuZCBBREwtUykKcGxhdGZvcm1zIGhhdmUgTUNIQkFSIERSQU0gaW5m
b3JtYXRpb24gaW4gZGlmZmVyZW50IG9mZnNldHMuCgpUaGlzIHdhcyBub3RpZmllZCB0byBIVyB0
ZWFtIHRoYXQgZGVjaWRlZCB0aGF0IHRoZSBiZXN0IGFsdGVybmF0aXZlIGlzCmFsd2F5cyBhcHBs
eSB0aGUgMTZnYl9kaW1tIHdhdGVybWFyayBhZGp1c3RtZW50IGZvciBHRU4xMisgcGxhdGZvcm1z
CmFuZCByZWFkIHRoZSByZW1hbmluZyBEUkFNIGluZm9ybWF0aW9uIG5lZWRlZCB0byBvdGhlciBk
aXNwbGF5CnByb2dyYW1taW5nIGZyb20gcGNvZGUuCgpTbyBoZXJlIG1vdmluZyB0aGUgRFJBTSBw
Y29kZSBmdW5jdGlvbiB0byBpbnRlbF9kcmFtLmMsIHJlbW92aW5nCnRoZSBkdXBsaWNhdGVkIGZp
ZWxkcyBmcm9tIGludGVsX3Fndl9pbmZvLCBzZXR0aW5nIGFuZCB1c2luZwppbmZvcm1hdGlvbiBm
cm9tIGRyYW1faW5mby4KCnYyOgotIGJyaW5nIGJhY2sgbnVtX3BvaW50cyB0byBpbnRlbF9xZ3Zf
aW5mbyBhcyBudW1fcWd2X3BvaW50IGNhbiBiZQpvdmVyd3JpdHRlbiBpbiBpY2xfZ2V0X3Fndl9w
b2ludHMoKQotIGFkZCBnZW4xMl9nZXRfZHJhbV9pbmZvKCkgYW5kIHNpbXBsaWZ5IGdlbjExX2dl
dF9kcmFtX2luZm8oKQoKUmV2aWV3ZWQtYnk6IEx1Y2FzIERlIE1hcmNoaSA8bHVjYXMuZGVtYXJj
aGlAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBKb3PDqSBSb2JlcnRvIGRlIFNvdXphIDxqb3Nl
LnNvdXphQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2J3LmMgfCA4MCArKystLS0tLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZHJ2LmMgICAgICAgICB8ICA1ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5oICAgICAgICAgfCAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcmFtLmMgICAg
ICAgfCA4MiArKysrKysrKysrKysrKysrKysrKysrKystCiA0IGZpbGVzIGNoYW5nZWQsIDkzIGlu
c2VydGlvbnMoKyksIDc1IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfYncuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfYncuYwppbmRleCBiZDA2MDQwNGQyNDkuLjRiNWEzMGFjODRiYyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9idy5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYncuYwpAQCAtMjAsNzYgKzIwLDkgQEAgc3RydWN0IGlu
dGVsX3Fndl9wb2ludCB7CiBzdHJ1Y3QgaW50ZWxfcWd2X2luZm8gewogCXN0cnVjdCBpbnRlbF9x
Z3ZfcG9pbnQgcG9pbnRzW0k5MTVfTlVNX1FHVl9QT0lOVFNdOwogCXU4IG51bV9wb2ludHM7Ci0J
dTggbnVtX2NoYW5uZWxzOwogCXU4IHRfYmw7Ci0JZW51bSBpbnRlbF9kcmFtX3R5cGUgZHJhbV90
eXBlOwogfTsKIAotc3RhdGljIGludCBpY2xfcGNvZGVfcmVhZF9tZW1fZ2xvYmFsX2luZm8oc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAotCQkJCQkgIHN0cnVjdCBpbnRlbF9xZ3Zf
aW5mbyAqcWkpCi17Ci0JdTMyIHZhbCA9IDA7Ci0JaW50IHJldDsKLQotCXJldCA9IHNhbmR5YnJp
ZGdlX3Bjb2RlX3JlYWQoZGV2X3ByaXYsCi0JCQkJICAgICBJQ0xfUENPREVfTUVNX1NVQlNZU1lT
VEVNX0lORk8gfAotCQkJCSAgICAgSUNMX1BDT0RFX01FTV9TU19SRUFEX0dMT0JBTF9JTkZPLAot
CQkJCSAgICAgJnZhbCwgTlVMTCk7Ci0JaWYgKHJldCkKLQkJcmV0dXJuIHJldDsKLQotCWlmIChJ
U19HRU4oZGV2X3ByaXYsIDEyKSkgewotCQlzd2l0Y2ggKHZhbCAmIDB4ZikgewotCQljYXNlIDA6
Ci0JCQlxaS0+ZHJhbV90eXBlID0gSU5URUxfRFJBTV9ERFI0OwotCQkJYnJlYWs7Ci0JCWNhc2Ug
MzoKLQkJCXFpLT5kcmFtX3R5cGUgPSBJTlRFTF9EUkFNX0xQRERSNDsKLQkJCWJyZWFrOwotCQlj
YXNlIDQ6Ci0JCQlxaS0+ZHJhbV90eXBlID0gSU5URUxfRFJBTV9ERFIzOwotCQkJYnJlYWs7Ci0J
CWNhc2UgNToKLQkJCXFpLT5kcmFtX3R5cGUgPSBJTlRFTF9EUkFNX0xQRERSMzsKLQkJCWJyZWFr
OwotCQlkZWZhdWx0OgotCQkJTUlTU0lOR19DQVNFKHZhbCAmIDB4Zik7Ci0JCQlicmVhazsKLQkJ
fQotCX0gZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCAxMSkpIHsKLQkJc3dpdGNoICh2YWwgJiAw
eGYpIHsKLQkJY2FzZSAwOgotCQkJcWktPmRyYW1fdHlwZSA9IElOVEVMX0RSQU1fRERSNDsKLQkJ
CWJyZWFrOwotCQljYXNlIDE6Ci0JCQlxaS0+ZHJhbV90eXBlID0gSU5URUxfRFJBTV9ERFIzOwot
CQkJYnJlYWs7Ci0JCWNhc2UgMjoKLQkJCXFpLT5kcmFtX3R5cGUgPSBJTlRFTF9EUkFNX0xQRERS
MzsKLQkJCWJyZWFrOwotCQljYXNlIDM6Ci0JCQlxaS0+ZHJhbV90eXBlID0gSU5URUxfRFJBTV9M
UEREUjQ7Ci0JCQlicmVhazsKLQkJZGVmYXVsdDoKLQkJCU1JU1NJTkdfQ0FTRSh2YWwgJiAweGYp
OwotCQkJYnJlYWs7Ci0JCX0KLQl9IGVsc2UgewotCQlNSVNTSU5HX0NBU0UoSU5URUxfR0VOKGRl
dl9wcml2KSk7Ci0JCXFpLT5kcmFtX3R5cGUgPSBJTlRFTF9EUkFNX0xQRERSMzsgLyogQ29uc2Vy
dmF0aXZlIGRlZmF1bHQgKi8KLQl9Ci0KLQlxaS0+bnVtX2NoYW5uZWxzID0gKHZhbCAmIDB4ZjAp
ID4+IDQ7Ci0JcWktPm51bV9wb2ludHMgPSAodmFsICYgMHhmMDApID4+IDg7Ci0KLQlpZiAoSVNf
R0VOKGRldl9wcml2LCAxMikpCi0JCXFpLT50X2JsID0gcWktPmRyYW1fdHlwZSA9PSBJTlRFTF9E
UkFNX0REUjQgPyA0IDogMTY7Ci0JZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCAxMSkpCi0JCXFp
LT50X2JsID0gcWktPmRyYW1fdHlwZSA9PSBJTlRFTF9EUkFNX0REUjQgPyA0IDogODsKLQotCXJl
dHVybiAwOwotfQotCiBzdGF0aWMgaW50IGljbF9wY29kZV9yZWFkX3Fndl9wb2ludF9pbmZvKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJCQkJIHN0cnVjdCBpbnRlbF9xZ3Zf
cG9pbnQgKnNwLAogCQkJCQkgaW50IHBvaW50KQpAQCAtMTM5LDExICs3MiwxNSBAQCBpbnQgaWNs
X3Bjb2RlX3Jlc3RyaWN0X3Fndl9wb2ludHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LAogc3RhdGljIGludCBpY2xfZ2V0X3Fndl9wb2ludHMoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2LAogCQkJICAgICAgc3RydWN0IGludGVsX3Fndl9pbmZvICpxaSkKIHsKKwlj
b25zdCBzdHJ1Y3QgZHJhbV9pbmZvICpkcmFtX2luZm8gPSAmZGV2X3ByaXYtPmRyYW1faW5mbzsK
IAlpbnQgaSwgcmV0OwogCi0JcmV0ID0gaWNsX3Bjb2RlX3JlYWRfbWVtX2dsb2JhbF9pbmZvKGRl
dl9wcml2LCBxaSk7Ci0JaWYgKHJldCkKLQkJcmV0dXJuIHJldDsKKwlxaS0+bnVtX3BvaW50cyA9
IGRyYW1faW5mby0+bnVtX3Fndl9wb2ludHM7CisKKwlpZiAoSVNfR0VOKGRldl9wcml2LCAxMikp
CisJCXFpLT50X2JsID0gZGV2X3ByaXYtPmRyYW1faW5mby50eXBlID09IElOVEVMX0RSQU1fRERS
NCA/IDQgOiAxNjsKKwllbHNlIGlmIChJU19HRU4oZGV2X3ByaXYsIDExKSkKKwkJcWktPnRfYmwg
PSBkZXZfcHJpdi0+ZHJhbV9pbmZvLnR5cGUgPT0gSU5URUxfRFJBTV9ERFI0ID8gNCA6IDg7CiAK
IAlpZiAoZHJtX1dBUk5fT04oJmRldl9wcml2LT5kcm0sCiAJCQlxaS0+bnVtX3BvaW50cyA+IEFS
UkFZX1NJWkUocWktPnBvaW50cykpKQpAQCAtMjA5LDcgKzE0Niw3IEBAIHN0YXRpYyBpbnQgaWNs
X2dldF9id19pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgY29uc3Qgc3Ry
dWN0IGludGVsCiB7CiAJc3RydWN0IGludGVsX3Fndl9pbmZvIHFpID0ge307CiAJYm9vbCBpc195
X3RpbGUgPSB0cnVlOyAvKiBhc3N1bWUgeSB0aWxlIG1heSBiZSB1c2VkICovCi0JaW50IG51bV9j
aGFubmVsczsKKwlpbnQgbnVtX2NoYW5uZWxzID0gZGV2X3ByaXYtPmRyYW1faW5mby5udW1fY2hh
bm5lbHM7CiAJaW50IGRlaW50ZXJsZWF2ZTsKIAlpbnQgaXBxZGVwdGgsIGlwcWRlcHRocGNoOwog
CWludCBkY2xrX21heDsKQEAgLTIyMiw3ICsxNTksNiBAQCBzdGF0aWMgaW50IGljbF9nZXRfYndf
aW5mbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGNvbnN0IHN0cnVjdCBpbnRl
bAogCQkJICAgICJGYWlsZWQgdG8gZ2V0IG1lbW9yeSBzdWJzeXN0ZW0gaW5mb3JtYXRpb24sIGln
bm9yaW5nIGJhbmR3aWR0aCBsaW1pdHMiKTsKIAkJcmV0dXJuIHJldDsKIAl9Ci0JbnVtX2NoYW5u
ZWxzID0gcWkubnVtX2NoYW5uZWxzOwogCiAJZGVpbnRlcmxlYXZlID0gRElWX1JPVU5EX1VQKG51
bV9jaGFubmVscywgaXNfeV90aWxlID8gNCA6IDIpOwogCWRjbGtfbWF4ID0gaWNsX3NhZ3ZfbWF4
X2RjbGsoJnFpKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCmluZGV4IGYyYWE3Mjc1MDU1Yi4uYWRl
YjZiZWU4MzVhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKQEAgLTYxOSwxNCArNjE5LDE1IEBA
IHN0YXRpYyBpbnQgaTkxNV9kcml2ZXJfaHdfcHJvYmUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KQogCQlnb3RvIGVycl9tc2k7CiAKIAlpbnRlbF9vcHJlZ2lvbl9zZXR1cChkZXZf
cHJpdik7CisKKwlpbnRlbF9wY29kZV9pbml0KGRldl9wcml2KTsKKwogCS8qCiAJICogRmlsbCB0
aGUgZHJhbSBzdHJ1Y3R1cmUgdG8gZ2V0IHRoZSBzeXN0ZW0gZHJhbSBpbmZvLiBUaGlzIHdpbGwg
YmUKIAkgKiB1c2VkIGZvciBtZW1vcnkgbGF0ZW5jeSBjYWxjdWxhdGlvbi4KIAkgKi8KIAlpbnRl
bF9kcmFtX2RldGVjdChkZXZfcHJpdik7CiAKLQlpbnRlbF9wY29kZV9pbml0KGRldl9wcml2KTsK
LQogCWludGVsX2J3X2luaXRfaHcoZGV2X3ByaXYpOwogCiAJcmV0dXJuIDA7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kcnYuaAppbmRleCA0ZThlMTUxYzdhZGUuLjgwMjI3ZDQ3YjVjYiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Rydi5oCkBAIC0xMTM4LDYgKzExMzgsNyBAQCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSB7CiAJCQlJTlRFTF9EUkFNX0xQRERSMywKIAkJCUlOVEVMX0RSQU1fTFBERFI0CiAJCX0gdHlw
ZTsKKwkJdTggbnVtX3Fndl9wb2ludHM7CiAJfSBkcmFtX2luZm87CiAKIAlzdHJ1Y3QgaW50ZWxf
YndfaW5mbyB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcmFtLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcmFtLmMKaW5kZXggNjk0ZmJkOGM5Y2Q0Li40
ZDVhYjIwNmVhY2IgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RyYW0u
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcmFtLmMKQEAgLTUsNiArNSw3IEBA
CiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImludGVsX2RyYW0uaCIKKyNpbmNs
dWRlICJpbnRlbF9zaWRlYmFuZC5oIgogCiBzdHJ1Y3QgZHJhbV9kaW1tX2luZm8gewogCXUxNiBz
aXplOwpAQCAtNDA4LDYgKzQwOSw4MSBAQCBzdGF0aWMgaW50IGJ4dF9nZXRfZHJhbV9pbmZvKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCXJldHVybiAwOwogfQogCitzdGF0aWMgaW50
IGljbF9wY29kZV9yZWFkX21lbV9nbG9iYWxfaW5mbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpCit7CisJc3RydWN0IGRyYW1faW5mbyAqZHJhbV9pbmZvID0gJmRldl9wcml2LT5k
cmFtX2luZm87CisJdTMyIHZhbCA9IDA7CisJaW50IHJldDsKKworCXJldCA9IHNhbmR5YnJpZGdl
X3Bjb2RlX3JlYWQoZGV2X3ByaXYsCisJCQkJICAgICBJQ0xfUENPREVfTUVNX1NVQlNZU1lTVEVN
X0lORk8gfAorCQkJCSAgICAgSUNMX1BDT0RFX01FTV9TU19SRUFEX0dMT0JBTF9JTkZPLAorCQkJ
CSAgICAgJnZhbCwgTlVMTCk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCWlmIChJU19H
RU4oZGV2X3ByaXYsIDEyKSkgeworCQlzd2l0Y2ggKHZhbCAmIDB4ZikgeworCQljYXNlIDA6CisJ
CQlkcmFtX2luZm8tPnR5cGUgPSBJTlRFTF9EUkFNX0REUjQ7CisJCQlicmVhazsKKwkJY2FzZSAz
OgorCQkJZHJhbV9pbmZvLT50eXBlID0gSU5URUxfRFJBTV9MUEREUjQ7CisJCQlicmVhazsKKwkJ
Y2FzZSA0OgorCQkJZHJhbV9pbmZvLT50eXBlID0gSU5URUxfRFJBTV9ERFIzOworCQkJYnJlYWs7
CisJCWNhc2UgNToKKwkJCWRyYW1faW5mby0+dHlwZSA9IElOVEVMX0RSQU1fTFBERFIzOworCQkJ
YnJlYWs7CisJCWRlZmF1bHQ6CisJCQlNSVNTSU5HX0NBU0UodmFsICYgMHhmKTsKKwkJCXJldHVy
biAtMTsKKwkJfQorCX0gZWxzZSB7CisJCXN3aXRjaCAodmFsICYgMHhmKSB7CisJCWNhc2UgMDoK
KwkJCWRyYW1faW5mby0+dHlwZSA9IElOVEVMX0RSQU1fRERSNDsKKwkJCWJyZWFrOworCQljYXNl
IDE6CisJCQlkcmFtX2luZm8tPnR5cGUgPSBJTlRFTF9EUkFNX0REUjM7CisJCQlicmVhazsKKwkJ
Y2FzZSAyOgorCQkJZHJhbV9pbmZvLT50eXBlID0gSU5URUxfRFJBTV9MUEREUjM7CisJCQlicmVh
azsKKwkJY2FzZSAzOgorCQkJZHJhbV9pbmZvLT50eXBlID0gSU5URUxfRFJBTV9MUEREUjQ7CisJ
CQlicmVhazsKKwkJZGVmYXVsdDoKKwkJCU1JU1NJTkdfQ0FTRSh2YWwgJiAweGYpOworCQkJcmV0
dXJuIC0xOworCQl9CisJfQorCisJZHJhbV9pbmZvLT5udW1fY2hhbm5lbHMgPSAodmFsICYgMHhm
MCkgPj4gNDsKKwlkcmFtX2luZm8tPm51bV9xZ3ZfcG9pbnRzID0gKHZhbCAmIDB4ZjAwKSA+PiA4
OworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgZ2VuMTFfZ2V0X2RyYW1faW5mbyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKK3sKKwlpbnQgcmV0ID0gc2tsX2dldF9kcmFtX2lu
Zm8oaTkxNSk7CisKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJcmV0dXJuIGljbF9wY29k
ZV9yZWFkX21lbV9nbG9iYWxfaW5mbyhpOTE1KTsKK30KKworc3RhdGljIGludCBnZW4xMl9nZXRf
ZHJhbV9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQoreworCS8qIEFsd2F5cyBu
ZWVkZWQgZm9yIEdFTjEyKyAqLworCWk5MTUtPmRyYW1faW5mby5pc18xNmdiX2RpbW0gPSB0cnVl
OworCisJcmV0dXJuIGljbF9wY29kZV9yZWFkX21lbV9nbG9iYWxfaW5mbyhpOTE1KTsKK30KKwog
dm9pZCBpbnRlbF9kcmFtX2RldGVjdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsK
IAlzdHJ1Y3QgZHJhbV9pbmZvICpkcmFtX2luZm8gPSAmaTkxNS0+ZHJhbV9pbmZvOwpAQCAtNDIz
LDcgKzQ5OSwxMSBAQCB2b2lkIGludGVsX2RyYW1fZGV0ZWN0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1KQogCWlmIChJTlRFTF9HRU4oaTkxNSkgPCA5IHx8ICFIQVNfRElTUExBWShpOTE1
KSkKIAkJcmV0dXJuOwogCi0JaWYgKElTX0dFTjlfTFAoaTkxNSkpCisJaWYgKElOVEVMX0dFTihp
OTE1KSA+PSAxMikKKwkJcmV0ID0gZ2VuMTJfZ2V0X2RyYW1faW5mbyhpOTE1KTsKKwllbHNlIGlm
IChJTlRFTF9HRU4oaTkxNSkgPj0gMTEpCisJCXJldCA9IGdlbjExX2dldF9kcmFtX2luZm8oaTkx
NSk7CisJZWxzZSBpZiAoSVNfR0VOOV9MUChpOTE1KSkKIAkJcmV0ID0gYnh0X2dldF9kcmFtX2lu
Zm8oaTkxNSk7CiAJZWxzZQogCQlyZXQgPSBza2xfZ2V0X2RyYW1faW5mbyhpOTE1KTsKLS0gCjIu
MzAuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50
ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

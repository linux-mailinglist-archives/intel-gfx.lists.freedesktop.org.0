Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 02296D5E33
	for <lists+intel-gfx@lfdr.de>; Mon, 14 Oct 2019 11:08:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 18B746E18F;
	Mon, 14 Oct 2019 09:08:32 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 090246E177
 for <intel-gfx@lists.freedesktop.org>; Mon, 14 Oct 2019 09:08:20 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18828689-1500050 
 for multiple; Mon, 14 Oct 2019 10:08:00 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 14 Oct 2019 10:07:50 +0100
Message-Id: <20191014090757.32111-8-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191014090757.32111-1-chris@chris-wilson.co.uk>
References: <20191014090757.32111-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 08/15] drm/i915: Expose engine properties via
 sysfs
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UHJlbGltaW5hcnkgc3R1YiB0byBhZGQgZW5naW5lcyB1bmRlcm5lYXRoIC9zeXMvY2xhc3MvZHJt
L2NhcmROLywgc28KdGhhdCB3ZSBjYW4gZXhwb3NlIHByb3BlcnRpZXMgb24gZWFjaCBlbmdpbmUg
dG8gdGhlIHN5c2FkbWluLgoKVG8gc3RhcnQgd2l0aCB3ZSBoYXZlIGJhc2ljIGFuYWxvZ3VlcyBv
ZiB0aGUgaTkxNV9xdWVyeSBpb2N0bCBzbyB0aGF0IHdlCmNhbiBwcmV0dHkgcHJpbnQgZW5naW5l
IGRpc2NvdmVyeSBmcm9tIHRoZSBzaGVsbCwgYW5kIGZsZXNoIG91dCB0aGUKZGlyZWN0b3J5IHN0
cnVjdHVyZS4gTGF0ZXIgd2Ugd2lsbCBhZGQgd3JpdGVhYmxlIHN5c2FkbWluIHByb3BlcnRpZXMg
c3VjaAphcyBwZXItZW5naW5lIHRpbWVvdXQgY29udHJvbHMuCgpBbiBleGFtcGxlIHRyZWUgb2Yg
dGhlIGVuZ2luZSBwcm9wZXJ0aWVzIG9uIEJyYXN3ZWxsOgogICAgL3N5cy9jbGFzcy9kcm0vY2Fy
ZDAKICAgIOKUlOKUgOKUgCBlbmdpbmUKICAgICDCoMKgIOKUnOKUgOKUgCBiY3MwCiAgICAgwqDC
oCDilILCoMKgIOKUnOKUgOKUgCBjYXBhYmlsaXRpZXMKICAgICDCoMKgIOKUgsKgwqAg4pSc4pSA
4pSAIGNsYXNzCiAgICAgwqDCoCDilILCoMKgIOKUnOKUgOKUgCBpbnN0YW5jZQogICAgIMKgwqAg
4pSCwqDCoCDilJzilIDilIAga25vd25fY2FwYWJpbGl0aWVzCiAgICAgwqDCoCDilILCoMKgIOKU
lOKUgOKUgCBuYW1lCiAgICAgwqDCoCDilJzilIDilIAgcmNzMAogICAgIMKgwqAg4pSCwqDCoCDi
lJzilIDilIAgY2FwYWJpbGl0aWVzCiAgICAgwqDCoCDilILCoMKgIOKUnOKUgOKUgCBjbGFzcwog
ICAgIMKgwqAg4pSCwqDCoCDilJzilIDilIAgaW5zdGFuY2UKICAgICDCoMKgIOKUgsKgwqAg4pSc
4pSA4pSAIGtub3duX2NhcGFiaWxpdGllcwogICAgIMKgwqAg4pSCwqDCoCDilJTilIDilIAgbmFt
ZQogICAgIMKgwqAg4pSc4pSA4pSAIHZjczAKICAgICDCoMKgIOKUgsKgwqAg4pSc4pSA4pSAIGNh
cGFiaWxpdGllcwogICAgIMKgwqAg4pSCwqDCoCDilJzilIDilIAgY2xhc3MKICAgICDCoMKgIOKU
gsKgwqAg4pSc4pSA4pSAIGluc3RhbmNlCiAgICAgwqDCoCDilILCoMKgIOKUnOKUgOKUgCBrbm93
bl9jYXBhYmlsaXRpZXMKICAgICDCoMKgIOKUgsKgwqAg4pSU4pSA4pSAIG5hbWUKICAgICDCoMKg
IOKUlOKUgOKUgCB2ZWNzMAogICAgIMKgwqAgIMKgwqAg4pSc4pSA4pSAIGNhcGFiaWxpdGllcwog
ICAgIMKgwqAgICAgIOKUnOKUgOKUgCBjbGFzcwogICAgIMKgwqAgICAgIOKUnOKUgOKUgCBpbnN0
YW5jZQogICAgIMKgwqAgIMKgwqAg4pSc4pSA4pSAIGtub3duX2NhcGFiaWxpdGllcwogICAgIMKg
wqAgICAgIOKUlOKUgOKUgCBuYW1lCgp2MjogSW5jbHVkZSBzdHJpbmdpZmllZCBjYXBhYmlsaXRp
ZXMKdjM6IEluY2x1ZGUgYWxsIGtub3duIGNhcGFiaWxpdGllcyBmb3IgZnV0dXJlcHJvb2Zpbmcu
CgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4K
Q2M6IEpvb25hcyBMYWh0aW5lbiA8am9vbmFzLmxhaHRpbmVuQGxpbnV4LmludGVsLmNvbT4KQ2M6
IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+CkNjOiBEYW5pZWxlIENl
cmFvbG8gU3B1cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29tPgpDYzogUm9kcmln
byBWaXZpIDxyb2RyaWdvLnZpdmlAaW50ZWwuY29tPgpBY2tlZC1ieTogUm9kcmlnbyBWaXZpIDxy
b2RyaWdvLnZpdmlAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxl
ICAgICAgICAgICAgICAgIHwgICAzICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfc3lzZnMuYyB8IDIyMyArKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMuaCB8ICAxNCArKwogZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9zeXNmcy5jICAgICAgICAgICAgfCAgIDMgKwogNCBmaWxlcyBjaGFuZ2VkLCAyNDIg
aW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9zeXNmcy5jCiBjcmVhdGUgbW9kZSAxMDA2NDQg
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLmgKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01h
a2VmaWxlCmluZGV4IGU3OTFkOTMyM2I1MS4uY2Q5YTEwYmEyNTE2IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtl
ZmlsZQpAQCAtNzgsOCArNzgsOSBAQCBndC15ICs9IFwKIAlndC9pbnRlbF9icmVhZGNydW1icy5v
IFwKIAlndC9pbnRlbF9jb250ZXh0Lm8gXAogCWd0L2ludGVsX2VuZ2luZV9jcy5vIFwKLQlndC9p
bnRlbF9lbmdpbmVfcG9vbC5vIFwKIAlndC9pbnRlbF9lbmdpbmVfcG0ubyBcCisJZ3QvaW50ZWxf
ZW5naW5lX3Bvb2wubyBcCisJZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLm8gXAogCWd0L2ludGVsX2Vu
Z2luZV91c2VyLm8gXAogCWd0L2ludGVsX2d0Lm8gXAogCWd0L2ludGVsX2d0X2lycS5vIFwKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9zeXNmcy5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLmMKbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi40ZTQwM2ExYjA2OWEKLS0tIC9kZXYvbnVsbAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMuYwpAQCAtMCww
ICsxLDIyMyBAQAorLyoKKyAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKKyAqCisgKiBD
b3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpbmNsdWRlIDxsaW51
eC9rb2JqZWN0Lmg+CisjaW5jbHVkZSA8bGludXgvc3lzZnMuaD4KKworI2luY2x1ZGUgImk5MTVf
ZHJ2LmgiCisjaW5jbHVkZSAiaW50ZWxfZW5naW5lLmgiCisjaW5jbHVkZSAiaW50ZWxfZW5naW5l
X3N5c2ZzLmgiCisKK3N0cnVjdCBrb2JqX2VuZ2luZSB7CisJc3RydWN0IGtvYmplY3QgYmFzZTsK
KwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7Cit9OworCitzdGF0aWMgc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqa29ial90b19lbmdpbmUoc3RydWN0IGtvYmplY3QgKmtvYmopCit7CisJ
cmV0dXJuIGNvbnRhaW5lcl9vZihrb2JqLCBzdHJ1Y3Qga29ial9lbmdpbmUsIGJhc2UpLT5lbmdp
bmU7Cit9CisKK3N0YXRpYyBzc2l6ZV90CituYW1lX3Nob3coc3RydWN0IGtvYmplY3QgKmtvYmos
IHN0cnVjdCBrb2JqX2F0dHJpYnV0ZSAqYXR0ciwgY2hhciAqYnVmKQoreworCXJldHVybiBzcHJp
bnRmKGJ1ZiwgIiVzXG4iLCBrb2JqX3RvX2VuZ2luZShrb2JqKS0+bmFtZSk7Cit9CisKK3N0YXRp
YyBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgbmFtZV9hdHRyID0KK19fQVRUUihuYW1lLCAwNDQ0LCBu
YW1lX3Nob3csIE5VTEwpOworCitzdGF0aWMgc3NpemVfdAorY2xhc3Nfc2hvdyhzdHJ1Y3Qga29i
amVjdCAqa29iaiwgc3RydWN0IGtvYmpfYXR0cmlidXRlICphdHRyLCBjaGFyICpidWYpCit7CisJ
cmV0dXJuIHNwcmludGYoYnVmLCAiJWRcbiIsIGtvYmpfdG9fZW5naW5lKGtvYmopLT51YWJpX2Ns
YXNzKTsKK30KKworc3RhdGljIHN0cnVjdCBrb2JqX2F0dHJpYnV0ZSBjbGFzc19hdHRyID0KK19f
QVRUUihjbGFzcywgMDQ0NCwgY2xhc3Nfc2hvdywgTlVMTCk7CisKK3N0YXRpYyBzc2l6ZV90Citp
bnN0X3Nob3coc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBrb2JqX2F0dHJpYnV0ZSAqYXR0
ciwgY2hhciAqYnVmKQoreworCXJldHVybiBzcHJpbnRmKGJ1ZiwgIiVkXG4iLCBrb2JqX3RvX2Vu
Z2luZShrb2JqKS0+dWFiaV9pbnN0YW5jZSk7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qga29ial9hdHRy
aWJ1dGUgaW5zdF9hdHRyID0KK19fQVRUUihpbnN0YW5jZSwgMDQ0NCwgaW5zdF9zaG93LCBOVUxM
KTsKKworc3RhdGljIGNvbnN0IGNoYXIgKiBjb25zdCB2Y3NfY2Fwc1tdID0geworCVtpbG9nMihJ
OTE1X1ZJREVPX0NMQVNTX0NBUEFCSUxJVFlfSEVWQyldID0gImhldmMiLAorCVtpbG9nMihJOTE1
X1ZJREVPX0FORF9FTkhBTkNFX0NMQVNTX0NBUEFCSUxJVFlfU0ZDKV0gPSAic2ZjIiwKK307Citz
dGF0aWMgY29uc3QgY2hhciAqIGNvbnN0IHZlY3NfY2Fwc1tdID0geworCVtpbG9nMihJOTE1X1ZJ
REVPX0FORF9FTkhBTkNFX0NMQVNTX0NBUEFCSUxJVFlfU0ZDKV0gPSAic2ZjIiwKK307CisKK3N0
YXRpYyBzc2l6ZV90IHJlcHJfdHJpbShjaGFyICpidWYsIHNzaXplX3QgbGVuKQoreworCS8qIFRy
aW0gb2ZmIHRoZSB0cmFpbGluZyBzcGFjZSBhbmQgcmVwbGFjZSB3aXRoIGEgbmV3bGluZSAqLwor
CWlmIChsZW4gPiBQQUdFX1NJWkUpCisJCWxlbiA9IFBBR0VfU0laRTsKKwlpZiAobGVuID4gMCkK
KwkJYnVmW2xlbiAtIDFdID0gJ1xuJzsKKworCXJldHVybiBsZW47Cit9CisKK3N0YXRpYyBzc2l6
ZV90CitjYXBzX3Nob3coc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBrb2JqX2F0dHJpYnV0
ZSAqYXR0ciwgY2hhciAqYnVmKQoreworCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9
IGtvYmpfdG9fZW5naW5lKGtvYmopOworCWNvbnN0IGNoYXIgKiBjb25zdCAqcmVwcjsKKwlpbnQg
bnVtX3JlcHIsIG47CisJc3NpemVfdCBsZW47CisKKwlzd2l0Y2ggKGVuZ2luZS0+Y2xhc3MpIHsK
KwljYXNlIFZJREVPX0RFQ09ERV9DTEFTUzoKKwkJcmVwciA9IHZjc19jYXBzOworCQludW1fcmVw
ciA9IEFSUkFZX1NJWkUodmNzX2NhcHMpOworCQlicmVhazsKKworCWNhc2UgVklERU9fRU5IQU5D
RU1FTlRfQ0xBU1M6CisJCXJlcHIgPSB2ZWNzX2NhcHM7CisJCW51bV9yZXByID0gQVJSQVlfU0la
RSh2ZWNzX2NhcHMpOworCQlicmVhazsKKworCWRlZmF1bHQ6CisJCXJlcHIgPSBOVUxMOworCQlu
dW1fcmVwciA9IDA7CisJCWJyZWFrOworCX0KKworCWxlbiA9IDA7CisJZm9yX2VhY2hfc2V0X2Jp
dChuLAorCQkJICh1bnNpZ25lZCBsb25nICopJmVuZ2luZS0+dWFiaV9jYXBhYmlsaXRpZXMsCisJ
CQkgQklUU19QRVJfVFlQRSh0eXBlb2YoZW5naW5lLT51YWJpX2NhcGFiaWxpdGllcykpKSB7CisJ
CWlmIChHRU1fV0FSTl9PTihuID49IG51bV9yZXByIHx8ICFyZXByW25dKSkKKwkJCWxlbiArPSBz
bnByaW50ZihidWYgKyBsZW4sIFBBR0VfU0laRSAtIGxlbiwKKwkJCQkJIlsleF0gIiwgbik7CisJ
CWVsc2UKKwkJCWxlbiArPSBzbnByaW50ZihidWYgKyBsZW4sIFBBR0VfU0laRSAtIGxlbiwKKwkJ
CQkJIiVzICIsIHJlcHJbbl0pOworCQlpZiAoR0VNX1dBUk5fT04obGVuID49IFBBR0VfU0laRSkp
CisJCQlicmVhazsKKwl9CisJcmV0dXJuIHJlcHJfdHJpbShidWYsIGxlbik7Cit9CisKK3N0YXRp
YyBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgY2Fwc19hdHRyID0KK19fQVRUUihjYXBhYmlsaXRpZXMs
IDA0NDQsIGNhcHNfc2hvdywgTlVMTCk7CisKK3N0YXRpYyBzc2l6ZV90CithbGxfY2Fwc19zaG93
KHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIg
KmJ1ZikKK3sKKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUgPSBrb2JqX3RvX2VuZ2lu
ZShrb2JqKTsKKwljb25zdCBjaGFyICogY29uc3QgKnJlcHI7CisJaW50IG51bV9yZXByLCBuOwor
CXNzaXplX3QgbGVuOworCisJc3dpdGNoIChlbmdpbmUtPmNsYXNzKSB7CisJY2FzZSBWSURFT19E
RUNPREVfQ0xBU1M6CisJCXJlcHIgPSB2Y3NfY2FwczsKKwkJbnVtX3JlcHIgPSBBUlJBWV9TSVpF
KHZjc19jYXBzKTsKKwkJYnJlYWs7CisKKwljYXNlIFZJREVPX0VOSEFOQ0VNRU5UX0NMQVNTOgor
CQlyZXByID0gdmVjc19jYXBzOworCQludW1fcmVwciA9IEFSUkFZX1NJWkUodmVjc19jYXBzKTsK
KwkJYnJlYWs7CisKKwlkZWZhdWx0OgorCQlyZXByID0gTlVMTDsKKwkJbnVtX3JlcHIgPSAwOwor
CQlicmVhazsKKwl9CisKKwlsZW4gPSAwOworCWZvciAobiA9IDA7IG4gPCBudW1fcmVwcjsgbisr
KSB7CisJCWlmICghcmVwcltuXSkKKwkJCWNvbnRpbnVlOworCisJCWxlbiArPSBzbnByaW50Zihi
dWYgKyBsZW4sIFBBR0VfU0laRSAtIGxlbiwgIiVzICIsIHJlcHJbbl0pOworCQlpZiAoR0VNX1dB
Uk5fT04obGVuID49IFBBR0VfU0laRSkpCisJCQlicmVhazsKKwl9CisJcmV0dXJuIHJlcHJfdHJp
bShidWYsIGxlbik7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgYWxsX2NhcHNf
YXR0ciA9CitfX0FUVFIoa25vd25fY2FwYWJpbGl0aWVzLCAwNDQ0LCBhbGxfY2Fwc19zaG93LCBO
VUxMKTsKKworc3RhdGljIHZvaWQga29ial9lbmdpbmVfcmVsZWFzZShzdHJ1Y3Qga29iamVjdCAq
a29iaikKK3sKKwlrZnJlZShrb2JqKTsKK30KKworc3RhdGljIHN0cnVjdCBrb2JqX3R5cGUga29i
al9lbmdpbmVfdHlwZSA9IHsKKwkucmVsZWFzZSA9IGtvYmpfZW5naW5lX3JlbGVhc2UsCisJLnN5
c2ZzX29wcyA9ICZrb2JqX3N5c2ZzX29wcworfTsKKworc3RhdGljIHN0cnVjdCBrb2JqZWN0ICoK
K2tvYmpfZW5naW5lKHN0cnVjdCBrb2JqZWN0ICpkaXIsIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSkKK3sKKwlzdHJ1Y3Qga29ial9lbmdpbmUgKmtlOworCisJa2UgPSBremFsbG9jKHNp
emVvZigqa2UpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIWtlKQorCQlyZXR1cm4gTlVMTDsKKworCWtv
YmplY3RfaW5pdCgma2UtPmJhc2UsICZrb2JqX2VuZ2luZV90eXBlKTsKKwlrZS0+ZW5naW5lID0g
ZW5naW5lOworCisJaWYgKGtvYmplY3RfYWRkKCZrZS0+YmFzZSwgZGlyLCAiJXMiLCBlbmdpbmUt
Pm5hbWUpKSB7CisJCWtvYmplY3RfcHV0KCZrZS0+YmFzZSk7CisJCXJldHVybiBOVUxMOworCX0K
KworCS8qIHhmZXIgb3duZXJzaGlwIHRvIHN5c2ZzIHRyZWUgKi8KKwlyZXR1cm4gJmtlLT5iYXNl
OworfQorCit2b2lkIGludGVsX2VuZ2luZXNfYWRkX3N5c2ZzKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1KQoreworCXN0YXRpYyBjb25zdCBzdHJ1Y3QgYXR0cmlidXRlICpmaWxlc1tdID0g
eworCQkmbmFtZV9hdHRyLmF0dHIsCisJCSZjbGFzc19hdHRyLmF0dHIsCisJCSZpbnN0X2F0dHIu
YXR0ciwKKwkJJmNhcHNfYXR0ci5hdHRyLAorCQkmYWxsX2NhcHNfYXR0ci5hdHRyLAorCQlOVUxM
CisJfTsKKworCXN0cnVjdCBkZXZpY2UgKmtkZXYgPSBpOTE1LT5kcm0ucHJpbWFyeS0+a2RldjsK
KwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7CisJc3RydWN0IGtvYmplY3QgKmRpcjsK
KworCWRpciA9IGtvYmplY3RfY3JlYXRlX2FuZF9hZGQoImVuZ2luZSIsICZrZGV2LT5rb2JqKTsK
KwlpZiAoIWRpcikKKwkJcmV0dXJuOworCisJZm9yX2VhY2hfdWFiaV9lbmdpbmUoZW5naW5lLCBp
OTE1KSB7CisJCXN0cnVjdCBrb2JqZWN0ICprb2JqOworCisJCWtvYmogPSBrb2JqX2VuZ2luZShk
aXIsIGVuZ2luZSk7CisJCWlmICgha29iaikKKwkJCWdvdG8gZXJyX2VuZ2luZTsKKworCQlpZiAo
c3lzZnNfY3JlYXRlX2ZpbGVzKGtvYmosIGZpbGVzKSkKKwkJCWdvdG8gZXJyX29iamVjdDsKKwor
CQlpZiAoMCkgeworZXJyX29iamVjdDoKKwkJCWtvYmplY3RfcHV0KGtvYmopOworZXJyX2VuZ2lu
ZToKKwkJCWRldl9lcnIoa2RldiwgIkZhaWxlZCB0byBhZGQgc3lzZnMgZW5naW5lICclcydcbiIs
CisJCQkJZW5naW5lLT5uYW1lKTsKKwkJCWJyZWFrOworCQl9CisJfQorfQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMuaApuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwMDAwMDAuLmVmNDRhNzQ1YjcwYQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9zeXNmcy5oCkBAIC0wLDAgKzEsMTQgQEAK
Ky8qCisgKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCisgKgorICogQ29weXJpZ2h0IMKp
IDIwMTkgSW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaWZuZGVmIElOVEVMX0VOR0lORV9TWVNG
U19ICisjZGVmaW5lIElOVEVMX0VOR0lORV9TWVNGU19ICisKK3N0cnVjdCBkcm1faTkxNV9wcml2
YXRlOworCit2b2lkIGludGVsX2VuZ2luZXNfYWRkX3N5c2ZzKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1KTsKKworI2VuZGlmIC8qIElOVEVMX0VOR0lORV9TWVNGU19IICovCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3N5c2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X3N5c2ZzLmMKaW5kZXggYmYwMzliOGJhNTkzLi43YjY2NWY2OWYzMDEgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3lzZnMuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3N5c2ZzLmMKQEAgLTMwLDYgKzMwLDcgQEAKICNpbmNsdWRlIDxsaW51
eC9zdGF0Lmg+CiAjaW5jbHVkZSA8bGludXgvc3lzZnMuaD4KIAorI2luY2x1ZGUgImd0L2ludGVs
X2VuZ2luZV9zeXNmcy5oIgogI2luY2x1ZGUgImd0L2ludGVsX3JjNi5oIgogCiAjaW5jbHVkZSAi
aTkxNV9kcnYuaCIKQEAgLTYxNiw2ICs2MTcsOCBAQCB2b2lkIGk5MTVfc2V0dXBfc3lzZnMoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQlEUk1fRVJST1IoIlJQUyBzeXNmcyBz
ZXR1cCBmYWlsZWRcbiIpOwogCiAJaTkxNV9zZXR1cF9lcnJvcl9jYXB0dXJlKGtkZXYpOworCisJ
aW50ZWxfZW5naW5lc19hZGRfc3lzZnMoZGV2X3ByaXYpOwogfQogCiB2b2lkIGk5MTVfdGVhcmRv
d25fc3lzZnMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQotLSAKMi4yMy4wCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

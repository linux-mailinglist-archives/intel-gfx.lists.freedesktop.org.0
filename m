Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B495C4E87E
	for <lists+intel-gfx@lfdr.de>; Fri, 21 Jun 2019 15:07:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DB4DD6E8B2;
	Fri, 21 Jun 2019 13:07:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 014416E863
 for <intel-gfx@lists.freedesktop.org>; Fri, 21 Jun 2019 13:07:27 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16979309-1500050 
 for multiple; Fri, 21 Jun 2019 14:05:47 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 21 Jun 2019 14:05:44 +0100
Message-Id: <20190621130544.24226-5-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190621130544.24226-1-chris@chris-wilson.co.uk>
References: <20190621130544.24226-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 5/5] drm/i915: Local debug BUG_ON for
 intel_wakeref
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: matthew.auld@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXZvaWQgcHVsbGluZyBpbiBpOTE1X2dlbS5oIGp1c3Qgc28gdGhhdCB3ZSBjYW4gdXNlIGEgY29u
ZGl0aW9uYWwgQlVHX09OCmZvciBkZWJ1Z2dpbmcuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxz
b24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9p
bnRlbF93YWtlcmVmLmMgfCA5ICsrKysrLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
d2FrZXJlZi5oIHwgNyArKysrKysrCiAyIGZpbGVzIGNoYW5nZWQsIDEyIGluc2VydGlvbnMoKyks
IDQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
d2FrZXJlZi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfd2FrZXJlZi5jCmluZGV4IDNk
YjZmYTY4MjgyMy4uMDZiZDhiMjE1Y2MyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pbnRlbF93YWtlcmVmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfd2FrZXJl
Zi5jCkBAIC01LDcgKzUsNyBAQAogICovCiAKICNpbmNsdWRlICJpbnRlbF9ydW50aW1lX3BtLmgi
Ci0jaW5jbHVkZSAiaTkxNV9nZW0uaCIKKyNpbmNsdWRlICJpbnRlbF93YWtlcmVmLmgiCiAKIHN0
YXRpYyB2b2lkIHJwbV9nZXQoc3RydWN0IGludGVsX3J1bnRpbWVfcG0gKnJwbSwgc3RydWN0IGlu
dGVsX3dha2VyZWYgKndmKQogewpAQCAtMTcsNyArMTcsNyBAQCBzdGF0aWMgdm9pZCBycG1fcHV0
KHN0cnVjdCBpbnRlbF9ydW50aW1lX3BtICpycG0sIHN0cnVjdCBpbnRlbF93YWtlcmVmICp3ZikK
IAlpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZiA9IGZldGNoX2FuZF96ZXJvKCZ3Zi0+d2FrZXJlZik7
CiAKIAlpbnRlbF9ydW50aW1lX3BtX3B1dChycG0sIHdha2VyZWYpOwotCUdFTV9CVUdfT04oIXdh
a2VyZWYpOworCUlOVEVMX1dBS0VSRUZfQlVHX09OKCF3YWtlcmVmKTsKIH0KIAogaW50IF9faW50
ZWxfd2FrZXJlZl9nZXRfZmlyc3Qoc3RydWN0IGludGVsX3J1bnRpbWVfcG0gKnJwbSwKQEAgLTQ4
LDYgKzQ4LDcgQEAgaW50IF9faW50ZWxfd2FrZXJlZl9nZXRfZmlyc3Qoc3RydWN0IGludGVsX3J1
bnRpbWVfcG0gKnJwbSwKIAlhdG9taWNfaW5jKCZ3Zi0+Y291bnQpOwogCW11dGV4X3VubG9jaygm
d2YtPm11dGV4KTsKIAorCUlOVEVMX1dBS0VSRUZfQlVHX09OKGF0b21pY19yZWFkKCZ3Zi0+Y291
bnQpIDw9IDApOwogCXJldHVybiAwOwogfQogCkBAIC0xMTUsNyArMTE2LDcgQEAgdm9pZCBpbnRl
bF93YWtlcmVmX2F1dG8oc3RydWN0IGludGVsX3dha2VyZWZfYXV0byAqd2YsIHVuc2lnbmVkIGxv
bmcgdGltZW91dCkKIAlpZiAoIXJlZmNvdW50X2luY19ub3RfemVybygmd2YtPmNvdW50KSkgewog
CQlzcGluX2xvY2tfaXJxc2F2ZSgmd2YtPmxvY2ssIGZsYWdzKTsKIAkJaWYgKCFyZWZjb3VudF9p
bmNfbm90X3plcm8oJndmLT5jb3VudCkpIHsKLQkJCUdFTV9CVUdfT04od2YtPndha2VyZWYpOwor
CQkJSU5URUxfV0FLRVJFRl9CVUdfT04od2YtPndha2VyZWYpOwogCQkJd2YtPndha2VyZWYgPSBp
bnRlbF9ydW50aW1lX3BtX2dldF9pZl9pbl91c2Uod2YtPnJwbSk7CiAJCQlyZWZjb3VudF9zZXQo
JndmLT5jb3VudCwgMSk7CiAJCX0KQEAgLTEzNCw1ICsxMzUsNSBAQCB2b2lkIGludGVsX3dha2Vy
ZWZfYXV0byhzdHJ1Y3QgaW50ZWxfd2FrZXJlZl9hdXRvICp3ZiwgdW5zaWduZWQgbG9uZyB0aW1l
b3V0KQogdm9pZCBpbnRlbF93YWtlcmVmX2F1dG9fZmluaShzdHJ1Y3QgaW50ZWxfd2FrZXJlZl9h
dXRvICp3ZikKIHsKIAlpbnRlbF93YWtlcmVmX2F1dG8od2YsIDApOwotCUdFTV9CVUdfT04od2Yt
Pndha2VyZWYpOworCUlOVEVMX1dBS0VSRUZfQlVHX09OKHdmLT53YWtlcmVmKTsKIH0KZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3dha2VyZWYuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX3dha2VyZWYuaAppbmRleCA5Y2JiMmViZjU3NWIuLmQ0NWU3ODYzOWRj
NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfd2FrZXJlZi5oCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3dha2VyZWYuaApAQCAtMTMsNiArMTMsMTIgQEAK
ICNpbmNsdWRlIDxsaW51eC9zdGFja2RlcG90Lmg+CiAjaW5jbHVkZSA8bGludXgvdGltZXIuaD4K
IAorI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1X0RFQlVHKQorI2RlZmluZSBJTlRFTF9X
QUtFUkVGX0JVR19PTihleHByKSBCVUdfT04oZXhwcikKKyNlbHNlCisjZGVmaW5lIElOVEVMX1dB
S0VSRUZfQlVHX09OKGV4cHIpIEJVSUxEX0JVR19PTl9JTlZBTElEKGV4cHIpCisjZW5kaWYKKwog
c3RydWN0IGludGVsX3J1bnRpbWVfcG07CiAKIHR5cGVkZWYgZGVwb3Rfc3RhY2tfaGFuZGxlX3Qg
aW50ZWxfd2FrZXJlZl90OwpAQCAtODYsNiArOTIsNyBAQCBpbnRlbF93YWtlcmVmX3B1dChzdHJ1
Y3QgaW50ZWxfcnVudGltZV9wbSAqcnBtLAogCQkgIHN0cnVjdCBpbnRlbF93YWtlcmVmICp3ZiwK
IAkJICBpbnQgKCpmbikoc3RydWN0IGludGVsX3dha2VyZWYgKndmKSkKIHsKKwlJTlRFTF9XQUtF
UkVGX0JVR19PTihhdG9taWNfcmVhZCgmd2YtPmNvdW50KSA8PSAwKTsKIAlpZiAoYXRvbWljX2Rl
Y19hbmRfbXV0ZXhfbG9jaygmd2YtPmNvdW50LCAmd2YtPm11dGV4KSkKIAkJcmV0dXJuIF9faW50
ZWxfd2FrZXJlZl9wdXRfbGFzdChycG0sIHdmLCBmbik7CiAKLS0gCjIuMjAuMQoKX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcg
bGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRl
c2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

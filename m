Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 36B0117349
	for <lists+intel-gfx@lfdr.de>; Wed,  8 May 2019 10:09:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 667E389622;
	Wed,  8 May 2019 08:09:31 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5EA15895D7
 for <intel-gfx@lists.freedesktop.org>; Wed,  8 May 2019 08:09:21 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16485900-1500050 
 for multiple; Wed, 08 May 2019 09:07:06 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  8 May 2019 09:06:25 +0100
Message-Id: <20190508080704.24223-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 01/40] drm/i915/hangcheck: Replace
 hangcheck.seqno with RING_HEAD
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWZ0ZXIgcmVhbGlzaW5nIHdlIG5lZWQgdG8gc2FtcGxlIFJJTkdfU1RBUlQgdG8gZGV0ZWN0IGNv
bnRleHQgc3dpdGNoZXMKZnJvbSBwcmVlbXB0aW9uIGV2ZW50cyB0aGF0IGRvIG5vdCBhbGxvdyBm
b3IgdGhlIHNlcW5vIHRvIGFkdmFuY2UsIHdlCmNhbiBhbHNvIHJlYWxpc2UgdGhhdCB0aGUgc2Vx
bm8gaXRzZWxmIGlzIGp1c3QgYSBkaXN0YW5jZSBhbG9uZyB0aGUgcmluZwphbmQgc28gY2FuIGJl
IHJlcGxhY2VkIGJ5IHNhbXBsaW5nIFJJTkdfSEVBRC4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdp
bHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogTWlrYSBLdW9wcGFsYSA8bWlrYS5r
dW9wcGFsYUBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lLmggICAgICAgfCAxNSAtLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZV9jcy5jICAgIHwgIDUgKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9lbmdpbmVfdHlwZXMuaCB8ICAzICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9oYW5nY2hlY2suYyAgICB8ICA4ICsrLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9scmMuYyAgICAgICAgICB8IDE5ICsrKy0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfcmluZ2J1ZmZlci5jICAgfCAzMiArKy0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgICAgICAgICAgfCAxMiArKy0tLS0tLQogNyBm
aWxlcyBjaGFuZ2VkLCAxNyBpbnNlcnRpb25zKCspLCA3NyBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oCmluZGV4IDA2ZDc4NTUzMzUwMi4uOTM1OWIzYTdh
ZDljIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaApAQCAtMjE1LDggKzIx
NSw2IEBAIGludGVsX3dyaXRlX3N0YXR1c19wYWdlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSwgaW50IHJlZywgdTMyIHZhbHVlKQogICovCiAjZGVmaW5lIEk5MTVfR0VNX0hXU19QUkVF
TVBUCQkweDMyCiAjZGVmaW5lIEk5MTVfR0VNX0hXU19QUkVFTVBUX0FERFIJKEk5MTVfR0VNX0hX
U19QUkVFTVBUICogc2l6ZW9mKHUzMikpCi0jZGVmaW5lIEk5MTVfR0VNX0hXU19IQU5HQ0hFQ0sJ
CTB4MzQKLSNkZWZpbmUgSTkxNV9HRU1fSFdTX0hBTkdDSEVDS19BRERSCShJOTE1X0dFTV9IV1Nf
SEFOR0NIRUNLICogc2l6ZW9mKHUzMikpCiAjZGVmaW5lIEk5MTVfR0VNX0hXU19TRVFOTwkJMHg0
MAogI2RlZmluZSBJOTE1X0dFTV9IV1NfU0VRTk9fQUREUgkJKEk5MTVfR0VNX0hXU19TRVFOTyAq
IHNpemVvZih1MzIpKQogI2RlZmluZSBJOTE1X0dFTV9IV1NfU0NSQVRDSAkJMHg4MApAQCAtNTQ4
LDE3ICs1NDYsNCBAQCBzdGF0aWMgaW5saW5lIGJvb2wgaW5qZWN0X3ByZWVtcHRfaGFuZyhzdHJ1
Y3QgaW50ZWxfZW5naW5lX2V4ZWNsaXN0cyAqZXhlY2xpc3RzKQogCiAjZW5kaWYKIAotc3RhdGlj
IGlubGluZSB1MzIKLWludGVsX2VuZ2luZV9uZXh0X2hhbmdjaGVja19zZXFubyhzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzICplbmdpbmUpCi17Ci0JcmV0dXJuIGVuZ2luZS0+aGFuZ2NoZWNrLm5leHRf
c2Vxbm8gPQotCQluZXh0X3BzZXVkb19yYW5kb20zMihlbmdpbmUtPmhhbmdjaGVjay5uZXh0X3Nl
cW5vKTsKLX0KLQotc3RhdGljIGlubGluZSB1MzIKLWludGVsX2VuZ2luZV9nZXRfaGFuZ2NoZWNr
X3NlcW5vKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKLXsKLQlyZXR1cm4gaW50ZWxf
cmVhZF9zdGF0dXNfcGFnZShlbmdpbmUsIEk5MTVfR0VNX0hXU19IQU5HQ0hFQ0spOwotfQotCiAj
ZW5kaWYgLyogX0lOVEVMX1JJTkdCVUZGRVJfSF8gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfZW5naW5lX2NzLmMKaW5kZXggNDE2ZDdlMmU2ZjhjLi40YzM3NTNjMWI1NzMgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCkBAIC03MjEsNiArNzIxLDcg
QEAgc3RhdGljIGludCBtZWFzdXJlX2JyZWFkY3J1bWJfZHcoc3RydWN0IGludGVsX2VuZ2luZV9j
cyAqZW5naW5lKQogCQlnb3RvIG91dF90aW1lbGluZTsKIAogCWR3ID0gZW5naW5lLT5lbWl0X2Zp
bmlfYnJlYWRjcnVtYigmZnJhbWUtPnJxLCBmcmFtZS0+Y3MpIC0gZnJhbWUtPmNzOworCUdFTV9C
VUdfT04oZHcgJiAxKTsgLyogUklOR19UQUlMIG11c3QgYmUgcXdvcmQgYWxpZ25lZCAqLwogCiAJ
aTkxNV90aW1lbGluZV91bnBpbigmZnJhbWUtPnRpbWVsaW5lKTsKIApAQCAtMTQ0NCw5ICsxNDQ1
LDcgQEAgdm9pZCBpbnRlbF9lbmdpbmVfZHVtcChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdp
bmUsCiAJCWRybV9wcmludGYobSwgIioqKiBXRURHRUQgKioqXG4iKTsKIAogCWRybV9wcmludGYo
bSwgIlx0QXdha2U/ICVkXG4iLCBhdG9taWNfcmVhZCgmZW5naW5lLT53YWtlcmVmLmNvdW50KSk7
Ci0JZHJtX3ByaW50ZihtLCAiXHRIYW5nY2hlY2sgJXg6JXggWyVkIG1zXVxuIiwKLQkJICAgZW5n
aW5lLT5oYW5nY2hlY2subGFzdF9zZXFubywKLQkJICAgZW5naW5lLT5oYW5nY2hlY2submV4dF9z
ZXFubywKKwlkcm1fcHJpbnRmKG0sICJcdEhhbmdjaGVjazogJWQgbXMgYWdvXG4iLAogCQkgICBq
aWZmaWVzX3RvX21zZWNzKGppZmZpZXMgLSBlbmdpbmUtPmhhbmdjaGVjay5hY3Rpb25fdGltZXN0
YW1wKSk7CiAJZHJtX3ByaW50ZihtLCAiXHRSZXNldCBjb3VudDogJWQgKGdsb2JhbCAlZClcbiIs
CiAJCSAgIGk5MTVfcmVzZXRfZW5naW5lX2NvdW50KGVycm9yLCBlbmdpbmUpLApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmggYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAppbmRleCBjMGFiMTFiMTJlMTQu
LmUzODFjMWM3MzkwMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
ZW5naW5lX3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5l
X3R5cGVzLmgKQEAgLTU0LDggKzU0LDcgQEAgc3RydWN0IGludGVsX2luc3Rkb25lIHsKIHN0cnVj
dCBpbnRlbF9lbmdpbmVfaGFuZ2NoZWNrIHsKIAl1NjQgYWN0aGQ7CiAJdTMyIGxhc3RfcmluZzsK
LQl1MzIgbGFzdF9zZXFubzsKLQl1MzIgbmV4dF9zZXFubzsKKwl1MzIgbGFzdF9oZWFkOwogCXVu
c2lnbmVkIGxvbmcgYWN0aW9uX3RpbWVzdGFtcDsKIAlzdHJ1Y3QgaW50ZWxfaW5zdGRvbmUgaW5z
dGRvbmU7CiB9OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfaGFu
Z2NoZWNrLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9oYW5nY2hlY2suYwppbmRl
eCA3MjFhYjc0YTM4MmYuLjNhNGQwOWI4MGZhMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfaGFuZ2NoZWNrLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfaGFuZ2NoZWNrLmMKQEAgLTI4LDcgKzI4LDcgQEAKIHN0cnVjdCBoYW5nY2hlY2sgewog
CXU2NCBhY3RoZDsKIAl1MzIgcmluZzsKLQl1MzIgc2Vxbm87CisJdTMyIGhlYWQ7CiAJZW51bSBp
bnRlbF9lbmdpbmVfaGFuZ2NoZWNrX2FjdGlvbiBhY3Rpb247CiAJdW5zaWduZWQgbG9uZyBhY3Rp
b25fdGltZXN0YW1wOwogCWludCBkZWFkbG9jazsKQEAgLTEzNCwxNiArMTM0LDE2IEBAIHN0YXRp
YyB2b2lkIGhhbmdjaGVja19sb2FkX3NhbXBsZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdp
bmUsCiAJCQkJICBzdHJ1Y3QgaGFuZ2NoZWNrICpoYykKIHsKIAloYy0+YWN0aGQgPSBpbnRlbF9l
bmdpbmVfZ2V0X2FjdGl2ZV9oZWFkKGVuZ2luZSk7Ci0JaGMtPnNlcW5vID0gaW50ZWxfZW5naW5l
X2dldF9oYW5nY2hlY2tfc2Vxbm8oZW5naW5lKTsKIAloYy0+cmluZyA9IEVOR0lORV9SRUFEKGVu
Z2luZSwgUklOR19TVEFSVCk7CisJaGMtPmhlYWQgPSBFTkdJTkVfUkVBRChlbmdpbmUsIFJJTkdf
SEVBRCk7CiB9CiAKIHN0YXRpYyB2b2lkIGhhbmdjaGVja19zdG9yZV9zYW1wbGUoc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCQkJCSAgIGNvbnN0IHN0cnVjdCBoYW5nY2hlY2sgKmhj
KQogewogCWVuZ2luZS0+aGFuZ2NoZWNrLmFjdGhkID0gaGMtPmFjdGhkOwotCWVuZ2luZS0+aGFu
Z2NoZWNrLmxhc3Rfc2Vxbm8gPSBoYy0+c2Vxbm87CiAJZW5naW5lLT5oYW5nY2hlY2subGFzdF9y
aW5nID0gaGMtPnJpbmc7CisJZW5naW5lLT5oYW5nY2hlY2subGFzdF9oZWFkID0gaGMtPmhlYWQ7
CiB9CiAKIHN0YXRpYyBlbnVtIGludGVsX2VuZ2luZV9oYW5nY2hlY2tfYWN0aW9uCkBAIC0xNTYs
NyArMTU2LDcgQEAgaGFuZ2NoZWNrX2dldF9hY3Rpb24oc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lLAogCWlmIChlbmdpbmUtPmhhbmdjaGVjay5sYXN0X3JpbmcgIT0gaGMtPnJpbmcpCiAJ
CXJldHVybiBFTkdJTkVfQUNUSVZFX1NFUU5POwogCi0JaWYgKGVuZ2luZS0+aGFuZ2NoZWNrLmxh
c3Rfc2Vxbm8gIT0gaGMtPnNlcW5vKQorCWlmIChlbmdpbmUtPmhhbmdjaGVjay5sYXN0X2hlYWQg
IT0gaGMtPmhlYWQpCiAJCXJldHVybiBFTkdJTkVfQUNUSVZFX1NFUU5POwogCiAJcmV0dXJuIGVu
Z2luZV9zdHVjayhlbmdpbmUsIGhjLT5hY3RoZCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xy
Yy5jCmluZGV4IGQxYTU0ZDJjM2Q1ZC4uZjFkNjI3NDZlMDY2IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9scmMuYwpAQCAtMjI3NSwxMiArMjI3NSw2IEBAIHN0YXRpYyB1MzIgKmdlbjhfZW1p
dF9maW5pX2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCwgdTMyICpjcykK
IAkJCQkgIHJlcXVlc3QtPnRpbWVsaW5lLT5od3NwX29mZnNldCwKIAkJCQkgIDApOwogCi0JY3Mg
PSBnZW44X2VtaXRfZ2d0dF93cml0ZShjcywKLQkJCQkgIGludGVsX2VuZ2luZV9uZXh0X2hhbmdj
aGVja19zZXFubyhyZXF1ZXN0LT5lbmdpbmUpLAotCQkJCSAgSTkxNV9HRU1fSFdTX0hBTkdDSEVD
S19BRERSLAotCQkJCSAgTUlfRkxVU0hfRFdfU1RPUkVfSU5ERVgpOwotCi0KIAkqY3MrKyA9IE1J
X1VTRVJfSU5URVJSVVBUOwogCSpjcysrID0gTUlfQVJCX09OX09GRiB8IE1JX0FSQl9FTkFCTEU7
CiAKQEAgLTIyOTcsMTQgKzIyOTEsMTEgQEAgc3RhdGljIHUzMiAqZ2VuOF9lbWl0X2ZpbmlfYnJl
YWRjcnVtYl9yY3Moc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCwgdTMyICpjcykKIAkJCQkg
ICAgICByZXF1ZXN0LT50aW1lbGluZS0+aHdzcF9vZmZzZXQsCiAJCQkJICAgICAgUElQRV9DT05U
Uk9MX1JFTkRFUl9UQVJHRVRfQ0FDSEVfRkxVU0ggfAogCQkJCSAgICAgIFBJUEVfQ09OVFJPTF9E
RVBUSF9DQUNIRV9GTFVTSCB8Ci0JCQkJICAgICAgUElQRV9DT05UUk9MX0RDX0ZMVVNIX0VOQUJM
RSB8Ci0JCQkJICAgICAgUElQRV9DT05UUk9MX0ZMVVNIX0VOQUJMRSB8Ci0JCQkJICAgICAgUElQ
RV9DT05UUk9MX0NTX1NUQUxMKTsKLQotCWNzID0gZ2VuOF9lbWl0X2dndHRfd3JpdGVfcmNzKGNz
LAotCQkJCSAgICAgIGludGVsX2VuZ2luZV9uZXh0X2hhbmdjaGVja19zZXFubyhyZXF1ZXN0LT5l
bmdpbmUpLAotCQkJCSAgICAgIEk5MTVfR0VNX0hXU19IQU5HQ0hFQ0tfQUREUiwKLQkJCQkgICAg
ICBQSVBFX0NPTlRST0xfU1RPUkVfREFUQV9JTkRFWCk7CisJCQkJICAgICAgUElQRV9DT05UUk9M
X0RDX0ZMVVNIX0VOQUJMRSk7CisJY3MgPSBnZW44X2VtaXRfcGlwZV9jb250cm9sKGNzLAorCQkJ
CSAgICBQSVBFX0NPTlRST0xfRkxVU0hfRU5BQkxFIHwKKwkJCQkgICAgUElQRV9DT05UUk9MX0NT
X1NUQUxMLAorCQkJCSAgICAwKTsKIAogCSpjcysrID0gTUlfVVNFUl9JTlRFUlJVUFQ7CiAJKmNz
KysgPSBNSV9BUkJfT05fT0ZGIHwgTUlfQVJCX0VOQUJMRTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX3JpbmdidWZmZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX3JpbmdidWZmZXIuYwppbmRleCA2ZmJjNWRkYmM4OTYuLmYwZDYwYWZmZGJhMyAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ2J1ZmZlci5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3JpbmdidWZmZXIuYwpAQCAtMzA5LDEx
ICszMDksNiBAQCBzdGF0aWMgdTMyICpnZW42X3Jjc19lbWl0X2JyZWFkY3J1bWIoc3RydWN0IGk5
MTVfcmVxdWVzdCAqcnEsIHUzMiAqY3MpCiAJKmNzKysgPSBycS0+dGltZWxpbmUtPmh3c3Bfb2Zm
c2V0IHwgUElQRV9DT05UUk9MX0dMT0JBTF9HVFQ7CiAJKmNzKysgPSBycS0+ZmVuY2Uuc2Vxbm87
CiAKLQkqY3MrKyA9IEdGWF9PUF9QSVBFX0NPTlRST0woNCk7Ci0JKmNzKysgPSBQSVBFX0NPTlRS
T0xfUVdfV1JJVEUgfCBQSVBFX0NPTlRST0xfU1RPUkVfREFUQV9JTkRFWDsKLQkqY3MrKyA9IEk5
MTVfR0VNX0hXU19IQU5HQ0hFQ0tfQUREUiB8IFBJUEVfQ09OVFJPTF9HTE9CQUxfR1RUOwotCSpj
cysrID0gaW50ZWxfZW5naW5lX25leHRfaGFuZ2NoZWNrX3NlcW5vKHJxLT5lbmdpbmUpOwotCiAJ
KmNzKysgPSBNSV9VU0VSX0lOVEVSUlVQVDsKIAkqY3MrKyA9IE1JX05PT1A7CiAKQEAgLTQxNSwx
MyArNDEwLDYgQEAgc3RhdGljIHUzMiAqZ2VuN19yY3NfZW1pdF9icmVhZGNydW1iKHN0cnVjdCBp
OTE1X3JlcXVlc3QgKnJxLCB1MzIgKmNzKQogCSpjcysrID0gcnEtPnRpbWVsaW5lLT5od3NwX29m
ZnNldDsKIAkqY3MrKyA9IHJxLT5mZW5jZS5zZXFubzsKIAotCSpjcysrID0gR0ZYX09QX1BJUEVf
Q09OVFJPTCg0KTsKLQkqY3MrKyA9IChQSVBFX0NPTlRST0xfUVdfV1JJVEUgfAotCQkgUElQRV9D
T05UUk9MX1NUT1JFX0RBVEFfSU5ERVggfAotCQkgUElQRV9DT05UUk9MX0dMT0JBTF9HVFRfSVZC
KTsKLQkqY3MrKyA9IEk5MTVfR0VNX0hXU19IQU5HQ0hFQ0tfQUREUjsKLQkqY3MrKyA9IGludGVs
X2VuZ2luZV9uZXh0X2hhbmdjaGVja19zZXFubyhycS0+ZW5naW5lKTsKLQogCSpjcysrID0gTUlf
VVNFUl9JTlRFUlJVUFQ7CiAJKmNzKysgPSBNSV9OT09QOwogCkBAIC00NDAsMTIgKzQyOCw3IEBA
IHN0YXRpYyB1MzIgKmdlbjZfeGNzX2VtaXRfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0
ICpycSwgdTMyICpjcykKIAkqY3MrKyA9IEk5MTVfR0VNX0hXU19TRVFOT19BRERSIHwgTUlfRkxV
U0hfRFdfVVNFX0dUVDsKIAkqY3MrKyA9IHJxLT5mZW5jZS5zZXFubzsKIAotCSpjcysrID0gTUlf
RkxVU0hfRFcgfCBNSV9GTFVTSF9EV19PUF9TVE9SRURXIHwgTUlfRkxVU0hfRFdfU1RPUkVfSU5E
RVg7Ci0JKmNzKysgPSBJOTE1X0dFTV9IV1NfSEFOR0NIRUNLX0FERFIgfCBNSV9GTFVTSF9EV19V
U0VfR1RUOwotCSpjcysrID0gaW50ZWxfZW5naW5lX25leHRfaGFuZ2NoZWNrX3NlcW5vKHJxLT5l
bmdpbmUpOwotCiAJKmNzKysgPSBNSV9VU0VSX0lOVEVSUlVQVDsKLQkqY3MrKyA9IE1JX05PT1A7
CiAKIAlycS0+dGFpbCA9IGludGVsX3Jpbmdfb2Zmc2V0KHJxLCBjcyk7CiAJYXNzZXJ0X3Jpbmdf
dGFpbF92YWxpZChycS0+cmluZywgcnEtPnRhaWwpOwpAQCAtNDY1LDEwICs0NDgsNiBAQCBzdGF0
aWMgdTMyICpnZW43X3hjc19lbWl0X2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEs
IHUzMiAqY3MpCiAJKmNzKysgPSBJOTE1X0dFTV9IV1NfU0VRTk9fQUREUiB8IE1JX0ZMVVNIX0RX
X1VTRV9HVFQ7CiAJKmNzKysgPSBycS0+ZmVuY2Uuc2Vxbm87CiAKLQkqY3MrKyA9IE1JX0ZMVVNI
X0RXIHwgTUlfRkxVU0hfRFdfT1BfU1RPUkVEVyB8IE1JX0ZMVVNIX0RXX1NUT1JFX0lOREVYOwot
CSpjcysrID0gSTkxNV9HRU1fSFdTX0hBTkdDSEVDS19BRERSIHwgTUlfRkxVU0hfRFdfVVNFX0dU
VDsKLQkqY3MrKyA9IGludGVsX2VuZ2luZV9uZXh0X2hhbmdjaGVja19zZXFubyhycS0+ZW5naW5l
KTsKLQogCWZvciAoaSA9IDA7IGkgPCBHRU43X1hDU19XQTsgaSsrKSB7CiAJCSpjcysrID0gTUlf
U1RPUkVfRFdPUkRfSU5ERVg7CiAJCSpjcysrID0gSTkxNV9HRU1fSFdTX1NFUU5PX0FERFI7CkBA
IC00ODAsNiArNDU5LDcgQEAgc3RhdGljIHUzMiAqZ2VuN194Y3NfZW1pdF9icmVhZGNydW1iKHN0
cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCB1MzIgKmNzKQogCSpjcysrID0gMDsKIAogCSpjcysrID0g
TUlfVVNFUl9JTlRFUlJVUFQ7CisJKmNzKysgPSBNSV9OT09QOwogCiAJcnEtPnRhaWwgPSBpbnRl
bF9yaW5nX29mZnNldChycSwgY3MpOwogCWFzc2VydF9yaW5nX3RhaWxfdmFsaWQocnEtPnJpbmcs
IHJxLT50YWlsKTsKQEAgLTkyOCwxMSArOTA4LDggQEAgc3RhdGljIHUzMiAqaTl4eF9lbWl0X2Jy
ZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsIHUzMiAqY3MpCiAJKmNzKysgPSBJOTE1
X0dFTV9IV1NfU0VRTk9fQUREUjsKIAkqY3MrKyA9IHJxLT5mZW5jZS5zZXFubzsKIAotCSpjcysr
ID0gTUlfU1RPUkVfRFdPUkRfSU5ERVg7Ci0JKmNzKysgPSBJOTE1X0dFTV9IV1NfSEFOR0NIRUNL
X0FERFI7Ci0JKmNzKysgPSBpbnRlbF9lbmdpbmVfbmV4dF9oYW5nY2hlY2tfc2Vxbm8ocnEtPmVu
Z2luZSk7Ci0KIAkqY3MrKyA9IE1JX1VTRVJfSU5URVJSVVBUOworCSpjcysrID0gTUlfTk9PUDsK
IAogCXJxLT50YWlsID0gaW50ZWxfcmluZ19vZmZzZXQocnEsIGNzKTsKIAlhc3NlcnRfcmluZ190
YWlsX3ZhbGlkKHJxLT5yaW5nLCBycS0+dGFpbCk7CkBAIC05NTAsMTAgKzkyNyw2IEBAIHN0YXRp
YyB1MzIgKmdlbjVfZW1pdF9icmVhZGNydW1iKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCB1MzIg
KmNzKQogCiAJKmNzKysgPSBNSV9GTFVTSDsKIAotCSpjcysrID0gTUlfU1RPUkVfRFdPUkRfSU5E
RVg7Ci0JKmNzKysgPSBJOTE1X0dFTV9IV1NfSEFOR0NIRUNLX0FERFI7Ci0JKmNzKysgPSBpbnRl
bF9lbmdpbmVfbmV4dF9oYW5nY2hlY2tfc2Vxbm8ocnEtPmVuZ2luZSk7Ci0KIAlCVUlMRF9CVUdf
T04oR0VONV9XQV9TVE9SRVMgPCAxKTsKIAlmb3IgKGkgPSAwOyBpIDwgR0VONV9XQV9TVE9SRVM7
IGkrKykgewogCQkqY3MrKyA9IE1JX1NUT1JFX0RXT1JEX0lOREVYOwpAQCAtOTYyLDcgKzkzNSw2
IEBAIHN0YXRpYyB1MzIgKmdlbjVfZW1pdF9icmVhZGNydW1iKHN0cnVjdCBpOTE1X3JlcXVlc3Qg
KnJxLCB1MzIgKmNzKQogCX0KIAogCSpjcysrID0gTUlfVVNFUl9JTlRFUlJVUFQ7Ci0JKmNzKysg
PSBNSV9OT09QOwogCiAJcnEtPnRhaWwgPSBpbnRlbF9yaW5nX29mZnNldChycSwgY3MpOwogCWFz
c2VydF9yaW5nX3RhaWxfdmFsaWQocnEtPnJpbmcsIHJxLT50YWlsKTsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kZWJ1Z2ZzLmMKaW5kZXggYjYwOTQwNjNiZTliLi5jYjliNTZmYjZhOGEgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCkBAIC0xMjg4LDcgKzEyODgsNiBAQCBzdGF0aWMgaW50
IGk5MTVfaGFuZ2NoZWNrX2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpCiAJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gbm9kZV90b19pOTE1KG0tPnByaXZh
dGUpOwogCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZTsKIAl1NjQgYWN0aGRbSTkxNV9O
VU1fRU5HSU5FU107Ci0JdTMyIHNlcW5vW0k5MTVfTlVNX0VOR0lORVNdOwogCXN0cnVjdCBpbnRl
bF9pbnN0ZG9uZSBpbnN0ZG9uZTsKIAlpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZjsKIAllbnVtIGlu
dGVsX2VuZ2luZV9pZCBpZDsKQEAgLTEzMDUsMTAgKzEzMDQsOCBAQCBzdGF0aWMgaW50IGk5MTVf
aGFuZ2NoZWNrX2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpCiAJfQogCiAJ
d2l0aF9pbnRlbF9ydW50aW1lX3BtKGRldl9wcml2LCB3YWtlcmVmKSB7Ci0JCWZvcl9lYWNoX2Vu
Z2luZShlbmdpbmUsIGRldl9wcml2LCBpZCkgeworCQlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBk
ZXZfcHJpdiwgaWQpCiAJCQlhY3RoZFtpZF0gPSBpbnRlbF9lbmdpbmVfZ2V0X2FjdGl2ZV9oZWFk
KGVuZ2luZSk7Ci0JCQlzZXFub1tpZF0gPSBpbnRlbF9lbmdpbmVfZ2V0X2hhbmdjaGVja19zZXFu
byhlbmdpbmUpOwotCQl9CiAKIAkJaW50ZWxfZW5naW5lX2dldF9pbnN0ZG9uZShkZXZfcHJpdi0+
ZW5naW5lW1JDUzBdLCAmaW5zdGRvbmUpOwogCX0KQEAgLTEzMjUsMTEgKzEzMjIsOCBAQCBzdGF0
aWMgaW50IGk5MTVfaGFuZ2NoZWNrX2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICp1bnVz
ZWQpCiAJc2VxX3ByaW50ZihtLCAiR1QgYWN0aXZlPyAlc1xuIiwgeWVzbm8oZGV2X3ByaXYtPmd0
LmF3YWtlKSk7CiAKIAlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBkZXZfcHJpdiwgaWQpIHsKLQkJ
c2VxX3ByaW50ZihtLCAiJXM6XG4iLCBlbmdpbmUtPm5hbWUpOwotCQlzZXFfcHJpbnRmKG0sICJc
dHNlcW5vID0gJXggW2N1cnJlbnQgJXgsIGxhc3QgJXhdLCAlZG1zIGFnb1xuIiwKLQkJCSAgIGVu
Z2luZS0+aGFuZ2NoZWNrLmxhc3Rfc2Vxbm8sCi0JCQkgICBzZXFub1tpZF0sCi0JCQkgICBlbmdp
bmUtPmhhbmdjaGVjay5uZXh0X3NlcW5vLAorCQlzZXFfcHJpbnRmKG0sICIlczogJWQgbXMgYWdv
XG4iLAorCQkJICAgZW5naW5lLT5uYW1lLAogCQkJICAgamlmZmllc190b19tc2VjcyhqaWZmaWVz
IC0KIAkJCQkJICAgIGVuZ2luZS0+aGFuZ2NoZWNrLmFjdGlvbl90aW1lc3RhbXApKTsKIAotLSAK
Mi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJ
bnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 03DB4E2BA9
	for <lists+intel-gfx@lfdr.de>; Thu, 24 Oct 2019 10:01:47 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 335BD6E13A;
	Thu, 24 Oct 2019 08:01:45 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 40C516E13A
 for <intel-gfx@lists.freedesktop.org>; Thu, 24 Oct 2019 08:01:44 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18945435-1500050 
 for multiple; Thu, 24 Oct 2019 09:01:25 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 24 Oct 2019 09:01:22 +0100
Message-Id: <20191024080122.29960-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0.rc0
In-Reply-To: <20191024071139.31917-1-chris@chris-wilson.co.uk>
References: <20191024071139.31917-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/gt: Split intel_ring_submission
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U3BsaXQgdGhlIGxlZ2FjeSBzdWJtaXNzaW9uIGJhY2tlbmQgZnJvbSB0aGUgY29tbW9uIENTIHJp
bmcgYnVmZmVyCmhhbmRsaW5nLgoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0Bj
aHJpcy13aWxzb24uY28udWs+ClJldmlld2VkLWJ5OiBNaWthIEt1b3BwYWxhIDxtaWthLmt1b3Bw
YWxhQGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAg
ICAgICAgICAgICAgICAgfCAgIDUgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfb3ZlcmxheS5jICB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
Y29udGV4dC5jICAgfCAgIDMgKy0KIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNi
dWZmZXIuYyAgICB8ICAgMSArCiAuLi4vZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3Rf
Ymx0LmMgICAgfCAgIDEgKwogLi4uL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb2hlcmVu
Y3kuYyAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYyAg
ICAgICB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmggICAg
ICAgfCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmggICAgICAg
IHwgMTE0IC0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5j
ICAgICB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYyAg
ICAgfCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgg
IHwgIDI3ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICAgICAgICAg
fCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbW9jcy5jICAgICAgICAgIHwg
ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3JlbmRlcnN0YXRlLmMgICB8ICAg
MSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nLmMgICAgICAgICAgfCAzMjAg
KysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nLmgg
ICAgICAgICAgfCAxMzEgKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGlt
ZWxpbmUuYyAgICAgIHwgICA2ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3Jr
YXJvdW5kcy5jICAgfCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvbW9ja19lbmdpbmUu
YyAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3RpbWVs
aW5lLmMgICB8ICAgMSArCiAuLi4vZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19zdWJtaXNz
aW9uLmMgfCAgIDMgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9jbWRfcGFyc2VyLmMgICAg
ICAgICB8ICAgMiArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvbW1pb19jb250ZXh0LmMgICAg
ICAgfCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L3NjaGVkdWxlci5jICAgICAgICAg
IHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfYWN0aXZlLmMgICAgICAgICAgICB8
ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyAgICAgICAgICAgICAgfCAg
IDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMgICAgICAgICAgIHwgICAx
ICsKIDI4IGZpbGVzIGNoYW5nZWQsIDQ4MyBpbnNlcnRpb25zKCspLCAxNDcgZGVsZXRpb25zKC0p
CiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZy5j
CiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZy5o
CgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9NYWtlZmlsZQppbmRleCAyMTYwMWJiMjdiMjIuLjliZjFjMGIyMDM3MCAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvTWFrZWZpbGUKQEAgLTg5LDExICs4OSwxMiBAQCBndC15ICs9IFwKIAlndC9pbnRl
bF9ndF9yZXF1ZXN0cy5vIFwKIAlndC9pbnRlbF9sbGMubyBcCiAJZ3QvaW50ZWxfbHJjLm8gXAor
CWd0L2ludGVsX21vY3MubyBcCiAJZ3QvaW50ZWxfcmM2Lm8gXAogCWd0L2ludGVsX3JlbmRlcnN0
YXRlLm8gXAogCWd0L2ludGVsX3Jlc2V0Lm8gXAotCWd0L2ludGVsX3JpbmdidWZmZXIubyBcCi0J
Z3QvaW50ZWxfbW9jcy5vIFwKKwlndC9pbnRlbF9yaW5nLm8gXAorCWd0L2ludGVsX3Jpbmdfc3Vi
bWlzc2lvbi5vIFwKIAlndC9pbnRlbF9zc2V1Lm8gXAogCWd0L2ludGVsX3RpbWVsaW5lLm8gXAog
CWd0L2ludGVsX3dvcmthcm91bmRzLm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfb3ZlcmxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9vdmVybGF5LmMKaW5kZXggMjM2MGYxOWY5Njk0Li44NDhjZTA3YThlYzIgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfb3ZlcmxheS5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfb3ZlcmxheS5jCkBAIC0zMCw2ICszMCw3
IEBACiAjaW5jbHVkZSA8ZHJtL2k5MTVfZHJtLmg+CiAKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1f
cG0uaCIKKyNpbmNsdWRlICJndC9pbnRlbF9yaW5nLmgiCiAKICNpbmNsdWRlICJpOTE1X2Rydi5o
IgogI2luY2x1ZGUgImk5MTVfcmVnLmgiCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX2NvbnRleHQuYwppbmRleCBiMmYwNDJkODdiZTAuLjU1ZjFmOTNjMDkyNSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCkBAIC02OSw5ICs2OSwxMCBA
QAogCiAjaW5jbHVkZSA8ZHJtL2k5MTVfZHJtLmg+CiAKLSNpbmNsdWRlICJndC9pbnRlbF9scmNf
cmVnLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5oIgogI2luY2x1ZGUg
Imd0L2ludGVsX2VuZ2luZV91c2VyLmgiCisjaW5jbHVkZSAiZ3QvaW50ZWxfbHJjX3JlZy5oIgor
I2luY2x1ZGUgImd0L2ludGVsX3JpbmcuaCIKIAogI2luY2x1ZGUgImk5MTVfZ2VtX2NvbnRleHQu
aCIKICNpbmNsdWRlICJpOTE1X2dsb2JhbHMuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCmluZGV4IGU5NjkwMTg4ODMyMy4uZTRmNWMyNjkxNTBh
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZl
ci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMK
QEAgLTE5LDYgKzE5LDcgQEAKICNpbmNsdWRlICJndC9pbnRlbF9lbmdpbmVfcG9vbC5oIgogI2lu
Y2x1ZGUgImd0L2ludGVsX2d0LmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZ3RfcG0uaCIKKyNpbmNs
dWRlICJndC9pbnRlbF9yaW5nLmgiCiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUg
Imk5MTVfZ2VtX2NsZmx1c2guaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9vYmplY3RfYmx0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fb2JqZWN0X2JsdC5jCmluZGV4IDViZDhkZTEyNGQ3NC4uNTE2ZTYxZTk5MjEyIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X2JsdC5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfYmx0LmMKQEAgLTgsNiAr
OCw3IEBACiAjaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3BtLmgiCiAjaW5jbHVkZSAiZ3QvaW50
ZWxfZW5naW5lX3Bvb2wuaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgorI2luY2x1ZGUgImd0
L2ludGVsX3JpbmcuaCIKICNpbmNsdWRlICJpOTE1X2dlbV9jbGZsdXNoLmgiCiAjaW5jbHVkZSAi
aTkxNV9nZW1fb2JqZWN0X2JsdC5oIgogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvaGVyZW5jeS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb2hlcmVuY3kuYwppbmRleCA1NDk4MTBmNzBhZWIu
LjA4NzdlZjRkZmY2MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0
ZXN0cy9pOTE1X2dlbV9jb2hlcmVuY3kuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
c2VsZnRlc3RzL2k5MTVfZ2VtX2NvaGVyZW5jeS5jCkBAIC04LDYgKzgsNyBAQAogCiAjaW5jbHVk
ZSAiZ3QvaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndF9wbS5oIgorI2luY2x1ZGUg
Imd0L2ludGVsX3JpbmcuaCIKIAogI2luY2x1ZGUgImk5MTVfc2VsZnRlc3QuaCIKICNpbmNsdWRl
ICJzZWxmdGVzdHMvaTkxNV9yYW5kb20uaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Nv
bnRleHQuYwppbmRleCA1OWMzMDgzYzFlYzEuLmVlOWQyYmNkMmMxMyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYwpAQCAtMTMsNiArMTMsNyBAQAogI2luY2x1ZGUgImlu
dGVsX2NvbnRleHQuaCIKICNpbmNsdWRlICJpbnRlbF9lbmdpbmUuaCIKICNpbmNsdWRlICJpbnRl
bF9lbmdpbmVfcG0uaCIKKyNpbmNsdWRlICJpbnRlbF9yaW5nLmgiCiAKIHN0YXRpYyBzdHJ1Y3Qg
aTkxNV9nbG9iYWxfY29udGV4dCB7CiAJc3RydWN0IGk5MTVfZ2xvYmFsIGJhc2U7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmgKaW5kZXggZGQ3NDJhYzJmYmRiLi42OGIzZDMx
N2Q5NTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQu
aAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmgKQEAgLTEyLDYg
KzEyLDcgQEAKICNpbmNsdWRlICJpOTE1X2FjdGl2ZS5oIgogI2luY2x1ZGUgImludGVsX2NvbnRl
eHRfdHlwZXMuaCIKICNpbmNsdWRlICJpbnRlbF9lbmdpbmVfdHlwZXMuaCIKKyNpbmNsdWRlICJp
bnRlbF9yaW5nX3R5cGVzLmgiCiAjaW5jbHVkZSAiaW50ZWxfdGltZWxpbmVfdHlwZXMuaCIKIAog
dm9pZCBpbnRlbF9jb250ZXh0X2luaXQoc3RydWN0IGludGVsX2NvbnRleHQgKmNlLApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaAppbmRleCBlZTQ3NDQ0YTZhZDQuLjk3YmJkZDk3
NzNjOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKQEAgLTE5LDcgKzE5
LDYgQEAKICNpbmNsdWRlICJpbnRlbF93b3JrYXJvdW5kcy5oIgogCiBzdHJ1Y3QgZHJtX3ByaW50
ZXI7Ci0KIHN0cnVjdCBpbnRlbF9ndDsKIAogLyogRWFybHkgZ2VuMiBkZXZpY2VzIGhhdmUgYSBj
YWNoZWxpbmUgb2YganVzdCAzMiBieXRlcywgdXNpbmcgNjQgaXMgb3ZlcmtpbGwsCkBAIC0xNzYs
MTIyICsxNzUsOSBAQCBpbnRlbF93cml0ZV9zdGF0dXNfcGFnZShzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmUsIGludCByZWcsIHUzMiB2YWx1ZSkKICNkZWZpbmUgSTkxNV9IV1NfQ1NCX1dS
SVRFX0lOREVYCTB4MWYKICNkZWZpbmUgQ05MX0hXU19DU0JfV1JJVEVfSU5ERVgJCTB4MmYKIAot
c3RydWN0IGludGVsX3JpbmcgKgotaW50ZWxfZW5naW5lX2NyZWF0ZV9yaW5nKHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSwgaW50IHNpemUpOwotaW50IGludGVsX3JpbmdfcGluKHN0cnVj
dCBpbnRlbF9yaW5nICpyaW5nKTsKLXZvaWQgaW50ZWxfcmluZ19yZXNldChzdHJ1Y3QgaW50ZWxf
cmluZyAqcmluZywgdTMyIHRhaWwpOwotdW5zaWduZWQgaW50IGludGVsX3JpbmdfdXBkYXRlX3Nw
YWNlKHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nKTsKLXZvaWQgaW50ZWxfcmluZ191bnBpbihzdHJ1
Y3QgaW50ZWxfcmluZyAqcmluZyk7Ci12b2lkIGludGVsX3JpbmdfZnJlZShzdHJ1Y3Qga3JlZiAq
cmVmKTsKLQotc3RhdGljIGlubGluZSBzdHJ1Y3QgaW50ZWxfcmluZyAqaW50ZWxfcmluZ19nZXQo
c3RydWN0IGludGVsX3JpbmcgKnJpbmcpCi17Ci0Ja3JlZl9nZXQoJnJpbmctPnJlZik7Ci0JcmV0
dXJuIHJpbmc7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCBpbnRlbF9yaW5nX3B1dChzdHJ1Y3Qg
aW50ZWxfcmluZyAqcmluZykKLXsKLQlrcmVmX3B1dCgmcmluZy0+cmVmLCBpbnRlbF9yaW5nX2Zy
ZWUpOwotfQotCiB2b2lkIGludGVsX2VuZ2luZV9zdG9wKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSk7CiB2b2lkIGludGVsX2VuZ2luZV9jbGVhbnVwKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSk7CiAKLWludCBfX211c3RfY2hlY2sgaW50ZWxfcmluZ19jYWNoZWxpbmVfYWxp
Z24oc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEpOwotCi11MzIgX19tdXN0X2NoZWNrICppbnRlbF9y
aW5nX2JlZ2luKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCB1bnNpZ25lZCBpbnQgbik7Ci0KLXN0
YXRpYyBpbmxpbmUgdm9pZCBpbnRlbF9yaW5nX2FkdmFuY2Uoc3RydWN0IGk5MTVfcmVxdWVzdCAq
cnEsIHUzMiAqY3MpCi17Ci0JLyogRHVtbXkgZnVuY3Rpb24uCi0JICoKLQkgKiBUaGlzIHNlcnZl
cyBhcyBhIHBsYWNlaG9sZGVyIGluIHRoZSBjb2RlIHNvIHRoYXQgdGhlIHJlYWRlcgotCSAqIGNh
biBjb21wYXJlIGFnYWluc3QgdGhlIHByZWNlZGluZyBpbnRlbF9yaW5nX2JlZ2luKCkgYW5kCi0J
ICogY2hlY2sgdGhhdCB0aGUgbnVtYmVyIG9mIGR3b3JkcyBlbWl0dGVkIG1hdGNoZXMgdGhlIHNw
YWNlCi0JICogcmVzZXJ2ZWQgZm9yIHRoZSBjb21tYW5kIHBhY2tldCAoaS5lLiB0aGUgdmFsdWUg
cGFzc2VkIHRvCi0JICogaW50ZWxfcmluZ19iZWdpbigpKS4KLQkgKi8KLQlHRU1fQlVHX09OKChy
cS0+cmluZy0+dmFkZHIgKyBycS0+cmluZy0+ZW1pdCkgIT0gY3MpOwotfQotCi1zdGF0aWMgaW5s
aW5lIHUzMiBpbnRlbF9yaW5nX3dyYXAoY29uc3Qgc3RydWN0IGludGVsX3JpbmcgKnJpbmcsIHUz
MiBwb3MpCi17Ci0JcmV0dXJuIHBvcyAmIChyaW5nLT5zaXplIC0gMSk7Ci19Ci0KLXN0YXRpYyBp
bmxpbmUgYm9vbAotaW50ZWxfcmluZ19vZmZzZXRfdmFsaWQoY29uc3Qgc3RydWN0IGludGVsX3Jp
bmcgKnJpbmcsCi0JCQl1bnNpZ25lZCBpbnQgcG9zKQotewotCWlmIChwb3MgJiAtcmluZy0+c2l6
ZSkgLyogbXVzdCBiZSBzdHJpY3RseSB3aXRoaW4gdGhlIHJpbmcgKi8KLQkJcmV0dXJuIGZhbHNl
OwotCi0JaWYgKCFJU19BTElHTkVEKHBvcywgOCkpIC8qIG11c3QgYmUgcXdvcmQgYWxpZ25lZCAq
LwotCQlyZXR1cm4gZmFsc2U7Ci0KLQlyZXR1cm4gdHJ1ZTsKLX0KLQotc3RhdGljIGlubGluZSB1
MzIgaW50ZWxfcmluZ19vZmZzZXQoY29uc3Qgc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsIHZvaWQg
KmFkZHIpCi17Ci0JLyogRG9uJ3Qgd3JpdGUgcmluZy0+c2l6ZSAoZXF1aXZhbGVudCB0byAwKSBh
cyB0aGF0IGhhbmdzIHNvbWUgR1BVcy4gKi8KLQl1MzIgb2Zmc2V0ID0gYWRkciAtIHJxLT5yaW5n
LT52YWRkcjsKLQlHRU1fQlVHX09OKG9mZnNldCA+IHJxLT5yaW5nLT5zaXplKTsKLQlyZXR1cm4g
aW50ZWxfcmluZ193cmFwKHJxLT5yaW5nLCBvZmZzZXQpOwotfQotCi1zdGF0aWMgaW5saW5lIHZv
aWQKLWFzc2VydF9yaW5nX3RhaWxfdmFsaWQoY29uc3Qgc3RydWN0IGludGVsX3JpbmcgKnJpbmcs
IHVuc2lnbmVkIGludCB0YWlsKQotewotCUdFTV9CVUdfT04oIWludGVsX3Jpbmdfb2Zmc2V0X3Zh
bGlkKHJpbmcsIHRhaWwpKTsKLQotCS8qCi0JICogIlJpbmcgQnVmZmVyIFVzZSIKLQkgKglHZW4y
IEJTcGVjICIxLiBQcm9ncmFtbWluZyBFbnZpcm9ubWVudCIgLyAxLjQuNC42Ci0JICoJR2VuMyBC
U3BlYyAiMWMgTWVtb3J5IEludGVyZmFjZSBGdW5jdGlvbnMiIC8gMi4zLjQuNQotCSAqCUdlbjQr
IEJTcGVjICIxYyBNZW1vcnkgSW50ZXJmYWNlIGFuZCBDb21tYW5kIFN0cmVhbSIgLyA1LjMuNC41
Ci0JICogIklmIHRoZSBSaW5nIEJ1ZmZlciBIZWFkIFBvaW50ZXIgYW5kIHRoZSBUYWlsIFBvaW50
ZXIgYXJlIG9uIHRoZQotCSAqIHNhbWUgY2FjaGVsaW5lLCB0aGUgSGVhZCBQb2ludGVyIG11c3Qg
bm90IGJlIGdyZWF0ZXIgdGhhbiB0aGUgVGFpbAotCSAqIFBvaW50ZXIuIgotCSAqCi0JICogV2Ug
dXNlIHJpbmctPmhlYWQgYXMgdGhlIGxhc3Qga25vd24gbG9jYXRpb24gb2YgdGhlIGFjdHVhbCBS
SU5HX0hFQUQsCi0JICogaXQgbWF5IGhhdmUgYWR2YW5jZWQgYnV0IGluIHRoZSB3b3JzdCBjYXNl
IGl0IGlzIGVxdWFsbHkgdGhlIHNhbWUKLQkgKiBhcyByaW5nLT5oZWFkIGFuZCBzbyB3ZSBzaG91
bGQgbmV2ZXIgcHJvZ3JhbSBSSU5HX1RBSUwgdG8gYWR2YW5jZQotCSAqIGludG8gdGhlIHNhbWUg
Y2FjaGVsaW5lIGFzIHJpbmctPmhlYWQuCi0JICovCi0jZGVmaW5lIGNhY2hlbGluZShhKSByb3Vu
ZF9kb3duKGEsIENBQ0hFTElORV9CWVRFUykKLQlHRU1fQlVHX09OKGNhY2hlbGluZSh0YWlsKSA9
PSBjYWNoZWxpbmUocmluZy0+aGVhZCkgJiYKLQkJICAgdGFpbCA8IHJpbmctPmhlYWQpOwotI3Vu
ZGVmIGNhY2hlbGluZQotfQotCi1zdGF0aWMgaW5saW5lIHVuc2lnbmVkIGludAotaW50ZWxfcmlu
Z19zZXRfdGFpbChzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZywgdW5zaWduZWQgaW50IHRhaWwpCi17
Ci0JLyogV2hpbHN0IHdyaXRlcyB0byB0aGUgdGFpbCBhcmUgc3RyaWN0bHkgb3JkZXIsIHRoZXJl
IGlzIG5vCi0JICogc2VyaWFsaXNhdGlvbiBiZXR3ZWVuIHJlYWRlcnMgYW5kIHRoZSB3cml0ZXJz
LiBUaGUgdGFpbCBtYXkgYmUKLQkgKiByZWFkIGJ5IGk5MTVfcmVxdWVzdF9yZXRpcmUoKSBqdXN0
IGFzIGl0IGlzIGJlaW5nIHVwZGF0ZWQKLQkgKiBieSBleGVjbGlzdHMsIGFzIGFsdGhvdWdoIHRo
ZSBicmVhZGNydW1iIGlzIGNvbXBsZXRlLCB0aGUgY29udGV4dAotCSAqIHN3aXRjaCBoYXNuJ3Qg
YmVlbiBzZWVuLgotCSAqLwotCWFzc2VydF9yaW5nX3RhaWxfdmFsaWQocmluZywgdGFpbCk7Ci0J
cmluZy0+dGFpbCA9IHRhaWw7Ci0JcmV0dXJuIHRhaWw7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdW5z
aWduZWQgaW50Ci1fX2ludGVsX3Jpbmdfc3BhY2UodW5zaWduZWQgaW50IGhlYWQsIHVuc2lnbmVk
IGludCB0YWlsLCB1bnNpZ25lZCBpbnQgc2l6ZSkKLXsKLQkvKgotCSAqICJJZiB0aGUgUmluZyBC
dWZmZXIgSGVhZCBQb2ludGVyIGFuZCB0aGUgVGFpbCBQb2ludGVyIGFyZSBvbiB0aGUKLQkgKiBz
YW1lIGNhY2hlbGluZSwgdGhlIEhlYWQgUG9pbnRlciBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4g
dGhlIFRhaWwKLQkgKiBQb2ludGVyLiIKLQkgKi8KLQlHRU1fQlVHX09OKCFpc19wb3dlcl9vZl8y
KHNpemUpKTsKLQlyZXR1cm4gKGhlYWQgLSB0YWlsIC0gQ0FDSEVMSU5FX0JZVEVTKSAmIChzaXpl
IC0gMSk7Ci19Ci0KIGludCBpbnRlbF9lbmdpbmVzX2luaXRfbW1pbyhzdHJ1Y3QgaW50ZWxfZ3Qg
Kmd0KTsKIGludCBpbnRlbF9lbmdpbmVzX3NldHVwKHN0cnVjdCBpbnRlbF9ndCAqZ3QpOwogaW50
IGludGVsX2VuZ2luZXNfaW5pdChzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKaW5kZXggOGI1MTI5ZTBiNDlkLi45Y2MxZWE2NTE5
ZWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCkBAIC0zNyw2
ICszNyw3IEBACiAjaW5jbHVkZSAiaW50ZWxfY29udGV4dC5oIgogI2luY2x1ZGUgImludGVsX2xy
Yy5oIgogI2luY2x1ZGUgImludGVsX3Jlc2V0LmgiCisjaW5jbHVkZSAiaW50ZWxfcmluZy5oIgog
CiAvKiBIYXN3ZWxsIGRvZXMgaGF2ZSB0aGUgQ1hUX1NJWkUgcmVnaXN0ZXIgaG93ZXZlciBpdCBk
b2VzIG5vdCBhcHBlYXIgdG8gYmUKICAqIHZhbGlkLiBOb3csIGRvY3MgZXhwbGFpbiBpbiBkd29y
ZHMgd2hhdCBpcyBpbiB0aGUgY29udGV4dCBvYmplY3QuIFRoZSBmdWxsCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5jCmluZGV4IDZmYmZhMjE2MmU1NC4uM2MwZjQ5MGZm
MmM3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0u
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYwpAQCAtMTMs
NiArMTMsNyBAQAogI2luY2x1ZGUgImludGVsX2d0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3RfcG0u
aCIKICNpbmNsdWRlICJpbnRlbF9yYzYuaCIKKyNpbmNsdWRlICJpbnRlbF9yaW5nLmgiCiAKIHN0
YXRpYyBpbnQgX19lbmdpbmVfdW5wYXJrKHN0cnVjdCBpbnRlbF93YWtlcmVmICp3ZikKIHsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKaW5kZXggMjY5OTg5
MDFmZWZmLi5lOGVhMTJiOTY3NTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZV90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZV90eXBlcy5oCkBAIC01OSw2ICs1OSw3IEBAIHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0
Owogc3RydWN0IGk5MTVfcmVxdWVzdDsKIHN0cnVjdCBpOTE1X3NjaGVkX2F0dHI7CiBzdHJ1Y3Qg
aW50ZWxfZ3Q7CitzdHJ1Y3QgaW50ZWxfcmluZzsKIHN0cnVjdCBpbnRlbF91bmNvcmU7CiAKIHR5
cGVkZWYgdTggaW50ZWxfZW5naW5lX21hc2tfdDsKQEAgLTc3LDMyICs3OCw2IEBAIHN0cnVjdCBp
bnRlbF9pbnN0ZG9uZSB7CiAJdTMyIHJvd1tJOTE1X01BWF9TTElDRVNdW0k5MTVfTUFYX1NVQlNM
SUNFU107CiB9OwogCi1zdHJ1Y3QgaW50ZWxfcmluZyB7Ci0Jc3RydWN0IGtyZWYgcmVmOwotCXN0
cnVjdCBpOTE1X3ZtYSAqdm1hOwotCXZvaWQgKnZhZGRyOwotCi0JLyoKLQkgKiBBcyB3ZSBoYXZl
IHR3byB0eXBlcyBvZiByaW5ncywgb25lIGdsb2JhbCB0byB0aGUgZW5naW5lIHVzZWQKLQkgKiBi
eSByaW5nYnVmZmVyIHN1Ym1pc3Npb24gYW5kIHRob3NlIHRoYXQgYXJlIGV4Y2x1c2l2ZSB0byBh
Ci0JICogY29udGV4dCB1c2VkIGJ5IGV4ZWNsaXN0cywgd2UgaGF2ZSB0byBwbGF5IHNhZmUgYW5k
IGFsbG93Ci0JICogYXRvbWljIHVwZGF0ZXMgdG8gdGhlIHBpbl9jb3VudC4gSG93ZXZlciwgdGhl
IGFjdHVhbCBwaW5uaW5nCi0JICogb2YgdGhlIGNvbnRleHQgaXMgZWl0aGVyIGRvbmUgZHVyaW5n
IGluaXRpYWxpc2F0aW9uIGZvcgotCSAqIHJpbmdidWZmZXIgc3VibWlzc2lvbiBvciBzZXJpYWxp
c2VkIGFzIHBhcnQgb2YgdGhlIGNvbnRleHQKLQkgKiBwaW5uaW5nIGZvciBleGVjbGlzdHMsIGFu
ZCBzbyB3ZSBkbyBub3QgbmVlZCBhIG11dGV4IG91cnNlbHZlcwotCSAqIHRvIHNlcmlhbGlzZSBp
bnRlbF9yaW5nX3Bpbi9pbnRlbF9yaW5nX3VucGluLgotCSAqLwotCWF0b21pY190IHBpbl9jb3Vu
dDsKLQotCXUzMiBoZWFkOwotCXUzMiB0YWlsOwotCXUzMiBlbWl0OwotCi0JdTMyIHNwYWNlOwot
CXUzMiBzaXplOwotCXUzMiBlZmZlY3RpdmVfc2l6ZTsKLX07Ci0KIC8qCiAgKiB3ZSB1c2UgYSBz
aW5nbGUgcGFnZSB0byBsb2FkIGN0eCB3b3JrYXJvdW5kcyBzbyBhbGwgb2YgdGhlc2UKICAqIHZh
bHVlcyBhcmUgcmVmZXJyZWQgaW4gdGVybXMgb2YgZHdvcmRzCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2xyYy5jCmluZGV4IDY1MWQ1ZGQzOTQ2NC4uNzNlYWU4NWEyY2M5IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9scmMuYwpAQCAtMTQ1LDYgKzE0NSw3IEBACiAjaW5jbHVkZSAiaW50ZWxf
bHJjX3JlZy5oIgogI2luY2x1ZGUgImludGVsX21vY3MuaCIKICNpbmNsdWRlICJpbnRlbF9yZXNl
dC5oIgorI2luY2x1ZGUgImludGVsX3JpbmcuaCIKICNpbmNsdWRlICJpbnRlbF93b3JrYXJvdW5k
cy5oIgogCiAjZGVmaW5lIFJJTkdfRVhFQ0xJU1RfUUZVTEwJCSgxIDw8IDB4MikKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX21vY3MuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX21vY3MuYwppbmRleCA1YmFjMzk2NjkwNmIuLjkzMjgzM2U1YjcxMiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbW9jcy5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX21vY3MuYwpAQCAtMjYsNiArMjYsNyBAQAogI2lu
Y2x1ZGUgImludGVsX2d0LmgiCiAjaW5jbHVkZSAiaW50ZWxfbW9jcy5oIgogI2luY2x1ZGUgImlu
dGVsX2xyYy5oIgorI2luY2x1ZGUgImludGVsX3JpbmcuaCIKIAogLyogc3RydWN0dXJlcyByZXF1
aXJlZCAqLwogc3RydWN0IGRybV9pOTE1X21vY3NfZW50cnkgewpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVuZGVyc3RhdGUuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX3JlbmRlcnN0YXRlLmMKaW5kZXggNmQwNWY5YzY0MTc4Li5jNGVkYzM1ZTdk
ODkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3JlbmRlcnN0YXRl
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVuZGVyc3RhdGUuYwpAQCAt
MjcsNiArMjcsNyBAQAogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJpbnRlbF9y
ZW5kZXJzdGF0ZS5oIgorI2luY2x1ZGUgImludGVsX3JpbmcuaCIKIAogc3RydWN0IGludGVsX3Jl
bmRlcnN0YXRlIHsKIAljb25zdCBzdHJ1Y3QgaW50ZWxfcmVuZGVyc3RhdGVfcm9kYXRhICpyb2Rh
dGE7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMDAwMDAwLi5mZGIwNDZjNzdlNzcKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nLmMKQEAgLTAsMCArMSwzMjAgQEAKKy8qCisg
KiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCisgKgorICogQ29weXJpZ2h0IMKpIDIwMTkg
SW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX29iamVjdC5o
IgorI2luY2x1ZGUgImk5MTVfZHJ2LmgiCisjaW5jbHVkZSAiaTkxNV92bWEuaCIKKyNpbmNsdWRl
ICJpbnRlbF9lbmdpbmUuaCIKKyNpbmNsdWRlICJpbnRlbF9yaW5nLmgiCisjaW5jbHVkZSAiaW50
ZWxfdGltZWxpbmUuaCIKKwordW5zaWduZWQgaW50IGludGVsX3JpbmdfdXBkYXRlX3NwYWNlKHN0
cnVjdCBpbnRlbF9yaW5nICpyaW5nKQoreworCXVuc2lnbmVkIGludCBzcGFjZTsKKworCXNwYWNl
ID0gX19pbnRlbF9yaW5nX3NwYWNlKHJpbmctPmhlYWQsIHJpbmctPmVtaXQsIHJpbmctPnNpemUp
OworCisJcmluZy0+c3BhY2UgPSBzcGFjZTsKKwlyZXR1cm4gc3BhY2U7Cit9CisKK2ludCBpbnRl
bF9yaW5nX3BpbihzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKK3sKKwlzdHJ1Y3QgaTkxNV92bWEg
KnZtYSA9IHJpbmctPnZtYTsKKwl1bnNpZ25lZCBpbnQgZmxhZ3M7CisJdm9pZCAqYWRkcjsKKwlp
bnQgcmV0OworCisJaWYgKGF0b21pY19mZXRjaF9pbmMoJnJpbmctPnBpbl9jb3VudCkpCisJCXJl
dHVybiAwOworCisJZmxhZ3MgPSBQSU5fR0xPQkFMOworCisJLyogUmluZyB3cmFwYXJvdW5kIGF0
IG9mZnNldCAwIHNvbWV0aW1lcyBoYW5ncy4gTm8gaWRlYSB3aHkuICovCisJZmxhZ3MgfD0gUElO
X09GRlNFVF9CSUFTIHwgaTkxNV9nZ3R0X3Bpbl9iaWFzKHZtYSk7CisKKwlpZiAodm1hLT5vYmot
PnN0b2xlbikKKwkJZmxhZ3MgfD0gUElOX01BUFBBQkxFOworCWVsc2UKKwkJZmxhZ3MgfD0gUElO
X0hJR0g7CisKKwlyZXQgPSBpOTE1X3ZtYV9waW4odm1hLCAwLCAwLCBmbGFncyk7CisJaWYgKHVu
bGlrZWx5KHJldCkpCisJCWdvdG8gZXJyX3VucGluOworCisJaWYgKGk5MTVfdm1hX2lzX21hcF9h
bmRfZmVuY2VhYmxlKHZtYSkpCisJCWFkZHIgPSAodm9pZCBfX2ZvcmNlICopaTkxNV92bWFfcGlu
X2lvbWFwKHZtYSk7CisJZWxzZQorCQlhZGRyID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9tYXAodm1h
LT5vYmosCisJCQkJCSAgICAgICBpOTE1X2NvaGVyZW50X21hcF90eXBlKHZtYS0+dm0tPmk5MTUp
KTsKKwlpZiAoSVNfRVJSKGFkZHIpKSB7CisJCXJldCA9IFBUUl9FUlIoYWRkcik7CisJCWdvdG8g
ZXJyX3Jpbmc7CisJfQorCisJaTkxNV92bWFfbWFrZV91bnNocmlua2FibGUodm1hKTsKKworCUdF
TV9CVUdfT04ocmluZy0+dmFkZHIpOworCXJpbmctPnZhZGRyID0gYWRkcjsKKworCXJldHVybiAw
OworCitlcnJfcmluZzoKKwlpOTE1X3ZtYV91bnBpbih2bWEpOworZXJyX3VucGluOgorCWF0b21p
Y19kZWMoJnJpbmctPnBpbl9jb3VudCk7CisJcmV0dXJuIHJldDsKK30KKwordm9pZCBpbnRlbF9y
aW5nX3Jlc2V0KHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nLCB1MzIgdGFpbCkKK3sKKwl0YWlsID0g
aW50ZWxfcmluZ193cmFwKHJpbmcsIHRhaWwpOworCXJpbmctPnRhaWwgPSB0YWlsOworCXJpbmct
PmhlYWQgPSB0YWlsOworCXJpbmctPmVtaXQgPSB0YWlsOworCWludGVsX3JpbmdfdXBkYXRlX3Nw
YWNlKHJpbmcpOworfQorCit2b2lkIGludGVsX3JpbmdfdW5waW4oc3RydWN0IGludGVsX3Jpbmcg
KnJpbmcpCit7CisJc3RydWN0IGk5MTVfdm1hICp2bWEgPSByaW5nLT52bWE7CisKKwlpZiAoIWF0
b21pY19kZWNfYW5kX3Rlc3QoJnJpbmctPnBpbl9jb3VudCkpCisJCXJldHVybjsKKworCS8qIERp
c2NhcmQgYW55IHVudXNlZCBieXRlcyBiZXlvbmQgdGhhdCBzdWJtaXR0ZWQgdG8gaHcuICovCisJ
aW50ZWxfcmluZ19yZXNldChyaW5nLCByaW5nLT5lbWl0KTsKKworCWk5MTVfdm1hX3Vuc2V0X2dn
dHRfd3JpdGUodm1hKTsKKwlpZiAoaTkxNV92bWFfaXNfbWFwX2FuZF9mZW5jZWFibGUodm1hKSkK
KwkJaTkxNV92bWFfdW5waW5faW9tYXAodm1hKTsKKwllbHNlCisJCWk5MTVfZ2VtX29iamVjdF91
bnBpbl9tYXAodm1hLT5vYmopOworCisJR0VNX0JVR19PTighcmluZy0+dmFkZHIpOworCXJpbmct
PnZhZGRyID0gTlVMTDsKKworCWk5MTVfdm1hX3VucGluKHZtYSk7CisJaTkxNV92bWFfbWFrZV9w
dXJnZWFibGUodm1hKTsKK30KKworc3RhdGljIHN0cnVjdCBpOTE1X3ZtYSAqY3JlYXRlX3Jpbmdf
dm1hKHN0cnVjdCBpOTE1X2dndHQgKmdndHQsIGludCBzaXplKQoreworCXN0cnVjdCBpOTE1X2Fk
ZHJlc3Nfc3BhY2UgKnZtID0gJmdndHQtPnZtOworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpp
OTE1ID0gdm0tPmk5MTU7CisJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKKwlzdHJ1
Y3QgaTkxNV92bWEgKnZtYTsKKworCW9iaiA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfc3RvbGVu
KGk5MTUsIHNpemUpOworCWlmIChJU19FUlIob2JqKSkKKwkJb2JqID0gaTkxNV9nZW1fb2JqZWN0
X2NyZWF0ZV9pbnRlcm5hbChpOTE1LCBzaXplKTsKKwlpZiAoSVNfRVJSKG9iaikpCisJCXJldHVy
biBFUlJfQ0FTVChvYmopOworCisJLyoKKwkgKiBNYXJrIHJpbmcgYnVmZmVycyBhcyByZWFkLW9u
bHkgZnJvbSBHUFUgc2lkZSAoc28gbm8gc3RyYXkgb3ZlcndyaXRlcykKKwkgKiBpZiBzdXBwb3J0
ZWQgYnkgdGhlIHBsYXRmb3JtJ3MgR0dUVC4KKwkgKi8KKwlpZiAodm0tPmhhc19yZWFkX29ubHkp
CisJCWk5MTVfZ2VtX29iamVjdF9zZXRfcmVhZG9ubHkob2JqKTsKKworCXZtYSA9IGk5MTVfdm1h
X2luc3RhbmNlKG9iaiwgdm0sIE5VTEwpOworCWlmIChJU19FUlIodm1hKSkKKwkJZ290byBlcnI7
CisKKwlyZXR1cm4gdm1hOworCitlcnI6CisJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOworCXJl
dHVybiB2bWE7Cit9CisKK3N0cnVjdCBpbnRlbF9yaW5nICoKK2ludGVsX2VuZ2luZV9jcmVhdGVf
cmluZyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIGludCBzaXplKQoreworCXN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gZW5naW5lLT5pOTE1OworCXN0cnVjdCBpbnRlbF9y
aW5nICpyaW5nOworCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOworCisJR0VNX0JVR19PTighaXNfcG93
ZXJfb2ZfMihzaXplKSk7CisJR0VNX0JVR19PTihSSU5HX0NUTF9TSVpFKHNpemUpICYgflJJTkdf
TlJfUEFHRVMpOworCisJcmluZyA9IGt6YWxsb2Moc2l6ZW9mKCpyaW5nKSwgR0ZQX0tFUk5FTCk7
CisJaWYgKCFyaW5nKQorCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsKKworCWtyZWZfaW5pdCgm
cmluZy0+cmVmKTsKKworCXJpbmctPnNpemUgPSBzaXplOworCisJLyoKKwkgKiBXb3JrYXJvdW5k
IGFuIGVycmF0dW0gb24gdGhlIGk4MzAgd2hpY2ggY2F1c2VzIGEgaGFuZyBpZgorCSAqIHRoZSBU
QUlMIHBvaW50ZXIgcG9pbnRzIHRvIHdpdGhpbiB0aGUgbGFzdCAyIGNhY2hlbGluZXMKKwkgKiBv
ZiB0aGUgYnVmZmVyLgorCSAqLworCXJpbmctPmVmZmVjdGl2ZV9zaXplID0gc2l6ZTsKKwlpZiAo
SVNfSTgzMChpOTE1KSB8fCBJU19JODQ1RyhpOTE1KSkKKwkJcmluZy0+ZWZmZWN0aXZlX3NpemUg
LT0gMiAqIENBQ0hFTElORV9CWVRFUzsKKworCWludGVsX3JpbmdfdXBkYXRlX3NwYWNlKHJpbmcp
OworCisJdm1hID0gY3JlYXRlX3Jpbmdfdm1hKGVuZ2luZS0+Z3QtPmdndHQsIHNpemUpOworCWlm
IChJU19FUlIodm1hKSkgeworCQlrZnJlZShyaW5nKTsKKwkJcmV0dXJuIEVSUl9DQVNUKHZtYSk7
CisJfQorCXJpbmctPnZtYSA9IHZtYTsKKworCXJldHVybiByaW5nOworfQorCit2b2lkIGludGVs
X3JpbmdfZnJlZShzdHJ1Y3Qga3JlZiAqcmVmKQoreworCXN0cnVjdCBpbnRlbF9yaW5nICpyaW5n
ID0gY29udGFpbmVyX29mKHJlZiwgdHlwZW9mKCpyaW5nKSwgcmVmKTsKKworCWk5MTVfdm1hX3B1
dChyaW5nLT52bWEpOworCWtmcmVlKHJpbmcpOworfQorCitzdGF0aWMgbm9pbmxpbmUgaW50Cit3
YWl0X2Zvcl9zcGFjZShzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZywKKwkgICAgICAgc3RydWN0IGlu
dGVsX3RpbWVsaW5lICp0bCwKKwkgICAgICAgdW5zaWduZWQgaW50IGJ5dGVzKQoreworCXN0cnVj
dCBpOTE1X3JlcXVlc3QgKnRhcmdldDsKKwlsb25nIHRpbWVvdXQ7CisKKwlpZiAoaW50ZWxfcmlu
Z191cGRhdGVfc3BhY2UocmluZykgPj0gYnl0ZXMpCisJCXJldHVybiAwOworCisJR0VNX0JVR19P
TihsaXN0X2VtcHR5KCZ0bC0+cmVxdWVzdHMpKTsKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5KHRhcmdl
dCwgJnRsLT5yZXF1ZXN0cywgbGluaykgeworCQlpZiAodGFyZ2V0LT5yaW5nICE9IHJpbmcpCisJ
CQljb250aW51ZTsKKworCQkvKiBXb3VsZCBjb21wbGV0aW9uIG9mIHRoaXMgcmVxdWVzdCBmcmVl
IGVub3VnaCBzcGFjZT8gKi8KKwkJaWYgKGJ5dGVzIDw9IF9faW50ZWxfcmluZ19zcGFjZSh0YXJn
ZXQtPnBvc3RmaXgsCisJCQkJCQlyaW5nLT5lbWl0LCByaW5nLT5zaXplKSkKKwkJCWJyZWFrOwor
CX0KKworCWlmIChHRU1fV0FSTl9PTigmdGFyZ2V0LT5saW5rID09ICZ0bC0+cmVxdWVzdHMpKQor
CQlyZXR1cm4gLUVOT1NQQzsKKworCXRpbWVvdXQgPSBpOTE1X3JlcXVlc3Rfd2FpdCh0YXJnZXQs
CisJCQkJICAgIEk5MTVfV0FJVF9JTlRFUlJVUFRJQkxFLAorCQkJCSAgICBNQVhfU0NIRURVTEVf
VElNRU9VVCk7CisJaWYgKHRpbWVvdXQgPCAwKQorCQlyZXR1cm4gdGltZW91dDsKKworCWk5MTVf
cmVxdWVzdF9yZXRpcmVfdXB0byh0YXJnZXQpOworCisJaW50ZWxfcmluZ191cGRhdGVfc3BhY2Uo
cmluZyk7CisJR0VNX0JVR19PTihyaW5nLT5zcGFjZSA8IGJ5dGVzKTsKKwlyZXR1cm4gMDsKK30K
KwordTMyICppbnRlbF9yaW5nX2JlZ2luKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCB1bnNpZ25l
ZCBpbnQgbnVtX2R3b3JkcykKK3sKKwlzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZyA9IHJxLT5yaW5n
OworCWNvbnN0IHVuc2lnbmVkIGludCByZW1haW5fdXNhYmxlID0gcmluZy0+ZWZmZWN0aXZlX3Np
emUgLSByaW5nLT5lbWl0OworCWNvbnN0IHVuc2lnbmVkIGludCBieXRlcyA9IG51bV9kd29yZHMg
KiBzaXplb2YodTMyKTsKKwl1bnNpZ25lZCBpbnQgbmVlZF93cmFwID0gMDsKKwl1bnNpZ25lZCBp
bnQgdG90YWxfYnl0ZXM7CisJdTMyICpjczsKKworCS8qIFBhY2tldHMgbXVzdCBiZSBxd29yZCBh
bGlnbmVkLiAqLworCUdFTV9CVUdfT04obnVtX2R3b3JkcyAmIDEpOworCisJdG90YWxfYnl0ZXMg
PSBieXRlcyArIHJxLT5yZXNlcnZlZF9zcGFjZTsKKwlHRU1fQlVHX09OKHRvdGFsX2J5dGVzID4g
cmluZy0+ZWZmZWN0aXZlX3NpemUpOworCisJaWYgKHVubGlrZWx5KHRvdGFsX2J5dGVzID4gcmVt
YWluX3VzYWJsZSkpIHsKKwkJY29uc3QgaW50IHJlbWFpbl9hY3R1YWwgPSByaW5nLT5zaXplIC0g
cmluZy0+ZW1pdDsKKworCQlpZiAoYnl0ZXMgPiByZW1haW5fdXNhYmxlKSB7CisJCQkvKgorCQkJ
ICogTm90IGVub3VnaCBzcGFjZSBmb3IgdGhlIGJhc2ljIHJlcXVlc3QuIFNvIG5lZWQgdG8KKwkJ
CSAqIGZsdXNoIG91dCB0aGUgcmVtYWluZGVyIGFuZCB0aGVuIHdhaXQgZm9yCisJCQkgKiBiYXNl
ICsgcmVzZXJ2ZWQuCisJCQkgKi8KKwkJCXRvdGFsX2J5dGVzICs9IHJlbWFpbl9hY3R1YWw7CisJ
CQluZWVkX3dyYXAgPSByZW1haW5fYWN0dWFsIHwgMTsKKwkJfSBlbHNlICB7CisJCQkvKgorCQkJ
ICogVGhlIGJhc2UgcmVxdWVzdCB3aWxsIGZpdCBidXQgdGhlIHJlc2VydmVkIHNwYWNlCisJCQkg
KiBmYWxscyBvZmYgdGhlIGVuZC4gU28gd2UgZG9uJ3QgbmVlZCBhbiBpbW1lZGlhdGUKKwkJCSAq
IHdyYXAgYW5kIG9ubHkgbmVlZCB0byBlZmZlY3RpdmVseSB3YWl0IGZvciB0aGUKKwkJCSAqIHJl
c2VydmVkIHNpemUgZnJvbSB0aGUgc3RhcnQgb2YgcmluZ2J1ZmZlci4KKwkJCSAqLworCQkJdG90
YWxfYnl0ZXMgPSBycS0+cmVzZXJ2ZWRfc3BhY2UgKyByZW1haW5fYWN0dWFsOworCQl9CisJfQor
CisJaWYgKHVubGlrZWx5KHRvdGFsX2J5dGVzID4gcmluZy0+c3BhY2UpKSB7CisJCWludCByZXQ7
CisKKwkJLyoKKwkJICogU3BhY2UgaXMgcmVzZXJ2ZWQgaW4gdGhlIHJpbmdidWZmZXIgZm9yIGZp
bmFsaXNpbmcgdGhlCisJCSAqIHJlcXVlc3QsIGFzIHRoYXQgY2Fubm90IGJlIGFsbG93ZWQgdG8g
ZmFpbC4gRHVyaW5nIHJlcXVlc3QKKwkJICogZmluYWxpc2F0aW9uLCByZXNlcnZlZF9zcGFjZSBp
cyBzZXQgdG8gMCB0byBzdG9wIHRoZQorCQkgKiBvdmVyYWxsb2NhdGlvbiBhbmQgdGhlIGFzc3Vt
cHRpb24gaXMgdGhhdCB0aGVuIHdlIG5ldmVyIG5lZWQKKwkJICogdG8gd2FpdCAod2hpY2ggaGFz
IHRoZSByaXNrIG9mIGZhaWxpbmcgd2l0aCBFSU5UUikuCisJCSAqCisJCSAqIFNlZSBhbHNvIGk5
MTVfcmVxdWVzdF9hbGxvYygpIGFuZCBpOTE1X3JlcXVlc3RfYWRkKCkuCisJCSAqLworCQlHRU1f
QlVHX09OKCFycS0+cmVzZXJ2ZWRfc3BhY2UpOworCisJCXJldCA9IHdhaXRfZm9yX3NwYWNlKHJp
bmcsIHJxLT50aW1lbGluZSwgdG90YWxfYnl0ZXMpOworCQlpZiAodW5saWtlbHkocmV0KSkKKwkJ
CXJldHVybiBFUlJfUFRSKHJldCk7CisJfQorCisJaWYgKHVubGlrZWx5KG5lZWRfd3JhcCkpIHsK
KwkJbmVlZF93cmFwICY9IH4xOworCQlHRU1fQlVHX09OKG5lZWRfd3JhcCA+IHJpbmctPnNwYWNl
KTsKKwkJR0VNX0JVR19PTihyaW5nLT5lbWl0ICsgbmVlZF93cmFwID4gcmluZy0+c2l6ZSk7CisJ
CUdFTV9CVUdfT04oIUlTX0FMSUdORUQobmVlZF93cmFwLCBzaXplb2YodTY0KSkpOworCisJCS8q
IEZpbGwgdGhlIHRhaWwgd2l0aCBNSV9OT09QICovCisJCW1lbXNldDY0KHJpbmctPnZhZGRyICsg
cmluZy0+ZW1pdCwgMCwgbmVlZF93cmFwIC8gc2l6ZW9mKHU2NCkpOworCQlyaW5nLT5zcGFjZSAt
PSBuZWVkX3dyYXA7CisJCXJpbmctPmVtaXQgPSAwOworCX0KKworCUdFTV9CVUdfT04ocmluZy0+
ZW1pdCA+IHJpbmctPnNpemUgLSBieXRlcyk7CisJR0VNX0JVR19PTihyaW5nLT5zcGFjZSA8IGJ5
dGVzKTsKKwljcyA9IHJpbmctPnZhZGRyICsgcmluZy0+ZW1pdDsKKwlHRU1fREVCVUdfRVhFQyht
ZW1zZXQzMihjcywgUE9JU09OX0lOVVNFLCBieXRlcyAvIHNpemVvZigqY3MpKSk7CisJcmluZy0+
ZW1pdCArPSBieXRlczsKKwlyaW5nLT5zcGFjZSAtPSBieXRlczsKKworCXJldHVybiBjczsKK30K
KworLyogQWxpZ24gdGhlIHJpbmcgdGFpbCB0byBhIGNhY2hlbGluZSBib3VuZGFyeSAqLworaW50
IGludGVsX3JpbmdfY2FjaGVsaW5lX2FsaWduKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQorewor
CWludCBudW1fZHdvcmRzOworCXZvaWQgKmNzOworCisJbnVtX2R3b3JkcyA9IChycS0+cmluZy0+
ZW1pdCAmIChDQUNIRUxJTkVfQllURVMgLSAxKSkgLyBzaXplb2YodTMyKTsKKwlpZiAobnVtX2R3
b3JkcyA9PSAwKQorCQlyZXR1cm4gMDsKKworCW51bV9kd29yZHMgPSBDQUNIRUxJTkVfRFdPUkRT
IC0gbnVtX2R3b3JkczsKKwlHRU1fQlVHX09OKG51bV9kd29yZHMgJiAxKTsKKworCWNzID0gaW50
ZWxfcmluZ19iZWdpbihycSwgbnVtX2R3b3Jkcyk7CisJaWYgKElTX0VSUihjcykpCisJCXJldHVy
biBQVFJfRVJSKGNzKTsKKworCW1lbXNldDY0KGNzLCAodTY0KU1JX05PT1AgPDwgMzIgfCBNSV9O
T09QLCBudW1fZHdvcmRzIC8gMik7CisJaW50ZWxfcmluZ19hZHZhbmNlKHJxLCBjcyArIG51bV9k
d29yZHMpOworCisJR0VNX0JVR19PTihycS0+cmluZy0+ZW1pdCAmIChDQUNIRUxJTkVfQllURVMg
LSAxKSk7CisJcmV0dXJuIDA7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9yaW5nLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nLmgKbmV3
IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5lYTI4MzlkOWUwNDQKLS0tIC9k
ZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nLmgKQEAgLTAs
MCArMSwxMzEgQEAKKy8qCisgKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCisgKgorICog
Q29weXJpZ2h0IMKpIDIwMTkgSW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaWZuZGVmIElOVEVM
X1JJTkdfSAorI2RlZmluZSBJTlRFTF9SSU5HX0gKKworI2luY2x1ZGUgImk5MTVfZ2VtLmgiIC8q
IEdFTV9CVUdfT04gKi8KKyNpbmNsdWRlICJpOTE1X3JlcXVlc3QuaCIKKyNpbmNsdWRlICJpbnRl
bF9yaW5nX3R5cGVzLmgiCisKK3N0cnVjdCBpbnRlbF9lbmdpbmVfY3M7CisKK3N0cnVjdCBpbnRl
bF9yaW5nICoKK2ludGVsX2VuZ2luZV9jcmVhdGVfcmluZyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICplbmdpbmUsIGludCBzaXplKTsKKwordTMyICppbnRlbF9yaW5nX2JlZ2luKHN0cnVjdCBpOTE1
X3JlcXVlc3QgKnJxLCB1bnNpZ25lZCBpbnQgbnVtX2R3b3Jkcyk7CitpbnQgaW50ZWxfcmluZ19j
YWNoZWxpbmVfYWxpZ24oc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEpOworCit1bnNpZ25lZCBpbnQg
aW50ZWxfcmluZ191cGRhdGVfc3BhY2Uoc3RydWN0IGludGVsX3JpbmcgKnJpbmcpOworCitpbnQg
aW50ZWxfcmluZ19waW4oc3RydWN0IGludGVsX3JpbmcgKnJpbmcpOwordm9pZCBpbnRlbF9yaW5n
X3VucGluKHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nKTsKK3ZvaWQgaW50ZWxfcmluZ19yZXNldChz
dHJ1Y3QgaW50ZWxfcmluZyAqcmluZywgdTMyIHRhaWwpOworCit2b2lkIGludGVsX3JpbmdfZnJl
ZShzdHJ1Y3Qga3JlZiAqcmVmKTsKKworc3RhdGljIGlubGluZSBzdHJ1Y3QgaW50ZWxfcmluZyAq
aW50ZWxfcmluZ19nZXQoc3RydWN0IGludGVsX3JpbmcgKnJpbmcpCit7CisJa3JlZl9nZXQoJnJp
bmctPnJlZik7CisJcmV0dXJuIHJpbmc7Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9pZCBpbnRlbF9y
aW5nX3B1dChzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKK3sKKwlrcmVmX3B1dCgmcmluZy0+cmVm
LCBpbnRlbF9yaW5nX2ZyZWUpOworfQorCitzdGF0aWMgaW5saW5lIHZvaWQgaW50ZWxfcmluZ19h
ZHZhbmNlKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCB1MzIgKmNzKQoreworCS8qIER1bW15IGZ1
bmN0aW9uLgorCSAqCisJICogVGhpcyBzZXJ2ZXMgYXMgYSBwbGFjZWhvbGRlciBpbiB0aGUgY29k
ZSBzbyB0aGF0IHRoZSByZWFkZXIKKwkgKiBjYW4gY29tcGFyZSBhZ2FpbnN0IHRoZSBwcmVjZWRp
bmcgaW50ZWxfcmluZ19iZWdpbigpIGFuZAorCSAqIGNoZWNrIHRoYXQgdGhlIG51bWJlciBvZiBk
d29yZHMgZW1pdHRlZCBtYXRjaGVzIHRoZSBzcGFjZQorCSAqIHJlc2VydmVkIGZvciB0aGUgY29t
bWFuZCBwYWNrZXQgKGkuZS4gdGhlIHZhbHVlIHBhc3NlZCB0bworCSAqIGludGVsX3JpbmdfYmVn
aW4oKSkuCisJICovCisJR0VNX0JVR19PTigocnEtPnJpbmctPnZhZGRyICsgcnEtPnJpbmctPmVt
aXQpICE9IGNzKTsKK30KKworc3RhdGljIGlubGluZSB1MzIgaW50ZWxfcmluZ193cmFwKGNvbnN0
IHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nLCB1MzIgcG9zKQoreworCXJldHVybiBwb3MgJiAocmlu
Zy0+c2l6ZSAtIDEpOworfQorCitzdGF0aWMgaW5saW5lIGJvb2wKK2ludGVsX3Jpbmdfb2Zmc2V0
X3ZhbGlkKGNvbnN0IHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nLAorCQkJdW5zaWduZWQgaW50IHBv
cykKK3sKKwlpZiAocG9zICYgLXJpbmctPnNpemUpIC8qIG11c3QgYmUgc3RyaWN0bHkgd2l0aGlu
IHRoZSByaW5nICovCisJCXJldHVybiBmYWxzZTsKKworCWlmICghSVNfQUxJR05FRChwb3MsIDgp
KSAvKiBtdXN0IGJlIHF3b3JkIGFsaWduZWQgKi8KKwkJcmV0dXJuIGZhbHNlOworCisJcmV0dXJu
IHRydWU7Cit9CisKK3N0YXRpYyBpbmxpbmUgdTMyIGludGVsX3Jpbmdfb2Zmc2V0KGNvbnN0IHN0
cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCB2b2lkICphZGRyKQoreworCS8qIERvbid0IHdyaXRlIHJp
bmctPnNpemUgKGVxdWl2YWxlbnQgdG8gMCkgYXMgdGhhdCBoYW5ncyBzb21lIEdQVXMuICovCisJ
dTMyIG9mZnNldCA9IGFkZHIgLSBycS0+cmluZy0+dmFkZHI7CisJR0VNX0JVR19PTihvZmZzZXQg
PiBycS0+cmluZy0+c2l6ZSk7CisJcmV0dXJuIGludGVsX3Jpbmdfd3JhcChycS0+cmluZywgb2Zm
c2V0KTsKK30KKworc3RhdGljIGlubGluZSB2b2lkCithc3NlcnRfcmluZ190YWlsX3ZhbGlkKGNv
bnN0IHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nLCB1bnNpZ25lZCBpbnQgdGFpbCkKK3sKKwlHRU1f
QlVHX09OKCFpbnRlbF9yaW5nX29mZnNldF92YWxpZChyaW5nLCB0YWlsKSk7CisKKwkvKgorCSAq
ICJSaW5nIEJ1ZmZlciBVc2UiCisJICoJR2VuMiBCU3BlYyAiMS4gUHJvZ3JhbW1pbmcgRW52aXJv
bm1lbnQiIC8gMS40LjQuNgorCSAqCUdlbjMgQlNwZWMgIjFjIE1lbW9yeSBJbnRlcmZhY2UgRnVu
Y3Rpb25zIiAvIDIuMy40LjUKKwkgKglHZW40KyBCU3BlYyAiMWMgTWVtb3J5IEludGVyZmFjZSBh
bmQgQ29tbWFuZCBTdHJlYW0iIC8gNS4zLjQuNQorCSAqICJJZiB0aGUgUmluZyBCdWZmZXIgSGVh
ZCBQb2ludGVyIGFuZCB0aGUgVGFpbCBQb2ludGVyIGFyZSBvbiB0aGUKKwkgKiBzYW1lIGNhY2hl
bGluZSwgdGhlIEhlYWQgUG9pbnRlciBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gdGhlIFRhaWwK
KwkgKiBQb2ludGVyLiIKKwkgKgorCSAqIFdlIHVzZSByaW5nLT5oZWFkIGFzIHRoZSBsYXN0IGtu
b3duIGxvY2F0aW9uIG9mIHRoZSBhY3R1YWwgUklOR19IRUFELAorCSAqIGl0IG1heSBoYXZlIGFk
dmFuY2VkIGJ1dCBpbiB0aGUgd29yc3QgY2FzZSBpdCBpcyBlcXVhbGx5IHRoZSBzYW1lCisJICog
YXMgcmluZy0+aGVhZCBhbmQgc28gd2Ugc2hvdWxkIG5ldmVyIHByb2dyYW0gUklOR19UQUlMIHRv
IGFkdmFuY2UKKwkgKiBpbnRvIHRoZSBzYW1lIGNhY2hlbGluZSBhcyByaW5nLT5oZWFkLgorCSAq
LworI2RlZmluZSBjYWNoZWxpbmUoYSkgcm91bmRfZG93bihhLCBDQUNIRUxJTkVfQllURVMpCisJ
R0VNX0JVR19PTihjYWNoZWxpbmUodGFpbCkgPT0gY2FjaGVsaW5lKHJpbmctPmhlYWQpICYmCisJ
CSAgIHRhaWwgPCByaW5nLT5oZWFkKTsKKyN1bmRlZiBjYWNoZWxpbmUKK30KKworc3RhdGljIGlu
bGluZSB1bnNpZ25lZCBpbnQKK2ludGVsX3Jpbmdfc2V0X3RhaWwoc3RydWN0IGludGVsX3Jpbmcg
KnJpbmcsIHVuc2lnbmVkIGludCB0YWlsKQoreworCS8qIFdoaWxzdCB3cml0ZXMgdG8gdGhlIHRh
aWwgYXJlIHN0cmljdGx5IG9yZGVyLCB0aGVyZSBpcyBubworCSAqIHNlcmlhbGlzYXRpb24gYmV0
d2VlbiByZWFkZXJzIGFuZCB0aGUgd3JpdGVycy4gVGhlIHRhaWwgbWF5IGJlCisJICogcmVhZCBi
eSBpOTE1X3JlcXVlc3RfcmV0aXJlKCkganVzdCBhcyBpdCBpcyBiZWluZyB1cGRhdGVkCisJICog
YnkgZXhlY2xpc3RzLCBhcyBhbHRob3VnaCB0aGUgYnJlYWRjcnVtYiBpcyBjb21wbGV0ZSwgdGhl
IGNvbnRleHQKKwkgKiBzd2l0Y2ggaGFzbid0IGJlZW4gc2Vlbi4KKwkgKi8KKwlhc3NlcnRfcmlu
Z190YWlsX3ZhbGlkKHJpbmcsIHRhaWwpOworCXJpbmctPnRhaWwgPSB0YWlsOworCXJldHVybiB0
YWlsOworfQorCitzdGF0aWMgaW5saW5lIHVuc2lnbmVkIGludAorX19pbnRlbF9yaW5nX3NwYWNl
KHVuc2lnbmVkIGludCBoZWFkLCB1bnNpZ25lZCBpbnQgdGFpbCwgdW5zaWduZWQgaW50IHNpemUp
Cit7CisJLyoKKwkgKiAiSWYgdGhlIFJpbmcgQnVmZmVyIEhlYWQgUG9pbnRlciBhbmQgdGhlIFRh
aWwgUG9pbnRlciBhcmUgb24gdGhlCisJICogc2FtZSBjYWNoZWxpbmUsIHRoZSBIZWFkIFBvaW50
ZXIgbXVzdCBub3QgYmUgZ3JlYXRlciB0aGFuIHRoZSBUYWlsCisJICogUG9pbnRlci4iCisJICov
CisJR0VNX0JVR19PTighaXNfcG93ZXJfb2ZfMihzaXplKSk7CisJcmV0dXJuIChoZWFkIC0gdGFp
bCAtIENBQ0hFTElORV9CWVRFUykgJiAoc2l6ZSAtIDEpOworfQorCisjZW5kaWYgLyogSU5URUxf
UklOR19IICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1l
bGluZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuYwppbmRleCAw
Zjk1OTY5NDMwM2MuLjE0YWQxMGFjZDU0OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfdGltZWxpbmUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF90aW1lbGluZS5jCkBAIC00LDEzICs0LDEzIEBACiAgKiBDb3B5cmlnaHQgwqkgMjAxNi0yMDE4
IEludGVsIENvcnBvcmF0aW9uCiAgKi8KIAotI2luY2x1ZGUgImd0L2ludGVsX2d0X3R5cGVzLmgi
Ci0KICNpbmNsdWRlICJpOTE1X2Rydi5oIgogCiAjaW5jbHVkZSAiaTkxNV9hY3RpdmUuaCIKICNp
bmNsdWRlICJpOTE1X3N5bmNtYXAuaCIKLSNpbmNsdWRlICJndC9pbnRlbF90aW1lbGluZS5oIgor
I2luY2x1ZGUgImludGVsX2d0LmgiCisjaW5jbHVkZSAiaW50ZWxfcmluZy5oIgorI2luY2x1ZGUg
ImludGVsX3RpbWVsaW5lLmgiCiAKICNkZWZpbmUgcHRyX3NldF9iaXQocHRyLCBiaXQpICgodHlw
ZW9mKHB0cikpKCh1bnNpZ25lZCBsb25nKShwdHIpIHwgQklUKGJpdCkpKQogI2RlZmluZSBwdHJf
dGVzdF9iaXQocHRyLCBiaXQpICgodW5zaWduZWQgbG9uZykocHRyKSAmIEJJVChiaXQpKQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMKaW5kZXggYWY4YTgxODMx
NTRhLi43Y2I2ZGFiNDM5OWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX3dvcmthcm91bmRzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29y
a2Fyb3VuZHMuYwpAQCAtNyw2ICs3LDcgQEAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1
ZGUgImludGVsX2NvbnRleHQuaCIKICNpbmNsdWRlICJpbnRlbF9ndC5oIgorI2luY2x1ZGUgImlu
dGVsX3JpbmcuaCIKICNpbmNsdWRlICJpbnRlbF93b3JrYXJvdW5kcy5oIgogCiAvKioKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9tb2NrX2VuZ2luZS5jCmluZGV4IDEyM2RiMmMzZjk1Ni4uODNmNTQ5ZDIw
M2EwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9tb2NrX2VuZ2luZS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMKQEAgLTIzLDYgKzIzLDcg
QEAKICAqLwogCiAjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCIKKyNpbmNsdWRlICJn
dC9pbnRlbF9yaW5nLmgiCiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImludGVs
X2NvbnRleHQuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0
X3RpbWVsaW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF90aW1lbGluZS5j
CmluZGV4IGRhYzg2ZjY5OWE0Yy4uZjA0YTU5ZmU1ZDJjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9zZWxmdGVzdF90aW1lbGluZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3NlbGZ0ZXN0X3RpbWVsaW5lLmMKQEAgLTksNiArOSw3IEBACiAjaW5jbHVkZSAiaW50
ZWxfZW5naW5lX3BtLmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJpbnRlbF9n
dF9yZXF1ZXN0cy5oIgorI2luY2x1ZGUgImludGVsX3JpbmcuaCIKIAogI2luY2x1ZGUgIi4uL3Nl
bGZ0ZXN0cy9pOTE1X3JhbmRvbS5oIgogI2luY2x1ZGUgIi4uL2k5MTVfc2VsZnRlc3QuaCIKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19zdWJtaXNzaW9u
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfc3VibWlzc2lvbi5jCmlu
ZGV4IDAwOWU1NGEzNzY0Zi4uMWIxNjkxYWFlZDI4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfc3VibWlzc2lvbi5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L3VjL2ludGVsX2d1Y19zdWJtaXNzaW9uLmMKQEAgLTYsMTIgKzYsMTMgQEAKICNp
bmNsdWRlIDxsaW51eC9jaXJjX2J1Zi5oPgogCiAjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX2NvbnRl
eHQuaCIKLQogI2luY2x1ZGUgImd0L2ludGVsX2NvbnRleHQuaCIKICNpbmNsdWRlICJndC9pbnRl
bF9lbmdpbmVfcG0uaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgogI2luY2x1ZGUgImd0L2lu
dGVsX2d0X3BtLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfbHJjX3JlZy5oIgorI2luY2x1ZGUgImd0
L2ludGVsX3JpbmcuaCIKKwogI2luY2x1ZGUgImludGVsX2d1Y19zdWJtaXNzaW9uLmgiCiAKICNp
bmNsdWRlICJpOTE1X2Rydi5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0
L2NtZF9wYXJzZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9jbWRfcGFyc2VyLmMKaW5k
ZXggZTc1M2IxZTcwNmUyLi42YTNhYzhjZGU5NWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d2dC9jbWRfcGFyc2VyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2Nt
ZF9wYXJzZXIuYwpAQCAtMzUsNyArMzUsOSBAQAogICovCiAKICNpbmNsdWRlIDxsaW51eC9zbGFi
Lmg+CisKICNpbmNsdWRlICJpOTE1X2Rydi5oIgorI2luY2x1ZGUgImd0L2ludGVsX3JpbmcuaCIK
ICNpbmNsdWRlICJndnQuaCIKICNpbmNsdWRlICJpOTE1X3B2aW5mby5oIgogI2luY2x1ZGUgInRy
YWNlLmgiCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvbW1pb19jb250ZXh0
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvbW1pb19jb250ZXh0LmMKaW5kZXggNDIwOGU0
MDQ0NWIxLi5hYWYxNTkxNmQyOWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2
dC9tbWlvX2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvbW1pb19jb250
ZXh0LmMKQEAgLTM1LDYgKzM1LDcgQEAKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVk
ZSAiZ3QvaW50ZWxfY29udGV4dC5oIgorI2luY2x1ZGUgImd0L2ludGVsX3JpbmcuaCIKICNpbmNs
dWRlICJndnQuaCIKICNpbmNsdWRlICJ0cmFjZS5oIgogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndnQvc2NoZWR1bGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvc2No
ZWR1bGVyLmMKaW5kZXggYTViOTQyZWUzY2ViLi4zNzc4MTFmODg1M2YgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9zY2hlZHVsZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndnQvc2NoZWR1bGVyLmMKQEAgLTM4LDYgKzM4LDcgQEAKICNpbmNsdWRlICJnZW0vaTkx
NV9nZW1fY29udGV4dC5oIgogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9wbS5oIgogI2luY2x1ZGUg
Imd0L2ludGVsX2NvbnRleHQuaCIKKyNpbmNsdWRlICJndC9pbnRlbF9yaW5nLmgiCiAKICNpbmNs
dWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImd2dC5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9hY3RpdmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfYWN0
aXZlLmMKaW5kZXggMDdkMzlmMjJhMmMzLi4yMDczODNkZGE4NGQgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfYWN0aXZlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9hY3RpdmUuYwpAQCAtNyw2ICs3LDcgQEAKICNpbmNsdWRlIDxsaW51eC9kZWJ1Z29iamVj
dHMuaD4KIAogI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV9wbS5oIgorI2luY2x1ZGUgImd0L2lu
dGVsX3JpbmcuaCIKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9hY3Rp
dmUuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKaW5kZXggMzEzMGIwYzdlZDgzLi4zOGQzZGUy
ZGZhYTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCkBAIC0yMDAsNiArMjAwLDcgQEAKICNp
bmNsdWRlICJndC9pbnRlbF9lbmdpbmVfdXNlci5oIgogI2luY2x1ZGUgImd0L2ludGVsX2d0Lmgi
CiAjaW5jbHVkZSAiZ3QvaW50ZWxfbHJjX3JlZy5oIgorI2luY2x1ZGUgImd0L2ludGVsX3Jpbmcu
aCIKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9wZXJmLmgiCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jCmluZGV4IDQ1NzVmMzY4NDU1ZC4uOTMyYzVjZjE5MGI1
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYwpAQCAtMzEsNiArMzEsNyBAQAogCiAj
aW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCIKICNpbmNsdWRlICJndC9pbnRlbF9jb250
ZXh0LmgiCisjaW5jbHVkZSAiZ3QvaW50ZWxfcmluZy5oIgogCiAjaW5jbHVkZSAiaTkxNV9hY3Rp
dmUuaCIKICNpbmNsdWRlICJpOTE1X2Rydi5oIgotLSAKMi4yNC4wLnJjMAoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlz
dApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

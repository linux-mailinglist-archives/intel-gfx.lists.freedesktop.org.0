Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D88D2222E5D
	for <lists+intel-gfx@lfdr.de>; Fri, 17 Jul 2020 00:06:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6DC7F6ED01;
	Thu, 16 Jul 2020 22:06:01 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6CD526ED01
 for <intel-gfx@lists.freedesktop.org>; Thu, 16 Jul 2020 22:06:00 +0000 (UTC)
IronPort-SDR: pltz1i/CaTYcujqzdKsi92Cs4iERyB8p904tuhXsQt+EDU8dx8ITQeY73EbyAvzBlj/YBZOa2p
 5ggcsM2im1sA==
X-IronPort-AV: E=McAfee;i="6000,8403,9684"; a="137621962"
X-IronPort-AV: E=Sophos;i="5.75,360,1589266800"; d="scan'208";a="137621962"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by orsmga101.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 16 Jul 2020 15:06:00 -0700
IronPort-SDR: ifm8p0EjF2AwdQ/MMhwKDJEUWb6vZOoDFJBBHKrCYedsyBhKBQpZRjK1Tle8np4p0LZiAMEXlj
 8bOiKzIjo9jg==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.75,360,1589266800"; d="scan'208";a="282596091"
Received: from mdroper-desk1.fm.intel.com ([10.1.27.168])
 by orsmga003.jf.intel.com with ESMTP; 16 Jul 2020 15:06:00 -0700
From: Matt Roper <matthew.d.roper@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 16 Jul 2020 15:05:47 -0700
Message-Id: <20200716220551.2730644-2-matthew.d.roper@intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200716220551.2730644-1-matthew.d.roper@intel.com>
References: <20200716220551.2730644-1-matthew.d.roper@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v8 1/5] drm/i915/rkl: Handle new DPCLKA_CFGCR0
 layout
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UktMIHVzZXMgYSBzbGlnaHRseSBkaWZmZXJlbnQgYml0IGxheW91dCBmb3IgdGhlIERQQ0xLQV9D
RkdDUjAgcmVnaXN0ZXIuCgp2MjoKIC0gRml4IGludmVydGVkIG1hc2sgYXBwbGljYXRpb24gd2hl
biB1cGRhdGluZyBJQ0xfRFBDTEtBX0NGR0NSMAogLSBDaGVja3BhdGNoIHN0eWxlIGZpeGVzCgpC
c3BlYzogNTAyODcKQ2M6IEFkaXR5YSBTd2FydXAgPGFkaXR5YS5zd2FydXBAaW50ZWwuY29tPgpT
aWduZWQtb2ZmLWJ5OiBNYXR0IFJvcGVyIDxtYXR0aGV3LmQucm9wZXJAaW50ZWwuY29tPgpSZXZp
ZXdlZC1ieTogSm9zw6kgUm9iZXJ0byBkZSBTb3V6YSA8am9zZS5zb3V6YUBpbnRlbC5jb20+Ci0t
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYyAgICAgfCAxOCArKysr
KysrKysrKysrKystLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eS5jIHwgMTUgKysrKysrKysrKysrLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5o
ICAgICAgICAgICAgICB8ICA2ICsrKysrKwogMyBmaWxlcyBjaGFuZ2VkLCAzMyBpbnNlcnRpb25z
KCspLCA2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGRpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rk
aS5jCmluZGV4IGM1MmFkNWVjYjY0NS4uMWNhNzBmOWFiYzhkIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKQEAgLTI4NDUsNyArMjg0NSw5IEBAIGhzd19zZXRfc2ln
bmFsX2xldmVscyhzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKQogc3RhdGljIHUzMiBpY2xfZHBj
bGthX2NmZ2NyMF9jbGtfb2ZmKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJ
CQkgICAgIGVudW0gcGh5IHBoeSkKIHsKLQlpZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2
LCBwaHkpKSB7CisJaWYgKElTX1JPQ0tFVExBS0UoZGV2X3ByaXYpKSB7CisJCXJldHVybiBSS0xf
RFBDTEtBX0NGR0NSMF9ERElfQ0xLX09GRihwaHkpOworCX0gZWxzZSBpZiAoaW50ZWxfcGh5X2lz
X2NvbWJvKGRldl9wcml2LCBwaHkpKSB7CiAJCXJldHVybiBJQ0xfRFBDTEtBX0NGR0NSMF9ERElf
Q0xLX09GRihwaHkpOwogCX0gZWxzZSBpZiAoaW50ZWxfcGh5X2lzX3RjKGRldl9wcml2LCBwaHkp
KSB7CiAJCWVudW0gdGNfcG9ydCB0Y19wb3J0ID0gaW50ZWxfcG9ydF90b190YyhkZXZfcHJpdiwK
QEAgLTI4NzIsNiArMjg3NCwxNiBAQCBzdGF0aWMgdm9pZCBpY2xfbWFwX3BsbHNfdG9fcG9ydHMo
c3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCSAgICAodmFsICYgaWNsX2RwY2xrYV9j
ZmdjcjBfY2xrX29mZihkZXZfcHJpdiwgcGh5KSkgPT0gMCk7CiAKIAlpZiAoaW50ZWxfcGh5X2lz
X2NvbWJvKGRldl9wcml2LCBwaHkpKSB7CisJCXUzMiBtYXNrLCBzZWw7CisKKwkJaWYgKElTX1JP
Q0tFVExBS0UoZGV2X3ByaXYpKSB7CisJCQltYXNrID0gUktMX0RQQ0xLQV9DRkdDUjBfRERJX0NM
S19TRUxfTUFTSyhwaHkpOworCQkJc2VsID0gUktMX0RQQ0xLQV9DRkdDUjBfRERJX0NMS19TRUwo
cGxsLT5pbmZvLT5pZCwgcGh5KTsKKwkJfSBlbHNlIHsKKwkJCW1hc2sgPSBJQ0xfRFBDTEtBX0NG
R0NSMF9ERElfQ0xLX1NFTF9NQVNLKHBoeSk7CisJCQlzZWwgPSBJQ0xfRFBDTEtBX0NGR0NSMF9E
RElfQ0xLX1NFTChwbGwtPmluZm8tPmlkLCBwaHkpOworCQl9CisKIAkJLyoKIAkJICogRXZlbiB0
aG91Z2ggdGhpcyByZWdpc3RlciByZWZlcmVuY2VzIERESXMsIG5vdGUgdGhhdCB3ZQogCQkgKiB3
YW50IHRvIHBhc3MgdGhlIFBIWSByYXRoZXIgdGhhbiB0aGUgcG9ydCAoRERJKS4gIEZvcgpAQCAt
Mjg4Miw4ICsyODk0LDggQEAgc3RhdGljIHZvaWQgaWNsX21hcF9wbGxzX3RvX3BvcnRzKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkgKiAgIENsb2NrIFNlbGVjdCBjaG9vc2VzIHRo
ZSBQTEwgZm9yIGJvdGggRERJQSBhbmQgRERJRCBhbmQKIAkJICogICBkcml2ZXMgcG9ydCBBIGlu
IGFsbCBjYXNlcy4iCiAJCSAqLwotCQl2YWwgJj0gfklDTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtf
U0VMX01BU0socGh5KTsKLQkJdmFsIHw9IElDTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMKHBs
bC0+aW5mby0+aWQsIHBoeSk7CisJCXZhbCAmPSB+bWFzazsKKwkJdmFsIHw9IHNlbDsKIAkJaW50
ZWxfZGVfd3JpdGUoZGV2X3ByaXYsIElDTF9EUENMS0FfQ0ZHQ1IwLCB2YWwpOwogCQlpbnRlbF9k
ZV9wb3N0aW5nX3JlYWQoZGV2X3ByaXYsIElDTF9EUENMS0FfQ0ZHQ1IwKTsKIAl9CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4IDcyOWVjNmUwZDQz
YS4uNmNiNjY1ODBhZDJjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXkuYwpAQCAtMTA4MDIsOSArMTA4MDIsMTggQEAgc3RhdGljIHZvaWQgaWNsX2dldF9k
ZGlfcGxsKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgZW51bSBwb3J0IHBvcnQs
CiAJdTMyIHRlbXA7CiAKIAlpZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKSB7
Ci0JCXRlbXAgPSBpbnRlbF9kZV9yZWFkKGRldl9wcml2LCBJQ0xfRFBDTEtBX0NGR0NSMCkgJgot
CQkJSUNMX0RQQ0xLQV9DRkdDUjBfRERJX0NMS19TRUxfTUFTSyhwaHkpOwotCQlpZCA9IHRlbXAg
Pj4gSUNMX0RQQ0xLQV9DRkdDUjBfRERJX0NMS19TRUxfU0hJRlQocGh5KTsKKwkJdTMyIG1hc2ss
IHNoaWZ0OworCisJCWlmIChJU19ST0NLRVRMQUtFKGRldl9wcml2KSkgeworCQkJbWFzayA9IFJL
TF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX01BU0socGh5KTsKKwkJCXNoaWZ0ID0gUktMX0RQ
Q0xLQV9DRkdDUjBfRERJX0NMS19TRUxfU0hJRlQocGh5KTsKKwkJfSBlbHNlIHsKKwkJCW1hc2sg
PSBJQ0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NFTF9NQVNLKHBoeSk7CisJCQlzaGlmdCA9IElD
TF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX1NISUZUKHBoeSk7CisJCX0KKworCQl0ZW1wID0g
aW50ZWxfZGVfcmVhZChkZXZfcHJpdiwgSUNMX0RQQ0xLQV9DRkdDUjApICYgbWFzazsKKwkJaWQg
PSB0ZW1wID4+IHNoaWZ0OwogCQlwb3J0X2RwbGxfaWQgPSBJQ0xfUE9SVF9EUExMX0RFRkFVTFQ7
CiAJfSBlbHNlIGlmIChpbnRlbF9waHlfaXNfdGMoZGV2X3ByaXYsIHBoeSkpIHsKIAkJdTMyIGNs
a19zZWwgPSBpbnRlbF9kZV9yZWFkKGRldl9wcml2LCBERElfQ0xLX1NFTChwb3J0KSkgJiBERElf
Q0xLX1NFTF9NQVNLOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcu
aCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKaW5kZXggYjk2MDdhYzM2MjBkLi4w
MDQxNGM0NTc5NDEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaApAQCAtMTAyNzksMTIgKzEwMjc5
LDE4IEBAIGVudW0gc2tsX3Bvd2VyX2dhdGUgewogCiAjZGVmaW5lIElDTF9EUENMS0FfQ0ZHQ1Iw
CQkJX01NSU8oMHgxNjQyODApCiAjZGVmaW5lICBJQ0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX09G
RihwaHkpCSgxIDw8IF9QSUNLKHBoeSwgMTAsIDExLCAyNCkpCisjZGVmaW5lICBSS0xfRFBDTEtB
X0NGR0NSMF9ERElfQ0xLX09GRihwaHkpCVJFR19CSVQoKHBoeSkgKyAxMCkKICNkZWZpbmUgIElD
TF9EUENMS0FfQ0ZHQ1IwX1RDX0NMS19PRkYodGNfcG9ydCkJKDEgPDwgKCh0Y19wb3J0KSA8IFBP
UlRfVEM0ID8gXAogCQkJCQkJICAgICAgICh0Y19wb3J0KSArIDEyIDogXAogCQkJCQkJICAgICAg
ICh0Y19wb3J0KSAtIFBPUlRfVEM0ICsgMjEpKQogI2RlZmluZSAgSUNMX0RQQ0xLQV9DRkdDUjBf
RERJX0NMS19TRUxfU0hJRlQocGh5KQkoKHBoeSkgKiAyKQogI2RlZmluZSAgSUNMX0RQQ0xLQV9D
RkdDUjBfRERJX0NMS19TRUxfTUFTSyhwaHkpCSgzIDw8IElDTF9EUENMS0FfQ0ZHQ1IwX0RESV9D
TEtfU0VMX1NISUZUKHBoeSkpCiAjZGVmaW5lICBJQ0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NF
TChwbGwsIHBoeSkJKChwbGwpIDw8IElDTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX1NISUZU
KHBoeSkpCisjZGVmaW5lICBSS0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NFTF9TSElGVChwaHkp
CV9QSUNLKHBoeSwgMCwgMiwgNCwgMjcpCisjZGVmaW5lICBSS0xfRFBDTEtBX0NGR0NSMF9ERElf
Q0xLX1NFTF9NQVNLKHBoeSkgXAorCSgzIDw8IFJLTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VM
X1NISUZUKHBoeSkpCisjZGVmaW5lICBSS0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NFTChwbGws
IHBoeSkgXAorCSgocGxsKSA8PCBSS0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NFTF9TSElGVChw
aHkpKQogCiAvKiBDTkwgUExMICovCiAjZGVmaW5lIERQTEwwX0VOQUJMRQkJMHg0NjAxMAotLSAK
Mi4yNC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJ
bnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

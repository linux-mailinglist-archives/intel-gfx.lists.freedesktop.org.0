Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8FA86160DB8
	for <lists+intel-gfx@lfdr.de>; Mon, 17 Feb 2020 09:46:50 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 665266E85B;
	Mon, 17 Feb 2020 08:46:47 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BD8BE6E85B
 for <intel-gfx@lists.freedesktop.org>; Mon, 17 Feb 2020 08:46:45 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 17 Feb 2020 00:46:44 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,451,1574150400"; d="scan'208";a="227974453"
Received: from irsmsx154.ger.corp.intel.com ([163.33.192.96])
 by fmsmga007.fm.intel.com with ESMTP; 17 Feb 2020 00:46:42 -0800
Received: from irsmsx606.ger.corp.intel.com (163.33.146.139) by
 IRSMSX154.ger.corp.intel.com (163.33.192.96) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Mon, 17 Feb 2020 08:46:41 +0000
Received: from irsmsx604.ger.corp.intel.com (163.33.146.137) by
 IRSMSX606.ger.corp.intel.com (163.33.146.139) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id
 15.1.1713.5; Mon, 17 Feb 2020 08:46:40 +0000
Received: from irsmsx604.ger.corp.intel.com ([163.33.146.137]) by
 IRSMSX604.ger.corp.intel.com ([163.33.146.137]) with mapi id 15.01.1713.004;
 Mon, 17 Feb 2020 08:46:40 +0000
From: "Lisovskiy, Stanislav" <stanislav.lisovskiy@intel.com>
To: "ville.syrjala@linux.intel.com" <ville.syrjala@linux.intel.com>,
 "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>
Thread-Topic: [PATCH 1/6] drm/i915: Introduce proper dbuf state
Thread-Index: AQHV4p4nc2MvEpA/g02zHFcCh9GYS6gfF22A
Date: Mon, 17 Feb 2020 08:46:40 +0000
Message-ID: <eb8d4416a1f73761899953e3ff62776c7fb18dc7.camel@intel.com>
References: <20200213184800.14147-1-ville.syrjala@linux.intel.com>
 <20200213184800.14147-2-ville.syrjala@linux.intel.com>
In-Reply-To: <20200213184800.14147-2-ville.syrjala@linux.intel.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.237.72.89]
Content-ID: <0279D8C49D3E4A44AED67095BE2D4659@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH 1/6] drm/i915: Introduce proper dbuf state
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCAyMDIwLTAyLTEzIGF0IDIwOjQ3ICswMjAwLCBWaWxsZSBTeXJqYWxhIHdyb3RlOg0K
PiBGcm9tOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPg0K
PiANCj4gQWRkIGEgZ2xvYmFsIHN0YXRlIHRvIHRyYWNrIHRoZSBkYnVmIHNsaWNlcy4gR2V0cyBy
aWQgb2YgYWxsIHRoZQ0KPiBuYXN0eQ0KPiBjb3VwbGluZyBiZXR3ZWVuIHN0YXRlLT5tb2Rlc2V0
IGFuZCBkYnVmIHJlY29tcHVsYXRpb24uIEFsc28gd2UgY2FuDQo+IG5vdw0KPiB0b3RhbGx5IG51
a2Ugc3RhdGUtPmFjdGl2ZV9waXBlX2NoYW5nZXMuDQo+IA0KPiBkZXZfcHJpdi0+d20uZGlzdHJ1
c3RfYmlvc193bSBzdGlsbCByZW1haW5zLCBidXQgc2hvdWxkIHByb2JhYmx5IGFsc28NCj4gZ2V0
IG51a2VkIGZyb20gb3JiaXQgbGF0ZXIuIEp1c3QgZGlkbid0IHNwZW5kIGFueSBzaWduaWZpY2Fu
dCB0aW1lDQo+IHBvbmRlcmluZyBob3cgdG8gZ28gYWJvdXQuIFRoZSBvYnZpb3VzIHRoaW5nIHdv
dWxkIGJlIHRvIGp1c3QNCj4gcmVjb21wdXRlDQo+IHRoZSB0aGluZyBldmVyeSB0aW1lLg0KPiAN
Cj4gQ2M6IFN0YW5pc2xhdiBMaXNvdnNraXkgPHN0YW5pc2xhdi5saXNvdnNraXlAaW50ZWwuY29t
Pg0KPiBTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXgu
aW50ZWwuY29tPg0KPiAtLS0NCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheS5jICB8ICA2OSArKysrLS0tDQo+ICAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5X3Bvd2VyLmMgICAgfCAgIDQgKy0NCj4gIC4uLi9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXlfdHlwZXMuaCAgICB8ICAxMyAtLQ0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuaCAgICAgICAgICAgICAgIHwgIDExICstDQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9p
bnRlbF9wbS5jICAgICAgICAgICAgICAgfCAxODUgKysrKysrKysrKysrLS0NCj4gLS0tLQ0KPiAg
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uaCAgICAgICAgICAgICAgIHwgIDIyICsrKw0K
PiAgNiBmaWxlcyBjaGFuZ2VkLCAyMDUgaW5zZXJ0aW9ucygrKSwgOTkgZGVsZXRpb25zKC0pDQo+
IA0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5LmMNCj4gYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYw0K
PiBpbmRleCBlMDlkM2M5M2M1MmIuLmUzMzFhYjkwMDMzNiAxMDA2NDQNCj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMNCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMNCj4gQEAgLTc1NTgsNiArNzU1OCw4
IEBAIHN0YXRpYyB2b2lkIGludGVsX2NydGNfZGlzYWJsZV9ub2F0b21pYyhzdHJ1Y3QNCj4gaW50
ZWxfY3J0YyAqY3J0YywNCj4gIAkJdG9faW50ZWxfYndfc3RhdGUoZGV2X3ByaXYtPmJ3X29iai5z
dGF0ZSk7DQo+ICAJc3RydWN0IGludGVsX2NkY2xrX3N0YXRlICpjZGNsa19zdGF0ZSA9DQo+ICAJ
CXRvX2ludGVsX2NkY2xrX3N0YXRlKGRldl9wcml2LT5jZGNsay5vYmouc3RhdGUpOw0KPiArCXN0
cnVjdCBpbnRlbF9kYnVmX3N0YXRlICpkYnVmX3N0YXRlID0NCj4gKwkJdG9faW50ZWxfZGJ1Zl9z
dGF0ZShkZXZfcHJpdi0+ZGJ1Zi5vYmouc3RhdGUpOw0KPiAgCXN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpjcnRjX3N0YXRlID0NCj4gIAkJdG9faW50ZWxfY3J0Y19zdGF0ZShjcnRjLT5iYXNlLnN0
YXRlKTsNCj4gIAllbnVtIGludGVsX2Rpc3BsYXlfcG93ZXJfZG9tYWluIGRvbWFpbjsNCj4gQEAg
LTc2MzAsNiArNzYzMiw4IEBAIHN0YXRpYyB2b2lkIGludGVsX2NydGNfZGlzYWJsZV9ub2F0b21p
YyhzdHJ1Y3QNCj4gaW50ZWxfY3J0YyAqY3J0YywNCj4gIAljZGNsa19zdGF0ZS0+bWluX3ZvbHRh
Z2VfbGV2ZWxbcGlwZV0gPSAwOw0KPiAgCWNkY2xrX3N0YXRlLT5hY3RpdmVfcGlwZXMgJj0gfkJJ
VChwaXBlKTsNCj4gIA0KPiArCWRidWZfc3RhdGUtPmFjdGl2ZV9waXBlcyAmPSB+QklUKHBpcGUp
Ow0KPiArDQoNCk1heSBiZSBJJ20gd3Jvbmcoc28gYmVpbmcgbm90IG9mZmVuc2l2ZSBoZXJlIDop
ICksIGJ1dCBmZWVscyBraW5kIG9mDQpyZWR1bmRhbnQgdG8gaGF2ZSBhY3RpdmVfcGlwZXMgaW4g
Y2RjbGtfc3RhdGUgYW5kIGF0IHRoZSBzYW1lIHRpbWUgaW4NCmRidWZfc3RhdGUuIFdoeSBjYW4n
dCBpdCBiZSBzdGlsbCANCmluIHNvbWUgbW9yZSBnZW5lcmFsIHN0YXRlLCB3aGljaCBpcyBpbmhl
cml0ZWQvdXNlZC9hZ2dyZWdhdGVkIGJ5IHRob3NlDQpkYnVmIGFuZCBjZGNsayBzdGF0ZXM/IE90
aGVyd2lzZSB5b3Ugd2lsbCBoYXZlIHRvIGRvIHRoaXMgZHVwbGljYXRlDQpjb2RlIGluaXRpYWxp
emF0aW9ucyB3aGljaCBJIHNlZSBoZXJlLCBmb3IgZXhhbXBsZSBpZiB0aGVyZSB3b3VsZCBiZQ0K
ZXZlbiBtb3JlIHN0YXRlcyB5b3UgaGF2ZSB0aGVuIHRocmVlIG9yIG1vcmUgc2ltaWxhciBpbml0
aWFsaXphdGlvbnMNCmhlcmUsDQpkb2luZyB0aGUgc2FtZSB0aGluZy4gVGhpcyBwcmV0dHkgbXVj
aCBpbmNyZWFzZXMgcHJvYmFiaWxpdHkgdGhhdA0Kc29tZXdoZXJlIGluIHRoZSBjb2RlLCB5b3Ug
d2lsbCBldmVudHVhbGx5IGZvcmdldCB0byBkbyBhbGwNCmluaXRpYWxpemF0aW9ucyh3ZWxsIEkg
Z3Vlc3MgeW91IHVuZGVyc3RhbmQpLg0KT3IgaWYgeW91IHdpbGwgaGF2ZSB0byB1cGRhdGUgdGhl
IGJlaGF2aW9yLCBiYXNlZCBvbiBhY3RpdmVfcGlwZXMgaGVyZQ0Kc29tZWhvdywgeW91IHdpbGwg
YWxzbyBoYXZlIHRvIGNoYW5nZSB0aGUgZHVwbGljYXRlIGNvZGUgYWxsIG92ZXIgdGhlDQpwbGFj
ZS4NCg0KDQo+ICAJYndfc3RhdGUtPmRhdGFfcmF0ZVtwaXBlXSA9IDA7DQo+ICAJYndfc3RhdGUt
Pm51bV9hY3RpdmVfcGxhbmVzW3BpcGVdID0gMDsNCj4gIH0NCj4gQEAgLTE0MDg5LDEwICsxNDA5
MywxMCBAQCBzdGF0aWMgdm9pZCB2ZXJpZnlfd21fc3RhdGUoc3RydWN0DQo+IGludGVsX2NydGMg
KmNydGMsDQo+ICAJaHdfZW5hYmxlZF9zbGljZXMgPSBpbnRlbF9lbmFibGVkX2RidWZfc2xpY2Vz
X21hc2soZGV2X3ByaXYpOw0KPiAgDQo+ICAJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTEg
JiYNCj4gLQkgICAgaHdfZW5hYmxlZF9zbGljZXMgIT0gZGV2X3ByaXYtPmVuYWJsZWRfZGJ1Zl9z
bGljZXNfbWFzaykNCj4gKwkgICAgaHdfZW5hYmxlZF9zbGljZXMgIT0gZGV2X3ByaXYtPmRidWYu
ZW5hYmxlZF9zbGljZXMpDQo+ICAJCWRybV9lcnIoJmRldl9wcml2LT5kcm0sDQo+ICAJCQkibWlz
bWF0Y2ggaW4gREJVRiBTbGljZXMgKGV4cGVjdGVkIDB4JXgsIGdvdA0KPiAweCV4KVxuIiwNCj4g
LQkJCWRldl9wcml2LT5lbmFibGVkX2RidWZfc2xpY2VzX21hc2ssDQo+ICsJCQlkZXZfcHJpdi0+
ZGJ1Zi5lbmFibGVkX3NsaWNlcywNCj4gIAkJCWh3X2VuYWJsZWRfc2xpY2VzKTsNCj4gIA0KPiAg
CS8qIHBsYW5lcyAqLw0KPiBAQCAtMTQ2MjcsOSArMTQ2MzEsNyBAQCBzdGF0aWMgaW50IGludGVs
X21vZGVzZXRfY2hlY2tzKHN0cnVjdA0KPiBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQ0KPiAg
CXN0YXRlLT5tb2Rlc2V0ID0gdHJ1ZTsNCj4gIAlzdGF0ZS0+YWN0aXZlX3BpcGVzID0gaW50ZWxf
Y2FsY19hY3RpdmVfcGlwZXMoc3RhdGUsIGRldl9wcml2LQ0KPiA+YWN0aXZlX3BpcGVzKTsNCj4g
IA0KPiAtCXN0YXRlLT5hY3RpdmVfcGlwZV9jaGFuZ2VzID0gc3RhdGUtPmFjdGl2ZV9waXBlcyBe
IGRldl9wcml2LQ0KPiA+YWN0aXZlX3BpcGVzOw0KPiAtDQo+IC0JaWYgKHN0YXRlLT5hY3RpdmVf
cGlwZV9jaGFuZ2VzKSB7DQo+ICsJaWYgKHN0YXRlLT5hY3RpdmVfcGlwZXMgIT0gZGV2X3ByaXYt
PmFjdGl2ZV9waXBlcykgew0KPiAgCQlyZXQgPSBfaW50ZWxfYXRvbWljX2xvY2tfZ2xvYmFsX3N0
YXRlKHN0YXRlKTsNCj4gIAkJaWYgKHJldCkNCj4gIAkJCXJldHVybiByZXQ7DQo+IEBAIC0xNTQ1
MCwyNCArMTU0NTIsMzggQEAgc3RhdGljIHZvaWQNCj4gaW50ZWxfdXBkYXRlX3RyYW5zX3BvcnRf
c3luY19jcnRjcyhzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywNCj4gIHN0YXRpYyB2b2lkIGljbF9k
YnVmX3NsaWNlX3ByZV91cGRhdGUoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZQ0KPiAqc3RhdGUp
DQo+ICB7DQo+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShz
dGF0ZS0+YmFzZS5kZXYpOw0KPiAtCXU4IGh3X2VuYWJsZWRfc2xpY2VzID0gZGV2X3ByaXYtPmVu
YWJsZWRfZGJ1Zl9zbGljZXNfbWFzazsNCj4gLQl1OCByZXF1aXJlZF9zbGljZXMgPSBzdGF0ZS0+
ZW5hYmxlZF9kYnVmX3NsaWNlc19tYXNrOw0KPiAtCXU4IHNsaWNlc191bmlvbiA9IGh3X2VuYWJs
ZWRfc2xpY2VzIHwgcmVxdWlyZWRfc2xpY2VzOw0KPiArCWNvbnN0IHN0cnVjdCBpbnRlbF9kYnVm
X3N0YXRlICpuZXdfZGJ1Zl9zdGF0ZSA9DQo+ICsJCWludGVsX2F0b21pY19nZXRfbmV3X2RidWZf
c3RhdGUoc3RhdGUpOw0KPiArCWNvbnN0IHN0cnVjdCBpbnRlbF9kYnVmX3N0YXRlICpvbGRfZGJ1
Zl9zdGF0ZSA9DQo+ICsJCWludGVsX2F0b21pY19nZXRfb2xkX2RidWZfc3RhdGUoc3RhdGUpOw0K
PiArDQo+ICsJaWYgKCFuZXdfZGJ1Zl9zdGF0ZSB8fA0KPiArCSAgICBuZXdfZGJ1Zl9zdGF0ZS0+
ZW5hYmxlZF9zbGljZXMgPT0gb2xkX2RidWZfc3RhdGUtDQo+ID5lbmFibGVkX3NsaWNlcykNCj4g
KwkJcmV0dXJuOw0KPiAgDQo+IC0JLyogSWYgMm5kIERCdWYgc2xpY2UgcmVxdWlyZWQsIGVuYWJs
ZSBpdCBoZXJlICovDQo+IC0JaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTEgJiYgc2xpY2Vz
X3VuaW9uICE9DQo+IGh3X2VuYWJsZWRfc2xpY2VzKQ0KPiAtCQlpY2xfZGJ1Zl9zbGljZXNfdXBk
YXRlKGRldl9wcml2LCBzbGljZXNfdW5pb24pOw0KPiArCVdBUk5fT04oIW5ld19kYnVmX3N0YXRl
LT5iYXNlLmNoYW5nZWQpOw0KPiArDQo+ICsJaWNsX2RidWZfc2xpY2VzX3VwZGF0ZShkZXZfcHJp
diwNCj4gKwkJCSAgICAgICBvbGRfZGJ1Zl9zdGF0ZS0+ZW5hYmxlZF9zbGljZXMgfA0KPiArCQkJ
ICAgICAgIG5ld19kYnVmX3N0YXRlLT5lbmFibGVkX3NsaWNlcyk7DQo+ICB9DQo+ICANCj4gIHN0
YXRpYyB2b2lkIGljbF9kYnVmX3NsaWNlX3Bvc3RfdXBkYXRlKHN0cnVjdCBpbnRlbF9hdG9taWNf
c3RhdGUNCj4gKnN0YXRlKQ0KPiAgew0KPiAgCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiA9IHRvX2k5MTUoc3RhdGUtPmJhc2UuZGV2KTsNCj4gLQl1OCBod19lbmFibGVkX3NsaWNl
cyA9IGRldl9wcml2LT5lbmFibGVkX2RidWZfc2xpY2VzX21hc2s7DQo+IC0JdTggcmVxdWlyZWRf
c2xpY2VzID0gc3RhdGUtPmVuYWJsZWRfZGJ1Zl9zbGljZXNfbWFzazsNCj4gKwljb25zdCBzdHJ1
Y3QgaW50ZWxfZGJ1Zl9zdGF0ZSAqbmV3X2RidWZfc3RhdGUgPQ0KPiArCQlpbnRlbF9hdG9taWNf
Z2V0X25ld19kYnVmX3N0YXRlKHN0YXRlKTsNCj4gKwljb25zdCBzdHJ1Y3QgaW50ZWxfZGJ1Zl9z
dGF0ZSAqb2xkX2RidWZfc3RhdGUgPQ0KPiArCQlpbnRlbF9hdG9taWNfZ2V0X29sZF9kYnVmX3N0
YXRlKHN0YXRlKTsNCj4gKw0KPiArCWlmICghbmV3X2RidWZfc3RhdGUgfHwNCj4gKwkgICAgbmV3
X2RidWZfc3RhdGUtPmVuYWJsZWRfc2xpY2VzID09IG9sZF9kYnVmX3N0YXRlLQ0KPiA+ZW5hYmxl
ZF9zbGljZXMpDQo+ICsJCXJldHVybjsNCj4gIA0KPiAtCS8qIElmIDJuZCBEQnVmIHNsaWNlIGlz
IG5vIG1vcmUgcmVxdWlyZWQgZGlzYWJsZSBpdCAqLw0KPiAtCWlmIChJTlRFTF9HRU4oZGV2X3By
aXYpID49IDExICYmIHJlcXVpcmVkX3NsaWNlcyAhPQ0KPiBod19lbmFibGVkX3NsaWNlcykNCj4g
LQkJaWNsX2RidWZfc2xpY2VzX3VwZGF0ZShkZXZfcHJpdiwgcmVxdWlyZWRfc2xpY2VzKTsNCj4g
KwlXQVJOX09OKCFuZXdfZGJ1Zl9zdGF0ZS0+YmFzZS5jaGFuZ2VkKTsNCj4gKw0KPiArCWljbF9k
YnVmX3NsaWNlc191cGRhdGUoZGV2X3ByaXYsDQo+ICsJCQkgICAgICAgbmV3X2RidWZfc3RhdGUt
PmVuYWJsZWRfc2xpY2VzKTsNCj4gIH0NCj4gIA0KPiAgc3RhdGljIHZvaWQgc2tsX2NvbW1pdF9t
b2Rlc2V0X2VuYWJsZXMoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZQ0KPiAqc3RhdGUpDQo+IEBA
IC0xNTcyMiw5ICsxNTczOCw3IEBAIHN0YXRpYyB2b2lkIGludGVsX2F0b21pY19jb21taXRfdGFp
bChzdHJ1Y3QNCj4gaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkNCj4gIAlpZiAoc3RhdGUtPm1v
ZGVzZXQpDQo+ICAJCWludGVsX2VuY29kZXJzX3VwZGF0ZV9wcmVwYXJlKHN0YXRlKTsNCj4gIA0K
PiAtCS8qIEVuYWJsZSBhbGwgbmV3IHNsaWNlcywgd2UgbWlnaHQgbmVlZCAqLw0KPiAtCWlmIChz
dGF0ZS0+bW9kZXNldCkNCj4gLQkJaWNsX2RidWZfc2xpY2VfcHJlX3VwZGF0ZShzdGF0ZSk7DQo+
ICsJaWNsX2RidWZfc2xpY2VfcHJlX3VwZGF0ZShzdGF0ZSk7DQo+ICANCj4gIAkvKiBOb3cgZW5h
YmxlIHRoZSBjbG9ja3MsIHBsYW5lLCBwaXBlLCBhbmQgY29ubmVjdG9ycyB0aGF0IHdlDQo+IHNl
dCB1cC4gKi8NCj4gIAlkZXZfcHJpdi0+ZGlzcGxheS5jb21taXRfbW9kZXNldF9lbmFibGVzKHN0
YXRlKTsNCj4gQEAgLTE1Nzc5LDkgKzE1NzkzLDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfYXRvbWlj
X2NvbW1pdF90YWlsKHN0cnVjdA0KPiBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQ0KPiAgCQkJ
ZGV2X3ByaXYtPmRpc3BsYXkub3B0aW1pemVfd2F0ZXJtYXJrcyhzdGF0ZSwNCj4gY3J0Yyk7DQo+
ICAJfQ0KPiAgDQo+IC0JLyogRGlzYWJsZSBhbGwgc2xpY2VzLCB3ZSBkb24ndCBuZWVkICovDQo+
IC0JaWYgKHN0YXRlLT5tb2Rlc2V0KQ0KPiAtCQlpY2xfZGJ1Zl9zbGljZV9wb3N0X3VwZGF0ZShz
dGF0ZSk7DQo+ICsJaWNsX2RidWZfc2xpY2VfcG9zdF91cGRhdGUoc3RhdGUpOw0KPiAgDQo+ICAJ
Zm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsDQo+IG9sZF9j
cnRjX3N0YXRlLCBuZXdfY3J0Y19zdGF0ZSwgaSkgew0KPiAgCQlpbnRlbF9wb3N0X3BsYW5lX3Vw
ZGF0ZShzdGF0ZSwgY3J0Yyk7DQo+IEBAIC0xNzY2NywxMCArMTc2NzksMTQgQEAgdm9pZCBpbnRl
bF9tb2Rlc2V0X2luaXRfaHcoc3RydWN0DQo+IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpDQo+ICB7
DQo+ICAJc3RydWN0IGludGVsX2NkY2xrX3N0YXRlICpjZGNsa19zdGF0ZSA9DQo+ICAJCXRvX2lu
dGVsX2NkY2xrX3N0YXRlKGk5MTUtPmNkY2xrLm9iai5zdGF0ZSk7DQo+ICsJc3RydWN0IGludGVs
X2RidWZfc3RhdGUgKmRidWZfc3RhdGUgPQ0KPiArCQl0b19pbnRlbF9kYnVmX3N0YXRlKGk5MTUt
PmRidWYub2JqLnN0YXRlKTsNCj4gIA0KPiAgCWludGVsX3VwZGF0ZV9jZGNsayhpOTE1KTsNCj4g
IAlpbnRlbF9kdW1wX2NkY2xrX2NvbmZpZygmaTkxNS0+Y2RjbGsuaHcsICJDdXJyZW50IENEQ0xL
Iik7DQo+ICAJY2RjbGtfc3RhdGUtPmxvZ2ljYWwgPSBjZGNsa19zdGF0ZS0+YWN0dWFsID0gaTkx
NS0+Y2RjbGsuaHc7DQo+ICsNCj4gKwlkYnVmX3N0YXRlLT5lbmFibGVkX3NsaWNlcyA9IGk5MTUt
PmRidWYuZW5hYmxlZF9zbGljZXM7DQo+ICB9DQo+ICANCj4gIHN0YXRpYyBpbnQgc2FuaXRpemVf
d2F0ZXJtYXJrc19hZGRfYWZmZWN0ZWQoc3RydWN0IGRybV9hdG9taWNfc3RhdGUNCj4gKnN0YXRl
KQ0KPiBAQCAtMTc5NDEsNiArMTc5NTcsMTAgQEAgaW50IGludGVsX21vZGVzZXRfaW5pdChzdHJ1
Y3QNCj4gZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkNCj4gIAlpZiAocmV0KQ0KPiAgCQlyZXR1cm4g
cmV0Ow0KPiAgDQo+ICsJcmV0ID0gaW50ZWxfZGJ1Zl9pbml0KGk5MTUpOw0KPiArCWlmIChyZXQp
DQo+ICsJCXJldHVybiByZXQ7DQo+ICsNCj4gIAlyZXQgPSBpbnRlbF9id19pbml0KGk5MTUpOw0K
PiAgCWlmIChyZXQpDQo+ICAJCXJldHVybiByZXQ7DQo+IEBAIC0xODQzNSw2ICsxODQ1NSw4IEBA
IHN0YXRpYyB2b2lkDQo+IGludGVsX21vZGVzZXRfcmVhZG91dF9od19zdGF0ZShzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2KQ0KPiAgCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRv
X2k5MTUoZGV2KTsNCj4gIAlzdHJ1Y3QgaW50ZWxfY2RjbGtfc3RhdGUgKmNkY2xrX3N0YXRlID0N
Cj4gIAkJdG9faW50ZWxfY2RjbGtfc3RhdGUoZGV2X3ByaXYtPmNkY2xrLm9iai5zdGF0ZSk7DQo+
ICsJc3RydWN0IGludGVsX2RidWZfc3RhdGUgKmRidWZfc3RhdGUgPQ0KPiArCQl0b19pbnRlbF9k
YnVmX3N0YXRlKGRldl9wcml2LT5kYnVmLm9iai5zdGF0ZSk7DQo+ICAJZW51bSBwaXBlIHBpcGU7
DQo+ICAJc3RydWN0IGludGVsX2NydGMgKmNydGM7DQo+ICAJc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXI7DQo+IEBAIC0xODQ2Niw3ICsxODQ4OCw4IEBAIHN0YXRpYyB2b2lkDQo+IGludGVs
X21vZGVzZXRfcmVhZG91dF9od19zdGF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQ0KPiAgCQkJ
ICAgIGVuYWJsZWRkaXNhYmxlZChjcnRjX3N0YXRlLT5ody5hY3RpdmUpKTsNCj4gIAl9DQo+ICAN
Cj4gLQlkZXZfcHJpdi0+YWN0aXZlX3BpcGVzID0gY2RjbGtfc3RhdGUtPmFjdGl2ZV9waXBlcyA9
DQo+IGFjdGl2ZV9waXBlczsNCj4gKwlkZXZfcHJpdi0+YWN0aXZlX3BpcGVzID0gY2RjbGtfc3Rh
dGUtPmFjdGl2ZV9waXBlcyA9DQo+ICsJCWRidWZfc3RhdGUtPmFjdGl2ZV9waXBlcyA9IGFjdGl2
ZV9waXBlczsNCg0KU2FtZSB0aGluZyBhYm91dCBkdXBsaWNhdGlvbiwgc28gd291bGQgY29uc2lk
ZXIgaGF2aW5nIGFjdGl2ZV9waXBlcywNCnNvbWV3aGVyZSBpbiBhIHNpbmdsZSBwbGFjZS4gUHJl
dmlzb3VseSBJIHRoaW5rIGl0IHdhcyBtb3JlIGxvZ2ljYWwNCnRvIGhhdmUgaXQgaW4gaW50ZWxf
YXRvbWljX3N0YXRlIGFzIHRoaXMgaXMga2luZCBvZiBnZW5lcmFsDQppbmZvcm1hdGlvbiwgbm90
IHJlbGF0ZWQgdG8gYncsIGRidWYgb3IgY2RjbGsuIE9yIG1heSBiZSBpdCBzaG91bGQNCmJlIGlu
IHNvbWUgc2VwYXJhdGUgbW9kZXNldCBzcGVjaWZpYyBzdGF0ZSwganVzdCBhcyBidywgZGJ1Ziwg
Y2RjbGsuDQoNCkFsbCB0aG9zZSBzdGF0ZXMgd291bGQgdGhlbiBjb250YWluIG9ubHkgdGhlaXIg
c3BlY2lmaWMgaW5mbywgd2l0aG91dA0KbmVlZCBpbiBkdXBsaWNhdGlvbiBhbmQgaW5mb3JtYXRp
b24gYW55d2F5IGlzIGVhc3kgdG8gb2J0YWluLg0KQWxzbyBpdCB3b3VsZCBiZSBlYXNpZXIgdGhl
biB0byBtYW5pcHVsYXRlIGFuZCBidWlsZCBzb21lIGRlcGVuZGVuY3kNCmhpZXJhcmNoeSBmb3Ig
dGhvc2UuDQoNCj4gIA0KPiAgCXJlYWRvdXRfcGxhbmVfc3RhdGUoZGV2X3ByaXYpOw0KPiAgDQo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlf
cG93ZXIuYw0KPiBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9w
b3dlci5jDQo+IGluZGV4IDUzMDU2ZGVmNTQxNC4uYzI0ZTFkZTc4YjlkIDEwMDY0NA0KPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYw0KPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYw0K
PiBAQCAtMTA0Myw3ICsxMDQzLDcgQEAgc3RhdGljIGJvb2wNCj4gZ2VuOV9kY19vZmZfcG93ZXJf
d2VsbF9lbmFibGVkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwNCj4gIHN0YXRp
YyB2b2lkIGdlbjlfYXNzZXJ0X2RidWZfZW5hYmxlZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZQ0K
PiAqZGV2X3ByaXYpDQo+ICB7DQo+ICAJdTggaHdfZW5hYmxlZF9kYnVmX3NsaWNlcyA9DQo+IGlu
dGVsX2VuYWJsZWRfZGJ1Zl9zbGljZXNfbWFzayhkZXZfcHJpdik7DQo+IC0JdTggZW5hYmxlZF9k
YnVmX3NsaWNlcyA9IGRldl9wcml2LT5lbmFibGVkX2RidWZfc2xpY2VzX21hc2s7DQo+ICsJdTgg
ZW5hYmxlZF9kYnVmX3NsaWNlcyA9IGRldl9wcml2LT5kYnVmLmVuYWJsZWRfc2xpY2VzOw0KPiAg
DQo+ICAJV0FSTihod19lbmFibGVkX2RidWZfc2xpY2VzICE9IGVuYWJsZWRfZGJ1Zl9zbGljZXMs
DQo+ICAJICAgICAiVW5leHBlY3RlZCBEQnVmIHBvd2VyIHBvd2VyIHN0YXRlICgweCUwOHgsIGV4
cGVjdGVkDQo+IDB4JTA4eClcbiIsDQo+IEBAIC00NDYzLDcgKzQ0NjMsNyBAQCB2b2lkIGljbF9k
YnVmX3NsaWNlc191cGRhdGUoc3RydWN0DQo+IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LA0K
PiAgCQkJCSAgICAgKHJlcV9zbGljZXMgJiBCSVQoaSkpICE9IDApOw0KPiAgCX0NCj4gIA0KPiAt
CWRldl9wcml2LT5lbmFibGVkX2RidWZfc2xpY2VzX21hc2sgPSByZXFfc2xpY2VzOw0KPiArCWRl
dl9wcml2LT5kYnVmLmVuYWJsZWRfc2xpY2VzID0gcmVxX3NsaWNlczsNCj4gIA0KPiAgCW11dGV4
X3VubG9jaygmcG93ZXJfZG9tYWlucy0+bG9jayk7DQo+ICB9DQo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaA0KPiBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oDQo+IGluZGV4IDI4
M2M2MjJmOGJhMS4uMTJhYzQ3YzMzMTcxIDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaA0KPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaA0KPiBAQCAtNDY4LDE2ICs0Njgs
NiBAQCBzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlIHsNCj4gIA0KPiAgCWJvb2wgZHBsbF9zZXQs
IG1vZGVzZXQ7DQo+ICANCj4gLQkvKg0KPiAtCSAqIERvZXMgdGhpcyB0cmFuc2FjdGlvbiBjaGFu
Z2UgdGhlIHBpcGVzIHRoYXQgYXJlDQo+IGFjdGl2ZT8gIFRoaXMgbWFzaw0KPiAtCSAqIHRyYWNr
cyB3aGljaCBDUlRDJ3MgaGF2ZSBjaGFuZ2VkIHRoZWlyIGFjdGl2ZSBzdGF0ZSBhdCB0aGUNCj4g
ZW5kIG9mDQo+IC0JICogdGhlIHRyYW5zYWN0aW9uIChub3QgY291bnRpbmcgdGhlIHRlbXBvcmFy
eSBkaXNhYmxlIGR1cmluZw0KPiBtb2Rlc2V0cykuDQo+IC0JICogVGhpcyBtYXNrIHNob3VsZCBv
bmx5IGJlIG5vbi16ZXJvIHdoZW4gaW50ZWxfc3RhdGUtPm1vZGVzZXQNCj4gaXMgdHJ1ZSwNCj4g
LQkgKiBidXQgdGhlIGNvbnZlcnNlIGlzIG5vdCBuZWNlc3NhcmlseSB0cnVlOyBzaW1wbHkgY2hh
bmdpbmcgYQ0KPiBtb2RlIG1heQ0KPiAtCSAqIG5vdCBmbGlwIHRoZSBmaW5hbCBhY3RpdmUgc3Rh
dHVzIG9mIGFueSBDUlRDJ3MNCj4gLQkgKi8NCj4gLQl1OCBhY3RpdmVfcGlwZV9jaGFuZ2VzOw0K
PiAtDQo+ICAJdTggYWN0aXZlX3BpcGVzOw0KPiAgDQo+ICAJc3RydWN0IGludGVsX3NoYXJlZF9k
cGxsX3N0YXRlIHNoYXJlZF9kcGxsW0k5MTVfTlVNX1BMTFNdOw0KPiBAQCAtNDk1LDkgKzQ4NSw2
IEBAIHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgew0KPiAgCSAqLw0KPiAgCWJvb2wgZ2xvYmFs
X3N0YXRlX2NoYW5nZWQ7DQo+ICANCj4gLQkvKiBOdW1iZXIgb2YgZW5hYmxlZCBEQnVmIHNsaWNl
cyAqLw0KPiAtCXU4IGVuYWJsZWRfZGJ1Zl9zbGljZXNfbWFzazsNCj4gLQ0KPiAgCXN0cnVjdCBp
OTE1X3N3X2ZlbmNlIGNvbW1pdF9yZWFkeTsNCj4gIA0KPiAgCXN0cnVjdCBsbGlzdF9ub2RlIGZy
ZWVkOw0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaA0KPiBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgNCj4gaW5kZXggZGE1MDlkOWI4ODk1Li4y
NjM4ZjNmY2QxYWEgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmgNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaA0KPiBAQCAtMTAwNyw2
ICsxMDA3LDEzIEBAIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlIHsNCj4gIAkJc3RydWN0IGludGVs
X2dsb2JhbF9vYmogb2JqOw0KPiAgCX0gY2RjbGs7DQo+ICANCj4gKwlzdHJ1Y3Qgew0KPiArCQkv
KiBUaGUgY3VycmVudCBoYXJkd2FyZSBkYnVmIGNvbmZpZ3VyYXRpb24gKi8NCj4gKwkJdTggZW5h
YmxlZF9zbGljZXM7DQo+ICsNCj4gKwkJc3RydWN0IGludGVsX2dsb2JhbF9vYmogb2JqOw0KPiAr
CX0gZGJ1ZjsNCj4gKw0KPiAgCS8qKg0KPiAgCSAqIHdxIC0gRHJpdmVyIHdvcmtxdWV1ZSBmb3Ig
R0VNLg0KPiAgCSAqDQo+IEBAIC0xMTgyLDEyICsxMTg5LDEyIEBAIHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlIHsNCj4gIAkJICogU2V0IGR1cmluZyBIVyByZWFkb3V0IG9mIHdhdGVybWFya3MvRERC
LiAgU29tZQ0KPiBwbGF0Zm9ybXMNCj4gIAkJICogbmVlZCB0byBrbm93IHdoZW4gd2UncmUgc3Rp
bGwgdXNpbmcgQklPUy1wcm92aWRlZA0KPiB2YWx1ZXMNCj4gIAkJICogKHdoaWNoIHdlIGRvbid0
IGZ1bGx5IHRydXN0KS4NCj4gKwkJICoNCj4gKwkJICogRklYTUUgZ2V0IHJpZCBvZiB0aGlzLg0K
PiAgCQkgKi8NCj4gIAkJYm9vbCBkaXN0cnVzdF9iaW9zX3dtOw0KPiAgCX0gd207DQo+ICANCj4g
LQl1OCBlbmFibGVkX2RidWZfc2xpY2VzX21hc2s7IC8qIEdFTjExIGhhcyBjb25maWd1cmFibGUg
MiBzbGljZXMNCj4gKi8NCj4gLQ0KPiAgCXN0cnVjdCBkcmFtX2luZm8gew0KPiAgCQlib29sIHZh
bGlkOw0KPiAgCQlib29sIGlzXzE2Z2JfZGltbTsNCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX3BtLmMNCj4gYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5j
DQo+IGluZGV4IGZmYWMwYjg2MmNhNS4uMzExNzllMzBiZmUzIDEwMDY0NA0KPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2ludGVsX3BtLmMNCj4gQEAgLTM4NDUsNyArMzg0NSw3IEBAIHN0YXRpYyB1MTYgaW50ZWxfZ2V0
X2RkYl9zaXplKHN0cnVjdA0KPiBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikNCj4gIHN0YXRp
YyB1OCBza2xfY29tcHV0ZV9kYnVmX3NsaWNlcyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZQ0KPiAqY3J0Y19zdGF0ZSwNCj4gIAkJCQkgIHUzMiBhY3RpdmVfcGlwZXMpOw0KPiAgDQo+IC1z
dGF0aWMgdm9pZA0KPiArc3RhdGljIGludA0KPiAgc2tsX2RkYl9nZXRfcGlwZV9hbGxvY2F0aW9u
X2xpbWl0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZQ0KPiAqZGV2X3ByaXYsDQo+ICAJCQkJICAg
Y29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUNCj4gKmNydGNfc3RhdGUsDQo+ICAJCQkJICAg
Y29uc3QgdTY0IHRvdGFsX2RhdGFfcmF0ZSwNCj4gQEAgLTM4NTgsMzAgKzM4NTgsMjkgQEAgc2ts
X2RkYl9nZXRfcGlwZV9hbGxvY2F0aW9uX2xpbWl0cyhzdHJ1Y3QNCj4gZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsDQo+ICAJY29uc3Qgc3RydWN0IGludGVsX2NydGMgKmNydGM7DQo+ICAJdTMy
IHBpcGVfd2lkdGggPSAwLCB0b3RhbF93aWR0aF9pbl9yYW5nZSA9IDAsDQo+IHdpZHRoX2JlZm9y
ZV9waXBlX2luX3JhbmdlID0gMDsNCj4gIAllbnVtIHBpcGUgZm9yX3BpcGUgPSB0b19pbnRlbF9j
cnRjKGZvcl9jcnRjKS0+cGlwZTsNCj4gKwlzdHJ1Y3QgaW50ZWxfZGJ1Zl9zdGF0ZSAqbmV3X2Ri
dWZfc3RhdGUgPQ0KPiArCQlpbnRlbF9hdG9taWNfZ2V0X25ld19kYnVmX3N0YXRlKGludGVsX3N0
YXRlKTsNCj4gKwljb25zdCBzdHJ1Y3QgaW50ZWxfZGJ1Zl9zdGF0ZSAqb2xkX2RidWZfc3RhdGUg
PQ0KPiArCQlpbnRlbF9hdG9taWNfZ2V0X29sZF9kYnVmX3N0YXRlKGludGVsX3N0YXRlKTsNCj4g
Kwl1OCBhY3RpdmVfcGlwZXMgPSBuZXdfZGJ1Zl9zdGF0ZS0+YWN0aXZlX3BpcGVzOw0KPiAgCXUx
NiBkZGJfc2l6ZTsNCj4gIAl1MzIgZGRiX3JhbmdlX3NpemU7DQo+ICAJdTMyIGk7DQo+ICAJdTMy
IGRidWZfc2xpY2VfbWFzazsNCj4gLQl1MzIgYWN0aXZlX3BpcGVzOw0KPiAgCXUzMiBvZmZzZXQ7
DQo+ICAJdTMyIHNsaWNlX3NpemU7DQo+ICAJdTMyIHRvdGFsX3NsaWNlX21hc2s7DQo+ICAJdTMy
IHN0YXJ0LCBlbmQ7DQo+ICsJaW50IHJldDsNCj4gKw0KPiArCSpudW1fYWN0aXZlID0gaHdlaWdo
dDgoYWN0aXZlX3BpcGVzKTsNCj4gIA0KPiAtCWlmIChkcm1fV0FSTl9PTigmZGV2X3ByaXYtPmRy
bSwgIXN0YXRlKSB8fCAhY3J0Y19zdGF0ZS0NCj4gPmh3LmFjdGl2ZSkgew0KPiArCWlmICghY3J0
Y19zdGF0ZS0+aHcuYWN0aXZlKSB7DQo+ICAJCWFsbG9jLT5zdGFydCA9IDA7DQo+ICAJCWFsbG9j
LT5lbmQgPSAwOw0KPiAtCQkqbnVtX2FjdGl2ZSA9IGh3ZWlnaHQ4KGRldl9wcml2LT5hY3RpdmVf
cGlwZXMpOw0KPiAtCQlyZXR1cm47DQo+ICsJCXJldHVybiAwOw0KPiAgCX0NCj4gIA0KPiAtCWlm
IChpbnRlbF9zdGF0ZS0+YWN0aXZlX3BpcGVfY2hhbmdlcykNCj4gLQkJYWN0aXZlX3BpcGVzID0g
aW50ZWxfc3RhdGUtPmFjdGl2ZV9waXBlczsNCj4gLQllbHNlDQo+IC0JCWFjdGl2ZV9waXBlcyA9
IGRldl9wcml2LT5hY3RpdmVfcGlwZXM7DQo+IC0NCj4gLQkqbnVtX2FjdGl2ZSA9IGh3ZWlnaHQ4
KGFjdGl2ZV9waXBlcyk7DQo+IC0NCj4gIAlkZGJfc2l6ZSA9IGludGVsX2dldF9kZGJfc2l6ZShk
ZXZfcHJpdik7DQo+ICANCj4gIAlzbGljZV9zaXplID0gZGRiX3NpemUgLyBJTlRFTF9JTkZPKGRl
dl9wcml2KS0NCj4gPm51bV9zdXBwb3J0ZWRfZGJ1Zl9zbGljZXM7DQo+IEBAIC0zODk0LDEzICsz
ODkzLDE2IEBAIHNrbF9kZGJfZ2V0X3BpcGVfYWxsb2NhdGlvbl9saW1pdHMoc3RydWN0DQo+IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LA0KPiAgCSAqIHRoYXQgY2hhbmdlcyB0aGUgYWN0aXZl
IENSVEMgbGlzdCBvciBkbyBtb2Rlc2V0IHdvdWxkIG5lZWQNCj4gdG8NCj4gIAkgKiBncmFiIF9h
bGxfIGNydGMgbG9ja3MsIGluY2x1ZGluZyB0aGUgb25lIHdlIGN1cnJlbnRseSBob2xkLg0KPiAg
CSAqLw0KPiAtCWlmICghaW50ZWxfc3RhdGUtPmFjdGl2ZV9waXBlX2NoYW5nZXMgJiYgIWludGVs
X3N0YXRlLT5tb2Rlc2V0KSANCj4gew0KPiArCWlmIChvbGRfZGJ1Zl9zdGF0ZS0+YWN0aXZlX3Bp
cGVzID09IG5ld19kYnVmX3N0YXRlLQ0KPiA+YWN0aXZlX3BpcGVzICYmDQo+ICsJICAgICFkZXZf
cHJpdi0+d20uZGlzdHJ1c3RfYmlvc193bSkgew0KPiAgCQkvKg0KPiAgCQkgKiBhbGxvYyBtYXkg
YmUgY2xlYXJlZCBieSBjbGVhcl9pbnRlbF9jcnRjX3N0YXRlLA0KPiAgCQkgKiBjb3B5IGZyb20g
b2xkIHN0YXRlIHRvIGJlIHN1cmUNCj4gKwkJICoNCj4gKwkJICogRklYTUUgZ2V0IHJpZCBvZiB0
aGlzIG1lc3MNCj4gIAkJICovDQo+ICAJCSphbGxvYyA9IHRvX2ludGVsX2NydGNfc3RhdGUoZm9y
X2NydGMtPnN0YXRlKS0NCj4gPndtLnNrbC5kZGI7DQo+IC0JCXJldHVybjsNCj4gKwkJcmV0dXJu
IDA7DQo+ICAJfQ0KDQpTbyB3ZSBnb3QgcmlkIG9mIGFjdGl2ZV9waXBlX2NoYW5nZXMsIHdoaWNo
IHdhcyB3cm9uZ2x5IHVzZWQgdG8gZmlndXJlDQpvdXQgaWYgdGhlcmUgd2VyZSBzb21lIERCdWYg
Y2hhbmdlcywgYnV0IG5vdyB3ZSBhcmUgdXNpbmcgYWN0aXZlX3BpcGVzIA0KZm9yIHRoYXQuIFRo
aXMga2luZCBvZiBleHBsYWlucywgd2h5IHlvdSBhZGRlZCBhY3RpdmVfcGlwZXMgdG8gREJ1Zg0K
c3RhdGUsIGhvd2V2ZXIgd291bGRuJ3QgaXQgYmUgbW9yZSBsb2dpY2FsIHN0aWxsIHRvIGhhdmUg
YWN0aXZlX3BpcGVzDQppbiBtb3JlIGdlbmVyYWwgc3RhdGUgb3IgYXQgbGVhc3QgaW4gYSBzdGF0
ZSwgd2hpY2ggaXMgcmVsYXRlZCB0byBhDQptb2Rlc2V0dGluZywgd2hpbGUgaGVyZSB5b3Ugd291
bGQgYmUgdXNpbmcgc29tZSBEQnVmX3N0YXRlIHNwZWNpZmljIA0KZmllbGQsIGxpa2UgZGJ1Zl9j
aGFuZ2VkIG9yIGV2ZW4gYWN0aXZlX2RidWZfY2hhbmdlcz8NCg0KVGhlbiB5b3Ugd291bGRuJ3Qg
bmVlZCB0byBkdXBsaWNhdGUgdGhpcyBmaWVsZChiZW5lZml0KSBhbmQgYWxzbw0KeW91IHdvdWxk
IGhhdmUgYSBjbGVhciB3YXkgdG8gZGV0ZXJtaW5lIGlmIERCdWYgY2hhbmdlcyB3ZXJlIG1hZGUg
aW4NCmEgc3BlY2lmaWMgdG8gREJ1ZiBzdGF0ZShiZW5lZml0KS4NCg0KTWF5IGJlIHlvdSBoYXZl
IHNvbWUgb3RoZXIgaWRlYSwgd2h5IGl0IHNob3VsZCBiZSBsaWtlIHRoaXMsIGF0IGxlYXN0DQp0
aGlzIGlzIGhvdyBJIHNlZSBpdCBub3cuDQoNClN0YW4NCiANCg0KPiAgDQo+ICAJLyoNCj4gQEAg
LTM5NzksNyArMzk4MSwxMyBAQCBza2xfZGRiX2dldF9waXBlX2FsbG9jYXRpb25fbGltaXRzKHN0
cnVjdA0KPiBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwNCj4gIAkgKiBGSVhNRTogRm9yIG5v
dyB3ZSBhbHdheXMgZW5hYmxlIHNsaWNlIFMxIGFzIHBlcg0KPiAgCSAqIHRoZSBCc3BlYyBkaXNw
bGF5IGluaXRpYWxpemF0aW9uIHNlcXVlbmNlLg0KPiAgCSAqLw0KPiAtCWludGVsX3N0YXRlLT5l
bmFibGVkX2RidWZfc2xpY2VzX21hc2sgPSB0b3RhbF9zbGljZV9tYXNrIHwNCj4gQklUKERCVUZf
UzEpOw0KPiArCW5ld19kYnVmX3N0YXRlLT5lbmFibGVkX3NsaWNlcyA9IHRvdGFsX3NsaWNlX21h
c2sgfA0KPiBCSVQoREJVRl9TMSk7DQo+ICsNCj4gKwlpZiAob2xkX2RidWZfc3RhdGUtPmVuYWJs
ZWRfc2xpY2VzICE9IG5ld19kYnVmX3N0YXRlLQ0KPiA+ZW5hYmxlZF9zbGljZXMpIHsNCj4gKwkJ
cmV0ID0NCj4gaW50ZWxfYXRvbWljX3NlcmlhbGl6ZV9nbG9iYWxfc3RhdGUoJm5ld19kYnVmX3N0
YXRlLT5iYXNlKTsNCj4gKwkJaWYgKHJldCkNCj4gKwkJCXJldHVybiByZXQ7DQo+ICsJfQ0KPiAg
DQo+ICAJc3RhcnQgPSBkZGJfcmFuZ2Vfc2l6ZSAqIHdpZHRoX2JlZm9yZV9waXBlX2luX3Jhbmdl
IC8NCj4gdG90YWxfd2lkdGhfaW5fcmFuZ2U7DQo+ICAJZW5kID0gZGRiX3JhbmdlX3NpemUgKg0K
PiBAQCAtMzk5MCw5ICszOTk4LDggQEAgc2tsX2RkYl9nZXRfcGlwZV9hbGxvY2F0aW9uX2xpbWl0
cyhzdHJ1Y3QNCj4gZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsDQo+ICANCj4gIAlEUk1fREVC
VUdfS01TKCJQaXBlICVkIGRkYiAlZC0lZFxuIiwgZm9yX3BpcGUsDQo+ICAJCSAgICAgIGFsbG9j
LT5zdGFydCwgYWxsb2MtPmVuZCk7DQo+IC0JRFJNX0RFQlVHX0tNUygiRW5hYmxlZCBkZGIgc2xp
Y2VzIG1hc2sgJXggbnVtIHN1cHBvcnRlZCAlZFxuIiwNCj4gLQkJICAgICAgaW50ZWxfc3RhdGUt
PmVuYWJsZWRfZGJ1Zl9zbGljZXNfbWFzaywNCj4gLQkJICAgICAgSU5URUxfSU5GTyhkZXZfcHJp
diktPm51bV9zdXBwb3J0ZWRfZGJ1Zl9zbGljZXMpOw0KPiArDQo+ICsJcmV0dXJuIDA7DQo+ICB9
DQo+ICANCj4gIHN0YXRpYyBpbnQgc2tsX2NvbXB1dGVfd21fcGFyYW1zKGNvbnN0IHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlDQo+ICpjcnRjX3N0YXRlLA0KPiBAQCAtNDExMiw4ICs0MTE5LDggQEAg
dm9pZCBza2xfcGlwZV9kZGJfZ2V0X2h3X3N0YXRlKHN0cnVjdA0KPiBpbnRlbF9jcnRjICpjcnRj
LA0KPiAgDQo+ICB2b2lkIHNrbF9kZGJfZ2V0X2h3X3N0YXRlKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikNCj4gIHsNCj4gLQlkZXZfcHJpdi0+ZW5hYmxlZF9kYnVmX3NsaWNlc19t
YXNrID0NCj4gLQkJCQlpbnRlbF9lbmFibGVkX2RidWZfc2xpY2VzX21hc2soZGV2X3ByaXYNCj4g
KTsNCj4gKwlkZXZfcHJpdi0+ZGJ1Zi5lbmFibGVkX3NsaWNlcyA9DQo+ICsJCWludGVsX2VuYWJs
ZWRfZGJ1Zl9zbGljZXNfbWFzayhkZXZfcHJpdik7DQo+ICB9DQo+ICANCj4gIC8qDQo+IEBAIC00
NTYzLDYgKzQ1NzAsNyBAQCBza2xfYWxsb2NhdGVfcGlwZV9kZGIoc3RydWN0IGludGVsX2NydGNf
c3RhdGUNCj4gKmNydGNfc3RhdGUpDQo+ICAJdTY0IHV2X3BsYW5lX2RhdGFfcmF0ZVtJOTE1X01B
WF9QTEFORVNdID0ge307DQo+ICAJdTMyIGJsb2NrczsNCj4gIAlpbnQgbGV2ZWw7DQo+ICsJaW50
IHJldDsNCj4gIA0KPiAgCS8qIENsZWFyIHRoZSBwYXJ0aXRpb25pbmcgZm9yIGRpc2FibGVkIHBs
YW5lcy4gKi8NCj4gIAltZW1zZXQoY3J0Y19zdGF0ZS0+d20uc2tsLnBsYW5lX2RkYl95LCAwLCBz
aXplb2YoY3J0Y19zdGF0ZS0NCj4gPndtLnNrbC5wbGFuZV9kZGJfeSkpOw0KPiBAQCAtNDU4Nyw4
ICs0NTk1LDEyIEBAIHNrbF9hbGxvY2F0ZV9waXBlX2RkYihzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZQ0KPiAqY3J0Y19zdGF0ZSkNCj4gIAkJCQkJCQkgdXZfcGxhbmVfZGF0YV8NCj4gcmF0ZSk7DQo+
ICANCj4gIA0KPiAtCXNrbF9kZGJfZ2V0X3BpcGVfYWxsb2NhdGlvbl9saW1pdHMoZGV2X3ByaXYs
IGNydGNfc3RhdGUsDQo+IHRvdGFsX2RhdGFfcmF0ZSwNCj4gLQkJCQkJICAgYWxsb2MsICZudW1f
YWN0aXZlKTsNCj4gKwlyZXQgPSBza2xfZGRiX2dldF9waXBlX2FsbG9jYXRpb25fbGltaXRzKGRl
dl9wcml2LCBjcnRjX3N0YXRlLA0KPiArCQkJCQkJIHRvdGFsX2RhdGFfcmF0ZSwNCj4gKwkJCQkJ
CSBhbGxvYywgJm51bV9hY3RpdmUpOw0KPiArCWlmIChyZXQpDQo+ICsJCXJldHVybiByZXQ7DQo+
ICsNCj4gIAlhbGxvY19zaXplID0gc2tsX2RkYl9lbnRyeV9zaXplKGFsbG9jKTsNCj4gIAlpZiAo
YWxsb2Nfc2l6ZSA9PSAwKQ0KPiAgCQlyZXR1cm4gMDsNCj4gQEAgLTU0NzEsMTQgKzU0ODMsMTEg
QEAgc2tsX2RkYl9hZGRfYWZmZWN0ZWRfcGxhbmVzKGNvbnN0IHN0cnVjdA0KPiBpbnRlbF9jcnRj
X3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwNCj4gIHN0YXRpYyBpbnQNCj4gIHNrbF9jb21wdXRlX2Rk
YihzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkNCj4gIHsNCj4gLQlzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7DQo+ICAJ
c3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9jcnRjX3N0YXRlOw0KPiAgCXN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpuZXdfY3J0Y19zdGF0ZTsNCj4gIAlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0
YzsNCj4gIAlpbnQgcmV0LCBpOw0KPiAgDQo+IC0Jc3RhdGUtPmVuYWJsZWRfZGJ1Zl9zbGljZXNf
bWFzayA9IGRldl9wcml2LQ0KPiA+ZW5hYmxlZF9kYnVmX3NsaWNlc19tYXNrOw0KPiAtDQo+ICAJ
Zm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsDQo+IG9sZF9j
cnRjX3N0YXRlLA0KPiAgCQkJCQkgICAgbmV3X2NydGNfc3RhdGUsIGkpIHsNCj4gIAkJcmV0ID0g
c2tsX2FsbG9jYXRlX3BpcGVfZGRiKG5ld19jcnRjX3N0YXRlKTsNCj4gQEAgLTU2MTgsNyArNTYy
Nyw4IEBAIHNrbF9wcmludF93bV9jaGFuZ2VzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUNCj4g
KnN0YXRlKQ0KPiAgCX0NCj4gIH0NCj4gIA0KPiAtc3RhdGljIGludCBpbnRlbF9hZGRfYWxsX3Bp
cGVzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQ0KPiArc3RhdGljIGludCBpbnRl
bF9hZGRfYWZmZWN0ZWRfcGlwZXMoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZQ0KPiAqc3RhdGUs
DQo+ICsJCQkJICAgIHU4IHBpcGVfbWFzaykNCj4gIHsNCj4gIAlzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7DQo+ICAJc3RydWN0IGlu
dGVsX2NydGMgKmNydGM7DQo+IEBAIC01NjI2LDYgKzU2MzYsOSBAQCBzdGF0aWMgaW50IGludGVs
X2FkZF9hbGxfcGlwZXMoc3RydWN0DQo+IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpDQo+ICAJ
Zm9yX2VhY2hfaW50ZWxfY3J0YygmZGV2X3ByaXYtPmRybSwgY3J0Yykgew0KPiAgCQlzdHJ1Y3Qg
aW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsNCj4gIA0KPiArCQlpZiAoKHBpcGVfbWFzayAm
IEJJVChjcnRjLT5waXBlKSkgPT0gMCkNCj4gKwkJCWNvbnRpbnVlOw0KPiArDQo+ICAJCWNydGNf
c3RhdGUgPSBpbnRlbF9hdG9taWNfZ2V0X2NydGNfc3RhdGUoJnN0YXRlLT5iYXNlLA0KPiBjcnRj
KTsNCj4gIAkJaWYgKElTX0VSUihjcnRjX3N0YXRlKSkNCj4gIAkJCXJldHVybiBQVFJfRVJSKGNy
dGNfc3RhdGUpOw0KPiBAQCAtNTYzOCw0OSArNTY1MSw1NCBAQCBzdGF0aWMgaW50DQo+ICBza2xf
ZGRiX2FkZF9hZmZlY3RlZF9waXBlcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkN
Cj4gIHsNCj4gIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0
YXRlLT5iYXNlLmRldik7DQo+IC0JaW50IHJldDsNCj4gKwlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqY3J0Y19zdGF0ZTsNCj4gKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YzsNCj4gKwlpbnQgaSwg
cmV0Ow0KPiAgDQo+IC0JLyoNCj4gLQkgKiBJZiB0aGlzIGlzIG91ciBmaXJzdCBhdG9taWMgdXBk
YXRlIGZvbGxvd2luZyBoYXJkd2FyZQ0KPiByZWFkb3V0LA0KPiAtCSAqIHdlIGNhbid0IHRydXN0
IHRoZSBEREIgdGhhdCB0aGUgQklPUyBwcm9ncmFtbWVkIGZvcg0KPiB1cy4gIExldCdzDQo+IC0J
ICogcHJldGVuZCB0aGF0IGFsbCBwaXBlcyBzd2l0Y2hlZCBhY3RpdmUgc3RhdHVzIHNvIHRoYXQg
d2UnbGwNCj4gLQkgKiBlbnN1cmUgYSBmdWxsIEREQiByZWNvbXB1dGUuDQo+IC0JICovDQo+ICAJ
aWYgKGRldl9wcml2LT53bS5kaXN0cnVzdF9iaW9zX3dtKSB7DQo+IC0JCXJldCA9IGRybV9tb2Rl
c2V0X2xvY2soJmRldl9wcml2LQ0KPiA+ZHJtLm1vZGVfY29uZmlnLmNvbm5lY3Rpb25fbXV0ZXgs
DQo+IC0JCQkJICAgICAgIHN0YXRlLT5iYXNlLmFjcXVpcmVfY3R4KTsNCj4gKwkJLyoNCj4gKwkJ
ICogc2tsX2RkYl9nZXRfcGlwZV9hbGxvY2F0aW9uX2xpbWl0cygpIGN1cnJlbnRseQ0KPiByZXF1
aXJlcw0KPiArCQkgKiBhbGwgYWN0aXZlIHBpcGVzIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBzdGF0
ZSBzbyB0aGF0DQo+ICsJCSAqIGl0IGNhbiByZWRpc3RyaWJ1dGUgdGhlIGRidWYgYW1vbmcgdGhl
bSwgYW5kIGl0DQo+IHJlYWxseQ0KPiArCQkgKiB3YW50cyB0byByZWNvbXB1dGUgdGhpbmdzIHdo
ZW4gZGlzdHJ1c3RfYmlvc193bSBpcw0KPiBzZXQNCj4gKwkJICogc28gd2UgYWRkIGFsbCB0aGUg
cGlwZXMgdG8gdGhlIHN0YXRlLg0KPiArCQkgKi8NCj4gKwkJcmV0ID0gaW50ZWxfYWRkX2FmZmVj
dGVkX3BpcGVzKHN0YXRlLCB+MCk7DQo+ICAJCWlmIChyZXQpDQo+ICAJCQlyZXR1cm4gcmV0Ow0K
PiArCX0NCj4gIA0KPiAtCQlzdGF0ZS0+YWN0aXZlX3BpcGVfY2hhbmdlcyA9IElOVEVMX0lORk8o
ZGV2X3ByaXYpLQ0KPiA+cGlwZV9tYXNrOw0KPiArCWZvcl9lYWNoX25ld19pbnRlbF9jcnRjX2lu
X3N0YXRlKHN0YXRlLCBjcnRjLCBjcnRjX3N0YXRlLCBpKSB7DQo+ICsJCXN0cnVjdCBpbnRlbF9k
YnVmX3N0YXRlICpuZXdfZGJ1Zl9zdGF0ZTsNCj4gKwkJY29uc3Qgc3RydWN0IGludGVsX2RidWZf
c3RhdGUgKm9sZF9kYnVmX3N0YXRlOw0KPiArDQo+ICsJCW5ld19kYnVmX3N0YXRlID0gaW50ZWxf
YXRvbWljX2dldF9kYnVmX3N0YXRlKHN0YXRlKTsNCj4gKwkJaWYgKElTX0VSUihuZXdfZGJ1Zl9z
dGF0ZSkpDQo+ICsJCQlyZXR1cm4gcmV0Ow0KPiArDQo+ICsJCW9sZF9kYnVmX3N0YXRlID0NCj4g
aW50ZWxfYXRvbWljX2dldF9vbGRfZGJ1Zl9zdGF0ZShzdGF0ZSk7DQo+ICsNCj4gKwkJbmV3X2Ri
dWZfc3RhdGUtPmFjdGl2ZV9waXBlcyA9DQo+ICsJCQlpbnRlbF9jYWxjX2FjdGl2ZV9waXBlcyhz
dGF0ZSwgb2xkX2RidWZfc3RhdGUtDQo+ID5hY3RpdmVfcGlwZXMpOw0KPiArDQo+ICsJCWlmIChv
bGRfZGJ1Zl9zdGF0ZS0+YWN0aXZlX3BpcGVzID09IG5ld19kYnVmX3N0YXRlLQ0KPiA+YWN0aXZl
X3BpcGVzKQ0KPiArCQkJYnJlYWs7DQo+ICsNCj4gKwkJcmV0ID0gaW50ZWxfYXRvbWljX2xvY2tf
Z2xvYmFsX3N0YXRlKCZuZXdfZGJ1Zl9zdGF0ZS0NCj4gPmJhc2UpOw0KPiArCQlpZiAocmV0KQ0K
PiArCQkJcmV0dXJuIHJldDsNCj4gIA0KPiAgCQkvKg0KPiAtCQkgKiBXZSB1c3VhbGx5IG9ubHkg
aW5pdGlhbGl6ZSBzdGF0ZS0+YWN0aXZlX3BpcGVzIGlmIHdlDQo+IC0JCSAqIHdlJ3JlIGRvaW5n
IGEgbW9kZXNldDsgbWFrZSBzdXJlIHRoaXMgZmllbGQgaXMNCj4gYWx3YXlzDQo+IC0JCSAqIGlu
aXRpYWxpemVkIGR1cmluZyB0aGUgc2FuaXRpemF0aW9uIHByb2Nlc3MgdGhhdA0KPiBoYXBwZW5z
DQo+IC0JCSAqIG9uIHRoZSBmaXJzdCBjb21taXQgdG9vLg0KPiArCQkgKiBza2xfZGRiX2dldF9w
aXBlX2FsbG9jYXRpb25fbGltaXRzKCkgY3VycmVudGx5DQo+IHJlcXVpcmVzDQo+ICsJCSAqIGFs
bCBhY3RpdmUgcGlwZXMgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIHN0YXRlIHNvIHRoYXQNCj4gKwkJ
ICogaXQgY2FuIHJlZGlzdHJpYnV0ZSB0aGUgZGJ1ZiBhbW9uZyB0aGVtLg0KPiAgCQkgKi8NCj4g
LQkJaWYgKCFzdGF0ZS0+bW9kZXNldCkNCj4gLQkJCXN0YXRlLT5hY3RpdmVfcGlwZXMgPSBkZXZf
cHJpdi0+YWN0aXZlX3BpcGVzOw0KPiAtCX0NCj4gLQ0KPiAtCS8qDQo+IC0JICogSWYgdGhlIG1v
ZGVzZXQgY2hhbmdlcyB3aGljaCBDUlRDJ3MgYXJlIGFjdGl2ZSwgd2UgbmVlZCB0bw0KPiAtCSAq
IHJlY29tcHV0ZSB0aGUgRERCIGFsbG9jYXRpb24gZm9yICphbGwqIGFjdGl2ZSBwaXBlcywgZXZl
bg0KPiAtCSAqIHRob3NlIHRoYXQgd2VyZW4ndCBvdGhlcndpc2UgYmVpbmcgbW9kaWZpZWQgaW4g
YW55IHdheSBieQ0KPiB0aGlzDQo+IC0JICogYXRvbWljIGNvbW1pdC4gIER1ZSB0byB0aGUgc2hy
aW5raW5nIG9mIHRoZSBwZXItcGlwZQ0KPiBhbGxvY2F0aW9ucw0KPiAtCSAqIHdoZW4gbmV3IGFj
dGl2ZSBDUlRDJ3MgYXJlIGFkZGVkLCBpdCdzIHBvc3NpYmxlIGZvciBhIHBpcGUNCj4gdGhhdA0K
PiAtCSAqIHdlIHdlcmUgYWxyZWFkeSB1c2luZyBhbmQgYXJlbid0IGNoYW5naW5nIGF0IGFsbCBo
ZXJlIHRvDQo+IHN1ZGRlbmx5DQo+IC0JICogYmVjb21lIGludmFsaWQgaWYgaXRzIEREQiBuZWVk
cyBleGNlZWRzIGl0cyBuZXcgYWxsb2NhdGlvbi4NCj4gLQkgKg0KPiAtCSAqIE5vdGUgdGhhdCBp
ZiB3ZSB3aW5kIHVwIGRvaW5nIGEgZnVsbCBEREIgcmVjb21wdXRlLCB3ZSBjYW4ndA0KPiBsZXQN
Cj4gLQkgKiBhbnkgb3RoZXIgZGlzcGxheSB1cGRhdGVzIHJhY2Ugd2l0aCB0aGlzIHRyYW5zYWN0
aW9uLCBzbyB3ZQ0KPiBuZWVkDQo+IC0JICogdG8gZ3JhYiB0aGUgbG9jayBvbiAqYWxsKiBDUlRD
J3MuDQo+IC0JICovDQo+IC0JaWYgKHN0YXRlLT5hY3RpdmVfcGlwZV9jaGFuZ2VzIHx8IHN0YXRl
LT5tb2Rlc2V0KSB7DQo+IC0JCXJldCA9IGludGVsX2FkZF9hbGxfcGlwZXMoc3RhdGUpOw0KPiAr
CQlyZXQgPSBpbnRlbF9hZGRfYWZmZWN0ZWRfcGlwZXMoc3RhdGUsDQo+ICsJCQkJCSAgICAgICBu
ZXdfZGJ1Zl9zdGF0ZS0NCj4gPmFjdGl2ZV9waXBlcyk7DQo+ICAJCWlmIChyZXQpDQo+ICAJCQly
ZXR1cm4gcmV0Ow0KPiArDQo+ICsJCWJyZWFrOw0KPiAgCX0NCj4gIA0KPiAgCXJldHVybiAwOw0K
PiBAQCAtNzUxMywzICs3NTMxLDUyIEBAIHZvaWQgaW50ZWxfcG1fc2V0dXAoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUNCj4gKmRldl9wcml2KQ0KPiAgCWRldl9wcml2LT5ydW50aW1lX3BtLnN1c3Bl
bmRlZCA9IGZhbHNlOw0KPiAgCWF0b21pY19zZXQoJmRldl9wcml2LT5ydW50aW1lX3BtLndha2Vy
ZWZfY291bnQsIDApOw0KPiAgfQ0KPiArDQo+ICtzdGF0aWMgc3RydWN0IGludGVsX2dsb2JhbF9z
dGF0ZSAqaW50ZWxfZGJ1Zl9kdXBsaWNhdGVfc3RhdGUoc3RydWN0DQo+IGludGVsX2dsb2JhbF9v
YmogKm9iaikNCj4gK3sNCj4gKwlzdHJ1Y3QgaW50ZWxfZGJ1Zl9zdGF0ZSAqZGJ1Zl9zdGF0ZTsN
Cj4gKw0KPiArCWRidWZfc3RhdGUgPSBrbWVtZHVwKG9iai0+c3RhdGUsIHNpemVvZigqZGJ1Zl9z
dGF0ZSksDQo+IEdGUF9LRVJORUwpOw0KPiArCWlmICghZGJ1Zl9zdGF0ZSkNCj4gKwkJcmV0dXJu
IE5VTEw7DQo+ICsNCj4gKwlyZXR1cm4gJmRidWZfc3RhdGUtPmJhc2U7DQo+ICt9DQo+ICsNCj4g
K3N0YXRpYyB2b2lkIGludGVsX2RidWZfZGVzdHJveV9zdGF0ZShzdHJ1Y3QgaW50ZWxfZ2xvYmFs
X29iaiAqb2JqLA0KPiArCQkJCSAgICAgc3RydWN0IGludGVsX2dsb2JhbF9zdGF0ZSAqc3RhdGUp
DQo+ICt7DQo+ICsJa2ZyZWUoc3RhdGUpOw0KPiArfQ0KPiArDQo+ICtzdGF0aWMgY29uc3Qgc3Ry
dWN0IGludGVsX2dsb2JhbF9zdGF0ZV9mdW5jcyBpbnRlbF9kYnVmX2Z1bmNzID0gew0KPiArCS5h
dG9taWNfZHVwbGljYXRlX3N0YXRlID0gaW50ZWxfZGJ1Zl9kdXBsaWNhdGVfc3RhdGUsDQo+ICsJ
LmF0b21pY19kZXN0cm95X3N0YXRlID0gaW50ZWxfZGJ1Zl9kZXN0cm95X3N0YXRlLA0KPiArfTsN
Cj4gKw0KPiArc3RydWN0IGludGVsX2RidWZfc3RhdGUgKg0KPiAraW50ZWxfYXRvbWljX2dldF9k
YnVmX3N0YXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQ0KPiArew0KPiArCXN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoc3RhdGUtPmJhc2UuZGV2
KTsNCj4gKwlzdHJ1Y3QgaW50ZWxfZ2xvYmFsX3N0YXRlICpkYnVmX3N0YXRlOw0KPiArDQo+ICsJ
ZGJ1Zl9zdGF0ZSA9IGludGVsX2F0b21pY19nZXRfZ2xvYmFsX29ial9zdGF0ZShzdGF0ZSwNCj4g
JmRldl9wcml2LT5kYnVmLm9iaik7DQo+ICsJaWYgKElTX0VSUihkYnVmX3N0YXRlKSkNCj4gKwkJ
cmV0dXJuIEVSUl9DQVNUKGRidWZfc3RhdGUpOw0KPiArDQo+ICsJcmV0dXJuIHRvX2ludGVsX2Ri
dWZfc3RhdGUoZGJ1Zl9zdGF0ZSk7DQo+ICt9DQo+ICsNCj4gK2ludCBpbnRlbF9kYnVmX2luaXQo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQ0KPiArew0KPiArCXN0cnVjdCBpbnRl
bF9kYnVmX3N0YXRlICpkYnVmX3N0YXRlOw0KPiArDQo+ICsJZGJ1Zl9zdGF0ZSA9IGt6YWxsb2Mo
c2l6ZW9mKCpkYnVmX3N0YXRlKSwgR0ZQX0tFUk5FTCk7DQo+ICsJaWYgKCFkYnVmX3N0YXRlKQ0K
PiArCQlyZXR1cm4gLUVOT01FTTsNCj4gKw0KPiArCWludGVsX2F0b21pY19nbG9iYWxfb2JqX2lu
aXQoZGV2X3ByaXYsICZkZXZfcHJpdi0+ZGJ1Zi5vYmosDQo+ICsJCQkJICAgICAmZGJ1Zl9zdGF0
ZS0+YmFzZSwNCj4gJmludGVsX2RidWZfZnVuY3MpOw0KPiArDQo+ICsJcmV0dXJuIDA7DQo+ICt9
DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5oDQo+IGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uaA0KPiBpbmRleCBkNjBhODU0MjFjNWEuLmZhZGY3
Y2JjNDRjNCAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uaA0K
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5oDQo+IEBAIC04LDYgKzgsOCBA
QA0KPiAgDQo+ICAjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4NCj4gIA0KPiArI2luY2x1ZGUgImRp
c3BsYXkvaW50ZWxfZ2xvYmFsX3N0YXRlLmgiDQo+ICsNCj4gICNpbmNsdWRlICJpOTE1X3JlZy5o
Ig0KPiAgDQo+ICBzdHJ1Y3QgZHJtX2RldmljZTsNCj4gQEAgLTU5LDQgKzYxLDI0IEBAIHZvaWQg
aW50ZWxfZW5hYmxlX2lwYyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZQ0KPiAqZGV2X3ByaXYpOw0K
PiAgDQo+ICBib29sIGludGVsX3NldF9tZW1vcnlfY3hzcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsIGJvb2wNCj4gZW5hYmxlKTsNCj4gIA0KPiArc3RydWN0IGludGVsX2RidWZf
c3RhdGUgew0KPiArCXN0cnVjdCBpbnRlbF9nbG9iYWxfc3RhdGUgYmFzZTsNCj4gKw0KPiArCXU4
IGVuYWJsZWRfc2xpY2VzOw0KPiArCXU4IGFjdGl2ZV9waXBlczsNCj4gK307DQo+ICsNCj4gK2lu
dCBpbnRlbF9kYnVmX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsNCj4g
Kw0KPiArc3RydWN0IGludGVsX2RidWZfc3RhdGUgKg0KPiAraW50ZWxfYXRvbWljX2dldF9kYnVm
X3N0YXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKTsNCj4gKw0KPiArI2RlZmlu
ZSB0b19pbnRlbF9kYnVmX3N0YXRlKHgpIGNvbnRhaW5lcl9vZigoeCksIHN0cnVjdA0KPiBpbnRl
bF9kYnVmX3N0YXRlLCBiYXNlKQ0KPiArI2RlZmluZSBpbnRlbF9hdG9taWNfZ2V0X29sZF9kYnVm
X3N0YXRlKHN0YXRlKSBcDQo+ICsJdG9faW50ZWxfZGJ1Zl9zdGF0ZShpbnRlbF9hdG9taWNfZ2V0
X29sZF9nbG9iYWxfb2JqX3N0YXRlKHN0YXRlDQo+ICwgJnRvX2k5MTUoc3RhdGUtPmJhc2UuZGV2
KS0+ZGJ1Zi5vYmopKQ0KPiArI2RlZmluZSBpbnRlbF9hdG9taWNfZ2V0X25ld19kYnVmX3N0YXRl
KHN0YXRlKSBcDQo+ICsJdG9faW50ZWxfZGJ1Zl9zdGF0ZShpbnRlbF9hdG9taWNfZ2V0X25ld19n
bG9iYWxfb2JqX3N0YXRlKHN0YXRlDQo+ICwgJnRvX2k5MTUoc3RhdGUtPmJhc2UuZGV2KS0+ZGJ1
Zi5vYmopKQ0KPiArDQo+ICtpbnQgaW50ZWxfZGJ1Zl9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdik7DQo+ICsNCj4gICNlbmRpZiAvKiBfX0lOVEVMX1BNX0hfXyAqLw0KX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1h
aWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

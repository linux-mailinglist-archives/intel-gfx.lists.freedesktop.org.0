Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1FDA1175A7
	for <lists+intel-gfx@lfdr.de>; Wed,  8 May 2019 12:10:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CB2B289159;
	Wed,  8 May 2019 10:10:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A69B18958E;
 Wed,  8 May 2019 10:10:24 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16487702-1500050 
 for multiple; Wed, 08 May 2019 11:10:14 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  8 May 2019 11:09:57 +0100
Message-Id: <20190508100958.32637-15-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190508100958.32637-1-chris@chris-wilson.co.uk>
References: <20190508100958.32637-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t 15/16] i915/gem_exec_latency: Measure the
 latency of context switching
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TWVhc3VyZSB0aGUgYmFzZWxpbmUgbGF0ZW5jeSBiZXR3ZWVuIGNvbnRleHRzIGluIG9yZGVyIHRv
IGRpcmVjdGx5CmNvbXBhcmUgdGhhdCB3aXRoIHRoZSBhZGRpdGlvbmFsIGNvc3Qgb2YgcHJlZW1w
dGlvbi4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNv
LnVrPgotLS0KIHRlc3RzL2k5MTUvZ2VtX2V4ZWNfbGF0ZW5jeS5jIHwgMjMwICsrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysKIDEgZmlsZSBjaGFuZ2VkLCAyMzAgaW5zZXJ0aW9ucygr
KQoKZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX2V4ZWNfbGF0ZW5jeS5jIGIvdGVzdHMvaTkx
NS9nZW1fZXhlY19sYXRlbmN5LmMKaW5kZXggZTU2ZDYyNzgwLi5lODhmYmJjNmEgMTAwNjQ0Ci0t
LSBhL3Rlc3RzL2k5MTUvZ2VtX2V4ZWNfbGF0ZW5jeS5jCisrKyBiL3Rlc3RzL2k5MTUvZ2VtX2V4
ZWNfbGF0ZW5jeS5jCkBAIC00MTAsNiArNDEwLDg2IEBAIHN0YXRpYyB2b2lkIGxhdGVuY3lfZnJv
bV9yaW5nKGludCBmZCwKIAl9CiB9CiAKK3N0YXRpYyB2b2lkIGV4ZWN1dGlvbl9sYXRlbmN5KGlu
dCBpOTE1LCB1bnNpZ25lZCBpbnQgcmluZywgY29uc3QgY2hhciAqbmFtZSkKK3sKKwlzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX2V4ZWNfb2JqZWN0MiBvYmogPSB7CisJCS5oYW5kbGUgPSBnZW1fY3JlYXRl
KGk5MTUsIDQwOTUpLAorCX07CisJc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiBleGVj
YnVmID0geworCQkuYnVmZmVyc19wdHIgPSB0b191c2VyX3BvaW50ZXIoJm9iaiksCisJCS5idWZm
ZXJfY291bnQgPSAxLAorCQkuZmxhZ3MgPSByaW5nIHwgTE9DQUxfSTkxNV9FWEVDX05PX1JFTE9D
IHwgTE9DQUxfSTkxNV9FWEVDX0hBTkRMRV9MVVQsCisJfTsKKwljb25zdCB1bnNpZ25lZCBpbnQg
bW1pb19iYXNlID0gMHgyMDAwOworCWNvbnN0IHVuc2lnbmVkIGludCBjc190aW1lc3RhbXAgPSBt
bWlvX2Jhc2UgKyAweDM1ODsKKwl2b2xhdGlsZSB1aW50MzJfdCAqdGltZXN0YW1wOworCXVpbnQz
Ml90ICpjcywgKnJlc3VsdDsKKworCXRpbWVzdGFtcCA9CisJCSh2b2xhdGlsZSB1aW50MzJfdCAq
KSgodm9sYXRpbGUgY2hhciAqKWlndF9nbG9iYWxfbW1pbyArIGNzX3RpbWVzdGFtcCk7CisKKwlv
YmouaGFuZGxlID0gZ2VtX2NyZWF0ZShpOTE1LCA0MDk2KTsKKwlvYmouZmxhZ3MgPSBFWEVDX09C
SkVDVF9QSU5ORUQ7CisJcmVzdWx0ID0gZ2VtX21tYXBfX3djKGk5MTUsIG9iai5oYW5kbGUsIDAs
IDQwOTYsIFBST1RfV1JJVEUpOworCisJZm9yIChpbnQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7CisJ
CWNzID0gcmVzdWx0ICsgMTYgKiBpOworCQkqY3MrKyA9IDB4MjQgPDwgMjMgfCAyOyAvKiBTUk0g
Ki8KKwkJKmNzKysgPSBjc190aW1lc3RhbXA7CisJCSpjcysrID0gNDA5NiAtIDE2ICogNCArIGkg
KiA0OworCQkqY3MrKyA9IDA7CisJCSpjcysrID0gMHhhIDw8IDIzOworCX0KKworCWNzID0gcmVz
dWx0ICsgMTAyNCAtIDE2OworCisJZm9yIChpbnQgbGVuZ3RoID0gMjsgbGVuZ3RoIDw9IDE2OyBs
ZW5ndGggPDw9IDEpIHsKKwkJc3RydWN0IGlndF9tZWFuIHN1Ym1pdCwgYmF0Y2gsIHRvdGFsOwor
CQlpbnQgbGFzdCA9IGxlbmd0aCAtIDE7CisKKwkJaWd0X21lYW5faW5pdCgmc3VibWl0KTsKKwkJ
aWd0X21lYW5faW5pdCgmYmF0Y2gpOworCQlpZ3RfbWVhbl9pbml0KCZ0b3RhbCk7CisKKwkJaWd0
X3VudGlsX3RpbWVvdXQoMikgeworCQkJdWludDMyX3Qgbm93LCBlbmQ7CisKKwkJCWNzW2xhc3Rd
ID0gMDsKKworCQkJbm93ID0gKnRpbWVzdGFtcDsKKwkJCWZvciAoaW50IGkgPSAwOyBpIDwgbGVu
Z3RoOyBpKyspIHsKKwkJCQlleGVjYnVmLmJhdGNoX3N0YXJ0X29mZnNldCA9IDY0ICogaTsKKwkJ
CQlnZW1fZXhlY2J1ZihpOTE1LCAmZXhlY2J1Zik7CisJCQl9CisJCQl3aGlsZSAoISgodm9sYXRp
bGUgdWludDMyX3QgKiljcylbbGFzdF0pCisJCQkJOworCQkJZW5kID0gKnRpbWVzdGFtcDsKKwor
CQkJaWd0X21lYW5fYWRkKCZzdWJtaXQsIChjc1swXSAtIG5vdykgKiByY3NfY2xvY2spOworCQkJ
aWd0X21lYW5fYWRkKCZiYXRjaCwgKGNzW2xhc3RdIC0gY3NbMF0pICogcmNzX2Nsb2NrIC8gbGFz
dCk7CisJCQlpZ3RfbWVhbl9hZGQoJnRvdGFsLCAoZW5kIC0gbm93KSAqIHJjc19jbG9jayk7CisJ
CX0KKworCQlpZ3RfaW5mbygiJXN4JWQgU3VibWlzc2lvbiBsYXRlbmN5OiAlLjJmwrElLjJmdXNc
biIsCisJCQkgbmFtZSwgbGVuZ3RoLAorCQkJIDFlLTMgKiBpZ3RfbWVhbl9nZXQoJnN1Ym1pdCks
CisJCQkgMWUtMyAqIHNxcnQoaWd0X21lYW5fZ2V0X3ZhcmlhbmNlKCZzdWJtaXQpKSk7CisKKwkJ
aWd0X2luZm8oIiVzeCVkIEludGVyLWJhdGNoIGxhdGVuY3k6ICUuMmbCsSUuMmZ1c1xuIiwKKwkJ
CSBuYW1lLCBsZW5ndGgsCisJCQkgMWUtMyAqIGlndF9tZWFuX2dldCgmYmF0Y2gpLAorCQkJIDFl
LTMgKiBzcXJ0KGlndF9tZWFuX2dldF92YXJpYW5jZSgmYmF0Y2gpKSk7CisKKwkJaWd0X2luZm8o
IiVzeCVkIEVuZC10by1lbmQgbGF0ZW5jeTogJS4yZsKxJS4yZnVzXG4iLAorCQkJIG5hbWUsIGxl
bmd0aCwKKwkJCSAxZS0zICogaWd0X21lYW5fZ2V0KCZ0b3RhbCksCisJCQkgMWUtMyAqIHNxcnQo
aWd0X21lYW5fZ2V0X3ZhcmlhbmNlKCZ0b3RhbCkpKTsKKwl9CisKKwltdW5tYXAocmVzdWx0LCA0
MDk2KTsKKwlnZW1fY2xvc2UoaTkxNSwgb2JqLmhhbmRsZSk7Cit9CisKIHN0YXRpYyB2b2lkCiBf
X3N1Ym1pdF9zcGluKGludCBmZCwgaWd0X3NwaW5fdCAqc3BpbiwgdW5zaWduZWQgaW50IGZsYWdz
KQogewpAQCAtNjE2LDYgKzY5NiwxNDIgQEAgcnRob2dfbGF0ZW5jeV9vbl9yaW5nKGludCBmZCwg
dW5zaWduZWQgaW50IGVuZ2luZSwgY29uc3QgY2hhciAqbmFtZSwgdW5zaWduZWQgaW4KIAltdW5t
YXAocmVzdWx0cywgTU1BUF9TWik7CiB9CiAKK3N0YXRpYyB2b2lkIGNvbnRleHRfc3dpdGNoKGlu
dCBpOTE1LAorCQkJICAgdW5zaWduZWQgaW50IGVuZ2luZSwgY29uc3QgY2hhciAqbmFtZSwKKwkJ
CSAgIHVuc2lnbmVkIGludCBmbGFncykKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNfb2Jq
ZWN0MiBvYmpbMl07CisJc3RydWN0IGRybV9pOTE1X2dlbV9yZWxvY2F0aW9uX2VudHJ5IHJlbG9j
WzVdOworCXN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcjIgZWI7CisJdWludDMyX3QgKmNz
LCAqYmJlLCAqcmVzdWx0cywgdjsKKwl1bnNpZ25lZCBpbnQgbW1pb19iYXNlOworCXN0cnVjdCBp
Z3RfbWVhbiBtZWFuOworCXVpbnQzMl90IGN0eFsyXTsKKworCS8qIFhYWCBpOTE1X3F1ZXJ5KCkh
ICovCisJc3dpdGNoIChlbmdpbmUpIHsKKwljYXNlIEk5MTVfRVhFQ19ERUZBVUxUOgorCWNhc2Ug
STkxNV9FWEVDX1JFTkRFUjoKKwkJbW1pb19iYXNlID0gMHgyMDAwOworCQlicmVhazsKKyNpZiAw
CisJY2FzZSBJOTE1X0VYRUNfQlNEOgorCQltbWlvX2Jhc2UgPSAweDEyMDAwOworCQlicmVhazsK
KyNlbmRpZgorCWNhc2UgSTkxNV9FWEVDX0JMVDoKKwkJbW1pb19iYXNlID0gMHgyMjAwMDsKKwkJ
YnJlYWs7CisKKwljYXNlIEk5MTVfRVhFQ19WRUJPWDoKKwkJaWYgKGludGVsX2dlbihpbnRlbF9n
ZXRfZHJtX2RldmlkKGk5MTUpKSA+PSAxMSkKKwkJCW1taW9fYmFzZSA9IDB4MWQ4MDAwOworCQll
bHNlCisJCQltbWlvX2Jhc2UgPSAweDFhMDAwOworCQlicmVhazsKKworCWRlZmF1bHQ6CisJCWln
dF9za2lwKCJtbWlvIGJhc2Ugbm90IGtub3duXG4iKTsKKwl9CisKKwlmb3IgKGludCBpID0gMDsg
aSA8IEFSUkFZX1NJWkUoY3R4KTsgaSsrKQorCQljdHhbaV0gPSBnZW1fY29udGV4dF9jcmVhdGUo
aTkxNSk7CisKKwlpZiAoZmxhZ3MgJiBQUkVFTVBUKSB7CisJCWdlbV9jb250ZXh0X3NldF9wcmlv
cml0eShpOTE1LCBjdHhbMF0sIC0xMDIzKTsKKwkJZ2VtX2NvbnRleHRfc2V0X3ByaW9yaXR5KGk5
MTUsIGN0eFsxXSwgKzEwMjMpOworCX0KKworCW1lbXNldChvYmosIDAsIHNpemVvZihvYmopKTsK
KwlvYmpbMF0uaGFuZGxlID0gZ2VtX2NyZWF0ZShpOTE1LCA0MDk2KTsKKwlnZW1fc2V0X2NhY2hp
bmcoaTkxNSwgb2JqWzBdLmhhbmRsZSwgMSk7CisJcmVzdWx0cyA9IGdlbV9tbWFwX19jcHUoaTkx
NSwgb2JqWzBdLmhhbmRsZSwgMCwgNDA5NiwgUFJPVF9SRUFEKTsKKwlnZW1fc2V0X2RvbWFpbihp
OTE1LCBvYmpbMF0uaGFuZGxlLCBJOTE1X0dFTV9ET01BSU5fQ1BVLCAwKTsKKworCW9ialsxXS5o
YW5kbGUgPSBnZW1fY3JlYXRlKGk5MTUsIDQwOTYpOworCW1lbXNldChyZWxvYywwLCBzaXplb2Yo
cmVsb2MpKTsKKwlvYmpbMV0ucmVsb2NhdGlvbl9jb3VudCA9IEFSUkFZX1NJWkUocmVsb2MpOwor
CW9ialsxXS5yZWxvY3NfcHRyID0gdG9fdXNlcl9wb2ludGVyKHJlbG9jKTsKKwliYmUgPSBnZW1f
bW1hcF9fd2MoaTkxNSwgb2JqWzFdLmhhbmRsZSwgMCwgNDA5NiwgUFJPVF9XUklURSk7CisJZ2Vt
X3NldF9kb21haW4oaTkxNSwgb2JqWzFdLmhhbmRsZSwKKwkJICAgICAgIEk5MTVfR0VNX0RPTUFJ
Tl9XQywgSTkxNV9HRU1fRE9NQUlOX1dDKTsKKworCWNzID0gYmJlOworCSpjcysrID0gMHg1IDw8
IDIzOworCSpjcysrID0gMHgyNCA8PCAyMyB8IDI7IC8qIFNSTSAqLworCSpjcysrID0gbW1pb19i
YXNlICsgMHgzNTg7IC8qIFRJTUVTVEFNUCAqLworCXJlbG9jWzBdLnRhcmdldF9oYW5kbGUgPSBv
YmpbMF0uaGFuZGxlOworCXJlbG9jWzBdLm9mZnNldCA9IChjcyAtIGJiZSkgKiBzaXplb2YoKmNz
KTsKKwkqY3MrKyA9IDA7CisJKmNzKysgPSAwOworCSpjcysrID0gTUlfQkFUQ0hfQlVGRkVSX1NU
QVJUIHwgMTsKKwlyZWxvY1sxXS50YXJnZXRfaGFuZGxlID0gb2JqWzFdLmhhbmRsZTsKKwlyZWxv
Y1sxXS5vZmZzZXQgPSAoY3MgLSBiYmUpICogc2l6ZW9mKCpjcyk7CisJKmNzKysgPSAwOworCSpj
cysrID0gMDsKKworCWNzID0gYmJlICsgNjQ7CisJKmNzKysgPSAweDI0IDw8IDIzIHwgMjsgLyog
U1JNICovCisJKmNzKysgPSBtbWlvX2Jhc2UgKyAweDM1ODsgLyogVElNRVNUQU1QICovCisJcmVs
b2NbMl0udGFyZ2V0X2hhbmRsZSA9IG9ialswXS5oYW5kbGU7CisJcmVsb2NbMl0ub2Zmc2V0ID0g
KGNzIC0gYmJlKSAqIHNpemVvZigqY3MpOworCSpjcysrID0gcmVsb2NbMl0uZGVsdGEgPSA0Owor
CSpjcysrID0gMDsKKwkqY3MrKyA9IDB4MjkgPDwgMjMgfCAyOyAvKiBMUk0gKi8KKwkqY3MrKyA9
IG1taW9fYmFzZSArIDB4NjAwOyAvKiBHUFIwICovCisJcmVsb2NbM10udGFyZ2V0X2hhbmRsZSA9
IG9ialswXS5oYW5kbGU7CisJcmVsb2NbM10ub2Zmc2V0ID0gKGNzIC0gYmJlKSAqIHNpemVvZigq
Y3MpOworCSpjcysrID0gMDsKKwkqY3MrKyA9IDA7CisJKmNzKysgPSAweDI0IDw8IDIzIHwgMjsg
LyogU1JNICovCisJKmNzKysgPSBtbWlvX2Jhc2UgKyAweDYwMDsgLyogR1BSMCAqLworCXJlbG9j
WzRdLnRhcmdldF9oYW5kbGUgPSBvYmpbMF0uaGFuZGxlOworCXJlbG9jWzRdLm9mZnNldCA9IChj
cyAtIGJiZSkgKiBzaXplb2YoKmNzKTsKKwkqY3MrKyA9IHJlbG9jWzRdLmRlbHRhID0gODsKKwkq
Y3MrKyA9IDA7CisJKmNzKysgPSAweGEgPDwgMjM7CisKKwltZW1zZXQoJmViLCAwLCBzaXplb2Yo
ZWIpKTsKKwllYi5idWZmZXJzX3B0ciA9IHRvX3VzZXJfcG9pbnRlcihvYmopOworCWViLmJ1ZmZl
cl9jb3VudCA9IEFSUkFZX1NJWkUob2JqKTsKKwllYi5mbGFncyA9IGVuZ2luZTsKKwllYi5mbGFn
cyB8PSBMT0NBTF9JOTE1X0VYRUNfTk9fUkVMT0M7CisKKwl2ID0gMDsKKwlpZ3RfbWVhbl9pbml0
KCZtZWFuKTsKKwlpZ3RfdW50aWxfdGltZW91dCg1KSB7CisJCWViLnJzdmQxID0gY3R4WzBdOwor
CQllYi5iYXRjaF9zdGFydF9vZmZzZXQgPSAwOworCQlnZW1fZXhlY2J1ZihpOTE1LCAmZWIpOwor
CisJCXdoaWxlIChyZXN1bHRzWzBdID09IHYpCisJCQlpZ3RfYXNzZXJ0KGdlbV9ib19idXN5KGk5
MTUsIG9ialsxXS5oYW5kbGUpKTsKKworCQllYi5yc3ZkMSA9IGN0eFsxXTsKKwkJZWIuYmF0Y2hf
c3RhcnRfb2Zmc2V0ID0gNjQgKiBzaXplb2YoKmNzKTsKKwkJZ2VtX2V4ZWNidWYoaTkxNSwgJmVi
KTsKKworCQkqYmJlID0gMHhhIDw8IDIzOworCQlnZW1fc3luYyhpOTE1LCBvYmpbMV0uaGFuZGxl
KTsKKwkJKmJiZSA9IDB4NSA8PCAyMzsKKworCQl2ID0gcmVzdWx0c1swXTsKKwkJaWd0X21lYW5f
YWRkKCZtZWFuLCAocmVzdWx0c1sxXSAtIHJlc3VsdHNbMl0pICogcmNzX2Nsb2NrKTsKKwl9CisJ
aWd0X2luZm8oIiVzIGNvbnRleHQgc3dpdGNoIGxhdGVuY3klczogJS4yZsKxJS4yZnVzXG4iLAor
CQkgbmFtZSwgZmxhZ3MgJiBQUkVFTVBUID8gIiAocHJlZW1wdCkiIDogIiIsCisJCSAxZS0zICog
aWd0X21lYW5fZ2V0KCZtZWFuKSwKKwkJIDFlLTMgKiBzcXJ0KGlndF9tZWFuX2dldF92YXJpYW5j
ZSgmbWVhbikpKTsKKwltdW5tYXAocmVzdWx0cywgNDA5Nik7CisJbXVubWFwKGJiZSwgNDA5Nik7
CisKKwlmb3IgKGludCBpID0gMDsgaSA8IEFSUkFZX1NJWkUob2JqKTsgaSsrKQorCQlnZW1fY2xv
c2UoaTkxNSwgb2JqW2ldLmhhbmRsZSk7CisKKwlmb3IgKGludCBpID0gMDsgaSA8IEFSUkFZX1NJ
WkUoY3R4KTsgaSsrKQorCQlnZW1fY29udGV4dF9kZXN0cm95KGk5MTUsIGN0eFtpXSk7Cit9CisK
IHN0YXRpYyBkb3VibGUgY2xvY2tyYXRlKGludCBpOTE1LCBpbnQgcmVnKQogewogCXZvbGF0aWxl
IHVpbnQzMl90ICptbWlvOwpAQCAtNzIyLDYgKzkzOCwxMSBAQCBpZ3RfbWFpbgogCQkJCQkJCSAg
ICAgIGUtPm5hbWUsCiAJCQkJCQkJICAgICAgMCk7CiAKKwkJCQlpZ3Rfc3VidGVzdF9mKCIlcy1l
eGVjdXRpb24tbGF0ZW5jeSIsIGUtPm5hbWUpCisJCQkJCWV4ZWN1dGlvbl9sYXRlbmN5KGRldmlj
ZSwKKwkJCQkJCQkgIGUtPmV4ZWNfaWQgfCBlLT5mbGFncywKKwkJCQkJCQkgIGUtPm5hbWUpOwor
CiAJCQkJaWd0X3N1YnRlc3RfZigiJXMtbGl2ZS1kaXNwYXRjaC1xdWV1ZWQiLCBlLT5uYW1lKQog
CQkJCQlsYXRlbmN5X29uX3JpbmcoZGV2aWNlLAogCQkJCQkJCWUtPmV4ZWNfaWQgfCBlLT5mbGFn
cywKQEAgLTc0MSwxMiArOTYyLDIxIEBAIGlndF9tYWluCiAJCQkJCQkJICBlLT5leGVjX2lkIHwg
ZS0+ZmxhZ3MsCiAJCQkJCQkJICBlLT5uYW1lLCBDT1JLKTsKIAorCQkJCWlndF9zdWJ0ZXN0X2Yo
IiVzLWNzIiwgZS0+bmFtZSkKKwkJCQkJY29udGV4dF9zd2l0Y2goZGV2aWNlLAorCQkJCQkJICAg
ICAgIGUtPmV4ZWNfaWQgfCBlLT5mbGFncywKKwkJCQkJCSAgICAgICBlLT5uYW1lLCAwKTsKIAkJ
CQlpZ3Rfc3VidGVzdF9ncm91cCB7CiAJCQkJCWlndF9maXh0dXJlIHsKIAkJCQkJCWdlbV9yZXF1
aXJlX2NvbnRleHRzKGRldmljZSk7CiAJCQkJCQlpZ3RfcmVxdWlyZShnZW1fc2NoZWR1bGVyX2hh
c19wcmVlbXB0aW9uKGRldmljZSkpOwogCQkJCQl9CiAKKwkJCQkJaWd0X3N1YnRlc3RfZigiJXMt
Y3MtcHJlZW1wdCIsIGUtPm5hbWUpCisJCQkJCQljb250ZXh0X3N3aXRjaChkZXZpY2UsCisJCQkJ
CQkJCWUtPmV4ZWNfaWQgfCBlLT5mbGFncywKKwkJCQkJCQkJZS0+bmFtZSwgUFJFRU1QVCk7CisK
IAkJCQkJaWd0X3N1YnRlc3RfZigiJXMtcHJlZW1wdGlvbiIsIGUtPm5hbWUpCiAJCQkJCQlsYXRl
bmN5X2Zyb21fcmluZyhkZXZpY2UsCiAJCQkJCQkJCSAgZS0+ZXhlY19pZCB8IGUtPmZsYWdzLAot
LSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D7BF21A27D2
	for <lists+intel-gfx@lfdr.de>; Wed,  8 Apr 2020 19:17:56 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2129589FD4;
	Wed,  8 Apr 2020 17:17:55 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 69E9689FD4
 for <intel-gfx@lists.freedesktop.org>; Wed,  8 Apr 2020 17:17:53 +0000 (UTC)
IronPort-SDR: uPKf+Hv4WcF9+jEbwMxJ+xfOC7LQy9iIZ9nNtmVMomcTvUpxR4e5JUqJvfzTCH3NSQcIgIXQ8+
 IhVxj1ES/o6g==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by orsmga105.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 08 Apr 2020 10:14:51 -0700
IronPort-SDR: F3X5iZC4aduX/sLwNKl9b2X1zEV4I1l1vZV9OxJXPb5ziwNIKticWDf63176x1fsRUmaxlKBbR
 wTi6ZMxJKhdA==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.72,359,1580803200"; d="scan'208";a="240358456"
Received: from mkuligow-mobl1.ger.corp.intel.com (HELO [10.252.40.242])
 ([10.252.40.242])
 by orsmga007.jf.intel.com with ESMTP; 08 Apr 2020 10:14:49 -0700
To: Venkata Sandeep Dhanalakota <venkata.s.dhanalakota@intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20200406200710.2056-1-venkata.s.dhanalakota@intel.com>
 <20200406200710.2056-2-venkata.s.dhanalakota@intel.com>
From: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Organization: Intel Corporation (UK) Ltd. - Co. Reg. #1134945 - Pipers Way,
 Swindon SN3 1RJ
Message-ID: <b578013c-83e4-a0e8-2ec6-f9e203d79068@intel.com>
Date: Wed, 8 Apr 2020 20:14:49 +0300
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.6.0
MIME-Version: 1.0
In-Reply-To: <20200406200710.2056-2-venkata.s.dhanalakota@intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 2/3] drm/i915: add syncobj timeline support
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: chris.p.wilson@intel.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gMDYvMDQvMjAyMCAyMzowNywgVmVua2F0YSBTYW5kZWVwIERoYW5hbGFrb3RhIHdyb3RlOgo+
IEludHJvZHVjZXMgYSBuZXcgcGFyYW1ldGVycyB0byBleGVjYnVmIHNvIHRoYXQgd2UgY2FuIHNw
ZWNpZnkgc3luY29iago+IGhhbmRsZXMgYXMgd2VsbCBhcyB0aW1lbGluZSBwb2ludHMuCj4KPiB2
MjogUmV1c2UgaTkxNV91c2VyX2V4dGVuc2lvbl9mbgo+Cj4gdjM6IENoZWNrIHRoYXQgdGhlIGNo
YWluZWQgZXh0ZW5zaW9uIGlzIG9ubHkgcHJlc2VudCBvbmNlIChDaHJpcykKPgo+IHY0OiBDaGVj
ayB0aGF0IGRtYV9mZW5jZV9jaGFpbl9maW5kX3NlcW5vIHJldHVybnMgYSBub24gTlVMTCBmZW5j
ZQo+IChMaW9uZWwpCj4KPiB2NTogVXNlIEJJVF9VTEwgKENocmlzKQo+Cj4gdjY6IEZpeCBpc3N1
ZSB3aXRoIGFscmVhZHkgc2lnbmFsZWQgdGltZWxpbmUgcG9pbnRzLAo+ICAgICAgZG1hX2ZlbmNl
X2NoYWluX2ZpbmRfc2Vxbm8oKSBzZXR0aW5nIGZlbmNlIHRvIE5VTEwgKENocmlzKQo+Cj4gdjc6
IFJlcG9ydCBFTk9FTlQgd2l0aCBpbnZhbGlkIHN5bmNvYmogaGFuZGxlIChMaW9uZWwpCj4KPiB2
ODogQ2hlY2sgZm9yIG91dCBvZiBvcmRlciB0aW1lbGluZSBwb2ludCBpbnNlcnRpb24gKENocmlz
KQo+Cj4gdjk6IEFmdGVyIGV4cGxhbmF0aW9ucyBvbgo+ICAgICAgaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvYXJjaGl2ZXMvZHJpLWRldmVsLzIwMTktQXVndXN0LzIyOTI4Ny5odG1sCj4g
ICAgICBkcm9wIHRoZSBvcmRlcmluZyBjaGVjayBmcm9tIHY4IChMaW9uZWwpCj4KPiB2MTA6IFNl
dCBmaXJzdCBleHRlbnNpb24gZW51bSBpdGVtIHRvIDEgKEphc29uKQo+Cj4gdjExOiBBZGQgd2Fp
dCBvbiBwcmV2aW91cyBzeW5jIHBvaW50cyBpbiB0aW1lbGluZXMgKFNhbmRlZXApCj4KPiBTaWdu
ZWQtb2ZmLWJ5OiBMaW9uZWwgTGFuZHdlcmxpbiA8bGlvbmVsLmcubGFuZHdlcmxpbkBpbnRlbC5j
b20+Cj4gU2lnbmVkLW9mZi1ieTogVmVua2F0YSBTYW5kZWVwIERoYW5hbGFrb3RhIDx2ZW5rYXRh
LnMuZGhhbmFsYWtvdGEgYXQgaW50ZWwuY29tPgo+IC0tLQo+ICAgLi4uL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jICAgIHwgMzEyICsrKysrKysrKysrKysrLS0tLQo+ICAg
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyAgICAgICAgICAgICAgIHwgICAzICstCj4g
ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dldHBhcmFtLmMgICAgICAgICAgfCAgIDEgKwo+
ICAgaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oICAgICAgICAgICAgICAgICAgIHwgIDM4ICsr
Kwo+ICAgNCBmaWxlcyBjaGFuZ2VkLCAyOTYgaW5zZXJ0aW9ucygrKSwgNTggZGVsZXRpb25zKC0p
Cj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNi
dWZmZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMK
PiBpbmRleCAxNjgzMWY3MTVkYWEuLjRjYjRjZDAzNWRhYSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYwo+IEBAIC0yMzAsNiArMjMwLDEz
IEBAIGVudW0gewo+ICAgICogdGhlIGJhdGNoYnVmZmVyIGluIHRydXN0ZWQgbW9kZSwgb3RoZXJ3
aXNlIHRoZSBpb2N0bCBpcyByZWplY3RlZC4KPiAgICAqLwo+ICAgCj4gK3N0cnVjdCBpOTE1X2Vi
X2ZlbmNlcyB7Cj4gKwlzdHJ1Y3QgZHJtX3N5bmNvYmogKnN5bmNvYmo7IC8qIFVzZSB3aXRoIHB0
cl9tYXNrX2JpdHMoKSAqLwo+ICsJc3RydWN0IGRtYV9mZW5jZSAqZG1hX2ZlbmNlOwo+ICsJdTY0
IHZhbHVlOwo+ICsJc3RydWN0IGRtYV9mZW5jZV9jaGFpbiAqY2hhaW5fZmVuY2U7Cj4gK307Cj4g
Kwo+ICAgc3RydWN0IGk5MTVfZXhlY2J1ZmZlciB7Cj4gICAJc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTU7IC8qKiBpOTE1IGJhY2twb2ludGVyICovCj4gICAJc3RydWN0IGRybV9maWxlICpm
aWxlOyAvKiogcGVyLWZpbGUgbG9va3VwIHRhYmxlcyBhbmQgbGltaXRzICovCj4gQEAgLTI5Miw2
ICsyOTksNyBAQCBzdHJ1Y3QgaTkxNV9leGVjYnVmZmVyIHsKPiAgIAo+ICAgCXN0cnVjdCB7Cj4g
ICAJCXU2NCBmbGFnczsgLyoqIEF2YWlsYWJsZSBleHRlbnNpb25zIHBhcmFtZXRlcnMgKi8KPiAr
CQlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXJfZXh0X3RpbWVsaW5lX2ZlbmNlcyB0aW1l
bGluZV9mZW5jZXM7Cj4gICAJfSBleHRlbnNpb25zOwo+ICAgfTsKPiAgIAo+IEBAIC0yMjQ0LDY3
ICsyMjUyLDIxOSBAQCBlYl9waW5fZW5naW5lKHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgKmViLAo+
ICAgfQo+ICAgCj4gICBzdGF0aWMgdm9pZAo+IC1fX2ZyZWVfZmVuY2VfYXJyYXkoc3RydWN0IGRy
bV9zeW5jb2JqICoqZmVuY2VzLCB1bnNpZ25lZCBpbnQgbikKPiArX19mcmVlX2ZlbmNlX2FycmF5
KHN0cnVjdCBpOTE1X2ViX2ZlbmNlcyAqZmVuY2VzLCB1bnNpZ25lZCBpbnQgbikKPiAgIHsKPiAt
CXdoaWxlIChuLS0pCj4gLQkJZHJtX3N5bmNvYmpfcHV0KHB0cl9tYXNrX2JpdHMoZmVuY2VzW25d
LCAyKSk7Cj4gKwl3aGlsZSAobi0tKSB7Cj4gKwkJZHJtX3N5bmNvYmpfcHV0KHB0cl9tYXNrX2Jp
dHMoZmVuY2VzW25dLnN5bmNvYmosIDIpKTsKPiArCQlkbWFfZmVuY2VfcHV0KGZlbmNlc1tuXS5k
bWFfZmVuY2UpOwo+ICsJCWtmcmVlKGZlbmNlc1tuXS5jaGFpbl9mZW5jZSk7Cj4gKwl9Cj4gICAJ
a3ZmcmVlKGZlbmNlcyk7Cj4gICB9Cj4gICAKPiAtc3RhdGljIHN0cnVjdCBkcm1fc3luY29iaiAq
Kgo+IC1nZXRfZmVuY2VfYXJyYXkoc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiAqYXJn
cywKPiAtCQlzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCj4gK3N0YXRpYyBzdHJ1Y3QgaTkxNV9lYl9m
ZW5jZXMgKgo+ICtnZXRfdGltZWxpbmVfZmVuY2VfYXJyYXkoc3RydWN0IGk5MTVfZXhlY2J1ZmZl
ciAqZWIsIGludCAqb3V0X25fZmVuY2VzKQo+ICt7Cj4gKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4
ZWNidWZmZXJfZXh0X3RpbWVsaW5lX2ZlbmNlcyAqdGltZWxpbmVfZmVuY2VzID0KPiArCQkmZWIt
PmV4dGVuc2lvbnMudGltZWxpbmVfZmVuY2VzOwo+ICsJc3RydWN0IGRybV9pOTE1X2dlbV9leGVj
X2ZlbmNlIF9fdXNlciAqdXNlcl9mZW5jZXM7Cj4gKwlzdHJ1Y3QgaTkxNV9lYl9mZW5jZXMgKmZl
bmNlczsKPiArCXU2NCBfX3VzZXIgKnVzZXJfdmFsdWVzOwo+ICsJdTY0IG51bV9mZW5jZXMsIG51
bV91c2VyX2ZlbmNlcyA9IHRpbWVsaW5lX2ZlbmNlcy0+ZmVuY2VfY291bnQ7Cj4gKwl1bnNpZ25l
ZCBsb25nIG47Cj4gKwlpbnQgZXJyID0gMDsKPiArCj4gKwkvKiBDaGVjayBtdWx0aXBsaWNhdGlv
biBvdmVyZmxvdyBmb3IgYWNjZXNzX29rKCkgYW5kIGt2bWFsbG9jX2FycmF5KCkgKi8KPiArCUJV
SUxEX0JVR19PTihzaXplb2Yoc2l6ZV90KSA+IHNpemVvZih1bnNpZ25lZCBsb25nKSk7Cj4gKwlp
ZiAobnVtX3VzZXJfZmVuY2VzID4gbWluX3QodW5zaWduZWQgbG9uZywKPiArCQkJCSAgICBVTE9O
R19NQVggLyBzaXplb2YoKnVzZXJfZmVuY2VzKSwKPiArCQkJCSAgICBTSVpFX01BWCAvIHNpemVv
ZigqZmVuY2VzKSkpCj4gKwkJcmV0dXJuIEVSUl9QVFIoLUVJTlZBTCk7Cj4gKwo+ICsJdXNlcl9m
ZW5jZXMgPSB1NjRfdG9fdXNlcl9wdHIodGltZWxpbmVfZmVuY2VzLT5oYW5kbGVzX3B0cik7Cj4g
KwlpZiAoIWFjY2Vzc19vayh1c2VyX2ZlbmNlcywgbnVtX3VzZXJfZmVuY2VzICogc2l6ZW9mKCp1
c2VyX2ZlbmNlcykpKQo+ICsJCXJldHVybiBFUlJfUFRSKC1FRkFVTFQpOwo+ICsKPiArCXVzZXJf
dmFsdWVzID0gdTY0X3RvX3VzZXJfcHRyKHRpbWVsaW5lX2ZlbmNlcy0+dmFsdWVzX3B0cik7Cj4g
KwlpZiAoIWFjY2Vzc19vayh1c2VyX3ZhbHVlcywgbnVtX3VzZXJfZmVuY2VzICogc2l6ZW9mKCp1
c2VyX3ZhbHVlcykpKQo+ICsJCXJldHVybiBFUlJfUFRSKC1FRkFVTFQpOwo+ICsKPiArCWZlbmNl
cyA9IGt2bWFsbG9jX2FycmF5KG51bV91c2VyX2ZlbmNlcywgc2l6ZW9mKCpmZW5jZXMpLAo+ICsJ
CQkJX19HRlBfTk9XQVJOIHwgR0ZQX0tFUk5FTCk7Cj4gKwlpZiAoIWZlbmNlcykKPiArCQlyZXR1
cm4gRVJSX1BUUigtRU5PTUVNKTsKPiArCj4gKwlCVUlMRF9CVUdfT04ofihBUkNIX0tNQUxMT0Nf
TUlOQUxJR04gLSAxKSAmCj4gKwkJICAgICB+X19JOTE1X0VYRUNfRkVOQ0VfVU5LTk9XTl9GTEFH
Uyk7Cj4gKwo+ICsJZm9yIChuID0gMCwgbnVtX2ZlbmNlcyA9IDA7IG4gPCB0aW1lbGluZV9mZW5j
ZXMtPmZlbmNlX2NvdW50OyBuKyspIHsKPiArCQlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNfZmVu
Y2UgdXNlcl9mZW5jZTsKPiArCQlzdHJ1Y3QgZHJtX3N5bmNvYmogKnN5bmNvYmo7Cj4gKwkJc3Ry
dWN0IGRtYV9mZW5jZSAqZmVuY2UgPSBOVUxMOwo+ICsJCXU2NCBwb2ludDsKPiArCj4gKwkJaWYg
KF9fY29weV9mcm9tX3VzZXIoJnVzZXJfZmVuY2UsIHVzZXJfZmVuY2VzKyssIHNpemVvZih1c2Vy
X2ZlbmNlKSkpIHsKPiArCQkJZXJyID0gLUVGQVVMVDsKPiArCQkJZ290byBlcnI7Cj4gKwkJfQo+
ICsKPiArCQlpZiAodXNlcl9mZW5jZS5mbGFncyAmIF9fSTkxNV9FWEVDX0ZFTkNFX1VOS05PV05f
RkxBR1MpIHsKPiArCQkJZXJyID0gLUVJTlZBTDsKPiArCQkJZ290byBlcnI7Cj4gKwkJfQo+ICsK
PiArCQlpZiAoX19nZXRfdXNlcihwb2ludCwgdXNlcl92YWx1ZXMrKykpIHsKPiArCQkJZXJyID0g
LUVGQVVMVDsKPiArCQkJZ290byBlcnI7Cj4gKwkJfQo+ICsKPiArCQlzeW5jb2JqID0gZHJtX3N5
bmNvYmpfZmluZChlYi0+ZmlsZSwgdXNlcl9mZW5jZS5oYW5kbGUpOwo+ICsJCWlmICghc3luY29i
aikgewo+ICsJCQlEUk1fREVCVUcoIkludmFsaWQgc3luY29iaiBoYW5kbGUgcHJvdmlkZWRcbiIp
Owo+ICsJCQllcnIgPSAtRU5PRU5UOwo+ICsJCQlnb3RvIGVycjsKPiArCQl9Cj4gKwo+ICsJCWZl
bmNlID0gZHJtX3N5bmNvYmpfZmVuY2VfZ2V0KHN5bmNvYmopOwo+ICsKPiArCQlpZiAoIWZlbmNl
ICYmIHVzZXJfZmVuY2UuZmxhZ3MgJiYKPiArCQkgICAgISh1c2VyX2ZlbmNlLmZsYWdzICYgSTkx
NV9FWEVDX0ZFTkNFX1NJR05BTCkpIHsKPiArCQkJRFJNX0RFQlVHKCJTeW5jb2JqIGhhbmRsZSBo
YXMgbm8gZmVuY2VcbiIpOwo+ICsJCQlkcm1fc3luY29ial9wdXQoc3luY29iaik7Cj4gKwkJCWVy
ciA9IC1FSU5WQUw7Cj4gKwkJCWdvdG8gZXJyOwo+ICsJCX0KPiArCj4gKwkJaWYgKGZlbmNlKQo+
ICsJCQllcnIgPSBkbWFfZmVuY2VfY2hhaW5fZmluZF9zZXFubygmZmVuY2UsIHBvaW50KTsKPiAr
Cj4gKwkJaWYgKGVyciAmJiAhKHVzZXJfZmVuY2UuZmxhZ3MgJiBJOTE1X0VYRUNfRkVOQ0VfU0lH
TkFMKSkgewo+ICsJCQlEUk1fREVCVUcoIlN5bmNvYmogaGFuZGxlIG1pc3NpbmcgcmVxdWVzdGVk
IHBvaW50ICVsbHVcbiIsIHBvaW50KTsKPiArCQkJZHJtX3N5bmNvYmpfcHV0KHN5bmNvYmopOwo+
ICsJCQlnb3RvIGVycjsKPiArCQl9Cj4gKwo+ICsJCS8qIEEgcG9pbnQgbWlnaHQgaGF2ZSBiZWVu
IHNpZ25hbGVkIGFscmVhZHkgYW5kCj4gKwkJICogZ2FyYmFnZSBjb2xsZWN0ZWQgZnJvbSB0aGUg
dGltZWxpbmUuIEluIHRoaXMgY2FzZQo+ICsJCSAqIGp1c3QgaWdub3JlIHRoZSBwb2ludCBhbmQg
Y2Fycnkgb24uCj4gKwkJICovCj4gKwkJaWYgKCFmZW5jZSAmJiAodXNlcl9mZW5jZS5mbGFncyAm
IEk5MTVfRVhFQ19GRU5DRV9XQUlUKSkgewoKCkkgdGhpbmsgd2UgY2FuIG9ubHkgc2tpcCBpZiB3
ZSdyZSBvbmx5IHdhaXRpbmcuIElmIHRoZXJlIGlzIGEgc2lnbmFsIApyZXF1ZXN0IHdlIHN0aWxs
IG5lZWQgdG8gaG9ub3IgaXQuCgpTbyBJIHdvdWxkIHJlcGxhY2UgdGhpcyBmdW5jdGlvbiBhYm92
ZSB3aXRoIDoKCmlmICghZmVuY2UgJiYgISh1c2VyX2ZlbmNlLmZsYWdzICYgSTkxNV9FWEVDX0ZF
TkNFX1NJR05BTCkpIHsKCgo+ICsJCQlkcm1fc3luY29ial9wdXQoc3luY29iaik7Cj4gKwkJCWNv
bnRpbnVlOwo+ICsJCX0KPiArCj4gKwkJLyoKPiArCQkgKiBGb3IgdGltZWxpbmUgc3luY29ianMg
d2UgbmVlZCB0byBwcmVhbGxvY2F0ZSBjaGFpbnMgZm9yCj4gKwkJICogbGF0ZXIgc2lnbmFsaW5n
Lgo+ICsJCSAqLwo+ICsJCWlmIChwb2ludCAhPSAwICYmIHVzZXJfZmVuY2UuZmxhZ3MgJiBJOTE1
X0VYRUNfRkVOQ0VfU0lHTkFMKSB7Cj4gKwkJCS8qCj4gKwkJCSAqIFdhaXRpbmcgYW5kIHNpZ25h
bGluZyB0aGUgc2FtZSBwb2ludCAod2hlbiBwb2ludCAhPQo+ICsJCQkgKiAwKSB3b3VsZCBicmVh
ayB0aGUgdGltZWxpbmUuCj4gKwkJCSAqLwo+ICsJCQlpZiAodXNlcl9mZW5jZS5mbGFncyAmIEk5
MTVfRVhFQ19GRU5DRV9XQUlUKSB7Cj4gKwkJCQlEUk1fREVCVUcoIlRyeWluZyB0byB3YWl0ICYg
c2lnbmFsIHRoZSBzYW1lIHRpbWVsaW5lIHBvaW50LlxuIik7Cj4gKwkJCQllcnIgPSAtRUlOVkFM
Owo+ICsJCQkJZHJtX3N5bmNvYmpfcHV0KHN5bmNvYmopOwo+ICsJCQkJZ290byBlcnI7Cj4gKwkJ
CX0KCgpJIHRoaW5rIHdlIGNhbiBhY3R1YWxseSBhbGxvdyB0aGlzLiBXYWl0IGFuZCBzaWduYWwg
b3BlcmF0aW9ucyBhcmUgYWRkZWQgCmluIG9yZGVyIHNvIHdlIGNvdWxkIHdhaXQgYSBwb2ludCAz
IGFuZCB0aGVuIHJlcGxhY2UgaXQgYnkgYW5vdGhlciBwb2ludCAzLgoKCklmIHdlIGtlZXAgdGhp
cyBsaW1pdGF0aW9uLCB3ZSBuZWVkIHRvIGFkZCA6CgppZiAoZmVuY2UpCgogwqDCoMKgIGRtYV9m
ZW5jZV9wdXQoZmVuY2UpOwoKCj4gKwo+ICsJCQlmZW5jZXNbbnVtX2ZlbmNlc10uY2hhaW5fZmVu
Y2UgPQo+ICsJCQkJa21hbGxvYyhzaXplb2YoKmZlbmNlc1tudW1fZmVuY2VzXS5jaGFpbl9mZW5j
ZSksCj4gKwkJCQkJR0ZQX0tFUk5FTCk7Cj4gKwkJCWlmICghZmVuY2VzW251bV9mZW5jZXNdLmNo
YWluX2ZlbmNlKSB7Cj4gKwkJCQlkcm1fc3luY29ial9wdXQoc3luY29iaik7CgoKV2UgdGhlIGNo
YW5nZSBhYm92ZSwgd2UgY291bGQgYXJyaXZlIGhlcmUgd2l0aCBmZW5jZSAhPSBOVUxMLgoKV2Ug
cHJvYmFibHkgbmVlZCB0byBhZGQgOgoKaWYgKGZlbmNlKQoKIMKgwqDCoCBkbWFfZmVuY2VfcHV0
KGZlbmNlKTsKCgo+ICsJCQkJZXJyID0gLUVOT01FTTsKPiArCQkJCURSTV9ERUJVRygiVW5hYmxl
IHRvIGFsbG9jIGNoYWluX2ZlbmNlXG4iKTsKPiArCQkJCWdvdG8gZXJyOwo+ICsJCQl9Cj4gKwkJ
fSBlbHNlIHsKPiArCQkJZmVuY2VzW251bV9mZW5jZXNdLmNoYWluX2ZlbmNlID0gTlVMTDsKPiAr
CQl9Cj4gKwo+ICsJCWZlbmNlc1tudW1fZmVuY2VzXS5zeW5jb2JqID0gcHRyX3BhY2tfYml0cyhz
eW5jb2JqLCB1c2VyX2ZlbmNlLmZsYWdzLCAyKTsKPiArCQlmZW5jZXNbbnVtX2ZlbmNlc10uZG1h
X2ZlbmNlID0gZmVuY2U7Cj4gKwkJZmVuY2VzW251bV9mZW5jZXNdLnZhbHVlID0gcG9pbnQ7Cj4g
KwkJbnVtX2ZlbmNlcysrOwo+ICsJfQo+ICsKPiArCSpvdXRfbl9mZW5jZXMgPSBudW1fZmVuY2Vz
Owo+ICsKPiArCXJldHVybiBmZW5jZXM7Cj4gKwo+ICtlcnI6Cj4gKwlfX2ZyZWVfZmVuY2VfYXJy
YXkoZmVuY2VzLCBudW1fZmVuY2VzKTsKPiArCXJldHVybiBFUlJfUFRSKGVycik7Cj4gK30KPiAr
Cj4gK3N0YXRpYyBzdHJ1Y3QgaTkxNV9lYl9mZW5jZXMgKgo+ICtnZXRfbGVnYWN5X2ZlbmNlX2Fy
cmF5KHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgKmViLAo+ICsJCSAgICAgICBpbnQgKm91dF9uX2Zl
bmNlcykKPiAgIHsKPiAtCWNvbnN0IHVuc2lnbmVkIGxvbmcgbmZlbmNlcyA9IGFyZ3MtPm51bV9j
bGlwcmVjdHM7Cj4gKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyICphcmdzID0gZWIt
PmFyZ3M7Cj4gICAJc3RydWN0IGRybV9pOTE1X2dlbV9leGVjX2ZlbmNlIF9fdXNlciAqdXNlcjsK
PiAtCXN0cnVjdCBkcm1fc3luY29iaiAqKmZlbmNlczsKPiArCXN0cnVjdCBpOTE1X2ViX2ZlbmNl
cyAqZmVuY2VzOwo+ICsJY29uc3QgdTMyIG51bV9mZW5jZXMgPSBhcmdzLT5udW1fY2xpcHJlY3Rz
Owo+ICAgCXVuc2lnbmVkIGxvbmcgbjsKPiAgIAlpbnQgZXJyOwo+ICAgCj4gLQlpZiAoIShhcmdz
LT5mbGFncyAmIEk5MTVfRVhFQ19GRU5DRV9BUlJBWSkpCj4gLQkJcmV0dXJuIE5VTEw7Cj4gKwkq
b3V0X25fZmVuY2VzID0gbnVtX2ZlbmNlczsKPiAgIAo+ICAgCS8qIENoZWNrIG11bHRpcGxpY2F0
aW9uIG92ZXJmbG93IGZvciBhY2Nlc3Nfb2soKSBhbmQga3ZtYWxsb2NfYXJyYXkoKSAqLwo+ICAg
CUJVSUxEX0JVR19PTihzaXplb2Yoc2l6ZV90KSA+IHNpemVvZih1bnNpZ25lZCBsb25nKSk7Cj4g
LQlpZiAobmZlbmNlcyA+IG1pbl90KHVuc2lnbmVkIGxvbmcsCj4gLQkJCSAgICBVTE9OR19NQVgg
LyBzaXplb2YoKnVzZXIpLAo+IC0JCQkgICAgU0laRV9NQVggLyBzaXplb2YoKmZlbmNlcykpKQo+
ICsJaWYgKCpvdXRfbl9mZW5jZXMgPiBtaW5fdCh1bnNpZ25lZCBsb25nLAo+ICsJCQkJICBVTE9O
R19NQVggLyBzaXplb2YoKnVzZXIpLAo+ICsJCQkJICBTSVpFX01BWCAvIHNpemVvZigqZmVuY2Vz
KSkpCj4gICAJCXJldHVybiBFUlJfUFRSKC1FSU5WQUwpOwo+ICAgCj4gICAJdXNlciA9IHU2NF90
b191c2VyX3B0cihhcmdzLT5jbGlwcmVjdHNfcHRyKTsKPiAtCWlmICghYWNjZXNzX29rKHVzZXIs
IG5mZW5jZXMgKiBzaXplb2YoKnVzZXIpKSkKPiArCWlmICghYWNjZXNzX29rKHVzZXIsICpvdXRf
bl9mZW5jZXMgKiBzaXplb2YoKnVzZXIpKSkKPiAgIAkJcmV0dXJuIEVSUl9QVFIoLUVGQVVMVCk7
Cj4gICAKPiAtCWZlbmNlcyA9IGt2bWFsbG9jX2FycmF5KG5mZW5jZXMsIHNpemVvZigqZmVuY2Vz
KSwKPiArCWZlbmNlcyA9IGt2bWFsbG9jX2FycmF5KCpvdXRfbl9mZW5jZXMsIHNpemVvZigqZmVu
Y2VzKSwKPiAgIAkJCQlfX0dGUF9OT1dBUk4gfCBHRlBfS0VSTkVMKTsKPiAgIAlpZiAoIWZlbmNl
cykKPiAgIAkJcmV0dXJuIEVSUl9QVFIoLUVOT01FTSk7Cj4gICAKPiAtCWZvciAobiA9IDA7IG4g
PCBuZmVuY2VzOyBuKyspIHsKPiAtCQlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNfZmVuY2UgZmVu
Y2U7Cj4gKwlmb3IgKG4gPSAwOyBuIDwgKm91dF9uX2ZlbmNlczsgbisrKSB7Cj4gKwkJc3RydWN0
IGRybV9pOTE1X2dlbV9leGVjX2ZlbmNlIHVzZXJfZmVuY2U7Cj4gICAJCXN0cnVjdCBkcm1fc3lu
Y29iaiAqc3luY29iajsKPiArCQlzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSA9IE5VTEw7Cj4gICAK
PiAtCQlpZiAoX19jb3B5X2Zyb21fdXNlcigmZmVuY2UsIHVzZXIrKywgc2l6ZW9mKGZlbmNlKSkp
IHsKPiArCQlpZiAoX19jb3B5X2Zyb21fdXNlcigmdXNlcl9mZW5jZSwgdXNlcisrLCBzaXplb2Yo
dXNlcl9mZW5jZSkpKSB7Cj4gICAJCQllcnIgPSAtRUZBVUxUOwo+ICAgCQkJZ290byBlcnI7Cj4g
ICAJCX0KPiAgIAo+IC0JCWlmIChmZW5jZS5mbGFncyAmIF9fSTkxNV9FWEVDX0ZFTkNFX1VOS05P
V05fRkxBR1MpIHsKPiArCQlpZiAodXNlcl9mZW5jZS5mbGFncyAmIF9fSTkxNV9FWEVDX0ZFTkNF
X1VOS05PV05fRkxBR1MpIHsKPiAgIAkJCWVyciA9IC1FSU5WQUw7Cj4gICAJCQlnb3RvIGVycjsK
PiAgIAkJfQo+ICAgCj4gLQkJc3luY29iaiA9IGRybV9zeW5jb2JqX2ZpbmQoZmlsZSwgZmVuY2Uu
aGFuZGxlKTsKPiArCQlzeW5jb2JqID0gZHJtX3N5bmNvYmpfZmluZChlYi0+ZmlsZSwgdXNlcl9m
ZW5jZS5oYW5kbGUpOwo+ICAgCQlpZiAoIXN5bmNvYmopIHsKPiAgIAkJCURSTV9ERUJVRygiSW52
YWxpZCBzeW5jb2JqIGhhbmRsZSBwcm92aWRlZFxuIik7Cj4gICAJCQllcnIgPSAtRU5PRU5UOwo+
ICAgCQkJZ290byBlcnI7Cj4gICAJCX0KPiAgIAo+ICsJCWlmICh1c2VyX2ZlbmNlLmZsYWdzICYg
STkxNV9FWEVDX0ZFTkNFX1dBSVQpIHsKPiArCQkJZmVuY2UgPSBkcm1fc3luY29ial9mZW5jZV9n
ZXQoc3luY29iaik7Cj4gKwkJCWlmICghZmVuY2UpIHsKPiArCQkJCURSTV9ERUJVRygiU3luY29i
aiBoYW5kbGUgaGFzIG5vIGZlbmNlXG4iKTsKPiArCQkJCWRybV9zeW5jb2JqX3B1dChzeW5jb2Jq
KTsKPiArCQkJCWVyciA9IC1FSU5WQUw7Cj4gKwkJCQlnb3RvIGVycjsKPiArCQkJfQo+ICsJCX0K
PiArCj4gICAJCUJVSUxEX0JVR19PTih+KEFSQ0hfS01BTExPQ19NSU5BTElHTiAtIDEpICYKPiAg
IAkJCSAgICAgfl9fSTkxNV9FWEVDX0ZFTkNFX1VOS05PV05fRkxBR1MpOwo+ICAgCj4gLQkJZmVu
Y2VzW25dID0gcHRyX3BhY2tfYml0cyhzeW5jb2JqLCBmZW5jZS5mbGFncywgMik7Cj4gKwkJZmVu
Y2VzW25dLnN5bmNvYmogPSBwdHJfcGFja19iaXRzKHN5bmNvYmosIHVzZXJfZmVuY2UuZmxhZ3Ms
IDIpOwo+ICsJCWZlbmNlc1tuXS5kbWFfZmVuY2UgPSBmZW5jZTsKPiArCQlmZW5jZXNbbl0udmFs
dWUgPSAwOwo+ICsJCWZlbmNlc1tuXS5jaGFpbl9mZW5jZSA9IE5VTEw7Cj4gICAJfQo+ICAgCj4g
ICAJcmV0dXJuIGZlbmNlczsKPiBAQCAtMjMxNCwzNyArMjQ3NCw0NSBAQCBnZXRfZmVuY2VfYXJy
YXkoc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiAqYXJncywKPiAgIAlyZXR1cm4gRVJS
X1BUUihlcnIpOwo+ICAgfQo+ICAgCj4gK3N0YXRpYyBzdHJ1Y3QgaTkxNV9lYl9mZW5jZXMgKgo+
ICtnZXRfZmVuY2VfYXJyYXkoc3RydWN0IGk5MTVfZXhlY2J1ZmZlciAqZWIsIGludCAqb3V0X25f
ZmVuY2VzKQo+ICt7Cj4gKwlpZiAoZWItPmFyZ3MtPmZsYWdzICYgSTkxNV9FWEVDX0ZFTkNFX0FS
UkFZKQo+ICsJCXJldHVybiBnZXRfbGVnYWN5X2ZlbmNlX2FycmF5KGViLCBvdXRfbl9mZW5jZXMp
Owo+ICsKPiArCWlmIChlYi0+ZXh0ZW5zaW9ucy5mbGFncyAmIEJJVF9VTEwoRFJNX0k5MTVfR0VN
X0VYRUNCVUZGRVJfRVhUX1RJTUVMSU5FX0ZFTkNFUykpCj4gKwkJcmV0dXJuIGdldF90aW1lbGlu
ZV9mZW5jZV9hcnJheShlYiwgb3V0X25fZmVuY2VzKTsKPiArCj4gKwkqb3V0X25fZmVuY2VzID0g
MDsKPiArCXJldHVybiBOVUxMOwo+ICt9Cj4gKwo+ICAgc3RhdGljIHZvaWQKPiAtcHV0X2ZlbmNl
X2FycmF5KHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcjIgKmFyZ3MsCj4gLQkJc3RydWN0
IGRybV9zeW5jb2JqICoqZmVuY2VzKQo+ICtwdXRfZmVuY2VfYXJyYXkoc3RydWN0IGk5MTVfZWJf
ZmVuY2VzICpmZW5jZXMsIGludCBuZmVuY2VzKQo+ICAgewo+ICAgCWlmIChmZW5jZXMpCj4gLQkJ
X19mcmVlX2ZlbmNlX2FycmF5KGZlbmNlcywgYXJncy0+bnVtX2NsaXByZWN0cyk7Cj4gKwkJX19m
cmVlX2ZlbmNlX2FycmF5KGZlbmNlcywgbmZlbmNlcyk7Cj4gICB9Cj4gICAKPiAgIHN0YXRpYyBp
bnQKPiAgIGF3YWl0X2ZlbmNlX2FycmF5KHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgKmViLAo+IC0J
CSAgc3RydWN0IGRybV9zeW5jb2JqICoqZmVuY2VzKQo+ICsJCSAgc3RydWN0IGk5MTVfZWJfZmVu
Y2VzICpmZW5jZXMsCj4gKwkJICBpbnQgbmZlbmNlcykKPiAgIHsKPiAtCWNvbnN0IHVuc2lnbmVk
IGludCBuZmVuY2VzID0gZWItPmFyZ3MtPm51bV9jbGlwcmVjdHM7Cj4gICAJdW5zaWduZWQgaW50
IG47Cj4gICAJaW50IGVycjsKPiAgIAo+ICAgCWZvciAobiA9IDA7IG4gPCBuZmVuY2VzOyBuKysp
IHsKPiAgIAkJc3RydWN0IGRybV9zeW5jb2JqICpzeW5jb2JqOwo+IC0JCXN0cnVjdCBkbWFfZmVu
Y2UgKmZlbmNlOwo+ICAgCQl1bnNpZ25lZCBpbnQgZmxhZ3M7Cj4gICAKPiAtCQlzeW5jb2JqID0g
cHRyX3VucGFja19iaXRzKGZlbmNlc1tuXSwgJmZsYWdzLCAyKTsKPiAtCQlpZiAoIShmbGFncyAm
IEk5MTVfRVhFQ19GRU5DRV9XQUlUKSkKPiAtCQkJY29udGludWU7Cj4gKwkJc3luY29iaiA9IHB0
cl91bnBhY2tfYml0cyhmZW5jZXNbbl0uc3luY29iaiwgJmZsYWdzLCAyKTsKPiAgIAo+IC0JCWZl
bmNlID0gZHJtX3N5bmNvYmpfZmVuY2VfZ2V0KHN5bmNvYmopOwo+IC0JCWlmICghZmVuY2UpCj4g
LQkJCXJldHVybiAtRUlOVkFMOwo+ICsJCWlmICghZmVuY2VzW25dLmRtYV9mZW5jZSkKPiArCQkJ
Y29udGludWU7Cj4gICAKPiAtCQllcnIgPSBpOTE1X3JlcXVlc3RfYXdhaXRfZG1hX2ZlbmNlKGVi
LT5yZXF1ZXN0LCBmZW5jZSk7Cj4gLQkJZG1hX2ZlbmNlX3B1dChmZW5jZSk7Cj4gKwkJZXJyID0g
aTkxNV9yZXF1ZXN0X2F3YWl0X2RtYV9mZW5jZShlYi0+cmVxdWVzdCwKPiArCQkJCQkJICAgZmVu
Y2VzW25dLmRtYV9mZW5jZSk7Cj4gICAJCWlmIChlcnIgPCAwKQo+ICAgCQkJcmV0dXJuIGVycjsK
PiAgIAl9Cj4gQEAgLTIzNTQsOSArMjUyMiw5IEBAIGF3YWl0X2ZlbmNlX2FycmF5KHN0cnVjdCBp
OTE1X2V4ZWNidWZmZXIgKmViLAo+ICAgCj4gICBzdGF0aWMgdm9pZAo+ICAgc2lnbmFsX2ZlbmNl
X2FycmF5KHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgKmViLAo+IC0JCSAgIHN0cnVjdCBkcm1fc3lu
Y29iaiAqKmZlbmNlcykKPiArCQkgICBzdHJ1Y3QgaTkxNV9lYl9mZW5jZXMgKmZlbmNlcywKPiAr
CQkgICBpbnQgbmZlbmNlcykKPiAgIHsKPiAtCWNvbnN0IHVuc2lnbmVkIGludCBuZmVuY2VzID0g
ZWItPmFyZ3MtPm51bV9jbGlwcmVjdHM7Cj4gICAJc3RydWN0IGRtYV9mZW5jZSAqIGNvbnN0IGZl
bmNlID0gJmViLT5yZXF1ZXN0LT5mZW5jZTsKPiAgIAl1bnNpZ25lZCBpbnQgbjsKPiAgIAo+IEBA
IC0yMzY0LDE0ICsyNTMyLDQ0IEBAIHNpZ25hbF9mZW5jZV9hcnJheShzdHJ1Y3QgaTkxNV9leGVj
YnVmZmVyICplYiwKPiAgIAkJc3RydWN0IGRybV9zeW5jb2JqICpzeW5jb2JqOwo+ICAgCQl1bnNp
Z25lZCBpbnQgZmxhZ3M7Cj4gICAKPiAtCQlzeW5jb2JqID0gcHRyX3VucGFja19iaXRzKGZlbmNl
c1tuXSwgJmZsYWdzLCAyKTsKPiArCQlzeW5jb2JqID0gcHRyX3VucGFja19iaXRzKGZlbmNlc1tu
XS5zeW5jb2JqLCAmZmxhZ3MsIDIpOwo+ICAgCQlpZiAoIShmbGFncyAmIEk5MTVfRVhFQ19GRU5D
RV9TSUdOQUwpKQo+ICAgCQkJY29udGludWU7Cj4gICAKPiAtCQlkcm1fc3luY29ial9yZXBsYWNl
X2ZlbmNlKHN5bmNvYmosIGZlbmNlKTsKPiArCQlpZiAoZmVuY2VzW25dLmNoYWluX2ZlbmNlKSB7
Cj4gKwkJCWRybV9zeW5jb2JqX2FkZF9wb2ludChzeW5jb2JqLCBmZW5jZXNbbl0uY2hhaW5fZmVu
Y2UsCj4gKwkJCQkJICAgICAgZmVuY2UsIGZlbmNlc1tuXS52YWx1ZSk7Cj4gKwkJCS8qCj4gKwkJ
CSAqIFRoZSBjaGFpbidzIG93bmVyc2hpcCBpcyB0cmFuc2ZlcnJlZCB0byB0aGUKPiArCQkJICog
dGltZWxpbmUuCj4gKwkJCSAqLwo+ICsJCQlmZW5jZXNbbl0uY2hhaW5fZmVuY2UgPSBOVUxMOwo+
ICsJCX0gZWxzZSB7Cj4gKwkJCWRybV9zeW5jb2JqX3JlcGxhY2VfZmVuY2Uoc3luY29iaiwgZmVu
Y2UpOwo+ICsJCX0KPiAgIAl9Cj4gICB9Cj4gICAKPiArc3RhdGljIGludCBwYXJzZV90aW1lbGlu
ZV9mZW5jZXMoc3RydWN0IGk5MTVfdXNlcl9leHRlbnNpb24gX191c2VyICpleHQsIHZvaWQgKmRh
dGEpCj4gK3sKPiArCXN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgKmViID0gZGF0YTsKPiArCj4gKwkv
KiBUaW1lbGluZSBmZW5jZXMgYXJlIGluY29tcGF0aWJsZSB3aXRoIHRoZSBmZW5jZSBhcnJheSBm
bGFnLiAqLwo+ICsJaWYgKGViLT5hcmdzLT5mbGFncyAmIEk5MTVfRVhFQ19GRU5DRV9BUlJBWSkK
PiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlpZiAoZWItPmV4dGVuc2lvbnMuZmxhZ3MgJiBC
SVRfVUxMKERSTV9JOTE1X0dFTV9FWEVDQlVGRkVSX0VYVF9USU1FTElORV9GRU5DRVMpKQo+ICsJ
CXJldHVybiAtRUlOVkFMOwo+ICsKPiArCWlmIChjb3B5X2Zyb21fdXNlcigmZWItPmV4dGVuc2lv
bnMudGltZWxpbmVfZmVuY2VzLCBleHQsCj4gKwkJCSAgIHNpemVvZihlYi0+ZXh0ZW5zaW9ucy50
aW1lbGluZV9mZW5jZXMpKSkKPiArCQlyZXR1cm4gLUVGQVVMVDsKPiArCj4gKwllYi0+ZXh0ZW5z
aW9ucy5mbGFncyB8PSBCSVRfVUxMKERSTV9JOTE1X0dFTV9FWEVDQlVGRkVSX0VYVF9USU1FTElO
RV9GRU5DRVMpOwo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICAgc3RhdGljIHZvaWQgcmV0
aXJlX3JlcXVlc3RzKHN0cnVjdCBpbnRlbF90aW1lbGluZSAqdGwsIHN0cnVjdCBpOTE1X3JlcXVl
c3QgKmVuZCkKPiAgIHsKPiAgIAlzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgKnJuOwo+IEBAIC0y
NDM4LDYgKzI2MzYsNyBAQCBzdGF0aWMgdm9pZCBlYl9yZXF1ZXN0X2FkZChzdHJ1Y3QgaTkxNV9l
eGVjYnVmZmVyICplYikKPiAgIH0KPiAgIAo+ICAgc3RhdGljIGNvbnN0IGk5MTVfdXNlcl9leHRl
bnNpb25fZm4gZXhlY2J1Zl9leHRlbnNpb25zW10gPSB7Cj4gKwlbRFJNX0k5MTVfR0VNX0VYRUNC
VUZGRVJfRVhUX1RJTUVMSU5FX0ZFTkNFU10gPSBwYXJzZV90aW1lbGluZV9mZW5jZXMsCj4gICB9
Owo+ICAgCj4gICBzdGF0aWMgaW50Cj4gQEAgLTI0NjgsMTYgKzI2NjcsMTcgQEAgc3RhdGljIGlu
dAo+ICAgaTkxNV9nZW1fZG9fZXhlY2J1ZmZlcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAg
CQkgICAgICAgc3RydWN0IGRybV9maWxlICpmaWxlLAo+ICAgCQkgICAgICAgc3RydWN0IGRybV9p
OTE1X2dlbV9leGVjYnVmZmVyMiAqYXJncywKPiAtCQkgICAgICAgc3RydWN0IGRybV9pOTE1X2dl
bV9leGVjX29iamVjdDIgKmV4ZWMsCj4gLQkJICAgICAgIHN0cnVjdCBkcm1fc3luY29iaiAqKmZl
bmNlcykKPiArCQkgICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9leGVjX29iamVjdDIgKmV4ZWMp
Cj4gICB7Cj4gICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KGRldik7
Cj4gICAJc3RydWN0IGk5MTVfZXhlY2J1ZmZlciBlYjsKPiAgIAlzdHJ1Y3QgZG1hX2ZlbmNlICpp
bl9mZW5jZSA9IE5VTEw7Cj4gICAJc3RydWN0IGRtYV9mZW5jZSAqZXhlY19mZW5jZSA9IE5VTEw7
Cj4gICAJc3RydWN0IHN5bmNfZmlsZSAqb3V0X2ZlbmNlID0gTlVMTDsKPiArCXN0cnVjdCBpOTE1
X2ViX2ZlbmNlcyAqZmVuY2VzID0gTlVMTDsKPiAgIAlzdHJ1Y3QgaTkxNV92bWEgKmJhdGNoOwo+
ICAgCWludCBvdXRfZmVuY2VfZmQgPSAtMTsKPiArCWludCBuZmVuY2VzID0gMDsKPiAgIAlpbnQg
ZXJyOwo+ICAgCj4gICAJQlVJTERfQlVHX09OKF9fRVhFQ19JTlRFUk5BTF9GTEFHUyAmIH5fX0k5
MTVfRVhFQ19JTExFR0FMX0ZMQUdTKTsKPiBAQCAtMjUyMSwxMCArMjcyMSwxNiBAQCBpOTE1X2dl
bV9kb19leGVjYnVmZmVyKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gICAJaWYgKGVycikKPiAg
IAkJcmV0dXJuIGVycjsKPiAgIAo+ICsJZmVuY2VzID0gZ2V0X2ZlbmNlX2FycmF5KCZlYiwgJm5m
ZW5jZXMpOwo+ICsJaWYgKElTX0VSUihmZW5jZXMpKQo+ICsJCXJldHVybiBQVFJfRVJSKGZlbmNl
cyk7Cj4gKwo+ICAgCWlmIChhcmdzLT5mbGFncyAmIEk5MTVfRVhFQ19GRU5DRV9JTikgewo+ICAg
CQlpbl9mZW5jZSA9IHN5bmNfZmlsZV9nZXRfZmVuY2UobG93ZXJfMzJfYml0cyhhcmdzLT5yc3Zk
MikpOwo+IC0JCWlmICghaW5fZmVuY2UpCj4gLQkJCXJldHVybiAtRUlOVkFMOwo+ICsJCWlmICgh
aW5fZmVuY2UpIHsKPiArCQkJZXJyID0gLUVJTlZBTDsKPiArCQkJZ290byBlcnJfZmVuY2VzOwo+
ICsJCX0KPiAgIAl9Cj4gICAKPiAgIAlpZiAoYXJncy0+ZmxhZ3MgJiBJOTE1X0VYRUNfRkVOQ0Vf
U1VCTUlUKSB7Cj4gQEAgLTI2NDgsNyArMjg1NCw3IEBAIGk5MTVfZ2VtX2RvX2V4ZWNidWZmZXIo
c3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiAgIAl9Cj4gICAKPiAgIAlpZiAoZmVuY2VzKSB7Cj4g
LQkJZXJyID0gYXdhaXRfZmVuY2VfYXJyYXkoJmViLCBmZW5jZXMpOwo+ICsJCWVyciA9IGF3YWl0
X2ZlbmNlX2FycmF5KCZlYiwgZmVuY2VzLCBuZmVuY2VzKTsKPiAgIAkJaWYgKGVycikKPiAgIAkJ
CWdvdG8gZXJyX3JlcXVlc3Q7Cj4gICAJfQo+IEBAIC0yNjgwLDcgKzI4ODYsNyBAQCBpOTE1X2dl
bV9kb19leGVjYnVmZmVyKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gICAJZWJfcmVxdWVzdF9h
ZGQoJmViKTsKPiAgIAo+ICAgCWlmIChmZW5jZXMpCj4gLQkJc2lnbmFsX2ZlbmNlX2FycmF5KCZl
YiwgZmVuY2VzKTsKPiArCQlzaWduYWxfZmVuY2VfYXJyYXkoJmViLCBmZW5jZXMsIG5mZW5jZXMp
Owo+ICAgCj4gICAJaWYgKG91dF9mZW5jZSkgewo+ICAgCQlpZiAoZXJyID09IDApIHsKPiBAQCAt
MjcxNSw2ICsyOTIxLDggQEAgaTkxNV9nZW1fZG9fZXhlY2J1ZmZlcihzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZGV2LAo+ICAgCWRtYV9mZW5jZV9wdXQoZXhlY19mZW5jZSk7Cj4gICBlcnJfaW5fZmVuY2U6
Cj4gICAJZG1hX2ZlbmNlX3B1dChpbl9mZW5jZSk7Cj4gK2Vycl9mZW5jZXM6Cj4gKwlwdXRfZmVu
Y2VfYXJyYXkoZmVuY2VzLCBuZmVuY2VzKTsKPiAgIAlyZXR1cm4gZXJyOwo+ICAgfQo+ICAgCj4g
QEAgLTI4MDksNyArMzAxNyw3IEBAIGk5MTVfZ2VtX2V4ZWNidWZmZXJfaW9jdGwoc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKPiAgIAkJCWV4ZWMyX2xpc3RbaV0uZmxhZ3MgPSAw
Owo+ICAgCX0KPiAgIAo+IC0JZXJyID0gaTkxNV9nZW1fZG9fZXhlY2J1ZmZlcihkZXYsIGZpbGUs
ICZleGVjMiwgZXhlYzJfbGlzdCwgTlVMTCk7Cj4gKwllcnIgPSBpOTE1X2dlbV9kb19leGVjYnVm
ZmVyKGRldiwgZmlsZSwgJmV4ZWMyLCBleGVjMl9saXN0KTsKPiAgIAlpZiAoZXhlYzIuZmxhZ3Mg
JiBfX0VYRUNfSEFTX1JFTE9DKSB7Cj4gICAJCXN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19vYmpl
Y3QgX191c2VyICp1c2VyX2V4ZWNfbGlzdCA9Cj4gICAJCQl1NjRfdG9fdXNlcl9wdHIoYXJncy0+
YnVmZmVyc19wdHIpOwo+IEBAIC0yODQxLDcgKzMwNDksNiBAQCBpOTE1X2dlbV9leGVjYnVmZmVy
Ml9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAo+ICAgCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShkZXYpOwo+ICAgCXN0cnVjdCBkcm1faTkx
NV9nZW1fZXhlY2J1ZmZlcjIgKmFyZ3MgPSBkYXRhOwo+ICAgCXN0cnVjdCBkcm1faTkxNV9nZW1f
ZXhlY19vYmplY3QyICpleGVjMl9saXN0Owo+IC0Jc3RydWN0IGRybV9zeW5jb2JqICoqZmVuY2Vz
ID0gTlVMTDsKPiAgIAljb25zdCBzaXplX3QgY291bnQgPSBhcmdzLT5idWZmZXJfY291bnQ7Cj4g
ICAJaW50IGVycjsKPiAgIAo+IEBAIC0yODY5LDE1ICszMDc2LDcgQEAgaTkxNV9nZW1fZXhlY2J1
ZmZlcjJfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKPiAgIAkJcmV0
dXJuIC1FRkFVTFQ7Cj4gICAJfQo+ICAgCj4gLQlpZiAoYXJncy0+ZmxhZ3MgJiBJOTE1X0VYRUNf
RkVOQ0VfQVJSQVkpIHsKPiAtCQlmZW5jZXMgPSBnZXRfZmVuY2VfYXJyYXkoYXJncywgZmlsZSk7
Cj4gLQkJaWYgKElTX0VSUihmZW5jZXMpKSB7Cj4gLQkJCWt2ZnJlZShleGVjMl9saXN0KTsKPiAt
CQkJcmV0dXJuIFBUUl9FUlIoZmVuY2VzKTsKPiAtCQl9Cj4gLQl9Cj4gLQo+IC0JZXJyID0gaTkx
NV9nZW1fZG9fZXhlY2J1ZmZlcihkZXYsIGZpbGUsIGFyZ3MsIGV4ZWMyX2xpc3QsIGZlbmNlcyk7
Cj4gKwllcnIgPSBpOTE1X2dlbV9kb19leGVjYnVmZmVyKGRldiwgZmlsZSwgYXJncywgZXhlYzJf
bGlzdCk7Cj4gICAKPiAgIAkvKgo+ICAgCSAqIE5vdyB0aGF0IHdlIGhhdmUgYmVndW4gZXhlY3V0
aW9uIG9mIHRoZSBiYXRjaGJ1ZmZlciwgd2UgaWdub3JlCj4gQEAgLTI5MTcsNyArMzExNiw2IEBA
IGVuZDo7Cj4gICAJfQo+ICAgCj4gICAJYXJncy0+ZmxhZ3MgJj0gfl9fSTkxNV9FWEVDX1VOS05P
V05fRkxBR1M7Cj4gLQlwdXRfZmVuY2VfYXJyYXkoYXJncywgZmVuY2VzKTsKPiAgIAlrdmZyZWUo
ZXhlYzJfbGlzdCk7Cj4gICAJcmV0dXJuIGVycjsKPiAgIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmMKPiBpbmRleCBhN2EzYjRiOTg1NzIuLmY3Zjg2OGMzYzUxMCAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kcnYuYwo+IEBAIC0xODI4LDcgKzE4MjgsOCBAQCBzdGF0aWMgc3RydWN0IGRybV9kcml2
ZXIgZHJpdmVyID0gewo+ICAgCSAqLwo+ICAgCS5kcml2ZXJfZmVhdHVyZXMgPQo+ICAgCSAgICBE
UklWRVJfR0VNIHwKPiAtCSAgICBEUklWRVJfUkVOREVSIHwgRFJJVkVSX01PREVTRVQgfCBEUklW
RVJfQVRPTUlDIHwgRFJJVkVSX1NZTkNPQkosCj4gKwkgICAgRFJJVkVSX1JFTkRFUiB8IERSSVZF
Ul9NT0RFU0VUIHwgRFJJVkVSX0FUT01JQyB8IERSSVZFUl9TWU5DT0JKIHwKPiArCSAgICBEUklW
RVJfU1lOQ09CSl9USU1FTElORSwKPiAgIAkucmVsZWFzZSA9IGk5MTVfZHJpdmVyX3JlbGVhc2Us
Cj4gICAJLm9wZW4gPSBpOTE1X2RyaXZlcl9vcGVuLAo+ICAgCS5sYXN0Y2xvc2UgPSBpOTE1X2Ry
aXZlcl9sYXN0Y2xvc2UsCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2V0cGFyYW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYwo+IGluZGV4
IDU0ZmNlODFkNTcyNC4uYjlkM2FhYjUzYzAzIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2V0cGFyYW0uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2V0cGFyYW0uYwo+IEBAIC0xMzIsNiArMTMyLDcgQEAgaW50IGk5MTVfZ2V0cGFyYW1faW9jdGwo
c3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKPiAgIAljYXNlIEk5MTVfUEFSQU1f
SEFTX0VYRUNfQkFUQ0hfRklSU1Q6Cj4gICAJY2FzZSBJOTE1X1BBUkFNX0hBU19FWEVDX0ZFTkNF
X0FSUkFZOgo+ICAgCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19TVUJNSVRfRkVOQ0U6Cj4gKwlj
YXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfVElNRUxJTkVfRkVOQ0VTOgo+ICAgCQkvKiBGb3IgdGhl
IHRpbWUgYmVpbmcgYWxsIG9mIHRoZXNlIGFyZSBhbHdheXMgdHJ1ZTsKPiAgIAkJICogaWYgc29t
ZSBzdXBwb3J0ZWQgaGFyZHdhcmUgZG9lcyBub3QgaGF2ZSBvbmUgb2YgdGhlc2UKPiAgIAkJICog
ZmVhdHVyZXMgdGhpcyB2YWx1ZSBuZWVkcyB0byBiZSBwcm92aWRlZCBmcm9tCj4gZGlmZiAtLWdp
dCBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaCBiL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9k
cm0uaAo+IGluZGV4IDdlYTM4YWE2NTAyYy4uN2I4NjgwZTNiNDlkIDEwMDY0NAo+IC0tLSBhL2lu
Y2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAo+ICsrKyBiL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9k
cm0uaAo+IEBAIC02MTksNiArNjE5LDEyIEBAIHR5cGVkZWYgc3RydWN0IGRybV9pOTE1X2lycV93
YWl0IHsKPiAgICAqLwo+ICAgI2RlZmluZSBJOTE1X1BBUkFNX1BFUkZfUkVWSVNJT04JNTQKPiAg
IAo+ICsvKiBRdWVyeSB3aGV0aGVyIERSTV9JOTE1X0dFTV9FWEVDQlVGRkVSMiBzdXBwb3J0cyBz
dXBwbHlpbmcgYW4gYXJyYXkgb2YKPiArICogdGltZWxpbmUgc3luY29iaiB0aHJvdWdoIGRybV9p
OTE1X2dlbV9leGVjYnVmX2V4dF90aW1lbGluZV9mZW5jZXMuIFNlZQo+ICsgKiBJOTE1X0VYRUNf
VVNFX0VYVEVOU0lPTlMuCj4gKyAqLwo+ICsjZGVmaW5lIEk5MTVfUEFSQU1fSEFTX0VYRUNfVElN
RUxJTkVfRkVOQ0VTIDU1Cj4gKwo+ICAgLyogTXVzdCBiZSBrZXB0IGNvbXBhY3QgLS0gbm8gaG9s
ZXMgYW5kIHdlbGwgZG9jdW1lbnRlZCAqLwo+ICAgCj4gICB0eXBlZGVmIHN0cnVjdCBkcm1faTkx
NV9nZXRwYXJhbSB7Cj4gQEAgLTEwNDcsOSArMTA1Myw0MSBAQCBzdHJ1Y3QgZHJtX2k5MTVfZ2Vt
X2V4ZWNfZmVuY2Ugewo+ICAgfTsKPiAgIAo+ICAgZW51bSBkcm1faTkxNV9nZW1fZXhlY2J1ZmZl
cl9leHQgewo+ICsJLyoqCj4gKwkgKiBTZWUgZHJtX2k5MTVfZ2VtX2V4ZWNidWZfZXh0X3RpbWVs
aW5lX2ZlbmNlcy4KPiArCSAqLwo+ICsJRFJNX0k5MTVfR0VNX0VYRUNCVUZGRVJfRVhUX1RJTUVM
SU5FX0ZFTkNFUyA9IDEsCj4gKwo+ICAgCURSTV9JOTE1X0dFTV9FWEVDQlVGRkVSX0VYVF9NQVgg
Lyogbm9uLUFCSSAqLwo+ICAgfTsKPiAgIAo+ICsvKioKPiArICogVGhpcyBzdHJ1Y3R1cmUgZGVz
Y3JpYmVzIGFuIGFycmF5IG9mIGRybV9zeW5jb2JqIGFuZCBhc3NvY2lhdGVkIHBvaW50cyBmb3IK
PiArICogdGltZWxpbmUgdmFyaWFudHMgb2YgZHJtX3N5bmNvYmouIEl0IGlzIGludmFsaWQgdG8g
YXBwZW5kIHRoaXMgc3RydWN0dXJlIHRvCj4gKyAqIHRoZSBleGVjYnVmIGlmIEk5MTVfRVhFQ19G
RU5DRV9BUlJBWSBpcyBzZXQuCj4gKyAqLwo+ICtzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZm
ZXJfZXh0X3RpbWVsaW5lX2ZlbmNlcyB7Cj4gKwlzdHJ1Y3QgaTkxNV91c2VyX2V4dGVuc2lvbiBi
YXNlOwo+ICsKPiArCS8qKgo+ICsJICogTnVtYmVyIG9mIGVsZW1lbnQgaW4gdGhlIGhhbmRsZXNf
cHRyICYgdmFsdWVfcHRyIGFycmF5cy4KPiArCSAqLwo+ICsJX191NjQgZmVuY2VfY291bnQ7Cj4g
Kwo+ICsJLyoqCj4gKwkgKiBQb2ludGVyIHRvIGFuIGFycmF5IG9mIHN0cnVjdCBkcm1faTkxNV9n
ZW1fZXhlY19mZW5jZSBvZiBsZW5ndGgKPiArCSAqIGZlbmNlX2NvdW50Lgo+ICsJICovCj4gKwlf
X3U2NCBoYW5kbGVzX3B0cjsKPiArCj4gKwkvKioKPiArCSAqIFBvaW50ZXIgdG8gYW4gYXJyYXkg
b2YgdTY0IHZhbHVlcyBvZiBsZW5ndGggZmVuY2VfY291bnQuIFZhbHVlcwo+ICsJICogbXVzdCBi
ZSAwIGZvciBhIGJpbmFyeSBkcm1fc3luY29iai4gQSBWYWx1ZSBvZiAwIGZvciBhIHRpbWVsaW5l
Cj4gKwkgKiBkcm1fc3luY29iaiBpcyBpbnZhbGlkIGFzIGl0IHR1cm5zIGEgZHJtX3N5bmNvYmog
aW50byBhIGJpbmFyeSBvbmUuCj4gKwkgKi8KPiArCV9fdTY0IHZhbHVlc19wdHI7Cj4gK307Cj4g
Kwo+ICAgc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiB7Cj4gICAJLyoqCj4gICAJICog
TGlzdCBvZiBnZW1fZXhlY19vYmplY3QyIHN0cnVjdHMKCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9pbnRlbC1nZngK

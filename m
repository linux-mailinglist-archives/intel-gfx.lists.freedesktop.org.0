Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DBD07277A9
	for <lists+intel-gfx@lfdr.de>; Thu, 23 May 2019 10:07:25 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2370289C3F;
	Thu, 23 May 2019 08:07:24 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5445089A1F;
 Thu, 23 May 2019 08:07:22 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16650316-1500050 
 for multiple; Thu, 23 May 2019 09:06:49 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 23 May 2019 09:06:49 +0100
Message-Id: <20190523080649.29466-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t] i915: Improve static engine map for legacy
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UgbmVlZCB0byBrZWVwIGlndCB3b3JraW5nIG9uIGxpbnVzIGFuZCBkaWYsIG9yIEpvb25hcyBn
ZXRzIHZlcnkgdXBzZXQuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlz
LXdpbHNvbi5jby51az4KQ2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5j
b20+CkNjOiBBbmRpIFNoeXRpIDxhbmRpLnNoeXRpQGludGVsLmNvbT4KQ2M6IEpvb25hcyBMYWh0
aW5lbiA8am9vbmFzLmxhaHRpbmVuQGxpbnV4LmludGVsLmNvbT4KLS0tCiBsaWIvaTkxNS9nZW1f
Y29udGV4dC5jICAgICAgICAgfCAgMiArLQogbGliL2k5MTUvZ2VtX2VuZ2luZV90b3BvbG9neS5j
IHwgMTUgKysrLS0tLS0tLQogbGliL2lndF9ndC5jICAgICAgICAgICAgICAgICAgIHwgNTQgKysr
Ky0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogbGliL2lndF9ndC5oICAgICAgICAgICAg
ICAgICAgIHwgMTcgLS0tLS0tLS0tLS0KIHRlc3RzL2k5MTUvZ2VtX2N0eF9pc29sYXRpb24uYyB8
IDIxICsrKysrLS0tLS0tLS0KIHRvb2xzL2ludGVsX3JlZy5jICAgICAgICAgICAgICB8ICA0ICst
LQogNiBmaWxlcyBjaGFuZ2VkLCAxOSBpbnNlcnRpb25zKCspLCA5NCBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9saWIvaTkxNS9nZW1fY29udGV4dC5jIGIvbGliL2k5MTUvZ2VtX2NvbnRleHQu
YwppbmRleCBmOTRkODljYjQuLjA3YWI3ODE3NCAxMDA2NDQKLS0tIGEvbGliL2k5MTUvZ2VtX2Nv
bnRleHQuYworKysgYi9saWIvaTkxNS9nZW1fY29udGV4dC5jCkBAIC0yOTAsNyArMjkwLDcgQEAg
Ym9vbCBnZW1fY29udGV4dF9oYXNfZW5naW5lKGludCBmZCwgdWludDMyX3QgY3R4LCB1aW50NjRf
dCBlbmdpbmUpCiAJICogd291bGRuJ3QgcHJvZHVjZSBhbnkgcmVzdWx0LgogCSAqLwogCWlmICgo
ZW5naW5lICYgfigzPDwxMykpID09IEk5MTVfRVhFQ19CU0QpIHsKLQkJaWYgKGVuZ2luZSAmICgz
IDw8IDEzKSAmJiAhZ2VtX2hhc19ic2QyKGZkKSkKKwkJaWYgKGVuZ2luZSAmICgyIDw8IDEzKSAm
JiAhZ2VtX2hhc19ic2QyKGZkKSkKIAkJCXJldHVybiBmYWxzZTsKIAl9CiAKZGlmZiAtLWdpdCBh
L2xpYi9pOTE1L2dlbV9lbmdpbmVfdG9wb2xvZ3kuYyBiL2xpYi9pOTE1L2dlbV9lbmdpbmVfdG9w
b2xvZ3kuYwppbmRleCBkMGM4YmQ1YWEuLmZkZDFiOTUxNiAxMDA2NDQKLS0tIGEvbGliL2k5MTUv
Z2VtX2VuZ2luZV90b3BvbG9neS5jCisrKyBiL2xpYi9pOTE1L2dlbV9lbmdpbmVfdG9wb2xvZ3ku
YwpAQCAtMjIzLDIyICsyMjMsMTUgQEAgc3RydWN0IGludGVsX2VuZ2luZV9kYXRhIGludGVsX2lu
aXRfZW5naW5lX2xpc3QoaW50IGZkLCB1aW50MzJfdCBjdHhfaWQpCiAJCQlzdHJ1Y3QgaW50ZWxf
ZXhlY3V0aW9uX2VuZ2luZTIgKl9fZTIgPQogCQkJCSZlbmdpbmVfZGF0YS5lbmdpbmVzW2VuZ2lu
ZV9kYXRhLm5lbmdpbmVzXTsKIAotCQkJaWYgKCFpZ3Rfb25seV9saXN0X3N1YnRlc3RzKCkpIHsK
LQkJCQlfX2UyLT5mbGFncyA9IGdlbV9jbGFzc19pbnN0YW5jZV90b19lYl9mbGFncyhmZCwKLQkJ
CQkJCWUyLT5jbGFzcywgZTItPmluc3RhbmNlKTsKLQotCQkJCWlmICghZ2VtX2hhc19yaW5nKGZk
LCBfX2UyLT5mbGFncykpCi0JCQkJCWNvbnRpbnVlOwotCQkJfSBlbHNlIHsKLQkJCQlfX2UyLT5m
bGFncyA9IC0xOyAvKiAweGZmZi4uLiAqLwotCQkJfQotCiAJCQlfX2UyLT5uYW1lICAgICAgID0g
ZTItPm5hbWU7CiAJCQlfX2UyLT5pbnN0YW5jZSAgID0gZTItPmluc3RhbmNlOwogCQkJX19lMi0+
Y2xhc3MgICAgICA9IGUyLT5jbGFzczsKKwkJCV9fZTItPmZsYWdzICAgICAgPSBlMi0+ZmxhZ3M7
CiAJCQlfX2UyLT5pc192aXJ0dWFsID0gZmFsc2U7CiAKLQkJCWVuZ2luZV9kYXRhLm5lbmdpbmVz
Kys7CisJCQlpZiAoaWd0X29ubHlfbGlzdF9zdWJ0ZXN0cygpIHx8CisJCQkgICAgZ2VtX2hhc19y
aW5nKGZkLCBlMi0+ZmxhZ3MpKQorCQkJCWVuZ2luZV9kYXRhLm5lbmdpbmVzKys7CiAJCX0KIAkJ
cmV0dXJuIGVuZ2luZV9kYXRhOwogCX0KZGlmZiAtLWdpdCBhL2xpYi9pZ3RfZ3QuYyBiL2xpYi9p
Z3RfZ3QuYwppbmRleCA2YjdjMDM3ZTYuLjc4ZTNjZDA4OSAxMDA2NDQKLS0tIGEvbGliL2lndF9n
dC5jCisrKyBiL2xpYi9pZ3RfZ3QuYwpAQCAtNTg1LDEyICs1ODUsMTIgQEAgYm9vbCBnZW1fY2Fu
X3N0b3JlX2R3b3JkKGludCBmZCwgdW5zaWduZWQgaW50IGVuZ2luZSkKIH0KIAogY29uc3Qgc3Ry
dWN0IGludGVsX2V4ZWN1dGlvbl9lbmdpbmUyIGludGVsX2V4ZWN1dGlvbl9lbmdpbmVzMltdID0g
ewotCXsgInJjczAiLCBJOTE1X0VOR0lORV9DTEFTU19SRU5ERVIsIDAgfSwKLQl7ICJiY3MwIiwg
STkxNV9FTkdJTkVfQ0xBU1NfQ09QWSwgMCB9LAotCXsgInZjczAiLCBJOTE1X0VOR0lORV9DTEFT
U19WSURFTywgMCB9LAotCXsgInZjczEiLCBJOTE1X0VOR0lORV9DTEFTU19WSURFTywgMSB9LAot
CXsgInZjczIiLCBJOTE1X0VOR0lORV9DTEFTU19WSURFTywgMiB9LAotCXsgInZlY3MwIiwgSTkx
NV9FTkdJTkVfQ0xBU1NfVklERU9fRU5IQU5DRSwgMCB9LAorCXsgInJjczAiLCBJOTE1X0VOR0lO
RV9DTEFTU19SRU5ERVIsIDAsIEk5MTVfRVhFQ19SRU5ERVIgfSwKKwl7ICJiY3MwIiwgSTkxNV9F
TkdJTkVfQ0xBU1NfQ09QWSwgMCwgSTkxNV9FWEVDX0JMVCB9LAorCXsgInZjczAiLCBJOTE1X0VO
R0lORV9DTEFTU19WSURFTywgMCwgSTkxNV9FWEVDX0JTRCB8IEk5MTVfRVhFQ19CU0RfUklORzEg
fSwKKwl7ICJ2Y3MxIiwgSTkxNV9FTkdJTkVfQ0xBU1NfVklERU8sIDEsIEk5MTVfRVhFQ19CU0Qg
fCBJOTE1X0VYRUNfQlNEX1JJTkcyIH0sCisJeyAidmNzMiIsIEk5MTVfRU5HSU5FX0NMQVNTX1ZJ
REVPLCAyLCAtMSB9LAorCXsgInZlY3MwIiwgSTkxNV9FTkdJTkVfQ0xBU1NfVklERU9fRU5IQU5D
RSwgMCwgSTkxNV9FWEVDX1ZFQk9YIH0sCiAJeyB9CiB9OwogCkBAIC02MTEsNDggKzYxMSw2IEBA
IGludCBnZW1fZXhlY2J1Zl9mbGFnc190b19lbmdpbmVfY2xhc3ModW5zaWduZWQgaW50IGZsYWdz
KQogCX0KIH0KIAotdW5zaWduZWQgaW50Ci1nZW1fY2xhc3NfaW5zdGFuY2VfdG9fZWJfZmxhZ3Mo
aW50IGdlbV9mZCwKLQkJCSAgICAgICBlbnVtIGRybV9pOTE1X2dlbV9lbmdpbmVfY2xhc3MgY2xh
c3MsCi0JCQkgICAgICAgdW5zaWduZWQgaW50IGluc3RhbmNlKQotewotCWlmIChjbGFzcyAhPSBJ
OTE1X0VOR0lORV9DTEFTU19WSURFTykKLQkJaWd0X2Fzc2VydChpbnN0YW5jZSA9PSAwKTsKLQll
bHNlCi0JCWlndF9hc3NlcnQoaW5zdGFuY2UgPj0gMCAmJiBpbnN0YW5jZSA8PSAxKTsKLQotCXN3
aXRjaCAoY2xhc3MpIHsKLQljYXNlIEk5MTVfRU5HSU5FX0NMQVNTX1JFTkRFUjoKLQkJcmV0dXJu
IEk5MTVfRVhFQ19SRU5ERVI7Ci0JY2FzZSBJOTE1X0VOR0lORV9DTEFTU19DT1BZOgotCQlyZXR1
cm4gSTkxNV9FWEVDX0JMVDsKLQljYXNlIEk5MTVfRU5HSU5FX0NMQVNTX1ZJREVPOgotCQlpZiAo
aW5zdGFuY2UgPT0gMCkgewotCQkJaWYgKGdlbV9oYXNfYnNkMihnZW1fZmQpKQotCQkJCXJldHVy
biBJOTE1X0VYRUNfQlNEIHwgSTkxNV9FWEVDX0JTRF9SSU5HMTsKLQkJCWVsc2UKLQkJCQlyZXR1
cm4gSTkxNV9FWEVDX0JTRDsKLQotCQl9IGVsc2UgewotCQkJcmV0dXJuIEk5MTVfRVhFQ19CU0Qg
fCBJOTE1X0VYRUNfQlNEX1JJTkcyOwotCQl9Ci0JY2FzZSBJOTE1X0VOR0lORV9DTEFTU19WSURF
T19FTkhBTkNFOgotCQlyZXR1cm4gSTkxNV9FWEVDX1ZFQk9YOwotCWNhc2UgSTkxNV9FTkdJTkVf
Q0xBU1NfSU5WQUxJRDoKLQlkZWZhdWx0OgotCQlpZ3RfYXNzZXJ0KDApOwotCX07Ci19Ci0KLWJv
b2wgZ2VtX2hhc19lbmdpbmUoaW50IGdlbV9mZCwKLQkJICAgIGVudW0gZHJtX2k5MTVfZ2VtX2Vu
Z2luZV9jbGFzcyBjbGFzcywKLQkJICAgIHVuc2lnbmVkIGludCBpbnN0YW5jZSkKLXsKLQlyZXR1
cm4gZ2VtX2hhc19yaW5nKGdlbV9mZCwKLQkJCSAgICBnZW1fY2xhc3NfaW5zdGFuY2VfdG9fZWJf
ZmxhZ3MoZ2VtX2ZkLCBjbGFzcywKLQkJCQkJCQkgICBpbnN0YW5jZSkpOwotfQotCiBib29sIGdl
bV9yaW5nX2lzX3BoeXNpY2FsX2VuZ2luZShpbnQgZmQsIHVuc2lnbmVkIHJpbmcpCiB7CiAJaWYg
KHJpbmcgPT0gSTkxNV9FWEVDX0RFRkFVTFQpCmRpZmYgLS1naXQgYS9saWIvaWd0X2d0LmggYi9s
aWIvaWd0X2d0LmgKaW5kZXggNzczMThlMmE4Li43M2I1MDAyYTAgMTAwNjQ0Ci0tLSBhL2xpYi9p
Z3RfZ3QuaAorKysgYi9saWIvaWd0X2d0LmgKQEAgLTEwMiwyMSArMTAyLDQgQEAgZXh0ZXJuIGNv
bnN0IHN0cnVjdCBpbnRlbF9leGVjdXRpb25fZW5naW5lMiB7CiAKIGludCBnZW1fZXhlY2J1Zl9m
bGFnc190b19lbmdpbmVfY2xhc3ModW5zaWduZWQgaW50IGZsYWdzKTsKIAotdW5zaWduZWQgaW50
Ci1nZW1fY2xhc3NfaW5zdGFuY2VfdG9fZWJfZmxhZ3MoaW50IGdlbV9mZCwKLQkJCSAgICAgICBl
bnVtIGRybV9pOTE1X2dlbV9lbmdpbmVfY2xhc3MgY2xhc3MsCi0JCQkgICAgICAgdW5zaWduZWQg
aW50IGluc3RhbmNlKTsKLQotYm9vbCBnZW1faGFzX2VuZ2luZShpbnQgZ2VtX2ZkLAotCQkgICAg
ZW51bSBkcm1faTkxNV9nZW1fZW5naW5lX2NsYXNzIGNsYXNzLAotCQkgICAgdW5zaWduZWQgaW50
IGluc3RhbmNlKTsKLQotc3RhdGljIGlubGluZQotdm9pZCBnZW1fcmVxdWlyZV9lbmdpbmUoaW50
IGdlbV9mZCwKLQkJCWVudW0gZHJtX2k5MTVfZ2VtX2VuZ2luZV9jbGFzcyBjbGFzcywKLQkJCXVu
c2lnbmVkIGludCBpbnN0YW5jZSkKLXsKLQlpZ3RfcmVxdWlyZShnZW1faGFzX2VuZ2luZShnZW1f
ZmQsIGNsYXNzLCBpbnN0YW5jZSkpOwotfQotCiAjZW5kaWYgLyogSUdUX0dUX0ggKi8KZGlmZiAt
LWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX2N0eF9pc29sYXRpb24uYyBiL3Rlc3RzL2k5MTUvZ2VtX2N0
eF9pc29sYXRpb24uYwppbmRleCBiY2QwZjQ4MTIuLjViMDU0YzgxZCAxMDA2NDQKLS0tIGEvdGVz
dHMvaTkxNS9nZW1fY3R4X2lzb2xhdGlvbi5jCisrKyBiL3Rlc3RzL2k5MTUvZ2VtX2N0eF9pc29s
YXRpb24uYwpAQCAtMzIxLDggKzMyMSw3IEBAIHN0YXRpYyB1aW50MzJfdCByZWFkX3JlZ3MoaW50
IGZkLAogCW1lbXNldCgmZXhlY2J1ZiwgMCwgc2l6ZW9mKGV4ZWNidWYpKTsKIAlleGVjYnVmLmJ1
ZmZlcnNfcHRyID0gdG9fdXNlcl9wb2ludGVyKG9iaik7CiAJZXhlY2J1Zi5idWZmZXJfY291bnQg
PSAyOwotCWV4ZWNidWYuZmxhZ3MgPQotCQlnZW1fY2xhc3NfaW5zdGFuY2VfdG9fZWJfZmxhZ3Mo
ZmQsIGUtPmNsYXNzLCBlLT5pbnN0YW5jZSk7CisJZXhlY2J1Zi5mbGFncyA9IGUtPmZsYWdzOwog
CWV4ZWNidWYucnN2ZDEgPSBjdHg7CiAJZ2VtX2V4ZWNidWYoZmQsICZleGVjYnVmKTsKIAlnZW1f
Y2xvc2UoZmQsIG9ialsxXS5oYW5kbGUpOwpAQCAtMzc3LDggKzM3Niw3IEBAIHN0YXRpYyB2b2lk
IHdyaXRlX3JlZ3MoaW50IGZkLAogCW1lbXNldCgmZXhlY2J1ZiwgMCwgc2l6ZW9mKGV4ZWNidWYp
KTsKIAlleGVjYnVmLmJ1ZmZlcnNfcHRyID0gdG9fdXNlcl9wb2ludGVyKCZvYmopOwogCWV4ZWNi
dWYuYnVmZmVyX2NvdW50ID0gMTsKLQlleGVjYnVmLmZsYWdzID0KLQkJZ2VtX2NsYXNzX2luc3Rh
bmNlX3RvX2ViX2ZsYWdzKGZkLCBlLT5jbGFzcywgZS0+aW5zdGFuY2UpOworCWV4ZWNidWYuZmxh
Z3MgPSBlLT5mbGFnczsKIAlleGVjYnVmLnJzdmQxID0gY3R4OwogCWdlbV9leGVjYnVmKGZkLCAm
ZXhlY2J1Zik7CiAJZ2VtX2Nsb3NlKGZkLCBvYmouaGFuZGxlKTsKQEAgLTQ0OCw4ICs0NDYsNyBA
QCBzdGF0aWMgdm9pZCByZXN0b3JlX3JlZ3MoaW50IGZkLAogCW1lbXNldCgmZXhlY2J1ZiwgMCwg
c2l6ZW9mKGV4ZWNidWYpKTsKIAlleGVjYnVmLmJ1ZmZlcnNfcHRyID0gdG9fdXNlcl9wb2ludGVy
KG9iaik7CiAJZXhlY2J1Zi5idWZmZXJfY291bnQgPSAyOwotCWV4ZWNidWYuZmxhZ3MgPQotCQln
ZW1fY2xhc3NfaW5zdGFuY2VfdG9fZWJfZmxhZ3MoZmQsIGUtPmNsYXNzLCBlLT5pbnN0YW5jZSk7
CisJZXhlY2J1Zi5mbGFncyA9IGUtPmZsYWdzOwogCWV4ZWNidWYucnN2ZDEgPSBjdHg7CiAJZ2Vt
X2V4ZWNidWYoZmQsICZleGVjYnVmKTsKIAlnZW1fY2xvc2UoZmQsIG9ialsxXS5oYW5kbGUpOwpA
QCAtNTU5LDggKzU1Niw3IEBAIHN0YXRpYyB2b2lkIG5vbnByaXYoaW50IGZkLAogCQkweDA1MDVj
MGMwLAogCQkweGRlYWRiZWVmCiAJfTsKLQl1bnNpZ25lZCBpbnQgZW5naW5lID0KLQkJZ2VtX2Ns
YXNzX2luc3RhbmNlX3RvX2ViX2ZsYWdzKGZkLCBlLT5jbGFzcywgZS0+aW5zdGFuY2UpOworCXVu
c2lnbmVkIGludCBlbmdpbmUgPSBlLT5mbGFnczsKIAl1bnNpZ25lZCBpbnQgbnVtX3ZhbHVlcyA9
IEFSUkFZX1NJWkUodmFsdWVzKTsKIAogCS8qIFNpZ2ggLS0gaHN3OiB3ZSBuZWVkIGNtZHBhcnNl
ciBhY2Nlc3MgdG8gb3VyIG93biByZWdpc3RlcnMhICovCkBAIC02MTYsOSArNjEyLDcgQEAgc3Rh
dGljIHZvaWQgaXNvbGF0aW9uKGludCBmZCwKIAkJMHhhYWFhYWFhYSwKIAkJMHhkZWFkYmVlZgog
CX07Ci0JdW5zaWduZWQgaW50IGVuZ2luZSA9IGdlbV9jbGFzc19pbnN0YW5jZV90b19lYl9mbGFn
cyhmZCwKLQkJCQkJCQkgICAgIGUtPmNsYXNzLAotCQkJCQkJCSAgICAgZS0+aW5zdGFuY2UpOwor
CXVuc2lnbmVkIGludCBlbmdpbmUgPSBlLT5mbGFnczsKIAl1bnNpZ25lZCBpbnQgbnVtX3ZhbHVl
cyA9CiAJCWZsYWdzICYgKERJUlRZMSB8IERJUlRZMikgPyBBUlJBWV9TSVpFKHZhbHVlcykgOiAx
OwogCkBAIC03MjksOCArNzIzLDcgQEAgc3RhdGljIHZvaWQgcHJlc2VydmF0aW9uKGludCBmZCwK
IAkJMHhkZWFkYmVlZgogCX07CiAJY29uc3QgdW5zaWduZWQgaW50IG51bV92YWx1ZXMgPSBBUlJB
WV9TSVpFKHZhbHVlcyk7Ci0JdW5zaWduZWQgaW50IGVuZ2luZSA9Ci0JCWdlbV9jbGFzc19pbnN0
YW5jZV90b19lYl9mbGFncyhmZCwgZS0+Y2xhc3MsIGUtPmluc3RhbmNlKTsKKwl1bnNpZ25lZCBp
bnQgZW5naW5lID0gZS0+ZmxhZ3M7CiAJdWludDMyX3QgY3R4W251bV92YWx1ZXMgKzEgXTsKIAl1
aW50MzJfdCByZWdzW251bV92YWx1ZXMgKyAxXVsyXTsKIAlpZ3Rfc3Bpbl90ICpzcGluOwpAQCAt
ODQwLDcgKzgzMyw3IEBAIGlndF9tYWluCiAJCWlndF9zdWJ0ZXN0X2dyb3VwIHsKIAkJCWlndF9m
aXh0dXJlIHsKIAkJCQlpZ3RfcmVxdWlyZShoYXNfY29udGV4dF9pc29sYXRpb24gJiAoMSA8PCBl
LT5jbGFzcykpOwotCQkJCWdlbV9yZXF1aXJlX2VuZ2luZShmZCwgZS0+Y2xhc3MsIGUtPmluc3Rh
bmNlKTsKKwkJCQlnZW1fcmVxdWlyZV9yaW5nKGZkLCBlLT5mbGFncyk7CiAJCQkJaWd0X2Zvcmtf
aGFuZ19kZXRlY3RvcihmZCk7CiAJCQl9CiAKZGlmZiAtLWdpdCBhL3Rvb2xzL2ludGVsX3JlZy5j
IGIvdG9vbHMvaW50ZWxfcmVnLmMKaW5kZXggMTI0N2I3MGIwLi5lNTE3OTU2YjggMTAwNjQ0Ci0t
LSBhL3Rvb2xzL2ludGVsX3JlZy5jCisrKyBiL3Rvb2xzL2ludGVsX3JlZy5jCkBAIC0zMjksOSAr
MzI5LDcgQEAgc3RhdGljIGludCByZWdpc3Rlcl9zcm0oc3RydWN0IGNvbmZpZyAqY29uZmlnLCBz
dHJ1Y3QgcmVnICpyZWcsCiAJbWVtc2V0KCZleGVjYnVmLCAwLCBzaXplb2YoZXhlY2J1ZikpOwog
CWV4ZWNidWYuYnVmZmVyc19wdHIgPSB0b191c2VyX3BvaW50ZXIob2JqKTsKIAlleGVjYnVmLmJ1
ZmZlcl9jb3VudCA9IDI7Ci0JZXhlY2J1Zi5mbGFncyA9IGdlbV9jbGFzc19pbnN0YW5jZV90b19l
Yl9mbGFncyhmZCwKLQkJCQkJCSAgICAgICBlbmdpbmUtPmNsYXNzLAotCQkJCQkJICAgICAgIGVu
Z2luZS0+aW5zdGFuY2UpOworCWV4ZWNidWYuZmxhZ3MgPSBlbmdpbmUtPmZsYWdzOwogCWlmIChz
ZWN1cmUpCiAJCWV4ZWNidWYuZmxhZ3MgfD0gSTkxNV9FWEVDX1NFQ1VSRTsKIAotLSAKMi4yMC4x
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1n
ZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

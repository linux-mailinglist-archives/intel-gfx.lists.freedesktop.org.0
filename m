Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 75D36E2AD2
	for <lists+intel-gfx@lfdr.de>; Thu, 24 Oct 2019 09:11:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7C411897C5;
	Thu, 24 Oct 2019 07:11:49 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 98D42897C5
 for <intel-gfx@lists.freedesktop.org>; Thu, 24 Oct 2019 07:11:47 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18944934-1500050 
 for multiple; Thu, 24 Oct 2019 08:11:41 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 24 Oct 2019 08:11:39 +0100
Message-Id: <20191024071139.31917-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0.rc0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/gt: Split intel_ring_submission
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U3BsaXQgdGhlIGxlZ2FjeSBzdWJtaXNzaW9uIGJhY2tlbmQgZnJvbSB0aGUgY29tbW9uIHJpbmcg
YnVmZmVyLgoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24u
Y28udWs+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgICAgICAgICAgICAgICAg
IHwgICA1ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX292ZXJsYXkuYyAg
fCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYyAgIHwg
ICAzICstCiAuLi4vZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMgICAgfCAg
IDEgKwogLi4uL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X2JsdC5jICAgIHwgICAx
ICsKIC4uLi9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29oZXJlbmN5LmMgICB8ICAgMSAr
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmMgICAgICAgfCAgIDEgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5oICAgICAgIHwgICAxICsKIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oICAgICAgICB8IDExNCAtLS0tLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyAgICAgfCAgIDEgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3BtLmMgICAgIHwgICAxICsKIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oICB8ICAyNyArLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgICAgICAgICAgIHwgICAxICsKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX21vY3MuYyAgICAgICAgICB8ICAgMSArCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZW5kZXJzdGF0ZS5jICAgfCAgIDEgKwogZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZy5jICAgICAgICAgIHwgMzE0ICsrKysrKysrKysrKysr
KysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZy5oICAgICAgICAgIHwgMTMx
ICsrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZS5jICAgICAg
fCAgIDYgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMgICB8
ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9tb2NrX2VuZ2luZS5jICAgICAgICAgfCAg
IDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfdGltZWxpbmUuYyAgIHwgICAx
ICsKIC4uLi9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uYyB8ICAgMyAr
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2NtZF9wYXJzZXIuYyAgICAgICAgIHwgICAyICsK
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9tbWlvX2NvbnRleHQuYyAgICAgICB8ICAgMSArCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvc2NoZWR1bGVyLmMgICAgICAgICAgfCAgIDEgKwogZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9hY3RpdmUuYyAgICAgICAgICAgIHwgICAxICsKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jICAgICAgICAgICAgICB8ICAgMSArCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYyAgICAgICAgICAgfCAgIDEgKwogMjggZmlsZXMg
Y2hhbmdlZCwgNDc3IGluc2VydGlvbnMoKyksIDE0NyBkZWxldGlvbnMoLSkKIGNyZWF0ZSBtb2Rl
IDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nLmMKIGNyZWF0ZSBtb2Rl
IDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nLmgKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01h
a2VmaWxlCmluZGV4IGE5MWUwYTQ4N2E3OS4uNTAyMWFhN2ZhMTg3IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtl
ZmlsZQpAQCAtOTAsMTEgKzkwLDEyIEBAIGd0LXkgKz0gXAogCWd0L2ludGVsX2d0X3JlcXVlc3Rz
Lm8gXAogCWd0L2ludGVsX2xsYy5vIFwKIAlndC9pbnRlbF9scmMubyBcCisJZ3QvaW50ZWxfbW9j
cy5vIFwKIAlndC9pbnRlbF9yYzYubyBcCiAJZ3QvaW50ZWxfcmVuZGVyc3RhdGUubyBcCiAJZ3Qv
aW50ZWxfcmVzZXQubyBcCi0JZ3QvaW50ZWxfcmluZ2J1ZmZlci5vIFwKLQlndC9pbnRlbF9tb2Nz
Lm8gXAorCWd0L2ludGVsX3JpbmcubyBcCisJZ3QvaW50ZWxfcmluZ19zdWJtaXNzaW9uLm8gXAog
CWd0L2ludGVsX3NzZXUubyBcCiAJZ3QvaW50ZWxfdGltZWxpbmUubyBcCiAJZ3QvaW50ZWxfd29y
a2Fyb3VuZHMubwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9vdmVybGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX292ZXJsYXku
YwppbmRleCAyMzYwZjE5Zjk2OTQuLjg0OGNlMDdhOGVjMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9vdmVybGF5LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9vdmVybGF5LmMKQEAgLTMwLDYgKzMwLDcgQEAKICNpbmNsdWRl
IDxkcm0vaTkxNV9kcm0uaD4KIAogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9wbS5oIgorI2luY2x1
ZGUgImd0L2ludGVsX3JpbmcuaCIKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAi
aTkxNV9yZWcuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9jb250ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5j
CmluZGV4IGRmNTI4ZTQ4ZTU2Ni4uYTAzYmVlMzBmYWMxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMKQEAgLTY5LDkgKzY5LDEwIEBACiAKICNpbmNsdWRl
IDxkcm0vaTkxNV9kcm0uaD4KIAotI2luY2x1ZGUgImd0L2ludGVsX2xyY19yZWcuaCIKICNpbmNs
dWRlICJndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZW5n
aW5lX3VzZXIuaCIKKyNpbmNsdWRlICJndC9pbnRlbF9scmNfcmVnLmgiCisjaW5jbHVkZSAiZ3Qv
aW50ZWxfcmluZy5oIgogCiAjaW5jbHVkZSAiaTkxNV9nZW1fY29udGV4dC5oIgogI2luY2x1ZGUg
Imk5MTVfZ2xvYmFscy5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2V4ZWNidWZmZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9l
eGVjYnVmZmVyLmMKaW5kZXggOTlkNzlmOTRlNjQxLi5jODg5NDhlNDA5NGIgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYwpAQCAtMTksNiArMTks
NyBAQAogI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV9wb29sLmgiCiAjaW5jbHVkZSAiZ3QvaW50
ZWxfZ3QuaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndF9wbS5oIgorI2luY2x1ZGUgImd0L2ludGVs
X3JpbmcuaCIKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1fY2xm
bHVzaC5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29i
amVjdF9ibHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfYmx0
LmMKaW5kZXggNWJkOGRlMTI0ZDc0Li41MTZlNjFlOTkyMTIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfYmx0LmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF9ibHQuYwpAQCAtOCw2ICs4LDcgQEAKICNpbmNs
dWRlICJndC9pbnRlbF9lbmdpbmVfcG0uaCIKICNpbmNsdWRlICJndC9pbnRlbF9lbmdpbmVfcG9v
bC5oIgogI2luY2x1ZGUgImd0L2ludGVsX2d0LmgiCisjaW5jbHVkZSAiZ3QvaW50ZWxfcmluZy5o
IgogI2luY2x1ZGUgImk5MTVfZ2VtX2NsZmx1c2guaCIKICNpbmNsdWRlICJpOTE1X2dlbV9vYmpl
Y3RfYmx0LmgiCiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVz
dHMvaTkxNV9nZW1fY29oZXJlbmN5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL2k5MTVfZ2VtX2NvaGVyZW5jeS5jCmluZGV4IDU0OTgxMGY3MGFlYi4uMDg3N2VmNGRmZjYz
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2Vt
X2NvaGVyZW5jeS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkx
NV9nZW1fY29oZXJlbmN5LmMKQEAgLTgsNiArOCw3IEBACiAKICNpbmNsdWRlICJndC9pbnRlbF9n
dC5oIgogI2luY2x1ZGUgImd0L2ludGVsX2d0X3BtLmgiCisjaW5jbHVkZSAiZ3QvaW50ZWxfcmlu
Zy5oIgogCiAjaW5jbHVkZSAiaTkxNV9zZWxmdGVzdC5oIgogI2luY2x1ZGUgInNlbGZ0ZXN0cy9p
OTE1X3JhbmRvbS5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
Y29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5jCmluZGV4
IDU5YzMwODNjMWVjMS4uZWU5ZDJiY2QyYzEzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9jb250ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfY29udGV4dC5jCkBAIC0xMyw2ICsxMyw3IEBACiAjaW5jbHVkZSAiaW50ZWxfY29udGV4dC5o
IgogI2luY2x1ZGUgImludGVsX2VuZ2luZS5oIgogI2luY2x1ZGUgImludGVsX2VuZ2luZV9wbS5o
IgorI2luY2x1ZGUgImludGVsX3JpbmcuaCIKIAogc3RhdGljIHN0cnVjdCBpOTE1X2dsb2JhbF9j
b250ZXh0IHsKIAlzdHJ1Y3QgaTkxNV9nbG9iYWwgYmFzZTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2NvbnRleHQuaAppbmRleCBkZDc0MmFjMmZiZGIuLjY4YjNkMzE3ZDk1OSAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5oCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuaApAQCAtMTIsNiArMTIsNyBAQAogI2lu
Y2x1ZGUgImk5MTVfYWN0aXZlLmgiCiAjaW5jbHVkZSAiaW50ZWxfY29udGV4dF90eXBlcy5oIgog
I2luY2x1ZGUgImludGVsX2VuZ2luZV90eXBlcy5oIgorI2luY2x1ZGUgImludGVsX3JpbmdfdHlw
ZXMuaCIKICNpbmNsdWRlICJpbnRlbF90aW1lbGluZV90eXBlcy5oIgogCiB2b2lkIGludGVsX2Nv
bnRleHRfaW5pdChzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZS5oCmluZGV4IGM3ZjkzZDA1YzhlMC4uZDc3YjlmOWYwOTZjIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaAorKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaApAQCAtMTksNyArMTksNiBAQAogI2luY2x1
ZGUgImludGVsX3dvcmthcm91bmRzLmgiCiAKIHN0cnVjdCBkcm1fcHJpbnRlcjsKLQogc3RydWN0
IGludGVsX2d0OwogCiAvKiBFYXJseSBnZW4yIGRldmljZXMgaGF2ZSBhIGNhY2hlbGluZSBvZiBq
dXN0IDMyIGJ5dGVzLCB1c2luZyA2NCBpcyBvdmVya2lsbCwKQEAgLTE3NiwxMjIgKzE3NSw5IEBA
IGludGVsX3dyaXRlX3N0YXR1c19wYWdlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwg
aW50IHJlZywgdTMyIHZhbHVlKQogI2RlZmluZSBJOTE1X0hXU19DU0JfV1JJVEVfSU5ERVgJMHgx
ZgogI2RlZmluZSBDTkxfSFdTX0NTQl9XUklURV9JTkRFWAkJMHgyZgogCi1zdHJ1Y3QgaW50ZWxf
cmluZyAqCi1pbnRlbF9lbmdpbmVfY3JlYXRlX3Jpbmcoc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lLCBpbnQgc2l6ZSk7Ci1pbnQgaW50ZWxfcmluZ19waW4oc3RydWN0IGludGVsX3Jpbmcg
KnJpbmcpOwotdm9pZCBpbnRlbF9yaW5nX3Jlc2V0KHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nLCB1
MzIgdGFpbCk7Ci11bnNpZ25lZCBpbnQgaW50ZWxfcmluZ191cGRhdGVfc3BhY2Uoc3RydWN0IGlu
dGVsX3JpbmcgKnJpbmcpOwotdm9pZCBpbnRlbF9yaW5nX3VucGluKHN0cnVjdCBpbnRlbF9yaW5n
ICpyaW5nKTsKLXZvaWQgaW50ZWxfcmluZ19mcmVlKHN0cnVjdCBrcmVmICpyZWYpOwotCi1zdGF0
aWMgaW5saW5lIHN0cnVjdCBpbnRlbF9yaW5nICppbnRlbF9yaW5nX2dldChzdHJ1Y3QgaW50ZWxf
cmluZyAqcmluZykKLXsKLQlrcmVmX2dldCgmcmluZy0+cmVmKTsKLQlyZXR1cm4gcmluZzsKLX0K
LQotc3RhdGljIGlubGluZSB2b2lkIGludGVsX3JpbmdfcHV0KHN0cnVjdCBpbnRlbF9yaW5nICpy
aW5nKQotewotCWtyZWZfcHV0KCZyaW5nLT5yZWYsIGludGVsX3JpbmdfZnJlZSk7Ci19Ci0KIHZv
aWQgaW50ZWxfZW5naW5lX3N0b3Aoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKIHZv
aWQgaW50ZWxfZW5naW5lX2NsZWFudXAoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsK
IAotaW50IF9fbXVzdF9jaGVjayBpbnRlbF9yaW5nX2NhY2hlbGluZV9hbGlnbihzdHJ1Y3QgaTkx
NV9yZXF1ZXN0ICpycSk7Ci0KLXUzMiBfX211c3RfY2hlY2sgKmludGVsX3JpbmdfYmVnaW4oc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcnEsIHVuc2lnbmVkIGludCBuKTsKLQotc3RhdGljIGlubGluZSB2
b2lkIGludGVsX3JpbmdfYWR2YW5jZShzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgdTMyICpjcykK
LXsKLQkvKiBEdW1teSBmdW5jdGlvbi4KLQkgKgotCSAqIFRoaXMgc2VydmVzIGFzIGEgcGxhY2Vo
b2xkZXIgaW4gdGhlIGNvZGUgc28gdGhhdCB0aGUgcmVhZGVyCi0JICogY2FuIGNvbXBhcmUgYWdh
aW5zdCB0aGUgcHJlY2VkaW5nIGludGVsX3JpbmdfYmVnaW4oKSBhbmQKLQkgKiBjaGVjayB0aGF0
IHRoZSBudW1iZXIgb2YgZHdvcmRzIGVtaXR0ZWQgbWF0Y2hlcyB0aGUgc3BhY2UKLQkgKiByZXNl
cnZlZCBmb3IgdGhlIGNvbW1hbmQgcGFja2V0IChpLmUuIHRoZSB2YWx1ZSBwYXNzZWQgdG8KLQkg
KiBpbnRlbF9yaW5nX2JlZ2luKCkpLgotCSAqLwotCUdFTV9CVUdfT04oKHJxLT5yaW5nLT52YWRk
ciArIHJxLT5yaW5nLT5lbWl0KSAhPSBjcyk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdTMyIGludGVs
X3Jpbmdfd3JhcChjb25zdCBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZywgdTMyIHBvcykKLXsKLQly
ZXR1cm4gcG9zICYgKHJpbmctPnNpemUgLSAxKTsKLX0KLQotc3RhdGljIGlubGluZSBib29sCi1p
bnRlbF9yaW5nX29mZnNldF92YWxpZChjb25zdCBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZywKLQkJ
CXVuc2lnbmVkIGludCBwb3MpCi17Ci0JaWYgKHBvcyAmIC1yaW5nLT5zaXplKSAvKiBtdXN0IGJl
IHN0cmljdGx5IHdpdGhpbiB0aGUgcmluZyAqLwotCQlyZXR1cm4gZmFsc2U7Ci0KLQlpZiAoIUlT
X0FMSUdORUQocG9zLCA4KSkgLyogbXVzdCBiZSBxd29yZCBhbGlnbmVkICovCi0JCXJldHVybiBm
YWxzZTsKLQotCXJldHVybiB0cnVlOwotfQotCi1zdGF0aWMgaW5saW5lIHUzMiBpbnRlbF9yaW5n
X29mZnNldChjb25zdCBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgdm9pZCAqYWRkcikKLXsKLQkv
KiBEb24ndCB3cml0ZSByaW5nLT5zaXplIChlcXVpdmFsZW50IHRvIDApIGFzIHRoYXQgaGFuZ3Mg
c29tZSBHUFVzLiAqLwotCXUzMiBvZmZzZXQgPSBhZGRyIC0gcnEtPnJpbmctPnZhZGRyOwotCUdF
TV9CVUdfT04ob2Zmc2V0ID4gcnEtPnJpbmctPnNpemUpOwotCXJldHVybiBpbnRlbF9yaW5nX3dy
YXAocnEtPnJpbmcsIG9mZnNldCk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZAotYXNzZXJ0X3Jp
bmdfdGFpbF92YWxpZChjb25zdCBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZywgdW5zaWduZWQgaW50
IHRhaWwpCi17Ci0JR0VNX0JVR19PTighaW50ZWxfcmluZ19vZmZzZXRfdmFsaWQocmluZywgdGFp
bCkpOwotCi0JLyoKLQkgKiAiUmluZyBCdWZmZXIgVXNlIgotCSAqCUdlbjIgQlNwZWMgIjEuIFBy
b2dyYW1taW5nIEVudmlyb25tZW50IiAvIDEuNC40LjYKLQkgKglHZW4zIEJTcGVjICIxYyBNZW1v
cnkgSW50ZXJmYWNlIEZ1bmN0aW9ucyIgLyAyLjMuNC41Ci0JICoJR2VuNCsgQlNwZWMgIjFjIE1l
bW9yeSBJbnRlcmZhY2UgYW5kIENvbW1hbmQgU3RyZWFtIiAvIDUuMy40LjUKLQkgKiAiSWYgdGhl
IFJpbmcgQnVmZmVyIEhlYWQgUG9pbnRlciBhbmQgdGhlIFRhaWwgUG9pbnRlciBhcmUgb24gdGhl
Ci0JICogc2FtZSBjYWNoZWxpbmUsIHRoZSBIZWFkIFBvaW50ZXIgbXVzdCBub3QgYmUgZ3JlYXRl
ciB0aGFuIHRoZSBUYWlsCi0JICogUG9pbnRlci4iCi0JICoKLQkgKiBXZSB1c2UgcmluZy0+aGVh
ZCBhcyB0aGUgbGFzdCBrbm93biBsb2NhdGlvbiBvZiB0aGUgYWN0dWFsIFJJTkdfSEVBRCwKLQkg
KiBpdCBtYXkgaGF2ZSBhZHZhbmNlZCBidXQgaW4gdGhlIHdvcnN0IGNhc2UgaXQgaXMgZXF1YWxs
eSB0aGUgc2FtZQotCSAqIGFzIHJpbmctPmhlYWQgYW5kIHNvIHdlIHNob3VsZCBuZXZlciBwcm9n
cmFtIFJJTkdfVEFJTCB0byBhZHZhbmNlCi0JICogaW50byB0aGUgc2FtZSBjYWNoZWxpbmUgYXMg
cmluZy0+aGVhZC4KLQkgKi8KLSNkZWZpbmUgY2FjaGVsaW5lKGEpIHJvdW5kX2Rvd24oYSwgQ0FD
SEVMSU5FX0JZVEVTKQotCUdFTV9CVUdfT04oY2FjaGVsaW5lKHRhaWwpID09IGNhY2hlbGluZShy
aW5nLT5oZWFkKSAmJgotCQkgICB0YWlsIDwgcmluZy0+aGVhZCk7Ci0jdW5kZWYgY2FjaGVsaW5l
Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdW5zaWduZWQgaW50Ci1pbnRlbF9yaW5nX3NldF90YWlsKHN0
cnVjdCBpbnRlbF9yaW5nICpyaW5nLCB1bnNpZ25lZCBpbnQgdGFpbCkKLXsKLQkvKiBXaGlsc3Qg
d3JpdGVzIHRvIHRoZSB0YWlsIGFyZSBzdHJpY3RseSBvcmRlciwgdGhlcmUgaXMgbm8KLQkgKiBz
ZXJpYWxpc2F0aW9uIGJldHdlZW4gcmVhZGVycyBhbmQgdGhlIHdyaXRlcnMuIFRoZSB0YWlsIG1h
eSBiZQotCSAqIHJlYWQgYnkgaTkxNV9yZXF1ZXN0X3JldGlyZSgpIGp1c3QgYXMgaXQgaXMgYmVp
bmcgdXBkYXRlZAotCSAqIGJ5IGV4ZWNsaXN0cywgYXMgYWx0aG91Z2ggdGhlIGJyZWFkY3J1bWIg
aXMgY29tcGxldGUsIHRoZSBjb250ZXh0Ci0JICogc3dpdGNoIGhhc24ndCBiZWVuIHNlZW4uCi0J
ICovCi0JYXNzZXJ0X3JpbmdfdGFpbF92YWxpZChyaW5nLCB0YWlsKTsKLQlyaW5nLT50YWlsID0g
dGFpbDsKLQlyZXR1cm4gdGFpbDsKLX0KLQotc3RhdGljIGlubGluZSB1bnNpZ25lZCBpbnQKLV9f
aW50ZWxfcmluZ19zcGFjZSh1bnNpZ25lZCBpbnQgaGVhZCwgdW5zaWduZWQgaW50IHRhaWwsIHVu
c2lnbmVkIGludCBzaXplKQotewotCS8qCi0JICogIklmIHRoZSBSaW5nIEJ1ZmZlciBIZWFkIFBv
aW50ZXIgYW5kIHRoZSBUYWlsIFBvaW50ZXIgYXJlIG9uIHRoZQotCSAqIHNhbWUgY2FjaGVsaW5l
LCB0aGUgSGVhZCBQb2ludGVyIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiB0aGUgVGFpbAotCSAq
IFBvaW50ZXIuIgotCSAqLwotCUdFTV9CVUdfT04oIWlzX3Bvd2VyX29mXzIoc2l6ZSkpOwotCXJl
dHVybiAoaGVhZCAtIHRhaWwgLSBDQUNIRUxJTkVfQllURVMpICYgKHNpemUgLSAxKTsKLX0KLQog
aW50IGludGVsX2VuZ2luZXNfaW5pdF9tbWlvKHN0cnVjdCBpbnRlbF9ndCAqZ3QpOwogaW50IGlu
dGVsX2VuZ2luZXNfc2V0dXAoc3RydWN0IGludGVsX2d0ICpndCk7CiBpbnQgaW50ZWxfZW5naW5l
c19pbml0KHN0cnVjdCBpbnRlbF9ndCAqZ3QpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9lbmdpbmVfY3MuYwppbmRleCBjZDRjYWY1NGM1OWMuLjJhZmEyZWY5MDQ4MiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKQEAgLTM3LDYgKzM3LDcgQEAKICNp
bmNsdWRlICJpbnRlbF9jb250ZXh0LmgiCiAjaW5jbHVkZSAiaW50ZWxfbHJjLmgiCiAjaW5jbHVk
ZSAiaW50ZWxfcmVzZXQuaCIKKyNpbmNsdWRlICJpbnRlbF9yaW5nLmgiCiAKIC8qIEhhc3dlbGwg
ZG9lcyBoYXZlIHRoZSBDWFRfU0laRSByZWdpc3RlciBob3dldmVyIGl0IGRvZXMgbm90IGFwcGVh
ciB0byBiZQogICogdmFsaWQuIE5vdywgZG9jcyBleHBsYWluIGluIGR3b3JkcyB3aGF0IGlzIGlu
IHRoZSBjb250ZXh0IG9iamVjdC4gVGhlIGZ1bGwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lX3BtLmMKaW5kZXggNmZiZmEyMTYyZTU0Li4zYzBmNDkwZmYyYzcgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5jCkBAIC0xMyw2ICsxMyw3IEBACiAj
aW5jbHVkZSAiaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJpbnRlbF9ndF9wbS5oIgogI2luY2x1ZGUg
ImludGVsX3JjNi5oIgorI2luY2x1ZGUgImludGVsX3JpbmcuaCIKIAogc3RhdGljIGludCBfX2Vu
Z2luZV91bnBhcmsoc3RydWN0IGludGVsX3dha2VyZWYgKndmKQogewpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmggYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAppbmRleCBmYmU4OWJmZDNkNGYuLmM1ZDEw
NDdhNGJjNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5l
X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVz
LmgKQEAgLTU5LDYgKzU5LDcgQEAgc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQ7CiBzdHJ1Y3QgaTkx
NV9yZXF1ZXN0Owogc3RydWN0IGk5MTVfc2NoZWRfYXR0cjsKIHN0cnVjdCBpbnRlbF9ndDsKK3N0
cnVjdCBpbnRlbF9yaW5nOwogc3RydWN0IGludGVsX3VuY29yZTsKIAogdHlwZWRlZiB1OCBpbnRl
bF9lbmdpbmVfbWFza190OwpAQCAtNzcsMzIgKzc4LDYgQEAgc3RydWN0IGludGVsX2luc3Rkb25l
IHsKIAl1MzIgcm93W0k5MTVfTUFYX1NMSUNFU11bSTkxNV9NQVhfU1VCU0xJQ0VTXTsKIH07CiAK
LXN0cnVjdCBpbnRlbF9yaW5nIHsKLQlzdHJ1Y3Qga3JlZiByZWY7Ci0Jc3RydWN0IGk5MTVfdm1h
ICp2bWE7Ci0Jdm9pZCAqdmFkZHI7Ci0KLQkvKgotCSAqIEFzIHdlIGhhdmUgdHdvIHR5cGVzIG9m
IHJpbmdzLCBvbmUgZ2xvYmFsIHRvIHRoZSBlbmdpbmUgdXNlZAotCSAqIGJ5IHJpbmdidWZmZXIg
c3VibWlzc2lvbiBhbmQgdGhvc2UgdGhhdCBhcmUgZXhjbHVzaXZlIHRvIGEKLQkgKiBjb250ZXh0
IHVzZWQgYnkgZXhlY2xpc3RzLCB3ZSBoYXZlIHRvIHBsYXkgc2FmZSBhbmQgYWxsb3cKLQkgKiBh
dG9taWMgdXBkYXRlcyB0byB0aGUgcGluX2NvdW50LiBIb3dldmVyLCB0aGUgYWN0dWFsIHBpbm5p
bmcKLQkgKiBvZiB0aGUgY29udGV4dCBpcyBlaXRoZXIgZG9uZSBkdXJpbmcgaW5pdGlhbGlzYXRp
b24gZm9yCi0JICogcmluZ2J1ZmZlciBzdWJtaXNzaW9uIG9yIHNlcmlhbGlzZWQgYXMgcGFydCBv
ZiB0aGUgY29udGV4dAotCSAqIHBpbm5pbmcgZm9yIGV4ZWNsaXN0cywgYW5kIHNvIHdlIGRvIG5v
dCBuZWVkIGEgbXV0ZXggb3Vyc2VsdmVzCi0JICogdG8gc2VyaWFsaXNlIGludGVsX3JpbmdfcGlu
L2ludGVsX3JpbmdfdW5waW4uCi0JICovCi0JYXRvbWljX3QgcGluX2NvdW50OwotCi0JdTMyIGhl
YWQ7Ci0JdTMyIHRhaWw7Ci0JdTMyIGVtaXQ7Ci0KLQl1MzIgc3BhY2U7Ci0JdTMyIHNpemU7Ci0J
dTMyIGVmZmVjdGl2ZV9zaXplOwotfTsKLQogLyoKICAqIHdlIHVzZSBhIHNpbmdsZSBwYWdlIHRv
IGxvYWQgY3R4IHdvcmthcm91bmRzIHNvIGFsbCBvZiB0aGVzZQogICogdmFsdWVzIGFyZSByZWZl
cnJlZCBpbiB0ZXJtcyBvZiBkd29yZHMKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2xyYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKaW5k
ZXggOGQ4ZmVjYzY5ODA5Li45ZDU5ZGViZmQxNjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2xyYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2xyYy5jCkBAIC0xNDUsNiArMTQ1LDcgQEAKICNpbmNsdWRlICJpbnRlbF9scmNfcmVnLmgiCiAj
aW5jbHVkZSAiaW50ZWxfbW9jcy5oIgogI2luY2x1ZGUgImludGVsX3Jlc2V0LmgiCisjaW5jbHVk
ZSAiaW50ZWxfcmluZy5oIgogI2luY2x1ZGUgImludGVsX3dvcmthcm91bmRzLmgiCiAKICNkZWZp
bmUgUklOR19FWEVDTElTVF9RRlVMTAkJKDEgPDwgMHgyKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfbW9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfbW9jcy5jCmluZGV4IDA2ZGJhN2ZmMjk0ZS4uNmQ0YzY2NWE5OTdkIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9tb2NzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfbW9jcy5jCkBAIC0yNiw2ICsyNiw3IEBACiAjaW5jbHVkZSAiaW50ZWxf
Z3QuaCIKICNpbmNsdWRlICJpbnRlbF9tb2NzLmgiCiAjaW5jbHVkZSAiaW50ZWxfbHJjLmgiCisj
aW5jbHVkZSAiaW50ZWxfcmluZy5oIgogCiAvKiBzdHJ1Y3R1cmVzIHJlcXVpcmVkICovCiBzdHJ1
Y3QgZHJtX2k5MTVfbW9jc19lbnRyeSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9yZW5kZXJzdGF0ZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
cmVuZGVyc3RhdGUuYwppbmRleCA2ZDA1ZjljNjQxNzguLmM0ZWRjMzVlN2Q4OSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVuZGVyc3RhdGUuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZW5kZXJzdGF0ZS5jCkBAIC0yNyw2ICsyNyw3IEBA
CiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImludGVsX3JlbmRlcnN0YXRlLmgi
CisjaW5jbHVkZSAiaW50ZWxfcmluZy5oIgogCiBzdHJ1Y3QgaW50ZWxfcmVuZGVyc3RhdGUgewog
CWNvbnN0IHN0cnVjdCBpbnRlbF9yZW5kZXJzdGF0ZV9yb2RhdGEgKnJvZGF0YTsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3JpbmcuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX3JpbmcuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAw
MDAwMDAuLjk4ODc2YjU1Zjg1MQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX3JpbmcuYwpAQCAtMCwwICsxLDMxNCBAQAorLyoKKyAqIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBNSVQKKyAqCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3Jh
dGlvbgorICovCisKKyNpbmNsdWRlICJnZW0vaTkxNV9nZW1fb2JqZWN0LmgiCisjaW5jbHVkZSAi
aTkxNV9kcnYuaCIKKyNpbmNsdWRlICJpOTE1X3ZtYS5oIgorI2luY2x1ZGUgImludGVsX2VuZ2lu
ZS5oIgorI2luY2x1ZGUgImludGVsX3JpbmcuaCIKKyNpbmNsdWRlICJpbnRlbF90aW1lbGluZS5o
IgorCit1bnNpZ25lZCBpbnQgaW50ZWxfcmluZ191cGRhdGVfc3BhY2Uoc3RydWN0IGludGVsX3Jp
bmcgKnJpbmcpCit7CisJdW5zaWduZWQgaW50IHNwYWNlOworCisJc3BhY2UgPSBfX2ludGVsX3Jp
bmdfc3BhY2UocmluZy0+aGVhZCwgcmluZy0+ZW1pdCwgcmluZy0+c2l6ZSk7CisKKwlyaW5nLT5z
cGFjZSA9IHNwYWNlOworCXJldHVybiBzcGFjZTsKK30KKworaW50IGludGVsX3JpbmdfcGluKHN0
cnVjdCBpbnRlbF9yaW5nICpyaW5nKQoreworCXN0cnVjdCBpOTE1X3ZtYSAqdm1hID0gcmluZy0+
dm1hOworCXVuc2lnbmVkIGludCBmbGFnczsKKwl2b2lkICphZGRyOworCWludCByZXQ7CisKKwlp
ZiAoYXRvbWljX2ZldGNoX2luYygmcmluZy0+cGluX2NvdW50KSkKKwkJcmV0dXJuIDA7CisKKwlm
bGFncyA9IFBJTl9HTE9CQUw7CisKKwkvKiBSaW5nIHdyYXBhcm91bmQgYXQgb2Zmc2V0IDAgc29t
ZXRpbWVzIGhhbmdzLiBObyBpZGVhIHdoeS4gKi8KKwlmbGFncyB8PSBQSU5fT0ZGU0VUX0JJQVMg
fCBpOTE1X2dndHRfcGluX2JpYXModm1hKTsKKworCWlmICh2bWEtPm9iai0+c3RvbGVuKQorCQlm
bGFncyB8PSBQSU5fTUFQUEFCTEU7CisJZWxzZQorCQlmbGFncyB8PSBQSU5fSElHSDsKKworCXJl
dCA9IGk5MTVfdm1hX3Bpbih2bWEsIDAsIDAsIGZsYWdzKTsKKwlpZiAodW5saWtlbHkocmV0KSkK
KwkJZ290byBlcnJfdW5waW47CisKKwlpZiAoaTkxNV92bWFfaXNfbWFwX2FuZF9mZW5jZWFibGUo
dm1hKSkKKwkJYWRkciA9ICh2b2lkIF9fZm9yY2UgKilpOTE1X3ZtYV9waW5faW9tYXAodm1hKTsK
KwllbHNlCisJCWFkZHIgPSBpOTE1X2dlbV9vYmplY3RfcGluX21hcCh2bWEtPm9iaiwKKwkJCQkJ
ICAgICAgIGk5MTVfY29oZXJlbnRfbWFwX3R5cGUodm1hLT52bS0+aTkxNSkpOworCWlmIChJU19F
UlIoYWRkcikpIHsKKwkJcmV0ID0gUFRSX0VSUihhZGRyKTsKKwkJZ290byBlcnJfcmluZzsKKwl9
CisKKwlpOTE1X3ZtYV9tYWtlX3Vuc2hyaW5rYWJsZSh2bWEpOworCisJR0VNX0JVR19PTihyaW5n
LT52YWRkcik7CisJcmluZy0+dmFkZHIgPSBhZGRyOworCisJcmV0dXJuIDA7CisKK2Vycl9yaW5n
OgorCWk5MTVfdm1hX3VucGluKHZtYSk7CitlcnJfdW5waW46CisJYXRvbWljX2RlYygmcmluZy0+
cGluX2NvdW50KTsKKwlyZXR1cm4gcmV0OworfQorCit2b2lkIGludGVsX3JpbmdfcmVzZXQoc3Ry
dWN0IGludGVsX3JpbmcgKnJpbmcsIHUzMiB0YWlsKQoreworCXRhaWwgPSBpbnRlbF9yaW5nX3dy
YXAocmluZywgdGFpbCk7CisJcmluZy0+dGFpbCA9IHRhaWw7CisJcmluZy0+aGVhZCA9IHRhaWw7
CisJcmluZy0+ZW1pdCA9IHRhaWw7CisJaW50ZWxfcmluZ191cGRhdGVfc3BhY2UocmluZyk7Cit9
CisKK3ZvaWQgaW50ZWxfcmluZ191bnBpbihzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKK3sKKwlp
ZiAoIWF0b21pY19kZWNfYW5kX3Rlc3QoJnJpbmctPnBpbl9jb3VudCkpCisJCXJldHVybjsKKwor
CS8qIERpc2NhcmQgYW55IHVudXNlZCBieXRlcyBiZXlvbmQgdGhhdCBzdWJtaXR0ZWQgdG8gaHcu
ICovCisJaW50ZWxfcmluZ19yZXNldChyaW5nLCByaW5nLT5lbWl0KTsKKworCUdFTV9CVUdfT04o
IXJpbmctPnZtYSk7CisJaTkxNV92bWFfdW5zZXRfZ2d0dF93cml0ZShyaW5nLT52bWEpOworCWlm
IChpOTE1X3ZtYV9pc19tYXBfYW5kX2ZlbmNlYWJsZShyaW5nLT52bWEpKQorCQlpOTE1X3ZtYV91
bnBpbl9pb21hcChyaW5nLT52bWEpOworCWVsc2UKKwkJaTkxNV9nZW1fb2JqZWN0X3VucGluX21h
cChyaW5nLT52bWEtPm9iaik7CisKKwlHRU1fQlVHX09OKCFyaW5nLT52YWRkcik7CisJcmluZy0+
dmFkZHIgPSBOVUxMOworCisJaTkxNV92bWFfdW5waW4ocmluZy0+dm1hKTsKKwlpOTE1X3ZtYV9t
YWtlX3B1cmdlYWJsZShyaW5nLT52bWEpOworfQorCitzdGF0aWMgc3RydWN0IGk5MTVfdm1hICpj
cmVhdGVfcmluZ192bWEoc3RydWN0IGk5MTVfZ2d0dCAqZ2d0dCwgaW50IHNpemUpCit7CisJc3Ry
dWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0gPSAmZ2d0dC0+dm07CisJc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUgPSB2bS0+aTkxNTsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAq
b2JqOworCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOworCisJb2JqID0gaTkxNV9nZW1fb2JqZWN0X2Ny
ZWF0ZV9zdG9sZW4oaTkxNSwgc2l6ZSk7CisJaWYgKCFvYmopCisJCW9iaiA9IGk5MTVfZ2VtX29i
amVjdF9jcmVhdGVfaW50ZXJuYWwoaTkxNSwgc2l6ZSk7CisJaWYgKElTX0VSUihvYmopKQorCQly
ZXR1cm4gRVJSX0NBU1Qob2JqKTsKKworCS8qCisJICogTWFyayByaW5nIGJ1ZmZlcnMgYXMgcmVh
ZC1vbmx5IGZyb20gR1BVIHNpZGUgKHNvIG5vIHN0cmF5IG92ZXJ3cml0ZXMpCisJICogaWYgc3Vw
cG9ydGVkIGJ5IHRoZSBwbGF0Zm9ybSdzIEdHVFQuCisJICovCisJaWYgKHZtLT5oYXNfcmVhZF9v
bmx5KQorCQlpOTE1X2dlbV9vYmplY3Rfc2V0X3JlYWRvbmx5KG9iaik7CisKKwl2bWEgPSBpOTE1
X3ZtYV9pbnN0YW5jZShvYmosIHZtLCBOVUxMKTsKKwlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7
CisKKwlyZXR1cm4gdm1hOworfQorCitzdHJ1Y3QgaW50ZWxfcmluZyAqCitpbnRlbF9lbmdpbmVf
Y3JlYXRlX3Jpbmcoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCBpbnQgc2l6ZSkKK3sK
KwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGVuZ2luZS0+aTkxNTsKKwlzdHJ1Y3Qg
aW50ZWxfcmluZyAqcmluZzsKKwlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKKworCUdFTV9CVUdfT04o
IWlzX3Bvd2VyX29mXzIoc2l6ZSkpOworCUdFTV9CVUdfT04oUklOR19DVExfU0laRShzaXplKSAm
IH5SSU5HX05SX1BBR0VTKTsKKworCXJpbmcgPSBremFsbG9jKHNpemVvZigqcmluZyksIEdGUF9L
RVJORUwpOworCWlmICghcmluZykKKwkJcmV0dXJuIEVSUl9QVFIoLUVOT01FTSk7CisKKwlrcmVm
X2luaXQoJnJpbmctPnJlZik7CisKKwlyaW5nLT5zaXplID0gc2l6ZTsKKwkvKiBXb3JrYXJvdW5k
IGFuIGVycmF0dW0gb24gdGhlIGk4MzAgd2hpY2ggY2F1c2VzIGEgaGFuZyBpZgorCSAqIHRoZSBU
QUlMIHBvaW50ZXIgcG9pbnRzIHRvIHdpdGhpbiB0aGUgbGFzdCAyIGNhY2hlbGluZXMKKwkgKiBv
ZiB0aGUgYnVmZmVyLgorCSAqLworCXJpbmctPmVmZmVjdGl2ZV9zaXplID0gc2l6ZTsKKwlpZiAo
SVNfSTgzMChpOTE1KSB8fCBJU19JODQ1RyhpOTE1KSkKKwkJcmluZy0+ZWZmZWN0aXZlX3NpemUg
LT0gMiAqIENBQ0hFTElORV9CWVRFUzsKKworCWludGVsX3JpbmdfdXBkYXRlX3NwYWNlKHJpbmcp
OworCisJdm1hID0gY3JlYXRlX3Jpbmdfdm1hKGVuZ2luZS0+Z3QtPmdndHQsIHNpemUpOworCWlm
IChJU19FUlIodm1hKSkgeworCQlrZnJlZShyaW5nKTsKKwkJcmV0dXJuIEVSUl9DQVNUKHZtYSk7
CisJfQorCXJpbmctPnZtYSA9IHZtYTsKKworCXJldHVybiByaW5nOworfQorCit2b2lkIGludGVs
X3JpbmdfZnJlZShzdHJ1Y3Qga3JlZiAqcmVmKQoreworCXN0cnVjdCBpbnRlbF9yaW5nICpyaW5n
ID0gY29udGFpbmVyX29mKHJlZiwgdHlwZW9mKCpyaW5nKSwgcmVmKTsKKworCWk5MTVfdm1hX3B1
dChyaW5nLT52bWEpOworCisJa2ZyZWUocmluZyk7Cit9CisKK3N0YXRpYyBub2lubGluZSBpbnQK
K3dhaXRfZm9yX3NwYWNlKHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nLAorCSAgICAgICBzdHJ1Y3Qg
aW50ZWxfdGltZWxpbmUgKnRsLAorCSAgICAgICB1bnNpZ25lZCBpbnQgYnl0ZXMpCit7CisJc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqdGFyZ2V0OworCWxvbmcgdGltZW91dDsKKworCWlmIChpbnRlbF9y
aW5nX3VwZGF0ZV9zcGFjZShyaW5nKSA+PSBieXRlcykKKwkJcmV0dXJuIDA7CisKKwlHRU1fQlVH
X09OKGxpc3RfZW1wdHkoJnRsLT5yZXF1ZXN0cykpOworCWxpc3RfZm9yX2VhY2hfZW50cnkodGFy
Z2V0LCAmdGwtPnJlcXVlc3RzLCBsaW5rKSB7CisJCWlmICh0YXJnZXQtPnJpbmcgIT0gcmluZykK
KwkJCWNvbnRpbnVlOworCisJCS8qIFdvdWxkIGNvbXBsZXRpb24gb2YgdGhpcyByZXF1ZXN0IGZy
ZWUgZW5vdWdoIHNwYWNlPyAqLworCQlpZiAoYnl0ZXMgPD0gX19pbnRlbF9yaW5nX3NwYWNlKHRh
cmdldC0+cG9zdGZpeCwKKwkJCQkJCXJpbmctPmVtaXQsIHJpbmctPnNpemUpKQorCQkJYnJlYWs7
CisJfQorCisJaWYgKEdFTV9XQVJOX09OKCZ0YXJnZXQtPmxpbmsgPT0gJnRsLT5yZXF1ZXN0cykp
CisJCXJldHVybiAtRU5PU1BDOworCisJdGltZW91dCA9IGk5MTVfcmVxdWVzdF93YWl0KHRhcmdl
dCwKKwkJCQkgICAgSTkxNV9XQUlUX0lOVEVSUlVQVElCTEUsCisJCQkJICAgIE1BWF9TQ0hFRFVM
RV9USU1FT1VUKTsKKwlpZiAodGltZW91dCA8IDApCisJCXJldHVybiB0aW1lb3V0OworCisJaTkx
NV9yZXF1ZXN0X3JldGlyZV91cHRvKHRhcmdldCk7CisKKwlpbnRlbF9yaW5nX3VwZGF0ZV9zcGFj
ZShyaW5nKTsKKwlHRU1fQlVHX09OKHJpbmctPnNwYWNlIDwgYnl0ZXMpOworCXJldHVybiAwOwor
fQorCit1MzIgKmludGVsX3JpbmdfYmVnaW4oc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsIHVuc2ln
bmVkIGludCBudW1fZHdvcmRzKQoreworCXN0cnVjdCBpbnRlbF9yaW5nICpyaW5nID0gcnEtPnJp
bmc7CisJY29uc3QgdW5zaWduZWQgaW50IHJlbWFpbl91c2FibGUgPSByaW5nLT5lZmZlY3RpdmVf
c2l6ZSAtIHJpbmctPmVtaXQ7CisJY29uc3QgdW5zaWduZWQgaW50IGJ5dGVzID0gbnVtX2R3b3Jk
cyAqIHNpemVvZih1MzIpOworCXVuc2lnbmVkIGludCBuZWVkX3dyYXAgPSAwOworCXVuc2lnbmVk
IGludCB0b3RhbF9ieXRlczsKKwl1MzIgKmNzOworCisJLyogUGFja2V0cyBtdXN0IGJlIHF3b3Jk
IGFsaWduZWQuICovCisJR0VNX0JVR19PTihudW1fZHdvcmRzICYgMSk7CisKKwl0b3RhbF9ieXRl
cyA9IGJ5dGVzICsgcnEtPnJlc2VydmVkX3NwYWNlOworCUdFTV9CVUdfT04odG90YWxfYnl0ZXMg
PiByaW5nLT5lZmZlY3RpdmVfc2l6ZSk7CisKKwlpZiAodW5saWtlbHkodG90YWxfYnl0ZXMgPiBy
ZW1haW5fdXNhYmxlKSkgeworCQljb25zdCBpbnQgcmVtYWluX2FjdHVhbCA9IHJpbmctPnNpemUg
LSByaW5nLT5lbWl0OworCisJCWlmIChieXRlcyA+IHJlbWFpbl91c2FibGUpIHsKKwkJCS8qCisJ
CQkgKiBOb3QgZW5vdWdoIHNwYWNlIGZvciB0aGUgYmFzaWMgcmVxdWVzdC4gU28gbmVlZCB0bwor
CQkJICogZmx1c2ggb3V0IHRoZSByZW1haW5kZXIgYW5kIHRoZW4gd2FpdCBmb3IKKwkJCSAqIGJh
c2UgKyByZXNlcnZlZC4KKwkJCSAqLworCQkJdG90YWxfYnl0ZXMgKz0gcmVtYWluX2FjdHVhbDsK
KwkJCW5lZWRfd3JhcCA9IHJlbWFpbl9hY3R1YWwgfCAxOworCQl9IGVsc2UgIHsKKwkJCS8qCisJ
CQkgKiBUaGUgYmFzZSByZXF1ZXN0IHdpbGwgZml0IGJ1dCB0aGUgcmVzZXJ2ZWQgc3BhY2UKKwkJ
CSAqIGZhbGxzIG9mZiB0aGUgZW5kLiBTbyB3ZSBkb24ndCBuZWVkIGFuIGltbWVkaWF0ZQorCQkJ
ICogd3JhcCBhbmQgb25seSBuZWVkIHRvIGVmZmVjdGl2ZWx5IHdhaXQgZm9yIHRoZQorCQkJICog
cmVzZXJ2ZWQgc2l6ZSBmcm9tIHRoZSBzdGFydCBvZiByaW5nYnVmZmVyLgorCQkJICovCisJCQl0
b3RhbF9ieXRlcyA9IHJxLT5yZXNlcnZlZF9zcGFjZSArIHJlbWFpbl9hY3R1YWw7CisJCX0KKwl9
CisKKwlpZiAodW5saWtlbHkodG90YWxfYnl0ZXMgPiByaW5nLT5zcGFjZSkpIHsKKwkJaW50IHJl
dDsKKworCQkvKgorCQkgKiBTcGFjZSBpcyByZXNlcnZlZCBpbiB0aGUgcmluZ2J1ZmZlciBmb3Ig
ZmluYWxpc2luZyB0aGUKKwkJICogcmVxdWVzdCwgYXMgdGhhdCBjYW5ub3QgYmUgYWxsb3dlZCB0
byBmYWlsLiBEdXJpbmcgcmVxdWVzdAorCQkgKiBmaW5hbGlzYXRpb24sIHJlc2VydmVkX3NwYWNl
IGlzIHNldCB0byAwIHRvIHN0b3AgdGhlCisJCSAqIG92ZXJhbGxvY2F0aW9uIGFuZCB0aGUgYXNz
dW1wdGlvbiBpcyB0aGF0IHRoZW4gd2UgbmV2ZXIgbmVlZAorCQkgKiB0byB3YWl0ICh3aGljaCBo
YXMgdGhlIHJpc2sgb2YgZmFpbGluZyB3aXRoIEVJTlRSKS4KKwkJICoKKwkJICogU2VlIGFsc28g
aTkxNV9yZXF1ZXN0X2FsbG9jKCkgYW5kIGk5MTVfcmVxdWVzdF9hZGQoKS4KKwkJICovCisJCUdF
TV9CVUdfT04oIXJxLT5yZXNlcnZlZF9zcGFjZSk7CisKKwkJcmV0ID0gd2FpdF9mb3Jfc3BhY2Uo
cmluZywgcnEtPnRpbWVsaW5lLCB0b3RhbF9ieXRlcyk7CisJCWlmICh1bmxpa2VseShyZXQpKQor
CQkJcmV0dXJuIEVSUl9QVFIocmV0KTsKKwl9CisKKwlpZiAodW5saWtlbHkobmVlZF93cmFwKSkg
eworCQluZWVkX3dyYXAgJj0gfjE7CisJCUdFTV9CVUdfT04obmVlZF93cmFwID4gcmluZy0+c3Bh
Y2UpOworCQlHRU1fQlVHX09OKHJpbmctPmVtaXQgKyBuZWVkX3dyYXAgPiByaW5nLT5zaXplKTsK
KwkJR0VNX0JVR19PTighSVNfQUxJR05FRChuZWVkX3dyYXAsIHNpemVvZih1NjQpKSk7CisKKwkJ
LyogRmlsbCB0aGUgdGFpbCB3aXRoIE1JX05PT1AgKi8KKwkJbWVtc2V0NjQocmluZy0+dmFkZHIg
KyByaW5nLT5lbWl0LCAwLCBuZWVkX3dyYXAgLyBzaXplb2YodTY0KSk7CisJCXJpbmctPnNwYWNl
IC09IG5lZWRfd3JhcDsKKwkJcmluZy0+ZW1pdCA9IDA7CisJfQorCisJR0VNX0JVR19PTihyaW5n
LT5lbWl0ID4gcmluZy0+c2l6ZSAtIGJ5dGVzKTsKKwlHRU1fQlVHX09OKHJpbmctPnNwYWNlIDwg
Ynl0ZXMpOworCWNzID0gcmluZy0+dmFkZHIgKyByaW5nLT5lbWl0OworCUdFTV9ERUJVR19FWEVD
KG1lbXNldDMyKGNzLCBQT0lTT05fSU5VU0UsIGJ5dGVzIC8gc2l6ZW9mKCpjcykpKTsKKwlyaW5n
LT5lbWl0ICs9IGJ5dGVzOworCXJpbmctPnNwYWNlIC09IGJ5dGVzOworCisJcmV0dXJuIGNzOwor
fQorCisvKiBBbGlnbiB0aGUgcmluZyB0YWlsIHRvIGEgY2FjaGVsaW5lIGJvdW5kYXJ5ICovCitp
bnQgaW50ZWxfcmluZ19jYWNoZWxpbmVfYWxpZ24oc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEpCit7
CisJaW50IG51bV9kd29yZHM7CisJdm9pZCAqY3M7CisKKwludW1fZHdvcmRzID0gKHJxLT5yaW5n
LT5lbWl0ICYgKENBQ0hFTElORV9CWVRFUyAtIDEpKSAvIHNpemVvZih1MzIpOworCWlmIChudW1f
ZHdvcmRzID09IDApCisJCXJldHVybiAwOworCisJbnVtX2R3b3JkcyA9IENBQ0hFTElORV9EV09S
RFMgLSBudW1fZHdvcmRzOworCUdFTV9CVUdfT04obnVtX2R3b3JkcyAmIDEpOworCisJY3MgPSBp
bnRlbF9yaW5nX2JlZ2luKHJxLCBudW1fZHdvcmRzKTsKKwlpZiAoSVNfRVJSKGNzKSkKKwkJcmV0
dXJuIFBUUl9FUlIoY3MpOworCisJbWVtc2V0NjQoY3MsICh1NjQpTUlfTk9PUCA8PCAzMiB8IE1J
X05PT1AsIG51bV9kd29yZHMgLyAyKTsKKwlpbnRlbF9yaW5nX2FkdmFuY2UocnEsIGNzICsgbnVt
X2R3b3Jkcyk7CisKKwlHRU1fQlVHX09OKHJxLT5yaW5nLT5lbWl0ICYgKENBQ0hFTElORV9CWVRF
UyAtIDEpKTsKKwlyZXR1cm4gMDsKK30KKwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfcmluZy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZy5o
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uZWEyODM5ZDllMDQ0Ci0t
LSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZy5oCkBA
IC0wLDAgKzEsMTMxIEBACisvKgorICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVAorICoK
KyAqIENvcHlyaWdodCDCqSAyMDE5IEludGVsIENvcnBvcmF0aW9uCisgKi8KKworI2lmbmRlZiBJ
TlRFTF9SSU5HX0gKKyNkZWZpbmUgSU5URUxfUklOR19ICisKKyNpbmNsdWRlICJpOTE1X2dlbS5o
IiAvKiBHRU1fQlVHX09OICovCisjaW5jbHVkZSAiaTkxNV9yZXF1ZXN0LmgiCisjaW5jbHVkZSAi
aW50ZWxfcmluZ190eXBlcy5oIgorCitzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzOworCitzdHJ1Y3Qg
aW50ZWxfcmluZyAqCitpbnRlbF9lbmdpbmVfY3JlYXRlX3Jpbmcoc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lLCBpbnQgc2l6ZSk7CisKK3UzMiAqaW50ZWxfcmluZ19iZWdpbihzdHJ1Y3Qg
aTkxNV9yZXF1ZXN0ICpycSwgdW5zaWduZWQgaW50IG51bV9kd29yZHMpOworaW50IGludGVsX3Jp
bmdfY2FjaGVsaW5lX2FsaWduKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKTsKKwordW5zaWduZWQg
aW50IGludGVsX3JpbmdfdXBkYXRlX3NwYWNlKHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nKTsKKwor
aW50IGludGVsX3JpbmdfcGluKHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nKTsKK3ZvaWQgaW50ZWxf
cmluZ191bnBpbihzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZyk7Cit2b2lkIGludGVsX3JpbmdfcmVz
ZXQoc3RydWN0IGludGVsX3JpbmcgKnJpbmcsIHUzMiB0YWlsKTsKKwordm9pZCBpbnRlbF9yaW5n
X2ZyZWUoc3RydWN0IGtyZWYgKnJlZik7CisKK3N0YXRpYyBpbmxpbmUgc3RydWN0IGludGVsX3Jp
bmcgKmludGVsX3JpbmdfZ2V0KHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nKQoreworCWtyZWZfZ2V0
KCZyaW5nLT5yZWYpOworCXJldHVybiByaW5nOworfQorCitzdGF0aWMgaW5saW5lIHZvaWQgaW50
ZWxfcmluZ19wdXQoc3RydWN0IGludGVsX3JpbmcgKnJpbmcpCit7CisJa3JlZl9wdXQoJnJpbmct
PnJlZiwgaW50ZWxfcmluZ19mcmVlKTsKK30KKworc3RhdGljIGlubGluZSB2b2lkIGludGVsX3Jp
bmdfYWR2YW5jZShzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgdTMyICpjcykKK3sKKwkvKiBEdW1t
eSBmdW5jdGlvbi4KKwkgKgorCSAqIFRoaXMgc2VydmVzIGFzIGEgcGxhY2Vob2xkZXIgaW4gdGhl
IGNvZGUgc28gdGhhdCB0aGUgcmVhZGVyCisJICogY2FuIGNvbXBhcmUgYWdhaW5zdCB0aGUgcHJl
Y2VkaW5nIGludGVsX3JpbmdfYmVnaW4oKSBhbmQKKwkgKiBjaGVjayB0aGF0IHRoZSBudW1iZXIg
b2YgZHdvcmRzIGVtaXR0ZWQgbWF0Y2hlcyB0aGUgc3BhY2UKKwkgKiByZXNlcnZlZCBmb3IgdGhl
IGNvbW1hbmQgcGFja2V0IChpLmUuIHRoZSB2YWx1ZSBwYXNzZWQgdG8KKwkgKiBpbnRlbF9yaW5n
X2JlZ2luKCkpLgorCSAqLworCUdFTV9CVUdfT04oKHJxLT5yaW5nLT52YWRkciArIHJxLT5yaW5n
LT5lbWl0KSAhPSBjcyk7Cit9CisKK3N0YXRpYyBpbmxpbmUgdTMyIGludGVsX3Jpbmdfd3JhcChj
b25zdCBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZywgdTMyIHBvcykKK3sKKwlyZXR1cm4gcG9zICYg
KHJpbmctPnNpemUgLSAxKTsKK30KKworc3RhdGljIGlubGluZSBib29sCitpbnRlbF9yaW5nX29m
ZnNldF92YWxpZChjb25zdCBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZywKKwkJCXVuc2lnbmVkIGlu
dCBwb3MpCit7CisJaWYgKHBvcyAmIC1yaW5nLT5zaXplKSAvKiBtdXN0IGJlIHN0cmljdGx5IHdp
dGhpbiB0aGUgcmluZyAqLworCQlyZXR1cm4gZmFsc2U7CisKKwlpZiAoIUlTX0FMSUdORUQocG9z
LCA4KSkgLyogbXVzdCBiZSBxd29yZCBhbGlnbmVkICovCisJCXJldHVybiBmYWxzZTsKKworCXJl
dHVybiB0cnVlOworfQorCitzdGF0aWMgaW5saW5lIHUzMiBpbnRlbF9yaW5nX29mZnNldChjb25z
dCBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgdm9pZCAqYWRkcikKK3sKKwkvKiBEb24ndCB3cml0
ZSByaW5nLT5zaXplIChlcXVpdmFsZW50IHRvIDApIGFzIHRoYXQgaGFuZ3Mgc29tZSBHUFVzLiAq
LworCXUzMiBvZmZzZXQgPSBhZGRyIC0gcnEtPnJpbmctPnZhZGRyOworCUdFTV9CVUdfT04ob2Zm
c2V0ID4gcnEtPnJpbmctPnNpemUpOworCXJldHVybiBpbnRlbF9yaW5nX3dyYXAocnEtPnJpbmcs
IG9mZnNldCk7Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9pZAorYXNzZXJ0X3JpbmdfdGFpbF92YWxp
ZChjb25zdCBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZywgdW5zaWduZWQgaW50IHRhaWwpCit7CisJ
R0VNX0JVR19PTighaW50ZWxfcmluZ19vZmZzZXRfdmFsaWQocmluZywgdGFpbCkpOworCisJLyoK
KwkgKiAiUmluZyBCdWZmZXIgVXNlIgorCSAqCUdlbjIgQlNwZWMgIjEuIFByb2dyYW1taW5nIEVu
dmlyb25tZW50IiAvIDEuNC40LjYKKwkgKglHZW4zIEJTcGVjICIxYyBNZW1vcnkgSW50ZXJmYWNl
IEZ1bmN0aW9ucyIgLyAyLjMuNC41CisJICoJR2VuNCsgQlNwZWMgIjFjIE1lbW9yeSBJbnRlcmZh
Y2UgYW5kIENvbW1hbmQgU3RyZWFtIiAvIDUuMy40LjUKKwkgKiAiSWYgdGhlIFJpbmcgQnVmZmVy
IEhlYWQgUG9pbnRlciBhbmQgdGhlIFRhaWwgUG9pbnRlciBhcmUgb24gdGhlCisJICogc2FtZSBj
YWNoZWxpbmUsIHRoZSBIZWFkIFBvaW50ZXIgbXVzdCBub3QgYmUgZ3JlYXRlciB0aGFuIHRoZSBU
YWlsCisJICogUG9pbnRlci4iCisJICoKKwkgKiBXZSB1c2UgcmluZy0+aGVhZCBhcyB0aGUgbGFz
dCBrbm93biBsb2NhdGlvbiBvZiB0aGUgYWN0dWFsIFJJTkdfSEVBRCwKKwkgKiBpdCBtYXkgaGF2
ZSBhZHZhbmNlZCBidXQgaW4gdGhlIHdvcnN0IGNhc2UgaXQgaXMgZXF1YWxseSB0aGUgc2FtZQor
CSAqIGFzIHJpbmctPmhlYWQgYW5kIHNvIHdlIHNob3VsZCBuZXZlciBwcm9ncmFtIFJJTkdfVEFJ
TCB0byBhZHZhbmNlCisJICogaW50byB0aGUgc2FtZSBjYWNoZWxpbmUgYXMgcmluZy0+aGVhZC4K
KwkgKi8KKyNkZWZpbmUgY2FjaGVsaW5lKGEpIHJvdW5kX2Rvd24oYSwgQ0FDSEVMSU5FX0JZVEVT
KQorCUdFTV9CVUdfT04oY2FjaGVsaW5lKHRhaWwpID09IGNhY2hlbGluZShyaW5nLT5oZWFkKSAm
JgorCQkgICB0YWlsIDwgcmluZy0+aGVhZCk7CisjdW5kZWYgY2FjaGVsaW5lCit9CisKK3N0YXRp
YyBpbmxpbmUgdW5zaWduZWQgaW50CitpbnRlbF9yaW5nX3NldF90YWlsKHN0cnVjdCBpbnRlbF9y
aW5nICpyaW5nLCB1bnNpZ25lZCBpbnQgdGFpbCkKK3sKKwkvKiBXaGlsc3Qgd3JpdGVzIHRvIHRo
ZSB0YWlsIGFyZSBzdHJpY3RseSBvcmRlciwgdGhlcmUgaXMgbm8KKwkgKiBzZXJpYWxpc2F0aW9u
IGJldHdlZW4gcmVhZGVycyBhbmQgdGhlIHdyaXRlcnMuIFRoZSB0YWlsIG1heSBiZQorCSAqIHJl
YWQgYnkgaTkxNV9yZXF1ZXN0X3JldGlyZSgpIGp1c3QgYXMgaXQgaXMgYmVpbmcgdXBkYXRlZAor
CSAqIGJ5IGV4ZWNsaXN0cywgYXMgYWx0aG91Z2ggdGhlIGJyZWFkY3J1bWIgaXMgY29tcGxldGUs
IHRoZSBjb250ZXh0CisJICogc3dpdGNoIGhhc24ndCBiZWVuIHNlZW4uCisJICovCisJYXNzZXJ0
X3JpbmdfdGFpbF92YWxpZChyaW5nLCB0YWlsKTsKKwlyaW5nLT50YWlsID0gdGFpbDsKKwlyZXR1
cm4gdGFpbDsKK30KKworc3RhdGljIGlubGluZSB1bnNpZ25lZCBpbnQKK19faW50ZWxfcmluZ19z
cGFjZSh1bnNpZ25lZCBpbnQgaGVhZCwgdW5zaWduZWQgaW50IHRhaWwsIHVuc2lnbmVkIGludCBz
aXplKQoreworCS8qCisJICogIklmIHRoZSBSaW5nIEJ1ZmZlciBIZWFkIFBvaW50ZXIgYW5kIHRo
ZSBUYWlsIFBvaW50ZXIgYXJlIG9uIHRoZQorCSAqIHNhbWUgY2FjaGVsaW5lLCB0aGUgSGVhZCBQ
b2ludGVyIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiB0aGUgVGFpbAorCSAqIFBvaW50ZXIuIgor
CSAqLworCUdFTV9CVUdfT04oIWlzX3Bvd2VyX29mXzIoc2l6ZSkpOworCXJldHVybiAoaGVhZCAt
IHRhaWwgLSBDQUNIRUxJTkVfQllURVMpICYgKHNpemUgLSAxKTsKK30KKworI2VuZGlmIC8qIElO
VEVMX1JJTkdfSCAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
dGltZWxpbmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3RpbWVsaW5lLmMKaW5k
ZXggMGY5NTk2OTQzMDNjLi4xNGFkMTBhY2Q1NDggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX3RpbWVsaW5lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfdGltZWxpbmUuYwpAQCAtNCwxMyArNCwxMyBAQAogICogQ29weXJpZ2h0IMKpIDIwMTYt
MjAxOCBJbnRlbCBDb3Jwb3JhdGlvbgogICovCiAKLSNpbmNsdWRlICJndC9pbnRlbF9ndF90eXBl
cy5oIgotCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKIAogI2luY2x1ZGUgImk5MTVfYWN0aXZlLmgi
CiAjaW5jbHVkZSAiaTkxNV9zeW5jbWFwLmgiCi0jaW5jbHVkZSAiZ3QvaW50ZWxfdGltZWxpbmUu
aCIKKyNpbmNsdWRlICJpbnRlbF9ndC5oIgorI2luY2x1ZGUgImludGVsX3JpbmcuaCIKKyNpbmNs
dWRlICJpbnRlbF90aW1lbGluZS5oIgogCiAjZGVmaW5lIHB0cl9zZXRfYml0KHB0ciwgYml0KSAo
KHR5cGVvZihwdHIpKSgodW5zaWduZWQgbG9uZykocHRyKSB8IEJJVChiaXQpKSkKICNkZWZpbmUg
cHRyX3Rlc3RfYml0KHB0ciwgYml0KSAoKHVuc2lnbmVkIGxvbmcpKHB0cikgJiBCSVQoYml0KSkK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jCmluZGV4IGFmOGE4
MTgzMTU0YS4uN2NiNmRhYjQzOTlkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF93b3JrYXJvdW5kcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X3dvcmthcm91bmRzLmMKQEAgLTcsNiArNyw3IEBACiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNp
bmNsdWRlICJpbnRlbF9jb250ZXh0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3QuaCIKKyNpbmNsdWRl
ICJpbnRlbF9yaW5nLmgiCiAjaW5jbHVkZSAiaW50ZWxfd29ya2Fyb3VuZHMuaCIKIAogLyoqCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9tb2NrX2VuZ2luZS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvbW9ja19lbmdpbmUuYwppbmRleCAxMjNkYjJjM2Y5NTYuLjgzZjU0
OWQyMDNhMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvbW9ja19lbmdpbmUu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9tb2NrX2VuZ2luZS5jCkBAIC0yMyw2ICsy
Myw3IEBACiAgKi8KIAogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9jb250ZXh0LmgiCisjaW5jbHVk
ZSAiZ3QvaW50ZWxfcmluZy5oIgogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJp
bnRlbF9jb250ZXh0LmgiCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxm
dGVzdF90aW1lbGluZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfdGltZWxp
bmUuYwppbmRleCBkYWM4NmY2OTlhNGMuLmYwNGE1OWZlNWQyYyAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfdGltZWxpbmUuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9zZWxmdGVzdF90aW1lbGluZS5jCkBAIC05LDYgKzksNyBAQAogI2luY2x1ZGUg
ImludGVsX2VuZ2luZV9wbS5oIgogI2luY2x1ZGUgImludGVsX2d0LmgiCiAjaW5jbHVkZSAiaW50
ZWxfZ3RfcmVxdWVzdHMuaCIKKyNpbmNsdWRlICJpbnRlbF9yaW5nLmgiCiAKICNpbmNsdWRlICIu
Li9zZWxmdGVzdHMvaTkxNV9yYW5kb20uaCIKICNpbmNsdWRlICIuLi9pOTE1X3NlbGZ0ZXN0Lmgi
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfc3VibWlz
c2lvbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Npb24u
YwppbmRleCAwMDllNTRhMzc2NGYuLjFiMTY5MWFhZWQyOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfc3VibWlzc2lvbi5jCkBAIC02LDEyICs2LDEzIEBA
CiAjaW5jbHVkZSA8bGludXgvY2lyY19idWYuaD4KIAogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9j
b250ZXh0LmgiCi0KICNpbmNsdWRlICJndC9pbnRlbF9jb250ZXh0LmgiCiAjaW5jbHVkZSAiZ3Qv
aW50ZWxfZW5naW5lX3BtLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJn
dC9pbnRlbF9ndF9wbS5oIgogI2luY2x1ZGUgImd0L2ludGVsX2xyY19yZWcuaCIKKyNpbmNsdWRl
ICJndC9pbnRlbF9yaW5nLmgiCisKICNpbmNsdWRlICJpbnRlbF9ndWNfc3VibWlzc2lvbi5oIgog
CiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d2dC9jbWRfcGFyc2VyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvY21kX3BhcnNlci5j
CmluZGV4IGU3NTNiMWU3MDZlMi4uNmEzYWM4Y2RlOTVkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndnQvY21kX3BhcnNlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2
dC9jbWRfcGFyc2VyLmMKQEAgLTM1LDcgKzM1LDkgQEAKICAqLwogCiAjaW5jbHVkZSA8bGludXgv
c2xhYi5oPgorCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKKyNpbmNsdWRlICJndC9pbnRlbF9yaW5n
LmgiCiAjaW5jbHVkZSAiZ3Z0LmgiCiAjaW5jbHVkZSAiaTkxNV9wdmluZm8uaCIKICNpbmNsdWRl
ICJ0cmFjZS5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L21taW9fY29u
dGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L21taW9fY29udGV4dC5jCmluZGV4IDQy
MDhlNDA0NDViMS4uYWFmMTU5MTZkMjlhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndnQvbW1pb19jb250ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L21taW9f
Y29udGV4dC5jCkBAIC0zNSw2ICszNSw3IEBACiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2lu
Y2x1ZGUgImd0L2ludGVsX2NvbnRleHQuaCIKKyNpbmNsdWRlICJndC9pbnRlbF9yaW5nLmgiCiAj
aW5jbHVkZSAiZ3Z0LmgiCiAjaW5jbHVkZSAidHJhY2UuaCIKIApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Z0L3NjaGVkdWxlci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0
L3NjaGVkdWxlci5jCmluZGV4IGE1Yjk0MmVlM2NlYi4uMzc3ODExZjg4NTNmIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvc2NoZWR1bGVyLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3Z0L3NjaGVkdWxlci5jCkBAIC0zOCw2ICszOCw3IEBACiAjaW5jbHVkZSAiZ2Vt
L2k5MTVfZ2VtX2NvbnRleHQuaCIKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1fcG0uaCIKICNpbmNs
dWRlICJndC9pbnRlbF9jb250ZXh0LmgiCisjaW5jbHVkZSAiZ3QvaW50ZWxfcmluZy5oIgogCiAj
aW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJndnQuaCIKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfYWN0aXZlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2FjdGl2ZS5jCmluZGV4IDRjMTkwYTU0OGJhNy4uM2UzNDk1ODM4YTkzIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2FjdGl2ZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfYWN0aXZlLmMKQEAgLTgsNiArOCw3IEBACiAKICNpbmNsdWRlICJndC9pbnRlbF9l
bmdpbmVfaGVhcnRiZWF0LmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3BtLmgiCisjaW5j
bHVkZSAiZ3QvaW50ZWxfcmluZy5oIgogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRl
ICJpOTE1X2FjdGl2ZS5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9w
ZXJmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwppbmRleCAzMTMwYjBjN2Vk
ODMuLjM4ZDNkZTJkZmFhNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9w
ZXJmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKQEAgLTIwMCw2ICsy
MDAsNyBAQAogI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV91c2VyLmgiCiAjaW5jbHVkZSAiZ3Qv
aW50ZWxfZ3QuaCIKICNpbmNsdWRlICJndC9pbnRlbF9scmNfcmVnLmgiCisjaW5jbHVkZSAiZ3Qv
aW50ZWxfcmluZy5oIgogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJpOTE1X3Bl
cmYuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMKaW5kZXggNDU3NWYzNjg0NTVkLi45
MzJjNWNmMTkwYjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVz
dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jCkBAIC0zMSw2ICsz
MSw3IEBACiAKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1fY29udGV4dC5oIgogI2luY2x1ZGUgImd0
L2ludGVsX2NvbnRleHQuaCIKKyNpbmNsdWRlICJndC9pbnRlbF9yaW5nLmgiCiAKICNpbmNsdWRl
ICJpOTE1X2FjdGl2ZS5oIgogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCi0tIAoyLjI0LjAucmMwCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

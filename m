Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5E8BC109F6C
	for <lists+intel-gfx@lfdr.de>; Tue, 26 Nov 2019 14:43:53 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 981626E3D0;
	Tue, 26 Nov 2019 13:43:51 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 20E646E3D0
 for <intel-gfx@lists.freedesktop.org>; Tue, 26 Nov 2019 13:43:50 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by fmsmga105.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Nov 2019 05:43:49 -0800
X-IronPort-AV: E=Sophos;i="5.69,245,1571727600"; d="scan'208";a="409980509"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by fmsmga006-auth.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Nov 2019 05:43:47 -0800
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 26 Nov 2019 15:42:45 +0200
Message-Id: <665dbd42cb61301ad9e758ddacad6d07c54c5986.1574775655.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1574775655.git.jani.nikula@intel.com>
References: <cover.1574775655.git.jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH v3 10/13] drm/i915/dsi: take compression into
 account in afe_clk()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UGFzcyBjcnRjX3N0YXRlIHRvIGFmZV9jbGsoKSB0byBiZSBhYmxlIHRvIHRha2UgY29tcHJlc3Np
b24gaW50byBhY2NvdW50CmluIHRoZSBjb21wdXRhdGlvbi4gT25jZSB3ZSBlbmFibGUgY29tcHJl
c3Npb24sIHRoYXQgaXMuCgpDYzogVmFuZGl0YSBLdWxrYXJuaSA8dmFuZGl0YS5rdWxrYXJuaUBp
bnRlbC5jb20+CkNjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwu
Y29tPgpTaWduZWQtb2ZmLWJ5OiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1bGFAaW50ZWwuY29tPgot
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jIHwgNDAgKysrKysrKysr
KysrKysrLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAyNCBpbnNlcnRpb25zKCspLCAxNiBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lj
bF9kc2kuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jCmluZGV4IGQ1
NzZmMjljZWY3NS4uNTE0OWEyOGE4NzRiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ljbF9kc2kuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lj
bF9kc2kuYwpAQCAtMzAyLDE3ICszMDIsMjIgQEAgc3RhdGljIHZvaWQgY29uZmlndXJlX2R1YWxf
bGlua19tb2RlKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogfQogCiAvKiBha2EgRFNJ
IDhYIGNsb2NrICovCi1zdGF0aWMgaW50IGFmZV9jbGsoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIpCitzdGF0aWMgaW50IGFmZV9jbGsoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIs
CisJCSAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogewogCXN0
cnVjdCBpbnRlbF9kc2kgKmludGVsX2RzaSA9IGVuY190b19pbnRlbF9kc2koJmVuY29kZXItPmJh
c2UpOwogCWludCBicHA7CiAKLQlicHAgPSBtaXBpX2RzaV9waXhlbF9mb3JtYXRfdG9fYnBwKGlu
dGVsX2RzaS0+cGl4ZWxfZm9ybWF0KTsKKwlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmNvbXByZXNzaW9u
X2VuYWJsZSkKKwkJYnBwID0gY3J0Y19zdGF0ZS0+ZHNjLmNvbXByZXNzZWRfYnBwOworCWVsc2UK
KwkJYnBwID0gbWlwaV9kc2lfcGl4ZWxfZm9ybWF0X3RvX2JwcChpbnRlbF9kc2ktPnBpeGVsX2Zv
cm1hdCk7CiAKIAlyZXR1cm4gRElWX1JPVU5EX0NMT1NFU1QoaW50ZWxfZHNpLT5wY2xrICogYnBw
LCBpbnRlbF9kc2ktPmxhbmVfY291bnQpOwogfQogCi1zdGF0aWMgdm9pZCBnZW4xMV9kc2lfcHJv
Z3JhbV9lc2NfY2xrX2RpdihzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikKK3N0YXRpYyB2
b2lkIGdlbjExX2RzaV9wcm9ncmFtX2VzY19jbGtfZGl2KHN0cnVjdCBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyLAorCQkJCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
KQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rl
ci0+YmFzZS5kZXYpOwogCXN0cnVjdCBpbnRlbF9kc2kgKmludGVsX2RzaSA9IGVuY190b19pbnRl
bF9kc2koJmVuY29kZXItPmJhc2UpOwpAQCAtMzIwLDcgKzMyNSw3IEBAIHN0YXRpYyB2b2lkIGdl
bjExX2RzaV9wcm9ncmFtX2VzY19jbGtfZGl2KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVy
KQogCWludCBhZmVfY2xrX2toejsKIAl1MzIgZXNjX2Nsa19kaXZfbTsKIAotCWFmZV9jbGtfa2h6
ID0gYWZlX2NsayhlbmNvZGVyKTsKKwlhZmVfY2xrX2toeiA9IGFmZV9jbGsoZW5jb2RlciwgY3J0
Y19zdGF0ZSk7CiAJZXNjX2Nsa19kaXZfbSA9IERJVl9ST1VORF9VUChhZmVfY2xrX2toeiwgRFNJ
X01BWF9FU0NfQ0xLKTsKIAogCWZvcl9lYWNoX2RzaV9wb3J0KHBvcnQsIGludGVsX2RzaS0+cG9y
dHMpIHsKQEAgLTQ5OCw3ICs1MDMsOSBAQCBzdGF0aWMgdm9pZCBnZW4xMV9kc2lfZW5hYmxlX2Rk
aV9idWZmZXIoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIpCiAJfQogfQogCi1zdGF0aWMg
dm9pZCBnZW4xMV9kc2lfc2V0dXBfZHBoeV90aW1pbmdzKHN0cnVjdCBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyKQorc3RhdGljIHZvaWQKK2dlbjExX2RzaV9zZXR1cF9kcGh5X3RpbWluZ3Moc3RydWN0
IGludGVsX2VuY29kZXIgKmVuY29kZXIsCisJCQkgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRj
X3N0YXRlICpjcnRjX3N0YXRlKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
diA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOwogCXN0cnVjdCBpbnRlbF9kc2kgKmludGVs
X2RzaSA9IGVuY190b19pbnRlbF9kc2koJmVuY29kZXItPmJhc2UpOwpAQCAtNTM5LDcgKzU0Niw3
IEBAIHN0YXRpYyB2b2lkIGdlbjExX2RzaV9zZXR1cF9kcGh5X3RpbWluZ3Moc3RydWN0IGludGVs
X2VuY29kZXIgKmVuY29kZXIpCiAJICogbGVhdmUgYWxsIGZpZWxkcyBhdCBIVyBkZWZhdWx0IHZh
bHVlcy4KIAkgKi8KIAlpZiAoSVNfR0VOKGRldl9wcml2LCAxMSkpIHsKLQkJaWYgKGFmZV9jbGso
ZW5jb2RlcikgPD0gODAwMDAwKSB7CisJCWlmIChhZmVfY2xrKGVuY29kZXIsIGNydGNfc3RhdGUp
IDw9IDgwMDAwMCkgewogCQkJZm9yX2VhY2hfZHNpX3BvcnQocG9ydCwgaW50ZWxfZHNpLT5wb3J0
cykgewogCQkJCXRtcCA9IEk5MTVfUkVBRChEUEhZX1RBX1RJTUlOR19QQVJBTShwb3J0KSk7CiAJ
CQkJdG1wICY9IH5UQV9TVVJFX01BU0s7CkBAIC02NDksNyArNjU2LDcgQEAgZ2VuMTFfZHNpX2Nv
bmZpZ3VyZV90cmFuc2NvZGVyKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkJdG1w
IHw9IEVPVFBfRElTQUJMRUQ7CiAKIAkJLyogZW5hYmxlIGxpbmsgY2FsaWJyYXRpb24gaWYgZnJl
cSA+IDEuNUdicHMgKi8KLQkJaWYgKGFmZV9jbGsoZW5jb2RlcikgPj0gMTUwMCAqIDEwMDApIHsK
KwkJaWYgKGFmZV9jbGsoZW5jb2RlciwgcGlwZV9jb25maWcpID49IDE1MDAgKiAxMDAwKSB7CiAJ
CQl0bXAgJj0gfkxJTktfQ0FMSUJSQVRJT05fTUFTSzsKIAkJCXRtcCB8PSBDQUxJQlJBVElPTl9F
TkFCTEVEX0lOSVRJQUxfT05MWTsKIAkJfQpAQCAtOTE1LDcgKzkyMiw4IEBAIHN0YXRpYyB2b2lk
IGdlbjExX2RzaV9lbmFibGVfdHJhbnNjb2RlcihzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2Rl
cikKIAl9CiB9CiAKLXN0YXRpYyB2b2lkIGdlbjExX2RzaV9zZXR1cF90aW1lb3V0cyhzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlcikKK3N0YXRpYyB2b2lkIGdlbjExX2RzaV9zZXR1cF90aW1l
b3V0cyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKKwkJCQkgICAgIGNvbnN0IHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOwogCXN0cnVjdCBpbnRl
bF9kc2kgKmludGVsX2RzaSA9IGVuY190b19pbnRlbF9kc2koJmVuY29kZXItPmJhc2UpOwpAQCAt
OTMwLDcgKzkzOCw3IEBAIHN0YXRpYyB2b2lkIGdlbjExX2RzaV9zZXR1cF90aW1lb3V0cyhzdHJ1
Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikKIAkgKiBUSU1FX05TID0gKEJZVEVfQ0xLX0NPVU5U
ICogOCAqIDEwXjYpLyBCaXRyYXRlCiAJICogRVNDQVBFX0NMS19DT1VOVCAgPSBUSU1FX05TL0VT
Q19DTEtfTlMKIAkgKi8KLQlkaXZpc29yID0gaW50ZWxfZHNpX3RscHhfbnMoaW50ZWxfZHNpKSAq
IGFmZV9jbGsoZW5jb2RlcikgKiAxMDAwOworCWRpdmlzb3IgPSBpbnRlbF9kc2lfdGxweF9ucyhp
bnRlbF9kc2kpICogYWZlX2NsayhlbmNvZGVyLCBjcnRjX3N0YXRlKSAqIDEwMDA7CiAJbXVsID0g
OCAqIDEwMDAwMDA7CiAJaHNfdHhfdGltZW91dCA9IERJVl9ST1VORF9VUChpbnRlbF9kc2ktPmhz
X3R4X3RpbWVvdXQgKiBtdWwsCiAJCQkJICAgICBkaXZpc29yKTsKQEAgLTk2Niw3ICs5NzQsNyBA
QCBzdGF0aWMgdm9pZCBnZW4xMV9kc2lfc2V0dXBfdGltZW91dHMoc3RydWN0IGludGVsX2VuY29k
ZXIgKmVuY29kZXIpCiAKIHN0YXRpYyB2b2lkCiBnZW4xMV9kc2lfZW5hYmxlX3BvcnRfYW5kX3Bo
eShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKLQkJCSAgICAgIGNvbnN0IHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZykKKwkJCSAgICAgIGNvbnN0IHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOwogCkBAIC05ODMsMTMgKzk5MSwx
MyBAQCBnZW4xMV9kc2lfZW5hYmxlX3BvcnRfYW5kX3BoeShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAq
ZW5jb2RlciwKIAlnZW4xMV9kc2lfZW5hYmxlX2RkaV9idWZmZXIoZW5jb2Rlcik7CiAKIAkvKiBz
ZXR1cCBELVBIWSB0aW1pbmdzICovCi0JZ2VuMTFfZHNpX3NldHVwX2RwaHlfdGltaW5ncyhlbmNv
ZGVyKTsKKwlnZW4xMV9kc2lfc2V0dXBfZHBoeV90aW1pbmdzKGVuY29kZXIsIGNydGNfc3RhdGUp
OwogCiAJLyogc3RlcCA0aDogc2V0dXAgRFNJIHByb3RvY29sIHRpbWVvdXRzICovCi0JZ2VuMTFf
ZHNpX3NldHVwX3RpbWVvdXRzKGVuY29kZXIpOworCWdlbjExX2RzaV9zZXR1cF90aW1lb3V0cyhl
bmNvZGVyLCBjcnRjX3N0YXRlKTsKIAogCS8qIFN0ZXAgKDRoLCA0aSwgNGosIDRrKTogQ29uZmln
dXJlIHRyYW5zY29kZXIgKi8KLQlnZW4xMV9kc2lfY29uZmlndXJlX3RyYW5zY29kZXIoZW5jb2Rl
ciwgcGlwZV9jb25maWcpOworCWdlbjExX2RzaV9jb25maWd1cmVfdHJhbnNjb2RlcihlbmNvZGVy
LCBjcnRjX3N0YXRlKTsKIAogCS8qIFN0ZXAgNGw6IEdhdGUgRERJIGNsb2NrcyAqLwogCWlmIChJ
U19HRU4oZGV2X3ByaXYsIDExKSkKQEAgLTEwMzYsMTQgKzEwNDQsMTQgQEAgc3RhdGljIHZvaWQg
Z2VuMTFfZHNpX3Bvd2VydXBfcGFuZWwoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIpCiB9
CiAKIHN0YXRpYyB2b2lkIGdlbjExX2RzaV9wcmVfcGxsX2VuYWJsZShzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqZW5jb2RlciwKLQkJCQkgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpw
aXBlX2NvbmZpZywKKwkJCQkgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlLAogCQkJCSAgICAgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5f
c3RhdGUpCiB7CiAJLyogc3RlcDI6IGVuYWJsZSBJTyBwb3dlciAqLwogCWdlbjExX2RzaV9lbmFi
bGVfaW9fcG93ZXIoZW5jb2Rlcik7CiAKIAkvKiBzdGVwMzogZW5hYmxlIERTSSBQTEwgKi8KLQln
ZW4xMV9kc2lfcHJvZ3JhbV9lc2NfY2xrX2RpdihlbmNvZGVyKTsKKwlnZW4xMV9kc2lfcHJvZ3Jh
bV9lc2NfY2xrX2RpdihlbmNvZGVyLCBjcnRjX3N0YXRlKTsKIH0KIAogc3RhdGljIHZvaWQgZ2Vu
MTFfZHNpX3ByZV9lbmFibGUoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCkBAIC0xMzAw
LDcgKzEzMDgsNyBAQCBzdGF0aWMgaW50IGdlbjExX2RzaV9jb21wdXRlX2NvbmZpZyhzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJcGlwZV9jb25maWctPnBpcGVfYnBwID0gMTg7CiAK
IAlwaXBlX2NvbmZpZy0+Y2xvY2tfc2V0ID0gdHJ1ZTsKLQlwaXBlX2NvbmZpZy0+cG9ydF9jbG9j
ayA9IGFmZV9jbGsoZW5jb2RlcikgLyA1OworCXBpcGVfY29uZmlnLT5wb3J0X2Nsb2NrID0gYWZl
X2NsayhlbmNvZGVyLCBwaXBlX2NvbmZpZykgLyA1OwogCiAJcmV0dXJuIDA7CiB9Ci0tIAoyLjIw
LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

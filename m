Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0FCC5103AD4
	for <lists+intel-gfx@lfdr.de>; Wed, 20 Nov 2019 14:16:58 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5EDED6E566;
	Wed, 20 Nov 2019 13:16:56 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2A85B6E566
 for <intel-gfx@lists.freedesktop.org>; Wed, 20 Nov 2019 13:16:55 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Nov 2019 05:16:54 -0800
X-IronPort-AV: E=Sophos;i="5.69,222,1571727600"; d="scan'208";a="200712724"
Received: from unknown (HELO [10.252.30.240]) ([10.252.30.240])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 20 Nov 2019 05:16:53 -0800
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191120093302.3723715-1-chris@chris-wilson.co.uk>
 <20191120093302.3723715-9-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <63602b43-06bb-aa55-5ac4-06ba45046160@linux.intel.com>
Date: Wed, 20 Nov 2019 13:16:51 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191120093302.3723715-9-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 9/9] drm/i915/gt: Schedule request
 retirement when timeline idles
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDIwLzExLzIwMTkgMDk6MzMsIENocmlzIFdpbHNvbiB3cm90ZToKPiBUaGUgbWFqb3IgZHJh
d2JhY2sgb2YgY29tbWl0IDdlMzRmNGU0YWFkMyAoImRybS9pOTE1L2dlbjgrOiBBZGQgUkM2IENU
WAo+IGNvcnJ1cHRpb24gV0EiKSBpcyB0aGF0IGl0IGRpc2FibGVzIFJDNiB3aGlsZSBTa3lsYWtl
IChhbmQgZnJpZW5kcykgaXMKPiBhY3RpdmUsIGFuZCB3ZSBkbyBub3QgY29uc2lkZXIgdGhlIEdQ
VSBpZGxlIHVudGlsIGFsbCBvdXRzdGFuZGluZwo+IHJlcXVlc3RzIGhhdmUgYmVlbiByZXRpcmVk
IGFuZCB0aGUgZW5naW5lIHN3aXRjaGVkIG92ZXIgdG8gdGhlIGtlcm5lbAo+IGNvbnRleHQuIElm
IHVzZXJzcGFjZSBpcyBpZGxlLCB0aGlzIHRhc2sgZmFsbHMgb250byBvdXIgYmFja2dyb3VuZCBp
ZGxlCj4gd29ya2VyLCB3aGljaCBvbmx5IHJ1bnMgcm91Z2hseSBvbmNlIGEgc2Vjb25kLCBtZWFu
aW5nIHRoYXQgdXNlcnNwYWNlIGhhcwo+IHRvIGhhdmUgYmVlbiBpZGxlIGZvciBhIGNvdXBsZSBv
ZiBzZWNvbmRzIGJlZm9yZSB3ZSBlbmFibGUgUkM2IGFnYWluLgo+IE5hdHVyYWxseSwgdGhpcyBj
YXVzZXMgdXMgdG8gY29uc3VtZSBjb25zaWRlcmFibHkgbW9yZSBlbmVyZ3kgdGhhbgo+IGJlZm9y
ZSBhcyBwb3dlcnNhdmluZyBpcyBlZmZlY3RpdmVseSBkaXNhYmxlZCB3aGlsZSBhIGRpc3BsYXkg
c2VydmVyCj4gKGhlcmUncyBsb29raW5nIGF0IHlvdSBYb3JnKSBpcyBydW5uaW5nLgo+IAo+IEFz
IGV4ZWNsaXN0cyB3aWxsIGdldCBhIGNvbXBsZXRpb24gZXZlbnQgYXMgZWFjaCBjb250ZXh0IGlz
IGNvbXBsZXRlZCwKPiB3ZSBjYW4gdXNlIHRoaXMgaW50ZXJydXB0IHRvIHF1ZXVlIGEgcmV0aXJl
IHdvcmtlciBib3VuZCB0byB0aGlzIGVuZ2luZQo+IHRvIGNsZWFudXAgaWRsZSB0aW1lbGluZXMu
IFdlIHdpbGwgdGhlbiBpbW1lZGlhdGVseSBub3RpY2UgdGhlIGlkbGUKPiBlbmdpbmUgKHdpdGhv
dXQgdXNlcnNwYWNlIGludGVydmVudGlvbiBvciB0aGUgYWlkIG9mIHRoZSBiYWNrZ3JvdW5kCj4g
cmV0aXJlIHdvcmtlcikgYW5kIHN0YXJ0IHBhcmtpbmcgdGhlIEdQVS4gVGh1cyBkdXJpbmcgbGln
aHQgd29ya2xvYWRzLAo+IHdlIHdpbGwgZG8gbXVjaCBtb3JlIHdvcmsgdG8gaWRsZSB0aGUgR1BV
IGZhc3Rlci4uLiAgSG9wZWZ1bGx5IHdpdGgKPiBjb21tZW5zdXJhdGUgcG93ZXIgc2F2aW5nIQo+
IAo+IHYyOiBXYXRjaCBjb250ZXh0IGNvbXBsZXRpb25zIGFuZCBvbmx5IGxvb2sgYXQgdGhvc2Ug
bG9jYWwgdG8gdGhlIGVuZ2luZQo+IHdoZW4gcmV0aXJpbmcgdG8gcmVkdWNlIHRoZSBhbW91bnQg
b2YgZXhjZXNzIHdvcmsgd2UgcGVyZm9ybS4KPiAKPiBSZWZlcmVuY2VzOiBodHRwczovL2J1Z3Mu
ZnJlZWRlc2t0b3Aub3JnL3Nob3dfYnVnLmNnaT9pZD0xMTIzMTUKPiBSZWZlcmVuY2VzOiA3ZTM0
ZjRlNGFhZDMgKCJkcm0vaTkxNS9nZW44KzogQWRkIFJDNiBDVFggY29ycnVwdGlvbiBXQSIpCj4g
UmVmZXJlbmNlczogMjI0OGEyODM4NGZlICgiZHJtL2k5MTUvZ2VuOCs6IEFkZCBSQzYgQ1RYIGNv
cnJ1cHRpb24gV0EiKQo+IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMt
d2lsc29uLmNvLnVrPgo+IENjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwu
Y29tPgo+IC0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMg
ICAgIHwgIDggKy0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBl
cy5oICB8ICA4ICsrCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9yZXF1ZXN0
cy5jICAgfCA3NCArKysrKysrKysrKysrKysrKysrCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ndF9yZXF1ZXN0cy5oICAgfCAxNyArKysrLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfbHJjLmMgICAgICAgICAgIHwgIDkgKysrCj4gICBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF90aW1lbGluZS5jICAgICAgfCAgMSArCj4gICAuLi4vZ3B1L2RybS9pOTE1
L2d0L2ludGVsX3RpbWVsaW5lX3R5cGVzLmggICAgfCAgMyArCj4gICA3IGZpbGVzIGNoYW5nZWQs
IDExNiBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCj4gaW5kZXggYjk2MTNkMDQ0MzkzLi44ZjZlMzUzY2Fh
NjYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2Nz
LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwo+IEBA
IC0yOCwxMyArMjgsMTMgQEAKPiAgIAo+ICAgI2luY2x1ZGUgImk5MTVfZHJ2LmgiCj4gICAKPiAt
I2luY2x1ZGUgImd0L2ludGVsX2d0LmgiCj4gLQo+ICsjaW5jbHVkZSAiaW50ZWxfY29udGV4dC5o
Igo+ICAgI2luY2x1ZGUgImludGVsX2VuZ2luZS5oIgo+ICAgI2luY2x1ZGUgImludGVsX2VuZ2lu
ZV9wbS5oIgo+ICAgI2luY2x1ZGUgImludGVsX2VuZ2luZV9wb29sLmgiCj4gICAjaW5jbHVkZSAi
aW50ZWxfZW5naW5lX3VzZXIuaCIKPiAtI2luY2x1ZGUgImludGVsX2NvbnRleHQuaCIKPiArI2lu
Y2x1ZGUgImludGVsX2d0LmgiCj4gKyNpbmNsdWRlICJpbnRlbF9ndF9yZXF1ZXN0cy5oIgo+ICAg
I2luY2x1ZGUgImludGVsX2xyYy5oIgo+ICAgI2luY2x1ZGUgImludGVsX3Jlc2V0LmgiCj4gICAj
aW5jbHVkZSAiaW50ZWxfcmluZy5oIgo+IEBAIC02MTcsNiArNjE3LDcgQEAgc3RhdGljIGludCBp
bnRlbF9lbmdpbmVfc2V0dXBfY29tbW9uKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkK
PiAgIAlpbnRlbF9lbmdpbmVfaW5pdF9leGVjbGlzdHMoZW5naW5lKTsKPiAgIAlpbnRlbF9lbmdp
bmVfaW5pdF9jbWRfcGFyc2VyKGVuZ2luZSk7Cj4gICAJaW50ZWxfZW5naW5lX2luaXRfX3BtKGVu
Z2luZSk7Cj4gKwlpbnRlbF9lbmdpbmVfaW5pdF9yZXRpcmUoZW5naW5lKTsKPiAgIAo+ICAgCWlu
dGVsX2VuZ2luZV9wb29sX2luaXQoJmVuZ2luZS0+cG9vbCk7Cj4gICAKPiBAQCAtODM5LDYgKzg0
MCw3IEBAIHZvaWQgaW50ZWxfZW5naW5lX2NsZWFudXBfY29tbW9uKHN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZSkKPiAgIAo+ICAgCWNsZWFudXBfc3RhdHVzX3BhZ2UoZW5naW5lKTsKPiAg
IAo+ICsJaW50ZWxfZW5naW5lX2ZpbmlfcmV0aXJlKGVuZ2luZSk7Cj4gICAJaW50ZWxfZW5naW5l
X3Bvb2xfZmluaSgmZW5naW5lLT5wb29sKTsKPiAgIAlpbnRlbF9lbmdpbmVfZmluaV9icmVhZGNy
dW1icyhlbmdpbmUpOwo+ICAgCWludGVsX2VuZ2luZV9jbGVhbnVwX2NtZF9wYXJzZXIoZW5naW5l
KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5
cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAo+IGlu
ZGV4IDc1OGYwZThlYzY3Mi4uMTdmMWYxNDQxZWZjIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKPiBAQCAtNDUxLDYgKzQ1MSwxNCBAQCBzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzIHsKPiAgIAo+ICAgCXN0cnVjdCBpbnRlbF9lbmdpbmVfZXhlY2xp
c3RzIGV4ZWNsaXN0czsKPiAgIAo+ICsJLyoKPiArCSAqIEtlZXAgdHJhY2sgb2YgY29tcGxldGVk
IHRpbWVsaW5lcyBvbiB0aGlzIGVuZ2luZSBmb3IgZWFybHkKPiArCSAqIHJldGlyZW1lbnQgd2l0
aCB0aGUgZ29hbCBvZiBxdWlja2x5IGVuYWJsaW5nIHBvd2Vyc2F2aW5nIGFzCj4gKwkgKiBzb29u
IGFzIHRoZSBlbmdpbmUgaXMgaWRsZS4KPiArCSAqLwo+ICsJc3RydWN0IGludGVsX3RpbWVsaW5l
ICpyZXRpcmU7Cj4gKwlzdHJ1Y3Qgd29ya19zdHJ1Y3QgcmV0aXJlX3dvcms7Cj4gKwo+ICAgCS8q
IHN0YXR1c19ub3RpZmllcjogbGlzdCBvZiBjYWxsYmFja3MgZm9yIGNvbnRleHQtc3dpdGNoIGNo
YW5nZXMgKi8KPiAgIAlzdHJ1Y3QgYXRvbWljX25vdGlmaWVyX2hlYWQgY29udGV4dF9zdGF0dXNf
bm90aWZpZXI7Cj4gICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZ3RfcmVxdWVzdHMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3JlcXVl
c3RzLmMKPiBpbmRleCA0ZGMzY2JlYjFiMzYuLjRhOThmZWZkZjkxNSAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9yZXF1ZXN0cy5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcmVxdWVzdHMuYwo+IEBAIC0yOSw2ICsyOSw4MCBA
QCBzdGF0aWMgdm9pZCBmbHVzaF9zdWJtaXNzaW9uKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCj4gICAJ
CWludGVsX2VuZ2luZV9mbHVzaF9zdWJtaXNzaW9uKGVuZ2luZSk7Cj4gICB9Cj4gICAKPiArc3Rh
dGljIHZvaWQgZW5naW5lX3JldGlyZShzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCj4gK3sKPiAr
CXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9Cj4gKwkJY29udGFpbmVyX29mKHdvcmss
IHR5cGVvZigqZW5naW5lKSwgcmV0aXJlX3dvcmspOwo+ICsJc3RydWN0IGludGVsX3RpbWVsaW5l
ICp0bCA9IHhjaGcoJmVuZ2luZS0+cmV0aXJlLCBOVUxMKTsKClNob3VsZG4ndCB0aGlzIGJlIGF0
b21pY194Y2hnIHRvIGF2b2lkIHJhY2luZyB3aXRoIGFkZF9yZXRpcmU/Cgo+ICsKPiArCWRvIHsK
PiArCQlzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKm5leHQgPSB4Y2hnKCZ0bC0+cmV0aXJlLCBOVUxM
KTsKCkhlcmUgYXMgd2VsbD8KCj4gKwo+ICsJCS8qCj4gKwkJICogT3VyIGdvYWwgaGVyZSBpcyB0
byByZXRpcmUgX2lkbGVfIHRpbWVsaW5lcyBhcyBzb29uIGFzCj4gKwkJICogcG9zc2libGUgKGFz
IHRoZXkgYXJlIGlkbGUsIHdlIGRvIG5vdCBleHBlY3QgdXNlcnNwYWNlCj4gKwkJICogdG8gYmUg
Y2xlYW5pbmcgdXAgYW55dGltZSBzb29uKS4KPiArCQkgKgo+ICsJCSAqIElmIHRoZSB0bC0+YWN0
aXZlX2NvdW50IGlzIGFscmVhZHkgemVybywgc29tZW9uZSBlbHNlCj4gKwkJICogc2hvdWxkIGhh
dmUgcmV0aXJlZCB0aGUgdGltZWxpbmUuIEVxdWFsbHkgaWYgdGhlIHRpbWVsaW5lCj4gKwkJICog
aXMgY3VycmVudGx5IGxvY2tlZCwgZWl0aGVyIGl0IGlzIGJlaW5nIHJldGlyZWQgZWxzZXdoZXJl
Cj4gKwkJICogb3IgYWJvdXQgdG8gYmUhCj4gKwkJICovCj4gKwkJaWYgKGF0b21pY19yZWFkKCZ0
bC0+YWN0aXZlX2NvdW50KSAmJgo+ICsJCSAgICBtdXRleF90cnlsb2NrKCZ0bC0+bXV0ZXgpKSB7
Cj4gKwkJCXJldGlyZV9yZXF1ZXN0cyh0bCk7Cj4gKwkJCW11dGV4X3VubG9jaygmdGwtPm11dGV4
KTsKPiArCQl9Cj4gKwkJaW50ZWxfdGltZWxpbmVfcHV0KHRsKTsKPiArCj4gKwkJR0VNX0JVR19P
TighbmV4dCk7Cj4gKwkJdGwgPSBwdHJfbWFza19iaXRzKG5leHQsIDEpOwoKWW91IHNvbWV0aW1l
cyBleHBlY3QgZW5naW5lLT5yZXRpcmUgdG8gY29udGFpbiAweDE/Cgo+ICsJfSB3aGlsZSAodGwp
Owo+ICt9Cj4gKwo+ICtzdGF0aWMgYm9vbCBhZGRfcmV0aXJlKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSwKPiArCQkgICAgICAgc3RydWN0IGludGVsX3RpbWVsaW5lICp0bCkKPiArewo+
ICsJc3RydWN0IGludGVsX3RpbWVsaW5lICpmaXJzdCA9IFJFQURfT05DRShlbmdpbmUtPnJldGly
ZSk7Cj4gKwo+ICsJLyoKPiArCSAqIFdlIG9wZW4tY29kZSBhIGxsaXN0IGhlcmUgdG8gaW5jbHVk
ZSB0aGUgYWRkaXRpb25hbCB0YWcgW0JJVCgwKV0KPiArCSAqIHNvIHRoYXQgd2Uga25vdyB3aGVu
IHRoZSB0aW1lbGluZSBpcyBhbHJlYWR5IG9uIGEKPiArCSAqIHJldGlyZW1lbnQgcXVldWU6IGVp
dGhlciB0aGlzIGVuZ2luZSBvciBhbm90aGVyLgo+ICsJICoKPiArCSAqIEhvd2V2ZXIsIHdlIHJl
bHkgb24gdGhhdCBhIHRpbWVsaW5lIGNhbiBvbmx5IGJlIGFjdGl2ZSBvbiBhIHNpbmdsZQo+ICsJ
ICogZW5naW5lIGF0IGFueSBvbmUgdGltZSBhbmQgdGhhdCBhZGRfcmV0aXJlKCkgaXMgY2FsbGVk
IGJlZm9yZSB0aGUKPiArCSAqIGVuZ2luZSByZWxlYXNlcyB0aGUgdGltZWxpbmUgYW5kIHRyYW5z
ZmVycmVkIHRvIGFub3RoZXIgdG8gcmV0aXJlLgo+ICsJICovCj4gKwo+ICsJaWYgKFJFQURfT05D
RSh0bC0+cmV0aXJlKSkgLyogYWxyZWFkeSBxdWV1ZWQgKi8KPiArCQlyZXR1cm4gZmFsc2U7CgpD
YW4ndCB0aGlzIGdvIGZpcnN0IGluIHRoZSBmdW5jdGlvbj8KCj4gKwo+ICsJaW50ZWxfdGltZWxp
bmVfZ2V0KHRsKTsKPiArCWRvCj4gKwkJdGwtPnJldGlyZSA9IHB0cl9wYWNrX2JpdHMoZmlyc3Qs
IDEsIDEpOwoKSGVyZSB5b3UgcmVseSBvbiBhc3NpZ25tZW50IGJlaW5nIGF0b21pYyByaWdodD8K
Cj4gKwl3aGlsZSAoIXRyeV9jbXB4Y2hnKCZlbmdpbmUtPnJldGlyZSwgJmZpcnN0LCB0bCkpOwoK
U28gdGhlIGxvb3AgaXMgZWZmZWN0aXZlbHkgY3JlYXRpbmcgYSBjaGFpbiBvZiB0aW1lbGluZXMg
dG8gcmV0aXJlIG9uIAp0aGlzIGVuZ2luZS4KCldoYXQgaGFwcGVucyB3aXRoIHZpcnR1YWwgZW5n
aW5lcyB3aGVuIGEgdGltZWxpbmUgZ29lcyB0byBkaWZmZXJlbnQgCmVuZ2luZSBiZWZvcmUgKHdl
bGwgb3IgYW55IHNpbmdsZSB0aW1lbGluZSBjb250ZXh0KSB0aGUgcmV0aXJlIHdvcmtlciAKcnVu
cz8gQWggb2theSwgaXQgZ2V0cyByZS1hc3NpZ25lZCB0byB0aGUgbW9zdCByZWNlbnQgZW5naW5l
LgoKSSBhbSBub3Qgc3VyZSBhYm91dCB0aGUgQklUKDApIGJ1c2luZXNzLiBJdCdzIGFsd2F5cyBz
ZXQgb24gd3JpdGUgc28gSSAKYW0gbm90IGdldHRpbmcgd2h5IGl0IGlzIHVzZWZ1bC4KClJlZ2Fy
ZHMsCgpUdnJ0a28KCj4gKwo+ICsJcmV0dXJuICFmaXJzdDsKPiArfQo+ICsKPiArdm9pZCBpbnRl
bF9lbmdpbmVfYWRkX3JldGlyZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCj4gKwkJ
CSAgICAgc3RydWN0IGludGVsX3RpbWVsaW5lICp0bCkKPiArewo+ICsJaWYgKGFkZF9yZXRpcmUo
ZW5naW5lLCB0bCkpCj4gKwkJc2NoZWR1bGVfd29yaygmZW5naW5lLT5yZXRpcmVfd29yayk7Cj4g
K30KPiArCj4gK3ZvaWQgaW50ZWxfZW5naW5lX2luaXRfcmV0aXJlKHN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZSkKPiArewo+ICsJSU5JVF9XT1JLKCZlbmdpbmUtPnJldGlyZV93b3JrLCBl
bmdpbmVfcmV0aXJlKTsKPiArfQo+ICsKPiArdm9pZCBpbnRlbF9lbmdpbmVfZmluaV9yZXRpcmUo
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQo+ICt7Cj4gKwlmbHVzaF93b3JrKCZlbmdp
bmUtPnJldGlyZV93b3JrKTsKPiArfQo+ICsKPiAgIGxvbmcgaW50ZWxfZ3RfcmV0aXJlX3JlcXVl
c3RzX3RpbWVvdXQoc3RydWN0IGludGVsX2d0ICpndCwgbG9uZyB0aW1lb3V0KQo+ICAgewo+ICAg
CXN0cnVjdCBpbnRlbF9ndF90aW1lbGluZXMgKnRpbWVsaW5lcyA9ICZndC0+dGltZWxpbmVzOwo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9yZXF1ZXN0cy5o
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcmVxdWVzdHMuaAo+IGluZGV4IGZk
ZTU0NjQyNGM2My4uOGRlNTU5YjVhMDMzIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2d0X3JlcXVlc3RzLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ndF9yZXF1ZXN0cy5oCj4gQEAgLTcsNyArNywxMiBAQAo+ICAgI2lmbmRlZiBJTlRF
TF9HVF9SRVFVRVNUU19ICj4gICAjZGVmaW5lIElOVEVMX0dUX1JFUVVFU1RTX0gKPiAgIAo+IC1z
dHJ1Y3QgaW50ZWxfZ3Q7Cj4gKyNpbmNsdWRlIDxsaW51eC93b3JrcXVldWUuaD4KPiArCj4gKyNp
bmNsdWRlICJpbnRlbF9ndF90eXBlcy5oIgo+ICsKPiArc3RydWN0IGludGVsX2VuZ2luZV9jczsK
PiArc3RydWN0IGludGVsX3RpbWVsaW5lOwo+ICAgCj4gICBsb25nIGludGVsX2d0X3JldGlyZV9y
ZXF1ZXN0c190aW1lb3V0KHN0cnVjdCBpbnRlbF9ndCAqZ3QsIGxvbmcgdGltZW91dCk7Cj4gICBz
dGF0aWMgaW5saW5lIHZvaWQgaW50ZWxfZ3RfcmV0aXJlX3JlcXVlc3RzKHN0cnVjdCBpbnRlbF9n
dCAqZ3QpCj4gQEAgLTE1LDYgKzIwLDE2IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBpbnRlbF9ndF9y
ZXRpcmVfcmVxdWVzdHMoc3RydWN0IGludGVsX2d0ICpndCkKPiAgIAlpbnRlbF9ndF9yZXRpcmVf
cmVxdWVzdHNfdGltZW91dChndCwgMCk7Cj4gICB9Cj4gICAKPiArc3RhdGljIGlubGluZSB2b2lk
IGludGVsX2d0X3NjaGVkdWxlX3JldGlyZV9yZXF1ZXN0cyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQo+
ICt7Cj4gKwltb2RfZGVsYXllZF93b3JrKHN5c3RlbV93cSwgJmd0LT5yZXF1ZXN0cy5yZXRpcmVf
d29yaywgMCk7Cj4gK30KClRoaXMgaXMgdW51c2VkIGluIHYyLgoKPiArCj4gK3ZvaWQgaW50ZWxf
ZW5naW5lX2luaXRfcmV0aXJlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7Cj4gK3Zv
aWQgaW50ZWxfZW5naW5lX2FkZF9yZXRpcmUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5l
LAo+ICsJCQkgICAgIHN0cnVjdCBpbnRlbF90aW1lbGluZSAqdGwpOwo+ICt2b2lkIGludGVsX2Vu
Z2luZV9maW5pX3JldGlyZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwo+ICsKPiAg
IGludCBpbnRlbF9ndF93YWl0X2Zvcl9pZGxlKHN0cnVjdCBpbnRlbF9ndCAqZ3QsIGxvbmcgdGlt
ZW91dCk7Cj4gICAKPiAgIHZvaWQgaW50ZWxfZ3RfaW5pdF9yZXF1ZXN0cyhzdHJ1Y3QgaW50ZWxf
Z3QgKmd0KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJj
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwo+IGluZGV4IGI2NWJjMDY4
NTViMC4uMmNlYWEyZjIyOTk2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2xyYy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMK
PiBAQCAtMTQyLDYgKzE0Miw3IEBACj4gICAjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3BtLmgiCj4g
ICAjaW5jbHVkZSAiaW50ZWxfZ3QuaCIKPiAgICNpbmNsdWRlICJpbnRlbF9ndF9wbS5oIgo+ICsj
aW5jbHVkZSAiaW50ZWxfZ3RfcmVxdWVzdHMuaCIKPiAgICNpbmNsdWRlICJpbnRlbF9scmNfcmVn
LmgiCj4gICAjaW5jbHVkZSAiaW50ZWxfbW9jcy5oIgo+ICAgI2luY2x1ZGUgImludGVsX3Jlc2V0
LmgiCj4gQEAgLTExNzAsNiArMTE3MSwxNCBAQCBfX2V4ZWNsaXN0c19zY2hlZHVsZV9vdXQoc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcnEsCj4gICAJICogcmVmcmFpbiBmcm9tIGRvaW5nIG5vbi10cml2
aWFsIHdvcmsgaGVyZS4KPiAgIAkgKi8KPiAgIAo+ICsJLyoKPiArCSAqIElmIHdlIGhhdmUganVz
dCBjb21wbGV0ZWQgdGhpcyBjb250ZXh0LCB0aGUgZW5naW5lIG1heSBub3cgYmUKPiArCSAqIGlk
bGUgYW5kIHdlIHdhbnQgdG8gcmUtZW50ZXIgcG93ZXJzYXZpbmcuCj4gKwkgKi8KPiArCWlmIChs
aXN0X2lzX2xhc3QoJnJxLT5saW5rLCAmY2UtPnRpbWVsaW5lLT5yZXF1ZXN0cykgJiYKPiArCSAg
ICBpOTE1X3JlcXVlc3RfY29tcGxldGVkKHJxKSkKPiArCQlpbnRlbF9lbmdpbmVfYWRkX3JldGly
ZShlbmdpbmUsIGNlLT50aW1lbGluZSk7Cj4gKwo+ICAgCWludGVsX2VuZ2luZV9jb250ZXh0X291
dChlbmdpbmUpOwo+ICAgCWV4ZWNsaXN0c19jb250ZXh0X3N0YXR1c19jaGFuZ2UocnEsIElOVEVM
X0NPTlRFWFRfU0NIRURVTEVfT1VUKTsKPiAgIAlpbnRlbF9ndF9wbV9wdXRfYXN5bmMoZW5naW5l
LT5ndCk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3RpbWVs
aW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZS5jCj4gaW5kZXgg
YjE5MGE1ZDlhYjAyLi5jMWQyNDE5NDQ0ZjggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX3RpbWVsaW5lLmMKPiBAQCAtMjc3LDYgKzI3Nyw3IEBAIHZvaWQgaW50ZWxfdGltZWxp
bmVfZmluaShzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRpbWVsaW5lKQo+ICAgewo+ICAgCUdFTV9C
VUdfT04oYXRvbWljX3JlYWQoJnRpbWVsaW5lLT5waW5fY291bnQpKTsKPiAgIAlHRU1fQlVHX09O
KCFsaXN0X2VtcHR5KCZ0aW1lbGluZS0+cmVxdWVzdHMpKTsKPiArCUdFTV9CVUdfT04odGltZWxp
bmUtPnJldGlyZSk7Cj4gICAKPiAgIAlpZiAodGltZWxpbmUtPmh3c3BfY2FjaGVsaW5lKQo+ICAg
CQljYWNoZWxpbmVfZnJlZSh0aW1lbGluZS0+aHdzcF9jYWNoZWxpbmUpOwo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZV90eXBlcy5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmVfdHlwZXMuaAo+IGluZGV4IDUyNDQ2MTVl
ZDFjYi4uYWFmMTVjYmUxY2UxIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX3RpbWVsaW5lX3R5cGVzLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF90aW1lbGluZV90eXBlcy5oCj4gQEAgLTY2LDYgKzY2LDkgQEAgc3RydWN0IGludGVsX3Rp
bWVsaW5lIHsKPiAgIAkgKi8KPiAgIAlzdHJ1Y3QgaTkxNV9hY3RpdmVfZmVuY2UgbGFzdF9yZXF1
ZXN0Owo+ICAgCj4gKwkvKiogQSBjaGFpbiBvZiBjb21wbGV0ZWQgdGltZWxpbmVzIHJlYWR5IGZv
ciBlYXJseSByZXRpcmVtZW50LiAqLwo+ICsJc3RydWN0IGludGVsX3RpbWVsaW5lICpyZXRpcmU7
Cj4gKwo+ICAgCS8qKgo+ICAgCSAqIFdlIHRyYWNrIHRoZSBtb3N0IHJlY2VudCBzZXFubyB0aGF0
IHdlIHdhaXQgb24gaW4gZXZlcnkgY29udGV4dCBzbwo+ICAgCSAqIHRoYXQgd2Ugb25seSBoYXZl
IHRvIGVtaXQgYSBuZXcgYXdhaXQgYW5kIGRlcGVuZGVuY3kgb24gYSBtb3JlCj4gCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5n
IGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

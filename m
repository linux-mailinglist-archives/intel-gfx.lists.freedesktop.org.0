Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B7C7214DCB8
	for <lists+intel-gfx@lfdr.de>; Thu, 30 Jan 2020 15:21:30 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D6F726E844;
	Thu, 30 Jan 2020 14:21:28 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (unknown [77.68.26.236])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6996C6E844
 for <intel-gfx@lists.freedesktop.org>; Thu, 30 Jan 2020 14:21:26 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 20060661-1500050 
 for multiple; Thu, 30 Jan 2020 14:21:09 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 30 Jan 2020 14:21:09 +0000
Message-Id: <20200130142109.1896498-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.25.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/gt: Skip rmw for masked registers
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QSBtYXNrZWQgcmVnaXN0ZXIgZG9lcyBub3QgbmVlZCBybXcgdG8gdXBkYXRlLCBhbmQgaXQgaXMg
YmVzdCBub3QgdG8gdXNlCnN1Y2ggYSBzZXF1ZW5jZS4KClJlcG9ydGVkLWJ5OiBWaWxsZSBTeXJq
w6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBDaHJp
cyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KQ2M6IFZpbGxlIFN5cmrDpGzDpCA8
dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+CkNjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtv
LnVyc3VsaW5AaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dv
cmthcm91bmRzLmMgfCAyOSArKysrKysrKysrKysrKy0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAx
OSBpbnNlcnRpb25zKCspLCAxMCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfd29ya2Fyb3VuZHMuYwppbmRleCA1YTdkYjI3OWY3MDIuLjg5NDc0YTRmYTliOSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jCkBAIC0xNjcs
MTIgKzE2Nyw2IEBAIHdhX3dyaXRlX21hc2tlZF9vcihzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWws
IGk5MTVfcmVnX3QgcmVnLCB1MzIgbWFzaywKIAl3YV9hZGQod2FsLCByZWcsIG1hc2ssIHZhbCwg
bWFzayk7CiB9CiAKLXN0YXRpYyB2b2lkCi13YV9tYXNrZWRfZW4oc3RydWN0IGk5MTVfd2FfbGlz
dCAqd2FsLCBpOTE1X3JlZ190IHJlZywgdTMyIHZhbCkKLXsKLQl3YV93cml0ZV9tYXNrZWRfb3Io
d2FsLCByZWcsIHZhbCwgX01BU0tFRF9CSVRfRU5BQkxFKHZhbCkpOwotfQotCiBzdGF0aWMgdm9p
ZAogd2Ffd3JpdGUoc3RydWN0IGk5MTVfd2FfbGlzdCAqd2FsLCBpOTE1X3JlZ190IHJlZywgdTMy
IHZhbCkKIHsKQEAgLTE4NSwxNCArMTc5LDI2IEBAIHdhX3dyaXRlX29yKHN0cnVjdCBpOTE1X3dh
X2xpc3QgKndhbCwgaTkxNV9yZWdfdCByZWcsIHUzMiB2YWwpCiAJd2Ffd3JpdGVfbWFza2VkX29y
KHdhbCwgcmVnLCB2YWwsIHZhbCk7CiB9CiAKK3N0YXRpYyB2b2lkCit3YV9tYXNrZWRfZW4oc3Ry
dWN0IGk5MTVfd2FfbGlzdCAqd2FsLCBpOTE1X3JlZ190IHJlZywgdTMyIHZhbCkKK3sKKwl3YV9h
ZGQod2FsLCByZWcsIDAsIF9NQVNLRURfQklUX0VOQUJMRSh2YWwpLCB2YWwpOworfQorCitzdGF0
aWMgdm9pZAord2FfbWFza2VkX2RpcyhzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwsIGk5MTVfcmVn
X3QgcmVnLCB1MzIgdmFsKQoreworCXdhX2FkZCh3YWwsIHJlZywgMCwgX01BU0tFRF9CSVRfRElT
QUJMRSh2YWwpLCB2YWwpOworfQorCiAjZGVmaW5lIFdBX1NFVF9CSVRfTUFTS0VEKGFkZHIsIG1h
c2spIFwKLQl3YV93cml0ZV9tYXNrZWRfb3Iod2FsLCAoYWRkciksIChtYXNrKSwgX01BU0tFRF9C
SVRfRU5BQkxFKG1hc2spKQorCXdhX21hc2tlZF9lbih3YWwsIChhZGRyKSwgbWFzaykKIAogI2Rl
ZmluZSBXQV9DTFJfQklUX01BU0tFRChhZGRyLCBtYXNrKSBcCi0Jd2Ffd3JpdGVfbWFza2VkX29y
KHdhbCwgKGFkZHIpLCAobWFzayksIF9NQVNLRURfQklUX0RJU0FCTEUobWFzaykpCisJd2FfbWFz
a2VkX2Rpcyh3YWwsIChhZGRyKSwgbWFzaykKIAogI2RlZmluZSBXQV9TRVRfRklFTERfTUFTS0VE
KGFkZHIsIG1hc2ssIHZhbHVlKSBcCi0Jd2Ffd3JpdGVfbWFza2VkX29yKHdhbCwgKGFkZHIpLCAo
bWFzayksIF9NQVNLRURfRklFTEQoKG1hc2spLCAodmFsdWUpKSkKKwl3YV93cml0ZV9tYXNrZWRf
b3Iod2FsLCAoYWRkciksIDAsIF9NQVNLRURfRklFTEQoKG1hc2spLCAodmFsdWUpKSkKIAogc3Rh
dGljIHZvaWQgZ2VuOF9jdHhfd29ya2Fyb3VuZHNfaW5pdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICplbmdpbmUsCiAJCQkJICAgICAgc3RydWN0IGk5MTVfd2FfbGlzdCAqd2FsKQpAQCAtMTAyMCw3
ICsxMDI2LDEwIEBAIHdhX2xpc3RfYXBwbHkoc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlLCBj
b25zdCBzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwpCiAJaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9n
ZXRfX2xvY2tlZCh1bmNvcmUsIGZ3KTsKIAogCWZvciAoaSA9IDAsIHdhID0gd2FsLT5saXN0OyBp
IDwgd2FsLT5jb3VudDsgaSsrLCB3YSsrKSB7Ci0JCWludGVsX3VuY29yZV9ybXdfZncodW5jb3Jl
LCB3YS0+cmVnLCB3YS0+bWFzaywgd2EtPnZhbCk7CisJCWlmICh3YS0+bWFzaykKKwkJCWludGVs
X3VuY29yZV9ybXdfZncodW5jb3JlLCB3YS0+cmVnLCB3YS0+bWFzaywgd2EtPnZhbCk7CisJCWVs
c2UKKwkJCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsIHdhLT5yZWcsIHdhLT52YWwpOwogCQlp
ZiAoSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfREVCVUdfR0VNKSkKIAkJCXdhX3ZlcmlmeSh3
YSwKIAkJCQkgIGludGVsX3VuY29yZV9yZWFkX2Z3KHVuY29yZSwgd2EtPnJlZyksCi0tIAoyLjI1
LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

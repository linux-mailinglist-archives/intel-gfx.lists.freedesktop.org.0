Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 85DECE0815
	for <lists+intel-gfx@lfdr.de>; Tue, 22 Oct 2019 17:59:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D28976E86D;
	Tue, 22 Oct 2019 15:59:31 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 05F166E86C
 for <intel-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 15:59:30 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18927725-1500050 
 for multiple; Tue, 22 Oct 2019 16:59:21 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 22 Oct 2019 16:59:07 +0100
Message-Id: <20191022155907.32203-10-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0.rc0
In-Reply-To: <20191022155907.32203-1-chris@chris-wilson.co.uk>
References: <20191022155907.32203-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t 10/10] i915: Exercise
 I915_CONTEXT_PARAM_RINGSIZE
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

STkxNV9DT05URVhUX1BBUkFNX1JJTkdTSVpFIHNwZWNpZmllcyBob3cgbGFyZ2UgdG8gY3JlYXRl
IHRoZSBjb21tYW5kCnJpbmdidWZmZXIgZm9yIGxvZ2ljYWwgcmluZyBjb250ZWN0cy4gVGhpcyBk
aXJlY3RseSBhZmZlY3RzIHRoZSBudW1iZXIKb2YgYmF0Y2hlcyB1c2Vyc3BhY2UgY2FuIHN1Ym1p
dCBiZWZvcmUgYmxvY2tpbmcgd2FpdGluZyBmb3Igc3BhY2UuCgpTaWduZWQtb2ZmLWJ5OiBDaHJp
cyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiB0ZXN0cy9NYWtlZmlsZS5z
b3VyY2VzICAgICAgICB8ICAgMyArCiB0ZXN0cy9pOTE1L2dlbV9jdHhfcmluZ3NpemUuYyB8IDI5
OCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiB0ZXN0cy9tZXNvbi5idWlsZCAg
ICAgICAgICAgICB8ICAgMSArCiAzIGZpbGVzIGNoYW5nZWQsIDMwMiBpbnNlcnRpb25zKCspCiBj
cmVhdGUgbW9kZSAxMDA2NDQgdGVzdHMvaTkxNS9nZW1fY3R4X3JpbmdzaXplLmMKCmRpZmYgLS1n
aXQgYS90ZXN0cy9NYWtlZmlsZS5zb3VyY2VzIGIvdGVzdHMvTWFrZWZpbGUuc291cmNlcwppbmRl
eCBiMjJkNjMyNjUuLmViODAyZDE4OSAxMDA2NDQKLS0tIGEvdGVzdHMvTWFrZWZpbGUuc291cmNl
cworKysgYi90ZXN0cy9NYWtlZmlsZS5zb3VyY2VzCkBAIC0xNjAsNiArMTYwLDkgQEAgZ2VtX2N0
eF9wYXJhbV9TT1VSQ0VTID0gaTkxNS9nZW1fY3R4X3BhcmFtLmMKIFRFU1RTX3Byb2dzICs9IGdl
bV9jdHhfcGVyc2lzdGVuY2UKIGdlbV9jdHhfcGVyc2lzdGVuY2VfU09VUkNFUyA9IGk5MTUvZ2Vt
X2N0eF9wZXJzaXN0ZW5jZS5jCiAKK1RFU1RTX3Byb2dzICs9IGdlbV9jdHhfcmluZ3NpemUKK2dl
bV9jdHhfcmluZ3NpemVfU09VUkNFUyA9IGk5MTUvZ2VtX2N0eF9yaW5nc2l6ZS5jCisKIFRFU1RT
X3Byb2dzICs9IGdlbV9jdHhfc2hhcmVkCiBnZW1fY3R4X3NoYXJlZF9TT1VSQ0VTID0gaTkxNS9n
ZW1fY3R4X3NoYXJlZC5jCiAKZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX2N0eF9yaW5nc2l6
ZS5jIGIvdGVzdHMvaTkxNS9nZW1fY3R4X3JpbmdzaXplLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMDAwLi4yMDliM2EzNTYKLS0tIC9kZXYvbnVsbAorKysgYi90ZXN0cy9pOTE1
L2dlbV9jdHhfcmluZ3NpemUuYwpAQCAtMCwwICsxLDI5OCBAQAorLyoKKyAqIENvcHlyaWdodCDC
qSAyMDE5IEludGVsIENvcnBvcmF0aW9uCisgKgorICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3Jh
bnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKKyAqIGNvcHkg
b2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUg
IlNvZnR3YXJlIiksCisgKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0
aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uCisgKiB0aGUgcmlnaHRzIHRvIHVzZSwg
Y29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKKyAq
IGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29u
cyB0byB3aG9tIHRoZQorICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0
IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKKyAqCisgKiBUaGUgYWJvdmUgY29weXJpZ2h0
IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSAoaW5jbHVkaW5nIHRoZSBuZXh0Cisg
KiBwYXJhZ3JhcGgpIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRp
YWwgcG9ydGlvbnMgb2YgdGhlCisgKiBTb2Z0d2FyZS4KKyAqCisgKiBUSEUgU09GVFdBUkUgSVMg
UFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBP
UgorICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElF
UyBPRiBNRVJDSEFOVEFCSUxJVFksCisgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9T
RSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKKyAqIFRIRSBBVVRIT1JT
IE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9S
IE9USEVSCisgKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBU
T1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORworICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJ
T04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUworICogSU4g
VEhFIFNPRlRXQVJFLgorICovCisKKyNpbmNsdWRlIDxlcnJuby5oPgorI2luY2x1ZGUgPGZjbnRs
Lmg+CisjaW5jbHVkZSA8aW50dHlwZXMuaD4KKyNpbmNsdWRlIDxzeXMvaW9jdGwuaD4KKyNpbmNs
dWRlIDxzeXMvdHlwZXMuaD4KKyNpbmNsdWRlIDx1bmlzdGQuaD4KKworI2luY2x1ZGUgImRybXRl
c3QuaCIgLyogZ2VtX3F1aWVzY2VudF9ncHUoKSEgKi8KKyNpbmNsdWRlICJpOTE1L2dlbV9jb250
ZXh0LmgiCisjaW5jbHVkZSAiaTkxNS9nZW1fZW5naW5lX3RvcG9sb2d5LmgiCisjaW5jbHVkZSAi
aW9jdGxfd3JhcHBlcnMuaCIgLyogZ2VtX3dhaXQoKSEgKi8KKyNpbmNsdWRlICJzd19zeW5jLmgi
CisKKyNkZWZpbmUgSTkxNV9DT05URVhUX1BBUkFNX1JJTkdTSVpFIDB4YworCitzdGF0aWMgYm9v
bCBoYXNfcmluZ3NpemUoaW50IGk5MTUpCit7CisJc3RydWN0IGRybV9pOTE1X2dlbV9jb250ZXh0
X3BhcmFtIHAgPSB7CisJCS5wYXJhbSA9IEk5MTVfQ09OVEVYVF9QQVJBTV9SSU5HU0laRSwKKwl9
OworCisJcmV0dXJuIF9fZ2VtX2NvbnRleHRfZ2V0X3BhcmFtKGk5MTUsICZwKSA9PSAwOworfQor
CitzdGF0aWMgdm9pZCB0ZXN0X2lkZW1wb3RlbnQoaW50IGk5MTUpCit7CisJc3RydWN0IGRybV9p
OTE1X2dlbV9jb250ZXh0X3BhcmFtIHAgPSB7CisJCS5wYXJhbSA9IEk5MTVfQ09OVEVYVF9QQVJB
TV9SSU5HU0laRSwKKwl9OworCXVpbnQzMl90IHNhdmVkOworCisJLyoKKwkgKiBTaW1wbGUgdGVz
dCB0byB2ZXJpZnkgdGhhdCB3ZSBhcmUgYWJsZSB0byByZWFkIGJhY2sgdGhlIHNhbWUKKwkgKiB2
YWx1ZSBhcyB3ZSBzZXQuCisJICovCisKKwlnZW1fY29udGV4dF9nZXRfcGFyYW0oaTkxNSwgJnAp
OworCXNhdmVkID0gcC52YWx1ZTsKKworCWZvciAodWludDMyX3QgeCA9IDEgPDwgMTI7IHggPD0g
MTI4IDw8IDEyOyB4IDw8PSAxKSB7CisJCXAudmFsdWUgPSB4OworCQlnZW1fY29udGV4dF9zZXRf
cGFyYW0oaTkxNSwgJnApOworCQlnZW1fY29udGV4dF9nZXRfcGFyYW0oaTkxNSwgJnApOworCQlp
Z3RfYXNzZXJ0X2VxX3UzMihwLnZhbHVlLCB4KTsKKwl9CisKKwlwLnZhbHVlID0gc2F2ZWQ7CisJ
Z2VtX2NvbnRleHRfc2V0X3BhcmFtKGk5MTUsICZwKTsKK30KKworc3RhdGljIHZvaWQgdGVzdF9p
bnZhbGlkKGludCBpOTE1KQoreworCXN0cnVjdCBkcm1faTkxNV9nZW1fY29udGV4dF9wYXJhbSBw
ID0geworCQkucGFyYW0gPSBJOTE1X0NPTlRFWFRfUEFSQU1fUklOR1NJWkUsCisJfTsKKwl1aW50
MzJfdCBzYXZlZDsKKworCWdlbV9jb250ZXh0X2dldF9wYXJhbShpOTE1LCAmcCk7CisJc2F2ZWQg
PSBwLnZhbHVlOworCisJcC52YWx1ZSA9IDA7CisJaWd0X2Fzc2VydF9lcShfX2dlbV9jb250ZXh0
X3NldF9wYXJhbShpOTE1LCAmcCksIC1FSU5WQUwpOworCWdlbV9jb250ZXh0X2dldF9wYXJhbShp
OTE1LCAmcCk7CisJaWd0X2Fzc2VydF9lcV91MzIocC52YWx1ZSwgc2F2ZWQpOworCisJcC52YWx1
ZSA9IC0xOworCWlndF9hc3NlcnRfZXEoX19nZW1fY29udGV4dF9zZXRfcGFyYW0oaTkxNSwgJnAp
LCAtRUlOVkFMKTsKKwlnZW1fY29udGV4dF9nZXRfcGFyYW0oaTkxNSwgJnApOworCWlndF9hc3Nl
cnRfZXFfdTMyKHAudmFsdWUsIHNhdmVkKTsKKworCXAudmFsdWUgPSAtMXU7CisJaWd0X2Fzc2Vy
dF9lcShfX2dlbV9jb250ZXh0X3NldF9wYXJhbShpOTE1LCAmcCksIC1FSU5WQUwpOworCWdlbV9j
b250ZXh0X2dldF9wYXJhbShpOTE1LCAmcCk7CisJaWd0X2Fzc2VydF9lcV91MzIocC52YWx1ZSwg
c2F2ZWQpOworfQorCitzdGF0aWMgaW50IGNyZWF0ZV9leHRfaW9jdGwoaW50IGk5MTUsCisJCQkg
ICAgc3RydWN0IGRybV9pOTE1X2dlbV9jb250ZXh0X2NyZWF0ZV9leHQgKmFyZykKK3sKKwlpbnQg
ZXJyOworCisJZXJyID0gMDsKKwlpZiAoaWd0X2lvY3RsKGk5MTUsIERSTV9JT0NUTF9JOTE1X0dF
TV9DT05URVhUX0NSRUFURV9FWFQsIGFyZykpIHsKKwkJZXJyID0gLWVycm5vOworCQlpZ3RfYXNz
dW1lKGVycik7CisJfQorCisJZXJybm8gPSAwOworCXJldHVybiBlcnI7Cit9CisKK3N0YXRpYyB2
b2lkIHRlc3RfY3JlYXRlKGludCBpOTE1KQoreworCXN0cnVjdCBkcm1faTkxNV9nZW1fY29udGV4
dF9jcmVhdGVfZXh0X3NldHBhcmFtIHAgPSB7CisJCS5iYXNlID0geworCQkJLm5hbWUgPSBJOTE1
X0NPTlRFWFRfQ1JFQVRFX0VYVF9TRVRQQVJBTSwKKwkJCS5uZXh0X2V4dGVuc2lvbiA9IDAsIC8q
IGVuZCBvZiBjaGFpbiAqLworCQl9LAorCQkucGFyYW0gPSB7CisJCQkucGFyYW0gPSBJOTE1X0NP
TlRFWFRfUEFSQU1fUklOR1NJWkUsCisJCQkudmFsdWUgPSA1MTIgPDwgMTAsCisJCX0KKwl9Owor
CXN0cnVjdCBkcm1faTkxNV9nZW1fY29udGV4dF9jcmVhdGVfZXh0IGNyZWF0ZSA9IHsKKwkJLmZs
YWdzID0gSTkxNV9DT05URVhUX0NSRUFURV9GTEFHU19VU0VfRVhURU5TSU9OUywKKwkJLmV4dGVu
c2lvbnMgPSB0b191c2VyX3BvaW50ZXIoJnApLAorCX07CisKKwlpZ3RfYXNzZXJ0X2VxKGNyZWF0
ZV9leHRfaW9jdGwoaTkxNSwgJmNyZWF0ZSksICAwKTsKKworCXAucGFyYW0uY3R4X2lkID0gY3Jl
YXRlLmN0eF9pZDsKKwlwLnBhcmFtLnZhbHVlID0gMDsKKwlnZW1fY29udGV4dF9nZXRfcGFyYW0o
aTkxNSwgJnAucGFyYW0pOworCWlndF9hc3NlcnRfZXEocC5wYXJhbS52YWx1ZSwgNTEyIDw8IDEw
KTsKKworCWdlbV9jb250ZXh0X2Rlc3Ryb3koaTkxNSwgY3JlYXRlLmN0eF9pZCk7Cit9CisKK3N0
YXRpYyB2b2lkIHRlc3RfY2xvbmUoaW50IGk5MTUpCit7CisJc3RydWN0IGRybV9pOTE1X2dlbV9j
b250ZXh0X2NyZWF0ZV9leHRfc2V0cGFyYW0gcCA9IHsKKwkJLmJhc2UgPSB7CisJCQkubmFtZSA9
IEk5MTVfQ09OVEVYVF9DUkVBVEVfRVhUX1NFVFBBUkFNLAorCQkJLm5leHRfZXh0ZW5zaW9uID0g
MCwgLyogZW5kIG9mIGNoYWluICovCisJCX0sCisJCS5wYXJhbSA9IHsKKwkJCS5wYXJhbSA9IEk5
MTVfQ09OVEVYVF9QQVJBTV9SSU5HU0laRSwKKwkJCS52YWx1ZSA9IDUxMiA8PCAxMCwKKwkJfQor
CX07CisJc3RydWN0IGRybV9pOTE1X2dlbV9jb250ZXh0X2NyZWF0ZV9leHQgY3JlYXRlID0gewor
CQkuZmxhZ3MgPSBJOTE1X0NPTlRFWFRfQ1JFQVRFX0ZMQUdTX1VTRV9FWFRFTlNJT05TLAorCQku
ZXh0ZW5zaW9ucyA9IHRvX3VzZXJfcG9pbnRlcigmcCksCisJfTsKKworCWlndF9hc3NlcnRfZXEo
Y3JlYXRlX2V4dF9pb2N0bChpOTE1LCAmY3JlYXRlKSwgIDApOworCisJcC5wYXJhbS5jdHhfaWQg
PSBnZW1fY29udGV4dF9jbG9uZShpOTE1LCBjcmVhdGUuY3R4X2lkLAorCQkJCQkgICBJOTE1X0NP
TlRFWFRfQ0xPTkVfRU5HSU5FUywgMCk7CisJaWd0X2Fzc2VydF9uZXEocC5wYXJhbS5jdHhfaWQs
IGNyZWF0ZS5jdHhfaWQpOworCWdlbV9jb250ZXh0X2Rlc3Ryb3koaTkxNSwgY3JlYXRlLmN0eF9p
ZCk7CisKKwlwLnBhcmFtLnZhbHVlID0gMDsKKwlnZW1fY29udGV4dF9nZXRfcGFyYW0oaTkxNSwg
JnAucGFyYW0pOworCWlndF9hc3NlcnRfZXEocC5wYXJhbS52YWx1ZSwgNTEyIDw8IDEwKTsKKwor
CWdlbV9jb250ZXh0X2Rlc3Ryb3koaTkxNSwgcC5wYXJhbS5jdHhfaWQpOworfQorCitzdGF0aWMg
aW50IF9fZXhlY2J1ZihpbnQgaTkxNSwgc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiAq
ZXhlY2J1ZikKK3sKKwlpbnQgZXJyOworCisJZXJyID0gMDsKKwlpZiAoaW9jdGwoaTkxNSwgRFJN
X0lPQ1RMX0k5MTVfR0VNX0VYRUNCVUZGRVIyLCBleGVjYnVmKSkKKwkJZXJyID0gLWVycm5vOwor
CisJZXJybm8gPSAwOworCXJldHVybiBlcnI7Cit9CisKK3N0YXRpYyB1aW50MzJfdCBfX2JhdGNo
X2NyZWF0ZShpbnQgaTkxNSwgdWludDMyX3Qgb2Zmc2V0KQoreworCWNvbnN0IHVpbnQzMl90IGJi
ZSA9IDB4YSA8PCAyMzsKKwl1aW50MzJfdCBoYW5kbGU7CisKKwloYW5kbGUgPSBnZW1fY3JlYXRl
KGk5MTUsIEFMSUdOKG9mZnNldCArIHNpemVvZihiYmUpLCA0MDk2KSk7CisJZ2VtX3dyaXRlKGk5
MTUsIGhhbmRsZSwgb2Zmc2V0LCAmYmJlLCBzaXplb2YoYmJlKSk7CisKKwlyZXR1cm4gaGFuZGxl
OworfQorCitzdGF0aWMgdWludDMyX3QgYmF0Y2hfY3JlYXRlKGludCBpOTE1KQoreworCXJldHVy
biBfX2JhdGNoX2NyZWF0ZShpOTE1LCAwKTsKK30KKworc3RhdGljIHVuc2lnbmVkIGludCBtZWFz
dXJlX2luZmxpZ2h0KGludCBpOTE1LCB1bnNpZ25lZCBpbnQgZW5naW5lKQoreworCUlHVF9DT1JL
X0ZFTkNFKGNvcmspOworCXN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19vYmplY3QyIG9iaiA9IHsK
KwkJLmhhbmRsZSA9IGJhdGNoX2NyZWF0ZShpOTE1KQorCX07CisJc3RydWN0IGRybV9pOTE1X2dl
bV9leGVjYnVmZmVyMiBleGVjYnVmID0geworCQkuYnVmZmVyc19wdHIgPSB0b191c2VyX3BvaW50
ZXIoJm9iaiksCisJCS5idWZmZXJfY291bnQgPSAxLAorCQkuZmxhZ3MgPSBlbmdpbmUgfCBJOTE1
X0VYRUNfRkVOQ0VfSU4sCisJCS5yc3ZkMiA9IGlndF9jb3JrX3BsdWcoJmNvcmssIGk5MTUpLAor
CX07CisJdW5zaWduZWQgaW50IGNvdW50OworCisJZmNudGwoaTkxNSwgRl9TRVRGTCwgZmNudGwo
aTkxNSwgRl9HRVRGTCkgfCBPX05PTkJMT0NLKTsKKworCWdlbV9leGVjYnVmKGk5MTUsICZleGVj
YnVmKTsKKwlmb3IgKGNvdW50ID0gMTsgX19leGVjYnVmKGk5MTUsICZleGVjYnVmKSA9PSAwOyBj
b3VudCsrKQorCQk7CisJY2xvc2UoZXhlY2J1Zi5yc3ZkMik7CisKKwlmY250bChpOTE1LCBGX1NF
VEZMLCBmY250bChpOTE1LCBGX0dFVEZMKSAmIH5PX05PTkJMT0NLKTsKKworCWlndF9jb3JrX3Vu
cGx1ZygmY29yayk7CisJZ2VtX2Nsb3NlKGk5MTUsIG9iai5oYW5kbGUpOworCisJcmV0dXJuIGNv
dW50OworfQorCitzdGF0aWMgdm9pZCB0ZXN0X3Jlc2l6ZShpbnQgaTkxNSwKKwkJCWNvbnN0IHN0
cnVjdCBpbnRlbF9leGVjdXRpb25fZW5naW5lMiAqZSwKKwkJCXVuc2lnbmVkIGludCBmbGFncykK
KyNkZWZpbmUgSURMRSAoMSA8PCAwKQoreworCXN0cnVjdCBkcm1faTkxNV9nZW1fY29udGV4dF9w
YXJhbSBwID0geworCQkucGFyYW0gPSBJOTE1X0NPTlRFWFRfUEFSQU1fUklOR1NJWkUsCisJfTsK
Kwl1bnNpZ25lZCBpbnQgcHJldlsyXSA9IHt9OworCXVpbnQzMl90IHNhdmVkOworCisJZ2VtX2Nv
bnRleHRfZ2V0X3BhcmFtKGk5MTUsICZwKTsKKwlzYXZlZCA9IHAudmFsdWU7CisKKwlnZW1fcXVp
ZXNjZW50X2dwdShpOTE1KTsKKwlmb3IgKHAudmFsdWUgPSAxIDw8IDEyOyBwLnZhbHVlIDw9IDEy
OCA8PCAxMjsgcC52YWx1ZSA8PD0gMSkgeworCQl1bnNpZ25lZCBpbnQgY291bnQ7CisKKwkJZ2Vt
X2NvbnRleHRfc2V0X3BhcmFtKGk5MTUsICZwKTsKKworCQljb3VudCA9IG1lYXN1cmVfaW5mbGln
aHQoaTkxNSwgZS0+ZmxhZ3MpOworCQlpZ3RfaW5mbygiJXM6ICVsbHggLT4gJWRcbiIsIGUtPm5h
bWUsIHAudmFsdWUsIGNvdW50KTsKKwkJaWd0X2Fzc2VydChjb3VudCA+IDMgKiAocHJldlsxXSAt
IHByZXZbMF0pIC8gNCArIHByZXZbMV0pOworCQlpZiAoZmxhZ3MgJiBJRExFKQorCQkJZ2VtX3F1
aWVzY2VudF9ncHUoaTkxNSk7CisKKwkJcHJldlswXSA9IHByZXZbMV07CisJCXByZXZbMV0gPSBj
b3VudDsKKwl9CisJZ2VtX3F1aWVzY2VudF9ncHUoaTkxNSk7CisKKwlwLnZhbHVlID0gc2F2ZWQ7
CisJZ2VtX2NvbnRleHRfc2V0X3BhcmFtKGk5MTUsICZwKTsKK30KKworaWd0X21haW4KK3sKKwlj
b25zdCBzdHJ1Y3QgaW50ZWxfZXhlY3V0aW9uX2VuZ2luZTIgKmU7CisJaW50IGk5MTU7CisKKwlp
Z3RfZml4dHVyZSB7CisJCWk5MTUgPSBkcm1fb3Blbl9kcml2ZXIoRFJJVkVSX0lOVEVMKTsKKwkJ
aWd0X3JlcXVpcmVfZ2VtKGk5MTUpOworCisJCWlndF9yZXF1aXJlKGhhc19yaW5nc2l6ZShpOTE1
KSk7CisJfQorCisJaWd0X3N1YnRlc3QoImlkZW1wb3RlbnQiKQorCQl0ZXN0X2lkZW1wb3RlbnQo
aTkxNSk7CisKKwlpZ3Rfc3VidGVzdCgiaW52YWxpZCIpCisJCXRlc3RfaW52YWxpZChpOTE1KTsK
KworCWlndF9zdWJ0ZXN0KCJjcmVhdGUiKQorCQl0ZXN0X2NyZWF0ZShpOTE1KTsKKwlpZ3Rfc3Vi
dGVzdCgiY2xvbmUiKQorCQl0ZXN0X2Nsb25lKGk5MTUpOworCisJX19mb3JfZWFjaF9waHlzaWNh
bF9lbmdpbmUoaTkxNSwgZSkgeworCQlpZ3Rfc3VidGVzdF9mKCIlcy1pZGxlIiwgZS0+bmFtZSkK
KwkJCXRlc3RfcmVzaXplKGk5MTUsIGUsIElETEUpOworCQlpZ3Rfc3VidGVzdF9mKCIlcy1hY3Rp
dmUiLCBlLT5uYW1lKQorCQkJdGVzdF9yZXNpemUoaTkxNSwgZSwgMCk7CisJfQorCisJaWd0X2Zp
eHR1cmUgeworCQljbG9zZShpOTE1KTsKKwl9Cit9CmRpZmYgLS1naXQgYS90ZXN0cy9tZXNvbi5i
dWlsZCBiL3Rlc3RzL21lc29uLmJ1aWxkCmluZGV4IGYxNTFjMGE1ZS4uOWEyMDM5YTIyIDEwMDY0
NAotLS0gYS90ZXN0cy9tZXNvbi5idWlsZAorKysgYi90ZXN0cy9tZXNvbi5idWlsZApAQCAtMTIy
LDYgKzEyMiw3IEBAIGk5MTVfcHJvZ3MgPSBbCiAJJ2dlbV9jdHhfaXNvbGF0aW9uJywKIAknZ2Vt
X2N0eF9wYXJhbScsCiAJJ2dlbV9jdHhfcGVyc2lzdGVuY2UnLAorCSdnZW1fY3R4X3JpbmdzaXpl
JywKIAknZ2VtX2N0eF9zaGFyZWQnLAogCSdnZW1fY3R4X3N3aXRjaCcsCiAJJ2dlbV9jdHhfdGhy
YXNoJywKLS0gCjIuMjQuMC5yYzAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeA==

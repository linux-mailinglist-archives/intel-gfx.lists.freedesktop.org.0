Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4FA4C97F8A
	for <lists+intel-gfx@lfdr.de>; Wed, 21 Aug 2019 17:59:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9B27488F1B;
	Wed, 21 Aug 2019 15:59:30 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B17AF6E351
 for <intel-gfx@lists.freedesktop.org>; Wed, 21 Aug 2019 15:59:21 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18216501-1500050 
 for multiple; Wed, 21 Aug 2019 16:57:30 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 21 Aug 2019 16:57:25 +0100
Message-Id: <20190821155728.2839-2-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0.rc1
In-Reply-To: <20190821155728.2839-1-chris@chris-wilson.co.uk>
References: <20190821155728.2839-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 2/5] drm/i915/gtt: Add some range asserts
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: matthew.auld@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlc2Ugc2hvdWxkIGhhdmUgYmVlbiB2YWxpZGF0ZWQgaW4gdGhlIHVwcGVyIGxheWVycywgYnV0
IGZvciBzYW5pdHkncwpzYWtlLCByZXBlYXQgdGhlbS4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdp
bHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZ2VtX2d0dC5jIHwgMTYgKysrKysrKysrKystLS0tLQogMSBmaWxlIGNoYW5nZWQsIDEx
IGluc2VydGlvbnMoKyksIDUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9n
dHQuYwppbmRleCBiMDZkMWQ5MDU0YmEuLjBiODFlMGI2NDM5MyAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW1fZ3R0LmMKQEAgLTk2NSw4ICs5NjUsMTAgQEAgc3RhdGljIHU2NCBfX2dlbjhfcHBn
dHRfY2xlYXIoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqIGNvbnN0IHZtLAogCWNvbnN0IHN0
cnVjdCBpOTE1X3BhZ2Vfc2NyYXRjaCAqIGNvbnN0IHNjcmF0Y2ggPSAmdm0tPnNjcmF0Y2hbbHZs
XTsKIAl1bnNpZ25lZCBpbnQgaWR4LCBsZW47CiAKKwlHRU1fQlVHX09OKGVuZCA+IHZtLT50b3Rh
bCA+PiBHRU44X1BURV9TSElGVCk7CisKIAlsZW4gPSBnZW44X3BkX3JhbmdlKHN0YXJ0LCBlbmQs
IGx2bC0tLCAmaWR4KTsKLQlEQkcoIiVzKCVwKTp7IGx2bDolZCwgc3RhcnQ6JWxseCwgZW5kOiVs
bHgsIGlkeDolZCwgbGVuOiVkLCB1c2VkOiVkfVxuIiwKKwlEQkcoIiVzKCVwKTp7IGx2bDolZCwg
c3RhcnQ6JWxseCwgZW5kOiVsbHgsIGlkeDolZCwgbGVuOiVkLCB1c2VkOiVkIH1cbiIsCiAJICAg
IF9fZnVuY19fLCB2bSwgbHZsICsgMSwgc3RhcnQsIGVuZCwKIAkgICAgaWR4LCBsZW4sIGF0b21p
Y19yZWFkKHB4X3VzZWQocGQpKSk7CiAJR0VNX0JVR19PTighbGVuIHx8IGxlbiA+PSBhdG9taWNf
cmVhZChweF91c2VkKHBkKSkpOwpAQCAtOTkyLDcgKzk5NCw3IEBAIHN0YXRpYyB1NjQgX19nZW44
X3BwZ3R0X2NsZWFyKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKiBjb25zdCB2bSwKIAkJCXU2
NCAqdmFkZHI7CiAKIAkJCWNvdW50ID0gZ2VuOF9wdF9jb3VudChzdGFydCwgZW5kKTsKLQkJCURC
RygiJXMoJXApOnsgbHZsOiVkLCBzdGFydDolbGx4LCBlbmQ6JWxseCwgaWR4OiVkLCBsZW46JWQs
IHVzZWQ6JWR9IHJlbW92aW5nIHB0ZVxuIiwKKwkJCURCRygiJXMoJXApOnsgbHZsOiVkLCBzdGFy
dDolbGx4LCBlbmQ6JWxseCwgaWR4OiVkLCBsZW46JWQsIHVzZWQ6JWQgfSByZW1vdmluZyBwdGVc
biIsCiAJCQkgICAgX19mdW5jX18sIHZtLCBsdmwsIHN0YXJ0LCBlbmQsCiAJCQkgICAgZ2VuOF9w
ZF9pbmRleChzdGFydCwgMCksIGNvdW50LAogCQkJICAgIGF0b21pY19yZWFkKCZwdC0+dXNlZCkp
OwpAQCAtMTAyMCw2ICsxMDIyLDcgQEAgc3RhdGljIHZvaWQgZ2VuOF9wcGd0dF9jbGVhcihzdHJ1
Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKIHsKIAlHRU1fQlVHX09OKCFJU19BTElHTkVEKHN0
YXJ0LCBCSVRfVUxMKEdFTjhfUFRFX1NISUZUKSkpOwogCUdFTV9CVUdfT04oIUlTX0FMSUdORUQo
bGVuZ3RoLCBCSVRfVUxMKEdFTjhfUFRFX1NISUZUKSkpOworCUdFTV9CVUdfT04ocmFuZ2Vfb3Zl
cmZsb3dzKHN0YXJ0LCBsZW5ndGgsIHZtLT50b3RhbCkpOwogCiAJc3RhcnQgPj49IEdFTjhfUFRF
X1NISUZUOwogCWxlbmd0aCA+Pj0gR0VOOF9QVEVfU0hJRlQ7CkBAIC0xMDMxLDE1ICsxMDM0LDE3
IEBAIHN0YXRpYyB2b2lkIGdlbjhfcHBndHRfY2xlYXIoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFj
ZSAqdm0sCiAKIHN0YXRpYyBpbnQgX19nZW44X3BwZ3R0X2FsbG9jKHN0cnVjdCBpOTE1X2FkZHJl
c3Nfc3BhY2UgKiBjb25zdCB2bSwKIAkJCSAgICAgIHN0cnVjdCBpOTE1X3BhZ2VfZGlyZWN0b3J5
ICogY29uc3QgcGQsCi0JCQkgICAgICB1NjQgKiBjb25zdCBzdGFydCwgdTY0IGVuZCwgaW50IGx2
bCkKKwkJCSAgICAgIHU2NCAqIGNvbnN0IHN0YXJ0LCBjb25zdCB1NjQgZW5kLCBpbnQgbHZsKQog
ewogCWNvbnN0IHN0cnVjdCBpOTE1X3BhZ2Vfc2NyYXRjaCAqIGNvbnN0IHNjcmF0Y2ggPSAmdm0t
PnNjcmF0Y2hbbHZsXTsKIAlzdHJ1Y3QgaTkxNV9wYWdlX3RhYmxlICphbGxvYyA9IE5VTEw7CiAJ
dW5zaWduZWQgaW50IGlkeCwgbGVuOwogCWludCByZXQgPSAwOwogCisJR0VNX0JVR19PTihlbmQg
PiB2bS0+dG90YWwgPj4gR0VOOF9QVEVfU0hJRlQpOworCiAJbGVuID0gZ2VuOF9wZF9yYW5nZSgq
c3RhcnQsIGVuZCwgbHZsLS0sICZpZHgpOwotCURCRygiJXMoJXApOntsdmw6JWQsIHN0YXJ0OiVs
bHgsIGVuZDolbGx4LCBpZHg6JWQsIGxlbjolZCwgdXNlZDolZH1cbiIsCisJREJHKCIlcyglcCk6
eyBsdmw6JWQsIHN0YXJ0OiVsbHgsIGVuZDolbGx4LCBpZHg6JWQsIGxlbjolZCwgdXNlZDolZCB9
XG4iLAogCSAgICBfX2Z1bmNfXywgdm0sIGx2bCArIDEsICpzdGFydCwgZW5kLAogCSAgICBpZHgs
IGxlbiwgYXRvbWljX3JlYWQocHhfdXNlZChwZCkpKTsKIAlHRU1fQlVHX09OKCFsZW4gfHwgKGlk
eCArIGxlbiAtIDEpID4+IGdlbjhfcGRfc2hpZnQoMSkpOwpAQCAtMTEwNSw3ICsxMTEwLDcgQEAg
c3RhdGljIGludCBfX2dlbjhfcHBndHRfYWxsb2Moc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAq
IGNvbnN0IHZtLAogCQl9IGVsc2UgewogCQkJdW5zaWduZWQgaW50IGNvdW50ID0gZ2VuOF9wdF9j
b3VudCgqc3RhcnQsIGVuZCk7CiAKLQkJCURCRygiJXMoJXApOntsdmw6JWQsIHN0YXJ0OiVsbHgs
IGVuZDolbGx4LCBpZHg6JWQsIGxlbjolZCwgdXNlZDolZH0gaW5zZXJ0aW5nIHB0ZVxuIiwKKwkJ
CURCRygiJXMoJXApOnsgbHZsOiVkLCBzdGFydDolbGx4LCBlbmQ6JWxseCwgaWR4OiVkLCBsZW46
JWQsIHVzZWQ6JWQgfSBpbnNlcnRpbmcgcHRlXG4iLAogCQkJICAgIF9fZnVuY19fLCB2bSwgbHZs
LCAqc3RhcnQsIGVuZCwKIAkJCSAgICBnZW44X3BkX2luZGV4KCpzdGFydCwgMCksIGNvdW50LAog
CQkJICAgIGF0b21pY19yZWFkKCZwdC0+dXNlZCkpOwpAQCAtMTEzMSw2ICsxMTM2LDcgQEAgc3Rh
dGljIGludCBnZW44X3BwZ3R0X2FsbG9jKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAog
CiAJR0VNX0JVR19PTighSVNfQUxJR05FRChzdGFydCwgQklUX1VMTChHRU44X1BURV9TSElGVCkp
KTsKIAlHRU1fQlVHX09OKCFJU19BTElHTkVEKGxlbmd0aCwgQklUX1VMTChHRU44X1BURV9TSElG
VCkpKTsKKwlHRU1fQlVHX09OKHJhbmdlX292ZXJmbG93cyhzdGFydCwgbGVuZ3RoLCB2bS0+dG90
YWwpKTsKIAogCXN0YXJ0ID4+PSBHRU44X1BURV9TSElGVDsKIAlsZW5ndGggPj49IEdFTjhfUFRF
X1NISUZUOwotLSAKMi4yMy4wLnJjMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A238A109F6F
	for <lists+intel-gfx@lfdr.de>; Tue, 26 Nov 2019 14:44:05 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D839F6E3DA;
	Tue, 26 Nov 2019 13:44:03 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 039D36E3DA
 for <intel-gfx@lists.freedesktop.org>; Tue, 26 Nov 2019 13:44:01 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Nov 2019 05:44:01 -0800
X-IronPort-AV: E=Sophos;i="5.69,245,1571727600"; d="scan'208";a="260699068"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by fmsmga003-auth.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Nov 2019 05:43:59 -0800
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 26 Nov 2019 15:42:48 +0200
Message-Id: <e9a709b170355bc2e73ae82571e2ad329c283469.1574775655.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1574775655.git.jani.nikula@intel.com>
References: <cover.1574775655.git.jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH v3 13/13] drm/i915/dsi: add support for DSC
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RW5hYmxlIERTQyBmb3IgRFNJLCBpZiBzcGVjaWZpZWQgaW4gVkJULgoKVGhpcyBzdGlsbCBsYWNr
cyBEU0MgYXdhcmUgZ2V0IGNvbmZpZyBpbXBsZW1lbnRhdGlvbiwgYW5kIHRoZXJlZm9yZQpzdGF0
ZSBjaGVja2VyIHdpbGwgZmFpbC4gQWxzbyBtb2RlIHZhbGlkIGlzIG5vdCB0aGVyZSB5ZXQuCgp2
NDoKLSBjb252ZXJ0X3JnYiA9IHRydWUgKFZhbmRpdGEpCi0gaWdub3JlIG1heCBjZGNsb2NrIGNo
ZWNrIChWYW5kaXRhKQotIHJlbmFtZSBwaXBlX2NvbmZpZyB0byBjcnRjX3N0YXRlCgp2MzoKLSB0
YWtlIGNvbXByZXNzZWQgYnBwIGludG8gYWNjb3VudAoKdjI6Ci0gTnVrZSBjb25uX3N0YXRlLT5t
YXhfcmVxdWVzdGVkX2JwYywgaXQncyBub3QgdXNlZCBvbiBEU0kKCkJzcGVjOiA0OTI2MwpDYzog
VmFuZGl0YSBLdWxrYXJuaSA8dmFuZGl0YS5rdWxrYXJuaUBpbnRlbC5jb20+CkNjOiBWaWxsZSBT
eXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBK
YW5pIE5pa3VsYSA8amFuaS5uaWt1bGFAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaWNsX2RzaS5jIHwgNjcgKysrKysrKysrKysrKysrKysrKysrKysrLS0KIDEg
ZmlsZSBjaGFuZ2VkLCA2NCBpbnNlcnRpb25zKCspLCAzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pY2xfZHNpLmMKaW5kZXggY2FhNDc3YzRiMWFmLi5lMTQyYWM2NGY2
ODAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jCkBAIC0zNCw2ICszNCw3
IEBACiAjaW5jbHVkZSAiaW50ZWxfZGRpLmgiCiAjaW5jbHVkZSAiaW50ZWxfZHNpLmgiCiAjaW5j
bHVkZSAiaW50ZWxfcGFuZWwuaCIKKyNpbmNsdWRlICJpbnRlbF92ZHNjLmgiCiAKIHN0YXRpYyBp
bmxpbmUgaW50IGhlYWRlcl9jcmVkaXRzX2F2YWlsYWJsZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsCiAJCQkJCSAgIGVudW0gdHJhbnNjb2RlciBkc2lfdHJhbnMpCkBAIC0xMDg3
LDYgKzEwODgsOCBAQCBzdGF0aWMgdm9pZCBnZW4xMV9kc2lfcHJlX2VuYWJsZShzdHJ1Y3QgaW50
ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkvKiBzdGVwNTogcHJvZ3JhbSBhbmQgcG93ZXJ1cCBwYW5l
bCAqLwogCWdlbjExX2RzaV9wb3dlcnVwX3BhbmVsKGVuY29kZXIpOwogCisJaW50ZWxfZHNjX2Vu
YWJsZShlbmNvZGVyLCBwaXBlX2NvbmZpZyk7CisKIAkvKiBzdGVwNmM6IGNvbmZpZ3VyZSB0cmFu
c2NvZGVyIHRpbWluZ3MgKi8KIAlnZW4xMV9kc2lfc2V0X3RyYW5zY29kZXJfdGltaW5ncyhlbmNv
ZGVyLCBwaXBlX2NvbmZpZyk7CiAKQEAgLTEyNDgsNiArMTI1MSwxMyBAQCBzdGF0aWMgdm9pZCBn
ZW4xMV9kc2lfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAlnZW4xMV9k
c2lfZGlzYWJsZV9pb19wb3dlcihlbmNvZGVyKTsKIH0KIAorc3RhdGljIGVudW0gZHJtX21vZGVf
c3RhdHVzIGdlbjExX2RzaV9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0
b3IsCisJCQkJCQkgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCit7CisJLyogRklYTUU6
IERTQz8gKi8KKwlyZXR1cm4gaW50ZWxfZHNpX21vZGVfdmFsaWQoY29ubmVjdG9yLCBtb2RlKTsK
K30KKwogc3RhdGljIHZvaWQgZ2VuMTFfZHNpX2dldF90aW1pbmdzKHN0cnVjdCBpbnRlbF9lbmNv
ZGVyICplbmNvZGVyLAogCQkJCSAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmln
KQogewpAQCAtMTI5NSw2ICsxMzA1LDQ4IEBAIHN0YXRpYyB2b2lkIGdlbjExX2RzaV9nZXRfY29u
ZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCXBpcGVfY29uZmlnLT5waXBlX2Jw
cCA9IGJkd19nZXRfcGlwZW1pc2NfYnBwKGNydGMpOwogfQogCitzdGF0aWMgaW50IGdlbjExX2Rz
aV9kc2NfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCisJCQkJ
CXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQoreworCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOworCXN0cnVj
dCBkcm1fZHNjX2NvbmZpZyAqdmRzY19jZmcgPSAmY3J0Y19zdGF0ZS0+ZHNjLmNvbmZpZzsKKwlp
bnQgZHNjX21heF9icGMgPSBJTlRFTF9HRU4oZGV2X3ByaXYpID49IDEyID8gMTIgOiAxMDsKKwli
b29sIHVzZV9kc2M7CisJaW50IHJldDsKKworCXVzZV9kc2MgPSBpbnRlbF9iaW9zX2dldF9kc2Nf
cGFyYW1zKGVuY29kZXIsIGNydGNfc3RhdGUsIGRzY19tYXhfYnBjKTsKKwlpZiAoIXVzZV9kc2Mp
CisJCXJldHVybiAwOworCisJaWYgKGNydGNfc3RhdGUtPnBpcGVfYnBwIDwgOCAqIDMpCisJCXJl
dHVybiAtRUlOVkFMOworCisJLyogRklYTUU6IHNwbGl0IG9ubHkgd2hlbiBuZWNlc3NhcnkgKi8K
KwlpZiAoY3J0Y19zdGF0ZS0+ZHNjLnNsaWNlX2NvdW50ID4gMSkKKwkJY3J0Y19zdGF0ZS0+ZHNj
LmRzY19zcGxpdCA9IHRydWU7CisKKwl2ZHNjX2NmZy0+Y29udmVydF9yZ2IgPSB0cnVlOworCisJ
cmV0ID0gaW50ZWxfZHNjX2NvbXB1dGVfcGFyYW1zKGVuY29kZXIsIGNydGNfc3RhdGUpOworCWlm
IChyZXQpCisJCXJldHVybiByZXQ7CisKKwkvKiBEU0kgc3BlY2lmaWMgc2FuaXR5IGNoZWNrcyBv
biB0aGUgY29tbW9uIGNvZGUgKi8KKwlXQVJOX09OKHZkc2NfY2ZnLT52YnJfZW5hYmxlKTsKKwlX
QVJOX09OKHZkc2NfY2ZnLT5zaW1wbGVfNDIyKTsKKwlXQVJOX09OKHZkc2NfY2ZnLT5waWNfd2lk
dGggJSB2ZHNjX2NmZy0+c2xpY2Vfd2lkdGgpOworCVdBUk5fT04odmRzY19jZmctPnNsaWNlX2hl
aWdodCA8IDgpOworCVdBUk5fT04odmRzY19jZmctPnBpY19oZWlnaHQgJSB2ZHNjX2NmZy0+c2xp
Y2VfaGVpZ2h0KTsKKworCXJldCA9IGRybV9kc2NfY29tcHV0ZV9yY19wYXJhbWV0ZXJzKHZkc2Nf
Y2ZnKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJY3J0Y19zdGF0ZS0+ZHNjLmNvbXBy
ZXNzaW9uX2VuYWJsZSA9IHRydWU7CisKKwlyZXR1cm4gMDsKK30KKwogc3RhdGljIGludCBnZW4x
MV9kc2lfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQkJ
ICAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZywKIAkJCQkgICAgc3RydWN0
IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGUpCkBAIC0xMzI2LDYgKzEzNzgsMTAgQEAg
c3RhdGljIGludCBnZW4xMV9kc2lfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXIsCiAJCXBpcGVfY29uZmlnLT5waXBlX2JwcCA9IDE4OwogCiAJcGlwZV9jb25maWct
PmNsb2NrX3NldCA9IHRydWU7CisKKwlpZiAoZ2VuMTFfZHNpX2RzY19jb21wdXRlX2NvbmZpZyhl
bmNvZGVyLCBwaXBlX2NvbmZpZykpCisJCURSTV9ERUJVR19LTVMoIkF0dGVtcHRpbmcgdG8gdXNl
IERTQyBmYWlsZWRcbiIpOworCiAJcGlwZV9jb25maWctPnBvcnRfY2xvY2sgPSBhZmVfY2xrKGVu
Y29kZXIsIHBpcGVfY29uZmlnKSAvIDU7CiAKIAlyZXR1cm4gMDsKQEAgLTEzMzQsOCArMTM5MCwx
MyBAQCBzdGF0aWMgaW50IGdlbjExX2RzaV9jb21wdXRlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqZW5jb2RlciwKIHN0YXRpYyB2b2lkIGdlbjExX2RzaV9nZXRfcG93ZXJfZG9tYWlucyhz
dHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJCQkJc3RydWN0IGludGVsX2NydGNfc3Rh
dGUgKmNydGNfc3RhdGUpCiB7Ci0JZ2V0X2RzaV9pb19wb3dlcl9kb21haW5zKHRvX2k5MTUoZW5j
b2Rlci0+YmFzZS5kZXYpLAotCQkJCSBlbmNfdG9faW50ZWxfZHNpKCZlbmNvZGVyLT5iYXNlKSk7
CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KGVuY29kZXItPmJhc2Uu
ZGV2KTsKKworCWdldF9kc2lfaW9fcG93ZXJfZG9tYWlucyhpOTE1LCBlbmNfdG9faW50ZWxfZHNp
KCZlbmNvZGVyLT5iYXNlKSk7CisKKwlpZiAoY3J0Y19zdGF0ZS0+ZHNjLmNvbXByZXNzaW9uX2Vu
YWJsZSkKKwkJaW50ZWxfZGlzcGxheV9wb3dlcl9nZXQoaTkxNSwKKwkJCQkJaW50ZWxfZHNjX3Bv
d2VyX2RvbWFpbihjcnRjX3N0YXRlKSk7CiB9CiAKIHN0YXRpYyBib29sIGdlbjExX2RzaV9nZXRf
aHdfc3RhdGUoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCkBAIC0xNDA1LDcgKzE0NjYs
NyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfZnVuY3MgZ2VuMTFfZHNpX2Nv
bm5lY3Rvcl9mdW5jcyA9IHsKIAogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2hl
bHBlcl9mdW5jcyBnZW4xMV9kc2lfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyA9IHsKIAkuZ2V0X21v
ZGVzID0gaW50ZWxfZHNpX2dldF9tb2RlcywKLQkubW9kZV92YWxpZCA9IGludGVsX2RzaV9tb2Rl
X3ZhbGlkLAorCS5tb2RlX3ZhbGlkID0gZ2VuMTFfZHNpX21vZGVfdmFsaWQsCiAJLmF0b21pY19j
aGVjayA9IGludGVsX2RpZ2l0YWxfY29ubmVjdG9yX2F0b21pY19jaGVjaywKIH07CiAKLS0gCjIu
MjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50
ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id BD1E063EBF
	for <lists+intel-gfx@lfdr.de>; Wed, 10 Jul 2019 02:55:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 990BD89951;
	Wed, 10 Jul 2019 00:55:18 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EE6D989951
 for <intel-gfx@lists.freedesktop.org>; Wed, 10 Jul 2019 00:55:15 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Jul 2019 17:55:15 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,472,1557212400"; d="scan'208";a="340915130"
Received: from dceraolo-linux.fm.intel.com ([10.1.27.145])
 by orsmga005.jf.intel.com with ESMTP; 09 Jul 2019 17:55:15 -0700
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  9 Jul 2019 17:54:35 -0700
Message-Id: <20190710005437.3496-11-daniele.ceraolospurio@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190710005437.3496-1-daniele.ceraolospurio@intel.com>
References: <20190710005437.3496-1-daniele.ceraolospurio@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 10/12] drm/i915/uc: prefer intel_gt over i915 in
 GuC/HuC paths
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2l0aCBvdXIgSFcgaW50ZXJmYWNlIGxvZ2ljIG1vdmluZyBmcm9tIGk5MTUgdG8gZ3QgYW5kIHdp
dGggR3VDIGFuZCBIdUMKYmVpbmcgcGFydCBvZiB0aGUgZ3QgSFcsIGl0IG1ha2VzIHNlbnNlIHRv
IHVzZSB0aGUgaW50ZWxfZ3Qgc3RydWN0dXJlCmluc3RlYWQgb2YgaTkxNSBhcyBvdXIgcmVmZXJl
bmNlIG9iamVjdCBpbiBHdUMvSHVDIHBhdGhzLgoKU2lnbmVkLW9mZi1ieTogRGFuaWVsZSBDZXJh
b2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNvbT4KQ2M6IE1pY2hhbCBX
YWpkZWN6a28gPG1pY2hhbC53YWpkZWN6a29AaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2d0LmggICAgICAgICAgICB8IDEwICsrKwogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmMgICAgICAgIHwgNTIgKysrKysrLS0tLS0tCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfZncuYyAgICAgfCA4MSArKysrKysrKysrLS0t
LS0tLS0tCiAuLi4vZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19zdWJtaXNzaW9uLmMgfCA0
MyArKysrKy0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9odWMuYyAgICAg
ICAgfCAyMiArKy0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfaHVjX2Z3LmMg
ICAgIHwgIDQgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjLmMgICAgICAg
ICB8ICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyAgICAgICAgICAg
fCAgOCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmggICAgICAgICAgIHwg
IDQgKy0KIDkgZmlsZXMgY2hhbmdlZCwgMTIwIGluc2VydGlvbnMoKyksIDEwOCBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuaAppbmRleCA4ODBiZTA1YTNmNGEuLmUxODI1
MDlkNDRiYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuaAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5oCkBAIC0xNiw2ICsxNiwxNiBA
QCBzdGF0aWMgaW5saW5lIHN0cnVjdCBpbnRlbF9ndCAqdWNfdG9fZ3Qoc3RydWN0IGludGVsX3Vj
ICp1YykKIAlyZXR1cm4gY29udGFpbmVyX29mKHVjLCBzdHJ1Y3QgaW50ZWxfZ3QsIHVjKTsKIH0K
IAorc3RhdGljIGlubGluZSBzdHJ1Y3QgaW50ZWxfZ3QgKmd1Y190b19ndChzdHJ1Y3QgaW50ZWxf
Z3VjICpndWMpCit7CisJcmV0dXJuIGNvbnRhaW5lcl9vZihndWMsIHN0cnVjdCBpbnRlbF9ndCwg
dWMuZ3VjKTsKK30KKworc3RhdGljIGlubGluZSBzdHJ1Y3QgaW50ZWxfZ3QgKmh1Y190b19ndChz
dHJ1Y3QgaW50ZWxfaHVjICpodWMpCit7CisJcmV0dXJuIGNvbnRhaW5lcl9vZihodWMsIHN0cnVj
dCBpbnRlbF9ndCwgdWMuaHVjKTsKK30KKwogdm9pZCBpbnRlbF9ndF9pbml0X2Vhcmx5KHN0cnVj
dCBpbnRlbF9ndCAqZ3QsIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKIHZvaWQgaW50
ZWxfZ3RfaW5pdF9odyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7CiAKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmMKaW5kZXggNDE3M2IzNWJmMTA0Li42YjU2ZjM5MDcy
YjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5jCkBAIC0yMiw2ICsyMiw3
IEBACiAgKgogICovCiAKKyNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgogI2luY2x1ZGUgImludGVs
X2d1Yy5oIgogI2luY2x1ZGUgImludGVsX2d1Y19hZHMuaCIKICNpbmNsdWRlICJpbnRlbF9ndWNf
c3VibWlzc2lvbi5oIgpAQCAtMjksMTYgKzMwLDE2IEBACiAKIHN0YXRpYyB2b2lkIGdlbjhfZ3Vj
X3JhaXNlX2lycShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2ID0gZ3VjX3RvX2k5MTUoZ3VjKTsKKwlzdHJ1Y3QgaW50ZWxfZ3QgKmd0
ID0gZ3VjX3RvX2d0KGd1Yyk7CiAKLQlJOTE1X1dSSVRFKEdVQ19TRU5EX0lOVEVSUlVQVCwgR1VD
X1NFTkRfVFJJR0dFUik7CisJaW50ZWxfdW5jb3JlX3dyaXRlKGd0LT51bmNvcmUsIEdVQ19TRU5E
X0lOVEVSUlVQVCwgR1VDX1NFTkRfVFJJR0dFUik7CiB9CiAKIHN0YXRpYyB2b2lkIGdlbjExX2d1
Y19yYWlzZV9pcnEoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogewotCXN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdiA9IGd1Y190b19pOTE1KGd1Yyk7CisJc3RydWN0IGludGVsX2d0ICpn
dCA9IGd1Y190b19ndChndWMpOwogCi0JSTkxNV9XUklURShHRU4xMV9HVUNfSE9TVF9JTlRFUlJV
UFQsIDApOworCWludGVsX3VuY29yZV93cml0ZShndC0+dW5jb3JlLCBHRU4xMV9HVUNfSE9TVF9J
TlRFUlJVUFQsIDApOwogfQogCiBzdGF0aWMgaW5saW5lIGk5MTVfcmVnX3QgZ3VjX3NlbmRfcmVn
KHN0cnVjdCBpbnRlbF9ndWMgKmd1YywgdTMyIGkpCkBAIC01MiwxMSArNTMsMTEgQEAgc3RhdGlj
IGlubGluZSBpOTE1X3JlZ190IGd1Y19zZW5kX3JlZyhzdHJ1Y3QgaW50ZWxfZ3VjICpndWMsIHUz
MiBpKQogCiB2b2lkIGludGVsX2d1Y19pbml0X3NlbmRfcmVncyhzdHJ1Y3QgaW50ZWxfZ3VjICpn
dWMpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gZ3VjX3RvX2k5MTUo
Z3VjKTsKKwlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gZ3VjX3RvX2d0KGd1Yyk7CiAJZW51bSBmb3Jj
ZXdha2VfZG9tYWlucyBmd19kb21haW5zID0gMDsKIAl1bnNpZ25lZCBpbnQgaTsKIAotCWlmIChJ
TlRFTF9HRU4oZGV2X3ByaXYpID49IDExKSB7CisJaWYgKElOVEVMX0dFTihndC0+aTkxNSkgPj0g
MTEpIHsKIAkJZ3VjLT5zZW5kX3JlZ3MuYmFzZSA9CiAJCQkJaTkxNV9tbWlvX3JlZ19vZmZzZXQo
R0VOMTFfU09GVF9TQ1JBVENIKDApKTsKIAkJZ3VjLT5zZW5kX3JlZ3MuY291bnQgPSBHRU4xMV9T
T0ZUX1NDUkFUQ0hfQ09VTlQ7CkBAIC02Nyw3ICs2OCw3IEBAIHZvaWQgaW50ZWxfZ3VjX2luaXRf
c2VuZF9yZWdzKHN0cnVjdCBpbnRlbF9ndWMgKmd1YykKIAl9CiAKIAlmb3IgKGkgPSAwOyBpIDwg
Z3VjLT5zZW5kX3JlZ3MuY291bnQ7IGkrKykgewotCQlmd19kb21haW5zIHw9IGludGVsX3VuY29y
ZV9mb3JjZXdha2VfZm9yX3JlZygmZGV2X3ByaXYtPnVuY29yZSwKKwkJZndfZG9tYWlucyB8PSBp
bnRlbF91bmNvcmVfZm9yY2V3YWtlX2Zvcl9yZWcoZ3QtPnVuY29yZSwKIAkJCQkJZ3VjX3NlbmRf
cmVnKGd1YywgaSksCiAJCQkJCUZXX1JFR19SRUFEIHwgRldfUkVHX1dSSVRFKTsKIAl9CkBAIC0x
MjcsNyArMTI4LDcgQEAgc3RhdGljIHZvaWQgZ3VjX3NoYXJlZF9kYXRhX2Rlc3Ryb3koc3RydWN0
IGludGVsX2d1YyAqZ3VjKQogCiBpbnQgaW50ZWxfZ3VjX2luaXQoc3RydWN0IGludGVsX2d1YyAq
Z3VjKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGd1Y190b19pOTE1
KGd1Yyk7CisJc3RydWN0IGludGVsX2d0ICpndCA9IGd1Y190b19ndChndWMpOwogCWludCByZXQ7
CiAKIAlyZXQgPSBpbnRlbF91Y19md19pbml0KCZndWMtPmZ3KTsKQEAgLTE1Myw3ICsxNTQsNyBA
QCBpbnQgaW50ZWxfZ3VjX2luaXQoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogCQlnb3RvIGVycl9h
ZHM7CiAKIAkvKiBXZSBuZWVkIHRvIG5vdGlmeSB0aGUgZ3VjIHdoZW5ldmVyIHdlIGNoYW5nZSB0
aGUgR0dUVCAqLwotCWk5MTVfZ2d0dF9lbmFibGVfZ3VjKGRldl9wcml2KTsKKwlpOTE1X2dndHRf
ZW5hYmxlX2d1YyhndC0+Z2d0dCk7CiAKIAlyZXR1cm4gMDsKIApAQCAtMTcyLDkgKzE3Myw5IEBA
IGludCBpbnRlbF9ndWNfaW5pdChzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAKIHZvaWQgaW50ZWxf
Z3VjX2Zpbmkoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiA9IGd1Y190b19pOTE1KGd1Yyk7CisJc3RydWN0IGludGVsX2d0ICpndCA9
IGd1Y190b19ndChndWMpOwogCi0JaTkxNV9nZ3R0X2Rpc2FibGVfZ3VjKGRldl9wcml2KTsKKwlp
OTE1X2dndHRfZGlzYWJsZV9ndWMoZ3QtPmdndHQpOwogCiAJaW50ZWxfZ3VjX2N0X2ZpbmkoJmd1
Yy0+Y3QpOwogCkBAIC0yODIsNyArMjgzLDcgQEAgc3RhdGljIHUzMiBndWNfY3RsX2Fkc19mbGFn
cyhzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAgKi8KIHZvaWQgaW50ZWxfZ3VjX2luaXRfcGFyYW1z
KHN0cnVjdCBpbnRlbF9ndWMgKmd1YykKIHsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYgPSBndWNfdG9faTkxNShndWMpOworCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSA9
IGd1Y190b19ndChndWMpLT51bmNvcmU7CiAJdTMyIHBhcmFtc1tHVUNfQ1RMX01BWF9EV09SRFNd
OwogCWludCBpOwogCkBAIC0zMDIsMTQgKzMwMywxNCBAQCB2b2lkIGludGVsX2d1Y19pbml0X3Bh
cmFtcyhzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAJICogdGhleSBhcmUgcG93ZXIgY29udGV4dCBz
YXZlZCBzbyBpdCdzIG9rIHRvIHJlbGVhc2UgZm9yY2V3YWtlCiAJICogd2hlbiB3ZSBhcmUgZG9u
ZSBoZXJlIGFuZCB0YWtlIGl0IGFnYWluIGF0IHhmZXIgdGltZS4KIAkgKi8KLQlpbnRlbF91bmNv
cmVfZm9yY2V3YWtlX2dldCgmZGV2X3ByaXYtPnVuY29yZSwgRk9SQ0VXQUtFX0JMSVRURVIpOwor
CWludGVsX3VuY29yZV9mb3JjZXdha2VfZ2V0KHVuY29yZSwgRk9SQ0VXQUtFX0JMSVRURVIpOwog
Ci0JSTkxNV9XUklURShTT0ZUX1NDUkFUQ0goMCksIDApOworCWludGVsX3VuY29yZV93cml0ZSh1
bmNvcmUsIFNPRlRfU0NSQVRDSCgwKSwgMCk7CiAKIAlmb3IgKGkgPSAwOyBpIDwgR1VDX0NUTF9N
QVhfRFdPUkRTOyBpKyspCi0JCUk5MTVfV1JJVEUoU09GVF9TQ1JBVENIKDEgKyBpKSwgcGFyYW1z
W2ldKTsKKwkJaW50ZWxfdW5jb3JlX3dyaXRlKHVuY29yZSwgU09GVF9TQ1JBVENIKDEgKyBpKSwg
cGFyYW1zW2ldKTsKIAotCWludGVsX3VuY29yZV9mb3JjZXdha2VfcHV0KCZkZXZfcHJpdi0+dW5j
b3JlLCBGT1JDRVdBS0VfQkxJVFRFUik7CisJaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9wdXQodW5j
b3JlLCBGT1JDRVdBS0VfQkxJVFRFUik7CiB9CiAKIGludCBpbnRlbF9ndWNfc2VuZF9ub3Aoc3Ry
dWN0IGludGVsX2d1YyAqZ3VjLCBjb25zdCB1MzIgKmFjdGlvbiwgdTMyIGxlbiwKQEAgLTMzMCw4
ICszMzEsNyBAQCB2b2lkIGludGVsX2d1Y190b19ob3N0X2V2ZW50X2hhbmRsZXJfbm9wKHN0cnVj
dCBpbnRlbF9ndWMgKmd1YykKIGludCBpbnRlbF9ndWNfc2VuZF9tbWlvKHN0cnVjdCBpbnRlbF9n
dWMgKmd1YywgY29uc3QgdTMyICphY3Rpb24sIHUzMiBsZW4sCiAJCQl1MzIgKnJlc3BvbnNlX2J1
ZiwgdTMyIHJlc3BvbnNlX2J1Zl9zaXplKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiA9IGd1Y190b19pOTE1KGd1Yyk7Ci0Jc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3Jl
ID0gJmRldl9wcml2LT51bmNvcmU7CisJc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlID0gZ3Vj
X3RvX2d0KGd1YyktPnVuY29yZTsKIAl1MzIgc3RhdHVzOwogCWludCBpOwogCWludCByZXQ7CkBA
IC0zODAsNyArMzgwLDggQEAgaW50IGludGVsX2d1Y19zZW5kX21taW8oc3RydWN0IGludGVsX2d1
YyAqZ3VjLCBjb25zdCB1MzIgKmFjdGlvbiwgdTMyIGxlbiwKIAkJaW50IGNvdW50ID0gbWluKHJl
c3BvbnNlX2J1Zl9zaXplLCBndWMtPnNlbmRfcmVncy5jb3VudCAtIDEpOwogCiAJCWZvciAoaSA9
IDA7IGkgPCBjb3VudDsgaSsrKQotCQkJcmVzcG9uc2VfYnVmW2ldID0gSTkxNV9SRUFEKGd1Y19z
ZW5kX3JlZyhndWMsIGkgKyAxKSk7CisJCQlyZXNwb25zZV9idWZbaV0gPSBpbnRlbF91bmNvcmVf
cmVhZCh1bmNvcmUsCisJCQkJCQkJICAgIGd1Y19zZW5kX3JlZyhndWMsIGkgKyAxKSk7CiAJfQog
CiAJLyogVXNlIGRhdGEgZnJvbSB0aGUgR3VDIHJlc3BvbnNlIGFzIG91ciByZXR1cm4gdmFsdWUg
Ki8KQEAgLTQ1NCw3ICs0NTUsNyBAQCBpbnQgaW50ZWxfZ3VjX2F1dGhfaHVjKHN0cnVjdCBpbnRl
bF9ndWMgKmd1YywgdTMyIHJzYV9vZmZzZXQpCiAgKi8KIGludCBpbnRlbF9ndWNfc3VzcGVuZChz
dHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gZ3VjX3RvX2k5MTUoZ3VjKTsKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSBn
dWNfdG9fZ3QoZ3VjKS0+dW5jb3JlOwogCWludCByZXQ7CiAJdTMyIHN0YXR1czsKIAl1MzIgYWN0
aW9uW10gPSB7CkBAIC00NzIsMTMgKzQ3MywxNCBAQCBpbnQgaW50ZWxfZ3VjX3N1c3BlbmQoc3Ry
dWN0IGludGVsX2d1YyAqZ3VjKQogCSAqIGluIHByb2dyZXNzIHNvIHdlIG5lZWQgdG8gdGFrZSBj
YXJlIG9mIHRoYXQgb3Vyc2VsdmVzIGFzIHdlbGwuCiAJICovCiAKLQlJOTE1X1dSSVRFKFNPRlRf
U0NSQVRDSCgxNCksIElOVEVMX0dVQ19TTEVFUF9TVEFURV9JTlZBTElEX01BU0spOworCWludGVs
X3VuY29yZV93cml0ZSh1bmNvcmUsIFNPRlRfU0NSQVRDSCgxNCksCisJCQkgICBJTlRFTF9HVUNf
U0xFRVBfU1RBVEVfSU5WQUxJRF9NQVNLKTsKIAogCXJldCA9IGludGVsX2d1Y19zZW5kKGd1Yywg
YWN0aW9uLCBBUlJBWV9TSVpFKGFjdGlvbikpOwogCWlmIChyZXQpCiAJCXJldHVybiByZXQ7CiAK
LQlyZXQgPSBfX2ludGVsX3dhaXRfZm9yX3JlZ2lzdGVyKCZkZXZfcHJpdi0+dW5jb3JlLCBTT0ZU
X1NDUkFUQ0goMTQpLAorCXJldCA9IF9faW50ZWxfd2FpdF9mb3JfcmVnaXN0ZXIodW5jb3JlLCBT
T0ZUX1NDUkFUQ0goMTQpLAogCQkJCQlJTlRFTF9HVUNfU0xFRVBfU1RBVEVfSU5WQUxJRF9NQVNL
LAogCQkJCQkwLCAwLCAxMCwgJnN0YXR1cyk7CiAJaWYgKHJldCkKQEAgLTU3NCwxNyArNTc2LDE3
IEBAIGludCBpbnRlbF9ndWNfcmVzdW1lKHN0cnVjdCBpbnRlbF9ndWMgKmd1YykKICAqLwogc3Ry
dWN0IGk5MTVfdm1hICppbnRlbF9ndWNfYWxsb2NhdGVfdm1hKHN0cnVjdCBpbnRlbF9ndWMgKmd1
YywgdTMyIHNpemUpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gZ3Vj
X3RvX2k5MTUoZ3VjKTsKKwlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gZ3VjX3RvX2d0KGd1Yyk7CiAJ
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKIAlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsK
IAl1NjQgZmxhZ3M7CiAJaW50IHJldDsKIAotCW9iaiA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVf
c2htZW0oZGV2X3ByaXYsIHNpemUpOworCW9iaiA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfc2ht
ZW0oZ3QtPmk5MTUsIHNpemUpOwogCWlmIChJU19FUlIob2JqKSkKIAkJcmV0dXJuIEVSUl9DQVNU
KG9iaik7CiAKLQl2bWEgPSBpOTE1X3ZtYV9pbnN0YW5jZShvYmosICZkZXZfcHJpdi0+Z2d0dC52
bSwgTlVMTCk7CisJdm1hID0gaTkxNV92bWFfaW5zdGFuY2Uob2JqLCAmZ3QtPmdndHQtPnZtLCBO
VUxMKTsKIAlpZiAoSVNfRVJSKHZtYSkpCiAJCWdvdG8gZXJyOwogCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfZncuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3VjL2ludGVsX2d1Y19mdy5jCmluZGV4IGVlOTVkNDk2MGM1Yy4uOTgzMDVlM2ZkNDJj
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfZncuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfZncuYwpAQCAtMjcsNiAr
MjcsNyBAQAogICogICAgQWxleCBEYWkgPHl1LmRhaUBpbnRlbC5jb20+CiAgKi8KIAorI2luY2x1
ZGUgImd0L2ludGVsX2d0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3VjX2Z3LmgiCiAjaW5jbHVkZSAi
aTkxNV9kcnYuaCIKIApAQCAtMTI5LDM1ICsxMzAsMzcgQEAgdm9pZCBpbnRlbF9ndWNfZndfaW5p
dF9lYXJseShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAKIHN0YXRpYyB2b2lkIGd1Y19wcmVwYXJl
X3hmZXIoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiA9IGd1Y190b19pOTE1KGd1Yyk7CisJc3RydWN0IGludGVsX2d0ICpndCA9IGd1
Y190b19ndChndWMpOworCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSA9IGd0LT51bmNvcmU7
CisJdTMyIHNoaW1fZmxhZ3MgPSBHVUNfRElTQUJMRV9TUkFNX0lOSVRfVE9fWkVST0VTIHwKKwkJ
CSBHVUNfRU5BQkxFX1JFQURfQ0FDSEVfTE9HSUMgfAorCQkJIEdVQ19FTkFCTEVfTUlBX0NBQ0hJ
TkcgfAorCQkJIEdVQ19FTkFCTEVfUkVBRF9DQUNIRV9GT1JfU1JBTV9EQVRBIHwKKwkJCSBHVUNf
RU5BQkxFX1JFQURfQ0FDSEVfRk9SX1dPUENNX0RBVEEgfAorCQkJIEdVQ19FTkFCTEVfTUlBX0NM
T0NLX0dBVElORzsKIAogCS8qIE11c3QgcHJvZ3JhbSB0aGlzIHJlZ2lzdGVyIGJlZm9yZSBsb2Fk
aW5nIHRoZSB1Y29kZSB3aXRoIERNQSAqLwotCUk5MTVfV1JJVEUoR1VDX1NISU1fQ09OVFJPTCwg
R1VDX0RJU0FCTEVfU1JBTV9JTklUX1RPX1pFUk9FUyB8Ci0JCQkJICAgICBHVUNfRU5BQkxFX1JF
QURfQ0FDSEVfTE9HSUMgfAotCQkJCSAgICAgR1VDX0VOQUJMRV9NSUFfQ0FDSElORyB8Ci0JCQkJ
ICAgICBHVUNfRU5BQkxFX1JFQURfQ0FDSEVfRk9SX1NSQU1fREFUQSB8Ci0JCQkJICAgICBHVUNf
RU5BQkxFX1JFQURfQ0FDSEVfRk9SX1dPUENNX0RBVEEgfAotCQkJCSAgICAgR1VDX0VOQUJMRV9N
SUFfQ0xPQ0tfR0FUSU5HKTsKLQotCWlmIChJU19HRU45X0xQKGRldl9wcml2KSkKLQkJSTkxNV9X
UklURShHRU45TFBfR1RfUE1fQ09ORklHLCBHVF9ET09SQkVMTF9FTkFCTEUpOworCWludGVsX3Vu
Y29yZV93cml0ZSh1bmNvcmUsIEdVQ19TSElNX0NPTlRST0wsIHNoaW1fZmxhZ3MpOworCisJaWYg
KElTX0dFTjlfTFAoZ3QtPmk5MTUpKQorCQlpbnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLCBHRU45
TFBfR1RfUE1fQ09ORklHLCBHVF9ET09SQkVMTF9FTkFCTEUpOwogCWVsc2UKLQkJSTkxNV9XUklU
RShHRU45X0dUX1BNX0NPTkZJRywgR1RfRE9PUkJFTExfRU5BQkxFKTsKKwkJaW50ZWxfdW5jb3Jl
X3dyaXRlKHVuY29yZSwgR0VOOV9HVF9QTV9DT05GSUcsIEdUX0RPT1JCRUxMX0VOQUJMRSk7CiAK
LQlpZiAoSVNfR0VOKGRldl9wcml2LCA5KSkgeworCWlmIChJU19HRU4oZ3QtPmk5MTUsIDkpKSB7
CiAJCS8qIERPUCBDbG9jayBHYXRpbmcgRW5hYmxlIGZvciBHdUMgY2xvY2tzICovCi0JCUk5MTVf
V1JJVEUoR0VON19NSVNDQ1BDVEwsIChHRU44X0RPUF9DTE9DS19HQVRFX0dVQ19FTkFCTEUgfAot
CQkJCQkgICAgSTkxNV9SRUFEKEdFTjdfTUlTQ0NQQ1RMKSkpOworCQlpbnRlbF91bmNvcmVfcm13
KHVuY29yZSwgR0VON19NSVNDQ1BDVEwsCisJCQkJIDAsIEdFTjhfRE9QX0NMT0NLX0dBVEVfR1VD
X0VOQUJMRSk7CiAKIAkJLyogYWxsb3dzIGZvciA1dXMgKGluIDEwbnMgdW5pdHMpIGJlZm9yZSBH
VCBjYW4gZ28gdG8gUkM2ICovCi0JCUk5MTVfV1JJVEUoR1VDX0FSQVRfQzZESVMsIDB4MUZGKTsK
KwkJaW50ZWxfdW5jb3JlX3dyaXRlKHVuY29yZSwgR1VDX0FSQVRfQzZESVMsIDB4MUZGKTsKIAl9
CiB9CiAKIC8qIENvcHkgUlNBIHNpZ25hdHVyZSBmcm9tIHRoZSBmdyBpbWFnZSB0byBIVyBmb3Ig
dmVyaWZpY2F0aW9uICovCiBzdGF0aWMgdm9pZCBndWNfeGZlcl9yc2Eoc3RydWN0IGludGVsX2d1
YyAqZ3VjKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGd1Y190b19p
OTE1KGd1Yyk7CisJc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlID0gZ3VjX3RvX2d0KGd1Yykt
PnVuY29yZTsKIAlzdHJ1Y3QgaW50ZWxfdWNfZncgKmZ3ID0gJmd1Yy0+Znc7CiAJc3RydWN0IHNn
X3RhYmxlICpwYWdlcyA9IGZ3LT5vYmotPm1tLnBhZ2VzOwogCXUzMiByc2FbVU9TX1JTQV9TQ1JB
VENIX0NPVU5UXTsKQEAgLTE2NywxNSArMTcwLDEzIEBAIHN0YXRpYyB2b2lkIGd1Y194ZmVyX3Jz
YShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAJCQkgICByc2EsIHNpemVvZihyc2EpLCBmdy0+cnNh
X29mZnNldCk7CiAKIAlmb3IgKGkgPSAwOyBpIDwgVU9TX1JTQV9TQ1JBVENIX0NPVU5UOyBpKysp
Ci0JCUk5MTVfV1JJVEUoVU9TX1JTQV9TQ1JBVENIKGkpLCByc2FbaV0pOworCQlpbnRlbF91bmNv
cmVfd3JpdGUodW5jb3JlLCBVT1NfUlNBX1NDUkFUQ0goaSksIHJzYVtpXSk7CiB9CiAKLXN0YXRp
YyBib29sIGd1Y194ZmVyX2NvbXBsZXRlZChzdHJ1Y3QgaW50ZWxfZ3VjICpndWMsIHUzMiAqc3Rh
dHVzKQorc3RhdGljIGJvb2wgZ3VjX3hmZXJfY29tcGxldGVkKHN0cnVjdCBpbnRlbF91bmNvcmUg
KnVuY29yZSwgdTMyICpzdGF0dXMpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gZ3VjX3RvX2k5MTUoZ3VjKTsKLQogCS8qIERpZCB3ZSBjb21wbGV0ZSB0aGUgeGZlcj8g
Ki8KLQkqc3RhdHVzID0gSTkxNV9SRUFEKERNQV9DVFJMKTsKKwkqc3RhdHVzID0gaW50ZWxfdW5j
b3JlX3JlYWQodW5jb3JlLCBETUFfQ1RSTCk7CiAJcmV0dXJuICEoKnN0YXR1cyAmIFNUQVJUX0RN
QSk7CiB9CiAKQEAgLTE4OCwxMCArMTg5LDkgQEAgc3RhdGljIGJvb2wgZ3VjX3hmZXJfY29tcGxl
dGVkKHN0cnVjdCBpbnRlbF9ndWMgKmd1YywgdTMyICpzdGF0dXMpCiAgKiBUaGlzIGlzIHVzZWQg
Zm9yIHBvbGxpbmcgdGhlIEd1QyBzdGF0dXMgaW4gYSB3YWl0X2ZvcigpCiAgKiBsb29wIGJlbG93
LgogICovCi1zdGF0aWMgaW5saW5lIGJvb2wgZ3VjX3JlYWR5KHN0cnVjdCBpbnRlbF9ndWMgKmd1
YywgdTMyICpzdGF0dXMpCitzdGF0aWMgaW5saW5lIGJvb2wgZ3VjX3JlYWR5KHN0cnVjdCBpbnRl
bF91bmNvcmUgKnVuY29yZSwgdTMyICpzdGF0dXMpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2ID0gZ3VjX3RvX2k5MTUoZ3VjKTsKLQl1MzIgdmFsID0gSTkxNV9SRUFEKEdV
Q19TVEFUVVMpOworCXUzMiB2YWwgPSBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIEdVQ19TVEFU
VVMpOwogCXUzMiB1a192YWwgPSB2YWwgJiBHU19VS0VSTkVMX01BU0s7CiAKIAkqc3RhdHVzID0g
dmFsOwpAQCAtMTk5LDkgKzE5OSw4IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBndWNfcmVhZHkoc3Ry
dWN0IGludGVsX2d1YyAqZ3VjLCB1MzIgKnN0YXR1cykKIAkJKCh2YWwgJiBHU19NSUFfQ09SRV9T
VEFURSkgJiYgKHVrX3ZhbCA9PSBHU19VS0VSTkVMX0xBUElDX0RPTkUpKTsKIH0KIAotc3RhdGlj
IGludCBndWNfd2FpdF91Y29kZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCitzdGF0aWMgaW50IGd1
Y193YWl0X3Vjb2RlKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSkKIHsKLQlzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGd1Y190b19pOTE1KGd1Yyk7CiAJdTMyIHN0YXR1czsKIAlp
bnQgcmV0OwogCkBAIC0yMTMsNyArMjEyLDcgQEAgc3RhdGljIGludCBndWNfd2FpdF91Y29kZShz
dHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAJICogKEhpZ2hlciBsZXZlbHMgb2YgdGhlIGRyaXZlciBt
YXkgZGVjaWRlIHRvIHJlc2V0IHRoZSBHdUMgYW5kCiAJICogYXR0ZW1wdCB0aGUgdWNvZGUgbG9h
ZCBhZ2FpbiBpZiB0aGlzIGhhcHBlbnMuKQogCSAqLwotCXJldCA9IHdhaXRfZm9yKGd1Y19yZWFk
eShndWMsICZzdGF0dXMpLCAxMDApOworCXJldCA9IHdhaXRfZm9yKGd1Y19yZWFkeSh1bmNvcmUs
ICZzdGF0dXMpLCAxMDApOwogCURSTV9ERUJVR19EUklWRVIoIkd1QyBzdGF0dXMgJSN4XG4iLCBz
dGF0dXMpOwogCiAJaWYgKChzdGF0dXMgJiBHU19CT09UUk9NX01BU0spID09IEdTX0JPT1RST01f
UlNBX0ZBSUxFRCkgewpAQCAtMjIzLDExICsyMjIsMTEgQEAgc3RhdGljIGludCBndWNfd2FpdF91
Y29kZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAKIAlpZiAoKHN0YXR1cyAmIEdTX1VLRVJORUxf
TUFTSykgPT0gR1NfVUtFUk5FTF9FWENFUFRJT04pIHsKIAkJRFJNX0VSUk9SKCJHdUMgZmlybXdh
cmUgZXhjZXB0aW9uLiBFSVA6ICUjeFxuIiwKLQkJCSAgaW50ZWxfdW5jb3JlX3JlYWQoJmk5MTUt
PnVuY29yZSwgU09GVF9TQ1JBVENIKDEzKSkpOworCQkJICBpbnRlbF91bmNvcmVfcmVhZCh1bmNv
cmUsIFNPRlRfU0NSQVRDSCgxMykpKTsKIAkJcmV0ID0gLUVOWElPOwogCX0KIAotCWlmIChyZXQg
PT0gMCAmJiAhZ3VjX3hmZXJfY29tcGxldGVkKGd1YywgJnN0YXR1cykpIHsKKwlpZiAocmV0ID09
IDAgJiYgIWd1Y194ZmVyX2NvbXBsZXRlZCh1bmNvcmUsICZzdGF0dXMpKSB7CiAJCURSTV9FUlJP
UigiR3VDIGlzIHJlYWR5LCBidXQgdGhlIHhmZXIgJTA4eCBpcyBpbmNvbXBsZXRlXG4iLAogCQkJ
ICBzdGF0dXMpOwogCQlyZXQgPSAtRU5YSU87CkBAIC0yNDUsNyArMjQ0LDcgQEAgc3RhdGljIGlu
dCBndWNfd2FpdF91Y29kZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAgKi8KIHN0YXRpYyBpbnQg
Z3VjX3hmZXJfdWNvZGUoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogewotCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdiA9IGd1Y190b19pOTE1KGd1Yyk7CisJc3RydWN0IGludGVsX3Vu
Y29yZSAqdW5jb3JlID0gZ3VjX3RvX2d0KGd1YyktPnVuY29yZTsKIAlzdHJ1Y3QgaW50ZWxfdWNf
ZncgKmd1Y19mdyA9ICZndWMtPmZ3OwogCXVuc2lnbmVkIGxvbmcgb2Zmc2V0OwogCkBAIC0yNTMs
MjQgKzI1MiwyNiBAQCBzdGF0aWMgaW50IGd1Y194ZmVyX3Vjb2RlKHN0cnVjdCBpbnRlbF9ndWMg
Kmd1YykKIAkgKiBUaGUgaGVhZGVyIHBsdXMgdUNvZGUgd2lsbCBiZSBjb3BpZWQgdG8gV09QQ00g
dmlhIERNQSwgZXhjbHVkaW5nIGFueQogCSAqIG90aGVyIGNvbXBvbmVudHMKIAkgKi8KLQlJOTE1
X1dSSVRFKERNQV9DT1BZX1NJWkUsIGd1Y19mdy0+aGVhZGVyX3NpemUgKyBndWNfZnctPnVjb2Rl
X3NpemUpOworCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsIERNQV9DT1BZX1NJWkUsCisJCQkg
ICBndWNfZnctPmhlYWRlcl9zaXplICsgZ3VjX2Z3LT51Y29kZV9zaXplKTsKIAogCS8qIFNldCB0
aGUgc291cmNlIGFkZHJlc3MgZm9yIHRoZSBuZXcgYmxvYiAqLwogCW9mZnNldCA9IGludGVsX3Vj
X2Z3X2dndHRfb2Zmc2V0KGd1Y19mdykgKyBndWNfZnctPmhlYWRlcl9vZmZzZXQ7Ci0JSTkxNV9X
UklURShETUFfQUREUl8wX0xPVywgbG93ZXJfMzJfYml0cyhvZmZzZXQpKTsKLQlJOTE1X1dSSVRF
KERNQV9BRERSXzBfSElHSCwgdXBwZXJfMzJfYml0cyhvZmZzZXQpICYgMHhGRkZGKTsKKwlpbnRl
bF91bmNvcmVfd3JpdGUodW5jb3JlLCBETUFfQUREUl8wX0xPVywgbG93ZXJfMzJfYml0cyhvZmZz
ZXQpKTsKKwlpbnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLCBETUFfQUREUl8wX0hJR0gsIHVwcGVy
XzMyX2JpdHMob2Zmc2V0KSAmIDB4RkZGRik7CiAKIAkvKgogCSAqIFNldCB0aGUgRE1BIGRlc3Rp
bmF0aW9uLiBDdXJyZW50IHVDb2RlIGV4cGVjdHMgdGhlIGNvZGUgdG8gYmUKIAkgKiBsb2FkZWQg
YXQgOGs7IGxvY2F0aW9ucyBiZWxvdyB0aGlzIGFyZSB1c2VkIGZvciB0aGUgc3RhY2suCiAJICov
Ci0JSTkxNV9XUklURShETUFfQUREUl8xX0xPVywgMHgyMDAwKTsKLQlJOTE1X1dSSVRFKERNQV9B
RERSXzFfSElHSCwgRE1BX0FERFJFU1NfU1BBQ0VfV09QQ00pOworCWludGVsX3VuY29yZV93cml0
ZSh1bmNvcmUsIERNQV9BRERSXzFfTE9XLCAweDIwMDApOworCWludGVsX3VuY29yZV93cml0ZSh1
bmNvcmUsIERNQV9BRERSXzFfSElHSCwgRE1BX0FERFJFU1NfU1BBQ0VfV09QQ00pOwogCiAJLyog
RmluYWxseSBzdGFydCB0aGUgRE1BICovCi0JSTkxNV9XUklURShETUFfQ1RSTCwgX01BU0tFRF9C
SVRfRU5BQkxFKFVPU19NT1ZFIHwgU1RBUlRfRE1BKSk7CisJaW50ZWxfdW5jb3JlX3dyaXRlKHVu
Y29yZSwgRE1BX0NUUkwsCisJCQkgICBfTUFTS0VEX0JJVF9FTkFCTEUoVU9TX01PVkUgfCBTVEFS
VF9ETUEpKTsKIAotCXJldHVybiBndWNfd2FpdF91Y29kZShndWMpOworCXJldHVybiBndWNfd2Fp
dF91Y29kZSh1bmNvcmUpOwogfQogLyoKICAqIExvYWQgdGhlIEd1QyBmaXJtd2FyZSBibG9iIGlu
dG8gdGhlIE1pbnV0ZUlBLgpAQCAtMjc4LDEyICsyNzksMTIgQEAgc3RhdGljIGludCBndWNfeGZl
cl91Y29kZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiBzdGF0aWMgaW50IGd1Y19md194ZmVyKHN0
cnVjdCBpbnRlbF91Y19mdyAqZ3VjX2Z3KQogewogCXN0cnVjdCBpbnRlbF9ndWMgKmd1YyA9IGNv
bnRhaW5lcl9vZihndWNfZncsIHN0cnVjdCBpbnRlbF9ndWMsIGZ3KTsKLQlzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSBndWNfdG9faTkxNShndWMpOworCXN0cnVjdCBpbnRlbF91
bmNvcmUgKnVuY29yZSA9IGd1Y190b19ndChndWMpLT51bmNvcmU7CiAJaW50IHJldDsKIAogCUdF
TV9CVUdfT04oZ3VjX2Z3LT50eXBlICE9IElOVEVMX1VDX0ZXX1RZUEVfR1VDKTsKIAotCWludGVs
X3VuY29yZV9mb3JjZXdha2VfZ2V0KCZkZXZfcHJpdi0+dW5jb3JlLCBGT1JDRVdBS0VfQUxMKTsK
KwlpbnRlbF91bmNvcmVfZm9yY2V3YWtlX2dldCh1bmNvcmUsIEZPUkNFV0FLRV9BTEwpOwogCiAJ
Z3VjX3ByZXBhcmVfeGZlcihndWMpOwogCkBAIC0yOTYsNyArMjk3LDcgQEAgc3RhdGljIGludCBn
dWNfZndfeGZlcihzdHJ1Y3QgaW50ZWxfdWNfZncgKmd1Y19mdykKIAogCXJldCA9IGd1Y194ZmVy
X3Vjb2RlKGd1Yyk7CiAKLQlpbnRlbF91bmNvcmVfZm9yY2V3YWtlX3B1dCgmZGV2X3ByaXYtPnVu
Y29yZSwgRk9SQ0VXQUtFX0FMTCk7CisJaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9wdXQodW5jb3Jl
LCBGT1JDRVdBS0VfQUxMKTsKIAogCXJldHVybiByZXQ7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfc3VibWlzc2lvbi5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uYwppbmRleCAyMzkwNjIyOGI5YjQu
LjllYzZlYjcxZjM3ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50
ZWxfZ3VjX3N1Ym1pc3Npb24uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRl
bF9ndWNfc3VibWlzc2lvbi5jCkBAIC0yOCw2ICsyOCw3IEBACiAKICNpbmNsdWRlICJndC9pbnRl
bF9jb250ZXh0LmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3BtLmgiCisjaW5jbHVkZSAi
Z3QvaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJndC9pbnRlbF9scmNfcmVnLmgiCiAjaW5jbHVkZSAi
aW50ZWxfZ3VjX3N1Ym1pc3Npb24uaCIKIApAQCAtMjAxLDEwICsyMDIsMTAgQEAgc3RhdGljIHN0
cnVjdCBndWNfZG9vcmJlbGxfaW5mbyAqX19nZXRfZG9vcmJlbGwoc3RydWN0IGludGVsX2d1Y19j
bGllbnQgKmNsaWVudCkKIAogc3RhdGljIGJvb2wgX19kb29yYmVsbF92YWxpZChzdHJ1Y3QgaW50
ZWxfZ3VjICpndWMsIHUxNiBkYl9pZCkKIHsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYgPSBndWNfdG9faTkxNShndWMpOworCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSA9
IGd1Y190b19ndChndWMpLT51bmNvcmU7CiAKIAlHRU1fQlVHX09OKGRiX2lkID49IEdVQ19OVU1f
RE9PUkJFTExTKTsKLQlyZXR1cm4gSTkxNV9SRUFEKEdFTjhfRFJCUkVHTChkYl9pZCkpICYgR0VO
OF9EUkJfVkFMSUQ7CisJcmV0dXJuIGludGVsX3VuY29yZV9yZWFkKHVuY29yZSwgR0VOOF9EUkJS
RUdMKGRiX2lkKSkgJiBHRU44X0RSQl9WQUxJRDsKIH0KIAogc3RhdGljIHZvaWQgX19pbml0X2Rv
b3JiZWxsKHN0cnVjdCBpbnRlbF9ndWNfY2xpZW50ICpjbGllbnQpCkBAIC0xMDAzLDkgKzEwMDQs
MTAgQEAgdm9pZCBpbnRlbF9ndWNfc3VibWlzc2lvbl9maW5pKHN0cnVjdCBpbnRlbF9ndWMgKmd1
YykKIAkJZ3VjX3N0YWdlX2Rlc2NfcG9vbF9kZXN0cm95KGd1Yyk7CiB9CiAKLXN0YXRpYyB2b2lk
IGd1Y19pbnRlcnJ1cHRzX2NhcHR1cmUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
KQorc3RhdGljIHZvaWQgZ3VjX2ludGVycnVwdHNfY2FwdHVyZShzdHJ1Y3QgaW50ZWxfZ3QgKmd0
KQogewotCXN0cnVjdCBpbnRlbF9ycHMgKnJwcyA9ICZkZXZfcHJpdi0+Z3RfcG0ucnBzOworCXN0
cnVjdCBpbnRlbF9ycHMgKnJwcyA9ICZndC0+aTkxNS0+Z3RfcG0ucnBzOworCXN0cnVjdCBpbnRl
bF91bmNvcmUgKnVuY29yZSA9IGd0LT51bmNvcmU7CiAJc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lOwogCWVudW0gaW50ZWxfZW5naW5lX2lkIGlkOwogCWludCBpcnFzOwpAQCAtMTAxNCwx
NiArMTAxNiwxNiBAQCBzdGF0aWMgdm9pZCBndWNfaW50ZXJydXB0c19jYXB0dXJlKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkgKiB0byBHdUMKIAkgKi8KIAlpcnFzID0gX01B
U0tFRF9CSVRfRU5BQkxFKEdGWF9JTlRFUlJVUFRfU1RFRVJJTkcpOwotCWZvcl9lYWNoX2VuZ2lu
ZShlbmdpbmUsIGRldl9wcml2LCBpZCkKKwlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBndC0+aTkx
NSwgaWQpCiAJCUVOR0lORV9XUklURShlbmdpbmUsIFJJTkdfTU9ERV9HRU43LCBpcnFzKTsKIAog
CS8qIHJvdXRlIFVTRVJfSU5URVJSVVBUIHRvIEhvc3QsIGFsbCBvdGhlcnMgYXJlIHNlbnQgdG8g
R3VDLiAqLwogCWlycXMgPSBHVF9SRU5ERVJfVVNFUl9JTlRFUlJVUFQgPDwgR0VOOF9SQ1NfSVJR
X1NISUZUIHwKIAkgICAgICAgR1RfUkVOREVSX1VTRVJfSU5URVJSVVBUIDw8IEdFTjhfQkNTX0lS
UV9TSElGVDsKIAkvKiBUaGVzZSB0aHJlZSByZWdpc3RlcnMgaGF2ZSB0aGUgc2FtZSBiaXQgZGVm
aW5pdGlvbnMgKi8KLQlJOTE1X1dSSVRFKEdVQ19CQ1NfUkNTX0lFUiwgfmlycXMpOwotCUk5MTVf
V1JJVEUoR1VDX1ZDUzJfVkNTMV9JRVIsIH5pcnFzKTsKLQlJOTE1X1dSSVRFKEdVQ19XRF9WRUNT
X0lFUiwgfmlycXMpOworCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsIEdVQ19CQ1NfUkNTX0lF
UiwgfmlycXMpOworCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsIEdVQ19WQ1MyX1ZDUzFfSUVS
LCB+aXJxcyk7CisJaW50ZWxfdW5jb3JlX3dyaXRlKHVuY29yZSwgR1VDX1dEX1ZFQ1NfSUVSLCB+
aXJxcyk7CiAKIAkvKgogCSAqIFRoZSBSRURJUkVDVF9UT19HVUMgYml0IG9mIHRoZSBQTUlOVFJN
U0sgcmVnaXN0ZXIgZGlyZWN0cyBhbGwKQEAgLTEwNDgsOSArMTA1MCwxMCBAQCBzdGF0aWMgdm9p
ZCBndWNfaW50ZXJydXB0c19jYXB0dXJlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dikKIAlycHMtPnBtX2ludHJtc2tfbWJ6ICY9IH5HRU44X1BNSU5UUl9ESVNBQkxFX1JFRElSRUNU
X1RPX0dVQzsKIH0KIAotc3RhdGljIHZvaWQgZ3VjX2ludGVycnVwdHNfcmVsZWFzZShzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCitzdGF0aWMgdm9pZCBndWNfaW50ZXJydXB0c19y
ZWxlYXNlKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiB7Ci0Jc3RydWN0IGludGVsX3JwcyAqcnBzID0g
JmRldl9wcml2LT5ndF9wbS5ycHM7CisJc3RydWN0IGludGVsX3JwcyAqcnBzID0gJmd0LT5pOTE1
LT5ndF9wbS5ycHM7CisJc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlID0gZ3QtPnVuY29yZTsK
IAlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7CiAJZW51bSBpbnRlbF9lbmdpbmVfaWQg
aWQ7CiAJaW50IGlycXM7CkBAIC0xMDYxLDEzICsxMDY0LDEzIEBAIHN0YXRpYyB2b2lkIGd1Y19p
bnRlcnJ1cHRzX3JlbGVhc2Uoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCSAq
LwogCWlycXMgPSBfTUFTS0VEX0ZJRUxEKEdGWF9GT1JXQVJEX1ZCTEFOS19NQVNLLCBHRlhfRk9S
V0FSRF9WQkxBTktfTkVWRVIpOwogCWlycXMgfD0gX01BU0tFRF9CSVRfRElTQUJMRShHRlhfSU5U
RVJSVVBUX1NURUVSSU5HKTsKLQlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBkZXZfcHJpdiwgaWQp
CisJZm9yX2VhY2hfZW5naW5lKGVuZ2luZSwgZ3QtPmk5MTUsIGlkKQogCQlFTkdJTkVfV1JJVEUo
ZW5naW5lLCBSSU5HX01PREVfR0VONywgaXJxcyk7CiAKIAkvKiByb3V0ZSBhbGwgR1QgaW50ZXJy
dXB0cyB0byB0aGUgaG9zdCAqLwotCUk5MTVfV1JJVEUoR1VDX0JDU19SQ1NfSUVSLCAwKTsKLQlJ
OTE1X1dSSVRFKEdVQ19WQ1MyX1ZDUzFfSUVSLCAwKTsKLQlJOTE1X1dSSVRFKEdVQ19XRF9WRUNT
X0lFUiwgMCk7CisJaW50ZWxfdW5jb3JlX3dyaXRlKHVuY29yZSwgR1VDX0JDU19SQ1NfSUVSLCAw
KTsKKwlpbnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLCBHVUNfVkNTMl9WQ1MxX0lFUiwgMCk7CisJ
aW50ZWxfdW5jb3JlX3dyaXRlKHVuY29yZSwgR1VDX1dEX1ZFQ1NfSUVSLCAwKTsKIAogCXJwcy0+
cG1faW50cm1za19tYnogfD0gR0VOOF9QTUlOVFJfRElTQUJMRV9SRURJUkVDVF9UT19HVUM7CiAJ
cnBzLT5wbV9pbnRybXNrX21ieiAmPSB+QVJBVF9FWFBJUkVEX0lOVFJNU0s7CkBAIC0xMTE3LDcg
KzExMjAsNyBAQCBzdGF0aWMgdm9pZCBndWNfc2V0X2RlZmF1bHRfc3VibWlzc2lvbihzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAKIGludCBpbnRlbF9ndWNfc3VibWlzc2lvbl9lbmFi
bGUoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiA9IGd1Y190b19pOTE1KGd1Yyk7CisJc3RydWN0IGludGVsX2d0ICpndCA9IGd1Y190
b19ndChndWMpOwogCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZTsKIAllbnVtIGludGVs
X2VuZ2luZV9pZCBpZDsKIAlpbnQgZXJyOwpAQCAtMTE0Miw5ICsxMTQ1LDkgQEAgaW50IGludGVs
X2d1Y19zdWJtaXNzaW9uX2VuYWJsZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAJCXJldHVybiBl
cnI7CiAKIAkvKiBUYWtlIG92ZXIgZnJvbSBtYW51YWwgY29udHJvbCBvZiBFTFNQIChleGVjbGlz
dHMpICovCi0JZ3VjX2ludGVycnVwdHNfY2FwdHVyZShkZXZfcHJpdik7CisJZ3VjX2ludGVycnVw
dHNfY2FwdHVyZShndCk7CiAKLQlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBkZXZfcHJpdiwgaWQp
IHsKKwlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBndC0+aTkxNSwgaWQpIHsKIAkJZW5naW5lLT5z
ZXRfZGVmYXVsdF9zdWJtaXNzaW9uID0gZ3VjX3NldF9kZWZhdWx0X3N1Ym1pc3Npb247CiAJCWVu
Z2luZS0+c2V0X2RlZmF1bHRfc3VibWlzc2lvbihlbmdpbmUpOwogCX0KQEAgLTExNTQsMTEgKzEx
NTcsMTEgQEAgaW50IGludGVsX2d1Y19zdWJtaXNzaW9uX2VuYWJsZShzdHJ1Y3QgaW50ZWxfZ3Vj
ICpndWMpCiAKIHZvaWQgaW50ZWxfZ3VjX3N1Ym1pc3Npb25fZGlzYWJsZShzdHJ1Y3QgaW50ZWxf
Z3VjICpndWMpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gZ3VjX3Rv
X2k5MTUoZ3VjKTsKKwlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gZ3VjX3RvX2d0KGd1Yyk7CiAKLQlH
RU1fQlVHX09OKGRldl9wcml2LT5ndC5hd2FrZSk7IC8qIEdUIHNob3VsZCBiZSBwYXJrZWQgZmly
c3QgKi8KKwlHRU1fQlVHX09OKGd0LT5hd2FrZSk7IC8qIEdUIHNob3VsZCBiZSBwYXJrZWQgZmly
c3QgKi8KIAotCWd1Y19pbnRlcnJ1cHRzX3JlbGVhc2UoZGV2X3ByaXYpOworCWd1Y19pbnRlcnJ1
cHRzX3JlbGVhc2UoZ3QpOwogCWd1Y19jbGllbnRzX2Rpc2FibGUoZ3VjKTsKIH0KIApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfaHVjLmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9odWMuYwppbmRleCA1ODFjOWMzZDRmYzAuLjk5ZjBmYTJl
OGZmNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfaHVjLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfaHVjLmMKQEAgLTI0LDYgKzI0
LDcgQEAKIAogI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+CiAKKyNpbmNsdWRlICJndC9pbnRlbF9n
dC5oIgogI2luY2x1ZGUgImludGVsX2h1Yy5oIgogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAKQEAg
LTQ2LDggKzQ3LDggQEAgdm9pZCBpbnRlbF9odWNfaW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfaHVj
ICpodWMpCiAKIHN0YXRpYyBpbnQgaW50ZWxfaHVjX3JzYV9kYXRhX2NyZWF0ZShzdHJ1Y3QgaW50
ZWxfaHVjICpodWMpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBodWNfdG9f
aTkxNShodWMpOwotCXN0cnVjdCBpbnRlbF9ndWMgKmd1YyA9ICZpOTE1LT5ndC51Yy5ndWM7CisJ
c3RydWN0IGludGVsX2d0ICpndCA9IGh1Y190b19ndChodWMpOworCXN0cnVjdCBpbnRlbF9ndWMg
Kmd1YyA9ICZndC0+dWMuZ3VjOwogCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOwogCXZvaWQgKnZhZGRy
OwogCkBAIC0xMTIsOCArMTEzLDggQEAgdm9pZCBpbnRlbF9odWNfZmluaShzdHJ1Y3QgaW50ZWxf
aHVjICpodWMpCiAgKi8KIGludCBpbnRlbF9odWNfYXV0aChzdHJ1Y3QgaW50ZWxfaHVjICpodWMp
CiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBodWNfdG9faTkxNShodWMpOwot
CXN0cnVjdCBpbnRlbF9ndWMgKmd1YyA9ICZpOTE1LT5ndC51Yy5ndWM7CisJc3RydWN0IGludGVs
X2d0ICpndCA9IGh1Y190b19ndChodWMpOworCXN0cnVjdCBpbnRlbF9ndWMgKmd1YyA9ICZndC0+
dWMuZ3VjOwogCWludCByZXQ7CiAKIAlpZiAoaHVjLT5mdy5sb2FkX3N0YXR1cyAhPSBJTlRFTF9V
Q19GSVJNV0FSRV9TVUNDRVNTKQpAQCAtMTI3LDcgKzEyOCw3IEBAIGludCBpbnRlbF9odWNfYXV0
aChzdHJ1Y3QgaW50ZWxfaHVjICpodWMpCiAJfQogCiAJLyogQ2hlY2sgYXV0aGVudGljYXRpb24g
c3RhdHVzLCBpdCBzaG91bGQgYmUgZG9uZSBieSBub3cgKi8KLQlyZXQgPSBfX2ludGVsX3dhaXRf
Zm9yX3JlZ2lzdGVyKCZpOTE1LT51bmNvcmUsCisJcmV0ID0gX19pbnRlbF93YWl0X2Zvcl9yZWdp
c3RlcihndC0+dW5jb3JlLAogCQkJCQlodWMtPnN0YXR1cy5yZWcsCiAJCQkJCWh1Yy0+c3RhdHVz
Lm1hc2ssCiAJCQkJCWh1Yy0+c3RhdHVzLnZhbHVlLApAQCAtMTU5LDE2ICsxNjAsMTUgQEAgaW50
IGludGVsX2h1Y19hdXRoKHN0cnVjdCBpbnRlbF9odWMgKmh1YykKICAqLwogaW50IGludGVsX2h1
Y19jaGVja19zdGF0dXMoc3RydWN0IGludGVsX2h1YyAqaHVjKQogewotCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdiA9IGh1Y190b19pOTE1KGh1Yyk7CisJc3RydWN0IGludGVsX2d0
ICpndCA9IGh1Y190b19ndChodWMpOwogCWludGVsX3dha2VyZWZfdCB3YWtlcmVmOwogCWJvb2wg
c3RhdHVzID0gZmFsc2U7CiAKLQlpZiAoIUhBU19IVUMoZGV2X3ByaXYpKQorCWlmICghaW50ZWxf
dWNfaXNfdXNpbmdfaHVjKCZndC0+dWMpKQogCQlyZXR1cm4gLUVOT0RFVjsKIAotCXdpdGhfaW50
ZWxfcnVudGltZV9wbSgmZGV2X3ByaXYtPnJ1bnRpbWVfcG0sIHdha2VyZWYpCi0JCXN0YXR1cyA9
IChJOTE1X1JFQUQoaHVjLT5zdGF0dXMucmVnKSAmIGh1Yy0+c3RhdHVzLm1hc2spID09Ci0JCQkg
IGh1Yy0+c3RhdHVzLnZhbHVlOworCXdpdGhfaW50ZWxfcnVudGltZV9wbSgmZ3QtPmk5MTUtPnJ1
bnRpbWVfcG0sIHdha2VyZWYpCisJCXN0YXR1cyA9IGludGVsX3VuY29yZV9yZWFkKGd0LT51bmNv
cmUsIGh1Yy0+c3RhdHVzLnJlZyk7CiAKLQlyZXR1cm4gc3RhdHVzOworCXJldHVybiAoc3RhdHVz
ICYgaHVjLT5zdGF0dXMubWFzaykgPT0gaHVjLT5zdGF0dXMudmFsdWU7CiB9CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9odWNfZncuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L3VjL2ludGVsX2h1Y19mdy5jCmluZGV4IDA2ZTcyNmJhOTg2My4uYmVjZmQz
NGEyNmMxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9odWNf
ZncuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9odWNfZncuYwpAQCAt
NCw2ICs0LDcgQEAKICAqIENvcHlyaWdodCDCqSAyMDE0LTIwMTggSW50ZWwgQ29ycG9yYXRpb24K
ICAqLwogCisjaW5jbHVkZSAiZ3QvaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJpbnRlbF9odWNfZncu
aCIKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogCkBAIC0xMzksOCArMTQwLDcgQEAgc3RhdGljIHZv
aWQgaHVjX3hmZXJfcnNhKHN0cnVjdCBpbnRlbF9odWMgKmh1YykKIHN0YXRpYyBpbnQgaHVjX3hm
ZXJfdWNvZGUoc3RydWN0IGludGVsX2h1YyAqaHVjKQogewogCXN0cnVjdCBpbnRlbF91Y19mdyAq
aHVjX2Z3ID0gJmh1Yy0+Znc7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0g
aHVjX3RvX2k5MTUoaHVjKTsKLQlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSAmZGV2X3By
aXYtPnVuY29yZTsKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSBodWNfdG9fZ3QoaHVj
KS0+dW5jb3JlOwogCXVuc2lnbmVkIGxvbmcgb2Zmc2V0ID0gMDsKIAl1MzIgc2l6ZTsKIAlpbnQg
cmV0OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWMuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjLmMKaW5kZXggMjA2MmU3ZmYwNWU4
Li4zZmVhZDJkYzlkMzIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2lu
dGVsX3VjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWMuYwpAQCAt
MjI0LDcgKzIyNCw3IEBAIHN0YXRpYyB2b2lkIGd1Y19mcmVlX2xvYWRfZXJyX2xvZyhzdHJ1Y3Qg
aW50ZWxfZ3VjICpndWMpCiAgKi8KIHN0YXRpYyB2b2lkIGd1Y19jbGVhcl9tbWlvX21zZyhzdHJ1
Y3QgaW50ZWxfZ3VjICpndWMpCiB7Ci0JaW50ZWxfdW5jb3JlX3dyaXRlKCZndWNfdG9faTkxNShn
dWMpLT51bmNvcmUsIFNPRlRfU0NSQVRDSCgxNSksIDApOworCWludGVsX3VuY29yZV93cml0ZShn
dWNfdG9fZ3QoZ3VjKS0+dW5jb3JlLCBTT0ZUX1NDUkFUQ0goMTUpLCAwKTsKIH0KIAogc3RhdGlj
IHZvaWQgZ3VjX2dldF9tbWlvX21zZyhzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCkBAIC0yMzMsNyAr
MjMzLDcgQEAgc3RhdGljIHZvaWQgZ3VjX2dldF9tbWlvX21zZyhzdHJ1Y3QgaW50ZWxfZ3VjICpn
dWMpCiAKIAlzcGluX2xvY2tfaXJxKCZndWMtPmlycV9sb2NrKTsKIAotCXZhbCA9IGludGVsX3Vu
Y29yZV9yZWFkKCZndWNfdG9faTkxNShndWMpLT51bmNvcmUsIFNPRlRfU0NSQVRDSCgxNSkpOwor
CXZhbCA9IGludGVsX3VuY29yZV9yZWFkKGd1Y190b19ndChndWMpLT51bmNvcmUsIFNPRlRfU0NS
QVRDSCgxNSkpOwogCWd1Yy0+bW1pb19tc2cgfD0gdmFsICYgZ3VjLT5tc2dfZW5hYmxlZF9tYXNr
OwogCiAJLyoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKaW5kZXggMjM2Yzk2NGRkNzYx
Li40ZDY5NGJmZjA4Y2UgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2Vt
X2d0dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCkBAIC0zMzk1
LDEwICszMzk1LDggQEAgaW50IGk5MTVfZ2d0dF9lbmFibGVfaHcoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2KQogCXJldHVybiAwOwogfQogCi12b2lkIGk5MTVfZ2d0dF9lbmFibGVf
Z3VjKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQordm9pZCBpOTE1X2dndHRfZW5hYmxl
X2d1YyhzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0KQogewotCXN0cnVjdCBpOTE1X2dndHQgKmdndHQg
PSAmaTkxNS0+Z2d0dDsKLQogCUdFTV9CVUdfT04oZ2d0dC0+aW52YWxpZGF0ZSAhPSBnZW42X2dn
dHRfaW52YWxpZGF0ZSk7CiAKIAlnZ3R0LT5pbnZhbGlkYXRlID0gZ3VjX2dndHRfaW52YWxpZGF0
ZTsKQEAgLTM0MDYsMTAgKzM0MDQsOCBAQCB2b2lkIGk5MTVfZ2d0dF9lbmFibGVfZ3VjKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCWdndHQtPmludmFsaWRhdGUoZ2d0dCk7CiB9CiAK
LXZvaWQgaTkxNV9nZ3R0X2Rpc2FibGVfZ3VjKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
KQordm9pZCBpOTE1X2dndHRfZGlzYWJsZV9ndWMoc3RydWN0IGk5MTVfZ2d0dCAqZ2d0dCkKIHsK
LQlzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0ID0gJmk5MTUtPmdndHQ7Ci0KIAkvKiBYWFggVGVtcG9y
YXJ5IHBhcmRvbiBmb3IgZXJyb3IgdW5sb2FkICovCiAJaWYgKGdndHQtPmludmFsaWRhdGUgPT0g
Z2VuNl9nZ3R0X2ludmFsaWRhdGUpCiAJCXJldHVybjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1f
Z3R0LmgKaW5kZXggNTdhNjhlZjRlZGE3Li42NjZjZDUwNWM5OWIgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZ2VtX2d0dC5oCkBAIC02MTQsOCArNjE0LDggQEAgaTkxNV92bV90b19wcGd0dChzdHJ1
Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSkKIGludCBpOTE1X2dndHRfcHJvYmVfaHcoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIGludCBpOTE1X2dndHRfaW5pdF9odyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogaW50IGk5MTVfZ2d0dF9lbmFibGVfaHco
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKLXZvaWQgaTkxNV9nZ3R0X2VuYWJs
ZV9ndWMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwotdm9pZCBpOTE1X2dndHRfZGlz
YWJsZV9ndWMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwordm9pZCBpOTE1X2dndHRf
ZW5hYmxlX2d1YyhzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0KTsKK3ZvaWQgaTkxNV9nZ3R0X2Rpc2Fi
bGVfZ3VjKHN0cnVjdCBpOTE1X2dndHQgKmdndHQpOwogaW50IGk5MTVfaW5pdF9nZ3R0KHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIGk5MTVfZ2d0dF9jbGVhbnVwX2h3
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiAKLS0gCjIuMjAuMQoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxp
bmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

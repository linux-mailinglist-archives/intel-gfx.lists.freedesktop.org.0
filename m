Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DD60CF593D
	for <lists+intel-gfx@lfdr.de>; Fri,  8 Nov 2019 22:13:29 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 536A96FA85;
	Fri,  8 Nov 2019 21:13:28 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-oi1-x244.google.com (mail-oi1-x244.google.com
 [IPv6:2607:f8b0:4864:20::244])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F32366E0BB
 for <intel-gfx@lists.freedesktop.org>; Fri,  8 Nov 2019 21:13:26 +0000 (UTC)
Received: by mail-oi1-x244.google.com with SMTP id y194so6522013oie.4
 for <intel-gfx@lists.freedesktop.org>; Fri, 08 Nov 2019 13:13:26 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=4IIw7pNLB89+jWtEKPz5QsheF4M5EjOIqSUDyu3scc0=;
 b=LYJmK4NISwStSPN7zbFyjX8GhUKLWChYTJtmwynorAneSn9Gs3hzTOiFiPLXW5T9HQ
 5/yqWbd5N7CziiX6AmqV7BUzwJ2zq+xvisZsObA/zywlF7BjEJcV8t4LnXYYaOAEnV4c
 qhAEuiwvw+wzWuBnaK34yND8xAKvYF2+zP/wcSFs2a0+gCterV5/TI6/0Kli6sv9/jir
 5sr+gJO5lf3JHXDu77I2E5y4a67nm+shLcRzeCyH8HUo9b6fgSt7xOtgIfYXKKLJFcCU
 idURPZaqd8f1U+/MiRgpgcUF4rLwsPXchUBmtdHMifLqelDpeum97Vid70jD/iI5cReB
 38aQ==
X-Gm-Message-State: APjAAAUeSM3kYSY926a6EZTnGVwWkFXgANiUT4piHO+I2EI0e50JMwL7
 VTHHjfbp0JcC0JFkGn95imdfnBQ4IOb6p7ubfl+/yQ==
X-Google-Smtp-Source: APXvYqyX+GMjMz44p8MLFTAICj+secvdHov5JZt3QpiTeYI5Clw5wyTeo5pwnVSk47GyZPoTrcYVUiOXfUnea/tpaDY=
X-Received: by 2002:aca:b805:: with SMTP id i5mr11993533oif.110.1573247606097; 
 Fri, 08 Nov 2019 13:13:26 -0800 (PST)
MIME-Version: 1.0
References: <20191108204932.6197-1-chris@chris-wilson.co.uk>
 <20191108204932.6197-3-chris@chris-wilson.co.uk>
In-Reply-To: <20191108204932.6197-3-chris@chris-wilson.co.uk>
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Fri, 8 Nov 2019 22:13:13 +0100
Message-ID: <CAKMK7uFWVJYb0X4hN788sReL7QD1XcuDWEQKZD+TV5_Yjs9kXg@mail.gmail.com>
To: Chris Wilson <chris@chris-wilson.co.uk>, 
 Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Peter Zijlstra <peterz@infradead.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=4IIw7pNLB89+jWtEKPz5QsheF4M5EjOIqSUDyu3scc0=;
 b=OuPyAj4PTzIbWUJrsOpuOooPN/BMaR+O1NJLJfPSdHfedjOyTKLcltNYlkQjtH0A0a
 nZkAHzCfPq0wnbLhzkYwEy2zoGFunCynZioyOv3lTtg1aurp8QjAs7NkOQ64na0UZc1Z
 RJ/iLyyj/cD48bEzSOQj6/Bj9LkH8fWcYtw/k=
Subject: Re: [Intel-gfx] [igt-dev] [PATCH i-g-t 3/3]
 i915/gem_exec_scheduler: Exercise priority inversion from resource
 contention
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: IGT development <igt-dev@lists.freedesktop.org>,
 intel-gfx <intel-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCBOb3YgOCwgMjAxOSBhdCA5OjQ5IFBNIENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMt
d2lsc29uLmNvLnVrPiB3cm90ZToKPgo+IE9uZSBvZiB0aGUgaGFyZGVzdCBwcmlvcml0eSBpbnZl
cnNpb24gdGFza3MgdG8gYm90aCBoYW5kbGUgYW5kIHRvCj4gc2ltdWxhdGUgaW4gdGVzdGluZyBp
cyBpbnZlcnNpb24gZHVlIHRvIHJlc291cmNlIGNvbnRlbnRpb24uIFRoZQo+IGNoYWxsZW5nZSBp
cyB0aGF0IGEgaGlnaCBwcmlvcml0eSBjb250ZXh0IHNob3VsZCBuZXZlciBiZSBibG9ja2VkIGJ5
IGEKPiBsb3cgcHJpb3JpdHkgY29udGV4dCwgZXZlbiBpZiBib3RoIGFyZSBzdGFydmluZyBmb3Ig
cmVzb3VyY2VzIC0tCj4gaWRlYWxseSwgYXQgbGVhc3QgZm9yIHNvbWUgUlQgT1NlcywgdGhlIGhp
Z2hlciBwcmlvcml0eSBjb250ZXh0IGhhcwo+IGZpcnN0IHBpY2sgb2YgdGhlIG1lYWdyZSByZXNv
dXJjZXMgc28gdGhhdCBpdCBjYW4gYmUgZXhlY3V0ZWQgd2l0aAo+IG1pbmltdW0gbGF0ZW5jeS4K
Pgo+IHVzZXJmYXVsdGZkIGFsbG93cyB1cyB0byBoYW5kbGUgYSBwYWdlIGZhdWx0IGluIHVzZXJz
cGFjZSwgYW5kIHNvCj4gYXJiaXRyYXJ5IGltcG9zZSBhIGRlbGF5IG9uIHRoZSBmYXVsdCBoYW5k
bGVyLCBjcmVhdGluZyBhIHNpdHVhdGlvbgo+IHdoZXJlIGEgbG93IHByaW9yaXR5IGNvbnRleHQg
aXMgYmxvY2tlZCB3YWl0aW5nIGZvciB0aGUgZmF1bHQuIFRoaXMKPiBibG9ja2VkIGNvbnRleHQg
c2hvdWxkIG5vdCBwcmV2ZW50IGEgaGlnaCBwcmlvcml0eSBjb250ZXh0IGZyb20gYmVpbmcKPiBl
eGVjdXRlZC4gV2hpbGUgdGhlIHVzZXJmYXVsdCB0cmllcyB0byBlbXVsYXRlIGEgc2xvdyBmYXVs
dCAoZS5nLiBmcm9tIGEKPiBmYWlsaW5nIHN3YXAgZGV2aWNlKSwgaXQgaXMgdW5mb3J0dW5hdGVs
eSBsaW1pdGVkIHRvIGEgc2luZ2xlIG9iamVjdAo+IHR5cGU6IHRoZSB1c2VycHRyLiBIb3BlZnVs
bHksIHdlIHdpbGwgZmluZCBvdGhlciB3YXlzIHRvIGltcG9zZSBvdGhlcgo+IHN0YXJ2YXRpb24g
Y29uZGl0aW9ucyBvbiBnbG9iYWwgcmVzb3VyY2VzLgo+Cj4gU2lnbmVkLW9mZi1ieTogQ2hyaXMg
V2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Cj4gQ2M6IEpvb25hcyBMYWh0aW5lbiA8
am9vbmFzLmxhaHRpbmVuQGxpbnV4LmludGVsLmNvbT4KPiBDYzogVHZydGtvIFVyc3VsaW4gPHR2
cnRrby51cnN1bGluQGludGVsLmNvbT4KClNvIHJ0LXd3X211dGV4ZXM/CgpJIGRvbid0IHRoaW5r
IHdlIHdhbnQvc2hvdWxkIGRvIHRoYXQgb24gdGhlIGZpcnN0IHJvdW5kIG9mIHJvbGxpbmcgb3V0
Cnd3X211dGV4IGluIGk5MTUuIEFuZCBwcm9iYWJseSBzaG91bGQgYmUgaGFuZGxlZCB3aXRoaW4g
d3dfbXV0ZXgmY3B1CnNjaGVkdWxlciBjb3JlIGNvZGUgYXMgUlQgYWRkaXRpb24gKGkuZS4gaWYg
eW91IHdhbnQgUlQgZ3B1IHdvcmtsb2FkcywKdGhlbiB5b3UgbmVlZCB0byB0ZWxsIGJvdGggdGhl
IGNwdSBhbmQgZ3B1IHNjaGVkdWxlciB0byB0cmVhdCB5b3UKYWNjb3JkaW5nbHkpLiBCdXQgSSBk
byB0aGluayBpdCdzIHBvc3NpYmxlLiBSb3VnaCBpZGVhIHdvdWxkIGJlIHRvIG5vdApqdXN0IGhh
dmUgYSBnbG9iYWwgdGlja2V0IHF1ZXVlLCBidXQgYWxzbyB0YWtlIHRoZSBydCBwcmlvcml0eSBp
bnRvCmFjY291bnQuIFByaW8taW52ZXJzaW9uIGJvb3N0aW5nIHNob3VsZCBhbHJlYWR5IGJlIHBv
c3NpYmxlIHdpdGggdGhlCm5vcm1hbCBydC1tdXRleCBjb2RlLiBJIHRoaW5rIGV2ZW4gYm9vc3Rp
bmcgZm9yIHJ0LXd3X211dGV4ZXMgc2hvdWxkCmJlIGZpbmU6Ci0gaWYgYSBub24tcnQgdGFzayBn
ZXRzIGJvb3N0ZWQgYmVjYXVzZSBpdCBob2xkcyBhIG5vbi13d19tdXRleCBsb2NrLAp0aGVuIGl0
IGVpdGhlciBuZWVkcyB0byBzdGFydCBvdXQgd2l0aCBhIG5ldyB3d19hY3F1aXJlX2N0eCB0aWNr
ZXQKKHdoaWNoIHdpbGwgYWxyZWFkeSBiZSBib29zdGVkKSwgb3IgaXQgY2FuJ3QgdGFrZSBuZXcg
d3dfbXV0ZXggbG9ja3MKZm9yIGFuIGV4aXN0aW5nIHRpY2tldCwgc2luY2UgdGhhdCB3b3VsZCBi
ZSBvdXRzaWRlIHRoZSBub24td3dfbXV0ZXgKYW5kIGNyZWF0ZSBhIGxvY2tpbmcgaW52ZXJzaW9u
ICh3d19hY3F1aXJlX2N0eCAtPiBub24td3dfbXV0ZXggLT4Kd3dfbXV0ZXggZ29lcyBib29tKS4g
SGVuY2UgSSBkb24ndCB0aGluayB3ZSBuZWVkIHRvIHJldHJvYWN0aXZlbHkKYm9vc3QgdGhlIHRp
Y2tldCBpdHNlbGYgaWYgdGhlIGNvbnRlbmRlZCBsb2NrIHRoYXQgY2F1c2VzIHRoZSBib29zdGlu
ZwppcyBhIG5vbi13d19tdXRleC4KLSBpZiBhIG5vbi1ydCB0YXNrIGlzIGhvbGRpbmcgYSB3d19t
dXRleCBsb2NrICh3aGljaCBhbiBydCB0YXNrIHdhbnRzCnRvIGFjcXVpcmUpLCB0aGVuIGJvb3N0
aW5nIHdpbGwgb25seSBuZWVkIHRvIGhhcHBlbiB1bnRpbCBpdCBkcm9wcwp0aGF0IGxvY2suIEFu
ZCB3ZSBjYW4gZm9yY2UgdGhhdCBieSByZXR1cm5pbmcgRURFQURMQ0sgb24gdGhlIG5leHQKd3df
bXV0ZXhfbG9jaywgaGVuY2UgYWdhaW4gd2UgZG9uJ3QgbmVlZCB0byBiZSBhYmxlIHRvIGJvb3N0
IHRoZQpleGlzdGluZyB0aWNrZXQgaXRzZWxmIChzaW5jZSB0aGUgYm9vc3RlZCB0YXNrIGNhbiBi
ZSBwcmV2ZW50ZWQgZnJvbQphY3F1aXJpbmcgbW9yZSB3d19tdXRleGVzIG9mIHRoZSBzYW1lIGNs
YXNzKSwgb25seSB0aGUgbm9ybWFsIG11dGV4CmJvb3N0aW5nLgoKSWYgdGhpcyBhZC1ob2MgYW5h
bHlzaXMgaXMgY29ycmVjdCBhbmQgd2UgcmVhbGx5IGRvbid0IG5lZWQgdG8gYm9vc3QKZXhpc3Rp
bmcgdGlja2V0cywgdGhlbiB0aGUgbm9ybWFsIHd3X211dGV4IGFsZ28gc2hvdWxkIGtlZXAgd29y
a2luZy4KT25seSBkaWZmZXJlbmNlIGlzIHRoYXQgYWxsIHJ0LXByaW9yaXR5IHRhc2tzIHdpbGwg
YmUgYWJsZSB0byBqdW1wIHRoZQpxdWV1ZS4gU2ltcGxlc3Qgd2F5IHRvIGltcGxlbWVudCB0aGF0
IHdvdWxkIGJlIHRvIHNoaWZ0IHRoZSBydApwcmlvcml0eSBpbnRvIHRoZSBoaWdoIGJpdHMgb2Yg
dGhlIHRpY2tldCAoYW5kIG1ha2Ugc3VyZSB3ZSBoYW5kbGUKd3JhcC1hcm91bmQgY29ycmVjdGx5
LCBzaW5jZSB0aGF0IHdpbGwgaGFwcGVuIHF1aXRlIHJlZ3VsYXJseSB3aXRoCnRoaXMgYXBwcm9h
Y2gsIGJldHdlZW4gYSBoaWdoZXN0LXJ0LXByaW9yaXR5IHRhc2sgYW5kIGEgbm9uLXJ0IHRhc2sp
LgoKV2hhdCBJJ20gbm90IHN1cmUgYWJvdXQgaXMgaWYgYSB0YXNrIGdldHMgYm9zdGVkIHdoaWxl
IGhvZGxpbmcgYQpub3JtYWwgbXV0ZXgsIGFuZCBiZWZvcmUgcmVsZWFzaW5nIHRoYXQgbXV0ZXgs
IGdyYWJzIGEgd3dfYWNxdWlyZV9jdHgKKHdpdGggYSBib29zdGVkIHRpY2tldCksIGFuZCB0aGVu
IGRyb3BzIHRoZSBub3JtYWwgbXV0ZXgsIHdoZXRoZXIgd2UKY2FuIGFsc28gZHJvcCB0aGUgYm9v
c3Rpbmcgb2YgdGhlIHRpY2tldCAodGhlIHRpY2tldCB3b3VsZCBhbHdheXMganVtcAp0aGUgcXVl
dWUgdG8gaXRzIGJvb3N0ZWQgZnJlcXVlbmNlIHdoZW4gd2UgZ3JhYiBpdCwgYnV0IHRoZW4gaXQg
bmVlZHMKdG8gYmUgZml4ZWQgdG8gbWFrZSBzdXJlIHRoZSB3dyBiYWNrb2ZmIGFsZ28gd29ya3Mp
LiBCdXQgdGhhdCdzIGEKcmF0aGVyIHVudXN1YWwgbG9ja2luZyBzY2hlbWUsIGFuZCBvZiB0aGUg
MyB3d19tdXRleCBjbGFzc2VzIHdlIGhhdmUKaW4gdGhlIGtlcm5lbCB0aHVzIGZhciAoZHJtX21v
ZGVzZXRfbG9jaywgZG1hX3Jlc3YgYW5kIHRoZSBjbG9jayB0cmVlCmdyYXBoIGxvY2sgdGhpbmcp
IG5vbmUgZG8gc29tZXRoaW5nIHNpbGx5IGxpa2UgdGhpcy4gU28gcHJvYmFibHkgY2FuCmJlIGln
bm9yZWQuCgpBZGRpbmcgTWFhcnRlbiBhbmQgUGV0ZXIgdG8gdGhpcywgc28gdGhleSBjYW4gbWVu
dGFsbHkgcHJlcGFyZSB0aGF0Cm1heWJlIHdlJ2xsIGdvIHRvdGFsbHkgY3JhenkgOi0pCgpDaGVl
cnMsIERhbmllbAoKPiAtLS0KPiAgdGVzdHMvaTkxNS9nZW1fZXhlY19zY2hlZHVsZS5jIHwgMTU1
ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwo+ICAxIGZpbGUgY2hhbmdlZCwgMTU1
IGluc2VydGlvbnMoKykKPgo+IGRpZmYgLS1naXQgYS90ZXN0cy9pOTE1L2dlbV9leGVjX3NjaGVk
dWxlLmMgYi90ZXN0cy9pOTE1L2dlbV9leGVjX3NjaGVkdWxlLmMKPiBpbmRleCA4NDU4MWJmZmUu
LjBhZjdiNGM2ZCAxMDA2NDQKPiAtLS0gYS90ZXN0cy9pOTE1L2dlbV9leGVjX3NjaGVkdWxlLmMK
PiArKysgYi90ZXN0cy9pOTE1L2dlbV9leGVjX3NjaGVkdWxlLmMKPiBAQCAtMjMsMTAgKzIzLDE2
IEBACj4KPiAgI2luY2x1ZGUgImNvbmZpZy5oIgo+Cj4gKyNpbmNsdWRlIDxsaW51eC91c2VyZmF1
bHRmZC5oPgo+ICsKPiArI2luY2x1ZGUgPHB0aHJlYWQuaD4KPiAgI2luY2x1ZGUgPHN5cy9wb2xs
Lmg+Cj4gICNpbmNsdWRlIDxzeXMvaW9jdGwuaD4KPiArI2luY2x1ZGUgPHN5cy9tbWFuLmg+Cj4g
KyNpbmNsdWRlIDxzeXMvc3lzY2FsbC5oPgo+ICAjaW5jbHVkZSA8c2NoZWQuaD4KPiAgI2luY2x1
ZGUgPHNpZ25hbC5oPgo+ICsjaW5jbHVkZSA8dW5pc3RkLmg+Cj4KPiAgI2luY2x1ZGUgImlndC5o
Igo+ICAjaW5jbHVkZSAiaWd0X3JhbmQuaCIKPiBAQCAtMTYyNSw2ICsxNjMxLDE1MiBAQCBzdGF0
aWMgdm9pZCB0ZXN0X3BpX3JpbmdmdWxsKGludCBmZCwgdW5zaWduZWQgaW50IGVuZ2luZSwgdW5z
aWduZWQgaW50IGZsYWdzKQo+ICAgICAgICAgbXVubWFwKHJlc3VsdCwgNDA5Nik7Cj4gIH0KPgo+
ICtzdGF0aWMgaW50IHVzZXJmYXVsdGZkKGludCBmbGFncykKPiArewo+ICsgICAgICAgcmV0dXJu
IHN5c2NhbGwoU1lTX3VzZXJmYXVsdGZkLCBmbGFncyk7Cj4gK30KPiArCj4gK3N0cnVjdCB1ZmRf
dGhyZWFkIHsKPiArICAgICAgIHB0aHJlYWRfdCB0aHJlYWQ7Cj4gKyAgICAgICB1aW50MzJfdCBi
YXRjaDsKPiArICAgICAgIHVpbnQzMl90ICpwYWdlOwo+ICsgICAgICAgdW5zaWduZWQgaW50IGVu
Z2luZTsKPiArICAgICAgIGludCBpOTE1Owo+ICt9Owo+ICsKPiArc3RhdGljIHVpbnQzMl90IGNy
ZWF0ZV91c2VycHRyKGludCBpOTE1LCB2b2lkICpwYWdlKQo+ICt7Cj4gKyAgICAgICB1aW50MzJf
dCBoYW5kbGU7Cj4gKwo+ICsgICAgICAgZ2VtX3VzZXJwdHIoaTkxNSwgcGFnZSwgNDA5NiwgMCwg
MCwgJmhhbmRsZSk7Cj4gKyAgICAgICByZXR1cm4gaGFuZGxlOwo+ICt9Cj4gKwo+ICtzdGF0aWMg
dm9pZCAqdWZkX3RocmVhZCh2b2lkICphcmcpCj4gK3sKPiArICAgICAgIHN0cnVjdCB1ZmRfdGhy
ZWFkICp0ID0gYXJnOwo+ICsgICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9leGVjX29iamVjdDIg
b2JqWzJdID0gewo+ICsgICAgICAgICAgICAgICB7IC5oYW5kbGUgPSBjcmVhdGVfdXNlcnB0cih0
LT5pOTE1LCB0LT5wYWdlKSB9LAo+ICsgICAgICAgICAgICAgICB7IC5oYW5kbGUgPSB0LT5iYXRj
aCB9LAo+ICsgICAgICAgfTsKPiArICAgICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZl
cjIgZWIgPSB7Cj4gKyAgICAgICAgICAgICAgIC5idWZmZXJzX3B0ciA9IHRvX3VzZXJfcG9pbnRl
cihvYmopLAo+ICsgICAgICAgICAgICAgICAuYnVmZmVyX2NvdW50ID0gQVJSQVlfU0laRShvYmop
LAo+ICsgICAgICAgICAgICAgICAuZmxhZ3MgPSB0LT5lbmdpbmUsCj4gKyAgICAgICAgICAgICAg
IC5yc3ZkMSA9IGdlbV9jb250ZXh0X2NyZWF0ZSh0LT5pOTE1KSwKPiArICAgICAgIH07Cj4gKyAg
ICAgICBnZW1fY29udGV4dF9zZXRfcHJpb3JpdHkodC0+aTkxNSwgZWIucnN2ZDEsIE1JTl9QUklP
KTsKPiArCj4gKyAgICAgICBpZ3RfZGVidWcoInN1Ym1pdHRpbmcgZmF1bHRcbiIpOwo+ICsgICAg
ICAgZ2VtX2V4ZWNidWYodC0+aTkxNSwgJmViKTsKPiArICAgICAgIGdlbV9zeW5jKHQtPmk5MTUs
IG9ialswXS5oYW5kbGUpOwo+ICsgICAgICAgZ2VtX2Nsb3NlKHQtPmk5MTUsIG9ialswXS5oYW5k
bGUpOwo+ICsKPiArICAgICAgIGdlbV9jb250ZXh0X2Rlc3Ryb3kodC0+aTkxNSwgZWIucnN2ZDEp
Owo+ICsKPiArICAgICAgIHQtPmk5MTUgPSAtMTsKPiArICAgICAgIHJldHVybiBOVUxMOwo+ICt9
Cj4gKwo+ICtzdGF0aWMgdm9pZCB0ZXN0X3BpX3VzZXJmYXVsdChpbnQgaTkxNSwgdW5zaWduZWQg
aW50IGVuZ2luZSkKPiArewo+ICsgICAgICAgc3RydWN0IHVmZmRpb19hcGkgYXBpID0geyAuYXBp
ID0gVUZGRF9BUEkgfTsKPiArICAgICAgIHN0cnVjdCB1ZmZkaW9fcmVnaXN0ZXIgcmVnOwo+ICsg
ICAgICAgc3RydWN0IHVmZmRpb19jb3B5IGNvcHk7Cj4gKyAgICAgICBzdHJ1Y3QgdWZmZF9tc2cg
bXNnOwo+ICsgICAgICAgc3RydWN0IHVmZF90aHJlYWQgdDsKPiArICAgICAgIGNoYXIgcG9pc29u
WzQwOTZdOwo+ICsgICAgICAgaW50IHVmZDsKPiArCj4gKyAgICAgICAvKgo+ICsgICAgICAgICog
UmVzb3VyY2UgY29udGVudGlvbiBjYW4gZWFzaWx5IGxlYWQgdG8gcHJpb3JpdHkgaW52ZXJzaW9u
IHByb2JsZW1zLAo+ICsgICAgICAgICogdGhhdCB3ZSB3aXNoIHRvIGF2b2lkLiBIZXJlLCB3ZSBz
aW11bGF0ZSBvbmUgc2ltcGxlIGZvcm0gb2YgcmVzb3VyY2UKPiArICAgICAgICAqIHN0YXJ2YXRp
b24gYnkgdXNpbmcgYW4gYXJiaXRyYXJ5IHNsb3cgdXNlcnNwYWNlIGZhdWx0IGhhbmRsZXIgdG8g
Y2F1c2UKPiArICAgICAgICAqIHRoZSBsb3cgcHJpb3JpdHkgY29udGV4dCB0byBibG9jayB3YWl0
aW5nIGZvciBpdHMgcmVzb3VyY2UuIFdoaWxlIGl0Cj4gKyAgICAgICAgKiBpcyBibG9ja2VkLCBp
dCBzaG91bGQgbm90IHByZXZlbnQgYSBoaWdoZXIgcHJpb3JpdHkgY29udGV4dCBmcm9tCj4gKyAg
ICAgICAgKiBleGVjdXRpbmcuCj4gKyAgICAgICAgKgo+ICsgICAgICAgICogVGhpcyBpcyBvbmx5
IGEgdmVyeSBzaW1wbGUgc2NlbmFyaW8sIGluIG1vcmUgZ2VuZXJhbCB0ZXN0cyB3ZSB3aWxsCj4g
KyAgICAgICAgKiBuZWVkIHRvIHNpbXVsYXRlIGNvbnRlbnRpb24gb24gdGhlIHNoYXJlZCByZXNv
dXJjZSBzdWNoIHRoYXQgYm90aAo+ICsgICAgICAgICogbG93IGFuZCBoaWdoIHByaW9yaXR5IGNv
bnRleHRzIGFyZSBzdGFydmluZyBhbmQgbXVzdCBmaWdodCBvdmVyCj4gKyAgICAgICAgKiB0aGUg
bWVhZ3JlIHJlc291cmNlcy4gT25lIHN0ZXAgYXQgYSB0aW1lLgo+ICsgICAgICAgICovCj4gKwo+
ICsgICAgICAgdWZkID0gdXNlcmZhdWx0ZmQoMCk7Cj4gKyAgICAgICBpZ3RfcmVxdWlyZV9mKHVm
ZCAhPSAtMSwgImtlcm5lbCBzdXBwb3J0IGZvciB1c2VyZmF1bHRmZFxuIik7Cj4gKyAgICAgICBp
Z3RfcmVxdWlyZV9mKGlvY3RsKHVmZCwgVUZGRElPX0FQSSwgJmFwaSkgPT0gMCAmJiBhcGkuYXBp
ID09IFVGRkRfQVBJLAo+ICsgICAgICAgICAgICAgICAgICAgICAidXNlcmZhdWx0ZmQgQVBJIHYl
bGxkOiVsbGRcbiIsIFVGRkRfQVBJLCBhcGkuYXBpKTsKPiArCj4gKyAgICAgICB0Lmk5MTUgPSBp
OTE1Owo+ICsgICAgICAgdC5lbmdpbmUgPSBlbmdpbmU7Cj4gKwo+ICsgICAgICAgdC5wYWdlID0g
bW1hcChOVUxMLCA0MDk2LCBQUk9UX1dSSVRFLCBNQVBfU0hBUkVEIHwgTUFQX0FOT04sIDAsIDAp
Owo+ICsgICAgICAgaWd0X2Fzc2VydCh0LnBhZ2UgIT0gTUFQX0ZBSUxFRCk7Cj4gKwo+ICsgICAg
ICAgdC5iYXRjaCA9IGdlbV9jcmVhdGUoaTkxNSwgNDA5Nik7Cj4gKyAgICAgICBtZW1zZXQocG9p
c29uLCAweGZmLCBzaXplb2YocG9pc29uKSk7Cj4gKyAgICAgICBnZW1fd3JpdGUoaTkxNSwgdC5i
YXRjaCwgMCwgcG9pc29uLCA0MDk2KTsKPiArCj4gKyAgICAgICAvKiBSZWdpc3RlciBvdXIgZmF1
bHQgaGFuZGxlciBmb3IgdC5wYWdlICovCj4gKyAgICAgICBtZW1zZXQoJnJlZywgMCwgc2l6ZW9m
KHJlZykpOwo+ICsgICAgICAgcmVnLm1vZGUgPSBVRkZESU9fUkVHSVNURVJfTU9ERV9NSVNTSU5H
Owo+ICsgICAgICAgcmVnLnJhbmdlLnN0YXJ0ID0gdG9fdXNlcl9wb2ludGVyKHQucGFnZSk7Cj4g
KyAgICAgICByZWcucmFuZ2UubGVuID0gNDA5NjsKPiArICAgICAgIGRvX2lvY3RsKHVmZCwgVUZG
RElPX1JFR0lTVEVSLCAmcmVnKTsKPiArICAgICAgIGlndF9hc3NlcnQocmVnLmlvY3RscyA9PSBV
RkZEX0FQSV9SQU5HRV9JT0NUTFMpOwo+ICsKPiArICAgICAgIC8qIEtpY2sgb2ZmIHRoZSBsb3cg
cHJpb3JpdHkgc3VibWlzc2lvbiAqLwo+ICsgICAgICAgaWd0X2Fzc2VydChwdGhyZWFkX2NyZWF0
ZSgmdC50aHJlYWQsIE5VTEwsIHVmZF90aHJlYWQsICZ0KSA9PSAwKTsKPiArCj4gKyAgICAgICAv
KiBXYWl0IHVudGlsIHRoZSBsb3cgcHJpb3JpdHkgdGhyZWFkIGlzIGJsb2NrZWQgb24gYSBmYXVs
dCAqLwo+ICsgICAgICAgaWd0X2Fzc2VydF9lcShyZWFkKHVmZCwgJm1zZywgc2l6ZW9mKG1zZykp
LCBzaXplb2YobXNnKSk7Cj4gKyAgICAgICBpZ3RfYXNzZXJ0X2VxKG1zZy5ldmVudCwgVUZGRF9F
VkVOVF9QQUdFRkFVTFQpOwo+ICsgICAgICAgaWd0X2Fzc2VydChmcm9tX3VzZXJfcG9pbnRlciht
c2cuYXJnLnBhZ2VmYXVsdC5hZGRyZXNzKSA9PSB0LnBhZ2UpOwo+ICsKPiArICAgICAgIC8qIFdo
aWxlIHRoZSBsb3cgcHJpb3JpdHkgY29udGV4dCBpcyBibG9ja2VkOyBleGVjdXRlIGEgdmlwICov
Cj4gKyAgICAgICBpZiAoMSkgewo+ICsgICAgICAgICAgICAgICBjb25zdCB1aW50MzJfdCBiYmUg
PSBNSV9CQVRDSF9CVUZGRVJfRU5EOwo+ICsgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX2V4ZWNfb2JqZWN0MiBvYmogPSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgLmhhbmRs
ZSA9IHQuYmF0Y2gsCj4gKyAgICAgICAgICAgICAgIH07Cj4gKyAgICAgICAgICAgICAgIHN0cnVj
dCBwb2xsZmQgcGZkOwo+ICsgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNi
dWZmZXIyIGViID0gewo+ICsgICAgICAgICAgICAgICAgICAgICAgIC5idWZmZXJzX3B0ciA9IHRv
X3VzZXJfcG9pbnRlcigmb2JqKSwKPiArICAgICAgICAgICAgICAgICAgICAgICAuYnVmZmVyX2Nv
dW50ID0gMSwKPiArICAgICAgICAgICAgICAgICAgICAgICAuZmxhZ3MgPSBlbmdpbmUgfCBJOTE1
X0VYRUNfRkVOQ0VfT1VULAo+ICsgICAgICAgICAgICAgICAgICAgICAgIC5yc3ZkMSA9IGdlbV9j
b250ZXh0X2NyZWF0ZShpOTE1KSwKPiArICAgICAgICAgICAgICAgfTsKPiArICAgICAgICAgICAg
ICAgZ2VtX2NvbnRleHRfc2V0X3ByaW9yaXR5KGk5MTUsIGViLnJzdmQxLCBNQVhfUFJJTyk7Cj4g
KyAgICAgICAgICAgICAgIGdlbV93cml0ZShpOTE1LCBvYmouaGFuZGxlLCAwLCAmYmJlLCBzaXpl
b2YoYmJlKSk7Cj4gKyAgICAgICAgICAgICAgIGdlbV9leGVjYnVmX3dyKGk5MTUsICZlYik7Cj4g
Kwo+ICsgICAgICAgICAgICAgICBtZW1zZXQoJnBmZCwgMCwgc2l6ZW9mKHBmZCkpOwo+ICsgICAg
ICAgICAgICAgICBwZmQuZmQgPSBlYi5yc3ZkMiA+PiAzMjsKPiArICAgICAgICAgICAgICAgcGZk
LmV2ZW50cyA9IFBPTExJTjsKPiArICAgICAgICAgICAgICAgcG9sbCgmcGZkLCAxLCAtMSk7Cj4g
KyAgICAgICAgICAgICAgIGlndF9hc3NlcnRfZXEoc3luY19mZW5jZV9zdGF0dXMocGZkLmZkKSwg
MSk7Cj4gKyAgICAgICAgICAgICAgIGNsb3NlKHBmZC5mZCk7Cj4gKwo+ICsgICAgICAgICAgICAg
ICBnZW1fY29udGV4dF9kZXN0cm95KGk5MTUsIGViLnJzdmQxKTsKPiArICAgICAgIH0KPiArCj4g
KyAgICAgICAvKiBDb25maXJtIHRoZSBsb3cgcHJpb3JpdHkgY29udGV4dCBpcyBzdGlsbCB3YWl0
aW5nICovCj4gKyAgICAgICBpZ3RfYXNzZXJ0X2VxKHQuaTkxNSwgaTkxNSk7Cj4gKwo+ICsgICAg
ICAgLyogU2VydmljZSB0aGUgZmF1bHQ7IHJlbGVhc2luZyB0aGUgbG93IHByaW9yaXR5IGNvbnRl
eHQgKi8KPiArICAgICAgIG1lbXNldCgmY29weSwgMCwgc2l6ZW9mKGNvcHkpKTsKPiArICAgICAg
IGNvcHkuZHN0ID0gbXNnLmFyZy5wYWdlZmF1bHQuYWRkcmVzczsKPiArICAgICAgIGNvcHkuc3Jj
ID0gdG9fdXNlcl9wb2ludGVyKG1lbXNldChwb2lzb24sIDB4YzUsIHNpemVvZihwb2lzb24pKSk7
Cj4gKyAgICAgICBjb3B5LmxlbiA9IDQwOTY7Cj4gKyAgICAgICBkb19pb2N0bCh1ZmQsIFVGRkRJ
T19DT1BZLCAmY29weSk7Cj4gKwo+ICsgICAgICAgcHRocmVhZF9qb2luKHQudGhyZWFkLCBOVUxM
KTsKPiArCj4gKyAgICAgICBnZW1fY2xvc2UoaTkxNSwgdC5iYXRjaCk7Cj4gKyAgICAgICBtdW5t
YXAodC5wYWdlLCA0MDk2KTsKPiArICAgICAgIGNsb3NlKHVmZCk7Cj4gK30KPiArCj4gIHN0YXRp
YyB2b2lkIG1lYXN1cmVfc2VtYXBob3JlX3Bvd2VyKGludCBpOTE1KQo+ICB7Cj4gICAgICAgICBz
dHJ1Y3QgcmFwbCBncHUsIHBrZzsKPiBAQCAtMTg2NCw2ICsyMDE2LDkgQEAgaWd0X21haW4KPgo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWd0X3N1YnRlc3RfZigicGktY29tbW9u
LSVzIiwgZS0+bmFtZSkKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dGVzdF9waV9yaW5nZnVsbChmZCwgZWJfcmluZyhlKSwgU0hBUkVEKTsKPiArCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBpZ3Rfc3VidGVzdF9mKCJwaS11c2VyZmF1bHQtJXMiLCBl
LT5uYW1lKQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0X3Bp
X3VzZXJmYXVsdChmZCwgZWJfcmluZyhlKSk7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgfQo+
ICAgICAgICAgICAgICAgICB9Cj4gICAgICAgICB9Cj4gLS0KPiAyLjI0LjAKPgo+IF9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCj4gaWd0LWRldiBtYWlsaW5n
IGxpc3QKPiBpZ3QtZGV2QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaWd0LWRldgoKCgotLSAKRGFuaWVsIFZldHRl
cgpTb2Z0d2FyZSBFbmdpbmVlciwgSW50ZWwgQ29ycG9yYXRpb24KKzQxICgwKSA3OSAzNjUgNTcg
NDggLSBodHRwOi8vYmxvZy5mZndsbC5jaApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9pbnRlbC1nZng=

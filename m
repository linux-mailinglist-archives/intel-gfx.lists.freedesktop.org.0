Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6883C1A0A6E
	for <lists+intel-gfx@lfdr.de>; Tue,  7 Apr 2020 11:50:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A97DF6E802;
	Tue,  7 Apr 2020 09:50:02 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E36206E802
 for <intel-gfx@lists.freedesktop.org>; Tue,  7 Apr 2020 09:50:01 +0000 (UTC)
IronPort-SDR: g/TRmkF4XZ9gAGKemijdF4afEK+MXnIfSidt+QsnWSiDSYfbRtN0vQhteVbc/QgDxIQ8k0lwnS
 yJ+rvM/Nhv4Q==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by orsmga105.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 07 Apr 2020 02:50:01 -0700
IronPort-SDR: u6NcYkHfAjN8EZigGpgZtouiu+Fys1wwNC+nga/Np6i0mQIHzmjqo5sOGOWRfOsaG/VyQ3vwli
 v3yDt8wR5DmQ==
X-IronPort-AV: E=Sophos;i="5.72,353,1580803200"; d="scan'208";a="397803694"
Received: from vogtstef-mobl3.ger.corp.intel.com (HELO localhost)
 ([10.249.40.153])
 by orsmga004-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 07 Apr 2020 02:49:58 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  7 Apr 2020 12:49:38 +0300
Message-Id: <839be69cb88415ae764629c9c8b4a864efe49567.1586252867.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1586252867.git.jani.nikula@intel.com>
References: <cover.1586252867.git.jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH 3/3] drm/i915/params: switch to device specific
 parameters
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com,
 =?UTF-8?q?Juha-Pekka=20Heikkil=C3=A4?= <juha-pekka.heikkila@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U3RhcnQgdXNpbmcgZGV2aWNlIHNwZWNpZmljIHBhcmFtZXRlcnMgaW5zdGVhZCBvZiBtb2R1bGUg
cGFyYW1ldGVycyBmb3IKbW9zdCB0aGluZ3MuIFRoZSBtb2R1bGUgcGFyYW1ldGVycyBiZWNvbWUg
dGhlIGltbXV0YWJsZSBpbml0aWFsIHZhbHVlcwpmb3IgaTkxNSBwYXJhbWV0ZXJzLiBUaGUgZGV2
aWNlIHNwZWNpZmljIHBhcmFtZXRlcnMgaW4gaTkxNS0+cGFyYW1zCnN0YXJ0IGxpZmUgYXMgYSBj
b3B5IG9mIGk5MTVfbW9kcGFyYW1zLiBBbnkgbGF0ZXIgY2hhbmdlcyBhcmUgb25seQpyZWZsZWN0
ZWQgaW4gdGhlIGRlYnVnZnMuCgpUaGUgc3RyYWdnbGVycyBhcmU6CgoqIGk5MTUuZm9yY2VfcHJv
YmUgYW5kIGk5MTUubW9kZXNldC4gTmVlZGVkIGJlZm9yZSBkZXZfcHJpdiBpcwogIGF2YWlsYWJs
ZS4gVGhpcyBpcyBmaW5lIGJlY2F1c2UgdGhlIHBhcmFtZXRlcnMgYXJlIHJlYWQtb25seSBhbmQg
bmV2ZXIKICBtb2RpZmllZC4KCiogaTkxNS52ZXJib3NlX3N0YXRlX2NoZWNrcy4gUGFzc2luZyBk
ZXZfcHJpdiB0byBJOTE1X1NUQVRFX1dBUk4gYW5kCiAgSTkxNV9TVEFURV9XQVJOX09OIHdvdWxk
IHJlc3VsdCBpbiBtYXNzaXZlIGFuZCB1Z2x5IGNodXJuLiBUaGlzIGlzCiAgaGFuZGxlZCBieSBu
b3QgZXhwb3NpbmcgdGhlIHBhcmFtZXRlciB2aWEgZGVidWdmcywgYW5kIGxlYXZpbmcgdGhlCiAg
cGFyYW1ldGVyIHdyaXRhYmxlIGluIHN5c2ZzLiBUaGlzIG1heSBiZSBmaXhlZCB1cCBpbiBmb2xs
b3ctdXAgd29yay4KCiogaTkxNS5pbmplY3RfcHJvYmVfZmFpbHVyZS4gT25seSBtYWtlcyBzZW5z
ZSBpbiB0ZXJtcyBvZiB0aGUgbW9kdWxlLAogIG5vdCB0aGUgZGV2aWNlLiBUaGlzIGlzIGhhbmRs
ZWQgYnkgbm90IGV4cG9zaW5nIHRoZSBwYXJhbWV0ZXIgdmlhCiAgZGVidWdmcy4KCkNjOiBKdWhh
LVBla2thIEhlaWtraWzDpCA8anVoYS1wZWtrYS5oZWlra2lsYUBpbnRlbC5jb20+CkNjOiBWZW5r
YXRhIFNhbmRlZXAgRGhhbmFsYWtvdGEgPHZlbmthdGEucy5kaGFuYWxha290YUBpbnRlbC5jb20+
ClNpZ25lZC1vZmYtYnk6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBpbnRlbC5jb20+Ci0tLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9iaW9zLmMgICAgIHwgIDYgKystLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3J0LmMgICAgICB8ICA0ICsrLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3NyLmMgICAgICB8ICA2ICsrLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyAgfCAxMiArKysr
Ky0tLS0tCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X2RlYnVnZnMuYyAgfCAg
MiArLQogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5jICAgIHwgMTQg
KysrKysrLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMgICAg
ICAgfCAgOSArKysrKy0tLQogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfYXV4X2JhY2ts
aWdodC5jIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZmJjLmMg
ICAgICB8IDEyICsrKysrLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
bHZkcy5jICAgICB8ICA0ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
b3ByZWdpb24uYyB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Bh
bmVsLmMgICAgfCAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Bz
ci5jICAgICAgfCAgNiArKy0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2Nv
bnRleHQuYyAgIHwgIDQgKystLQogLi4uL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVh
cnRiZWF0LmMgIHwgIDMgKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNldC5j
ICAgICAgICAgfCAgNiArKy0tLQogLi4uL2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2VuZ2luZV9oZWFy
dGJlYXQuYyAgIHwgIDYgKystLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1
Y19sb2cuYyAgICB8IDE1ICsrKysrKysrLS0tLS0KIC4uLi9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50
ZWxfZ3VjX3N1Ym1pc3Npb24uYyB8ICA0ICsrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Vj
L2ludGVsX3VjLmMgICAgICAgICB8IDIwICsrKysrKysrLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5jICAgICAgfCAyMiArKysrKysrKysrLS0tLS0tLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyAgICAgICAgICAgfCAgMiArLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzX3BhcmFtcy5jICAgIHwgIDIgKy0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgICAgICAgICAgICAgICB8ICA5ICsrKysrKy0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oICAgICAgICAgICAgICAgfCAgNSArKysr
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jICAgICAgICAgIHwgIDIgKy0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMgICAgICAgICB8ICA0ICsrLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d2dC5jICAgICAgICAgICAgICB8ICA4ICsrKy0t
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3JlZ2lvbl9sbWVtLmMgICAgICB8ICA2ICsr
LS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuYyAgICAgICAgICAgfCAgOCAr
KystLS0tCiAzMCBmaWxlcyBjaGFuZ2VkLCAxMTQgaW5zZXJ0aW9ucygrKSwgOTUgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9iaW9z
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jpb3MuYwppbmRleCA4Mzkx
MjQ2NDcyMDIuLmVjOGFmMmI3YmYwMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9iaW9zLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9iaW9zLmMKQEAgLTQ3OSw3ICs0NzksNyBAQCBwYXJzZV9zZHZvX3BhbmVsX2RhdGEoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCXN0cnVjdCBkcm1fZGlzcGxheV9tb2Rl
ICpwYW5lbF9maXhlZF9tb2RlOwogCWludCBpbmRleDsKIAotCWluZGV4ID0gaTkxNV9tb2RwYXJh
bXMudmJ0X3Nkdm9fcGFuZWxfdHlwZTsKKwlpbmRleCA9IGRldl9wcml2LT5wYXJhbXMudmJ0X3Nk
dm9fcGFuZWxfdHlwZTsKIAlpZiAoaW5kZXggPT0gLTIpIHsKIAkJZHJtX2RiZ19rbXMoJmRldl9w
cml2LT5kcm0sCiAJCQkgICAgIklnbm9yZSBTRFZPIHBhbmVsIG1vZGUgZnJvbSBCSU9TIFZCVCB0
YWJsZXMuXG4iKTsKQEAgLTgyOSw5ICs4MjksOSBAQCBwYXJzZV9lZHAoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2LCBjb25zdCBzdHJ1Y3QgYmRiX2hlYWRlciAqYmRiKQogCQl1OCB2
c3dpbmc7CiAKIAkJLyogRG9uJ3QgcmVhZCBmcm9tIFZCVCBpZiBtb2R1bGUgcGFyYW1ldGVyIGhh
cyB2YWxpZCB2YWx1ZSovCi0JCWlmIChpOTE1X21vZHBhcmFtcy5lZHBfdnN3aW5nKSB7CisJCWlm
IChkZXZfcHJpdi0+cGFyYW1zLmVkcF92c3dpbmcpIHsKIAkJCWRldl9wcml2LT52YnQuZWRwLmxv
d192c3dpbmcgPQotCQkJCWk5MTVfbW9kcGFyYW1zLmVkcF92c3dpbmcgPT0gMTsKKwkJCQlkZXZf
cHJpdi0+cGFyYW1zLmVkcF92c3dpbmcgPT0gMTsKIAkJfSBlbHNlIHsKIAkJCXZzd2luZyA9IChl
ZHAtPmVkcF92c3dpbmdfcHJlZW1waCA+PiAocGFuZWxfdHlwZSAqIDQpKSAmIDB4RjsKIAkJCWRl
dl9wcml2LT52YnQuZWRwLmxvd192c3dpbmcgPSB2c3dpbmcgPT0gMDsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3J0LmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2NydC5jCmluZGV4IDgwYzkxNDA0MDQ2Zi4uMTExMTZlMmI2Nzgw
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NydC5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3J0LmMKQEAgLTgzMCw3ICs4
MzAsNyBAQCBpbnRlbF9jcnRfZGV0ZWN0KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3Is
CiAJCSAgICBjb25uZWN0b3ItPmJhc2UuaWQsIGNvbm5lY3Rvci0+bmFtZSwKIAkJICAgIGZvcmNl
KTsKIAotCWlmIChpOTE1X21vZHBhcmFtcy5sb2FkX2RldGVjdF90ZXN0KSB7CisJaWYgKGRldl9w
cml2LT5wYXJhbXMubG9hZF9kZXRlY3RfdGVzdCkgewogCQl3YWtlcmVmID0gaW50ZWxfZGlzcGxh
eV9wb3dlcl9nZXQoZGV2X3ByaXYsCiAJCQkJCQkgIGludGVsX2VuY29kZXItPnBvd2VyX2RvbWFp
bik7CiAJCWdvdG8gbG9hZF9kZXRlY3Q7CkBAIC04ODYsNyArODg2LDcgQEAgaW50ZWxfY3J0X2Rl
dGVjdChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQllbHNlIGlmIChJTlRFTF9H
RU4oZGV2X3ByaXYpIDwgNCkKIAkJCXN0YXR1cyA9IGludGVsX2NydF9sb2FkX2RldGVjdChjcnQs
CiAJCQkJdG9faW50ZWxfY3J0Yyhjb25uZWN0b3ItPnN0YXRlLT5jcnRjKS0+cGlwZSk7Ci0JCWVs
c2UgaWYgKGk5MTVfbW9kcGFyYW1zLmxvYWRfZGV0ZWN0X3Rlc3QpCisJCWVsc2UgaWYgKGRldl9w
cml2LT5wYXJhbXMubG9hZF9kZXRlY3RfdGVzdCkKIAkJCXN0YXR1cyA9IGNvbm5lY3Rvcl9zdGF0
dXNfZGlzY29ubmVjdGVkOwogCQllbHNlCiAJCQlzdGF0dXMgPSBjb25uZWN0b3Jfc3RhdHVzX3Vu
a25vd247CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Nz
ci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jc3IuYwppbmRleCAzMTEy
NTcyY2ZiN2QuLjhjNDgxMjcwYTE2MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9jc3IuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Nzci5jCkBAIC03MTMsMTUgKzcxMywxNSBAQCB2b2lkIGludGVsX2Nzcl91Y29kZV9pbml0
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkJY3NyLT5tYXhfZndfc2l6ZSA9
IEJYVF9DU1JfTUFYX0ZXX1NJWkU7CiAJfQogCi0JaWYgKGk5MTVfbW9kcGFyYW1zLmRtY19maXJt
d2FyZV9wYXRoKSB7Ci0JCWlmIChzdHJsZW4oaTkxNV9tb2RwYXJhbXMuZG1jX2Zpcm13YXJlX3Bh
dGgpID09IDApIHsKKwlpZiAoZGV2X3ByaXYtPnBhcmFtcy5kbWNfZmlybXdhcmVfcGF0aCkgewor
CQlpZiAoc3RybGVuKGRldl9wcml2LT5wYXJhbXMuZG1jX2Zpcm13YXJlX3BhdGgpID09IDApIHsK
IAkJCWNzci0+ZndfcGF0aCA9IE5VTEw7CiAJCQlkcm1faW5mbygmZGV2X3ByaXYtPmRybSwKIAkJ
CQkgIkRpc2FibGluZyBDU1IgZmlybXdhcmUgYW5kIHJ1bnRpbWUgUE1cbiIpOwogCQkJcmV0dXJu
OwogCQl9CiAKLQkJY3NyLT5md19wYXRoID0gaTkxNV9tb2RwYXJhbXMuZG1jX2Zpcm13YXJlX3Bh
dGg7CisJCWNzci0+ZndfcGF0aCA9IGRldl9wcml2LT5wYXJhbXMuZG1jX2Zpcm13YXJlX3BhdGg7
CiAJCS8qIEJ5cGFzcyB2ZXJzaW9uIGNoZWNrIGZvciBmaXJtd2FyZSBvdmVycmlkZS4gKi8KIAkJ
Y3NyLT5yZXF1aXJlZF92ZXJzaW9uID0gMDsKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4IDcwZWMzMDFmZTZlMy4uZjEzODMyNzQ3MWY3IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtNDg3
NSw3ICs0ODc1LDcgQEAgdm9pZCBpbnRlbF9wcmVwYXJlX3Jlc2V0KHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdikKIAlpbnQgcmV0OwogCiAJLyogcmVzZXQgZG9lc24ndCB0b3VjaCB0
aGUgZGlzcGxheSAqLwotCWlmICghaTkxNV9tb2RwYXJhbXMuZm9yY2VfcmVzZXRfbW9kZXNldF90
ZXN0ICYmCisJaWYgKCFkZXZfcHJpdi0+cGFyYW1zLmZvcmNlX3Jlc2V0X21vZGVzZXRfdGVzdCAm
JgogCSAgICAhZ3B1X3Jlc2V0X2Nsb2JiZXJzX2Rpc3BsYXkoZGV2X3ByaXYpKQogCQlyZXR1cm47
CiAKQEAgLTc4NTAsNyArNzg1MCw3IEBAIGJvb2wgaHN3X2NydGNfc3RhdGVfaXBzX2NhcGFibGUo
Y29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiAJaWYgKCFoc3dfY3J0
Y19zdXBwb3J0c19pcHMoY3J0YykpCiAJCXJldHVybiBmYWxzZTsKIAotCWlmICghaTkxNV9tb2Rw
YXJhbXMuZW5hYmxlX2lwcykKKwlpZiAoIWRldl9wcml2LT5wYXJhbXMuZW5hYmxlX2lwcykKIAkJ
cmV0dXJuIGZhbHNlOwogCiAJaWYgKGNydGNfc3RhdGUtPnBpcGVfYnBwID4gMjQpCkBAIC04MTI0
LDggKzgxMjQsOCBAQCBzdGF0aWMgdm9pZCBpbnRlbF9wYW5lbF9zYW5pdGl6ZV9zc2Moc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCiBzdGF0aWMgaW5saW5lIGJvb2wgaW50ZWxf
cGFuZWxfdXNlX3NzYyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiB7Ci0JaWYg
KGk5MTVfbW9kcGFyYW1zLnBhbmVsX3VzZV9zc2MgPj0gMCkKLQkJcmV0dXJuIGk5MTVfbW9kcGFy
YW1zLnBhbmVsX3VzZV9zc2MgIT0gMDsKKwlpZiAoZGV2X3ByaXYtPnBhcmFtcy5wYW5lbF91c2Vf
c3NjID49IDApCisJCXJldHVybiBkZXZfcHJpdi0+cGFyYW1zLnBhbmVsX3VzZV9zc2MgIT0gMDsK
IAlyZXR1cm4gZGV2X3ByaXYtPnZidC5sdmRzX3VzZV9zc2MKIAkJJiYgIShkZXZfcHJpdi0+cXVp
cmtzICYgUVVJUktfTFZEU19TU0NfRElTQUJMRSk7CiB9CkBAIC0xMzQ5Myw4ICsxMzQ5Myw4IEBA
IHBpcGVfY29uZmlnX21pc21hdGNoKGJvb2wgZmFzdHNldCwgY29uc3Qgc3RydWN0IGludGVsX2Ny
dGMgKmNydGMsCiAKIHN0YXRpYyBib29sIGZhc3Rib290X2VuYWJsZWQoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2KQogewotCWlmIChpOTE1X21vZHBhcmFtcy5mYXN0Ym9vdCAhPSAt
MSkKLQkJcmV0dXJuIGk5MTVfbW9kcGFyYW1zLmZhc3Rib290OworCWlmIChkZXZfcHJpdi0+cGFy
YW1zLmZhc3Rib290ICE9IC0xKQorCQlyZXR1cm4gZGV2X3ByaXYtPnBhcmFtcy5mYXN0Ym9vdDsK
IAogCS8qIEVuYWJsZSBmYXN0Ym9vdCBieSBkZWZhdWx0IG9uIFNreWxha2UgYW5kIG5ld2VyICov
CiAJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gOSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9kZWJ1Z2ZzLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfZGVidWdmcy5jCmluZGV4IDQyNGY0ZTUyZjc4
My4uMGZhNmVkYWYxZWZlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXlfZGVidWdmcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZGlzcGxheV9kZWJ1Z2ZzLmMKQEAgLTEyNCw3ICsxMjQsNyBAQCBzdGF0aWMgaW50
IGk5MTVfaXBzX3N0YXR1cyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIAl3YWtl
cmVmID0gaW50ZWxfcnVudGltZV9wbV9nZXQoJmRldl9wcml2LT5ydW50aW1lX3BtKTsKIAogCXNl
cV9wcmludGYobSwgIkVuYWJsZWQgYnkga2VybmVsIHBhcmFtZXRlcjogJXNcbiIsCi0JCSAgIHll
c25vKGk5MTVfbW9kcGFyYW1zLmVuYWJsZV9pcHMpKTsKKwkJICAgeWVzbm8oZGV2X3ByaXYtPnBh
cmFtcy5lbmFibGVfaXBzKSk7CiAKIAlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSA4KSB7CiAJ
CXNlcV9wdXRzKG0sICJDdXJyZW50bHk6IHVua25vd25cbiIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYwppbmRleCA0MzNlNWE4MWRk
NGQuLjgxNmRmYzI5NDcyNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMKQEAgLTQyNzUsNyArNDI3NSw3IEBAIHN0YXRpYyB1MzIg
Z2V0X2FsbG93ZWRfZGNfbWFzayhjb25zdCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsCiAJCW1hc2sgPSAwOwogCX0KIAotCWlmICghaTkxNV9tb2RwYXJhbXMuZGlzYWJsZV9wb3dl
cl93ZWxsKQorCWlmICghZGV2X3ByaXYtPnBhcmFtcy5kaXNhYmxlX3Bvd2VyX3dlbGwpCiAJCW1h
eF9kYyA9IDA7CiAKIAlpZiAoZW5hYmxlX2RjID49IDAgJiYgZW5hYmxlX2RjIDw9IG1heF9kYykg
ewpAQCAtNDM2MSwxMSArNDM2MSwxMSBAQCBpbnQgaW50ZWxfcG93ZXJfZG9tYWluc19pbml0KHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlzdHJ1Y3QgaTkxNV9wb3dlcl9kb21h
aW5zICpwb3dlcl9kb21haW5zID0gJmRldl9wcml2LT5wb3dlcl9kb21haW5zOwogCWludCBlcnI7
CiAKLQlpOTE1X21vZHBhcmFtcy5kaXNhYmxlX3Bvd2VyX3dlbGwgPQorCWRldl9wcml2LT5wYXJh
bXMuZGlzYWJsZV9wb3dlcl93ZWxsID0KIAkJc2FuaXRpemVfZGlzYWJsZV9wb3dlcl93ZWxsX29w
dGlvbihkZXZfcHJpdiwKLQkJCQkJCSAgIGk5MTVfbW9kcGFyYW1zLmRpc2FibGVfcG93ZXJfd2Vs
bCk7CisJCQkJCQkgICBkZXZfcHJpdi0+cGFyYW1zLmRpc2FibGVfcG93ZXJfd2VsbCk7CiAJZGV2
X3ByaXYtPmNzci5hbGxvd2VkX2RjX21hc2sgPQotCQlnZXRfYWxsb3dlZF9kY19tYXNrKGRldl9w
cml2LCBpOTE1X21vZHBhcmFtcy5lbmFibGVfZGMpOworCQlnZXRfYWxsb3dlZF9kY19tYXNrKGRl
dl9wcml2LCBkZXZfcHJpdi0+cGFyYW1zLmVuYWJsZV9kYyk7CiAKIAlkZXZfcHJpdi0+Y3NyLnRh
cmdldF9kY19zdGF0ZSA9CiAJCXNhbml0aXplX3RhcmdldF9kY19zdGF0ZShkZXZfcHJpdiwgRENf
U1RBVEVfRU5fVVBUT19EQzYpOwpAQCAtNTMzMSw3ICs1MzMxLDcgQEAgdm9pZCBpbnRlbF9wb3dl
cl9kb21haW5zX2luaXRfaHcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIGJvb2wgcmVz
dW1lKQogCQlpbnRlbF9kaXNwbGF5X3Bvd2VyX2dldChpOTE1LCBQT1dFUl9ET01BSU5fSU5JVCk7
CiAKIAkvKiBEaXNhYmxlIHBvd2VyIHN1cHBvcnQgaWYgdGhlIHVzZXIgYXNrZWQgc28uICovCi0J
aWYgKCFpOTE1X21vZHBhcmFtcy5kaXNhYmxlX3Bvd2VyX3dlbGwpCisJaWYgKCFpOTE1LT5wYXJh
bXMuZGlzYWJsZV9wb3dlcl93ZWxsKQogCQlpbnRlbF9kaXNwbGF5X3Bvd2VyX2dldChpOTE1LCBQ
T1dFUl9ET01BSU5fSU5JVCk7CiAJaW50ZWxfcG93ZXJfZG9tYWluc19zeW5jX2h3KGk5MTUpOwog
CkBAIC01MzU1LDcgKzUzNTUsNyBAQCB2b2lkIGludGVsX3Bvd2VyX2RvbWFpbnNfZHJpdmVyX3Jl
bW92ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAkJZmV0Y2hfYW5kX3plcm8oJmk5
MTUtPnBvd2VyX2RvbWFpbnMud2FrZXJlZik7CiAKIAkvKiBSZW1vdmUgdGhlIHJlZmNvdW50IHdl
IHRvb2sgdG8ga2VlcCBwb3dlciB3ZWxsIHN1cHBvcnQgZGlzYWJsZWQuICovCi0JaWYgKCFpOTE1
X21vZHBhcmFtcy5kaXNhYmxlX3Bvd2VyX3dlbGwpCisJaWYgKCFpOTE1LT5wYXJhbXMuZGlzYWJs
ZV9wb3dlcl93ZWxsKQogCQlpbnRlbF9kaXNwbGF5X3Bvd2VyX3B1dF91bmNoZWNrZWQoaTkxNSwg
UE9XRVJfRE9NQUlOX0lOSVQpOwogCiAJaW50ZWxfZGlzcGxheV9wb3dlcl9mbHVzaF93b3JrX3N5
bmMoaTkxNSk7CkBAIC01NDQ0LDcgKzU0NDQsNyBAQCB2b2lkIGludGVsX3Bvd2VyX2RvbWFpbnNf
c3VzcGVuZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKIAkgKiBFdmVuIGlmIHBvd2Vy
IHdlbGwgc3VwcG9ydCB3YXMgZGlzYWJsZWQgd2Ugc3RpbGwgd2FudCB0byBkaXNhYmxlCiAJICog
cG93ZXIgd2VsbHMgaWYgcG93ZXIgZG9tYWlucyBtdXN0IGJlIGRlaW5pdGlhbGl6ZWQgZm9yIHN1
c3BlbmQuCiAJICovCi0JaWYgKCFpOTE1X21vZHBhcmFtcy5kaXNhYmxlX3Bvd2VyX3dlbGwpCisJ
aWYgKCFpOTE1LT5wYXJhbXMuZGlzYWJsZV9wb3dlcl93ZWxsKQogCQlpbnRlbF9kaXNwbGF5X3Bv
d2VyX3B1dF91bmNoZWNrZWQoaTkxNSwgUE9XRVJfRE9NQUlOX0lOSVQpOwogCiAJaW50ZWxfZGlz
cGxheV9wb3dlcl9mbHVzaF93b3JrKGk5MTUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kcC5jCmluZGV4IDI1ZjBiYWFmZDZkMC4uMzcwZTI4NTY1OThlIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCkBAIC00NzI0LDcgKzQ3MjQsOSBAQCBpbnRlbF9k
cF9zaW5rX2Nhbl9tc3Qoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCkKIHN0YXRpYyBib29sCiBp
bnRlbF9kcF9jYW5fbXN0KHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHApCiB7Ci0JcmV0dXJuIGk5
MTVfbW9kcGFyYW1zLmVuYWJsZV9kcF9tc3QgJiYKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSA9IGRwX3RvX2k5MTUoaW50ZWxfZHApOworCisJcmV0dXJuIGk5MTUtPnBhcmFtcy5lbmFi
bGVfZHBfbXN0ICYmCiAJCWludGVsX2RwLT5jYW5fbXN0ICYmCiAJCWludGVsX2RwX3NpbmtfY2Fu
X21zdChpbnRlbF9kcCk7CiB9CkBAIC00NzMyLDYgKzQ3MzQsNyBAQCBpbnRlbF9kcF9jYW5fbXN0
KHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHApCiBzdGF0aWMgdm9pZAogaW50ZWxfZHBfY29uZmln
dXJlX21zdChzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKQogeworCXN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1ID0gZHBfdG9faTkxNShpbnRlbF9kcCk7CiAJc3RydWN0IGludGVsX2VuY29k
ZXIgKmVuY29kZXIgPQogCQkmZHBfdG9fZGlnX3BvcnQoaW50ZWxfZHApLT5iYXNlOwogCWJvb2wg
c2lua19jYW5fbXN0ID0gaW50ZWxfZHBfc2lua19jYW5fbXN0KGludGVsX2RwKTsKQEAgLTQ3Mzks
MTMgKzQ3NDIsMTMgQEAgaW50ZWxfZHBfY29uZmlndXJlX21zdChzdHJ1Y3QgaW50ZWxfZHAgKmlu
dGVsX2RwKQogCURSTV9ERUJVR19LTVMoIltFTkNPREVSOiVkOiVzXSBNU1Qgc3VwcG9ydDogcG9y
dDogJXMsIHNpbms6ICVzLCBtb2RwYXJhbTogJXNcbiIsCiAJCSAgICAgIGVuY29kZXItPmJhc2Uu
YmFzZS5pZCwgZW5jb2Rlci0+YmFzZS5uYW1lLAogCQkgICAgICB5ZXNubyhpbnRlbF9kcC0+Y2Fu
X21zdCksIHllc25vKHNpbmtfY2FuX21zdCksCi0JCSAgICAgIHllc25vKGk5MTVfbW9kcGFyYW1z
LmVuYWJsZV9kcF9tc3QpKTsKKwkJICAgICAgeWVzbm8oaTkxNS0+cGFyYW1zLmVuYWJsZV9kcF9t
c3QpKTsKIAogCWlmICghaW50ZWxfZHAtPmNhbl9tc3QpCiAJCXJldHVybjsKIAogCWludGVsX2Rw
LT5pc19tc3QgPSBzaW5rX2Nhbl9tc3QgJiYKLQkJaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2RwX21z
dDsKKwkJaTkxNS0+cGFyYW1zLmVuYWJsZV9kcF9tc3Q7CiAKIAlkcm1fZHBfbXN0X3RvcG9sb2d5
X21ncl9zZXRfbXN0KCZpbnRlbF9kcC0+bXN0X21nciwKIAkJCQkJaW50ZWxfZHAtPmlzX21zdCk7
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX2F1eF9i
YWNrbGlnaHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfYXV4X2Jh
Y2tsaWdodC5jCmluZGV4IDRiOTE2NDY4NTQwZi4uMjE2YzYzNTBhZjA3IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX2F1eF9iYWNrbGlnaHQuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX2F1eF9iYWNrbGlnaHQuYwpA
QCAtMzQ4LDcgKzM0OCw3IEBAIGludCBpbnRlbF9kcF9hdXhfaW5pdF9iYWNrbGlnaHRfZnVuY3Mo
c3RydWN0IGludGVsX2Nvbm5lY3RvciAqaW50ZWxfY29ubmVjdG9yKQogCXN0cnVjdCBpbnRlbF9k
cCAqaW50ZWxfZHAgPSBlbmNfdG9faW50ZWxfZHAoaW50ZWxfY29ubmVjdG9yLT5lbmNvZGVyKTsK
IAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGRwX3RvX2k5MTUoaW50ZWxfZHApOwog
Ci0JaWYgKGk5MTVfbW9kcGFyYW1zLmVuYWJsZV9kcGNkX2JhY2tsaWdodCA9PSAwIHx8CisJaWYg
KGk5MTUtPnBhcmFtcy5lbmFibGVfZHBjZF9iYWNrbGlnaHQgPT0gMCB8fAogCSAgICAhaW50ZWxf
ZHBfYXV4X2Rpc3BsYXlfY29udHJvbF9jYXBhYmxlKGludGVsX2Nvbm5lY3RvcikpCiAJCXJldHVy
biAtRU5PREVWOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2ZiYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mYmMuYwppbmRl
eCA1NmJjZDZjNTJhMDIuLmM5NTY3NzVkNmUzNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9mYmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2ZiYy5jCkBAIC03MzMsNyArNzMzLDcgQEAgc3RhdGljIGJvb2wgaW50ZWxfZmJj
X2Nhbl9lbmFibGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQlyZXR1cm4g
ZmFsc2U7CiAJfQogCi0JaWYgKCFpOTE1X21vZHBhcmFtcy5lbmFibGVfZmJjKSB7CisJaWYgKCFk
ZXZfcHJpdi0+cGFyYW1zLmVuYWJsZV9mYmMpIHsKIAkJZmJjLT5ub19mYmNfcmVhc29uID0gImRp
c2FibGVkIHBlciBtb2R1bGUgcGFyYW0gb3IgYnkgZGVmYXVsdCI7CiAJCXJldHVybiBmYWxzZTsK
IAl9CkBAIC0xMDEwLDcgKzEwMTAsNyBAQCBzdGF0aWMgdm9pZCBfX2ludGVsX2ZiY19wb3N0X3Vw
ZGF0ZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YykKIAogCWZiYy0+ZmxpcF9wZW5kaW5nID0gZmFs
c2U7CiAKLQlpZiAoIWk5MTVfbW9kcGFyYW1zLmVuYWJsZV9mYmMpIHsKKwlpZiAoIWRldl9wcml2
LT5wYXJhbXMuZW5hYmxlX2ZiYykgewogCQlpbnRlbF9mYmNfZGVhY3RpdmF0ZShkZXZfcHJpdiwg
ImRpc2FibGVkIGF0IHJ1bnRpbWUgcGVyIG1vZHVsZSBwYXJhbSIpOwogCQlfX2ludGVsX2ZiY19k
aXNhYmxlKGRldl9wcml2KTsKIApAQCAtMTM2Myw4ICsxMzYzLDggQEAgdm9pZCBpbnRlbF9mYmNf
aGFuZGxlX2ZpZm9fdW5kZXJydW5faXJxKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dikKICAqLwogc3RhdGljIGludCBpbnRlbF9zYW5pdGl6ZV9mYmNfb3B0aW9uKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdikKIHsKLQlpZiAoaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2Zi
YyA+PSAwKQotCQlyZXR1cm4gISFpOTE1X21vZHBhcmFtcy5lbmFibGVfZmJjOworCWlmIChkZXZf
cHJpdi0+cGFyYW1zLmVuYWJsZV9mYmMgPj0gMCkKKwkJcmV0dXJuICEhZGV2X3ByaXYtPnBhcmFt
cy5lbmFibGVfZmJjOwogCiAJaWYgKCFIQVNfRkJDKGRldl9wcml2KSkKIAkJcmV0dXJuIDA7CkBA
IC0xNDA4LDkgKzE0MDgsOSBAQCB2b2lkIGludGVsX2ZiY19pbml0KHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdikKIAlpZiAobmVlZF9mYmNfdnRkX3dhKGRldl9wcml2KSkKIAkJbWt3
cml0ZV9kZXZpY2VfaW5mbyhkZXZfcHJpdiktPmRpc3BsYXkuaGFzX2ZiYyA9IGZhbHNlOwogCi0J
aTkxNV9tb2RwYXJhbXMuZW5hYmxlX2ZiYyA9IGludGVsX3Nhbml0aXplX2ZiY19vcHRpb24oZGV2
X3ByaXYpOworCWRldl9wcml2LT5wYXJhbXMuZW5hYmxlX2ZiYyA9IGludGVsX3Nhbml0aXplX2Zi
Y19vcHRpb24oZGV2X3ByaXYpOwogCWRybV9kYmdfa21zKCZkZXZfcHJpdi0+ZHJtLCAiU2FuaXRp
emVkIGVuYWJsZV9mYmMgdmFsdWU6ICVkXG4iLAotCQkgICAgaTkxNV9tb2RwYXJhbXMuZW5hYmxl
X2ZiYyk7CisJCSAgICBkZXZfcHJpdi0+cGFyYW1zLmVuYWJsZV9mYmMpOwogCiAJaWYgKCFIQVNf
RkJDKGRldl9wcml2KSkgewogCQlmYmMtPm5vX2ZiY19yZWFzb24gPSAidW5zdXBwb3J0ZWQgYnkg
dGhpcyBjaGlwc2V0IjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfbHZkcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9sdmRzLmMK
aW5kZXggZmU1OTFmODIxNjNlLi42OGE4NjgxYTQ2Y2YgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfbHZkcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfbHZkcy5jCkBAIC03ODQsOCArNzg0LDggQEAgc3RhdGljIGJvb2wgY29t
cHV0ZV9pc19kdWFsX2xpbmtfbHZkcyhzdHJ1Y3QgaW50ZWxfbHZkc19lbmNvZGVyICpsdmRzX2Vu
Y29kZXIpCiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShkZXYp
OwogCiAJLyogdXNlIHRoZSBtb2R1bGUgb3B0aW9uIHZhbHVlIGlmIHNwZWNpZmllZCAqLwotCWlm
IChpOTE1X21vZHBhcmFtcy5sdmRzX2NoYW5uZWxfbW9kZSA+IDApCi0JCXJldHVybiBpOTE1X21v
ZHBhcmFtcy5sdmRzX2NoYW5uZWxfbW9kZSA9PSAyOworCWlmIChkZXZfcHJpdi0+cGFyYW1zLmx2
ZHNfY2hhbm5lbF9tb2RlID4gMCkKKwkJcmV0dXJuIGRldl9wcml2LT5wYXJhbXMubHZkc19jaGFu
bmVsX21vZGUgPT0gMjsKIAogCS8qIHNpbmdsZSBjaGFubmVsIExWRFMgaXMgbGltaXRlZCB0byAx
MTIgTUh6ICovCiAJaWYgKGx2ZHNfZW5jb2Rlci0+YXR0YWNoZWRfY29ubmVjdG9yLT5wYW5lbC5m
aXhlZF9tb2RlLT5jbG9jayA+IDExMjk5OSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfb3ByZWdpb24uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfb3ByZWdpb24uYwppbmRleCBjYzZiMDA5NTk1ODYuLmRlOTk1MzYyZjQyOCAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9vcHJlZ2lvbi5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfb3ByZWdpb24uYwpAQCAtODAx
LDcgKzgwMSw3IEBAIHN0YXRpYyBpbnQgaW50ZWxfbG9hZF92YnRfZmlybXdhcmUoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogewogCXN0cnVjdCBpbnRlbF9vcHJlZ2lvbiAqb3By
ZWdpb24gPSAmZGV2X3ByaXYtPm9wcmVnaW9uOwogCWNvbnN0IHN0cnVjdCBmaXJtd2FyZSAqZncg
PSBOVUxMOwotCWNvbnN0IGNoYXIgKm5hbWUgPSBpOTE1X21vZHBhcmFtcy52YnRfZmlybXdhcmU7
CisJY29uc3QgY2hhciAqbmFtZSA9IGRldl9wcml2LT5wYXJhbXMudmJ0X2Zpcm13YXJlOwogCWlu
dCByZXQ7CiAKIAlpZiAoIW5hbWUgfHwgISpuYW1lKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wYW5lbC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9wYW5lbC5jCmluZGV4IGY4Y2NmZTY3NDI5ZS4uMGVhYTBhNjcxNGE0IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3BhbmVsLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wYW5lbC5jCkBAIC01MjUsMTAgKzUy
NSwxMCBAQCBzdGF0aWMgdTMyIGludGVsX3BhbmVsX2NvbXB1dGVfYnJpZ2h0bmVzcyhzdHJ1Y3Qg
aW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IsCiAKIAlkcm1fV0FSTl9PTigmZGV2X3ByaXYtPmRy
bSwgcGFuZWwtPmJhY2tsaWdodC5tYXggPT0gMCk7CiAKLQlpZiAoaTkxNV9tb2RwYXJhbXMuaW52
ZXJ0X2JyaWdodG5lc3MgPCAwKQorCWlmIChkZXZfcHJpdi0+cGFyYW1zLmludmVydF9icmlnaHRu
ZXNzIDwgMCkKIAkJcmV0dXJuIHZhbDsKIAotCWlmIChpOTE1X21vZHBhcmFtcy5pbnZlcnRfYnJp
Z2h0bmVzcyA+IDAgfHwKKwlpZiAoZGV2X3ByaXYtPnBhcmFtcy5pbnZlcnRfYnJpZ2h0bmVzcyA+
IDAgfHwKIAkgICAgZGV2X3ByaXYtPnF1aXJrcyAmIFFVSVJLX0lOVkVSVF9CUklHSFRORVNTKSB7
CiAJCXJldHVybiBwYW5lbC0+YmFja2xpZ2h0Lm1heCAtIHZhbCArIHBhbmVsLT5iYWNrbGlnaHQu
bWluOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
cHNyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Bzci5jCmluZGV4IGEw
NTY5ZmRmZWIxNi4uYmM3ZDcxODY3OWFkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX3Bzci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfcHNyLmMKQEAgLTgyLDcgKzgyLDcgQEAgc3RhdGljIGJvb2wgcHNyX2dsb2JhbF9lbmFi
bGVkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewogCXN3aXRjaCAoaTkxNS0+cHNy
LmRlYnVnICYgSTkxNV9QU1JfREVCVUdfTU9ERV9NQVNLKSB7CiAJY2FzZSBJOTE1X1BTUl9ERUJV
R19ERUZBVUxUOgotCQlyZXR1cm4gaTkxNV9tb2RwYXJhbXMuZW5hYmxlX3BzcjsKKwkJcmV0dXJu
IGk5MTUtPnBhcmFtcy5lbmFibGVfcHNyOwogCWNhc2UgSTkxNV9QU1JfREVCVUdfRElTQUJMRToK
IAkJcmV0dXJuIGZhbHNlOwogCWRlZmF1bHQ6CkBAIC0xNDcwLDkgKzE0NzAsOSBAQCB2b2lkIGlu
dGVsX3Bzcl9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkJICovCiAJ
CWRldl9wcml2LT5oc3dfcHNyX21taW9fYWRqdXN0ID0gX1NSRF9DVExfRURQIC0gX0hTV19FRFBf
UFNSX0JBU0U7CiAKLQlpZiAoaTkxNV9tb2RwYXJhbXMuZW5hYmxlX3BzciA9PSAtMSkKKwlpZiAo
ZGV2X3ByaXYtPnBhcmFtcy5lbmFibGVfcHNyID09IC0xKQogCQlpZiAoSU5URUxfR0VOKGRldl9w
cml2KSA8IDkgfHwgIWRldl9wcml2LT52YnQucHNyLmVuYWJsZSkKLQkJCWk5MTVfbW9kcGFyYW1z
LmVuYWJsZV9wc3IgPSAwOworCQkJZGV2X3ByaXYtPnBhcmFtcy5lbmFibGVfcHNyID0gMDsKIAog
CS8qIFNldCBsaW5rX3N0YW5kYnkgeCBsaW5rX29mZiBkZWZhdWx0cyAqLwogCWlmIChJU19IQVNX
RUxMKGRldl9wcml2KSB8fCBJU19CUk9BRFdFTEwoZGV2X3ByaXYpKQpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMKaW5kZXggMTFkOTEzNWNmMjFhLi5iMjk0NjE3
MjNiYTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250
ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwpA
QCAtNjUyLDcgKzY1Miw3IEBAIHN0YXRpYyB2b2lkIGNvbnRleHRfY2xvc2Uoc3RydWN0IGk5MTVf
Z2VtX2NvbnRleHQgKmN0eCkKIAkgKiBjb250ZXh0IGNsb3NlLgogCSAqLwogCWlmICghaTkxNV9n
ZW1fY29udGV4dF9pc19wZXJzaXN0ZW50KGN0eCkgfHwKLQkgICAgIWk5MTVfbW9kcGFyYW1zLmVu
YWJsZV9oYW5nY2hlY2spCisJICAgICFjdHgtPmk5MTUtPnBhcmFtcy5lbmFibGVfaGFuZ2NoZWNr
KQogCQlraWxsX2NvbnRleHQoY3R4KTsKIAogCWk5MTVfZ2VtX2NvbnRleHRfcHV0KGN0eCk7CkBA
IC02NjksNyArNjY5LDcgQEAgc3RhdGljIGludCBfX2NvbnRleHRfc2V0X3BlcnNpc3RlbmNlKHN0
cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgsIGJvb2wgc3RhdGUpCiAJCSAqIHJlc2V0XSBhcmUg
YWxsb3dlZCB0byBzdXJ2aXZlIHBhc3QgdGVybWluYXRpb24uIFdlIHJlcXVpcmUKIAkJICogaGFu
Z2NoZWNrIHRvIGVuc3VyZSB0aGF0IHRoZSBwZXJzaXN0ZW50IHJlcXVlc3RzIGFyZSBoZWFsdGh5
LgogCQkgKi8KLQkJaWYgKCFpOTE1X21vZHBhcmFtcy5lbmFibGVfaGFuZ2NoZWNrKQorCQlpZiAo
IWN0eC0+aTkxNS0+cGFyYW1zLmVuYWJsZV9oYW5nY2hlY2spCiAJCQlyZXR1cm4gLUVJTlZBTDsK
IAogCQlpOTE1X2dlbV9jb250ZXh0X3NldF9wZXJzaXN0ZW5jZShjdHgpOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5jCmluZGV4IDUxMzZjOGJm
MTEyZC4uMWVkNGM5NWIyZWE2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9lbmdpbmVfaGVhcnRiZWF0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lX2hlYXJ0YmVhdC5jCkBAIC00LDYgKzQsNyBAQAogICogQ29weXJpZ2h0IMKpIDIw
MTkgSW50ZWwgQ29ycG9yYXRpb24KICAqLwogCisjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNs
dWRlICJpOTE1X3JlcXVlc3QuaCIKIAogI2luY2x1ZGUgImludGVsX2NvbnRleHQuaCIKQEAgLTEx
Nyw3ICsxMTgsNyBAQCBzdGF0aWMgdm9pZCBoZWFydGJlYXQoc3RydWN0IHdvcmtfc3RydWN0ICp3
cmspCiAJCWdvdG8gdW5sb2NrOwogCiAJaWRsZV9wdWxzZShlbmdpbmUsIHJxKTsKLQlpZiAoaTkx
NV9tb2RwYXJhbXMuZW5hYmxlX2hhbmdjaGVjaykKKwlpZiAoZW5naW5lLT5pOTE1LT5wYXJhbXMu
ZW5hYmxlX2hhbmdjaGVjaykKIAkJZW5naW5lLT5oZWFydGJlYXQuc3lzdG9sZSA9IGk5MTVfcmVx
dWVzdF9nZXQocnEpOwogCiAJX19pOTE1X3JlcXVlc3RfY29tbWl0KHJxKTsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9yZXNldC5jCmluZGV4IDAwM2YyNmI0Mjk5OC4uMDNiNDk5YjJiMzE2IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNldC5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKQEAgLTYzOCw3ICs2MzgsNyBAQCBp
bnQgX19pbnRlbF9ndF9yZXNldChzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCBpbnRlbF9lbmdpbmVfbWFz
a190IGVuZ2luZV9tYXNrKQogCiBib29sIGludGVsX2hhc19ncHVfcmVzZXQoY29uc3Qgc3RydWN0
IGludGVsX2d0ICpndCkKIHsKLQlpZiAoIWk5MTVfbW9kcGFyYW1zLnJlc2V0KQorCWlmICghZ3Qt
Pmk5MTUtPnBhcmFtcy5yZXNldCkKIAkJcmV0dXJuIE5VTEw7CiAKIAlyZXR1cm4gaW50ZWxfZ2V0
X2dwdV9yZXNldChndCk7CkBAIC02NDYsNyArNjQ2LDcgQEAgYm9vbCBpbnRlbF9oYXNfZ3B1X3Jl
c2V0KGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiAKIGJvb2wgaW50ZWxfaGFzX3Jlc2V0X2Vu
Z2luZShjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQogewotCWlmIChpOTE1X21vZHBhcmFtcy5y
ZXNldCA8IDIpCisJaWYgKGd0LT5pOTE1LT5wYXJhbXMucmVzZXQgPCAyKQogCQlyZXR1cm4gZmFs
c2U7CiAKIAlyZXR1cm4gSU5URUxfSU5GTyhndC0+aTkxNSktPmhhc19yZXNldF9lbmdpbmU7CkBA
IC0xMDM4LDcgKzEwMzgsNyBAQCB2b2lkIGludGVsX2d0X3Jlc2V0KHN0cnVjdCBpbnRlbF9ndCAq
Z3QsCiAJYXdha2UgPSByZXNldF9wcmVwYXJlKGd0KTsKIAogCWlmICghaW50ZWxfaGFzX2dwdV9y
ZXNldChndCkpIHsKLQkJaWYgKGk5MTVfbW9kcGFyYW1zLnJlc2V0KQorCQlpZiAoZ3QtPmk5MTUt
PnBhcmFtcy5yZXNldCkKIAkJCWRldl9lcnIoZ3QtPmk5MTUtPmRybS5kZXYsICJHUFUgcmVzZXQg
bm90IHN1cHBvcnRlZFxuIik7CiAJCWVsc2UKIAkJCWRybV9kYmcoJmd0LT5pOTE1LT5kcm0sICJH
UFUgcmVzZXQgZGlzYWJsZWRcbiIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3Qvc2VsZnRlc3RfZW5naW5lX2hlYXJ0YmVhdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
c2VsZnRlc3RfZW5naW5lX2hlYXJ0YmVhdC5jCmluZGV4IDY5NzExNGRkMWY0Ny4uOWYwNGM1NGM0
ZDBmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9lbmdpbmVf
aGVhcnRiZWF0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5l
X2hlYXJ0YmVhdC5jCkBAIC0zODYsMTEgKzM4NiwxMSBAQCBpbnQgaW50ZWxfaGVhcnRiZWF0X2xp
dmVfc2VsZnRlc3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCWlmIChpbnRlbF9n
dF9pc193ZWRnZWQoJmk5MTUtPmd0KSkKIAkJcmV0dXJuIDA7CiAKLQlzYXZlZF9oYW5nY2hlY2sg
PSBpOTE1X21vZHBhcmFtcy5lbmFibGVfaGFuZ2NoZWNrOwotCWk5MTVfbW9kcGFyYW1zLmVuYWJs
ZV9oYW5nY2hlY2sgPSBJTlRfTUFYOworCXNhdmVkX2hhbmdjaGVjayA9IGk5MTUtPnBhcmFtcy5l
bmFibGVfaGFuZ2NoZWNrOworCWk5MTUtPnBhcmFtcy5lbmFibGVfaGFuZ2NoZWNrID0gSU5UX01B
WDsKIAogCWVyciA9IGludGVsX2d0X2xpdmVfc3VidGVzdHModGVzdHMsICZpOTE1LT5ndCk7CiAK
LQlpOTE1X21vZHBhcmFtcy5lbmFibGVfaGFuZ2NoZWNrID0gc2F2ZWRfaGFuZ2NoZWNrOworCWk5
MTUtPnBhcmFtcy5lbmFibGVfaGFuZ2NoZWNrID0gc2F2ZWRfaGFuZ2NoZWNrOwogCXJldHVybiBl
cnI7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNf
bG9nLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfbG9nLmMKaW5kZXgg
ZmIxMGYzNTk3ZWE1Li45YmJlOGE3OTVjYjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3VjL2ludGVsX2d1Y19sb2cuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91
Yy9pbnRlbF9ndWNfbG9nLmMKQEAgLTQyNCwyNSArNDI0LDI4IEBAIHN0YXRpYyB2b2lkIGd1Y19s
b2dfY2FwdHVyZV9sb2dzKHN0cnVjdCBpbnRlbF9ndWNfbG9nICpsb2cpCiAKIHN0YXRpYyB1MzIg
X19nZXRfZGVmYXVsdF9sb2dfbGV2ZWwoc3RydWN0IGludGVsX2d1Y19sb2cgKmxvZykKIHsKKwlz
dHJ1Y3QgaW50ZWxfZ3VjICpndWMgPSBsb2dfdG9fZ3VjKGxvZyk7CisJc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUgPSBndWNfdG9fZ3QoZ3VjKS0+aTkxNTsKKwogCS8qIEEgbmVnYXRpdmUg
dmFsdWUgbWVhbnMgInVzZSBwbGF0Zm9ybS9jb25maWcgZGVmYXVsdCIgKi8KLQlpZiAoaTkxNV9t
b2RwYXJhbXMuZ3VjX2xvZ19sZXZlbCA8IDApIHsKKwlpZiAoaTkxNS0+cGFyYW1zLmd1Y19sb2df
bGV2ZWwgPCAwKSB7CiAJCXJldHVybiAoSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfREVCVUcp
IHx8CiAJCQlJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9ERUJVR19HRU0pKSA/CiAJCQlHVUNf
TE9HX0xFVkVMX01BWCA6IEdVQ19MT0dfTEVWRUxfTk9OX1ZFUkJPU0U7CiAJfQogCi0JaWYgKGk5
MTVfbW9kcGFyYW1zLmd1Y19sb2dfbGV2ZWwgPiBHVUNfTE9HX0xFVkVMX01BWCkgeworCWlmIChp
OTE1LT5wYXJhbXMuZ3VjX2xvZ19sZXZlbCA+IEdVQ19MT0dfTEVWRUxfTUFYKSB7CiAJCURSTV9X
QVJOKCJJbmNvbXBhdGlibGUgb3B0aW9uIGRldGVjdGVkOiAlcz0lZCwgJXMhXG4iLAotCQkJICJn
dWNfbG9nX2xldmVsIiwgaTkxNV9tb2RwYXJhbXMuZ3VjX2xvZ19sZXZlbCwKKwkJCSAiZ3VjX2xv
Z19sZXZlbCIsIGk5MTUtPnBhcmFtcy5ndWNfbG9nX2xldmVsLAogCQkJICJ2ZXJib3NpdHkgdG9v
IGhpZ2giKTsKIAkJcmV0dXJuIChJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9ERUJVRykgfHwK
IAkJCUlTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1X0RFQlVHX0dFTSkpID8KIAkJCUdVQ19MT0df
TEVWRUxfTUFYIDogR1VDX0xPR19MRVZFTF9ESVNBQkxFRDsKIAl9CiAKLQlHRU1fQlVHX09OKGk5
MTVfbW9kcGFyYW1zLmd1Y19sb2dfbGV2ZWwgPCBHVUNfTE9HX0xFVkVMX0RJU0FCTEVEKTsKLQlH
RU1fQlVHX09OKGk5MTVfbW9kcGFyYW1zLmd1Y19sb2dfbGV2ZWwgPiBHVUNfTE9HX0xFVkVMX01B
WCk7Ci0JcmV0dXJuIGk5MTVfbW9kcGFyYW1zLmd1Y19sb2dfbGV2ZWw7CisJR0VNX0JVR19PTihp
OTE1LT5wYXJhbXMuZ3VjX2xvZ19sZXZlbCA8IEdVQ19MT0dfTEVWRUxfRElTQUJMRUQpOworCUdF
TV9CVUdfT04oaTkxNS0+cGFyYW1zLmd1Y19sb2dfbGV2ZWwgPiBHVUNfTE9HX0xFVkVMX01BWCk7
CisJcmV0dXJuIGk5MTUtPnBhcmFtcy5ndWNfbG9nX2xldmVsOwogfQogCiBpbnQgaW50ZWxfZ3Vj
X2xvZ19jcmVhdGUoc3RydWN0IGludGVsX2d1Y19sb2cgKmxvZykKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19zdWJtaXNzaW9uLmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfc3VibWlzc2lvbi5jCmluZGV4IGZlNzc3OGMyOGQy
ZC4uODY0ZDcyZTkwNDgwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9p
bnRlbF9ndWNfc3VibWlzc2lvbi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2lu
dGVsX2d1Y19zdWJtaXNzaW9uLmMKQEAgLTY2MCwxMCArNjYwLDEyIEBAIHZvaWQgaW50ZWxfZ3Vj
X3N1Ym1pc3Npb25fZGlzYWJsZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAKIHN0YXRpYyBib29s
IF9fZ3VjX3N1Ym1pc3Npb25fc2VsZWN0ZWQoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogeworCXN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gZ3VjX3RvX2d0KGd1YyktPmk5MTU7CisKIAlp
ZiAoIWludGVsX2d1Y19zdWJtaXNzaW9uX2lzX3N1cHBvcnRlZChndWMpKQogCQlyZXR1cm4gZmFs
c2U7CiAKLQlyZXR1cm4gaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2d1YyAmIEVOQUJMRV9HVUNfU1VC
TUlTU0lPTjsKKwlyZXR1cm4gaTkxNS0+cGFyYW1zLmVuYWJsZV9ndWMgJiBFTkFCTEVfR1VDX1NV
Qk1JU1NJT047CiB9CiAKIHZvaWQgaW50ZWxfZ3VjX3N1Ym1pc3Npb25faW5pdF9lYXJseShzdHJ1
Y3QgaW50ZWxfZ3VjICpndWMpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91
Yy9pbnRlbF91Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWMuYwppbmRl
eCBiMTFlNTY0ZWYyMmUuLjg0YTI5ZTk0ZmJhNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvdWMvaW50ZWxfdWMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9p
bnRlbF91Yy5jCkBAIC00NywxNSArNDcsMTUgQEAgc3RhdGljIHZvaWQgX19jb25maXJtX29wdGlv
bnMoc3RydWN0IGludGVsX3VjICp1YykKIAogCURSTV9ERVZfREVCVUdfRFJJVkVSKGk5MTUtPmRy
bS5kZXYsCiAJCQkgICAgICJlbmFibGVfZ3VjPSVkIChndWM6JXMgc3VibWlzc2lvbjolcyBodWM6
JXMpXG4iLAotCQkJICAgICBpOTE1X21vZHBhcmFtcy5lbmFibGVfZ3VjLAorCQkJICAgICBpOTE1
LT5wYXJhbXMuZW5hYmxlX2d1YywKIAkJCSAgICAgeWVzbm8oaW50ZWxfdWNfd2FudHNfZ3VjKHVj
KSksCiAJCQkgICAgIHllc25vKGludGVsX3VjX3dhbnRzX2d1Y19zdWJtaXNzaW9uKHVjKSksCiAJ
CQkgICAgIHllc25vKGludGVsX3VjX3dhbnRzX2h1Yyh1YykpKTsKIAotCWlmIChpOTE1X21vZHBh
cmFtcy5lbmFibGVfZ3VjID09IC0xKQorCWlmIChpOTE1LT5wYXJhbXMuZW5hYmxlX2d1YyA9PSAt
MSkKIAkJcmV0dXJuOwogCi0JaWYgKGk5MTVfbW9kcGFyYW1zLmVuYWJsZV9ndWMgPT0gMCkgewor
CWlmIChpOTE1LT5wYXJhbXMuZW5hYmxlX2d1YyA9PSAwKSB7CiAJCUdFTV9CVUdfT04oaW50ZWxf
dWNfd2FudHNfZ3VjKHVjKSk7CiAJCUdFTV9CVUdfT04oaW50ZWxfdWNfd2FudHNfZ3VjX3N1Ym1p
c3Npb24odWMpKTsKIAkJR0VNX0JVR19PTihpbnRlbF91Y193YW50c19odWModWMpKTsKQEAgLTY1
LDI1ICs2NSwyNSBAQCBzdGF0aWMgdm9pZCBfX2NvbmZpcm1fb3B0aW9ucyhzdHJ1Y3QgaW50ZWxf
dWMgKnVjKQogCWlmICghaW50ZWxfdWNfc3VwcG9ydHNfZ3VjKHVjKSkKIAkJZGV2X2luZm8oaTkx
NS0+ZHJtLmRldiwKIAkJCSAiSW5jb21wYXRpYmxlIG9wdGlvbiBlbmFibGVfZ3VjPSVkIC0gJXNc
biIsCi0JCQkgaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2d1YywgIkd1QyBpcyBub3Qgc3VwcG9ydGVk
ISIpOworCQkJIGk5MTUtPnBhcmFtcy5lbmFibGVfZ3VjLCAiR3VDIGlzIG5vdCBzdXBwb3J0ZWQh
Iik7CiAKLQlpZiAoaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2d1YyAmIEVOQUJMRV9HVUNfTE9BRF9I
VUMgJiYKKwlpZiAoaTkxNS0+cGFyYW1zLmVuYWJsZV9ndWMgJiBFTkFCTEVfR1VDX0xPQURfSFVD
ICYmCiAJICAgICFpbnRlbF91Y19zdXBwb3J0c19odWModWMpKQogCQlkZXZfaW5mbyhpOTE1LT5k
cm0uZGV2LAogCQkJICJJbmNvbXBhdGlibGUgb3B0aW9uIGVuYWJsZV9ndWM9JWQgLSAlc1xuIiwK
LQkJCSBpOTE1X21vZHBhcmFtcy5lbmFibGVfZ3VjLCAiSHVDIGlzIG5vdCBzdXBwb3J0ZWQhIik7
CisJCQkgaTkxNS0+cGFyYW1zLmVuYWJsZV9ndWMsICJIdUMgaXMgbm90IHN1cHBvcnRlZCEiKTsK
IAotCWlmIChpOTE1X21vZHBhcmFtcy5lbmFibGVfZ3VjICYgRU5BQkxFX0dVQ19TVUJNSVNTSU9O
ICYmCisJaWYgKGk5MTUtPnBhcmFtcy5lbmFibGVfZ3VjICYgRU5BQkxFX0dVQ19TVUJNSVNTSU9O
ICYmCiAJICAgICFpbnRlbF91Y19zdXBwb3J0c19ndWNfc3VibWlzc2lvbih1YykpCiAJCWRldl9p
bmZvKGk5MTUtPmRybS5kZXYsCiAJCQkgIkluY29tcGF0aWJsZSBvcHRpb24gZW5hYmxlX2d1Yz0l
ZCAtICVzXG4iLAotCQkJIGk5MTVfbW9kcGFyYW1zLmVuYWJsZV9ndWMsICJHdUMgc3VibWlzc2lv
biBpcyBOL0EiKTsKKwkJCSBpOTE1LT5wYXJhbXMuZW5hYmxlX2d1YywgIkd1QyBzdWJtaXNzaW9u
IGlzIE4vQSIpOwogCi0JaWYgKGk5MTVfbW9kcGFyYW1zLmVuYWJsZV9ndWMgJiB+KEVOQUJMRV9H
VUNfU1VCTUlTU0lPTiB8CisJaWYgKGk5MTUtPnBhcmFtcy5lbmFibGVfZ3VjICYgfihFTkFCTEVf
R1VDX1NVQk1JU1NJT04gfAogCQkJCQkgIEVOQUJMRV9HVUNfTE9BRF9IVUMpKQogCQlkZXZfaW5m
byhpOTE1LT5kcm0uZGV2LAogCQkJICJJbmNvbXBhdGlibGUgb3B0aW9uIGVuYWJsZV9ndWM9JWQg
LSAlc1xuIiwKLQkJCSBpOTE1X21vZHBhcmFtcy5lbmFibGVfZ3VjLCAidW5kb2N1bWVudGVkIGZs
YWciKTsKKwkJCSBpOTE1LT5wYXJhbXMuZW5hYmxlX2d1YywgInVuZG9jdW1lbnRlZCBmbGFnIik7
CiB9CiAKIHZvaWQgaW50ZWxfdWNfaW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfdWMgKnVjKQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWNfZncuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjX2Z3LmMKaW5kZXggMWY1ZDI1ZjE1MzQwLi5h
ZDhkNjZlZWM3ZTEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVs
X3VjX2Z3LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWNfZncuYwpA
QCAtMTE0LDYgKzExNCw3IEBAIHN0cnVjdCBfX3BhY2tlZCB1Y19md19wbGF0Zm9ybV9yZXF1aXJl
bWVudCB7CiBzdGF0aWMgdm9pZAogX191Y19md19hdXRvX3NlbGVjdChzdHJ1Y3QgaW50ZWxfdWNf
ZncgKnVjX2Z3LCBlbnVtIGludGVsX3BsYXRmb3JtIHAsIHU4IHJldikKIHsKKwlzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSA9IF9fdWNfZndfdG9fZ3QodWNfZncpLT5pOTE1OwogCXN0YXRp
YyBjb25zdCBzdHJ1Y3QgdWNfZndfcGxhdGZvcm1fcmVxdWlyZW1lbnQgZndfYmxvYnNbXSA9IHsK
IAkJSU5URUxfVUNfRklSTVdBUkVfREVGUyhNQUtFX0ZXX0xJU1QsIEdVQ19GV19CTE9CLCBIVUNf
RldfQkxPQikKIAl9OwpAQCAtMTUxLDM1ICsxNTIsMzYgQEAgX191Y19md19hdXRvX3NlbGVjdChz
dHJ1Y3QgaW50ZWxfdWNfZncgKnVjX2Z3LCBlbnVtIGludGVsX3BsYXRmb3JtIHAsIHU4IHJldikK
IAl9CiAKIAkvKiBXZSBkb24ndCB3YW50IHRvIGVuYWJsZSBHdUMvSHVDIG9uIHByZS1HZW4xMSBi
eSBkZWZhdWx0ICovCi0JaWYgKGk5MTVfbW9kcGFyYW1zLmVuYWJsZV9ndWMgPT0gLTEgJiYgcCA8
IElOVEVMX0lDRUxBS0UpCisJaWYgKGk5MTUtPnBhcmFtcy5lbmFibGVfZ3VjID09IC0xICYmIHAg
PCBJTlRFTF9JQ0VMQUtFKQogCQl1Y19mdy0+cGF0aCA9IE5VTEw7CiB9CiAKLXN0YXRpYyBjb25z
dCBjaGFyICpfX292ZXJyaWRlX2d1Y19maXJtd2FyZV9wYXRoKHZvaWQpCitzdGF0aWMgY29uc3Qg
Y2hhciAqX19vdmVycmlkZV9ndWNfZmlybXdhcmVfcGF0aChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSkKIHsKLQlpZiAoaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2d1YyAmIChFTkFCTEVfR1VD
X1NVQk1JU1NJT04gfAotCQkJCQkgRU5BQkxFX0dVQ19MT0FEX0hVQykpCi0JCXJldHVybiBpOTE1
X21vZHBhcmFtcy5ndWNfZmlybXdhcmVfcGF0aDsKKwlpZiAoaTkxNS0+cGFyYW1zLmVuYWJsZV9n
dWMgJiAoRU5BQkxFX0dVQ19TVUJNSVNTSU9OIHwKKwkJCQkgICAgICAgRU5BQkxFX0dVQ19MT0FE
X0hVQykpCisJCXJldHVybiBpOTE1LT5wYXJhbXMuZ3VjX2Zpcm13YXJlX3BhdGg7CiAJcmV0dXJu
ICIiOwogfQogCi1zdGF0aWMgY29uc3QgY2hhciAqX19vdmVycmlkZV9odWNfZmlybXdhcmVfcGF0
aCh2b2lkKQorc3RhdGljIGNvbnN0IGNoYXIgKl9fb3ZlcnJpZGVfaHVjX2Zpcm13YXJlX3BhdGgo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB7Ci0JaWYgKGk5MTVfbW9kcGFyYW1zLmVu
YWJsZV9ndWMgJiBFTkFCTEVfR1VDX0xPQURfSFVDKQotCQlyZXR1cm4gaTkxNV9tb2RwYXJhbXMu
aHVjX2Zpcm13YXJlX3BhdGg7CisJaWYgKGk5MTUtPnBhcmFtcy5lbmFibGVfZ3VjICYgRU5BQkxF
X0dVQ19MT0FEX0hVQykKKwkJcmV0dXJuIGk5MTUtPnBhcmFtcy5odWNfZmlybXdhcmVfcGF0aDsK
IAlyZXR1cm4gIiI7CiB9CiAKIHN0YXRpYyB2b2lkIF9fdWNfZndfdXNlcl9vdmVycmlkZShzdHJ1
Y3QgaW50ZWxfdWNfZncgKnVjX2Z3KQogeworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
ID0gX191Y19md190b19ndCh1Y19mdyktPmk5MTU7CiAJY29uc3QgY2hhciAqcGF0aCA9IE5VTEw7
CiAKIAlzd2l0Y2ggKHVjX2Z3LT50eXBlKSB7CiAJY2FzZSBJTlRFTF9VQ19GV19UWVBFX0dVQzoK
LQkJcGF0aCA9IF9fb3ZlcnJpZGVfZ3VjX2Zpcm13YXJlX3BhdGgoKTsKKwkJcGF0aCA9IF9fb3Zl
cnJpZGVfZ3VjX2Zpcm13YXJlX3BhdGgoaTkxNSk7CiAJCWJyZWFrOwogCWNhc2UgSU5URUxfVUNf
RldfVFlQRV9IVUM6Ci0JCXBhdGggPSBfX292ZXJyaWRlX2h1Y19maXJtd2FyZV9wYXRoKCk7CisJ
CXBhdGggPSBfX292ZXJyaWRlX2h1Y19maXJtd2FyZV9wYXRoKGk5MTUpOwogCQlicmVhazsKIAl9
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKaW5kZXggYjIyYjRlOWMzMTM4Li5iODQ5
MDFhMGRkNWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCkBAIC02Miw3ICs2Miw3
IEBAIHN0YXRpYyBpbnQgaTkxNV9jYXBhYmlsaXRpZXMoc3RydWN0IHNlcV9maWxlICptLCB2b2lk
ICpkYXRhKQogCWludGVsX2RyaXZlcl9jYXBzX3ByaW50KCZpOTE1LT5jYXBzLCAmcCk7CiAKIAlr
ZXJuZWxfcGFyYW1fbG9jayhUSElTX01PRFVMRSk7Ci0JaTkxNV9wYXJhbXNfZHVtcCgmaTkxNV9t
b2RwYXJhbXMsICZwKTsKKwlpOTE1X3BhcmFtc19kdW1wKCZpOTE1LT5wYXJhbXMsICZwKTsKIAlr
ZXJuZWxfcGFyYW1fdW5sb2NrKFRISVNfTU9EVUxFKTsKIAogCXJldHVybiAwOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzX3BhcmFtcy5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzX3BhcmFtcy5jCmluZGV4IDYyYjJjNWYwNDk1ZC4uN2M1
OGRhNzQzYjljIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnNf
cGFyYW1zLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzX3BhcmFtcy5j
CkBAIC0yMjksNyArMjI5LDcgQEAgX2k5MTVfcGFyYW1fY3JlYXRlX2ZpbGUoc3RydWN0IGRlbnRy
eSAqcGFyZW50LCBjb25zdCBjaGFyICpuYW1lLAogc3RydWN0IGRlbnRyeSAqaTkxNV9kZWJ1Z2Zz
X3BhcmFtcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsKIAlzdHJ1Y3QgZHJtX21p
bm9yICptaW5vciA9IGk5MTUtPmRybS5wcmltYXJ5OwotCXN0cnVjdCBpOTE1X3BhcmFtcyAqcGFy
YW1zID0gJmk5MTVfbW9kcGFyYW1zOworCXN0cnVjdCBpOTE1X3BhcmFtcyAqcGFyYW1zID0gJmk5
MTUtPnBhcmFtczsKIAlzdHJ1Y3QgZGVudHJ5ICpkaXI7CiAKIAlkaXIgPSBkZWJ1Z2ZzX2NyZWF0
ZV9kaXIoImk5MTVfcGFyYW1zIiwgbWlub3ItPmRlYnVnZnNfcm9vdCk7CmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuYwppbmRleCBhN2EzYjRiOTg1NzIuLjk0YTQxMzdkZTE4NSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2Rydi5jCkBAIC00OTksNiArNDk5LDggQEAgc3RhdGljIHZvaWQgaTkxNV9kcml2ZXJfbGF0
ZV9yZWxlYXNlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAogCXBtX3Fvc19y
ZW1vdmVfcmVxdWVzdCgmZGV2X3ByaXYtPnNiX3Fvcyk7CiAJbXV0ZXhfZGVzdHJveSgmZGV2X3By
aXYtPnNiX2xvY2spOworCisJaTkxNV9wYXJhbXNfZnJlZSgmZGV2X3ByaXYtPnBhcmFtcyk7CiB9
CiAKIC8qKgpAQCAtODk2LDYgKzg5OCw5IEBAIGk5MTVfZHJpdmVyX2NyZWF0ZShzdHJ1Y3QgcGNp
X2RldiAqcGRldiwgY29uc3Qgc3RydWN0IHBjaV9kZXZpY2VfaWQgKmVudCkKIAlpOTE1LT5kcm0u
cGRldiA9IHBkZXY7CiAJcGNpX3NldF9kcnZkYXRhKHBkZXYsIGk5MTUpOwogCisJLyogRGV2aWNl
IHBhcmFtZXRlcnMgc3RhcnQgYXMgYSBjb3B5IG9mIG1vZHVsZSBwYXJhbWV0ZXJzLiAqLworCWk5
MTVfcGFyYW1zX2NvcHkoJmk5MTUtPnBhcmFtcywgJmk5MTVfbW9kcGFyYW1zKTsKKwogCS8qIFNl
dHVwIHRoZSB3cml0ZS1vbmNlICJjb25zdGFudCIgZGV2aWNlIGluZm8gKi8KIAlkZXZpY2VfaW5m
byA9IG1rd3JpdGVfZGV2aWNlX2luZm8oaTkxNSk7CiAJbWVtY3B5KGRldmljZV9pbmZvLCBtYXRj
aF9pbmZvLCBzaXplb2YoKmRldmljZV9pbmZvKSk7CkBAIC05MjksNyArOTM0LDcgQEAgaW50IGk5
MTVfZHJpdmVyX3Byb2JlKHN0cnVjdCBwY2lfZGV2ICpwZGV2LCBjb25zdCBzdHJ1Y3QgcGNpX2Rl
dmljZV9pZCAqZW50KQogCQlyZXR1cm4gUFRSX0VSUihpOTE1KTsKIAogCS8qIERpc2FibGUgbnVj
bGVhciBwYWdlZmxpcCBieSBkZWZhdWx0IG9uIHByZS1JTEsgKi8KLQlpZiAoIWk5MTVfbW9kcGFy
YW1zLm51Y2xlYXJfcGFnZWZsaXAgJiYgbWF0Y2hfaW5mby0+Z2VuIDwgNSkKKwlpZiAoIWk5MTUt
PnBhcmFtcy5udWNsZWFyX3BhZ2VmbGlwICYmIG1hdGNoX2luZm8tPmdlbiA8IDUpCiAJCWk5MTUt
PmRybS5kcml2ZXJfZmVhdHVyZXMgJj0gfkRSSVZFUl9BVE9NSUM7CiAKIAkvKgpAQCAtOTM5LDcg
Kzk0NCw3IEBAIGludCBpOTE1X2RyaXZlcl9wcm9iZShzdHJ1Y3QgcGNpX2RldiAqcGRldiwgY29u
c3Qgc3RydWN0IHBjaV9kZXZpY2VfaWQgKmVudCkKICNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1f
STkxNV9TRUxGVEVTVCkKIAlpZiAoSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfVU5TVEFCTEVf
RkFLRV9MTUVNKSkgewogCQlpZiAoSU5URUxfR0VOKGk5MTUpID49IDkgJiYgaTkxNV9zZWxmdGVz
dC5saXZlIDwgMCAmJgotCQkgICAgaTkxNV9tb2RwYXJhbXMuZmFrZV9sbWVtX3N0YXJ0KSB7CisJ
CSAgICBpOTE1LT5wYXJhbXMuZmFrZV9sbWVtX3N0YXJ0KSB7CiAJCQlta3dyaXRlX2RldmljZV9p
bmZvKGk5MTUpLT5tZW1vcnlfcmVnaW9ucyA9CiAJCQkJUkVHSU9OX1NNRU0gfCBSRUdJT05fTE1F
TSB8IFJFR0lPTl9TVE9MRU47CiAJCQlta3dyaXRlX2RldmljZV9pbmZvKGk5MTUpLT5pc19kZ2Z4
ID0gdHJ1ZTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IGU5ZWU0ZGFhOTMyMC4uOWVkNWY3
ODI0NTlmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTgyNSw2ICs4MjUsOSBAQCBzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSB7CiAJLyogRklYTUU6IERldmljZSByZWxlYXNlIGFjdGlvbnMg
c2hvdWxkIGFsbCBiZSBtb3ZlZCB0byBkcm1tXyAqLwogCWJvb2wgZG9fcmVsZWFzZTsKIAorCS8q
IGk5MTUgZGV2aWNlIHBhcmFtZXRlcnMgKi8KKwlzdHJ1Y3QgaTkxNV9wYXJhbXMgcGFyYW1zOwor
CiAJY29uc3Qgc3RydWN0IGludGVsX2RldmljZV9pbmZvIF9faW5mbzsgLyogVXNlIElOVEVMX0lO
Rk8oKSB0byBhY2Nlc3MuICovCiAJc3RydWN0IGludGVsX3J1bnRpbWVfaW5mbyBfX3J1bnRpbWU7
IC8qIFVzZSBSVU5USU1FX0lORk8oKSB0byBhY2Nlc3MuICovCiAJc3RydWN0IGludGVsX2RyaXZl
cl9jYXBzIGNhcHM7CkBAIC0xNjQ3LDcgKzE2NTAsNyBAQCBJU19TVUJQTEFURk9STShjb25zdCBz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKICNkZWZpbmUgSEFTX0RJU1BMQVkoZGV2X3By
aXYpIChJTlRFTF9JTkZPKGRldl9wcml2KS0+cGlwZV9tYXNrICE9IDApCiAKIC8qIE9ubHkgdmFs
aWQgd2hlbiBIQVNfRElTUExBWSgpIGlzIHRydWUgKi8KLSNkZWZpbmUgSU5URUxfRElTUExBWV9F
TkFCTEVEKGRldl9wcml2KSAoV0FSTl9PTighSEFTX0RJU1BMQVkoZGV2X3ByaXYpKSwgIWk5MTVf
bW9kcGFyYW1zLmRpc2FibGVfZGlzcGxheSkKKyNkZWZpbmUgSU5URUxfRElTUExBWV9FTkFCTEVE
KGRldl9wcml2KSAoV0FSTl9PTighSEFTX0RJU1BMQVkoZGV2X3ByaXYpKSwgIWRldl9wcml2LT5w
YXJhbXMuZGlzYWJsZV9kaXNwbGF5KQogCiBzdGF0aWMgaW5saW5lIGJvb2wgaW50ZWxfdnRkX2Fj
dGl2ZSh2b2lkKQogewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRw
YXJhbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jCmluZGV4IDU0ZmNl
ODFkNTcyNC4uYzRhMWZhYzllYjkzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2dldHBhcmFtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5j
CkBAIC04MCw3ICs4MCw3IEBAIGludCBpOTE1X2dldHBhcmFtX2lvY3RsKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJCQlyZXR1cm4gLUVOT0RFVjsKIAkJYnJlYWs7CiAJY2Fz
ZSBJOTE1X1BBUkFNX0hBU19HUFVfUkVTRVQ6Ci0JCXZhbHVlID0gaTkxNV9tb2RwYXJhbXMuZW5h
YmxlX2hhbmdjaGVjayAmJgorCQl2YWx1ZSA9IGk5MTUtPnBhcmFtcy5lbmFibGVfaGFuZ2NoZWNr
ICYmCiAJCQlpbnRlbF9oYXNfZ3B1X3Jlc2V0KCZpOTE1LT5ndCk7CiAJCWlmICh2YWx1ZSAmJiBp
bnRlbF9oYXNfcmVzZXRfZW5naW5lKCZpOTE1LT5ndCkpCiAJCQl2YWx1ZSA9IDI7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYwppbmRleCAyYTRjZDBiYTU0NjQuLmMwODUzZmQ0OTM1
NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jCkBAIC0xNzIzLDcgKzE3MjMs
NyBAQCBzdGF0aWMgdm9pZCBjYXB0dXJlX2dlbihzdHJ1Y3QgaTkxNV9ncHVfY29yZWR1bXAgKmVy
cm9yKQogCWVycm9yLT5yZXNldF9jb3VudCA9IGk5MTVfcmVzZXRfY291bnQoJmk5MTUtPmdwdV9l
cnJvcik7CiAJZXJyb3ItPnN1c3BlbmRfY291bnQgPSBpOTE1LT5zdXNwZW5kX2NvdW50OwogCi0J
aTkxNV9wYXJhbXNfY29weSgmZXJyb3ItPnBhcmFtcywgJmk5MTVfbW9kcGFyYW1zKTsKKwlpOTE1
X3BhcmFtc19jb3B5KCZlcnJvci0+cGFyYW1zLCAmaTkxNS0+cGFyYW1zKTsKIAltZW1jcHkoJmVy
cm9yLT5kZXZpY2VfaW5mbywKIAkgICAgICAgSU5URUxfSU5GTyhpOTE1KSwKIAkgICAgICAgc2l6
ZW9mKGVycm9yLT5kZXZpY2VfaW5mbykpOwpAQCAtMTczOCw3ICsxNzM4LDcgQEAgaTkxNV9ncHVf
Y29yZWR1bXBfYWxsb2Moc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIGdmcF90IGdmcCkK
IHsKIAlzdHJ1Y3QgaTkxNV9ncHVfY29yZWR1bXAgKmVycm9yOwogCi0JaWYgKCFpOTE1X21vZHBh
cmFtcy5lcnJvcl9jYXB0dXJlKQorCWlmICghaTkxNS0+cGFyYW1zLmVycm9yX2NhcHR1cmUpCiAJ
CXJldHVybiBOVUxMOwogCiAJZXJyb3IgPSBremFsbG9jKHNpemVvZigqZXJyb3IpLCBnZnApOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3Z0LmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9ndnQuYwppbmRleCAyMWI5MTMxM2NjNWQuLmQ5YmI5YTc1OTc0MCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3Z0LmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3Z0LmMKQEAgLTY0LDcgKzY0LDcgQEAgc3RhdGljIGJvb2wg
aXNfc3VwcG9ydGVkX2RldmljZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAg
Ki8KIHZvaWQgaW50ZWxfZ3Z0X3Nhbml0aXplX29wdGlvbnMoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2KQogewotCWlmICghaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2d2dCkKKwlpZiAo
IWRldl9wcml2LT5wYXJhbXMuZW5hYmxlX2d2dCkKIAkJcmV0dXJuOwogCiAJaWYgKGludGVsX3Zn
cHVfYWN0aXZlKGRldl9wcml2KSkgewpAQCAtODAsNyArODAsNyBAQCB2b2lkIGludGVsX2d2dF9z
YW5pdGl6ZV9vcHRpb25zKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAogCXJl
dHVybjsKIGJhaWw6Ci0JaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2d2dCA9IDA7CisJZGV2X3ByaXYt
PnBhcmFtcy5lbmFibGVfZ3Z0ID0gMDsKIH0KIAogLyoqCkBAIC0xMDAsNyArMTAwLDcgQEAgaW50
IGludGVsX2d2dF9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlpZiAo
aTkxNV9pbmplY3RfcHJvYmVfZmFpbHVyZShkZXZfcHJpdikpCiAJCXJldHVybiAtRU5PREVWOwog
Ci0JaWYgKCFpOTE1X21vZHBhcmFtcy5lbmFibGVfZ3Z0KSB7CisJaWYgKCFkZXZfcHJpdi0+cGFy
YW1zLmVuYWJsZV9ndnQpIHsKIAkJZHJtX2RiZygmZGV2X3ByaXYtPmRybSwKIAkJCSJHVlQtZyBp
cyBkaXNhYmxlZCBieSBrZXJuZWwgcGFyYW1zXG4iKTsKIAkJcmV0dXJuIDA7CkBAIC0xMjEsNyAr
MTIxLDcgQEAgaW50IGludGVsX2d2dF9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdikKIAlyZXR1cm4gMDsKIAogYmFpbDoKLQlpOTE1X21vZHBhcmFtcy5lbmFibGVfZ3Z0ID0g
MDsKKwlkZXZfcHJpdi0+cGFyYW1zLmVuYWJsZV9ndnQgPSAwOwogCXJldHVybiAwOwogfQogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9yZWdpb25fbG1lbS5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcmVnaW9uX2xtZW0uYwppbmRleCAxNGI1OWI4OTljOWIu
LjQwZDhmMWE5NWRmNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcmVn
aW9uX2xtZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9yZWdpb25fbG1lbS5j
CkBAIC03Niw3ICs3Niw3IEBAIHJlZ2lvbl9sbWVtX2luaXQoc3RydWN0IGludGVsX21lbW9yeV9y
ZWdpb24gKm1lbSkKIHsKIAlpbnQgcmV0OwogCi0JaWYgKGk5MTVfbW9kcGFyYW1zLmZha2VfbG1l
bV9zdGFydCkgeworCWlmIChtZW0tPmk5MTUtPnBhcmFtcy5mYWtlX2xtZW1fc3RhcnQpIHsKIAkJ
cmV0ID0gaW5pdF9mYWtlX2xtZW1fYmFyKG1lbSk7CiAJCUdFTV9CVUdfT04ocmV0KTsKIAl9CkBA
IC0xMTEsMTIgKzExMSwxMiBAQCBpbnRlbF9zZXR1cF9mYWtlX2xtZW0oc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUpCiAJcmVzb3VyY2Vfc2l6ZV90IHN0YXJ0OwogCiAJR0VNX0JVR19PTihp
OTE1X2dndHRfaGFzX2FwZXJ0dXJlKCZpOTE1LT5nZ3R0KSk7Ci0JR0VNX0JVR19PTighaTkxNV9t
b2RwYXJhbXMuZmFrZV9sbWVtX3N0YXJ0KTsKKwlHRU1fQlVHX09OKCFpOTE1LT5wYXJhbXMuZmFr
ZV9sbWVtX3N0YXJ0KTsKIAogCS8qIFlvdXIgbWFwcGFibGUgYXBlcnR1cmUgYmVsb25ncyB0byBt
ZSBub3chICovCiAJbWFwcGFibGVfZW5kID0gcGNpX3Jlc291cmNlX2xlbihwZGV2LCAyKTsKIAlp
b19zdGFydCA9IHBjaV9yZXNvdXJjZV9zdGFydChwZGV2LCAyKSwKLQlzdGFydCA9IGk5MTVfbW9k
cGFyYW1zLmZha2VfbG1lbV9zdGFydDsKKwlzdGFydCA9IGk5MTUtPnBhcmFtcy5mYWtlX2xtZW1f
c3RhcnQ7CiAKIAltZW0gPSBpbnRlbF9tZW1vcnlfcmVnaW9uX2NyZWF0ZShpOTE1LAogCQkJCQkg
c3RhcnQsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5jCmluZGV4IDAxMzMxMmU5YjU1Yy4u
Y2IyYTgyMDdlMjM1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNv
cmUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuYwpAQCAtMTE4Nyw3
ICsxMTg3LDcgQEAgX191bmNsYWltZWRfcmVnX2RlYnVnKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVu
Y29yZSwKIAkJICAgICByZWFkID8gInJlYWQgZnJvbSIgOiAid3JpdGUgdG8iLAogCQkgICAgIGk5
MTVfbW1pb19yZWdfb2Zmc2V0KHJlZykpKQogCQkvKiBPbmx5IHJlcG9ydCB0aGUgZmlyc3QgTiBm
YWlsdXJlcyAqLwotCQlpOTE1X21vZHBhcmFtcy5tbWlvX2RlYnVnLS07CisJCXVuY29yZS0+aTkx
NS0+cGFyYW1zLm1taW9fZGVidWctLTsKIH0KIAogc3RhdGljIGlubGluZSB2b2lkCkBAIC0xMTk2
LDcgKzExOTYsNyBAQCB1bmNsYWltZWRfcmVnX2RlYnVnKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVu
Y29yZSwKIAkJICAgIGNvbnN0IGJvb2wgcmVhZCwKIAkJICAgIGNvbnN0IGJvb2wgYmVmb3JlKQog
ewotCWlmIChsaWtlbHkoIWk5MTVfbW9kcGFyYW1zLm1taW9fZGVidWcpKQorCWlmIChsaWtlbHko
IXVuY29yZS0+aTkxNS0+cGFyYW1zLm1taW9fZGVidWcpKQogCQlyZXR1cm47CiAKIAkvKiBpbnRl
cnJ1cHRzIGFyZSBkaXNhYmxlZCBhbmQgcmUtZW5hYmxlZCBhcm91bmQgdW5jb3JlLT5sb2NrIHVz
YWdlICovCkBAIC0yMDk1LDEyICsyMDk1LDEyIEBAIGludGVsX3VuY29yZV9hcm1fdW5jbGFpbWVk
X21taW9fZGV0ZWN0aW9uKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSkKIAkJZ290byBvdXQ7
CiAKIAlpZiAodW5saWtlbHkoY2hlY2tfZm9yX3VuY2xhaW1lZF9tbWlvKHVuY29yZSkpKSB7Ci0J
CWlmICghaTkxNV9tb2RwYXJhbXMubW1pb19kZWJ1ZykgeworCQlpZiAoIXVuY29yZS0+aTkxNS0+
cGFyYW1zLm1taW9fZGVidWcpIHsKIAkJCWRybV9kYmcoJnVuY29yZS0+aTkxNS0+ZHJtLAogCQkJ
CSJVbmNsYWltZWQgcmVnaXN0ZXIgZGV0ZWN0ZWQsICIKIAkJCQkiZW5hYmxpbmcgb25lc2hvdCB1
bmNsYWltZWQgcmVnaXN0ZXIgcmVwb3J0aW5nLiAiCiAJCQkJIlBsZWFzZSB1c2UgaTkxNS5tbWlv
X2RlYnVnPU4gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4iKTsKLQkJCWk5MTVfbW9kcGFyYW1zLm1t
aW9fZGVidWcrKzsKKwkJCXVuY29yZS0+aTkxNS0+cGFyYW1zLm1taW9fZGVidWcrKzsKIAkJfQog
CQl1bmNvcmUtPmRlYnVnLT51bmNsYWltZWRfbW1pb19jaGVjay0tOwogCQlyZXQgPSB0cnVlOwot
LSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

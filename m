Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5FC4F19E0B
	for <lists+intel-gfx@lfdr.de>; Fri, 10 May 2019 15:22:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 444CA89C54;
	Fri, 10 May 2019 13:22:54 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E1F168938C
 for <Intel-gfx@lists.freedesktop.org>; Fri, 10 May 2019 13:22:51 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 May 2019 06:22:51 -0700
X-ExtLoop1: 1
Received: from ddillonx-mobl.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.28.3])
 by fmsmga006.fm.intel.com with ESMTP; 10 May 2019 06:22:51 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Fri, 10 May 2019 14:22:38 +0100
Message-Id: <20190510132240.11029-5-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.19.1
In-Reply-To: <20190510132240.11029-1-tvrtko.ursulin@linux.intel.com>
References: <20190510132240.11029-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC 4/6] drm/i915: Update client name on context create
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KClNvbWUgY2xp
ZW50cyBoYXZlIHRoZSBEUk0gZmQgcGFzc2VkIHRvIHRoZW0gb3ZlciBhIHNvY2tldCBieSB0aGUg
WCBzZXJ2ZXIuCgpHcmFiIHRoZSByZWFsIGNsaWVudCBhbmQgcGlkIHdoZW4gdGhleSBjcmVhdGUg
dGhlaXIgZmlyc3QgY29udGV4dCBhbmQKdXBkYXRlIHRoZSBleHBvc2VkIGRhdGEgZm9yIG1vcmUg
dXNlZnVsIGVudW1lcmF0aW9uLgoKU2lnbmVkLW9mZi1ieTogVHZydGtvIFVyc3VsaW4gPHR2cnRr
by51cnN1bGluQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5o
ICAgICAgICAgfCAgOCArKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyAg
ICAgICAgIHwgIDQgKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fY29udGV4dC5j
IHwgMTggKysrKysrKysrKysrKysrLS0tCiAzIGZpbGVzIGNoYW5nZWQsIDI1IGluc2VydGlvbnMo
KyksIDUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5kZXggMWQ3YTk0NTU1
YTg3Li5iNmZhM2Q0NWVkMjIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaApAQCAtMzA4Niw2ICsz
MDg2LDE0IEBAIGk5MTVfZ2VtX29iamVjdF9waW5fdG9fZGlzcGxheV9wbGFuZShzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX29iamVjdCAqb2JqLAogdm9pZCBpOTE1X2dlbV9vYmplY3RfdW5waW5fZnJvbV9k
aXNwbGF5X3BsYW5lKHN0cnVjdCBpOTE1X3ZtYSAqdm1hKTsKIGludCBpOTE1X2dlbV9vYmplY3Rf
YXR0YWNoX3BoeXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJCQlpbnQgYWxp
Z24pOworCitpbnQKK2k5MTVfZ2VtX2FkZF9jbGllbnQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUsCisJCXN0cnVjdCBkcm1faTkxNV9maWxlX3ByaXZhdGUgKmZpbGVfcHJpdiwKKwkJc3Ry
dWN0IHRhc2tfc3RydWN0ICp0YXNrLAorCQl1bnNpZ25lZCBpbnQgc2VyaWFsKTsKK3ZvaWQgaTkx
NV9nZW1fcmVtb3ZlX2NsaWVudChzdHJ1Y3QgZHJtX2k5MTVfZmlsZV9wcml2YXRlICpmaWxlX3By
aXYpOworCiBpbnQgaTkxNV9nZW1fb3BlbihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwg
c3RydWN0IGRybV9maWxlICpmaWxlKTsKIHZvaWQgaTkxNV9nZW1fcmVsZWFzZShzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpOwogCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZW0uYwppbmRleCAwYWU1NzY0YTU4ZDIuLjAzY2FjNmNlMGMzMSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dlbS5jCkBAIC00ODM0LDcgKzQ4MzQsNyBAQCBzaG93X2NsaWVudF9waWQoc3RydWN0IGRldmlj
ZSAqa2Rldiwgc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIgKmJ1ZikKIAlyZXR1
cm4gc25wcmludGYoYnVmLCBQQUdFX1NJWkUsICIldSIsIGZpbGVfcHJpdi0+Y2xpZW50LnBpZCk7
CiB9CiAKLXN0YXRpYyBpbnQKK2ludAogaTkxNV9nZW1fYWRkX2NsaWVudChzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqaTkxNSwKIAkJc3RydWN0IGRybV9pOTE1X2ZpbGVfcHJpdmF0ZSAqZmlsZV9w
cml2LAogCQlzdHJ1Y3QgdGFza19zdHJ1Y3QgKnRhc2ssCkBAIC00ODk0LDcgKzQ4OTQsNyBAQCBp
OTE1X2dlbV9hZGRfY2xpZW50KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCXJldHVy
biByZXQ7CiB9CiAKLXN0YXRpYyB2b2lkIGk5MTVfZ2VtX3JlbW92ZV9jbGllbnQoc3RydWN0IGRy
bV9pOTE1X2ZpbGVfcHJpdmF0ZSAqZmlsZV9wcml2KQordm9pZCBpOTE1X2dlbV9yZW1vdmVfY2xp
ZW50KHN0cnVjdCBkcm1faTkxNV9maWxlX3ByaXZhdGUgKmZpbGVfcHJpdikKIHsKIAlzeXNmc19y
ZW1vdmVfZmlsZShmaWxlX3ByaXYtPmNsaWVudC5yb290LAogCQkJICAoc3RydWN0IGF0dHJpYnV0
ZSAqKSZmaWxlX3ByaXYtPmNsaWVudC5hdHRyLnBpZCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2dlbV9jb250ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dlbV9jb250ZXh0LmMKaW5kZXggNjVjZWZjNTIwZTc5Li4xYWMyNTIxZmM0NDggMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9jb250ZXh0LmMKQEAgLTE0OTksNiArMTQ5OSw4IEBAIGlu
dCBpOTE1X2dlbV9jb250ZXh0X2NyZWF0ZV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2
b2lkICpkYXRhLAogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShk
ZXYpOwogCXN0cnVjdCBkcm1faTkxNV9nZW1fY29udGV4dF9jcmVhdGVfZXh0ICphcmdzID0gZGF0
YTsKKwlwaWRfdCBwaWQgPSBwaWRfbnIoZ2V0X3Rhc2tfcGlkKGN1cnJlbnQsIFBJRFRZUEVfUElE
KSk7CisJc3RydWN0IGRybV9pOTE1X2ZpbGVfcHJpdmF0ZSAqZmlsZV9wcml2ID0gZmlsZS0+ZHJp
dmVyX3ByaXY7CiAJc3RydWN0IGNyZWF0ZV9leHQgZXh0X2RhdGE7CiAJaW50IHJldDsKIApAQCAt
MTUxMiwxMSArMTUxNCwxMSBAQCBpbnQgaTkxNV9nZW1fY29udGV4dF9jcmVhdGVfaW9jdGwoc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0
OwogCi0JZXh0X2RhdGEuZnByaXYgPSBmaWxlLT5kcml2ZXJfcHJpdjsKKwlleHRfZGF0YS5mcHJp
diA9IGZpbGVfcHJpdjsKIAlpZiAoY2xpZW50X2lzX2Jhbm5lZChleHRfZGF0YS5mcHJpdikpIHsK
IAkJRFJNX0RFQlVHKCJjbGllbnQgJXNbJWRdIGJhbm5lZCBmcm9tIGNyZWF0aW5nIGN0eFxuIiwK
LQkJCSAgY3VycmVudC0+Y29tbSwKLQkJCSAgcGlkX25yKGdldF90YXNrX3BpZChjdXJyZW50LCBQ
SURUWVBFX1BJRCkpKTsKKwkJCSAgY3VycmVudC0+Y29tbSwgcGlkKTsKKwogCQlyZXR1cm4gLUVJ
TzsKIAl9CiAKQEAgLTE1MjQsNiArMTUyNiwxNiBAQCBpbnQgaTkxNV9nZW1fY29udGV4dF9jcmVh
dGVfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKIAlpZiAocmV0KQog
CQlyZXR1cm4gcmV0OwogCisJaWYgKGZpbGVfcHJpdi0+Y2xpZW50LnBpZCAhPSBwaWQpIHsKKwkJ
aTkxNV9nZW1fcmVtb3ZlX2NsaWVudChmaWxlX3ByaXYpOworCQlyZXQgPSBpOTE1X2dlbV9hZGRf
Y2xpZW50KGk5MTUsIGZpbGVfcHJpdiwgY3VycmVudCwKKwkJCQkJICBmaWxlX3ByaXYtPmNsaWVu
dC5pZCk7CisJCWlmIChyZXQpIHsKKwkJCW11dGV4X3VubG9jaygmZGV2LT5zdHJ1Y3RfbXV0ZXgp
OworCQkJcmV0dXJuIHJldDsKKwkJfQorCX0KKwogCWV4dF9kYXRhLmN0eCA9IGk5MTVfZ2VtX2Ny
ZWF0ZV9jb250ZXh0KGk5MTUsIGFyZ3MtPmZsYWdzKTsKIAltdXRleF91bmxvY2soJmRldi0+c3Ry
dWN0X211dGV4KTsKIAlpZiAoSVNfRVJSKGV4dF9kYXRhLmN0eCkpCi0tIAoyLjE5LjEKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWls
aW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

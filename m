Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B65D0259B8
	for <lists+intel-gfx@lfdr.de>; Tue, 21 May 2019 23:11:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 61B7E896E7;
	Tue, 21 May 2019 21:11:41 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F1F2D896BF
 for <intel-gfx@lists.freedesktop.org>; Tue, 21 May 2019 21:11:39 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16633452-1500050 
 for <intel-gfx@lists.freedesktop.org>; Tue, 21 May 2019 22:11:36 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 21 May 2019 22:11:34 +0100
Message-Id: <20190521211134.16117-10-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190521211134.16117-1-chris@chris-wilson.co.uk>
References: <20190521211134.16117-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 10/10] drm/i915: Allow specification of parallel
 execbuf
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlcmUgaXMgYSBkZXNpcmUgdG8gc3BsaXQgYSB0YXNrIG9udG8gdHdvIGVuZ2luZXMgYW5kIGhh
dmUgdGhlbSBydW4gYXQKdGhlIHNhbWUgdGltZSwgZS5nLiBzY2FubGluZSBpbnRlcmxlYXZpbmcg
dG8gc3ByZWFkIHRoZSB3b3JrbG9hZCBldmVubHkuClRocm91Z2ggdGhlIHVzZSBvZiB0aGUgb3V0
LWZlbmNlIGZyb20gdGhlIGZpcnN0IGV4ZWNidWYsIHdlIGNhbgpjb29yZGluYXRlIHNlY29uZGFy
eSBleGVjYnVmIHRvIG9ubHkgYmVjb21lIHJlYWR5IHNpbXVsdGFuZW91c2x5IHdpdGgKdGhlIGZp
cnN0LCBzbyB0aGF0IHdpdGggYWxsIHRoaW5ncyBpZGxlIHRoZSBzZWNvbmQgZXhlY2J1ZnMgYXJl
IGV4ZWN1dGVkCmluIHBhcmFsbGVsIHdpdGggdGhlIGZpcnN0LiBUaGUga2V5IGRpZmZlcmVuY2Ug
aGVyZSBiZXR3ZWVuIHRoZSBuZXcKRVhFQ19GRU5DRV9TVUJNSVQgYW5kIHRoZSBleGlzdGluZyBF
WEVDX0ZFTkNFX0lOIGlzIHRoYXQgdGhlIGluLWZlbmNlCndhaXRzIGZvciB0aGUgY29tcGxldGlv
biBvZiB0aGUgZmlyc3QgcmVxdWVzdCAoc28gdGhhdCBhbGwgb2YgaXRzCnJlbmRlcmluZyByZXN1
bHRzIGFyZSB2aXNpYmxlIHRvIHRoZSBzZWNvbmQgZXhlY2J1ZiwgdGhlIG1vcmUgY29tbW9uCnVz
ZXJzcGFjZSBmZW5jZSByZXF1aXJlbWVudCkuCgpTaW5jZSB3ZSBvbmx5IGhhdmUgYSBzaW5nbGUg
aW5wdXQgZmVuY2Ugc2xvdCwgdXNlcnNwYWNlIGNhbm5vdCBtaXggYW4KaW4tZmVuY2UgYW5kIGEg
c3VibWl0LWZlbmNlLiBJdCBoYXMgdG8gdXNlIG9uZSBvciB0aGUgb3RoZXIhIFRoaXMgaXMgbm90
CnN1Y2ggYSBoYXJzaCByZXF1aXJlbWVudCwgc2luY2UgYnkgdmlydHVlIG9mIHRoZSBzdWJtaXQt
ZmVuY2UsIHRoZQpzZWNvbmRhcnkgZXhlY2J1ZiBpbmhlcml0IGFsbCBvZiB0aGUgZGVwZW5kZW5j
aWVzIGZyb20gdGhlIGZpcnN0CnJlcXVlc3QsIGFuZCBmb3IgdGhlIGFwcGxpY2F0aW9uIHRoZSBk
ZXBlbmRlbmNpZXMgc2hvdWxkIGJlIGNvbW1vbgpiZXR3ZWVuIHRoZSBwcmltYXJ5IGFuZCBzZWNv
bmRhcnkgZXhlY2J1Zi4KClN1Z2dlc3RlZC1ieTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1
bGluQGludGVsLmNvbT4KVGVzdGNhc2U6IGlndC9nZW1fZXhlY19mZW5jZS9wYXJhbGxlbApMaW5r
OiBodHRwczovL2dpdGh1Yi5jb20vaW50ZWwvbWVkaWEtZHJpdmVyL3B1bGwvNTQ2ClNpZ25lZC1v
ZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogVHZydGtv
IFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IFR2cnRrbyBV
cnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9kcnYuYyAgICAgICAgICAgIHwgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9nZW1fZXhlY2J1ZmZlci5jIHwgMjUgKysrKysrKysrKysrKysrKysrKysrLQogaW5jbHVkZS91
YXBpL2RybS9pOTE1X2RybS5oICAgICAgICAgICAgICAgIHwgMTcgKysrKysrKysrKysrKystCiAz
IGZpbGVzIGNoYW5nZWQsIDQxIGluc2VydGlvbnMoKyksIDIgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZHJ2LmMKaW5kZXggNTA2MWNiMzI4NTZiLi44M2QyZWI5ZTc0Y2IgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kcnYuYwpAQCAtNDQzLDYgKzQ0Myw3IEBAIHN0YXRpYyBpbnQgaTkxNV9nZXRw
YXJhbV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAogCWNhc2UgSTkx
NV9QQVJBTV9IQVNfRVhFQ19DQVBUVVJFOgogCWNhc2UgSTkxNV9QQVJBTV9IQVNfRVhFQ19CQVRD
SF9GSVJTVDoKIAljYXNlIEk5MTVfUEFSQU1fSEFTX0VYRUNfRkVOQ0VfQVJSQVk6CisJY2FzZSBJ
OTE1X1BBUkFNX0hBU19FWEVDX1NVQk1JVF9GRU5DRToKIAkJLyogRm9yIHRoZSB0aW1lIGJlaW5n
IGFsbCBvZiB0aGVzZSBhcmUgYWx3YXlzIHRydWU7CiAJCSAqIGlmIHNvbWUgc3VwcG9ydGVkIGhh
cmR3YXJlIGRvZXMgbm90IGhhdmUgb25lIG9mIHRoZXNlCiAJCSAqIGZlYXR1cmVzIHRoaXMgdmFs
dWUgbmVlZHMgdG8gYmUgcHJvdmlkZWQgZnJvbQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9nZW1fZXhlY2J1ZmZlci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZW1fZXhlY2J1ZmZlci5jCmluZGV4IDcyOTg2MDE4OGMxYS4uOGI4NWM5MWMzZWE0IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9leGVjYnVmZmVyLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZXhlY2J1ZmZlci5jCkBAIC0yMzE5LDYgKzIzMTks
NyBAQCBpOTE1X2dlbV9kb19leGVjYnVmZmVyKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiB7CiAJ
c3RydWN0IGk5MTVfZXhlY2J1ZmZlciBlYjsKIAlzdHJ1Y3QgZG1hX2ZlbmNlICppbl9mZW5jZSA9
IE5VTEw7CisJc3RydWN0IGRtYV9mZW5jZSAqZXhlY19mZW5jZSA9IE5VTEw7CiAJc3RydWN0IHN5
bmNfZmlsZSAqb3V0X2ZlbmNlID0gTlVMTDsKIAlpbnQgb3V0X2ZlbmNlX2ZkID0gLTE7CiAJaW50
IGVycjsKQEAgLTIzNjEsMTEgKzIzNjIsMjQgQEAgaTkxNV9nZW1fZG9fZXhlY2J1ZmZlcihzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJcmV0dXJuIC1FSU5WQUw7CiAJfQogCisJaWYgKGFyZ3Mt
PmZsYWdzICYgSTkxNV9FWEVDX0ZFTkNFX1NVQk1JVCkgeworCQlpZiAoaW5fZmVuY2UpIHsKKwkJ
CWVyciA9IC1FSU5WQUw7CisJCQlnb3RvIGVycl9pbl9mZW5jZTsKKwkJfQorCisJCWV4ZWNfZmVu
Y2UgPSBzeW5jX2ZpbGVfZ2V0X2ZlbmNlKGxvd2VyXzMyX2JpdHMoYXJncy0+cnN2ZDIpKTsKKwkJ
aWYgKCFleGVjX2ZlbmNlKSB7CisJCQllcnIgPSAtRUlOVkFMOworCQkJZ290byBlcnJfaW5fZmVu
Y2U7CisJCX0KKwl9CisKIAlpZiAoYXJncy0+ZmxhZ3MgJiBJOTE1X0VYRUNfRkVOQ0VfT1VUKSB7
CiAJCW91dF9mZW5jZV9mZCA9IGdldF91bnVzZWRfZmRfZmxhZ3MoT19DTE9FWEVDKTsKIAkJaWYg
KG91dF9mZW5jZV9mZCA8IDApIHsKIAkJCWVyciA9IG91dF9mZW5jZV9mZDsKLQkJCWdvdG8gZXJy
X2luX2ZlbmNlOworCQkJZ290byBlcnJfZXhlY19mZW5jZTsKIAkJfQogCX0KIApAQCAtMjQ5NSw2
ICsyNTA5LDEzIEBAIGk5MTVfZ2VtX2RvX2V4ZWNidWZmZXIoc3RydWN0IGRybV9kZXZpY2UgKmRl
diwKIAkJCWdvdG8gZXJyX3JlcXVlc3Q7CiAJfQogCisJaWYgKGV4ZWNfZmVuY2UpIHsKKwkJZXJy
ID0gaTkxNV9yZXF1ZXN0X2F3YWl0X2V4ZWN1dGlvbihlYi5yZXF1ZXN0LCBleGVjX2ZlbmNlLAor
CQkJCQkJICAgZWIuZW5naW5lLT5ib25kX2V4ZWN1dGUpOworCQlpZiAoZXJyIDwgMCkKKwkJCWdv
dG8gZXJyX3JlcXVlc3Q7CisJfQorCiAJaWYgKGZlbmNlcykgewogCQllcnIgPSBhd2FpdF9mZW5j
ZV9hcnJheSgmZWIsIGZlbmNlcyk7CiAJCWlmIChlcnIpCkBAIC0yNTU2LDYgKzI1NzcsOCBAQCBp
OTE1X2dlbV9kb19leGVjYnVmZmVyKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiBlcnJfb3V0X2Zl
bmNlOgogCWlmIChvdXRfZmVuY2VfZmQgIT0gLTEpCiAJCXB1dF91bnVzZWRfZmQob3V0X2ZlbmNl
X2ZkKTsKK2Vycl9leGVjX2ZlbmNlOgorCWRtYV9mZW5jZV9wdXQoZXhlY19mZW5jZSk7CiBlcnJf
aW5fZmVuY2U6CiAJZG1hX2ZlbmNlX3B1dChpbl9mZW5jZSk7CiAJcmV0dXJuIGVycjsKZGlmZiAt
LWdpdCBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaCBiL2luY2x1ZGUvdWFwaS9kcm0vaTkx
NV9kcm0uaAppbmRleCBlMmRhOTAyN2JjZGYuLmJkYjAwZWMxZjhiZSAxMDA2NDQKLS0tIGEvaW5j
bHVkZS91YXBpL2RybS9pOTE1X2RybS5oCisrKyBiL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0u
aApAQCAtNjA0LDYgKzYwNCwxMiBAQCB0eXBlZGVmIHN0cnVjdCBkcm1faTkxNV9pcnFfd2FpdCB7
CiAgKi8KICNkZWZpbmUgSTkxNV9QQVJBTV9NTUFQX0dUVF9DT0hFUkVOVAk1MgogCisvKgorICog
UXVlcnkgd2hldGhlciBEUk1fSTkxNV9HRU1fRVhFQ0JVRkZFUjIgc3VwcG9ydHMgY29vcmRpbmF0
aW9uIG9mIHBhcmFsbGVsCisgKiBleGVjdXRpb24gdGhyb3VnaCB1c2Ugb2YgZXhwbGljaXQgZmVu
Y2Ugc3VwcG9ydC4KKyAqIFNlZSBJOTE1X0VYRUNfRkVOQ0VfT1VUIGFuZCBJOTE1X0VYRUNfRkVO
Q0VfU1VCTUlULgorICovCisjZGVmaW5lIEk5MTVfUEFSQU1fSEFTX0VYRUNfU1VCTUlUX0ZFTkNF
IDUzCiAvKiBNdXN0IGJlIGtlcHQgY29tcGFjdCAtLSBubyBob2xlcyBhbmQgd2VsbCBkb2N1bWVu
dGVkICovCiAKIHR5cGVkZWYgc3RydWN0IGRybV9pOTE1X2dldHBhcmFtIHsKQEAgLTExMjYsNyAr
MTEzMiwxNiBAQCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyIHsKICAqLwogI2RlZmlu
ZSBJOTE1X0VYRUNfRkVOQ0VfQVJSQVkgICAoMTw8MTkpCiAKLSNkZWZpbmUgX19JOTE1X0VYRUNf
VU5LTk9XTl9GTEFHUyAoLShJOTE1X0VYRUNfRkVOQ0VfQVJSQVk8PDEpKQorLyoKKyAqIFNldHRp
bmcgSTkxNV9FWEVDX0ZFTkNFX1NVQk1JVCBpbXBsaWVzIHRoYXQgbG93ZXJfMzJfYml0cyhyc3Zk
MikgcmVwcmVzZW50CisgKiBhIHN5bmNfZmlsZSBmZCB0byB3YWl0IHVwb24gKGluIGEgbm9uYmxv
Y2tpbmcgbWFubmVyKSBwcmlvciB0byBleGVjdXRpbmcKKyAqIHRoZSBiYXRjaC4KKyAqCisgKiBS
ZXR1cm5zIC1FSU5WQUwgaWYgdGhlIHN5bmNfZmlsZSBmZCBjYW5ub3QgYmUgZm91bmQuCisgKi8K
KyNkZWZpbmUgSTkxNV9FWEVDX0ZFTkNFX1NVQk1JVAkJKDEgPDwgMjApCisKKyNkZWZpbmUgX19J
OTE1X0VYRUNfVU5LTk9XTl9GTEFHUyAoLShJOTE1X0VYRUNfRkVOQ0VfU1VCTUlUIDw8IDEpKQog
CiAjZGVmaW5lIEk5MTVfRVhFQ19DT05URVhUX0lEX01BU0sJKDB4ZmZmZmZmZmYpCiAjZGVmaW5l
IGk5MTVfZXhlY2J1ZmZlcjJfc2V0X2NvbnRleHRfaWQoZWIyLCBjb250ZXh0KSBcCi0tIAoyLjIw
LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 58B94A050E
	for <lists+intel-gfx@lfdr.de>; Wed, 28 Aug 2019 16:34:02 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F1D9289CE2;
	Wed, 28 Aug 2019 14:33:55 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9470B89CD8
 for <intel-gfx@lists.freedesktop.org>; Wed, 28 Aug 2019 14:33:47 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 28 Aug 2019 07:33:40 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,441,1559545200"; d="scan'208";a="380419421"
Received: from cmartin2-mobl3.ger.corp.intel.com (HELO
 delly.ger.corp.intel.com) ([10.252.38.61])
 by fmsmga005.fm.intel.com with ESMTP; 28 Aug 2019 07:33:39 -0700
From: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 28 Aug 2019 17:33:23 +0300
Message-Id: <20190828143327.7965-7-lionel.g.landwerlin@intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20190828143327.7965-1-lionel.g.landwerlin@intel.com>
References: <20190828143327.7965-1-lionel.g.landwerlin@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v11 06/10] drm/i915/perf: implement active wait
 for noa configurations
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Tk9BIGNvbmZpZ3VyYXRpb24gdGFrZSBzb21lIGFtb3VudCBvZiB0aW1lIHRvIGFwcGx5LiBUaGF0
IGFtb3VudCBvZgp0aW1lIGRlcGVuZHMgb24gdGhlIHNpemUgb2YgdGhlIEdULiBUaGVyZSBpcyBu
byBkb2N1bWVudGVkIHRpbWUgZm9yCnRoaXMuIEZvciBleGFtcGxlLCBwYXN0IGV4cGVyaW1lbnRh
dGlvbnMgd2l0aCBwb3dlcmdhdGluZwpjb25maWd1cmF0aW9uIGNoYW5nZXMgc2VlbSB0byBpbmRp
Y2F0ZSBhIDYwfjcwdXMgZGVsYXkuIFdlIGdvIHdpdGgKNTAwdXMgYXMgZGVmYXVsdCBmb3Igbm93
IHdoaWNoIHNob3VsZCBiZSBvdmVyIHRoZSByZXF1aXJlZCBhbW91bnQgb2YKdGltZSAoYWNjb3Jk
aW5nIHRvIEhXIGFyY2hpdGVjdHMpLgoKdjI6IERvbid0IGZvcmdldCB0byBzYXZlL3Jlc3RvcmUg
cmVnaXN0ZXJzIHVzZWQgZm9yIHRoZSB3YWl0IChDaHJpcykKCnYzOiBOYW1lIHVzZWQgQ1NfR1BS
IHJlZ2lzdGVycyAoQ2hyaXMpCiAgICBGaXggY29tcGlsZSBpc3N1ZSBkdWUgdG8gcmViYXNlIChM
aW9uZWwpCgp2NDogRml4IHNhdmUvcmVzdG9yZSBoZWxwZXJzIChVbWVzaCkKCnY1OiBNb3ZlIG5v
YV93YWl0IGZyb20gZHJtX2k5MTVfcHJpdmF0ZSB0byBpOTE1X3BlcmZfc3RyZWFtIChMaW9uZWwp
CgpTaWduZWQtb2ZmLWJ5OiBMaW9uZWwgTGFuZHdlcmxpbiA8bGlvbmVsLmcubGFuZHdlcmxpbkBp
bnRlbC5jb20+ClJldmlld2VkLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5j
by51az4gKHY0KQotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5k
cy5oIHwgIDI0ICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5oICAg
ICB8ICAgNSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyAgICAgICAgICB8
ICAzMSArKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAgICAgIHwg
ICA4ICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jICAgICAgICAgICAgIHwgMjM0
ICsrKysrKysrKysrKysrKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggICAg
ICAgICAgICAgIHwgICA0ICstCiA2IGZpbGVzIGNoYW5nZWQsIDMwMiBpbnNlcnRpb25zKCspLCA0
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2dwdV9jb21tYW5kcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3B1X2NvbW1h
bmRzLmgKaW5kZXggYTdmMTM3N2E1NGEyLi5mMTMzZjhkYmFjYjEgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oCkBAIC0xNTgsNiArMTU4LDcgQEAKICNk
ZWZpbmUgICBNSV9CQVRDSF9HVFQJCSAgICAoMjw8NikgLyogYWxpYXNlZCB3aXRoICgxPDw3KSBv
biBnZW40ICovCiAjZGVmaW5lIE1JX0JBVENIX0JVRkZFUl9TVEFSVF9HRU44CU1JX0lOU1RSKDB4
MzEsIDEpCiAjZGVmaW5lICAgTUlfQkFUQ0hfUkVTT1VSQ0VfU1RSRUFNRVIgKDE8PDEwKQorI2Rl
ZmluZSAgIE1JX0JBVENIX1BSRURJQ0FURSAgICAgICAgICgxIDw8IDE1KSAvKiBIU1crIG9uIFJD
UyBvbmx5Ki8KIAogLyoKICAqIDNEIGluc3RydWN0aW9ucyB1c2VkIGJ5IHRoZSBrZXJuZWwKQEAg
LTIzNiw2ICsyMzcsMjkgQEAKICNkZWZpbmUgICBQSVBFX0NPTlRST0xfREVQVEhfQ0FDSEVfRkxV
U0gJCSgxPDwwKQogI2RlZmluZSAgIFBJUEVfQ09OVFJPTF9HTE9CQUxfR1RUICgxPDwyKSAvKiBp
biBhZGRyIGR3b3JkICovCiAKKyNkZWZpbmUgTUlfTUFUSCh4KSBNSV9JTlNUUigweDFhLCAoeCkt
MSkKKyNkZWZpbmUgICBNSV9BTFVfT1Aob3AsIHNyYzEsIHNyYzIpICgoKG9wKSA8PCAyMCkgfCAo
KHNyYzEpIDw8IDEwKSB8IChzcmMyKSkKKy8qIG9wZXJhbmRzICovCisjZGVmaW5lICAgTUlfQUxV
X09QX05PT1AgICAgIDAKKyNkZWZpbmUgICBNSV9BTFVfT1BfTE9BRCAgICAgMTI4CisjZGVmaW5l
ICAgTUlfQUxVX09QX0xPQURJTlYgIDExNTIKKyNkZWZpbmUgICBNSV9BTFVfT1BfTE9BRDAgICAg
MTI5CisjZGVmaW5lICAgTUlfQUxVX09QX0xPQUQxICAgIDExNTMKKyNkZWZpbmUgICBNSV9BTFVf
T1BfQUREICAgICAgMjU2CisjZGVmaW5lICAgTUlfQUxVX09QX1NVQiAgICAgIDI1NworI2RlZmlu
ZSAgIE1JX0FMVV9PUF9BTkQgICAgICAyNTgKKyNkZWZpbmUgICBNSV9BTFVfT1BfT1IgICAgICAg
MjU5CisjZGVmaW5lICAgTUlfQUxVX09QX1hPUiAgICAgIDI2MAorI2RlZmluZSAgIE1JX0FMVV9P
UF9TVE9SRSAgICAzODQKKyNkZWZpbmUgICBNSV9BTFVfT1BfU1RPUkVJTlYgMTQwOAorLyogc291
cmNlcyAqLworI2RlZmluZSAgIE1JX0FMVV9TUkNfUkVHKHgpICAoeCkgLyogMCAtPiAxNSAqLwor
I2RlZmluZSAgIE1JX0FMVV9TUkNfU1JDQSAgICAzMgorI2RlZmluZSAgIE1JX0FMVV9TUkNfU1JD
QiAgICAzMworI2RlZmluZSAgIE1JX0FMVV9TUkNfQUNDVSAgICA0OQorI2RlZmluZSAgIE1JX0FM
VV9TUkNfWkYgICAgICA1MAorI2RlZmluZSAgIE1JX0FMVV9TUkNfQ0YgICAgICA1MQorCiAvKgog
ICogQ29tbWFuZHMgdXNlZCBvbmx5IGJ5IHRoZSBjb21tYW5kIHBhcnNlcgogICovCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaAppbmRleCBkYzI5NWMxOTZkMTEuLmY3NTJi
NmNmOWVhMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlw
ZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5oCkBAIC05
Nyw2ICs5NywxMSBAQCBlbnVtIGludGVsX2d0X3NjcmF0Y2hfZmllbGQgewogCS8qIDggYnl0ZXMg
Ki8KIAlJTlRFTF9HVF9TQ1JBVENIX0ZJRUxEX0NPSEVSRU5UTDNfV0EgPSAyNTYsCiAKKwkvKiA2
ICogOCBieXRlcyAqLworCUlOVEVMX0dUX1NDUkFUQ0hfRklFTERfUEVSRl9DU19HUFIgPSAyMDQ4
LAorCisJLyogNCBieXRlcyAqLworCUlOVEVMX0dUX1NDUkFUQ0hfRklFTERfUEVSRl9QUkVESUNB
VEVfUkVTVUxUXzEgPSAyMDk2LAogfTsKIAogI2VuZGlmIC8qIF9fSU5URUxfR1RfVFlQRVNfSF9f
ICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCmluZGV4IDVjMWEyYjFlN2QzNC4uNTYz
M2VmYzIyMDcwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYwpAQCAtMzU3OCw2ICsz
NTc4LDM2IEBAIERFRklORV9TSU1QTEVfQVRUUklCVVRFKGk5MTVfd2VkZ2VkX2ZvcHMsCiAJCQlp
OTE1X3dlZGdlZF9nZXQsIGk5MTVfd2VkZ2VkX3NldCwKIAkJCSIlbGx1XG4iKTsKIAorc3RhdGlj
IGludAoraTkxNV9wZXJmX25vYV9kZWxheV9zZXQodm9pZCAqZGF0YSwgdTY0IHZhbCkKK3sKKwlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGRhdGE7CisKKwkvKiBUaGlzIHdvdWxkIGxl
YWQgdG8gaW5maW5pdGUgd2FpdHMgYXMgd2UncmUgZG9pbmcgdGltZXN0YW1wCisJICogZGlmZmVy
ZW5jZSBvbiB0aGUgQ1Mgd2l0aCBvbmx5IDMyYml0cy4KKwkgKi8KKwlpZiAodmFsID4gKCgxdWwg
PDwgMzIpIC0gMSkgKiBSVU5USU1FX0lORk8oaTkxNSktPmNzX3RpbWVzdGFtcF9mcmVxdWVuY3lf
a2h6KQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWF0b21pYzY0X3NldCgmaTkxNS0+cGVyZi5ub2Ff
cHJvZ3JhbW1pbmdfZGVsYXksIHZhbCk7CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQKK2k5
MTVfcGVyZl9ub2FfZGVsYXlfZ2V0KHZvaWQgKmRhdGEsIHU2NCAqdmFsKQoreworCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1ID0gZGF0YTsKKworCSp2YWwgPSBhdG9taWM2NF9yZWFkKCZp
OTE1LT5wZXJmLm5vYV9wcm9ncmFtbWluZ19kZWxheSk7CisJcmV0dXJuIDA7Cit9CisKK0RFRklO
RV9TSU1QTEVfQVRUUklCVVRFKGk5MTVfcGVyZl9ub2FfZGVsYXlfZm9wcywKKwkJCWk5MTVfcGVy
Zl9ub2FfZGVsYXlfZ2V0LAorCQkJaTkxNV9wZXJmX25vYV9kZWxheV9zZXQsCisJCQkiJWxsdVxu
Iik7CisKKwogI2RlZmluZSBEUk9QX1VOQk9VTkQJQklUKDApCiAjZGVmaW5lIERST1BfQk9VTkQJ
QklUKDEpCiAjZGVmaW5lIERST1BfUkVUSVJFCUJJVCgyKQpAQCAtNDM1NCw2ICs0Mzg0LDcgQEAg
c3RhdGljIGNvbnN0IHN0cnVjdCBpOTE1X2RlYnVnZnNfZmlsZXMgewogCWNvbnN0IGNoYXIgKm5h
bWU7CiAJY29uc3Qgc3RydWN0IGZpbGVfb3BlcmF0aW9ucyAqZm9wczsKIH0gaTkxNV9kZWJ1Z2Zz
X2ZpbGVzW10gPSB7CisJeyJpOTE1X3BlcmZfbm9hX2RlbGF5IiwgJmk5MTVfcGVyZl9ub2FfZGVs
YXlfZm9wc30sCiAJeyJpOTE1X3dlZGdlZCIsICZpOTE1X3dlZGdlZF9mb3BzfSwKIAl7Imk5MTVf
Y2FjaGVfc2hhcmluZyIsICZpOTE1X2NhY2hlX3NoYXJpbmdfZm9wc30sCiAJeyJpOTE1X2dlbV9k
cm9wX2NhY2hlcyIsICZpOTE1X2Ryb3BfY2FjaGVzX2ZvcHN9LApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmgKaW5kZXggZDhhMWU4NDJmYjQ4Li5jNDUyYmY2ODcyZTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuaApAQCAtMTIxNyw2ICsxMjE3LDEyIEBAIHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtIHsKIAkJ
ICovCiAJCXUzMiBoZWFkOwogCX0gb2FfYnVmZmVyOworCisJLyoqCisJICogQSBiYXRjaCBidWZm
ZXIgZG9pbmcgYSB3YWl0IG9uIHRoZSBHUFUgZm9yIHRoZSBOT0EgbG9naWMgdG8gYmUKKwkgKiBy
ZXByb2dyYW1tZWQuCisJICovCisJc3RydWN0IGk5MTVfdm1hICpub2Ffd2FpdDsKIH07CiAKIC8q
KgpAQCAtMTcwOSw2ICsxNzE1LDggQEAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgewogCiAJCXN0
cnVjdCBpOTE1X29hX29wcyBvcHM7CiAJCWNvbnN0IHN0cnVjdCBpOTE1X29hX2Zvcm1hdCAqb2Ff
Zm9ybWF0czsKKworCQlhdG9taWM2NF90IG5vYV9wcm9ncmFtbWluZ19kZWxheTsKIAl9IHBlcmY7
CiAKIAkvKiBBYnN0cmFjdCB0aGUgc3VibWlzc2lvbiBtZWNoYW5pc20gKGxlZ2FjeSByaW5nYnVm
ZmVyIG9yIGV4ZWNsaXN0cykgYXdheSAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9wZXJmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwppbmRleCAw
Mzg1YWJjZTdiYWEuLmRjM2YzMTcwNzY0YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9wZXJmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKQEAg
LTE5Nyw2ICsxOTcsNyBAQAogCiAjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCIKICNp
bmNsdWRlICJnZW0vaTkxNV9nZW1fcG0uaCIKKyNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgogI2lu
Y2x1ZGUgImd0L2ludGVsX2xyY19yZWcuaCIKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCkBAIC00
MDYsNiArNDA3LDcgQEAgc3RhdGljIHUzMiAqd3JpdGVfY3NfbWlfbHJpKHUzMiAqY3MsIGNvbnN0
IHN0cnVjdCBpOTE1X29hX3JlZyAqcmVnX2RhdGEsIHUzMiBuX3IKIH0KIAogc3RhdGljIHN0cnVj
dCBpOTE1X29hX2NvbmZpZ19ibyogYWxsb2Nfb2FfY29uZmlnX2J1ZmZlcihzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqaTkxNSwKKwkJCQkJCQlzdHJ1Y3QgaTkxNV92bWEgKm5vYV93YWl0LAogCQkJ
CQkJCXN0cnVjdCBpOTE1X29hX2NvbmZpZyAqb2FfY29uZmlnKQogewogCXN0cnVjdCBpOTE1X29h
X2NvbmZpZ19ibyAqb2FfYm87CkBAIC00MzQsNyArNDM2LDcgQEAgc3RhdGljIHN0cnVjdCBpOTE1
X29hX2NvbmZpZ19ibyogYWxsb2Nfb2FfY29uZmlnX2J1ZmZlcihzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZQogCQkJCQkgICAgICBNSV9MT0FEX1JFR0lTVEVSX0lNTV9NQVhfUkVHUykgKiA0OwogCQlj
b25maWdfbGVuZ3RoICs9IG9hX2NvbmZpZy0+ZmxleF9yZWdzX2xlbiAqIDg7CiAJfQotCWNvbmZp
Z19sZW5ndGggKz0gNDsgLyogTUlfQkFUQ0hfQlVGRkVSX0VORCAqLworCWNvbmZpZ19sZW5ndGgg
Kz0gMTI7IC8qIE1JX0JBVENIX0JVRkZFUl9TVEFSVCBpbnRvIG5vYV93YWl0IGxvb3AgKi8KIAlj
b25maWdfbGVuZ3RoID0gQUxJR04oY29uZmlnX2xlbmd0aCwgSTkxNV9HVFRfUEFHRV9TSVpFKTsK
IAogCW9hX2JvLT5ibyA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfc2htZW0oaTkxNSwgY29uZmln
X2xlbmd0aCk7CkBAIC00NTMsNyArNDU1LDEyIEBAIHN0YXRpYyBzdHJ1Y3QgaTkxNV9vYV9jb25m
aWdfYm8qIGFsbG9jX29hX2NvbmZpZ19idWZmZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUKIAlj
cyA9IHdyaXRlX2NzX21pX2xyaShjcywgb2FfY29uZmlnLT5iX2NvdW50ZXJfcmVncywgb2FfY29u
ZmlnLT5iX2NvdW50ZXJfcmVnc19sZW4pOwogCWNzID0gd3JpdGVfY3NfbWlfbHJpKGNzLCBvYV9j
b25maWctPmZsZXhfcmVncywgb2FfY29uZmlnLT5mbGV4X3JlZ3NfbGVuKTsKIAotCSpjcysrID0g
TUlfQkFUQ0hfQlVGRkVSX0VORDsKKworCS8qIEp1bXAgaW50byB0aGUgTk9BIHdhaXQgYnVzeSBs
b29wLiAqLworCSpjcysrID0gKElOVEVMX0dFTihpOTE1KSA8IDggPworCQkgTUlfQkFUQ0hfQlVG
RkVSX1NUQVJUIDogTUlfQkFUQ0hfQlVGRkVSX1NUQVJUX0dFTjgpOworCSpjcysrID0gaTkxNV9n
Z3R0X29mZnNldChub2Ffd2FpdCk7CisJKmNzKysgPSAwOwogCiAJaTkxNV9nZW1fb2JqZWN0X2Zs
dXNoX21hcChvYV9iby0+Ym8pOwogCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAob2FfYm8tPmJv
KTsKQEAgLTUzNSw3ICs1NDIsOSBAQCBpbnQgaTkxNV9wZXJmX2dldF9vYV9jb25maWdfYW5kX2Jv
KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCiAJCX0KIAogCQlpZiAoIW9hX2JvKSB7
Ci0JCQlvYV9ibyA9IGFsbG9jX29hX2NvbmZpZ19idWZmZXIoaTkxNSwgb2FfY29uZmlnKTsKKwkJ
CW9hX2JvID0gYWxsb2Nfb2FfY29uZmlnX2J1ZmZlcihpOTE1LAorCQkJCQkJICAgICAgIHN0cmVh
bS0+bm9hX3dhaXQsCisJCQkJCQkgICAgICAgb2FfY29uZmlnKTsKIAkJCWlmIChJU19FUlIob2Ff
Ym8pKSB7CiAJCQkJZXJyID0gUFRSX0VSUihvYV9ibyk7CiAJCQkJZ290byBlcnI7CkBAIC0xNTAx
LDYgKzE1MTAsMTYgQEAgZnJlZV9vYV9idWZmZXIoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0
cmVhbSkKIAlzdHJlYW0tPm9hX2J1ZmZlci52YWRkciA9IE5VTEw7CiB9CiAKK3N0YXRpYyB2b2lk
CitmcmVlX25vYV93YWl0KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCit7CisJc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBzdHJlYW0tPmRldl9wcml2OworCisJbXV0ZXhf
bG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7CisJaTkxNV92bWFfdW5waW5fYW5kX3JlbGVh
c2UoJnN0cmVhbS0+bm9hX3dhaXQsIDApOworCW11dGV4X3VubG9jaygmaTkxNS0+ZHJtLnN0cnVj
dF9tdXRleCk7Cit9CisKIHN0YXRpYyB2b2lkCiBmcmVlX29hX2NvbmZpZ3Moc3RydWN0IGk5MTVf
cGVyZl9zdHJlYW0gKnN0cmVhbSkKIHsKQEAgLTE1MzAsNiArMTU0OSw3IEBAIHN0YXRpYyB2b2lk
IGk5MTVfb2Ffc3RyZWFtX2Rlc3Ryb3koc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkK
IAltdXRleF91bmxvY2soJmRldl9wcml2LT5kcm0uc3RydWN0X211dGV4KTsKIAogCWZyZWVfb2Ff
YnVmZmVyKHN0cmVhbSk7CisJZnJlZV9ub2Ffd2FpdChzdHJlYW0pOwogCiAJaW50ZWxfdW5jb3Jl
X2ZvcmNld2FrZV9wdXQoJmRldl9wcml2LT51bmNvcmUsIEZPUkNFV0FLRV9BTEwpOwogCWludGVs
X3J1bnRpbWVfcG1fcHV0KCZkZXZfcHJpdi0+cnVudGltZV9wbSwgc3RyZWFtLT53YWtlcmVmKTsK
QEAgLTE3MTYsNiArMTczNiwyMDIgQEAgc3RhdGljIGludCBhbGxvY19vYV9idWZmZXIoc3RydWN0
IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAlyZXR1cm4gcmV0OwogfQogCitzdGF0aWMgdTMy
ICpzYXZlX3Jlc3RvcmVfcmVnaXN0ZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHUz
MiAqY3MsCisJCQkJICBib29sIHNhdmUsIGk5MTVfcmVnX3QgcmVnLCB1MzIgb2Zmc2V0LAorCQkJ
CSAgdTMyIGR3b3JkX2NvdW50KQoreworCXVpbnQzMl90IGQ7CisKKwlmb3IgKGQgPSAwOyBkIDwg
ZHdvcmRfY291bnQ7IGQrKykgeworCQlpZiAoc2F2ZSkgeworCQkJKmNzKysgPSBJTlRFTF9HRU4o
aTkxNSkgPj0gOCA/CisJCQkJTUlfU1RPUkVfUkVHSVNURVJfTUVNX0dFTjggOgorCQkJCU1JX1NU
T1JFX1JFR0lTVEVSX01FTTsKKwkJfSBlbHNlICB7CisJCQkqY3MrKyA9IElOVEVMX0dFTihpOTE1
KSA+PSA4ID8KKwkJCQlNSV9MT0FEX1JFR0lTVEVSX01FTV9HRU44IDoKKwkJCQlNSV9MT0FEX1JF
R0lTVEVSX01FTTsKKwkJfQorCQkqY3MrKyA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KHJlZykgKyA0
ICogZDsKKwkJKmNzKysgPSBpbnRlbF9ndF9zY3JhdGNoX29mZnNldCgmaTkxNS0+Z3QsIG9mZnNl
dCkgKyA0ICogZDsKKwkJKmNzKysgPSAwOworCX0KKworCXJldHVybiBjczsKK30KKworc3RhdGlj
IGludCBhbGxvY19ub2Ffd2FpdChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQorewor
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gc3RyZWFtLT5kZXZfcHJpdjsKKwlzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqYm87CisJc3RydWN0IGk5MTVfdm1hICp2bWE7CisJY29u
c3QgdTY0IGRlbGF5X3RpY2tzID0gMHhmZmZmZmZmZmZmZmZmZmZmIC0KKwkJRElWNjRfVTY0X1JP
VU5EX1VQKAorCQkJYXRvbWljNjRfcmVhZCgmaTkxNS0+cGVyZi5ub2FfcHJvZ3JhbW1pbmdfZGVs
YXkpICoKKwkJCVJVTlRJTUVfSU5GTyhpOTE1KS0+Y3NfdGltZXN0YW1wX2ZyZXF1ZW5jeV9raHos
CisJCQkxMDAwMDAwdWxsKTsKKwl1MzIgKmJhdGNoLCAqdHMwLCAqY3MsICpqdW1wOworCWludCBy
ZXQsIGk7CisJZW51bSB7IFNUQVJUX1RTLCBOT1dfVFMsIERFTFRBX1RTLCBKVU1QX1BSRURJQ0FU
RSwgREVMVEFfVEFSR0VULCBOX0NTX0dQUiB9OworCisJYm8gPSBpOTE1X2dlbV9vYmplY3RfY3Jl
YXRlX2ludGVybmFsKGk5MTUsIDQwOTYpOworCWlmIChJU19FUlIoYm8pKSB7CisJCURSTV9FUlJP
UigiRmFpbGVkIHRvIGFsbG9jYXRlIE5PQSB3YWl0IGJhdGNoYnVmZmVyXG4iKTsKKwkJcmV0dXJu
IFBUUl9FUlIoYm8pOworCX0KKworCS8qCisJICogV2UgcGluIGluIEdHVFQgYmVjYXVzZSB3ZSBq
dW1wIGludG8gdGhpcyBidWZmZXIgbm93IGJlY2F1c2UKKwkgKiBtdWx0aXBsZSBPQSBjb25maWcg
Qk9zIHdpbGwgaGF2ZSBhIGp1bXAgdG8gdGhpcyBhZGRyZXNzIGFuZCBpdAorCSAqIG5lZWRzIHRv
IGJlIGZpeGVkIGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgdGhlIGk5MTUvcGVyZiBzdHJlYW0uCisJ
ICovCisJdm1hID0gaTkxNV9nZW1fb2JqZWN0X2dndHRfcGluKGJvLCBOVUxMLCAwLCA0MDk2LCAw
KTsKKwlpZiAoSVNfRVJSKHZtYSkpIHsKKwkJcmV0ID0gUFRSX0VSUih2bWEpOworCQlnb3RvIGVy
cl91bnJlZjsKKwl9CisKKwliYXRjaCA9IGNzID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9tYXAoYm8s
IEk5MTVfTUFQX1dCKTsKKwlpZiAoSVNfRVJSKGJhdGNoKSkgeworCQlyZXQgPSBQVFJfRVJSKGJh
dGNoKTsKKwkJZ290byBlcnJfdW5waW47CisJfQorCisJLyogU2F2ZSByZWdpc3RlcnMuICovCisJ
Zm9yIChpID0gMDsgaSA8IE5fQ1NfR1BSOyBpKyspIHsKKwkJY3MgPSBzYXZlX3Jlc3RvcmVfcmVn
aXN0ZXIoCisJCQlpOTE1LCBjcywgdHJ1ZSAvKiBzYXZlICovLCBIU1dfQ1NfR1BSKGkpLAorCQkJ
SU5URUxfR1RfU0NSQVRDSF9GSUVMRF9QRVJGX0NTX0dQUiArIDggKiBpLCAyKTsKKwl9CisJY3Mg
PSBzYXZlX3Jlc3RvcmVfcmVnaXN0ZXIoCisJCWk5MTUsIGNzLCB0cnVlIC8qIHNhdmUgKi8sIE1J
X1BSRURJQ0FURV9SRVNVTFRfMSwKKwkJSU5URUxfR1RfU0NSQVRDSF9GSUVMRF9QRVJGX1BSRURJ
Q0FURV9SRVNVTFRfMSwgMSk7CisKKwkvKiBGaXJzdCB0aW1lc3RhbXAgc25hcHNob3QgbG9jYXRp
b24uICovCisJdHMwID0gY3M7CisKKwkvKgorCSAqIEluaXRpYWwgc25hcHNob3Qgb2YgdGhlIHRp
bWVzdGFtcCByZWdpc3RlciB0byBpbXBsZW1lbnQgdGhlIHdhaXQuCisJICogV2Ugd29yayB3aXRo
IDMyYiB2YWx1ZXMsIHNvIGNsZWFyIG91dCB0aGUgdG9wIDMyYiBiaXRzIG9mIHRoZQorCSAqIHJl
Z2lzdGVyIGJlY2F1c2UgdGhlIEFMVSB3b3JrcyA2NGJpdHMuCisJICovCisJKmNzKysgPSBNSV9M
T0FEX1JFR0lTVEVSX0lNTSgxKTsKKwkqY3MrKyA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KEhTV19D
U19HUFIoU1RBUlRfVFMpKSArIDQ7CisJKmNzKysgPSAwOworCSpjcysrID0gTUlfTE9BRF9SRUdJ
U1RFUl9SRUcgfCAoMyAtIDIpOworCSpjcysrID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoUklOR19U
SU1FU1RBTVAoUkVOREVSX1JJTkdfQkFTRSkpOworCSpjcysrID0gaTkxNV9tbWlvX3JlZ19vZmZz
ZXQoSFNXX0NTX0dQUihTVEFSVF9UUykpOworCisJLyoKKwkgKiBUaGlzIGlzIHRoZSBsb2NhdGlv
biB3ZSdyZSBnb2luZyB0byBqdW1wIGJhY2sgaW50byB1bnRpbCB0aGUKKwkgKiByZXF1aXJlZCBh
bW91bnQgb2YgdGltZSBoYXMgcGFzc2VkLgorCSAqLworCWp1bXAgPSBjczsKKworCS8qCisJICog
VGFrZSBhbm90aGVyIHNuYXBzaG90IG9mIHRoZSB0aW1lc3RhbXAgcmVnaXN0ZXIuIFRha2UgY2Fy
ZSB0byBjbGVhcgorCSAqIHVwIHRoZSB0b3AgMzJiaXRzIG9mIENTX0dQUigxKSBhcyB3ZSdyZSB1
c2luZyBpdCBmb3Igb3RoZXIKKwkgKiBvcGVyYXRpb25zIGJlbG93LgorCSAqLworCSpjcysrID0g
TUlfTE9BRF9SRUdJU1RFUl9JTU0oMSk7CisJKmNzKysgPSBpOTE1X21taW9fcmVnX29mZnNldChI
U1dfQ1NfR1BSKE5PV19UUykpICsgNDsKKwkqY3MrKyA9IDA7CisJKmNzKysgPSBNSV9MT0FEX1JF
R0lTVEVSX1JFRyB8ICgzIC0gMik7CisJKmNzKysgPSBpOTE1X21taW9fcmVnX29mZnNldChSSU5H
X1RJTUVTVEFNUChSRU5ERVJfUklOR19CQVNFKSk7CisJKmNzKysgPSBpOTE1X21taW9fcmVnX29m
ZnNldChIU1dfQ1NfR1BSKE5PV19UUykpOworCisJLyoKKwkgKiBEbyBhIGRpZmYgYmV0d2VlbiB0
aGUgMiB0aW1lc3RhbXBzIGFuZCBzdG9yZSB0aGUgcmVzdWx0IGJhY2sgaW50bworCSAqIENTX0dQ
UigxKS4KKwkgKi8KKwkqY3MrKyA9IE1JX01BVEgoNSk7CisJKmNzKysgPSBNSV9BTFVfT1AoTUlf
QUxVX09QX0xPQUQsIE1JX0FMVV9TUkNfU1JDQSwgTUlfQUxVX1NSQ19SRUcoTk9XX1RTKSk7CisJ
KmNzKysgPSBNSV9BTFVfT1AoTUlfQUxVX09QX0xPQUQsIE1JX0FMVV9TUkNfU1JDQiwgTUlfQUxV
X1NSQ19SRUcoU1RBUlRfVFMpKTsKKwkqY3MrKyA9IE1JX0FMVV9PUChNSV9BTFVfT1BfU1VCLCAw
LCAwKTsKKwkqY3MrKyA9IE1JX0FMVV9PUChNSV9BTFVfT1BfU1RPUkUsIE1JX0FMVV9TUkNfUkVH
KERFTFRBX1RTKSwgTUlfQUxVX1NSQ19BQ0NVKTsKKwkqY3MrKyA9IE1JX0FMVV9PUChNSV9BTFVf
T1BfU1RPUkUsIE1JX0FMVV9TUkNfUkVHKEpVTVBfUFJFRElDQVRFKSwgTUlfQUxVX1NSQ19DRik7
CisKKwkvKgorCSAqIFRyYW5zZmVyIHRoZSBjYXJyeSBmbGFnIChzZXQgdG8gMSBpZiB0czEgPCB0
czAsIG1lYW5pbmcgdGhlCisJICogdGltZXN0YW1wIGhhdmUgcm9sbGVkIG92ZXIgdGhlIDMyYml0
cykgaW50byB0aGUgcHJlZGljYXRlIHJlZ2lzdGVyCisJICogdG8gYmUgdXNlZCBmb3IgdGhlIHBy
ZWRpY2F0ZWQganVtcC4KKwkgKi8KKwkqY3MrKyA9IE1JX0xPQURfUkVHSVNURVJfUkVHIHwgKDMg
LSAyKTsKKwkqY3MrKyA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KEhTV19DU19HUFIoSlVNUF9QUkVE
SUNBVEUpKTsKKwkqY3MrKyA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KE1JX1BSRURJQ0FURV9SRVNV
TFRfMSk7CisKKwkvKiBSZXN0YXJ0IGZyb20gdGhlIGJlZ2lubmluZyBpZiB3ZSBoYWQgdGltZXN0
YW1wcyByb2xsIG92ZXIuICovCisJKmNzKysgPSAoSU5URUxfR0VOKGk5MTUpIDwgOCA/CisJCSBN
SV9CQVRDSF9CVUZGRVJfU1RBUlQgOiBNSV9CQVRDSF9CVUZGRVJfU1RBUlRfR0VOOCkgfAorCQlN
SV9CQVRDSF9QUkVESUNBVEU7CisJKmNzKysgPSBpOTE1X2dndHRfb2Zmc2V0KHZtYSkgKyAodHMw
IC0gYmF0Y2gpICogNDsKKwkqY3MrKyA9IDA7CisKKwkvKgorCSAqIE5vdyBhZGQgdGhlIGRpZmYg
YmV0d2VlbiB0byBwcmV2aW91cyB0aW1lc3RhbXBzIGFuZCBhZGQgaXQgdG8gOgorCSAqICAgICAg
KCgoMSAqIDw8IDY0KSAtIDEpIC0gZGVsYXlfbnMpCisJICoKKwkgKiBXaGVuIHRoZSBDYXJyeSBG
bGFnIGNvbnRhaW5zIDEgdGhpcyBtZWFucyB0aGUgZWxhcHNlZCB0aW1lIGlzCisJICogbG9uZ2Vy
IHRoYW4gdGhlIGV4cGVjdGVkIGRlbGF5LCBhbmQgd2UgY2FuIGV4aXQgdGhlIHdhaXQgbG9vcC4K
KwkgKi8KKwkqY3MrKyA9IE1JX0xPQURfUkVHSVNURVJfSU1NKDIpOworCSpjcysrID0gaTkxNV9t
bWlvX3JlZ19vZmZzZXQoSFNXX0NTX0dQUihERUxUQV9UQVJHRVQpKTsKKwkqY3MrKyA9IGxvd2Vy
XzMyX2JpdHMoZGVsYXlfdGlja3MpOworCSpjcysrID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoSFNX
X0NTX0dQUihERUxUQV9UQVJHRVQpKSArIDQ7CisJKmNzKysgPSB1cHBlcl8zMl9iaXRzKGRlbGF5
X3RpY2tzKTsKKworCSpjcysrID0gTUlfTUFUSCg0KTsKKwkqY3MrKyA9IE1JX0FMVV9PUChNSV9B
TFVfT1BfTE9BRCwgTUlfQUxVX1NSQ19TUkNBLCBNSV9BTFVfU1JDX1JFRyhERUxUQV9UUykpOwor
CSpjcysrID0gTUlfQUxVX09QKE1JX0FMVV9PUF9MT0FELCBNSV9BTFVfU1JDX1NSQ0IsIE1JX0FM
VV9TUkNfUkVHKERFTFRBX1RBUkdFVCkpOworCSpjcysrID0gTUlfQUxVX09QKE1JX0FMVV9PUF9B
REQsIDAsIDApOworCSpjcysrID0gTUlfQUxVX09QKE1JX0FMVV9PUF9TVE9SRUlOViwgTUlfQUxV
X1NSQ19SRUcoSlVNUF9QUkVESUNBVEUpLCBNSV9BTFVfU1JDX0NGKTsKKworCS8qCisJICogVHJh
bnNmZXIgdGhlIHJlc3VsdCBpbnRvIHRoZSBwcmVkaWNhdGUgcmVnaXN0ZXIgdG8gYmUgdXNlZCBm
b3IgdGhlCisJICogcHJlZGljYXRlZCBqdW1wLgorCSAqLworCSpjcysrID0gTUlfTE9BRF9SRUdJ
U1RFUl9SRUcgfCAoMyAtIDIpOworCSpjcysrID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoSFNXX0NT
X0dQUihKVU1QX1BSRURJQ0FURSkpOworCSpjcysrID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoTUlf
UFJFRElDQVRFX1JFU1VMVF8xKTsKKworCS8qIFByZWRpY2F0ZSB0aGUganVtcC4gICovCisJKmNz
KysgPSAoSU5URUxfR0VOKGk5MTUpIDwgOCA/CisJCSBNSV9CQVRDSF9CVUZGRVJfU1RBUlQgOiBN
SV9CQVRDSF9CVUZGRVJfU1RBUlRfR0VOOCkgfAorCQlNSV9CQVRDSF9QUkVESUNBVEU7CisJKmNz
KysgPSBpOTE1X2dndHRfb2Zmc2V0KHZtYSkgKyAoanVtcCAtIGJhdGNoKSAqIDQ7CisJKmNzKysg
PSAwOworCisJLyogUmVzdG9yZSByZWdpc3RlcnMuICovCisJZm9yIChpID0gMDsgaSA8IE5fQ1Nf
R1BSOyBpKyspIHsKKwkJY3MgPSBzYXZlX3Jlc3RvcmVfcmVnaXN0ZXIoCisJCQlpOTE1LCBjcywg
ZmFsc2UgLyogc2F2ZSAqLywgSFNXX0NTX0dQUihpKSwKKwkJCUlOVEVMX0dUX1NDUkFUQ0hfRklF
TERfUEVSRl9DU19HUFIgKyA4ICogaSwgMik7CisJfQorCWNzID0gc2F2ZV9yZXN0b3JlX3JlZ2lz
dGVyKAorCQlpOTE1LCBjcywgZmFsc2UgLyogc2F2ZSAqLywgTUlfUFJFRElDQVRFX1JFU1VMVF8x
LAorCQlJTlRFTF9HVF9TQ1JBVENIX0ZJRUxEX1BFUkZfUFJFRElDQVRFX1JFU1VMVF8xLCAxKTsK
KworCS8qIEFuZCByZXR1cm4gdG8gdGhlIHJpbmcuICovCisJKmNzKysgPSBNSV9CQVRDSF9CVUZG
RVJfRU5EOworCisJR0VNX0JVR19PTigoY3MgLSBiYXRjaCkgPiAoUEFHRV9TSVpFIC8gc2l6ZW9m
KCpiYXRjaCkpKTsKKworCWk5MTVfZ2VtX29iamVjdF9mbHVzaF9tYXAoYm8pOworCWk5MTVfZ2Vt
X29iamVjdF91bnBpbl9tYXAoYm8pOworCisJc3RyZWFtLT5ub2Ffd2FpdCA9IHZtYTsKKworCXJl
dHVybiAwOworCitlcnJfdW5waW46CisJX19pOTE1X3ZtYV91bnBpbih2bWEpOworCitlcnJfdW5y
ZWY6CisJaTkxNV9nZW1fb2JqZWN0X3B1dChibyk7CisKKwlyZXR1cm4gcmV0OworfQorCiBzdGF0
aWMgdm9pZCBjb25maWdfb2FfcmVncyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYs
CiAJCQkgICBjb25zdCBzdHJ1Y3QgaTkxNV9vYV9yZWcgKnJlZ3MsCiAJCQkgICB1MzIgbl9yZWdz
KQpAQCAtMjM4NCw2ICsyNjAwLDEyIEBAIHN0YXRpYyBpbnQgaTkxNV9vYV9zdHJlYW1faW5pdChz
dHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAogCQl9CiAJfQogCisJcmV0ID0gYWxsb2Nf
bm9hX3dhaXQoc3RyZWFtKTsKKwlpZiAocmV0KSB7CisJCURSTV9ERUJVRygiVW5hYmxlIHRvIGFs
bG9jYXRlIE5PQSB3YWl0IGJhdGNoIGJ1ZmZlclxuIik7CisJCWdvdG8gZXJyX25vYV93YWl0X2Fs
bG9jOworCX0KKwogCXJldCA9IGk5MTVfcGVyZl9nZXRfb2FfY29uZmlnKGRldl9wcml2LCBwcm9w
cy0+bWV0cmljc19zZXQsCiAJCQkJICAgICAgJnN0cmVhbS0+b2FfY29uZmlnKTsKIAlpZiAocmV0
KSB7CkBAIC0yNDUwLDYgKzI2NzIsOSBAQCBzdGF0aWMgaW50IGk5MTVfb2Ffc3RyZWFtX2luaXQo
c3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKIAlpbnRlbF9ydW50aW1lX3BtX3B1dCgm
ZGV2X3ByaXYtPnJ1bnRpbWVfcG0sIHN0cmVhbS0+d2FrZXJlZik7CiAKIGVycl9jb25maWc6CisJ
ZnJlZV9ub2Ffd2FpdChzdHJlYW0pOworCitlcnJfbm9hX3dhaXRfYWxsb2M6CiAJaWYgKHN0cmVh
bS0+Y3R4KQogCQlvYV9wdXRfcmVuZGVyX2N0eF9pZChzdHJlYW0pOwogCkBAIC0zODM1LDYgKzQw
NjAsOSBAQCB2b2lkIGk5MTVfcGVyZl9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdikKIAkJcmF0ZWxpbWl0X3NldF9mbGFncygmZGV2X3ByaXYtPnBlcmYuc3B1cmlvdXNfcmVw
b3J0X3JzLAogCQkJCSAgICBSQVRFTElNSVRfTVNHX09OX1JFTEVBU0UpOwogCisJCWF0b21pYzY0
X3NldCgmZGV2X3ByaXYtPnBlcmYubm9hX3Byb2dyYW1taW5nX2RlbGF5LAorCQkJICAgICA1MDAg
KiAxMDAwIC8qIDUwMHVzICovKTsKKwogCQlkZXZfcHJpdi0+cGVyZi5pbml0aWFsaXplZCA9IHRy
dWU7CiAJfQogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKaW5kZXggMDJlMWVmMTBjNDdlLi5jYWMw
NDNiYzlmZjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaApAQCAtNTQ1LDcgKzU0NSw5IEBAIHN0
YXRpYyBpbmxpbmUgYm9vbCBpOTE1X21taW9fcmVnX3ZhbGlkKGk5MTVfcmVnX3QgcmVnKQogI2Rl
ZmluZSBNSV9QUkVESUNBVEVfU1JDMF9VRFcJX01NSU8oMHgyNDAwICsgNCkKICNkZWZpbmUgTUlf
UFJFRElDQVRFX1NSQzEJX01NSU8oMHgyNDA4KQogI2RlZmluZSBNSV9QUkVESUNBVEVfU1JDMV9V
RFcJX01NSU8oMHgyNDA4ICsgNCkKLQorI2RlZmluZSBNSV9QUkVESUNBVEVfREFUQSAgICAgICBf
TU1JTygweDI0MTApCisjZGVmaW5lIE1JX1BSRURJQ0FURV9SRVNVTFQgICAgIF9NTUlPKDB4MjQx
OCkKKyNkZWZpbmUgTUlfUFJFRElDQVRFX1JFU1VMVF8xICAgX01NSU8oMHgyNDFjKQogI2RlZmlu
ZSBNSV9QUkVESUNBVEVfUkVTVUxUXzIJX01NSU8oMHgyMjE0KQogI2RlZmluZSAgTE9XRVJfU0xJ
Q0VfRU5BQkxFRAkoMSA8PCAwKQogI2RlZmluZSAgTE9XRVJfU0xJQ0VfRElTQUJMRUQJKDAgPDwg
MCkKLS0gCjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwt
Z2Z4

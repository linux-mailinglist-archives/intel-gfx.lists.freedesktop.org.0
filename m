Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 461001045C3
	for <lists+intel-gfx@lfdr.de>; Wed, 20 Nov 2019 22:28:29 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7DECC6E8CB;
	Wed, 20 Nov 2019 21:28:27 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F07D96E8CB
 for <intel-gfx@lists.freedesktop.org>; Wed, 20 Nov 2019 21:28:25 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19278049-1500050 
 for multiple; Wed, 20 Nov 2019 21:28:21 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 20 Nov 2019 21:28:18 +0000
Message-Id: <20191120212818.72858-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191120155402.3870922-1-chris@chris-wilson.co.uk>
References: <20191120155402.3870922-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/selftests: Always hold a reference on
 a waited upon request
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2hlbmV2ZXIgd2Ugd2FpdCBvbiBhIHJlcXVlc3QsIG1ha2Ugc3VyZSB3ZSBhY3R1YWxseSBob2xk
IGEgcmVmZXJlbmNlIHRvCml0IGFuZCB0aGF0IGl0IGNhbm5vdCBiZSByZXRpcmVkL2ZyZWVkIG9u
IGFub3RoZXIgQ1BVIQoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13
aWxzb24uY28udWs+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMg
fCA4NyArKysrKysrKysrKysrKysrKysrLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDY2IGluc2Vy
dGlvbnMoKyksIDIxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3NlbGZ0ZXN0X2xyYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rf
bHJjLmMKaW5kZXggZjNiMDYxMGQxZjEwLi5mMWIzOGYzOWU3YTcgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xyYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3NlbGZ0ZXN0X2xyYy5jCkBAIC03NDgsMTUgKzc0OCwxOSBAQCBzdGF0aWMgaW50IGxp
dmVfYnVzeXdhaXRfcHJlZW1wdCh2b2lkICphcmcpCiAJCSpjcysrID0gMDsKIAogCQlpbnRlbF9y
aW5nX2FkdmFuY2UobG8sIGNzKTsKKworCQlpOTE1X3JlcXVlc3RfZ2V0KGxvKTsKIAkJaTkxNV9y
ZXF1ZXN0X2FkZChsbyk7CiAKIAkJaWYgKHdhaXRfZm9yKFJFQURfT05DRSgqbWFwKSwgMTApKSB7
CisJCQlpOTE1X3JlcXVlc3RfcHV0KGxvKTsKIAkJCWVyciA9IC1FVElNRURPVVQ7CiAJCQlnb3Rv
IGVycl92bWE7CiAJCX0KIAogCQkvKiBMb3cgcHJpb3JpdHkgcmVxdWVzdCBzaG91bGQgYmUgYnVz
eXdhaXRpbmcgbm93ICovCiAJCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChsbywgMCwgMSkgIT0gLUVU
SU1FKSB7CisJCQlpOTE1X3JlcXVlc3RfcHV0KGxvKTsKIAkJCXByX2VycigiJXM6IEJ1c3l3YWl0
aW5nIHJlcXVlc3QgZGlkIG5vdCFcbiIsCiAJCQkgICAgICAgZW5naW5lLT5uYW1lKTsKIAkJCWVy
ciA9IC1FSU87CkBAIC03NjYsNiArNzcwLDcgQEAgc3RhdGljIGludCBsaXZlX2J1c3l3YWl0X3By
ZWVtcHQodm9pZCAqYXJnKQogCQloaSA9IGlndF9yZXF1ZXN0X2FsbG9jKGN0eF9oaSwgZW5naW5l
KTsKIAkJaWYgKElTX0VSUihoaSkpIHsKIAkJCWVyciA9IFBUUl9FUlIoaGkpOworCQkJaTkxNV9y
ZXF1ZXN0X3B1dChsbyk7CiAJCQlnb3RvIGVycl92bWE7CiAJCX0KIApAQCAtNzczLDYgKzc3OCw3
IEBAIHN0YXRpYyBpbnQgbGl2ZV9idXN5d2FpdF9wcmVlbXB0KHZvaWQgKmFyZykKIAkJaWYgKElT
X0VSUihjcykpIHsKIAkJCWVyciA9IFBUUl9FUlIoY3MpOwogCQkJaTkxNV9yZXF1ZXN0X2FkZCho
aSk7CisJCQlpOTE1X3JlcXVlc3RfcHV0KGxvKTsKIAkJCWdvdG8gZXJyX3ZtYTsKIAkJfQogCkBA
IC03OTMsMTEgKzc5OSwxMyBAQCBzdGF0aWMgaW50IGxpdmVfYnVzeXdhaXRfcHJlZW1wdCh2b2lk
ICphcmcpCiAJCQlpbnRlbF9lbmdpbmVfZHVtcChlbmdpbmUsICZwLCAiJXNcbiIsIGVuZ2luZS0+
bmFtZSk7CiAJCQlHRU1fVFJBQ0VfRFVNUCgpOwogCisJCQlpOTE1X3JlcXVlc3RfcHV0KGxvKTsK
IAkJCWludGVsX2d0X3NldF93ZWRnZWQoZ3QpOwogCQkJZXJyID0gLUVJTzsKIAkJCWdvdG8gZXJy
X3ZtYTsKIAkJfQogCQlHRU1fQlVHX09OKFJFQURfT05DRSgqbWFwKSk7CisJCWk5MTVfcmVxdWVz
dF9wdXQobG8pOwogCiAJCWlmIChpZ3RfbGl2ZV90ZXN0X2VuZCgmdCkpIHsKIAkJCWVyciA9IC1F
SU87CkBAIC0xNjY1LDYgKzE2NzMsNyBAQCBzdGF0aWMgaW50IGxpdmVfc3VwcHJlc3Nfd2FpdF9w
cmVlbXB0KHZvaWQgKmFyZykKIHsKIAlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gYXJnOwogCXN0cnVj
dCBwcmVlbXB0X2NsaWVudCBjbGllbnRbNF07CisJc3RydWN0IGk5MTVfcmVxdWVzdCAqcnFbQVJS
QVlfU0laRShjbGllbnQpXSA9IHt9OwogCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZTsK
IAllbnVtIGludGVsX2VuZ2luZV9pZCBpZDsKIAlpbnQgZXJyID0gLUVOT01FTTsKQEAgLTE2OTgs
NyArMTcwNyw2IEBAIHN0YXRpYyBpbnQgbGl2ZV9zdXBwcmVzc193YWl0X3ByZWVtcHQodm9pZCAq
YXJnKQogCQkJY29udGludWU7CiAKIAkJZm9yIChkZXB0aCA9IDA7IGRlcHRoIDwgQVJSQVlfU0la
RShjbGllbnQpOyBkZXB0aCsrKSB7Ci0JCQlzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycVtBUlJBWV9T
SVpFKGNsaWVudCldOwogCQkJc3RydWN0IGk5MTVfcmVxdWVzdCAqZHVtbXk7CiAKIAkJCWVuZ2lu
ZS0+ZXhlY2xpc3RzLnByZWVtcHRfaGFuZy5jb3VudCA9IDA7CkBAIC0xNzA4LDE4ICsxNzE2LDIy
IEBAIHN0YXRpYyBpbnQgbGl2ZV9zdXBwcmVzc193YWl0X3ByZWVtcHQodm9pZCAqYXJnKQogCQkJ
CWdvdG8gZXJyX2NsaWVudF8zOwogCiAJCQlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShjbGll
bnQpOyBpKyspIHsKLQkJCQlycVtpXSA9IHNwaW5uZXJfY3JlYXRlX3JlcXVlc3QoJmNsaWVudFtp
XS5zcGluLAotCQkJCQkJCSAgICAgICBjbGllbnRbaV0uY3R4LCBlbmdpbmUsCi0JCQkJCQkJICAg
ICAgIE1JX05PT1ApOwotCQkJCWlmIChJU19FUlIocnFbaV0pKSB7Ci0JCQkJCWVyciA9IFBUUl9F
UlIocnFbaV0pOworCQkJCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnRoaXM7CisKKwkJCQl0aGlzID0g
c3Bpbm5lcl9jcmVhdGVfcmVxdWVzdCgmY2xpZW50W2ldLnNwaW4sCisJCQkJCQkJICAgICAgY2xp
ZW50W2ldLmN0eCwgZW5naW5lLAorCQkJCQkJCSAgICAgIE1JX05PT1ApOworCQkJCWlmIChJU19F
UlIodGhpcykpIHsKKwkJCQkJZXJyID0gUFRSX0VSUih0aGlzKTsKIAkJCQkJZ290byBlcnJfd2Vk
Z2VkOwogCQkJCX0KIAogCQkJCS8qIERpc2FibGUgTkVXQ0xJRU5UIHByb21vdGlvbiAqLwotCQkJ
CV9faTkxNV9hY3RpdmVfZmVuY2Vfc2V0KCZpOTE1X3JlcXVlc3RfdGltZWxpbmUocnFbaV0pLT5s
YXN0X3JlcXVlc3QsCisJCQkJX19pOTE1X2FjdGl2ZV9mZW5jZV9zZXQoJmk5MTVfcmVxdWVzdF90
aW1lbGluZSh0aGlzKS0+bGFzdF9yZXF1ZXN0LAogCQkJCQkJCSZkdW1teS0+ZmVuY2UpOwotCQkJ
CWk5MTVfcmVxdWVzdF9hZGQocnFbaV0pOworCisJCQkJcnFbaV0gPSBpOTE1X3JlcXVlc3RfZ2V0
KHRoaXMpOworCQkJCWk5MTVfcmVxdWVzdF9hZGQodGhpcyk7CiAJCQl9CiAKIAkJCWR1bW15X3Jl
cXVlc3RfZnJlZShkdW1teSk7CkBAIC0xNzQwLDggKzE3NTIsMTEgQEAgc3RhdGljIGludCBsaXZl
X3N1cHByZXNzX3dhaXRfcHJlZW1wdCh2b2lkICphcmcpCiAJCQkJZ290byBlcnJfd2VkZ2VkOwog
CQkJfQogCi0JCQlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShjbGllbnQpOyBpKyspCisJCQlm
b3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShjbGllbnQpOyBpKyspIHsKIAkJCQlpZ3Rfc3Bpbm5l
cl9lbmQoJmNsaWVudFtpXS5zcGluKTsKKwkJCQlpOTE1X3JlcXVlc3RfcHV0KHJxW2ldKTsKKwkJ
CQlycVtpXSA9IE5VTEw7CisJCQl9CiAKIAkJCWlmIChpZ3RfZmx1c2hfdGVzdChndC0+aTkxNSkp
CiAJCQkJZ290byBlcnJfd2VkZ2VkOwpAQCAtMTc2OSw4ICsxNzg0LDEwIEBAIHN0YXRpYyBpbnQg
bGl2ZV9zdXBwcmVzc193YWl0X3ByZWVtcHQodm9pZCAqYXJnKQogCXJldHVybiBlcnI7CiAKIGVy
cl93ZWRnZWQ6Ci0JZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUoY2xpZW50KTsgaSsrKQorCWZv
ciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGNsaWVudCk7IGkrKykgewogCQlpZ3Rfc3Bpbm5lcl9l
bmQoJmNsaWVudFtpXS5zcGluKTsKKwkJaTkxNV9yZXF1ZXN0X3B1dChycVtpXSk7CisJfQogCWlu
dGVsX2d0X3NldF93ZWRnZWQoZ3QpOwogCWVyciA9IC1FSU87CiAJZ290byBlcnJfY2xpZW50XzM7
CkBAIC0xODE1LDYgKzE4MzIsOCBAQCBzdGF0aWMgaW50IGxpdmVfY2hhaW5fcHJlZW1wdCh2b2lk
ICphcmcpCiAJCQkJCSAgICBNSV9BUkJfQ0hFQ0spOwogCQlpZiAoSVNfRVJSKHJxKSkKIAkJCWdv
dG8gZXJyX3dlZGdlZDsKKworCQlpOTE1X3JlcXVlc3RfZ2V0KHJxKTsKIAkJaTkxNV9yZXF1ZXN0
X2FkZChycSk7CiAKIAkJcmluZ19zaXplID0gcnEtPndhX3RhaWwgLSBycS0+aGVhZDsKQEAgLTE4
MjcsOCArMTg0NiwxMCBAQCBzdGF0aWMgaW50IGxpdmVfY2hhaW5fcHJlZW1wdCh2b2lkICphcmcp
CiAJCWlndF9zcGlubmVyX2VuZCgmbG8uc3Bpbik7CiAJCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChy
cSwgMCwgSFogLyAyKSA8IDApIHsKIAkJCXByX2VycigiVGltZWQgb3V0IHdhaXRpbmcgdG8gZmx1
c2ggJXNcbiIsIGVuZ2luZS0+bmFtZSk7CisJCQlpOTE1X3JlcXVlc3RfcHV0KHJxKTsKIAkJCWdv
dG8gZXJyX3dlZGdlZDsKIAkJfQorCQlpOTE1X3JlcXVlc3RfcHV0KHJxKTsKIAogCQlpZiAoaWd0
X2xpdmVfdGVzdF9iZWdpbigmdCwgZ3QtPmk5MTUsIF9fZnVuY19fLCBlbmdpbmUtPm5hbWUpKSB7
CiAJCQllcnIgPSAtRUlPOwpAQCAtMTg2Miw2ICsxODgzLDggQEAgc3RhdGljIGludCBsaXZlX2No
YWluX3ByZWVtcHQodm9pZCAqYXJnKQogCQkJcnEgPSBpZ3RfcmVxdWVzdF9hbGxvYyhoaS5jdHgs
IGVuZ2luZSk7CiAJCQlpZiAoSVNfRVJSKHJxKSkKIAkJCQlnb3RvIGVycl93ZWRnZWQ7CisKKwkJ
CWk5MTVfcmVxdWVzdF9nZXQocnEpOwogCQkJaTkxNV9yZXF1ZXN0X2FkZChycSk7CiAJCQllbmdp
bmUtPnNjaGVkdWxlKHJxLCAmYXR0cik7CiAKQEAgLTE4NzQsMTQgKzE4OTcsMTkgQEAgc3RhdGlj
IGludCBsaXZlX2NoYWluX3ByZWVtcHQodm9pZCAqYXJnKQogCQkJCSAgICAgICBjb3VudCk7CiAJ
CQkJaW50ZWxfZW5naW5lX2R1bXAoZW5naW5lLCAmcCwKIAkJCQkJCSAgIiVzXG4iLCBlbmdpbmUt
Pm5hbWUpOworCQkJCWk5MTVfcmVxdWVzdF9wdXQocnEpOwogCQkJCWdvdG8gZXJyX3dlZGdlZDsK
IAkJCX0KIAkJCWlndF9zcGlubmVyX2VuZCgmbG8uc3Bpbik7CisJCQlpOTE1X3JlcXVlc3RfcHV0
KHJxKTsKIAogCQkJcnEgPSBpZ3RfcmVxdWVzdF9hbGxvYyhsby5jdHgsIGVuZ2luZSk7CiAJCQlp
ZiAoSVNfRVJSKHJxKSkKIAkJCQlnb3RvIGVycl93ZWRnZWQ7CisKKwkJCWk5MTVfcmVxdWVzdF9n
ZXQocnEpOwogCQkJaTkxNV9yZXF1ZXN0X2FkZChycSk7CisKIAkJCWlmIChpOTE1X3JlcXVlc3Rf
d2FpdChycSwgMCwgSFogLyA1KSA8IDApIHsKIAkJCQlzdHJ1Y3QgZHJtX3ByaW50ZXIgcCA9CiAJ
CQkJCWRybV9pbmZvX3ByaW50ZXIoZ3QtPmk5MTUtPmRybS5kZXYpOwpAQCAtMTg5MCw4ICsxOTE4
LDExIEBAIHN0YXRpYyBpbnQgbGl2ZV9jaGFpbl9wcmVlbXB0KHZvaWQgKmFyZykKIAkJCQkgICAg
ICAgY291bnQpOwogCQkJCWludGVsX2VuZ2luZV9kdW1wKGVuZ2luZSwgJnAsCiAJCQkJCQkgICIl
c1xuIiwgZW5naW5lLT5uYW1lKTsKKworCQkJCWk5MTVfcmVxdWVzdF9wdXQocnEpOwogCQkJCWdv
dG8gZXJyX3dlZGdlZDsKIAkJCX0KKwkJCWk5MTVfcmVxdWVzdF9wdXQocnEpOwogCQl9CiAKIAkJ
aWYgKGlndF9saXZlX3Rlc3RfZW5kKCZ0KSkgewpAQCAtMjU4Niw3ICsyNjE3LDcgQEAgc3RhdGlj
IGludCBub3BfdmlydHVhbF9lbmdpbmUoc3RydWN0IGludGVsX2d0ICpndCwKICNkZWZpbmUgQ0hB
SU4gQklUKDApCiB7CiAJSUdUX1RJTUVPVVQoZW5kX3RpbWUpOwotCXN0cnVjdCBpOTE1X3JlcXVl
c3QgKnJlcXVlc3RbMTZdOworCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJlcXVlc3RbMTZdID0ge307
CiAJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eFsxNl07CiAJc3RydWN0IGludGVsX2NvbnRl
eHQgKnZlWzE2XTsKIAl1bnNpZ25lZCBsb25nIG4sIHByaW1lLCBuYzsKQEAgLTI2MzIsMjcgKzI2
NjMsMzUgQEAgc3RhdGljIGludCBub3BfdmlydHVhbF9lbmdpbmUoc3RydWN0IGludGVsX2d0ICpn
dCwKIAkJaWYgKGZsYWdzICYgQ0hBSU4pIHsKIAkJCWZvciAobmMgPSAwOyBuYyA8IG5jdHg7IG5j
KyspIHsKIAkJCQlmb3IgKG4gPSAwOyBuIDwgcHJpbWU7IG4rKykgewotCQkJCQlyZXF1ZXN0W25j
XSA9Ci0JCQkJCQlpOTE1X3JlcXVlc3RfY3JlYXRlKHZlW25jXSk7Ci0JCQkJCWlmIChJU19FUlIo
cmVxdWVzdFtuY10pKSB7Ci0JCQkJCQllcnIgPSBQVFJfRVJSKHJlcXVlc3RbbmNdKTsKKwkJCQkJ
c3RydWN0IGk5MTVfcmVxdWVzdCAqcnE7CisKKwkJCQkJcnEgPSBpOTE1X3JlcXVlc3RfY3JlYXRl
KHZlW25jXSk7CisJCQkJCWlmIChJU19FUlIocnEpKSB7CisJCQkJCQllcnIgPSBQVFJfRVJSKHJx
KTsKIAkJCQkJCWdvdG8gb3V0OwogCQkJCQl9CiAKLQkJCQkJaTkxNV9yZXF1ZXN0X2FkZChyZXF1
ZXN0W25jXSk7CisJCQkJCWlmIChyZXF1ZXN0W25jXSkKKwkJCQkJCWk5MTVfcmVxdWVzdF9wdXQo
cmVxdWVzdFtuY10pOworCQkJCQlyZXF1ZXN0W25jXSA9IGk5MTVfcmVxdWVzdF9nZXQocnEpOwor
CQkJCQlpOTE1X3JlcXVlc3RfYWRkKHJxKTsKIAkJCQl9CiAJCQl9CiAJCX0gZWxzZSB7CiAJCQlm
b3IgKG4gPSAwOyBuIDwgcHJpbWU7IG4rKykgewogCQkJCWZvciAobmMgPSAwOyBuYyA8IG5jdHg7
IG5jKyspIHsKLQkJCQkJcmVxdWVzdFtuY10gPQotCQkJCQkJaTkxNV9yZXF1ZXN0X2NyZWF0ZSh2
ZVtuY10pOwotCQkJCQlpZiAoSVNfRVJSKHJlcXVlc3RbbmNdKSkgewotCQkJCQkJZXJyID0gUFRS
X0VSUihyZXF1ZXN0W25jXSk7CisJCQkJCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOworCisJCQkJ
CXJxID0gaTkxNV9yZXF1ZXN0X2NyZWF0ZSh2ZVtuY10pOworCQkJCQlpZiAoSVNfRVJSKHJxKSkg
eworCQkJCQkJZXJyID0gUFRSX0VSUihycSk7CiAJCQkJCQlnb3RvIG91dDsKIAkJCQkJfQogCi0J
CQkJCWk5MTVfcmVxdWVzdF9hZGQocmVxdWVzdFtuY10pOworCQkJCQlpZiAocmVxdWVzdFtuY10p
CisJCQkJCQlpOTE1X3JlcXVlc3RfcHV0KHJlcXVlc3RbbmNdKTsKKwkJCQkJcmVxdWVzdFtuY10g
PSBpOTE1X3JlcXVlc3RfZ2V0KHJxKTsKKwkJCQkJaTkxNV9yZXF1ZXN0X2FkZChycSk7CiAJCQkJ
fQogCQkJfQogCQl9CkBAIC0yNjc4LDYgKzI3MTcsMTEgQEAgc3RhdGljIGludCBub3BfdmlydHVh
bF9lbmdpbmUoc3RydWN0IGludGVsX2d0ICpndCwKIAkJaWYgKHByaW1lID09IDEpCiAJCQl0aW1l
c1swXSA9IHRpbWVzWzFdOwogCisJCWZvciAobmMgPSAwOyBuYyA8IG5jdHg7IG5jKyspIHsKKwkJ
CWk5MTVfcmVxdWVzdF9wdXQocmVxdWVzdFtuY10pOworCQkJcmVxdWVzdFtuY10gPSBOVUxMOwor
CQl9CisKIAkJaWYgKF9faWd0X3RpbWVvdXQoZW5kX3RpbWUsIE5VTEwpKQogCQkJYnJlYWs7CiAJ
fQpAQCAtMjY5NSw2ICsyNzM5LDcgQEAgc3RhdGljIGludCBub3BfdmlydHVhbF9lbmdpbmUoc3Ry
dWN0IGludGVsX2d0ICpndCwKIAkJZXJyID0gLUVJTzsKIAogCWZvciAobmMgPSAwOyBuYyA8IG5j
dHg7IG5jKyspIHsKKwkJaTkxNV9yZXF1ZXN0X3B1dChyZXF1ZXN0W25jXSk7CiAJCWludGVsX2Nv
bnRleHRfdW5waW4odmVbbmNdKTsKIAkJaW50ZWxfY29udGV4dF9wdXQodmVbbmNdKTsKIAkJa2Vy
bmVsX2NvbnRleHRfY2xvc2UoY3R4W25jXSk7Ci0tIAoyLjI0LjAKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50
ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

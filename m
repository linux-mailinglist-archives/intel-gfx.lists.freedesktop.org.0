Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D5757BB23E
	for <lists+intel-gfx@lfdr.de>; Mon, 23 Sep 2019 12:30:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A13D16E854;
	Mon, 23 Sep 2019 10:30:17 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E69966E854
 for <intel-gfx@lists.freedesktop.org>; Mon, 23 Sep 2019 10:30:13 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 23 Sep 2019 03:30:13 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,539,1559545200"; d="scan'208";a="182494664"
Received: from mrnaghsh-mobl1.amr.corp.intel.com (HELO
 dk-ThinkPad-X260.fios-router.home) ([10.254.177.243])
 by orsmga008.jf.intel.com with ESMTP; 23 Sep 2019 03:30:13 -0700
From: Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 23 Sep 2019 03:29:31 -0700
Message-Id: <20190923102935.5860-6-dhinakaran.pandiyan@intel.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190923102935.5860-1-dhinakaran.pandiyan@intel.com>
References: <20190923102935.5860-1-dhinakaran.pandiyan@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC v3 5/9] drm/i915: Extract framebufer CCS offset
 checks into a function
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

aW50ZWxfZmlsbF9mYl9pbmZvKCkgaGFzIGdyb3duIHF1aXRlIGxhcmdlIGFuZCB3cmFwcGluZyB0
aGUgb2Zmc2V0IGNoZWNrcwppbnRvIGEgc2VwYXJhdGUgZnVuY3Rpb24gbWFrZXMgdGhlIGxvb3Ag
YSBiaXQgZWFzaWVyIHRvIGZvbGxvdy4KCkNjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmph
bGFAbGludXguaW50ZWwuY29tPgpDYzogTWF0dCBSb3BlciA8bWF0dGhldy5kLnJvcGVyQGludGVs
LmNvbT4KU2lnbmVkLW9mZi1ieTogRGhpbmFrYXJhbiBQYW5kaXlhbiA8ZGhpbmFrYXJhbi5wYW5k
aXlhbkBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5LmMgfCA2OSArKysrKysrKysrKystLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDQwIGlu
c2VydGlvbnMoKyksIDI5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggNmZlYzQzY2RkZGY0Li43NDQ3MDAxYzFmODUgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC0yNjgy
LDYgKzI2ODIsNDMgQEAgc3RhdGljIGJvb2wgaW50ZWxfcGxhbmVfbmVlZHNfcmVtYXAoY29uc3Qg
c3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSkKIAlyZXR1cm4gc3RyaWRlID4g
bWF4X3N0cmlkZTsKIH0KIAorc3RhdGljIGludAoraW50ZWxfZmJfY2hlY2tfY2NzX3h5KHN0cnVj
dCBkcm1fZnJhbWVidWZmZXIgKmZiLCBpbnQgeCwgaW50IHkpCit7CisJc3RydWN0IGludGVsX2Zy
YW1lYnVmZmVyICppbnRlbF9mYiA9IHRvX2ludGVsX2ZyYW1lYnVmZmVyKGZiKTsKKwlpbnQgaHN1
YiA9IGZiLT5mb3JtYXQtPmhzdWI7CisJaW50IHZzdWIgPSBmYi0+Zm9ybWF0LT52c3ViOworCWlu
dCB0aWxlX3dpZHRoLCB0aWxlX2hlaWdodDsKKwlpbnQgY2NzX3gsIGNjc195OworCWludCBtYWlu
X3gsIG1haW5feTsKKworCWludGVsX3RpbGVfZGltcyhmYiwgMSwgJnRpbGVfd2lkdGgsICZ0aWxl
X2hlaWdodCk7CisKKwl0aWxlX3dpZHRoICo9IGhzdWI7CisJdGlsZV9oZWlnaHQgKj0gdnN1YjsK
KworCWNjc194ID0gKHggKiBoc3ViKSAlIHRpbGVfd2lkdGg7CisJY2NzX3kgPSAoeSAqIHZzdWIp
ICUgdGlsZV9oZWlnaHQ7CisJbWFpbl94ID0gaW50ZWxfZmItPm5vcm1hbFswXS54ICUgdGlsZV93
aWR0aDsKKwltYWluX3kgPSBpbnRlbF9mYi0+bm9ybWFsWzBdLnkgJSB0aWxlX2hlaWdodDsKKwor
CS8qCisJKiBDQ1MgZG9lc24ndCBoYXZlIGl0cyBvd24geC95IG9mZnNldCByZWdpc3Rlciwgc28g
dGhlIGludHJhIENDUyB0aWxlCisJKiB4L3kgb2Zmc2V0cyBtdXN0IG1hdGNoIGJldHdlZW4gQ0NT
IGFuZCB0aGUgbWFpbiBzdXJmYWNlLgorCSovCisJaWYgKG1haW5feCAhPSBjY3NfeCB8fCBtYWlu
X3kgIT0gY2NzX3kpIHsKKwkJRFJNX0RFQlVHX0tNUygiQmFkIENDUyB4L3kgKG1haW4gJWQsJWQg
Y2NzICVkLCVkKSBmdWxsIChtYWluICVkLCVkIGNjcyAlZCwlZClcbiIsCisJCQkgICAgICBtYWlu
X3gsIG1haW5feSwKKwkJCSAgICAgIGNjc194LCBjY3NfeSwKKwkJCSAgICAgIGludGVsX2ZiLT5u
b3JtYWxbMF0ueCwKKwkJCSAgICAgIGludGVsX2ZiLT5ub3JtYWxbMF0ueSwKKwkJCSAgICAgIHgs
IHkpOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwlyZXR1cm4gMDsKK30KKwogc3RhdGljIGlu
dAogaW50ZWxfZmlsbF9mYl9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwK
IAkJICAgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIpCkBAIC0yNzEzLDM1ICsyNzUwLDkgQEAg
aW50ZWxfZmlsbF9mYl9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJ
fQogCiAJCWlmIChpc19jY3NfbW9kaWZpZXIoZmItPm1vZGlmaWVyKSAmJiBpID09IDEpIHsKLQkJ
CWludCBoc3ViID0gZmItPmZvcm1hdC0+aHN1YjsKLQkJCWludCB2c3ViID0gZmItPmZvcm1hdC0+
dnN1YjsKLQkJCWludCB0aWxlX3dpZHRoLCB0aWxlX2hlaWdodDsKLQkJCWludCBtYWluX3gsIG1h
aW5feTsKLQkJCWludCBjY3NfeCwgY2NzX3k7Ci0KLQkJCWludGVsX3RpbGVfZGltcyhmYiwgaSwg
JnRpbGVfd2lkdGgsICZ0aWxlX2hlaWdodCk7Ci0KLQkJCXRpbGVfd2lkdGggKj0gaHN1YjsKLQkJ
CXRpbGVfaGVpZ2h0ICo9IHZzdWI7Ci0KLQkJCWNjc194ID0gKHggKiBoc3ViKSAlIHRpbGVfd2lk
dGg7Ci0JCQljY3NfeSA9ICh5ICogdnN1YikgJSB0aWxlX2hlaWdodDsKLQkJCW1haW5feCA9IGlu
dGVsX2ZiLT5ub3JtYWxbMF0ueCAlIHRpbGVfd2lkdGg7Ci0JCQltYWluX3kgPSBpbnRlbF9mYi0+
bm9ybWFsWzBdLnkgJSB0aWxlX2hlaWdodDsKLQotCQkJLyoKLQkJCSAqIENDUyBkb2Vzbid0IGhh
dmUgaXRzIG93biB4L3kgb2Zmc2V0IHJlZ2lzdGVyLCBzbyB0aGUgaW50cmEgQ0NTIHRpbGUKLQkJ
CSAqIHgveSBvZmZzZXRzIG11c3QgbWF0Y2ggYmV0d2VlbiBDQ1MgYW5kIHRoZSBtYWluIHN1cmZh
Y2UuCi0JCQkgKi8KLQkJCWlmIChtYWluX3ggIT0gY2NzX3ggfHwgbWFpbl95ICE9IGNjc195KSB7
Ci0JCQkJRFJNX0RFQlVHX0tNUygiQmFkIENDUyB4L3kgKG1haW4gJWQsJWQgY2NzICVkLCVkKSBm
dWxsIChtYWluICVkLCVkIGNjcyAlZCwlZClcbiIsCi0JCQkJCSAgICAgIG1haW5feCwgbWFpbl95
LAotCQkJCQkgICAgICBjY3NfeCwgY2NzX3ksCi0JCQkJCSAgICAgIGludGVsX2ZiLT5ub3JtYWxb
MF0ueCwKLQkJCQkJICAgICAgaW50ZWxfZmItPm5vcm1hbFswXS55LAotCQkJCQkgICAgICB4LCB5
KTsKLQkJCQlyZXR1cm4gLUVJTlZBTDsKLQkJCX0KKwkJCXJldCA9IGludGVsX2ZiX2NoZWNrX2Nj
c194eShmYiwgeCwgeSk7CisJCQlpZiAocmV0KQorCQkJCXJldHVybiByZXQ7CiAJCX0KIAogCQkv
KgotLSAKMi4xNy4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1n
Zng=

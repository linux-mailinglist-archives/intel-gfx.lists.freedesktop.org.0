Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AA7DB7E519
	for <lists+intel-gfx@lfdr.de>; Fri,  2 Aug 2019 00:01:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F04176E823;
	Thu,  1 Aug 2019 22:01:44 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3EA066E822
 for <intel-gfx@lists.freedesktop.org>; Thu,  1 Aug 2019 22:01:43 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 01 Aug 2019 15:01:42 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,335,1559545200"; d="scan'208";a="256788403"
Received: from irvmail001.ir.intel.com ([163.33.26.43])
 by orsmga001.jf.intel.com with ESMTP; 01 Aug 2019 15:01:41 -0700
Received: from mwajdecz-MOBL1.ger.corp.intel.com
 (mwajdecz-mobl1.ger.corp.intel.com [10.249.130.21])
 by irvmail001.ir.intel.com (8.14.3/8.13.6/MailSET/Hub) with ESMTP id
 x71M1diF001671
 for <intel-gfx@lists.freedesktop.org>; Thu, 1 Aug 2019 23:01:40 +0100
From: Michal Wajdeczko <michal.wajdeczko@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu,  1 Aug 2019 22:01:37 +0000
Message-Id: <20190801220138.38740-3-michal.wajdeczko@intel.com>
X-Mailer: git-send-email 2.21.0.windows.1
In-Reply-To: <20190801220138.38740-1-michal.wajdeczko@intel.com>
References: <20190801220138.38740-1-michal.wajdeczko@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 2/3] drm/i915/uc: Inject probe errors into
 intel_uc_init_hw
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SW5qZWN0IHByb2JlIGVycm9ycyBpbnRvIGludGVsX3VjX2luaXRfaHcgdG8gbWFrZSBzdXJlIHdl
CmNvcnJlY3RseSBoYW5kbGUgYW55IHVDIGluaXRpYWxpemF0aW9uIGZhaWx1cmUuCgpUbyBhdm9p
ZCBjb21wbGFpbnMgZnJvbSBDSSBhYm91dCBpbmplY3RlZCBlcnJvcnMgdXNlCmk5MTVfcHJvYmVf
ZXJyb3IgdG8gbG93ZXIgbWVzc2FnZSBsZXZlbC4KCnYyOiBfc2FuaXRpemUgaW5zdGVhZCBfcmVz
ZXQgdG8gY29ycmVjdGx5IGhhbmRsZSBHZW45IHJldHJpZXMKClNpZ25lZC1vZmYtYnk6IE1pY2hh
bCBXYWpkZWN6a28gPG1pY2hhbC53YWpkZWN6a29AaW50ZWwuY29tPgpDYzogRGFuaWVsZSBDZXJh
b2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNvbT4KQ2M6IENocmlzIFdp
bHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpSZXZpZXdlZC1ieTogQ2hyaXMgV2lsc29u
IDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+ICN2MQotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3VjL2ludGVsX2h1Yy5jICAgfCAgNCArKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91
Yy9pbnRlbF91Yy5jICAgIHwgMjQgKysrKysrKysrKysrKysrKysrKystLS0tCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5jIHwgIDUgKysrKysKIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2VtLmMgICAgICAgICAgfCAgMiArLQogNCBmaWxlcyBjaGFuZ2VkLCAzMCBp
bnNlcnRpb25zKCspLCA1IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L3VjL2ludGVsX2h1Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50
ZWxfaHVjLmMKaW5kZXggZDY0MmIxNjdhMzg5Li4yYTMwOTU2ZGMzN2IgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2h1Yy5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L3VjL2ludGVsX2h1Yy5jCkBAIC0xMzksNiArMTM5LDEwIEBAIGludCBpbnRlbF9o
dWNfYXV0aChzdHJ1Y3QgaW50ZWxfaHVjICpodWMpCiAJR0VNX0JVR19PTighaW50ZWxfdWNfZndf
aXNfbG9hZGVkKCZodWMtPmZ3KSk7CiAJR0VNX0JVR19PTihpbnRlbF9odWNfaXNfYXV0aGVudGlj
YXRlZChodWMpKTsKIAorCXJldCA9IGk5MTVfaW5qZWN0X2xvYWRfZXJyb3IoZ3QtPmk5MTUsIC1F
TlhJTyk7CisJaWYgKHJldCkKKwkJZ290byBmYWlsOworCiAJcmV0ID0gaW50ZWxfZ3VjX2F1dGhf
aHVjKGd1YywKIAkJCQkgaW50ZWxfZ3VjX2dndHRfb2Zmc2V0KGd1YywgaHVjLT5yc2FfZGF0YSkp
OwogCWlmIChyZXQpIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2lu
dGVsX3VjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Yy5jCmluZGV4IGQx
YjA4YjI4YjFhZC4uYzRiMDE1YjAyODdlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC91Yy9pbnRlbF91Yy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVs
X3VjLmMKQEAgLTQxLDYgKzQxLDEwIEBAIHN0YXRpYyBpbnQgX19pbnRlbF91Y19yZXNldF9odyhz
dHJ1Y3QgaW50ZWxfdWMgKnVjKQogCWludCByZXQ7CiAJdTMyIGd1Y19zdGF0dXM7CiAKKwlyZXQg
PSBpOTE1X2luamVjdF9sb2FkX2Vycm9yKGd0LT5pOTE1LCAtRU5YSU8pOworCWlmIChyZXQpCisJ
CXJldHVybiByZXQ7CisKIAlyZXQgPSBpbnRlbF9yZXNldF9ndWMoZ3QpOwogCWlmIChyZXQpIHsK
IAkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gcmVzZXQgR3VDLCByZXQgPSAlZFxuIiwgcmV0KTsKQEAg
LTIwOSw2ICsyMTMsMTAgQEAgc3RhdGljIGludCBndWNfZW5hYmxlX2NvbW11bmljYXRpb24oc3Ry
dWN0IGludGVsX2d1YyAqZ3VjKQogCiAJR0VNX0JVR19PTihndWNfY29tbXVuaWNhdGlvbl9lbmFi
bGVkKGd1YykpOwogCisJcmV0ID0gaTkxNV9pbmplY3RfbG9hZF9lcnJvcihpOTE1LCAtRU5YSU8p
OworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKIAlyZXQgPSBpbnRlbF9ndWNfY3RfZW5hYmxl
KCZndWMtPmN0KTsKIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwpAQCAtMzQwLDcgKzM0OCw3IEBA
IHZvaWQgaW50ZWxfdWNfZmluaShzdHJ1Y3QgaW50ZWxfdWMgKnVjKQogCWludGVsX2d1Y19maW5p
KGd1Yyk7CiB9CiAKLXN0YXRpYyB2b2lkIF9fdWNfc2FuaXRpemUoc3RydWN0IGludGVsX3VjICp1
YykKK3N0YXRpYyBpbnQgX191Y19zYW5pdGl6ZShzdHJ1Y3QgaW50ZWxfdWMgKnVjKQogewogCXN0
cnVjdCBpbnRlbF9ndWMgKmd1YyA9ICZ1Yy0+Z3VjOwogCXN0cnVjdCBpbnRlbF9odWMgKmh1YyA9
ICZ1Yy0+aHVjOwpAQCAtMzUwLDcgKzM1OCw3IEBAIHN0YXRpYyB2b2lkIF9fdWNfc2FuaXRpemUo
c3RydWN0IGludGVsX3VjICp1YykKIAlpbnRlbF9odWNfc2FuaXRpemUoaHVjKTsKIAlpbnRlbF9n
dWNfc2FuaXRpemUoZ3VjKTsKIAotCV9faW50ZWxfdWNfcmVzZXRfaHcodWMpOworCXJldHVybiBf
X2ludGVsX3VjX3Jlc2V0X2h3KHVjKTsKIH0KIAogdm9pZCBpbnRlbF91Y19zYW5pdGl6ZShzdHJ1
Y3QgaW50ZWxfdWMgKnVjKQpAQCAtMzc4LDYgKzM4NiwxMCBAQCBzdGF0aWMgaW50IHVjX2luaXRf
d29wY20oc3RydWN0IGludGVsX3VjICp1YykKIAlHRU1fQlVHX09OKCEoc2l6ZSAmIEdVQ19XT1BD
TV9TSVpFX01BU0spKTsKIAlHRU1fQlVHX09OKHNpemUgJiB+R1VDX1dPUENNX1NJWkVfTUFTSyk7
CiAKKwllcnIgPSBpOTE1X2luamVjdF9sb2FkX2Vycm9yKGd0LT5pOTE1LCAtRU5YSU8pOworCWlm
IChlcnIpCisJCXJldHVybiBlcnI7CisKIAltYXNrID0gR1VDX1dPUENNX1NJWkVfTUFTSyB8IEdV
Q19XT1BDTV9TSVpFX0xPQ0tFRDsKIAllcnIgPSBpbnRlbF91bmNvcmVfd3JpdGVfYW5kX3Zlcmlm
eSh1bmNvcmUsIEdVQ19XT1BDTV9TSVpFLCBzaXplLCBtYXNrLAogCQkJCQkgICAgc2l6ZSB8IEdV
Q19XT1BDTV9TSVpFX0xPQ0tFRCk7CkBAIC00MzQsNyArNDQ2LDcgQEAgaW50IGludGVsX3VjX2lu
aXRfaHcoc3RydWN0IGludGVsX3VjICp1YykKIAkJICogQWx3YXlzIHJlc2V0IHRoZSBHdUMganVz
dCBiZWZvcmUgKHJlKWxvYWRpbmcsIHNvCiAJCSAqIHRoYXQgdGhlIHN0YXRlIGFuZCB0aW1pbmcg
YXJlIGZhaXJseSBwcmVkaWN0YWJsZQogCQkgKi8KLQkJcmV0ID0gX19pbnRlbF91Y19yZXNldF9o
dyh1Yyk7CisJCXJldCA9IF9fdWNfc2FuaXRpemUodWMpOwogCQlpZiAocmV0KQogCQkJZ290byBl
cnJfb3V0OwogCkBAIC00NzgsNiArNDkwLDEwIEBAIGludCBpbnRlbF91Y19pbml0X2h3KHN0cnVj
dCBpbnRlbF91YyAqdWMpCiAJCQlnb3RvIGVycl9jb21tdW5pY2F0aW9uOwogCX0KIAorCXJldCA9
IGk5MTVfaW5qZWN0X2xvYWRfZXJyb3IoaTkxNSwgLUVOWElPKTsKKwlpZiAocmV0KQorCQlnb3Rv
IGVycl9jb21tdW5pY2F0aW9uOworCiAJZGV2X2luZm8oaTkxNS0+ZHJtLmRldiwgIkd1QyBmaXJt
d2FyZSB2ZXJzaW9uICV1LiV1XG4iLAogCQkgZ3VjLT5mdy5tYWpvcl92ZXJfZm91bmQsIGd1Yy0+
ZncubWlub3JfdmVyX2ZvdW5kKTsKIAlkZXZfaW5mbyhpOTE1LT5kcm0uZGV2LCAiR3VDIHN1Ym1p
c3Npb24gJXNcbiIsCkBAIC01MDQsNyArNTIwLDcgQEAgaW50IGludGVsX3VjX2luaXRfaHcoc3Ry
dWN0IGludGVsX3VjICp1YykKIAlpZiAoR0VNX1dBUk5fT04ocmV0ID09IC1FSU8pKQogCQlyZXQg
PSAtRUlOVkFMOwogCi0JZGV2X2VycihpOTE1LT5kcm0uZGV2LCAiR3VDIGluaXRpYWxpemF0aW9u
IGZhaWxlZCAlZFxuIiwgcmV0KTsKKwlpOTE1X3Byb2JlX2Vycm9yKGk5MTUsICJHdUMgaW5pdGlh
bGl6YXRpb24gZmFpbGVkICVkXG4iLCByZXQpOwogCXJldHVybiByZXQ7CiB9CiAKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjX2Z3LmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5jCmluZGV4IDY1MGFkNjAzN2I3NC4uZDJmZjcw
YmVmNTc0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Y19m
dy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjX2Z3LmMKQEAgLTQ0
Myw4ICs0NDMsMTMgQEAgaW50IGludGVsX3VjX2Z3X3VwbG9hZChzdHJ1Y3QgaW50ZWxfdWNfZncg
KnVjX2Z3LCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LAogCS8qIG1ha2Ugc3VyZSB0aGUgc3RhdHVzIHdh
cyBjbGVhcmVkIHRoZSBsYXN0IHRpbWUgd2UgcmVzZXQgdGhlIHVjICovCiAJR0VNX0JVR19PTihp
bnRlbF91Y19md19pc19sb2FkZWQodWNfZncpKTsKIAorCWVyciA9IGk5MTVfaW5qZWN0X2xvYWRf
ZXJyb3IoZ3QtPmk5MTUsIC1FTk9FWEVDKTsKKwlpZiAoZXJyKQorCQlyZXR1cm4gZXJyOworCiAJ
aWYgKCFpbnRlbF91Y19md19pc19hdmFpbGFibGUodWNfZncpKQogCQlyZXR1cm4gLUVOT0VYRUM7
CisKIAkvKiBDYWxsIGN1c3RvbSBsb2FkZXIgKi8KIAlpbnRlbF91Y19md19nZ3R0X2JpbmQodWNf
ZncsIGd0KTsKIAllcnIgPSB1Y19md194ZmVyKHVjX2Z3LCBndCwgd29wY21fb2Zmc2V0LCBkbWFf
ZmxhZ3MpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKaW5kZXggNWU4N2FjYzRiNzcwLi4yNDM2Y2Q1
OThlNmUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwpAQCAtMTI0Myw3ICsxMjQzLDcgQEAgaW50
IGk5MTVfZ2VtX2luaXRfaHcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJLyogV2Ug
Y2FuJ3QgZW5hYmxlIGNvbnRleHRzIHVudGlsIGFsbCBmaXJtd2FyZSBpcyBsb2FkZWQgKi8KIAly
ZXQgPSBpbnRlbF91Y19pbml0X2h3KCZndC0+dWMpOwogCWlmIChyZXQpIHsKLQkJRFJNX0VSUk9S
KCJFbmFibGluZyB1YyBmYWlsZWQgKCVkKVxuIiwgcmV0KTsKKwkJaTkxNV9wcm9iZV9lcnJvcihp
OTE1LCAiRW5hYmxpbmcgdWMgZmFpbGVkICglZClcbiIsIHJldCk7CiAJCWdvdG8gb3V0OwogCX0K
IAotLSAKMi4xOS4yCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1n
Zng=

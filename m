Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8F69A9FDD9
	for <lists+intel-gfx@lfdr.de>; Wed, 28 Aug 2019 11:07:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 828F9896A5;
	Wed, 28 Aug 2019 09:07:16 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EADA5896A5
 for <intel-gfx@lists.freedesktop.org>; Wed, 28 Aug 2019 09:07:14 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 18287435-1500050 for multiple; Wed, 28 Aug 2019 10:07:11 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Mika Kuoppala <mika.kuoppala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20190827115413.31225-1-chris@chris-wilson.co.uk>
 <156690742523.15406.5516780195775937383@skylake-alporthouse-com>
 <87a7bty898.fsf@gaia.fi.intel.com>
In-Reply-To: <87a7bty898.fsf@gaia.fi.intel.com>
Message-ID: <156698323014.15406.10053181487953919639@skylake-alporthouse-com>
Date: Wed, 28 Aug 2019 10:07:10 +0100
Subject: Re: [Intel-gfx] [PATCH] drm/i915/execlists: stall on render flush
 before writing seqno
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBNaWthIEt1b3BwYWxhICgyMDE5LTA4LTI4IDEwOjAwOjM1KQo+IENocmlzIFdpbHNv
biA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPiB3cml0ZXM6Cj4gCj4gPiBRdW90aW5nIENocmlz
IFdpbHNvbiAoMjAxOS0wOC0yNyAxMjo1NDoxMykKPiA+PiBRdWl0ZSByYXJlbHkgd2Ugc2VlIHRo
YXQgdGhlIENTIGNvbXBsZXRpb24gZXZlbnQgZmlyZXMgYmVmb3JlIHRoZQo+ID4+IGJyZWFkY3J1
bWIgaXMgY29oZXJlbnQuIFRyeSByZWFycmFuZ2luZyB0aGUgYnJlYWRjcnVtYiB3cml0ZSBzZXF1
ZW5jZQo+ID4+IHN1Y2ggdGhhdCB0aGUgQ1NfU1RBTEwgaXMgb24gdGhlIHBvc3Qtc3luYyB3cml0
ZSBwaXBlY29udHJvbC4KPiA+PiAKPiA+PiBTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNo
cmlzQGNocmlzLXdpbHNvbi5jby51az4KPiA+PiBDYzogTWlrYSBLdW9wcGFsYSA8bWlrYS5rdW9w
cGFsYUBsaW51eC5pbnRlbC5jb20+Cj4gPj4gLS0tCj4gPj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2xyYy5jIHwgMTcgKysrKysrKystLS0tLS0tLS0KPiA+PiAgMSBmaWxlIGNoYW5n
ZWQsIDggaW5zZXJ0aW9ucygrKSwgOSBkZWxldGlvbnMoLSkKPiA+PiAKPiA+PiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9scmMuYwo+ID4+IGluZGV4IDgwYTNmMWRiYjQ1Ni4uNjY5ZThiZDlmODMw
IDEwMDY0NAo+ID4+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCj4g
Pj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiA+PiBAQCAtMjk2
MSwxOCArMjk2MSwxNyBAQCBzdGF0aWMgdTMyICpnZW44X2VtaXRfZmluaV9icmVhZGNydW1iKHN0
cnVjdCBpOTE1X3JlcXVlc3QgKnJlcXVlc3QsIHUzMiAqY3MpCj4gPj4gIAo+ID4+ICBzdGF0aWMg
dTMyICpnZW44X2VtaXRfZmluaV9icmVhZGNydW1iX3JjcyhzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpy
ZXF1ZXN0LCB1MzIgKmNzKQo+ID4+ICB7Cj4gPj4gLSAgICAgICBjcyA9IGdlbjhfZW1pdF9nZ3R0
X3dyaXRlX3JjcyhjcywKPiA+PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHJlcXVlc3QtPmZlbmNlLnNlcW5vLAo+ID4+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcmVxdWVzdC0+dGltZWxpbmUtPmh3c3Bfb2Zmc2V0LAo+ID4+IC0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgUElQRV9DT05UUk9MX1JFTkRFUl9UQVJHRVRfQ0FD
SEVfRkxVU0ggfAo+ID4+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUElQ
RV9DT05UUk9MX0RFUFRIX0NBQ0hFX0ZMVVNIIHwKPiA+PiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIFBJUEVfQ09OVFJPTF9EQ19GTFVTSF9FTkFCTEUpOwo+ID4+IC0KPiA+
PiAgICAgICAgIC8qIFhYWCBmbHVzaCt3cml0ZStDU19TVEFMTCBhbGwgaW4gb25lIHVwc2V0cyBn
ZW1fY29uY3VycmVudF9ibHQ6a2JsICovCj4gPj4gICAgICAgICBjcyA9IGdlbjhfZW1pdF9waXBl
X2NvbnRyb2woY3MsCj4gPj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUElQ
RV9DT05UUk9MX0ZMVVNIX0VOQUJMRSB8Cj4gPj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgUElQRV9DT05UUk9MX0NTX1NUQUxMLAo+ID4+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIFBJUEVfQ09OVFJPTF9SRU5ERVJfVEFSR0VUX0NBQ0hFX0ZMVVNIIHwK
PiA+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQSVBFX0NPTlRST0xfREVQ
VEhfQ0FDSEVfRkxVU0ggfAo+ID4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFBJUEVfQ09OVFJPTF9EQ19GTFVTSF9FTkFCTEUsCj4gPj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgMCk7Cj4gPj4gKyAgICAgICBjcyA9IGdlbjhfZW1pdF9nZ3R0X3dyaXRl
X3JjcyhjcywKPiA+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVl
c3QtPmZlbmNlLnNlcW5vLAo+ID4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgcmVxdWVzdC0+dGltZWxpbmUtPmh3c3Bfb2Zmc2V0LAo+ID4+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgUElQRV9DT05UUk9MX0ZMVVNIX0VOQUJMRSB8Cj4gPgo+ID4g
T3IgcGVyaGFwcyB3ZSBuZWVkIFBJUEVfQ09OVFJPTF9EQ19GTFVTSF9FTkFCTEUgaGVyZS4KPiA+
Cj4gPiBJIHRoaW5rIHRoYXQgbWlnaHQgbWFrZSBtb3JlIHNlbnNlIChyZXBsYWNlIERDX0ZMVVNI
IHdpdGggd2hhdGV2ZXIgbWlnaHQKPiA+IGZsdXNoIHRoZSBwb3N0LXN5bmMgd3JpdGUpLgo+IAo+
IFdvdWxkIGl0IG1ha2Ugc2Vuc2UgdG8gdHJ5IHRvIGJlIGFzIG11Y2ggc2ltaWxhciBhcyBwb3Nz
aWJsZQo+IHdpdGggdGhlIC0+ZW1pdF9mbHVzaD8KClRoYXQncyB3aGVyZSB3ZSBzdGFydGVkIGFu
ZCBoYWQgdG8gcmVmaW5lIGR1ZSB0byBiZWluZyBhYmxlIHRvIGRldGVjdAppbmNvaGVyZW5jeS4g
SXQncyBub3QgYXMgaWYgd2Ugd2UgdXNlZCBlbWl0X2ZsdXNoKEVNSVRfRkxVU0gpIGZvcgphbnl0
aGluZyBvdGhlciB0aGFuIGEgZGVsYXkgaW4gZW1pdF9wZHAuLi4KCmRyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmM6ICAgICAgICAgICAgZXJyID0gZW5naW5lLT5lbWl0
X2ZsdXNoKHJxLCBFTUlUX0lOVkFMSURBVEUpOwpkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9scmMuYzogICAgcmV0ID0gcmVxdWVzdC0+ZW5naW5lLT5lbWl0X2ZsdXNoKHJlcXVlc3QsIEVN
SVRfSU5WQUxJREFURSk7CmRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3JpbmdidWZmZXIu
YzogICAgICAgICAgICAgcmV0ID0gZW5naW5lLT5lbWl0X2ZsdXNoKHJxLCBFTUlUX0lOVkFMSURB
VEUpOwpkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmM6ICAgICAgICAg
ICAgIHJldCA9IGVuZ2luZS0+ZW1pdF9mbHVzaChycSwgRU1JVF9JTlZBTElEQVRFKTsKZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ2J1ZmZlci5jOiAgICAgICAgICAgICByZXQgPSBl
bmdpbmUtPmVtaXRfZmx1c2gocnEsIEVNSVRfRkxVU0gpOwpkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9yaW5nYnVmZmVyLmM6ICAgICByZXQgPSByZXF1ZXN0LT5lbmdpbmUtPmVtaXRfZmx1
c2gocmVxdWVzdCwgRU1JVF9JTlZBTElEQVRFKTsKZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfd29ya2Fyb3VuZHMuYzogICAgcmV0ID0gcnEtPmVuZ2luZS0+ZW1pdF9mbHVzaChycSwgRU1J
VF9CQVJSSUVSKTsKZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYzog
ICAgcmV0ID0gcnEtPmVuZ2luZS0+ZW1pdF9mbHVzaChycSwgRU1JVF9CQVJSSUVSKTsKZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Z0L21taW9fY29udGV4dC5jOiAgICAgICAgcmV0ID0gcmVxLT5lbmdp
bmUtPmVtaXRfZmx1c2gocmVxLCBFTUlUX0JBUlJJRVIpOwpkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dnQvbW1pb19jb250ZXh0LmM6ICAgICAgICByZXQgPSByZXEtPmVuZ2luZS0+ZW1pdF9mbHVzaChy
ZXEsIEVNSVRfQkFSUklFUik7CgpUaGUgRU1JVF9GTFVTSCBpbiB0aGUgcmluZ2J1ZmZlciBwZCB1
cGRhdGUgaXMgYWxzbyBwdXJlbHkgYXJiaXRyYXJ5LgotQ2hyaXMKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRl
bC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

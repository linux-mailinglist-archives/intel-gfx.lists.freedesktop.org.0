Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AE455F1685
	for <lists+intel-gfx@lfdr.de>; Wed,  6 Nov 2019 14:04:28 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 43B156E228;
	Wed,  6 Nov 2019 13:04:26 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0B4076E228
 for <intel-gfx@lists.freedesktop.org>; Wed,  6 Nov 2019 13:04:23 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19102013-1500050 
 for multiple; Wed, 06 Nov 2019 13:04:18 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  6 Nov 2019 13:04:14 +0000
Message-Id: <20191106130416.23076-2-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191106130416.23076-1-chris@chris-wilson.co.uk>
References: <20191106130416.23076-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 2/4] drm/i915/selftests: Replace mock_file
 hackery with drm's true fake
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgZHJtIG5vdyBleHBvcnRzIGEgbWV0aG9kIHRvIGNyZWF0ZSBhbiBhbm9ueW1vdXMgc3RydWN0
IGZpbGUgYXJvdW5kIGEKZHJtX2RldmljZSBmb3IgaW50ZXJuYWwgdXNlLCBtYWtlIHVzZSBvZiBp
dCB0byBhdm9pZCBvdXIgaG9ycmlibGUgaGFja3MuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxz
b24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiAuLi4vZ3B1L2RybS9pOTE1L2dlbS9z
ZWxmdGVzdHMvaHVnZV9wYWdlcy5jICAgfCAgMiArLQogLi4uL2RybS9pOTE1L2dlbS9zZWxmdGVz
dHMvaTkxNV9nZW1fY29udGV4dC5jIHwgMTIgKystLS0KIC4uLi9pOTE1L2dlbS9zZWxmdGVzdHMv
aTkxNV9nZW1fb2JqZWN0X2JsdC5jICB8ICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9z
ZWxmdGVzdF9jb250ZXh0LmMgICAgfCAgNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2Vs
ZnRlc3RfaGFuZ2NoZWNrLmMgIHwgIDggKy0tCiAuLi4vZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0
X3dvcmthcm91bmRzLmMgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3Rz
L2k5MTVfZ2VtLmMgICAgIHwgIDQgKy0KIC4uLi9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVf
Z2VtX2V2aWN0LmMgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkx
NV9nZW1fZ3R0LmMgfCAgNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVf
cmVxdWVzdC5jIHwgIDIgKy0KIC4uLi9kcm0vaTkxNS9zZWxmdGVzdHMvaW50ZWxfbWVtb3J5X3Jl
Z2lvbi5jICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19kcm0u
YyAgICAgfCA0OSArKystLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvbW9ja19kcm0uaCAgICAgfCAgOCArKy0KIDEzIGZpbGVzIGNoYW5nZWQsIDM3IGluc2Vy
dGlvbnMoKyksIDY2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9zZWxmdGVzdHMvaHVnZV9wYWdlcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMKaW5kZXggNjg4YzQ5YTI0ZjMyLi4wNmRhZDdiMGRiODIg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaHVnZV9wYWdl
cy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaHVnZV9wYWdlcy5j
CkBAIC0xOTQ0LDYgKzE5NDQsNiBAQCBpbnQgaTkxNV9nZW1faHVnZV9wYWdlX2xpdmVfc2VsZnRl
c3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCWVyciA9IGk5MTVfc3VidGVzdHMo
dGVzdHMsIGN0eCk7CiAKIG91dF9maWxlOgotCW1vY2tfZmlsZV9mcmVlKGk5MTUsIGZpbGUpOwor
CW1vY2tfZmlsZV9wdXQoZmlsZSk7CiAJcmV0dXJuIGVycjsKIH0KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0LmMKaW5kZXggNjJm
YWJjMDIzYTgzLi40Nzg5MGM5MjUzNGMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jCkBAIC0xNDksNyArMTQ5LDcgQEAg
c3RhdGljIGludCBsaXZlX25vcF9zd2l0Y2godm9pZCAqYXJnKQogCX0KIAogb3V0X2ZpbGU6Ci0J
bW9ja19maWxlX2ZyZWUoaTkxNSwgZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlyZXR1
cm4gZXJyOwogfQogCkBAIC0zNzcsNyArMzc3LDcgQEAgc3RhdGljIGludCBsaXZlX3BhcmFsbGVs
X3N3aXRjaCh2b2lkICphcmcpCiAJfQogCWtmcmVlKGRhdGEpOwogb3V0X2ZpbGU6Ci0JbW9ja19m
aWxlX2ZyZWUoaTkxNSwgZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlyZXR1cm4gZXJy
OwogfQogCkBAIC03MTYsNyArNzE2LDcgQEAgc3RhdGljIGludCBpZ3RfY3R4X2V4ZWModm9pZCAq
YXJnKQogCQlpZiAoaWd0X2xpdmVfdGVzdF9lbmQoJnQpKQogCQkJZXJyID0gLUVJTzsKIAotCQlt
b2NrX2ZpbGVfZnJlZShpOTE1LCBmaWxlKTsKKwkJbW9ja19maWxlX3B1dChmaWxlKTsKIAkJaWYg
KGVycikKIAkJCXJldHVybiBlcnI7CiAKQEAgLTg1NCw3ICs4NTQsNyBAQCBzdGF0aWMgaW50IGln
dF9zaGFyZWRfY3R4X2V4ZWModm9pZCAqYXJnKQogCWlmIChpZ3RfbGl2ZV90ZXN0X2VuZCgmdCkp
CiAJCWVyciA9IC1FSU87CiBvdXRfZmlsZToKLQltb2NrX2ZpbGVfZnJlZShpOTE1LCBmaWxlKTsK
Kwltb2NrX2ZpbGVfcHV0KGZpbGUpOwogCXJldHVybiBlcnI7CiB9CiAKQEAgLTE0MjYsNyArMTQy
Niw3IEBAIHN0YXRpYyBpbnQgaWd0X2N0eF9yZWFkb25seSh2b2lkICphcmcpCiAJaWYgKGlndF9s
aXZlX3Rlc3RfZW5kKCZ0KSkKIAkJZXJyID0gLUVJTzsKIAotCW1vY2tfZmlsZV9mcmVlKGk5MTUs
IGZpbGUpOworCW1vY2tfZmlsZV9wdXQoZmlsZSk7CiAJcmV0dXJuIGVycjsKIH0KIApAQCAtMTc1
MCw3ICsxNzUwLDcgQEAgc3RhdGljIGludCBpZ3Rfdm1faXNvbGF0aW9uKHZvaWQgKmFyZykKIG91
dF9maWxlOgogCWlmIChpZ3RfbGl2ZV90ZXN0X2VuZCgmdCkpCiAJCWVyciA9IC1FSU87Ci0JbW9j
a19maWxlX2ZyZWUoaTkxNSwgZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlyZXR1cm4g
ZXJyOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3Rz
L2k5MTVfZ2VtX29iamVjdF9ibHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVz
dHMvaTkxNV9nZW1fb2JqZWN0X2JsdC5jCmluZGV4IGU4MTMyYWNhMGJiNi4uZDlmZGZkZGI3MDkx
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2Vt
X29iamVjdF9ibHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5
MTVfZ2VtX29iamVjdF9ibHQuYwpAQCAtMzAxLDcgKzMwMSw3IEBAIHN0YXRpYyBpbnQgaWd0X2Zp
bGxfYmx0X3RocmVhZCh2b2lkICphcmcpCiAKIAlpbnRlbF9jb250ZXh0X3B1dChjZSk7CiBvdXRf
ZmlsZToKLQltb2NrX2ZpbGVfZnJlZShpOTE1LCBmaWxlKTsKKwltb2NrX2ZpbGVfcHV0KGZpbGUp
OwogCXJldHVybiBlcnI7CiB9CiAKQEAgLTQzMiw3ICs0MzIsNyBAQCBzdGF0aWMgaW50IGlndF9j
b3B5X2JsdF90aHJlYWQodm9pZCAqYXJnKQogCiAJaW50ZWxfY29udGV4dF9wdXQoY2UpOwogb3V0
X2ZpbGU6Ci0JbW9ja19maWxlX2ZyZWUoaTkxNSwgZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxl
KTsKIAlyZXR1cm4gZXJyOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9zZWxmdGVzdF9jb250ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9j
b250ZXh0LmMKaW5kZXggYmM3MjBkZWZjNmI4Li5hNTY4OGY3ZDkwNzMgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9jb250ZXh0LmMKQEAgLTMxMyw3ICszMTMsNyBAQCBzdGF0
aWMgaW50IGxpdmVfYWN0aXZlX2NvbnRleHQodm9pZCAqYXJnKQogCX0KIAogb3V0X2ZpbGU6Ci0J
bW9ja19maWxlX2ZyZWUoZ3QtPmk5MTUsIGZpbGUpOworCW1vY2tfZmlsZV9wdXQoZmlsZSk7CiAJ
cmV0dXJuIGVycjsKIH0KIApAQCAtNDIzLDcgKzQyMyw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9yZW1v
dGVfY29udGV4dCh2b2lkICphcmcpCiAJfQogCiBvdXRfZmlsZToKLQltb2NrX2ZpbGVfZnJlZShn
dC0+aTkxNSwgZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQog
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2su
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2hhbmdjaGVjay5jCmluZGV4IDg1
ZTljY2Y1YzMwNC4uY2RhYWVlNDQzMmIyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9zZWxmdGVzdF9oYW5nY2hlY2suYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9z
ZWxmdGVzdF9oYW5nY2hlY2suYwpAQCAtNDM5LDcgKzQzOSw3IEBAIHN0YXRpYyBpbnQgaWd0X3Jl
c2V0X25vcCh2b2lkICphcmcpCiAKIAllcnIgPSBpZ3RfZmx1c2hfdGVzdChndC0+aTkxNSk7CiBv
dXQ6Ci0JbW9ja19maWxlX2ZyZWUoZ3QtPmk5MTUsIGZpbGUpOworCW1vY2tfZmlsZV9wdXQoZmls
ZSk7CiAJaWYgKGludGVsX2d0X2lzX3dlZGdlZChndCkpCiAJCWVyciA9IC1FSU87CiAJcmV0dXJu
IGVycjsKQEAgLTUzNSw3ICs1MzUsNyBAQCBzdGF0aWMgaW50IGlndF9yZXNldF9ub3BfZW5naW5l
KHZvaWQgKmFyZykKIAogCWVyciA9IGlndF9mbHVzaF90ZXN0KGd0LT5pOTE1KTsKIG91dDoKLQlt
b2NrX2ZpbGVfZnJlZShndC0+aTkxNSwgZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlp
ZiAoaW50ZWxfZ3RfaXNfd2VkZ2VkKGd0KSkKIAkJZXJyID0gLUVJTzsKIAlyZXR1cm4gZXJyOwpA
QCAtNzUyLDcgKzc1Miw3IEBAIHN0YXRpYyBpbnQgYWN0aXZlX2VuZ2luZSh2b2lkICpkYXRhKQog
CX0KIAogZXJyX2ZpbGU6Ci0JbW9ja19maWxlX2ZyZWUoZW5naW5lLT5pOTE1LCBmaWxlKTsKKwlt
b2NrX2ZpbGVfcHV0KGZpbGUpOwogCXJldHVybiBlcnI7CiB9CiAKQEAgLTEzMjUsNyArMTMyNSw3
IEBAIHN0YXRpYyBpbnQgaWd0X3Jlc2V0X2V2aWN0X3BwZ3R0KHZvaWQgKmFyZykKIAlpOTE1X3Zt
X3B1dCh2bSk7CiAKIG91dDoKLQltb2NrX2ZpbGVfZnJlZShndC0+aTkxNSwgZmlsZSk7CisJbW9j
a19maWxlX3B1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF93b3JrYXJvdW5kcy5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3Qvc2VsZnRlc3Rfd29ya2Fyb3VuZHMuYwppbmRleCBhYmNlNmU0ZWM5YzAuLjVjNjll
YzVjNWVmOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rfd29y
a2Fyb3VuZHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF93b3JrYXJv
dW5kcy5jCkBAIC03MzksNyArNzM5LDcgQEAgc3RhdGljIGludCBsaXZlX2RpcnR5X3doaXRlbGlz
dCh2b2lkICphcmcpCiAJfQogCiBvdXRfZmlsZToKLQltb2NrX2ZpbGVfZnJlZShndC0+aTkxNSwg
ZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQogCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW0uYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbS5jCmluZGV4IGQ4M2Y2YmY2ZDlkNC4uYWE2
MjgyYWRmZDA5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkx
NV9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW0uYwpA
QCAtMTYzLDcgKzE2Myw3IEBAIHN0YXRpYyBpbnQgaWd0X2dlbV9zdXNwZW5kKHZvaWQgKmFyZykK
IAogCWVyciA9IHN3aXRjaF90b19jb250ZXh0KGN0eCk7CiBvdXQ6Ci0JbW9ja19maWxlX2ZyZWUo
aTkxNSwgZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIAlyZXR1cm4gZXJyOwogfQogCkBA
IC0xOTgsNyArMTk4LDcgQEAgc3RhdGljIGludCBpZ3RfZ2VtX2hpYmVybmF0ZSh2b2lkICphcmcp
CiAKIAllcnIgPSBzd2l0Y2hfdG9fY29udGV4dChjdHgpOwogb3V0OgotCW1vY2tfZmlsZV9mcmVl
KGk5MTUsIGZpbGUpOworCW1vY2tfZmlsZV9wdXQoZmlsZSk7CiAJcmV0dXJuIGVycjsKIH0KIApk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2V2aWN0
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYwppbmRl
eCA0MmU5NDgxNDRmMWIuLjQxMDkyZGNlYTViMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2V2aWN0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2V2aWN0LmMKQEAgLTUxNSw3ICs1MTUsNyBAQCBzdGF0aWMg
aW50IGlndF9ldmljdF9jb250ZXh0cyh2b2lkICphcmcpCiAJCXByX2luZm8oIlN1Ym1pdHRlZCAl
bHUgY29udGV4dHMvcmVxdWVzdHMgb24gJXNcbiIsCiAJCQljb3VudCwgZW5naW5lLT5uYW1lKTsK
IAotCQltb2NrX2ZpbGVfZnJlZShpOTE1LCBmaWxlKTsKKwkJbW9ja19maWxlX3B1dChmaWxlKTsK
IAkJaWYgKGVycikKIAkJCWJyZWFrOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ndHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0
ZXN0cy9pOTE1X2dlbV9ndHQuYwppbmRleCAzZjdlODBmYjNiYmQuLmMzZTBkNjNjNGQwYyAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2d0dC5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ndHQuYwpAQCAtMTAy
Niw3ICsxMDI2LDcgQEAgc3RhdGljIGludCBleGVyY2lzZV9wcGd0dChzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYsCiAJaTkxNV92bV9wdXQoJnBwZ3R0LT52bSk7CiAKIG91dF9mcmVl
OgotCW1vY2tfZmlsZV9mcmVlKGRldl9wcml2LCBmaWxlKTsKKwltb2NrX2ZpbGVfcHV0KGZpbGUp
OwogCXJldHVybiBlcnI7CiB9CiAKQEAgLTIwMjIsNyArMjAyMiw3IEBAIHN0YXRpYyBpbnQgaWd0
X2NzX3RsYih2b2lkICphcmcpCiBvdXRfdm06CiAJaTkxNV92bV9wdXQodm0pOwogb3V0X3VubG9j
azoKLQltb2NrX2ZpbGVfZnJlZShpOTE1LCBmaWxlKTsKKwltb2NrX2ZpbGVfcHV0KGZpbGUpOwog
CXJldHVybiBlcnI7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0
ZXN0cy9pOTE1X3JlcXVlc3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1
X3JlcXVlc3QuYwppbmRleCA5ZTZkMzE1OWNkODAuLjdjNTZlZTM4Y2M1YiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfcmVxdWVzdC5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3JlcXVlc3QuYwpAQCAtMTQzMCw3ICsxNDMw
LDcgQEAgc3RhdGljIGludCBsaXZlX2JyZWFkY3J1bWJzX3Ntb2tldGVzdCh2b2lkICphcmcpCiBv
dXRfc21va2U6CiAJa2ZyZWUoc21va2UpOwogb3V0X2ZpbGU6Ci0JbW9ja19maWxlX2ZyZWUoaTkx
NSwgZmlsZSk7CisJbW9ja19maWxlX3B1dChmaWxlKTsKIG91dF9ycG06CiAJaW50ZWxfcnVudGlt
ZV9wbV9wdXQoJmk5MTUtPnJ1bnRpbWVfcG0sIHdha2VyZWYpOwogCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaW50ZWxfbWVtb3J5X3JlZ2lvbi5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX21lbW9yeV9yZWdpb24uYwppbmRleCAxOWUx
Y2NhOGYxNDMuLmZhMjgzY2U0NTMyYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
c2VsZnRlc3RzL2ludGVsX21lbW9yeV9yZWdpb24uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9zZWxmdGVzdHMvaW50ZWxfbWVtb3J5X3JlZ2lvbi5jCkBAIC00MzksNyArNDM5LDcgQEAgc3Rh
dGljIGludCBpZ3RfbG1lbV93cml0ZV9ncHUodm9pZCAqYXJnKQogb3V0X3B1dDoKIAlpOTE1X2dl
bV9vYmplY3RfcHV0KG9iaik7CiBvdXRfZmlsZToKLQltb2NrX2ZpbGVfZnJlZShpOTE1LCBmaWxl
KTsKKwltb2NrX2ZpbGVfcHV0KGZpbGUpOwogCXJldHVybiBlcnI7CiB9CiAKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2RybS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tfZHJtLmMKaW5kZXggMDljNzA0MTUzNDU2Li4xYjYxOWQx
ZjIyOWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2Ry
bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2RybS5jCkBAIC0y
Miw1MiArMjIsMTcgQEAKICAqCiAgKi8KIAorI2luY2x1ZGUgPGRybS9kcm1fZmlsZS5oPgorCiAj
aW5jbHVkZSAibW9ja19kcm0uaCIKIAogc3RydWN0IGRybV9maWxlICptb2NrX2ZpbGUoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB7Ci0Jc3RydWN0IGZpbGUgKmZpbHA7Ci0Jc3RydWN0
IGlub2RlICppbm9kZTsKLQlzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGU7Ci0JaW50IGVycjsKLQotCWlu
b2RlID0ga3phbGxvYyhzaXplb2YoKmlub2RlKSwgR0ZQX0tFUk5FTCk7Ci0JaWYgKCFpbm9kZSkg
ewotCQllcnIgPSAtRU5PTUVNOwotCQlnb3RvIGVycjsKLQl9Ci0KLQlpbm9kZS0+aV9yZGV2ID0g
aTkxNS0+ZHJtLnByaW1hcnktPmluZGV4OwotCi0JZmlscCA9IGt6YWxsb2Moc2l6ZW9mKCpmaWxw
KSwgR0ZQX0tFUk5FTCk7Ci0JaWYgKCFmaWxwKSB7Ci0JCWVyciA9IC1FTk9NRU07Ci0JCWdvdG8g
ZXJyX2lub2RlOwotCX0KLQotCWVyciA9IGRybV9vcGVuKGlub2RlLCBmaWxwKTsKLQlpZiAoZXJy
KQotCQlnb3RvIGVycl9maWxwOworCXN0cnVjdCBmaWxlICpmaWxlOwogCi0JZmlsZSA9IGZpbHAt
PnByaXZhdGVfZGF0YTsKLQltZW1zZXQoJmZpbGUtPmZpbHAsIFBPSVNPTl9JTlVTRSwgc2l6ZW9m
KGZpbGUtPmZpbHApKTsKLQlmaWxlLT5hdXRoZW50aWNhdGVkID0gdHJ1ZTsKLQotCWtmcmVlKGZp
bHApOwotCWtmcmVlKGlub2RlKTsKLQlyZXR1cm4gZmlsZTsKLQotZXJyX2ZpbHA6Ci0Ja2ZyZWUo
ZmlscCk7Ci1lcnJfaW5vZGU6Ci0Ja2ZyZWUoaW5vZGUpOwotZXJyOgotCXJldHVybiBFUlJfUFRS
KGVycik7Ci19Ci0KLXZvaWQgbW9ja19maWxlX2ZyZWUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUsIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkKLXsKLQlzdHJ1Y3QgZmlsZSBmaWxwID0geyAu
cHJpdmF0ZV9kYXRhID0gZmlsZSB9OworCWZpbGUgPSBhbm9uX2RybV9nZXRmaWxlKGk5MTUtPmRy
bS5wcmltYXJ5LCBPX1JEV1IpOworCWlmIChJU19FUlIoZmlsZSkpCisJCXJldHVybiBFUlJfQ0FT
VChmaWxlKTsKIAotCWRybV9yZWxlYXNlKE5VTEwsICZmaWxwKTsKKwlyZXR1cm4gZmlsZS0+cHJp
dmF0ZV9kYXRhOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3Rz
L21vY2tfZHJtLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19kcm0uaApp
bmRleCBiMzliZWVlOWY4ZjYuLmRjNDE5MGJkM2Y1YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tfZHJtLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
c2VsZnRlc3RzL21vY2tfZHJtLmgKQEAgLTI1LDcgKzI1LDEzIEBACiAjaWZuZGVmIF9fTU9DS19E
Uk1fSAogI2RlZmluZSBfX01PQ0tfRFJNX0gKIAorc3RydWN0IGRybV9maWxlOworc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGU7CisKIHN0cnVjdCBkcm1fZmlsZSAqbW9ja19maWxlKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1KTsKLXZvaWQgbW9ja19maWxlX2ZyZWUoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUsIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSk7CitzdGF0aWMgaW5saW5lIHZv
aWQgbW9ja19maWxlX3B1dChzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCit7CisJZnB1dChmaWxlLT5m
aWxwKTsKK30KIAogI2VuZGlmIC8qICFfX01PQ0tfRFJNX0ggKi8KLS0gCjIuMjQuMAoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxp
bmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

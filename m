Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 85EE61ABD3A
	for <lists+intel-gfx@lfdr.de>; Thu, 16 Apr 2020 11:49:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 911256E229;
	Thu, 16 Apr 2020 09:49:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 126596E229
 for <intel-gfx@lists.freedesktop.org>; Thu, 16 Apr 2020 09:49:27 +0000 (UTC)
IronPort-SDR: xqNTJPhR8iaRlEuWC6PkauC8JKQPeQnVYLmtgw/pcOffvN/BtPAYk7AosJ96wGSEQZAXMwGJzl
 wPh3rxR2FomA==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga101.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 16 Apr 2020 02:49:27 -0700
IronPort-SDR: z7uOyqpecZbGDKnHdgOX4GqmARdaW+W49gDcVKXaCuDZroMYzxuiLt6N0CGYtC7gO3b6+uGuR7
 G9B46wUlZfCQ==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.72,390,1580803200"; d="scan'208";a="276421525"
Received: from unknown (HELO [10.249.45.24]) ([10.249.45.24])
 by orsmga008.jf.intel.com with ESMTP; 16 Apr 2020 02:49:25 -0700
To: Animesh Manna <animesh.manna@intel.com>, intel-gfx@lists.freedesktop.org
References: <20200413063420.20668-1-animesh.manna@intel.com>
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Message-ID: <eb5d8471-0f50-6518-3f44-e38e091bb7ec@linux.intel.com>
Date: Thu, 16 Apr 2020 11:49:24 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.5.0
MIME-Version: 1.0
In-Reply-To: <20200413063420.20668-1-animesh.manna@intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH v4] drm/i915/dsb: Pre allocate and late
 cleanup of cmd buffer
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>, Daniel Vetter <daniel.vetter@ffwll.ch>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SGV5LAoKU2VlbXMgd2UncmUgbGFja2luZyBlcnJvciBoYW5kbGluZyBzdGlsbCB3aGVuIGdldCBm
YWlscz8KCn5NYWFydGVuCgpPcCAxMy0wNC0yMDIwIG9tIDA4OjM0IHNjaHJlZWYgQW5pbWVzaCBN
YW5uYToKPiBQcmUtYWxsb2NhdGUgY29tbWFuZCBidWZmZXIgaW4gYXRvbWljX2NvbW1pdCB1c2lu
ZyBpbnRlbF9kc2JfcHJlcGFyZQo+IGZ1bmN0aW9uIHdoaWNoIGFsc28gaW5jbHVkZXMgcGlubmlu
ZyBhbmQgbWFwIGluIGNwdSBkb21haW4uCj4KPiBObyBjaGFuZ2UgaXMgZHNiIHdyaXRlL2NvbW1p
dCBmdW5jdGlvbnMuCj4KPiBOb3cgZHNiIGdldC9wdXQgZnVuY3Rpb24gaXMgcmVmYWN0b3JlZCBh
bmQgY3VycmVudGx5IHVzZWQgb25seSBmb3IKPiByZWZlcmVuY2UgY291bnRpbmcuIEJlbG93IGRz
YiBhcGkgYWRkZWQgdG8gZG8gcmVzcGVjdGl2ZSBqb2IKPiBtZW50aW9uZWQgYmVsb3cuCj4KPiBp
bnRlbF9kc2JfcHJlcGFyZSAtIEFsbG9jYXRlLCBwaW4gYW5kIG1hcCB0aGUgYnVmZmVyLgo+IGlu
dGVsX2RzYl9jbGVhbnVwIC0gVW5waW4gYW5kIHJlbGVhc2UgdGhlIGdlbSBvYmplY3QuCj4KPiBS
RkM6IEluaXRpYWwgcGF0Y2ggZm9yIGRlc2lnbiByZXZpZXcuCj4gdjI6IGluY2x1ZGVkIF9pbml0
KCkgcGFydCBpbiBfcHJlcGFyZSgpLiBbRGFuaWVsLCBWaWxsZV0KPiB2MzogZHNiX2NsZWFudXAg
Y2FsbGVkIGFmdGVyIGNsZWFudXBfcGxhbmVzLiBbRGFuaWVsXQo+IHY0OiBkc2Igc3RydWN0dXJl
IGlzIG1vdmVkIHRvIGludGVsX2NydGNfc3RhdGUgZnJvbSBpbnRlbF9jcnRjLiBbTWFhcnRlbl0K
Pgo+IENjOiBNYWFydGVuIExhbmtob3JzdCA8bWFhcnRlbi5sYW5raG9yc3RAbGludXguaW50ZWwu
Y29tPgo+IENjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29t
Pgo+IENjOiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1bGFAaW50ZWwuY29tPgo+IENjOiBEYW5pZWwg
VmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgo+IFNpZ25lZC1vZmYtYnk6IEFuaW1lc2gg
TWFubmEgPGFuaW1lc2gubWFubmFAaW50ZWwuY29tPgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2NvbG9yLmMgICAgfCAgMTkgKy0KPiAgZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgIHwgIDQ3ICsrKystCj4gIC4uLi9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCAgICB8ICAgNiArLQo+ICBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RzYi5jICAgICAgfCAxNjkgKysrKysrKysrKysrLS0t
LS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHNiLmggICAgICB8ICAg
NiArLQo+ICA1IGZpbGVzIGNoYW5nZWQsIDE3MCBpbnNlcnRpb25zKCspLCA3NyBkZWxldGlvbnMo
LSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Nv
bG9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NvbG9yLmMKPiBpbmRl
eCA5OGVjZTljZDdjZGQuLmZiMmNhZWU5MDczNCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2NvbG9yLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2NvbG9yLmMKPiBAQCAtNzE3LDcgKzcxNyw3IEBAIHN0YXRpYyB2b2lk
IGJkd19sb2FkX2x1dF8xMChzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKPiAgc3RhdGljIHZvaWQg
aXZiX2xvYWRfbHV0X2V4dF9tYXgoc3RydWN0IGludGVsX2NydGMgKmNydGMpCj4gIHsKPiAgCXN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY3J0Yy0+YmFzZS5kZXYp
Owo+IC0Jc3RydWN0IGludGVsX2RzYiAqZHNiID0gaW50ZWxfZHNiX2dldChjcnRjKTsKPiArCXN0
cnVjdCBpbnRlbF9kc2IgKmRzYiA9IGludGVsX2RzYl9nZXQoY3J0Yy0+Y29uZmlnKTsKPiAgCWVu
dW0gcGlwZSBwaXBlID0gY3J0Yy0+cGlwZTsKPiAgCj4gIAkvKiBQcm9ncmFtIHRoZSBtYXggcmVn
aXN0ZXIgdG8gY2xhbXAgdmFsdWVzID4gMS4wLiAqLwo+IEBAIC05MDAsNyArOTAwLDcgQEAgaWNs
X2xvYWRfZ2NtYXgoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCj4g
IAkgICAgICAgY29uc3Qgc3RydWN0IGRybV9jb2xvcl9sdXQgKmNvbG9yKQo+ICB7Cj4gIAlzdHJ1
Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRj
KTsKPiAtCXN0cnVjdCBpbnRlbF9kc2IgKmRzYiA9IGludGVsX2RzYl9nZXQoY3J0Yyk7Cj4gKwlz
dHJ1Y3QgaW50ZWxfZHNiICpkc2IgPSBpbnRlbF9kc2JfZ2V0KGNydGMtPmNvbmZpZyk7Cj4gIAll
bnVtIHBpcGUgcGlwZSA9IGNydGMtPnBpcGU7Cj4gIAo+ICAJLyogRklYTUUgTFVUIGVudHJpZXMg
YXJlIDE2IGJpdCBvbmx5LCBzbyB3ZSBjYW4gcHJvZyAweEZGRkYgbWF4ICovCj4gQEAgLTkxNiw3
ICs5MTYsNyBAQCBpY2xfcHJvZ3JhbV9nYW1tYV9zdXBlcmZpbmVfc2VnbWVudChjb25zdCBzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKPiAgCXN0cnVjdCBpbnRlbF9jcnRjICpj
cnRjID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOwo+ICAJY29uc3Qgc3Ry
dWN0IGRybV9wcm9wZXJ0eV9ibG9iICpibG9iID0gY3J0Y19zdGF0ZS0+aHcuZ2FtbWFfbHV0Owo+
ICAJY29uc3Qgc3RydWN0IGRybV9jb2xvcl9sdXQgKmx1dCA9IGJsb2ItPmRhdGE7Cj4gLQlzdHJ1
Y3QgaW50ZWxfZHNiICpkc2IgPSBpbnRlbF9kc2JfZ2V0KGNydGMpOwo+ICsJc3RydWN0IGludGVs
X2RzYiAqZHNiID0gaW50ZWxfZHNiX2dldChjcnRjLT5jb25maWcpOwo+ICAJZW51bSBwaXBlIHBp
cGUgPSBjcnRjLT5waXBlOwo+ICAJaW50IGk7Cj4gIAo+IEBAIC05NDksNyArOTQ5LDcgQEAgaWNs
X3Byb2dyYW1fZ2FtbWFfbXVsdGlfc2VnbWVudChjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqY3J0Y19zdGF0ZSkKPiAgCWNvbnN0IHN0cnVjdCBkcm1fcHJvcGVydHlfYmxvYiAqYmxvYiA9
IGNydGNfc3RhdGUtPmh3LmdhbW1hX2x1dDsKPiAgCWNvbnN0IHN0cnVjdCBkcm1fY29sb3JfbHV0
ICpsdXQgPSBibG9iLT5kYXRhOwo+ICAJY29uc3Qgc3RydWN0IGRybV9jb2xvcl9sdXQgKmVudHJ5
Owo+IC0Jc3RydWN0IGludGVsX2RzYiAqZHNiID0gaW50ZWxfZHNiX2dldChjcnRjKTsKPiArCXN0
cnVjdCBpbnRlbF9kc2IgKmRzYiA9IGludGVsX2RzYl9nZXQoY3J0Yy0+Y29uZmlnKTsKPiAgCWVu
dW0gcGlwZSBwaXBlID0gY3J0Yy0+cGlwZTsKPiAgCWludCBpOwo+ICAKPiBAQCAtMTAwMyw3ICsx
MDAzLDE2IEBAIHN0YXRpYyB2b2lkIGljbF9sb2FkX2x1dHMoY29uc3Qgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUpCj4gIHsKPiAgCWNvbnN0IHN0cnVjdCBkcm1fcHJvcGVydHlf
YmxvYiAqZ2FtbWFfbHV0ID0gY3J0Y19zdGF0ZS0+aHcuZ2FtbWFfbHV0Owo+ICAJc3RydWN0IGlu
dGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7Cj4g
LQlzdHJ1Y3QgaW50ZWxfZHNiICpkc2IgPSBpbnRlbF9kc2JfZ2V0KGNydGMpOwo+ICsJc3RydWN0
IGludGVsX2RzYiAqZHNiID0gaW50ZWxfZHNiX2dldChjcnRjLT5jb25maWcpOwo+ICsKPiArCS8q
Cj4gKwkgKiBUT0RPOiBDdXJyZW50bHkgZHNiIGJ1ZmZlciBmaWxsaW5nIGlzIGRvbmUgaW4gbG9h
ZF9sdXQoKSB3aGljaAo+ICsJICogY2FuIGJlIGRvbmUgbXVjaCBlYXJsaWVyLCBsaWtlIGluaXRp
YWwgc3RhZ2Ugb2YgYXRvbWljX2NvbW1pdCgpLgo+ICsJICogQXMgY3VycmVudGx5IHJlcGxhY2lu
ZyB0aGUgbW1pby13cml0ZSB3aXRoIGRzYi13cml0ZSBzbyB0aGUgc2FtZQo+ICsJICogbG9hZF9s
dXQoKSBhcGkgaXMgdXNlZCBmb3IgZHNiIGJ1ZmZlciBjcmVhdGlvbiB3aGljaCBtYXkgbm90Cj4g
KwkgKiBmaXQgaW4gaW5pdGlhbCBzdGFnZS4gTmVlZCB0byBjcmVhdGUgYSBzZXBhcmF0ZSBpbnRl
cmZhY2UgYW5kCj4gKwkgKiBhIGRpZmZlcmVudCBwYXRoIGluIGNvbG9yIGZyYW1ld29yayB3aGls
ZSBkZWFsaW5nIHdpdGggZHNiLgo+ICsJICovCj4gIAo+ICAJaWYgKGNydGNfc3RhdGUtPmh3LmRl
Z2FtbWFfbHV0KQo+ICAJCWdsa19sb2FkX2RlZ2FtbWFfbHV0KGNydGNfc3RhdGUpOwo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCj4gaW5kZXggNzBlYzMw
MWZlNmUzLi40MmM0ZDZjN2YzMzQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2Rpc3BsYXkuYwo+IEBAIC0xNDg0NCw4ICsxNDg0NCwyOCBAQCBzdGF0aWMgaW50
IGludGVsX2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAKPiAgc3RhdGlj
IGludCBpbnRlbF9hdG9taWNfcHJlcGFyZV9jb21taXQoc3RydWN0IGludGVsX2F0b21pY19zdGF0
ZSAqc3RhdGUpCj4gIHsKPiAtCXJldHVybiBkcm1fYXRvbWljX2hlbHBlcl9wcmVwYXJlX3BsYW5l
cyhzdGF0ZS0+YmFzZS5kZXYsCj4gLQkJCQkJCSZzdGF0ZS0+YmFzZSk7Cj4gKwlzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsKPiArCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjOwo+
ICsJaW50IGksIHJldDsKPiArCj4gKwlyZXQgPSBkcm1fYXRvbWljX2hlbHBlcl9wcmVwYXJlX3Bs
YW5lcyhzdGF0ZS0+YmFzZS5kZXYsICZzdGF0ZS0+YmFzZSk7Cj4gKwlpZiAocmV0IDwgMCkKPiAr
CQlyZXR1cm4gcmV0Owo+ICsKPiArCS8qCj4gKwkgKiBGYWlsdXJlIGluIERTQiBidWZmZXIgY3Jl
YXRpb24gZW5hYmxlIGZhbGxiYWNrIG1taW8gZm9yIHJlZ2lzdGVyCj4gKwkgKiBwcm9ncmFtbWlu
ZyBhbmQgZXJyb25lb3VzIHBhdGggd2lsbCBiZSBoYW5kbGVkIGJ5IGRzcC13cml0ZSBhcGkuCj4g
KwkgKi8KPiArCWZvcl9lYWNoX25ld19pbnRlbF9jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBj
cnRjX3N0YXRlLCBpKSB7Cj4gKwkJYm9vbCBtb2RlX2NoYW5nZWQgPSBuZWVkc19tb2Rlc2V0KGNy
dGNfc3RhdGUpOwo+ICsKPiArCQlpZiAobW9kZV9jaGFuZ2VkIHx8IGNydGNfc3RhdGUtPnVwZGF0
ZV9waXBlIHx8Cj4gKwkJICAgIGNydGNfc3RhdGUtPnVhcGkuY29sb3JfbWdtdF9jaGFuZ2VkKSB7
Cj4gKwkJCWludGVsX2RzYl9wcmVwYXJlKGNydGNfc3RhdGUpOwo+ICsJCX0KPiArCX0KPiArCj4g
KwlyZXR1cm4gMDsKPiAgfQo+ICAKPiAgdTMyIGludGVsX2NydGNfZ2V0X3ZibGFua19jb3VudGVy
KHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjKQo+IEBAIC0xNTI5OCwxNSArMTUzMTgsMjYgQEAgc3Rh
dGljIHZvaWQgaW50ZWxfYXRvbWljX2NvbW1pdF9mZW5jZV93YWl0KHN0cnVjdCBpbnRlbF9hdG9t
aWNfc3RhdGUgKmludGVsX3N0YXQKPiAgCQkgICAgJndhaXRfcmVzZXQpOwo+ICB9Cj4gIAo+ICtz
dGF0aWMgdm9pZCBpbnRlbF9jbGVhbnVwX2RzYnMoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAq
c3RhdGUpCj4gK3sKPiArCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlOwo+ICsJ
c3RydWN0IGludGVsX2NydGMgKmNydGM7Cj4gKwlpbnQgaTsKPiArCj4gKwlmb3JfZWFjaF9uZXdf
aW50ZWxfY3J0Y19pbl9zdGF0ZShzdGF0ZSwgY3J0YywgY3J0Y19zdGF0ZSwgaSkKPiArCQlpbnRl
bF9kc2JfY2xlYW51cChjcnRjX3N0YXRlKTsKPiArfQo+ICsKPiAgc3RhdGljIHZvaWQgaW50ZWxf
YXRvbWljX2NsZWFudXBfd29yayhzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCj4gIHsKPiAtCXN0
cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSA9Cj4gLQkJY29udGFpbmVyX29mKHdvcmssIHN0
cnVjdCBkcm1fYXRvbWljX3N0YXRlLCBjb21taXRfd29yayk7Cj4gLQlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUoc3RhdGUtPmRldik7Cj4gKwlzdHJ1Y3QgaW50ZWxfYXRv
bWljX3N0YXRlICpzdGF0ZSA9Cj4gKwkJY29udGFpbmVyX29mKHdvcmssIHN0cnVjdCBpbnRlbF9h
dG9taWNfc3RhdGUsIGJhc2UuY29tbWl0X3dvcmspOwo+ICsJc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7Cj4gIAo+IC0JZHJtX2F0b21pY19o
ZWxwZXJfY2xlYW51cF9wbGFuZXMoJmk5MTUtPmRybSwgc3RhdGUpOwo+IC0JZHJtX2F0b21pY19o
ZWxwZXJfY29tbWl0X2NsZWFudXBfZG9uZShzdGF0ZSk7Cj4gLQlkcm1fYXRvbWljX3N0YXRlX3B1
dChzdGF0ZSk7Cj4gKwlkcm1fYXRvbWljX2hlbHBlcl9jbGVhbnVwX3BsYW5lcygmaTkxNS0+ZHJt
LCAmc3RhdGUtPmJhc2UpOwo+ICsJaW50ZWxfY2xlYW51cF9kc2JzKHN0YXRlKTsKPiArCWRybV9h
dG9taWNfaGVscGVyX2NvbW1pdF9jbGVhbnVwX2RvbmUoJnN0YXRlLT5iYXNlKTsKPiArCWRybV9h
dG9taWNfc3RhdGVfcHV0KCZzdGF0ZS0+YmFzZSk7Cj4gIAo+ICAJaW50ZWxfYXRvbWljX2hlbHBl
cl9mcmVlX3N0YXRlKGk5MTUpOwo+ICB9Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgKPiBpbmRleCBiYThjMDgxNDVjODguLjhiMjFi
YWIwODhlYSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXlfdHlwZXMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheV90eXBlcy5oCj4gQEAgLTEwNzksNiArMTA3OSw5IEBAIHN0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlIHsKPiAgCj4gIAkvKiBPbmx5IHZhbGlkIG9uIFRHTCsgKi8KPiAgCWVudW0gdHJh
bnNjb2RlciBtc3RfbWFzdGVyX3RyYW5zY29kZXI7Cj4gKwo+ICsJLyogRm9yIERTQiByZWxhdGVk
IGluZm8gKi8KPiArCXN0cnVjdCBpbnRlbF9kc2IgZHNiOwo+ICB9Owo+ICAKPiAgZW51bSBpbnRl
bF9waXBlX2NyY19zb3VyY2Ugewo+IEBAIC0xMTQ4LDkgKzExNTEsNiBAQCBzdHJ1Y3QgaW50ZWxf
Y3J0YyB7Cj4gIAkvKiBzY2FsZXJzIGF2YWlsYWJsZSBvbiB0aGlzIGNydGMgKi8KPiAgCWludCBu
dW1fc2NhbGVyczsKPiAgCj4gLQkvKiBwZXIgcGlwZSBEU0IgcmVsYXRlZCBpbmZvICovCj4gLQlz
dHJ1Y3QgaW50ZWxfZHNiIGRzYjsKPiAtCj4gICNpZmRlZiBDT05GSUdfREVCVUdfRlMKPiAgCXN0
cnVjdCBpbnRlbF9waXBlX2NyYyBwaXBlX2NyYzsKPiAgI2VuZGlmCj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHNiLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2RzYi5jCj4gaW5kZXggZDdhNmJmMjI3N2RmLi4yYzU4NDAyNDBk
ZGMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kc2Iu
Ywo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHNiLmMKPiBAQCAt
MzQsOSArMzQsOTIgQEAKPiAgI2RlZmluZSBEU0JfQllURV9FTl9TSElGVAkJMjAKPiAgI2RlZmlu
ZSBEU0JfUkVHX1ZBTFVFX01BU0sJCTB4ZmZmZmYKPiAgCj4gKy8qKgo+ICsgKiBpbnRlbF9kc2Jf
cHJlcGFyZSgpIC0gQWxsb2NhdGUsIHBpbiBhbmQgbWFwIHRoZSBEU0IgY29tbWFuZCBidWZmZXIu
Cj4gKyAqIEBjcnRjOiBpbnRlbF9jcnRjIHN0cnVjdHVyZSB0byBnZXQgcGlwZSBpbmZvLgo+ICsg
Kgo+ICsgKiBUaGlzIGZ1bmN0aW9uIHByZXBhcmUgdGhlIGNvbW1hbmQgYnVmZmVyIHdoaWNoIGlz
IHVzZWQgdG8gc3RvcmUgZHNiCj4gKyAqIGluc3RydWN0aW9ucyB3aXRoIGRhdGEuCj4gKyAqLwo+
ICsKPiArdm9pZCBpbnRlbF9kc2JfcHJlcGFyZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0
Y19zdGF0ZSkKPiArewo+ICsJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRj
KGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7Cj4gKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSA9IHRvX2k5MTUoY3J0Yy0+YmFzZS5kZXYpOwo+ICsJc3RydWN0IGludGVsX2RzYiAqZHNiID0g
JmNydGNfc3RhdGUtPmRzYjsKPiArCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmo7Cj4g
KwlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKPiArCXUzMiAqYnVmOwo+ICsJaW50ZWxfd2FrZXJlZl90
IHdha2VyZWY7Cj4gKwo+ICsJaWYgKCFIQVNfRFNCKGk5MTUpIHx8IGRzYi0+Y21kX2J1ZikKPiAr
CQlyZXR1cm47Cj4gKwo+ICsJd2FrZXJlZiA9IGludGVsX3J1bnRpbWVfcG1fZ2V0KCZpOTE1LT5y
dW50aW1lX3BtKTsKPiArCj4gKwlvYmogPSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX2ludGVybmFs
KGk5MTUsIERTQl9CVUZfU0laRSk7Cj4gKwlpZiAoSVNfRVJSKG9iaikpIHsKPiArCQlEUk1fRVJS
T1IoIkdlbSBvYmplY3QgY3JlYXRpb24gZmFpbGVkXG4iKTsKPiArCQlnb3RvIG91dDsKPiArCX0K
PiArCj4gKwl2bWEgPSBpOTE1X2dlbV9vYmplY3RfZ2d0dF9waW4ob2JqLCBOVUxMLCAwLCAwLCAw
KTsKPiArCWlmIChJU19FUlIodm1hKSkgewo+ICsJCURSTV9FUlJPUigiVm1hIGNyZWF0aW9uIGZh
aWxlZFxuIik7Cj4gKwkJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwo+ICsJCWdvdG8gb3V0Owo+
ICsJfQo+ICsKPiArCWJ1ZiA9IGk5MTVfZ2VtX29iamVjdF9waW5fbWFwKHZtYS0+b2JqLCBJOTE1
X01BUF9XQyk7Cj4gKwlpZiAoSVNfRVJSKGJ1ZikpIHsKPiArCQlEUk1fRVJST1IoIkNvbW1hbmQg
YnVmZmVyIGNyZWF0aW9uIGZhaWxlZFxuIik7Cj4gKwkJZ290byBvdXQ7Cj4gKwl9Cj4gKwo+ICsJ
ZHNiLT5pZCA9IERTQjE7Cj4gKwlkc2ItPnZtYSA9IHZtYTsKPiArCWRzYi0+Y21kX2J1ZiA9IGJ1
ZjsKPiArCj4gK291dDoKPiArCS8qCj4gKwkgKiBPbiBlcnJvciBkc2ItPmNtZF9idWYgd2lsbCBj
b250aW51ZSB0byBiZSBOVUxMLCBtYWtpbmcgdGhlIHdyaXRlcwo+ICsJICogcGFzcy10aHJvdWdo
LiBMZWF2ZSB0aGUgZGFuZ2xpbmcgcmVmIHRvIGJlIHJlbW92ZWQgbGF0ZXIgYnkgdGhlCj4gKwkg
KiBjb3JyZXNwb25kaW5nIGludGVsX2RzYl9wdXQoKTogdGhlIGltcG9ydGFudCBlcnJvciBtZXNz
YWdlIHdpbGwKPiArCSAqIGFscmVhZHkgYmUgbG9nZ2VkIGFib3ZlLgo+ICsJICovCj4gKwo+ICsJ
aW50ZWxfcnVudGltZV9wbV9wdXQoJmk5MTUtPnJ1bnRpbWVfcG0sIHdha2VyZWYpOwo+ICt9Cj4g
Kwo+ICsvKioKPiArICogaW50ZWxfZHNiX2NsZWFudXAoKSAtIFRvIGNsZWFudXAgRFNCIGNvbnRl
eHQuCj4gKyAqIEBkc2I6IGludGVsX2RzYiBzdHJ1Y3R1cmUuCj4gKyAqCj4gKyAqIFRoaXMgZnVu
Y3Rpb24gY2xlYW51cCB0aGUgRFNCIGNvbnRleHQgYnkgdW5waW5uaW5nIGFuZCByZWxlYXNpbmcK
PiArICogdGhlIFZNQSBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIGl0Lgo+ICsgKi8KPiArCj4gK3Zv
aWQgaW50ZWxfZHNiX2NsZWFudXAoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUp
Cj4gK3sKPiArCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0
YXRlLT51YXBpLmNydGMpOwo+ICsJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19p
OTE1KGNydGMtPmJhc2UuZGV2KTsKPiArCXN0cnVjdCBpbnRlbF9kc2IgKmRzYiA9ICZjcnRjX3N0
YXRlLT5kc2I7Cj4gKwo+ICsJaWYgKCFIQVNfRFNCKGk5MTUpKQo+ICsJCXJldHVybjsKPiArCj4g
KwlpZiAoZHNiLT52bWEpIHsKPiArCQlpOTE1X3ZtYV91bnBpbl9hbmRfcmVsZWFzZSgmZHNiLT52
bWEsIEk5MTVfVk1BX1JFTEVBU0VfTUFQKTsKPiArCQlkc2ItPnZtYSA9IE5VTEw7Cj4gKwkJZHNi
LT5jbWRfYnVmID0gTlVMTDsKPiArCX0KPiArfQo+ICsKPiAgc3RhdGljIGlubGluZSBib29sIGlz
X2RzYl9idXN5KHN0cnVjdCBpbnRlbF9kc2IgKmRzYikKPiAgewo+IC0Jc3RydWN0IGludGVsX2Ny
dGMgKmNydGMgPSBjb250YWluZXJfb2YoZHNiLCB0eXBlb2YoKmNydGMpLCBkc2IpOwo+ICsJc3Ry
dWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUgPQo+ICsJCWNvbnRhaW5lcl9vZihkc2Is
IHR5cGVvZigqY3J0Y19zdGF0ZSksIGRzYik7Cj4gKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9
IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKTsKPiAgCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY3J0Yy0+YmFzZS5kZXYpOwo+ICAJZW51bSBw
aXBlIHBpcGUgPSBjcnRjLT5waXBlOwo+ICAKPiBAQCAtNDUsNyArMTI4LDkgQEAgc3RhdGljIGlu
bGluZSBib29sIGlzX2RzYl9idXN5KHN0cnVjdCBpbnRlbF9kc2IgKmRzYikKPiAgCj4gIHN0YXRp
YyBpbmxpbmUgYm9vbCBpbnRlbF9kc2JfZW5hYmxlX2VuZ2luZShzdHJ1Y3QgaW50ZWxfZHNiICpk
c2IpCj4gIHsKPiAtCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gY29udGFpbmVyX29mKGRzYiwg
dHlwZW9mKCpjcnRjKSwgZHNiKTsKPiArCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0
YXRlID0KPiArCQljb250YWluZXJfb2YoZHNiLCB0eXBlb2YoKmNydGNfc3RhdGUpLCBkc2IpOwo+
ICsJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVh
cGkuY3J0Yyk7Cj4gIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1
KGNydGMtPmJhc2UuZGV2KTsKPiAgCWVudW0gcGlwZSBwaXBlID0gY3J0Yy0+cGlwZTsKPiAgCXUz
MiBkc2JfY3RybDsKPiBAQCAtNjUsNyArMTUwLDkgQEAgc3RhdGljIGlubGluZSBib29sIGludGVs
X2RzYl9lbmFibGVfZW5naW5lKHN0cnVjdCBpbnRlbF9kc2IgKmRzYikKPiAgCj4gIHN0YXRpYyBp
bmxpbmUgYm9vbCBpbnRlbF9kc2JfZGlzYWJsZV9lbmdpbmUoc3RydWN0IGludGVsX2RzYiAqZHNi
KQo+ICB7Cj4gLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IGNvbnRhaW5lcl9vZihkc2IsIHR5
cGVvZigqY3J0YyksIGRzYik7Cj4gKwlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0
ZSA9Cj4gKwkJY29udGFpbmVyX29mKGRzYiwgdHlwZW9mKCpjcnRjX3N0YXRlKSwgZHNiKTsKPiAr
CXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0YXRlLT51YXBp
LmNydGMpOwo+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShj
cnRjLT5iYXNlLmRldik7Cj4gIAllbnVtIHBpcGUgcGlwZSA9IGNydGMtPnBpcGU7Cj4gIAl1MzIg
ZHNiX2N0cmw7Cj4gQEAgLTg0LDY4ICsxNzEsMjYgQEAgc3RhdGljIGlubGluZSBib29sIGludGVs
X2RzYl9kaXNhYmxlX2VuZ2luZShzdHJ1Y3QgaW50ZWxfZHNiICpkc2IpCj4gIH0KPiAgCj4gIC8q
Kgo+IC0gKiBpbnRlbF9kc2JfZ2V0KCkgLSBBbGxvY2F0ZSBEU0IgY29udGV4dCBhbmQgcmV0dXJu
IGEgRFNCIGluc3RhbmNlLgo+ICsgKiBpbnRlbF9kc2JfZ2V0KCkgLSBSZXR1cm4gYSBEU0IgaW5z
dGFuY2UgYW5kIGluY3JlYXNlIHJlZmVyZW5jZSBjb3VudC4KPiAgICogQGNydGM6IGludGVsX2Ny
dGMgc3RydWN0dXJlIHRvIGdldCBwaXBlIGluZm8uCj4gICAqCj4gICAqIFRoaXMgZnVuY3Rpb24g
cHJvdmlkZXMgaGFuZGxlIG9mIGEgRFNCIGluc3RhbmNlLCBmb3IgdGhlIGZ1cnRoZXIgRFNCCj4g
ICAqIG9wZXJhdGlvbnMuCj4gICAqCj4gICAqIFJldHVybnM6IGFkZHJlc3Mgb2YgSW50ZWxfZHNi
IGluc3RhbmNlIHJlcXVlc3RlZCBmb3IuCj4gLSAqIEZhaWx1cmU6IFJldHVybnMgdGhlIHNhbWUg
RFNCIGluc3RhbmNlLCBidXQgd2l0aG91dCBhIGNvbW1hbmQgYnVmZmVyLgo+ICAgKi8KPiAgCj4g
IHN0cnVjdCBpbnRlbF9kc2IgKgo+IC1pbnRlbF9kc2JfZ2V0KHN0cnVjdCBpbnRlbF9jcnRjICpj
cnRjKQo+ICtpbnRlbF9kc2JfZ2V0KHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
KQo+ICB7Cj4gLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gY3J0Yy0+YmFzZS5kZXY7Cj4gLQlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUoZGV2KTsKPiAtCXN0cnVjdCBp
bnRlbF9kc2IgKmRzYiA9ICZjcnRjLT5kc2I7Cj4gLQlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqOwo+IC0Jc3RydWN0IGk5MTVfdm1hICp2bWE7Cj4gLQl1MzIgKmJ1ZjsKPiAtCWludGVs
X3dha2VyZWZfdCB3YWtlcmVmOwo+ICsJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRl
bF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7Cj4gKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSA9IHRvX2k5MTUoY3J0Yy0+YmFzZS5kZXYpOwo+ICsJc3RydWN0IGludGVsX2RzYiAq
ZHNiID0gJmNydGNfc3RhdGUtPmRzYjsKPiAgCj4gIAlpZiAoIUhBU19EU0IoaTkxNSkpCj4gIAkJ
cmV0dXJuIGRzYjsKPiAgCj4gLQlpZiAoZHNiLT5yZWZjb3VudCsrICE9IDApCj4gLQkJcmV0dXJu
IGRzYjsKPiAtCj4gLQl3YWtlcmVmID0gaW50ZWxfcnVudGltZV9wbV9nZXQoJmk5MTUtPnJ1bnRp
bWVfcG0pOwo+IC0KPiAtCW9iaiA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfaW50ZXJuYWwoaTkx
NSwgRFNCX0JVRl9TSVpFKTsKPiAtCWlmIChJU19FUlIob2JqKSkgewo+IC0JCWRybV9lcnIoJmk5
MTUtPmRybSwgIkdlbSBvYmplY3QgY3JlYXRpb24gZmFpbGVkXG4iKTsKPiAtCQlnb3RvIG91dDsK
PiAtCX0KPiAtCj4gLQl2bWEgPSBpOTE1X2dlbV9vYmplY3RfZ2d0dF9waW4ob2JqLCBOVUxMLCAw
LCAwLCAwKTsKPiAtCWlmIChJU19FUlIodm1hKSkgewo+IC0JCWRybV9lcnIoJmk5MTUtPmRybSwg
IlZtYSBjcmVhdGlvbiBmYWlsZWRcbiIpOwo+IC0JCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsK
PiAtCQlnb3RvIG91dDsKPiAtCX0KPiAtCj4gLQlidWYgPSBpOTE1X2dlbV9vYmplY3RfcGluX21h
cCh2bWEtPm9iaiwgSTkxNV9NQVBfV0MpOwo+IC0JaWYgKElTX0VSUihidWYpKSB7Cj4gLQkJZHJt
X2VycigmaTkxNS0+ZHJtLCAiQ29tbWFuZCBidWZmZXIgY3JlYXRpb24gZmFpbGVkXG4iKTsKPiAt
CQlnb3RvIG91dDsKPiAtCX0KPiAtCj4gLQlkc2ItPmlkID0gRFNCMTsKPiAtCWRzYi0+dm1hID0g
dm1hOwo+IC0JZHNiLT5jbWRfYnVmID0gYnVmOwo+IC0KPiAtb3V0Ogo+IC0JLyoKPiAtCSAqIE9u
IGVycm9yIGRzYi0+Y21kX2J1ZiB3aWxsIGNvbnRpbnVlIHRvIGJlIE5VTEwsIG1ha2luZyB0aGUg
d3JpdGVzCj4gLQkgKiBwYXNzLXRocm91Z2guIExlYXZlIHRoZSBkYW5nbGluZyByZWYgdG8gYmUg
cmVtb3ZlZCBsYXRlciBieSB0aGUKPiAtCSAqIGNvcnJlc3BvbmRpbmcgaW50ZWxfZHNiX3B1dCgp
OiB0aGUgaW1wb3J0YW50IGVycm9yIG1lc3NhZ2Ugd2lsbAo+IC0JICogYWxyZWFkeSBiZSBsb2dn
ZWQgYWJvdmUuCj4gLQkgKi8KPiAtCj4gLQlpbnRlbF9ydW50aW1lX3BtX3B1dCgmaTkxNS0+cnVu
dGltZV9wbSwgd2FrZXJlZik7Cj4gLQo+ICsJZHNiLT5yZWZjb3VudCsrOwo+ICAJcmV0dXJuIGRz
YjsKPiAgfQo+ICAKPiBAQCAtMTUzLDEzICsxOTgsMTUgQEAgaW50ZWxfZHNiX2dldChzdHJ1Y3Qg
aW50ZWxfY3J0YyAqY3J0YykKPiAgICogaW50ZWxfZHNiX3B1dCgpIC0gVG8gZGVzdHJveSBEU0Ig
Y29udGV4dC4KPiAgICogQGRzYjogaW50ZWxfZHNiIHN0cnVjdHVyZS4KPiAgICoKPiAtICogVGhp
cyBmdW5jdGlvbiBkZXN0cm95cyB0aGUgRFNCIGNvbnRleHQgYWxsb2NhdGVkIGJ5IGEgZHNiX2dl
dCgpLCBieQo+IC0gKiB1bnBpbm5pbmcgYW5kIHJlbGVhc2luZyB0aGUgVk1BIG9iamVjdCBhc3Nv
Y2lhdGVkIHdpdGggaXQuCj4gKyAqIFRoaXMgZnVuY3Rpb24gZGVjcmVhc2UgdGhlIHJlZmVyZW5j
ZSBjb3VudCBhbmQgcmVzZXQgdGhlIGNvbW1hbmQKPiArICogYnVmZmVyIHBvc2l0aW9uLgo+ICAg
Ki8KPiAgCj4gIHZvaWQgaW50ZWxfZHNiX3B1dChzdHJ1Y3QgaW50ZWxfZHNiICpkc2IpCj4gIHsK
PiAtCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gY29udGFpbmVyX29mKGRzYiwgdHlwZW9mKCpj
cnRjKSwgZHNiKTsKPiArCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlID0KPiAr
CQljb250YWluZXJfb2YoZHNiLCB0eXBlb2YoKmNydGNfc3RhdGUpLCBkc2IpOwo+ICsJc3RydWN0
IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7
Cj4gIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUoY3J0Yy0+YmFzZS5k
ZXYpOwo+ICAKPiAgCWlmICghSEFTX0RTQihpOTE1KSkKPiBAQCAtMTY5LDggKzIxNiw2IEBAIHZv
aWQgaW50ZWxfZHNiX3B1dChzdHJ1Y3QgaW50ZWxfZHNiICpkc2IpCj4gIAkJcmV0dXJuOwo+ICAK
PiAgCWlmICgtLWRzYi0+cmVmY291bnQgPT0gMCkgewo+IC0JCWk5MTVfdm1hX3VucGluX2FuZF9y
ZWxlYXNlKCZkc2ItPnZtYSwgSTkxNV9WTUFfUkVMRUFTRV9NQVApOwo+IC0JCWRzYi0+Y21kX2J1
ZiA9IE5VTEw7Cj4gIAkJZHNiLT5mcmVlX3BvcyA9IDA7Cj4gIAkJZHNiLT5pbnNfc3RhcnRfb2Zm
c2V0ID0gMDsKPiAgCX0KPiBAQCAtMTkyLDcgKzIzNyw5IEBAIHZvaWQgaW50ZWxfZHNiX3B1dChz
dHJ1Y3QgaW50ZWxfZHNiICpkc2IpCj4gIHZvaWQgaW50ZWxfZHNiX2luZGV4ZWRfcmVnX3dyaXRl
KHN0cnVjdCBpbnRlbF9kc2IgKmRzYiwgaTkxNV9yZWdfdCByZWcsCj4gIAkJCQkgdTMyIHZhbCkK
PiAgewo+IC0Jc3RydWN0IGludGVsX2NydGMgKmNydGMgPSBjb250YWluZXJfb2YoZHNiLCB0eXBl
b2YoKmNydGMpLCBkc2IpOwo+ICsJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUg
PQo+ICsJCWNvbnRhaW5lcl9vZihkc2IsIHR5cGVvZigqY3J0Y19zdGF0ZSksIGRzYik7Cj4gKwlz
dHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5j
cnRjKTsKPiAgCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY3J0
Yy0+YmFzZS5kZXYpOwo+ICAJdTMyICpidWYgPSBkc2ItPmNtZF9idWY7Cj4gIAl1MzIgcmVnX3Zh
bDsKPiBAQCAtMjY3LDcgKzMxNCw5IEBAIHZvaWQgaW50ZWxfZHNiX2luZGV4ZWRfcmVnX3dyaXRl
KHN0cnVjdCBpbnRlbF9kc2IgKmRzYiwgaTkxNV9yZWdfdCByZWcsCj4gICAqLwo+ICB2b2lkIGlu
dGVsX2RzYl9yZWdfd3JpdGUoc3RydWN0IGludGVsX2RzYiAqZHNiLCBpOTE1X3JlZ190IHJlZywg
dTMyIHZhbCkKPiAgewo+IC0Jc3RydWN0IGludGVsX2NydGMgKmNydGMgPSBjb250YWluZXJfb2Yo
ZHNiLCB0eXBlb2YoKmNydGMpLCBkc2IpOwo+ICsJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNy
dGNfc3RhdGUgPQo+ICsJCWNvbnRhaW5lcl9vZihkc2IsIHR5cGVvZigqY3J0Y19zdGF0ZSksIGRz
Yik7Cj4gKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0
ZS0+dWFwaS5jcnRjKTsKPiAgCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRv
X2k5MTUoY3J0Yy0+YmFzZS5kZXYpOwo+ICAJdTMyICpidWYgPSBkc2ItPmNtZF9idWY7Cj4gIAo+
IEBAIC0yOTcsNyArMzQ2LDkgQEAgdm9pZCBpbnRlbF9kc2JfcmVnX3dyaXRlKHN0cnVjdCBpbnRl
bF9kc2IgKmRzYiwgaTkxNV9yZWdfdCByZWcsIHUzMiB2YWwpCj4gICAqLwo+ICB2b2lkIGludGVs
X2RzYl9jb21taXQoc3RydWN0IGludGVsX2RzYiAqZHNiKQo+ICB7Cj4gLQlzdHJ1Y3QgaW50ZWxf
Y3J0YyAqY3J0YyA9IGNvbnRhaW5lcl9vZihkc2IsIHR5cGVvZigqY3J0YyksIGRzYik7Cj4gKwlz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSA9Cj4gKwkJY29udGFpbmVyX29mKGRz
YiwgdHlwZW9mKCpjcnRjX3N0YXRlKSwgZHNiKTsKPiArCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRj
ID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOwo+ICAJc3RydWN0IGRybV9k
ZXZpY2UgKmRldiA9IGNydGMtPmJhc2UuZGV2Owo+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gdG9faTkxNShkZXYpOwo+ICAJZW51bSBwaXBlIHBpcGUgPSBjcnRjLT5waXBl
Owo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RzYi5o
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kc2IuaAo+IGluZGV4IDM5NWVm
OWNlNTU4ZS4uNjVlMmQwZDFjNzFlIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHNiLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2RzYi5oCj4gQEAgLTEwLDcgKzEwLDcgQEAKPiAgCj4gICNpbmNsdWRlICJpOTE1X3Jl
Zy5oIgo+ICAKPiAtc3RydWN0IGludGVsX2NydGM7Cj4gK3N0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
Owo+ICBzdHJ1Y3QgaTkxNV92bWE7Cj4gIAo+ICBlbnVtIGRzYl9pZCB7Cj4gQEAgLTQxLDggKzQx
LDEwIEBAIHN0cnVjdCBpbnRlbF9kc2Igewo+ICAJdTMyIGluc19zdGFydF9vZmZzZXQ7Cj4gIH07
Cj4gIAo+ICt2b2lkIGludGVsX2RzYl9wcmVwYXJlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpj
cnRjX3N0YXRlKTsKPiArdm9pZCBpbnRlbF9kc2JfY2xlYW51cChzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZSAqY3J0Y19zdGF0ZSk7Cj4gIHN0cnVjdCBpbnRlbF9kc2IgKgo+IC1pbnRlbF9kc2JfZ2V0
KHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjKTsKPiAraW50ZWxfZHNiX2dldChzdHJ1Y3QgaW50ZWxf
Y3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSk7Cj4gIHZvaWQgaW50ZWxfZHNiX3B1dChzdHJ1Y3QgaW50
ZWxfZHNiICpkc2IpOwo+ICB2b2lkIGludGVsX2RzYl9yZWdfd3JpdGUoc3RydWN0IGludGVsX2Rz
YiAqZHNiLCBpOTE1X3JlZ190IHJlZywgdTMyIHZhbCk7Cj4gIHZvaWQgaW50ZWxfZHNiX2luZGV4
ZWRfcmVnX3dyaXRlKHN0cnVjdCBpbnRlbF9kc2IgKmRzYiwgaTkxNV9yZWdfdCByZWcsCgoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1h
aWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

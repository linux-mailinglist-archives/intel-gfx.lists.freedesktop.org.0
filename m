Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 92810D1B9B
	for <lists+intel-gfx@lfdr.de>; Thu, 10 Oct 2019 00:23:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 775956EA60;
	Wed,  9 Oct 2019 22:23:31 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 28E2E6EA5E
 for <intel-gfx@lists.freedesktop.org>; Wed,  9 Oct 2019 22:23:30 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Oct 2019 15:23:29 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,277,1566889200"; d="scan'208";a="200274697"
Received: from labuser-z97x-ud5h.jf.intel.com ([10.54.75.49])
 by FMSMGA003.fm.intel.com with ESMTP; 09 Oct 2019 15:23:29 -0700
From: Manasi Navare <manasi.d.navare@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  9 Oct 2019 15:25:08 -0700
Message-Id: <20191009222511.1497-3-manasi.d.navare@intel.com>
X-Mailer: git-send-email 2.19.1
In-Reply-To: <20191009222511.1497-1-manasi.d.navare@intel.com>
References: <20191009222511.1497-1-manasi.d.navare@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v7 3/6] drm/i915/display/icl: HW state readout
 for transcoder port sync config
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWZ0ZXIgdGhlIHN0YXRlIGlzIGNvbW1pdHRlZCwgd2UgcmVhZG91dCB0aGUgSFcgcmVnaXN0ZXJz
IGFuZCBjb21wYXJlCnRoZSBIVyBzdGF0ZSB3aXRoIHRoZSBTVyBzdGF0ZSB0aGF0IHdlIGp1c3Qg
Y29tbWl0dGVkLgpGb3IgVHJhbnNjZG9lciBwb3J0IHN5bmMsIHdlIGFkZCBtYXN0ZXJfdHJhbnNj
b2RlciBhbmQgdGhlCnNhbHZlcyBiaXRtYXNrIHRvIHRoZSBjcnRjX3N0YXRlLCBoZW5jZSB3ZSBu
ZWVkIHRvIHJlYWQgdGhvc2UgZHVyaW5nCnRoZSBIVyBzdGF0ZSByZWFkb3V0IHRvIGF2b2lkIHBp
cGUgc3RhdGUgbWlzbWF0Y2guCgp2ODoKKiBVc2UgbWFzdGVyX3NlbGVjdCAtMSwgYWRkcmVzcyBU
UkFOU19FRFAgY2FzZSAoVmlsbGUpCiogUmVuYW1lIG1hc3Rlcl90cmFuc2NvZGVyIHRvIF9yZWFk
b3V0IChMdWNhcykKdjc6CiogTkRvbnQgcmVhZCBIVyBzdGF0ZSBmb3IgRFNJCnY2OgoqIEdvIHRo
cm91Z2ggYm90aCBwYXJ0cyBvZiBIVyByZWFkb3V0IChNYWFydGVuKQoqIEFkZCBhIFdBUk4gaWYg
dGhlIHNhbWUgdHJhbnMgY29uZmlndXJlZCBhcwptYXN0ZXIgYW5kIHNsYXZlIChWaWxsZSwgTWFh
cnRlbikKdjU6CiogQWRkIHJldHVybiBJTlZBTElEIGluIGRlZmF1dCBjYXNlIChNYWFydGVuKQp2
NDoKKiBHZXQgcG93ZXIgZG9tYWlucyBpbiBtYXN0ZXIgbG9vcCBmb3IgZ2V0X2NvbmZpZyAoVmls
bGUpCnYzOgoqIEFkZCBUUkFOU0NPREVSX0QgKE1hYXJ0ZW4pCiogdjMgUmV2aWV3ZWQtYnk6IE1h
YXJ0ZW4gTGFua2hvcnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51eC5pbnRlbC5jb20+CnYyOgoq
IEFkZCBUcmFuc2NvZGVyX0QgYW5kIE1JU1NJTkdfQ0FTRSAoTWFhcnRlbikKCkNjOiBWaWxsZSBT
eXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgpDYzogTWFhcnRlbiBMYW5r
aG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KQ2M6IE1hdHQgUm9wZXIg
PG1hdHRoZXcuZC5yb3BlckBpbnRlbC5jb20+CkNjOiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1bGFA
aW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBNYW5hc2kgTmF2YXJlIDxtYW5hc2kuZC5uYXZhcmVA
aW50ZWwuY29tPgpSZXZpZXdlZC1ieTogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hv
cnN0QGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Rpc3BsYXkuYyB8IDU3ICsrKysrKysrKysrKysrKysrKysrCiAxIGZpbGUgY2hhbmdlZCwg
NTcgaW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5LmMKaW5kZXggZjM3YjI4ZGEzNzY4Li5kNjcxY2IwYjUwZWYgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC0xMDQ4MSw2ICsxMDQ4MSw1
OSBAQCBzdGF0aWMgdm9pZCBoYXN3ZWxsX2dldF9kZGlfcG9ydF9zdGF0ZShzdHJ1Y3QgaW50ZWxf
Y3J0YyAqY3J0YywKIAl9CiB9CiAKK3N0YXRpYyBlbnVtIHRyYW5zY29kZXIgdHJhbnNjb2Rlcl9t
YXN0ZXJfcmVhZG91dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCisJCQkJCQkg
ZW51bSB0cmFuc2NvZGVyIGNwdV90cmFuc2NvZGVyKQoreworCXUzMiB0cmFuc19wb3J0X3N5bmMs
IG1hc3Rlcl9zZWxlY3Q7CisKKwl0cmFuc19wb3J0X3N5bmMgPSBJOTE1X1JFQUQoVFJBTlNfRERJ
X0ZVTkNfQ1RMMihjcHVfdHJhbnNjb2RlcikpOworCisJaWYgKCh0cmFuc19wb3J0X3N5bmMgJiBQ
T1JUX1NZTkNfTU9ERV9FTkFCTEUpID09IDApCisJCXJldHVybiBJTlZBTElEX1RSQU5TQ09ERVI7
CisKKwltYXN0ZXJfc2VsZWN0ID0gdHJhbnNfcG9ydF9zeW5jICYKKwkJCVBPUlRfU1lOQ19NT0RF
X01BU1RFUl9TRUxFQ1RfTUFTSzsKKwlpZiAobWFzdGVyX3NlbGVjdCA9PSAwKQorCQlyZXR1cm4g
VFJBTlNDT0RFUl9FRFA7CisJZWxzZQorCQlyZXR1cm4gbWFzdGVyX3NlbGVjdCAtIDE7Cit9CisK
K3N0YXRpYyB2b2lkIGljZWxha2VfZ2V0X3RyYW5zX3BvcnRfc3luY19jb25maWcoc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCit7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gdG9faTkxNShjcnRjX3N0YXRlLT5iYXNlLmNydGMtPmRldik7CisJdTMyIHRy
YW5zY29kZXJzOworCWVudW0gdHJhbnNjb2RlciBjcHVfdHJhbnNjb2RlcjsKKworCWNydGNfc3Rh
dGUtPm1hc3Rlcl90cmFuc2NvZGVyID0gdHJhbnNjb2Rlcl9tYXN0ZXJfcmVhZG91dChkZXZfcHJp
diwKKwkJCQkJCQkJICBjcnRjX3N0YXRlLT5jcHVfdHJhbnNjb2Rlcik7CisKKwl0cmFuc2NvZGVy
cyA9IEJJVChUUkFOU0NPREVSX0EpIHwKKwkJQklUKFRSQU5TQ09ERVJfQikgfAorCQlCSVQoVFJB
TlNDT0RFUl9DKSB8CisJCUJJVChUUkFOU0NPREVSX0QpOworCWZvcl9lYWNoX2NwdV90cmFuc2Nv
ZGVyX21hc2tlZChkZXZfcHJpdiwgY3B1X3RyYW5zY29kZXIsIHRyYW5zY29kZXJzKSB7CisJCWVu
dW0gaW50ZWxfZGlzcGxheV9wb3dlcl9kb21haW4gcG93ZXJfZG9tYWluOworCQlpbnRlbF93YWtl
cmVmX3QgdHJhbnNfd2FrZXJlZjsKKworCQlwb3dlcl9kb21haW4gPSBQT1dFUl9ET01BSU5fVFJB
TlNDT0RFUihjcHVfdHJhbnNjb2Rlcik7CisJCXRyYW5zX3dha2VyZWYgPSBpbnRlbF9kaXNwbGF5
X3Bvd2VyX2dldF9pZl9lbmFibGVkKGRldl9wcml2LAorCQkJCQkJCQkgICBwb3dlcl9kb21haW4p
OworCisJCWlmICghdHJhbnNfd2FrZXJlZikKKwkJCWNvbnRpbnVlOworCisJCWlmICh0cmFuc2Nv
ZGVyX21hc3Rlcl9yZWFkb3V0KGRldl9wcml2LCBjcHVfdHJhbnNjb2RlcikgPT0KKwkJICAgIGNy
dGNfc3RhdGUtPmNwdV90cmFuc2NvZGVyKQorCQkJY3J0Y19zdGF0ZS0+c3luY19tb2RlX3NsYXZl
c19tYXNrIHw9IEJJVChjcHVfdHJhbnNjb2Rlcik7CisKKwkJaW50ZWxfZGlzcGxheV9wb3dlcl9w
dXQoZGV2X3ByaXYsIHBvd2VyX2RvbWFpbiwgdHJhbnNfd2FrZXJlZik7CisJfQorCisJV0FSTl9P
TihjcnRjX3N0YXRlLT5tYXN0ZXJfdHJhbnNjb2RlciAhPSBJTlZBTElEX1RSQU5TQ09ERVIgJiYK
KwkJY3J0Y19zdGF0ZS0+c3luY19tb2RlX3NsYXZlc19tYXNrKTsKK30KKwogc3RhdGljIGJvb2wg
aGFzd2VsbF9nZXRfcGlwZV9jb25maWcoc3RydWN0IGludGVsX2NydGMgKmNydGMsCiAJCQkJICAg
IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZykKIHsKQEAgLTEwNjAwLDYgKzEw
NjUzLDEwIEBAIHN0YXRpYyBib29sIGhhc3dlbGxfZ2V0X3BpcGVfY29uZmlnKHN0cnVjdCBpbnRl
bF9jcnRjICpjcnRjLAogCQlwaXBlX2NvbmZpZy0+cGl4ZWxfbXVsdGlwbGllciA9IDE7CiAJfQog
CisJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTEgJiYKKwkgICAgIXRyYW5zY29kZXJfaXNf
ZHNpKHBpcGVfY29uZmlnLT5jcHVfdHJhbnNjb2RlcikpCisJCWljZWxha2VfZ2V0X3RyYW5zX3Bv
cnRfc3luY19jb25maWcocGlwZV9jb25maWcpOworCiBvdXQ6CiAJZm9yX2VhY2hfcG93ZXJfZG9t
YWluKHBvd2VyX2RvbWFpbiwgcG93ZXJfZG9tYWluX21hc2spCiAJCWludGVsX2Rpc3BsYXlfcG93
ZXJfcHV0KGRldl9wcml2LAotLSAKMi4xOS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9pbnRlbC1nZng=

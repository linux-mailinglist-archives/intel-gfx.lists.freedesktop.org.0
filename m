Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id BF7DCB8FE4
	for <lists+intel-gfx@lfdr.de>; Fri, 20 Sep 2019 14:42:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3D9FD6E84A;
	Fri, 20 Sep 2019 12:42:46 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1E74B6E848
 for <intel-gfx@lists.freedesktop.org>; Fri, 20 Sep 2019 12:42:43 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 18559187-1500050 for multiple; Fri, 20 Sep 2019 13:42:40 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20190920083624.4601-1-chris@chris-wilson.co.uk>
 <76c44bf4-158d-fde4-3416-646707998c76@linux.intel.com>
In-Reply-To: <76c44bf4-158d-fde4-3416-646707998c76@linux.intel.com>
Message-ID: <156898335823.1196.4090501817698348244@skylake-alporthouse-com>
Date: Fri, 20 Sep 2019 13:42:38 +0100
Subject: Re: [Intel-gfx] [PATCH] drm/i915: Prevent bonded requests from
 overtaking each other on preemption
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBUdnJ0a28gVXJzdWxpbiAoMjAxOS0wOS0yMCAxMzoyNDo0NykKPiAKPiBPbiAyMC8w
OS8yMDE5IDA5OjM2LCBDaHJpcyBXaWxzb24gd3JvdGU6Cj4gPiBGb3JjZSBib25kZWQgcmVxdWVz
dHMgdG8gcnVuIG9uIGRpc3RpbmN0IGVuZ2luZXMgc28gdGhhdCB0aGV5IGNhbm5vdCBiZQo+ID4g
c2h1ZmZsZWQgb250byB0aGUgc2FtZSBlbmdpbmUgd2hlcmUgdGltZXNsaWNpbmcgd2lsbCByZXZl
cnNlIHRoZSBvcmRlci4KPiA+IEEgYm9uZGVkIHJlcXVlc3Qgd2lsbCBvZnRlbiB3YWl0IG9uIGEg
c2VtYXBob3JlIHNpZ25hbGVkIGJ5IGl0cyBtYXN0ZXIsCj4gPiBjcmVhdGluZyBhbiBpbXBsaWNp
dCBkZXBlbmRlbmN5IC0tIGlmIHdlIGlnbm9yZSB0aGF0IGltcGxpY2l0IGRlcGVuZGVuY3kKPiA+
IGFuZCBhbGxvdyB0aGUgYm9uZGVkIHJlcXVlc3QgdG8gcnVuIG9uIHRoZSBzYW1lIGVuZ2luZSBh
bmQgYmVmb3JlIGl0cwo+ID4gbWFzdGVyLCB3ZSB3aWxsIGNhdXNlIGEgR1BVIGhhbmcuCj4gPiAK
PiA+IFdlIGNhbiBwcmV2ZW50IHRoaXMgaW52ZXJzaW9uIGJ5IHJlc3RyaWN0aW5nIHdoaWNoIGVu
Z2luZXMgd2UgYWxsb3cKPiA+IG91cnNlbHZlcyB0byBqdW1wIHRvIHVwb24gcHJlZW1wdGlvbiwg
aS5lLiBiYWtpbmcgaW4gdGhlIGFycmFuZ2VtZW50Cj4gPiBlc3RhYmxpc2hlZCBhdCBmaXJzdCBl
eGVjdXRpb24uIChXZSBzaG91bGQgYWxzbyBjb25zaWRlciBjYXB0dXJpbmcgdGhlCj4gPiBpbXBs
aWNpdCBkZXBlbmRlbmN5IHVzaW5nIGk5MTVfc2NoZWRfYWRkX2RlcGVuZGVuY3koKSwgYnV0IGZp
cnN0IHdlIG5lZWQKPiA+IHRvIHRoaW5rIGFib3V0IHRoZSBjb25zdHJhaW50cyB0aGF0IHJlcXVp
cmVzIG9uIHRoZSBleGVjdXRpb24vcmV0aXJlbWVudAo+ID4gb3JkZXJpbmcuKQo+ID4gCj4gPiBG
aXhlczogOGVlMzZlMDQ4Yzk4ICgiZHJtL2k5MTUvZXhlY2xpc3RzOiBNaW5pbWFsaXN0aWMgdGlt
ZXNsaWNpbmciKQo+ID4gUmVmZXJlbmNlczogZWUxMTM2OTA4ZTliICgiZHJtL2k5MTUvZXhlY2xp
c3RzOiBWaXJ0dWFsIGVuZ2luZSBib25kaW5nIikKPiA+IFNpZ25lZC1vZmYtYnk6IENocmlzIFdp
bHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+ID4gQ2M6IE1pa2EgS3VvcHBhbGEgPG1p
a2Eua3VvcHBhbGFAbGludXguaW50ZWwuY29tPgo+ID4gQ2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0
a28udXJzdWxpbkBpbnRlbC5jb20+Cj4gPiAtLS0KPiA+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfbHJjLmMgfCAxOSArKysrKysrKysrKy0tLS0tLS0tCj4gPiAgIDEgZmlsZSBjaGFu
Z2VkLCAxMSBpbnNlcnRpb25zKCspLCA4IGRlbGV0aW9ucygtKQo+ID4gCj4gPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9scmMuYwo+ID4gaW5kZXggYTk5MTY2YTJkMmViLi43OTIwNjQ5ZTRkODcg
MTAwNjQ0Cj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwo+ID4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiA+IEBAIC0zNzU1LDE4
ICszNzU1LDIxIEBAIHN0YXRpYyB2b2lkCj4gPiAgIHZpcnR1YWxfYm9uZF9leGVjdXRlKHN0cnVj
dCBpOTE1X3JlcXVlc3QgKnJxLCBzdHJ1Y3QgZG1hX2ZlbmNlICpzaWduYWwpCj4gPiAgIHsKPiA+
ICAgICAgIHN0cnVjdCB2aXJ0dWFsX2VuZ2luZSAqdmUgPSB0b192aXJ0dWFsX2VuZ2luZShycS0+
ZW5naW5lKTsKPiA+ICsgICAgIGludGVsX2VuZ2luZV9tYXNrX3QgYWxsb3dlZCwgZXhlYzsKPiA+
ICAgICAgIHN0cnVjdCB2ZV9ib25kICpib25kOwo+ID4gICAKPiA+ICAgICAgIGJvbmQgPSB2aXJ0
dWFsX2ZpbmRfYm9uZCh2ZSwgdG9fcmVxdWVzdChzaWduYWwpLT5lbmdpbmUpOwo+ID4gLSAgICAg
aWYgKGJvbmQpIHsKPiA+IC0gICAgICAgICAgICAgaW50ZWxfZW5naW5lX21hc2tfdCBvbGQsIG5l
dywgY21wOwo+ID4gKyAgICAgaWYgKCFib25kKQo+ID4gKyAgICAgICAgICAgICByZXR1cm47Cj4g
PiAgIAo+ID4gLSAgICAgICAgICAgICBjbXAgPSBSRUFEX09OQ0UocnEtPmV4ZWN1dGlvbl9tYXNr
KTsKPiA+IC0gICAgICAgICAgICAgZG8gewo+ID4gLSAgICAgICAgICAgICAgICAgICAgIG9sZCA9
IGNtcDsKPiA+IC0gICAgICAgICAgICAgICAgICAgICBuZXcgPSBjbXAgJiBib25kLT5zaWJsaW5n
X21hc2s7Cj4gPiAtICAgICAgICAgICAgIH0gd2hpbGUgKChjbXAgPSBjbXB4Y2hnKCZycS0+ZXhl
Y3V0aW9uX21hc2ssIG9sZCwgbmV3KSkgIT0gb2xkKTsKPiA+IC0gICAgIH0KPiA+ICsgICAgIC8q
IFJlc3RyaWN0IHRoZSBib25kZWQgcmVxdWVzdCB0byBydW4gb24gb25seSB0aGUgc2xhdmVkIGVu
Z2luZXMgKi8KPiA+ICsgICAgIGFsbG93ZWQgPSBib25kLT5zaWJsaW5nX21hc2sgJiB+dG9fcmVx
dWVzdChzaWduYWwpLT5lbmdpbmUtPm1hc2s7Cj4gCj4gSG1tLi4gaXNuJ3QgaXQgYSBtaXNzIG9u
IHRoZSB1YXBpIGxldmVsIHRoYXQgd2UgYWxsb3cgbWFzdGVyIHRvIGJlIAo+IG1lbnRpb25lZCBp
biB0aGUgbGlzdCBvZiBib25kcz8gVGhhdCdzIHRoZSBvbmx5IHNjZW5hcmlvIHdoZXJlIHRoaXMg
bGluZSAKPiBkb2VzIHNvbWV0aGluZyBJIHRoaW5rLiBTbyBzaG91bGQgd2UganVzdCBmb3JiaWQg
dGhpcyBzZXR1cCBvbiB0aGUgdWFwaSAKPiBsZXZlbD8KClRoYXQncyBqdXN0IGEgbG90IG9mIGRp
Z2dpbmchCgo+ID4gKyAgICAgZXhlYyA9IFJFQURfT05DRShycS0+ZXhlY3V0aW9uX21hc2spOwo+
ID4gKyAgICAgd2hpbGUgKCF0cnlfY21weGNoZygmcnEtPmV4ZWN1dGlvbl9tYXNrLCAmZXhlYywg
ZXhlYyAmIGFsbG93ZWQpKQo+ID4gKyAgICAgICAgICAgICA7Cj4gPiArCj4gPiArICAgICAvKiBQ
cmV2ZW50IHRoZSBtYXN0ZXIgZnJvbSBiZWluZyByZS1ydW4gb24gdGhlIHNsYXZlZCBlbmdpbmVz
ICovCj4gPiArICAgICB0b19yZXF1ZXN0KHNpZ25hbCktPmV4ZWN1dGlvbl9tYXNrICY9IH5hbGxv
d2VkOwo+IAo+IFRoaXMgc291bmRzIHVuZm9ydHVuYXRlIGZvciBmdXR1cmUgc2NoZWR1bGluZy4g
VGhlcmUgc2hvdWxkbid0IGJlIGEgCj4gZnVuZGFtZW50YWwgcmVhc29uIHdoeSBuZXh0IGV4ZWN1
dGlvbiBmb3IgdGhlIG1hc3RlciBjb3VsZG4ndCBiZSBvbiBhbiAKPiBlbmdpbmUgd2hpY2ggY2Fu
IGFsc28gYmUgYSBzbGF2ZS4gU28gaWYgd2UgaGF2ZToKCk5vdGUgdGhvdWdoIHRoYXQgd2UgZG8g
bm90IHJlc2V0IHRoZSBleGVjdXRpb25fbWFzayBhdCBhbnkgcG9pbnQgOikKVGhhdCdzIGFjdHVh
bGx5IGhhcmRlciB0byBkbyB0aGFuIGl0IHNvdW5kcywgYXMgYWZ0ZXIgdGhlIGJvbmRlZApleGVj
dXRpb24sIHRoZXkgYXJlIG5vIGxvbmdlciBsaW5rZWQuIDp8Cgo+IG1hc3Rlcgo+ICAgIC52ZW5n
PXZjczAsdmNzMQo+IHNsYXZlCj4gICAgLnZlbmc9dmNzMCx2Y3MxCj4gICAgLmJvbmQobWFzdGVy
PXZjczAsIG1hc2s9dmNzMSkKPiAgICAuYm9uZChtYXN0ZXI9dmNzMSwgbWFzaz12Y3MwKQo+IAo+
IFRoaXMgc2hvdWxkIGJlIGFsbG93ZWQgc2V0dXAgYnV0IHdpdGggdGhpcyBjaGFuZ2UgaXQgd291
bGQgZml4IHRoZSAKPiBtYXN0ZXIgdG8gb25seSBiZSBvbmUgb2YgdGhlIG9wdGlvbnMuCgpJdCB3
b3VsZCBmaXggaXQgdG8gdGhlIGZpcnN0IG9uZSBpdCBzZWxlY3RlZCBhbmQgZXhlY3V0ZWQgb24u
IEl0IGNhbgpzdGlsbCBwaWNrIGVpdGhlciB2Y3MwIG9yIHZjczEgYW5kIHRoZSBzbGF2ZSB3b3Vs
ZCB0aGVuIGJlIG9uIHZjczEgb3IKdmNzMCByZXNwZWN0aXZlbHkuCgo+IElzIHRoZSByZWFsIHBy
b2JsZW0gdGhhdCBhZnRlciBwcmVlbXB0aW9uIGZvciB0aW1lc2xpY2luZyBhbmQgc3Vic2VxdWVu
dCAKPiByZS1zdWJtaXQgd2UgbWlzcyBzb21lIGhvb2tzIHRvIHJlLWV2YWx1YXRlIHRoZSBib25k
ZWQgcmVsYXRpb25zaGlwPwoKVGhhdCBkb2Vzbid0IGV4aXN0LCB5ZXMuIEJ1dCBpdCdzIG1vcmUg
dGhhbiB0aGF0LCBhcyB3ZSBkb24ndCBoYXZlIHRoZQpub3Rpb24gb2YgZ2xvYmFsIHByZWVtcHRp
b24gLS0gd2UgZG9uJ3QgZXZhbHVhdGUgYmV0d2VlbiBlbmdpbmVzIHdoZXRoZXIKb3Igbm90IHRo
ZXJlIGFyZSBjcm9zcyBkZXBlbmRlbmNpZXMuCiAKPiBJIGd1ZXNzIGxvb2tpbmcgd291bGQgYmUg
aGFyZCB0byBkbyBhbnkgcGVla2luZyBmcm9tIG9uZSBzdWJtaXNzaW9uIAo+IHRhc2tsZXQgdG8g
YW5vdGhlciAoZGlmZmVyZW50IGVuZ2luZXMpIHRvIGNoZWNrIGlmIG9uZSBvZiB0aGUgcGFpciBp
cyAKPiBhbHJlYWR5IGV4ZWN1dGluZyBhZ2FpbiBhbmQgc28gdG8gcGljayB0aGUgb3RoZXIgZW5k
IGNvcnJlY3RseT8KCkhhcmQgaW5kZWVkLiBJIHdvdWxkIHRocm93IGEgZmxhZyBvbnRvIHRoZSBy
ZXF1ZXN0IHRoYXQgc2F5cyBpZiB5b3UKcHJlZW1wdCBtZSwgc3RvcCB0aGUgd29ybGQgKGludGVs
X2VuZ2luZV9tYXNrX3QgcGVyaGFwcykuIEV2ZW4gdGhhdApyZXF1aXJlcyBzb21lIHRyaWNrcyB3
ZSBkb24ndCB5ZXQgaGF2ZS4gQnV0IHdlIGNhbid0IHRvdWNoIHRoZSBvdGhlcgplbmdpbmVzIHdp
dGhpbiB0aGUgdGFza2xldCB1bmxlc3Mgd2UgY2FuIGNvbWUgdXAgd2l0aCBhIGxvY2tsZXNzCnN0
cmF0ZWd5IChoZW5jZSB0aGUgc3RyYXRlZ3kgb2YgcHVudGluZyB0byBhIHN1cHJlbWUgdGhyZWFk
IHdpdGgKb3ZlcnNpZ2h0IG9mIGFsbCBlbmdpbmVzLCBnYWguKQogCj4gSSB0aGluayBpbiBwcmFj
dGljYWwgdGVybXMgZm9yIG1lZGlhIHRoaXMgd29yayBzaW5jZSB0aGV5IGFyZSBub3QgCj4gc2V0
dGluZyBpdCB1cCBsaWtlIG15IHNrZXRjaCBzaG93cy4gU28gaXQgY291bGQgYmUganVzdCBmaW5l
IGluIHByYWN0aWNlIAo+IGZvciBjdXJyZW50IHVzZXJzLgoKSSB0aGluayB5b3VyIGV4YW1wbGUg
d29ya3MgYmV0dGVyIHRoYW4geW91IHRoaW5rIC0tIHdlIGp1c3QgZW5kIHVwCmNvbmNyZXRlZCBp
bnRvIG91ciBmaXJzdCBjaG9pY2UgYW5kIGNhbid0IGp1bXAgYXJvdW5kIGhvZ3MgaW4gdGhlCnN5
c3RlbS4gKEZvciBleGFtcGxlLCB0byBwcm92ZSB0aGUgYWJvdmUsIHdlIGNhbiBsYXVuY2ggdHdv
IHN1Y2ggdGFza3MsCndpdGggYSBzcGlubmVyIGFzIGJvdGggbWFzdGVycyBhbmQgdGhlIHN5c3Rl
bSBzaG91bGQgZ2V0IHN0dWNrIG9uIGJvdGgKc3Bpbm5lcnMuKQoKSG93ZXZlciwgSSdtIGN1cnJl
bnRseSBkcmVhZGluZyB3cml0aW5nIHRoZSB0ZXN0IGNhc2UgZm9yIHRoaXMuCi1DaHJpcwpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFp
bGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

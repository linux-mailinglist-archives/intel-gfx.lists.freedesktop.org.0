Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C9A33D6B7D
	for <lists+intel-gfx@lfdr.de>; Tue, 15 Oct 2019 00:06:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 058A76E199;
	Mon, 14 Oct 2019 22:06:02 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DBF6E89CD9
 for <intel-gfx@lists.freedesktop.org>; Mon, 14 Oct 2019 22:05:47 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18837433-1500050 
 for multiple; Mon, 14 Oct 2019 23:05:37 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 14 Oct 2019 23:05:32 +0100
Message-Id: <20191014220534.1662-8-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191014220534.1662-1-chris@chris-wilson.co.uk>
References: <20191014220534.1662-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 08/10] drm/i915: Replace hangcheck by heartbeats
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UmVwbGFjZSBzYW1wbGluZyB0aGUgZW5naW5lIHN0YXRlIGV2ZXJ5IHNvIG9mdGVuIHdpdGggYSBw
ZXJpb2RpYwpoZWFydGJlYXQgcmVxdWVzdCB0byBtZWFzdXJlIHRoZSBoZWFsdGggb2YgYW4gZW5n
aW5lLiBUaGlzIGlzIGNvdXBsZWQKd2l0aCB0aGUgZm9yY2VkLXByZWVtcHRpb24gdG8gYWxsb3cg
bG9uZyBydW5uaW5nIHJlcXVlc3RzIHRvIHN1cnZpdmUgc28KbG9uZyBhcyB0aGV5IGRvIG5vdCBi
bG9jayBvdGhlciB1c2Vycy4KClRoZSBoZWFydGJlYXQgaW50ZXJ2YWwgY2FuIGJlIGFkanVzdGVk
IHBlci1lbmdpbmUgdXNpbmcsCgoJL3N5cy9jbGFzcy9kcm0vY2FyZD8vZW5naW5lLyovaGVhcnRi
ZWF0X2ludGVydmFsX21zCgp2MjogQ291cGxlIGluIHN5c2ZzIGNvbnRyb2xzCgpTaWduZWQtb2Zm
LWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KQ2M6IEpvb25hcyBM
YWh0aW5lbiA8am9vbmFzLmxhaHRpbmVuQGxpbnV4LmludGVsLmNvbT4KQ2M6IFR2cnRrbyBVcnN1
bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+CkNjOiBKb24gQmxvb21maWVsZCA8am9uLmJs
b29tZmllbGRAaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogSm9uIEJsb29tZmllbGQgPGpvbi5ibG9v
bWZpZWxkQGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJz
dWxpbkBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvS2NvbmZpZy5wcm9maWxl
ICAgICAgICAgIHwgIDE0ICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlICAgICAgICAg
ICAgICAgICB8ICAgMSAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXkuYyAgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3Qu
aCAgICB8ICAgMSAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcG0uYyAgICAg
ICAgfCAgIDIgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmggICAgICAg
IHwgIDMyIC0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyAgICAg
fCAgMTEgKy0KIC4uLi9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5jICB8
IDEyOCArKysrKysrCiAuLi4vZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQu
aCAgfCAgIDUgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3BtLmMgICAg
IHwgICA1ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMuYyAg
fCAgNDAgKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oICB8
ICAxNyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYyAgICAgICAgICAgIHwg
ICAxIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmggICAgICAgICAgICB8ICAg
NCAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jICAgICAgICAgfCAgIDEg
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaCAgICAgIHwgICA5IC0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2hhbmdjaGVjay5jICAgICB8IDM2MSAtLS0t
LS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMgICAg
ICAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2NoZWNr
LmMgIHwgICA0IC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jICAgICAgICAg
ICB8ICA4NyAtLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyAgICAgICAgICAg
ICAgIHwgICAzIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAgICAg
ICB8ICAgMSAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jICAgICAgICAg
fCAgMzMgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmggICAgICAgICB8
ICAgMiAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ByaW9saXN0X3R5cGVzLmggICAgfCAg
IDYgKwogMjUgZmlsZXMgY2hhbmdlZCwgMjE4IGluc2VydGlvbnMoKyksIDU1NSBkZWxldGlvbnMo
LSkKIGRlbGV0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9oYW5n
Y2hlY2suYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcucHJvZmls
ZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcucHJvZmlsZQppbmRleCA4ZmNlZWE4NTkz
N2IuLjRiZWQyOTNlMWZiNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvS2NvbmZp
Zy5wcm9maWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcucHJvZmlsZQpAQCAt
NDAsMyArNDAsMTcgQEAgY29uZmlnIERSTV9JOTE1X1BSRUVNUFRfVElNRU9VVAogCSAgL3N5cy9j
bGFzcy9kcm0vY2FyZD8vZW5naW5lLyovcHJlZW1wdF90aW1lb3V0X21zCiAKIAkgIE1heSBiZSAw
IHRvIGRpc2FibGUgdGhlIHRpbWVvdXQuCisKK2NvbmZpZyBEUk1fSTkxNV9IRUFSVEJFQVRfSU5U
RVJWQUwKKwlpbnQgIkludGVydmFsIGJldHdlZW4gaGVhcnRiZWF0IHB1bHNlcyAobXMpIgorCWRl
ZmF1bHQgMjUwMCAjIG1pbGxpc2Vjb25kcworCWhlbHAKKwkgIFRoZSBkcml2ZXIgc2VuZHMgYSBw
ZXJpb2RpYyBoZWFydGJlYXQgZG93biBhbGwgYWN0aXZlIGVuZ2luZXMgdG8KKwkgIGNoZWNrIHRo
ZSBoZWFsdGggb2YgdGhlIEdQVSBhbmQgdW5kZXJ0YWtlIHJlZ3VsYXIgaG91c2Uta2VlcGluZyBv
ZgorCSAgaW50ZXJuYWwgZHJpdmVyIHN0YXRlLgorCisJICBUaGlzIGlzIGFkanVzdGFibGUgdmlh
CisJICAvc3lzL2NsYXNzL2RybS9jYXJkPy9lbmdpbmUvKi9oZWFydGJlYXRfaW50ZXJ2YWxfbXMK
KworCSAgTWF5IGJlIDAgdG8gZGlzYWJsZSBoZWFydGJlYXRzIGFuZCB0aGVyZWZvcmUgZGlzYWJs
ZSBhdXRvbWF0aWMgR1BVCisJICBoYW5nIGRldGVjdGlvbi4KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKaW5k
ZXggY2ZhYjdjODU4NWIzLi41OWQzNTZjYzQwNmMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCkBAIC04
OCw3ICs4OCw2IEBAIGd0LXkgKz0gXAogCWd0L2ludGVsX2d0X3BtLm8gXAogCWd0L2ludGVsX2d0
X3BtX2lycS5vIFwKIAlndC9pbnRlbF9ndF9yZXF1ZXN0cy5vIFwKLQlndC9pbnRlbF9oYW5nY2hl
Y2subyBcCiAJZ3QvaW50ZWxfbHJjLm8gXAogCWd0L2ludGVsX3JjNi5vIFwKIAlndC9pbnRlbF9y
ZW5kZXJzdGF0ZS5vIFwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5LmMKaW5kZXggM2NmMzlmYzE1M2IzLi5hMmVmNGJjZjkyNDIgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC0xNDQwMSw3ICsxNDQwMSw3IEBA
IHN0YXRpYyB2b2lkIGludGVsX3BsYW5lX3VucGluX2ZiKHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0
ZSAqb2xkX3BsYW5lX3N0YXRlKQogc3RhdGljIHZvaWQgZmJfb2JqX2J1bXBfcmVuZGVyX3ByaW9y
aXR5KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiB7CiAJc3RydWN0IGk5MTVfc2No
ZWRfYXR0ciBhdHRyID0gewotCQkucHJpb3JpdHkgPSBJOTE1X1BSSU9SSVRZX0RJU1BMQVksCisJ
CS5wcmlvcml0eSA9IEk5MTVfVVNFUl9QUklPUklUWShJOTE1X1BSSU9SSVRZX0RJU1BMQVkpLAog
CX07CiAKIAlpOTE1X2dlbV9vYmplY3Rfd2FpdF9wcmlvcml0eShvYmosIDAsICZhdHRyKTsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaCBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaAppbmRleCBiMDI0NTU4NWI0
ZDUuLjgxN2VhMDcyNWU0MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX29iamVjdC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9v
YmplY3QuaApAQCAtNDYxLDYgKzQ2MSw1IEBAIGludCBpOTE1X2dlbV9vYmplY3Rfd2FpdChzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogaW50IGk5MTVfZ2VtX29iamVjdF93YWl0X3By
aW9yaXR5KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJCQkJICB1bnNpZ25lZCBp
bnQgZmxhZ3MsCiAJCQkJICBjb25zdCBzdHJ1Y3QgaTkxNV9zY2hlZF9hdHRyICphdHRyKTsKLSNk
ZWZpbmUgSTkxNV9QUklPUklUWV9ESVNQTEFZIEk5MTVfVVNFUl9QUklPUklUWShJOTE1X1BSSU9S
SVRZX01BWCkKIAogI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fcG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wbS5jCmlu
ZGV4IDc5ODdiNTRmYjFmNS4uMGU5NzUyMGNiMWJiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fcG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fcG0uYwpAQCAtMTAwLDggKzEwMCw2IEBAIHZvaWQgaTkxNV9nZW1fc3VzcGVuZChz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlpbnRlbF9ndF9zdXNwZW5kKCZpOTE1LT5n
dCk7CiAJaW50ZWxfdWNfc3VzcGVuZCgmaTkxNS0+Z3QudWMpOwogCi0JY2FuY2VsX2RlbGF5ZWRf
d29ya19zeW5jKCZpOTE1LT5ndC5oYW5nY2hlY2sud29yayk7Ci0KIAlpOTE1X2dlbV9kcmFpbl9m
cmVlZF9vYmplY3RzKGk5MTUpOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9lbmdpbmUuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2lu
ZS5oCmluZGV4IDkzZWEzNjdmZTYyNC4uOGFkNTdlYWNlMzUxIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9lbmdpbmUuaApAQCAtODksMzggKzg5LDYgQEAgc3RydWN0IGRybV9wcmludGVy
OwogLyogc2Vxbm8gc2l6ZSBpcyBhY3R1YWxseSBvbmx5IGEgdWludDMyLCBidXQgc2luY2Ugd2Ug
cGxhbiB0byB1c2UgTUlfRkxVU0hfRFcgdG8KICAqIGRvIHRoZSB3cml0ZXMsIGFuZCB0aGF0IG11
c3QgaGF2ZSBxdyBhbGlnbmVkIG9mZnNldHMsIHNpbXBseSBwcmV0ZW5kIGl0J3MgOGIuCiAgKi8K
LWVudW0gaW50ZWxfZW5naW5lX2hhbmdjaGVja19hY3Rpb24gewotCUVOR0lORV9JRExFID0gMCwK
LQlFTkdJTkVfV0FJVCwKLQlFTkdJTkVfQUNUSVZFX1NFUU5PLAotCUVOR0lORV9BQ1RJVkVfSEVB
RCwKLQlFTkdJTkVfQUNUSVZFX1NVQlVOSVRTLAotCUVOR0lORV9XQUlUX0tJQ0ssCi0JRU5HSU5F
X0RFQUQsCi19OwotCi1zdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIgKgotaGFuZ2NoZWNrX2FjdGlv
bl90b19zdHIoY29uc3QgZW51bSBpbnRlbF9lbmdpbmVfaGFuZ2NoZWNrX2FjdGlvbiBhKQotewot
CXN3aXRjaCAoYSkgewotCWNhc2UgRU5HSU5FX0lETEU6Ci0JCXJldHVybiAiaWRsZSI7Ci0JY2Fz
ZSBFTkdJTkVfV0FJVDoKLQkJcmV0dXJuICJ3YWl0IjsKLQljYXNlIEVOR0lORV9BQ1RJVkVfU0VR
Tk86Ci0JCXJldHVybiAiYWN0aXZlIHNlcW5vIjsKLQljYXNlIEVOR0lORV9BQ1RJVkVfSEVBRDoK
LQkJcmV0dXJuICJhY3RpdmUgaGVhZCI7Ci0JY2FzZSBFTkdJTkVfQUNUSVZFX1NVQlVOSVRTOgot
CQlyZXR1cm4gImFjdGl2ZSBzdWJ1bml0cyI7Ci0JY2FzZSBFTkdJTkVfV0FJVF9LSUNLOgotCQly
ZXR1cm4gIndhaXQga2ljayI7Ci0JY2FzZSBFTkdJTkVfREVBRDoKLQkJcmV0dXJuICJkZWFkIjsK
LQl9Ci0KLQlyZXR1cm4gInVua25vd24iOwotfQogCiBzdGF0aWMgaW5saW5lIHVuc2lnbmVkIGlu
dAogZXhlY2xpc3RzX251bV9wb3J0cyhjb25zdCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2V4ZWNsaXN0
cyAqIGNvbnN0IGV4ZWNsaXN0cykKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZV9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5l
X2NzLmMKaW5kZXggMWViNTExNDc4MzlhLi5kODI5YWQzNDBjYTAgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCkBAIC0zMDUsNiArMzA1LDcgQEAgc3RhdGljIGlu
dCBpbnRlbF9lbmdpbmVfc2V0dXAoc3RydWN0IGludGVsX2d0ICpndCwgZW51bSBpbnRlbF9lbmdp
bmVfaWQgaWQpCiAJX19zcHJpbnRfZW5naW5lX25hbWUoZW5naW5lKTsKIAogCWVuZ2luZS0+cHJv
cHMucHJlZW1wdF90aW1lb3V0ID0gQ09ORklHX0RSTV9JOTE1X1BSRUVNUFRfVElNRU9VVDsKKwll
bmdpbmUtPnByb3BzLmhlYXJ0YmVhdF9pbnRlcnZhbCA9IENPTkZJR19EUk1fSTkxNV9IRUFSVEJF
QVRfSU5URVJWQUw7CiAKIAkvKgogCSAqIFRvIGJlIG92ZXJyaWRkZW4gYnkgdGhlIGJhY2tlbmQg
b24gc2V0dXAuIEhvd2V2ZXIgdG8gZmFjaWxpdGF0ZQpAQCAtNTk5LDcgKzYwMCw2IEBAIHN0YXRp
YyBpbnQgaW50ZWxfZW5naW5lX3NldHVwX2NvbW1vbihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUpCiAJaW50ZWxfZW5naW5lX2luaXRfYWN0aXZlKGVuZ2luZSwgRU5HSU5FX1BIWVNJQ0FM
KTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9icmVhZGNydW1icyhlbmdpbmUpOwogCWludGVsX2VuZ2lu
ZV9pbml0X2V4ZWNsaXN0cyhlbmdpbmUpOwotCWludGVsX2VuZ2luZV9pbml0X2hhbmdjaGVjayhl
bmdpbmUpOwogCWludGVsX2VuZ2luZV9pbml0X2NtZF9wYXJzZXIoZW5naW5lKTsKIAlpbnRlbF9l
bmdpbmVfaW5pdF9fcG0oZW5naW5lKTsKIApAQCAtMTQzMiw4ICsxNDMyLDEzIEBAIHZvaWQgaW50
ZWxfZW5naW5lX2R1bXAoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCQlkcm1fcHJp
bnRmKG0sICIqKiogV0VER0VEICoqKlxuIik7CiAKIAlkcm1fcHJpbnRmKG0sICJcdEF3YWtlPyAl
ZFxuIiwgYXRvbWljX3JlYWQoJmVuZ2luZS0+d2FrZXJlZi5jb3VudCkpOwotCWRybV9wcmludGYo
bSwgIlx0SGFuZ2NoZWNrOiAlZCBtcyBhZ29cbiIsCi0JCSAgIGppZmZpZXNfdG9fbXNlY3Moamlm
ZmllcyAtIGVuZ2luZS0+aGFuZ2NoZWNrLmFjdGlvbl90aW1lc3RhbXApKTsKKworCXJjdV9yZWFk
X2xvY2soKTsKKwlycSA9IFJFQURfT05DRShlbmdpbmUtPmhlYXJ0YmVhdC5zeXN0b2xlKTsKKwlp
ZiAocnEpCisJCWRybV9wcmludGYobSwgIlx0SGVhcnRiZWF0OiAlZCBtcyBhZ29cbiIsCisJCQkg
ICBqaWZmaWVzX3RvX21zZWNzKGppZmZpZXMgLSBycS0+ZW1pdHRlZF9qaWZmaWVzKSk7CisJcmN1
X3JlYWRfdW5sb2NrKCk7CiAJZHJtX3ByaW50ZihtLCAiXHRSZXNldCBjb3VudDogJWQgKGdsb2Jh
bCAlZClcbiIsCiAJCSAgIGk5MTVfcmVzZXRfZW5naW5lX2NvdW50KGVycm9yLCBlbmdpbmUpLAog
CQkgICBpOTE1X3Jlc2V0X2NvdW50KGVycm9yKSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmMKaW5kZXggMmZjNDEzZjlkNTA2Li4zYTQzNjE4
NjkzZDQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9o
ZWFydGJlYXQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVh
cnRiZWF0LmMKQEAgLTExLDYgKzExLDI3IEBACiAjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3BtLmgi
CiAjaW5jbHVkZSAiaW50ZWxfZW5naW5lLmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3QuaCIKKyNpbmNs
dWRlICJpbnRlbF9yZXNldC5oIgorCisvKgorICogV2hpbGUgdGhlIGVuZ2luZSBpcyBhY3RpdmUs
IHdlIHNlbmQgYSBwZXJpb2RpYyBwdWxzZSBhbG9uZyB0aGUgZW5naW5lCisgKiB0byBjaGVjayBv
biBpdHMgaGVhbHRoIGFuZCB0byBmbHVzaCBhbnkgaWRsZS1iYXJyaWVycy4gSWYgdGhhdCByZXF1
ZXN0CisgKiBpcyBzdHVjaywgYW5kIHdlIGZhaWwgdG8gcHJlZW1wdCBpdCwgd2UgZGVjbGFyZSB0
aGUgZW5naW5lIGh1bmcgYW5kCisgKiBpc3N1ZSBhIHJlc2V0IC0tIGluIHRoZSBob3BlIHRoYXQg
cmVzdG9yZXMgcHJvZ3Jlc3MuCisgKi8KKworc3RhdGljIHZvaWQgbmV4dF9oZWFydGJlYXQoc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQoreworCWxvbmcgZGVsYXk7CisKKwlkZWxheSA9
IFJFQURfT05DRShlbmdpbmUtPnByb3BzLmhlYXJ0YmVhdF9pbnRlcnZhbCk7CisJaWYgKCFkZWxh
eSkKKwkJcmV0dXJuOworCisJZGVsYXkgPSBtc2Vjc190b19qaWZmaWVzX3RpbWVvdXQoZGVsYXkp
OworCXNjaGVkdWxlX2RlbGF5ZWRfd29yaygmZW5naW5lLT5oZWFydGJlYXQud29yaywKKwkJCSAg
ICAgIHJvdW5kX2ppZmZpZXNfdXBfcmVsYXRpdmUoZGVsYXkpKTsKK30KIAogc3RhdGljIHZvaWQg
aWRsZV9wdWxzZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIHN0cnVjdCBpOTE1X3Jl
cXVlc3QgKnJxKQogewpAQCAtMTgsNiArMzksMTEzIEBAIHN0YXRpYyB2b2lkIGlkbGVfcHVsc2Uo
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkK
IAlpOTE1X3JlcXVlc3RfYWRkX2FjdGl2ZV9iYXJyaWVycyhycSk7CiB9CiAKK3N0YXRpYyB2b2lk
IHNob3dfaGVhcnRiZWF0KGNvbnN0IHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAorCQkJICAgc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQoreworCXN0cnVjdCBkcm1fcHJpbnRlciBwID0g
ZHJtX2RlYnVnX3ByaW50ZXIoImhlYXJ0YmVhdCIpOworCisJaW50ZWxfZW5naW5lX2R1bXAoZW5n
aW5lLCAmcCwKKwkJCSAgIiVzIGhlYXJ0YmVhdCB7cHJpbzolZH0gbm90IHRpY2tpbmdcbiIsCisJ
CQkgIGVuZ2luZS0+bmFtZSwKKwkJCSAgcnEtPnNjaGVkLmF0dHIucHJpb3JpdHkpOworfQorCitz
dGF0aWMgdm9pZCBoZWFydGJlYXQoc3RydWN0IHdvcmtfc3RydWN0ICp3cmspCit7CisJc3RydWN0
IGk5MTVfc2NoZWRfYXR0ciBhdHRyID0geworCQkucHJpb3JpdHkgPSBJOTE1X1VTRVJfUFJJT1JJ
VFkoSTkxNV9QUklPUklUWV9NSU4pLAorCX07CisJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5n
aW5lID0KKwkJY29udGFpbmVyX29mKHdyaywgdHlwZW9mKCplbmdpbmUpLCBoZWFydGJlYXQud29y
ay53b3JrKTsKKwlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UgPSBlbmdpbmUtPmtlcm5lbF9jb250
ZXh0OworCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOworCisJaWYgKCFpbnRlbF9lbmdpbmVfcG1f
Z2V0X2lmX2F3YWtlKGVuZ2luZSkpCisJCXJldHVybjsKKworCXJxID0gZW5naW5lLT5oZWFydGJl
YXQuc3lzdG9sZTsKKwlpZiAocnEgJiYgaTkxNV9yZXF1ZXN0X2NvbXBsZXRlZChycSkpIHsKKwkJ
aTkxNV9yZXF1ZXN0X3B1dChycSk7CisJCWVuZ2luZS0+aGVhcnRiZWF0LnN5c3RvbGUgPSBOVUxM
OworCX0KKworCWlmIChpbnRlbF9ndF9pc193ZWRnZWQoZW5naW5lLT5ndCkpCisJCWdvdG8gb3V0
OworCisJaWYgKGVuZ2luZS0+aGVhcnRiZWF0LnN5c3RvbGUpIHsKKwkJaWYgKGVuZ2luZS0+c2No
ZWR1bGUgJiYKKwkJICAgIHJxLT5zY2hlZC5hdHRyLnByaW9yaXR5IDwgSTkxNV9QUklPUklUWV9C
QVJSSUVSKSB7CisJCQkvKgorCQkJICogR3JhZHVhbGx5IHJhaXNlIHRoZSBwcmlvcml0eSBvZiB0
aGUgaGVhcnRiZWF0IHRvCisJCQkgKiBnaXZlIGhpZ2ggcHJpb3JpdHkgd29yayBbd2hpY2ggcHJl
c3VtYWJseSBkZXNpcmVzCisJCQkgKiBsb3cgbGF0ZW5jeSBhbmQgbm8gaml0dGVyXSB0aGUgY2hh
bmNlIHRvIG5hdHVyYWxseQorCQkJICogY29tcGxldGUgYmVmb3JlIGJlaW5nIHByZWVtcHRlZC4K
KwkJCSAqLworCQkJYXR0ci5wcmlvcml0eSA9IEk5MTVfUFJJT1JJVFlfTUFTSzsKKwkJCWlmIChy
cS0+c2NoZWQuYXR0ci5wcmlvcml0eSA+PSBhdHRyLnByaW9yaXR5KQorCQkJCWF0dHIucHJpb3Jp
dHkgfD0gSTkxNV9VU0VSX1BSSU9SSVRZKEk5MTVfUFJJT1JJVFlfSEVBUlRCRUFUKTsKKwkJCWlm
IChycS0+c2NoZWQuYXR0ci5wcmlvcml0eSA+PSBhdHRyLnByaW9yaXR5KQorCQkJCWF0dHIucHJp
b3JpdHkgPSBJOTE1X1BSSU9SSVRZX0JBUlJJRVI7CisKKwkJCWxvY2FsX2JoX2Rpc2FibGUoKTsK
KwkJCWVuZ2luZS0+c2NoZWR1bGUocnEsICZhdHRyKTsKKwkJCWxvY2FsX2JoX2VuYWJsZSgpOwor
CQl9IGVsc2UgeworCQkJaWYgKElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1X0RFQlVHX0dFTSkp
CisJCQkJc2hvd19oZWFydGJlYXQocnEsIGVuZ2luZSk7CisKKwkJCWludGVsX2d0X2hhbmRsZV9l
cnJvcihlbmdpbmUtPmd0LCBlbmdpbmUtPm1hc2ssCisJCQkJCSAgICAgIEk5MTVfRVJST1JfQ0FQ
VFVSRSwKKwkJCQkJICAgICAgInN0b3BwZWQgaGVhcnRiZWF0IG9uICVzIiwKKwkJCQkJICAgICAg
ZW5naW5lLT5uYW1lKTsKKwkJfQorCQlnb3RvIG91dDsKKwl9CisKKwlpZiAoZW5naW5lLT53YWtl
cmVmX3NlcmlhbCA9PSBlbmdpbmUtPnNlcmlhbCkKKwkJZ290byBvdXQ7CisKKwltdXRleF9sb2Nr
KCZjZS0+dGltZWxpbmUtPm11dGV4KTsKKworCWludGVsX2NvbnRleHRfZW50ZXIoY2UpOworCXJx
ID0gX19pOTE1X3JlcXVlc3RfY3JlYXRlKGNlLCBHRlBfTk9XQUlUIHwgX19HRlBfTk9XQVJOKTsK
KwlpbnRlbF9jb250ZXh0X2V4aXQoY2UpOworCWlmIChJU19FUlIocnEpKQorCQlnb3RvIHVubG9j
azsKKworCWlkbGVfcHVsc2UoZW5naW5lLCBycSk7CisJaWYgKGk5MTVfbW9kcGFyYW1zLmVuYWJs
ZV9oYW5nY2hlY2spCisJCWVuZ2luZS0+aGVhcnRiZWF0LnN5c3RvbGUgPSBpOTE1X3JlcXVlc3Rf
Z2V0KHJxKTsKKworCV9faTkxNV9yZXF1ZXN0X2NvbW1pdChycSk7CisJX19pOTE1X3JlcXVlc3Rf
cXVldWUocnEsICZhdHRyKTsKKwordW5sb2NrOgorCW11dGV4X3VubG9jaygmY2UtPnRpbWVsaW5l
LT5tdXRleCk7CitvdXQ6CisJbmV4dF9oZWFydGJlYXQoZW5naW5lKTsKKwlpbnRlbF9lbmdpbmVf
cG1fcHV0KGVuZ2luZSk7Cit9CisKK3ZvaWQgaW50ZWxfZW5naW5lX3VucGFya19oZWFydGJlYXQo
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQoreworCWlmICghQ09ORklHX0RSTV9JOTE1
X0hFQVJUQkVBVF9JTlRFUlZBTCkKKwkJcmV0dXJuOworCisJbmV4dF9oZWFydGJlYXQoZW5naW5l
KTsKK30KKwordm9pZCBpbnRlbF9lbmdpbmVfcGFya19oZWFydGJlYXQoc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lKQoreworCWNhbmNlbF9kZWxheWVkX3dvcmsoJmVuZ2luZS0+aGVhcnRi
ZWF0LndvcmspOworCWk5MTVfcmVxdWVzdF9wdXQoZmV0Y2hfYW5kX3plcm8oJmVuZ2luZS0+aGVh
cnRiZWF0LnN5c3RvbGUpKTsKK30KKwordm9pZCBpbnRlbF9lbmdpbmVfaW5pdF9oZWFydGJlYXQo
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQoreworCUlOSVRfREVMQVlFRF9XT1JLKCZl
bmdpbmUtPmhlYXJ0YmVhdC53b3JrLCBoZWFydGJlYXQpOworfQorCiBpbnQgaW50ZWxfZW5naW5l
X3B1bHNlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIHsKIAlzdHJ1Y3QgaTkxNV9z
Y2hlZF9hdHRyIGF0dHIgPSB7IC5wcmlvcml0eSA9IEk5MTVfUFJJT1JJVFlfQkFSUklFUiB9Owpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVh
dC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5oCmlu
ZGV4IGI5NTA0NTFiNTk5OC4uMzkzOTEwMDQ1NTRkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5oCkBAIC05LDYgKzksMTEgQEAKIAogc3Ry
dWN0IGludGVsX2VuZ2luZV9jczsKIAordm9pZCBpbnRlbF9lbmdpbmVfaW5pdF9oZWFydGJlYXQo
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKKwordm9pZCBpbnRlbF9lbmdpbmVfcGFy
a19oZWFydGJlYXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKK3ZvaWQgaW50ZWxf
ZW5naW5lX3VucGFya19oZWFydGJlYXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsK
KwogaW50IGludGVsX2VuZ2luZV9wdWxzZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUp
OwogCiAjZW5kaWYgLyogSU5URUxfRU5HSU5FX0hFQVJUQkVBVF9IICovCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5jCmluZGV4IDdkNzY2MTFkOWRmMS4uNmZiZmEyMTYy
ZTU0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0u
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYwpAQCAtNyw2
ICs3LDcgQEAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogCiAjaW5jbHVkZSAiaW50ZWxfZW5naW5l
LmgiCisjaW5jbHVkZSAiaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5oIgogI2luY2x1ZGUgImludGVs
X2VuZ2luZV9wbS5oIgogI2luY2x1ZGUgImludGVsX2VuZ2luZV9wb29sLmgiCiAjaW5jbHVkZSAi
aW50ZWxfZ3QuaCIKQEAgLTM0LDcgKzM1LDcgQEAgc3RhdGljIGludCBfX2VuZ2luZV91bnBhcmso
c3RydWN0IGludGVsX3dha2VyZWYgKndmKQogCWlmIChlbmdpbmUtPnVucGFyaykKIAkJZW5naW5l
LT51bnBhcmsoZW5naW5lKTsKIAotCWludGVsX2VuZ2luZV9pbml0X2hhbmdjaGVjayhlbmdpbmUp
OworCWludGVsX2VuZ2luZV91bnBhcmtfaGVhcnRiZWF0KGVuZ2luZSk7CiAJcmV0dXJuIDA7CiB9
CiAKQEAgLTE1OCw2ICsxNTksNyBAQCBzdGF0aWMgaW50IF9fZW5naW5lX3Bhcmsoc3RydWN0IGlu
dGVsX3dha2VyZWYgKndmKQogCiAJY2FsbF9pZGxlX2JhcnJpZXJzKGVuZ2luZSk7IC8qIGNsZWFu
dXAgYWZ0ZXIgd2VkZ2luZyAqLwogCisJaW50ZWxfZW5naW5lX3BhcmtfaGVhcnRiZWF0KGVuZ2lu
ZSk7CiAJaW50ZWxfZW5naW5lX2Rpc2FybV9icmVhZGNydW1icyhlbmdpbmUpOwogCWludGVsX2Vu
Z2luZV9wb29sX3BhcmsoJmVuZ2luZS0+cG9vbCk7CiAKQEAgLTE4OCw2ICsxOTAsNyBAQCB2b2lk
IGludGVsX2VuZ2luZV9pbml0X19wbShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJ
c3RydWN0IGludGVsX3J1bnRpbWVfcG0gKnJwbSA9IGVuZ2luZS0+dW5jb3JlLT5ycG07CiAKIAlp
bnRlbF93YWtlcmVmX2luaXQoJmVuZ2luZS0+d2FrZXJlZiwgcnBtLCAmd2Zfb3BzKTsKKwlpbnRl
bF9lbmdpbmVfaW5pdF9oZWFydGJlYXQoZW5naW5lKTsKIH0KIAogI2lmIElTX0VOQUJMRUQoQ09O
RklHX0RSTV9JOTE1X1NFTEZURVNUKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZW5naW5lX3N5c2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfc3lzZnMuYwppbmRleCAxYWFlODNlYjQyMzcuLmE3YjU1MmI3NDE4ZiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3N5c2ZzLmMKQEAgLTksNiArOSw3IEBA
CiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgogI2luY2x1ZGUgImludGVsX2VuZ2luZS5oIgorI2lu
Y2x1ZGUgImludGVsX2VuZ2luZV9oZWFydGJlYXQuaCIKICNpbmNsdWRlICJpbnRlbF9lbmdpbmVf
c3lzZnMuaCIKIAogc3RydWN0IGtvYmpfZW5naW5lIHsKQEAgLTE2MSw2ICsxNjIsNDIgQEAgcHJl
ZW1wdF90aW1lb3V0X3N0b3JlKHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3Qga29ial9hdHRy
aWJ1dGUgKmF0dHIsCiBzdGF0aWMgc3RydWN0IGtvYmpfYXR0cmlidXRlIHByZWVtcHRfdGltZW91
dF9hdHRyID0KIF9fQVRUUihwcmVlbXB0X3RpbWVvdXRfbXMsIDA2NDQsIHByZWVtcHRfdGltZW91
dF9zaG93LCBwcmVlbXB0X3RpbWVvdXRfc3RvcmUpOwogCitzdGF0aWMgc3NpemVfdAoraGVhcnRi
ZWF0X2ludGVydmFsX3Nob3coc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBrb2JqX2F0dHJp
YnV0ZSAqYXR0ciwKKwkJCWNoYXIgKmJ1ZikKK3sKKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUgPSBrb2JqX3RvX2VuZ2luZShrb2JqKTsKKworCXJldHVybiBzcHJpbnRmKGJ1ZiwgIiVs
dVxuIiwgZW5naW5lLT5wcm9wcy5oZWFydGJlYXRfaW50ZXJ2YWwpOworfQorCitzdGF0aWMgc3Np
emVfdAoraGVhcnRiZWF0X2ludGVydmFsX3N0b3JlKHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1
Y3Qga29ial9hdHRyaWJ1dGUgKmF0dHIsCisJCQkgY29uc3QgY2hhciAqYnVmLCBzaXplX3QgY291
bnQpCit7CisJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lID0ga29ial90b19lbmdpbmUo
a29iaik7CisJdW5zaWduZWQgbG9uZyBkZWxheTsKKwlpbnQgZXJyOworCisJZXJyID0ga3N0cnRv
dWwoYnVmLCAwLCAmZGVsYXkpOworCWlmIChlcnIpCisJCXJldHVybiBlcnI7CisKKwkvKiBTZW5k
IG9uZSBsYXN0IHB1bHNlIGJlZm9yZSB0byBjbGVhbnVwIHBlcnNpc3RlbnQgaG9ncyAqLworCWlm
ICghZGVsYXkgJiYgQ09ORklHX0RSTV9JOTE1X1BSRUVNUFRfVElNRU9VVCkgeworCQllcnIgPSBp
bnRlbF9lbmdpbmVfcHVsc2UoZW5naW5lKTsKKwkJaWYgKGVycikKKwkJCXJldHVybiBlcnI7CisJ
fQorCisJV1JJVEVfT05DRShlbmdpbmUtPnByb3BzLmhlYXJ0YmVhdF9pbnRlcnZhbCwgZGVsYXkp
OworCXJldHVybiBjb3VudDsKK30KKworc3RhdGljIHN0cnVjdCBrb2JqX2F0dHJpYnV0ZSBoZWFy
dGJlYXRfaW50ZXJ2YWxfYXR0ciA9CitfX0FUVFIoaGVhcnRiZWF0X2ludGVydmFsX21zLCAwNjQ0
LAorICAgICAgIGhlYXJ0YmVhdF9pbnRlcnZhbF9zaG93LCBoZWFydGJlYXRfaW50ZXJ2YWxfc3Rv
cmUpOworCiBzdGF0aWMgdm9pZCBrb2JqX2VuZ2luZV9yZWxlYXNlKHN0cnVjdCBrb2JqZWN0ICpr
b2JqKQogewogCWtmcmVlKGtvYmopOwpAQCAtMjAwLDYgKzIzNyw5IEBAIHZvaWQgaW50ZWxfZW5n
aW5lc19hZGRfc3lzZnMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJCSZpbnN0X2F0
dHIuYXR0ciwKIAkJJmNhcHNfYXR0ci5hdHRyLAogCQkmYWxsX2NhcHNfYXR0ci5hdHRyLAorI2lm
IENPTkZJR19EUk1fSTkxNV9IRUFSVEJFQVRfSU5URVJWQUwKKwkJJmhlYXJ0YmVhdF9pbnRlcnZh
bF9hdHRyLmF0dHIsCisjZW5kaWYKIAkJTlVMTAogCX07CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKaW5kZXggNmFmOWIwMDk2OTc1Li5hZDNiZTJmYmQ3
MWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBl
cy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCkBA
IC0xNSw2ICsxNSw3IEBACiAjaW5jbHVkZSA8bGludXgvcmJ0cmVlLmg+CiAjaW5jbHVkZSA8bGlu
dXgvdGltZXIuaD4KICNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgorI2luY2x1ZGUgPGxpbnV4L3dv
cmtxdWV1ZS5oPgogCiAjaW5jbHVkZSAiaTkxNV9nZW0uaCIKICNpbmNsdWRlICJpOTE1X3BtdS5o
IgpAQCAtNzYsMTQgKzc3LDYgQEAgc3RydWN0IGludGVsX2luc3Rkb25lIHsKIAl1MzIgcm93W0k5
MTVfTUFYX1NMSUNFU11bSTkxNV9NQVhfU1VCU0xJQ0VTXTsKIH07CiAKLXN0cnVjdCBpbnRlbF9l
bmdpbmVfaGFuZ2NoZWNrIHsKLQl1NjQgYWN0aGQ7Ci0JdTMyIGxhc3RfcmluZzsKLQl1MzIgbGFz
dF9oZWFkOwotCXVuc2lnbmVkIGxvbmcgYWN0aW9uX3RpbWVzdGFtcDsKLQlzdHJ1Y3QgaW50ZWxf
aW5zdGRvbmUgaW5zdGRvbmU7Ci19OwotCiBzdHJ1Y3QgaW50ZWxfcmluZyB7CiAJc3RydWN0IGty
ZWYgcmVmOwogCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOwpAQCAtMzMwLDYgKzMyMywxMSBAQCBzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzIHsKIAogCWludGVsX2VuZ2luZV9tYXNrX3Qgc2F0dXJhdGVkOyAv
KiBzdWJtaXR0aW5nIHNlbWFwaG9yZXMgdG9vIGxhdGU/ICovCiAKKwlzdHJ1Y3QgeworCQlzdHJ1
Y3QgZGVsYXllZF93b3JrIHdvcms7CisJCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnN5c3RvbGU7CisJ
fSBoZWFydGJlYXQ7CisKIAl1bnNpZ25lZCBsb25nIHNlcmlhbDsKIAogCXVuc2lnbmVkIGxvbmcg
d2FrZXJlZl9zZXJpYWw7CkBAIC00ODAsOCArNDc4LDYgQEAgc3RydWN0IGludGVsX2VuZ2luZV9j
cyB7CiAJLyogc3RhdHVzX25vdGlmaWVyOiBsaXN0IG9mIGNhbGxiYWNrcyBmb3IgY29udGV4dC1z
d2l0Y2ggY2hhbmdlcyAqLwogCXN0cnVjdCBhdG9taWNfbm90aWZpZXJfaGVhZCBjb250ZXh0X3N0
YXR1c19ub3RpZmllcjsKIAotCXN0cnVjdCBpbnRlbF9lbmdpbmVfaGFuZ2NoZWNrIGhhbmdjaGVj
azsKLQogI2RlZmluZSBJOTE1X0VOR0lORV9ORUVEU19DTURfUEFSU0VSIEJJVCgwKQogI2RlZmlu
ZSBJOTE1X0VOR0lORV9TVVBQT1JUU19TVEFUUyAgIEJJVCgxKQogI2RlZmluZSBJOTE1X0VOR0lO
RV9IQVNfUFJFRU1QVElPTiAgIEJJVCgyKQpAQCAtNTQ5LDYgKzU0NSw3IEBAIHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgewogCiAJc3RydWN0IHsKIAkJdW5zaWduZWQgbG9uZyBwcmVlbXB0X3RpbWVv
dXQ7CisJCXVuc2lnbmVkIGxvbmcgaGVhcnRiZWF0X2ludGVydmFsOwogCX0gcHJvcHM7CiB9Owog
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYwppbmRleCBiMzYxOWEyYTVkMGUuLmYzZTE5MjU5
ODdlMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5jCkBAIC0yMiw3ICsyMiw2IEBAIHZv
aWQgaW50ZWxfZ3RfaW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCBzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqaTkxNSkKIAlJTklUX0xJU1RfSEVBRCgmZ3QtPmNsb3NlZF92bWEpOwogCXNw
aW5fbG9ja19pbml0KCZndC0+Y2xvc2VkX2xvY2spOwogCi0JaW50ZWxfZ3RfaW5pdF9oYW5nY2hl
Y2soZ3QpOwogCWludGVsX2d0X2luaXRfcmVzZXQoZ3QpOwogCWludGVsX2d0X2luaXRfcmVxdWVz
dHMoZ3QpOwogCWludGVsX2d0X3BtX2luaXRfZWFybHkoZ3QpOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2d0LmgKaW5kZXggZTZhYjBiZmYwZWZiLi41YjZlZmZlZDM3MTMgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZ3QuaApAQCAtNDYsOCArNDYsNiBAQCB2b2lkIGludGVsX2d0X2NsZWFyX2Vy
cm9yX3JlZ2lzdGVycyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0LAogdm9pZCBpbnRlbF9ndF9mbHVzaF9n
Z3R0X3dyaXRlcyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKIHZvaWQgaW50ZWxfZ3RfY2hpcHNldF9m
bHVzaChzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKIAotdm9pZCBpbnRlbF9ndF9pbml0X2hhbmdjaGVj
ayhzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKLQogc3RhdGljIGlubGluZSB1MzIgaW50ZWxfZ3Rfc2Ny
YXRjaF9vZmZzZXQoY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCwKIAkJCQkJICBlbnVtIGludGVs
X2d0X3NjcmF0Y2hfZmllbGQgZmllbGQpCiB7CkBAIC01OSw2ICs1Nyw0IEBAIHN0YXRpYyBpbmxp
bmUgYm9vbCBpbnRlbF9ndF9pc193ZWRnZWQoc3RydWN0IGludGVsX2d0ICpndCkKIAlyZXR1cm4g
X19pbnRlbF9yZXNldF9mYWlsZWQoJmd0LT5yZXNldCk7CiB9CiAKLXZvaWQgaW50ZWxfZ3RfcXVl
dWVfaGFuZ2NoZWNrKHN0cnVjdCBpbnRlbF9ndCAqZ3QpOwotCiAjZW5kaWYgLyogX19JTlRFTF9H
VF9IX18gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3Bt
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jCmluZGV4IGJkMWJkM2Uw
MGE5NC4uMTUxMWFmOTlkMzA5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9ndF9wbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3BtLmMK
QEAgLTUyLDcgKzUyLDYgQEAgc3RhdGljIGludCBfX2d0X3VucGFyayhzdHJ1Y3QgaW50ZWxfd2Fr
ZXJlZiAqd2YpCiAKIAlpOTE1X3BtdV9ndF91bnBhcmtlZChpOTE1KTsKIAotCWludGVsX2d0X3F1
ZXVlX2hhbmdjaGVjayhndCk7CiAJaW50ZWxfZ3RfdW5wYXJrX3JlcXVlc3RzKGd0KTsKIAogCXBt
X25vdGlmeShndCwgSU5URUxfR1RfVU5QQVJLKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9ndF90eXBlcy5oCmluZGV4IGJlNGIyNjM2MjFjOC4uYTJlOGM4YTk1MmU3IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5oCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmgKQEAgLTI2LDE0ICsyNiw2IEBAIHN0cnVj
dCBpOTE1X2dndHQ7CiBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzOwogc3RydWN0IGludGVsX3VuY29y
ZTsKIAotc3RydWN0IGludGVsX2hhbmdjaGVjayB7Ci0JLyogRm9yIGhhbmdjaGVjayB0aW1lciAq
LwotI2RlZmluZSBEUk1fSTkxNV9IQU5HQ0hFQ0tfUEVSSU9EIDE1MDAgLyogaW4gbXMgKi8KLSNk
ZWZpbmUgRFJNX0k5MTVfSEFOR0NIRUNLX0pJRkZJRVMgbXNlY3NfdG9famlmZmllcyhEUk1fSTkx
NV9IQU5HQ0hFQ0tfUEVSSU9EKQotCi0Jc3RydWN0IGRlbGF5ZWRfd29yayB3b3JrOwotfTsKLQog
c3RydWN0IGludGVsX2d0IHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNTsKIAlzdHJ1
Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmU7CkBAIC02Nyw3ICs1OSw2IEBAIHN0cnVjdCBpbnRlbF9n
dCB7CiAJc3RydWN0IGxpc3RfaGVhZCBjbG9zZWRfdm1hOwogCXNwaW5sb2NrX3QgY2xvc2VkX2xv
Y2s7IC8qIGd1YXJkcyB0aGUgbGlzdCBvZiBjbG9zZWRfdm1hICovCiAKLQlzdHJ1Y3QgaW50ZWxf
aGFuZ2NoZWNrIGhhbmdjaGVjazsKIAlzdHJ1Y3QgaW50ZWxfcmVzZXQgcmVzZXQ7CiAKIAkvKioK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2hhbmdjaGVjay5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfaGFuZ2NoZWNrLmMKZGVsZXRlZCBmaWxlIG1v
ZGUgMTAwNjQ0CmluZGV4IGMxNGRiZWIzY2NjMy4uMDAwMDAwMDAwMDAwCi0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2hhbmdjaGVjay5jCisrKyAvZGV2L251bGwKQEAgLTEsMzYx
ICswLDAgQEAKLS8qCi0gKiBDb3B5cmlnaHQgwqkgMjAxNiBJbnRlbCBDb3Jwb3JhdGlvbgotICoK
LSAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkg
cGVyc29uIG9idGFpbmluZyBhCi0gKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0
ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAotICogdG8gZGVhbCBpbiB0
aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRh
dGlvbgotICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gs
IGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsCi0gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNv
ZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKLSAqIFNvZnR3YXJlIGlz
IGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6
Ci0gKgotICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBu
b3RpY2UgKGluY2x1ZGluZyB0aGUgbmV4dAotICogcGFyYWdyYXBoKSBzaGFsbCBiZSBpbmNsdWRl
ZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZQotICogU29mdHdh
cmUuCi0gKgotICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FS
UkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKLSAqIElNUExJRUQsIElOQ0xVRElORyBCVVQg
Tk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAotICogRklU
TkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5P
IEVWRU5UIFNIQUxMCi0gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFC
TEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgotICogTElBQklMSVRZLCBXSEVUSEVS
IElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcKLSAq
IEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBV
U0UgT1IgT1RIRVIgREVBTElOR1MKLSAqIElOIFRIRSBTT0ZUV0FSRS4KLSAqCi0gKi8KLQotI2lu
Y2x1ZGUgImk5MTVfZHJ2LmgiCi0jaW5jbHVkZSAiaW50ZWxfZW5naW5lLmgiCi0jaW5jbHVkZSAi
aW50ZWxfZ3QuaCIKLSNpbmNsdWRlICJpbnRlbF9yZXNldC5oIgotCi1zdHJ1Y3QgaGFuZ2NoZWNr
IHsKLQl1NjQgYWN0aGQ7Ci0JdTMyIHJpbmc7Ci0JdTMyIGhlYWQ7Ci0JZW51bSBpbnRlbF9lbmdp
bmVfaGFuZ2NoZWNrX2FjdGlvbiBhY3Rpb247Ci0JdW5zaWduZWQgbG9uZyBhY3Rpb25fdGltZXN0
YW1wOwotCWludCBkZWFkbG9jazsKLQlzdHJ1Y3QgaW50ZWxfaW5zdGRvbmUgaW5zdGRvbmU7Ci0J
Ym9vbCB3ZWRnZWQ6MTsKLQlib29sIHN0YWxsZWQ6MTsKLX07Ci0KLXN0YXRpYyBib29sIGluc3Rk
b25lX3VuY2hhbmdlZCh1MzIgY3VycmVudF9pbnN0ZG9uZSwgdTMyICpvbGRfaW5zdGRvbmUpCi17
Ci0JdTMyIHRtcCA9IGN1cnJlbnRfaW5zdGRvbmUgfCAqb2xkX2luc3Rkb25lOwotCWJvb2wgdW5j
aGFuZ2VkOwotCi0JdW5jaGFuZ2VkID0gdG1wID09ICpvbGRfaW5zdGRvbmU7Ci0JKm9sZF9pbnN0
ZG9uZSB8PSB0bXA7Ci0KLQlyZXR1cm4gdW5jaGFuZ2VkOwotfQotCi1zdGF0aWMgYm9vbCBzdWJ1
bml0c19zdHVjayhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCi17Ci0Jc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gZW5naW5lLT5pOTE1OwotCWNvbnN0IHN0cnVjdCBz
c2V1X2Rldl9pbmZvICpzc2V1ID0gJlJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnNzZXU7Ci0Jc3Ry
dWN0IGludGVsX2luc3Rkb25lIGluc3Rkb25lOwotCXN0cnVjdCBpbnRlbF9pbnN0ZG9uZSAqYWNj
dV9pbnN0ZG9uZSA9ICZlbmdpbmUtPmhhbmdjaGVjay5pbnN0ZG9uZTsKLQlib29sIHN0dWNrOwot
CWludCBzbGljZTsKLQlpbnQgc3Vic2xpY2U7Ci0KLQlpbnRlbF9lbmdpbmVfZ2V0X2luc3Rkb25l
KGVuZ2luZSwgJmluc3Rkb25lKTsKLQotCS8qIFRoZXJlIG1pZ2h0IGJlIHVuc3RhYmxlIHN1YnVu
aXQgc3RhdGVzIGV2ZW4gd2hlbgotCSAqIGFjdHVhbCBoZWFkIGlzIG5vdCBtb3ZpbmcuIEZpbHRl
ciBvdXQgdGhlIHVuc3RhYmxlIG9uZXMgYnkKLQkgKiBhY2N1bXVsYXRpbmcgdGhlIHVuZG9uZSAt
PiBkb25lIHRyYW5zaXRpb25zIGFuZCBvbmx5Ci0JICogY29uc2lkZXIgdGhvc2UgYXMgcHJvZ3Jl
c3MuCi0JICovCi0Jc3R1Y2sgPSBpbnN0ZG9uZV91bmNoYW5nZWQoaW5zdGRvbmUuaW5zdGRvbmUs
Ci0JCQkJICAgJmFjY3VfaW5zdGRvbmUtPmluc3Rkb25lKTsKLQlzdHVjayAmPSBpbnN0ZG9uZV91
bmNoYW5nZWQoaW5zdGRvbmUuc2xpY2VfY29tbW9uLAotCQkJCSAgICAmYWNjdV9pbnN0ZG9uZS0+
c2xpY2VfY29tbW9uKTsKLQotCWZvcl9lYWNoX2luc3Rkb25lX3NsaWNlX3N1YnNsaWNlKGRldl9w
cml2LCBzc2V1LCBzbGljZSwgc3Vic2xpY2UpIHsKLQkJc3R1Y2sgJj0gaW5zdGRvbmVfdW5jaGFu
Z2VkKGluc3Rkb25lLnNhbXBsZXJbc2xpY2VdW3N1YnNsaWNlXSwKLQkJCQkJICAgICZhY2N1X2lu
c3Rkb25lLT5zYW1wbGVyW3NsaWNlXVtzdWJzbGljZV0pOwotCQlzdHVjayAmPSBpbnN0ZG9uZV91
bmNoYW5nZWQoaW5zdGRvbmUucm93W3NsaWNlXVtzdWJzbGljZV0sCi0JCQkJCSAgICAmYWNjdV9p
bnN0ZG9uZS0+cm93W3NsaWNlXVtzdWJzbGljZV0pOwotCX0KLQotCXJldHVybiBzdHVjazsKLX0K
LQotc3RhdGljIGVudW0gaW50ZWxfZW5naW5lX2hhbmdjaGVja19hY3Rpb24KLWhlYWRfc3R1Y2so
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCB1NjQgYWN0aGQpCi17Ci0JaWYgKGFjdGhk
ICE9IGVuZ2luZS0+aGFuZ2NoZWNrLmFjdGhkKSB7Ci0KLQkJLyogQ2xlYXIgc3VidW5pdCBzdGF0
ZXMgb24gaGVhZCBtb3ZlbWVudCAqLwotCQltZW1zZXQoJmVuZ2luZS0+aGFuZ2NoZWNrLmluc3Rk
b25lLCAwLAotCQkgICAgICAgc2l6ZW9mKGVuZ2luZS0+aGFuZ2NoZWNrLmluc3Rkb25lKSk7Ci0K
LQkJcmV0dXJuIEVOR0lORV9BQ1RJVkVfSEVBRDsKLQl9Ci0KLQlpZiAoIXN1YnVuaXRzX3N0dWNr
KGVuZ2luZSkpCi0JCXJldHVybiBFTkdJTkVfQUNUSVZFX1NVQlVOSVRTOwotCi0JcmV0dXJuIEVO
R0lORV9ERUFEOwotfQotCi1zdGF0aWMgZW51bSBpbnRlbF9lbmdpbmVfaGFuZ2NoZWNrX2FjdGlv
bgotZW5naW5lX3N0dWNrKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgdTY0IGFjdGhk
KQotewotCWVudW0gaW50ZWxfZW5naW5lX2hhbmdjaGVja19hY3Rpb24gaGE7Ci0JdTMyIHRtcDsK
LQotCWhhID0gaGVhZF9zdHVjayhlbmdpbmUsIGFjdGhkKTsKLQlpZiAoaGEgIT0gRU5HSU5FX0RF
QUQpCi0JCXJldHVybiBoYTsKLQotCWlmIChJU19HRU4oZW5naW5lLT5pOTE1LCAyKSkKLQkJcmV0
dXJuIEVOR0lORV9ERUFEOwotCi0JLyogSXMgdGhlIGNoaXAgaGFuZ2luZyBvbiBhIFdBSVRfRk9S
X0VWRU5UPwotCSAqIElmIHNvIHdlIGNhbiBzaW1wbHkgcG9rZSB0aGUgUkJfV0FJVCBiaXQKLQkg
KiBhbmQgYnJlYWsgdGhlIGhhbmcuIFRoaXMgc2hvdWxkIHdvcmsgb24KLQkgKiBhbGwgYnV0IHRo
ZSBzZWNvbmQgZ2VuZXJhdGlvbiBjaGlwc2V0cy4KLQkgKi8KLQl0bXAgPSBFTkdJTkVfUkVBRChl
bmdpbmUsIFJJTkdfQ1RMKTsKLQlpZiAodG1wICYgUklOR19XQUlUKSB7Ci0JCWludGVsX2d0X2hh
bmRsZV9lcnJvcihlbmdpbmUtPmd0LCBlbmdpbmUtPm1hc2ssIDAsCi0JCQkJICAgICAgInN0dWNr
IHdhaXQgb24gJXMiLCBlbmdpbmUtPm5hbWUpOwotCQlFTkdJTkVfV1JJVEUoZW5naW5lLCBSSU5H
X0NUTCwgdG1wKTsKLQkJcmV0dXJuIEVOR0lORV9XQUlUX0tJQ0s7Ci0JfQotCi0JcmV0dXJuIEVO
R0lORV9ERUFEOwotfQotCi1zdGF0aWMgdm9pZCBoYW5nY2hlY2tfbG9hZF9zYW1wbGUoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAotCQkJCSAgc3RydWN0IGhhbmdjaGVjayAqaGMpCi17
Ci0JaGMtPmFjdGhkID0gaW50ZWxfZW5naW5lX2dldF9hY3RpdmVfaGVhZChlbmdpbmUpOwotCWhj
LT5yaW5nID0gRU5HSU5FX1JFQUQoZW5naW5lLCBSSU5HX1NUQVJUKTsKLQloYy0+aGVhZCA9IEVO
R0lORV9SRUFEKGVuZ2luZSwgUklOR19IRUFEKTsKLX0KLQotc3RhdGljIHZvaWQgaGFuZ2NoZWNr
X3N0b3JlX3NhbXBsZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCi0JCQkJICAgY29u
c3Qgc3RydWN0IGhhbmdjaGVjayAqaGMpCi17Ci0JZW5naW5lLT5oYW5nY2hlY2suYWN0aGQgPSBo
Yy0+YWN0aGQ7Ci0JZW5naW5lLT5oYW5nY2hlY2subGFzdF9yaW5nID0gaGMtPnJpbmc7Ci0JZW5n
aW5lLT5oYW5nY2hlY2subGFzdF9oZWFkID0gaGMtPmhlYWQ7Ci19Ci0KLXN0YXRpYyBlbnVtIGlu
dGVsX2VuZ2luZV9oYW5nY2hlY2tfYWN0aW9uCi1oYW5nY2hlY2tfZ2V0X2FjdGlvbihzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUsCi0JCSAgICAgY29uc3Qgc3RydWN0IGhhbmdjaGVjayAq
aGMpCi17Ci0JaWYgKGludGVsX2VuZ2luZV9pc19pZGxlKGVuZ2luZSkpCi0JCXJldHVybiBFTkdJ
TkVfSURMRTsKLQotCWlmIChlbmdpbmUtPmhhbmdjaGVjay5sYXN0X3JpbmcgIT0gaGMtPnJpbmcp
Ci0JCXJldHVybiBFTkdJTkVfQUNUSVZFX1NFUU5POwotCi0JaWYgKGVuZ2luZS0+aGFuZ2NoZWNr
Lmxhc3RfaGVhZCAhPSBoYy0+aGVhZCkKLQkJcmV0dXJuIEVOR0lORV9BQ1RJVkVfU0VRTk87Ci0K
LQlyZXR1cm4gZW5naW5lX3N0dWNrKGVuZ2luZSwgaGMtPmFjdGhkKTsKLX0KLQotc3RhdGljIHZv
aWQgaGFuZ2NoZWNrX2FjY3VtdWxhdGVfc2FtcGxlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSwKLQkJCQkJc3RydWN0IGhhbmdjaGVjayAqaGMpCi17Ci0JdW5zaWduZWQgbG9uZyB0aW1l
b3V0ID0gSTkxNV9FTkdJTkVfREVBRF9USU1FT1VUOwotCi0JaGMtPmFjdGlvbiA9IGhhbmdjaGVj
a19nZXRfYWN0aW9uKGVuZ2luZSwgaGMpOwotCi0JLyogV2UgYWx3YXlzIGluY3JlbWVudCB0aGUg
cHJvZ3Jlc3MKLQkgKiBpZiB0aGUgZW5naW5lIGlzIGJ1c3kgYW5kIHN0aWxsIHByb2Nlc3NpbmcK
LQkgKiB0aGUgc2FtZSByZXF1ZXN0LCBzbyB0aGF0IG5vIHNpbmdsZSByZXF1ZXN0Ci0JICogY2Fu
IHJ1biBpbmRlZmluaXRlbHkgKHN1Y2ggYXMgYSBjaGFpbiBvZgotCSAqIGJhdGNoZXMpLiBUaGUg
b25seSB0aW1lIHdlIGRvIG5vdCBpbmNyZW1lbnQKLQkgKiB0aGUgaGFuZ2NoZWNrIHNjb3JlIG9u
IHRoaXMgcmluZywgaWYgdGhpcwotCSAqIGVuZ2luZSBpcyBpbiBhIGxlZ2l0aW1hdGUgd2FpdCBm
b3IgYW5vdGhlcgotCSAqIGVuZ2luZS4gSW4gdGhhdCBjYXNlIHRoZSB3YWl0aW5nIGVuZ2luZSBp
cyBhCi0JICogdmljdGltIGFuZCB3ZSB3YW50IHRvIGJlIHN1cmUgd2UgY2F0Y2ggdGhlCi0JICog
cmlnaHQgY3VscHJpdC4gVGhlbiBldmVyeSB0aW1lIHdlIGRvIGtpY2sKLQkgKiB0aGUgcmluZywg
bWFrZSBpdCBhcyBhIHByb2dyZXNzIGFzIHRoZSBzZXFubwotCSAqIGFkdmFuY2VtZW50IG1pZ2h0
IGVuc3VyZSBhbmQgaWYgbm90LCBpdAotCSAqIHdpbGwgY2F0Y2ggdGhlIGhhbmdpbmcgZW5naW5l
LgotCSAqLwotCi0Jc3dpdGNoIChoYy0+YWN0aW9uKSB7Ci0JY2FzZSBFTkdJTkVfSURMRToKLQlj
YXNlIEVOR0lORV9BQ1RJVkVfU0VRTk86Ci0JCS8qIENsZWFyIGhlYWQgYW5kIHN1YnVuaXQgc3Rh
dGVzIG9uIHNlcW5vIG1vdmVtZW50ICovCi0JCWhjLT5hY3RoZCA9IDA7Ci0KLQkJbWVtc2V0KCZl
bmdpbmUtPmhhbmdjaGVjay5pbnN0ZG9uZSwgMCwKLQkJICAgICAgIHNpemVvZihlbmdpbmUtPmhh
bmdjaGVjay5pbnN0ZG9uZSkpOwotCi0JCS8qIEludGVudGlvbmFsIGZhbGwgdGhyb3VnaCAqLwot
CWNhc2UgRU5HSU5FX1dBSVRfS0lDSzoKLQljYXNlIEVOR0lORV9XQUlUOgotCQllbmdpbmUtPmhh
bmdjaGVjay5hY3Rpb25fdGltZXN0YW1wID0gamlmZmllczsKLQkJYnJlYWs7Ci0KLQljYXNlIEVO
R0lORV9BQ1RJVkVfSEVBRDoKLQljYXNlIEVOR0lORV9BQ1RJVkVfU1VCVU5JVFM6Ci0JCS8qCi0J
CSAqIFNlcW5vIHN0dWNrIHdpdGggc3RpbGwgYWN0aXZlIGVuZ2luZSBnZXRzIGxlZXdheSwKLQkJ
ICogaW4gaG9wZXMgdGhhdCBpdCBpcyBqdXN0IGEgbG9uZyBzaGFkZXIuCi0JCSAqLwotCQl0aW1l
b3V0ID0gSTkxNV9TRVFOT19ERUFEX1RJTUVPVVQ7Ci0JCWJyZWFrOwotCi0JY2FzZSBFTkdJTkVf
REVBRDoKLQkJYnJlYWs7Ci0KLQlkZWZhdWx0OgotCQlNSVNTSU5HX0NBU0UoaGMtPmFjdGlvbik7
Ci0JfQotCi0JaGMtPnN0YWxsZWQgPSB0aW1lX2FmdGVyKGppZmZpZXMsCi0JCQkJIGVuZ2luZS0+
aGFuZ2NoZWNrLmFjdGlvbl90aW1lc3RhbXAgKyB0aW1lb3V0KTsKLQloYy0+d2VkZ2VkID0gdGlt
ZV9hZnRlcihqaWZmaWVzLAotCQkJCSBlbmdpbmUtPmhhbmdjaGVjay5hY3Rpb25fdGltZXN0YW1w
ICsKLQkJCQkgSTkxNV9FTkdJTkVfV0VER0VEX1RJTUVPVVQpOwotfQotCi1zdGF0aWMgdm9pZCBo
YW5nY2hlY2tfZGVjbGFyZV9oYW5nKHN0cnVjdCBpbnRlbF9ndCAqZ3QsCi0JCQkJICAgaW50ZWxf
ZW5naW5lX21hc2tfdCBodW5nLAotCQkJCSAgIGludGVsX2VuZ2luZV9tYXNrX3Qgc3R1Y2spCi17
Ci0Jc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOwotCWludGVsX2VuZ2luZV9tYXNrX3Qg
dG1wOwotCWNoYXIgbXNnWzgwXTsKLQlpbnQgbGVuOwotCi0JLyogSWYgc29tZSByaW5ncyBodW5n
IGJ1dCBvdGhlcnMgd2VyZSBzdGlsbCBidXN5LCBvbmx5Ci0JICogYmxhbWUgdGhlIGhhbmdpbmcg
cmluZ3MgaW4gdGhlIHN5bm9wc2lzLgotCSAqLwotCWlmIChzdHVjayAhPSBodW5nKQotCQlodW5n
ICY9IH5zdHVjazsKLQlsZW4gPSBzY25wcmludGYobXNnLCBzaXplb2YobXNnKSwKLQkJCSIlcyBv
biAiLCBzdHVjayA9PSBodW5nID8gIm5vIHByb2dyZXNzIiA6ICJoYW5nIik7Ci0JZm9yX2VhY2hf
ZW5naW5lX21hc2tlZChlbmdpbmUsIGd0LT5pOTE1LCBodW5nLCB0bXApCi0JCWxlbiArPSBzY25w
cmludGYobXNnICsgbGVuLCBzaXplb2YobXNnKSAtIGxlbiwKLQkJCQkgIiVzLCAiLCBlbmdpbmUt
Pm5hbWUpOwotCW1zZ1tsZW4tMl0gPSAnXDAnOwotCi0JcmV0dXJuIGludGVsX2d0X2hhbmRsZV9l
cnJvcihndCwgaHVuZywgSTkxNV9FUlJPUl9DQVBUVVJFLCAiJXMiLCBtc2cpOwotfQotCi0vKgot
ICogVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgY2hpcCBoYXNuJ3QgcmVwb3J0ZWQgYmFjayB3aXRo
IGNvbXBsZXRlZAotICogYmF0Y2hidWZmZXJzIGluIGEgbG9uZyB0aW1lLiBXZSBrZWVwIHRyYWNr
IHBlciByaW5nIHNlcW5vIHByb2dyZXNzIGFuZAotICogaWYgdGhlcmUgYXJlIG5vIHByb2dyZXNz
LCBoYW5nY2hlY2sgc2NvcmUgZm9yIHRoYXQgcmluZyBpcyBpbmNyZWFzZWQuCi0gKiBGdXJ0aGVy
LCBhY3RoZCBpcyBpbnNwZWN0ZWQgdG8gc2VlIGlmIHRoZSByaW5nIGlzIHN0dWNrLiBPbiBzdHVj
ayBjYXNlCi0gKiB3ZSBraWNrIHRoZSByaW5nLiBJZiB3ZSBzZWUgbm8gcHJvZ3Jlc3Mgb24gdGhy
ZWUgc3Vic2VxdWVudCBjYWxscwotICogd2UgYXNzdW1lIGNoaXAgaXMgd2VkZ2VkIGFuZCB0cnkg
dG8gZml4IGl0IGJ5IHJlc2V0dGluZyB0aGUgY2hpcC4KLSAqLwotc3RhdGljIHZvaWQgaGFuZ2No
ZWNrX2VsYXBzZWQoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQotewotCXN0cnVjdCBpbnRlbF9n
dCAqZ3QgPQotCQljb250YWluZXJfb2Yod29yaywgdHlwZW9mKCpndCksIGhhbmdjaGVjay53b3Jr
LndvcmspOwotCWludGVsX2VuZ2luZV9tYXNrX3QgaHVuZyA9IDAsIHN0dWNrID0gMCwgd2VkZ2Vk
ID0gMDsKLQlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7Ci0JZW51bSBpbnRlbF9lbmdp
bmVfaWQgaWQ7Ci0JaW50ZWxfd2FrZXJlZl90IHdha2VyZWY7Ci0KLQlpZiAoIWk5MTVfbW9kcGFy
YW1zLmVuYWJsZV9oYW5nY2hlY2spCi0JCXJldHVybjsKLQotCWlmICghUkVBRF9PTkNFKGd0LT5h
d2FrZSkpCi0JCXJldHVybjsKLQotCWlmIChpbnRlbF9ndF9pc193ZWRnZWQoZ3QpKQotCQlyZXR1
cm47Ci0KLQl3YWtlcmVmID0gaW50ZWxfcnVudGltZV9wbV9nZXRfaWZfaW5fdXNlKGd0LT51bmNv
cmUtPnJwbSk7Ci0JaWYgKCF3YWtlcmVmKQotCQlyZXR1cm47Ci0KLQkvKiBBcyBlbmFibGluZyB0
aGUgR1BVIHJlcXVpcmVzIGZhaXJseSBleHRlbnNpdmUgbW1pbyBhY2Nlc3MsCi0JICogcGVyaW9k
aWNhbGx5IGFybSB0aGUgbW1pbyBjaGVja2VyIHRvIHNlZSBpZiB3ZSBhcmUgdHJpZ2dlcmluZwot
CSAqIGFueSBpbnZhbGlkIGFjY2Vzcy4KLQkgKi8KLQlpbnRlbF91bmNvcmVfYXJtX3VuY2xhaW1l
ZF9tbWlvX2RldGVjdGlvbihndC0+dW5jb3JlKTsKLQotCWZvcl9lYWNoX2VuZ2luZShlbmdpbmUs
IGd0LT5pOTE1LCBpZCkgewotCQlzdHJ1Y3QgaGFuZ2NoZWNrIGhjOwotCi0JCWludGVsX2VuZ2lu
ZV9icmVhZGNydW1ic19pcnEoZW5naW5lKTsKLQotCQloYW5nY2hlY2tfbG9hZF9zYW1wbGUoZW5n
aW5lLCAmaGMpOwotCQloYW5nY2hlY2tfYWNjdW11bGF0ZV9zYW1wbGUoZW5naW5lLCAmaGMpOwot
CQloYW5nY2hlY2tfc3RvcmVfc2FtcGxlKGVuZ2luZSwgJmhjKTsKLQotCQlpZiAoaGMuc3RhbGxl
ZCkgewotCQkJaHVuZyB8PSBlbmdpbmUtPm1hc2s7Ci0JCQlpZiAoaGMuYWN0aW9uICE9IEVOR0lO
RV9ERUFEKQotCQkJCXN0dWNrIHw9IGVuZ2luZS0+bWFzazsKLQkJfQotCi0JCWlmIChoYy53ZWRn
ZWQpCi0JCQl3ZWRnZWQgfD0gZW5naW5lLT5tYXNrOwotCX0KLQotCWlmIChHRU1fU0hPV19ERUJV
RygpICYmIChodW5nIHwgc3R1Y2spKSB7Ci0JCXN0cnVjdCBkcm1fcHJpbnRlciBwID0gZHJtX2Rl
YnVnX3ByaW50ZXIoImhhbmdjaGVjayIpOwotCi0JCWZvcl9lYWNoX2VuZ2luZShlbmdpbmUsIGd0
LT5pOTE1LCBpZCkgewotCQkJaWYgKGludGVsX2VuZ2luZV9pc19pZGxlKGVuZ2luZSkpCi0JCQkJ
Y29udGludWU7Ci0KLQkJCWludGVsX2VuZ2luZV9kdW1wKGVuZ2luZSwgJnAsICIlc1xuIiwgZW5n
aW5lLT5uYW1lKTsKLQkJfQotCX0KLQotCWlmICh3ZWRnZWQpIHsKLQkJZGV2X2VycihndC0+aTkx
NS0+ZHJtLmRldiwKLQkJCSJHUFUgcmVjb3ZlcnkgdGltZWQgb3V0LCIKLQkJCSIgY2FuY2VsbGlu
ZyBhbGwgaW4tZmxpZ2h0IHJlbmRlcmluZy5cbiIpOwotCQlHRU1fVFJBQ0VfRFVNUCgpOwotCQlp
bnRlbF9ndF9zZXRfd2VkZ2VkKGd0KTsKLQl9Ci0KLQlpZiAoaHVuZykKLQkJaGFuZ2NoZWNrX2Rl
Y2xhcmVfaGFuZyhndCwgaHVuZywgc3R1Y2spOwotCi0JaW50ZWxfcnVudGltZV9wbV9wdXQoZ3Qt
PnVuY29yZS0+cnBtLCB3YWtlcmVmKTsKLQotCS8qIFJlc2V0IHRpbWVyIGluIGNhc2UgR1BVIGhh
bmdzIHdpdGhvdXQgYW5vdGhlciByZXF1ZXN0IGJlaW5nIGFkZGVkICovCi0JaW50ZWxfZ3RfcXVl
dWVfaGFuZ2NoZWNrKGd0KTsKLX0KLQotdm9pZCBpbnRlbF9ndF9xdWV1ZV9oYW5nY2hlY2soc3Ry
dWN0IGludGVsX2d0ICpndCkKLXsKLQl1bnNpZ25lZCBsb25nIGRlbGF5OwotCi0JaWYgKHVubGlr
ZWx5KCFpOTE1X21vZHBhcmFtcy5lbmFibGVfaGFuZ2NoZWNrKSkKLQkJcmV0dXJuOwotCi0JLyoK
LQkgKiBEb24ndCBjb250aW51YWxseSBkZWZlciB0aGUgaGFuZ2NoZWNrIHNvIHRoYXQgaXQgaXMg
YWx3YXlzIHJ1biBhdAotCSAqIGxlYXN0IG9uY2UgYWZ0ZXIgd29yayBoYXMgYmVlbiBzY2hlZHVs
ZWQgb24gYW55IHJpbmcuIE90aGVyd2lzZSwKLQkgKiB3ZSB3aWxsIGlnbm9yZSBhIGh1bmcgcmlu
ZyBpZiBhIHNlY29uZCByaW5nIGlzIGtlcHQgYnVzeS4KLQkgKi8KLQotCWRlbGF5ID0gcm91bmRf
amlmZmllc191cF9yZWxhdGl2ZShEUk1fSTkxNV9IQU5HQ0hFQ0tfSklGRklFUyk7Ci0JcXVldWVf
ZGVsYXllZF93b3JrKHN5c3RlbV9sb25nX3dxLCAmZ3QtPmhhbmdjaGVjay53b3JrLCBkZWxheSk7
Ci19Ci0KLXZvaWQgaW50ZWxfZW5naW5lX2luaXRfaGFuZ2NoZWNrKHN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZSkKLXsKLQltZW1zZXQoJmVuZ2luZS0+aGFuZ2NoZWNrLCAwLCBzaXplb2Yo
ZW5naW5lLT5oYW5nY2hlY2spKTsKLQllbmdpbmUtPmhhbmdjaGVjay5hY3Rpb25fdGltZXN0YW1w
ID0gamlmZmllczsKLX0KLQotdm9pZCBpbnRlbF9ndF9pbml0X2hhbmdjaGVjayhzdHJ1Y3QgaW50
ZWxfZ3QgKmd0KQotewotCUlOSVRfREVMQVlFRF9XT1JLKCZndC0+aGFuZ2NoZWNrLndvcmssIGhh
bmdjaGVja19lbGFwc2VkKTsKLX0KLQotI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1X1NF
TEZURVNUKQotI2luY2x1ZGUgInNlbGZ0ZXN0X2hhbmdjaGVjay5jIgotI2VuZGlmCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNldC5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYwppbmRleCA3NzQ0NWQxMDBjYTguLjlkNjQ1MWY5YTg1
NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNldC5jCkBAIC0xMDI0LDggKzEwMjQs
NiBAQCB2b2lkIGludGVsX2d0X3Jlc2V0KHN0cnVjdCBpbnRlbF9ndCAqZ3QsCiAJaWYgKHJldCkK
IAkJZ290byB0YWludDsKIAotCWludGVsX2d0X3F1ZXVlX2hhbmdjaGVjayhndCk7Ci0KIGZpbmlz
aDoKIAlyZXNldF9maW5pc2goZ3QsIGF3YWtlKTsKIHVubG9jazoKQEAgLTEzNTMsNCArMTM1MSw1
IEBAIHZvaWQgX19pbnRlbF9maW5pX3dlZGdlKHN0cnVjdCBpbnRlbF93ZWRnZV9tZSAqdykKIAog
I2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1X1NFTEZURVNUKQogI2luY2x1ZGUgInNlbGZ0
ZXN0X3Jlc2V0LmMiCisjaW5jbHVkZSAic2VsZnRlc3RfaGFuZ2NoZWNrLmMiCiAjZW5kaWYKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2hhbmdjaGVjay5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2NoZWNrLmMKaW5kZXggNTY5YTQx
MDVkNDllLi41NzA1NDZlZGE1ZTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L3NlbGZ0ZXN0X2hhbmdjaGVjay5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0
ZXN0X2hhbmdjaGVjay5jCkBAIC0xNjg2LDcgKzE2ODYsNiBAQCBpbnQgaW50ZWxfaGFuZ2NoZWNr
X2xpdmVfc2VsZnRlc3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCX07CiAJc3Ry
dWN0IGludGVsX2d0ICpndCA9ICZpOTE1LT5ndDsKIAlpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZjsK
LQlib29sIHNhdmVkX2hhbmdjaGVjazsKIAlpbnQgZXJyOwogCiAJaWYgKCFpbnRlbF9oYXNfZ3B1
X3Jlc2V0KGd0KSkKQEAgLTE2OTYsMTIgKzE2OTUsOSBAQCBpbnQgaW50ZWxfaGFuZ2NoZWNrX2xp
dmVfc2VsZnRlc3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCQlyZXR1cm4gLUVJ
TzsgLyogd2UncmUgbG9uZyBwYXN0IGhvcGUgb2YgYSBzdWNjZXNzZnVsIHJlc2V0ICovCiAKIAl3
YWtlcmVmID0gaW50ZWxfcnVudGltZV9wbV9nZXQoZ3QtPnVuY29yZS0+cnBtKTsKLQlzYXZlZF9o
YW5nY2hlY2sgPSBmZXRjaF9hbmRfemVybygmaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2hhbmdjaGVj
ayk7Ci0JZHJhaW5fZGVsYXllZF93b3JrKCZndC0+aGFuZ2NoZWNrLndvcmspOyAvKiBmbHVzaCBw
YXJhbSAqLwogCiAJZXJyID0gaW50ZWxfZ3RfbGl2ZV9zdWJ0ZXN0cyh0ZXN0cywgZ3QpOwogCi0J
aTkxNV9tb2RwYXJhbXMuZW5hYmxlX2hhbmdjaGVjayA9IHNhdmVkX2hhbmdjaGVjazsKIAlpbnRl
bF9ydW50aW1lX3BtX3B1dChndC0+dW5jb3JlLT5ycG0sIHdha2VyZWYpOwogCiAJcmV0dXJuIGVy
cjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKaW5kZXggYTU0MWI2YWU1MzRmLi4yZmFl
NmU1OTJiMDkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCkBAIC0xMDExLDkyICsx
MDExLDYgQEAgc3RhdGljIGludCBpOTE1X2ZyZXF1ZW5jeV9pbmZvKHN0cnVjdCBzZXFfZmlsZSAq
bSwgdm9pZCAqdW51c2VkKQogCXJldHVybiByZXQ7CiB9CiAKLXN0YXRpYyB2b2lkIGk5MTVfaW5z
dGRvbmVfaW5mbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgICAgICAg
c3RydWN0IHNlcV9maWxlICptLAotCQkJICAgICAgIHN0cnVjdCBpbnRlbF9pbnN0ZG9uZSAqaW5z
dGRvbmUpCi17Ci0JY29uc3Qgc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUgPSAmUlVOVElNRV9J
TkZPKGRldl9wcml2KS0+c3NldTsKLQlpbnQgc2xpY2U7Ci0JaW50IHN1YnNsaWNlOwotCi0Jc2Vx
X3ByaW50ZihtLCAiXHRcdElOU1RET05FOiAweCUwOHhcbiIsCi0JCSAgIGluc3Rkb25lLT5pbnN0
ZG9uZSk7Ci0KLQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA8PSAzKQotCQlyZXR1cm47Ci0KLQlz
ZXFfcHJpbnRmKG0sICJcdFx0U0NfSU5TVERPTkU6IDB4JTA4eFxuIiwKLQkJICAgaW5zdGRvbmUt
PnNsaWNlX2NvbW1vbik7Ci0KLQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA8PSA2KQotCQlyZXR1
cm47Ci0KLQlmb3JfZWFjaF9pbnN0ZG9uZV9zbGljZV9zdWJzbGljZShkZXZfcHJpdiwgc3NldSwg
c2xpY2UsIHN1YnNsaWNlKQotCQlzZXFfcHJpbnRmKG0sICJcdFx0U0FNUExFUl9JTlNURE9ORVsl
ZF1bJWRdOiAweCUwOHhcbiIsCi0JCQkgICBzbGljZSwgc3Vic2xpY2UsIGluc3Rkb25lLT5zYW1w
bGVyW3NsaWNlXVtzdWJzbGljZV0pOwotCi0JZm9yX2VhY2hfaW5zdGRvbmVfc2xpY2Vfc3Vic2xp
Y2UoZGV2X3ByaXYsIHNzZXUsIHNsaWNlLCBzdWJzbGljZSkKLQkJc2VxX3ByaW50ZihtLCAiXHRc
dFJPV19JTlNURE9ORVslZF1bJWRdOiAweCUwOHhcbiIsCi0JCQkgICBzbGljZSwgc3Vic2xpY2Us
IGluc3Rkb25lLT5yb3dbc2xpY2VdW3N1YnNsaWNlXSk7Ci19Ci0KLXN0YXRpYyBpbnQgaTkxNV9o
YW5nY2hlY2tfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKLXsKLQlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IG5vZGVfdG9faTkxNShtLT5wcml2YXRlKTsKLQlz
dHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gJmk5MTUtPmd0OwotCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZTsKLQlpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZjsKLQllbnVtIGludGVsX2VuZ2luZV9p
ZCBpZDsKLQotCXNlcV9wcmludGYobSwgIlJlc2V0IGZsYWdzOiAlbHhcbiIsIGd0LT5yZXNldC5m
bGFncyk7Ci0JaWYgKHRlc3RfYml0KEk5MTVfV0VER0VELCAmZ3QtPnJlc2V0LmZsYWdzKSkKLQkJ
c2VxX3B1dHMobSwgIlx0V2VkZ2VkXG4iKTsKLQlpZiAodGVzdF9iaXQoSTkxNV9SRVNFVF9CQUNL
T0ZGLCAmZ3QtPnJlc2V0LmZsYWdzKSkKLQkJc2VxX3B1dHMobSwgIlx0RGV2aWNlIChnbG9iYWwp
IHJlc2V0IGluIHByb2dyZXNzXG4iKTsKLQotCWlmICghaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2hh
bmdjaGVjaykgewotCQlzZXFfcHV0cyhtLCAiSGFuZ2NoZWNrIGRpc2FibGVkXG4iKTsKLQkJcmV0
dXJuIDA7Ci0JfQotCi0JaWYgKHRpbWVyX3BlbmRpbmcoJmd0LT5oYW5nY2hlY2sud29yay50aW1l
cikpCi0JCXNlcV9wcmludGYobSwgIkhhbmdjaGVjayBhY3RpdmUsIHRpbWVyIGZpcmVzIGluICVk
bXNcbiIsCi0JCQkgICBqaWZmaWVzX3RvX21zZWNzKGd0LT5oYW5nY2hlY2sud29yay50aW1lci5l
eHBpcmVzIC0KLQkJCQkJICAgIGppZmZpZXMpKTsKLQllbHNlIGlmIChkZWxheWVkX3dvcmtfcGVu
ZGluZygmZ3QtPmhhbmdjaGVjay53b3JrKSkKLQkJc2VxX3B1dHMobSwgIkhhbmdjaGVjayBhY3Rp
dmUsIHdvcmsgcGVuZGluZ1xuIik7Ci0JZWxzZQotCQlzZXFfcHV0cyhtLCAiSGFuZ2NoZWNrIGlu
YWN0aXZlXG4iKTsKLQotCXNlcV9wcmludGYobSwgIkdUIGFjdGl2ZT8gJXNcbiIsIHllc25vKGd0
LT5hd2FrZSkpOwotCi0Jd2l0aF9pbnRlbF9ydW50aW1lX3BtKCZpOTE1LT5ydW50aW1lX3BtLCB3
YWtlcmVmKSB7Ci0JCWZvcl9lYWNoX2VuZ2luZShlbmdpbmUsIGk5MTUsIGlkKSB7Ci0JCQlzdHJ1
Y3QgaW50ZWxfaW5zdGRvbmUgaW5zdGRvbmU7Ci0KLQkJCXNlcV9wcmludGYobSwgIiVzOiAlZCBt
cyBhZ29cbiIsCi0JCQkJICAgZW5naW5lLT5uYW1lLAotCQkJCSAgIGppZmZpZXNfdG9fbXNlY3Mo
amlmZmllcyAtCi0JCQkJCQkgICAgZW5naW5lLT5oYW5nY2hlY2suYWN0aW9uX3RpbWVzdGFtcCkp
OwotCi0JCQlzZXFfcHJpbnRmKG0sICJcdEFDVEhEID0gMHglMDhsbHggW2N1cnJlbnQgMHglMDhs
bHhdXG4iLAotCQkJCSAgIChsb25nIGxvbmcpZW5naW5lLT5oYW5nY2hlY2suYWN0aGQsCi0JCQkJ
ICAgaW50ZWxfZW5naW5lX2dldF9hY3RpdmVfaGVhZChlbmdpbmUpKTsKLQotCQkJaW50ZWxfZW5n
aW5lX2dldF9pbnN0ZG9uZShlbmdpbmUsICZpbnN0ZG9uZSk7Ci0KLQkJCXNlcV9wdXRzKG0sICJc
dGluc3Rkb25lIHJlYWQgPVxuIik7Ci0JCQlpOTE1X2luc3Rkb25lX2luZm8oaTkxNSwgbSwgJmlu
c3Rkb25lKTsKLQotCQkJc2VxX3B1dHMobSwgIlx0aW5zdGRvbmUgYWNjdSA9XG4iKTsKLQkJCWk5
MTVfaW5zdGRvbmVfaW5mbyhpOTE1LCBtLAotCQkJCQkgICAmZW5naW5lLT5oYW5nY2hlY2suaW5z
dGRvbmUpOwotCQl9Ci0JfQotCi0JcmV0dXJuIDA7Ci19Ci0KIHN0YXRpYyBpbnQgaXJvbmxha2Vf
ZHJwY19pbmZvKHN0cnVjdCBzZXFfZmlsZSAqbSkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSA9IG5vZGVfdG9faTkxNShtLT5wcml2YXRlKTsKQEAgLTQzMzksNyArNDI1Myw2IEBA
IHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2luZm9fbGlzdCBpOTE1X2RlYnVnZnNfbGlzdFtdID0g
ewogCXsiaTkxNV9ndWNfc3RhZ2VfcG9vbCIsIGk5MTVfZ3VjX3N0YWdlX3Bvb2wsIDB9LAogCXsi
aTkxNV9odWNfbG9hZF9zdGF0dXMiLCBpOTE1X2h1Y19sb2FkX3N0YXR1c19pbmZvLCAwfSwKIAl7
Imk5MTVfZnJlcXVlbmN5X2luZm8iLCBpOTE1X2ZyZXF1ZW5jeV9pbmZvLCAwfSwKLQl7Imk5MTVf
aGFuZ2NoZWNrX2luZm8iLCBpOTE1X2hhbmdjaGVja19pbmZvLCAwfSwKIAl7Imk5MTVfZHJwY19p
bmZvIiwgaTkxNV9kcnBjX2luZm8sIDB9LAogCXsiaTkxNV9yaW5nX2ZyZXFfdGFibGUiLCBpOTE1
X3JpbmdfZnJlcV90YWJsZSwgMH0sCiAJeyJpOTE1X2Zyb250YnVmZmVyX3RyYWNraW5nIiwgaTkx
NV9mcm9udGJ1ZmZlcl90cmFja2luZywgMH0sCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwppbmRleCBm
MDJhMzQ3MjIyMTcuLjFkYWU0M2VkNGM0OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCkBAIC0x
NTQ2LDEwICsxNTQ2LDcgQEAgdm9pZCBpOTE1X2RyaXZlcl9yZW1vdmUoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUpCiAKIAlpOTE1X2RyaXZlcl9tb2Rlc2V0X3JlbW92ZShpOTE1KTsKIAot
CS8qIEZyZWUgZXJyb3Igc3RhdGUgYWZ0ZXIgaW50ZXJydXB0cyBhcmUgZnVsbHkgZGlzYWJsZWQu
ICovCi0JY2FuY2VsX2RlbGF5ZWRfd29ya19zeW5jKCZpOTE1LT5ndC5oYW5nY2hlY2sud29yayk7
CiAJaTkxNV9yZXNldF9lcnJvcl9zdGF0ZShpOTE1KTsKLQogCWk5MTVfZ2VtX2RyaXZlcl9yZW1v
dmUoaTkxNSk7CiAKIAlpbnRlbF9wb3dlcl9kb21haW5zX2RyaXZlcl9yZW1vdmUoaTkxNSk7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRleCBjNDZiMzM5MDY0YzAuLjE5ZjViMDYwOGE1NiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBAIC0xODQ3LDcgKzE4NDcsNiBAQCB2b2lkIGk5MTVfZHJp
dmVyX3JlbW92ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7CiBpbnQgaTkxNV9yZXN1
bWVfc3dpdGNoZXJvbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7CiBpbnQgaTkxNV9z
dXNwZW5kX3N3aXRjaGVyb28oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHBtX21lc3Nh
Z2VfdCBzdGF0ZSk7CiAKLXZvaWQgaW50ZWxfZW5naW5lX2luaXRfaGFuZ2NoZWNrKHN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7CiBpbnQgdmx2X2ZvcmNlX2dmeF9jbG9jayhzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGJvb2wgb24pOwogCiBzdGF0aWMgaW5saW5lIGJv
b2wgaW50ZWxfZ3Z0X2FjdGl2ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYwppbmRleCA1Y2Y0ZWVkNWFkZDguLjQ3MjM5
ZGY2NTNmMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3Iu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jCkBAIC01MzQsMTAg
KzUzNCw2IEBAIHN0YXRpYyB2b2lkIGVycm9yX3ByaW50X2VuZ2luZShzdHJ1Y3QgZHJtX2k5MTVf
ZXJyb3Jfc3RhdGVfYnVmICptLAogCX0KIAllcnJfcHJpbnRmKG0sICIgIHJpbmctPmhlYWQ6IDB4
JTA4eFxuIiwgZWUtPmNwdV9yaW5nX2hlYWQpOwogCWVycl9wcmludGYobSwgIiAgcmluZy0+dGFp
bDogMHglMDh4XG4iLCBlZS0+Y3B1X3JpbmdfdGFpbCk7Ci0JZXJyX3ByaW50ZihtLCAiICBoYW5n
Y2hlY2sgdGltZXN0YW1wOiAlZG1zICglbHUlcylcbiIsCi0JCSAgIGppZmZpZXNfdG9fbXNlY3Mo
ZWUtPmhhbmdjaGVja190aW1lc3RhbXAgLSBlcG9jaCksCi0JCSAgIGVlLT5oYW5nY2hlY2tfdGlt
ZXN0YW1wLAotCQkgICBlZS0+aGFuZ2NoZWNrX3RpbWVzdGFtcCA9PSBlcG9jaCA/ICI7IGVwb2No
IiA6ICIiKTsKIAllcnJfcHJpbnRmKG0sICIgIGVuZ2luZSByZXNldCBjb3VudDogJXVcbiIsIGVl
LT5yZXNldF9jb3VudCk7CiAKIAlmb3IgKG4gPSAwOyBuIDwgZWUtPm51bV9wb3J0czsgbisrKSB7
CkBAIC02NzksMTEgKzY3NSw4IEBAIHN0YXRpYyB2b2lkIF9fZXJyX3ByaW50X3RvX3NnbChzdHJ1
Y3QgZHJtX2k5MTVfZXJyb3Jfc3RhdGVfYnVmICptLAogCXRzID0ga3RpbWVfdG9fdGltZXNwZWM2
NChlcnJvci0+dXB0aW1lKTsKIAllcnJfcHJpbnRmKG0sICJVcHRpbWU6ICVsbGQgcyAlbGQgdXNc
biIsCiAJCSAgIChzNjQpdHMudHZfc2VjLCB0cy50dl9uc2VjIC8gTlNFQ19QRVJfVVNFQyk7Ci0J
ZXJyX3ByaW50ZihtLCAiRXBvY2g6ICVsdSBqaWZmaWVzICgldSBIWilcbiIsIGVycm9yLT5lcG9j
aCwgSFopOwotCWVycl9wcmludGYobSwgIkNhcHR1cmU6ICVsdSBqaWZmaWVzOyAlZCBtcyBhZ28s
ICVkIG1zIGFmdGVyIGVwb2NoXG4iLAotCQkgICBlcnJvci0+Y2FwdHVyZSwKLQkJICAgamlmZmll
c190b19tc2VjcyhqaWZmaWVzIC0gZXJyb3ItPmNhcHR1cmUpLAotCQkgICBqaWZmaWVzX3RvX21z
ZWNzKGVycm9yLT5jYXB0dXJlIC0gZXJyb3ItPmVwb2NoKSk7CisJZXJyX3ByaW50ZihtLCAiQ2Fw
dHVyZTogJWx1IGppZmZpZXM7ICVkIG1zIGFnb1xuIiwKKwkJICAgZXJyb3ItPmNhcHR1cmUsIGpp
ZmZpZXNfdG9fbXNlY3MoamlmZmllcyAtIGVycm9yLT5jYXB0dXJlKSk7CiAKIAlmb3IgKGVlID0g
ZXJyb3ItPmVuZ2luZTsgZWU7IGVlID0gZWUtPm5leHQpCiAJCWVycl9wcmludGYobSwgIkFjdGl2
ZSBwcm9jZXNzIChvbiByaW5nICVzKTogJXMgWyVkXVxuIiwKQEAgLTc0Miw3ICs3MzUsNyBAQCBz
dGF0aWMgdm9pZCBfX2Vycl9wcmludF90b19zZ2woc3RydWN0IGRybV9pOTE1X2Vycm9yX3N0YXRl
X2J1ZiAqbSwKIAkJZXJyX3ByaW50ZihtLCAiR1RUX0NBQ0hFX0VOOiAweCUwOHhcbiIsIGVycm9y
LT5ndHRfY2FjaGUpOwogCiAJZm9yIChlZSA9IGVycm9yLT5lbmdpbmU7IGVlOyBlZSA9IGVlLT5u
ZXh0KQotCQllcnJvcl9wcmludF9lbmdpbmUobSwgZWUsIGVycm9yLT5lcG9jaCk7CisJCWVycm9y
X3ByaW50X2VuZ2luZShtLCBlZSwgZXJyb3ItPmNhcHR1cmUpOwogCiAJZm9yIChlZSA9IGVycm9y
LT5lbmdpbmU7IGVlOyBlZSA9IGVlLT5uZXh0KSB7CiAJCWNvbnN0IHN0cnVjdCBkcm1faTkxNV9l
cnJvcl9vYmplY3QgKm9iajsKQEAgLTc3MCw3ICs3NjMsNyBAQCBzdGF0aWMgdm9pZCBfX2Vycl9w
cmludF90b19zZ2woc3RydWN0IGRybV9pOTE1X2Vycm9yX3N0YXRlX2J1ZiAqbSwKIAkJCWZvciAo
aiA9IDA7IGogPCBlZS0+bnVtX3JlcXVlc3RzOyBqKyspCiAJCQkJZXJyb3JfcHJpbnRfcmVxdWVz
dChtLCAiICIsCiAJCQkJCQkgICAgJmVlLT5yZXF1ZXN0c1tqXSwKLQkJCQkJCSAgICBlcnJvci0+
ZXBvY2gpOworCQkJCQkJICAgIGVycm9yLT5jYXB0dXJlKTsKIAkJfQogCiAJCXByaW50X2Vycm9y
X29iaihtLCBlZS0+ZW5naW5lLCAicmluZ2J1ZmZlciIsIGVlLT5yaW5nYnVmZmVyKTsKQEAgLTEx
NDQsOCArMTEzNyw2IEBAIHN0YXRpYyB2b2lkIGVycm9yX3JlY29yZF9lbmdpbmVfcmVnaXN0ZXJz
KHN0cnVjdCBpOTE1X2dwdV9zdGF0ZSAqZXJyb3IsCiAJfQogCiAJZWUtPmlkbGUgPSBpbnRlbF9l
bmdpbmVfaXNfaWRsZShlbmdpbmUpOwotCWlmICghZWUtPmlkbGUpCi0JCWVlLT5oYW5nY2hlY2tf
dGltZXN0YW1wID0gZW5naW5lLT5oYW5nY2hlY2suYWN0aW9uX3RpbWVzdGFtcDsKIAllZS0+cmVz
ZXRfY291bnQgPSBpOTE1X3Jlc2V0X2VuZ2luZV9jb3VudCgmZGV2X3ByaXYtPmdwdV9lcnJvciwK
IAkJCQkJCSAgZW5naW5lKTsKIApAQCAtMTY1NywyMCArMTY0OCw2IEBAIHN0YXRpYyB2b2lkIGNh
cHR1cmVfcGFyYW1zKHN0cnVjdCBpOTE1X2dwdV9zdGF0ZSAqZXJyb3IpCiAJaTkxNV9wYXJhbXNf
Y29weSgmZXJyb3ItPnBhcmFtcywgJmk5MTVfbW9kcGFyYW1zKTsKIH0KIAotc3RhdGljIHVuc2ln
bmVkIGxvbmcgY2FwdHVyZV9maW5kX2Vwb2NoKGNvbnN0IHN0cnVjdCBpOTE1X2dwdV9zdGF0ZSAq
ZXJyb3IpCi17Ci0JY29uc3Qgc3RydWN0IGRybV9pOTE1X2Vycm9yX2VuZ2luZSAqZWU7Ci0JdW5z
aWduZWQgbG9uZyBlcG9jaCA9IGVycm9yLT5jYXB0dXJlOwotCi0JZm9yIChlZSA9IGVycm9yLT5l
bmdpbmU7IGVlOyBlZSA9IGVlLT5uZXh0KSB7Ci0JCWlmIChlZS0+aGFuZ2NoZWNrX3RpbWVzdGFt
cCAmJgotCQkgICAgdGltZV9iZWZvcmUoZWUtPmhhbmdjaGVja190aW1lc3RhbXAsIGVwb2NoKSkK
LQkJCWVwb2NoID0gZWUtPmhhbmdjaGVja190aW1lc3RhbXA7Ci0JfQotCi0JcmV0dXJuIGVwb2No
OwotfQotCiBzdGF0aWMgdm9pZCBjYXB0dXJlX2ZpbmlzaChzdHJ1Y3QgaTkxNV9ncHVfc3RhdGUg
KmVycm9yKQogewogCXN0cnVjdCBpOTE1X2dndHQgKmdndHQgPSAmZXJyb3ItPmk5MTUtPmdndHQ7
CkBAIC0xNzIyLDggKzE2OTksNiBAQCBpOTE1X2NhcHR1cmVfZ3B1X3N0YXRlKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1KQogCWVycm9yLT5vdmVybGF5ID0gaW50ZWxfb3ZlcmxheV9jYXB0
dXJlX2Vycm9yX3N0YXRlKGk5MTUpOwogCWVycm9yLT5kaXNwbGF5ID0gaW50ZWxfZGlzcGxheV9j
YXB0dXJlX2Vycm9yX3N0YXRlKGk5MTUpOwogCi0JZXJyb3ItPmVwb2NoID0gY2FwdHVyZV9maW5k
X2Vwb2NoKGVycm9yKTsKLQogCWNhcHR1cmVfZmluaXNoKGVycm9yKTsKIAljb21wcmVzc19maW5p
KCZjb21wcmVzcyk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1
X2Vycm9yLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5oCmluZGV4IDdm
MWNkMGIxZmVmNy4uNGRjMzZkNmVlM2EyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dwdV9lcnJvci5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vy
cm9yLmgKQEAgLTM0LDcgKzM0LDYgQEAgc3RydWN0IGk5MTVfZ3B1X3N0YXRlIHsKIAlrdGltZV90
IGJvb3R0aW1lOwogCWt0aW1lX3QgdXB0aW1lOwogCXVuc2lnbmVkIGxvbmcgY2FwdHVyZTsKLQl1
bnNpZ25lZCBsb25nIGVwb2NoOwogCiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTU7CiAK
QEAgLTg2LDcgKzg1LDYgQEAgc3RydWN0IGk5MTVfZ3B1X3N0YXRlIHsKIAogCQkvKiBTb2Z0d2Fy
ZSB0cmFja2VkIHN0YXRlICovCiAJCWJvb2wgaWRsZTsKLQkJdW5zaWduZWQgbG9uZyBoYW5nY2hl
Y2tfdGltZXN0YW1wOwogCQlpbnQgbnVtX3JlcXVlc3RzOwogCQl1MzIgcmVzZXRfY291bnQ7CiAK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcHJpb2xpc3RfdHlwZXMuaCBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcHJpb2xpc3RfdHlwZXMuaAppbmRleCBhZThiYjNj
YjYyN2UuLjczMmFhZDE0ODg4MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9wcmlvbGlzdF90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcHJpb2xp
c3RfdHlwZXMuaApAQCAtMTYsNiArMTYsMTIgQEAgZW51bSB7CiAJSTkxNV9QUklPUklUWV9NSU4g
PSBJOTE1X0NPTlRFWFRfTUlOX1VTRVJfUFJJT1JJVFkgLSAxLAogCUk5MTVfUFJJT1JJVFlfTk9S
TUFMID0gSTkxNV9DT05URVhUX0RFRkFVTFRfUFJJT1JJVFksCiAJSTkxNV9QUklPUklUWV9NQVgg
PSBJOTE1X0NPTlRFWFRfTUFYX1VTRVJfUFJJT1JJVFkgKyAxLAorCisJLyogQSBwcmVlbXB0aXZl
IHB1bHNlIHVzZWQgdG8gbW9uaXRvciB0aGUgaGVhbHRoIG9mIGVhY2ggZW5naW5lICovCisJSTkx
NV9QUklPUklUWV9IRUFSVEJFQVQsCisKKwkvKiBJbnRlcmFjdGl2ZSB3b3JrbG9hZCwgc2NoZWR1
bGVkIGZvciBpbW1lZGlhdGUgcGFnZWZsaXBwaW5nICovCisJSTkxNV9QUklPUklUWV9ESVNQTEFZ
LAogfTsKIAogI2RlZmluZSBJOTE1X1VTRVJfUFJJT1JJVFlfU0hJRlQgMgotLSAKMi4yMy4wCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

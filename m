Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E805110983B
	for <lists+intel-gfx@lfdr.de>; Tue, 26 Nov 2019 05:09:43 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EF53D6E1F5;
	Tue, 26 Nov 2019 04:09:41 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0825C6E04B
 for <intel-gfx@lists.freedesktop.org>; Tue, 26 Nov 2019 04:09:37 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 25 Nov 2019 20:09:36 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,244,1571727600"; d="scan'208";a="198697254"
Received: from unknown (HELO localhost.localdomain) ([10.223.165.29])
 by orsmga007.jf.intel.com with ESMTP; 25 Nov 2019 20:09:34 -0800
From: Ankit Navik <ankit.p.navik@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 26 Nov 2019 09:38:29 +0530
Message-Id: <1574741310-14280-3-git-send-email-ankit.p.navik@intel.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1574741310-14280-1-git-send-email-ankit.p.navik@intel.com>
References: <1574741310-14280-1-git-send-email-ankit.p.navik@intel.com>
Subject: [Intel-gfx] [PATCH v6 2/3] drm/i915: set optimum eu/slice/sub-slice
 configuration based on load type
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: ankit.p.navik@intel.com, vipin.anand@intel.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCB3aWxsIHNlbGVjdCBvcHRpbXVtIGV1L3NsaWNlL3N1Yi1zbGljZSBjb25maWd1
cmF0aW9uIGJhc2VkIG9uCnR5cGUgb2YgbG9hZCAobG93LCBtZWRpdW0sIGhpZ2gpIGFzIGlucHV0
LgpCYXNlZCBvbiBvdXIgcmVhZGluZ3MgYW5kIGV4cGVyaW1lbnRzIHdlIGhhdmUgcHJlZGVmaW5l
ZCBzZXQgb2Ygb3B0aW11bQpjb25maWd1cmF0aW9uIGZvciBlYWNoIHBsYXRmb3JtKENIVCwgS0JM
KS4KaTkxNV9nZW1fY29udGV4dF9zZXRfbG9hZF90eXBlIHdpbGwgc2VsZWN0IG9wdGltdW0gY29u
ZmlndXJhdGlvbiBmcm9tCnByZS1kZWZpbmVkIG9wdGltdW0gY29uZmlndXJhdGlvbiB0YWJsZShv
cHRfY29uZmlnKS4KCkl0IGFsc28gaW50cm9kdWNlIGZsYWcgdXBkYXRlX3JlbmRlcl9jb25maWcg
d2hpY2ggY2FuIHNldCBieSBhbnkgZ292ZXJub3IuCgp2MjoKICogTW92ZSBzdGF0aWMgb3B0aW11
bV9jb25maWcgdG8gZGV2aWNlIGluaXQgdGltZS4KICogUmVuYW1lIGZ1bmN0aW9uIHRvIGFwcHJv
cHJpYXRlIG5hbWUsIGZpeCBkYXRhIHR5cGVzIGFuZCBwYXRjaCBvcmRlcmluZy4KICogUmVuYW1l
IHByZXZfbG9hZF90eXBlIHRvIHBlbmRpbmdfbG9hZF90eXBlLiAoVHZydGtvIFVyc3VsaW4pCgp2
MzoKICogQWRkIHNhZmUgZ3VhcmQgY2hlY2sgaW4gaTkxNV9nZW1fY29udGV4dF9zZXRfbG9hZF90
eXBlLgogKiBSZW5hbWUgc3RydWN0IGZyb20gb3B0aW11bV9jb25maWcgdG8gaTkxNV9zc2V1X29w
dGltdW1fY29uZmlnIHRvCiAgIGF2b2lkIG5hbWVzcGFjZSBjbGFzaGVzLgogKiBSZWR1Y2VzIG1l
bWNweSBmb3Igc3BhY2UgZWZmaWNpZW50LgogKiBSZWJhc2UuCiAqIEltcHJvdmVkIGNvbW1pdCBt
ZXNzYWdlLiAoVHZydGtvIFVyc3VsaW4pCgp2NDoKICogTW92ZSBvcHRpbXVtIGNvbmZpZyB0YWJs
ZSB0byBmaWxlIHNjb3BlLiAoVHZydGtvIFVyc3VsaW4pCgp2NToKICogQWRkcyBvcHRpbWFsIHRh
YmxlIG9mIHNsaWNlL3N1Yi1zbGljZS9FVSBmb3IgR2VuIDkgR1QxLgogKiBSZWJhc2UuCgp2NjoK
ICogUmViYXNlLgogKiBGaXggd2FybmluZ3MuCgpDYzogVmlwaW4gQW5hbmQgPHZpcGluLmFuYW5k
QGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogQW5raXQgTmF2aWsgPGFua2l0LnAubmF2aWtAaW50
ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMg
ICAgICAgfCAxOSArKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29u
dGV4dC5oICAgICAgIHwgIDIgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2Nv
bnRleHRfdHlwZXMuaCB8IDMyICsrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfbHJjLmMgICAgICAgICAgICAgICB8IDQyICsrKysrKysrKysrKysrLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgICAgICAgICAgICAgICB8ICA1ICsrCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jICAgICAgICAgIHwgNjIgKysrKysrKysr
KysrKysrKysrKysrKy0KIDYgZmlsZXMgY2hhbmdlZCwgMTU4IGluc2VydGlvbnMoKyksIDQgZGVs
ZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMK
aW5kZXggODI4OGZiOS4uODg4MDBjNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fY29udGV4dC5jCkBAIC03MTMsMTAgKzcxMywyOSBAQCBpOTE1X2dlbV9jcmVhdGVfY29u
dGV4dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgdW5zaWduZWQgaW50IGZsYWdzKQog
CiAJdHJhY2VfaTkxNV9jb250ZXh0X2NyZWF0ZShjdHgpOwogCWF0b21pY19zZXQoJmN0eC0+cmVx
X2NudCwgMCk7CisJY3R4LT5zbGljZV9jbnQgPSBod2VpZ2h0OChSVU5USU1FX0lORk8oaTkxNSkt
PnNzZXUuc2xpY2VfbWFzayk7CisJY3R4LT5zdWJzbGljZV9jbnQgPSBod2VpZ2h0OCgKKwkJCVJV
TlRJTUVfSU5GTyhpOTE1KS0+c3NldS5zdWJzbGljZV9tYXNrWzBdKTsKKwljdHgtPmV1X2NudCA9
IFJVTlRJTUVfSU5GTyhpOTE1KS0+c3NldS5ldV9wZXJfc3Vic2xpY2U7CiAKIAlyZXR1cm4gY3R4
OwogfQogCit2b2lkIGk5MTVfZ2VtX2NvbnRleHRfc2V0X2xvYWRfdHlwZShzdHJ1Y3QgaTkxNV9n
ZW1fY29udGV4dCAqY3R4LAorCQkJCQllbnVtIGdlbV9sb2FkX3R5cGUgdHlwZSkKK3sKKwlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSBjdHgtPmk5MTU7CisKKwlpZiAoR0VNX1dB
Uk5fT04odHlwZSA+IExPQURfVFlQRV9MQVNUKSkKKwkJcmV0dXJuOworCisJLyogQ2FsbCBvcHRf
Y29uZmlnIHRvIGdldCBjb3JyZWN0IGNvbmZpZ3VyYXRpb24gZm9yIGV1LHNsaWNlLHN1YnNsaWNl
ICovCisJY3R4LT5zbGljZV9jbnQgPSBkZXZfcHJpdi0+b3B0X2NvbmZpZ1t0eXBlXS5zbGljZTsK
KwljdHgtPnN1YnNsaWNlX2NudCA9IGRldl9wcml2LT5vcHRfY29uZmlnW3R5cGVdLnN1YnNsaWNl
OworCWN0eC0+ZXVfY250ID0gZGV2X3ByaXYtPm9wdF9jb25maWdbdHlwZV0uZXU7CisJY3R4LT5w
ZW5kaW5nX2xvYWRfdHlwZSA9IHR5cGU7Cit9CisKIHN0YXRpYyB2b2lkCiBkZXN0cm95X2tlcm5l
bF9jb250ZXh0KHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICoqY3R4cCkKIHsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5oCmluZGV4IDE4ZTUwYTcuLjg2Nzc0Mjcg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmgK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaApAQCAtMTc3
LDYgKzE3Nyw4IEBAIGludCBpOTE1X2dlbV9jb250ZXh0X3NldHBhcmFtX2lvY3RsKHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJCQkJICAgIHN0cnVjdCBkcm1fZmlsZSAqZmls
ZV9wcml2KTsKIGludCBpOTE1X2dlbV9jb250ZXh0X3Jlc2V0X3N0YXRzX2lvY3RsKHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJCQkJICAgICAgIHN0cnVjdCBkcm1fZmlsZSAq
ZmlsZSk7Cit2b2lkIGk5MTVfZ2VtX2NvbnRleHRfc2V0X2xvYWRfdHlwZShzdHJ1Y3QgaTkxNV9n
ZW1fY29udGV4dCAqY3R4LAorCQkJCWVudW0gZ2VtX2xvYWRfdHlwZSB0eXBlKTsKIAogc3RydWN0
IGk5MTVfZ2VtX2NvbnRleHQgKgogaTkxNV9nZW1fY29udGV4dF9jcmVhdGVfa2VybmVsKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBpbnQgcHJpbyk7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dF90eXBlcy5oIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaAppbmRleCAzOTMxYzA2Li42ODQ3
ZDQ5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4
dF90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0
X3R5cGVzLmgKQEAgLTQwLDYgKzQwLDE5IEBAIHN0cnVjdCBpOTE1X2dlbV9lbmdpbmVzX2l0ZXIg
ewogCWNvbnN0IHN0cnVjdCBpOTE1X2dlbV9lbmdpbmVzICplbmdpbmVzOwogfTsKIAorZW51bSBn
ZW1fbG9hZF90eXBlIHsKKwlMT0FEX1RZUEVfTE9XLAorCUxPQURfVFlQRV9NRURJVU0sCisJTE9B
RF9UWVBFX0hJR0gsCisJTE9BRF9UWVBFX0xBU1QKK307CisKK3N0cnVjdCBpOTE1X3NzZXVfb3B0
aW11bV9jb25maWcgeworCXU4IHNsaWNlOworCXU4IHN1YnNsaWNlOworCXU4IGV1OworfTsKKwog
LyoqCiAgKiBzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAtIGNsaWVudCBzdGF0ZQogICoKQEAgLTE3
Myw2ICsxODYsMjUgQEAgc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgewogCSAqLwogCWF0b21pY190
IHJlcV9jbnQ7CiAKKwkvKiogc2xpY2VfY250OiB1c2VkIHRvIHNldCB0aGUgIyBvZiBzbGljZXMg
dG8gYmUgZW5hYmxlZC4gKi8KKwl1OCBzbGljZV9jbnQ7CisKKwkvKiogc3Vic2xpY2VfY250OiB1
c2VkIHRvIHNldCB0aGUgIyBvZiBzdWJzbGljZXMgdG8gYmUgZW5hYmxlZC4gKi8KKwl1OCBzdWJz
bGljZV9jbnQ7CisKKwkvKiogZXVfY250OiB1c2VkIHRvIHNldCB0aGUgIyBvZiBldSB0byBiZSBl
bmFibGVkLiAqLworCXU4IGV1X2NudDsKKworCS8qKiBsb2FkX3R5cGU6IFRoZSBkZXNpZ25hdGVk
IGxvYWRfdHlwZSAoaGlnaC9tZWRpdW0vbG93KSBmb3IgYSBnaXZlbgorCSAqIG51bWJlciBvZiBw
ZW5kaW5nIGNvbW1hbmRzIGluIHRoZSBjb21tYW5kIHF1ZXVlLgorCSAqLworCWVudW0gZ2VtX2xv
YWRfdHlwZSBsb2FkX3R5cGU7CisKKwkvKiogcGVuZGluZ19sb2FkX3R5cGU6IFRoZSBlYXJsaWVy
IGxvYWQgdHlwZSB0aGF0IHRoZSBHUFUgd2FzIGNvbmZpZ3VyZWQKKwkgKiBmb3IgKGhpZ2gvbWVk
aXVtL2xvdykuCisJICovCisJZW51bSBnZW1fbG9hZF90eXBlIHBlbmRpbmdfbG9hZF90eXBlOwor
CiAJLyoqIGp1bXBfd2hpdGVsaXN0OiBCaXQgYXJyYXkgZm9yIHRyYWNraW5nIGNtZHMgZHVyaW5n
IGNtZHBhcnNpbmcKIAkgKiAgR3VhcmRlZCBieSBzdHJ1Y3RfbXV0ZXgKIAkgKi8KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfbHJjLmMKaW5kZXggNTExZDVhMS4uY2Y5NjQ1ZiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfbHJjLmMKQEAgLTI0MzYsNiArMjQzNiwzNiBAQCBzdGF0aWMgdm9pZCBl
eGVjbGlzdHNfY29udGV4dF91bnBpbihzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UpCiAJaW50ZWxf
cmluZ19yZXNldChjZS0+cmluZywgY2UtPnJpbmctPnRhaWwpOwogfQogCitzdGF0aWMgdTMyCitn
ZXRfY29udGV4dF9ycGNzX2NvbmZpZyhzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KQorewor
CXUzMiBycGNzID0gMDsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSBjdHgt
Pmk5MTU7CisKKwlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA8IDgpCisJCXJldHVybiAwOworCisJ
aWYgKFJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnNzZXUuaGFzX3NsaWNlX3BnKSB7CisJCXJwY3Mg
fD0gR0VOOF9SUENTX1NfQ05UX0VOQUJMRTsKKwkJcnBjcyB8PSBjdHgtPnNsaWNlX2NudCA8PCBH
RU44X1JQQ1NfU19DTlRfU0hJRlQ7CisJCXJwY3MgfD0gR0VOOF9SUENTX0VOQUJMRTsKKwl9CisK
KwlpZiAoUlVOVElNRV9JTkZPKGRldl9wcml2KS0+c3NldS5oYXNfc3Vic2xpY2VfcGcpIHsKKwkJ
cnBjcyB8PSBHRU44X1JQQ1NfU1NfQ05UX0VOQUJMRTsKKwkJcnBjcyB8PSBjdHgtPnN1YnNsaWNl
X2NudCA8PCBHRU44X1JQQ1NfU1NfQ05UX1NISUZUOworCQlycGNzIHw9IEdFTjhfUlBDU19FTkFC
TEU7CisJfQorCisJaWYgKFJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnNzZXUuaGFzX2V1X3BnKSB7
CisJCXJwY3MgfD0gY3R4LT5ldV9jbnQgPDwgR0VOOF9SUENTX0VVX01JTl9TSElGVDsKKwkJcnBj
cyB8PSBjdHgtPmV1X2NudCA8PCBHRU44X1JQQ1NfRVVfTUFYX1NISUZUOworCQlycGNzIHw9IEdF
TjhfUlBDU19FTkFCTEU7CisJfQorCisJcmV0dXJuIHJwY3M7Cit9CisKIHN0YXRpYyB2b2lkCiBf
X2V4ZWNsaXN0c191cGRhdGVfcmVnX3N0YXRlKGNvbnN0IHN0cnVjdCBpbnRlbF9jb250ZXh0ICpj
ZSwKIAkJCSAgICAgY29uc3Qgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQpAQCAtMjQ1
Miw4ICsyNDgyLDEzIEBAIF9fZXhlY2xpc3RzX3VwZGF0ZV9yZWdfc3RhdGUoY29uc3Qgc3RydWN0
IGludGVsX2NvbnRleHQgKmNlLAogCiAJLyogUlBDUyAqLwogCWlmIChlbmdpbmUtPmNsYXNzID09
IFJFTkRFUl9DTEFTUykgewotCQlyZWdzW0NUWF9SX1BXUl9DTEtfU1RBVEVdID0KLQkJCWludGVs
X3NzZXVfbWFrZV9ycGNzKGVuZ2luZS0+aTkxNSwgJmNlLT5zc2V1KTsKKwkJaWYoZW5naW5lLT5p
OTE1LT5wcmVkaWN0aXZlX2xvYWRfZW5hYmxlKSB7CisJCQlyZWdzW0NUWF9SX1BXUl9DTEtfU1RB
VEVdID0KKwkJCQlnZXRfY29udGV4dF9ycGNzX2NvbmZpZyhjZS0+Z2VtX2NvbnRleHQpOworCQl9
IGVsc2UgeworCQkJcmVnc1tDVFhfUl9QV1JfQ0xLX1NUQVRFXSA9CisJCQkJaW50ZWxfc3NldV9t
YWtlX3JwY3MoZW5naW5lLT5pOTE1LCAmY2UtPnNzZXUpOworCQl9CiAKIAkJaTkxNV9vYV9pbml0
X3JlZ19zdGF0ZShjZSwgZW5naW5lKTsKIAl9CkBAIC0yNDg1LDYgKzI1MjAsOSBAQCBfX2V4ZWNs
aXN0c19jb250ZXh0X3BpbihzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCiAJY2UtPmxyY19yZWdf
c3RhdGUgPSB2YWRkciArIExSQ19TVEFURV9QTiAqIFBBR0VfU0laRTsKIAlfX2V4ZWNsaXN0c191
cGRhdGVfcmVnX3N0YXRlKGNlLCBlbmdpbmUpOwogCisJaWYgKGNlLT5nZW1fY29udGV4dC0+bG9h
ZF90eXBlICE9IGNlLT5nZW1fY29udGV4dC0+cGVuZGluZ19sb2FkX3R5cGUpCisJCWNlLT5nZW1f
Y29udGV4dC0+bG9hZF90eXBlID0gY2UtPmdlbV9jb250ZXh0LT5wZW5kaW5nX2xvYWRfdHlwZTsK
KwogCXJldHVybiAwOwogCiB1bnBpbl9hY3RpdmU6CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRl
eCBmZGFlNWE5Li4zMDY0ZGRmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTk5OSw2ICs5
OTksMTEgQEAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgewogCS8qIHByb3RlY3RzIHBhbmVsIHBv
d2VyIHNlcXVlbmNlciBzdGF0ZSAqLwogCXN0cnVjdCBtdXRleCBwcHNfbXV0ZXg7CiAKKwkvKiBv
cHRpbWFsIHNsaWNlL3N1YnNsaWNlL0VVIGNvbmZpZ3JhdGlvbiBzdGF0ZSAqLworCXN0cnVjdCBp
OTE1X3NzZXVfb3B0aW11bV9jb25maWcgKm9wdF9jb25maWc7CisKKwlpbnQgcHJlZGljdGl2ZV9s
b2FkX2VuYWJsZTsKKwogCXVuc2lnbmVkIGludCBmc2JfZnJlcSwgbWVtX2ZyZXEsIGlzX2RkcjM7
CiAJdW5zaWduZWQgaW50IHNrbF9wcmVmZXJyZWRfdmNvX2ZyZXE7CiAJdW5zaWduZWQgaW50IG1h
eF9jZGNsa19mcmVxOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2
aWNlX2luZm8uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMKaW5k
ZXggYTViNTcxMy4uMTNhZTBmMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfZGV2aWNlX2luZm8uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2Vf
aW5mby5jCkBAIC04NzMsNiArODczLDM0IEBAIHZvaWQgaW50ZWxfZGV2aWNlX2luZm9fc3VicGxh
dGZvcm1faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlSVU5USU1FX0lORk8o
aTkxNSktPnBsYXRmb3JtX21hc2tbcGldIHw9IG1hc2s7CiB9CiAKKy8qIHN0YXRpYyB0YWJsZSBv
ZiBzbGljZS9zdWJzbGljZS9FVSBmb3IgQ2hlcnJ5dmlldyAqLworc3RhdGljIGNvbnN0IHN0cnVj
dCBpOTE1X3NzZXVfb3B0aW11bV9jb25maWcgY2h2X2NvbmZpZ1tMT0FEX1RZUEVfTEFTVF0gPSB7
CisJezEsIDEsIDR9LAkvKiBMb3cgKi8KKwl7MSwgMSwgNn0sCS8qIE1lZGl1bSAqLworCXsxLCAy
LCA2fQkvKiBIaWdoICovCit9OworCisvKiBzdGF0aWMgdGFibGUgb2Ygc2xpY2Uvc3Vic2xpY2Uv
RVUgZm9yIEdMSyBHVDEgKi8KK3N0YXRpYyBjb25zdCBzdHJ1Y3QgaTkxNV9zc2V1X29wdGltdW1f
Y29uZmlnIGdsa19ndDFfY29uZmlnW0xPQURfVFlQRV9MQVNUXSA9IHsKKwl7MSwgMiwgMn0sCS8q
IExvdyAqLworCXsxLCAyLCAzfSwJLyogTWVkaXVtICovCisJezEsIDIsIDZ9CS8qIEhpZ2ggKi8K
K307CisKKy8qIHN0YXRpYyB0YWJsZSBvZiBzbGljZS9zdWJzbGljZS9FVSBmb3IgS0JMIEdUMiAq
Lworc3RhdGljIGNvbnN0IHN0cnVjdCBpOTE1X3NzZXVfb3B0aW11bV9jb25maWcga2JsX2d0Ml9j
b25maWdbTE9BRF9UWVBFX0xBU1RdID0geworCXsxLCAzLCAyfSwJLyogTG93ICovCisJezEsIDMs
IDR9LAkvKiBNZWRpdW0gKi8KKwl7MSwgMywgOH0JLyogSGlnaCAqLworfTsKKworLyogc3RhdGlj
IHRhYmxlIG9mIHNsaWNlL3N1YnNsaWNlL0VVIGZvciBLQkwgR1QzICovCitzdGF0aWMgY29uc3Qg
c3RydWN0IGk5MTVfc3NldV9vcHRpbXVtX2NvbmZpZyBrYmxfZ3QzX2NvbmZpZ1tMT0FEX1RZUEVf
TEFTVF0gPSB7CisJezIsIDMsIDR9LAkvKiBMb3cgKi8KKwl7MiwgMywgNn0sCS8qIE1lZGl1bSAq
LworCXsyLCAzLCA4fQkvKiBIaWdoICovCit9OworCiAvKioKICAqIGludGVsX2RldmljZV9pbmZv
X3J1bnRpbWVfaW5pdCAtIGluaXRpYWxpemUgcnVudGltZSBpbmZvCiAgKiBAZGV2X3ByaXY6IHRo
ZSBpOTE1IGRldmljZQpAQCAtODk0LDYgKzkyMiw3IEBAIHZvaWQgaW50ZWxfZGV2aWNlX2luZm9f
cnVudGltZV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlzdHJ1Y3Qg
aW50ZWxfZGV2aWNlX2luZm8gKmluZm8gPSBta3dyaXRlX2RldmljZV9pbmZvKGRldl9wcml2KTsK
IAlzdHJ1Y3QgaW50ZWxfcnVudGltZV9pbmZvICpydW50aW1lID0gUlVOVElNRV9JTkZPKGRldl9w
cml2KTsKIAllbnVtIHBpcGUgcGlwZTsKKwlzdHJ1Y3QgaTkxNV9zc2V1X29wdGltdW1fY29uZmln
ICpvcHRfY29uZmlnID0gTlVMTDsKIAogCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDEwKSB7
CiAJCWZvcl9lYWNoX3BpcGUoZGV2X3ByaXYsIHBpcGUpCkBAIC05OTksMTIgKzEwMjgsMzggQEAg
dm9pZCBpbnRlbF9kZXZpY2VfaW5mb19ydW50aW1lX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2KQogCS8qIEluaXRpYWxpemUgc2xpY2Uvc3Vic2xpY2UvRVUgaW5mbyAqLwog
CWlmIChJU19IQVNXRUxMKGRldl9wcml2KSkKIAkJaGFzd2VsbF9zc2V1X2luZm9faW5pdChkZXZf
cHJpdik7Ci0JZWxzZSBpZiAoSVNfQ0hFUlJZVklFVyhkZXZfcHJpdikpCisJZWxzZSBpZiAoSVNf
Q0hFUlJZVklFVyhkZXZfcHJpdikpIHsKIAkJY2hlcnJ5dmlld19zc2V1X2luZm9faW5pdChkZXZf
cHJpdik7CisJCW9wdF9jb25maWcgPSAoc3RydWN0IGk5MTVfc3NldV9vcHRpbXVtX2NvbmZpZyAq
KSBjaHZfY29uZmlnOworCQlCVUlMRF9CVUdfT04oQVJSQVlfU0laRShjaHZfY29uZmlnKSAhPSBM
T0FEX1RZUEVfTEFTVCk7CisJfQogCWVsc2UgaWYgKElTX0JST0FEV0VMTChkZXZfcHJpdikpCiAJ
CWJyb2Fkd2VsbF9zc2V1X2luZm9faW5pdChkZXZfcHJpdik7Ci0JZWxzZSBpZiAoSVNfR0VOKGRl
dl9wcml2LCA5KSkKKwllbHNlIGlmIChJU19HRU4oZGV2X3ByaXYsIDkpKSB7CiAJCWdlbjlfc3Nl
dV9pbmZvX2luaXQoZGV2X3ByaXYpOworCisJCXN3aXRjaCAoaW5mby0+Z3QpIHsKKwkJZGVmYXVs
dDogLyogZmFsbCB0aHJvdWdoICovCisJCWNhc2UgMToKKwkJCW9wdF9jb25maWcgPSAoc3RydWN0
IGk5MTVfc3NldV9vcHRpbXVtX2NvbmZpZyAqKQorCQkJCQkJZ2xrX2d0MV9jb25maWc7CisJCQlC
VUlMRF9CVUdfT04oQVJSQVlfU0laRShnbGtfZ3QxX2NvbmZpZykKKwkJCQkJCSE9IExPQURfVFlQ
RV9MQVNUKTsKKwkJYnJlYWs7CisJCWNhc2UgMjoKKwkJCW9wdF9jb25maWcgPSAoc3RydWN0IGk5
MTVfc3NldV9vcHRpbXVtX2NvbmZpZyAqKQorCQkJCQkJa2JsX2d0Ml9jb25maWc7CisJCQlCVUlM
RF9CVUdfT04oQVJSQVlfU0laRShrYmxfZ3QyX2NvbmZpZykKKwkJCQkJCSE9IExPQURfVFlQRV9M
QVNUKTsKKwkJYnJlYWs7CisJCWNhc2UgMzoKKwkJCW9wdF9jb25maWcgPSAoc3RydWN0IGk5MTVf
c3NldV9vcHRpbXVtX2NvbmZpZyAqKQorCQkJCQkJa2JsX2d0M19jb25maWc7CisJCQlCVUlMRF9C
VUdfT04oQVJSQVlfU0laRShrYmxfZ3QzX2NvbmZpZykKKwkJCQkJCSE9IExPQURfVFlQRV9MQVNU
KTsKKwkJYnJlYWs7CisJCX0KKwl9CiAJZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCAxMCkpCiAJ
CWdlbjEwX3NzZXVfaW5mb19pbml0KGRldl9wcml2KTsKIAllbHNlIGlmIChJU19HRU4oZGV2X3By
aXYsIDExKSkKQEAgLTEwMTcsNiArMTA3Miw5IEBAIHZvaWQgaW50ZWxfZGV2aWNlX2luZm9fcnVu
dGltZV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkJaW5mby0+cHBn
dHRfdHlwZSA9IElOVEVMX1BQR1RUX05PTkU7CiAJfQogCisJaWYgKG9wdF9jb25maWcpCisJCWRl
dl9wcml2LT5vcHRfY29uZmlnID0gb3B0X2NvbmZpZzsKKwogCS8qIEluaXRpYWxpemUgY29tbWFu
ZCBzdHJlYW0gdGltZXN0YW1wIGZyZXF1ZW5jeSAqLwogCXJ1bnRpbWUtPmNzX3RpbWVzdGFtcF9m
cmVxdWVuY3lfa2h6ID0gcmVhZF90aW1lc3RhbXBfZnJlcXVlbmN5KGRldl9wcml2KTsKIH0KLS0g
CjIuNy40CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJ
bnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

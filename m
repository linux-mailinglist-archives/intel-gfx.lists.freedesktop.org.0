Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AEDF4252FB0
	for <lists+intel-gfx@lfdr.de>; Wed, 26 Aug 2020 15:28:29 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7B4866E953;
	Wed, 26 Aug 2020 13:28:27 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (unknown [77.68.26.236])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A13496E11F
 for <intel-gfx@lists.freedesktop.org>; Wed, 26 Aug 2020 13:28:25 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 22244764-1500050 
 for multiple; Wed, 26 Aug 2020 14:28:19 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 26 Aug 2020 14:28:09 +0100
Message-Id: <20200826132811.17577-37-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20200826132811.17577-1-chris@chris-wilson.co.uk>
References: <20200826132811.17577-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 37/39] drm/i915/gt: Consolidate the CS timestamp
 clocks
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Chris Wilson <chris@chris-wilson.co.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UHVsbCB0aGUgR1QgY2xvY2sgaW5mb3JtYXRpb24gW3VzZWQgdG8gZGVyaXZlIENTIHRpbWVzdGFt
cHMgYW5kIFBNCmludGVydmFsXSB1bmRlciB0aGUgR1Qgc28gdGhhdCBpcyBpdCBsb2NhbCB0byB0
aGUgdXNlcnMuIEluIGRvaW5nIHNvLCB3ZQpjb25zb2xpZGF0ZSB0aGUgdHdvIHJlZmVyZW5jZXMg
Zm9yIHRoZSBzYW1lIGluZm9ybWF0aW9uLCBvZiB3aGljaCB0aGUKcnVudGltZS1pbmZvIHRvb2sg
bm90ZSBvZiBhIHBvdGVudGlhbCBjbG9jayBzb3VyY2Ugb3ZlcnJpZGUgYW5kIHNjYWxpbmcKZmFj
dG9ycy4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNv
LnVrPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2RlYnVnZnNfZ3RfcG0uYyAgICAgICB8
ICAyMCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5oICAgICAgIHwg
ICA2ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5jICAgICAgICAgICAgfCAg
IDQgKy0KIC4uLi9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfY2xvY2tfdXRpbHMuYyAgICB8IDE5
NyArKysrKysrKysrKysrKy0tLS0KIC4uLi9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfY2xvY2tf
dXRpbHMuaCAgICB8ICAgOCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlw
ZXMuaCAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2VuZ2lu
ZV9wbS5jICB8ICAgNiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZ3RfcG0u
YyAgICAgIHwgICA4ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyAgICAg
ICAgICAgfCAgMTkgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAg
ICAgICB8ICAxMiAtLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jICAgICAg
ICAgIHwgICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jICAgICAg
ICAgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jICAgICAgICAgICAg
ICB8ICAxMSArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uYyAgICAg
IHwgMTU3IC0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2Vf
aW5mby5oICAgICAgfCAgIDMgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVf
cGVyZi5jICAgIHwgICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9y
ZXF1ZXN0LmMgfCAgIDMgKy0KIDE3IGZpbGVzIGNoYW5nZWQsIDIwNSBpbnNlcnRpb25zKCspLCAy
NTYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvZGVi
dWdmc19ndF9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvZGVidWdmc19ndF9wbS5jCmlu
ZGV4IDE3NGEyNDU1MzMyMi4uZjEyZWYzN2NlZjA4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9kZWJ1Z2ZzX2d0X3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
ZGVidWdmc19ndF9wbS5jCkBAIC00MDMsMzQgKzQwMywzNCBAQCBzdGF0aWMgaW50IGZyZXF1ZW5j
eV9zaG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqdW51c2VkKQogCQlzZXFfcHJpbnRmKG0s
ICJSUERFQ0xJTUlUOiAweCUwOHhcbiIsIHJwZGVjbGltaXQpOwogCQlzZXFfcHJpbnRmKG0sICJS
UE5TV1JFUTogJWRNSHpcbiIsIHJlcWYpOwogCQlzZXFfcHJpbnRmKG0sICJDQUdGOiAlZE1Ielxu
IiwgY2FnZik7Ci0JCXNlcV9wcmludGYobSwgIlJQIENVUiBVUCBFSTogJWQgKCVkbnMpXG4iLAor
CQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgVVAgRUk6ICVkICglbGxkbnMpXG4iLAogCQkJICAgcnBj
dXJ1cGVpLAogCQkJICAgaW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoZ3QsIHJwY3VydXBlaSkp
OwotCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgVVA6ICVkICglZG5zKVxuIiwKKwkJc2VxX3ByaW50
ZihtLCAiUlAgQ1VSIFVQOiAlZCAoJWxsZG5zKVxuIiwKIAkJCSAgIHJwY3VydXAsIGludGVsX2d0
X3BtX2ludGVydmFsX3RvX25zKGd0LCBycGN1cnVwKSk7Ci0JCXNlcV9wcmludGYobSwgIlJQIFBS
RVYgVVA6ICVkICglZG5zKVxuIiwKKwkJc2VxX3ByaW50ZihtLCAiUlAgUFJFViBVUDogJWQgKCVs
bGRucylcbiIsCiAJCQkgICBycHByZXZ1cCwgaW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoZ3Qs
IHJwcHJldnVwKSk7CiAJCXNlcV9wcmludGYobSwgIlVwIHRocmVzaG9sZDogJWQlJVxuIiwKIAkJ
CSAgIHJwcy0+cG93ZXIudXBfdGhyZXNob2xkKTsKLQkJc2VxX3ByaW50ZihtLCAiUlAgVVAgRUk6
ICVkICglZG5zKVxuIiwKKwkJc2VxX3ByaW50ZihtLCAiUlAgVVAgRUk6ICVkICglbGxkbnMpXG4i
LAogCQkJICAgcnB1cGVpLCBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucyhndCwgcnB1cGVpKSk7
Ci0JCXNlcV9wcmludGYobSwgIlJQIFVQIFRIUkVTSE9MRDogJWQgKCVkbnMpXG4iLAorCQlzZXFf
cHJpbnRmKG0sICJSUCBVUCBUSFJFU0hPTEQ6ICVkICglbGxkbnMpXG4iLAogCQkJICAgcnB1cHQs
IGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKGd0LCBycHVwdCkpOwogCi0JCXNlcV9wcmludGYo
bSwgIlJQIENVUiBET1dOIEVJOiAlZCAoJWRucylcbiIsCisJCXNlcV9wcmludGYobSwgIlJQIENV
UiBET1dOIEVJOiAlZCAoJWxsZG5zKVxuIiwKIAkJCSAgIHJwY3VyZG93bmVpLAogCQkJICAgaW50
ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoZ3QsIHJwY3VyZG93bmVpKSk7Ci0JCXNlcV9wcmludGYo
bSwgIlJQIENVUiBET1dOOiAlZCAoJWRucylcbiIsCisJCXNlcV9wcmludGYobSwgIlJQIENVUiBE
T1dOOiAlZCAoJWxsZG5zKVxuIiwKIAkJCSAgIHJwY3VyZG93biwKIAkJCSAgIGludGVsX2d0X3Bt
X2ludGVydmFsX3RvX25zKGd0LCBycGN1cmRvd24pKTsKLQkJc2VxX3ByaW50ZihtLCAiUlAgUFJF
ViBET1dOOiAlZCAoJWRucylcbiIsCisJCXNlcV9wcmludGYobSwgIlJQIFBSRVYgRE9XTjogJWQg
KCVsbGRucylcbiIsCiAJCQkgICBycHByZXZkb3duLAogCQkJICAgaW50ZWxfZ3RfcG1faW50ZXJ2
YWxfdG9fbnMoZ3QsIHJwcHJldmRvd24pKTsKIAkJc2VxX3ByaW50ZihtLCAiRG93biB0aHJlc2hv
bGQ6ICVkJSVcbiIsCiAJCQkgICBycHMtPnBvd2VyLmRvd25fdGhyZXNob2xkKTsKLQkJc2VxX3By
aW50ZihtLCAiUlAgRE9XTiBFSTogJWQgKCVkbnMpXG4iLAorCQlzZXFfcHJpbnRmKG0sICJSUCBE
T1dOIEVJOiAlZCAoJWxsZG5zKVxuIiwKIAkJCSAgIHJwZG93bmVpLCBpbnRlbF9ndF9wbV9pbnRl
cnZhbF90b19ucyhndCwgcnBkb3duZWkpKTsKLQkJc2VxX3ByaW50ZihtLCAiUlAgRE9XTiBUSFJF
U0hPTEQ6ICVkICglZG5zKVxuIiwKKwkJc2VxX3ByaW50ZihtLCAiUlAgRE9XTiBUSFJFU0hPTEQ6
ICVkICglbGxkbnMpXG4iLAogCQkJICAgcnBkb3dudCwgaW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9f
bnMoZ3QsIHJwZG93bnQpKTsKIAogCQltYXhfZnJlcSA9IChJU19HRU45X0xQKGk5MTUpID8gcnBf
c3RhdGVfY2FwID4+IDAgOgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfY29udGV4dC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5oCmlu
ZGV4IGZkYTJlYmE4MWUyMi4uMmNlMmVjNjM5YmEyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfY29udGV4dC5oCkBAIC0yNDgsMTYgKzI0OCwxNCBAQCBpbnRlbF9jb250ZXh0X2NsZWFy
X25vcHJlZW1wdChzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UpCiAKIHN0YXRpYyBpbmxpbmUgdTY0
IGludGVsX2NvbnRleHRfZ2V0X3RvdGFsX3J1bnRpbWVfbnMoc3RydWN0IGludGVsX2NvbnRleHQg
KmNlKQogewotCWNvbnN0IHUzMiBwZXJpb2QgPQotCQlSVU5USU1FX0lORk8oY2UtPmVuZ2luZS0+
aTkxNSktPmNzX3RpbWVzdGFtcF9wZXJpb2RfbnM7CisJY29uc3QgdTMyIHBlcmlvZCA9IGNlLT5l
bmdpbmUtPmd0LT5jbG9ja19wZXJpb2RfbnM7CiAKIAlyZXR1cm4gUkVBRF9PTkNFKGNlLT5ydW50
aW1lLnRvdGFsKSAqIHBlcmlvZDsKIH0KIAogc3RhdGljIGlubGluZSB1NjQgaW50ZWxfY29udGV4
dF9nZXRfYXZnX3J1bnRpbWVfbnMoc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQogewotCWNvbnN0
IHUzMiBwZXJpb2QgPQotCQlSVU5USU1FX0lORk8oY2UtPmVuZ2luZS0+aTkxNSktPmNzX3RpbWVz
dGFtcF9wZXJpb2RfbnM7CisJY29uc3QgdTMyIHBlcmlvZCA9IGNlLT5lbmdpbmUtPmd0LT5jbG9j
a19wZXJpb2RfbnM7CiAKIAlyZXR1cm4gbXVsX3UzMl91MzIoZXdtYV9ydW50aW1lX3JlYWQoJmNl
LT5ydW50aW1lLmF2ZyksIHBlcmlvZCk7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9ndC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYwpp
bmRleCAzOWI0MjhjNTA0OWMuLjc2MGI1MDc4YzFiYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9ndC5jCkBAIC00Niw2ICs0Niw4IEBAIHZvaWQgaW50ZWxfZ3RfaW5pdF9od19lYXJseShzdHJ1
Y3QgaW50ZWxfZ3QgKmd0LCBzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0KQogCiBpbnQgaW50ZWxfZ3Rf
aW5pdF9tbWlvKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiB7CisJaW50ZWxfZ3RfaW5pdF9jbG9ja19m
cmVxdWVuY3koZ3QpOworCiAJaW50ZWxfdWNfaW5pdF9tbWlvKCZndC0+dWMpOwogCWludGVsX3Nz
ZXVfaW5mb19pbml0KGd0KTsKIApAQCAtNTQ2LDggKzU0OCw2IEBAIGludCBpbnRlbF9ndF9pbml0
KHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiAJICovCiAJaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9nZXQo
Z3QtPnVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7CiAKLQlpbnRlbF9ndF9pbml0X2Nsb2NrX2ZyZXF1
ZW5jeShndCk7Ci0KIAllcnIgPSBpbnRlbF9ndF9pbml0X3NjcmF0Y2goZ3QsIElTX0dFTihndC0+
aTkxNSwgMikgPyBTWl8yNTZLIDogU1pfNEspOwogCWlmIChlcnIpCiAJCWdvdG8gb3V0X2Z3Owpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfY2xvY2tfdXRpbHMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2Nsb2NrX3V0aWxzLmMKaW5kZXgg
OTk5MDc5Njg2ODQ2Li5hNDI0MmNhOGRjZDcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2d0X2Nsb2NrX3V0aWxzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZ3RfY2xvY2tfdXRpbHMuYwpAQCAtNywzNCArNywxNDYgQEAKICNpbmNsdWRlICJp
bnRlbF9ndC5oIgogI2luY2x1ZGUgImludGVsX2d0X2Nsb2NrX3V0aWxzLmgiCiAKLSNkZWZpbmUg
TUhaXzEyICAgMTIwMDAwMDAgLyogMTJNSHogKDI0TUh6LzIpLCA4My4zMzNucyAqLwotI2RlZmlu
ZSBNSFpfMTJfNSAxMjUwMDAwMCAvKiAxMi41TUh6ICgyNU1Iei8yKSwgODBucyAqLwotI2RlZmlu
ZSBNSFpfMTlfMiAxOTIwMDAwMCAvKiAxOS4yTUh6LCA1Mi4wODNucyAqLworc3RhdGljIHUzMiBy
ZWFkX3JlZmVyZW5jZV90c19mcmVxKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSkKK3sKKwl1
MzIgdHNfb3ZlcnJpZGUgPSBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIEdFTjlfVElNRVNUQU1Q
X09WRVJSSURFKTsKKwl1MzIgYmFzZV9mcmVxLCBmcmFjX2ZyZXE7CisKKwliYXNlX2ZyZXEgPSAo
KHRzX292ZXJyaWRlICYgR0VOOV9USU1FU1RBTVBfT1ZFUlJJREVfVVNfQ09VTlRFUl9ESVZJREVS
X01BU0spID4+CisJCSAgICAgR0VOOV9USU1FU1RBTVBfT1ZFUlJJREVfVVNfQ09VTlRFUl9ESVZJ
REVSX1NISUZUKSArIDE7CisJYmFzZV9mcmVxICo9IDEwMDAwMDA7CisKKwlmcmFjX2ZyZXEgPSAo
KHRzX292ZXJyaWRlICYKKwkJICAgICAgR0VOOV9USU1FU1RBTVBfT1ZFUlJJREVfVVNfQ09VTlRF
Ul9ERU5PTUlOQVRPUl9NQVNLKSA+PgorCQkgICAgIEdFTjlfVElNRVNUQU1QX09WRVJSSURFX1VT
X0NPVU5URVJfREVOT01JTkFUT1JfU0hJRlQpOworCWZyYWNfZnJlcSA9IDEwMDAwMDAgLyAoZnJh
Y19mcmVxICsgMSk7CisKKwlyZXR1cm4gYmFzZV9mcmVxICsgZnJhY19mcmVxOworfQorCitzdGF0
aWMgdTMyIGdlbjEwX2dldF9jcnlzdGFsX2Nsb2NrX2ZyZXEoc3RydWN0IGludGVsX3VuY29yZSAq
dW5jb3JlLAorCQkJCQl1MzIgcnBtX2NvbmZpZ19yZWcpCit7CisJdTMyIGYxOV8yX21oeiA9IDE5
MjAwMDAwOworCXUzMiBmMjRfbWh6ID0gMjQwMDAwMDA7CisJdTMyIGNyeXN0YWxfY2xvY2sgPQor
CQkocnBtX2NvbmZpZ19yZWcgJiBHRU45X1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV9N
QVNLKSA+PgorCQlHRU45X1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV9TSElGVDsKIAot
c3RhdGljIHUzMiByZWFkX2Nsb2NrX2ZyZXF1ZW5jeShjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0
KQorCXN3aXRjaCAoY3J5c3RhbF9jbG9jaykgeworCWNhc2UgR0VOOV9SUE1fQ09ORklHMF9DUllT
VEFMX0NMT0NLX0ZSRVFfMTlfMl9NSFo6CisJCXJldHVybiBmMTlfMl9taHo7CisJY2FzZSBHRU45
X1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV8yNF9NSFo6CisJCXJldHVybiBmMjRfbWh6
OworCWRlZmF1bHQ6CisJCU1JU1NJTkdfQ0FTRShjcnlzdGFsX2Nsb2NrKTsKKwkJcmV0dXJuIDA7
CisJfQorfQorCitzdGF0aWMgdTMyIGdlbjExX2dldF9jcnlzdGFsX2Nsb2NrX2ZyZXEoc3RydWN0
IGludGVsX3VuY29yZSAqdW5jb3JlLAorCQkJCQl1MzIgcnBtX2NvbmZpZ19yZWcpCiB7Ci0JaWYg
KElOVEVMX0dFTihndC0+aTkxNSkgPj0gMTEpIHsKLQkJdTMyIGNvbmZpZzsKLQotCQljb25maWcg
PSBpbnRlbF91bmNvcmVfcmVhZChndC0+dW5jb3JlLCBSUE1fQ09ORklHMCk7Ci0JCWNvbmZpZyAm
PSBHRU4xMV9SUE1fQ09ORklHMF9DUllTVEFMX0NMT0NLX0ZSRVFfTUFTSzsKLQkJY29uZmlnID4+
PSBHRU4xMV9SUE1fQ09ORklHMF9DUllTVEFMX0NMT0NLX0ZSRVFfU0hJRlQ7Ci0KLQkJc3dpdGNo
IChjb25maWcpIHsKLQkJY2FzZSAwOiByZXR1cm4gTUhaXzEyOwotCQljYXNlIDE6Ci0JCWNhc2Ug
MjogcmV0dXJuIE1IWl8xOV8yOwotCQlkZWZhdWx0OgotCQljYXNlIDM6IHJldHVybiBNSFpfMTJf
NTsKKwl1MzIgZjE5XzJfbWh6ID0gMTkyMDAwMDA7CisJdTMyIGYyNF9taHogPSAyNDAwMDAwMDsK
Kwl1MzIgZjI1X21oeiA9IDI1MDAwMDAwOworCXUzMiBmMzhfNF9taHogPSAzODQwMDAwMDsKKwl1
MzIgY3J5c3RhbF9jbG9jayA9CisJCShycG1fY29uZmlnX3JlZyAmIEdFTjExX1JQTV9DT05GSUcw
X0NSWVNUQUxfQ0xPQ0tfRlJFUV9NQVNLKSA+PgorCQlHRU4xMV9SUE1fQ09ORklHMF9DUllTVEFM
X0NMT0NLX0ZSRVFfU0hJRlQ7CisKKwlzd2l0Y2ggKGNyeXN0YWxfY2xvY2spIHsKKwljYXNlIEdF
TjExX1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV8yNF9NSFo6CisJCXJldHVybiBmMjRf
bWh6OworCWNhc2UgR0VOMTFfUlBNX0NPTkZJRzBfQ1JZU1RBTF9DTE9DS19GUkVRXzE5XzJfTUha
OgorCQlyZXR1cm4gZjE5XzJfbWh6OworCWNhc2UgR0VOMTFfUlBNX0NPTkZJRzBfQ1JZU1RBTF9D
TE9DS19GUkVRXzM4XzRfTUhaOgorCQlyZXR1cm4gZjM4XzRfbWh6OworCWNhc2UgR0VOMTFfUlBN
X0NPTkZJRzBfQ1JZU1RBTF9DTE9DS19GUkVRXzI1X01IWjoKKwkJcmV0dXJuIGYyNV9taHo7CisJ
ZGVmYXVsdDoKKwkJTUlTU0lOR19DQVNFKGNyeXN0YWxfY2xvY2spOworCQlyZXR1cm4gMDsKKwl9
Cit9CisKK3N0YXRpYyB1MzIgcmVhZF9jbG9ja19mcmVxdWVuY3koc3RydWN0IGludGVsX3VuY29y
ZSAqdW5jb3JlKQoreworCXUzMiBmMTJfNV9taHogPSAxMjUwMDAwMDsKKwl1MzIgZjE5XzJfbWh6
ID0gMTkyMDAwMDA7CisJdTMyIGYyNF9taHogPSAyNDAwMDAwMDsKKworCWlmIChJTlRFTF9HRU4o
dW5jb3JlLT5pOTE1KSA8PSA0KSB7CisJCS8qCisJCSAqIFBSTXMgc2F5OgorCQkgKgorCQkgKiAg
ICAgIlRoZSB2YWx1ZSBpbiB0aGlzIHJlZ2lzdGVyIGluY3JlbWVudHMgb25jZSBldmVyeSAxNgor
CQkgKiAgICAgIGhjbGtzLiIgKHRocm91Z2ggdGhlIOKAnENsb2NraW5nIENvbmZpZ3VyYXRpb27i
gJ0KKwkJICogICAgICAo4oCcQ0xLQ0ZH4oCdKSBNQ0hCQVIgcmVnaXN0ZXIpCisJCSAqLworCQly
ZXR1cm4gUlVOVElNRV9JTkZPKHVuY29yZS0+aTkxNSktPnJhd2Nsa19mcmVxICogMTAwMCAvIDE2
OworCX0gZWxzZSBpZiAoSU5URUxfR0VOKHVuY29yZS0+aTkxNSkgPD0gOCkgeworCQkvKgorCQkg
KiBQUk1zIHNheToKKwkJICoKKwkJICogICAgICJUaGUgUENVIFRTQyBjb3VudHMgMTBucyBpbmNy
ZW1lbnRzOyB0aGlzIHRpbWVzdGFtcAorCQkgKiAgICAgIHJlZmxlY3RzIGJpdHMgMzg6MyBvZiB0
aGUgVFNDIChpLmUuIDgwbnMgZ3JhbnVsYXJpdHksCisJCSAqICAgICAgcm9sbGluZyBvdmVyIGV2
ZXJ5IDEuNSBob3VycykuCisJCSAqLworCQlyZXR1cm4gZjEyXzVfbWh6OworCX0gZWxzZSBpZiAo
SU5URUxfR0VOKHVuY29yZS0+aTkxNSkgPD0gOSkgeworCQl1MzIgY3RjX3JlZyA9IGludGVsX3Vu
Y29yZV9yZWFkKHVuY29yZSwgQ1RDX01PREUpOworCQl1MzIgZnJlcSA9IDA7CisKKwkJaWYgKChj
dGNfcmVnICYgQ1RDX1NPVVJDRV9QQVJBTUVURVJfTUFTSykgPT0gQ1RDX1NPVVJDRV9ESVZJREVf
TE9HSUMpIHsKKwkJCWZyZXEgPSByZWFkX3JlZmVyZW5jZV90c19mcmVxKHVuY29yZSk7CisJCX0g
ZWxzZSB7CisJCQlmcmVxID0gSVNfR0VOOV9MUCh1bmNvcmUtPmk5MTUpID8gZjE5XzJfbWh6IDog
ZjI0X21oejsKKworCQkJLyoKKwkJCSAqIE5vdyBmaWd1cmUgb3V0IGhvdyB0aGUgY29tbWFuZCBz
dHJlYW0ncyB0aW1lc3RhbXAKKwkJCSAqIHJlZ2lzdGVyIGluY3JlbWVudHMgZnJvbSB0aGlzIGZy
ZXF1ZW5jeSAoaXQgbWlnaHQKKwkJCSAqIGluY3JlbWVudCBvbmx5IGV2ZXJ5IGZldyBjbG9jayBj
eWNsZSkuCisJCQkgKi8KKwkJCWZyZXEgPj49IDMgLSAoKGN0Y19yZWcgJiBDVENfU0hJRlRfUEFS
QU1FVEVSX01BU0spID4+CisJCQkJICAgICAgQ1RDX1NISUZUX1BBUkFNRVRFUl9TSElGVCk7CiAJ
CX0KLQl9IGVsc2UgaWYgKElOVEVMX0dFTihndC0+aTkxNSkgPj0gOSkgewotCQlpZiAoSVNfR0VO
OV9MUChndC0+aTkxNSkpCi0JCQlyZXR1cm4gTUhaXzE5XzI7Ci0JCWVsc2UKLQkJCXJldHVybiBN
SFpfMTI7Ci0JfSBlbHNlIHsKLQkJcmV0dXJuIE1IWl8xMl81OworCisJCXJldHVybiBmcmVxOwor
CX0gZWxzZSBpZiAoSU5URUxfR0VOKHVuY29yZS0+aTkxNSkgPD0gMTIpIHsKKwkJdTMyIGN0Y19y
ZWcgPSBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIENUQ19NT0RFKTsKKwkJdTMyIGZyZXEgPSAw
OworCisJCS8qCisJCSAqIEZpcnN0IGZpZ3VyZSBvdXQgdGhlIHJlZmVyZW5jZSBmcmVxdWVuY3ku
IFRoZXJlIGFyZSAyIHdheXMKKwkJICogd2UgY2FuIGNvbXB1dGUgdGhlIGZyZXF1ZW5jeSwgZWl0
aGVyIHRocm91Z2ggdGhlCisJCSAqIFRJTUVTVEFNUF9PVkVSUklERSByZWdpc3RlciBvciB0aHJv
dWdoIFJQTV9DT05GSUcuIENUQ19NT0RFCisJCSAqIHRlbGxzIHVzIHdoaWNoIG9uZSB3ZSBzaG91
bGQgdXNlLgorCQkgKi8KKwkJaWYgKChjdGNfcmVnICYgQ1RDX1NPVVJDRV9QQVJBTUVURVJfTUFT
SykgPT0gQ1RDX1NPVVJDRV9ESVZJREVfTE9HSUMpIHsKKwkJCWZyZXEgPSByZWFkX3JlZmVyZW5j
ZV90c19mcmVxKHVuY29yZSk7CisJCX0gZWxzZSB7CisJCQl1MzIgYzAgPSBpbnRlbF91bmNvcmVf
cmVhZCh1bmNvcmUsIFJQTV9DT05GSUcwKTsKKworCQkJaWYgKElOVEVMX0dFTih1bmNvcmUtPmk5
MTUpIDw9IDEwKQorCQkJCWZyZXEgPSBnZW4xMF9nZXRfY3J5c3RhbF9jbG9ja19mcmVxKHVuY29y
ZSwgYzApOworCQkJZWxzZQorCQkJCWZyZXEgPSBnZW4xMV9nZXRfY3J5c3RhbF9jbG9ja19mcmVx
KHVuY29yZSwgYzApOworCisJCQkvKgorCQkJICogTm93IGZpZ3VyZSBvdXQgaG93IHRoZSBjb21t
YW5kIHN0cmVhbSdzIHRpbWVzdGFtcAorCQkJICogcmVnaXN0ZXIgaW5jcmVtZW50cyBmcm9tIHRo
aXMgZnJlcXVlbmN5IChpdCBtaWdodAorCQkJICogaW5jcmVtZW50IG9ubHkgZXZlcnkgZmV3IGNs
b2NrIGN5Y2xlKS4KKwkJCSAqLworCQkJZnJlcSA+Pj0gMyAtICgoYzAgJiBHRU4xMF9SUE1fQ09O
RklHMF9DVENfU0hJRlRfUEFSQU1FVEVSX01BU0spID4+CisJCQkJICAgICAgR0VOMTBfUlBNX0NP
TkZJRzBfQ1RDX1NISUZUX1BBUkFNRVRFUl9TSElGVCk7CisJCX0KKworCQlyZXR1cm4gZnJlcTsK
IAl9CisKKwlNSVNTSU5HX0NBU0UoIlVua25vd24gZ2VuLCB1bmFibGUgdG8gcmVhZCBjb21tYW5k
IHN0cmVhbWVyIHRpbWVzdGFtcCBmcmVxdWVuY3lcbiIpOworCXJldHVybiAwOwogfQogCiB2b2lk
IGludGVsX2d0X2luaXRfY2xvY2tfZnJlcXVlbmN5KHN0cnVjdCBpbnRlbF9ndCAqZ3QpCkBAIC00
MywyMCArMTU1LDI3IEBAIHZvaWQgaW50ZWxfZ3RfaW5pdF9jbG9ja19mcmVxdWVuY3koc3RydWN0
IGludGVsX2d0ICpndCkKIAkgKiBOb3RlIHRoYXQgb24gZ2VuMTErLCB0aGUgY2xvY2sgZnJlcXVl
bmN5IG1heSBiZSByZWNvbmZpZ3VyZWQuCiAJICogV2UgZG8gbm90LCBhbmQgd2UgYXNzdW1lIG5v
Ym9keSBlbHNlIGRvZXMuCiAJICovCi0JZ3QtPmNsb2NrX2ZyZXF1ZW5jeSA9IHJlYWRfY2xvY2tf
ZnJlcXVlbmN5KGd0KTsKKwlndC0+Y2xvY2tfZnJlcXVlbmN5ID0gcmVhZF9jbG9ja19mcmVxdWVu
Y3koZ3QtPnVuY29yZSk7CisJaWYgKGd0LT5jbG9ja19mcmVxdWVuY3kpCisJCWd0LT5jbG9ja19w
ZXJpb2RfbnMgPSBpbnRlbF9ndF9jbG9ja19pbnRlcnZhbF90b19ucyhndCwgMSk7CisKIAlHVF9U
UkFDRShndCwKLQkJICJVc2luZyBjbG9jayBmcmVxdWVuY3k6ICVka0h6XG4iLAotCQkgZ3QtPmNs
b2NrX2ZyZXF1ZW5jeSAvIDEwMDApOworCQkgIlVzaW5nIGNsb2NrIGZyZXF1ZW5jeTogJWRrSHos
IHBlcmlvZDogJWRucywgd3JhcDogJWxsZG1zXG4iLAorCQkgZ3QtPmNsb2NrX2ZyZXF1ZW5jeSAv
IDEwMDAsCisJCSBndC0+Y2xvY2tfcGVyaW9kX25zLAorCQkgZGl2X3U2NChtdWxfdTMyX3UzMihn
dC0+Y2xvY2tfcGVyaW9kX25zLCBTMzJfTUFYKSwKKwkJCSBVU0VDX1BFUl9TRUMpKTsKKwogfQog
CiAjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfREVCVUdfR0VNKQogdm9pZCBpbnRlbF9n
dF9jaGVja19jbG9ja19mcmVxdWVuY3koY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCkKIHsKLQlp
ZiAoZ3QtPmNsb2NrX2ZyZXF1ZW5jeSAhPSByZWFkX2Nsb2NrX2ZyZXF1ZW5jeShndCkpIHsKKwlp
ZiAoZ3QtPmNsb2NrX2ZyZXF1ZW5jeSAhPSByZWFkX2Nsb2NrX2ZyZXF1ZW5jeShndC0+dW5jb3Jl
KSkgewogCQlkZXZfZXJyKGd0LT5pOTE1LT5kcm0uZGV2LAogCQkJIkdUIGNsb2NrIGZyZXF1ZW5j
eSBjaGFuZ2VkLCB3YXMgJXVIeiwgbm93ICV1SHohXG4iLAogCQkJZ3QtPmNsb2NrX2ZyZXF1ZW5j
eSwKLQkJCXJlYWRfY2xvY2tfZnJlcXVlbmN5KGd0KSk7CisJCQlyZWFkX2Nsb2NrX2ZyZXF1ZW5j
eShndC0+dW5jb3JlKSk7CiAJfQogfQogI2VuZGlmCkBAIC02NiwyNiArMTg1LDI0IEBAIHN0YXRp
YyB1NjQgZGl2X3U2NF9yb3VuZHVwKHU2NCBub20sIHUzMiBkZW4pCiAJcmV0dXJuIGRpdl91NjQo
bm9tICsgZGVuIC0gMSwgZGVuKTsKIH0KIAotdTMyIGludGVsX2d0X2Nsb2NrX2ludGVydmFsX3Rv
X25zKGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QsIHUzMiBjb3VudCkKK3U2NCBpbnRlbF9ndF9j
bG9ja19pbnRlcnZhbF90b19ucyhjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1NjQgY291bnQp
CiB7Ci0JcmV0dXJuIGRpdl91NjRfcm91bmR1cChtdWxfdTMyX3UzMihjb3VudCwgMTAwMCAqIDEw
MDAgKiAxMDAwKSwKLQkJCSAgICAgICBndC0+Y2xvY2tfZnJlcXVlbmN5KTsKKwlyZXR1cm4gZGl2
X3U2NF9yb3VuZHVwKGNvdW50ICogTlNFQ19QRVJfU0VDLCBndC0+Y2xvY2tfZnJlcXVlbmN5KTsK
IH0KIAotdTMyIGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKGNvbnN0IHN0cnVjdCBpbnRlbF9n
dCAqZ3QsIHUzMiBjb3VudCkKK3U2NCBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucyhjb25zdCBz
dHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1NjQgY291bnQpCiB7CiAJcmV0dXJuIGludGVsX2d0X2Nsb2Nr
X2ludGVydmFsX3RvX25zKGd0LCAxNiAqIGNvdW50KTsKIH0KIAotdTMyIGludGVsX2d0X25zX3Rv
X2Nsb2NrX2ludGVydmFsKGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QsIHUzMiBucykKK3U2NCBp
bnRlbF9ndF9uc190b19jbG9ja19pbnRlcnZhbChjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1
NjQgbnMpCiB7Ci0JcmV0dXJuIGRpdl91NjRfcm91bmR1cChtdWxfdTMyX3UzMihndC0+Y2xvY2tf
ZnJlcXVlbmN5LCBucyksCi0JCQkgICAgICAgMTAwMCAqIDEwMDAgKiAxMDAwKTsKKwlyZXR1cm4g
ZGl2X3U2NF9yb3VuZHVwKGd0LT5jbG9ja19mcmVxdWVuY3kgKiBucywgTlNFQ19QRVJfU0VDKTsK
IH0KIAotdTMyIGludGVsX2d0X25zX3RvX3BtX2ludGVydmFsKGNvbnN0IHN0cnVjdCBpbnRlbF9n
dCAqZ3QsIHUzMiBucykKK3U2NCBpbnRlbF9ndF9uc190b19wbV9pbnRlcnZhbChjb25zdCBzdHJ1
Y3QgaW50ZWxfZ3QgKmd0LCB1NjQgbnMpCiB7Ci0JdTMyIHZhbDsKKwl1NjQgdmFsOwogCiAJLyoK
IAkgKiBNYWtlIHRoZXNlIGEgbXVsdGlwbGUgb2YgbWFnaWMgMjUgdG8gYXZvaWQgU05CIChlZy4g
RGVsbCBYUFMKQEAgLTk0LDkgKzIxMSw5IEBAIHUzMiBpbnRlbF9ndF9uc190b19wbV9pbnRlcnZh
bChjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1MzIgbnMpCiAJICogRUkvdGhyZXNob2xkcyBh
cmUgImJhZCIsIGxlYWRpbmcgdG8gYSB2ZXJ5IHNsdWdnaXNoIG9yIGV2ZW4KIAkgKiBmcm96ZW4g
bWFjaGluZS4KIAkgKi8KLQl2YWwgPSBESVZfUk9VTkRfVVAoaW50ZWxfZ3RfbnNfdG9fY2xvY2tf
aW50ZXJ2YWwoZ3QsIG5zKSwgMTYpOworCXZhbCA9IGRpdl91NjRfcm91bmR1cChpbnRlbF9ndF9u
c190b19jbG9ja19pbnRlcnZhbChndCwgbnMpLCAxNik7CiAJaWYgKElTX0dFTihndC0+aTkxNSwg
NikpCi0JCXZhbCA9IHJvdW5kdXAodmFsLCAyNSk7CisJCXZhbCA9IGRpdl91NjRfcm91bmR1cCh2
YWwsIDI1KSAqIDI1OwogCiAJcmV0dXJuIHZhbDsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2d0X2Nsb2NrX3V0aWxzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9ndF9jbG9ja191dGlscy5oCmluZGV4IGY3OTNjODlmMmNiZC4uOGIwM2U5N2E4
NWRmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9jbG9ja191
dGlscy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2Nsb2NrX3V0aWxz
LmgKQEAgLTE4LDEwICsxOCwxMCBAQCB2b2lkIGludGVsX2d0X2NoZWNrX2Nsb2NrX2ZyZXF1ZW5j
eShjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0KTsKIHN0YXRpYyBpbmxpbmUgdm9pZCBpbnRlbF9n
dF9jaGVja19jbG9ja19mcmVxdWVuY3koY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCkge30KICNl
bmRpZgogCi11MzIgaW50ZWxfZ3RfY2xvY2tfaW50ZXJ2YWxfdG9fbnMoY29uc3Qgc3RydWN0IGlu
dGVsX2d0ICpndCwgdTMyIGNvdW50KTsKLXUzMiBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucyhj
b25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1MzIgY291bnQpOwordTY0IGludGVsX2d0X2Nsb2Nr
X2ludGVydmFsX3RvX25zKGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QsIHU2NCBjb3VudCk7Cit1
NjQgaW50ZWxfZ3RfcG1faW50ZXJ2YWxfdG9fbnMoY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCwg
dTY0IGNvdW50KTsKIAotdTMyIGludGVsX2d0X25zX3RvX2Nsb2NrX2ludGVydmFsKGNvbnN0IHN0
cnVjdCBpbnRlbF9ndCAqZ3QsIHUzMiBucyk7Ci11MzIgaW50ZWxfZ3RfbnNfdG9fcG1faW50ZXJ2
YWwoY29uc3Qgc3RydWN0IGludGVsX2d0ICpndCwgdTMyIG5zKTsKK3U2NCBpbnRlbF9ndF9uc190
b19jbG9ja19pbnRlcnZhbChjb25zdCBzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCB1NjQgbnMpOwordTY0
IGludGVsX2d0X25zX3RvX3BtX2ludGVydmFsKGNvbnN0IHN0cnVjdCBpbnRlbF9ndCAqZ3QsIHU2
NCBucyk7CiAKICNlbmRpZiAvKiBfX0lOVEVMX0dUX0NMT0NLX1VUSUxTX0hfXyAqLwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaCBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5cGVzLmgKaW5kZXggN2FmZjgzNTBjMzY0Li5jMTVk
MDU5YzFkYmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3R5
cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaApAQCAt
NzEsNiArNzEsNyBAQCBzdHJ1Y3QgaW50ZWxfZ3QgewogCWludGVsX3dha2VyZWZfdCBhd2FrZTsK
IAogCXUzMiBjbG9ja19mcmVxdWVuY3k7CisJdTMyIGNsb2NrX3BlcmlvZF9uczsKIAogCXN0cnVj
dCBpbnRlbF9sbGMgbGxjOwogCXN0cnVjdCBpbnRlbF9yYzYgcmM2OwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5lX3BtLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9zZWxmdGVzdF9lbmdpbmVfcG0uYwppbmRleCA1ZmNiYWRjOGQ0ZjEuLjA0OTNj
NGZmYzU0ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5n
aW5lX3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5lX3Bt
LmMKQEAgLTE1NSw3ICsxNTUsNyBAQCBzdGF0aWMgaW50IF9fbGl2ZV9lbmdpbmVfdGltZXN0YW1w
cyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJZF9yaW5nID0gdHJpZmlsdGVyKHNf
cmluZyk7CiAJZF9jdHggPSB0cmlmaWx0ZXIoc19jdHgpOwogCi0JcHJfaW5mbygiJXMgZWxhcHNl
ZDolbGxkbnMsIENUWF9USU1FU1RBTVA6JWRucywgUklOR19USU1FU1RBTVA6JWRuc1xuIiwKKwlw
cl9pbmZvKCIlcyBlbGFwc2VkOiVsbGRucywgQ1RYX1RJTUVTVEFNUDolbGxkbnMsIFJJTkdfVElN
RVNUQU1QOiVsbGRuc1xuIiwKIAkJZW5naW5lLT5uYW1lLCBkdCwKIAkJaW50ZWxfZ3RfY2xvY2tf
aW50ZXJ2YWxfdG9fbnMoZW5naW5lLT5ndCwgZF9jdHgpLAogCQlpbnRlbF9ndF9jbG9ja19pbnRl
cnZhbF90b19ucyhlbmdpbmUtPmd0LCBkX3JpbmcpKTsKQEAgLTE3MCwxMSArMTcwLDExIEBAIHN0
YXRpYyBpbnQgX19saXZlX2VuZ2luZV90aW1lc3RhbXBzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSkKIAlkX3JpbmcgPSB0cmlmaWx0ZXIoc19yaW5nKTsKIAlkX2N0eCA9IHRyaWZpbHRl
cihzX2N0eCk7CiAKLQlkX2N0eCAqPSBSVU5USU1FX0lORk8oZW5naW5lLT5pOTE1KS0+Y3NfdGlt
ZXN0YW1wX2ZyZXF1ZW5jeV9oejsKKwlkX2N0eCAqPSBlbmdpbmUtPmd0LT5jbG9ja19mcmVxdWVu
Y3k7CiAJaWYgKElTX0lDRUxBS0UoZW5naW5lLT5pOTE1KSkKIAkJZF9yaW5nICo9IDEyNTAwMDAw
OyAvKiBGaXhlZCA4MG5zIGZvciBpY2wgY3R4IHRpbWVzdGFtcD8gKi8KIAllbHNlCi0JCWRfcmlu
ZyAqPSBSVU5USU1FX0lORk8oZW5naW5lLT5pOTE1KS0+Y3NfdGltZXN0YW1wX2ZyZXF1ZW5jeV9o
ejsKKwkJZF9yaW5nICo9IGVuZ2luZS0+Z3QtPmNsb2NrX2ZyZXF1ZW5jeTsKIAogCWlmICgzICog
ZF9jdHggPiA0ICogZF9yaW5nIHx8IDQgKiBkX2N0eCA8IDMgKiBkX3JpbmcpIHsKIAkJcHJfZXJy
KCIlcyBNaXNtYXRjaCBiZXR3ZWVuIHJpbmcgYW5kIGNvbnRleHQgdGltZXN0YW1wcyFcbiIsCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9ndF9wbS5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfZ3RfcG0uYwppbmRleCA2MTgwYTQ3YzFiNTEu
LjVkOTExZjcyNGViZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRl
c3RfZ3RfcG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9ndF9wbS5j
CkBAIC03MSw3ICs3MSw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9ndF9jbG9ja3Modm9pZCAqYXJnKQog
CWVudW0gaW50ZWxfZW5naW5lX2lkIGlkOwogCWludCBlcnIgPSAwOwogCi0JaWYgKCFSVU5USU1F
X0lORk8oZ3QtPmk5MTUpLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5X2h6KSB7IC8qIHVua25vd24g
Ki8KKwlpZiAoIWd0LT5jbG9ja19mcmVxdWVuY3kpIHsgLyogdW5rbm93biAqLwogCQlwcl9pbmZv
KCJDU19USU1FU1RBTVAgZnJlcXVlbmN5IHVua25vd25cbiIpOwogCQlyZXR1cm4gMDsKIAl9CkBA
IC0xMTIsMTIgKzExMiwxMiBAQCBzdGF0aWMgaW50IGxpdmVfZ3RfY2xvY2tzKHZvaWQgKmFyZykK
IAogCQltZWFzdXJlX2Nsb2NrcyhlbmdpbmUsICZjeWNsZXMsICZkdCk7CiAKLQkJdGltZSA9IGk5
MTVfY3NfdGltZXN0YW1wX3RpY2tzX3RvX25zKGVuZ2luZS0+aTkxNSwgY3ljbGVzKTsKLQkJZXhw
ZWN0ZWQgPSBpOTE1X2NzX3RpbWVzdGFtcF9uc190b190aWNrcyhlbmdpbmUtPmk5MTUsIGR0KTsK
KwkJdGltZSA9IGludGVsX2d0X2Nsb2NrX2ludGVydmFsX3RvX25zKGVuZ2luZS0+Z3QsIGN5Y2xl
cyk7CisJCWV4cGVjdGVkID0gaW50ZWxfZ3RfbnNfdG9fY2xvY2tfaW50ZXJ2YWwoZW5naW5lLT5n
dCwgZHQpOwogCiAJCXByX2luZm8oIiVzOiBUSU1FU1RBTVAgJWQgY3ljbGVzIFslbGxkbnNdIGlu
ICVsbGRucyBbJWQgY3ljbGVzXSwgdXNpbmcgQ1MgY2xvY2sgZnJlcXVlbmN5IG9mICV1S0h6XG4i
LAogCQkJZW5naW5lLT5uYW1lLCBjeWNsZXMsIHRpbWUsIGR0LCBleHBlY3RlZCwKLQkJCVJVTlRJ
TUVfSU5GTyhlbmdpbmUtPmk5MTUpLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5X2h6IC8gMTAwMCk7
CisJCQllbmdpbmUtPmd0LT5jbG9ja19mcmVxdWVuY3kgLyAxMDAwKTsKIAogCQlpZiAoOSAqIHRp
bWUgPCA4ICogZHQgfHwgOCAqIHRpbWUgPiA5ICogZHQpIHsKIAkJCXByX2VycigiJXM6IENTIHRp
Y2tzIGRpZCBub3QgbWF0Y2ggd2FsbHRpbWUhXG4iLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVn
ZnMuYwppbmRleCA3ODQyMTk5NjIxOTMuLjgzMjBkZWM5M2I4OSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kZWJ1Z2ZzLmMKQEAgLTkzNSwyNyArOTM1LDI3IEBAIHN0YXRpYyBpbnQgaTkxNV9mcmVx
dWVuY3lfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIAkJc2VxX3ByaW50
ZihtLCAiUlBERUNMSU1JVDogMHglMDh4XG4iLCBycGRlY2xpbWl0KTsKIAkJc2VxX3ByaW50Ziht
LCAiUlBOU1dSRVE6ICVkTUh6XG4iLCByZXFmKTsKIAkJc2VxX3ByaW50ZihtLCAiQ0FHRjogJWRN
SHpcbiIsIGNhZ2YpOwotCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgVVAgRUk6ICVkICglZG5zKVxu
IiwKKwkJc2VxX3ByaW50ZihtLCAiUlAgQ1VSIFVQIEVJOiAlZCAoJWxsZG5zKVxuIiwKIAkJCSAg
IHJwdXBlaSwKIAkJCSAgIGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKCZkZXZfcHJpdi0+Z3Qs
IHJwdXBlaSkpOwotCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgVVA6ICVkICglZHVuKVxuIiwKKwkJ
c2VxX3ByaW50ZihtLCAiUlAgQ1VSIFVQOiAlZCAoJWxsZHVuKVxuIiwKIAkJCSAgIHJwY3VydXAs
CiAJCQkgICBpbnRlbF9ndF9wbV9pbnRlcnZhbF90b19ucygmZGV2X3ByaXYtPmd0LCBycGN1cnVw
KSk7Ci0JCXNlcV9wcmludGYobSwgIlJQIFBSRVYgVVA6ICVkICglZG5zKVxuIiwKKwkJc2VxX3By
aW50ZihtLCAiUlAgUFJFViBVUDogJWQgKCVsbGRucylcbiIsCiAJCQkgICBycHByZXZ1cCwKIAkJ
CSAgIGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKCZkZXZfcHJpdi0+Z3QsIHJwcHJldnVwKSk7
CiAJCXNlcV9wcmludGYobSwgIlVwIHRocmVzaG9sZDogJWQlJVxuIiwKIAkJCSAgIHJwcy0+cG93
ZXIudXBfdGhyZXNob2xkKTsKIAotCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgRE9XTiBFSTogJWQg
KCVkbnMpXG4iLAorCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgRE9XTiBFSTogJWQgKCVsbGRucylc
biIsCiAJCQkgICBycGRvd25laSwKIAkJCSAgIGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKCZk
ZXZfcHJpdi0+Z3QsCiAJCQkJCQkgICAgICBycGRvd25laSkpOwotCQlzZXFfcHJpbnRmKG0sICJS
UCBDVVIgRE9XTjogJWQgKCVkbnMpXG4iLAorCQlzZXFfcHJpbnRmKG0sICJSUCBDVVIgRE9XTjog
JWQgKCVsbGRucylcbiIsCiAJCQkgICBycGN1cmRvd24sCiAJCQkgICBpbnRlbF9ndF9wbV9pbnRl
cnZhbF90b19ucygmZGV2X3ByaXYtPmd0LAogCQkJCQkJICAgICAgcnBjdXJkb3duKSk7Ci0JCXNl
cV9wcmludGYobSwgIlJQIFBSRVYgRE9XTjogJWQgKCVkbnMpXG4iLAorCQlzZXFfcHJpbnRmKG0s
ICJSUCBQUkVWIERPV046ICVkICglbGxkbnMpXG4iLAogCQkJICAgcnBwcmV2ZG93biwKIAkJCSAg
IGludGVsX2d0X3BtX2ludGVydmFsX3RvX25zKCZkZXZfcHJpdi0+Z3QsCiAJCQkJCQkgICAgICBy
cHByZXZkb3duKSk7CkBAIC0xMzE1LDggKzEzMTUsOSBAQCBzdGF0aWMgaW50IGk5MTVfZW5naW5l
X2luZm8oc3RydWN0IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpCiAJc2VxX3ByaW50ZihtLCAi
R1QgYXdha2U/ICVzIFslZF1cbiIsCiAJCSAgIHllc25vKGRldl9wcml2LT5ndC5hd2FrZSksCiAJ
CSAgIGF0b21pY19yZWFkKCZkZXZfcHJpdi0+Z3Qud2FrZXJlZi5jb3VudCkpOwotCXNlcV9wcmlu
dGYobSwgIkNTIHRpbWVzdGFtcCBmcmVxdWVuY3k6ICV1IEh6XG4iLAotCQkgICBSVU5USU1FX0lO
Rk8oZGV2X3ByaXYpLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5X2h6KTsKKwlzZXFfcHJpbnRmKG0s
ICJDUyB0aW1lc3RhbXAgZnJlcXVlbmN5OiAldSBIeiwgJWQgbnNcbiIsCisJCSAgIGRldl9wcml2
LT5ndC5jbG9ja19mcmVxdWVuY3ksCisJCSAgIGRldl9wcml2LT5ndC5jbG9ja19wZXJpb2RfbnMp
OwogCiAJcCA9IGRybV9zZXFfZmlsZV9wcmludGVyKG0pOwogCWZvcl9lYWNoX3VhYmlfZW5naW5l
KGVuZ2luZSwgZGV2X3ByaXYpCkBAIC0xNDEwLDcgKzE0MTEsNyBAQCBpOTE1X3BlcmZfbm9hX2Rl
bGF5X3NldCh2b2lkICpkYXRhLCB1NjQgdmFsKQogCSAqIFRoaXMgd291bGQgbGVhZCB0byBpbmZp
bml0ZSB3YWl0cyBhcyB3ZSdyZSBkb2luZyB0aW1lc3RhbXAKIAkgKiBkaWZmZXJlbmNlIG9uIHRo
ZSBDUyB3aXRoIG9ubHkgMzJiaXRzLgogCSAqLwotCWlmIChpOTE1X2NzX3RpbWVzdGFtcF9uc190
b190aWNrcyhpOTE1LCB2YWwpID4gVTMyX01BWCkKKwlpZiAoaW50ZWxfZ3RfbnNfdG9fY2xvY2tf
aW50ZXJ2YWwoJmk5MTUtPmd0LCB2YWwpID4gVTMyX01BWCkKIAkJcmV0dXJuIC1FSU5WQUw7CiAK
IAlhdG9taWM2NF9zZXQoJmk5MTUtPnBlcmYubm9hX3Byb2dyYW1taW5nX2RlbGF5LCB2YWwpOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5kZXggYWIxNzA4NGFmMGZmLi5hZTlkMGYwYmZmZWEgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaApAQCAtMjAwNiwxNiArMjAwNiw0IEBAIGk5MTVfY29oZXJl
bnRfbWFwX3R5cGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJcmV0dXJuIEhBU19M
TEMoaTkxNSkgPyBJOTE1X01BUF9XQiA6IEk5MTVfTUFQX1dDOwogfQogCi1zdGF0aWMgaW5saW5l
IHU2NCBpOTE1X2NzX3RpbWVzdGFtcF9uc190b190aWNrcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSwgdTY0IHZhbCkKLXsKLQlyZXR1cm4gRElWX1JPVU5EX1VQX1VMTCh2YWwgKiBSVU5U
SU1FX0lORk8oaTkxNSktPmNzX3RpbWVzdGFtcF9mcmVxdWVuY3lfaHosCi0JCQkJMTAwMDAwMDAw
MCk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdTY0IGk5MTVfY3NfdGltZXN0YW1wX3RpY2tzX3RvX25z
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCB1NjQgdmFsKQotewotCXJldHVybiBkaXZf
dTY0KHZhbCAqIDEwMDAwMDAwMDAsCi0JCSAgICAgICBSVU5USU1FX0lORk8oaTkxNSktPmNzX3Rp
bWVzdGFtcF9mcmVxdWVuY3lfaHopOwotfQotCiAjZW5kaWYKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2V0cGFyYW0uYwppbmRleCBmOTYwMzJjNjBhMTIuLjc1YzNiZmMyNDg2ZSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2V0cGFyYW0uYwpAQCAtMTU0LDcgKzE1NCw3IEBAIGludCBpOTE1X2dldHBh
cmFtX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJCQlyZXR1cm4g
LUVOT0RFVjsKIAkJYnJlYWs7CiAJY2FzZSBJOTE1X1BBUkFNX0NTX1RJTUVTVEFNUF9GUkVRVUVO
Q1k6Ci0JCXZhbHVlID0gUlVOVElNRV9JTkZPKGk5MTUpLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5
X2h6OworCQl2YWx1ZSA9IGk5MTUtPmd0LmNsb2NrX2ZyZXF1ZW5jeTsKIAkJYnJlYWs7CiAJY2Fz
ZSBJOTE1X1BBUkFNX01NQVBfR1RUX0NPSEVSRU5UOgogCQl2YWx1ZSA9IElOVEVMX0lORk8oaTkx
NSktPmhhc19jb2hlcmVudF9nZ3R0OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9ncHVfZXJyb3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMK
aW5kZXggNmEzYTJjZTBiMzk0Li4yZDc2ZjNkZGM1NzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9ncHVfZXJyb3IuYwpAQCAtNDgyLDcgKzQ4Miw3IEBAIHN0YXRpYyB2b2lkIGVycm9yX3ByaW50
X2NvbnRleHQoc3RydWN0IGRybV9pOTE1X2Vycm9yX3N0YXRlX2J1ZiAqbSwKIAkJCQljb25zdCBj
aGFyICpoZWFkZXIsCiAJCQkJY29uc3Qgc3RydWN0IGk5MTVfZ2VtX2NvbnRleHRfY29yZWR1bXAg
KmN0eCkKIHsKLQljb25zdCB1MzIgcGVyaW9kID0gUlVOVElNRV9JTkZPKG0tPmk5MTUpLT5jc190
aW1lc3RhbXBfcGVyaW9kX25zOworCWNvbnN0IHUzMiBwZXJpb2QgPSBtLT5pOTE1LT5ndC5jbG9j
a19wZXJpb2RfbnM7CiAKIAllcnJfcHJpbnRmKG0sICIlcyVzWyVkXSBwcmlvICVkLCBndWlsdHkg
JWQgYWN0aXZlICVkLCBydW50aW1lIHRvdGFsICVsbHVucywgYXZnICVsbHVuc1xuIiwKIAkJICAg
aGVhZGVyLCBjdHgtPmNvbW0sIGN0eC0+cGlkLCBjdHgtPnNjaGVkX2F0dHIucHJpb3JpdHksCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfcGVyZi5jCmluZGV4IGU5NDk3Njk3NjU3MS4uZTFiNWE5YjAwMGU0IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwpAQCAtMTk5LDYgKzE5OSw3IEBACiAjaW5jbHVkZSAi
Z3QvaW50ZWxfZW5naW5lX3BtLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZW5naW5lX3VzZXIuaCIK
ICNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgorI2luY2x1ZGUgImd0L2ludGVsX2d0X2Nsb2NrX3V0
aWxzLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfbHJjX3JlZy5oIgogI2luY2x1ZGUgImd0L2ludGVs
X3JpbmcuaCIKIApAQCAtMTYyOCw3ICsxNjI5LDggQEAgc3RhdGljIGludCBhbGxvY19ub2Ffd2Fp
dChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQogCXN0cnVjdCBkcm1faTkxNV9nZW1f
b2JqZWN0ICpibzsKIAlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKIAljb25zdCB1NjQgZGVsYXlfdGlj
a3MgPSAweGZmZmZmZmZmZmZmZmZmZmYgLQotCQlpOTE1X2NzX3RpbWVzdGFtcF9uc190b190aWNr
cyhpOTE1LCBhdG9taWM2NF9yZWFkKCZzdHJlYW0tPnBlcmYtPm5vYV9wcm9ncmFtbWluZ19kZWxh
eSkpOworCQlpbnRlbF9ndF9uc190b19jbG9ja19pbnRlcnZhbChzdHJlYW0tPnBlcmYtPmk5MTUt
PmdndHQudm0uZ3QsCisJCQkJCSAgICAgIGF0b21pYzY0X3JlYWQoJnN0cmVhbS0+cGVyZi0+bm9h
X3Byb2dyYW1taW5nX2RlbGF5KSk7CiAJY29uc3QgdTMyIGJhc2UgPSBzdHJlYW0tPmVuZ2luZS0+
bW1pb19iYXNlOwogI2RlZmluZSBDU19HUFIoeCkgR0VOOF9SSU5HX0NTX0dQUihiYXNlLCB4KQog
CXUzMiAqYmF0Y2gsICp0czAsICpjcywgKmp1bXA7CkBAIC0zNTA5LDcgKzM1MTEsOCBAQCBpOTE1
X3BlcmZfb3Blbl9pb2N0bF9sb2NrZWQoc3RydWN0IGk5MTVfcGVyZiAqcGVyZiwKIAogc3RhdGlj
IHU2NCBvYV9leHBvbmVudF90b19ucyhzdHJ1Y3QgaTkxNV9wZXJmICpwZXJmLCBpbnQgZXhwb25l
bnQpCiB7Ci0JcmV0dXJuIGk5MTVfY3NfdGltZXN0YW1wX3RpY2tzX3RvX25zKHBlcmYtPmk5MTUs
IDJVTEwgPDwgZXhwb25lbnQpOworCXJldHVybiBpbnRlbF9ndF9jbG9ja19pbnRlcnZhbF90b19u
cyhwZXJmLT5pOTE1LT5nZ3R0LnZtLmd0LAorCQkJCQkgICAgIDJVTEwgPDwgZXhwb25lbnQpOwog
fQogCiAvKioKQEAgLTQzNjMsOCArNDM2Niw4IEBAIHZvaWQgaTkxNV9wZXJmX2luaXQoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJaWYgKHBlcmYtPm9wcy5lbmFibGVfbWV0cmljX3Nl
dCkgewogCQltdXRleF9pbml0KCZwZXJmLT5sb2NrKTsKIAotCQlvYV9zYW1wbGVfcmF0ZV9oYXJk
X2xpbWl0ID0KLQkJCVJVTlRJTUVfSU5GTyhpOTE1KS0+Y3NfdGltZXN0YW1wX2ZyZXF1ZW5jeV9o
eiAvIDI7CisJCS8qIENob29zZSBhIHJlcHJlc2VudGF0aXZlIGxpbWl0ICovCisJCW9hX3NhbXBs
ZV9yYXRlX2hhcmRfbGltaXQgPSBpOTE1LT5ndC5jbG9ja19mcmVxdWVuY3kgLyAyOwogCiAJCW11
dGV4X2luaXQoJnBlcmYtPm1ldHJpY3NfbG9jayk7CiAJCWlkcl9pbml0KCZwZXJmLT5tZXRyaWNz
X2lkcik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5m
by5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uYwppbmRleCBlMmFh
NWJjM2E2ZTAuLmE3NWJjYTJmNmMxNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfZGV2aWNlX2luZm8uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZp
Y2VfaW5mby5jCkBAIC0xMTYsMTUwICsxMTYsNiBAQCB2b2lkIGludGVsX2RldmljZV9pbmZvX3By
aW50X3J1bnRpbWUoY29uc3Qgc3RydWN0IGludGVsX3J1bnRpbWVfaW5mbyAqaW5mbywKIAkJCQkg
ICAgIHN0cnVjdCBkcm1fcHJpbnRlciAqcCkKIHsKIAlkcm1fcHJpbnRmKHAsICJyYXdjbGsgcmF0
ZTogJXUga0h6XG4iLCBpbmZvLT5yYXdjbGtfZnJlcSk7Ci0JZHJtX3ByaW50ZihwLCAiQ1MgdGlt
ZXN0YW1wIGZyZXF1ZW5jeTogJXUgSHpcbiIsCi0JCSAgIGluZm8tPmNzX3RpbWVzdGFtcF9mcmVx
dWVuY3lfaHopOwotfQotCi1zdGF0aWMgdTMyIHJlYWRfcmVmZXJlbmNlX3RzX2ZyZXEoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQotewotCXUzMiB0c19vdmVycmlkZSA9IGludGVs
X3VuY29yZV9yZWFkKCZkZXZfcHJpdi0+dW5jb3JlLAotCQkJCQkgICAgR0VOOV9USU1FU1RBTVBf
T1ZFUlJJREUpOwotCXUzMiBiYXNlX2ZyZXEsIGZyYWNfZnJlcTsKLQotCWJhc2VfZnJlcSA9ICgo
dHNfb3ZlcnJpZGUgJiBHRU45X1RJTUVTVEFNUF9PVkVSUklERV9VU19DT1VOVEVSX0RJVklERVJf
TUFTSykgPj4KLQkJICAgICBHRU45X1RJTUVTVEFNUF9PVkVSUklERV9VU19DT1VOVEVSX0RJVklE
RVJfU0hJRlQpICsgMTsKLQliYXNlX2ZyZXEgKj0gMTAwMDAwMDsKLQotCWZyYWNfZnJlcSA9ICgo
dHNfb3ZlcnJpZGUgJgotCQkgICAgICBHRU45X1RJTUVTVEFNUF9PVkVSUklERV9VU19DT1VOVEVS
X0RFTk9NSU5BVE9SX01BU0spID4+Ci0JCSAgICAgR0VOOV9USU1FU1RBTVBfT1ZFUlJJREVfVVNf
Q09VTlRFUl9ERU5PTUlOQVRPUl9TSElGVCk7Ci0JZnJhY19mcmVxID0gMTAwMDAwMCAvIChmcmFj
X2ZyZXEgKyAxKTsKLQotCXJldHVybiBiYXNlX2ZyZXEgKyBmcmFjX2ZyZXE7Ci19Ci0KLXN0YXRp
YyB1MzIgZ2VuMTBfZ2V0X2NyeXN0YWxfY2xvY2tfZnJlcShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsCi0JCQkJCXUzMiBycG1fY29uZmlnX3JlZykKLXsKLQl1MzIgZjE5XzJfbWh6
ID0gMTkyMDAwMDA7Ci0JdTMyIGYyNF9taHogPSAyNDAwMDAwMDsKLQl1MzIgY3J5c3RhbF9jbG9j
ayA9IChycG1fY29uZmlnX3JlZyAmCi0JCQkgICAgIEdFTjlfUlBNX0NPTkZJRzBfQ1JZU1RBTF9D
TE9DS19GUkVRX01BU0spID4+Ci0JCQkgICAgR0VOOV9SUE1fQ09ORklHMF9DUllTVEFMX0NMT0NL
X0ZSRVFfU0hJRlQ7Ci0KLQlzd2l0Y2ggKGNyeXN0YWxfY2xvY2spIHsKLQljYXNlIEdFTjlfUlBN
X0NPTkZJRzBfQ1JZU1RBTF9DTE9DS19GUkVRXzE5XzJfTUhaOgotCQlyZXR1cm4gZjE5XzJfbWh6
OwotCWNhc2UgR0VOOV9SUE1fQ09ORklHMF9DUllTVEFMX0NMT0NLX0ZSRVFfMjRfTUhaOgotCQly
ZXR1cm4gZjI0X21oejsKLQlkZWZhdWx0OgotCQlNSVNTSU5HX0NBU0UoY3J5c3RhbF9jbG9jayk7
Ci0JCXJldHVybiAwOwotCX0KLX0KLQotc3RhdGljIHUzMiBnZW4xMV9nZXRfY3J5c3RhbF9jbG9j
a19mcmVxKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJCQkJdTMyIHJwbV9j
b25maWdfcmVnKQotewotCXUzMiBmMTlfMl9taHogPSAxOTIwMDAwMDsKLQl1MzIgZjI0X21oeiA9
IDI0MDAwMDAwOwotCXUzMiBmMjVfbWh6ID0gMjUwMDAwMDA7Ci0JdTMyIGYzOF80X21oeiA9IDM4
NDAwMDAwOwotCXUzMiBjcnlzdGFsX2Nsb2NrID0gKHJwbV9jb25maWdfcmVnICYKLQkJCSAgICAg
R0VOMTFfUlBNX0NPTkZJRzBfQ1JZU1RBTF9DTE9DS19GUkVRX01BU0spID4+Ci0JCQkgICAgR0VO
MTFfUlBNX0NPTkZJRzBfQ1JZU1RBTF9DTE9DS19GUkVRX1NISUZUOwotCi0Jc3dpdGNoIChjcnlz
dGFsX2Nsb2NrKSB7Ci0JY2FzZSBHRU4xMV9SUE1fQ09ORklHMF9DUllTVEFMX0NMT0NLX0ZSRVFf
MjRfTUhaOgotCQlyZXR1cm4gZjI0X21oejsKLQljYXNlIEdFTjExX1JQTV9DT05GSUcwX0NSWVNU
QUxfQ0xPQ0tfRlJFUV8xOV8yX01IWjoKLQkJcmV0dXJuIGYxOV8yX21oejsKLQljYXNlIEdFTjEx
X1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV8zOF80X01IWjoKLQkJcmV0dXJuIGYzOF80
X21oejsKLQljYXNlIEdFTjExX1JQTV9DT05GSUcwX0NSWVNUQUxfQ0xPQ0tfRlJFUV8yNV9NSFo6
Ci0JCXJldHVybiBmMjVfbWh6OwotCWRlZmF1bHQ6Ci0JCU1JU1NJTkdfQ0FTRShjcnlzdGFsX2Ns
b2NrKTsKLQkJcmV0dXJuIDA7Ci0JfQotfQotCi1zdGF0aWMgdTMyIHJlYWRfdGltZXN0YW1wX2Zy
ZXF1ZW5jeShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCi17Ci0Jc3RydWN0IGlu
dGVsX3VuY29yZSAqdW5jb3JlID0gJmRldl9wcml2LT51bmNvcmU7Ci0JdTMyIGYxMl81X21oeiA9
IDEyNTAwMDAwOwotCXUzMiBmMTlfMl9taHogPSAxOTIwMDAwMDsKLQl1MzIgZjI0X21oeiA9IDI0
MDAwMDAwOwotCi0JaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPD0gNCkgewotCQkvKiBQUk1zIHNh
eToKLQkJICoKLQkJICogICAgICJUaGUgdmFsdWUgaW4gdGhpcyByZWdpc3RlciBpbmNyZW1lbnRz
IG9uY2UgZXZlcnkgMTYKLQkJICogICAgICBoY2xrcy4iICh0aHJvdWdoIHRoZSDigJxDbG9ja2lu
ZyBDb25maWd1cmF0aW9u4oCdCi0JCSAqICAgICAgKOKAnENMS0NGR+KAnSkgTUNIQkFSIHJlZ2lz
dGVyKQotCQkgKi8KLQkJcmV0dXJuIFJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnJhd2Nsa19mcmVx
ICogMTAwMCAvIDE2OwotCX0gZWxzZSBpZiAoSU5URUxfR0VOKGRldl9wcml2KSA8PSA4KSB7Ci0J
CS8qIFBSTXMgc2F5OgotCQkgKgotCQkgKiAgICAgIlRoZSBQQ1UgVFNDIGNvdW50cyAxMG5zIGlu
Y3JlbWVudHM7IHRoaXMgdGltZXN0YW1wCi0JCSAqICAgICAgcmVmbGVjdHMgYml0cyAzODozIG9m
IHRoZSBUU0MgKGkuZS4gODBucyBncmFudWxhcml0eSwKLQkJICogICAgICByb2xsaW5nIG92ZXIg
ZXZlcnkgMS41IGhvdXJzKS4KLQkJICovCi0JCXJldHVybiBmMTJfNV9taHo7Ci0JfSBlbHNlIGlm
IChJTlRFTF9HRU4oZGV2X3ByaXYpIDw9IDkpIHsKLQkJdTMyIGN0Y19yZWcgPSBpbnRlbF91bmNv
cmVfcmVhZCh1bmNvcmUsIENUQ19NT0RFKTsKLQkJdTMyIGZyZXEgPSAwOwotCi0JCWlmICgoY3Rj
X3JlZyAmIENUQ19TT1VSQ0VfUEFSQU1FVEVSX01BU0spID09IENUQ19TT1VSQ0VfRElWSURFX0xP
R0lDKSB7Ci0JCQlmcmVxID0gcmVhZF9yZWZlcmVuY2VfdHNfZnJlcShkZXZfcHJpdik7Ci0JCX0g
ZWxzZSB7Ci0JCQlmcmVxID0gSVNfR0VOOV9MUChkZXZfcHJpdikgPyBmMTlfMl9taHogOiBmMjRf
bWh6OwotCi0JCQkvKiBOb3cgZmlndXJlIG91dCBob3cgdGhlIGNvbW1hbmQgc3RyZWFtJ3MgdGlt
ZXN0YW1wCi0JCQkgKiByZWdpc3RlciBpbmNyZW1lbnRzIGZyb20gdGhpcyBmcmVxdWVuY3kgKGl0
IG1pZ2h0Ci0JCQkgKiBpbmNyZW1lbnQgb25seSBldmVyeSBmZXcgY2xvY2sgY3ljbGUpLgotCQkJ
ICovCi0JCQlmcmVxID4+PSAzIC0gKChjdGNfcmVnICYgQ1RDX1NISUZUX1BBUkFNRVRFUl9NQVNL
KSA+PgotCQkJCSAgICAgIENUQ19TSElGVF9QQVJBTUVURVJfU0hJRlQpOwotCQl9Ci0KLQkJcmV0
dXJuIGZyZXE7Ci0JfSBlbHNlIGlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDw9IDEyKSB7Ci0JCXUz
MiBjdGNfcmVnID0gaW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBDVENfTU9ERSk7Ci0JCXUzMiBm
cmVxID0gMDsKLQotCQkvKiBGaXJzdCBmaWd1cmUgb3V0IHRoZSByZWZlcmVuY2UgZnJlcXVlbmN5
LiBUaGVyZSBhcmUgMiB3YXlzCi0JCSAqIHdlIGNhbiBjb21wdXRlIHRoZSBmcmVxdWVuY3ksIGVp
dGhlciB0aHJvdWdoIHRoZQotCQkgKiBUSU1FU1RBTVBfT1ZFUlJJREUgcmVnaXN0ZXIgb3IgdGhy
b3VnaCBSUE1fQ09ORklHLiBDVENfTU9ERQotCQkgKiB0ZWxscyB1cyB3aGljaCBvbmUgd2Ugc2hv
dWxkIHVzZS4KLQkJICovCi0JCWlmICgoY3RjX3JlZyAmIENUQ19TT1VSQ0VfUEFSQU1FVEVSX01B
U0spID09IENUQ19TT1VSQ0VfRElWSURFX0xPR0lDKSB7Ci0JCQlmcmVxID0gcmVhZF9yZWZlcmVu
Y2VfdHNfZnJlcShkZXZfcHJpdik7Ci0JCX0gZWxzZSB7Ci0JCQl1MzIgcnBtX2NvbmZpZ19yZWcg
PSBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIFJQTV9DT05GSUcwKTsKLQotCQkJaWYgKElOVEVM
X0dFTihkZXZfcHJpdikgPD0gMTApCi0JCQkJZnJlcSA9IGdlbjEwX2dldF9jcnlzdGFsX2Nsb2Nr
X2ZyZXEoZGV2X3ByaXYsCi0JCQkJCQkJCXJwbV9jb25maWdfcmVnKTsKLQkJCWVsc2UKLQkJCQlm
cmVxID0gZ2VuMTFfZ2V0X2NyeXN0YWxfY2xvY2tfZnJlcShkZXZfcHJpdiwKLQkJCQkJCQkJcnBt
X2NvbmZpZ19yZWcpOwotCi0JCQkvKiBOb3cgZmlndXJlIG91dCBob3cgdGhlIGNvbW1hbmQgc3Ry
ZWFtJ3MgdGltZXN0YW1wCi0JCQkgKiByZWdpc3RlciBpbmNyZW1lbnRzIGZyb20gdGhpcyBmcmVx
dWVuY3kgKGl0IG1pZ2h0Ci0JCQkgKiBpbmNyZW1lbnQgb25seSBldmVyeSBmZXcgY2xvY2sgY3lj
bGUpLgotCQkJICovCi0JCQlmcmVxID4+PSAzIC0gKChycG1fY29uZmlnX3JlZyAmCi0JCQkJICAg
ICAgIEdFTjEwX1JQTV9DT05GSUcwX0NUQ19TSElGVF9QQVJBTUVURVJfTUFTSykgPj4KLQkJCQkg
ICAgICBHRU4xMF9SUE1fQ09ORklHMF9DVENfU0hJRlRfUEFSQU1FVEVSX1NISUZUKTsKLQkJfQot
Ci0JCXJldHVybiBmcmVxOwotCX0KLQotCU1JU1NJTkdfQ0FTRSgiVW5rbm93biBnZW4sIHVuYWJs
ZSB0byByZWFkIGNvbW1hbmQgc3RyZWFtZXIgdGltZXN0YW1wIGZyZXF1ZW5jeVxuIik7Ci0JcmV0
dXJuIDA7CiB9CiAKICN1bmRlZiBJTlRFTF9WR0FfREVWSUNFCkBAIC01MDMsMTkgKzM1OSw2IEBA
IHZvaWQgaW50ZWxfZGV2aWNlX2luZm9fcnVudGltZV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikKIAogCXJ1bnRpbWUtPnJhd2Nsa19mcmVxID0gaW50ZWxfcmVhZF9yYXdj
bGsoZGV2X3ByaXYpOwogCWRybV9kYmcoJmRldl9wcml2LT5kcm0sICJyYXdjbGsgcmF0ZTogJWQg
a0h6XG4iLCBydW50aW1lLT5yYXdjbGtfZnJlcSk7Ci0KLQkvKiBJbml0aWFsaXplIGNvbW1hbmQg
c3RyZWFtIHRpbWVzdGFtcCBmcmVxdWVuY3kgKi8KLQlydW50aW1lLT5jc190aW1lc3RhbXBfZnJl
cXVlbmN5X2h6ID0KLQkJcmVhZF90aW1lc3RhbXBfZnJlcXVlbmN5KGRldl9wcml2KTsKLQlpZiAo
cnVudGltZS0+Y3NfdGltZXN0YW1wX2ZyZXF1ZW5jeV9oeikgewotCQlydW50aW1lLT5jc190aW1l
c3RhbXBfcGVyaW9kX25zID0KLQkJCWk5MTVfY3NfdGltZXN0YW1wX3RpY2tzX3RvX25zKGRldl9w
cml2LCAxKTsKLQkJZHJtX2RiZygmZGV2X3ByaXYtPmRybSwKLQkJCSJDUyB0aW1lc3RhbXAgd3Jh
cGFyb3VuZCBpbiAlbGxkbXNcbiIsCi0JCQlkaXZfdTY0KG11bF91MzJfdTMyKHJ1bnRpbWUtPmNz
X3RpbWVzdGFtcF9wZXJpb2RfbnMsCi0JCQkJCSAgICBTMzJfTUFYKSwKLQkJCQlVU0VDX1BFUl9T
RUMpKTsKLQl9CiB9CiAKIHZvaWQgaW50ZWxfZHJpdmVyX2NhcHNfcHJpbnQoY29uc3Qgc3RydWN0
IGludGVsX2RyaXZlcl9jYXBzICpjYXBzLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfZGV2aWNlX2luZm8uaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rldmlj
ZV9pbmZvLmgKaW5kZXggNmEzZDYwNzIxOGFhLi44YWU4OTY3NzJmZDggMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmgKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uaApAQCAtMjIzLDkgKzIyMyw2IEBAIHN0cnVjdCBp
bnRlbF9ydW50aW1lX2luZm8gewogCXU4IG51bV9zY2FsZXJzW0k5MTVfTUFYX1BJUEVTXTsKIAog
CXUzMiByYXdjbGtfZnJlcTsKLQotCXUzMiBjc190aW1lc3RhbXBfZnJlcXVlbmN5X2h6OwotCXUz
MiBjc190aW1lc3RhbXBfcGVyaW9kX25zOwogfTsKIAogc3RydWN0IGludGVsX2RyaXZlcl9jYXBz
IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3BlcmYu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3BlcmYuYwppbmRleCBkZWJi
YWM2NjA1MTkuLmU5ZDg2ZGFiODY3NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
c2VsZnRlc3RzL2k5MTVfcGVyZi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0
cy9pOTE1X3BlcmYuYwpAQCAtMjYyLDcgKzI2Miw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9ub2FfZGVs
YXkodm9pZCAqYXJnKQogCiAJZGVsYXkgPSBpbnRlbF9yZWFkX3N0YXR1c19wYWdlKHN0cmVhbS0+
ZW5naW5lLCAweDEwMik7CiAJZGVsYXkgLT0gaW50ZWxfcmVhZF9zdGF0dXNfcGFnZShzdHJlYW0t
PmVuZ2luZSwgMHgxMDApOwotCWRlbGF5ID0gaTkxNV9jc190aW1lc3RhbXBfdGlja3NfdG9fbnMo
aTkxNSwgZGVsYXkpOworCWRlbGF5ID0gaW50ZWxfZ3RfY2xvY2tfaW50ZXJ2YWxfdG9fbnMoc3Ry
ZWFtLT5lbmdpbmUtPmd0LCBkZWxheSk7CiAJcHJfaW5mbygiR1BVIGRlbGF5OiAldW5zLCBleHBl
Y3RlZCAlbGx1bnNcbiIsCiAJCWRlbGF5LCBleHBlY3RlZCk7CiAKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3JlcXVlc3QuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3JlcXVlc3QuYwppbmRleCAwMWVkMzY5ODhiZjMuLjFiYTJh
NWMyMmY5YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVf
cmVxdWVzdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3JlcXVl
c3QuYwpAQCAtMzMsNiArMzMsNyBAQAogI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV9wbS5oIgog
I2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV91c2VyLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfZ3Qu
aCIKKyNpbmNsdWRlICJndC9pbnRlbF9ndF9jbG9ja191dGlscy5oIgogI2luY2x1ZGUgImd0L2lu
dGVsX2d0X3JlcXVlc3RzLmgiCiAjaW5jbHVkZSAiZ3Qvc2VsZnRlc3RfZW5naW5lX2hlYXJ0YmVh
dC5oIgogCkBAIC0xNTYwLDcgKzE1NjEsNyBAQCBzdGF0aWMgdTMyIHRyaWZpbHRlcih1MzIgKmEp
CiAKIHN0YXRpYyB1NjQgY3ljbGVzX3RvX25zKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZSwgdTMyIGN5Y2xlcykKIHsKLQl1NjQgbnMgPSBpOTE1X2NzX3RpbWVzdGFtcF90aWNrc190b19u
cyhlbmdpbmUtPmk5MTUsIGN5Y2xlcyk7CisJdTY0IG5zID0gaW50ZWxfZ3RfY2xvY2tfaW50ZXJ2
YWxfdG9fbnMoZW5naW5lLT5ndCwgY3ljbGVzKTsKIAogCXJldHVybiBESVZfUk9VTkRfQ0xPU0VT
VChucywgMSA8PCBURl9CSUFTKTsKIH0KLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

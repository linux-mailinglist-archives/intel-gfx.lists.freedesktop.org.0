Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 11A672B6DC7
	for <lists+intel-gfx@lfdr.de>; Tue, 17 Nov 2020 19:51:01 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C494A6E030;
	Tue, 17 Nov 2020 18:50:53 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 90F2589FD7
 for <intel-gfx@lists.freedesktop.org>; Tue, 17 Nov 2020 18:50:52 +0000 (UTC)
IronPort-SDR: Eo/RsVng2HrUfA7woyYzsvfh4ILqmVpVPMUBweyCPa1mQJLsMt5cMSZN4htWUvBLQROeosrbnq
 a+dCwU47tAUA==
X-IronPort-AV: E=McAfee;i="6000,8403,9808"; a="168412296"
X-IronPort-AV: E=Sophos;i="5.77,486,1596524400"; d="scan'208";a="168412296"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by fmsmga104.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 17 Nov 2020 10:50:51 -0800
IronPort-SDR: eVeacJxTiPTwl0/ua/vdsryzdPeiFeNuqRvPUNjXLWVSvBRByfcA0CrcGSaDSixmavotdyTYar
 YWrCxV1DxRIQ==
X-IronPort-AV: E=Sophos;i="5.77,486,1596524400"; d="scan'208";a="340996899"
Received: from ankithac-mobl1.amr.corp.intel.com (HELO
 aswarup-mobl.amr.corp.intel.com) ([10.254.101.215])
 by orsmga002-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 17 Nov 2020 10:50:51 -0800
From: Aditya Swarup <aditya.swarup@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 17 Nov 2020 10:50:23 -0800
Message-Id: <20201117185029.22078-16-aditya.swarup@intel.com>
X-Mailer: git-send-email 2.27.0
In-Reply-To: <20201117185029.22078-1-aditya.swarup@intel.com>
References: <20201117185029.22078-1-aditya.swarup@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 15/21] drm/i915/adl_s: Add display, gt,
 ctx and ADL-S
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>,
 Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

LSBJbmhlcml0IHRoZSBnZW4xMiB3b3JrYXJvdW5kcy4KLSBBZGQgcGxhY2Vob2xkZXJzIHRvIHNl
dHVwIEdUIFdBLgotIEV4dGVuZCBwZXJtYW5lbnQgZHJpdmVyIFdBIFdhXzE0MDk3NjcxMDggdG8g
YWRsLXMgYW5kCiAgV2FfMTQwMTA2ODUzMzIgdG8gYWRsLXMuCi0gRXh0ZW5kIHBlcm1hbmVudCBk
cml2ZXIgV0EgV2FfMTYwNjA1NDE4OCB0byBhZGwtcwotIEFkZCBXYV8xNDAxMTc2NTI0MiBmb3Ig
YWRsLXMgQTAgc3RlcHBpbmcuCgp2MjoKLSBFeHRlbmQgV2FfMTQwMTA5MTkxMzggYW5kIFdhXzE0
MDEwMjI5MjA2IHRvIEFETC1TIChNYWRodW1pdGhhKQotIEV4dGVuZCBXYV8yMjAxMDI3MTAyMSB0
byBBRExTIChjeW9rb3lhbSkKCkNjOiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1bGFAaW50ZWwuY29t
PgpDYzogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KQ2M6
IEltcmUgRGVhayA8aW1yZS5kZWFrQGludGVsLmNvbT4KQ2M6IE1hdHQgUm9wZXIgPG1hdHRoZXcu
ZC5yb3BlckBpbnRlbC5jb20+CkNjOiBMdWNhcyBEZSBNYXJjaGkgPGx1Y2FzLmRlbWFyY2hpQGlu
dGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogTWFkaHVtaXRoYSBUb2xha2FuYWhhbGxpIFByYWRlZXAg
PG1hZGh1bWl0aGEudG9sYWthbmFoYWxsaS5wcmFkZWVwQGludGVsLmNvbT4KU2lnbmVkLW9mZi1i
eTogQWRpdHlhIFN3YXJ1cCA8YWRpdHlhLnN3YXJ1cEBpbnRlbC5jb20+Ci0tLQogLi4uL2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5jICAgIHwgIDcgKy0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMgICB8ICA0ICstCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jICAgfCA5MSArKysrKysrKysrKysrLS0tLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jICAgICAgfCAgNiArLQog
NCBmaWxlcyBjaGFuZ2VkLCA3MiBpbnNlcnRpb25zKCspLCAzNiBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5jCmlu
ZGV4IDA2YzAzNmUyMDkyYy4uOGIxNjNkODA0YTQxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYwpAQCAtNTI4Miw5ICs1MjgyLDEw
IEBAIHN0YXRpYyB2b2lkIHRnbF9id19idWRkeV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdikKIAl1bnNpZ25lZCBsb25nIGFib3hfbWFzayA9IElOVEVMX0lORk8oZGV2X3By
aXYpLT5hYm94X21hc2s7CiAJaW50IGNvbmZpZywgaTsKIAotCWlmIChJU19ERzFfUkVWSUQoZGV2
X3ByaXYsIERHMV9SRVZJRF9BMCwgREcxX1JFVklEX0EwKSB8fAorCWlmIChJU19BTERFUkxBS0Vf
UyhkZXZfcHJpdikgfHwKKwkgICAgSVNfREcxX1JFVklEKGRldl9wcml2LCBERzFfUkVWSURfQTAs
IERHMV9SRVZJRF9BMCkgfHwKIAkgICAgSVNfVEdMX0RJU1BfUkVWSUQoZGV2X3ByaXYsIFJFVklE
X0EwLCBSRVZJRF9CMCkpCi0JCS8qIFdhXzE0MDk3NjcxMDg6dGdsLGRnMSAqLworCQkvKiBXYV8x
NDA5NzY3MTA4OnRnbCxkZzEsYWRsLXMgKi8KIAkJdGFibGUgPSB3YV8xNDA5NzY3MTA4X2J1ZGR5
X3BhZ2VfbWFza3M7CiAJZWxzZQogCQl0YWJsZSA9IHRnbF9idWRkeV9wYWdlX21hc2tzOwpAQCAt
NTMyMiw3ICs1MzIzLDcgQEAgc3RhdGljIHZvaWQgaWNsX2Rpc3BsYXlfY29yZV9pbml0KHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAogCWdlbjlfc2V0X2RjX3N0YXRlKGRldl9w
cml2LCBEQ19TVEFURV9ESVNBQkxFKTsKIAotCS8qIFdhXzE0MDExMjk0MTg4OmVobCxqc2wsdGds
LHJrbCAqLworCS8qIFdhXzE0MDExMjk0MTg4OmVobCxqc2wsdGdsLHJrbCxhZGwtcyAqLwogCWlm
IChJTlRFTF9QQ0hfVFlQRShkZXZfcHJpdikgPj0gUENIX0pTUCAmJgogCSAgICBJTlRFTF9QQ0hf
VFlQRShkZXZfcHJpdikgPCBQQ0hfREcxKQogCQlpbnRlbF9kZV9ybXcoZGV2X3ByaXYsIFNPVVRI
X0RTUENMS19HQVRFX0QsIDAsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX3Nwcml0ZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9z
cHJpdGUuYwppbmRleCBmN2RhNGE1NjA1NGUuLjFlOTU0ZTI5MjhmZSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jCkBAIC0yMzU5LDggKzIzNTksOCBAQCBz
dGF0aWMgaW50IHNrbF9wbGFuZV9jaGVja19mYihjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqY3J0Y19zdGF0ZSwKIAkJcmV0dXJuIC1FSU5WQUw7CiAJfQogCi0JLyogV2FfMTYwNjA1NDE4
ODp0Z2wgKi8KLQlpZiAoSVNfVElHRVJMQUtFKGRldl9wcml2KSAmJgorCS8qIFdhXzE2MDYwNTQx
ODg6dGdsLGFkbC1zICovCisJaWYgKChJU19BTERFUkxBS0VfUyhkZXZfcHJpdikgfHwgSVNfVElH
RVJMQUtFKGRldl9wcml2KSkgJiYKIAkgICAgcGxhbmVfc3RhdGUtPmNrZXkuZmxhZ3MgJiBJOTE1
X1NFVF9DT0xPUktFWV9TT1VSQ0UgJiYKIAkgICAgaW50ZWxfZm9ybWF0X2lzX3AwMXgoZmItPmZv
cm1hdC0+Zm9ybWF0KSkgewogCQlkcm1fZGJnX2ttcygmZGV2X3ByaXYtPmRybSwKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jCmluZGV4IGQ4OGQzZDYwZmIxYy4u
ZTZmMTQ5YmQ1MzdmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93
b3JrYXJvdW5kcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91
bmRzLmMKQEAgLTY2NCwyMiArNjY0LDYgQEAgc3RhdGljIHZvaWQgdGdsX2N0eF93b3JrYXJvdW5k
c19pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAkJCQkgICAgIHN0cnVjdCBp
OTE1X3dhX2xpc3QgKndhbCkKIHsKIAlnZW4xMl9jdHhfd29ya2Fyb3VuZHNfaW5pdChlbmdpbmUs
IHdhbCk7Ci0KLQkvKgotCSAqIFdhXzE2MDQ1NTU2MDc6dGdsLHJrbAotCSAqCi0JICogTm90ZSB0
aGF0IHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHdvcmthcm91bmQgaXMgZnVydGhlciBtb2Rp
ZmllZAotCSAqIGFjY29yZGluZyB0byB0aGUgRkZfTU9ERTIgZ3VpZGFuY2UgZ2l2ZW4gYnkgV2Ff
MTYwODAwODA4NDpnZW4xMi4KLQkgKiBGRl9NT0RFMiByZWdpc3RlciB3aWxsIHJldHVybiB0aGUg
d3JvbmcgdmFsdWUgd2hlbiByZWFkLiBUaGUgZGVmYXVsdAotCSAqIHZhbHVlIGZvciB0aGlzIHJl
Z2lzdGVyIGlzIHplcm8gZm9yIGFsbCBmaWVsZHMgYW5kIHRoZXJlIGFyZSBubyBiaXQKLQkgKiBt
YXNrcy4gU28gaW5zdGVhZCBvZiBkb2luZyBhIFJNVyB3ZSBzaG91bGQganVzdCB3cml0ZSB0aGUg
R1MgVGltZXIKLQkgKiBhbmQgVERTIHRpbWVyIHZhbHVlcyBmb3IgV2FfMTYwNDU1NTYwNyBhbmQg
V2FfMTYwMTExNjMzMzcuCi0JICovCi0Jd2FfYWRkKHdhbCwKLQkgICAgICAgRkZfTU9ERTIsCi0J
ICAgICAgIEZGX01PREUyX0dTX1RJTUVSX01BU0sgfCBGRl9NT0RFMl9URFNfVElNRVJfTUFTSywK
LQkgICAgICAgRkZfTU9ERTJfR1NfVElNRVJfMjI0ICB8IEZGX01PREUyX1REU19USU1FUl8xMjgs
Ci0JICAgICAgIDApOwogfQogCiBzdGF0aWMgdm9pZCBkZzFfY3R4X3dvcmthcm91bmRzX2luaXQo
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLApAQCAtNjk2LDYgKzY4MCwxMiBAQCBzdGF0
aWMgdm9pZCBkZzFfY3R4X3dvcmthcm91bmRzX2luaXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lLAogCQkJICBERzFfSFpfUkVBRF9TVVBQUkVTU0lPTl9PUFRJTUlaQVRJT05fRElTQUJM
RSk7CiB9CiAKK3N0YXRpYyB2b2lkIGFkbHNfY3R4X3dvcmthcm91bmRzX2luaXQoc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lLAorCQkJCSAgICAgIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndh
bCkKK3sKKwlnZW4xMl9jdHhfd29ya2Fyb3VuZHNfaW5pdChlbmdpbmUsIHdhbCk7Cit9CisKIHN0
YXRpYyB2b2lkCiBfX2ludGVsX2VuZ2luZV9pbml0X2N0eF93YShzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmUsCiAJCQkgICBzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwsCkBAIC03MDgsNyAr
Njk4LDMxIEBAIF9faW50ZWxfZW5naW5lX2luaXRfY3R4X3dhKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSwKIAogCXdhX2luaXRfc3RhcnQod2FsLCBuYW1lLCBlbmdpbmUtPm5hbWUpOwog
Ci0JaWYgKElTX0RHMShpOTE1KSkKKwlpZiAoSU5URUxfR0VOKGk5MTUpID49IDEyKSB7CisJCS8q
CisJCSAqIFRoaXMgc2V0dGluZyBpc24ndCBhY3R1YWxseSBhIHdvcmthcm91bmQsIGJ1dCBpcyBh
IGdlbmVyYWwKKwkJICogdHVuaW5nIHNldHRpbmcgdGhhdCBuZWVkcyB0byBiZSBwcm9ncmFtbWVk
IG9uIGFsbCBwbGF0Zm9ybXMKKwkJICogZ2VuMTIrLiBBbHRob3VnaCBzb21lIHBsYXRmb3JtcyBh
bHNvIHJlZmVyIHRvIHRoaXMgc2V0dGluZworCQkgKiBhcyBXYV8xNjA0NTU1NjA3LCB3ZSBuZWVk
IHRvIHByb2dyYW0gaXQgZXZlbiBvbiBwbGF0Zm9ybXMgdGhhdAorCQkgKiBkb24ndCBleHBsaWNp
dGx5IGxpc3QgdGhhdCB3b3JrYXJvdW5kLgorCQkgKgorCQkgKiBOb3RlIHRoYXQgdGhlIGltcGxl
bWVudGF0aW9uIGlzIGZ1cnRoZXIgbW9kaWZpZWQgYWNjb3JkaW5nCisJCSAqIHRvIHRoZSBGRl9N
T0RFMiBndWlkYW5jZSBnaXZlbiBieSBXYV8xNjA4MDA4MDg0OmdlbjEyLgorCQkgKiBGRl9NT0RF
MiByZWdpc3RlciB3aWxsIHJldHVybiB0aGUgd3JvbmcgdmFsdWUgd2hlbiByZWFkLgorCQkgKiBU
aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhpcyByZWdpc3RlciBpcyB6ZXJvIGZvciBhbGwgZmllbGRz
CisJCSAqIGFuZCB0aGVyZSBhcmUgbm8gYml0IG1hc2tzLiBTbyBpbnN0ZWFkIG9mIGRvaW5nIGEg
Uk1XLCB3ZQorCQkgKiBzaG91bGQganVzdCB3cml0ZSB0aGUgdmFsdWUgZGlyZWN0bHkuCisJCSAq
LworCQl3YV9hZGQod2FsLAorCQkJRkZfTU9ERTIsCisJCQlGRl9NT0RFMl9URFNfVElNRVJfTUFT
SywKKwkJCUZGX01PREUyX1REU19USU1FUl8xMjgsCisJCQkwKTsKKwl9CisKKwlpZiAoSVNfQUxE
RVJMQUtFX1MoaTkxNSkpCisJCWFkbHNfY3R4X3dvcmthcm91bmRzX2luaXQoZW5naW5lLCB3YWwp
OworCWVsc2UgaWYgKElTX0RHMShpOTE1KSkKIAkJZGcxX2N0eF93b3JrYXJvdW5kc19pbml0KGVu
Z2luZSwgd2FsKTsKIAllbHNlIGlmIChJU19ST0NLRVRMQUtFKGk5MTUpIHx8IElTX1RJR0VSTEFL
RShpOTE1KSkKIAkJdGdsX2N0eF93b3JrYXJvdW5kc19pbml0KGVuZ2luZSwgd2FsKTsKQEAgLTEy
OTQsMTAgKzEzMDgsMTggQEAgZGcxX2d0X3dvcmthcm91bmRzX2luaXQoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUsIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndhbCkKIAkJCSAgICBWU1VOSVRf
Q0xLR0FURV9ESVNfVEdMKTsKIH0KIAorc3RhdGljIHZvaWQKK2FkbHNfZ3Rfd29ya2Fyb3VuZHNf
aW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgc3RydWN0IGk5MTVfd2FfbGlzdCAq
d2FsKQoreworCWdlbjEyX2d0X3dvcmthcm91bmRzX2luaXQoaTkxNSwgd2FsKTsKK30KKwogc3Rh
dGljIHZvaWQKIGd0X2luaXRfd29ya2Fyb3VuZHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUsIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndhbCkKIHsKLQlpZiAoSVNfREcxKGk5MTUpKQorCWlm
IChJU19BTERFUkxBS0VfUyhpOTE1KSkKKwkJYWRsc19ndF93b3JrYXJvdW5kc19pbml0KGk5MTUs
IHdhbCk7CisJZWxzZSBpZiAoSVNfREcxKGk5MTUpKQogCQlkZzFfZ3Rfd29ya2Fyb3VuZHNfaW5p
dChpOTE1LCB3YWwpOwogCWVsc2UgaWYgKElTX1RJR0VSTEFLRShpOTE1KSkKIAkJdGdsX2d0X3dv
cmthcm91bmRzX2luaXQoaTkxNSwgd2FsKTsKQEAgLTE2NzgsNiArMTcwMCwxMSBAQCBzdGF0aWMg
dm9pZCBkZzFfd2hpdGVsaXN0X2J1aWxkKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkK
IAkJCQkgIFJJTkdfRk9SQ0VfVE9fTk9OUFJJVl9BQ0NFU1NfUkQpOwogfQogCitzdGF0aWMgdm9p
ZCBhZGxzX3doaXRlbGlzdF9idWlsZChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCit7
CisJdGdsX3doaXRlbGlzdF9idWlsZChlbmdpbmUpOworfQorCiB2b2lkIGludGVsX2VuZ2luZV9p
bml0X3doaXRlbGlzdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiB7CiAJc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBlbmdpbmUtPmk5MTU7CkBAIC0xNjg1LDcgKzE3MTIs
OSBAQCB2b2lkIGludGVsX2VuZ2luZV9pbml0X3doaXRlbGlzdChzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmUpCiAKIAl3YV9pbml0X3N0YXJ0KHcsICJ3aGl0ZWxpc3QiLCBlbmdpbmUtPm5h
bWUpOwogCi0JaWYgKElTX0RHMShpOTE1KSkKKwlpZiAoSVNfQUxERVJMQUtFX1MoaTkxNSkpCisJ
CWFkbHNfd2hpdGVsaXN0X2J1aWxkKGVuZ2luZSk7CisJZWxzZSBpZiAoSVNfREcxKGk5MTUpKQog
CQlkZzFfd2hpdGVsaXN0X2J1aWxkKGVuZ2luZSk7CiAJZWxzZSBpZiAoSVNfR0VOKGk5MTUsIDEy
KSkKIAkJdGdsX3doaXRlbGlzdF9idWlsZChlbmdpbmUpOwpAQCAtMTc2NiwzNyArMTc5NSwzOCBA
QCByY3NfZW5naW5lX3dhX2luaXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCBzdHJ1
Y3QgaTkxNV93YV9saXN0ICp3YWwpCiAJCQkgICAgVlNVTklUX0NMS0dBVEVfRElTX1RHTCk7CiAJ
fQogCi0JaWYgKElTX0RHMShpOTE1KSB8fCBJU19ST0NLRVRMQUtFKGk5MTUpIHx8IElTX1RJR0VS
TEFLRShpOTE1KSkgewotCQkvKiBXYV8xNjA2OTMxNjAxOnRnbCxya2wsZGcxICovCisJaWYgKElT
X0FMREVSTEFLRV9TKGk5MTUpIHx8IElTX0RHMShpOTE1KSB8fAorCSAgICBJU19ST0NLRVRMQUtF
KGk5MTUpIHx8IElTX1RJR0VSTEFLRShpOTE1KSkgeworCQkvKiBXYV8xNjA2OTMxNjAxOnRnbCxy
a2wsZGcxLGFkbC1zICovCiAJCXdhX21hc2tlZF9lbih3YWwsIEdFTjdfUk9XX0NISUNLRU4yLCBH
RU4xMl9ESVNBQkxFX0VBUkxZX1JFQUQpOwogCiAJCS8qCiAJCSAqIFdhXzE0MDc5Mjg5Nzk6dGds
IEEqCiAJCSAqIFdhXzE4MDExNDY0MTY0OnRnbFtCMCtdLGRnMVtCMCtdCiAJCSAqIFdhXzIyMDEw
OTMxMjk2OnRnbFtCMCtdLGRnMVtCMCtdCi0JCSAqIFdhXzE0MDEwOTE5MTM4OnJrbCwgZGcxCisJ
CSAqIFdhXzE0MDEwOTE5MTM4OnJrbCxkZzEsYWRsLXMKIAkJICovCiAJCXdhX3dyaXRlX29yKHdh
bCwgR0VON19GRl9USFJFQURfTU9ERSwKIAkJCSAgICBHRU4xMl9GRl9URVNTRUxBVElPTl9ET1Bf
R0FURV9ESVNBQkxFKTsKIAogCQkvKgogCQkgKiBXYV8xNjA2NzAwNjE3OnRnbCxkZzEKLQkJICog
V2FfMjIwMTAyNzEwMjE6dGdsLHJrbCxkZzEKKwkJICogV2FfMjIwMTAyNzEwMjE6dGdsLHJrbCxk
ZzEsIGFkbC1zCiAJCSAqLwogCQl3YV9tYXNrZWRfZW4od2FsLAogCQkJICAgICBHRU45X0NTX0RF
QlVHX01PREUxLAogCQkJICAgICBGRl9ET1BfQ0xPQ0tfR0FURV9ESVNBQkxFKTsKIAl9CiAKLQlp
ZiAoSVNfREcxX1JFVklEKGk5MTUsIERHMV9SRVZJRF9BMCwgREcxX1JFVklEX0EwKSB8fAorCWlm
IChJU19BTERFUkxBS0VfUyhpOTE1KSB8fCBJU19ERzFfUkVWSUQoaTkxNSwgREcxX1JFVklEX0Ew
LCBERzFfUkVWSURfQTApIHx8CiAJICAgIElTX1JPQ0tFVExBS0UoaTkxNSkgfHwgSVNfVElHRVJM
QUtFKGk5MTUpKSB7Ci0JCS8qIFdhXzE0MDk4MDQ4MDg6dGdsLHJrbCxkZzFbYTBdICovCisJCS8q
IFdhXzE0MDk4MDQ4MDg6dGdsLHJrbCxkZzFbYTBdLGFkbC1zICovCiAJCXdhX21hc2tlZF9lbih3
YWwsIEdFTjdfUk9XX0NISUNLRU4yLAogCQkJICAgICBHRU4xMl9QVVNIX0NPTlNUX0RFUkVGX0hP
TERfRElTKTsKIAogCQkvKgogCQkgKiBXYV8xNDA5MDg1MjI1OnRnbAotCQkgKiBXYV8xNDAxMDIy
OTIwNjp0Z2wscmtsLGRnMVthMF0KKwkJICogV2FfMTQwMTAyMjkyMDY6dGdsLHJrbCxkZzFbYTBd
LGFkbC1zCiAJCSAqLwogCQl3YV9tYXNrZWRfZW4od2FsLCBHRU45X1JPV19DSElDS0VONCwgR0VO
MTJfRElTQUJMRV9URExfUFVTSCk7CiAKQEAgLTE4MTAsMTAgKzE4NDAsMTEgQEAgcmNzX2VuZ2lu
ZV93YV9pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgc3RydWN0IGk5MTVfd2Ff
bGlzdCAqd2FsKQogCQkgKiBpdCBhcHBsaWVzIHRvIGFsbCBzdGVwcGluZ3Mgc28gd2UgdHJ1c3Qg
dGhlICJhbGwgc3RlcHBpbmdzLiIKIAkJICogRm9yIERHMSB0aGlzIG9ubHkgYXBwbGllcyB0byBB
MC4KIAkJICovCi0JCXdhX21hc2tlZF9lbih3YWwsCi0JCQkgICAgIEdFTjZfUkNfU0xFRVBfUFNN
SV9DT05UUk9MLAotCQkJICAgICBHRU4xMl9XQUlUX0ZPUl9FVkVOVF9QT1dFUl9ET1dOX0RJU0FC
TEUgfAotCQkJICAgICBHRU44X1JDX1NFTUFfSURMRV9NU0dfRElTQUJMRSk7CisJCWlmICghSVNf
QUxERVJMQUtFX1MoaTkxNSkpCisJCQl3YV9tYXNrZWRfZW4od2FsLAorCQkJCSAgICAgR0VONl9S
Q19TTEVFUF9QU01JX0NPTlRST0wsCisJCQkJICAgICBHRU4xMl9XQUlUX0ZPUl9FVkVOVF9QT1dF
Ul9ET1dOX0RJU0FCTEUgfAorCQkJCSAgICAgR0VOOF9SQ19TRU1BX0lETEVfTVNHX0RJU0FCTEUp
OwogCX0KIAogCWlmIChJU19HRU4oaTkxNSwgMTIpKSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfZGV2aWNlX2luZm8uYwppbmRleCA3MzEwZTAxOWM2MTEuLjY0YTA5OTU0ZmQ1NCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jCkBAIC0zOTQsNyArMzk0LDExIEBA
IHZvaWQgaW50ZWxfZGV2aWNlX2luZm9fcnVudGltZV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikKIAlzdHJ1Y3QgaW50ZWxfcnVudGltZV9pbmZvICpydW50aW1lID0gUlVO
VElNRV9JTkZPKGRldl9wcml2KTsKIAllbnVtIHBpcGUgcGlwZTsKIAotCWlmIChJTlRFTF9HRU4o
ZGV2X3ByaXYpID49IDEwKSB7CisJLyogV2FfMTQwMTE3NjUyNDI6IGFkbC1zIEEwICovCisJaWYg
KElTX0FETFNfRElTUF9SRVZJRChkZXZfcHJpdiwgUkVWSURfQTAsIFJFVklEX0EwKSkKKwkJZm9y
X2VhY2hfcGlwZShkZXZfcHJpdiwgcGlwZSkKKwkJCXJ1bnRpbWUtPm51bV9zY2FsZXJzW3BpcGVd
ID0gMDsKKwllbHNlIGlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDEwKSB7CiAJCWZvcl9lYWNo
X3BpcGUoZGV2X3ByaXYsIHBpcGUpCiAJCQlydW50aW1lLT5udW1fc2NhbGVyc1twaXBlXSA9IDI7
CiAJfSBlbHNlIGlmIChJU19HRU4oZGV2X3ByaXYsIDkpKSB7Ci0tIAoyLjI3LjAKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5n
IGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

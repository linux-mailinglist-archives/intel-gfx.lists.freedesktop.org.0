Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D3C8216475
	for <lists+intel-gfx@lfdr.de>; Tue,  7 May 2019 15:20:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5918C89C25;
	Tue,  7 May 2019 13:20:57 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0264389C25
 for <intel-gfx@lists.freedesktop.org>; Tue,  7 May 2019 13:20:55 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 16477200-1500050 for multiple; Tue, 07 May 2019 14:14:03 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20190503115225.30831-1-chris@chris-wilson.co.uk>
 <20190503115225.30831-12-chris@chris-wilson.co.uk>
 <602e3ddb-cd81-06f3-b6b0-2581b4199dcf@linux.intel.com>
In-Reply-To: <602e3ddb-cd81-06f3-b6b0-2581b4199dcf@linux.intel.com>
Message-ID: <155723484120.2489.9311580428082688600@skylake-alporthouse-com>
Date: Tue, 07 May 2019 14:14:01 +0100
Subject: Re: [Intel-gfx] [PATCH 12/13] drm/i915: Bump signaler priority on
 adding a waiter
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBUdnJ0a28gVXJzdWxpbiAoMjAxOS0wNS0wNyAxMzo0Njo0NSkKPiAKPiBPbiAwMy8w
NS8yMDE5IDEyOjUyLCBDaHJpcyBXaWxzb24gd3JvdGU6Cj4gPiBUaGUgaGFuZGxpbmcgb2YgdGhl
IG5vLXByZWVtcHRpb24gcHJpb3JpdHkgbGV2ZWwgaW1wb3NlcyB0aGUgcmVzdHJpY3Rpb24KPiA+
IHRoYXQgd2UgbmVlZCB0byBtYWludGFpbiB0aGUgaW1wbGllZCBvcmRlcmluZyBldmVuIHRob3Vn
aCBwcmVlbXB0aW9uIGlzCj4gPiBkaXNhYmxlZC4gT3RoZXJ3aXNlIHdlIG1heSBlbmQgdXAgd2l0
aCBhbiBBQi1CQSBkZWFkbG9jayBhY3Jvc3MgbXVsdGlwbGUKPiA+IGVuZ2luZSBkdWUgdG8gYSBy
ZWFsIHByZWVtcHRpb24gZXZlbnQgcmVvcmRlcmluZyB0aGUgbm8tcHJlZW1wdGlvbgo+ID4gV0FJ
VHMuIFRvIHJlc29sdmUgdGhpcyBpc3N1ZSB3ZSBjdXJyZW50bHkgcHJvbW90ZSBhbGwgcmVxdWVz
dHMgdG8gV0FJVAo+ID4gb24gdW5zdWJtaXNzaW9uLCBob3dldmVyIHRoaXMgaW50ZXJmZXJlcyB3
aXRoIHRoZSB0aW1lc2xpY2luZwo+ID4gcmVxdWlyZW1lbnQgdGhhdCB3ZSBkbyBub3QgYXBwbHkg
YW55IGltcGxpY2l0IHByb21vdGlvbiB0aGF0IHdpbGwgZGVmZWF0Cj4gPiB0aGUgcm91bmQtcm9i
aW4gdGltZXNsaWNlIGxpc3QuIChJZiB3ZSBhdXRvbWF0aWNhbGx5IHByb21vdGUgdGhlIGFjdGl2
ZQo+ID4gcmVxdWVzdCBpdCB3aWxsIGdvIGJhY2sgdG8gdGhlIGhlYWQgb2YgdGhlIHF1ZXVlIGFu
ZCBub3QgdGhlIHRhaWwhKQo+ID4gCj4gPiBTbyB3ZSBuZWVkIGltcGxpY2l0IHByb21vdGlvbiB0
byBwcmV2ZW50IHJlb3JkZXJpbmcgYXJvdW5kIHNlbWFwaG9yZXMKPiA+IHdoZXJlIHdlIGFyZSBu
b3QgYWxsb3dlZCB0byBwcmVlbXB0LCBhbmQgd2UgbXVzdCBhdm9pZCBpbXBsaWNpdAo+ID4gcHJv
bW90aW9uIG9uIHVuc3VibWlzc2lvbi4gU28gaW5zdGVhZCBvZiBhdCB1bnN1Ym1pdCwgaWYgd2Ug
YXBwbHkgdGhhdAo+ID4gaW1wbGljaXQgcHJvbW90aW9uIG9uIGFkZGluZyB0aGUgZGVwZW5kZW5j
eSwgd2UgYXZvaWQgdGhlIHNlbWFwaG9yZQo+ID4gZGVhZGxvY2sgYW5kIHdlIGFsc28gcmVkdWNl
IHRoZSBnYWlucyBtYWRlIGJ5IHRoZSBwcm9tb3Rpb24gZm9yIHVzZXIKPiA+IHNwYWNlIHdhaXRp
bmcuIEZ1cnRoZXJtb3JlLCBieSBrZWVwaW5nIHRoZSBlYXJsaWVyIGRlcGVuZGVuY2llcyBhdCBh
Cj4gPiBoaWdoZXIgbGV2ZWwsIHdlIHJlZHVjZSB0aGUgc2VhcmNoIHNwYWNlIGZvciB0aW1lc2xp
Y2luZyB3aXRob3V0Cj4gPiBhbHRlcmluZyBydW50aW1lIHNjaGVkdWxpbmcgdG9vIGJhZGx5IChu
byBkZXBlbmRlbmNpZXMgYXQgYWxsIHdpbGwgYmUKPiA+IGFzc2lnbmVkIGEgaGlnaGVyIHByaW9y
aXR5IGZvciBycnVsKS4KPiA+IAo+ID4gdjI6IExpbWl0IHRoZSBidW1wIHRvIGV4dGVybmFsIGVk
Z2VzIChhcyBvcmlnaW5hbGx5IGludGVuZGVkKSBpLmUuCj4gPiBiZXR3ZWVuIGNvbnRleHRzIGFu
ZCBvdXQgdG8gdGhlIHVzZXIuCj4gPiAKPiA+IFRlc3RjYXNlOiBpZ3QvZ2VtX2NvbmN1cnJlbnRf
YmxpdAo+ID4gU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24u
Y28udWs+Cj4gPiAtLS0KPiA+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJj
LmMgICAgICB8IDEyICsrKysrKysrLS0tLQo+ID4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X3JlcXVlc3QuYyAgICAgICAgIHwgIDkgLS0tLS0tLS0tCj4gPiAgIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfc2NoZWR1bGVyLmMgICAgICAgfCAxMSArKysrKysrKysrKwo+ID4gICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxlcl90eXBlcy5oIHwgIDMgKystCj4gPiAgIDQgZmls
ZXMgY2hhbmdlZCwgMjEgaW5zZXJ0aW9ucygrKSwgMTQgZGVsZXRpb25zKC0pCj4gPiAKPiA+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xyYy5jCj4gPiBpbmRleCA0YjA0Mjg5M2RjMGUu
LjViM2Q4ZTMzZjFjZiAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X2xyYy5jCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9s
cmMuYwo+ID4gQEAgLTk4LDEyICs5OCwxNCBAQCBzdGF0aWMgaW50IGxpdmVfYnVzeXdhaXRfcHJl
ZW1wdCh2b2lkICphcmcpCj4gPiAgICAgICBjdHhfaGkgPSBrZXJuZWxfY29udGV4dChpOTE1KTsK
PiA+ICAgICAgIGlmICghY3R4X2hpKQo+ID4gICAgICAgICAgICAgICBnb3RvIGVycl91bmxvY2s7
Cj4gPiAtICAgICBjdHhfaGktPnNjaGVkLnByaW9yaXR5ID0gSU5UX01BWDsKPiA+ICsgICAgIGN0
eF9oaS0+c2NoZWQucHJpb3JpdHkgPQo+ID4gKyAgICAgICAgICAgICBJOTE1X1VTRVJfUFJJT1JJ
VFkoSTkxNV9DT05URVhUX01BWF9VU0VSX1BSSU9SSVRZKTsKPiA+ICAgCj4gPiAgICAgICBjdHhf
bG8gPSBrZXJuZWxfY29udGV4dChpOTE1KTsKPiA+ICAgICAgIGlmICghY3R4X2xvKQo+ID4gICAg
ICAgICAgICAgICBnb3RvIGVycl9jdHhfaGk7Cj4gPiAtICAgICBjdHhfbG8tPnNjaGVkLnByaW9y
aXR5ID0gSU5UX01JTjsKPiA+ICsgICAgIGN0eF9sby0+c2NoZWQucHJpb3JpdHkgPQo+ID4gKyAg
ICAgICAgICAgICBJOTE1X1VTRVJfUFJJT1JJVFkoSTkxNV9DT05URVhUX01JTl9VU0VSX1BSSU9S
SVRZKTsKPiA+ICAgCj4gPiAgICAgICBvYmogPSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX2ludGVy
bmFsKGk5MTUsIFBBR0VfU0laRSk7Cj4gPiAgICAgICBpZiAoSVNfRVJSKG9iaikpIHsKPiA+IEBA
IC05NTgsMTIgKzk2MCwxNCBAQCBzdGF0aWMgaW50IGxpdmVfcHJlZW1wdF9oYW5nKHZvaWQgKmFy
ZykKPiA+ICAgICAgIGN0eF9oaSA9IGtlcm5lbF9jb250ZXh0KGk5MTUpOwo+ID4gICAgICAgaWYg
KCFjdHhfaGkpCj4gPiAgICAgICAgICAgICAgIGdvdG8gZXJyX3NwaW5fbG87Cj4gPiAtICAgICBj
dHhfaGktPnNjaGVkLnByaW9yaXR5ID0gSTkxNV9DT05URVhUX01BWF9VU0VSX1BSSU9SSVRZOwo+
ID4gKyAgICAgY3R4X2hpLT5zY2hlZC5wcmlvcml0eSA9Cj4gPiArICAgICAgICAgICAgIEk5MTVf
VVNFUl9QUklPUklUWShJOTE1X0NPTlRFWFRfTUFYX1VTRVJfUFJJT1JJVFkpOwo+ID4gICAKPiA+
ICAgICAgIGN0eF9sbyA9IGtlcm5lbF9jb250ZXh0KGk5MTUpOwo+ID4gICAgICAgaWYgKCFjdHhf
bG8pCj4gPiAgICAgICAgICAgICAgIGdvdG8gZXJyX2N0eF9oaTsKPiA+IC0gICAgIGN0eF9sby0+
c2NoZWQucHJpb3JpdHkgPSBJOTE1X0NPTlRFWFRfTUlOX1VTRVJfUFJJT1JJVFk7Cj4gPiArICAg
ICBjdHhfbG8tPnNjaGVkLnByaW9yaXR5ID0KPiA+ICsgICAgICAgICAgICAgSTkxNV9VU0VSX1BS
SU9SSVRZKEk5MTVfQ09OVEVYVF9NSU5fVVNFUl9QUklPUklUWSk7Cj4gPiAgIAo+ID4gICAgICAg
Zm9yX2VhY2hfZW5naW5lKGVuZ2luZSwgaTkxNSwgaWQpIHsKPiA+ICAgICAgICAgICAgICAgc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcnE7Cj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9yZXF1ZXN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYwo+
ID4gaW5kZXggOGNiM2VkNTUzMWUzLi4wNjVkYTFiY2JiNGMgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYwo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9yZXF1ZXN0LmMKPiA+IEBAIC00NjgsMTUgKzQ2OCw2IEBAIHZvaWQgX19pOTE1
X3JlcXVlc3RfdW5zdWJtaXQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCkKPiA+ICAgICAg
IC8qIFdlIG1heSBiZSByZWN1cnNpbmcgZnJvbSB0aGUgc2lnbmFsIGNhbGxiYWNrIG9mIGFub3Ro
ZXIgaTkxNSBmZW5jZSAqLwo+ID4gICAgICAgc3Bpbl9sb2NrX25lc3RlZCgmcmVxdWVzdC0+bG9j
aywgU0lOR0xFX0RFUFRIX05FU1RJTkcpOwo+ID4gICAKPiA+IC0gICAgIC8qCj4gPiAtICAgICAg
KiBBcyB3ZSBkbyBub3QgYWxsb3cgV0FJVCB0byBwcmVlbXB0IGluZmxpZ2h0IHJlcXVlc3RzLAo+
ID4gLSAgICAgICogb25jZSB3ZSBoYXZlIGV4ZWN1dGVkIGEgcmVxdWVzdCwgYWxvbmcgd2l0aCB0
cmlnZ2VyaW5nCj4gPiAtICAgICAgKiBhbnkgZXhlY3V0aW9uIGNhbGxiYWNrcywgd2UgbXVzdCBw
cmVzZXJ2ZSBpdHMgb3JkZXJpbmcKPiA+IC0gICAgICAqIHdpdGhpbiB0aGUgbm9uLXByZWVtcHRp
YmxlIEZJRk8uCj4gPiAtICAgICAgKi8KPiA+IC0gICAgIEJVSUxEX0JVR19PTihfX05PX1BSRUVN
UFRJT04gJiB+STkxNV9QUklPUklUWV9NQVNLKTsgLyogb25seSBpbnRlcm5hbCAqLwo+ID4gLSAg
ICAgcmVxdWVzdC0+c2NoZWQuYXR0ci5wcmlvcml0eSB8PSBfX05PX1BSRUVNUFRJT047Cj4gPiAt
Cj4gPiAgICAgICBpZiAodGVzdF9iaXQoRE1BX0ZFTkNFX0ZMQUdfRU5BQkxFX1NJR05BTF9CSVQs
ICZyZXF1ZXN0LT5mZW5jZS5mbGFncykpCj4gPiAgICAgICAgICAgICAgIGk5MTVfcmVxdWVzdF9j
YW5jZWxfYnJlYWRjcnVtYihyZXF1ZXN0KTsKPiA+ICAgCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9zY2hlZHVsZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfc2NoZWR1bGVyLmMKPiA+IGluZGV4IDM4MGNiNzM0M2ExMC4uZmYwY2E1NzE4Zjk3IDEwMDY0
NAo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2hlZHVsZXIuYwo+ID4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2hlZHVsZXIuYwo+ID4gQEAgLTM5MSw2ICsz
OTEsMTYgQEAgYm9vbCBfX2k5MTVfc2NoZWRfbm9kZV9hZGRfZGVwZW5kZW5jeShzdHJ1Y3QgaTkx
NV9zY2hlZF9ub2RlICpub2RlLAo+ID4gICAgICAgICAgICAgICAgICAgIW5vZGVfc3RhcnRlZChz
aWduYWwpKQo+ID4gICAgICAgICAgICAgICAgICAgICAgIG5vZGUtPmZsYWdzIHw9IEk5MTVfU0NI
RURfSEFTX1NFTUFQSE9SRV9DSEFJTjsKPiA+ICAgCj4gPiArICAgICAgICAgICAgIC8qCj4gPiAr
ICAgICAgICAgICAgICAqIEFzIHdlIGRvIG5vdCBhbGxvdyBXQUlUIHRvIHByZWVtcHQgaW5mbGln
aHQgcmVxdWVzdHMsCj4gPiArICAgICAgICAgICAgICAqIG9uY2Ugd2UgaGF2ZSBleGVjdXRlZCBh
IHJlcXVlc3QsIGFsb25nIHdpdGggdHJpZ2dlcmluZwo+ID4gKyAgICAgICAgICAgICAgKiBhbnkg
ZXhlY3V0aW9uIGNhbGxiYWNrcywgd2UgbXVzdCBwcmVzZXJ2ZSBpdHMgb3JkZXJpbmcKPiA+ICsg
ICAgICAgICAgICAgICogd2l0aGluIHRoZSBub24tcHJlZW1wdGlibGUgRklGTy4KPiA+ICsgICAg
ICAgICAgICAgICovCj4gPiArICAgICAgICAgICAgIEJVSUxEX0JVR19PTihfX05PX1BSRUVNUFRJ
T04gJiB+STkxNV9QUklPUklUWV9NQVNLKTsKPiA+ICsgICAgICAgICAgICAgaWYgKGZsYWdzICYg
STkxNV9ERVBFTkRFTkNZX0VYVEVSTkFMKQo+ID4gKyAgICAgICAgICAgICAgICAgICAgIF9fYnVt
cF9wcmlvcml0eShzaWduYWwsIF9fTk9fUFJFRU1QVElPTik7Cj4gPiArCj4gCj4gSSBkb24ndCBy
ZWFsbHkgZm9sbG93IGhvdyBjYW4gdGhpcyBiZSBva2F5IGZyb20gaGVyZS4gSXQgZ2l2ZXMgd2Fp
dCAKPiBwcmlvcml0eSB0byBldmVyeSByZXF1ZXN0IHdoaWNoIGhhcyBhIGRlcGVuZGVuY3kgbm93
LiBXaGljaCBzb3VuZHMgbm90IAo+IGZhciBvZmYgZnJvbSByZW1vdmluZyB0aGUgcHJpb3JpdHkg
YnVtcCBmb3Igd2FpdGVycyBhbHRvZ2V0aGVyLiBPciAKPiByZXZlcnNpbmcgdGhpbmdzIGFuZCBn
aXZpbmcgcmVxdWVzdHMgd2l0aCBubyBwcmlvcml0eSBhIGJvb3N0LgoKSXQgdHJlYXRzIGV2ZW4g
aW50ZXItY29udGV4dCB3YWl0IGVxdWFsbHksIGFuZCBzbyByZWR1Y2VzIHRoZSBlZmZlY3Qgb2YK
dGhlIHVzZXIgd2FpdCBmcm9tIHRoZSB3YWl0L3NldC1kb21haW4gaW9jdGwgYW5kIGluc3RlYWQg
aW5jbHVkZXMgYWxsCnRoZSB3YWl0cyB0aGV5IHN1cHBseSBkdXJpbmcgZXhlY2J1Zi4KCkl0IGFs
bCBzdGVtcyBmcm9tIHRoZSB3YXkgdGhvc2UgcHJpb3JpdGllcyBhcmUgaWdub3JlZCBmb3IgcHJl
ZW1wdGlvbi4KQ3VycmVudGx5IHdlIHBlcmZvcm0gdGhlIHNhbWUgYm9vc3QgaW1wbGljaXRseSB0
byBhbGwgcnVubmluZyByZXF1ZXN0cywKd2hpY2ggc2NyZXdzIHVwIHRpbWVzbGljaW5nLCBzbyBp
bnN0ZWFkIG9mIGRvaW5nIGl0IG9uIHRoZSBydW5uaW5nCnJlcXVlc3Qgd2UgYXBwbHkgaXQgdG8g
dGhlIHF1ZXVlIGFuZCBsaW1pdCBpdCB0byBqdXN0IHRoZSBlZGdlcyB0aGF0IGFyZQpzdXNjZXB0
aWJsZSB0byBkZWFkbG9ja3MgKHNvIGluIGVmZmVjdCB3ZSBhcmUgcmVkdWNpbmcgdGhlIG51bWJl
ciBvZgpyZXF1ZXN0cyB0aGF0IGhhdmUgdGhlIGltcGxpY2l0IGJvb3N0KS4KLUNocmlzCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWls
aW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

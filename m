Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 328234C4B3
	for <lists+intel-gfx@lfdr.de>; Thu, 20 Jun 2019 03:00:49 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1FA8C6E4A7;
	Thu, 20 Jun 2019 01:00:46 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 24CF66E4A2
 for <intel-gfx@lists.freedesktop.org>; Thu, 20 Jun 2019 01:00:45 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 19 Jun 2019 18:00:44 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,394,1557212400"; d="scan'208";a="150774369"
Received: from dceraolo-linux.fm.intel.com ([10.1.27.145])
 by orsmga007.jf.intel.com with ESMTP; 19 Jun 2019 18:00:44 -0700
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 19 Jun 2019 18:00:18 -0700
Message-Id: <20190620010021.20637-4-daniele.ceraolospurio@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190620010021.20637-1-daniele.ceraolospurio@intel.com>
References: <20190620010021.20637-1-daniele.ceraolospurio@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 3/6] drm/i915: kill uncore_to_i915
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TGV0J3MgZ2V0IHJpZCBvZiBpdCBiZWZvcmUgaXQgcHJvbGlmZXJhdGVzLCBzaW5jZSB3aXRoIHNw
bGl0IEdUL0Rpc3BsYXkKdW5jb3JlcyB0aGUgY29udGFpbmVyX29mIHdvbid0IHdvcmsgYW55bW9y
ZS4KCkkndmUga2VwdCB0aGUgcnBtIHBvaW50ZXIgYXMgd2VsbCB0byBtaW5pbWl6ZSB0aGUgcG9p
bnRlciBjaGFzaW5nIGluIHRoZQpNTUlPIGFjY2Vzc29ycy4KCnYyOiBzd2FwIHBhcmFtZXRlciBv
cmRlciBmb3IgaW50ZWxfdW5jb3JlX2luaXRfZWFybHkgKFR2cnRrbykKClNpZ25lZC1vZmYtYnk6
IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5jb20+
ClJldmlld2VkLWJ5OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgot
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgICAgIHwgIDIgKy0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgIHwgIDUgLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2ludGVsX3VuY29yZS5jIHwgMjQgKysrKysrKysrKysrLS0tLS0tLS0tLS0tCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuaCB8ICA0ICsrKy0KIDQgZmlsZXMgY2hhbmdlZCwg
MTYgaW5zZXJ0aW9ucygrKSwgMTkgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMK
aW5kZXggNDU4Nzg0ZmQ1NTZlLi4wMGI2NTEyY2RlZTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYu
YwpAQCAtOTAwLDcgKzkwMCw3IEBAIHN0YXRpYyBpbnQgaTkxNV9kcml2ZXJfaW5pdF9lYXJseShz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAKIAlpbnRlbF9kZXZpY2VfaW5mb19z
dWJwbGF0Zm9ybV9pbml0KGRldl9wcml2KTsKIAotCWludGVsX3VuY29yZV9pbml0X2Vhcmx5KCZk
ZXZfcHJpdi0+dW5jb3JlKTsKKwlpbnRlbF91bmNvcmVfaW5pdF9lYXJseSgmZGV2X3ByaXYtPnVu
Y29yZSwgZGV2X3ByaXYpOwogCiAJc3Bpbl9sb2NrX2luaXQoJmRldl9wcml2LT5pcnFfbG9jayk7
CiAJc3Bpbl9sb2NrX2luaXQoJmRldl9wcml2LT5ncHVfZXJyb3IubG9jayk7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kcnYuaAppbmRleCBiYzkwOWVjNWQ5YzMuLjI3MzRmNjJhYjE5YSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Rydi5oCkBAIC0xOTUwLDExICsxOTUwLDYgQEAgc3RhdGljIGlubGluZSBzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqaHVjX3RvX2k5MTUoc3RydWN0IGludGVsX2h1YyAqaHVjKQogCXJl
dHVybiBjb250YWluZXJfb2YoaHVjLCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSwgaHVjKTsKIH0K
IAotc3RhdGljIGlubGluZSBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqdW5jb3JlX3RvX2k5MTUo
c3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlKQotewotCXJldHVybiBjb250YWluZXJfb2YodW5j
b3JlLCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSwgdW5jb3JlKTsKLX0KLQogLyogU2ltcGxlIGl0
ZXJhdG9yIG92ZXIgYWxsIGluaXRpYWxpc2VkIGVuZ2luZXMgKi8KICNkZWZpbmUgZm9yX2VhY2hf
ZW5naW5lKGVuZ2luZV9fLCBkZXZfcHJpdl9fLCBpZF9fKSBcCiAJZm9yICgoaWRfXykgPSAwOyBc
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5jCmluZGV4IDYzYmRhZGFjYWRjYy4uNTljYjI1
ODMxMmEyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuYwpAQCAtMzIyLDcgKzMyMiw3
IEBAIHN0YXRpYyB2b2lkIF9fZ2VuNl9ndF93YWl0X2Zvcl9maWZvKHN0cnVjdCBpbnRlbF91bmNv
cmUgKnVuY29yZSkKIAogCS8qIE9uIFZMViwgRklGTyB3aWxsIGJlIHNoYXJlZCBieSBib3RoIFNX
IGFuZCBIVy4KIAkgKiBTbywgd2UgbmVlZCB0byByZWFkIHRoZSBGUkVFX0VOVFJJRVMgZXZlcnl0
aW1lICovCi0JaWYgKElTX1ZBTExFWVZJRVcodW5jb3JlX3RvX2k5MTUodW5jb3JlKSkpCisJaWYg
KElTX1ZBTExFWVZJRVcodW5jb3JlLT5pOTE1KSkKIAkJbiA9IGZpZm9fZnJlZV9lbnRyaWVzKHVu
Y29yZSk7CiAJZWxzZQogCQluID0gdW5jb3JlLT5maWZvX2NvdW50OwpAQCAtNDkzLDcgKzQ5Myw3
IEBAIHN0YXRpYyB2b2lkIF9faW50ZWxfdW5jb3JlX2Vhcmx5X3Nhbml0aXplKHN0cnVjdCBpbnRl
bF91bmNvcmUgKnVuY29yZSwKIAkJRFJNX0RFQlVHKCJ1bmNsYWltZWQgbW1pbyBkZXRlY3RlZCBv
biB1bmNvcmUgaW5pdCwgY2xlYXJpbmdcbiIpOwogCiAJLyogV2FEaXNhYmxlU2hhZG93UmVnRm9y
Q3BkOmNodiAqLwotCWlmIChJU19DSEVSUllWSUVXKHVuY29yZV90b19pOTE1KHVuY29yZSkpKSB7
CisJaWYgKElTX0NIRVJSWVZJRVcodW5jb3JlLT5pOTE1KSkgewogCQlfX3Jhd191bmNvcmVfd3Jp
dGUzMih1bmNvcmUsIEdURklGT0NUTCwKIAkJCQkgICAgIF9fcmF3X3VuY29yZV9yZWFkMzIodW5j
b3JlLCBHVEZJRk9DVEwpIHwKIAkJCQkgICAgIEdUX0ZJRk9fQ1RMX0JMT0NLX0FMTF9QT0xJQ1lf
U1RBTEwgfApAQCAtNjIyLDcgKzYyMiw3IEBAIHZvaWQgaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV91
c2VyX3B1dChzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUpCiAJc3Bpbl9sb2NrX2lycSgmdW5j
b3JlLT5sb2NrKTsKIAlpZiAoIS0tdW5jb3JlLT51c2VyX2ZvcmNld2FrZS5jb3VudCkgewogCQlp
ZiAoaW50ZWxfdW5jb3JlX3VuY2xhaW1lZF9tbWlvKHVuY29yZSkpCi0JCQlkZXZfaW5mbyh1bmNv
cmVfdG9faTkxNSh1bmNvcmUpLT5kcm0uZGV2LAorCQkJZGV2X2luZm8odW5jb3JlLT5pOTE1LT5k
cm0uZGV2LAogCQkJCSAiSW52YWxpZCBtbWlvIGRldGVjdGVkIGR1cmluZyB1c2VyIGFjY2Vzc1xu
Iik7CiAKIAkJdW5jb3JlLT51bmNsYWltZWRfbW1pb19jaGVjayA9CkBAIC0xMzQ2LDcgKzEzNDYs
NyBAQCBzdGF0aWMgdm9pZCBmd19kb21haW5fZmluaShzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNv
cmUsCiAKIHN0YXRpYyB2b2lkIGludGVsX3VuY29yZV9md19kb21haW5zX2luaXQoc3RydWN0IGlu
dGVsX3VuY29yZSAqdW5jb3JlKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0g
dW5jb3JlX3RvX2k5MTUodW5jb3JlKTsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9
IHVuY29yZS0+aTkxNTsKIAogCWlmICghaW50ZWxfdW5jb3JlX2hhc19mb3JjZXdha2UodW5jb3Jl
KSkKIAkJcmV0dXJuOwpAQCAtMTQ5OSw3ICsxNDk5LDcgQEAgc3RhdGljIGludCBpOTE1X3BtaWNf
YnVzX2FjY2Vzc19ub3RpZmllcihzdHJ1Y3Qgbm90aWZpZXJfYmxvY2sgKm5iLAogCiBzdGF0aWMg
aW50IHVuY29yZV9tbWlvX3NldHVwKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSkKIHsKLQlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHVuY29yZV90b19pOTE1KHVuY29yZSk7CisJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB1bmNvcmUtPmk5MTU7CiAJc3RydWN0IHBj
aV9kZXYgKnBkZXYgPSBpOTE1LT5kcm0ucGRldjsKIAlpbnQgbW1pb19iYXI7CiAJaW50IG1taW9f
c2l6ZTsKQEAgLTE1MjksMjAgKzE1MjksMjIgQEAgc3RhdGljIGludCB1bmNvcmVfbW1pb19zZXR1
cChzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUpCiAKIHN0YXRpYyB2b2lkIHVuY29yZV9tbWlv
X2NsZWFudXAoc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlKQogewotCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1ID0gdW5jb3JlX3RvX2k5MTUodW5jb3JlKTsKLQlzdHJ1Y3QgcGNpX2Rl
diAqcGRldiA9IGk5MTUtPmRybS5wZGV2OworCXN0cnVjdCBwY2lfZGV2ICpwZGV2ID0gdW5jb3Jl
LT5pOTE1LT5kcm0ucGRldjsKIAogCXBjaV9pb3VubWFwKHBkZXYsIHVuY29yZS0+cmVncyk7CiB9
CiAKLXZvaWQgaW50ZWxfdW5jb3JlX2luaXRfZWFybHkoc3RydWN0IGludGVsX3VuY29yZSAqdW5j
b3JlKQordm9pZCBpbnRlbF91bmNvcmVfaW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1
bmNvcmUsCisJCQkgICAgIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewogCXNwaW5f
bG9ja19pbml0KCZ1bmNvcmUtPmxvY2spOworCXVuY29yZS0+aTkxNSA9IGk5MTU7CisJdW5jb3Jl
LT5ycG0gPSAmaTkxNS0+cnVudGltZV9wbTsKIH0KIAogaW50IGludGVsX3VuY29yZV9pbml0X21t
aW8oc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlKQogewotCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1ID0gdW5jb3JlX3RvX2k5MTUodW5jb3JlKTsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSA9IHVuY29yZS0+aTkxNTsKIAlpbnQgcmV0OwogCiAJcmV0ID0gdW5jb3JlX21t
aW9fc2V0dXAodW5jb3JlKTsKQEAgLTE1NjEsOCArMTU2Myw2IEBAIGludCBpbnRlbF91bmNvcmVf
aW5pdF9tbWlvKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSkKIAl1bmNvcmUtPnBtaWNfYnVz
X2FjY2Vzc19uYi5ub3RpZmllcl9jYWxsID0KIAkJaTkxNV9wbWljX2J1c19hY2Nlc3Nfbm90aWZp
ZXI7CiAKLQl1bmNvcmUtPnJwbSA9ICZpOTE1LT5ydW50aW1lX3BtOwotCiAJaWYgKCFpbnRlbF91
bmNvcmVfaGFzX2ZvcmNld2FrZSh1bmNvcmUpKSB7CiAJCWlmIChJU19HRU4oaTkxNSwgNSkpIHsK
IAkJCUFTU0lHTl9SQVdfV1JJVEVfTU1JT19WRlVOQ1ModW5jb3JlLCBnZW41KTsKQEAgLTE2Mjcs
NyArMTYyNyw3IEBAIGludCBpbnRlbF91bmNvcmVfaW5pdF9tbWlvKHN0cnVjdCBpbnRlbF91bmNv
cmUgKnVuY29yZSkKICAqLwogdm9pZCBpbnRlbF91bmNvcmVfcHJ1bmVfbW1pb19kb21haW5zKHN0
cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSkKIHsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSA9IHVuY29yZV90b19pOTE1KHVuY29yZSk7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUgPSB1bmNvcmUtPmk5MTU7CiAKIAlpZiAoSU5URUxfR0VOKGk5MTUpID49IDExKSB7CiAJ
CWVudW0gZm9yY2V3YWtlX2RvbWFpbnMgZndfZG9tYWlucyA9IHVuY29yZS0+ZndfZG9tYWluczsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfdW5jb3JlLmgKaW5kZXggOTRjMDBkMzc3OGIxLi41OTUwNWEy
ZjkwOTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5oCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5oCkBAIC0xMDIsNiArMTAyLDcg
QEAgc3RydWN0IGludGVsX2ZvcmNld2FrZV9yYW5nZSB7CiBzdHJ1Y3QgaW50ZWxfdW5jb3JlIHsK
IAl2b2lkIF9faW9tZW0gKnJlZ3M7CiAKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNTsK
IAlzdHJ1Y3QgaW50ZWxfcnVudGltZV9wbSAqcnBtOwogCiAJc3BpbmxvY2tfdCBsb2NrOyAvKiog
bG9jayBpcyBhbHNvIHRha2VuIGluIGlycSBjb250ZXh0cy4gKi8KQEAgLTE4Miw3ICsxODMsOCBA
QCBpbnRlbF91bmNvcmVfaGFzX2ZpZm8oY29uc3Qgc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3Jl
KQogCXJldHVybiB1bmNvcmUtPmZsYWdzICYgVU5DT1JFX0hBU19GSUZPOwogfQogCi12b2lkIGlu
dGVsX3VuY29yZV9pbml0X2Vhcmx5KHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSk7Cit2b2lk
IGludGVsX3VuY29yZV9pbml0X2Vhcmx5KHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSwKKwkJ
CSAgICAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwogaW50IGludGVsX3VuY29yZV9p
bml0X21taW8oc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlKTsKIHZvaWQgaW50ZWxfdW5jb3Jl
X3BydW5lX21taW9fZG9tYWlucyhzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUpOwogYm9vbCBp
bnRlbF91bmNvcmVfdW5jbGFpbWVkX21taW8oc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlKTsK
LS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

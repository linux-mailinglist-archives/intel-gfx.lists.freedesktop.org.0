Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5B4B311D3D
	for <lists+intel-gfx@lfdr.de>; Thu,  2 May 2019 17:32:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 92E70894DD;
	Thu,  2 May 2019 15:31:59 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B4D2E894DD
 for <intel-gfx@lists.freedesktop.org>; Thu,  2 May 2019 15:31:58 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 02 May 2019 08:31:58 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.60,422,1549958400"; d="scan'208";a="166951029"
Received: from vandita-desktop.iind.intel.com ([10.223.74.201])
 by fmsmga002.fm.intel.com with ESMTP; 02 May 2019 08:31:56 -0700
From: Vandita Kulkarni <vandita.kulkarni@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu,  2 May 2019 20:40:59 +0530
Message-Id: <1556809862-31203-1-git-send-email-vandita.kulkarni@intel.com>
X-Mailer: git-send-email 1.9.1
Subject: [Intel-gfx] [v5 1/4] drm/i915: Fix the pipe state timing mismatch
 warnings
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com, ville.syrjala@intel.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWRqdXN0IHRoZSBnZXQgdHJhbnNjb2RlciB0aW1pbmdzIGZvciBtaXBpIGRzaSBhcyBwZXIgdGhl
CnNldCB0aW1pbmcgY2FsY3VsYXRpb25zLgoKdjI6IFVzZSB0aGUgZXhpc3RpbmcgaW50ZWxfZ2V0
X3BpcGVfdGltaW5ncyBhbmQgZG8gdGhlIGRzaQogICAgc3BlY2lmaWMgYWRqdXN0bWVudHMgaW4g
dGhlIGVuY29kZXIgZ2V0X2NvbmZpZyBob29rLihWaWxsZSwgSmFuaSkKCnYzOiBFeGNsdWRlIFZC
TEFOSyBhbmQgSEJMQU5LIHJlZ2lzdGVycyBmb3IgZHNpIHRyYW5zY29kZXIuCgp2NDogRml4IHRo
ZSBpbmNvbXBsZXRlIGNvbmRpdGlvbmFsIGxvZ2ljLgoKU2lnbmVkLW9mZi1ieTogVmFuZGl0YSBL
dWxrYXJuaSA8dmFuZGl0YS5rdWxrYXJuaUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvaWNsX2RzaS5jICAgICAgIHwgMjkgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysK
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rpc3BsYXkuYyB8IDIyICsrKysrKysrKysrKysr
KystLS0tLS0KIDIgZmlsZXMgY2hhbmdlZCwgNDUgaW5zZXJ0aW9ucygrKSwgNiBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pY2xfZHNpLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pY2xfZHNpLmMKaW5kZXggYzZlY2MwMC4uNDVmZTY5YyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaWNsX2RzaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2ljbF9kc2kuYwpAQCAtMTE5NCw2ICsxMTk0LDM0IEBAIHN0YXRpYyB2b2lkIGdlbjExX2Rz
aV9kaXNhYmxlKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCWdlbjExX2RzaV9kaXNh
YmxlX2lvX3Bvd2VyKGVuY29kZXIpOwogfQogCitzdGF0aWMgdm9pZCBnZW4xMV9kc2lfZ2V0X3Rp
bWluZ3Moc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCisJCQkJICBzdHJ1Y3QgaW50ZWxf
Y3J0Y19zdGF0ZSAqcGlwZV9jb25maWcpCit7CisJc3RydWN0IGludGVsX2RzaSAqaW50ZWxfZHNp
ID0gZW5jX3RvX2ludGVsX2RzaSgmZW5jb2Rlci0+YmFzZSk7CisJc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKmFkanVzdGVkX21vZGUgPQorCQkJCQkmcGlwZV9jb25maWctPmJhc2UuYWRqdXN0ZWRf
bW9kZTsKKworCWlmIChpbnRlbF9kc2ktPmR1YWxfbGluaykgeworCQlhZGp1c3RlZF9tb2RlLT5j
cnRjX2hkaXNwbGF5ICo9IDI7CisJCWlmIChpbnRlbF9kc2ktPmR1YWxfbGluayA9PSBEU0lfRFVB
TF9MSU5LX0ZST05UX0JBQ0spCisJCQlhZGp1c3RlZF9tb2RlLT5jcnRjX2hkaXNwbGF5IC09CisJ
CQkJCQlpbnRlbF9kc2ktPnBpeGVsX292ZXJsYXA7CisJCWFkanVzdGVkX21vZGUtPmNydGNfaHRv
dGFsICo9IDI7CisJfQorCWFkanVzdGVkX21vZGUtPmNydGNfaGJsYW5rX3N0YXJ0ID0gYWRqdXN0
ZWRfbW9kZS0+Y3J0Y19oZGlzcGxheTsKKwlhZGp1c3RlZF9tb2RlLT5jcnRjX2hibGFua19lbmQg
PSBhZGp1c3RlZF9tb2RlLT5jcnRjX2h0b3RhbDsKKworCWlmIChpbnRlbF9kc2ktPm9wZXJhdGlv
bl9tb2RlID09IElOVEVMX0RTSV9WSURFT19NT0RFKSB7CisJCWlmIChpbnRlbF9kc2ktPmR1YWxf
bGluaykgeworCQkJYWRqdXN0ZWRfbW9kZS0+Y3J0Y19oc3luY19zdGFydCAqPSAyOworCQkJYWRq
dXN0ZWRfbW9kZS0+Y3J0Y19oc3luY19lbmQgKj0gMjsKKwkJfQorCX0KKwlhZGp1c3RlZF9tb2Rl
LT5jcnRjX3ZibGFua19zdGFydCA9IGFkanVzdGVkX21vZGUtPmNydGNfdmRpc3BsYXk7CisJYWRq
dXN0ZWRfbW9kZS0+Y3J0Y192YmxhbmtfZW5kID0gYWRqdXN0ZWRfbW9kZS0+Y3J0Y192dG90YWw7
CisKK30KKwogc3RhdGljIHZvaWQgZ2VuMTFfZHNpX2dldF9jb25maWcoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIsCiAJCQkJIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZp
ZykKIHsKQEAgLTEyMDQsNiArMTIzMiw3IEBAIHN0YXRpYyB2b2lkIGdlbjExX2RzaV9nZXRfY29u
ZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCXBpcGVfY29uZmlnLT5wb3J0X2Ns
b2NrID0KIAkJY25sX2NhbGNfd3JwbGxfbGluayhkZXZfcHJpdiwgJnBpcGVfY29uZmlnLT5kcGxs
X2h3X3N0YXRlKTsKIAlwaXBlX2NvbmZpZy0+YmFzZS5hZGp1c3RlZF9tb2RlLmNydGNfY2xvY2sg
PSBpbnRlbF9kc2ktPnBjbGs7CisJZ2VuMTFfZHNpX2dldF90aW1pbmdzKGVuY29kZXIsIHBpcGVf
Y29uZmlnKTsKIAlwaXBlX2NvbmZpZy0+b3V0cHV0X3R5cGVzIHw9IEJJVChJTlRFTF9PVVRQVVRf
RFNJKTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGlzcGxh
eS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGlzcGxheS5jCmluZGV4IGRkNjVkN2Mu
LmM4Y2ZkZGMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rpc3BsYXku
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMKQEAgLTc3MzYsOSAr
NzczNiwxNCBAQCBzdGF0aWMgdm9pZCBpbnRlbF9nZXRfcGlwZV90aW1pbmdzKHN0cnVjdCBpbnRl
bF9jcnRjICpjcnRjLAogCXRtcCA9IEk5MTVfUkVBRChIVE9UQUwoY3B1X3RyYW5zY29kZXIpKTsK
IAlwaXBlX2NvbmZpZy0+YmFzZS5hZGp1c3RlZF9tb2RlLmNydGNfaGRpc3BsYXkgPSAodG1wICYg
MHhmZmZmKSArIDE7CiAJcGlwZV9jb25maWctPmJhc2UuYWRqdXN0ZWRfbW9kZS5jcnRjX2h0b3Rh
bCA9ICgodG1wID4+IDE2KSAmIDB4ZmZmZikgKyAxOwotCXRtcCA9IEk5MTVfUkVBRChIQkxBTkso
Y3B1X3RyYW5zY29kZXIpKTsKLQlwaXBlX2NvbmZpZy0+YmFzZS5hZGp1c3RlZF9tb2RlLmNydGNf
aGJsYW5rX3N0YXJ0ID0gKHRtcCAmIDB4ZmZmZikgKyAxOwotCXBpcGVfY29uZmlnLT5iYXNlLmFk
anVzdGVkX21vZGUuY3J0Y19oYmxhbmtfZW5kID0gKCh0bXAgPj4gMTYpICYgMHhmZmZmKSArIDE7
CisKKwlpZiAoIXRyYW5zY29kZXJfaXNfZHNpKGNwdV90cmFuc2NvZGVyKSkgeworCQl0bXAgPSBJ
OTE1X1JFQUQoSEJMQU5LKGNwdV90cmFuc2NvZGVyKSk7CisJCXBpcGVfY29uZmlnLT5iYXNlLmFk
anVzdGVkX21vZGUuY3J0Y19oYmxhbmtfc3RhcnQgPQorCQkJCQkJCSh0bXAgJiAweGZmZmYpICsg
MTsKKwkJcGlwZV9jb25maWctPmJhc2UuYWRqdXN0ZWRfbW9kZS5jcnRjX2hibGFua19lbmQgPQor
CQkJCQkJKCh0bXAgPj4gMTYpICYgMHhmZmZmKSArIDE7CisJfQogCXRtcCA9IEk5MTVfUkVBRChI
U1lOQyhjcHVfdHJhbnNjb2RlcikpOwogCXBpcGVfY29uZmlnLT5iYXNlLmFkanVzdGVkX21vZGUu
Y3J0Y19oc3luY19zdGFydCA9ICh0bXAgJiAweGZmZmYpICsgMTsKIAlwaXBlX2NvbmZpZy0+YmFz
ZS5hZGp1c3RlZF9tb2RlLmNydGNfaHN5bmNfZW5kID0gKCh0bXAgPj4gMTYpICYgMHhmZmZmKSAr
IDE7CkBAIC03NzQ2LDkgKzc3NTEsMTQgQEAgc3RhdGljIHZvaWQgaW50ZWxfZ2V0X3BpcGVfdGlt
aW5ncyhzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAl0bXAgPSBJOTE1X1JFQUQoVlRPVEFMKGNw
dV90cmFuc2NvZGVyKSk7CiAJcGlwZV9jb25maWctPmJhc2UuYWRqdXN0ZWRfbW9kZS5jcnRjX3Zk
aXNwbGF5ID0gKHRtcCAmIDB4ZmZmZikgKyAxOwogCXBpcGVfY29uZmlnLT5iYXNlLmFkanVzdGVk
X21vZGUuY3J0Y192dG90YWwgPSAoKHRtcCA+PiAxNikgJiAweGZmZmYpICsgMTsKLQl0bXAgPSBJ
OTE1X1JFQUQoVkJMQU5LKGNwdV90cmFuc2NvZGVyKSk7Ci0JcGlwZV9jb25maWctPmJhc2UuYWRq
dXN0ZWRfbW9kZS5jcnRjX3ZibGFua19zdGFydCA9ICh0bXAgJiAweGZmZmYpICsgMTsKLQlwaXBl
X2NvbmZpZy0+YmFzZS5hZGp1c3RlZF9tb2RlLmNydGNfdmJsYW5rX2VuZCA9ICgodG1wID4+IDE2
KSAmIDB4ZmZmZikgKyAxOworCisJaWYgKCF0cmFuc2NvZGVyX2lzX2RzaShjcHVfdHJhbnNjb2Rl
cikpIHsKKwkJdG1wID0gSTkxNV9SRUFEKFZCTEFOSyhjcHVfdHJhbnNjb2RlcikpOworCQlwaXBl
X2NvbmZpZy0+YmFzZS5hZGp1c3RlZF9tb2RlLmNydGNfdmJsYW5rX3N0YXJ0ID0KKwkJCQkJCQko
dG1wICYgMHhmZmZmKSArIDE7CisJCXBpcGVfY29uZmlnLT5iYXNlLmFkanVzdGVkX21vZGUuY3J0
Y192YmxhbmtfZW5kID0KKwkJCQkJCSgodG1wID4+IDE2KSAmIDB4ZmZmZikgKyAxOworCX0KIAl0
bXAgPSBJOTE1X1JFQUQoVlNZTkMoY3B1X3RyYW5zY29kZXIpKTsKIAlwaXBlX2NvbmZpZy0+YmFz
ZS5hZGp1c3RlZF9tb2RlLmNydGNfdnN5bmNfc3RhcnQgPSAodG1wICYgMHhmZmZmKSArIDE7CiAJ
cGlwZV9jb25maWctPmJhc2UuYWRqdXN0ZWRfbW9kZS5jcnRjX3ZzeW5jX2VuZCA9ICgodG1wID4+
IDE2KSAmIDB4ZmZmZikgKyAxOwotLSAKMS45LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeA==

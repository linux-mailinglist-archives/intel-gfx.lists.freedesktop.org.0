Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DB66EEC43F
	for <lists+intel-gfx@lfdr.de>; Fri,  1 Nov 2019 15:10:17 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 216166F801;
	Fri,  1 Nov 2019 14:10:16 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 98C746F801
 for <intel-gfx@lists.freedesktop.org>; Fri,  1 Nov 2019 14:10:14 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19047918-1500050 
 for <intel-gfx@lists.freedesktop.org>; Fri, 01 Nov 2019 14:10:09 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  1 Nov 2019 14:10:06 +0000
Message-Id: <20191101141009.15581-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0.rc2
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 1/4] drm/i915/gt: Call intel_gt_sanitize() directly
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXNzdW1lIGFsbCByZXNwb25zaWJpbGl0eSBmb3Igb3BlcmF0aW5nIG9uIHRoZSBIVyB0byBzYW5p
dGl6ZSB0aGUgR1QKc3RhdGUgdXBvbiBsb2FkL3Jlc3VtZSBpbiBpbnRlbF9ndF9zYW5pdGl6ZSgp
IGl0c2VsZi4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29u
LmNvLnVrPgpSZXZpZXdlZC1ieTogQW5kaSBTaHl0aSA8YW5kaS5zaHl0aUBpbnRlbC5jb20+Ci0t
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BtLmMgICAgICAgIHwgIDUgLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5jICAgICAgICAgICAgfCAgNiArKy0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmggICAgICAgICAgICB8ICAyICstCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jICAgICAgICAgfCAzNiArKysrKysr
KysrKysrKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgICAgICAgICAgICAg
ICB8ICA4ICstLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAgICAg
ICB8ICAyIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMgICAgICAgICAgICAgICB8
IDM3IC0tLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9p
OTE1X2dlbS5jICAgICB8ICAxIC0KIC4uLi9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tfZ2Vt
X2RldmljZS5jICB8ICAxIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2d0
dC5jICAgICB8ICAzICstCiAxMCBmaWxlcyBjaGFuZ2VkLCA0MyBpbnNlcnRpb25zKCspLCA1OCBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fcG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wbS5jCmluZGV4IGM5
OWJiOTRmZTQxZS4uZTJlZTljMDRlY2U4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fcG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fcG0uYwpAQCAtNzQsNyArNzQsNiBAQCB2b2lkIGk5MTVfZ2VtX3N1c3BlbmQoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJICogbm90IHJlbHkgb24gaXRzIHN0YXRlLgogCSAqLwog
CWludGVsX2d0X3N1c3BlbmQoJmk5MTUtPmd0KTsKLQlpbnRlbF91Y19zdXNwZW5kKCZpOTE1LT5n
dC51Yyk7CiAKIAlpOTE1X2dlbV9kcmFpbl9mcmVlZF9vYmplY3RzKGk5MTUpOwogfQpAQCAtMTQw
LDggKzEzOSw2IEBAIHZvaWQgaTkxNV9nZW1fc3VzcGVuZF9sYXRlKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1KQogCQlsaXN0X3NwbGljZV90YWlsKCZrZWVwLCAqcGhhc2UpOwogCX0KIAlz
cGluX3VubG9ja19pcnFyZXN0b3JlKCZpOTE1LT5tbS5vYmpfbG9jaywgZmxhZ3MpOwotCi0JaTkx
NV9nZW1fc2FuaXRpemUoaTkxNSk7CiB9CiAKIHZvaWQgaTkxNV9nZW1fcmVzdW1lKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1KQpAQCAtMTYxLDggKzE1OCw2IEBAIHZvaWQgaTkxNV9nZW1f
cmVzdW1lKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCWlmIChpbnRlbF9ndF9yZXN1
bWUoJmk5MTUtPmd0KSkKIAkJZ290byBlcnJfd2VkZ2VkOwogCi0JaW50ZWxfdWNfcmVzdW1lKCZp
OTE1LT5ndC51Yyk7Ci0KIAkvKiBBbHdheXMgcmVsb2FkIGEgY29udGV4dCBmb3IgcG93ZXJzYXZp
bmcuICovCiAJaWYgKCFzd2l0Y2hfdG9fa2VybmVsX2NvbnRleHRfc3luYygmaTkxNS0+Z3QpKQog
CQlnb3RvIGVycl93ZWRnZWQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9ndC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYwppbmRleCA4OTg2
NjJjMTU4YWQuLjRjMjZkYWY3ZWU0NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZ3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5jCkBA
IC0zMSw5ICszMSwxMSBAQCB2b2lkIGludGVsX2d0X2luaXRfZWFybHkoc3RydWN0IGludGVsX2d0
ICpndCwgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJaW50ZWxfdWNfaW5pdF9lYXJs
eSgmZ3QtPnVjKTsKIH0KIAotdm9pZCBpbnRlbF9ndF9pbml0X2h3X2Vhcmx5KHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1KQordm9pZCBpbnRlbF9ndF9pbml0X2h3X2Vhcmx5KHN0cnVjdCBp
bnRlbF9ndCAqZ3QsIHN0cnVjdCBpOTE1X2dndHQgKmdndHQpCiB7Ci0JaTkxNS0+Z3QuZ2d0dCA9
ICZpOTE1LT5nZ3R0OworCWd0LT5nZ3R0ID0gZ2d0dDsKKworCWludGVsX2d0X3Nhbml0aXplKGd0
LCBmYWxzZSk7CiB9CiAKIHN0YXRpYyB2b2lkIGluaXRfdW51c2VkX3Jpbmcoc3RydWN0IGludGVs
X2d0ICpndCwgdTMyIGJhc2UpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9ndC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuaAppbmRleCA1YjZl
ZmZlZDM3MTMuLjU0MzZmOGMzMDcwOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZ3QuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5oCkBA
IC0yOCw3ICsyOCw3IEBAIHN0YXRpYyBpbmxpbmUgc3RydWN0IGludGVsX2d0ICpodWNfdG9fZ3Qo
c3RydWN0IGludGVsX2h1YyAqaHVjKQogfQogCiB2b2lkIGludGVsX2d0X2luaXRfZWFybHkoc3Ry
dWN0IGludGVsX2d0ICpndCwgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwotdm9pZCBp
bnRlbF9ndF9pbml0X2h3X2Vhcmx5KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKK3Zv
aWQgaW50ZWxfZ3RfaW5pdF9od19lYXJseShzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCBzdHJ1Y3QgaTkx
NV9nZ3R0ICpnZ3R0KTsKIGludCBfX211c3RfY2hlY2sgaW50ZWxfZ3RfaW5pdF9odyhzdHJ1Y3Qg
aW50ZWxfZ3QgKmd0KTsKIGludCBpbnRlbF9ndF9pbml0KHN0cnVjdCBpbnRlbF9ndCAqZ3QpOwog
dm9pZCBpbnRlbF9ndF9kcml2ZXJfcmVnaXN0ZXIoc3RydWN0IGludGVsX2d0ICpndCk7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYwppbmRleCAzMmJlY2YxNWQ0ZTAuLjE2NzlmNGY3
OGQ2NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jCkBAIC0xMTgsOCArMTE4
LDIyIEBAIHZvaWQgaW50ZWxfZ3Rfc2FuaXRpemUoc3RydWN0IGludGVsX2d0ICpndCwgYm9vbCBm
b3JjZSkKIHsKIAlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7CiAJZW51bSBpbnRlbF9l
bmdpbmVfaWQgaWQ7CisJaW50ZWxfd2FrZXJlZl90IHdha2VyZWY7CiAKLQlHRU1fVFJBQ0UoIlxu
Iik7CisJR0VNX1RSQUNFKCJmb3JjZTolc1xuIiwgeWVzbm8oZm9yY2UpKTsKKworCS8qIFVzZSBh
IHJhdyB3YWtlcmVmIHRvIGF2b2lkIGNhbGxpbmcgaW50ZWxfZGlzcGxheV9wb3dlcl9nZXQgZWFy
bHkgKi8KKwl3YWtlcmVmID0gaW50ZWxfcnVudGltZV9wbV9nZXQoZ3QtPnVuY29yZS0+cnBtKTsK
KwlpbnRlbF91bmNvcmVfZm9yY2V3YWtlX2dldChndC0+dW5jb3JlLCBGT1JDRVdBS0VfQUxMKTsK
KworCS8qCisJICogQXMgd2UgaGF2ZSBqdXN0IHJlc3VtZWQgdGhlIG1hY2hpbmUgYW5kIHdva2Vu
IHRoZSBkZXZpY2UgdXAgZnJvbQorCSAqIGRlZXAgUENJIHNsZWVwIChwcmVzdW1hYmx5IEQzX2Nv
bGQpLCBhc3N1bWUgdGhlIEhXIGhhcyBiZWVuIHJlc2V0CisJICogYmFjayB0byBkZWZhdWx0cywg
cmVjb3ZlcmluZyBmcm9tIHdoYXRldmVyIHdlZGdlZCBzdGF0ZSB3ZSBsZWZ0IGl0CisJICogaW4g
YW5kIHNvIHdvcnRoIHRyeWluZyB0byB1c2UgdGhlIGRldmljZSBvbmNlIG1vcmUuCisJICovCisJ
aWYgKGludGVsX2d0X2lzX3dlZGdlZChndCkpCisJCWludGVsX2d0X3Vuc2V0X3dlZGdlZChndCk7
CiAKIAlpbnRlbF91Y19zYW5pdGl6ZSgmZ3QtPnVjKTsKIApAQCAtMTI3LDYgKzE0MSw4IEBAIHZv
aWQgaW50ZWxfZ3Rfc2FuaXRpemUoc3RydWN0IGludGVsX2d0ICpndCwgYm9vbCBmb3JjZSkKIAkJ
aWYgKGVuZ2luZS0+cmVzZXQucHJlcGFyZSkKIAkJCWVuZ2luZS0+cmVzZXQucHJlcGFyZShlbmdp
bmUpOwogCisJaW50ZWxfdWNfcmVzZXRfcHJlcGFyZSgmZ3QtPnVjKTsKKwogCWlmIChyZXNldF9l
bmdpbmVzKGd0KSB8fCBmb3JjZSkgewogCQlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBndCwgaWQp
CiAJCQlfX2ludGVsX2VuZ2luZV9yZXNldChlbmdpbmUsIGZhbHNlKTsKQEAgLTEzNSw2ICsxNTEs
OSBAQCB2b2lkIGludGVsX2d0X3Nhbml0aXplKHN0cnVjdCBpbnRlbF9ndCAqZ3QsIGJvb2wgZm9y
Y2UpCiAJZm9yX2VhY2hfZW5naW5lKGVuZ2luZSwgZ3QsIGlkKQogCQlpZiAoZW5naW5lLT5yZXNl
dC5maW5pc2gpCiAJCQllbmdpbmUtPnJlc2V0LmZpbmlzaChlbmdpbmUpOworCisJaW50ZWxfdW5j
b3JlX2ZvcmNld2FrZV9wdXQoZ3QtPnVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7CisJaW50ZWxfcnVu
dGltZV9wbV9wdXQoZ3QtPnVuY29yZS0+cnBtLCB3YWtlcmVmKTsKIH0KIAogdm9pZCBpbnRlbF9n
dF9wbV9maW5pKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCkBAIC0xNDgsNiArMTY3LDggQEAgaW50IGlu
dGVsX2d0X3Jlc3VtZShzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQogCWVudW0gaW50ZWxfZW5naW5lX2lk
IGlkOwogCWludCBlcnIgPSAwOwogCisJR0VNX1RSQUNFKCJcbiIpOworCiAJLyoKIAkgKiBBZnRl
ciByZXN1bWUsIHdlIG1heSBuZWVkIHRvIHBva2UgaW50byB0aGUgcGlubmVkIGtlcm5lbAogCSAq
IGNvbnRleHRzIHRvIHBhcGVyIG92ZXIgYW55IGRhbWFnZSBjYXVzZWQgYnkgdGhlIHN1ZGRlbiBz
dXNwZW5kLgpAQCAtMTg2LDYgKzIwNyw5IEBAIGludCBpbnRlbF9ndF9yZXN1bWUoc3RydWN0IGlu
dGVsX2d0ICpndCkKIAl9CiAKIAlpbnRlbF9yYzZfZW5hYmxlKCZndC0+cmM2KTsKKworCWludGVs
X3VjX3Jlc3VtZSgmZ3QtPnVjKTsKKwogCWludGVsX3VuY29yZV9mb3JjZXdha2VfcHV0KGd0LT51
bmNvcmUsIEZPUkNFV0FLRV9BTEwpOwogCWludGVsX2d0X3BtX3B1dChndCk7CiAKQEAgLTIxMiwy
MCArMjM2LDMwIEBAIHZvaWQgaW50ZWxfZ3Rfc3VzcGVuZChzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQog
CS8qIFdlIGV4cGVjdCB0byBiZSBpZGxlIGFscmVhZHk7IGJ1dCBhbHNvIHdhbnQgdG8gYmUgaW5k
ZXBlbmRlbnQgKi8KIAl3YWl0X2Zvcl9pZGxlKGd0KTsKIAorCWludGVsX3VjX3N1c3BlbmQoJmd0
LT51Yyk7CisKIAl3aXRoX2ludGVsX3J1bnRpbWVfcG0oZ3QtPnVuY29yZS0+cnBtLCB3YWtlcmVm
KSB7CiAJCWludGVsX3Jwc19kaXNhYmxlKCZndC0+cnBzKTsKIAkJaW50ZWxfcmM2X2Rpc2FibGUo
Jmd0LT5yYzYpOwogCQlpbnRlbF9sbGNfZGlzYWJsZSgmZ3QtPmxsYyk7CiAJfQorCisJaW50ZWxf
Z3Rfc2FuaXRpemUoZ3QsIGZhbHNlKTsKKworCUdFTV9UUkFDRSgiXG4iKTsKIH0KIAogdm9pZCBp
bnRlbF9ndF9ydW50aW1lX3N1c3BlbmQoc3RydWN0IGludGVsX2d0ICpndCkKIHsKIAlpbnRlbF91
Y19ydW50aW1lX3N1c3BlbmQoJmd0LT51Yyk7CisKKwlHRU1fVFJBQ0UoIlxuIik7CiB9CiAKIGlu
dCBpbnRlbF9ndF9ydW50aW1lX3Jlc3VtZShzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQogeworCUdFTV9U
UkFDRSgiXG4iKTsKKwogCWludGVsX2d0X2luaXRfc3dpenpsaW5nKGd0KTsKIAogCXJldHVybiBp
bnRlbF91Y19ydW50aW1lX3Jlc3VtZSgmZ3QtPnVjKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCmlu
ZGV4IDMzNDA0ODVjMTJlMy4uY2NiNWI1NjY3OTVmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMK
QEAgLTYwMyw4ICs2MDMsNiBAQCBzdGF0aWMgaW50IGk5MTVfZHJpdmVyX21taW9fcHJvYmUoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCWlmIChyZXQpCiAJCWdvdG8gZXJyX3Vu
Y29yZTsKIAotCWk5MTVfZ2VtX2luaXRfbW1pbyhkZXZfcHJpdik7Ci0KIAlyZXR1cm4gMDsKIAog
ZXJyX3VuY29yZToKQEAgLTExNzcsNyArMTE3NSw3IEBAIHN0YXRpYyBpbnQgaTkxNV9kcml2ZXJf
aHdfcHJvYmUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCWlmIChyZXQpCiAJ
CWdvdG8gZXJyX2dndHQ7CiAKLQlpbnRlbF9ndF9pbml0X2h3X2Vhcmx5KGRldl9wcml2KTsKKwlp
bnRlbF9ndF9pbml0X2h3X2Vhcmx5KCZkZXZfcHJpdi0+Z3QsICZkZXZfcHJpdi0+Z2d0dCk7CiAK
IAlyZXQgPSBpOTE1X2dndHRfZW5hYmxlX2h3KGRldl9wcml2KTsKIAlpZiAocmV0KSB7CkBAIC0x
ODIxLDcgKzE4MTksNyBAQCBzdGF0aWMgaW50IGk5MTVfZHJtX3Jlc3VtZShzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2KQogCiAJZGlzYWJsZV9ycG1fd2FrZXJlZl9hc3NlcnRzKCZkZXZfcHJpdi0+cnVu
dGltZV9wbSk7CiAKLQlpOTE1X2dlbV9zYW5pdGl6ZShkZXZfcHJpdik7CisJaW50ZWxfZ3Rfc2Fu
aXRpemUoJmRldl9wcml2LT5ndCwgdHJ1ZSk7CiAKIAlyZXQgPSBpOTE1X2dndHRfZW5hYmxlX2h3
KGRldl9wcml2KTsKIAlpZiAocmV0KQpAQCAtMTk1Miw4ICsxOTUwLDYgQEAgc3RhdGljIGludCBp
OTE1X2RybV9yZXN1bWVfZWFybHkoc3RydWN0IGRybV9kZXZpY2UgKmRldikKIAogCWludGVsX3Bv
d2VyX2RvbWFpbnNfcmVzdW1lKGRldl9wcml2KTsKIAotCWludGVsX2d0X3Nhbml0aXplKCZkZXZf
cHJpdi0+Z3QsIHRydWUpOwotCiAJZW5hYmxlX3JwbV93YWtlcmVmX2Fzc2VydHMoJmRldl9wcml2
LT5ydW50aW1lX3BtKTsKIAogCXJldHVybiByZXQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRl
eCBjODRjNDExNTlmMmIuLjdlMGY2N2JhYmUyMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBA
IC0xNzg1LDcgKzE3ODUsNiBAQCBpbnQgaTkxNV9nZXRwYXJhbV9pb2N0bChzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2LCB2b2lkICpkYXRhLAogLyogaTkxNV9nZW0uYyAqLwogaW50IGk5MTVfZ2VtX2lu
aXRfdXNlcnB0cihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBpOTE1
X2dlbV9jbGVhbnVwX3VzZXJwdHIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsK
LXZvaWQgaTkxNV9nZW1fc2FuaXRpemUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwog
dm9pZCBpOTE1X2dlbV9pbml0X2Vhcmx5KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dik7CiB2b2lkIGk5MTVfZ2VtX2NsZWFudXBfZWFybHkoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KTsKIGludCBpOTE1X2dlbV9mcmVlemUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KTsKQEAgLTE4NjksNyArMTg2OCw2IEBAIHN0YXRpYyBpbmxpbmUgdTMyIGk5MTVf
cmVzZXRfZW5naW5lX2NvdW50KHN0cnVjdCBpOTE1X2dwdV9lcnJvciAqZXJyb3IsCiAJcmV0dXJu
IGF0b21pY19yZWFkKCZlcnJvci0+cmVzZXRfZW5naW5lX2NvdW50W2VuZ2luZS0+dWFiaV9jbGFz
c10pOwogfQogCi12b2lkIGk5MTVfZ2VtX2luaXRfbW1pbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSk7CiBpbnQgX19tdXN0X2NoZWNrIGk5MTVfZ2VtX2luaXQoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2KTsKIHZvaWQgaTkxNV9nZW1fZHJpdmVyX3JlZ2lzdGVyKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKIHZvaWQgaTkxNV9nZW1fZHJpdmVyX3VucmVnaXN0
ZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9nZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMK
aW5kZXggYjE1NzRhYjEwNGQ3Li5hYzIzMzIyZmIzODIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZ2VtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0u
YwpAQCAtMTAzOSwzOCArMTAzOSw2IEBAIGk5MTVfZ2VtX21hZHZpc2VfaW9jdGwoc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKIAlyZXR1cm4gZXJyOwogfQogCi12b2lkIGk5MTVf
Z2VtX3Nhbml0aXplKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQotewotCWludGVsX3dh
a2VyZWZfdCB3YWtlcmVmOwotCi0JR0VNX1RSQUNFKCJcbiIpOwotCi0Jd2FrZXJlZiA9IGludGVs
X3J1bnRpbWVfcG1fZ2V0KCZpOTE1LT5ydW50aW1lX3BtKTsKLQlpbnRlbF91bmNvcmVfZm9yY2V3
YWtlX2dldCgmaTkxNS0+dW5jb3JlLCBGT1JDRVdBS0VfQUxMKTsKLQotCS8qCi0JICogQXMgd2Ug
aGF2ZSBqdXN0IHJlc3VtZWQgdGhlIG1hY2hpbmUgYW5kIHdva2VuIHRoZSBkZXZpY2UgdXAgZnJv
bQotCSAqIGRlZXAgUENJIHNsZWVwIChwcmVzdW1hYmx5IEQzX2NvbGQpLCBhc3N1bWUgdGhlIEhX
IGhhcyBiZWVuIHJlc2V0Ci0JICogYmFjayB0byBkZWZhdWx0cywgcmVjb3ZlcmluZyBmcm9tIHdo
YXRldmVyIHdlZGdlZCBzdGF0ZSB3ZSBsZWZ0IGl0Ci0JICogaW4gYW5kIHNvIHdvcnRoIHRyeWlu
ZyB0byB1c2UgdGhlIGRldmljZSBvbmNlIG1vcmUuCi0JICovCi0JaWYgKGludGVsX2d0X2lzX3dl
ZGdlZCgmaTkxNS0+Z3QpKQotCQlpbnRlbF9ndF91bnNldF93ZWRnZWQoJmk5MTUtPmd0KTsKLQot
CS8qCi0JICogSWYgd2UgaW5oZXJpdCBjb250ZXh0IHN0YXRlIGZyb20gdGhlIEJJT1Mgb3IgZWFy
bGllciBvY2N1cGFudHMKLQkgKiBvZiB0aGUgR1BVLCB0aGUgR1BVIG1heSBiZSBpbiBhbiBpbmNv
bnNpc3RlbnQgc3RhdGUgd2hlbiB3ZQotCSAqIHRyeSB0byB0YWtlIG92ZXIuIFRoZSBvbmx5IHdh
eSB0byByZW1vdmUgdGhlIGVhcmxpZXIgc3RhdGUKLQkgKiBpcyBieSByZXNldHRpbmcuIEhvd2V2
ZXIsIHJlc2V0dGluZyBvbiBlYXJsaWVyIGdlbiBpcyB0cmlja3kgYXMKLQkgKiBpdCBtYXkgaW1w
YWN0IHRoZSBkaXNwbGF5IGFuZCB3ZSBhcmUgdW5jZXJ0YWluIGFib3V0IHRoZSBzdGFiaWxpdHkK
LQkgKiBvZiB0aGUgcmVzZXQsIHNvIHRoaXMgY291bGQgYmUgYXBwbGllZCB0byBldmVuIGVhcmxp
ZXIgZ2VuLgotCSAqLwotCWludGVsX2d0X3Nhbml0aXplKCZpOTE1LT5ndCwgZmFsc2UpOwotCi0J
aW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9wdXQoJmk5MTUtPnVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7
Ci0JaW50ZWxfcnVudGltZV9wbV9wdXQoJmk5MTUtPnJ1bnRpbWVfcG0sIHdha2VyZWYpOwotfQot
CiBzdGF0aWMgaW50IF9faW50ZWxfZW5naW5lc19yZWNvcmRfZGVmYXVsdHMoc3RydWN0IGludGVs
X2d0ICpndCkKIHsKIAlzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0c1tJOTE1X05VTV9FTkdJ
TkVTXSA9IHt9OwpAQCAtMTQxMywxMSArMTM4MSw2IEBAIHZvaWQgaTkxNV9nZW1fZHJpdmVyX3Jl
bGVhc2Uoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCVdBUk5fT04oIWxpc3Rf
ZW1wdHkoJmRldl9wcml2LT5nZW0uY29udGV4dHMubGlzdCkpOwogfQogCi12b2lkIGk5MTVfZ2Vt
X2luaXRfbW1pbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKLXsKLQlpOTE1X2dlbV9z
YW5pdGl6ZShpOTE1KTsKLX0KLQogc3RhdGljIHZvaWQgaTkxNV9nZW1faW5pdF9fbW0oc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB7CiAJc3Bpbl9sb2NrX2luaXQoJmk5MTUtPm1tLm9i
al9sb2NrKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1
X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtLmMKaW5kZXgg
ZTM3ODU0M2VkNDUzLi5kODNmNmJmNmQ5ZDQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0
ZXN0cy9pOTE1X2dlbS5jCkBAIC0xMjQsNyArMTI0LDYgQEAgc3RhdGljIHZvaWQgcG1fcmVzdW1l
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCSAqLwogCXdpdGhfaW50ZWxfcnVudGlt
ZV9wbSgmaTkxNS0+cnVudGltZV9wbSwgd2FrZXJlZikgewogCQlpbnRlbF9ndF9zYW5pdGl6ZSgm
aTkxNS0+Z3QsIGZhbHNlKTsKLQkJaTkxNV9nZW1fc2FuaXRpemUoaTkxNSk7CiAKIAkJaTkxNV9n
ZW1fcmVzdG9yZV9ndHRfbWFwcGluZ3MoaTkxNSk7CiAJCWk5MTVfZ2VtX3Jlc3RvcmVfZmVuY2Vz
KCZpOTE1LT5nZ3R0KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0
cy9tb2NrX2dlbV9kZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2Nr
X2dlbV9kZXZpY2UuYwppbmRleCBhMGRhNTk0NGRkMzMuLjI3ZWQzY2VlNmE5YiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tfZ2VtX2RldmljZS5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYwpAQCAtMTgz
LDcgKzE4Myw2IEBAIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICptb2NrX2dlbV9kZXZpY2Uodm9p
ZCkKIAlpbnRlbF90aW1lbGluZXNfaW5pdChpOTE1KTsKIAogCW1vY2tfaW5pdF9nZ3R0KGk5MTUs
ICZpOTE1LT5nZ3R0KTsKLQlpOTE1LT5ndC5nZ3R0ID0gJmk5MTUtPmdndHQ7CiAKIAlta3dyaXRl
X2RldmljZV9pbmZvKGk5MTUpLT5lbmdpbmVfbWFzayA9IEJJVCgwKTsKIApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tfZ3R0LmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9zZWxmdGVzdHMvbW9ja19ndHQuYwppbmRleCA5ZWM5M2RjMjdmYjUuLjIwYWMzODQ0
ZWRlYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tfZ3R0
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL21vY2tfZ3R0LmMKQEAgLTEx
OCw4ICsxMTgsNyBAQCB2b2lkIG1vY2tfaW5pdF9nZ3R0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1LCBzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0KQogCWdndHQtPnZtLnZtYV9vcHMuY2xlYXJf
cGFnZXMgPSBjbGVhcl9wYWdlczsKIAogCWk5MTVfYWRkcmVzc19zcGFjZV9pbml0KCZnZ3R0LT52
bSwgVk1fQ0xBU1NfR0dUVCk7Ci0KLQlpbnRlbF9ndF9pbml0X2h3X2Vhcmx5KGk5MTUpOworCWk5
MTUtPmd0LmdndHQgPSBnZ3R0OwogfQogCiB2b2lkIG1vY2tfZmluaV9nZ3R0KHN0cnVjdCBpOTE1
X2dndHQgKmdndHQpCi0tIAoyLjI0LjAucmMyCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9pbnRlbC1nZng=

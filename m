Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 590A11058F2
	for <lists+intel-gfx@lfdr.de>; Thu, 21 Nov 2019 18:59:10 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 42A336F4A5;
	Thu, 21 Nov 2019 17:59:08 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 822CF6F4A5
 for <intel-gfx@lists.freedesktop.org>; Thu, 21 Nov 2019 17:59:07 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 21 Nov 2019 09:59:06 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,226,1571727600"; d="scan'208";a="209988669"
Received: from irvmail001.ir.intel.com ([163.33.26.43])
 by orsmga003.jf.intel.com with ESMTP; 21 Nov 2019 09:59:05 -0800
Received: from mwajdecz-MOBL1.ger.corp.intel.com
 (mwajdecz-mobl1.ger.corp.intel.com [172.28.174.50])
 by irvmail001.ir.intel.com (8.14.3/8.13.6/MailSET/Hub) with ESMTP id
 xALHx4g4010431; Thu, 21 Nov 2019 17:59:04 GMT
From: Michal Wajdeczko <michal.wajdeczko@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 21 Nov 2019 17:58:50 +0000
Message-Id: <20191121175850.19844-1-michal.wajdeczko@intel.com>
X-Mailer: git-send-email 2.21.0.windows.1
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/ggtt: Move ballooning support to
 i915_ggtt
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VG9kYXkgVkdUIGltcGxlbWVudHMgR0dUVCBiYWxsb29uaW5nIG9uIGl0cyBvd24sIHVzaW5nIHNv
bWUgcHJpdmF0ZQpzdGF0aWMgc3RydWN0dXJlIHRvIGhvbGQgaW5mbyBhYm91dCByZXNlcnZlZCBH
R1RUIG5vZGVzIGFuZCB0aGVuCm1hbnVhbGx5IHVwZGF0ZSB2bS5yZXNlcnZlZCBzaXplIG93bmVk
IGJ5IGk5MTVfZ2d0dC4KCkFzIGk5MTVfZ2d0dCBhbHJlYWR5IG1hbmFnZXMgc29tZSBjdXN0b20g
cmVzZXJ2ZWQgbm9kZXMgKGxpa2UgdWNfZncpCm1vdmUgVkdUIGJhbGxvb25pbmcgc3VwcG9ydCB0
byBpOTE1X2dndHQgYW5kIG1ha2UgaXQgbW9yZSBnZW5lcmljCmZvciBwb3NzaWJsZSBmdXR1cmUg
cmV1c2UgaW4gb3RoZXIgc2NlbmFyaW9zLgoKQXMgYSBib251cyB3ZSBjYW4gZHJvcCBhbm90aGVy
IHBsYWNlIGluIGRyaXZlciB0aGF0IHVzZXMgc3RhdGljIGRhdGEuCgpTaWduZWQtb2ZmLWJ5OiBN
aWNoYWwgV2FqZGVjemtvIDxtaWNoYWwud2FqZGVjemtvQGludGVsLmNvbT4KQ2M6IFhpb25nIFpo
YW5nIDx4aW9uZy55LnpoYW5nQGludGVsLmNvbT4KQ2M6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hy
aXMtd2lsc29uLmNvLnVrPgpDYzogSmFuaSBOaWt1bGEgPGphbmkubmlrdWxhQGludGVsLmNvbT4K
LS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyB8IDQ3ICsrKysrKysrKysr
KysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5oIHwgMTggKysrKysr
KysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdmdwdS5jICAgIHwgNzIgKysrKysrLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0KIDMgZmlsZXMgY2hhbmdlZCwgNzggaW5zZXJ0aW9ucygrKSwgNTkg
ZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1f
Z3R0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYwppbmRleCA2MjM5YTlh
ZGJmMTQuLmQ4YjIwODRkYWI3ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9nZW1fZ3R0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKQEAg
LTM4MjcsNiArMzgyNyw1MyBAQCBpbnQgaTkxNV9nZW1fZ3R0X2luc2VydChzdHJ1Y3QgaTkxNV9h
ZGRyZXNzX3NwYWNlICp2bSwKIAkJCQkJICAgc3RhcnQsIGVuZCwgRFJNX01NX0lOU0VSVF9FVklD
VCk7CiB9CiAKK2ludCBpOTE1X2dndHRfYmFsbG9vbl9zcGFjZShzdHJ1Y3QgaTkxNV9nZ3R0ICpn
Z3R0LAorCQkJICAgIGVudW0gaTkxNV9nZ3R0X2JhbGxvb25faWQgaWQsCisJCQkgICAgdTY0IHN0
YXJ0LCB1NjQgZW5kKQoreworCXN0cnVjdCBkcm1fbW1fbm9kZSAqbm9kZSA9ICZnZ3R0LT5iYWxs
b29uW2lkXTsKKwl1NjQgc2l6ZSA9IGVuZCAtIHN0YXJ0OworCWludCByZXQ7CisKKwlHRU1fQlVH
X09OKGlkIDwgMCB8fCBpZCA+PSBBUlJBWV9TSVpFKGdndHQtPmJhbGxvb24pKTsKKwlHRU1fQlVH
X09OKHN0YXJ0ID49IGVuZCk7CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZ2d0dC0+dm0uaTkxNS0+
ZHJtLmRldiwKKwkJCSAgICAgIiVzR0dUVCBbJSNsbHgtJSNsbHhdICVsbHVLXG4iLAorCQkJICAg
ICAiYmFsbG9vbmluZyAiLCBzdGFydCwgZW5kLCBzaXplIC8gU1pfMUspOworCisJcmV0ID0gaTkx
NV9nZW1fZ3R0X3Jlc2VydmUoJmdndHQtPnZtLCBub2RlLCBzaXplLCBzdGFydCwKKwkJCQkgICBJ
OTE1X0NPTE9SX1VORVZJQ1RBQkxFLCBQSU5fTk9FVklDVCk7CisJaWYgKHVubGlrZWx5KHJldCkp
IHsKKwkJRFJNX0RFVl9FUlJPUihnZ3R0LT52bS5pOTE1LT5kcm0uZGV2LAorCQkJICAgICAgIiVz
R0dUVCBbJSNsbHgtJSNsbHhdICVsbHVLXG4iLAorCQkJICAgICAgIkZhaWxlZCB0byBiYWxsb29u
ICIsIG5vZGUtPnN0YXJ0LAorCQkJICAgICAgbm9kZS0+c3RhcnQgKyBub2RlLT5zaXplLCBub2Rl
LT5zaXplIC8gU1pfMUspOworCX0gZWxzZSB7CisJCWdndHQtPnZtLnJlc2VydmVkICs9IG5vZGUt
PnNpemU7CisJfQorCisJcmV0dXJuIHJldDsKK30KKwordm9pZCBpOTE1X2dndHRfZGViYWxsb29u
X3NwYWNlKHN0cnVjdCBpOTE1X2dndHQgKmdndHQsCisJCQkgICAgICAgZW51bSBpOTE1X2dndHRf
YmFsbG9vbl9pZCBpZCkKK3sKKwlzdHJ1Y3QgZHJtX21tX25vZGUgKm5vZGUgPSAmZ2d0dC0+YmFs
bG9vbltpZF07CisKKwlHRU1fQlVHX09OKGlkIDwgMCB8fCBpZCA+PSBBUlJBWV9TSVpFKGdndHQt
PmJhbGxvb24pKTsKKwlpZiAoIWRybV9tbV9ub2RlX2FsbG9jYXRlZChub2RlKSkKKwkJcmV0dXJu
OworCisJRFJNX0RFVl9ERUJVR19EUklWRVIoZ2d0dC0+dm0uaTkxNS0+ZHJtLmRldiwKKwkJCSAg
ICAgIiVzR0dUVCBbJSNsbHgtJSNsbHhdICVsbHVLXG4iLAorCQkJICAgICAiZGViYWxsb29uaW5n
ICIsIG5vZGUtPnN0YXJ0LAorCQkJICAgICBub2RlLT5zdGFydCArIG5vZGUtPnNpemUsIG5vZGUt
PnNpemUgLyBTWl8xSyk7CisKKwlHRU1fQlVHX09OKGdndHQtPnZtLnJlc2VydmVkIDwgbm9kZS0+
c2l6ZSk7CisJZ2d0dC0+dm0ucmVzZXJ2ZWQgLT0gbm9kZS0+c2l6ZTsKKwlkcm1fbW1fcmVtb3Zl
X25vZGUobm9kZSk7Cit9CisKICNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9TRUxGVEVT
VCkKICNpbmNsdWRlICJzZWxmdGVzdHMvbW9ja19ndHQuYyIKICNpbmNsdWRlICJzZWxmdGVzdHMv
aTkxNV9nZW1fZ3R0LmMiCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dl
bV9ndHQuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5oCmluZGV4IDQwMjI4
M2NlMjg2NC4uYmE0MGNhZTBlOTdhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2dlbV9ndHQuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuaApA
QCAtNDMyLDYgKzQzMiwxMiBAQCBzdHJ1Y3QgaTkxNV9nZ3R0IHsKIAogCXN0cnVjdCBkcm1fbW1f
bm9kZSBlcnJvcl9jYXB0dXJlOwogCXN0cnVjdCBkcm1fbW1fbm9kZSB1Y19mdzsKKworCS8qCisJ
ICogVGhlcmUgbWlnaHQgYmUgdXAgdG8gNCByZWdpb25zIGJhbGxvb25lZC4KKwkgKiAoMiBmb3Ig
bWFwcGFibGUgYW5kIDIgZm9yIHVubWFwcGFibGUgZ3JhcGhpYyBtZW1vcnkpCisJICovCisJc3Ry
dWN0IGRybV9tbV9ub2RlIGJhbGxvb25bNF07CiB9OwogCiBzdHJ1Y3QgaTkxNV9wcGd0dCB7CkBA
IC02NDksNiArNjU1LDE4IEBAIGludCBpOTE1X2dlbV9ndHRfaW5zZXJ0KHN0cnVjdCBpOTE1X2Fk
ZHJlc3Nfc3BhY2UgKnZtLAogCQkJdTY0IHNpemUsIHU2NCBhbGlnbm1lbnQsIHVuc2lnbmVkIGxv
bmcgY29sb3IsCiAJCQl1NjQgc3RhcnQsIHU2NCBlbmQsIHVuc2lnbmVkIGludCBmbGFncyk7CiAK
K2VudW0gaTkxNV9nZ3R0X2JhbGxvb25faWQgeworCUk5MTVfR0dUVF9CQUxMT09OMCwKKwlJOTE1
X0dHVFRfQkFMTE9PTjEsCisJSTkxNV9HR1RUX0JBTExPT04yLAorCUk5MTVfR0dUVF9CQUxMT09O
MywKK307CisKK2ludCBpOTE1X2dndHRfYmFsbG9vbl9zcGFjZShzdHJ1Y3QgaTkxNV9nZ3R0ICpn
Z3R0LAorCQkJICAgIGVudW0gaTkxNV9nZ3R0X2JhbGxvb25faWQgaWQsIHU2NCBzdGFydCwgdTY0
IGVuZCk7Cit2b2lkIGk5MTVfZ2d0dF9kZWJhbGxvb25fc3BhY2Uoc3RydWN0IGk5MTVfZ2d0dCAq
Z2d0dCwKKwkJCSAgICAgICBlbnVtIGk5MTVfZ2d0dF9iYWxsb29uX2lkIGlkKTsKKwogLyogRmxh
Z3MgdXNlZCBieSBwaW4vYmluZCZmcmllbmRzLiAqLwogI2RlZmluZSBQSU5fTk9FVklDVAkJQklU
X1VMTCgwKQogI2RlZmluZSBQSU5fTk9TRUFSQ0gJCUJJVF9VTEwoMSkKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdmdwdS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV92Z3B1LmMKaW5kZXggOTY4YmUyNjczNWM1Li4xOTVjMjc3MjVjYmIgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdmdwdS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfdmdwdS5jCkBAIC0xMDYsMzIgKzEwNiw2IEBAIGJvb2wgaW50ZWxfdmdwdV9oYXNfZnVs
bF9wcGd0dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJcmV0dXJuIGRldl9w
cml2LT52Z3B1LmNhcHMgJiBWR1RfQ0FQU19GVUxMX1BQR1RUOwogfQogCi1zdHJ1Y3QgX2JhbGxv
b25faW5mb18gewotCS8qCi0JICogVGhlcmUgYXJlIHVwIHRvIDIgcmVnaW9ucyBwZXIgbWFwcGFi
bGUvdW5tYXBwYWJsZSBncmFwaGljCi0JICogbWVtb3J5IHRoYXQgbWlnaHQgYmUgYmFsbG9vbmVk
LiBIZXJlLCBpbmRleCAwLzEgaXMgZm9yIG1hcHBhYmxlCi0JICogZ3JhcGhpYyBtZW1vcnksIDIv
MyBmb3IgdW5tYXBwYWJsZSBncmFwaGljIG1lbW9yeS4KLQkgKi8KLQlzdHJ1Y3QgZHJtX21tX25v
ZGUgc3BhY2VbNF07Ci19OwotCi1zdGF0aWMgc3RydWN0IF9iYWxsb29uX2luZm9fIGJsX2luZm87
Ci0KLXN0YXRpYyB2b2lkIHZndF9kZWJhbGxvb25fc3BhY2Uoc3RydWN0IGk5MTVfZ2d0dCAqZ2d0
dCwKLQkJCQlzdHJ1Y3QgZHJtX21tX25vZGUgKm5vZGUpCi17Ci0JaWYgKCFkcm1fbW1fbm9kZV9h
bGxvY2F0ZWQobm9kZSkpCi0JCXJldHVybjsKLQotCURSTV9ERUJVR19EUklWRVIoImRlYmFsbG9v
biBzcGFjZTogcmFuZ2UgWzB4JWxseCAtIDB4JWxseF0gJWxsdSBLaUIuXG4iLAotCQkJIG5vZGUt
PnN0YXJ0LAotCQkJIG5vZGUtPnN0YXJ0ICsgbm9kZS0+c2l6ZSwKLQkJCSBub2RlLT5zaXplIC8g
MTAyNCk7Ci0KLQlnZ3R0LT52bS5yZXNlcnZlZCAtPSBub2RlLT5zaXplOwotCWRybV9tbV9yZW1v
dmVfbm9kZShub2RlKTsKLX0KLQogLyoqCiAgKiBpbnRlbF92Z3RfZGViYWxsb29uIC0gZGViYWxs
b29uIHJlc2VydmVkIGdyYXBoaWNzIGFkZHJlc3MgdHJ1bmtzCiAgKiBAZ2d0dDogdGhlIGdsb2Jh
bCBHR1RUIGZyb20gd2hpY2ggd2UgcmVzZXJ2ZWQgZWFybGllcgpAQCAtMTQ5LDI4ICsxMjMsNyBA
QCB2b2lkIGludGVsX3ZndF9kZWJhbGxvb24oc3RydWN0IGk5MTVfZ2d0dCAqZ2d0dCkKIAlEUk1f
REVCVUcoIlZHVCBkZWJhbGxvb24uXG4iKTsKIAogCWZvciAoaSA9IDA7IGkgPCA0OyBpKyspCi0J
CXZndF9kZWJhbGxvb25fc3BhY2UoZ2d0dCwgJmJsX2luZm8uc3BhY2VbaV0pOwotfQotCi1zdGF0
aWMgaW50IHZndF9iYWxsb29uX3NwYWNlKHN0cnVjdCBpOTE1X2dndHQgKmdndHQsCi0JCQkgICAg
IHN0cnVjdCBkcm1fbW1fbm9kZSAqbm9kZSwKLQkJCSAgICAgdW5zaWduZWQgbG9uZyBzdGFydCwg
dW5zaWduZWQgbG9uZyBlbmQpCi17Ci0JdW5zaWduZWQgbG9uZyBzaXplID0gZW5kIC0gc3RhcnQ7
Ci0JaW50IHJldDsKLQotCWlmIChzdGFydCA+PSBlbmQpCi0JCXJldHVybiAtRUlOVkFMOwotCi0J
RFJNX0lORk8oImJhbGxvb24gc3BhY2U6IHJhbmdlIFsgMHglbHggLSAweCVseCBdICVsdSBLaUIu
XG4iLAotCQkgc3RhcnQsIGVuZCwgc2l6ZSAvIDEwMjQpOwotCXJldCA9IGk5MTVfZ2VtX2d0dF9y
ZXNlcnZlKCZnZ3R0LT52bSwgbm9kZSwKLQkJCQkgICBzaXplLCBzdGFydCwgSTkxNV9DT0xPUl9V
TkVWSUNUQUJMRSwKLQkJCQkgICAwKTsKLQlpZiAoIXJldCkKLQkJZ2d0dC0+dm0ucmVzZXJ2ZWQg
Kz0gc2l6ZTsKLQotCXJldHVybiByZXQ7CisJCWk5MTVfZ2d0dF9kZWJhbGxvb25fc3BhY2UoZ2d0
dCwgSTkxNV9HR1RUX0JBTExPT04wICsgaSk7CiB9CiAKIC8qKgpAQCAtMjU2LDMyICsyMDksMzMg
QEAgaW50IGludGVsX3ZndF9iYWxsb29uKHN0cnVjdCBpOTE1X2dndHQgKmdndHQpCiAKIAkvKiBV
bm1hcHBhYmxlIGdyYXBoaWMgbWVtb3J5IGJhbGxvb25pbmcgKi8KIAlpZiAodW5tYXBwYWJsZV9i
YXNlID4gZ2d0dC0+bWFwcGFibGVfZW5kKSB7Ci0JCXJldCA9IHZndF9iYWxsb29uX3NwYWNlKGdn
dHQsICZibF9pbmZvLnNwYWNlWzJdLAotCQkJCQlnZ3R0LT5tYXBwYWJsZV9lbmQsIHVubWFwcGFi
bGVfYmFzZSk7CisJCXJldCA9IGk5MTVfZ2d0dF9iYWxsb29uX3NwYWNlKGdndHQsIEk5MTVfR0dU
VF9CQUxMT09OMiwKKwkJCQkJICAgICAgZ2d0dC0+bWFwcGFibGVfZW5kLAorCQkJCQkgICAgICB1
bm1hcHBhYmxlX2Jhc2UpOwogCiAJCWlmIChyZXQpCiAJCQlnb3RvIGVycjsKIAl9CiAKIAlpZiAo
dW5tYXBwYWJsZV9lbmQgPCBnZ3R0X2VuZCkgewotCQlyZXQgPSB2Z3RfYmFsbG9vbl9zcGFjZShn
Z3R0LCAmYmxfaW5mby5zcGFjZVszXSwKLQkJCQkJdW5tYXBwYWJsZV9lbmQsIGdndHRfZW5kKTsK
KwkJcmV0ID0gaTkxNV9nZ3R0X2JhbGxvb25fc3BhY2UoZ2d0dCwgSTkxNV9HR1RUX0JBTExPT04z
LAorCQkJCQkgICAgICB1bm1hcHBhYmxlX2VuZCwgZ2d0dF9lbmQpOwogCQlpZiAocmV0KQogCQkJ
Z290byBlcnJfdXBvbl9tYXBwYWJsZTsKIAl9CiAKIAkvKiBNYXBwYWJsZSBncmFwaGljIG1lbW9y
eSBiYWxsb29uaW5nICovCiAJaWYgKG1hcHBhYmxlX2Jhc2UpIHsKLQkJcmV0ID0gdmd0X2JhbGxv
b25fc3BhY2UoZ2d0dCwgJmJsX2luZm8uc3BhY2VbMF0sCi0JCQkJCTAsIG1hcHBhYmxlX2Jhc2Up
OworCQlyZXQgPSBpOTE1X2dndHRfYmFsbG9vbl9zcGFjZShnZ3R0LCBJOTE1X0dHVFRfQkFMTE9P
TjAsCisJCQkJCSAgICAgIDAsIG1hcHBhYmxlX2Jhc2UpOwogCiAJCWlmIChyZXQpCiAJCQlnb3Rv
IGVycl91cG9uX3VubWFwcGFibGU7CiAJfQogCiAJaWYgKG1hcHBhYmxlX2VuZCA8IGdndHQtPm1h
cHBhYmxlX2VuZCkgewotCQlyZXQgPSB2Z3RfYmFsbG9vbl9zcGFjZShnZ3R0LCAmYmxfaW5mby5z
cGFjZVsxXSwKLQkJCQkJbWFwcGFibGVfZW5kLCBnZ3R0LT5tYXBwYWJsZV9lbmQpOworCQlyZXQg
PSBpOTE1X2dndHRfYmFsbG9vbl9zcGFjZShnZ3R0LCBJOTE1X0dHVFRfQkFMTE9PTjEsCisJCQkJ
CSAgICAgIG1hcHBhYmxlX2VuZCwgZ2d0dC0+bWFwcGFibGVfZW5kKTsKIAogCQlpZiAocmV0KQog
CQkJZ290byBlcnJfYmVsb3dfbWFwcGFibGU7CkBAIC0yOTEsMTEgKzI0NSwxMSBAQCBpbnQgaW50
ZWxfdmd0X2JhbGxvb24oc3RydWN0IGk5MTVfZ2d0dCAqZ2d0dCkKIAlyZXR1cm4gMDsKIAogZXJy
X2JlbG93X21hcHBhYmxlOgotCXZndF9kZWJhbGxvb25fc3BhY2UoZ2d0dCwgJmJsX2luZm8uc3Bh
Y2VbMF0pOworCWk5MTVfZ2d0dF9kZWJhbGxvb25fc3BhY2UoZ2d0dCwgSTkxNV9HR1RUX0JBTExP
T04wKTsKIGVycl91cG9uX3VubWFwcGFibGU6Ci0Jdmd0X2RlYmFsbG9vbl9zcGFjZShnZ3R0LCAm
YmxfaW5mby5zcGFjZVszXSk7CisJaTkxNV9nZ3R0X2RlYmFsbG9vbl9zcGFjZShnZ3R0LCBJOTE1
X0dHVFRfQkFMTE9PTjMpOwogZXJyX3Vwb25fbWFwcGFibGU6Ci0Jdmd0X2RlYmFsbG9vbl9zcGFj
ZShnZ3R0LCAmYmxfaW5mby5zcGFjZVsyXSk7CisJaTkxNV9nZ3R0X2RlYmFsbG9vbl9zcGFjZShn
Z3R0LCBJOTE1X0dHVFRfQkFMTE9PTjIpOwogZXJyOgogCURSTV9FUlJPUigiVkdUIGJhbGxvb24g
ZmFpbFxuIik7CiAJcmV0dXJuIHJldDsKLS0gCjIuMTkuMgoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

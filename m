Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 91D5126783
	for <lists+intel-gfx@lfdr.de>; Wed, 22 May 2019 17:57:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C90E789C51;
	Wed, 22 May 2019 15:57:40 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7071189C2A;
 Wed, 22 May 2019 15:57:39 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 May 2019 08:57:39 -0700
X-ExtLoop1: 1
Received: from dmironox-mobl5.ccr.corp.intel.com (HELO localhost.localdomain)
 ([10.252.20.122])
 by fmsmga005.fm.intel.com with ESMTP; 22 May 2019 08:57:37 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: igt-dev@lists.freedesktop.org
Date: Wed, 22 May 2019 16:57:13 +0100
Message-Id: <20190522155720.28723-9-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190522155720.28723-1-tvrtko.ursulin@linux.intel.com>
References: <20190522155720.28723-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t 08/15] gem_wsim: Command line switch for
 specifying low slice count workloads
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCkEgbmV3IGNv
bW1hbmQgbGluZSBzd2l0Y2ggKCctcycpIGlzIGFkZGVkIHdoaWNoIHRvZ2dsZXMgdGhlIGxvdyBz
bGljZQpjb3VudCBtb2RlIGZvciB3b3JrbG9hZHMgZm9sbG93aW5nIG9uIHRoZSBjb21tYW5kIGxp
bmUuCgpUaGlzIGVuYWJsZXMgZWFzeSBiZW5jaG1hcmtpbmcgb2YgdGhlIGVmZmVjdCBvZiBydW5u
aW5nIHRoZSBleGlzdGluZyBtZWRpYQp3b3JrbG9hZHMgaW4gcGFyYWxsZWwgYWdhaW5zdCBhbm90
aGVyIGNsaWVudC4gRm9yIGV4YW1wbGU6CgogIC4vZ2VtX3dzaW0gLW4gLi4uIC12IC1yIDYwMCAt
VyBtYXN0ZXIud3NpbSAtcyAtdyBtZWRpYV9ubjQ4MC53c2ltCgpBZGRpbmcgb3IgcmVtb3Zpbmcg
dGhlICctcycgc3dpdGNoIGJlZm9yZSB0aGUgc2Vjb25kIHdvcmtsb2FkIGVuYWJsZXMKYW5hbHl6
aW5nIHRoZSBjb3N0IG9mIGR5bmFtaWMgU1NFVSBzd2l0Y2hpbmcgaW1wYWN0ZWQgdG8gdGhlIGZp
cnN0CihtYXN0ZXIpIHdvcmtsb2FkLgoKU2lnbmVkLW9mZi1ieTogVHZydGtvIFVyc3VsaW4gPHR2
cnRrby51cnN1bGluQGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNA
Y2hyaXMtd2lsc29uLmNvLnVrPgotLS0KIGJlbmNobWFya3MvZ2VtX3dzaW0uYyB8IDQ0ICsrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA0
MCBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2JlbmNobWFya3Mv
Z2VtX3dzaW0uYyBiL2JlbmNobWFya3MvZ2VtX3dzaW0uYwppbmRleCA0N2ExZGRhZjg3OTIuLjhk
ZDg4N2E1YWZkOCAxMDA2NDQKLS0tIGEvYmVuY2htYXJrcy9nZW1fd3NpbS5jCisrKyBiL2JlbmNo
bWFya3MvZ2VtX3dzaW0uYwpAQCAtMTAwLDYgKzEwMCw3IEBAIHN0cnVjdCB3X2FyZyB7CiAJY2hh
ciAqZmlsZW5hbWU7CiAJY2hhciAqZGVzYzsKIAlpbnQgcHJpbzsKKwlib29sIHNzZXU7CiB9Owog
CiBzdHJ1Y3QgYm9uZCB7CkBAIC0xNzksNiArMTgwLDcgQEAgc3RydWN0IHdvcmtsb2FkCiAJdW5z
aWduZWQgaW50IG5yX3N0ZXBzOwogCXN0cnVjdCB3X3N0ZXAgKnN0ZXBzOwogCWludCBwcmlvOwor
CWJvb2wgc3NldTsKIAogCXB0aHJlYWRfdCB0aHJlYWQ7CiAJYm9vbCBydW47CkBAIC0yNTEsNiAr
MjUzLDcgQEAgc3RhdGljIGludCBmZDsKICNkZWZpbmUgR0xPQkFMX0JBTEFOQ0UJKDE8PDgpCiAj
ZGVmaW5lIERFUFNZTkMJCSgxPDw5KQogI2RlZmluZSBJOTE1CQkoMTw8MTApCisjZGVmaW5lIFNT
RVUJCSgxPDwxMSkKIAogI2RlZmluZSBTRVFOT19JRFgoZW5naW5lKSAoKGVuZ2luZSkgKiAxNikK
ICNkZWZpbmUgU0VRTk9fT0ZGU0VUKGVuZ2luZSkgKFNFUU5PX0lEWChlbmdpbmUpICogc2l6ZW9m
KHVpbnQzMl90KSkKQEAgLTcyNiw2ICs3MjksNyBAQCBhZGRfc3RlcDoKIAl3cmstPm5yX3N0ZXBz
ID0gbnJfc3RlcHM7CiAJd3JrLT5zdGVwcyA9IHN0ZXBzOwogCXdyay0+cHJpbyA9IGFyZy0+cHJp
bzsKKwl3cmstPnNzZXUgPSBhcmctPnNzZXU7CiAKIAlmcmVlKGRlc2MpOwogCkBAIC03NzEsNiAr
Nzc1LDcgQEAgY2xvbmVfd29ya2xvYWQoc3RydWN0IHdvcmtsb2FkICpfd3JrKQogCW1lbXNldCh3
cmssIDAsIHNpemVvZigqd3JrKSk7CiAKIAl3cmstPnByaW8gPSBfd3JrLT5wcmlvOworCXdyay0+
c3NldSA9IF93cmstPnNzZXU7CiAJd3JrLT5ucl9zdGVwcyA9IF93cmstPm5yX3N0ZXBzOwogCXdy
ay0+c3RlcHMgPSBjYWxsb2Mod3JrLT5ucl9zdGVwcywgc2l6ZW9mKHN0cnVjdCB3X3N0ZXApKTsK
IAlpZ3RfYXNzZXJ0KHdyay0+c3RlcHMpOwpAQCAtMTEzNiw2ICsxMTQxLDI2IEBAIGZpbmRfZW5n
aW5lKHN0cnVjdCBpOTE1X2VuZ2luZV9jbGFzc19pbnN0YW5jZSAqY2ksIHVuc2lnbmVkIGludCBj
b3VudCwKIAlyZXR1cm4gMDsKIH0KIAorc3RhdGljIHZvaWQKK3NldF9jdHhfc3NldSh1aW50MzJf
dCBjdHgpCit7CisJc3RydWN0IGRybV9pOTE1X2dlbV9jb250ZXh0X3BhcmFtX3NzZXUgc3NldSA9
IHsgfTsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2NvbnRleHRfcGFyYW0gcGFyYW0gPSB7IH07CisK
Kwlzc2V1LmNsYXNzID0gSTkxNV9FTkdJTkVfQ0xBU1NfUkVOREVSOworCXNzZXUuaW5zdGFuY2Ug
PSAwOworCisJcGFyYW0uY3R4X2lkID0gY3R4OworCXBhcmFtLnBhcmFtID0gSTkxNV9DT05URVhU
X1BBUkFNX1NTRVU7CisJcGFyYW0udmFsdWUgPSAodWludHB0cl90KSZzc2V1OworCisJZ2VtX2Nv
bnRleHRfZ2V0X3BhcmFtKGZkLCAmcGFyYW0pOworCisJc3NldS5zbGljZV9tYXNrID0gMTsKKwor
CWdlbV9jb250ZXh0X3NldF9wYXJhbShmZCwgJnBhcmFtKTsKK30KKwogc3RhdGljIGludAogcHJl
cGFyZV93b3JrbG9hZCh1bnNpZ25lZCBpbnQgaWQsIHN0cnVjdCB3b3JrbG9hZCAqd3JrLCB1bnNp
Z25lZCBpbnQgZmxhZ3MpCiB7CkBAIC0xNDg3LDYgKzE1MTIsOSBAQCBwcmVwYXJlX3dvcmtsb2Fk
KHVuc2lnbmVkIGludCBpZCwgc3RydWN0IHdvcmtsb2FkICp3cmssIHVuc2lnbmVkIGludCBmbGFn
cykKIAkJCWdlbV9jb250ZXh0X3NldF9wYXJhbShmZCwgJnBhcmFtKTsKIAkJfQogCisJCWlmICh3
cmstPnNzZXUpCisJCQlzZXRfY3R4X3NzZXUoYXJnLmN0eF9pZCk7CisKIAkJaWYgKHNoYXJlX3Zt
KQogCQkJdm1fZGVzdHJveShmZCwgc2hhcmVfdm0pOwogCX0KQEAgLTI2NjEsNiArMjY4OSw4IEBA
IHN0YXRpYyB2b2lkIHByaW50X2hlbHAodm9pZCkKICIgIC1SICAgICAgICAgICAgICBSb3VuZC1y
b2JpbiBpbml0aWFsIFZDUyBhc3NpZ25tZW50IHBlciBjbGllbnQuXG4iCiAiICAtSCAgICAgICAg
ICAgICAgU2VuZCBoZWFydGJlYXQgb24gc3luY2hyb25pc2F0aW9uIHBvaW50cyB3aXRoIHNlcW5v
IGJhc2VkXG4iCiAiICAgICAgICAgICAgICAgICAgYmFsYW5jZXJzLiBHaXZlcyBiZXR0ZXIgZW5n
aW5lIGJ1c3luZXNzIHZpZXcgaW4gc29tZSBjYXNlcy5cbiIKKyIgIC1zICAgICAgICAgICAgICBU
dXJuIG9uIHNtYWxsIFNTRVUgY29uZmlnIGZvciB0aGUgbmV4dCB3b3JrbG9hZCBvbiB0aGVcbiIK
KyIgICAgICAgICAgICAgICAgICBjb21tYW5kIGxpbmUuIFN1YnNlcXVlbnQgLXMgc3dpdGNoZXMg
aXQgb2ZmLlxuIgogIiAgLVMgICAgICAgICAgICAgIFN5bmNocm9uaXplIHRoZSBzZXF1ZW5jZSBv
ZiByYW5kb20gYmF0Y2ggZHVyYXRpb25zIGJldHdlZW5cbiIKICIgICAgICAgICAgICAgICAgICBj
bGllbnRzLlxuIgogIiAgLUcgICAgICAgICAgICAgIEdsb2JhbCBsb2FkIGJhbGFuY2luZyAtIGEg
c2luZ2xlIGxvYWQgYmFsYW5jZXIgd2lsbCBiZSBzaGFyZWRcbiIKQEAgLTI3MDMsMTEgKzI3MzMs
MTIgQEAgc3RhdGljIGNoYXIgKmxvYWRfd29ya2xvYWRfZGVzY3JpcHRvcihjaGFyICpmaWxlbmFt
ZSkKIH0KIAogc3RhdGljIHN0cnVjdCB3X2FyZyAqCi1hZGRfd29ya2xvYWRfYXJnKHN0cnVjdCB3
X2FyZyAqd19hcmdzLCB1bnNpZ25lZCBpbnQgbnJfYXJncywgY2hhciAqd19hcmcsIGludCBwcmlv
KQorYWRkX3dvcmtsb2FkX2FyZyhzdHJ1Y3Qgd19hcmcgKndfYXJncywgdW5zaWduZWQgaW50IG5y
X2FyZ3MsIGNoYXIgKndfYXJnLAorCQkgaW50IHByaW8sIGJvb2wgc3NldSkKIHsKIAl3X2FyZ3Mg
PSByZWFsbG9jKHdfYXJncywgc2l6ZW9mKCp3X2FyZ3MpICogbnJfYXJncyk7CiAJaWd0X2Fzc2Vy
dCh3X2FyZ3MpOwotCXdfYXJnc1tucl9hcmdzIC0gMV0gPSAoc3RydWN0IHdfYXJnKSB7IHdfYXJn
LCBOVUxMLCBwcmlvIH07CisJd19hcmdzW25yX2FyZ3MgLSAxXSA9IChzdHJ1Y3Qgd19hcmcpIHsg
d19hcmcsIE5VTEwsIHByaW8sIHNzZXUgfTsKIAogCXJldHVybiB3X2FyZ3M7CiB9CkBAIC0yODAw
LDcgKzI4MzEsOCBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAKIAlpbml0X2Ns
b2NrcygpOwogCi0Jd2hpbGUgKChjID0gZ2V0b3B0KGFyZ2MsIGFyZ3YsICJocXYyUlNIeEdkYzpu
OnI6dzpXOmE6dDpiOnA6IikpICE9IC0xKSB7CisJd2hpbGUgKChjID0gZ2V0b3B0KGFyZ2MsIGFy
Z3YsCisJCQkgICAiaHF2MlJzU0h4R2RjOm46cjp3Olc6YTp0OmI6cDoiKSkgIT0gLTEpIHsKIAkJ
c3dpdGNoIChjKSB7CiAJCWNhc2UgJ1cnOgogCQkJaWYgKG1hc3Rlcl93b3JrbG9hZCA+PSAwKSB7
CkBAIC0yODEwLDcgKzI4NDIsOCBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAJ
CQltYXN0ZXJfd29ya2xvYWQgPSBucl93X2FyZ3M7CiAJCQkvKiBGYWxsIHRocm91Z2ggKi8KIAkJ
Y2FzZSAndyc6Ci0JCQl3X2FyZ3MgPSBhZGRfd29ya2xvYWRfYXJnKHdfYXJncywgKytucl93X2Fy
Z3MsIG9wdGFyZywgcHJpbyk7CisJCQl3X2FyZ3MgPSBhZGRfd29ya2xvYWRfYXJnKHdfYXJncywg
Kytucl93X2FyZ3MsIG9wdGFyZywKKwkJCQkJCSAgcHJpbywgZmxhZ3MgJiBTU0VVKTsKIAkJCWJy
ZWFrOwogCQljYXNlICdwJzoKIAkJCXByaW8gPSBhdG9pKG9wdGFyZyk7CkBAIC0yODUyLDYgKzI4
ODUsOSBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAJCWNhc2UgJ1MnOgogCQkJ
ZmxhZ3MgfD0gU1lOQ0VEQ0xJRU5UUzsKIAkJCWJyZWFrOworCQljYXNlICdzJzoKKwkJCWZsYWdz
IF49IFNTRVU7CisJCQlicmVhazsKIAkJY2FzZSAnSCc6CiAJCQlmbGFncyB8PSBIRUFSVEJFQVQ7
CiAJCQlicmVhazsKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vaW50ZWwtZ2Z4

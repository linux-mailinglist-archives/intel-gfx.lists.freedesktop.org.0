Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A32308FD0D
	for <lists+intel-gfx@lfdr.de>; Fri, 16 Aug 2019 10:06:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AF91B6EB28;
	Fri, 16 Aug 2019 08:06:19 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5817C6EB1D
 for <intel-gfx@lists.freedesktop.org>; Fri, 16 Aug 2019 08:06:01 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 16 Aug 2019 01:06:01 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,391,1559545200"; d="scan'208";a="184851563"
Received: from miyoungj-mobl1.amr.corp.intel.com (HELO
 ldmartin-desk1.intel.com) ([10.254.105.68])
 by FMSMGA003.fm.intel.com with ESMTP; 16 Aug 2019 01:05:59 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 16 Aug 2019 01:04:47 -0700
Message-Id: <20190816080503.28594-24-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190816080503.28594-1-lucas.demarchi@intel.com>
References: <20190816080503.28594-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 23/39] drm/i915/tgl: Register state context
 definition for Gen12
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Michel Thierry <michel.thierry@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogTWljaGVsIFRoaWVycnkgPG1pY2hlbC50aGllcnJ5QGludGVsLmNvbT4KCkdlbjEyIGhh
cyBzdWJ0bGUgY2hhbmdlcyBpbiB0aGUgcmVnIHN0YXRlIGNvbnRleHQgb2Zmc2V0cyAoc29tZSBm
aWVsZHMKYXJlIGdvbmUsIHNvbWUgYXJlIGluIGEgZGlmZmVyZW50IGxvY2F0aW9uKSwgY29tcGFy
ZWQgdG8gcHJldmlvdXMgR2Vucy4KClRoZSBzaW1wbGVzdCBhcHByb2FjaCBzZWVtcyB0byBiZSBr
ZWVwaW5nIEdlbjEyIChhbmQgZnV0dXJlIHBsYXRmb3JtKQpjaGFuZ2VzIGFwYXJ0IGZyb20gdGhl
IHByZXZpb3VzIGdlbnMsIHdoaWxlIGtlZXBpbmcgdGhlIHJlZ2lzdGVycyB0aGF0CmFyZSBjb250
aWd1b3VzIGluIGZ1bmN0aW9ucyB3ZSBjYW4gcmV1c2UuCgp2MjogJ2dlbjgnIHByZWZpeCBpbiB0
aGUgbGVnYWN5IGZ1bmN0aW9uIChNaWNoYWwpCnYzOiBSZWJhc2UgKGNsZWFyIHNhdmUtaW5oaWJp
dCBiaXQpLgp2NDogR3JvdXAgc29tZSByZWdpc3RlcnMgaW50byBmdW5jdGlvbnMgKGhlbHBzIHRv
IGNhdGNoIGFueSBjaGFuZ2VzIGluCnRoZSBnZW44IHBhdGgpLCBmaXggbGVuZ3RoIG9mIGZpcnN0
IExSSSBmb3Igbm9uLXJjcyB0byBpbmNsdWRlIHRoZSBzZW1hcGhvcmUKdG9rZW4sIHNraXAgdGhl
IEdFTjEyX0NUWF9MUklfSEVBREVSXzIgdGhhdCBpcyBhbHdheXMgZW1wdHkgZm9yIG5vdyAoRGFu
aWVsZSkKdjU6IFJlYmFzZSEgY3R4LT5wcGd0dCBpcyBubyBtb3JlIChMdWNhcykKCkJzcGVjOiAy
MDIwMgpTaWduZWQtb2ZmLWJ5OiBNaWNoZWwgVGhpZXJyeSA8bWljaGVsLnRoaWVycnlAaW50ZWwu
Y29tPgpDYzogTWljaGFsIFdhamRlY3prbyA8bWljaGFsLndhamRlY3prb0BpbnRlbC5jb20+CkNj
OiBEYW5pZWxlIENlcmFvbG8gU3B1cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29t
PgpSZXZpZXdlZC1ieTogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1
cmlvQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAg
ICAgfCAxNTYgKysrKysrKysrKysrKysrKystLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9scmMuaCAgICAgfCAgIDIgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
bHJjX3JlZy5oIHwgIDMwICsrKystCiAzIGZpbGVzIGNoYW5nZWQsIDE0MyBpbnNlcnRpb25zKCsp
LCA0NSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCmluZGV4IGZh
ZmFlN2M3YWYwZC4uMzVhNWFkNTc1ZTEyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9scmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMu
YwpAQCAtMjk5OSwyOCArMjk5OSwxMiBAQCBzdGF0aWMgdTMyIGludGVsX2xyX2luZGlyZWN0X2N0
eF9vZmZzZXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCXJldHVybiBpbmRpcmVj
dF9jdHhfb2Zmc2V0OwogfQogCi1zdGF0aWMgdm9pZCBleGVjbGlzdHNfaW5pdF9yZWdfc3RhdGUo
dTMyICpyZWdzLAotCQkJCSAgICAgc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAotCQkJCSAgICAg
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAotCQkJCSAgICAgc3RydWN0IGludGVsX3Jp
bmcgKnJpbmcpCitzdGF0aWMgdm9pZCBpbml0X2NvbW1vbl9yZWdfc3RhdGUodTMyICpyZWdzLAor
CQkJCSAgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAorCQkJCSAgc3RydWN0IGludGVs
X3JpbmcgKnJpbmcpCiB7Ci0Jc3RydWN0IGk5MTVfcHBndHQgKnBwZ3R0ID0gaTkxNV92bV90b19w
cGd0dChjZS0+dm0pOwotCWJvb2wgcmNzID0gZW5naW5lLT5jbGFzcyA9PSBSRU5ERVJfQ0xBU1M7
CiAJdTMyIGJhc2UgPSBlbmdpbmUtPm1taW9fYmFzZTsKIAotCS8qCi0JICogQSBjb250ZXh0IGlz
IGFjdHVhbGx5IGEgYmlnIGJhdGNoIGJ1ZmZlciB3aXRoIHNldmVyYWwKLQkgKiBNSV9MT0FEX1JF
R0lTVEVSX0lNTSBjb21tYW5kcyBmb2xsb3dlZCBieSAocmVnLCB2YWx1ZSkgcGFpcnMuIFRoZQot
CSAqIHZhbHVlcyB3ZSBhcmUgc2V0dGluZyBoZXJlIGFyZSBvbmx5IGZvciB0aGUgZmlyc3QgY29u
dGV4dCByZXN0b3JlOgotCSAqIG9uIGEgc3Vic2VxdWVudCBzYXZlLCB0aGUgR1BVIHdpbGwgcmVj
cmVhdGUgdGhpcyBiYXRjaGJ1ZmZlciB3aXRoIG5ldwotCSAqIHZhbHVlcyAoaW5jbHVkaW5nIGFs
bCB0aGUgbWlzc2luZyBNSV9MT0FEX1JFR0lTVEVSX0lNTSBjb21tYW5kcyB0aGF0Ci0JICogd2Ug
YXJlIG5vdCBpbml0aWFsaXppbmcgaGVyZSkuCi0JICoKLQkgKiBNdXN0IGtlZXAgY29uc2lzdGVu
dCB3aXRoIHZpcnR1YWxfdXBkYXRlX3JlZ2lzdGVyX29mZnNldHMoKS4KLQkgKi8KLQlyZWdzW0NU
WF9MUklfSEVBREVSXzBdID0gTUlfTE9BRF9SRUdJU1RFUl9JTU0ocmNzID8gMTQgOiAxMSkgfAot
CQkJCSBNSV9MUklfRk9SQ0VfUE9TVEVEOwotCiAJQ1RYX1JFRyhyZWdzLCBDVFhfQ09OVEVYVF9D
T05UUk9MLCBSSU5HX0NPTlRFWFRfQ09OVFJPTChiYXNlKSwKIAkJX01BU0tFRF9CSVRfRElTQUJM
RShDVFhfQ1RSTF9FTkdJTkVfQ1RYX1JFU1RPUkVfSU5ISUJJVCkgfAogCQlfTUFTS0VEX0JJVF9F
TkFCTEUoQ1RYX0NUUkxfSU5ISUJJVF9TWU5fQ1RYX1NXSVRDSCkpOwpAQCAtMzAzNywzOCArMzAy
MSw0NCBAQCBzdGF0aWMgdm9pZCBleGVjbGlzdHNfaW5pdF9yZWdfc3RhdGUodTMyICpyZWdzLAog
CUNUWF9SRUcocmVncywgQ1RYX0JCX0hFQURfVSwgUklOR19CQkFERFJfVURXKGJhc2UpLCAwKTsK
IAlDVFhfUkVHKHJlZ3MsIENUWF9CQl9IRUFEX0wsIFJJTkdfQkJBRERSKGJhc2UpLCAwKTsKIAlD
VFhfUkVHKHJlZ3MsIENUWF9CQl9TVEFURSwgUklOR19CQlNUQVRFKGJhc2UpLCBSSU5HX0JCX1BQ
R1RUKTsKLQlDVFhfUkVHKHJlZ3MsIENUWF9TRUNPTkRfQkJfSEVBRF9VLCBSSU5HX1NCQkFERFJf
VURXKGJhc2UpLCAwKTsKLQlDVFhfUkVHKHJlZ3MsIENUWF9TRUNPTkRfQkJfSEVBRF9MLCBSSU5H
X1NCQkFERFIoYmFzZSksIDApOwotCUNUWF9SRUcocmVncywgQ1RYX1NFQ09ORF9CQl9TVEFURSwg
UklOR19TQkJTVEFURShiYXNlKSwgMCk7Ci0JaWYgKHJjcykgewotCQlzdHJ1Y3QgaTkxNV9jdHhf
d29ya2Fyb3VuZHMgKndhX2N0eCA9ICZlbmdpbmUtPndhX2N0eDsKLQotCQlDVFhfUkVHKHJlZ3Ms
IENUWF9SQ1NfSU5ESVJFQ1RfQ1RYLCBSSU5HX0lORElSRUNUX0NUWChiYXNlKSwgMCk7Ci0JCUNU
WF9SRUcocmVncywgQ1RYX1JDU19JTkRJUkVDVF9DVFhfT0ZGU0VULAotCQkJUklOR19JTkRJUkVD
VF9DVFhfT0ZGU0VUKGJhc2UpLCAwKTsKLQkJaWYgKHdhX2N0eC0+aW5kaXJlY3RfY3R4LnNpemUp
IHsKLQkJCXUzMiBnZ3R0X29mZnNldCA9IGk5MTVfZ2d0dF9vZmZzZXQod2FfY3R4LT52bWEpOwor
fQogCi0JCQlyZWdzW0NUWF9SQ1NfSU5ESVJFQ1RfQ1RYICsgMV0gPQotCQkJCShnZ3R0X29mZnNl
dCArIHdhX2N0eC0+aW5kaXJlY3RfY3R4Lm9mZnNldCkgfAotCQkJCSh3YV9jdHgtPmluZGlyZWN0
X2N0eC5zaXplIC8gQ0FDSEVMSU5FX0JZVEVTKTsKK3N0YXRpYyB2b2lkIGluaXRfd2FfYmJfcmVn
X3N0YXRlKHUzMiAqcmVncywKKwkJCQkgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAor
CQkJCSB1MzIgcG9zX2JiX3Blcl9jdHgpCit7CisJc3RydWN0IGk5MTVfY3R4X3dvcmthcm91bmRz
ICp3YV9jdHggPSAmZW5naW5lLT53YV9jdHg7CisJdTMyIGJhc2UgPSBlbmdpbmUtPm1taW9fYmFz
ZTsKKwl1MzIgcG9zX2luZGlyZWN0X2N0eCA9IHBvc19iYl9wZXJfY3R4ICsgMjsKKwl1MzIgcG9z
X2luZGlyZWN0X2N0eF9vZmZzZXQgPSBwb3NfaW5kaXJlY3RfY3R4ICsgMjsKIAotCQkJcmVnc1tD
VFhfUkNTX0lORElSRUNUX0NUWF9PRkZTRVQgKyAxXSA9Ci0JCQkJaW50ZWxfbHJfaW5kaXJlY3Rf
Y3R4X29mZnNldChlbmdpbmUpIDw8IDY7Ci0JCX0KKwlHRU1fQlVHX09OKGVuZ2luZS0+aWQgIT0g
UkNTMCk7CisJQ1RYX1JFRyhyZWdzLCBwb3NfaW5kaXJlY3RfY3R4LCBSSU5HX0lORElSRUNUX0NU
WChiYXNlKSwgMCk7CisJQ1RYX1JFRyhyZWdzLCBwb3NfaW5kaXJlY3RfY3R4X29mZnNldCwKKwkJ
UklOR19JTkRJUkVDVF9DVFhfT0ZGU0VUKGJhc2UpLCAwKTsKKwlpZiAod2FfY3R4LT5pbmRpcmVj
dF9jdHguc2l6ZSkgeworCQl1MzIgZ2d0dF9vZmZzZXQgPSBpOTE1X2dndHRfb2Zmc2V0KHdhX2N0
eC0+dm1hKTsKIAotCQlDVFhfUkVHKHJlZ3MsIENUWF9CQl9QRVJfQ1RYX1BUUiwgUklOR19CQl9Q
RVJfQ1RYX1BUUihiYXNlKSwgMCk7Ci0JCWlmICh3YV9jdHgtPnBlcl9jdHguc2l6ZSkgewotCQkJ
dTMyIGdndHRfb2Zmc2V0ID0gaTkxNV9nZ3R0X29mZnNldCh3YV9jdHgtPnZtYSk7CisJCXJlZ3Nb
cG9zX2luZGlyZWN0X2N0eCArIDFdID0KKwkJCShnZ3R0X29mZnNldCArIHdhX2N0eC0+aW5kaXJl
Y3RfY3R4Lm9mZnNldCkgfAorCQkJKHdhX2N0eC0+aW5kaXJlY3RfY3R4LnNpemUgLyBDQUNIRUxJ
TkVfQllURVMpOwogCi0JCQlyZWdzW0NUWF9CQl9QRVJfQ1RYX1BUUiArIDFdID0KLQkJCQkoZ2d0
dF9vZmZzZXQgKyB3YV9jdHgtPnBlcl9jdHgub2Zmc2V0KSB8IDB4MDE7Ci0JCX0KKwkJcmVnc1tw
b3NfaW5kaXJlY3RfY3R4X29mZnNldCArIDFdID0KKwkJCWludGVsX2xyX2luZGlyZWN0X2N0eF9v
ZmZzZXQoZW5naW5lKSA8PCA2OwogCX0KIAotCXJlZ3NbQ1RYX0xSSV9IRUFERVJfMV0gPSBNSV9M
T0FEX1JFR0lTVEVSX0lNTSg5KSB8IE1JX0xSSV9GT1JDRV9QT1NURUQ7CisJQ1RYX1JFRyhyZWdz
LCBwb3NfYmJfcGVyX2N0eCwgUklOR19CQl9QRVJfQ1RYX1BUUihiYXNlKSwgMCk7CisJaWYgKHdh
X2N0eC0+cGVyX2N0eC5zaXplKSB7CisJCXUzMiBnZ3R0X29mZnNldCA9IGk5MTVfZ2d0dF9vZmZz
ZXQod2FfY3R4LT52bWEpOwogCi0JQ1RYX1JFRyhyZWdzLCBDVFhfQ1RYX1RJTUVTVEFNUCwgUklO
R19DVFhfVElNRVNUQU1QKGJhc2UpLCAwKTsKKwkJcmVnc1twb3NfYmJfcGVyX2N0eCArIDFdID0K
KwkJCShnZ3R0X29mZnNldCArIHdhX2N0eC0+cGVyX2N0eC5vZmZzZXQpIHwgMHgwMTsKKwl9Cit9
CisKK3N0YXRpYyB2b2lkIGluaXRfcHBndHRfcmVnX3N0YXRlKHUzMiAqcmVncywgdTMyIGJhc2Us
CisJCQkJIHN0cnVjdCBpOTE1X3BwZ3R0ICpwcGd0dCkKK3sKIAkvKiBQRFAgdmFsdWVzIHdlbGwg
YmUgYXNzaWduZWQgbGF0ZXIgaWYgbmVlZGVkICovCiAJQ1RYX1JFRyhyZWdzLCBDVFhfUERQM19V
RFcsIEdFTjhfUklOR19QRFBfVURXKGJhc2UsIDMpLCAwKTsKIAlDVFhfUkVHKHJlZ3MsIENUWF9Q
RFAzX0xEVywgR0VOOF9SSU5HX1BEUF9MRFcoYmFzZSwgMyksIDApOwpAQCAtMzA5MSw2ICszMDgx
LDMyIEBAIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19pbml0X3JlZ19zdGF0ZSh1MzIgKnJlZ3MsCiAJ
CUFTU0lHTl9DVFhfUERQKHBwZ3R0LCByZWdzLCAxKTsKIAkJQVNTSUdOX0NUWF9QRFAocHBndHQs
IHJlZ3MsIDApOwogCX0KK30KKworc3RhdGljIHZvaWQgZ2VuOF9pbml0X3JlZ19zdGF0ZSh1MzIg
KnJlZ3MsCisJCQkJc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAorCQkJCXN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZSwKKwkJCQlzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKK3sKKwlzdHJ1
Y3QgaTkxNV9wcGd0dCAqcHBndHQgPSBpOTE1X3ZtX3RvX3BwZ3R0KGNlLT52bSk7CisJYm9vbCBy
Y3MgPSBlbmdpbmUtPmNsYXNzID09IFJFTkRFUl9DTEFTUzsKKwl1MzIgYmFzZSA9IGVuZ2luZS0+
bW1pb19iYXNlOworCisJcmVnc1tDVFhfTFJJX0hFQURFUl8wXSA9IE1JX0xPQURfUkVHSVNURVJf
SU1NKHJjcyA/IDE0IDogMTEpIHwKKwkJCQkgTUlfTFJJX0ZPUkNFX1BPU1RFRDsKKworCWluaXRf
Y29tbW9uX3JlZ19zdGF0ZShyZWdzLCBlbmdpbmUsIHJpbmcpOworCUNUWF9SRUcocmVncywgQ1RY
X1NFQ09ORF9CQl9IRUFEX1UsIFJJTkdfU0JCQUREUl9VRFcoYmFzZSksIDApOworCUNUWF9SRUco
cmVncywgQ1RYX1NFQ09ORF9CQl9IRUFEX0wsIFJJTkdfU0JCQUREUihiYXNlKSwgMCk7CisJQ1RY
X1JFRyhyZWdzLCBDVFhfU0VDT05EX0JCX1NUQVRFLCBSSU5HX1NCQlNUQVRFKGJhc2UpLCAwKTsK
KwlpZiAocmNzKQorCQlpbml0X3dhX2JiX3JlZ19zdGF0ZShyZWdzLCBlbmdpbmUsIENUWF9CQl9Q
RVJfQ1RYX1BUUik7CisKKwlyZWdzW0NUWF9MUklfSEVBREVSXzFdID0gTUlfTE9BRF9SRUdJU1RF
Ul9JTU0oOSkgfCBNSV9MUklfRk9SQ0VfUE9TVEVEOworCisJQ1RYX1JFRyhyZWdzLCBDVFhfQ1RY
X1RJTUVTVEFNUCwgUklOR19DVFhfVElNRVNUQU1QKGJhc2UpLCAwKTsKKworCWluaXRfcHBndHRf
cmVnX3N0YXRlKHJlZ3MsIGJhc2UsIHBwZ3R0KTsKIAogCWlmIChyY3MpIHsKIAkJcmVnc1tDVFhf
TFJJX0hFQURFUl8yXSA9IE1JX0xPQURfUkVHSVNURVJfSU1NKDEpOwpAQCAtMzEwMiw2ICszMTE4
LDU4IEBAIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19pbml0X3JlZ19zdGF0ZSh1MzIgKnJlZ3MsCiAJ
CXJlZ3NbQ1RYX0VORF0gfD0gQklUKDApOwogfQogCitzdGF0aWMgdm9pZCBnZW4xMl9pbml0X3Jl
Z19zdGF0ZSh1MzIgKnJlZ3MsCisJCQkJIHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKKwkJCQkg
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAorCQkJCSBzdHJ1Y3QgaW50ZWxfcmluZyAq
cmluZykKK3sKKwlzdHJ1Y3QgaTkxNV9wcGd0dCAqcHBndHQgPSBpOTE1X3ZtX3RvX3BwZ3R0KGNl
LT52bSk7CisJYm9vbCByY3MgPSBlbmdpbmUtPmNsYXNzID09IFJFTkRFUl9DTEFTUzsKKwl1MzIg
YmFzZSA9IGVuZ2luZS0+bW1pb19iYXNlOworCisJR0VNX0RFQlVHX0VYRUMoRFJNX0lORk9fT05D
RSgiVXNpbmcgR0VOMTIgUmVnaXN0ZXIgU3RhdGUgQ29udGV4dFxuIikpOworCisJcmVnc1tHRU4x
Ml9DVFhfTFJJX0hFQURFUl8wXSA9IE1JX0xPQURfUkVHSVNURVJfSU1NKDEzKSB8CisJCQkJICAg
ICAgIE1JX0xSSV9GT1JDRV9QT1NURUQ7CisKKwlpbml0X2NvbW1vbl9yZWdfc3RhdGUocmVncywg
ZW5naW5lLCByaW5nKTsKKwlpZiAocmNzKQorCQlpbml0X3dhX2JiX3JlZ19zdGF0ZShyZWdzLCBl
bmdpbmUsIEdFTjEyX0NUWF9CQl9QRVJfQ1RYX1BUUik7CisKKwlyZWdzW0dFTjEyX0NUWF9MUklf
SEVBREVSXzFdID0gTUlfTE9BRF9SRUdJU1RFUl9JTU0oOSkgfAorCQkJCSAgICAgICBNSV9MUklf
Rk9SQ0VfUE9TVEVEOworCisJQ1RYX1JFRyhyZWdzLCBHRU4xMl9DVFhfQ1RYX1RJTUVTVEFNUCwg
UklOR19DVFhfVElNRVNUQU1QKGJhc2UpLCAwKTsKKworCWluaXRfcHBndHRfcmVnX3N0YXRlKHJl
Z3MsIGJhc2UsIHBwZ3R0KTsKKworCWlmIChyY3MpIHsKKwkJcmVnc1tHRU4xMl9DVFhfTFJJX0hF
QURFUl8zXSA9IE1JX0xPQURfUkVHSVNURVJfSU1NKDEpOworCQlDVFhfUkVHKHJlZ3MsIEdFTjEy
X0NUWF9SX1BXUl9DTEtfU1RBVEUsIEdFTjhfUl9QV1JfQ0xLX1NUQVRFLAorCQkJMCk7CisKKwkJ
LyogVE9ETzogb2FfaW5pdF9yZWdfc3RhdGUgPyAqLworCX0KK30KKworc3RhdGljIHZvaWQgZXhl
Y2xpc3RzX2luaXRfcmVnX3N0YXRlKHUzMiAqcmVncywKKwkJCQkgICAgIHN0cnVjdCBpbnRlbF9j
b250ZXh0ICpjZSwKKwkJCQkgICAgIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKKwkJ
CQkgICAgIHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nKQoreworCS8qIEEgY29udGV4dCBpcyBhY3R1
YWxseSBhIGJpZyBiYXRjaCBidWZmZXIgd2l0aCBzZXZlcmFsCisJICogTUlfTE9BRF9SRUdJU1RF
Ul9JTU0gY29tbWFuZHMgZm9sbG93ZWQgYnkgKHJlZywgdmFsdWUpIHBhaXJzLiBUaGUKKwkgKiB2
YWx1ZXMgd2UgYXJlIHNldHRpbmcgaGVyZSBhcmUgb25seSBmb3IgdGhlIGZpcnN0IGNvbnRleHQg
cmVzdG9yZToKKwkgKiBvbiBhIHN1YnNlcXVlbnQgc2F2ZSwgdGhlIEdQVSB3aWxsIHJlY3JlYXRl
IHRoaXMgYmF0Y2hidWZmZXIgd2l0aCBuZXcKKwkgKiB2YWx1ZXMgKGluY2x1ZGluZyBhbGwgdGhl
IG1pc3NpbmcgTUlfTE9BRF9SRUdJU1RFUl9JTU0gY29tbWFuZHMgdGhhdAorCSAqIHdlIGFyZSBu
b3QgaW5pdGlhbGl6aW5nIGhlcmUpLgorCSAqLworCWlmIChJTlRFTF9HRU4oZW5naW5lLT5pOTE1
KSA+PSAxMikKKwkJZ2VuMTJfaW5pdF9yZWdfc3RhdGUocmVncywgY2UsIGVuZ2luZSwgcmluZyk7
CisJZWxzZQorCQlnZW44X2luaXRfcmVnX3N0YXRlKHJlZ3MsIGNlLCBlbmdpbmUsIHJpbmcpOwor
fQorCiBzdGF0aWMgaW50CiBwb3B1bGF0ZV9scl9jb250ZXh0KHN0cnVjdCBpbnRlbF9jb250ZXh0
ICpjZSwKIAkJICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpjdHhfb2JqLApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmggYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9scmMuaAppbmRleCBjMmJiYTgyYmNjMTYuLjY5Mjg1ZDM1NGQ5YiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmgKQEAgLTQ5LDYgKzQ5LDggQEAgc3RydWN0
IGludGVsX2VuZ2luZV9jczsKIAogI2RlZmluZQkgIEVMX0NUUkxfTE9BRAkJCQkoMSA8PCAwKQog
CisjZGVmaW5lIEdFTjEyX0VOR0lORV9TRU1BUEhPUkVfVE9LRU4oZW5naW5lKQlfTU1JTygoZW5n
aW5lKS0+bW1pb19iYXNlICsgMHgyYjQpCisKIC8qIFRoZSBkb2NzIHNwZWNpZnkgdGhhdCB0aGUg
d3JpdGUgcG9pbnRlciB3cmFwcyBhcm91bmQgYWZ0ZXIgNWgsICJBZnRlciBzdGF0dXMKICAqIGlz
IHdyaXR0ZW4gb3V0IHRvIHRoZSBsYXN0IGF2YWlsYWJsZSBzdGF0dXMgUVcgYXQgb2Zmc2V0IDVo
LCB0aGlzIHBvaW50ZXIKICAqIHdyYXBzIHRvIDAuIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfbHJjX3JlZy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfbHJjX3JlZy5oCmluZGV4IDZiZjM0NzM4YjRlNS4uOTE1ODI0ZWJhZjE3IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmNfcmVnLmgKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjX3JlZy5oCkBAIC05LDcgKzksNyBAQAogCiAjaW5jbHVk
ZSA8bGludXgvdHlwZXMuaD4KIAotLyogR0VOOCsgUmVnIFN0YXRlIENvbnRleHQgKi8KKy8qIEdF
TjggdG8gR0VOMTEgUmVnIFN0YXRlIENvbnRleHQgKi8KICNkZWZpbmUgQ1RYX0xSSV9IRUFERVJf
MAkJMHgwMQogI2RlZmluZSBDVFhfQ09OVEVYVF9DT05UUk9MCQkweDAyCiAjZGVmaW5lIENUWF9S
SU5HX0hFQUQJCQkweDA0CkBAIC0zOSw2ICszOSwzNCBAQAogI2RlZmluZSBDVFhfUl9QV1JfQ0xL
X1NUQVRFCQkweDQyCiAjZGVmaW5lIENUWF9FTkQJCQkJMHg0NAogCisvKiBHRU4xMisgUmVnIFN0
YXRlIENvbnRleHQgKi8KKyNkZWZpbmUgR0VOMTJfQ1RYX0xSSV9IRUFERVJfMAkJCUNUWF9MUklf
SEVBREVSXzAKKyNkZWZpbmUgR0VOMTJfQ1RYX0NPTlRFWFRfQ09OVFJPTAkJQ1RYX0NPTlRFWFRf
Q09OVFJPTAorI2RlZmluZSBHRU4xMl9DVFhfUklOR19IRUFECQkJQ1RYX1JJTkdfSEVBRAorI2Rl
ZmluZSBHRU4xMl9DVFhfUklOR19UQUlMCQkJQ1RYX1JJTkdfVEFJTAorI2RlZmluZSBHRU4xMl9D
VFhfUklOR19CVUZGRVJfU1RBUlQJCUNUWF9SSU5HX0JVRkZFUl9TVEFSVAorI2RlZmluZSBHRU4x
Ml9DVFhfUklOR19CVUZGRVJfQ09OVFJPTAkJQ1RYX1JJTkdfQlVGRkVSX0NPTlRST0wKKyNkZWZp
bmUgR0VOMTJfQ1RYX0JCX0hFQURfVQkJCUNUWF9CQl9IRUFEX1UKKyNkZWZpbmUgR0VOMTJfQ1RY
X0JCX0hFQURfTAkJCUNUWF9CQl9IRUFEX0wKKyNkZWZpbmUgR0VOMTJfQ1RYX0JCX1NUQVRFCQkJ
Q1RYX0JCX1NUQVRFCisjZGVmaW5lIEdFTjEyX0NUWF9CQl9QRVJfQ1RYX1BUUgkJMHgxMgorI2Rl
ZmluZSBHRU4xMl9DVFhfUkNTX0lORElSRUNUX0NUWAkJMHgxNAorI2RlZmluZSBHRU4xMl9DVFhf
UkNTX0lORElSRUNUX0NUWF9PRkZTRVQJMHgxNgorI2RlZmluZSBHRU4xMl9DVFhfTFJJX0hFQURF
Ul8xCQkJQ1RYX0xSSV9IRUFERVJfMQorI2RlZmluZSBHRU4xMl9DVFhfQ1RYX1RJTUVTVEFNUAkJ
CUNUWF9DVFhfVElNRVNUQU1QCisjZGVmaW5lIEdFTjEyX0NUWF9QRFAzX1VEVwkJCUNUWF9QRFAz
X1VEVworI2RlZmluZSBHRU4xMl9DVFhfUERQM19MRFcJCQlDVFhfUERQM19MRFcKKyNkZWZpbmUg
R0VOMTJfQ1RYX1BEUDJfVURXCQkJQ1RYX1BEUDJfVURXCisjZGVmaW5lIEdFTjEyX0NUWF9QRFAy
X0xEVwkJCUNUWF9QRFAyX0xEVworI2RlZmluZSBHRU4xMl9DVFhfUERQMV9VRFcJCQlDVFhfUERQ
MV9VRFcKKyNkZWZpbmUgR0VOMTJfQ1RYX1BEUDFfTERXCQkJQ1RYX1BEUDFfTERXCisjZGVmaW5l
IEdFTjEyX0NUWF9QRFAwX1VEVwkJCUNUWF9QRFAwX1VEVworI2RlZmluZSBHRU4xMl9DVFhfUERQ
MF9MRFcJCQlDVFhfUERQMF9MRFcKKyNkZWZpbmUgR0VOMTJfQ1RYX0xSSV9IRUFERVJfMgkJCTB4
MzQKKyNkZWZpbmUgR0VOMTJfQ1RYX0xSSV9IRUFERVJfMwkJCTB4NDEKKyNkZWZpbmUgR0VOMTJf
Q1RYX1JfUFdSX0NMS19TVEFURQkJMHg0MgorI2RlZmluZSBHRU4xMl9DVFhfR1BHUFVfQ1NSX0JB
U0VfQUREUkVTUwkweDQ0CisKICNkZWZpbmUgQ1RYX1JFRyhyZWdfc3RhdGUsIHBvcywgcmVnLCB2
YWwpIGRvIHsgXAogCXUzMiAqcmVnX3N0YXRlX18gPSAocmVnX3N0YXRlKTsgXAogCWNvbnN0IHUz
MiBwb3NfXyA9IChwb3MpOyBcCi0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeA==

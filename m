Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 2C7154555C
	for <lists+intel-gfx@lfdr.de>; Fri, 14 Jun 2019 09:11:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A43358935B;
	Fri, 14 Jun 2019 07:10:57 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2BF18892FE
 for <intel-gfx@lists.freedesktop.org>; Fri, 14 Jun 2019 07:10:44 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16897549-1500050 
 for multiple; Fri, 14 Jun 2019 08:10:42 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 14 Jun 2019 08:10:22 +0100
Message-Id: <20190614071023.17929-39-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190614071023.17929-1-chris@chris-wilson.co.uk>
References: <20190614071023.17929-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 38/39] drm/i915: Remove logical HW ID
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2Ugb25seSBuZWVkIHRvIGtlZXAgYSB1bmlxdWUgdGFnIGZvciB0aGUgYWN0aXZlIGxpZmV0aW1l
IG9mIHRoZQpjb250ZXh0LCBhbmQgZm9yIGFzIGxvbmcgYXMgd2UgbmVlZCB0byBpZGVudGlmeSB0
aGF0IGNvbnRleHQuIFRoZSBIVwp1c2VzIHRoZSB0YWcgdG8gZGV0ZXJtaW5lIGlmIGl0IHNob3Vs
ZCB1c2UgYSBsaXRlLXJlc3RvcmUgKHdoeSBub3QgdGhlCkxSQ0E/KSBhbmQgcGFzc2VzIHRoZSB0
YWcgYmFjayBmb3IgdmFyaW91cyBzdGF0dXMgaWRlbnRpZmllcy4gVGhlIG9ubHkKc3RhdHVzIHdl
IG5lZWQgdG8gdHJhY2sgaXMgZm9yIE9BLCBzbyB3aGVuIHVzaW5nIHBlcmYsIHdlIGFzc2lnbiB0
aGUKc3BlY2lmaWMgY29udGV4dCBhIHVuaXF1ZSB0YWcuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBX
aWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fY29udGV4dC5jICAgfCAxNTcgLS0tLS0tLS0tLS0tLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5oICAgfCAgMTUgLS0KIC4uLi9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaCB8ICAxOCAtLQogLi4uL2Ry
bS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jIHwgIDEzICstCiAuLi4vZ3B1
L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmMgfCAgIDggLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBlcy5oIHwgICAxICsKIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oICB8ICAgNSArLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgICAgICAgICAgIHwgIDI4ICstLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2d2dC9rdm1ndC5jICAgICAgICAgICAgICB8ICAxNyAtLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgICAgICAgICAgIHwgICAzIC0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAgICAgICB8ICAxMCAtLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9ncHVfZXJyb3IuYyAgICAgICAgIHwgICA3ICstCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2dwdV9lcnJvci5oICAgICAgICAgfCAgIDEgLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9wZXJmLmMgICAgICAgICAgICAgIHwgIDI4ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfdHJhY2UuaCAgICAgICAgICAgICB8ICAzOCArKy0tLQogLi4uL2dwdS9kcm0vaTkx
NS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYyAgIHwgICA0ICstCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9zZWxmdGVzdHMvaTkxNV92bWEuYyAgICAgfCAgIDIgKy0KIDE3IGZpbGVzIGNoYW5nZWQs
IDUxIGluc2VydGlvbnMoKyksIDMwNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwppbmRleCBkYTZiZjI3Njk3ZTQuLjE0NDA3YThiYmU2
MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCkBAIC0x
NjksOTUgKzE2OSw2IEBAIGxvb2t1cF91c2VyX2VuZ2luZShzdHJ1Y3QgaTkxNV9nZW1fY29udGV4
dCAqY3R4LAogCXJldHVybiBpOTE1X2dlbV9jb250ZXh0X2dldF9lbmdpbmUoY3R4LCBpZHgpOwog
fQogCi1zdGF0aWMgaW5saW5lIGludCBuZXdfaHdfaWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUsIGdmcF90IGdmcCkKLXsKLQl1bnNpZ25lZCBpbnQgbWF4OwotCi0JbG9ja2RlcF9hc3Nl
cnRfaGVsZCgmaTkxNS0+Y29udGV4dHMubXV0ZXgpOwotCi0JaWYgKElOVEVMX0dFTihpOTE1KSA+
PSAxMSkKLQkJbWF4ID0gR0VOMTFfTUFYX0NPTlRFWFRfSFdfSUQ7Ci0JZWxzZSBpZiAoVVNFU19H
VUNfU1VCTUlTU0lPTihpOTE1KSkKLQkJLyoKLQkJICogV2hlbiB1c2luZyBHdUMgaW4gcHJveHkg
c3VibWlzc2lvbiwgR3VDIGNvbnN1bWVzIHRoZQotCQkgKiBoaWdoZXN0IGJpdCBpbiB0aGUgY29u
dGV4dCBpZCB0byBpbmRpY2F0ZSBwcm94eSBzdWJtaXNzaW9uLgotCQkgKi8KLQkJbWF4ID0gTUFY
X0dVQ19DT05URVhUX0hXX0lEOwotCWVsc2UKLQkJbWF4ID0gTUFYX0NPTlRFWFRfSFdfSUQ7Ci0K
LQlyZXR1cm4gaWRhX3NpbXBsZV9nZXQoJmk5MTUtPmNvbnRleHRzLmh3X2lkYSwgMCwgbWF4LCBn
ZnApOwotfQotCi1zdGF0aWMgaW50IHN0ZWFsX2h3X2lkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1KQotewotCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgsICpjbjsKLQlMSVNUX0hF
QUQocGlubmVkKTsKLQlpbnQgaWQgPSAtRU5PU1BDOwotCi0JbG9ja2RlcF9hc3NlcnRfaGVsZCgm
aTkxNS0+Y29udGV4dHMubXV0ZXgpOwotCi0JbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKGN0eCwg
Y24sCi0JCQkJICZpOTE1LT5jb250ZXh0cy5od19pZF9saXN0LCBod19pZF9saW5rKSB7Ci0JCWlm
IChhdG9taWNfcmVhZCgmY3R4LT5od19pZF9waW5fY291bnQpKSB7Ci0JCQlsaXN0X21vdmVfdGFp
bCgmY3R4LT5od19pZF9saW5rLCAmcGlubmVkKTsKLQkJCWNvbnRpbnVlOwotCQl9Ci0KLQkJR0VN
X0JVR19PTighY3R4LT5od19pZCk7IC8qIHBlcm1hLXBpbm5lZCBrZXJuZWwgY29udGV4dCAqLwot
CQlsaXN0X2RlbF9pbml0KCZjdHgtPmh3X2lkX2xpbmspOwotCQlpZCA9IGN0eC0+aHdfaWQ7Ci0J
CWJyZWFrOwotCX0KLQotCS8qCi0JICogUmVtZW1iZXIgaG93IGZhciB3ZSBnb3QgdXAgb24gdGhl
IGxhc3QgcmVwb3NzZXNpb24gc2Nhbiwgc28gdGhlCi0JICogbGlzdCBpcyBrZXB0IGluIGEgImxl
YXN0IHJlY2VudGx5IHNjYW5uZWQiIG9yZGVyLgotCSAqLwotCWxpc3Rfc3BsaWNlX3RhaWwoJnBp
bm5lZCwgJmk5MTUtPmNvbnRleHRzLmh3X2lkX2xpc3QpOwotCXJldHVybiBpZDsKLX0KLQotc3Rh
dGljIGludCBhc3NpZ25faHdfaWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHVuc2ln
bmVkIGludCAqb3V0KQotewotCWludCByZXQ7Ci0KLQlsb2NrZGVwX2Fzc2VydF9oZWxkKCZpOTE1
LT5jb250ZXh0cy5tdXRleCk7Ci0KLQkvKgotCSAqIFdlIHByZWZlciB0byBzdGVhbC9zdGFsbCBv
dXJzZWx2ZXMgYW5kIG91ciB1c2VycyBvdmVyIHRoYXQgb2YgdGhlCi0JICogZW50aXJlIHN5c3Rl
bS4gVGhhdCBtYXkgYmUgYSBsaXR0bGUgdW5mYWlyIHRvIG91ciB1c2VycywgYW5kCi0JICogZXZl
biBodXJ0IGhpZ2ggcHJpb3JpdHkgY2xpZW50cy4gVGhlIGNob2ljZSBpcyB3aGV0aGVyIHRvIG9v
bWtpbGwKLQkgKiBzb21ldGhpbmcgZWxzZSwgb3Igc3RlYWwgYSBjb250ZXh0IGlkLgotCSAqLwot
CXJldCA9IG5ld19od19pZChpOTE1LCBHRlBfS0VSTkVMIHwgX19HRlBfUkVUUllfTUFZRkFJTCB8
IF9fR0ZQX05PV0FSTik7Ci0JaWYgKHVubGlrZWx5KHJldCA8IDApKSB7Ci0JCXJldCA9IHN0ZWFs
X2h3X2lkKGk5MTUpOwotCQlpZiAocmV0IDwgMCkgLyogb25jZSBhZ2FpbiBmb3IgdGhlIGNvcnJl
Y3QgZXJybm8gY29kZSAqLwotCQkJcmV0ID0gbmV3X2h3X2lkKGk5MTUsIEdGUF9LRVJORUwpOwot
CQlpZiAocmV0IDwgMCkKLQkJCXJldHVybiByZXQ7Ci0JfQotCi0JKm91dCA9IHJldDsKLQlyZXR1
cm4gMDsKLX0KLQotc3RhdGljIHZvaWQgcmVsZWFzZV9od19pZChzdHJ1Y3QgaTkxNV9nZW1fY29u
dGV4dCAqY3R4KQotewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gY3R4LT5pOTE1
OwotCi0JaWYgKGxpc3RfZW1wdHkoJmN0eC0+aHdfaWRfbGluaykpCi0JCXJldHVybjsKLQotCW11
dGV4X2xvY2soJmk5MTUtPmNvbnRleHRzLm11dGV4KTsKLQlpZiAoIWxpc3RfZW1wdHkoJmN0eC0+
aHdfaWRfbGluaykpIHsKLQkJaWRhX3NpbXBsZV9yZW1vdmUoJmk5MTUtPmNvbnRleHRzLmh3X2lk
YSwgY3R4LT5od19pZCk7Ci0JCWxpc3RfZGVsX2luaXQoJmN0eC0+aHdfaWRfbGluayk7Ci0JfQot
CW11dGV4X3VubG9jaygmaTkxNS0+Y29udGV4dHMubXV0ZXgpOwotfQotCiBzdGF0aWMgdm9pZCBf
X2ZyZWVfZW5naW5lcyhzdHJ1Y3QgaTkxNV9nZW1fZW5naW5lcyAqZSwgdW5zaWduZWQgaW50IGNv
dW50KQogewogCXdoaWxlIChjb3VudC0tKSB7CkBAIC0zMTEsNyArMjIyLDYgQEAgc3RhdGljIHZv
aWQgaTkxNV9nZW1fY29udGV4dF9mcmVlKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCiAJ
bG9ja2RlcF9hc3NlcnRfaGVsZCgmY3R4LT5pOTE1LT5kcm0uc3RydWN0X211dGV4KTsKIAlHRU1f
QlVHX09OKCFpOTE1X2dlbV9jb250ZXh0X2lzX2Nsb3NlZChjdHgpKTsKIAotCXJlbGVhc2VfaHdf
aWQoY3R4KTsKIAlpZiAoY3R4LT52bSkKIAkJaTkxNV92bV9wdXQoY3R4LT52bSk7CiAKQEAgLTM4
MywxMiArMjkzLDYgQEAgc3RhdGljIHZvaWQgY29udGV4dF9jbG9zZShzdHJ1Y3QgaTkxNV9nZW1f
Y29udGV4dCAqY3R4KQogCWk5MTVfZ2VtX2NvbnRleHRfc2V0X2Nsb3NlZChjdHgpOwogCWN0eC0+
ZmlsZV9wcml2ID0gRVJSX1BUUigtRUJBREYpOwogCi0JLyoKLQkgKiBUaGlzIGNvbnRleHQgd2ls
bCBuZXZlciBhZ2FpbiBiZSBhc3NpbmdlZCB0byBIVywgc28gd2UgY2FuCi0JICogcmV1c2UgaXRz
IElEIGZvciB0aGUgbmV4dCBjb250ZXh0LgotCSAqLwotCXJlbGVhc2VfaHdfaWQoY3R4KTsKLQog
CS8qCiAJICogVGhlIExVVCB1c2VzIHRoZSBWTUEgYXMgYSBiYWNrcG9pbnRlciB0byB1bnJlZiB0
aGUgb2JqZWN0LAogCSAqIHNvIHdlIG5lZWQgdG8gY2xlYXIgdGhlIExVVCBiZWZvcmUgd2UgY2xv
c2UgYWxsIHRoZSBWTUEgKGluc2lkZQpAQCAtNDUxLDcgKzM1NSw2IEBAIF9fY3JlYXRlX2NvbnRl
eHQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJUkNVX0lOSVRfUE9JTlRFUihjdHgt
PmVuZ2luZXMsIGUpOwogCiAJSU5JVF9SQURJWF9UUkVFKCZjdHgtPmhhbmRsZXNfdm1hLCBHRlBf
S0VSTkVMKTsKLQlJTklUX0xJU1RfSEVBRCgmY3R4LT5od19pZF9saW5rKTsKIAogCS8qIE5COiBN
YXJrIGFsbCBzbGljZXMgYXMgbmVlZGluZyBhIHJlbWFwIHNvIHRoYXQgd2hlbiB0aGUgY29udGV4
dCBmaXJzdAogCSAqIGxvYWRzIGl0IHdpbGwgcmVzdG9yZSB3aGF0ZXZlciByZW1hcCBzdGF0ZSBh
bHJlYWR5IGV4aXN0cy4gSWYgdGhlcmUKQEAgLTU3NCwxMyArNDc3LDYgQEAgaTkxNV9nZW1fY29u
dGV4dF9jcmVhdGVfZ3Z0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiAJaWYgKElTX0VSUihjdHgp
KQogCQlnb3RvIG91dDsKIAotCXJldCA9IGk5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lkKGN0eCk7
Ci0JaWYgKHJldCkgewotCQljb250ZXh0X2Nsb3NlKGN0eCk7Ci0JCWN0eCA9IEVSUl9QVFIocmV0
KTsKLQkJZ290byBvdXQ7Ci0JfQotCiAJY3R4LT5maWxlX3ByaXYgPSBFUlJfUFRSKC1FQkFERik7
CiAJaTkxNV9nZW1fY29udGV4dF9zZXRfY2xvc2VkKGN0eCk7IC8qIG5vdCB1c2VyIGFjY2Vzc2li
bGUgKi8KIAlpOTE1X2dlbV9jb250ZXh0X2NsZWFyX2Jhbm5hYmxlKGN0eCk7CkBAIC02MTEsMTgg
KzUwNywxMSBAQCBzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqCiBpOTE1X2dlbV9jb250ZXh0X2Ny
ZWF0ZV9rZXJuZWwoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIGludCBwcmlvKQogewog
CXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHg7Ci0JaW50IGVycjsKIAogCWN0eCA9IGk5MTVf
Z2VtX2NyZWF0ZV9jb250ZXh0KGk5MTUsIDApOwogCWlmIChJU19FUlIoY3R4KSkKIAkJcmV0dXJu
IGN0eDsKIAotCWVyciA9IGk5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lkKGN0eCk7Ci0JaWYgKGVy
cikgewotCQlkZXN0cm95X2tlcm5lbF9jb250ZXh0KCZjdHgpOwotCQlyZXR1cm4gRVJSX1BUUihl
cnIpOwotCX0KLQogCWk5MTVfZ2VtX2NvbnRleHRfY2xlYXJfYmFubmFibGUoY3R4KTsKIAljdHgt
PnNjaGVkLnByaW9yaXR5ID0gSTkxNV9VU0VSX1BSSU9SSVRZKHByaW8pOwogCWN0eC0+cmluZ19z
aXplID0gUEFHRV9TSVpFOwpAQCAtNjM3LDEyICs1MjYsNiBAQCBzdGF0aWMgdm9pZCBpbml0X2Nv
bnRleHRzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCW11dGV4X2luaXQoJmk5MTUt
PmNvbnRleHRzLm11dGV4KTsKIAlJTklUX0xJU1RfSEVBRCgmaTkxNS0+Y29udGV4dHMubGlzdCk7
CiAKLQkvKiBVc2luZyB0aGUgc2ltcGxlIGlkYSBpbnRlcmZhY2UsIHRoZSBtYXggaXMgbGltaXRl
ZCBieSBzaXplb2YoaW50KSAqLwotCUJVSUxEX0JVR19PTihNQVhfQ09OVEVYVF9IV19JRCA+IElO
VF9NQVgpOwotCUJVSUxEX0JVR19PTihHRU4xMV9NQVhfQ09OVEVYVF9IV19JRCA+IElOVF9NQVgp
OwotCWlkYV9pbml0KCZpOTE1LT5jb250ZXh0cy5od19pZGEpOwotCUlOSVRfTElTVF9IRUFEKCZp
OTE1LT5jb250ZXh0cy5od19pZF9saXN0KTsKLQogCUlOSVRfV09SSygmaTkxNS0+Y29udGV4dHMu
ZnJlZV93b3JrLCBjb250ZXh0c19mcmVlX3dvcmtlcik7CiAJaW5pdF9sbGlzdF9oZWFkKCZpOTE1
LT5jb250ZXh0cy5mcmVlX2xpc3QpOwogfQpAQCAtNjY5LDE1ICs1NTIsNiBAQCBpbnQgaTkxNV9n
ZW1fY29udGV4dHNfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJCURS
TV9FUlJPUigiRmFpbGVkIHRvIGNyZWF0ZSBkZWZhdWx0IGdsb2JhbCBjb250ZXh0XG4iKTsKIAkJ
cmV0dXJuIFBUUl9FUlIoY3R4KTsKIAl9Ci0JLyoKLQkgKiBGb3IgZWFzeSByZWNvZ25pc2FibGl0
eSwgd2Ugd2FudCB0aGUga2VybmVsIGNvbnRleHQgdG8gYmUgMCBhbmQgdGhlbgotCSAqIGFsbCB1
c2VyIGNvbnRleHRzIHdpbGwgaGF2ZSBub24temVybyBod19pZC4gS2VybmVsIGNvbnRleHRzIGFy
ZQotCSAqIHBlcm1hbmVudGx5IHBpbm5lZCwgc28gdGhhdCB3ZSBuZXZlciBzdWZmZXIgYSBzdGFs
bCBhbmQgY2FuCi0JICogdXNlIHRoZW0gZnJvbSBhbnkgYWxsb2NhdGlvbiBjb250ZXh0IChlLmcu
IGZvciBldmljdGluZyBvdGhlcgotCSAqIGNvbnRleHRzIGFuZCBmcm9tIGluc2lkZSB0aGUgc2hy
aW5rZXIpLgotCSAqLwotCUdFTV9CVUdfT04oY3R4LT5od19pZCk7Ci0JR0VNX0JVR19PTighYXRv
bWljX3JlYWQoJmN0eC0+aHdfaWRfcGluX2NvdW50KSk7CiAJZGV2X3ByaXYtPmtlcm5lbF9jb250
ZXh0ID0gY3R4OwogCiAJLyogaGlnaGVzdCBwcmlvcml0eTsgcHJlZW1wdGluZyB0YXNrICovCkBA
IC03MDIsMTAgKzU3Niw2IEBAIHZvaWQgaTkxNV9nZW1fY29udGV4dHNfZmluaShzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlpZiAoaTkxNS0+cHJlZW1wdF9jb250ZXh0KQogCQlkZXN0
cm95X2tlcm5lbF9jb250ZXh0KCZpOTE1LT5wcmVlbXB0X2NvbnRleHQpOwogCWRlc3Ryb3lfa2Vy
bmVsX2NvbnRleHQoJmk5MTUtPmtlcm5lbF9jb250ZXh0KTsKLQotCS8qIE11c3QgZnJlZSBhbGwg
ZGVmZXJyZWQgY29udGV4dHMgKHZpYSBmbHVzaF93b3JrcXVldWUpIGZpcnN0ICovCi0JR0VNX0JV
R19PTighbGlzdF9lbXB0eSgmaTkxNS0+Y29udGV4dHMuaHdfaWRfbGlzdCkpOwotCWlkYV9kZXN0
cm95KCZpOTE1LT5jb250ZXh0cy5od19pZGEpOwogfQogCiBzdGF0aWMgaW50IGNvbnRleHRfaWRy
X2NsZWFudXAoaW50IGlkLCB2b2lkICpwLCB2b2lkICpkYXRhKQpAQCAtMjM5OCwzMyArMjI2OCw2
IEBAIGludCBpOTE1X2dlbV9jb250ZXh0X3Jlc2V0X3N0YXRzX2lvY3RsKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsCiAJcmV0dXJuIHJldDsKIH0KIAotaW50IF9faTkxNV9nZW1fY29udGV4dF9waW5f
aHdfaWQoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCkKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSA9IGN0eC0+aTkxNTsKLQlpbnQgZXJyID0gMDsKLQotCW11dGV4X2xvY2so
Jmk5MTUtPmNvbnRleHRzLm11dGV4KTsKLQotCUdFTV9CVUdfT04oaTkxNV9nZW1fY29udGV4dF9p
c19jbG9zZWQoY3R4KSk7Ci0KLQlpZiAobGlzdF9lbXB0eSgmY3R4LT5od19pZF9saW5rKSkgewot
CQlHRU1fQlVHX09OKGF0b21pY19yZWFkKCZjdHgtPmh3X2lkX3Bpbl9jb3VudCkpOwotCi0JCWVy
ciA9IGFzc2lnbl9od19pZChpOTE1LCAmY3R4LT5od19pZCk7Ci0JCWlmIChlcnIpCi0JCQlnb3Rv
IG91dF91bmxvY2s7Ci0KLQkJbGlzdF9hZGRfdGFpbCgmY3R4LT5od19pZF9saW5rLCAmaTkxNS0+
Y29udGV4dHMuaHdfaWRfbGlzdCk7Ci0JfQotCi0JR0VNX0JVR19PTihhdG9taWNfcmVhZCgmY3R4
LT5od19pZF9waW5fY291bnQpID09IH4wdSk7Ci0JYXRvbWljX2luYygmY3R4LT5od19pZF9waW5f
Y291bnQpOwotCi1vdXRfdW5sb2NrOgotCW11dGV4X3VubG9jaygmaTkxNS0+Y29udGV4dHMubXV0
ZXgpOwotCXJldHVybiBlcnI7Ci19Ci0KIC8qIEdFTSBjb250ZXh0LWVuZ2luZXMgaXRlcmF0b3I6
IGZvcl9lYWNoX2dlbV9lbmdpbmUoKSAqLwogc3RydWN0IGludGVsX2NvbnRleHQgKgogaTkxNV9n
ZW1fZW5naW5lc19pdGVyX25leHQoc3RydWN0IGk5MTVfZ2VtX2VuZ2luZXNfaXRlciAqaXQpCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5oIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaAppbmRleCA5NjkxZGQw
NjJmNzIuLjZmNTE2ZmY5NTFiNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX2NvbnRleHQuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fY29udGV4dC5oCkBAIC0xMTIsMjEgKzExMiw2IEBAIGk5MTVfZ2VtX2NvbnRleHRfY2xlYXJf
dXNlcl9lbmdpbmVzKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCiAJY2xlYXJfYml0KENP
TlRFWFRfVVNFUl9FTkdJTkVTLCAmY3R4LT5mbGFncyk7CiB9CiAKLWludCBfX2k5MTVfZ2VtX2Nv
bnRleHRfcGluX2h3X2lkKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpOwotc3RhdGljIGlu
bGluZSBpbnQgaTkxNV9nZW1fY29udGV4dF9waW5faHdfaWQoc3RydWN0IGk5MTVfZ2VtX2NvbnRl
eHQgKmN0eCkKLXsKLQlpZiAoYXRvbWljX2luY19ub3RfemVybygmY3R4LT5od19pZF9waW5fY291
bnQpKQotCQlyZXR1cm4gMDsKLQotCXJldHVybiBfX2k5MTVfZ2VtX2NvbnRleHRfcGluX2h3X2lk
KGN0eCk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCBpOTE1X2dlbV9jb250ZXh0X3VucGluX2h3
X2lkKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCi17Ci0JR0VNX0JVR19PTihhdG9taWNf
cmVhZCgmY3R4LT5od19pZF9waW5fY291bnQpID09IDB1KTsKLQlhdG9taWNfZGVjKCZjdHgtPmh3
X2lkX3Bpbl9jb3VudCk7Ci19Ci0KIHN0YXRpYyBpbmxpbmUgYm9vbCBpOTE1X2dlbV9jb250ZXh0
X2lzX2tlcm5lbChzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4KQogewogCXJldHVybiAhY3R4
LT5maWxlX3ByaXY7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fY29udGV4dF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2Nv
bnRleHRfdHlwZXMuaAppbmRleCBjYzUxMzQxMGVlZWYuLjM3MmUyMGIzZjRiZCAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dF90eXBlcy5oCkBAIC0x
NDcsMjQgKzE0Nyw2IEBAIHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0IHsKICNkZWZpbmUgQ09OVEVY
VF9GT1JDRV9TSU5HTEVfU1VCTUlTU0lPTgkyCiAjZGVmaW5lIENPTlRFWFRfVVNFUl9FTkdJTkVT
CQkzCiAKLQkvKioKLQkgKiBAaHdfaWQ6IC0gdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb250
ZXh0Ci0JICoKLQkgKiBUaGUgaGFyZHdhcmUgbmVlZHMgdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhl
IGNvbnRleHQgZm9yIGEgZmV3Ci0JICogZnVuY3Rpb25zIGxpa2UgZmF1bHQgcmVwb3J0aW5nLCBQ
QVNJRCwgc2NoZWR1bGluZy4gVGhlCi0JICogJmRybV9pOTE1X3ByaXZhdGUuY29udGV4dF9od19p
ZGEgaXMgdXNlZCB0byBhc3NpZ24gYSB1bnFpdWUKLQkgKiBpZCBmb3IgdGhlIGxpZmV0aW1lIG9m
IHRoZSBjb250ZXh0LgotCSAqCi0JICogQGh3X2lkX3Bpbl9jb3VudDogLSBudW1iZXIgb2YgdGlt
ZXMgdGhpcyBjb250ZXh0IGhhZCBiZWVuIHBpbm5lZAotCSAqIGZvciB1c2UgKHNob3VsZCBiZSwg
YXQgbW9zdCwgb25jZSBwZXIgZW5naW5lKS4KLQkgKgotCSAqIEBod19pZF9saW5rOiAtIGFsbCBj
b250ZXh0cyB3aXRoIGFuIGFzc2lnbmVkIGlkIGFyZSB0cmFja2VkCi0JICogZm9yIHBvc3NpYmxl
IHJlcG9zc2Vzc2lvbi4KLQkgKi8KLQl1bnNpZ25lZCBpbnQgaHdfaWQ7Ci0JYXRvbWljX3QgaHdf
aWRfcGluX2NvdW50OwotCXN0cnVjdCBsaXN0X2hlYWQgaHdfaWRfbGluazsKLQogCXN0cnVjdCBt
dXRleCBtdXRleDsKIAogCXN0cnVjdCBpOTE1X3NjaGVkX2F0dHIgc2NoZWQ7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29udGV4dC5jCmlu
ZGV4IDYyNDdkMjg4MDQ2NC4uZGJjZTIzZDljZjkxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYwpAQCAtNTM0LDkgKzUz
NCw5IEBAIHN0YXRpYyBpbnQgaWd0X2N0eF9leGVjKHZvaWQgKmFyZykKIAkJCXdpdGhfaW50ZWxf
cnVudGltZV9wbShpOTE1LCB3YWtlcmVmKQogCQkJCWVyciA9IGdwdV9maWxsKG9iaiwgY3R4LCBl
bmdpbmUsIGR3KTsKIAkJCWlmIChlcnIpIHsKLQkJCQlwcl9lcnIoIkZhaWxlZCB0byBmaWxsIGR3
b3JkICVsdSBbJWx1LyVsdV0gd2l0aCBncHUgKCVzKSBpbiBjdHggJXUgW2Z1bGwtcHBndHQ/ICVz
XSwgZXJyPSVkXG4iLAorCQkJCXByX2VycigiRmFpbGVkIHRvIGZpbGwgZHdvcmQgJWx1IFslbHUv
JWx1XSB3aXRoIGdwdSAoJXMpIFtmdWxsLXBwZ3R0PyAlc10sIGVycj0lZFxuIiwKIAkJCQkgICAg
ICAgbmR3b3JkcywgZHcsIG1heF9kd29yZHMob2JqKSwKLQkJCQkgICAgICAgZW5naW5lLT5uYW1l
LCBjdHgtPmh3X2lkLAorCQkJCSAgICAgICBlbmdpbmUtPm5hbWUsCiAJCQkJICAgICAgIHllc25v
KCEhY3R4LT52bSksIGVycik7CiAJCQkJZ290byBvdXRfdW5sb2NrOwogCQkJfQpAQCAtNjU0LDkg
KzY1NCw5IEBAIHN0YXRpYyBpbnQgaWd0X3NoYXJlZF9jdHhfZXhlYyh2b2lkICphcmcpCiAJCQl3
aXRoX2ludGVsX3J1bnRpbWVfcG0oaTkxNSwgd2FrZXJlZikKIAkJCQllcnIgPSBncHVfZmlsbChv
YmosIGN0eCwgZW5naW5lLCBkdyk7CiAJCQlpZiAoZXJyKSB7Ci0JCQkJcHJfZXJyKCJGYWlsZWQg
dG8gZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGggZ3B1ICglcykgaW4gY3R4ICV1IFtmdWxs
LXBwZ3R0PyAlc10sIGVycj0lZFxuIiwKKwkJCQlwcl9lcnIoIkZhaWxlZCB0byBmaWxsIGR3b3Jk
ICVsdSBbJWx1LyVsdV0gd2l0aCBncHUgKCVzKSBbZnVsbC1wcGd0dD8gJXNdLCBlcnI9JWRcbiIs
CiAJCQkJICAgICAgIG5kd29yZHMsIGR3LCBtYXhfZHdvcmRzKG9iaiksCi0JCQkJICAgICAgIGVu
Z2luZS0+bmFtZSwgY3R4LT5od19pZCwKKwkJCQkgICAgICAgZW5naW5lLT5uYW1lLAogCQkJCSAg
ICAgICB5ZXNubyghIWN0eC0+dm0pLCBlcnIpOwogCQkJCWtlcm5lbF9jb250ZXh0X2Nsb3NlKGN0
eCk7CiAJCQkJZ290byBvdXRfdGVzdDsKQEAgLTEyMzYsMTAgKzEyMzYsOSBAQCBzdGF0aWMgaW50
IGlndF9jdHhfcmVhZG9ubHkodm9pZCAqYXJnKQogCQkJd2l0aF9pbnRlbF9ydW50aW1lX3BtKGk5
MTUsIHdha2VyZWYpCiAJCQkJZXJyID0gZ3B1X2ZpbGwob2JqLCBjdHgsIGVuZ2luZSwgZHcpOwog
CQkJaWYgKGVycikgewotCQkJCXByX2VycigiRmFpbGVkIHRvIGZpbGwgZHdvcmQgJWx1IFslbHUv
JWx1XSB3aXRoIGdwdSAoJXMpIGluIGN0eCAldSBbZnVsbC1wcGd0dD8gJXNdLCBlcnI9JWRcbiIs
CisJCQkJcHJfZXJyKCJGYWlsZWQgdG8gZmlsbCBkd29yZCAlbHUgWyVsdS8lbHVdIHdpdGggZ3B1
ICglcykgW2Z1bGwtcHBndHQ/ICVzXSwgZXJyPSVkXG4iLAogCQkJCSAgICAgICBuZHdvcmRzLCBk
dywgbWF4X2R3b3JkcyhvYmopLAotCQkJCSAgICAgICBlbmdpbmUtPm5hbWUsIGN0eC0+aHdfaWQs
Ci0JCQkJICAgICAgIHllc25vKCEhY3R4LT52bSksIGVycik7CisJCQkJICAgICAgIGVuZ2luZS0+
bmFtZSwgeWVzbm8oISFjdHgtPnZtKSwgZXJyKTsKIAkJCQlnb3RvIG91dF91bmxvY2s7CiAJCQl9
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19j
b250ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4
dC5jCmluZGV4IGJlODk3NGNjZmYyNC4uMDEwNGYxNmIxMzI3IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250ZXh0LmMKQEAgLTEzLDcgKzEzLDYg
QEAgbW9ja19jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogewogCXN0cnVj
dCBpOTE1X2dlbV9jb250ZXh0ICpjdHg7CiAJc3RydWN0IGk5MTVfZ2VtX2VuZ2luZXMgKmU7Ci0J
aW50IHJldDsKIAogCWN0eCA9IGt6YWxsb2Moc2l6ZW9mKCpjdHgpLCBHRlBfS0VSTkVMKTsKIAlp
ZiAoIWN0eCkKQEAgLTMwLDEzICsyOSw4IEBAIG1vY2tfY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSwKIAlSQ1VfSU5JVF9QT0lOVEVSKGN0eC0+ZW5naW5lcywgZSk7CiAKIAlJ
TklUX1JBRElYX1RSRUUoJmN0eC0+aGFuZGxlc192bWEsIEdGUF9LRVJORUwpOwotCUlOSVRfTElT
VF9IRUFEKCZjdHgtPmh3X2lkX2xpbmspOwogCW11dGV4X2luaXQoJmN0eC0+bXV0ZXgpOwogCi0J
cmV0ID0gaTkxNV9nZW1fY29udGV4dF9waW5faHdfaWQoY3R4KTsKLQlpZiAocmV0IDwgMCkKLQkJ
Z290byBlcnJfZW5naW5lczsKLQogCWlmIChuYW1lKSB7CiAJCXN0cnVjdCBpOTE1X3BwZ3R0ICpw
cGd0dDsKIApAQCAtNTQsOCArNDgsNiBAQCBtb2NrX2NvbnRleHQoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTUsCiAKIAlyZXR1cm4gY3R4OwogCi1lcnJfZW5naW5lczoKLQlmcmVlX2VuZ2lu
ZXMocmN1X2FjY2Vzc19wb2ludGVyKGN0eC0+ZW5naW5lcykpOwogZXJyX2ZyZWU6CiAJa2ZyZWUo
Y3R4KTsKIAlyZXR1cm4gTlVMTDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2NvbnRleHRfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Nv
bnRleHRfdHlwZXMuaAppbmRleCA0YzBlMjExYzcxNWQuLmE3MGVjODJjNDU3NSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dF90eXBlcy5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHRfdHlwZXMuaApAQCAtNTIsNiArNTIs
NyBAQCBzdHJ1Y3QgaW50ZWxfY29udGV4dCB7CiAKIAl1MzIgKmxyY19yZWdfc3RhdGU7CiAJdTY0
IGxyY19kZXNjOworCXUzMiBod190YWc7CiAKIAl1bnNpZ25lZCBpbnQgYWN0aXZlX2NvdW50OyAv
KiBub3Rpb25hbGx5IHByb3RlY3RlZCBieSB0aW1lbGluZS0+bXV0ZXggKi8KIApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmggYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAppbmRleCAxY2JlMTBhMGZlYzcu
Ljk2OTk0YTU1ODA0YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
ZW5naW5lX3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5l
X3R5cGVzLmgKQEAgLTIzOSwxMCArMjM5LDEzIEBAIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mgewog
CiAJdTggY2xhc3M7CiAJdTggaW5zdGFuY2U7CisKKwl1MzIgdWFiaV9jYXBhYmlsaXRpZXM7CiAJ
dTMyIGNvbnRleHRfc2l6ZTsKIAl1MzIgbW1pb19iYXNlOwogCi0JdTMyIHVhYmlfY2FwYWJpbGl0
aWVzOworCXVuc2lnbmVkIGludCBod190YWc7CisjZGVmaW5lIE5VTV9IV19UQUcgKDI1NikKIAog
CXN0cnVjdCBpbnRlbF9zc2V1IHNzZXU7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2xyYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMK
aW5kZXggNWNkMjYzZGQzZTIzLi43MjFiZTVjZWM2YTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2xyYy5jCkBAIC0zODgsOSArMzg4LDYgQEAgbHJjX2Rlc2NyaXB0b3Ioc3RydWN0IGludGVs
X2NvbnRleHQgKmNlLCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJc3RydWN0IGk5
MTVfZ2VtX2NvbnRleHQgKmN0eCA9IGNlLT5nZW1fY29udGV4dDsKIAl1NjQgZGVzYzsKIAotCUJV
SUxEX0JVR19PTihNQVhfQ09OVEVYVF9IV19JRCA+IChCSVQoR0VOOF9DVFhfSURfV0lEVEgpKSk7
Ci0JQlVJTERfQlVHX09OKEdFTjExX01BWF9DT05URVhUX0hXX0lEID4gKEJJVChHRU4xMV9TV19D
VFhfSURfV0lEVEgpKSk7Ci0KIAlkZXNjID0gY3R4LT5kZXNjX3RlbXBsYXRlOwkJCQkvKiBiaXRz
ICAwLTExICovCiAJR0VNX0JVR19PTihkZXNjICYgR0VOTUFTS19VTEwoNjMsIDEyKSk7CiAKQEAg
LTQwNCwyMCArNDAxLDExIEBAIGxyY19kZXNjcmlwdG9yKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpj
ZSwgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCSAqIGFueXRoaW5nIGJlbG93Lgog
CSAqLwogCWlmIChJTlRFTF9HRU4oZW5naW5lLT5pOTE1KSA+PSAxMSkgewotCQlHRU1fQlVHX09O
KGN0eC0+aHdfaWQgPj0gQklUKEdFTjExX1NXX0NUWF9JRF9XSURUSCkpOwotCQlkZXNjIHw9ICh1
NjQpY3R4LT5od19pZCA8PCBHRU4xMV9TV19DVFhfSURfU0hJRlQ7Ci0JCQkJCQkJCS8qIGJpdHMg
MzctNDcgKi8KLQogCQlkZXNjIHw9ICh1NjQpZW5naW5lLT5pbnN0YW5jZSA8PCBHRU4xMV9FTkdJ
TkVfSU5TVEFOQ0VfU0hJRlQ7CiAJCQkJCQkJCS8qIGJpdHMgNDgtNTMgKi8KIAotCQkvKiBUT0RP
OiBkZWNpZGUgd2hhdCB0byBkbyB3aXRoIFNXIGNvdW50ZXIgKGJpdHMgNTUtNjApICovCi0KIAkJ
ZGVzYyB8PSAodTY0KWVuZ2luZS0+Y2xhc3MgPDwgR0VOMTFfRU5HSU5FX0NMQVNTX1NISUZUOwog
CQkJCQkJCQkvKiBiaXRzIDYxLTYzICovCi0JfSBlbHNlIHsKLQkJR0VNX0JVR19PTihjdHgtPmh3
X2lkID49IEJJVChHRU44X0NUWF9JRF9XSURUSCkpOwotCQlkZXNjIHw9ICh1NjQpY3R4LT5od19p
ZCA8PCBHRU44X0NUWF9JRF9TSElGVDsJLyogYml0cyAzMi01MiAqLwogCX0KIAogCXJldHVybiBk
ZXNjOwpAQCAtNTEzLDYgKzUwMSwxNSBAQCBleGVjbGlzdHNfc2NoZWR1bGVfaW4oc3RydWN0IGk5
MTVfcmVxdWVzdCAqcnEsIGludCBpZHgpCiAJCWludGVsX2NvbnRleHRfZ2V0KGNlKTsKIAkJY2Ut
PmluZmxpZ2h0ID0gcnEtPmVuZ2luZTsKIAorCQlpZiAoY2UtPmh3X3RhZykgeworCQkJY2UtPmxy
Y19kZXNjIHw9ICh1NjQpY2UtPmh3X3RhZyA8PCAzMjsKKwkJfSBlbHNlIHsKKwkJCWNlLT5scmNf
ZGVzYyAmPSB+R0VOTUFTS19VTEwoNDcsIDM3KTsKKwkJCWNlLT5scmNfZGVzYyB8PQorCQkJCSh1
NjQpKHJxLT5lbmdpbmUtPmh3X3RhZysrICUgTlVNX0hXX1RBRykgPDwKKwkJCQlHRU4xMV9TV19D
VFhfSURfU0hJRlQ7CisJCX0KKwogCQlleGVjbGlzdHNfY29udGV4dF9zdGF0dXNfY2hhbmdlKHJx
LCBJTlRFTF9DT05URVhUX1NDSEVEVUxFX0lOKTsKIAkJaW50ZWxfZW5naW5lX2NvbnRleHRfaW4o
Y2UtPmluZmxpZ2h0KTsKIAl9CkBAIC0xNTI2LDcgKzE1MjMsNiBAQCBzdGF0aWMgdm9pZCBleGVj
bGlzdHNfY29udGV4dF9kZXN0cm95KHN0cnVjdCBrcmVmICprcmVmKQogCiBzdGF0aWMgdm9pZCBl
eGVjbGlzdHNfY29udGV4dF91bnBpbihzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UpCiB7Ci0JaTkx
NV9nZW1fY29udGV4dF91bnBpbl9od19pZChjZS0+Z2VtX2NvbnRleHQpOwogCWk5MTVfZ2VtX29i
amVjdF91bnBpbl9tYXAoY2UtPnN0YXRlLT5vYmopOwogCWludGVsX3JpbmdfdW5waW4oY2UtPnJp
bmcpOwogfQpAQCAtMTU4MiwxOCArMTU3OCwxMiBAQCBfX2V4ZWNsaXN0c19jb250ZXh0X3Bpbihz
dHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCiAJaWYgKHJldCkKIAkJZ290byB1bnBpbl9tYXA7CiAK
LQlyZXQgPSBpOTE1X2dlbV9jb250ZXh0X3Bpbl9od19pZChjZS0+Z2VtX2NvbnRleHQpOwotCWlm
IChyZXQpCi0JCWdvdG8gdW5waW5fcmluZzsKLQogCWNlLT5scmNfZGVzYyA9IGxyY19kZXNjcmlw
dG9yKGNlLCBlbmdpbmUpOwogCWNlLT5scmNfcmVnX3N0YXRlID0gdmFkZHIgKyBMUkNfU1RBVEVf
UE4gKiBQQUdFX1NJWkU7CiAJX19leGVjbGlzdHNfdXBkYXRlX3JlZ19zdGF0ZShjZSwgZW5naW5l
KTsKIAogCXJldHVybiAwOwogCi11bnBpbl9yaW5nOgotCWludGVsX3JpbmdfdW5waW4oY2UtPnJp
bmcpOwogdW5waW5fbWFwOgogCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAoY2UtPnN0YXRlLT5v
YmopOwogdW5waW5fYWN0aXZlOgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0
L2t2bWd0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3QuYwppbmRleCAxNDQzMDFi
Nzc4ZGYuLjk0MWQwZjA4YjA0NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0
L2t2bWd0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2t2bWd0LmMKQEAgLTE1NjYs
MjcgKzE1NjYsMTAgQEAgdmdwdV9pZF9zaG93KHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRl
dmljZV9hdHRyaWJ1dGUgKmF0dHIsCiAJcmV0dXJuIHNwcmludGYoYnVmLCAiXG4iKTsKIH0KIAot
c3RhdGljIHNzaXplX3QKLWh3X2lkX3Nob3coc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgZGV2
aWNlX2F0dHJpYnV0ZSAqYXR0ciwKLQkgICBjaGFyICpidWYpCi17Ci0Jc3RydWN0IG1kZXZfZGV2
aWNlICptZGV2ID0gbWRldl9mcm9tX2RldihkZXYpOwotCi0JaWYgKG1kZXYpIHsKLQkJc3RydWN0
IGludGVsX3ZncHUgKnZncHUgPSAoc3RydWN0IGludGVsX3ZncHUgKikKLQkJCW1kZXZfZ2V0X2Ry
dmRhdGEobWRldik7Ci0JCXJldHVybiBzcHJpbnRmKGJ1ZiwgIiV1XG4iLAotCQkJICAgICAgIHZn
cHUtPnN1Ym1pc3Npb24uc2hhZG93WzBdLT5nZW1fY29udGV4dC0+aHdfaWQpOwotCX0KLQlyZXR1
cm4gc3ByaW50ZihidWYsICJcbiIpOwotfQotCiBzdGF0aWMgREVWSUNFX0FUVFJfUk8odmdwdV9p
ZCk7Ci1zdGF0aWMgREVWSUNFX0FUVFJfUk8oaHdfaWQpOwogCiBzdGF0aWMgc3RydWN0IGF0dHJp
YnV0ZSAqaW50ZWxfdmdwdV9hdHRyc1tdID0gewogCSZkZXZfYXR0cl92Z3B1X2lkLmF0dHIsCi0J
JmRldl9hdHRyX2h3X2lkLmF0dHIsCiAJTlVMTAogfTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rl
YnVnZnMuYwppbmRleCBjYmVhYTUzMTE3YWYuLjY1N2U4ZmIxOGUzOCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9kZWJ1Z2ZzLmMKQEAgLTE2NjQsOSArMTY2NCw2IEBAIHN0YXRpYyBpbnQgaTkxNV9j
b250ZXh0X3N0YXR1cyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIAkJc3RydWN0
IGludGVsX2NvbnRleHQgKmNlOwogCiAJCXNlcV9wdXRzKG0sICJIVyBjb250ZXh0ICIpOwotCQlp
ZiAoIWxpc3RfZW1wdHkoJmN0eC0+aHdfaWRfbGluaykpCi0JCQlzZXFfcHJpbnRmKG0sICIleCBb
cGluICV1XSIsIGN0eC0+aHdfaWQsCi0JCQkJICAgYXRvbWljX3JlYWQoJmN0eC0+aHdfaWRfcGlu
X2NvdW50KSk7CiAJCWlmIChjdHgtPnBpZCkgewogCQkJc3RydWN0IHRhc2tfc3RydWN0ICp0YXNr
OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRleCBlZjllNGNiNDliNGEuLmEwYWQ5NTIyNDI1
ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBAIC0xNjE2LDE2ICsxNjE2LDYgQEAgc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgewogCQlzdHJ1Y3QgbGlzdF9oZWFkIGxpc3Q7CiAJCXN0cnVjdCBs
bGlzdF9oZWFkIGZyZWVfbGlzdDsKIAkJc3RydWN0IHdvcmtfc3RydWN0IGZyZWVfd29yazsKLQot
CQkvKiBUaGUgaHcgd2FudHMgdG8gaGF2ZSBhIHN0YWJsZSBjb250ZXh0IGlkZW50aWZpZXIgZm9y
IHRoZQotCQkgKiBsaWZldGltZSBvZiB0aGUgY29udGV4dCAoZm9yIE9BLCBQQVNJRCwgZmF1bHRz
LCBldGMpLgotCQkgKiBUaGlzIGlzIGxpbWl0ZWQgaW4gZXhlY2xpc3RzIHRvIDIxIGJpdHMuCi0J
CSAqLwotCQlzdHJ1Y3QgaWRhIGh3X2lkYTsKLSNkZWZpbmUgTUFYX0NPTlRFWFRfSFdfSUQgKDE8
PDIxKSAvKiBleGNsdXNpdmUgKi8KLSNkZWZpbmUgTUFYX0dVQ19DT05URVhUX0hXX0lEICgxIDw8
IDIwKSAvKiBleGNsdXNpdmUgKi8KLSNkZWZpbmUgR0VOMTFfTUFYX0NPTlRFWFRfSFdfSUQgKDE8
PDExKSAvKiBleGNsdXNpdmUgKi8KLQkJc3RydWN0IGxpc3RfaGVhZCBod19pZF9saXN0OwogCX0g
Y29udGV4dHM7CiAKIAl1MzIgZmRpX3J4X2NvbmZpZzsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dw
dV9lcnJvci5jCmluZGV4IDAxZTFhZjJhNjUxZi4uMTE5MGExNTEzNjEyIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMKQEAgLTQ2MCw5ICs0NjAsOSBAQCBzdGF0aWMgdm9pZCBl
cnJvcl9wcmludF9jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9lcnJvcl9zdGF0ZV9idWYgKm0sCiAJ
CQkJY29uc3QgY2hhciAqaGVhZGVyLAogCQkJCWNvbnN0IHN0cnVjdCBkcm1faTkxNV9lcnJvcl9j
b250ZXh0ICpjdHgpCiB7Ci0JZXJyX3ByaW50ZihtLCAiJXMlc1slZF0gaHdfaWQgJWQsIHByaW8g
JWQsIGd1aWx0eSAlZCBhY3RpdmUgJWRcbiIsCi0JCSAgIGhlYWRlciwgY3R4LT5jb21tLCBjdHgt
PnBpZCwgY3R4LT5od19pZCwKLQkJICAgY3R4LT5zY2hlZF9hdHRyLnByaW9yaXR5LCBjdHgtPmd1
aWx0eSwgY3R4LT5hY3RpdmUpOworCWVycl9wcmludGYobSwgIiVzJXNbJWRdIHByaW8gJWQsIGd1
aWx0eSAlZCBhY3RpdmUgJWRcbiIsCisJCSAgIGhlYWRlciwgY3R4LT5jb21tLCBjdHgtPnBpZCwg
Y3R4LT5zY2hlZF9hdHRyLnByaW9yaXR5LAorCQkgICBjdHgtPmd1aWx0eSwgY3R4LT5hY3RpdmUp
OwogfQogCiBzdGF0aWMgdm9pZCBlcnJvcl9wcmludF9lbmdpbmUoc3RydWN0IGRybV9pOTE1X2Vy
cm9yX3N0YXRlX2J1ZiAqbSwKQEAgLTEzNDIsNyArMTM0Miw2IEBAIHN0YXRpYyB2b2lkIHJlY29y
ZF9jb250ZXh0KHN0cnVjdCBkcm1faTkxNV9lcnJvcl9jb250ZXh0ICplLAogCQlyY3VfcmVhZF91
bmxvY2soKTsKIAl9CiAKLQllLT5od19pZCA9IGN0eC0+aHdfaWQ7CiAJZS0+c2NoZWRfYXR0ciA9
IGN0eC0+c2NoZWQ7CiAJZS0+Z3VpbHR5ID0gYXRvbWljX3JlYWQoJmN0eC0+Z3VpbHR5X2NvdW50
KTsKIAllLT5hY3RpdmUgPSBhdG9taWNfcmVhZCgmY3R4LT5hY3RpdmVfY291bnQpOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmgKaW5kZXggMmVjZDBjNmExYzk0Li5hYTJjMDU2ZGY0
ZWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmgKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuaApAQCAtMTE3LDcgKzExNyw2
IEBAIHN0cnVjdCBpOTE1X2dwdV9zdGF0ZSB7CiAJCXN0cnVjdCBkcm1faTkxNV9lcnJvcl9jb250
ZXh0IHsKIAkJCWNoYXIgY29tbVtUQVNLX0NPTU1fTEVOXTsKIAkJCXBpZF90IHBpZDsKLQkJCXUz
MiBod19pZDsKIAkJCWludCBhY3RpdmU7CiAJCQlpbnQgZ3VpbHR5OwogCQkJc3RydWN0IGk5MTVf
c2NoZWRfYXR0ciBzY2hlZF9hdHRyOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wZXJmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwppbmRleCA4OTFi
NjBmNDk4NDMuLjdiYTgzNDg4ZDJlNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wZXJmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKQEAgLTEy
OTMsMTkgKzEyOTMsMTQgQEAgc3RhdGljIGludCBvYV9nZXRfcmVuZGVyX2N0eF9pZChzdHJ1Y3Qg
aTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQogCQkJaTkxNS0+cGVyZi5vYS5zcGVjaWZpY19jdHhf
aWRfbWFzayA9CiAJCQkJKDFVIDw8IEdFTjhfQ1RYX0lEX1dJRFRIKSAtIDE7CiAJCQlpOTE1LT5w
ZXJmLm9hLnNwZWNpZmljX2N0eF9pZCA9Ci0JCQkJdXBwZXJfMzJfYml0cyhjZS0+bHJjX2Rlc2Mp
OwotCQkJaTkxNS0+cGVyZi5vYS5zcGVjaWZpY19jdHhfaWQgJj0KIAkJCQlpOTE1LT5wZXJmLm9h
LnNwZWNpZmljX2N0eF9pZF9tYXNrOwogCQl9CiAJCWJyZWFrOwogCiAJY2FzZSAxMTogewogCQlp
OTE1LT5wZXJmLm9hLnNwZWNpZmljX2N0eF9pZF9tYXNrID0KLQkJCSgoMVUgPDwgR0VOMTFfU1df
Q1RYX0lEX1dJRFRIKSAtIDEpIDw8IChHRU4xMV9TV19DVFhfSURfU0hJRlQgLSAzMikgfAotCQkJ
KCgxVSA8PCBHRU4xMV9FTkdJTkVfSU5TVEFOQ0VfV0lEVEgpIC0gMSkgPDwgKEdFTjExX0VOR0lO
RV9JTlNUQU5DRV9TSElGVCAtIDMyKSB8Ci0JCQkoKDEgPDwgR0VOMTFfRU5HSU5FX0NMQVNTX1dJ
RFRIKSAtIDEpIDw8IChHRU4xMV9FTkdJTkVfQ0xBU1NfU0hJRlQgLSAzMik7Ci0JCWk5MTUtPnBl
cmYub2Euc3BlY2lmaWNfY3R4X2lkID0gdXBwZXJfMzJfYml0cyhjZS0+bHJjX2Rlc2MpOwotCQlp
OTE1LT5wZXJmLm9hLnNwZWNpZmljX2N0eF9pZCAmPQorCQkJKCgxVSA8PCBHRU4xMV9TV19DVFhf
SURfV0lEVEgpIC0gMSkgPDwgKEdFTjExX1NXX0NUWF9JRF9TSElGVCAtIDMyKTsKKwkJaTkxNS0+
cGVyZi5vYS5zcGVjaWZpY19jdHhfaWQgPQogCQkJaTkxNS0+cGVyZi5vYS5zcGVjaWZpY19jdHhf
aWRfbWFzazsKIAkJYnJlYWs7CiAJfQpAQCAtMTMxNCw2ICsxMzA5LDggQEAgc3RhdGljIGludCBv
YV9nZXRfcmVuZGVyX2N0eF9pZChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQogCQlN
SVNTSU5HX0NBU0UoSU5URUxfR0VOKGk5MTUpKTsKIAl9CiAKKwljZS0+aHdfdGFnID0gaTkxNS0+
cGVyZi5vYS5zcGVjaWZpY19jdHhfaWRfbWFzazsKKwogCURSTV9ERUJVR19EUklWRVIoImZpbHRl
cmluZyBvbiBjdHhfaWQ9MHgleCBjdHhfaWRfbWFzaz0weCV4XG4iLAogCQkJIGk5MTUtPnBlcmYu
b2Euc3BlY2lmaWNfY3R4X2lkLAogCQkJIGk5MTUtPnBlcmYub2Euc3BlY2lmaWNfY3R4X2lkX21h
c2spOwpAQCAtMTMzMCwxOCArMTMyNywxOSBAQCBzdGF0aWMgaW50IG9hX2dldF9yZW5kZXJfY3R4
X2lkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiAgKi8KIHN0YXRpYyB2b2lkIG9h
X3B1dF9yZW5kZXJfY3R4X2lkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiB7Ci0J
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gc3RyZWFtLT5kZXZfcHJpdjsKKwlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHN0cmVhbS0+ZGV2X3ByaXY7CiAJc3RydWN0
IGludGVsX2NvbnRleHQgKmNlOwogCi0JZGV2X3ByaXYtPnBlcmYub2Euc3BlY2lmaWNfY3R4X2lk
ID0gSU5WQUxJRF9DVFhfSUQ7Ci0JZGV2X3ByaXYtPnBlcmYub2Euc3BlY2lmaWNfY3R4X2lkX21h
c2sgPSAwOwotCi0JY2UgPSBmZXRjaF9hbmRfemVybygmZGV2X3ByaXYtPnBlcmYub2EucGlubmVk
X2N0eCk7Ci0JaWYgKGNlKSB7Ci0JCW11dGV4X2xvY2soJmRldl9wcml2LT5kcm0uc3RydWN0X211
dGV4KTsKKwljZSA9IGZldGNoX2FuZF96ZXJvKCZpOTE1LT5wZXJmLm9hLnBpbm5lZF9jdHgpOwor
CWlmIChjZSkgIHsKKwkJbXV0ZXhfbG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7CisJCWNl
LT5od190YWcgPSAwOwogCQlpbnRlbF9jb250ZXh0X3VucGluKGNlKTsKLQkJbXV0ZXhfdW5sb2Nr
KCZkZXZfcHJpdi0+ZHJtLnN0cnVjdF9tdXRleCk7CisJCW11dGV4X3VubG9jaygmaTkxNS0+ZHJt
LnN0cnVjdF9tdXRleCk7CiAJfQorCisJaTkxNS0+cGVyZi5vYS5zcGVjaWZpY19jdHhfaWQgPSBJ
TlZBTElEX0NUWF9JRDsKKwlpOTE1LT5wZXJmLm9hLnNwZWNpZmljX2N0eF9pZF9tYXNrID0gMDsK
IH0KIAogc3RhdGljIHZvaWQKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
dHJhY2UuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdHJhY2UuaAppbmRleCA1YzhjZmFh
NzBkNzIuLmU2Zjg1NTMyM2ZmYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV90cmFjZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdHJhY2UuaApAQCAtNjc1
LDcgKzY3NSw2IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF9xdWV1ZSwKIAogCSAgICBUUF9T
VFJVQ1RfX2VudHJ5KAogCQkJICAgICBfX2ZpZWxkKHUzMiwgZGV2KQotCQkJICAgICBfX2ZpZWxk
KHUzMiwgaHdfaWQpCiAJCQkgICAgIF9fZmllbGQodTY0LCBjdHgpCiAJCQkgICAgIF9fZmllbGQo
dTE2LCBjbGFzcykKIAkJCSAgICAgX19maWVsZCh1MTYsIGluc3RhbmNlKQpAQCAtNjg1LDcgKzY4
NCw2IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF9xdWV1ZSwKIAogCSAgICBUUF9mYXN0X2Fz
c2lnbigKIAkJCSAgIF9fZW50cnktPmRldiA9IHJxLT5pOTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7
Ci0JCQkgICBfX2VudHJ5LT5od19pZCA9IHJxLT5nZW1fY29udGV4dC0+aHdfaWQ7CiAJCQkgICBf
X2VudHJ5LT5jbGFzcyA9IHJxLT5lbmdpbmUtPnVhYmlfY2xhc3M7CiAJCQkgICBfX2VudHJ5LT5p
bnN0YW5jZSA9IHJxLT5lbmdpbmUtPmluc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0gcnEt
PmZlbmNlLmNvbnRleHQ7CkBAIC02OTMsMTAgKzY5MSw5IEBAIFRSQUNFX0VWRU5UKGk5MTVfcmVx
dWVzdF9xdWV1ZSwKIAkJCSAgIF9fZW50cnktPmZsYWdzID0gZmxhZ3M7CiAJCQkgICApLAogCi0J
ICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9JXU6JXUsIGh3X2lkPSV1LCBjdHg9JWxsdSwg
c2Vxbm89JXUsIGZsYWdzPTB4JXgiLAorCSAgICBUUF9wcmludGsoImRldj0ldSwgZW5naW5lPSV1
OiV1LCBjdHg9JWxsdSwgc2Vxbm89JXUsIGZsYWdzPTB4JXgiLAogCQkgICAgICBfX2VudHJ5LT5k
ZXYsIF9fZW50cnktPmNsYXNzLCBfX2VudHJ5LT5pbnN0YW5jZSwKLQkJICAgICAgX19lbnRyeS0+
aHdfaWQsIF9fZW50cnktPmN0eCwgX19lbnRyeS0+c2Vxbm8sCi0JCSAgICAgIF9fZW50cnktPmZs
YWdzKQorCQkgICAgICBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLCBfX2VudHJ5LT5mbGFn
cykKICk7CiAKIERFQ0xBUkVfRVZFTlRfQ0xBU1MoaTkxNV9yZXF1ZXN0LApAQCAtNzA1LDcgKzcw
Miw2IEBAIERFQ0xBUkVfRVZFTlRfQ0xBU1MoaTkxNV9yZXF1ZXN0LAogCiAJICAgIFRQX1NUUlVD
VF9fZW50cnkoCiAJCQkgICAgIF9fZmllbGQodTMyLCBkZXYpCi0JCQkgICAgIF9fZmllbGQodTMy
LCBod19pZCkKIAkJCSAgICAgX19maWVsZCh1NjQsIGN0eCkKIAkJCSAgICAgX19maWVsZCh1MTYs
IGNsYXNzKQogCQkJICAgICBfX2ZpZWxkKHUxNiwgaW5zdGFuY2UpCkBAIC03MTQsMTYgKzcxMCwx
NSBAQCBERUNMQVJFX0VWRU5UX0NMQVNTKGk5MTVfcmVxdWVzdCwKIAogCSAgICBUUF9mYXN0X2Fz
c2lnbigKIAkJCSAgIF9fZW50cnktPmRldiA9IHJxLT5pOTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7
Ci0JCQkgICBfX2VudHJ5LT5od19pZCA9IHJxLT5nZW1fY29udGV4dC0+aHdfaWQ7CiAJCQkgICBf
X2VudHJ5LT5jbGFzcyA9IHJxLT5lbmdpbmUtPnVhYmlfY2xhc3M7CiAJCQkgICBfX2VudHJ5LT5p
bnN0YW5jZSA9IHJxLT5lbmdpbmUtPmluc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0gcnEt
PmZlbmNlLmNvbnRleHQ7CiAJCQkgICBfX2VudHJ5LT5zZXFubyA9IHJxLT5mZW5jZS5zZXFubzsK
IAkJCSAgICksCiAKLQkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgaHdfaWQ9
JXUsIGN0eD0lbGx1LCBzZXFubz0ldSIsCisJICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdpbmU9
JXU6JXUsIGN0eD0lbGx1LCBzZXFubz0ldSIsCiAJCSAgICAgIF9fZW50cnktPmRldiwgX19lbnRy
eS0+Y2xhc3MsIF9fZW50cnktPmluc3RhbmNlLAotCQkgICAgICBfX2VudHJ5LT5od19pZCwgX19l
bnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubykKKwkJICAgICAgX19lbnRyeS0+Y3R4LCBfX2VudHJ5
LT5zZXFubykKICk7CiAKIERFRklORV9FVkVOVChpOTE1X3JlcXVlc3QsIGk5MTVfcmVxdWVzdF9h
ZGQsCkBAIC03NDgsNyArNzQzLDYgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X2luLAogCiAJ
ICAgIFRQX1NUUlVDVF9fZW50cnkoCiAJCQkgICAgIF9fZmllbGQodTMyLCBkZXYpCi0JCQkgICAg
IF9fZmllbGQodTMyLCBod19pZCkKIAkJCSAgICAgX19maWVsZCh1NjQsIGN0eCkKIAkJCSAgICAg
X19maWVsZCh1MTYsIGNsYXNzKQogCQkJICAgICBfX2ZpZWxkKHUxNiwgaW5zdGFuY2UpCkBAIC03
NTksNyArNzUzLDYgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X2luLAogCiAJICAgIFRQX2Zh
c3RfYXNzaWduKAogCQkJICAgX19lbnRyeS0+ZGV2ID0gcnEtPmk5MTUtPmRybS5wcmltYXJ5LT5p
bmRleDsKLQkJCSAgIF9fZW50cnktPmh3X2lkID0gcnEtPmdlbV9jb250ZXh0LT5od19pZDsKIAkJ
CSAgIF9fZW50cnktPmNsYXNzID0gcnEtPmVuZ2luZS0+dWFiaV9jbGFzczsKIAkJCSAgIF9fZW50
cnktPmluc3RhbmNlID0gcnEtPmVuZ2luZS0+aW5zdGFuY2U7CiAJCQkgICBfX2VudHJ5LT5jdHgg
PSBycS0+ZmVuY2UuY29udGV4dDsKQEAgLTc2OCw5ICs3NjEsOSBAQCBUUkFDRV9FVkVOVChpOTE1
X3JlcXVlc3RfaW4sCiAJCQkgICBfX2VudHJ5LT5wb3J0ID0gcG9ydDsKIAkJCSAgICksCiAKLQkg
ICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgaHdfaWQ9JXUsIGN0eD0lbGx1LCBz
ZXFubz0ldSwgcHJpbz0ldSwgcG9ydD0ldSIsCisJICAgIFRQX3ByaW50aygiZGV2PSV1LCBlbmdp
bmU9JXU6JXUsIGN0eD0lbGx1LCBzZXFubz0ldSwgcHJpbz0ldSwgcG9ydD0ldSIsCiAJCSAgICAg
IF9fZW50cnktPmRldiwgX19lbnRyeS0+Y2xhc3MsIF9fZW50cnktPmluc3RhbmNlLAotCQkgICAg
ICBfX2VudHJ5LT5od19pZCwgX19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywKKwkJICAgICAg
X19lbnRyeS0+Y3R4LCBfX2VudHJ5LT5zZXFubywKIAkJICAgICAgX19lbnRyeS0+cHJpbywgX19l
bnRyeS0+cG9ydCkKICk7CiAKQEAgLTc4MCw3ICs3NzMsNiBAQCBUUkFDRV9FVkVOVChpOTE1X3Jl
cXVlc3Rfb3V0LAogCiAJICAgIFRQX1NUUlVDVF9fZW50cnkoCiAJCQkgICAgIF9fZmllbGQodTMy
LCBkZXYpCi0JCQkgICAgIF9fZmllbGQodTMyLCBod19pZCkKIAkJCSAgICAgX19maWVsZCh1NjQs
IGN0eCkKIAkJCSAgICAgX19maWVsZCh1MTYsIGNsYXNzKQogCQkJICAgICBfX2ZpZWxkKHUxNiwg
aW5zdGFuY2UpCkBAIC03OTAsNyArNzgyLDYgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X291
dCwKIAogCSAgICBUUF9mYXN0X2Fzc2lnbigKIAkJCSAgIF9fZW50cnktPmRldiA9IHJxLT5pOTE1
LT5kcm0ucHJpbWFyeS0+aW5kZXg7Ci0JCQkgICBfX2VudHJ5LT5od19pZCA9IHJxLT5nZW1fY29u
dGV4dC0+aHdfaWQ7CiAJCQkgICBfX2VudHJ5LT5jbGFzcyA9IHJxLT5lbmdpbmUtPnVhYmlfY2xh
c3M7CiAJCQkgICBfX2VudHJ5LT5pbnN0YW5jZSA9IHJxLT5lbmdpbmUtPmluc3RhbmNlOwogCQkJ
ICAgX19lbnRyeS0+Y3R4ID0gcnEtPmZlbmNlLmNvbnRleHQ7CkBAIC03OTgsMTAgKzc4OSw5IEBA
IFRSQUNFX0VWRU5UKGk5MTVfcmVxdWVzdF9vdXQsCiAJCQkgICBfX2VudHJ5LT5jb21wbGV0ZWQg
PSBpOTE1X3JlcXVlc3RfY29tcGxldGVkKHJxKTsKIAkJCSAgICksCiAKLQkJICAgIFRQX3ByaW50
aygiZGV2PSV1LCBlbmdpbmU9JXU6JXUsIGh3X2lkPSV1LCBjdHg9JWxsdSwgc2Vxbm89JXUsIGNv
bXBsZXRlZD89JXUiLAorCQkgICAgVFBfcHJpbnRrKCJkZXY9JXUsIGVuZ2luZT0ldToldSwgY3R4
PSVsbHUsIHNlcW5vPSV1LCBjb21wbGV0ZWQ/PSV1IiwKIAkJCSAgICAgIF9fZW50cnktPmRldiwg
X19lbnRyeS0+Y2xhc3MsIF9fZW50cnktPmluc3RhbmNlLAotCQkJICAgICAgX19lbnRyeS0+aHdf
aWQsIF9fZW50cnktPmN0eCwgX19lbnRyeS0+c2Vxbm8sCi0JCQkgICAgICBfX2VudHJ5LT5jb21w
bGV0ZWQpCisJCQkgICAgICBfX2VudHJ5LT5jdHgsIF9fZW50cnktPnNlcW5vLCBfX2VudHJ5LT5j
b21wbGV0ZWQpCiApOwogCiAjZWxzZQpAQCAtODM5LDcgKzgyOSw2IEBAIFRSQUNFX0VWRU5UKGk5
MTVfcmVxdWVzdF93YWl0X2JlZ2luLAogCiAJICAgIFRQX1NUUlVDVF9fZW50cnkoCiAJCQkgICAg
IF9fZmllbGQodTMyLCBkZXYpCi0JCQkgICAgIF9fZmllbGQodTMyLCBod19pZCkKIAkJCSAgICAg
X19maWVsZCh1NjQsIGN0eCkKIAkJCSAgICAgX19maWVsZCh1MTYsIGNsYXNzKQogCQkJICAgICBf
X2ZpZWxkKHUxNiwgaW5zdGFuY2UpCkBAIC04NTUsNyArODQ0LDYgQEAgVFJBQ0VfRVZFTlQoaTkx
NV9yZXF1ZXN0X3dhaXRfYmVnaW4sCiAJICAgICAqLwogCSAgICBUUF9mYXN0X2Fzc2lnbigKIAkJ
CSAgIF9fZW50cnktPmRldiA9IHJxLT5pOTE1LT5kcm0ucHJpbWFyeS0+aW5kZXg7Ci0JCQkgICBf
X2VudHJ5LT5od19pZCA9IHJxLT5nZW1fY29udGV4dC0+aHdfaWQ7CiAJCQkgICBfX2VudHJ5LT5j
bGFzcyA9IHJxLT5lbmdpbmUtPnVhYmlfY2xhc3M7CiAJCQkgICBfX2VudHJ5LT5pbnN0YW5jZSA9
IHJxLT5lbmdpbmUtPmluc3RhbmNlOwogCQkJICAgX19lbnRyeS0+Y3R4ID0gcnEtPmZlbmNlLmNv
bnRleHQ7CkBAIC04NjMsOSArODUxLDkgQEAgVFJBQ0VfRVZFTlQoaTkxNV9yZXF1ZXN0X3dhaXRf
YmVnaW4sCiAJCQkgICBfX2VudHJ5LT5mbGFncyA9IGZsYWdzOwogCQkJICAgKSwKIAotCSAgICBU
UF9wcmludGsoImRldj0ldSwgZW5naW5lPSV1OiV1LCBod19pZD0ldSwgY3R4PSVsbHUsIHNlcW5v
PSV1LCBibG9ja2luZz0ldSwgZmxhZ3M9MHgleCIsCisJICAgIFRQX3ByaW50aygiZGV2PSV1LCBl
bmdpbmU9JXU6JXUsIGN0eD0lbGx1LCBzZXFubz0ldSwgYmxvY2tpbmc9JXUsIGZsYWdzPTB4JXgi
LAogCQkgICAgICBfX2VudHJ5LT5kZXYsIF9fZW50cnktPmNsYXNzLCBfX2VudHJ5LT5pbnN0YW5j
ZSwKLQkJICAgICAgX19lbnRyeS0+aHdfaWQsIF9fZW50cnktPmN0eCwgX19lbnRyeS0+c2Vxbm8s
CisJCSAgICAgIF9fZW50cnktPmN0eCwgX19lbnRyeS0+c2Vxbm8sCiAJCSAgICAgICEhKF9fZW50
cnktPmZsYWdzICYgSTkxNV9XQUlUX0xPQ0tFRCksCiAJCSAgICAgIF9fZW50cnktPmZsYWdzKQog
KTsKQEAgLTk2OSwxOSArOTU3LDE3IEBAIERFQ0xBUkVfRVZFTlRfQ0xBU1MoaTkxNV9jb250ZXh0
LAogCVRQX1NUUlVDVF9fZW50cnkoCiAJCQlfX2ZpZWxkKHUzMiwgZGV2KQogCQkJX19maWVsZChz
dHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqLCBjdHgpCi0JCQlfX2ZpZWxkKHUzMiwgaHdfaWQpCiAJ
CQlfX2ZpZWxkKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKiwgdm0pCiAJKSwKIAogCVRQX2Zh
c3RfYXNzaWduKAogCQkJX19lbnRyeS0+ZGV2ID0gY3R4LT5pOTE1LT5kcm0ucHJpbWFyeS0+aW5k
ZXg7CiAJCQlfX2VudHJ5LT5jdHggPSBjdHg7Ci0JCQlfX2VudHJ5LT5od19pZCA9IGN0eC0+aHdf
aWQ7CiAJCQlfX2VudHJ5LT52bSA9IGN0eC0+dm07CiAJKSwKIAotCVRQX3ByaW50aygiZGV2PSV1
LCBjdHg9JXAsIGN0eF92bT0lcCwgaHdfaWQ9JXUiLAotCQkgIF9fZW50cnktPmRldiwgX19lbnRy
eS0+Y3R4LCBfX2VudHJ5LT52bSwgX19lbnRyeS0+aHdfaWQpCisJVFBfcHJpbnRrKCJkZXY9JXUs
IGN0eD0lcCwgY3R4X3ZtPSVwIiwKKwkJICBfX2VudHJ5LT5kZXYsIF9fZW50cnktPmN0eCwgX19l
bnRyeS0+dm0pCiApCiAKIERFRklORV9FVkVOVChpOTE1X2NvbnRleHQsIGk5MTVfY29udGV4dF9j
cmVhdGUsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9n
ZW1fZXZpY3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ldmlj
dC5jCmluZGV4IDcxYzEzNjNhZDUzNi4uNDI0NzE2M2NiODBmIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZXZpY3QuYwpAQCAtNDczLDggKzQ3Myw4IEBA
IHN0YXRpYyBpbnQgaWd0X2V2aWN0X2NvbnRleHRzKHZvaWQgKmFyZykKIAkJCWlmIChJU19FUlIo
cnEpKSB7CiAJCQkJLyogV2hlbiBmdWxsLCBmYWlsX2lmX2J1c3kgd2lsbCB0cmlnZ2VyIEVCVVNZ
ICovCiAJCQkJaWYgKFBUUl9FUlIocnEpICE9IC1FQlVTWSkgewotCQkJCQlwcl9lcnIoIlVuZXhw
ZWN0ZWQgZXJyb3IgZnJvbSByZXF1ZXN0IGFsbG9jIChjdHggaHcgaWQgJXUsIG9uICVzKTogJWRc
biIsCi0JCQkJCSAgICAgICBjdHgtPmh3X2lkLCBlbmdpbmUtPm5hbWUsCisJCQkJCXByX2Vycigi
VW5leHBlY3RlZCBlcnJvciBmcm9tIHJlcXVlc3QgYWxsb2MgKG9uICVzKTogJWRcbiIsCisJCQkJ
CSAgICAgICBlbmdpbmUtPm5hbWUsCiAJCQkJCSAgICAgICAoaW50KVBUUl9FUlIocnEpKTsKIAkJ
CQkJZXJyID0gUFRSX0VSUihycSk7CiAJCQkJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVz
dHMvaTkxNV92bWEuYwppbmRleCAzMzJlZTVjYjkxMjAuLmQyMjNmM2E2ZjYwOCAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMKQEAgLTE3MCw3ICsxNzAsNyBAQCBz
dGF0aWMgaW50IGlndF92bWFfY3JlYXRlKHZvaWQgKmFyZykKIAkJfQogCiAJCW5jID0gMDsKLQkJ
Zm9yX2VhY2hfcHJpbWVfbnVtYmVyKG51bV9jdHgsIE1BWF9DT05URVhUX0hXX0lEKSB7CisJCWZv
cl9lYWNoX3ByaW1lX251bWJlcihudW1fY3R4LCBOVU1fSFdfVEFHKSB7CiAJCQlmb3IgKDsgbmMg
PCBudW1fY3R4OyBuYysrKSB7CiAJCQkJY3R4ID0gbW9ja19jb250ZXh0KGk5MTUsICJtb2NrIik7
CiAJCQkJaWYgKCFjdHgpCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeA==

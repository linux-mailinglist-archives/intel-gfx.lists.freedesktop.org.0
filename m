Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 59E3037FF9
	for <lists+intel-gfx@lfdr.de>; Thu,  6 Jun 2019 23:52:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 93289899D4;
	Thu,  6 Jun 2019 21:52:50 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 809CE899D4
 for <intel-gfx@lists.freedesktop.org>; Thu,  6 Jun 2019 21:52:47 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 06 Jun 2019 14:52:47 -0700
X-ExtLoop1: 1
Received: from dceraolo-linux.fm.intel.com ([10.1.27.145])
 by orsmga002.jf.intel.com with ESMTP; 06 Jun 2019 14:52:47 -0700
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu,  6 Jun 2019 14:52:15 -0700
Message-Id: <20190606215218.34486-7-daniele.ceraolospurio@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190606215218.34486-1-daniele.ceraolospurio@intel.com>
References: <20190606215218.34486-1-daniele.ceraolospurio@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC 6/8] drm/i915: drop forcewake_user_get/put
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Tm93IHRoYXQgd2UndmUgc3BsaXQgb3V0IHRoZSBtbWlvX2RlYnVnLCB3ZSBjYW4gbWFuaXB1bGF0
ZSB0aGF0CmluZGVwZW5kZW50bHkgZnJvbSB0aGUgZGVidWdmcyBhbmQganVzdCBjYWxsIHRoZSBu
b3JtYWwgZm9yY2V3YWtlCmdldC9wdXQgZnVuY3Rpb25zLgoKU2lnbmVkLW9mZi1ieTogRGFuaWVs
ZSBDZXJhb2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNvbT4KLS0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyB8IDE5ICsrKysrLS0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZHJ2LmggICAgIHwgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdW5jb3Jl
LmMgfCA4MCArKysrKysrKystLS0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfdW5jb3JlLmggfCAxNCArKy0tLQogNSBmaWxlcyBjaGFuZ2VkLCA0NSBpbnNlcnRp
b25zKCspLCA3MSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2RlYnVnZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCmlu
ZGV4IGYyMTIyNDFhMjc1OC4uN2U2OTgyOTAwOGU2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2RlYnVnZnMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rl
YnVnZnMuYwpAQCAtMTM5MSw3ICsxMzkxLDcgQEAgc3RhdGljIGludCBpOTE1X2ZvcmNld2FrZV9k
b21haW5zKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkKIAl1bnNpZ25lZCBpbnQgdG1w
OwogCiAJc2VxX3ByaW50ZihtLCAidXNlci5ieXBhc3NfY291bnQgPSAldVxuIiwKLQkJICAgdW5j
b3JlLT51c2VyX2ZvcmNld2FrZS5jb3VudCk7CisJCSAgIGF0b21pY19yZWFkKCZpOTE1LT51c2Vy
X2ZvcmNld2FrZV9jb3VudCkpOwogCiAJZm9yX2VhY2hfZndfZG9tYWluKGZ3X2RvbWFpbiwgdW5j
b3JlLCB0bXApCiAJCXNlcV9wcmludGYobSwgIiVzLndha2VfY291bnQgPSAldVxuIiwKQEAgLTQy
MTksNyArNDIxOSwxMSBAQCBzdGF0aWMgaW50IGk5MTVfZm9yY2V3YWtlX29wZW4oc3RydWN0IGlu
b2RlICppbm9kZSwgc3RydWN0IGZpbGUgKmZpbGUpCiAJCXJldHVybiAwOwogCiAJZmlsZS0+cHJp
dmF0ZV9kYXRhID0gKHZvaWQgKikodWludHB0cl90KWludGVsX3J1bnRpbWVfcG1fZ2V0KGk5MTUp
OwotCWludGVsX3VuY29yZV9mb3JjZXdha2VfdXNlcl9nZXQoJmk5MTUtPnVuY29yZSk7CisKKwlp
ZiAoYXRvbWljX2luY19yZXR1cm4oJmk5MTUtPnVzZXJfZm9yY2V3YWtlX2NvdW50KSA9PSAxKSB7
CisJCWludGVsX3VuY29yZV9mb3JjZXdha2VfZ2V0KCZpOTE1LT51bmNvcmUsIEZPUkNFV0FLRV9B
TEwpOworCQlpbnRlbF91bmNvcmVfbW1pb19kZWJ1Z19zdXNwZW5kKCZpOTE1LT5tbWlvX2RlYnVn
KTsKKwl9CiAKIAlyZXR1cm4gMDsKIH0KQEAgLTQyMzEsOSArNDIzNSwxNCBAQCBzdGF0aWMgaW50
IGk5MTVfZm9yY2V3YWtlX3JlbGVhc2Uoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGZpbGUg
KmZpbGUpCiAJaWYgKElOVEVMX0dFTihpOTE1KSA8IDYpCiAJCXJldHVybiAwOwogCi0JaW50ZWxf
dW5jb3JlX2ZvcmNld2FrZV91c2VyX3B1dCgmaTkxNS0+dW5jb3JlKTsKLQlpbnRlbF9ydW50aW1l
X3BtX3B1dChpOTE1LAotCQkJICAgICAoaW50ZWxfd2FrZXJlZl90KSh1aW50cHRyX3QpZmlsZS0+
cHJpdmF0ZV9kYXRhKTsKKwlpZiAoYXRvbWljX2RlY19hbmRfdGVzdCgmaTkxNS0+dXNlcl9mb3Jj
ZXdha2VfY291bnQpKSB7CisJCWlmIChpbnRlbF91bmNvcmVfdW5jbGFpbWVkX21taW8oJmk5MTUt
PnVuY29yZSkpCisJCQlkZXZfaW5mbyhpOTE1LT5kcm0uZGV2LAorCQkJCSAiSW52YWxpZCBtbWlv
IGRldGVjdGVkIGR1cmluZyB1c2VyIGFjY2Vzc1xuIik7CisKKwkJaW50ZWxfdW5jb3JlX21taW9f
ZGVidWdfcmVzdW1lKCZpOTE1LT5tbWlvX2RlYnVnKTsKKwkJaW50ZWxfdW5jb3JlX2ZvcmNld2Fr
ZV9wdXQoJmk5MTUtPnVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7CisJfQogCiAJcmV0dXJuIDA7CiB9
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuYwppbmRleCA4ZmRkNjY4ZWI3YzcuLjAyNGYyNzBmNmYwMCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCkBAIC0yMTg3LDcgKzIxODcsNyBAQCBzdGF0aWMgaW50
IGk5MTVfZHJtX3N1c3BlbmRfbGF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBib29sIGhpYmVy
bmF0aW9uKQogCiBvdXQ6CiAJZW5hYmxlX3JwbV93YWtlcmVmX2Fzc2VydHMoZGV2X3ByaXYpOwot
CWlmICghZGV2X3ByaXYtPnVuY29yZS51c2VyX2ZvcmNld2FrZS5jb3VudCkKKwlpZiAoIWF0b21p
Y19yZWFkKCZkZXZfcHJpdi0+dXNlcl9mb3JjZXdha2VfY291bnQpKQogCQlpbnRlbF9ydW50aW1l
X3BtX2NsZWFudXAoZGV2X3ByaXYpOwogCiAJcmV0dXJuIHJldDsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5oCmluZGV4IDU1MjIxMzJhMmFkMi4uZGM2YjNlNGFmNTc1IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmgKQEAgLTEzOTksNiArMTM5OSw3IEBAIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlIHsKIAog
CXN0cnVjdCBpbnRlbF91bmNvcmUgdW5jb3JlOwogCXN0cnVjdCBpbnRlbF91bmNvcmVfbW1pb19k
ZWJ1ZyBtbWlvX2RlYnVnOworCWF0b21pY190IHVzZXJfZm9yY2V3YWtlX2NvdW50OwogCiAJc3Ry
dWN0IGk5MTVfdmlydHVhbF9ncHUgdmdwdTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaW50ZWxfdW5jb3JlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUu
YwppbmRleCA4ZTQyNDc2ZWE0YTcuLmM0NjA0MjZiMDU2MiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaW50ZWxfdW5jb3JlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfdW5jb3JlLmMKQEAgLTQxLDYgKzQxLDI4IEBAIGludGVsX3VuY29yZV9tbWlvX2RlYnVnX2lu
aXRfZWFybHkoc3RydWN0IGludGVsX3VuY29yZV9tbWlvX2RlYnVnICptbWlvX2RlYnVnKQogCW1t
aW9fZGVidWctPnVuY2xhaW1lZF9tbWlvX2NoZWNrID0gMTsKIH0KIAorLyogU2F2ZSBhbmQgZGlz
YWJsZSBtbWlvIGRlYnVnZ2luZyBmb3IgdGhlIHVzZXIgYnlwYXNzICovCit2b2lkIGludGVsX3Vu
Y29yZV9tbWlvX2RlYnVnX3N1c3BlbmQoc3RydWN0IGludGVsX3VuY29yZV9tbWlvX2RlYnVnICpt
bWlvX2RlYnVnKQoreworCXNwaW5fbG9ja19pcnEoJm1taW9fZGVidWctPmxvY2spOworCWlmICgh
bW1pb19kZWJ1Zy0+c3VzcGVuZGVkKSB7CisJCW1taW9fZGVidWctPnNhdmVkX21taW9fY2hlY2sg
PSBtbWlvX2RlYnVnLT51bmNsYWltZWRfbW1pb19jaGVjazsKKwkJbW1pb19kZWJ1Zy0+dW5jbGFp
bWVkX21taW9fY2hlY2sgPSAwOworCQltbWlvX2RlYnVnLT5zdXNwZW5kZWQgPSB0cnVlOworCX0K
KwlzcGluX3VubG9ja19pcnEoJm1taW9fZGVidWctPmxvY2spOworfQorCit2b2lkIGludGVsX3Vu
Y29yZV9tbWlvX2RlYnVnX3Jlc3VtZShzdHJ1Y3QgaW50ZWxfdW5jb3JlX21taW9fZGVidWcgKm1t
aW9fZGVidWcpCit7CisJc3Bpbl9sb2NrX2lycSgmbW1pb19kZWJ1Zy0+bG9jayk7CisJaWYgKG1t
aW9fZGVidWctPnN1c3BlbmRlZCkgeworCQltbWlvX2RlYnVnLT51bmNsYWltZWRfbW1pb19jaGVj
ayA9IG1taW9fZGVidWctPnNhdmVkX21taW9fY2hlY2s7CisJCW1taW9fZGVidWctPnN1c3BlbmRl
ZCA9IGZhbHNlOworCX0KKwlzcGluX3VubG9ja19pcnEoJm1taW9fZGVidWctPmxvY2spOworfQor
CiBzdGF0aWMgY29uc3QgY2hhciAqIGNvbnN0IGZvcmNld2FrZV9kb21haW5fbmFtZXNbXSA9IHsK
IAkicmVuZGVyIiwKIAkiYmxpdHRlciIsCkBAIC00ODIsNiArNTA0LDkgQEAgY2hlY2tfZm9yX3Vu
Y2xhaW1lZF9tbWlvKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSkKIAogCWxvY2tkZXBfYXNz
ZXJ0X2hlbGQoJnVuY29yZS0+ZGVidWctPmxvY2spOwogCisJaWYgKHVuY29yZS0+ZGVidWctPnN1
c3BlbmRlZCkKKwkJcmV0dXJuIGZhbHNlOworCiAJaWYgKGludGVsX3VuY29yZV9oYXNfZnBnYV9k
YmdfdW5jbGFpbWVkKHVuY29yZSkpCiAJCXJldCB8PSBmcGdhX2NoZWNrX2Zvcl91bmNsYWltZWRf
bW1pbyh1bmNvcmUpOwogCkBAIC01OTMsNjEgKzYxOCw2IEBAIHZvaWQgaW50ZWxfdW5jb3JlX2Zv
cmNld2FrZV9nZXQoc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlLAogCXNwaW5fdW5sb2NrX2ly
cXJlc3RvcmUoJnVuY29yZS0+bG9jaywgaXJxZmxhZ3MpOwogfQogCi0vKioKLSAqIGludGVsX3Vu
Y29yZV9mb3JjZXdha2VfdXNlcl9nZXQgLSBjbGFpbSBmb3JjZXdha2Ugb24gYmVoYWxmIG9mIHVz
ZXJzcGFjZQotICogQHVuY29yZTogdGhlIGludGVsX3VuY29yZSBzdHJ1Y3R1cmUKLSAqCi0gKiBU
aGlzIGZ1bmN0aW9uIGlzIGEgd3JhcHBlciBhcm91bmQgaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9n
ZXQoKSB0byBhY3F1aXJlCi0gKiB0aGUgR1QgcG93ZXJ3ZWxsIGFuZCBpbiB0aGUgcHJvY2VzcyBk
aXNhYmxlIG91ciBkZWJ1Z2dpbmcgZm9yIHRoZQotICogZHVyYXRpb24gb2YgdXNlcnNwYWNlJ3Mg
YnlwYXNzLgotICovCi12b2lkIGludGVsX3VuY29yZV9mb3JjZXdha2VfdXNlcl9nZXQoc3RydWN0
IGludGVsX3VuY29yZSAqdW5jb3JlKQotewotCXNwaW5fbG9ja19pcnEoJnVuY29yZS0+bG9jayk7
Ci0Jc3Bpbl9sb2NrX2lycSgmdW5jb3JlLT5kZWJ1Zy0+bG9jayk7Ci0JaWYgKCF1bmNvcmUtPnVz
ZXJfZm9yY2V3YWtlLmNvdW50KyspIHsKLQkJaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9nZXRfX2xv
Y2tlZCh1bmNvcmUsIEZPUkNFV0FLRV9BTEwpOwotCi0JCS8qIFNhdmUgYW5kIGRpc2FibGUgbW1p
byBkZWJ1Z2dpbmcgZm9yIHRoZSB1c2VyIGJ5cGFzcyAqLwotCQl1bmNvcmUtPnVzZXJfZm9yY2V3
YWtlLnNhdmVkX21taW9fY2hlY2sgPQotCQkJdW5jb3JlLT5kZWJ1Zy0+dW5jbGFpbWVkX21taW9f
Y2hlY2s7Ci0JCXVuY29yZS0+dXNlcl9mb3JjZXdha2Uuc2F2ZWRfbW1pb19kZWJ1ZyA9Ci0JCQlp
OTE1X21vZHBhcmFtcy5tbWlvX2RlYnVnOwotCi0JCXVuY29yZS0+ZGVidWctPnVuY2xhaW1lZF9t
bWlvX2NoZWNrID0gMDsKLQkJaTkxNV9tb2RwYXJhbXMubW1pb19kZWJ1ZyA9IDA7Ci0JfQotCXNw
aW5fdW5sb2NrX2lycSgmdW5jb3JlLT5kZWJ1Zy0+bG9jayk7Ci0Jc3Bpbl91bmxvY2tfaXJxKCZ1
bmNvcmUtPmxvY2spOwotfQotCi0vKioKLSAqIGludGVsX3VuY29yZV9mb3JjZXdha2VfdXNlcl9w
dXQgLSByZWxlYXNlIGZvcmNld2FrZSBvbiBiZWhhbGYgb2YgdXNlcnNwYWNlCi0gKiBAdW5jb3Jl
OiB0aGUgaW50ZWxfdW5jb3JlIHN0cnVjdHVyZQotICoKLSAqIFRoaXMgZnVuY3Rpb24gY29tcGxl
bWVudHMgaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV91c2VyX2dldCgpIGFuZCByZWxlYXNlcwotICog
dGhlIEdUIHBvd2Vyd2VsbCB0YWtlbiBvbiBiZWhhbGYgb2YgdGhlIHVzZXJzcGFjZSBieXBhc3Mu
Ci0gKi8KLXZvaWQgaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV91c2VyX3B1dChzdHJ1Y3QgaW50ZWxf
dW5jb3JlICp1bmNvcmUpCi17Ci0Jc3Bpbl9sb2NrX2lycSgmdW5jb3JlLT5sb2NrKTsKLQlzcGlu
X2xvY2tfaXJxKCZ1bmNvcmUtPmRlYnVnLT5sb2NrKTsKLQlpZiAoIS0tdW5jb3JlLT51c2VyX2Zv
cmNld2FrZS5jb3VudCkgewotCQlpZiAoY2hlY2tfZm9yX3VuY2xhaW1lZF9tbWlvKHVuY29yZSkp
Ci0JCQlkZXZfaW5mbyh1bmNvcmVfdG9faTkxNSh1bmNvcmUpLT5kcm0uZGV2LAotCQkJCSAiSW52
YWxpZCBtbWlvIGRldGVjdGVkIGR1cmluZyB1c2VyIGFjY2Vzc1xuIik7Ci0KLQkJdW5jb3JlLT5k
ZWJ1Zy0+dW5jbGFpbWVkX21taW9fY2hlY2sgPQotCQkJdW5jb3JlLT51c2VyX2ZvcmNld2FrZS5z
YXZlZF9tbWlvX2NoZWNrOwotCQlpOTE1X21vZHBhcmFtcy5tbWlvX2RlYnVnID0KLQkJCXVuY29y
ZS0+dXNlcl9mb3JjZXdha2Uuc2F2ZWRfbW1pb19kZWJ1ZzsKLQotCQlpbnRlbF91bmNvcmVfZm9y
Y2V3YWtlX3B1dF9fbG9ja2VkKHVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7Ci0JfQotCXNwaW5fdW5s
b2NrX2lycSgmdW5jb3JlLT5kZWJ1Zy0+bG9jayk7Ci0Jc3Bpbl91bmxvY2tfaXJxKCZ1bmNvcmUt
PmxvY2spOwotfQotCiAvKioKICAqIGludGVsX3VuY29yZV9mb3JjZXdha2VfZ2V0X19sb2NrZWQg
LSBncmFiIGZvcmNld2FrZSBkb21haW4gcmVmZXJlbmNlcwogICogQHVuY29yZTogdGhlIGludGVs
X3VuY29yZSBzdHJ1Y3R1cmUKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X3VuY29yZS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdW5jb3JlLmgKaW5kZXggNTNj
MWEzMzRlMmFlLi4xZGUxZTg1MDUxMjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2ludGVsX3VuY29yZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5o
CkBAIC0zOSw2ICszOSw4IEBAIHN0cnVjdCBpbnRlbF91bmNvcmU7CiBzdHJ1Y3QgaW50ZWxfdW5j
b3JlX21taW9fZGVidWcgewogCXNwaW5sb2NrX3QgbG9jazsgLyoqIGxvY2sgaXMgYWxzbyB0YWtl
biBpbiBpcnEgY29udGV4dHMuICovCiAJaW50IHVuY2xhaW1lZF9tbWlvX2NoZWNrOworCWludCBz
YXZlZF9tbWlvX2NoZWNrOworCWJvb2wgc3VzcGVuZGVkOwogfTsKIAogZW51bSBmb3JjZXdha2Vf
ZG9tYWluX2lkIHsKQEAgLTE0MCwxMyArMTQyLDYgQEAgc3RydWN0IGludGVsX3VuY29yZSB7CiAJ
CXUzMiBfX2lvbWVtICpyZWdfYWNrOwogCX0gKmZ3X2RvbWFpbltGV19ET01BSU5fSURfQ09VTlRd
OwogCi0Jc3RydWN0IHsKLQkJdW5zaWduZWQgaW50IGNvdW50OwotCi0JCWludCBzYXZlZF9tbWlv
X2NoZWNrOwotCQlpbnQgc2F2ZWRfbW1pb19kZWJ1ZzsKLQl9IHVzZXJfZm9yY2V3YWtlOwotCiAJ
c3RydWN0IGludGVsX3VuY29yZV9tbWlvX2RlYnVnICpkZWJ1ZzsKIH07CiAKQEAgLTE4NCw2ICsx
NzksOCBAQCBpbnRlbF91bmNvcmVfaGFzX2ZpZm8oY29uc3Qgc3RydWN0IGludGVsX3VuY29yZSAq
dW5jb3JlKQogCiB2b2lkCiBpbnRlbF91bmNvcmVfbW1pb19kZWJ1Z19pbml0X2Vhcmx5KHN0cnVj
dCBpbnRlbF91bmNvcmVfbW1pb19kZWJ1ZyAqbW1pb19kZWJ1Zyk7Cit2b2lkIGludGVsX3VuY29y
ZV9tbWlvX2RlYnVnX3N1c3BlbmQoc3RydWN0IGludGVsX3VuY29yZV9tbWlvX2RlYnVnICptbWlv
X2RlYnVnKTsKK3ZvaWQgaW50ZWxfdW5jb3JlX21taW9fZGVidWdfcmVzdW1lKHN0cnVjdCBpbnRl
bF91bmNvcmVfbW1pb19kZWJ1ZyAqbW1pb19kZWJ1Zyk7CiAKIHZvaWQgaW50ZWxfdW5jb3JlX2lu
aXRfZWFybHkoc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlKTsKIGludCBpbnRlbF91bmNvcmVf
aW5pdF9tbWlvKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSk7CkBAIC0yMTksOSArMjE2LDYg
QEAgdm9pZCBpbnRlbF91bmNvcmVfZm9yY2V3YWtlX2dldF9fbG9ja2VkKHN0cnVjdCBpbnRlbF91
bmNvcmUgKnVuY29yZSwKIHZvaWQgaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9wdXRfX2xvY2tlZChz
dHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUsCiAJCQkJCWVudW0gZm9yY2V3YWtlX2RvbWFpbnMg
ZG9tYWlucyk7CiAKLXZvaWQgaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV91c2VyX2dldChzdHJ1Y3Qg
aW50ZWxfdW5jb3JlICp1bmNvcmUpOwotdm9pZCBpbnRlbF91bmNvcmVfZm9yY2V3YWtlX3VzZXJf
cHV0KHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSk7Ci0KIGludCBfX2ludGVsX3dhaXRfZm9y
X3JlZ2lzdGVyKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSwKIAkJCSAgICAgIGk5MTVfcmVn
X3QgcmVnLAogCQkJICAgICAgdTMyIG1hc2ssCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50
ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

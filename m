Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C35CB39EFB5
	for <lists+intel-gfx@lfdr.de>; Tue,  8 Jun 2021 09:36:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 00A8C6EB07;
	Tue,  8 Jun 2021 07:36:39 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9B5A06EB03
 for <intel-gfx@lists.freedesktop.org>; Tue,  8 Jun 2021 07:36:37 +0000 (UTC)
IronPort-SDR: Xl4oX/AxsUu5AjTC65YE3B9N66tLmd1Ee4PaRxg//S3U3yLfZ02Pnm1+bqxugVsNSvYvKlpcFT
 Y74DZb18Uoag==
X-IronPort-AV: E=McAfee;i="6200,9189,10008"; a="268644525"
X-IronPort-AV: E=Sophos;i="5.83,257,1616482800"; d="scan'208";a="268644525"
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by orsmga105.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 08 Jun 2021 00:36:37 -0700
IronPort-SDR: VX3221VnBPY/NFd5Jp2t65tjfRbpVvkqzqfv2dejui/jeoQbGC56ioRkhuyMYO7wE7yv42FPPU
 YrwUd5+IhszA==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.83,257,1616482800"; d="scan'208";a="440363657"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.171])
 by orsmga007.jf.intel.com with SMTP; 08 Jun 2021 00:36:34 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Tue, 08 Jun 2021 10:36:34 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  8 Jun 2021 10:35:55 +0300
Message-Id: <20210608073603.2408-10-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.31.1
In-Reply-To: <20210608073603.2408-1-ville.syrjala@linux.intel.com>
References: <20210608073603.2408-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 09/17] drm/i915: Introduce
 encoder->get_buf_trans()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkNv
bnZlcnQgdGhlIGdldF9idWZfdHJhbnMoKSBmdW5jdGlvbnMgaW50byBhbiBlbmNvZGVyIHZmdW5j
LgpBbGxvd3MgdXMgdG8gZ2V0IHJpZCBvZiBidW5jaCBvZiBwbGF0Zm9ybSBpZi1sYWRkZXJzLgoK
djI6IEhhbmRsZSBhZGwtcAoKUmV2aWV3ZWQtYnk6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBp
bnRlbC5jb20+ICN2MQpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmph
bGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfY3J0LmMgICAgICB8ICAzICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGRpLmMgICAgICB8IDYxICsrKy0tLS0tLS0tLS0tLQogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGRpX2J1Zl90cmFucy5jICAgIHwgNzUgKysrKysrKysrKystLS0tLS0tLQogLi4uL2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5oICAgIHwgNDQgKy0tLS0tLS0tLS0KIC4u
Li9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCAgICB8ICA0ICsKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZmRpLmMgICAgICB8ICAzICstCiA2IGZpbGVz
IGNoYW5nZWQsIDY1IGluc2VydGlvbnMoKyksIDEyNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NydC5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jcnQuYwppbmRleCA2NDhmMWMwZDNkMzkuLjQwOGY4MmIw
ZGM3ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jcnQu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NydC5jCkBAIC0zOCw2
ICszOCw3IEBACiAjaW5jbHVkZSAiaW50ZWxfY3J0LmgiCiAjaW5jbHVkZSAiaW50ZWxfY3J0Yy5o
IgogI2luY2x1ZGUgImludGVsX2RkaS5oIgorI2luY2x1ZGUgImludGVsX2RkaV9idWZfdHJhbnMu
aCIKICNpbmNsdWRlICJpbnRlbF9kZS5oIgogI2luY2x1ZGUgImludGVsX2Rpc3BsYXlfdHlwZXMu
aCIKICNpbmNsdWRlICJpbnRlbF9mZGkuaCIKQEAgLTEwODEsNiArMTA4Miw4IEBAIHZvaWQgaW50
ZWxfY3J0X2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQljcnQtPmJh
c2UuZW5hYmxlX2Nsb2NrID0gaHN3X2RkaV9lbmFibGVfY2xvY2s7CiAJCWNydC0+YmFzZS5kaXNh
YmxlX2Nsb2NrID0gaHN3X2RkaV9kaXNhYmxlX2Nsb2NrOwogCQljcnQtPmJhc2UuaXNfY2xvY2tf
ZW5hYmxlZCA9IGhzd19kZGlfaXNfY2xvY2tfZW5hYmxlZDsKKworCQlpbnRlbF9kZGlfYnVmX3Ry
YW5zX2luaXQoJmNydC0+YmFzZSk7CiAJfSBlbHNlIHsKIAkJaWYgKEhBU19QQ0hfU1BMSVQoZGV2
X3ByaXYpKSB7CiAJCQljcnQtPmJhc2UuY29tcHV0ZV9jb25maWcgPSBwY2hfY3J0X2NvbXB1dGVf
Y29uZmlnOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
ZGkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKaW5kZXggMzc0
NDVjZWMwYzIzLi5kOGI0ZGI2MDJkMzAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGRpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kZGkuYwpAQCAtMTA0LDggKzEwNCw3IEBAIHZvaWQgaHN3X3ByZXBhcmVfZHBfZGRpX2J1
ZmZlcnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJZW51bSBwb3J0IHBvcnQgPSBl
bmNvZGVyLT5wb3J0OwogCWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICpkZGlfdHJh
bnNsYXRpb25zOwogCi0JZGRpX3RyYW5zbGF0aW9ucyA9IGhzd19nZXRfYnVmX3RyYW5zKGVuY29k
ZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwotCisJZGRpX3RyYW5zbGF0aW9ucyA9IGVuY29k
ZXItPmdldF9idWZfdHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7CiAJaWYg
KGRybV9XQVJOX09OX09OQ0UoJmRldl9wcml2LT5kcm0sICFkZGlfdHJhbnNsYXRpb25zKSkKIAkJ
cmV0dXJuOwogCkBAIC0xMzcsOCArMTM2LDcgQEAgc3RhdGljIHZvaWQgaHN3X3ByZXBhcmVfaGRt
aV9kZGlfYnVmZmVycyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAllbnVtIHBvcnQg
cG9ydCA9IGVuY29kZXItPnBvcnQ7CiAJY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMg
KmRkaV90cmFuc2xhdGlvbnM7CiAKLQlkZGlfdHJhbnNsYXRpb25zID0gaHN3X2dldF9idWZfdHJh
bnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgICZuX2VudHJpZXMpOwotCisJZGRpX3RyYW5zbGF0aW9u
cyA9IGVuY29kZXItPmdldF9idWZfdHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmll
cyk7CiAJaWYgKGRybV9XQVJOX09OX09OQ0UoJmRldl9wcml2LT5kcm0sICFkZGlfdHJhbnNsYXRp
b25zKSkKIAkJcmV0dXJuOwogCWlmIChkcm1fV0FSTl9PTl9PTkNFKCZkZXZfcHJpdi0+ZHJtLCBs
ZXZlbCA+PSBuX2VudHJpZXMpKQpAQCAtOTQ3LDggKzk0NSw3IEBAIHN0YXRpYyB2b2lkIHNrbF9k
ZGlfc2V0X2lib29zdChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJY29uc3Qgc3Ry
dWN0IGludGVsX2RkaV9idWZfdHJhbnMgKmRkaV90cmFuc2xhdGlvbnM7CiAJCWludCBuX2VudHJp
ZXM7CiAKLQkJZGRpX3RyYW5zbGF0aW9ucyA9IGhzd19nZXRfYnVmX3RyYW5zKGVuY29kZXIsIGNy
dGNfc3RhdGUsICZuX2VudHJpZXMpOwotCisJCWRkaV90cmFuc2xhdGlvbnMgPSBlbmNvZGVyLT5n
ZXRfYnVmX3RyYW5zKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwogCQlpZiAoZHJt
X1dBUk5fT05fT05DRSgmZGV2X3ByaXYtPmRybSwgIWRkaV90cmFuc2xhdGlvbnMpKQogCQkJcmV0
dXJuOwogCQlpZiAoZHJtX1dBUk5fT05fT05DRSgmZGV2X3ByaXYtPmRybSwgbGV2ZWwgPj0gbl9l
bnRyaWVzKSkKQEAgLTk3OCw3ICs5NzUsNyBAQCBzdGF0aWMgdm9pZCBieHRfZGRpX3Zzd2luZ19z
ZXF1ZW5jZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAllbnVtIHBvcnQgcG9ydCA9
IGVuY29kZXItPnBvcnQ7CiAJaW50IG5fZW50cmllczsKIAotCWRkaV90cmFuc2xhdGlvbnMgPSBi
eHRfZ2V0X2J1Zl90cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKKwlkZGlf
dHJhbnNsYXRpb25zID0gZW5jb2Rlci0+Z2V0X2J1Zl90cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRl
LCAmbl9lbnRyaWVzKTsKIAlpZiAoZHJtX1dBUk5fT05fT05DRSgmZGV2X3ByaXYtPmRybSwgIWRk
aV90cmFuc2xhdGlvbnMpKQogCQlyZXR1cm47CiAJaWYgKGRybV9XQVJOX09OX09OQ0UoJmRldl9w
cml2LT5kcm0sIGxldmVsID49IG5fZW50cmllcykpCkBAIC05OTYsMzMgKzk5Myw5IEBAIHN0YXRp
YyB1OCBpbnRlbF9kZGlfZHBfdm9sdGFnZV9tYXgoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwK
IHsKIAlzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciA9ICZkcF90b19kaWdfcG9ydChpbnRl
bF9kcCktPmJhc2U7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkx
NShlbmNvZGVyLT5iYXNlLmRldik7Ci0JZW51bSBwb3J0IHBvcnQgPSBlbmNvZGVyLT5wb3J0Owot
CWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBwb3J0KTsKIAlpbnQg
bl9lbnRyaWVzOwogCi0JaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMikgewotCQlpZiAo
aW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKQotCQkJdGdsX2dldF9jb21ib19idWZf
dHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7Ci0JCWVsc2UgaWYgKElTX0FM
REVSTEFLRV9QKGRldl9wcml2KSkKLQkJCWFkbHBfZ2V0X2RrbF9idWZfdHJhbnMoZW5jb2Rlciwg
Y3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7Ci0JCWVsc2UKLQkJCXRnbF9nZXRfZGtsX2J1Zl90cmFu
cyhlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKLQl9IGVsc2UgaWYgKERJU1BMQVlf
VkVSKGRldl9wcml2KSA9PSAxMSkgewotCQlpZiAoSVNfUExBVEZPUk0oZGV2X3ByaXYsIElOVEVM
X0pBU1BFUkxBS0UpKQotCQkJanNsX2dldF9jb21ib19idWZfdHJhbnMoZW5jb2RlciwgY3J0Y19z
dGF0ZSwgJm5fZW50cmllcyk7Ci0JCWVsc2UgaWYgKElTX1BMQVRGT1JNKGRldl9wcml2LCBJTlRF
TF9FTEtIQVJUTEFLRSkpCi0JCQllaGxfZ2V0X2NvbWJvX2J1Zl90cmFucyhlbmNvZGVyLCBjcnRj
X3N0YXRlLCAmbl9lbnRyaWVzKTsKLQkJZWxzZSBpZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9w
cml2LCBwaHkpKQotCQkJaWNsX2dldF9jb21ib19idWZfdHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0
ZSwgJm5fZW50cmllcyk7Ci0JCWVsc2UKLQkJCWljbF9nZXRfbWdfYnVmX3RyYW5zKGVuY29kZXIs
IGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwotCX0gZWxzZSBpZiAoSVNfQ0FOTk9OTEFLRShkZXZf
cHJpdikpIHsKLQkJY25sX2dldF9idWZfdHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50
cmllcyk7Ci0JfSBlbHNlIGlmIChJU19HRU1JTklMQUtFKGRldl9wcml2KSB8fCBJU19CUk9YVE9O
KGRldl9wcml2KSkgewotCQlieHRfZ2V0X2J1Zl90cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRlLCAm
bl9lbnRyaWVzKTsKLQl9IGVsc2UgewotCQloc3dfZ2V0X2J1Zl90cmFucyhlbmNvZGVyLCBjcnRj
X3N0YXRlLCAmbl9lbnRyaWVzKTsKLQl9CisJZW5jb2Rlci0+Z2V0X2J1Zl90cmFucyhlbmNvZGVy
LCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKIAogCWlmIChkcm1fV0FSTl9PTigmZGV2X3ByaXYt
PmRybSwgbl9lbnRyaWVzIDwgMSkpCiAJCW5fZW50cmllcyA9IDE7CkBAIC0xMDU0LDggKzEwMjcs
NyBAQCBzdGF0aWMgdm9pZCBjbmxfZGRpX3Zzd2luZ19wcm9ncmFtKHN0cnVjdCBpbnRlbF9lbmNv
ZGVyICplbmNvZGVyLAogCWludCBuX2VudHJpZXMsIGxuOwogCXUzMiB2YWw7CiAKLQlkZGlfdHJh
bnNsYXRpb25zID0gY25sX2dldF9idWZfdHJhbnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50
cmllcyk7Ci0KKwlkZGlfdHJhbnNsYXRpb25zID0gZW5jb2Rlci0+Z2V0X2J1Zl90cmFucyhlbmNv
ZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKIAlpZiAoZHJtX1dBUk5fT05fT05DRSgmZGV2
X3ByaXYtPmRybSwgIWRkaV90cmFuc2xhdGlvbnMpKQogCQlyZXR1cm47CiAJaWYgKGRybV9XQVJO
X09OX09OQ0UoJmRldl9wcml2LT5kcm0sIGxldmVsID49IG5fZW50cmllcykpCkBAIC0xMTc1LDE1
ICsxMTQ3LDcgQEAgc3RhdGljIHZvaWQgaWNsX2RkaV9jb21ib192c3dpbmdfcHJvZ3JhbShzdHJ1
Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAlpbnQgbl9lbnRyaWVzLCBsbjsKIAl1MzIgdmFs
OwogCi0JaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMikKLQkJZGRpX3RyYW5zbGF0aW9u
cyA9IHRnbF9nZXRfY29tYm9fYnVmX3RyYW5zKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJp
ZXMpOwotCWVsc2UgaWYgKElTX1BMQVRGT1JNKGRldl9wcml2LCBJTlRFTF9KQVNQRVJMQUtFKSkK
LQkJZGRpX3RyYW5zbGF0aW9ucyA9IGpzbF9nZXRfY29tYm9fYnVmX3RyYW5zKGVuY29kZXIsIGNy
dGNfc3RhdGUsICZuX2VudHJpZXMpOwotCWVsc2UgaWYgKElTX1BMQVRGT1JNKGRldl9wcml2LCBJ
TlRFTF9FTEtIQVJUTEFLRSkpCi0JCWRkaV90cmFuc2xhdGlvbnMgPSBlaGxfZ2V0X2NvbWJvX2J1
Zl90cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKLQllbHNlCi0JCWRkaV90
cmFuc2xhdGlvbnMgPSBpY2xfZ2V0X2NvbWJvX2J1Zl90cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRl
LCAmbl9lbnRyaWVzKTsKLQorCWRkaV90cmFuc2xhdGlvbnMgPSBlbmNvZGVyLT5nZXRfYnVmX3Ry
YW5zKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwogCWlmIChkcm1fV0FSTl9PTl9P
TkNFKCZkZXZfcHJpdi0+ZHJtLCAhZGRpX3RyYW5zbGF0aW9ucykpCiAJCXJldHVybjsKIAlpZiAo
ZHJtX1dBUk5fT05fT05DRSgmZGV2X3ByaXYtPmRybSwgbGV2ZWwgPj0gbl9lbnRyaWVzKSkKQEAg
LTEzMTAsOCArMTI3NCw3IEBAIHN0YXRpYyB2b2lkIGljbF9tZ19waHlfZGRpX3Zzd2luZ19zZXF1
ZW5jZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAlpZiAoZW5jX3RvX2RpZ19wb3J0
KGVuY29kZXIpLT50Y19tb2RlID09IFRDX1BPUlRfVEJUX0FMVCkKIAkJcmV0dXJuOwogCi0JZGRp
X3RyYW5zbGF0aW9ucyA9IGljbF9nZXRfbWdfYnVmX3RyYW5zKGVuY29kZXIsIGNydGNfc3RhdGUs
ICZuX2VudHJpZXMpOwotCisJZGRpX3RyYW5zbGF0aW9ucyA9IGVuY29kZXItPmdldF9idWZfdHJh
bnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7CiAJaWYgKGRybV9XQVJOX09OX09O
Q0UoJmRldl9wcml2LT5kcm0sICFkZGlfdHJhbnNsYXRpb25zKSkKIAkJcmV0dXJuOwogCWlmIChk
cm1fV0FSTl9PTl9PTkNFKCZkZXZfcHJpdi0+ZHJtLCBsZXZlbCA+PSBuX2VudHJpZXMpKQpAQCAt
MTQ0OCwxMSArMTQxMSw3IEBAIHRnbF9ka2xfcGh5X2RkaV92c3dpbmdfc2VxdWVuY2Uoc3RydWN0
IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJaWYgKGVuY190b19kaWdfcG9ydChlbmNvZGVyKS0+
dGNfbW9kZSA9PSBUQ19QT1JUX1RCVF9BTFQpCiAJCXJldHVybjsKIAotCWlmIChJU19BTERFUkxB
S0VfUChkZXZfcHJpdikpCi0JCWRkaV90cmFuc2xhdGlvbnMgPSBhZGxwX2dldF9ka2xfYnVmX3Ry
YW5zKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwotCWVsc2UKLQkJZGRpX3RyYW5z
bGF0aW9ucyA9IHRnbF9nZXRfZGtsX2J1Zl90cmFucyhlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9l
bnRyaWVzKTsKLQorCWRkaV90cmFuc2xhdGlvbnMgPSBlbmNvZGVyLT5nZXRfYnVmX3RyYW5zKGVu
Y29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwogCWlmIChkcm1fV0FSTl9PTl9PTkNFKCZk
ZXZfcHJpdi0+ZHJtLCAhZGRpX3RyYW5zbGF0aW9ucykpCiAJCXJldHVybjsKIAlpZiAoZHJtX1dB
Uk5fT05fT05DRSgmZGV2X3ByaXYtPmRybSwgbGV2ZWwgPj0gbl9lbnRyaWVzKSkKQEAgLTQ2NjIs
NiArNDYyMSw4IEBAIHZvaWQgaW50ZWxfZGRpX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2LCBlbnVtIHBvcnQgcG9ydCkKIAkJZW5jb2Rlci0+Z2V0X2NvbmZpZyA9IGhzd19k
ZGlfZ2V0X2NvbmZpZzsKIAl9CiAKKwlpbnRlbF9kZGlfYnVmX3RyYW5zX2luaXQoZW5jb2Rlcik7
CisKIAlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEzKQogCQllbmNvZGVyLT5ocGRfcGlu
ID0geGVscGRfaHBkX3BpbihkZXZfcHJpdiwgcG9ydCk7CiAJZWxzZSBpZiAoSVNfREcxKGRldl9w
cml2KSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRp
X2J1Zl90cmFucy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGlfYnVm
X3RyYW5zLmMKaW5kZXggZmQyMjE2ZGM4YzMzLi5mODkxNWE4Yzc4ZDggMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5jCkBAIC0xMjQ2
LDcgKzEyNDYsNyBAQCBoc3dfZ2V0X2J1Zl90cmFuc19oZG1pKHN0cnVjdCBpbnRlbF9lbmNvZGVy
ICplbmNvZGVyLAogCXJldHVybiBOVUxMOwogfQogCi1jb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1
Zl90cmFucyAqCitzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgogaHN3
X2dldF9idWZfdHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCSAgY29uc3Qg
c3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJCSAgaW50ICpuX2VudHJpZXMp
CkBAIC0xMjg2LDcgKzEyODYsNyBAQCBieHRfZ2V0X2J1Zl90cmFuc19oZG1pKHN0cnVjdCBpbnRl
bF9lbmNvZGVyICplbmNvZGVyLCBpbnQgKm5fZW50cmllcykKIAlyZXR1cm4gaW50ZWxfZ2V0X2J1
Zl90cmFucygmYnh0X2RkaV90cmFuc2xhdGlvbnNfaGRtaSwgbl9lbnRyaWVzKTsKIH0KIAotY29u
c3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgorc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRl
bF9kZGlfYnVmX3RyYW5zICoKIGJ4dF9nZXRfYnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVy
ICplbmNvZGVyLAogCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
LAogCQkgIGludCAqbl9lbnRyaWVzKQpAQCAtMTM2OCw3ICsxMzY4LDcgQEAgY25sX2dldF9idWZf
dHJhbnNfZWRwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLCBpbnQgKm5fZW50cmllcykK
IAl9CiB9CiAKLWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKK3N0YXRpYyBjb25z
dCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCiBjbmxfZ2V0X2J1Zl90cmFucyhzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqY3J0Y19zdGF0ZSwKIAkJICBpbnQgKm5fZW50cmllcykKQEAgLTE0MjIsNyArMTQyMiw3IEBA
IGljbF9nZXRfY29tYm9fYnVmX3RyYW5zX2VkcChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2Rl
ciwKIAlyZXR1cm4gaWNsX2dldF9jb21ib19idWZfdHJhbnNfZHAoZW5jb2RlciwgY3J0Y19zdGF0
ZSwgbl9lbnRyaWVzKTsKIH0KIAotY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgor
c3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKIGljbF9nZXRfY29tYm9f
YnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkJY29uc3Qgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJCQlpbnQgKm5fZW50cmllcykKQEAgLTE0
NTgsNyArMTQ1OCw3IEBAIGljbF9nZXRfbWdfYnVmX3RyYW5zX2RwKHN0cnVjdCBpbnRlbF9lbmNv
ZGVyICplbmNvZGVyLAogCX0KIH0KIAotY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMg
Kgorc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKIGljbF9nZXRfbWdf
YnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkgICAgIGNvbnN0IHN0
cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCQkgICAgIGludCAqbl9lbnRyaWVz
KQpAQCAtMTUwMiw3ICsxNTAyLDcgQEAgZWhsX2dldF9jb21ib19idWZfdHJhbnNfZWRwKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCXJldHVybiBlaGxfZ2V0X2NvbWJvX2J1Zl90cmFu
c19kcChlbmNvZGVyLCBjcnRjX3N0YXRlLCBuX2VudHJpZXMpOwogfQogCi1jb25zdCBzdHJ1Y3Qg
aW50ZWxfZGRpX2J1Zl90cmFucyAqCitzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZf
dHJhbnMgKgogZWhsX2dldF9jb21ib19idWZfdHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIsCiAJCQljb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJ
CWludCAqbl9lbnRyaWVzKQpAQCAtMTU1Myw3ICsxNTUzLDcgQEAganNsX2dldF9jb21ib19idWZf
dHJhbnNfZWRwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCXJldHVybiBqc2xfZ2V0
X2NvbWJvX2J1Zl90cmFuc19kcChlbmNvZGVyLCBjcnRjX3N0YXRlLCBuX2VudHJpZXMpOwogfQog
Ci1jb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCitzdGF0aWMgY29uc3Qgc3RydWN0
IGludGVsX2RkaV9idWZfdHJhbnMgKgoganNsX2dldF9jb21ib19idWZfdHJhbnMoc3RydWN0IGlu
dGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQljb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
Y3J0Y19zdGF0ZSwKIAkJCWludCAqbl9lbnRyaWVzKQpAQCAtMTYyNiw3ICsxNjI2LDcgQEAgdGds
X2dldF9jb21ib19idWZfdHJhbnNfZWRwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAog
CXJldHVybiB0Z2xfZ2V0X2NvbWJvX2J1Zl90cmFuc19kcChlbmNvZGVyLCBjcnRjX3N0YXRlLCBu
X2VudHJpZXMpOwogfQogCi1jb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCitzdGF0
aWMgY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgogdGdsX2dldF9jb21ib19idWZf
dHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQljb25zdCBzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJCWludCAqbl9lbnRyaWVzKQpAQCAtMTY2Miw3
ICsxNjYyLDcgQEAgdGdsX2dldF9ka2xfYnVmX3RyYW5zX2RwKHN0cnVjdCBpbnRlbF9lbmNvZGVy
ICplbmNvZGVyLAogCX0KIH0KIAotY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgor
c3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKIHRnbF9nZXRfZGtsX2J1
Zl90cmFucyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJICAgICAgY29uc3Qgc3Ry
dWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJCSAgICAgIGludCAqbl9lbnRyaWVz
KQpAQCAtMTY4Nyw3ICsxNjg3LDcgQEAgYWRscF9nZXRfZGtsX2J1Zl90cmFuc19kcChzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAl9CiB9CiAKLWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlf
YnVmX3RyYW5zICoKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCiBh
ZGxwX2dldF9ka2xfYnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkg
ICAgICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJCSAgICAg
ICBpbnQgKm5fZW50cmllcykKQEAgLTE3MDMsMjggKzE3MDMsMTAgQEAgaW50IGludGVsX2RkaV9o
ZG1pX251bV9lbnRyaWVzKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkJICAgICAg
IGludCAqZGVmYXVsdF9lbnRyeSkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsKLQllbnVtIHBoeSBwaHkgPSBpbnRlbF9w
b3J0X3RvX3BoeShkZXZfcHJpdiwgZW5jb2Rlci0+cG9ydCk7Ci0JY29uc3Qgc3RydWN0IGludGVs
X2RkaV9idWZfdHJhbnMgKmRkaV90cmFuc2xhdGlvbnMgPSBOVUxMOworCWNvbnN0IHN0cnVjdCBp
bnRlbF9kZGlfYnVmX3RyYW5zICpkZGlfdHJhbnNsYXRpb25zOwogCWludCBuX2VudHJpZXM7CiAK
LQlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEyKSB7Ci0JCWlmIChpbnRlbF9waHlfaXNf
Y29tYm8oZGV2X3ByaXYsIHBoeSkpCi0JCQlkZGlfdHJhbnNsYXRpb25zID0gdGdsX2dldF9jb21i
b19idWZfdHJhbnNfaGRtaShlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKLQkJZWxz
ZQotCQkJZGRpX3RyYW5zbGF0aW9ucyA9IHRnbF9nZXRfZGtsX2J1Zl90cmFuc19oZG1pKGVuY29k
ZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwotCX0gZWxzZSBpZiAoRElTUExBWV9WRVIoZGV2
X3ByaXYpID09IDExKSB7Ci0JCWlmIChpbnRlbF9waHlfaXNfY29tYm8oZGV2X3ByaXYsIHBoeSkp
Ci0JCQlkZGlfdHJhbnNsYXRpb25zID0gaWNsX2dldF9jb21ib19idWZfdHJhbnNfaGRtaShlbmNv
ZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKLQkJZWxzZQotCQkJZGRpX3RyYW5zbGF0aW9u
cyA9IGljbF9nZXRfbWdfYnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50
cmllcyk7Ci0JfSBlbHNlIGlmIChJU19DQU5OT05MQUtFKGRldl9wcml2KSkgewotCQlkZGlfdHJh
bnNsYXRpb25zID0gY25sX2dldF9idWZfdHJhbnNfaGRtaShlbmNvZGVyLCAmbl9lbnRyaWVzKTsK
LQl9IGVsc2UgaWYgKElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpIHx8IElTX0JST1hUT04oZGV2X3By
aXYpKSB7Ci0JCWRkaV90cmFuc2xhdGlvbnMgPSBieHRfZ2V0X2J1Zl90cmFuc19oZG1pKGVuY29k
ZXIsICZuX2VudHJpZXMpOwotCX0gZWxzZSBpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID09IDkg
fHwKLQkJICAgSVNfQlJPQURXRUxMKGRldl9wcml2KSB8fCBJU19IQVNXRUxMKGRldl9wcml2KSkg
ewotCQlkZGlfdHJhbnNsYXRpb25zID0gaHN3X2dldF9idWZfdHJhbnNfaGRtaShlbmNvZGVyLCAm
bl9lbnRyaWVzKTsKLQl9CisJZGRpX3RyYW5zbGF0aW9ucyA9IGVuY29kZXItPmdldF9idWZfdHJh
bnMoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7CiAKIAlpZiAoZHJtX1dBUk5fT04o
JmRldl9wcml2LT5kcm0sICFkZGlfdHJhbnNsYXRpb25zKSkgewogCQkqZGVmYXVsdF9lbnRyeSA9
IDA7CkBAIC0xNzM1LDMgKzE3MTcsMzYgQEAgaW50IGludGVsX2RkaV9oZG1pX251bV9lbnRyaWVz
KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCiAJcmV0dXJuIG5fZW50cmllczsKIH0K
Kwordm9pZCBpbnRlbF9kZGlfYnVmX3RyYW5zX2luaXQoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIpCit7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KGVuY29k
ZXItPmJhc2UuZGV2KTsKKwllbnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShpOTE1LCBl
bmNvZGVyLT5wb3J0KTsKKworCWlmIChJU19BTERFUkxBS0VfUChpOTE1KSkgeworCQlpZiAoaW50
ZWxfcGh5X2lzX2NvbWJvKGk5MTUsIHBoeSkpCisJCQllbmNvZGVyLT5nZXRfYnVmX3RyYW5zID0g
dGdsX2dldF9jb21ib19idWZfdHJhbnM7CisJCWVsc2UKKwkJCWVuY29kZXItPmdldF9idWZfdHJh
bnMgPSBhZGxwX2dldF9ka2xfYnVmX3RyYW5zOworCX0gZWxzZSBpZiAoRElTUExBWV9WRVIoaTkx
NSkgPj0gMTIpIHsKKwkJaWYgKGludGVsX3BoeV9pc19jb21ibyhpOTE1LCBwaHkpKQorCQkJZW5j
b2Rlci0+Z2V0X2J1Zl90cmFucyA9IHRnbF9nZXRfY29tYm9fYnVmX3RyYW5zOworCQllbHNlCisJ
CQllbmNvZGVyLT5nZXRfYnVmX3RyYW5zID0gdGdsX2dldF9ka2xfYnVmX3RyYW5zOworCX0gZWxz
ZSBpZiAoRElTUExBWV9WRVIoaTkxNSkgPT0gMTEpIHsKKwkJaWYgKElTX1BMQVRGT1JNKGk5MTUs
IElOVEVMX0pBU1BFUkxBS0UpKQorCQkJZW5jb2Rlci0+Z2V0X2J1Zl90cmFucyA9IGpzbF9nZXRf
Y29tYm9fYnVmX3RyYW5zOworCQllbHNlIGlmIChJU19QTEFURk9STShpOTE1LCBJTlRFTF9FTEtI
QVJUTEFLRSkpCisJCQllbmNvZGVyLT5nZXRfYnVmX3RyYW5zID0gZWhsX2dldF9jb21ib19idWZf
dHJhbnM7CisJCWVsc2UgaWYgKGludGVsX3BoeV9pc19jb21ibyhpOTE1LCBwaHkpKQorCQkJZW5j
b2Rlci0+Z2V0X2J1Zl90cmFucyA9IGljbF9nZXRfY29tYm9fYnVmX3RyYW5zOworCQllbHNlCisJ
CQllbmNvZGVyLT5nZXRfYnVmX3RyYW5zID0gaWNsX2dldF9tZ19idWZfdHJhbnM7CisJfSBlbHNl
IGlmIChJU19DQU5OT05MQUtFKGk5MTUpKSB7CisJCWVuY29kZXItPmdldF9idWZfdHJhbnMgPSBj
bmxfZ2V0X2J1Zl90cmFuczsKKwl9IGVsc2UgaWYgKElTX0dFTUlOSUxBS0UoaTkxNSkgfHwgSVNf
QlJPWFRPTihpOTE1KSkgeworCQllbmNvZGVyLT5nZXRfYnVmX3RyYW5zID0gYnh0X2dldF9idWZf
dHJhbnM7CisJfSBlbHNlIHsKKwkJZW5jb2Rlci0+Z2V0X2J1Zl90cmFucyA9IGhzd19nZXRfYnVm
X3RyYW5zOworCX0KK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGRpX2J1Zl90cmFucy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kZGlfYnVmX3RyYW5zLmgKaW5kZXggODc5ZjFkZWVjM2M4Li4wNTIyNmViNDZjZDYgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5o
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5o
CkBAIC02NSw0OCArNjUsNiBAQCBpbnQgaW50ZWxfZGRpX2hkbWlfbnVtX2VudHJpZXMoc3RydWN0
IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQkgICAgICAgY29uc3Qgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJCQkgICAgICAgaW50ICpkZWZhdWx0X2VudHJ5KTsKIAot
Y29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgotaHN3X2dldF9idWZfdHJhbnMoc3Ry
dWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCi0JCSAgY29uc3Qgc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKmNydGNfc3RhdGUsCi0JCSAgaW50ICpuX2VudHJpZXMpOwotCi1jb25zdCBzdHJ1Y3Qg
aW50ZWxfZGRpX2J1Zl90cmFucyAqCi1ieHRfZ2V0X2J1Zl90cmFucyhzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqZW5jb2RlciwKLQkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19z
dGF0ZSwKLQkJICBpbnQgKm5fZW50cmllcyk7Ci0KLWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVm
X3RyYW5zICoKLWFkbHBfZ2V0X2RrbF9idWZfdHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIsCi0JCSAgICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0
ZSwKLQkJICAgICAgIGludCAqbl9lbnRyaWVzKTsKLWNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVm
X3RyYW5zICoKLXRnbF9nZXRfY29tYm9fYnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyLAotCQkJY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCi0J
CQlpbnQgKm5fZW50cmllcyk7Ci1jb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCi10
Z2xfZ2V0X2RrbF9idWZfdHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCi0JCSAg
ICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAotCQkgICAgICBp
bnQgKm5fZW50cmllcyk7Ci1jb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCi1qc2xf
Z2V0X2NvbWJvX2J1Zl90cmFucyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKLQkJCWNv
bnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAotCQkJaW50ICpuX2VudHJp
ZXMpOwotY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgotZWhsX2dldF9jb21ib19i
dWZfdHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCi0JCQljb25zdCBzdHJ1Y3Qg
aW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKLQkJCWludCAqbl9lbnRyaWVzKTsKLWNvbnN0
IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKLWljbF9nZXRfY29tYm9fYnVmX3RyYW5zKHN0
cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAotCQkJY29uc3Qgc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKmNydGNfc3RhdGUsCi0JCQlpbnQgKm5fZW50cmllcyk7Ci1jb25zdCBzdHJ1Y3QgaW50
ZWxfZGRpX2J1Zl90cmFucyAqCi1pY2xfZ2V0X21nX2J1Zl90cmFucyhzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqZW5jb2RlciwKLQkJICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0
Y19zdGF0ZSwKLQkJICAgICBpbnQgKm5fZW50cmllcyk7Ci0KLWNvbnN0IHN0cnVjdCBpbnRlbF9k
ZGlfYnVmX3RyYW5zICoKLWNubF9nZXRfYnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyLAotCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAot
CQkgIGludCAqbl9lbnRyaWVzKTsKK3ZvaWQgaW50ZWxfZGRpX2J1Zl90cmFuc19pbml0KHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKTsKIAogI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCmluZGV4IGI4ZDFmNzAyZDgw
OC4uZDRhMDk5NGY4NjE5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXlfdHlwZXMuaApAQCAtNDgsNiArNDgsNyBAQAogCiBzdHJ1Y3QgZHJtX3By
aW50ZXI7CiBzdHJ1Y3QgX19pbnRlbF9nbG9iYWxfb2Jqc19zdGF0ZTsKK3N0cnVjdCBpbnRlbF9k
ZGlfYnVmX3RyYW5zOwogCiAvKgogICogRGlzcGxheSByZWxhdGVkIHN0dWZmCkBAIC0yNjMsNiAr
MjY0LDkgQEAgc3RydWN0IGludGVsX2VuY29kZXIgewogCSAqIFJldHVybnMgd2hldGhlciB0aGUg
cG9ydCBjbG9jayBpcyBlbmFibGVkIG9yIG5vdC4KIAkgKi8KIAlib29sICgqaXNfY2xvY2tfZW5h
YmxlZCkoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIpOworCWNvbnN0IHN0cnVjdCBpbnRl
bF9kZGlfYnVmX3RyYW5zICooKmdldF9idWZfdHJhbnMpKHN0cnVjdCBpbnRlbF9lbmNvZGVyICpl
bmNvZGVyLAorCQkJCQkJCSAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0
YXRlLAorCQkJCQkJCSAgIGludCAqbl9lbnRyaWVzKTsKIAllbnVtIGhwZF9waW4gaHBkX3BpbjsK
IAllbnVtIGludGVsX2Rpc3BsYXlfcG93ZXJfZG9tYWluIHBvd2VyX2RvbWFpbjsKIAkvKiBmb3Ig
Y29tbXVuaWNhdGlvbiB3aXRoIGF1ZGlvIGNvbXBvbmVudDsgcHJvdGVjdGVkIGJ5IGF2X211dGV4
ICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZkaS5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mZGkuYwppbmRleCBjNjAyZWQx
N2M0ZmIuLjE1ZWEyODcyNmU3YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9mZGkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2ZkaS5jCkBAIC00LDcgKzQsNiBAQAogICovCiAjaW5jbHVkZSAiaW50ZWxfYXRvbWljLmgiCiAj
aW5jbHVkZSAiaW50ZWxfZGRpLmgiCi0jaW5jbHVkZSAiaW50ZWxfZGRpX2J1Zl90cmFucy5oIgog
I2luY2x1ZGUgImludGVsX2RlLmgiCiAjaW5jbHVkZSAiaW50ZWxfZGlzcGxheV90eXBlcy5oIgog
I2luY2x1ZGUgImludGVsX2ZkaS5oIgpAQCAtNTY5LDcgKzU2OCw3IEBAIHZvaWQgaHN3X2ZkaV9s
aW5rX3RyYWluKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCXUzMiB0ZW1wLCBpLCBy
eF9jdGxfdmFsOwogCWludCBuX2VudHJpZXM7CiAKLQloc3dfZ2V0X2J1Zl90cmFucyhlbmNvZGVy
LCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKKwllbmNvZGVyLT5nZXRfYnVmX3RyYW5zKGVuY29k
ZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwogCiAJaHN3X3ByZXBhcmVfZHBfZGRpX2J1ZmZl
cnMoZW5jb2RlciwgY3J0Y19zdGF0ZSk7CiAKLS0gCjIuMzEuMQoKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRl
bC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4EC8B26033
	for <lists+intel-gfx@lfdr.de>; Wed, 22 May 2019 11:14:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8F0EC8975F;
	Wed, 22 May 2019 09:14:07 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 472C48973E;
 Wed, 22 May 2019 09:14:06 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 May 2019 02:14:05 -0700
X-ExtLoop1: 1
Received: from rosetta.fi.intel.com ([10.237.72.186])
 by FMSMGA003.fm.intel.com with ESMTP; 22 May 2019 02:14:04 -0700
Received: by rosetta.fi.intel.com (Postfix, from userid 1000)
 id 8DEE3840167; Wed, 22 May 2019 12:13:52 +0300 (EEST)
From: Mika Kuoppala <mika.kuoppala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 22 May 2019 12:13:46 +0300
Message-Id: <20190522091346.12120-1-mika.kuoppala@linux.intel.com>
X-Mailer: git-send-email 2.17.1
Subject: [Intel-gfx] [PATCH i-g-t] lib/dummyload: Cleanup access to spin obj
 array
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SW5zdGVhZCBvZiByZWx5aW5nIGEgc3RhdGljIG9iaiBhcnJheSBpbnNpZGUgaWd0X3NwaW5fdCwK
YWNjZXNzIGl0IHdpdGggcHJvcGVyIGluZGV4aW5nLgoKQ2M6IENocmlzIFdpbHNvbiA8Y2hyaXNA
Y2hyaXMtd2lsc29uLmNvLnVrPgpTaWduZWQtb2ZmLWJ5OiBNaWthIEt1b3BwYWxhIDxtaWthLmt1
b3BwYWxhQGxpbnV4LmludGVsLmNvbT4KLS0tCiBsaWIvaWd0X2R1bW15bG9hZC5jICAgICAgICAg
ICAgfCAzMiArKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tLQogbGliL2lndF9kdW1teWxv
YWQuaCAgICAgICAgICAgIHwgIDEgKwogdGVzdHMvaTkxNS9nZW1fZXhlY19zY2hlZHVsZS5jIHwg
MjUgKysrKysrKysrKysrKysrLS0tLS0tLS0tLQogdGVzdHMvaTkxNS9nZW1fc29mdHBpbi5jICAg
ICAgIHwgIDIgKy0KIHRlc3RzL2k5MTUvZ2VtX3NwaW5fYmF0Y2guYyAgICB8ICA0ICsrLS0KIHRl
c3RzL2k5MTUvaTkxNV9oYW5nbWFuLmMgICAgICB8ICAyICstCiA2IGZpbGVzIGNoYW5nZWQsIDM1
IGluc2VydGlvbnMoKyksIDMxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2xpYi9pZ3RfZHVt
bXlsb2FkLmMgYi9saWIvaWd0X2R1bW15bG9hZC5jCmluZGV4IDE1ZDY0ZmFkLi5iMmRhMjIyZSAx
MDA2NDQKLS0tIGEvbGliL2lndF9kdW1teWxvYWQuYworKysgYi9saWIvaWd0X2R1bW15bG9hZC5j
CkBAIC03Miw3ICs3Miw2IEBAIGVtaXRfcmVjdXJzaXZlX2JhdGNoKGlndF9zcGluX3QgKnNwaW4s
CiAJCSAgICAgaW50IGZkLCBjb25zdCBzdHJ1Y3QgaWd0X3NwaW5fZmFjdG9yeSAqb3B0cykKIHsK
ICNkZWZpbmUgU0NSQVRDSCAwCi0jZGVmaW5lIEJBVENIIDEKIAljb25zdCBpbnQgZ2VuID0gaW50
ZWxfZ2VuKGludGVsX2dldF9kcm1fZGV2aWQoZmQpKTsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX3Jl
bG9jYXRpb25fZW50cnkgcmVsb2NzWzJdLCAqcjsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNi
dWZmZXIyICpleGVjYnVmOwpAQCAtMTA1LDE0ICsxMDQsMTQgQEAgZW1pdF9yZWN1cnNpdmVfYmF0
Y2goaWd0X3NwaW5fdCAqc3BpbiwKIAlvYmogPSBzcGluLT5vYmo7CiAJbWVtc2V0KHJlbG9jcywg
MCwgc2l6ZW9mKHJlbG9jcykpOwogCi0Jb2JqW0JBVENIXS5oYW5kbGUgPSBnZW1fY3JlYXRlKGZk
LCBCQVRDSF9TSVpFKTsKLQliYXRjaCA9IF9fZ2VtX21tYXBfX3djKGZkLCBvYmpbQkFUQ0hdLmhh
bmRsZSwKKwlvYmpbU1BJTl9PQkpfQkFUQ0hdLmhhbmRsZSA9IGdlbV9jcmVhdGUoZmQsIEJBVENI
X1NJWkUpOworCWJhdGNoID0gX19nZW1fbW1hcF9fd2MoZmQsIG9ialtTUElOX09CSl9CQVRDSF0u
aGFuZGxlLAogCQkJICAgICAgIDAsIEJBVENIX1NJWkUsIFBST1RfV1JJVEUpOwogCWlmICghYmF0
Y2gpCi0JCWJhdGNoID0gZ2VtX21tYXBfX2d0dChmZCwgb2JqW0JBVENIXS5oYW5kbGUsCisJCWJh
dGNoID0gZ2VtX21tYXBfX2d0dChmZCwgb2JqW1NQSU5fT0JKX0JBVENIXS5oYW5kbGUsCiAJCQkJ
ICAgICAgQkFUQ0hfU0laRSwgUFJPVF9XUklURSk7CiAKLQlnZW1fc2V0X2RvbWFpbihmZCwgb2Jq
W0JBVENIXS5oYW5kbGUsCisJZ2VtX3NldF9kb21haW4oZmQsIG9ialtTUElOX09CSl9CQVRDSF0u
aGFuZGxlLAogCQkgICAgICAgSTkxNV9HRU1fRE9NQUlOX0dUVCwgSTkxNV9HRU1fRE9NQUlOX0dU
VCk7CiAJZXhlY2J1Zi0+YnVmZmVyX2NvdW50Kys7CiAJY3MgPSBiYXRjaDsKQEAgLTEyMCw3ICsx
MTksNyBAQCBlbWl0X3JlY3Vyc2l2ZV9iYXRjaChpZ3Rfc3Bpbl90ICpzcGluLAogCWlmIChvcHRz
LT5kZXBlbmRlbmN5KSB7CiAJCWlndF9hc3NlcnQoIShvcHRzLT5mbGFncyAmIElHVF9TUElOX1BP
TExfUlVOKSk7CiAKLQkJciA9ICZyZWxvY3Nbb2JqW0JBVENIXS5yZWxvY2F0aW9uX2NvdW50Kytd
OworCQlyID0gJnJlbG9jc1tvYmpbU1BJTl9PQkpfQkFUQ0hdLnJlbG9jYXRpb25fY291bnQrK107
CiAKIAkJLyogZHVtbXkgd3JpdGUgdG8gZGVwZW5kZW5jeSAqLwogCQlvYmpbU0NSQVRDSF0uaGFu
ZGxlID0gb3B0cy0+ZGVwZW5kZW5jeTsKQEAgLTEzMyw3ICsxMzIsNyBAQCBlbWl0X3JlY3Vyc2l2
ZV9iYXRjaChpZ3Rfc3Bpbl90ICpzcGluLAogCiAJCWV4ZWNidWYtPmJ1ZmZlcl9jb3VudCsrOwog
CX0gZWxzZSBpZiAob3B0cy0+ZmxhZ3MgJiBJR1RfU1BJTl9QT0xMX1JVTikgewotCQlyID0gJnJl
bG9jc1tvYmpbQkFUQ0hdLnJlbG9jYXRpb25fY291bnQrK107CisJCXIgPSAmcmVsb2NzW29ialtT
UElOX09CSl9CQVRDSF0ucmVsb2NhdGlvbl9jb3VudCsrXTsKIAogCQlpZ3RfYXNzZXJ0KCFvcHRz
LT5kZXBlbmRlbmN5KTsKIApAQCAtMTgyLDcgKzE4MSw3IEBAIGVtaXRfcmVjdXJzaXZlX2JhdGNo
KGlndF9zcGluX3QgKnNwaW4sCiAJCWV4ZWNidWYtPmJ1ZmZlcl9jb3VudCsrOwogCX0KIAotCXNw
aW4tPmhhbmRsZSA9IG9ialtCQVRDSF0uaGFuZGxlOworCXNwaW4tPmhhbmRsZSA9IG9ialtTUElO
X09CSl9CQVRDSF0uaGFuZGxlOwogCiAJaWd0X2Fzc2VydF9sdChjcyAtIGJhdGNoLCBMT09QX1NU
QVJUX09GRlNFVCAvIHNpemVvZigqY3MpKTsKIAlzcGluLT5jb25kaXRpb24gPSBiYXRjaCArIExP
T1BfU1RBUlRfT0ZGU0VUIC8gc2l6ZW9mKCpjcyk7CkBAIC0yMDcsOCArMjA2LDggQEAgZW1pdF9y
ZWN1cnNpdmVfYmF0Y2goaWd0X3NwaW5fdCAqc3BpbiwKIAkJY3MgKz0gMTAwMDsKIAogCS8qIHJl
Y3Vyc2UgKi8KLQlyID0gJnJlbG9jc1tvYmpbQkFUQ0hdLnJlbG9jYXRpb25fY291bnQrK107Ci0J
ci0+dGFyZ2V0X2hhbmRsZSA9IG9ialtCQVRDSF0uaGFuZGxlOworCXIgPSAmcmVsb2NzW29ialtT
UElOX09CSl9CQVRDSF0ucmVsb2NhdGlvbl9jb3VudCsrXTsKKwlyLT50YXJnZXRfaGFuZGxlID0g
b2JqW1NQSU5fT0JKX0JBVENIXS5oYW5kbGU7CiAJci0+b2Zmc2V0ID0gKGNzICsgMSAtIGJhdGNo
KSAqIHNpemVvZigqY3MpOwogCXItPnJlYWRfZG9tYWlucyA9IEk5MTVfR0VNX0RPTUFJTl9DT01N
QU5EOwogCXItPmRlbHRhID0gTE9PUF9TVEFSVF9PRkZTRVQ7CkBAIC0yMjYsNyArMjI1LDcgQEAg
ZW1pdF9yZWN1cnNpdmVfYmF0Y2goaWd0X3NwaW5fdCAqc3BpbiwKIAkJKmNzID0gci0+ZGVsdGE7
CiAJCWNzKys7CiAJfQotCW9ialtCQVRDSF0ucmVsb2NzX3B0ciA9IHRvX3VzZXJfcG9pbnRlcihy
ZWxvY3MpOworCW9ialtTUElOX09CSl9CQVRDSF0ucmVsb2NzX3B0ciA9IHRvX3VzZXJfcG9pbnRl
cihyZWxvY3MpOwogCiAJZXhlY2J1Zi0+YnVmZmVyc19wdHIgPSB0b191c2VyX3BvaW50ZXIob2Jq
ICsKIAkJCQkJICAgICAgICgyIC0gZXhlY2J1Zi0+YnVmZmVyX2NvdW50KSk7CkBAIC0yNjEsMTIg
KzI2MCwxMSBAQCBlbWl0X3JlY3Vyc2l2ZV9iYXRjaChpZ3Rfc3Bpbl90ICpzcGluLAogCWlndF9h
c3NlcnRfbHQoY3MgLSBiYXRjaCwgQkFUQ0hfU0laRSAvIHNpemVvZigqY3MpKTsKIAogCS8qIE1h
a2UgaXQgZWFzaWVyIGZvciBjYWxsZXJzIHRvIHJlc3VibWl0LiAqLwotCi0Jb2JqW0JBVENIXS5y
ZWxvY2F0aW9uX2NvdW50ID0gMDsKLQlvYmpbQkFUQ0hdLnJlbG9jc19wdHIgPSAwOwotCi0Jb2Jq
W1NDUkFUQ0hdLmZsYWdzID0gRVhFQ19PQkpFQ1RfUElOTkVEOwotCW9ialtCQVRDSF0uZmxhZ3Mg
PSBFWEVDX09CSkVDVF9QSU5ORUQ7CisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUoc3Bpbi0+
b2JqKTsgaSsrKSB7CisJCXNwaW4tPm9ialtpXS5yZWxvY2F0aW9uX2NvdW50ID0gMDsKKwkJc3Bp
bi0+b2JqW2ldLnJlbG9jc19wdHIgPSAwOworCQlzcGluLT5vYmpbaV0uZmxhZ3MgPSBFWEVDX09C
SkVDVF9QSU5ORUQ7CisJfQogCiAJc3Bpbi0+Y21kX3ByZWNvbmRpdGlvbiA9ICpzcGluLT5jb25k
aXRpb247CiAKZGlmZiAtLWdpdCBhL2xpYi9pZ3RfZHVtbXlsb2FkLmggYi9saWIvaWd0X2R1bW15
bG9hZC5oCmluZGV4IDYxYTlmMmZjLi5mNzc3MmI5MCAxMDA2NDQKLS0tIGEvbGliL2lndF9kdW1t
eWxvYWQuaAorKysgYi9saWIvaWd0X2R1bW15bG9hZC5oCkBAIC00Miw2ICs0Miw3IEBAIHR5cGVk
ZWYgc3RydWN0IGlndF9zcGluIHsKIAogCWludCBvdXRfZmVuY2U7CiAJc3RydWN0IGRybV9pOTE1
X2dlbV9leGVjX29iamVjdDIgb2JqWzJdOworI2RlZmluZSBTUElOX09CSl9CQVRDSCAgIDEKIAlz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyIGV4ZWNidWY7CiAJdWludDMyX3QgcG9sbF9o
YW5kbGU7CiAJdWludDMyX3QgKnBvbGw7CmRpZmYgLS1naXQgYS90ZXN0cy9pOTE1L2dlbV9leGVj
X3NjaGVkdWxlLmMgYi90ZXN0cy9pOTE1L2dlbV9leGVjX3NjaGVkdWxlLmMKaW5kZXggYzA0Mzg1
MTMuLjkzMTY4ZDEwIDEwMDY0NAotLS0gYS90ZXN0cy9pOTE1L2dlbV9leGVjX3NjaGVkdWxlLmMK
KysrIGIvdGVzdHMvaTkxNS9nZW1fZXhlY19zY2hlZHVsZS5jCkBAIC0yMzQsNyArMjM0LDggQEAg
c3RhdGljIHZvaWQgaW5kZXBlbmRlbnQoaW50IGZkLCB1bnNpZ25lZCBpbnQgZW5naW5lKQogCQl9
IGVsc2UgewogCQkJc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiBlYiA9IHsKIAkJCQku
YnVmZmVyX2NvdW50ID0gMSwKLQkJCQkuYnVmZmVyc19wdHIgPSB0b191c2VyX3BvaW50ZXIoJnNw
aW4tPm9ialsxXSksCisJCQkJLmJ1ZmZlcnNfcHRyID0KKwkJCQl0b191c2VyX3BvaW50ZXIoJnNw
aW4tPm9ialtTUElOX09CSl9CQVRDSF0pLAogCQkJCS5mbGFncyA9IG90aGVyLAogCQkJfTsKIAkJ
CWdlbV9leGVjYnVmKGZkLCAmZWIpOwpAQCAtNTM3LDcgKzUzOCw4IEBAIHN0YXRpYyB2b2lkIHNl
bWFwaG9yZV9yZXNvbHZlKGludCBpOTE1KQogCiAJCS8qIFRoZW4gY2FuY2VsIHRoZSBzcGlubmVy
ICovCiAJCSpjcysrID0gTUlfU1RPUkVfRFdPUkRfSU1NOwotCQkqY3MrKyA9IHNwaW4tPm9ialsx
XS5vZmZzZXQgKyBvZmZzZXRfaW5fcGFnZShzcGluLT5jb25kaXRpb24pOworCQkqY3MrKyA9IHNw
aW4tPm9ialtTUElOX09CSl9CQVRDSF0ub2Zmc2V0ICsKKwkJCW9mZnNldF9pbl9wYWdlKHNwaW4t
PmNvbmRpdGlvbik7CiAJCSpjcysrID0gMDsKIAkJKmNzKysgPSBNSV9CQVRDSF9CVUZGRVJfRU5E
OwogCkBAIC01NDgsNyArNTUwLDcgQEAgc3RhdGljIHZvaWQgc2VtYXBob3JlX3Jlc29sdmUoaW50
IGk5MTUpCiAKIAkJLyogRmlyc3QgdXAgaXMgb3VyIHNwaW5uaW5nIHNlbWFwaG9yZSAqLwogCQlt
ZW1zZXQob2JqLCAwLCBzaXplb2Yob2JqKSk7Ci0JCW9ialswXSA9IHNwaW4tPm9ialsxXTsKKwkJ
b2JqWzBdID0gc3Bpbi0+b2JqW1NQSU5fT0JKX0JBVENIXTsKIAkJb2JqWzFdLmhhbmRsZSA9IHNl
bWFwaG9yZTsKIAkJb2JqWzFdLm9mZnNldCA9IFNFTUFQSE9SRV9BRERSOwogCQlvYmpbMV0uZmxh
Z3MgPSBFWEVDX09CSkVDVF9QSU5ORUQ7CkBAIC01NjIsNyArNTY0LDcgQEAgc3RhdGljIHZvaWQg
c2VtYXBob3JlX3Jlc29sdmUoaW50IGk5MTUpCiAJCW1lbXNldChvYmosIDAsIHNpemVvZihvYmop
KTsKIAkJb2JqWzBdLmhhbmRsZSA9IGhhbmRsZTsKIAkJb2JqWzBdLmZsYWdzID0gRVhFQ19PQkpF
Q1RfV1JJVEU7IC8qIGFsd2F5cyBhZnRlciBzZW1hcGhvcmUgKi8KLQkJb2JqWzFdID0gc3Bpbi0+
b2JqWzFdOworCQlvYmpbMV0gPSBzcGluLT5vYmpbU1BJTl9PQkpfQkFUQ0hdOwogCQllYi5idWZm
ZXJfY291bnQgPSAyOwogCQllYi5yc3ZkMSA9IDA7CiAJCWdlbV9leGVjYnVmKGk5MTUsICZlYik7
CkBAIC02MzgsMTEgKzY0MCwxMyBAQCBzdGF0aWMgdm9pZCBzZW1hcGhvcmVfbm9za2lwKGludCBp
OTE1KQogCQkvKiBDYW5jZWwgdGhlIGZvbGxvd2luZyBzcGlubmVyICovCiAJCSpjcysrID0gTUlf
U1RPUkVfRFdPUkRfSU1NOwogCQlpZiAoZ2VuID49IDgpIHsKLQkJCSpjcysrID0gc3Bpbi0+b2Jq
WzFdLm9mZnNldCArIG9mZnNldF9pbl9wYWdlKHNwaW4tPmNvbmRpdGlvbik7CisJCQkqY3MrKyA9
IHNwaW4tPm9ialtTUElOX09CSl9CQVRDSF0ub2Zmc2V0ICsKKwkJCQlvZmZzZXRfaW5fcGFnZShz
cGluLT5jb25kaXRpb24pOwogCQkJKmNzKysgPSAwOwogCQl9IGVsc2UgewogCQkJKmNzKysgPSAw
OwotCQkJKmNzKysgPSBzcGluLT5vYmpbMV0ub2Zmc2V0ICsgb2Zmc2V0X2luX3BhZ2Uoc3Bpbi0+
Y29uZGl0aW9uKTsKKwkJCSpjcysrID0gc3Bpbi0+b2JqW1NQSU5fT0JKX0JBVENIXS5vZmZzZXQg
KworCQkJCW9mZnNldF9pbl9wYWdlKHNwaW4tPmNvbmRpdGlvbik7CiAJCX0KIAkJKmNzKysgPSBN
SV9CQVRDSF9CVUZGRVJfRU5EOwogCkBAIC02NTEsOSArNjU1LDkgQEAgc3RhdGljIHZvaWQgc2Vt
YXBob3JlX25vc2tpcChpbnQgaTkxNSkKIAogCQkvKiBwb3J0MDogaW1wbGljaXQgc2VtYXBob3Jl
IGZyb20gZW5naW5lICovCiAJCW1lbXNldChvYmosIDAsIHNpemVvZihvYmopKTsKLQkJb2JqWzBd
ID0gY2hhaW4tPm9ialsxXTsKKwkJb2JqWzBdID0gY2hhaW4tPm9ialtTUElOX09CSl9CQVRDSF07
CiAJCW9ialswXS5mbGFncyB8PSBFWEVDX09CSkVDVF9XUklURTsKLQkJb2JqWzFdID0gc3Bpbi0+
b2JqWzFdOworCQlvYmpbMV0gPSBzcGluLT5vYmpbU1BJTl9PQkpfQkFUQ0hdOwogCQlvYmpbMl0u
aGFuZGxlID0gaGFuZGxlOwogCQltZW1zZXQoJmViLCAwLCBzaXplb2YoZWIpKTsKIAkJZWIuYnVm
ZmVyX2NvdW50ID0gMzsKQEAgLTY2Niw3ICs2NzAsNyBAQCBzdGF0aWMgdm9pZCBzZW1hcGhvcmVf
bm9za2lwKGludCBpOTE1KQogCQltZW1zZXQob2JqLCAwLCBzaXplb2Yob2JqKSk7CiAJCW9ialsw
XS5oYW5kbGUgPSBoYW5kbGU7CiAJCW9ialswXS5mbGFncyA9IEVYRUNfT0JKRUNUX1dSSVRFOwot
CQlvYmpbMV0gPSBzcGluLT5vYmpbMV07CisJCW9ialsxXSA9IHNwaW4tPm9ialtTUElOX09CSl9C
QVRDSF07CiAJCW1lbXNldCgmZWIsIDAsIHNpemVvZihlYikpOwogCQllYi5idWZmZXJfY291bnQg
PSAyOwogCQllYi5idWZmZXJzX3B0ciA9IHRvX3VzZXJfcG9pbnRlcihvYmopOwpAQCAtODQyLDcg
Kzg0Niw4IEBAIHN0YXRpYyBpZ3Rfc3Bpbl90ICpfX25vaXNlKGludCBmZCwgdWludDMyX3QgY3R4
LCBpbnQgcHJpbywgaWd0X3NwaW5fdCAqc3BpbikKIAkJfSBlbHNlIHsKIAkJCXN0cnVjdCBkcm1f
aTkxNV9nZW1fZXhlY2J1ZmZlcjIgZWIgPSB7CiAJCQkJLmJ1ZmZlcl9jb3VudCA9IDEsCi0JCQkJ
LmJ1ZmZlcnNfcHRyID0gdG9fdXNlcl9wb2ludGVyKCZzcGluLT5vYmpbMV0pLAorCQkJCS5idWZm
ZXJzX3B0ciA9CisJCQkJdG9fdXNlcl9wb2ludGVyKCZzcGluLT5vYmpbU1BJTl9PQkpfQkFUQ0hd
KSwKIAkJCQkucnN2ZDEgPSBjdHgsCiAJCQkJLmZsYWdzID0gb3RoZXIsCiAJCQl9OwpkaWZmIC0t
Z2l0IGEvdGVzdHMvaTkxNS9nZW1fc29mdHBpbi5jIGIvdGVzdHMvaTkxNS9nZW1fc29mdHBpbi5j
CmluZGV4IDMzNjAwOGI4Li5lY2JjOTA1MCAxMDA2NDQKLS0tIGEvdGVzdHMvaTkxNS9nZW1fc29m
dHBpbi5jCisrKyBiL3Rlc3RzL2k5MTUvZ2VtX3NvZnRwaW4uYwpAQCAtMzYwLDcgKzM2MCw3IEBA
IHN0YXRpYyB2b2lkIHRlc3RfZXZpY3RfaGFuZyhpbnQgZmQpCiAJZXhlY2J1Zi5idWZmZXJfY291
bnQgPSAxOwogCiAJaGFuZyA9IGlndF9oYW5nX2N0eChmZCwgMCwgMCwgMCk7Ci0JZXhwZWN0ZWQg
PSBoYW5nLnNwaW4tPm9ialsxXS5vZmZzZXQ7CisJZXhwZWN0ZWQgPSBoYW5nLnNwaW4tPm9ialtT
UElOX09CSl9CQVRDSF0ub2Zmc2V0OwogCiAJLyogUmVwbGFjZSB0aGUgaHVuZyBiYXRjaCB3aXRo
IG91cnNlbHZlcywgZm9yY2luZyBhbiBldmljdGlvbiAqLwogCW9iamVjdC5vZmZzZXQgPSBleHBl
Y3RlZDsKZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX3NwaW5fYmF0Y2guYyBiL3Rlc3RzL2k5
MTUvZ2VtX3NwaW5fYmF0Y2guYwppbmRleCBhOTI2NzJiOC4uYzNhYTBkZmIgMTAwNjQ0Ci0tLSBh
L3Rlc3RzL2k5MTUvZ2VtX3NwaW5fYmF0Y2guYworKysgYi90ZXN0cy9pOTE1L2dlbV9zcGluX2Jh
dGNoLmMKQEAgLTc5LDcgKzc5LDcgQEAgc3RhdGljIHZvaWQgc3Bpbl9yZXN1Ym1pdChpbnQgZmQs
IHVuc2lnbmVkIGludCBlbmdpbmUsIHVuc2lnbmVkIGludCBmbGFncykKIAogCXN0cnVjdCBkcm1f
aTkxNV9nZW1fZXhlY2J1ZmZlcjIgZWIgPSB7CiAJCS5idWZmZXJfY291bnQgPSAxLAotCQkuYnVm
ZmVyc19wdHIgPSB0b191c2VyX3BvaW50ZXIoJnNwaW4tPm9ialsxXSksCisJCS5idWZmZXJzX3B0
ciA9IHRvX3VzZXJfcG9pbnRlcigmc3Bpbi0+b2JqW1NQSU5fT0JKX0JBVENIXSksCiAJCS5yc3Zk
MSA9IGN0eDEsCiAJfTsKIApAQCAtOTgsNyArOTgsNyBAQCBzdGF0aWMgdm9pZCBzcGluX3Jlc3Vi
bWl0KGludCBmZCwgdW5zaWduZWQgaW50IGVuZ2luZSwgdW5zaWduZWQgaW50IGZsYWdzKQogCiAJ
aWd0X3NwaW5fZW5kKHNwaW4pOwogCi0JZ2VtX3N5bmMoZmQsIHNwaW4tPm9ialsxXS5oYW5kbGUp
OworCWdlbV9zeW5jKGZkLCBzcGluLT5oYW5kbGUpOwogCiAJaWd0X3NwaW5fZnJlZShmZCwgc3Bp
bik7CiAKZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUvaTkxNV9oYW5nbWFuLmMgYi90ZXN0cy9pOTE1
L2k5MTVfaGFuZ21hbi5jCmluZGV4IDlhMWQ1ODg5Li4yZTc3YmJiOSAxMDA2NDQKLS0tIGEvdGVz
dHMvaTkxNS9pOTE1X2hhbmdtYW4uYworKysgYi90ZXN0cy9pOTE1L2k5MTVfaGFuZ21hbi5jCkBA
IC0yMDksNyArMjA5LDcgQEAgc3RhdGljIHZvaWQgdGVzdF9lcnJvcl9zdGF0ZV9jYXB0dXJlKHVu
c2lnbmVkIHJpbmdfaWQsCiAJY2xlYXJfZXJyb3Jfc3RhdGUoKTsKIAogCWhhbmcgPSBpZ3RfaGFu
Z19jdHgoZGV2aWNlLCAwLCByaW5nX2lkLCBIQU5HX0FMTE9XX0NBUFRVUkUpOwotCW9mZnNldCA9
IGhhbmcuc3Bpbi0+b2JqWzFdLm9mZnNldDsKKwlvZmZzZXQgPSBoYW5nLnNwaW4tPm9ialtTUElO
X09CSl9CQVRDSF0ub2Zmc2V0OwogCiAJYmF0Y2ggPSBnZW1fbW1hcF9fY3B1KGRldmljZSwgaGFu
Zy5zcGluLT5oYW5kbGUsIDAsIDQwOTYsIFBST1RfUkVBRCk7CiAJZ2VtX3NldF9kb21haW4oZGV2
aWNlLCBoYW5nLnNwaW4tPmhhbmRsZSwgSTkxNV9HRU1fRE9NQUlOX0NQVSwgMCk7Ci0tIAoyLjE3
LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

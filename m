Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9036775B9A
	for <lists+intel-gfx@lfdr.de>; Fri, 26 Jul 2019 01:48:25 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7630D6E839;
	Thu, 25 Jul 2019 23:48:23 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2FC3E6E83B
 for <intel-gfx@lists.freedesktop.org>; Thu, 25 Jul 2019 23:48:22 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 25 Jul 2019 16:48:21 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,308,1559545200"; d="scan'208";a="170460037"
Received: from ldmartin-desk1.jf.intel.com (HELO ldmartin-desk1.intel.com)
 ([10.24.9.40])
 by fmsmga008.fm.intel.com with ESMTP; 25 Jul 2019 16:48:20 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 25 Jul 2019 16:48:11 -0700
Message-Id: <20190725234813.27179-2-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190725234813.27179-1-lucas.demarchi@intel.com>
References: <20190725234813.27179-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 1/3] drm/i915/tgl: Add hpd interrupt handling
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWRkIGhvdGRwbHVnIGRldGVjdGlvbiBmb3IgYWxsIHBvcnRzIG9uIFRHUC4gaWNwX2hwZF9kZXRl
Y3Rpb25fc2V0dXAoKQppcyByZWZhY3RvcmVkIHRvIGJlIHNoYXJlZCB3aXRoIFRHUC4KCldoaWxl
IHdlIGluY3JlYXNlIHRoZSBudW1iZXIgb2YgcGlucywgYWRkIGEgQlVJTERfQlVHX09OKCkgdG8g
YXZvaWQKZ29pbmcgb3ZlciB0aGUgbnVtYmVyIG9mIGJpdHMgYWxsb3dlZC4KCnYyOiB1c2UgQklU
U19QRVJfVFlQRSBhbmQgY29ycmVjdCB0eXBlIGZvciBCVUlMRF9CVUdfT04oKSBjaGVjawogICAg
KHJlcXVlc3RlZCBieSBWaWxsZSkKCkNjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFA
bGludXguaW50ZWwuY29tPgpDYzogSm9zZSBTb3V6YSA8am9zZS5zb3V6YUBpbnRlbC5jb20+CkNj
OiBSb2RyaWdvIFZpdmkgPHJvZHJpZ28udml2aUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEx1
Y2FzIERlIE1hcmNoaSA8bHVjYXMuZGVtYXJjaGlAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaG90cGx1Zy5jIHwgICA2ICsKIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAgICAgIHwgICA0ICsKIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfaXJxLmMgICAgICAgICAgICAgIHwgMTI4ICsrKysrKysrKysrKysrKysrLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggICAgICAgICAgICAgIHwgIDI4ICsrKy0KIDQg
ZmlsZXMgY2hhbmdlZCwgMTU0IGluc2VydGlvbnMoKyksIDEyIGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaG90cGx1Zy5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9ob3RwbHVnLmMKaW5kZXggMzQyNTg3ZDkx
ZDU3Li5jODQ0YWU0NDgwYWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfaG90cGx1Zy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfaG90cGx1Zy5jCkBAIC0xMDQsNiArMTA0LDEyIEBAIGVudW0gaHBkX3BpbiBpbnRlbF9ocGRf
cGluX2RlZmF1bHQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQlpZiAoSVNf
Q05MX1dJVEhfUE9SVF9GKGRldl9wcml2KSkKIAkJCXJldHVybiBIUERfUE9SVF9FOwogCQlyZXR1
cm4gSFBEX1BPUlRfRjsKKwljYXNlIFBPUlRfRzoKKwkJcmV0dXJuIEhQRF9QT1JUX0c7CisJY2Fz
ZSBQT1JUX0g6CisJCXJldHVybiBIUERfUE9SVF9IOworCWNhc2UgUE9SVF9JOgorCQlyZXR1cm4g
SFBEX1BPUlRfSTsKIAlkZWZhdWx0OgogCQlNSVNTSU5HX0NBU0UocG9ydCk7CiAJCXJldHVybiBI
UERfTk9ORTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IDU5ZDRhMTE0NjAzOS4uYTJlNmI0
OTVmMDMzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTE1Myw2ICsxNTMsMTAgQEAgZW51
bSBocGRfcGluIHsKIAlIUERfUE9SVF9ELAogCUhQRF9QT1JUX0UsCiAJSFBEX1BPUlRfRiwKKwlI
UERfUE9SVF9HLAorCUhQRF9QT1JUX0gsCisJSFBEX1BPUlRfSSwKKwogCUhQRF9OVU1fUElOUwog
fTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKaW5kZXggYTE3ZDRmZDE3OTYyLi4zNDUyN2NkZDkz
ODggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYwpAQCAtMTUwLDYgKzE1MCwxOCBAQCBzdGF0aWMg
Y29uc3QgdTMyIGhwZF9tY2NbSFBEX05VTV9QSU5TXSA9IHsKIAlbSFBEX1BPUlRfQ10gPSBTREVf
VEMxX0hPVFBMVUdfSUNQCiB9OwogCitzdGF0aWMgY29uc3QgdTMyIGhwZF90Z3BbSFBEX05VTV9Q
SU5TXSA9IHsKKwlbSFBEX1BPUlRfQV0gPSBTREVfRERJQV9IT1RQTFVHX0lDUCwKKwlbSFBEX1BP
UlRfQl0gPSBTREVfRERJQl9IT1RQTFVHX0lDUCwKKwlbSFBEX1BPUlRfQ10gPSBTREVfRERJQ19I
T1RQTFVHX1RHUCwKKwlbSFBEX1BPUlRfRF0gPSBTREVfVEMxX0hPVFBMVUdfSUNQLAorCVtIUERf
UE9SVF9FXSA9IFNERV9UQzJfSE9UUExVR19JQ1AsCisJW0hQRF9QT1JUX0ZdID0gU0RFX1RDM19I
T1RQTFVHX0lDUCwKKwlbSFBEX1BPUlRfR10gPSBTREVfVEM0X0hPVFBMVUdfSUNQLAorCVtIUERf
UE9SVF9IXSA9IFNERV9UQzVfSE9UUExVR19UR1AsCisJW0hQRF9QT1JUX0ldID0gU0RFX1RDNl9I
T1RQTFVHX1RHUCwKK307CisKIHN0YXRpYyB2b2lkIGdlbjNfaXJxX3Jlc2V0KHN0cnVjdCBpbnRl
bF91bmNvcmUgKnVuY29yZSwgaTkxNV9yZWdfdCBpbXIsCiAJCQkgICBpOTE1X3JlZ190IGlpciwg
aTkxNV9yZWdfdCBpZXIpCiB7CkBAIC0xNzI0LDYgKzE3MzYsNDAgQEAgc3RhdGljIGJvb2wgaWNw
X3RjX3BvcnRfaG90cGx1Z19sb25nX2RldGVjdChlbnVtIGhwZF9waW4gcGluLCB1MzIgdmFsKQog
CX0KIH0KIAorc3RhdGljIGJvb2wgdGdwX2RkaV9wb3J0X2hvdHBsdWdfbG9uZ19kZXRlY3QoZW51
bSBocGRfcGluIHBpbiwgdTMyIHZhbCkKK3sKKwlzd2l0Y2ggKHBpbikgeworCWNhc2UgSFBEX1BP
UlRfQToKKwkJcmV0dXJuIHZhbCAmIElDUF9ERElBX0hQRF9MT05HX0RFVEVDVDsKKwljYXNlIEhQ
RF9QT1JUX0I6CisJCXJldHVybiB2YWwgJiBJQ1BfRERJQl9IUERfTE9OR19ERVRFQ1Q7CisJY2Fz
ZSBIUERfUE9SVF9DOgorCQlyZXR1cm4gdmFsICYgVEdQX0RESUNfSFBEX0xPTkdfREVURUNUOwor
CWRlZmF1bHQ6CisJCXJldHVybiBmYWxzZTsKKwl9Cit9CisKK3N0YXRpYyBib29sIHRncF90Y19w
b3J0X2hvdHBsdWdfbG9uZ19kZXRlY3QoZW51bSBocGRfcGluIHBpbiwgdTMyIHZhbCkKK3sKKwlz
d2l0Y2ggKHBpbikgeworCWNhc2UgSFBEX1BPUlRfRDoKKwkJcmV0dXJuIHZhbCAmIElDUF9UQ19I
UERfTE9OR19ERVRFQ1QoUE9SVF9UQzEpOworCWNhc2UgSFBEX1BPUlRfRToKKwkJcmV0dXJuIHZh
bCAmIElDUF9UQ19IUERfTE9OR19ERVRFQ1QoUE9SVF9UQzIpOworCWNhc2UgSFBEX1BPUlRfRjoK
KwkJcmV0dXJuIHZhbCAmIElDUF9UQ19IUERfTE9OR19ERVRFQ1QoUE9SVF9UQzMpOworCWNhc2Ug
SFBEX1BPUlRfRzoKKwkJcmV0dXJuIHZhbCAmIElDUF9UQ19IUERfTE9OR19ERVRFQ1QoUE9SVF9U
QzQpOworCWNhc2UgSFBEX1BPUlRfSDoKKwkJcmV0dXJuIHZhbCAmIElDUF9UQ19IUERfTE9OR19E
RVRFQ1QoUE9SVF9UQzUpOworCWNhc2UgSFBEX1BPUlRfSToKKwkJcmV0dXJuIHZhbCAmIElDUF9U
Q19IUERfTE9OR19ERVRFQ1QoUE9SVF9UQzYpOworCWRlZmF1bHQ6CisJCXJldHVybiBmYWxzZTsK
Kwl9Cit9CisKIHN0YXRpYyBib29sIHNwdF9wb3J0X2hvdHBsdWcyX2xvbmdfZGV0ZWN0KGVudW0g
aHBkX3BpbiBwaW4sIHUzMiB2YWwpCiB7CiAJc3dpdGNoIChwaW4pIHsKQEAgLTE4MDMsNiArMTg0
OSw4IEBAIHN0YXRpYyB2b2lkIGludGVsX2dldF9ocGRfcGlucyhzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYsCiB7CiAJZW51bSBocGRfcGluIHBpbjsKIAorCUJVSUxEX0JVR19PTihC
SVRTX1BFUl9UWVBFKCpwaW5fbWFzaykgPCBIUERfTlVNX1BJTlMpOworCiAJZm9yX2VhY2hfaHBk
X3BpbihwaW4pIHsKIAkJaWYgKChocGRbcGluXSAmIGhvdHBsdWdfdHJpZ2dlcikgPT0gMCkKIAkJ
CWNvbnRpbnVlOwpAQCAtMjU2MSw2ICsyNjA5LDQzIEBAIHN0YXRpYyB2b2lkIGljcF9pcnFfaGFu
ZGxlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIHUzMiBwY2hfaWlyLAogCQln
bWJ1c19pcnFfaGFuZGxlcihkZXZfcHJpdik7CiB9CiAKK3N0YXRpYyB2b2lkIHRncF9pcnFfaGFu
ZGxlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIHUzMiBwY2hfaWlyKQorewor
CXUzMiBkZGlfaG90cGx1Z190cmlnZ2VyID0gcGNoX2lpciAmIFNERV9ERElfTUFTS19UR1A7CisJ
dTMyIHRjX2hvdHBsdWdfdHJpZ2dlciA9IHBjaF9paXIgJiBTREVfVENfTUFTS19UR1A7CisJdTMy
IHBpbl9tYXNrID0gMCwgbG9uZ19tYXNrID0gMDsKKworCWlmIChkZGlfaG90cGx1Z190cmlnZ2Vy
KSB7CisJCXUzMiBkaWdfaG90cGx1Z19yZWc7CisKKwkJZGlnX2hvdHBsdWdfcmVnID0gSTkxNV9S
RUFEKFNIT1RQTFVHX0NUTF9EREkpOworCQlJOTE1X1dSSVRFKFNIT1RQTFVHX0NUTF9EREksIGRp
Z19ob3RwbHVnX3JlZyk7CisKKwkJaW50ZWxfZ2V0X2hwZF9waW5zKGRldl9wcml2LCAmcGluX21h
c2ssICZsb25nX21hc2ssCisJCQkJICAgZGRpX2hvdHBsdWdfdHJpZ2dlciwKKwkJCQkgICBkaWdf
aG90cGx1Z19yZWcsIGhwZF90Z3AsCisJCQkJICAgdGdwX2RkaV9wb3J0X2hvdHBsdWdfbG9uZ19k
ZXRlY3QpOworCX0KKworCWlmICh0Y19ob3RwbHVnX3RyaWdnZXIpIHsKKwkJdTMyIGRpZ19ob3Rw
bHVnX3JlZzsKKworCQlkaWdfaG90cGx1Z19yZWcgPSBJOTE1X1JFQUQoU0hPVFBMVUdfQ1RMX1RD
KTsKKwkJSTkxNV9XUklURShTSE9UUExVR19DVExfVEMsIGRpZ19ob3RwbHVnX3JlZyk7CisKKwkJ
aW50ZWxfZ2V0X2hwZF9waW5zKGRldl9wcml2LCAmcGluX21hc2ssICZsb25nX21hc2ssCisJCQkJ
ICAgdGNfaG90cGx1Z190cmlnZ2VyLAorCQkJCSAgIGRpZ19ob3RwbHVnX3JlZywgaHBkX3RncCwK
KwkJCQkgICB0Z3BfdGNfcG9ydF9ob3RwbHVnX2xvbmdfZGV0ZWN0KTsKKwl9CisKKwlpZiAocGlu
X21hc2spCisJCWludGVsX2hwZF9pcnFfaGFuZGxlcihkZXZfcHJpdiwgcGluX21hc2ssIGxvbmdf
bWFzayk7CisKKwlpZiAocGNoX2lpciAmIFNERV9HTUJVU19JQ1ApCisJCWdtYnVzX2lycV9oYW5k
bGVyKGRldl9wcml2KTsKK30KKwogc3RhdGljIHZvaWQgc3B0X2lycV9oYW5kbGVyKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgdTMyIHBjaF9paXIpCiB7CiAJdTMyIGhvdHBsdWdf
dHJpZ2dlciA9IHBjaF9paXIgJiBTREVfSE9UUExVR19NQVNLX1NQVCAmCkBAIC0yOTgzLDcgKzMw
NjgsOSBAQCBnZW44X2RlX2lycV9oYW5kbGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiwgdTMyIG1hc3Rlcl9jdGwpCiAJCQlJOTE1X1dSSVRFKFNERUlJUiwgaWlyKTsKIAkJCXJl
dCA9IElSUV9IQU5ETEVEOwogCi0JCQlpZiAoSU5URUxfUENIX1RZUEUoZGV2X3ByaXYpID49IFBD
SF9NQ0MpCisJCQlpZiAoSU5URUxfUENIX1RZUEUoZGV2X3ByaXYpID49IFBDSF9UR1ApCisJCQkJ
dGdwX2lycV9oYW5kbGVyKGRldl9wcml2LCBpaXIpOworCQkJZWxzZSBpZiAoSU5URUxfUENIX1RZ
UEUoZGV2X3ByaXYpID49IFBDSF9NQ0MpCiAJCQkJaWNwX2lycV9oYW5kbGVyKGRldl9wcml2LCBp
aXIsIGhwZF9tY2MpOwogCQkJZWxzZSBpZiAoSU5URUxfUENIX1RZUEUoZGV2X3ByaXYpID49IFBD
SF9JQ1ApCiAJCQkJaWNwX2lycV9oYW5kbGVyKGRldl9wcml2LCBpaXIsIGhwZF9pY3ApOwpAQCAt
Mzc3OCwyMCArMzg2NSwxOCBAQCBzdGF0aWMgdm9pZCBpYnhfaHBkX2lycV9zZXR1cChzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJaWJ4X2hwZF9kZXRlY3Rpb25fc2V0dXAoZGV2
X3ByaXYpOwogfQogCi1zdGF0aWMgdm9pZCBpY3BfaHBkX2RldGVjdGlvbl9zZXR1cChzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCitzdGF0aWMgdm9pZCBpY3BfaHBkX2RldGVjdGlv
bl9zZXR1cChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCisJCQkJICAgIHUzMiBk
ZGlfaG90cGx1Z19lbmFibGVfbWFzaywKKwkJCQkgICAgdTMyIHRjX2hvdHBsdWdfZW5hYmxlX21h
c2spCiB7CiAJdTMyIGhvdHBsdWc7CiAKIAlob3RwbHVnID0gSTkxNV9SRUFEKFNIT1RQTFVHX0NU
TF9EREkpOwotCWhvdHBsdWcgfD0gSUNQX0RESUFfSFBEX0VOQUJMRSB8Ci0JCSAgIElDUF9ERElC
X0hQRF9FTkFCTEU7CisJaG90cGx1ZyB8PSBkZGlfaG90cGx1Z19lbmFibGVfbWFzazsKIAlJOTE1
X1dSSVRFKFNIT1RQTFVHX0NUTF9EREksIGhvdHBsdWcpOwogCiAJaG90cGx1ZyA9IEk5MTVfUkVB
RChTSE9UUExVR19DVExfVEMpOwotCWhvdHBsdWcgfD0gSUNQX1RDX0hQRF9FTkFCTEUoUE9SVF9U
QzEpIHwKLQkJICAgSUNQX1RDX0hQRF9FTkFCTEUoUE9SVF9UQzIpIHwKLQkJICAgSUNQX1RDX0hQ
RF9FTkFCTEUoUE9SVF9UQzMpIHwKLQkJICAgSUNQX1RDX0hQRF9FTkFCTEUoUE9SVF9UQzQpOwor
CWhvdHBsdWcgfD0gdGNfaG90cGx1Z19lbmFibGVfbWFzazsKIAlJOTE1X1dSSVRFKFNIT1RQTFVH
X0NUTF9UQywgaG90cGx1Zyk7CiB9CiAKQEAgLTM4MDQsNyArMzg4OSwyMSBAQCBzdGF0aWMgdm9p
ZCBpY3BfaHBkX2lycV9zZXR1cChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAK
IAlpYnhfZGlzcGxheV9pbnRlcnJ1cHRfdXBkYXRlKGRldl9wcml2LCBob3RwbHVnX2lycXMsIGVu
YWJsZWRfaXJxcyk7CiAKLQlpY3BfaHBkX2RldGVjdGlvbl9zZXR1cChkZXZfcHJpdik7CisJaWNw
X2hwZF9kZXRlY3Rpb25fc2V0dXAoZGV2X3ByaXYsIElDUF9ERElfSFBEX0VOQUJMRV9NQVNLLAor
CQkJCUlDUF9UQ19IUERfRU5BQkxFX01BU0spOworfQorCitzdGF0aWMgdm9pZCB0Z3BfaHBkX2ly
cV9zZXR1cChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCit7CisJdTMyIGhvdHBs
dWdfaXJxcywgZW5hYmxlZF9pcnFzOworCisJaG90cGx1Z19pcnFzID0gU0RFX0RESV9NQVNLX1RH
UCB8IFNERV9UQ19NQVNLX1RHUDsKKwllbmFibGVkX2lycXMgPSBpbnRlbF9ocGRfZW5hYmxlZF9p
cnFzKGRldl9wcml2LCBocGRfdGdwKTsKKworCWlieF9kaXNwbGF5X2ludGVycnVwdF91cGRhdGUo
ZGV2X3ByaXYsIGhvdHBsdWdfaXJxcywgZW5hYmxlZF9pcnFzKTsKKworCWljcF9ocGRfZGV0ZWN0
aW9uX3NldHVwKGRldl9wcml2LCBUR1BfRERJX0hQRF9FTkFCTEVfTUFTSywKKwkJCQlUR1BfVENf
SFBEX0VOQUJMRV9NQVNLKTsKIH0KIAogc3RhdGljIHZvaWQgZ2VuMTFfaHBkX2RldGVjdGlvbl9z
ZXR1cChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCkBAIC0zODQxLDcgKzM5NDAs
OSBAQCBzdGF0aWMgdm9pZCBnZW4xMV9ocGRfaXJxX3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikKIAogCWdlbjExX2hwZF9kZXRlY3Rpb25fc2V0dXAoZGV2X3ByaXYpOwog
Ci0JaWYgKElOVEVMX1BDSF9UWVBFKGRldl9wcml2KSA+PSBQQ0hfSUNQKQorCWlmIChJTlRFTF9Q
Q0hfVFlQRShkZXZfcHJpdikgPj0gUENIX1RHUCkKKwkJdGdwX2hwZF9pcnFfc2V0dXAoZGV2X3By
aXYpOworCWVsc2UgaWYgKElOVEVMX1BDSF9UWVBFKGRldl9wcml2KSA+PSBQQ0hfSUNQKQogCQlp
Y3BfaHBkX2lycV9zZXR1cChkZXZfcHJpdik7CiB9CiAKQEAgLTQyOTEsNyArNDM5MiwxMiBAQCBz
dGF0aWMgdm9pZCBpY3BfaXJxX3Bvc3RpbnN0YWxsKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdikKIAlnZW4zX2Fzc2VydF9paXJfaXNfemVybygmZGV2X3ByaXYtPnVuY29yZSwgU0RF
SUlSKTsKIAlJOTE1X1dSSVRFKFNERUlNUiwgfm1hc2spOwogCi0JaWNwX2hwZF9kZXRlY3Rpb25f
c2V0dXAoZGV2X3ByaXYpOworCWlmIChIQVNfUENIX1RHUChkZXZfcHJpdikpCisJCWljcF9ocGRf
ZGV0ZWN0aW9uX3NldHVwKGRldl9wcml2LCBUR1BfRERJX0hQRF9FTkFCTEVfTUFTSywKKwkJCQkJ
VEdQX1RDX0hQRF9FTkFCTEVfTUFTSyk7CisJZWxzZQorCQlpY3BfaHBkX2RldGVjdGlvbl9zZXR1
cChkZXZfcHJpdiwgSUNQX0RESV9IUERfRU5BQkxFX01BU0ssCisJCQkJCUlDUF9UQ19IUERfRU5B
QkxFX01BU0spOwogfQogCiBzdGF0aWMgdm9pZCBnZW4xMV9pcnFfcG9zdGluc3RhbGwoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9yZWcuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKaW5kZXgg
MjRmMmE1MmEyYjQyLi5jNTA0MjM5NmRiYjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVnLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaApAQCAt
Nzg2MSwxMiArNzg2MSwxNSBAQCBlbnVtIHsKIAkJCQkgU0RFX0ZESV9SWEJfQ1BUIHwgXAogCQkJ
CSBTREVfRkRJX1JYQV9DUFQpCiAKLS8qIHNvdXRoIGRpc3BsYXkgZW5naW5lIGludGVycnVwdDog
SUNQICovCisvKiBzb3V0aCBkaXNwbGF5IGVuZ2luZSBpbnRlcnJ1cHQ6IElDUC9UR1AgKi8KKyNk
ZWZpbmUgU0RFX1RDNl9IT1RQTFVHX1RHUAkJKDEgPDwgMjkpCisjZGVmaW5lIFNERV9UQzVfSE9U
UExVR19UR1AJCSgxIDw8IDI4KQogI2RlZmluZSBTREVfVEM0X0hPVFBMVUdfSUNQCQkoMSA8PCAy
NykKICNkZWZpbmUgU0RFX1RDM19IT1RQTFVHX0lDUAkJKDEgPDwgMjYpCiAjZGVmaW5lIFNERV9U
QzJfSE9UUExVR19JQ1AJCSgxIDw8IDI1KQogI2RlZmluZSBTREVfVEMxX0hPVFBMVUdfSUNQCQko
MSA8PCAyNCkKICNkZWZpbmUgU0RFX0dNQlVTX0lDUAkJCSgxIDw8IDIzKQorI2RlZmluZSBTREVf
RERJQ19IT1RQTFVHX1RHUAkJKDEgPDwgMTgpCiAjZGVmaW5lIFNERV9ERElCX0hPVFBMVUdfSUNQ
CQkoMSA8PCAxNykKICNkZWZpbmUgU0RFX0RESUFfSE9UUExVR19JQ1AJCSgxIDw8IDE2KQogI2Rl
ZmluZSBTREVfVENfSE9UUExVR19JQ1AodGNfcG9ydCkJKDEgPDwgKCh0Y19wb3J0KSArIDI0KSkK
QEAgLTc4NzcsNiArNzg4MCwxMSBAQCBlbnVtIHsKIAkJCQkJIFNERV9UQzNfSE9UUExVR19JQ1Ag
fAlcCiAJCQkJCSBTREVfVEMyX0hPVFBMVUdfSUNQIHwJXAogCQkJCQkgU0RFX1RDMV9IT1RQTFVH
X0lDUCkKKyNkZWZpbmUgU0RFX0RESV9NQVNLX1RHUAkJKFNERV9ERElDX0hPVFBMVUdfVEdQIHwg
XAorCQkJCQkgU0RFX0RESV9NQVNLX0lDUCkKKyNkZWZpbmUgU0RFX1RDX01BU0tfVEdQCQkJKFNE
RV9UQzZfSE9UUExVR19UR1AgfAlcCisJCQkJCSBTREVfVEM1X0hPVFBMVUdfVEdQIHwJXAorCQkJ
CQkgU0RFX1RDX01BU0tfSUNQKQogCiAjZGVmaW5lIFNERUlTUiAgX01NSU8oMHhjNDAwMCkKICNk
ZWZpbmUgU0RFSU1SICBfTU1JTygweGM0MDA0KQpAQCAtNzk0NCw2ICs3OTUyLDEyIEBAIGVudW0g
ewogICovCiAKICNkZWZpbmUgU0hPVFBMVUdfQ1RMX0RESQkJCV9NTUlPKDB4YzQwMzApCisjZGVm
aW5lICAgVEdQX0RESUNfSFBEX0VOQUJMRQkJCSgxIDw8IDExKQorI2RlZmluZSAgIFRHUF9ERElD
X0hQRF9TVEFUVVNfTUFTSwkJKDMgPDwgOCkKKyNkZWZpbmUgICBUR1BfRERJQ19IUERfTk9fREVU
RUNUCQkoMCA8PCA4KQorI2RlZmluZSAgIFRHUF9ERElDX0hQRF9TSE9SVF9ERVRFQ1QJCSgxIDw8
IDgpCisjZGVmaW5lICAgVEdQX0RESUNfSFBEX0xPTkdfREVURUNUCQkoMiA8PCA4KQorI2RlZmlu
ZSAgIFRHUF9ERElDX0hQRF9TSE9SVF9MT05HX0RFVEVDVAkoMyA8PCA4KQogI2RlZmluZSAgIElD
UF9ERElCX0hQRF9FTkFCTEUJCQkoMSA8PCA3KQogI2RlZmluZSAgIElDUF9ERElCX0hQRF9TVEFU
VVNfTUFTSwkJKDMgPDwgNCkKICNkZWZpbmUgICBJQ1BfRERJQl9IUERfTk9fREVURUNUCQkoMCA8
PCA0KQpAQCAtODA2Nyw2ICs4MDgxLDE4IEBAIGVudW0gewogI2RlZmluZSAgIElDUF9UQ19IUERf
TE9OR19ERVRFQ1QodGNfcG9ydCkJKDIgPDwgKHRjX3BvcnQpICogNCkKICNkZWZpbmUgICBJQ1Bf
VENfSFBEX1NIT1JUX0RFVEVDVCh0Y19wb3J0KQkoMSA8PCAodGNfcG9ydCkgKiA0KQogCisjZGVm
aW5lIElDUF9ERElfSFBEX0VOQUJMRV9NQVNLCQkoSUNQX0RESUJfSFBEX0VOQUJMRSB8CVwKKwkJ
CQkJIElDUF9ERElBX0hQRF9FTkFCTEUpCisjZGVmaW5lIElDUF9UQ19IUERfRU5BQkxFX01BU0sJ
CShJQ1BfVENfSFBEX0VOQUJMRShQT1JUX1RDNCkgfCBcCisJCQkJCSBJQ1BfVENfSFBEX0VOQUJM
RShQT1JUX1RDMykgfCBcCisJCQkJCSBJQ1BfVENfSFBEX0VOQUJMRShQT1JUX1RDMikgfCBcCisJ
CQkJCSBJQ1BfVENfSFBEX0VOQUJMRShQT1JUX1RDMSkpCisjZGVmaW5lIFRHUF9ERElfSFBEX0VO
QUJMRV9NQVNLCQkoVEdQX0RESUNfSFBEX0VOQUJMRSB8CVwKKwkJCQkJIElDUF9ERElfSFBEX0VO
QUJMRV9NQVNLKQorI2RlZmluZSBUR1BfVENfSFBEX0VOQUJMRV9NQVNLCQkoSUNQX1RDX0hQRF9F
TkFCTEUoUE9SVF9UQzYpIHwgXAorCQkJCQkgSUNQX1RDX0hQRF9FTkFCTEUoUE9SVF9UQzUpIHwg
XAorCQkJCQkgSUNQX1RDX0hQRF9FTkFCTEVfTUFTSykKKwogI2RlZmluZSBfUENIX0RQTExfQSAg
ICAgICAgICAgICAgMHhjNjAxNAogI2RlZmluZSBfUENIX0RQTExfQiAgICAgICAgICAgICAgMHhj
NjAxOAogI2RlZmluZSBQQ0hfRFBMTChwbGwpIF9NTUlPKChwbGwpID09IDAgPyBfUENIX0RQTExf
QSA6IF9QQ0hfRFBMTF9CKQotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9pbnRlbC1nZng=

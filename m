Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7689C143107
	for <lists+intel-gfx@lfdr.de>; Mon, 20 Jan 2020 18:48:19 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D369C6EAB1;
	Mon, 20 Jan 2020 17:48:17 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 834286EAAC
 for <intel-gfx@lists.freedesktop.org>; Mon, 20 Jan 2020 17:48:15 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Jan 2020 09:48:14 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,342,1574150400"; d="scan'208";a="276008910"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by fmsmga001.fm.intel.com with SMTP; 20 Jan 2020 09:48:12 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Mon, 20 Jan 2020 19:48:12 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 20 Jan 2020 19:47:25 +0200
Message-Id: <20200120174728.21095-16-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200120174728.21095-1-ville.syrjala@linux.intel.com>
References: <20200120174728.21095-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 14/17] drm/i915: Convert bandwidth state to
 global state
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCk5v
dyB0aGF0IHdlIGhhdmUgdGhlIG1vcmUgZm9ybWFsIGdsb2JhbCBzdGF0ZSB0aGluZyBsZXQncwp1
c2UgaWYgZm9yIG1lbW9yeSBiYW5kd2lkdGggdHJhY2tpbmcuIE5vIHJlYWwgZGlmZmVyZW5jZQp0
byB0aGUgY3VycmVudCBwcml2YXRlIG9iamVjdCB1c2FnZSBzaW5jZSB3ZSBhbHJlYWR5CnRyaWVk
IHRvIGF2b2lkIHRha2luZyB0aGUgc2luZ2xlIHNlcmlhbGl6aW5nIGxvY2sgbmVlZGxlc3NseS4K
QnV0IHNpbmNlIHdlJ3JlIGdvaW5nIHRvIHJvbGwgdGhlIGdsb2JhbCBzdGF0ZSBvdXQgdG8gbW9y
ZQp0aGluZ3MgcHJvYmFibHkgYSBnb29kIGlkZWEgdG8gdW5pZnkgdGhlIGFwcHJvYWNoZXMgYSBi
aXQuCgpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXgu
aW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYncuYyAg
ICAgIHwgMzEgKysrKysrKysrLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfYncuaCAgICAgIHwgIDQgKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXkuYyB8ICAyIC0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5o
ICAgICAgICAgICAgICB8ICAyICstCiA0IGZpbGVzIGNoYW5nZWQsIDE3IGluc2VydGlvbnMoKyks
IDIyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfYncuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYncuYwpp
bmRleCBiMjI4NjcxZDVhNWQuLjMxNmFiY2YzZTZhMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9idy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfYncuYwpAQCAtMzc0LDEwICszNzQsOSBAQCBzdGF0aWMgc3RydWN0IGludGVs
X2J3X3N0YXRlICoKIGludGVsX2F0b21pY19nZXRfYndfc3RhdGUoc3RydWN0IGludGVsX2F0b21p
Y19zdGF0ZSAqc3RhdGUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0g
dG9faTkxNShzdGF0ZS0+YmFzZS5kZXYpOwotCXN0cnVjdCBkcm1fcHJpdmF0ZV9zdGF0ZSAqYndf
c3RhdGU7CisJc3RydWN0IGludGVsX2dsb2JhbF9zdGF0ZSAqYndfc3RhdGU7CiAKLQlid19zdGF0
ZSA9IGRybV9hdG9taWNfZ2V0X3ByaXZhdGVfb2JqX3N0YXRlKCZzdGF0ZS0+YmFzZSwKLQkJCQkJ
CSAgICAmZGV2X3ByaXYtPmJ3X29iaik7CisJYndfc3RhdGUgPSBpbnRlbF9hdG9taWNfZ2V0X2ds
b2JhbF9vYmpfc3RhdGUoc3RhdGUsICZkZXZfcHJpdi0+Yndfb2JqKTsKIAlpZiAoSVNfRVJSKGJ3
X3N0YXRlKSkKIAkJcmV0dXJuIEVSUl9DQVNUKGJ3X3N0YXRlKTsKIApAQCAtMzkyLDcgKzM5MSw3
IEBAIGludCBpbnRlbF9id19hdG9taWNfY2hlY2soc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAq
c3RhdGUpCiAJdW5zaWduZWQgaW50IGRhdGFfcmF0ZSwgbWF4X2RhdGFfcmF0ZTsKIAl1bnNpZ25l
ZCBpbnQgbnVtX2FjdGl2ZV9wbGFuZXM7CiAJc3RydWN0IGludGVsX2NydGMgKmNydGM7Ci0JaW50
IGk7CisJaW50IGksIHJldDsKIAogCS8qIEZJWE1FIGVhcmxpZXIgZ2VucyBuZWVkIHNvbWUgY2hl
Y2tzIHRvbyAqLwogCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwgMTEpCkBAIC00MzMsNiArNDMy
LDEwIEBAIGludCBpbnRlbF9id19hdG9taWNfY2hlY2soc3RydWN0IGludGVsX2F0b21pY19zdGF0
ZSAqc3RhdGUpCiAJaWYgKCFid19zdGF0ZSkKIAkJcmV0dXJuIDA7CiAKKwlyZXQgPSBpbnRlbF9h
dG9taWNfbG9ja19nbG9iYWxfc3RhdGUoJmJ3X3N0YXRlLT5iYXNlKTsKKwlpZiAocmV0KQorCQly
ZXR1cm4gcmV0OworCiAJZGF0YV9yYXRlID0gaW50ZWxfYndfZGF0YV9yYXRlKGRldl9wcml2LCBi
d19zdGF0ZSk7CiAJbnVtX2FjdGl2ZV9wbGFuZXMgPSBpbnRlbF9id19udW1fYWN0aXZlX3BsYW5l
cyhkZXZfcHJpdiwgYndfc3RhdGUpOwogCkBAIC00NDksNyArNDUyLDggQEAgaW50IGludGVsX2J3
X2F0b21pY19jaGVjayhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIAlyZXR1cm4g
MDsKIH0KIAotc3RhdGljIHN0cnVjdCBkcm1fcHJpdmF0ZV9zdGF0ZSAqaW50ZWxfYndfZHVwbGlj
YXRlX3N0YXRlKHN0cnVjdCBkcm1fcHJpdmF0ZV9vYmogKm9iaikKK3N0YXRpYyBzdHJ1Y3QgaW50
ZWxfZ2xvYmFsX3N0YXRlICoKK2ludGVsX2J3X2R1cGxpY2F0ZV9zdGF0ZShzdHJ1Y3QgaW50ZWxf
Z2xvYmFsX29iaiAqb2JqKQogewogCXN0cnVjdCBpbnRlbF9id19zdGF0ZSAqc3RhdGU7CiAKQEAg
LTQ1NywxOCArNDYxLDE2IEBAIHN0YXRpYyBzdHJ1Y3QgZHJtX3ByaXZhdGVfc3RhdGUgKmludGVs
X2J3X2R1cGxpY2F0ZV9zdGF0ZShzdHJ1Y3QgZHJtX3ByaXZhdGVfb2JqCiAJaWYgKCFzdGF0ZSkK
IAkJcmV0dXJuIE5VTEw7CiAKLQlfX2RybV9hdG9taWNfaGVscGVyX3ByaXZhdGVfb2JqX2R1cGxp
Y2F0ZV9zdGF0ZShvYmosICZzdGF0ZS0+YmFzZSk7Ci0KIAlyZXR1cm4gJnN0YXRlLT5iYXNlOwog
fQogCi1zdGF0aWMgdm9pZCBpbnRlbF9id19kZXN0cm95X3N0YXRlKHN0cnVjdCBkcm1fcHJpdmF0
ZV9vYmogKm9iaiwKLQkJCQkgICBzdHJ1Y3QgZHJtX3ByaXZhdGVfc3RhdGUgKnN0YXRlKQorc3Rh
dGljIHZvaWQgaW50ZWxfYndfZGVzdHJveV9zdGF0ZShzdHJ1Y3QgaW50ZWxfZ2xvYmFsX29iaiAq
b2JqLAorCQkJCSAgIHN0cnVjdCBpbnRlbF9nbG9iYWxfc3RhdGUgKnN0YXRlKQogewogCWtmcmVl
KHN0YXRlKTsKIH0KIAotc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcHJpdmF0ZV9zdGF0ZV9mdW5j
cyBpbnRlbF9id19mdW5jcyA9IHsKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZ2xvYmFsX3N0
YXRlX2Z1bmNzIGludGVsX2J3X2Z1bmNzID0gewogCS5hdG9taWNfZHVwbGljYXRlX3N0YXRlID0g
aW50ZWxfYndfZHVwbGljYXRlX3N0YXRlLAogCS5hdG9taWNfZGVzdHJveV9zdGF0ZSA9IGludGVs
X2J3X2Rlc3Ryb3lfc3RhdGUsCiB9OwpAQCAtNDgxLDEzICs0ODMsOCBAQCBpbnQgaW50ZWxfYndf
aW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJaWYgKCFzdGF0ZSkKIAkJ
cmV0dXJuIC1FTk9NRU07CiAKLQlkcm1fYXRvbWljX3ByaXZhdGVfb2JqX2luaXQoJmRldl9wcml2
LT5kcm0sICZkZXZfcHJpdi0+Yndfb2JqLAotCQkJCSAgICAmc3RhdGUtPmJhc2UsICZpbnRlbF9i
d19mdW5jcyk7CisJaW50ZWxfYXRvbWljX2dsb2JhbF9vYmpfaW5pdChkZXZfcHJpdiwgJmRldl9w
cml2LT5id19vYmosCisJCQkJICAgICAmc3RhdGUtPmJhc2UsICZpbnRlbF9id19mdW5jcyk7CiAK
IAlyZXR1cm4gMDsKIH0KLQotdm9pZCBpbnRlbF9id19jbGVhbnVwKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdikKLXsKLQlkcm1fYXRvbWljX3ByaXZhdGVfb2JqX2ZpbmkoJmRldl9w
cml2LT5id19vYmopOwotfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9idy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9idy5oCmlu
ZGV4IDIwYjlhZDI0MTgwMi4uYThhYTc2MjRjNWFhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2J3LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9idy5oCkBAIC05LDEzICs5LDE0IEBACiAjaW5jbHVkZSA8ZHJtL2RybV9hdG9t
aWMuaD4KIAogI2luY2x1ZGUgImludGVsX2Rpc3BsYXkuaCIKKyNpbmNsdWRlICJpbnRlbF9nbG9i
YWxfc3RhdGUuaCIKIAogc3RydWN0IGRybV9pOTE1X3ByaXZhdGU7CiBzdHJ1Y3QgaW50ZWxfYXRv
bWljX3N0YXRlOwogc3RydWN0IGludGVsX2NydGNfc3RhdGU7CiAKIHN0cnVjdCBpbnRlbF9id19z
dGF0ZSB7Ci0Jc3RydWN0IGRybV9wcml2YXRlX3N0YXRlIGJhc2U7CisJc3RydWN0IGludGVsX2ds
b2JhbF9zdGF0ZSBiYXNlOwogCiAJdW5zaWduZWQgaW50IGRhdGFfcmF0ZVtJOTE1X01BWF9QSVBF
U107CiAJdTggbnVtX2FjdGl2ZV9wbGFuZXNbSTkxNV9NQVhfUElQRVNdOwpAQCAtMjUsNyArMjYs
NiBAQCBzdHJ1Y3QgaW50ZWxfYndfc3RhdGUgewogCiB2b2lkIGludGVsX2J3X2luaXRfaHcoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIGludCBpbnRlbF9id19pbml0KHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7Ci12b2lkIGludGVsX2J3X2NsZWFudXAoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIGludCBpbnRlbF9id19hdG9taWNfY2hl
Y2soc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpOwogdm9pZCBpbnRlbF9id19jcnRj
X3VwZGF0ZShzdHJ1Y3QgaW50ZWxfYndfc3RhdGUgKmJ3X3N0YXRlLAogCQkJICBjb25zdCBzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4IDcwZWI2ZWFhYjA5NS4uZjUzOTZjNWMwMGM2
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXku
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAt
MTg1NjYsOCArMTg1NjYsNiBAQCB2b2lkIGludGVsX21vZGVzZXRfZHJpdmVyX3JlbW92ZShzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAogCWludGVsX2dtYnVzX3RlYXJkb3duKGk5MTUp
OwogCi0JaW50ZWxfYndfY2xlYW51cChpOTE1KTsKLQogCWRlc3Ryb3lfd29ya3F1ZXVlKGk5MTUt
PmZsaXBfd3EpOwogCWRlc3Ryb3lfd29ya3F1ZXVlKGk5MTUtPm1vZGVzZXRfd3EpOwogCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kcnYuaAppbmRleCBiNTU4ZTY4YjRkYmQuLjYzY2RhODlhNGU2MiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5oCkBAIC0xMjUxLDcgKzEyNTEsNyBAQCBzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSB7CiAJCXU4IG51bV9wbGFuZXM7CiAJfSBtYXhfYndbNl07CiAKLQlzdHJ1Y3QgZHJt
X3ByaXZhdGVfb2JqIGJ3X29iajsKKwlzdHJ1Y3QgaW50ZWxfZ2xvYmFsX29iaiBid19vYmo7CiAK
IAlzdHJ1Y3QgaW50ZWxfcnVudGltZV9wbSBydW50aW1lX3BtOwogCi0tIAoyLjI0LjEKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWls
aW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8DC8F95BF8
	for <lists+intel-gfx@lfdr.de>; Tue, 20 Aug 2019 12:05:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8D8F56E0F8;
	Tue, 20 Aug 2019 10:05:31 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 597C86E0F8
 for <intel-gfx@lists.freedesktop.org>; Tue, 20 Aug 2019 10:05:30 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 18199729-1500050 for multiple; Tue, 20 Aug 2019 11:05:01 +0100
MIME-Version: 1.0
To: Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <20190820081951.25053-1-daniel.vetter@ffwll.ch>
References: <20190820081951.25053-1-daniel.vetter@ffwll.ch>
Message-ID: <156629549890.1374.6035271324867139754@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Tue, 20 Aug 2019 11:04:58 +0100
Subject: Re: [Intel-gfx] [PATCH 1/3] drm/i915: Switch obj->mm.lock lockdep
 annotations on its head
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@ffwll.ch>, LKML <linux-kernel@vger.kernel.org>,
 Daniel Vetter <daniel.vetter@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBEYW5pZWwgVmV0dGVyICgyMDE5LTA4LTIwIDA5OjE5OjQ5KQo+ICsjaW5jbHVkZSA8
bGludXgvc2NoZWQvbW0uaD4KPiArCj4gICNpbmNsdWRlICJkaXNwbGF5L2ludGVsX2Zyb250YnVm
ZmVyLmgiCj4gICNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgo+ICAjaW5jbHVkZSAiaTkxNV9kcnYu
aCIKPiBAQCAtNTEsNiArNTMsMTUgQEAgdm9pZCBpOTE1X2dlbV9vYmplY3RfaW5pdChzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAo+ICB7Cj4gICAgICAgICBtdXRleF9pbml0KCZvYmot
Pm1tLmxvY2spOwo+ICAKPiArICAgICAgIGlmIChJU19FTkFCTEVEKENPTkZJR19MT0NLREVQKSkg
ewo+ICsgICAgICAgICAgICAgICBtdXRleF9sb2NrX25lc3RlZCgmb2JqLT5tbS5sb2NrLCBJOTE1
X01NX0dFVF9QQUdFUyk7Cj4gKyAgICAgICAgICAgICAgIGZzX3JlY2xhaW1fYWNxdWlyZShHRlBf
S0VSTkVMKTsKPiArICAgICAgICAgICAgICAgbWlnaHRfbG9jaygmb2JqLT5tbS5sb2NrKTsKPiAr
ICAgICAgICAgICAgICAgZnNfcmVjbGFpbV9yZWxlYXNlKEdGUF9LRVJORUwpOwo+ICsgICAgICAg
ICAgICAgICBtdXRleF91bmxvY2soJm9iai0+bW0ubG9jayk7Cj4gKyAgICAgICB9Cj4gKwo+ICsK
Ckl0J3MgZ29vZCwgYnV0IG5vdGhpbmcgaXMgd29ydGggYW5nZXJpbmcgY2hlY2twYXRjaCBvdmVy
IGFuIGV4dHJhICdcbicuCgo+ICAgICAgICAgc3Bpbl9sb2NrX2luaXQoJm9iai0+dm1hLmxvY2sp
Owo+ICAgICAgICAgSU5JVF9MSVNUX0hFQUQoJm9iai0+dm1hLmxpc3QpOwo+ICAKPiBAQCAtMTc2
LDcgKzE4Nyw3IEBAIHN0YXRpYyB2b2lkIF9faTkxNV9nZW1fZnJlZV9vYmplY3RzKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1LAo+ICAgICAgICAgICAgICAgICBHRU1fQlVHX09OKCFsaXN0
X2VtcHR5KCZvYmotPmx1dF9saXN0KSk7Cj4gIAo+ICAgICAgICAgICAgICAgICBhdG9taWNfc2V0
KCZvYmotPm1tLnBhZ2VzX3Bpbl9jb3VudCwgMCk7Cj4gLSAgICAgICAgICAgICAgIF9faTkxNV9n
ZW1fb2JqZWN0X3B1dF9wYWdlcyhvYmosIEk5MTVfTU1fTk9STUFMKTsKPiArICAgICAgICAgICAg
ICAgX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKG9iaik7Cj4gICAgICAgICAgICAgICAgIEdF
TV9CVUdfT04oaTkxNV9nZW1fb2JqZWN0X2hhc19wYWdlcyhvYmopKTsKPiAgICAgICAgICAgICAg
ICAgYml0bWFwX2ZyZWUob2JqLT5iaXRfMTcpOwo+ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX29iamVjdC5oCj4gaW5kZXggNWVmYjk5MzZlMDViLi5hMGIxZmE4YTMyMjQg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5o
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oCj4gQEAg
LTI4MSwxMSArMjgxLDIxIEBAIGk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdlcyhzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX29iamVjdCAqb2JqKQo+ICAKPiAgZW51bSBpOTE1X21tX3N1YmNsYXNzIHsgLyog
bG9ja2RlcCBzdWJjbGFzcyBmb3Igb2JqLT5tbS5sb2NrL3N0cnVjdF9tdXRleCAqLwo+ICAgICAg
ICAgSTkxNV9NTV9OT1JNQUwgPSAwLAo+IC0gICAgICAgSTkxNV9NTV9TSFJJTktFUiAvKiBjYWxs
ZWQgInJlY3Vyc2l2ZWx5IiBmcm9tIGRpcmVjdC1yZWNsYWltLWVzcXVlICovCj4gKyAgICAgICAv
Kgo+ICsgICAgICAgICogT25seSB1c2VkIGJ5IHN0cnVjdF9tdXRleCwgd2hlbiBjYWxsZWQgInJl
Y3Vyc2l2ZWx5IiBmcm9tCj4gKyAgICAgICAgKiBkaXJlY3QtcmVjbGFpbS1lc3F1ZS4gU2FmZSBi
ZWNhdXNlIHRoZXJlIGlzIG9ubHkgZXZlcnkgb25lCj4gKyAgICAgICAgKiBzdHJ1Y3RfbXV0ZXgg
aW4gdGhlIGVudGlyZSBzeXN0ZW0uICovCj4gKyAgICAgICBJOTE1X01NX1NIUklOS0VSID0gMSwK
Ck1NX1NIUklOS0VSIGlzIG5vIGxvbmdlciBwYXJ0IG9mIHRoaXMgc3ViY2xhc3MsIGFuZCBJIGlu
dGVuZCB0byByZW1vdmUKc2hvcnRseS4KCj4gKyAgICAgICAvKgo+ICsgICAgICAgICogVXNlZCBm
b3Igb2JqLT5tbS5sb2NrIHdoZW4gYWxsb2NhdGluZyBwYWdlcy4gU2FmZSBiZWNhdXNlIHRoZSBv
YmplY3QKPiArICAgICAgICAqIGlzbid0IHlldCBvbiBhbnkgTFJVLCBhbmQgdGhlcmVmb3JlIHRo
ZSBzaHJpbmtlciBjYW4ndCBkZWFkbG9jayBvbgo+ICsgICAgICAgICogaXQuIEFzIHNvb24gYXMg
dGhlIG9iamVjdCBoYXMgcGFnZXMsIG9iai0+bW0ubG9jayBuZXN0cyB3aXRoaW4KPiArICAgICAg
ICAqIGZzX3JlY2xhaW0uCj4gKyAgICAgICAgKi8KPiArICAgICAgIEk5MTVfTU1fR0VUX1BBR0VT
ID0gMSwKClNvIEkgd2FzIHRoaW5raW5nIHRoYXQgdGhpcyBjYW4ganVzdCBiZWNvbWUgU0lOR0xF
X0RFUFRIX05FU1RJTkcsIGJ1dAp0aGVuIHJlbWVtYmVyZWQgdGhhdCBJIHdhbnQgYSBwcm94eSBv
YmplY3Qgd2l0aCBpdHMgb3duIHJlY3Vyc2lvbiBpbnNpZGUKZ2V0LXBhZ2VzLgoKPiAgfTsKPiAg
Cj4gLWludCBfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3QgKm9iaiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW0gaTkxNV9t
bV9zdWJjbGFzcyBzdWJjbGFzcyk7Cj4gK2ludCBfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMo
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7Cj4gIHZvaWQgaTkxNV9nZW1fb2JqZWN0
X3RydW5jYXRlKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopOwo+ICB2b2lkIGk5MTVf
Z2VtX29iamVjdF93cml0ZWJhY2soc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7Cj4g
IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0
X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVz
LmgKPiBpbmRleCBlZGUwZWI0MjE4YTguLjdiN2NmNzExYTIxYSAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVzLmgKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVzLmgKPiBAQCAtMTU2LDcg
KzE1NiwxMSBAQCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCB7Cj4gICAgICAgICB1bnNpZ25l
ZCBpbnQgcGluX2dsb2JhbDsKPiAgCj4gICAgICAgICBzdHJ1Y3Qgewo+IC0gICAgICAgICAgICAg
ICBzdHJ1Y3QgbXV0ZXggbG9jazsgLyogcHJvdGVjdHMgdGhlIHBhZ2VzIGFuZCB0aGVpciB1c2Ug
Ki8KPiArICAgICAgICAgICAgICAgLyoKPiArICAgICAgICAgICAgICAgICogUHJvdGVjdHMgdGhl
IHBhZ2VzIGFuZCB0aGVpciB1c2UuIERvIG5vdCB1c2UgZGlyZWN0bHksIGJ1dAo+ICsgICAgICAg
ICAgICAgICAgKiBpbnN0ZWFkIGdvIHRocm91Z2ggdGhlIHBpbi91bnBpbiBpbnRlcmZhY2VzLgo+
ICsgICAgICAgICAgICAgICAgKi8KPiArICAgICAgICAgICAgICAgc3RydWN0IG11dGV4IGxvY2s7
CgpJIGFtIHJlYWxseSB0ZW1wdGVkIHRvIHJlbmFtZSB0aGlzIHBpbl9tdXRleC4KCj4gICAgICAg
ICAgICAgICAgIGF0b21pY190IHBhZ2VzX3Bpbl9jb3VudDsKCj4gIAo+ICAgICAgICAgICAgICAg
ICBzdHJ1Y3Qgc2dfdGFibGUgKnBhZ2VzOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fcGFnZXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9wYWdlcy5jCj4gaW5kZXggMThmMGNlMDEzNWMxLi4yMDI1MjZlODkxMGYgMTAwNjQ0Cj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BhZ2VzLmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGFnZXMuYwo+IEBAIC0xMDEsNyArMTAx
LDcgQEAgaW50IF9faTkxNV9nZW1fb2JqZWN0X2dldF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2Vt
X29iamVjdCAqb2JqKQo+ICB7Cj4gICAgICAgICBpbnQgZXJyOwo+ICAKPiAtICAgICAgIGVyciA9
IG11dGV4X2xvY2tfaW50ZXJydXB0aWJsZSgmb2JqLT5tbS5sb2NrKTsKPiArICAgICAgIGVyciA9
IG11dGV4X2xvY2tfaW50ZXJydXB0aWJsZV9uZXN0ZWQoJm9iai0+bW0ubG9jaywgSTkxNV9NTV9H
RVRfUEFHRVMpOwo+ICAgICAgICAgaWYgKGVycikKPiAgICAgICAgICAgICAgICAgcmV0dXJuIGVy
cjsKCj4gQEAgLTI4NSw3ICsyODQsNyBAQCB2b2lkICppOTE1X2dlbV9vYmplY3RfcGluX21hcChz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAo+ICAgICAgICAgaWYgKHVubGlrZWx5KCFp
OTE1X2dlbV9vYmplY3RfaGFzX3N0cnVjdF9wYWdlKG9iaikpKQo+ICAgICAgICAgICAgICAgICBy
ZXR1cm4gRVJSX1BUUigtRU5YSU8pOwo+ICAKPiAtICAgICAgIGVyciA9IG11dGV4X2xvY2tfaW50
ZXJydXB0aWJsZSgmb2JqLT5tbS5sb2NrKTsKPiArICAgICAgIGVyciA9IG11dGV4X2xvY2tfaW50
ZXJydXB0aWJsZV9uZXN0ZWQoJm9iai0+bW0ubG9jaywgSTkxNV9NTV9HRVRfUEFHRVMpOwo+ICAg
ICAgICAgaWYgKGVycikKPiAgICAgICAgICAgICAgICAgcmV0dXJuIEVSUl9QVFIoZXJyKTsKPiAg
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9waHlzLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGh5cy5jCj4gaW5kZXggNzY4MzU2
OTA4MTYwLi4yYWVhODk2MGYwZjEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX3BoeXMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9waHlzLmMKPiBAQCAtMTYzLDcgKzE2Myw3IEBAIGludCBpOTE1X2dlbV9vYmplY3RfYXR0
YWNoX3BoeXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwgaW50IGFsaWduKQo+ICAg
ICAgICAgaWYgKGVycikKPiAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjsKPiAgCj4gLSAgICAg
ICBtdXRleF9sb2NrKCZvYmotPm1tLmxvY2spOwo+ICsgICAgICAgbXV0ZXhfbG9ja19uZXN0ZWQo
Jm9iai0+bW0ubG9jaywgSTkxNV9NTV9HRVRfUEFHRVMpOwoKPiBAQCAtNTE0LDcgKzUxNCw3IEBA
IF9faTkxNV9nZW1fdXNlcnB0cl9nZXRfcGFnZXNfd29ya2VyKHN0cnVjdCB3b3JrX3N0cnVjdCAq
X3dvcmspCj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPiAgCj4gLSAgICAgICBtdXRl
eF9sb2NrKCZvYmotPm1tLmxvY2spOwo+ICsgICAgICAgbXV0ZXhfbG9ja19uZXN0ZWQoJm9iai0+
bW0ubG9jaywgSTkxNV9NTV9HRVRfUEFHRVMpOwo+ICAgICAgICAgaWYgKG9iai0+dXNlcnB0ci53
b3JrID09ICZ3b3JrLT53b3JrKSB7Cj4gICAgICAgICAgICAgICAgIHN0cnVjdCBzZ190YWJsZSAq
cGFnZXMgPSBFUlJfUFRSKHJldCk7Cj4gIAoKT2suIFRoYXQgc2hvdWxkIGJlIGFsbCBvZiB0aGUg
YWxsb2NhdG9ycy4KCkFuZCB0aGUgcHV0IGFyZSBzZWxmY2hlY2tpbmcuCgpUaGUgb25seSBjYXZl
YXQgSSBoYXZlIGlzIHRoYXQgR0VUX1BBR0VTIGlzIHNpbXBseSBhYm91dCB0aGUgcmVjdXJzaXZl
CmJlaGF2aW91ciBvZiBhbGxvY2F0aW5nIHBhZ2VzICh0byBhbGxvY2F0ZSBvbmUgc2V0IG9mIHBh
Z2VzIHdlIG1heSBoYXZlCnRvIGZyZWUgYW5vdGhlciksIGFuZCBnaXZpbmcgaXQgYSBkaXN0aW5j
dCBzdWJjbGFzcyB0cmlja3MgbWUsIGF0IGxlYXN0LAppbnRvIGNvbnNpZGVyaW5nIGl0IHRvIGJl
IGEgZGlzdGluY3QgbG9ja2NsYXNzLCBhbmQgc28gc3RhcnQgYXNzdW1pbmcgaXQKbmVlZHMgdG8g
YmUgdXNlZCBpbiBlLmcuIGk5MTVfZ2VtX21hZHZpc2VfaW9jdGwuCgpUaGF0J3MganVzdCBhIHBv
b3JseSBlZHVjYXRlZCB1c2VyIHByb2JsZW0gKHN1YmNsYXNzIHNob3VsZCBhbHdheXMgYmUKYWJv
dXQgcmVjdXJzaW9uIGxldmVscywgaWYgeW91IGhhdmUgZGlzdGluY3QgbG9ja2NsYXNzZXMsIG1h
a2UgdGhlbQpkaXN0aW5jdCEpIEhhbW1lciwgbWVldCBzY3Jldy4KClJldmlld2VkLWJ5OiBDaHJp
cyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLUNocmlzCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QK
SW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

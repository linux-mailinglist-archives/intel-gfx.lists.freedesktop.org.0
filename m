Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CA67C4BE01
	for <lists+intel-gfx@lfdr.de>; Wed, 19 Jun 2019 18:26:10 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0CF3E6E439;
	Wed, 19 Jun 2019 16:26:09 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5539D6E439
 for <intel-gfx@lists.freedesktop.org>; Wed, 19 Jun 2019 16:26:07 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 19 Jun 2019 09:26:06 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,392,1557212400"; d="scan'208";a="358242565"
Received: from yyosef-mobl.ger.corp.intel.com (HELO [10.252.23.42])
 ([10.252.23.42])
 by fmsmga005.fm.intel.com with ESMTP; 19 Jun 2019 09:26:05 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20190619153942.8518-1-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <c6d1b92e-45f6-99c1-932a-c1526b6a96e2@linux.intel.com>
Date: Wed, 19 Jun 2019 17:26:05 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.0
MIME-Version: 1.0
In-Reply-To: <20190619153942.8518-1-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH v2] drm/i915: Keep rings pinned while the
 context is active
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDE5LzA2LzIwMTkgMTY6MzksIENocmlzIFdpbHNvbiB3cm90ZToKPiBSZW1lbWJlciB0byBr
ZWVwIHRoZSByaW5ncyBwaW5uZWQgYXMgd2VsbCBhcyB0aGUgY29udGV4dCBpbWFnZSB1bnRpbCB0
aGUKPiBHUFUgaXMgbm8gbG9uZ2VyIGFjdGl2ZS4KPiAKPiB2MjogSW50cm9kdWNlIGEgcmluZy0+
cGluX2NvdW50IHByaW1hcmlseSB0byBoaWRlIHRoZQo+IG1vY2tfcmluZyB0aGF0IGRvZXNuJ3Qg
Zml0IGludG8gdGhlIG5vcm1hbCBHR1RUIHZtYSBwaWN0dXJlLgo+IAo+IEJ1Z3ppbGxhOiBodHRw
czovL2J1Z3MuZnJlZWRlc2t0b3Aub3JnL3Nob3dfYnVnLmNnaT9pZD0xMTA5NDYKPiBGaXhlczog
Y2U0NzZjODBiOGJmICgiZHJtL2k5MTU6IEtlZXAgY29udGV4dHMgcGlubmVkIHVudGlsIGFmdGVy
IHRoZSBuZXh0IGtlcm5lbCBjb250ZXh0IHN3aXRjaCIpCj4gU2lnbmVkLW9mZi1ieTogQ2hyaXMg
V2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Cj4gQ2M6IE1pa2EgS3VvcHBhbGEgPG1p
a2Eua3VvcHBhbGFAbGludXguaW50ZWwuY29tPgo+IENjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtv
LnVyc3VsaW5AaW50ZWwuY29tPgo+IC0tLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfY29udGV4dC5jICAgICAgfCAyNyArKysrKysrKysrKystLS0tLS0tCj4gICBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaCB8IDEyICsrKysrKysrKwo+ICAgZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgICAgICAgICAgfCAxMCArKy0tLS0tCj4g
ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMgICB8IDI4ICsrKysr
KysrKysrKystLS0tLS0tCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9tb2NrX2VuZ2luZS5j
ICAgICAgICB8ICAxICsKPiAgIDUgZmlsZXMgY2hhbmdlZCwgNTEgaW5zZXJ0aW9ucygrKSwgMjcg
ZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYwo+
IGluZGV4IDJjNDU0ZjIyN2MyZS4uMjMxMjA5MDFjNTVmIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2NvbnRleHQuYwo+IEBAIC0xMjYsNiArMTI2LDcgQEAgc3RhdGljIHZvaWQg
aW50ZWxfY29udGV4dF9yZXRpcmUoc3RydWN0IGk5MTVfYWN0aXZlICphY3RpdmUpCj4gICAJaWYg
KGNlLT5zdGF0ZSkKPiAgIAkJX19jb250ZXh0X3VucGluX3N0YXRlKGNlLT5zdGF0ZSk7Cj4gICAK
PiArCWludGVsX3JpbmdfdW5waW4oY2UtPnJpbmcpOwo+ICAgCWludGVsX2NvbnRleHRfcHV0KGNl
KTsKPiAgIH0KPiAgIAo+IEBAIC0xNjAsMjcgKzE2MSwzNSBAQCBpbnQgaW50ZWxfY29udGV4dF9h
Y3RpdmVfYWNxdWlyZShzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsIHVuc2lnbmVkIGxvbmcgZmxh
Z3MpCj4gICAKPiAgIAlpbnRlbF9jb250ZXh0X2dldChjZSk7Cj4gICAKPiArCWVyciA9IGludGVs
X3JpbmdfcGluKGNlLT5yaW5nKTsKPiArCWlmIChlcnIpCj4gKwkJZ290byBlcnJfcHV0Owo+ICsK
PiAgIAlpZiAoIWNlLT5zdGF0ZSkKPiAgIAkJcmV0dXJuIDA7Cj4gICAKPiAgIAllcnIgPSBfX2Nv
bnRleHRfcGluX3N0YXRlKGNlLT5zdGF0ZSwgZmxhZ3MpOwo+IC0JaWYgKGVycikgewo+IC0JCWk5
MTVfYWN0aXZlX2NhbmNlbCgmY2UtPmFjdGl2ZSk7Cj4gLQkJaW50ZWxfY29udGV4dF9wdXQoY2Up
Owo+IC0JCXJldHVybiBlcnI7Cj4gLQl9Cj4gKwlpZiAoZXJyKQo+ICsJCWdvdG8gZXJyX3Jpbmc7
Cj4gICAKPiAgIAkvKiBQcmVhbGxvY2F0ZSB0cmFja2luZyBub2RlcyAqLwo+ICAgCWlmICghaTkx
NV9nZW1fY29udGV4dF9pc19rZXJuZWwoY2UtPmdlbV9jb250ZXh0KSkgewo+ICAgCQllcnIgPSBp
OTE1X2FjdGl2ZV9hY3F1aXJlX3ByZWFsbG9jYXRlX2JhcnJpZXIoJmNlLT5hY3RpdmUsCj4gICAJ
CQkJCQkJICAgICAgY2UtPmVuZ2luZSk7Cj4gLQkJaWYgKGVycikgewo+IC0JCQlpOTE1X2FjdGl2
ZV9yZWxlYXNlKCZjZS0+YWN0aXZlKTsKPiAtCQkJcmV0dXJuIGVycjsKPiAtCQl9Cj4gKwkJaWYg
KGVycikKPiArCQkJZ290byBlcnJfc3RhdGU7Cj4gICAJfQo+ICAgCj4gICAJcmV0dXJuIDA7Cj4g
Kwo+ICtlcnJfc3RhdGU6Cj4gKwlfX2NvbnRleHRfdW5waW5fc3RhdGUoY2UtPnN0YXRlKTsKPiAr
ZXJyX3Jpbmc6Cj4gKwlpbnRlbF9yaW5nX3VucGluKGNlLT5yaW5nKTsKPiArZXJyX3B1dDoKPiAr
CWludGVsX2NvbnRleHRfcHV0KGNlKTsKPiArCWk5MTVfYWN0aXZlX2NhbmNlbCgmY2UtPmFjdGl2
ZSk7Cj4gKwlyZXR1cm4gZXJyOwo+ICAgfQo+ICAgCj4gICB2b2lkIGludGVsX2NvbnRleHRfYWN0
aXZlX3JlbGVhc2Uoc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCj4gaW5kZXggODY4YjIyMDIxNGY4Li5jYzZi
OGViMGNkYTAgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5n
aW5lX3R5cGVzLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVf
dHlwZXMuaAo+IEBAIC03MCw2ICs3MCwxOCBAQCBzdHJ1Y3QgaW50ZWxfcmluZyB7Cj4gICAJc3Ry
dWN0IGxpc3RfaGVhZCByZXF1ZXN0X2xpc3Q7Cj4gICAJc3RydWN0IGxpc3RfaGVhZCBhY3RpdmVf
bGluazsKPiAgIAo+ICsJLyoKPiArCSAqIEFzIHdlIGhhdmUgdHdvIHR5cGVzIG9mIHJpbmdzLCBv
bmUgZ2xvYmFsIHRvIHRoZSBlbmdpbmUgdXNlZAo+ICsJICogYnkgcmluZ2J1ZmZlciBzdWJtaXNz
aW9uIGFuZCB0aG9zZSB0aGF0IGFyZSBleGNsdXNpdmUgdG8gYQo+ICsJICogY29udGV4dCB1c2Vk
IGJ5IGV4ZWNsaXN0cywgd2UgaGF2ZSB0byBwbGF5IHNhZmUgYW5kIGFsbG93Cj4gKwkgKiBhdG9t
aWMgdXBkYXRlcyB0byB0aGUgcGluX2NvdW50LiBIb3dldmVyLCB0aGUgYWN0dWFsIHBpbm5pbmcK
PiArCSAqIG9mIHRoZSBjb250ZXh0IGlzIGVpdGhlciBkb25lIGR1cmluZyBpbml0aWFsaXNhdGlv
biBmb3IKPiArCSAqIHJpbmdidWZmZXIgc3VibWlzc2lvbiBvciBzZXJpYWxpc2VkIGFzIHBhcnQg
b2YgdGhlIGNvbnRleHQKPiArCSAqIHBpbm5pbmcgZm9yIGV4ZWNsaXN0cywgYW5kIHNvIHdlIGRv
IG5vdCBuZWVkIGEgbXV0ZXggb3Vyc2VsdmVzCj4gKwkgKiB0byAqIHNlcmlhbGlzZSBpbnRlbF9y
aW5nX3Bpbi9pbnRlbF9yaW5nX3VucGluLgo+ICsJICovCj4gKwlhdG9taWNfdCBwaW5fY291bnQ7
Cj4gKwo+ICAgCXUzMiBoZWFkOwo+ICAgCXUzMiB0YWlsOwo+ICAgCXUzMiBlbWl0Owo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCj4gaW5kZXggYjQyYjVmMTU4Mjk1Li44MmI3YWNlNjJk
OTcgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwo+IEBAIC0xNDE0LDYgKzE0
MTQsNyBAQCBzdGF0aWMgdm9pZCBleGVjbGlzdHNfY29udGV4dF9kZXN0cm95KHN0cnVjdCBrcmVm
ICprcmVmKQo+ICAgewo+ICAgCXN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSA9IGNvbnRhaW5lcl9v
ZihrcmVmLCB0eXBlb2YoKmNlKSwgcmVmKTsKPiAgIAo+ICsJR0VNX0JVR19PTighaTkxNV9hY3Rp
dmVfaXNfaWRsZSgmY2UtPmFjdGl2ZSkpOwo+ICAgCUdFTV9CVUdfT04oaW50ZWxfY29udGV4dF9p
c19waW5uZWQoY2UpKTsKPiAgIAo+ICAgCWlmIChjZS0+c3RhdGUpCj4gQEAgLTE0MjYsNyArMTQy
Nyw2IEBAIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19jb250ZXh0X3VucGluKHN0cnVjdCBpbnRlbF9j
b250ZXh0ICpjZSkKPiAgIHsKPiAgIAlpOTE1X2dlbV9jb250ZXh0X3VucGluX2h3X2lkKGNlLT5n
ZW1fY29udGV4dCk7Cj4gICAJaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChjZS0+c3RhdGUtPm9i
aik7Cj4gLQlpbnRlbF9yaW5nX3VucGluKGNlLT5yaW5nKTsKPiAgIH0KPiAgIAo+ICAgc3RhdGlj
IHZvaWQKPiBAQCAtMTQ3OCwxMyArMTQ3OCw5IEBAIF9fZXhlY2xpc3RzX2NvbnRleHRfcGluKHN0
cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKPiAgIAkJZ290byB1bnBpbl9hY3RpdmU7Cj4gICAJfQo+
ICAgCj4gLQlyZXQgPSBpbnRlbF9yaW5nX3BpbihjZS0+cmluZyk7Cj4gLQlpZiAocmV0KQo+IC0J
CWdvdG8gdW5waW5fbWFwOwo+IC0KPiAgIAlyZXQgPSBpOTE1X2dlbV9jb250ZXh0X3Bpbl9od19p
ZChjZS0+Z2VtX2NvbnRleHQpOwo+ICAgCWlmIChyZXQpCj4gLQkJZ290byB1bnBpbl9yaW5nOwo+
ICsJCWdvdG8gdW5waW5fbWFwOwo+ICAgCj4gICAJY2UtPmxyY19kZXNjID0gbHJjX2Rlc2NyaXB0
b3IoY2UsIGVuZ2luZSk7Cj4gICAJY2UtPmxyY19yZWdfc3RhdGUgPSB2YWRkciArIExSQ19TVEFU
RV9QTiAqIFBBR0VfU0laRTsKPiBAQCAtMTQ5Miw4ICsxNDg4LDYgQEAgX19leGVjbGlzdHNfY29u
dGV4dF9waW4oc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAo+ICAgCj4gICAJcmV0dXJuIDA7Cj4g
ICAKPiAtdW5waW5fcmluZzoKPiAtCWludGVsX3JpbmdfdW5waW4oY2UtPnJpbmcpOwo+ICAgdW5w
aW5fbWFwOgo+ICAgCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAoY2UtPnN0YXRlLT5vYmopOwo+
ICAgdW5waW5fYWN0aXZlOgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9yaW5nYnVmZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVm
ZmVyLmMKPiBpbmRleCBjNjAyM2JjOTQ1MmQuLjBkOGFhYWEwODljYyAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMKPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMKPiBAQCAtMTE0OSwxNiArMTE0OSwx
NiBAQCBpOTE1X2VtaXRfYmJfc3RhcnQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCj4gICBpbnQg
aW50ZWxfcmluZ19waW4oc3RydWN0IGludGVsX3JpbmcgKnJpbmcpCj4gICB7Cj4gICAJc3RydWN0
IGk5MTVfdm1hICp2bWEgPSByaW5nLT52bWE7Cj4gLQllbnVtIGk5MTVfbWFwX3R5cGUgbWFwID0g
aTkxNV9jb2hlcmVudF9tYXBfdHlwZSh2bWEtPnZtLT5pOTE1KTsKPiAgIAl1bnNpZ25lZCBpbnQg
ZmxhZ3M7Cj4gICAJdm9pZCAqYWRkcjsKPiAgIAlpbnQgcmV0Owo+ICAgCj4gLQlHRU1fQlVHX09O
KHJpbmctPnZhZGRyKTsKPiArCWlmIChhdG9taWNfZmV0Y2hfaW5jKCZyaW5nLT5waW5fY291bnQp
KQo+ICsJCXJldHVybiAwOwo+ICAgCj4gICAJcmV0ID0gaTkxNV90aW1lbGluZV9waW4ocmluZy0+
dGltZWxpbmUpOwo+ICAgCWlmIChyZXQpCj4gLQkJcmV0dXJuIHJldDsKPiArCQlnb3RvIGVycl91
bnBpbjsKPiAgIAo+ICAgCWZsYWdzID0gUElOX0dMT0JBTDsKPiAgIAo+IEBAIC0xMTcyLDI2ICsx
MTcyLDMxIEBAIGludCBpbnRlbF9yaW5nX3BpbihzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKPiAg
IAo+ICAgCXJldCA9IGk5MTVfdm1hX3Bpbih2bWEsIDAsIDAsIGZsYWdzKTsKPiAgIAlpZiAodW5s
aWtlbHkocmV0KSkKPiAtCQlnb3RvIHVucGluX3RpbWVsaW5lOwo+ICsJCWdvdG8gZXJyX3RpbWVs
aW5lOwo+ICAgCj4gICAJaWYgKGk5MTVfdm1hX2lzX21hcF9hbmRfZmVuY2VhYmxlKHZtYSkpCj4g
ICAJCWFkZHIgPSAodm9pZCBfX2ZvcmNlICopaTkxNV92bWFfcGluX2lvbWFwKHZtYSk7Cj4gICAJ
ZWxzZQo+IC0JCWFkZHIgPSBpOTE1X2dlbV9vYmplY3RfcGluX21hcCh2bWEtPm9iaiwgbWFwKTsK
PiArCQlhZGRyID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9tYXAodm1hLT5vYmosCj4gKwkJCQkJICAg
ICAgIGk5MTVfY29oZXJlbnRfbWFwX3R5cGUodm1hLT52bS0+aTkxNSkpOwo+ICAgCWlmIChJU19F
UlIoYWRkcikpIHsKPiAgIAkJcmV0ID0gUFRSX0VSUihhZGRyKTsKPiAtCQlnb3RvIHVucGluX3Jp
bmc7Cj4gKwkJZ290byBlcnJfcmluZzsKPiAgIAl9Cj4gICAKPiAgIAl2bWEtPm9iai0+cGluX2ds
b2JhbCsrOwo+ICAgCj4gKwlHRU1fQlVHX09OKHJpbmctPnZhZGRyKTsKPiAgIAlyaW5nLT52YWRk
ciA9IGFkZHI7Cj4gKwo+ICAgCXJldHVybiAwOwo+ICAgCj4gLXVucGluX3Jpbmc6Cj4gK2Vycl9y
aW5nOgo+ICAgCWk5MTVfdm1hX3VucGluKHZtYSk7Cj4gLXVucGluX3RpbWVsaW5lOgo+ICtlcnJf
dGltZWxpbmU6Cj4gICAJaTkxNV90aW1lbGluZV91bnBpbihyaW5nLT50aW1lbGluZSk7Cj4gK2Vy
cl91bnBpbjoKPiArCWF0b21pY19kZWMoJnJpbmctPnBpbl9jb3VudCk7Cj4gICAJcmV0dXJuIHJl
dDsKPiAgIH0KPiAgIAo+IEBAIC0xMjA3LDE2ICsxMjEyLDE5IEBAIHZvaWQgaW50ZWxfcmluZ19y
ZXNldChzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZywgdTMyIHRhaWwpCj4gICAKPiAgIHZvaWQgaW50
ZWxfcmluZ191bnBpbihzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKPiAgIHsKPiAtCUdFTV9CVUdf
T04oIXJpbmctPnZtYSk7Cj4gLQlHRU1fQlVHX09OKCFyaW5nLT52YWRkcik7Cj4gKwlpZiAoIWF0
b21pY19kZWNfYW5kX3Rlc3QoJnJpbmctPnBpbl9jb3VudCkpCj4gKwkJcmV0dXJuOwo+ICAgCj4g
ICAJLyogRGlzY2FyZCBhbnkgdW51c2VkIGJ5dGVzIGJleW9uZCB0aGF0IHN1Ym1pdHRlZCB0byBo
dy4gKi8KPiAgIAlpbnRlbF9yaW5nX3Jlc2V0KHJpbmcsIHJpbmctPnRhaWwpOwo+ICAgCj4gKwlH
RU1fQlVHX09OKCFyaW5nLT52bWEpOwo+ICAgCWlmIChpOTE1X3ZtYV9pc19tYXBfYW5kX2ZlbmNl
YWJsZShyaW5nLT52bWEpKQo+ICAgCQlpOTE1X3ZtYV91bnBpbl9pb21hcChyaW5nLT52bWEpOwo+
ICAgCWVsc2UKPiAgIAkJaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChyaW5nLT52bWEtPm9iaik7
Cj4gKwo+ICsJR0VNX0JVR19PTighcmluZy0+dmFkZHIpOwo+ICAgCXJpbmctPnZhZGRyID0gTlVM
TDsKPiAgIAo+ICAgCXJpbmctPnZtYS0+b2JqLT5waW5fZ2xvYmFsLS07Cj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9tb2NrX2VuZ2luZS5jCj4gaW5kZXggMDg2ODAxYjUxNDQxLi40ODZjNjk1M2RjYjEg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvbW9ja19lbmdpbmUuYwo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMKPiBAQCAtNjYsNiArNjYs
NyBAQCBzdGF0aWMgc3RydWN0IGludGVsX3JpbmcgKm1vY2tfcmluZyhzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUpCj4gICAJcmluZy0+YmFzZS5lZmZlY3RpdmVfc2l6ZSA9IHN6Owo+ICAg
CXJpbmctPmJhc2UudmFkZHIgPSAodm9pZCAqKShyaW5nICsgMSk7Cj4gICAJcmluZy0+YmFzZS50
aW1lbGluZSA9ICZyaW5nLT50aW1lbGluZTsKPiArCWF0b21pY19zZXQoJnJpbmctPmJhc2UucGlu
X2NvdW50LCAxKTsKPiAgIAo+ICAgCUlOSVRfTElTVF9IRUFEKCZyaW5nLT5iYXNlLnJlcXVlc3Rf
bGlzdCk7Cj4gICAJaW50ZWxfcmluZ191cGRhdGVfc3BhY2UoJnJpbmctPmJhc2UpOwo+IAoKUmV2
aWV3ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+CgpSZWdh
cmRzLAoKVHZydGtvCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9y
ZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdm
eA==

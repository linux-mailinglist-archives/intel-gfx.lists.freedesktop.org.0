Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 058E413760E
	for <lists+intel-gfx@lfdr.de>; Fri, 10 Jan 2020 19:32:47 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 627CE6EA85;
	Fri, 10 Jan 2020 18:32:45 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 960DE6EA86
 for <intel-gfx@lists.freedesktop.org>; Fri, 10 Jan 2020 18:32:43 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Jan 2020 10:32:43 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,418,1571727600"; d="scan'208";a="238382703"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga002.jf.intel.com with SMTP; 10 Jan 2020 10:32:39 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 10 Jan 2020 20:32:38 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 10 Jan 2020 20:32:26 +0200
Message-Id: <20200110183228.8199-4-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200110183228.8199-1-ville.syrjala@linux.intel.com>
References: <20200110183228.8199-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 4/6] drm/i915: s/intel_state/state/ in
 intel_{prepare, cleanup}_plane_fb()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkRy
b3AgdGhlIHJlZHVuZGFudCBpbnRlbF8gcHJlZml4IGZyb20gb3VyIGF0b21pYyBzdGF0ZSB2YXJp
YWJsZS4KClNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51
eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5LmMgfCAyMiArKysrKysrKysrLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDExIGluc2Vy
dGlvbnMoKyksIDExIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggMGRmMDcxOWIwYWMzLi4yN2I0MzgyMjM0NGIgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC0xNTc1NSwx
OCArMTU3NTUsMTggQEAgaW50ZWxfcHJlcGFyZV9wbGFuZV9mYihzdHJ1Y3QgZHJtX3BsYW5lICpf
cGxhbmUsCiAJc3RydWN0IGludGVsX3BsYW5lICpwbGFuZSA9IHRvX2ludGVsX3BsYW5lKF9wbGFu
ZSk7CiAJc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpuZXdfcGxhbmVfc3RhdGUgPQogCQl0b19p
bnRlbF9wbGFuZV9zdGF0ZShfbmV3X3BsYW5lX3N0YXRlKTsKLQlzdHJ1Y3QgaW50ZWxfYXRvbWlj
X3N0YXRlICppbnRlbF9zdGF0ZSA9CisJc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUg
PQogCQl0b19pbnRlbF9hdG9taWNfc3RhdGUobmV3X3BsYW5lX3N0YXRlLT51YXBpLnN0YXRlKTsK
IAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHBsYW5lLT5iYXNl
LmRldik7CiAJY29uc3Qgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpvbGRfcGxhbmVfc3RhdGUg
PQotCQlpbnRlbF9hdG9taWNfZ2V0X29sZF9wbGFuZV9zdGF0ZShpbnRlbF9zdGF0ZSwgcGxhbmUp
OworCQlpbnRlbF9hdG9taWNfZ2V0X29sZF9wbGFuZV9zdGF0ZShzdGF0ZSwgcGxhbmUpOwogCXN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmogPSBpbnRlbF9mYl9vYmoobmV3X3BsYW5lX3N0
YXRlLT5ody5mYik7CiAJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9sZF9vYmogPSBpbnRl
bF9mYl9vYmoob2xkX3BsYW5lX3N0YXRlLT5ody5mYik7CiAJaW50IHJldDsKIAogCWlmIChvbGRf
b2JqKSB7CiAJCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlID0KLQkJ
CWludGVsX2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUoaW50ZWxfc3RhdGUsCisJCQlpbnRlbF9h
dG9taWNfZ2V0X25ld19jcnRjX3N0YXRlKHN0YXRlLAogCQkJCQkJCXRvX2ludGVsX2NydGMob2xk
X3BsYW5lX3N0YXRlLT5ody5jcnRjKSk7CiAKIAkJLyogQmlnIEhhbW1lciwgd2UgYWxzbyBuZWVk
IHRvIGVuc3VyZSB0aGF0IGFueSBwZW5kaW5nCkBAIC0xNTc4MSw3ICsxNTc4MSw3IEBAIGludGVs
X3ByZXBhcmVfcGxhbmVfZmIoc3RydWN0IGRybV9wbGFuZSAqX3BsYW5lLAogCQkgKiBjYW4gc2Fm
ZWx5IGNvbnRpbnVlLgogCQkgKi8KIAkJaWYgKG5lZWRzX21vZGVzZXQoY3J0Y19zdGF0ZSkpIHsK
LQkJCXJldCA9IGk5MTVfc3dfZmVuY2VfYXdhaXRfcmVzZXJ2YXRpb24oJmludGVsX3N0YXRlLT5j
b21taXRfcmVhZHksCisJCQlyZXQgPSBpOTE1X3N3X2ZlbmNlX2F3YWl0X3Jlc2VydmF0aW9uKCZz
dGF0ZS0+Y29tbWl0X3JlYWR5LAogCQkJCQkJCSAgICAgIG9sZF9vYmotPmJhc2UucmVzdiwgTlVM
TCwKIAkJCQkJCQkgICAgICBmYWxzZSwgMCwKIAkJCQkJCQkgICAgICBHRlBfS0VSTkVMKTsKQEAg
LTE1NzkxLDcgKzE1NzkxLDcgQEAgaW50ZWxfcHJlcGFyZV9wbGFuZV9mYihzdHJ1Y3QgZHJtX3Bs
YW5lICpfcGxhbmUsCiAJfQogCiAJaWYgKG5ld19wbGFuZV9zdGF0ZS0+dWFwaS5mZW5jZSkgeyAv
KiBleHBsaWNpdCBmZW5jaW5nICovCi0JCXJldCA9IGk5MTVfc3dfZmVuY2VfYXdhaXRfZG1hX2Zl
bmNlKCZpbnRlbF9zdGF0ZS0+Y29tbWl0X3JlYWR5LAorCQlyZXQgPSBpOTE1X3N3X2ZlbmNlX2F3
YWl0X2RtYV9mZW5jZSgmc3RhdGUtPmNvbW1pdF9yZWFkeSwKIAkJCQkJCSAgICBuZXdfcGxhbmVf
c3RhdGUtPnVhcGkuZmVuY2UsCiAJCQkJCQkgICAgSTkxNV9GRU5DRV9USU1FT1VULAogCQkJCQkJ
ICAgIEdGUF9LRVJORUwpOwpAQCAtMTU4MTgsNyArMTU4MTgsNyBAQCBpbnRlbF9wcmVwYXJlX3Bs
YW5lX2ZiKHN0cnVjdCBkcm1fcGxhbmUgKl9wbGFuZSwKIAlpZiAoIW5ld19wbGFuZV9zdGF0ZS0+
dWFwaS5mZW5jZSkgeyAvKiBpbXBsaWNpdCBmZW5jaW5nICovCiAJCXN0cnVjdCBkbWFfZmVuY2Ug
KmZlbmNlOwogCi0JCXJldCA9IGk5MTVfc3dfZmVuY2VfYXdhaXRfcmVzZXJ2YXRpb24oJmludGVs
X3N0YXRlLT5jb21taXRfcmVhZHksCisJCXJldCA9IGk5MTVfc3dfZmVuY2VfYXdhaXRfcmVzZXJ2
YXRpb24oJnN0YXRlLT5jb21taXRfcmVhZHksCiAJCQkJCQkgICAgICBvYmotPmJhc2UucmVzdiwg
TlVMTCwKIAkJCQkJCSAgICAgIGZhbHNlLCBJOTE1X0ZFTkNFX1RJTUVPVVQsCiAJCQkJCQkgICAg
ICBHRlBfS0VSTkVMKTsKQEAgLTE1ODQ0LDkgKzE1ODQ0LDkgQEAgaW50ZWxfcHJlcGFyZV9wbGFu
ZV9mYihzdHJ1Y3QgZHJtX3BsYW5lICpfcGxhbmUsCiAJICogdGhhdCBhcmUgbm90IHF1aXRlIHN0
ZWFkeSBzdGF0ZSB3aXRob3V0IHJlc29ydGluZyB0byBmb3JjaW5nCiAJICogbWF4aW11bSBjbG9j
a3MgZm9sbG93aW5nIGEgdmJsYW5rIG1pc3MgKHNlZSBkb19ycHNfYm9vc3QoKSkuCiAJICovCi0J
aWYgKCFpbnRlbF9zdGF0ZS0+cnBzX2ludGVyYWN0aXZlKSB7CisJaWYgKCFzdGF0ZS0+cnBzX2lu
dGVyYWN0aXZlKSB7CiAJCWludGVsX3Jwc19tYXJrX2ludGVyYWN0aXZlKCZkZXZfcHJpdi0+Z3Qu
cnBzLCB0cnVlKTsKLQkJaW50ZWxfc3RhdGUtPnJwc19pbnRlcmFjdGl2ZSA9IHRydWU7CisJCXN0
YXRlLT5ycHNfaW50ZXJhY3RpdmUgPSB0cnVlOwogCX0KIAogCXJldHVybiAwOwpAQCAtMTU4NjUs
MTMgKzE1ODY1LDEzIEBAIGludGVsX2NsZWFudXBfcGxhbmVfZmIoc3RydWN0IGRybV9wbGFuZSAq
cGxhbmUsCiB7CiAJc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpvbGRfcGxhbmVfc3RhdGUgPQog
CQl0b19pbnRlbF9wbGFuZV9zdGF0ZShfb2xkX3BsYW5lX3N0YXRlKTsKLQlzdHJ1Y3QgaW50ZWxf
YXRvbWljX3N0YXRlICppbnRlbF9zdGF0ZSA9CisJc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAq
c3RhdGUgPQogCQl0b19pbnRlbF9hdG9taWNfc3RhdGUob2xkX3BsYW5lX3N0YXRlLT51YXBpLnN0
YXRlKTsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHBsYW5l
LT5kZXYpOwogCi0JaWYgKGludGVsX3N0YXRlLT5ycHNfaW50ZXJhY3RpdmUpIHsKKwlpZiAoc3Rh
dGUtPnJwc19pbnRlcmFjdGl2ZSkgewogCQlpbnRlbF9ycHNfbWFya19pbnRlcmFjdGl2ZSgmZGV2
X3ByaXYtPmd0LnJwcywgZmFsc2UpOwotCQlpbnRlbF9zdGF0ZS0+cnBzX2ludGVyYWN0aXZlID0g
ZmFsc2U7CisJCXN0YXRlLT5ycHNfaW50ZXJhY3RpdmUgPSBmYWxzZTsKIAl9CiAKIAkvKiBTaG91
bGQgb25seSBiZSBjYWxsZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIGludGVsX3ByZXBhcmVfcGxhbmVf
ZmIoKSEgKi8KLS0gCjIuMjQuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
aW50ZWwtZ2Z4Cg==

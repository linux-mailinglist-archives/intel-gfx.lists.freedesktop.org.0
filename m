Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CEE3215468
	for <lists+intel-gfx@lfdr.de>; Mon,  6 May 2019 21:28:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3FCE989AB9;
	Mon,  6 May 2019 19:28:04 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-vs1-xe30.google.com (mail-vs1-xe30.google.com
 [IPv6:2607:f8b0:4864:20::e30])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9E7EE89AB9
 for <intel-gfx@lists.freedesktop.org>; Mon,  6 May 2019 19:28:02 +0000 (UTC)
Received: by mail-vs1-xe30.google.com with SMTP id c24so1983262vsp.7
 for <intel-gfx@lists.freedesktop.org>; Mon, 06 May 2019 12:28:02 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:from:date:message-id:subject:to;
 bh=Vt+tvnETDwmpFF0twSIakCrn5KG21a9r90bhxQ+M9kE=;
 b=GPBpz5ffFC+gvF+xXOvHtYWFGRzVufvcFCZBfzToJ9QDLALs3AhhHh+t7Gf9LZLR6h
 lgg/tPFI8/Wk/ruh4w1TvBrINICqDtH3FZrkgl9pC4D9GzFX22Ehgfq03y69TR1V3Ip/
 ntxhopsRmS83Ctoo1iO1l4yv5LTQMv9+ycq0Li0/Oqf/8OTNTjZly+UER8UgxkyTmpPP
 BbzCQHhmA9o5TEpeiR/iu8fdO3L08fAPdIN/iGuSjoYDVuYhPlSKr8IlSRAjrhDRox2g
 UlWdP6ZxfpD6l5jG7K1/pj0+GyK483U+sS+k4O5yYeP2utISKcp7cEMIb2JTFyCe79u3
 4vrQ==
X-Gm-Message-State: APjAAAXtWIhfl9GBen1pxqcK0o8G8uSeWZD8ParQ/45omGFGm9OqBTiG
 I4ksB4jnZI1aOAsr7gU5kDoHR3kfQW55Sk7mg4+/HZND
X-Google-Smtp-Source: APXvYqzbOOli047Rc8goIv50ScqIlGqtusLRqA1e+mgOc81HQEFEoEe+7avaheAMs97SVETgSxYICwRs8mpxjiZdrLs=
X-Received: by 2002:a67:ee98:: with SMTP id n24mr14273679vsp.155.1557170881095; 
 Mon, 06 May 2019 12:28:01 -0700 (PDT)
MIME-Version: 1.0
From: Adam Richter <adamrichter4@gmail.com>
Date: Mon, 6 May 2019 12:27:49 -0700
Message-ID: <CAGn-TggXWV+Cugk0mG3Vw0B_vBrd6hVYdnHgnyE8e2ve2NCMJg@mail.gmail.com>
To: intel-gfx@lists.freedesktop.org
Content-Type: multipart/mixed; boundary="00000000000039315005883d199a"
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:from:date:message-id:subject:to;
 bh=Vt+tvnETDwmpFF0twSIakCrn5KG21a9r90bhxQ+M9kE=;
 b=VaT1aFXUxs95k+hD6BxNm4OhGNCKLX3gFQBMW71nfwUjnUZFA/+Uopr8q6VyGYjbTu
 EPSvCtJoD0Rrpxj+Uk71hBGxcEeVSpGVZHHZePSCNtJnF2kYmYHQOZT7QjamQ+iUKI8a
 w8yvtIwVmnaqdlh03YA0c3pOzJgZkCBXgV4H8yAKB9GTVrwd44rReUCDLL61dkIqa/5U
 5/hY8I4kja/VEJEfKrU1U5EsXLIcXE+AvMDNAyWIQj80RUjyFwKTsKGmvmeppmcSjKFw
 cLfUAEF41gVBf/oheoMSJAGhe2od6CoqI5z9xR4rf9+kP/JYxnMfTPk580sASLs+o14G
 cFYQ==
Subject: [Intel-gfx] Cannot submit merge request for xf86-video-intel
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

--00000000000039315005883d199a
Content-Type: text/plain; charset="UTF-8"

Hi, everyone.

I am having trouble submitting a merge request on
gitlab.freedesktop.org for xf86-video-intel, even though doing so for
xserver works fine.  The README for xf86-video-intel states that its
mailing list is intel-gfx@lists.freedesktop.org, so I am asking here,
even though most of the discussion on this list appears to be Linux
DRM patches.

On gitlab.freedesktop.org, I forked a personal copy of
xf86-video-intel and pushed a change to it, but when I try to create a
new pull request, the web page only offers me the options of
submitting the merge request to one of two other users' tree.

If I explicitly type "xorg/driver/xf86-video-intel" into the pull down
menu for "Target branch" (because the menu does have a box for
entering the text directly), the target repository name is updated,
but when I click on "Compare branches and continue", I get a screen
that states "You must select different branches," and has the target
and source both set to my repository and branch.

My understanding is that, on Linux these days, the X server now has
xf86-video-modesetting merged in and normally uses that instead of
xf86-video-intel, but xf86-video-intel is not marked as "archived" on
gitlab.freedesktop.org, so I am guessing that changes to it are still
potentially useful on some other operating systems or in some other
unusual cases.

In case anyone is curious about what the patch is, it is just
essentially mechanical conversions of "assert(a && b)" to "assert(a)"
and "assert(b)", hopefully for more efficient diagnosis of assertion
failure reports, which I have attached to this message for reference.
I submitting a similar merge request for the core X server a few days
ago, and it apparently got a positive feedback, and I expect it to be
merged shortly.

Anyhow, any advice on how I should proceed, including simply
redirecting me to a more appropriate mailing list, would be
appreciated.  Thanks for reading this far, and thanks in advance for
any guidance on this.

Adam

--00000000000039315005883d199a
Content-Type: text/x-diff; charset="US-ASCII"; 
	name="xf86-video-intel.assert-conjunctions.patch"
Content-Disposition: attachment; 
	filename="xf86-video-intel.assert-conjunctions.patch"
Content-Transfer-Encoding: base64
Content-ID: <f_jvcr3ftn0>
X-Attachment-Id: f_jvcr3ftn0

Y29tbWl0IDM4MTZmZTRlYmIxMDUwZmZlODE5NTE3NGQzODEwNTczZWJmYzdkZGUKQXV0aG9yOiBB
ZGFtIFJpY2h0ZXIgPGFkYW1yaWNodGVyNEBnbWFpbC5jb20+CkRhdGU6ICAgU2F0IE1heSA0IDE2
OjA2OjE3IDIwMTkgLTA3MDAKCiAgICBTZXBhcmF0ZSBlYWNoICJhc3NlcnQoYSAmJiBiKSIgc3Rh
dGVtZW50IGludG8gImFzc2VydChhKSIgYW5kICJhc3NlcnQoYikiLgogICAgCiAgICBUaGlzIHNo
b3VsZCBwcm92aWRlIG1vcmUgcHJlY2lzZSBkaWFnbm9zdGljcyB3aGVuIGFuIGFzc2VydGlvbiBm
YWlsdXJlCiAgICBpcyBkZXRlY3RlZCwgd2hpY2ggY2FuIHNvbWV0aW1lcyBiZSByYXJlIGFuZCBk
aWZmaWN1bHQgdG8gZ2VuZXJhdGUuCgpkaWZmIC0tZ2l0IGEvc3JjL2ludGVsX2RldmljZS5jIGIv
c3JjL2ludGVsX2RldmljZS5jCmluZGV4IDIxOTU1MDczLi5jYTAyOGUyYyAxMDA2NDQKLS0tIGEv
c3JjL2ludGVsX2RldmljZS5jCisrKyBiL3NyYy9pbnRlbF9kZXZpY2UuYwpAQCAtNjY5LDcgKzY2
OSw4IEBAIGludCBfX2ludGVsX3BlZWtfZmQoU2NybkluZm9QdHIgc2NybikKIAlzdHJ1Y3QgaW50
ZWxfZGV2aWNlICpkZXY7CiAKIAlkZXYgPSBpbnRlbF9kZXZpY2Uoc2Nybik7Ci0JYXNzZXJ0KGRl
diAmJiBkZXYtPmZkICE9IC0xKTsKKwlhc3NlcnQoZGV2KTsKKwlhc3NlcnQoZGV2LT5mZCAhPSAt
MSk7CiAKIAlyZXR1cm4gZGV2LT5mZDsKIH0KQEAgLTY3OCw3ICs2NzksOCBAQCBpbnQgaW50ZWxf
aGFzX3JlbmRlcl9ub2RlKHN0cnVjdCBpbnRlbF9kZXZpY2UgKmRldikKIHsKIAlzdHJ1Y3Qgc3Rh
dCBzdDsKIAotCWFzc2VydChkZXYgJiYgZGV2LT5mZCAhPSAtMSk7CisJYXNzZXJ0KGRldik7CisJ
YXNzZXJ0KGRldi0+ZmQgIT0gLTEpOwogCXJldHVybiBpc19yZW5kZXJfbm9kZShkZXYtPmZkLCAm
c3QpOwogfQogCkBAIC03MzAsMTMgKzczMiwxNSBAQCBzdHJ1Y3QgaW50ZWxfZGV2aWNlICppbnRl
bF9nZXRfZGV2aWNlKFNjcm5JbmZvUHRyIHNjcm4sIGludCAqZmQpCiAKIGNvbnN0IGNoYXIgKmlu
dGVsX2dldF9tYXN0ZXJfbmFtZShzdHJ1Y3QgaW50ZWxfZGV2aWNlICpkZXYpCiB7Ci0JYXNzZXJ0
KGRldiAmJiBkZXYtPm1hc3Rlcl9ub2RlKTsKKwlhc3NlcnQoZGV2KTsKKwlhc3NlcnQoZGV2LT5t
YXN0ZXJfbm9kZSk7CiAJcmV0dXJuIGRldi0+bWFzdGVyX25vZGU7CiB9CiAKIGNvbnN0IGNoYXIg
KmludGVsX2dldF9jbGllbnRfbmFtZShzdHJ1Y3QgaW50ZWxfZGV2aWNlICpkZXYpCiB7Ci0JYXNz
ZXJ0KGRldiAmJiBkZXYtPnJlbmRlcl9ub2RlKTsKKwlhc3NlcnQoZGV2KTsKKwlhc3NlcnQoZGV2
LT5yZW5kZXJfbm9kZSk7CiAJcmV0dXJuIGRldi0+cmVuZGVyX25vZGU7CiB9CiAKQEAgLTc1NSw3
ICs3NTksOCBAQCBpbnQgaW50ZWxfZ2V0X2NsaWVudF9mZChzdHJ1Y3QgaW50ZWxfZGV2aWNlICpk
ZXYpCiB7CiAJaW50IGZkID0gLTE7CiAKLQlhc3NlcnQoZGV2ICYmIGRldi0+ZmQgIT0gLTEpOwor
CWFzc2VydChkZXYpOworCWFzc2VydChkZXYtPmZkICE9IC0xKTsKIAlhc3NlcnQoZGV2LT5yZW5k
ZXJfbm9kZSk7CiAKICNpZmRlZiBPX0NMT0VYRUMKQEAgLTc3OCw3ICs3ODMsOCBAQCBpbnQgaW50
ZWxfZ2V0X2NsaWVudF9mZChzdHJ1Y3QgaW50ZWxfZGV2aWNlICpkZXYpCiAKIGludCBpbnRlbF9n
ZXRfZGV2aWNlX2lkKHN0cnVjdCBpbnRlbF9kZXZpY2UgKmRldikKIHsKLQlhc3NlcnQoZGV2ICYm
IGRldi0+ZmQgIT0gLTEpOworCWFzc2VydChkZXYpOworCWFzc2VydChkZXYtPmZkICE9IC0xKTsK
IAlyZXR1cm4gZGV2LT5kZXZpY2VfaWQ7CiB9CiAKQEAgLTc4Niw3ICs3OTIsOCBAQCBpbnQgaW50
ZWxfZ2V0X21hc3RlcihzdHJ1Y3QgaW50ZWxfZGV2aWNlICpkZXYpCiB7CiAJaW50IHJldDsKIAot
CWFzc2VydChkZXYgJiYgZGV2LT5mZCAhPSAtMSk7CisJYXNzZXJ0KGRldik7CisJYXNzZXJ0KGRl
di0+ZmQgIT0gLTEpOwogCiAJcmV0ID0gMDsKIAlpZiAoZGV2LT5tYXN0ZXJfY291bnQrKyA9PSAw
KSB7CkBAIC04MDgsNyArODE1LDggQEAgaW50IGludGVsX3B1dF9tYXN0ZXIoc3RydWN0IGludGVs
X2RldmljZSAqZGV2KQogewogCWludCByZXQ7CiAKLQlhc3NlcnQoZGV2ICYmIGRldi0+ZmQgIT0g
LTEpOworCWFzc2VydChkZXYpOworCWFzc2VydChkZXYtPmZkICE9IC0xKTsKIAogCXJldCA9IDA7
CiAJYXNzZXJ0KGRldi0+bWFzdGVyX2NvdW50KTsKQEAgLTgyMyw3ICs4MzEsOCBAQCBpbnQgaW50
ZWxfcHV0X21hc3RlcihzdHJ1Y3QgaW50ZWxfZGV2aWNlICpkZXYpCiAKIHZvaWQgaW50ZWxfcHV0
X2RldmljZShzdHJ1Y3QgaW50ZWxfZGV2aWNlICpkZXYpCiB7Ci0JYXNzZXJ0KGRldiAmJiBkZXYt
PmZkICE9IC0xKTsKKwlhc3NlcnQoZGV2KTsKKwlhc3NlcnQoZGV2LT5mZCAhPSAtMSk7CiAKIAlh
c3NlcnQoZGV2LT5vcGVuX2NvdW50KTsKIAlpZiAoLS1kZXYtPm9wZW5fY291bnQpCmRpZmYgLS1n
aXQgYS9zcmMvc25hL2JsdC5jIGIvc3JjL3NuYS9ibHQuYwppbmRleCBjYjkwNDM3YS4uMmMyZjg5
YTAgMTAwNjQ0Ci0tLSBhL3NyYy9zbmEvYmx0LmMKKysrIGIvc3JjL3NuYS9ibHQuYwpAQCAtNjQ3
LDcgKzY0Nyw4IEBAIG1lbWNweV9ibHQoY29uc3Qgdm9pZCAqc3JjLCB2b2lkICpkc3QsIGludCBi
cHAsCiAKIAlhc3NlcnQoc3JjKTsKIAlhc3NlcnQoZHN0KTsKLQlhc3NlcnQod2lkdGggJiYgaGVp
Z2h0KTsKKwlhc3NlcnQod2lkdGgpOworCWFzc2VydChoZWlnaHQpOwogCWFzc2VydChicHAgPj0g
OCk7CiAJYXNzZXJ0KHdpZHRoKmJwcCA8PSA4KnNyY19zdHJpZGUpOwogCWFzc2VydCh3aWR0aCpi
cHAgPD0gOCpkc3Rfc3RyaWRlKTsKQEAgLTEzNzIsNyArMTM3Myw4IEBAIG1lbWNweV94b3IoY29u
c3Qgdm9pZCAqc3JjLCB2b2lkICpkc3QsIGludCBicHAsCiAJdWludDhfdCAqZHN0X2J5dGVzOwog
CWludCBpLCB3OwogCi0JYXNzZXJ0KHdpZHRoICYmIGhlaWdodCk7CisJYXNzZXJ0KHdpZHRoKTsK
Kwlhc3NlcnQoaGVpZ2h0KTsKIAlhc3NlcnQoYnBwID49IDgpOwogCWFzc2VydCh3aWR0aCpicHAg
PD0gOCpzcmNfc3RyaWRlKTsKIAlhc3NlcnQod2lkdGgqYnBwIDw9IDgqZHN0X3N0cmlkZSk7CmRp
ZmYgLS1naXQgYS9zcmMvc25hL2Jydy9icndfZXVfZW1pdC5jIGIvc3JjL3NuYS9icncvYnJ3X2V1
X2VtaXQuYwppbmRleCAxNTRmOTM5YS4uOGMwOWI3ZGYgMTAwNjQ0Ci0tLSBhL3NyYy9zbmEvYnJ3
L2Jyd19ldV9lbWl0LmMKKysrIGIvc3JjL3NuYS9icncvYnJ3X2V1X2VtaXQuYwpAQCAtMTgxLDEw
ICsxODEsMTQgQEAgdmFsaWRhdGVfcmVnKHN0cnVjdCBicndfaW5zdHJ1Y3Rpb24gKmluc24sIHN0
cnVjdCBicndfcmVnIHJlZykKIAkgICAgcmVnLm5yID09IEJSV19BUkZfTlVMTCkKIAkJcmV0dXJu
OwogCi0JYXNzZXJ0KHJlZy5oc3RyaWRlID49IDAgJiYgcmVnLmhzdHJpZGUgPCBBUlJBWV9TSVpF
KGhzdHJpZGVfZm9yX3JlZykpOwotCWFzc2VydChyZWcudnN0cmlkZSA+PSAwICYmIHJlZy52c3Ry
aWRlIDwgQVJSQVlfU0laRSh2c3RyaWRlX2Zvcl9yZWcpKTsKLQlhc3NlcnQocmVnLndpZHRoID49
IDAgJiYgcmVnLndpZHRoIDwgQVJSQVlfU0laRSh3aWR0aF9mb3JfcmVnKSk7Ci0JYXNzZXJ0KGlu
c24tPmhlYWRlci5leGVjdXRpb25fc2l6ZSA+PSAwICYmIGluc24tPmhlYWRlci5leGVjdXRpb25f
c2l6ZSA8IEFSUkFZX1NJWkUoZXhlY3NpemVfZm9yX3JlZykpOworCWFzc2VydChyZWcuaHN0cmlk
ZSA+PSAwKTsKKwlhc3NlcnQocmVnLmhzdHJpZGUgPCBBUlJBWV9TSVpFKGhzdHJpZGVfZm9yX3Jl
ZykpOworCWFzc2VydChyZWcudnN0cmlkZSA+PSAwKTsKKwlhc3NlcnQocmVnLnZzdHJpZGUgPCBB
UlJBWV9TSVpFKHZzdHJpZGVfZm9yX3JlZykpOworCWFzc2VydChyZWcud2lkdGggPj0gMCk7CisJ
YXNzZXJ0KHJlZy53aWR0aCA8IEFSUkFZX1NJWkUod2lkdGhfZm9yX3JlZykpOworCWFzc2VydChp
bnNuLT5oZWFkZXIuZXhlY3V0aW9uX3NpemUgPj0gMCk7CisJYXNzZXJ0KGluc24tPmhlYWRlci5l
eGVjdXRpb25fc2l6ZSA8IEFSUkFZX1NJWkUoZXhlY3NpemVfZm9yX3JlZykpOwogCiAJaHN0cmlk
ZSA9IGhzdHJpZGVfZm9yX3JlZ1tyZWcuaHN0cmlkZV07CiAKQEAgLTc4Nyw3ICs3OTEsOCBAQCBj
b252ZXJ0X0lGX0VMU0VfdG9fQUREKHN0cnVjdCBicndfY29tcGlsZSAqcCwKIAlzdHJ1Y3QgYnJ3
X2luc3RydWN0aW9uICpuZXh0X2luc3QgPSAmcC0+c3RvcmVbcC0+bnJfaW5zbl07CiAKIAlhc3Nl
cnQocC0+c2luZ2xlX3Byb2dyYW1fZmxvdyk7Ci0JYXNzZXJ0KGlmX2luc3QgIT0gTlVMTCAmJiBp
Zl9pbnN0LT5oZWFkZXIub3Bjb2RlID09IEJSV19PUENPREVfSUYpOworCWFzc2VydChpZl9pbnN0
ICE9IE5VTEwpOworCWFzc2VydChpZl9pbnN0LT5oZWFkZXIub3Bjb2RlID09IEJSV19PUENPREVf
SUYpOwogCWFzc2VydChlbHNlX2luc3QgPT0gTlVMTCB8fCBlbHNlX2luc3QtPmhlYWRlci5vcGNv
ZGUgPT0gQlJXX09QQ09ERV9FTFNFKTsKIAlhc3NlcnQoaWZfaW5zdC0+aGVhZGVyLmV4ZWN1dGlv
bl9zaXplID09IEJSV19FWEVDVVRFXzEpOwogCkBAIC04MjcsNyArODMyLDggQEAgcGF0Y2hfSUZf
RUxTRShzdHJ1Y3QgYnJ3X2NvbXBpbGUgKnAsCiAJdW5zaWduZWQgYnIgPSAxOwogCiAJYXNzZXJ0
KCFwLT5zaW5nbGVfcHJvZ3JhbV9mbG93KTsKLQlhc3NlcnQoaWZfaW5zdCAhPSBOVUxMICYmIGlm
X2luc3QtPmhlYWRlci5vcGNvZGUgPT0gQlJXX09QQ09ERV9JRik7CisJYXNzZXJ0KGlmX2luc3Qg
IT0gTlVMTCk7CisJYXNzZXJ0KGlmX2luc3QtPmhlYWRlci5vcGNvZGUgPT0gQlJXX09QQ09ERV9J
Rik7CiAJYXNzZXJ0KGVuZGlmX2luc3QgIT0gTlVMTCk7CiAJYXNzZXJ0KGVsc2VfaW5zdCA9PSBO
VUxMIHx8IGVsc2VfaW5zdC0+aGVhZGVyLm9wY29kZSA9PSBCUldfT1BDT0RFX0VMU0UpOwogCmRp
ZmYgLS1naXQgYS9zcmMvc25hL2dlbjJfcmVuZGVyLmMgYi9zcmMvc25hL2dlbjJfcmVuZGVyLmMK
aW5kZXggZTAzYzQ0MDEuLjZiN2FiYjBkIDEwMDY0NAotLS0gYS9zcmMvc25hL2dlbjJfcmVuZGVy
LmMKKysrIGIvc3JjL3NuYS9nZW4yX3JlbmRlci5jCkBAIC02MDcsNyArNjA3LDggQEAgc3RhdGlj
IHZvaWQgZ2VuMl9lbWl0X3RhcmdldChzdHJ1Y3Qgc25hICpzbmEsCiAJCQkgICAgIGludCBmb3Jt
YXQpCiB7CiAJYXNzZXJ0KCF0b29fbGFyZ2Uod2lkdGgsIGhlaWdodCkpOwotCWFzc2VydChiby0+
cGl0Y2ggPj0gOCAmJiBiby0+cGl0Y2ggPD0gTUFYXzNEX1BJVENIKTsKKwlhc3NlcnQoYm8tPnBp
dGNoID49IDgpOworCWFzc2VydChiby0+cGl0Y2ggPD0gTUFYXzNEX1BJVENIKTsKIAlhc3NlcnQo
c25hLT5yZW5kZXIudmVydGV4X29mZnNldCA9PSAwKTsKIAogCWFzc2VydChiby0+dW5pcXVlX2lk
KTsKQEAgLTM0MTUsNyArMzQxNiw4IEBAIGdlbjJfcmVuZGVyX2NvcHlfc2V0dXBfc291cmNlKHN0
cnVjdCBzbmFfY29tcG9zaXRlX2NoYW5uZWwgKmNoYW5uZWwsCiAJCQkgICAgICBjb25zdCBEcmF3
YWJsZVJlYyAqZHJhdywKIAkJCSAgICAgIHN0cnVjdCBrZ2VtX2JvICpibykKIHsKLQlhc3NlcnQo
ZHJhdy0+d2lkdGggJiYgZHJhdy0+aGVpZ2h0KTsKKwlhc3NlcnQoZHJhdy0+d2lkdGgpOworCWFz
c2VydChkcmF3LT5oZWlnaHQpOwogCiAJY2hhbm5lbC0+ZmlsdGVyID0gUGljdEZpbHRlck5lYXJl
c3Q7CiAJY2hhbm5lbC0+cmVwZWF0ID0gUmVwZWF0Tm9uZTsKZGlmZiAtLWdpdCBhL3NyYy9zbmEv
Z2VuN19yZW5kZXIuYyBiL3NyYy9zbmEvZ2VuN19yZW5kZXIuYwppbmRleCAwYTNiZGE3Ni4uYTIy
NGY5ZjcgMTAwNjQ0Ci0tLSBhL3NyYy9zbmEvZ2VuN19yZW5kZXIuYworKysgYi9zcmMvc25hL2dl
bjdfcmVuZGVyLmMKQEAgLTIxODksNyArMjE4OSw4IEBAIGdlbjdfY29tcG9zaXRlX3NldF90YXJn
ZXQoc3RydWN0IHNuYSAqc25hLAogCW9wLT5kc3QuaGVpZ2h0ID0gb3AtPmRzdC5waXhtYXAtPmRy
YXdhYmxlLmhlaWdodDsKIAogCWlmICh3IHwgaCkgewotCQlhc3NlcnQodyAmJiBoKTsKKwkJYXNz
ZXJ0KHcpOworCQlhc3NlcnQoaCk7CiAJCWJveC54MSA9IHg7CiAJCWJveC55MSA9IHk7CiAJCWJv
eC54MiA9IHggKyB3OwpkaWZmIC0tZ2l0IGEvc3JjL3NuYS9nZW44X2V1LmMgYi9zcmMvc25hL2dl
bjhfZXUuYwppbmRleCA3MTMzOGMwNi4uN2VhYTA0MzYgMTAwNjQ0Ci0tLSBhL3NyYy9zbmEvZ2Vu
OF9ldS5jCisrKyBiL3NyYy9zbmEvZ2VuOF9ldS5jCkBAIC0zODQsMjEgKzM4NCwyNCBAQCBfX2dl
bjhfdmFsaWRhdGVfcmVnKHN0cnVjdCBnZW44X2luc3RydWN0aW9uICppbnN0LCBzdHJ1Y3QgYnJ3
X3JlZyByZWcpCiAJaWYgKHJlZy5maWxlID09IEJSV19BUkNISVRFQ1RVUkVfUkVHSVNURVJfRklM
RSkKIAkJcmV0dXJuOwogCi0JYXNzZXJ0KHJlZy5oc3RyaWRlID49IDAgJiYgcmVnLmhzdHJpZGUg
PCBBUlJBWV9TSVpFKGhzdHJpZGVfZm9yX3JlZykpOworCWFzc2VydChyZWcuaHN0cmlkZSA+PSAw
KTsKKwlhc3NlcnQocmVnLmhzdHJpZGUgPCBBUlJBWV9TSVpFKGhzdHJpZGVfZm9yX3JlZykpOwog
CWhzdHJpZGUgPSBoc3RyaWRlX2Zvcl9yZWdbcmVnLmhzdHJpZGVdOwogCiAJaWYgKHJlZy52c3Ry
aWRlID09IDB4ZikgewogCQl2c3RyaWRlID0gLTE7CiAJfSBlbHNlIHsKLQkJYXNzZXJ0KHJlZy52
c3RyaWRlID49IDAgJiYgcmVnLnZzdHJpZGUgPCBBUlJBWV9TSVpFKHZzdHJpZGVfZm9yX3JlZykp
OworCQlhc3NlcnQocmVnLnZzdHJpZGUgPj0gMCk7CisJCWFzc2VydChyZWcudnN0cmlkZSA8IEFS
UkFZX1NJWkUodnN0cmlkZV9mb3JfcmVnKSk7CiAJCXZzdHJpZGUgPSB2c3RyaWRlX2Zvcl9yZWdb
cmVnLnZzdHJpZGVdOwogCX0KIAotCWFzc2VydChyZWcud2lkdGggPj0gMCAmJiByZWcud2lkdGgg
PCBBUlJBWV9TSVpFKHdpZHRoX2Zvcl9yZWcpKTsKKwlhc3NlcnQocmVnLndpZHRoID49IDApOwor
CWFzc2VydChyZWcud2lkdGggPCBBUlJBWV9TSVpFKHdpZHRoX2Zvcl9yZWcpKTsKIAl3aWR0aCA9
IHdpZHRoX2Zvcl9yZWdbcmVnLndpZHRoXTsKIAotCWFzc2VydChfX2dlbjhfZXhlY19zaXplKGlu
c3QpID49IDAgJiYKLQkgICAgICAgX19nZW44X2V4ZWNfc2l6ZShpbnN0KSA8IEFSUkFZX1NJWkUo
ZXhlY3NpemVfZm9yX3JlZykpOworCWFzc2VydChfX2dlbjhfZXhlY19zaXplKGluc3QpID49IDAp
OworCWFzc2VydChfX2dlbjhfZXhlY19zaXplKGluc3QpIDwgQVJSQVlfU0laRShleGVjc2l6ZV9m
b3JfcmVnKSk7CiAJZXhlY3NpemUgPSBleGVjc2l6ZV9mb3JfcmVnW19fZ2VuOF9leGVjX3NpemUo
aW5zdCldOwogCiAJLyogUmVzdHJpY3Rpb25zIGZyb20gMy4zLjEwOiBSZWdpc3RlciBSZWdpb24g
UmVzdHJpY3Rpb25zLiAqLwpkaWZmIC0tZ2l0IGEvc3JjL3NuYS9nZW44X3JlbmRlci5jIGIvc3Jj
L3NuYS9nZW44X3JlbmRlci5jCmluZGV4IDY5NjE3ZGE1Li5iNjJjYzY0NSAxMDA2NDQKLS0tIGEv
c3JjL3NuYS9nZW44X3JlbmRlci5jCisrKyBiL3NyYy9zbmEvZ2VuOF9yZW5kZXIuYwpAQCAtMjAy
MCw3ICsyMDIwLDggQEAgZ2VuOF9jb21wb3NpdGVfc2V0X3RhcmdldChzdHJ1Y3Qgc25hICpzbmEs
CiAJb3AtPmRzdC5oZWlnaHQgPSBvcC0+ZHN0LnBpeG1hcC0+ZHJhd2FibGUuaGVpZ2h0OwogCiAJ
aWYgKHcgfCBoKSB7Ci0JCWFzc2VydCh3ICYmIGgpOworCQlhc3NlcnQodyk7CisJCWFzc2VydCho
KTsKIAkJYm94LngxID0geDsKIAkJYm94LnkxID0geTsKIAkJYm94LngyID0geCArIHc7CmRpZmYg
LS1naXQgYS9zcmMvc25hL2dlbjlfcmVuZGVyLmMgYi9zcmMvc25hL2dlbjlfcmVuZGVyLmMKaW5k
ZXggM2VkMmViM2IuLmUwOGUzMzgzIDEwMDY0NAotLS0gYS9zcmMvc25hL2dlbjlfcmVuZGVyLmMK
KysrIGIvc3JjL3NuYS9nZW45X3JlbmRlci5jCkBAIC0yMDk2LDcgKzIwOTYsOCBAQCBnZW45X2Nv
bXBvc2l0ZV9zZXRfdGFyZ2V0KHN0cnVjdCBzbmEgKnNuYSwKIAlvcC0+ZHN0LmhlaWdodCA9IG9w
LT5kc3QucGl4bWFwLT5kcmF3YWJsZS5oZWlnaHQ7CiAKIAlpZiAodyB8IGgpIHsKLQkJYXNzZXJ0
KHcgJiYgaCk7CisJCWFzc2VydCh3KTsKKwkJYXNzZXJ0KGgpOwogCQlib3gueDEgPSB4OwogCQli
b3gueTEgPSB5OwogCQlib3gueDIgPSB4ICsgdzsKZGlmZiAtLWdpdCBhL3NyYy9zbmEva2dlbS5j
IGIvc3JjL3NuYS9rZ2VtLmMKaW5kZXggZDM5NmYxYjQuLjI3OGE5OTIwIDEwMDY0NAotLS0gYS9z
cmMvc25hL2tnZW0uYworKysgYi9zcmMvc25hL2tnZW0uYwpAQCAtNjA2Nyw3ICs2MDY3LDggQEAg
c3RydWN0IGtnZW1fYm8gKmtnZW1fY3JlYXRlX2NwdV8yZChzdHJ1Y3Qga2dlbSAqa2dlbSwKIAkJ
cmV0dXJuIGJvOwogCX0KIAotCWFzc2VydCh3aWR0aCA+IDAgJiYgaGVpZ2h0ID4gMCk7CisJYXNz
ZXJ0KHdpZHRoID4gMCk7CisJYXNzZXJ0KGhlaWdodCA+IDApOwogCXN0cmlkZSA9IEFMSUdOKHdp
ZHRoLCAyKSAqIGJwcCA+PiAzOwogCXN0cmlkZSA9IEFMSUdOKHN0cmlkZSwgNCk7CiAJc2l6ZSA9
IHN0cmlkZSAqIEFMSUdOKGhlaWdodCwgMik7CkBAIC03ODY5LDcgKzc4NzAsOCBAQCBpbml0Ogog
CiBkb25lOgogCWJvLT51c2VkID0gQUxJR04oYm8tPnVzZWQsIFVQTE9BRF9BTElHTk1FTlQpOwot
CWFzc2VydChiby0+dXNlZCAmJiBiby0+dXNlZCA8PSBieXRlcygmYm8tPmJhc2UpKTsKKwlhc3Nl
cnQoYm8tPnVzZWQpOworCWFzc2VydChiby0+dXNlZCA8PSBieXRlcygmYm8tPmJhc2UpKTsKIAlh
c3NlcnQoYm8tPm1lbSk7CiAJKnJldCA9IChjaGFyICopYm8tPm1lbSArIG9mZnNldDsKIAlyZXR1
cm4ga2dlbV9jcmVhdGVfcHJveHkoa2dlbSwgJmJvLT5iYXNlLCBvZmZzZXQsIHNpemUpOwpAQCAt
Nzg4OSw3ICs3ODkxLDggQEAgc3RydWN0IGtnZW1fYm8gKmtnZW1fY3JlYXRlX2J1ZmZlcl8yZChz
dHJ1Y3Qga2dlbSAqa2dlbSwKIAlzdHJ1Y3Qga2dlbV9ibyAqYm87CiAJaW50IHN0cmlkZTsKIAot
CWFzc2VydCh3aWR0aCA+IDAgJiYgaGVpZ2h0ID4gMCk7CisJYXNzZXJ0KHdpZHRoID4gMCk7CisJ
YXNzZXJ0KGhlaWdodCA+IDApOwogCWFzc2VydChyZXQgIT0gTlVMTCk7CiAJc3RyaWRlID0gQUxJ
R04od2lkdGgsIDIpICogYnBwID4+IDM7CiAJc3RyaWRlID0gQUxJR04oc3RyaWRlLCBrZ2VtLT5n
ZW4gPj0gMDEwMCA/IDMyIDogNCk7CmRpZmYgLS1naXQgYS9zcmMvc25hL2tnZW0uaCBiL3NyYy9z
bmEva2dlbS5oCmluZGV4IDgxMDFjZTUxLi5mYjA2NWYyNiAxMDA2NDQKLS0tIGEvc3JjL3NuYS9r
Z2VtLmgKKysrIGIvc3JjL3NuYS9rZ2VtLmgKQEAgLTg2Nyw4ICs4NjcsMTAgQEAgbWVtY3B5X3Rv
X3RpbGVkX3goc3RydWN0IGtnZW0gKmtnZW0sCiAJCSAgdWludDE2X3Qgd2lkdGgsIHVpbnQxNl90
IGhlaWdodCkKIHsKIAlhc3NlcnQoa2dlbS0+bWVtY3B5X3RvX3RpbGVkX3gpOwotCWFzc2VydChz
cmNfeCA+PSAwICYmIHNyY195ID49IDApOwotCWFzc2VydChkc3RfeCA+PSAwICYmIGRzdF95ID49
IDApOworCWFzc2VydChzcmNfeCA+PSAwKTsKKwlhc3NlcnQoc3JjX3kgPj0gMCk7CisJYXNzZXJ0
KGRzdF94ID49IDApOworCWFzc2VydChkc3RfeSA+PSAwKTsKIAlhc3NlcnQoOCpzcmNfc3RyaWRl
ID49IChzcmNfeCt3aWR0aCkgKiBicHApOwogCWFzc2VydCg4KmRzdF9zdHJpZGUgPj0gKGRzdF94
K3dpZHRoKSAqIGJwcCk7CiAJcmV0dXJuIGtnZW0tPm1lbWNweV90b190aWxlZF94KHNyYywgZHN0
LCBicHAsCkBAIC04ODcsOCArODg5LDEwIEBAIG1lbWNweV9mcm9tX3RpbGVkX3goc3RydWN0IGtn
ZW0gKmtnZW0sCiAJCSAgICB1aW50MTZfdCB3aWR0aCwgdWludDE2X3QgaGVpZ2h0KQogewogCWFz
c2VydChrZ2VtLT5tZW1jcHlfZnJvbV90aWxlZF94KTsKLQlhc3NlcnQoc3JjX3ggPj0gMCAmJiBz
cmNfeSA+PSAwKTsKLQlhc3NlcnQoZHN0X3ggPj0gMCAmJiBkc3RfeSA+PSAwKTsKKwlhc3NlcnQo
c3JjX3ggPj0gMCk7CisJYXNzZXJ0KHNyY195ID49IDApOworCWFzc2VydChkc3RfeCA+PSAwKTsK
Kwlhc3NlcnQoZHN0X3kgPj0gMCk7CiAJYXNzZXJ0KDgqc3JjX3N0cmlkZSA+PSAoc3JjX3grd2lk
dGgpICogYnBwKTsKIAlhc3NlcnQoOCpkc3Rfc3RyaWRlID49IChkc3RfeCt3aWR0aCkgKiBicHAp
OwogCXJldHVybiBrZ2VtLT5tZW1jcHlfZnJvbV90aWxlZF94KHNyYywgZHN0LCBicHAsCmRpZmYg
LS1naXQgYS9zcmMvc25hL2tnZW1fZGVidWcuYyBiL3NyYy9zbmEva2dlbV9kZWJ1Zy5jCmluZGV4
IGQ5MGU1NDM5Li42YTU2YzI3NyAxMDA2NDQKLS0tIGEvc3JjL3NuYS9rZ2VtX2RlYnVnLmMKKysr
IGIvc3JjL3NuYS9rZ2VtX2RlYnVnLmMKQEAgLTM1Myw4ICszNTMsOCBAQCBfX2RlY29kZV8yZChz
dHJ1Y3Qga2dlbSAqa2dlbSwgdWludDMyX3Qgb2Zmc2V0KQogCQkJa2dlbV9kZWJ1Z19wcmludChk
YXRhLCBvZmZzZXQsIDAsICIlc1xuIiwgb3Bjb2Rlc1tvcF0ubmFtZSk7CiAJCQlpZiAob3Bjb2Rl
c1tvcF0ubWF4X2xlbiA+IDEpIHsKIAkJCQlsZW4gPSAoZGF0YVswXSAmIDB4MDAwMDAwZmYpICsg
MjsKLQkJCQlhc3NlcnQobGVuID49IG9wY29kZXNbb3BdLm1pbl9sZW4gJiYKLQkJCQkgICAgICAg
bGVuIDw9IG9wY29kZXNbb3BdLm1heF9sZW4pOworCQkJCWFzc2VydChsZW4gPj0gb3Bjb2Rlc1tv
cF0ubWluX2xlbik7CisJCQkJYXNzZXJ0KGxlbiA8PSBvcGNvZGVzW29wXS5tYXhfbGVuKTsKIAkJ
CX0KIAogCQkJZm9yIChpID0gMTsgaSA8IGxlbjsgaSsrKQpAQCAtNTI0LDggKzUyNCw4IEBAIF9f
ZGVjb2RlXzJkX2dlbjgoc3RydWN0IGtnZW0gKmtnZW0sIHVpbnQzMl90IG9mZnNldCkKIAkJCWtn
ZW1fZGVidWdfcHJpbnQoZGF0YSwgb2Zmc2V0LCAwLCAiJXNcbiIsIG9wY29kZXNbb3BdLm5hbWUp
OwogCQkJaWYgKG9wY29kZXNbb3BdLm1heF9sZW4gPiAxKSB7CiAJCQkJbGVuID0gKGRhdGFbMF0g
JiAweDAwMDAwMGZmKSArIDI7Ci0JCQkJYXNzZXJ0KGxlbiA+PSBvcGNvZGVzW29wXS5taW5fbGVu
ICYmCi0JCQkJICAgICAgIGxlbiA8PSBvcGNvZGVzW29wXS5tYXhfbGVuKTsKKwkJCQlhc3NlcnQo
bGVuID49IG9wY29kZXNbb3BdLm1pbl9sZW4pOworCQkJCWFzc2VydChsZW4gPD0gb3Bjb2Rlc1tv
cF0ubWF4X2xlbik7CiAJCQl9CiAKIAkJCWZvciAoaSA9IDE7IGkgPCBsZW47IGkrKykKZGlmZiAt
LWdpdCBhL3NyYy9zbmEva2dlbV9kZWJ1Z19nZW4yLmMgYi9zcmMvc25hL2tnZW1fZGVidWdfZ2Vu
Mi5jCmluZGV4IDNmOTFjMjlkLi4zM2JlMzU2NSAxMDA2NDQKLS0tIGEvc3JjL3NuYS9rZ2VtX2Rl
YnVnX2dlbjIuYworKysgYi9zcmMvc25hL2tnZW1fZGVidWdfZ2VuMi5jCkBAIC01NzMsOCArNTcz
LDggQEAgZGVjb2RlXzNkXzFkKHN0cnVjdCBrZ2VtICprZ2VtLCB1aW50MzJfdCBvZmZzZXQpCiAJ
ICAgIGtnZW1fZGVidWdfcHJpbnQoZGF0YSwgb2Zmc2V0LCAwLCAiJXNcbiIsIG9wY29kZV8zZF8x
ZC0+bmFtZSk7CiAJICAgIGlmIChvcGNvZGVfM2RfMWQtPm1heF9sZW4gPiAxKSB7CiAJCWxlbiA9
IChkYXRhWzBdICYgMHgwMDAwZmZmZikgKyAyOwotCQlhc3NlcnQgKGxlbiA+PSBvcGNvZGVfM2Rf
MWQtPm1pbl9sZW4gJiYKLQkJCWxlbiA8PSBvcGNvZGVfM2RfMWQtPm1heF9sZW4pOworCQlhc3Nl
cnQgKGxlbiA+PSBvcGNvZGVfM2RfMWQtPm1pbl9sZW4pOworCQlhc3NlcnQgKGxlbiA8PSBvcGNv
ZGVfM2RfMWQtPm1heF9sZW4pOwogCSAgICB9CiAKIAkgICAgZm9yIChpID0gMTsgaSA8IGxlbjsg
aSsrKQpAQCAtNjY2LDggKzY2Niw4IEBAIGludCBrZ2VtX2dlbjJfZGVjb2RlXzNkKHN0cnVjdCBr
Z2VtICprZ2VtLCB1aW50MzJfdCBvZmZzZXQpCiAJICAgIGtnZW1fZGVidWdfcHJpbnQoZGF0YSwg
b2Zmc2V0LCAwLCAiJXNcbiIsIG9wY29kZXNbaWR4XS5uYW1lKTsKIAkgICAgaWYgKG9wY29kZXNb
aWR4XS5tYXhfbGVuID4gMSkgewogCQlsZW4gPSAoZGF0YVswXSAmIDB4ZikgKyAyOwotCQlhc3Nl
cnQobGVuID49IG9wY29kZXNbaWR4XS5taW5fbGVuICYmCi0JCSAgICAgICBsZW4gPD0gb3Bjb2Rl
c1tpZHhdLm1heF9sZW4pOworCQlhc3NlcnQobGVuID49IG9wY29kZXNbaWR4XS5taW5fbGVuKTsK
KwkJYXNzZXJ0KGxlbiA8PSBvcGNvZGVzW2lkeF0ubWF4X2xlbik7CiAJICAgIH0KIAogCSAgICBm
b3IgKGkgPSAxOyBpIDwgbGVuOyBpKyspCmRpZmYgLS1naXQgYS9zcmMvc25hL2tnZW1fZGVidWdf
Z2VuNC5jIGIvc3JjL3NuYS9rZ2VtX2RlYnVnX2dlbjQuYwppbmRleCA4ZTZlNDdiNi4uZjZlNzVl
YmIgMTAwNjQ0Ci0tLSBhL3NyYy9zbmEva2dlbV9kZWJ1Z19nZW40LmMKKysrIGIvc3JjL3NuYS9r
Z2VtX2RlYnVnX2dlbjQuYwpAQCAtNjcyLDggKzY3Miw4IEBAIGludCBrZ2VtX2dlbjRfZGVjb2Rl
XzNkKHN0cnVjdCBrZ2VtICprZ2VtLCB1aW50MzJfdCBvZmZzZXQpCiAJa2dlbV9kZWJ1Z19wcmlu
dChkYXRhLCBvZmZzZXQsIDAsICIlc1xuIiwgb3Bjb2Rlc1tpXS5uYW1lKTsKIAlpZiAob3Bjb2Rl
c1tpXS5tYXhfbGVuID4gMSkgewogCQlsZW4gPSAoZGF0YVswXSAmIDB4ZmYpICsgMjsKLQkJYXNz
ZXJ0KGxlbiA+PSBvcGNvZGVzW2ldLm1pbl9sZW4gJiYKLQkJICAgICAgIGxlbiA8PSBvcGNvZGVz
W2ldLm1heF9sZW4pOworCQlhc3NlcnQobGVuID49IG9wY29kZXNbaV0ubWluX2xlbik7CisJCWFz
c2VydChsZW4gPD0gb3Bjb2Rlc1tpXS5tYXhfbGVuKTsKIAl9CiAKIAlmb3IgKGkgPSAxOyBpIDwg
bGVuOyBpKyspCmRpZmYgLS1naXQgYS9zcmMvc25hL2tnZW1fZGVidWdfZ2VuNS5jIGIvc3JjL3Nu
YS9rZ2VtX2RlYnVnX2dlbjUuYwppbmRleCBmMWIxMjc1Zi4uZTdhMzlmMDAgMTAwNjQ0Ci0tLSBh
L3NyYy9zbmEva2dlbV9kZWJ1Z19nZW41LmMKKysrIGIvc3JjL3NuYS9rZ2VtX2RlYnVnX2dlbjUu
YwpAQCAtNjQ3LDggKzY0Nyw4IEBAIGludCBrZ2VtX2dlbjVfZGVjb2RlXzNkKHN0cnVjdCBrZ2Vt
ICprZ2VtLCB1aW50MzJfdCBvZmZzZXQpCiAJa2dlbV9kZWJ1Z19wcmludChkYXRhLCBvZmZzZXQs
IDAsICIlc1xuIiwgb3Bjb2Rlc1tpXS5uYW1lKTsKIAlpZiAob3Bjb2Rlc1tpXS5tYXhfbGVuID4g
MSkgewogCQlsZW4gPSAoZGF0YVswXSAmIDB4ZmYpICsgMjsKLQkJYXNzZXJ0KGxlbiA+PSBvcGNv
ZGVzW2ldLm1pbl9sZW4gJiYKLQkJICAgICAgIGxlbiA8PSBvcGNvZGVzW2ldLm1heF9sZW4pOwor
CQlhc3NlcnQobGVuID49IG9wY29kZXNbaV0ubWluX2xlbik7CisJCWFzc2VydChsZW4gPD0gb3Bj
b2Rlc1tpXS5tYXhfbGVuKTsKIAl9CiAKIAlmb3IgKGkgPSAxOyBpIDwgbGVuOyBpKyspCmRpZmYg
LS1naXQgYS9zcmMvc25hL2tnZW1fZGVidWdfZ2VuNi5jIGIvc3JjL3NuYS9rZ2VtX2RlYnVnX2dl
bjYuYwppbmRleCA1NzljNWQ1NC4uMGY2YWNkNjEgMTAwNjQ0Ci0tLSBhL3NyYy9zbmEva2dlbV9k
ZWJ1Z19nZW42LmMKKysrIGIvc3JjL3NuYS9rZ2VtX2RlYnVnX2dlbjYuYwpAQCAtMTA1OSw4ICsx
MDU5LDggQEAgaW50IGtnZW1fZ2VuNl9kZWNvZGVfM2Qoc3RydWN0IGtnZW0gKmtnZW0sIHVpbnQz
Ml90IG9mZnNldCkKIAlrZ2VtX2RlYnVnX3ByaW50KGRhdGEsIG9mZnNldCwgMCwgIiVzXG4iLCBv
cGNvZGVzW2ldLm5hbWUpOwogCWlmIChvcGNvZGVzW2ldLm1heF9sZW4gPiAxKSB7CiAJCWxlbiA9
IChkYXRhWzBdICYgMHhmZikgKyAyOwotCQlhc3NlcnQobGVuID49IG9wY29kZXNbaV0ubWluX2xl
biAmJgotCQkgICAgICAgbGVuIDw9IG9wY29kZXNbaV0ubWF4X2xlbik7CisJCWFzc2VydChsZW4g
Pj0gb3Bjb2Rlc1tpXS5taW5fbGVuKTsKKwkJYXNzZXJ0KGxlbiA8PSBvcGNvZGVzW2ldLm1heF9s
ZW4pOwogCX0KIAogCWZvciAoaSA9IDE7IGkgPCBsZW47IGkrKykKZGlmZiAtLWdpdCBhL3NyYy9z
bmEva2dlbV9kZWJ1Z19nZW43LmMgYi9zcmMvc25hL2tnZW1fZGVidWdfZ2VuNy5jCmluZGV4IDFi
YzAxNGJmLi44MDc4ZjQ0MCAxMDA2NDQKLS0tIGEvc3JjL3NuYS9rZ2VtX2RlYnVnX2dlbjcuYwor
KysgYi9zcmMvc25hL2tnZW1fZGVidWdfZ2VuNy5jCkBAIC03MDAsOCArNzAwLDggQEAgaW50IGtn
ZW1fZ2VuN19kZWNvZGVfM2Qoc3RydWN0IGtnZW0gKmtnZW0sIHVpbnQzMl90IG9mZnNldCkKIAl9
IGVsc2UgewogCQlrZ2VtX2RlYnVnX3ByaW50KGRhdGEsIG9mZnNldCwgMCwgIiVzXG4iLCBvcGNv
ZGVzW2ldLm5hbWUpOwogCQlpZiAob3Bjb2Rlc1tpXS5tYXhfbGVuID4gMSkgewotCQkJYXNzZXJ0
KGxlbiA+PSBvcGNvZGVzW2ldLm1pbl9sZW4gJiYKLQkJCQkJbGVuIDw9IG9wY29kZXNbaV0ubWF4
X2xlbik7CisJCSAgYXNzZXJ0KGxlbiA+PSBvcGNvZGVzW2ldLm1pbl9sZW4pOworCQkgIGFzc2Vy
dChsZW4gPD0gb3Bjb2Rlc1tpXS5tYXhfbGVuKTsKIAkJfQogCX0KIAlmb3IgKGkgPSAxOyBpIDwg
bGVuOyBpKyspCmRpZmYgLS1naXQgYS9zcmMvc25hL3NuYS5oIGIvc3JjL3NuYS9zbmEuaAppbmRl
eCBjZjJhN2E1MS4uMzc3MzAxYmMgMTAwNjQ0Ci0tLSBhL3NyYy9zbmEvc25hLmgKKysrIGIvc3Jj
L3NuYS9zbmEuaApAQCAtMTM2Nyw3ICsxMzY3LDEwIEBAIGV4dGVybiBqbXBfYnVmIHNpZ2ptcFs0
XTsKIGV4dGVybiB2b2xhdGlsZSBzaWdfYXRvbWljX3Qgc2lndHJhcDsKIAogI2RlZmluZSBzaWd0
cmFwX2Fzc2VydF9pbmFjdGl2ZSgpIGFzc2VydChzaWd0cmFwID09IDApCi0jZGVmaW5lIHNpZ3Ry
YXBfYXNzZXJ0X2FjdGl2ZSgpIGFzc2VydChzaWd0cmFwID4gMCAmJiBzaWd0cmFwIDw9IEFSUkFZ
X1NJWkUoc2lnam1wKSkKKyNkZWZpbmUgc2lndHJhcF9hc3NlcnRfYWN0aXZlKCkgZG8gewkJICAg
ICAgIFwKKwkJYXNzZXJ0KHNpZ3RyYXAgPiAwKTsJCSAgICAgICBcCisJCWFzc2VydChzaWd0cmFw
IDw9IEFSUkFZX1NJWkUoc2lnam1wKSk7IFwKKwl9IHdoaWxlKDApCiAjZGVmaW5lIHNpZ3RyYXBf
Z2V0KCkgc2lnc2V0am1wKHNpZ2ptcFtzaWd0cmFwKytdLCAxKQogCiBzdGF0aWMgaW5saW5lIHZv
aWQgc2lndHJhcF9wdXQodm9pZCkKZGlmZiAtLWdpdCBhL3NyYy9zbmEvc25hX2FjY2VsLmMgYi9z
cmMvc25hL3NuYV9hY2NlbC5jCmluZGV4IDdmZDAwYjlhLi5lNmQ5MDA5NiAxMDA2NDQKLS0tIGEv
c3JjL3NuYS9zbmFfYWNjZWwuYworKysgYi9zcmMvc25hL3NuYV9hY2NlbC5jCkBAIC0zOTMsNyAr
MzkzLDEwIEBAIHN0YXRpYyB2b2lkIGFzc2VydF9waXhtYXBfZGFtYWdlKFBpeG1hcFB0ciBwKQog
CiAJaWYgKERBTUFHRV9JU19BTEwocHJpdi0+Z3B1X2RhbWFnZSkgJiYgREFNQUdFX0lTX0FMTChw
cml2LT5jcHVfZGFtYWdlKSkgewogCQkvKiBzcGVjaWFsIHVwbG9hZCBidWZmZXIgKi8KLQkJYXNz
ZXJ0KHByaXYtPmdwdV9ibyAmJiBwcml2LT5ncHVfYm8tPnByb3h5KTsKKwkJYXNzZXJ0KHByaXYt
PmdwdV9ibyk7CisJCWFzc2VydChwcml2LT5ncHVfYm8tPnByb3h5KTsKKwkJYXNzZXJ0KHByaXYt
PmdwdV9ibyk7CisJCWFzc2VydChwcml2LT5ncHVfYm8tPnByb3h5KTsKIAkJYXNzZXJ0KHByaXYt
PmNwdV9ibyA9PSBOVUxMKTsKIAkJcmV0dXJuOwogCX0KQEAgLTEzMzksNyArMTM0Miw4IEBAIHN0
YXRpYyBQaXhtYXBQdHIgc25hX2NyZWF0ZV9waXhtYXAoU2NyZWVuUHRyIHNjcmVlbiwKIAkJdXNh
Z2UgPSAtMTsKIAkJZ290byBmYWxsYmFjazsKIAl9Ci0JYXNzZXJ0KHdpZHRoICYmIGhlaWdodCk7
CisJYXNzZXJ0KHdpZHRoKTsKKwlhc3NlcnQoaGVpZ2h0KTsKIAogCWZsYWdzID0ga2dlbV9jYW5f
Y3JlYXRlXzJkKCZzbmEtPmtnZW0sIHdpZHRoLCBoZWlnaHQsIGRlcHRoKTsKIAlpZiAoZmxhZ3Mg
PT0gMCkgewpAQCAtMzM3OSw3ICszMzgzLDggQEAgc25hX3BpeG1hcF9tb3ZlX2FyZWFfdG9fZ3B1
KFBpeG1hcFB0ciBwaXhtYXAsIGNvbnN0IEJveFJlYyAqYm94LCB1bnNpZ25lZCBpbnQgZmwKIAlp
ZiAocHJpdiA9PSBOVUxMKQogCQlyZXR1cm4gTlVMTDsKIAotCWFzc2VydChib3gtPngyID4gYm94
LT54MSAmJiBib3gtPnkyID4gYm94LT55MSk7CisJYXNzZXJ0KGJveC0+eDIgPiBib3gtPngxKTsK
Kwlhc3NlcnQoYm94LT55MiA+IGJveC0+eTEpOwogCWFzc2VydF9waXhtYXBfZGFtYWdlKHBpeG1h
cCk7CiAJYXNzZXJ0X3BpeG1hcF9jb250YWluc19ib3gocGl4bWFwLCBib3gpOwogCWFzc2VydChw
cml2LT5ncHVfZGFtYWdlID09IE5VTEwgfHwgcHJpdi0+Z3B1X2JvKTsKQEAgLTM2MzcsNyArMzY0
Miw4IEBAIHNuYV9kcmF3YWJsZV91c2VfYm8oRHJhd2FibGVQdHIgZHJhd2FibGUsIHVuc2lnbmVk
IGZsYWdzLCBjb25zdCBCb3hSZWMgKmJveCwKIAkgICAgIGJveC0+eDEsIGJveC0+eTEsIGJveC0+
eDIsIGJveC0+eTIsCiAJICAgICBmbGFncykpOwogCi0JYXNzZXJ0KGJveC0+eDIgPiBib3gtPngx
ICYmIGJveC0+eTIgPiBib3gtPnkxKTsKKwlhc3NlcnQoYm94LT54MiA+IGJveC0+eDEpOworCWFz
c2VydChib3gtPnkyID4gYm94LT55MSk7CiAJYXNzZXJ0KHBpeG1hcC0+cmVmY250KTsKIAlhc3Nl
cnRfcGl4bWFwX2RhbWFnZShwaXhtYXApOwogCWFzc2VydF9kcmF3YWJsZV9jb250YWluc19ib3go
ZHJhd2FibGUsIGJveCk7CkBAIC0xMjgzNywxMSArMTI4NDMsMjcgQEAgc25hX3BvbHlfZmlsbF9y
ZWN0X3RpbGVkX254bV9ibHQoRHJhd2FibGVQdHIgZHJhd2FibGUsCiAKIAlEQkcoKCIlczogJWR4
JWQrJWQrJWQgKGZ1bGwgdGlsZSBzaXplICVkeCVkKVxuIiwgX19GVU5DVElPTl9fLAogCSAgICAg
dHcsIHRoLCB0eCwgdHksIHRpbGUtPmRyYXdhYmxlLndpZHRoLCB0aWxlLT5kcmF3YWJsZS5oZWln
aHQpKTsKLQlhc3NlcnQodHggPCB0aWxlLT5kcmF3YWJsZS53aWR0aCAmJiB0eCA+PSAwKTsKLQlh
c3NlcnQodHkgPCB0aWxlLT5kcmF3YWJsZS5oZWlnaHQgJiYgdHkgPj0gMCk7Ci0JYXNzZXJ0KHR3
ICYmIHR3IDw9IDggJiYgdHcgPD0gdGlsZS0+ZHJhd2FibGUud2lkdGgpOworCWFzc2VydCh0eCA8
IHRpbGUtPmRyYXdhYmxlLndpZHRoKTsKKwlhc3NlcnQodHggPj0gMCk7CisJYXNzZXJ0KHR4IDwg
dGlsZS0+ZHJhd2FibGUud2lkdGgpOworCWFzc2VydCh0eCA+PSAwKTsKKwlhc3NlcnQodHggPCB0
aWxlLT5kcmF3YWJsZS53aWR0aCk7CisJYXNzZXJ0KHR4ID49IDApOworCWFzc2VydCh0eCA8IHRp
bGUtPmRyYXdhYmxlLndpZHRoKTsKKwlhc3NlcnQodHggPj0gMCk7CisJYXNzZXJ0KHR4IDwgdGls
ZS0+ZHJhd2FibGUud2lkdGgpOworCWFzc2VydCh0eCA+PSAwKTsKKwlhc3NlcnQodHggPCB0aWxl
LT5kcmF3YWJsZS53aWR0aCk7CisJYXNzZXJ0KHR4ID49IDApOworCWFzc2VydCh0eSA8IHRpbGUt
PmRyYXdhYmxlLmhlaWdodCk7CisJYXNzZXJ0KHR5ID49IDApOworCWFzc2VydCh0dyk7CisJYXNz
ZXJ0KHR3IDw9IDgpOworCWFzc2VydCh0dyA8PSB0aWxlLT5kcmF3YWJsZS53aWR0aCk7CiAJYXNz
ZXJ0KGlzX3Bvd2VyX29mX3R3byh0dykpOwotCWFzc2VydCh0aCAmJiB0aCA8PSA4ICYmIHRoIDw9
IHRpbGUtPmRyYXdhYmxlLmhlaWdodCk7CisJYXNzZXJ0KHRoKTsKKwlhc3NlcnQodGggPD0gOCk7
CisJYXNzZXJ0KHRoIDw9IHRpbGUtPmRyYXdhYmxlLmhlaWdodCk7CiAJYXNzZXJ0KGlzX3Bvd2Vy
X29mX3R3byh0aCkpOwogCiAJaWYgKCFzbmFfcGl4bWFwX21vdmVfdG9fY3B1KHRpbGUsIE1PVkVf
UkVBRCkpCkBAIC0xNzAwOCw3ICsxNzAzMCw4IEBAIHNuYV9nZXRfaW1hZ2VfX2lucGxhY2UoUGl4
bWFwUHRyIHBpeG1hcCwKIAlpZiAoIVVTRV9JTlBMQUNFKQogCQlyZXR1cm4gZmFsc2U7CiAKLQlh
c3NlcnQocHJpdiAmJiBwcml2LT5ncHVfYm8pOworCWFzc2VydChwcml2KTsKKwlhc3NlcnQocHJp
di0+Z3B1X2JvKTsKIAogCXN3aXRjaCAocHJpdi0+Z3B1X2JvLT50aWxpbmcpIHsKIAljYXNlIEk5
MTVfVElMSU5HX1k6CkBAIC0xNzA5Nyw3ICsxNzEyMCw4IEBAIHNuYV9nZXRfaW1hZ2VfX2JsdChQ
aXhtYXBQdHIgcGl4bWFwLAogCWJvb2wgb2sgPSBmYWxzZTsKIAlpbnQgcGl0Y2g7CiAKLQlhc3Nl
cnQocHJpdiAmJiBwcml2LT5ncHVfYm8pOworCWFzc2VydChwcml2KTsKKwlhc3NlcnQocHJpdi0+
Z3B1X2JvKTsKIAogCWlmICghc25hLT5rZ2VtLmhhc191c2VycHRyIHx8ICFVU0VfVVNFUlBUUl9E
T1dOTE9BRFMpCiAJCXJldHVybiBmYWxzZTsKZGlmZiAtLWdpdCBhL3NyYy9zbmEvc25hX2NvbXBv
c2l0ZS5jIGIvc3JjL3NuYS9zbmFfY29tcG9zaXRlLmMKaW5kZXggMWRhOGMyOTEuLjlhMjJiMGFi
IDEwMDY0NAotLS0gYS9zcmMvc25hL3NuYV9jb21wb3NpdGUuYworKysgYi9zcmMvc25hL3NuYV9j
b21wb3NpdGUuYwpAQCAtNjAyLDcgKzYwMiwxMCBAQCBzbmFfY29tcG9zaXRlX2ZiKENBUkQ4IG9w
LAogCQkJCQlhc3NlcnQoYm94LT55MSArIHR5ID49IDApOwogCQkJCQlhc3NlcnQoYm94LT55MiAr
IHR5IDw9IGRzdF9waXhtYXAtPmRyYXdhYmxlLmhlaWdodCk7CiAKLQkJCQkJYXNzZXJ0KGJveC0+
eDIgPiBib3gtPngxICYmIGJveC0+eTIgPiBib3gtPnkxKTsKKwkJCQkJYXNzZXJ0KGJveC0+eDIg
PiBib3gtPngxKTsKKwkJCQkJYXNzZXJ0KGJveC0+eTIgPiBib3gtPnkxKTsKKwkJCQkJYXNzZXJ0
KGJveC0+eDIgPiBib3gtPngxKTsKKwkJCQkJYXNzZXJ0KGJveC0+eTIgPiBib3gtPnkxKTsKIAog
CQkJCQlzaWd0cmFwX2Fzc2VydF9hY3RpdmUoKTsKIAkJCQkJbWVtY3B5X2JsdChzcmNfcGl4bWFw
LT5kZXZQcml2YXRlLnB0ciwKZGlmZiAtLWdpdCBhL3NyYy9zbmEvc25hX2RhbWFnZS5jIGIvc3Jj
L3NuYS9zbmFfZGFtYWdlLmMKaW5kZXggODgyNGExMGIuLmMwMGY2OTFiIDEwMDY0NAotLS0gYS9z
cmMvc25hL3NuYV9kYW1hZ2UuYworKysgYi9zcmMvc25hL3NuYV9kYW1hZ2UuYwpAQCAtMzAzLDEw
ICszMDMsMTAgQEAgc3RhdGljIHZvaWQgX19zbmFfZGFtYWdlX3JlZHVjZShzdHJ1Y3Qgc25hX2Rh
bWFnZSAqZGFtYWdlKQogCQlwaXhtYW5fcmVnaW9uX2luaXRfcmVjdHMocmVnaW9uLCBib3hlcywg
bmJveGVzKTsKIAogCQlhc3NlcnQocGl4bWFuX3JlZ2lvbl9ub3RfZW1wdHkocmVnaW9uKSk7Ci0J
CWFzc2VydChkYW1hZ2UtPmV4dGVudHMueDEgPT0gcmVnaW9uLT5leHRlbnRzLngxICYmCi0JCSAg
ICAgICBkYW1hZ2UtPmV4dGVudHMueTEgPT0gcmVnaW9uLT5leHRlbnRzLnkxICYmCi0JCSAgICAg
ICBkYW1hZ2UtPmV4dGVudHMueDIgPT0gcmVnaW9uLT5leHRlbnRzLngyICYmCi0JCSAgICAgICBk
YW1hZ2UtPmV4dGVudHMueTIgPT0gcmVnaW9uLT5leHRlbnRzLnkyKTsKKwkJYXNzZXJ0KGRhbWFn
ZS0+ZXh0ZW50cy54MSA9PSByZWdpb24tPmV4dGVudHMueDEpOworCQlhc3NlcnQoZGFtYWdlLT5l
eHRlbnRzLnkxID09IHJlZ2lvbi0+ZXh0ZW50cy55MSk7CisJCWFzc2VydChkYW1hZ2UtPmV4dGVu
dHMueDIgPT0gcmVnaW9uLT5leHRlbnRzLngyKTsKKwkJYXNzZXJ0KGRhbWFnZS0+ZXh0ZW50cy55
MiA9PSByZWdpb24tPmV4dGVudHMueTIpOwogCX0gZWxzZSB7CiAJCXBpeG1hbl9yZWdpb24xNl90
IHRtcDsKIApAQCAtMzE1LDEwICszMTUsMTAgQEAgc3RhdGljIHZvaWQgX19zbmFfZGFtYWdlX3Jl
ZHVjZShzdHJ1Y3Qgc25hX2RhbWFnZSAqZGFtYWdlKQogCQlwaXhtYW5fcmVnaW9uX3N1YnRyYWN0
KHJlZ2lvbiwgcmVnaW9uLCAmdG1wKTsKIAkJcGl4bWFuX3JlZ2lvbl9maW5pKCZ0bXApOwogCi0J
CWFzc2VydChkYW1hZ2UtPmV4dGVudHMueDEgPD0gcmVnaW9uLT5leHRlbnRzLngxICYmCi0JCSAg
ICAgICBkYW1hZ2UtPmV4dGVudHMueTEgPD0gcmVnaW9uLT5leHRlbnRzLnkxICYmCi0JCSAgICAg
ICBkYW1hZ2UtPmV4dGVudHMueDIgPj0gcmVnaW9uLT5leHRlbnRzLngyICYmCi0JCSAgICAgICBk
YW1hZ2UtPmV4dGVudHMueTIgPj0gcmVnaW9uLT5leHRlbnRzLnkyKTsKKwkJYXNzZXJ0KGRhbWFn
ZS0+ZXh0ZW50cy54MSA8PSByZWdpb24tPmV4dGVudHMueDEpOworCQlhc3NlcnQoZGFtYWdlLT5l
eHRlbnRzLnkxIDw9IHJlZ2lvbi0+ZXh0ZW50cy55MSk7CisJCWFzc2VydChkYW1hZ2UtPmV4dGVu
dHMueDIgPj0gcmVnaW9uLT5leHRlbnRzLngyKTsKKwkJYXNzZXJ0KGRhbWFnZS0+ZXh0ZW50cy55
MiA+PSByZWdpb24tPmV4dGVudHMueTIpOwogCQlpZiAocGl4bWFuX3JlZ2lvbl9ub3RfZW1wdHko
cmVnaW9uKSkKIAkJCWRhbWFnZS0+ZXh0ZW50cyA9IHJlZ2lvbi0+ZXh0ZW50czsKIAkJZWxzZQpA
QCAtNjA5LDcgKzYwOSw4IEBAIHN0YXRpYyB2b2lkIGRhbWFnZV91bmlvbihzdHJ1Y3Qgc25hX2Rh
bWFnZSAqZGFtYWdlLCBjb25zdCBCb3hSZWMgKmJveCkKIAkgICAgIGRhbWFnZS0+ZXh0ZW50cy54
MSwgZGFtYWdlLT5leHRlbnRzLnkxLAogCSAgICAgZGFtYWdlLT5leHRlbnRzLngyLCBkYW1hZ2Ut
PmV4dGVudHMueTIsCiAJICAgICBib3gtPngxLCBib3gtPnkxLCBib3gtPngyLCBib3gtPnkyKSk7
Ci0JYXNzZXJ0KGJveC0+eDIgPiBib3gtPngxICYmIGJveC0+eTIgPiBib3gtPnkxKTsKKwlhc3Nl
cnQoYm94LT54MiA+IGJveC0+eDEpOworCWFzc2VydChib3gtPnkyID4gYm94LT55MSk7CiAJaWYg
KGRhbWFnZS0+ZXh0ZW50cy54MiA8IGRhbWFnZS0+ZXh0ZW50cy54MSkgewogCQlkYW1hZ2UtPmV4
dGVudHMgPSAqYm94OwogCX0gZWxzZSB7CkBAIC03NjYsMTAgKzc2NywxMiBAQCBfX3NuYV9kYW1h
Z2VfYWRkX2JveGVzKHN0cnVjdCBzbmFfZGFtYWdlICpkYW1hZ2UsCiAJCWJyZWFrOwogCX0KIAot
CWFzc2VydChib3hbMF0ueDIgPiBib3hbMF0ueDEgJiYgYm94WzBdLnkyID4gYm94WzBdLnkxKTsK
Kwlhc3NlcnQoYm94WzBdLngyID4gYm94WzBdLngxKTsKKwlhc3NlcnQoYm94WzBdLnkyID4gYm94
WzBdLnkxKTsKIAlleHRlbnRzID0gYm94WzBdOwogCWZvciAoaSA9IDE7IGkgPCBuOyBpKyspIHsK
LQkJYXNzZXJ0KGJveFtpXS54MiA+IGJveFtpXS54MSAmJiBib3hbaV0ueTIgPiBib3hbaV0ueTEp
OworCQlhc3NlcnQoYm94W2ldLngyID4gYm94W2ldLngxKTsKKwkJYXNzZXJ0KGJveFtpXS55MiA+
IGJveFtpXS55MSk7CiAJCWlmIChleHRlbnRzLngxID4gYm94W2ldLngxKQogCQkJZXh0ZW50cy54
MSA9IGJveFtpXS54MTsKIAkJaWYgKGV4dGVudHMueDIgPCBib3hbaV0ueDIpCkBAIC03ODAsNyAr
NzgzLDggQEAgX19zbmFfZGFtYWdlX2FkZF9ib3hlcyhzdHJ1Y3Qgc25hX2RhbWFnZSAqZGFtYWdl
LAogCQkJZXh0ZW50cy55MiA9IGJveFtpXS55MjsKIAl9CiAKLQlhc3NlcnQoZXh0ZW50cy55MiA+
IGV4dGVudHMueTEgJiYgZXh0ZW50cy54MiA+IGV4dGVudHMueDEpOworCWFzc2VydChleHRlbnRz
LnkyID4gZXh0ZW50cy55MSk7CisJYXNzZXJ0KGV4dGVudHMueDIgPiBleHRlbnRzLngxKTsKIAog
CWV4dGVudHMueDEgKz0gZHg7CiAJZXh0ZW50cy54MiArPSBkeDsKQEAgLTgzOSwxMyArODQzLDE1
IEBAIF9fc25hX2RhbWFnZV9hZGRfcmVjdGFuZ2xlcyhzdHJ1Y3Qgc25hX2RhbWFnZSAqZGFtYWdl
LAogCiAJYXNzZXJ0KG4pOwogCi0JYXNzZXJ0KHJbMF0ud2lkdGggJiYgclswXS5oZWlnaHQpOwor
CWFzc2VydChyWzBdLndpZHRoKTsKKwlhc3NlcnQoclswXS5oZWlnaHQpOwogCWV4dGVudHMueDEg
PSByWzBdLng7CiAJZXh0ZW50cy54MiA9IHJbMF0ueCArIHJbMF0ud2lkdGg7CiAJZXh0ZW50cy55
MSA9IHJbMF0ueTsKIAlleHRlbnRzLnkyID0gclswXS55ICsgclswXS5oZWlnaHQ7CiAJZm9yIChp
ID0gMTsgaSA8IG47IGkrKykgewotCQlhc3NlcnQocltpXS53aWR0aCAmJiByW2ldLmhlaWdodCk7
CisJCWFzc2VydChyW2ldLndpZHRoKTsKKwkJYXNzZXJ0KHJbaV0uaGVpZ2h0KTsKIAkJaWYgKGV4
dGVudHMueDEgPiByW2ldLngpCiAJCQlleHRlbnRzLngxID0gcltpXS54OwogCQlpZiAoZXh0ZW50
cy54MiA8IHJbaV0ueCArIHJbaV0ud2lkdGgpCkBAIC04NTYsNyArODYyLDggQEAgX19zbmFfZGFt
YWdlX2FkZF9yZWN0YW5nbGVzKHN0cnVjdCBzbmFfZGFtYWdlICpkYW1hZ2UsCiAJCQlleHRlbnRz
LnkyID0gcltpXS55ICsgcltpXS5oZWlnaHQ7CiAJfQogCi0JYXNzZXJ0KGV4dGVudHMueTIgPiBl
eHRlbnRzLnkxICYmIGV4dGVudHMueDIgPiBleHRlbnRzLngxKTsKKwlhc3NlcnQoZXh0ZW50cy55
MiA+IGV4dGVudHMueTEpOworCWFzc2VydChleHRlbnRzLngyID4gZXh0ZW50cy54MSk7CiAKIAll
eHRlbnRzLngxICs9IGR4OwogCWV4dGVudHMueDIgKz0gZHg7CkBAIC0xMDYyLDEwICsxMDY5LDEw
IEBAIHN0cnVjdCBzbmFfZGFtYWdlICpfc25hX2RhbWFnZV9pc19hbGwoc3RydWN0IHNuYV9kYW1h
Z2UgKmRhbWFnZSwKIAkgICAgIGRhbWFnZS0+ZXh0ZW50cy54MiwgZGFtYWdlLT5leHRlbnRzLnky
KSk7CiAKIAlhc3NlcnQoZGFtYWdlLT5tb2RlID09IERBTUFHRV9BREQpOwotCWFzc2VydChkYW1h
Z2UtPmV4dGVudHMueDEgPT0gMCAmJgotCSAgICAgICBkYW1hZ2UtPmV4dGVudHMueTEgPT0gMCAm
JgotCSAgICAgICBkYW1hZ2UtPmV4dGVudHMueDIgPT0gd2lkdGggJiYKLQkgICAgICAgZGFtYWdl
LT5leHRlbnRzLnkyID09IGhlaWdodCk7CisJYXNzZXJ0KGRhbWFnZS0+ZXh0ZW50cy54MSA9PSAw
KTsKKwlhc3NlcnQoZGFtYWdlLT5leHRlbnRzLnkxID09IDApOworCWFzc2VydChkYW1hZ2UtPmV4
dGVudHMueDIgPT0gd2lkdGgpOworCWFzc2VydChkYW1hZ2UtPmV4dGVudHMueTIgPT0gaGVpZ2h0
KTsKIAogCWlmIChkYW1hZ2UtPmRpcnR5KSB7CiAJCV9fc25hX2RhbWFnZV9yZWR1Y2UoZGFtYWdl
KTsKQEAgLTEwNzcsMTAgKzEwODQsMTAgQEAgc3RydWN0IHNuYV9kYW1hZ2UgKl9zbmFfZGFtYWdl
X2lzX2FsbChzdHJ1Y3Qgc25hX2RhbWFnZSAqZGFtYWdlLAogCQlyZXR1cm4gZGFtYWdlOwogCX0K
IAotCWFzc2VydChkYW1hZ2UtPmV4dGVudHMueDEgPT0gMCAmJgotCSAgICAgICBkYW1hZ2UtPmV4
dGVudHMueTEgPT0gMCAmJgotCSAgICAgICBkYW1hZ2UtPmV4dGVudHMueDIgPT0gd2lkdGggJiYK
LQkgICAgICAgZGFtYWdlLT5leHRlbnRzLnkyID09IGhlaWdodCk7CisJYXNzZXJ0KGRhbWFnZS0+
ZXh0ZW50cy54MSA9PSAwKTsKKwlhc3NlcnQoZGFtYWdlLT5leHRlbnRzLnkxID09IDApOworCWFz
c2VydChkYW1hZ2UtPmV4dGVudHMueDIgPT0gd2lkdGgpOworCWFzc2VydChkYW1hZ2UtPmV4dGVu
dHMueTIgPT0gaGVpZ2h0KTsKIAogCXJldHVybiBfX3NuYV9kYW1hZ2VfYWxsKGRhbWFnZSwgd2lk
dGgsIGhlaWdodCk7CiB9CkBAIC0xMTkwLDcgKzExOTcsOCBAQCBmYXN0Y2FsbCBzdHJ1Y3Qgc25h
X2RhbWFnZSAqX3NuYV9kYW1hZ2Vfc3VidHJhY3Qoc3RydWN0IHNuYV9kYW1hZ2UgKmRhbWFnZSwK
IGlubGluZSBzdGF0aWMgc3RydWN0IHNuYV9kYW1hZ2UgKl9fc25hX2RhbWFnZV9zdWJ0cmFjdF9i
b3goc3RydWN0IHNuYV9kYW1hZ2UgKmRhbWFnZSwKIAkJCQkJCQkgICBjb25zdCBCb3hSZWMgKmJv
eCkKIHsKLQlhc3NlcnQoYm94LT54MiA+IGJveC0+eDEgJiYgYm94LT55MiA+IGJveC0+eTEpOwor
CWFzc2VydChib3gtPngyID4gYm94LT54MSk7CisJYXNzZXJ0KGJveC0+eTIgPiBib3gtPnkxKTsK
IAogCWlmIChkYW1hZ2UgPT0gTlVMTCkKIAkJcmV0dXJuIE5VTEw7CkBAIC0xMjc0LDEwICsxMjgy
LDEyIEBAIHN0YXRpYyBzdHJ1Y3Qgc25hX2RhbWFnZSAqX19zbmFfZGFtYWdlX3N1YnRyYWN0X2Jv
eGVzKHN0cnVjdCBzbmFfZGFtYWdlICpkYW1hZ2UsCiAKIAlhc3NlcnQobik7CiAKLQlhc3NlcnQo
Ym94WzBdLngyID4gYm94WzBdLngxICYmIGJveFswXS55MiA+IGJveFswXS55MSk7CisJYXNzZXJ0
KGJveFswXS54MiA+IGJveFswXS54MSk7CisJYXNzZXJ0KGJveFswXS55MiA+IGJveFswXS55MSk7
CiAJZXh0ZW50cyA9IGJveFswXTsKIAlmb3IgKGkgPSAxOyBpIDwgbjsgaSsrKSB7Ci0JCWFzc2Vy
dChib3hbaV0ueDIgPiBib3hbaV0ueDEgJiYgYm94W2ldLnkyID4gYm94W2ldLnkxKTsKKwkJYXNz
ZXJ0KGJveFtpXS54MiA+IGJveFtpXS54MSk7CisJCWFzc2VydChib3hbaV0ueTIgPiBib3hbaV0u
eTEpOwogCQlpZiAoZXh0ZW50cy54MSA+IGJveFtpXS54MSkKIAkJCWV4dGVudHMueDEgPSBib3hb
aV0ueDE7CiAJCWlmIChleHRlbnRzLngyIDwgYm94W2ldLngyKQpAQCAtMTI4OCw3ICsxMjk4LDgg
QEAgc3RhdGljIHN0cnVjdCBzbmFfZGFtYWdlICpfX3NuYV9kYW1hZ2Vfc3VidHJhY3RfYm94ZXMo
c3RydWN0IHNuYV9kYW1hZ2UgKmRhbWFnZSwKIAkJCWV4dGVudHMueTIgPSBib3hbaV0ueTI7CiAJ
fQogCi0JYXNzZXJ0KGV4dGVudHMueTIgPiBleHRlbnRzLnkxICYmIGV4dGVudHMueDIgPiBleHRl
bnRzLngxKTsKKwlhc3NlcnQoZXh0ZW50cy55MiA+IGV4dGVudHMueTEpOworCWFzc2VydChleHRl
bnRzLngyID4gZXh0ZW50cy54MSk7CiAKIAlleHRlbnRzLngxICs9IGR4OwogCWV4dGVudHMueDIg
Kz0gZHg7CkBAIC0xNDM3LDcgKzE0NDgsOCBAQCBib29sIF9zbmFfZGFtYWdlX2NvbnRhaW5zX2Jv
eF9fbm9fcmVkdWNlKGNvbnN0IHN0cnVjdCBzbmFfZGFtYWdlICpkYW1hZ2UsCiAJaW50IG4sIGNv
dW50OwogCWNvbnN0IEJveFJlYyAqYjsKIAotCWFzc2VydChkYW1hZ2UgJiYgZGFtYWdlLT5tb2Rl
ICE9IERBTUFHRV9BTEwpOworCWFzc2VydChkYW1hZ2UpOworCWFzc2VydChkYW1hZ2UtPm1vZGUg
IT0gREFNQUdFX0FMTCk7CiAJaWYgKCFib3hfY29udGFpbnMoJmRhbWFnZS0+ZXh0ZW50cywgYm94
KSkKIAkJcmV0dXJuIGZhbHNlOwogCkBAIC0xNDgxLDcgKzE0OTMsOCBAQCBib29sIF9zbmFfZGFt
YWdlX2NvbnRhaW5zX2JveF9fbm9fcmVkdWNlKGNvbnN0IHN0cnVjdCBzbmFfZGFtYWdlICpkYW1h
Z2UsCiBzdGF0aWMgYm9vbCBfX3NuYV9kYW1hZ2VfaW50ZXJzZWN0KHN0cnVjdCBzbmFfZGFtYWdl
ICpkYW1hZ2UsCiAJCQkJICAgUmVnaW9uUHRyIHJlZ2lvbiwgUmVnaW9uUHRyIHJlc3VsdCkKIHsK
LQlhc3NlcnQoZGFtYWdlICYmIGRhbWFnZS0+bW9kZSAhPSBEQU1BR0VfQUxMKTsKKwlhc3NlcnQo
ZGFtYWdlKTsKKwlhc3NlcnQoZGFtYWdlLT5tb2RlICE9IERBTUFHRV9BTEwpOwogCWFzc2VydChS
ZWdpb25Ob3RFbXB0eShyZWdpb24pKTsKIAogCWlmIChyZWdpb24tPmV4dGVudHMueDIgPD0gZGFt
YWdlLT5leHRlbnRzLngxIHx8CkBAIC0xNTM1LDcgKzE1NDgsOCBAQCBib29sIF9zbmFfZGFtYWdl
X2ludGVyc2VjdChzdHJ1Y3Qgc25hX2RhbWFnZSAqZGFtYWdlLAogCiBzdGF0aWMgaW50IF9fc25h
X2RhbWFnZV9nZXRfYm94ZXMoc3RydWN0IHNuYV9kYW1hZ2UgKmRhbWFnZSwgY29uc3QgQm94UmVj
ICoqYm94ZXMpCiB7Ci0JYXNzZXJ0KGRhbWFnZSAmJiBkYW1hZ2UtPm1vZGUgIT0gREFNQUdFX0FM
TCk7CisJYXNzZXJ0KGRhbWFnZSk7CisJYXNzZXJ0KGRhbWFnZS0+bW9kZSAhPSBEQU1BR0VfQUxM
KTsKIAogCWlmIChkYW1hZ2UtPmRpcnR5KQogCQlfX3NuYV9kYW1hZ2VfcmVkdWNlKGRhbWFnZSk7
CkBAIC0xODgwLDEwICsxODk0LDEwIEBAIHZvaWQgX3NuYV9kYW1hZ2VfZGVidWdfZ2V0X3JlZ2lv
bihzdHJ1Y3Qgc25hX2RhbWFnZSAqZGFtYWdlLCBSZWdpb25SZWMgKnIpCiAJCXBpeG1hbl9yZWdp
b25faW5pdF9yZWN0cyhyLCBib3hlcywgbmJveGVzKTsKIAogCQlhc3NlcnQocGl4bWFuX3JlZ2lv
bl9ub3RfZW1wdHkocikpOwotCQlhc3NlcnQoZGFtYWdlLT5leHRlbnRzLngxID09IHItPmV4dGVu
dHMueDEgJiYKLQkJICAgICAgIGRhbWFnZS0+ZXh0ZW50cy55MSA9PSByLT5leHRlbnRzLnkxICYm
Ci0JCSAgICAgICBkYW1hZ2UtPmV4dGVudHMueDIgPT0gci0+ZXh0ZW50cy54MiAmJgotCQkgICAg
ICAgZGFtYWdlLT5leHRlbnRzLnkyID09IHItPmV4dGVudHMueTIpOworCQlhc3NlcnQoZGFtYWdl
LT5leHRlbnRzLngxID09IHItPmV4dGVudHMueDEpOworCQlhc3NlcnQoZGFtYWdlLT5leHRlbnRz
LnkxID09IHItPmV4dGVudHMueTEpOworCQlhc3NlcnQoZGFtYWdlLT5leHRlbnRzLngyID09IHIt
PmV4dGVudHMueDIpOworCQlhc3NlcnQoZGFtYWdlLT5leHRlbnRzLnkyID09IHItPmV4dGVudHMu
eTIpOwogCX0gZWxzZSB7CiAJCXBpeG1hbl9yZWdpb24xNl90IHRtcDsKIApAQCAtMTg5MSwxMCAr
MTkwNSwxMCBAQCB2b2lkIF9zbmFfZGFtYWdlX2RlYnVnX2dldF9yZWdpb24oc3RydWN0IHNuYV9k
YW1hZ2UgKmRhbWFnZSwgUmVnaW9uUmVjICpyKQogCQlwaXhtYW5fcmVnaW9uX3N1YnRyYWN0KHIs
IHIsICZ0bXApOwogCQlwaXhtYW5fcmVnaW9uX2ZpbmkoJnRtcCk7CiAKLQkJYXNzZXJ0KGRhbWFn
ZS0+ZXh0ZW50cy54MSA8PSByLT5leHRlbnRzLngxICYmCi0JCSAgICAgICBkYW1hZ2UtPmV4dGVu
dHMueTEgPD0gci0+ZXh0ZW50cy55MSAmJgotCQkgICAgICAgZGFtYWdlLT5leHRlbnRzLngyID49
IHItPmV4dGVudHMueDIgJiYKLQkJICAgICAgIGRhbWFnZS0+ZXh0ZW50cy55MiA+PSByLT5leHRl
bnRzLnkyKTsKKwkJYXNzZXJ0KGRhbWFnZS0+ZXh0ZW50cy54MSA8PSByLT5leHRlbnRzLngxKTsK
KwkJYXNzZXJ0KGRhbWFnZS0+ZXh0ZW50cy55MSA8PSByLT5leHRlbnRzLnkxKTsKKwkJYXNzZXJ0
KGRhbWFnZS0+ZXh0ZW50cy54MiA+PSByLT5leHRlbnRzLngyKTsKKwkJYXNzZXJ0KGRhbWFnZS0+
ZXh0ZW50cy55MiA+PSByLT5leHRlbnRzLnkyKTsKIAl9CiAKIAlmcmVlKGJveGVzKTsKZGlmZiAt
LWdpdCBhL3NyYy9zbmEvc25hX2Rpc3BsYXkuYyBiL3NyYy9zbmEvc25hX2Rpc3BsYXkuYwppbmRl
eCAxMTllYTk4MS4uMjhiNzFlNzMgMTAwNjQ0Ci0tLSBhL3NyYy9zbmEvc25hX2Rpc3BsYXkuYwor
KysgYi9zcmMvc25hL3NuYV9kaXNwbGF5LmMKQEAgLTU2Niw3ICs1NjYsOCBAQCBzdGF0aWMgdm9p
ZCBhc3NlcnRfc2Nhbm91dChzdHJ1Y3Qga2dlbSAqa2dlbSwgc3RydWN0IGtnZW1fYm8gKmJvLAog
CWFzc2VydChkcm1Jb2N0bChrZ2VtLT5mZCwgRFJNX0lPQ1RMX01PREVfR0VURkIsICZpbmZvKSA9
PSAwKTsKIAlnZW1fY2xvc2Uoa2dlbS0+ZmQsIGluZm8uaGFuZGxlKTsKIAotCWFzc2VydCh3aWR0
aCA8PSBpbmZvLndpZHRoICYmIGhlaWdodCA8PSBpbmZvLmhlaWdodCk7CisJYXNzZXJ0KHdpZHRo
IDw9IGluZm8ud2lkdGgpOworCWFzc2VydChoZWlnaHQgPD0gaW5mby5oZWlnaHQpOwogfQogI2Vs
c2UKICNkZWZpbmUgYXNzZXJ0X3NjYW5vdXQoaywgYiwgdywgaCkKQEAgLTIwMzUsNyArMjAzNiw4
IEBAIHN0YXRpYyB2b2lkIHNuYV9jcnRjX3NsYXZlX2RhbWFnZShEYW1hZ2VQdHIgZGFtYWdlLCBS
ZWdpb25QdHIgcmVnaW9uLCB2b2lkICpjbG9zCiBzdGF0aWMgYm9vbCBzbmFfY3J0Y19lbmFibGVf
c2hhZG93KHN0cnVjdCBzbmEgKnNuYSwgc3RydWN0IHNuYV9jcnRjICpjcnRjKQogewogCWlmIChj
cnRjLT5zaGFkb3cpIHsKLQkJYXNzZXJ0KHNuYS0+bW9kZS5zaGFkb3dfZGFtYWdlICYmIHNuYS0+
bW9kZS5zaGFkb3dfYWN0aXZlKTsKKwkJYXNzZXJ0KHNuYS0+bW9kZS5zaGFkb3dfZGFtYWdlKTsK
KwkJYXNzZXJ0KHNuYS0+bW9kZS5zaGFkb3dfYWN0aXZlKTsKIAkJcmV0dXJuIHRydWU7CiAJfQog
CkBAIC0yMzcwLDcgKzIzNzIsOCBAQCBzdGF0aWMgYm9vbCB1c2Vfc2hhZG93KHN0cnVjdCBzbmEg
KnNuYSwgeGY4NkNydGNQdHIgY3J0YykKIAl1bnNpZ25lZCBwaXRjaF9saW1pdDsKIAlCb3hSZWMg
YjsKIAotCWFzc2VydChzbmEtPnNjcm4tPnZpcnR1YWxYICYmIHNuYS0+c2Nybi0+dmlydHVhbFkp
OworCWFzc2VydChzbmEtPnNjcm4tPnZpcnR1YWxYKTsKKwlhc3NlcnQoc25hLT5zY3JuLT52aXJ0
dWFsWSk7CiAKIAlpZiAoc25hLT5mbGFncyAmIFNOQV9GT1JDRV9TSEFET1cpIHsKIAkJREJHKCgi
JXM6IGZvcmNpbmcgc2hhZG93XG4iLCBfX0ZVTkNUSU9OX18pKTsKQEAgLTI5NTYsNyArMjk1OSw4
IEBAIHNuYV9jcnRjX2RhbWFnZSh4Zjg2Q3J0Y1B0ciBjcnRjKQogCSAgICAgcmVnaW9uLmV4dGVu
dHMueDEsIHJlZ2lvbi5leHRlbnRzLnkxLAogCSAgICAgcmVnaW9uLmV4dGVudHMueDIsIHJlZ2lv
bi5leHRlbnRzLnkyKSk7CiAKLQlhc3NlcnQoc25hLT5tb2RlLnNoYWRvd19kYW1hZ2UgJiYgc25h
LT5tb2RlLnNoYWRvd19hY3RpdmUpOworCWFzc2VydChzbmEtPm1vZGUuc2hhZG93X2RhbWFnZSk7
CisJYXNzZXJ0KHNuYS0+bW9kZS5zaGFkb3dfYWN0aXZlKTsKIAlkYW1hZ2UgPSBEYW1hZ2VSZWdp
b24oc25hLT5tb2RlLnNoYWRvd19kYW1hZ2UpOwogCVJlZ2lvblVuaW9uKGRhbWFnZSwgZGFtYWdl
LCAmcmVnaW9uKTsKIAl0b19zbmFfY3J0YyhjcnRjKS0+Y3J0Y19kYW1hZ2UgPSByZWdpb247CkBA
IC0zMTQ1LDggKzMxNDksOCBAQCBzbmFfY3J0Y19zZXRfbW9kZV9tYWpvcih4Zjg2Q3J0Y1B0ciBj
cnRjLCBEaXNwbGF5TW9kZVB0ciBtb2RlLAogCQkgICBvdXRwdXRzX2Zvcl9jcnRjKGNydGMsIG91
dHB1dHMsIHNpemVvZihvdXRwdXRzKSksIF9fc25hX2NydGNfcGlwZShzbmFfY3J0YyksCiAJCSAg
IHgsIHksIHJvdGF0aW9uX3RvX3N0cihyb3RhdGlvbiksIHJlZmxlY3Rpb25fdG9fc3RyKHJvdGF0
aW9uKSk7CiAKLQlhc3NlcnQobW9kZS0+SERpc3BsYXkgPD0gc25hLT5tb2RlLm1heF9jcnRjX3dp
ZHRoICYmCi0JICAgICAgIG1vZGUtPlZEaXNwbGF5IDw9IHNuYS0+bW9kZS5tYXhfY3J0Y19oZWln
aHQpOworCWFzc2VydChtb2RlLT5IRGlzcGxheSA8PSBzbmEtPm1vZGUubWF4X2NydGNfd2lkdGgp
OworCWFzc2VydChtb2RlLT5WRGlzcGxheSA8PSBzbmEtPm1vZGUubWF4X2NydGNfaGVpZ2h0KTsK
IAogI2lmIEhBU19HQU1NQQogCWRybU1vZGVDcnRjU2V0R2FtbWEoc25hLT5rZ2VtLmZkLCBfX3Nu
YV9jcnRjX2lkKHNuYV9jcnRjKSwKZGlmZiAtLWdpdCBhL3NyYy9zbmEvc25hX2dseXBocy5jIGIv
c3JjL3NuYS9zbmFfZ2x5cGhzLmMKaW5kZXggNmVlNDAzMzYuLjAyMGRlOGUwIDEwMDY0NAotLS0g
YS9zcmMvc25hL3NuYV9nbHlwaHMuYworKysgYi9zcmMvc25hL3NuYV9nbHlwaHMuYwpAQCAtNjg1
LDcgKzY4NSw4IEBAIGdseXBoc190b19kc3Qoc3RydWN0IHNuYSAqc25hLAogCQkJCQkJaWYgKHky
ID4gcmVjdHNbaV0ueTIpCiAJCQkJCQkJeTIgPSByZWN0c1tpXS55MjsKIAotCQkJCQkJYXNzZXJ0
KGR4ID49IDAgJiYgZHkgPj0gMCk7CisJCQkJCQlhc3NlcnQoZHggPj0gMCk7CisJCQkJCQlhc3Nl
cnQoZHkgPj0gMCk7CiAKIAkJCQkJCWlmIChyLmRzdC54IDwgeDIgJiYgci5kc3QueSA8IHkyKSB7
CiAJCQkJCQkJREJHKCgiJXM6IGJsdD0oJWQsICVkKSwgKCVkLCAlZClcbiIsCkBAIC04MzQsNyAr
ODM1LDggQEAgZ2x5cGhzMF90b19kc3Qoc3RydWN0IHNuYSAqc25hLAogCQkJCQkJaWYgKHkyID4g
cmVjdHNbaV0ueTIpCiAJCQkJCQkJeTIgPSByZWN0c1tpXS55MjsKIAotCQkJCQkJYXNzZXJ0KGR4
ID49IDAgJiYgZHkgPj0gMCk7CisJCQkJCQlhc3NlcnQoZHggPj0gMCk7CisJCQkJCQlhc3NlcnQo
ZHkgPj0gMCk7CiAKIAkJCQkJCWlmIChyLmRzdC54IDwgeDIgJiYgci5kc3QueSA8IHkyKSB7CiAJ
CQkJCQkJREJHKCgiJXM6IGJsdD0oJWQsICVkKSwgKCVkLCAlZClcbiIsCkBAIC0xMDc2LDcgKzEw
NzgsOCBAQCBfX3NuYV9nbHlwaF9nZXRfaW1hZ2UoR2x5cGhQdHIgZywgU2NyZWVuUHRyIHMpCiAJ
aWYgKCFpbWFnZSkKIAkJcmV0dXJuIE5VTEw7CiAKLQlhc3NlcnQoZHggPT0gMCAmJiBkeSA9PSAw
KTsKKwlhc3NlcnQoZHggPT0gMCk7CisJYXNzZXJ0KGR5ID09IDApOwogCXJldHVybiBzbmFfZ2x5
cGgoZyktPmltYWdlID0gaW1hZ2U7CiB9CiAKZGlmZiAtLWdpdCBhL3NyYy9zbmEvc25hX3JlbmRl
ci5jIGIvc3JjL3NuYS9zbmFfcmVuZGVyLmMKaW5kZXggMTc4N2ZmYWUuLmUxNTAyYTNiIDEwMDY0
NAotLS0gYS9zcmMvc25hL3NuYV9yZW5kZXIuYworKysgYi9zcmMvc25hL3NuYV9yZW5kZXIuYwpA
QCAtNzU1LDcgKzc1NSw4IEBAIHN0YXRpYyBpbnQgc25hX3JlbmRlcl9waWN0dXJlX2Rvd25zYW1w
bGUoc3RydWN0IHNuYSAqc25hLAogCQlnb3RvIGZpeHVwOwogCiAJcHJpdiA9IHNuYV9waXhtYXAo
dG1wKTsKLQlhc3NlcnQocHJpdiAmJiBwcml2LT5ncHVfYm8pOworCWFzc2VydChwcml2KTsKKwlh
c3NlcnQocHJpdi0+Z3B1X2JvKTsKIAogCWlmICghc25hX3BpeG1hcF9tb3ZlX3RvX2dwdShwaXht
YXAsIE1PVkVfQVNZTkNfSElOVCB8IE1PVkVfU09VUkNFX0hJTlQgfCBNT1ZFX1JFQUQpKSB7CiBm
aXh1cDoKQEAgLTEzMjUsNyArMTMyNiw4IEBAIHNuYV9yZW5kZXJfcGljdHVyZV9jb252b2x2ZShz
dHJ1Y3Qgc25hICpzbmEsCiAKIAlhc3NlcnQocGljdHVyZS0+cERyYXdhYmxlKTsKIAlhc3NlcnQo
cGljdHVyZS0+ZmlsdGVyID09IFBpY3RGaWx0ZXJDb252b2x1dGlvbik7Ci0JYXNzZXJ0KHcgPD0g
c25hLT5yZW5kZXIubWF4XzNkX3NpemUgJiYgaCA8PSBzbmEtPnJlbmRlci5tYXhfM2Rfc2l6ZSk7
CisJYXNzZXJ0KHcgPD0gc25hLT5yZW5kZXIubWF4XzNkX3NpemUpOworCWFzc2VydChoIDw9IHNu
YS0+cmVuZGVyLm1heF8zZF9zaXplKTsKIAogCWlmIChQSUNUX0ZPUk1BVF9SR0IocGljdHVyZS0+
Zm9ybWF0KSA9PSAwKSB7CiAJCWNoYW5uZWwtPnBpY3RfZm9ybWF0ID0gUElYTUFOX2E4OwpAQCAt
MTQxMyw3ICsxNDE1LDggQEAgc25hX3JlbmRlcl9waWN0dXJlX2ZsYXR0ZW4oc3RydWN0IHNuYSAq
c25hLAogCiAJYXNzZXJ0KHBpY3R1cmUtPnBEcmF3YWJsZSk7CiAJYXNzZXJ0KHBpY3R1cmUtPmFs
cGhhTWFwKTsKLQlhc3NlcnQodyA8PSBzbmEtPnJlbmRlci5tYXhfM2Rfc2l6ZSAmJiBoIDw9IHNu
YS0+cmVuZGVyLm1heF8zZF9zaXplKTsKKwlhc3NlcnQodyA8PSBzbmEtPnJlbmRlci5tYXhfM2Rf
c2l6ZSk7CisJYXNzZXJ0KGggPD0gc25hLT5yZW5kZXIubWF4XzNkX3NpemUpOwogCiAJLyogWFhY
IHNob3J0Y3V0IGE4PyAqLwogCURCRygoIiVzOiAlZHglZFxuIiwgX19GVU5DVElPTl9fLCB3LCBo
KSk7CmRpZmYgLS1naXQgYS9zcmMvc25hL3NuYV9yZW5kZXJfaW5saW5lLmggYi9zcmMvc25hL3Nu
YV9yZW5kZXJfaW5saW5lLmgKaW5kZXggZjJkOWMyMjYuLmEzODU0ODQ4IDEwMDY0NAotLS0gYS9z
cmMvc25hL3NuYV9yZW5kZXJfaW5saW5lLmgKKysrIGIvc3JjL3NuYS9zbmFfcmVuZGVyX2lubGlu
ZS5oCkBAIC0yNTIsNyArMjUyLDggQEAgc25hX3JlbmRlcl9waWN0dXJlX2V4dGVudHMoUGljdHVy
ZVB0ciBwLCBCb3hSZWMgKmJveCkKIAlpZiAoYm94LT55MiA+IHAtPnBDb21wb3NpdGVDbGlwLT5l
eHRlbnRzLnkyKQogCQlib3gtPnkyID0gcC0+cENvbXBvc2l0ZUNsaXAtPmV4dGVudHMueTI7CiAK
LQlhc3NlcnQoYm94LT54MiA+IGJveC0+eDEgJiYgYm94LT55MiA+IGJveC0+eTEpOworCWFzc2Vy
dChib3gtPngyID4gYm94LT54MSk7CisJYXNzZXJ0KGJveC0+eTIgPiBib3gtPnkxKTsKIH0KIAog
c3RhdGljIGlubGluZSB2b2lkCmRpZmYgLS1naXQgYS9zcmMvc25hL3NuYV90aHJlYWRzLmMgYi9z
cmMvc25hL3NuYV90aHJlYWRzLmMKaW5kZXggZjljNmIxZTguLjJkYjRlMTA4IDEwMDY0NAotLS0g
YS9zcmMvc25hL3NuYV90aHJlYWRzLmMKKysrIGIvc3JjL3NuYS9zbmFfdGhyZWFkcy5jCkBAIC0x
NzYsNyArMTc2LDggQEAgdm9pZCBzbmFfdGhyZWFkc19ydW4oaW50IGlkLCB2b2lkICgqZnVuYyko
dm9pZCAqYXJnKSwgdm9pZCAqYXJnKQogewogCWFzc2VydChtYXhfdGhyZWFkcyA+IDApOwogCWFz
c2VydChwdGhyZWFkX3NlbGYoKSA9PSB0aHJlYWRzWzBdLnRocmVhZCk7Ci0JYXNzZXJ0KGlkID4g
MCAmJiBpZCA8IG1heF90aHJlYWRzKTsKKwlhc3NlcnQoaWQgPiAwKTsKKwlhc3NlcnQoaWQgPCBt
YXhfdGhyZWFkcyk7CiAKIAlhc3NlcnQodGhyZWFkc1tpZF0uZnVuYyA9PSBOVUxMKTsKIApkaWZm
IC0tZ2l0IGEvc3JjL3NuYS9zbmFfdHJhcGV6b2lkc19pbXByZWNpc2UuYyBiL3NyYy9zbmEvc25h
X3RyYXBlem9pZHNfaW1wcmVjaXNlLmMKaW5kZXggOGJjN2M4YTguLjY5MTQ0MDI0IDEwMDY0NAot
LS0gYS9zcmMvc25hL3NuYV90cmFwZXpvaWRzX2ltcHJlY2lzZS5jCisrKyBiL3NyYy9zbmEvc25h
X3RyYXBlem9pZHNfaW1wcmVjaXNlLmMKQEAgLTUzMSw3ICs1MzEsOCBAQCBwb2x5Z29uX2FkZF9l
ZGdlKHN0cnVjdCBwb2x5Z29uICpwb2x5Z29uLAogCQkJKytlLT54LnF1bzsKIAkJCWUtPngucmVt
IC09IEV5OwogCQl9Ci0JCWFzc2VydChlLT54LnJlbSA+PSAwICYmIGUtPngucmVtIDwgRXkpOwor
CQlhc3NlcnQoZS0+eC5yZW0gPj0gMCk7CisJCWFzc2VydChlLT54LnJlbSA8IEV5KTsKIAogCQll
LT5jZWxsID0gZS0+eC5xdW8gKyAoZS0+eC5yZW0gPj0gRXkvMik7CiAJCWUtPmR5ID0gRXk7CkBA
IC0xMjMyLDcgKzEyMzMsOCBAQCB0b3JfcmVuZGVyKHN0cnVjdCBzbmEgKnNuYSwKIAkJCQlkb19m
dWxsX3N0ZXAgLT0gRkFTVF9TQU1QTEVTX1k7CiAJCQkJaisrOwogCQkJfQotCQkJYXNzZXJ0KGog
Pj0gaSArIDEgJiYgaiA8PSBoKTsKKwkJCWFzc2VydChqID49IGkgKyAxKTsKKwkJCWFzc2VydChq
IDw9IGgpOwogCQkJaWYgKGogIT0gaSArIDEpCiAJCQkJc3RlcF9lZGdlcyhhY3RpdmUsIGogLSAo
aSArIDEpKTsKIApAQCAtMTYyNCw3ICsxNjI2LDggQEAgdG9yX2lucGxhY2Uoc3RydWN0IHRvciAq
Y29udmVydGVyLCBQaXhtYXBQdHIgc2NyYXRjaCwgaW50IG1vbm8sIHVpbnQ4X3QgKmJ1ZikKIAog
CQkJCWlucGxhY2Vfc3Vicm93KGFjdGl2ZSwgcHRyLCB3aWR0aCwgJm1pbiwgJm1heCk7CiAJCQl9
Ci0JCQlhc3NlcnQobWluID49IDAgJiYgbWF4IDw9IHdpZHRoKTsKKwkJCWFzc2VydChtaW4gPj0g
MCk7CisJCQlhc3NlcnQobWF4IDw9IHdpZHRoKTsKIAkJCW1lbXNldChyb3csIDAsIG1pbik7CiAJ
CQlpZiAobWF4ID4gbWluKSB7CiAJCQkJaW5wbGFjZV9lbmRfc3Vicm93cyhhY3RpdmUsIHJvdytt
aW4sIChpbnQ4X3QqKXB0cittaW4sIG1heC1taW4pOwpkaWZmIC0tZ2l0IGEvc3JjL3NuYS9zbmFf
dHJhcGV6b2lkc19wcmVjaXNlLmMgYi9zcmMvc25hL3NuYV90cmFwZXpvaWRzX3ByZWNpc2UuYwpp
bmRleCAyNDJiNGFjYi4uMmYxZDdlN2YgMTAwNjQ0Ci0tLSBhL3NyYy9zbmEvc25hX3RyYXBlem9p
ZHNfcHJlY2lzZS5jCisrKyBiL3NyYy9zbmEvc25hX3RyYXBlem9pZHNfcHJlY2lzZS5jCkBAIC01
MDAsNyArNTAwLDggQEAgc3RhdGljIGlubGluZSBpbnQgZWRnZV9hZHZhbmNlKHN0cnVjdCBlZGdl
ICplKQogCQllLT54LnF1bysrOwogCQllLT54LnJlbSAtPSBlLT5keTsKIAl9Ci0JYXNzZXJ0KGUt
PngucmVtID49IDAgJiYgZS0+eC5yZW0gPCBlLT5keSk7CisJYXNzZXJ0KGUtPngucmVtID49IDAp
OworCWFzc2VydChlLT54LnJlbSA8IGUtPmR5KTsKIAlyZXR1cm4gZWRnZV90b19jZWxsKGUpOwog
fQogCkBAIC01ODMsNyArNTg0LDggQEAgcG9seWdvbl9hZGRfZWRnZShzdHJ1Y3QgcG9seWdvbiAq
cG9seWdvbiwKIAkJCWUtPngucXVvKys7CiAJCQllLT54LnJlbSAtPSBFeTsKIAkJfQotCQlhc3Nl
cnQoZS0+eC5yZW0gPj0gMCAmJiBlLT54LnJlbSA8IEV5KTsKKwkJYXNzZXJ0KGUtPngucmVtID49
IDApOworCQlhc3NlcnQoZS0+eC5yZW0gPCBFeSk7CiAKIAkJZS0+ZHkgPSBFeTsKIAkJZS0+Y2Vs
bCA9IGVkZ2VfdG9fY2VsbChlKTsKQEAgLTY4NSw3ICs2ODcsOCBAQCBwb2x5Z29uX2FkZF9saW5l
KHN0cnVjdCBwb2x5Z29uICpwb2x5Z29uLAogCQkJZS0+eC5xdW8rKzsKIAkJCWUtPngucmVtIC09
IEV5OwogCQl9Ci0JCWFzc2VydChlLT54LnJlbSA+PSAwICYmIGUtPngucmVtIDwgRXkpOworCQlh
c3NlcnQoZS0+eC5yZW0gPj0gMCk7CisJCWFzc2VydChlLT54LnJlbSA8IEV5KTsKIAogCQllLT5k
eSA9IEV5OwogCQllLT5jZWxsID0gZWRnZV90b19jZWxsKGUpOwpAQCAtMTI0MCw3ICsxMjQzLDgg
QEAgdG9yX3JlbmRlcihzdHJ1Y3Qgc25hICpzbmEsCiAJCQkJZG9fZnVsbF9zdGVwIC09IFNBTVBM
RVNfWTsKIAkJCQlqKys7CiAJCQl9Ci0JCQlhc3NlcnQoaiA+PSBpICsgMSAmJiBqIDw9IGgpOwor
CQkJYXNzZXJ0KGogPj0gaSArIDEpOworCQkJYXNzZXJ0KGogPD0gaCk7CiAJCQlpZiAoaiAhPSBp
ICsgMSkKIAkJCQlzdGVwX2VkZ2VzKGFjdGl2ZSwgaiAtIChpICsgMSkpOwogCmRpZmYgLS1naXQg
YS9zcmMvc25hL3NuYV92aWRlby5jIGIvc3JjL3NuYS9zbmFfdmlkZW8uYwppbmRleCBiN2FhNjYy
NC4uMGE2MTA2ZjYgMTAwNjQ0Ci0tLSBhL3NyYy9zbmEvc25hX3ZpZGVvLmMKKysrIGIvc3JjL3Nu
YS9zbmFfdmlkZW8uYwpAQCAtMjEzLDcgKzIxMyw4IEBAIHNuYV92aWRlb19mcmFtZV9pbml0KHN0
cnVjdCBzbmFfdmlkZW8gKnZpZGVvLAogewogCURCRygoIiVzOiBpZD0lZCBbcGxhbmFyPyAlZF0s
IHdpZHRoPSVkLCBoZWlnaHQ9JWQsIGFsaWduPSVkXG4iLAogCSAgICAgX19GVU5DVElPTl9fLCBp
ZCwgaXNfcGxhbmFyX2ZvdXJjYyhpZCksIHdpZHRoLCBoZWlnaHQsIHZpZGVvLT5hbGlnbm1lbnQp
KTsKLQlhc3NlcnQod2lkdGggJiYgaGVpZ2h0KTsKKwlhc3NlcnQod2lkdGgpOworCWFzc2VydCho
ZWlnaHQpOwogCiAJZnJhbWUtPmJvID0gTlVMTDsKIAlmcmFtZS0+aWQgPSBpZDsKQEAgLTY3Nyw3
ICs2NzgsOCBAQCBzbmFfdmlkZW9fY29weV9kYXRhKHN0cnVjdCBzbmFfdmlkZW8gKnZpZGVvLAog
CSAgICAgX19GVU5DVElPTl9fLAogCSAgICAgZnJhbWUtPmltYWdlLngxLCBmcmFtZS0+aW1hZ2Uu
eTEsIGZyYW1lLT5pbWFnZS54MiwgZnJhbWUtPmltYWdlLnkyLAogCSAgICAgZnJhbWUtPnNyYy54
MSwgZnJhbWUtPnNyYy55MSwgZnJhbWUtPnNyYy54MiwgZnJhbWUtPnNyYy55MikpOwotCWFzc2Vy
dChmcmFtZS0+d2lkdGggJiYgZnJhbWUtPmhlaWdodCk7CisJYXNzZXJ0KGZyYW1lLT53aWR0aCk7
CisJYXNzZXJ0KGZyYW1lLT5oZWlnaHQpOwogCWFzc2VydChmcmFtZS0+cm90YXRpb24pOwogCWFz
c2VydChmcmFtZS0+c2l6ZSk7CiAK
--00000000000039315005883d199a
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: base64
Content-Disposition: inline

X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4
IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

--00000000000039315005883d199a--

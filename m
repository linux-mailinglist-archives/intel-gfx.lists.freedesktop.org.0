Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 914B7115DA7
	for <lists+intel-gfx@lfdr.de>; Sat,  7 Dec 2019 18:01:46 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E5E366E1F3;
	Sat,  7 Dec 2019 17:01:44 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 298306E1F3
 for <intel-gfx@lists.freedesktop.org>; Sat,  7 Dec 2019 17:01:43 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19496904-1500050 
 for multiple; Sat, 07 Dec 2019 17:01:11 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Sat,  7 Dec 2019 17:01:03 +0000
Message-Id: <20191207170110.2200142-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 1/8] drm/i915: Fix cmdparser drm.debug
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIGNtZHBhcnNlciByZWplY3Rpb24gZGVidWcgaXMgbm90IGZvciBkcml2ZXIgZGV2ZWxvcG1l
bnQsIGJ1dCBmb3IgdGhlCnVzZXIsIGZvciB3aGljaCB3ZSB1c2UgYSBwbGFpbiBEUk1fREVCVUco
KS4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVr
PgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfY21kX3BhcnNlci5jIHwgNTUgKysrKysr
KysrKysrKy0tLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAyNyBpbnNlcnRpb25zKCspLCAy
OCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Nt
ZF9wYXJzZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfY21kX3BhcnNlci5jCmluZGV4
IDJlZDQ5N2U3YzlmZC4uN2I3MDYxOTczYzVlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2NtZF9wYXJzZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Nt
ZF9wYXJzZXIuYwpAQCAtNzMxLDcgKzczMSw3IEBAIHN0YXRpYyB1MzIgZ2VuN19yZW5kZXJfZ2V0
X2NtZF9sZW5ndGhfbWFzayh1MzIgY21kX2hlYWRlcikKIAkJCXJldHVybiAweEZGOwogCX0KIAot
CURSTV9ERUJVR19EUklWRVIoIkNNRDogQWJub3JtYWwgcmNzIGNtZCBsZW5ndGghIDB4JTA4WFxu
IiwgY21kX2hlYWRlcik7CisJRFJNX0RFQlVHKCJDTUQ6IEFibm9ybWFsIHJjcyBjbWQgbGVuZ3Ro
ISAweCUwOFhcbiIsIGNtZF9oZWFkZXIpOwogCXJldHVybiAwOwogfQogCkBAIC03NTQsNyArNzU0
LDcgQEAgc3RhdGljIHUzMiBnZW43X2JzZF9nZXRfY21kX2xlbmd0aF9tYXNrKHUzMiBjbWRfaGVh
ZGVyKQogCQkJcmV0dXJuIDB4RkY7CiAJfQogCi0JRFJNX0RFQlVHX0RSSVZFUigiQ01EOiBBYm5v
cm1hbCBic2QgY21kIGxlbmd0aCEgMHglMDhYXG4iLCBjbWRfaGVhZGVyKTsKKwlEUk1fREVCVUco
IkNNRDogQWJub3JtYWwgYnNkIGNtZCBsZW5ndGghIDB4JTA4WFxuIiwgY21kX2hlYWRlcik7CiAJ
cmV0dXJuIDA7CiB9CiAKQEAgLTc2Nyw3ICs3NjcsNyBAQCBzdGF0aWMgdTMyIGdlbjdfYmx0X2dl
dF9jbWRfbGVuZ3RoX21hc2sodTMyIGNtZF9oZWFkZXIpCiAJZWxzZSBpZiAoY2xpZW50ID09IElO
U1RSX0JDX0NMSUVOVCkKIAkJcmV0dXJuIDB4RkY7CiAKLQlEUk1fREVCVUdfRFJJVkVSKCJDTUQ6
IEFibm9ybWFsIGJsdCBjbWQgbGVuZ3RoISAweCUwOFhcbiIsIGNtZF9oZWFkZXIpOworCURSTV9E
RUJVRygiQ01EOiBBYm5vcm1hbCBibHQgY21kIGxlbmd0aCEgMHglMDhYXG4iLCBjbWRfaGVhZGVy
KTsKIAlyZXR1cm4gMDsKIH0KIApAQCAtNzc4LDcgKzc3OCw3IEBAIHN0YXRpYyB1MzIgZ2VuOV9i
bHRfZ2V0X2NtZF9sZW5ndGhfbWFzayh1MzIgY21kX2hlYWRlcikKIAlpZiAoY2xpZW50ID09IElO
U1RSX01JX0NMSUVOVCB8fCBjbGllbnQgPT0gSU5TVFJfQkNfQ0xJRU5UKQogCQlyZXR1cm4gMHhG
RjsKIAotCURSTV9ERUJVR19EUklWRVIoIkNNRDogQWJub3JtYWwgYmx0IGNtZCBsZW5ndGghIDB4
JTA4WFxuIiwgY21kX2hlYWRlcik7CisJRFJNX0RFQlVHKCJDTUQ6IEFibm9ybWFsIGJsdCBjbWQg
bGVuZ3RoISAweCUwOFhcbiIsIGNtZF9oZWFkZXIpOwogCXJldHVybiAwOwogfQogCkBAIC0xMjEx
LDcgKzEyMTEsNyBAQCBzdGF0aWMgYm9vbCBjaGVja19jbWQoY29uc3Qgc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lLAogCQlyZXR1cm4gdHJ1ZTsKIAogCWlmIChkZXNjLT5mbGFncyAmIENN
RF9ERVNDX1JFSkVDVCkgewotCQlEUk1fREVCVUdfRFJJVkVSKCJDTUQ6IFJlamVjdGVkIGNvbW1h
bmQ6IDB4JTA4WFxuIiwgKmNtZCk7CisJCURSTV9ERUJVRygiQ01EOiBSZWplY3RlZCBjb21tYW5k
OiAweCUwOFhcbiIsICpjbWQpOwogCQlyZXR1cm4gZmFsc2U7CiAJfQogCkBAIC0xMjMxLDggKzEy
MzEsOCBAQCBzdGF0aWMgYm9vbCBjaGVja19jbWQoY29uc3Qgc3RydWN0IGludGVsX2VuZ2luZV9j
cyAqZW5naW5lLAogCQkJCWZpbmRfcmVnKGVuZ2luZSwgcmVnX2FkZHIpOwogCiAJCQlpZiAoIXJl
ZykgewotCQkJCURSTV9ERUJVR19EUklWRVIoIkNNRDogUmVqZWN0ZWQgcmVnaXN0ZXIgMHglMDhY
IGluIGNvbW1hbmQ6IDB4JTA4WCAoJXMpXG4iLAotCQkJCQkJIHJlZ19hZGRyLCAqY21kLCBlbmdp
bmUtPm5hbWUpOworCQkJCURSTV9ERUJVRygiQ01EOiBSZWplY3RlZCByZWdpc3RlciAweCUwOFgg
aW4gY29tbWFuZDogMHglMDhYICglcylcbiIsCisJCQkJCSAgcmVnX2FkZHIsICpjbWQsIGVuZ2lu
ZS0+bmFtZSk7CiAJCQkJcmV0dXJuIGZhbHNlOwogCQkJfQogCkBAIC0xMjQyLDIyICsxMjQyLDIy
IEBAIHN0YXRpYyBib29sIGNoZWNrX2NtZChjb25zdCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUsCiAJCQkgKi8KIAkJCWlmIChyZWctPm1hc2spIHsKIAkJCQlpZiAoZGVzYy0+Y21kLnZh
bHVlID09IE1JX0xPQURfUkVHSVNURVJfTUVNKSB7Ci0JCQkJCURSTV9ERUJVR19EUklWRVIoIkNN
RDogUmVqZWN0ZWQgTFJNIHRvIG1hc2tlZCByZWdpc3RlciAweCUwOFhcbiIsCi0JCQkJCQkJIHJl
Z19hZGRyKTsKKwkJCQkJRFJNX0RFQlVHKCJDTUQ6IFJlamVjdGVkIExSTSB0byBtYXNrZWQgcmVn
aXN0ZXIgMHglMDhYXG4iLAorCQkJCQkJICByZWdfYWRkcik7CiAJCQkJCXJldHVybiBmYWxzZTsK
IAkJCQl9CiAKIAkJCQlpZiAoZGVzYy0+Y21kLnZhbHVlID09IE1JX0xPQURfUkVHSVNURVJfUkVH
KSB7Ci0JCQkJCURSTV9ERUJVR19EUklWRVIoIkNNRDogUmVqZWN0ZWQgTFJSIHRvIG1hc2tlZCBy
ZWdpc3RlciAweCUwOFhcbiIsCi0JCQkJCQkJIHJlZ19hZGRyKTsKKwkJCQkJRFJNX0RFQlVHKCJD
TUQ6IFJlamVjdGVkIExSUiB0byBtYXNrZWQgcmVnaXN0ZXIgMHglMDhYXG4iLAorCQkJCQkJICBy
ZWdfYWRkcik7CiAJCQkJCXJldHVybiBmYWxzZTsKIAkJCQl9CiAKIAkJCQlpZiAoZGVzYy0+Y21k
LnZhbHVlID09IE1JX0xPQURfUkVHSVNURVJfSU1NKDEpICYmCiAJCQkJICAgIChvZmZzZXQgKyAy
ID4gbGVuZ3RoIHx8CiAJCQkJICAgICAoY21kW29mZnNldCArIDFdICYgcmVnLT5tYXNrKSAhPSBy
ZWctPnZhbHVlKSkgewotCQkJCQlEUk1fREVCVUdfRFJJVkVSKCJDTUQ6IFJlamVjdGVkIExSSSB0
byBtYXNrZWQgcmVnaXN0ZXIgMHglMDhYXG4iLAotCQkJCQkJCSByZWdfYWRkcik7CisJCQkJCURS
TV9ERUJVRygiQ01EOiBSZWplY3RlZCBMUkkgdG8gbWFza2VkIHJlZ2lzdGVyIDB4JTA4WFxuIiwK
KwkJCQkJCSAgcmVnX2FkZHIpOwogCQkJCQlyZXR1cm4gZmFsc2U7CiAJCQkJfQogCQkJfQpAQCAt
MTI4NCw4ICsxMjg0LDggQEAgc3RhdGljIGJvb2wgY2hlY2tfY21kKGNvbnN0IHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSwKIAkJCX0KIAogCQkJaWYgKGRlc2MtPmJpdHNbaV0ub2Zmc2V0
ID49IGxlbmd0aCkgewotCQkJCURSTV9ERUJVR19EUklWRVIoIkNNRDogUmVqZWN0ZWQgY29tbWFu
ZCAweCUwOFgsIHRvbyBzaG9ydCB0byBjaGVjayBiaXRtYXNrICglcylcbiIsCi0JCQkJCQkgKmNt
ZCwgZW5naW5lLT5uYW1lKTsKKwkJCQlEUk1fREVCVUcoIkNNRDogUmVqZWN0ZWQgY29tbWFuZCAw
eCUwOFgsIHRvbyBzaG9ydCB0byBjaGVjayBiaXRtYXNrICglcylcbiIsCisJCQkJCSAgKmNtZCwg
ZW5naW5lLT5uYW1lKTsKIAkJCQlyZXR1cm4gZmFsc2U7CiAJCQl9CiAKQEAgLTEyOTMsMTEgKzEy
OTMsMTEgQEAgc3RhdGljIGJvb2wgY2hlY2tfY21kKGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSwKIAkJCQlkZXNjLT5iaXRzW2ldLm1hc2s7CiAKIAkJCWlmIChkd29yZCAhPSBk
ZXNjLT5iaXRzW2ldLmV4cGVjdGVkKSB7Ci0JCQkJRFJNX0RFQlVHX0RSSVZFUigiQ01EOiBSZWpl
Y3RlZCBjb21tYW5kIDB4JTA4WCBmb3IgYml0bWFzayAweCUwOFggKGV4cD0weCUwOFggYWN0PTB4
JTA4WCkgKCVzKVxuIiwKLQkJCQkJCSAqY21kLAotCQkJCQkJIGRlc2MtPmJpdHNbaV0ubWFzaywK
LQkJCQkJCSBkZXNjLT5iaXRzW2ldLmV4cGVjdGVkLAotCQkJCQkJIGR3b3JkLCBlbmdpbmUtPm5h
bWUpOworCQkJCURSTV9ERUJVRygiQ01EOiBSZWplY3RlZCBjb21tYW5kIDB4JTA4WCBmb3IgYml0
bWFzayAweCUwOFggKGV4cD0weCUwOFggYWN0PTB4JTA4WCkgKCVzKVxuIiwKKwkJCQkJICAqY21k
LAorCQkJCQkgIGRlc2MtPmJpdHNbaV0ubWFzaywKKwkJCQkJICBkZXNjLT5iaXRzW2ldLmV4cGVj
dGVkLAorCQkJCQkgIGR3b3JkLCBlbmdpbmUtPm5hbWUpOwogCQkJCXJldHVybiBmYWxzZTsKIAkJ
CX0KIAkJfQpAQCAtMTQyNSw3ICsxNDI1LDcgQEAgaW50IGludGVsX2VuZ2luZV9jbWRfcGFyc2Vy
KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAkJCSBiYXRjaF9zdGFydF9vZmZzZXQs
IGJhdGNoX2xlbiwKIAkJCSAmbmVlZHNfY2xmbHVzaF9hZnRlcik7CiAJaWYgKElTX0VSUihjbWQp
KSB7Ci0JCURSTV9ERUJVR19EUklWRVIoIkNNRDogRmFpbGVkIHRvIGNvcHkgYmF0Y2hcbiIpOwor
CQlEUk1fREVCVUcoIkNNRDogRmFpbGVkIHRvIGNvcHkgYmF0Y2hcbiIpOwogCQlyZXR1cm4gUFRS
X0VSUihjbWQpOwogCX0KIApAQCAtMTQ0Niw4ICsxNDQ2LDcgQEAgaW50IGludGVsX2VuZ2luZV9j
bWRfcGFyc2VyKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAogCQlkZXNjID0gZmlu
ZF9jbWQoZW5naW5lLCAqY21kLCBkZXNjLCAmZGVmYXVsdF9kZXNjKTsKIAkJaWYgKCFkZXNjKSB7
Ci0JCQlEUk1fREVCVUdfRFJJVkVSKCJDTUQ6IFVucmVjb2duaXplZCBjb21tYW5kOiAweCUwOFhc
biIsCi0JCQkJCSAqY21kKTsKKwkJCURSTV9ERUJVRygiQ01EOiBVbnJlY29nbml6ZWQgY29tbWFu
ZDogMHglMDhYXG4iLCAqY21kKTsKIAkJCXJldCA9IC1FSU5WQUw7CiAJCQlnb3RvIGVycjsKIAkJ
fQpAQCAtMTQ1OCwxMCArMTQ1NywxMCBAQCBpbnQgaW50ZWxfZW5naW5lX2NtZF9wYXJzZXIoc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCQkJbGVuZ3RoID0gKCgqY21kICYgZGVzYy0+
bGVuZ3RoLm1hc2spICsgTEVOR1RIX0JJQVMpOwogCiAJCWlmICgoYmF0Y2hfZW5kIC0gY21kKSA8
IGxlbmd0aCkgewotCQkJRFJNX0RFQlVHX0RSSVZFUigiQ01EOiBDb21tYW5kIGxlbmd0aCBleGNl
ZWRzIGJhdGNoIGxlbmd0aDogMHglMDhYIGxlbmd0aD0ldSBiYXRjaGxlbj0ldGRcbiIsCi0JCQkJ
CSAqY21kLAotCQkJCQkgbGVuZ3RoLAotCQkJCQkgYmF0Y2hfZW5kIC0gY21kKTsKKwkJCURSTV9E
RUJVRygiQ01EOiBDb21tYW5kIGxlbmd0aCBleGNlZWRzIGJhdGNoIGxlbmd0aDogMHglMDhYIGxl
bmd0aD0ldSBiYXRjaGxlbj0ldGRcbiIsCisJCQkJICAqY21kLAorCQkJCSAgbGVuZ3RoLAorCQkJ
CSAgYmF0Y2hfZW5kIC0gY21kKTsKIAkJCXJldCA9IC1FSU5WQUw7CiAJCQlnb3RvIGVycjsKIAkJ
fQpAQCAtMTQ4OCw3ICsxNDg3LDcgQEAgaW50IGludGVsX2VuZ2luZV9jbWRfcGFyc2VyKHN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAkJY21kICs9IGxlbmd0aDsKIAkJb2Zmc2V0ICs9
IGxlbmd0aDsKIAkJaWYgIChjbWQgPj0gYmF0Y2hfZW5kKSB7Ci0JCQlEUk1fREVCVUdfRFJJVkVS
KCJDTUQ6IEdvdCB0byB0aGUgZW5kIG9mIHRoZSBidWZmZXIgdy9vIGEgQkJFIGNtZCFcbiIpOwor
CQkJRFJNX0RFQlVHKCJDTUQ6IEdvdCB0byB0aGUgZW5kIG9mIHRoZSBidWZmZXIgdy9vIGEgQkJF
IGNtZCFcbiIpOwogCQkJcmV0ID0gLUVJTlZBTDsKIAkJCWdvdG8gZXJyOwogCQl9Ci0tIAoyLjI0
LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

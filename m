Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C353B2AB557
	for <lists+intel-gfx@lfdr.de>; Mon,  9 Nov 2020 11:48:36 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 039E5898E1;
	Mon,  9 Nov 2020 10:48:35 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B544D898E1;
 Mon,  9 Nov 2020 10:48:33 +0000 (UTC)
IronPort-SDR: 0KJbQ/AJJAS7bqVnKagofW117EDEakyrSdk2IPTwLrj1fJOFo32d0ExqhaOJc6FqF4MofwDx9D
 TFc8xUnGndhA==
X-IronPort-AV: E=McAfee;i="6000,8403,9799"; a="254488958"
X-IronPort-AV: E=Sophos;i="5.77,463,1596524400"; d="scan'208";a="254488958"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by fmsmga105.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 09 Nov 2020 02:48:33 -0800
IronPort-SDR: RTNKoxILQyXGNLdGo85R3e1ViPBXtCVALgxwQAXJVxEHL9/DHD7j0p6aNLXOX/ESbL0BojH8pd
 54q6kgeOJF6Q==
X-IronPort-AV: E=Sophos;i="5.77,463,1596524400"; d="scan'208";a="327227187"
Received: from staskuzm-mobl1.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.255.196.231])
 by orsmga006-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 09 Nov 2020 02:48:30 -0800
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: igt-dev@lists.freedesktop.org
Date: Mon,  9 Nov 2020 10:48:11 +0000
Message-Id: <20201109104811.3773962-4-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20201109104811.3773962-1-tvrtko.ursulin@linux.intel.com>
References: <20201109104811.3773962-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC 3/3] lsgpu: Add filter type print-out selection
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCkluIHRoZSBw
cmV2aW91cyBwYXRjaCB3ZSBzd2l0Y2hlZCB0aGUgbHNncHUgb3V0cHV0IHRvIGEgc2hvcnQgYW5k
IHVzZXIKZnJpZW5kbHkgZm9ybWF0IGJ1dCBzb21lIHVzZXJzIHdpbGwgbmVlZCBhIHNob3J0aGFu
ZCBmb3IgZ2V0dGluZyBvdGhlcgp0eXBlcyBvZiBkZXZpY2Ugc2VsZWN0aW9uIGZpbHRlcnMgdGhh
biB0aGUgZGVmYXV0IGRybS4KCkFkZCBzb21lIGNvbW1hbmQgbGluZSBzd2l0Y2hlcyB0byBlbmFi
bGUgdGhpczoKCiQgbHNncHUKY2FyZDAgICAgICAgICAgICAgICAgICAgODA4NjoxOTNCICAgIGRy
bTovZGV2L2RyaS9jYXJkMArilJTilIByZW5kZXJEMTI4ICAgICAgICAgICAgICAgICAgICAgICAg
IGRybTovZGV2L2RyaS9yZW5kZXJEMTI4CgokIGxzZ3B1IC0tc3lzZnMKY2FyZDAgICAgICAgICAg
ICAgICAgICAgODA4NjoxOTNCICAgIHN5czovc3lzL2RldmljZXMvcGNpMDAwMDowMC8wMDAwOjAw
OjAyLjAvZHJtL2NhcmQwCuKUlOKUgHJlbmRlckQxMjggICAgICAgICAgICAgICAgICAgICAgICAg
c3lzOi9zeXMvZGV2aWNlcy9wY2kwMDAwOjAwLzAwMDA6MDA6MDIuMC9kcm0vcmVuZGVyRDEyOAoK
JCBsc2dwdSAtLXBjaQpjYXJkMCAgICAgICAgICAgICAgICAgICA4MDg2OjE5M0IgICAgcGNpOi9z
eXMvZGV2aWNlcy9wY2kwMDAwOjAwLzAwMDA6MDA6MDIuMArilJTilIByZW5kZXJEMTI4CgpTaWdu
ZWQtb2ZmLWJ5OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgpTdWdn
ZXN0ZWQtYnk6IFpiaWduaWV3IEtlbXBjennFhHNraSA8emJpZ25pZXcua2VtcGN6eW5za2lAaW50
ZWwuY29tPgpDYzogUGV0cmkgTGF0dmFsYSA8cGV0cmkubGF0dmFsYUBpbnRlbC5jb20+Ci0tLQog
bGliL2lndF9kZXZpY2Vfc2Nhbi5jIHwgNjkgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KystLS0tLS0tLS0tLQogbGliL2lndF9kZXZpY2Vfc2Nhbi5oIHwgMTUgKysrKysrKystLQogdG9v
bHMvaW50ZWxfZ3B1X3RvcC5jIHwgIDYgKysrLQogdG9vbHMvbHNncHUuYyAgICAgICAgIHwgMzIg
KysrKysrKysrKysrKysrLS0tLS0KIDQgZmlsZXMgY2hhbmdlZCwgOTUgaW5zZXJ0aW9ucygrKSwg
MjcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvbGliL2lndF9kZXZpY2Vfc2Nhbi5jIGIvbGli
L2lndF9kZXZpY2Vfc2Nhbi5jCmluZGV4IGU2NmNjZGMyNWFlYi4uNTRiNTY1YjY4NTI0IDEwMDY0
NAotLS0gYS9saWIvaWd0X2RldmljZV9zY2FuLmMKKysrIGIvbGliL2lndF9kZXZpY2Vfc2Nhbi5j
CkBAIC03NDgsNyArNzQ4LDkgQEAgc3RhdGljIGJvb2wgX19jaGVja19lbXB0eShzdHJ1Y3QgaWd0
X2xpc3RfaGVhZCAqdmlldykKIAlyZXR1cm4gZmFsc2U7CiB9CiAKLXN0YXRpYyB2b2lkIGlndF9k
ZXZzX3ByaW50X3NpbXBsZShzdHJ1Y3QgaWd0X2xpc3RfaGVhZCAqdmlldykKK3N0YXRpYyB2b2lk
CitpZ3RfZGV2c19wcmludF9zaW1wbGUoc3RydWN0IGlndF9saXN0X2hlYWQgKnZpZXcsCisJCSAg
ICAgIGNvbnN0IHN0cnVjdCBpZ3RfZGV2aWNlc19wcmludF9mb3JtYXQgKmZtdCkKIHsKIAlzdHJ1
Y3QgaWd0X2RldmljZSAqZGV2OwogCkBAIC03OTIsNyArNzk0LDM2IEBAIF9fZmluZF9wY2koc3Ry
dWN0IGlndF9saXN0X2hlYWQgKnZpZXcsIGNvbnN0IGNoYXIgKmRybSkKIAlyZXR1cm4gTlVMTDsK
IH0KIAotc3RhdGljIHZvaWQgaWd0X2RldnNfcHJpbnRfdXNlcihzdHJ1Y3QgaWd0X2xpc3RfaGVh
ZCAqdmlldykKK3N0YXRpYyB2b2lkIF9fcHJpbnRfZmlsdGVyKGNoYXIgKmJ1ZiwgaW50IGxlbiwK
KwkJCSAgIGNvbnN0IHN0cnVjdCBpZ3RfZGV2aWNlc19wcmludF9mb3JtYXQgKmZtdCwKKwkJCSAg
IHN0cnVjdCBpZ3RfZGV2aWNlICpkZXYsCisJCQkgICBib29sIHJlbmRlcikKK3sKKwlpbnQgcmV0
OworCisJc3dpdGNoIChmbXQtPm9wdGlvbikgeworCWNhc2UgSUdUX1BSSU5UX0RSTToKKwkJcmV0
ID0gc25wcmludGYoYnVmLCBsZW4sICJkcm06JXMiLAorCQkJICAgICAgIHJlbmRlciA/IGRldi0+
ZHJtX3JlbmRlciA6IGRldi0+ZHJtX2NhcmQpOworCQlpZ3RfYXNzZXJ0KHJldCA8IGxlbik7CisJ
CWJyZWFrOworCWNhc2UgSUdUX1BSSU5UX1NZU0ZTOgorCQlyZXQgPSBzbnByaW50ZihidWYsIGxl
biwgInN5czolcyIsIGRldi0+c3lzcGF0aCk7CisJCWlndF9hc3NlcnQocmV0IDwgbGVuKTsKKwkJ
YnJlYWs7CisJY2FzZSBJR1RfUFJJTlRfUENJOgorCQlpZiAoIXJlbmRlcikgeworCQkJcmV0ID0g
c25wcmludGYoYnVmLCBsZW4sICJwY2k6JXMiLAorCQkJCSAgICAgICBkZXYtPnBhcmVudC0+c3lz
cGF0aCk7CisJCQlpZ3RfYXNzZXJ0KHJldCA8IGxlbik7CisJCX0KKwkJYnJlYWs7CisJfTsKK30K
Kworc3RhdGljIHZvaWQKK2lndF9kZXZzX3ByaW50X3VzZXIoc3RydWN0IGlndF9saXN0X2hlYWQg
KnZpZXcsCisJCSAgICBjb25zdCBzdHJ1Y3QgaWd0X2RldmljZXNfcHJpbnRfZm9ybWF0ICpmbXQp
CiB7CiAJc3RydWN0IGlndF9kZXZpY2UgKmRldjsKIApAQCAtODA1LDcgKzgzNiw2IEBAIHN0YXRp
YyB2b2lkIGlndF9kZXZzX3ByaW50X3VzZXIoc3RydWN0IGlndF9saXN0X2hlYWQgKnZpZXcpCiAJ
CXN0cnVjdCBpZ3RfZGV2aWNlICpkZXYyOwogCQljaGFyIGZpbHRlcls2NF07CiAJCWNoYXIgKmRy
bV9uYW1lOwotCQlpbnQgcmV0OwogCiAJCWlmICghaXNfZHJtX3N1YnN5c3RlbShkZXYpKQogCQkJ
Y29udGludWU7CkBAIC04MTYsOCArODQ2LDcgQEAgc3RhdGljIHZvaWQgaWd0X2RldnNfcHJpbnRf
dXNlcihzdHJ1Y3QgaWd0X2xpc3RfaGVhZCAqdmlldykKIAkJaWYgKCFkcm1fbmFtZSB8fCAhKisr
ZHJtX25hbWUpCiAJCQljb250aW51ZTsKIAotCQlyZXQgPSBzbnByaW50ZihmaWx0ZXIsIHNpemVv
ZihmaWx0ZXIpLCAiZHJtOiVzIiwgZGV2LT5kcm1fY2FyZCk7Ci0JCWlndF9hc3NlcnQocmV0IDwg
c2l6ZW9mKGZpbHRlcikpOworCQlfX3ByaW50X2ZpbHRlcihmaWx0ZXIsIHNpemVvZihmaWx0ZXIp
LCBmbXQsIGRldiwgZmFsc2UpOwogCiAJCXBjaV9kZXYgPSBfX2ZpbmRfcGNpKHZpZXcsIGRldi0+
ZHJtX2NhcmQpOwogCQlpZiAocGNpX2RldikKQEAgLTg0OCwxMyArODc3LDE1IEBAIHN0YXRpYyB2
b2lkIGlndF9kZXZzX3ByaW50X3VzZXIoc3RydWN0IGlndF9saXN0X2hlYWQgKnZpZXcpCiAJCQlp
ZiAoIWRybV9uYW1lIHx8ICEqKytkcm1fbmFtZSkKIAkJCQljb250aW51ZTsKIAotCQkJcmV0ID0g
c25wcmludGYoZmlsdGVyLCBzaXplb2YoZmlsdGVyKSwgImRybTolcyIsCi0JCQkJICAgICAgIGRl
djItPmRybV9yZW5kZXIpOwotCQkJaWd0X2Fzc2VydChyZXQgPCBzaXplb2YoZmlsdGVyKSk7Ci0K
LQkJCXByaW50ZigiJXMlLTIycyAgICAgICAgICAgICAlc1xuIiwKLQkJCSAgICAgICAoKytpID09
IG51bV9jaGlsZHJlbikgPyAi4pSU4pSAIiA6ICLilJzilIAiLAotCQkJICAgICAgIGRybV9uYW1l
LCBmaWx0ZXIpOworCQkJcHJpbnRmKCIlcyUtMjJzIiwKKwkJCQkoKytpID09IG51bV9jaGlsZHJl
bikgPyAi4pSU4pSAIiA6ICLilJzilIAiLCBkcm1fbmFtZSk7CisJCQlpZiAoZm10LT5vcHRpb24g
IT0gSUdUX1BSSU5UX1BDSSkgeworCQkJCV9fcHJpbnRfZmlsdGVyKGZpbHRlciwgc2l6ZW9mKGZp
bHRlciksIGZtdCwKKwkJCQkJICAgICAgIGRldjIsIHRydWUpOworCQkJCXByaW50ZigiICAgICAg
ICAgICAgICVzXG4iLCBmaWx0ZXIpOworCQkJfSBlbHNlIHsKKwkJCQlwcmludGYoIlxuIik7CisJ
CQl9CiAJCX0KIAl9CiB9CkBAIC04NzksNyArOTEwLDEwIEBAIHN0YXRpYyB2b2lkIHByaW50X2h0
KEdIYXNoVGFibGUgKmh0KQogCWdfbGlzdF9mcmVlKGtleXMpOwogfQogCi1zdGF0aWMgdm9pZCBp
Z3RfZGV2c19wcmludF9kZXRhaWwoc3RydWN0IGlndF9saXN0X2hlYWQgKnZpZXcpCitzdGF0aWMg
dm9pZAoraWd0X2RldnNfcHJpbnRfZGV0YWlsKHN0cnVjdCBpZ3RfbGlzdF9oZWFkICp2aWV3LAor
CQkgICAgICBjb25zdCBzdHJ1Y3QgaWd0X2RldmljZXNfcHJpbnRfZm9ybWF0ICpmbXQpCisKIHsK
IAlzdHJ1Y3QgaWd0X2RldmljZSAqZGV2OwogCkBAIC05MDMsNyArOTM3LDggQEAgc3RhdGljIHZv
aWQgaWd0X2RldnNfcHJpbnRfZGV0YWlsKHN0cnVjdCBpZ3RfbGlzdF9oZWFkICp2aWV3KQogfQog
CiBzdGF0aWMgc3RydWN0IHByaW50X2Z1bmMgewotCXZvaWQgKCpwcm4pKHN0cnVjdCBpZ3RfbGlz
dF9oZWFkICp2aWV3KTsKKwl2b2lkICgqcHJuKShzdHJ1Y3QgaWd0X2xpc3RfaGVhZCAqdmlldywK
KwkJICAgIGNvbnN0IHN0cnVjdCBpZ3RfZGV2aWNlc19wcmludF9mb3JtYXQgKik7CiB9IHByaW50
X2Z1bmN0aW9uc1tdID0gewogCVtJR1RfUFJJTlRfU0lNUExFXSA9IHsgLnBybiA9IGlndF9kZXZz
X3ByaW50X3NpbXBsZSB9LAogCVtJR1RfUFJJTlRfREVUQUlMXSA9IHsgLnBybiA9IGlndF9kZXZz
X3ByaW50X2RldGFpbCB9LApAQCAtOTEyLDE1ICs5NDcsMTUgQEAgc3RhdGljIHN0cnVjdCBwcmlu
dF9mdW5jIHsKIAogLyoqCiAgKiBpZ3RfZGV2aWNlc19wcmludAotICogQHByaW50dHlwZTogSUdU
X1BSSU5UX1NJTVBMRSBvciBJR1RfUFJJTlRfREVUQUlMCisgKiBAZm10OiBQcmludCBmb3JtYXQg
YXMgc3BlY2lmaWVkIGJ5IHN0cnVjdCBpZ3RfZGV2aWNlc19wcmludF9mb3JtYXQKICAqCiAgKiBG
dW5jdGlvbiBjYW4gYmUgdXNlZCBieSBleHRlcm5hbCB0b29sIHRvIHByaW50IGRldmljZSBhcnJh
eSBpbiBzaW1wbGUKICAqIG9yIGRldGFpbGVkIGZvcm0uIFRoaXMgZnVuY3Rpb24gaXMgYWRkZWQg
aGVyZSB0byBhdm9pZCBleHBvc2luZwogICogaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGF0YSBz
dHJ1Y3R1cmVzLgogICovCi12b2lkIGlndF9kZXZpY2VzX3ByaW50KGVudW0gaWd0X2RldmljZXNf
cHJpbnRfdHlwZSBwcmludHR5cGUpCit2b2lkIGlndF9kZXZpY2VzX3ByaW50KGNvbnN0IHN0cnVj
dCBpZ3RfZGV2aWNlc19wcmludF9mb3JtYXQgKmZtdCkKIHsKLQlwcmludF9mdW5jdGlvbnNbcHJp
bnR0eXBlXS5wcm4oJmlndF9kZXZzLmZpbHRlcmVkKTsKKwlwcmludF9mdW5jdGlvbnNbZm10LT50
eXBlXS5wcm4oJmlndF9kZXZzLmZpbHRlcmVkLCBmbXQpOwogfQogCiAvKioKZGlmZiAtLWdpdCBh
L2xpYi9pZ3RfZGV2aWNlX3NjYW4uaCBiL2xpYi9pZ3RfZGV2aWNlX3NjYW4uaAppbmRleCA5ODIy
YzIyY2I2OWMuLmJiNGJlNzIzNDVmYiAxMDA2NDQKLS0tIGEvbGliL2lndF9kZXZpY2Vfc2Nhbi5o
CisrKyBiL2xpYi9pZ3RfZGV2aWNlX3NjYW4uaApAQCAtMzUsMTEgKzM1LDIyIEBACiAjaW5jbHVk
ZSA8dW5pc3RkLmg+CiAKIGVudW0gaWd0X2RldmljZXNfcHJpbnRfdHlwZSB7Ci0JSUdUX1BSSU5U
X1NJTVBMRSwKKwlJR1RfUFJJTlRfU0lNUExFID0gMCwKIAlJR1RfUFJJTlRfREVUQUlMLAogCUlH
VF9QUklOVF9VU0VSLCAvKiBFbmQgdXNlciBmcmllbmRseS4gKi8KIH07CiAKK2VudW0gaWd0X2Rl
dmljZXNfcHJpbnRfb3B0aW9uIHsKKwlJR1RfUFJJTlRfRFJNID0gMCwKKwlJR1RfUFJJTlRfU1lT
RlMsCisJSUdUX1BSSU5UX1BDSSwKK307CisKK3N0cnVjdCBpZ3RfZGV2aWNlc19wcmludF9mb3Jt
YXQgeworCWVudW0gaWd0X2RldmljZXNfcHJpbnRfdHlwZSAgIHR5cGU7CisJZW51bSBpZ3RfZGV2
aWNlc19wcmludF9vcHRpb24gb3B0aW9uOworfTsKKwogI2RlZmluZSBJTlRFR1JBVEVEX0k5MTVf
R1BVX1BDSV9JRCAiMDAwMDowMDowMi4wIgogI2RlZmluZSBQQ0lfU0xPVF9OQU1FX1NJWkUgMTIK
IHN0cnVjdCBpZ3RfZGV2aWNlX2NhcmQgewpAQCAtNTEsNyArNjIsNyBAQCBzdHJ1Y3QgaWd0X2Rl
dmljZV9jYXJkIHsKIAogdm9pZCBpZ3RfZGV2aWNlc19zY2FuKGJvb2wgZm9yY2UpOwogCi12b2lk
IGlndF9kZXZpY2VzX3ByaW50KGVudW0gaWd0X2RldmljZXNfcHJpbnRfdHlwZSBwcmludHR5cGUp
Owordm9pZCBpZ3RfZGV2aWNlc19wcmludChjb25zdCBzdHJ1Y3QgaWd0X2RldmljZXNfcHJpbnRf
Zm9ybWF0ICpmbXQpOwogdm9pZCBpZ3RfZGV2aWNlc19wcmludF92ZW5kb3JzKHZvaWQpOwogdm9p
ZCBpZ3RfZGV2aWNlX3ByaW50X2ZpbHRlcl90eXBlcyh2b2lkKTsKIApkaWZmIC0tZ2l0IGEvdG9v
bHMvaW50ZWxfZ3B1X3RvcC5jIGIvdG9vbHMvaW50ZWxfZ3B1X3RvcC5jCmluZGV4IDUyMzA0NzJk
MmFmNC4uMDdmODhkNTU1ZGM4IDEwMDY0NAotLS0gYS90b29scy9pbnRlbF9ncHVfdG9wLmMKKysr
IGIvdG9vbHMvaW50ZWxfZ3B1X3RvcC5jCkBAIC0xMzg3LDcgKzEzODcsMTEgQEAgaW50IG1haW4o
aW50IGFyZ2MsIGNoYXIgKiphcmd2KQogCWlndF9kZXZpY2VzX3NjYW4oZmFsc2UpOwogCiAJaWYg
KGxpc3RfZGV2aWNlKSB7Ci0JCWlndF9kZXZpY2VzX3ByaW50KElHVF9QUklOVF9VU0VSKTsKKwkJ
c3RydWN0IGlndF9kZXZpY2VzX3ByaW50X2Zvcm1hdCBmbXQgPSB7CisJCQkudHlwZSA9IElHVF9Q
UklOVF9VU0VSCisJCX07CisKKwkJaWd0X2RldmljZXNfcHJpbnQoJmZtdCk7CiAJCWdvdG8gZXhp
dDsKIAl9CiAKZGlmZiAtLWdpdCBhL3Rvb2xzL2xzZ3B1LmMgYi90b29scy9sc2dwdS5jCmluZGV4
IDNiMjM0YjczMzYxYS4uMTY5YWIwYzI5ZTUwIDEwMDY0NAotLS0gYS90b29scy9sc2dwdS5jCisr
KyBiL3Rvb2xzL2xzZ3B1LmMKQEAgLTkxLDcgKzkxLDExIEBAIHN0YXRpYyBjb25zdCBjaGFyICp1
c2FnZV9zdHIgPQogCSIgIC12LCAtLWxpc3QtdmVuZG9ycyAgICAgICAgICBMaXN0IHJlY29nbml6
ZWQgdmVuZG9yc1xuIgogCSIgIC1sLCAtLWxpc3QtZmlsdGVyLXR5cGVzICAgICBMaXN0IHJlZ2lz
dGVyZWQgZGV2aWNlIGZpbHRlcnMgdHlwZXNcbiIKIAkiICAtZCwgLS1kZXZpY2UgZmlsdGVyICAg
ICAgICAgRGV2aWNlIGZpbHRlciwgY2FuIGJlIGdpdmVuIG11bHRpcGxlIHRpbWVzXG4iCi0JIiAg
LWgsIC0taGVscCAgICAgICAgICAgICAgICAgIFNob3cgdGhpcyBoZWxwIG1lc3NhZ2UgYW5kIGV4
aXRcbiI7CisJIiAgLWgsIC0taGVscCAgICAgICAgICAgICAgICAgIFNob3cgdGhpcyBoZWxwIG1l
c3NhZ2UgYW5kIGV4aXRcbiIKKwkiXG5PcHRpb25zIHZhbGlkIGZvciBkZWZhdWx0IHByaW50IG91
dCBtb2RlIG9ubHk6XG4iCisJIiAgICAgIC0tZHJtICAgICAgICAgICAgICAgICAgIFNob3cgRFJN
IGZpbHRlcnMgKGRlZmF1bHQpIGZvciBlYWNoIGRldmljZVxuIgorCSIgICAgICAtLXN5c2ZzICAg
ICAgICAgICAgICAgICBTaG93IHN5c2ZzIGZpbHRlcnMgZm9yIGVhY2ggZGV2aWNlXG4iCisJIiAg
ICAgIC0tcGNpICAgICAgICAgICAgICAgICAgIFNob3cgUENJIGZpbHRlcnMgZm9yIGVhY2ggZGV2
aWNlXG4iOwogCiBzdGF0aWMgdm9pZCB0ZXN0X2RldmljZV9vcGVuKHN0cnVjdCBpZ3RfZGV2aWNl
X2NhcmQgKmNhcmQpCiB7CkBAIC0xNTMsNiArMTU3LDkgQEAgc3RhdGljIGNoYXIgKmdldF9kZXZp
Y2VfZnJvbV9yYyh2b2lkKQogaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKIHsKIAlz
dGF0aWMgc3RydWN0IG9wdGlvbiBsb25nX29wdGlvbnNbXSA9IHsKKwkJeyJkcm0iLCAgICAgICAg
ICAgICAgIG5vX2FyZ3VtZW50LCAgICAgICBOVUxMLCAwfSwKKwkJeyJzeXNmcyIsICAgICAgICAg
ICAgIG5vX2FyZ3VtZW50LCAgICAgICBOVUxMLCAxfSwKKwkJeyJwY2kiLCAgICAgICAgICAgICAg
IG5vX2FyZ3VtZW50LCAgICAgICBOVUxMLCAyfSwKIAkJeyJwcmludC1zaW1wbGUiLCAgICAgIG5v
X2FyZ3VtZW50LCAgICAgICBOVUxMLCBPUFRfUFJJTlRfU0lNUExFfSwKIAkJeyJwcmludC1kZXRh
aWwiLCAgICAgIG5vX2FyZ3VtZW50LCAgICAgICBOVUxMLCBPUFRfUFJJTlRfREVUQUlMfSwKIAkJ
eyJsaXN0LXZlbmRvcnMiLCAgICAgIG5vX2FyZ3VtZW50LCAgICAgICBOVUxMLCBPUFRfTElTVF9W
RU5ET1JTfSwKQEAgLTE2MywxNyArMTcwLDE5IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICph
cmd2W10pCiAJfTsKIAlpbnQgYywgaW5kZXggPSAwOwogCWNoYXIgKmVudl9kZXZpY2UgPSBOVUxM
LCAqb3B0X2RldmljZSA9IE5VTEwsICpyY19kZXZpY2UgPSBOVUxMOwotCWVudW0gaWd0X2Rldmlj
ZXNfcHJpbnRfdHlwZSBwcmludHR5cGUgPSBJR1RfUFJJTlRfVVNFUjsKKwlzdHJ1Y3QgaWd0X2Rl
dmljZXNfcHJpbnRfZm9ybWF0IGZtdCA9IHsKKwkJCS50eXBlID0gSUdUX1BSSU5UX1VTRVIsCisJ
fTsKIAogCXdoaWxlICgoYyA9IGdldG9wdF9sb25nKGFyZ2MsIGFyZ3YsICJzcHZsZDpoIiwKIAkJ
CQlsb25nX29wdGlvbnMsICZpbmRleCkpICE9IC0xKSB7CiAJCXN3aXRjaChjKSB7CiAKIAkJY2Fz
ZSBPUFRfUFJJTlRfU0lNUExFOgotCQkJcHJpbnR0eXBlID0gSUdUX1BSSU5UX1NJTVBMRTsKKwkJ
CWZtdC50eXBlID0gSUdUX1BSSU5UX1NJTVBMRTsKIAkJCWJyZWFrOwogCQljYXNlIE9QVF9QUklO
VF9ERVRBSUw6Ci0JCQlwcmludHR5cGUgPSBJR1RfUFJJTlRfREVUQUlMOworCQkJZm10LnR5cGUg
PSBJR1RfUFJJTlRfREVUQUlMOwogCQkJYnJlYWs7CiAJCWNhc2UgT1BUX0xJU1RfVkVORE9SUzoK
IAkJCWdfc2hvd192ZW5kb3JzID0gdHJ1ZTsKQEAgLTE4Nyw2ICsxOTYsMTUgQEAgaW50IG1haW4o
aW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKIAkJY2FzZSBPUFRfSEVMUDoKIAkJCWdfaGVscCA9IHRy
dWU7CiAJCQlicmVhazsKKwkJY2FzZSAwOgorCQkJZm10Lm9wdGlvbiA9IElHVF9QUklOVF9EUk07
CisJCQlicmVhazsKKwkJY2FzZSAxOgorCQkJZm10Lm9wdGlvbiA9IElHVF9QUklOVF9TWVNGUzsK
KwkJCWJyZWFrOworCQljYXNlIDI6CisJCQlmbXQub3B0aW9uID0gSUdUX1BSSU5UX1BDSTsKKwkJ
CWJyZWFrOwogCQl9CiAJfQogCkBAIC0yMzksMTQgKzI1NywxNCBAQCBpbnQgbWFpbihpbnQgYXJn
YywgY2hhciAqYXJndltdKQogCQlwcmludGYoIkRldmljZSBkZXRhaWw6XG4iKTsKIAkJcHJpbnRf
Y2FyZCgmY2FyZCk7CiAJCXRlc3RfZGV2aWNlX29wZW4oJmNhcmQpOwotCQlpZiAocHJpbnR0eXBl
ID09IElHVF9QUklOVF9ERVRBSUwpIHsKKwkJaWYgKGZtdC50eXBlID09IElHVF9QUklOVF9ERVRB
SUwpIHsKIAkJCXByaW50ZigiXG4iKTsKLQkJCWlndF9kZXZpY2VzX3ByaW50KHByaW50dHlwZSk7
CisJCQlpZ3RfZGV2aWNlc19wcmludCgmZm10KTsKIAkJfQogCQlwcmludGYoIi0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiIpOwogCiAJfSBlbHNlIHsKLQkJaWd0
X2RldmljZXNfcHJpbnQocHJpbnR0eXBlKTsKKwkJaWd0X2RldmljZXNfcHJpbnQoJmZtdCk7CiAJ
fQogCiAJZnJlZShyY19kZXZpY2UpOwotLSAKMi4yNS4xCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9pbnRlbC1nZngK

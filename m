Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D2222D6371
	for <lists+intel-gfx@lfdr.de>; Mon, 14 Oct 2019 15:10:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 07DF889C59;
	Mon, 14 Oct 2019 13:10:36 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D768B89C59
 for <intel-gfx@lists.freedesktop.org>; Mon, 14 Oct 2019 13:10:34 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 14 Oct 2019 06:10:34 -0700
X-IronPort-AV: E=Sophos;i="5.67,295,1566889200"; d="scan'208";a="185488203"
Received: from dwiesing-mobl.ger.corp.intel.com (HELO [10.252.31.172])
 ([10.252.31.172])
 by orsmga007-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 14 Oct 2019 06:10:33 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191014090757.32111-1-chris@chris-wilson.co.uk>
 <20191014090757.32111-12-chris@chris-wilson.co.uk>
 <8947bb82-2d5e-05b6-634c-4669476876d2@linux.intel.com>
 <157105567849.18859.13582226068488487412@skylake-alporthouse-com>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <044b910f-64e3-f4d4-5e38-f5b0766142d7@linux.intel.com>
Date: Mon, 14 Oct 2019 14:10:30 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <157105567849.18859.13582226068488487412@skylake-alporthouse-com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 12/15] drm/i915/gem: Cancel non-persistent
 contexts on close
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDE0LzEwLzIwMTkgMTM6MjEsIENocmlzIFdpbHNvbiB3cm90ZToKPiBRdW90aW5nIFR2cnRr
byBVcnN1bGluICgyMDE5LTEwLTE0IDEzOjExOjQ2KQo+Pgo+PiBPbiAxNC8xMC8yMDE5IDEwOjA3
LCBDaHJpcyBXaWxzb24gd3JvdGU6Cj4+PiBOb3JtYWxseSwgd2UgcmVseSBvbiBvdXIgaGFuZ2No
ZWNrIHRvIHByZXZlbnQgcGVyc2lzdGVudCBiYXRjaGVzIGZyb20KPj4+IGhvZ2dpbmcgdGhlIEdQ
VS4gSG93ZXZlciwgaWYgdGhlIHVzZXIgZGlzYWJsZXMgaGFuZ2NoZWNrLCB0aGlzIG1lY2hhbmlz
bQo+Pj4gYnJlYWtzIGRvd24uIERlc3BpdGUgb3VyIGluc2lzdGVuY2UgdGhhdCB0aGlzIGlzIHVu
c2FmZSwgdGhlIHVzZXJzIGFyZQo+Pj4gZXF1YWxseSBpbnNpc3RlbnQgdGhhdCB0aGV5IHdhbnQg
dG8gdXNlIGVuZGxlc3MgYmF0Y2hlcyBhbmQgd2lsbCBkaXNhYmxlCj4+PiB0aGUgaGFuZ2NoZWNr
IG1lY2hhbmlzbS4gV2UgYXJlIGxvb2tpbmcgYXQgcGVyaGFwcyByZXBsYWNpbmcgaGFuZ2NoZWNr
Cj4+PiB3aXRoIGEgc29mdGVyIG1lY2hhbmlzbSwgdGhhdCBzZW5kcyBhIHB1bHNlIGRvd24gdGhl
IGVuZ2luZSB0byBjaGVjayBpZgo+Pj4gaXQgaXMgd2VsbC4gV2UgY2FuIHVzZSB0aGUgc2FtZSBw
cmVlbXB0aXZlIHB1bHNlIHRvIGZsdXNoIGFuIGFjdGl2ZQo+Pj4gcGVyc2lzdGVudCBjb250ZXh0
IG9mZiB0aGUgR1BVIHVwb24gY29udGV4dCBjbG9zZSwgcHJldmVudGluZyByZXNvdXJjZXMKPj4+
IGJlaW5nIGxvc3QgYW5kIHVua2lsbGFibGUgcmVxdWVzdHMgcmVtYWluaW5nIG9uIHRoZSBHUFUg
YWZ0ZXIgcHJvY2Vzcwo+Pj4gdGVybWluYXRpb24uIFRvIGF2b2lkIGNoYW5naW5nIHRoZSBBQkkg
YW5kIGFjY2lkZW50YWxseSBicmVha2luZwo+Pj4gZXhpc3RpbmcgdXNlcnNwYWNlLCB3ZSBtYWtl
IHRoZSBwZXJzaXN0ZW5jZSBvZiBhIGNvbnRleHQgZXhwbGljaXQgYW5kCj4+PiBlbmFibGUgaXQg
YnkgZGVmYXVsdCAobWF0Y2hpbmcgY3VycmVudCBBQkkpLiBVc2Vyc3BhY2UgY2FuIG9wdCBvdXQg
b2YKPj4+IHBlcnNpc3RlbnQgbW9kZSAoZm9yY2luZyByZXF1ZXN0cyB0byBiZSBjYW5jZWxsZWQg
d2hlbiB0aGUgY29udGV4dCBpcwo+Pj4gY2xvc2VkIGJ5IHByb2Nlc3MgdGVybWluYXRpb24gb3Ig
ZXhwbGljaXRseSkgYnkgYSBjb250ZXh0IHBhcmFtZXRlci4gVG8KPj4+IGZhY2lsaXRhdGUgZXhp
c3RpbmcgdXNlLWNhc2VzIG9mIGRpc2FibGluZyBoYW5nY2hlY2ssIGlmIHRoZSBtb2RwYXJhbSBp
cwo+Pj4gZGlzYWJsZWQgKGk5MTUuZW5hYmxlX2hhbmdjaGVjaz0wKSwgd2UgZGlzYWJsZSBwZXJz
aXN0ZW5jZSBtb2RlIGJ5Cj4+PiBkZWZhdWx0LiAgKE5vdGUsIG9uZSBvZiB0aGUgb3V0Y29tZXMg
Zm9yIHN1cHBvcnRpbmcgZW5kbGVzcyBtb2RlIHdpbGwgYmUKPj4+IHRoZSByZW1vdmFsIG9mIGhh
bmdjaGVja2luZywgYXQgd2hpY2ggcG9pbnQgb3B0aW5nIGludG8gcGVyc2lzdGVudCBtb2RlCj4+
PiB3aWxsIGJlIG1hbmRhdG9yeSwgb3IgbWF5YmUgdGhlIGRlZmF1bHQgcGVyaGFwcyBjb250cm9s
bGVkIGJ5IGNncm91cHMuKQo+Pj4KPj4+IHYyOiBDaGVjayBmb3IgaGFuZ2NoZWNraW5nIGF0IGNv
bnRleHQgdGVybWluYXRpb24sIHNvIHRoYXQgd2UgYXJlIG5vdAo+Pj4gbGVmdCB3aXRoIHVuZHlp
bmcgY29udGV4dHMgZnJvbSBhIGNyYWZ0eSB1c2VyLgo+Pj4gdjM6IEZvcmNlIGNvbnRleHQgdGVy
bWluYXRpb24gZXZlbiBpZiBmb3JjZWQtcHJlZW1wdGlvbiBpcyBkaXNhYmxlZC4KPj4+Cj4+PiBU
ZXN0Y2FzZTogaWd0L2dlbV9jdHhfcGVyc2lzdGVuY2UKPj4+IFNpZ25lZC1vZmYtYnk6IENocmlz
IFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+Pj4gQ2M6IEpvb25hcyBMYWh0aW5l
biA8am9vbmFzLmxhaHRpbmVuQGxpbnV4LmludGVsLmNvbT4KPj4+IENjOiBNaWNoYcWCIFdpbmlh
cnNraSA8bWljaGFsLndpbmlhcnNraUBpbnRlbC5jb20+Cj4+PiBDYzogSm9uIEJsb29tZmllbGQg
PGpvbi5ibG9vbWZpZWxkQGludGVsLmNvbT4KPj4+IFJldmlld2VkLWJ5OiBKb24gQmxvb21maWVs
ZCA8am9uLmJsb29tZmllbGRAaW50ZWwuY29tPgo+Pj4gLS0tCj4+PiAgICBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jICAgfCAxODIgKysrKysrKysrKysrKysrKysr
Cj4+PiAgICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5oICAgfCAg
MTUgKysKPj4+ICAgIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMu
aCB8ICAgMSArCj4+PiAgICAuLi4vZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19jb250
ZXh0LmMgfCAgIDIgKwo+Pj4gICAgaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oICAgICAgICAg
ICAgICAgICAgIHwgIDE1ICsrCj4+PiAgICA1IGZpbGVzIGNoYW5nZWQsIDIxNSBpbnNlcnRpb25z
KCspCj4+Pgo+Pj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9jb250ZXh0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5j
Cj4+PiBpbmRleCA1ZDgyMjFjN2JhODMuLjcwYjcyNDU2ZTJjNCAxMDA2NDQKPj4+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMKPj4+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMKPj4+IEBAIC03MCw2ICs3MCw3
IEBACj4+PiAgICAjaW5jbHVkZSA8ZHJtL2k5MTVfZHJtLmg+Cj4+PiAgICAKPj4+ICAgICNpbmNs
dWRlICJndC9pbnRlbF9scmNfcmVnLmgiCj4+PiArI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV9o
ZWFydGJlYXQuaCIKPj4+ICAgICNpbmNsdWRlICJndC9pbnRlbF9lbmdpbmVfdXNlci5oIgo+Pj4g
ICAgCj4+PiAgICAjaW5jbHVkZSAiaTkxNV9nZW1fY29udGV4dC5oIgo+Pj4gQEAgLTI2OSw2ICsy
NzAsMTI4IEBAIHZvaWQgaTkxNV9nZW1fY29udGV4dF9yZWxlYXNlKHN0cnVjdCBrcmVmICpyZWYp
Cj4+PiAgICAgICAgICAgICAgICBzY2hlZHVsZV93b3JrKCZnYy0+ZnJlZV93b3JrKTsKPj4+ICAg
IH0KPj4+ICAgIAo+Pj4gK3N0YXRpYyBpbmxpbmUgc3RydWN0IGk5MTVfZ2VtX2VuZ2luZXMgKgo+
Pj4gK19fY29udGV4dF9lbmdpbmVzX3N0YXRpYyhjb25zdCBzdHJ1Y3QgaTkxNV9nZW1fY29udGV4
dCAqY3R4KQo+Pj4gK3sKPj4+ICsgICAgIHJldHVybiByY3VfZGVyZWZlcmVuY2VfcHJvdGVjdGVk
KGN0eC0+ZW5naW5lcywgdHJ1ZSk7Cj4+PiArfQo+Pj4gKwo+Pj4gK3N0YXRpYyBib29sIF9fcmVz
ZXRfZW5naW5lKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPj4+ICt7Cj4+PiArICAg
ICBzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gZW5naW5lLT5ndDsKPj4+ICsgICAgIGJvb2wgc3VjY2Vz
cyA9IGZhbHNlOwo+Pj4gKwo+Pj4gKyAgICAgaWYgKCFpbnRlbF9oYXNfcmVzZXRfZW5naW5lKGd0
KSkKPj4+ICsgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwo+Pj4gKwo+Pj4gKyAgICAgaWYgKCF0
ZXN0X2FuZF9zZXRfYml0KEk5MTVfUkVTRVRfRU5HSU5FICsgZW5naW5lLT5pZCwKPj4+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAmZ3QtPnJlc2V0LmZsYWdzKSkgewo+Pj4gKyAgICAgICAg
ICAgICBzdWNjZXNzID0gaW50ZWxfZW5naW5lX3Jlc2V0KGVuZ2luZSwgTlVMTCkgPT0gMDsKPj4+
ICsgICAgICAgICAgICAgY2xlYXJfYW5kX3dha2VfdXBfYml0KEk5MTVfUkVTRVRfRU5HSU5FICsg
ZW5naW5lLT5pZCwKPj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZndC0+
cmVzZXQuZmxhZ3MpOwo+Pj4gKyAgICAgfQo+Pj4gKwo+Pj4gKyAgICAgcmV0dXJuIHN1Y2Nlc3M7
Cj4+PiArfQo+Pj4gKwo+Pj4gK3N0YXRpYyB2b2lkIF9fcmVzZXRfY29udGV4dChzdHJ1Y3QgaTkx
NV9nZW1fY29udGV4dCAqY3R4LAo+Pj4gKyAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUpCj4+PiArewo+Pj4gKyAgICAgaW50ZWxfZ3RfaGFuZGxl
X2Vycm9yKGVuZ2luZS0+Z3QsIGVuZ2luZS0+bWFzaywgMCwKPj4+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAiY29udGV4dCBjbG9zdXJlIGluICVzIiwgY3R4LT5uYW1lKTsKPj4+ICt9Cj4+
PiArCj4+PiArc3RhdGljIGJvb2wgX19jYW5jZWxfZW5naW5lKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSkKPj4+ICt7Cj4+PiArICAgICAvKgo+Pj4gKyAgICAgICogU2VuZCBhICJoaWdo
IHByaW9yaXR5IHB1bHNlIiBkb3duIHRoZSBlbmdpbmUgdG8gY2F1c2UgdGhlCj4+PiArICAgICAg
KiBjdXJyZW50IHJlcXVlc3QgdG8gYmUgbW9tZW50YXJpbHkgcHJlZW1wdGVkLiAoSWYgaXQgZmFp
bHMgdG8KPj4+ICsgICAgICAqIGJlIHByZWVtcHRlZCwgaXQgd2lsbCBiZSByZXNldCkuIEFzIHdl
IGhhdmUgbWFya2VkIG91ciBjb250ZXh0Cj4+PiArICAgICAgKiBhcyBiYW5uZWQsIGFueSBpbmNv
bXBsZXRlIHJlcXVlc3QsIGluY2x1ZGluZyBhbnkgcnVubmluZywgd2lsbAo+Pj4gKyAgICAgICog
YmUgc2tpcHBlZCBmb2xsb3dpbmcgdGhlIHByZWVtcHRpb24uCj4+PiArICAgICAgKi8KPj4+ICsg
ICAgIGlmIChDT05GSUdfRFJNX0k5MTVfUFJFRU1QVF9USU1FT1VUICYmICFpbnRlbF9lbmdpbmVf
cHVsc2UoZW5naW5lKSkKPj4+ICsgICAgICAgICAgICAgcmV0dXJuIHRydWU7Cj4+Cj4+IE1heWJl
IEkgbG9zdCB0aGUgdHJhaW4gb2YgdGhvdWdodCBoZXJlLi4gQnV0IHdoeSBub3QgZXZlbiB0cnkg
d2l0aCB0aGUKPj4gcHVsc2UgZXZlbiBpZiBmb3JjZWQgcHJlZW1wdGlvbiBpcyBub3QgY29tcGls
ZWQgaW4/IFRoZXJlIGlzIGEgY2hhbmNlIGl0Cj4+IG1heSBwcmVlbXB0IG5vcm1hbGx5LCBubz8K
PiAKPiBJZiB0aGVyZSBpcyBubyByZXNldC1vbi1wcmVlbXB0aW9uIGZhaWx1cmUgYW5kIG5vIGhh
bmdjaGVja2luZywgdGhlcmUgaXMKPiBubyByZXNldCBhbmQgd2UgYXJlIGxlZnQgd2l0aCB0aGUg
ZGVuaWFsLW9mLXNlcnZpY2UgdGhhdCB3ZSBhcmUgc2Vla2luZwo+IHRvIGNsb3NlLgoKQmVjYXVz
ZSB0aGVyZSBpcyBubyBtZWNoYW5pc20gdG8gc2VuZCBhIHB1bHNlLCBzZWUgaWYgaXQgbWFuYWdl
ZCB0byAKcHJlZW1wdCwgYnV0IGlmIGl0IGRpZCBub3QgY29tZSBjb21lIGJhY2sgbGF0ZXIgYW5k
IHJlc2V0PwoKPj4gSG0sIG9yIGZyb20gdGhlIG90aGVyIGFuZ2xlLCB3aHkgYm90aGVyIHdpdGgg
cHJlZW1wdGlvbiBhbmQgbm90IGp1c3QKPj4gcmVzZXQ/IFdoYXQgaXMgdGhlIHZhbHVlIGluIGxl
dHRpbmcgdGhlIGNsb3NlZCBjb250ZXh0IGNvbXBsZXRlIGlmIGF0Cj4+IHRoZSBzYW1lIHRpbWUs
IGlmIGl0IGlzIHByZWVtcHRhYmxlLCB3ZSB3aWxsIGNhbmNlbCBhbGwgb3V0c3RhbmRpbmcgd29y
awo+PiBhbnl3YXk/Cj4gCj4gVGhlIHJlc2V0IGlzIHRoZSBlbGVwaGFudCBndW47IGl0IGlzIGxp
a2VseSB0byBjYXVzZSBjb2xsYXRlcmFsIGRhbWFnZS4KPiBTbyB3ZSB0cnkgd2l0aCBhIGJpdCBv
ZiBmaW5lc3NlIGZpcnN0LgoKSG93IHNvPyBJc24ndCBvdXIgcGVyLWVuZ2luZSByZXNldCBzdXBw
b3NlZCB0byBiZSBmYXN0IGFuZCByZWxpYWJsZT8gQnV0IAp5ZXMsIEkgaGF2ZSBubyBjb21wbGFp
bnRzIG9mIHRyeWluZyBwcmVlbXB0aW9uIGZpcnN0LCBqdXN0IHRyeWluZyB0byAKY29ubmVjdCBh
bGwgdGhlIGRvdHMuCgpSZWdhcmRzLAoKVHZydGtvCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeA==

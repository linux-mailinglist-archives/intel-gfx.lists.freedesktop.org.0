Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6023E4A71C
	for <lists+intel-gfx@lfdr.de>; Tue, 18 Jun 2019 18:37:30 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BE2F06E1E8;
	Tue, 18 Jun 2019 16:37:28 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0C0D36E1E8
 for <intel-gfx@lists.freedesktop.org>; Tue, 18 Jun 2019 16:37:26 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 16943528-1500050 for multiple; Tue, 18 Jun 2019 17:37:21 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Mika Kuoppala <mika.kuoppala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20190618161731.15607-1-mika.kuoppala@linux.intel.com>
 <20190618161731.15607-3-mika.kuoppala@linux.intel.com>
In-Reply-To: <20190618161731.15607-3-mika.kuoppala@linux.intel.com>
Message-ID: <156087584249.31375.958849240392013806@skylake-alporthouse-com>
Date: Tue, 18 Jun 2019 17:37:22 +0100
Subject: Re: [Intel-gfx] [PATCH 3/3] drm/i915/gtt: Setup phys pages for 3lvl
 pdps
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBNaWthIEt1b3BwYWxhICgyMDE5LTA2LTE4IDE3OjE3OjMxKQo+IElmIHdlIHNldHVw
IGJhY2tpbmcgcGh5cyBwYWdlIGZvciAzbHZsIHBkcHMsIGV2ZW4gdGhleQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW4gdGhvdWdoIHRoZXkKPiBhcmUg
bm90IHVzZWQsIHdlIGxvc2UgNSBwYWdlcyBwZXIgcHBndHQuCj4gCj4gVHJhZGluZyB0aGlzIG1l
bW9yeSBvbiBic3csIHdlIGdhaW4gbW9yZSBjb21tb24gY29kZSBwYXRocyBmb3IgYWxsCj4gZ2Vu
OCsgZGlyZWN0b3J5IG1hbmlwdWxhdGlvbi4gQW5kIHRob3NlIHBhdGhzIGFyZSBub3cgdm9pZCBv
ZiBjaGVja3MKPiBmb3IgcGFnZSBkaXJlY3RvcnkgdHlwZSwgbWFraW5nIHRoZSBob3QgcGF0aHMg
ZmFzdGVyLgo+IAo+IFNpZ25lZC1vZmYtYnk6IE1pa2EgS3VvcHBhbGEgPG1pa2Eua3VvcHBhbGFA
bGludXguaW50ZWwuY29tPgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9n
dHQuYyB8IDEwNiArKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tCj4gIDEgZmlsZSBjaGFuZ2Vk
LCA2NiBpbnNlcnRpb25zKCspLCA0MCBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2dlbV9ndHQuYwo+IGluZGV4IGI1MjFiMWRkZDE5Yi4uZWE3ODMwMmM2MzQ4IDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKPiBAQCAtNzE1LDIyICs3MTUsMTQgQEAgc3Rh
dGljIHN0cnVjdCBpOTE1X3BhZ2VfZGlyZWN0b3J5ICphbGxvY19wZChzdHJ1Y3QgaTkxNV9hZGRy
ZXNzX3NwYWNlICp2bSkKPiAgICAgICAgIHJldHVybiBwZDsKPiAgfQo+ICAKPiAtc3RhdGljIGlu
bGluZSBib29sIHBkX2hhc19waHlzX3BhZ2UoY29uc3Qgc3RydWN0IGk5MTVfcGFnZV9kaXJlY3Rv
cnkgKiBjb25zdCBwZCkKPiAtewo+IC0gICAgICAgcmV0dXJuIHBkLT5iYXNlLnBhZ2U7Cj4gLX0K
PiAtCj4gIHN0YXRpYyB2b2lkIGZyZWVfcGQoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0s
Cj4gICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaTkxNV9wYWdlX2RpcmVjdG9yeSAqcGQpCj4g
IHsKPiAtICAgICAgIGlmIChsaWtlbHkocGRfaGFzX3BoeXNfcGFnZShwZCkpKQo+IC0gICAgICAg
ICAgICAgICBjbGVhbnVwX3BhZ2VfZG1hKHZtLCAmcGQtPmJhc2UpOwo+IC0KPiArICAgICAgIGNs
ZWFudXBfcGFnZV9kbWEodm0sICZwZC0+YmFzZSk7Cj4gICAgICAgICBrZnJlZShwZCk7Cj4gIH0K
PiAgCj4gICNkZWZpbmUgaW5pdF9wZCh2bSwgcGQsIHRvKSB7ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFwKPiAtICAgICAgIEdFTV9ERUJVR19CVUdfT04oIXBkX2hhc19waHlzX3Bh
Z2UocGQpKTsgICAgICAgICAgICAgICAgXAo+ICAgICAgICAgZmlsbF9weCgodm0pLCAocGQpLCBn
ZW44X3BkZV9lbmNvZGUocHhfZG1hKHRvKSwgSTkxNV9DQUNIRV9MTEMpKTsgXAo+ICAgICAgICAg
bWVtc2V0X3AoKHBkKS0+ZW50cnksICh0byksIDUxMik7ICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFwKPiAgfQo+IEBAIC0xNTM5LDYgKzE1MzEsNTAgQEAgc3RhdGljIHZvaWQgcHBndHRf
aW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKPiAgICAgICAgIHBwZ3R0LT52bS52
bWFfb3BzLmNsZWFyX3BhZ2VzID0gY2xlYXJfcGFnZXM7Cj4gIH0KPiAgCj4gK3N0YXRpYyB2b2lk
IGluaXRfcGRfbihzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKPiArICAgICAgICAgICAg
ICAgICAgICAgc3RydWN0IGk5MTVfcGFnZV9kaXJlY3RvcnkgKnBkLAo+ICsgICAgICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgaTkxNV9wYWdlX2RpcmVjdG9yeSAqdG8sCj4gKyAgICAgICAgICAgICAg
ICAgICAgIGNvbnN0IHVuc2lnbmVkIGludCBlbnRyaWVzKQo+ICt7Cj4gKyAgICAgICBjb25zdCB1
NjQgZGFkZHIgPSBnZW44X3BkZV9lbmNvZGUocHhfZG1hKHRvKSwgSTkxNV9DQUNIRV9MTEMpOwo+
ICsgICAgICAgdTY0ICogY29uc3QgdmFkZHIgPSBrbWFwX2F0b21pYyhwZC0+YmFzZS5wYWdlKTsK
PiArCj4gKyAgICAgICBtZW1zZXQ2NCh2YWRkciwgZGFkZHIsIGVudHJpZXMpOwo+ICsgICAgICAg
a3VubWFwX2F0b21pYyh2YWRkcik7Cj4gKwo+ICsgICAgICAgbWVtc2V0X3AocGQtPmVudHJ5LCB0
bywgZW50cmllcyk7Cj4gK30KPiArCj4gK3N0YXRpYyBzdHJ1Y3QgaTkxNV9wYWdlX2RpcmVjdG9y
eSAqCj4gK2dlbjhfYWxsb2NfdG9wX3BkKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtKQo+
ICt7Cj4gKyAgICAgICBzdHJ1Y3QgaTkxNV9wYWdlX2RpcmVjdG9yeSAqcGQ7Cj4gKwo+ICsgICAg
ICAgaWYgKGk5MTVfdm1faXNfNGx2bCh2bSkpIHsKPiArICAgICAgICAgICAgICAgcGQgPSBhbGxv
Y19wZCh2bSk7Cj4gKyAgICAgICAgICAgICAgIGlmICghSVNfRVJSKHBkKSkKPiArICAgICAgICAg
ICAgICAgICAgICAgICBpbml0X3BkKHZtLCBwZCwgdm0tPnNjcmF0Y2hfcGRwKTsKPiArCj4gKyAg
ICAgICAgICAgICAgIHJldHVybiBwZDsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICAvKiAzbHZs
ICovCj4gKyAgICAgICBwZCA9IF9fYWxsb2NfcGQoKTsKPiArICAgICAgIGlmICghcGQpCj4gKyAg
ICAgICAgICAgICAgIHJldHVybiBFUlJfUFRSKC1FTk9NRU0pOwo+ICsKPiArICAgICAgIHBkLT5l
bnRyeVtHRU44XzNMVkxfUERQRVNdID0gTlVMTDsKPiArCj4gKyAgICAgICBpZiAodW5saWtlbHko
c2V0dXBfcGFnZV9kbWEodm0sICZwZC0+YmFzZSkpKSB7Cj4gKyAgICAgICAgICAgICAgIGtmcmVl
KHBkKTsKPiArICAgICAgICAgICAgICAgcmV0dXJuIEVSUl9QVFIoLUVOT01FTSk7Cj4gKyAgICAg
ICB9Cj4gKwo+ICsgICAgICAgaW5pdF9wZF9uKHZtLCBwZCwgdm0tPnNjcmF0Y2hfcGQsIEdFTjhf
M0xWTF9QRFBFUyk7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHBkOwo+ICt9Cj4gKwo+ICAvKgo+ICAg
KiBHRU44IGxlZ2FjeSBwcGd0dCBwcm9ncmFtbWluZyBpcyBhY2NvbXBsaXNoZWQgdGhyb3VnaCBh
IG1heCA0IFBEUCByZWdpc3RlcnMKPiAgICogd2l0aCBhIG5ldCBlZmZlY3QgcmVzZW1ibGluZyBh
IDItbGV2ZWwgcGFnZSB0YWJsZSBpbiBub3JtYWwgeDg2IHRlcm1zLiBFYWNoCj4gQEAgLTE1NDgs
NiArMTU4NCw3IEBAIHN0YXRpYyB2b2lkIHBwZ3R0X2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUsCj4gICAqLwo+ICBzdGF0aWMgc3RydWN0IGk5MTVfcHBndHQgKmdlbjhfcHBndHRf
Y3JlYXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQo+ICB7Cj4gKyAgICAgICBzdHJ1
Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bTsKPiAgICAgICAgIHN0cnVjdCBpOTE1X3BwZ3R0ICpw
cGd0dDsKPiAgICAgICAgIGludCBlcnI7Cj4gIAo+IEBAIC0xNTU3LDcwICsxNTk0LDU5IEBAIHN0
YXRpYyBzdHJ1Y3QgaTkxNV9wcGd0dCAqZ2VuOF9wcGd0dF9jcmVhdGUoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUpCj4gIAo+ICAgICAgICAgcHBndHRfaW5pdChpOTE1LCBwcGd0dCk7Cj4g
IAo+ICsgICAgICAgdm0gPSAmcHBndHQtPnZtOwoKQmVlbiBoYXZpbmcgdGhpcyBkZWJhdGUgd2l0
aCBUdXJzdWxpbiwgd2hldGhlciBvciBub3QgaXQgaXMgbW9yZQpjb25mdXNpbmcgdG8gaGF2ZSBh
IGxvY2FsIGFsaWFzIGhlcmUuIEkgdGhpbmsgb24gcmVhZGluZyBpdCwgaXQgaXMgbXVjaApjbGVh
cmVyIHRoYXQgd2UgYXJlIHNldHRpbmcgdXAgb25lIG9iamVjdCBpZiB3ZSB1c2UgcHBndHQtPnZt
LmZvbyB0aGFuCml0IGlzIHRvIGFsdGVybmF0ZSBiZXR3ZWVuIHBwZ3R0LT5mb28gYW5kIHZtLT5i
YXIuCgpJJ2Qgc3VnZ2VzdCBsZWF2aW5nIGl0IGFzIHBwZ3R0LT52bS5mb28gaW4gdGhpcyBwYXRj
aC4KLUNocmlzCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

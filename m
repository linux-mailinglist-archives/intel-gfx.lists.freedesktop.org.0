Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0184117922
	for <lists+intel-gfx@lfdr.de>; Wed,  8 May 2019 14:11:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 44B9E898ED;
	Wed,  8 May 2019 12:11:17 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 27715898C2;
 Wed,  8 May 2019 12:11:13 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 08 May 2019 05:11:13 -0700
X-ExtLoop1: 1
Received: from jzapadkx-mobl1.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.0.159])
 by fmsmga008.fm.intel.com with ESMTP; 08 May 2019 05:11:12 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: igt-dev@lists.freedesktop.org
Date: Wed,  8 May 2019 13:10:45 +0100
Message-Id: <20190508121058.27038-9-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.19.1
In-Reply-To: <20190508121058.27038-1-tvrtko.ursulin@linux.intel.com>
References: <20190508121058.27038-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t 08/21] gem_wsim: More wsim_err
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCkEgZmV3IG1v
cmUgb3Bwb3J0dW5pdGllcyB0byBjb21wYWN0IHRoZSBjb2RlIGJ5IHVzaW5nIHRoZSBlcnJvciBs
b2dnaW5nCmhlbHBlci4KClNpZ25lZC1vZmYtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJz
dWxpbkBpbnRlbC5jb20+Ci0tLQogYmVuY2htYXJrcy9nZW1fd3NpbS5jIHwgNTQgKysrKysrKysr
KysrLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDE1IGlu
c2VydGlvbnMoKyksIDM5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2JlbmNobWFya3MvZ2Vt
X3dzaW0uYyBiL2JlbmNobWFya3MvZ2VtX3dzaW0uYwppbmRleCBlZjk3MzExYTY4NzkuLmYxZmNl
ZjVkY2ZiYSAxMDA2NDQKLS0tIGEvYmVuY2htYXJrcy9nZW1fd3NpbS5jCisrKyBiL2JlbmNobWFy
a3MvZ2VtX3dzaW0uYwpAQCAtMjM5Niw5ICsyMzk2LDcgQEAgaW50IG1haW4oaW50IGFyZ2MsIGNo
YXIgKiphcmd2KQogCQlzd2l0Y2ggKGMpIHsKIAkJY2FzZSAnVyc6CiAJCQlpZiAobWFzdGVyX3dv
cmtsb2FkID49IDApIHsKLQkJCQlpZiAodmVyYm9zZSkKLQkJCQkJZnByaW50ZihzdGRlcnIsCi0J
CQkJCQkiT25seSBvbmUgbWFzdGVyIHdvcmtsb2FkIGNhbiBiZSBnaXZlbiFcbiIpOworCQkJCXdz
aW1fZXJyKCJPbmx5IG9uZSBtYXN0ZXIgd29ya2xvYWQgY2FuIGJlIGdpdmVuIVxuIik7CiAJCQkJ
cmV0dXJuIDE7CiAJCQl9CiAJCQltYXN0ZXJfd29ya2xvYWQgPSBucl93X2FyZ3M7CkBAIC0yNDEx
LDkgKzI0MDksNyBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAJCQlicmVhazsK
IAkJY2FzZSAnYSc6CiAJCQlpZiAoYXBwZW5kX3dvcmtsb2FkX2FyZykgewotCQkJCWlmICh2ZXJi
b3NlKQotCQkJCQlmcHJpbnRmKHN0ZGVyciwKLQkJCQkJCSJPbmx5IG9uZSBhcHBlbmQgd29ya2xv
YWQgY2FuIGJlIGdpdmVuIVxuIik7CisJCQkJd3NpbV9lcnIoIk9ubHkgb25lIGFwcGVuZCB3b3Jr
bG9hZCBjYW4gYmUgZ2l2ZW4hXG4iKTsKIAkJCQlyZXR1cm4gMTsKIAkJCX0KIAkJCWFwcGVuZF93
b3JrbG9hZF9hcmcgPSBvcHRhcmc7CkBAIC0yNDc0LDEwICsyNDcwLDggQEAgaW50IG1haW4oaW50
IGFyZ2MsIGNoYXIgKiphcmd2KQogCQkJfQogCiAJCQlpZiAoIWJhbGFuY2VyKSB7Ci0JCQkJaWYg
KHZlcmJvc2UpCi0JCQkJCWZwcmludGYoc3RkZXJyLAotCQkJCQkJIlVua25vd24gYmFsYW5jaW5n
IG1vZGUgJyVzJyFcbiIsCi0JCQkJCQlvcHRhcmcpOworCQkJCXdzaW1fZXJyKCJVbmtub3duIGJh
bGFuY2luZyBtb2RlICclcychXG4iLAorCQkJCQkgb3B0YXJnKTsKIAkJCQlyZXR1cm4gMTsKIAkJ
CX0KIAkJCWJyZWFrOwpAQCAtMjQ5MCwxNCArMjQ4NCwxMiBAQCBpbnQgbWFpbihpbnQgYXJnYywg
Y2hhciAqKmFyZ3YpCiAJfQogCiAJaWYgKChmbGFncyAmIEhFQVJUQkVBVCkgJiYgIShmbGFncyAm
IFNFUU5PKSkgewotCQlpZiAodmVyYm9zZSkKLQkJCWZwcmludGYoc3RkZXJyLCAiSGVhcnRiZWF0
IG5lZWRzIGEgc2Vxbm8gYmFzZWQgYmFsYW5jZXIhXG4iKTsKKwkJd3NpbV9lcnIoIkhlYXJ0YmVh
dCBuZWVkcyBhIHNlcW5vIGJhc2VkIGJhbGFuY2VyIVxuIik7CiAJCXJldHVybiAxOwogCX0KIAog
CWlmICgoZmxhZ3MgJiBWQ1MyUkVNQVApICYmIChmbGFncyAmIEk5MTUpKSB7Ci0JCWlmICh2ZXJi
b3NlKQotCQkJZnByaW50ZihzdGRlcnIsICJWQ1MgcmVtYXBwaW5nIG5vdCBzdXBwb3J0ZWQgd2l0
aCBpOTE1IGJhbGFuY2luZyFcbiIpOworCQl3c2ltX2VycigiVkNTIHJlbWFwcGluZyBub3Qgc3Vw
cG9ydGVkIHdpdGggaTkxNSBiYWxhbmNpbmchXG4iKTsKIAkJcmV0dXJuIDE7CiAJfQogCkBAIC0y
NTE0LDMxICsyNTA2LDI0IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJndikKIAl9CiAK
IAlpZiAoIW5yX3dfYXJncykgewotCQlpZiAodmVyYm9zZSkKLQkJCWZwcmludGYoc3RkZXJyLCAi
Tm8gd29ya2xvYWQgZGVzY3JpcHRvcihzKSFcbiIpOworCQl3c2ltX2VycigiTm8gd29ya2xvYWQg
ZGVzY3JpcHRvcihzKSFcbiIpOwogCQlyZXR1cm4gMTsKIAl9CiAKIAlpZiAobnJfd19hcmdzID4g
MSAmJiBjbGllbnRzID4gMSkgewotCQlpZiAodmVyYm9zZSkKLQkJCWZwcmludGYoc3RkZXJyLAot
CQkJCSJDbG9uZWQgY2xpZW50cyBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCBtdWx0aXBsZSB3b3Jr
bG9hZHMhXG4iKTsKKwkJd3NpbV9lcnIoIkNsb25lZCBjbGllbnRzIGNhbm5vdCBiZSBjb21iaW5l
ZCB3aXRoIG11bHRpcGxlIHdvcmtsb2FkcyFcbiIpOwogCQlyZXR1cm4gMTsKIAl9CiAKIAlpZiAo
KGZsYWdzICYgR0xPQkFMX0JBTEFOQ0UpICYmICFiYWxhbmNlcikgewotCQlpZiAodmVyYm9zZSkK
LQkJCWZwcmludGYoc3RkZXJyLAotCQkJCSJCYWxhbmNlciBub3Qgc3BlY2lmaWVkIGluIGdsb2Jh
bCBiYWxhbmNpbmcgbW9kZSFcbiIpOworCQl3c2ltX2VycigiQmFsYW5jZXIgbm90IHNwZWNpZmll
ZCBpbiBnbG9iYWwgYmFsYW5jaW5nIG1vZGUhXG4iKTsKIAkJcmV0dXJuIDE7CiAJfQogCiAJaWYg
KGFwcGVuZF93b3JrbG9hZF9hcmcpIHsKIAkJYXBwZW5kX3dvcmtsb2FkX2FyZyA9IGxvYWRfd29y
a2xvYWRfZGVzY3JpcHRvcihhcHBlbmRfd29ya2xvYWRfYXJnKTsKIAkJaWYgKCFhcHBlbmRfd29y
a2xvYWRfYXJnKSB7Ci0JCQlpZiAodmVyYm9zZSkKLQkJCQlmcHJpbnRmKHN0ZGVyciwKLQkJCQkJ
IkZhaWxlZCB0byBsb2FkIGFwcGVuZCB3b3JrbG9hZCBkZXNjcmlwdG9yIVxuIik7CisJCQl3c2lt
X2VycigiRmFpbGVkIHRvIGxvYWQgYXBwZW5kIHdvcmtsb2FkIGRlc2NyaXB0b3IhXG4iKTsKIAkJ
CXJldHVybiAxOwogCQl9CiAJfQpAQCAtMjU0Nyw5ICsyNTMyLDcgQEAgaW50IG1haW4oaW50IGFy
Z2MsIGNoYXIgKiphcmd2KQogCQlzdHJ1Y3Qgd19hcmcgYXJnID0geyBOVUxMLCBhcHBlbmRfd29y
a2xvYWRfYXJnLCAwIH07CiAJCWFwcF93ID0gcGFyc2Vfd29ya2xvYWQoJmFyZywgZmxhZ3MsIE5V
TEwpOwogCQlpZiAoIWFwcF93KSB7Ci0JCQlpZiAodmVyYm9zZSkKLQkJCQlmcHJpbnRmKHN0ZGVy
ciwKLQkJCQkJIkZhaWxlZCB0byBwYXJzZSBhcHBlbmQgd29ya2xvYWQhXG4iKTsKKwkJCXdzaW1f
ZXJyKCJGYWlsZWQgdG8gcGFyc2UgYXBwZW5kIHdvcmtsb2FkIVxuIik7CiAJCQlyZXR1cm4gMTsK
IAkJfQogCX0KQEAgLTI1NjEsMTggKzI1NDQsMTMgQEAgaW50IG1haW4oaW50IGFyZ2MsIGNoYXIg
Kiphcmd2KQogCQl3X2FyZ3NbaV0uZGVzYyA9IGxvYWRfd29ya2xvYWRfZGVzY3JpcHRvcih3X2Fy
Z3NbaV0uZmlsZW5hbWUpOwogCiAJCWlmICghd19hcmdzW2ldLmRlc2MpIHsKLQkJCWlmICh2ZXJi
b3NlKQotCQkJCWZwcmludGYoc3RkZXJyLAotCQkJCQkiRmFpbGVkIHRvIGxvYWQgd29ya2xvYWQg
ZGVzY3JpcHRvciAldSFcbiIsCi0JCQkJCWkpOworCQkJd3NpbV9lcnIoIkZhaWxlZCB0byBsb2Fk
IHdvcmtsb2FkIGRlc2NyaXB0b3IgJXUhXG4iLCBpKTsKIAkJCXJldHVybiAxOwogCQl9CiAKIAkJ
d3JrW2ldID0gcGFyc2Vfd29ya2xvYWQoJndfYXJnc1tpXSwgZmxhZ3MsIGFwcF93KTsKIAkJaWYg
KCF3cmtbaV0pIHsKLQkJCWlmICh2ZXJib3NlKQotCQkJCWZwcmludGYoc3RkZXJyLAotCQkJCQki
RmFpbGVkIHRvIHBhcnNlIHdvcmtsb2FkICV1IVxuIiwgaSk7CisJCQl3c2ltX2VycigiRmFpbGVk
IHRvIHBhcnNlIHdvcmtsb2FkICV1IVxuIiwgaSk7CiAJCQlyZXR1cm4gMTsKIAkJfQogCX0KQEAg
LTI2MzIsMTAgKzI2MTAsOCBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAJCWlm
IChiYWxhbmNlciAmJiBiYWxhbmNlci0+aW5pdCkgewogCQkJaW50IHJldCA9IGJhbGFuY2VyLT5p
bml0KGJhbGFuY2VyLCB3W2ldKTsKIAkJCWlmIChyZXQpIHsKLQkJCQlpZiAodmVyYm9zZSkKLQkJ
CQkJZnByaW50ZihzdGRlcnIsCi0JCQkJCQkiRmFpbGVkIHRvIGluaXRpYWxpemUgYmFsYW5jaW5n
ISAoJXU9JWQpXG4iLAotCQkJCQkJaSwgcmV0KTsKKwkJCQl3c2ltX2VycigiRmFpbGVkIHRvIGlu
aXRpYWxpemUgYmFsYW5jaW5nISAoJXU9JWQpXG4iLAorCQkJCQkgaSwgcmV0KTsKIAkJCQlyZXR1
cm4gMTsKIAkJCX0KIAkJfQotLSAKMi4xOS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9pbnRlbC1nZng=

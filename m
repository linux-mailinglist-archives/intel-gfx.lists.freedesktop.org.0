Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DEAB846272
	for <lists+intel-gfx@lfdr.de>; Fri, 14 Jun 2019 17:17:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EEF9C89A5D;
	Fri, 14 Jun 2019 15:17:49 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 956BC89A56
 for <Intel-gfx@lists.freedesktop.org>; Fri, 14 Jun 2019 15:17:46 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 14 Jun 2019 08:17:46 -0700
X-ExtLoop1: 1
Received: from yyosef-mobl.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.23.42])
 by orsmga004.jf.intel.com with ESMTP; 14 Jun 2019 08:17:45 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Fri, 14 Jun 2019 16:17:06 +0100
Message-Id: <20190614151731.17608-7-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190614151731.17608-1-tvrtko.ursulin@linux.intel.com>
References: <20190614151731.17608-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC 06/31] drm/i915: Convert i915_gem_init_swizzling
 to intel_gt
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KClN0YXJ0IHVz
aW5nIHRoZSBuZXdseSBpbnRyb2R1Y2VkIHN0cnVjdCBpbnRlbF9ndCB0byBmdXNlIHRvZ2V0aGVy
IGNvcnJlY3QKbG9naWNhbCBpbml0IGZsb3cgd2l0aCB1bmNvcmUgZm9yIG1vcmUgcmVtb3ZhbCBv
ZiBpbXBsaWNpdCBkZXZfcHJpdiBpbgptbWlvIGFjY2Vzcy4KCnYyOgogKiBNb3ZlIGNvZGUgdG8g
aTkxNV9nZW1fZmVuY2VfcmVnLiAoQ2hyaXMpCgpTaWduZWQtb2ZmLWJ5OiBUdnJ0a28gVXJzdWxp
biA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZHJ2LmMgICAgICAgICAgIHwgIDQgKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5oICAgICAgICAgICB8ICAxIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMgICAg
ICAgICAgIHwgMjUgKy0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dl
bV9mZW5jZV9yZWcuYyB8IDM3ICsrKysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dlbV9mZW5jZV9yZWcuaCB8ICAzICsrCiA1IGZpbGVzIGNoYW5nZWQsIDQz
IGluc2VydGlvbnMoKyksIDI3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCmlu
ZGV4IDk3MTU1YzVlYjdlMS4uMWRmNzZmN2M3MTdlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMK
QEAgLTI5MzUsNyArMjkzNSw3IEBAIHN0YXRpYyBpbnQgaW50ZWxfcnVudGltZV9zdXNwZW5kKHN0
cnVjdCBkZXZpY2UgKmtkZXYpCiAKIAkJaW50ZWxfdWNfcmVzdW1lKGRldl9wcml2KTsKIAotCQlp
OTE1X2dlbV9pbml0X3N3aXp6bGluZyhkZXZfcHJpdik7CisJCWludGVsX2d0X2luaXRfc3dpenps
aW5nKCZkZXZfcHJpdi0+Z3QpOwogCQlpOTE1X2dlbV9yZXN0b3JlX2ZlbmNlcyhkZXZfcHJpdik7
CiAKIAkJZW5hYmxlX3JwbV93YWtlcmVmX2Fzc2VydHMoZGV2X3ByaXYpOwpAQCAtMzAzNiw3ICsz
MDM2LDcgQEAgc3RhdGljIGludCBpbnRlbF9ydW50aW1lX3Jlc3VtZShzdHJ1Y3QgZGV2aWNlICpr
ZGV2KQogCSAqIE5vIHBvaW50IG9mIHJvbGxpbmcgYmFjayB0aGluZ3MgaW4gY2FzZSBvZiBhbiBl
cnJvciwgYXMgdGhlIGJlc3QKIAkgKiB3ZSBjYW4gZG8gaXMgdG8gaG9wZSB0aGF0IHRoaW5ncyB3
aWxsIHN0aWxsIHdvcmsgKGFuZCBkaXNhYmxlIFJQTSkuCiAJICovCi0JaTkxNV9nZW1faW5pdF9z
d2l6emxpbmcoZGV2X3ByaXYpOworCWludGVsX2d0X2luaXRfc3dpenpsaW5nKCZkZXZfcHJpdi0+
Z3QpOwogCWk5MTVfZ2VtX3Jlc3RvcmVfZmVuY2VzKGRldl9wcml2KTsKIAogCS8qCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9kcnYuaAppbmRleCBlMmM4ODEzYzkzNTUuLjFlYjIwM2ZkZWU2MCAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5oCkBAIC0yNTg2LDcgKzI1ODYsNiBAQCBib29sIGk5MTVfZ2VtX3Vuc2V0
X3dlZGdlZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBpOTE1X2dl
bV9pbml0X21taW8oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwogaW50IF9fbXVzdF9j
aGVjayBpOTE1X2dlbV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiBp
bnQgX19tdXN0X2NoZWNrIGk5MTVfZ2VtX2luaXRfaHcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KTsKLXZvaWQgaTkxNV9nZW1faW5pdF9zd2l6emxpbmcoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2KTsKIHZvaWQgaTkxNV9nZW1fZmluaV9odyhzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBpOTE1X2dlbV9maW5pKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdik7CiBpbnQgaTkxNV9nZW1fd2FpdF9mb3JfaWRsZShzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwppbmRleCA3
ZmRmMjUyZjkzMjIuLjVjMGRiOTM0MzE1YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCkBAIC0x
MjA1LDI5ICsxMjA1LDYgQEAgdm9pZCBpOTE1X2dlbV9zYW5pdGl6ZShzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSkKIAltdXRleF91bmxvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwog
fQogCi12b2lkIGk5MTVfZ2VtX2luaXRfc3dpenpsaW5nKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdikKLXsKLQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA8IDUgfHwKLQkgICAgZGV2
X3ByaXYtPm1tLmJpdF82X3N3aXp6bGVfeCA9PSBJOTE1X0JJVF82X1NXSVpaTEVfTk9ORSkKLQkJ
cmV0dXJuOwotCi0JSTkxNV9XUklURShESVNQX0FSQl9DVEwsIEk5MTVfUkVBRChESVNQX0FSQl9D
VEwpIHwKLQkJCQkgRElTUF9USUxFX1NVUkZBQ0VfU1dJWlpMSU5HKTsKLQotCWlmIChJU19HRU4o
ZGV2X3ByaXYsIDUpKQotCQlyZXR1cm47Ci0KLQlJOTE1X1dSSVRFKFRJTEVDVEwsIEk5MTVfUkVB
RChUSUxFQ1RMKSB8IFRJTEVDVExfU1daQ1RMKTsKLQlpZiAoSVNfR0VOKGRldl9wcml2LCA2KSkK
LQkJSTkxNV9XUklURShBUkJfTU9ERSwgX01BU0tFRF9CSVRfRU5BQkxFKEFSQl9NT0RFX1NXSVpa
TEVfU05CKSk7Ci0JZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCA3KSkKLQkJSTkxNV9XUklURShB
UkJfTU9ERSwgX01BU0tFRF9CSVRfRU5BQkxFKEFSQl9NT0RFX1NXSVpaTEVfSVZCKSk7Ci0JZWxz
ZSBpZiAoSVNfR0VOKGRldl9wcml2LCA4KSkKLQkJSTkxNV9XUklURShHQU1UQVJCTU9ERSwgX01B
U0tFRF9CSVRfRU5BQkxFKEFSQl9NT0RFX1NXSVpaTEVfQkRXKSk7Ci0JZWxzZQotCQlCVUcoKTsK
LX0KLQogc3RhdGljIHZvaWQgaW5pdF91bnVzZWRfcmluZyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsIHUzMiBiYXNlKQogewogCUk5MTVfV1JJVEUoUklOR19DVEwoYmFzZSksIDAp
OwpAQCAtMTI3NCw3ICsxMjUxLDcgQEAgaW50IGk5MTVfZ2VtX2luaXRfaHcoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2KQogCS8qIC4uLmFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGV5
IGFyZSBzdGlja2luZy4gKi8KIAlpbnRlbF9ndF92ZXJpZnlfd29ya2Fyb3VuZHMoZGV2X3ByaXYs
ICJpbml0Iik7CiAKLQlpOTE1X2dlbV9pbml0X3N3aXp6bGluZyhkZXZfcHJpdik7CisJaW50ZWxf
Z3RfaW5pdF9zd2l6emxpbmcoJmRldl9wcml2LT5ndCk7CiAKIAkvKgogCSAqIEF0IGxlYXN0IDgz
MCBjYW4gbGVhdmUgc29tZSBvZiB0aGUgdW51c2VkIHJpbmdzCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9mZW5jZV9yZWcuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZ2VtX2ZlbmNlX3JlZy5jCmluZGV4IDFjOTQ2NjY3NmNhZi4uZmMyNjg1OTlhMGMzIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9mZW5jZV9yZWcuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9mZW5jZV9yZWcuYwpAQCAtODM0LDMgKzgz
NCw0MCBAQCB2b2lkIGk5MTVfZ2d0dF9pbml0X2ZlbmNlcyhzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0
KQogCiAJaTkxNV9nZW1fcmVzdG9yZV9mZW5jZXMoaTkxNSk7CiB9CisKK3ZvaWQgaW50ZWxfZ3Rf
aW5pdF9zd2l6emxpbmcoc3RydWN0IGludGVsX2d0ICpndCkKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSA9IGd0LT5pOTE1OworCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSA9
IGd0LT51bmNvcmU7CisKKwlpZiAoSU5URUxfR0VOKGk5MTUpIDwgNSB8fAorCSAgICBpOTE1LT5t
bS5iaXRfNl9zd2l6emxlX3ggPT0gSTkxNV9CSVRfNl9TV0laWkxFX05PTkUpCisJCXJldHVybjsK
KworCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCisJCQkgICBESVNQX0FSQl9DVEwsCisJCQkg
ICBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIERJU1BfQVJCX0NUTCkgfAorCQkJICAgRElTUF9U
SUxFX1NVUkZBQ0VfU1dJWlpMSU5HKTsKKworCWlmIChJU19HRU4oaTkxNSwgNSkpCisJCXJldHVy
bjsKKworCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCisJCQkgICBUSUxFQ1RMLAorCQkJICAg
aW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBUSUxFQ1RMKSB8IFRJTEVDVExfU1daQ1RMKTsKKwor
CWlmIChJU19HRU4oaTkxNSwgNikpCisJCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCisJCQkJ
ICAgQVJCX01PREUsCisJCQkJICAgX01BU0tFRF9CSVRfRU5BQkxFKEFSQl9NT0RFX1NXSVpaTEVf
U05CKSk7CisJZWxzZSBpZiAoSVNfR0VOKGk5MTUsIDcpKQorCQlpbnRlbF91bmNvcmVfd3JpdGUo
dW5jb3JlLAorCQkJCSAgIEFSQl9NT0RFLAorCQkJCSAgIF9NQVNLRURfQklUX0VOQUJMRShBUkJf
TU9ERV9TV0laWkxFX0lWQikpOworCWVsc2UgaWYgKElTX0dFTihpOTE1LCA4KSkKKwkJaW50ZWxf
dW5jb3JlX3dyaXRlKHVuY29yZSwKKwkJCQkgICBHQU1UQVJCTU9ERSwKKwkJCQkgICBfTUFTS0VE
X0JJVF9FTkFCTEUoQVJCX01PREVfU1dJWlpMRV9CRFcpKTsKKwllbHNlCisJCU1JU1NJTkdfQ0FT
RShJTlRFTF9HRU4oaTkxNSkpOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW1fZmVuY2VfcmVnLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9mZW5j
ZV9yZWcuaAppbmRleCBkMmRhOTg4MjgxNzkuLjM3ZTRmMTA0ZjdjMCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2VfcmVnLmgKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9nZW1fZmVuY2VfcmVnLmgKQEAgLTMyLDYgKzMyLDcgQEAgc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3Q7CiBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZTsKIHN0cnVjdCBpOTE1
X2dndHQ7CiBzdHJ1Y3QgaTkxNV92bWE7CitzdHJ1Y3QgaW50ZWxfZ3Q7CiBzdHJ1Y3Qgc2dfdGFi
bGU7CiAKICNkZWZpbmUgSTk2NV9GRU5DRV9QQUdFIDQwOTZVTApAQCAtNjYsNCArNjcsNiBAQCB2
b2lkIGk5MTVfZ2VtX29iamVjdF9zYXZlX2JpdF8xN19zd2l6emxlKHN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmosCiAKIHZvaWQgaTkxNV9nZ3R0X2luaXRfZmVuY2VzKHN0cnVjdCBpOTE1
X2dndHQgKmdndHQpOwogCit2b2lkIGludGVsX2d0X2luaXRfc3dpenpsaW5nKHN0cnVjdCBpbnRl
bF9ndCAqZ3QpOworCiAjZW5kaWYKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vaW50ZWwtZ2Z4

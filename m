Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0FBF2B976B
	for <lists+intel-gfx@lfdr.de>; Fri, 20 Sep 2019 20:54:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 54DF96FD9B;
	Fri, 20 Sep 2019 18:54:34 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AC5D76FD9A
 for <intel-gfx@lists.freedesktop.org>; Fri, 20 Sep 2019 18:54:32 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Sep 2019 11:54:32 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,529,1559545200"; d="scan'208";a="202554995"
Received: from ericferx-mobl1.ger.corp.intel.com (HELO localhost)
 ([10.249.39.24])
 by fmsmga001.fm.intel.com with ESMTP; 20 Sep 2019 11:54:30 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 20 Sep 2019 21:54:18 +0300
Message-Id: <20190920185421.17822-3-jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190920185421.17822-1-jani.nikula@intel.com>
References: <20190920185421.17822-1-jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH v2 3/6] drm/i915: pass i915 to
 intel_modeset_driver_remove()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SW4gZ2VuZXJhbCwgcHJlZmVyIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICogb3ZlciBzdHJ1Y3Qg
ZHJtX2RldmljZSAqCndoZW4gZWl0aGVyIHdpbGwgZG8uIFJlbmFtZSB0aGUgbG9jYWwgdmFyaWFi
bGUgdG8gaTkxNS4gQWxzbyBwcm9wYWdhdGUKdG8gaW50ZWxfaHBkX3BvbGxfZmluaSgpLiBObyBm
dW5jdGlvbmFsIGNoYW5nZXMuCgpSZXZpZXdlZC1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJp
cy13aWxzb24uY28udWs+ClNpZ25lZC1vZmYtYnk6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBp
bnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5
LmMgfCAzOCArKysrKysrKysrLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5LmggfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYu
YyAgICAgICAgICAgICAgfCAgNCArLS0KIDMgZmlsZXMgY2hhbmdlZCwgMjEgaW5zZXJ0aW9ucygr
KSwgMjMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXkuYwppbmRleCBlMDAzM2Q5OWY2ZTMuLjUzOGEzM2FkYmMwZSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKQEAgLTE3MDc2LDEzICsxNzA3
NiwxMyBAQCB2b2lkIGludGVsX2Rpc3BsYXlfcmVzdW1lKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYp
CiAJCWRybV9hdG9taWNfc3RhdGVfcHV0KHN0YXRlKTsKIH0KIAotc3RhdGljIHZvaWQgaW50ZWxf
aHBkX3BvbGxfZmluaShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQorc3RhdGljIHZvaWQgaW50ZWxf
aHBkX3BvbGxfZmluaShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsKIAlzdHJ1Y3Qg
aW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3I7CiAJc3RydWN0IGRybV9jb25uZWN0b3JfbGlzdF9p
dGVyIGNvbm5faXRlcjsKIAogCS8qIEtpbGwgYWxsIHRoZSB3b3JrIHRoYXQgbWF5IGhhdmUgYmVl
biBxdWV1ZWQgYnkgaHBkLiAqLwotCWRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKGRldiwg
JmNvbm5faXRlcik7CisJZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4oJmk5MTUtPmRybSwg
JmNvbm5faXRlcik7CiAJZm9yX2VhY2hfaW50ZWxfY29ubmVjdG9yX2l0ZXIoY29ubmVjdG9yLCAm
Y29ubl9pdGVyKSB7CiAJCWlmIChjb25uZWN0b3ItPm1vZGVzZXRfcmV0cnlfd29yay5mdW5jKQog
CQkJY2FuY2VsX3dvcmtfc3luYygmY29ubmVjdG9yLT5tb2Rlc2V0X3JldHJ5X3dvcmspOwpAQCAt
MTcwOTQsNTEgKzE3MDk0LDQ5IEBAIHN0YXRpYyB2b2lkIGludGVsX2hwZF9wb2xsX2Zpbmkoc3Ry
dWN0IGRybV9kZXZpY2UgKmRldikKIAlkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9lbmQoJmNvbm5f
aXRlcik7CiB9CiAKLXZvaWQgaW50ZWxfbW9kZXNldF9kcml2ZXJfcmVtb3ZlKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYpCit2b2lkIGludGVsX21vZGVzZXRfZHJpdmVyX3JlbW92ZShzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYgPSB0b19pOTE1KGRldik7Ci0KLQlmbHVzaF93b3JrcXVldWUoZGV2X3ByaXYtPmZsaXBfd3Ep
OwotCWZsdXNoX3dvcmtxdWV1ZShkZXZfcHJpdi0+bW9kZXNldF93cSk7CisJZmx1c2hfd29ya3F1
ZXVlKGk5MTUtPmZsaXBfd3EpOworCWZsdXNoX3dvcmtxdWV1ZShpOTE1LT5tb2Rlc2V0X3dxKTsK
IAotCWZsdXNoX3dvcmsoJmRldl9wcml2LT5hdG9taWNfaGVscGVyLmZyZWVfd29yayk7Ci0JV0FS
Tl9PTighbGxpc3RfZW1wdHkoJmRldl9wcml2LT5hdG9taWNfaGVscGVyLmZyZWVfbGlzdCkpOwor
CWZsdXNoX3dvcmsoJmk5MTUtPmF0b21pY19oZWxwZXIuZnJlZV93b3JrKTsKKwlXQVJOX09OKCFs
bGlzdF9lbXB0eSgmaTkxNS0+YXRvbWljX2hlbHBlci5mcmVlX2xpc3QpKTsKIAogCS8qCiAJICog
SW50ZXJydXB0cyBhbmQgcG9sbGluZyBhcyB0aGUgZmlyc3QgdGhpbmcgdG8gYXZvaWQgY3JlYXRp
bmcgaGF2b2MuCiAJICogVG9vIG11Y2ggc3R1ZmYgaGVyZSAodHVybmluZyBvZiBjb25uZWN0b3Jz
LCAuLi4pIHdvdWxkCiAJICogZXhwZXJpZW5jZSBmYW5jeSByYWNlcyBvdGhlcndpc2UuCiAJICov
Ci0JaW50ZWxfaXJxX3VuaW5zdGFsbChkZXZfcHJpdik7CisJaW50ZWxfaXJxX3VuaW5zdGFsbChp
OTE1KTsKIAogCS8qCiAJICogRHVlIHRvIHRoZSBocGQgaXJxIHN0b3JtIGhhbmRsaW5nIHRoZSBo
b3RwbHVnIHdvcmsgY2FuIHJlLWFybSB0aGUKIAkgKiBwb2xsIGhhbmRsZXJzLiBIZW5jZSBkaXNh
YmxlIHBvbGxpbmcgYWZ0ZXIgaHBkIGhhbmRsaW5nIGlzIHNodXQgZG93bi4KIAkgKi8KLQlpbnRl
bF9ocGRfcG9sbF9maW5pKGRldik7CisJaW50ZWxfaHBkX3BvbGxfZmluaShpOTE1KTsKIAogCS8q
IHBvbGwgd29yayBjYW4gY2FsbCBpbnRvIGZiZGV2LCBoZW5jZSBjbGVhbiB0aGF0IHVwIGFmdGVy
d2FyZHMgKi8KLQlpbnRlbF9mYmRldl9maW5pKGRldl9wcml2KTsKKwlpbnRlbF9mYmRldl9maW5p
KGk5MTUpOwogCiAJaW50ZWxfdW5yZWdpc3Rlcl9kc21faGFuZGxlcigpOwogCi0JaW50ZWxfZmJj
X2dsb2JhbF9kaXNhYmxlKGRldl9wcml2KTsKKwlpbnRlbF9mYmNfZ2xvYmFsX2Rpc2FibGUoaTkx
NSk7CiAKIAkvKiBmbHVzaCBhbnkgZGVsYXllZCB0YXNrcyBvciBwZW5kaW5nIHdvcmsgKi8KIAlm
bHVzaF9zY2hlZHVsZWRfd29yaygpOwogCi0JaW50ZWxfaGRjcF9jb21wb25lbnRfZmluaShkZXZf
cHJpdik7CisJaW50ZWxfaGRjcF9jb21wb25lbnRfZmluaShpOTE1KTsKIAotCWRybV9tb2RlX2Nv
bmZpZ19jbGVhbnVwKGRldik7CisJZHJtX21vZGVfY29uZmlnX2NsZWFudXAoJmk5MTUtPmRybSk7
CiAKLQlpbnRlbF9vdmVybGF5X2NsZWFudXAoZGV2X3ByaXYpOworCWludGVsX292ZXJsYXlfY2xl
YW51cChpOTE1KTsKIAotCWludGVsX2dtYnVzX3RlYXJkb3duKGRldl9wcml2KTsKKwlpbnRlbF9n
bWJ1c190ZWFyZG93bihpOTE1KTsKIAotCWRlc3Ryb3lfd29ya3F1ZXVlKGRldl9wcml2LT5mbGlw
X3dxKTsKLQlkZXN0cm95X3dvcmtxdWV1ZShkZXZfcHJpdi0+bW9kZXNldF93cSk7CisJZGVzdHJv
eV93b3JrcXVldWUoaTkxNS0+ZmxpcF93cSk7CisJZGVzdHJveV93b3JrcXVldWUoaTkxNS0+bW9k
ZXNldF93cSk7CiAKLQlpbnRlbF9mYmNfY2xlYW51cF9jZmIoZGV2X3ByaXYpOworCWludGVsX2Zi
Y19jbGVhbnVwX2NmYihpOTE1KTsKIH0KIAogLyoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5LmgKaW5kZXggYjFhZTBlNTljNzE1Li45MzNjYmUzNmJiNTkgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5oCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5oCkBAIC01Nzgs
NyArNTc4LDcgQEAgdm9pZCBpbnRlbF9kaXNwbGF5X3ByaW50X2Vycm9yX3N0YXRlKHN0cnVjdCBk
cm1faTkxNV9lcnJvcl9zdGF0ZV9idWYgKmUsCiAvKiBtb2Rlc2V0dGluZyAqLwogdm9pZCBpbnRl
bF9tb2Rlc2V0X2luaXRfaHcoc3RydWN0IGRybV9kZXZpY2UgKmRldik7CiBpbnQgaW50ZWxfbW9k
ZXNldF9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwotdm9pZCBpbnRlbF9tb2Rlc2V0X2Ry
aXZlcl9yZW1vdmUoc3RydWN0IGRybV9kZXZpY2UgKmRldik7Cit2b2lkIGludGVsX21vZGVzZXRf
ZHJpdmVyX3JlbW92ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7CiBpbnQgaW50ZWxf
bW9kZXNldF92Z2Ffc2V0X3N0YXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwg
Ym9vbCBzdGF0ZSk7CiB2b2lkIGludGVsX2Rpc3BsYXlfcmVzdW1lKHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYpOwogdm9pZCBpOTE1X3JlZGlzYWJsZV92Z2Eoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCmluZGV4IDNlNGVhNWQ2ZmNjMi4uZDli
OWU5NjQ0ZjVjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKQEAgLTQwNyw3ICs0MDcsNyBAQCBz
dGF0aWMgaW50IGk5MTVfZHJpdmVyX21vZGVzZXRfcHJvYmUoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUpCiAJaTkxNV9nZW1fZHJpdmVyX3JlbW92ZShpOTE1KTsKIAlpOTE1X2dlbV9kcml2
ZXJfcmVsZWFzZShpOTE1KTsKIGNsZWFudXBfbW9kZXNldDoKLQlpbnRlbF9tb2Rlc2V0X2RyaXZl
cl9yZW1vdmUoJmk5MTUtPmRybSk7CisJaW50ZWxfbW9kZXNldF9kcml2ZXJfcmVtb3ZlKGk5MTUp
OwogY2xlYW51cF9pcnE6CiAJaW50ZWxfaXJxX3VuaW5zdGFsbChpOTE1KTsKIAlpbnRlbF9nbWJ1
c190ZWFyZG93bihpOTE1KTsKQEAgLTQyNSw3ICs0MjUsNyBAQCBzdGF0aWMgdm9pZCBpOTE1X2Ry
aXZlcl9tb2Rlc2V0X3JlbW92ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsKIAlz
dHJ1Y3QgcGNpX2RldiAqcGRldiA9IGk5MTUtPmRybS5wZGV2OwogCi0JaW50ZWxfbW9kZXNldF9k
cml2ZXJfcmVtb3ZlKCZpOTE1LT5kcm0pOworCWludGVsX21vZGVzZXRfZHJpdmVyX3JlbW92ZShp
OTE1KTsKIAogCWludGVsX2Jpb3NfZHJpdmVyX3JlbW92ZShpOTE1KTsKIAotLSAKMi4yMC4xCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

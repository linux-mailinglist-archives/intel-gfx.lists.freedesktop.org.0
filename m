Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id ED5321007EB
	for <lists+intel-gfx@lfdr.de>; Mon, 18 Nov 2019 16:12:23 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 687848936E;
	Mon, 18 Nov 2019 15:12:22 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 403AB8936E
 for <intel-gfx@lists.freedesktop.org>; Mon, 18 Nov 2019 15:12:21 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 18 Nov 2019 07:12:20 -0800
X-IronPort-AV: E=Sophos;i="5.68,320,1569308400"; d="scan'208";a="199997470"
Received: from unknown (HELO [10.252.30.240]) ([10.252.30.240])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 18 Nov 2019 07:12:19 -0800
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191118144513.2384135-1-chris@chris-wilson.co.uk>
 <20191118144649.2390393-1-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <4fed1fa5-97ab-7d32-f0c8-b03931cf1e6d@linux.intel.com>
Date: Mon, 18 Nov 2019 15:12:17 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191118144649.2390393-1-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH] drm/i915/gt: Schedule request retirement
 when submission idles
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDE4LzExLzIwMTkgMTQ6NDYsIENocmlzIFdpbHNvbiB3cm90ZToKPiBUaGUgbWFqb3IgZHJh
d2JhY2sgb2YgY29tbWl0IDdlMzRmNGU0YWFkMyAoImRybS9pOTE1L2dlbjgrOiBBZGQgUkM2IENU
WAo+IGNvcnJ1cHRpb24gV0EiKSBpcyB0aGF0IGl0IGRpc2FibGVzIFJDNiB3aGlsZSBTa3lsYWtl
IChhbmQgZnJpZW5kcykgaXMKPiBhY3RpdmUsIGFuZCB3ZSBkbyBub3QgY29uc2lkZXIgdGhlIEdQ
VSBpZGxlIHVudGlsIGFsbCBvdXRzdGFuZGluZwo+IHJlcXVlc3RzIGhhdmUgYmVlbiByZXRpcmVk
IGFuZCB0aGUgZW5naW5lIHN3aXRjaGVkIG92ZXIgdG8gdGhlIGtlcm5lbAo+IGNvbnRleHQuIElm
IHVzZXJzcGFjZSBpcyBpZGxlLCB0aGlzIHRhc2sgZmFsbHMgb250byBvdXIgYmFja2dyb3VuZCBp
ZGxlCj4gd29ya2VyLCB3aGljaCBvbmx5IHJ1bnMgcm91Z2hseSBvbmNlIGEgc2Vjb25kLCBtZWFu
aW5nIHRoYXQgdXNlcnNwYWNlIGhhcwo+IHRvIGhhdmUgYmVlbiBpZGxlIGZvciBhIGNvdXBsZSBv
ZiBzZWNvbmRzIGJlZm9yZSB3ZSBlbmFibGUgUkM2IGFnYWluLgo+IE5hdHVyYWxseSwgdGhpcyBj
YXVzZXMgdXMgdG8gY29uc3VtZSBjb25zaWRlcmFibHkgbW9yZSBlbmVyZ3kgdGhhbgo+IGJlZm9y
ZSBhcyBwb3dlcnNhdmluZyBpcyBlZmZlY3RpdmVseSBkaXNhYmxlZCB3aGlsZSBhIGRpc3BsYXkg
c2VydmVyCj4gKGhlcmUncyBsb29raW5nIGF0IHlvdSBYb3JnKSBpcyBydW5uaW5nLgo+IAo+IEFz
IGV4ZWNsaXN0cyB3aWxsIGdldCBhIGNvbXBsZXRpb24gZXZlbnQgYXMgdGhlIGxhc3QgY29udGV4
dCBpcwo+IGNvbXBsZXRlZCBhbmQgdGhlIEdQVSBnb2VzIGlkbGUsIHdlIGNhbiB1c2Ugb3VyIHN1
Ym1pc3Npb24gdGFza2xldCB0bwo+IG5vdGljZSB3aGVuIHRoZSBHUFUgaXMgaWRsZSBhbmQga2lj
ayB0aGUgcmV0aXJlIHdvcmtlci4gVGh1cyBkdXJpbmcKPiBsaWdodCB3b3JrbG9hZHMsIHdlIHdp
bGwgZG8gbXVjaCBtb3JlIHdvcmsgdG8gaWRsZSB0aGUgR1BVIGZhc3Rlci4uLgo+IEhvcGVmdWxs
eSB3aXRoIGNvbW1lbnN1cmF0ZSBwb3dlciBzYXZpbmchCj4gCj4gUmVmZXJlbmNlczogaHR0cHM6
Ly9idWdzLmZyZWVkZXNrdG9wLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTEyMzE1Cj4gUmVmZXJlbmNl
czogN2UzNGY0ZTRhYWQzICgiZHJtL2k5MTUvZ2VuOCs6IEFkZCBSQzYgQ1RYIGNvcnJ1cHRpb24g
V0EiKQo+IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNv
LnVrPgo+IENjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgo+IC0t
LQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcmVxdWVzdHMuaCB8ICA5ICsr
KysrKysrLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgICAgICAgICB8
IDExICsrKysrKysrKysrCj4gICAyIGZpbGVzIGNoYW5nZWQsIDE5IGluc2VydGlvbnMoKyksIDEg
ZGVsZXRpb24oLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZ3RfcmVxdWVzdHMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3JlcXVl
c3RzLmgKPiBpbmRleCBmZGU1NDY0MjRjNjMuLjk0Yjg3NThhNDVkOSAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9yZXF1ZXN0cy5oCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcmVxdWVzdHMuaAo+IEBAIC03LDcgKzcsOSBAQAo+
ICAgI2lmbmRlZiBJTlRFTF9HVF9SRVFVRVNUU19ICj4gICAjZGVmaW5lIElOVEVMX0dUX1JFUVVF
U1RTX0gKPiAgIAo+IC1zdHJ1Y3QgaW50ZWxfZ3Q7Cj4gKyNpbmNsdWRlIDxsaW51eC93b3JrcXVl
dWUuaD4KPiArCj4gKyNpbmNsdWRlICJpbnRlbF9ndF90eXBlcy5oIgo+ICAgCj4gICBsb25nIGlu
dGVsX2d0X3JldGlyZV9yZXF1ZXN0c190aW1lb3V0KHN0cnVjdCBpbnRlbF9ndCAqZ3QsIGxvbmcg
dGltZW91dCk7Cj4gICBzdGF0aWMgaW5saW5lIHZvaWQgaW50ZWxfZ3RfcmV0aXJlX3JlcXVlc3Rz
KHN0cnVjdCBpbnRlbF9ndCAqZ3QpCj4gQEAgLTE1LDYgKzE3LDExIEBAIHN0YXRpYyBpbmxpbmUg
dm9pZCBpbnRlbF9ndF9yZXRpcmVfcmVxdWVzdHMoc3RydWN0IGludGVsX2d0ICpndCkKPiAgIAlp
bnRlbF9ndF9yZXRpcmVfcmVxdWVzdHNfdGltZW91dChndCwgMCk7Cj4gICB9Cj4gICAKPiArc3Rh
dGljIGlubGluZSB2b2lkIGludGVsX2d0X3NjaGVkdWxlX3JldGlyZV9yZXF1ZXN0cyhzdHJ1Y3Qg
aW50ZWxfZ3QgKmd0KQo+ICt7Cj4gKwltb2RfZGVsYXllZF93b3JrKHN5c3RlbV93cSwgJmd0LT5y
ZXF1ZXN0cy5yZXRpcmVfd29yaywgMCk7Cj4gK30KPiArCj4gICBpbnQgaW50ZWxfZ3Rfd2FpdF9m
b3JfaWRsZShzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCBsb25nIHRpbWVvdXQpOwo+ICAgCj4gICB2b2lk
IGludGVsX2d0X2luaXRfcmVxdWVzdHMoc3RydWN0IGludGVsX2d0ICpndCk7Cj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiBpbmRleCAzM2NlMjU4ZDQ4NGYuLjQ0ODVmZTNlNTA2NiAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCj4gQEAgLTE0Miw2ICsxNDIsNyBA
QAo+ICAgI2luY2x1ZGUgImludGVsX2VuZ2luZV9wbS5oIgo+ICAgI2luY2x1ZGUgImludGVsX2d0
LmgiCj4gICAjaW5jbHVkZSAiaW50ZWxfZ3RfcG0uaCIKPiArI2luY2x1ZGUgImludGVsX2d0X3Jl
cXVlc3RzLmgiCj4gICAjaW5jbHVkZSAiaW50ZWxfbHJjX3JlZy5oIgo+ICAgI2luY2x1ZGUgImlu
dGVsX21vY3MuaCIKPiAgICNpbmNsdWRlICJpbnRlbF9yZXNldC5oIgo+IEBAIC0yMjc4LDYgKzIy
NzksMTYgQEAgc3RhdGljIHZvaWQgZXhlY2xpc3RzX3N1Ym1pc3Npb25fdGFza2xldCh1bnNpZ25l
ZCBsb25nIGRhdGEpCj4gICAJCWlmICh0aW1lb3V0ICYmIHByZWVtcHRfdGltZW91dChlbmdpbmUp
KQo+ICAgCQkJcHJlZW1wdF9yZXNldChlbmdpbmUpOwo+ICAgCX0KPiArCj4gKwkvKgo+ICsJICog
SWYgdGhlIEdQVSBpcyBjdXJyZW50bHkgaWRsZSwgcmV0aXJlIHRoZSBvdXRzdGFuZGluZyBjb21w
bGV0ZWQKPiArCSAqIHJlcXVlc3RzLiBUaGlzIHdpbGwgYWxsb3cgdXMgdG8gZW50ZXIgc29mdC1y
YzYgYXMgc29vbiBhcyBwb3NzaWJsZSwKPiArCSAqIGFsYmVpdCBhdCB0aGUgY29zdCBvZiBydW5u
aW5nIHRoZSByZXRpcmUgd29ya2VyIG11Y2ggbW9yZSBmcmVxdWVudGx5Cj4gKwkgKiAob3ZlciB0
aGUgZW50aXJlIEdUIG5vdCBqdXN0IHRoaXMgZW5naW5lKSBhbmQgZW1pdHRpbmcgbW9yZSBpZGxl
Cj4gKwkgKiBiYXJyaWVycyAoaS5lLiBrZXJuZWwgY29udGV4dCBzd2l0Y2hlcykgd2hpY2ggbWF5
IHNvbWUgZXh0cmEgCgpNYXkgYWRkLCBvciBzb21ldGhpbmcgbGlrZSB0aGF0LgoKbGF0ZW5jeS4K
PiArCSAqLwo+ICsJaWYgKCFleGVjbGlzdHNfYWN0aXZlKCZlbmdpbmUtPmV4ZWNsaXN0cykpCj4g
KwkJaW50ZWxfZ3Rfc2NoZWR1bGVfcmV0aXJlX3JlcXVlc3RzKGVuZ2luZS0+Z3QpOwoKTG9va2lu
ZyBhdCAiZHJtL2k5MTUvZ2VuOCs6IEFkZCBSQzYgQ1RYIGNvcnJ1cHRpb24gV0EiIGl0IHNlZW1z
IGl0IApzaG91bGQgYmUgcG9zc2libGUgdG8gb25seSBkbyB0aGlzIGlmIHRoYSBSQzYgV0EgaXMg
YWN0aXZlLiBTbyB3aHkgbm90IApsaW1pdCB0aGUgaW1wYWN0PwoKUmVnYXJkcywKClR2cnRrbwoK
PiAgIH0KPiAgIAo+ICAgc3RhdGljIHZvaWQgX19leGVjbGlzdHNfa2ljayhzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2V4ZWNsaXN0cyAqZXhlY2xpc3RzKQo+IAoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vaW50ZWwtZ2Z4

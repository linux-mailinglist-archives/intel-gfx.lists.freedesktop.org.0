Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 55F30C8974
	for <lists+intel-gfx@lfdr.de>; Wed,  2 Oct 2019 15:18:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BA6266E0A1;
	Wed,  2 Oct 2019 13:18:13 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A1E626E0A1
 for <intel-gfx@lists.freedesktop.org>; Wed,  2 Oct 2019 13:18:12 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 02 Oct 2019 06:18:12 -0700
X-IronPort-AV: E=Sophos;i="5.64,574,1559545200"; d="scan'208";a="182042786"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga007-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 02 Oct 2019 06:18:10 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  2 Oct 2019 16:17:58 +0300
Message-Id: <20191002131800.21054-2-jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191002131800.21054-1-jani.nikula@intel.com>
References: <20191002131800.21054-1-jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH 2/4] drm/i915: split out i915_switcheroo.[ch]
 from i915_drv.c
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U3BsaXQgb3V0IGNvZGUgcmVsYXRlZCB0byB2Z2Egc3dpdGNoZXJvbyByZWdpc3Rlci91bnJlZ2lz
dGVyIGFuZCBzdGF0ZQpoYW5kbGluZyBmcm9tIGk5MTVfZHJ2LmMgaW50byBuZXcgaTkxNV9zd2l0
Y2hlcm9vLltjaF0gZmlsZXMuCgpJdCdzIGEgYml0IGRpZmZpY3VsdCB0byBkcmF3IHRoZSBsaW5l
IGhvdyBtdWNoIHRvIG1vdmUgdG8gdGhlIG5ldyBmaWxlCmZyb20gaTkxNV9kcnYuYywgYnV0IGl0
IHNlZW1lZCB0byBtZSBrZWVwaW5nIGk5MTVfc3VzcGVuZF9zd2l0Y2hlcm9vKCkKYW5kIGk5MTVf
cmVzdW1lX3N3aXRjaGVyb28oKSBpbiBwbGFjZSB3YXMgdGhlIGNsZWFuZXN0LgoKTm8gZnVuY3Rp
b25hbCBjaGFuZ2VzLgoKQ2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5p
bnRlbC5jb20+CkNjOiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KU2ln
bmVkLW9mZi1ieTogSmFuaSBOaWt1bGEgPGphbmkubmlrdWxhQGludGVsLmNvbT4KLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmMgICAgICAgIHwgNjMgKysrLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oICAgICAgICB8ICAzICsrCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3N3aXRjaGVyb28uYyB8IDY3ICsrKysrKysrKysrKysrKysrKysrKysr
KysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3N3aXRjaGVyb28uaCB8IDE0ICsrKysrKwog
NSBmaWxlcyBjaGFuZ2VkLCA5MiBpbnNlcnRpb25zKCspLCA1NiBkZWxldGlvbnMoLSkKIGNyZWF0
ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3N3aXRjaGVyb28uYwogY3Jl
YXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3dpdGNoZXJvby5oCgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9NYWtlZmlsZQppbmRleCBkMmI1M2I1YWRkODEuLjEzNmExYTUxYjZlMiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvTWFrZWZpbGUKQEAgLTQ2LDYgKzQ2LDcgQEAgaTkxNS15ICs9IGk5MTVfZHJ2Lm8gXAog
CSAgaTkxNV9wY2kubyBcCiAJICBpOTE1X3NjYXR0ZXJsaXN0Lm8gXAogCSAgaTkxNV9zdXNwZW5k
Lm8gXAorCSAgaTkxNV9zd2l0Y2hlcm9vLm8gXAogCSAgaTkxNV9zeXNmcy5vIFwKIAkgIGk5MTVf
dXRpbHMubyBcCiAJICBpbnRlbF9jc3IubyBcCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwppbmRleCAz
MzA2YzZiYjUxNWEuLjczNDlmZDhjOTc5NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCkBAIC03
Miw2ICs3Miw3IEBACiAjaW5jbHVkZSAiaTkxNV9wZXJmLmgiCiAjaW5jbHVkZSAiaTkxNV9xdWVy
eS5oIgogI2luY2x1ZGUgImk5MTVfc3VzcGVuZC5oIgorI2luY2x1ZGUgImk5MTVfc3dpdGNoZXJv
by5oIgogI2luY2x1ZGUgImk5MTVfc3lzZnMuaCIKICNpbmNsdWRlICJpOTE1X3RyYWNlLmgiCiAj
aW5jbHVkZSAiaTkxNV92Z3B1LmgiCkBAIC0yNjksNTYgKzI3MCw4IEBAIGludGVsX3RlYXJkb3du
X21jaGJhcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJCXJlbGVhc2VfcmVz
b3VyY2UoJmRldl9wcml2LT5tY2hfcmVzKTsKIH0KIAotc3RhdGljIGludCBpOTE1X3Jlc3VtZV9z
d2l0Y2hlcm9vKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKLXN0YXRpYyBpbnQgaTkx
NV9zdXNwZW5kX3N3aXRjaGVyb28oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCi0JCQkJ
ICAgcG1fbWVzc2FnZV90IHN0YXRlKTsKLQotc3RhdGljIHZvaWQgaTkxNV9zd2l0Y2hlcm9vX3Nl
dF9zdGF0ZShzdHJ1Y3QgcGNpX2RldiAqcGRldiwgZW51bSB2Z2Ffc3dpdGNoZXJvb19zdGF0ZSBz
dGF0ZSkKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHBkZXZfdG9faTkxNShw
ZGV2KTsKLQlwbV9tZXNzYWdlX3QgcG1tID0geyAuZXZlbnQgPSBQTV9FVkVOVF9TVVNQRU5EIH07
Ci0KLQlpZiAoIWk5MTUpIHsKLQkJZGV2X2VycigmcGRldi0+ZGV2LCAiRFJNIG5vdCBpbml0aWFs
aXplZCwgYWJvcnRpbmcgc3dpdGNoLlxuIik7Ci0JCXJldHVybjsKLQl9Ci0KLQlpZiAoc3RhdGUg
PT0gVkdBX1NXSVRDSEVST09fT04pIHsKLQkJcHJfaW5mbygic3dpdGNoZWQgb25cbiIpOwotCQlp
OTE1LT5kcm0uc3dpdGNoX3Bvd2VyX3N0YXRlID0gRFJNX1NXSVRDSF9QT1dFUl9DSEFOR0lORzsK
LQkJLyogaTkxNSByZXN1bWUgaGFuZGxlciBkb2Vzbid0IHNldCB0byBEMCAqLwotCQlwY2lfc2V0
X3Bvd2VyX3N0YXRlKHBkZXYsIFBDSV9EMCk7Ci0JCWk5MTVfcmVzdW1lX3N3aXRjaGVyb28oaTkx
NSk7Ci0JCWk5MTUtPmRybS5zd2l0Y2hfcG93ZXJfc3RhdGUgPSBEUk1fU1dJVENIX1BPV0VSX09O
OwotCX0gZWxzZSB7Ci0JCXByX2luZm8oInN3aXRjaGVkIG9mZlxuIik7Ci0JCWk5MTUtPmRybS5z
d2l0Y2hfcG93ZXJfc3RhdGUgPSBEUk1fU1dJVENIX1BPV0VSX0NIQU5HSU5HOwotCQlpOTE1X3N1
c3BlbmRfc3dpdGNoZXJvbyhpOTE1LCBwbW0pOwotCQlpOTE1LT5kcm0uc3dpdGNoX3Bvd2VyX3N0
YXRlID0gRFJNX1NXSVRDSF9QT1dFUl9PRkY7Ci0JfQotfQotCi1zdGF0aWMgYm9vbCBpOTE1X3N3
aXRjaGVyb29fY2FuX3N3aXRjaChzdHJ1Y3QgcGNpX2RldiAqcGRldikKLXsKLQlzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHBkZXZfdG9faTkxNShwZGV2KTsKLQotCS8qCi0JICogRklY
TUU6IG9wZW5fY291bnQgaXMgcHJvdGVjdGVkIGJ5IGRybV9nbG9iYWxfbXV0ZXggYnV0IHRoYXQg
d291bGQgbGVhZCB0bwotCSAqIGxvY2tpbmcgaW52ZXJzaW9uIHdpdGggdGhlIGRyaXZlciBsb2Fk
IHBhdGguIEFuZCB0aGUgYWNjZXNzIGhlcmUgaXMKLQkgKiBjb21wbGV0ZWx5IHJhY3kgYW55d2F5
LiBTbyBkb24ndCBib3RoZXIgd2l0aCBsb2NraW5nIGZvciBub3cuCi0JICovCi0JcmV0dXJuIGk5
MTUgJiYgaTkxNS0+ZHJtLm9wZW5fY291bnQgPT0gMDsKLX0KLQotc3RhdGljIGNvbnN0IHN0cnVj
dCB2Z2Ffc3dpdGNoZXJvb19jbGllbnRfb3BzIGk5MTVfc3dpdGNoZXJvb19vcHMgPSB7Ci0JLnNl
dF9ncHVfc3RhdGUgPSBpOTE1X3N3aXRjaGVyb29fc2V0X3N0YXRlLAotCS5yZXByb2JlID0gTlVM
TCwKLQkuY2FuX3N3aXRjaCA9IGk5MTVfc3dpdGNoZXJvb19jYW5fc3dpdGNoLAotfTsKLQogc3Rh
dGljIGludCBpOTE1X2RyaXZlcl9tb2Rlc2V0X3Byb2JlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1KQogewotCXN0cnVjdCBwY2lfZGV2ICpwZGV2ID0gaTkxNS0+ZHJtLnBkZXY7CiAJaW50
IHJldDsKIAogCWlmIChpOTE1X2luamVjdF9wcm9iZV9mYWlsdXJlKGk5MTUpKQpAQCAtMzM5LDcg
KzI5Miw3IEBAIHN0YXRpYyBpbnQgaTkxNV9kcml2ZXJfbW9kZXNldF9wcm9iZShzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAogCWludGVsX3JlZ2lzdGVyX2RzbV9oYW5kbGVyKCk7CiAK
LQlyZXQgPSB2Z2Ffc3dpdGNoZXJvb19yZWdpc3Rlcl9jbGllbnQocGRldiwgJmk5MTVfc3dpdGNo
ZXJvb19vcHMsIGZhbHNlKTsKKwlyZXQgPSBpOTE1X3N3aXRjaGVyb29fcmVnaXN0ZXIoaTkxNSk7
CiAJaWYgKHJldCkKIAkJZ290byBjbGVhbnVwX3ZnYV9jbGllbnQ7CiAKQEAgLTM5NCw3ICszNDcs
NyBAQCBzdGF0aWMgaW50IGk5MTVfZHJpdmVyX21vZGVzZXRfcHJvYmUoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUpCiBjbGVhbnVwX2NzcjoKIAlpbnRlbF9jc3JfdWNvZGVfZmluaShpOTE1
KTsKIAlpbnRlbF9wb3dlcl9kb21haW5zX2RyaXZlcl9yZW1vdmUoaTkxNSk7Ci0JdmdhX3N3aXRj
aGVyb29fdW5yZWdpc3Rlcl9jbGllbnQocGRldik7CisJaTkxNV9zd2l0Y2hlcm9vX3VucmVnaXN0
ZXIoaTkxNSk7CiBjbGVhbnVwX3ZnYV9jbGllbnQ6CiAJaW50ZWxfdmdhX3VucmVnaXN0ZXIoaTkx
NSk7CiBvdXQ6CkBAIC00MDMsMTMgKzM1NiwxMiBAQCBzdGF0aWMgaW50IGk5MTVfZHJpdmVyX21v
ZGVzZXRfcHJvYmUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAKIHN0YXRpYyB2b2lk
IGk5MTVfZHJpdmVyX21vZGVzZXRfcmVtb3ZlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
KQogewotCXN0cnVjdCBwY2lfZGV2ICpwZGV2ID0gaTkxNS0+ZHJtLnBkZXY7Ci0KIAlpbnRlbF9t
b2Rlc2V0X2RyaXZlcl9yZW1vdmUoaTkxNSk7CiAKIAlpbnRlbF9iaW9zX2RyaXZlcl9yZW1vdmUo
aTkxNSk7CiAKLQl2Z2Ffc3dpdGNoZXJvb191bnJlZ2lzdGVyX2NsaWVudChwZGV2KTsKKwlpOTE1
X3N3aXRjaGVyb29fdW5yZWdpc3RlcihpOTE1KTsKKwogCWludGVsX3ZnYV91bnJlZ2lzdGVyKGk5
MTUpOwogCiAJaW50ZWxfY3NyX3Vjb2RlX2ZpbmkoaTkxNSk7CkBAIC0xODI1LDggKzE3NzcsNyBA
QCBzdGF0aWMgaW50IGk5MTVfZHJtX3N1c3BlbmRfbGF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LCBib29sIGhpYmVybmF0aW9uKQogCXJldHVybiByZXQ7CiB9CiAKLXN0YXRpYyBpbnQKLWk5MTVf
c3VzcGVuZF9zd2l0Y2hlcm9vKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBwbV9tZXNz
YWdlX3Qgc3RhdGUpCitpbnQgaTkxNV9zdXNwZW5kX3N3aXRjaGVyb28oc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUsIHBtX21lc3NhZ2VfdCBzdGF0ZSkKIHsKIAlpbnQgZXJyb3I7CiAKQEAg
LTE5OTQsNyArMTk0NSw3IEBAIHN0YXRpYyBpbnQgaTkxNV9kcm1fcmVzdW1lX2Vhcmx5KHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYpCiAJcmV0dXJuIHJldDsKIH0KIAotc3RhdGljIGludCBpOTE1X3Jl
c3VtZV9zd2l0Y2hlcm9vKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQoraW50IGk5MTVf
cmVzdW1lX3N3aXRjaGVyb28oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB7CiAJaW50
IHJldDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5kZXggMzM3ZDgzMDY0MTZhLi4wY2E0ZDkw
ZGZhNDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaApAQCAtMjIyMyw2ICsyMjIzLDkgQEAgZXh0
ZXJuIGNvbnN0IHN0cnVjdCBkZXZfcG1fb3BzIGk5MTVfcG1fb3BzOwogaW50IGk5MTVfZHJpdmVy
X3Byb2JlKHN0cnVjdCBwY2lfZGV2ICpwZGV2LCBjb25zdCBzdHJ1Y3QgcGNpX2RldmljZV9pZCAq
ZW50KTsKIHZvaWQgaTkxNV9kcml2ZXJfcmVtb3ZlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpp
OTE1KTsKIAoraW50IGk5MTVfcmVzdW1lX3N3aXRjaGVyb28oc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUpOworaW50IGk5MTVfc3VzcGVuZF9zd2l0Y2hlcm9vKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1LCBwbV9tZXNzYWdlX3Qgc3RhdGUpOworCiB2b2lkIGludGVsX2VuZ2luZV9p
bml0X2hhbmdjaGVjayhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwogaW50IHZsdl9m
b3JjZV9nZnhfY2xvY2soc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBib29sIG9u
KTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zd2l0Y2hlcm9vLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3N3aXRjaGVyb28uYwpuZXcgZmlsZSBtb2RlIDEw
MDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjM5Yzc5ZTFjNWI1MgotLS0gL2Rldi9udWxsCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3dpdGNoZXJvby5jCkBAIC0wLDAgKzEsNjcgQEAK
Ky8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKKy8qCisgKiBDb3B5cmlnaHQgwqkgMjAx
OSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpbmNsdWRlIDxsaW51eC92Z2Ffc3dpdGNoZXJv
by5oPgorCisjaW5jbHVkZSAiaTkxNV9kcnYuaCIKKyNpbmNsdWRlICJpOTE1X3N3aXRjaGVyb28u
aCIKKworc3RhdGljIHZvaWQgaTkxNV9zd2l0Y2hlcm9vX3NldF9zdGF0ZShzdHJ1Y3QgcGNpX2Rl
diAqcGRldiwKKwkJCQkgICAgICBlbnVtIHZnYV9zd2l0Y2hlcm9vX3N0YXRlIHN0YXRlKQorewor
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gcGRldl90b19pOTE1KHBkZXYpOworCXBt
X21lc3NhZ2VfdCBwbW0gPSB7IC5ldmVudCA9IFBNX0VWRU5UX1NVU1BFTkQgfTsKKworCWlmICgh
aTkxNSkgeworCQlkZXZfZXJyKCZwZGV2LT5kZXYsICJEUk0gbm90IGluaXRpYWxpemVkLCBhYm9y
dGluZyBzd2l0Y2guXG4iKTsKKwkJcmV0dXJuOworCX0KKworCWlmIChzdGF0ZSA9PSBWR0FfU1dJ
VENIRVJPT19PTikgeworCQlwcl9pbmZvKCJzd2l0Y2hlZCBvblxuIik7CisJCWk5MTUtPmRybS5z
d2l0Y2hfcG93ZXJfc3RhdGUgPSBEUk1fU1dJVENIX1BPV0VSX0NIQU5HSU5HOworCQkvKiBpOTE1
IHJlc3VtZSBoYW5kbGVyIGRvZXNuJ3Qgc2V0IHRvIEQwICovCisJCXBjaV9zZXRfcG93ZXJfc3Rh
dGUocGRldiwgUENJX0QwKTsKKwkJaTkxNV9yZXN1bWVfc3dpdGNoZXJvbyhpOTE1KTsKKwkJaTkx
NS0+ZHJtLnN3aXRjaF9wb3dlcl9zdGF0ZSA9IERSTV9TV0lUQ0hfUE9XRVJfT047CisJfSBlbHNl
IHsKKwkJcHJfaW5mbygic3dpdGNoZWQgb2ZmXG4iKTsKKwkJaTkxNS0+ZHJtLnN3aXRjaF9wb3dl
cl9zdGF0ZSA9IERSTV9TV0lUQ0hfUE9XRVJfQ0hBTkdJTkc7CisJCWk5MTVfc3VzcGVuZF9zd2l0
Y2hlcm9vKGk5MTUsIHBtbSk7CisJCWk5MTUtPmRybS5zd2l0Y2hfcG93ZXJfc3RhdGUgPSBEUk1f
U1dJVENIX1BPV0VSX09GRjsKKwl9Cit9CisKK3N0YXRpYyBib29sIGk5MTVfc3dpdGNoZXJvb19j
YW5fc3dpdGNoKHN0cnVjdCBwY2lfZGV2ICpwZGV2KQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1ID0gcGRldl90b19pOTE1KHBkZXYpOworCisJLyoKKwkgKiBGSVhNRTogb3Blbl9j
b3VudCBpcyBwcm90ZWN0ZWQgYnkgZHJtX2dsb2JhbF9tdXRleCBidXQgdGhhdCB3b3VsZCBsZWFk
IHRvCisJICogbG9ja2luZyBpbnZlcnNpb24gd2l0aCB0aGUgZHJpdmVyIGxvYWQgcGF0aC4gQW5k
IHRoZSBhY2Nlc3MgaGVyZSBpcworCSAqIGNvbXBsZXRlbHkgcmFjeSBhbnl3YXkuIFNvIGRvbid0
IGJvdGhlciB3aXRoIGxvY2tpbmcgZm9yIG5vdy4KKwkgKi8KKwlyZXR1cm4gaTkxNSAmJiBpOTE1
LT5kcm0ub3Blbl9jb3VudCA9PSAwOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IHZnYV9zd2l0
Y2hlcm9vX2NsaWVudF9vcHMgaTkxNV9zd2l0Y2hlcm9vX29wcyA9IHsKKwkuc2V0X2dwdV9zdGF0
ZSA9IGk5MTVfc3dpdGNoZXJvb19zZXRfc3RhdGUsCisJLnJlcHJvYmUgPSBOVUxMLAorCS5jYW5f
c3dpdGNoID0gaTkxNV9zd2l0Y2hlcm9vX2Nhbl9zd2l0Y2gsCit9OworCitpbnQgaTkxNV9zd2l0
Y2hlcm9vX3JlZ2lzdGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQoreworCXN0cnVj
dCBwY2lfZGV2ICpwZGV2ID0gaTkxNS0+ZHJtLnBkZXY7CisKKwlyZXR1cm4gdmdhX3N3aXRjaGVy
b29fcmVnaXN0ZXJfY2xpZW50KHBkZXYsICZpOTE1X3N3aXRjaGVyb29fb3BzLCBmYWxzZSk7Cit9
CisKK3ZvaWQgaTkxNV9zd2l0Y2hlcm9vX3VucmVnaXN0ZXIoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmk5MTUpCit7CisJc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBpOTE1LT5kcm0ucGRldjsKKwor
CXZnYV9zd2l0Y2hlcm9vX3VucmVnaXN0ZXJfY2xpZW50KHBkZXYpOworfQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zd2l0Y2hlcm9vLmggYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X3N3aXRjaGVyb28uaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAw
MDAwMDAuLjU5YjZjMWUwN2Q3NQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfc3dpdGNoZXJvby5oCkBAIC0wLDAgKzEsMTQgQEAKKy8qIFNQRFgtTGljZW5zZS1J
ZGVudGlmaWVyOiBNSVQgKi8KKy8qCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3Jh
dGlvbgorICovCisKKyNpZm5kZWYgX19JOTE1X1NXSVRDSEVST09fXworI2RlZmluZSBfX0k5MTVf
U1dJVENIRVJPT19fCisKK3N0cnVjdCBkcm1faTkxNV9wcml2YXRlOworCitpbnQgaTkxNV9zd2l0
Y2hlcm9vX3JlZ2lzdGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKK3ZvaWQgaTkx
NV9zd2l0Y2hlcm9vX3VucmVnaXN0ZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwor
CisjZW5kaWYgLyogX19JOTE1X1NXSVRDSEVST09fXyAqLwotLSAKMi4yMC4xCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBs
aXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

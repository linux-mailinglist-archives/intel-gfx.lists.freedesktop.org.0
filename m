Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B6DAE1A5E1
	for <lists+intel-gfx@lfdr.de>; Sat, 11 May 2019 02:42:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5601C6E79D;
	Sat, 11 May 2019 00:42:10 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D762B6E79D
 for <intel-gfx@lists.freedesktop.org>; Sat, 11 May 2019 00:42:09 +0000 (UTC)
X-Amp-Result: UNSCANNABLE
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 May 2019 17:42:09 -0700
X-ExtLoop1: 1
Received: from mdroper-desk.fm.intel.com (HELO
 mdroper-desk.amr.corp.intel.com) ([10.105.128.126])
 by fmsmga005.fm.intel.com with ESMTP; 10 May 2019 17:42:09 -0700
Date: Fri, 10 May 2019 17:42:09 -0700
From: Matt Roper <matthew.d.roper@intel.com>
To: Ville Syrjala <ville.syrjala@linux.intel.com>
Message-ID: <20190511004209.GL13184@mdroper-desk.amr.corp.intel.com>
References: <20190503190831.1759-1-ville.syrjala@linux.intel.com>
 <20190503190831.1759-2-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190503190831.1759-2-ville.syrjala@linux.intel.com>
User-Agent: Mutt/1.9.2 (2017-12-15)
Subject: Re: [Intel-gfx] [PATCH v3 2/2] drm/i915: Make sure we have enough
 memory bandwidth on ICL
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCBNYXkgMDMsIDIwMTkgYXQgMTA6MDg6MzFQTSArMDMwMCwgVmlsbGUgU3lyamFsYSB3
cm90ZToKPiBGcm9tOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwu
Y29tPgo+IAo+IElDTCBoYXMgc28gbWFueSBwbGFuZXMgdGhhdCBpdCBjYW4gZWFzaWx5IGV4Y2Vl
ZCB0aGUgbWF4aW11bQo+IGVmZmVjdGl2ZSBtZW1vcnkgYmFuZHdpZHRoIG9mIHRoZSBzeXN0ZW0u
IFdlIG11c3QgdGhlcmVmb3JlIGNoZWNrCj4gdGhhdCB3ZSBkb24ndCBleGNlZWQgdGhhdCBsaW1p
dC4KPiAKPiBUaGUgYWxnb3JpdGhtIGlzIHZlcnkgbWFnaWMgbnVtYmVyIGhlYXZ5IGFuZCBsYWNr
cyBzdWZmaWNpZW50Cj4gZXhwbGFuYXRpb24gZm9yIG5vdy4gV2UgYWxzbyBoYXZlIG5vIHNhbmUg
d2F5IHRvIHF1ZXJ5IHRoZQo+IG1lbW9yeSBjbG9jayBhbmQgdGltaW5ncywgc28gd2UgbXVzdCBy
ZWx5IG9uIGEgY29tYmluYXRpb24gb2YKPiByYXcgcmVhZG91dCBmcm9tIHRoZSBtZW1vcnkgY29u
dHJvbGxlciBhbmQgaGFyZGNvZGVkIGFzc3VtcHRpb25zLgo+IFRoZSBtZW1vcnkgY29udHJvbGxl
ciB2YWx1ZXMgb2J2aW91c2x5IGNoYW5nZSBhcyB0aGUgc3lzdGVtCj4ganVtcHMgYmV0d2VlbiB0
aGUgZGlmZmVyZW50IFNBR1YgcG9pbnRzLCBzbyB3ZSB0cnkgdG8gc3RhYmlsaXplCj4gaXQgZmly
c3QgYnkgZGlzYWJsaW5nIFNBR1YgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgcmVhZG91dC4KPiAK
PiBUaGUgdXRpbGl6ZWQgYmFuZHdpZHRoIGlzIHRyYWNrZWQgdmlhIGEgZGV2aWNlIHdpZGUgYXRv
bWljCj4gcHJpdmF0ZSBvYmplY3QuIFRoYXQgaXMgYWN0dWFsbHkgbm90IHJvYnVzdCBiZWNhdXNl
IHdlIGNhbid0Cj4gYWZmb3JkIHRvIGVuZm9yY2Ugc3RyaWN0IGdsb2JhbCBvcmRlcmluZyBiZXR3
ZWVuIHRoZSBwaXBlcy4KPiBUaHVzIEkgdGhpbmsgSSdsbCBuZWVkIHRvIGNoYW5nZSB0aGlzIHRv
IHNpbXBseSBjaG9wIHVwIHRoZQo+IGF2YWlsYWJsZSBiYW5kd2lkdGggYmV0d2VlbiBhbGwgdGhl
IGFjdGl2ZSBwaXBlcy4gRWFjaCBwaXBlCj4gY2FuIHRoZW4gZG8gd2hhdGV2ZXIgaXQgd2FudHMg
YXMgbG9uZyBhcyBpdCBkb2Vzbid0IGV4Y2VlZAo+IGl0cyBidWRnZXQuIFRoYXQgc2NoZW1lIHdp
bGwgYWxzbyByZXF1aXJlIHRoYXQgd2UgYXNzdW1lIHRoYXQKPiBhbnkgbnVtYmVyIG9mIHBsYW5l
cyBjb3VsZCBiZSBhY3RpdmUgYXQgYW55IHRpbWUuCj4gCj4gVE9ETzogbWFrZSBpdCByb2J1c3Qg
YW5kIGRlYWwgd2l0aCBhbGwgdGhlIG9wZW4gcXVlc3Rpb25zCj4gCj4gdjI6IFNsZWVwIGxvbmdl
ciBhZnRlciBkaXNhYmxpbmcgU0FHVgo+IHYzOiBQb2xsIGZvciB0aGUgZGNsayB0byBnZXQgcmFp
c2VkIChzZWVuIGl0IHRha2UgMjUwbXMhKQo+ICAgICBJZiB0aGUgc3lzdGVtIGhhcyAyMTMzTVQv
cyBtZW1vcnkgdGhlbiB3ZSBwb2ludGxlc3NseQo+ICAgICB3YWl0IG9uZSBmdWxsIHNlY29uZCA6
KAo+IHY0OiBVc2UgdGhlIG5ldyBwY29kZSBpbnRlcmZhY2UgdG8gZ2V0IHRoZSBxZ3YgcG9pbnRz
IHJhdGhlcgo+ICAgICB0aGF0IHVzaW5nIGhhcmRjb2RlZCBudW1iZXJzCj4gCj4gU2lnbmVkLW9m
Zi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KPiAt
LS0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgICAgICAgICAgICAgfCAgIDEgKwo+
ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jICAgICAgICAgICB8IDIyOSArKysrKysr
KysrKysrKysrKysrKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAg
ICAgIHwgIDEwICsKPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCAgICAgICAgICAg
fCAgIDMgKwo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9hdG9taWNfcGxhbmUuYyB8ICAy
MCArKwo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9hdG9taWNfcGxhbmUuaCB8ICAgMiAr
Cj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2J3LmMgICAgICAgICAgIHwgMTgxICsrKysr
KysrKysrKysrKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2J3LmggICAgICAgICAg
IHwgIDQ2ICsrKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rpc3BsYXkuYyAgICAg
IHwgIDQwICsrKy0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJ2LmggICAgICAgICAg
fCAgIDIgKwo+ICAxMCBmaWxlcyBjaGFuZ2VkLCA1MzMgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlv
bigtKQo+ICBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYncu
Ywo+ICBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYncuaAo+
IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L01ha2VmaWxlCj4gaW5kZXggNjgxMDZmZTM1YTA0Li4xMzlhMGZjMTkzOTAg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQo+IEBAIC0xMzgsNiArMTM4LDcgQEAgaTkxNS15ICs9
IGludGVsX2F1ZGlvLm8gXAo+ICAJICBpbnRlbF9hdG9taWMubyBcCj4gIAkgIGludGVsX2F0b21p
Y19wbGFuZS5vIFwKPiAgCSAgaW50ZWxfYmlvcy5vIFwKPiArCSAgaW50ZWxfYncubyBcCj4gIAkg
IGludGVsX2NkY2xrLm8gXAo+ICAJICBpbnRlbF9jb2xvci5vIFwKPiAgCSAgaW50ZWxfY29tYm9f
cGh5Lm8gXAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwo+IGluZGV4IDVlZDg2NDc1MmM3Yi4uYjdm
YTdiNTFjMmUyIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMK
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCj4gQEAgLTcwLDYgKzcwLDcg
QEAKPiAgI2luY2x1ZGUgImludGVsX292ZXJsYXkuaCIKPiAgI2luY2x1ZGUgImludGVsX3BpcGVf
Y3JjLmgiCj4gICNpbmNsdWRlICJpbnRlbF9wbS5oIgo+ICsjaW5jbHVkZSAiaW50ZWxfc2lkZWJh
bmQuaCIKPiAgI2luY2x1ZGUgImludGVsX3Nwcml0ZS5oIgo+ICAjaW5jbHVkZSAiaW50ZWxfdWMu
aCIKPiAgCj4gQEAgLTE0MzUsNiArMTQzNiwyMzIgQEAgYnh0X2dldF9kcmFtX2luZm8oc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+ICAJcmV0dXJuIDA7Cj4gIH0KPiAgCj4gK3N0
cnVjdCBpbnRlbF9xZ3ZfcG9pbnQgewo+ICsJdTE2IGRjbGssIHRfcnAsIHRfcmRwcmUsIHRfcmMs
IHRfcmFzLCB0X3JjZDsKPiArfTsKPiArCj4gK3N0cnVjdCBpbnRlbF9zYWd2X2luZm8gewo+ICsJ
c3RydWN0IGludGVsX3Fndl9wb2ludCBwb2ludHNbM107Cj4gKwl1OCBudW1fcG9pbnRzOwo+ICsJ
dTggbnVtX2NoYW5uZWxzOwo+ICsJdTggdF9ibDsKPiArCWVudW0gaW50ZWxfZHJhbV90eXBlIGRy
YW1fdHlwZTsKPiArfTsKPiArCj4gK3N0YXRpYyBpbnQgaWNsX3Bjb2RlX3JlYWRfbWVtX2dsb2Jh
bF9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiArCQkJCQkgIHN0cnVj
dCBpbnRlbF9zYWd2X2luZm8gKnNpKQo+ICt7Cj4gKwl1MzIgdmFsID0gMDsKPiArCWludCByZXQ7
Cj4gKwo+ICsJcmV0ID0gc2FuZHlicmlkZ2VfcGNvZGVfcmVhZChkZXZfcHJpdiwKPiArCQkJCSAg
ICAgSUNMX1BDT0RFX01FTV9TVUJTWVNZU1RFTV9JTkZPIHwKPiArCQkJCSAgICAgSUNMX1BDT0RF
X01FTV9TU19SRUFEX0dMT0JBTF9JTkZPLAo+ICsJCQkJICAgICAmdmFsLCBOVUxMKTsKPiArCWlm
IChyZXQpCj4gKwkJcmV0dXJuIHJldDsKPiArCj4gKwlzd2l0Y2ggKHZhbCAmIDB4Zikgewo+ICsJ
Y2FzZSAwOgo+ICsJCXNpLT5kcmFtX3R5cGUgPSBJTlRFTF9EUkFNX0REUjQ7Cj4gKwkJYnJlYWs7
Cj4gKwljYXNlIDE6Cj4gKwkJc2ktPmRyYW1fdHlwZSA9IElOVEVMX0RSQU1fRERSMzsKPiArCQli
cmVhazsKPiArCWNhc2UgMjoKPiArCQlzaS0+ZHJhbV90eXBlID0gSU5URUxfRFJBTV9MUEREUjM7
Cj4gKwkJYnJlYWs7Cj4gKwljYXNlIDM6Cj4gKwkJc2ktPmRyYW1fdHlwZSA9IElOVEVMX0RSQU1f
TFBERFIzOwo+ICsJCWJyZWFrOwo+ICsJZGVmYXVsdDoKPiArCQlNSVNTSU5HX0NBU0UodmFsICYg
MHhmKTsKPiArCQlicmVhazsKPiArCX0KPiArCj4gKwlzaS0+bnVtX2NoYW5uZWxzID0gKHZhbCAm
IDB4ZjApID4+IDQ7Cj4gKwlzaS0+bnVtX3BvaW50cyA9ICh2YWwgJiAweGYwMCkgPj4gODsKPiAr
Cj4gKwlzaS0+dF9ibCA9IHNpLT5kcmFtX3R5cGUgPT0gSU5URUxfRFJBTV9ERFI0ID8gNCA6IDg7
Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgaWNsX3Bjb2RlX3JlYWRf
cWd2X3BvaW50X2luZm8oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAo+ICsJCQkJ
CSBzdHJ1Y3QgaW50ZWxfcWd2X3BvaW50ICpzcCwKPiArCQkJCQkgaW50IHBvaW50KQo+ICt7Cj4g
Kwl1MzIgdmFsID0gMCwgdmFsMjsKPiArCWludCByZXQ7Cj4gKwo+ICsJcmV0ID0gc2FuZHlicmlk
Z2VfcGNvZGVfcmVhZChkZXZfcHJpdiwKPiArCQkJCSAgICAgSUNMX1BDT0RFX01FTV9TVUJTWVNZ
U1RFTV9JTkZPIHwKPiArCQkJCSAgICAgSUNMX1BDT0RFX01FTV9TU19SRUFEX1FHVl9QT0lOVF9J
TkZPKHBvaW50KSwKPiArCQkJCSAgICAgJnZhbCwgJnZhbDIpOwo+ICsJaWYgKHJldCkKPiArCQly
ZXR1cm4gcmV0Owo+ICsKPiArCXNwLT5kY2xrID0gdmFsICYgMHhmZmZmOwo+ICsJc3AtPnRfcnAg
PSAodmFsICYgMHhmZjAwMDApID4+IDE2Owo+ICsJc3AtPnRfcmNkID0gKHZhbCAmIDB4ZmYwMDAw
MDApID4+IDI0Owo+ICsKPiArCXNwLT50X3JkcHJlID0gdmFsMiAmIDB4ZmY7Cj4gKwlzcC0+dF9y
YXMgPSAodmFsMiAmIDB4ZmYwMCkgPj4gODsKPiArCj4gKwlzcC0+dF9yYyA9IHNwLT50X3JwICsg
c3AtPnRfcmFzOwo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IGljbF9n
ZXRfcWd2X3BvaW50cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gKwkJCSAg
ICAgIHN0cnVjdCBpbnRlbF9zYWd2X2luZm8gKnNpKQo+ICt7Cj4gKwlpbnQgaSwgcmV0Owo+ICsK
PiArCXJldCA9IGljbF9wY29kZV9yZWFkX21lbV9nbG9iYWxfaW5mbyhkZXZfcHJpdiwgc2kpOwo+
ICsJaWYgKHJldCkKPiArCQlyZXR1cm4gcmV0Owo+ICsKPiArCWlmIChXQVJOX09OKHNpLT5udW1f
cG9pbnRzID4gQVJSQVlfU0laRShzaS0+cG9pbnRzKSkpCj4gKwkJc2ktPm51bV9wb2ludHMgPSBB
UlJBWV9TSVpFKHNpLT5wb2ludHMpOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBzaS0+bnVtX3Bv
aW50czsgaSsrKSB7Cj4gKwkJc3RydWN0IGludGVsX3Fndl9wb2ludCAqc3AgPSAmc2ktPnBvaW50
c1tpXTsKPiArCj4gKwkJcmV0ID0gaWNsX3Bjb2RlX3JlYWRfcWd2X3BvaW50X2luZm8oZGV2X3By
aXYsIHNwLCBpKTsKPiArCQlpZiAocmV0KQo+ICsJCQlyZXR1cm4gcmV0Owo+ICsKPiArCQlEUk1f
REVCVUdfS01TKCJRR1YgJWQ6IERDTEs9JWQgdFJQPSVkIHRSRFBSRT0lZCB0UkFTPSVkIHRSQ0Q9
JWQgdFJDPSVkXG4iLAo+ICsJCQkgICAgICBpLCBzcC0+ZGNsaywgc3AtPnRfcnAsIHNwLT50X3Jk
cHJlLCBzcC0+dF9yYXMsCj4gKwkJCSAgICAgIHNwLT50X3JjZCwgc3AtPnRfcmMpOwo+ICsJfQo+
ICsKPiArCXJldHVybiAwOwo+ICt9CgpJdCBtaWdodCBtYWtlIHNlbnNlIHRvIHNlcGFyYXRlIHRo
ZSBwY29kZSByZWFkb3V0IHN0dWZmIGludG8gYSBwYXRjaCBvZgppdHMgb3duLiAgQXNpZGUgZnJv
bSB0aGUgc2ktPnRfYmwgYXNzaWdubWVudCwgdGhlIGZ1bmN0aW9ucyBhYm92ZSBhcmUKc3RyYWln
aHRmb3J3YXJkIGRldGFpbHMgZnJvbSB0aGUgcGNvZGUgSEFTLiAgSWYgd2Ugd2luZCB1cCBuZWVk
aW5nIHRvCmRyb3AgdGhlIGNvbXBsaWNhdGVkIGFsZ29yaXRobSBiZWxvdyBhbmQgcmVwbGFjZSBp
dCB3aXRoIGEgZGlmZmVyZW50Cm9uZSwgdGhlIHBjb2RlIHJlYWRvdXQgcGFydCB3b24ndCBuZWVk
IHRvIGNoYW5nZS4KCj4gKwo+ICtzdGF0aWMgaW50IGljbF9jYWxjX2J3KGludCBkY2xrLCBpbnQg
bnVtLCBpbnQgZGVuKQo+ICt7Cj4gKwkvKiBtdWx0aXBsZXMgb2YgMTYuNjY2TUh6ICgxMDAvNikg
Ki8KPiArCXJldHVybiBESVZfUk9VTkRfQ0xPU0VTVChudW0gKiBkY2xrICogMTAwLCBkZW4gKiA2
KTsKPiArfQo+ICsKPiArc3RhdGljIGludCBpY2xfc2Fndl9tYXhfZGNsayhjb25zdCBzdHJ1Y3Qg
aW50ZWxfc2Fndl9pbmZvICpzaSkKPiArewo+ICsJdTE2IGRjbGsgPSAwOwo+ICsJaW50IGk7Cj4g
Kwo+ICsJZm9yIChpID0gMDsgaSA8IHNpLT5udW1fcG9pbnRzOyBpKyspCj4gKwkJZGNsayA9IG1h
eChkY2xrLCBzaS0+cG9pbnRzW2ldLmRjbGspOwo+ICsKPiArCXJldHVybiBkY2xrOwo+ICt9Cj4g
Kwo+ICtzdHJ1Y3QgaW50ZWxfc2FfaW5mbyB7Cj4gKwl1OCBkZWJ1cnN0LCBtcGFnZXNpemUsIGRl
cHJvZ2J3bGltaXQsIGRpc3BsYXlydGlkczsKPiArfTsKPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1
Y3QgaW50ZWxfc2FfaW5mbyBpY2xfc2FfaW5mbyA9IHsKPiArCS5kZWJ1cnN0ID0gOCwKPiArCS5t
cGFnZXNpemUgPSAxNiwKPiArCS5kZXByb2did2xpbWl0ID0gMjUsIC8qIEdCL3MgKi8KPiArCS5k
aXNwbGF5cnRpZHMgPSAxMjgsCj4gK307Cj4gKwo+ICtzdGF0aWMgaW50IGljbF9nZXRfYndfaW5m
byhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCj4gK3sKPiArCXN0cnVjdCBpbnRl
bF9zYWd2X2luZm8gc2kgPSB7fTsKPiArCWNvbnN0IHN0cnVjdCBpbnRlbF9zYV9pbmZvICpzYSA9
ICZpY2xfc2FfaW5mbzsKPiArCWJvb2wgaXNfeV90aWxlID0gdHJ1ZTsgLyogYXNzdW1lIHkgdGls
ZSBtYXkgYmUgdXNlZCAqLwo+ICsJaW50IG51bV9jaGFubmVsczsKPiArCWludCBkZWludGVybGVh
dmU7Cj4gKwlpbnQgaXBxZGVwdGgsIGlwcWRlcHRocGNoOwo+ICsJaW50IGRjbGtfbWF4Owo+ICsJ
aW50IG1heGRlYnc7Cj4gKwlpbnQgaSwgcmV0Owo+ICsKPiArCXJldCA9IGljbF9nZXRfcWd2X3Bv
aW50cyhkZXZfcHJpdiwgJnNpKTsKPiArCWlmIChyZXQpCj4gKwkJcmV0dXJuIHJldDsKPiArCW51
bV9jaGFubmVscyA9IHNpLm51bV9jaGFubmVsczsKPiArCj4gKwlkZWludGVybGVhdmUgPSBESVZf
Uk9VTkRfVVAobnVtX2NoYW5uZWxzLCBpc195X3RpbGUgPyA0IDogMik7Cj4gKwlkY2xrX21heCA9
IGljbF9zYWd2X21heF9kY2xrKCZzaSk7Cj4gKwo+ICsJaXBxZGVwdGhwY2ggPSAxNjsKPiArCj4g
KwltYXhkZWJ3ID0gbWluKHNhLT5kZXByb2did2xpbWl0ICogMTAwMCwKPiArCQkgICAgICBpY2xf
Y2FsY19idyhkY2xrX21heCwgMTYsIDEpICogNiAvIDEwKTsgLyogNjAlICovCj4gKwlpcHFkZXB0
aCA9IG1pbihpcHFkZXB0aHBjaCwgc2EtPmRpc3BsYXlydGlkcyAvIG51bV9jaGFubmVscyk7Cj4g
Kwo+ICsJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUoZGV2X3ByaXYtPm1heF9idyk7IGkrKykg
ewo+ICsJCXN0cnVjdCBpbnRlbF9id19pbmZvICpiaSA9ICZkZXZfcHJpdi0+bWF4X2J3W2ldOwo+
ICsJCWludCBjbHBjaGdyb3VwOwo+ICsJCWludCBqOwo+ICsKPiArCQljbHBjaGdyb3VwID0gKHNh
LT5kZWJ1cnN0ICogZGVpbnRlcmxlYXZlIC8gbnVtX2NoYW5uZWxzKSA8PCBpOwo+ICsJCWJpLT5u
dW1fcGxhbmVzID0gKGlwcWRlcHRoIC0gY2xwY2hncm91cCkgLyBjbHBjaGdyb3VwICsgMTsKPiAr
Cj4gKwkJZm9yIChqID0gMDsgaiA8IHNpLm51bV9wb2ludHM7IGorKykgewo+ICsJCQljb25zdCBz
dHJ1Y3QgaW50ZWxfcWd2X3BvaW50ICpzcCA9ICZzaS5wb2ludHNbal07Cj4gKwkJCWludCBjdCwg
Ync7Cj4gKwo+ICsJCQkvKgo+ICsJCQkgKiBNYXggcm93IGN5Y2xlIHRpbWUKPiArCQkJICoKPiAr
CQkJICogRklYTUUgd2hhdCBpcyB0aGUgbG9naWMgYmVoaW5kIHRoZQo+ICsJCQkgKiBhc3N1bWVk
IGJ1cnN0IGxlbmd0aD8KPiArCQkJICovCj4gKwkJCWN0ID0gbWF4X3QoaW50LCBzcC0+dF9yYywg
c3AtPnRfcnAgKyBzcC0+dF9yY2QgKwo+ICsJCQkJICAgKGNscGNoZ3JvdXAgLSAxKSAqIHNpLnRf
YmwgKyBzcC0+dF9yZHByZSk7Cj4gKwkJCWJ3ID0gaWNsX2NhbGNfYncoc3AtPmRjbGssIGNscGNo
Z3JvdXAgKiAzMiAqIG51bV9jaGFubmVscywgY3QpOwoKVGhlIEhBUyBkb2N1bWVudCB1c2VzICo2
NCBpbnN0ZWFkIG9mICozMiBmb3IgdGhlIEJXIGNhbGN1bGF0aW9uIGhlcmUuCkFyZSB3ZSBkb3Vi
bGluZyB0aGUgdmFsdWUgc29tZXdoZXJlIGVsc2UgdGhhdCBJJ20gb3Zlcmxvb2tpbmc/CgoKPiAr
Cj4gKwkJCWJpLT5kZXJhdGVkYndbal0gPSBtaW4obWF4ZGVidywKPiArCQkJCQkgICAgICAgYncg
KiA5IC8gMTApOyAvKiA5MCUgKi8KPiArCj4gKwkJCURSTV9ERUJVR19LTVMoIkJXJWQgLyBRR1Yg
JWQ6IG51bV9wbGFuZXM9JWQgZGVyYXRlZGJ3PSVkXG4iLAo+ICsJCQkJICAgICAgaSwgaiwgYmkt
Pm51bV9wbGFuZXMsIGJpLT5kZXJhdGVkYndbal0pOwo+ICsJCX0KPiArCj4gKwkJaWYgKGJpLT5u
dW1fcGxhbmVzID09IDEpCj4gKwkJCWJyZWFrOwo+ICsJfQo+ICsKPiArCXJldHVybiAwOwo+ICt9
Cj4gKwo+ICtzdGF0aWMgdW5zaWduZWQgaW50IGljbF9tYXhfYncoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2LAo+ICsJCQkgICAgICAgaW50IG51bV9wbGFuZXMsIGludCBxZ3ZfcG9p
bnQpCj4gK3sKPiArCWludCBpOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGRl
dl9wcml2LT5tYXhfYncpOyBpKyspIHsKPiArCQljb25zdCBzdHJ1Y3QgaW50ZWxfYndfaW5mbyAq
YmkgPQo+ICsJCQkmZGV2X3ByaXYtPm1heF9id1tpXTsKPiArCj4gKwkJaWYgKG51bV9wbGFuZXMg
Pj0gYmktPm51bV9wbGFuZXMpCj4gKwkJCXJldHVybiBiaS0+ZGVyYXRlZGJ3W3Fndl9wb2ludF07
Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3Vuc2lnbmVkIGludCBpbnRlbF9t
YXhfZGF0YV9yYXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiArCQkJCSBp
bnQgbnVtX3BsYW5lcykKPiArewo+ICsJaWYgKElTX0lDRUxBS0UoZGV2X3ByaXYpKQo+ICsJCS8q
Cj4gKwkJICogRklYTUUgd2l0aCBTQUdWIGRpc2FibGVkIG1heWJlIHdlIGNhbiBhc3N1bWUKPiAr
CQkgKiBwb2ludCAxIHdpbGwgYWx3YXlzIGJlIHVzZWQ/IFNlZW1zIHRvIG1hdGNoCj4gKwkJICog
dGhlIGJlaGF2aW91ciBvYnNlcnZlZCBpbiB0aGUgd2lsZC4KPiArCQkgKi8KPiArCQlyZXR1cm4g
bWluMyhpY2xfbWF4X2J3KGRldl9wcml2LCBudW1fcGxhbmVzLCAwKSwKPiArCQkJICAgIGljbF9t
YXhfYncoZGV2X3ByaXYsIG51bV9wbGFuZXMsIDEpLAo+ICsJCQkgICAgaWNsX21heF9idyhkZXZf
cHJpdiwgbnVtX3BsYW5lcywgMikpOwo+ICsJZWxzZQo+ICsJCXJldHVybiBVSU5UX01BWDsKPiAr
fQoKQW55IHNwZWNpZmljIHJlYXNvbiByZWFzb24gc29tZSBvZiB0aGVzZSBmdW5jdGlvbnMgYXJl
IGluIGk5MTVfZHJ2LmM/ClNlZW1zIGxpa2UgdGhleSBjb3VsZCBqdXN0IGdvIGluIHRoZSBuZXcg
aW50ZWxfYncuYy4KCj4gKwo+ICBzdGF0aWMgdm9pZAo+ICBpbnRlbF9nZXRfZHJhbV9pbmZvKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgewo+IEBAIC0xNjU1LDYgKzE4ODIs
OCBAQCBzdGF0aWMgaW50IGk5MTVfZHJpdmVyX2luaXRfaHcoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2KQo+ICAJICovCj4gIAlpbnRlbF9nZXRfZHJhbV9pbmZvKGRldl9wcml2KTsK
PiAgCj4gKwlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMSkKPiArCQlpY2xfZ2V0X2J3X2lu
Zm8oZGV2X3ByaXYpOwo+ICAKPiAgCXJldHVybiAwOwo+ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmgKPiBpbmRleCA2NGZhMzUzYTYyYmIuLmQxYjljM2ZlNTgwMiAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9kcnYuaAo+IEBAIC01NCw2ICs1NCw3IEBACj4gICNpbmNsdWRlIDxkcm0vZHJtX2NhY2hl
Lmg+Cj4gICNpbmNsdWRlIDxkcm0vZHJtX3V0aWwuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fZHNj
Lmg+Cj4gKyNpbmNsdWRlIDxkcm0vZHJtX2F0b21pYy5oPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9j
b25uZWN0b3IuaD4KPiAgI2luY2x1ZGUgPGRybS9pOTE1X21laV9oZGNwX2ludGVyZmFjZS5oPgo+
ICAKPiBAQCAtMTgzNyw2ICsxODM4LDEzIEBAIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlIHsKPiAg
CQl9IHR5cGU7Cj4gIAl9IGRyYW1faW5mbzsKPiAgCj4gKwlzdHJ1Y3QgaW50ZWxfYndfaW5mbyB7
Cj4gKwkJaW50IG51bV9wbGFuZXM7Cj4gKwkJaW50IGRlcmF0ZWRid1szXTsKPiArCX0gbWF4X2J3
WzZdOwo+ICsKPiArCXN0cnVjdCBkcm1fcHJpdmF0ZV9vYmogYndfb2JqOwo+ICsKPiAgCXN0cnVj
dCBpOTE1X3J1bnRpbWVfcG0gcnVudGltZV9wbTsKPiAgCj4gIAlzdHJ1Y3Qgewo+IEBAIC0yNzA2
LDYgKzI3MTQsOCBAQCBleHRlcm4gdW5zaWduZWQgbG9uZyBpOTE1X21jaF92YWwoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKPiAgZXh0ZXJuIHVuc2lnbmVkIGxvbmcgaTkxNV9n
ZnhfdmFsKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7Cj4gIGV4dGVybiB2b2lk
IGk5MTVfdXBkYXRlX2dmeF92YWwoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsK
PiAgaW50IHZsdl9mb3JjZV9nZnhfY2xvY2soc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LCBib29sIG9uKTsKPiArdW5zaWduZWQgaW50IGludGVsX21heF9kYXRhX3JhdGUoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAo+ICsJCQkJIGludCBudW1fcGxhbmVzKTsKPiAg
Cj4gIHUzMiBpbnRlbF9jYWxjdWxhdGVfbWNyX3Nfc3Nfc2VsZWN0KHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdik7Cj4gIAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3JlZy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAo+IGluZGV4IGU5
N2M0N2ZjYTY0NS4uMzk5MzY2YTQxNTI0IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVnLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCj4g
QEAgLTg3NzQsNiArODc3NCw5IEBAIGVudW0gewo+ICAjZGVmaW5lICAgR0VONl9QQ09ERV9XUklU
RV9NSU5fRlJFUV9UQUJMRQkweDgKPiAgI2RlZmluZSAgIEdFTjZfUENPREVfUkVBRF9NSU5fRlJF
UV9UQUJMRQkweDkKPiAgI2RlZmluZSAgIEdFTjZfUkVBRF9PQ19QQVJBTVMJCQkweGMKPiArI2Rl
ZmluZSAgIElDTF9QQ09ERV9NRU1fU1VCU1lTWVNURU1fSU5GTwkweGQKPiArI2RlZmluZSAgICAg
SUNMX1BDT0RFX01FTV9TU19SRUFEX0dMT0JBTF9JTkZPCSgweDAgPDwgOCkKPiArI2RlZmluZSAg
ICAgSUNMX1BDT0RFX01FTV9TU19SRUFEX1FHVl9QT0lOVF9JTkZPKHBvaW50KQkoKChwb2ludCkg
PDwgMTYpIHwgKDB4MSA8PCA4KSkKPiAgI2RlZmluZSAgIEdFTjZfUENPREVfUkVBRF9EX0NPTVAJ
CTB4MTAKPiAgI2RlZmluZSAgIEdFTjZfUENPREVfV1JJVEVfRF9DT01QCQkweDExCj4gICNkZWZp
bmUgICBIU1dfUENPREVfREVfV1JJVEVfRlJFUV9SRVEJCTB4MTcKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYXRvbWljX3BsYW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9hdG9taWNfcGxhbmUuYwo+IGluZGV4IGQxMTY4MWQ3MWFkZC4uZjE0MmM1YzIy
ZDdlIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2F0b21pY19wbGFu
ZS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYXRvbWljX3BsYW5lLmMKPiBA
QCAtMTE0LDYgKzExNCwyMiBAQCBpbnRlbF9wbGFuZV9kZXN0cm95X3N0YXRlKHN0cnVjdCBkcm1f
cGxhbmUgKnBsYW5lLAo+ICAJZHJtX2F0b21pY19oZWxwZXJfcGxhbmVfZGVzdHJveV9zdGF0ZShw
bGFuZSwgc3RhdGUpOwo+ICB9Cj4gIAo+ICt1bnNpZ25lZCBpbnQgaW50ZWxfcGxhbmVfZGF0YV9y
YXRlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+ICsJCQkJICAg
Y29uc3Qgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSkKPiArewo+ICsJY29u
c3Qgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIgPSBwbGFuZV9zdGF0ZS0+YmFzZS5mYjsKPiAr
CXVuc2lnbmVkIGludCBjcHAgPSAwOwo+ICsJaW50IGk7Cj4gKwo+ICsJaWYgKCFwbGFuZV9zdGF0
ZS0+YmFzZS52aXNpYmxlKQo+ICsJCXJldHVybiAwOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBm
Yi0+Zm9ybWF0LT5udW1fcGxhbmVzOyBpKyspCj4gKwkJY3BwICs9IGZiLT5mb3JtYXQtPmNwcFtp
XTsKCldpbGwgdGhpcyBoYW5kbGUgTlYxMiBwcm9wZXJseT8gIFRoaXMgd2lsbCBnaXZlIHVzIDEr
MiwgYnV0IHRoZQphbGdvcml0aG0gZG9jdW1lbnQgaW5kaWNhdGVzICJOVjEyIHNob3VsZCBiZSBj
b25zaWRlcmVkIGFzIDQgYnl0ZXMgcGVyCnBpeGVsLiIKCj4gKwo+ICsJcmV0dXJuIGNwcCAqIGNy
dGNfc3RhdGUtPnBpeGVsX3JhdGU7Cj4gK30KPiArCj4gIGludCBpbnRlbF9wbGFuZV9hdG9taWNf
Y2hlY2tfd2l0aF9zdGF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNf
c3RhdGUsCj4gIAkJCQkJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm5ld19jcnRjX3N0YXRlLAo+
ICAJCQkJCWNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqb2xkX3BsYW5lX3N0YXRlLAo+
IEBAIC0xMjUsNiArMTQxLDcgQEAgaW50IGludGVsX3BsYW5lX2F0b21pY19jaGVja193aXRoX3N0
YXRlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y18KPiAgCW5ld19jcnRj
X3N0YXRlLT5hY3RpdmVfcGxhbmVzICY9IH5CSVQocGxhbmUtPmlkKTsKPiAgCW5ld19jcnRjX3N0
YXRlLT5udjEyX3BsYW5lcyAmPSB+QklUKHBsYW5lLT5pZCk7Cj4gIAluZXdfY3J0Y19zdGF0ZS0+
YzhfcGxhbmVzICY9IH5CSVQocGxhbmUtPmlkKTsKPiArCW5ld19jcnRjX3N0YXRlLT5kYXRhX3Jh
dGVbcGxhbmUtPmlkXSA9IDA7Cj4gIAluZXdfcGxhbmVfc3RhdGUtPmJhc2UudmlzaWJsZSA9IGZh
bHNlOwo+ICAKPiAgCWlmICghbmV3X3BsYW5lX3N0YXRlLT5iYXNlLmNydGMgJiYgIW9sZF9wbGFu
ZV9zdGF0ZS0+YmFzZS5jcnRjKQo+IEBAIC0xNDksNiArMTY2LDkgQEAgaW50IGludGVsX3BsYW5l
X2F0b21pY19jaGVja193aXRoX3N0YXRlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpv
bGRfY3J0Y18KPiAgCWlmIChuZXdfcGxhbmVfc3RhdGUtPmJhc2UudmlzaWJsZSB8fCBvbGRfcGxh
bmVfc3RhdGUtPmJhc2UudmlzaWJsZSkKPiAgCQluZXdfY3J0Y19zdGF0ZS0+dXBkYXRlX3BsYW5l
cyB8PSBCSVQocGxhbmUtPmlkKTsKPiAgCj4gKwluZXdfY3J0Y19zdGF0ZS0+ZGF0YV9yYXRlW3Bs
YW5lLT5pZF0gPQo+ICsJCWludGVsX3BsYW5lX2RhdGFfcmF0ZShuZXdfY3J0Y19zdGF0ZSwgbmV3
X3BsYW5lX3N0YXRlKTsKPiArCj4gIAlyZXR1cm4gaW50ZWxfcGxhbmVfYXRvbWljX2NhbGNfY2hh
bmdlcyhvbGRfY3J0Y19zdGF0ZSwKPiAgCQkJCQkgICAgICAgJm5ld19jcnRjX3N0YXRlLT5iYXNl
LAo+ICAJCQkJCSAgICAgICBvbGRfcGxhbmVfc3RhdGUsCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX2F0b21pY19wbGFuZS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfYXRvbWljX3BsYW5lLmgKPiBpbmRleCAxNDY3ODYyMDQ0MGYuLjBhOTY1MTM3NmQwZSAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9hdG9taWNfcGxhbmUuaAo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2F0b21pY19wbGFuZS5oCj4gQEAgLTE1
LDYgKzE1LDggQEAgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlOwo+ICAKPiAgZXh0ZXJuIGNvbnN0
IHN0cnVjdCBkcm1fcGxhbmVfaGVscGVyX2Z1bmNzIGludGVsX3BsYW5lX2hlbHBlcl9mdW5jczsK
PiAgCj4gK3Vuc2lnbmVkIGludCBpbnRlbF9wbGFuZV9kYXRhX3JhdGUoY29uc3Qgc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCj4gKwkJCQkgICBjb25zdCBzdHJ1Y3QgaW50ZWxf
cGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlKTsKPiAgdm9pZCBpbnRlbF91cGRhdGVfcGxhbmUoc3Ry
dWN0IGludGVsX3BsYW5lICpwbGFuZSwKPiAgCQkJY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3Rh
dGUgKmNydGNfc3RhdGUsCj4gIAkJCWNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqcGxh
bmVfc3RhdGUpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9idy5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYncuYwo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0
Cj4gaW5kZXggMDAwMDAwMDAwMDAwLi4zMDRiZjg3ZjBhMmUKPiAtLS0gL2Rldi9udWxsCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYncuYwo+IEBAIC0wLDAgKzEsMTgxIEBACj4g
Ky8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKPiArLyoKPiArICogQ29weXJpZ2h0IMKp
IDIwMTkgSW50ZWwgQ29ycG9yYXRpb24KPiArICovCj4gKwo+ICsjaW5jbHVkZSA8ZHJtL2RybV9h
dG9taWNfc3RhdGVfaGVscGVyLmg+Cj4gKwo+ICsjaW5jbHVkZSAiaW50ZWxfYncuaCIKPiArI2lu
Y2x1ZGUgImludGVsX2Rydi5oIgo+ICsKPiArc3RhdGljIHVuc2lnbmVkIGludCBpbnRlbF9id19j
cnRjX251bV9hY3RpdmVfcGxhbmVzKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlKQo+ICt7Cj4gKwkvKgo+ICsJICogV2UgYXNzdW1lIGN1cnNvcnMgYXJlIHNtYWxsIGVu
b3VnaAo+ICsJICogdG8gbm90IG5vdCBjYXVzZSBiYW5kd2lkdGggcHJvYmxlbXMuCj4gKwkgKi8K
PiArCXJldHVybiBod2VpZ2h0OChjcnRjX3N0YXRlLT5hY3RpdmVfcGxhbmVzICYgfkJJVChQTEFO
RV9DVVJTT1IpKTsKCkRvIHdlIGFsc28gbmVlZCB0byBhY2NvdW50IGZvciBOVjEyIHNsYXZlIHBs
YW5lcz8gIElJUkMsIHRoZXkncmUgbm90IHNldAppbiB0aGUgYWN0aXZlX3BsYW5lcyBiaXRtYXNr
LCBidXQgdGhleSdyZSBzdGlsbCByZWFkaW5nIGZyb20gRFJBTSwgc28gSQppbWFnaW5lIHRoZXkn
ZCBjb3VudCB0b3dhcmQgdGhlIGNhbGN1bGF0aW9ucyBoZXJlPwoKPiArfQo+ICsKPiArc3RhdGlj
IHVuc2lnbmVkIGludCBpbnRlbF9id19jcnRjX2RhdGFfcmF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxf
Y3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKPiArewo+ICsJc3RydWN0IGludGVsX2NydGMgKmNydGMg
PSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPmJhc2UuY3J0Yyk7Cj4gKwl1bnNpZ25lZCBpbnQg
ZGF0YV9yYXRlID0gMDsKPiArCWVudW0gcGxhbmVfaWQgcGxhbmVfaWQ7Cj4gKwo+ICsJZm9yX2Vh
Y2hfcGxhbmVfaWRfb25fY3J0YyhjcnRjLCBwbGFuZV9pZCkgewo+ICsJCS8qCj4gKwkJICogV2Ug
YXNzdW1lIGN1cnNvcnMgYXJlIHNtYWxsIGVub3VnaAo+ICsJCSAqIHRvIG5vdCBub3QgY2F1c2Ug
YmFuZHdpZHRoIHByb2JsZW1zLgo+ICsJCSAqLwo+ICsJCWlmIChwbGFuZV9pZCA9PSBQTEFORV9D
VVJTT1IpCj4gKwkJCWNvbnRpbnVlOwo+ICsKPiArCQlkYXRhX3JhdGUgKz0gY3J0Y19zdGF0ZS0+
ZGF0YV9yYXRlW3BsYW5lX2lkXTsKPiArCX0KPiArCj4gKwlyZXR1cm4gZGF0YV9yYXRlOwo+ICt9
Cj4gKwo+ICt2b2lkIGludGVsX2J3X2NydGNfdXBkYXRlKHN0cnVjdCBpbnRlbF9id19zdGF0ZSAq
Yndfc3RhdGUsCj4gKwkJCSAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3Rh
dGUpCj4gK3sKPiArCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9faW50ZWxfY3J0YyhjcnRj
X3N0YXRlLT5iYXNlLmNydGMpOwo+ICsKPiArCWJ3X3N0YXRlLT5kYXRhX3JhdGVbY3J0Yy0+cGlw
ZV0gPQo+ICsJCWludGVsX2J3X2NydGNfZGF0YV9yYXRlKGNydGNfc3RhdGUpOwo+ICsJYndfc3Rh
dGUtPm51bV9hY3RpdmVfcGxhbmVzW2NydGMtPnBpcGVdID0KPiArCQlpbnRlbF9id19jcnRjX251
bV9hY3RpdmVfcGxhbmVzKGNydGNfc3RhdGUpOwo+ICsKPiArCURSTV9ERUJVR19LTVMoInBpcGUg
JWMgZGF0YSByYXRlICV1IG51bSBhY3RpdmUgcGxhbmVzICV1XG4iLAo+ICsJCSAgICAgIHBpcGVf
bmFtZShjcnRjLT5waXBlKSwKPiArCQkgICAgICBid19zdGF0ZS0+ZGF0YV9yYXRlW2NydGMtPnBp
cGVdLAo+ICsJCSAgICAgIGJ3X3N0YXRlLT5udW1fYWN0aXZlX3BsYW5lc1tjcnRjLT5waXBlXSk7
Cj4gK30KPiArCj4gK3N0YXRpYyB1bnNpZ25lZCBpbnQgaW50ZWxfYndfbnVtX2FjdGl2ZV9wbGFu
ZXMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAo+ICsJCQkJCSAgICAgICBjb25z
dCBzdHJ1Y3QgaW50ZWxfYndfc3RhdGUgKmJ3X3N0YXRlKQo+ICt7Cj4gKwl1bnNpZ25lZCBpbnQg
bnVtX2FjdGl2ZV9wbGFuZXMgPSAwOwo+ICsJZW51bSBwaXBlIHBpcGU7Cj4gKwo+ICsJZm9yX2Vh
Y2hfcGlwZShkZXZfcHJpdiwgcGlwZSkKPiArCQludW1fYWN0aXZlX3BsYW5lcyArPSBid19zdGF0
ZS0+bnVtX2FjdGl2ZV9wbGFuZXNbcGlwZV07Cj4gKwo+ICsJcmV0dXJuIG51bV9hY3RpdmVfcGxh
bmVzOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdW5zaWduZWQgaW50IGludGVsX2J3X2RhdGFfcmF0ZShz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gKwkJCQkgICAgICAgY29uc3Qgc3Ry
dWN0IGludGVsX2J3X3N0YXRlICpid19zdGF0ZSkKPiArewo+ICsJdW5zaWduZWQgaW50IGRhdGFf
cmF0ZSA9IDA7Cj4gKwllbnVtIHBpcGUgcGlwZTsKPiArCj4gKwlmb3JfZWFjaF9waXBlKGRldl9w
cml2LCBwaXBlKQo+ICsJCWRhdGFfcmF0ZSArPSBid19zdGF0ZS0+ZGF0YV9yYXRlW3BpcGVdOwo+
ICsKPiArCXJldHVybiBkYXRhX3JhdGU7Cj4gK30KPiArCj4gK2ludCBpbnRlbF9id19hdG9taWNf
Y2hlY2soc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gK3sKPiArCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoc3RhdGUtPmJhc2UuZGV2KTsKPiAr
CXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpuZXdfY3J0Y19zdGF0ZSwgKm9sZF9jcnRjX3N0YXRl
Owo+ICsJc3RydWN0IGludGVsX2J3X3N0YXRlICpid19zdGF0ZSA9IE5VTEw7Cj4gKwl1bnNpZ25l
ZCBpbnQgZGF0YV9yYXRlLCBtYXhfZGF0YV9yYXRlOwo+ICsJdW5zaWduZWQgaW50IG51bV9hY3Rp
dmVfcGxhbmVzOwo+ICsJc3RydWN0IGludGVsX2NydGMgKmNydGM7Cj4gKwlpbnQgaTsKPiArCj4g
KwkvKiBGSVhNRSBlYXJsaWVyIGdlbnMgbmVlZCBzb21lIGNoZWNrcyB0b28gKi8KPiArCWlmIChJ
TlRFTF9HRU4oZGV2X3ByaXYpIDwgMTEpCj4gKwkJcmV0dXJuIDA7Cj4gKwo+ICsJZm9yX2VhY2hf
b2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsIG9sZF9jcnRjX3N0YXRlLAo+
ICsJCQkJCSAgICBuZXdfY3J0Y19zdGF0ZSwgaSkgewo+ICsJCXVuc2lnbmVkIGludCBvbGRfZGF0
YV9yYXRlID0KPiArCQkJaW50ZWxfYndfY3J0Y19kYXRhX3JhdGUob2xkX2NydGNfc3RhdGUpOwo+
ICsJCXVuc2lnbmVkIGludCBuZXdfZGF0YV9yYXRlID0KPiArCQkJaW50ZWxfYndfY3J0Y19kYXRh
X3JhdGUobmV3X2NydGNfc3RhdGUpOwo+ICsJCXVuc2lnbmVkIGludCBvbGRfYWN0aXZlX3BsYW5l
cyA9Cj4gKwkJCWludGVsX2J3X2NydGNfbnVtX2FjdGl2ZV9wbGFuZXMob2xkX2NydGNfc3RhdGUp
Owo+ICsJCXVuc2lnbmVkIGludCBuZXdfYWN0aXZlX3BsYW5lcyA9Cj4gKwkJCWludGVsX2J3X2Ny
dGNfbnVtX2FjdGl2ZV9wbGFuZXMobmV3X2NydGNfc3RhdGUpOwo+ICsKPiArCQkvKgo+ICsJCSAq
IEF2b2lkIGxvY2tpbmcgdGhlIGJ3IHN0YXRlIHdoZW4KPiArCQkgKiBub3RoaW5nIHNpZ25pZmlj
YW50IGhhcyBjaGFuZ2VkLgo+ICsJCSAqLwo+ICsJCWlmIChvbGRfZGF0YV9yYXRlID09IG5ld19k
YXRhX3JhdGUgJiYKPiArCQkgICAgb2xkX2FjdGl2ZV9wbGFuZXMgPT0gbmV3X2FjdGl2ZV9wbGFu
ZXMpCj4gKwkJCWNvbnRpbnVlOwo+ICsKPiArCQlid19zdGF0ZSAgPSBpbnRlbF9hdG9taWNfZ2V0
X2J3X3N0YXRlKHN0YXRlKTsKPiArCQlpZiAoSVNfRVJSKGJ3X3N0YXRlKSkKPiArCQkJcmV0dXJu
IFBUUl9FUlIoYndfc3RhdGUpOwo+ICsKPiArCQlid19zdGF0ZS0+ZGF0YV9yYXRlW2NydGMtPnBp
cGVdID0gbmV3X2RhdGFfcmF0ZTsKPiArCQlid19zdGF0ZS0+bnVtX2FjdGl2ZV9wbGFuZXNbY3J0
Yy0+cGlwZV0gPSBuZXdfYWN0aXZlX3BsYW5lczsKPiArCj4gKwkJRFJNX0RFQlVHX0tNUygicGlw
ZSAlYyBkYXRhIHJhdGUgJXUgbnVtIGFjdGl2ZSBwbGFuZXMgJXVcbiIsCj4gKwkJCSAgICAgIHBp
cGVfbmFtZShjcnRjLT5waXBlKSwKPiArCQkJICAgICAgYndfc3RhdGUtPmRhdGFfcmF0ZVtjcnRj
LT5waXBlXSwKPiArCQkJICAgICAgYndfc3RhdGUtPm51bV9hY3RpdmVfcGxhbmVzW2NydGMtPnBp
cGVdKTsKPiArCX0KPiArCj4gKwlpZiAoIWJ3X3N0YXRlKQo+ICsJCXJldHVybiAwOwo+ICsKPiAr
CWRhdGFfcmF0ZSA9IGludGVsX2J3X2RhdGFfcmF0ZShkZXZfcHJpdiwgYndfc3RhdGUpOwo+ICsJ
bnVtX2FjdGl2ZV9wbGFuZXMgPSBpbnRlbF9id19udW1fYWN0aXZlX3BsYW5lcyhkZXZfcHJpdiwg
Yndfc3RhdGUpOwo+ICsKPiArCW1heF9kYXRhX3JhdGUgPSBpbnRlbF9tYXhfZGF0YV9yYXRlKGRl
dl9wcml2LCBudW1fYWN0aXZlX3BsYW5lcyk7Cj4gKwo+ICsJZGF0YV9yYXRlID0gRElWX1JPVU5E
X1VQKGRhdGFfcmF0ZSwgMTAwMCk7Cj4gKwo+ICsJaWYgKGRhdGFfcmF0ZSA+IG1heF9kYXRhX3Jh
dGUpIHsKPiArCQlEUk1fREVCVUdfS01TKCJCYW5kd2lkdGggJXUgTUIvcyBleGNlZWRzIG1heCBh
dmFpbGFibGUgJWQgTUIvcyAoJWQgYWN0aXZlIHBsYW5lcylcbiIsCj4gKwkJCSAgICAgIGRhdGFf
cmF0ZSwgbWF4X2RhdGFfcmF0ZSwgbnVtX2FjdGl2ZV9wbGFuZXMpOwo+ICsJCXJldHVybiAtRUlO
VkFMOwo+ICsJfQo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtzdGF0aWMgc3RydWN0IGRy
bV9wcml2YXRlX3N0YXRlICppbnRlbF9id19kdXBsaWNhdGVfc3RhdGUoc3RydWN0IGRybV9wcml2
YXRlX29iaiAqb2JqKQo+ICt7Cj4gKwlzdHJ1Y3QgaW50ZWxfYndfc3RhdGUgKnN0YXRlOwo+ICsK
PiArCXN0YXRlID0ga21lbWR1cChvYmotPnN0YXRlLCBzaXplb2YoKnN0YXRlKSwgR0ZQX0tFUk5F
TCk7Cj4gKwlpZiAoIXN0YXRlKQo+ICsJCXJldHVybiBOVUxMOwo+ICsKPiArCV9fZHJtX2F0b21p
Y19oZWxwZXJfcHJpdmF0ZV9vYmpfZHVwbGljYXRlX3N0YXRlKG9iaiwgJnN0YXRlLT5iYXNlKTsK
PiArCj4gKwlyZXR1cm4gJnN0YXRlLT5iYXNlOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBpbnRl
bF9id19kZXN0cm95X3N0YXRlKHN0cnVjdCBkcm1fcHJpdmF0ZV9vYmogKm9iaiwKPiArCQkJCSAg
IHN0cnVjdCBkcm1fcHJpdmF0ZV9zdGF0ZSAqc3RhdGUpCj4gK3sKPiArCWtmcmVlKHN0YXRlKTsK
PiArfQo+ICsKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcHJpdmF0ZV9zdGF0ZV9mdW5jcyBp
bnRlbF9id19mdW5jcyA9IHsKPiArCS5hdG9taWNfZHVwbGljYXRlX3N0YXRlID0gaW50ZWxfYndf
ZHVwbGljYXRlX3N0YXRlLAo+ICsJLmF0b21pY19kZXN0cm95X3N0YXRlID0gaW50ZWxfYndfZGVz
dHJveV9zdGF0ZSwKPiArfTsKPiArCj4gK2ludCBpbnRlbF9id19pbml0KHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdikKPiArewo+ICsJc3RydWN0IGludGVsX2J3X3N0YXRlICpzdGF0
ZTsKPiArCj4gKwlzdGF0ZSA9IGt6YWxsb2Moc2l6ZW9mKCpzdGF0ZSksIEdGUF9LRVJORUwpOwo+
ICsJaWYgKCFzdGF0ZSkKPiArCQlyZXR1cm4gLUVOT01FTTsKPiArCj4gKwlkcm1fYXRvbWljX3By
aXZhdGVfb2JqX2luaXQoJmRldl9wcml2LT5kcm0sICZkZXZfcHJpdi0+Yndfb2JqLAo+ICsJCQkJ
ICAgICZzdGF0ZS0+YmFzZSwgJmludGVsX2J3X2Z1bmNzKTsKPiArCj4gKwlyZXR1cm4gMDsKPiAr
fQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9idy5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfYncuaAo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXgg
MDAwMDAwMDAwMDAwLi5jMTQyNzJjYTViNTkKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfYncuaAo+IEBAIC0wLDAgKzEsNDYgQEAKPiArLyogU1BEWC1M
aWNlbnNlLUlkZW50aWZpZXI6IE1JVCAqLwo+ICsvKgo+ICsgKiBDb3B5cmlnaHQgwqkgMjAxOSBJ
bnRlbCBDb3Jwb3JhdGlvbgo+ICsgKi8KPiArCj4gKyNpZm5kZWYgX19JTlRFTF9CV19IX18KPiAr
I2RlZmluZSBfX0lOVEVMX0JXX0hfXwo+ICsKPiArI2luY2x1ZGUgPGRybS9kcm1fYXRvbWljLmg+
Cj4gKwo+ICsjaW5jbHVkZSAiaTkxNV9kcnYuaCIKPiArI2luY2x1ZGUgImludGVsX2Rpc3BsYXku
aCIKPiArCj4gK3N0cnVjdCBkcm1faTkxNV9wcml2YXRlOwo+ICtzdHJ1Y3QgaW50ZWxfYXRvbWlj
X3N0YXRlOwo+ICtzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZTsKPiArCj4gK3N0cnVjdCBpbnRlbF9i
d19zdGF0ZSB7Cj4gKwlzdHJ1Y3QgZHJtX3ByaXZhdGVfc3RhdGUgYmFzZTsKPiArCj4gKwl1bnNp
Z25lZCBpbnQgZGF0YV9yYXRlW0k5MTVfTUFYX1BJUEVTXTsKPiArCXU4IG51bV9hY3RpdmVfcGxh
bmVzW0k5MTVfTUFYX1BJUEVTXTsKPiArfTsKPiArCj4gKyNkZWZpbmUgdG9faW50ZWxfYndfc3Rh
dGUoeCkgY29udGFpbmVyX29mKCh4KSwgc3RydWN0IGludGVsX2J3X3N0YXRlLCBiYXNlKQo+ICsK
PiArc3RhdGljIGlubGluZSBzdHJ1Y3QgaW50ZWxfYndfc3RhdGUgKgo+ICtpbnRlbF9hdG9taWNf
Z2V0X2J3X3N0YXRlKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQo+ICt7Cj4gKwlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRl
dik7Cj4gKwlzdHJ1Y3QgZHJtX3ByaXZhdGVfc3RhdGUgKmJ3X3N0YXRlOwo+ICsKCkRvIHdlIG5l
ZWQgdG8gZ3JhYiBhIGxvY2sgaGVyZT8gIE90aGVyd2lzZSBJIGRvbid0IHNlZSBhbnl0aGluZwpw
cmV2ZW50aW5nIHBhcmFsbGVsIGNvbW1pdHMgdGhhdCB1cGRhdGUgZGlzam9pbnQgc2V0cyBvZiBD
UlRDcyAKZnJvbSBleGNlZWRpbmcgdGhlIGNvbWJpbmVkIG1lbW9yeSBiYW5kd2lkdGguCgpHcmFu
dGVkLCBncmFiYmluZyBhIGNlbnRyYWwgbG9jayBzZWVtcyByZWFsbHkgcGFpbmZ1bCBzaW5jZSB0
aGVuIHBsYW5lCnVwZGF0ZXMgb24gb25lIENSVEMgbWF5IHdpbmQgdXAgYmxvY2tpbmcgcGxhbmUg
dXBkYXRlcyBvbiBhbm90aGVyIENSVEMuCkJ1dCBJIGRvbid0IGtub3cgaWYgdGhlcmUncyBhbiBl
YXN5IHdheSBhcm91bmQgdGhhdCB3aXRoIHRoZSBhbGdvcml0aG0Kd2UndmUgYmVlbiBnaXZlbiBl
aXRoZXIuICBXYXMgdGhlIG1lbnRpb24gb2YgcG90ZW50aWFsbHkgY2hvcHBpbmcgdXAgdGhlCmJh
bmR3aWR0aCBpbiB0aGUgY29tbWl0IG1lc3NhZ2UgaG93IHlvdSBwbGFuIHRvIGFkZHJlc3MgdGhp
cz8gIEkuZS4sCnRyZWF0IGl0IGxpa2Ugd2UgZG8gd2l0aCBEREIgc3BhY2Ugb24gbW9kZXNldHMg
LS0tIHNpbmNlIHdlIGdsb2JhbGx5CmxvY2sgZXZlcnl0aGluZyBvbiBhbnkgbW9kZXNldCB3ZSBj
YW4gZGl2aWRlIGl0IHVwIGF0IHRoYXQgcG9pbnQgYW5kCnRoZW4gaW50cmEtQ1JUQyB1cGRhdGVz
IHdpbGwgb25seSBoYXZlIHRvIHdvcnJ5IGFib3V0IHRoZWlyIG93bgphbGxvY2F0aW9uIHRoZXJl
YWZ0ZXI/ICBUaGF0IGNvdWxkIHBvdGVudGlhbGx5IGxpbWl0IHBsYW5lIHVzYWdlIG1vcmUKdGhh
biBpcyBhY3R1YWxseSBuZWNlc3NhcnkgaW4gc29tZSBjYXNlczsgbm90IHN1cmUgaG93IHRvIHdl
aWdoIHRoZQppbXBhY3Qgb2YgdGhhdCB2cyB0aGUgZG93bnNpZGUgb2Ygc3R1ZmYgbGlrZSBhZGRp
bmcvcmVtb3ZpbmcvcmVzaXppbmcKcGxhbmVzIGJsb2NraW5nIGJsb2NrIHVwZGF0ZXMgdG8gdW5y
ZWxhdGVkIENSVEMncy4KCgoKTWF0dAoKPiArCWJ3X3N0YXRlID0gZHJtX2F0b21pY19nZXRfcHJp
dmF0ZV9vYmpfc3RhdGUoJnN0YXRlLT5iYXNlLAo+ICsJCQkJCQkgICAgJmRldl9wcml2LT5id19v
YmopOwo+ICsJaWYgKElTX0VSUihid19zdGF0ZSkpCj4gKwkJcmV0dXJuIEVSUl9DQVNUKGJ3X3N0
YXRlKTsKPiArCj4gKwlyZXR1cm4gdG9faW50ZWxfYndfc3RhdGUoYndfc3RhdGUpOwo+ICt9Cj4g
Kwo+ICtpbnQgaW50ZWxfYndfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYp
Owo+ICtpbnQgaW50ZWxfYndfYXRvbWljX2NoZWNrKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUg
KnN0YXRlKTsKPiArdm9pZCBpbnRlbF9id19jcnRjX3VwZGF0ZShzdHJ1Y3QgaW50ZWxfYndfc3Rh
dGUgKmJ3X3N0YXRlLAo+ICsJCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlKTsKPiArCj4gKyNlbmRpZiAvKiBfX0lOVEVMX0JXX0hfXyAqLwo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9kaXNwbGF5LmMKPiBpbmRleCBkODFlYzgwZTM0ZjYuLmE5NTU4NDBiNzNjYiAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMKPiBAQCAtNTAsNiArNTAsNyBA
QAo+ICAjaW5jbHVkZSAiaW50ZWxfYWNwaS5oIgo+ICAjaW5jbHVkZSAiaW50ZWxfYXRvbWljLmgi
Cj4gICNpbmNsdWRlICJpbnRlbF9hdG9taWNfcGxhbmUuaCIKPiArI2luY2x1ZGUgImludGVsX2J3
LmgiCj4gICNpbmNsdWRlICJpbnRlbF9jb2xvci5oIgo+ICAjaW5jbHVkZSAiaW50ZWxfY2RjbGsu
aCIKPiAgI2luY2x1ZGUgImludGVsX2NydC5oIgo+IEBAIC0yODYzLDYgKzI4NjQsNyBAQCBzdGF0
aWMgdm9pZCBpbnRlbF9wbGFuZV9kaXNhYmxlX25vYXRvbWljKHN0cnVjdCBpbnRlbF9jcnRjICpj
cnRjLAo+ICAKPiAgCWludGVsX3NldF9wbGFuZV92aXNpYmxlKGNydGNfc3RhdGUsIHBsYW5lX3N0
YXRlLCBmYWxzZSk7Cj4gIAlmaXh1cF9hY3RpdmVfcGxhbmVzKGNydGNfc3RhdGUpOwo+ICsJY3J0
Y19zdGF0ZS0+ZGF0YV9yYXRlW3BsYW5lLT5pZF0gPSAwOwo+ICAKPiAgCWlmIChwbGFuZS0+aWQg
PT0gUExBTkVfUFJJTUFSWSkKPiAgCQlpbnRlbF9wcmVfZGlzYWJsZV9wcmltYXJ5X25vYXRvbWlj
KCZjcnRjLT5iYXNlKTsKPiBAQCAtNjU5MCw2ICs2NTkyLDggQEAgc3RhdGljIHZvaWQgaW50ZWxf
Y3J0Y19kaXNhYmxlX25vYXRvbWljKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKPiAgCXN0cnVjdCBp
bnRlbF9lbmNvZGVyICplbmNvZGVyOwo+ICAJc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMg
PSB0b19pbnRlbF9jcnRjKGNydGMpOwo+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gdG9faTkxNShjcnRjLT5kZXYpOwo+ICsJc3RydWN0IGludGVsX2J3X3N0YXRlICpid19z
dGF0ZSA9Cj4gKwkJdG9faW50ZWxfYndfc3RhdGUoZGV2X3ByaXYtPmJ3X29iai5zdGF0ZSk7Cj4g
IAllbnVtIGludGVsX2Rpc3BsYXlfcG93ZXJfZG9tYWluIGRvbWFpbjsKPiAgCXN0cnVjdCBpbnRl
bF9wbGFuZSAqcGxhbmU7Cj4gIAl1NjQgZG9tYWluczsKPiBAQCAtNjY1Miw2ICs2NjU2LDkgQEAg
c3RhdGljIHZvaWQgaW50ZWxfY3J0Y19kaXNhYmxlX25vYXRvbWljKHN0cnVjdCBkcm1fY3J0YyAq
Y3J0YywKPiAgCWRldl9wcml2LT5hY3RpdmVfY3J0Y3MgJj0gfigxIDw8IGludGVsX2NydGMtPnBp
cGUpOwo+ICAJZGV2X3ByaXYtPm1pbl9jZGNsa1tpbnRlbF9jcnRjLT5waXBlXSA9IDA7Cj4gIAlk
ZXZfcHJpdi0+bWluX3ZvbHRhZ2VfbGV2ZWxbaW50ZWxfY3J0Yy0+cGlwZV0gPSAwOwo+ICsKPiAr
CWJ3X3N0YXRlLT5kYXRhX3JhdGVbaW50ZWxfY3J0Yy0+cGlwZV0gPSAwOwo+ICsJYndfc3RhdGUt
Pm51bV9hY3RpdmVfcGxhbmVzW2ludGVsX2NydGMtPnBpcGVdID0gMDsKPiAgfQo+ICAKPiAgLyoK
PiBAQCAtMTExNzYsNiArMTExODMsNyBAQCBpbnQgaW50ZWxfcGxhbmVfYXRvbWljX2NhbGNfY2hh
bmdlcyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdAo+ICAJaWYg
KCFpc19jcnRjX2VuYWJsZWQpIHsKPiAgCQlwbGFuZV9zdGF0ZS0+dmlzaWJsZSA9IHZpc2libGUg
PSBmYWxzZTsKPiAgCQl0b19pbnRlbF9jcnRjX3N0YXRlKGNydGNfc3RhdGUpLT5hY3RpdmVfcGxh
bmVzICY9IH5CSVQocGxhbmUtPmlkKTsKPiArCQl0b19pbnRlbF9jcnRjX3N0YXRlKGNydGNfc3Rh
dGUpLT5kYXRhX3JhdGVbcGxhbmUtPmlkXSA9IDA7Cj4gIAl9Cj4gIAo+ICAJaWYgKCF3YXNfdmlz
aWJsZSAmJiAhdmlzaWJsZSkKPiBAQCAtMTMyOTYsNyArMTMzMDQsMTUgQEAgc3RhdGljIGludCBp
bnRlbF9hdG9taWNfY2hlY2soc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiAgCQlyZXR1cm4gcmV0
Owo+ICAKPiAgCWludGVsX2ZiY19jaG9vc2VfY3J0YyhkZXZfcHJpdiwgaW50ZWxfc3RhdGUpOwo+
IC0JcmV0dXJuIGNhbGNfd2F0ZXJtYXJrX2RhdGEoaW50ZWxfc3RhdGUpOwo+ICsJcmV0ID0gY2Fs
Y193YXRlcm1hcmtfZGF0YShpbnRlbF9zdGF0ZSk7Cj4gKwlpZiAocmV0KQo+ICsJCXJldHVybiBy
ZXQ7Cj4gKwo+ICsJcmV0ID0gaW50ZWxfYndfYXRvbWljX2NoZWNrKGludGVsX3N0YXRlKTsKPiAr
CWlmIChyZXQpCj4gKwkJcmV0dXJuIHJldDsKPiArCj4gKwlyZXR1cm4gMDsKPiAgfQo+ICAKPiAg
c3RhdGljIGludCBpbnRlbF9hdG9taWNfcHJlcGFyZV9jb21taXQoc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwKPiBAQCAtMTU2OTYsNiArMTU3MTIsMTAgQEAgaW50IGludGVsX21vZGVzZXRfaW5pdChz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2KQo+ICAKPiAgCWRybV9tb2RlX2NvbmZpZ19pbml0KGRldik7
Cj4gIAo+ICsJcmV0ID0gaW50ZWxfYndfaW5pdChkZXZfcHJpdik7Cj4gKwlpZiAocmV0KQo+ICsJ
CXJldHVybiByZXQ7Cj4gKwo+ICAJZGV2LT5tb2RlX2NvbmZpZy5taW5fd2lkdGggPSAwOwo+ICAJ
ZGV2LT5tb2RlX2NvbmZpZy5taW5faGVpZ2h0ID0gMDsKPiAgCj4gQEAgLTE2MzE4LDggKzE2MzM4
LDExIEBAIHN0YXRpYyB2b2lkIGludGVsX21vZGVzZXRfcmVhZG91dF9od19zdGF0ZShzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2KQo+ICAJZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZjb25uX2l0
ZXIpOwo+ICAKPiAgCWZvcl9lYWNoX2ludGVsX2NydGMoZGV2LCBjcnRjKSB7Cj4gKwkJc3RydWN0
IGludGVsX2J3X3N0YXRlICpid19zdGF0ZSA9Cj4gKwkJCXRvX2ludGVsX2J3X3N0YXRlKGRldl9w
cml2LT5id19vYmouc3RhdGUpOwo+ICAJCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0
YXRlID0KPiAgCQkJdG9faW50ZWxfY3J0Y19zdGF0ZShjcnRjLT5iYXNlLnN0YXRlKTsKPiArCQlz
dHJ1Y3QgaW50ZWxfcGxhbmUgKnBsYW5lOwo+ICAJCWludCBtaW5fY2RjbGsgPSAwOwo+ICAKPiAg
CQltZW1zZXQoJmNydGMtPmJhc2UubW9kZSwgMCwgc2l6ZW9mKGNydGMtPmJhc2UubW9kZSkpOwo+
IEBAIC0xNjM1OCw2ICsxNjM4MSwyMSBAQCBzdGF0aWMgdm9pZCBpbnRlbF9tb2Rlc2V0X3JlYWRv
dXRfaHdfc3RhdGUoc3RydWN0IGRybV9kZXZpY2UgKmRldikKPiAgCQlkZXZfcHJpdi0+bWluX3Zv
bHRhZ2VfbGV2ZWxbY3J0Yy0+cGlwZV0gPQo+ICAJCQljcnRjX3N0YXRlLT5taW5fdm9sdGFnZV9s
ZXZlbDsKPiAgCj4gKwkJZm9yX2VhY2hfaW50ZWxfcGxhbmVfb25fY3J0YygmZGV2X3ByaXYtPmRy
bSwgY3J0YywgcGxhbmUpIHsKPiArCQkJY29uc3Qgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpw
bGFuZV9zdGF0ZSA9Cj4gKwkJCQl0b19pbnRlbF9wbGFuZV9zdGF0ZShwbGFuZS0+YmFzZS5zdGF0
ZSk7Cj4gKwo+ICsJCQkvKgo+ICsJCQkgKiBGSVhNRSBkb24ndCBoYXZlIHRoZSBmYiB5ZXQsIHNv
IGNhbid0Cj4gKwkJCSAqIHVzZSBpbnRlbF9wbGFuZV9kYXRhX3JhdGUoKSA6KAo+ICsJCQkgKi8K
PiArCQkJaWYgKHBsYW5lX3N0YXRlLT5iYXNlLnZpc2libGUpCj4gKwkJCQljcnRjX3N0YXRlLT5k
YXRhX3JhdGVbcGxhbmUtPmlkXSA9Cj4gKwkJCQkJNCAqIGNydGNfc3RhdGUtPnBpeGVsX3JhdGU7
Cj4gKwkJfQo+ICsKPiArCQlpbnRlbF9id19jcnRjX3VwZGF0ZShid19zdGF0ZSwgY3J0Y19zdGF0
ZSk7Cj4gKwo+ICAJCWludGVsX3BpcGVfY29uZmlnX3Nhbml0eV9jaGVjayhkZXZfcHJpdiwgY3J0
Y19zdGF0ZSk7Cj4gIAl9Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcnYuaAo+IGluZGV4IDQw
NDllMDNkMmMwZC4uNDdmNTUxNjAxYTA1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2ludGVsX2Rydi5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJ2LmgK
PiBAQCAtODg1LDYgKzg4NSw4IEBAIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlIHsKPiAgCj4gIAlz
dHJ1Y3QgaW50ZWxfY3J0Y193bV9zdGF0ZSB3bTsKPiAgCj4gKwl1MzIgZGF0YV9yYXRlW0k5MTVf
TUFYX1BMQU5FU107Cj4gKwo+ICAJLyogR2FtbWEgbW9kZSBwcm9ncmFtbWVkIG9uIHRoZSBwaXBl
ICovCj4gIAl1MzIgZ2FtbWFfbW9kZTsKPiAgCj4gLS0gCj4gMi4yMS4wCj4gCj4gX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBJbnRlbC1nZnggbWFpbGlu
ZyBsaXN0Cj4gSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4CgotLSAKTWF0dCBSb3Bl
cgpHcmFwaGljcyBTb2Z0d2FyZSBFbmdpbmVlcgpJb1RHIFBsYXRmb3JtIEVuYWJsaW5nICYgRGV2
ZWxvcG1lbnQKSW50ZWwgQ29ycG9yYXRpb24KKDkxNikgMzU2LTI3OTUKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJ
bnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1258E1B4A27
	for <lists+intel-gfx@lfdr.de>; Wed, 22 Apr 2020 18:19:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 71FD26EA30;
	Wed, 22 Apr 2020 16:19:30 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CD66F6EA30
 for <intel-gfx@lists.freedesktop.org>; Wed, 22 Apr 2020 16:19:29 +0000 (UTC)
IronPort-SDR: CEoVbSOW+vCntBvHlw0lW0HQ7QDUTuED9Y8BY6IrOE38xZFeS/lyAV8WAKQs3z5lW3pmlvxNXO
 pDAS+cZdn2UQ==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by fmsmga103.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 22 Apr 2020 09:19:29 -0700
IronPort-SDR: Ue/vOVIZ6ggNnk8Zl3MoLDZb7U1vxXSQhY8/8kuuYFRekgB3/XFY3GRMEynXW/3tPLKLvmYgtp
 EmBXxvq55eFg==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.73,304,1583222400"; d="scan'208";a="273933673"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga002.jf.intel.com with SMTP; 22 Apr 2020 09:19:27 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Wed, 22 Apr 2020 19:19:26 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 22 Apr 2020 19:19:15 +0300
Message-Id: <20200422161917.17389-4-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200422161917.17389-1-ville.syrjala@linux.intel.com>
References: <20200422161917.17389-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 4/6] drm/i915: s/pipe_config/crtc_state/ in
 pfit functions
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkZv
bGxvdyB0aGUgbmV3IG5hbWluZyBjb252ZW50aW9uIGFuZCBjYWxsIHRoZSBjcnRjIHN0YXRlCiJj
cnRjX3N0YXRlIiwgYW5kIHdoaWxlIGF0IGl0IGRyb3AgdGhlIHJlZHVuZGFudCBjcnRjIGFyZ3Vt
ZW50LgoKU2lnbmVkLW9mZi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4
LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ljbF9kc2kuYyAg
ICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jICAgIHwg
IDggKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5jICB8ICA0ICst
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2x2ZHMuYyAgfCAgNCArLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wYW5lbC5jIHwgOTMgKysrKysrKysrKyst
LS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wYW5lbC5oIHwg
IDYgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvdmx2X2RzaS5jICAgICB8ICA1ICst
CiA3IGZpbGVzIGNoYW5nZWQsIDU4IGluc2VydGlvbnMoKyksIDY1IGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pY2xfZHNpLmMKaW5kZXggNzNlYmQzODdmNTQ5Li5mYjky
OTFkZTU1ZDAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2Rz
aS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jCkBAIC0xNTI1
LDcgKzE1MjUsNiBAQCBzdGF0aWMgaW50IGdlbjExX2RzaV9jb21wdXRlX2NvbmZpZyhzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAlzdHJ1Y3QgaW50ZWxfZHNpICppbnRlbF9kc2kgPSBj
b250YWluZXJfb2YoZW5jb2Rlciwgc3RydWN0IGludGVsX2RzaSwKIAkJCQkJCSAgIGJhc2UpOwog
CXN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmludGVsX2Nvbm5lY3RvciA9IGludGVsX2RzaS0+YXR0
YWNoZWRfY29ubmVjdG9yOwotCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9faW50ZWxfY3J0
YyhwaXBlX2NvbmZpZy0+dWFwaS5jcnRjKTsKIAljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZSAqZml4ZWRfbW9kZSA9CiAJCQkJCWludGVsX2Nvbm5lY3Rvci0+cGFuZWwuZml4ZWRfbW9kZTsK
IAlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSA9CkBAIC0xNTMzLDcgKzE1
MzIsNyBAQCBzdGF0aWMgaW50IGdlbjExX2RzaV9jb21wdXRlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxf
ZW5jb2RlciAqZW5jb2RlciwKIAogCXBpcGVfY29uZmlnLT5vdXRwdXRfZm9ybWF0ID0gSU5URUxf
T1VUUFVUX0ZPUk1BVF9SR0I7CiAJaW50ZWxfZml4ZWRfcGFuZWxfbW9kZShmaXhlZF9tb2RlLCBh
ZGp1c3RlZF9tb2RlKTsKLQlpbnRlbF9wY2hfcGFuZWxfZml0dGluZyhjcnRjLCBwaXBlX2NvbmZp
ZywgY29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKTsKKwlpbnRlbF9wY2hfcGFuZWxfZml0dGluZyhw
aXBlX2NvbmZpZywgY29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKTsKIAogCWFkanVzdGVkX21vZGUt
PmZsYWdzID0gMDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kcC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCmluZGV4
IDkzMTJiZTY4NjQxMy4uYjlhNzYwMDEyYjNmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kcC5jCkBAIC0yMzQ1LDcgKzIzNDUsNiBAQCBpbnRlbF9kcF95Y2JjcjQyMF9jb25m
aWcoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwKIAljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlf
aW5mbyAqaW5mbyA9ICZjb25uZWN0b3ItPmRpc3BsYXlfaW5mbzsKIAljb25zdCBzdHJ1Y3QgZHJt
X2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSA9CiAJCSZjcnRjX3N0YXRlLT5ody5hZGp1c3Rl
ZF9tb2RlOwotCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0
YXRlLT51YXBpLmNydGMpOwogCiAJaWYgKCFkcm1fbW9kZV9pc180MjBfb25seShpbmZvLCBhZGp1
c3RlZF9tb2RlKSB8fAogCSAgICAhaW50ZWxfZHBfZ2V0X2NvbG9yaW1ldHJ5X3N0YXR1cyhpbnRl
bF9kcCkgfHwKQEAgLTIzNTQsNyArMjM1Myw3IEBAIGludGVsX2RwX3ljYmNyNDIwX2NvbmZpZyhz
dHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogCiAJY3J0Y19zdGF0ZS0+b3V0cHV0X2Zvcm1hdCA9
IElOVEVMX09VVFBVVF9GT1JNQVRfWUNCQ1I0MjA7CiAKLQlpbnRlbF9wY2hfcGFuZWxfZml0dGlu
ZyhjcnRjLCBjcnRjX3N0YXRlLCBEUk1fTU9ERV9TQ0FMRV9GVUxMU0NSRUVOKTsKKwlpbnRlbF9w
Y2hfcGFuZWxfZml0dGluZyhjcnRjX3N0YXRlLCBEUk1fTU9ERV9TQ0FMRV9GVUxMU0NSRUVOKTsK
IAogCXJldHVybiAwOwogfQpAQCAtMjUzNSw3ICsyNTM0LDYgQEAgaW50ZWxfZHBfY29tcHV0ZV9j
b25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJc3RydWN0IGludGVsX2RwICpp
bnRlbF9kcCA9IGVuY190b19pbnRlbF9kcChlbmNvZGVyKTsKIAlzdHJ1Y3QgaW50ZWxfbHNwY29u
ICpsc3Bjb24gPSBlbmNfdG9faW50ZWxfbHNwY29uKGVuY29kZXIpOwogCWVudW0gcG9ydCBwb3J0
ID0gZW5jb2Rlci0+cG9ydDsKLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0YyA9IHRvX2lu
dGVsX2NydGMocGlwZV9jb25maWctPnVhcGkuY3J0Yyk7CiAJc3RydWN0IGludGVsX2Nvbm5lY3Rv
ciAqaW50ZWxfY29ubmVjdG9yID0gaW50ZWxfZHAtPmF0dGFjaGVkX2Nvbm5lY3RvcjsKIAlzdHJ1
Y3QgaW50ZWxfZGlnaXRhbF9jb25uZWN0b3Jfc3RhdGUgKmludGVsX2Nvbm5fc3RhdGUgPQogCQl0
b19pbnRlbF9kaWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZShjb25uX3N0YXRlKTsKQEAgLTI1NjksMTAg
KzI1NjcsMTAgQEAgaW50ZWxfZHBfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXIsCiAJCQkJICAgICAgIGFkanVzdGVkX21vZGUpOwogCiAJCWlmIChIQVNfR01DSChk
ZXZfcHJpdikpCi0JCQlpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmcoaW50ZWxfY3J0YywgcGlwZV9j
b25maWcsCisJCQlpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmcocGlwZV9jb25maWcsCiAJCQkJCQkg
Y29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKTsKIAkJZWxzZQotCQkJaW50ZWxfcGNoX3BhbmVsX2Zp
dHRpbmcoaW50ZWxfY3J0YywgcGlwZV9jb25maWcsCisJCQlpbnRlbF9wY2hfcGFuZWxfZml0dGlu
ZyhwaXBlX2NvbmZpZywKIAkJCQkJCWNvbm5fc3RhdGUtPnNjYWxpbmdfbW9kZSk7CiAJfQogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkbWkuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5jCmluZGV4IDAwMGFjMGZjNGVk
Yy4uMjc1YTY3NmM3YjA4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2hkbWkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hk
bWkuYwpAQCAtMjMyNiw3ICsyMzI2LDYgQEAgaW50ZWxfaGRtaV95Y2JjcjQyMF9jb25maWcoc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKIAkJCSAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpjb25maWcpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1
KGNvbm5lY3Rvci0+ZGV2KTsKLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0YyA9IHRvX2lu
dGVsX2NydGMoY29uZmlnLT51YXBpLmNydGMpOwogCiAJaWYgKCFjb25uZWN0b3ItPnljYmNyXzQy
MF9hbGxvd2VkKSB7CiAJCWRybV9lcnIoJmk5MTUtPmRybSwKQEAgLTIzMzYsOCArMjMzNSw3IEBA
IGludGVsX2hkbWlfeWNiY3I0MjBfY29uZmlnKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0
b3IsCiAKIAljb25maWctPm91dHB1dF9mb3JtYXQgPSBJTlRFTF9PVVRQVVRfRk9STUFUX1lDQkNS
NDIwOwogCi0JaW50ZWxfcGNoX3BhbmVsX2ZpdHRpbmcoaW50ZWxfY3J0YywgY29uZmlnLAotCQkJ
CURSTV9NT0RFX1NDQUxFX0ZVTExTQ1JFRU4pOworCWludGVsX3BjaF9wYW5lbF9maXR0aW5nKGNv
bmZpZywgRFJNX01PREVfU0NBTEVfRlVMTFNDUkVFTik7CiAKIAlyZXR1cm4gdHJ1ZTsKIH0KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfbHZkcy5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9sdmRzLmMKaW5kZXggZmU1OTFmODIxNjNl
Li4yNzZkYjQxYjk1ZWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfbHZkcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfbHZk
cy5jCkBAIC00MzksMTAgKzQzOSwxMCBAQCBzdGF0aWMgaW50IGludGVsX2x2ZHNfY29tcHV0ZV9j
b25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmludGVsX2VuY29kZXIsCiAJaWYgKEhBU19QQ0hf
U1BMSVQoZGV2X3ByaXYpKSB7CiAJCXBpcGVfY29uZmlnLT5oYXNfcGNoX2VuY29kZXIgPSB0cnVl
OwogCi0JCWludGVsX3BjaF9wYW5lbF9maXR0aW5nKGludGVsX2NydGMsIHBpcGVfY29uZmlnLAor
CQlpbnRlbF9wY2hfcGFuZWxfZml0dGluZyhwaXBlX2NvbmZpZywKIAkJCQkJY29ubl9zdGF0ZS0+
c2NhbGluZ19tb2RlKTsKIAl9IGVsc2UgewotCQlpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmcoaW50
ZWxfY3J0YywgcGlwZV9jb25maWcsCisJCWludGVsX2dtY2hfcGFuZWxfZml0dGluZyhwaXBlX2Nv
bmZpZywKIAkJCQkJIGNvbm5fc3RhdGUtPnNjYWxpbmdfbW9kZSk7CiAKIAl9CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3BhbmVsLmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3BhbmVsLmMKaW5kZXggM2UzNzA4ODhlY2VmLi4zZWEx
NzA0Mjc3YTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
cGFuZWwuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3BhbmVsLmMK
QEAgLTE3NywyMyArMTc3LDIzIEBAIGludGVsX3BhbmVsX3ZidF9maXhlZF9tb2RlKHN0cnVjdCBp
bnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAogLyogYWRqdXN0ZWRfbW9kZSBoYXMgYmVlbiBw
cmVzZXQgdG8gYmUgdGhlIHBhbmVsJ3MgZml4ZWQgbW9kZSAqLwogdm9pZAotaW50ZWxfcGNoX3Bh
bmVsX2ZpdHRpbmcoc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMsCi0JCQlzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcsCitpbnRlbF9wY2hfcGFuZWxfZml0dGluZyhzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJCWludCBmaXR0aW5nX21vZGUpCiB7
Ci0JY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUgPSAmcGlwZV9j
b25maWctPmh3LmFkanVzdGVkX21vZGU7CisJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUg
KmFkanVzdGVkX21vZGUgPQorCQkmY3J0Y19zdGF0ZS0+aHcuYWRqdXN0ZWRfbW9kZTsKIAlpbnQg
eCwgeSwgd2lkdGgsIGhlaWdodDsKIAogCS8qIE5hdGl2ZSBtb2RlcyBkb24ndCBuZWVkIGZpdHRp
bmcgKi8KLQlpZiAoYWRqdXN0ZWRfbW9kZS0+Y3J0Y19oZGlzcGxheSA9PSBwaXBlX2NvbmZpZy0+
cGlwZV9zcmNfdyAmJgotCSAgICBhZGp1c3RlZF9tb2RlLT5jcnRjX3ZkaXNwbGF5ID09IHBpcGVf
Y29uZmlnLT5waXBlX3NyY19oICYmCi0JICAgIHBpcGVfY29uZmlnLT5vdXRwdXRfZm9ybWF0ICE9
IElOVEVMX09VVFBVVF9GT1JNQVRfWUNCQ1I0MjApCisJaWYgKGFkanVzdGVkX21vZGUtPmNydGNf
aGRpc3BsYXkgPT0gY3J0Y19zdGF0ZS0+cGlwZV9zcmNfdyAmJgorCSAgICBhZGp1c3RlZF9tb2Rl
LT5jcnRjX3ZkaXNwbGF5ID09IGNydGNfc3RhdGUtPnBpcGVfc3JjX2ggJiYKKwkgICAgY3J0Y19z
dGF0ZS0+b3V0cHV0X2Zvcm1hdCAhPSBJTlRFTF9PVVRQVVRfRk9STUFUX1lDQkNSNDIwKQogCQly
ZXR1cm47CiAKIAlzd2l0Y2ggKGZpdHRpbmdfbW9kZSkgewogCWNhc2UgRFJNX01PREVfU0NBTEVf
Q0VOVEVSOgotCQl3aWR0aCA9IHBpcGVfY29uZmlnLT5waXBlX3NyY193OwotCQloZWlnaHQgPSBw
aXBlX2NvbmZpZy0+cGlwZV9zcmNfaDsKKwkJd2lkdGggPSBjcnRjX3N0YXRlLT5waXBlX3NyY193
OworCQloZWlnaHQgPSBjcnRjX3N0YXRlLT5waXBlX3NyY19oOwogCQl4ID0gKGFkanVzdGVkX21v
ZGUtPmNydGNfaGRpc3BsYXkgLSB3aWR0aCArIDEpLzI7CiAJCXkgPSAoYWRqdXN0ZWRfbW9kZS0+
Y3J0Y192ZGlzcGxheSAtIGhlaWdodCArIDEpLzI7CiAJCWJyZWFrOwpAQCAtMjAyLDE4ICsyMDIs
MTggQEAgaW50ZWxfcGNoX3BhbmVsX2ZpdHRpbmcoc3RydWN0IGludGVsX2NydGMgKmludGVsX2Ny
dGMsCiAJCS8qIFNjYWxlIGJ1dCBwcmVzZXJ2ZSB0aGUgYXNwZWN0IHJhdGlvICovCiAJCXsKIAkJ
CXUzMiBzY2FsZWRfd2lkdGggPSBhZGp1c3RlZF9tb2RlLT5jcnRjX2hkaXNwbGF5Ci0JCQkJKiBw
aXBlX2NvbmZpZy0+cGlwZV9zcmNfaDsKLQkJCXUzMiBzY2FsZWRfaGVpZ2h0ID0gcGlwZV9jb25m
aWctPnBpcGVfc3JjX3cKKwkJCQkqIGNydGNfc3RhdGUtPnBpcGVfc3JjX2g7CisJCQl1MzIgc2Nh
bGVkX2hlaWdodCA9IGNydGNfc3RhdGUtPnBpcGVfc3JjX3cKIAkJCQkqIGFkanVzdGVkX21vZGUt
PmNydGNfdmRpc3BsYXk7CiAJCQlpZiAoc2NhbGVkX3dpZHRoID4gc2NhbGVkX2hlaWdodCkgeyAv
KiBwaWxsYXIgKi8KLQkJCQl3aWR0aCA9IHNjYWxlZF9oZWlnaHQgLyBwaXBlX2NvbmZpZy0+cGlw
ZV9zcmNfaDsKKwkJCQl3aWR0aCA9IHNjYWxlZF9oZWlnaHQgLyBjcnRjX3N0YXRlLT5waXBlX3Ny
Y19oOwogCQkJCWlmICh3aWR0aCAmIDEpCiAJCQkJCXdpZHRoKys7CiAJCQkJeCA9IChhZGp1c3Rl
ZF9tb2RlLT5jcnRjX2hkaXNwbGF5IC0gd2lkdGggKyAxKSAvIDI7CiAJCQkJeSA9IDA7CiAJCQkJ
aGVpZ2h0ID0gYWRqdXN0ZWRfbW9kZS0+Y3J0Y192ZGlzcGxheTsKIAkJCX0gZWxzZSBpZiAoc2Nh
bGVkX3dpZHRoIDwgc2NhbGVkX2hlaWdodCkgeyAvKiBsZXR0ZXIgKi8KLQkJCQloZWlnaHQgPSBz
Y2FsZWRfd2lkdGggLyBwaXBlX2NvbmZpZy0+cGlwZV9zcmNfdzsKKwkJCQloZWlnaHQgPSBzY2Fs
ZWRfd2lkdGggLyBjcnRjX3N0YXRlLT5waXBlX3NyY193OwogCQkJCWlmIChoZWlnaHQgJiAxKQog
CQkJCSAgICBoZWlnaHQrKzsKIAkJCQl5ID0gKGFkanVzdGVkX21vZGUtPmNydGNfdmRpc3BsYXkg
LSBoZWlnaHQgKyAxKSAvIDI7CkBAIC0yMzgsOSArMjM4LDkgQEAgaW50ZWxfcGNoX3BhbmVsX2Zp
dHRpbmcoc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMsCiAJCXJldHVybjsKIAl9CiAKLQlk
cm1fcmVjdF9pbml0KCZwaXBlX2NvbmZpZy0+cGNoX3BmaXQuZHN0LAorCWRybV9yZWN0X2luaXQo
JmNydGNfc3RhdGUtPnBjaF9wZml0LmRzdCwKIAkJICAgICAgeCwgeSwgd2lkdGgsIGhlaWdodCk7
Ci0JcGlwZV9jb25maWctPnBjaF9wZml0LmVuYWJsZWQgPSB0cnVlOworCWNydGNfc3RhdGUtPnBj
aF9wZml0LmVuYWJsZWQgPSB0cnVlOwogfQogCiBzdGF0aWMgdm9pZApAQCAtMjk5LDEzICsyOTks
MTQgQEAgc3RhdGljIHUzMiBwYW5lbF9maXR0ZXJfc2NhbGluZyh1MzIgc291cmNlLCB1MzIgdGFy
Z2V0KQogCXJldHVybiAoRkFDVE9SICogcmF0aW8gKyBGQUNUT1IvMikgLyBGQUNUT1I7CiB9CiAK
LXN0YXRpYyB2b2lkIGk5NjVfc2NhbGVfYXNwZWN0KHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpw
aXBlX2NvbmZpZywKK3N0YXRpYyB2b2lkIGk5NjVfc2NhbGVfYXNwZWN0KHN0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCQkJICAgICAgdTMyICpwZml0X2NvbnRyb2wpCiB7Ci0J
Y29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUgPSAmcGlwZV9jb25m
aWctPmh3LmFkanVzdGVkX21vZGU7CisJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFk
anVzdGVkX21vZGUgPQorCQkmY3J0Y19zdGF0ZS0+aHcuYWRqdXN0ZWRfbW9kZTsKIAl1MzIgc2Nh
bGVkX3dpZHRoID0gYWRqdXN0ZWRfbW9kZS0+Y3J0Y19oZGlzcGxheSAqCi0JCXBpcGVfY29uZmln
LT5waXBlX3NyY19oOwotCXUzMiBzY2FsZWRfaGVpZ2h0ID0gcGlwZV9jb25maWctPnBpcGVfc3Jj
X3cgKgorCQljcnRjX3N0YXRlLT5waXBlX3NyY19oOworCXUzMiBzY2FsZWRfaGVpZ2h0ID0gY3J0
Y19zdGF0ZS0+cGlwZV9zcmNfdyAqCiAJCWFkanVzdGVkX21vZGUtPmNydGNfdmRpc3BsYXk7CiAK
IAkvKiA5NjUrIGlzIGVhc3ksIGl0IGRvZXMgZXZlcnl0aGluZyBpbiBodyAqLwpAQCAtMzE1LDE4
ICszMTYsMTggQEAgc3RhdGljIHZvaWQgaTk2NV9zY2FsZV9hc3BlY3Qoc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCWVsc2UgaWYgKHNjYWxlZF93aWR0aCA8IHNjYWxlZF9o
ZWlnaHQpCiAJCSpwZml0X2NvbnRyb2wgfD0gUEZJVF9FTkFCTEUgfAogCQkJUEZJVF9TQ0FMSU5H
X0xFVFRFUjsKLQllbHNlIGlmIChhZGp1c3RlZF9tb2RlLT5jcnRjX2hkaXNwbGF5ICE9IHBpcGVf
Y29uZmlnLT5waXBlX3NyY193KQorCWVsc2UgaWYgKGFkanVzdGVkX21vZGUtPmNydGNfaGRpc3Bs
YXkgIT0gY3J0Y19zdGF0ZS0+cGlwZV9zcmNfdykKIAkJKnBmaXRfY29udHJvbCB8PSBQRklUX0VO
QUJMRSB8IFBGSVRfU0NBTElOR19BVVRPOwogfQogCi1zdGF0aWMgdm9pZCBpOXh4X3NjYWxlX2Fz
cGVjdChzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcsCitzdGF0aWMgdm9pZCBp
OXh4X3NjYWxlX2FzcGVjdChzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJ
CSAgICAgIHUzMiAqcGZpdF9jb250cm9sLCB1MzIgKnBmaXRfcGdtX3JhdGlvcywKIAkJCSAgICAg
IHUzMiAqYm9yZGVyKQogewotCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2Rl
ID0gJnBpcGVfY29uZmlnLT5ody5hZGp1c3RlZF9tb2RlOworCXN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlICphZGp1c3RlZF9tb2RlID0gJmNydGNfc3RhdGUtPmh3LmFkanVzdGVkX21vZGU7CiAJdTMy
IHNjYWxlZF93aWR0aCA9IGFkanVzdGVkX21vZGUtPmNydGNfaGRpc3BsYXkgKgotCQlwaXBlX2Nv
bmZpZy0+cGlwZV9zcmNfaDsKLQl1MzIgc2NhbGVkX2hlaWdodCA9IHBpcGVfY29uZmlnLT5waXBl
X3NyY193ICoKKwkJY3J0Y19zdGF0ZS0+cGlwZV9zcmNfaDsKKwl1MzIgc2NhbGVkX2hlaWdodCA9
IGNydGNfc3RhdGUtPnBpcGVfc3JjX3cgKgogCQlhZGp1c3RlZF9tb2RlLT5jcnRjX3ZkaXNwbGF5
OwogCXUzMiBiaXRzOwogCkBAIC0zMzgsMTEgKzMzOSwxMSBAQCBzdGF0aWMgdm9pZCBpOXh4X3Nj
YWxlX2FzcGVjdChzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcsCiAJaWYgKHNj
YWxlZF93aWR0aCA+IHNjYWxlZF9oZWlnaHQpIHsgLyogcGlsbGFyICovCiAJCWNlbnRyZV9ob3Jp
em9udGFsbHkoYWRqdXN0ZWRfbW9kZSwKIAkJCQkgICAgc2NhbGVkX2hlaWdodCAvCi0JCQkJICAg
IHBpcGVfY29uZmlnLT5waXBlX3NyY19oKTsKKwkJCQkgICAgY3J0Y19zdGF0ZS0+cGlwZV9zcmNf
aCk7CiAKIAkJKmJvcmRlciA9IExWRFNfQk9SREVSX0VOQUJMRTsKLQkJaWYgKHBpcGVfY29uZmln
LT5waXBlX3NyY19oICE9IGFkanVzdGVkX21vZGUtPmNydGNfdmRpc3BsYXkpIHsKLQkJCWJpdHMg
PSBwYW5lbF9maXR0ZXJfc2NhbGluZyhwaXBlX2NvbmZpZy0+cGlwZV9zcmNfaCwKKwkJaWYgKGNy
dGNfc3RhdGUtPnBpcGVfc3JjX2ggIT0gYWRqdXN0ZWRfbW9kZS0+Y3J0Y192ZGlzcGxheSkgewor
CQkJYml0cyA9IHBhbmVsX2ZpdHRlcl9zY2FsaW5nKGNydGNfc3RhdGUtPnBpcGVfc3JjX2gsCiAJ
CQkJCQkgICAgYWRqdXN0ZWRfbW9kZS0+Y3J0Y192ZGlzcGxheSk7CiAKIAkJCSpwZml0X3BnbV9y
YXRpb3MgfD0gKGJpdHMgPDwgUEZJVF9IT1JJWl9TQ0FMRV9TSElGVCB8CkBAIC0zNTQsMTEgKzM1
NSwxMSBAQCBzdGF0aWMgdm9pZCBpOXh4X3NjYWxlX2FzcGVjdChzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZSAqcGlwZV9jb25maWcsCiAJfSBlbHNlIGlmIChzY2FsZWRfd2lkdGggPCBzY2FsZWRfaGVp
Z2h0KSB7IC8qIGxldHRlciAqLwogCQljZW50cmVfdmVydGljYWxseShhZGp1c3RlZF9tb2RlLAog
CQkJCSAgc2NhbGVkX3dpZHRoIC8KLQkJCQkgIHBpcGVfY29uZmlnLT5waXBlX3NyY193KTsKKwkJ
CQkgIGNydGNfc3RhdGUtPnBpcGVfc3JjX3cpOwogCiAJCSpib3JkZXIgPSBMVkRTX0JPUkRFUl9F
TkFCTEU7Ci0JCWlmIChwaXBlX2NvbmZpZy0+cGlwZV9zcmNfdyAhPSBhZGp1c3RlZF9tb2RlLT5j
cnRjX2hkaXNwbGF5KSB7Ci0JCQliaXRzID0gcGFuZWxfZml0dGVyX3NjYWxpbmcocGlwZV9jb25m
aWctPnBpcGVfc3JjX3csCisJCWlmIChjcnRjX3N0YXRlLT5waXBlX3NyY193ICE9IGFkanVzdGVk
X21vZGUtPmNydGNfaGRpc3BsYXkpIHsKKwkJCWJpdHMgPSBwYW5lbF9maXR0ZXJfc2NhbGluZyhj
cnRjX3N0YXRlLT5waXBlX3NyY193LAogCQkJCQkJICAgIGFkanVzdGVkX21vZGUtPmNydGNfaGRp
c3BsYXkpOwogCiAJCQkqcGZpdF9wZ21fcmF0aW9zIHw9IChiaXRzIDw8IFBGSVRfSE9SSVpfU0NB
TEVfU0hJRlQgfApAQCAtMzc2LDE3ICszNzcsMTcgQEAgc3RhdGljIHZvaWQgaTl4eF9zY2FsZV9h
c3BlY3Qoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCX0KIH0KIAotdm9p
ZCBpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmcoc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMs
Ci0JCQkgICAgICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcsCit2b2lkIGlu
dGVsX2dtY2hfcGFuZWxfZml0dGluZyhzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0
ZSwKIAkJCSAgICAgIGludCBmaXR0aW5nX21vZGUpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2ID0gdG9faTkxNShpbnRlbF9jcnRjLT5iYXNlLmRldik7CisJc3RydWN0IGlu
dGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7CisJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShjcnRjLT5iYXNlLmRl
dik7CiAJdTMyIHBmaXRfY29udHJvbCA9IDAsIHBmaXRfcGdtX3JhdGlvcyA9IDAsIGJvcmRlciA9
IDA7Ci0Jc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUgPSAmcGlwZV9jb25m
aWctPmh3LmFkanVzdGVkX21vZGU7CisJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVk
X21vZGUgPSAmY3J0Y19zdGF0ZS0+aHcuYWRqdXN0ZWRfbW9kZTsKIAogCS8qIE5hdGl2ZSBtb2Rl
cyBkb24ndCBuZWVkIGZpdHRpbmcgKi8KLQlpZiAoYWRqdXN0ZWRfbW9kZS0+Y3J0Y19oZGlzcGxh
eSA9PSBwaXBlX2NvbmZpZy0+cGlwZV9zcmNfdyAmJgotCSAgICBhZGp1c3RlZF9tb2RlLT5jcnRj
X3ZkaXNwbGF5ID09IHBpcGVfY29uZmlnLT5waXBlX3NyY19oKQorCWlmIChhZGp1c3RlZF9tb2Rl
LT5jcnRjX2hkaXNwbGF5ID09IGNydGNfc3RhdGUtPnBpcGVfc3JjX3cgJiYKKwkgICAgYWRqdXN0
ZWRfbW9kZS0+Y3J0Y192ZGlzcGxheSA9PSBjcnRjX3N0YXRlLT5waXBlX3NyY19oKQogCQlnb3Rv
IG91dDsKIAogCXN3aXRjaCAoZml0dGluZ19tb2RlKSB7CkBAIC0zOTUsMTYgKzM5NiwxNiBAQCB2
b2lkIGludGVsX2dtY2hfcGFuZWxfZml0dGluZyhzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0
YywKIAkJICogRm9yIGNlbnRlcmVkIG1vZGVzLCB3ZSBoYXZlIHRvIGNhbGN1bGF0ZSBib3JkZXIg
d2lkdGhzICYKIAkJICogaGVpZ2h0cyBhbmQgbW9kaWZ5IHRoZSB2YWx1ZXMgcHJvZ3JhbW1lZCBp
bnRvIHRoZSBDUlRDLgogCQkgKi8KLQkJY2VudHJlX2hvcml6b250YWxseShhZGp1c3RlZF9tb2Rl
LCBwaXBlX2NvbmZpZy0+cGlwZV9zcmNfdyk7Ci0JCWNlbnRyZV92ZXJ0aWNhbGx5KGFkanVzdGVk
X21vZGUsIHBpcGVfY29uZmlnLT5waXBlX3NyY19oKTsKKwkJY2VudHJlX2hvcml6b250YWxseShh
ZGp1c3RlZF9tb2RlLCBjcnRjX3N0YXRlLT5waXBlX3NyY193KTsKKwkJY2VudHJlX3ZlcnRpY2Fs
bHkoYWRqdXN0ZWRfbW9kZSwgY3J0Y19zdGF0ZS0+cGlwZV9zcmNfaCk7CiAJCWJvcmRlciA9IExW
RFNfQk9SREVSX0VOQUJMRTsKIAkJYnJlYWs7CiAJY2FzZSBEUk1fTU9ERV9TQ0FMRV9BU1BFQ1Q6
CiAJCS8qIFNjYWxlIGJ1dCBwcmVzZXJ2ZSB0aGUgYXNwZWN0IHJhdGlvICovCiAJCWlmIChJTlRF
TF9HRU4oZGV2X3ByaXYpID49IDQpCi0JCQlpOTY1X3NjYWxlX2FzcGVjdChwaXBlX2NvbmZpZywg
JnBmaXRfY29udHJvbCk7CisJCQlpOTY1X3NjYWxlX2FzcGVjdChjcnRjX3N0YXRlLCAmcGZpdF9j
b250cm9sKTsKIAkJZWxzZQotCQkJaTl4eF9zY2FsZV9hc3BlY3QocGlwZV9jb25maWcsICZwZml0
X2NvbnRyb2wsCisJCQlpOXh4X3NjYWxlX2FzcGVjdChjcnRjX3N0YXRlLCAmcGZpdF9jb250cm9s
LAogCQkJCQkgICZwZml0X3BnbV9yYXRpb3MsICZib3JkZXIpOwogCQlicmVhazsKIAljYXNlIERS
TV9NT0RFX1NDQUxFX0ZVTExTQ1JFRU46CkBAIC00MTIsOCArNDEzLDggQEAgdm9pZCBpbnRlbF9n
bWNoX3BhbmVsX2ZpdHRpbmcoc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMsCiAJCSAqIEZ1
bGwgc2NhbGluZywgZXZlbiBpZiBpdCBjaGFuZ2VzIHRoZSBhc3BlY3QgcmF0aW8uCiAJCSAqIEZv
cnR1bmF0ZWx5IHRoaXMgaXMgYWxsIGRvbmUgZm9yIHVzIGluIGh3LgogCQkgKi8KLQkJaWYgKHBp
cGVfY29uZmlnLT5waXBlX3NyY19oICE9IGFkanVzdGVkX21vZGUtPmNydGNfdmRpc3BsYXkgfHwK
LQkJICAgIHBpcGVfY29uZmlnLT5waXBlX3NyY193ICE9IGFkanVzdGVkX21vZGUtPmNydGNfaGRp
c3BsYXkpIHsKKwkJaWYgKGNydGNfc3RhdGUtPnBpcGVfc3JjX2ggIT0gYWRqdXN0ZWRfbW9kZS0+
Y3J0Y192ZGlzcGxheSB8fAorCQkgICAgY3J0Y19zdGF0ZS0+cGlwZV9zcmNfdyAhPSBhZGp1c3Rl
ZF9tb2RlLT5jcnRjX2hkaXNwbGF5KSB7CiAJCQlwZml0X2NvbnRyb2wgfD0gUEZJVF9FTkFCTEU7
CiAJCQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSA0KQogCQkJCXBmaXRfY29udHJvbCB8PSBQ
RklUX1NDQUxJTkdfQVVUTzsKQEAgLTQzMyw3ICs0MzQsNyBAQCB2b2lkIGludGVsX2dtY2hfcGFu
ZWxfZml0dGluZyhzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxfY3J0YywKIAkvKiA5NjUrIHdhbnRz
IGZ1enp5IGZpdHRpbmcgKi8KIAkvKiBGSVhNRTogaGFuZGxlIG11bHRpcGxlIHBhbmVscyBieSBm
YWlsaW5nIGdyYWNlZnVsbHkgKi8KIAlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSA0KQotCQlw
Zml0X2NvbnRyb2wgfD0gUEZJVF9QSVBFKGludGVsX2NydGMtPnBpcGUpIHwgUEZJVF9GSUxURVJf
RlVaWlk7CisJCXBmaXRfY29udHJvbCB8PSBQRklUX1BJUEUoY3J0Yy0+cGlwZSkgfCBQRklUX0ZJ
TFRFUl9GVVpaWTsKIAogb3V0OgogCWlmICgocGZpdF9jb250cm9sICYgUEZJVF9FTkFCTEUpID09
IDApIHsKQEAgLTQ0MiwxMiArNDQzLDEyIEBAIHZvaWQgaW50ZWxfZ21jaF9wYW5lbF9maXR0aW5n
KHN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjLAogCX0KIAogCS8qIE1ha2Ugc3VyZSBwcmUt
OTY1IHNldCBkaXRoZXIgY29ycmVjdGx5IGZvciAxOGJwcCBwYW5lbHMuICovCi0JaWYgKElOVEVM
X0dFTihkZXZfcHJpdikgPCA0ICYmIHBpcGVfY29uZmlnLT5waXBlX2JwcCA9PSAxOCkKKwlpZiAo
SU5URUxfR0VOKGRldl9wcml2KSA8IDQgJiYgY3J0Y19zdGF0ZS0+cGlwZV9icHAgPT0gMTgpCiAJ
CXBmaXRfY29udHJvbCB8PSBQQU5FTF84VE82X0RJVEhFUl9FTkFCTEU7CiAKLQlwaXBlX2NvbmZp
Zy0+Z21jaF9wZml0LmNvbnRyb2wgPSBwZml0X2NvbnRyb2w7Ci0JcGlwZV9jb25maWctPmdtY2hf
cGZpdC5wZ21fcmF0aW9zID0gcGZpdF9wZ21fcmF0aW9zOwotCXBpcGVfY29uZmlnLT5nbWNoX3Bm
aXQubHZkc19ib3JkZXJfYml0cyA9IGJvcmRlcjsKKwljcnRjX3N0YXRlLT5nbWNoX3BmaXQuY29u
dHJvbCA9IHBmaXRfY29udHJvbDsKKwljcnRjX3N0YXRlLT5nbWNoX3BmaXQucGdtX3JhdGlvcyA9
IHBmaXRfcGdtX3JhdGlvczsKKwljcnRjX3N0YXRlLT5nbWNoX3BmaXQubHZkc19ib3JkZXJfYml0
cyA9IGJvcmRlcjsKIH0KIAogLyoqCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX3BhbmVsLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X3BhbmVsLmgKaW5kZXggMTFmMmY2YjYyOGQ4Li45MmRjYjc3Mzc2M2MgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcGFuZWwuaAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3BhbmVsLmgKQEAgLTI1LDExICsyNSw5IEBAIGludCBp
bnRlbF9wYW5lbF9pbml0KHN0cnVjdCBpbnRlbF9wYW5lbCAqcGFuZWwsCiB2b2lkIGludGVsX3Bh
bmVsX2Zpbmkoc3RydWN0IGludGVsX3BhbmVsICpwYW5lbCk7CiB2b2lkIGludGVsX2ZpeGVkX3Bh
bmVsX21vZGUoY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmZpeGVkX21vZGUsCiAJCQkg
ICAgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpOwotdm9pZCBpbnRlbF9w
Y2hfcGFuZWxfZml0dGluZyhzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKLQkJCSAgICAgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAordm9pZCBpbnRlbF9wY2hfcGFuZWxfZml0
dGluZyhzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJCSAgICAgaW50IGZp
dHRpbmdfbW9kZSk7Ci12b2lkIGludGVsX2dtY2hfcGFuZWxfZml0dGluZyhzdHJ1Y3QgaW50ZWxf
Y3J0YyAqY3J0YywKLQkJCSAgICAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZp
ZywKK3ZvaWQgaW50ZWxfZ21jaF9wYW5lbF9maXR0aW5nKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpjcnRjX3N0YXRlLAogCQkJICAgICAgaW50IGZpdHRpbmdfbW9kZSk7CiB2b2lkIGludGVsX3Bh
bmVsX3NldF9iYWNrbGlnaHRfYWNwaShjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAq
Y29ubl9zdGF0ZSwKIAkJCQkgICAgdTMyIGxldmVsLCB1MzIgbWF4KTsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvdmx2X2RzaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS92bHZfZHNpLmMKaW5kZXggNDZlMjg5NWQ5MTZkLi5mZTdjOWQzZWM0MTggMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvdmx2X2RzaS5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvdmx2X2RzaS5jCkBAIC0yNjcsNyArMjY3LDYgQEAg
c3RhdGljIGludCBpbnRlbF9kc2lfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXIsCiAJc3RydWN0IGludGVsX2RzaSAqaW50ZWxfZHNpID0gY29udGFpbmVyX29mKGVu
Y29kZXIsIHN0cnVjdCBpbnRlbF9kc2ksCiAJCQkJCQkgICBiYXNlKTsKIAlzdHJ1Y3QgaW50ZWxf
Y29ubmVjdG9yICppbnRlbF9jb25uZWN0b3IgPSBpbnRlbF9kc2ktPmF0dGFjaGVkX2Nvbm5lY3Rv
cjsKLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMocGlwZV9jb25maWct
PnVhcGkuY3J0Yyk7CiAJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmZpeGVkX21vZGUg
PSBpbnRlbF9jb25uZWN0b3ItPnBhbmVsLmZpeGVkX21vZGU7CiAJc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKmFkanVzdGVkX21vZGUgPSAmcGlwZV9jb25maWctPmh3LmFkanVzdGVkX21vZGU7CiAJ
aW50IHJldDsKQEAgLTI3OSwxMCArMjc4LDEwIEBAIHN0YXRpYyBpbnQgaW50ZWxfZHNpX2NvbXB1
dGVfY29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQlpbnRlbF9maXhlZF9w
YW5lbF9tb2RlKGZpeGVkX21vZGUsIGFkanVzdGVkX21vZGUpOwogCiAJCWlmIChIQVNfR01DSChk
ZXZfcHJpdikpCi0JCQlpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmcoY3J0YywgcGlwZV9jb25maWcs
CisJCQlpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmcocGlwZV9jb25maWcsCiAJCQkJCQkgY29ubl9z
dGF0ZS0+c2NhbGluZ19tb2RlKTsKIAkJZWxzZQotCQkJaW50ZWxfcGNoX3BhbmVsX2ZpdHRpbmco
Y3J0YywgcGlwZV9jb25maWcsCisJCQlpbnRlbF9wY2hfcGFuZWxfZml0dGluZyhwaXBlX2NvbmZp
ZywKIAkJCQkJCWNvbm5fc3RhdGUtPnNjYWxpbmdfbW9kZSk7CiAJfQogCi0tIAoyLjI0LjEKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBt
YWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

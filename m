Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 18931E5472
	for <lists+intel-gfx@lfdr.de>; Fri, 25 Oct 2019 21:37:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6710D6EB83;
	Fri, 25 Oct 2019 19:37:48 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8225B6EB84
 for <intel-gfx@lists.freedesktop.org>; Fri, 25 Oct 2019 19:37:47 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 25 Oct 2019 12:37:47 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,229,1569308400"; d="scan'208";a="198111265"
Received: from orsosgc001.ra.intel.com ([10.23.184.150])
 by fmsmga007.fm.intel.com with ESMTP; 25 Oct 2019 12:37:47 -0700
From: Umesh Nerlige Ramappa <umesh.nerlige.ramappa@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 25 Oct 2019 12:37:46 -0700
Message-Id: <20191025193746.47155-2-umesh.nerlige.ramappa@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191025193746.47155-1-umesh.nerlige.ramappa@intel.com>
References: <20191025193746.47155-1-umesh.nerlige.ramappa@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 2/2] drm/i915/tgl: Add perf support on TGL
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Chris Wilson <chris.p.wilson@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogTGlvbmVsIExhbmR3ZXJsaW4gPGxpb25lbC5nLmxhbmR3ZXJsaW5AaW50ZWwuY29tPgoK
VGhlIGRlc2lnbiBvZiB0aGUgT0EgdW5pdCBoYXMgYmVlbiBzcGxpdCBpbnRvIHNldmVyYWwgdW5p
dHMuIFdlIG5vdwpoYXZlIGEgZ2xvYmFsIHVuaXQgKE9BRykgYW5kIGEgcmVuZGVyIHNwZWNpZmlj
IHVuaXQgKE9BUikuIFRoaXMgbGVhZHMKdG8gc29tZSBjaGFuZ2VzIG9uIGhvdyB3ZSBwcm9ncmFt
IHRoaW5ncy4gU29tZSBkZXRhaWxzIDoKCk9BUjoKICAtIGhhcyBpdHMgb3duIHNldCBvZiBjb3Vu
dGVyIHJlZ2lzdGVycywgdGhleSBhcmUgcGVyLWNvbnRleHQKICAgIHNhdmVkL3Jlc3RvcmVkCiAg
LSBjb3VudGVycyBhcmUgbm90IHdyaXR0ZW4gdG8gdGhlIGNpcmN1bGFyIE9BIGJ1ZmZlcgogIC0g
YSBzbmFwc2hvdCBvZiB0aGUgY291bnRlcnMgY2FuIGJlIGFjcXVpcmVkIHdpdGgKICAgIE1JX1JF
Q09SRF9QRVJGX0NPVU5ULCBvciBhIHNpbmdsZSBjb3VudGVyIGNhbiBiZSByZWFkIHdpdGgKICAg
IE1JX1NUT1JFX1JFR0lTVEVSX01FTS4KCk9BRzoKICAtIGhhcyBnbG9iYWwgY291bnRlcnMgdGhh
dCBpbmNyZW1lbnQgYWNyb3NzIGNvbnRleHQgc3dpdGNoZXMKICAtIGNvdW50ZXJzIGFyZSB3cml0
dGVuIGludG8gdGhlIGNpcmN1bGFyIE9BIGJ1ZmZlciAoaWYgcmVxdWVzdGVkKQoKdjI6IEZpeCBj
aGVja3BhdGNoIHdhcm5pbmdzIG9uIGNvZGUgc3R5bGUgKEx1Y2FzKQp2MzogKFVtZXNoKQogIC0g
VXBkYXRlIHJlZ2lzdGVyIGZyb20gd2hpY2ggdGFpbCwgc3RhdHVzIGFuZCBoZWFkIGFyZSByZWFk
CiAgLSBVcGRhdGUgbG9naWMgdG8gc2FtcGxlIGNvbnRleHQgcmVwb3J0cwogIC0gVXBkYXRlIHdo
aXRlbGlzdCBtdXggYW5kIGIgY291bnRlciByZWdzCnY0OiBGaXggYSBidWcgd2hlbiB1cGRhdGlu
ZyBjb250ZXh0IGltYWdlIGZvciBuZXcgY29udGV4dHMgKFVtZXNoKQp2NTogU3F1YXNoIHBhdGNo
IGVuYWJsaW5nIHNhdmUvcmVzdG9yZSBvZiBjb3VudGVycyBpbnRvIGNvbnRleHQgaW1hZ2UKCiAg
ICBXZSB3YW50IHRoaXMgc28gd2UgY2FuIHByZWVtcHQgcGVyZm9ybWFuY2UgcXVlcmllcyBhbmQg
a2VlcCB0aGUKICAgIHN5c3RlbSByZXNwb25zaXZlIGV2ZW4gd2hlbiBsb25nIHJ1bm5pbmcgcXVl
cmllcyBhcmUgb25nb2luZy4gV2UKICAgIGF2b2lkIGRvaW5nIGl0IGZvciBhbGwgY29udGV4dHMu
CgogICAgLSB1c2UgTFJJIHRvIG1vZGlmeSBjb250ZXh0IGNvbnRyb2wgKENocmlzKQogICAgLSB1
c2UgTUFTS0VEX0ZJRUxEIHRvIHByb2dyYW0ganVzdCB0aGUgbWFza2VkIGJpdHMgKENocmlzKQog
ICAgLSBkaXNhYmxlIHNhdmUvcmVzdG9yZSBvZiBjb3VudGVycyBvbiBjbGVhbnVwIChDaHJpcykK
djY6IERvIG5vdCB1c2UgaW1wbGljaXQgcGFyYW1ldGVycyAoQ2hyaXMpCgpCU3BlYzogMjg3Mjcs
IDMwMDIxCgpTaWduZWQtb2ZmLWJ5OiBMaW9uZWwgTGFuZHdlcmxpbiA8bGlvbmVsLmcubGFuZHdl
cmxpbkBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IFVtZXNoIE5lcmxpZ2UgUmFtYXBwYSA8dW1l
c2gubmVybGlnZS5yYW1hcHBhQGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogTHVjYXMgRGUgTWFy
Y2hpIDxsdWNhcy5kZW1hcmNoaUBpbnRlbC5jb20+CkFja2VkLWJ5OiBDaHJpcyBXaWxzb24gPGNo
cmlzLnAud2lsc29uQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmls
ZSAgICAgICAgIHwgICAzICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuaCAg
IHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jICAgICAgfCAzNTEgKysr
KysrKysrKysrKysrKysrKysrKystLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgg
ICAgICAgfCAxMDMgKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L29hL2k5MTVfb2FfdGds
LmMgfCAxMjEgKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9vYS9pOTE1X29hX3RnbC5o
IHwgIDE2ICsrCiA2IGZpbGVzIGNoYW5nZWQsIDU2MCBpbnNlcnRpb25zKCspLCAzNSBkZWxldGlv
bnMoLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9vYS9pOTE1X29h
X3RnbC5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvb2EvaTkxNV9v
YV90Z2wuaAoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKaW5kZXggOWJmMWMwYjIwMzcwLi5jYzFjMzYwZjU4
OWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCkBAIC0yNDQsNyArMjQ0LDggQEAgaTkxNS15ICs9IFwK
IAlvYS9pOTE1X29hX2NmbGd0Mi5vIFwKIAlvYS9pOTE1X29hX2NmbGd0My5vIFwKIAlvYS9pOTE1
X29hX2NubC5vIFwKLQlvYS9pOTE1X29hX2ljbC5vCisJb2EvaTkxNV9vYV9pY2wubyBcCisJb2Ev
aTkxNV9vYV90Z2wubwogaTkxNS15ICs9IGk5MTVfcGVyZi5vCiAKICMgUG9zdC1tb3J0ZW0gZGVi
dWcgYW5kIEdQVSBoYW5nIHN0YXRlIGNhcHR1cmUKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2xyYy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJj
LmgKaW5kZXggOTlkYzU3NmE0ZTI1Li5iNmRhYWM3MTJjOWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2xyYy5oCkBAIC00Myw2ICs0Myw3IEBAIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3M7CiAj
ZGVmaW5lCSAgQ1RYX0NUUkxfRU5HSU5FX0NUWF9SRVNUT1JFX0lOSElCSVQJKDEgPDwgMCkKICNk
ZWZpbmUgICBDVFhfQ1RSTF9SU19DVFhfRU5BQkxFCQkoMSA8PCAxKQogI2RlZmluZQkgIENUWF9D
VFJMX0VOR0lORV9DVFhfU0FWRV9JTkhJQklUCSgxIDw8IDIpCisjZGVmaW5lCSAgR0VOMTJfQ1RY
X0NUUkxfT0FSX0NPTlRFWFRfRU5BQkxFCSgxIDw8IDgpCiAjZGVmaW5lIFJJTkdfQ09OVEVYVF9T
VEFUVVNfUFRSKGJhc2UpCQlfTU1JTygoYmFzZSkgKyAweDNhMCkKICNkZWZpbmUgUklOR19FWEVD
TElTVF9TUV9DT05URU5UUyhiYXNlKQkJX01NSU8oKGJhc2UpICsgMHg1MTApCiAjZGVmaW5lIFJJ
TkdfRVhFQ0xJU1RfQ09OVFJPTChiYXNlKQkJX01NSU8oKGJhc2UpICsgMHg1NTApCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcGVyZi5jCmluZGV4IGRlMGJkYjgwOGVlYy4uYWNkNDU5ZWExOTEwIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X3BlcmYuYwpAQCAtMjE4LDYgKzIxOCw3IEBACiAjaW5jbHVkZSAib2EvaTkx
NV9vYV9jZmxndDMuaCIKICNpbmNsdWRlICJvYS9pOTE1X29hX2NubC5oIgogI2luY2x1ZGUgIm9h
L2k5MTVfb2FfaWNsLmgiCisjaW5jbHVkZSAib2EvaTkxNV9vYV90Z2wuaCIKIAogLyogSFcgcmVx
dWlyZXMgdGhpcyB0byBiZSBhIHBvd2VyIG9mIHR3bywgYmV0d2VlbiAxMjhrIGFuZCAxNk0sIHRo
b3VnaCBkcml2ZXIKICAqIGlzIGN1cnJlbnRseSBnZW5lcmFsbHkgZGVzaWduZWQgYXNzdW1pbmcg
dGhlIGxhcmdlc3QgMTZNIHNpemUgaXMgdXNlZCBzdWNoCkBAIC0yOTQsNiArMjk1LDcgQEAgc3Rh
dGljIHUzMiBpOTE1X3BlcmZfc3RyZWFtX3BhcmFub2lkID0gdHJ1ZTsKIAogLyogT24gR2VuOCsg
YXV0b21hdGljYWxseSB0cmlnZ2VyZWQgT0EgcmVwb3J0cyBpbmNsdWRlIGEgJ3JlYXNvbicgZmll
bGQuLi4gKi8KICNkZWZpbmUgT0FSRVBPUlRfUkVBU09OX01BU0sgICAgICAgICAgIDB4M2YKKyNk
ZWZpbmUgT0FSRVBPUlRfUkVBU09OX01BU0tfRVhURU5ERUQgIDB4N2YKICNkZWZpbmUgT0FSRVBP
UlRfUkVBU09OX1NISUZUICAgICAgICAgIDE5CiAjZGVmaW5lIE9BUkVQT1JUX1JFQVNPTl9USU1F
UiAgICAgICAgICAoMTw8MCkKICNkZWZpbmUgT0FSRVBPUlRfUkVBU09OX0NUWF9TV0lUQ0ggICAg
ICgxPDwzKQpAQCAtMzM5LDYgKzM0MSwxMCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGk5MTVfb2Ff
Zm9ybWF0IGdlbjhfcGx1c19vYV9mb3JtYXRzW0k5MTVfT0FfRk9STUFUX01BWF0gPSB7CiAJW0k5
MTVfT0FfRk9STUFUX0M0X0I4XQkJICAgID0geyA3LCA2NCB9LAogfTsKIAorc3RhdGljIGNvbnN0
IHN0cnVjdCBpOTE1X29hX2Zvcm1hdCBnZW4xMl9vYV9mb3JtYXRzW0k5MTVfT0FfRk9STUFUX01B
WF0gPSB7CisJW0k5MTVfT0FfRk9STUFUX0EzMnU0MF9BNHUzMl9COF9DOF0gPSB7IDUsIDI1NiB9
LAorfTsKKwogI2RlZmluZSBTQU1QTEVfT0FfUkVQT1JUICAgICAgKDE8PDApCiAKIC8qKgpAQCAt
NDE5LDYgKzQyNSwxNCBAQCBzdGF0aWMgdm9pZCBmcmVlX29hX2NvbmZpZ19ibyhzdHJ1Y3QgaTkx
NV9vYV9jb25maWdfYm8gKm9hX2JvKQogCWtmcmVlKG9hX2JvKTsKIH0KIAorc3RhdGljIHUzMiBn
ZW4xMl9vYV9od190YWlsX3JlYWQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKK3sK
KwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSBzdHJlYW0tPnVuY29yZTsKKworCXJldHVy
biBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIEdFTjEyX09BR19PQVRBSUxQVFIpICYKKwkgICAg
ICAgR0VOMTJfT0FHX09BVEFJTFBUUl9NQVNLOworfQorCiBzdGF0aWMgdTMyIGdlbjhfb2FfaHdf
dGFpbF9yZWFkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiB7CiAJc3RydWN0IGlu
dGVsX3VuY29yZSAqdW5jb3JlID0gc3RyZWFtLT51bmNvcmU7CkBAIC01MzksNyArNTUzLDcgQEAg
c3RhdGljIGJvb2wgb2FfYnVmZmVyX2NoZWNrX3VubG9ja2VkKHN0cnVjdCBpOTE1X3BlcmZfc3Ry
ZWFtICpzdHJlYW0pCiAJCQkJYWdpbmdfdGFpbCA9IGh3X3RhaWw7CiAJCQlzdHJlYW0tPm9hX2J1
ZmZlci5hZ2luZ190aW1lc3RhbXAgPSBub3c7CiAJCX0gZWxzZSB7Ci0JCQlEUk1fRVJST1IoIkln
bm9yaW5nIHNwdXJpb3VzIG91dCBvZiByYW5nZSBPQSBidWZmZXIgdGFpbCBwb2ludGVyID0gJXVc
biIsCisJCQlEUk1fRVJST1IoIklnbm9yaW5nIHNwdXJpb3VzIG91dCBvZiByYW5nZSBPQSBidWZm
ZXIgdGFpbCBwb2ludGVyID0gJXhcbiIsCiAJCQkJICBod190YWlsKTsKIAkJfQogCX0KQEAgLTc0
MSw3ICs3NTUsOSBAQCBzdGF0aWMgaW50IGdlbjhfYXBwZW5kX29hX3JlcG9ydHMoc3RydWN0IGk5
MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKIAkJICogaXQgdG8gdXNlcnNwYWNlLi4uCiAJCSAqLwog
CQlyZWFzb24gPSAoKHJlcG9ydDMyWzBdID4+IE9BUkVQT1JUX1JFQVNPTl9TSElGVCkgJgotCQkJ
ICBPQVJFUE9SVF9SRUFTT05fTUFTSyk7CisJCQkgIChJU19HRU4oc3RyZWFtLT5wZXJmLT5pOTE1
LCAxMikgPyAKKwkJCSAgIE9BUkVQT1JUX1JFQVNPTl9NQVNLX0VYVEVOREVEIDogCisJCQkgICBP
QVJFUE9SVF9SRUFTT05fTUFTSykpOwogCQlpZiAocmVhc29uID09IDApIHsKIAkJCWlmIChfX3Jh
dGVsaW1pdCgmc3RyZWFtLT5wZXJmLT5zcHVyaW91c19yZXBvcnRfcnMpKQogCQkJCURSTV9OT1RF
KCJTa2lwcGluZyBzcHVyaW91cywgaW52YWxpZCBPQSByZXBvcnRcbiIpOwpAQCAtNzU4LDcgKzc3
NCw4IEBAIHN0YXRpYyBpbnQgZ2VuOF9hcHBlbmRfb2FfcmVwb3J0cyhzdHJ1Y3QgaTkxNV9wZXJm
X3N0cmVhbSAqc3RyZWFtLAogCQkgKiBOb3RlOiB0aGF0IHdlIGRvbid0IGNsZWFyIHRoZSB2YWxp
ZF9jdHhfYml0IHNvIHVzZXJzcGFjZSBjYW4KIAkJICogdW5kZXJzdGFuZCB0aGF0IHRoZSBJRCBo
YXMgYmVlbiBzcXVhc2hlZCBieSB0aGUga2VybmVsLgogCQkgKi8KLQkJaWYgKCEocmVwb3J0MzJb
MF0gJiBzdHJlYW0tPnBlcmYtPmdlbjhfdmFsaWRfY3R4X2JpdCkpCisJCWlmICghKHJlcG9ydDMy
WzBdICYgc3RyZWFtLT5wZXJmLT5nZW44X3ZhbGlkX2N0eF9iaXQpICYmCisJCSAgICBJTlRFTF9H
RU4oc3RyZWFtLT5wZXJmLT5pOTE1KSA8PSAxMSkKIAkJCWN0eF9pZCA9IHJlcG9ydDMyWzJdID0g
SU5WQUxJRF9DVFhfSUQ7CiAKIAkJLyoKQEAgLTgyNSw2ICs4NDIsMTEgQEAgc3RhdGljIGludCBn
ZW44X2FwcGVuZF9vYV9yZXBvcnRzKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCiAJ
fQogCiAJaWYgKHN0YXJ0X29mZnNldCAhPSAqb2Zmc2V0KSB7CisJCWk5MTVfcmVnX3Qgb2FoZWFk
cHRyOworCisJCW9haGVhZHB0ciA9IElTX0dFTihzdHJlYW0tPnBlcmYtPmk5MTUsIDEyKSA/CisJ
CQkgICAgR0VOMTJfT0FHX09BSEVBRFBUUiA6IEdFTjhfT0FIRUFEUFRSOworCiAJCXNwaW5fbG9j
a19pcnFzYXZlKCZzdHJlYW0tPm9hX2J1ZmZlci5wdHJfbG9jaywgZmxhZ3MpOwogCiAJCS8qCkBA
IC04MzIsOSArODU0LDggQEAgc3RhdGljIGludCBnZW44X2FwcGVuZF9vYV9yZXBvcnRzKHN0cnVj
dCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCiAJCSAqIHJlbGF0aXZlIHRvIG9hX2J1Zl9iYXNl
IHNvIHB1dCBiYWNrIGhlcmUuLi4KIAkJICovCiAJCWhlYWQgKz0gZ3R0X29mZnNldDsKLQotCQlp
bnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLCBHRU44X09BSEVBRFBUUiwKLQkJCQkgICBoZWFkICYg
R0VOOF9PQUhFQURQVFJfTUFTSyk7CisJCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsIG9haGVh
ZHB0ciwKKwkJCQkgICBoZWFkICYgR0VOMTJfT0FHX09BSEVBRFBUUl9NQVNLKTsKIAkJc3RyZWFt
LT5vYV9idWZmZXIuaGVhZCA9IGhlYWQ7CiAKIAkJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmc3Ry
ZWFtLT5vYV9idWZmZXIucHRyX2xvY2ssIGZsYWdzKTsKQEAgLTg3MCwxMiArODkxLDE2IEBAIHN0
YXRpYyBpbnQgZ2VuOF9vYV9yZWFkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCiB7
CiAJc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlID0gc3RyZWFtLT51bmNvcmU7CiAJdTMyIG9h
c3RhdHVzOworCWk5MTVfcmVnX3Qgb2FzdGF0dXNfcmVnOwogCWludCByZXQ7CiAKIAlpZiAoV0FS
Tl9PTighc3RyZWFtLT5vYV9idWZmZXIudmFkZHIpKQogCQlyZXR1cm4gLUVJTzsKIAotCW9hc3Rh
dHVzID0gaW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBHRU44X09BU1RBVFVTKTsKKwlvYXN0YXR1
c19yZWcgPSBJU19HRU4oc3RyZWFtLT5wZXJmLT5pOTE1LCAxMikgPworCQkgICAgICAgR0VOMTJf
T0FHX09BU1RBVFVTIDogR0VOOF9PQVNUQVRVUzsKKworCW9hc3RhdHVzID0gaW50ZWxfdW5jb3Jl
X3JlYWQodW5jb3JlLCBvYXN0YXR1c19yZWcpOwogCiAJLyoKIAkgKiBXZSB0cmVhdCBPQUJVRkZF
Ul9PVkVSRkxPVyBhcyBhIHNpZ25pZmljYW50IGVycm9yOgpAQCAtOTA3LDcgKzkzMiw3IEBAIHN0
YXRpYyBpbnQgZ2VuOF9vYV9yZWFkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCiAJ
CSAqIE5vdGU6IC5vYV9lbmFibGUoKSBpcyBleHBlY3RlZCB0byByZS1pbml0IHRoZSBvYWJ1ZmZl
ciBhbmQKIAkJICogcmVzZXQgR0VOOF9PQVNUQVRVUyBmb3IgdXMKIAkJICovCi0JCW9hc3RhdHVz
ID0gaW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBHRU44X09BU1RBVFVTKTsKKwkJb2FzdGF0dXMg
PSBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIG9hc3RhdHVzX3JlZyk7CiAJfQogCiAJaWYgKG9h
c3RhdHVzICYgR0VOOF9PQVNUQVRVU19SRVBPUlRfTE9TVCkgewpAQCAtOTE1LDcgKzk0MCw3IEBA
IHN0YXRpYyBpbnQgZ2VuOF9vYV9yZWFkKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0s
CiAJCQkJICAgICAgIERSTV9JOTE1X1BFUkZfUkVDT1JEX09BX1JFUE9SVF9MT1NUKTsKIAkJaWYg
KHJldCkKIAkJCXJldHVybiByZXQ7Ci0JCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsIEdFTjhf
T0FTVEFUVVMsCisJCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsIG9hc3RhdHVzX3JlZywKIAkJ
CQkgICBvYXN0YXR1cyAmIH5HRU44X09BU1RBVFVTX1JFUE9SVF9MT1NUKTsKIAl9CiAKQEAgLTE0
ODksNiArMTUxNCw2MyBAQCBzdGF0aWMgdm9pZCBnZW44X2luaXRfb2FfYnVmZmVyKHN0cnVjdCBp
OTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiAJc3RyZWFtLT5wb2xsaW4gPSBmYWxzZTsKIH0KIAor
c3RhdGljIHZvaWQgZ2VuMTJfaW5pdF9vYV9idWZmZXIoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0g
KnN0cmVhbSkKK3sKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSBzdHJlYW0tPnVuY29y
ZTsKKwl1MzIgZ3R0X29mZnNldCA9IGk5MTVfZ2d0dF9vZmZzZXQoc3RyZWFtLT5vYV9idWZmZXIu
dm1hKTsKKwl1bnNpZ25lZCBsb25nIGZsYWdzOworCisJc3Bpbl9sb2NrX2lycXNhdmUoJnN0cmVh
bS0+b2FfYnVmZmVyLnB0cl9sb2NrLCBmbGFncyk7CisKKwlpbnRlbF91bmNvcmVfd3JpdGUodW5j
b3JlLCBHRU4xMl9PQUdfT0FTVEFUVVMsIDApOworCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUs
IEdFTjEyX09BR19PQUhFQURQVFIsCisJCQkgICBndHRfb2Zmc2V0ICYgR0VOMTJfT0FHX09BSEVB
RFBUUl9NQVNLKTsKKwlzdHJlYW0tPm9hX2J1ZmZlci5oZWFkID0gZ3R0X29mZnNldDsKKworCS8q
CisJICogUFJNIHNheXM6CisJICoKKwkgKiAgIlRoaXMgTU1JTyBtdXN0IGJlIHNldCBiZWZvcmUg
dGhlIE9BVEFJTFBUUgorCSAqICByZWdpc3RlciBhbmQgYWZ0ZXIgdGhlIE9BSEVBRFBUUiByZWdp
c3Rlci4gVGhpcyBpcworCSAqICB0byBlbmFibGUgcHJvcGVyIGZ1bmN0aW9uYWxpdHkgb2YgdGhl
IG92ZXJmbG93CisJICogIGJpdC4iCisJICovCisJaW50ZWxfdW5jb3JlX3dyaXRlKHVuY29yZSwg
R0VOMTJfT0FHX09BQlVGRkVSLCBndHRfb2Zmc2V0IHwKKwkJCSAgIE9BQlVGRkVSX1NJWkVfMTZN
IHwgR0VOOF9PQUJVRkZFUl9NRU1fU0VMRUNUX0dHVFQpOworCWludGVsX3VuY29yZV93cml0ZSh1
bmNvcmUsIEdFTjEyX09BR19PQVRBSUxQVFIsCisJCQkgICBndHRfb2Zmc2V0ICYgR0VOMTJfT0FH
X09BVEFJTFBUUl9NQVNLKTsKKworCS8qIE1hcmsgdGhhdCB3ZSBuZWVkIHVwZGF0ZWQgdGFpbCBw
b2ludGVycyB0byByZWFkIGZyb20uLi4gKi8KKwlzdHJlYW0tPm9hX2J1ZmZlci50YWlsc1swXS5v
ZmZzZXQgPSBJTlZBTElEX1RBSUxfUFRSOworCXN0cmVhbS0+b2FfYnVmZmVyLnRhaWxzWzFdLm9m
ZnNldCA9IElOVkFMSURfVEFJTF9QVFI7CisKKwkvKgorCSAqIFJlc2V0IHN0YXRlIHVzZWQgdG8g
cmVjb2duaXNlIGNvbnRleHQgc3dpdGNoZXMsIGFmZmVjdGluZyB3aGljaAorCSAqIHJlcG9ydHMg
d2Ugd2lsbCBmb3J3YXJkIHRvIHVzZXJzcGFjZSB3aGlsZSBmaWx0ZXJpbmcgZm9yIGEgc2luZ2xl
CisJICogY29udGV4dC4KKwkgKi8KKwlzdHJlYW0tPm9hX2J1ZmZlci5sYXN0X2N0eF9pZCA9IElO
VkFMSURfQ1RYX0lEOworCisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmc3RyZWFtLT5vYV9idWZm
ZXIucHRyX2xvY2ssIGZsYWdzKTsKKworCS8qCisJICogTkI6IGFsdGhvdWdoIHRoZSBPQSBidWZm
ZXIgd2lsbCBpbml0aWFsbHkgYmUgYWxsb2NhdGVkCisJICogemVyb2VkIHZpYSBzaG1mcyAoYW5k
IHNvIHRoaXMgbWVtc2V0IGlzIHJlZHVuZGFudCB3aGVuCisJICogZmlyc3QgYWxsb2NhdGluZyks
IHdlIG1heSByZS1pbml0IHRoZSBPQSBidWZmZXIsIGVpdGhlcgorCSAqIHdoZW4gcmUtZW5hYmxp
bmcgYSBzdHJlYW0gb3IgaW4gZXJyb3IvcmVzZXQgcGF0aHMuCisJICoKKwkgKiBUaGUgcmVhc29u
IHdlIGNsZWFyIHRoZSBidWZmZXIgZm9yIGVhY2ggcmUtaW5pdCBpcyBmb3IgdGhlCisJICogc2Fu
aXR5IGNoZWNrIGluIGdlbjhfYXBwZW5kX29hX3JlcG9ydHMoKSB0aGF0IGxvb2tzIGF0IHRoZQor
CSAqIHJlYXNvbiBmaWVsZCB0byBtYWtlIHN1cmUgaXQncyBub24temVybyB3aGljaCByZWxpZXMg
b24KKwkgKiB0aGUgYXNzdW1wdGlvbiB0aGF0IG5ldyByZXBvcnRzIGFyZSBiZWluZyB3cml0dGVu
IHRvIHplcm9lZAorCSAqIG1lbW9yeS4uLgorCSAqLworCW1lbXNldChzdHJlYW0tPm9hX2J1ZmZl
ci52YWRkciwgMCwKKwkgICAgICAgc3RyZWFtLT5vYV9idWZmZXIudm1hLT5zaXplKTsKKworCXN0
cmVhbS0+cG9sbGluID0gZmFsc2U7Cit9CisKIHN0YXRpYyBpbnQgYWxsb2Nfb2FfYnVmZmVyKHN0
cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiB7CiAJc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3QgKmJvOwpAQCAtMTk5MSwxMiArMjA3MywyMCBAQCBnZW44X3VwZGF0ZV9yZWdfc3RhdGVf
dW5sb2NrZWQoY29uc3Qgc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAogCXUzMiAqcmVnX3N0YXRl
ID0gY2UtPmxyY19yZWdfc3RhdGU7CiAJaW50IGk7CiAKLQlyZWdfc3RhdGVbY3R4X29hY3R4Y3Ry
bCArIDFdID0KLQkJKHN0cmVhbS0+cGVyaW9kX2V4cG9uZW50IDw8IEdFTjhfT0FfVElNRVJfUEVS
SU9EX1NISUZUKSB8Ci0JCShzdHJlYW0tPnBlcmlvZGljID8gR0VOOF9PQV9USU1FUl9FTkFCTEUg
OiAwKSB8Ci0JCUdFTjhfT0FfQ09VTlRFUl9SRVNVTUU7CisJaWYgKElTX0dFTihzdHJlYW0tPnBl
cmYtPmk5MTUsIDEyKSkgeworCQl1MzIgZm9ybWF0ID0gc3RyZWFtLT5vYV9idWZmZXIuZm9ybWF0
OwogCi0JZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUoZmxleF9yZWdzKTsgaSsrKQorCQlyZWdf
c3RhdGVbY3R4X29hY3R4Y3RybCArIDFdID0KKwkJCShmb3JtYXQgPDwgR0VOMTJfT0FSX09BQ09O
VFJPTF9DT1VOVEVSX0ZPUk1BVF9TSElGVCkgfAorCQkJKHN0cmVhbS0+b2FfY29uZmlnID8gR0VO
MTJfT0FSX09BQ09OVFJPTF9DT1VOVEVSX0VOQUJMRSA6IDApOworCX0gZWxzZSB7CisJCXJlZ19z
dGF0ZVtjdHhfb2FjdHhjdHJsICsgMV0gPQorCQkJKHN0cmVhbS0+cGVyaW9kX2V4cG9uZW50IDw8
IEdFTjhfT0FfVElNRVJfUEVSSU9EX1NISUZUKSB8CisJCQkoc3RyZWFtLT5wZXJpb2RpYyA/IEdF
TjhfT0FfVElNRVJfRU5BQkxFIDogMCkgfAorCQkJR0VOOF9PQV9DT1VOVEVSX1JFU1VNRTsKKwl9
CisKKwlmb3IgKGkgPSAwOyAhIWN0eF9mbGV4ZXUwICYmIGkgPCBBUlJBWV9TSVpFKGZsZXhfcmVn
cyk7IGkrKykKIAkJcmVnX3N0YXRlW2N0eF9mbGV4ZXUwICsgaSAqIDIgKyAxXSA9CiAJCQlvYV9j
b25maWdfZmxleF9yZWcoc3RyZWFtLT5vYV9jb25maWcsIGZsZXhfcmVnc1tpXSk7CiAKQEAgLTIx
MjksNiArMjIxOSwzNiBAQCBzdGF0aWMgaW50IGdlbjhfY29uZmlndXJlX2NvbnRleHQoc3RydWN0
IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwKIAlyZXR1cm4gZXJyOwogfQogCitzdGF0aWMgaW50IGdl
bjEyX2VtaXRfb2FyX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsIGJvb2wgZW5hYmxl
KQoreworCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOworCXUzMiAqY3M7CisJaW50IGVyciA9IDA7
CisKKwlycSA9IGk5MTVfcmVxdWVzdF9jcmVhdGUoY2UpOworCWlmIChJU19FUlIocnEpKQorCQly
ZXR1cm4gUFRSX0VSUihycSk7CisKKwljcyA9IGludGVsX3JpbmdfYmVnaW4ocnEsIDQpOworCWlm
IChJU19FUlIoY3MpKSB7CisJCWVyciA9IFBUUl9FUlIoY3MpOworCQlnb3RvIG91dDsKKwl9CisK
KwkqY3MrKyA9IE1JX0xPQURfUkVHSVNURVJfSU1NKDEpOworCSpjcysrID0gaTkxNV9tbWlvX3Jl
Z19vZmZzZXQoUklOR19DT05URVhUX0NPTlRST0woY2UtPmVuZ2luZS0+bW1pb19iYXNlKSk7CisJ
KmNzKysgPSBfTUFTS0VEX0ZJRUxEKEdFTjEyX0NUWF9DVFJMX09BUl9DT05URVhUX0VOQUJMRSwK
KwkJCSAgICAgIGVuYWJsZSA/IEdFTjEyX0NUWF9DVFJMX09BUl9DT05URVhUX0VOQUJMRSA6IDAp
OworCSpjcysrID0gTUlfTk9PUDsKKworCWludGVsX3JpbmdfYWR2YW5jZShycSwgY3MpOworCitv
dXQ6CisJaTkxNV9yZXF1ZXN0X2FkZChycSk7CisKKwlyZXR1cm4gZXJyOworfQorCiAvKgogICog
TWFuYWdlcyB1cGRhdGluZyB0aGUgcGVyLWNvbnRleHQgYXNwZWN0cyBvZiB0aGUgT0Egc3RyZWFt
CiAgKiBjb25maWd1cmF0aW9uIGFjcm9zcyBhbGwgY29udGV4dHMuCkBAIC0yMTUzLDggKzIyNzMs
OCBAQCBzdGF0aWMgaW50IGdlbjhfY29uZmlndXJlX2NvbnRleHQoc3RydWN0IGk5MTVfZ2VtX2Nv
bnRleHQgKmN0eCwKICAqCiAgKiBOb3RlOiBpdCdzIG9ubHkgdGhlIFJDUy9SZW5kZXIgY29udGV4
dCB0aGF0IGhhcyBhbnkgT0Egc3RhdGUuCiAgKi8KLXN0YXRpYyBpbnQgZ2VuOF9jb25maWd1cmVf
YWxsX2NvbnRleHRzKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCi0JCQkJICAgICAg
IGNvbnN0IHN0cnVjdCBpOTE1X29hX2NvbmZpZyAqb2FfY29uZmlnKQorc3RhdGljIGludCBscmNf
Y29uZmlndXJlX2FsbF9jb250ZXh0cyhzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAor
CQkJCSAgICAgIGNvbnN0IHN0cnVjdCBpOTE1X29hX2NvbmZpZyAqb2FfY29uZmlnKQogewogCXN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gc3RyZWFtLT5wZXJmLT5pOTE1OwogCS8qIFRo
ZSBNTUlPIG9mZnNldHMgZm9yIEZsZXggRVUgcmVnaXN0ZXJzIGFyZW4ndCBjb250aWd1b3VzICov
CkBAIC0yMTY2LDExICsyMjg2LDkgQEAgc3RhdGljIGludCBnZW44X2NvbmZpZ3VyZV9hbGxfY29u
dGV4dHMoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKIAkJCUNUWF9SX1BXUl9DTEtf
U1RBVEUsCiAJCX0sCiAJCXsKLQkJCUdFTjhfT0FDVFhDT05UUk9MLAorCQkJSVNfR0VOKGk5MTUs
IDEyKSA/CisJCQlHRU4xMl9PQVJfT0FDT05UUk9MIDogR0VOOF9PQUNUWENPTlRST0wsCiAJCQlz
dHJlYW0tPnBlcmYtPmN0eF9vYWN0eGN0cmxfb2Zmc2V0ICsgMSwKLQkJCSgoc3RyZWFtLT5wZXJp
b2RfZXhwb25lbnQgPDwgR0VOOF9PQV9USU1FUl9QRVJJT0RfU0hJRlQpIHwKLQkJCSAoc3RyZWFt
LT5wZXJpb2RpYyA/IEdFTjhfT0FfVElNRVJfRU5BQkxFIDogMCkgfAotCQkJIEdFTjhfT0FfQ09V
TlRFUl9SRVNVTUUpCiAJCX0sCiAJCXsgRVVfUEVSRl9DTlRMMCwgY3R4X2ZsZXhldU4oMCkgfSwK
IAkJeyBFVV9QRVJGX0NOVEwxLCBjdHhfZmxleGV1TigxKSB9LApAQCAtMjE4Myw5ICsyMzAxLDIz
IEBAIHN0YXRpYyBpbnQgZ2VuOF9jb25maWd1cmVfYWxsX2NvbnRleHRzKHN0cnVjdCBpOTE1X3Bl
cmZfc3RyZWFtICpzdHJlYW0sCiAjdW5kZWYgY3R4X2ZsZXhldU4KIAlzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmU7CiAJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwgKmNuOworCXNp
emVfdCBhcnJheV9zaXplID0gSVNfR0VOKGk5MTUsIDEyKSA/IDIgOiBBUlJBWV9TSVpFKHJlZ3Mp
OwogCWludCBpLCBlcnI7CiAKLQlmb3IgKGkgPSAyOyBpIDwgQVJSQVlfU0laRShyZWdzKTsgaSsr
KQorCWlmIChJU19HRU4oaTkxNSwgMTIpKSB7CisJCXUzMiBmb3JtYXQgPSBzdHJlYW0tPm9hX2J1
ZmZlci5mb3JtYXQ7CisKKwkJcmVnc1sxXS52YWx1ZSA9CisJCQkoZm9ybWF0IDw8IEdFTjEyX09B
Ul9PQUNPTlRST0xfQ09VTlRFUl9GT1JNQVRfU0hJRlQpIHwKKwkJCShvYV9jb25maWcgPyBHRU4x
Ml9PQVJfT0FDT05UUk9MX0NPVU5URVJfRU5BQkxFIDogMCk7CisJfSBlbHNlIHsKKwkJcmVnc1sx
XS52YWx1ZSA9CisJCQkoc3RyZWFtLT5wZXJpb2RfZXhwb25lbnQgPDwgR0VOOF9PQV9USU1FUl9Q
RVJJT0RfU0hJRlQpIHwKKwkJCShzdHJlYW0tPnBlcmlvZGljID8gR0VOOF9PQV9USU1FUl9FTkFC
TEUgOiAwKSB8CisJCQlHRU44X09BX0NPVU5URVJfUkVTVU1FOworCX0KKworCWZvciAoaSA9IDI7
ICEhY3R4X2ZsZXhldTAgJiYgaSA8IGFycmF5X3NpemU7IGkrKykKIAkJcmVnc1tpXS52YWx1ZSA9
IG9hX2NvbmZpZ19mbGV4X3JlZyhvYV9jb25maWcsIHJlZ3NbaV0ucmVnKTsKIAogCWxvY2tkZXBf
YXNzZXJ0X2hlbGQoJnN0cmVhbS0+cGVyZi0+bG9jayk7CkBAIC0yMjE2LDcgKzIzNDgsNyBAQCBz
dGF0aWMgaW50IGdlbjhfY29uZmlndXJlX2FsbF9jb250ZXh0cyhzdHJ1Y3QgaTkxNV9wZXJmX3N0
cmVhbSAqc3RyZWFtLAogCiAJCXNwaW5fdW5sb2NrKCZpOTE1LT5nZW0uY29udGV4dHMubG9jayk7
CiAKLQkJZXJyID0gZ2VuOF9jb25maWd1cmVfY29udGV4dChjdHgsIHJlZ3MsIEFSUkFZX1NJWkUo
cmVncykpOworCQllcnIgPSBnZW44X2NvbmZpZ3VyZV9jb250ZXh0KGN0eCwgcmVncywgYXJyYXlf
c2l6ZSk7CiAJCWlmIChlcnIpIHsKIAkJCWk5MTVfZ2VtX2NvbnRleHRfcHV0KGN0eCk7CiAJCQly
ZXR1cm4gZXJyOwpAQCAtMjI0MSw3ICsyMzczLDcgQEAgc3RhdGljIGludCBnZW44X2NvbmZpZ3Vy
ZV9hbGxfY29udGV4dHMoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKIAogCQlyZWdz
WzBdLnZhbHVlID0gaW50ZWxfc3NldV9tYWtlX3JwY3MoaTkxNSwgJmNlLT5zc2V1KTsKIAotCQll
cnIgPSBnZW44X21vZGlmeV9zZWxmKGNlLCByZWdzLCBBUlJBWV9TSVpFKHJlZ3MpKTsKKwkJZXJy
ID0gZ2VuOF9tb2RpZnlfc2VsZihjZSwgcmVncywgYXJyYXlfc2l6ZSk7CiAJCWlmIChlcnIpCiAJ
CQlyZXR1cm4gZXJyOwogCX0KQEAgLTIyODksMTAgKzI0MjEsNjAgQEAgc3RhdGljIGludCBnZW44
X2VuYWJsZV9tZXRyaWNfc2V0KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiAJICog
dG8gbWFrZSBzdXJlIGFsbCBzbGljZXMvc3Vic2xpY2VzIGFyZSBPTiBiZWZvcmUgd3JpdGluZyB0
byBOT0EKIAkgKiByZWdpc3RlcnMuCiAJICovCi0JcmV0ID0gZ2VuOF9jb25maWd1cmVfYWxsX2Nv
bnRleHRzKHN0cmVhbSwgb2FfY29uZmlnKTsKKwlyZXQgPSBscmNfY29uZmlndXJlX2FsbF9jb250
ZXh0cyhzdHJlYW0sIG9hX2NvbmZpZyk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCXJl
dHVybiBlbWl0X29hX2NvbmZpZyhzdHJlYW0sIG9hX2NvbmZpZywgb2FfY29udGV4dChzdHJlYW0p
KTsKK30KKworc3RhdGljIGludCBnZW4xMl9lbmFibGVfbWV0cmljX3NldChzdHJ1Y3QgaTkxNV9w
ZXJmX3N0cmVhbSAqc3RyZWFtKQoreworCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSA9IHN0
cmVhbS0+dW5jb3JlOworCXN0cnVjdCBpOTE1X29hX2NvbmZpZyAqb2FfY29uZmlnID0gc3RyZWFt
LT5vYV9jb25maWc7CisJYm9vbCBwZXJpb2RpYyA9IHN0cmVhbS0+cGVyaW9kaWM7CisJdTMyIHBl
cmlvZF9leHBvbmVudCA9IHN0cmVhbS0+cGVyaW9kX2V4cG9uZW50OworCWludCByZXQ7CisKKwlp
bnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLCBHRU4xMl9PQUdfT0FfREVCVUcsCisJCQkgICAvKiBE
aXNhYmxlIGNsayByYXRpbyByZXBvcnRzLCBsaWtlIHByZXZpb3VzIEdlbnMuICovCisJCQkgICBf
TUFTS0VEX0JJVF9FTkFCTEUoR0VOMTJfT0FHX09BX0RFQlVHX0RJU0FCTEVfQ0xLX1JBVElPX1JF
UE9SVFMgfAorCQkJCQkgICAgICBHRU4xMl9PQUdfT0FfREVCVUdfSU5DTFVERV9DTEtfUkFUSU8p
IHwKKwkJCSAgIC8qCisJCQkgICAgKiBJZiB0aGUgdXNlciBkaWRuJ3QgcmVxdWlyZSBPQSByZXBv
cnRzLCBpbnN0cnVjdCB0aGUKKwkJCSAgICAqIGhhcmR3YXJlIG5vdCB0byBlbWl0IGN0eCBzd2l0
Y2ggcmVwb3J0cy4KKwkJCSAgICAqLworCQkJICAgIShzdHJlYW0tPnNhbXBsZV9mbGFncyAmIFNB
TVBMRV9PQV9SRVBPUlQpID8KKwkJCSAgIF9NQVNLRURfQklUX0VOQUJMRShHRU4xMl9PQUdfT0Ff
REVCVUdfRElTQUJMRV9DVFhfU1dJVENIX1JFUE9SVFMpIDoKKwkJCSAgIF9NQVNLRURfQklUX0RJ
U0FCTEUoR0VOMTJfT0FHX09BX0RFQlVHX0RJU0FCTEVfQ1RYX1NXSVRDSF9SRVBPUlRTKSk7CisK
KwlpbnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLCBHRU4xMl9PQUdfT0FHTEJDVFhDVFJMLCBwZXJp
b2RpYyA/CisJCQkgICAoR0VOMTJfT0FHX09BR0xCQ1RYQ1RSTF9DT1VOVEVSX1JFU1VNRSB8CisJ
CQkgICAgR0VOMTJfT0FHX09BR0xCQ1RYQ1RSTF9USU1FUl9FTkFCTEUgfAorCQkJICAgIChwZXJp
b2RfZXhwb25lbnQgPDwgR0VOMTJfT0FHX09BR0xCQ1RYQ1RSTF9USU1FUl9QRVJJT0RfU0hJRlQp
KQorCQkJICAgIDogMCk7CisKKwkvKgorCSAqIFVwZGF0ZSBhbGwgY29udGV4dHMgcHJpb3Igd3Jp
dGluZyB0aGUgbXV4IGNvbmZpZ3VyYXRpb25zIGFzIHdlIG5lZWQKKwkgKiB0byBtYWtlIHN1cmUg
YWxsIHNsaWNlcy9zdWJzbGljZXMgYXJlIE9OIGJlZm9yZSB3cml0aW5nIHRvIE5PQQorCSAqIHJl
Z2lzdGVycy4KKwkgKi8KKwlyZXQgPSBscmNfY29uZmlndXJlX2FsbF9jb250ZXh0cyhzdHJlYW0s
IG9hX2NvbmZpZyk7CiAJaWYgKHJldCkKIAkJcmV0dXJuIHJldDsKIAorCS8qCisJICogRm9yIEdl
bjEyLCBwZXJmb3JtYW5jZSBjb3VudGVycyBhcmUgY29udGV4dAorCSAqIHNhdmVkL3Jlc3RvcmVk
LiBPbmx5IGVuYWJsZSBpdCBmb3IgdGhlIGNvbnRleHQgdGhhdAorCSAqIHJlcXVlc3RlZCB0aGlz
LgorCSAqLworCWlmIChzdHJlYW0tPmN0eCkgeworCQlyZXQgPSBnZW4xMl9lbWl0X29hcl9jb25m
aWcoc3RyZWFtLT5waW5uZWRfY3R4LAorCQkJCQkgICAgb2FfY29uZmlnICE9IE5VTEwpOworCQlp
ZiAocmV0KQorCQkJcmV0dXJuIHJldDsKKwl9CisKIAlyZXR1cm4gZW1pdF9vYV9jb25maWcoc3Ry
ZWFtLCBvYV9jb25maWcsIG9hX2NvbnRleHQoc3RyZWFtKSk7CiB9CiAKQEAgLTIzMDEsNyArMjQ4
Myw3IEBAIHN0YXRpYyB2b2lkIGdlbjhfZGlzYWJsZV9tZXRyaWNfc2V0KHN0cnVjdCBpOTE1X3Bl
cmZfc3RyZWFtICpzdHJlYW0pCiAJc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlID0gc3RyZWFt
LT51bmNvcmU7CiAKIAkvKiBSZXNldCBhbGwgY29udGV4dHMnIHNsaWNlcy9zdWJzbGljZXMgY29u
ZmlndXJhdGlvbnMuICovCi0JZ2VuOF9jb25maWd1cmVfYWxsX2NvbnRleHRzKHN0cmVhbSwgTlVM
TCk7CisJbHJjX2NvbmZpZ3VyZV9hbGxfY29udGV4dHMoc3RyZWFtLCBOVUxMKTsKIAogCWludGVs
X3VuY29yZV9ybXcodW5jb3JlLCBHRFRfQ0hJQ0tFTl9CSVRTLCBHVF9OT0FfRU5BQkxFLCAwKTsK
IH0KQEAgLTIzMTEsNyArMjQ5MywyMiBAQCBzdGF0aWMgdm9pZCBnZW4xMF9kaXNhYmxlX21ldHJp
Y19zZXQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKIAlzdHJ1Y3QgaW50ZWxfdW5j
b3JlICp1bmNvcmUgPSBzdHJlYW0tPnVuY29yZTsKIAogCS8qIFJlc2V0IGFsbCBjb250ZXh0cycg
c2xpY2VzL3N1YnNsaWNlcyBjb25maWd1cmF0aW9ucy4gKi8KLQlnZW44X2NvbmZpZ3VyZV9hbGxf
Y29udGV4dHMoc3RyZWFtLCBOVUxMKTsKKwlscmNfY29uZmlndXJlX2FsbF9jb250ZXh0cyhzdHJl
YW0sIE5VTEwpOworCisJLyogTWFrZSBzdXJlIHdlIGRpc2FibGUgbm9hIHRvIHNhdmUgcG93ZXIu
ICovCisJaW50ZWxfdW5jb3JlX3Jtdyh1bmNvcmUsIFJQTV9DT05GSUcxLCBHRU4xMF9HVF9OT0Ff
RU5BQkxFLCAwKTsKK30KKworc3RhdGljIHZvaWQgZ2VuMTJfZGlzYWJsZV9tZXRyaWNfc2V0KHN0
cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCit7CisJc3RydWN0IGludGVsX3VuY29yZSAq
dW5jb3JlID0gc3RyZWFtLT51bmNvcmU7CisKKwkvKiBSZXNldCBhbGwgY29udGV4dHMnIHNsaWNl
cy9zdWJzbGljZXMgY29uZmlndXJhdGlvbnMuICovCisJbHJjX2NvbmZpZ3VyZV9hbGxfY29udGV4
dHMoc3RyZWFtLCBOVUxMKTsKKworCS8qIGRpc2FibGUgdGhlIGNvbnRleHQgc2F2ZS9yZXN0b3Jl
IG9yIE9BUiBjb3VudGVycyAqLworCWlmIChzdHJlYW0tPmN0eCkKKwkJZ2VuMTJfZW1pdF9vYXJf
Y29uZmlnKHN0cmVhbS0+cGlubmVkX2N0eCwgZmFsc2UpOwogCiAJLyogTWFrZSBzdXJlIHdlIGRp
c2FibGUgbm9hIHRvIHNhdmUgcG93ZXIuICovCiAJaW50ZWxfdW5jb3JlX3Jtdyh1bmNvcmUsIFJQ
TV9DT05GSUcxLCBHRU4xMF9HVF9OT0FfRU5BQkxFLCAwKTsKQEAgLTIzNzMsNiArMjU3MCwyNSBA
QCBzdGF0aWMgdm9pZCBnZW44X29hX2VuYWJsZShzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3Ry
ZWFtKQogCQkJICAgR0VOOF9PQV9DT1VOVEVSX0VOQUJMRSk7CiB9CiAKK3N0YXRpYyB2b2lkIGdl
bjEyX29hX2VuYWJsZShzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQoreworCXN0cnVj
dCBpbnRlbF91bmNvcmUgKnVuY29yZSA9IHN0cmVhbS0+dW5jb3JlOworCXUzMiByZXBvcnRfZm9y
bWF0ID0gc3RyZWFtLT5vYV9idWZmZXIuZm9ybWF0OworCisJLyoKKwkgKiBJZiB3ZSBkb24ndCB3
YW50IE9BIHJlcG9ydHMgZnJvbSB0aGUgT0EgYnVmZmVyLCB0aGVuIHdlIGRvbid0IGV2ZW4KKwkg
KiBuZWVkIHRvIHByb2dyYW0gdGhlIE9BRyB1bml0LgorCSAqLworCWlmICghKHN0cmVhbS0+c2Ft
cGxlX2ZsYWdzICYgU0FNUExFX09BX1JFUE9SVCkpCisJCXJldHVybjsKKworCWdlbjEyX2luaXRf
b2FfYnVmZmVyKHN0cmVhbSk7CisKKwlpbnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLCBHRU4xMl9P
QUdfT0FDT05UUk9MLAorCQkJICAgKHJlcG9ydF9mb3JtYXQgPDwgR0VOMTJfT0FHX09BQ09OVFJP
TF9PQV9DT1VOVEVSX0ZPUk1BVF9TSElGVCkgfAorCQkJICAgR0VOMTJfT0FHX09BQ09OVFJPTF9P
QV9DT1VOVEVSX0VOQUJMRSk7Cit9CisKIC8qKgogICogaTkxNV9vYV9zdHJlYW1fZW5hYmxlIC0g
aGFuZGxlIGBJOTE1X1BFUkZfSU9DVExfRU5BQkxFYCBmb3IgT0Egc3RyZWFtCiAgKiBAc3RyZWFt
OiBBbiBpOTE1IHBlcmYgc3RyZWFtIG9wZW5lZCBmb3IgT0EgbWV0cmljcwpAQCAtMjQxNCw2ICsy
NjMwLDE4IEBAIHN0YXRpYyB2b2lkIGdlbjhfb2FfZGlzYWJsZShzdHJ1Y3QgaTkxNV9wZXJmX3N0
cmVhbSAqc3RyZWFtKQogCQlEUk1fRVJST1IoIndhaXQgZm9yIE9BIHRvIGJlIGRpc2FibGVkIHRp
bWVkIG91dFxuIik7CiB9CiAKK3N0YXRpYyB2b2lkIGdlbjEyX29hX2Rpc2FibGUoc3RydWN0IGk5
MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSkKK3sKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUg
PSBzdHJlYW0tPnVuY29yZTsKKworCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsIEdFTjEyX09B
R19PQUNPTlRST0wsIDApOworCWlmIChpbnRlbF93YWl0X2Zvcl9yZWdpc3Rlcih1bmNvcmUsCisJ
CQkJICAgIEdFTjEyX09BR19PQUNPTlRST0wsCisJCQkJICAgIEdFTjEyX09BR19PQUNPTlRST0xf
T0FfQ09VTlRFUl9FTkFCTEUsIDAsCisJCQkJICAgIDUwKSkKKwkJRFJNX0VSUk9SKCJ3YWl0IGZv
ciBPQSB0byBiZSBkaXNhYmxlZCB0aW1lZCBvdXRcbiIpOworfQorCiAvKioKICAqIGk5MTVfb2Ff
c3RyZWFtX2Rpc2FibGUgLSBoYW5kbGUgYEk5MTVfUEVSRl9JT0NUTF9ESVNBQkxFYCBmb3IgT0Eg
c3RyZWFtCiAgKiBAc3RyZWFtOiBBbiBpOTE1IHBlcmYgc3RyZWFtIG9wZW5lZCBmb3IgT0EgbWV0
cmljcwpAQCAtMjYxNSw3ICsyODQzLDcgQEAgdm9pZCBpOTE1X29hX2luaXRfcmVnX3N0YXRlKGNv
bnN0IHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKIHsKIAlzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVh
bSAqc3RyZWFtOwogCi0JLyogcGVyZi5leGNsdXNpdmVfc3RyZWFtIHNlcmlhbGlzZWQgYnkgZ2Vu
OF9jb25maWd1cmVfYWxsX2NvbnRleHRzKCkgKi8KKwkvKiBwZXJmLmV4Y2x1c2l2ZV9zdHJlYW0g
c2VyaWFsaXNlZCBieSBscmNfY29uZmlndXJlX2FsbF9jb250ZXh0cygpICovCiAKIAlpZiAoZW5n
aW5lLT5jbGFzcyAhPSBSRU5ERVJfQ0xBU1MpCiAJCXJldHVybjsKQEAgLTMwOTQsMTYgKzMzMjIs
MjQgQEAgaTkxNV9wZXJmX29wZW5faW9jdGxfbG9ja2VkKHN0cnVjdCBpOTE1X3BlcmYgKnBlcmYs
CiAJICogcmVzdCBvZiB0aGUgc3lzdGVtLCB3aGljaCB3ZSBjb25zaWRlciBhY2NlcHRhYmxlIGZv
ciBhCiAJICogbm9uLXByaXZpbGVnZWQgY2xpZW50LgogCSAqCi0JICogRm9yIEdlbjgrIHRoZSBP
QSB1bml0IG5vIGxvbmdlciBzdXBwb3J0cyBjbG9jayBnYXRpbmcgb2ZmIGZvciBhCisJICogRm9y
IEdlbjgtPjExIHRoZSBPQSB1bml0IG5vIGxvbmdlciBzdXBwb3J0cyBjbG9jayBnYXRpbmcgb2Zm
IGZvciBhCiAJICogc3BlY2lmaWMgY29udGV4dCBhbmQgdGhlIGtlcm5lbCBjYW4ndCBzZWN1cmVs
eSBzdG9wIHRoZSBjb3VudGVycwogCSAqIGZyb20gdXBkYXRpbmcgYXMgc3lzdGVtLXdpZGUgLyBn
bG9iYWwgdmFsdWVzLiBFdmVuIHRob3VnaCB3ZSBjYW4KIAkgKiBmaWx0ZXIgcmVwb3J0cyBiYXNl
ZCBvbiB0aGUgaW5jbHVkZWQgY29udGV4dCBJRCB3ZSBjYW4ndCBibG9jawogCSAqIGNsaWVudHMg
ZnJvbSBzZWVpbmcgdGhlIHJhdyAvIGdsb2JhbCBjb3VudGVyIHZhbHVlcyB2aWEKIAkgKiBNSV9S
RVBPUlRfUEVSRl9DT1VOVCBjb21tYW5kcyBhbmQgc28gY29uc2lkZXIgaXQgYSBwcml2aWxlZ2Vk
IG9wIHRvCiAJICogZW5hYmxlIHRoZSBPQSB1bml0IGJ5IGRlZmF1bHQuCisJICoKKwkgKiBGb3Ig
R2VuMTIrIHdlIGdhaW4gYSBuZXcgT0FSIHVuaXQgdGhhdCBvbmx5IG1vbml0b3JzIHRoZSBSQ1Mg
b24gYQorCSAqIHBlciBjb250ZXh0IGJhc2lzLiBTbyB3ZSBjYW4gcmVsYXggcmVxdWlyZW1lbnRz
IHRoZXJlIGlmIHRoZSB1c2VyCisJICogZG9lc24ndCByZXF1ZXN0IGdsb2JhbCBzdHJlYW0gYWNj
ZXNzIChpLmUuIHF1ZXJ5IGJhc2VkIHNhbXBsaW5nCisJICogdXNpbmcgTUlfUkVDT1JEX1BFUkZf
Q09VTlQuCiAJICovCiAJaWYgKElTX0hBU1dFTEwocGVyZi0+aTkxNSkgJiYgc3BlY2lmaWNfY3R4
ICYmICFwcm9wcy0+aG9sZF9wcmVlbXB0aW9uKQogCQlwcml2aWxlZ2VkX29wID0gZmFsc2U7CisJ
ZWxzZSBpZiAoSVNfR0VOKHBlcmYtPmk5MTUsIDEyKSAmJiBzcGVjaWZpY19jdHggJiYKKwkJIChw
cm9wcy0+c2FtcGxlX2ZsYWdzICYgU0FNUExFX09BX1JFUE9SVCkgPT0gMCkKKwkJcHJpdmlsZWdl
ZF9vcCA9IGZhbHNlOwogCiAJLyogU2ltaWxhciB0byBwZXJmJ3Mga2VybmVsLnBlcmZfcGFyYW5v
aWRfY3B1IHN5c2N0bCBvcHRpb24KIAkgKiB3ZSBjaGVjayBhIGRldi5pOTE1LnBlcmZfc3RyZWFt
X3BhcmFub2lkIHN5c2N0bCBvcHRpb24KQEAgLTM0MTgsNyArMzY1NCw5IEBAIHZvaWQgaTkxNV9w
ZXJmX3JlZ2lzdGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCiAJc3lzZnNfYXR0
cl9pbml0KCZwZXJmLT50ZXN0X2NvbmZpZy5zeXNmc19tZXRyaWNfaWQuYXR0cik7CiAKLQlpZiAo
SU5URUxfR0VOKGk5MTUpID49IDExKSB7CisJaWYgKElTX1RJR0VSTEFLRShpOTE1KSkgeworCQlp
OTE1X3BlcmZfbG9hZF90ZXN0X2NvbmZpZ190Z2woaTkxNSk7CisJfSBlbHNlIGlmIChJTlRFTF9H
RU4oaTkxNSkgPj0gMTEpIHsKIAkJaTkxNV9wZXJmX2xvYWRfdGVzdF9jb25maWdfaWNsKGk5MTUp
OwogCX0gZWxzZSBpZiAoSVNfQ0FOTk9OTEFLRShpOTE1KSkgewogCQlpOTE1X3BlcmZfbG9hZF90
ZXN0X2NvbmZpZ19jbmwoaTkxNSk7CkBAIC0zNTY5LDYgKzM4MDcsMjggQEAgc3RhdGljIGJvb2wg
Y2h2X2lzX3ZhbGlkX211eF9hZGRyKHN0cnVjdCBpOTE1X3BlcmYgKnBlcmYsIHUzMiBhZGRyKQog
CSAgICAgICBBRERSX0lOX1JBTkdFKGFkZHIsIDB4MTgyMzAwLCAweDE4MjNBNCk7CiB9CiAKK3N0
YXRpYyBib29sIGdlbjEyX2lzX3ZhbGlkX2JfY291bnRlcl9hZGRyKHN0cnVjdCBpOTE1X3BlcmYg
KnBlcmYsIHUzMiBhZGRyKQoreworCXJldHVybiBSRUdfSU5fUkFOR0UoYWRkciwgR0VOMTJfT0FH
X09BU1RBUlRUUklHMSwgR0VOMTJfT0FHX09BU1RBUlRUUklHOCkgfHwKKwkgICAgICAgUkVHX0lO
X1JBTkdFKGFkZHIsIEdFTjEyX09BR19PQVJFUE9SVFRSSUcxLCBHRU4xMl9PQUdfT0FSRVBPUlRU
UklHOCkgfHwKKwkgICAgICAgUkVHX0lOX1JBTkdFKGFkZHIsIEdFTjEyX09BR19DRUMwXzAsIEdF
TjEyX09BR19DRUM3XzEpIHx8CisJICAgICAgIFJFR19JTl9SQU5HRShhZGRyLCBHRU4xMl9PQUdf
U0NFQzBfMCwgR0VOMTJfT0FHX1NDRUM3XzEpIHx8CisJICAgICAgIFJFR19FUVVBTChhZGRyLCBH
RU4xMl9PQUFfREJHX1JFRykgfHwKKwkgICAgICAgUkVHX0VRVUFMKGFkZHIsIEdFTjEyX09BR19P
QV9QRVNTKSB8fAorCSAgICAgICBSRUdfRVFVQUwoYWRkciwgR0VOMTJfT0FHX1NQQ1RSX0NORik7
Cit9CisKK3N0YXRpYyBib29sIGdlbjEyX2lzX3ZhbGlkX211eF9hZGRyKHN0cnVjdCBpOTE1X3Bl
cmYgKnBlcmYsIHUzMiBhZGRyKQoreworCXJldHVybiBSRUdfRVFVQUwoYWRkciwgTk9BX1dSSVRF
KSB8fAorCSAgICAgICBSRUdfRVFVQUwoYWRkciwgR0VOMTBfTk9BX1dSSVRFX0hJR0gpIHx8CisJ
ICAgICAgIFJFR19FUVVBTChhZGRyLCBHRFRfQ0hJQ0tFTl9CSVRTKSB8fAorCSAgICAgICBSRUdf
RVFVQUwoYWRkciwgV0FJVF9GT1JfUkM2X0VYSVQpIHx8CisJICAgICAgIFJFR19FUVVBTChhZGRy
LCBSUE1fQ09ORklHMCkgfHwKKwkgICAgICAgUkVHX0VRVUFMKGFkZHIsIFJQTV9DT05GSUcxKSB8
fAorCSAgICAgICBSRUdfSU5fUkFOR0UoYWRkciwgTk9BX0NPTkZJRygwKSwgTk9BX0NPTkZJRyg4
KSk7Cit9CisKIHN0YXRpYyB1MzIgbWFza19yZWdfdmFsdWUodTMyIHJlZywgdTMyIHZhbCkKIHsK
IAkvKiBIQUxGX1NMSUNFX0NISUNLRU4yIGlzIHByb2dyYW1tZWQgd2l0aCBhIHRoZQpAQCAtMzk2
MSwxNCArNDIyMSwxMSBAQCB2b2lkIGk5MTVfcGVyZl9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1KQogCQkgKiB3b3J0aCB0aGUgY29tcGxleGl0eSB0byBtYWludGFpbiBub3cgdGhh
dCBCRFcrIGVuYWJsZQogCQkgKiBleGVjbGlzdCBtb2RlIGJ5IGRlZmF1bHQuCiAJCSAqLwotCQlw
ZXJmLT5vYV9mb3JtYXRzID0gZ2VuOF9wbHVzX29hX2Zvcm1hdHM7Ci0KLQkJcGVyZi0+b3BzLm9h
X2VuYWJsZSA9IGdlbjhfb2FfZW5hYmxlOwotCQlwZXJmLT5vcHMub2FfZGlzYWJsZSA9IGdlbjhf
b2FfZGlzYWJsZTsKIAkJcGVyZi0+b3BzLnJlYWQgPSBnZW44X29hX3JlYWQ7Ci0JCXBlcmYtPm9w
cy5vYV9od190YWlsX3JlYWQgPSBnZW44X29hX2h3X3RhaWxfcmVhZDsKIAogCQlpZiAoSVNfR0VO
X1JBTkdFKGk5MTUsIDgsIDkpKSB7CisJCQlwZXJmLT5vYV9mb3JtYXRzID0gZ2VuOF9wbHVzX29h
X2Zvcm1hdHM7CisKIAkJCXBlcmYtPm9wcy5pc192YWxpZF9iX2NvdW50ZXJfcmVnID0KIAkJCQln
ZW43X2lzX3ZhbGlkX2JfY291bnRlcl9hZGRyOwogCQkJcGVyZi0+b3BzLmlzX3ZhbGlkX211eF9y
ZWcgPQpAQCAtMzk4MSw4ICs0MjM4LDExIEBAIHZvaWQgaTkxNV9wZXJmX2luaXQoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJCQkJCWNodl9pc192YWxpZF9tdXhfYWRkcjsKIAkJCX0K
IAorCQkJcGVyZi0+b3BzLm9hX2VuYWJsZSA9IGdlbjhfb2FfZW5hYmxlOworCQkJcGVyZi0+b3Bz
Lm9hX2Rpc2FibGUgPSBnZW44X29hX2Rpc2FibGU7CiAJCQlwZXJmLT5vcHMuZW5hYmxlX21ldHJp
Y19zZXQgPSBnZW44X2VuYWJsZV9tZXRyaWNfc2V0OwogCQkJcGVyZi0+b3BzLmRpc2FibGVfbWV0
cmljX3NldCA9IGdlbjhfZGlzYWJsZV9tZXRyaWNfc2V0OworCQkJcGVyZi0+b3BzLm9hX2h3X3Rh
aWxfcmVhZCA9IGdlbjhfb2FfaHdfdGFpbF9yZWFkOwogCiAJCQlpZiAoSVNfR0VOKGk5MTUsIDgp
KSB7CiAJCQkJcGVyZi0+Y3R4X29hY3R4Y3RybF9vZmZzZXQgPSAweDEyMDsKQEAgLTM5OTYsNiAr
NDI1Niw4IEBAIHZvaWQgaTkxNV9wZXJmX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUpCiAJCQkJcGVyZi0+Z2VuOF92YWxpZF9jdHhfYml0ID0gQklUKDE2KTsKIAkJCX0KIAkJfSBl
bHNlIGlmIChJU19HRU5fUkFOR0UoaTkxNSwgMTAsIDExKSkgeworCQkJcGVyZi0+b2FfZm9ybWF0
cyA9IGdlbjhfcGx1c19vYV9mb3JtYXRzOworCiAJCQlwZXJmLT5vcHMuaXNfdmFsaWRfYl9jb3Vu
dGVyX3JlZyA9CiAJCQkJZ2VuN19pc192YWxpZF9iX2NvdW50ZXJfYWRkcjsKIAkJCXBlcmYtPm9w
cy5pc192YWxpZF9tdXhfcmVnID0KQEAgLTQwMDMsOCArNDI2NSwxMSBAQCB2b2lkIGk5MTVfcGVy
Zl9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCQkJcGVyZi0+b3BzLmlzX3Zh
bGlkX2ZsZXhfcmVnID0KIAkJCQlnZW44X2lzX3ZhbGlkX2ZsZXhfYWRkcjsKIAorCQkJcGVyZi0+
b3BzLm9hX2VuYWJsZSA9IGdlbjhfb2FfZW5hYmxlOworCQkJcGVyZi0+b3BzLm9hX2Rpc2FibGUg
PSBnZW44X29hX2Rpc2FibGU7CiAJCQlwZXJmLT5vcHMuZW5hYmxlX21ldHJpY19zZXQgPSBnZW44
X2VuYWJsZV9tZXRyaWNfc2V0OwogCQkJcGVyZi0+b3BzLmRpc2FibGVfbWV0cmljX3NldCA9IGdl
bjEwX2Rpc2FibGVfbWV0cmljX3NldDsKKwkJCXBlcmYtPm9wcy5vYV9od190YWlsX3JlYWQgPSBn
ZW44X29hX2h3X3RhaWxfcmVhZDsKIAogCQkJaWYgKElTX0dFTihpOTE1LCAxMCkpIHsKIAkJCQlw
ZXJmLT5jdHhfb2FjdHhjdHJsX29mZnNldCA9IDB4MTI4OwpAQCAtNDAxNCw2ICs0Mjc5LDI0IEBA
IHZvaWQgaTkxNV9wZXJmX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJCQkJ
cGVyZi0+Y3R4X2ZsZXhldTBfb2Zmc2V0ID0gMHg3OGU7CiAJCQl9CiAJCQlwZXJmLT5nZW44X3Zh
bGlkX2N0eF9iaXQgPSBCSVQoMTYpOworCQl9IGVsc2UgaWYgKElTX0dFTihpOTE1LCAxMikpIHsK
KwkJCXBlcmYtPm9hX2Zvcm1hdHMgPSBnZW4xMl9vYV9mb3JtYXRzOworCisJCQlwZXJmLT5vcHMu
aXNfdmFsaWRfYl9jb3VudGVyX3JlZyA9CisJCQkJZ2VuMTJfaXNfdmFsaWRfYl9jb3VudGVyX2Fk
ZHI7CisJCQlwZXJmLT5vcHMuaXNfdmFsaWRfbXV4X3JlZyA9CisJCQkJZ2VuMTJfaXNfdmFsaWRf
bXV4X2FkZHI7CisJCQlwZXJmLT5vcHMuaXNfdmFsaWRfZmxleF9yZWcgPQorCQkJCWdlbjhfaXNf
dmFsaWRfZmxleF9hZGRyOworCisJCQlwZXJmLT5vcHMub2FfZW5hYmxlID0gZ2VuMTJfb2FfZW5h
YmxlOworCQkJcGVyZi0+b3BzLm9hX2Rpc2FibGUgPSBnZW4xMl9vYV9kaXNhYmxlOworCQkJcGVy
Zi0+b3BzLmVuYWJsZV9tZXRyaWNfc2V0ID0gZ2VuMTJfZW5hYmxlX21ldHJpY19zZXQ7CisJCQlw
ZXJmLT5vcHMuZGlzYWJsZV9tZXRyaWNfc2V0ID0gZ2VuMTJfZGlzYWJsZV9tZXRyaWNfc2V0Owor
CQkJcGVyZi0+b3BzLm9hX2h3X3RhaWxfcmVhZCA9IGdlbjEyX29hX2h3X3RhaWxfcmVhZDsKKwor
CQkJcGVyZi0+Y3R4X2ZsZXhldTBfb2Zmc2V0ID0gMDsKKwkJCXBlcmYtPmN0eF9vYWN0eGN0cmxf
b2Zmc2V0ID0gMHgxNDQ7CiAJCX0KIAl9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVnLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCmluZGV4IDc0
NjMyNjc4NGE0ZC4uOGQzOTRmNWQ1N2Q4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3JlZy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKQEAgLTY4
NCw2ICs2ODQsNDUgQEAgc3RhdGljIGlubGluZSBib29sIGk5MTVfbW1pb19yZWdfdmFsaWQoaTkx
NV9yZWdfdCByZWcpCiAjZGVmaW5lIE9BQlVGRkVSX1NJWkVfOE0gICAgKDYgPDwgMykKICNkZWZp
bmUgT0FCVUZGRVJfU0laRV8xNk0gICAoNyA8PCAzKQogCisvKiBHZW4xMiBPQVIgdW5pdCAqLwor
I2RlZmluZSBHRU4xMl9PQVJfT0FDT05UUk9MIF9NTUlPKDB4Mjk2MCkKKyNkZWZpbmUgIEdFTjEy
X09BUl9PQUNPTlRST0xfQ09VTlRFUl9GT1JNQVRfU0hJRlQgMQorI2RlZmluZSAgR0VOMTJfT0FS
X09BQ09OVFJPTF9DT1VOVEVSX0VOQUJMRSAgICAgICAoMSA8PCAwKQorCisjZGVmaW5lIEdFTjEy
X09BQ1RYQ09OVFJPTCBfTU1JTygweDIzNjApCisjZGVmaW5lIEdFTjEyX09BUl9PQVNUQVRVUyBf
TU1JTygweDI5NjgpCisKKy8qIEdlbjEyIE9BRyB1bml0ICovCisjZGVmaW5lIEdFTjEyX09BR19P
QUhFQURQVFIgX01NSU8oMHhkYjAwKQorI2RlZmluZSAgR0VOMTJfT0FHX09BSEVBRFBUUl9NQVNL
IDB4ZmZmZmZmYzAKKyNkZWZpbmUgR0VOMTJfT0FHX09BVEFJTFBUUiBfTU1JTygweGRiMDQpCisj
ZGVmaW5lICBHRU4xMl9PQUdfT0FUQUlMUFRSX01BU0sgMHhmZmZmZmZjMAorCisjZGVmaW5lIEdF
TjEyX09BR19PQUJVRkZFUiAgX01NSU8oMHhkYjA4KQorI2RlZmluZSAgR0VOMTJfT0FHX09BQlVG
RkVSX0JVRkZFUl9TSVpFX01BU0sgICgweDcpCisjZGVmaW5lICBHRU4xMl9PQUdfT0FCVUZGRVJf
QlVGRkVSX1NJWkVfU0hJRlQgKDMpCisjZGVmaW5lICBHRU4xMl9PQUdfT0FCVUZGRVJfTUVNT1JZ
X1NFTEVDVCAgICAgKDEgPDwgMCkgLyogMDogUFBHVFQsIDE6IEdHVFQgKi8KKworI2RlZmluZSBH
RU4xMl9PQUdfT0FHTEJDVFhDVFJMIF9NTUlPKDB4MmIyOCkKKyNkZWZpbmUgIEdFTjEyX09BR19P
QUdMQkNUWENUUkxfVElNRVJfUEVSSU9EX1NISUZUIDIKKyNkZWZpbmUgIEdFTjEyX09BR19PQUdM
QkNUWENUUkxfVElNRVJfRU5BQkxFICAgICAgICgxIDw8IDEpCisjZGVmaW5lICBHRU4xMl9PQUdf
T0FHTEJDVFhDVFJMX0NPVU5URVJfUkVTVU1FICAgICAoMSA8PCAwKQorCisjZGVmaW5lIEdFTjEy
X09BR19PQUNPTlRST0wgX01NSU8oMHhkYWY0KQorI2RlZmluZSAgR0VOMTJfT0FHX09BQ09OVFJP
TF9PQV9DT1VOVEVSX0ZPUk1BVF9TSElGVCAyCisjZGVmaW5lICBHRU4xMl9PQUdfT0FDT05UUk9M
X09BX0NPVU5URVJfRU5BQkxFICAgICAgICgxIDw8IDApCisKKyNkZWZpbmUgR0VOMTJfT0FHX09B
X0RFQlVHIF9NTUlPKDB4ZGFmOCkKKyNkZWZpbmUgIEdFTjEyX09BR19PQV9ERUJVR19JTkNMVURF
X0NMS19SQVRJTyAgICAgICAgICAoMSA8PCA2KQorI2RlZmluZSAgR0VOMTJfT0FHX09BX0RFQlVH
X0RJU0FCTEVfQ0xLX1JBVElPX1JFUE9SVFMgICgxIDw8IDUpCisjZGVmaW5lICBHRU4xMl9PQUdf
T0FfREVCVUdfRElTQUJMRV9HT18xXzBfUkVQT1JUUyAgICAgKDEgPDwgMikKKyNkZWZpbmUgIEdF
TjEyX09BR19PQV9ERUJVR19ESVNBQkxFX0NUWF9TV0lUQ0hfUkVQT1JUUyAoMSA8PCAxKQorCisj
ZGVmaW5lIEdFTjEyX09BR19PQVNUQVRVUyBfTU1JTygweGRhZmMpCisjZGVmaW5lICBHRU4xMl9P
QUdfT0FTVEFUVVNfQ09VTlRFUl9PVkVSRkxPVyAoMSA8PCAyKQorI2RlZmluZSAgR0VOMTJfT0FH
X09BU1RBVFVTX0JVRkZFUl9PVkVSRkxPVyAgKDEgPDwgMSkKKyNkZWZpbmUgIEdFTjEyX09BR19P
QVNUQVRVU19SRVBPUlRfTE9TVCAgICAgICgxIDw8IDApCisKIC8qCiAgKiBGbGV4aWJsZSwgQWdn
cmVnYXRlIEVVIENvdW50ZXIgUmVnaXN0ZXJzLgogICogTm90ZTogdGhlc2UgYXJlbid0IGNvbnRp
Z3VvdXMKQEAgLTkyMCw2ICs5NTksMjYgQEAgc3RhdGljIGlubGluZSBib29sIGk5MTVfbW1pb19y
ZWdfdmFsaWQoaTkxNV9yZWdfdCByZWcpCiAjZGVmaW5lIE9BUkVQT1JUVFJJRzhfTk9BX1NFTEVD
VF82X1NISUZUICAgIDI0CiAjZGVmaW5lIE9BUkVQT1JUVFJJRzhfTk9BX1NFTEVDVF83X1NISUZU
ICAgIDI4CiAKKy8qIFNhbWUgbGF5b3V0IGFzIE9BU1RBUlRUUklHWCAqLworI2RlZmluZSBHRU4x
Ml9PQUdfT0FTVEFSVFRSSUcxIF9NTUlPKDB4ZDkwMCkKKyNkZWZpbmUgR0VOMTJfT0FHX09BU1RB
UlRUUklHMiBfTU1JTygweGQ5MDQpCisjZGVmaW5lIEdFTjEyX09BR19PQVNUQVJUVFJJRzMgX01N
SU8oMHhkOTA4KQorI2RlZmluZSBHRU4xMl9PQUdfT0FTVEFSVFRSSUc0IF9NTUlPKDB4ZDkwYykK
KyNkZWZpbmUgR0VOMTJfT0FHX09BU1RBUlRUUklHNSBfTU1JTygweGQ5MTApCisjZGVmaW5lIEdF
TjEyX09BR19PQVNUQVJUVFJJRzYgX01NSU8oMHhkOTE0KQorI2RlZmluZSBHRU4xMl9PQUdfT0FT
VEFSVFRSSUc3IF9NTUlPKDB4ZDkxOCkKKyNkZWZpbmUgR0VOMTJfT0FHX09BU1RBUlRUUklHOCBf
TU1JTygweGQ5MWMpCisKKy8qIFNhbWUgbGF5b3V0IGFzIE9BUkVQT1JUVFJJR1ggKi8KKyNkZWZp
bmUgR0VOMTJfT0FHX09BUkVQT1JUVFJJRzEgX01NSU8oMHhkOTIwKQorI2RlZmluZSBHRU4xMl9P
QUdfT0FSRVBPUlRUUklHMiBfTU1JTygweGQ5MjQpCisjZGVmaW5lIEdFTjEyX09BR19PQVJFUE9S
VFRSSUczIF9NTUlPKDB4ZDkyOCkKKyNkZWZpbmUgR0VOMTJfT0FHX09BUkVQT1JUVFJJRzQgX01N
SU8oMHhkOTJjKQorI2RlZmluZSBHRU4xMl9PQUdfT0FSRVBPUlRUUklHNSBfTU1JTygweGQ5MzAp
CisjZGVmaW5lIEdFTjEyX09BR19PQVJFUE9SVFRSSUc2IF9NTUlPKDB4ZDkzNCkKKyNkZWZpbmUg
R0VOMTJfT0FHX09BUkVQT1JUVFJJRzcgX01NSU8oMHhkOTM4KQorI2RlZmluZSBHRU4xMl9PQUdf
T0FSRVBPUlRUUklHOCBfTU1JTygweGQ5M2MpCisKIC8qIENFQ1hfMCAqLwogI2RlZmluZSBPQUNF
Q19DT01QQVJFX0xFU1NfT1JfRVFVQUwJNgogI2RlZmluZSBPQUNFQ19DT01QQVJFX05PVF9FUVVB
TAkJNQpAQCAtOTM2LDYgKzk5NSwxMCBAQCBzdGF0aWMgaW5saW5lIGJvb2wgaTkxNV9tbWlvX3Jl
Z192YWxpZChpOTE1X3JlZ190IHJlZykKICNkZWZpbmUgT0FDRUNfU0VMRUNUX1BSRVYJKDEgPDwg
MTkpCiAjZGVmaW5lIE9BQ0VDX1NFTEVDVF9CT09MRUFOCSgyIDw8IDE5KQogCisvKiAxMS1iaXQg
YXJyYXkgMDogcGFzcy10aHJvdWdoLCAxOiBuZWdhdGVkICovCisjZGVmaW5lIEdFTjEyX09BU0NF
Q19ORUdBVEVfTUFTSyAgMHg3ZmYKKyNkZWZpbmUgR0VOMTJfT0FTQ0VDX05FR0FURV9TSElGVCAy
MQorCiAvKiBDRUNYXzEgKi8KICNkZWZpbmUgT0FDRUNfTUFTS19NQVNLCQkgICAgMHhmZmZmCiAj
ZGVmaW5lIE9BQ0VDX0NPTlNJREVSQVRJT05TX01BU0sgICAweGZmZmYKQEAgLTk1OCw2ICsxMDIx
LDQyIEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBpOTE1X21taW9fcmVnX3ZhbGlkKGk5MTVfcmVnX3Qg
cmVnKQogI2RlZmluZSBPQUNFQzdfMCBfTU1JTygweDI3YTgpCiAjZGVmaW5lIE9BQ0VDN18xIF9N
TUlPKDB4MjdhYykKIAorLyogU2FtZSBsYXlvdXQgYXMgQ0VDWF9ZICovCisjZGVmaW5lIEdFTjEy
X09BR19DRUMwXzAgX01NSU8oMHhkOTQwKQorI2RlZmluZSBHRU4xMl9PQUdfQ0VDMF8xIF9NTUlP
KDB4ZDk0NCkKKyNkZWZpbmUgR0VOMTJfT0FHX0NFQzFfMCBfTU1JTygweGQ5NDgpCisjZGVmaW5l
IEdFTjEyX09BR19DRUMxXzEgX01NSU8oMHhkOTRjKQorI2RlZmluZSBHRU4xMl9PQUdfQ0VDMl8w
IF9NTUlPKDB4ZDk1MCkKKyNkZWZpbmUgR0VOMTJfT0FHX0NFQzJfMSBfTU1JTygweGQ5NTQpCisj
ZGVmaW5lIEdFTjEyX09BR19DRUMzXzAgX01NSU8oMHhkOTU4KQorI2RlZmluZSBHRU4xMl9PQUdf
Q0VDM18xIF9NTUlPKDB4ZDk1YykKKyNkZWZpbmUgR0VOMTJfT0FHX0NFQzRfMCBfTU1JTygweGQ5
NjApCisjZGVmaW5lIEdFTjEyX09BR19DRUM0XzEgX01NSU8oMHhkOTY0KQorI2RlZmluZSBHRU4x
Ml9PQUdfQ0VDNV8wIF9NTUlPKDB4ZDk2OCkKKyNkZWZpbmUgR0VOMTJfT0FHX0NFQzVfMSBfTU1J
TygweGQ5NmMpCisjZGVmaW5lIEdFTjEyX09BR19DRUM2XzAgX01NSU8oMHhkOTcwKQorI2RlZmlu
ZSBHRU4xMl9PQUdfQ0VDNl8xIF9NTUlPKDB4ZDk3NCkKKyNkZWZpbmUgR0VOMTJfT0FHX0NFQzdf
MCBfTU1JTygweGQ5NzgpCisjZGVmaW5lIEdFTjEyX09BR19DRUM3XzEgX01NSU8oMHhkOTdjKQor
CisvKiBTYW1lIGxheW91dCBhcyBDRUNYX1kgKyBuZWdhdGUgMTEtYml0IGFycmF5ICovCisjZGVm
aW5lIEdFTjEyX09BR19TQ0VDMF8wIF9NTUlPKDB4ZGMwMCkKKyNkZWZpbmUgR0VOMTJfT0FHX1ND
RUMwXzEgX01NSU8oMHhkYzA0KQorI2RlZmluZSBHRU4xMl9PQUdfU0NFQzFfMCBfTU1JTygweGRj
MDgpCisjZGVmaW5lIEdFTjEyX09BR19TQ0VDMV8xIF9NTUlPKDB4ZGMwYykKKyNkZWZpbmUgR0VO
MTJfT0FHX1NDRUMyXzAgX01NSU8oMHhkYzEwKQorI2RlZmluZSBHRU4xMl9PQUdfU0NFQzJfMSBf
TU1JTygweGRjMTQpCisjZGVmaW5lIEdFTjEyX09BR19TQ0VDM18wIF9NTUlPKDB4ZGMxOCkKKyNk
ZWZpbmUgR0VOMTJfT0FHX1NDRUMzXzEgX01NSU8oMHhkYzFjKQorI2RlZmluZSBHRU4xMl9PQUdf
U0NFQzRfMCBfTU1JTygweGRjMjApCisjZGVmaW5lIEdFTjEyX09BR19TQ0VDNF8xIF9NTUlPKDB4
ZGMyNCkKKyNkZWZpbmUgR0VOMTJfT0FHX1NDRUM1XzAgX01NSU8oMHhkYzI4KQorI2RlZmluZSBH
RU4xMl9PQUdfU0NFQzVfMSBfTU1JTygweGRjMmMpCisjZGVmaW5lIEdFTjEyX09BR19TQ0VDNl8w
IF9NTUlPKDB4ZGMzMCkKKyNkZWZpbmUgR0VOMTJfT0FHX1NDRUM2XzEgX01NSU8oMHhkYzM0KQor
I2RlZmluZSBHRU4xMl9PQUdfU0NFQzdfMCBfTU1JTygweGRjMzgpCisjZGVmaW5lIEdFTjEyX09B
R19TQ0VDN18xIF9NTUlPKDB4ZGMzYykKKwogLyogT0EgcGVyZiBjb3VudGVycyAqLwogI2RlZmlu
ZSBPQV9QRVJGQ05UMV9MTyAgICAgIF9NTUlPKDB4OTFCOCkKICNkZWZpbmUgT0FfUEVSRkNOVDFf
SEkgICAgICBfTU1JTygweDkxQkMpCkBAIC0xMDM4LDYgKzExMzcsMTAgQEAgc3RhdGljIGlubGlu
ZSBib29sIGk5MTVfbW1pb19yZWdfdmFsaWQoaTkxNV9yZWdfdCByZWcpCiAjZGVmaW5lIE1JQ1JP
X0JQM19DT1VOVF9TVEFUVVMyMwlfTU1JTygweDk4MzgpCiAjZGVmaW5lIE1JQ1JPX0JQX0ZJUkVE
X0FSTUVECQlfTU1JTygweDk4M0MpCiAKKyNkZWZpbmUgR0VOMTJfT0FBX0RCR19SRUcgX01NSU8o
MHhkYzQ0KQorI2RlZmluZSBHRU4xMl9PQUdfT0FfUEVTUyBfTU1JTygweDJiMmMpCisjZGVmaW5l
IEdFTjEyX09BR19TUENUUl9DTkYgX01NSU8oMHhkYzQwKQorCiAjZGVmaW5lIEdEVF9DSElDS0VO
X0JJVFMgICAgX01NSU8oMHg5ODQwKQogI2RlZmluZSAgIEdUX05PQV9FTkFCTEUJICAgIDB4MDAw
MDAwODAKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvb2EvaTkxNV9vYV90Z2wu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L29hL2k5MTVfb2FfdGdsLmMKbmV3IGZpbGUgbW9kZSAx
MDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5hMjlkOTM3MDczNDUKLS0tIC9kZXYvbnVsbAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9vYS9pOTE1X29hX3RnbC5jCkBAIC0wLDAgKzEsMTIxIEBA
CisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCisvKgorICogQ29weXJpZ2h0IMKpIDIw
MTggSW50ZWwgQ29ycG9yYXRpb24KKyAqCisgKiBBdXRvZ2VuZXJhdGVkIGZpbGUgYnkgR1BVIFRv
cCA6IGh0dHBzOi8vZ2l0aHViLmNvbS9yaWIvZ3B1dG9wCisgKiBETyBOT1QgRURJVCBtYW51YWxs
eSEKKyAqLworCisjaW5jbHVkZSA8bGludXgvc3lzZnMuaD4KKworI2luY2x1ZGUgImk5MTVfZHJ2
LmgiCisjaW5jbHVkZSAiaTkxNV9vYV90Z2wuaCIKKworc3RhdGljIGNvbnN0IHN0cnVjdCBpOTE1
X29hX3JlZyBiX2NvdW50ZXJfY29uZmlnX3Rlc3Rfb2FbXSA9IHsKKwl7IF9NTUlPKDB4RDkyMCks
IDB4MDAwMDAwMDAgfSwKKwl7IF9NTUlPKDB4RDkwMCksIDB4MDAwMDAwMDAgfSwKKwl7IF9NTUlP
KDB4RDkwNCksIDB4RjA4MDAwMDAgfSwKKwl7IF9NTUlPKDB4RDkxMCksIDB4MDAwMDAwMDAgfSwK
Kwl7IF9NTUlPKDB4RDkxNCksIDB4RjA4MDAwMDAgfSwKKwl7IF9NTUlPKDB4REM0MCksIDB4MDBG
RjAwMDAgfSwKKwl7IF9NTUlPKDB4RDk0MCksIDB4MDAwMDAwMDQgfSwKKwl7IF9NTUlPKDB4RDk0
NCksIDB4MDAwMEZGRkYgfSwKKwl7IF9NTUlPKDB4REMwMCksIDB4MDAwMDAwMDQgfSwKKwl7IF9N
TUlPKDB4REMwNCksIDB4MDAwMEZGRkYgfSwKKwl7IF9NTUlPKDB4RDk0OCksIDB4MDAwMDAwMDMg
fSwKKwl7IF9NTUlPKDB4RDk0QyksIDB4MDAwMEZGRkYgfSwKKwl7IF9NTUlPKDB4REMwOCksIDB4
MDAwMDAwMDMgfSwKKwl7IF9NTUlPKDB4REMwQyksIDB4MDAwMEZGRkYgfSwKKwl7IF9NTUlPKDB4
RDk1MCksIDB4MDAwMDAwMDcgfSwKKwl7IF9NTUlPKDB4RDk1NCksIDB4MDAwMEZGRkYgfSwKKwl7
IF9NTUlPKDB4REMxMCksIDB4MDAwMDAwMDcgfSwKKwl7IF9NTUlPKDB4REMxNCksIDB4MDAwMEZG
RkYgfSwKKwl7IF9NTUlPKDB4RDk1OCksIDB4MDAxMDAwMDIgfSwKKwl7IF9NTUlPKDB4RDk1Qyks
IDB4MDAwMEZGRjcgfSwKKwl7IF9NTUlPKDB4REMxOCksIDB4MDAxMDAwMDIgfSwKKwl7IF9NTUlP
KDB4REMxQyksIDB4MDAwMEZGRjcgfSwKKwl7IF9NTUlPKDB4RDk2MCksIDB4MDAxMDAwMDIgfSwK
Kwl7IF9NTUlPKDB4RDk2NCksIDB4MDAwMEZGQ0YgfSwKKwl7IF9NTUlPKDB4REMyMCksIDB4MDAx
MDAwMDIgfSwKKwl7IF9NTUlPKDB4REMyNCksIDB4MDAwMEZGQ0YgfSwKKwl7IF9NTUlPKDB4RDk2
OCksIDB4MDAxMDAwODIgfSwKKwl7IF9NTUlPKDB4RDk2QyksIDB4MDAwMEZGRUYgfSwKKwl7IF9N
TUlPKDB4REMyOCksIDB4MDAxMDAwODIgfSwKKwl7IF9NTUlPKDB4REMyQyksIDB4MDAwMEZGRUYg
fSwKKwl7IF9NTUlPKDB4RDk3MCksIDB4MDAxMDAwQzIgfSwKKwl7IF9NTUlPKDB4RDk3NCksIDB4
MDAwMEZGRTcgfSwKKwl7IF9NTUlPKDB4REMzMCksIDB4MDAxMDAwQzIgfSwKKwl7IF9NTUlPKDB4
REMzNCksIDB4MDAwMEZGRTcgfSwKKwl7IF9NTUlPKDB4RDk3OCksIDB4MDAxMDAwMDEgfSwKKwl7
IF9NTUlPKDB4RDk3QyksIDB4MDAwMEZGRTcgfSwKKwl7IF9NTUlPKDB4REMzOCksIDB4MDAxMDAw
MDEgfSwKKwl7IF9NTUlPKDB4REMzQyksIDB4MDAwMEZGRTcgfSwKK307CisKK3N0YXRpYyBjb25z
dCBzdHJ1Y3QgaTkxNV9vYV9yZWcgZmxleF9ldV9jb25maWdfdGVzdF9vYVtdID0geworfTsKKwor
c3RhdGljIGNvbnN0IHN0cnVjdCBpOTE1X29hX3JlZyBtdXhfY29uZmlnX3Rlc3Rfb2FbXSA9IHsK
Kwl7IF9NTUlPKDB4MEQwNCksIDB4MDAwMDAyMDAgfSwKKwl7IF9NTUlPKDB4OTg0MCksIDB4MDAw
MDAwMDAgfSwKKwl7IF9NTUlPKDB4OTg4NCksIDB4MDAwMDAwMDAgfSwKKwl7IF9NTUlPKDB4OTg4
OCksIDB4MjgwRTAwMDAgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4MUUwRTAxNDcgfSwKKwl7IF9N
TUlPKDB4OTg4OCksIDB4MTgwRTAwMDAgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4MTYwRTAwMDAg
fSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4MUUwRjEwMDAgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4
MUUxMDQwMDAgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4MkUwMjAxMDAgfSwKKwl7IF9NTUlPKDB4
OTg4OCksIDB4MkMwMzAwMDQgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4MzgwMDMwMDAgfSwKKwl7
IF9NTUlPKDB4OTg4OCksIDB4MUUwQTgwMDAgfSwKKwl7IF9NTUlPKDB4OTg4NCksIDB4MDAwMDAw
MDMgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4NDkxMTAwMDAgfSwKKwl7IF9NTUlPKDB4OTg4OCks
IDB4NUQxMDE0MDAgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4MUQxNDAwMjAgfSwKKwl7IF9NTUlP
KDB4OTg4OCksIDB4MUQxMTAzQTMgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4MDExMTAwMDAgfSwK
Kwl7IF9NTUlPKDB4OTg4OCksIDB4NjExMTEwMDAgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4MUYx
MjgwMDAgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4MTcxMDAwMDAgfSwKKwl7IF9NTUlPKDB4OTg4
OCksIDB4NTUxMDA2MzAgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4NTcxMDAwMDAgfSwKKwl7IF9N
TUlPKDB4OTg4OCksIDB4MzExMDAwMDAgfSwKKwl7IF9NTUlPKDB4OTg4NCksIDB4MDAwMDAwMDMg
fSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4NjUxMDAwMDIgfSwKKwl7IF9NTUlPKDB4OTg4NCksIDB4
MDAwMDAwMDAgfSwKKwl7IF9NTUlPKDB4OTg4OCksIDB4NDIwMDAwMDEgfSwKK307CisKK3N0YXRp
YyBzc2l6ZV90CitzaG93X3Rlc3Rfb2FfaWQoc3RydWN0IGRldmljZSAqa2Rldiwgc3RydWN0IGRl
dmljZV9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIgKmJ1ZikKK3sKKwlyZXR1cm4gc3ByaW50ZihidWYs
ICIxXG4iKTsKK30KKwordm9pZAoraTkxNV9wZXJmX2xvYWRfdGVzdF9jb25maWdfdGdsKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3sKKwlzdHJsY3B5KGRldl9wcml2LT5wZXJm
LnRlc3RfY29uZmlnLnV1aWQsCisJCSI4MGE4MzNmMC0yNTA0LTQzMjEtODg5NC1lOTI3Nzg0NGNl
N2IiLAorCQlzaXplb2YoZGV2X3ByaXYtPnBlcmYudGVzdF9jb25maWcudXVpZCkpOworCWRldl9w
cml2LT5wZXJmLnRlc3RfY29uZmlnLmlkID0gMTsKKworCWRldl9wcml2LT5wZXJmLnRlc3RfY29u
ZmlnLm11eF9yZWdzID0gbXV4X2NvbmZpZ190ZXN0X29hOworCWRldl9wcml2LT5wZXJmLnRlc3Rf
Y29uZmlnLm11eF9yZWdzX2xlbiA9IEFSUkFZX1NJWkUobXV4X2NvbmZpZ190ZXN0X29hKTsKKwor
CWRldl9wcml2LT5wZXJmLnRlc3RfY29uZmlnLmJfY291bnRlcl9yZWdzID0gYl9jb3VudGVyX2Nv
bmZpZ190ZXN0X29hOworCWRldl9wcml2LT5wZXJmLnRlc3RfY29uZmlnLmJfY291bnRlcl9yZWdz
X2xlbiA9IEFSUkFZX1NJWkUoYl9jb3VudGVyX2NvbmZpZ190ZXN0X29hKTsKKworCWRldl9wcml2
LT5wZXJmLnRlc3RfY29uZmlnLmZsZXhfcmVncyA9IGZsZXhfZXVfY29uZmlnX3Rlc3Rfb2E7CisJ
ZGV2X3ByaXYtPnBlcmYudGVzdF9jb25maWcuZmxleF9yZWdzX2xlbiA9IEFSUkFZX1NJWkUoZmxl
eF9ldV9jb25maWdfdGVzdF9vYSk7CisKKwlkZXZfcHJpdi0+cGVyZi50ZXN0X2NvbmZpZy5zeXNm
c19tZXRyaWMubmFtZSA9ICI4MGE4MzNmMC0yNTA0LTQzMjEtODg5NC1lOTI3Nzg0NGNlN2IiOwor
CWRldl9wcml2LT5wZXJmLnRlc3RfY29uZmlnLnN5c2ZzX21ldHJpYy5hdHRycyA9IGRldl9wcml2
LT5wZXJmLnRlc3RfY29uZmlnLmF0dHJzOworCisJZGV2X3ByaXYtPnBlcmYudGVzdF9jb25maWcu
YXR0cnNbMF0gPSAmZGV2X3ByaXYtPnBlcmYudGVzdF9jb25maWcuc3lzZnNfbWV0cmljX2lkLmF0
dHI7CisKKwlkZXZfcHJpdi0+cGVyZi50ZXN0X2NvbmZpZy5zeXNmc19tZXRyaWNfaWQuYXR0ci5u
YW1lID0gImlkIjsKKwlkZXZfcHJpdi0+cGVyZi50ZXN0X2NvbmZpZy5zeXNmc19tZXRyaWNfaWQu
YXR0ci5tb2RlID0gMDQ0NDsKKwlkZXZfcHJpdi0+cGVyZi50ZXN0X2NvbmZpZy5zeXNmc19tZXRy
aWNfaWQuc2hvdyA9IHNob3dfdGVzdF9vYV9pZDsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L29hL2k5MTVfb2FfdGdsLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9vYS9pOTE1
X29hX3RnbC5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uNGMyNWYw
YmU4MjVjCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvb2EvaTkxNV9v
YV90Z2wuaApAQCAtMCwwICsxLDE2IEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlU
ICovCisvKgorICogQ29weXJpZ2h0IMKpIDIwMTggSW50ZWwgQ29ycG9yYXRpb24KKyAqCisgKiBB
dXRvZ2VuZXJhdGVkIGZpbGUgYnkgR1BVIFRvcCA6IGh0dHBzOi8vZ2l0aHViLmNvbS9yaWIvZ3B1
dG9wCisgKiBETyBOT1QgRURJVCBtYW51YWxseSEKKyAqLworCisjaWZuZGVmIF9fSTkxNV9PQV9U
R0xfSF9fCisjZGVmaW5lIF9fSTkxNV9PQV9UR0xfSF9fCisKK3N0cnVjdCBkcm1faTkxNV9wcml2
YXRlOworCit2b2lkIGk5MTVfcGVyZl9sb2FkX3Rlc3RfY29uZmlnX3RnbChzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOworCisjZW5kaWYKLS0gCjIuMjAuMQoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlz
dApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

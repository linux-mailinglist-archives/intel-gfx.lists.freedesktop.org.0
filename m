Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 00F1697AD9
	for <lists+intel-gfx@lfdr.de>; Wed, 21 Aug 2019 15:32:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E873F6E942;
	Wed, 21 Aug 2019 13:32:26 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mblankhorst.nl (mblankhorst.nl [141.105.120.124])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 82F2D6E33F
 for <intel-gfx@lists.freedesktop.org>; Wed, 21 Aug 2019 13:32:25 +0000 (UTC)
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 21 Aug 2019 15:32:16 +0200
Message-Id: <20190821133221.29456-6-maarten.lankhorst@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190821133221.29456-1-maarten.lankhorst@linux.intel.com>
References: <20190821133221.29456-1-maarten.lankhorst@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 05/10] drm/i915: Kill off is_planar_yuv_format
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SW5zdGVhZCBvZiByZWx5aW5nIG9uIHRoZSBmb3VyY2MsIHVzZSB0aGUgZHJtIGZvdXJjYyBoZWxw
ZXIKZHJtX2Zvcm1hdF9pbmZvX2lzX3l1dl9zZW1pcGxhbmFyKCkuCgpTaWduZWQtb2ZmLWJ5OiBN
YWFydGVuIExhbmtob3JzdCA8bWFhcnRlbi5sYW5raG9yc3RAbGludXguaW50ZWwuY29tPgotLS0K
IC4uLi9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWNfcGxhbmUuYyB8ICAyICstCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyAgfCAxMCArKysrKy0t
LS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuaCAgfCAgNCAr
KystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jICAgfCAxOSAr
KystLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nw
cml0ZS5oICAgfCAgMSAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jICAgICAgICAg
ICAgICAgfCAxMiArKysrKy0tLS0tLS0KIDYgZmlsZXMgY2hhbmdlZCwgMTcgaW5zZXJ0aW9ucygr
KSwgMzEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9hdG9taWNfcGxhbmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfYXRvbWljX3BsYW5lLmMKaW5kZXggNjhiZmI0NjdmMTk1Li5lYjc4NWYxNDI2NTEgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljX3BsYW5l
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWNfcGxhbmUu
YwpAQCAtMTY0LDcgKzE2NCw3IEBAIGludCBpbnRlbF9wbGFuZV9hdG9taWNfY2hlY2tfd2l0aF9z
dGF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfCiAJCW5ld19jcnRj
X3N0YXRlLT5hY3RpdmVfcGxhbmVzIHw9IEJJVChwbGFuZS0+aWQpOwogCiAJaWYgKG5ld19wbGFu
ZV9zdGF0ZS0+YmFzZS52aXNpYmxlICYmCi0JICAgIGlzX3BsYW5hcl95dXZfZm9ybWF0KG5ld19w
bGFuZV9zdGF0ZS0+YmFzZS5mYi0+Zm9ybWF0LT5mb3JtYXQpKQorCSAgICBkcm1fZm9ybWF0X2lu
Zm9faXNfeXV2X3NlbWlwbGFuYXIobmV3X3BsYW5lX3N0YXRlLT5iYXNlLmZiLT5mb3JtYXQpKQog
CQluZXdfY3J0Y19zdGF0ZS0+bnYxMl9wbGFuZXMgfD0gQklUKHBsYW5lLT5pZCk7CiAKIAlpZiAo
bmV3X3BsYW5lX3N0YXRlLT5iYXNlLnZpc2libGUgJiYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKaW5kZXggZjUwNGI2ZjNjNWY0Li5mYTc3MjEyZDkzN2Qg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC0z
NTI5LDcgKzM1MjksNyBAQCBpbnQgc2tsX2NoZWNrX3BsYW5lX3N1cmZhY2Uoc3RydWN0IGludGVs
X3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSkKIAkgKiBIYW5kbGUgdGhlIEFVWCBzdXJmYWNlIGZp
cnN0IHNpbmNlCiAJICogdGhlIG1haW4gc3VyZmFjZSBzZXR1cCBkZXBlbmRzIG9uIGl0LgogCSAq
LwotCWlmIChpc19wbGFuYXJfeXV2X2Zvcm1hdChmYi0+Zm9ybWF0LT5mb3JtYXQpKSB7CisJaWYg
KGRybV9mb3JtYXRfaW5mb19pc195dXZfc2VtaXBsYW5hcihmYi0+Zm9ybWF0KSkgewogCQlyZXQg
PSBza2xfY2hlY2tfbnYxMl9hdXhfc3VyZmFjZShwbGFuZV9zdGF0ZSk7CiAJCWlmIChyZXQpCiAJ
CQlyZXR1cm4gcmV0OwpAQCAtNTQ0Nyw3ICs1NDQ3LDcgQEAgc2tsX3VwZGF0ZV9zY2FsZXIoc3Ry
dWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsIGJvb2wgZm9yY2VfZGV0YWNoLAogCQly
ZXR1cm4gMDsKIAl9CiAKLQlpZiAoZm9ybWF0ICYmIGlzX3BsYW5hcl95dXZfZm9ybWF0KGZvcm1h
dC0+Zm9ybWF0KSAmJgorCWlmIChmb3JtYXQgJiYgZHJtX2Zvcm1hdF9pbmZvX2lzX3l1dl9zZW1p
cGxhbmFyKGZvcm1hdCkgJiYKIAkgICAgKHNyY19oIDwgU0tMX01JTl9ZVVZfNDIwX1NSQ19IIHx8
IHNyY193IDwgU0tMX01JTl9ZVVZfNDIwX1NSQ19XKSkgewogCQlEUk1fREVCVUdfS01TKCJQbGFu
YXIgWVVWOiBzcmMgZGltZW5zaW9ucyBub3QgbWV0XG4iKTsKIAkJcmV0dXJuIC1FSU5WQUw7CkBA
IC01NTI0LDcgKzU1MjQsNyBAQCBzdGF0aWMgaW50IHNrbF91cGRhdGVfc2NhbGVyX3BsYW5lKHN0
cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCiAJLyogUHJlLWdlbjExIGFuZCBT
RFIgcGxhbmVzIGFsd2F5cyBuZWVkIGEgc2NhbGVyIGZvciBwbGFuYXIgZm9ybWF0cy4gKi8KIAlp
ZiAoIWljbF9pc19oZHJfcGxhbmUoZGV2X3ByaXYsIGludGVsX3BsYW5lLT5pZCkgJiYKLQkgICAg
ZmIgJiYgaXNfcGxhbmFyX3l1dl9mb3JtYXQoZmItPmZvcm1hdC0+Zm9ybWF0KSkKKwkgICAgZmIg
JiYgZHJtX2Zvcm1hdF9pbmZvX2lzX3l1dl9zZW1pcGxhbmFyKGZiLT5mb3JtYXQpKQogCQluZWVk
X3NjYWxlciA9IHRydWU7CiAKIAlyZXQgPSBza2xfdXBkYXRlX3NjYWxlcihjcnRjX3N0YXRlLCBm
b3JjZV9kZXRhY2gsCkBAIC0xNDUwMCw3ICsxNDUwMCw3IEBAIGludGVsX2NsZWFudXBfcGxhbmVf
ZmIoc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCiAKIGludAogc2tsX21heF9zY2FsZShjb25zdCBz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKLQkgICAgICB1MzIgcGl4ZWxfZm9y
bWF0KQorCSAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZm9ybWF0X2luZm8gKnBpeGVsX2Zvcm1hdCkK
IHsKIAlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+
dWFwaS5jcnRjKTsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1
KGNydGMtPmJhc2UuZGV2KTsKQEAgLTE0NTI1LDcgKzE0NTI1LDcgQEAgc2tsX21heF9zY2FsZShj
b25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkgKiAgICAgICAgICAg
IG9yCiAJICogICAgY2RjbGsvY3J0Y19jbG9jawogCSAqLwotCW11bHQgPSBpc19wbGFuYXJfeXV2
X2Zvcm1hdChwaXhlbF9mb3JtYXQpID8gMiA6IDM7CisJbXVsdCA9IGRybV9mb3JtYXRfaW5mb19p
c195dXZfc2VtaXBsYW5hcihwaXhlbF9mb3JtYXQpID8gMiA6IDM7CiAJdG1wY2xrMSA9ICgxIDw8
IDE2KSAqIG11bHQgLSAxOwogCXRtcGNsazIgPSAoMSA8PCA4KSAqICgobWF4X2RvdGNsayA8PCA4
KSAvIGNydGNfY2xvY2spOwogCW1heF9zY2FsZSA9IG1pbih0bXBjbGsxLCB0bXBjbGsyKTsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5oIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmgKaW5kZXggZTU3ZTY5
NjkwNTFkLi4zZTNhM2JjYTEzZjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGlzcGxheS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGlzcGxheS5oCkBAIC0zNCw2ICszNCw3IEBAIHN0cnVjdCBkcm1fY29ubmVjdG9yOwog
c3RydWN0IGRybV9kZXZpY2U7CiBzdHJ1Y3QgZHJtX2VuY29kZXI7CiBzdHJ1Y3QgZHJtX2ZpbGU7
CitzdHJ1Y3QgZHJtX2Zvcm1hdF9pbmZvOwogc3RydWN0IGRybV9mcmFtZWJ1ZmZlcjsKIHN0cnVj
dCBkcm1faTkxNV9lcnJvcl9zdGF0ZV9idWY7CiBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdDsK
QEAgLTUyMSw3ICs1MjIsOCBAQCB2b2lkIGludGVsX2NydGNfYXJtX2ZpZm9fdW5kZXJydW4oc3Ry
dWN0IGludGVsX2NydGMgKmNydGMsCiB1MTYgc2tsX3NjYWxlcl9jYWxjX3BoYXNlKGludCBzdWIs
IGludCBzY2FsZSwgYm9vbCBjaHJvbWFfY2VudGVyKTsKIGludCBza2xfdXBkYXRlX3NjYWxlcl9j
cnRjKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKTsKIGludCBza2xfbWF4X3Nj
YWxlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAotCQkgIHUzMiBw
aXhlbF9mb3JtYXQpOworCQkgIGNvbnN0IHN0cnVjdCBkcm1fZm9ybWF0X2luZm8gKmZvcm1hdCk7
CisKIHUzMiBnbGtfcGxhbmVfY29sb3JfY3RsKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpjcnRjX3N0YXRlLAogCQkJY29uc3Qgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9z
dGF0ZSk7CiB1MzIgZ2xrX3BsYW5lX2NvbG9yX2N0bF9jcnRjKGNvbnN0IHN0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlICpjcnRjX3N0YXRlKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX3Nwcml0ZS5jCmluZGV4IDI0MmZhZmQxMzJjYy4uNzJlMTg0MzViYjM2IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMKQEAgLTQ4LDE5ICs0OCw2IEBA
CiAjaW5jbHVkZSAiaW50ZWxfcHNyLmgiCiAjaW5jbHVkZSAiaW50ZWxfc3ByaXRlLmgiCiAKLWJv
b2wgaXNfcGxhbmFyX3l1dl9mb3JtYXQodTMyIHBpeGVsZm9ybWF0KQotewotCXN3aXRjaCAocGl4
ZWxmb3JtYXQpIHsKLQljYXNlIERSTV9GT1JNQVRfTlYxMjoKLQljYXNlIERSTV9GT1JNQVRfUDAx
MDoKLQljYXNlIERSTV9GT1JNQVRfUDAxMjoKLQljYXNlIERSTV9GT1JNQVRfUDAxNjoKLQkJcmV0
dXJuIHRydWU7Ci0JZGVmYXVsdDoKLQkJcmV0dXJuIGZhbHNlOwotCX0KLX0KLQogaW50IGludGVs
X3VzZWNzX3RvX3NjYW5saW5lcyhjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0
ZWRfbW9kZSwKIAkJCSAgICAgaW50IHVzZWNzKQogewpAQCAtMzgyLDcgKzM2OSw3IEBAIHNrbF9w
cm9ncmFtX3NjYWxlcihzdHJ1Y3QgaW50ZWxfcGxhbmUgKnBsYW5lLAogCQkJCSAgICAgIDAsIElO
VF9NQVgpOwogCiAJLyogVE9ETzogaGFuZGxlIHN1Yi1waXhlbCBjb29yZGluYXRlcyAqLwotCWlm
IChpc19wbGFuYXJfeXV2X2Zvcm1hdChwbGFuZV9zdGF0ZS0+YmFzZS5mYi0+Zm9ybWF0LT5mb3Jt
YXQpICYmCisJaWYgKGRybV9mb3JtYXRfaW5mb19pc195dXZfc2VtaXBsYW5hcihwbGFuZV9zdGF0
ZS0+YmFzZS5mYi0+Zm9ybWF0KSAmJgogCSAgICAhaWNsX2lzX2hkcl9wbGFuZShkZXZfcHJpdiwg
cGxhbmUtPmlkKSkgewogCQl5X2hwaGFzZSA9IHNrbF9zY2FsZXJfY2FsY19waGFzZSgxLCBoc2Nh
bGUsIGZhbHNlKTsKIAkJeV92cGhhc2UgPSBza2xfc2NhbGVyX2NhbGNfcGhhc2UoMSwgdnNjYWxl
LCBmYWxzZSk7CkBAIC0xNzkxLDcgKzE3NzgsNyBAQCBzdGF0aWMgaW50IHNrbF9wbGFuZV9jaGVj
a19udjEyX3JvdGF0aW9uKGNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqcGxhbmVfcwog
CWludCBzcmNfdyA9IGRybV9yZWN0X3dpZHRoKCZwbGFuZV9zdGF0ZS0+YmFzZS5zcmMpID4+IDE2
OwogCiAJLyogRGlzcGxheSBXQSAjMTEwNiAqLwotCWlmIChpc19wbGFuYXJfeXV2X2Zvcm1hdChm
Yi0+Zm9ybWF0LT5mb3JtYXQpICYmIHNyY193ICYgMyAmJgorCWlmIChkcm1fZm9ybWF0X2luZm9f
aXNfeXV2X3NlbWlwbGFuYXIoZmItPmZvcm1hdCkgJiYgc3JjX3cgJiAzICYmCiAJICAgIChyb3Rh
dGlvbiA9PSBEUk1fTU9ERV9ST1RBVEVfMjcwIHx8CiAJICAgICByb3RhdGlvbiA9PSAoRFJNX01P
REVfUkVGTEVDVF9YIHwgRFJNX01PREVfUk9UQVRFXzkwKSkpIHsKIAkJRFJNX0RFQlVHX0tNUygi
c3JjIHdpZHRoIG11c3QgYmUgbXVsdGlwbGUgb2YgNCBmb3Igcm90YXRlZCBwbGFuYXIgWVVWXG4i
KTsKQEAgLTE4MTgsNyArMTgwNSw3IEBAIHN0YXRpYyBpbnQgc2tsX3BsYW5lX2NoZWNrKHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCS8qIHVzZSBzY2FsZXIgd2hlbiBjb2xv
cmtleSBpcyBub3QgcmVxdWlyZWQgKi8KIAlpZiAoIXBsYW5lX3N0YXRlLT5ja2V5LmZsYWdzICYm
IGludGVsX2ZiX3NjYWxhYmxlKGZiKSkgewogCQltaW5fc2NhbGUgPSAxOwotCQltYXhfc2NhbGUg
PSBza2xfbWF4X3NjYWxlKGNydGNfc3RhdGUsIGZiLT5mb3JtYXQtPmZvcm1hdCk7CisJCW1heF9z
Y2FsZSA9IHNrbF9tYXhfc2NhbGUoY3J0Y19zdGF0ZSwgZmItPmZvcm1hdCk7CiAJfQogCiAJcmV0
ID0gZHJtX2F0b21pY19oZWxwZXJfY2hlY2tfcGxhbmVfc3RhdGUoJnBsYW5lX3N0YXRlLT5iYXNl
LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUu
aCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmgKaW5kZXggMDkz
YTJkMTU2ZjFlLi4yMjkzMzYyMTRmNjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9zcHJpdGUuaApAQCAtMTcsNyArMTcsNiBAQCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZTsKIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlOwogc3RydWN0IGludGVsX3BsYW5lX3N0YXRlOwog
Ci1ib29sIGlzX3BsYW5hcl95dXZfZm9ybWF0KHUzMiBwaXhlbGZvcm1hdCk7CiBpbnQgaW50ZWxf
dXNlY3NfdG9fc2NhbmxpbmVzKGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3Rl
ZF9tb2RlLAogCQkJICAgICBpbnQgdXNlY3MpOwogc3RydWN0IGludGVsX3BsYW5lICppbnRlbF9z
cHJpdGVfcGxhbmVfY3JlYXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9wbS5jCmluZGV4IDI2MjEzNjI5NWI1Ni4uZjEzMDE2YWRlN2UxIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX3BtLmMKQEAgLTQwMDMsNyArNDAwMyw3IEBAIHNrbF9kZGJfZ2V0X2h3
X3BsYW5lX3N0YXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJdmFsID0g
STkxNV9SRUFEKFBMQU5FX0JVRl9DRkcocGlwZSwgcGxhbmVfaWQpKTsKIAkJdmFsMiA9IEk5MTVf
UkVBRChQTEFORV9OVjEyX0JVRl9DRkcocGlwZSwgcGxhbmVfaWQpKTsKIAotCQlpZiAoaXNfcGxh
bmFyX3l1dl9mb3JtYXQoZm91cmNjKSkKKwkJaWYgKGRybV9mb3JtYXRfaW5mb19pc195dXZfc2Vt
aXBsYW5hcihkcm1fZm9ybWF0X2luZm8oZm91cmNjKSkpCiAJCQlzd2FwKHZhbCwgdmFsMik7CiAK
IAkJc2tsX2RkYl9lbnRyeV9pbml0X2Zyb21faHcoZGV2X3ByaXYsIGRkYl95LCB2YWwpOwpAQCAt
NDE5Nyw3ICs0MTk3LDYgQEAgc2tsX3BsYW5lX3JlbGF0aXZlX2RhdGFfcmF0ZShjb25zdCBzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAl1MzIgZGF0YV9yYXRlOwogCXUzMiB3
aWR0aCA9IDAsIGhlaWdodCA9IDA7CiAJc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmI7Ci0JdTMy
IGZvcm1hdDsKIAl1aW50X2ZpeGVkXzE2XzE2X3QgZG93bl9zY2FsZV9hbW91bnQ7CiAJdTY0IHJh
dGU7CiAKQEAgLTQyMDUsMTEgKzQyMDQsMTAgQEAgc2tsX3BsYW5lX3JlbGF0aXZlX2RhdGFfcmF0
ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJcmV0dXJuIDA7
CiAKIAlmYiA9IHBsYW5lX3N0YXRlLT5iYXNlLmZiOwotCWZvcm1hdCA9IGZiLT5mb3JtYXQtPmZv
cm1hdDsKIAogCWlmIChpbnRlbF9wbGFuZS0+aWQgPT0gUExBTkVfQ1VSU09SKQogCQlyZXR1cm4g
MDsKLQlpZiAocGxhbmUgPT0gMSAmJiAhaXNfcGxhbmFyX3l1dl9mb3JtYXQoZm9ybWF0KSkKKwlp
ZiAocGxhbmUgPT0gMSAmJiAhZHJtX2Zvcm1hdF9pbmZvX2lzX3l1dl9zZW1pcGxhbmFyKGZiLT5m
b3JtYXQpKQogCQlyZXR1cm4gMDsKIAogCS8qCkBAIC00MjIxLDcgKzQyMTksNyBAQCBza2xfcGxh
bmVfcmVsYXRpdmVfZGF0YV9yYXRlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlLAogCWhlaWdodCA9IGRybV9yZWN0X2hlaWdodCgmcGxhbmVfc3RhdGUtPmJhc2Uuc3Jj
KSA+PiAxNjsKIAogCS8qIFVWIHBsYW5lIGRvZXMgMS8yIHBpeGVsIHN1Yi1zYW1wbGluZyAqLwot
CWlmIChwbGFuZSA9PSAxICYmIGlzX3BsYW5hcl95dXZfZm9ybWF0KGZvcm1hdCkpIHsKKwlpZiAo
cGxhbmUgPT0gMSAmJiBkcm1fZm9ybWF0X2luZm9faXNfeXV2X3NlbWlwbGFuYXIoZmItPmZvcm1h
dCkpIHsKIAkJd2lkdGggLz0gMjsKIAkJaGVpZ2h0IC89IDI7CiAJfQpAQCAtNDYzNyw3ICs0NjM1
LDcgQEAgc2tsX2NvbXB1dGVfd21fcGFyYW1zKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpjcnRjX3N0YXRlLAogCXUzMiBpbnRlcm1fcGJwbDsKIAogCS8qIG9ubHkgcGxhbmFyIGZvcm1h
dCBoYXMgdHdvIHBsYW5lcyAqLwotCWlmIChjb2xvcl9wbGFuZSA9PSAxICYmICFpc19wbGFuYXJf
eXV2X2Zvcm1hdChmb3JtYXQtPmZvcm1hdCkpIHsKKwlpZiAoY29sb3JfcGxhbmUgPT0gMSAmJiAh
ZHJtX2Zvcm1hdF9pbmZvX2lzX3l1dl9zZW1pcGxhbmFyKGZvcm1hdCkpIHsKIAkJRFJNX0RFQlVH
X0tNUygiTm9uIHBsYW5hciBmb3JtYXQgaGF2ZSBzaW5nbGUgcGxhbmVcbiIpOwogCQlyZXR1cm4g
LUVJTlZBTDsKIAl9CkBAIC00NjQ5LDcgKzQ2NDcsNyBAQCBza2xfY29tcHV0ZV93bV9wYXJhbXMo
Y29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJd3AtPnhfdGlsZWQg
PSBtb2RpZmllciA9PSBJOTE1X0ZPUk1BVF9NT0RfWF9USUxFRDsKIAl3cC0+cmNfc3VyZmFjZSA9
IG1vZGlmaWVyID09IEk5MTVfRk9STUFUX01PRF9ZX1RJTEVEX0NDUyB8fAogCQkJIG1vZGlmaWVy
ID09IEk5MTVfRk9STUFUX01PRF9ZZl9USUxFRF9DQ1M7Ci0Jd3AtPmlzX3BsYW5hciA9IGlzX3Bs
YW5hcl95dXZfZm9ybWF0KGZvcm1hdC0+Zm9ybWF0KTsKKwl3cC0+aXNfcGxhbmFyID0gZHJtX2Zv
cm1hdF9pbmZvX2lzX3l1dl9zZW1pcGxhbmFyKGZvcm1hdCk7CiAKIAl3cC0+d2lkdGggPSB3aWR0
aDsKIAlpZiAoY29sb3JfcGxhbmUgPT0gMSAmJiB3cC0+aXNfcGxhbmFyKQotLSAKMi4yMC4xCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

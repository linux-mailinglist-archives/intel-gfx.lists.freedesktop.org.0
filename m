Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1E3F3118593
	for <lists+intel-gfx@lfdr.de>; Tue, 10 Dec 2019 11:52:20 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 766186E8B5;
	Tue, 10 Dec 2019 10:52:18 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6A45A6E8B3
 for <intel-gfx@lists.freedesktop.org>; Tue, 10 Dec 2019 10:52:16 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Dec 2019 02:52:15 -0800
X-IronPort-AV: E=Sophos;i="5.69,299,1571727600"; d="scan'208";a="215533773"
Received: from rmoran-mobl1.ger.corp.intel.com (HELO localhost)
 ([10.252.35.46])
 by orsmga003-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Dec 2019 02:52:13 -0800
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 10 Dec 2019 12:50:56 +0200
Message-Id: <a698780362b8d6955d115ef8bb6cf1f7aabbee00.1575974743.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1575974743.git.jani.nikula@intel.com>
References: <cover.1575974743.git.jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [v4.1 12/16] drm/i915/dsi: take compression into
 account in afe_clk()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UGFzcyBjcnRjX3N0YXRlIHRvIGFmZV9jbGsoKSB0byBiZSBhYmxlIHRvIHRha2UgY29tcHJlc3Np
b24gaW50byBhY2NvdW50CmluIHRoZSBjb21wdXRhdGlvbi4gT25jZSB3ZSBlbmFibGUgY29tcHJl
c3Npb24sIHRoYXQgaXMuCgpDYzogVmFuZGl0YSBLdWxrYXJuaSA8dmFuZGl0YS5rdWxrYXJuaUBp
bnRlbC5jb20+CkNjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwu
Y29tPgpSZXZpZXdlZC1ieTogVmFuZGl0YSBLdWxrYXJuaSA8dmFuZGl0YS5rdWxrYXJuaUBpbnRl
bC5jb20+ClNpZ25lZC1vZmYtYnk6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBpbnRlbC5jb20+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pY2xfZHNpLmMgfCA0MCArKysrKysr
KysrKysrKystLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDI0IGluc2VydGlvbnMoKyksIDE2
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aWNsX2RzaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pY2xfZHNpLmMKaW5kZXgg
ZDU3NmYyOWNlZjc1Li41MTQ5YTI4YTg3NGIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaWNsX2RzaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aWNsX2RzaS5jCkBAIC0zMDIsMTcgKzMwMiwyMiBAQCBzdGF0aWMgdm9pZCBjb25maWd1cmVfZHVh
bF9saW5rX21vZGUoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiB9CiAKIC8qIGFrYSBE
U0kgOFggY2xvY2sgKi8KLXN0YXRpYyBpbnQgYWZlX2NsayhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAq
ZW5jb2RlcikKK3N0YXRpYyBpbnQgYWZlX2NsayhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2Rl
ciwKKwkJICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiB7CiAJ
c3RydWN0IGludGVsX2RzaSAqaW50ZWxfZHNpID0gZW5jX3RvX2ludGVsX2RzaSgmZW5jb2Rlci0+
YmFzZSk7CiAJaW50IGJwcDsKIAotCWJwcCA9IG1pcGlfZHNpX3BpeGVsX2Zvcm1hdF90b19icHAo
aW50ZWxfZHNpLT5waXhlbF9mb3JtYXQpOworCWlmIChjcnRjX3N0YXRlLT5kc2MuY29tcHJlc3Np
b25fZW5hYmxlKQorCQlicHAgPSBjcnRjX3N0YXRlLT5kc2MuY29tcHJlc3NlZF9icHA7CisJZWxz
ZQorCQlicHAgPSBtaXBpX2RzaV9waXhlbF9mb3JtYXRfdG9fYnBwKGludGVsX2RzaS0+cGl4ZWxf
Zm9ybWF0KTsKIAogCXJldHVybiBESVZfUk9VTkRfQ0xPU0VTVChpbnRlbF9kc2ktPnBjbGsgKiBi
cHAsIGludGVsX2RzaS0+bGFuZV9jb3VudCk7CiB9CiAKLXN0YXRpYyB2b2lkIGdlbjExX2RzaV9w
cm9ncmFtX2VzY19jbGtfZGl2KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQorc3RhdGlj
IHZvaWQgZ2VuMTFfZHNpX3Byb2dyYW1fZXNjX2Nsa19kaXYoc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXIsCisJCQkJCSAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3Rh
dGUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShlbmNv
ZGVyLT5iYXNlLmRldik7CiAJc3RydWN0IGludGVsX2RzaSAqaW50ZWxfZHNpID0gZW5jX3RvX2lu
dGVsX2RzaSgmZW5jb2Rlci0+YmFzZSk7CkBAIC0zMjAsNyArMzI1LDcgQEAgc3RhdGljIHZvaWQg
Z2VuMTFfZHNpX3Byb2dyYW1fZXNjX2Nsa19kaXYoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29k
ZXIpCiAJaW50IGFmZV9jbGtfa2h6OwogCXUzMiBlc2NfY2xrX2Rpdl9tOwogCi0JYWZlX2Nsa19r
aHogPSBhZmVfY2xrKGVuY29kZXIpOworCWFmZV9jbGtfa2h6ID0gYWZlX2NsayhlbmNvZGVyLCBj
cnRjX3N0YXRlKTsKIAllc2NfY2xrX2Rpdl9tID0gRElWX1JPVU5EX1VQKGFmZV9jbGtfa2h6LCBE
U0lfTUFYX0VTQ19DTEspOwogCiAJZm9yX2VhY2hfZHNpX3BvcnQocG9ydCwgaW50ZWxfZHNpLT5w
b3J0cykgewpAQCAtNDk4LDcgKzUwMyw5IEBAIHN0YXRpYyB2b2lkIGdlbjExX2RzaV9lbmFibGVf
ZGRpX2J1ZmZlcihzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikKIAl9CiB9CiAKLXN0YXRp
YyB2b2lkIGdlbjExX2RzaV9zZXR1cF9kcGh5X3RpbWluZ3Moc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXIpCitzdGF0aWMgdm9pZAorZ2VuMTFfZHNpX3NldHVwX2RwaHlfdGltaW5ncyhzdHJ1
Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKKwkJCSAgICAgY29uc3Qgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CiAJc3RydWN0IGludGVsX2RzaSAqaW50
ZWxfZHNpID0gZW5jX3RvX2ludGVsX2RzaSgmZW5jb2Rlci0+YmFzZSk7CkBAIC01MzksNyArNTQ2
LDcgQEAgc3RhdGljIHZvaWQgZ2VuMTFfZHNpX3NldHVwX2RwaHlfdGltaW5ncyhzdHJ1Y3QgaW50
ZWxfZW5jb2RlciAqZW5jb2RlcikKIAkgKiBsZWF2ZSBhbGwgZmllbGRzIGF0IEhXIGRlZmF1bHQg
dmFsdWVzLgogCSAqLwogCWlmIChJU19HRU4oZGV2X3ByaXYsIDExKSkgewotCQlpZiAoYWZlX2Ns
ayhlbmNvZGVyKSA8PSA4MDAwMDApIHsKKwkJaWYgKGFmZV9jbGsoZW5jb2RlciwgY3J0Y19zdGF0
ZSkgPD0gODAwMDAwKSB7CiAJCQlmb3JfZWFjaF9kc2lfcG9ydChwb3J0LCBpbnRlbF9kc2ktPnBv
cnRzKSB7CiAJCQkJdG1wID0gSTkxNV9SRUFEKERQSFlfVEFfVElNSU5HX1BBUkFNKHBvcnQpKTsK
IAkJCQl0bXAgJj0gflRBX1NVUkVfTUFTSzsKQEAgLTY0OSw3ICs2NTYsNyBAQCBnZW4xMV9kc2lf
Y29uZmlndXJlX3RyYW5zY29kZXIoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJCQl0
bXAgfD0gRU9UUF9ESVNBQkxFRDsKIAogCQkvKiBlbmFibGUgbGluayBjYWxpYnJhdGlvbiBpZiBm
cmVxID4gMS41R2JwcyAqLwotCQlpZiAoYWZlX2NsayhlbmNvZGVyKSA+PSAxNTAwICogMTAwMCkg
eworCQlpZiAoYWZlX2NsayhlbmNvZGVyLCBwaXBlX2NvbmZpZykgPj0gMTUwMCAqIDEwMDApIHsK
IAkJCXRtcCAmPSB+TElOS19DQUxJQlJBVElPTl9NQVNLOwogCQkJdG1wIHw9IENBTElCUkFUSU9O
X0VOQUJMRURfSU5JVElBTF9PTkxZOwogCQl9CkBAIC05MTUsNyArOTIyLDggQEAgc3RhdGljIHZv
aWQgZ2VuMTFfZHNpX2VuYWJsZV90cmFuc2NvZGVyKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNv
ZGVyKQogCX0KIH0KIAotc3RhdGljIHZvaWQgZ2VuMTFfZHNpX3NldHVwX3RpbWVvdXRzKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQorc3RhdGljIHZvaWQgZ2VuMTFfZHNpX3NldHVwX3Rp
bWVvdXRzKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAorCQkJCSAgICAgY29uc3Qgc3Ry
dWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CiAJc3RydWN0IGlu
dGVsX2RzaSAqaW50ZWxfZHNpID0gZW5jX3RvX2ludGVsX2RzaSgmZW5jb2Rlci0+YmFzZSk7CkBA
IC05MzAsNyArOTM4LDcgQEAgc3RhdGljIHZvaWQgZ2VuMTFfZHNpX3NldHVwX3RpbWVvdXRzKHN0
cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQogCSAqIFRJTUVfTlMgPSAoQllURV9DTEtfQ09V
TlQgKiA4ICogMTBeNikvIEJpdHJhdGUKIAkgKiBFU0NBUEVfQ0xLX0NPVU5UICA9IFRJTUVfTlMv
RVNDX0NMS19OUwogCSAqLwotCWRpdmlzb3IgPSBpbnRlbF9kc2lfdGxweF9ucyhpbnRlbF9kc2kp
ICogYWZlX2NsayhlbmNvZGVyKSAqIDEwMDA7CisJZGl2aXNvciA9IGludGVsX2RzaV90bHB4X25z
KGludGVsX2RzaSkgKiBhZmVfY2xrKGVuY29kZXIsIGNydGNfc3RhdGUpICogMTAwMDsKIAltdWwg
PSA4ICogMTAwMDAwMDsKIAloc190eF90aW1lb3V0ID0gRElWX1JPVU5EX1VQKGludGVsX2RzaS0+
aHNfdHhfdGltZW91dCAqIG11bCwKIAkJCQkgICAgIGRpdmlzb3IpOwpAQCAtOTY2LDcgKzk3NCw3
IEBAIHN0YXRpYyB2b2lkIGdlbjExX2RzaV9zZXR1cF90aW1lb3V0cyhzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqZW5jb2RlcikKIAogc3RhdGljIHZvaWQKIGdlbjExX2RzaV9lbmFibGVfcG9ydF9hbmRf
cGh5KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAotCQkJICAgICAgY29uc3Qgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnKQorCQkJICAgICAgY29uc3Qgc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CiAKQEAgLTk4MywxMyArOTkx
LDEzIEBAIGdlbjExX2RzaV9lbmFibGVfcG9ydF9hbmRfcGh5KHN0cnVjdCBpbnRlbF9lbmNvZGVy
ICplbmNvZGVyLAogCWdlbjExX2RzaV9lbmFibGVfZGRpX2J1ZmZlcihlbmNvZGVyKTsKIAogCS8q
IHNldHVwIEQtUEhZIHRpbWluZ3MgKi8KLQlnZW4xMV9kc2lfc2V0dXBfZHBoeV90aW1pbmdzKGVu
Y29kZXIpOworCWdlbjExX2RzaV9zZXR1cF9kcGh5X3RpbWluZ3MoZW5jb2RlciwgY3J0Y19zdGF0
ZSk7CiAKIAkvKiBzdGVwIDRoOiBzZXR1cCBEU0kgcHJvdG9jb2wgdGltZW91dHMgKi8KLQlnZW4x
MV9kc2lfc2V0dXBfdGltZW91dHMoZW5jb2Rlcik7CisJZ2VuMTFfZHNpX3NldHVwX3RpbWVvdXRz
KGVuY29kZXIsIGNydGNfc3RhdGUpOwogCiAJLyogU3RlcCAoNGgsIDRpLCA0aiwgNGspOiBDb25m
aWd1cmUgdHJhbnNjb2RlciAqLwotCWdlbjExX2RzaV9jb25maWd1cmVfdHJhbnNjb2RlcihlbmNv
ZGVyLCBwaXBlX2NvbmZpZyk7CisJZ2VuMTFfZHNpX2NvbmZpZ3VyZV90cmFuc2NvZGVyKGVuY29k
ZXIsIGNydGNfc3RhdGUpOwogCiAJLyogU3RlcCA0bDogR2F0ZSBEREkgY2xvY2tzICovCiAJaWYg
KElTX0dFTihkZXZfcHJpdiwgMTEpKQpAQCAtMTAzNiwxNCArMTA0NCwxNCBAQCBzdGF0aWMgdm9p
ZCBnZW4xMV9kc2lfcG93ZXJ1cF9wYW5lbChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikK
IH0KIAogc3RhdGljIHZvaWQgZ2VuMTFfZHNpX3ByZV9wbGxfZW5hYmxlKHN0cnVjdCBpbnRlbF9l
bmNvZGVyICplbmNvZGVyLAotCQkJCSAgICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUg
KnBpcGVfY29uZmlnLAorCQkJCSAgICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNy
dGNfc3RhdGUsCiAJCQkJICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29u
bl9zdGF0ZSkKIHsKIAkvKiBzdGVwMjogZW5hYmxlIElPIHBvd2VyICovCiAJZ2VuMTFfZHNpX2Vu
YWJsZV9pb19wb3dlcihlbmNvZGVyKTsKIAogCS8qIHN0ZXAzOiBlbmFibGUgRFNJIFBMTCAqLwot
CWdlbjExX2RzaV9wcm9ncmFtX2VzY19jbGtfZGl2KGVuY29kZXIpOworCWdlbjExX2RzaV9wcm9n
cmFtX2VzY19jbGtfZGl2KGVuY29kZXIsIGNydGNfc3RhdGUpOwogfQogCiBzdGF0aWMgdm9pZCBn
ZW4xMV9kc2lfcHJlX2VuYWJsZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKQEAgLTEz
MDAsNyArMTMwOCw3IEBAIHN0YXRpYyBpbnQgZ2VuMTFfZHNpX2NvbXB1dGVfY29uZmlnKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQlwaXBlX2NvbmZpZy0+cGlwZV9icHAgPSAxODsK
IAogCXBpcGVfY29uZmlnLT5jbG9ja19zZXQgPSB0cnVlOwotCXBpcGVfY29uZmlnLT5wb3J0X2Ns
b2NrID0gYWZlX2NsayhlbmNvZGVyKSAvIDU7CisJcGlwZV9jb25maWctPnBvcnRfY2xvY2sgPSBh
ZmVfY2xrKGVuY29kZXIsIHBpcGVfY29uZmlnKSAvIDU7CiAKIAlyZXR1cm4gMDsKIH0KLS0gCjIu
MjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50
ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E4E7C15964B
	for <lists+intel-gfx@lfdr.de>; Tue, 11 Feb 2020 18:39:49 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 42D336F3E9;
	Tue, 11 Feb 2020 17:39:48 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A4A2A6F3EA
 for <intel-gfx@lists.freedesktop.org>; Tue, 11 Feb 2020 17:39:46 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 11 Feb 2020 09:36:45 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,428,1574150400"; d="scan'208";a="380503889"
Received: from unknown (HELO genxfsim-desktop.iind.intel.com) ([10.223.74.178])
 by orsmga004.jf.intel.com with ESMTP; 11 Feb 2020 09:36:43 -0800
From: Anshuman Gupta <anshuman.gupta@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 11 Feb 2020 22:55:27 +0530
Message-Id: <20200211172532.14287-3-anshuman.gupta@intel.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20200211172532.14287-1-anshuman.gupta@intel.com>
References: <20200211172532.14287-1-anshuman.gupta@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 2/7] drm/i915: Remove (pipe == crtc->index)
 assumption
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

d2UgY2FuJ3QgaGF2ZSAocGlwZSA9PSBjcnRjLT5pbmRleCkgYXNzdW1wdGlvbiBpbgpkcml2ZXIg
aW4gb3JkZXIgdG8gc3VwcG9ydCAzIG5vbi1jb250aWd1b3VzCmRpc3BsYXkgcGlwZSBzeXN0ZW0u
CgpGSVhNRTogUmVtb3ZlIHRoZSBXQVJOX09OKGRybV9jcnRjX2luZGV4KCZjcnRjLT5iYXNlKSAh
PSBjcnRjLT5waXBlKQp3aGVuIHdlIHdpbGwgZml4IGFsbCBzdWNoIGFzc3VtcHRpb24uCgpjaGFu
Z2VzIHNpbmNlIFJGQzoKLSBBZGRlZCBhZ2FpbiByZW1vdmVkIChwaXBlID09IGNydGMtPmluZGV4
KSBXQVJOX09OLgotIFBhc3MgZHJtX2NydGNfaW5kZXggaW5zdGVhZCBvZiBpbnRlbCBwaXBlIGlu
IG9yZGVyIHRvCiAgY2FsbCBkcm1faGFuZGxlX3ZibGFuaygpLgoKdjI6Ci0gdXNlZCBkcm1fY3J0
Y19oYW5kbGVfdmJsYW5rKCkvZHJtX2NydGNfd2FpdF9vbmVfdmJsYW5rKCkKICBpbnN0ZWFkIG9m
IGRybV9oYW5kbGVfdmJsYW5rL2RybV93YWl0X29uZV92YmxhbmsoKS4gW0phbmldCi0gaW50cm9k
dWNlZCBpbnRlbF9oYW5kbGVfdmJsYW5rKCkgaGVscGVyIHRvIGF2b2lkIHNwcmlua2xlCiAgb2Yg
aW50ZWxfY3J0YyBhY3Jvc3MgaXJxX2hhbmRsZXJzLiBbVmlsbGVdCgpDYzogVmlsbGUgU3lyasOk
bMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KQ2M6IEphbmkgTmlrdWxhIDxqYW5p
Lm5pa3VsYUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEFuc2h1bWFuIEd1cHRhIDxhbnNodW1h
bi5ndXB0YUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5LmMgICAgICAgfCAgOCArKysrLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmggfCAxNCArKysrKysrKysrKysrLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9pcnEuYyAgICAgICAgICAgICAgICAgICAgfCAxNCArKysrKysrLS0t
LS0tLQogMyBmaWxlcyBjaGFuZ2VkLCAyNCBpbnNlcnRpb25zKCspLCAxMiBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXku
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4IDgw
ZWViZGM0YzY3MC4uNTMzM2Y3YTdkYjQyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtMTQzOTUsMTEgKzE0Mzk1LDExIEBAIHZlcmlmeV9zaW5n
bGVfZHBsbF9zdGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJaWYgKG5l
d19jcnRjX3N0YXRlLT5ody5hY3RpdmUpCiAJCUk5MTVfU1RBVEVfV0FSTighKHBsbC0+YWN0aXZl
X21hc2sgJiBjcnRjX21hc2spLAogCQkJCSJwbGwgYWN0aXZlIG1pc21hdGNoIChleHBlY3RlZCBw
aXBlICVjIGluIGFjdGl2ZSBtYXNrIDB4JTAyeClcbiIsCi0JCQkJcGlwZV9uYW1lKGRybV9jcnRj
X2luZGV4KCZjcnRjLT5iYXNlKSksIHBsbC0+YWN0aXZlX21hc2spOworCQkJCXBpcGVfbmFtZShj
cnRjLT5waXBlKSwgcGxsLT5hY3RpdmVfbWFzayk7CiAJZWxzZQogCQlJOTE1X1NUQVRFX1dBUk4o
cGxsLT5hY3RpdmVfbWFzayAmIGNydGNfbWFzaywKIAkJCQkicGxsIGFjdGl2ZSBtaXNtYXRjaCAo
ZGlkbid0IGV4cGVjdCBwaXBlICVjIGluIGFjdGl2ZSBtYXNrIDB4JTAyeClcbiIsCi0JCQkJcGlw
ZV9uYW1lKGRybV9jcnRjX2luZGV4KCZjcnRjLT5iYXNlKSksIHBsbC0+YWN0aXZlX21hc2spOwor
CQkJCXBpcGVfbmFtZShjcnRjLT5waXBlKSwgcGxsLT5hY3RpdmVfbWFzayk7CiAKIAlJOTE1X1NU
QVRFX1dBUk4oIShwbGwtPnN0YXRlLmNydGNfbWFzayAmIGNydGNfbWFzayksCiAJCQkicGxsIGVu
YWJsZWQgY3J0Y3MgbWlzbWF0Y2ggKGV4cGVjdGVkIDB4JXggaW4gMHglMDJ4KVxuIiwKQEAgLTE0
NDI4LDEwICsxNDQyOCwxMCBAQCB2ZXJpZnlfc2hhcmVkX2RwbGxfc3RhdGUoc3RydWN0IGludGVs
X2NydGMgKmNydGMsCiAKIAkJSTkxNV9TVEFURV9XQVJOKHBsbC0+YWN0aXZlX21hc2sgJiBjcnRj
X21hc2ssCiAJCQkJInBsbCBhY3RpdmUgbWlzbWF0Y2ggKGRpZG4ndCBleHBlY3QgcGlwZSAlYyBp
biBhY3RpdmUgbWFzaylcbiIsCi0JCQkJcGlwZV9uYW1lKGRybV9jcnRjX2luZGV4KCZjcnRjLT5i
YXNlKSkpOworCQkJCXBpcGVfbmFtZShjcnRjLT5waXBlKSk7CiAJCUk5MTVfU1RBVEVfV0FSTihw
bGwtPnN0YXRlLmNydGNfbWFzayAmIGNydGNfbWFzaywKIAkJCQkicGxsIGVuYWJsZWQgY3J0Y3Mg
bWlzbWF0Y2ggKGZvdW5kICV4IGluIGVuYWJsZWQgbWFzaylcbiIsCi0JCQkJcGlwZV9uYW1lKGRy
bV9jcnRjX2luZGV4KCZjcnRjLT5iYXNlKSkpOworCQkJCXBpcGVfbmFtZShjcnRjLT5waXBlKSk7
CiAJfQogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheV90eXBlcy5oCmluZGV4IDI4M2M2MjJmOGJhMS4uMTRlM2Q3OGZlZjdjIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaApAQCAt
MTU5NSwxMSArMTU5NSwyMyBAQCBpbnRlbF9jcnRjX2hhc19kcF9lbmNvZGVyKGNvbnN0IHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogCQkgKDEgPDwgSU5URUxfT1VUUFVUX0RQ
X01TVCkgfAogCQkgKDEgPDwgSU5URUxfT1VUUFVUX0VEUCkpOwogfQorCiBzdGF0aWMgaW5saW5l
IHZvaWQKIGludGVsX3dhaXRfZm9yX3ZibGFuayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYsIGVudW0gcGlwZSBwaXBlKQogewotCWRybV93YWl0X29uZV92YmxhbmsoJmRldl9wcml2
LT5kcm0sIHBpcGUpOworCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gaW50ZWxfZ2V0X2NydGNf
Zm9yX3BpcGUoZGV2X3ByaXYsIHBpcGUpOworCisJZHJtX2NydGNfd2FpdF9vbmVfdmJsYW5rKCZj
cnRjLT5iYXNlKTsKK30KKworc3RhdGljIGlubGluZSB2b2lkCitpbnRlbF9oYW5kbGVfdmJsYW5r
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgZW51bSBwaXBlIHBpcGUpCit7CisJ
c3RydWN0IGludGVsX2NydGMgKmNydGMgPSBpbnRlbF9nZXRfY3J0Y19mb3JfcGlwZShkZXZfcHJp
diwgcGlwZSk7CisKKwlkcm1fY3J0Y19oYW5kbGVfdmJsYW5rKCZjcnRjLT5iYXNlKTsKIH0KKwog
c3RhdGljIGlubGluZSB2b2lkCiBpbnRlbF93YWl0X2Zvcl92YmxhbmtfaWZfYWN0aXZlKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwgZW51bSBwaXBlIHBpcGUpCiB7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9pcnEuYwppbmRleCBhMjZmMmJmMWI2ZWEuLmJmZDNiMzRmMmJlMyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2lycS5jCkBAIC0xMzY0LDcgKzEzNjQsNyBAQCBzdGF0aWMgdm9pZCBpOHh4X3Bp
cGVzdGF0X2lycV9oYW5kbGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAog
CWZvcl9lYWNoX3BpcGUoZGV2X3ByaXYsIHBpcGUpIHsKIAkJaWYgKHBpcGVfc3RhdHNbcGlwZV0g
JiBQSVBFX1ZCTEFOS19JTlRFUlJVUFRfU1RBVFVTKQotCQkJZHJtX2hhbmRsZV92YmxhbmsoJmRl
dl9wcml2LT5kcm0sIHBpcGUpOworCQkJaW50ZWxfaGFuZGxlX3ZibGFuayhkZXZfcHJpdiwgcGlw
ZSk7CiAKIAkJaWYgKHBpcGVfc3RhdHNbcGlwZV0gJiBQSVBFX0NSQ19ET05FX0lOVEVSUlVQVF9T
VEFUVVMpCiAJCQlpOXh4X3BpcGVfY3JjX2lycV9oYW5kbGVyKGRldl9wcml2LCBwaXBlKTsKQEAg
LTEzODIsNyArMTM4Miw3IEBAIHN0YXRpYyB2b2lkIGk5MTVfcGlwZXN0YXRfaXJxX2hhbmRsZXIo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCiAJZm9yX2VhY2hfcGlwZShkZXZf
cHJpdiwgcGlwZSkgewogCQlpZiAocGlwZV9zdGF0c1twaXBlXSAmIFBJUEVfVkJMQU5LX0lOVEVS
UlVQVF9TVEFUVVMpCi0JCQlkcm1faGFuZGxlX3ZibGFuaygmZGV2X3ByaXYtPmRybSwgcGlwZSk7
CisJCQlpbnRlbF9oYW5kbGVfdmJsYW5rKGRldl9wcml2LCBwaXBlKTsKIAogCQlpZiAocGlwZV9z
dGF0c1twaXBlXSAmIFBJUEVfTEVHQUNZX0JMQ19FVkVOVF9TVEFUVVMpCiAJCQlibGNfZXZlbnQg
PSB0cnVlOwpAQCAtMTQwNiw3ICsxNDA2LDcgQEAgc3RhdGljIHZvaWQgaTk2NV9waXBlc3RhdF9p
cnFfaGFuZGxlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAKIAlmb3JfZWFj
aF9waXBlKGRldl9wcml2LCBwaXBlKSB7CiAJCWlmIChwaXBlX3N0YXRzW3BpcGVdICYgUElQRV9T
VEFSVF9WQkxBTktfSU5URVJSVVBUX1NUQVRVUykKLQkJCWRybV9oYW5kbGVfdmJsYW5rKCZkZXZf
cHJpdi0+ZHJtLCBwaXBlKTsKKwkJCWludGVsX2hhbmRsZV92YmxhbmsoZGV2X3ByaXYsIHBpcGUp
OwogCiAJCWlmIChwaXBlX3N0YXRzW3BpcGVdICYgUElQRV9MRUdBQ1lfQkxDX0VWRU5UX1NUQVRV
UykKIAkJCWJsY19ldmVudCA9IHRydWU7CkBAIC0xNDMyLDcgKzE0MzIsNyBAQCBzdGF0aWMgdm9p
ZCB2YWxsZXl2aWV3X3BpcGVzdGF0X2lycV9oYW5kbGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiwKIAogCWZvcl9lYWNoX3BpcGUoZGV2X3ByaXYsIHBpcGUpIHsKIAkJaWYgKHBp
cGVfc3RhdHNbcGlwZV0gJiBQSVBFX1NUQVJUX1ZCTEFOS19JTlRFUlJVUFRfU1RBVFVTKQotCQkJ
ZHJtX2hhbmRsZV92YmxhbmsoJmRldl9wcml2LT5kcm0sIHBpcGUpOworCQkJaW50ZWxfaGFuZGxl
X3ZibGFuayhkZXZfcHJpdiwgcGlwZSk7CiAKIAkJaWYgKHBpcGVfc3RhdHNbcGlwZV0gJiBQSVBF
X0NSQ19ET05FX0lOVEVSUlVQVF9TVEFUVVMpCiAJCQlpOXh4X3BpcGVfY3JjX2lycV9oYW5kbGVy
KGRldl9wcml2LCBwaXBlKTsKQEAgLTE5NzAsNyArMTk3MCw3IEBAIHN0YXRpYyB2b2lkIGlsa19k
aXNwbGF5X2lycV9oYW5kbGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAog
CWZvcl9lYWNoX3BpcGUoZGV2X3ByaXYsIHBpcGUpIHsKIAkJaWYgKGRlX2lpciAmIERFX1BJUEVf
VkJMQU5LKHBpcGUpKQotCQkJZHJtX2hhbmRsZV92YmxhbmsoJmRldl9wcml2LT5kcm0sIHBpcGUp
OworCQkJaW50ZWxfaGFuZGxlX3ZibGFuayhkZXZfcHJpdiwgcGlwZSk7CiAKIAkJaWYgKGRlX2lp
ciAmIERFX1BJUEVfRklGT19VTkRFUlJVTihwaXBlKSkKIAkJCWludGVsX2NwdV9maWZvX3VuZGVy
cnVuX2lycV9oYW5kbGVyKGRldl9wcml2LCBwaXBlKTsKQEAgLTIwMjMsNyArMjAyMyw3IEBAIHN0
YXRpYyB2b2lkIGl2Yl9kaXNwbGF5X2lycV9oYW5kbGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiwKIAogCWZvcl9lYWNoX3BpcGUoZGV2X3ByaXYsIHBpcGUpIHsKIAkJaWYgKGRl
X2lpciAmIChERV9QSVBFX1ZCTEFOS19JVkIocGlwZSkpKQotCQkJZHJtX2hhbmRsZV92Ymxhbmso
JmRldl9wcml2LT5kcm0sIHBpcGUpOworCQkJaW50ZWxfaGFuZGxlX3ZibGFuayhkZXZfcHJpdiwg
cGlwZSk7CiAJfQogCiAJLyogY2hlY2sgZXZlbnQgZnJvbSBQQ0ggKi8KQEAgLTIzMzYsNyArMjMz
Niw3IEBAIGdlbjhfZGVfaXJxX2hhbmRsZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LCB1MzIgbWFzdGVyX2N0bCkKIAkJSTkxNV9XUklURShHRU44X0RFX1BJUEVfSUlSKHBpcGUp
LCBpaXIpOwogCiAJCWlmIChpaXIgJiBHRU44X1BJUEVfVkJMQU5LKQotCQkJZHJtX2hhbmRsZV92
YmxhbmsoJmRldl9wcml2LT5kcm0sIHBpcGUpOworCQkJaW50ZWxfaGFuZGxlX3ZibGFuayhkZXZf
cHJpdiwgcGlwZSk7CiAKIAkJaWYgKGlpciAmIEdFTjhfUElQRV9DRENMS19DUkNfRE9ORSkKIAkJ
CWhzd19waXBlX2NyY19pcnFfaGFuZGxlcihkZXZfcHJpdiwgcGlwZSk7Ci0tIAoyLjI0LjAKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBt
YWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 278AE10A406
	for <lists+intel-gfx@lfdr.de>; Tue, 26 Nov 2019 19:25:33 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3518E6E479;
	Tue, 26 Nov 2019 18:25:31 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 258486E479
 for <intel-gfx@lists.freedesktop.org>; Tue, 26 Nov 2019 18:25:29 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19348635-1500050 
 for multiple; Tue, 26 Nov 2019 18:25:28 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 26 Nov 2019 18:25:23 +0000
Message-Id: <20191126182523.2930760-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t] i915/gem_ctx_persistence: Bump the reset
 timeout
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgdGhlIGRlZmF1bHQgcHJlZW1wdC1yZXNldCB0aW1lb3V0IGhhcyBiZWVuIGluY3JlYXNlZCBm
cm9tIDEwMG1zIHRvCjY0MG1zLCB3ZSBuZWVkIGEgY29ycmVzcG9uZGluZyBpbmNyZWFzZSBpbiBv
dXIgb3duIHRpbWVvdXQgc28gdGhhdCB3ZQphbGxvdyBlbm91Z2ggdGltZSBmb3IgdGhlIHByZWVt
cHQtcmVzZXQgdG8gb2NjdXIgYW5kIGNsb3NlIHRoZSBodW5nCmNvbnRleHRzLgoKU2lnbmVkLW9m
Zi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Ci0tLQogdGVzdHMv
aTkxNS9nZW1fY3R4X3BlcnNpc3RlbmNlLmMgfCAyMiArKysrKysrKysrKystLS0tLS0tLS0tCiAx
IGZpbGUgY2hhbmdlZCwgMTIgaW5zZXJ0aW9ucygrKSwgMTAgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvdGVzdHMvaTkxNS9nZW1fY3R4X3BlcnNpc3RlbmNlLmMgYi90ZXN0cy9pOTE1L2dlbV9j
dHhfcGVyc2lzdGVuY2UuYwppbmRleCAwZjcwNGM2MzkuLjIyNTA0ODNkMyAxMDA2NDQKLS0tIGEv
dGVzdHMvaTkxNS9nZW1fY3R4X3BlcnNpc3RlbmNlLmMKKysrIGIvdGVzdHMvaTkxNS9nZW1fY3R4
X3BlcnNpc3RlbmNlLmMKQEAgLTQwLDYgKzQwLDggQEAKICNpbmNsdWRlICJpb2N0bF93cmFwcGVy
cy5oIiAvKiBnZW1fd2FpdCgpISAqLwogI2luY2x1ZGUgInN3X3N5bmMuaCIKIAorc3RhdGljIHVu
c2lnbmVkIGxvbmcgcmVzZXRfdGltZW91dF9tcyA9IE1TRUNfUEVSX1NFQzsgLyogZGVmYXVsdDog
NjQwbXMgKi8KKwogc3RhdGljIGJvb2wgaGFzX3BlcnNpc3RlbmNlKGludCBpOTE1KQogewogCXN0
cnVjdCBkcm1faTkxNV9nZW1fY29udGV4dF9wYXJhbSBwID0gewpAQCAtMjI2LDEwICsyMjgsMTAg
QEAgc3RhdGljIHZvaWQgdGVzdF9ub25wZXJzaXN0ZW50X21peGVkKGludCBpOTE1LCB1bnNpZ25l
ZCBpbnQgZW5naW5lKQogCX0KIAogCS8qIE91dGVyIHBhaXIgb2YgY29udGV4dHMgd2VyZSBub24t
cGVyc2lzdGVudCBhbmQga2lsbGVkICovCi0JaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3dhaXQo
ZmVuY2VbMF0sIE1TRUNfUEVSX1NFQyAvIDUpLCAwKTsKKwlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVu
Y2Vfd2FpdChmZW5jZVswXSwgcmVzZXRfdGltZW91dF9tcyksIDApOwogCWlndF9hc3NlcnRfZXEo
c3luY19mZW5jZV9zdGF0dXMoZmVuY2VbMF0pLCAtRUlPKTsKIAotCWlndF9hc3NlcnRfZXEoc3lu
Y19mZW5jZV93YWl0KGZlbmNlWzJdLCBNU0VDX1BFUl9TRUMgLyA1KSwgMCk7CisJaWd0X2Fzc2Vy
dF9lcShzeW5jX2ZlbmNlX3dhaXQoZmVuY2VbMl0sIHJlc2V0X3RpbWVvdXRfbXMpLCAwKTsKIAlp
Z3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfc3RhdHVzKGZlbmNlWzJdKSwgLUVJTyk7CiAKIAkvKiBC
dXQgdGhlIG1pZGRsZSBjb250ZXh0IGlzIHN0aWxsIHJ1bm5pbmcgKi8KQEAgLTM2MSw3ICszNjMs
NyBAQCBzdGF0aWMgdm9pZCB0ZXN0X25vbnBlcnNpc3RlbnRfZmlsZShpbnQgaTkxNSkKIAljbG9z
ZShpOTE1KTsKIAlmbHVzaF9kZWxheWVkX2ZwdXQoZGVidWdmcyk7CiAKLQlpZ3RfYXNzZXJ0X2Vx
KHN5bmNfZmVuY2Vfd2FpdChzcGluLT5vdXRfZmVuY2UsIE1TRUNfUEVSX1NFQyAvIDUpLCAwKTsK
KwlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfd2FpdChzcGluLT5vdXRfZmVuY2UsIHJlc2V0X3Rp
bWVvdXRfbXMpLCAwKTsKIAlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfc3RhdHVzKHNwaW4tPm91
dF9mZW5jZSksIC1FSU8pOwogCiAJc3Bpbi0+aGFuZGxlID0gMDsKQEAgLTQwMiwxMCArNDA0LDEw
IEBAIHN0YXRpYyB2b2lkIHRlc3Rfbm9ucGVyc2lzdGVudF9xdWV1ZWQoaW50IGk5MTUsIHVuc2ln
bmVkIGludCBlbmdpbmUpCiAKIAlnZW1fY29udGV4dF9kZXN0cm95KGk5MTUsIGN0eCk7CiAKLQlp
Z3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfd2FpdChzcGluLT5vdXRfZmVuY2UsIE1TRUNfUEVSX1NF
QyAvIDUpLCAwKTsKKwlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfd2FpdChzcGluLT5vdXRfZmVu
Y2UsIHJlc2V0X3RpbWVvdXRfbXMpLCAwKTsKIAlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfc3Rh
dHVzKHNwaW4tPm91dF9mZW5jZSksIC1FSU8pOwogCi0JaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNl
X3dhaXQoZmVuY2UsIE1TRUNfUEVSX1NFQyAvIDUpLCAwKTsKKwlpZ3RfYXNzZXJ0X2VxKHN5bmNf
ZmVuY2Vfd2FpdChmZW5jZSwgcmVzZXRfdGltZW91dF9tcyksIDApOwogCWlndF9hc3NlcnRfZXEo
c3luY19mZW5jZV9zdGF0dXMoZmVuY2UpLCAtRUlPKTsKIAogCWlndF9zcGluX2ZyZWUoaTkxNSwg
c3Bpbik7CkBAIC00NzksNyArNDgxLDcgQEAgc3RhdGljIHZvaWQgdGVzdF9wcm9jZXNzKGludCBp
OTE1KQogCWZlbmNlID0gcmVjdmZkKHN2WzFdKTsKIAljbG9zZShzdlsxXSk7CiAKLQlpZ3RfYXNz
ZXJ0X2VxKHN5bmNfZmVuY2Vfd2FpdChmZW5jZSwgTVNFQ19QRVJfU0VDIC8gNSksIDApOworCWln
dF9hc3NlcnRfZXEoc3luY19mZW5jZV93YWl0KGZlbmNlLCByZXNldF90aW1lb3V0X21zKSwgMCk7
CiAJaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3N0YXR1cyhmZW5jZSksIC1FSU8pOwogCWNsb3Nl
KGZlbmNlKTsKIApAQCAtNTMwLDcgKzUzMiw3IEBAIHN0YXRpYyB2b2lkIHRlc3RfcHJvY2Vzc19t
aXhlZChpbnQgaTkxNSwgdW5zaWduZWQgaW50IGVuZ2luZSkKIAljbG9zZShzdlsxXSk7CiAKIAkv
KiBGaXJzdCBmZW5jZSBpcyBub24tcGVyc2lzdGVudCwgc28gc2hvdWxkIGJlIHJlc2V0ICovCi0J
aWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3dhaXQoZmVuY2VbMF0sIE1TRUNfUEVSX1NFQyAvIDUp
LCAwKTsKKwlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfd2FpdChmZW5jZVswXSwgcmVzZXRfdGlt
ZW91dF9tcyksIDApOwogCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV9zdGF0dXMoZmVuY2VbMF0p
LCAtRUlPKTsKIAljbG9zZShmZW5jZVswXSk7CiAKQEAgLTYwNSw3ICs2MDcsNyBAQCBzdGF0aWMg
dm9pZCB0ZXN0X3Byb2Nlc3NlcyhpbnQgaTkxNSkKIAkJaWYgKGkgPT0gMCkgewogCQkJLyogRmly
c3QgZmVuY2UgaXMgbm9uLXBlcnNpc3RlbnQsIHNvIHNob3VsZCBiZSByZXNldCAqLwogCQkJaWd0
X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3dhaXQoZmVuY2UsCi0JCQkJCQkgICAgICBNU0VDX1BFUl9T
RUMgLyA1KSwgMCk7CisJCQkJCQkgICAgICByZXNldF90aW1lb3V0X21zKSwgMCk7CiAJCQlpZ3Rf
YXNzZXJ0X2VxKHN5bmNfZmVuY2Vfc3RhdHVzKGZlbmNlKSwgLUVJTyk7CiAJCX0gZWxzZSB7CiAJ
CQkvKiBTZWNvbmQgZmVuY2UgaXMgcGVyc2lzdGVudCwgc28gc3RpbGwgc3Bpbm5pbmcgKi8KQEAg
LTY0NSwxMSArNjQ3LDExIEBAIHN0YXRpYyB2b2lkIF9fc21va2VyKGludCBpOTE1LCB1bnNpZ25l
ZCBpbnQgZW5naW5lLCBpbnQgZXhwZWN0ZWQpCiAKIAlpZ3Rfc3Bpbl9lbmQoc3Bpbik7CiAKLQlp
Z3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfd2FpdChzcGluLT5vdXRfZmVuY2UsIE1TRUNfUEVSX1NF
QyksIDApOworCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV93YWl0KHNwaW4tPm91dF9mZW5jZSwg
cmVzZXRfdGltZW91dF9tcyksIDApOwogCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV9zdGF0dXMo
c3Bpbi0+b3V0X2ZlbmNlKSwgZXhwZWN0ZWQpOwogCiAJaWYgKGZlbmNlICE9IC0xKSB7Ci0JCWln
dF9hc3NlcnRfZXEoc3luY19mZW5jZV93YWl0KGZlbmNlLCBNU0VDX1BFUl9TRUMpLCAwKTsKKwkJ
aWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3dhaXQoZmVuY2UsIHJlc2V0X3RpbWVvdXRfbXMpLCAw
KTsKIAkJaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3N0YXR1cyhmZW5jZSksIGV4cGVjdGVkKTsK
IAkJY2xvc2UoZmVuY2UpOwogCX0KLS0gCjIuMjQuMAoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vaW50ZWwtZ2Z4

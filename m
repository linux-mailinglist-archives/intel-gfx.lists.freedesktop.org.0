Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D6D4B5D1A7
	for <lists+intel-gfx@lfdr.de>; Tue,  2 Jul 2019 16:23:49 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0E20A89FF6;
	Tue,  2 Jul 2019 14:23:48 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9A5F789FED;
 Tue,  2 Jul 2019 14:23:45 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 17101010-1500050 
 for multiple; Tue, 02 Jul 2019 15:23:41 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  2 Jul 2019 15:23:39 +0100
Message-Id: <20190702142339.9961-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190702114807.11271-1-chris@chris-wilson.co.uk>
References: <20190702114807.11271-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t] i915/gem_eio: Assert the hanging request
 is correctly identified
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2hlbiBmb3JjaW5nIGEgcmVzZXQsIGl0IGlzIGNydWNpYWwgdGhhdCB0aGUga2VybmVsIGNvcnJl
Y3RseSBpZGVudGlmaWVzCnRoZSBpbmplY3RlZCBoYW5nLiBWZXJpZnkgdGhpcyBpcyB0aGUgY2Fz
ZSBmb3IgcmVzZXQtc3RyZXNzLgoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0Bj
aHJpcy13aWxzb24uY28udWs+Ci0tLQpLZWVwIHRoZSBpZ3Rfc3Bpbl9mcmVlIGF0IHRoZSBlbmQg
dG8gYXZvaWQgaXNzdWVzIHdoZXJlIHdlIGZhaWwgdG8KYnlwYXNzIHRoZSBndWlsdHkgYmF0Y2gu
Ci0tLQogdGVzdHMvaTkxNS9nZW1fZWlvLmMgfCAxNyArKysrKysrKystLS0tLS0tLQogMSBmaWxl
IGNoYW5nZWQsIDkgaW5zZXJ0aW9ucygrKSwgOCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS90
ZXN0cy9pOTE1L2dlbV9laW8uYyBiL3Rlc3RzL2k5MTUvZ2VtX2Vpby5jCmluZGV4IDUzOTZhMDRl
Mi4uZGM3YWZiMGZkIDEwMDY0NAotLS0gYS90ZXN0cy9pOTE1L2dlbV9laW8uYworKysgYi90ZXN0
cy9pOTE1L2dlbV9laW8uYwpAQCAtMTc1LDcgKzE3NSw3IEBAIHN0YXRpYyBpZ3Rfc3Bpbl90ICog
X19zcGluX3BvbGwoaW50IGZkLCB1aW50MzJfdCBjdHgsIHVuc2lnbmVkIGxvbmcgZmxhZ3MpCiAJ
c3RydWN0IGlndF9zcGluX2ZhY3Rvcnkgb3B0cyA9IHsKIAkJLmN0eCA9IGN0eCwKIAkJLmVuZ2lu
ZSA9IGZsYWdzLAotCQkuZmxhZ3MgPSBJR1RfU1BJTl9GQVNULAorCQkuZmxhZ3MgPSBJR1RfU1BJ
Tl9GQVNUIHwgSUdUX1NQSU5fRkVOQ0VfT1VULAogCX07CiAKIAlpZiAoZ2VtX2Nhbl9zdG9yZV9k
d29yZChmZCwgb3B0cy5lbmdpbmUpKQpAQCAtMjcwLDEyICsyNzAsMTIgQEAgc3RhdGljIHZvaWQg
Y2hlY2tfd2FpdChpbnQgZmQsIHVpbnQzMl90IGJvLCB1bnNpZ25lZCBpbnQgd2FpdCwgaWd0X3N0
YXRzX3QgKnN0KQogCQlpZ3Rfc3RhdHNfcHVzaChzdCwgaWd0X25zZWNfZWxhcHNlZCgmdHMpKTsK
IH0KIAotc3RhdGljIHZvaWQgY2hlY2tfd2FpdF9lbGFwc2VkKGludCBmZCwgaWd0X3N0YXRzX3Qg
KnN0KQorc3RhdGljIHZvaWQgY2hlY2tfd2FpdF9lbGFwc2VkKGNvbnN0IGNoYXIgKnByZWZpeCwg
aW50IGZkLCBpZ3Rfc3RhdHNfdCAqc3QpCiB7CiAJZG91YmxlIG1lZCwgbWF4LCBsaW1pdDsKIAot
CWlndF9pbmZvKCJDb21wbGV0ZWQgJWQgcmVzZXRzLCB3YWtldXBzIHRvb2sgJS4zZistJS4zZm1z
IChtaW46JS4zZm1zLCBtZWRpYW46JS4zZm1zLCBtYXg6JS4zZm1zKVxuIiwKLQkJIHN0LT5uX3Zh
bHVlcywKKwlpZ3RfaW5mbygiJXM6IGNvbXBsZXRlZCAlZCByZXNldHMsIHdha2V1cHMgdG9vayAl
LjNmKy0lLjNmbXMgKG1pbjolLjNmbXMsIG1lZGlhbjolLjNmbXMsIG1heDolLjNmbXMpXG4iLAor
CQkgcHJlZml4LCBzdC0+bl92YWx1ZXMsCiAJCSBpZ3Rfc3RhdHNfZ2V0X21lYW4oc3QpKjFlLTYs
CiAJCSBpZ3Rfc3RhdHNfZ2V0X3N0ZF9kZXZpYXRpb24oc3QpKjFlLTYsCiAJCSBpZ3Rfc3RhdHNf
Z2V0X21pbihzdCkqMWUtNiwKQEAgLTcxNSw4ICs3MTUsOCBAQCBzdGF0aWMgdm9pZCB0ZXN0X2lu
ZmxpZ2h0X2ludGVybmFsKGludCBmZCwgdW5zaWduZWQgaW50IHdhaXQpCiAJY2xvc2UoZmQpOwog
fQogCi1zdGF0aWMgdm9pZCByZXNldF9zdHJlc3MoaW50IGZkLAotCQkJIHVpbnQzMl90IGN0eDAs
IHVuc2lnbmVkIGludCBlbmdpbmUsCitzdGF0aWMgdm9pZCByZXNldF9zdHJlc3MoaW50IGZkLCB1
aW50MzJfdCBjdHgwLAorCQkJIGNvbnN0IGNoYXIgKm5hbWUsIHVuc2lnbmVkIGludCBlbmdpbmUs
CiAJCQkgdW5zaWduZWQgaW50IGZsYWdzKQogewogCWNvbnN0IHVpbnQzMl90IGJiZSA9IE1JX0JB
VENIX0JVRkZFUl9FTkQ7CkBAIC03NTksNiArNzU5LDcgQEAgc3RhdGljIHZvaWQgcmVzZXRfc3Ry
ZXNzKGludCBmZCwKIAogCQkvKiBXZWRnZSBhZnRlciBhIHNtYWxsIGRlbGF5LiAqLwogCQljaGVj
a193YWl0KGZkLCBvYmouaGFuZGxlLCAxMDBlMywgJnN0YXRzKTsKKwkJaWd0X2Fzc2VydF9lcShz
eW5jX2ZlbmNlX3N0YXR1cyhoYW5nLT5vdXRfZmVuY2UpLCAtRUlPKTsKIAogCQkvKiBVbndlZGdl
IGJ5IGZvcmNpbmcgYSByZXNldC4gKi8KIAkJaWd0X2Fzc2VydChpOTE1X3Jlc2V0X2NvbnRyb2wo
dHJ1ZSkpOwpAQCAtNzgyLDcgKzc4Myw3IEBAIHN0YXRpYyB2b2lkIHJlc2V0X3N0cmVzcyhpbnQg
ZmQsCiAJCWlndF9zcGluX2ZyZWUoZmQsIGhhbmcpOwogCQlnZW1fY29udGV4dF9kZXN0cm95KGZk
LCBjdHgpOwogCX0KLQljaGVja193YWl0X2VsYXBzZWQoZmQsICZzdGF0cyk7CisJY2hlY2tfd2Fp
dF9lbGFwc2VkKG5hbWUsIGZkLCAmc3RhdHMpOwogCWlndF9zdGF0c19maW5pKCZzdGF0cyk7CiAK
IAlnZW1fY2xvc2UoZmQsIG9iai5oYW5kbGUpOwpAQCAtNzk3LDcgKzc5OCw3IEBAIHN0YXRpYyB2
b2lkIHRlc3RfcmVzZXRfc3RyZXNzKGludCBmZCwgdW5zaWduZWQgaW50IGZsYWdzKQogCXVuc2ln
bmVkIGludCBlbmdpbmU7CiAKIAlmb3JfZWFjaF9lbmdpbmUoZmQsIGVuZ2luZSkKLQkJcmVzZXRf
c3RyZXNzKGZkLCBjdHgwLCBlbmdpbmUsIGZsYWdzKTsKKwkJcmVzZXRfc3RyZXNzKGZkLCBjdHgw
LCBlX18tPm5hbWUsIGVuZ2luZSwgZmxhZ3MpOwogCiAJZ2VtX2NvbnRleHRfZGVzdHJveShmZCwg
Y3R4MCk7CiB9Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeA==

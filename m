Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2A8576886B
	for <lists+intel-gfx@lfdr.de>; Mon, 15 Jul 2019 14:02:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E1B0A898C6;
	Mon, 15 Jul 2019 12:02:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1A12F898C6
 for <intel-gfx@lists.freedesktop.org>; Mon, 15 Jul 2019 12:02:31 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 17310518-1500050 
 for multiple; Mon, 15 Jul 2019 13:02:15 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 15 Jul 2019 13:02:14 +0100
Message-Id: <20190715120214.9357-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.22.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/execlists: Cancel breadcrumb on
 preempting the virtual engine
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgd2UgdW53aW5kIHRoZSByZXF1ZXN0cyBmb3IgYSBwcmVlbXB0aW9uIGV2ZW50LCB3ZSByZXR1
cm4gYSB2aXJ0dWFsCnJlcXVlc3QgYmFjayB0byBpdHMgb3JpZ2luYWwgdmlydHVhbCBlbmdpbmUg
KHNvIHRoYXQgaXQgaXMgYXZhaWxhYmxlIGZvcgpleGVjdXRpb24gb24gYW55IG9mIGl0cyBzaWJs
aW5ncykuIEluIHRoZSBwcm9jZXNzLCB0aGlzIG1lYW5zIHRoYXQgaXRzCmJyZWFkY3J1bWIgc2hv
dWxkIG5vIGxvbmdlciBiZSBhc3NvY2lhdGVkIHdpdGggdGhlIG9yaWdpbmFsIHBoeXNpY2FsCmVu
Z2luZSwgYW5kIHNvIHdlIGFyZSBmb3JjZWQgdG8gZGVjb3VwbGUgaXQuIFByZXZpb3VzbHksIGFz
IHRoZSByZXF1ZXN0CmNvdWxkIG5vdCBjb21wbGV0ZSB3aXRob3V0IG91ciBhd2FyZW5lc3MsIHdl
IHdvdWxkIG1vdmUgaXQgdG8gdGhlIG5leHQKcmVhbCBlbmdpbmUgd2l0aG91dCBhbnkgZGFuZ2Vy
LiBIb3dldmVyLCBwcmVlbXB0LXRvLWJ1c3kgYWxsb3dlZCBmb3IKcmVxdWVzdHMgdG8gY29udGlu
dWUgb24gdGhlIEhXIGFuZCBjb21wbGV0ZSBpbiB0aGUgYmFja2dyb3VuZCBhcyB3ZQp1bndvdW5k
LCB3aGljaCBtZWFudCB0aGF0IHdlIGNvdWxkIGVuZCB1cCByZXRpcmluZyB0aGUgcmVxdWVzdCBi
ZWZvcmUKZml4aW5nIHVwIHRoZSBicmVhZGNydW1iIGxpbmsuCgpbNTE2NzkuNTE3OTQzXSBJTkZP
OiB0cnlpbmcgdG8gcmVnaXN0ZXIgbm9uLXN0YXRpYyBrZXkuCls1MTY3OS41MTc5NTZdIHRoZSBj
b2RlIGlzIGZpbmUgYnV0IG5lZWRzIGxvY2tkZXAgYW5ub3RhdGlvbi4KWzUxNjc5LjUxNzk2MF0g
dHVybmluZyBvZmYgdGhlIGxvY2tpbmcgY29ycmVjdG5lc3MgdmFsaWRhdG9yLgpbNTE2NzkuNTE3
OTY2XSBDUFU6IDAgUElEOiAzMjcwIENvbW06IGt3b3JrZXIvdTg6MCBUYWludGVkOiBHICAgICBV
ICAgICAgICAgICAgNS4yLjArICM3MTcKWzUxNjc5LjUxNzk3MV0gSGFyZHdhcmUgbmFtZTogSW50
ZWwgQ29ycG9yYXRpb24gTlVDN2k1Qk5LL05VQzdpNUJOQiwgQklPUyBCTktCTDM1Ny44NkEuMDA1
Mi4yMDE3LjA5MTguMTM0NiAwOS8xOC8yMDE3Cls1MTY3OS41MTgwMTJdIFdvcmtxdWV1ZTogaTkx
NSByZXRpcmVfd29ya19oYW5kbGVyIFtpOTE1XQpbNTE2NzkuNTE4MDE3XSBDYWxsIFRyYWNlOgpb
NTE2NzkuNTE4MDI2XSAgZHVtcF9zdGFjaysweDY3LzB4OTAKWzUxNjc5LjUxODAzMV0gIHJlZ2lz
dGVyX2xvY2tfY2xhc3MrMHg1MmMvMHg1NDAKWzUxNjc5LjUxODAzOF0gID8gZmluZF9oZWxkX2xv
Y2srMHgyZC8weDkwCls1MTY3OS41MTgwNDJdICBfX2xvY2tfYWNxdWlyZSsweDY4LzB4MTgwMApb
NTE2NzkuNTE4MDQ3XSAgPyBmaW5kX2hlbGRfbG9jaysweDJkLzB4OTAKWzUxNjc5LjUxODA3M10g
ID8gX19pOTE1X3N3X2ZlbmNlX2NvbXBsZXRlKzB4ZmYvMHgxYzAgW2k5MTVdCls1MTY3OS41MTgw
NzldICBsb2NrX2FjcXVpcmUrMHg5MC8weDE3MApbNTE2NzkuNTE4MTA1XSAgPyBpOTE1X3JlcXVl
c3RfY2FuY2VsX2JyZWFkY3J1bWIrMHgyOS8weDE2MCBbaTkxNV0KWzUxNjc5LjUxODExMl0gIF9y
YXdfc3Bpbl9sb2NrKzB4MjcvMHg0MApbNTE2NzkuNTE4MTM4XSAgPyBpOTE1X3JlcXVlc3RfY2Fu
Y2VsX2JyZWFkY3J1bWIrMHgyOS8weDE2MCBbaTkxNV0KWzUxNjc5LjUxODE2NV0gIGk5MTVfcmVx
dWVzdF9jYW5jZWxfYnJlYWRjcnVtYisweDI5LzB4MTYwIFtpOTE1XQpbNTE2NzkuNTE4MTk5XSAg
aTkxNV9yZXF1ZXN0X3JldGlyZSsweDQzZi8weDUzMCBbaTkxNV0KWzUxNjc5LjUxODIzMl0gIHJl
dGlyZV9yZXF1ZXN0cysweDRkLzB4NjAgW2k5MTVdCls1MTY3OS41MTgyNjNdICBpOTE1X3JldGly
ZV9yZXF1ZXN0cysweGRmLzB4MWYwIFtpOTE1XQpbNTE2NzkuNTE4Mjk0XSAgcmV0aXJlX3dvcmtf
aGFuZGxlcisweDRjLzB4NjAgW2k5MTVdCls1MTY3OS41MTgzMDFdICBwcm9jZXNzX29uZV93b3Jr
KzB4MjJjLzB4NWMwCls1MTY3OS41MTgzMDddICB3b3JrZXJfdGhyZWFkKzB4MzcvMHgzOTAKWzUx
Njc5LjUxODMxMV0gID8gcHJvY2Vzc19vbmVfd29yaysweDVjMC8weDVjMApbNTE2NzkuNTE4MzE2
XSAga3RocmVhZCsweDExNi8weDEzMApbNTE2NzkuNTE4MzIwXSAgPyBrdGhyZWFkX2NyZWF0ZV9v
bl9ub2RlKzB4NDAvMHg0MApbNTE2NzkuNTE4MzI1XSAgcmV0X2Zyb21fZm9yaysweDI0LzB4MzAK
WzUxNjc5LjUyMDE3N10gLS0tLS0tLS0tLS0tWyBjdXQgaGVyZSBdLS0tLS0tLS0tLS0tCls1MTY3
OS41MjAxODldIGxpc3RfZGVsIGNvcnJ1cHRpb24sIGZmZmY4ODg4MzY3NWUyZjAtPm5leHQgaXMg
TElTVF9QT0lTT04xIChkZWFkMDAwMDAwMDAwMTAwKQoKRml4ZXM6IDIyYjdhNDI2YmJlMSAoImRy
bS9pOTE1L2V4ZWNsaXN0czogUHJlZW1wdC10by1idXN5IikKU2lnbmVkLW9mZi1ieTogQ2hyaXMg
V2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CkNjOiBUdnJ0a28gVXJzdWxpbiA8dHZy
dGtvLnVyc3VsaW5AaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2xyYy5jIHwgMTMgKysrKysrKysrKysrKwogMSBmaWxlIGNoYW5nZWQsIDEzIGluc2VydGlvbnMo
KykKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCmluZGV4IDllMDk5MjQ5ODA4Ny4uMjBm
MjM3ZmM4YTM5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpAQCAtNDkyLDYgKzQ5
MiwxOSBAQCBfX3Vud2luZF9pbmNvbXBsZXRlX3JlcXVlc3RzKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSkKIAkJCWxpc3RfbW92ZSgmcnEtPnNjaGVkLmxpbmssIHBsKTsKIAkJCWFjdGl2
ZSA9IHJxOwogCQl9IGVsc2UgeworCQkJLyoKKwkJCSAqIERlY291cGxlIHRoZSB2aXJ0dWFsIGJy
ZWFkY3J1bWIgYmVmb3JlIG1vdmluZyBpdAorCQkJICogYmFjayB0byB0aGUgdmlydHVhbCBlbmdp
bmUgLS0gd2UgZG9uJ3Qgd2FudCB0aGUKKwkJCSAqIHJlcXVlc3QgdG8gY29tcGxldGUgaW4gdGhl
IGJhY2tncm91bmQgYW5kIHRyeQorCQkJICogYW5kIGNhbmNlbCB0aGUgYnJlYWRjcnVtYiBvbiB0
aGUgdmlydHVhbCBlbmdpbmUKKwkJCSAqIChpbnN0ZWFkIG9mIHRoZSBvbGQgZW5naW5lIHdoZXJl
IGl0IGlzIGxpbmtlZCkhCisJCQkgKi8KKwkJCWlmICh0ZXN0X2JpdChETUFfRkVOQ0VfRkxBR19F
TkFCTEVfU0lHTkFMX0JJVCwKKwkJCQkgICAgICZycS0+ZmVuY2UuZmxhZ3MpKSB7CisJCQkJc3Bp
bl9sb2NrKCZycS0+bG9jayk7CisJCQkJaTkxNV9yZXF1ZXN0X2NhbmNlbF9icmVhZGNydW1iKHJx
KTsKKwkJCQlzcGluX3VubG9jaygmcnEtPmxvY2spOworCQkJfQogCQkJcnEtPmVuZ2luZSA9IG93
bmVyOwogCQkJb3duZXItPnN1Ym1pdF9yZXF1ZXN0KHJxKTsKIAkJCWFjdGl2ZSA9IE5VTEw7Ci0t
IAoyLjIyLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

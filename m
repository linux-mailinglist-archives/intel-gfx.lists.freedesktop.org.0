Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 346E321F98
	for <lists+intel-gfx@lfdr.de>; Fri, 17 May 2019 23:25:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DE4FA89998;
	Fri, 17 May 2019 21:25:06 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E3BF489998
 for <intel-gfx@lists.freedesktop.org>; Fri, 17 May 2019 21:25:05 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 17 May 2019 14:25:05 -0700
X-ExtLoop1: 1
Received: from cataylo2-ubuntu18-10.jf.intel.com (HELO [10.7.199.54])
 ([10.7.199.54])
 by orsmga002.jf.intel.com with ESMTP; 17 May 2019 14:25:05 -0700
To: Ville Syrjala <ville.syrjala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20190503190831.1759-1-ville.syrjala@linux.intel.com>
 <20190503190831.1759-2-ville.syrjala@linux.intel.com>
From: Clinton Taylor <Clinton.A.Taylor@intel.com>
Message-ID: <3eef7f36-160e-fa8d-e9f7-8e50699c7ad2@intel.com>
Date: Fri, 17 May 2019 13:26:28 -0700
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <20190503190831.1759-2-ville.syrjala@linux.intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH v3 2/2] drm/i915: Make sure we have enough
 memory bandwidth on ICL
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Tml0OiBDb21taXQgbWVzc2FnZSBWNCBhbmQgUGF0Y2ggU3ViamVjdCBWMwoKQWNrZWQtYnk6IENs
aW50IFRheWxvciA8Q2xpbnRvbi5BLlRheWxvckBpbnRlbC5jb20+CgotQ2xpbnQKCgpPbiA1LzMv
MTkgMTI6MDggUE0sIFZpbGxlIFN5cmphbGEgd3JvdGU6Cj4gRnJvbTogVmlsbGUgU3lyasOkbMOk
IDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KPgo+IElDTCBoYXMgc28gbWFueSBwbGFu
ZXMgdGhhdCBpdCBjYW4gZWFzaWx5IGV4Y2VlZCB0aGUgbWF4aW11bQo+IGVmZmVjdGl2ZSBtZW1v
cnkgYmFuZHdpZHRoIG9mIHRoZSBzeXN0ZW0uIFdlIG11c3QgdGhlcmVmb3JlIGNoZWNrCj4gdGhh
dCB3ZSBkb24ndCBleGNlZWQgdGhhdCBsaW1pdC4KPgo+IFRoZSBhbGdvcml0aG0gaXMgdmVyeSBt
YWdpYyBudW1iZXIgaGVhdnkgYW5kIGxhY2tzIHN1ZmZpY2llbnQKPiBleHBsYW5hdGlvbiBmb3Ig
bm93LiBXZSBhbHNvIGhhdmUgbm8gc2FuZSB3YXkgdG8gcXVlcnkgdGhlCj4gbWVtb3J5IGNsb2Nr
IGFuZCB0aW1pbmdzLCBzbyB3ZSBtdXN0IHJlbHkgb24gYSBjb21iaW5hdGlvbiBvZgo+IHJhdyBy
ZWFkb3V0IGZyb20gdGhlIG1lbW9yeSBjb250cm9sbGVyIGFuZCBoYXJkY29kZWQgYXNzdW1wdGlv
bnMuCj4gVGhlIG1lbW9yeSBjb250cm9sbGVyIHZhbHVlcyBvYnZpb3VzbHkgY2hhbmdlIGFzIHRo
ZSBzeXN0ZW0KPiBqdW1wcyBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgU0FHViBwb2ludHMsIHNvIHdl
IHRyeSB0byBzdGFiaWxpemUKPiBpdCBmaXJzdCBieSBkaXNhYmxpbmcgU0FHViBmb3IgdGhlIGR1
cmF0aW9uIG9mIHRoZSByZWFkb3V0Lgo+Cj4gVGhlIHV0aWxpemVkIGJhbmR3aWR0aCBpcyB0cmFj
a2VkIHZpYSBhIGRldmljZSB3aWRlIGF0b21pYwo+IHByaXZhdGUgb2JqZWN0LiBUaGF0IGlzIGFj
dHVhbGx5IG5vdCByb2J1c3QgYmVjYXVzZSB3ZSBjYW4ndAo+IGFmZm9yZCB0byBlbmZvcmNlIHN0
cmljdCBnbG9iYWwgb3JkZXJpbmcgYmV0d2VlbiB0aGUgcGlwZXMuCj4gVGh1cyBJIHRoaW5rIEkn
bGwgbmVlZCB0byBjaGFuZ2UgdGhpcyB0byBzaW1wbHkgY2hvcCB1cCB0aGUKPiBhdmFpbGFibGUg
YmFuZHdpZHRoIGJldHdlZW4gYWxsIHRoZSBhY3RpdmUgcGlwZXMuIEVhY2ggcGlwZQo+IGNhbiB0
aGVuIGRvIHdoYXRldmVyIGl0IHdhbnRzIGFzIGxvbmcgYXMgaXQgZG9lc24ndCBleGNlZWQKPiBp
dHMgYnVkZ2V0LiBUaGF0IHNjaGVtZSB3aWxsIGFsc28gcmVxdWlyZSB0aGF0IHdlIGFzc3VtZSB0
aGF0Cj4gYW55IG51bWJlciBvZiBwbGFuZXMgY291bGQgYmUgYWN0aXZlIGF0IGFueSB0aW1lLgo+
Cj4gVE9ETzogbWFrZSBpdCByb2J1c3QgYW5kIGRlYWwgd2l0aCBhbGwgdGhlIG9wZW4gcXVlc3Rp
b25zCj4KPiB2MjogU2xlZXAgbG9uZ2VyIGFmdGVyIGRpc2FibGluZyBTQUdWCj4gdjM6IFBvbGwg
Zm9yIHRoZSBkY2xrIHRvIGdldCByYWlzZWQgKHNlZW4gaXQgdGFrZSAyNTBtcyEpCj4gICAgICBJ
ZiB0aGUgc3lzdGVtIGhhcyAyMTMzTVQvcyBtZW1vcnkgdGhlbiB3ZSBwb2ludGxlc3NseQo+ICAg
ICAgd2FpdCBvbmUgZnVsbCBzZWNvbmQgOigKPiB2NDogVXNlIHRoZSBuZXcgcGNvZGUgaW50ZXJm
YWNlIHRvIGdldCB0aGUgcWd2IHBvaW50cyByYXRoZXIKPiAgICAgIHRoYXQgdXNpbmcgaGFyZGNv
ZGVkIG51bWJlcnMKPgo+IFNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3ly
amFsYUBsaW51eC5pbnRlbC5jb20+Cj4gLS0tCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtl
ZmlsZSAgICAgICAgICAgICB8ICAgMSArCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5jICAgICAgICAgICB8IDIyOSArKysrKysrKysrKysrKysrKysrKysrCj4gICBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2Rydi5oICAgICAgICAgICB8ICAxMCArCj4gICBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X3JlZy5oICAgICAgICAgICB8ICAgMyArCj4gICBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9hdG9taWNfcGxhbmUuYyB8ICAyMCArKwo+ICAgZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfYXRvbWljX3BsYW5lLmggfCAgIDIgKwo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfYncuYyAgICAgICAgICAgfCAxODEgKysrKysrKysrKysrKysrKysKPiAgIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX2J3LmggICAgICAgICAgIHwgIDQ2ICsrKysrCj4gICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMgICAgICB8ICA0MCArKystCj4gICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF9kcnYuaCAgICAgICAgICB8ICAgMiArCj4gICAxMCBmaWxlcyBj
aGFuZ2VkLCA1MzMgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQo+ICAgY3JlYXRlIG1vZGUg
MTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2J3LmMKPiAgIGNyZWF0ZSBtb2RlIDEw
MDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9idy5oCj4KPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmls
ZQo+IGluZGV4IDY4MTA2ZmUzNWEwNC4uMTM5YTBmYzE5MzkwIDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFr
ZWZpbGUKPiBAQCAtMTM4LDYgKzEzOCw3IEBAIGk5MTUteSArPSBpbnRlbF9hdWRpby5vIFwKPiAg
IAkgIGludGVsX2F0b21pYy5vIFwKPiAgIAkgIGludGVsX2F0b21pY19wbGFuZS5vIFwKPiAgIAkg
IGludGVsX2Jpb3MubyBcCj4gKwkgIGludGVsX2J3Lm8gXAo+ICAgCSAgaW50ZWxfY2RjbGsubyBc
Cj4gICAJICBpbnRlbF9jb2xvci5vIFwKPiAgIAkgIGludGVsX2NvbWJvX3BoeS5vIFwKPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmMKPiBpbmRleCA1ZWQ4NjQ3NTJjN2IuLmI3ZmE3YjUxYzJlMiAxMDA2
NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwo+IEBAIC03MCw2ICs3MCw3IEBACj4gICAjaW5jbHVk
ZSAiaW50ZWxfb3ZlcmxheS5oIgo+ICAgI2luY2x1ZGUgImludGVsX3BpcGVfY3JjLmgiCj4gICAj
aW5jbHVkZSAiaW50ZWxfcG0uaCIKPiArI2luY2x1ZGUgImludGVsX3NpZGViYW5kLmgiCj4gICAj
aW5jbHVkZSAiaW50ZWxfc3ByaXRlLmgiCj4gICAjaW5jbHVkZSAiaW50ZWxfdWMuaCIKPiAgIAo+
IEBAIC0xNDM1LDYgKzE0MzYsMjMyIEBAIGJ4dF9nZXRfZHJhbV9pbmZvKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdikKPiAgIAlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+ICtzdHJ1Y3Qg
aW50ZWxfcWd2X3BvaW50IHsKPiArCXUxNiBkY2xrLCB0X3JwLCB0X3JkcHJlLCB0X3JjLCB0X3Jh
cywgdF9yY2Q7Cj4gK307Cj4gKwo+ICtzdHJ1Y3QgaW50ZWxfc2Fndl9pbmZvIHsKPiArCXN0cnVj
dCBpbnRlbF9xZ3ZfcG9pbnQgcG9pbnRzWzNdOwo+ICsJdTggbnVtX3BvaW50czsKPiArCXU4IG51
bV9jaGFubmVsczsKPiArCXU4IHRfYmw7Cj4gKwllbnVtIGludGVsX2RyYW1fdHlwZSBkcmFtX3R5
cGU7Cj4gK307Cj4gKwo+ICtzdGF0aWMgaW50IGljbF9wY29kZV9yZWFkX21lbV9nbG9iYWxfaW5m
byhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gKwkJCQkJICBzdHJ1Y3QgaW50
ZWxfc2Fndl9pbmZvICpzaSkKPiArewo+ICsJdTMyIHZhbCA9IDA7Cj4gKwlpbnQgcmV0Owo+ICsK
PiArCXJldCA9IHNhbmR5YnJpZGdlX3Bjb2RlX3JlYWQoZGV2X3ByaXYsCj4gKwkJCQkgICAgIElD
TF9QQ09ERV9NRU1fU1VCU1lTWVNURU1fSU5GTyB8Cj4gKwkJCQkgICAgIElDTF9QQ09ERV9NRU1f
U1NfUkVBRF9HTE9CQUxfSU5GTywKPiArCQkJCSAgICAgJnZhbCwgTlVMTCk7Cj4gKwlpZiAocmV0
KQo+ICsJCXJldHVybiByZXQ7Cj4gKwo+ICsJc3dpdGNoICh2YWwgJiAweGYpIHsKPiArCWNhc2Ug
MDoKPiArCQlzaS0+ZHJhbV90eXBlID0gSU5URUxfRFJBTV9ERFI0Owo+ICsJCWJyZWFrOwo+ICsJ
Y2FzZSAxOgo+ICsJCXNpLT5kcmFtX3R5cGUgPSBJTlRFTF9EUkFNX0REUjM7Cj4gKwkJYnJlYWs7
Cj4gKwljYXNlIDI6Cj4gKwkJc2ktPmRyYW1fdHlwZSA9IElOVEVMX0RSQU1fTFBERFIzOwo+ICsJ
CWJyZWFrOwo+ICsJY2FzZSAzOgo+ICsJCXNpLT5kcmFtX3R5cGUgPSBJTlRFTF9EUkFNX0xQRERS
MzsKPiArCQlicmVhazsKPiArCWRlZmF1bHQ6Cj4gKwkJTUlTU0lOR19DQVNFKHZhbCAmIDB4Zik7
Cj4gKwkJYnJlYWs7Cj4gKwl9Cj4gKwo+ICsJc2ktPm51bV9jaGFubmVscyA9ICh2YWwgJiAweGYw
KSA+PiA0Owo+ICsJc2ktPm51bV9wb2ludHMgPSAodmFsICYgMHhmMDApID4+IDg7Cj4gKwo+ICsJ
c2ktPnRfYmwgPSBzaS0+ZHJhbV90eXBlID09IElOVEVMX0RSQU1fRERSNCA/IDQgOiA4Owo+ICsK
PiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IGljbF9wY29kZV9yZWFkX3Fndl9w
b2ludF9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiArCQkJCQkgc3Ry
dWN0IGludGVsX3Fndl9wb2ludCAqc3AsCj4gKwkJCQkJIGludCBwb2ludCkKPiArewo+ICsJdTMy
IHZhbCA9IDAsIHZhbDI7Cj4gKwlpbnQgcmV0Owo+ICsKPiArCXJldCA9IHNhbmR5YnJpZGdlX3Bj
b2RlX3JlYWQoZGV2X3ByaXYsCj4gKwkJCQkgICAgIElDTF9QQ09ERV9NRU1fU1VCU1lTWVNURU1f
SU5GTyB8Cj4gKwkJCQkgICAgIElDTF9QQ09ERV9NRU1fU1NfUkVBRF9RR1ZfUE9JTlRfSU5GTyhw
b2ludCksCj4gKwkJCQkgICAgICZ2YWwsICZ2YWwyKTsKPiArCWlmIChyZXQpCj4gKwkJcmV0dXJu
IHJldDsKPiArCj4gKwlzcC0+ZGNsayA9IHZhbCAmIDB4ZmZmZjsKPiArCXNwLT50X3JwID0gKHZh
bCAmIDB4ZmYwMDAwKSA+PiAxNjsKPiArCXNwLT50X3JjZCA9ICh2YWwgJiAweGZmMDAwMDAwKSA+
PiAyNDsKPiArCj4gKwlzcC0+dF9yZHByZSA9IHZhbDIgJiAweGZmOwo+ICsJc3AtPnRfcmFzID0g
KHZhbDIgJiAweGZmMDApID4+IDg7Cj4gKwo+ICsJc3AtPnRfcmMgPSBzcC0+dF9ycCArIHNwLT50
X3JhczsKPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIGludCBpY2xfZ2V0X3Fn
dl9wb2ludHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAo+ICsJCQkgICAgICBz
dHJ1Y3QgaW50ZWxfc2Fndl9pbmZvICpzaSkKPiArewo+ICsJaW50IGksIHJldDsKPiArCj4gKwly
ZXQgPSBpY2xfcGNvZGVfcmVhZF9tZW1fZ2xvYmFsX2luZm8oZGV2X3ByaXYsIHNpKTsKPiArCWlm
IChyZXQpCj4gKwkJcmV0dXJuIHJldDsKPiArCj4gKwlpZiAoV0FSTl9PTihzaS0+bnVtX3BvaW50
cyA+IEFSUkFZX1NJWkUoc2ktPnBvaW50cykpKQo+ICsJCXNpLT5udW1fcG9pbnRzID0gQVJSQVlf
U0laRShzaS0+cG9pbnRzKTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgc2ktPm51bV9wb2ludHM7
IGkrKykgewo+ICsJCXN0cnVjdCBpbnRlbF9xZ3ZfcG9pbnQgKnNwID0gJnNpLT5wb2ludHNbaV07
Cj4gKwo+ICsJCXJldCA9IGljbF9wY29kZV9yZWFkX3Fndl9wb2ludF9pbmZvKGRldl9wcml2LCBz
cCwgaSk7Cj4gKwkJaWYgKHJldCkKPiArCQkJcmV0dXJuIHJldDsKPiArCj4gKwkJRFJNX0RFQlVH
X0tNUygiUUdWICVkOiBEQ0xLPSVkIHRSUD0lZCB0UkRQUkU9JWQgdFJBUz0lZCB0UkNEPSVkIHRS
Qz0lZFxuIiwKPiArCQkJICAgICAgaSwgc3AtPmRjbGssIHNwLT50X3JwLCBzcC0+dF9yZHByZSwg
c3AtPnRfcmFzLAo+ICsJCQkgICAgICBzcC0+dF9yY2QsIHNwLT50X3JjKTsKPiArCX0KPiArCj4g
KwlyZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIGludCBpY2xfY2FsY19idyhpbnQgZGNsaywg
aW50IG51bSwgaW50IGRlbikKPiArewo+ICsJLyogbXVsdGlwbGVzIG9mIDE2LjY2Nk1IeiAoMTAw
LzYpICovCj4gKwlyZXR1cm4gRElWX1JPVU5EX0NMT1NFU1QobnVtICogZGNsayAqIDEwMCwgZGVu
ICogNik7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgaWNsX3NhZ3ZfbWF4X2RjbGsoY29uc3Qgc3Ry
dWN0IGludGVsX3NhZ3ZfaW5mbyAqc2kpCj4gK3sKPiArCXUxNiBkY2xrID0gMDsKPiArCWludCBp
Owo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBzaS0+bnVtX3BvaW50czsgaSsrKQo+ICsJCWRjbGsg
PSBtYXgoZGNsaywgc2ktPnBvaW50c1tpXS5kY2xrKTsKPiArCj4gKwlyZXR1cm4gZGNsazsKPiAr
fQo+ICsKPiArc3RydWN0IGludGVsX3NhX2luZm8gewo+ICsJdTggZGVidXJzdCwgbXBhZ2VzaXpl
LCBkZXByb2did2xpbWl0LCBkaXNwbGF5cnRpZHM7Cj4gK307Cj4gKwo+ICtzdGF0aWMgY29uc3Qg
c3RydWN0IGludGVsX3NhX2luZm8gaWNsX3NhX2luZm8gPSB7Cj4gKwkuZGVidXJzdCA9IDgsCj4g
KwkubXBhZ2VzaXplID0gMTYsCj4gKwkuZGVwcm9nYndsaW1pdCA9IDI1LCAvKiBHQi9zICovCj4g
KwkuZGlzcGxheXJ0aWRzID0gMTI4LAo+ICt9Owo+ICsKPiArc3RhdGljIGludCBpY2xfZ2V0X2J3
X2luZm8oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+ICt7Cj4gKwlzdHJ1Y3Qg
aW50ZWxfc2Fndl9pbmZvIHNpID0ge307Cj4gKwljb25zdCBzdHJ1Y3QgaW50ZWxfc2FfaW5mbyAq
c2EgPSAmaWNsX3NhX2luZm87Cj4gKwlib29sIGlzX3lfdGlsZSA9IHRydWU7IC8qIGFzc3VtZSB5
IHRpbGUgbWF5IGJlIHVzZWQgKi8KPiArCWludCBudW1fY2hhbm5lbHM7Cj4gKwlpbnQgZGVpbnRl
cmxlYXZlOwo+ICsJaW50IGlwcWRlcHRoLCBpcHFkZXB0aHBjaDsKPiArCWludCBkY2xrX21heDsK
PiArCWludCBtYXhkZWJ3Owo+ICsJaW50IGksIHJldDsKPiArCj4gKwlyZXQgPSBpY2xfZ2V0X3Fn
dl9wb2ludHMoZGV2X3ByaXYsICZzaSk7Cj4gKwlpZiAocmV0KQo+ICsJCXJldHVybiByZXQ7Cj4g
KwludW1fY2hhbm5lbHMgPSBzaS5udW1fY2hhbm5lbHM7Cj4gKwo+ICsJZGVpbnRlcmxlYXZlID0g
RElWX1JPVU5EX1VQKG51bV9jaGFubmVscywgaXNfeV90aWxlID8gNCA6IDIpOwo+ICsJZGNsa19t
YXggPSBpY2xfc2Fndl9tYXhfZGNsaygmc2kpOwo+ICsKPiArCWlwcWRlcHRocGNoID0gMTY7Cj4g
Kwo+ICsJbWF4ZGVidyA9IG1pbihzYS0+ZGVwcm9nYndsaW1pdCAqIDEwMDAsCj4gKwkJICAgICAg
aWNsX2NhbGNfYncoZGNsa19tYXgsIDE2LCAxKSAqIDYgLyAxMCk7IC8qIDYwJSAqLwo+ICsJaXBx
ZGVwdGggPSBtaW4oaXBxZGVwdGhwY2gsIHNhLT5kaXNwbGF5cnRpZHMgLyBudW1fY2hhbm5lbHMp
Owo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGRldl9wcml2LT5tYXhfYncpOyBp
KyspIHsKPiArCQlzdHJ1Y3QgaW50ZWxfYndfaW5mbyAqYmkgPSAmZGV2X3ByaXYtPm1heF9id1tp
XTsKPiArCQlpbnQgY2xwY2hncm91cDsKPiArCQlpbnQgajsKPiArCj4gKwkJY2xwY2hncm91cCA9
IChzYS0+ZGVidXJzdCAqIGRlaW50ZXJsZWF2ZSAvIG51bV9jaGFubmVscykgPDwgaTsKPiArCQli
aS0+bnVtX3BsYW5lcyA9IChpcHFkZXB0aCAtIGNscGNoZ3JvdXApIC8gY2xwY2hncm91cCArIDE7
Cj4gKwo+ICsJCWZvciAoaiA9IDA7IGogPCBzaS5udW1fcG9pbnRzOyBqKyspIHsKPiArCQkJY29u
c3Qgc3RydWN0IGludGVsX3Fndl9wb2ludCAqc3AgPSAmc2kucG9pbnRzW2pdOwo+ICsJCQlpbnQg
Y3QsIGJ3Owo+ICsKPiArCQkJLyoKPiArCQkJICogTWF4IHJvdyBjeWNsZSB0aW1lCj4gKwkJCSAq
Cj4gKwkJCSAqIEZJWE1FIHdoYXQgaXMgdGhlIGxvZ2ljIGJlaGluZCB0aGUKPiArCQkJICogYXNz
dW1lZCBidXJzdCBsZW5ndGg/Cj4gKwkJCSAqLwo+ICsJCQljdCA9IG1heF90KGludCwgc3AtPnRf
cmMsIHNwLT50X3JwICsgc3AtPnRfcmNkICsKPiArCQkJCSAgIChjbHBjaGdyb3VwIC0gMSkgKiBz
aS50X2JsICsgc3AtPnRfcmRwcmUpOwo+ICsJCQlidyA9IGljbF9jYWxjX2J3KHNwLT5kY2xrLCBj
bHBjaGdyb3VwICogMzIgKiBudW1fY2hhbm5lbHMsIGN0KTsKPiArCj4gKwkJCWJpLT5kZXJhdGVk
Yndbal0gPSBtaW4obWF4ZGVidywKPiArCQkJCQkgICAgICAgYncgKiA5IC8gMTApOyAvKiA5MCUg
Ki8KPiArCj4gKwkJCURSTV9ERUJVR19LTVMoIkJXJWQgLyBRR1YgJWQ6IG51bV9wbGFuZXM9JWQg
ZGVyYXRlZGJ3PSVkXG4iLAo+ICsJCQkJICAgICAgaSwgaiwgYmktPm51bV9wbGFuZXMsIGJpLT5k
ZXJhdGVkYndbal0pOwo+ICsJCX0KPiArCj4gKwkJaWYgKGJpLT5udW1fcGxhbmVzID09IDEpCj4g
KwkJCWJyZWFrOwo+ICsJfQo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdW5z
aWduZWQgaW50IGljbF9tYXhfYncoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAo+
ICsJCQkgICAgICAgaW50IG51bV9wbGFuZXMsIGludCBxZ3ZfcG9pbnQpCj4gK3sKPiArCWludCBp
Owo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGRldl9wcml2LT5tYXhfYncpOyBp
KyspIHsKPiArCQljb25zdCBzdHJ1Y3QgaW50ZWxfYndfaW5mbyAqYmkgPQo+ICsJCQkmZGV2X3By
aXYtPm1heF9id1tpXTsKPiArCj4gKwkJaWYgKG51bV9wbGFuZXMgPj0gYmktPm51bV9wbGFuZXMp
Cj4gKwkJCXJldHVybiBiaS0+ZGVyYXRlZGJ3W3Fndl9wb2ludF07Cj4gKwl9Cj4gKwo+ICsJcmV0
dXJuIDA7Cj4gK30KPiArCj4gK3Vuc2lnbmVkIGludCBpbnRlbF9tYXhfZGF0YV9yYXRlKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiArCQkJCSBpbnQgbnVtX3BsYW5lcykKPiAr
ewo+ICsJaWYgKElTX0lDRUxBS0UoZGV2X3ByaXYpKQo+ICsJCS8qCj4gKwkJICogRklYTUUgd2l0
aCBTQUdWIGRpc2FibGVkIG1heWJlIHdlIGNhbiBhc3N1bWUKPiArCQkgKiBwb2ludCAxIHdpbGwg
YWx3YXlzIGJlIHVzZWQ/IFNlZW1zIHRvIG1hdGNoCj4gKwkJICogdGhlIGJlaGF2aW91ciBvYnNl
cnZlZCBpbiB0aGUgd2lsZC4KPiArCQkgKi8KPiArCQlyZXR1cm4gbWluMyhpY2xfbWF4X2J3KGRl
dl9wcml2LCBudW1fcGxhbmVzLCAwKSwKPiArCQkJICAgIGljbF9tYXhfYncoZGV2X3ByaXYsIG51
bV9wbGFuZXMsIDEpLAo+ICsJCQkgICAgaWNsX21heF9idyhkZXZfcHJpdiwgbnVtX3BsYW5lcywg
MikpOwo+ICsJZWxzZQo+ICsJCXJldHVybiBVSU5UX01BWDsKPiArfQo+ICsKPiAgIHN0YXRpYyB2
b2lkCj4gICBpbnRlbF9nZXRfZHJhbV9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdikKPiAgIHsKPiBAQCAtMTY1NSw2ICsxODgyLDggQEAgc3RhdGljIGludCBpOTE1X2RyaXZl
cl9pbml0X2h3KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgIAkgKi8KPiAg
IAlpbnRlbF9nZXRfZHJhbV9pbmZvKGRldl9wcml2KTsKPiAgIAo+ICsJaWYgKElOVEVMX0dFTihk
ZXZfcHJpdikgPj0gMTEpCj4gKwkJaWNsX2dldF9id19pbmZvKGRldl9wcml2KTsKPiAgIAo+ICAg
CXJldHVybiAwOwo+ICAgCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCj4gaW5kZXggNjRmYTM1M2E2
MmJiLi5kMWI5YzNmZTU4MDIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKPiBAQCAtNTQs
NiArNTQsNyBAQAo+ICAgI2luY2x1ZGUgPGRybS9kcm1fY2FjaGUuaD4KPiAgICNpbmNsdWRlIDxk
cm0vZHJtX3V0aWwuaD4KPiAgICNpbmNsdWRlIDxkcm0vZHJtX2RzYy5oPgo+ICsjaW5jbHVkZSA8
ZHJtL2RybV9hdG9taWMuaD4KPiAgICNpbmNsdWRlIDxkcm0vZHJtX2Nvbm5lY3Rvci5oPgo+ICAg
I2luY2x1ZGUgPGRybS9pOTE1X21laV9oZGNwX2ludGVyZmFjZS5oPgo+ICAgCj4gQEAgLTE4Mzcs
NiArMTgzOCwxMyBAQCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSB7Cj4gICAJCX0gdHlwZTsKPiAg
IAl9IGRyYW1faW5mbzsKPiAgIAo+ICsJc3RydWN0IGludGVsX2J3X2luZm8gewo+ICsJCWludCBu
dW1fcGxhbmVzOwo+ICsJCWludCBkZXJhdGVkYndbM107Cj4gKwl9IG1heF9id1s2XTsKPiArCj4g
KwlzdHJ1Y3QgZHJtX3ByaXZhdGVfb2JqIGJ3X29iajsKPiArCj4gICAJc3RydWN0IGk5MTVfcnVu
dGltZV9wbSBydW50aW1lX3BtOwo+ICAgCj4gICAJc3RydWN0IHsKPiBAQCAtMjcwNiw2ICsyNzE0
LDggQEAgZXh0ZXJuIHVuc2lnbmVkIGxvbmcgaTkxNV9tY2hfdmFsKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdik7Cj4gICBleHRlcm4gdW5zaWduZWQgbG9uZyBpOTE1X2dmeF92YWwo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKPiAgIGV4dGVybiB2b2lkIGk5MTVf
dXBkYXRlX2dmeF92YWwoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKPiAgIGlu
dCB2bHZfZm9yY2VfZ2Z4X2Nsb2NrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwg
Ym9vbCBvbik7Cj4gK3Vuc2lnbmVkIGludCBpbnRlbF9tYXhfZGF0YV9yYXRlKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiArCQkJCSBpbnQgbnVtX3BsYW5lcyk7Cj4gICAKPiAg
IHUzMiBpbnRlbF9jYWxjdWxhdGVfbWNyX3Nfc3Nfc2VsZWN0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdik7Cj4gICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9yZWcuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKPiBpbmRleCBlOTdj
NDdmY2E2NDUuLjM5OTM2NmE0MTUyNCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3JlZy5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAo+IEBA
IC04Nzc0LDYgKzg3NzQsOSBAQCBlbnVtIHsKPiAgICNkZWZpbmUgICBHRU42X1BDT0RFX1dSSVRF
X01JTl9GUkVRX1RBQkxFCTB4OAo+ICAgI2RlZmluZSAgIEdFTjZfUENPREVfUkVBRF9NSU5fRlJF
UV9UQUJMRQkweDkKPiAgICNkZWZpbmUgICBHRU42X1JFQURfT0NfUEFSQU1TCQkJMHhjCj4gKyNk
ZWZpbmUgICBJQ0xfUENPREVfTUVNX1NVQlNZU1lTVEVNX0lORk8JMHhkCj4gKyNkZWZpbmUgICAg
IElDTF9QQ09ERV9NRU1fU1NfUkVBRF9HTE9CQUxfSU5GTwkoMHgwIDw8IDgpCj4gKyNkZWZpbmUg
ICAgIElDTF9QQ09ERV9NRU1fU1NfUkVBRF9RR1ZfUE9JTlRfSU5GTyhwb2ludCkJKCgocG9pbnQp
IDw8IDE2KSB8ICgweDEgPDwgOCkpCj4gICAjZGVmaW5lICAgR0VONl9QQ09ERV9SRUFEX0RfQ09N
UAkJMHgxMAo+ICAgI2RlZmluZSAgIEdFTjZfUENPREVfV1JJVEVfRF9DT01QCQkweDExCj4gICAj
ZGVmaW5lICAgSFNXX1BDT0RFX0RFX1dSSVRFX0ZSRVFfUkVRCQkweDE3Cj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2F0b21pY19wbGFuZS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfYXRvbWljX3BsYW5lLmMKPiBpbmRleCBkMTE2ODFkNzFhZGQuLmYxNDJj
NWMyMmQ3ZSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9hdG9taWNf
cGxhbmUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2F0b21pY19wbGFuZS5j
Cj4gQEAgLTExNCw2ICsxMTQsMjIgQEAgaW50ZWxfcGxhbmVfZGVzdHJveV9zdGF0ZShzdHJ1Y3Qg
ZHJtX3BsYW5lICpwbGFuZSwKPiAgIAlkcm1fYXRvbWljX2hlbHBlcl9wbGFuZV9kZXN0cm95X3N0
YXRlKHBsYW5lLCBzdGF0ZSk7Cj4gICB9Cj4gICAKPiArdW5zaWduZWQgaW50IGludGVsX3BsYW5l
X2RhdGFfcmF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKPiAr
CQkJCSAgIGNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGUpCj4gK3sK
PiArCWNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0gcGxhbmVfc3RhdGUtPmJhc2Uu
ZmI7Cj4gKwl1bnNpZ25lZCBpbnQgY3BwID0gMDsKPiArCWludCBpOwo+ICsKPiArCWlmICghcGxh
bmVfc3RhdGUtPmJhc2UudmlzaWJsZSkKPiArCQlyZXR1cm4gMDsKPiArCj4gKwlmb3IgKGkgPSAw
OyBpIDwgZmItPmZvcm1hdC0+bnVtX3BsYW5lczsgaSsrKQo+ICsJCWNwcCArPSBmYi0+Zm9ybWF0
LT5jcHBbaV07Cj4gKwo+ICsJcmV0dXJuIGNwcCAqIGNydGNfc3RhdGUtPnBpeGVsX3JhdGU7Cj4g
K30KPiArCj4gICBpbnQgaW50ZWxfcGxhbmVfYXRvbWljX2NoZWNrX3dpdGhfc3RhdGUoY29uc3Qg
c3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9jcnRjX3N0YXRlLAo+ICAgCQkJCQlzdHJ1Y3Qg
aW50ZWxfY3J0Y19zdGF0ZSAqbmV3X2NydGNfc3RhdGUsCj4gICAJCQkJCWNvbnN0IHN0cnVjdCBp
bnRlbF9wbGFuZV9zdGF0ZSAqb2xkX3BsYW5lX3N0YXRlLAo+IEBAIC0xMjUsNiArMTQxLDcgQEAg
aW50IGludGVsX3BsYW5lX2F0b21pY19jaGVja193aXRoX3N0YXRlKGNvbnN0IHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpvbGRfY3J0Y18KPiAgIAluZXdfY3J0Y19zdGF0ZS0+YWN0aXZlX3BsYW5l
cyAmPSB+QklUKHBsYW5lLT5pZCk7Cj4gICAJbmV3X2NydGNfc3RhdGUtPm52MTJfcGxhbmVzICY9
IH5CSVQocGxhbmUtPmlkKTsKPiAgIAluZXdfY3J0Y19zdGF0ZS0+YzhfcGxhbmVzICY9IH5CSVQo
cGxhbmUtPmlkKTsKPiArCW5ld19jcnRjX3N0YXRlLT5kYXRhX3JhdGVbcGxhbmUtPmlkXSA9IDA7
Cj4gICAJbmV3X3BsYW5lX3N0YXRlLT5iYXNlLnZpc2libGUgPSBmYWxzZTsKPiAgIAo+ICAgCWlm
ICghbmV3X3BsYW5lX3N0YXRlLT5iYXNlLmNydGMgJiYgIW9sZF9wbGFuZV9zdGF0ZS0+YmFzZS5j
cnRjKQo+IEBAIC0xNDksNiArMTY2LDkgQEAgaW50IGludGVsX3BsYW5lX2F0b21pY19jaGVja193
aXRoX3N0YXRlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y18KPiAgIAlp
ZiAobmV3X3BsYW5lX3N0YXRlLT5iYXNlLnZpc2libGUgfHwgb2xkX3BsYW5lX3N0YXRlLT5iYXNl
LnZpc2libGUpCj4gICAJCW5ld19jcnRjX3N0YXRlLT51cGRhdGVfcGxhbmVzIHw9IEJJVChwbGFu
ZS0+aWQpOwo+ICAgCj4gKwluZXdfY3J0Y19zdGF0ZS0+ZGF0YV9yYXRlW3BsYW5lLT5pZF0gPQo+
ICsJCWludGVsX3BsYW5lX2RhdGFfcmF0ZShuZXdfY3J0Y19zdGF0ZSwgbmV3X3BsYW5lX3N0YXRl
KTsKPiArCj4gICAJcmV0dXJuIGludGVsX3BsYW5lX2F0b21pY19jYWxjX2NoYW5nZXMob2xkX2Ny
dGNfc3RhdGUsCj4gICAJCQkJCSAgICAgICAmbmV3X2NydGNfc3RhdGUtPmJhc2UsCj4gICAJCQkJ
CSAgICAgICBvbGRfcGxhbmVfc3RhdGUsCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2ludGVsX2F0b21pY19wbGFuZS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYXRv
bWljX3BsYW5lLmgKPiBpbmRleCAxNDY3ODYyMDQ0MGYuLjBhOTY1MTM3NmQwZSAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9hdG9taWNfcGxhbmUuaAo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2F0b21pY19wbGFuZS5oCj4gQEAgLTE1LDYgKzE1LDgg
QEAgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlOwo+ICAgCj4gICBleHRlcm4gY29uc3Qgc3RydWN0
IGRybV9wbGFuZV9oZWxwZXJfZnVuY3MgaW50ZWxfcGxhbmVfaGVscGVyX2Z1bmNzOwo+ICAgCj4g
K3Vuc2lnbmVkIGludCBpbnRlbF9wbGFuZV9kYXRhX3JhdGUoY29uc3Qgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUsCj4gKwkJCQkgICBjb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVf
c3RhdGUgKnBsYW5lX3N0YXRlKTsKPiAgIHZvaWQgaW50ZWxfdXBkYXRlX3BsYW5lKHN0cnVjdCBp
bnRlbF9wbGFuZSAqcGxhbmUsCj4gICAJCQljb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
Y3J0Y19zdGF0ZSwKPiAgIAkJCWNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqcGxhbmVf
c3RhdGUpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9idy5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYncuYwo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4g
aW5kZXggMDAwMDAwMDAwMDAwLi4zMDRiZjg3ZjBhMmUKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYncuYwo+IEBAIC0wLDAgKzEsMTgxIEBACj4gKy8v
IFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKPiArLyoKPiArICogQ29weXJpZ2h0IMKpIDIw
MTkgSW50ZWwgQ29ycG9yYXRpb24KPiArICovCj4gKwo+ICsjaW5jbHVkZSA8ZHJtL2RybV9hdG9t
aWNfc3RhdGVfaGVscGVyLmg+Cj4gKwo+ICsjaW5jbHVkZSAiaW50ZWxfYncuaCIKPiArI2luY2x1
ZGUgImludGVsX2Rydi5oIgo+ICsKPiArc3RhdGljIHVuc2lnbmVkIGludCBpbnRlbF9id19jcnRj
X251bV9hY3RpdmVfcGxhbmVzKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0
YXRlKQo+ICt7Cj4gKwkvKgo+ICsJICogV2UgYXNzdW1lIGN1cnNvcnMgYXJlIHNtYWxsIGVub3Vn
aAo+ICsJICogdG8gbm90IG5vdCBjYXVzZSBiYW5kd2lkdGggcHJvYmxlbXMuCj4gKwkgKi8KPiAr
CXJldHVybiBod2VpZ2h0OChjcnRjX3N0YXRlLT5hY3RpdmVfcGxhbmVzICYgfkJJVChQTEFORV9D
VVJTT1IpKTsKPiArfQo+ICsKPiArc3RhdGljIHVuc2lnbmVkIGludCBpbnRlbF9id19jcnRjX2Rh
dGFfcmF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKPiArewo+
ICsJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPmJh
c2UuY3J0Yyk7Cj4gKwl1bnNpZ25lZCBpbnQgZGF0YV9yYXRlID0gMDsKPiArCWVudW0gcGxhbmVf
aWQgcGxhbmVfaWQ7Cj4gKwo+ICsJZm9yX2VhY2hfcGxhbmVfaWRfb25fY3J0YyhjcnRjLCBwbGFu
ZV9pZCkgewo+ICsJCS8qCj4gKwkJICogV2UgYXNzdW1lIGN1cnNvcnMgYXJlIHNtYWxsIGVub3Vn
aAo+ICsJCSAqIHRvIG5vdCBub3QgY2F1c2UgYmFuZHdpZHRoIHByb2JsZW1zLgo+ICsJCSAqLwo+
ICsJCWlmIChwbGFuZV9pZCA9PSBQTEFORV9DVVJTT1IpCj4gKwkJCWNvbnRpbnVlOwo+ICsKPiAr
CQlkYXRhX3JhdGUgKz0gY3J0Y19zdGF0ZS0+ZGF0YV9yYXRlW3BsYW5lX2lkXTsKPiArCX0KPiAr
Cj4gKwlyZXR1cm4gZGF0YV9yYXRlOwo+ICt9Cj4gKwo+ICt2b2lkIGludGVsX2J3X2NydGNfdXBk
YXRlKHN0cnVjdCBpbnRlbF9id19zdGF0ZSAqYndfc3RhdGUsCj4gKwkJCSAgY29uc3Qgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCj4gK3sKPiArCXN0cnVjdCBpbnRlbF9jcnRj
ICpjcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0YXRlLT5iYXNlLmNydGMpOwo+ICsKPiArCWJ3
X3N0YXRlLT5kYXRhX3JhdGVbY3J0Yy0+cGlwZV0gPQo+ICsJCWludGVsX2J3X2NydGNfZGF0YV9y
YXRlKGNydGNfc3RhdGUpOwo+ICsJYndfc3RhdGUtPm51bV9hY3RpdmVfcGxhbmVzW2NydGMtPnBp
cGVdID0KPiArCQlpbnRlbF9id19jcnRjX251bV9hY3RpdmVfcGxhbmVzKGNydGNfc3RhdGUpOwo+
ICsKPiArCURSTV9ERUJVR19LTVMoInBpcGUgJWMgZGF0YSByYXRlICV1IG51bSBhY3RpdmUgcGxh
bmVzICV1XG4iLAo+ICsJCSAgICAgIHBpcGVfbmFtZShjcnRjLT5waXBlKSwKPiArCQkgICAgICBi
d19zdGF0ZS0+ZGF0YV9yYXRlW2NydGMtPnBpcGVdLAo+ICsJCSAgICAgIGJ3X3N0YXRlLT5udW1f
YWN0aXZlX3BsYW5lc1tjcnRjLT5waXBlXSk7Cj4gK30KPiArCj4gK3N0YXRpYyB1bnNpZ25lZCBp
bnQgaW50ZWxfYndfbnVtX2FjdGl2ZV9wbGFuZXMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2LAo+ICsJCQkJCSAgICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfYndfc3RhdGUgKmJ3X3N0
YXRlKQo+ICt7Cj4gKwl1bnNpZ25lZCBpbnQgbnVtX2FjdGl2ZV9wbGFuZXMgPSAwOwo+ICsJZW51
bSBwaXBlIHBpcGU7Cj4gKwo+ICsJZm9yX2VhY2hfcGlwZShkZXZfcHJpdiwgcGlwZSkKPiArCQlu
dW1fYWN0aXZlX3BsYW5lcyArPSBid19zdGF0ZS0+bnVtX2FjdGl2ZV9wbGFuZXNbcGlwZV07Cj4g
Kwo+ICsJcmV0dXJuIG51bV9hY3RpdmVfcGxhbmVzOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdW5zaWdu
ZWQgaW50IGludGVsX2J3X2RhdGFfcmF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsCj4gKwkJCQkgICAgICAgY29uc3Qgc3RydWN0IGludGVsX2J3X3N0YXRlICpid19zdGF0ZSkK
PiArewo+ICsJdW5zaWduZWQgaW50IGRhdGFfcmF0ZSA9IDA7Cj4gKwllbnVtIHBpcGUgcGlwZTsK
PiArCj4gKwlmb3JfZWFjaF9waXBlKGRldl9wcml2LCBwaXBlKQo+ICsJCWRhdGFfcmF0ZSArPSBi
d19zdGF0ZS0+ZGF0YV9yYXRlW3BpcGVdOwo+ICsKPiArCXJldHVybiBkYXRhX3JhdGU7Cj4gK30K
PiArCj4gK2ludCBpbnRlbF9id19hdG9taWNfY2hlY2soc3RydWN0IGludGVsX2F0b21pY19zdGF0
ZSAqc3RhdGUpCj4gK3sKPiArCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRv
X2k5MTUoc3RhdGUtPmJhc2UuZGV2KTsKPiArCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpuZXdf
Y3J0Y19zdGF0ZSwgKm9sZF9jcnRjX3N0YXRlOwo+ICsJc3RydWN0IGludGVsX2J3X3N0YXRlICpi
d19zdGF0ZSA9IE5VTEw7Cj4gKwl1bnNpZ25lZCBpbnQgZGF0YV9yYXRlLCBtYXhfZGF0YV9yYXRl
Owo+ICsJdW5zaWduZWQgaW50IG51bV9hY3RpdmVfcGxhbmVzOwo+ICsJc3RydWN0IGludGVsX2Ny
dGMgKmNydGM7Cj4gKwlpbnQgaTsKPiArCj4gKwkvKiBGSVhNRSBlYXJsaWVyIGdlbnMgbmVlZCBz
b21lIGNoZWNrcyB0b28gKi8KPiArCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwgMTEpCj4gKwkJ
cmV0dXJuIDA7Cj4gKwo+ICsJZm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3Rh
dGUsIGNydGMsIG9sZF9jcnRjX3N0YXRlLAo+ICsJCQkJCSAgICBuZXdfY3J0Y19zdGF0ZSwgaSkg
ewo+ICsJCXVuc2lnbmVkIGludCBvbGRfZGF0YV9yYXRlID0KPiArCQkJaW50ZWxfYndfY3J0Y19k
YXRhX3JhdGUob2xkX2NydGNfc3RhdGUpOwo+ICsJCXVuc2lnbmVkIGludCBuZXdfZGF0YV9yYXRl
ID0KPiArCQkJaW50ZWxfYndfY3J0Y19kYXRhX3JhdGUobmV3X2NydGNfc3RhdGUpOwo+ICsJCXVu
c2lnbmVkIGludCBvbGRfYWN0aXZlX3BsYW5lcyA9Cj4gKwkJCWludGVsX2J3X2NydGNfbnVtX2Fj
dGl2ZV9wbGFuZXMob2xkX2NydGNfc3RhdGUpOwo+ICsJCXVuc2lnbmVkIGludCBuZXdfYWN0aXZl
X3BsYW5lcyA9Cj4gKwkJCWludGVsX2J3X2NydGNfbnVtX2FjdGl2ZV9wbGFuZXMobmV3X2NydGNf
c3RhdGUpOwo+ICsKPiArCQkvKgo+ICsJCSAqIEF2b2lkIGxvY2tpbmcgdGhlIGJ3IHN0YXRlIHdo
ZW4KPiArCQkgKiBub3RoaW5nIHNpZ25pZmljYW50IGhhcyBjaGFuZ2VkLgo+ICsJCSAqLwo+ICsJ
CWlmIChvbGRfZGF0YV9yYXRlID09IG5ld19kYXRhX3JhdGUgJiYKPiArCQkgICAgb2xkX2FjdGl2
ZV9wbGFuZXMgPT0gbmV3X2FjdGl2ZV9wbGFuZXMpCj4gKwkJCWNvbnRpbnVlOwo+ICsKPiArCQli
d19zdGF0ZSAgPSBpbnRlbF9hdG9taWNfZ2V0X2J3X3N0YXRlKHN0YXRlKTsKPiArCQlpZiAoSVNf
RVJSKGJ3X3N0YXRlKSkKPiArCQkJcmV0dXJuIFBUUl9FUlIoYndfc3RhdGUpOwo+ICsKPiArCQli
d19zdGF0ZS0+ZGF0YV9yYXRlW2NydGMtPnBpcGVdID0gbmV3X2RhdGFfcmF0ZTsKPiArCQlid19z
dGF0ZS0+bnVtX2FjdGl2ZV9wbGFuZXNbY3J0Yy0+cGlwZV0gPSBuZXdfYWN0aXZlX3BsYW5lczsK
PiArCj4gKwkJRFJNX0RFQlVHX0tNUygicGlwZSAlYyBkYXRhIHJhdGUgJXUgbnVtIGFjdGl2ZSBw
bGFuZXMgJXVcbiIsCj4gKwkJCSAgICAgIHBpcGVfbmFtZShjcnRjLT5waXBlKSwKPiArCQkJICAg
ICAgYndfc3RhdGUtPmRhdGFfcmF0ZVtjcnRjLT5waXBlXSwKPiArCQkJICAgICAgYndfc3RhdGUt
Pm51bV9hY3RpdmVfcGxhbmVzW2NydGMtPnBpcGVdKTsKPiArCX0KPiArCj4gKwlpZiAoIWJ3X3N0
YXRlKQo+ICsJCXJldHVybiAwOwo+ICsKPiArCWRhdGFfcmF0ZSA9IGludGVsX2J3X2RhdGFfcmF0
ZShkZXZfcHJpdiwgYndfc3RhdGUpOwo+ICsJbnVtX2FjdGl2ZV9wbGFuZXMgPSBpbnRlbF9id19u
dW1fYWN0aXZlX3BsYW5lcyhkZXZfcHJpdiwgYndfc3RhdGUpOwo+ICsKPiArCW1heF9kYXRhX3Jh
dGUgPSBpbnRlbF9tYXhfZGF0YV9yYXRlKGRldl9wcml2LCBudW1fYWN0aXZlX3BsYW5lcyk7Cj4g
Kwo+ICsJZGF0YV9yYXRlID0gRElWX1JPVU5EX1VQKGRhdGFfcmF0ZSwgMTAwMCk7Cj4gKwo+ICsJ
aWYgKGRhdGFfcmF0ZSA+IG1heF9kYXRhX3JhdGUpIHsKPiArCQlEUk1fREVCVUdfS01TKCJCYW5k
d2lkdGggJXUgTUIvcyBleGNlZWRzIG1heCBhdmFpbGFibGUgJWQgTUIvcyAoJWQgYWN0aXZlIHBs
YW5lcylcbiIsCj4gKwkJCSAgICAgIGRhdGFfcmF0ZSwgbWF4X2RhdGFfcmF0ZSwgbnVtX2FjdGl2
ZV9wbGFuZXMpOwo+ICsJCXJldHVybiAtRUlOVkFMOwo+ICsJfQo+ICsKPiArCXJldHVybiAwOwo+
ICt9Cj4gKwo+ICtzdGF0aWMgc3RydWN0IGRybV9wcml2YXRlX3N0YXRlICppbnRlbF9id19kdXBs
aWNhdGVfc3RhdGUoc3RydWN0IGRybV9wcml2YXRlX29iaiAqb2JqKQo+ICt7Cj4gKwlzdHJ1Y3Qg
aW50ZWxfYndfc3RhdGUgKnN0YXRlOwo+ICsKPiArCXN0YXRlID0ga21lbWR1cChvYmotPnN0YXRl
LCBzaXplb2YoKnN0YXRlKSwgR0ZQX0tFUk5FTCk7Cj4gKwlpZiAoIXN0YXRlKQo+ICsJCXJldHVy
biBOVUxMOwo+ICsKPiArCV9fZHJtX2F0b21pY19oZWxwZXJfcHJpdmF0ZV9vYmpfZHVwbGljYXRl
X3N0YXRlKG9iaiwgJnN0YXRlLT5iYXNlKTsKPiArCj4gKwlyZXR1cm4gJnN0YXRlLT5iYXNlOwo+
ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBpbnRlbF9id19kZXN0cm95X3N0YXRlKHN0cnVjdCBkcm1f
cHJpdmF0ZV9vYmogKm9iaiwKPiArCQkJCSAgIHN0cnVjdCBkcm1fcHJpdmF0ZV9zdGF0ZSAqc3Rh
dGUpCj4gK3sKPiArCWtmcmVlKHN0YXRlKTsKPiArfQo+ICsKPiArc3RhdGljIGNvbnN0IHN0cnVj
dCBkcm1fcHJpdmF0ZV9zdGF0ZV9mdW5jcyBpbnRlbF9id19mdW5jcyA9IHsKPiArCS5hdG9taWNf
ZHVwbGljYXRlX3N0YXRlID0gaW50ZWxfYndfZHVwbGljYXRlX3N0YXRlLAo+ICsJLmF0b21pY19k
ZXN0cm95X3N0YXRlID0gaW50ZWxfYndfZGVzdHJveV9zdGF0ZSwKPiArfTsKPiArCj4gK2ludCBp
bnRlbF9id19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiArewo+ICsJ
c3RydWN0IGludGVsX2J3X3N0YXRlICpzdGF0ZTsKPiArCj4gKwlzdGF0ZSA9IGt6YWxsb2Moc2l6
ZW9mKCpzdGF0ZSksIEdGUF9LRVJORUwpOwo+ICsJaWYgKCFzdGF0ZSkKPiArCQlyZXR1cm4gLUVO
T01FTTsKPiArCj4gKwlkcm1fYXRvbWljX3ByaXZhdGVfb2JqX2luaXQoJmRldl9wcml2LT5kcm0s
ICZkZXZfcHJpdi0+Yndfb2JqLAo+ICsJCQkJICAgICZzdGF0ZS0+YmFzZSwgJmludGVsX2J3X2Z1
bmNzKTsKPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9idy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYncuaAo+IG5l
dyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAwLi5jMTQyNzJjYTViNTkKPiAt
LS0gL2Rldi9udWxsCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYncuaAo+IEBA
IC0wLDAgKzEsNDYgQEAKPiArLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVCAqLwo+ICsv
Kgo+ICsgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgo+ICsgKi8KPiArCj4g
KyNpZm5kZWYgX19JTlRFTF9CV19IX18KPiArI2RlZmluZSBfX0lOVEVMX0JXX0hfXwo+ICsKPiAr
I2luY2x1ZGUgPGRybS9kcm1fYXRvbWljLmg+Cj4gKwo+ICsjaW5jbHVkZSAiaTkxNV9kcnYuaCIK
PiArI2luY2x1ZGUgImludGVsX2Rpc3BsYXkuaCIKPiArCj4gK3N0cnVjdCBkcm1faTkxNV9wcml2
YXRlOwo+ICtzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlOwo+ICtzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZTsKPiArCj4gK3N0cnVjdCBpbnRlbF9id19zdGF0ZSB7Cj4gKwlzdHJ1Y3QgZHJtX3ByaXZh
dGVfc3RhdGUgYmFzZTsKPiArCj4gKwl1bnNpZ25lZCBpbnQgZGF0YV9yYXRlW0k5MTVfTUFYX1BJ
UEVTXTsKPiArCXU4IG51bV9hY3RpdmVfcGxhbmVzW0k5MTVfTUFYX1BJUEVTXTsKPiArfTsKPiAr
Cj4gKyNkZWZpbmUgdG9faW50ZWxfYndfc3RhdGUoeCkgY29udGFpbmVyX29mKCh4KSwgc3RydWN0
IGludGVsX2J3X3N0YXRlLCBiYXNlKQo+ICsKPiArc3RhdGljIGlubGluZSBzdHJ1Y3QgaW50ZWxf
Yndfc3RhdGUgKgo+ICtpbnRlbF9hdG9taWNfZ2V0X2J3X3N0YXRlKHN0cnVjdCBpbnRlbF9hdG9t
aWNfc3RhdGUgKnN0YXRlKQo+ICt7Cj4gKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7Cj4gKwlzdHJ1Y3QgZHJtX3ByaXZhdGVfc3Rh
dGUgKmJ3X3N0YXRlOwo+ICsKPiArCWJ3X3N0YXRlID0gZHJtX2F0b21pY19nZXRfcHJpdmF0ZV9v
Ympfc3RhdGUoJnN0YXRlLT5iYXNlLAo+ICsJCQkJCQkgICAgJmRldl9wcml2LT5id19vYmopOwo+
ICsJaWYgKElTX0VSUihid19zdGF0ZSkpCj4gKwkJcmV0dXJuIEVSUl9DQVNUKGJ3X3N0YXRlKTsK
PiArCj4gKwlyZXR1cm4gdG9faW50ZWxfYndfc3RhdGUoYndfc3RhdGUpOwo+ICt9Cj4gKwo+ICtp
bnQgaW50ZWxfYndfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwo+ICtp
bnQgaW50ZWxfYndfYXRvbWljX2NoZWNrKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRl
KTsKPiArdm9pZCBpbnRlbF9id19jcnRjX3VwZGF0ZShzdHJ1Y3QgaW50ZWxfYndfc3RhdGUgKmJ3
X3N0YXRlLAo+ICsJCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
KTsKPiArCj4gKyNlbmRpZiAvKiBfX0lOVEVMX0JXX0hfXyAqLwo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
bnRlbF9kaXNwbGF5LmMKPiBpbmRleCBkODFlYzgwZTM0ZjYuLmE5NTU4NDBiNzNjYiAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMKPiBAQCAtNTAsNiArNTAsNyBAQAo+ICAg
I2luY2x1ZGUgImludGVsX2FjcGkuaCIKPiAgICNpbmNsdWRlICJpbnRlbF9hdG9taWMuaCIKPiAg
ICNpbmNsdWRlICJpbnRlbF9hdG9taWNfcGxhbmUuaCIKPiArI2luY2x1ZGUgImludGVsX2J3Lmgi
Cj4gICAjaW5jbHVkZSAiaW50ZWxfY29sb3IuaCIKPiAgICNpbmNsdWRlICJpbnRlbF9jZGNsay5o
Igo+ICAgI2luY2x1ZGUgImludGVsX2NydC5oIgo+IEBAIC0yODYzLDYgKzI4NjQsNyBAQCBzdGF0
aWMgdm9pZCBpbnRlbF9wbGFuZV9kaXNhYmxlX25vYXRvbWljKHN0cnVjdCBpbnRlbF9jcnRjICpj
cnRjLAo+ICAgCj4gICAJaW50ZWxfc2V0X3BsYW5lX3Zpc2libGUoY3J0Y19zdGF0ZSwgcGxhbmVf
c3RhdGUsIGZhbHNlKTsKPiAgIAlmaXh1cF9hY3RpdmVfcGxhbmVzKGNydGNfc3RhdGUpOwo+ICsJ
Y3J0Y19zdGF0ZS0+ZGF0YV9yYXRlW3BsYW5lLT5pZF0gPSAwOwo+ICAgCj4gICAJaWYgKHBsYW5l
LT5pZCA9PSBQTEFORV9QUklNQVJZKQo+ICAgCQlpbnRlbF9wcmVfZGlzYWJsZV9wcmltYXJ5X25v
YXRvbWljKCZjcnRjLT5iYXNlKTsKPiBAQCAtNjU5MCw2ICs2NTkyLDggQEAgc3RhdGljIHZvaWQg
aW50ZWxfY3J0Y19kaXNhYmxlX25vYXRvbWljKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKPiAgIAlz
dHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcjsKPiAgIAlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50
ZWxfY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Yyk7Cj4gICAJc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2ID0gdG9faTkxNShjcnRjLT5kZXYpOwo+ICsJc3RydWN0IGludGVsX2J3X3N0
YXRlICpid19zdGF0ZSA9Cj4gKwkJdG9faW50ZWxfYndfc3RhdGUoZGV2X3ByaXYtPmJ3X29iai5z
dGF0ZSk7Cj4gICAJZW51bSBpbnRlbF9kaXNwbGF5X3Bvd2VyX2RvbWFpbiBkb21haW47Cj4gICAJ
c3RydWN0IGludGVsX3BsYW5lICpwbGFuZTsKPiAgIAl1NjQgZG9tYWluczsKPiBAQCAtNjY1Miw2
ICs2NjU2LDkgQEAgc3RhdGljIHZvaWQgaW50ZWxfY3J0Y19kaXNhYmxlX25vYXRvbWljKHN0cnVj
dCBkcm1fY3J0YyAqY3J0YywKPiAgIAlkZXZfcHJpdi0+YWN0aXZlX2NydGNzICY9IH4oMSA8PCBp
bnRlbF9jcnRjLT5waXBlKTsKPiAgIAlkZXZfcHJpdi0+bWluX2NkY2xrW2ludGVsX2NydGMtPnBp
cGVdID0gMDsKPiAgIAlkZXZfcHJpdi0+bWluX3ZvbHRhZ2VfbGV2ZWxbaW50ZWxfY3J0Yy0+cGlw
ZV0gPSAwOwo+ICsKPiArCWJ3X3N0YXRlLT5kYXRhX3JhdGVbaW50ZWxfY3J0Yy0+cGlwZV0gPSAw
Owo+ICsJYndfc3RhdGUtPm51bV9hY3RpdmVfcGxhbmVzW2ludGVsX2NydGMtPnBpcGVdID0gMDsK
PiAgIH0KPiAgIAo+ICAgLyoKPiBAQCAtMTExNzYsNiArMTExODMsNyBAQCBpbnQgaW50ZWxfcGxh
bmVfYXRvbWljX2NhbGNfY2hhbmdlcyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xk
X2NydGNfc3RhdAo+ICAgCWlmICghaXNfY3J0Y19lbmFibGVkKSB7Cj4gICAJCXBsYW5lX3N0YXRl
LT52aXNpYmxlID0gdmlzaWJsZSA9IGZhbHNlOwo+ICAgCQl0b19pbnRlbF9jcnRjX3N0YXRlKGNy
dGNfc3RhdGUpLT5hY3RpdmVfcGxhbmVzICY9IH5CSVQocGxhbmUtPmlkKTsKPiArCQl0b19pbnRl
bF9jcnRjX3N0YXRlKGNydGNfc3RhdGUpLT5kYXRhX3JhdGVbcGxhbmUtPmlkXSA9IDA7Cj4gICAJ
fQo+ICAgCj4gICAJaWYgKCF3YXNfdmlzaWJsZSAmJiAhdmlzaWJsZSkKPiBAQCAtMTMyOTYsNyAr
MTMzMDQsMTUgQEAgc3RhdGljIGludCBpbnRlbF9hdG9taWNfY2hlY2soc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwKPiAgIAkJcmV0dXJuIHJldDsKPiAgIAo+ICAgCWludGVsX2ZiY19jaG9vc2VfY3J0
YyhkZXZfcHJpdiwgaW50ZWxfc3RhdGUpOwo+IC0JcmV0dXJuIGNhbGNfd2F0ZXJtYXJrX2RhdGEo
aW50ZWxfc3RhdGUpOwo+ICsJcmV0ID0gY2FsY193YXRlcm1hcmtfZGF0YShpbnRlbF9zdGF0ZSk7
Cj4gKwlpZiAocmV0KQo+ICsJCXJldHVybiByZXQ7Cj4gKwo+ICsJcmV0ID0gaW50ZWxfYndfYXRv
bWljX2NoZWNrKGludGVsX3N0YXRlKTsKPiArCWlmIChyZXQpCj4gKwkJcmV0dXJuIHJldDsKPiAr
Cj4gKwlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+ICAgc3RhdGljIGludCBpbnRlbF9hdG9taWNfcHJl
cGFyZV9jb21taXQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiBAQCAtMTU2OTYsNiArMTU3MTIs
MTAgQEAgaW50IGludGVsX21vZGVzZXRfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQo+ICAg
Cj4gICAJZHJtX21vZGVfY29uZmlnX2luaXQoZGV2KTsKPiAgIAo+ICsJcmV0ID0gaW50ZWxfYndf
aW5pdChkZXZfcHJpdik7Cj4gKwlpZiAocmV0KQo+ICsJCXJldHVybiByZXQ7Cj4gKwo+ICAgCWRl
di0+bW9kZV9jb25maWcubWluX3dpZHRoID0gMDsKPiAgIAlkZXYtPm1vZGVfY29uZmlnLm1pbl9o
ZWlnaHQgPSAwOwo+ICAgCj4gQEAgLTE2MzE4LDggKzE2MzM4LDExIEBAIHN0YXRpYyB2b2lkIGlu
dGVsX21vZGVzZXRfcmVhZG91dF9od19zdGF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQo+ICAg
CWRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmY29ubl9pdGVyKTsKPiAgIAo+ICAgCWZvcl9l
YWNoX2ludGVsX2NydGMoZGV2LCBjcnRjKSB7Cj4gKwkJc3RydWN0IGludGVsX2J3X3N0YXRlICpi
d19zdGF0ZSA9Cj4gKwkJCXRvX2ludGVsX2J3X3N0YXRlKGRldl9wcml2LT5id19vYmouc3RhdGUp
Owo+ICAgCQlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSA9Cj4gICAJCQl0b19p
bnRlbF9jcnRjX3N0YXRlKGNydGMtPmJhc2Uuc3RhdGUpOwo+ICsJCXN0cnVjdCBpbnRlbF9wbGFu
ZSAqcGxhbmU7Cj4gICAJCWludCBtaW5fY2RjbGsgPSAwOwo+ICAgCj4gICAJCW1lbXNldCgmY3J0
Yy0+YmFzZS5tb2RlLCAwLCBzaXplb2YoY3J0Yy0+YmFzZS5tb2RlKSk7Cj4gQEAgLTE2MzU4LDYg
KzE2MzgxLDIxIEBAIHN0YXRpYyB2b2lkIGludGVsX21vZGVzZXRfcmVhZG91dF9od19zdGF0ZShz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2KQo+ICAgCQlkZXZfcHJpdi0+bWluX3ZvbHRhZ2VfbGV2ZWxb
Y3J0Yy0+cGlwZV0gPQo+ICAgCQkJY3J0Y19zdGF0ZS0+bWluX3ZvbHRhZ2VfbGV2ZWw7Cj4gICAK
PiArCQlmb3JfZWFjaF9pbnRlbF9wbGFuZV9vbl9jcnRjKCZkZXZfcHJpdi0+ZHJtLCBjcnRjLCBw
bGFuZSkgewo+ICsJCQljb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRl
ID0KPiArCQkJCXRvX2ludGVsX3BsYW5lX3N0YXRlKHBsYW5lLT5iYXNlLnN0YXRlKTsKPiArCj4g
KwkJCS8qCj4gKwkJCSAqIEZJWE1FIGRvbid0IGhhdmUgdGhlIGZiIHlldCwgc28gY2FuJ3QKPiAr
CQkJICogdXNlIGludGVsX3BsYW5lX2RhdGFfcmF0ZSgpIDooCj4gKwkJCSAqLwo+ICsJCQlpZiAo
cGxhbmVfc3RhdGUtPmJhc2UudmlzaWJsZSkKPiArCQkJCWNydGNfc3RhdGUtPmRhdGFfcmF0ZVtw
bGFuZS0+aWRdID0KPiArCQkJCQk0ICogY3J0Y19zdGF0ZS0+cGl4ZWxfcmF0ZTsKPiArCQl9Cj4g
Kwo+ICsJCWludGVsX2J3X2NydGNfdXBkYXRlKGJ3X3N0YXRlLCBjcnRjX3N0YXRlKTsKPiArCj4g
ICAJCWludGVsX3BpcGVfY29uZmlnX3Nhbml0eV9jaGVjayhkZXZfcHJpdiwgY3J0Y19zdGF0ZSk7
Cj4gICAJfQo+ICAgfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9k
cnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rydi5oCj4gaW5kZXggNDA0OWUwM2Qy
YzBkLi40N2Y1NTE2MDFhMDUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfZHJ2LmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcnYuaAo+IEBAIC04
ODUsNiArODg1LDggQEAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgewo+ICAgCj4gICAJc3RydWN0
IGludGVsX2NydGNfd21fc3RhdGUgd207Cj4gICAKPiArCXUzMiBkYXRhX3JhdGVbSTkxNV9NQVhf
UExBTkVTXTsKPiArCj4gICAJLyogR2FtbWEgbW9kZSBwcm9ncmFtbWVkIG9uIHRoZSBwaXBlICov
Cj4gICAJdTMyIGdhbW1hX21vZGU7Cj4gICAKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlz
dGluZm8vaW50ZWwtZ2Z4

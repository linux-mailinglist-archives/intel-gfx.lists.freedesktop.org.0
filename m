Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 70FC61FD0ED
	for <lists+intel-gfx@lfdr.de>; Wed, 17 Jun 2020 17:28:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 040D86E425;
	Wed, 17 Jun 2020 15:28:08 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from us-smtp-1.mimecast.com (us-smtp-delivery-1.mimecast.com
 [207.211.31.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AB5236E425
 for <intel-gfx@lists.freedesktop.org>; Wed, 17 Jun 2020 15:28:05 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1592407684;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=lhSUPYJGQa5KskvJ9T1z4T7yHeLH8K5o911LUOWGRKU=;
 b=M/aK+PYGuoZvHK1lsR7JpWCVlAIMZXsErvAKQJxCrc1Kxedym1puzUZHnEy1CIhJULjBMm
 IBSC+w00cpQPQcT/fkOPOhNq0HrBP8353XZXMz2xv4pKeMFaTQNmuLaIyc9oFbgRdSvmBT
 J/EYEvST6kU5r7q3P5YTMz9BX0mu3xs=
Received: from mail-qt1-f198.google.com (mail-qt1-f198.google.com
 [209.85.160.198]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-241-a2ducjvuNYSPDU2gexnNBw-1; Wed, 17 Jun 2020 11:28:01 -0400
X-MC-Unique: a2ducjvuNYSPDU2gexnNBw-1
Received: by mail-qt1-f198.google.com with SMTP id x6so2011789qts.3
 for <intel-gfx@lists.freedesktop.org>; Wed, 17 Jun 2020 08:28:00 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:message-id:subject:from:to:cc:date:in-reply-to
 :references:organization:user-agent:mime-version
 :content-transfer-encoding;
 bh=lhSUPYJGQa5KskvJ9T1z4T7yHeLH8K5o911LUOWGRKU=;
 b=o8ovpaQpnQ2+cnG5Hcu9TQO+zdOtOKyXNrPl8p9fTZDIwjuMM5o6Ga0ks/V06fJGVW
 MGrUaukL1y2ekmm2mcjVuumjea5noV4E/85iSqaqmInPqLncrwdMoxA0kGD2ReiHkLVT
 oYNuGOW2uF1sm+Ix8ZdZeJ3G+D0rdcaQUczgKs3i0IuxeCZ6RRoh4oRwJcX1jkoB4cAs
 ONpEoqrBUm7IgSn3ZHRCQGfOOgXwuG7udojDgP2cmHsLp65byseqtkWdqhRZFpYKew0O
 0ZDXgkP9cnsyivNsfoZIRnB8J9mXvvgWTYcQQz90Xwxzg8oK+D3NTt2ca9KJEIMdNqQF
 YxKA==
X-Gm-Message-State: AOAM533YLZ6noUEaLIbqAfgfEwwL/Jm2j2JAQoEgCz8hEs4ZsaHt/uBl
 83xx1n8k+0z3b7RF45wIyaRNp/SFN02zMRr/RMVHkf6EVdN0NX+nEdJ0pI2yzhYbvPRopt0u08A
 U8uYmOcw187dNFYXk9jyCeeDOi8g4
X-Received: by 2002:ac8:341a:: with SMTP id u26mr27073418qtb.36.1592407680519; 
 Wed, 17 Jun 2020 08:28:00 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJzU14VOV0EESxC3VoI4wxvu2CjrnDirIwtSeoeVxGfHYTHojJZPQm/q7U6VCqEBRpjIMUcjxA==
X-Received: by 2002:ac8:341a:: with SMTP id u26mr27073398qtb.36.1592407680272; 
 Wed, 17 Jun 2020 08:28:00 -0700 (PDT)
Received: from Ruby.lyude.net (static-173-76-190-23.bstnma.ftas.verizon.net.
 [173.76.190.23])
 by smtp.gmail.com with ESMTPSA id m7sm193123qti.6.2020.06.17.08.27.59
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 17 Jun 2020 08:27:59 -0700 (PDT)
Message-ID: <656eecf36aa1200fd3c994a5c5dd2678c5cf8564.camel@redhat.com>
From: Lyude Paul <lyude@redhat.com>
To: Imre Deak <imre.deak@intel.com>, intel-gfx@lists.freedesktop.org
Date: Wed, 17 Jun 2020 11:27:58 -0400
In-Reply-To: <20200616211146.23027-3-imre.deak@intel.com>
References: <20200616141855.746-6-imre.deak@intel.com>
 <20200616211146.23027-3-imre.deak@intel.com>
Organization: Red Hat
User-Agent: Evolution 3.36.3 (3.36.3-1.fc32)
MIME-Version: 1.0
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Subject: Re: [Intel-gfx] [PATCH v2 6/6] drm/i915/dp_mst: Ensure the DPCD ACT
 sent flag is cleared before waiting for it
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UmV2aWV3ZWQtYnk6IEx5dWRlIFBhdWwgPGx5dWRlQHJlZGhhdC5jb20+CgpUaGFua3MgZm9yIGFs
bCB0aGUgc3VidGxlIGZpeGVzIGZvciBicm9rZW4gTVNUIGRpc3BsYXlzLCB0aGVzZSBhcmUgYWx3
YXlzIG15CmZhdm9yaXRlIHRvIGZpbmQgOikKCk9uIFdlZCwgMjAyMC0wNi0xNyBhdCAwMDoxMSAr
MDMwMCwgSW1yZSBEZWFrIHdyb3RlOgo+IEF0bSwgd2UgY2xlYXIgdGhlIEFDVCBzZW50IGZsYWcg
aW4gdGhlIHNpbmsncyBEUENEIGJlZm9yZSB1cGRhdGluZyB0aGUKPiBzaW5rJ3MgcGF5bG9hZCB0
YWJsZSwgYWxvbmcgY2xlYXJpbmcgdGhlIHBheWxvYWQgdGFibGUgdXBkYXRlZCBmbGFnLgo+IFRo
ZSBzaW5rIGlzIHN1cHBvc2VkIHRvIHNldCB0aGlzIGZsYWcgb25jZSBpdCBkZXRlY3RzIHRoYXQg
dGhlIHNvdXJjZQo+IGhhcyBjb21wbGV0ZWQgdGhlIEFDVCBzZXF1ZW5jZSAoYWZ0ZXIgZGV0ZWN0
aW5nIHRoZSA0IHJlcXVpcmVkIEFDVCBNVFBICj4gc3ltYm9scyBzZW50IGJ5IHRoZSBzb3VyY2Up
LiBBcyBvcHBvc2VkIHRvIHRoaXMgMiBERUxMIG1vbml0b3JzIEkgaGF2ZQo+IHNldCB0aGUgZmxh
ZyBhbHJlYWR5IGFsb25nIHRoZSBwYXlsb2FkIHRhYmxlIHVwZGF0ZWQgZmxhZywgd2hpY2ggaXMg
bm90Cj4gcXVpdGUgY29ycmVjdC4KPiAKPiBUbyBiZSBzdXJlIHRoYXQgdGhlIHNpbmsgaGFzIGRl
dGVjdGVkIHRoZSBBQ1QgTVRQSCBzeW1ib2xzIGJlZm9yZQo+IGNvbnRpbnVpbmcgZW5hYmxpbmcg
dGhlIGVuY29kZXIsIGNsZWFyIHRoZSBBQ1Qgc2VudCBmbGFnIGJlZm9yZSBlbmFibGluZwo+IG9y
IGRpc2FibGluZyB0aGUgdHJhbnNjb2RlciBWQyBwYXlsb2FkIGFsbG9jYXRpb24gKHdoaWNoIGlz
IHdoYXQgc3RhcnRzCj4gdGhlIEFDVCBzZXF1ZW5jZSkuCj4gCj4gdjIgKFZpbGxlKToKPiAtIFVz
ZSB0aGUgY29ycmVjdCBiaXQgdG8gY2xlYXIgdGhlIGZsYWdzLgo+IC0gQWRkIGNvZGUgY29tbWVu
dCBleHBsYWluaW5nIHRoZSBjbGVhcmluZyBzZW1hbnRpY3Mgb2YgdGhlIEFDVCBoYW5kbGVkCj4g
ICBmbGFnLgo+IAo+IENjOiBMeXVkZSBQYXVsIDxseXVkZUByZWRoYXQuY29tPgo+IENjOiBWaWxs
ZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgo+IENjOiBkcmktZGV2
ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gU2lnbmVkLW9mZi1ieTogSW1yZSBEZWFrIDxpbXJl
LmRlYWtAaW50ZWwuY29tPgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vZHJtX2RwX21zdF90b3Bv
bG9neS5jICAgICAgIHwgMzggKysrKysrKysrKysrKysrKysrKy0tCj4gIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMgfCAgMiArKwo+ICBpbmNsdWRlL2RybS9kcm1f
ZHBfbXN0X2hlbHBlci5oICAgICAgICAgICAgIHwgIDIgKysKPiAgMyBmaWxlcyBjaGFuZ2VkLCA0
MCBpbnNlcnRpb25zKCspLCAyIGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vZHJtX2RwX21zdF90b3BvbG9neS5jCj4gYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2Rw
X21zdF90b3BvbG9neS5jCj4gaW5kZXggYjJmNWE4NGI0Y2ZiLi4xZjVkMTQxMjhjMWEgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9kcF9tc3RfdG9wb2xvZ3kuYwo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9kcm1fZHBfbXN0X3RvcG9sb2d5LmMKPiBAQCAtNDM3Nyw2ICs0Mzc3LDQx
IEBAIHZvaWQgZHJtX2RwX21zdF9kZWFsbG9jYXRlX3ZjcGkoc3RydWN0Cj4gZHJtX2RwX21zdF90
b3BvbG9neV9tZ3IgKm1nciwKPiAgfQo+ICBFWFBPUlRfU1lNQk9MKGRybV9kcF9tc3RfZGVhbGxv
Y2F0ZV92Y3BpKTsKPiAgCj4gKy8qKgo+ICsgKiBkcm1fZHBfY2xlYXJfcGF5bG9hZF9zdGF0dXMo
KSAtIENsZWFycyB0aGUgcGF5bG9hZCB0YWJsZSBzdGF0dXMgZmxhZ3MKPiArICogQG1ncjogbWFu
YWdlciB0byB1c2UKPiArICoKPiArICogQ2xlYXJzIHRoZSBwYXlsb2FkIHRhYmxlIEFDVCBoYW5k
bGVkIGFuZCB0YWJsZSB1cGRhdGVkIGZsYWdzIGluIHRoZSBNU1QKPiBodWIncwo+ICsgKiBEUENE
LiBUaGlzIGZ1bmN0aW9uIG11c3QgYmUgY2FsbGVkIGJlZm9yZSB1cGRhdGluZyB0aGUgcGF5bG9h
ZCB0YWJsZSBvcgo+ICsgKiBzdGFydGluZyB0aGUgQUNUIHNlcXVlbmNlIGFuZCB3YWl0aW5nIGZv
ciB0aGUgY29ycmVzcG9uZGluZyBmbGFncyB0byBnZXQKPiArICogc2V0IGJ5IHRoZSBodWIuCj4g
KyAqCj4gKyAqIFJldHVybnM6Cj4gKyAqIDAgaWYgdGhlIGZsYWdzIGdvdCBjbGVhcmVkIHN1Y2Nl
c3NmdWxseSwgb3RoZXJ3aXNlIGEgbmVnYXRpdmUgZXJyb3IKPiBjb2RlLgo+ICsgKi8KPiAraW50
IGRybV9kcF9jbGVhcl9wYXlsb2FkX3N0YXR1cyhzdHJ1Y3QgZHJtX2RwX21zdF90b3BvbG9neV9t
Z3IgKm1ncikKPiArewo+ICsJaW50IHJldDsKPiArCj4gKwkvKgo+ICsJICogTm90ZSB0aGF0IHRo
ZSBmb2xsb3dpbmcgaXMgYmFzZWQgb24gdGhlIERQIFN0YW5kYXJkIHN0YXRpbmcgdGhhdAo+ICsJ
ICogd3JpdGluZyB0aGUgRFBfUEFZTE9BRF9UQUJMRV9VUERBVEVEIGJpdCBhbG9uZSB3aWxsIGNs
ZWFyIGJvdGggdGhlCj4gKwkgKiBEUF9QQVlMT0FEX1RBQkxFX1VQREFURUQgYW5kIHRoZSBEUF9Q
QVlMT0FEX0FDVF9IQU5ETEVEIGZsYWdzLiBUaGlzCj4gKwkgKiBzZWVtcyB0byBiZSBhbHNvIHRo
ZSBvbmx5IHdheSB0byBjbGVhciBEUF9QQVlMT0FEX0FDVF9IQU5ETEVELgo+ICsJICovCj4gKwly
ZXQgPSBkcm1fZHBfZHBjZF93cml0ZWIobWdyLT5hdXgsIERQX1BBWUxPQURfVEFCTEVfVVBEQVRF
X1NUQVRVUywKPiArCQkJCSBEUF9QQVlMT0FEX1RBQkxFX1VQREFURUQpOwo+ICsJaWYgKHJldCA8
IDApIHsKPiArCQlEUk1fREVCVUdfRFJJVkVSKCJDYW4ndCBjbGVhciB0aGUgQUNUIGhhbmRsZWQv
dGFibGUgdXBkYXRlZAo+IGZsYWdzICglZClcbiIsCj4gKwkJCQkgcmV0KTsKPiArCQlyZXR1cm4g
cmV0Owo+ICsJfQo+ICsJV0FSTl9PTihyZXQgIT0gMSk7Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30K
PiArRVhQT1JUX1NZTUJPTChkcm1fZHBfY2xlYXJfcGF5bG9hZF9zdGF0dXMpOwo+ICsKPiAgc3Rh
dGljIGludCBkcm1fZHBfZHBjZF93cml0ZV9wYXlsb2FkKHN0cnVjdCBkcm1fZHBfbXN0X3RvcG9s
b2d5X21nciAqbWdyLAo+ICAJCQkJICAgICBpbnQgaWQsIHN0cnVjdCBkcm1fZHBfcGF5bG9hZCAq
cGF5bG9hZCkKPiAgewo+IEBAIC00Mzg0LDggKzQ0MTksNyBAQCBzdGF0aWMgaW50IGRybV9kcF9k
cGNkX3dyaXRlX3BheWxvYWQoc3RydWN0Cj4gZHJtX2RwX21zdF90b3BvbG9neV9tZ3IgKm1nciwK
PiAgCWludCByZXQ7Cj4gIAlpbnQgcmV0cmllcyA9IDA7Cj4gIAo+IC0JZHJtX2RwX2RwY2Rfd3Jp
dGViKG1nci0+YXV4LCBEUF9QQVlMT0FEX1RBQkxFX1VQREFURV9TVEFUVVMsCj4gLQkJCSAgIERQ
X1BBWUxPQURfVEFCTEVfVVBEQVRFRCk7Cj4gKwlkcm1fZHBfY2xlYXJfcGF5bG9hZF9zdGF0dXMo
bWdyKTsKPiAgCj4gIAlwYXlsb2FkX2FsbG9jWzBdID0gaWQ7Cj4gIAlwYXlsb2FkX2FsbG9jWzFd
ID0gcGF5bG9hZC0+c3RhcnRfc2xvdDsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kcF9tc3QuYwo+IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kcF9tc3QuYwo+IGluZGV4IDkzMDhiNTkyMDc4MC4uM2M0YjBmYjEwZDhiIDEwMDY0
NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHBfbXN0LmMKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwX21zdC5jCj4gQEAgLTMy
Myw2ICszMjMsOCBAQCBzdGF0aWMgdm9pZCBjbGVhcl9hY3Rfc2VudChzdHJ1Y3QgaW50ZWxfZHAg
KmludGVsX2RwKQo+ICAKPiAgCWludGVsX2RlX3dyaXRlKGk5MTUsIGludGVsX2RwLT5yZWdzLmRw
X3RwX3N0YXR1cywKPiAgCQkgICAgICAgRFBfVFBfU1RBVFVTX0FDVF9TRU5UKTsKPiArCj4gKwlk
cm1fZHBfY2xlYXJfcGF5bG9hZF9zdGF0dXMoJmludGVsX2RwLT5tc3RfbWdyKTsKPiAgfQo+ICAK
PiAgc3RhdGljIHZvaWQgd2FpdF9mb3JfYWN0X3NlbnQoc3RydWN0IGludGVsX2RwICppbnRlbF9k
cCkKPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2RwX21zdF9oZWxwZXIuaAo+IGIvaW5j
bHVkZS9kcm0vZHJtX2RwX21zdF9oZWxwZXIuaAo+IGluZGV4IDhiOWViNGRiMzM4MS4uMmZhY2I4
NzYyNGJmIDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvZHJtL2RybV9kcF9tc3RfaGVscGVyLmgKPiAr
KysgYi9pbmNsdWRlL2RybS9kcm1fZHBfbXN0X2hlbHBlci5oCj4gQEAgLTc2Myw2ICs3NjMsOCBA
QCBpbnQgZHJtX2RwX2ZpbmRfdmNwaV9zbG90cyhzdHJ1Y3QKPiBkcm1fZHBfbXN0X3RvcG9sb2d5
X21nciAqbWdyLAo+ICAJCQkgICBpbnQgcGJuKTsKPiAgCj4gIAo+ICtpbnQgZHJtX2RwX2NsZWFy
X3BheWxvYWRfc3RhdHVzKHN0cnVjdCBkcm1fZHBfbXN0X3RvcG9sb2d5X21nciAqbWdyKTsKPiAr
Cj4gIGludCBkcm1fZHBfdXBkYXRlX3BheWxvYWRfcGFydDEoc3RydWN0IGRybV9kcF9tc3RfdG9w
b2xvZ3lfbWdyICptZ3IpOwo+ICAKPiAgCi0tIApDaGVlcnMsCglMeXVkZSBQYXVsIChzaGUvaGVy
KQoJQXNzb2NpYXRlIFNvZnR3YXJlIEVuZ2luZWVyIGF0IFJlZCBIYXQKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QK
SW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

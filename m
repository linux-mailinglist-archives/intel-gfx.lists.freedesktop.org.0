Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6AF65114F8F
	for <lists+intel-gfx@lfdr.de>; Fri,  6 Dec 2019 12:02:21 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 65F746F9C9;
	Fri,  6 Dec 2019 11:02:19 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 085936F9C9
 for <intel-gfx@lists.freedesktop.org>; Fri,  6 Dec 2019 11:02:18 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 06 Dec 2019 03:02:17 -0800
X-IronPort-AV: E=Sophos;i="5.69,284,1571727600"; d="scan'208";a="206088759"
Received: from cpreilly-mobl1.ger.corp.intel.com (HELO [10.251.80.64])
 ([10.251.80.64])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 06 Dec 2019 03:02:16 -0800
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191205215842.862750-1-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <c932adf3-aeba-73d4-6df3-b77a0faddf62@linux.intel.com>
Date: Fri, 6 Dec 2019 11:02:15 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191205215842.862750-1-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH] drm/i915/gt: Acquire a GT wakeref for the
 breadcrumb interrupt
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDA1LzEyLzIwMTkgMjE6NTgsIENocmlzIFdpbHNvbiB3cm90ZToKPiBUYWtlIGEgd2FrZXJl
ZiBvbiB0aGUgaW50ZWxfZ3Qgc3BlY2lmaWNhbGx5IGZvciB0aGUgZW5hYmxlZCBicmVhZGNydW1i
Cj4gaW50ZXJydXB0IHNvIHRoYXQgd2UgY2FuIHNhZmVseSBwcm9jZXNzIHRoZSBtbWlvLiBJZiB0
aGUgaW50ZWxfZ3QgaXMKPiBhbHJlYWR5IGFzbGVlcCBieSB0aGUgdGltZSB3ZSB0cnkgYW5kIHNl
dHVwIHRoZSBicmVhZGNydW1iIGludGVycnVwdCwgYnkKPiBhIHByb2Nlc3Mgb2YgZWxpbWluYXRp
b24gd2Uga25vdyB0aGUgcmVxdWVzdCBtdXN0IGhhdmUgYmVlbiBjb21wbGV0ZWQKPiBhbmQgd2Ug
Y2FuIHNraXAgaXRzIGVuYWJsZW1lbnQhCj4gCj4gPDQ+IFsxNTE4LjM1MDAwNV0gVW5jbGFpbWVk
IHdyaXRlIHRvIHJlZ2lzdGVyIDB4MjIwYTgKPiA8ND4gWzE1MTguMzUwMzIzXSBXQVJOSU5HOiBD
UFU6IDIgUElEOiAzNjg1IGF0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5jOjEx
NjMgX191bmNsYWltZWRfcmVnX2RlYnVnKzB4NDAvMHg1MCBbaTkxNV0KPiA8ND4gWzE1MTguMzUw
MzkzXSBNb2R1bGVzIGxpbmtlZCBpbjogdmdlbSBzbmRfaGRhX2NvZGVjX2hkbWkgeDg2X3BrZ190
ZW1wX3RoZXJtYWwgaTkxNSBjb3JldGVtcCBjcmN0MTBkaWZfcGNsbXVsIGNyYzMyX3BjbG11bCBn
aGFzaF9jbG11bG5pX2ludGVsIHNuZF9oZGFfaW50ZWwgc25kX2ludGVsX2RzcGNmZyBzbmRfaGRh
X2NvZGVjIHNuZF9od2RlcCBzbmRfaGRhX2NvcmUgYnR1c2IgY2RjX2V0aGVyIGJ0cnRsIHVzYm5l
dCBidGJjbSBidGludGVsIHI4MTUyIHNuZF9wY20gbWlpIGJsdWV0b290aCBlY2RoX2dlbmVyaWMg
ZWNjIGkyY19oaWQgcGluY3RybF9zdW5yaXNlcG9pbnQgcGluY3RybF9pbnRlbCBpbnRlbF9scHNz
X3BjaSBwcmltZV9udW1iZXJzIFtsYXN0IHVubG9hZGVkOiB2Z2VtXQo+IDw0PiBbMTUxOC4zNTA2
NDZdIENQVTogMiBQSUQ6IDM2ODUgQ29tbTogZ2VtX2V4ZWNfcGFyc2VfIFRhaW50ZWQ6IEcgICAg
IFUgICAgICAgICAgICA1LjQuMC1yYzgtQ0ktQ0lfRFJNXzc0OTArICMxCj4gPDQ+IFsxNTE4LjM1
MDcwOF0gSGFyZHdhcmUgbmFtZTogR29vZ2xlIENhcm9saW5lL0Nhcm9saW5lLCBCSU9TIE1yQ2hy
b21lYm94IDA4LzI3LzIwMTgKPiA8ND4gWzE1MTguMzUwOTQ2XSBSSVA6IDAwMTA6X191bmNsYWlt
ZWRfcmVnX2RlYnVnKzB4NDAvMHg1MCBbaTkxNV0KPiA8ND4gWzE1MTguMzUwOTkyXSBDb2RlOiA3
NCAwNSA1YiA1ZCA0MSA1YyBjMyA0NSA4NCBlNCA0OCBjNyBjMCA5NSA4ZCA0NyBhMCA0OCBjNyBj
NiA4YiA4ZCA0NyBhMCA0OCAwZiA0NCBmMCA4OSBlYSA0OCBjNyBjNyA5ZSA4ZCA0NyBhMCBlOCA0
MCA0NSBlMyBlMCA8MGY+IDBiIDgzIDJkIDI3IDRmIDJhIDAwIDAxIDViIDVkIDQxIDVjIGMzIDY2
IDkwIDQxIDU1IDQxIDU0IDU1IDUzCj4gPDQ+IFsxNTE4LjM1MTEwMF0gUlNQOiAwMDE4OmZmZmZj
OTAwMDA3ZjM5YzggRUZMQUdTOiAwMDAxMDA4Ngo+IDw0PiBbMTUxOC4zNTExNDBdIFJBWDogMDAw
MDAwMDAwMDAwMDAwMCBSQlg6IDAwMDAwMDAwMDAwMDAwMDAgUkNYOiAwMDAwMDAwMDAwMDAwMDA2
Cj4gPDQ+IFsxNTE4LjM1MTIwMl0gUkRYOiAwMDAwMDAwMDgwMDAwMDA2IFJTSTogMDAwMDAwMDAw
MDAwMDAwMCBSREk6IDAwMDAwMDAwZmZmZmZmZmYKPiA8ND4gWzE1MTguMzUxMjQ5XSBSQlA6IDAw
MDAwMDAwMDAwMjIwYTggUjA4OiAwMDAwMDAwMDAwMDAwMDAwIFIwOTogMDAwMDAwMDAwMDAwMDAw
MAo+IDw0PiBbMTUxOC4zNTEyOTZdIFIxMDogZmZmZmM5MDAwMDdmMzk5MCBSMTE6IGZmZmZjOTAw
MDA3ZjM4NjggUjEyOiAwMDAwMDAwMDAwMDAwMDAwCj4gPDQ+IFsxNTE4LjM1MTM0Ml0gUjEzOiAw
MDAwMDAwMGZlZmVmZmZmIFIxNDogMDAwMDAwMDAwMDAwMDA5MiBSMTU6IGZmZmY4ODgxNTVmZWEw
MDAKPiA8ND4gWzE1MTguMzUxMzkxXSBGUzogIDAwMDA3ZmMyNTVhYmZlNDAoMDAwMCkgR1M6ZmZm
Zjg4ODE3YWIwMDAwMCgwMDAwKSBrbmxHUzowMDAwMDAwMDAwMDAwMDAwCj4gPDQ+IFsxNTE4LjM1
MTQ0NV0gQ1M6ICAwMDEwIERTOiAwMDAwIEVTOiAwMDAwIENSMDogMDAwMDAwMDA4MDA1MDAzMwo+
IDw0PiBbMTUxOC4zNTE0ODVdIENSMjogMDAwMDdmYzI1NTQ4ODJkMCBDUjM6IDAwMDAwMDAxNjhj
YTIwMDUgQ1I0OiAwMDAwMDAwMDAwMzYwNmUwCj4gPDQ+IFsxNTE4LjM1MTUyOV0gQ2FsbCBUcmFj
ZToKPiA8ND4gWzE1MTguMzUxNzQ2XSAgZnd0YWJsZV93cml0ZTMyKzB4MTE0LzB4MWQwIFtpOTE1
XQo+IDw0PiBbMTUxOC4zNTE3OTVdICA/IHN5bmNfZmlsZV9hbGxvYysweDgwLzB4ODAKPiA8ND4g
WzE1MTguMzUyMDM5XSAgZ2VuOF9sb2dpY2FsX3JpbmdfZW5hYmxlX2lycSsweDMwLzB4NTAgW2k5
MTVdCj4gPDQ+IFsxNTE4LjM1MjI5NV0gIGlycV9lbmFibGUucGFydC4xMCsweDIzLzB4NDAgW2k5
MTVdCj4gPDQ+IFsxNTE4LjM1MjUyM10gIGk5MTVfcmVxdWVzdF9lbmFibGVfYnJlYWRjcnVtYisw
eGI1LzB4MzMwIFtpOTE1XQo+IDw0PiBbMTUxOC4zNTI1NzVdICA/IHN5bmNfZmlsZV9hbGxvYysw
eDgwLzB4ODAKPiA8ND4gWzE1MTguMzUyNjEyXSAgX19kbWFfZmVuY2VfZW5hYmxlX3NpZ25hbGlu
ZysweDYwLzB4MTYwCj4gPDQ+IFsxNTE4LjM1MjY1M10gID8gc3luY19maWxlX2FsbG9jKzB4ODAv
MHg4MAo+IDw0PiBbMTUxOC4zNTI2ODVdICBkbWFfZmVuY2VfYWRkX2NhbGxiYWNrKzB4NDQvMHhk
MAo+IDw0PiBbMTUxOC4zNTI3MjZdICBzeW5jX2ZpbGVfcG9sbCsweDk1LzB4YzAKPiA8ND4gWzE1
MTguMzUyNzY3XSAgZG9fc3lzX3BvbGwrMHgyNGQvMHg1NzAKPiAKPiBTaWduZWQtb2ZmLWJ5OiBD
aHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KPiAtLS0KPiAgIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmMgfCAyMiArKysrKysrKysrKysrKyst
LS0tLS0KPiAgIDEgZmlsZSBjaGFuZ2VkLCAxNiBpbnNlcnRpb25zKCspLCA2IGRlbGV0aW9ucygt
KQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNy
dW1icy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuYwo+IGlu
ZGV4IDU1MzE3MDgxZDQ4Yi4uOGE5ZmFjZjRmM2I2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5jCj4gQEAgLTI4LDYgKzI4LDcgQEAKPiAgIAo+ICAg
I2luY2x1ZGUgImk5MTVfZHJ2LmgiCj4gICAjaW5jbHVkZSAiaTkxNV90cmFjZS5oIgo+ICsjaW5j
bHVkZSAiaW50ZWxfZ3RfcG0uaCIKPiAgIAo+ICAgc3RhdGljIHZvaWQgaXJxX2VuYWJsZShzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCj4gICB7Cj4gQEAgLTUzLDE1ICs1NCwxNyBAQCBz
dGF0aWMgdm9pZCBpcnFfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCj4g
ICAKPiAgIHN0YXRpYyB2b2lkIF9faW50ZWxfYnJlYWRjcnVtYnNfZGlzYXJtX2lycShzdHJ1Y3Qg
aW50ZWxfYnJlYWRjcnVtYnMgKmIpCj4gICB7Cj4gKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUgPQo+ICsJCWNvbnRhaW5lcl9vZihiLCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzLCBicmVh
ZGNydW1icyk7Cj4gKwo+ICAgCWxvY2tkZXBfYXNzZXJ0X2hlbGQoJmItPmlycV9sb2NrKTsKPiAg
IAo+ICAgCUdFTV9CVUdfT04oIWItPmlycV9lbmFibGVkKTsKPiAgIAlpZiAoIS0tYi0+aXJxX2Vu
YWJsZWQpCj4gLQkJaXJxX2Rpc2FibGUoY29udGFpbmVyX29mKGIsCj4gLQkJCQkJIHN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MsCj4gLQkJCQkJIGJyZWFkY3J1bWJzKSk7Cj4gKwkJaXJxX2Rpc2FibGUo
ZW5naW5lKTsKPiAgIAo+ICAgCWItPmlycV9hcm1lZCA9IGZhbHNlOwo+ICsJaW50ZWxfZ3RfcG1f
cHV0X2FzeW5jKGVuZ2luZS0+Z3QpOwo+ICAgfQo+ICAgCj4gICB2b2lkIGludGVsX2VuZ2luZV9k
aXNhcm1fYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQo+IEBAIC0y
MDcsMTQgKzIxMCwxNyBAQCBzdGF0aWMgdm9pZCBzaWduYWxfaXJxX3dvcmsoc3RydWN0IGlycV93
b3JrICp3b3JrKQo+ICAgCWludGVsX2VuZ2luZV9icmVhZGNydW1ic19pcnEoZW5naW5lKTsKPiAg
IH0KPiAgIAo+IC1zdGF0aWMgdm9pZCBfX2ludGVsX2JyZWFkY3J1bWJzX2FybV9pcnEoc3RydWN0
IGludGVsX2JyZWFkY3J1bWJzICpiKQo+ICtzdGF0aWMgYm9vbCBfX2ludGVsX2JyZWFkY3J1bWJz
X2FybV9pcnEoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiKQo+ICAgewo+ICAgCXN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9Cj4gICAJCWNvbnRhaW5lcl9vZihiLCBzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzLCBicmVhZGNydW1icyk7Cj4gICAKPiAgIAlsb2NrZGVwX2Fzc2VydF9oZWxk
KCZiLT5pcnFfbG9jayk7Cj4gICAJaWYgKGItPmlycV9hcm1lZCkKPiAtCQlyZXR1cm47Cj4gKwkJ
cmV0dXJuIHRydWU7Cj4gKwo+ICsJaWYgKCFpbnRlbF9ndF9wbV9nZXRfaWZfYXdha2UoZW5naW5l
LT5ndCkpCj4gKwkJcmV0dXJuIGZhbHNlOwo+ICAgCj4gICAJLyoKPiAgIAkgKiBUaGUgYnJlYWRj
cnVtYiBpcnEgd2lsbCBiZSBkaXNhcm1lZCBvbiB0aGUgaW50ZXJydXB0IGFmdGVyIHRoZQo+IEBA
IC0yMzQsNiArMjQwLDggQEAgc3RhdGljIHZvaWQgX19pbnRlbF9icmVhZGNydW1ic19hcm1faXJx
KHN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYikKPiAgIAo+ICAgCWlmICghYi0+aXJxX2VuYWJs
ZWQrKykKPiAgIAkJaXJxX2VuYWJsZShlbmdpbmUpOwo+ICsKPiArCXJldHVybiB0cnVlOwo+ICAg
fQo+ICAgCj4gICB2b2lkIGludGVsX2VuZ2luZV9pbml0X2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSkKPiBAQCAtMjc3LDcgKzI4NSw4IEBAIGJvb2wgaTkxNV9yZXF1
ZXN0X2VuYWJsZV9icmVhZGNydW1iKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQo+ICAgCQlzcGlu
X2xvY2soJmItPmlycV9sb2NrKTsKPiAgIAkJR0VNX0JVR19PTih0ZXN0X2JpdChJOTE1X0ZFTkNF
X0ZMQUdfU0lHTkFMLCAmcnEtPmZlbmNlLmZsYWdzKSk7Cj4gICAKPiAtCQlfX2ludGVsX2JyZWFk
Y3J1bWJzX2FybV9pcnEoYik7Cj4gKwkJaWYgKCFfX2ludGVsX2JyZWFkY3J1bWJzX2FybV9pcnEo
YikpCj4gKwkJCWdvdG8gdW5sb2NrOwo+ICAgCj4gICAJCS8qCj4gICAJCSAqIFdlIGtlZXAgdGhl
IHNlcW5vIGluIHJldGlyZW1lbnQgb3JkZXIsIHNvIHdlIGNhbiBicmVhawo+IEBAIC0zMDYsNiAr
MzE1LDcgQEAgYm9vbCBpOTE1X3JlcXVlc3RfZW5hYmxlX2JyZWFkY3J1bWIoc3RydWN0IGk5MTVf
cmVxdWVzdCAqcnEpCj4gICAJCUdFTV9CVUdfT04oIWNoZWNrX3NpZ25hbF9vcmRlcihjZSwgcnEp
KTsKPiAgIAo+ICAgCQlzZXRfYml0KEk5MTVfRkVOQ0VfRkxBR19TSUdOQUwsICZycS0+ZmVuY2Uu
ZmxhZ3MpOwo+ICt1bmxvY2s6Cj4gICAJCXNwaW5fdW5sb2NrKCZiLT5pcnFfbG9jayk7Cj4gICAJ
fQo+ICAgCj4gCgpBbnkgc3BlY2lhbCByZWFzb24gbm90IHRvIGRvIFBNIG1hbmFnZW1lbnQgb24g
dGhlIGVuZ2luZSByYXRoZXIgdGhhbiBHVD8KClJlZ2FyZHMsCgpUdnJ0a28KX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlz
dApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

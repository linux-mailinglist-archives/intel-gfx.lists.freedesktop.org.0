Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1C750D19A1
	for <lists+intel-gfx@lfdr.de>; Wed,  9 Oct 2019 22:37:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 64D2B6EA43;
	Wed,  9 Oct 2019 20:37:07 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EDF396E89B
 for <intel-gfx@lists.freedesktop.org>; Wed,  9 Oct 2019 20:36:54 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18782946-1500050 
 for multiple; Wed, 09 Oct 2019 21:36:45 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  9 Oct 2019 21:36:39 +0100
Message-Id: <20191009203641.15477-9-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191009203641.15477-1-chris@chris-wilson.co.uk>
References: <20191009203641.15477-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 09/11] drm/i915/perf: Allow dynamic
 reconfiguration of the OA stream
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogTGlvbmVsIExhbmR3ZXJsaW4gPGxpb25lbC5nLmxhbmR3ZXJsaW5AaW50ZWwuY29tPgoK
SW50cm9kdWNlIGEgbmV3IHBlcmZfaW9jdGwgY29tbWFuZCB0byBjaGFuZ2UgdGhlIE9BIGNvbmZp
Z3VyYXRpb24gb2YgdGhlCmFjdGl2ZSBzdHJlYW0uIFRoaXMgYWxsb3dzIHRoZSBPQSBzdHJlYW0g
dG8gYmUgcmVjb25maWd1cmVkIGJldHdlZW4KYmF0Y2ggYnVmZmVycywgZ2l2aW5nIGdyZWF0ZXIg
ZmxleGliaWxpdHkgaW4gc2FtcGxpbmcuIFdlIGluamVjdCBhCnJlcXVlc3QgaW50byB0aGUgT0Eg
Y29udGV4dCB0byByZWNvbmZpZ3VyZSB0aGUgc3RyZWFtIGFzeW5jaHJvbm91c2x5IG9uCnRoZSBH
UFUgaW4gYmV0d2VlbiBhbmQgb3JkZXJlZCB3aXRoIGV4ZWNidWZmZXIgY2FsbHMuCgpTaWduZWQt
b2ZmLWJ5OiBMaW9uZWwgTGFuZHdlcmxpbiA8bGlvbmVsLmcubGFuZHdlcmxpbkBpbnRlbC5jb20+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMgfCAzNCArKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrLQogaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oICAgICAgfCAx
MCArKysrKysrKysrCiAyIGZpbGVzIGNoYW5nZWQsIDQzIGluc2VydGlvbnMoKyksIDEgZGVsZXRp
b24oLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCmluZGV4IDlmMmQ5MmI5ZDIyZC4uOTNiNzU4
OGU0OTFjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwpAQCAtMjg0Niw2ICsyODQ2LDI4IEBA
IHN0YXRpYyB2b2lkIGk5MTVfcGVyZl9kaXNhYmxlX2xvY2tlZChzdHJ1Y3QgaTkxNV9wZXJmX3N0
cmVhbSAqc3RyZWFtKQogCWludGVsX3J1bnRpbWVfcG1fcHV0KHN0cmVhbS0+Z3QtPnVuY29yZS0+
cnBtLCB3YWtlcmVmKTsKIH0KIAorc3RhdGljIGludCBpOTE1X3BlcmZfY29uZmlnX2xvY2tlZChz
dHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAorCQkJCSAgIHVuc2lnbmVkIGxvbmcgbWV0
cmljc19zZXQpCit7CisJc3RydWN0IGk5MTVfb2FfY29uZmlnICpjb25maWc7CisJaW50IGVyciA9
IDA7CisKKwljb25maWcgPSBpOTE1X3BlcmZfZ2V0X29hX2NvbmZpZyhzdHJlYW0tPnBlcmYsIG1l
dHJpY3Nfc2V0KTsKKwlpZiAoIWNvbmZpZykKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAoY29u
ZmlnICE9IHN0cmVhbS0+b2FfY29uZmlnKSB7CisJCWlmIChzdHJlYW0tPnBpbm5lZF9jdHgpCisJ
CQllcnIgPSBlbWl0X29hX2NvbmZpZyhzdHJlYW0sIHN0cmVhbS0+cGlubmVkX2N0eCk7CisJCWlm
IChlcnIgPT0gMCkKKwkJCWNvbmZpZyA9IHhjaGcoJnN0cmVhbS0+b2FfY29uZmlnLCBjb25maWcp
OworCX0KKworCWk5MTVfb2FfY29uZmlnX3B1dChjb25maWcpOworCisJcmV0dXJuIGVycjsKK30K
KwogLyoqCiAgKiBpOTE1X3BlcmZfaW9jdGwgLSBzdXBwb3J0IGlvY3RsKCkgdXNhZ2Ugd2l0aCBp
OTE1IHBlcmYgc3RyZWFtIEZEcwogICogQHN0cmVhbTogQW4gaTkxNSBwZXJmIHN0cmVhbQpAQCAt
Mjg2OSw2ICsyODkxLDggQEAgc3RhdGljIGxvbmcgaTkxNV9wZXJmX2lvY3RsX2xvY2tlZChzdHJ1
Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAogCWNhc2UgSTkxNV9QRVJGX0lPQ1RMX0RJU0FC
TEU6CiAJCWk5MTVfcGVyZl9kaXNhYmxlX2xvY2tlZChzdHJlYW0pOwogCQlyZXR1cm4gMDsKKwlj
YXNlIEk5MTVfUEVSRl9JT0NUTF9DT05GSUc6CisJCXJldHVybiBpOTE1X3BlcmZfY29uZmlnX2xv
Y2tlZChzdHJlYW0sIGFyZyk7CiAJfQogCiAJcmV0dXJuIC1FSU5WQUw7CkBAIC00MDA3LDcgKzQw
MzEsMTUgQEAgdm9pZCBpOTE1X3BlcmZfZmluaShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSkKICAqLwogaW50IGk5MTVfcGVyZl9pb2N0bF92ZXJzaW9uKHZvaWQpCiB7Ci0JcmV0dXJuIDE7
CisJLyoKKwkgKiAxOiBJbml0aWFsIHZlcnNpb24KKwkgKiAgIEk5MTVfUEVSRl9JT0NUTF9FTkFC
TEUKKwkgKiAgIEk5MTVfUEVSRl9JT0NUTF9ESVNBQkxFCisJICoKKwkgKiAyOiBBZGRlZCBydW50
aW1lIG1vZGlmaWNhdGlvbiBvZiBPQSBjb25maWcuCisJICogICBJOTE1X1BFUkZfSU9DVExfQ09O
RklHCisJICovCisJcmV0dXJuIDI7CiB9CiAKICNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1fSTkx
NV9TRUxGVEVTVCkKZGlmZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaCBiL2lu
Y2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAppbmRleCAwYzdiMjgxNWZiZjEuLjVlNjZmN2M2MDI2
MSAxMDA2NDQKLS0tIGEvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCisrKyBiL2luY2x1ZGUv
dWFwaS9kcm0vaTkxNV9kcm0uaApAQCAtMTkzMiw2ICsxOTMyLDE2IEBAIHN0cnVjdCBkcm1faTkx
NV9wZXJmX29wZW5fcGFyYW0gewogICovCiAjZGVmaW5lIEk5MTVfUEVSRl9JT0NUTF9ESVNBQkxF
CV9JTygnaScsIDB4MSkKIAorLyoqCisgKiBDaGFuZ2UgbWV0cmljc19zZXQgY2FwdHVyZWQgYnkg
YSBzdHJlYW0uCisgKgorICogV2lsbCBub3QgdGFrZSBlZmZlY3QgdW50aWwgdGhlIHN0cmVhbSBp
cyByZXN0YXJ0LCBvciB1cG9uIHRoZSBuZXh0CisgKiBleGVjYnVmIHdoZW4gYXR0YWNoZWQgdG8g
YSBzcGVjaWZpYyBjb250ZXh0LgorICoKKyAqIFRoaXMgaW9jdGwgaXMgYXZhaWxhYmxlIGluIHBl
cmYgcmV2aXNpb24gMi4KKyAqLworI2RlZmluZSBJOTE1X1BFUkZfSU9DVExfQ09ORklHCV9JTygn
aScsIDB4MikKKwogLyoqCiAgKiBDb21tb24gdG8gYWxsIGk5MTUgcGVyZiByZWNvcmRzCiAgKi8K
LS0gCjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 232BA367090
	for <lists+intel-gfx@lfdr.de>; Wed, 21 Apr 2021 18:49:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6529C6E9E1;
	Wed, 21 Apr 2021 16:49:19 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3555C6E9E1
 for <intel-gfx@lists.freedesktop.org>; Wed, 21 Apr 2021 16:49:17 +0000 (UTC)
IronPort-SDR: jJ1rL5DhxO3Vga86W+CEuqAQCiUGM6fvWD4u6HPhfm6QN/gTTJdKwcKKPYu9YsudjAz0/MdZry
 PdtdpUReYQvw==
X-IronPort-AV: E=McAfee;i="6200,9189,9961"; a="193612432"
X-IronPort-AV: E=Sophos;i="5.82,240,1613462400"; d="scan'208";a="193612432"
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by fmsmga104.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 21 Apr 2021 09:49:16 -0700
IronPort-SDR: 6XIldwDorEwistuLES5M1FwxK+hnoTV6FM9HA/+HN+JApxfHtd5x9G5QBAkq7dDYd044n8lqWO
 +ROK8uLrBPDA==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.82,240,1613462400"; d="scan'208";a="401536252"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.171])
 by orsmga002.jf.intel.com with SMTP; 21 Apr 2021 09:49:14 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Wed, 21 Apr 2021 19:49:13 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 21 Apr 2021 19:48:40 +0300
Message-Id: <20210421164849.12806-9-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.26.3
In-Reply-To: <20210421164849.12806-1-ville.syrjala@linux.intel.com>
References: <20210421164849.12806-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 08/17] drm/i915: Store the HDMI default entry in
 the bug trans struct
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClN0
b3JlIHRoZSBkZWZhdWx0IEhETUkgYnVmIHRyYW5zIGVudHJ5IGluIHN0cnVjdCBpbnRlbF9kZGlf
YnVmX3RyYW5zCnNvIHRoYXQgaXQncyBuZXh0IHRvIHRoZSBhY3R1YWwgdGFibGUuIFRoaXMgbGV0
J3MgdXMgc3RhcnQgcmlkZGluZwpvdXJzZWx2ZXMgb2Ygc29tZSBwbGF0b2ZybSBzcGVjaWZpY3Mg
aW4gaW50ZWxfZGRpX2hkbWlfbnVtX2VudHJpZXMoKS4KClNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5
cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+Ci0tLQogLi4uL2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5jICAgIHwgNDkgKysrKysrKysrKy0tLS0tLS0t
LQogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5oICAgIHwgIDEgKwog
MiBmaWxlcyBjaGFuZ2VkLCAyNyBpbnNlcnRpb25zKCspLCAyMyBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaV9idWZfdHJhbnMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5jCmlu
ZGV4IGQ5MWI5NDZkZmE2Ni4uNzU3NGQ2MzkwYTM5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaV9idWZfdHJhbnMuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaV9idWZfdHJhbnMuYwpAQCAtNjUsNiArNjUsNyBAQCBz
dGF0aWMgY29uc3QgdW5pb24gaW50ZWxfZGRpX2J1Zl90cmFuc19lbnRyeSBfaHN3X2RkaV90cmFu
c2xhdGlvbnNfaGRtaVtdID0gewogc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3Ry
YW5zIGhzd19kZGlfdHJhbnNsYXRpb25zX2hkbWkgPSB7CiAJLmVudHJpZXMgPSBfaHN3X2RkaV90
cmFuc2xhdGlvbnNfaGRtaSwKIAkubnVtX2VudHJpZXMgPSBBUlJBWV9TSVpFKF9oc3dfZGRpX3Ry
YW5zbGF0aW9uc19oZG1pKSwKKwkuaGRtaV9kZWZhdWx0X2VudHJ5ID0gNiwKIH07CiAKIHN0YXRp
YyBjb25zdCB1bmlvbiBpbnRlbF9kZGlfYnVmX3RyYW5zX2VudHJ5IF9iZHdfZGRpX3RyYW5zbGF0
aW9uc19lZHBbXSA9IHsKQEAgLTEzNSw2ICsxMzYsNyBAQCBzdGF0aWMgY29uc3QgdW5pb24gaW50
ZWxfZGRpX2J1Zl90cmFuc19lbnRyeSBfYmR3X2RkaV90cmFuc2xhdGlvbnNfaGRtaVtdID0gewog
c3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zIGJkd19kZGlfdHJhbnNsYXRp
b25zX2hkbWkgPSB7CiAJLmVudHJpZXMgPSBfYmR3X2RkaV90cmFuc2xhdGlvbnNfaGRtaSwKIAku
bnVtX2VudHJpZXMgPSBBUlJBWV9TSVpFKF9iZHdfZGRpX3RyYW5zbGF0aW9uc19oZG1pKSwKKwku
aGRtaV9kZWZhdWx0X2VudHJ5ID0gNywKIH07CiAKIC8qIFNreWxha2UgSCBhbmQgUyAqLwpAQCAt
MzI5LDYgKzMzMSw3IEBAIHN0YXRpYyBjb25zdCB1bmlvbiBpbnRlbF9kZGlfYnVmX3RyYW5zX2Vu
dHJ5IF9za2xfZGRpX3RyYW5zbGF0aW9uc19oZG1pW10gPSB7CiBzdGF0aWMgY29uc3Qgc3RydWN0
IGludGVsX2RkaV9idWZfdHJhbnMgc2tsX2RkaV90cmFuc2xhdGlvbnNfaGRtaSA9IHsKIAkuZW50
cmllcyA9IF9za2xfZGRpX3RyYW5zbGF0aW9uc19oZG1pLAogCS5udW1fZW50cmllcyA9IEFSUkFZ
X1NJWkUoX3NrbF9kZGlfdHJhbnNsYXRpb25zX2hkbWkpLAorCS5oZG1pX2RlZmF1bHRfZW50cnkg
PSA4LAogfTsKIAogLyogU2t5bGFrZS9LYWJ5bGFrZSBZICovCkBAIC0zNDksNiArMzUyLDcgQEAg
c3RhdGljIGNvbnN0IHVuaW9uIGludGVsX2RkaV9idWZfdHJhbnNfZW50cnkgX3NrbF95X2RkaV90
cmFuc2xhdGlvbnNfaGRtaVtdID0gewogc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVm
X3RyYW5zIHNrbF95X2RkaV90cmFuc2xhdGlvbnNfaGRtaSA9IHsKIAkuZW50cmllcyA9IF9za2xf
eV9kZGlfdHJhbnNsYXRpb25zX2hkbWksCiAJLm51bV9lbnRyaWVzID0gQVJSQVlfU0laRShfc2ts
X3lfZGRpX3RyYW5zbGF0aW9uc19oZG1pKSwKKwkuaGRtaV9kZWZhdWx0X2VudHJ5ID0gOCwKIH07
CiAKIHN0YXRpYyBjb25zdCB1bmlvbiBpbnRlbF9kZGlfYnVmX3RyYW5zX2VudHJ5IF9ieHRfZGRp
X3RyYW5zbGF0aW9uc19kcFtdID0gewpAQCAtNDA5LDYgKzQxMyw3IEBAIHN0YXRpYyBjb25zdCB1
bmlvbiBpbnRlbF9kZGlfYnVmX3RyYW5zX2VudHJ5IF9ieHRfZGRpX3RyYW5zbGF0aW9uc19oZG1p
W10gPSB7CiBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgYnh0X2RkaV90
cmFuc2xhdGlvbnNfaGRtaSA9IHsKIAkuZW50cmllcyA9IF9ieHRfZGRpX3RyYW5zbGF0aW9uc19o
ZG1pLAogCS5udW1fZW50cmllcyA9IEFSUkFZX1NJWkUoX2J4dF9kZGlfdHJhbnNsYXRpb25zX2hk
bWkpLAorCS5oZG1pX2RlZmF1bHRfZW50cnkgPSBBUlJBWV9TSVpFKF9ieHRfZGRpX3RyYW5zbGF0
aW9uc19oZG1pKSAtIDEsCiB9OwogCiAvKiBWb2x0YWdlIFN3aW5nIFByb2dyYW1taW5nIGZvciBW
Y2NJTyAwLjg1ViBmb3IgRFAgKi8KQEAgLTQ0Niw2ICs0NTEsNyBAQCBzdGF0aWMgY29uc3QgdW5p
b24gaW50ZWxfZGRpX2J1Zl90cmFuc19lbnRyeSBfY25sX2RkaV90cmFuc2xhdGlvbnNfaGRtaV8w
Xzg1VltdCiBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgY25sX2RkaV90
cmFuc2xhdGlvbnNfaGRtaV8wXzg1ViA9IHsKIAkuZW50cmllcyA9IF9jbmxfZGRpX3RyYW5zbGF0
aW9uc19oZG1pXzBfODVWLAogCS5udW1fZW50cmllcyA9IEFSUkFZX1NJWkUoX2NubF9kZGlfdHJh
bnNsYXRpb25zX2hkbWlfMF84NVYpLAorCS5oZG1pX2RlZmF1bHRfZW50cnkgPSBBUlJBWV9TSVpF
KF9jbmxfZGRpX3RyYW5zbGF0aW9uc19oZG1pXzBfODVWKSAtIDEsCiB9OwogCiAvKiBWb2x0YWdl
IFN3aW5nIFByb2dyYW1taW5nIGZvciBWY2NJTyAwLjg1ViBmb3IgZURQICovCkBAIC01MDYsNiAr
NTEyLDcgQEAgc3RhdGljIGNvbnN0IHVuaW9uIGludGVsX2RkaV9idWZfdHJhbnNfZW50cnkgX2Nu
bF9kZGlfdHJhbnNsYXRpb25zX2hkbWlfMF85NVZbXQogc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRl
bF9kZGlfYnVmX3RyYW5zIGNubF9kZGlfdHJhbnNsYXRpb25zX2hkbWlfMF85NVYgPSB7CiAJLmVu
dHJpZXMgPSBfY25sX2RkaV90cmFuc2xhdGlvbnNfaGRtaV8wXzk1ViwKIAkubnVtX2VudHJpZXMg
PSBBUlJBWV9TSVpFKF9jbmxfZGRpX3RyYW5zbGF0aW9uc19oZG1pXzBfOTVWKSwKKwkuaGRtaV9k
ZWZhdWx0X2VudHJ5ID0gQVJSQVlfU0laRShfY25sX2RkaV90cmFuc2xhdGlvbnNfaGRtaV8wXzk1
VikgLSAxLAogfTsKIAogLyogVm9sdGFnZSBTd2luZyBQcm9ncmFtbWluZyBmb3IgVmNjSU8gMC45
NVYgZm9yIGVEUCAqLwpAQCAtNTY3LDYgKzU3NCw3IEBAIHN0YXRpYyBjb25zdCB1bmlvbiBpbnRl
bF9kZGlfYnVmX3RyYW5zX2VudHJ5IF9jbmxfZGRpX3RyYW5zbGF0aW9uc19oZG1pXzFfMDVWW10K
IHN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyBjbmxfZGRpX3RyYW5zbGF0
aW9uc19oZG1pXzFfMDVWID0gewogCS5lbnRyaWVzID0gX2NubF9kZGlfdHJhbnNsYXRpb25zX2hk
bWlfMV8wNVYsCiAJLm51bV9lbnRyaWVzID0gQVJSQVlfU0laRShfY25sX2RkaV90cmFuc2xhdGlv
bnNfaGRtaV8xXzA1ViksCisJLmhkbWlfZGVmYXVsdF9lbnRyeSA9IEFSUkFZX1NJWkUoX2NubF9k
ZGlfdHJhbnNsYXRpb25zX2hkbWlfMV8wNVYpIC0gMSwKIH07CiAKIC8qIFZvbHRhZ2UgU3dpbmcg
UHJvZ3JhbW1pbmcgZm9yIFZjY0lPIDEuMDVWIGZvciBlRFAgKi8KQEAgLTY2MCw2ICs2NjgsNyBA
QCBzdGF0aWMgY29uc3QgdW5pb24gaW50ZWxfZGRpX2J1Zl90cmFuc19lbnRyeSBfaWNsX2NvbWJv
X3BoeV9kZGlfdHJhbnNsYXRpb25zX2hkbQogc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlf
YnVmX3RyYW5zIGljbF9jb21ib19waHlfZGRpX3RyYW5zbGF0aW9uc19oZG1pID0gewogCS5lbnRy
aWVzID0gX2ljbF9jb21ib19waHlfZGRpX3RyYW5zbGF0aW9uc19oZG1pLAogCS5udW1fZW50cmll
cyA9IEFSUkFZX1NJWkUoX2ljbF9jb21ib19waHlfZGRpX3RyYW5zbGF0aW9uc19oZG1pKSwKKwku
aGRtaV9kZWZhdWx0X2VudHJ5ID0gQVJSQVlfU0laRShfaWNsX2NvbWJvX3BoeV9kZGlfdHJhbnNs
YXRpb25zX2hkbWkpIC0gMSwKIH07CiAKIHN0YXRpYyBjb25zdCB1bmlvbiBpbnRlbF9kZGlfYnVm
X3RyYW5zX2VudHJ5IF9laGxfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfZHBbXSA9IHsKQEAg
LTgxMiw2ICs4MjEsNyBAQCBzdGF0aWMgY29uc3QgdW5pb24gaW50ZWxfZGRpX2J1Zl90cmFuc19l
bnRyeSBfaWNsX21nX3BoeV9kZGlfdHJhbnNsYXRpb25zX2hkbWlbXQogc3RhdGljIGNvbnN0IHN0
cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zIGljbF9tZ19waHlfZGRpX3RyYW5zbGF0aW9uc19oZG1p
ID0gewogCS5lbnRyaWVzID0gX2ljbF9tZ19waHlfZGRpX3RyYW5zbGF0aW9uc19oZG1pLAogCS5u
dW1fZW50cmllcyA9IEFSUkFZX1NJWkUoX2ljbF9tZ19waHlfZGRpX3RyYW5zbGF0aW9uc19oZG1p
KSwKKwkuaGRtaV9kZWZhdWx0X2VudHJ5ID0gQVJSQVlfU0laRShfaWNsX21nX3BoeV9kZGlfdHJh
bnNsYXRpb25zX2hkbWkpIC0gMSwKIH07CiAKIHN0YXRpYyBjb25zdCB1bmlvbiBpbnRlbF9kZGlf
YnVmX3RyYW5zX2VudHJ5IF90Z2xfZGtsX3BoeV9kZGlfdHJhbnNsYXRpb25zX2RwX2hicltdID0g
ewpAQCAtODY5LDYgKzg3OSw3IEBAIHN0YXRpYyBjb25zdCB1bmlvbiBpbnRlbF9kZGlfYnVmX3Ry
YW5zX2VudHJ5IF90Z2xfZGtsX3BoeV9kZGlfdHJhbnNsYXRpb25zX2hkbWlbCiBzdGF0aWMgY29u
c3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgdGdsX2RrbF9waHlfZGRpX3RyYW5zbGF0aW9u
c19oZG1pID0gewogCS5lbnRyaWVzID0gX3RnbF9ka2xfcGh5X2RkaV90cmFuc2xhdGlvbnNfaGRt
aSwKIAkubnVtX2VudHJpZXMgPSBBUlJBWV9TSVpFKF90Z2xfZGtsX3BoeV9kZGlfdHJhbnNsYXRp
b25zX2hkbWkpLAorCS5oZG1pX2RlZmF1bHRfZW50cnkgPSBBUlJBWV9TSVpFKF90Z2xfZGtsX3Bo
eV9kZGlfdHJhbnNsYXRpb25zX2hkbWkpIC0gMSwKIH07CiAKIHN0YXRpYyBjb25zdCB1bmlvbiBp
bnRlbF9kZGlfYnVmX3RyYW5zX2VudHJ5IF90Z2xfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNf
ZHBfaGJyW10gPSB7CkBAIC0xNjI5LDQyICsxNjQwLDM0IEBAIGludCBpbnRlbF9kZGlfaGRtaV9u
dW1fZW50cmllcyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIHsKIAlzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsKIAll
bnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgZW5jb2Rlci0+cG9ydCk7
CisJY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKmRkaV90cmFuc2xhdGlvbnMgPSBO
VUxMOwogCWludCBuX2VudHJpZXM7CiAKIAlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEy
KSB7CiAJCWlmIChpbnRlbF9waHlfaXNfY29tYm8oZGV2X3ByaXYsIHBoeSkpCi0JCQl0Z2xfZ2V0
X2NvbWJvX2J1Zl90cmFuc19oZG1pKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwor
CQkJZGRpX3RyYW5zbGF0aW9ucyA9IHRnbF9nZXRfY29tYm9fYnVmX3RyYW5zX2hkbWkoZW5jb2Rl
ciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7CiAJCWVsc2UKLQkJCXRnbF9nZXRfZGtsX2J1Zl90
cmFuc19oZG1pKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwotCQkqZGVmYXVsdF9l
bnRyeSA9IG5fZW50cmllcyAtIDE7CisJCQlkZGlfdHJhbnNsYXRpb25zID0gdGdsX2dldF9ka2xf
YnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7CiAJfSBlbHNl
IGlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPT0gMTEpIHsKIAkJaWYgKGludGVsX3BoeV9pc19j
b21ibyhkZXZfcHJpdiwgcGh5KSkKLQkJCWljbF9nZXRfY29tYm9fYnVmX3RyYW5zX2hkbWkoZW5j
b2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7CisJCQlkZGlfdHJhbnNsYXRpb25zID0gaWNs
X2dldF9jb21ib19idWZfdHJhbnNfaGRtaShlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVz
KTsKIAkJZWxzZQotCQkJaWNsX2dldF9tZ19idWZfdHJhbnNfaGRtaShlbmNvZGVyLCBjcnRjX3N0
YXRlLCAmbl9lbnRyaWVzKTsKLQkJKmRlZmF1bHRfZW50cnkgPSBuX2VudHJpZXMgLSAxOworCQkJ
ZGRpX3RyYW5zbGF0aW9ucyA9IGljbF9nZXRfbWdfYnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgY3J0
Y19zdGF0ZSwgJm5fZW50cmllcyk7CiAJfSBlbHNlIGlmIChJU19DQU5OT05MQUtFKGRldl9wcml2
KSkgewotCQljbmxfZ2V0X2J1Zl90cmFuc19oZG1pKGVuY29kZXIsICZuX2VudHJpZXMpOwotCQkq
ZGVmYXVsdF9lbnRyeSA9IG5fZW50cmllcyAtIDE7CisJCWRkaV90cmFuc2xhdGlvbnMgPSBjbmxf
Z2V0X2J1Zl90cmFuc19oZG1pKGVuY29kZXIsICZuX2VudHJpZXMpOwogCX0gZWxzZSBpZiAoSVNf
R0VNSU5JTEFLRShkZXZfcHJpdikgfHwgSVNfQlJPWFRPTihkZXZfcHJpdikpIHsKLQkJYnh0X2dl
dF9idWZfdHJhbnNfaGRtaShlbmNvZGVyLCAmbl9lbnRyaWVzKTsKLQkJKmRlZmF1bHRfZW50cnkg
PSBuX2VudHJpZXMgLSAxOwotCX0gZWxzZSBpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID09IDkp
IHsKLQkJaHN3X2dldF9idWZfdHJhbnNfaGRtaShlbmNvZGVyLCAmbl9lbnRyaWVzKTsKLQkJKmRl
ZmF1bHRfZW50cnkgPSA4OwotCX0gZWxzZSBpZiAoSVNfQlJPQURXRUxMKGRldl9wcml2KSkgewot
CQloc3dfZ2V0X2J1Zl90cmFuc19oZG1pKGVuY29kZXIsICZuX2VudHJpZXMpOwotCQkqZGVmYXVs
dF9lbnRyeSA9IDc7Ci0JfSBlbHNlIGlmIChJU19IQVNXRUxMKGRldl9wcml2KSkgewotCQloc3df
Z2V0X2J1Zl90cmFuc19oZG1pKGVuY29kZXIsICZuX2VudHJpZXMpOwotCQkqZGVmYXVsdF9lbnRy
eSA9IDY7Ci0JfSBlbHNlIHsKLQkJZHJtX1dBUk4oJmRldl9wcml2LT5kcm0sIDEsICJkZGkgdHJh
bnNsYXRpb24gdGFibGUgbWlzc2luZ1xuIik7Ci0JCXJldHVybiAwOworCQlkZGlfdHJhbnNsYXRp
b25zID0gYnh0X2dldF9idWZfdHJhbnNfaGRtaShlbmNvZGVyLCAmbl9lbnRyaWVzKTsKKwl9IGVs
c2UgaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA9PSA5IHx8CisJCSAgIElTX0JST0FEV0VMTChk
ZXZfcHJpdikgfHwgSVNfSEFTV0VMTChkZXZfcHJpdikpIHsKKwkJZGRpX3RyYW5zbGF0aW9ucyA9
IGhzd19nZXRfYnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgJm5fZW50cmllcyk7CiAJfQogCi0JaWYg
KGRybV9XQVJOX09OX09OQ0UoJmRldl9wcml2LT5kcm0sIG5fZW50cmllcyA9PSAwKSkKKwlpZiAo
ZHJtX1dBUk5fT04oJmRldl9wcml2LT5kcm0sICFkZGlfdHJhbnNsYXRpb25zKSkgeworCQkqZGVm
YXVsdF9lbnRyeSA9IDA7CiAJCXJldHVybiAwOworCX0KKworCSpkZWZhdWx0X2VudHJ5ID0gZGRp
X3RyYW5zbGF0aW9ucy0+aGRtaV9kZWZhdWx0X2VudHJ5OwogCiAJcmV0dXJuIG5fZW50cmllczsK
IH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1
Zl90cmFucy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGlfYnVmX3Ry
YW5zLmgKaW5kZXggMjQwNzI0MTFlMGIwLi45NDAxNDBlNjRjNzYgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5oCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5oCkBAIC01Niw2ICs1
Niw3IEBAIHVuaW9uIGludGVsX2RkaV9idWZfdHJhbnNfZW50cnkgewogc3RydWN0IGludGVsX2Rk
aV9idWZfdHJhbnMgewogCWNvbnN0IHVuaW9uIGludGVsX2RkaV9idWZfdHJhbnNfZW50cnkgKmVu
dHJpZXM7CiAJdTggbnVtX2VudHJpZXM7CisJdTggaGRtaV9kZWZhdWx0X2VudHJ5OwogfTsKIAog
Ym9vbCBpc19ob2JsX2J1Zl90cmFucyhjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAq
dGFibGUpOwotLSAKMi4yNi4zCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9p
bnRlbC1nZngK

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 32F2DD1B9E
	for <lists+intel-gfx@lfdr.de>; Thu, 10 Oct 2019 00:23:39 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0EA806EA65;
	Wed,  9 Oct 2019 22:23:35 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 68C636EA5E
 for <intel-gfx@lists.freedesktop.org>; Wed,  9 Oct 2019 22:23:30 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Oct 2019 15:23:29 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,277,1566889200"; d="scan'208";a="200274701"
Received: from labuser-z97x-ud5h.jf.intel.com ([10.54.75.49])
 by FMSMGA003.fm.intel.com with ESMTP; 09 Oct 2019 15:23:29 -0700
From: Manasi Navare <manasi.d.navare@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  9 Oct 2019 15:25:09 -0700
Message-Id: <20191009222511.1497-4-manasi.d.navare@intel.com>
X-Mailer: git-send-email 2.19.1
In-Reply-To: <20191009222511.1497-1-manasi.d.navare@intel.com>
References: <20191009222511.1497-1-manasi.d.navare@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v7 4/6] drm/i915/display/icl: Enable
 master-slaves in trans port sync
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgcGVyIHRoZSBkaXNwbGF5IGVuYWJsZSBzZXF1ZW5jZSwgd2UgbmVlZCB0byBmb2xsb3cgdGhl
IGVuYWJsZSBzZXF1ZW5jZQpmb3Igc2xhdmVzIGZpcnN0IHdpdGggRFBfVFBfQ1RMIHNldCB0byBJ
ZGxlIGFuZCBjb25maWd1cmUgdGhlIHRyYW5zY29kZXIKcG9ydCBzeW5jIHJlZ2lzdGVyIHRvIHNl
bGVjdCB0aGUgY29yZXJzcG9uZGluZyBtYXN0ZXIsIHRoZW4gZm9sbG93IHRoZQplbmFibGUgc2Vx
dWVuY2UgZm9yIG1hc3RlciBsZWF2aW5nIERQX1RQX0NUTCB0byBpZGxlLgpBdCB0aGlzIHBvaW50
IHRoZSB0cmFuc2NvZGVyIHBvcnQgc3luYyBtb2RlIGlzIGNvbmZpZ3VyZWQgYW5kIGVuYWJsZWQK
YW5kIHRoZSBWYmxhbmtzIG9mIGJvdGggcG9ydHMgYXJlIHN5bmNocm9uaXplZCBzbyB0aGVuIHNl
dCBEUF9UUF9DVEwKZm9yIHRoZSBzbGF2ZSBhbmQgbWFzdGVyIHRvIE5vcm1hbCBhbmQgZG8gcG9z
dCBjcnRjIGVuYWJsZSB1cGRhdGVzLgoKdjc6CiogVXNlIGZmcyhzbGF2ZXMpIHRvIGdldCBzbGF2
ZSBjcnRjIChWaWxsZSkKdjY6CiogTW9kZXNldCBpbXBsaWVzIGFjdGl2ZV9jaGFuZ2VkLCByZW1v
dmUgb25lIGNvbmRpdGlvbiAoTWFhcnRlbikKdjU6CiogRml4IGNoZWNrcGF0Y2ggd2FybmluZyAo
TWFuYXNpKQp2NDoKKiBSZXVzZSBza2xfY29tbWl0X21vZGVzZXRfZW5hYmxlcygpIGhvb2sgKE1h
YXJ0ZW4pCiogT2J0YWluIHNsYXZlIGNydGMgYW5kIHN0YXRlcyBmcm9tIG1hc3RlciAoTWFhcnRl
bikKdjM6CiogUmViYXNlIG9uIGRybS10aXAgKE1hbmFzaSkKdjI6CiogQ3JlYXRlIGEgaWNsX3Vw
ZGF0ZV9jcnRjcyBob29rIChNYWFydGVuLCBEYW52ZXQpCiogVGhpcyBzZXF1ZW5jZSBvbmx5IGZv
ciBDUlRDcyBpbiB0cmFucyBwb3J0IHN5bmMgbW9kZSAoTWFhcnRlbikKCkNjOiBEYW5pZWwgVmV0
dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgpDYzogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5z
eXJqYWxhQGxpbnV4LmludGVsLmNvbT4KQ2M6IE1hYXJ0ZW4gTGFua2hvcnN0IDxtYWFydGVuLmxh
bmtob3JzdEBsaW51eC5pbnRlbC5jb20+CkNjOiBNYXR0IFJvcGVyIDxtYXR0aGV3LmQucm9wZXJA
aW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBNYW5hc2kgTmF2YXJlIDxtYW5hc2kuZC5uYXZhcmVA
aW50ZWwuY29tPgpSZXZpZXdlZC1ieTogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hv
cnN0QGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2RkaS5jICAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5LmMgfCAxMjUgKysrKysrKysrKysrKysrKysrLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmggfCAgIDIgKwogMyBmaWxlcyBjaGFuZ2VkLCAxMjYg
aW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kZGkuYwppbmRleCA2YzEzMTVjN2JjZGUuLmI5NjA5MTgwMDY2MiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCkBAIC0zNTcxLDcgKzM1NzEsOCBAQCBz
dGF0aWMgdm9pZCBoc3dfZGRpX3ByZV9lbmFibGVfZHAoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIsCiAJCQkJCSAgICAgIHRydWUpOwogCWludGVsX2RwX3Npbmtfc2V0X2ZlY19yZWFkeShp
bnRlbF9kcCwgY3J0Y19zdGF0ZSk7CiAJaW50ZWxfZHBfc3RhcnRfbGlua190cmFpbihpbnRlbF9k
cCk7Ci0JaWYgKHBvcnQgIT0gUE9SVF9BIHx8IElOVEVMX0dFTihkZXZfcHJpdikgPj0gOSkKKwlp
ZiAoKHBvcnQgIT0gUE9SVF9BIHx8IElOVEVMX0dFTihkZXZfcHJpdikgPj0gOSkgJiYKKwkgICAg
IWlzX3RyYW5zX3BvcnRfc3luY19tb2RlKGNydGNfc3RhdGUpKQogCQlpbnRlbF9kcF9zdG9wX2xp
bmtfdHJhaW4oaW50ZWxfZHApOwogCiAJaW50ZWxfZGRpX2VuYWJsZV9mZWMoZW5jb2RlciwgY3J0
Y19zdGF0ZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5j
CmluZGV4IGQ2NzFjYjBiNTBlZi4uZmRiMDJmNGI2ZWI4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtMTM5NDMsNiArMTM5NDMsMTggQEAgc3Rh
dGljIHZvaWQgaW50ZWxfdXBkYXRlX2NydGMoc3RydWN0IGludGVsX2NydGMgKmNydGMsCiAJaW50
ZWxfZmluaXNoX2NydGNfY29tbWl0KHN0YXRlLCBjcnRjKTsKIH0KIAorc3RhdGljIHN0cnVjdCBp
bnRlbF9jcnRjICppbnRlbF9nZXRfc2xhdmVfY3J0Yyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZSAqbmV3X2NydGNfc3RhdGUpCit7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gdG9faTkxNShuZXdfY3J0Y19zdGF0ZS0+YmFzZS5jcnRjLT5kZXYpOworCWVudW0gdHJh
bnNjb2RlciBzbGF2ZV90cmFuc2NvZGVyOworCisJV0FSTl9PTighaXNfcG93ZXJfb2ZfMihuZXdf
Y3J0Y19zdGF0ZS0+c3luY19tb2RlX3NsYXZlc19tYXNrKSk7CisKKwlzbGF2ZV90cmFuc2NvZGVy
ID0gZmZzKG5ld19jcnRjX3N0YXRlLT5zeW5jX21vZGVfc2xhdmVzX21hc2spIC0gMTsKKwlyZXR1
cm4gaW50ZWxfZ2V0X2NydGNfZm9yX3BpcGUoZGV2X3ByaXYsCisJCQkJICAgICAgIChlbnVtIHBp
cGUpc2xhdmVfdHJhbnNjb2Rlcik7Cit9CisKIHN0YXRpYyB2b2lkIGludGVsX29sZF9jcnRjX3N0
YXRlX2Rpc2FibGVzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAogCQkJCQkgIHN0
cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwKIAkJCQkJICBzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqbmV3X2NydGNfc3RhdGUsCkBAIC0xNDAyMSw2ICsxNDAzMywxMDIgQEAg
c3RhdGljIHZvaWQgaW50ZWxfY29tbWl0X21vZGVzZXRfZW5hYmxlcyhzdHJ1Y3QgaW50ZWxfYXRv
bWljX3N0YXRlICpzdGF0ZSkKIAl9CiB9CiAKK3N0YXRpYyB2b2lkIGludGVsX2NydGNfZW5hYmxl
X3RyYW5zX3BvcnRfc3luYyhzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKKwkJCQkJICAgICAgc3Ry
dWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsCisJCQkJCSAgICAgIHN0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlICpuZXdfY3J0Y19zdGF0ZSkKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7CisKKwl1cGRhdGVfc2NhbmxpbmVf
b2Zmc2V0KG5ld19jcnRjX3N0YXRlKTsKKwlkZXZfcHJpdi0+ZGlzcGxheS5jcnRjX2VuYWJsZShu
ZXdfY3J0Y19zdGF0ZSwgc3RhdGUpOworCWludGVsX2NydGNfZW5hYmxlX3BpcGVfY3JjKGNydGMp
OworfQorCitzdGF0aWMgdm9pZCBpbnRlbF9zZXRfZHBfdHBfY3RsX25vcm1hbChzdHJ1Y3QgaW50
ZWxfY3J0YyAqY3J0YywKKwkJCQkgICAgICAgc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3Rh
dGUpCit7CisJc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGU7CisJc3RydWN0
IGRybV9jb25uZWN0b3IgKmNvbm47CisJc3RydWN0IGludGVsX2RwICppbnRlbF9kcDsKKwlpbnQg
aTsKKworCWZvcl9lYWNoX25ld19jb25uZWN0b3JfaW5fc3RhdGUoJnN0YXRlLT5iYXNlLCBjb25u
LCBjb25uX3N0YXRlLCBpKSB7CisJCWlmIChjb25uX3N0YXRlLT5jcnRjID09ICZjcnRjLT5iYXNl
KQorCQkJYnJlYWs7CisJfQorCWludGVsX2RwID0gZW5jX3RvX2ludGVsX2RwKCZpbnRlbF9hdHRh
Y2hlZF9lbmNvZGVyKGNvbm4pLT5iYXNlKTsKKwlpbnRlbF9kcF9zdG9wX2xpbmtfdHJhaW4oaW50
ZWxfZHApOworfQorCitzdGF0aWMgdm9pZCBpbnRlbF9wb3N0X2NydGNfZW5hYmxlX3VwZGF0ZXMo
c3RydWN0IGludGVsX2NydGMgKmNydGMsCisJCQkJCSAgIHN0cnVjdCBpbnRlbF9hdG9taWNfc3Rh
dGUgKnN0YXRlLAorCQkJCQkgICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3Rh
dGUsCisJCQkJCSAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpuZXdfY3J0Y19zdGF0ZSkKK3sK
KwlzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKm5ld19wbGFuZV9zdGF0ZSA9CisJCWludGVsX2F0
b21pY19nZXRfbmV3X3BsYW5lX3N0YXRlKHN0YXRlLAorCQkJCQkJIHRvX2ludGVsX3BsYW5lKGNy
dGMtPmJhc2UucHJpbWFyeSkpOworCisJaWYgKG5ld19jcnRjX3N0YXRlLT51cGRhdGVfcGlwZSAm
JiAhbmV3X2NydGNfc3RhdGUtPmVuYWJsZV9mYmMpCisJCWludGVsX2ZiY19kaXNhYmxlKGNydGMp
OworCWVsc2UgaWYgKG5ld19wbGFuZV9zdGF0ZSkKKwkJaW50ZWxfZmJjX2VuYWJsZShjcnRjLCBu
ZXdfY3J0Y19zdGF0ZSwgbmV3X3BsYW5lX3N0YXRlKTsKKworCWludGVsX2JlZ2luX2NydGNfY29t
bWl0KHN0YXRlLCBjcnRjKTsKKwlza2xfdXBkYXRlX3BsYW5lc19vbl9jcnRjKHN0YXRlLCBjcnRj
KTsKKwlpbnRlbF9maW5pc2hfY3J0Y19jb21taXQoc3RhdGUsIGNydGMpOworfQorCitzdGF0aWMg
dm9pZCBpbnRlbF91cGRhdGVfdHJhbnNfcG9ydF9zeW5jX2NydGNzKHN0cnVjdCBpbnRlbF9jcnRj
ICpjcnRjLAorCQkJCQkgICAgICAgc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsCisJ
CQkJCSAgICAgICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUsCisJCQkJ
CSAgICAgICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqbmV3X2NydGNfc3RhdGUpCit7CisJc3Ry
dWN0IGludGVsX2NydGMgKnNsYXZlX2NydGMgPSBpbnRlbF9nZXRfc2xhdmVfY3J0YyhuZXdfY3J0
Y19zdGF0ZSk7CisJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm5ld19zbGF2ZV9jcnRjX3N0YXRl
ID0KKwkJaW50ZWxfYXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShzdGF0ZSwgc2xhdmVfY3J0Yyk7
CisJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9zbGF2ZV9jcnRjX3N0YXRlID0KKwkJaW50
ZWxfYXRvbWljX2dldF9vbGRfY3J0Y19zdGF0ZShzdGF0ZSwgc2xhdmVfY3J0Yyk7CisKKwlXQVJO
X09OKCFzbGF2ZV9jcnRjIHx8ICFuZXdfc2xhdmVfY3J0Y19zdGF0ZSB8fAorCQkhb2xkX3NsYXZl
X2NydGNfc3RhdGUpOworCisJRFJNX0RFQlVHX0tNUygiVXBkYXRpbmcgVHJhbnNjb2RlciBQb3J0
IFN5bmMgTWFzdGVyIENSVEMgPSAlZCAlcyBhbmQgU2xhdmUgQ1JUQyAlZCAlc1xuIiwKKwkJICAg
ICAgY3J0Yy0+YmFzZS5iYXNlLmlkLCBjcnRjLT5iYXNlLm5hbWUsIHNsYXZlX2NydGMtPmJhc2Uu
YmFzZS5pZCwKKwkJICAgICAgc2xhdmVfY3J0Yy0+YmFzZS5uYW1lKTsKKworCS8qIEVuYWJsZSBz
ZXEgZm9yIHNsYXZlIHdpdGggd2l0aCBEUF9UUF9DVEwgbGVmdCBJZGxlIHVudGlsIHRoZQorCSAq
IG1hc3RlciBpcyByZWFkeQorCSAqLworCWludGVsX2NydGNfZW5hYmxlX3RyYW5zX3BvcnRfc3lu
YyhzbGF2ZV9jcnRjLAorCQkJCQkgIHN0YXRlLAorCQkJCQkgIG5ld19zbGF2ZV9jcnRjX3N0YXRl
KTsKKworCS8qIEVuYWJsZSBzZXEgZm9yIG1hc3RlciB3aXRoIHdpdGggRFBfVFBfQ1RMIGxlZnQg
SWRsZSAqLworCWludGVsX2NydGNfZW5hYmxlX3RyYW5zX3BvcnRfc3luYyhjcnRjLAorCQkJCQkg
IHN0YXRlLAorCQkJCQkgIG5ld19jcnRjX3N0YXRlKTsKKworCS8qIFNldCBTbGF2ZSdzIERQX1RQ
X0NUTCB0byBOb3JtYWwgKi8KKwlpbnRlbF9zZXRfZHBfdHBfY3RsX25vcm1hbChzbGF2ZV9jcnRj
LAorCQkJCSAgIHN0YXRlKTsKKworCS8qIFNldCBNYXN0ZXIncyBEUF9UUF9DVEwgVG8gTm9ybWFs
ICovCisJdXNsZWVwX3JhbmdlKDIwMCwgNDAwKTsKKwlpbnRlbF9zZXRfZHBfdHBfY3RsX25vcm1h
bChjcnRjLAorCQkJCSAgIHN0YXRlKTsKKworCS8qIE5vdyBkbyB0aGUgcG9zdCBjcnRjIGVuYWJs
ZSBmb3IgYWxsIG1hc3RlciBhbmQgc2xhdmVzICovCisJaW50ZWxfcG9zdF9jcnRjX2VuYWJsZV91
cGRhdGVzKHNsYXZlX2NydGMsCisJCQkJICAgICAgIHN0YXRlLAorCQkJCSAgICAgICBuZXdfc2xh
dmVfY3J0Y19zdGF0ZSwKKwkJCQkgICAgICAgb2xkX3NsYXZlX2NydGNfc3RhdGUpOworCWludGVs
X3Bvc3RfY3J0Y19lbmFibGVfdXBkYXRlcyhjcnRjLAorCQkJCSAgICAgICBzdGF0ZSwKKwkJCQkg
ICAgICAgbmV3X2NydGNfc3RhdGUsCisJCQkJICAgICAgIG9sZF9jcnRjX3N0YXRlKTsKK30KKwog
c3RhdGljIHZvaWQgc2tsX2NvbW1pdF9tb2Rlc2V0X2VuYWJsZXMoc3RydWN0IGludGVsX2F0b21p
Y19zdGF0ZSAqc3RhdGUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0g
dG9faTkxNShzdGF0ZS0+YmFzZS5kZXYpOwpAQCAtMTQwNTUsNiArMTQxNjMsNyBAQCBzdGF0aWMg
dm9pZCBza2xfY29tbWl0X21vZGVzZXRfZW5hYmxlcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRl
ICpzdGF0ZSkKIAkJZm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNy
dGMsIG9sZF9jcnRjX3N0YXRlLCBuZXdfY3J0Y19zdGF0ZSwgaSkgewogCQkJYm9vbCB2Ymxfd2Fp
dCA9IGZhbHNlOwogCQkJdW5zaWduZWQgaW50IGNtYXNrID0gZHJtX2NydGNfbWFzaygmY3J0Yy0+
YmFzZSk7CisJCQlib29sIG1vZGVzZXQgPSBuZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKTsK
IAogCQkJcGlwZSA9IGNydGMtPnBpcGU7CiAKQEAgLTE0MDc3LDEyICsxNDE4NiwyMiBAQCBzdGF0
aWMgdm9pZCBza2xfY29tbWl0X21vZGVzZXRfZW5hYmxlcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0
YXRlICpzdGF0ZSkKIAkJCSAqLwogCQkJaWYgKCFza2xfZGRiX2VudHJ5X2VxdWFsKCZuZXdfY3J0
Y19zdGF0ZS0+d20uc2tsLmRkYiwKIAkJCQkJCSAmb2xkX2NydGNfc3RhdGUtPndtLnNrbC5kZGIp
ICYmCi0JCQkgICAgIW5ld19jcnRjX3N0YXRlLT5iYXNlLmFjdGl2ZV9jaGFuZ2VkICYmCisJCQkg
ICAgIW1vZGVzZXQgJiYKIAkJCSAgICBzdGF0ZS0+d21fcmVzdWx0cy5kaXJ0eV9waXBlcyAhPSB1
cGRhdGVkKQogCQkJCXZibF93YWl0ID0gdHJ1ZTsKIAotCQkJaW50ZWxfdXBkYXRlX2NydGMoY3J0
Yywgc3RhdGUsIG9sZF9jcnRjX3N0YXRlLAotCQkJCQkgIG5ld19jcnRjX3N0YXRlKTsKKwkJCWlm
IChtb2Rlc2V0ICYmIGlzX3RyYW5zX3BvcnRfc3luY19tb2RlKG5ld19jcnRjX3N0YXRlKSkgewor
CQkJCWlmIChpc190cmFuc19wb3J0X3N5bmNfbWFzdGVyKG5ld19jcnRjX3N0YXRlKSkKKwkJCQkJ
aW50ZWxfdXBkYXRlX3RyYW5zX3BvcnRfc3luY19jcnRjcyhjcnRjLAorCQkJCQkJCQkJICAgc3Rh
dGUsCisJCQkJCQkJCQkgICBvbGRfY3J0Y19zdGF0ZSwKKwkJCQkJCQkJCSAgIG5ld19jcnRjX3N0
YXRlKTsKKwkJCQllbHNlCisJCQkJCWNvbnRpbnVlOworCQkJfSBlbHNlIHsKKwkJCQlpbnRlbF91
cGRhdGVfY3J0YyhjcnRjLCBzdGF0ZSwgb2xkX2NydGNfc3RhdGUsCisJCQkJCQkgIG5ld19jcnRj
X3N0YXRlKTsKKwkJCX0KIAogCQkJaWYgKHZibF93YWl0KQogCQkJCWludGVsX3dhaXRfZm9yX3Zi
bGFuayhkZXZfcHJpdiwgcGlwZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXkuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheS5oCmluZGV4IGZhMTE1Njk0MmY4YS4uZTEyNzk3Nzk4MGVmIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuaApAQCAtMjcsNiArMjcsNyBA
QAogCiAjaW5jbHVkZSA8ZHJtL2RybV91dGlsLmg+CiAjaW5jbHVkZSA8ZHJtL2k5MTVfZHJtLmg+
CisjaW5jbHVkZSAiaW50ZWxfZHBfbGlua190cmFpbmluZy5oIgogCiBlbnVtIGxpbmtfbV9uX3Nl
dDsKIHN0cnVjdCBkcGxsOwpAQCAtNTQsNiArNTUsNyBAQCBzdHJ1Y3QgaW50ZWxfcGxhbmU7CiBz
dHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGU7CiBzdHJ1Y3QgaW50ZWxfcmVtYXBwZWRfaW5mbzsKIHN0
cnVjdCBpbnRlbF9yb3RhdGlvbl9pbmZvOworc3RydWN0IGludGVsX2NydGNfc3RhdGU7CiAKIGVu
dW0gaTkxNV9ncGlvIHsKIAlHUElPQSwKLS0gCjIuMTkuMQoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

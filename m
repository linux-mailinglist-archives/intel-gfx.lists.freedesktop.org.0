Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4FA161CD185
	for <lists+intel-gfx@lfdr.de>; Mon, 11 May 2020 08:01:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EF99989B9F;
	Mon, 11 May 2020 06:01:49 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 98E4689B9F
 for <intel-gfx@lists.freedesktop.org>; Mon, 11 May 2020 06:01:48 +0000 (UTC)
IronPort-SDR: 7F/QPBsxaf5r6dtmXHApOc2XnURPke/Ru/xkv2dSTQZ564GKVx4ut4Dfe+ct3WDiGZaQ3FtWIK
 8xPLWpV9dxDA==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by fmsmga101.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 10 May 2020 23:01:47 -0700
IronPort-SDR: n4ss02HrMXv1/zV4nWT1q+ZARGCMoZLeTsjqTzheGl8TZZiCwhfIrJyvVdngP0ctMk+5/MZ2pN
 O5kdi/E/a/9Q==
X-IronPort-AV: E=Sophos;i="5.73,378,1583222400"; d="scan'208";a="436577659"
Received: from amanna-mobl1.gar.corp.intel.com (HELO [10.215.120.34])
 ([10.215.120.34])
 by orsmga005-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 10 May 2020 23:01:44 -0700
To: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20200506131112.19581-1-animesh.manna@intel.com>
 <22382e1c-e5e1-f8c8-74f3-83bd6b649978@linux.intel.com>
From: "Manna, Animesh" <animesh.manna@intel.com>
Message-ID: <a8a54264-6fa0-1b21-a467-cd3a5e47761b@intel.com>
Date: Mon, 11 May 2020 11:31:41 +0530
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101
 Thunderbird/68.8.0
MIME-Version: 1.0
In-Reply-To: <22382e1c-e5e1-f8c8-74f3-83bd6b649978@linux.intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH v5] drm/i915/dsb: Pre allocate and late
 cleanup of cmd buffer
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>, Daniel Vetter <daniel.vetter@ffwll.ch>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDA4LTA1LTIwMjAgMTY6NDQsIE1hYXJ0ZW4gTGFua2hvcnN0IHdyb3RlOgo+IE9wIDA2LTA1
LTIwMjAgb20gMTU6MTEgc2NocmVlZiBBbmltZXNoIE1hbm5hOgo+PiBQcmUtYWxsb2NhdGUgY29t
bWFuZCBidWZmZXIgaW4gYXRvbWljX2NvbW1pdCB1c2luZyBpbnRlbF9kc2JfcHJlcGFyZQo+PiBm
dW5jdGlvbiB3aGljaCBhbHNvIGluY2x1ZGVzIHBpbm5pbmcgYW5kIG1hcCBpbiBjcHUgZG9tYWlu
Lgo+Pgo+PiBObyBjaGFuZ2UgaXMgZHNiIHdyaXRlL2NvbW1pdCBmdW5jdGlvbnMuCj4+Cj4+IE5v
dyBkc2IgZ2V0L3B1dCBmdW5jdGlvbiBpcyByZWZhY3RvcmVkIGFuZCBjdXJyZW50bHkgdXNlZCBv
bmx5IGZvcgo+PiByZWZlcmVuY2UgY291bnRpbmcuIEJlbG93IGRzYiBhcGkgYWRkZWQgdG8gZG8g
cmVzcGVjdGl2ZSBqb2IKPj4gbWVudGlvbmVkIGJlbG93Lgo+Pgo+PiBpbnRlbF9kc2JfcHJlcGFy
ZSAtIEFsbG9jYXRlLCBwaW4gYW5kIG1hcCB0aGUgYnVmZmVyLgo+PiBpbnRlbF9kc2JfY2xlYW51
cCAtIFVucGluIGFuZCByZWxlYXNlIHRoZSBnZW0gb2JqZWN0Lgo+Pgo+PiBSRkM6IEluaXRpYWwg
cGF0Y2ggZm9yIGRlc2lnbiByZXZpZXcuCj4+IHYyOiBpbmNsdWRlZCBfaW5pdCgpIHBhcnQgaW4g
X3ByZXBhcmUoKS4gW0RhbmllbCwgVmlsbGVdCj4+IHYzOiBkc2JfY2xlYW51cCBjYWxsZWQgYWZ0
ZXIgY2xlYW51cF9wbGFuZXMuIFtEYW5pZWxdCj4+IHY0OiBkc2Igc3RydWN0dXJlIGlzIG1vdmVk
IHRvIGludGVsX2NydGNfc3RhdGUgZnJvbSBpbnRlbF9jcnRjLiBbTWFhcnRlbl0KPj4gdjU6IGRz
YiBnZXQvcHV0L3JlZi1jb3VudCBtZWNoYW5pc20gcmVtb3ZlZC4gW01hYXJ0ZW5dCj4+Cj4+IENj
OiBNYWFydGVuIExhbmtob3JzdCA8bWFhcnRlbi5sYW5raG9yc3RAbGludXguaW50ZWwuY29tPgo+
PiBDYzogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KPj4g
Q2M6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBpbnRlbC5jb20+Cj4+IENjOiBEYW5pZWwgVmV0
dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgo+PiBBY2tlZC1ieTogRGFuaWVsIFZldHRlciA8
ZGFuaWVsLnZldHRlckBmZndsbC5jaD4KPj4gU2lnbmVkLW9mZi1ieTogQW5pbWVzaCBNYW5uYSA8
YW5pbWVzaC5tYW5uYUBpbnRlbC5jb20+Cj4+IC0tLQo+PiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfY29sb3IuYyAgICB8ICAyNyArKy0KPj4gICBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyAgfCAgNjAgKysrKy0KPj4gICAuLi4vZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmggICAgfCAgIDYgKy0KPj4gICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RzYi5jICAgICAgfCAyMDcgKysrKysrKysrLS0t
LS0tLS0tCj4+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kc2IuaCAgICAg
IHwgICA4ICstCj4+ICAgNSBmaWxlcyBjaGFuZ2VkLCAxNzggaW5zZXJ0aW9ucygrKSwgMTMwIGRl
bGV0aW9ucygtKQo+Pgo+PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9jb2xvci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jb2xv
ci5jCj4+IGluZGV4IDk4ZWNlOWNkN2NkZC4uZGJhODIwMTM2MTA2IDEwMDY0NAo+PiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NvbG9yLmMKPj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jb2xvci5jCj4+IEBAIC03MTcsNyArNzE3LDgg
QEAgc3RhdGljIHZvaWQgYmR3X2xvYWRfbHV0XzEwKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAo+
PiAgIHN0YXRpYyB2b2lkIGl2Yl9sb2FkX2x1dF9leHRfbWF4KHN0cnVjdCBpbnRlbF9jcnRjICpj
cnRjKQo+PiAgIHsKPj4gICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9f
aTkxNShjcnRjLT5iYXNlLmRldik7Cj4+IC0Jc3RydWN0IGludGVsX2RzYiAqZHNiID0gaW50ZWxf
ZHNiX2dldChjcnRjKTsKPj4gKwlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSA9
IHRvX2ludGVsX2NydGNfc3RhdGUoY3J0Yy0+YmFzZS5zdGF0ZSk7Cj4+ICsJc3RydWN0IGludGVs
X2RzYiAqZHNiID0gKHN0cnVjdCBpbnRlbF9kc2IgKikmY3J0Y19zdGF0ZS0+ZHNiOwo+PiAgIAll
bnVtIHBpcGUgcGlwZSA9IGNydGMtPnBpcGU7Cj4+ICAgCj4+ICAgCS8qIFByb2dyYW0gdGhlIG1h
eCByZWdpc3RlciB0byBjbGFtcCB2YWx1ZXMgPiAxLjAuICovCj4gUGxlYXNlIHBhc3MgdGhlIGNy
dGNfc3RhdGUsIGFzIGNydGMtPnN0YXRlIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4KCkkg
YW0gbm90IHN1cmUgd2h5IGl2Yl9sb2FkX2x1dF9leHRfbWF4KCkgaXMgdGFraW5nIGludGVsX2Ny
dGMgYXMgYXJndW1lbnQgd2hlcmUgb3RoZXIgbG9hZC1sdXQgZnVuY3Rpb24gdGFrZSBjcnRjLXN0
YXRlLiBNYXliZSBpdCBpcyBkb25lIGZvciBvbGRlciBwbGF0Zm9ybS4KCj4+IEBAIC03MzgsOCAr
NzM5LDYgQEAgc3RhdGljIHZvaWQgaXZiX2xvYWRfbHV0X2V4dF9tYXgoc3RydWN0IGludGVsX2Ny
dGMgKmNydGMpCj4+ICAgCQlpbnRlbF9kc2JfcmVnX3dyaXRlKGRzYiwgUFJFQ19QQUxfRVhUMl9H
Q19NQVgocGlwZSwgMiksCj4+ICAgCQkJCSAgICAxIDw8IDE2KTsKPj4gICAJfQo+PiAtCj4+IC0J
aW50ZWxfZHNiX3B1dChkc2IpOwo+PiAgIH0KPj4gICAKPj4gICBzdGF0aWMgdm9pZCBpdmJfbG9h
ZF9sdXRzKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQo+PiBAQCAt
OTAwLDE0ICs4OTksMTMgQEAgaWNsX2xvYWRfZ2NtYXgoY29uc3Qgc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKmNydGNfc3RhdGUsCj4+ICAgCSAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2NvbG9yX2x1
dCAqY29sb3IpCj4+ICAgewo+PiAgIAlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVs
X2NydGMoY3J0Y19zdGF0ZS0+dWFwaS5jcnRjKTsKPj4gLQlzdHJ1Y3QgaW50ZWxfZHNiICpkc2Ig
PSBpbnRlbF9kc2JfZ2V0KGNydGMpOwo+PiArCXN0cnVjdCBpbnRlbF9kc2IgKmRzYiA9IChzdHJ1
Y3QgaW50ZWxfZHNiICopJmNydGNfc3RhdGUtPmRzYjsKPiBXaHkgdGhlIGNhc3Q/IFVuY29uc3Rp
ZnkgY3J0Y19zdGF0ZSBhcyBpdCdzIG9idmlvdXNseSBub3QgY29uc3QgYW55IG1vcmUuCgpEc2Ig
Y21kIGJ1ZmZlciBmaWxsaW5nIGlzIGRvbmUgaW4gbG9hZF9sdXQgZnVuY3Rpb24sIHNvIG5lZWQg
dG8gdW5jb25zdGlmeS4gT3RoZXJ3aXNlIHRocm93aW5nIHdhcm5pbmcgZHVyaW5nIGNvbXBpbGF0
aW9uLgoKPgo+PiAgIAllbnVtIHBpcGUgcGlwZSA9IGNydGMtPnBpcGU7Cj4+ICAgCj4+ICAgCS8q
IEZJWE1FIExVVCBlbnRyaWVzIGFyZSAxNiBiaXQgb25seSwgc28gd2UgY2FuIHByb2cgMHhGRkZG
IG1heCAqLwo+PiAgIAlpbnRlbF9kc2JfcmVnX3dyaXRlKGRzYiwgUFJFQ19QQUxfR0NfTUFYKHBp
cGUsIDApLCBjb2xvci0+cmVkKTsKPj4gICAJaW50ZWxfZHNiX3JlZ193cml0ZShkc2IsIFBSRUNf
UEFMX0dDX01BWChwaXBlLCAxKSwgY29sb3ItPmdyZWVuKTsKPj4gICAJaW50ZWxfZHNiX3JlZ193
cml0ZShkc2IsIFBSRUNfUEFMX0dDX01BWChwaXBlLCAyKSwgY29sb3ItPmJsdWUpOwo+PiAtCWlu
dGVsX2RzYl9wdXQoZHNiKTsKPj4gICB9Cj4+ICAgCj4+ICAgc3RhdGljIHZvaWQKPj4gQEAgLTkx
Niw3ICs5MTQsNyBAQCBpY2xfcHJvZ3JhbV9nYW1tYV9zdXBlcmZpbmVfc2VnbWVudChjb25zdCBz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKPj4gICAJc3RydWN0IGludGVsX2Ny
dGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7Cj4+ICAgCWNv
bnN0IHN0cnVjdCBkcm1fcHJvcGVydHlfYmxvYiAqYmxvYiA9IGNydGNfc3RhdGUtPmh3LmdhbW1h
X2x1dDsKPj4gICAJY29uc3Qgc3RydWN0IGRybV9jb2xvcl9sdXQgKmx1dCA9IGJsb2ItPmRhdGE7
Cj4+IC0Jc3RydWN0IGludGVsX2RzYiAqZHNiID0gaW50ZWxfZHNiX2dldChjcnRjKTsKPj4gKwlz
dHJ1Y3QgaW50ZWxfZHNiICpkc2IgPSAoc3RydWN0IGludGVsX2RzYiAqKSZjcnRjX3N0YXRlLT5k
c2I7Cj4gU2FtZS4KCk5lZWQgdG8gdW5jb25zdGlmeSB0byBmaWxsIHRoZSBkc2IgYnVmZmVyLgoK
Pj4gICAJZW51bSBwaXBlIHBpcGUgPSBjcnRjLT5waXBlOwo+PiAgIAlpbnQgaTsKPj4gICAKPj4g
QEAgLTkzOCw4ICs5MzYsNiBAQCBpY2xfcHJvZ3JhbV9nYW1tYV9zdXBlcmZpbmVfc2VnbWVudChj
b25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKPj4gICAJCWludGVsX2Rz
Yl9pbmRleGVkX3JlZ193cml0ZShkc2IsIFBSRUNfUEFMX01VTFRJX1NFR19EQVRBKHBpcGUpLAo+
PiAgIAkJCQkJICAgIGlsa19sdXRfMTJwNF91ZHcoZW50cnkpKTsKPj4gICAJfQo+PiAtCj4+IC0J
aW50ZWxfZHNiX3B1dChkc2IpOwo+PiAgIH0KPj4gICAKPj4gICBzdGF0aWMgdm9pZAo+PiBAQCAt
OTQ5LDcgKzk0NSw3IEBAIGljbF9wcm9ncmFtX2dhbW1hX211bHRpX3NlZ21lbnQoY29uc3Qgc3Ry
dWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCj4+ICAgCWNvbnN0IHN0cnVjdCBkcm1f
cHJvcGVydHlfYmxvYiAqYmxvYiA9IGNydGNfc3RhdGUtPmh3LmdhbW1hX2x1dDsKPj4gICAJY29u
c3Qgc3RydWN0IGRybV9jb2xvcl9sdXQgKmx1dCA9IGJsb2ItPmRhdGE7Cj4+ICAgCWNvbnN0IHN0
cnVjdCBkcm1fY29sb3JfbHV0ICplbnRyeTsKPj4gLQlzdHJ1Y3QgaW50ZWxfZHNiICpkc2IgPSBp
bnRlbF9kc2JfZ2V0KGNydGMpOwo+PiArCXN0cnVjdCBpbnRlbF9kc2IgKmRzYiA9IChzdHJ1Y3Qg
aW50ZWxfZHNiICopJmNydGNfc3RhdGUtPmRzYjsKPj4gICAJZW51bSBwaXBlIHBpcGUgPSBjcnRj
LT5waXBlOwo+PiAgIAlpbnQgaTsKPj4gICAKPj4gQEAgLTk5NiwxNCArOTkyLDIyIEBAIGljbF9w
cm9ncmFtX2dhbW1hX211bHRpX3NlZ21lbnQoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUg
KmNydGNfc3RhdGUpCj4+ICAgCWVudHJ5ID0gJmx1dFsyNTYgKiA4ICogMTI4XTsKPj4gICAJaWNs
X2xvYWRfZ2NtYXgoY3J0Y19zdGF0ZSwgZW50cnkpOwo+PiAgIAlpdmJfbG9hZF9sdXRfZXh0X21h
eChjcnRjKTsKPj4gLQlpbnRlbF9kc2JfcHV0KGRzYik7Cj4+ICAgfQo+PiAgIAo+PiAgIHN0YXRp
YyB2b2lkIGljbF9sb2FkX2x1dHMoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNf
c3RhdGUpCj4+ICAgewo+PiAgIAljb25zdCBzdHJ1Y3QgZHJtX3Byb3BlcnR5X2Jsb2IgKmdhbW1h
X2x1dCA9IGNydGNfc3RhdGUtPmh3LmdhbW1hX2x1dDsKPj4gICAJc3RydWN0IGludGVsX2NydGMg
KmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7Cj4+IC0Jc3RydWN0
IGludGVsX2RzYiAqZHNiID0gaW50ZWxfZHNiX2dldChjcnRjKTsKPj4gKwlzdHJ1Y3QgaW50ZWxf
ZHNiICpkc2IgPSAoc3RydWN0IGludGVsX2RzYiAqKSZjcnRjX3N0YXRlLT5kc2I7Cj4+ICsKPj4g
KwkvKgo+PiArCSAqIFRPRE86IEN1cnJlbnRseSBkc2IgYnVmZmVyIGZpbGxpbmcgaXMgZG9uZSBp
biBsb2FkX2x1dCgpIHdoaWNoCj4+ICsJICogY2FuIGJlIGRvbmUgbXVjaCBlYXJsaWVyLCBsaWtl
IGluaXRpYWwgc3RhZ2Ugb2YgYXRvbWljX2NvbW1pdCgpLgo+PiArCSAqIEFzIGN1cnJlbnRseSBy
ZXBsYWNpbmcgdGhlIG1taW8td3JpdGUgd2l0aCBkc2Itd3JpdGUgc28gdGhlIHNhbWUKPj4gKwkg
KiBsb2FkX2x1dCgpIGFwaSBpcyB1c2VkIGZvciBkc2IgYnVmZmVyIGNyZWF0aW9uIHdoaWNoIG1h
eSBub3QKPj4gKwkgKiBmaXQgaW4gaW5pdGlhbCBzdGFnZS4gTmVlZCB0byBjcmVhdGUgYSBzZXBh
cmF0ZSBpbnRlcmZhY2UgYW5kCj4+ICsJICogYSBkaWZmZXJlbnQgcGF0aCBpbiBjb2xvciBmcmFt
ZXdvcmsgd2hpbGUgZGVhbGluZyB3aXRoIGRzYi4KPj4gKwkgKi8KPj4gICAKPj4gICAJaWYgKGNy
dGNfc3RhdGUtPmh3LmRlZ2FtbWFfbHV0KQo+PiAgIAkJZ2xrX2xvYWRfZGVnYW1tYV9sdXQoY3J0
Y19zdGF0ZSk7Cj4+IEBAIC0xMDIyLDcgKzEwMjYsNiBAQCBzdGF0aWMgdm9pZCBpY2xfbG9hZF9s
dXRzKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQo+PiAgIAl9Cj4+
ICAgCj4+ICAgCWludGVsX2RzYl9jb21taXQoZHNiKTsKPj4gLQlpbnRlbF9kc2JfcHV0KGRzYik7
Cj4+ICAgfQo+PiAgIAo+PiAgIHN0YXRpYyB1MzIgY2h2X2NnbV9kZWdhbW1hX2xkdyhjb25zdCBz
dHJ1Y3QgZHJtX2NvbG9yX2x1dCAqY29sb3IpCj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGlzcGxheS5jCj4+IGluZGV4IGZkNmQ2M2IwMzQ4OS4uMDc2NzA4OTNjMWFl
IDEwMDY0NAo+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXkuYwo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXku
Ywo+PiBAQCAtMTQ4NzMsOCArMTQ4NzMsMjggQEAgc3RhdGljIGludCBpbnRlbF9hdG9taWNfY2hl
Y2soc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPj4gICAKPj4gICBzdGF0aWMgaW50IGludGVsX2F0
b21pY19wcmVwYXJlX2NvbW1pdChzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKPj4g
ICB7Cj4+IC0JcmV0dXJuIGRybV9hdG9taWNfaGVscGVyX3ByZXBhcmVfcGxhbmVzKHN0YXRlLT5i
YXNlLmRldiwKPj4gLQkJCQkJCSZzdGF0ZS0+YmFzZSk7Cj4+ICsJc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKmNydGNfc3RhdGU7Cj4+ICsJc3RydWN0IGludGVsX2NydGMgKmNydGM7Cj4+ICsJaW50
IGksIHJldDsKPj4gKwo+PiArCXJldCA9IGRybV9hdG9taWNfaGVscGVyX3ByZXBhcmVfcGxhbmVz
KHN0YXRlLT5iYXNlLmRldiwgJnN0YXRlLT5iYXNlKTsKPj4gKwlpZiAocmV0IDwgMCkKPj4gKwkJ
cmV0dXJuIHJldDsKPj4gKwo+PiArCS8qCj4+ICsJICogSW4gY2FzZSBvZiBEU0IgYnVmZmVyIGNy
ZWF0aW9uIGZhaWx1cmUgcmVnaXN0ZXIgcHJvZ3JhbW1pbmcgd2lsbCBiZQo+PiArCSAqIGRvbmUg
YnkgbW1pbyBhbmQgZXJyb25lb3VzIHBhdGggd2lsbCBiZSBoYW5kbGVkIGJ5IGRzcC13cml0ZSBh
cGkuCj4+ICsJICovCj4+ICsJZm9yX2VhY2hfbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUs
IGNydGMsIGNydGNfc3RhdGUsIGkpIHsKPj4gKwkJYm9vbCBtb2RlX2NoYW5nZWQgPSBuZWVkc19t
b2Rlc2V0KGNydGNfc3RhdGUpOwo+PiArCj4+ICsJCWlmIChtb2RlX2NoYW5nZWQgfHwgY3J0Y19z
dGF0ZS0+dXBkYXRlX3BpcGUgfHwKPj4gKwkJICAgIGNydGNfc3RhdGUtPnVhcGkuY29sb3JfbWdt
dF9jaGFuZ2VkKSB7Cj4+ICsJCQlpbnRlbF9kc2JfcHJlcGFyZShjcnRjX3N0YXRlKTsKPj4gKwkJ
fQo+PiArCX0KPj4gKwo+PiArCXJldHVybiAwOwo+PiAgIH0KPj4gICAKPj4gICB1MzIgaW50ZWxf
Y3J0Y19nZXRfdmJsYW5rX2NvdW50ZXIoc3RydWN0IGludGVsX2NydGMgKmNydGMpCj4+IEBAIC0x
NTMyNywxNSArMTUzNDcsMzkgQEAgc3RhdGljIHZvaWQgaW50ZWxfYXRvbWljX2NvbW1pdF9mZW5j
ZV93YWl0KHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKmludGVsX3N0YXQKPj4gICAJCSAgICAm
d2FpdF9yZXNldCk7Cj4+ICAgfQo+PiAgIAo+PiArc3RhdGljIHZvaWQgaW50ZWxfY2xlYW51cF9k
c2JzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQo+PiArewo+PiArCXN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLCAqb2xkX2NydGNfc3RhdGUsICpuZXdfY3J0Y19z
dGF0ZTsKPj4gKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YzsKPj4gKwlpbnQgaTsKPj4gKwo+PiAr
CWZvcl9lYWNoX29sZG5ld19pbnRlbF9jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0
Y19zdGF0ZSwgbmV3X2NydGNfc3RhdGUsIGkpIHsKPj4gKwkJYm9vbCBtb2RlX2NoYW5nZWQ7Cj4+
ICsKPj4gKwkJaWYgKG9sZF9jcnRjX3N0YXRlID09IGNydGMtPmNvbmZpZykKPj4gKwkJCWNydGNf
c3RhdGUgPSBuZXdfY3J0Y19zdGF0ZTsKPj4gKwkJZWxzZQo+PiArCQkJY3J0Y19zdGF0ZSA9IG9s
ZF9jcnRjX3N0YXRlOwo+PiArCj4+ICsJCW1vZGVfY2hhbmdlZCA9IG5lZWRzX21vZGVzZXQoY3J0
Y19zdGF0ZSk7Cj4+ICsJCWlmIChtb2RlX2NoYW5nZWQgfHwgY3J0Y19zdGF0ZS0+dXBkYXRlX3Bp
cGUgfHwKPj4gKwkJICAgIGNydGNfc3RhdGUtPnVhcGkuY29sb3JfbWdtdF9jaGFuZ2VkKSB7Cj4+
ICsJCQlpbnRlbF9kc2JfY2xlYW51cChjcnRjX3N0YXRlKTsKPiBKdXN0IGNhbGwgdGhlIGNsZWFu
dXAgZnVuY3Rpb24gdW5jb25kaXRpb25hbGx5IGhlcmUsIHRoZSBkc2ItPnZtYSA9IE5VTEwgY2hl
Y2sgaXMgZW5vdWdoLgoKT2suCgo+PiArCQl9Cj4+ICsJfQo+PiArfQo+PiArCj4+ICAgc3RhdGlj
IHZvaWQgaW50ZWxfYXRvbWljX2NsZWFudXBfd29yayhzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmsp
Cj4+ICAgewo+PiAtCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSA9Cj4+IC0JCWNvbnRh
aW5lcl9vZih3b3JrLCBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSwgY29tbWl0X3dvcmspOwo+PiAt
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShzdGF0ZS0+ZGV2KTsKPj4g
KwlzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSA9Cj4+ICsJCWNvbnRhaW5lcl9vZih3
b3JrLCBzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlLCBiYXNlLmNvbW1pdF93b3JrKTsKPj4gKwlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUoc3RhdGUtPmJhc2UuZGV2KTsK
Pj4gICAKPj4gLQlkcm1fYXRvbWljX2hlbHBlcl9jbGVhbnVwX3BsYW5lcygmaTkxNS0+ZHJtLCBz
dGF0ZSk7Cj4+IC0JZHJtX2F0b21pY19oZWxwZXJfY29tbWl0X2NsZWFudXBfZG9uZShzdGF0ZSk7
Cj4+IC0JZHJtX2F0b21pY19zdGF0ZV9wdXQoc3RhdGUpOwo+PiArCWlmIChIQVNfRFNCKGk5MTUp
KQo+PiArCQlpbnRlbF9jbGVhbnVwX2RzYnMoc3RhdGUpOwo+PiArCWRybV9hdG9taWNfaGVscGVy
X2NsZWFudXBfcGxhbmVzKCZpOTE1LT5kcm0sICZzdGF0ZS0+YmFzZSk7Cj4+ICsJZHJtX2F0b21p
Y19oZWxwZXJfY29tbWl0X2NsZWFudXBfZG9uZSgmc3RhdGUtPmJhc2UpOwo+PiArCWRybV9hdG9t
aWNfc3RhdGVfcHV0KCZzdGF0ZS0+YmFzZSk7Cj4+ICAgCj4+ICAgCWludGVsX2F0b21pY19oZWxw
ZXJfZnJlZV9zdGF0ZShpOTE1KTsKPj4gICB9Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCj4+IGluZGV4IDk0ODg0NDllNGI5NC4u
ODA1Y2E3NzRlMTQ2IDEwMDY0NAo+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAo+PiBAQCAtMTA3OCw2ICsxMDc4LDkgQEAgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgewo+PiAgIAo+PiAgIAkvKiBPbmx5IHZhbGlkIG9uIFRHTCsgKi8K
Pj4gICAJZW51bSB0cmFuc2NvZGVyIG1zdF9tYXN0ZXJfdHJhbnNjb2RlcjsKPj4gKwo+PiArCS8q
IEZvciBEU0IgcmVsYXRlZCBpbmZvICovCj4+ICsJc3RydWN0IGludGVsX2RzYiBkc2I7Cj4+ICAg
fTsKPj4gICAKPj4gICBlbnVtIGludGVsX3BpcGVfY3JjX3NvdXJjZSB7Cj4+IEBAIC0xMTQ3LDkg
KzExNTAsNiBAQCBzdHJ1Y3QgaW50ZWxfY3J0YyB7Cj4+ICAgCS8qIHNjYWxlcnMgYXZhaWxhYmxl
IG9uIHRoaXMgY3J0YyAqLwo+PiAgIAlpbnQgbnVtX3NjYWxlcnM7Cj4+ICAgCj4+IC0JLyogcGVy
IHBpcGUgRFNCIHJlbGF0ZWQgaW5mbyAqLwo+PiAtCXN0cnVjdCBpbnRlbF9kc2IgZHNiOwo+PiAt
Cj4+ICAgI2lmZGVmIENPTkZJR19ERUJVR19GUwo+PiAgIAlzdHJ1Y3QgaW50ZWxfcGlwZV9jcmMg
cGlwZV9jcmM7Cj4+ICAgI2VuZGlmCj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2RzYi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kc2IuYwo+PiBpbmRleCAyOWZlYzZhOTJkMTcuLjI0N2ZkNTY0ZDM5NCAxMDA2NDQKPj4gLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kc2IuYwo+PiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RzYi5jCj4+IEBAIC0zNCwxOCArMzQsMjIg
QEAKPj4gICAjZGVmaW5lIERTQl9CWVRFX0VOX1NISUZUCQkyMAo+PiAgICNkZWZpbmUgRFNCX1JF
R19WQUxVRV9NQVNLCQkweGZmZmZmCj4+ICAgCj4+IC1zdGF0aWMgYm9vbCBpc19kc2JfYnVzeShz
dHJ1Y3QgaW50ZWxfZHNiICpkc2IpCj4+ICtzdGF0aWMgaW5saW5lIGJvb2wgaXNfZHNiX2J1c3ko
c3RydWN0IGludGVsX2RzYiAqZHNiKQo+PiAgIHsKPj4gLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0
YyA9IGNvbnRhaW5lcl9vZihkc2IsIHR5cGVvZigqY3J0YyksIGRzYik7Cj4+ICsJc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUgPQo+PiArCQljb250YWluZXJfb2YoZHNiLCB0eXBl
b2YoKmNydGNfc3RhdGUpLCBkc2IpOwo+PiArCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9f
aW50ZWxfY3J0YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOwo+PiAgIAlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMtPmJhc2UuZGV2KTsKPj4gICAJZW51bSBw
aXBlIHBpcGUgPSBjcnRjLT5waXBlOwo+PiAgIAo+PiAgIAlyZXR1cm4gRFNCX1NUQVRVUyAmIGlu
dGVsX2RlX3JlYWQoZGV2X3ByaXYsIERTQl9DVFJMKHBpcGUsIGRzYi0+aWQpKTsKPj4gICB9Cj4+
ICAgCj4+IC1zdGF0aWMgYm9vbCBpbnRlbF9kc2JfZW5hYmxlX2VuZ2luZShzdHJ1Y3QgaW50ZWxf
ZHNiICpkc2IpCj4+ICtzdGF0aWMgaW5saW5lIGJvb2wgaW50ZWxfZHNiX2VuYWJsZV9lbmdpbmUo
c3RydWN0IGludGVsX2RzYiAqZHNiKQo+PiAgIHsKPj4gLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0
YyA9IGNvbnRhaW5lcl9vZihkc2IsIHR5cGVvZigqY3J0YyksIGRzYik7Cj4+ICsJc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUgPQo+PiArCQljb250YWluZXJfb2YoZHNiLCB0eXBl
b2YoKmNydGNfc3RhdGUpLCBkc2IpOwo+PiArCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9f
aW50ZWxfY3J0YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOwo+PiAgIAlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMtPmJhc2UuZGV2KTsKPj4gICAJZW51bSBw
aXBlIHBpcGUgPSBjcnRjLT5waXBlOwo+PiAgIAl1MzIgZHNiX2N0cmw7Cj4+IEBAIC02Myw5ICs2
NywxMSBAQCBzdGF0aWMgYm9vbCBpbnRlbF9kc2JfZW5hYmxlX2VuZ2luZShzdHJ1Y3QgaW50ZWxf
ZHNiICpkc2IpCj4+ICAgCXJldHVybiB0cnVlOwo+PiAgIH0KPj4gICAKPj4gLXN0YXRpYyBib29s
IGludGVsX2RzYl9kaXNhYmxlX2VuZ2luZShzdHJ1Y3QgaW50ZWxfZHNiICpkc2IpCj4+ICtzdGF0
aWMgaW5saW5lIGJvb2wgaW50ZWxfZHNiX2Rpc2FibGVfZW5naW5lKHN0cnVjdCBpbnRlbF9kc2Ig
KmRzYikKPj4gICB7Cj4+IC0Jc3RydWN0IGludGVsX2NydGMgKmNydGMgPSBjb250YWluZXJfb2Yo
ZHNiLCB0eXBlb2YoKmNydGMpLCBkc2IpOwo+PiArCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpj
cnRjX3N0YXRlID0KPj4gKwkJY29udGFpbmVyX29mKGRzYiwgdHlwZW9mKCpjcnRjX3N0YXRlKSwg
ZHNiKTsKPj4gKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19z
dGF0ZS0+dWFwaS5jcnRjKTsKPj4gICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
ID0gdG9faTkxNShjcnRjLT5iYXNlLmRldik7Cj4+ICAgCWVudW0gcGlwZSBwaXBlID0gY3J0Yy0+
cGlwZTsKPj4gICAJdTMyIGRzYl9jdHJsOwo+PiBAQCAtODMsOTkgKzg5LDYgQEAgc3RhdGljIGJv
b2wgaW50ZWxfZHNiX2Rpc2FibGVfZW5naW5lKHN0cnVjdCBpbnRlbF9kc2IgKmRzYikKPj4gICAJ
cmV0dXJuIHRydWU7Cj4+ICAgfQo+PiAgIAo+PiAtLyoqCj4+IC0gKiBpbnRlbF9kc2JfZ2V0KCkg
LSBBbGxvY2F0ZSBEU0IgY29udGV4dCBhbmQgcmV0dXJuIGEgRFNCIGluc3RhbmNlLgo+PiAtICog
QGNydGM6IGludGVsX2NydGMgc3RydWN0dXJlIHRvIGdldCBwaXBlIGluZm8uCj4+IC0gKgo+PiAt
ICogVGhpcyBmdW5jdGlvbiBwcm92aWRlcyBoYW5kbGUgb2YgYSBEU0IgaW5zdGFuY2UsIGZvciB0
aGUgZnVydGhlciBEU0IKPj4gLSAqIG9wZXJhdGlvbnMuCj4+IC0gKgo+PiAtICogUmV0dXJuczog
YWRkcmVzcyBvZiBJbnRlbF9kc2IgaW5zdGFuY2UgcmVxdWVzdGVkIGZvci4KPj4gLSAqIEZhaWx1
cmU6IFJldHVybnMgdGhlIHNhbWUgRFNCIGluc3RhbmNlLCBidXQgd2l0aG91dCBhIGNvbW1hbmQg
YnVmZmVyLgo+PiAtICovCj4+IC0KPj4gLXN0cnVjdCBpbnRlbF9kc2IgKgo+PiAtaW50ZWxfZHNi
X2dldChzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YykKPj4gLXsKPj4gLQlzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZGV2ID0gY3J0Yy0+YmFzZS5kZXY7Cj4+IC0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUgPSB0b19pOTE1KGRldik7Cj4+IC0Jc3RydWN0IGludGVsX2RzYiAqZHNiID0gJmNydGMtPmRz
YjsKPj4gLQlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwo+PiAtCXN0cnVjdCBpOTE1
X3ZtYSAqdm1hOwo+PiAtCXUzMiAqYnVmOwo+PiAtCWludGVsX3dha2VyZWZfdCB3YWtlcmVmOwo+
PiAtCj4+IC0JaWYgKCFIQVNfRFNCKGk5MTUpKQo+PiAtCQlyZXR1cm4gZHNiOwo+PiAtCj4+IC0J
aWYgKGRzYi0+cmVmY291bnQrKyAhPSAwKQo+PiAtCQlyZXR1cm4gZHNiOwo+PiAtCj4+IC0Jd2Fr
ZXJlZiA9IGludGVsX3J1bnRpbWVfcG1fZ2V0KCZpOTE1LT5ydW50aW1lX3BtKTsKPj4gLQo+PiAt
CW9iaiA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfaW50ZXJuYWwoaTkxNSwgRFNCX0JVRl9TSVpF
KTsKPj4gLQlpZiAoSVNfRVJSKG9iaikpIHsKPj4gLQkJZHJtX2VycigmaTkxNS0+ZHJtLCAiR2Vt
IG9iamVjdCBjcmVhdGlvbiBmYWlsZWRcbiIpOwo+PiAtCQlnb3RvIG91dDsKPj4gLQl9Cj4+IC0K
Pj4gLQl2bWEgPSBpOTE1X2dlbV9vYmplY3RfZ2d0dF9waW4ob2JqLCBOVUxMLCAwLCAwLCAwKTsK
Pj4gLQlpZiAoSVNfRVJSKHZtYSkpIHsKPj4gLQkJZHJtX2VycigmaTkxNS0+ZHJtLCAiVm1hIGNy
ZWF0aW9uIGZhaWxlZFxuIik7Cj4+IC0JCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKPj4gLQkJ
Z290byBvdXQ7Cj4+IC0JfQo+PiAtCj4+IC0JYnVmID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9tYXAo
dm1hLT5vYmosIEk5MTVfTUFQX1dDKTsKPj4gLQlpZiAoSVNfRVJSKGJ1ZikpIHsKPj4gLQkJZHJt
X2VycigmaTkxNS0+ZHJtLCAiQ29tbWFuZCBidWZmZXIgY3JlYXRpb24gZmFpbGVkXG4iKTsKPj4g
LQkJZ290byBvdXQ7Cj4+IC0JfQo+PiAtCj4+IC0JZHNiLT5pZCA9IERTQjE7Cj4+IC0JZHNiLT52
bWEgPSB2bWE7Cj4+IC0JZHNiLT5jbWRfYnVmID0gYnVmOwo+PiAtCj4+IC1vdXQ6Cj4+IC0JLyoK
Pj4gLQkgKiBPbiBlcnJvciBkc2ItPmNtZF9idWYgd2lsbCBjb250aW51ZSB0byBiZSBOVUxMLCBt
YWtpbmcgdGhlIHdyaXRlcwo+PiAtCSAqIHBhc3MtdGhyb3VnaC4gTGVhdmUgdGhlIGRhbmdsaW5n
IHJlZiB0byBiZSByZW1vdmVkIGxhdGVyIGJ5IHRoZQo+PiAtCSAqIGNvcnJlc3BvbmRpbmcgaW50
ZWxfZHNiX3B1dCgpOiB0aGUgaW1wb3J0YW50IGVycm9yIG1lc3NhZ2Ugd2lsbAo+PiAtCSAqIGFs
cmVhZHkgYmUgbG9nZ2VkIGFib3ZlLgo+PiAtCSAqLwo+PiAtCj4+IC0JaW50ZWxfcnVudGltZV9w
bV9wdXQoJmk5MTUtPnJ1bnRpbWVfcG0sIHdha2VyZWYpOwo+PiAtCj4+IC0JcmV0dXJuIGRzYjsK
Pj4gLX0KPj4gLQo+PiAtLyoqCj4+IC0gKiBpbnRlbF9kc2JfcHV0KCkgLSBUbyBkZXN0cm95IERT
QiBjb250ZXh0Lgo+PiAtICogQGRzYjogaW50ZWxfZHNiIHN0cnVjdHVyZS4KPj4gLSAqCj4+IC0g
KiBUaGlzIGZ1bmN0aW9uIGRlc3Ryb3lzIHRoZSBEU0IgY29udGV4dCBhbGxvY2F0ZWQgYnkgYSBk
c2JfZ2V0KCksIGJ5Cj4+IC0gKiB1bnBpbm5pbmcgYW5kIHJlbGVhc2luZyB0aGUgVk1BIG9iamVj
dCBhc3NvY2lhdGVkIHdpdGggaXQuCj4+IC0gKi8KPj4gLQo+PiAtdm9pZCBpbnRlbF9kc2JfcHV0
KHN0cnVjdCBpbnRlbF9kc2IgKmRzYikKPj4gLXsKPj4gLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0
YyA9IGNvbnRhaW5lcl9vZihkc2IsIHR5cGVvZigqY3J0YyksIGRzYik7Cj4+IC0Jc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KGNydGMtPmJhc2UuZGV2KTsKPj4gLQo+PiAt
CWlmICghSEFTX0RTQihpOTE1KSkKPj4gLQkJcmV0dXJuOwo+PiAtCj4+IC0JaWYgKGRybV9XQVJO
X09OKCZpOTE1LT5kcm0sIGRzYi0+cmVmY291bnQgPT0gMCkpCj4+IC0JCXJldHVybjsKPj4gLQo+
PiAtCWlmICgtLWRzYi0+cmVmY291bnQgPT0gMCkgewo+PiAtCQlpOTE1X3ZtYV91bnBpbl9hbmRf
cmVsZWFzZSgmZHNiLT52bWEsIEk5MTVfVk1BX1JFTEVBU0VfTUFQKTsKPj4gLQkJZHNiLT5jbWRf
YnVmID0gTlVMTDsKPj4gLQkJZHNiLT5mcmVlX3BvcyA9IDA7Cj4+IC0JCWRzYi0+aW5zX3N0YXJ0
X29mZnNldCA9IDA7Cj4+IC0JfQo+PiAtfQo+PiAtCj4+ICAgLyoqCj4+ICAgICogaW50ZWxfZHNi
X2luZGV4ZWRfcmVnX3dyaXRlKCkgLVdyaXRlIHRvIHRoZSBEU0IgY29udGV4dCBmb3IgYXV0bwo+
PiAgICAqIGluY3JlbWVudCByZWdpc3Rlci4KPj4gQEAgLTE5Miw3ICsxMDUsOSBAQCB2b2lkIGlu
dGVsX2RzYl9wdXQoc3RydWN0IGludGVsX2RzYiAqZHNiKQo+PiAgIHZvaWQgaW50ZWxfZHNiX2lu
ZGV4ZWRfcmVnX3dyaXRlKHN0cnVjdCBpbnRlbF9kc2IgKmRzYiwgaTkxNV9yZWdfdCByZWcsCj4+
ICAgCQkJCSB1MzIgdmFsKQo+PiAgIHsKPj4gLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IGNv
bnRhaW5lcl9vZihkc2IsIHR5cGVvZigqY3J0YyksIGRzYik7Cj4+ICsJc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUgPQo+PiArCQljb250YWluZXJfb2YoZHNiLCB0eXBlb2YoKmNy
dGNfc3RhdGUpLCBkc2IpOwo+PiArCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9faW50ZWxf
Y3J0YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOwo+PiAgIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMtPmJhc2UuZGV2KTsKPj4gICAJdTMyICpidWYgPSBk
c2ItPmNtZF9idWY7Cj4+ICAgCXUzMiByZWdfdmFsOwo+PiBAQCAtMjY3LDcgKzE4Miw5IEBAIHZv
aWQgaW50ZWxfZHNiX2luZGV4ZWRfcmVnX3dyaXRlKHN0cnVjdCBpbnRlbF9kc2IgKmRzYiwgaTkx
NV9yZWdfdCByZWcsCj4+ICAgICovCj4+ICAgdm9pZCBpbnRlbF9kc2JfcmVnX3dyaXRlKHN0cnVj
dCBpbnRlbF9kc2IgKmRzYiwgaTkxNV9yZWdfdCByZWcsIHUzMiB2YWwpCj4+ICAgewo+PiAtCXN0
cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gY29udGFpbmVyX29mKGRzYiwgdHlwZW9mKCpjcnRjKSwg
ZHNiKTsKPj4gKwlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSA9Cj4+ICsJCWNv
bnRhaW5lcl9vZihkc2IsIHR5cGVvZigqY3J0Y19zdGF0ZSksIGRzYik7Cj4+ICsJc3RydWN0IGlu
dGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7Cj4+
ICAgCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY3J0Yy0+YmFz
ZS5kZXYpOwo+PiAgIAl1MzIgKmJ1ZiA9IGRzYi0+Y21kX2J1ZjsKPj4gICAKPj4gQEAgLTI5Nyw3
ICsyMTQsOSBAQCB2b2lkIGludGVsX2RzYl9yZWdfd3JpdGUoc3RydWN0IGludGVsX2RzYiAqZHNi
LCBpOTE1X3JlZ190IHJlZywgdTMyIHZhbCkKPj4gICAgKi8KPj4gICB2b2lkIGludGVsX2RzYl9j
b21taXQoc3RydWN0IGludGVsX2RzYiAqZHNiKQo+PiAgIHsKPj4gLQlzdHJ1Y3QgaW50ZWxfY3J0
YyAqY3J0YyA9IGNvbnRhaW5lcl9vZihkc2IsIHR5cGVvZigqY3J0YyksIGRzYik7Cj4+ICsJc3Ry
dWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUgPQo+PiArCQljb250YWluZXJfb2YoZHNi
LCB0eXBlb2YoKmNydGNfc3RhdGUpLCBkc2IpOwo+PiArCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRj
ID0gdG9faW50ZWxfY3J0YyhjcnRjX3N0YXRlLT51YXBpLmNydGMpOwo+IFBsZWFzZSBwYXNzIGNy
dGNfc3RhdGUgaW5zdGVhZCB0byBhbGwgZnVuY3Rpb25zIGFib3ZlLiA6KQoKWWVzLCBjYW4gYmUg
ZG9uZS4KCj4+ICAgCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBjcnRjLT5iYXNlLmRldjsKPj4g
ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShkZXYpOwo+PiAg
IAllbnVtIHBpcGUgcGlwZSA9IGNydGMtPnBpcGU7Cj4+IEBAIC0zNDMsMyArMjYyLDg3IEBAIHZv
aWQgaW50ZWxfZHNiX2NvbW1pdChzdHJ1Y3QgaW50ZWxfZHNiICpkc2IpCj4+ICAgCWRzYi0+aW5z
X3N0YXJ0X29mZnNldCA9IDA7Cj4+ICAgCWludGVsX2RzYl9kaXNhYmxlX2VuZ2luZShkc2IpOwo+
PiAgIH0KPj4gKwo+PiArLyoqCj4+ICsgKiBpbnRlbF9kc2JfcHJlcGFyZSgpIC0gQWxsb2NhdGUs
IHBpbiBhbmQgbWFwIHRoZSBEU0IgY29tbWFuZCBidWZmZXIuCj4+ICsgKiBAY3J0Y19zdGF0ZTog
aW50ZWxfY3J0Y19zdGF0ZSBzdHJ1Y3R1cmUgdG8gcHJlcGFyZSBhc3NvY2lhdGVkIGRzYiBpbnN0
YW5jZS4KPj4gKyAqCj4+ICsgKiBUaGlzIGZ1bmN0aW9uIHByZXBhcmUgdGhlIGNvbW1hbmQgYnVm
ZmVyIHdoaWNoIGlzIHVzZWQgdG8gc3RvcmUgZHNiCj4+ICsgKiBpbnN0cnVjdGlvbnMgd2l0aCBk
YXRhLgo+PiArICovCj4+ICsKPj4gK3ZvaWQgaW50ZWxfZHNiX3ByZXBhcmUoc3RydWN0IGludGVs
X2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCj4+ICt7Cj4+ICsJc3RydWN0IGludGVsX2NydGMgKmNy
dGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7Cj4+ICsJc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KGNydGMtPmJhc2UuZGV2KTsKPj4gKwlzdHJ1
Y3QgaW50ZWxfZHNiICpkc2IgPSAmY3J0Y19zdGF0ZS0+ZHNiOwo+PiArCXN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0ICpvYmo7Cj4+ICsJc3RydWN0IGk5MTVfdm1hICp2bWE7Cj4+ICsJdTMyICpi
dWY7Cj4+ICsJaW50ZWxfd2FrZXJlZl90IHdha2VyZWY7Cj4+ICsKPj4gKwlpZiAoIUhBU19EU0Io
aTkxNSkgfHwgZHNiLT5jbWRfYnVmKQo+PiArCQlyZXR1cm47Cj4+ICsKPj4gKwl3YWtlcmVmID0g
aW50ZWxfcnVudGltZV9wbV9nZXQoJmk5MTUtPnJ1bnRpbWVfcG0pOwo+PiArCj4+ICsJb2JqID0g
aTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9pbnRlcm5hbChpOTE1LCBEU0JfQlVGX1NJWkUpOwo+PiAr
CWlmIChJU19FUlIob2JqKSkgewo+PiArCQlkcm1fZXJyKCZpOTE1LT5kcm0sICJHZW0gb2JqZWN0
IGNyZWF0aW9uIGZhaWxlZFxuIik7Cj4+ICsJCWdvdG8gb3V0Owo+PiArCX0KPj4gKwo+PiArCXZt
YSA9IGk5MTVfZ2VtX29iamVjdF9nZ3R0X3BpbihvYmosIE5VTEwsIDAsIDAsIDApOwo+PiArCWlm
IChJU19FUlIodm1hKSkgewo+PiArCQlkcm1fZXJyKCZpOTE1LT5kcm0sICJWbWEgY3JlYXRpb24g
ZmFpbGVkXG4iKTsKPj4gKwkJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwo+PiArCQlnb3RvIG91
dDsKPj4gKwl9Cj4+ICsKPj4gKwlidWYgPSBpOTE1X2dlbV9vYmplY3RfcGluX21hcCh2bWEtPm9i
aiwgSTkxNV9NQVBfV0MpOwo+PiArCWlmIChJU19FUlIoYnVmKSkgewo+PiArCQlkcm1fZXJyKCZp
OTE1LT5kcm0sICJDb21tYW5kIGJ1ZmZlciBjcmVhdGlvbiBmYWlsZWRcbiIpOwo+PiArCQlnb3Rv
IG91dDsKPj4gKwl9Cj4+ICsKPj4gKwlkc2ItPmlkID0gRFNCMTsKPj4gKwlkc2ItPnZtYSA9IHZt
YTsKPj4gKwlkc2ItPmNtZF9idWYgPSBidWY7Cj4+ICsKPj4gK291dDoKPj4gKwkvKgo+PiArCSAq
IE9uIGVycm9yIGRzYi0+Y21kX2J1ZiB3aWxsIGNvbnRpbnVlIHRvIGJlIE5VTEwsIG1ha2luZyB0
aGUgd3JpdGVzCj4+ICsJICogcGFzcy10aHJvdWdoLiBMZWF2ZSB0aGUgZGFuZ2xpbmcgcmVmIHRv
IGJlIHJlbW92ZWQgbGF0ZXIgYnkgdGhlCj4+ICsJICogY29ycmVzcG9uZGluZyBpbnRlbF9kc2Jf
cHV0KCk6IHRoZSBpbXBvcnRhbnQgZXJyb3IgbWVzc2FnZSB3aWxsCj4+ICsJICogYWxyZWFkeSBi
ZSBsb2dnZWQgYWJvdmUuCj4+ICsJICovCj4+ICsKPj4gKwlpbnRlbF9ydW50aW1lX3BtX3B1dCgm
aTkxNS0+cnVudGltZV9wbSwgd2FrZXJlZik7Cj4+ICt9Cj4+ICsKPj4gKy8qKgo+PiArICogaW50
ZWxfZHNiX2NsZWFudXAoKSAtIFRvIGNsZWFudXAgRFNCIGNvbnRleHQuCj4+ICsgKiBAY3J0Y19z
dGF0ZTogaW50ZWxfY3J0Y19zdGF0ZSBzdHJ1Y3R1cmUgdG8gY2xlYW51cCBhc3NvY2lhdGVkIGRz
YiBpbnN0YW5jZS4KPj4gKyAqCj4+ICsgKiBUaGlzIGZ1bmN0aW9uIGNsZWFudXAgdGhlIERTQiBj
b250ZXh0IGJ5IHVucGlubmluZyBhbmQgcmVsZWFzaW5nCj4+ICsgKiB0aGUgVk1BIG9iamVjdCBh
c3NvY2lhdGVkIHdpdGggaXQuCj4+ICsgKi8KPj4gKwo+PiArdm9pZCBpbnRlbF9kc2JfY2xlYW51
cChzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKPj4gK3sKPj4gKwlzdHJ1Y3Qg
aW50ZWxfZHNiICpkc2IgPSAmY3J0Y19zdGF0ZS0+ZHNiOwo+PiArCXN0cnVjdCBpOTE1X3ZtYSAq
cF92bWE7Cj4+ICsKPj4gKwlpZiAoZHNiLT52bWEpIHsKPj4gKwkJcF92bWEgPSBmZXRjaF9hbmRf
emVybygmZHNiLT52bWEpOwo+PiArCQlpZiAocF92bWEpIHsKPj4gKwkJCWk5MTVfdm1hX3VucGlu
KHBfdm1hKTsKPj4gKwkJCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAocF92bWEtPm9iaik7Cj4+
ICsJCQlpOTE1X2dlbV9vYmplY3RfcHV0KHBfdm1hLT5vYmopOwo+PiArCQl9Cj4+ICsJCWRzYi0+
dm1hID0gTlVMTDsKPj4gKwkJZHNiLT5jbWRfYnVmID0gTlVMTDsKPj4gKwkJZHNiLT5mcmVlX3Bv
cyA9IDA7Cj4+ICsJCWRzYi0+aW5zX3N0YXJ0X29mZnNldCA9IDA7Cj4+ICsJfQo+PiArfQo+IEkg
d291bGQgc2ltcGxpZnkgY2xlYW51cCB0byB2bWEgPSBmZXRjaF9hbmRfemVybygmZHNiLT52bWEp
OyBpZiAoIXZtYSkgcmV0dXJuOyBhbmQgdGhlbiBvbmx5IGNhbGwgdGhlIHZtYS9nZW0gZnVuY3Rp
b25zIHRvIGNsZWFuIHVwLiBObyBuZWVkIHRvIGZpeCB0aGUgb3RoZXIgc3R1ZmYgaGVyZSBhcyB0
aGUgc3RydWN0IGlzIGJlaW5nIGZyZWVkLgoKU3VyZSAuLiBkbyB5b3UgbWVhbiBsaWtlIGJlbG93
PwoKdm9pZCBpbnRlbF9kc2JfY2xlYW51cChzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19z
dGF0ZSkKewoJc3RydWN0IGludGVsX2RzYiAqZHNiID0gJmNydGNfc3RhdGUtPmRzYjsKCXN0cnVj
dCBpOTE1X3ZtYSAqcF92bWEgPSBmZXRjaF9hbmRfemVybygmZHNiLT52bWEpOwoKCWlmICghcF92
bWEpCgkJcmV0dXJuOwoKCWk5MTVfdm1hX3VucGluKHBfdm1hKTsKCWk5MTVfZ2VtX29iamVjdF91
bnBpbl9tYXAocF92bWEtPm9iaik7CglpOTE1X2dlbV9vYmplY3RfcHV0KHBfdm1hLT5vYmopOwoJ
ZHNiLT52bWEgPSBOVUxMOwoJZHNiLT5jbWRfYnVmID0gTlVMTDsKCWRzYi0+ZnJlZV9wb3MgPSAw
OwoJZHNiLT5pbnNfc3RhcnRfb2Zmc2V0ID0gMDsKfQoKPgo+IENvdWxkIHByb2JhYmx5IGRyb3Ag
dGhlIGZldGNoX2FuZF96ZXJvIGFzIHdlbGwsIGJ1dCB3b3VsZG4ndCBodXJ0IGZvciBwYXJhbm9p
YS4gOikKPgo+IE90aGVyd2lzZSBsb29rcyBnb29kIG5vdywgb25seSBmZXcgdHdlYWtzIGFyZSBu
ZWVkZWQgZm9yIHRoZSBwYXRjaCB0byBiZSByZWFkeSEKClRoYW5rcyBmb3IgcmV2aWV3LiA6KQoK
UmVnYXJkcywKQW5pbWVzaAoKPgo+IH5NYWFydGVuCj4KPgo+PiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kc2IuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHNiLmgKPj4gaW5kZXggMzk1ZWY5Y2U1NThlLi4zYTIwYTQzODhiOWEg
MTAwNjQ0Cj4+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHNiLmgK
Pj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kc2IuaAo+PiBAQCAt
MTAsNyArMTAsNyBAQAo+PiAgIAo+PiAgICNpbmNsdWRlICJpOTE1X3JlZy5oIgo+PiAgIAo+PiAt
c3RydWN0IGludGVsX2NydGM7Cj4+ICtzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZTsKPj4gICBzdHJ1
Y3QgaTkxNV92bWE7Cj4+ICAgCj4+ICAgZW51bSBkc2JfaWQgewo+PiBAQCAtMjIsNyArMjIsNiBA
QCBlbnVtIGRzYl9pZCB7Cj4+ICAgfTsKPj4gICAKPj4gICBzdHJ1Y3QgaW50ZWxfZHNiIHsKPj4g
LQlsb25nIHJlZmNvdW50Owo+PiAgIAllbnVtIGRzYl9pZCBpZDsKPj4gICAJdTMyICpjbWRfYnVm
Owo+PiAgIAlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKPj4gQEAgLTQxLDkgKzQwLDggQEAgc3RydWN0
IGludGVsX2RzYiB7Cj4+ICAgCXUzMiBpbnNfc3RhcnRfb2Zmc2V0Owo+PiAgIH07Cj4+ICAgCj4+
IC1zdHJ1Y3QgaW50ZWxfZHNiICoKPj4gLWludGVsX2RzYl9nZXQoc3RydWN0IGludGVsX2NydGMg
KmNydGMpOwo+PiAtdm9pZCBpbnRlbF9kc2JfcHV0KHN0cnVjdCBpbnRlbF9kc2IgKmRzYik7Cj4+
ICt2b2lkIGludGVsX2RzYl9wcmVwYXJlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0
YXRlKTsKPj4gK3ZvaWQgaW50ZWxfZHNiX2NsZWFudXAoc3RydWN0IGludGVsX2NydGNfc3RhdGUg
KmNydGNfc3RhdGUpOwo+PiAgIHZvaWQgaW50ZWxfZHNiX3JlZ193cml0ZShzdHJ1Y3QgaW50ZWxf
ZHNiICpkc2IsIGk5MTVfcmVnX3QgcmVnLCB1MzIgdmFsKTsKPj4gICB2b2lkIGludGVsX2RzYl9p
bmRleGVkX3JlZ193cml0ZShzdHJ1Y3QgaW50ZWxfZHNiICpkc2IsIGk5MTVfcmVnX3QgcmVnLAo+
PiAgIAkJCQkgdTMyIHZhbCk7Cj4KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
aW50ZWwtZ2Z4Cg==

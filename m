Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 29C0AFB1FC
	for <lists+intel-gfx@lfdr.de>; Wed, 13 Nov 2019 14:59:55 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D57966ED1D;
	Wed, 13 Nov 2019 13:59:52 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CC6BA6ED15;
 Wed, 13 Nov 2019 13:59:50 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19187969-1500050 
 for multiple; Wed, 13 Nov 2019 13:59:32 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 13 Nov 2019 13:59:31 +0000
Message-Id: <20191113135931.11526-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191113135505.11426-1-chris@chris-wilson.co.uk>
References: <20191113135505.11426-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t] i915/gem_create: Check for cache bypass
 around zeroed pages
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org, Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Q2hlY2sgdGhhdCBldmVuIGlmIHVzZXJzcGFjZSB0cmllcyB0byBzbmVhayBhcm91bmQgdGhlIENQ
VSBjYWNoZXMgb2YgaXRzCnplcm9lZCBwYWdlcywgaXQgc2VlcyBub3RoaW5nIGJ1dCB6ZXJvZXMu
CgpTdWdnZXN0ZWQtYnk6IEpvb25hcyBMYWh0aW5lbiA8am9vbmFzLmxhaHRpbmVuQGxpbnV4Lmlu
dGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24u
Y28udWs+CkNjOiBKb29uYXMgTGFodGluZW4gPGpvb25hcy5sYWh0aW5lbkBsaW51eC5pbnRlbC5j
b20+CkNjOiBNYXR0aGV3IEF1bGQgPG1hdHRoZXcuYXVsZEBpbnRlbC5jb20+Ci0tLQogdGVzdHMv
aTkxNS9nZW1fY3JlYXRlLmMgfCA0NCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
Ky0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDM4IGluc2VydGlvbnMoKyksIDYgZGVsZXRpb25zKC0p
CgpkaWZmIC0tZ2l0IGEvdGVzdHMvaTkxNS9nZW1fY3JlYXRlLmMgYi90ZXN0cy9pOTE1L2dlbV9j
cmVhdGUuYwppbmRleCBhZWQ3ZDFjZWMuLmIxNzE1ZjBhZCAxMDA2NDQKLS0tIGEvdGVzdHMvaTkx
NS9nZW1fY3JlYXRlLmMKKysrIGIvdGVzdHMvaTkxNS9nZW1fY3JlYXRlLmMKQEAgLTU1LDggKzU1
LDEwIEBACiAjaW5jbHVkZSAiaW50ZWxfaW8uaCIKICNpbmNsdWRlICJpbnRlbF9jaGlwc2V0Lmgi
CiAjaW5jbHVkZSAiaWd0X2F1eC5oIgorI2luY2x1ZGUgImlndF94ODYuaCIKICNpbmNsdWRlICJk
cm10ZXN0LmgiCiAjaW5jbHVkZSAiZHJtLmgiCisjaW5jbHVkZSAiaTkxNS9nZW1fbW1hbi5oIgog
I2luY2x1ZGUgImk5MTVfZHJtLmgiCiAKIElHVF9URVNUX0RFU0NSSVBUSU9OKCJUaGlzIGlzIGEg
dGVzdCBmb3IgdGhlIGV4dGVuZGVkICYgb2xkIGdlbV9jcmVhdGUgaW9jdGwsIgpAQCAtMTg4LDEx
ICsxOTAsMTMgQEAgc3RhdGljIHZvaWQgKnRocmVhZF9jbGVhcih2b2lkICpkYXRhKQogewogCXN0
cnVjdCB0aHJlYWRfY2xlYXIgKmFyZyA9IGRhdGE7CiAJdW5zaWduZWQgbG9uZyBjaGVja2VkID0g
MDsKKwllbnVtIHsgUFJXLCBHVFQsIFdDLCBfX0xBU1RfXyB9IG1vZGUgPSBQUlc7CiAJaW50IGk5
MTUgPSBhcmctPmk5MTU7CiAKIAlpZ3RfdW50aWxfdGltZW91dChhcmctPnRpbWVvdXQpIHsKIAkJ
c3RydWN0IGRybV9pOTE1X2dlbV9jcmVhdGUgY3JlYXRlID0ge307CiAJCXVpbnQ2NF90IG5wYWdl
czsKKwkJdm9pZCAqcHRyID0gTlVMTDsKIAogCQlucGFnZXMgPSByYW5kb20oKTsKIAkJbnBhZ2Vz
IDw8PSAzMjsKQEAgLTIwMSwxOCArMjA1LDQ2IEBAIHN0YXRpYyB2b2lkICp0aHJlYWRfY2xlYXIo
dm9pZCAqZGF0YSkKIAkJY3JlYXRlLnNpemUgPSBucGFnZXMgPDwgMTI7CiAKIAkJY3JlYXRlX2lv
Y3RsKGk5MTUsICZjcmVhdGUpOwotCQlmb3IgKHVpbnQ2NF90IHBhZ2UgPSAwOyBwYWdlIDwgbnBh
Z2VzOyBwYWdlKyspIHsKLQkJCXVpbnQ2NF90IHg7CisJCXN3aXRjaCAobW9kZSkgeworCQljYXNl
IF9fTEFTVF9fOgorCQljYXNlIFBSVzoKKwkJCWJyZWFrOworCQljYXNlIFdDOgorCQkJcHRyID0g
X19nZW1fbW1hcF9fd2MoaTkxNSwgY3JlYXRlLmhhbmRsZSwKKwkJCQkJICAgICAwLCBjcmVhdGUu
c2l6ZSwgUFJPVF9SRUFEKTsKKwkJCWJyZWFrOworCQljYXNlIEdUVDoKKwkJCXB0ciA9IF9fZ2Vt
X21tYXBfX2d0dChpOTE1LCBjcmVhdGUuaGFuZGxlLAorCQkJCQkgICAgICBjcmVhdGUuc2l6ZSwg
UFJPVF9SRUFEKTsKKwkJCWJyZWFrOworCQl9CisJCS8qIE5vIHNldC1kb21haW5zIGFzIHdlIGFy
ZSBiZWluZyBhcyBuYXVnaHR5IGFzIHBvc3NpYmxlICovCiAKLQkJCWdlbV9yZWFkKGk5MTUsIGNy
ZWF0ZS5oYW5kbGUsCi0JCQkJIHBhZ2UgKiA0MDk2ICsgKHBhZ2UgJSAoNDA5NiAtIHNpemVvZih4
KSkpLAotCQkJCSAmeCwgc2l6ZW9mKHgpKTsKLQkJCWlndF9hc3NlcnRfZXFfdTY0KHgsIDApOwor
CQlmb3IgKHVpbnQ2NF90IHBhZ2UgPSAwOyBwYWdlIDwgbnBhZ2VzOyBwYWdlKyspIHsKKwkJCXVp
bnQ2NF90IHhbOF0gPSB7CisJCQkJcGFnZSAqIDQwOTYgKworCQkJCXNpemVvZih4KSAqICgocGFn
ZSAlICg0MDk2IC0gc2l6ZW9mKHgpKSAvIHNpemVvZih4KSkpCisJCQl9OworCisJCQlpZiAoIXB0
cikKKwkJCQlnZW1fcmVhZChpOTE1LCBjcmVhdGUuaGFuZGxlLCB4WzBdLCB4LCBzaXplb2YoeCkp
OworCQkJZWxzZSBpZiAocGFnZSAmIDEpCisJCQkJaWd0X21lbWNweV9mcm9tX3djKHgsIHB0ciAr
IHhbMF0sIHNpemVvZih4KSk7CisJCQllbHNlCisJCQkJbWVtY3B5KHgsIHB0ciArIHhbMF0sIHNp
emVvZih4KSk7CisKKwkJCWZvciAoaW50IGkgPSAwOyBpIDwgQVJSQVlfU0laRSh4KTsgaSsrKQor
CQkJCWlndF9hc3NlcnRfZXFfdTY0KHhbaV0sIDApOwogCQl9CisJCWlmIChwdHIpCisJCQltdW5t
YXAocHRyLCBjcmVhdGUuc2l6ZSk7CiAJCWdlbV9jbG9zZShpOTE1LCBjcmVhdGUuaGFuZGxlKTsK
IAkJY2hlY2tlZCArPSBucGFnZXM7CiAKIAkJYXRvbWljX2ZldGNoX2FkZCgmYXJnLT5tYXgsIG5w
YWdlcyk7CisKKwkJaWYgKCsrbW9kZSA9PSBfX0xBU1RfXykKKwkJCW1vZGUgPSBQUlc7CiAJfQog
CiAJcmV0dXJuICh2b2lkICopKHVpbnRwdHJfdCljaGVja2VkOwotLSAKMi4yNC4wCgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGlu
ZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 005FF3B0095
	for <lists+intel-gfx@lfdr.de>; Tue, 22 Jun 2021 11:44:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9CCEB6E462;
	Tue, 22 Jun 2021 09:44:35 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-qk1-x731.google.com (mail-qk1-x731.google.com
 [IPv6:2607:f8b0:4864:20::731])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A06C76E0F7;
 Tue, 22 Jun 2021 09:44:34 +0000 (UTC)
Received: by mail-qk1-x731.google.com with SMTP id q64so31478609qke.7;
 Tue, 22 Jun 2021 02:44:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=pNxxKfZLfVLg4XC6djnWj2VNlNbQrX2kWG1kWvz9lU8=;
 b=XQl2m3A663C9SZFGk+fIHl0O5/ojb6SVdH2P+0s4U6PvWBESd7NQdjzgjGpWRUEaPt
 GpWDwgLUBKZSXvHpccxDlwEfMHo3pD5M+NOZG36RxDDQSImEX2t3tzb69ocJvV7wkV3I
 47e/D8dBO4l5KPuObK20ULx4/TZ+GtFBtEPIvGP+Af8GJoB7op7ZPYrHKmtOvNzUxp2Q
 zKu1/kwYH9rSLI45P0tYMWeq0iHSbKI3u5wpDHMTxVjJPzANxx92EQPZI4chIKkq+1Lh
 DJ3nSly/KXqBPMLj5qmYNuKR5qfwIgs2MQnAWS68vA2rPDNotrPmyfLur2opT9vOdO1t
 zRWg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=pNxxKfZLfVLg4XC6djnWj2VNlNbQrX2kWG1kWvz9lU8=;
 b=mhZiJo8Yfjd8A5eKy+slQED3JRxaziLV9cL96i9F6xJE4N8zIPdaLQC4nw/3wybUOl
 jsqWJzADyHHHhdTe5pySNZaPjrEFpqyuDMJU+hOePyCd7R344SWRpx6quDAzsfLy1KB6
 FlUKLxAxY44qm1Y4X7kutr88ndrAy5yFEJ7bJWQ/Bor0cvocXix6shOWSJu1AssOrn6s
 F3EhMYOSSfcO/ncYAG52AqPREOPWzLLtx5b5N5iQV5vy+zYbLthSAKCwaLV7uoz52WQZ
 2kvcwYb5JZIoTqBpOq+8REkfYuMvs0VPpfp4LWKFbSCuqyu2Zvfnxh///2nZmV1M11rd
 EZCg==
X-Gm-Message-State: AOAM530s1LWAd7+X/+6pEIz04AvCqzCoZrukckNMmP6+7m4PX1QG2VBW
 d6lZQcCnaa3rZQWewQGiml8SSyNCQvKJe5vSRyNHvxLgOe5GMQ==
X-Google-Smtp-Source: ABdhPJxG2rdp8hzFyVCfepjI7blg5hqGQdfZzr5O4K3rINaKsPXMtsHz1Oa0MWsNnXKEfh5ZtpSd17vOZhu1+dfQFxI=
X-Received: by 2002:a05:620a:919:: with SMTP id
 v25mr3091688qkv.327.1624355073596; 
 Tue, 22 Jun 2021 02:44:33 -0700 (PDT)
MIME-Version: 1.0
References: <20210622093418.153400-1-thomas.hellstrom@linux.intel.com>
 <20210622093418.153400-3-thomas.hellstrom@linux.intel.com>
In-Reply-To: <20210622093418.153400-3-thomas.hellstrom@linux.intel.com>
From: Matthew Auld <matthew.william.auld@gmail.com>
Date: Tue, 22 Jun 2021 10:44:07 +0100
Message-ID: <CAM0jSHMWG4tGSHDGzuKw+qC5D-PoXzfDJa_QCdwpn=p20fkC4Q@mail.gmail.com>
To: =?UTF-8?Q?Thomas_Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>
Subject: Re: [Intel-gfx] [PATCH v7 2/3] drm/i915/ttm: Adjust gem flags and
 caching settings after a move
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Matthew Auld <matthew.auld@intel.com>,
 ML dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVHVlLCAyMiBKdW4gMjAyMSBhdCAxMDozNCwgVGhvbWFzIEhlbGxzdHLDtm0KPHRob21hcy5o
ZWxsc3Ryb21AbGludXguaW50ZWwuY29tPiB3cm90ZToKPgo+IEFmdGVyIGEgVFRNIG1vdmUgb3Ig
b2JqZWN0IGluaXQgd2UgbmVlZCB0byB1cGRhdGUgdGhlIGk5MTUgZ2VtIGZsYWdzIGFuZAo+IGNh
Y2hpbmcgc2V0dGluZ3MgdG8gcmVmbGVjdCB0aGUgbmV3IHBsYWNlbWVudC4gQ3VycmVudGx5IGNh
Y2hpbmcgc2V0dGluZ3MKPiBhcmUgbm90IGNoYW5nZWQgZHVyaW5nIHRoZSBsaWZldGltZSBvZiBh
biBvYmplY3QsIGFsdGhvdWdoIHRoYXQgbWlnaHQKPiBjaGFuZ2UgbW92aW5nIGZvcndhcmQgaWYg
d2UgcnVuIGludG8gcGVyZm9ybWFuY2UgaXNzdWVzIG9yIGlzc3VlcyB3aXRoCj4gV0Mgc3lzdGVt
IHBhZ2UgYWxsb2NhdGlvbnMuCj4gQWxzbyBpbnRyb2R1Y2UgZ3B1X2JpbmRzX2lvbWVtKCkgYW5k
IGNwdV9tYXBzX2lvbWVtKCkgdG8gY2xlYW4gdXAgdGhlCj4gdmFyaW91cyB3YXlzIHdlIHByZXZp
b3VzbHkgdXNlZCB0byBkZXRlY3QgdGhpcy4KPiBGaW5hbGx5LCBpbml0aWFsaXplIHRoZSBUVE0g
b2JqZWN0IHJlc2VydmVkIHRvIGJlIGFibGUgdG8gdXBkYXRlCj4gZmxhZ3MgYW5kIGNhY2hpbmcg
YmVmb3JlIGFueW9uZSBlbHNlIGdldHMgaG9sZCBvZiB0aGUgb2JqZWN0Lgo+Cj4gU2lnbmVkLW9m
Zi1ieTogVGhvbWFzIEhlbGxzdHLDtm0gPHRob21hcy5oZWxsc3Ryb21AbGludXguaW50ZWwuY29t
Pgo+IFJldmlld2VkLWJ5OiBNYXR0aGV3IEF1bGQgPG1hdHRoZXcuYXVsZEBpbnRlbC5jb20+Cj4g
LS0tCj4gdjY6Cj4gLSBSZWJhc2Ugb24gYWNjZWxlcmF0ZWQgdHRtIG1vdmVzLgo+IC0tLQoKPHNu
aXA+Cgo+IEBAIC03NzUsMTQgKzg0NSwxMyBAQCBpbnQgX19pOTE1X2dlbV90dG1fb2JqZWN0X2lu
aXQoc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbSwKPiAgICAgICAgIGk5MTVfZ2VtX29i
amVjdF9pbml0KG9iaiwgJmk5MTVfZ2VtX3R0bV9vYmpfb3BzLCAmbG9ja19jbGFzcywgZmxhZ3Mp
Owo+ICAgICAgICAgaTkxNV9nZW1fb2JqZWN0X2luaXRfbWVtb3J5X3JlZ2lvbihvYmosIG1lbSk7
Cj4gICAgICAgICBpOTE1X2dlbV9vYmplY3RfbWFrZV91bnNocmlua2FibGUob2JqKTsKPiAtICAg
ICAgIG9iai0+cmVhZF9kb21haW5zID0gSTkxNV9HRU1fRE9NQUlOX1dDIHwgSTkxNV9HRU1fRE9N
QUlOX0dUVDsKPiAtICAgICAgIG9iai0+bWVtX2ZsYWdzIHw9IEk5MTVfQk9fRkxBR19JT01FTTsK
PiAtICAgICAgIGk5MTVfZ2VtX29iamVjdF9zZXRfY2FjaGVfY29oZXJlbmN5KG9iaiwgSTkxNV9D
QUNIRV9OT05FKTsKPiAgICAgICAgIElOSVRfUkFESVhfVFJFRSgmb2JqLT50dG0uZ2V0X2lvX3Bh
Z2UucmFkaXgsIEdGUF9LRVJORUwgfCBfX0dGUF9OT1dBUk4pOwo+ICAgICAgICAgbXV0ZXhfaW5p
dCgmb2JqLT50dG0uZ2V0X2lvX3BhZ2UubG9jayk7Cj4gICAgICAgICBib190eXBlID0gKG9iai0+
ZmxhZ3MgJiBJOTE1X0JPX0FMTE9DX1VTRVIpID8gdHRtX2JvX3R5cGVfZGV2aWNlIDoKPiAgICAg
ICAgICAgICAgICAgdHRtX2JvX3R5cGVfa2VybmVsOwo+Cj4gKyAgICAgICBvYmotPmJhc2Uudm1h
X25vZGUuZHJpdmVyX3ByaXZhdGUgPSBpOTE1X2dlbV90b190dG0ob2JqKTsKPiArCj4gICAgICAg
ICAvKgo+ICAgICAgICAgICogSWYgdGhpcyBmdW5jdGlvbiBmYWlscywgaXQgd2lsbCBjYWxsIHRo
ZSBkZXN0cnVjdG9yLCBidXQKPiAgICAgICAgICAqIG91ciBjYWxsZXIgc3RpbGwgb3ducyB0aGUg
b2JqZWN0LiBTbyBubyBmcmVlaW5nIGluIHRoZQo+IEBAIC03OTAsMTQgKzg1OSwxNiBAQCBpbnQg
X19pOTE1X2dlbV90dG1fb2JqZWN0X2luaXQoc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1l
bSwKPiAgICAgICAgICAqIFNpbWlsYXJseSwgaW4gZGVsYXllZF9kZXN0cm95LCB3ZSBjYW4ndCBj
YWxsIHR0bV9ib19wdXQoKQo+ICAgICAgICAgICogdW50aWwgc3VjY2Vzc2Z1bCBpbml0aWFsaXph
dGlvbi4KPiAgICAgICAgICAqLwo+IC0gICAgICAgb2JqLT5iYXNlLnZtYV9ub2RlLmRyaXZlcl9w
cml2YXRlID0gaTkxNV9nZW1fdG9fdHRtKG9iaik7Cj4gLSAgICAgICByZXQgPSB0dG1fYm9faW5p
dCgmaTkxNS0+YmRldiwgaTkxNV9nZW1fdG9fdHRtKG9iaiksIHNpemUsCj4gLSAgICAgICAgICAg
ICAgICAgICAgICAgICBib190eXBlLCAmaTkxNV9zeXNfcGxhY2VtZW50LAo+IC0gICAgICAgICAg
ICAgICAgICAgICAgICAgbWVtLT5taW5fcGFnZV9zaXplID4+IFBBR0VfU0hJRlQsCj4gLSAgICAg
ICAgICAgICAgICAgICAgICAgICB0cnVlLCBOVUxMLCBOVUxMLCBpOTE1X3R0bV9ib19kZXN0cm95
KTsKPiAtICAgICAgIGlmICghcmV0KQo+IC0gICAgICAgICAgICAgICBvYmotPnR0bS5jcmVhdGVk
ID0gdHJ1ZTsKPiAtCj4gLSAgICAgICAvKiBpOTE1IHdhbnRzIC1FTlhJTyB3aGVuIG91dCBvZiBt
ZW1vcnkgcmVnaW9uIHNwYWNlLiAqLwo+IC0gICAgICAgcmV0dXJuIGk5MTVfdHRtX2Vycl90b19n
ZW0ocmV0KTsKPiArICAgICAgIHJldCA9IHR0bV9ib19pbml0X3Jlc2VydmVkKCZpOTE1LT5iZGV2
LCBpOTE1X2dlbV90b190dG0ob2JqKSwgc2l6ZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGJvX3R5cGUsICZpOTE1X3N5c19wbGFjZW1lbnQsIDEsCgptZW0tPm1pbl9wYWdl
X3NpemUgPj4gUEFHRV9TSElGVD8gQWx0aG91Z2gganVzdCByZWFsaXNlZCB0aGF0IGxvb2tzCmlm
Znkgc2luY2UgaXQgb25seSBjb25zaWRlcnMgdGhlIGN1cnJlbnQgcmVnaW9uLCB3aGVuIGl0IHNo
b3VsZApjb25zaWRlciBhbGwgZnV0dXJlIHBsYWNlbWVudHMuIEkgd29uZGVyIGlmIGl0IG1ha2Vz
IHNlbnNlIHRvIG1ha2UKcGFnZV9hbGlnbm1lbnQgcGFydCBvZiB0dG1fcGxhY2U/IEFueXdheSwg
aXQgZG9lc24ndCBtYXR0ZXIgZm9yIHRoaXMKc2VyaWVzLgoKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICZjdHgsIE5VTEwsIE5VTEwsIGk5MTVfdHRtX2JvX2Rlc3Ryb3kpOwo+
ICsgICAgICAgaWYgKHJldCkKPiArICAgICAgICAgICAgICAgcmV0dXJuIGk5MTVfdHRtX2Vycl90
b19nZW0ocmV0KTsKPiArCj4gKyAgICAgICBvYmotPnR0bS5jcmVhdGVkID0gdHJ1ZTsKPiArICAg
ICAgIGk5MTVfdHRtX2FkanVzdF9kb21haW5zX2FmdGVyX21vdmUob2JqKTsKPiArICAgICAgIGk5
MTVfdHRtX2FkanVzdF9nZW1fYWZ0ZXJfbW92ZShvYmopOwo+ICsgICAgICAgaTkxNV9nZW1fb2Jq
ZWN0X3VubG9jayhvYmopOwo+ICsKPiArICAgICAgIHJldHVybiAwOwo+ICB9Cj4gLS0KPiAyLjMx
LjEKPgo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCj4g
SW50ZWwtZ2Z4IG1haWxpbmcgbGlzdAo+IEludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
PiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdm
eApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1n
ZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 222F83D36D8
	for <lists+intel-gfx@lfdr.de>; Fri, 23 Jul 2021 10:35:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E33BB6F3F3;
	Fri, 23 Jul 2021 08:35:13 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-ej1-x636.google.com (mail-ej1-x636.google.com
 [IPv6:2a00:1450:4864:20::636])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B71786EE63
 for <intel-gfx@lists.freedesktop.org>; Fri, 23 Jul 2021 08:35:09 +0000 (UTC)
Received: by mail-ej1-x636.google.com with SMTP id hq13so2515969ejc.7
 for <intel-gfx@lists.freedesktop.org>; Fri, 23 Jul 2021 01:35:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=riSufnz8Q+REZom/u8fUIv71a4+RLE2nXmWsA7dbp/A=;
 b=HWTjcZqsJNZStwKgiBxgOMHKDb1HQlDoRLiv8/oo8skk34N6NgUTLJ+rwQQMWL/G4g
 WjZb8mdMV6kVXprWVKiTAV05qTByQS1ZMtwqF8G9KTo6ZCCyin4bPKNtSupxkVG0RHup
 hbK/cRQkP9vB6WC1p7D+fzOEpmS7O3ocY298g=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=riSufnz8Q+REZom/u8fUIv71a4+RLE2nXmWsA7dbp/A=;
 b=OMgZVdm2zI+zNFxrw7Jlvo9HxnClR6bxkMen5Z0ab+Lwe8FMV7mlIeaF1t9gFH1UVG
 SqQDfSuqid7xaaJgUZTPSrgyyY+0h4FmjmLUSVRox33taMpYZEjiod77r8OgVdNH0x+j
 Cq1tKCsigR0erSPbMH3uGcCRvl2p3XLcEQwoS1ZiAiCLrqDdl5rkXI1W0nnmhkq3uvQd
 z3aunqXv+PDBdZ5i9xJe32Z1QSDqRo7vMXXnQ1b4AzWrsi2le81XD0eBIo1x2gGgrTdx
 DRxfecNRmSKgFXTTUj+oKn+XXWfk9SmEc9LN3rxnHrZzh0sb82ehym9YZBr3xDknqIat
 QJGQ==
X-Gm-Message-State: AOAM533X1LYHQnDFxpNcnWFNjKDnh4pjBAwRmna46aibpCERiu9zqq+i
 /symj4PUlZ926ukGA0EgvwQy5g==
X-Google-Smtp-Source: ABdhPJxR5F3kC3q6czsWA/eSVris7rYMsvdEOuUIJKfR/W0i79YviaukEFw17qm/kWItDHPebUWY+Q==
X-Received: by 2002:a17:906:f92:: with SMTP id
 q18mr3744403ejj.353.1627029308261; 
 Fri, 23 Jul 2021 01:35:08 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:57f4:0:efd0:b9e5:5ae6:c2fa])
 by smtp.gmail.com with ESMTPSA id s26sm10237758ejv.87.2021.07.23.01.35.07
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 23 Jul 2021 01:35:07 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: DRI Development <dri-devel@lists.freedesktop.org>
Date: Fri, 23 Jul 2021 10:34:56 +0200
Message-Id: <20210723083457.696939-2-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.32.0
In-Reply-To: <20210723083457.696939-1-daniel.vetter@ffwll.ch>
References: <20210723083457.696939-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 2/3] drm/plane: check that fb_damage is set up
 when used
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Maxime Ripard <mripard@kernel.org>, Thomas Zimmermann <tzimmermann@suse.de>,
 Daniel Vetter <daniel.vetter@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlcmUncyB0d28gc3RhZ2VzIG9mIG1hbnVhbCB1cGxvYWQvaW52YWxpZGF0ZSBkaXNwbGF5czoK
LSBqdXN0IGhhbmRsaW5nIGRpcnR5ZmIgYW5kIHVwbG9hZGluZyB0aGUgZW50aXJlIGZiIGFsbCB0
aGUgdGltZQotIGxvb2tpbmcgYXQgZGFtYWdlIGNsaXBzCgpJbiB0aGUgbGF0dGVyIGNhc2Ugd2Ug
c3VwcG9ydCBpdCB0aHJvdWdoIGZiZGV2IGVtdWxhdGlvbiAod2l0aApmYl9kZWZpbyksIGF0b21p
YyBwcm9wZXJ0eSwgYW5kIHdpdGggdGhlIGRpcnRmeSBjbGlwIHJlY3RzLgoKTWFrZSBzdXJlIGF0
IGxlYXN0IHRoZSBhdG9taWMgcHJvcGVydHkgaXMgc2V0IHVwIGFzIHRoZSBtYWluIG9mZmljaWFs
CmludGVyZmFjZSBmb3IgdGhpcy4gSWRlYWxseSB3ZSdkIGFsc28gY2hlY2sgdGhhdApkcm1fYXRv
bWljX2hlbHBlcl9kaXJ0eWZiKCkgaXMgdXNlZCBhbmQgdGhhdCBmYmRldiBkZWZpbyBpcyBzZXQg
dXAsCmJ1dCB0aGF0J3MgcXVpdGUgYSBiaXQgaGFyZGVyIHRvIGRvLiBJZGVhcyB2ZXJ5IG11Y2gg
d2VsY29tZS4KCkZyb20gYSBjdXJzb3IgYXVkaXQgZHJpdmVycyBzZWVtIHRvIGJlIGdldHRpbmcg
dGhpcyByaWdodCBtb3N0bHksIGJ1dApiZXR0ZXIgdG8gbWFrZSBzdXJlLiBBdCBsZWFzdCBubyBv
bmUgaXMgYnlwYXNzaW5nIHRoZSBhY2Nlc3NvcgpmdW5jdGlvbi4KCnYyOgotIHVzZSBkcm1fd2Fy
bl9vbmNlIHdpdGggYSBtZWFuaW5nZnVsIHdhcm5pbmcgc3RyaW5nIChKb3PDqSkKLSBkb24ndCBz
cGxhdCBpbiB0aGUgYXRvbWljIGNoZWNrIGNvZGUgZm9yIGV2ZXJ5b25lIChpbnRlbC1nZngtY2kp
CgpSZXZpZXdlZC1ieTogSm9zw6kgUm9iZXJ0byBkZSBTb3V6YSA8am9zZS5zb3V6YUBpbnRlbC5j
b20+ICh2MSkKQ2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5j
b20+CkNjOiBHd2FuLWd5ZW9uZyBNdW4gPGd3YW4tZ3llb25nLm11bkBpbnRlbC5jb20+CkNjOiBK
b3PDqSBSb2JlcnRvIGRlIFNvdXphIDxqb3NlLnNvdXphQGludGVsLmNvbT4KQ2M6IEhhbnMgZGUg
R29lZGUgPGhkZWdvZWRlQHJlZGhhdC5jb20+ClNpZ25lZC1vZmYtYnk6IERhbmllbCBWZXR0ZXIg
PGRhbmllbC52ZXR0ZXJAaW50ZWwuY29tPgpDYzogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4u
bGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KQ2M6IE1heGltZSBSaXBhcmQgPG1yaXBhcmRAa2Vy
bmVsLm9yZz4KQ2M6IFRob21hcyBaaW1tZXJtYW5uIDx0emltbWVybWFubkBzdXNlLmRlPgpDYzog
RGF2aWQgQWlybGllIDxhaXJsaWVkQGxpbnV4LmllPgpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVs
QGZmd2xsLmNoPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljLmMgICAgICAgIHwgIDIg
Ky0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fY3J0Y19pbnRlcm5hbC5oIHwgIDIgKysKIGRyaXZlcnMv
Z3B1L2RybS9kcm1fcGxhbmUuYyAgICAgICAgIHwgNTAgKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysKIGluY2x1ZGUvZHJtL2RybV9wbGFuZS5oICAgICAgICAgICAgIHwgMzYgKysrLS0tLS0t
LS0tLS0tLS0tLS0tCiA0IGZpbGVzIGNoYW5nZWQsIDU3IGluc2VydGlvbnMoKyksIDMzIGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljLmMgYi9kcml2
ZXJzL2dwdS9kcm0vZHJtX2F0b21pYy5jCmluZGV4IGQ4MjA0MjNmYWMzMi4uYzg1ZGNmZDY5MTU4
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pYy5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9kcm1fYXRvbWljLmMKQEAgLTY2MCw3ICs2NjAsNyBAQCBzdGF0aWMgaW50IGRybV9h
dG9taWNfcGxhbmVfY2hlY2soY29uc3Qgc3RydWN0IGRybV9wbGFuZV9zdGF0ZSAqb2xkX3BsYW5l
X3N0YXRlLAogCQlyZXR1cm4gLUVOT1NQQzsKIAl9CiAKLQljbGlwcyA9IGRybV9wbGFuZV9nZXRf
ZGFtYWdlX2NsaXBzKG5ld19wbGFuZV9zdGF0ZSk7CisJY2xpcHMgPSBfX2RybV9wbGFuZV9nZXRf
ZGFtYWdlX2NsaXBzKG5ld19wbGFuZV9zdGF0ZSk7CiAJbnVtX2NsaXBzID0gZHJtX3BsYW5lX2dl
dF9kYW1hZ2VfY2xpcHNfY291bnQobmV3X3BsYW5lX3N0YXRlKTsKIAogCS8qIE1ha2Ugc3VyZSBk
YW1hZ2UgY2xpcHMgYXJlIHZhbGlkIGFuZCBpbnNpZGUgdGhlIGZiLiAqLwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2RybV9jcnRjX2ludGVybmFsLmggYi9kcml2ZXJzL2dwdS9kcm0vZHJt
X2NydGNfaW50ZXJuYWwuaAppbmRleCAxY2E1MWFkZGI1ODkuLmVkYjc3Mjk0N2NiNCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9jcnRjX2ludGVybmFsLmgKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2RybV9jcnRjX2ludGVybmFsLmgKQEAgLTI2Miw2ICsyNjIsOCBAQCBpbnQgZHJtX3Bs
YW5lX3JlZ2lzdGVyX2FsbChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKIHZvaWQgZHJtX3BsYW5l
X3VucmVnaXN0ZXJfYWxsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwogaW50IGRybV9wbGFuZV9j
aGVja19waXhlbF9mb3JtYXQoc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCiAJCQkJIHUzMiBmb3Jt
YXQsIHU2NCBtb2RpZmllcik7CitzdHJ1Y3QgZHJtX21vZGVfcmVjdCAqCitfX2RybV9wbGFuZV9n
ZXRfZGFtYWdlX2NsaXBzKGNvbnN0IHN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKnN0YXRlKTsKIAog
LyogZHJtX2JyaWRnZS5jICovCiB2b2lkIGRybV9icmlkZ2VfZGV0YWNoKHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9wbGFuZS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2RybV9wbGFuZS5jCmluZGV4IGIzNzM5NThlY2IzMC4uZjYxMzE1YjYx
MTc0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX3BsYW5lLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2RybV9wbGFuZS5jCkBAIC0xMzk3LDYgKzEzOTcsNTYgQEAgaW50IGRybV9tb2Rl
X3BhZ2VfZmxpcF9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCXJldHVybiByZXQ7CiB9
CiAKKy8qKgorICogZHJtX3BsYW5lX2dldF9kYW1hZ2VfY2xpcHNfY291bnQgLSBSZXR1cm5zIGRh
bWFnZSBjbGlwcyBjb3VudC4KKyAqIEBzdGF0ZTogUGxhbmUgc3RhdGUuCisgKgorICogU2ltcGxl
IGhlbHBlciB0byBnZXQgdGhlIG51bWJlciBvZiAmZHJtX21vZGVfcmVjdCBjbGlwcyBzZXQgYnkg
dXNlci1zcGFjZQorICogZHVyaW5nIHBsYW5lIHVwZGF0ZS4KKyAqCisgKiBSZXR1cm46IE51bWJl
ciBvZiBjbGlwcyBpbiBwbGFuZSBmYl9kYW1hZ2VfY2xpcHMgYmxvYiBwcm9wZXJ0eS4KKyAqLwor
dW5zaWduZWQgaW50Citkcm1fcGxhbmVfZ2V0X2RhbWFnZV9jbGlwc19jb3VudChjb25zdCBzdHJ1
Y3QgZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSkKK3sKKwlyZXR1cm4gKHN0YXRlICYmIHN0YXRlLT5m
Yl9kYW1hZ2VfY2xpcHMpID8KKwkJc3RhdGUtPmZiX2RhbWFnZV9jbGlwcy0+bGVuZ3RoL3NpemVv
ZihzdHJ1Y3QgZHJtX21vZGVfcmVjdCkgOiAwOworfQorRVhQT1JUX1NZTUJPTChkcm1fcGxhbmVf
Z2V0X2RhbWFnZV9jbGlwc19jb3VudCk7CisKK3N0cnVjdCBkcm1fbW9kZV9yZWN0ICoKK19fZHJt
X3BsYW5lX2dldF9kYW1hZ2VfY2xpcHMoY29uc3Qgc3RydWN0IGRybV9wbGFuZV9zdGF0ZSAqc3Rh
dGUpCit7CisJcmV0dXJuIChzdHJ1Y3QgZHJtX21vZGVfcmVjdCAqKSgoc3RhdGUgJiYgc3RhdGUt
PmZiX2RhbWFnZV9jbGlwcykgPworCQkJCQlzdGF0ZS0+ZmJfZGFtYWdlX2NsaXBzLT5kYXRhIDog
TlVMTCk7Cit9CisKKy8qKgorICogZHJtX3BsYW5lX2dldF9kYW1hZ2VfY2xpcHMgLSBSZXR1cm5z
IGRhbWFnZSBjbGlwcy4KKyAqIEBzdGF0ZTogUGxhbmUgc3RhdGUuCisgKgorICogTm90ZSB0aGF0
IHRoaXMgZnVuY3Rpb24gcmV0dXJucyB1YXBpIHR5cGUgJmRybV9tb2RlX3JlY3QuIERyaXZlcnMg
bWlnaHQgd2FudAorICogdG8gdXNlIHRoZSBoZWxwZXIgZnVuY3Rpb25zIGRybV9hdG9taWNfaGVs
cGVyX2RhbWFnZV9pdGVyX2luaXQoKSBhbmQKKyAqIGRybV9hdG9taWNfaGVscGVyX2RhbWFnZV9p
dGVyX25leHQoKSBvciBkcm1fYXRvbWljX2hlbHBlcl9kYW1hZ2VfbWVyZ2VkKCkgaWYKKyAqIHRo
ZSBkcml2ZXIgY2FuIG9ubHkgaGFuZGxlIGEgc2luZ2xlIGRhbWFnZSByZWdpb24gYXQgbW9zdC4K
KyAqCisgKiBSZXR1cm46IERhbWFnZSBjbGlwcyBpbiBwbGFuZSBmYl9kYW1hZ2VfY2xpcHMgYmxv
YiBwcm9wZXJ0eS4KKyAqLworc3RydWN0IGRybV9tb2RlX3JlY3QgKgorZHJtX3BsYW5lX2dldF9k
YW1hZ2VfY2xpcHMoY29uc3Qgc3RydWN0IGRybV9wbGFuZV9zdGF0ZSAqc3RhdGUpCit7CisJc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiA9IHN0YXRlLT5wbGFuZS0+ZGV2OworCXN0cnVjdCBkcm1fbW9k
ZV9jb25maWcgKmNvbmZpZyA9ICZkZXYtPm1vZGVfY29uZmlnOworCisJLyogY2hlY2sgdGhhdCBk
cm1fcGxhbmVfZW5hYmxlX2ZiX2RhbWFnZV9jbGlwcygpIHdhcyBjYWxsZWQgKi8KKwlpZiAoIWRy
bV9tb2RlX29ial9maW5kX3Byb3BfaWQoJnN0YXRlLT5wbGFuZS0+YmFzZSwKKwkJCQkgICAgICAg
Y29uZmlnLT5wcm9wX2ZiX2RhbWFnZV9jbGlwcy0+YmFzZS5pZCkpCisJCWRybV93YXJuX29uY2Uo
ZGV2LCAiZHJtX3BsYW5lX2VuYWJsZV9mYl9kYW1hZ2VfY2xpcHMoKSBub3QgY2FsbGVkXG4iKTsK
KworCXJldHVybiBfX2RybV9wbGFuZV9nZXRfZGFtYWdlX2NsaXBzKHN0YXRlKTsKK30KK0VYUE9S
VF9TWU1CT0woZHJtX3BsYW5lX2dldF9kYW1hZ2VfY2xpcHMpOworCiBzdHJ1Y3QgZHJtX3Byb3Bl
cnR5ICoKIGRybV9jcmVhdGVfc2NhbGluZ19maWx0ZXJfcHJvcChzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LAogCQkJICAgICAgIHVuc2lnbmVkIGludCBzdXBwb3J0ZWRfZmlsdGVycykKZGlmZiAtLWdp
dCBhL2luY2x1ZGUvZHJtL2RybV9wbGFuZS5oIGIvaW5jbHVkZS9kcm0vZHJtX3BsYW5lLmgKaW5k
ZXggN2Y3ZDUxNDgzMTBjLi5hMjY4NGFhYjgzNzIgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL2Ry
bV9wbGFuZS5oCisrKyBiL2luY2x1ZGUvZHJtL2RybV9wbGFuZS5oCkBAIC04OTcsMzkgKzg5Nywx
MSBAQCBzdGF0aWMgaW5saW5lIHN0cnVjdCBkcm1fcGxhbmUgKmRybV9wbGFuZV9maW5kKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsCiAKIGJvb2wgZHJtX2FueV9wbGFuZV9oYXNfZm9ybWF0KHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsCiAJCQkgICAgICB1MzIgZm9ybWF0LCB1NjQgbW9kaWZpZXIpOwot
LyoqCi0gKiBkcm1fcGxhbmVfZ2V0X2RhbWFnZV9jbGlwc19jb3VudCAtIFJldHVybnMgZGFtYWdl
IGNsaXBzIGNvdW50LgotICogQHN0YXRlOiBQbGFuZSBzdGF0ZS4KLSAqCi0gKiBTaW1wbGUgaGVs
cGVyIHRvIGdldCB0aGUgbnVtYmVyIG9mICZkcm1fbW9kZV9yZWN0IGNsaXBzIHNldCBieSB1c2Vy
LXNwYWNlCi0gKiBkdXJpbmcgcGxhbmUgdXBkYXRlLgotICoKLSAqIFJldHVybjogTnVtYmVyIG9m
IGNsaXBzIGluIHBsYW5lIGZiX2RhbWFnZV9jbGlwcyBibG9iIHByb3BlcnR5LgotICovCi1zdGF0
aWMgaW5saW5lIHVuc2lnbmVkIGludAotZHJtX3BsYW5lX2dldF9kYW1hZ2VfY2xpcHNfY291bnQo
Y29uc3Qgc3RydWN0IGRybV9wbGFuZV9zdGF0ZSAqc3RhdGUpCi17Ci0JcmV0dXJuIChzdGF0ZSAm
JiBzdGF0ZS0+ZmJfZGFtYWdlX2NsaXBzKSA/Ci0JCXN0YXRlLT5mYl9kYW1hZ2VfY2xpcHMtPmxl
bmd0aC9zaXplb2Yoc3RydWN0IGRybV9tb2RlX3JlY3QpIDogMDsKLX0KK3Vuc2lnbmVkIGludAor
ZHJtX3BsYW5lX2dldF9kYW1hZ2VfY2xpcHNfY291bnQoY29uc3Qgc3RydWN0IGRybV9wbGFuZV9z
dGF0ZSAqc3RhdGUpOwogCi0vKioKLSAqIGRybV9wbGFuZV9nZXRfZGFtYWdlX2NsaXBzIC0gUmV0
dXJucyBkYW1hZ2UgY2xpcHMuCi0gKiBAc3RhdGU6IFBsYW5lIHN0YXRlLgotICoKLSAqIE5vdGUg
dGhhdCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdWFwaSB0eXBlICZkcm1fbW9kZV9yZWN0LiBEcml2
ZXJzIG1pZ2h0IHdhbnQKLSAqIHRvIHVzZSB0aGUgaGVscGVyIGZ1bmN0aW9ucyBkcm1fYXRvbWlj
X2hlbHBlcl9kYW1hZ2VfaXRlcl9pbml0KCkgYW5kCi0gKiBkcm1fYXRvbWljX2hlbHBlcl9kYW1h
Z2VfaXRlcl9uZXh0KCkgb3IgZHJtX2F0b21pY19oZWxwZXJfZGFtYWdlX21lcmdlZCgpIGlmCi0g
KiB0aGUgZHJpdmVyIGNhbiBvbmx5IGhhbmRsZSBhIHNpbmdsZSBkYW1hZ2UgcmVnaW9uIGF0IG1v
c3QuCi0gKgotICogUmV0dXJuOiBEYW1hZ2UgY2xpcHMgaW4gcGxhbmUgZmJfZGFtYWdlX2NsaXBz
IGJsb2IgcHJvcGVydHkuCi0gKi8KLXN0YXRpYyBpbmxpbmUgc3RydWN0IGRybV9tb2RlX3JlY3Qg
KgotZHJtX3BsYW5lX2dldF9kYW1hZ2VfY2xpcHMoY29uc3Qgc3RydWN0IGRybV9wbGFuZV9zdGF0
ZSAqc3RhdGUpCi17Ci0JcmV0dXJuIChzdHJ1Y3QgZHJtX21vZGVfcmVjdCAqKSgoc3RhdGUgJiYg
c3RhdGUtPmZiX2RhbWFnZV9jbGlwcykgPwotCQkJCQlzdGF0ZS0+ZmJfZGFtYWdlX2NsaXBzLT5k
YXRhIDogTlVMTCk7Ci19CitzdHJ1Y3QgZHJtX21vZGVfcmVjdCAqCitkcm1fcGxhbmVfZ2V0X2Rh
bWFnZV9jbGlwcyhjb25zdCBzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSk7CiAKIGludCBk
cm1fcGxhbmVfY3JlYXRlX3NjYWxpbmdfZmlsdGVyX3Byb3BlcnR5KHN0cnVjdCBkcm1fcGxhbmUg
KnBsYW5lLAogCQkJCQkgICAgIHVuc2lnbmVkIGludCBzdXBwb3J0ZWRfZmlsdGVycyk7Ci0tIAoy
LjMyLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCklu
dGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

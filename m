Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CA0631ACFFE
	for <lists+intel-gfx@lfdr.de>; Thu, 16 Apr 2020 20:57:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2F5F96EABA;
	Thu, 16 Apr 2020 18:57:00 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C98646EABA
 for <intel-gfx@lists.freedesktop.org>; Thu, 16 Apr 2020 18:56:58 +0000 (UTC)
IronPort-SDR: NAZ65+km/bE6NUuRPPIMd2NO/tj7Z7igCHvLt9zTjh6J7gz5zIBftnk8JbmPoojy2iUgOT2Qew
 PHW+WNBW/Nqw==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by orsmga105.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 16 Apr 2020 11:56:58 -0700
IronPort-SDR: 4oua97tX7Eiczfsh6RzqdLrOo0OyFbaj6XMQjvIcJj+iQU6GWY02yV1+LF0FPX3eJDAC5wITMK
 TYGZGxj9EF2Q==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.72,392,1580803200"; d="scan'208";a="253960864"
Received: from bnberkma-mobl2.amr.corp.intel.com (HELO
 josouza-MOBL2.amr.corp.intel.com) ([10.134.94.190])
 by orsmga003.jf.intel.com with ESMTP; 16 Apr 2020 11:56:57 -0700
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 16 Apr 2020 11:58:41 -0700
Message-Id: <20200416185841.125686-1-jose.souza@intel.com>
X-Mailer: git-send-email 2.26.1
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v4] drm/i915: Add missing deinitialization cases
 of load failure
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>,
 Chris Wilson <chris@chris-wilson.co.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIGludGVsX2Rpc3BsYXlfcG93ZXJfcHV0X2FzeW5jKCkgdXNlZCBpbiBUQyBjb2xkIHNlcXVl
bmNlcyBtYWRlCmVhc3kgdG8gaGl0IHRoZSBtaXNzaW5nIGRlaW5pdGlhbGl6YXRpb24gb2YgZHJp
dmVyIGluIGNhc2Ugb2YgbG9hZApmYWlsdXJlIGFzIHNlZW4gaW4gdGhlIHN0YWNrIHRyYWNlIGJl
bGxvdy4KCmludGVsX21vZGVzZXRfZHJpdmVyX3JlbW92ZV9ub2lycSgpIGhhZCB0byBiZSByZW1v
dmVkIGZyb20KaTkxNV9kcml2ZXJfbW9kZXNldF9yZW1vdmVfbm9pcnEoKSBhcyB0aG9zZSBhcmUg
ZGlmZmVyZW50CmluaXRpYWxpYWxpdGlvbiBzdGVwcyB3aXRoIElSUSBhbmQgR0VNIGluaXRpYWxp
emF0aW9uIGluIGJldHdlZW4gdGhlbi4KCltkcm06X19pbnRlbF9lbmdpbmVfaW5pdF9jdHhfd2Eg
W2k5MTVdXSBJbml0aWFsaXplZCAzIGNvbnRleHQgd29ya2Fyb3VuZHMgb24gcmNzJzAKW2RybTpf
X2k5MTVfaW5qZWN0X3Byb2JlX2Vycm9yIFtpOTE1XV0gSW5qZWN0aW5nIGZhaWx1cmUgLTE5IGF0
IGNoZWNrcG9pbnQgMzYgW19fdWNfaW5pdDoyOTRdCltkcm06aTkxNV9oZGNwX2NvbXBvbmVudF91
bmJpbmQgW2k5MTVdXSBJOTE1IEhEQ1AgY29tcCB1bmJpbmQKW2RybTplZHBfcGFuZWxfdmRkX29m
Zl9zeW5jIFtpOTE1XV0gVHVybmluZyBbRU5DT0RFUjoyNzU6RERJIEFdIFZERCBvZmYKW2RybTpl
ZHBfcGFuZWxfdmRkX29mZl9zeW5jIFtpOTE1XV0gUFBfU1RBVFVTOiAweDAwMDAwMDAwIFBQX0NP
TlRST0w6IDB4MDAwMDAwNjAKW2RybTppbnRlbF9wb3dlcl93ZWxsX2Rpc2FibGUgW2k5MTVdXSBk
aXNhYmxpbmcgQVVYIEEKZ2VuZXJhbCBwcm90ZWN0aW9uIGZhdWx0LCBwcm9iYWJseSBmb3Igbm9u
LWNhbm9uaWNhbCBhZGRyZXNzIDB4NmI2YjZiNmI2YjZiNmI2YjogMDAwMCBbIzFdIFBSRUVNUFQg
U01QIE5PUFRJCkNQVTogMyBQSUQ6IDExNDIgQ29tbToga3dvcmtlci91MTY6MjAgVGFpbnRlZDog
RyAgICAgVSAgICAgICAgICAgIDUuNi4wLUNJLVBhdGNod29ya18xNzIyNisgIzEKSGFyZHdhcmUg
bmFtZTogSW50ZWwgQ29ycG9yYXRpb24gVGlnZXIgTGFrZSBDbGllbnQgUGxhdGZvcm0vVGlnZXJM
YWtlIFUgRERSNCBTT0RJTU0gUlZQLCBCSU9TIFRHTFNGV0kxLlIwMC4yNDU3LkExNi4xOTEyMjcw
MDU5IDEyLzI3LzIwMTkKV29ya3F1ZXVlOiBldmVudHNfdW5ib3VuZCBpbnRlbF9kaXNwbGF5X3Bv
d2VyX3B1dF9hc3luY193b3JrIFtpOTE1XQpSSVA6IDAwMTA6X19pbnRlbF9kaXNwbGF5X3Bvd2Vy
X3B1dF9kb21haW4rMHhhNS8weDE4MCBbaTkxNV0KQ29kZTogNDggODUgYzAgNzggNTQgNDQgODkg
ZTEgNDEgYmQgMDEgMDAgMDAgMDAgNDkgYzcgYzQgODAgNDQgNDEgYTAgNDkgZDMgZTUgZWIgMGQg
NDggODMgZWIgMTAgNDggM2IgOWQgMDggYWQgMDAgMDAgNzggMzIgNDggOGIgMDMgPDRjPiA4NSA2
OCAxMCA3NCBlYSA4YiA1MyAwOCA4NSBkMiA3NCAyZCA4MyBlYSAwMSA4NSBkMiA4OSA1MyAwOCA3
NQpSU1A6IDAwMTg6ZmZmZmM5MDAwMDYxZmRiMCBFRkxBR1M6IDAwMDEwMjA2ClJBWDogNmI2YjZi
NmI2YjZiNmI2YiBSQlg6IGZmZmY4ODg0OTQ4ZjVkZjAgUkNYOiAwMDAwMDAwMDAwMDAwMDNkClJE
WDogMDAwMDAwMDA4MDAwMDAwMSBSU0k6IDAwMDAwMDAwMDAwMDAwMDAgUkRJOiAwMDAwMDAwMDAw
MDAwMDAwClJCUDogZmZmZjg4ODQ3OWJlMDAwMCBSMDg6IGZmZmY4ODg0OWExODA5MjAgUjA5OiAw
MDAwMDAwMDAwMDAwMDAwClIxMDogMDAwMDAwMDAwMDAwMDAwMCBSMTE6IDAwMDAwMDAwMDAwMDAw
MDAgUjEyOiBmZmZmZmZmZmEwNDE0NDgwClIxMzogMjAwMDAwMDAwMDAwMDAwMCBSMTQ6IGZmZmY4
ODg0NzliZWIzMjAgUjE1OiAyMDAwMDAwMDAwMDAwMDAwCkZTOiAgMDAwMDAwMDAwMDAwMDAwMCgw
MDAwKSBHUzpmZmZmODg4NDlmZjgwMDAwKDAwMDApIGtubEdTOjAwMDAwMDAwMDAwMDAwMDAKQ1M6
ICAwMDEwIERTOiAwMDAwIEVTOiAwMDAwIENSMDogMDAwMDAwMDA4MDA1MDAzMwpDUjI6IDAwMDA1
NjM0ZmE4ZWQ2NzAgQ1IzOiAwMDAwMDAwMDA1NjEwMDA0IENSNDogMDAwMDAwMDAwMDc2MGVlMApQ
S1JVOiA1NTU1NTU1NApDYWxsIFRyYWNlOgogcmVsZWFzZV9hc3luY19wdXRfZG9tYWlucysweDli
LzB4MTEwIFtpOTE1XQogaW50ZWxfZGlzcGxheV9wb3dlcl9wdXRfYXN5bmNfd29yaysweDkxLzB4
ZjAgW2k5MTVdCiBwcm9jZXNzX29uZV93b3JrKzB4MjYwLzB4NjAwCiA/IHdvcmtlcl90aHJlYWQr
MHhjOS8weDM4MAogd29ya2VyX3RocmVhZCsweDM3LzB4MzgwCiA/IHByb2Nlc3Nfb25lX3dvcmsr
MHg2MDAvMHg2MDAKIGt0aHJlYWQrMHgxMTkvMHgxMzAKID8ga3RocmVhZF9wYXJrKzB4ODAvMHg4
MAogcmV0X2Zyb21fZm9yaysweDI0LzB4NTAKTW9kdWxlcyBsaW5rZWQgaW46IGk5MTUoKykgdmdl
bSBzbmRfaGRhX2NvZGVjX2hkbWkgbWVpX2hkY3AgeDg2X3BrZ190ZW1wX3RoZXJtYWwgY29yZXRl
bXAgY3JjdDEwZGlmX3BjbG11bCBjcmMzMl9wY2xtdWwgY2RjX2V0aGVyIHVzYm5ldCBtaWkgc25k
X2ludGVsX2RzcGNmZyBnaGFzaF9jbG11bG5pX2ludGVsIHNuZF9oZGFfY29kZWMgc25kX2h3ZGVw
IHNuZF9oZGFfY29yZSBlMTAwMGUgcHRwIG1laV9tZSBzbmRfcGNtIHBwc19jb3JlIG1laSBpbnRl
bF9scHNzX3BjaSBwcmltZV9udW1iZXJzIFtsYXN0IHVubG9hZGVkOiBpOTE1XQotLS1bIGVuZCB0
cmFjZSBiNDAyZDFiNDA2MGY4Yjk3IF0tLS0KQlVHOiBzbGVlcGluZyBmdW5jdGlvbiBjYWxsZWQg
ZnJvbSBpbnZhbGlkIGNvbnRleHQgYXQga2VybmVsL3NjaGVkL2NvbXBsZXRpb24uYzo5OQppbl9h
dG9taWMoKTogMCwgaXJxc19kaXNhYmxlZCgpOiAwLCBub25fYmxvY2s6IDAsIHBpZDogMTE0Miwg
bmFtZToga3dvcmtlci91MTY6MjAKSU5GTzogbG9ja2RlcCBpcyB0dXJuZWQgb2ZmLgpQcmVlbXB0
aW9uIGRpc2FibGVkIGF0OgpbPDAwMDAwMDAwMDAwMDAwMDA+XSAweDAKQ1BVOiAzIFBJRDogMTE0
MiBDb21tOiBrd29ya2VyL3UxNjoyMCBUYWludGVkOiBHICAgICBVRCAgICAgICAgICAgNS42LjAt
Q0ktUGF0Y2h3b3JrXzE3MjI2KyAjMQpIYXJkd2FyZSBuYW1lOiBJbnRlbCBDb3Jwb3JhdGlvbiBU
aWdlciBMYWtlIENsaWVudCBQbGF0Zm9ybS9UaWdlckxha2UgVSBERFI0IFNPRElNTSBSVlAsIEJJ
T1MgVEdMU0ZXSTEuUjAwLjI0NTcuQTE2LjE5MTIyNzAwNTkgMTIvMjcvMjAxOQpXb3JrcXVldWU6
IGV2ZW50c191bmJvdW5kIGludGVsX2Rpc3BsYXlfcG93ZXJfcHV0X2FzeW5jX3dvcmsgW2k5MTVd
CkNhbGwgVHJhY2U6CiBkdW1wX3N0YWNrKzB4NzEvMHg5YgogX19fbWlnaHRfc2xlZXArMHgxNzgv
MHgyNjAKIHdhaXRfZm9yX2NvbXBsZXRpb24rMHgzNy8weDFhMAogdmlydF9lZmlfcXVlcnlfdmFy
aWFibGVfaW5mbysweDE2MS8weDFiMAogZWZpX3F1ZXJ5X3ZhcmlhYmxlX3N0b3JlKzB4YjMvMHgx
YTAKID8gZWZpdmFyX2VudHJ5X3NldF9zYWZlKzB4MTljLzB4MjIwCiBlZml2YXJfZW50cnlfc2V0
X3NhZmUrMHgxOWMvMHgyMjAKID8gZWZpX3BzdG9yZV93cml0ZSsweDEwYi8weDE1MAogPyBlZmlf
cHN0b3JlX3dyaXRlKzB4YTAvMHgxNTAKIGVmaV9wc3RvcmVfd3JpdGUrMHgxMGIvMHgxNTAKIHBz
dG9yZV9kdW1wKzB4MTIzLzB4MzQwCiBrbXNnX2R1bXArMHg4Ny8weDFiMAogb29wc19lbmQrMHgz
ZS8weDkwCiBkb19nZW5lcmFsX3Byb3RlY3Rpb24rMHgxYzMvMHgyZjAKIGdlbmVyYWxfcHJvdGVj
dGlvbisweDJkLzB4NDAKUklQOiAwMDEwOl9faW50ZWxfZGlzcGxheV9wb3dlcl9wdXRfZG9tYWlu
KzB4YTUvMHgxODAgW2k5MTVdCkNvZGU6IDQ4IDg1IGMwIDc4IDU0IDQ0IDg5IGUxIDQxIGJkIDAx
IDAwIDAwIDAwIDQ5IGM3IGM0IDgwIDQ0IDQxIGEwIDQ5IGQzIGU1IGViIDBkIDQ4IDgzIGViIDEw
IDQ4IDNiIDlkIDA4IGFkIDAwIDAwIDc4IDMyIDQ4IDhiIDAzIDw0Yz4gODUgNjggMTAgNzQgZWEg
OGIgNTMgMDggODUgZDIgNzQgMmQgODMgZWEgMDEgODUgZDIgODkgNTMgMDggNzUKUlNQOiAwMDE4
OmZmZmZjOTAwMDA2MWZkYjAgRUZMQUdTOiAwMDAxMDIwNgpSQVg6IDZiNmI2YjZiNmI2YjZiNmIg
UkJYOiBmZmZmODg4NDk0OGY1ZGYwIFJDWDogMDAwMDAwMDAwMDAwMDAzZApSRFg6IDAwMDAwMDAw
ODAwMDAwMDEgUlNJOiAwMDAwMDAwMDAwMDAwMDAwIFJESTogMDAwMDAwMDAwMDAwMDAwMApSQlA6
IGZmZmY4ODg0NzliZTAwMDAgUjA4OiBmZmZmODg4NDlhMTgwOTIwIFIwOTogMDAwMDAwMDAwMDAw
MDAwMApSMTA6IDAwMDAwMDAwMDAwMDAwMDAgUjExOiAwMDAwMDAwMDAwMDAwMDAwIFIxMjogZmZm
ZmZmZmZhMDQxNDQ4MApSMTM6IDIwMDAwMDAwMDAwMDAwMDAgUjE0OiBmZmZmODg4NDc5YmViMzIw
IFIxNTogMjAwMDAwMDAwMDAwMDAwMAogcmVsZWFzZV9hc3luY19wdXRfZG9tYWlucysweDliLzB4
MTEwIFtpOTE1XQogaW50ZWxfZGlzcGxheV9wb3dlcl9wdXRfYXN5bmNfd29yaysweDkxLzB4ZjAg
W2k5MTVdCiBwcm9jZXNzX29uZV93b3JrKzB4MjYwLzB4NjAwCiA/IHdvcmtlcl90aHJlYWQrMHhj
OS8weDM4MAogd29ya2VyX3RocmVhZCsweDM3LzB4MzgwCiA/IHByb2Nlc3Nfb25lX3dvcmsrMHg2
MDAvMHg2MDAKIGt0aHJlYWQrMHgxMTkvMHgxMzAKID8ga3RocmVhZF9wYXJrKzB4ODAvMHg4MAog
cmV0X2Zyb21fZm9yaysweDI0LzB4NTAKLS0tLS0tLS0tLS0tWyBjdXQgaGVyZSBdLS0tLS0tLS0t
LS0tCldBUk5JTkc6IENQVTogMyBQSUQ6IDExNDIgYXQga2VybmVsL3JjdS90cmVlX3BsdWdpbi5o
OjI5MyByY3Vfbm90ZV9jb250ZXh0X3N3aXRjaCsweDg3LzB4NjUwCk1vZHVsZXMgbGlua2VkIGlu
OiBpOTE1KCspIHZnZW0gc25kX2hkYV9jb2RlY19oZG1pIG1laV9oZGNwIHg4Nl9wa2dfdGVtcF90
aGVybWFsIGNvcmV0ZW1wIGNyY3QxMGRpZl9wY2xtdWwgY3JjMzJfcGNsbXVsIGNkY19ldGhlciB1
c2JuZXQgbWlpIHNuZF9pbnRlbF9kc3BjZmcgZ2hhc2hfY2xtdWxuaV9pbnRlbCBzbmRfaGRhX2Nv
ZGVjIHNuZF9od2RlcCBzbmRfaGRhX2NvcmUgZTEwMDBlIHB0cCBtZWlfbWUgc25kX3BjbSBwcHNf
Y29yZSBtZWkgaW50ZWxfbHBzc19wY2kgcHJpbWVfbnVtYmVycyBbbGFzdCB1bmxvYWRlZDogaTkx
NV0KCnYyOgotIGZpeGVkIGhhbmRsaW5nIGluIGNhc2Ugb2YgZmFpbHVyZSBpbiBkcm1fdmJsYW5r
X2luaXQoKQotIG1vdmVkIGk5MTVfZ2VtX2RyaXZlcl9yZW1vdmUoKSBjYWxsIHRvIGJlZm9yZQpp
OTE1X2RyaXZlcl9tb2Rlc2V0X3JlbW92ZV9ub2lycSgpIHRoaXMgbWF0Y2ggaW5pdGlhbGl6YXRp
b24gb3JkZXIgdG9vCgp2MzoKLSByZXZlcnRpbmcgY2FsbCBzd2FwIGJldHdlZW4gaTkxNV9yZXNl
dF9lcnJvcl9zdGF0ZSgpIGFuZCBpOTE1X2dlbV9kcml2ZXJfcmVtb3ZlKCkKY2FsbCBvcmRlcgot
IGltcHJvdmVkIGxhYmVsIG5hbWluZyBpbiBpOTE1X2RyaXZlcl9tb2Rlc2V0X3Byb2JlX25vaXJx
KCkKCkNsb3NlczogaHR0cHM6Ly9naXRsYWIuZnJlZWRlc2t0b3Aub3JnL2RybS9pbnRlbC9pc3N1
ZXMvMTY0NwpDYzogSW1yZSBEZWFrIDxpbXJlLmRlYWtAaW50ZWwuY29tPgpDYzogVmlsbGUgU3ly
asOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KQ2M6IEphbmkgTmlrdWxhIDxq
YW5pLm5pa3VsYUBpbnRlbC5jb20+ClJldmlld2VkLWJ5OiBJbXJlIERlYWsgPGltcmUuZGVha0Bp
bnRlbC5jb20+ClJldmlld2VkLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5j
by51az4KU2lnbmVkLW9mZi1ieTogSm9zw6kgUm9iZXJ0byBkZSBTb3V6YSA8am9zZS5zb3V6YUBp
bnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyB8IDI1ICsrKysr
KysrKysrKysrLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAxNCBpbnNlcnRpb25zKCspLCAx
MSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwppbmRleCA2NDFmNWUwM2I2NjEu
LjVmM2M5NzQxMzMyNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCkBAIC0yMjgsMTQgKzIyOCwx
NCBAQCBzdGF0aWMgaW50IGk5MTVfZHJpdmVyX21vZGVzZXRfcHJvYmVfbm9pcnEoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJCXJldCA9IGRybV92YmxhbmtfaW5pdCgmaTkxNS0+ZHJt
LAogCQkJCSAgICAgIElOVEVMX05VTV9QSVBFUyhpOTE1KSk7CiAJCWlmIChyZXQpCi0JCQlnb3Rv
IG91dDsKKwkJCXJldHVybiByZXQ7CiAJfQogCiAJaW50ZWxfYmlvc19pbml0KGk5MTUpOwogCiAJ
cmV0ID0gaW50ZWxfdmdhX3JlZ2lzdGVyKGk5MTUpOwogCWlmIChyZXQpCi0JCWdvdG8gb3V0Owor
CQlnb3RvIGNsZWFudXBfYmlvczsKIAogCWludGVsX3Bvd2VyX2RvbWFpbnNfaW5pdF9odyhpOTE1
LCBmYWxzZSk7CiAKQEAgLTI0MywxMyArMjQzLDE2IEBAIHN0YXRpYyBpbnQgaTkxNV9kcml2ZXJf
bW9kZXNldF9wcm9iZV9ub2lycShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAogCXJl
dCA9IGludGVsX21vZGVzZXRfaW5pdF9ub2lycShpOTE1KTsKIAlpZiAocmV0KQotCQlnb3RvIGNs
ZWFudXBfdmdhX2NsaWVudDsKKwkJZ290byBjbGVhbnVwX3ZnYV9jbGllbnRfcHdfZG9tYWluX2Nz
cjsKIAogCXJldHVybiAwOwogCi1jbGVhbnVwX3ZnYV9jbGllbnQ6CitjbGVhbnVwX3ZnYV9jbGll
bnRfcHdfZG9tYWluX2NzcjoKKwlpbnRlbF9jc3JfdWNvZGVfZmluaShpOTE1KTsKKwlpbnRlbF9w
b3dlcl9kb21haW5zX2RyaXZlcl9yZW1vdmUoaTkxNSk7CiAJaW50ZWxfdmdhX3VucmVnaXN0ZXIo
aTkxNSk7Ci1vdXQ6CitjbGVhbnVwX2Jpb3M6CisJaW50ZWxfYmlvc19kcml2ZXJfcmVtb3ZlKGk5
MTUpOwogCXJldHVybiByZXQ7CiB9CiAKQEAgLTMwOCwxMyArMzExLDEzIEBAIHN0YXRpYyB2b2lk
IGk5MTVfZHJpdmVyX21vZGVzZXRfcmVtb3ZlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
KQogLyogcGFydCAjMjogY2FsbCBhZnRlciBpcnEgdW5pbnN0YWxsICovCiBzdGF0aWMgdm9pZCBp
OTE1X2RyaXZlcl9tb2Rlc2V0X3JlbW92ZV9ub2lycShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSkKIHsKLQlpbnRlbF9tb2Rlc2V0X2RyaXZlcl9yZW1vdmVfbm9pcnEoaTkxNSk7CisJaW50
ZWxfY3NyX3Vjb2RlX2ZpbmkoaTkxNSk7CiAKLQlpbnRlbF9iaW9zX2RyaXZlcl9yZW1vdmUoaTkx
NSk7CisJaW50ZWxfcG93ZXJfZG9tYWluc19kcml2ZXJfcmVtb3ZlKGk5MTUpOwogCiAJaW50ZWxf
dmdhX3VucmVnaXN0ZXIoaTkxNSk7CiAKLQlpbnRlbF9jc3JfdWNvZGVfZmluaShpOTE1KTsKKwlp
bnRlbF9iaW9zX2RyaXZlcl9yZW1vdmUoaTkxNSk7CiB9CiAKIHN0YXRpYyB2b2lkIGludGVsX2lu
aXRfZHBpbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCkBAIC05OTIsNyArOTk1
LDcgQEAgaW50IGk5MTVfZHJpdmVyX3Byb2JlKHN0cnVjdCBwY2lfZGV2ICpwZGV2LCBjb25zdCBz
dHJ1Y3QgcGNpX2RldmljZV9pZCAqZW50KQogb3V0X2NsZWFudXBfaXJxOgogCWludGVsX2lycV91
bmluc3RhbGwoaTkxNSk7CiBvdXRfY2xlYW51cF9tb2Rlc2V0OgotCS8qIEZJWE1FICovCisJaTkx
NV9kcml2ZXJfbW9kZXNldF9yZW1vdmVfbm9pcnEoaTkxNSk7CiBvdXRfY2xlYW51cF9odzoKIAlp
OTE1X2RyaXZlcl9od19yZW1vdmUoaTkxNSk7CiAJaW50ZWxfbWVtb3J5X3JlZ2lvbnNfZHJpdmVy
X3JlbGVhc2UoaTkxNSk7CkBAIC0xMDI5LDEyICsxMDMyLDEyIEBAIHZvaWQgaTkxNV9kcml2ZXJf
cmVtb3ZlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCiAJaW50ZWxfaXJxX3VuaW5z
dGFsbChpOTE1KTsKIAotCWk5MTVfZHJpdmVyX21vZGVzZXRfcmVtb3ZlX25vaXJxKGk5MTUpOwor
CWludGVsX21vZGVzZXRfZHJpdmVyX3JlbW92ZV9ub2lycShpOTE1KTsKIAogCWk5MTVfcmVzZXRf
ZXJyb3Jfc3RhdGUoaTkxNSk7CiAJaTkxNV9nZW1fZHJpdmVyX3JlbW92ZShpOTE1KTsKIAotCWlu
dGVsX3Bvd2VyX2RvbWFpbnNfZHJpdmVyX3JlbW92ZShpOTE1KTsKKwlpOTE1X2RyaXZlcl9tb2Rl
c2V0X3JlbW92ZV9ub2lycShpOTE1KTsKIAogCWk5MTVfZHJpdmVyX2h3X3JlbW92ZShpOTE1KTsK
IAotLSAKMi4yNi4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1n
ZngK

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 64F3E178E7
	for <lists+intel-gfx@lfdr.de>; Wed,  8 May 2019 13:53:02 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 82D0B891D9;
	Wed,  8 May 2019 11:53:00 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 363A4891D9
 for <intel-gfx@lists.freedesktop.org>; Wed,  8 May 2019 11:52:59 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16489515-1500050 
 for multiple; Wed, 08 May 2019 12:52:47 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  8 May 2019 12:52:45 +0100
Message-Id: <20190508115245.27790-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915: Reboot CI if forcewake fails
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SWYgdGhlIEhXIGZhaWwgdG8gYWNrIGEgY2hhbmdlIGluIGZvcmNld2FrZSBzdGF0dXMsIHRoZSBt
YWNoaW5lIGlzIGFzCmdvb2QgYXMgZGVhZCAtLSBpdCBtYXkgcmVjb3ZlciwgYnV0IGluIHJlYWxp
dHkgaXQgbWlzc2VkIHRoZSBtbWlvCnVwZGF0ZXMgYW5kIGlzIG5vdyBpbiBhIHZlcnkgaW5jb25z
aXN0ZW50IHN0YXRlLiBJZiBpdCBoYXBwZW5zLCB3ZSBjYW4ndAp0cnVzdCB0aGUgQ0kgcmVzdWx0
cyAob3IgYXQgbGVhc3QgdGhlIGZhaWxzIG1heSBiZSBnZW51aW5lIGJ1dCBkdWUgdG8KdGhlIEhX
IGJlaW5nIGRlYWQgYW5kIG5vdCB0aGUgYWN0dWFsIHRlc3QhKSBzbyByZWJvb3QgdGhlIG1hY2hp
bmUgKENJCmNoZWNrcyBmb3IgYSBrZXJuZWwgdGFpbnQgaW4gYmV0d2VlbiBlYWNoIHRlc3QgYW5k
IHJlYm9vdHMgaWYgdGhlCm1hY2hpbmUgaXMgdGFpbnRlZCkuCgpTaWduZWQtb2ZmLWJ5OiBDaHJp
cyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KQ2M6IE1pa2EgS3VvcHBhbGEgPG1p
a2Eua3VvcHBhbGFAbGludXguaW50ZWwuY29tPgpDYzogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51
cnN1bGluQGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9yZXNldC5jIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAg
fCAxMSArKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdW5jb3JlLmMgICB8
ICA4ICsrKysrKy0tCiAzIGZpbGVzIGNoYW5nZWQsIDE4IGluc2VydGlvbnMoKyksIDMgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKaW5kZXggNDE5YjM0MTUz
NzBiLi40NjQzNjliYzU1YWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX3Jlc2V0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYwpA
QCAtMTA0Miw3ICsxMDQyLDcgQEAgdm9pZCBpOTE1X3Jlc2V0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1LAogCSAqIHJhdGhlciB0aGFuIGNvbnRpbnVlIG9uIGludG8gb2JsaXZpb24uIEZv
ciBldmVyeW9uZSBlbHNlLAogCSAqIHRoZSBzeXN0ZW0gc2hvdWxkIHN0aWxsIHBsb2QgYWxvbmcs
IGJ1dCB0aGV5IGhhdmUgYmVlbiB3YXJuZWQhCiAJICovCi0JYWRkX3RhaW50KFRBSU5UX1dBUk4s
IExPQ0tERVBfU1RJTExfT0spOworCWFkZF90YWludF9mb3JfQ0koVEFJTlRfV0FSTik7CiBlcnJv
cjoKIAlfX2k5MTVfZ2VtX3NldF93ZWRnZWQoaTkxNSk7CiAJZ290byBmaW5pc2g7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9kcnYuaAppbmRleCAwYTZlYzYxNDk2ZjEuLmQwMjU3ODA4NzM0YyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5oCkBAIC0zMzc1LDQgKzMzNzUsMTUgQEAgc3RhdGljIGlubGluZSB1MzIg
aTkxNV9zY3JhdGNoX29mZnNldChjb25zdCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkK
IAlyZXR1cm4gaTkxNV9nZ3R0X29mZnNldChpOTE1LT5ndC5zY3JhdGNoKTsKIH0KIAorc3RhdGlj
IGlubGluZSB2b2lkIGFkZF90YWludF9mb3JfQ0kodW5zaWduZWQgaW50IHRhaW50KQoreworCS8q
CisJICogVGhlIHN5c3RlbSBpcyAib2siLCBqdXN0IGFib3V0IHN1cnZpdmluZyBmb3IgdGhlIHVz
ZXIsIGJ1dAorCSAqIENJIHJlc3VsdHMgYXJlIG5vdyB1bnJlbGlhYmxlIGFzIHRoZSBIVyBpcyB2
ZXJ5IHN1c3BlY3QuCisJICogQ0kgY2hlY2tzIHRoZSB0YWludCBzdGF0ZSBhZnRlciBldmVyeSB0
ZXN0IGFuZCB3aWxsIHJlYm9vdAorCSAqIHRoZSBtYWNoaW5lIGlmIHRoZSBrZXJuZWwgaXMgdGFp
bnRlZC4KKwkgKi8KKwlhZGRfdGFpbnQodGFpbnQsIExPQ0tERVBfU1RJTExfT0spOworfQorCiAj
ZW5kaWYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdW5jb3JlLmMKaW5kZXggZDFkNTFlMTEyMWUyLi42
ZWMxYmM5N2I2NjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29y
ZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5jCkBAIC0xMTEsOSAr
MTExLDExIEBAIHdhaXRfYWNrX3NldChjb25zdCBzdHJ1Y3QgaW50ZWxfdW5jb3JlX2ZvcmNld2Fr
ZV9kb21haW4gKmQsCiBzdGF0aWMgaW5saW5lIHZvaWQKIGZ3X2RvbWFpbl93YWl0X2Fja19jbGVh
cihjb25zdCBzdHJ1Y3QgaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9kb21haW4gKmQpCiB7Ci0JaWYg
KHdhaXRfYWNrX2NsZWFyKGQsIEZPUkNFV0FLRV9LRVJORUwpKQorCWlmICh3YWl0X2Fja19jbGVh
cihkLCBGT1JDRVdBS0VfS0VSTkVMKSkgewogCQlEUk1fRVJST1IoIiVzOiB0aW1lZCBvdXQgd2Fp
dGluZyBmb3IgZm9yY2V3YWtlIGFjayB0byBjbGVhci5cbiIsCiAJCQkgIGludGVsX3VuY29yZV9m
b3JjZXdha2VfZG9tYWluX3RvX3N0cihkLT5pZCkpOworCQlhZGRfdGFpbnRfZm9yX0NJKFRBSU5U
X1dBUk4pOyAvKiBDSSB1bnJlbGlhYmxlICovCisJfQogfQogCiBlbnVtIGFja190eXBlIHsKQEAg
LTE4Niw5ICsxODgsMTEgQEAgZndfZG9tYWluX2dldChjb25zdCBzdHJ1Y3QgaW50ZWxfdW5jb3Jl
X2ZvcmNld2FrZV9kb21haW4gKmQpCiBzdGF0aWMgaW5saW5lIHZvaWQKIGZ3X2RvbWFpbl93YWl0
X2Fja19zZXQoY29uc3Qgc3RydWN0IGludGVsX3VuY29yZV9mb3JjZXdha2VfZG9tYWluICpkKQog
ewotCWlmICh3YWl0X2Fja19zZXQoZCwgRk9SQ0VXQUtFX0tFUk5FTCkpCisJaWYgKHdhaXRfYWNr
X3NldChkLCBGT1JDRVdBS0VfS0VSTkVMKSkgewogCQlEUk1fRVJST1IoIiVzOiB0aW1lZCBvdXQg
d2FpdGluZyBmb3IgZm9yY2V3YWtlIGFjayByZXF1ZXN0LlxuIiwKIAkJCSAgaW50ZWxfdW5jb3Jl
X2ZvcmNld2FrZV9kb21haW5fdG9fc3RyKGQtPmlkKSk7CisJCWFkZF90YWludF9mb3JfQ0koVEFJ
TlRfV0FSTik7IC8qIENJIHVucmVsaWFibGUgKi8KKwl9CiB9CiAKIHN0YXRpYyBpbmxpbmUgdm9p
ZAotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1n
Zng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7E931D5E36
	for <lists+intel-gfx@lfdr.de>; Mon, 14 Oct 2019 11:08:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 666B76E190;
	Mon, 14 Oct 2019 09:08:32 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A940F6E160
 for <intel-gfx@lists.freedesktop.org>; Mon, 14 Oct 2019 09:08:20 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18828694-1500050 
 for multiple; Mon, 14 Oct 2019 10:08:01 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 14 Oct 2019 10:07:55 +0100
Message-Id: <20191014090757.32111-13-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191014090757.32111-1-chris@chris-wilson.co.uk>
References: <20191014090757.32111-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 13/15] drm/i915: Replace hangcheck by heartbeats
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UmVwbGFjZSBzYW1wbGluZyB0aGUgZW5naW5lIHN0YXRlIGV2ZXJ5IHNvIG9mdGVuIHdpdGggYSBw
ZXJpb2RpYwpoZWFydGJlYXQgcmVxdWVzdCB0byBtZWFzdXJlIHRoZSBoZWFsdGggb2YgYW4gZW5n
aW5lLiBUaGlzIGlzIGNvdXBsZWQKd2l0aCB0aGUgZm9yY2VkLXByZWVtcHRpb24gdG8gYWxsb3cg
bG9uZyBydW5uaW5nIHJlcXVlc3RzIHRvIHN1cnZpdmUgc28KbG9uZyBhcyB0aGV5IGRvIG5vdCBi
bG9jayBvdGhlciB1c2Vycy4KClRoZSBoZWFydGJlYXQgaW50ZXJ2YWwgY2FuIGJlIGFkanVzdGVk
IHBlci1lbmdpbmUgdXNpbmcsCgoJL3N5cy9jbGFzcy9kcm0vY2FyZD8vZW5naW5lLyovaGVhcnRi
ZWF0X2ludGVydmFsX21zCgp2MjogQ291cGxlIGluIHN5c2ZzIGNvbnRyb2xzCgpTaWduZWQtb2Zm
LWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KQ2M6IEpvb25hcyBM
YWh0aW5lbiA8am9vbmFzLmxhaHRpbmVuQGxpbnV4LmludGVsLmNvbT4KQ2M6IFR2cnRrbyBVcnN1
bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+CkNjOiBKb24gQmxvb21maWVsZCA8am9uLmJs
b29tZmllbGRAaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogSm9uIEJsb29tZmllbGQgPGpvbi5ibG9v
bWZpZWxkQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9LY29uZmlnLnByb2Zp
bGUgICAgICAgICAgfCAgMTQgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgICAgICAg
ICAgICAgICAgIHwgICAxIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheS5jICB8ICAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVj
dC5oICAgIHwgICAxIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wbS5jICAg
ICAgICB8ICAgMiAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaCAgICAg
ICAgfCAgMzIgLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jICAg
ICB8ICAxMSArLQogLi4uL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmMg
IHwgMTI4ICsrKysrKysKIC4uLi9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVh
dC5oICB8ICAgNSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYyAg
ICAgfCAgIDUgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9zeXNmcy5j
ICB8ICAzMiArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgg
IHwgIDE3ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5jICAgICAgICAgICAg
fCAgIDEgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuaCAgICAgICAgICAgIHwg
ICA0IC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3BtLmMgICAgICAgICB8ICAg
MSAtCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90eXBlcy5oICAgICAgfCAgIDkg
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfaGFuZ2NoZWNrLmMgICAgIHwgMzYxIC0t
LS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYyAg
ICAgICAgIHwgICAzICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hl
Y2suYyAgfCAgIDQgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgICAgICAg
ICAgIHwgIDg3IC0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jICAgICAgICAg
ICAgICAgfCAgIDMgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgICAgICAg
ICAgIHwgICAxIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMgICAgICAg
ICB8ICAzMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuaCAgICAgICAg
IHwgICAyIC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcHJpb2xpc3RfdHlwZXMuaCAgICB8
ICAgNiArCiAyNSBmaWxlcyBjaGFuZ2VkLCAyMTAgaW5zZXJ0aW9ucygrKSwgNTU1IGRlbGV0aW9u
cygtKQogZGVsZXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2hh
bmdjaGVjay5jCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvS2NvbmZpZy5wcm9m
aWxlIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvS2NvbmZpZy5wcm9maWxlCmluZGV4IDhmY2VlYTg1
OTM3Yi4uNGJlZDI5M2UxZmI0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9LY29u
ZmlnLnByb2ZpbGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvS2NvbmZpZy5wcm9maWxlCkBA
IC00MCwzICs0MCwxNyBAQCBjb25maWcgRFJNX0k5MTVfUFJFRU1QVF9USU1FT1VUCiAJICAvc3lz
L2NsYXNzL2RybS9jYXJkPy9lbmdpbmUvKi9wcmVlbXB0X3RpbWVvdXRfbXMKIAogCSAgTWF5IGJl
IDAgdG8gZGlzYWJsZSB0aGUgdGltZW91dC4KKworY29uZmlnIERSTV9JOTE1X0hFQVJUQkVBVF9J
TlRFUlZBTAorCWludCAiSW50ZXJ2YWwgYmV0d2VlbiBoZWFydGJlYXQgcHVsc2VzIChtcykiCisJ
ZGVmYXVsdCAyNTAwICMgbWlsbGlzZWNvbmRzCisJaGVscAorCSAgVGhlIGRyaXZlciBzZW5kcyBh
IHBlcmlvZGljIGhlYXJ0YmVhdCBkb3duIGFsbCBhY3RpdmUgZW5naW5lcyB0bworCSAgY2hlY2sg
dGhlIGhlYWx0aCBvZiB0aGUgR1BVIGFuZCB1bmRlcnRha2UgcmVndWxhciBob3VzZS1rZWVwaW5n
IG9mCisJICBpbnRlcm5hbCBkcml2ZXIgc3RhdGUuCisKKwkgIFRoaXMgaXMgYWRqdXN0YWJsZSB2
aWEKKwkgIC9zeXMvY2xhc3MvZHJtL2NhcmQ/L2VuZ2luZS8qL2hlYXJ0YmVhdF9pbnRlcnZhbF9t
cworCisJICBNYXkgYmUgMCB0byBkaXNhYmxlIGhlYXJ0YmVhdHMgYW5kIHRoZXJlZm9yZSBkaXNh
YmxlIGF1dG9tYXRpYyBHUFUKKwkgIGhhbmcgZGV0ZWN0aW9uLgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQpp
bmRleCBjZmFiN2M4NTg1YjMuLjU5ZDM1NmNjNDA2YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvTWFrZWZpbGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUKQEAg
LTg4LDcgKzg4LDYgQEAgZ3QteSArPSBcCiAJZ3QvaW50ZWxfZ3RfcG0ubyBcCiAJZ3QvaW50ZWxf
Z3RfcG1faXJxLm8gXAogCWd0L2ludGVsX2d0X3JlcXVlc3RzLm8gXAotCWd0L2ludGVsX2hhbmdj
aGVjay5vIFwKIAlndC9pbnRlbF9scmMubyBcCiAJZ3QvaW50ZWxfcmM2Lm8gXAogCWd0L2ludGVs
X3JlbmRlcnN0YXRlLm8gXApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXkuYwppbmRleCAzY2YzOWZjMTUzYjMuLmEyZWY0YmNmOTI0MiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKQEAgLTE0NDAxLDcgKzE0NDAxLDcg
QEAgc3RhdGljIHZvaWQgaW50ZWxfcGxhbmVfdW5waW5fZmIoc3RydWN0IGludGVsX3BsYW5lX3N0
YXRlICpvbGRfcGxhbmVfc3RhdGUpCiBzdGF0aWMgdm9pZCBmYl9vYmpfYnVtcF9yZW5kZXJfcHJp
b3JpdHkoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKIHsKIAlzdHJ1Y3QgaTkxNV9z
Y2hlZF9hdHRyIGF0dHIgPSB7Ci0JCS5wcmlvcml0eSA9IEk5MTVfUFJJT1JJVFlfRElTUExBWSwK
KwkJLnByaW9yaXR5ID0gSTkxNV9VU0VSX1BSSU9SSVRZKEk5MTVfUFJJT1JJVFlfRElTUExBWSks
CiAJfTsKIAogCWk5MTVfZ2VtX29iamVjdF93YWl0X3ByaW9yaXR5KG9iaiwgMCwgJmF0dHIpOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oCmluZGV4IGIwMjQ1NTg1
YjRkNS4uODE3ZWEwNzI1ZTQzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fb2JqZWN0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X29iamVjdC5oCkBAIC00NjEsNiArNDYxLDUgQEAgaW50IGk5MTVfZ2VtX29iamVjdF93YWl0KHN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiBpbnQgaTkxNV9nZW1fb2JqZWN0X3dhaXRf
cHJpb3JpdHkoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJCQkgIHVuc2lnbmVk
IGludCBmbGFncywKIAkJCQkgIGNvbnN0IHN0cnVjdCBpOTE1X3NjaGVkX2F0dHIgKmF0dHIpOwot
I2RlZmluZSBJOTE1X1BSSU9SSVRZX0RJU1BMQVkgSTkxNV9VU0VSX1BSSU9SSVRZKEk5MTVfUFJJ
T1JJVFlfTUFYKQogCiAjZW5kaWYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BtLmMK
aW5kZXggNzk4N2I1NGZiMWY1Li4wZTk3NTIwY2IxYmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9wbS5jCkBAIC0xMDAsOCArMTAwLDYgQEAgdm9pZCBpOTE1X2dlbV9zdXNwZW5k
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCWludGVsX2d0X3N1c3BlbmQoJmk5MTUt
Pmd0KTsKIAlpbnRlbF91Y19zdXNwZW5kKCZpOTE1LT5ndC51Yyk7CiAKLQljYW5jZWxfZGVsYXll
ZF93b3JrX3N5bmMoJmk5MTUtPmd0LmhhbmdjaGVjay53b3JrKTsKLQogCWk5MTVfZ2VtX2RyYWlu
X2ZyZWVkX29iamVjdHMoaTkxNSk7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2VuZ2luZS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5n
aW5lLmgKaW5kZXggOTNlYTM2N2ZlNjI0Li44YWQ1N2VhY2UzNTEgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2VuZ2luZS5oCkBAIC04OSwzOCArODksNiBAQCBzdHJ1Y3QgZHJtX3ByaW50
ZXI7CiAvKiBzZXFubyBzaXplIGlzIGFjdHVhbGx5IG9ubHkgYSB1aW50MzIsIGJ1dCBzaW5jZSB3
ZSBwbGFuIHRvIHVzZSBNSV9GTFVTSF9EVyB0bwogICogZG8gdGhlIHdyaXRlcywgYW5kIHRoYXQg
bXVzdCBoYXZlIHF3IGFsaWduZWQgb2Zmc2V0cywgc2ltcGx5IHByZXRlbmQgaXQncyA4Yi4KICAq
LwotZW51bSBpbnRlbF9lbmdpbmVfaGFuZ2NoZWNrX2FjdGlvbiB7Ci0JRU5HSU5FX0lETEUgPSAw
LAotCUVOR0lORV9XQUlULAotCUVOR0lORV9BQ1RJVkVfU0VRTk8sCi0JRU5HSU5FX0FDVElWRV9I
RUFELAotCUVOR0lORV9BQ1RJVkVfU1VCVU5JVFMsCi0JRU5HSU5FX1dBSVRfS0lDSywKLQlFTkdJ
TkVfREVBRCwKLX07Ci0KLXN0YXRpYyBpbmxpbmUgY29uc3QgY2hhciAqCi1oYW5nY2hlY2tfYWN0
aW9uX3RvX3N0cihjb25zdCBlbnVtIGludGVsX2VuZ2luZV9oYW5nY2hlY2tfYWN0aW9uIGEpCi17
Ci0Jc3dpdGNoIChhKSB7Ci0JY2FzZSBFTkdJTkVfSURMRToKLQkJcmV0dXJuICJpZGxlIjsKLQlj
YXNlIEVOR0lORV9XQUlUOgotCQlyZXR1cm4gIndhaXQiOwotCWNhc2UgRU5HSU5FX0FDVElWRV9T
RVFOTzoKLQkJcmV0dXJuICJhY3RpdmUgc2Vxbm8iOwotCWNhc2UgRU5HSU5FX0FDVElWRV9IRUFE
OgotCQlyZXR1cm4gImFjdGl2ZSBoZWFkIjsKLQljYXNlIEVOR0lORV9BQ1RJVkVfU1VCVU5JVFM6
Ci0JCXJldHVybiAiYWN0aXZlIHN1YnVuaXRzIjsKLQljYXNlIEVOR0lORV9XQUlUX0tJQ0s6Ci0J
CXJldHVybiAid2FpdCBraWNrIjsKLQljYXNlIEVOR0lORV9ERUFEOgotCQlyZXR1cm4gImRlYWQi
OwotCX0KLQotCXJldHVybiAidW5rbm93biI7Ci19CiAKIHN0YXRpYyBpbmxpbmUgdW5zaWduZWQg
aW50CiBleGVjbGlzdHNfbnVtX3BvcnRzKGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfZXhlY2xp
c3RzICogY29uc3QgZXhlY2xpc3RzKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZW5naW5lX2NzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdp
bmVfY3MuYwppbmRleCAxZWI1MTE0NzgzOWEuLmQ4MjlhZDM0MGNhMCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKQEAgLTMwNSw2ICszMDUsNyBAQCBzdGF0aWMg
aW50IGludGVsX2VuZ2luZV9zZXR1cChzdHJ1Y3QgaW50ZWxfZ3QgKmd0LCBlbnVtIGludGVsX2Vu
Z2luZV9pZCBpZCkKIAlfX3NwcmludF9lbmdpbmVfbmFtZShlbmdpbmUpOwogCiAJZW5naW5lLT5w
cm9wcy5wcmVlbXB0X3RpbWVvdXQgPSBDT05GSUdfRFJNX0k5MTVfUFJFRU1QVF9USU1FT1VUOwor
CWVuZ2luZS0+cHJvcHMuaGVhcnRiZWF0X2ludGVydmFsID0gQ09ORklHX0RSTV9JOTE1X0hFQVJU
QkVBVF9JTlRFUlZBTDsKIAogCS8qCiAJICogVG8gYmUgb3ZlcnJpZGRlbiBieSB0aGUgYmFja2Vu
ZCBvbiBzZXR1cC4gSG93ZXZlciB0byBmYWNpbGl0YXRlCkBAIC01OTksNyArNjAwLDYgQEAgc3Rh
dGljIGludCBpbnRlbF9lbmdpbmVfc2V0dXBfY29tbW9uKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSkKIAlpbnRlbF9lbmdpbmVfaW5pdF9hY3RpdmUoZW5naW5lLCBFTkdJTkVfUEhZU0lD
QUwpOwogCWludGVsX2VuZ2luZV9pbml0X2JyZWFkY3J1bWJzKGVuZ2luZSk7CiAJaW50ZWxfZW5n
aW5lX2luaXRfZXhlY2xpc3RzKGVuZ2luZSk7Ci0JaW50ZWxfZW5naW5lX2luaXRfaGFuZ2NoZWNr
KGVuZ2luZSk7CiAJaW50ZWxfZW5naW5lX2luaXRfY21kX3BhcnNlcihlbmdpbmUpOwogCWludGVs
X2VuZ2luZV9pbml0X19wbShlbmdpbmUpOwogCkBAIC0xNDMyLDggKzE0MzIsMTMgQEAgdm9pZCBp
bnRlbF9lbmdpbmVfZHVtcChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAJCWRybV9w
cmludGYobSwgIioqKiBXRURHRUQgKioqXG4iKTsKIAogCWRybV9wcmludGYobSwgIlx0QXdha2U/
ICVkXG4iLCBhdG9taWNfcmVhZCgmZW5naW5lLT53YWtlcmVmLmNvdW50KSk7Ci0JZHJtX3ByaW50
ZihtLCAiXHRIYW5nY2hlY2s6ICVkIG1zIGFnb1xuIiwKLQkJICAgamlmZmllc190b19tc2Vjcyhq
aWZmaWVzIC0gZW5naW5lLT5oYW5nY2hlY2suYWN0aW9uX3RpbWVzdGFtcCkpOworCisJcmN1X3Jl
YWRfbG9jaygpOworCXJxID0gUkVBRF9PTkNFKGVuZ2luZS0+aGVhcnRiZWF0LnN5c3RvbGUpOwor
CWlmIChycSkKKwkJZHJtX3ByaW50ZihtLCAiXHRIZWFydGJlYXQ6ICVkIG1zIGFnb1xuIiwKKwkJ
CSAgIGppZmZpZXNfdG9fbXNlY3MoamlmZmllcyAtIHJxLT5lbWl0dGVkX2ppZmZpZXMpKTsKKwly
Y3VfcmVhZF91bmxvY2soKTsKIAlkcm1fcHJpbnRmKG0sICJcdFJlc2V0IGNvdW50OiAlZCAoZ2xv
YmFsICVkKVxuIiwKIAkJICAgaTkxNV9yZXNldF9lbmdpbmVfY291bnQoZXJyb3IsIGVuZ2luZSks
CiAJCSAgIGk5MTVfcmVzZXRfY291bnQoZXJyb3IpKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQuYwppbmRleCAyZmM0MTNmOWQ1MDYuLmRjNzQx
ZTg2ZmI0MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5l
X2hlYXJ0YmVhdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9o
ZWFydGJlYXQuYwpAQCAtMTEsNiArMTEsMjcgQEAKICNpbmNsdWRlICJpbnRlbF9lbmdpbmVfcG0u
aCIKICNpbmNsdWRlICJpbnRlbF9lbmdpbmUuaCIKICNpbmNsdWRlICJpbnRlbF9ndC5oIgorI2lu
Y2x1ZGUgImludGVsX3Jlc2V0LmgiCisKKy8qCisgKiBXaGlsZSB0aGUgZW5naW5lIGlzIGFjdGl2
ZSwgd2Ugc2VuZCBhIHBlcmlvZGljIHB1bHNlIGFsb25nIHRoZSBlbmdpbmUKKyAqIHRvIGNoZWNr
IG9uIGl0cyBoZWFsdGggYW5kIHRvIGZsdXNoIGFueSBpZGxlLWJhcnJpZXJzLiBJZiB0aGF0IHJl
cXVlc3QKKyAqIGlzIHN0dWNrLCBhbmQgd2UgZmFpbCB0byBwcmVlbXB0IGl0LCB3ZSBkZWNsYXJl
IHRoZSBlbmdpbmUgaHVuZyBhbmQKKyAqIGlzc3VlIGEgcmVzZXQgLS0gaW4gdGhlIGhvcGUgdGhh
dCByZXN0b3JlcyBwcm9ncmVzcy4KKyAqLworCitzdGF0aWMgdm9pZCBuZXh0X2hlYXJ0YmVhdChz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCit7CisJbG9uZyBkZWxheTsKKworCWRlbGF5
ID0gUkVBRF9PTkNFKGVuZ2luZS0+cHJvcHMuaGVhcnRiZWF0X2ludGVydmFsKTsKKwlpZiAoIWRl
bGF5KQorCQlyZXR1cm47CisKKwlkZWxheSA9IG1zZWNzX3RvX2ppZmZpZXNfdGltZW91dChkZWxh
eSk7CisJc2NoZWR1bGVfZGVsYXllZF93b3JrKCZlbmdpbmUtPmhlYXJ0YmVhdC53b3JrLAorCQkJ
ICAgICAgcm91bmRfamlmZmllc191cF9yZWxhdGl2ZShkZWxheSkpOworfQogCiBzdGF0aWMgdm9p
ZCBpZGxlX3B1bHNlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgc3RydWN0IGk5MTVf
cmVxdWVzdCAqcnEpCiB7CkBAIC0xOCw2ICszOSwxMTMgQEAgc3RhdGljIHZvaWQgaWRsZV9wdWxz
ZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJx
KQogCWk5MTVfcmVxdWVzdF9hZGRfYWN0aXZlX2JhcnJpZXJzKHJxKTsKIH0KIAorc3RhdGljIHZv
aWQgc2hvd19oZWFydGJlYXQoY29uc3Qgc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCisJCQkgICBz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCit7CisJc3RydWN0IGRybV9wcmludGVyIHAg
PSBkcm1fZGVidWdfcHJpbnRlcigiaGVhcnRiZWF0Iik7CisKKwlpbnRlbF9lbmdpbmVfZHVtcChl
bmdpbmUsICZwLAorCQkJICAiJXMgaGVhcnRiZWF0IHtwcmlvOiVkfSBub3QgdGlja2luZ1xuIiwK
KwkJCSAgZW5naW5lLT5uYW1lLAorCQkJICBycS0+c2NoZWQuYXR0ci5wcmlvcml0eSk7Cit9CisK
K3N0YXRpYyB2b2lkIGhlYXJ0YmVhdChzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndyaykKK3sKKwlzdHJ1
Y3QgaTkxNV9zY2hlZF9hdHRyIGF0dHIgPSB7CisJCS5wcmlvcml0eSA9IEk5MTVfVVNFUl9QUklP
UklUWShJOTE1X1BSSU9SSVRZX01JTiksCisJfTsKKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUgPQorCQljb250YWluZXJfb2Yod3JrLCB0eXBlb2YoKmVuZ2luZSksIGhlYXJ0YmVhdC53
b3JrLndvcmspOworCXN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSA9IGVuZ2luZS0+a2VybmVsX2Nv
bnRleHQ7CisJc3RydWN0IGk5MTVfcmVxdWVzdCAqcnE7CisKKwlpZiAoIWludGVsX2VuZ2luZV9w
bV9nZXRfaWZfYXdha2UoZW5naW5lKSkKKwkJcmV0dXJuOworCisJcnEgPSBlbmdpbmUtPmhlYXJ0
YmVhdC5zeXN0b2xlOworCWlmIChycSAmJiBpOTE1X3JlcXVlc3RfY29tcGxldGVkKHJxKSkgewor
CQlpOTE1X3JlcXVlc3RfcHV0KHJxKTsKKwkJZW5naW5lLT5oZWFydGJlYXQuc3lzdG9sZSA9IE5V
TEw7CisJfQorCisJaWYgKGludGVsX2d0X2lzX3dlZGdlZChlbmdpbmUtPmd0KSkKKwkJZ290byBv
dXQ7CisKKwlpZiAoZW5naW5lLT5oZWFydGJlYXQuc3lzdG9sZSkgeworCQlpZiAoZW5naW5lLT5z
Y2hlZHVsZSAmJgorCQkgICAgcnEtPnNjaGVkLmF0dHIucHJpb3JpdHkgPCBJOTE1X1BSSU9SSVRZ
X0JBUlJJRVIpIHsKKwkJCS8qCisJCQkgKiBHcmFkdWFsbHkgcmFpc2UgdGhlIHByaW9yaXR5IG9m
IHRoZSBoZWFydGJlYXQgdG8KKwkJCSAqIGdpdmUgaGlnaCBwcmlvcml0eSB3b3JrIFt3aGljaCBw
cmVzdW1hYmx5IGRlc2lyZXMKKwkJCSAqIGxvdyBsYXRlbmN5IGFuZCBubyBqaXR0ZXJdIHRoZSBj
aGFuY2UgdG8gbmF0dXJhbGx5CisJCQkgKiBjb21wbGV0ZSBiZWZvcmUgYmVpbmcgcHJlZW1wdGVk
LgorCQkJICovCisJCQlhdHRyLnByaW9yaXR5ID0gMDsKKwkJCWlmIChycS0+c2NoZWQuYXR0ci5w
cmlvcml0eSA+PSBhdHRyLnByaW9yaXR5KQorCQkJCWF0dHIucHJpb3JpdHkgPSBJOTE1X1VTRVJf
UFJJT1JJVFkoSTkxNV9QUklPUklUWV9IRUFSVEJFQVQpOworCQkJaWYgKHJxLT5zY2hlZC5hdHRy
LnByaW9yaXR5ID49IGF0dHIucHJpb3JpdHkpCisJCQkJYXR0ci5wcmlvcml0eSA9IEk5MTVfUFJJ
T1JJVFlfQkFSUklFUjsKKworCQkJbG9jYWxfYmhfZGlzYWJsZSgpOworCQkJZW5naW5lLT5zY2hl
ZHVsZShycSwgJmF0dHIpOworCQkJbG9jYWxfYmhfZW5hYmxlKCk7CisJCX0gZWxzZSB7CisJCQlp
ZiAoSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfREVCVUdfR0VNKSkKKwkJCQlzaG93X2hlYXJ0
YmVhdChycSwgZW5naW5lKTsKKworCQkJaW50ZWxfZ3RfaGFuZGxlX2Vycm9yKGVuZ2luZS0+Z3Qs
IGVuZ2luZS0+bWFzaywKKwkJCQkJICAgICAgSTkxNV9FUlJPUl9DQVBUVVJFLAorCQkJCQkgICAg
ICAic3RvcHBlZCBoZWFydGJlYXQgb24gJXMiLAorCQkJCQkgICAgICBlbmdpbmUtPm5hbWUpOwor
CQl9CisJCWdvdG8gb3V0OworCX0KKworCWlmIChlbmdpbmUtPndha2VyZWZfc2VyaWFsID09IGVu
Z2luZS0+c2VyaWFsKQorCQlnb3RvIG91dDsKKworCW11dGV4X2xvY2soJmNlLT50aW1lbGluZS0+
bXV0ZXgpOworCisJaW50ZWxfY29udGV4dF9lbnRlcihjZSk7CisJcnEgPSBfX2k5MTVfcmVxdWVz
dF9jcmVhdGUoY2UsIEdGUF9OT1dBSVQgfCBfX0dGUF9OT1dBUk4pOworCWludGVsX2NvbnRleHRf
ZXhpdChjZSk7CisJaWYgKElTX0VSUihycSkpCisJCWdvdG8gdW5sb2NrOworCisJaWRsZV9wdWxz
ZShlbmdpbmUsIHJxKTsKKwlpZiAoaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2hhbmdjaGVjaykKKwkJ
ZW5naW5lLT5oZWFydGJlYXQuc3lzdG9sZSA9IGk5MTVfcmVxdWVzdF9nZXQocnEpOworCisJX19p
OTE1X3JlcXVlc3RfY29tbWl0KHJxKTsKKwlfX2k5MTVfcmVxdWVzdF9xdWV1ZShycSwgJmF0dHIp
OworCit1bmxvY2s6CisJbXV0ZXhfdW5sb2NrKCZjZS0+dGltZWxpbmUtPm11dGV4KTsKK291dDoK
KwluZXh0X2hlYXJ0YmVhdChlbmdpbmUpOworCWludGVsX2VuZ2luZV9wbV9wdXQoZW5naW5lKTsK
K30KKwordm9pZCBpbnRlbF9lbmdpbmVfdW5wYXJrX2hlYXJ0YmVhdChzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUpCit7CisJaWYgKCFDT05GSUdfRFJNX0k5MTVfSEVBUlRCRUFUX0lOVEVS
VkFMKQorCQlyZXR1cm47CisKKwluZXh0X2hlYXJ0YmVhdChlbmdpbmUpOworfQorCit2b2lkIGlu
dGVsX2VuZ2luZV9wYXJrX2hlYXJ0YmVhdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUp
Cit7CisJY2FuY2VsX2RlbGF5ZWRfd29yaygmZW5naW5lLT5oZWFydGJlYXQud29yayk7CisJaTkx
NV9yZXF1ZXN0X3B1dChmZXRjaF9hbmRfemVybygmZW5naW5lLT5oZWFydGJlYXQuc3lzdG9sZSkp
OworfQorCit2b2lkIGludGVsX2VuZ2luZV9pbml0X2hlYXJ0YmVhdChzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUpCit7CisJSU5JVF9ERUxBWUVEX1dPUksoJmVuZ2luZS0+aGVhcnRiZWF0
LndvcmssIGhlYXJ0YmVhdCk7Cit9CisKIGludCBpbnRlbF9lbmdpbmVfcHVsc2Uoc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lKQogewogCXN0cnVjdCBpOTE1X3NjaGVkX2F0dHIgYXR0ciA9
IHsgLnByaW9yaXR5ID0gSTkxNV9QUklPUklUWV9CQVJSSUVSIH07CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmgKaW5kZXggYjk1MDQ1MWI1OTk4
Li4zOTM5MTAwNDU1NGQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZV9oZWFydGJlYXQuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfaGVhcnRiZWF0LmgKQEAgLTksNiArOSwxMSBAQAogCiBzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzOwogCit2b2lkIGludGVsX2VuZ2luZV9pbml0X2hlYXJ0YmVhdChzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUpOworCit2b2lkIGludGVsX2VuZ2luZV9wYXJrX2hlYXJ0YmVhdChzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwordm9pZCBpbnRlbF9lbmdpbmVfdW5wYXJrX2hl
YXJ0YmVhdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOworCiBpbnQgaW50ZWxfZW5n
aW5lX3B1bHNlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7CiAKICNlbmRpZiAvKiBJ
TlRFTF9FTkdJTkVfSEVBUlRCRUFUX0ggKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2VuZ2luZV9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
ZW5naW5lX3BtLmMKaW5kZXggN2Q3NjYxMWQ5ZGYxLi42ZmJmYTIxNjJlNTQgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5jCkBAIC03LDYgKzcsNyBAQAogI2luY2x1
ZGUgImk5MTVfZHJ2LmgiCiAKICNpbmNsdWRlICJpbnRlbF9lbmdpbmUuaCIKKyNpbmNsdWRlICJp
bnRlbF9lbmdpbmVfaGVhcnRiZWF0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3BtLmgiCiAj
aW5jbHVkZSAiaW50ZWxfZW5naW5lX3Bvb2wuaCIKICNpbmNsdWRlICJpbnRlbF9ndC5oIgpAQCAt
MzQsNyArMzUsNyBAQCBzdGF0aWMgaW50IF9fZW5naW5lX3VucGFyayhzdHJ1Y3QgaW50ZWxfd2Fr
ZXJlZiAqd2YpCiAJaWYgKGVuZ2luZS0+dW5wYXJrKQogCQllbmdpbmUtPnVucGFyayhlbmdpbmUp
OwogCi0JaW50ZWxfZW5naW5lX2luaXRfaGFuZ2NoZWNrKGVuZ2luZSk7CisJaW50ZWxfZW5naW5l
X3VucGFya19oZWFydGJlYXQoZW5naW5lKTsKIAlyZXR1cm4gMDsKIH0KIApAQCAtMTU4LDYgKzE1
OSw3IEBAIHN0YXRpYyBpbnQgX19lbmdpbmVfcGFyayhzdHJ1Y3QgaW50ZWxfd2FrZXJlZiAqd2Yp
CiAKIAljYWxsX2lkbGVfYmFycmllcnMoZW5naW5lKTsgLyogY2xlYW51cCBhZnRlciB3ZWRnaW5n
ICovCiAKKwlpbnRlbF9lbmdpbmVfcGFya19oZWFydGJlYXQoZW5naW5lKTsKIAlpbnRlbF9lbmdp
bmVfZGlzYXJtX2JyZWFkY3J1bWJzKGVuZ2luZSk7CiAJaW50ZWxfZW5naW5lX3Bvb2xfcGFyaygm
ZW5naW5lLT5wb29sKTsKIApAQCAtMTg4LDYgKzE5MCw3IEBAIHZvaWQgaW50ZWxfZW5naW5lX2lu
aXRfX3BtKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAlzdHJ1Y3QgaW50ZWxfcnVu
dGltZV9wbSAqcnBtID0gZW5naW5lLT51bmNvcmUtPnJwbTsKIAogCWludGVsX3dha2VyZWZfaW5p
dCgmZW5naW5lLT53YWtlcmVmLCBycG0sICZ3Zl9vcHMpOworCWludGVsX2VuZ2luZV9pbml0X2hl
YXJ0YmVhdChlbmdpbmUpOwogfQogCiAjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VM
RlRFU1QpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVf
c3lzZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9zeXNmcy5jCmlu
ZGV4IGI5ZWI5ZTRjYmEwYS4uZDdhZGJjYjljNmU1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMuYwpAQCAtMTc5LDYgKzE3OSwzNSBAQCBwcmVlbXB0X3Rp
bWVvdXRfc3RvcmUoc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBrb2JqX2F0dHJpYnV0ZSAq
YXR0ciwKIHN0YXRpYyBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgcHJlZW1wdF90aW1lb3V0X2F0dHIg
PQogX19BVFRSKHByZWVtcHRfdGltZW91dF9tcywgMDY0NCwgcHJlZW1wdF90aW1lb3V0X3Nob3cs
IHByZWVtcHRfdGltZW91dF9zdG9yZSk7CiAKK3N0YXRpYyBzc2l6ZV90CitoZWFydGJlYXRfaW50
ZXJ2YWxfc2hvdyhzdHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IGtvYmpfYXR0cmlidXRlICph
dHRyLAorCQkJY2hhciAqYnVmKQoreworCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9
IGtvYmpfdG9fZW5naW5lKGtvYmopOworCisJcmV0dXJuIHNwcmludGYoYnVmLCAiJWx1XG4iLCBl
bmdpbmUtPnByb3BzLmhlYXJ0YmVhdF9pbnRlcnZhbCk7Cit9CisKK3N0YXRpYyBzc2l6ZV90Cito
ZWFydGJlYXRfaW50ZXJ2YWxfc3RvcmUoc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBrb2Jq
X2F0dHJpYnV0ZSAqYXR0ciwKKwkJCSBjb25zdCBjaGFyICpidWYsIHNpemVfdCBjb3VudCkKK3sK
KwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUgPSBrb2JqX3RvX2VuZ2luZShrb2JqKTsK
Kwl1bnNpZ25lZCBsb25nIGRlbGF5OworCWludCBlcnI7CisKKwllcnIgPSBrc3RydG91bChidWYs
IDAsICZkZWxheSk7CisJaWYgKGVycikKKwkJcmV0dXJuIGVycjsKKworCVdSSVRFX09OQ0UoZW5n
aW5lLT5wcm9wcy5oZWFydGJlYXRfaW50ZXJ2YWwsIGRlbGF5KTsKKwlyZXR1cm4gY291bnQ7Cit9
CisKK3N0YXRpYyBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgaGVhcnRiZWF0X2ludGVydmFsX2F0dHIg
PQorX19BVFRSKGhlYXJ0YmVhdF9pbnRlcnZhbF9tcywgMDY0NCwKKyAgICAgICBoZWFydGJlYXRf
aW50ZXJ2YWxfc2hvdywgaGVhcnRiZWF0X2ludGVydmFsX3N0b3JlKTsKKwogc3RhdGljIHZvaWQg
a29ial9lbmdpbmVfcmVsZWFzZShzdHJ1Y3Qga29iamVjdCAqa29iaikKIHsKIAlrZnJlZShrb2Jq
KTsKQEAgLTIxOCw2ICsyNDcsOSBAQCB2b2lkIGludGVsX2VuZ2luZXNfYWRkX3N5c2ZzKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCQkmaW5zdF9hdHRyLmF0dHIsCiAJCSZjYXBzX2F0
dHIuYXR0ciwKIAkJJmFsbF9jYXBzX2F0dHIuYXR0ciwKKyNpZiBDT05GSUdfRFJNX0k5MTVfSEVB
UlRCRUFUX0lOVEVSVkFMCisJCSZoZWFydGJlYXRfaW50ZXJ2YWxfYXR0ci5hdHRyLAorI2VuZGlm
CiAJCU5VTEwKIAl9OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9lbmdpbmVfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90
eXBlcy5oCmluZGV4IDZhZjliMDA5Njk3NS4uYWQzYmUyZmJkNzFhIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaApAQCAtMTUsNiArMTUsNyBAQAogI2lu
Y2x1ZGUgPGxpbnV4L3JidHJlZS5oPgogI2luY2x1ZGUgPGxpbnV4L3RpbWVyLmg+CiAjaW5jbHVk
ZSA8bGludXgvdHlwZXMuaD4KKyNpbmNsdWRlIDxsaW51eC93b3JrcXVldWUuaD4KIAogI2luY2x1
ZGUgImk5MTVfZ2VtLmgiCiAjaW5jbHVkZSAiaTkxNV9wbXUuaCIKQEAgLTc2LDE0ICs3Nyw2IEBA
IHN0cnVjdCBpbnRlbF9pbnN0ZG9uZSB7CiAJdTMyIHJvd1tJOTE1X01BWF9TTElDRVNdW0k5MTVf
TUFYX1NVQlNMSUNFU107CiB9OwogCi1zdHJ1Y3QgaW50ZWxfZW5naW5lX2hhbmdjaGVjayB7Ci0J
dTY0IGFjdGhkOwotCXUzMiBsYXN0X3Jpbmc7Ci0JdTMyIGxhc3RfaGVhZDsKLQl1bnNpZ25lZCBs
b25nIGFjdGlvbl90aW1lc3RhbXA7Ci0Jc3RydWN0IGludGVsX2luc3Rkb25lIGluc3Rkb25lOwot
fTsKLQogc3RydWN0IGludGVsX3JpbmcgewogCXN0cnVjdCBrcmVmIHJlZjsKIAlzdHJ1Y3QgaTkx
NV92bWEgKnZtYTsKQEAgLTMzMCw2ICszMjMsMTEgQEAgc3RydWN0IGludGVsX2VuZ2luZV9jcyB7
CiAKIAlpbnRlbF9lbmdpbmVfbWFza190IHNhdHVyYXRlZDsgLyogc3VibWl0dGluZyBzZW1hcGhv
cmVzIHRvbyBsYXRlPyAqLwogCisJc3RydWN0IHsKKwkJc3RydWN0IGRlbGF5ZWRfd29yayB3b3Jr
OworCQlzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpzeXN0b2xlOworCX0gaGVhcnRiZWF0OworCiAJdW5z
aWduZWQgbG9uZyBzZXJpYWw7CiAKIAl1bnNpZ25lZCBsb25nIHdha2VyZWZfc2VyaWFsOwpAQCAt
NDgwLDggKzQ3OCw2IEBAIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgewogCS8qIHN0YXR1c19ub3Rp
ZmllcjogbGlzdCBvZiBjYWxsYmFja3MgZm9yIGNvbnRleHQtc3dpdGNoIGNoYW5nZXMgKi8KIAlz
dHJ1Y3QgYXRvbWljX25vdGlmaWVyX2hlYWQgY29udGV4dF9zdGF0dXNfbm90aWZpZXI7CiAKLQlz
dHJ1Y3QgaW50ZWxfZW5naW5lX2hhbmdjaGVjayBoYW5nY2hlY2s7Ci0KICNkZWZpbmUgSTkxNV9F
TkdJTkVfTkVFRFNfQ01EX1BBUlNFUiBCSVQoMCkKICNkZWZpbmUgSTkxNV9FTkdJTkVfU1VQUE9S
VFNfU1RBVFMgICBCSVQoMSkKICNkZWZpbmUgSTkxNV9FTkdJTkVfSEFTX1BSRUVNUFRJT04gICBC
SVQoMikKQEAgLTU0OSw2ICs1NDUsNyBAQCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzIHsKIAogCXN0
cnVjdCB7CiAJCXVuc2lnbmVkIGxvbmcgcHJlZW1wdF90aW1lb3V0OworCQl1bnNpZ25lZCBsb25n
IGhlYXJ0YmVhdF9pbnRlcnZhbDsKIAl9IHByb3BzOwogfTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2d0LmMKaW5kZXggYjM2MTlhMmE1ZDBlLi5mM2UxOTI1OTg3ZTEgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZ3QuYwpAQCAtMjIsNyArMjIsNiBAQCB2b2lkIGludGVsX2d0X2luaXRfZWFy
bHkoc3RydWN0IGludGVsX2d0ICpndCwgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJ
SU5JVF9MSVNUX0hFQUQoJmd0LT5jbG9zZWRfdm1hKTsKIAlzcGluX2xvY2tfaW5pdCgmZ3QtPmNs
b3NlZF9sb2NrKTsKIAotCWludGVsX2d0X2luaXRfaGFuZ2NoZWNrKGd0KTsKIAlpbnRlbF9ndF9p
bml0X3Jlc2V0KGd0KTsKIAlpbnRlbF9ndF9pbml0X3JlcXVlc3RzKGd0KTsKIAlpbnRlbF9ndF9w
bV9pbml0X2Vhcmx5KGd0KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2d0LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5oCmluZGV4IGU2YWIw
YmZmMGVmYi4uNWI2ZWZmZWQzNzEzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ndC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmgKQEAg
LTQ2LDggKzQ2LDYgQEAgdm9pZCBpbnRlbF9ndF9jbGVhcl9lcnJvcl9yZWdpc3RlcnMoc3RydWN0
IGludGVsX2d0ICpndCwKIHZvaWQgaW50ZWxfZ3RfZmx1c2hfZ2d0dF93cml0ZXMoc3RydWN0IGlu
dGVsX2d0ICpndCk7CiB2b2lkIGludGVsX2d0X2NoaXBzZXRfZmx1c2goc3RydWN0IGludGVsX2d0
ICpndCk7CiAKLXZvaWQgaW50ZWxfZ3RfaW5pdF9oYW5nY2hlY2soc3RydWN0IGludGVsX2d0ICpn
dCk7Ci0KIHN0YXRpYyBpbmxpbmUgdTMyIGludGVsX2d0X3NjcmF0Y2hfb2Zmc2V0KGNvbnN0IHN0
cnVjdCBpbnRlbF9ndCAqZ3QsCiAJCQkJCSAgZW51bSBpbnRlbF9ndF9zY3JhdGNoX2ZpZWxkIGZp
ZWxkKQogewpAQCAtNTksNiArNTcsNCBAQCBzdGF0aWMgaW5saW5lIGJvb2wgaW50ZWxfZ3RfaXNf
d2VkZ2VkKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiAJcmV0dXJuIF9faW50ZWxfcmVzZXRfZmFpbGVk
KCZndC0+cmVzZXQpOwogfQogCi12b2lkIGludGVsX2d0X3F1ZXVlX2hhbmdjaGVjayhzdHJ1Y3Qg
aW50ZWxfZ3QgKmd0KTsKLQogI2VuZGlmIC8qIF9fSU5URUxfR1RfSF9fICovCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYwppbmRleCA4N2UzNGUwYjY0MjcuLjg1YWYwZDE2Zjg2OSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9wbS5jCkBAIC01Miw3ICs1Miw2IEBAIHN0
YXRpYyBpbnQgX19ndF91bnBhcmsoc3RydWN0IGludGVsX3dha2VyZWYgKndmKQogCiAJaTkxNV9w
bXVfZ3RfdW5wYXJrZWQoaTkxNSk7CiAKLQlpbnRlbF9ndF9xdWV1ZV9oYW5nY2hlY2soZ3QpOwog
CWludGVsX2d0X3VucGFya19yZXF1ZXN0cyhndCk7CiAKIAlwbV9ub3RpZnkoZ3QsIElOVEVMX0dU
X1VOUEFSSyk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF90
eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaAppbmRleCBi
ZTRiMjYzNjIxYzguLmEyZThjOGE5NTJlNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZ3RfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9ndF90eXBlcy5oCkBAIC0yNiwxNCArMjYsNiBAQCBzdHJ1Y3QgaTkxNV9nZ3R0Owogc3RydWN0
IGludGVsX2VuZ2luZV9jczsKIHN0cnVjdCBpbnRlbF91bmNvcmU7CiAKLXN0cnVjdCBpbnRlbF9o
YW5nY2hlY2sgewotCS8qIEZvciBoYW5nY2hlY2sgdGltZXIgKi8KLSNkZWZpbmUgRFJNX0k5MTVf
SEFOR0NIRUNLX1BFUklPRCAxNTAwIC8qIGluIG1zICovCi0jZGVmaW5lIERSTV9JOTE1X0hBTkdD
SEVDS19KSUZGSUVTIG1zZWNzX3RvX2ppZmZpZXMoRFJNX0k5MTVfSEFOR0NIRUNLX1BFUklPRCkK
LQotCXN0cnVjdCBkZWxheWVkX3dvcmsgd29yazsKLX07Ci0KIHN0cnVjdCBpbnRlbF9ndCB7CiAJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTU7CiAJc3RydWN0IGludGVsX3VuY29yZSAqdW5j
b3JlOwpAQCAtNjcsNyArNTksNiBAQCBzdHJ1Y3QgaW50ZWxfZ3QgewogCXN0cnVjdCBsaXN0X2hl
YWQgY2xvc2VkX3ZtYTsKIAlzcGlubG9ja190IGNsb3NlZF9sb2NrOyAvKiBndWFyZHMgdGhlIGxp
c3Qgb2YgY2xvc2VkX3ZtYSAqLwogCi0Jc3RydWN0IGludGVsX2hhbmdjaGVjayBoYW5nY2hlY2s7
CiAJc3RydWN0IGludGVsX3Jlc2V0IHJlc2V0OwogCiAJLyoqCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9oYW5nY2hlY2suYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2hhbmdjaGVjay5jCmRlbGV0ZWQgZmlsZSBtb2RlIDEwMDY0NAppbmRleCBjMTRk
YmViM2NjYzMuLjAwMDAwMDAwMDAwMAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9oYW5nY2hlY2suYworKysgL2Rldi9udWxsCkBAIC0xLDM2MSArMCwwIEBACi0vKgotICogQ29w
eXJpZ2h0IMKpIDIwMTYgSW50ZWwgQ29ycG9yYXRpb24KLSAqCi0gKiBQZXJtaXNzaW9uIGlzIGhl
cmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQot
ICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmls
ZXMgKHRoZSAiU29mdHdhcmUiKSwKLSAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQg
cmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KLSAqIHRoZSByaWdodHMg
dG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNl
bnNlLAotICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1p
dCBwZXJzb25zIHRvIHdob20gdGhlCi0gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28s
IHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgotICoKLSAqIFRoZSBhYm92ZSBj
b3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIChpbmNsdWRpbmcgdGhl
IG5leHQKLSAqIHBhcmFncmFwaCkgc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBz
dWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUKLSAqIFNvZnR3YXJlLgotICoKLSAqIFRIRSBTT0ZU
V0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBF
WFBSRVNTIE9SCi0gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBX
QVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKLSAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxB
UiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTAotICogVEhF
IEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERB
TUFHRVMgT1IgT1RIRVIKLSAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09O
VFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCi0gKiBGUk9NLCBPVVQgT0YgT1IgSU4g
Q09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdT
Ci0gKiBJTiBUSEUgU09GVFdBUkUuCi0gKgotICovCi0KLSNpbmNsdWRlICJpOTE1X2Rydi5oIgot
I2luY2x1ZGUgImludGVsX2VuZ2luZS5oIgotI2luY2x1ZGUgImludGVsX2d0LmgiCi0jaW5jbHVk
ZSAiaW50ZWxfcmVzZXQuaCIKLQotc3RydWN0IGhhbmdjaGVjayB7Ci0JdTY0IGFjdGhkOwotCXUz
MiByaW5nOwotCXUzMiBoZWFkOwotCWVudW0gaW50ZWxfZW5naW5lX2hhbmdjaGVja19hY3Rpb24g
YWN0aW9uOwotCXVuc2lnbmVkIGxvbmcgYWN0aW9uX3RpbWVzdGFtcDsKLQlpbnQgZGVhZGxvY2s7
Ci0Jc3RydWN0IGludGVsX2luc3Rkb25lIGluc3Rkb25lOwotCWJvb2wgd2VkZ2VkOjE7Ci0JYm9v
bCBzdGFsbGVkOjE7Ci19OwotCi1zdGF0aWMgYm9vbCBpbnN0ZG9uZV91bmNoYW5nZWQodTMyIGN1
cnJlbnRfaW5zdGRvbmUsIHUzMiAqb2xkX2luc3Rkb25lKQotewotCXUzMiB0bXAgPSBjdXJyZW50
X2luc3Rkb25lIHwgKm9sZF9pbnN0ZG9uZTsKLQlib29sIHVuY2hhbmdlZDsKLQotCXVuY2hhbmdl
ZCA9IHRtcCA9PSAqb2xkX2luc3Rkb25lOwotCSpvbGRfaW5zdGRvbmUgfD0gdG1wOwotCi0JcmV0
dXJuIHVuY2hhbmdlZDsKLX0KLQotc3RhdGljIGJvb2wgc3VidW5pdHNfc3R1Y2soc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lKQotewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiA9IGVuZ2luZS0+aTkxNTsKLQljb25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSA9
ICZSVU5USU1FX0lORk8oZGV2X3ByaXYpLT5zc2V1OwotCXN0cnVjdCBpbnRlbF9pbnN0ZG9uZSBp
bnN0ZG9uZTsKLQlzdHJ1Y3QgaW50ZWxfaW5zdGRvbmUgKmFjY3VfaW5zdGRvbmUgPSAmZW5naW5l
LT5oYW5nY2hlY2suaW5zdGRvbmU7Ci0JYm9vbCBzdHVjazsKLQlpbnQgc2xpY2U7Ci0JaW50IHN1
YnNsaWNlOwotCi0JaW50ZWxfZW5naW5lX2dldF9pbnN0ZG9uZShlbmdpbmUsICZpbnN0ZG9uZSk7
Ci0KLQkvKiBUaGVyZSBtaWdodCBiZSB1bnN0YWJsZSBzdWJ1bml0IHN0YXRlcyBldmVuIHdoZW4K
LQkgKiBhY3R1YWwgaGVhZCBpcyBub3QgbW92aW5nLiBGaWx0ZXIgb3V0IHRoZSB1bnN0YWJsZSBv
bmVzIGJ5Ci0JICogYWNjdW11bGF0aW5nIHRoZSB1bmRvbmUgLT4gZG9uZSB0cmFuc2l0aW9ucyBh
bmQgb25seQotCSAqIGNvbnNpZGVyIHRob3NlIGFzIHByb2dyZXNzLgotCSAqLwotCXN0dWNrID0g
aW5zdGRvbmVfdW5jaGFuZ2VkKGluc3Rkb25lLmluc3Rkb25lLAotCQkJCSAgICZhY2N1X2luc3Rk
b25lLT5pbnN0ZG9uZSk7Ci0Jc3R1Y2sgJj0gaW5zdGRvbmVfdW5jaGFuZ2VkKGluc3Rkb25lLnNs
aWNlX2NvbW1vbiwKLQkJCQkgICAgJmFjY3VfaW5zdGRvbmUtPnNsaWNlX2NvbW1vbik7Ci0KLQlm
b3JfZWFjaF9pbnN0ZG9uZV9zbGljZV9zdWJzbGljZShkZXZfcHJpdiwgc3NldSwgc2xpY2UsIHN1
YnNsaWNlKSB7Ci0JCXN0dWNrICY9IGluc3Rkb25lX3VuY2hhbmdlZChpbnN0ZG9uZS5zYW1wbGVy
W3NsaWNlXVtzdWJzbGljZV0sCi0JCQkJCSAgICAmYWNjdV9pbnN0ZG9uZS0+c2FtcGxlcltzbGlj
ZV1bc3Vic2xpY2VdKTsKLQkJc3R1Y2sgJj0gaW5zdGRvbmVfdW5jaGFuZ2VkKGluc3Rkb25lLnJv
d1tzbGljZV1bc3Vic2xpY2VdLAotCQkJCQkgICAgJmFjY3VfaW5zdGRvbmUtPnJvd1tzbGljZV1b
c3Vic2xpY2VdKTsKLQl9Ci0KLQlyZXR1cm4gc3R1Y2s7Ci19Ci0KLXN0YXRpYyBlbnVtIGludGVs
X2VuZ2luZV9oYW5nY2hlY2tfYWN0aW9uCi1oZWFkX3N0dWNrKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSwgdTY0IGFjdGhkKQotewotCWlmIChhY3RoZCAhPSBlbmdpbmUtPmhhbmdjaGVj
ay5hY3RoZCkgewotCi0JCS8qIENsZWFyIHN1YnVuaXQgc3RhdGVzIG9uIGhlYWQgbW92ZW1lbnQg
Ki8KLQkJbWVtc2V0KCZlbmdpbmUtPmhhbmdjaGVjay5pbnN0ZG9uZSwgMCwKLQkJICAgICAgIHNp
emVvZihlbmdpbmUtPmhhbmdjaGVjay5pbnN0ZG9uZSkpOwotCi0JCXJldHVybiBFTkdJTkVfQUNU
SVZFX0hFQUQ7Ci0JfQotCi0JaWYgKCFzdWJ1bml0c19zdHVjayhlbmdpbmUpKQotCQlyZXR1cm4g
RU5HSU5FX0FDVElWRV9TVUJVTklUUzsKLQotCXJldHVybiBFTkdJTkVfREVBRDsKLX0KLQotc3Rh
dGljIGVudW0gaW50ZWxfZW5naW5lX2hhbmdjaGVja19hY3Rpb24KLWVuZ2luZV9zdHVjayhzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIHU2NCBhY3RoZCkKLXsKLQllbnVtIGludGVsX2Vu
Z2luZV9oYW5nY2hlY2tfYWN0aW9uIGhhOwotCXUzMiB0bXA7Ci0KLQloYSA9IGhlYWRfc3R1Y2so
ZW5naW5lLCBhY3RoZCk7Ci0JaWYgKGhhICE9IEVOR0lORV9ERUFEKQotCQlyZXR1cm4gaGE7Ci0K
LQlpZiAoSVNfR0VOKGVuZ2luZS0+aTkxNSwgMikpCi0JCXJldHVybiBFTkdJTkVfREVBRDsKLQot
CS8qIElzIHRoZSBjaGlwIGhhbmdpbmcgb24gYSBXQUlUX0ZPUl9FVkVOVD8KLQkgKiBJZiBzbyB3
ZSBjYW4gc2ltcGx5IHBva2UgdGhlIFJCX1dBSVQgYml0Ci0JICogYW5kIGJyZWFrIHRoZSBoYW5n
LiBUaGlzIHNob3VsZCB3b3JrIG9uCi0JICogYWxsIGJ1dCB0aGUgc2Vjb25kIGdlbmVyYXRpb24g
Y2hpcHNldHMuCi0JICovCi0JdG1wID0gRU5HSU5FX1JFQUQoZW5naW5lLCBSSU5HX0NUTCk7Ci0J
aWYgKHRtcCAmIFJJTkdfV0FJVCkgewotCQlpbnRlbF9ndF9oYW5kbGVfZXJyb3IoZW5naW5lLT5n
dCwgZW5naW5lLT5tYXNrLCAwLAotCQkJCSAgICAgICJzdHVjayB3YWl0IG9uICVzIiwgZW5naW5l
LT5uYW1lKTsKLQkJRU5HSU5FX1dSSVRFKGVuZ2luZSwgUklOR19DVEwsIHRtcCk7Ci0JCXJldHVy
biBFTkdJTkVfV0FJVF9LSUNLOwotCX0KLQotCXJldHVybiBFTkdJTkVfREVBRDsKLX0KLQotc3Rh
dGljIHZvaWQgaGFuZ2NoZWNrX2xvYWRfc2FtcGxlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSwKLQkJCQkgIHN0cnVjdCBoYW5nY2hlY2sgKmhjKQotewotCWhjLT5hY3RoZCA9IGludGVs
X2VuZ2luZV9nZXRfYWN0aXZlX2hlYWQoZW5naW5lKTsKLQloYy0+cmluZyA9IEVOR0lORV9SRUFE
KGVuZ2luZSwgUklOR19TVEFSVCk7Ci0JaGMtPmhlYWQgPSBFTkdJTkVfUkVBRChlbmdpbmUsIFJJ
TkdfSEVBRCk7Ci19Ci0KLXN0YXRpYyB2b2lkIGhhbmdjaGVja19zdG9yZV9zYW1wbGUoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAotCQkJCSAgIGNvbnN0IHN0cnVjdCBoYW5nY2hlY2sg
KmhjKQotewotCWVuZ2luZS0+aGFuZ2NoZWNrLmFjdGhkID0gaGMtPmFjdGhkOwotCWVuZ2luZS0+
aGFuZ2NoZWNrLmxhc3RfcmluZyA9IGhjLT5yaW5nOwotCWVuZ2luZS0+aGFuZ2NoZWNrLmxhc3Rf
aGVhZCA9IGhjLT5oZWFkOwotfQotCi1zdGF0aWMgZW51bSBpbnRlbF9lbmdpbmVfaGFuZ2NoZWNr
X2FjdGlvbgotaGFuZ2NoZWNrX2dldF9hY3Rpb24oc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5n
aW5lLAotCQkgICAgIGNvbnN0IHN0cnVjdCBoYW5nY2hlY2sgKmhjKQotewotCWlmIChpbnRlbF9l
bmdpbmVfaXNfaWRsZShlbmdpbmUpKQotCQlyZXR1cm4gRU5HSU5FX0lETEU7Ci0KLQlpZiAoZW5n
aW5lLT5oYW5nY2hlY2subGFzdF9yaW5nICE9IGhjLT5yaW5nKQotCQlyZXR1cm4gRU5HSU5FX0FD
VElWRV9TRVFOTzsKLQotCWlmIChlbmdpbmUtPmhhbmdjaGVjay5sYXN0X2hlYWQgIT0gaGMtPmhl
YWQpCi0JCXJldHVybiBFTkdJTkVfQUNUSVZFX1NFUU5POwotCi0JcmV0dXJuIGVuZ2luZV9zdHVj
ayhlbmdpbmUsIGhjLT5hY3RoZCk7Ci19Ci0KLXN0YXRpYyB2b2lkIGhhbmdjaGVja19hY2N1bXVs
YXRlX3NhbXBsZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCi0JCQkJCXN0cnVjdCBo
YW5nY2hlY2sgKmhjKQotewotCXVuc2lnbmVkIGxvbmcgdGltZW91dCA9IEk5MTVfRU5HSU5FX0RF
QURfVElNRU9VVDsKLQotCWhjLT5hY3Rpb24gPSBoYW5nY2hlY2tfZ2V0X2FjdGlvbihlbmdpbmUs
IGhjKTsKLQotCS8qIFdlIGFsd2F5cyBpbmNyZW1lbnQgdGhlIHByb2dyZXNzCi0JICogaWYgdGhl
IGVuZ2luZSBpcyBidXN5IGFuZCBzdGlsbCBwcm9jZXNzaW5nCi0JICogdGhlIHNhbWUgcmVxdWVz
dCwgc28gdGhhdCBubyBzaW5nbGUgcmVxdWVzdAotCSAqIGNhbiBydW4gaW5kZWZpbml0ZWx5IChz
dWNoIGFzIGEgY2hhaW4gb2YKLQkgKiBiYXRjaGVzKS4gVGhlIG9ubHkgdGltZSB3ZSBkbyBub3Qg
aW5jcmVtZW50Ci0JICogdGhlIGhhbmdjaGVjayBzY29yZSBvbiB0aGlzIHJpbmcsIGlmIHRoaXMK
LQkgKiBlbmdpbmUgaXMgaW4gYSBsZWdpdGltYXRlIHdhaXQgZm9yIGFub3RoZXIKLQkgKiBlbmdp
bmUuIEluIHRoYXQgY2FzZSB0aGUgd2FpdGluZyBlbmdpbmUgaXMgYQotCSAqIHZpY3RpbSBhbmQg
d2Ugd2FudCB0byBiZSBzdXJlIHdlIGNhdGNoIHRoZQotCSAqIHJpZ2h0IGN1bHByaXQuIFRoZW4g
ZXZlcnkgdGltZSB3ZSBkbyBraWNrCi0JICogdGhlIHJpbmcsIG1ha2UgaXQgYXMgYSBwcm9ncmVz
cyBhcyB0aGUgc2Vxbm8KLQkgKiBhZHZhbmNlbWVudCBtaWdodCBlbnN1cmUgYW5kIGlmIG5vdCwg
aXQKLQkgKiB3aWxsIGNhdGNoIHRoZSBoYW5naW5nIGVuZ2luZS4KLQkgKi8KLQotCXN3aXRjaCAo
aGMtPmFjdGlvbikgewotCWNhc2UgRU5HSU5FX0lETEU6Ci0JY2FzZSBFTkdJTkVfQUNUSVZFX1NF
UU5POgotCQkvKiBDbGVhciBoZWFkIGFuZCBzdWJ1bml0IHN0YXRlcyBvbiBzZXFubyBtb3ZlbWVu
dCAqLwotCQloYy0+YWN0aGQgPSAwOwotCi0JCW1lbXNldCgmZW5naW5lLT5oYW5nY2hlY2suaW5z
dGRvbmUsIDAsCi0JCSAgICAgICBzaXplb2YoZW5naW5lLT5oYW5nY2hlY2suaW5zdGRvbmUpKTsK
LQotCQkvKiBJbnRlbnRpb25hbCBmYWxsIHRocm91Z2ggKi8KLQljYXNlIEVOR0lORV9XQUlUX0tJ
Q0s6Ci0JY2FzZSBFTkdJTkVfV0FJVDoKLQkJZW5naW5lLT5oYW5nY2hlY2suYWN0aW9uX3RpbWVz
dGFtcCA9IGppZmZpZXM7Ci0JCWJyZWFrOwotCi0JY2FzZSBFTkdJTkVfQUNUSVZFX0hFQUQ6Ci0J
Y2FzZSBFTkdJTkVfQUNUSVZFX1NVQlVOSVRTOgotCQkvKgotCQkgKiBTZXFubyBzdHVjayB3aXRo
IHN0aWxsIGFjdGl2ZSBlbmdpbmUgZ2V0cyBsZWV3YXksCi0JCSAqIGluIGhvcGVzIHRoYXQgaXQg
aXMganVzdCBhIGxvbmcgc2hhZGVyLgotCQkgKi8KLQkJdGltZW91dCA9IEk5MTVfU0VRTk9fREVB
RF9USU1FT1VUOwotCQlicmVhazsKLQotCWNhc2UgRU5HSU5FX0RFQUQ6Ci0JCWJyZWFrOwotCi0J
ZGVmYXVsdDoKLQkJTUlTU0lOR19DQVNFKGhjLT5hY3Rpb24pOwotCX0KLQotCWhjLT5zdGFsbGVk
ID0gdGltZV9hZnRlcihqaWZmaWVzLAotCQkJCSBlbmdpbmUtPmhhbmdjaGVjay5hY3Rpb25fdGlt
ZXN0YW1wICsgdGltZW91dCk7Ci0JaGMtPndlZGdlZCA9IHRpbWVfYWZ0ZXIoamlmZmllcywKLQkJ
CQkgZW5naW5lLT5oYW5nY2hlY2suYWN0aW9uX3RpbWVzdGFtcCArCi0JCQkJIEk5MTVfRU5HSU5F
X1dFREdFRF9USU1FT1VUKTsKLX0KLQotc3RhdGljIHZvaWQgaGFuZ2NoZWNrX2RlY2xhcmVfaGFu
ZyhzdHJ1Y3QgaW50ZWxfZ3QgKmd0LAotCQkJCSAgIGludGVsX2VuZ2luZV9tYXNrX3QgaHVuZywK
LQkJCQkgICBpbnRlbF9lbmdpbmVfbWFza190IHN0dWNrKQotewotCXN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZTsKLQlpbnRlbF9lbmdpbmVfbWFza190IHRtcDsKLQljaGFyIG1zZ1s4MF07
Ci0JaW50IGxlbjsKLQotCS8qIElmIHNvbWUgcmluZ3MgaHVuZyBidXQgb3RoZXJzIHdlcmUgc3Rp
bGwgYnVzeSwgb25seQotCSAqIGJsYW1lIHRoZSBoYW5naW5nIHJpbmdzIGluIHRoZSBzeW5vcHNp
cy4KLQkgKi8KLQlpZiAoc3R1Y2sgIT0gaHVuZykKLQkJaHVuZyAmPSB+c3R1Y2s7Ci0JbGVuID0g
c2NucHJpbnRmKG1zZywgc2l6ZW9mKG1zZyksCi0JCQkiJXMgb24gIiwgc3R1Y2sgPT0gaHVuZyA/
ICJubyBwcm9ncmVzcyIgOiAiaGFuZyIpOwotCWZvcl9lYWNoX2VuZ2luZV9tYXNrZWQoZW5naW5l
LCBndC0+aTkxNSwgaHVuZywgdG1wKQotCQlsZW4gKz0gc2NucHJpbnRmKG1zZyArIGxlbiwgc2l6
ZW9mKG1zZykgLSBsZW4sCi0JCQkJICIlcywgIiwgZW5naW5lLT5uYW1lKTsKLQltc2dbbGVuLTJd
ID0gJ1wwJzsKLQotCXJldHVybiBpbnRlbF9ndF9oYW5kbGVfZXJyb3IoZ3QsIGh1bmcsIEk5MTVf
RVJST1JfQ0FQVFVSRSwgIiVzIiwgbXNnKTsKLX0KLQotLyoKLSAqIFRoaXMgaXMgY2FsbGVkIHdo
ZW4gdGhlIGNoaXAgaGFzbid0IHJlcG9ydGVkIGJhY2sgd2l0aCBjb21wbGV0ZWQKLSAqIGJhdGNo
YnVmZmVycyBpbiBhIGxvbmcgdGltZS4gV2Uga2VlcCB0cmFjayBwZXIgcmluZyBzZXFubyBwcm9n
cmVzcyBhbmQKLSAqIGlmIHRoZXJlIGFyZSBubyBwcm9ncmVzcywgaGFuZ2NoZWNrIHNjb3JlIGZv
ciB0aGF0IHJpbmcgaXMgaW5jcmVhc2VkLgotICogRnVydGhlciwgYWN0aGQgaXMgaW5zcGVjdGVk
IHRvIHNlZSBpZiB0aGUgcmluZyBpcyBzdHVjay4gT24gc3R1Y2sgY2FzZQotICogd2Uga2ljayB0
aGUgcmluZy4gSWYgd2Ugc2VlIG5vIHByb2dyZXNzIG9uIHRocmVlIHN1YnNlcXVlbnQgY2FsbHMK
LSAqIHdlIGFzc3VtZSBjaGlwIGlzIHdlZGdlZCBhbmQgdHJ5IHRvIGZpeCBpdCBieSByZXNldHRp
bmcgdGhlIGNoaXAuCi0gKi8KLXN0YXRpYyB2b2lkIGhhbmdjaGVja19lbGFwc2VkKHN0cnVjdCB3
b3JrX3N0cnVjdCAqd29yaykKLXsKLQlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0KLQkJY29udGFpbmVy
X29mKHdvcmssIHR5cGVvZigqZ3QpLCBoYW5nY2hlY2sud29yay53b3JrKTsKLQlpbnRlbF9lbmdp
bmVfbWFza190IGh1bmcgPSAwLCBzdHVjayA9IDAsIHdlZGdlZCA9IDA7Ci0Jc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqZW5naW5lOwotCWVudW0gaW50ZWxfZW5naW5lX2lkIGlkOwotCWludGVsX3dh
a2VyZWZfdCB3YWtlcmVmOwotCi0JaWYgKCFpOTE1X21vZHBhcmFtcy5lbmFibGVfaGFuZ2NoZWNr
KQotCQlyZXR1cm47Ci0KLQlpZiAoIVJFQURfT05DRShndC0+YXdha2UpKQotCQlyZXR1cm47Ci0K
LQlpZiAoaW50ZWxfZ3RfaXNfd2VkZ2VkKGd0KSkKLQkJcmV0dXJuOwotCi0Jd2FrZXJlZiA9IGlu
dGVsX3J1bnRpbWVfcG1fZ2V0X2lmX2luX3VzZShndC0+dW5jb3JlLT5ycG0pOwotCWlmICghd2Fr
ZXJlZikKLQkJcmV0dXJuOwotCi0JLyogQXMgZW5hYmxpbmcgdGhlIEdQVSByZXF1aXJlcyBmYWly
bHkgZXh0ZW5zaXZlIG1taW8gYWNjZXNzLAotCSAqIHBlcmlvZGljYWxseSBhcm0gdGhlIG1taW8g
Y2hlY2tlciB0byBzZWUgaWYgd2UgYXJlIHRyaWdnZXJpbmcKLQkgKiBhbnkgaW52YWxpZCBhY2Nl
c3MuCi0JICovCi0JaW50ZWxfdW5jb3JlX2FybV91bmNsYWltZWRfbW1pb19kZXRlY3Rpb24oZ3Qt
PnVuY29yZSk7Ci0KLQlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBndC0+aTkxNSwgaWQpIHsKLQkJ
c3RydWN0IGhhbmdjaGVjayBoYzsKLQotCQlpbnRlbF9lbmdpbmVfYnJlYWRjcnVtYnNfaXJxKGVu
Z2luZSk7Ci0KLQkJaGFuZ2NoZWNrX2xvYWRfc2FtcGxlKGVuZ2luZSwgJmhjKTsKLQkJaGFuZ2No
ZWNrX2FjY3VtdWxhdGVfc2FtcGxlKGVuZ2luZSwgJmhjKTsKLQkJaGFuZ2NoZWNrX3N0b3JlX3Nh
bXBsZShlbmdpbmUsICZoYyk7Ci0KLQkJaWYgKGhjLnN0YWxsZWQpIHsKLQkJCWh1bmcgfD0gZW5n
aW5lLT5tYXNrOwotCQkJaWYgKGhjLmFjdGlvbiAhPSBFTkdJTkVfREVBRCkKLQkJCQlzdHVjayB8
PSBlbmdpbmUtPm1hc2s7Ci0JCX0KLQotCQlpZiAoaGMud2VkZ2VkKQotCQkJd2VkZ2VkIHw9IGVu
Z2luZS0+bWFzazsKLQl9Ci0KLQlpZiAoR0VNX1NIT1dfREVCVUcoKSAmJiAoaHVuZyB8IHN0dWNr
KSkgewotCQlzdHJ1Y3QgZHJtX3ByaW50ZXIgcCA9IGRybV9kZWJ1Z19wcmludGVyKCJoYW5nY2hl
Y2siKTsKLQotCQlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBndC0+aTkxNSwgaWQpIHsKLQkJCWlm
IChpbnRlbF9lbmdpbmVfaXNfaWRsZShlbmdpbmUpKQotCQkJCWNvbnRpbnVlOwotCi0JCQlpbnRl
bF9lbmdpbmVfZHVtcChlbmdpbmUsICZwLCAiJXNcbiIsIGVuZ2luZS0+bmFtZSk7Ci0JCX0KLQl9
Ci0KLQlpZiAod2VkZ2VkKSB7Ci0JCWRldl9lcnIoZ3QtPmk5MTUtPmRybS5kZXYsCi0JCQkiR1BV
IHJlY292ZXJ5IHRpbWVkIG91dCwiCi0JCQkiIGNhbmNlbGxpbmcgYWxsIGluLWZsaWdodCByZW5k
ZXJpbmcuXG4iKTsKLQkJR0VNX1RSQUNFX0RVTVAoKTsKLQkJaW50ZWxfZ3Rfc2V0X3dlZGdlZChn
dCk7Ci0JfQotCi0JaWYgKGh1bmcpCi0JCWhhbmdjaGVja19kZWNsYXJlX2hhbmcoZ3QsIGh1bmcs
IHN0dWNrKTsKLQotCWludGVsX3J1bnRpbWVfcG1fcHV0KGd0LT51bmNvcmUtPnJwbSwgd2FrZXJl
Zik7Ci0KLQkvKiBSZXNldCB0aW1lciBpbiBjYXNlIEdQVSBoYW5ncyB3aXRob3V0IGFub3RoZXIg
cmVxdWVzdCBiZWluZyBhZGRlZCAqLwotCWludGVsX2d0X3F1ZXVlX2hhbmdjaGVjayhndCk7Ci19
Ci0KLXZvaWQgaW50ZWxfZ3RfcXVldWVfaGFuZ2NoZWNrKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCi17
Ci0JdW5zaWduZWQgbG9uZyBkZWxheTsKLQotCWlmICh1bmxpa2VseSghaTkxNV9tb2RwYXJhbXMu
ZW5hYmxlX2hhbmdjaGVjaykpCi0JCXJldHVybjsKLQotCS8qCi0JICogRG9uJ3QgY29udGludWFs
bHkgZGVmZXIgdGhlIGhhbmdjaGVjayBzbyB0aGF0IGl0IGlzIGFsd2F5cyBydW4gYXQKLQkgKiBs
ZWFzdCBvbmNlIGFmdGVyIHdvcmsgaGFzIGJlZW4gc2NoZWR1bGVkIG9uIGFueSByaW5nLiBPdGhl
cndpc2UsCi0JICogd2Ugd2lsbCBpZ25vcmUgYSBodW5nIHJpbmcgaWYgYSBzZWNvbmQgcmluZyBp
cyBrZXB0IGJ1c3kuCi0JICovCi0KLQlkZWxheSA9IHJvdW5kX2ppZmZpZXNfdXBfcmVsYXRpdmUo
RFJNX0k5MTVfSEFOR0NIRUNLX0pJRkZJRVMpOwotCXF1ZXVlX2RlbGF5ZWRfd29yayhzeXN0ZW1f
bG9uZ193cSwgJmd0LT5oYW5nY2hlY2sud29yaywgZGVsYXkpOwotfQotCi12b2lkIGludGVsX2Vu
Z2luZV9pbml0X2hhbmdjaGVjayhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCi17Ci0J
bWVtc2V0KCZlbmdpbmUtPmhhbmdjaGVjaywgMCwgc2l6ZW9mKGVuZ2luZS0+aGFuZ2NoZWNrKSk7
Ci0JZW5naW5lLT5oYW5nY2hlY2suYWN0aW9uX3RpbWVzdGFtcCA9IGppZmZpZXM7Ci19Ci0KLXZv
aWQgaW50ZWxfZ3RfaW5pdF9oYW5nY2hlY2soc3RydWN0IGludGVsX2d0ICpndCkKLXsKLQlJTklU
X0RFTEFZRURfV09SSygmZ3QtPmhhbmdjaGVjay53b3JrLCBoYW5nY2hlY2tfZWxhcHNlZCk7Ci19
Ci0KLSNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9TRUxGVEVTVCkKLSNpbmNsdWRlICJz
ZWxmdGVzdF9oYW5nY2hlY2suYyIKLSNlbmRpZgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfcmVzZXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jl
c2V0LmMKaW5kZXggNzc0NDVkMTAwY2E4Li45ZDY0NTFmOWE4NTUgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfcmVzZXQuYwpAQCAtMTAyNCw4ICsxMDI0LDYgQEAgdm9pZCBpbnRlbF9ndF9y
ZXNldChzdHJ1Y3QgaW50ZWxfZ3QgKmd0LAogCWlmIChyZXQpCiAJCWdvdG8gdGFpbnQ7CiAKLQlp
bnRlbF9ndF9xdWV1ZV9oYW5nY2hlY2soZ3QpOwotCiBmaW5pc2g6CiAJcmVzZXRfZmluaXNoKGd0
LCBhd2FrZSk7CiB1bmxvY2s6CkBAIC0xMzUzLDQgKzEzNTEsNSBAQCB2b2lkIF9faW50ZWxfZmlu
aV93ZWRnZShzdHJ1Y3QgaW50ZWxfd2VkZ2VfbWUgKncpCiAKICNpZiBJU19FTkFCTEVEKENPTkZJ
R19EUk1fSTkxNV9TRUxGVEVTVCkKICNpbmNsdWRlICJzZWxmdGVzdF9yZXNldC5jIgorI2luY2x1
ZGUgInNlbGZ0ZXN0X2hhbmdjaGVjay5jIgogI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2suYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3NlbGZ0ZXN0X2hhbmdjaGVjay5jCmluZGV4IDU2OWE0MTA1ZDQ5ZS4uNTcwNTQ2ZWRhNWU4
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2su
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2suYwpAQCAt
MTY4Niw3ICsxNjg2LDYgQEAgaW50IGludGVsX2hhbmdjaGVja19saXZlX3NlbGZ0ZXN0cyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAl9OwogCXN0cnVjdCBpbnRlbF9ndCAqZ3QgPSAm
aTkxNS0+Z3Q7CiAJaW50ZWxfd2FrZXJlZl90IHdha2VyZWY7Ci0JYm9vbCBzYXZlZF9oYW5nY2hl
Y2s7CiAJaW50IGVycjsKIAogCWlmICghaW50ZWxfaGFzX2dwdV9yZXNldChndCkpCkBAIC0xNjk2
LDEyICsxNjk1LDkgQEAgaW50IGludGVsX2hhbmdjaGVja19saXZlX3NlbGZ0ZXN0cyhzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAkJcmV0dXJuIC1FSU87IC8qIHdlJ3JlIGxvbmcgcGFz
dCBob3BlIG9mIGEgc3VjY2Vzc2Z1bCByZXNldCAqLwogCiAJd2FrZXJlZiA9IGludGVsX3J1bnRp
bWVfcG1fZ2V0KGd0LT51bmNvcmUtPnJwbSk7Ci0Jc2F2ZWRfaGFuZ2NoZWNrID0gZmV0Y2hfYW5k
X3plcm8oJmk5MTVfbW9kcGFyYW1zLmVuYWJsZV9oYW5nY2hlY2spOwotCWRyYWluX2RlbGF5ZWRf
d29yaygmZ3QtPmhhbmdjaGVjay53b3JrKTsgLyogZmx1c2ggcGFyYW0gKi8KIAogCWVyciA9IGlu
dGVsX2d0X2xpdmVfc3VidGVzdHModGVzdHMsIGd0KTsKIAotCWk5MTVfbW9kcGFyYW1zLmVuYWJs
ZV9oYW5nY2hlY2sgPSBzYXZlZF9oYW5nY2hlY2s7CiAJaW50ZWxfcnVudGltZV9wbV9wdXQoZ3Qt
PnVuY29yZS0+cnBtLCB3YWtlcmVmKTsKIAogCXJldHVybiBlcnI7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZGVidWdmcy5jCmluZGV4IGE1NDFiNmFlNTM0Zi4uMmZhZTZlNTkyYjA5IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2RlYnVnZnMuYwpAQCAtMTAxMSw5MiArMTAxMSw2IEBAIHN0YXRpYyBpbnQg
aTkxNV9mcmVxdWVuY3lfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKnVudXNlZCkKIAly
ZXR1cm4gcmV0OwogfQogCi1zdGF0aWMgdm9pZCBpOTE1X2luc3Rkb25lX2luZm8oc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAotCQkJICAgICAgIHN0cnVjdCBzZXFfZmlsZSAqbSwK
LQkJCSAgICAgICBzdHJ1Y3QgaW50ZWxfaW5zdGRvbmUgKmluc3Rkb25lKQotewotCWNvbnN0IHN0
cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1ID0gJlJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnNzZXU7
Ci0JaW50IHNsaWNlOwotCWludCBzdWJzbGljZTsKLQotCXNlcV9wcmludGYobSwgIlx0XHRJTlNU
RE9ORTogMHglMDh4XG4iLAotCQkgICBpbnN0ZG9uZS0+aW5zdGRvbmUpOwotCi0JaWYgKElOVEVM
X0dFTihkZXZfcHJpdikgPD0gMykKLQkJcmV0dXJuOwotCi0Jc2VxX3ByaW50ZihtLCAiXHRcdFND
X0lOU1RET05FOiAweCUwOHhcbiIsCi0JCSAgIGluc3Rkb25lLT5zbGljZV9jb21tb24pOwotCi0J
aWYgKElOVEVMX0dFTihkZXZfcHJpdikgPD0gNikKLQkJcmV0dXJuOwotCi0JZm9yX2VhY2hfaW5z
dGRvbmVfc2xpY2Vfc3Vic2xpY2UoZGV2X3ByaXYsIHNzZXUsIHNsaWNlLCBzdWJzbGljZSkKLQkJ
c2VxX3ByaW50ZihtLCAiXHRcdFNBTVBMRVJfSU5TVERPTkVbJWRdWyVkXTogMHglMDh4XG4iLAot
CQkJICAgc2xpY2UsIHN1YnNsaWNlLCBpbnN0ZG9uZS0+c2FtcGxlcltzbGljZV1bc3Vic2xpY2Vd
KTsKLQotCWZvcl9lYWNoX2luc3Rkb25lX3NsaWNlX3N1YnNsaWNlKGRldl9wcml2LCBzc2V1LCBz
bGljZSwgc3Vic2xpY2UpCi0JCXNlcV9wcmludGYobSwgIlx0XHRST1dfSU5TVERPTkVbJWRdWyVk
XTogMHglMDh4XG4iLAotCQkJICAgc2xpY2UsIHN1YnNsaWNlLCBpbnN0ZG9uZS0+cm93W3NsaWNl
XVtzdWJzbGljZV0pOwotfQotCi1zdGF0aWMgaW50IGk5MTVfaGFuZ2NoZWNrX2luZm8oc3RydWN0
IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUgPSBub2RlX3RvX2k5MTUobS0+cHJpdmF0ZSk7Ci0Jc3RydWN0IGludGVsX2d0ICpndCA9
ICZpOTE1LT5ndDsKLQlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7Ci0JaW50ZWxfd2Fr
ZXJlZl90IHdha2VyZWY7Ci0JZW51bSBpbnRlbF9lbmdpbmVfaWQgaWQ7Ci0KLQlzZXFfcHJpbnRm
KG0sICJSZXNldCBmbGFnczogJWx4XG4iLCBndC0+cmVzZXQuZmxhZ3MpOwotCWlmICh0ZXN0X2Jp
dChJOTE1X1dFREdFRCwgJmd0LT5yZXNldC5mbGFncykpCi0JCXNlcV9wdXRzKG0sICJcdFdlZGdl
ZFxuIik7Ci0JaWYgKHRlc3RfYml0KEk5MTVfUkVTRVRfQkFDS09GRiwgJmd0LT5yZXNldC5mbGFn
cykpCi0JCXNlcV9wdXRzKG0sICJcdERldmljZSAoZ2xvYmFsKSByZXNldCBpbiBwcm9ncmVzc1xu
Iik7Ci0KLQlpZiAoIWk5MTVfbW9kcGFyYW1zLmVuYWJsZV9oYW5nY2hlY2spIHsKLQkJc2VxX3B1
dHMobSwgIkhhbmdjaGVjayBkaXNhYmxlZFxuIik7Ci0JCXJldHVybiAwOwotCX0KLQotCWlmICh0
aW1lcl9wZW5kaW5nKCZndC0+aGFuZ2NoZWNrLndvcmsudGltZXIpKQotCQlzZXFfcHJpbnRmKG0s
ICJIYW5nY2hlY2sgYWN0aXZlLCB0aW1lciBmaXJlcyBpbiAlZG1zXG4iLAotCQkJICAgamlmZmll
c190b19tc2VjcyhndC0+aGFuZ2NoZWNrLndvcmsudGltZXIuZXhwaXJlcyAtCi0JCQkJCSAgICBq
aWZmaWVzKSk7Ci0JZWxzZSBpZiAoZGVsYXllZF93b3JrX3BlbmRpbmcoJmd0LT5oYW5nY2hlY2su
d29yaykpCi0JCXNlcV9wdXRzKG0sICJIYW5nY2hlY2sgYWN0aXZlLCB3b3JrIHBlbmRpbmdcbiIp
OwotCWVsc2UKLQkJc2VxX3B1dHMobSwgIkhhbmdjaGVjayBpbmFjdGl2ZVxuIik7Ci0KLQlzZXFf
cHJpbnRmKG0sICJHVCBhY3RpdmU/ICVzXG4iLCB5ZXNubyhndC0+YXdha2UpKTsKLQotCXdpdGhf
aW50ZWxfcnVudGltZV9wbSgmaTkxNS0+cnVudGltZV9wbSwgd2FrZXJlZikgewotCQlmb3JfZWFj
aF9lbmdpbmUoZW5naW5lLCBpOTE1LCBpZCkgewotCQkJc3RydWN0IGludGVsX2luc3Rkb25lIGlu
c3Rkb25lOwotCi0JCQlzZXFfcHJpbnRmKG0sICIlczogJWQgbXMgYWdvXG4iLAotCQkJCSAgIGVu
Z2luZS0+bmFtZSwKLQkJCQkgICBqaWZmaWVzX3RvX21zZWNzKGppZmZpZXMgLQotCQkJCQkJICAg
IGVuZ2luZS0+aGFuZ2NoZWNrLmFjdGlvbl90aW1lc3RhbXApKTsKLQotCQkJc2VxX3ByaW50Ziht
LCAiXHRBQ1RIRCA9IDB4JTA4bGx4IFtjdXJyZW50IDB4JTA4bGx4XVxuIiwKLQkJCQkgICAobG9u
ZyBsb25nKWVuZ2luZS0+aGFuZ2NoZWNrLmFjdGhkLAotCQkJCSAgIGludGVsX2VuZ2luZV9nZXRf
YWN0aXZlX2hlYWQoZW5naW5lKSk7Ci0KLQkJCWludGVsX2VuZ2luZV9nZXRfaW5zdGRvbmUoZW5n
aW5lLCAmaW5zdGRvbmUpOwotCi0JCQlzZXFfcHV0cyhtLCAiXHRpbnN0ZG9uZSByZWFkID1cbiIp
OwotCQkJaTkxNV9pbnN0ZG9uZV9pbmZvKGk5MTUsIG0sICZpbnN0ZG9uZSk7Ci0KLQkJCXNlcV9w
dXRzKG0sICJcdGluc3Rkb25lIGFjY3UgPVxuIik7Ci0JCQlpOTE1X2luc3Rkb25lX2luZm8oaTkx
NSwgbSwKLQkJCQkJICAgJmVuZ2luZS0+aGFuZ2NoZWNrLmluc3Rkb25lKTsKLQkJfQotCX0KLQot
CXJldHVybiAwOwotfQotCiBzdGF0aWMgaW50IGlyb25sYWtlX2RycGNfaW5mbyhzdHJ1Y3Qgc2Vx
X2ZpbGUgKm0pCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBub2RlX3RvX2k5
MTUobS0+cHJpdmF0ZSk7CkBAIC00MzM5LDcgKzQyNTMsNiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0
IGRybV9pbmZvX2xpc3QgaTkxNV9kZWJ1Z2ZzX2xpc3RbXSA9IHsKIAl7Imk5MTVfZ3VjX3N0YWdl
X3Bvb2wiLCBpOTE1X2d1Y19zdGFnZV9wb29sLCAwfSwKIAl7Imk5MTVfaHVjX2xvYWRfc3RhdHVz
IiwgaTkxNV9odWNfbG9hZF9zdGF0dXNfaW5mbywgMH0sCiAJeyJpOTE1X2ZyZXF1ZW5jeV9pbmZv
IiwgaTkxNV9mcmVxdWVuY3lfaW5mbywgMH0sCi0JeyJpOTE1X2hhbmdjaGVja19pbmZvIiwgaTkx
NV9oYW5nY2hlY2tfaW5mbywgMH0sCiAJeyJpOTE1X2RycGNfaW5mbyIsIGk5MTVfZHJwY19pbmZv
LCAwfSwKIAl7Imk5MTVfcmluZ19mcmVxX3RhYmxlIiwgaTkxNV9yaW5nX2ZyZXFfdGFibGUsIDB9
LAogCXsiaTkxNV9mcm9udGJ1ZmZlcl90cmFja2luZyIsIGk5MTVfZnJvbnRidWZmZXJfdHJhY2tp
bmcsIDB9LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKaW5kZXggZjAyYTM0NzIyMjE3Li4xZGFlNDNl
ZDRjNDggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwpAQCAtMTU0NiwxMCArMTU0Niw3IEBAIHZv
aWQgaTkxNV9kcml2ZXJfcmVtb3ZlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCiAJ
aTkxNV9kcml2ZXJfbW9kZXNldF9yZW1vdmUoaTkxNSk7CiAKLQkvKiBGcmVlIGVycm9yIHN0YXRl
IGFmdGVyIGludGVycnVwdHMgYXJlIGZ1bGx5IGRpc2FibGVkLiAqLwotCWNhbmNlbF9kZWxheWVk
X3dvcmtfc3luYygmaTkxNS0+Z3QuaGFuZ2NoZWNrLndvcmspOwogCWk5MTVfcmVzZXRfZXJyb3Jf
c3RhdGUoaTkxNSk7Ci0KIAlpOTE1X2dlbV9kcml2ZXJfcmVtb3ZlKGk5MTUpOwogCiAJaW50ZWxf
cG93ZXJfZG9tYWluc19kcml2ZXJfcmVtb3ZlKGk5MTUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgK
aW5kZXggYzQ2YjMzOTA2NGMwLi4xOWY1YjA2MDhhNTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYu
aApAQCAtMTg0Nyw3ICsxODQ3LDYgQEAgdm9pZCBpOTE1X2RyaXZlcl9yZW1vdmUoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUpOwogaW50IGk5MTVfcmVzdW1lX3N3aXRjaGVyb28oc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwogaW50IGk5MTVfc3VzcGVuZF9zd2l0Y2hlcm9vKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBwbV9tZXNzYWdlX3Qgc3RhdGUpOwogCi12b2lk
IGludGVsX2VuZ2luZV9pbml0X2hhbmdjaGVjayhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdp
bmUpOwogaW50IHZsdl9mb3JjZV9nZnhfY2xvY2soc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2LCBib29sIG9uKTsKIAogc3RhdGljIGlubGluZSBib29sIGludGVsX2d2dF9hY3RpdmUo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z3B1X2Vycm9yLmMKaW5kZXggNWNmNGVlZDVhZGQ4Li40NzIzOWRmNjUzZjIgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYwpAQCAtNTM0LDEwICs1MzQsNiBAQCBzdGF0aWMgdm9p
ZCBlcnJvcl9wcmludF9lbmdpbmUoc3RydWN0IGRybV9pOTE1X2Vycm9yX3N0YXRlX2J1ZiAqbSwK
IAl9CiAJZXJyX3ByaW50ZihtLCAiICByaW5nLT5oZWFkOiAweCUwOHhcbiIsIGVlLT5jcHVfcmlu
Z19oZWFkKTsKIAllcnJfcHJpbnRmKG0sICIgIHJpbmctPnRhaWw6IDB4JTA4eFxuIiwgZWUtPmNw
dV9yaW5nX3RhaWwpOwotCWVycl9wcmludGYobSwgIiAgaGFuZ2NoZWNrIHRpbWVzdGFtcDogJWRt
cyAoJWx1JXMpXG4iLAotCQkgICBqaWZmaWVzX3RvX21zZWNzKGVlLT5oYW5nY2hlY2tfdGltZXN0
YW1wIC0gZXBvY2gpLAotCQkgICBlZS0+aGFuZ2NoZWNrX3RpbWVzdGFtcCwKLQkJICAgZWUtPmhh
bmdjaGVja190aW1lc3RhbXAgPT0gZXBvY2ggPyAiOyBlcG9jaCIgOiAiIik7CiAJZXJyX3ByaW50
ZihtLCAiICBlbmdpbmUgcmVzZXQgY291bnQ6ICV1XG4iLCBlZS0+cmVzZXRfY291bnQpOwogCiAJ
Zm9yIChuID0gMDsgbiA8IGVlLT5udW1fcG9ydHM7IG4rKykgewpAQCAtNjc5LDExICs2NzUsOCBA
QCBzdGF0aWMgdm9pZCBfX2Vycl9wcmludF90b19zZ2woc3RydWN0IGRybV9pOTE1X2Vycm9yX3N0
YXRlX2J1ZiAqbSwKIAl0cyA9IGt0aW1lX3RvX3RpbWVzcGVjNjQoZXJyb3ItPnVwdGltZSk7CiAJ
ZXJyX3ByaW50ZihtLCAiVXB0aW1lOiAlbGxkIHMgJWxkIHVzXG4iLAogCQkgICAoczY0KXRzLnR2
X3NlYywgdHMudHZfbnNlYyAvIE5TRUNfUEVSX1VTRUMpOwotCWVycl9wcmludGYobSwgIkVwb2No
OiAlbHUgamlmZmllcyAoJXUgSFopXG4iLCBlcnJvci0+ZXBvY2gsIEhaKTsKLQllcnJfcHJpbnRm
KG0sICJDYXB0dXJlOiAlbHUgamlmZmllczsgJWQgbXMgYWdvLCAlZCBtcyBhZnRlciBlcG9jaFxu
IiwKLQkJICAgZXJyb3ItPmNhcHR1cmUsCi0JCSAgIGppZmZpZXNfdG9fbXNlY3MoamlmZmllcyAt
IGVycm9yLT5jYXB0dXJlKSwKLQkJICAgamlmZmllc190b19tc2VjcyhlcnJvci0+Y2FwdHVyZSAt
IGVycm9yLT5lcG9jaCkpOworCWVycl9wcmludGYobSwgIkNhcHR1cmU6ICVsdSBqaWZmaWVzOyAl
ZCBtcyBhZ29cbiIsCisJCSAgIGVycm9yLT5jYXB0dXJlLCBqaWZmaWVzX3RvX21zZWNzKGppZmZp
ZXMgLSBlcnJvci0+Y2FwdHVyZSkpOwogCiAJZm9yIChlZSA9IGVycm9yLT5lbmdpbmU7IGVlOyBl
ZSA9IGVlLT5uZXh0KQogCQllcnJfcHJpbnRmKG0sICJBY3RpdmUgcHJvY2VzcyAob24gcmluZyAl
cyk6ICVzIFslZF1cbiIsCkBAIC03NDIsNyArNzM1LDcgQEAgc3RhdGljIHZvaWQgX19lcnJfcHJp
bnRfdG9fc2dsKHN0cnVjdCBkcm1faTkxNV9lcnJvcl9zdGF0ZV9idWYgKm0sCiAJCWVycl9wcmlu
dGYobSwgIkdUVF9DQUNIRV9FTjogMHglMDh4XG4iLCBlcnJvci0+Z3R0X2NhY2hlKTsKIAogCWZv
ciAoZWUgPSBlcnJvci0+ZW5naW5lOyBlZTsgZWUgPSBlZS0+bmV4dCkKLQkJZXJyb3JfcHJpbnRf
ZW5naW5lKG0sIGVlLCBlcnJvci0+ZXBvY2gpOworCQllcnJvcl9wcmludF9lbmdpbmUobSwgZWUs
IGVycm9yLT5jYXB0dXJlKTsKIAogCWZvciAoZWUgPSBlcnJvci0+ZW5naW5lOyBlZTsgZWUgPSBl
ZS0+bmV4dCkgewogCQljb25zdCBzdHJ1Y3QgZHJtX2k5MTVfZXJyb3Jfb2JqZWN0ICpvYmo7CkBA
IC03NzAsNyArNzYzLDcgQEAgc3RhdGljIHZvaWQgX19lcnJfcHJpbnRfdG9fc2dsKHN0cnVjdCBk
cm1faTkxNV9lcnJvcl9zdGF0ZV9idWYgKm0sCiAJCQlmb3IgKGogPSAwOyBqIDwgZWUtPm51bV9y
ZXF1ZXN0czsgaisrKQogCQkJCWVycm9yX3ByaW50X3JlcXVlc3QobSwgIiAiLAogCQkJCQkJICAg
ICZlZS0+cmVxdWVzdHNbal0sCi0JCQkJCQkgICAgZXJyb3ItPmVwb2NoKTsKKwkJCQkJCSAgICBl
cnJvci0+Y2FwdHVyZSk7CiAJCX0KIAogCQlwcmludF9lcnJvcl9vYmoobSwgZWUtPmVuZ2luZSwg
InJpbmdidWZmZXIiLCBlZS0+cmluZ2J1ZmZlcik7CkBAIC0xMTQ0LDggKzExMzcsNiBAQCBzdGF0
aWMgdm9pZCBlcnJvcl9yZWNvcmRfZW5naW5lX3JlZ2lzdGVycyhzdHJ1Y3QgaTkxNV9ncHVfc3Rh
dGUgKmVycm9yLAogCX0KIAogCWVlLT5pZGxlID0gaW50ZWxfZW5naW5lX2lzX2lkbGUoZW5naW5l
KTsKLQlpZiAoIWVlLT5pZGxlKQotCQllZS0+aGFuZ2NoZWNrX3RpbWVzdGFtcCA9IGVuZ2luZS0+
aGFuZ2NoZWNrLmFjdGlvbl90aW1lc3RhbXA7CiAJZWUtPnJlc2V0X2NvdW50ID0gaTkxNV9yZXNl
dF9lbmdpbmVfY291bnQoJmRldl9wcml2LT5ncHVfZXJyb3IsCiAJCQkJCQkgIGVuZ2luZSk7CiAK
QEAgLTE2NTcsMjAgKzE2NDgsNiBAQCBzdGF0aWMgdm9pZCBjYXB0dXJlX3BhcmFtcyhzdHJ1Y3Qg
aTkxNV9ncHVfc3RhdGUgKmVycm9yKQogCWk5MTVfcGFyYW1zX2NvcHkoJmVycm9yLT5wYXJhbXMs
ICZpOTE1X21vZHBhcmFtcyk7CiB9CiAKLXN0YXRpYyB1bnNpZ25lZCBsb25nIGNhcHR1cmVfZmlu
ZF9lcG9jaChjb25zdCBzdHJ1Y3QgaTkxNV9ncHVfc3RhdGUgKmVycm9yKQotewotCWNvbnN0IHN0
cnVjdCBkcm1faTkxNV9lcnJvcl9lbmdpbmUgKmVlOwotCXVuc2lnbmVkIGxvbmcgZXBvY2ggPSBl
cnJvci0+Y2FwdHVyZTsKLQotCWZvciAoZWUgPSBlcnJvci0+ZW5naW5lOyBlZTsgZWUgPSBlZS0+
bmV4dCkgewotCQlpZiAoZWUtPmhhbmdjaGVja190aW1lc3RhbXAgJiYKLQkJICAgIHRpbWVfYmVm
b3JlKGVlLT5oYW5nY2hlY2tfdGltZXN0YW1wLCBlcG9jaCkpCi0JCQllcG9jaCA9IGVlLT5oYW5n
Y2hlY2tfdGltZXN0YW1wOwotCX0KLQotCXJldHVybiBlcG9jaDsKLX0KLQogc3RhdGljIHZvaWQg
Y2FwdHVyZV9maW5pc2goc3RydWN0IGk5MTVfZ3B1X3N0YXRlICplcnJvcikKIHsKIAlzdHJ1Y3Qg
aTkxNV9nZ3R0ICpnZ3R0ID0gJmVycm9yLT5pOTE1LT5nZ3R0OwpAQCAtMTcyMiw4ICsxNjk5LDYg
QEAgaTkxNV9jYXB0dXJlX2dwdV9zdGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkK
IAllcnJvci0+b3ZlcmxheSA9IGludGVsX292ZXJsYXlfY2FwdHVyZV9lcnJvcl9zdGF0ZShpOTE1
KTsKIAllcnJvci0+ZGlzcGxheSA9IGludGVsX2Rpc3BsYXlfY2FwdHVyZV9lcnJvcl9zdGF0ZShp
OTE1KTsKIAotCWVycm9yLT5lcG9jaCA9IGNhcHR1cmVfZmluZF9lcG9jaChlcnJvcik7Ci0KIAlj
YXB0dXJlX2ZpbmlzaChlcnJvcik7CiAJY29tcHJlc3NfZmluaSgmY29tcHJlc3MpOwogCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuaAppbmRleCA3ZjFjZDBiMWZlZjcuLjRkYzM2ZDZl
ZTNhMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuaAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5oCkBAIC0zNCw3ICszNCw2
IEBAIHN0cnVjdCBpOTE1X2dwdV9zdGF0ZSB7CiAJa3RpbWVfdCBib290dGltZTsKIAlrdGltZV90
IHVwdGltZTsKIAl1bnNpZ25lZCBsb25nIGNhcHR1cmU7Ci0JdW5zaWduZWQgbG9uZyBlcG9jaDsK
IAogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1OwogCkBAIC04Niw3ICs4NSw2IEBAIHN0
cnVjdCBpOTE1X2dwdV9zdGF0ZSB7CiAKIAkJLyogU29mdHdhcmUgdHJhY2tlZCBzdGF0ZSAqLwog
CQlib29sIGlkbGU7Ci0JCXVuc2lnbmVkIGxvbmcgaGFuZ2NoZWNrX3RpbWVzdGFtcDsKIAkJaW50
IG51bV9yZXF1ZXN0czsKIAkJdTMyIHJlc2V0X2NvdW50OwogCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3ByaW9saXN0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3ByaW9saXN0X3R5cGVzLmgKaW5kZXggYWU4YmIzY2I2MjdlLi43MzJhYWQxNDg4ODEg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcHJpb2xpc3RfdHlwZXMuaAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ByaW9saXN0X3R5cGVzLmgKQEAgLTE2LDYg
KzE2LDEyIEBAIGVudW0gewogCUk5MTVfUFJJT1JJVFlfTUlOID0gSTkxNV9DT05URVhUX01JTl9V
U0VSX1BSSU9SSVRZIC0gMSwKIAlJOTE1X1BSSU9SSVRZX05PUk1BTCA9IEk5MTVfQ09OVEVYVF9E
RUZBVUxUX1BSSU9SSVRZLAogCUk5MTVfUFJJT1JJVFlfTUFYID0gSTkxNV9DT05URVhUX01BWF9V
U0VSX1BSSU9SSVRZICsgMSwKKworCS8qIEEgcHJlZW1wdGl2ZSBwdWxzZSB1c2VkIHRvIG1vbml0
b3IgdGhlIGhlYWx0aCBvZiBlYWNoIGVuZ2luZSAqLworCUk5MTVfUFJJT1JJVFlfSEVBUlRCRUFU
LAorCisJLyogSW50ZXJhY3RpdmUgd29ya2xvYWQsIHNjaGVkdWxlZCBmb3IgaW1tZWRpYXRlIHBh
Z2VmbGlwcGluZyAqLworCUk5MTVfUFJJT1JJVFlfRElTUExBWSwKIH07CiAKICNkZWZpbmUgSTkx
NV9VU0VSX1BSSU9SSVRZX1NISUZUIDIKLS0gCjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DD354104722
	for <lists+intel-gfx@lfdr.de>; Thu, 21 Nov 2019 00:56:16 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3564F6EA99;
	Wed, 20 Nov 2019 23:56:15 +0000 (UTC)
X-Original-To: Intel-GFX@lists.freedesktop.org
Delivered-To: Intel-GFX@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id ABB556EA7E
 for <Intel-GFX@lists.freedesktop.org>; Wed, 20 Nov 2019 23:56:06 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Nov 2019 15:56:05 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,223,1571727600"; d="scan'208";a="237955292"
Received: from relo-linux-5.jf.intel.com ([10.165.21.134])
 by fmsmga002.fm.intel.com with ESMTP; 20 Nov 2019 15:56:05 -0800
From: John.C.Harrison@Intel.com
To: Intel-GFX@Lists.FreeDesktop.Org
Date: Wed, 20 Nov 2019 15:56:04 -0800
Message-Id: <20191120235604.29047-4-John.C.Harrison@Intel.com>
X-Mailer: git-send-email 2.21.0.5.gaeb582a983
In-Reply-To: <20191120235604.29047-1-John.C.Harrison@Intel.com>
References: <20191120235604.29047-1-John.C.Harrison@Intel.com>
MIME-Version: 1.0
Organization: Intel Corporation (UK) Ltd. - Co. Reg. #1134945 - Pipers Way,
 Swindon SN3 1RJ
Subject: [Intel-gfx] [PATCH 3/3] drm/i915/guc: Increase size of CTB buffers
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogTWF0dGhldyBCcm9zdCA8bWF0dGhldy5icm9zdEBpbnRlbC5jb20+CgpXaXRoIHRoZSBp
bnRyb2R1Y3Rpb24gb2Ygbm9uLWJsb2NraW5nIENUQnMgbW9yZSB0aGFuIG9uZSBDVEIgY2FuIGJl
IGluCmZsaWdodCBhdCBhIHRpbWUuIEluY3JlYXNpbmcgdGhlIHNpemUgb2YgdGhlIENUQnMgc2hv
dWxkIHJlZHVjZSBob3cKb2Z0ZW4gc29mdHdhcmUgaGl0cyB0aGUgY2FzZSB3aGVyZSBubyBzcGFj
ZSBpcyBhdmFpbGFibGUgaW4gdGhlIENUQgpidWZmZXIuCgpDYzogSm9obiBIYXJyaXNvbiA8am9o
bi5jLmhhcnJpc29uQGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogTWF0dGhldyBCcm9zdCA8bWF0
dGhldy5icm9zdEBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50
ZWxfZ3VjX2N0LmMgfCA1MCArKysrKysrKysrKysrKystLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQs
IDMyIGluc2VydGlvbnMoKyksIDE4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19jdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvdWMvaW50ZWxfZ3VjX2N0LmMKaW5kZXggNGQ4YTRjNmFmZDcxLi4zMWM1MTJlN2VjYzIgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19jdC5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19jdC5jCkBAIC0xNCw2ICsxNCwx
MCBAQAogI2RlZmluZSBDVF9ERUJVR19EUklWRVIoLi4uKQlkbyB7IH0gd2hpbGUgKDApCiAjZW5k
aWYKIAorI2RlZmluZSBDVEJfREVTQ19TSVpFCQkoUEFHRV9TSVpFIC8gMikKKyNkZWZpbmUgQ1RC
X0gyR19CVUZGRVJfU0laRQkoUEFHRV9TSVpFKQorI2RlZmluZSBDVEJfRzJIX0JVRkZFUl9TSVpF
CShDVEJfSDJHX0JVRkZFUl9TSVpFICogMikKKwogI2RlZmluZSBNQVhfUkVUUlkJCTB4MTAwMDAw
MAogCiBzdHJ1Y3QgY3RfcmVxdWVzdCB7CkBAIC0xNDMsMzAgKzE0NywzNSBAQCBzdGF0aWMgaW50
IGN0Y2hfaW5pdChzdHJ1Y3QgaW50ZWxfZ3VjICpndWMsCiAKIAlHRU1fQlVHX09OKGN0Y2gtPnZt
YSk7CiAKLQkvKiBXZSBhbGxvY2F0ZSAxIHBhZ2UgdG8gaG9sZCBib3RoIGRlc2NyaXB0b3JzIGFu
ZCBib3RoIGJ1ZmZlcnMuCisJLyogV2UgYWxsb2NhdGUgMyBwYWdlcyB0byBob2xkIGJvdGggZGVz
Y3JpcHRvcnMgYW5kIGJvdGggYnVmZmVycy4KIAkgKiAgICAgICBfX19fX19fX19fXy4uLi4uLi4u
Li4uLi4uLi4uLi4uLgogCSAqICAgICAgfGRlc2MgKFNFTkQpfCAgICAgICAgICAgICAgICAgICA6
Ci0JICogICAgICB8X19fX19fX19fX198ICAgICAgICAgICAgICAgICAgIFBBR0UvNAorCSAqICAg
ICAgfF9fX19fX19fX19ffCAgICAgICAgICAgICAgICAgICBQQUdFLzIKIAkgKiAgICAgIDpfX19f
X19fX19fXy4uLi4uLi4uLi4uLi4uLi4uLi4uOgogCSAqICAgICAgfGRlc2MgKFJFQ1YpfCAgICAg
ICAgICAgICAgICAgICA6Ci0JICogICAgICB8X19fX19fX19fX198ICAgICAgICAgICAgICAgICAg
IFBBR0UvNAorCSAqICAgICAgfF9fX19fX19fX19ffCAgICAgICAgICAgICAgICAgICBQQUdFLzIK
IAkgKiAgICAgIDpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fOgogCSAqICAgICAgfGNt
ZHMgKFNFTkQpICAgICAgICAgICAgICAgICAgICB8Ci0JICogICAgICB8ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIFBBR0UvNAorCSAqICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBQQUdFCiAJICogICAgICB8X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX3wK
IAkgKiAgICAgIHxjbWRzIChSRUNWKSAgICAgICAgICAgICAgICAgICAgfAotCSAqICAgICAgfCAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQQUdFLzQKKwkgKiAgICAgIHwgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgUEFHRSAqIDIKIAkgKiAgICAgIHxfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19ffAogCSAqCiAJICogRWFjaCBtZXNzYWdlIGNhbiB1c2UgYSBtYXhpbXVt
IG9mIDMyIGR3b3JkcyBhbmQgd2UgZG9uJ3QgZXhwZWN0IHRvCi0JICogaGF2ZSBtb3JlIHRoYW4g
MSBpbiBmbGlnaHQgYXQgYW55IHRpbWUsIHNvIHdlIGhhdmUgZW5vdWdoIHNwYWNlLgotCSAqIFNv
bWUgbG9naWMgZnVydGhlciBhaGVhZCB3aWxsIHJlbHkgb24gdGhlIGZhY3QgdGhhdCB0aGVyZSBp
cyBvbmx5IDEKLQkgKiBwYWdlIGFuZCB0aGF0IGl0IGlzIGFsd2F5cyBtYXBwZWQsIHNvIGlmIHRo
ZSBzaXplIGlzIGNoYW5nZWQgdGhlCi0JICogb3RoZXIgY29kZSB3aWxsIG5lZWQgdXBkYXRpbmcg
YXMgd2VsbC4KKwkgKiBoYXZlIG1vcmUgdGhhbiAxIGluIGZsaWdodCBhdCBhbnkgdGltZSwgdW5s
ZXNzIHdlIGFyZSB1c2luZyB0aGUgR3VDCisJICogc3VibWlzc2lvbi4gSW4gdGhhdCBjYXNlIGVh
Y2ggcmVxdWVzdCByZXF1aXJlcyBhIG1pbmltdW0gOCBieXRlcworCSAqIHdoaWNoIGdpdmVzIHVz
IGEgbWF4aW11bSA1MTIgcXVldWUnZCByZXF1ZXN0cy4gSG9wZWZ1bGx5IHRoaXMgZW5vdWdoCisJ
ICogc3BhY2UgdG8gYXZvaWQgYmFja3ByZXNzdXJlIG9uIHRoZSBkcml2ZXIuIFdlIGFsc28gZG91
YmxlIHRoZSBzaXplIG9mCisJICogdGhlIHJlY2VpdmUgYnVmZmVyIChyZWxhdGl2ZSB0byB0aGUg
c2VuZCkgdG8gZW5zdXJlIGEgZzJoIHJlc3BvbnNlCisJICogQ1RCIGhhcyBhIGxhbmRpbmcgc3Bv
dC4KIAkgKi8KIAogCS8qIGFsbG9jYXRlIHZtYSAqLwotCXZtYSA9IGludGVsX2d1Y19hbGxvY2F0
ZV92bWEoZ3VjLCBQQUdFX1NJWkUpOworCXZtYSA9IGludGVsX2d1Y19hbGxvY2F0ZV92bWEoZ3Vj
LCBDVEJfREVTQ19TSVpFICoKKwkJCQkgICAgIEFSUkFZX1NJWkUoY3RjaC0+Y3RicykgKworCQkJ
CSAgICAgQ1RCX0gyR19CVUZGRVJfU0laRSArCisJCQkJICAgICBDVEJfRzJIX0JVRkZFUl9TSVpF
KTsKIAlpZiAoSVNfRVJSKHZtYSkpIHsKIAkJZXJyID0gUFRSX0VSUih2bWEpOwogCQlnb3RvIGVy
cl9vdXQ7CkBAIC0xODUsOCArMTk0LDkgQEAgc3RhdGljIGludCBjdGNoX2luaXQoc3RydWN0IGlu
dGVsX2d1YyAqZ3VjLAogCS8qIHN0b3JlIHBvaW50ZXJzIHRvIGRlc2MgYW5kIGNtZHMgKi8KIAlm
b3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShjdGNoLT5jdGJzKTsgaSsrKSB7CiAJCUdFTV9CVUdf
T04oKGkgIT0gQ1RCX1NFTkQpICYmIChpICE9IENUQl9SRUNWKSk7Ci0JCWN0Y2gtPmN0YnNbaV0u
ZGVzYyA9IGJsb2IgKyBQQUdFX1NJWkUvNCAqIGk7Ci0JCWN0Y2gtPmN0YnNbaV0uY21kcyA9IGJs
b2IgKyBQQUdFX1NJWkUvNCAqIGkgKyBQQUdFX1NJWkUvMjsKKwkJY3RjaC0+Y3Ric1tpXS5kZXNj
ID0gYmxvYiArIENUQl9ERVNDX1NJWkUgKiBpOworCQljdGNoLT5jdGJzW2ldLmNtZHMgPSBibG9i
ICsgQ1RCX0gyR19CVUZGRVJfU0laRSAqIGkgKworCQkJQ1RCX0RFU0NfU0laRSAqIEFSUkFZX1NJ
WkUoY3RjaC0+Y3Ricyk7CiAJfQogCiAJcmV0dXJuIDA7CkBAIC0yMTAsNyArMjIwLDcgQEAgc3Rh
dGljIHZvaWQgY3RjaF9maW5pKHN0cnVjdCBpbnRlbF9ndWMgKmd1YywKIHN0YXRpYyBpbnQgY3Rj
aF9lbmFibGUoc3RydWN0IGludGVsX2d1YyAqZ3VjLAogCQkgICAgICAgc3RydWN0IGludGVsX2d1
Y19jdF9jaGFubmVsICpjdGNoKQogewotCXUzMiBiYXNlOworCXUzMiBiYXNlLCBzaXplOwogCWlu
dCBlcnI7CiAJaW50IGk7CiAKQEAgLTIyNiw5ICsyMzYsMTIgQEAgc3RhdGljIGludCBjdGNoX2Vu
YWJsZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMsCiAJICovCiAJZm9yIChpID0gMDsgaSA8IEFSUkFZ
X1NJWkUoY3RjaC0+Y3Ricyk7IGkrKykgewogCQlHRU1fQlVHX09OKChpICE9IENUQl9TRU5EKSAm
JiAoaSAhPSBDVEJfUkVDVikpOworCQlzaXplID0gKGkgPT0gQ1RCX1NFTkQpID8gQ1RCX0gyR19C
VUZGRVJfU0laRSA6CisJCQlDVEJfRzJIX0JVRkZFUl9TSVpFOwogCQlndWNfY3RfYnVmZmVyX2Rl
c2NfaW5pdCgmY3RjaC0+Y3Ric1tpXSwKLQkJCQkJYmFzZSArIFBBR0VfU0laRS80ICogaSArIFBB
R0VfU0laRS8yLAotCQkJCQlQQUdFX1NJWkUvNCwKKwkJCQkJYmFzZSArIENUQl9IMkdfQlVGRkVS
X1NJWkUgKiBpICsKKwkJCQkJQ1RCX0RFU0NfU0laRSAqIEFSUkFZX1NJWkUoY3RjaC0+Y3Ricyks
CisJCQkJCXNpemUsCiAJCQkJCWN0Y2gtPm93bmVyKTsKIAl9CiAKQEAgLTIzNiwxMyArMjQ5LDEz
IEBAIHN0YXRpYyBpbnQgY3RjaF9lbmFibGUoc3RydWN0IGludGVsX2d1YyAqZ3VjLAogCSAqIGRl
c2NyaXB0b3JzIGFyZSBpbiBmaXJzdCBoYWxmIG9mIHRoZSBibG9iCiAJICovCiAJZXJyID0gZ3Vj
X2FjdGlvbl9yZWdpc3Rlcl9jdF9idWZmZXIoZ3VjLAotCQkJCQkgICAgYmFzZSArIFBBR0VfU0la
RS80ICogQ1RCX1JFQ1YsCisJCQkJCSAgICBiYXNlICsgQ1RCX0RFU0NfU0laRSAqIENUQl9SRUNW
LAogCQkJCQkgICAgSU5URUxfR1VDX0NUX0JVRkZFUl9UWVBFX1JFQ1YpOwogCWlmICh1bmxpa2Vs
eShlcnIpKQogCQlnb3RvIGVycl9vdXQ7CiAKIAllcnIgPSBndWNfYWN0aW9uX3JlZ2lzdGVyX2N0
X2J1ZmZlcihndWMsCi0JCQkJCSAgICBiYXNlICsgUEFHRV9TSVpFLzQgKiBDVEJfU0VORCwKKwkJ
CQkJICAgIGJhc2UgKyBDVEJfREVTQ19TSVpFICogQ1RCX1NFTkQsCiAJCQkJCSAgICBJTlRFTF9H
VUNfQ1RfQlVGRkVSX1RZUEVfU0VORCk7CiAJaWYgKHVubGlrZWx5KGVycikpCiAJCWdvdG8gZXJy
X2RlcmVnaXN0ZXI7CkBAIC02MzUsNyArNjQ4LDggQEAgc3RhdGljIGludCBjdGJfcmVhZChzdHJ1
Y3QgaW50ZWxfZ3VjX2N0X2J1ZmZlciAqY3RiLCB1MzIgKmRhdGEpCiAJLyogYmV3YXJlIG9mIGJ1
ZmZlciB3cmFwIGNhc2UgKi8KIAlpZiAodW5saWtlbHkoYXZhaWxhYmxlIDwgMCkpCiAJCWF2YWls
YWJsZSArPSBzaXplOwotCUNUX0RFQlVHX0RSSVZFUigiQ1Q6IGF2YWlsYWJsZSAlZCAoJXU6JXUp
XG4iLCBhdmFpbGFibGUsIGhlYWQsIHRhaWwpOworCUNUX0RFQlVHX0RSSVZFUigiQ1Q6IGF2YWls
YWJsZSAlZCAoJXU6JXU6JWQpXG4iLCBhdmFpbGFibGUsIGhlYWQsIHRhaWwsCisJCQlzaXplKTsK
IAlHRU1fQlVHX09OKGF2YWlsYWJsZSA8IDApOwogCiAJZGF0YVswXSA9IGNtZHNbaGVhZF07Ci0t
IAoyLjIxLjAuNS5nYWViNTgyYTk4MwoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vaW50ZWwtZ2Z4

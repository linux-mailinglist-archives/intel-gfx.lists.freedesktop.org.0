Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 110F53C2C68
	for <lists+intel-gfx@lfdr.de>; Sat, 10 Jul 2021 03:23:25 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6226C6EABA;
	Sat, 10 Jul 2021 01:23:23 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9B2796EAB9;
 Sat, 10 Jul 2021 01:23:22 +0000 (UTC)
X-IronPort-AV: E=McAfee;i="6200,9189,10040"; a="197073831"
X-IronPort-AV: E=Sophos;i="5.84,228,1620716400"; d="scan'208";a="197073831"
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga106.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 09 Jul 2021 18:23:20 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.84,228,1620716400"; d="scan'208";a="411439870"
Received: from vbelgaum-ubuntu.fm.intel.com ([10.1.27.27])
 by orsmga006.jf.intel.com with ESMTP; 09 Jul 2021 18:23:20 -0700
From: Vinay Belgaumkar <vinay.belgaumkar@intel.com>
To: intel-gfx@lists.freedesktop.org,
	dri-devel@lists.freedesktop.org
Date: Fri,  9 Jul 2021 18:20:16 -0700
Message-Id: <20210710012026.19705-7-vinay.belgaumkar@intel.com>
X-Mailer: git-send-email 2.25.0
In-Reply-To: <20210710012026.19705-1-vinay.belgaumkar@intel.com>
References: <20210710012026.19705-1-vinay.belgaumkar@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 06/16] drm/i915/guc/slpc: Allocate,
 initialize and release slpc
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWxsb2NhdGUgZGF0YSBzdHJ1Y3R1cmVzIGZvciBTTFBDIGFuZCBmdW5jdGlvbnMgZm9yCmluaXRp
YWxpemluZyBvbiBob3N0IHNpZGUuCgpTaWduZWQtb2ZmLWJ5OiBWaW5heSBCZWxnYXVta2FyIDx2
aW5heS5iZWxnYXVta2FyQGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogU3VuZGFyZXNhbiBTdWph
cml0aGEgPHN1amFyaXRoYS5zdW5kYXJlc2FuQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC91Yy9pbnRlbF9ndWMuYyAgICAgIHwgMTEgKysrKysrKwogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3NscGMuYyB8IDM2ICsrKysrKysrKysrKysrKysrKysr
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3NscGMuaCB8IDIwICsrKysr
KysrKysrKwogMyBmaWxlcyBjaGFuZ2VkLCA2NiBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0p
CgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWMuYwppbmRleCA5ZDYxYjJkNTRkZTQu
LjgyODYzYTliYzhlOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50
ZWxfZ3VjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmMKQEAg
LTMzNiw2ICszMzYsMTIgQEAgaW50IGludGVsX2d1Y19pbml0KHN0cnVjdCBpbnRlbF9ndWMgKmd1
YykKIAkJCWdvdG8gZXJyX2N0OwogCX0KIAorCWlmIChpbnRlbF9ndWNfc2xwY19pc191c2VkKGd1
YykpIHsKKwkJcmV0ID0gaW50ZWxfZ3VjX3NscGNfaW5pdCgmZ3VjLT5zbHBjKTsKKwkJaWYgKHJl
dCkKKwkJCWdvdG8gZXJyX3N1Ym1pc3Npb247CisJfQorCiAJLyogbm93IHRoYXQgZXZlcnl0aGlu
ZyBpcyBwZXJtYS1waW5uZWQsIGluaXRpYWxpemUgdGhlIHBhcmFtZXRlcnMgKi8KIAlndWNfaW5p
dF9wYXJhbXMoZ3VjKTsKIApAQCAtMzQ2LDYgKzM1Miw4IEBAIGludCBpbnRlbF9ndWNfaW5pdChz
dHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAKIAlyZXR1cm4gMDsKIAorZXJyX3N1Ym1pc3Npb246CisJ
aW50ZWxfZ3VjX3N1Ym1pc3Npb25fZmluaShndWMpOwogZXJyX2N0OgogCWludGVsX2d1Y19jdF9m
aW5pKCZndWMtPmN0KTsKIGVycl9hZHM6CkBAIC0zNjgsNiArMzc2LDkgQEAgdm9pZCBpbnRlbF9n
dWNfZmluaShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiAKIAlpOTE1X2dndHRfZGlzYWJsZV9ndWMo
Z3QtPmdndHQpOwogCisJaWYgKGludGVsX2d1Y19zbHBjX2lzX3VzZWQoZ3VjKSkKKwkJaW50ZWxf
Z3VjX3NscGNfZmluaSgmZ3VjLT5zbHBjKTsKKwogCWlmIChpbnRlbF9ndWNfc3VibWlzc2lvbl9p
c191c2VkKGd1YykpCiAJCWludGVsX2d1Y19zdWJtaXNzaW9uX2ZpbmkoZ3VjKTsKIApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3NscGMuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Y19zbHBjLmMKaW5kZXggYzFmNTY5ZDIzMDBk
Li45NGUyZjE5OTUxYWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2lu
dGVsX2d1Y19zbHBjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3Vj
X3NscGMuYwpAQCAtNCwxMSArNCw0MSBAQAogICogQ29weXJpZ2h0IMKpIDIwMjAgSW50ZWwgQ29y
cG9yYXRpb24KICAqLwogCisjaW5jbHVkZSA8YXNtL21zci1pbmRleC5oPgorCisjaW5jbHVkZSAi
Z3QvaW50ZWxfZ3QuaCIKKyNpbmNsdWRlICJndC9pbnRlbF9ycHMuaCIKKworI2luY2x1ZGUgImk5
MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3VjX3NscGMuaCIKKyNpbmNsdWRlICJpbnRlbF9w
bS5oIgorCitzdGF0aWMgaW5saW5lIHN0cnVjdCBpbnRlbF9ndWMgKnNscGNfdG9fZ3VjKHN0cnVj
dCBpbnRlbF9ndWNfc2xwYyAqc2xwYykKK3sKKwlyZXR1cm4gY29udGFpbmVyX29mKHNscGMsIHN0
cnVjdCBpbnRlbF9ndWMsIHNscGMpOworfQorCitzdGF0aWMgaW50IHNscGNfc2hhcmVkX2RhdGFf
aW5pdChzdHJ1Y3QgaW50ZWxfZ3VjX3NscGMgKnNscGMpCit7CisJc3RydWN0IGludGVsX2d1YyAq
Z3VjID0gc2xwY190b19ndWMoc2xwYyk7CisJaW50IGVycjsKKwl1MzIgc2l6ZSA9IFBBR0VfQUxJ
R04oc2l6ZW9mKHN0cnVjdCBzbHBjX3NoYXJlZF9kYXRhKSk7CisKKwllcnIgPSBpbnRlbF9ndWNf
YWxsb2NhdGVfYW5kX21hcF92bWEoZ3VjLCBzaXplLCAmc2xwYy0+dm1hLCAmc2xwYy0+dmFkZHIp
OworCWlmICh1bmxpa2VseShlcnIpKSB7CisJCURSTV9FUlJPUigiRmFpbGVkIHRvIGFsbG9jYXRl
IHNscGMgc3RydWN0IChlcnI9JWQpXG4iLCBlcnIpOworCQlpOTE1X3ZtYV91bnBpbl9hbmRfcmVs
ZWFzZSgmc2xwYy0+dm1hLCBJOTE1X1ZNQV9SRUxFQVNFX01BUCk7CisJCXJldHVybiBlcnI7CisJ
fQorCisJcmV0dXJuIGVycjsKK30KIAogaW50IGludGVsX2d1Y19zbHBjX2luaXQoc3RydWN0IGlu
dGVsX2d1Y19zbHBjICpzbHBjKQogewotCXJldHVybiAwOworCUdFTV9CVUdfT04oc2xwYy0+dm1h
KTsKKworCXJldHVybiBzbHBjX3NoYXJlZF9kYXRhX2luaXQoc2xwYyk7CiB9CiAKIC8qCkBAIC0z
MSw0ICs2MSw4IEBAIGludCBpbnRlbF9ndWNfc2xwY19lbmFibGUoc3RydWN0IGludGVsX2d1Y19z
bHBjICpzbHBjKQogCiB2b2lkIGludGVsX2d1Y19zbHBjX2Zpbmkoc3RydWN0IGludGVsX2d1Y19z
bHBjICpzbHBjKQogeworCWlmICghc2xwYy0+dm1hKQorCQlyZXR1cm47CisKKwlpOTE1X3ZtYV91
bnBpbl9hbmRfcmVsZWFzZSgmc2xwYy0+dm1hLCBJOTE1X1ZNQV9SRUxFQVNFX01BUCk7CiB9CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfc2xwYy5oIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjX3NscGMuaAppbmRleCA5ODAzNjQ1
OWExYTMuLmEyNjQzYjkwNDE2NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
dWMvaW50ZWxfZ3VjX3NscGMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRl
bF9ndWNfc2xwYy5oCkBAIC0zLDEyICszLDMyIEBACiAgKgogICogQ29weXJpZ2h0IMKpIDIwMjAg
SW50ZWwgQ29ycG9yYXRpb24KICAqLworCiAjaWZuZGVmIF9JTlRFTF9HVUNfU0xQQ19IXwogI2Rl
ZmluZSBfSU5URUxfR1VDX1NMUENfSF8KIAorI2luY2x1ZGUgPGxpbnV4L211dGV4Lmg+CiAjaW5j
bHVkZSAiaW50ZWxfZ3VjX3NscGNfZndpZi5oIgogCiBzdHJ1Y3QgaW50ZWxfZ3VjX3NscGMgewor
CS8qUHJvdGVjdHMgYWNjZXNzIHRvIHZtYSBhbmQgU0xQQyBhY3Rpb25zICovCisJc3RydWN0IGk5
MTVfdm1hICp2bWE7CisJdm9pZCAqdmFkZHI7CisKKwkvKiBwbGF0Zm9ybSBmcmVxdWVuY3kgbGlt
aXRzICovCisJdTMyIG1pbl9mcmVxOworCXUzMiBycDBfZnJlcTsKKwl1MzIgcnAxX2ZyZXE7CisK
KwkvKiBmcmVxdWVuY3kgc29mdGxpbWl0cyAqLworCXUzMiBtaW5fZnJlcV9zb2Z0bGltaXQ7CisJ
dTMyIG1heF9mcmVxX3NvZnRsaW1pdDsKKworCXN0cnVjdCB7CisJCXUzMiBwYXJhbV9pZDsKKwkJ
dTMyIHBhcmFtX3ZhbHVlOworCQl1MzIgcGFyYW1fb3ZlcnJpZGU7CisJfSBkZWJ1ZzsKIH07CiAK
IGludCBpbnRlbF9ndWNfc2xwY19pbml0KHN0cnVjdCBpbnRlbF9ndWNfc2xwYyAqc2xwYyk7Ci0t
IAoyLjI1LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 40B4EE0B13
	for <lists+intel-gfx@lfdr.de>; Tue, 22 Oct 2019 19:56:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8A0186E8B8;
	Tue, 22 Oct 2019 17:56:10 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 08F916E8BA
 for <intel-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 17:56:06 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 Oct 2019 10:56:06 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,217,1569308400"; d="scan'208";a="201755659"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga006.jf.intel.com with SMTP; 22 Oct 2019 10:56:04 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Tue, 22 Oct 2019 20:56:03 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 22 Oct 2019 20:55:49 +0300
Message-Id: <20191022175554.18012-4-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191022175554.18012-1-ville.syrjala@linux.intel.com>
References: <20191022175554.18012-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 3/8] drm/i915: Fix skl+ non-scaled pfit modes
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkZp
eCBza2xfdXBkYXRlX3NjYWxlcl9jcnRjKCkgdG8gZGVhbCB3aXRoIGRpZmZlcmVudCBzY2FsaW5n
Cm1vZGVzIGNvcnJlY3RseS4gVGhlIGN1cnJlbnQgaW1wbGVtZW50YXRpb24gYXNzdW1lcwpEUk1f
TU9ERV9TQ0FMRV9GVUxMU0NSRUVOLiBGb3J0dW5hdGVseSB3ZSBkb24ndCBleHBvc2UgYW55CmJv
cmRlciBwcm9wZXJ0aWVzIGN1cnJlbnRseSBzbyB0aGUgY29kZSBkb2VzIGFjdHVhbGx5IGVuZAp1
cCBkb2luZyB0aGUgcmlnaHQgdGhpbmcgKGFzc2lnbmluZyBhIHNjYWxlciBmb3IgcGZpdCkuClRo
ZSBjb2RlIGRvZXMgbmVlZCB0byBiZSBmaXhlZCBiZWZvcmUgYW55IGJvcmRlcnMgYXJlCmV4cG9z
ZWQuCgpBbHNvIHdlIGhhdmUgcmVkdW5kYW50IGNhbGxzIHRvIHNrbF91cGRhdGVfc2NhbGVyX2Ny
dGMoKSBpbgpkcC9oZG1pIC5jb21wdXRlX2NvbmZpZygpIHdoaWNoIGNhbiBiZSBudWtlZC4gVGhl
eSB3ZXJlIGFueXdheQpjYWxsZWQgYmVmb3JlIHdlIGhhZCBldmVuIGNvbXB1dGVkIHRoZSBwZml0
IHN0YXRlIHNvIHdlcmUKYmFzaWNhbGx5IG5vbnNlbnNlLiBUaGUgcmVhbCBjYWxsIHdlIG5lZWQg
dG8ga2VlcCBpcyBpbgppbnRlbF9jcnRjX2F0b21pY19jaGVjaygpLgoKdjI6IERlYWwgd2l0cmgg
c2tsX3VwZGF0ZV9zY2FsZXJfY3J0YygpIGluIGludGVsX2RwX3ljYmNyNDIwX2NvbmZpZygpCgpT
aWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIHwg
MzggKysrKysrKysrKy0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheS5oIHwgIDEgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
cC5jICAgICAgfCAxNSAtLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9oZG1pLmMgICAgfCAgNiAtLS0tCiA0IGZpbGVzIGNoYW5nZWQsIDE5IGluc2VydGlvbnMoKyks
IDQxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5LmMKaW5kZXggODVjODJlM2YzMjIzLi5hODExZTc4NzJmZTcgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC01NTE0LDI4ICs1NTE0LDI4
IEBAIHNrbF91cGRhdGVfc2NhbGVyKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
LCBib29sIGZvcmNlX2RldGFjaCwKIAlyZXR1cm4gMDsKIH0KIAotLyoqCi0gKiBza2xfdXBkYXRl
X3NjYWxlcl9jcnRjIC0gU3RhZ2VzIHVwZGF0ZSB0byBzY2FsZXIgc3RhdGUgZm9yIGEgZ2l2ZW4g
Y3J0Yy4KLSAqCi0gKiBAc3RhdGU6IGNydGMncyBzY2FsZXIgc3RhdGUKLSAqCi0gKiBSZXR1cm4K
LSAqICAgICAwIC0gc2NhbGVyX3VzYWdlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Ci0gKiAgICBlcnJv
ciAtIHJlcXVlc3RlZCBzY2FsaW5nIGNhbm5vdCBiZSBzdXBwb3J0ZWQgb3Igb3RoZXIgZXJyb3Ig
Y29uZGl0aW9uCi0gKi8KLWludCBza2xfdXBkYXRlX3NjYWxlcl9jcnRjKHN0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlICpzdGF0ZSkKK3N0YXRpYyBpbnQgc2tsX3VwZGF0ZV9zY2FsZXJfY3J0YyhzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKIHsKLQljb25zdCBzdHJ1Y3QgZHJtX2Rp
c3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSA9ICZzdGF0ZS0+YmFzZS5hZGp1c3RlZF9tb2RlOwot
CWJvb2wgbmVlZF9zY2FsZXIgPSBmYWxzZTsKKwljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZSAqYWRqdXN0ZWRfbW9kZSA9CisJCSZjcnRjX3N0YXRlLT5iYXNlLmFkanVzdGVkX21vZGU7CisJ
aW50IHdpZHRoLCBoZWlnaHQ7CiAKLQlpZiAoc3RhdGUtPm91dHB1dF9mb3JtYXQgPT0gSU5URUxf
T1VUUFVUX0ZPUk1BVF9ZQ0JDUjQyMCkKLQkJbmVlZF9zY2FsZXIgPSB0cnVlOworCWlmIChjcnRj
X3N0YXRlLT5wY2hfcGZpdC5lbmFibGVkKSB7CisJCXUzMiBwZml0X3NpemUgPSBjcnRjX3N0YXRl
LT5wY2hfcGZpdC5zaXplOworCisJCXdpZHRoID0gcGZpdF9zaXplID4+IDE2OworCQloZWlnaHQg
PSBwZml0X3NpemUgJiAweGZmZmY7CisJfSBlbHNlIHsKKwkJd2lkdGggPSBhZGp1c3RlZF9tb2Rl
LT5jcnRjX2hkaXNwbGF5OworCQloZWlnaHQgPSBhZGp1c3RlZF9tb2RlLT5jcnRjX3ZkaXNwbGF5
OworCX0KIAotCXJldHVybiBza2xfdXBkYXRlX3NjYWxlcihzdGF0ZSwgIXN0YXRlLT5iYXNlLmFj
dGl2ZSwgU0tMX0NSVENfSU5ERVgsCi0JCQkJICZzdGF0ZS0+c2NhbGVyX3N0YXRlLnNjYWxlcl9p
ZCwKLQkJCQkgc3RhdGUtPnBpcGVfc3JjX3csIHN0YXRlLT5waXBlX3NyY19oLAotCQkJCSBhZGp1
c3RlZF9tb2RlLT5jcnRjX2hkaXNwbGF5LAotCQkJCSBhZGp1c3RlZF9tb2RlLT5jcnRjX3ZkaXNw
bGF5LCBOVUxMLCBuZWVkX3NjYWxlcik7CisJcmV0dXJuIHNrbF91cGRhdGVfc2NhbGVyKGNydGNf
c3RhdGUsICFjcnRjX3N0YXRlLT5iYXNlLmFjdGl2ZSwKKwkJCQkgU0tMX0NSVENfSU5ERVgsCisJ
CQkJICZjcnRjX3N0YXRlLT5zY2FsZXJfc3RhdGUuc2NhbGVyX2lkLAorCQkJCSBjcnRjX3N0YXRl
LT5waXBlX3NyY193LCBjcnRjX3N0YXRlLT5waXBlX3NyY19oLAorCQkJCSB3aWR0aCwgaGVpZ2h0
LCBOVUxMLAorCQkJCSBjcnRjX3N0YXRlLT5wY2hfcGZpdC5lbmFibGVkKTsKIH0KIAogLyoqCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuaCBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5oCmluZGV4IDdkY2Ix
NzZkOTFiMC4uODUyZjBkYTBiNjBlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXkuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXkuaApAQCAtNTYyLDcgKzU2Miw2IEBAIHZvaWQgaW50ZWxfY3J0Y19hcm1f
Zmlmb191bmRlcnJ1bihzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAkJCQkgIHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKTsKIAogdTE2IHNrbF9zY2FsZXJfY2FsY19waGFzZShp
bnQgc3ViLCBpbnQgc2NhbGUsIGJvb2wgY2hyb21hX2NlbnRlcik7Ci1pbnQgc2tsX3VwZGF0ZV9z
Y2FsZXJfY3J0YyhzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSk7CiBpbnQgc2ts
X21heF9zY2FsZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJ
ICBjb25zdCBzdHJ1Y3QgZHJtX2Zvcm1hdF9pbmZvICpmb3JtYXQpOwogdTMyIGdsa19wbGFuZV9j
b2xvcl9jdGwoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKaW5kZXggNWVlYWZhNDU4MzFhLi4wYjM4
YjgxZGU1MDggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKQEAgLTIy
NDUsNyArMjI0NSw2IEBAIGludGVsX2RwX3ljYmNyNDIwX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfZHAg
KmludGVsX2RwLAogCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2Rl
ID0KIAkJJmNydGNfc3RhdGUtPmJhc2UuYWRqdXN0ZWRfbW9kZTsKIAlzdHJ1Y3QgaW50ZWxfY3J0
YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+YmFzZS5jcnRjKTsKLQlpbnQgcmV0
OwogCiAJaWYgKCFkcm1fbW9kZV9pc180MjBfb25seShpbmZvLCBhZGp1c3RlZF9tb2RlKSB8fAog
CSAgICAhaW50ZWxfZHBfZ2V0X2NvbG9yaW1ldHJ5X3N0YXR1cyhpbnRlbF9kcCkgfHwKQEAgLTIy
NTQsMTMgKzIyNTMsNiBAQCBpbnRlbF9kcF95Y2JjcjQyMF9jb25maWcoc3RydWN0IGludGVsX2Rw
ICppbnRlbF9kcCwKIAogCWNydGNfc3RhdGUtPm91dHB1dF9mb3JtYXQgPSBJTlRFTF9PVVRQVVRf
Rk9STUFUX1lDQkNSNDIwOwogCi0JLyogWUNCQ1IgNDIwIG91dHB1dCBjb252ZXJzaW9uIG5lZWRz
IGEgc2NhbGVyICovCi0JcmV0ID0gc2tsX3VwZGF0ZV9zY2FsZXJfY3J0YyhjcnRjX3N0YXRlKTsK
LQlpZiAocmV0KSB7Ci0JCURSTV9ERUJVR19LTVMoIlNjYWxlciBhbGxvY2F0aW9uIGZvciBvdXRw
dXQgZmFpbGVkXG4iKTsKLQkJcmV0dXJuIHJldDsKLQl9Ci0KIAlpbnRlbF9wY2hfcGFuZWxfZml0
dGluZyhjcnRjLCBjcnRjX3N0YXRlLCBEUk1fTU9ERV9TQ0FMRV9GVUxMU0NSRUVOKTsKIAogCXJl
dHVybiAwOwpAQCAtMjMyNyw3ICsyMzE5LDYgQEAgaW50ZWxfZHBfY29tcHV0ZV9jb25maWcoc3Ry
dWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJZWxzZQogCQlyZXQgPSBpbnRlbF9kcF95Y2Jj
cjQyMF9jb25maWcoaW50ZWxfZHAsICZpbnRlbF9jb25uZWN0b3ItPmJhc2UsCiAJCQkJCSAgICAg
ICBwaXBlX2NvbmZpZyk7Ci0KIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCkBAIC0yMzQzLDEy
ICsyMzM0LDYgQEAgaW50ZWxfZHBfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXIsCiAJCWludGVsX2ZpeGVkX3BhbmVsX21vZGUoaW50ZWxfY29ubmVjdG9yLT5wYW5l
bC5maXhlZF9tb2RlLAogCQkJCSAgICAgICBhZGp1c3RlZF9tb2RlKTsKIAotCQlpZiAoSU5URUxf
R0VOKGRldl9wcml2KSA+PSA5KSB7Ci0JCQlyZXQgPSBza2xfdXBkYXRlX3NjYWxlcl9jcnRjKHBp
cGVfY29uZmlnKTsKLQkJCWlmIChyZXQpCi0JCQkJcmV0dXJuIHJldDsKLQkJfQotCiAJCWlmIChI
QVNfR01DSChkZXZfcHJpdikpCiAJCQlpbnRlbF9nbWNoX3BhbmVsX2ZpdHRpbmcoaW50ZWxfY3J0
YywgcGlwZV9jb25maWcsCiAJCQkJCQkgY29ubl9zdGF0ZS0+c2NhbGluZ19tb2RlKTsKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9oZG1pLmMKaW5kZXggYjU0Y2NiYjVhYWQ1Li45
ODY4OGRmYzJkZWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfaGRtaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5j
CkBAIC0yMjkwLDEyICsyMjkwLDYgQEAgaW50ZWxfaGRtaV95Y2JjcjQyMF9jb25maWcoc3RydWN0
IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKIAogCWNvbmZpZy0+b3V0cHV0X2Zvcm1hdCA9IElO
VEVMX09VVFBVVF9GT1JNQVRfWUNCQ1I0MjA7CiAKLQkvKiBZQ0JDUiA0MjAgb3V0cHV0IGNvbnZl
cnNpb24gbmVlZHMgYSBzY2FsZXIgKi8KLQlpZiAoc2tsX3VwZGF0ZV9zY2FsZXJfY3J0Yyhjb25m
aWcpKSB7Ci0JCURSTV9ERUJVR19LTVMoIlNjYWxlciBhbGxvY2F0aW9uIGZvciBvdXRwdXQgZmFp
bGVkXG4iKTsKLQkJcmV0dXJuIGZhbHNlOwotCX0KLQogCWludGVsX3BjaF9wYW5lbF9maXR0aW5n
KGludGVsX2NydGMsIGNvbmZpZywKIAkJCQlEUk1fTU9ERV9TQ0FMRV9GVUxMU0NSRUVOKTsKIAot
LSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

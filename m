Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AD8485BAC9
	for <lists+intel-gfx@lfdr.de>; Mon,  1 Jul 2019 13:34:56 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 00FD389CAF;
	Mon,  1 Jul 2019 11:34:55 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0AFBF89CAF
 for <intel-gfx@lists.freedesktop.org>; Mon,  1 Jul 2019 11:34:53 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 01 Jul 2019 04:34:52 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,439,1557212400"; d="scan'208";a="186455077"
Received: from unknown (HELO delly.ger.corp.intel.com) ([10.249.141.63])
 by fmsmga004.fm.intel.com with ESMTP; 01 Jul 2019 04:34:51 -0700
From: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon,  1 Jul 2019 14:34:32 +0300
Message-Id: <20190701113437.4043-7-lionel.g.landwerlin@intel.com>
X-Mailer: git-send-email 2.21.0.392.gf8f6787159e
In-Reply-To: <20190701113437.4043-1-lionel.g.landwerlin@intel.com>
References: <20190701113437.4043-1-lionel.g.landwerlin@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v6 06/11] drm/i915: introduce a mechanism to
 extend execbuf2
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UncmUgcGxhbm5pbmcgdG8gdXNlIHRoaXMgZm9yIGEgY291cGxlIG9mIG5ldyBmZWF0dXJlIHdo
ZXJlIHdlIG5lZWQKdG8gcHJvdmlkZSBhZGRpdGlvbmFsIHBhcmFtZXRlcnMgdG8gZXhlY2J1Zi4K
ClNpZ25lZC1vZmYtYnk6IExpb25lbCBMYW5kd2VybGluIDxsaW9uZWwuZy5sYW5kd2VybGluQGlu
dGVsLmNvbT4KLS0tCiAuLi4vZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMg
ICAgfCAzMiArKysrKysrKysrKysrKysrKystCiBpbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgg
ICAgICAgICAgICAgICAgICAgfCAyNSArKysrKysrKysrKysrLS0KIDIgZmlsZXMgY2hhbmdlZCwg
NTMgaW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYwppbmRleCAxYzVkZmJmYWQ3MWIuLjk4ODdmYTll
M2FjOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNi
dWZmZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZl
ci5jCkBAIC0yMyw2ICsyMyw3IEBACiAjaW5jbHVkZSAiaTkxNV9nZW1fY2xmbHVzaC5oIgogI2lu
Y2x1ZGUgImk5MTVfZ2VtX2NvbnRleHQuaCIKICNpbmNsdWRlICJpOTE1X3RyYWNlLmgiCisjaW5j
bHVkZSAiaTkxNV91c2VyX2V4dGVuc2lvbnMuaCIKICNpbmNsdWRlICJpbnRlbF9kcnYuaCIKIAog
ZW51bSB7CkBAIC0yNzEsNiArMjcyLDEwIEBAIHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgewogCSAq
LwogCWludCBsdXRfc2l6ZTsKIAlzdHJ1Y3QgaGxpc3RfaGVhZCAqYnVja2V0czsgLyoqIGh0IGZv
ciByZWxvY2F0aW9uIGhhbmRsZXMgKi8KKworCXN0cnVjdCB7CisJCXU2NCBmbGFnczsgLyoqIEF2
YWlsYWJsZSBleHRlbnNpb25zIHBhcmFtZXRlcnMgKi8KKwl9IGV4dGVuc2lvbnM7CiB9OwogCiAj
ZGVmaW5lIGV4ZWNfZW50cnkoRUIsIFZNQSkgKCYoRUIpLT5leGVjWyhWTUEpLT5leGVjX2ZsYWdz
IC0gKEVCKS0+ZmxhZ3NdKQpAQCAtMTk2OSw3ICsxOTc0LDcgQEAgc3RhdGljIGJvb2wgaTkxNV9n
ZW1fY2hlY2tfZXhlY2J1ZmZlcihzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyICpleGVj
KQogCQlyZXR1cm4gZmFsc2U7CiAKIAkvKiBLZXJuZWwgY2xpcHBpbmcgd2FzIGEgRFJJMSBtaXNm
ZWF0dXJlICovCi0JaWYgKCEoZXhlYy0+ZmxhZ3MgJiBJOTE1X0VYRUNfRkVOQ0VfQVJSQVkpKSB7
CisJaWYgKCEoZXhlYy0+ZmxhZ3MgJiAoSTkxNV9FWEVDX0ZFTkNFX0FSUkFZIHwgSTkxNV9FWEVD
X0VYVCkpKSB7CiAJCWlmIChleGVjLT5udW1fY2xpcHJlY3RzIHx8IGV4ZWMtPmNsaXByZWN0c19w
dHIpCiAJCQlyZXR1cm4gZmFsc2U7CiAJfQpAQCAtMjM0Nyw2ICsyMzUyLDI3IEBAIHNpZ25hbF9m
ZW5jZV9hcnJheShzdHJ1Y3QgaTkxNV9leGVjYnVmZmVyICplYiwKIAl9CiB9CiAKK3N0YXRpYyBj
b25zdCBpOTE1X3VzZXJfZXh0ZW5zaW9uX2ZuIGV4ZWNidWZfZXh0ZW5zaW9uc1tdID0geworfTsK
Kworc3RhdGljIGludAorcGFyc2VfZXhlY2J1ZjJfZXh0ZW5zaW9ucyhzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX2V4ZWNidWZmZXIyICphcmdzLAorCQkJICBzdHJ1Y3QgaTkxNV9leGVjYnVmZmVyICplYikK
K3sKKwllYi0+ZXh0ZW5zaW9ucy5mbGFncyA9IDA7CisKKwlpZiAoIShhcmdzLT5mbGFncyAmIEk5
MTVfRVhFQ19FWFQpKQorCQlyZXR1cm4gMDsKKworCWlmIChhcmdzLT5udW1fY2xpcHJlY3RzICE9
IDApCisJCXJldHVybiAtRUlOVkFMOworCisJcmV0dXJuIGk5MTVfdXNlcl9leHRlbnNpb25zKHU2
NF90b191c2VyX3B0cihhcmdzLT5jbGlwcmVjdHNfcHRyKSwKKwkJCQkgICAgZXhlY2J1Zl9leHRl
bnNpb25zLAorCQkJCSAgICBBUlJBWV9TSVpFKGV4ZWNidWZfZXh0ZW5zaW9ucyksCisJCQkJICAg
IGViKTsKK30KKwogc3RhdGljIGludAogaTkxNV9nZW1fZG9fZXhlY2J1ZmZlcihzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LAogCQkgICAgICAgc3RydWN0IGRybV9maWxlICpmaWxlLApAQCAtMjM5Myw2
ICsyNDE5LDEwIEBAIGk5MTVfZ2VtX2RvX2V4ZWNidWZmZXIoc3RydWN0IGRybV9kZXZpY2UgKmRl
diwKIAlpZiAoYXJncy0+ZmxhZ3MgJiBJOTE1X0VYRUNfSVNfUElOTkVEKQogCQllYi5iYXRjaF9m
bGFncyB8PSBJOTE1X0RJU1BBVENIX1BJTk5FRDsKIAorCWVyciA9IHBhcnNlX2V4ZWNidWYyX2V4
dGVuc2lvbnMoYXJncywgJmViKTsKKwlpZiAoZXJyKQorCQlyZXR1cm4gZXJyOworCiAJaWYgKGFy
Z3MtPmZsYWdzICYgSTkxNV9FWEVDX0ZFTkNFX0lOKSB7CiAJCWluX2ZlbmNlID0gc3luY19maWxl
X2dldF9mZW5jZShsb3dlcl8zMl9iaXRzKGFyZ3MtPnJzdmQyKSk7CiAJCWlmICghaW5fZmVuY2Up
CmRpZmYgLS1naXQgYS9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmggYi9pbmNsdWRlL3VhcGkv
ZHJtL2k5MTVfZHJtLmgKaW5kZXggZTI3YThlZGE5MTIxLi5lZmExOTVkNjk5NGUgMTAwNjQ0Ci0t
LSBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAorKysgYi9pbmNsdWRlL3VhcGkvZHJtL2k5
MTVfZHJtLmgKQEAgLTEwMTMsNiArMTAxMywxMCBAQCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNf
ZmVuY2UgewogCV9fdTMyIGZsYWdzOwogfTsKIAorZW51bSBkcm1faTkxNV9nZW1fZXhlY2J1ZmZl
cl9leHQgeworCURSTV9JOTE1X0dFTV9FWEVDQlVGRkVSX0VYVF9NQVggLyogbm9uLUFCSSAqLwor
fTsKKwogc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiB7CiAJLyoqCiAJICogTGlzdCBv
ZiBnZW1fZXhlY19vYmplY3QyIHN0cnVjdHMKQEAgLTEwMjksOCArMTAzMywxNCBAQCBzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyIHsKIAlfX3UzMiBudW1fY2xpcHJlY3RzOwogCS8qKgog
CSAqIFRoaXMgaXMgYSBzdHJ1Y3QgZHJtX2NsaXBfcmVjdCAqY2xpcHJlY3RzIGlmIEk5MTVfRVhF
Q19GRU5DRV9BUlJBWQotCSAqIGlzIG5vdCBzZXQuICBJZiBJOTE1X0VYRUNfRkVOQ0VfQVJSQVkg
aXMgc2V0LCB0aGVuIHRoaXMgaXMgYQotCSAqIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19mZW5j
ZSAqZmVuY2VzLgorCSAqICYgSTkxNV9FWEVDX0VYVCBhcmUgbm90IHNldC4KKwkgKgorCSAqIElm
IEk5MTVfRVhFQ19GRU5DRV9BUlJBWSBpcyBzZXQsIHRoZW4gdGhpcyBpcyBhIHBvaW50ZXIgdG8g
YW4gYXJyYXkKKwkgKiBvZiBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNfZmVuY2UgYW5kIG51bV9j
bGlwcmVjdHMgaXMgdGhlIGxlbmd0aAorCSAqIG9mIHRoZSBhcnJheS4KKwkgKgorCSAqIElmIEk5
MTVfRVhFQ19FWFQgaXMgc2V0LCB0aGVuIHRoaXMgaXMgYSBwb2ludGVyIHRvIGEgc2luZ2xlIHN0
cnVjdAorCSAqIGRybV9pOTE1X2dlbV9iYXNlX2V4ZWNidWZmZXJfZXh0IGFuZCBudW1fY2xpcHJl
Y3RzIGlzIDAuCiAJICovCiAJX191NjQgY2xpcHJlY3RzX3B0cjsKICNkZWZpbmUgSTkxNV9FWEVD
X1JJTkdfTUFTSyAgICAgICAgICAgICAgKDB4M2YpCkBAIC0xMTQ4LDcgKzExNTgsMTYgQEAgc3Ry
dWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiB7CiAgKi8KICNkZWZpbmUgSTkxNV9FWEVDX0ZF
TkNFX1NVQk1JVAkJKDEgPDwgMjApCiAKLSNkZWZpbmUgX19JOTE1X0VYRUNfVU5LTk9XTl9GTEFH
UyAoLShJOTE1X0VYRUNfRkVOQ0VfU1VCTUlUIDw8IDEpKQorLyoKKyAqIFNldHRpbmcgSTkxNV9F
WEVDX0VYVCBpbXBsaWVzIHRoYXQgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyLmNsaXByZWN0c19w
dHIKKyAqIGlzIHRyZWF0ZWQgYXMgYSBwb2ludGVyIHRvIGFuIGxpbmtlZCBsaXN0IG9mIGk5MTVf
dXNlcl9leHRlbnNpb24uIEVhY2gKKyAqIGk5MTVfdXNlcl9leHRlbnNpb24gbm9kZSBpcyB0aGUg
YmFzZSBvZiBhIGxhcmdlciBzdHJ1Y3R1cmUuIFRoZSBsaXN0IG9mCisgKiBzdXBwb3J0ZWQgc3Ry
dWN0dXJlcyBhcmUgbGlzdGVkIGluIHRoZSBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcl9leHQKKyAq
IGVudW0uCisgKi8KKyNkZWZpbmUgSTkxNV9FWEVDX0VYVAkJKDEgPDwgMjEpCisKKyNkZWZpbmUg
X19JOTE1X0VYRUNfVU5LTk9XTl9GTEFHUyAoLShJOTE1X0VYRUNfRVhUPDwxKSkKIAogI2RlZmlu
ZSBJOTE1X0VYRUNfQ09OVEVYVF9JRF9NQVNLCSgweGZmZmZmZmZmKQogI2RlZmluZSBpOTE1X2V4
ZWNidWZmZXIyX3NldF9jb250ZXh0X2lkKGViMiwgY29udGV4dCkgXAotLSAKMi4yMS4wLjM5Mi5n
ZjhmNjc4NzE1OWUKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9y
ZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdm
eA==

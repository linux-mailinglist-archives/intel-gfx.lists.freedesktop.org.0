Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D0F4230AF6C
	for <lists+intel-gfx@lfdr.de>; Mon,  1 Feb 2021 19:34:27 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 319A16E9A4;
	Mon,  1 Feb 2021 18:34:26 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6F1826E9A9
 for <intel-gfx@lists.freedesktop.org>; Mon,  1 Feb 2021 18:34:24 +0000 (UTC)
IronPort-SDR: 0RCCYbKfm5JYkzmf8cF1bYCuiIaI9uwgxfSSZ2SpcwYn85ehSfBp2Rq/eKH5OMlMHrBhdMfuHV
 5V30Blw8g1RA==
X-IronPort-AV: E=McAfee;i="6000,8403,9882"; a="168412995"
X-IronPort-AV: E=Sophos;i="5.79,393,1602572400"; d="scan'208";a="168412995"
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by orsmga106.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 01 Feb 2021 10:34:23 -0800
IronPort-SDR: HyW5WcC6qiTDppMdXRVt/XCGd35YEqiQga0l+zvl8Dt+quT0PxBuDvK3xx/Z777Lwg14d3R0D/
 nmoMYYSbNXEw==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.79,393,1602572400"; d="scan'208";a="412574049"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.171])
 by fmsmga002.fm.intel.com with SMTP; 01 Feb 2021 10:34:21 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Mon, 01 Feb 2021 20:34:21 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon,  1 Feb 2021 20:33:41 +0200
Message-Id: <20210201183343.15292-14-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20210201183343.15292-1-ville.syrjala@linux.intel.com>
References: <20210201183343.15292-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 13/15] drm/i915: Split alds/rkl from
 icl_ddi_combo_{enable, disable}_clock()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClNp
bmNlIC57ZW5hYmxlLGRpc2FibGV9X2Nsb2NrKCkgYXJlIGFscmVhZHkgdmZ1bmNzIGl0J3MgYSBi
aXQgc2lsbHkgdG8KaGF2ZSBpZi1sYWRkZXJzIGluc2lkZSB0aGVtLiBKdXN0IHByb3ZpZGUgc3Bl
Y2lhbGl6ZWQgdmVyc2lvbiBmb3IgYWRscAphbmQgcmtsIHNvIHdlIGRvbid0IG5lZWQgYW55IG9m
IHRoYXQuCgpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGlu
dXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRp
LmMgfCA5MyArKysrKysrKysrKysrKysrLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA2MiBpbnNl
cnRpb25zKCspLCAzMSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kZGkuYwppbmRleCAxYmQyYWE4NjE4M2QuLmJhZmI3NTRkMWI2NiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCkBAIC0zMTI3LDI4ICszMTI3LDYgQEAgc3Rh
dGljIHUzMiBpY2xfZHBjbGthX2NmZ2NyMF9jbGtfb2ZmKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiwKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIHUzMiBpY2xfZHBjbGthX2NmZ2Ny
MF9jbGtfc2VsKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJCQkgICAgIGVu
dW0gaW50ZWxfZHBsbF9pZCBpZCwgZW51bSBwaHkgcGh5KQotewotCWlmIChJU19BTERFUkxBS0Vf
UyhkZXZfcHJpdikpCi0JCXJldHVybiBpZCA8PCBBRExTX0RQQ0xLQV9DRkdDUl9ERElfU0hJRlQo
cGh5KTsKLQllbHNlIGlmIChJU19ST0NLRVRMQUtFKGRldl9wcml2KSkKLQkJcmV0dXJuIFJLTF9E
UENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMKGlkLCBwaHkpOwotCWVsc2UKLQkJcmV0dXJuIElDTF9E
UENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMKGlkLCBwaHkpOwotfQotCi1zdGF0aWMgdTMyIGljbF9k
cGNsa2FfY2ZnY3IwX2Nsa19zZWxfbWFzayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsCi0JCQkJCSAgZW51bSBwaHkgcGh5KQotewotCWlmIChJU19BTERFUkxBS0VfUyhkZXZfcHJp
dikpCi0JCXJldHVybiBBRExTX0RQQ0xLQV9DRkdDUl9ERElfQ0xLX1NFTF9NQVNLKHBoeSk7Ci0J
ZWxzZSBpZiAoSVNfUk9DS0VUTEFLRShkZXZfcHJpdikpCi0JCXJldHVybiBSS0xfRFBDTEtBX0NG
R0NSMF9ERElfQ0xLX1NFTF9NQVNLKHBoeSk7Ci0JZWxzZQotCQlyZXR1cm4gSUNMX0RQQ0xLQV9D
RkdDUjBfRERJX0NMS19TRUxfTUFTSyhwaHkpOwotfQotCiBzdGF0aWMgaTkxNV9yZWdfdCBpY2xf
ZHBjbGthX2NmZ2NyMF9yZWcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAJCQkJCWVu
dW0gcGh5IHBoeSkKIHsKQEAgLTMxODQsNiArMzE2Miw1NiBAQCBzdGF0aWMgdm9pZCBfY25sX2Rk
aV9kaXNhYmxlX2Nsb2NrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBpOTE1X3JlZ190
IHJlZwogCW11dGV4X3VubG9jaygmaTkxNS0+ZHBsbC5sb2NrKTsKIH0KIAorc3RhdGljIHZvaWQg
YWRsc19kZGlfZW5hYmxlX2Nsb2NrKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAorCQkJ
CSAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCit7CisJc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7
CisJY29uc3Qgc3RydWN0IGludGVsX3NoYXJlZF9kcGxsICpwbGwgPSBjcnRjX3N0YXRlLT5zaGFy
ZWRfZHBsbDsKKwllbnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgZW5j
b2Rlci0+cG9ydCk7CisKKwlpZiAoZHJtX1dBUk5fT04oJmRldl9wcml2LT5kcm0sICFwbGwpKQor
CQlyZXR1cm47CisKKwlfY25sX2RkaV9lbmFibGVfY2xvY2soZGV2X3ByaXYsIEFETFNfRFBDTEtB
X0NGR0NSKHBoeSksCisJCQkgICAgICBBRExTX0RQQ0xLQV9DRkdDUl9ERElfQ0xLX1NFTF9NQVNL
KHBoeSksCisJCQkgICAgICBwbGwtPmluZm8tPmlkIDw8IEFETFNfRFBDTEtBX0NGR0NSX0RESV9T
SElGVChwaHkpLAorCQkJICAgICAgSUNMX0RQQ0xLQV9DRkdDUjBfRERJX0NMS19PRkYocGh5KSk7
Cit9CisKK3N0YXRpYyB2b2lkIGFkbHNfZGRpX2Rpc2FibGVfY2xvY2soc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIpCit7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0g
dG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CisJZW51bSBwaHkgcGh5ID0gaW50ZWxfcG9ydF90
b19waHkoZGV2X3ByaXYsIGVuY29kZXItPnBvcnQpOworCisJX2NubF9kZGlfZGlzYWJsZV9jbG9j
ayhkZXZfcHJpdiwgQURMU19EUENMS0FfQ0ZHQ1IocGh5KSwKKwkJCSAgICAgICBJQ0xfRFBDTEtB
X0NGR0NSMF9ERElfQ0xLX09GRihwaHkpKTsKK30KKworc3RhdGljIHZvaWQgcmtsX2RkaV9lbmFi
bGVfY2xvY2soc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCisJCQkJIGNvbnN0IHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOworCWNvbnN0IHN0cnVj
dCBpbnRlbF9zaGFyZWRfZHBsbCAqcGxsID0gY3J0Y19zdGF0ZS0+c2hhcmVkX2RwbGw7CisJZW51
bSBwaHkgcGh5ID0gaW50ZWxfcG9ydF90b19waHkoZGV2X3ByaXYsIGVuY29kZXItPnBvcnQpOwor
CisJaWYgKGRybV9XQVJOX09OKCZkZXZfcHJpdi0+ZHJtLCAhcGxsKSkKKwkJcmV0dXJuOworCisJ
X2NubF9kZGlfZW5hYmxlX2Nsb2NrKGRldl9wcml2LCBJQ0xfRFBDTEtBX0NGR0NSMCwKKwkJCSAg
ICAgIFJLTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX01BU0socGh5KSwKKwkJCSAgICAgIFJL
TF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMKHBsbC0+aW5mby0+aWQsIHBoeSksCisJCQkgICAg
ICBSS0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX09GRihwaHkpKTsKK30KKworc3RhdGljIHZvaWQg
cmtsX2RkaV9kaXNhYmxlX2Nsb2NrKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQorewor
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZW5jb2Rlci0+YmFz
ZS5kZXYpOworCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBlbmNv
ZGVyLT5wb3J0KTsKKworCV9jbmxfZGRpX2Rpc2FibGVfY2xvY2soZGV2X3ByaXYsIElDTF9EUENM
S0FfQ0ZHQ1IwLAorCQkJICAgICAgIFJLTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfT0ZGKHBoeSkp
OworfQorCiBzdGF0aWMgdm9pZCBkZzFfZGRpX2VuYWJsZV9jbG9jayhzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqZW5jb2RlciwKIAkJCQkgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNf
c3RhdGUpCiB7CkBAIC0zMjI4LDEwICszMjU2LDEwIEBAIHN0YXRpYyB2b2lkIGljbF9kZGlfY29t
Ym9fZW5hYmxlX2Nsb2NrKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCWlmIChkcm1f
V0FSTl9PTigmZGV2X3ByaXYtPmRybSwgIXBsbCkpCiAJCXJldHVybjsKIAotCV9jbmxfZGRpX2Vu
YWJsZV9jbG9jayhkZXZfcHJpdiwgaWNsX2RwY2xrYV9jZmdjcjBfcmVnKGRldl9wcml2LCBwaHkp
LAotCQkJICAgICAgaWNsX2RwY2xrYV9jZmdjcjBfY2xrX3NlbF9tYXNrKGRldl9wcml2LCBwaHkp
LAotCQkJICAgICAgaWNsX2RwY2xrYV9jZmdjcjBfY2xrX3NlbChkZXZfcHJpdiwgcGxsLT5pbmZv
LT5pZCwgcGh5KSwKLQkJCSAgICAgIGljbF9kcGNsa2FfY2ZnY3IwX2Nsa19vZmYoZGV2X3ByaXYs
IHBoeSkpOworCV9jbmxfZGRpX2VuYWJsZV9jbG9jayhkZXZfcHJpdiwgSUNMX0RQQ0xLQV9DRkdD
UjAsCisJCQkgICAgICBJQ0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NFTF9NQVNLKHBoeSksCisJ
CQkgICAgICBJQ0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NFTChwbGwtPmluZm8tPmlkLCBwaHkp
LAorCQkJICAgICAgSUNMX0RQQ0xLQV9DRkdDUjBfRERJX0NMS19PRkYocGh5KSk7CiB9CiAKIHN0
YXRpYyB2b2lkIGljbF9kZGlfY29tYm9fZGlzYWJsZV9jbG9jayhzdHJ1Y3QgaW50ZWxfZW5jb2Rl
ciAqZW5jb2RlcikKQEAgLTMyMzksOCArMzI2Nyw4IEBAIHN0YXRpYyB2b2lkIGljbF9kZGlfY29t
Ym9fZGlzYWJsZV9jbG9jayhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikKIAlzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsK
IAllbnVtIHBoeSBwaHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgZW5jb2Rlci0+cG9y
dCk7CiAKLQlfY25sX2RkaV9kaXNhYmxlX2Nsb2NrKGRldl9wcml2LCBpY2xfZHBjbGthX2NmZ2Ny
MF9yZWcoZGV2X3ByaXYsIHBoeSksCi0JCQkgICAgICAgaWNsX2RwY2xrYV9jZmdjcjBfY2xrX29m
ZihkZXZfcHJpdiwgcGh5KSk7CisJX2NubF9kZGlfZGlzYWJsZV9jbG9jayhkZXZfcHJpdiwgSUNM
X0RQQ0xLQV9DRkdDUjAsCisJCQkgICAgICAgSUNMX0RQQ0xLQV9DRkdDUjBfRERJX0NMS19PRkYo
cGh5KSk7CiB9CiAKIHN0YXRpYyB2b2lkIGRnMV9zYW5pdGl6ZV9wb3J0X2Nsa19vZmYoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LApAQCAtNTY1NCw5ICs1NjgyLDEyIEBAIHZvaWQg
aW50ZWxfZGRpX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBlbnVtIHBv
cnQgcG9ydCkKIAllbmNvZGVyLT5jbG9uZWFibGUgPSAwOwogCWVuY29kZXItPnBpcGVfbWFzayA9
IH4wOwogCi0JaWYgKElTX0FMREVSTEFLRV9TKGRldl9wcml2KSB8fCBJU19ST0NLRVRMQUtFKGRl
dl9wcml2KSkgewotCQllbmNvZGVyLT5lbmFibGVfY2xvY2sgPSBpY2xfZGRpX2NvbWJvX2VuYWJs
ZV9jbG9jazsKLQkJZW5jb2Rlci0+ZGlzYWJsZV9jbG9jayA9IGljbF9kZGlfY29tYm9fZGlzYWJs
ZV9jbG9jazsKKwlpZiAoSVNfQUxERVJMQUtFX1MoZGV2X3ByaXYpKSB7CisJCWVuY29kZXItPmVu
YWJsZV9jbG9jayA9IGFkbHNfZGRpX2VuYWJsZV9jbG9jazsKKwkJZW5jb2Rlci0+ZGlzYWJsZV9j
bG9jayA9IGFkbHNfZGRpX2Rpc2FibGVfY2xvY2s7CisJfSBlbHNlIGlmIChJU19ST0NLRVRMQUtF
KGRldl9wcml2KSkgeworCQllbmNvZGVyLT5lbmFibGVfY2xvY2sgPSBya2xfZGRpX2VuYWJsZV9j
bG9jazsKKwkJZW5jb2Rlci0+ZGlzYWJsZV9jbG9jayA9IHJrbF9kZGlfZGlzYWJsZV9jbG9jazsK
IAl9IGVsc2UgaWYgKElTX0RHMShkZXZfcHJpdikpIHsKIAkJZW5jb2Rlci0+ZW5hYmxlX2Nsb2Nr
ID0gZGcxX2RkaV9lbmFibGVfY2xvY2s7CiAJCWVuY29kZXItPmRpc2FibGVfY2xvY2sgPSBkZzFf
ZGRpX2Rpc2FibGVfY2xvY2s7Ci0tIAoyLjI2LjIKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeAo=

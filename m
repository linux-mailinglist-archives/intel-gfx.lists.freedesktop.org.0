Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2C7A2F794F
	for <lists+intel-gfx@lfdr.de>; Mon, 11 Nov 2019 17:58:34 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 72F396E24E;
	Mon, 11 Nov 2019 16:58:32 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 34B8F6E14E;
 Mon, 11 Nov 2019 16:58:30 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 19162664-1500050 for multiple; Mon, 11 Nov 2019 16:58:18 +0000
MIME-Version: 1.0
To: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <d3ebc198-d18c-24ac-d99c-ae3874723dc9@linux.intel.com>
References: <20191108204932.6197-1-chris@chris-wilson.co.uk>
 <20191108204932.6197-2-chris@chris-wilson.co.uk>
 <d3ebc198-d18c-24ac-d99c-ae3874723dc9@linux.intel.com>
Message-ID: <157349149542.28106.5101096590588614708@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Mon, 11 Nov 2019 16:58:15 +0000
Subject: Re: [Intel-gfx] [igt-dev] [PATCH i-g-t 2/3] i915/gem_userptr_blits:
 Exercise userptr + userfaultfd
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBUdnJ0a28gVXJzdWxpbiAoMjAxOS0xMS0xMSAxNjo0ODoxNCkKPiAKPiBPbiAwOC8x
MS8yMDE5IDIwOjQ5LCBDaHJpcyBXaWxzb24gd3JvdGU6Cj4gPiBSZWdpc3RlciBhIHVzZXJzcGFj
ZSBmYXVsdCBoYW5kbGVyIGZvciBhIG1lbW9yeSByZWdpb24gdGhhdCB3ZSBhbHNvIHBhc3MKPiA+
IHRvIHRoZSBHUFUgdmlhIHVzZXJwdHIsIGFuZCBtYWtlIHN1cmUgdGhlIHBhZ2VmYXVsdCBpcyBw
cm9wZXJseSBzZXJ2aWNlZAo+ID4gYmVmb3JlIHdlIGV4ZWN1dGUuCj4gPiAKPiA+IFNpZ25lZC1v
ZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+ID4gQ2M6IFR2
cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Cj4gPiAtLS0KPiA+ICAgdGVz
dHMvaTkxNS9nZW1fdXNlcnB0cl9ibGl0cy5jIHwgMTE5ICsrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrLQo+ID4gICAxIGZpbGUgY2hhbmdlZCwgMTE4IGluc2VydGlvbnMoKyksIDEgZGVs
ZXRpb24oLSkKPiA+IAo+ID4gZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX3VzZXJwdHJfYmxp
dHMuYyBiL3Rlc3RzL2k5MTUvZ2VtX3VzZXJwdHJfYmxpdHMuYwo+ID4gaW5kZXggMTFkNmY0YTFj
Li43NzRhOWY5MmMgMTAwNjQ0Cj4gPiAtLS0gYS90ZXN0cy9pOTE1L2dlbV91c2VycHRyX2JsaXRz
LmMKPiA+ICsrKyBiL3Rlc3RzL2k5MTUvZ2VtX3VzZXJwdHJfYmxpdHMuYwo+ID4gQEAgLTM2LDYg
KzM2LDggQEAKPiA+ICAgICogVGhlIGdvYWwgaXMgdG8gc2ltcGx5IGVuc3VyZSB0aGUgYmFzaWNz
IHdvcmsuCj4gPiAgICAqLwo+ID4gICAKPiA+ICsjaW5jbHVkZSA8bGludXgvdXNlcmZhdWx0ZmQu
aD4KPiA+ICsKPiA+ICAgI2luY2x1ZGUgImlndC5oIgo+ID4gICAjaW5jbHVkZSA8c3RkbGliLmg+
Cj4gPiAgICNpbmNsdWRlIDxzdGRpby5oPgo+ID4gQEAgLTQ0LDkgKzQ2LDExIEBACj4gPiAgICNp
bmNsdWRlIDxpbnR0eXBlcy5oPgo+ID4gICAjaW5jbHVkZSA8ZXJybm8uaD4KPiA+ICAgI2luY2x1
ZGUgPHNldGptcC5oPgo+ID4gKyNpbmNsdWRlIDxzeXMvaW9jdGwuaD4KPiA+ICsjaW5jbHVkZSA8
c3lzL21tYW4uaD4KPiA+ICAgI2luY2x1ZGUgPHN5cy9zdGF0Lmg+Cj4gPiArI2luY2x1ZGUgPHN5
cy9zeXNjYWxsLmg+Cj4gPiAgICNpbmNsdWRlIDxzeXMvdGltZS5oPgo+ID4gLSNpbmNsdWRlIDxz
eXMvbW1hbi5oPgo+ID4gICAjaW5jbHVkZSA8Z2xpYi5oPgo+ID4gICAjaW5jbHVkZSA8c2lnbmFs
Lmg+Cj4gPiAgICNpbmNsdWRlIDxwdGhyZWFkLmg+Cj4gPiBAQCAtMTgzMSw2ICsxODM1LDExNiBA
QCBzdGF0aWMgdm9pZCB0ZXN0X2ludmFsaWRhdGVfY2xvc2VfcmFjZShpbnQgZmQsIGJvb2wgb3Zl
cmxhcCkKPiA+ICAgICAgIGZyZWUodF9kYXRhLnB0cik7Cj4gPiAgIH0KPiA+ICAgCj4gPiArc3Ry
dWN0IHVmZF90aHJlYWQgewo+ID4gKyAgICAgdWludDMyX3QgKnBhZ2U7Cj4gPiArICAgICBpbnQg
aTkxNTsKPiA+ICt9Owo+ID4gKwo+ID4gK3N0YXRpYyB1aW50MzJfdCBjcmVhdGVfcGFnZShpbnQg
aTkxNSwgdm9pZCAqcGFnZSkKPiA+ICt7Cj4gPiArICAgICB1aW50MzJfdCBoYW5kbGU7Cj4gPiAr
Cj4gPiArICAgICBnZW1fdXNlcnB0cihpOTE1LCBwYWdlLCA0MDk2LCAwLCAwLCAmaGFuZGxlKTsK
PiA+ICsgICAgIHJldHVybiBoYW5kbGU7Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyB1aW50MzJf
dCBjcmVhdGVfYmF0Y2goaW50IGk5MTUpCj4gPiArewo+ID4gKyAgICAgY29uc3QgdWludDMyX3Qg
YmJlID0gTUlfQkFUQ0hfQlVGRkVSX0VORDsKPiA+ICsgICAgIHVpbnQzMl90IGhhbmRsZTsKPiA+
ICsKPiA+ICsgICAgIGhhbmRsZSA9IGdlbV9jcmVhdGUoaTkxNSwgNDA5Nik7Cj4gPiArICAgICBn
ZW1fd3JpdGUoaTkxNSwgaGFuZGxlLCAwLCAmYmJlLCBzaXplb2YoYmJlKSk7Cj4gPiArCj4gPiAr
ICAgICByZXR1cm4gaGFuZGxlOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgdm9pZCAqdWZkX3Ro
cmVhZCh2b2lkICphcmcpCj4gPiArewo+ID4gKyAgICAgc3RydWN0IHVmZF90aHJlYWQgKnQgPSBh
cmc7Cj4gPiArICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNfb2JqZWN0MiBvYmpbMl0gPSB7
Cj4gPiArICAgICAgICAgICAgIHsgLmhhbmRsZSA9IGNyZWF0ZV9wYWdlKHQtPmk5MTUsIHQtPnBh
Z2UpIH0sCj4gPiArICAgICAgICAgICAgIHsgLmhhbmRsZSA9IGNyZWF0ZV9iYXRjaCh0LT5pOTE1
KSB9LAo+ID4gKyAgICAgfTsKPiA+ICsgICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZl
cjIgZWIgPSB7Cj4gPiArICAgICAgICAgICAgIC5idWZmZXJzX3B0ciA9IHRvX3VzZXJfcG9pbnRl
cihvYmopLAo+ID4gKyAgICAgICAgICAgICAuYnVmZmVyX2NvdW50ID0gQVJSQVlfU0laRShvYmop
LAo+ID4gKyAgICAgfTsKPiA+ICsKPiA+ICsgICAgIGlndF9kZWJ1Zygic3VibWl0dGluZyBmYXVs
dFxuIik7Cj4gPiArICAgICBnZW1fZXhlY2J1Zih0LT5pOTE1LCAmZWIpOwo+ID4gKyAgICAgZ2Vt
X3N5bmModC0+aTkxNSwgb2JqWzFdLmhhbmRsZSk7Cj4gPiArCj4gPiArICAgICBmb3IgKGludCBp
ID0gMDsgaSA8IEFSUkFZX1NJWkUob2JqKTsgaSsrKQo+ID4gKyAgICAgICAgICAgICBnZW1fY2xv
c2UodC0+aTkxNSwgb2JqW2ldLmhhbmRsZSk7Cj4gPiArCj4gPiArICAgICB0LT5pOTE1ID0gLTE7
Cj4gPiArICAgICByZXR1cm4gTlVMTDsKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIGludCB1c2Vy
ZmF1bHRmZChpbnQgZmxhZ3MpCj4gPiArewo+ID4gKyAgICAgcmV0dXJuIHN5c2NhbGwoU1lTX3Vz
ZXJmYXVsdGZkLCBmbGFncyk7Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyB2b2lkIHRlc3RfdXNl
cmZhdWx0KGludCBpOTE1KQo+ID4gK3sKPiA+ICsgICAgIHN0cnVjdCB1ZmZkaW9fYXBpIGFwaSA9
IHsgLmFwaSA9IFVGRkRfQVBJIH07Cj4gPiArICAgICBzdHJ1Y3QgdWZmZGlvX3JlZ2lzdGVyIHJl
ZzsKPiA+ICsgICAgIHN0cnVjdCB1ZmZkaW9fY29weSBjb3B5Owo+ID4gKyAgICAgc3RydWN0IHVm
ZmRfbXNnIG1zZzsKPiA+ICsgICAgIHN0cnVjdCB1ZmRfdGhyZWFkIHQ7Cj4gPiArICAgICBwdGhy
ZWFkX3QgdGhyZWFkOwo+ID4gKyAgICAgY2hhciBwb2lzb25bNDA5Nl07Cj4gPiArICAgICBpbnQg
dWZkOwo+ID4gKwo+ID4gKyAgICAgLyoKPiA+ICsgICAgICAqIFJlZ2lzdGVyIGEgcGFnZSB3aXRo
IHVzZXJmYXVsdGZkLCBhbmQgd3JhcCB0aGF0IGluc2lkZSBhIHVzZXJwdHIgYm8uCj4gPiArICAg
ICAgKiBXaGVuIHdlIHRyeSB0byB1c2UgZ3VwIGluc2lkZXIgdXNlcnB0cl9nZXRfcGFnZXMsIGl0
IHdpbGwgdHJpZ2dlcgo+ID4gKyAgICAgICogYSBwYWdlZmF1bHQgdGhhdCBpcyBzZW50IHRvIHRo
ZSB1c2VyZmF1bHRmZCBmb3Igc2VydmljaW5nLiBUaGlzCj4gPiArICAgICAgKiBpcyBhcmJpdHJh
cmlseSBzbG93LCBhcyB0aGUgc3VibWlzc2lvbiBtdXN0IHdhaXQgdW50aWwgdGhlIGZhdWx0Cj4g
PiArICAgICAgKiBpcyBzZXJ2aWNlZCBieSB0aGUgdXNlcnNwYWNlIGZhdWx0IGhhbmRsZXIuCj4g
PiArICAgICAgKi8KPiA+ICsKPiA+ICsgICAgIHVmZCA9IHVzZXJmYXVsdGZkKDApOwo+ID4gKyAg
ICAgaWd0X3JlcXVpcmVfZih1ZmQgIT0gLTEsICJrZXJuZWwgc3VwcG9ydCBmb3IgdXNlcmZhdWx0
ZmRcbiIpOwo+ID4gKyAgICAgaWd0X3JlcXVpcmVfZihpb2N0bCh1ZmQsIFVGRkRJT19BUEksICZh
cGkpID09IDAgJiYgYXBpLmFwaSA9PSBVRkZEX0FQSSwKPiA+ICsgICAgICAgICAgICAgICAgICAg
InVzZXJmYXVsdGZkIEFQSSB2JWxsZDolbGxkXG4iLCBVRkZEX0FQSSwgYXBpLmFwaSk7Cj4gPiAr
Cj4gPiArICAgICB0Lmk5MTUgPSBpOTE1Owo+ID4gKwo+ID4gKyAgICAgdC5wYWdlID0gbW1hcChO
VUxMLCA0MDk2LCBQUk9UX1dSSVRFLCBNQVBfU0hBUkVEIHwgTUFQX0FOT04sIDAsIDApOwo+ID4g
KyAgICAgaWd0X2Fzc2VydCh0LnBhZ2UgIT0gTUFQX0ZBSUxFRCk7Cj4gPiArCj4gPiArICAgICBt
ZW1zZXQoJnJlZywgMCwgc2l6ZW9mKHJlZykpOwo+ID4gKyAgICAgcmVnLm1vZGUgPSBVRkZESU9f
UkVHSVNURVJfTU9ERV9NSVNTSU5HOwo+ID4gKyAgICAgcmVnLnJhbmdlLnN0YXJ0ID0gdG9fdXNl
cl9wb2ludGVyKHQucGFnZSk7Cj4gPiArICAgICByZWcucmFuZ2UubGVuID0gNDA5NjsKPiA+ICsg
ICAgIGRvX2lvY3RsKHVmZCwgVUZGRElPX1JFR0lTVEVSLCAmcmVnKTsKPiA+ICsgICAgIGlndF9h
c3NlcnQocmVnLmlvY3RscyA9PSBVRkZEX0FQSV9SQU5HRV9JT0NUTFMpOwo+ID4gKwo+ID4gKyAg
ICAgaWd0X2Fzc2VydChwdGhyZWFkX2NyZWF0ZSgmdGhyZWFkLCBOVUxMLCB1ZmRfdGhyZWFkLCAm
dCkgPT0gMCk7Cj4gPiArCj4gPiArICAgICAvKiBXYWl0IGZvciB0aGUgZmF1bHQgKi8KPiA+ICsg
ICAgIGlndF9hc3NlcnRfZXEocmVhZCh1ZmQsICZtc2csIHNpemVvZihtc2cpKSwgc2l6ZW9mKG1z
ZykpOwo+ID4gKyAgICAgaWd0X2Fzc2VydF9lcShtc2cuZXZlbnQsIFVGRkRfRVZFTlRfUEFHRUZB
VUxUKTsKPiA+ICsgICAgIGlndF9hc3NlcnQoZnJvbV91c2VyX3BvaW50ZXIobXNnLmFyZy5wYWdl
ZmF1bHQuYWRkcmVzcykgPT0gdC5wYWdlKTsKPiA+ICsKPiA+ICsgICAgIC8qIEZhdWx0aW5nIHRo
cmVhZCByZW1haW5zIGJsb2NrZWQgKi8KPiA+ICsgICAgIGlndF9hc3NlcnRfZXEodC5pOTE1LCBp
OTE1KTsKPiAKPiBUaGlzIGxvb2tzIGNvdWxkIGJlIGEgZmFsc2UgbmVnYXRpdmUgc2luY2Ugbm90
aGluZyBzYXlzIHRoZSB0aHJlYWQgaXMgCj4gbm90IGJsb2NrZWQganVzdCBub3QgZ290IHJvdW5k
IHJlc2V0dGluZyB0LT5pOTE1LgoKVGhlcmUncyBhIGdlbV9zeW5jKCkgaW4gdGhlIHRocmVhZC4g
T3VyIGdvYWwgaXMgdGhhdCB0aGUgdGhyZWFkIGlzCmJsb2NrZWQgKGVpdGhlciBhdCBzdWJtaXQg
b3IgaW4gdGhlIHN5bmMpIHVudGlsIHdlIHNlcnZpY2UgdGhlIGZhdWx0LgoKPiA+ICsgICAgIG1l
bXNldCgmY29weSwgMCwgc2l6ZW9mKGNvcHkpKTsKPiA+ICsgICAgIGNvcHkuZHN0ID0gbXNnLmFy
Zy5wYWdlZmF1bHQuYWRkcmVzczsKPiA+ICsgICAgIGNvcHkuc3JjID0gdG9fdXNlcl9wb2ludGVy
KG1lbXNldChwb2lzb24sIDB4YzUsIHNpemVvZihwb2lzb24pKSk7Cj4gPiArICAgICBjb3B5Lmxl
biA9IDQwOTY7Cj4gPiArICAgICBkb19pb2N0bCh1ZmQsIFVGRkRJT19DT1BZLCAmY29weSk7Cj4g
Cj4gV2hhdCBpcyB0aGUgcG9pbnQgb2YgcG9pc29uIGRhdGE/CgpKdXN0IGEgdGVsbCB0YWxlLgog
Cj4gV291bGQgaXQgd29yayBiZXR0ZXIgdG8gaGF2ZSBhIGhhbmdpbmcgYmF0Y2ggcmVnaXN0ZXJl
ZCB3aXRoIHVzZXJmYXVsdCAKPiBhbmQgdGhlbiByZXBsYWNlIGl0IHdpdGggYSB2YWxpZCBiYXRj
aCBoZXJlPyBUaGF0IHdvdWxkIGVuc3VyZSBleGVjYnVmIAo+IHdhcyAgYmxvY2tlZCB1bnRpbCB1
c2VyZmF1bHQgaGFuZGxlciBmaW5pc2hlcyBvdGhlcndpc2Ugd2UgZ2V0IGEgR1BVIGhhbmcuCgpT
dHJpY3RseSB3ZSBjYW4ndCB1c2UgdXNlcnB0ciBmb3IgdGhlIGJhdGNoIGl0c2VsZiwgYXMgYWl1
aSB0aGF0CnJlcXVpcmVzIExMQyBmb3IgdGhlIENTIGNvaGVyZW5jeS4gT25lIG9mIHRoZSBmb2xs
b3dpbmcgdGVzdHMgdXNlcyB0aGUKdXNlcmZhdWx0IGhhbmRsZXIgYXMgdGhlIHN5bmMgcG9pbnQg
Zm9yIHJlcGxhY2luZyBhIHBvaXNvbmVkIGJhdGNoIHdpdGgKYSB2YWxpZCBvbmUsIHdpdGggdGhl
IGludGVudGlvbiBvZiBsb29raW5nIGZvciB0aGUgR1BVIGhhbmcgaWYgdGhlIGZhdWx0CndhcyBt
aXNzZWQuIFRoYXQncyB0aGUgdGVzdCBJIHN0YXJ0ZWQgd2l0aCwgbXkgZ29hbCBoZXJlIHdhcyB0
byBmb2N1cwpvbiB0aGUgdXNlcnB0ciArIHVzZXJmYXVsdCBhcyBzaW1wbHkgYXMgSSBjb3VsZDsg
c28gZ2VtX3N5bmMoKS4KLUNocmlzCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeA==

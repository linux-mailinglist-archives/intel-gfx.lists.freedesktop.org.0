Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A548F1155A7
	for <lists+intel-gfx@lfdr.de>; Fri,  6 Dec 2019 17:43:26 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3A48E6FA5E;
	Fri,  6 Dec 2019 16:43:23 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mblankhorst.nl (mblankhorst.nl [141.105.120.124])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B200D6FA5E
 for <intel-gfx@lists.freedesktop.org>; Fri,  6 Dec 2019 16:43:20 +0000 (UTC)
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  6 Dec 2019 17:43:15 +0100
Message-Id: <20191206164317.2489743-4-maarten.lankhorst@linux.intel.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191206164317.2489743-1-maarten.lankhorst@linux.intel.com>
References: <20191206164317.2489743-1-maarten.lankhorst@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 3/5] drm/i915: Add an implementation for
 i915_gem_ww_ctx locking.
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

aTkxNV9nZW1fd3dfY3R4IGlzIHVzZWQgdG8gbG9jayBhbGwgZ2VtIGJvJ3MgZm9yIHBpbm5pbmcg
YW5kIG1lbW9yeQpldmljdGlvbi4gV2UgZG9uJ3QgdXNlIGl0IHlldCwgYnV0IGxldHMgc3RhcnQg
YWRkaW5nIHRoZSBkZWZpbml0aW9uCmZpcnN0LgoKVG8gdXNlIGl0LCB3ZSBoYXZlIHRvIHBhc3Mg
YSBub24tTlVMTCB3dyB0byBnZW1fb2JqZWN0X2xvY2ssIGFuZCBkb24ndAp1bmxvY2sgZGlyZWN0
bHkuIEl0IGlzIGRvbmUgaW4gaTkxNV9nZW1fd3dfY3R4X2ZpbmkuCgpTaWduZWQtb2ZmLWJ5OiBN
YWFydGVuIExhbmtob3JzdCA8bWFhcnRlbi5sYW5raG9yc3RAbGludXguaW50ZWwuY29tPgotLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jICB8ICA2ICstLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9vdmVybGF5LmMgIHwgIDIgKy0KIC4u
Li9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NsaWVudF9ibHQuYyAgICB8ICAyICstCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jICAgfCAgMiArLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jICAgIHwgIDQgKy0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kb21haW4uYyAgICB8IDEwICsrLS0KIC4uLi9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYyAgICB8ICA0ICstCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMgICAgfCAgMiArLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oICAgIHwgMzggKysrKysrKysrKy0tLQogLi4u
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X2JsdC5jICAgIHwgIDIgKy0KIC4uLi9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oICB8ICA5ICsrKysKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wbS5jICAgICAgICB8ICAyICstCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdGlsaW5nLmMgICAgfCAgMiArLQogLi4uL2dwdS9k
cm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYyAgIHwgIDQgKy0KIC4uLi9pOTE1L2dl
bS9zZWxmdGVzdHMvaTkxNV9nZW1fY2xpZW50X2JsdC5jICB8ICAyICstCiAuLi4vaTkxNS9nZW0v
c2VsZnRlc3RzL2k5MTVfZ2VtX2NvaGVyZW5jeS5jICAgfCAxMCArKy0tCiAuLi4vZHJtL2k5MTUv
Z2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0LmMgfCAgNCArLQogLi4uL2RybS9pOTE1L2dl
bS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1hbi5jICAgIHwgIDQgKy0KIC4uLi9pOTE1L2dlbS9zZWxm
dGVzdHMvaTkxNV9nZW1fb2JqZWN0X2JsdC5jICB8ICA0ICstCiAuLi4vZHJtL2k5MTUvZ2VtL3Nl
bGZ0ZXN0cy9pOTE1X2dlbV9waHlzLmMgICAgfCAgMiArLQogLi4uL2dwdS9kcm0vaTkxNS9ndC9z
ZWxmdGVzdF93b3JrYXJvdW5kcy5jICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d2
dC9jbWRfcGFyc2VyLmMgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dlbS5jICAgICAgICAgICAgICAgfCA1NCArKysrKysrKysrKysrKysrKy0tCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2dlbS5oICAgICAgICAgICAgICAgfCAxMSArKysrCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW0uYyAgICAgfCA0MSArKysrKysrKysrKysrKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMgICAgIHwgIDIgKy0KIC4u
Li9kcm0vaTkxNS9zZWxmdGVzdHMvaW50ZWxfbWVtb3J5X3JlZ2lvbi5jICB8ICA0ICstCiAyNyBm
aWxlcyBjaGFuZ2VkLCAxODEgaW5zZXJ0aW9ucygrKSwgNTAgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwppbmRleCBlYjA1MDVhNjZl
YTguLmM2MjFiODBkOGQwZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5LmMKQEAgLTIxNTksNyArMjE1OSw3IEBAIGludGVsX3Bpbl9hbmRfZmVuY2VfZmJf
b2JqKHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiLAogCSAqIHBpbi91bnBpbi9mZW5jZSBhbmQg
bm90IG1vcmUuCiAJICovCiAJd2FrZXJlZiA9IGludGVsX3J1bnRpbWVfcG1fZ2V0KCZkZXZfcHJp
di0+cnVudGltZV9wbSk7Ci0JaTkxNV9nZW1fb2JqZWN0X2xvY2sob2JqKTsKKwlpOTE1X2dlbV9v
YmplY3RfbG9jayhOVUxMLCBvYmopOwogCiAJYXRvbWljX2luYygmZGV2X3ByaXYtPmdwdV9lcnJv
ci5wZW5kaW5nX2ZiX3Bpbik7CiAKQEAgLTIyMjEsNyArMjIyMSw3IEBAIGludGVsX3Bpbl9hbmRf
ZmVuY2VfZmJfb2JqKHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiLAogCiB2b2lkIGludGVsX3Vu
cGluX2ZiX3ZtYShzdHJ1Y3QgaTkxNV92bWEgKnZtYSwgdW5zaWduZWQgbG9uZyBmbGFncykKIHsK
LQlpOTE1X2dlbV9vYmplY3RfbG9jayh2bWEtPm9iaik7CisJaTkxNV9nZW1fb2JqZWN0X2xvY2so
TlVMTCwgdm1hLT5vYmopOwogCWlmIChmbGFncyAmIFBMQU5FX0hBU19GRU5DRSkKIAkJaTkxNV92
bWFfdW5waW5fZmVuY2Uodm1hKTsKIAlpOTE1X2dlbV9vYmplY3RfdW5waW5fZnJvbV9kaXNwbGF5
X3BsYW5lKHZtYSk7CkBAIC0xNjM0OCw3ICsxNjM0OCw3IEBAIHN0YXRpYyBpbnQgaW50ZWxfZnJh
bWVidWZmZXJfaW5pdChzdHJ1Y3QgaW50ZWxfZnJhbWVidWZmZXIgKmludGVsX2ZiLAogCWlmICgh
aW50ZWxfZmItPmZyb250YnVmZmVyKQogCQlyZXR1cm4gLUVOT01FTTsKIAotCWk5MTVfZ2VtX29i
amVjdF9sb2NrKG9iaik7CisJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVMTCwgb2JqKTsKIAl0aWxp
bmcgPSBpOTE1X2dlbV9vYmplY3RfZ2V0X3RpbGluZyhvYmopOwogCXN0cmlkZSA9IGk5MTVfZ2Vt
X29iamVjdF9nZXRfc3RyaWRlKG9iaik7CiAJaTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9vdmVybGF5LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX292ZXJsYXkuYwppbmRleCA4Y2Zi
Nzg1ZTc2MWMuLjUwOTJkN2QwYjY4MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9vdmVybGF5LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9vdmVybGF5LmMKQEAgLTc1OCw3ICs3NTgsNyBAQCBzdGF0aWMgaW50IGludGVsX292
ZXJsYXlfZG9fcHV0X2ltYWdlKHN0cnVjdCBpbnRlbF9vdmVybGF5ICpvdmVybGF5LAogCiAJYXRv
bWljX2luYygmZGV2X3ByaXYtPmdwdV9lcnJvci5wZW5kaW5nX2ZiX3Bpbik7CiAKLQlpOTE1X2dl
bV9vYmplY3RfbG9jayhuZXdfYm8pOworCWk5MTVfZ2VtX29iamVjdF9sb2NrKE5VTEwsIG5ld19i
byk7CiAJdm1hID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl90b19kaXNwbGF5X3BsYW5lKG5ld19ibywK
IAkJCQkJCSAgIDAsIE5VTEwsIFBJTl9NQVBQQUJMRSk7CiAJaTkxNV9nZW1fb2JqZWN0X3VubG9j
ayhuZXdfYm8pOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X2NsaWVudF9ibHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jbGllbnRf
Ymx0LmMKaW5kZXggODEzNjZhYTQ4MTJiLi5kMWI3MmM5MGZkODMgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jbGllbnRfYmx0LmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NsaWVudF9ibHQuYwpAQCAtMjg3LDcgKzI4Nyw3IEBA
IGludCBpOTE1X2dlbV9zY2hlZHVsZV9maWxsX3BhZ2VzX2JsdChzdHJ1Y3QgZHJtX2k5MTVfZ2Vt
X29iamVjdCAqb2JqLAogCWRtYV9mZW5jZV9pbml0KCZ3b3JrLT5kbWEsICZjbGVhcl9wYWdlc193
b3JrX29wcywgJmZlbmNlX2xvY2ssIDAsIDApOwogCWk5MTVfc3dfZmVuY2VfaW5pdCgmd29yay0+
d2FpdCwgY2xlYXJfcGFnZXNfd29ya19ub3RpZnkpOwogCi0JaTkxNV9nZW1fb2JqZWN0X2xvY2so
b2JqKTsKKwlpOTE1X2dlbV9vYmplY3RfbG9jayhOVUxMLCBvYmopOwogCWVyciA9IGk5MTVfc3df
ZmVuY2VfYXdhaXRfcmVzZXJ2YXRpb24oJndvcmstPndhaXQsCiAJCQkJCSAgICAgIG9iai0+YmFz
ZS5yZXN2LCBOVUxMLAogCQkJCQkgICAgICB0cnVlLCBJOTE1X0ZFTkNFX1RJTUVPVVQsCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwppbmRleCA5ZjFkYzk2YjEw
YTYuLjViM2ExYWEzZjY2ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
Y29udGV4dC5jCkBAIC0xMTQsNyArMTE0LDcgQEAgc3RhdGljIHZvaWQgbHV0X2Nsb3NlKHN0cnVj
dCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCiAJCQljb250aW51ZTsKIAogCQlyY3VfcmVhZF91bmxv
Y2soKTsKLQkJaTkxNV9nZW1fb2JqZWN0X2xvY2sob2JqKTsKKwkJaTkxNV9nZW1fb2JqZWN0X2xv
Y2soTlVMTCwgb2JqKTsKIAkJbGlzdF9mb3JfZWFjaF9lbnRyeShsdXQsICZvYmotPmx1dF9saXN0
LCBvYmpfbGluaykgewogCQkJaWYgKGx1dC0+Y3R4ICE9IGN0eCkKIAkJCQljb250aW51ZTsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYwppbmRleCAzNzJiNTdjYTBl
ZmMuLmI3YzQ2MDE2ODIwZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2RtYWJ1Zi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9k
bWFidWYuYwpAQCAtMTI0LDcgKzEyNCw3IEBAIHN0YXRpYyBpbnQgaTkxNV9nZW1fYmVnaW5fY3B1
X2FjY2VzcyhzdHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1ZiwgZW51bSBkbWFfZGF0YV9kaXJlCiAJaWYg
KGVycikKIAkJcmV0dXJuIGVycjsKIAotCWVyciA9IGk5MTVfZ2VtX29iamVjdF9sb2NrX2ludGVy
cnVwdGlibGUob2JqKTsKKwllcnIgPSBpOTE1X2dlbV9vYmplY3RfbG9ja19pbnRlcnJ1cHRpYmxl
KE5VTEwsIG9iaik7CiAJaWYgKGVycikKIAkJZ290byBvdXQ7CiAKQEAgLTE0NSw3ICsxNDUsNyBA
QCBzdGF0aWMgaW50IGk5MTVfZ2VtX2VuZF9jcHVfYWNjZXNzKHN0cnVjdCBkbWFfYnVmICpkbWFf
YnVmLCBlbnVtIGRtYV9kYXRhX2RpcmVjdAogCWlmIChlcnIpCiAJCXJldHVybiBlcnI7CiAKLQll
cnIgPSBpOTE1X2dlbV9vYmplY3RfbG9ja19pbnRlcnJ1cHRpYmxlKG9iaik7CisJZXJyID0gaTkx
NV9nZW1fb2JqZWN0X2xvY2tfaW50ZXJydXB0aWJsZShOVUxMLCBvYmopOwogCWlmIChlcnIpCiAJ
CWdvdG8gb3V0OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fZG9tYWluLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG9tYWluLmMK
aW5kZXggODA4ZWIzMjdhMjliLi4zMTgxNmJkY2VjYWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kb21haW4uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fZG9tYWluLmMKQEAgLTMyLDcgKzMyLDcgQEAgdm9pZCBpOTE1X2dlbV9v
YmplY3RfZmx1c2hfaWZfZGlzcGxheShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQog
CWlmICghaTkxNV9nZW1fb2JqZWN0X2lzX2ZyYW1lYnVmZmVyKG9iaikpCiAJCXJldHVybjsKIAot
CWk5MTVfZ2VtX29iamVjdF9sb2NrKG9iaik7CisJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVMTCwg
b2JqKTsKIAlfX2k5MTVfZ2VtX29iamVjdF9mbHVzaF9mb3JfZGlzcGxheShvYmopOwogCWk5MTVf
Z2VtX29iamVjdF91bmxvY2sob2JqKTsKIH0KQEAgLTI5MSw3ICsyOTEsNyBAQCBpbnQgaTkxNV9n
ZW1fc2V0X2NhY2hpbmdfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwK
IAlpZiAocmV0KQogCQlnb3RvIG91dDsKIAotCXJldCA9IGk5MTVfZ2VtX29iamVjdF9sb2NrX2lu
dGVycnVwdGlibGUob2JqKTsKKwlyZXQgPSBpOTE1X2dlbV9vYmplY3RfbG9ja19pbnRlcnJ1cHRp
YmxlKE5VTEwsIG9iaik7CiAJaWYgKHJldCA9PSAwKSB7CiAJCXJldCA9IGk5MTVfZ2VtX29iamVj
dF9zZXRfY2FjaGVfbGV2ZWwob2JqLCBsZXZlbCk7CiAJCWk5MTVfZ2VtX29iamVjdF91bmxvY2so
b2JqKTsKQEAgLTU1MSw3ICs1NTEsNyBAQCBpOTE1X2dlbV9zZXRfZG9tYWluX2lvY3RsKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJaWYgKGVycikKIAkJZ290byBvdXQ7CiAK
LQllcnIgPSBpOTE1X2dlbV9vYmplY3RfbG9ja19pbnRlcnJ1cHRpYmxlKG9iaik7CisJZXJyID0g
aTkxNV9nZW1fb2JqZWN0X2xvY2tfaW50ZXJydXB0aWJsZShOVUxMLCBvYmopOwogCWlmIChlcnIp
CiAJCWdvdG8gb3V0X3VucGluOwogCkBAIC01OTEsNyArNTkxLDcgQEAgaW50IGk5MTVfZ2VtX29i
amVjdF9wcmVwYXJlX3JlYWQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAlpZiAo
IWk5MTVfZ2VtX29iamVjdF9oYXNfc3RydWN0X3BhZ2Uob2JqKSkKIAkJcmV0dXJuIC1FTk9ERVY7
CiAKLQlyZXQgPSBpOTE1X2dlbV9vYmplY3RfbG9ja19pbnRlcnJ1cHRpYmxlKG9iaik7CisJcmV0
ID0gaTkxNV9nZW1fb2JqZWN0X2xvY2tfaW50ZXJydXB0aWJsZShOVUxMLCBvYmopOwogCWlmIChy
ZXQpCiAJCXJldHVybiByZXQ7CiAKQEAgLTY0NSw3ICs2NDUsNyBAQCBpbnQgaTkxNV9nZW1fb2Jq
ZWN0X3ByZXBhcmVfd3JpdGUoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAlpZiAo
IWk5MTVfZ2VtX29iamVjdF9oYXNfc3RydWN0X3BhZ2Uob2JqKSkKIAkJcmV0dXJuIC1FTk9ERVY7
CiAKLQlyZXQgPSBpOTE1X2dlbV9vYmplY3RfbG9ja19pbnRlcnJ1cHRpYmxlKG9iaik7CisJcmV0
ID0gaTkxNV9nZW1fb2JqZWN0X2xvY2tfaW50ZXJydXB0aWJsZShOVUxMLCBvYmopOwogCWlmIChy
ZXQpCiAJCXJldHVybiByZXQ7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9leGVjYnVmZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fZXhlY2J1ZmZlci5jCmluZGV4IDUwYmE0OTMzYTdhZS4uMDJmZGYwODFjMWJlIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMKQEAgLTc5Nyw3
ICs3OTcsNyBAQCBzdGF0aWMgaW50IGViX2xvb2t1cF92bWFzKHN0cnVjdCBpOTE1X2V4ZWNidWZm
ZXIgKmViKQogCQlsdXQtPmhhbmRsZSA9IGhhbmRsZTsKIAkJbHV0LT5jdHggPSBlYi0+Z2VtX2Nv
bnRleHQ7CiAKLQkJaTkxNV9nZW1fb2JqZWN0X2xvY2sob2JqKTsKKwkJaTkxNV9nZW1fb2JqZWN0
X2xvY2soTlVMTCwgb2JqKTsKIAkJbGlzdF9hZGQoJmx1dC0+b2JqX2xpbmssICZvYmotPmx1dF9s
aXN0KTsKIAkJaTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwogCkBAIC0xMDMwLDcgKzEwMzAs
NyBAQCBzdGF0aWMgdm9pZCAqcmVsb2NfaW9tYXAoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Qg
Km9iaiwKIAkJaWYgKHVzZV9jcHVfcmVsb2MoY2FjaGUsIG9iaikpCiAJCQlyZXR1cm4gTlVMTDsK
IAotCQlpOTE1X2dlbV9vYmplY3RfbG9jayhvYmopOworCQlpOTE1X2dlbV9vYmplY3RfbG9jayhO
VUxMLCBvYmopOwogCQllcnIgPSBpOTE1X2dlbV9vYmplY3Rfc2V0X3RvX2d0dF9kb21haW4ob2Jq
LCB0cnVlKTsKIAkJaTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwogCQlpZiAoZXJyKQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5jCmluZGV4IDE2ZDYxMWRiOWNh
Ni4uZGFlZTUzZmU2NTI0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fb2JqZWN0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29i
amVjdC5jCkBAIC0xMDQsNyArMTA0LDcgQEAgdm9pZCBpOTE1X2dlbV9jbG9zZV9vYmplY3Qoc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpnZW0sIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkKIAlzdHJ1Y3Qg
aTkxNV9tbWFwX29mZnNldCAqbW1vOwogCUxJU1RfSEVBRChjbG9zZSk7CiAKLQlpOTE1X2dlbV9v
YmplY3RfbG9jayhvYmopOworCWk5MTVfZ2VtX29iamVjdF9sb2NrKE5VTEwsIG9iaik7CiAJbGlz
dF9mb3JfZWFjaF9lbnRyeV9zYWZlKGx1dCwgbG4sICZvYmotPmx1dF9saXN0LCBvYmpfbGluaykg
ewogCQlzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4ID0gbHV0LT5jdHg7CiAKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaCBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaAppbmRleCBhMWViN2MwYjIzYWMuLmM3
YTU1NGFlMTUxZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X29iamVjdC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3Qu
aApAQCAtMTAzLDIwICsxMDMsNDQgQEAgaTkxNV9nZW1fb2JqZWN0X3B1dChzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqKQogCiAjZGVmaW5lIGFzc2VydF9vYmplY3RfaGVsZChvYmopIGRt
YV9yZXN2X2Fzc2VydF9oZWxkKChvYmopLT5iYXNlLnJlc3YpCiAKLXN0YXRpYyBpbmxpbmUgdm9p
ZCBpOTE1X2dlbV9vYmplY3RfbG9jayhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQor
c3RhdGljIGlubGluZSBpbnQgX19pOTE1X2dlbV9vYmplY3RfbG9jayhzdHJ1Y3QgaTkxNV9nZW1f
d3dfY3R4ICp3dywKKwkJCQkJIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCisJCQkJ
CSBib29sIGludHIpCiB7Ci0JZG1hX3Jlc3ZfbG9jayhvYmotPmJhc2UucmVzdiwgTlVMTCk7CisJ
aW50IHJldDsKKworCWlmIChpbnRyKQorCQlyZXQgPSBkbWFfcmVzdl9sb2NrX2ludGVycnVwdGli
bGUob2JqLT5iYXNlLnJlc3YsIHd3ID8gJnd3LT5jdHggOiBOVUxMKTsKKwllbHNlCisJCXJldCA9
IGRtYV9yZXN2X2xvY2sob2JqLT5iYXNlLnJlc3YsIHd3ID8gJnd3LT5jdHggOiBOVUxMKTsKKwor
CWlmICghcmV0ICYmIHd3KQorCQlsaXN0X2FkZF90YWlsKCZvYmotPm9ial9saW5rLCAmd3ctPm9i
al9saXN0KTsKKwlpZiAocmV0ID09IC1FQUxSRUFEWSkKKwkJcmV0ID0gMDsKKworCWlmIChyZXQg
PT0gLUVERUFETEspCisJCXd3LT5jb250ZW5kZWQgPSBvYmo7CisKKwlyZXR1cm4gcmV0OwogfQog
Ci1zdGF0aWMgaW5saW5lIGJvb2wgaTkxNV9nZW1fb2JqZWN0X3RyeWxvY2soc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKm9iaikKK3N0YXRpYyBpbmxpbmUgaW50IGk5MTVfZ2VtX29iamVjdF9s
b2NrKHN0cnVjdCBpOTE1X2dlbV93d19jdHggKnd3LAorCQkJCSAgICAgICBzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqKQogewotCXJldHVybiBkbWFfcmVzdl90cnlsb2NrKG9iai0+YmFz
ZS5yZXN2KTsKKwlyZXR1cm4gX19pOTE1X2dlbV9vYmplY3RfbG9jayh3dywgb2JqLCB3dyAmJiB3
dy0+aW50cik7CiB9CiAKLXN0YXRpYyBpbmxpbmUgaW50Ci1pOTE1X2dlbV9vYmplY3RfbG9ja19p
bnRlcnJ1cHRpYmxlKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCitzdGF0aWMgaW5s
aW5lIGludCBpOTE1X2dlbV9vYmplY3RfbG9ja19pbnRlcnJ1cHRpYmxlKHN0cnVjdCBpOTE1X2dl
bV93d19jdHggKnd3LAorCQkJCQkJICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2Jq
KQogewotCXJldHVybiBkbWFfcmVzdl9sb2NrX2ludGVycnVwdGlibGUob2JqLT5iYXNlLnJlc3Ys
IE5VTEwpOworCVdBUk5fT04od3cgJiYgIXd3LT5pbnRyKTsKKwlyZXR1cm4gX19pOTE1X2dlbV9v
YmplY3RfbG9jayh3dywgb2JqLCB0cnVlKTsKK30KKworc3RhdGljIGlubGluZSBib29sIGk5MTVf
Z2VtX29iamVjdF90cnlsb2NrKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCit7CisJ
cmV0dXJuIGRtYV9yZXN2X3RyeWxvY2sob2JqLT5iYXNlLnJlc3YpOwogfQogCiBzdGF0aWMgaW5s
aW5lIHZvaWQgaTkxNV9nZW1fb2JqZWN0X3VubG9jayhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29i
amVjdF9ibHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfYmx0
LmMKaW5kZXggNzA4MDlkODg5N2NkLi5iN2M0NzY4MTMxNDggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfYmx0LmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF9ibHQuYwpAQCAtMTQyLDcgKzE0Miw3IEBAIGlu
dCBpOTE1X2dlbV9vYmplY3RfZmlsbF9ibHQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aiwKIAkJcmV0dXJuIGVycjsKIAogCWlmIChvYmotPmNhY2hlX2RpcnR5ICYgfm9iai0+Y2FjaGVf
Y29oZXJlbnQpIHsKLQkJaTkxNV9nZW1fb2JqZWN0X2xvY2sob2JqKTsKKwkJaTkxNV9nZW1fb2Jq
ZWN0X2xvY2soTlVMTCwgb2JqKTsKIAkJaTkxNV9nZW1fY2xmbHVzaF9vYmplY3Qob2JqLCAwKTsK
IAkJaTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfdHlwZXMuaAppbmRleCAyZDQwNGU2ZjYzZGYuLjMz
YTVkZGRhMDI4NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X29iamVjdF90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9v
YmplY3RfdHlwZXMuaApAQCAtMTIyLDYgKzEyMiwxNSBAQCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29i
amVjdCB7CiAJICovCiAJc3RydWN0IGxpc3RfaGVhZCBsdXRfbGlzdDsKIAorCS8qKgorCSAqIEBv
YmpfbGluazogTGluayBpbnRvIEBpOTE1X2dlbV93d19jdHgub2JqX2xpc3QKKwkgKgorCSAqIFdo
ZW4gd2UgbG9jayB0aGlzIG9iamVjdCB0aHJvdWdoIGk5MTVfZ2VtX29iamVjdF9sb2NrKCkgd2l0
aCBhCisJICogY29udGV4dCwgd2UgYWRkIGl0IHRvIHRoZSBsaXN0IHRvIGVuc3VyZSB3ZSBjYW4g
dW5sb2NrIGV2ZXJ5dGhpbmcKKwkgKiB3aGVuIGk5MTVfZ2VtX3d3X2N0eF9iYWNrb2ZmKCkgb3Ig
aTkxNV9nZW1fd3dfY3R4X2ZpbmkoKSBhcmUgY2FsbGVkLgorCSAqLworCXN0cnVjdCBsaXN0X2hl
YWQgb2JqX2xpbms7CisKIAkvKiogU3RvbGVuIG1lbW9yeSBmb3IgdGhpcyBvYmplY3QsIGluc3Rl
YWQgb2YgYmVpbmcgYmFja2VkIGJ5IHNobWVtLiAqLwogCXN0cnVjdCBkcm1fbW1fbm9kZSAqc3Rv
bGVuOwogCXVuaW9uIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BtLmMKaW5kZXgg
Zjg4ZWUxMzE3YmI0Li4wZjc5Nzg0MzA4MmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9wbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9wbS5jCkBAIC04NCw3ICs4NCw3IEBAIHZvaWQgaTkxNV9nZW1fc3VzcGVuZF9sYXRlKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCiAJCQlzcGluX3VubG9ja19pcnFyZXN0b3Jl
KCZpOTE1LT5tbS5vYmpfbG9jaywgZmxhZ3MpOwogCi0JCQlpOTE1X2dlbV9vYmplY3RfbG9jayhv
YmopOworCQkJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVMTCwgb2JqKTsKIAkJCVdBUk5fT04oaTkx
NV9nZW1fb2JqZWN0X3NldF90b19ndHRfZG9tYWluKG9iaiwgZmFsc2UpKTsKIAkJCWk5MTVfZ2Vt
X29iamVjdF91bmxvY2sob2JqKTsKIAkJCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90aWxpbmcuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90aWxpbmcuYwppbmRleCA2Yzc4MjVhMmRjMmEu
LmE4ZTk3ZjU1ODM5ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX3RpbGluZy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90aWxp
bmcuYwpAQCAtMjM2LDcgKzIzNiw3IEBAIGk5MTVfZ2VtX29iamVjdF9zZXRfdGlsaW5nKHN0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJICogd2hpbHN0IGV4ZWN1dGluZyBhIGZlbmNl
ZCBjb21tYW5kIGZvciBhbiB1bnRpbGVkIG9iamVjdC4KIAkgKi8KIAotCWk5MTVfZ2VtX29iamVj
dF9sb2NrKG9iaik7CisJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVMTCwgb2JqKTsKIAlpZiAoaTkx
NV9nZW1fb2JqZWN0X2lzX2ZyYW1lYnVmZmVyKG9iaikpIHsKIAkJaTkxNV9nZW1fb2JqZWN0X3Vu
bG9jayhvYmopOwogCQlyZXR1cm4gLUVCVVNZOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYwppbmRleCAzZjk5MjQ5MWY1MzcuLjY5Y2M2ZDM5ODA0
ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3Bh
Z2VzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2Vz
LmMKQEAgLTk3NCw3ICs5NzQsNyBAQCBzdGF0aWMgaW50IGdwdV93cml0ZShzdHJ1Y3QgaW50ZWxf
Y29udGV4dCAqY2UsCiB7CiAJaW50IGVycjsKIAotCWk5MTVfZ2VtX29iamVjdF9sb2NrKHZtYS0+
b2JqKTsKKwlpOTE1X2dlbV9vYmplY3RfbG9jayhOVUxMLCB2bWEtPm9iaik7CiAJZXJyID0gaTkx
NV9nZW1fb2JqZWN0X3NldF90b19ndHRfZG9tYWluKHZtYS0+b2JqLCB0cnVlKTsKIAlpOTE1X2dl
bV9vYmplY3RfdW5sb2NrKHZtYS0+b2JqKTsKIAlpZiAoZXJyKQpAQCAtMTAyMiw3ICsxMDIyLDcg
QEAgc3RhdGljIGludCBfX2NwdV9jaGVja19sbWVtKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmosIHUzMiBkd29yZCwgdTMyIHZhbCkKIAl1bnNpZ25lZCBsb25nIG47CiAJaW50IGVycjsK
IAotCWk5MTVfZ2VtX29iamVjdF9sb2NrKG9iaik7CisJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVM
TCwgb2JqKTsKIAllcnIgPSBpOTE1X2dlbV9vYmplY3Rfc2V0X3RvX3djX2RvbWFpbihvYmosIGZh
bHNlKTsKIAlpOTE1X2dlbV9vYmplY3RfdW5sb2NrKG9iaik7CiAJaWYgKGVycikKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY2xpZW50X2Js
dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jbGllbnRf
Ymx0LmMKaW5kZXggYjk3MmJlMTY1ZTg1Li5mNmY5MWEyYTZjYWQgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY2xpZW50X2JsdC5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY2xpZW50X2JsdC5j
CkBAIC03Miw3ICs3Miw3IEBAIHN0YXRpYyBpbnQgX19pZ3RfY2xpZW50X2ZpbGwoc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCQlpZiAoZXJyKQogCQkJZ290byBlcnJfdW5waW47CiAK
LQkJaTkxNV9nZW1fb2JqZWN0X2xvY2sob2JqKTsKKwkJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVM
TCwgb2JqKTsKIAkJZXJyID0gaTkxNV9nZW1fb2JqZWN0X3NldF90b19jcHVfZG9tYWluKG9iaiwg
ZmFsc2UpOwogCQlpOTE1X2dlbV9vYmplY3RfdW5sb2NrKG9iaik7CiAJCWlmIChlcnIpCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvaGVy
ZW5jeS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb2hl
cmVuY3kuYwppbmRleCA0OWVkYzUxMTExZDUuLjdiYmRkNWJmMWNlYyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb2hlcmVuY3kuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvaGVyZW5jeS5j
CkBAIC04Miw3ICs4Miw3IEBAIHN0YXRpYyBpbnQgZ3R0X3NldChzdHJ1Y3QgY29udGV4dCAqY3R4
LCB1bnNpZ25lZCBsb25nIG9mZnNldCwgdTMyIHYpCiAJdTMyIF9faW9tZW0gKm1hcDsKIAlpbnQg
ZXJyID0gMDsKIAotCWk5MTVfZ2VtX29iamVjdF9sb2NrKGN0eC0+b2JqKTsKKwlpOTE1X2dlbV9v
YmplY3RfbG9jayhOVUxMLCBjdHgtPm9iaik7CiAJZXJyID0gaTkxNV9nZW1fb2JqZWN0X3NldF90
b19ndHRfZG9tYWluKGN0eC0+b2JqLCB0cnVlKTsKIAlpOTE1X2dlbV9vYmplY3RfdW5sb2NrKGN0
eC0+b2JqKTsKIAlpZiAoZXJyKQpAQCAtMTE1LDcgKzExNSw3IEBAIHN0YXRpYyBpbnQgZ3R0X2dl
dChzdHJ1Y3QgY29udGV4dCAqY3R4LCB1bnNpZ25lZCBsb25nIG9mZnNldCwgdTMyICp2KQogCXUz
MiBfX2lvbWVtICptYXA7CiAJaW50IGVyciA9IDA7CiAKLQlpOTE1X2dlbV9vYmplY3RfbG9jayhj
dHgtPm9iaik7CisJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVMTCwgY3R4LT5vYmopOwogCWVyciA9
IGk5MTVfZ2VtX29iamVjdF9zZXRfdG9fZ3R0X2RvbWFpbihjdHgtPm9iaiwgZmFsc2UpOwogCWk5
MTVfZ2VtX29iamVjdF91bmxvY2soY3R4LT5vYmopOwogCWlmIChlcnIpCkBAIC0xNDcsNyArMTQ3
LDcgQEAgc3RhdGljIGludCB3Y19zZXQoc3RydWN0IGNvbnRleHQgKmN0eCwgdW5zaWduZWQgbG9u
ZyBvZmZzZXQsIHUzMiB2KQogCXUzMiAqbWFwOwogCWludCBlcnI7CiAKLQlpOTE1X2dlbV9vYmpl
Y3RfbG9jayhjdHgtPm9iaik7CisJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVMTCwgY3R4LT5vYmop
OwogCWVyciA9IGk5MTVfZ2VtX29iamVjdF9zZXRfdG9fd2NfZG9tYWluKGN0eC0+b2JqLCB0cnVl
KTsKIAlpOTE1X2dlbV9vYmplY3RfdW5sb2NrKGN0eC0+b2JqKTsKIAlpZiAoZXJyKQpAQCAtMTY4
LDcgKzE2OCw3IEBAIHN0YXRpYyBpbnQgd2NfZ2V0KHN0cnVjdCBjb250ZXh0ICpjdHgsIHVuc2ln
bmVkIGxvbmcgb2Zmc2V0LCB1MzIgKnYpCiAJdTMyICptYXA7CiAJaW50IGVycjsKIAotCWk5MTVf
Z2VtX29iamVjdF9sb2NrKGN0eC0+b2JqKTsKKwlpOTE1X2dlbV9vYmplY3RfbG9jayhOVUxMLCBj
dHgtPm9iaik7CiAJZXJyID0gaTkxNV9nZW1fb2JqZWN0X3NldF90b193Y19kb21haW4oY3R4LT5v
YmosIGZhbHNlKTsKIAlpOTE1X2dlbV9vYmplY3RfdW5sb2NrKGN0eC0+b2JqKTsKIAlpZiAoZXJy
KQpAQCAtMTkxLDcgKzE5MSw3IEBAIHN0YXRpYyBpbnQgZ3B1X3NldChzdHJ1Y3QgY29udGV4dCAq
Y3R4LCB1bnNpZ25lZCBsb25nIG9mZnNldCwgdTMyIHYpCiAJdTMyICpjczsKIAlpbnQgZXJyOwog
Ci0JaTkxNV9nZW1fb2JqZWN0X2xvY2soY3R4LT5vYmopOworCWk5MTVfZ2VtX29iamVjdF9sb2Nr
KE5VTEwsIGN0eC0+b2JqKTsKIAllcnIgPSBpOTE1X2dlbV9vYmplY3Rfc2V0X3RvX2d0dF9kb21h
aW4oY3R4LT5vYmosIHRydWUpOwogCWk5MTVfZ2VtX29iamVjdF91bmxvY2soY3R4LT5vYmopOwog
CWlmIChlcnIpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3Rz
L2k5MTVfZ2VtX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMv
aTkxNV9nZW1fY29udGV4dC5jCmluZGV4IDc4MGU1OGZlNWM2NC4uZDdiMzBkYWNhNWNiIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRl
eHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2Nv
bnRleHQuYwpAQCAtOTUwLDcgKzk1MCw3IEBAIGVtaXRfcnBjc19xdWVyeShzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqLAogCWlmIChJU19FUlIodm1hKSkKIAkJcmV0dXJuIFBUUl9FUlIo
dm1hKTsKIAotCWk5MTVfZ2VtX29iamVjdF9sb2NrKG9iaik7CisJaTkxNV9nZW1fb2JqZWN0X2xv
Y2soTlVMTCwgb2JqKTsKIAllcnIgPSBpOTE1X2dlbV9vYmplY3Rfc2V0X3RvX2d0dF9kb21haW4o
b2JqLCBmYWxzZSk7CiAJaTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwogCWlmIChlcnIpCkBA
IC0xNjU4LDcgKzE2NTgsNyBAQCBzdGF0aWMgaW50IHJlYWRfZnJvbV9zY3JhdGNoKHN0cnVjdCBp
OTE1X2dlbV9jb250ZXh0ICpjdHgsCiAKIAlpOTE1X3JlcXVlc3RfYWRkKHJxKTsKIAotCWk5MTVf
Z2VtX29iamVjdF9sb2NrKG9iaik7CisJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVMTCwgb2JqKTsK
IAllcnIgPSBpOTE1X2dlbV9vYmplY3Rfc2V0X3RvX2NwdV9kb21haW4ob2JqLCBmYWxzZSk7CiAJ
aTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwogCWlmIChlcnIpCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1hbi5jCmluZGV4IDU5MTQzNWM1
ZjM2OC4uYTk1NmM5MjdmNDY5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
c2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
c2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYwpAQCAtMTAyLDcgKzEwMiw3IEBAIHN0YXRpYyBpbnQg
Y2hlY2tfcGFydGlhbF9tYXBwaW5nKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJ
R0VNX0JVR19PTihpOTE1X2dlbV9vYmplY3RfZ2V0X3RpbGluZyhvYmopICE9IHRpbGUtPnRpbGlu
Zyk7CiAJR0VNX0JVR19PTihpOTE1X2dlbV9vYmplY3RfZ2V0X3N0cmlkZShvYmopICE9IHRpbGUt
PnN0cmlkZSk7CiAKLQlpOTE1X2dlbV9vYmplY3RfbG9jayhvYmopOworCWk5MTVfZ2VtX29iamVj
dF9sb2NrKE5VTEwsIG9iaik7CiAJZXJyID0gaTkxNV9nZW1fb2JqZWN0X3NldF90b19ndHRfZG9t
YWluKG9iaiwgdHJ1ZSk7CiAJaTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwogCWlmIChlcnIp
IHsKQEAgLTE4Nyw3ICsxODcsNyBAQCBzdGF0aWMgaW50IGNoZWNrX3BhcnRpYWxfbWFwcGluZ3Mo
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAlHRU1fQlVHX09OKGk5MTVfZ2VtX29i
amVjdF9nZXRfdGlsaW5nKG9iaikgIT0gdGlsZS0+dGlsaW5nKTsKIAlHRU1fQlVHX09OKGk5MTVf
Z2VtX29iamVjdF9nZXRfc3RyaWRlKG9iaikgIT0gdGlsZS0+c3RyaWRlKTsKIAotCWk5MTVfZ2Vt
X29iamVjdF9sb2NrKG9iaik7CisJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVMTCwgb2JqKTsKIAll
cnIgPSBpOTE1X2dlbV9vYmplY3Rfc2V0X3RvX2d0dF9kb21haW4ob2JqLCB0cnVlKTsKIAlpOTE1
X2dlbV9vYmplY3RfdW5sb2NrKG9iaik7CiAJaWYgKGVycikgewpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0LmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX29iamVjdF9ibHQuYwppbmRl
eCA2MjA3N2ZlNDY3MTUuLmUyM2Q4NTM5ZGU3NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0LmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9vYmplY3RfYmx0LmMKQEAgLTI3Niw3
ICsyNzYsNyBAQCBzdGF0aWMgaW50IGlndF9maWxsX2JsdF90aHJlYWQodm9pZCAqYXJnKQogCQlp
ZiAoZXJyKQogCQkJZ290byBlcnJfdW5waW47CiAKLQkJaTkxNV9nZW1fb2JqZWN0X2xvY2sob2Jq
KTsKKwkJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVMTCwgb2JqKTsKIAkJZXJyID0gaTkxNV9nZW1f
b2JqZWN0X3NldF90b19jcHVfZG9tYWluKG9iaiwgZmFsc2UpOwogCQlpOTE1X2dlbV9vYmplY3Rf
dW5sb2NrKG9iaik7CiAJCWlmIChlcnIpCkBAIC0zOTcsNyArMzk3LDcgQEAgc3RhdGljIGludCBp
Z3RfY29weV9ibHRfdGhyZWFkKHZvaWQgKmFyZykKIAkJaWYgKGVycikKIAkJCWdvdG8gZXJyX3Vu
cGluOwogCi0JCWk5MTVfZ2VtX29iamVjdF9sb2NrKGRzdCk7CisJCWk5MTVfZ2VtX29iamVjdF9s
b2NrKE5VTEwsIGRzdCk7CiAJCWVyciA9IGk5MTVfZ2VtX29iamVjdF9zZXRfdG9fY3B1X2RvbWFp
bihkc3QsIGZhbHNlKTsKIAkJaTkxNV9nZW1fb2JqZWN0X3VubG9jayhkc3QpOwogCQlpZiAoZXJy
KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dl
bV9waHlzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX3Bo
eXMuYwppbmRleCAzNDkzMjg3MWIzYTUuLjI2MmQ1ZmQ0NDNjMSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9waHlzLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9waHlzLmMKQEAgLTQ0LDcgKzQ0
LDcgQEAgc3RhdGljIGludCBtb2NrX3BoeXNfb2JqZWN0KHZvaWQgKmFyZykKIAl9CiAKIAkvKiBN
YWtlIHRoZSBvYmplY3QgZGlydHkgc28gdGhhdCBwdXRfcGFnZXMgbXVzdCBkbyBjb3B5IGJhY2sg
dGhlIGRhdGEgKi8KLQlpOTE1X2dlbV9vYmplY3RfbG9jayhvYmopOworCWk5MTVfZ2VtX29iamVj
dF9sb2NrKE5VTEwsIG9iaik7CiAJZXJyID0gaTkxNV9nZW1fb2JqZWN0X3NldF90b19ndHRfZG9t
YWluKG9iaiwgdHJ1ZSk7CiAJaTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwogCWlmIChlcnIp
IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3dvcmthcm91
bmRzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF93b3JrYXJvdW5kcy5jCmlu
ZGV4IGQ1ZDFlMWEzMjE4Ny4uNTg5MWU5ZWI5YTc0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9zZWxmdGVzdF93b3JrYXJvdW5kcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3NlbGZ0ZXN0X3dvcmthcm91bmRzLmMKQEAgLTIxNCw3ICsyMTQsNyBAQCBzdGF0aWMg
aW50IGNoZWNrX3doaXRlbGlzdChzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4LAogCQlyZXR1
cm4gUFRSX0VSUihyZXN1bHRzKTsKIAogCWVyciA9IDA7Ci0JaTkxNV9nZW1fb2JqZWN0X2xvY2so
cmVzdWx0cyk7CisJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVMTCwgcmVzdWx0cyk7CiAJaW50ZWxf
d2VkZ2Vfb25fdGltZW91dCgmd2VkZ2UsIGVuZ2luZS0+Z3QsIEhaIC8gNSkgLyogc2FmZXR5IG5l
dCEgKi8KIAkJZXJyID0gaTkxNV9nZW1fb2JqZWN0X3NldF90b19jcHVfZG9tYWluKHJlc3VsdHMs
IGZhbHNlKTsKIAlpOTE1X2dlbV9vYmplY3RfdW5sb2NrKHJlc3VsdHMpOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2NtZF9wYXJzZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d2dC9jbWRfcGFyc2VyLmMKaW5kZXggMjFhMTc2Y2Q4YWNjLi44NWNkZTEwNTIwZTQgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9jbWRfcGFyc2VyLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2NtZF9wYXJzZXIuYwpAQCAtMjk1NCw3ICsyOTU0LDcgQEAg
c3RhdGljIGludCBzaGFkb3dfaW5kaXJlY3RfY3R4KHN0cnVjdCBpbnRlbF9zaGFkb3dfd2FfY3R4
ICp3YV9jdHgpCiAJCWdvdG8gcHV0X29iajsKIAl9CiAKLQlpOTE1X2dlbV9vYmplY3RfbG9jayhv
YmopOworCWk5MTVfZ2VtX29iamVjdF9sb2NrKE5VTEwsIG9iaik7CiAJcmV0ID0gaTkxNV9nZW1f
b2JqZWN0X3NldF90b19jcHVfZG9tYWluKG9iaiwgZmFsc2UpOwogCWk5MTVfZ2VtX29iamVjdF91
bmxvY2sob2JqKTsKIAlpZiAocmV0KSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwppbmRleCA5MTlk
M2E3MjNjNTAuLjlkNzRmZGE0YzBmNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCkBAIC00MTIs
NyArNDEyLDcgQEAgaTkxNV9nZW1fZ3R0X3ByZWFkKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmosCiAJCUdFTV9CVUdfT04oIWRybV9tbV9ub2RlX2FsbG9jYXRlZCgmbm9kZSkpOwogCX0K
IAotCXJldCA9IGk5MTVfZ2VtX29iamVjdF9sb2NrX2ludGVycnVwdGlibGUob2JqKTsKKwlyZXQg
PSBpOTE1X2dlbV9vYmplY3RfbG9ja19pbnRlcnJ1cHRpYmxlKE5VTEwsIG9iaik7CiAJaWYgKHJl
dCkKIAkJZ290byBvdXRfdW5waW47CiAKQEAgLTYxMSw3ICs2MTEsNyBAQCBpOTE1X2dlbV9ndHRf
cHdyaXRlX2Zhc3Qoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJR0VNX0JVR19P
TighZHJtX21tX25vZGVfYWxsb2NhdGVkKCZub2RlKSk7CiAJfQogCi0JcmV0ID0gaTkxNV9nZW1f
b2JqZWN0X2xvY2tfaW50ZXJydXB0aWJsZShvYmopOworCXJldCA9IGk5MTVfZ2VtX29iamVjdF9s
b2NrX2ludGVycnVwdGlibGUoTlVMTCwgb2JqKTsKIAlpZiAocmV0KQogCQlnb3RvIG91dF91bnBp
bjsKIApAQCAtMTE5NCw3ICsxMTk0LDcgQEAgc3RhdGljIGludCBfX2ludGVsX2VuZ2luZXNfcmVj
b3JkX2RlZmF1bHRzKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiAJCWlmIChlcnIpCiAJCQlnb3RvIG91
dDsKIAotCQlpOTE1X2dlbV9vYmplY3RfbG9jayhzdGF0ZS0+b2JqKTsKKwkJaTkxNV9nZW1fb2Jq
ZWN0X2xvY2soTlVMTCwgc3RhdGUtPm9iaik7CiAJCWVyciA9IGk5MTVfZ2VtX29iamVjdF9zZXRf
dG9fY3B1X2RvbWFpbihzdGF0ZS0+b2JqLCBmYWxzZSk7CiAJCWk5MTVfZ2VtX29iamVjdF91bmxv
Y2soc3RhdGUtPm9iaik7CiAJCWlmIChlcnIpCkBAIC0xNTA4LDcgKzE1MDgsNyBAQCBpbnQgaTkx
NV9nZW1fZnJlZXplX2xhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJaTkxNV9n
ZW1fZHJhaW5fZnJlZWRfb2JqZWN0cyhpOTE1KTsKIAogCWxpc3RfZm9yX2VhY2hfZW50cnkob2Jq
LCAmaTkxNS0+bW0uc2hyaW5rX2xpc3QsIG1tLmxpbmspIHsKLQkJaTkxNV9nZW1fb2JqZWN0X2xv
Y2sob2JqKTsKKwkJaTkxNV9nZW1fb2JqZWN0X2xvY2soTlVMTCwgb2JqKTsKIAkJV0FSTl9PTihp
OTE1X2dlbV9vYmplY3Rfc2V0X3RvX2NwdV9kb21haW4ob2JqLCB0cnVlKSk7CiAJCWk5MTVfZ2Vt
X29iamVjdF91bmxvY2sob2JqKTsKIAl9CkBAIC0xNTYxLDYgKzE1NjEsNTIgQEAgaW50IGk5MTVf
Z2VtX29wZW4oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHN0cnVjdCBkcm1fZmlsZSAq
ZmlsZSkKIAlyZXR1cm4gcmV0OwogfQogCit2b2lkIGk5MTVfZ2VtX3d3X2N0eF9pbml0KHN0cnVj
dCBpOTE1X2dlbV93d19jdHggKnd3LCBib29sIGludHIpCit7CisJd3dfYWNxdWlyZV9pbml0KCZ3
dy0+Y3R4LCAmcmVzZXJ2YXRpb25fd3dfY2xhc3MpOworCUlOSVRfTElTVF9IRUFEKCZ3dy0+b2Jq
X2xpc3QpOworCXd3LT5pbnRyID0gaW50cjsKKwl3dy0+Y29udGVuZGVkID0gTlVMTDsKK30KKwor
c3RhdGljIHZvaWQgaTkxNV9nZW1fd3dfY3R4X3VubG9ja19hbGwoc3RydWN0IGk5MTVfZ2VtX3d3
X2N0eCAqd3cpCit7CisJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKKworCXdoaWxl
ICgob2JqID0gbGlzdF9maXJzdF9lbnRyeV9vcl9udWxsKCZ3dy0+b2JqX2xpc3QsIHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0LCBvYmpfbGluaykpKSB7CisJCWxpc3RfZGVsKCZvYmotPm9ial9s
aW5rKTsKKwkJaTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOworCX0KK30KKwordm9pZCBpOTE1
X2dlbV93d19jdHhfZmluaShzdHJ1Y3QgaTkxNV9nZW1fd3dfY3R4ICp3dykKK3sKKwlpOTE1X2dl
bV93d19jdHhfdW5sb2NrX2FsbCh3dyk7CisJV0FSTl9PTih3dy0+Y29udGVuZGVkKTsKKwl3d19h
Y3F1aXJlX2ZpbmkoJnd3LT5jdHgpOworfQorCitpbnQgX19tdXN0X2NoZWNrIGk5MTVfZ2VtX3d3
X2N0eF9iYWNrb2ZmKHN0cnVjdCBpOTE1X2dlbV93d19jdHggKnd3KQoreworCWludCByZXQgPSAw
OworCisJaWYgKFdBUk5fT04oIXd3LT5jb250ZW5kZWQpKQorCQlyZXR1cm4gLUVJTlZBTDsKKwor
CWk5MTVfZ2VtX3d3X2N0eF91bmxvY2tfYWxsKHd3KTsKKwlpZiAod3ctPmludHIpCisJCXJldCA9
IGRtYV9yZXN2X2xvY2tfc2xvd19pbnRlcnJ1cHRpYmxlKHd3LT5jb250ZW5kZWQtPmJhc2UucmVz
diwgJnd3LT5jdHgpOworCWVsc2UKKwkJZG1hX3Jlc3ZfbG9ja19zbG93KHd3LT5jb250ZW5kZWQt
PmJhc2UucmVzdiwgJnd3LT5jdHgpOworCisJaWYgKCFyZXQpCisJCWxpc3RfYWRkX3RhaWwoJnd3
LT5jb250ZW5kZWQtPm9ial9saW5rLCAmd3ctPm9ial9saXN0KTsKKworCXd3LT5jb250ZW5kZWQg
PSBOVUxMOworCisJcmV0dXJuIHJldDsKK30KKwogI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9J
OTE1X1NFTEZURVNUKQogI2luY2x1ZGUgInNlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYyIKICNp
bmNsdWRlICJzZWxmdGVzdHMvaTkxNV9nZW0uYyIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2VtLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5oCmluZGV4
IDE3NTNjODRkNmMwZC4uOTg4NzU1ZGJmNGJlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2dlbS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmgKQEAg
LTExNiw0ICsxMTYsMTUgQEAgc3RhdGljIGlubGluZSBib29sIF9fdGFza2xldF9pc19zY2hlZHVs
ZWQoc3RydWN0IHRhc2tsZXRfc3RydWN0ICp0KQogCXJldHVybiB0ZXN0X2JpdChUQVNLTEVUX1NU
QVRFX1NDSEVELCAmdC0+c3RhdGUpOwogfQogCitzdHJ1Y3QgaTkxNV9nZW1fd3dfY3R4IHsKKwlz
dHJ1Y3Qgd3dfYWNxdWlyZV9jdHggY3R4OworCXN0cnVjdCBsaXN0X2hlYWQgb2JqX2xpc3Q7CisJ
Ym9vbCBpbnRyOworCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpjb250ZW5kZWQ7Cit9Owor
Cit2b2lkIGk5MTVfZ2VtX3d3X2N0eF9pbml0KHN0cnVjdCBpOTE1X2dlbV93d19jdHggKmN0eCwg
Ym9vbCBpbnRyKTsKK3ZvaWQgaTkxNV9nZW1fd3dfY3R4X2Zpbmkoc3RydWN0IGk5MTVfZ2VtX3d3
X2N0eCAqY3R4KTsKK2ludCBfX211c3RfY2hlY2sgaTkxNV9nZW1fd3dfY3R4X2JhY2tvZmYoc3Ry
dWN0IGk5MTVfZ2VtX3d3X2N0eCAqY3R4KTsKKwogI2VuZGlmIC8qIF9fSTkxNV9HRU1fSF9fICov
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW0uYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbS5jCmluZGV4IDY1N2UyM2E4
ZGQxMS4uZjRlNzQ4NzM0NjJiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvaTkxNV9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkx
NV9nZW0uYwpAQCAtMjAyLDExICsyMDIsNTIgQEAgc3RhdGljIGludCBpZ3RfZ2VtX2hpYmVybmF0
ZSh2b2lkICphcmcpCiAJcmV0dXJuIGVycjsKIH0KIAorc3RhdGljIGludCBpZ3RfZ2VtX3d3X2N0
eCh2b2lkICphcmcpCit7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBhcmc7CisJ
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwgKm9iajI7CisJc3RydWN0IGk5MTVfZ2Vt
X3d3X2N0eCB3dzsKKwlpbnQgZXJyID0gMDsKKworCW9iaiA9IGk5MTVfZ2VtX29iamVjdF9jcmVh
dGVfaW50ZXJuYWwoaTkxNSwgUEFHRV9TSVpFKTsKKwlpZiAoSVNfRVJSKG9iaikpCisJCXJldHVy
biBQVFJfRVJSKG9iaik7CisKKwlvYmogPSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX2ludGVybmFs
KGk5MTUsIFBBR0VfU0laRSk7CisJaWYgKElTX0VSUihvYmopKSB7CisJCWVyciA9IFBUUl9FUlIo
b2JqKTsKKwkJZ290byBwdXQxOworCX0KKworCWk5MTVfZ2VtX3d3X2N0eF9pbml0KCZ3dywgZmFs
c2UpOworcmV0cnk6CisJLyogTG9jayB0aGUgb2JqZWN0cywgdHdpY2UgZm9yIGdvb2QgbWVhc3Vy
ZSAoLUVBTFJFQURZIGhhbmRsaW5nKSAqLworCWVyciA9IGk5MTVfZ2VtX29iamVjdF9sb2NrKCZ3
dywgb2JqKTsKKwlpZiAoIWVycikKKwkJZXJyID0gaTkxNV9nZW1fb2JqZWN0X2xvY2tfaW50ZXJy
dXB0aWJsZSgmd3csIG9iaik7CisJaWYgKCFlcnIpCisJCWVyciA9IGk5MTVfZ2VtX29iamVjdF9s
b2NrX2ludGVycnVwdGlibGUoJnd3LCBvYmoyKTsKKwlpZiAoIWVycikKKwkJZXJyID0gaTkxNV9n
ZW1fb2JqZWN0X2xvY2soJnd3LCBvYmoyKTsKKworCWlmIChlcnIgPT0gLUVERUFETEspIHsKKwkJ
ZXJyID0gaTkxNV9nZW1fd3dfY3R4X2JhY2tvZmYoJnd3KTsKKwkJaWYgKCFlcnIpCisJCQlnb3Rv
IHJldHJ5OworCX0KKwlpOTE1X2dlbV93d19jdHhfZmluaSgmd3cpOworCWk5MTVfZ2VtX29iamVj
dF9wdXQob2JqMik7CitwdXQxOgorCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKKwlyZXR1cm4g
ZXJyOworfQorCiBpbnQgaTkxNV9nZW1fbGl2ZV9zZWxmdGVzdHMoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTUpCiB7CiAJc3RhdGljIGNvbnN0IHN0cnVjdCBpOTE1X3N1YnRlc3QgdGVzdHNb
XSA9IHsKIAkJU1VCVEVTVChpZ3RfZ2VtX3N1c3BlbmQpLAogCQlTVUJURVNUKGlndF9nZW1faGli
ZXJuYXRlKSwKKwkJU1VCVEVTVChpZ3RfZ2VtX3d3X2N0eCksCiAJfTsKIAogCWlmIChpbnRlbF9n
dF9pc193ZWRnZWQoJmk5MTUtPmd0KSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5
MTVfdm1hLmMKaW5kZXggNThiNWY0MGEwN2RkLi4yNGYyOWY1MTlkMzMgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5jCkBAIC04OTIsNyArODkyLDcgQEAgc3RhdGlj
IGludCBpZ3Rfdm1hX3JlbWFwcGVkX2d0dCh2b2lkICphcmcpCiAJCQl1bnNpZ25lZCBpbnQgeCwg
eTsKIAkJCWludCBlcnI7CiAKLQkJCWk5MTVfZ2VtX29iamVjdF9sb2NrKG9iaik7CisJCQlpOTE1
X2dlbV9vYmplY3RfbG9jayhOVUxMLCBvYmopOwogCQkJZXJyID0gaTkxNV9nZW1fb2JqZWN0X3Nl
dF90b19ndHRfZG9tYWluKG9iaiwgdHJ1ZSk7CiAJCQlpOTE1X2dlbV9vYmplY3RfdW5sb2NrKG9i
aik7CiAJCQlpZiAoZXJyKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRl
c3RzL2ludGVsX21lbW9yeV9yZWdpb24uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0
cy9pbnRlbF9tZW1vcnlfcmVnaW9uLmMKaW5kZXggMDRkMGFhN2IzNDllLi5lNGRlNzExZTEwN2Ug
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pbnRlbF9tZW1vcnlf
cmVnaW9uLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX21lbW9y
eV9yZWdpb24uYwpAQCAtMjczLDcgKzI3Myw3IEBAIHN0YXRpYyBpbnQgaWd0X2NwdV9jaGVjayhz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLCB1MzIgZHdvcmQsIHUzMiB2YWwpCiAJdW5z
aWduZWQgbG9uZyBuOwogCWludCBlcnI7CiAKLQlpOTE1X2dlbV9vYmplY3RfbG9jayhvYmopOwor
CWk5MTVfZ2VtX29iamVjdF9sb2NrKE5VTEwsIG9iaik7CiAJZXJyID0gaTkxNV9nZW1fb2JqZWN0
X3NldF90b193Y19kb21haW4ob2JqLCBmYWxzZSk7CiAJaTkxNV9nZW1fb2JqZWN0X3VubG9jayhv
YmopOwogCWlmIChlcnIpCkBAIC01MTIsNyArNTEyLDcgQEAgc3RhdGljIGludCBpZ3RfbG1lbV93
cml0ZV9jcHUodm9pZCAqYXJnKQogCWlmIChlcnIpCiAJCWdvdG8gb3V0X3VucGluOwogCi0JaTkx
NV9nZW1fb2JqZWN0X2xvY2sob2JqKTsKKwlpOTE1X2dlbV9vYmplY3RfbG9jayhOVUxMLCBvYmop
OwogCWVyciA9IGk5MTVfZ2VtX29iamVjdF9zZXRfdG9fd2NfZG9tYWluKG9iaiwgdHJ1ZSk7CiAJ
aTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwogCWlmIChlcnIpCi0tIAoyLjI0LjAKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWls
aW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

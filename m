Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 08DB4AA80D
	for <lists+intel-gfx@lfdr.de>; Thu,  5 Sep 2019 18:13:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6303789DD5;
	Thu,  5 Sep 2019 16:13:40 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E36EC89DD5
 for <intel-gfx@lists.freedesktop.org>; Thu,  5 Sep 2019 16:13:38 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 05 Sep 2019 09:13:38 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,470,1559545200"; d="scan'208";a="382947187"
Received: from dceraolo-mobl.amr.corp.intel.com (HELO [10.254.63.63])
 ([10.254.63.63])
 by fmsmga005.fm.intel.com with ESMTP; 05 Sep 2019 09:13:38 -0700
To: Mika Kuoppala <mika.kuoppala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20190905113455.31703-1-mika.kuoppala@linux.intel.com>
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Message-ID: <50eda394-8543-7105-e36d-831334e0677e@intel.com>
Date: Thu, 5 Sep 2019 09:13:37 -0700
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190905113455.31703-1-mika.kuoppala@linux.intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH] drm/i915/tgl: Register state context
 definition for Gen12
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Michel Thierry <michel.thierry@intel.com>,
 Lucas De Marchi <lucas.demarchi@intel.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

CgpPbiA5LzUvMjAxOSA0OjM0IEFNLCBNaWthIEt1b3BwYWxhIHdyb3RlOgo+IEZyb206IE1pY2hl
bCBUaGllcnJ5IDxtaWNoZWwudGhpZXJyeUBpbnRlbC5jb20+Cj4KPiBHZW4xMiBoYXMgc3VidGxl
IGNoYW5nZXMgaW4gdGhlIHJlZyBzdGF0ZSBjb250ZXh0IG9mZnNldHMgKHNvbWUgZmllbGRzCj4g
YXJlIGdvbmUsIHNvbWUgYXJlIGluIGEgZGlmZmVyZW50IGxvY2F0aW9uKSwgY29tcGFyZWQgdG8g
cHJldmlvdXMgR2Vucy4KPgo+IFRoZSBzaW1wbGVzdCBhcHByb2FjaCBzZWVtcyB0byBiZSBrZWVw
aW5nIEdlbjEyIChhbmQgZnV0dXJlIHBsYXRmb3JtKQo+IGNoYW5nZXMgYXBhcnQgZnJvbSB0aGUg
cHJldmlvdXMgZ2Vucywgd2hpbGUga2VlcGluZyB0aGUgcmVnaXN0ZXJzIHRoYXQKPiBhcmUgY29u
dGlndW91cyBpbiBmdW5jdGlvbnMgd2UgY2FuIHJldXNlLgo+Cj4gdjI6IGFsaWFzLCB2aXJ0dWFs
IGVuZ2luZSwgcnBjcywgcHJ1bmUgdW51c2VkIHJlZ3MgKE1pa2EpCj4KPiBCc3BlYzogNDYyNTUK
PiBDYzogTWljaGFsIFdhamRlY3prbyA8bWljaGFsLndhamRlY3prb0BpbnRlbC5jb20+Cj4gQ2M6
IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5jb20+
Cj4gQ2M6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+IENjOiBKb29u
YXMgTGFodGluZW4gPGpvb25hcy5sYWh0aW5lbkBsaW51eC5pbnRlbC5jb20+Cj4gU2lnbmVkLW9m
Zi1ieTogTWljaGVsIFRoaWVycnkgPG1pY2hlbC50aGllcnJ5QGludGVsLmNvbT4KPiBTaWduZWQt
b2ZmLWJ5OiBMdWNhcyBEZSBNYXJjaGkgPGx1Y2FzLmRlbWFyY2hpQGludGVsLmNvbT4KPiBTaWdu
ZWQtb2ZmLWJ5OiBNaWthIEt1b3BwYWxhIDxtaWthLmt1b3BwYWxhQGxpbnV4LmludGVsLmNvbT4K
PiAtLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAgICB8IDE5NCAr
KysrKysrKysrKysrKysrKy0tLS0tLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2xyYy5oICAgICB8ICAgMiArCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmNf
cmVnLmggfCAgIDcgKy0KPiAgIDMgZmlsZXMgY2hhbmdlZCwgMTQ2IGluc2VydGlvbnMoKyksIDU3
IGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2xyYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiBpbmRleCA4
N2I3NDczYTZkZmIuLmY0NGM3OGE4MjkxNSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9scmMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2xyYy5jCj4gQEAgLTgxMCw2ICs4MTAsNyBAQCBzdGF0aWMgdm9pZCB2aXJ0dWFsX3VwZGF0ZV9y
ZWdpc3Rlcl9vZmZzZXRzKHUzMiAqcmVncywKPiAgIAo+ICAgCS8qIE11c3QgbWF0Y2ggZXhlY2xp
c3RzX2luaXRfcmVnX3N0YXRlKCkhICovCj4gICAKPiArCS8qIENvbW1vbiBwYXJ0ICovCj4gICAJ
cmVnc1tDVFhfQ09OVEVYVF9DT05UUk9MXSA9Cj4gICAJCWk5MTVfbW1pb19yZWdfb2Zmc2V0KFJJ
TkdfQ09OVEVYVF9DT05UUk9MKGJhc2UpKTsKPiAgIAlyZWdzW0NUWF9SSU5HX0hFQURdID0gaTkx
NV9tbWlvX3JlZ19vZmZzZXQoUklOR19IRUFEKGJhc2UpKTsKPiBAQCAtODIwLDEzICs4MjEsMTYg
QEAgc3RhdGljIHZvaWQgdmlydHVhbF91cGRhdGVfcmVnaXN0ZXJfb2Zmc2V0cyh1MzIgKnJlZ3Ms
Cj4gICAJcmVnc1tDVFhfQkJfSEVBRF9VXSA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KFJJTkdfQkJB
RERSX1VEVyhiYXNlKSk7Cj4gICAJcmVnc1tDVFhfQkJfSEVBRF9MXSA9IGk5MTVfbW1pb19yZWdf
b2Zmc2V0KFJJTkdfQkJBRERSKGJhc2UpKTsKPiAgIAlyZWdzW0NUWF9CQl9TVEFURV0gPSBpOTE1
X21taW9fcmVnX29mZnNldChSSU5HX0JCU1RBVEUoYmFzZSkpOwo+ICsKPiAgIAlyZWdzW0NUWF9T
RUNPTkRfQkJfSEVBRF9VXSA9Cj4gICAJCWk5MTVfbW1pb19yZWdfb2Zmc2V0KFJJTkdfU0JCQURE
Ul9VRFcoYmFzZSkpOwo+ICAgCXJlZ3NbQ1RYX1NFQ09ORF9CQl9IRUFEX0xdID0gaTkxNV9tbWlv
X3JlZ19vZmZzZXQoUklOR19TQkJBRERSKGJhc2UpKTsKPiAgIAlyZWdzW0NUWF9TRUNPTkRfQkJf
U1RBVEVdID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoUklOR19TQkJTVEFURShiYXNlKSk7Cj4gICAK
CldlIHNob3VsZCBkbyB0aG9zZSAzIG9ubHkgb24gcHJlLWdlbjEyLCBvciBhdCBsZWFzdCBhZGQg
YSBjb21tZW50IHNheWluZyAKdGhhdCB0aG9zZSBhcmUgbm90IGFwcGxpY2FibGUgdG8gZ2VuMTIr
IGFuZCB3ZSByZWx5IHRvIGZvbGxvdy11cCB3cml0ZXMgCnRvIG92ZXJ3cml0ZSB0aGVtLgoKPiAr
CS8qIFBQR1RUIHBhcnQgKi8KPiAgIAlyZWdzW0NUWF9DVFhfVElNRVNUQU1QXSA9Cj4gICAJCWk5
MTVfbW1pb19yZWdfb2Zmc2V0KFJJTkdfQ1RYX1RJTUVTVEFNUChiYXNlKSk7Cj4gKwo+ICAgCXJl
Z3NbQ1RYX1BEUDNfVURXXSA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KEdFTjhfUklOR19QRFBfVURX
KGJhc2UsIDMpKTsKPiAgIAlyZWdzW0NUWF9QRFAzX0xEV10gPSBpOTE1X21taW9fcmVnX29mZnNl
dChHRU44X1JJTkdfUERQX0xEVyhiYXNlLCAzKSk7Cj4gICAJcmVnc1tDVFhfUERQMl9VRFddID0g
aTkxNV9tbWlvX3JlZ19vZmZzZXQoR0VOOF9SSU5HX1BEUF9VRFcoYmFzZSwgMikpOwo+IEBAIC04
NDQsOCArODQ4LDEyIEBAIHN0YXRpYyB2b2lkIHZpcnR1YWxfdXBkYXRlX3JlZ2lzdGVyX29mZnNl
dHModTMyICpyZWdzLAo+ICAgCQlyZWdzW0NUWF9CQl9QRVJfQ1RYX1BUUl0gPQo+ICAgCQkJaTkx
NV9tbWlvX3JlZ19vZmZzZXQoUklOR19CQl9QRVJfQ1RYX1BUUihiYXNlKSk7CgpDVFhfQkJfUEVS
X0NUWF9QVFIgYW5kIHRoZSAyIGluZGlyZWN0IGN0eCBlbnRyaWVzIGFyZSBkaWZmZXJlbnQgb24g
Z2VuMTIgCmFzIHdlbGwKCj4gICAKPiAtCQlyZWdzW0NUWF9SX1BXUl9DTEtfU1RBVEVdID0KPiAt
CQkJaTkxNV9tbWlvX3JlZ19vZmZzZXQoR0VOOF9SX1BXUl9DTEtfU1RBVEUpOwo+ICsJCWlmIChJ
TlRFTF9HRU4oZW5naW5lLT5pOTE1KSA8IDExKQoKVGhpcyBzaG91bGQgYmUgPCAxMgoKPiArCQkJ
cmVnc1tDVFhfUl9QV1JfQ0xLX1NUQVRFXSA9Cj4gKwkJCQlpOTE1X21taW9fcmVnX29mZnNldChH
RU44X1JfUFdSX0NMS19TVEFURSk7Cj4gKwkJZWxzZQo+ICsJCQlyZWdzW0dFTjEyX0NUWF9SX1BX
Ul9DTEtfU1RBVEVdID0KPiArCQkJCWk5MTVfbW1pb19yZWdfb2Zmc2V0KEdFTjhfUl9QV1JfQ0xL
X1NUQVRFKTsKPiAgIAl9Cj4gICB9Cj4gICAKPiBAQCAtMTc0Nyw4ICsxNzU1LDEyIEBAIF9fZXhl
Y2xpc3RzX3VwZGF0ZV9yZWdfc3RhdGUoc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAo+ICAgCj4g
ICAJLyogUlBDUyAqLwo+ICAgCWlmIChlbmdpbmUtPmNsYXNzID09IFJFTkRFUl9DTEFTUykgewo+
IC0JCXJlZ3NbQ1RYX1JfUFdSX0NMS19TVEFURSArIDFdID0KPiAtCQkJaW50ZWxfc3NldV9tYWtl
X3JwY3MoZW5naW5lLT5pOTE1LCAmY2UtPnNzZXUpOwo+ICsJCWNvbnN0IHUzMiBycGNzID0gaW50
ZWxfc3NldV9tYWtlX3JwY3MoZW5naW5lLT5pOTE1LCAmY2UtPnNzZXUpOwo+ICsJCWNvbnN0IHUz
MiBvZmZzZXQgPSBJTlRFTF9HRU4oZW5naW5lLT5pOTE1KSA8IDExID8KCjwgMTIKCj4gKwkJCUNU
WF9SX1BXUl9DTEtfU1RBVEUgKyAxIDoKPiArCQkJR0VOMTJfQ1RYX1JfUFdSX0NMS19TVEFURSAr
IDE7Cj4gKwo+ICsJCXJlZ3Nbb2Zmc2V0XSA9IHJwY3M7Cj4gICAKPiAgIAkJaTkxNV9vYV9pbml0
X3JlZ19zdGF0ZShlbmdpbmUsIGNlLCByZWdzKTsKPiAgIAl9Cj4gQEAgLTMxMTYsMzUgKzMxMjgs
MTMgQEAgc3RhdGljIHUzMiBpbnRlbF9scl9pbmRpcmVjdF9jdHhfb2Zmc2V0KHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAgIAlyZXR1cm4gaW5kaXJlY3RfY3R4X29mZnNldDsKPiAg
IH0KPiAgIAo+IC1zdGF0aWMgc3RydWN0IGk5MTVfcHBndHQgKnZtX2FsaWFzKHN0cnVjdCBpOTE1
X2FkZHJlc3Nfc3BhY2UgKnZtKQo+IC17Cj4gLQlpZiAoaTkxNV9pc19nZ3R0KHZtKSkKPiAtCQly
ZXR1cm4gaTkxNV92bV90b19nZ3R0KHZtKS0+YWxpYXM7Cj4gLQllbHNlCj4gLQkJcmV0dXJuIGk5
MTVfdm1fdG9fcHBndHQodm0pOwo+IC19Cj4gICAKPiAtc3RhdGljIHZvaWQgZXhlY2xpc3RzX2lu
aXRfcmVnX3N0YXRlKHUzMiAqcmVncywKPiAtCQkJCSAgICAgc3RydWN0IGludGVsX2NvbnRleHQg
KmNlLAo+IC0JCQkJICAgICBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCj4gLQkJCQkg
ICAgIHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nKQo+ICtzdGF0aWMgdm9pZCBpbml0X2NvbW1vbl9y
ZWdfc3RhdGUodTMyICogY29uc3QgcmVncywKPiArCQkJCSAgc3RydWN0IGk5MTVfcHBndHQgKiBj
b25zdCBwcGd0dCwKPiArCQkJCSAgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAo+ICsJ
CQkJICBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKPiAgIHsKPiAtCXN0cnVjdCBpOTE1X3BwZ3R0
ICpwcGd0dCA9IHZtX2FsaWFzKGNlLT52bSk7Cj4gLQlib29sIHJjcyA9IGVuZ2luZS0+Y2xhc3Mg
PT0gUkVOREVSX0NMQVNTOwo+IC0JdTMyIGJhc2UgPSBlbmdpbmUtPm1taW9fYmFzZTsKPiAtCj4g
LQkvKgo+IC0JICogQSBjb250ZXh0IGlzIGFjdHVhbGx5IGEgYmlnIGJhdGNoIGJ1ZmZlciB3aXRo
IHNldmVyYWwKPiAtCSAqIE1JX0xPQURfUkVHSVNURVJfSU1NIGNvbW1hbmRzIGZvbGxvd2VkIGJ5
IChyZWcsIHZhbHVlKSBwYWlycy4gVGhlCj4gLQkgKiB2YWx1ZXMgd2UgYXJlIHNldHRpbmcgaGVy
ZSBhcmUgb25seSBmb3IgdGhlIGZpcnN0IGNvbnRleHQgcmVzdG9yZToKPiAtCSAqIG9uIGEgc3Vi
c2VxdWVudCBzYXZlLCB0aGUgR1BVIHdpbGwgcmVjcmVhdGUgdGhpcyBiYXRjaGJ1ZmZlciB3aXRo
IG5ldwo+IC0JICogdmFsdWVzIChpbmNsdWRpbmcgYWxsIHRoZSBtaXNzaW5nIE1JX0xPQURfUkVH
SVNURVJfSU1NIGNvbW1hbmRzIHRoYXQKPiAtCSAqIHdlIGFyZSBub3QgaW5pdGlhbGl6aW5nIGhl
cmUpLgo+IC0JICoKPiAtCSAqIE11c3Qga2VlcCBjb25zaXN0ZW50IHdpdGggdmlydHVhbF91cGRh
dGVfcmVnaXN0ZXJfb2Zmc2V0cygpLgo+IC0JICovCj4gLQlyZWdzW0NUWF9MUklfSEVBREVSXzBd
ID0gTUlfTE9BRF9SRUdJU1RFUl9JTU0ocmNzID8gMTQgOiAxMSkgfAo+IC0JCQkJIE1JX0xSSV9G
T1JDRV9QT1NURUQ7Cj4gKwljb25zdCB1MzIgYmFzZSA9IGVuZ2luZS0+bW1pb19iYXNlOwo+ICAg
Cj4gICAJQ1RYX1JFRyhyZWdzLCBDVFhfQ09OVEVYVF9DT05UUk9MLCBSSU5HX0NPTlRFWFRfQ09O
VFJPTChiYXNlKSwKPiAgIAkJX01BU0tFRF9CSVRfRElTQUJMRShDVFhfQ1RSTF9FTkdJTkVfQ1RY
X1JFU1RPUkVfSU5ISUJJVCkgfAo+IEBAIC0zMTYyLDM4ICszMTUyLDQ0IEBAIHN0YXRpYyB2b2lk
IGV4ZWNsaXN0c19pbml0X3JlZ19zdGF0ZSh1MzIgKnJlZ3MsCj4gICAJQ1RYX1JFRyhyZWdzLCBD
VFhfQkJfSEVBRF9VLCBSSU5HX0JCQUREUl9VRFcoYmFzZSksIDApOwo+ICAgCUNUWF9SRUcocmVn
cywgQ1RYX0JCX0hFQURfTCwgUklOR19CQkFERFIoYmFzZSksIDApOwo+ICAgCUNUWF9SRUcocmVn
cywgQ1RYX0JCX1NUQVRFLCBSSU5HX0JCU1RBVEUoYmFzZSksIFJJTkdfQkJfUFBHVFQpOwo+IC0J
Q1RYX1JFRyhyZWdzLCBDVFhfU0VDT05EX0JCX0hFQURfVSwgUklOR19TQkJBRERSX1VEVyhiYXNl
KSwgMCk7Cj4gLQlDVFhfUkVHKHJlZ3MsIENUWF9TRUNPTkRfQkJfSEVBRF9MLCBSSU5HX1NCQkFE
RFIoYmFzZSksIDApOwo+IC0JQ1RYX1JFRyhyZWdzLCBDVFhfU0VDT05EX0JCX1NUQVRFLCBSSU5H
X1NCQlNUQVRFKGJhc2UpLCAwKTsKPiAtCWlmIChyY3MpIHsKPiAtCQlzdHJ1Y3QgaTkxNV9jdHhf
d29ya2Fyb3VuZHMgKndhX2N0eCA9ICZlbmdpbmUtPndhX2N0eDsKPiAtCj4gLQkJQ1RYX1JFRyhy
ZWdzLCBDVFhfUkNTX0lORElSRUNUX0NUWCwgUklOR19JTkRJUkVDVF9DVFgoYmFzZSksIDApOwo+
IC0JCUNUWF9SRUcocmVncywgQ1RYX1JDU19JTkRJUkVDVF9DVFhfT0ZGU0VULAo+IC0JCQlSSU5H
X0lORElSRUNUX0NUWF9PRkZTRVQoYmFzZSksIDApOwo+IC0JCWlmICh3YV9jdHgtPmluZGlyZWN0
X2N0eC5zaXplKSB7Cj4gLQkJCXUzMiBnZ3R0X29mZnNldCA9IGk5MTVfZ2d0dF9vZmZzZXQod2Ff
Y3R4LT52bWEpOwo+ICt9Cj4gICAKPiAtCQkJcmVnc1tDVFhfUkNTX0lORElSRUNUX0NUWCArIDFd
ID0KPiAtCQkJCShnZ3R0X29mZnNldCArIHdhX2N0eC0+aW5kaXJlY3RfY3R4Lm9mZnNldCkgfAo+
IC0JCQkJKHdhX2N0eC0+aW5kaXJlY3RfY3R4LnNpemUgLyBDQUNIRUxJTkVfQllURVMpOwo+ICtz
dGF0aWMgdm9pZCBpbml0X3dhX2JiX3JlZ19zdGF0ZSh1MzIgKiBjb25zdCByZWdzLAo+ICsJCQkJ
IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKPiArCQkJCSB1MzIgcG9zX2JiX3Blcl9j
dHgpCj4gK3sKPiArCXN0cnVjdCBpOTE1X2N0eF93b3JrYXJvdW5kcyAqIGNvbnN0IHdhX2N0eCA9
ICZlbmdpbmUtPndhX2N0eDsKPiArCWNvbnN0IHUzMiBiYXNlID0gZW5naW5lLT5tbWlvX2Jhc2U7
Cj4gKwljb25zdCB1MzIgcG9zX2luZGlyZWN0X2N0eCA9IHBvc19iYl9wZXJfY3R4ICsgMjsKPiAr
CWNvbnN0IHUzMiBwb3NfaW5kaXJlY3RfY3R4X29mZnNldCA9IHBvc19pbmRpcmVjdF9jdHggKyAy
Owo+ICAgCj4gLQkJCXJlZ3NbQ1RYX1JDU19JTkRJUkVDVF9DVFhfT0ZGU0VUICsgMV0gPQo+IC0J
CQkJaW50ZWxfbHJfaW5kaXJlY3RfY3R4X29mZnNldChlbmdpbmUpIDw8IDY7Cj4gLQkJfQo+ICsJ
R0VNX0JVR19PTihlbmdpbmUtPmNsYXNzICE9IFJFTkRFUl9DTEFTUyk7Cj4gKwlDVFhfUkVHKHJl
Z3MsIHBvc19pbmRpcmVjdF9jdHgsIFJJTkdfSU5ESVJFQ1RfQ1RYKGJhc2UpLCAwKTsKPiArCUNU
WF9SRUcocmVncywgcG9zX2luZGlyZWN0X2N0eF9vZmZzZXQsCj4gKwkJUklOR19JTkRJUkVDVF9D
VFhfT0ZGU0VUKGJhc2UpLCAwKTsKPiArCWlmICh3YV9jdHgtPmluZGlyZWN0X2N0eC5zaXplKSB7
Cj4gKwkJY29uc3QgdTMyIGdndHRfb2Zmc2V0ID0gaTkxNV9nZ3R0X29mZnNldCh3YV9jdHgtPnZt
YSk7Cj4gICAKPiAtCQlDVFhfUkVHKHJlZ3MsIENUWF9CQl9QRVJfQ1RYX1BUUiwgUklOR19CQl9Q
RVJfQ1RYX1BUUihiYXNlKSwgMCk7Cj4gLQkJaWYgKHdhX2N0eC0+cGVyX2N0eC5zaXplKSB7Cj4g
LQkJCXUzMiBnZ3R0X29mZnNldCA9IGk5MTVfZ2d0dF9vZmZzZXQod2FfY3R4LT52bWEpOwo+ICsJ
CXJlZ3NbcG9zX2luZGlyZWN0X2N0eCArIDFdID0KPiArCQkJKGdndHRfb2Zmc2V0ICsgd2FfY3R4
LT5pbmRpcmVjdF9jdHgub2Zmc2V0KSB8Cj4gKwkJCSh3YV9jdHgtPmluZGlyZWN0X2N0eC5zaXpl
IC8gQ0FDSEVMSU5FX0JZVEVTKTsKPiAgIAo+IC0JCQlyZWdzW0NUWF9CQl9QRVJfQ1RYX1BUUiAr
IDFdID0KPiAtCQkJCShnZ3R0X29mZnNldCArIHdhX2N0eC0+cGVyX2N0eC5vZmZzZXQpIHwgMHgw
MTsKPiAtCQl9Cj4gKwkJcmVnc1twb3NfaW5kaXJlY3RfY3R4X29mZnNldCArIDFdID0KPiArCQkJ
aW50ZWxfbHJfaW5kaXJlY3RfY3R4X29mZnNldChlbmdpbmUpIDw8IDY7Cj4gICAJfQo+ICAgCj4g
LQlyZWdzW0NUWF9MUklfSEVBREVSXzFdID0gTUlfTE9BRF9SRUdJU1RFUl9JTU0oOSkgfCBNSV9M
UklfRk9SQ0VfUE9TVEVEOwo+ICsJQ1RYX1JFRyhyZWdzLCBwb3NfYmJfcGVyX2N0eCwgUklOR19C
Ql9QRVJfQ1RYX1BUUihiYXNlKSwgMCk7Cj4gKwlpZiAod2FfY3R4LT5wZXJfY3R4LnNpemUpIHsK
PiArCQljb25zdCB1MzIgZ2d0dF9vZmZzZXQgPSBpOTE1X2dndHRfb2Zmc2V0KHdhX2N0eC0+dm1h
KTsKPiAgIAo+IC0JQ1RYX1JFRyhyZWdzLCBDVFhfQ1RYX1RJTUVTVEFNUCwgUklOR19DVFhfVElN
RVNUQU1QKGJhc2UpLCAwKTsKPiArCQlyZWdzW3Bvc19iYl9wZXJfY3R4ICsgMV0gPQo+ICsJCQko
Z2d0dF9vZmZzZXQgKyB3YV9jdHgtPnBlcl9jdHgub2Zmc2V0KSB8IDB4MDE7Cj4gKwl9Cj4gK30K
PiArCj4gK3N0YXRpYyB2b2lkIGluaXRfcHBndHRfcmVnX3N0YXRlKHUzMiAqcmVncywgdTMyIGJh
c2UsCj4gKwkJCQkgc3RydWN0IGk5MTVfcHBndHQgKnBwZ3R0KQo+ICt7Cj4gICAJLyogUERQIHZh
bHVlcyB3ZWxsIGJlIGFzc2lnbmVkIGxhdGVyIGlmIG5lZWRlZCAqLwo+ICAgCUNUWF9SRUcocmVn
cywgQ1RYX1BEUDNfVURXLCBHRU44X1JJTkdfUERQX1VEVyhiYXNlLCAzKSwgMCk7Cj4gICAJQ1RY
X1JFRyhyZWdzLCBDVFhfUERQM19MRFcsIEdFTjhfUklOR19QRFBfTERXKGJhc2UsIDMpLCAwKTsK
PiBAQCAtMzIxNiw2ICszMjEyLDQwIEBAIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19pbml0X3JlZ19z
dGF0ZSh1MzIgKnJlZ3MsCj4gICAJCUFTU0lHTl9DVFhfUERQKHBwZ3R0LCByZWdzLCAxKTsKPiAg
IAkJQVNTSUdOX0NUWF9QRFAocHBndHQsIHJlZ3MsIDApOwo+ICAgCX0KPiArfQo+ICsKPiArc3Rh
dGljIHN0cnVjdCBpOTE1X3BwZ3R0ICp2bV9hbGlhcyhzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNl
ICp2bSkKPiArewo+ICsJaWYgKGk5MTVfaXNfZ2d0dCh2bSkpCj4gKwkJcmV0dXJuIGk5MTVfdm1f
dG9fZ2d0dCh2bSktPmFsaWFzOwo+ICsJZWxzZQo+ICsJCXJldHVybiBpOTE1X3ZtX3RvX3BwZ3R0
KHZtKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgZ2VuOF9pbml0X3JlZ19zdGF0ZSh1MzIgKiBj
b25zdCByZWdzLAo+ICsJCQkJc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAo+ICsJCQkJc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAo+ICsJCQkJc3RydWN0IGludGVsX3JpbmcgKnJpbmcp
Cj4gK3sKPiArCXN0cnVjdCBpOTE1X3BwZ3R0ICogY29uc3QgcHBndHQgPSB2bV9hbGlhcyhjZS0+
dm0pOwo+ICsJY29uc3QgYm9vbCByY3MgPSBlbmdpbmUtPmNsYXNzID09IFJFTkRFUl9DTEFTUzsK
PiArCWNvbnN0IHUzMiBiYXNlID0gZW5naW5lLT5tbWlvX2Jhc2U7Cj4gKwo+ICsJcmVnc1tDVFhf
TFJJX0hFQURFUl8wXSA9IE1JX0xPQURfUkVHSVNURVJfSU1NKHJjcyA/IDE0IDogMTEpIHwKPiAr
CQkJCSBNSV9MUklfRk9SQ0VfUE9TVEVEOwo+ICsKPiArCWluaXRfY29tbW9uX3JlZ19zdGF0ZShy
ZWdzLCBwcGd0dCwgZW5naW5lLCByaW5nKTsKPiArCUNUWF9SRUcocmVncywgQ1RYX1NFQ09ORF9C
Ql9IRUFEX1UsIFJJTkdfU0JCQUREUl9VRFcoYmFzZSksIDApOwo+ICsJQ1RYX1JFRyhyZWdzLCBD
VFhfU0VDT05EX0JCX0hFQURfTCwgUklOR19TQkJBRERSKGJhc2UpLCAwKTsKPiArCUNUWF9SRUco
cmVncywgQ1RYX1NFQ09ORF9CQl9TVEFURSwgUklOR19TQkJTVEFURShiYXNlKSwgMCk7Cj4gKwlp
ZiAocmNzKQo+ICsJCWluaXRfd2FfYmJfcmVnX3N0YXRlKHJlZ3MsIGVuZ2luZSwgQ1RYX0JCX1BF
Ul9DVFhfUFRSKTsKPiArCj4gKwlyZWdzW0NUWF9MUklfSEVBREVSXzFdID0gTUlfTE9BRF9SRUdJ
U1RFUl9JTU0oOSkgfCBNSV9MUklfRk9SQ0VfUE9TVEVEOwo+ICsKPiArCUNUWF9SRUcocmVncywg
Q1RYX0NUWF9USU1FU1RBTVAsIFJJTkdfQ1RYX1RJTUVTVEFNUChiYXNlKSwgMCk7Cj4gKwo+ICsJ
aW5pdF9wcGd0dF9yZWdfc3RhdGUocmVncywgYmFzZSwgcHBndHQpOwo+ICAgCj4gICAJaWYgKHJj
cykgewo+ICAgCQlyZWdzW0NUWF9MUklfSEVBREVSXzJdID0gTUlfTE9BRF9SRUdJU1RFUl9JTU0o
MSk7Cj4gQEAgLTMyMjcsNiArMzI1Nyw1OCBAQCBzdGF0aWMgdm9pZCBleGVjbGlzdHNfaW5pdF9y
ZWdfc3RhdGUodTMyICpyZWdzLAo+ICAgCQlyZWdzW0NUWF9FTkRdIHw9IEJJVCgwKTsKPiAgIH0K
PiAgIAo+ICtzdGF0aWMgdm9pZCBnZW4xMl9pbml0X3JlZ19zdGF0ZSh1MzIgKiBjb25zdCByZWdz
LAo+ICsJCQkJIHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKPiArCQkJCSBzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmUsCj4gKwkJCQkgc3RydWN0IGludGVsX3JpbmcgKnJpbmcpCj4gK3sK
PiArCXN0cnVjdCBpOTE1X3BwZ3R0ICogY29uc3QgcHBndHQgPSB2bV9hbGlhcyhjZS0+dm0pOwoK
RG8gd2UgZXhwZWN0IGFwcGd0dCBnZW4xMis/IElmIG5vdCB3ZSBjb3VsZCB1c2UgaTkxNV92bV90
b19wcGd0dCgpIGRpcmVjdGx5Cgo+ICsJY29uc3QgYm9vbCByY3MgPSBlbmdpbmUtPmNsYXNzID09
IFJFTkRFUl9DTEFTUzsKPiArCWNvbnN0IHUzMiBiYXNlID0gZW5naW5lLT5tbWlvX2Jhc2U7Cj4g
Kwo+ICsJR0VNX0RFQlVHX0VYRUMoRFJNX0lORk9fT05DRSgiVXNpbmcgR0VOMTIgUmVnaXN0ZXIg
U3RhdGUgQ29udGV4dFxuIikpOwo+ICsKPiArCXJlZ3NbQ1RYX0xSSV9IRUFERVJfMF0gPSBNSV9M
T0FEX1JFR0lTVEVSX0lNTSgxMykgfAo+ICsJCU1JX0xSSV9GT1JDRV9QT1NURUQ7Cj4gKwo+ICsJ
aW5pdF9jb21tb25fcmVnX3N0YXRlKHJlZ3MsIHBwZ3R0LCBlbmdpbmUsIHJpbmcpOwo+ICsJaWYg
KHJjcykKPiArCQlpbml0X3dhX2JiX3JlZ19zdGF0ZShyZWdzLCBlbmdpbmUsIEdFTjEyX0NUWF9C
Ql9QRVJfQ1RYX1BUUik7Cj4gKwo+ICsJcmVnc1tDVFhfTFJJX0hFQURFUl8xXSA9IE1JX0xPQURf
UkVHSVNURVJfSU1NKDkpIHwKPiArCQlNSV9MUklfRk9SQ0VfUE9TVEVEOwo+ICsKPiArCUNUWF9S
RUcocmVncywgQ1RYX0NUWF9USU1FU1RBTVAsIFJJTkdfQ1RYX1RJTUVTVEFNUChiYXNlKSwgMCk7
Cj4gKwo+ICsJaW5pdF9wcGd0dF9yZWdfc3RhdGUocmVncywgYmFzZSwgcHBndHQpOwo+ICsKPiAr
CWlmIChyY3MpIHsKPiArCQlyZWdzW0dFTjEyX0NUWF9MUklfSEVBREVSXzNdID0gTUlfTE9BRF9S
RUdJU1RFUl9JTU0oMSk7Cj4gKwkJQ1RYX1JFRyhyZWdzLCBHRU4xMl9DVFhfUl9QV1JfQ0xLX1NU
QVRFLCBHRU44X1JfUFdSX0NMS19TVEFURSwKPiArCQkJMCk7Cj4gKwo+ICsJCS8qIFRPRE86IG9h
X2luaXRfcmVnX3N0YXRlID8gKi8KPiArCX0KPiArfQo+ICsKPiArc3RhdGljIHZvaWQgZXhlY2xp
c3RzX2luaXRfcmVnX3N0YXRlKHUzMiAqcmVncywKPiArCQkJCSAgICAgc3RydWN0IGludGVsX2Nv
bnRleHQgKmNlLAo+ICsJCQkJICAgICBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCj4g
KwkJCQkgICAgIHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nKQo+ICt7Cj4gKwkvKiBBIGNvbnRleHQg
aXMgYWN0dWFsbHkgYSBiaWcgYmF0Y2ggYnVmZmVyIHdpdGggc2V2ZXJhbAo+ICsJICogTUlfTE9B
RF9SRUdJU1RFUl9JTU0gY29tbWFuZHMgZm9sbG93ZWQgYnkgKHJlZywgdmFsdWUpIHBhaXJzLiBU
aGUKPiArCSAqIHZhbHVlcyB3ZSBhcmUgc2V0dGluZyBoZXJlIGFyZSBvbmx5IGZvciB0aGUgZmly
c3QgY29udGV4dCByZXN0b3JlOgo+ICsJICogb24gYSBzdWJzZXF1ZW50IHNhdmUsIHRoZSBHUFUg
d2lsbCByZWNyZWF0ZSB0aGlzIGJhdGNoYnVmZmVyIHdpdGggbmV3Cj4gKwkgKiB2YWx1ZXMgKGlu
Y2x1ZGluZyBhbGwgdGhlIG1pc3NpbmcgTUlfTE9BRF9SRUdJU1RFUl9JTU0gY29tbWFuZHMgdGhh
dAo+ICsJICogd2UgYXJlIG5vdCBpbml0aWFsaXppbmcgaGVyZSkuCj4gKwkgKi8KPiArCWlmIChJ
TlRFTF9HRU4oZW5naW5lLT5pOTE1KSA+PSAxMikKPiArCQlnZW4xMl9pbml0X3JlZ19zdGF0ZShy
ZWdzLCBjZSwgZW5naW5lLCByaW5nKTsKPiArCWVsc2UKPiArCQlnZW44X2luaXRfcmVnX3N0YXRl
KHJlZ3MsIGNlLCBlbmdpbmUsIHJpbmcpOwo+ICt9Cj4gKwo+ICAgc3RhdGljIGludAo+ICAgcG9w
dWxhdGVfbHJfY29udGV4dChzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCj4gICAJCSAgICBzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqY3R4X29iaiwKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9scmMuaAo+IGluZGV4IGRjMDI1MmUwNTg5ZS4uYTRiZGUzOGUzNWQ4IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5oCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmgKPiBAQCAtNDksNiArNDksOCBAQCBzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzOwo+ICAgCj4gICAjZGVmaW5lCSAgRUxfQ1RSTF9MT0FECQkJCSgxIDw8IDApCj4g
ICAKPiArI2RlZmluZSBHRU4xMl9FTkdJTkVfU0VNQVBIT1JFX1RPS0VOKGVuZ2luZSkJX01NSU8o
KGVuZ2luZSktPm1taW9fYmFzZSArIDB4MmI0KQo+ICsKCkFzIEkgY29tbWVudGVkIG9uIHRoZSBw
cmV2aW91cyByZXZpc2lvbiwgZGVmaW5pbmcgdGhpcyBpbiB0aGlzIHBhdGNoIAp3aXRob3V0IHVz
aW5nIGl0IG9yIHNldHRpbmcgaXQgaW4gdGhlIGNvbnRleHQgZG9lc24ndCBtYWtlIG11Y2ggc2Vu
c2UuCgo+ICAgLyogVGhlIGRvY3Mgc3BlY2lmeSB0aGF0IHRoZSB3cml0ZSBwb2ludGVyIHdyYXBz
IGFyb3VuZCBhZnRlciA1aCwgIkFmdGVyIHN0YXR1cwo+ICAgICogaXMgd3JpdHRlbiBvdXQgdG8g
dGhlIGxhc3QgYXZhaWxhYmxlIHN0YXR1cyBRVyBhdCBvZmZzZXQgNWgsIHRoaXMgcG9pbnRlcgo+
ICAgICogd3JhcHMgdG8gMC4iCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2xyY19yZWcuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyY19yZWcu
aAo+IGluZGV4IGI4ZjIwYWQ3MTE2OS4uOGNiNjY1NTc0NGNkIDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyY19yZWcuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2xyY19yZWcuaAo+IEBAIC05LDcgKzksNyBAQAo+ICAgCj4gICAjaW5j
bHVkZSA8bGludXgvdHlwZXMuaD4KPiAgIAo+IC0vKiBHRU44KyBSZWcgU3RhdGUgQ29udGV4dCAq
Lwo+ICsvKiBHRU44IHRvIEdFTjExIFJlZyBTdGF0ZSBDb250ZXh0ICovCj4gICAjZGVmaW5lIENU
WF9MUklfSEVBREVSXzAJCTB4MDEKPiAgICNkZWZpbmUgQ1RYX0NPTlRFWFRfQ09OVFJPTAkJMHgw
Mgo+ICAgI2RlZmluZSBDVFhfUklOR19IRUFECQkJMHgwNAo+IEBAIC0zOSw2ICszOSwxMSBAQAo+
ICAgI2RlZmluZSBDVFhfUl9QV1JfQ0xLX1NUQVRFCQkweDQyCj4gICAjZGVmaW5lIENUWF9FTkQJ
CQkJMHg0NAo+ICAgCj4gKy8qIEdFTjEyKyBSZWcgU3RhdGUgQ29udGV4dCAqLwo+ICsjZGVmaW5l
IEdFTjEyX0NUWF9CQl9QRVJfQ1RYX1BUUgkJMHgxMgo+ICsjZGVmaW5lIEdFTjEyX0NUWF9MUklf
SEVBREVSXzMJCQkweDQxCgpHZW4xMSBoYXMgdGhlIHNhbWUgbnVtYmVyIGFuZCBwb3NpdGlvbmlu
ZyBvZiBMUklzIGFzIGdlbjEyLCBzbyBtYXJraW5nIAp0aGlzIGFzIGEgZ2VuMTIgY2hhbmdlIGRv
ZXNuJ3QgZmVlbCB0b28gcmVmbGVjdGl2ZSBvZiB0ZWggSFcgY2hhbmdlcyAKSU1PLCBidXQgbm90
IGEgYmxvY2tlci4KCgo+ICsjZGVmaW5lIEdFTjEyX0NUWF9SX1BXUl9DTEtfU1RBVEUJCTB4NDIK
ClRoaXMgaGFzbid0IG1vdmVkIGNvbXBhcmVkIHRvIGdlbjExOgogwqDCoMKgwqAgI2RlZmluZSBD
VFhfUl9QV1JfQ0xLX1NUQVRFwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIDB4NDIKCnNvIG5vIG5l
ZWQgZm9yIGEgZGlmZmVyZW50IGRlZnMgYW5kIGFsbCB0aG9zZSBpZnMgaGlnaGVyIHVwIGluIHRo
ZSBwYXRjaC4KCkRhbmllbGUKCj4gKwo+ICAgI2RlZmluZSBDVFhfUkVHKHJlZ19zdGF0ZSwgcG9z
LCByZWcsIHZhbCkgZG8geyBcCj4gICAJdTMyICpyZWdfc3RhdGVfXyA9IChyZWdfc3RhdGUpOyBc
Cj4gICAJY29uc3QgdTMyIHBvc19fID0gKHBvcyk7IFwKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

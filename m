Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9F3F18DDDF
	for <lists+intel-gfx@lfdr.de>; Wed, 14 Aug 2019 21:24:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0B6CF899F2;
	Wed, 14 Aug 2019 19:24:43 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-ed1-x544.google.com (mail-ed1-x544.google.com
 [IPv6:2a00:1450:4864:20::544])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8B4EF899F0
 for <intel-gfx@lists.freedesktop.org>; Wed, 14 Aug 2019 19:24:41 +0000 (UTC)
Received: by mail-ed1-x544.google.com with SMTP id p28so250203edi.3
 for <intel-gfx@lists.freedesktop.org>; Wed, 14 Aug 2019 12:24:41 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=77J3YOd22hcerwLcmOXgprgf/KG9/kCLvZr0K9Vlye8=;
 b=oLcGVdj5Zx1s96dzezslqxaez1MNmKc/MhGGK9AQsoBQLZNVvt05ebj/jfpHNNxxj5
 o3ukvy+Hi8ppyPVO9j6tifIKuf8CcHN+z1ScXAkoGjRojch6pvp4JLr+NtWlH7Xjvedc
 pk3Sqe71R2XY7/MaE+8M+zQrOa3taYMMDqriI9slzcgv4XQaPanbj4vPe08MpeYZgrZI
 RrjJE4gKZCxZmCvEpUA1AJJbo8+pze0fZ74FSPqcGm4YsGECCkVN01HmRIuon3srdhN0
 PDpWNuGygCHszAUny5JrwdPt/J0Oj2TQTaLgfJ1FEmynTYMaDljZveQAiQJZUvBIolea
 aRFA==
X-Gm-Message-State: APjAAAX8tc2bmR+p5lGcFRbhSidTq12jzdqfMzvP4oI9ssOZnHeaVlT/
 C8sy50CpcNIGdSQa1Z5LSv064jXGzoA7xA==
X-Google-Smtp-Source: APXvYqy+3yIrR5VpDGmW0MvQytMFJvA3UukwJ5NXh1xg7fJQjCcOTaSP/vPjnJ1E8jgbk9IPsr65OQ==
X-Received: by 2002:a50:93a4:: with SMTP id o33mr1432296eda.30.1565810679823; 
 Wed, 14 Aug 2019 12:24:39 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id la5sm65668ejb.30.2019.08.14.12.24.38
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 14 Aug 2019 12:24:39 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: Intel Graphics Development <intel-gfx@lists.freedesktop.org>
Date: Wed, 14 Aug 2019 21:24:34 +0200
Message-Id: <20190814192434.11678-1-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190814124933.19056-2-daniel.vetter@ffwll.ch>
References: <20190814124933.19056-2-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=77J3YOd22hcerwLcmOXgprgf/KG9/kCLvZr0K9Vlye8=;
 b=AuiFyRYjXNZ6hel4YM8Gz6mOPVo8Ahj+sODicNsE5Ly1fQsVWVTKKQ7h9UlDXeybjZ
 hr6gyeZHwSnAMZPG0MqvWwnU9WFfGuTt3mzwWsXBjcQwZMuHztTfA/g/j52SwSwg3uPR
 rmfILG97Y12hMvUN33+bfxbd44Io+PImMk6+o=
Subject: [Intel-gfx] [PATCH] RFC: drm/i915: Switch obj->mm.lock lockdep
 annotations on its head
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@ffwll.ch>,
 Daniel Vetter <daniel.vetter@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIHRyb3VibGUgd2l0aCBoYXZpbmcgYSBwbGFpbiBuZXN0aW5nIGZsYWcgZm9yIGxvY2tzIHdo
aWNoIGRvIG5vdApuYXR1cmFsbHkgbmVzdCAodW5saWtlIGJsb2NrIGRldmljZXMgYW5kIHRoZWly
IHBhcnRpdGlvbnMsIHdoaWNoIGlzCnRoZSBvcmlnaW5hbCBtb3RpdmF0aW9uIGZvciBuZXN0aW5n
IGxldmVscykgaXMgdGhhdCBsb2NrZGVwIHdpbGwKbmV2ZXIgc3BvdCBhIHRydWUgZGVhZGxvY2sg
aWYgeW91IHNjcmV3IHVwLgoKVGhpcyBwYXRjaCBpcyBhbiBhdHRlbXB0IGF0IHRyeWluZyBiZXR0
ZXIsIGJ5IGhpZ2hsaWdodGluZyBhIGJpdCBtb3JlCnRoZSBhY3R1YWwgbmF0dXJlIG9mIHRoZSBu
ZXN0aW5nIHRoYXQncyBnb2luZyBvbi4gRXNzZW50aWFsbHkgd2UgaGF2ZQp0d28ga2luZHMgb2Yg
b2JqZWN0czoKCi0gb2JqZWN0cyB3aXRob3V0IHBhZ2VzIGFsbG9jYXRlZCwgd2hpY2ggY2Fubm90
IGJlIG9uIGFueSBscnUgYW5kIGFyZQogIGhlbmNlIGluYWNjZXNzaWJsZSB0byB0aGUgc2hyaW5r
ZXIuCgotIG9iamVjdHMgd2hpY2ggaGF2ZSBwYWdlcyBhbGxvY2F0ZWQsIHdoaWNoIGFyZSBvbiBh
biBscnUsIGFuZCB3aGljaAogIHRoZSBzaHJpbmtlciBjYW4gZGVjaWRlIHRvIHRocm93IG91dC4K
CkZvciB0aGUgZm9ybWVyIHR5cGUgb2Ygb2JqZWN0LCBtZW1vcnkgYWxsY29hdGlvbnMgd2hpbGUg
aG9sZGluZwpvYmotPm1tLmxvY2sgYXJlIHBlcm1pc3NpYmxlLiBGb3IgdGhlIGxhdHRlciB0aGV5
IGFyZSBub3QuIEFuZApnZXQvcHV0X3BhZ2VzIHRyYW5zaXRpb25zIGJldHdlZW4gdGhlIHR3byB0
eXBlcyBvZiBvYmplY3RzLgoKVGhpcyBpcyBzdGlsbCBub3QgZW50aXJlbHkgZm9vbC1wcm9vZiBz
aW5jZSB0aGUgcnVsZXMgbWlnaHQgY2hhbmNlLgpCdXQgYXMgbG9uZyBhcyB3ZSBydW4gc3VjaCBh
IGNvZGUgZXZlciBhdCBydW50aW1lIGxvY2tkZXAgc2hvdWxkIGJlCmFibGUgdG8gb2JzZXJ2ZSB0
aGUgaW5jb25zaXN0ZW5jeSBhbmQgY29tcGxhaW4gKGxpa2Ugd2l0aCBhbnkgb3RoZXIKbG9ja2Rl
cCBjbGFzcyB0aGF0IHdlJ3ZlIHNwbGl0IHVwIGluIG11bHRpcGxlIGNsYXNzZXMpLiBCdXQgdGhl
cmUgYXJlCmEgZmV3IGNsZWFyIGJlbmVmaXRzOgoKLSBXZSBjYW4gZHJvcCB0aGUgbmVzdGluZyBm
bGFnIHBhcmFtZXRlciBmcm9tCiAgX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzLCBiZWNhdXNl
IHRoYXQgZnVuY3Rpb24gYnkgZGVmaW5pdGlvbiBpcwogIG5ldmVyIGdvaW5nIGFsbG9jYXRlIG1l
bW9yeSwgYW5kIGNhbGxpbmcgaXQgb24gYW4gb2JqZWN0IHdoaWNoCiAgZG9lc24ndCBoYXZlIGl0
cyBwYWdlcyBhbGxvY2F0ZWQgd291bGQgYmUgYSBidWcuCgotIFdlIHN0cmljdGx5IGNhdGNoIG1v
cmUgYnVncywgc2luY2UgdGhlcmUncyBub3Qgb25seSBvbmUgcGxhY2UgaW4gdGhlCiAgZW50aXJl
IHRyZWUgd2hpY2ggaXMgYW5ub3RhdGVkIHdpdGggdGhlIHNwZWNpYWwgY2xhc3MuIEFsbCB0aGUK
ICBvdGhlciBwbGFjZXMgdGhhdCBoYWQgZXhwbGljaXQgbG9ja2RlcCBuZXN0aW5nIGFubm90YXRp
b25zIHdlJ3JlIG5vdwogIGdvaW5nIHRvIGxlYXZlIHVwIHRvIGxvY2tkZXAgYWdhaW4uCgotIFNw
ZWNpZmljYWxseSB0aGlzIGNhdGNoZXMgc3R1ZmYgbGlrZSBjYWxsaW5nIGdldF9wYWdlcyBmcm9t
CiAgcHV0X3BhZ2VzICh3aGljaCBpc24ndCByZWFsbHkgYSBnb29kIGlkZWEsIGlmIHdlIGNhbiBj
YWxsIHB1dF9wYWdlcwogIHNvIGNvdWxkIHRoZSBzaHJpbmtlcikuIEkndmUgc2VlbiBwYXRjaGVz
IGRvIGV4YWN0bHkgdGhhdC4KCk9mIGNvdXJzZSBJIGZ1bGx5IGV4cGVjdCBDSSB3aWxsIHNob3cg
bWUgZm9yIHRoZSBmb29sIEkgYW0gd2l0aCB0aGlzCm9uZSBoZXJlIDotKQoKdjI6IFRoZXJlIGNh
biBvbmx5IGJlIG9uZSAobG9ja2RlcCBvbmx5IGhhcyBhIGNhY2hlIGZvciB0aGUgZmlyc3QKc3Vi
Y2xhc3MsIG5vdCBmb3IgZGVlcGVyIG9uZXMsIGFuZCB3ZSBkb24ndCB3YW50IHRvIG1ha2UgdGhl
c2UgbG9ja3MKZXZlbiBzbG93ZXIpLiBTdGlsbCBzZXBhcmF0ZSBlbnVtcyBmb3IgYmV0dGVyIGRv
Y3VtZW50YXRpb24uCgpSZWFsIGZpeDogZG9uIGZvcmdldCBhYm91dCBwaHlzIG9ianMgYW5kIHBp
bl9tYXAoKSwgYW5kIGZpeCB0aGUKc2hyaW5rZXIgdG8gaGF2ZSB0aGUgcmlnaHQgYW5ub3RhdGlv
bnMgLi4uIHNpbGx5IG1lLgoKdjM6IEZvcmdvdCB1c2VydHB0ciB0b28gLi4uCgpDYzogQ2hyaXMg
V2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CkNjOiBUdnJ0a28gVXJzdWxpbiA8dHZy
dGtvLnVyc3VsaW5AaW50ZWwuY29tPgpDYzogSm9vbmFzIExhaHRpbmVuIDxqb29uYXMubGFodGlu
ZW5AbGludXguaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwu
dmV0dGVyQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
b2JqZWN0LmMgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X29iamVjdC5oICAgICAgIHwgMTYgKysrKysrKysrKysrKy0tLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oIHwgMTAgKysrKysrKysrLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BhZ2VzLmMgICAgICAgIHwgIDkgKysrKy0tLS0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGh5cy5jICAgICAgICAgfCAgMiArLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3Nocmlua2VyLmMgICAgIHwgIDUgKyst
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV91c2VycHRyLmMgICAgICB8ICA0
ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaHVnZV9wYWdlcy5jICB8
IDEyICsrKysrKy0tLS0tLQogOCBmaWxlcyBjaGFuZ2VkLCAzOCBpbnNlcnRpb25zKCspLCAyMiBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fb2JqZWN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMK
aW5kZXggMzkyOWMzYTZiMjgxLi5hMWE4MzU1MzllMDkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMKQEAgLTE5MSw3ICsxOTEsNyBAQCBzdGF0aWMgdm9pZCBf
X2k5MTVfZ2VtX2ZyZWVfb2JqZWN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKIAkJ
R0VNX0JVR19PTighbGlzdF9lbXB0eSgmb2JqLT5sdXRfbGlzdCkpOwogCiAJCWF0b21pY19zZXQo
Jm9iai0+bW0ucGFnZXNfcGluX2NvdW50LCAwKTsKLQkJX19pOTE1X2dlbV9vYmplY3RfcHV0X3Bh
Z2VzKG9iaiwgSTkxNV9NTV9OT1JNQUwpOworCQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMo
b2JqKTsKIAkJR0VNX0JVR19PTihpOTE1X2dlbV9vYmplY3RfaGFzX3BhZ2VzKG9iaikpOwogCQli
aXRtYXBfZnJlZShvYmotPmJpdF8xNyk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9vYmplY3QuaAppbmRleCAzNzE0Y2YyMzRkNjQuLjVjZTUxMWNhN2ZhOCAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaApAQCAtMjgxLDExICsyODEsMjEg
QEAgaTkxNV9nZW1fb2JqZWN0X3VucGluX3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmopCiAKIGVudW0gaTkxNV9tbV9zdWJjbGFzcyB7IC8qIGxvY2tkZXAgc3ViY2xhc3MgZm9y
IG9iai0+bW0ubG9jay9zdHJ1Y3RfbXV0ZXggKi8KIAlJOTE1X01NX05PUk1BTCA9IDAsCi0JSTkx
NV9NTV9TSFJJTktFUiAvKiBjYWxsZWQgInJlY3Vyc2l2ZWx5IiBmcm9tIGRpcmVjdC1yZWNsYWlt
LWVzcXVlICovCisJLyoKKwkgKiBPbmx5IHVzZWQgYnkgc3RydWN0X211dGV4LCB3aGVuIGNhbGxl
ZCAicmVjdXJzaXZlbHkiIGZyb20KKwkgKiBkaXJlY3QtcmVjbGFpbS1lc3F1ZS4gU2FmZSBiZWNh
dXNlIHRoZXJlIGlzIG9ubHkgZXZlcnkgb25lCisJICogc3RydWN0X211dGV4IGluIHRoZSBlbnRp
cmUgc3lzdGVtLiAqLworCUk5MTVfTU1fU0hSSU5LRVIgPSAxLAorCS8qCisJICogVXNlZCBmb3Ig
b2JqLT5tbS5sb2NrIHdoZW4gYWxsb2NhdGluZyBwYWdlcy4gU2FmZSBiZWNhdXNlIHRoZSBvYmpl
Y3QKKwkgKiBpc24ndCB5ZXQgb24gYW55IExSVSwgYW5kIHRoZXJlZm9yZSB0aGUgc2hyaW5rZXIg
Y2FuJ3QgZGVhZGxvY2sgb24KKwkgKiBpdC4gQXMgc29vbiBhcyB0aGUgb2JqZWN0IGhhcyBwYWdl
cywgb2JqLT5tbS5sb2NrIG5lc3RzIHdpdGhpbgorCSAqIGZzX3JlY2xhaW0uCisJICovCisJSTkx
NV9NTV9HRVRfUEFHRVMgPSAxLAogfTsKIAotaW50IF9faTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdl
cyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAotCQkJCWVudW0gaTkxNV9tbV9zdWJj
bGFzcyBzdWJjbGFzcyk7CitpbnQgX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmopOwogdm9pZCBpOTE1X2dlbV9vYmplY3RfdHJ1bmNhdGUo
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7CiB2b2lkIGk5MTVfZ2VtX29iamVjdF93
cml0ZWJhY2soc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7CiAKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfdHlwZXMuaCBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfdHlwZXMuaAppbmRleCBkNDc0YzZh
YzQxMDAuLjFlYTNjM2M5NmE1YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX29iamVjdF90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9vYmplY3RfdHlwZXMuaApAQCAtMTU3LDcgKzE1NywxNSBAQCBzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCB7CiAJdW5zaWduZWQgaW50IHBpbl9nbG9iYWw7CiAKIAlzdHJ1Y3Qgewot
CQlzdHJ1Y3QgbXV0ZXggbG9jazsgLyogcHJvdGVjdHMgdGhlIHBhZ2VzIGFuZCB0aGVpciB1c2Ug
Ki8KKwkJLyoKKwkJICogUHJvdGVjdHMgdGhlIHBhZ2VzIGFuZCB0aGVpciB1c2UuCisJCSAqCisJ
CSAqIElNUE9SVEFOVDogSXQgaXMgbm90IGFsbG93ZWQgdG8gYWxsb2NhdGUgbWVtb3J5IHdoaWxl
IGhvbGRpbmcKKwkJICogdGhpcyBsb2NrLCBiZWNhdXNlIHRoZSBzaHJpbmtlciBtaWdodCByZWN1
cnNlIG9uIGl0LCBleGNlcHQKKwkJICogd2hlbiB0aGVyZSBhcmUgbm8gcGFnZXMgYWxsb2NhdGVk
IHlldCBhbmQgdGhlIG9iamVjdCBpc24ndAorCQkgKiB2aXNpYmxlIG9uIGFueSBMUlUuCisJCSAq
LworCQlzdHJ1Y3QgbXV0ZXggbG9jazsKIAkJYXRvbWljX3QgcGFnZXNfcGluX2NvdW50OwogCiAJ
CXN0cnVjdCBzZ190YWJsZSAqcGFnZXM7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fcGFnZXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9wYWdlcy5jCmluZGV4IDE4ZjBjZTAxMzVjMS4uMjAyNTI2ZTg5MTBmIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGFnZXMuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGFnZXMuYwpAQCAtMTAxLDcgKzEwMSw3IEBAIGludCBf
X2k5MTVfZ2VtX29iamVjdF9nZXRfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aikKIHsKIAlpbnQgZXJyOwogCi0JZXJyID0gbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKCZvYmot
Pm1tLmxvY2spOworCWVyciA9IG11dGV4X2xvY2tfaW50ZXJydXB0aWJsZV9uZXN0ZWQoJm9iai0+
bW0ubG9jaywgSTkxNV9NTV9HRVRfUEFHRVMpOwogCWlmIChlcnIpCiAJCXJldHVybiBlcnI7CiAK
QEAgLTE3OSw4ICsxNzksNyBAQCBfX2k5MTVfZ2VtX29iamVjdF91bnNldF9wYWdlcyhzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogCXJldHVybiBwYWdlczsKIH0KIAotaW50IF9faTkx
NV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAot
CQkJCWVudW0gaTkxNV9tbV9zdWJjbGFzcyBzdWJjbGFzcykKK2ludCBfX2k5MTVfZ2VtX29iamVj
dF9wdXRfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKIHsKIAlzdHJ1Y3Qg
c2dfdGFibGUgKnBhZ2VzOwogCWludCBlcnI7CkBAIC0xOTEsNyArMTkwLDcgQEAgaW50IF9faTkx
NV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAog
CUdFTV9CVUdfT04oYXRvbWljX3JlYWQoJm9iai0+YmluZF9jb3VudCkpOwogCiAJLyogTWF5IGJl
IGNhbGxlZCBieSBzaHJpbmtlciBmcm9tIHdpdGhpbiBnZXRfcGFnZXMoKSAob24gYW5vdGhlciBi
bykgKi8KLQltdXRleF9sb2NrX25lc3RlZCgmb2JqLT5tbS5sb2NrLCBzdWJjbGFzcyk7CisJbXV0
ZXhfbG9jaygmb2JqLT5tbS5sb2NrKTsKIAlpZiAodW5saWtlbHkoYXRvbWljX3JlYWQoJm9iai0+
bW0ucGFnZXNfcGluX2NvdW50KSkpIHsKIAkJZXJyID0gLUVCVVNZOwogCQlnb3RvIHVubG9jazsK
QEAgLTI4NSw3ICsyODQsNyBAQCB2b2lkICppOTE1X2dlbV9vYmplY3RfcGluX21hcChzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCWlmICh1bmxpa2VseSghaTkxNV9nZW1fb2JqZWN0
X2hhc19zdHJ1Y3RfcGFnZShvYmopKSkKIAkJcmV0dXJuIEVSUl9QVFIoLUVOWElPKTsKIAotCWVy
ciA9IG11dGV4X2xvY2tfaW50ZXJydXB0aWJsZSgmb2JqLT5tbS5sb2NrKTsKKwllcnIgPSBtdXRl
eF9sb2NrX2ludGVycnVwdGlibGVfbmVzdGVkKCZvYmotPm1tLmxvY2ssIEk5MTVfTU1fR0VUX1BB
R0VTKTsKIAlpZiAoZXJyKQogCQlyZXR1cm4gRVJSX1BUUihlcnIpOwogCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGh5cy5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL2k5MTVfZ2VtX3BoeXMuYwppbmRleCAxMDJmZDdhMjNkM2QuLjIwOTkyNWJlOGE3
NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BoeXMuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGh5cy5jCkBAIC0xNTYsNyAr
MTU2LDcgQEAgaW50IGk5MTVfZ2VtX29iamVjdF9hdHRhY2hfcGh5cyhzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX29iamVjdCAqb2JqLCBpbnQgYWxpZ24pCiAJaWYgKGVycikKIAkJcmV0dXJuIGVycjsKIAot
CW11dGV4X2xvY2soJm9iai0+bW0ubG9jayk7CisJbXV0ZXhfbG9ja19uZXN0ZWQoJm9iai0+bW0u
bG9jaywgSTkxNV9NTV9HRVRfUEFHRVMpOwogCiAJaWYgKG9iai0+bW0ubWFkdiAhPSBJOTE1X01B
RFZfV0lMTE5FRUQpIHsKIAkJZXJyID0gLUVGQVVMVDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaHJpbmtlci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX3Nocmlua2VyLmMKaW5kZXggZWRkMjFkMTRlNjRmLi4wYjBkNmUyN2I5OTYg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaHJpbmtlci5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaHJpbmtlci5jCkBAIC05
OCw3ICs5OCw3IEBAIHN0YXRpYyBib29sIHVuc2FmZV9kcm9wX3BhZ2VzKHN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0ICpvYmosCiAJCWZsYWdzID0gSTkxNV9HRU1fT0JKRUNUX1VOQklORF9BQ1RJ
VkU7CiAKIAlpZiAoaTkxNV9nZW1fb2JqZWN0X3VuYmluZChvYmosIGZsYWdzKSA9PSAwKQotCQlf
X2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqLCBJOTE1X01NX1NIUklOS0VSKTsKKwkJX19p
OTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKG9iaik7CiAKIAlyZXR1cm4gIWk5MTVfZ2VtX29iamVj
dF9oYXNfcGFnZXMob2JqKTsKIH0KQEAgLTI1NCw4ICsyNTQsNyBAQCBpOTE1X2dlbV9zaHJpbmso
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAKIAkJCWlmICh1bnNhZmVfZHJvcF9wYWdl
cyhvYmosIHNocmluaykpIHsKIAkJCQkvKiBNYXkgYXJyaXZlIGZyb20gZ2V0X3BhZ2VzIG9uIGFu
b3RoZXIgYm8gKi8KLQkJCQltdXRleF9sb2NrX25lc3RlZCgmb2JqLT5tbS5sb2NrLAotCQkJCQkJ
ICBJOTE1X01NX1NIUklOS0VSKTsKKwkJCQltdXRleF9sb2NrKCZvYmotPm1tLmxvY2spOwogCQkJ
CWlmICghaTkxNV9nZW1fb2JqZWN0X2hhc19wYWdlcyhvYmopKSB7CiAJCQkJCXRyeV90b193cml0
ZWJhY2sob2JqLCBzaHJpbmspOwogCQkJCQljb3VudCArPSBvYmotPmJhc2Uuc2l6ZSA+PiBQQUdF
X1NISUZUOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3Vz
ZXJwdHIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV91c2VycHRyLmMKaW5k
ZXggNzBkYzUwNmE1NDI2Li5mM2IzYmM3YzMyY2IgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV91c2VycHRyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX3VzZXJwdHIuYwpAQCAtMTU4LDcgKzE1OCw3IEBAIHVzZXJwdHJfbW5faW52
YWxpZGF0ZV9yYW5nZV9zdGFydChzdHJ1Y3QgbW11X25vdGlmaWVyICpfbW4sCiAJCXJldCA9IGk5
MTVfZ2VtX29iamVjdF91bmJpbmQob2JqLAogCQkJCQkgICAgIEk5MTVfR0VNX09CSkVDVF9VTkJJ
TkRfQUNUSVZFKTsKIAkJaWYgKHJldCA9PSAwKQotCQkJcmV0ID0gX19pOTE1X2dlbV9vYmplY3Rf
cHV0X3BhZ2VzKG9iaiwgSTkxNV9NTV9TSFJJTktFUik7CisJCQlyZXQgPSBfX2k5MTVfZ2VtX29i
amVjdF9wdXRfcGFnZXMob2JqKTsKIAkJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwogCQlpZiAo
cmV0KQogCQkJZ290byB1bmxvY2s7CkBAIC01MTQsNyArNTE0LDcgQEAgX19pOTE1X2dlbV91c2Vy
cHRyX2dldF9wYWdlc193b3JrZXIoc3RydWN0IHdvcmtfc3RydWN0ICpfd29yaykKIAkJfQogCX0K
IAotCW11dGV4X2xvY2soJm9iai0+bW0ubG9jayk7CisJbXV0ZXhfbG9ja19uZXN0ZWQoJm9iai0+
bW0ubG9jaywgSTkxNV9NTV9HRVRfUEFHRVMpOwogCWlmIChvYmotPnVzZXJwdHIud29yayA9PSAm
d29yay0+d29yaykgewogCQlzdHJ1Y3Qgc2dfdGFibGUgKnBhZ2VzID0gRVJSX1BUUihyZXQpOwog
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFn
ZXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaHVnZV9wYWdlcy5jCmlu
ZGV4IDZjYmQ0YTY2OGM5YS4uZGY1ODYwMzVjMzNlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYwpAQCAtNTYyLDcgKzU2Miw3IEBAIHN0YXRp
YyBpbnQgaWd0X21vY2tfcHBndHRfbWlzYWxpZ25lZF9kbWEodm9pZCAqYXJnKQogCQlpOTE1X3Zt
YV9jbG9zZSh2bWEpOwogCiAJCWk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdlcyhvYmopOwotCQlf
X2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqLCBJOTE1X01NX05PUk1BTCk7CisJCV9faTkx
NV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhvYmopOwogCQlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7
CiAJfQogCkBAIC01OTAsNyArNTkwLDcgQEAgc3RhdGljIHZvaWQgY2xvc2Vfb2JqZWN0X2xpc3Qo
c3RydWN0IGxpc3RfaGVhZCAqb2JqZWN0cywKIAogCQlsaXN0X2RlbCgmb2JqLT5zdF9saW5rKTsK
IAkJaTkxNV9nZW1fb2JqZWN0X3VucGluX3BhZ2VzKG9iaik7Ci0JCV9faTkxNV9nZW1fb2JqZWN0
X3B1dF9wYWdlcyhvYmosIEk5MTVfTU1fTk9STUFMKTsKKwkJX19pOTE1X2dlbV9vYmplY3RfcHV0
X3BhZ2VzKG9iaik7CiAJCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKIAl9CiB9CkBAIC04NjAs
NyArODYwLDcgQEAgc3RhdGljIGludCBpZ3RfbW9ja19wcGd0dF82NEsodm9pZCAqYXJnKQogCQkJ
aTkxNV92bWFfY2xvc2Uodm1hKTsKIAogCQkJaTkxNV9nZW1fb2JqZWN0X3VucGluX3BhZ2VzKG9i
aik7Ci0JCQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqLCBJOTE1X01NX05PUk1BTCk7
CisJCQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqKTsKIAkJCWk5MTVfZ2VtX29iamVj
dF9wdXQob2JqKTsKIAkJfQogCX0KQEAgLTEyNjgsNyArMTI2OCw3IEBAIHN0YXRpYyBpbnQgaWd0
X3BwZ3R0X2V4aGF1c3RfaHVnZSh2b2lkICphcmcpCiAJCQl9CiAKIAkJCWk5MTVfZ2VtX29iamVj
dF91bnBpbl9wYWdlcyhvYmopOwotCQkJX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKG9iaiwg
STkxNV9NTV9OT1JNQUwpOworCQkJX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKG9iaik7CiAJ
CQlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7CiAJCX0KIAl9CkBAIC0xMzMwLDcgKzEzMzAsNyBA
QCBzdGF0aWMgaW50IGlndF9wcGd0dF9pbnRlcm5hbF9odWdlKHZvaWQgKmFyZykKIAkJfQogCiAJ
CWk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdlcyhvYmopOwotCQlfX2k5MTVfZ2VtX29iamVjdF9w
dXRfcGFnZXMob2JqLCBJOTE1X01NX05PUk1BTCk7CisJCV9faTkxNV9nZW1fb2JqZWN0X3B1dF9w
YWdlcyhvYmopOwogCQlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7CiAJfQogCkBAIC0xMzk5LDcg
KzEzOTksNyBAQCBzdGF0aWMgaW50IGlndF9wcGd0dF9nZW1mc19odWdlKHZvaWQgKmFyZykKIAkJ
fQogCiAJCWk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdlcyhvYmopOwotCQlfX2k5MTVfZ2VtX29i
amVjdF9wdXRfcGFnZXMob2JqLCBJOTE1X01NX05PUk1BTCk7CisJCV9faTkxNV9nZW1fb2JqZWN0
X3B1dF9wYWdlcyhvYmopOwogCQlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7CiAJfQogCi0tIAoy
LjIyLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCklu
dGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

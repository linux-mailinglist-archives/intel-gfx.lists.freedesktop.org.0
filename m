Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6E0BEB21AE
	for <lists+intel-gfx@lfdr.de>; Fri, 13 Sep 2019 16:17:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 90CA06F3C8;
	Fri, 13 Sep 2019 14:17:06 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6F18C6F3C8
 for <intel-gfx@lists.freedesktop.org>; Fri, 13 Sep 2019 14:17:02 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 13 Sep 2019 07:17:01 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,501,1559545200"; d="scan'208";a="192735123"
Received: from rosetta.fi.intel.com ([10.237.72.194])
 by FMSMGA003.fm.intel.com with ESMTP; 13 Sep 2019 07:17:00 -0700
Received: by rosetta.fi.intel.com (Postfix, from userid 1000)
 id 06F6F843D1B; Fri, 13 Sep 2019 17:16:54 +0300 (EEST)
From: Mika Kuoppala <mika.kuoppala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 13 Sep 2019 17:16:52 +0300
Message-Id: <20190913141652.27958-3-mika.kuoppala@linux.intel.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190913141652.27958-1-mika.kuoppala@linux.intel.com>
References: <20190913141652.27958-1-mika.kuoppala@linux.intel.com>
Subject: [Intel-gfx] [PATCH 3/3] drm/i915: Check that we do find forcewake
 domain on gen11+
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QnkgYWx3YXlzIHJlcXVpcmluZyBhIHZhbGlkIGZvcmNld2FrZSBkb21haW4sIGV2ZW4KRk9SQ0VX
QUtFX05PTkUsIHdlIGNhbiBtYWtlIGFzc2VydGlvbnMgdGhhdCBhY2Nlc3NlcwpuZWVkIHRvIGxh
bmQgb24gYSB2YWxpZCBkb21haW4gYW5kIG5vdCBnbyBvdXQgb2YgYm91bmRzLgoKQ2M6IERhbmll
bGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5jb20+CkNjOiBU
dnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AbGludXguaW50ZWwuY29tPgpDYzogQ2hyaXMg
V2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+ClNpZ25lZC1vZmYtYnk6IE1pa2EgS3Vv
cHBhbGEgPG1pa2Eua3VvcHBhbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2ludGVsX3VuY29yZS5jIHwgNDYgKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5oIHwgIDQgKystCiAyIGZpbGVzIGNo
YW5nZWQsIDQwIGluc2VydGlvbnMoKyksIDEwIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfdW5jb3JlLmMKaW5kZXggOTRhOTdiZjhjMDIxLi44ZTEyYjUzMzQwMTggMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX3VuY29yZS5jCkBAIC04NDUsNyArODQ1LDcgQEAgc3RhdGljIGludCBm
d19yYW5nZV9jbXAodTMyIG9mZnNldCwgY29uc3Qgc3RydWN0IGludGVsX2ZvcmNld2FrZV9yYW5n
ZSAqZW50cnkpCiB9KQogCiBzdGF0aWMgZW51bSBmb3JjZXdha2VfZG9tYWlucwotZmluZF9md19k
b21haW4oc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlLCB1MzIgb2Zmc2V0KQorX19maW5kX2Z3
X2RvbWFpbihzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUsIHUzMiBvZmZzZXQpCiB7CiAJY29u
c3Qgc3RydWN0IGludGVsX2ZvcmNld2FrZV9yYW5nZSAqZW50cnk7CiAKQEAgLTg1NSw3ICs4NTUs
NyBAQCBmaW5kX2Z3X2RvbWFpbihzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUsIHUzMiBvZmZz
ZXQpCiAJCQlmd19yYW5nZV9jbXApOwogCiAJaWYgKCFlbnRyeSkKLQkJcmV0dXJuIDA7CisJCXJl
dHVybiBGT1JDRVdBS0VfSU5WQUxJRDsKIAogCS8qCiAJICogVGhlIGxpc3Qgb2YgRlcgZG9tYWlu
cyBkZXBlbmRzIG9uIHRoZSBTS1UgaW4gZ2VuMTErIHNvIHdlCkBAIC04NzIsNiArODcyLDM0IEBA
IGZpbmRfZndfZG9tYWluKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSwgdTMyIG9mZnNldCkK
IAlyZXR1cm4gZW50cnktPmRvbWFpbnM7CiB9CiAKK3N0YXRpYyBlbnVtIGZvcmNld2FrZV9kb21h
aW5zCitmaW5kX2Z3X2RvbWFpbihzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUsIHUzMiBvZmZz
ZXQpCit7CisJZW51bSBmb3JjZXdha2VfZG9tYWlucyBmd19kb21haW5zOworCisJZndfZG9tYWlu
cyA9IF9fZmluZF9md19kb21haW4odW5jb3JlLCBvZmZzZXQpOworCisJaWYgKGZ3X2RvbWFpbnMg
PT0gRk9SQ0VXQUtFX0lOVkFMSUQpCisJCXJldHVybiBGT1JDRVdBS0VfTk9ORTsKKwllbHNlCisJ
CXJldHVybiBmd19kb21haW5zOworfQorCitzdGF0aWMgZW51bSBmb3JjZXdha2VfZG9tYWlucwor
ZmluZF9md19kb21haW5fY2hlY2soc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlLCB1MzIgb2Zm
c2V0KQoreworCWVudW0gZm9yY2V3YWtlX2RvbWFpbnMgZndfZG9tYWluczsKKworCWZ3X2RvbWFp
bnMgPSBfX2ZpbmRfZndfZG9tYWluKHVuY29yZSwgb2Zmc2V0KTsKKworCWlmIChXQVJOKGZ3X2Rv
bWFpbnMgPT0gRk9SQ0VXQUtFX0lOVkFMSUQsCisJCSAiVW5rbm93biBmb3JjZXdha2UgZG9tYWlu
KHMpIGFjY2Vzc2VkIGF0IDB4JXhcbiIsCisJCSBvZmZzZXQpKQorCQlyZXR1cm4gRk9SQ0VXQUtF
X0FMTDsKKworCXJldHVybiBmd19kb21haW5zOworfQorCiAjZGVmaW5lIEdFTl9GV19SQU5HRShz
LCBlLCBkKSBcCiAJeyAuc3RhcnQgPSAocyksIC5lbmQgPSAoZSksIC5kb21haW5zID0gKGQpIH0K
IApAQCAtOTAwLDEwICs5MjgsMTAgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9mb3JjZXdh
a2VfcmFuZ2UgX192bHZfZndfcmFuZ2VzW10gPSB7CiB9KQogCiAjZGVmaW5lIF9fZ2VuMTFfZnd0
YWJsZV9yZWdfcmVhZF9md19kb21haW5zKHVuY29yZSwgb2Zmc2V0KSBcCi0JZmluZF9md19kb21h
aW4odW5jb3JlLCBvZmZzZXQpCisJZmluZF9md19kb21haW5fY2hlY2sodW5jb3JlLCBvZmZzZXQp
CiAKICNkZWZpbmUgX19nZW4xMl9md3RhYmxlX3JlZ19yZWFkX2Z3X2RvbWFpbnModW5jb3JlLCBv
ZmZzZXQpIFwKLQlmaW5kX2Z3X2RvbWFpbih1bmNvcmUsIG9mZnNldCkKKwlmaW5kX2Z3X2RvbWFp
bl9jaGVjayh1bmNvcmUsIG9mZnNldCkKIAogLyogKk11c3QqIGJlIHNvcnRlZCBieSBvZmZzZXQh
IFNlZSBpbnRlbF9zaGFkb3dfdGFibGVfY2hlY2soKS4gKi8KIHN0YXRpYyBjb25zdCBpOTE1X3Jl
Z190IGdlbjhfc2hhZG93ZWRfcmVnc1tdID0gewpAQCAtMTAzMyw3ICsxMDYxLDcgQEAgc3RhdGlj
IGNvbnN0IHN0cnVjdCBpbnRlbF9mb3JjZXdha2VfcmFuZ2UgX19jaHZfZndfcmFuZ2VzW10gPSB7
CiAvKiAqTXVzdCogYmUgc29ydGVkIGJ5IG9mZnNldCByYW5nZXMhIFNlZSBpbnRlbF9md190YWJs
ZV9jaGVjaygpLiAqLwogc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9mb3JjZXdha2VfcmFuZ2Ug
X19nZW45X2Z3X3Jhbmdlc1tdID0gewogCUdFTl9GV19SQU5HRSgweDAsIDB4YWZmLCBGT1JDRVdB
S0VfQkxJVFRFUiksCi0JR0VOX0ZXX1JBTkdFKDB4YjAwLCAweDFmZmYsIDApLCAvKiB1bmNvcmUg
cmFuZ2UgKi8KKwlHRU5fRldfUkFOR0UoMHhiMDAsIDB4MWZmZiwgRk9SQ0VXQUtFX05PTkUpLCAv
KiB1bmNvcmUgcmFuZ2UgKi8KIAlHRU5fRldfUkFOR0UoMHgyMDAwLCAweDI2ZmYsIEZPUkNFV0FL
RV9SRU5ERVIpLAogCUdFTl9GV19SQU5HRSgweDI3MDAsIDB4MmZmZiwgRk9SQ0VXQUtFX0JMSVRU
RVIpLAogCUdFTl9GV19SQU5HRSgweDMwMDAsIDB4M2ZmZiwgRk9SQ0VXQUtFX1JFTkRFUiksCkBA
IC0xMDY5LDcgKzEwOTcsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2ZvcmNld2FrZV9y
YW5nZSBfX2dlbjlfZndfcmFuZ2VzW10gPSB7CiAvKiAqTXVzdCogYmUgc29ydGVkIGJ5IG9mZnNl
dCByYW5nZXMhIFNlZSBpbnRlbF9md190YWJsZV9jaGVjaygpLiAqLwogc3RhdGljIGNvbnN0IHN0
cnVjdCBpbnRlbF9mb3JjZXdha2VfcmFuZ2UgX19nZW4xMV9md19yYW5nZXNbXSA9IHsKIAlHRU5f
RldfUkFOR0UoMHgwLCAweGFmZiwgRk9SQ0VXQUtFX0JMSVRURVIpLAotCUdFTl9GV19SQU5HRSgw
eGIwMCwgMHgxZmZmLCAwKSwgLyogdW5jb3JlIHJhbmdlICovCisJR0VOX0ZXX1JBTkdFKDB4YjAw
LCAweDFmZmYsIEZPUkNFV0FLRV9OT05FKSwgLyogdW5jb3JlIHJhbmdlICovCiAJR0VOX0ZXX1JB
TkdFKDB4MjAwMCwgMHgyNmZmLCBGT1JDRVdBS0VfUkVOREVSKSwKIAlHRU5fRldfUkFOR0UoMHgy
NzAwLCAweDJmZmYsIEZPUkNFV0FLRV9CTElUVEVSKSwKIAlHRU5fRldfUkFOR0UoMHgzMDAwLCAw
eDNmZmYsIEZPUkNFV0FLRV9SRU5ERVIpLApAQCAtMTA5Miw3ICsxMTIwLDcgQEAgc3RhdGljIGNv
bnN0IHN0cnVjdCBpbnRlbF9mb3JjZXdha2VfcmFuZ2UgX19nZW4xMV9md19yYW5nZXNbXSA9IHsK
IAlHRU5fRldfUkFOR0UoMHgxYTAwMCwgMHgyNDNmZiwgRk9SQ0VXQUtFX0JMSVRURVIpLAogCUdF
Tl9GV19SQU5HRSgweDI0NDAwLCAweDI0N2ZmLCBGT1JDRVdBS0VfUkVOREVSKSwKIAlHRU5fRldf
UkFOR0UoMHgyNDgwMCwgMHgzZmZmZiwgRk9SQ0VXQUtFX0JMSVRURVIpLAotCUdFTl9GV19SQU5H
RSgweDQwMDAwLCAweDFiZmZmZiwgMCksCisJR0VOX0ZXX1JBTkdFKDB4NDAwMDAsIDB4MWJmZmZm
LCBGT1JDRVdBS0VfTk9ORSksCiAJR0VOX0ZXX1JBTkdFKDB4MWMwMDAwLCAweDFjM2ZmZiwgRk9S
Q0VXQUtFX01FRElBX1ZEQk9YMCksCiAJR0VOX0ZXX1JBTkdFKDB4MWM0MDAwLCAweDFjN2ZmZiwg
Rk9SQ0VXQUtFX01FRElBX1ZEQk9YMSksCiAJR0VOX0ZXX1JBTkdFKDB4MWM4MDAwLCAweDFjYmZm
ZiwgRk9SQ0VXQUtFX01FRElBX1ZFQk9YMCksCkBAIC0xMTA1LDcgKzExMzMsNyBAQCBzdGF0aWMg
Y29uc3Qgc3RydWN0IGludGVsX2ZvcmNld2FrZV9yYW5nZSBfX2dlbjExX2Z3X3Jhbmdlc1tdID0g
ewogLyogKk11c3QqIGJlIHNvcnRlZCBieSBvZmZzZXQgcmFuZ2VzISBTZWUgaW50ZWxfZndfdGFi
bGVfY2hlY2soKS4gKi8KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZm9yY2V3YWtlX3Jhbmdl
IF9fZ2VuMTJfZndfcmFuZ2VzW10gPSB7CiAJR0VOX0ZXX1JBTkdFKDB4MCwgMHhhZmYsIEZPUkNF
V0FLRV9CTElUVEVSKSwKLQlHRU5fRldfUkFOR0UoMHhiMDAsIDB4MWZmZiwgMCksIC8qIHVuY29y
ZSByYW5nZSAqLworCUdFTl9GV19SQU5HRSgweGIwMCwgMHgxZmZmLCBGT1JDRVdBS0VfTk9ORSks
IC8qIHVuY29yZSByYW5nZSAqLwogCUdFTl9GV19SQU5HRSgweDIwMDAsIDB4MjZmZiwgRk9SQ0VX
QUtFX1JFTkRFUiksCiAJR0VOX0ZXX1JBTkdFKDB4MjcwMCwgMHgyZmZmLCBGT1JDRVdBS0VfQkxJ
VFRFUiksCiAJR0VOX0ZXX1JBTkdFKDB4MzAwMCwgMHgzZmZmLCBGT1JDRVdBS0VfUkVOREVSKSwK
QEAgLTExMzIsNyArMTE2MCw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZm9yY2V3YWtl
X3JhbmdlIF9fZ2VuMTJfZndfcmFuZ2VzW10gPSB7CiAJR0VOX0ZXX1JBTkdFKDB4MWMwMDAsIDB4
MjQzZmYsIEZPUkNFV0FLRV9CTElUVEVSKSwKIAlHRU5fRldfUkFOR0UoMHgyNDQwMCwgMHgyNDdm
ZiwgRk9SQ0VXQUtFX1JFTkRFUiksCiAJR0VOX0ZXX1JBTkdFKDB4MjQ4MDAsIDB4M2ZmZmYsIEZP
UkNFV0FLRV9CTElUVEVSKSwKLQlHRU5fRldfUkFOR0UoMHg0MDAwMCwgMHgxYmZmZmYsIDApLAor
CUdFTl9GV19SQU5HRSgweDQwMDAwLCAweDFiZmZmZiwgRk9SQ0VXQUtFX05PTkUpLAogCUdFTl9G
V19SQU5HRSgweDFjMDAwMCwgMHgxYzNmZmYsIEZPUkNFV0FLRV9NRURJQV9WREJPWDApLAogCUdF
Tl9GV19SQU5HRSgweDFjNDAwMCwgMHgxYzdmZmYsIEZPUkNFV0FLRV9NRURJQV9WREJPWDEpLAog
CUdFTl9GV19SQU5HRSgweDFjODAwMCwgMHgxY2JmZmYsIEZPUkNFV0FLRV9NRURJQV9WRUJPWDAp
LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdW5jb3JlLmggYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuaAppbmRleCA0MTRmYzJjYjA0NTkuLjdkMjcx
YWFmOGYxYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdW5jb3JlLmgK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdW5jb3JlLmgKQEAgLTU4LDYgKzU4LDcg
QEAgZW51bSBmb3JjZXdha2VfZG9tYWluX2lkIHsKIH07CiAKIGVudW0gZm9yY2V3YWtlX2RvbWFp
bnMgeworCUZPUkNFV0FLRV9OT05FCQk9IDAsCiAJRk9SQ0VXQUtFX1JFTkRFUgk9IEJJVChGV19E
T01BSU5fSURfUkVOREVSKSwKIAlGT1JDRVdBS0VfQkxJVFRFUgk9IEJJVChGV19ET01BSU5fSURf
QkxJVFRFUiksCiAJRk9SQ0VXQUtFX01FRElBCQk9IEJJVChGV19ET01BSU5fSURfTUVESUEpLApA
QCAtNjgsNyArNjksOCBAQCBlbnVtIGZvcmNld2FrZV9kb21haW5zIHsKIAlGT1JDRVdBS0VfTUVE
SUFfVkVCT1gwCT0gQklUKEZXX0RPTUFJTl9JRF9NRURJQV9WRUJPWDApLAogCUZPUkNFV0FLRV9N
RURJQV9WRUJPWDEJPSBCSVQoRldfRE9NQUlOX0lEX01FRElBX1ZFQk9YMSksCiAKLQlGT1JDRVdB
S0VfQUxMID0gQklUKEZXX0RPTUFJTl9JRF9DT1VOVCkgLSAxCisJRk9SQ0VXQUtFX0FMTCA9IEJJ
VChGV19ET01BSU5fSURfQ09VTlQpIC0gMSwKKwlGT1JDRVdBS0VfSU5WQUxJRCA9IEJJVChGV19E
T01BSU5fSURfQ09VTlQpLAogfTsKIAogc3RydWN0IGludGVsX3VuY29yZV9mdW5jcyB7Ci0tIAoy
LjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCklu
dGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

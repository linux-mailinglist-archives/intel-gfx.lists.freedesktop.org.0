Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 827A62E7B7A
	for <lists+intel-gfx@lfdr.de>; Wed, 30 Dec 2020 18:07:56 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5824D8928D;
	Wed, 30 Dec 2020 17:07:53 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (unknown [77.68.26.236])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2D83B8928D
 for <intel-gfx@lists.freedesktop.org>; Wed, 30 Dec 2020 17:07:51 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 23465402-1500050 
 for multiple; Wed, 30 Dec 2020 17:07:35 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 30 Dec 2020 17:07:34 +0000
Message-Id: <20201230170734.27916-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20201230165933.GA4171774@ideak-desk.fi.intel.com>
References: <20201230165933.GA4171774@ideak-desk.fi.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2] drm/i915/dp: Track pm_qos per connector
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Chris Wilson <chris@chris-wilson.co.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U2luY2UgbXVsdGlwbGUgY29ubmVjdG9ycyBtYXkgcnVuIGludGVsX2RwX2F1eF94ZmVyIGNvbm5j
dXJyZW50bHksIGEKc2luZ2xlIGdsb2JhbCBwbV9xb3MgZG9lcyBub3Qgc3VmZmljZS4gKE9uZSBj
b25uZWN0b3IgbWF5IGRpc2FibGUgdGhlCmRtYS1sYXRlbmN5IGJvb3N0IHByZW1hdHVyZWx5IHdo
aWxlIHRoZSBzZWNvbmQgaXMgc3RpbGwgZGVwZW5kaW5nIG9uCml0LikgSW5zdGVhZCBvZiBhIHNp
bmdsZSBnbG9iYWwgcG1fcW9zLCB0cmFjayB0aGUgcG1fcW9zIHJlcXVlc3QgZm9yCmVhY2ggaW50
ZWxfZHAuCgp2MjogTW92ZSB0aGUgcG1fcW9zIHNldHVwL3RlYXJkb3duIHRvIGludGVsX2RwX2F1
eF9pbml0L2ZpbmkKCkZpeGVzOiA5ZWUzMmZlYTVmZTggKCJkcm0vaTkxNTogaXJxLWRyaXZlIHRo
ZSBkcCBhdXggY29tbXVuaWNhdGlvbiIpClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hy
aXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxh
QGxpbnV4LmludGVsLmNvbT4KQ2M6IEltcmUgRGVhayA8aW1yZS5kZWFrQGludGVsLmNvbT4KLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCB8IDMg
KysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMgICAgICAgICAgICB8
IDYgKysrKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jICAgICAgICAgICAgICAg
ICAgICB8IDUgLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAg
ICAgICAgICAgIHwgMyAtLS0KIDQgZmlsZXMgY2hhbmdlZCwgNyBpbnNlcnRpb25zKCspLCAxMCBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Rpc3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheV90eXBlcy5oCmluZGV4IGI4NmJhMWJkYmFhMy4uMTA2N2JkMDczYzk1IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaApA
QCAtMTQ2Myw2ICsxNDYzLDkgQEAgc3RydWN0IGludGVsX2RwIHsKIAkJYm9vbCByZ2JfdG9feWNi
Y3I7CiAJfSBkZnA7CiAKKwkvKiBUbyBjb250cm9sIHdha2V1cCBsYXRlbmN5LCBlLmcuIGZvciBp
cnEtZHJpdmVuIGRwIGF1eCB0cmFuc2ZlcnMuICovCisJc3RydWN0IHBtX3Fvc19yZXF1ZXN0IHBt
X3FvczsKKwogCS8qIERpc3BsYXkgc3RyZWFtIGNvbXByZXNzaW9uIHRlc3RpbmcgKi8KIAlib29s
IGZvcmNlX2RzY19lbjsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kcC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCmlu
ZGV4IDM1N2Y3OTIxZTA3MC4uZGFmYjEzMzRmOTFhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kcC5jCkBAIC0xNTEyLDcgKzE1MTIsNyBAQCBpbnRlbF9kcF9hdXhfeGZlcihz
dHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogCSAqIGxvd2VzdCBwb3NzaWJsZSB3YWtldXAgbGF0
ZW5jeSBhbmQgc28gcHJldmVudCB0aGUgY3B1IGZyb20gZ29pbmcgaW50bwogCSAqIGRlZXAgc2xl
ZXAgc3RhdGVzLgogCSAqLwotCWNwdV9sYXRlbmN5X3Fvc191cGRhdGVfcmVxdWVzdCgmaTkxNS0+
cG1fcW9zLCAwKTsKKwljcHVfbGF0ZW5jeV9xb3NfdXBkYXRlX3JlcXVlc3QoJmludGVsX2RwLT5w
bV9xb3MsIDApOwogCiAJaW50ZWxfZHBfY2hlY2tfZWRwKGludGVsX2RwKTsKIApAQCAtMTY0Myw3
ICsxNjQzLDcgQEAgaW50ZWxfZHBfYXV4X3hmZXIoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwK
IAogCXJldCA9IHJlY3ZfYnl0ZXM7CiBvdXQ6Ci0JY3B1X2xhdGVuY3lfcW9zX3VwZGF0ZV9yZXF1
ZXN0KCZpOTE1LT5wbV9xb3MsIFBNX1FPU19ERUZBVUxUX1ZBTFVFKTsKKwljcHVfbGF0ZW5jeV9x
b3NfdXBkYXRlX3JlcXVlc3QoJmludGVsX2RwLT5wbV9xb3MsIFBNX1FPU19ERUZBVUxUX1ZBTFVF
KTsKIAogCWlmICh2ZGQpCiAJCWVkcF9wYW5lbF92ZGRfb2ZmKGludGVsX2RwLCBmYWxzZSk7CkBA
IC0xOTE5LDYgKzE5MTksNyBAQCBzdGF0aWMgaTkxNV9yZWdfdCB0Z2xfYXV4X2RhdGFfcmVnKHN0
cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsIGludCBpbmRleCkKIHN0YXRpYyB2b2lkCiBpbnRlbF9k
cF9hdXhfZmluaShzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKQogeworCWNwdV9sYXRlbmN5X3Fv
c19yZW1vdmVfcmVxdWVzdCgmaW50ZWxfZHAtPnBtX3Fvcyk7CiAJa2ZyZWUoaW50ZWxfZHAtPmF1
eC5uYW1lKTsKIH0KIApAQCAtMTk3MSw2ICsxOTcyLDcgQEAgaW50ZWxfZHBfYXV4X2luaXQoc3Ry
dWN0IGludGVsX2RwICppbnRlbF9kcCkKIAkJCQkJICAgICAgIGVuY29kZXItPmJhc2UubmFtZSk7
CiAKIAlpbnRlbF9kcC0+YXV4LnRyYW5zZmVyID0gaW50ZWxfZHBfYXV4X3RyYW5zZmVyOworCWNw
dV9sYXRlbmN5X3Fvc19hZGRfcmVxdWVzdCgmaW50ZWxfZHAtPnBtX3FvcywgUE1fUU9TX0RFRkFV
TFRfVkFMVUUpOwogfQogCiBib29sIGludGVsX2RwX3NvdXJjZV9zdXBwb3J0c19oYnIyKHN0cnVj
dCBpbnRlbF9kcCAqaW50ZWxfZHApCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwppbmRleCA1NzA4ZTEx
ZDkxN2IuLjI0OWY3NjU5OTNmNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCkBAIC01NzgsOCAr
NTc4LDYgQEAgc3RhdGljIGludCBpOTE1X2RyaXZlcl9od19wcm9iZShzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYpCiAKIAlwY2lfc2V0X21hc3RlcihwZGV2KTsKIAotCWNwdV9sYXRl
bmN5X3Fvc19hZGRfcmVxdWVzdCgmZGV2X3ByaXYtPnBtX3FvcywgUE1fUU9TX0RFRkFVTFRfVkFM
VUUpOwotCiAJaW50ZWxfZ3RfaW5pdF93b3JrYXJvdW5kcyhkZXZfcHJpdik7CiAKIAkvKiBPbiB0
aGUgOTQ1Ry9HTSwgdGhlIGNoaXBzZXQgcmVwb3J0cyB0aGUgTVNJIGNhcGFiaWxpdHkgb24gdGhl
CkBAIC02MjYsNyArNjI0LDYgQEAgc3RhdGljIGludCBpOTE1X2RyaXZlcl9od19wcm9iZShzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiBlcnJfbXNpOgogCWlmIChwZGV2LT5tc2lf
ZW5hYmxlZCkKIAkJcGNpX2Rpc2FibGVfbXNpKHBkZXYpOwotCWNwdV9sYXRlbmN5X3Fvc19yZW1v
dmVfcmVxdWVzdCgmZGV2X3ByaXYtPnBtX3Fvcyk7CiBlcnJfbWVtX3JlZ2lvbnM6CiAJaW50ZWxf
bWVtb3J5X3JlZ2lvbnNfZHJpdmVyX3JlbGVhc2UoZGV2X3ByaXYpOwogZXJyX2dndHQ6CkBAIC02
NDgsOCArNjQ1LDYgQEAgc3RhdGljIHZvaWQgaTkxNV9kcml2ZXJfaHdfcmVtb3ZlKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAogCWlmIChwZGV2LT5tc2lfZW5hYmxlZCkKIAkJ
cGNpX2Rpc2FibGVfbXNpKHBkZXYpOwotCi0JY3B1X2xhdGVuY3lfcW9zX3JlbW92ZV9yZXF1ZXN0
KCZkZXZfcHJpdi0+cG1fcW9zKTsKIH0KIAogLyoqCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRl
eCBlMzhhMTBkNWMxMjguLjVlNWJjZWYyMGUzMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBA
IC04OTEsOSArODkxLDYgQEAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgewogCiAJYm9vbCBkaXNw
bGF5X2lycXNfZW5hYmxlZDsKIAotCS8qIFRvIGNvbnRyb2wgd2FrZXVwIGxhdGVuY3ksIGUuZy4g
Zm9yIGlycS1kcml2ZW4gZHAgYXV4IHRyYW5zZmVycy4gKi8KLQlzdHJ1Y3QgcG1fcW9zX3JlcXVl
c3QgcG1fcW9zOwotCiAJLyogU2lkZWJhbmQgbWFpbGJveCBwcm90ZWN0aW9uICovCiAJc3RydWN0
IG11dGV4IHNiX2xvY2s7CiAJc3RydWN0IHBtX3Fvc19yZXF1ZXN0IHNiX3FvczsKLS0gCjIuMjAu
MQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwt
Z2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

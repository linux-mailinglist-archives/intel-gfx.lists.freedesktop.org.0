Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D8C411136F0
	for <lists+intel-gfx@lfdr.de>; Wed,  4 Dec 2019 22:14:58 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1D0576EA87;
	Wed,  4 Dec 2019 21:14:57 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 53AE86EA87;
 Wed,  4 Dec 2019 21:14:55 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19463036-1500050 
 for multiple; Wed, 04 Dec 2019 21:14:40 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  4 Dec 2019 21:14:42 +0000
Message-Id: <20191204211442.4073126-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t] i915/gem_exec_balancer: Swap bond-chain
 engines over
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QW5vdGhlciBzaXR1YXRpb24gYXJpc2VzIHdoZXJlIHRoZSBtYXN0ZXIgaXMgb24gdGhlIHNhbWUg
ZW5naW5lIGFzIGl0cwpzaWduYWxlci4gSXQgaXMgc3VibWl0dGVkIHRvIHRoZSBzZWNvbmQgRUxT
UCwgY2F1c2luZyB0aGUgc3VibWlzc2lvbiBvZgppdHMgYm9uZGVkIHBhaXJzLCBidXQgaXQgcmVt
YWlucyBibG9ja2VkLiBIb3dldmVyLCBpZiB3ZSBkbyBub3Qgc3RhbGwKdGhlIGJvbmRlZCBwYWly
LCBpdCB3aWxsIHByb2NlZWQgdG8gZXhlY3V0ZSBpbW1lZGlhdGVseSBhaGVhZCBvZiBpdHMKbWFz
dGVyIGRlcGVuZGVuY2llcy4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hy
aXMtd2lsc29uLmNvLnVrPgpDYzogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVs
LmNvbT4KLS0tCiB0ZXN0cy9pOTE1L2dlbV9leGVjX2JhbGFuY2VyLmMgfCA4MyArKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKystCiAxIGZpbGUgY2hhbmdlZCwgODIgaW5zZXJ0aW9ucygr
KSwgMSBkZWxldGlvbigtKQoKZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX2V4ZWNfYmFsYW5j
ZXIuYyBiL3Rlc3RzL2k5MTUvZ2VtX2V4ZWNfYmFsYW5jZXIuYwppbmRleCA1ZjZlM2Q1NjguLmY0
OTA5YTk3OCAxMDA2NDQKLS0tIGEvdGVzdHMvaTkxNS9nZW1fZXhlY19iYWxhbmNlci5jCisrKyBi
L3Rlc3RzL2k5MTUvZ2VtX2V4ZWNfYmFsYW5jZXIuYwpAQCAtOTM0LDYgKzkzNCw4NSBAQCBzdGF0
aWMgdm9pZCBfX2JvbmRlZF9jaGFpbihpbnQgaTkxNSwgdWludDMyX3QgY3R4LAogCWdlbV9jbG9z
ZShpOTE1LCBiYXRjaC5oYW5kbGUpOwogfQogCitzdGF0aWMgdm9pZCBfX2JvbmRlZF9jaGFpbl9p
bnYoaW50IGk5MTUsIHVpbnQzMl90IGN0eCwKKwkJCSAgICAgICBjb25zdCBzdHJ1Y3QgaTkxNV9l
bmdpbmVfY2xhc3NfaW5zdGFuY2UgKnNpYmxpbmdzLAorCQkJICAgICAgIHVuc2lnbmVkIGludCBj
b3VudCkKK3sKKwljb25zdCBpbnQgcHJpb3JpdGllc1tdID0geyAtMTAyMywgMCwgMTAyMyB9Owor
CXN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19vYmplY3QyIGJhdGNoID0geworCQkuaGFuZGxlID0g
YmF0Y2hfY3JlYXRlKGk5MTUpLAorCX07CisJc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVy
MiBleGVjYnVmID0geworCQkuYnVmZmVyc19wdHIgPSB0b191c2VyX3BvaW50ZXIoJmJhdGNoKSwK
KwkJLmJ1ZmZlcl9jb3VudCA9IDEsCisJCS5yc3ZkMSA9IGN0eCwKKwl9OworCWlndF9zcGluX3Qg
KnNwaW47CisKKwlmb3IgKGludCBpID0gMDsgaSA8IEFSUkFZX1NJWkUocHJpb3JpdGllcyk7IGkr
KykgeworCQkvKiBBOiBzcGluIGZvcmV2ZXIgb24gZW5naW5lIDEgKi8KKwkJc2V0X2xvYWRfYmFs
YW5jZXIoaTkxNSwgY3R4LCBzaWJsaW5ncywgY291bnQsIE5VTEwpOworCQlpZiAocHJpb3JpdGll
c1tpXSA8IDApCisJCQlnZW1fY29udGV4dF9zZXRfcHJpb3JpdHkoaTkxNSwgY3R4LCBwcmlvcml0
aWVzW2ldKTsKKwkJc3BpbiA9IGlndF9zcGluX25ldyhpOTE1LAorCQkJCSAgICAuY3R4ID0gY3R4
LAorCQkJCSAgICAuZW5naW5lID0gMSwKKwkJCQkgICAgLmZsYWdzID0gKElHVF9TUElOX1BPTExf
UlVOIHwKKwkJCQkJICAgICAgSUdUX1NQSU5fRkVOQ0VfT1VUKSk7CisJCWlndF9zcGluX2J1c3l3
YWl0X3VudGlsX3N0YXJ0ZWQoc3Bpbik7CisJCWdlbV9jb250ZXh0X3NldF9wcmlvcml0eShpOTE1
LCBjdHgsIDApOworCisJCS8qCisJCSAqIE5vdGUgd2UgcmVwbGFjZSB0aGUgdGltZWxpbmVzIGJl
dHdlZW4gZWFjaCBleGVjYnVmLCBzbworCQkgKiB0aGF0IGFueSBwYWlyIG9mIHJlcXVlc3RzIG9u
IHRoZSBzYW1lIGVuZ2luZSBjb3VsZCBiZQorCQkgKiByZS1vcmRlcmVkIGJ5IHRoZSBzY2hlZHVs
ZXIgLS0gaWYgdGhlIGRlcGVuZGVuY3kgdHJhY2tpbmcKKwkJICogaXMgc3VicGFyLgorCQkgKi8K
KworCQkvKiBCOiB3YWl0cyBmb3IgQSBvbiBlbmdpbmUgMSAqLworCQlzZXRfbG9hZF9iYWxhbmNl
cihpOTE1LCBjdHgsIHNpYmxpbmdzLCBjb3VudCwgTlVMTCk7CisJCWV4ZWNidWYucnN2ZDIgPSBz
cGluLT5vdXRfZmVuY2U7CisJCWV4ZWNidWYuZmxhZ3MgPSBJOTE1X0VYRUNfRkVOQ0VfSU4gfCBJ
OTE1X0VYRUNfRkVOQ0VfT1VUOworCQlleGVjYnVmLmZsYWdzIHw9IDE7IC8qIHNhbWUgZW5naW5l
IGFzIHNwaW5uZXIgKi8KKwkJZ2VtX2V4ZWNidWZfd3IoaTkxNSwgJmV4ZWNidWYpOworCisJCS8q
IEInOiBydW4gaW4gcGFyYWxsZWwgd2l0aCBCIG9uIGVuZ2luZSAyLCBpLmUuIG5vdCBiZWZvcmUg
QSEgKi8KKwkJaWYgKHByaW9yaXRpZXNbaV0gPiAwKQorCQkJZ2VtX2NvbnRleHRfc2V0X3ByaW9y
aXR5KGk5MTUsIGN0eCwgcHJpb3JpdGllc1tpXSk7CisJCXNldF9sb2FkX2JhbGFuY2VyKGk5MTUs
IGN0eCwgc2libGluZ3MsIGNvdW50LCBOVUxMKTsKKwkJZXhlY2J1Zi5mbGFncyA9IEk5MTVfRVhF
Q19GRU5DRV9TVUJNSVQgfCBJOTE1X0VYRUNfRkVOQ0VfT1VUOworCQlleGVjYnVmLmZsYWdzIHw9
IDI7IC8qIG9wcG9zaXRlIGVuZ2luZSB0byBzcGlubmVyICovCisJCWV4ZWNidWYucnN2ZDIgPj49
IDMyOworCQlnZW1fZXhlY2J1Zl93cihpOTE1LCAmZXhlY2J1Zik7CisJCWdlbV9jb250ZXh0X3Nl
dF9wcmlvcml0eShpOTE1LCBjdHgsIDApOworCisJCS8qIFdhaXQgZm9yIGFueSBtYWdpYyB0aW1l
c2xpY2luZyBvciBwcmVlbXB0aW9ucy4uLiAqLworCQlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vf
d2FpdChleGVjYnVmLnJzdmQyID4+IDMyLCAxMDAwKSwKKwkJCSAgICAgIC1FVElNRSk7CisKKwkJ
aWd0X2RlYnVnZnNfZHVtcChpOTE1LCAiaTkxNV9lbmdpbmVfaW5mbyIpOworCisJCS8qCisJCSAq
IC4uLiB3aGljaCBzaG91bGQgbm90IGhhdmUgaGFwcGVuZWQsIHNvIGV2ZXJ5dGhpbmcgaXMgc3Rp
bGwKKwkJICogd2FpdGluZyBvbiB0aGUgc3Bpbm5lcgorCQkgKi8KKwkJaWd0X2Fzc2VydF9lcShz
eW5jX2ZlbmNlX3N0YXR1cyhzcGluLT5vdXRfZmVuY2UpLCAwKTsKKwkJaWd0X2Fzc2VydF9lcShz
eW5jX2ZlbmNlX3N0YXR1cyhleGVjYnVmLnJzdmQyICYgMHhmZmZmZmZmZiksIDApOworCQlpZ3Rf
YXNzZXJ0X2VxKHN5bmNfZmVuY2Vfc3RhdHVzKGV4ZWNidWYucnN2ZDIgPj4gMzIpLCAwKTsKKwor
CQlpZ3Rfc3Bpbl9mcmVlKGk5MTUsIHNwaW4pOworCQlnZW1fc3luYyhpOTE1LCBiYXRjaC5oYW5k
bGUpOworCisJCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV9zdGF0dXMoZXhlY2J1Zi5yc3ZkMiAm
IDB4ZmZmZmZmZmYpLCAxKTsKKwkJaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3N0YXR1cyhleGVj
YnVmLnJzdmQyID4+IDMyKSwgMSk7CisKKwkJY2xvc2UoZXhlY2J1Zi5yc3ZkMik7CisJCWNsb3Nl
KGV4ZWNidWYucnN2ZDIgPj4gMzIpOworCX0KKworCWdlbV9jbG9zZShpOTE1LCBiYXRjaC5oYW5k
bGUpOworfQorCiBzdGF0aWMgdm9pZCBib25kZWRfY2hhaW4oaW50IGk5MTUpCiB7CiAJdWludDMy
X3QgY3R4OwpAQCAtOTUxLDggKzEwMzAsMTAgQEAgc3RhdGljIHZvaWQgYm9uZGVkX2NoYWluKGlu
dCBpOTE1KQogCQl1bnNpZ25lZCBpbnQgY291bnQ7CiAKIAkJc2libGluZ3MgPSBsaXN0X2VuZ2lu
ZXMoaTkxNSwgMXUgPDwgY2xhc3MsICZjb3VudCk7Ci0JCWlmIChjb3VudCA+IDEpCisJCWlmIChj
b3VudCA+IDEpIHsKIAkJCV9fYm9uZGVkX2NoYWluKGk5MTUsIGN0eCwgc2libGluZ3MsIGNvdW50
KTsKKwkJCV9fYm9uZGVkX2NoYWluX2ludihpOTE1LCBjdHgsIHNpYmxpbmdzLCBjb3VudCk7CisJ
CX0KIAkJZnJlZShzaWJsaW5ncyk7CiAJfQogCi0tIAoyLjI0LjAKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50
ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0278D30614B
	for <lists+intel-gfx@lfdr.de>; Wed, 27 Jan 2021 17:53:04 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6E6E46E85C;
	Wed, 27 Jan 2021 16:53:00 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 514B16E83A
 for <intel-gfx@lists.freedesktop.org>; Wed, 27 Jan 2021 16:52:56 +0000 (UTC)
IronPort-SDR: 6uqT0Hy4V4qVtKayxLzW6hmROcvCbSguGx0GYIx8c91HXmRrPOH11hxPLGi3T7TbO8r5G5N4Vk
 74JdhxKZ4/NQ==
X-IronPort-AV: E=McAfee;i="6000,8403,9877"; a="180176955"
X-IronPort-AV: E=Sophos;i="5.79,380,1602572400"; d="scan'208";a="180176955"
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by orsmga103.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 27 Jan 2021 08:52:56 -0800
IronPort-SDR: HH0+KTXFbxrumPTVW8b50pHEXj9Et48YZ0ocNSkB6WHcvurJsA//+nbkcs1sBJzZSEJZ30lmMF
 Hl3SPRkHB4FA==
X-IronPort-AV: E=Sophos;i="5.79,380,1602572400"; d="scan'208";a="578211822"
Received: from reynol4x-mobl.amr.corp.intel.com (HELO josouza-mobl2.intel.com)
 ([10.255.78.69])
 by fmsmga005-auth.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 27 Jan 2021 08:52:54 -0800
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 27 Jan 2021 08:54:00 -0800
Message-Id: <20210127165402.117829-2-jose.souza@intel.com>
X-Mailer: git-send-email 2.30.0
In-Reply-To: <20210127165402.117829-1-jose.souza@intel.com>
References: <20210127165402.117829-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 2/4] drm/i915/gen11+: Only load DRAM
 information from pcode
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VXAgdG8gbm93IHdlIHdlcmUgcmVhZGluZyBzb21lIERSQU0gaW5mb3JtYXRpb24gZnJvbSBNQ0hC
QVIgcmVnaXN0ZXIKYW5kIGZyb20gcGNvZGUgd2hhdCBpcyBhbHJlYWR5IG5vdCBnb29kIGJ1dCBz
b21lIEdFTjEyKFRHTC1IIGFuZCBBREwtUykKcGxhdGZvcm1zIGhhdmUgTUNIQkFSIERSQU0gaW5m
b3JtYXRpb24gaW4gZGlmZmVyZW50IG9mZnNldHMuCgpUaGlzIHdhcyBub3RpZmllZCB0byBIVyB0
ZWFtIHRoYXQgZGVjaWRlZCB0aGF0IHRoZSBiZXN0IGFsdGVybmF0aXZlIGlzCmFsd2F5cyBhcHBs
eSB0aGUgMTZnYl9kaW1tIHdhdGVybWFyayBhZGp1c3RtZW50IGZvciBHRU4xMisgcGxhdGZvcm1z
CmFuZCByZWFkIHRoZSByZW1hbmluZyBEUkFNIGluZm9ybWF0aW9uIG5lZWRlZCB0byBvdGhlciBk
aXNwbGF5CnByb2dyYW1taW5nIGZyb20gcGNvZGUuCgpTbyBoZXJlIG1vdmluZyB0aGUgRFJBTSBw
Y29kZSBmdW5jdGlvbiB0byBpbnRlbF9kcmFtLmMsIHJlbW92aW5nCnRoZSBkdXBsaWNhdGVkIGZp
ZWxkcyBmcm9tIGludGVsX3Fndl9pbmZvLCBzZXR0aW5nIGFuZCB1c2luZwppbmZvcm1hdGlvbiBm
cm9tIGRyYW1faW5mby4KCnYyOgotIGJyaW5nIGJhY2sgbnVtX3BvaW50cyB0byBpbnRlbF9xZ3Zf
aW5mbyBhcyBudW1fcWd2X3BvaW50IGNhbiBiZQpvdmVyd3JpdHRlbiBpbiBpY2xfZ2V0X3Fndl9w
b2ludHMoKQotIGFkZCBnZW4xMl9nZXRfZHJhbV9pbmZvKCkgYW5kIHNpbXBsaWZ5IGdlbjExX2dl
dF9kcmFtX2luZm8oKQoKU2lnbmVkLW9mZi1ieTogSm9zw6kgUm9iZXJ0byBkZSBTb3V6YSA8am9z
ZS5zb3V6YUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9idy5jIHwgODAgKysrLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Rydi5jICAgICAgICAgfCAgNSArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuaCAgICAgICAgIHwgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJhbS5jICAg
ICAgIHwgODIgKysrKysrKysrKysrKysrKysrKysrKysrLQogNCBmaWxlcyBjaGFuZ2VkLCA5MyBp
bnNlcnRpb25zKCspLCA3NSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2J3LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2J3LmMKaW5kZXggYmQwNjA0MDRkMjQ5Li40YjVhMzBhYzg0YmMgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYncuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2J3LmMKQEAgLTIwLDc2ICsyMCw5IEBAIHN0cnVjdCBp
bnRlbF9xZ3ZfcG9pbnQgewogc3RydWN0IGludGVsX3Fndl9pbmZvIHsKIAlzdHJ1Y3QgaW50ZWxf
cWd2X3BvaW50IHBvaW50c1tJOTE1X05VTV9RR1ZfUE9JTlRTXTsKIAl1OCBudW1fcG9pbnRzOwot
CXU4IG51bV9jaGFubmVsczsKIAl1OCB0X2JsOwotCWVudW0gaW50ZWxfZHJhbV90eXBlIGRyYW1f
dHlwZTsKIH07CiAKLXN0YXRpYyBpbnQgaWNsX3Bjb2RlX3JlYWRfbWVtX2dsb2JhbF9pbmZvKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKLQkJCQkJICBzdHJ1Y3QgaW50ZWxfcWd2
X2luZm8gKnFpKQotewotCXUzMiB2YWwgPSAwOwotCWludCByZXQ7Ci0KLQlyZXQgPSBzYW5keWJy
aWRnZV9wY29kZV9yZWFkKGRldl9wcml2LAotCQkJCSAgICAgSUNMX1BDT0RFX01FTV9TVUJTWVNZ
U1RFTV9JTkZPIHwKLQkJCQkgICAgIElDTF9QQ09ERV9NRU1fU1NfUkVBRF9HTE9CQUxfSU5GTywK
LQkJCQkgICAgICZ2YWwsIE5VTEwpOwotCWlmIChyZXQpCi0JCXJldHVybiByZXQ7Ci0KLQlpZiAo
SVNfR0VOKGRldl9wcml2LCAxMikpIHsKLQkJc3dpdGNoICh2YWwgJiAweGYpIHsKLQkJY2FzZSAw
OgotCQkJcWktPmRyYW1fdHlwZSA9IElOVEVMX0RSQU1fRERSNDsKLQkJCWJyZWFrOwotCQljYXNl
IDM6Ci0JCQlxaS0+ZHJhbV90eXBlID0gSU5URUxfRFJBTV9MUEREUjQ7Ci0JCQlicmVhazsKLQkJ
Y2FzZSA0OgotCQkJcWktPmRyYW1fdHlwZSA9IElOVEVMX0RSQU1fRERSMzsKLQkJCWJyZWFrOwot
CQljYXNlIDU6Ci0JCQlxaS0+ZHJhbV90eXBlID0gSU5URUxfRFJBTV9MUEREUjM7Ci0JCQlicmVh
azsKLQkJZGVmYXVsdDoKLQkJCU1JU1NJTkdfQ0FTRSh2YWwgJiAweGYpOwotCQkJYnJlYWs7Ci0J
CX0KLQl9IGVsc2UgaWYgKElTX0dFTihkZXZfcHJpdiwgMTEpKSB7Ci0JCXN3aXRjaCAodmFsICYg
MHhmKSB7Ci0JCWNhc2UgMDoKLQkJCXFpLT5kcmFtX3R5cGUgPSBJTlRFTF9EUkFNX0REUjQ7Ci0J
CQlicmVhazsKLQkJY2FzZSAxOgotCQkJcWktPmRyYW1fdHlwZSA9IElOVEVMX0RSQU1fRERSMzsK
LQkJCWJyZWFrOwotCQljYXNlIDI6Ci0JCQlxaS0+ZHJhbV90eXBlID0gSU5URUxfRFJBTV9MUERE
UjM7Ci0JCQlicmVhazsKLQkJY2FzZSAzOgotCQkJcWktPmRyYW1fdHlwZSA9IElOVEVMX0RSQU1f
TFBERFI0OwotCQkJYnJlYWs7Ci0JCWRlZmF1bHQ6Ci0JCQlNSVNTSU5HX0NBU0UodmFsICYgMHhm
KTsKLQkJCWJyZWFrOwotCQl9Ci0JfSBlbHNlIHsKLQkJTUlTU0lOR19DQVNFKElOVEVMX0dFTihk
ZXZfcHJpdikpOwotCQlxaS0+ZHJhbV90eXBlID0gSU5URUxfRFJBTV9MUEREUjM7IC8qIENvbnNl
cnZhdGl2ZSBkZWZhdWx0ICovCi0JfQotCi0JcWktPm51bV9jaGFubmVscyA9ICh2YWwgJiAweGYw
KSA+PiA0OwotCXFpLT5udW1fcG9pbnRzID0gKHZhbCAmIDB4ZjAwKSA+PiA4OwotCi0JaWYgKElT
X0dFTihkZXZfcHJpdiwgMTIpKQotCQlxaS0+dF9ibCA9IHFpLT5kcmFtX3R5cGUgPT0gSU5URUxf
RFJBTV9ERFI0ID8gNCA6IDE2OwotCWVsc2UgaWYgKElTX0dFTihkZXZfcHJpdiwgMTEpKQotCQlx
aS0+dF9ibCA9IHFpLT5kcmFtX3R5cGUgPT0gSU5URUxfRFJBTV9ERFI0ID8gNCA6IDg7Ci0KLQly
ZXR1cm4gMDsKLX0KLQogc3RhdGljIGludCBpY2xfcGNvZGVfcmVhZF9xZ3ZfcG9pbnRfaW5mbyhz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCQkJCSBzdHJ1Y3QgaW50ZWxfcWd2
X3BvaW50ICpzcCwKIAkJCQkJIGludCBwb2ludCkKQEAgLTEzOSwxMSArNzIsMTUgQEAgaW50IGlj
bF9wY29kZV9yZXN0cmljdF9xZ3ZfcG9pbnRzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiwKIHN0YXRpYyBpbnQgaWNsX2dldF9xZ3ZfcG9pbnRzKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiwKIAkJCSAgICAgIHN0cnVjdCBpbnRlbF9xZ3ZfaW5mbyAqcWkpCiB7CisJ
Y29uc3Qgc3RydWN0IGRyYW1faW5mbyAqZHJhbV9pbmZvID0gJmRldl9wcml2LT5kcmFtX2luZm87
CiAJaW50IGksIHJldDsKIAotCXJldCA9IGljbF9wY29kZV9yZWFkX21lbV9nbG9iYWxfaW5mbyhk
ZXZfcHJpdiwgcWkpOwotCWlmIChyZXQpCi0JCXJldHVybiByZXQ7CisJcWktPm51bV9wb2ludHMg
PSBkcmFtX2luZm8tPm51bV9xZ3ZfcG9pbnRzOworCisJaWYgKElTX0dFTihkZXZfcHJpdiwgMTIp
KQorCQlxaS0+dF9ibCA9IGRldl9wcml2LT5kcmFtX2luZm8udHlwZSA9PSBJTlRFTF9EUkFNX0RE
UjQgPyA0IDogMTY7CisJZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCAxMSkpCisJCXFpLT50X2Js
ID0gZGV2X3ByaXYtPmRyYW1faW5mby50eXBlID09IElOVEVMX0RSQU1fRERSNCA/IDQgOiA4Owog
CiAJaWYgKGRybV9XQVJOX09OKCZkZXZfcHJpdi0+ZHJtLAogCQkJcWktPm51bV9wb2ludHMgPiBB
UlJBWV9TSVpFKHFpLT5wb2ludHMpKSkKQEAgLTIwOSw3ICsxNDYsNyBAQCBzdGF0aWMgaW50IGlj
bF9nZXRfYndfaW5mbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGNvbnN0IHN0
cnVjdCBpbnRlbAogewogCXN0cnVjdCBpbnRlbF9xZ3ZfaW5mbyBxaSA9IHt9OwogCWJvb2wgaXNf
eV90aWxlID0gdHJ1ZTsgLyogYXNzdW1lIHkgdGlsZSBtYXkgYmUgdXNlZCAqLwotCWludCBudW1f
Y2hhbm5lbHM7CisJaW50IG51bV9jaGFubmVscyA9IGRldl9wcml2LT5kcmFtX2luZm8ubnVtX2No
YW5uZWxzOwogCWludCBkZWludGVybGVhdmU7CiAJaW50IGlwcWRlcHRoLCBpcHFkZXB0aHBjaDsK
IAlpbnQgZGNsa19tYXg7CkBAIC0yMjIsNyArMTU5LDYgQEAgc3RhdGljIGludCBpY2xfZ2V0X2J3
X2luZm8oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBjb25zdCBzdHJ1Y3QgaW50
ZWwKIAkJCSAgICAiRmFpbGVkIHRvIGdldCBtZW1vcnkgc3Vic3lzdGVtIGluZm9ybWF0aW9uLCBp
Z25vcmluZyBiYW5kd2lkdGggbGltaXRzIik7CiAJCXJldHVybiByZXQ7CiAJfQotCW51bV9jaGFu
bmVscyA9IHFpLm51bV9jaGFubmVsczsKIAogCWRlaW50ZXJsZWF2ZSA9IERJVl9ST1VORF9VUChu
dW1fY2hhbm5lbHMsIGlzX3lfdGlsZSA/IDQgOiAyKTsKIAlkY2xrX21heCA9IGljbF9zYWd2X21h
eF9kY2xrKCZxaSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwppbmRleCAzNmUwNzNjNGJjMDYuLmFl
YzBlODcwZGMyNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCkBAIC02MTUsMTQgKzYxNSwxNSBA
QCBzdGF0aWMgaW50IGk5MTVfZHJpdmVyX2h3X3Byb2JlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdikKIAkJZ290byBlcnJfbXNpOwogCiAJaW50ZWxfb3ByZWdpb25fc2V0dXAoZGV2
X3ByaXYpOworCisJaW50ZWxfcGNvZGVfaW5pdChkZXZfcHJpdik7CisKIAkvKgogCSAqIEZpbGwg
dGhlIGRyYW0gc3RydWN0dXJlIHRvIGdldCB0aGUgc3lzdGVtIGRyYW0gaW5mby4gVGhpcyB3aWxs
IGJlCiAJICogdXNlZCBmb3IgbWVtb3J5IGxhdGVuY3kgY2FsY3VsYXRpb24uCiAJICovCiAJaW50
ZWxfZHJhbV9kZXRlY3QoZGV2X3ByaXYpOwogCi0JaW50ZWxfcGNvZGVfaW5pdChkZXZfcHJpdik7
Ci0KIAlpbnRlbF9id19pbml0X2h3KGRldl9wcml2KTsKIAogCXJldHVybiAwOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZHJ2LmgKaW5kZXggNGU4ZTE1MWM3YWRlLi44MDIyN2Q0N2I1Y2IgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9kcnYuaApAQCAtMTEzOCw2ICsxMTM4LDcgQEAgc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgewogCQkJSU5URUxfRFJBTV9MUEREUjMsCiAJCQlJTlRFTF9EUkFNX0xQRERSNAogCQl9IHR5
cGU7CisJCXU4IG51bV9xZ3ZfcG9pbnRzOwogCX0gZHJhbV9pbmZvOwogCiAJc3RydWN0IGludGVs
X2J3X2luZm8gewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJhbS5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJhbS5jCmluZGV4IDY5NGZiZDhjOWNkNC4u
NGQ1YWIyMDZlYWNiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcmFt
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJhbS5jCkBAIC01LDYgKzUsNyBA
QAogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJpbnRlbF9kcmFtLmgiCisjaW5j
bHVkZSAiaW50ZWxfc2lkZWJhbmQuaCIKIAogc3RydWN0IGRyYW1fZGltbV9pbmZvIHsKIAl1MTYg
c2l6ZTsKQEAgLTQwOCw2ICs0MDksODEgQEAgc3RhdGljIGludCBieHRfZ2V0X2RyYW1faW5mbyhz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlyZXR1cm4gMDsKIH0KIAorc3RhdGljIGlu
dCBpY2xfcGNvZGVfcmVhZF9tZW1fZ2xvYmFsX2luZm8oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KQoreworCXN0cnVjdCBkcmFtX2luZm8gKmRyYW1faW5mbyA9ICZkZXZfcHJpdi0+
ZHJhbV9pbmZvOworCXUzMiB2YWwgPSAwOworCWludCByZXQ7CisKKwlyZXQgPSBzYW5keWJyaWRn
ZV9wY29kZV9yZWFkKGRldl9wcml2LAorCQkJCSAgICAgSUNMX1BDT0RFX01FTV9TVUJTWVNZU1RF
TV9JTkZPIHwKKwkJCQkgICAgIElDTF9QQ09ERV9NRU1fU1NfUkVBRF9HTE9CQUxfSU5GTywKKwkJ
CQkgICAgICZ2YWwsIE5VTEwpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwlpZiAoSVNf
R0VOKGRldl9wcml2LCAxMikpIHsKKwkJc3dpdGNoICh2YWwgJiAweGYpIHsKKwkJY2FzZSAwOgor
CQkJZHJhbV9pbmZvLT50eXBlID0gSU5URUxfRFJBTV9ERFI0OworCQkJYnJlYWs7CisJCWNhc2Ug
MzoKKwkJCWRyYW1faW5mby0+dHlwZSA9IElOVEVMX0RSQU1fTFBERFI0OworCQkJYnJlYWs7CisJ
CWNhc2UgNDoKKwkJCWRyYW1faW5mby0+dHlwZSA9IElOVEVMX0RSQU1fRERSMzsKKwkJCWJyZWFr
OworCQljYXNlIDU6CisJCQlkcmFtX2luZm8tPnR5cGUgPSBJTlRFTF9EUkFNX0xQRERSMzsKKwkJ
CWJyZWFrOworCQlkZWZhdWx0OgorCQkJTUlTU0lOR19DQVNFKHZhbCAmIDB4Zik7CisJCQlyZXR1
cm4gLTE7CisJCX0KKwl9IGVsc2UgeworCQlzd2l0Y2ggKHZhbCAmIDB4ZikgeworCQljYXNlIDA6
CisJCQlkcmFtX2luZm8tPnR5cGUgPSBJTlRFTF9EUkFNX0REUjQ7CisJCQlicmVhazsKKwkJY2Fz
ZSAxOgorCQkJZHJhbV9pbmZvLT50eXBlID0gSU5URUxfRFJBTV9ERFIzOworCQkJYnJlYWs7CisJ
CWNhc2UgMjoKKwkJCWRyYW1faW5mby0+dHlwZSA9IElOVEVMX0RSQU1fTFBERFIzOworCQkJYnJl
YWs7CisJCWNhc2UgMzoKKwkJCWRyYW1faW5mby0+dHlwZSA9IElOVEVMX0RSQU1fTFBERFI0Owor
CQkJYnJlYWs7CisJCWRlZmF1bHQ6CisJCQlNSVNTSU5HX0NBU0UodmFsICYgMHhmKTsKKwkJCXJl
dHVybiAtMTsKKwkJfQorCX0KKworCWRyYW1faW5mby0+bnVtX2NoYW5uZWxzID0gKHZhbCAmIDB4
ZjApID4+IDQ7CisJZHJhbV9pbmZvLT5udW1fcWd2X3BvaW50cyA9ICh2YWwgJiAweGYwMCkgPj4g
ODsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IGdlbjExX2dldF9kcmFtX2luZm8oc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCit7CisJaW50IHJldCA9IHNrbF9nZXRfZHJhbV9p
bmZvKGk5MTUpOworCisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCXJldHVybiBpY2xfcGNv
ZGVfcmVhZF9tZW1fZ2xvYmFsX2luZm8oaTkxNSk7Cit9CisKK3N0YXRpYyBpbnQgZ2VuMTJfZ2V0
X2RyYW1faW5mbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKK3sKKwkvKiBBbHdheXMg
bmVlZGVkIGZvciBHRU4xMisgKi8KKwlpOTE1LT5kcmFtX2luZm8uaXNfMTZnYl9kaW1tID0gdHJ1
ZTsKKworCXJldHVybiBpY2xfcGNvZGVfcmVhZF9tZW1fZ2xvYmFsX2luZm8oaTkxNSk7Cit9CisK
IHZvaWQgaW50ZWxfZHJhbV9kZXRlY3Qoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB7
CiAJc3RydWN0IGRyYW1faW5mbyAqZHJhbV9pbmZvID0gJmk5MTUtPmRyYW1faW5mbzsKQEAgLTQy
Myw3ICs0OTksMTEgQEAgdm9pZCBpbnRlbF9kcmFtX2RldGVjdChzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSkKIAlpZiAoSU5URUxfR0VOKGk5MTUpIDwgOSB8fCAhSEFTX0RJU1BMQVkoaTkx
NSkpCiAJCXJldHVybjsKIAotCWlmIChJU19HRU45X0xQKGk5MTUpKQorCWlmIChJTlRFTF9HRU4o
aTkxNSkgPj0gMTIpCisJCXJldCA9IGdlbjEyX2dldF9kcmFtX2luZm8oaTkxNSk7CisJZWxzZSBp
ZiAoSU5URUxfR0VOKGk5MTUpID49IDExKQorCQlyZXQgPSBnZW4xMV9nZXRfZHJhbV9pbmZvKGk5
MTUpOworCWVsc2UgaWYgKElTX0dFTjlfTFAoaTkxNSkpCiAJCXJldCA9IGJ4dF9nZXRfZHJhbV9p
bmZvKGk5MTUpOwogCWVsc2UKIAkJcmV0ID0gc2tsX2dldF9kcmFtX2luZm8oaTkxNSk7Ci0tIAoy
LjMwLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCklu
dGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

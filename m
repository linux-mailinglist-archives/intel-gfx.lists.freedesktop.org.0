Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1CFE8F7A4B
	for <lists+intel-gfx@lfdr.de>; Mon, 11 Nov 2019 18:54:36 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 19F416E9AB;
	Mon, 11 Nov 2019 17:54:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8E3C86E9AB;
 Mon, 11 Nov 2019 17:54:31 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 11 Nov 2019 09:54:30 -0800
X-IronPort-AV: E=Sophos;i="5.68,293,1569308400"; d="scan'208";a="197744478"
Received: from mpotanix-mobl2.ccr.corp.intel.com (HELO [10.252.20.183])
 ([10.252.20.183])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 11 Nov 2019 09:54:29 -0800
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191108204932.6197-1-chris@chris-wilson.co.uk>
 <20191108204932.6197-2-chris@chris-wilson.co.uk>
 <d3ebc198-d18c-24ac-d99c-ae3874723dc9@linux.intel.com>
 <157349149542.28106.5101096590588614708@skylake-alporthouse-com>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <3839657f-a3ac-ea89-fa4a-d7a0aaa03139@linux.intel.com>
Date: Mon, 11 Nov 2019 17:54:27 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <157349149542.28106.5101096590588614708@skylake-alporthouse-com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [igt-dev] [PATCH i-g-t 2/3] i915/gem_userptr_blits:
 Exercise userptr + userfaultfd
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDExLzExLzIwMTkgMTY6NTgsIENocmlzIFdpbHNvbiB3cm90ZToKPiBRdW90aW5nIFR2cnRr
byBVcnN1bGluICgyMDE5LTExLTExIDE2OjQ4OjE0KQo+Pgo+PiBPbiAwOC8xMS8yMDE5IDIwOjQ5
LCBDaHJpcyBXaWxzb24gd3JvdGU6Cj4+PiBSZWdpc3RlciBhIHVzZXJzcGFjZSBmYXVsdCBoYW5k
bGVyIGZvciBhIG1lbW9yeSByZWdpb24gdGhhdCB3ZSBhbHNvIHBhc3MKPj4+IHRvIHRoZSBHUFUg
dmlhIHVzZXJwdHIsIGFuZCBtYWtlIHN1cmUgdGhlIHBhZ2VmYXVsdCBpcyBwcm9wZXJseSBzZXJ2
aWNlZAo+Pj4gYmVmb3JlIHdlIGV4ZWN1dGUuCj4+Pgo+Pj4gU2lnbmVkLW9mZi1ieTogQ2hyaXMg
V2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Cj4+PiBDYzogVHZydGtvIFVyc3VsaW4g
PHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KPj4+IC0tLQo+Pj4gICAgdGVzdHMvaTkxNS9nZW1f
dXNlcnB0cl9ibGl0cy5jIHwgMTE5ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLQo+
Pj4gICAgMSBmaWxlIGNoYW5nZWQsIDExOCBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCj4+
Pgo+Pj4gZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX3VzZXJwdHJfYmxpdHMuYyBiL3Rlc3Rz
L2k5MTUvZ2VtX3VzZXJwdHJfYmxpdHMuYwo+Pj4gaW5kZXggMTFkNmY0YTFjLi43NzRhOWY5MmMg
MTAwNjQ0Cj4+PiAtLS0gYS90ZXN0cy9pOTE1L2dlbV91c2VycHRyX2JsaXRzLmMKPj4+ICsrKyBi
L3Rlc3RzL2k5MTUvZ2VtX3VzZXJwdHJfYmxpdHMuYwo+Pj4gQEAgLTM2LDYgKzM2LDggQEAKPj4+
ICAgICAqIFRoZSBnb2FsIGlzIHRvIHNpbXBseSBlbnN1cmUgdGhlIGJhc2ljcyB3b3JrLgo+Pj4g
ICAgICovCj4+PiAgICAKPj4+ICsjaW5jbHVkZSA8bGludXgvdXNlcmZhdWx0ZmQuaD4KPj4+ICsK
Pj4+ICAgICNpbmNsdWRlICJpZ3QuaCIKPj4+ICAgICNpbmNsdWRlIDxzdGRsaWIuaD4KPj4+ICAg
ICNpbmNsdWRlIDxzdGRpby5oPgo+Pj4gQEAgLTQ0LDkgKzQ2LDExIEBACj4+PiAgICAjaW5jbHVk
ZSA8aW50dHlwZXMuaD4KPj4+ICAgICNpbmNsdWRlIDxlcnJuby5oPgo+Pj4gICAgI2luY2x1ZGUg
PHNldGptcC5oPgo+Pj4gKyNpbmNsdWRlIDxzeXMvaW9jdGwuaD4KPj4+ICsjaW5jbHVkZSA8c3lz
L21tYW4uaD4KPj4+ICAgICNpbmNsdWRlIDxzeXMvc3RhdC5oPgo+Pj4gKyNpbmNsdWRlIDxzeXMv
c3lzY2FsbC5oPgo+Pj4gICAgI2luY2x1ZGUgPHN5cy90aW1lLmg+Cj4+PiAtI2luY2x1ZGUgPHN5
cy9tbWFuLmg+Cj4+PiAgICAjaW5jbHVkZSA8Z2xpYi5oPgo+Pj4gICAgI2luY2x1ZGUgPHNpZ25h
bC5oPgo+Pj4gICAgI2luY2x1ZGUgPHB0aHJlYWQuaD4KPj4+IEBAIC0xODMxLDYgKzE4MzUsMTE2
IEBAIHN0YXRpYyB2b2lkIHRlc3RfaW52YWxpZGF0ZV9jbG9zZV9yYWNlKGludCBmZCwgYm9vbCBv
dmVybGFwKQo+Pj4gICAgICAgIGZyZWUodF9kYXRhLnB0cik7Cj4+PiAgICB9Cj4+PiAgICAKPj4+
ICtzdHJ1Y3QgdWZkX3RocmVhZCB7Cj4+PiArICAgICB1aW50MzJfdCAqcGFnZTsKPj4+ICsgICAg
IGludCBpOTE1Owo+Pj4gK307Cj4+PiArCj4+PiArc3RhdGljIHVpbnQzMl90IGNyZWF0ZV9wYWdl
KGludCBpOTE1LCB2b2lkICpwYWdlKQo+Pj4gK3sKPj4+ICsgICAgIHVpbnQzMl90IGhhbmRsZTsK
Pj4+ICsKPj4+ICsgICAgIGdlbV91c2VycHRyKGk5MTUsIHBhZ2UsIDQwOTYsIDAsIDAsICZoYW5k
bGUpOwo+Pj4gKyAgICAgcmV0dXJuIGhhbmRsZTsKPj4+ICt9Cj4+PiArCj4+PiArc3RhdGljIHVp
bnQzMl90IGNyZWF0ZV9iYXRjaChpbnQgaTkxNSkKPj4+ICt7Cj4+PiArICAgICBjb25zdCB1aW50
MzJfdCBiYmUgPSBNSV9CQVRDSF9CVUZGRVJfRU5EOwo+Pj4gKyAgICAgdWludDMyX3QgaGFuZGxl
Owo+Pj4gKwo+Pj4gKyAgICAgaGFuZGxlID0gZ2VtX2NyZWF0ZShpOTE1LCA0MDk2KTsKPj4+ICsg
ICAgIGdlbV93cml0ZShpOTE1LCBoYW5kbGUsIDAsICZiYmUsIHNpemVvZihiYmUpKTsKPj4+ICsK
Pj4+ICsgICAgIHJldHVybiBoYW5kbGU7Cj4+PiArfQo+Pj4gKwo+Pj4gK3N0YXRpYyB2b2lkICp1
ZmRfdGhyZWFkKHZvaWQgKmFyZykKPj4+ICt7Cj4+PiArICAgICBzdHJ1Y3QgdWZkX3RocmVhZCAq
dCA9IGFyZzsKPj4+ICsgICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY19vYmplY3QyIG9ialsy
XSA9IHsKPj4+ICsgICAgICAgICAgICAgeyAuaGFuZGxlID0gY3JlYXRlX3BhZ2UodC0+aTkxNSwg
dC0+cGFnZSkgfSwKPj4+ICsgICAgICAgICAgICAgeyAuaGFuZGxlID0gY3JlYXRlX2JhdGNoKHQt
Pmk5MTUpIH0sCj4+PiArICAgICB9Owo+Pj4gKyAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9leGVj
YnVmZmVyMiBlYiA9IHsKPj4+ICsgICAgICAgICAgICAgLmJ1ZmZlcnNfcHRyID0gdG9fdXNlcl9w
b2ludGVyKG9iaiksCj4+PiArICAgICAgICAgICAgIC5idWZmZXJfY291bnQgPSBBUlJBWV9TSVpF
KG9iaiksCj4+PiArICAgICB9Owo+Pj4gKwo+Pj4gKyAgICAgaWd0X2RlYnVnKCJzdWJtaXR0aW5n
IGZhdWx0XG4iKTsKPj4+ICsgICAgIGdlbV9leGVjYnVmKHQtPmk5MTUsICZlYik7Cj4+PiArICAg
ICBnZW1fc3luYyh0LT5pOTE1LCBvYmpbMV0uaGFuZGxlKTsKPj4+ICsKPj4+ICsgICAgIGZvciAo
aW50IGkgPSAwOyBpIDwgQVJSQVlfU0laRShvYmopOyBpKyspCj4+PiArICAgICAgICAgICAgIGdl
bV9jbG9zZSh0LT5pOTE1LCBvYmpbaV0uaGFuZGxlKTsKPj4+ICsKPj4+ICsgICAgIHQtPmk5MTUg
PSAtMTsKPj4+ICsgICAgIHJldHVybiBOVUxMOwo+Pj4gK30KPj4+ICsKPj4+ICtzdGF0aWMgaW50
IHVzZXJmYXVsdGZkKGludCBmbGFncykKPj4+ICt7Cj4+PiArICAgICByZXR1cm4gc3lzY2FsbChT
WVNfdXNlcmZhdWx0ZmQsIGZsYWdzKTsKPj4+ICt9Cj4+PiArCj4+PiArc3RhdGljIHZvaWQgdGVz
dF91c2VyZmF1bHQoaW50IGk5MTUpCj4+PiArewo+Pj4gKyAgICAgc3RydWN0IHVmZmRpb19hcGkg
YXBpID0geyAuYXBpID0gVUZGRF9BUEkgfTsKPj4+ICsgICAgIHN0cnVjdCB1ZmZkaW9fcmVnaXN0
ZXIgcmVnOwo+Pj4gKyAgICAgc3RydWN0IHVmZmRpb19jb3B5IGNvcHk7Cj4+PiArICAgICBzdHJ1
Y3QgdWZmZF9tc2cgbXNnOwo+Pj4gKyAgICAgc3RydWN0IHVmZF90aHJlYWQgdDsKPj4+ICsgICAg
IHB0aHJlYWRfdCB0aHJlYWQ7Cj4+PiArICAgICBjaGFyIHBvaXNvbls0MDk2XTsKPj4+ICsgICAg
IGludCB1ZmQ7Cj4+PiArCj4+PiArICAgICAvKgo+Pj4gKyAgICAgICogUmVnaXN0ZXIgYSBwYWdl
IHdpdGggdXNlcmZhdWx0ZmQsIGFuZCB3cmFwIHRoYXQgaW5zaWRlIGEgdXNlcnB0ciBiby4KPj4+
ICsgICAgICAqIFdoZW4gd2UgdHJ5IHRvIHVzZSBndXAgaW5zaWRlciB1c2VycHRyX2dldF9wYWdl
cywgaXQgd2lsbCB0cmlnZ2VyCj4+PiArICAgICAgKiBhIHBhZ2VmYXVsdCB0aGF0IGlzIHNlbnQg
dG8gdGhlIHVzZXJmYXVsdGZkIGZvciBzZXJ2aWNpbmcuIFRoaXMKPj4+ICsgICAgICAqIGlzIGFy
Yml0cmFyaWx5IHNsb3csIGFzIHRoZSBzdWJtaXNzaW9uIG11c3Qgd2FpdCB1bnRpbCB0aGUgZmF1
bHQKPj4+ICsgICAgICAqIGlzIHNlcnZpY2VkIGJ5IHRoZSB1c2Vyc3BhY2UgZmF1bHQgaGFuZGxl
ci4KPj4+ICsgICAgICAqLwo+Pj4gKwo+Pj4gKyAgICAgdWZkID0gdXNlcmZhdWx0ZmQoMCk7Cj4+
PiArICAgICBpZ3RfcmVxdWlyZV9mKHVmZCAhPSAtMSwgImtlcm5lbCBzdXBwb3J0IGZvciB1c2Vy
ZmF1bHRmZFxuIik7Cj4+PiArICAgICBpZ3RfcmVxdWlyZV9mKGlvY3RsKHVmZCwgVUZGRElPX0FQ
SSwgJmFwaSkgPT0gMCAmJiBhcGkuYXBpID09IFVGRkRfQVBJLAo+Pj4gKyAgICAgICAgICAgICAg
ICAgICAidXNlcmZhdWx0ZmQgQVBJIHYlbGxkOiVsbGRcbiIsIFVGRkRfQVBJLCBhcGkuYXBpKTsK
Pj4+ICsKPj4+ICsgICAgIHQuaTkxNSA9IGk5MTU7Cj4+PiArCj4+PiArICAgICB0LnBhZ2UgPSBt
bWFwKE5VTEwsIDQwOTYsIFBST1RfV1JJVEUsIE1BUF9TSEFSRUQgfCBNQVBfQU5PTiwgMCwgMCk7
Cj4+PiArICAgICBpZ3RfYXNzZXJ0KHQucGFnZSAhPSBNQVBfRkFJTEVEKTsKPj4+ICsKPj4+ICsg
ICAgIG1lbXNldCgmcmVnLCAwLCBzaXplb2YocmVnKSk7Cj4+PiArICAgICByZWcubW9kZSA9IFVG
RkRJT19SRUdJU1RFUl9NT0RFX01JU1NJTkc7Cj4+PiArICAgICByZWcucmFuZ2Uuc3RhcnQgPSB0
b191c2VyX3BvaW50ZXIodC5wYWdlKTsKPj4+ICsgICAgIHJlZy5yYW5nZS5sZW4gPSA0MDk2Owo+
Pj4gKyAgICAgZG9faW9jdGwodWZkLCBVRkZESU9fUkVHSVNURVIsICZyZWcpOwo+Pj4gKyAgICAg
aWd0X2Fzc2VydChyZWcuaW9jdGxzID09IFVGRkRfQVBJX1JBTkdFX0lPQ1RMUyk7Cj4+PiArCj4+
PiArICAgICBpZ3RfYXNzZXJ0KHB0aHJlYWRfY3JlYXRlKCZ0aHJlYWQsIE5VTEwsIHVmZF90aHJl
YWQsICZ0KSA9PSAwKTsKPj4+ICsKPj4+ICsgICAgIC8qIFdhaXQgZm9yIHRoZSBmYXVsdCAqLwo+
Pj4gKyAgICAgaWd0X2Fzc2VydF9lcShyZWFkKHVmZCwgJm1zZywgc2l6ZW9mKG1zZykpLCBzaXpl
b2YobXNnKSk7Cj4+PiArICAgICBpZ3RfYXNzZXJ0X2VxKG1zZy5ldmVudCwgVUZGRF9FVkVOVF9Q
QUdFRkFVTFQpOwo+Pj4gKyAgICAgaWd0X2Fzc2VydChmcm9tX3VzZXJfcG9pbnRlcihtc2cuYXJn
LnBhZ2VmYXVsdC5hZGRyZXNzKSA9PSB0LnBhZ2UpOwo+Pj4gKwo+Pj4gKyAgICAgLyogRmF1bHRp
bmcgdGhyZWFkIHJlbWFpbnMgYmxvY2tlZCAqLwo+Pj4gKyAgICAgaWd0X2Fzc2VydF9lcSh0Lmk5
MTUsIGk5MTUpOwo+Pgo+PiBUaGlzIGxvb2tzIGNvdWxkIGJlIGEgZmFsc2UgbmVnYXRpdmUgc2lu
Y2Ugbm90aGluZyBzYXlzIHRoZSB0aHJlYWQgaXMKPj4gbm90IGJsb2NrZWQganVzdCBub3QgZ290
IHJvdW5kIHJlc2V0dGluZyB0LT5pOTE1Lgo+IAo+IFRoZXJlJ3MgYSBnZW1fc3luYygpIGluIHRo
ZSB0aHJlYWQuIE91ciBnb2FsIGlzIHRoYXQgdGhlIHRocmVhZCBpcwo+IGJsb2NrZWQgKGVpdGhl
ciBhdCBzdWJtaXQgb3IgaW4gdGhlIHN5bmMpIHVudGlsIHdlIHNlcnZpY2UgdGhlIGZhdWx0LgoK
V2hhdCBJIG1lYW50IHdhcyBpdCBjb3VsZCBoYXZlIHBhc3NlZCBnZW1fZXhlY2J1ZiBhbmQgZ2Vt
X3N5bmMsIGp1c3Qgbm90IApnb3QgdG8gdGhlIHQtPmk5MTUgPSAtMSBsaW5lIHlldC4gQW0gSSBi
ZWluZyB0byBwZWRhbnRpYz8gTWF5YmUgdXNpbmcgCm91dHB1dCBmZW5jZSBhbmQgcGFzc2luZyBp
dCBiYWNrIHRvIHBhcmVudCB0aHJlYWQgd291bGQgYmUgZWFzaWVyPyAKUGFyZW50IHRoZW4gZG9l
cyBpZ3RfYXNzZXJ0X2VxKHBvbGwoZmQsIHNvbWVfdGltZW91dCksIDApLgo+Pj4gKyAgICAgbWVt
c2V0KCZjb3B5LCAwLCBzaXplb2YoY29weSkpOwo+Pj4gKyAgICAgY29weS5kc3QgPSBtc2cuYXJn
LnBhZ2VmYXVsdC5hZGRyZXNzOwo+Pj4gKyAgICAgY29weS5zcmMgPSB0b191c2VyX3BvaW50ZXIo
bWVtc2V0KHBvaXNvbiwgMHhjNSwgc2l6ZW9mKHBvaXNvbikpKTsKPj4+ICsgICAgIGNvcHkubGVu
ID0gNDA5NjsKPj4+ICsgICAgIGRvX2lvY3RsKHVmZCwgVUZGRElPX0NPUFksICZjb3B5KTsKPj4K
Pj4gV2hhdCBpcyB0aGUgcG9pbnQgb2YgcG9pc29uIGRhdGE/Cj4gCj4gSnVzdCBhIHRlbGwgdGFs
ZS4KPiAgIAo+PiBXb3VsZCBpdCB3b3JrIGJldHRlciB0byBoYXZlIGEgaGFuZ2luZyBiYXRjaCBy
ZWdpc3RlcmVkIHdpdGggdXNlcmZhdWx0Cj4+IGFuZCB0aGVuIHJlcGxhY2UgaXQgd2l0aCBhIHZh
bGlkIGJhdGNoIGhlcmU/IFRoYXQgd291bGQgZW5zdXJlIGV4ZWNidWYKPj4gd2FzICBibG9ja2Vk
IHVudGlsIHVzZXJmYXVsdCBoYW5kbGVyIGZpbmlzaGVzIG90aGVyd2lzZSB3ZSBnZXQgYSBHUFUg
aGFuZy4KPiAKPiBTdHJpY3RseSB3ZSBjYW4ndCB1c2UgdXNlcnB0ciBmb3IgdGhlIGJhdGNoIGl0
c2VsZiwgYXMgYWl1aSB0aGF0Cj4gcmVxdWlyZXMgTExDIGZvciB0aGUgQ1MgY29oZXJlbmN5LiBP
bmUgb2YgdGhlIGZvbGxvd2luZyB0ZXN0cyB1c2VzIHRoZQo+IHVzZXJmYXVsdCBoYW5kbGVyIGFz
IHRoZSBzeW5jIHBvaW50IGZvciByZXBsYWNpbmcgYSBwb2lzb25lZCBiYXRjaCB3aXRoCj4gYSB2
YWxpZCBvbmUsIHdpdGggdGhlIGludGVudGlvbiBvZiBsb29raW5nIGZvciB0aGUgR1BVIGhhbmcg
aWYgdGhlIGZhdWx0Cj4gd2FzIG1pc3NlZC4gVGhhdCdzIHRoZSB0ZXN0IEkgc3RhcnRlZCB3aXRo
LCBteSBnb2FsIGhlcmUgd2FzIHRvIGZvY3VzCj4gb24gdGhlIHVzZXJwdHIgKyB1c2VyZmF1bHQg
YXMgc2ltcGx5IGFzIEkgY291bGQ7IHNvIGdlbV9zeW5jKCkuCgpPa2F5IHRoYXQncyBmYWlyIHRo
ZW4uCgpSZWdhcmRzLAoKVHZydGtvCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeA==

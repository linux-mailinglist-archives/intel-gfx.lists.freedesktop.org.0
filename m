Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7098212D40
	for <lists+intel-gfx@lfdr.de>; Fri,  3 May 2019 14:11:57 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B556289DFB;
	Fri,  3 May 2019 12:11:55 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 12C5289DFC
 for <intel-gfx@lists.freedesktop.org>; Fri,  3 May 2019 12:11:54 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16440752-1500050 
 for multiple; Fri, 03 May 2019 12:52:28 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  3 May 2019 12:52:23 +0100
Message-Id: <20190503115225.30831-11-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190503115225.30831-1-chris@chris-wilson.co.uk>
References: <20190503115225.30831-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 11/13] drm/i915: Pass i915_sched_node around
 internally
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VG8gc2ltcGxpZnkgdGhlIG5leHQgcGF0Y2gsIHVwZGF0ZSBidW1wX3ByaW9yaXR5IGFuZCBzY2hl
ZHVsZSB0byBhY2NlcHQKdGhlIGludGVybmFsIGk5MTVfc2NoZWRfbmRvZSBkaXJlY3RseSBhbmQg
bm90IGV4cGVjdCBhIHJlcXVlc3QgcG9pbnRlci4KCmFkZC9yZW1vdmU6IDAvMCBncm93L3Nocmlu
azogMi8xIHVwL2Rvd246IDgvLTE1ICgtNykKRnVuY3Rpb24gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgb2xkICAgICBuZXcgICBkZWx0YQppOTE1X3NjaGVkdWxlX2J1bXBfcHJp
b3JpdHkgICAgICAgICAgICAgICAgICAxMDkgICAgIDExMyAgICAgICs0Cmk5MTVfc2NoZWR1bGUg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA1MCAgICAgIDU0ICAgICAgKzQKX19pOTE1
X3NjaGVkdWxlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOTIyICAgICA5MDcgICAgIC0x
NQoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2hlZHVsZXIuYyB8IDMzICsrKysrKysr
KysrKysrKy0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDE4IGluc2VydGlvbnMoKyksIDE1
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2No
ZWR1bGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxlci5jCmluZGV4IDRh
OTVjZjIyMDFhNy4uMzgwY2I3MzQzYTEwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3NjaGVkdWxlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NoZWR1
bGVyLmMKQEAgLTE4OSw3ICsxODksNyBAQCBzdGF0aWMgdm9pZCBraWNrX3N1Ym1pc3Npb24oc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCBpbnQgcHJpbykKIAl0YXNrbGV0X2hpX3NjaGVk
dWxlKCZlbmdpbmUtPmV4ZWNsaXN0cy50YXNrbGV0KTsKIH0KIAotc3RhdGljIHZvaWQgX19pOTE1
X3NjaGVkdWxlKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAorc3RhdGljIHZvaWQgX19pOTE1X3Nj
aGVkdWxlKHN0cnVjdCBpOTE1X3NjaGVkX25vZGUgKnJxLAogCQkJICAgIGNvbnN0IHN0cnVjdCBp
OTE1X3NjaGVkX2F0dHIgKmF0dHIpCiB7CiAJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5l
OwpAQCAtMjAzLDEzICsyMDMsMTMgQEAgc3RhdGljIHZvaWQgX19pOTE1X3NjaGVkdWxlKHN0cnVj
dCBpOTE1X3JlcXVlc3QgKnJxLAogCWxvY2tkZXBfYXNzZXJ0X2hlbGQoJnNjaGVkdWxlX2xvY2sp
OwogCUdFTV9CVUdfT04ocHJpbyA9PSBJOTE1X1BSSU9SSVRZX0lOVkFMSUQpOwogCi0JaWYgKGk5
MTVfcmVxdWVzdF9jb21wbGV0ZWQocnEpKQorCWlmIChwcmlvIDw9IFJFQURfT05DRShycS0+YXR0
ci5wcmlvcml0eSkpCiAJCXJldHVybjsKIAotCWlmIChwcmlvIDw9IFJFQURfT05DRShycS0+c2No
ZWQuYXR0ci5wcmlvcml0eSkpCisJaWYgKG5vZGVfc2lnbmFsZWQocnEpKQogCQlyZXR1cm47CiAK
LQlzdGFjay5zaWduYWxlciA9ICZycS0+c2NoZWQ7CisJc3RhY2suc2lnbmFsZXIgPSBycTsKIAls
aXN0X2FkZCgmc3RhY2suZGZzX2xpbmssICZkZnMpOwogCiAJLyoKQEAgLTI2MCw5ICsyNjAsOSBA
QCBzdGF0aWMgdm9pZCBfX2k5MTVfc2NoZWR1bGUoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCiAJ
ICogZXhlY2xpc3RzX3N1Ym1pdF9yZXF1ZXN0KCkpLCB3ZSBjYW4gc2V0IG91ciBvd24gcHJpb3Jp
dHkgYW5kIHNraXAKIAkgKiBhY3F1aXJpbmcgdGhlIGVuZ2luZSBsb2Nrcy4KIAkgKi8KLQlpZiAo
cnEtPnNjaGVkLmF0dHIucHJpb3JpdHkgPT0gSTkxNV9QUklPUklUWV9JTlZBTElEKSB7Ci0JCUdF
TV9CVUdfT04oIWxpc3RfZW1wdHkoJnJxLT5zY2hlZC5saW5rKSk7Ci0JCXJxLT5zY2hlZC5hdHRy
ID0gKmF0dHI7CisJaWYgKHJxLT5hdHRyLnByaW9yaXR5ID09IEk5MTVfUFJJT1JJVFlfSU5WQUxJ
RCkgeworCQlHRU1fQlVHX09OKCFsaXN0X2VtcHR5KCZycS0+bGluaykpOworCQlycS0+YXR0ciA9
ICphdHRyOwogCiAJCWlmIChzdGFjay5kZnNfbGluay5uZXh0ID09IHN0YWNrLmRmc19saW5rLnBy
ZXYpCiAJCQlyZXR1cm47CkBAIC0yNzEsNyArMjcxLDcgQEAgc3RhdGljIHZvaWQgX19pOTE1X3Nj
aGVkdWxlKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAogCX0KIAogCW1lbXNldCgmY2FjaGUsIDAs
IHNpemVvZihjYWNoZSkpOwotCWVuZ2luZSA9IHJxLT5lbmdpbmU7CisJZW5naW5lID0gbm9kZV90
b19yZXF1ZXN0KHJxKS0+ZW5naW5lOwogCXNwaW5fbG9jaygmZW5naW5lLT50aW1lbGluZS5sb2Nr
KTsKIAogCS8qIEZpZm8gYW5kIGRlcHRoLWZpcnN0IHJlcGxhY2VtZW50IGVuc3VyZSBvdXIgZGVw
cyBleGVjdXRlIGJlZm9yZSB1cyAqLwpAQCAtMzIyLDEzICszMjIsMjAgQEAgc3RhdGljIHZvaWQg
X19pOTE1X3NjaGVkdWxlKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAogdm9pZCBpOTE1X3NjaGVk
dWxlKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCBjb25zdCBzdHJ1Y3QgaTkxNV9zY2hlZF9hdHRy
ICphdHRyKQogewogCXNwaW5fbG9ja19pcnEoJnNjaGVkdWxlX2xvY2spOwotCV9faTkxNV9zY2hl
ZHVsZShycSwgYXR0cik7CisJX19pOTE1X3NjaGVkdWxlKCZycS0+c2NoZWQsIGF0dHIpOwogCXNw
aW5fdW5sb2NrX2lycSgmc2NoZWR1bGVfbG9jayk7CiB9CiAKK3N0YXRpYyB2b2lkIF9fYnVtcF9w
cmlvcml0eShzdHJ1Y3QgaTkxNV9zY2hlZF9ub2RlICpub2RlLCB1bnNpZ25lZCBpbnQgYnVtcCkK
K3sKKwlzdHJ1Y3QgaTkxNV9zY2hlZF9hdHRyIGF0dHIgPSBub2RlLT5hdHRyOworCisJYXR0ci5w
cmlvcml0eSB8PSBidW1wOworCV9faTkxNV9zY2hlZHVsZShub2RlLCAmYXR0cik7Cit9CisKIHZv
aWQgaTkxNV9zY2hlZHVsZV9idW1wX3ByaW9yaXR5KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCB1
bnNpZ25lZCBpbnQgYnVtcCkKIHsKLQlzdHJ1Y3QgaTkxNV9zY2hlZF9hdHRyIGF0dHI7CiAJdW5z
aWduZWQgbG9uZyBmbGFnczsKIAogCUdFTV9CVUdfT04oYnVtcCAmIH5JOTE1X1BSSU9SSVRZX01B
U0spOwpAQCAtMzM3LDExICszNDQsNyBAQCB2b2lkIGk5MTVfc2NoZWR1bGVfYnVtcF9wcmlvcml0
eShzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgdW5zaWduZWQgaW50IGJ1bXApCiAJCXJldHVybjsK
IAogCXNwaW5fbG9ja19pcnFzYXZlKCZzY2hlZHVsZV9sb2NrLCBmbGFncyk7Ci0KLQlhdHRyID0g
cnEtPnNjaGVkLmF0dHI7Ci0JYXR0ci5wcmlvcml0eSB8PSBidW1wOwotCV9faTkxNV9zY2hlZHVs
ZShycSwgJmF0dHIpOwotCisJX19idW1wX3ByaW9yaXR5KCZycS0+c2NoZWQsIGJ1bXApOwogCXNw
aW5fdW5sb2NrX2lycXJlc3RvcmUoJnNjaGVkdWxlX2xvY2ssIGZsYWdzKTsKIH0KIAotLSAKMi4y
MC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRl
bC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

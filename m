Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 55286A0D56
	for <lists+intel-gfx@lfdr.de>; Thu, 29 Aug 2019 00:16:10 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 591E589F24;
	Wed, 28 Aug 2019 22:16:08 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C921C89F24
 for <intel-gfx@lists.freedesktop.org>; Wed, 28 Aug 2019 22:16:07 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 28 Aug 2019 15:16:07 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,442,1559545200"; d="scan'208";a="380560327"
Received: from mtclark-mobl2.amr.corp.intel.com (HELO ldmartin-desk1)
 ([10.255.92.51])
 by fmsmga005.fm.intel.com with ESMTP; 28 Aug 2019 15:16:07 -0700
Date: Wed, 28 Aug 2019 15:16:06 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: Imre Deak <imre.deak@intel.com>
Message-ID: <20190828221606.3ivkupxw54jtygp5@ldmartin-desk1>
References: <20190823082055.5992-1-lucas.demarchi@intel.com>
 <20190823082055.5992-4-lucas.demarchi@intel.com>
 <20190826172833.GC27192@ideak-desk.fi.intel.com>
 <20190827165024.lwevu6e6sohr6lnh@ldmartin-desk1>
 <20190828162938.GA10584@ideak-desk.fi.intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190828162938.GA10584@ideak-desk.fi.intel.com>
User-Agent: NeoMutt/20180716
Subject: Re: [Intel-gfx] [PATCH v3 03/23] drm/i915/psr: Only handle
 interruptions of the transcoder in use
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org,
 Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCBBdWcgMjgsIDIwMTkgYXQgMDc6Mjk6MzhQTSArMDMwMCwgSW1yZSBEZWFrIHdyb3Rl
Ogo+T24gVHVlLCBBdWcgMjcsIDIwMTkgYXQgMDk6NTA6MjRBTSAtMDcwMCwgTHVjYXMgRGUgTWFy
Y2hpIHdyb3RlOgo+PiBPbiBNb24sIEF1ZyAyNiwgMjAxOSBhdCAwODoyODozM1BNICswMzAwLCBJ
bXJlIERlYWsgd3JvdGU6Cj4+ID4gT24gRnJpLCBBdWcgMjMsIDIwMTkgYXQgMDE6MjA6MzVBTSAt
MDcwMCwgTHVjYXMgRGUgTWFyY2hpIHdyb3RlOgo+PiA+ID4gRnJvbTogSm9zw6kgUm9iZXJ0byBk
ZSBTb3V6YSA8am9zZS5zb3V6YUBpbnRlbC5jb20+Cj4+ID4gPgo+PiA+ID4gSXQgd2FzIGVuYWJs
aW5nIGFuZCBjaGVja2luZyBQU1IgaW50ZXJydXB0aW9ucyBpbiBldmVyeSB0cmFuc2NvZGVyCj4+
ID4gPiB3aGlsZSBpdCBzaG91bGQga2VlcCB0aGUgaW50ZXJydXB0aW9ucyBvbiB0aGUgbm9uLXVz
ZWQgdHJhbnNjb2RlcnMKPj4gPiA+IG1hc2tlZC4KPj4gPiA+Cj4+ID4gPiBUaGlzIGFsc28gYWxy
ZWFkeSBwcmVwYXJlcyBmb3IgZnV0dXJlIHdoZW4gbW9yZSB0aGFuIG9uZSBQU1IgaW5zdGFuY2UK
Pj4gPiA+IHdpbGwgYmUgYWxsb3dlZC4KPj4gPiA+Cj4+ID4gPiBDYzogRGhpbmFrYXJhbiBQYW5k
aXlhbiA8ZGhpbmFrYXJhbi5wYW5kaXlhbkBpbnRlbC5jb20+Cj4+ID4gPiBTaWduZWQtb2ZmLWJ5
OiBKb3PDqSBSb2JlcnRvIGRlIFNvdXphIDxqb3NlLnNvdXphQGludGVsLmNvbT4KPj4gPiA+IFNp
Z25lZC1vZmYtYnk6IEx1Y2FzIERlIE1hcmNoaSA8bHVjYXMuZGVtYXJjaGlAaW50ZWwuY29tPgo+
PiA+ID4gLS0tCj4+ID4gPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wc3Iu
YyB8IDE0MCArKysrKysrKystLS0tLS0tLS0tLS0tLQo+PiA+ID4gIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVnLmggICAgICAgICAgfCAgMTMgKy0tCj4+ID4gPiAgMiBmaWxlcyBjaGFuZ2Vk
LCA1OSBpbnNlcnRpb25zKCspLCA5NCBkZWxldGlvbnMoLSkKPj4gPiA+Cj4+ID4gPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wc3IuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHNyLmMKPj4gPiA+IGluZGV4IDI4YjYyZTU4NzIw
NC4uODFlMzYxOWNkOTA1IDEwMDY0NAo+PiA+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9wc3IuYwo+PiA+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9wc3IuYwo+PiA+ID4gQEAgLTg4LDQ4ICs4OCwyMyBAQCBzdGF0aWMgYm9vbCBp
bnRlbF9wc3IyX2VuYWJsZWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAo+PiA+
ID4gIAl9Cj4+ID4gPiAgfQo+PiA+ID4KPj4gPiA+IC1zdGF0aWMgaW50IGVkcF9wc3Jfc2hpZnQo
ZW51bSB0cmFuc2NvZGVyIGNwdV90cmFuc2NvZGVyKQo+PiA+ID4gK3N0YXRpYyB2b2lkIHBzcl9p
cnFfY29udHJvbChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCj4+ID4gPiAgewo+
PiA+ID4gLQlzd2l0Y2ggKGNwdV90cmFuc2NvZGVyKSB7Cj4+ID4gPiAtCWNhc2UgVFJBTlNDT0RF
Ul9BOgo+PiA+ID4gLQkJcmV0dXJuIEVEUF9QU1JfVFJBTlNDT0RFUl9BX1NISUZUOwo+PiA+ID4g
LQljYXNlIFRSQU5TQ09ERVJfQjoKPj4gPiA+IC0JCXJldHVybiBFRFBfUFNSX1RSQU5TQ09ERVJf
Ql9TSElGVDsKPj4gPiA+IC0JY2FzZSBUUkFOU0NPREVSX0M6Cj4+ID4gPiAtCQlyZXR1cm4gRURQ
X1BTUl9UUkFOU0NPREVSX0NfU0hJRlQ7Cj4+ID4gPiAtCWRlZmF1bHQ6Cj4+ID4gPiAtCQlNSVNT
SU5HX0NBU0UoY3B1X3RyYW5zY29kZXIpOwo+PiA+ID4gLQkJLyogZmFsbHRocm91Z2ggKi8KPj4g
PiA+IC0JY2FzZSBUUkFOU0NPREVSX0VEUDoKPj4gPiA+IC0JCXJldHVybiBFRFBfUFNSX1RSQU5T
Q09ERVJfRURQX1NISUZUOwo+PiA+ID4gLQl9Cj4+ID4gPiAtfQo+PiA+ID4gKwllbnVtIHRyYW5z
Y29kZXIgdHJhbnMgPSBkZXZfcHJpdi0+cHNyLnRyYW5zY29kZXI7Cj4+ID4KPj4gPiBUaGlzIGlz
IGNhbGxlZCBmcm9tIGludGVsX3Bzcl9kZWJ1Z19zZXQoKSB3aGVyZSBwc3IudHJhbnNjb2RlciBt
YXkgYmUKPj4gPiB1bmluaXRlZC4KPj4gPgo+PiA+ID4gKwl1MzIgdmFsLCBtYXNrOwo+PiA+ID4K
Pj4gPiA+IC1zdGF0aWMgdm9pZCBwc3JfaXJxX2NvbnRyb2woc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2LCB1MzIgZGVidWcpCj4+ID4gPiAtewo+PiA+ID4gLQl1MzIgZGVidWdfbWFz
aywgbWFzazsKPj4gPiA+IC0JZW51bSB0cmFuc2NvZGVyIGNwdV90cmFuc2NvZGVyOwo+PiA+ID4g
LQl1MzIgdHJhbnNjb2RlcnMgPSBCSVQoVFJBTlNDT0RFUl9FRFApOwo+PiA+ID4gLQo+PiA+ID4g
LQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSA4KQo+PiA+ID4gLQkJdHJhbnNjb2RlcnMgfD0g
QklUKFRSQU5TQ09ERVJfQSkgfAo+PiA+ID4gLQkJCSAgICAgICBCSVQoVFJBTlNDT0RFUl9CKSB8
Cj4+ID4gPiAtCQkJICAgICAgIEJJVChUUkFOU0NPREVSX0MpOwo+PiA+ID4gLQo+PiA+ID4gLQlk
ZWJ1Z19tYXNrID0gMDsKPj4gPiA+IC0JbWFzayA9IDA7Cj4+ID4gPiAtCWZvcl9lYWNoX2NwdV90
cmFuc2NvZGVyX21hc2tlZChkZXZfcHJpdiwgY3B1X3RyYW5zY29kZXIsIHRyYW5zY29kZXJzKSB7
Cj4+ID4gPiAtCQlpbnQgc2hpZnQgPSBlZHBfcHNyX3NoaWZ0KGNwdV90cmFuc2NvZGVyKTsKPj4g
PiA+IC0KPj4gPiA+IC0JCW1hc2sgfD0gRURQX1BTUl9FUlJPUihzaGlmdCk7Cj4+ID4gPiAtCQlk
ZWJ1Z19tYXNrIHw9IEVEUF9QU1JfUE9TVF9FWElUKHNoaWZ0KSB8Cj4+ID4gPiAtCQkJICAgICAg
RURQX1BTUl9QUkVfRU5UUlkoc2hpZnQpOwo+PiA+ID4gLQl9Cj4+ID4gPiArCW1hc2sgPSBFRFBf
UFNSX0VSUk9SKHRyYW5zKTsKPj4gPiA+ICsJaWYgKGRldl9wcml2LT5wc3IuZGVidWcgJiBJOTE1
X1BTUl9ERUJVR19JUlEpCj4+ID4gPiArCQltYXNrIHw9IEVEUF9QU1JfUE9TVF9FWElUKHRyYW5z
KSB8IEVEUF9QU1JfUFJFX0VOVFJZKHRyYW5zKTsKPj4gPiA+Cj4+ID4gPiAtCWlmIChkZWJ1ZyAm
IEk5MTVfUFNSX0RFQlVHX0lSUSkKPj4gPiA+IC0JCW1hc2sgfD0gZGVidWdfbWFzazsKPj4gPiA+
IC0KPj4gPiA+IC0JSTkxNV9XUklURShFRFBfUFNSX0lNUiwgfm1hc2spOwo+PiA+ID4gKwkvKgo+
PiA+ID4gKwkgKiBUT0RPOiB3aGVuIGhhbmRsaW5nIG11bHRpcGxlIFBTUiBpbnN0YW5jZXMgYSBn
bG9iYWwgc3BpbmxvY2sgd2lsbCBiZQo+PiA+ID4gKwkgKiBuZWVkZWQgdG8gc3luY2hyb25pemUg
dGhlIHZhbHVlIG9mIHNoYXJlZCByZWdpc3Rlcgo+PiA+ID4gKwkgKi8KPj4gPiA+ICsJdmFsID0g
STkxNV9SRUFEKEVEUF9QU1JfSU1SKTsKPj4gPiA+ICsJdmFsICY9IH5FRFBfUFNSX1RSQU5TX01B
U0sodHJhbnMpOwo+PiA+ID4gKwl2YWwgfD0gfm1hc2s7Cj4+ID4gPiArCUk5MTVfV1JJVEUoRURQ
X1BTUl9JTVIsIHZhbCk7Cj4+ID4gPiAgfQo+PiA+ID4KPj4gPiA+ICBzdGF0aWMgdm9pZCBwc3Jf
ZXZlbnRfcHJpbnQodTMyIHZhbCwgYm9vbCBwc3IyX2VuYWJsZWQpCj4+ID4gPiBAQCAtMTcxLDYz
ICsxNDYsNTQgQEAgc3RhdGljIHZvaWQgcHNyX2V2ZW50X3ByaW50KHUzMiB2YWwsIGJvb2wgcHNy
Ml9lbmFibGVkKQo+PiA+ID4KPj4gPiA+ICB2b2lkIGludGVsX3Bzcl9pcnFfaGFuZGxlcihzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIHUzMiBwc3JfaWlyKQo+PiA+ID4gIHsKPj4g
PiA+IC0JdTMyIHRyYW5zY29kZXJzID0gQklUKFRSQU5TQ09ERVJfRURQKTsKPj4gPiA+IC0JZW51
bSB0cmFuc2NvZGVyIGNwdV90cmFuc2NvZGVyOwo+PiA+ID4gKwllbnVtIHRyYW5zY29kZXIgY3B1
X3RyYW5zY29kZXIgPSBkZXZfcHJpdi0+cHNyLnRyYW5zY29kZXI7Cj4+ID4gPiAgCWt0aW1lX3Qg
dGltZV9ucyA9ICBrdGltZV9nZXQoKTsKPj4gPiA+IC0JdTMyIG1hc2sgPSAwOwo+PiA+ID4KPj4g
PiA+IC0JaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gOCkKPj4gPiA+IC0JCXRyYW5zY29kZXJz
IHw9IEJJVChUUkFOU0NPREVSX0EpIHwKPj4gPiA+IC0JCQkgICAgICAgQklUKFRSQU5TQ09ERVJf
QikgfAo+PiA+ID4gLQkJCSAgICAgICBCSVQoVFJBTlNDT0RFUl9DKTsKPj4gPiA+ICsJaWYgKHBz
cl9paXIgJiBFRFBfUFNSX0VSUk9SKGNwdV90cmFuc2NvZGVyKSkgewo+PiA+ID4gKwkJdTMyIHZh
bDsKPj4gPiA+Cj4+ID4gPiAtCWZvcl9lYWNoX2NwdV90cmFuc2NvZGVyX21hc2tlZChkZXZfcHJp
diwgY3B1X3RyYW5zY29kZXIsIHRyYW5zY29kZXJzKSB7Cj4+ID4KPj4gPiBJIHRoaW5rIHdlIHNo
b3VsZCBzdGlsbCBjYXRjaCBhbGwgaW50ZXJydXB0cywgbG9nIHRoZSB1bmV4cGVjdGVkIG9uZXMK
Pj4gPiBhbmQgcmVhY3Qgb25seSBvbiB0aGUgZXhwZWN0ZWQgb25lIGluIGludGVsX3Bzcl93b3Jr
KCkuCj4+Cj4+IGNvdWxkIHlvdSBleHBhbmQgbW9yZSBvbiB0aGlzPyB0aGVyZSBpcyBvbmx5IG9u
ZSBQU1IgaW5zdGFuY2UgaGVuY2Ugb25seQo+PiBvbmUgcG9zc2libGUgdHJhbnNjb2RlciBjb21p
bmcgZnJvbSBkZXZfcHJpdi0+cHNyLnRyYW5zY29kZXIuIExvb3BpbmcgaGVyZSBqdXN0IHRvCj4+
IHdhcm4gc2VlbXMgd2FzdGVmdWwuCj4KPkkgdGhpbmsgd2Ugc2hvdWxkIGRvIHdoYXQgdGhlIEhX
IHRlbGxzIHVzIGFuZCBtYWtlIHN1cmUgd2UgY2xlYXIgYWxsIHRoZQo+aW50ZXJydXB0cyB0aGF0
IG1heSBoYXZlIGhhcHBlbmVkIHJhdGhlciB0aGFuIGFzc3VtZSB0aGF0IHRoZSBpbnRlcnJ1cHQK
PnRoYXQgaGFwcGVuZWQgd2FzIHRoZSBvbmUgY29ycmVzcG9uZGluZyB0byBwc3IudHJhbnNjb2Rl
ci4KCmlmIHBzciBjYW4gb25seSBiZSBlbmFibGVkIGluIGEgc2luZ2xlIHRyYW5zY29kZXIsIGhv
dyB0aGUgdHJhbnNjb2Rlcgpjb3VsZCBiZSBhbnkgZGlmZmVyZW50IGZvciB0aGF0IGludGVycnVw
dD8KCj5wc3IudHJhbnNjb2RlciBpcyBhbHNvIG9ubHkgcHJvdGVjdGVkIGJ5IGEgbXV0ZXgsIHNv
IHdlIGNhbid0IHVzZSBpdHMKPnZhbHVlIGluIHRoZSBpbnRlcnJ1cHQgaGFuZGxlci4KCnBzci50
cmFuc2NvZGVyIGlzIG9ubHkgc2V0IGJlZm9yZSBlbmFibGluZyB0aGUgc291cmNlIGhlbmNlIHNo
b3VsZApyZW1haW4gdGhlIHNhbWUgZm9yIGFueSBpbnRlcnJ1cHQgcmVjZWl2ZWQuCgo+Cj5JdCdz
IHdlaXJkIHRoYXQgdGhlcmUgaXMgbm8gcGVyLVBTUiBpbnN0YW5jZSBJSVJzIGluIHRoZSBtaXNj
IGludGVycnVwdAo+cmVnaXN0ZXIuIEJlY2F1c2Ugb2YgdGhhdCB3ZSdkIG5lZWQgYSBQU1Igc29m
dHdhcmUgSVJRIG1hc2sgdGhhdCBjb3VsZAo+YmUgc2V0IGZyb20gcHNyX2lycV9jb250cm9sKCku
IFdlIGFsc28gaGF2ZSB0byBtYWtlIHN1cmUgdG8gY2xlYXIvbWFzayBhCj50cmFuc2NvZGVyJ3Mg
UFNSIGludGVydXB0cyBhbmQgc3luYyBhZ2FpbnN0IHRoZSBpbnRlcnJ1cHQgaGFuZGxlciB3aGVu
Cj50dXJuaW5nIG9mZiB0aGUgdHJhbnNjb2RlciBwb3dlciB3ZWxsLiBJdCBsb29rcyBsaWtlIHRo
ZSB0cmFuc2NvZGVyCj5wb3dlciB3ZWxsIGlzIHRoZSBzYW1lIGFzIHRoYXQgb2YgdGhlIHRyYW5z
Y29kZXIncyBwaXBlIHBvd2VyIHdlbGwsIHNvCj53ZSBjb3VsZCBkbyB0aGlzIGluIGdlbjhfaXJx
X3Bvd2VyX3dlbGxfcHJlX2Rpc2FibGUoKS4KPgo+QnkgZG9pbmcgdGhlIGFib3ZlIChub3QgdXNl
IHBzci50cmFuc2NvZGVyIGluIHRoZSBpbnRlcnJ1cHQgaGFuZGxlciwKPnJhdGhlciB1c2UgYSBz
ZXBhcmF0ZSBwc3JfaXJxIHNvZnR3YXJlIG1hc2spIHdlIGNvdWxkIGFsc28ga2VlcCB0aGUKPmlu
dGVycnVwdCBoYW5kbGluZyBpbmRlcGVuZGVudCBvZiB0aGUgbW9kZXNldCBjb2RlICh3aGljaCBp
cyB3aGF0IHNldHMKPnBzci50cmFuc2NvZGVyKS4KCkkgaGF2ZSBhbm90aGVyIHZlcnNpb24gdGhh
dCBzaG91bGQgZml4IHRoZSBwcm9ibGVtIHdpdGggcHNyLnRyYW5zY29kZXIuIEFmdGVyCnRoYXQg
SSBkb24ndCBzZWUgdGhlIGlzc3VlIHdpdGggdGhlIGN1cnJlbnQgYXBwcm9hY2guCgpMdWNhcyBE
ZSBNYXJjaGkKCj4KPj4KPj4gPgo+PiA+ID4gLQkJaW50IHNoaWZ0ID0gZWRwX3Bzcl9zaGlmdChj
cHVfdHJhbnNjb2Rlcik7Cj4+ID4gPiArCQlEUk1fV0FSTigiW3RyYW5zY29kZXIgJXNdIFBTUiBh
dXggZXJyb3JcbiIsCj4+ID4gPiArCQkJIHRyYW5zY29kZXJfbmFtZShjcHVfdHJhbnNjb2Rlcikp
Owo+PiA+ID4KPj4gPiA+IC0JCWlmIChwc3JfaWlyICYgRURQX1BTUl9FUlJPUihzaGlmdCkpIHsK
Pj4gPiA+IC0JCQlEUk1fV0FSTigiW3RyYW5zY29kZXIgJXNdIFBTUiBhdXggZXJyb3JcbiIsCj4+
ID4gPiAtCQkJCSB0cmFuc2NvZGVyX25hbWUoY3B1X3RyYW5zY29kZXIpKTsKPj4gPiA+ICsJCWRl
dl9wcml2LT5wc3IuaXJxX2F1eF9lcnJvciA9IHRydWU7Cj4+ID4gPgo+PiA+ID4gLQkJCWRldl9w
cml2LT5wc3IuaXJxX2F1eF9lcnJvciA9IHRydWU7Cj4+ID4gPiArCQkvKgo+PiA+ID4gKwkJICog
SWYgdGhpcyBpbnRlcnJ1cHRpb24gaXMgbm90IG1hc2tlZCBpdCB3aWxsIGtlZXAKPj4gPiA+ICsJ
CSAqIGludGVycnVwdGluZyBzbyBmYXN0IHRoYXQgaXQgcHJldmVudHMgdGhlIHNjaGVkdWxlZAo+
PiA+ID4gKwkJICogd29yayB0byBydW4uCj4+ID4gPiArCQkgKiBBbHNvIGFmdGVyIGEgUFNSIGVy
cm9yLCB3ZSBkb24ndCB3YW50IHRvIGFybSBQU1IKPj4gPiA+ICsJCSAqIGFnYWluIHNvIHdlIGRv
bid0IGNhcmUgYWJvdXQgdW5tYXNrIHRoZSBpbnRlcnJ1cHRpb24KPj4gPiA+ICsJCSAqIG9yIHVu
c2V0IGlycV9hdXhfZXJyb3IuCj4+ID4gPiArCQkgKgo+PiA+ID4gKwkJICogVE9ETzogd2hlbiBo
YW5kbGluZyBtdWx0aXBsZSBQU1IgaW5zdGFuY2VzIGEgZ2xvYmFsIHNwaW5sb2NrCj4+ID4gPiAr
CQkgKiB3aWxsIGJlIG5lZWRlZCB0byBzeW5jaHJvbml6ZSB0aGUgdmFsdWUgb2Ygc2hhcmVkIHJl
Z2lzdGVyCj4+Cj4+IEknbSBub3QgcmVhbGx5IGEgZmFuIG9mIHRoZXNlIFRPRE8gZm9yIG11bHRp
cGxlIFBTUiBpbnN0YW5jZXMuIFdoZW4vaWYKPj4gd2UgYWRkIHRoZW0sIHdlIHdvbid0IHJlYWxs
eSBiZSBhYmxlIHRvIHJlbHkgb24gdGhlc2UgVE9ETyBjb21tZW50cyBhbmQKPj4gd2lsbCByYXRo
ZXIgbmVlZCB0byBldmFsdWF0ZSB0aGUgd2hvbGUgc2NlbmFyaW8uCj4+Cj4+ID4gPiArCQkgKi8K
Pj4gPiA+ICsJCXZhbCA9IEk5MTVfUkVBRChFRFBfUFNSX0lNUik7Cj4+ID4gPiArCQl2YWwgfD0g
RURQX1BTUl9FUlJPUihjcHVfdHJhbnNjb2Rlcik7Cj4+ID4gPiArCQlJOTE1X1dSSVRFKEVEUF9Q
U1JfSU1SLCB2YWwpOwo+PiA+ID4KPj4gPiA+IC0JCQkvKgo+PiA+ID4gLQkJCSAqIElmIHRoaXMg
aW50ZXJydXB0aW9uIGlzIG5vdCBtYXNrZWQgaXQgd2lsbCBrZWVwCj4+ID4gPiAtCQkJICogaW50
ZXJydXB0aW5nIHNvIGZhc3QgdGhhdCBpdCBwcmV2ZW50cyB0aGUgc2NoZWR1bGVkCj4+ID4gPiAt
CQkJICogd29yayB0byBydW4uCj4+ID4gPiAtCQkJICogQWxzbyBhZnRlciBhIFBTUiBlcnJvciwg
d2UgZG9uJ3Qgd2FudCB0byBhcm0gUFNSCj4+ID4gPiAtCQkJICogYWdhaW4gc28gd2UgZG9uJ3Qg
Y2FyZSBhYm91dCB1bm1hc2sgdGhlIGludGVycnVwdGlvbgo+PiA+ID4gLQkJCSAqIG9yIHVuc2V0
IGlycV9hdXhfZXJyb3IuCj4+ID4gPiAtCQkJICovCj4+ID4gPiAtCQkJbWFzayB8PSBFRFBfUFNS
X0VSUk9SKHNoaWZ0KTsKPj4gPiA+IC0JCX0KPj4gPiA+ICsJCXNjaGVkdWxlX3dvcmsoJmRldl9w
cml2LT5wc3Iud29yayk7Cj4+ID4KPj4gPiBXb3VsZCBiZSBiZXR0ZXIgbm90IHRvIHJlb3JkZXIg
aW50ZWxfcHNyX3dvcmsoKSBhbmQgcHJpbnRpbmcgdGhlIGV2ZW50cwo+PiA+IGJlbG93Lgo+PiA+
Cj4+ID4gPiArCX0KPj4gPiA+Cj4+ID4gPiAtCQlpZiAocHNyX2lpciAmIEVEUF9QU1JfUFJFX0VO
VFJZKHNoaWZ0KSkgewo+PiA+ID4gLQkJCWRldl9wcml2LT5wc3IubGFzdF9lbnRyeV9hdHRlbXB0
ID0gdGltZV9uczsKPj4gPiA+IC0JCQlEUk1fREVCVUdfS01TKCJbdHJhbnNjb2RlciAlc10gUFNS
IGVudHJ5IGF0dGVtcHQgaW4gMiB2YmxhbmtzXG4iLAo+PiA+ID4gLQkJCQkgICAgICB0cmFuc2Nv
ZGVyX25hbWUoY3B1X3RyYW5zY29kZXIpKTsKPj4gPiA+IC0JCX0KPj4gPiA+ICsJaWYgKHBzcl9p
aXIgJiBFRFBfUFNSX1BSRV9FTlRSWShjcHVfdHJhbnNjb2RlcikpIHsKPj4gPiA+ICsJCWRldl9w
cml2LT5wc3IubGFzdF9lbnRyeV9hdHRlbXB0ID0gdGltZV9uczsKPj4gPiA+ICsJCURSTV9ERUJV
R19LTVMoIlt0cmFuc2NvZGVyICVzXSBQU1IgZW50cnkgYXR0ZW1wdCBpbiAyIHZibGFua3NcbiIs
Cj4+ID4gPiArCQkJICAgICAgdHJhbnNjb2Rlcl9uYW1lKGNwdV90cmFuc2NvZGVyKSk7Cj4+ID4g
PiArCX0KPj4gPiA+Cj4+ID4gPiAtCQlpZiAocHNyX2lpciAmIEVEUF9QU1JfUE9TVF9FWElUKHNo
aWZ0KSkgewo+PiA+ID4gLQkJCWRldl9wcml2LT5wc3IubGFzdF9leGl0ID0gdGltZV9uczsKPj4g
PiA+IC0JCQlEUk1fREVCVUdfS01TKCJbdHJhbnNjb2RlciAlc10gUFNSIGV4aXQgY29tcGxldGVk
XG4iLAo+PiA+ID4gLQkJCQkgICAgICB0cmFuc2NvZGVyX25hbWUoY3B1X3RyYW5zY29kZXIpKTsK
Pj4gPiA+ICsJaWYgKHBzcl9paXIgJiBFRFBfUFNSX1BPU1RfRVhJVChjcHVfdHJhbnNjb2Rlcikp
IHsKPj4gPiA+ICsJCWRldl9wcml2LT5wc3IubGFzdF9leGl0ID0gdGltZV9uczsKPj4gPiA+ICsJ
CURSTV9ERUJVR19LTVMoIlt0cmFuc2NvZGVyICVzXSBQU1IgZXhpdCBjb21wbGV0ZWRcbiIsCj4+
ID4gPiArCQkJICAgICAgdHJhbnNjb2Rlcl9uYW1lKGNwdV90cmFuc2NvZGVyKSk7Cj4+ID4gPgo+
PiA+ID4gLQkJCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDkpIHsKPj4gPiA+IC0JCQkJdTMy
IHZhbCA9IEk5MTVfUkVBRChQU1JfRVZFTlQoY3B1X3RyYW5zY29kZXIpKTsKPj4gPiA+IC0JCQkJ
Ym9vbCBwc3IyX2VuYWJsZWQgPSBkZXZfcHJpdi0+cHNyLnBzcjJfZW5hYmxlZDsKPj4gPiA+ICsJ
CWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDkpIHsKPj4gPiA+ICsJCQl1MzIgdmFsID0gSTkx
NV9SRUFEKFBTUl9FVkVOVChjcHVfdHJhbnNjb2RlcikpOwo+PiA+ID4gKwkJCWJvb2wgcHNyMl9l
bmFibGVkID0gZGV2X3ByaXYtPnBzci5wc3IyX2VuYWJsZWQ7Cj4+ID4gPgo+PiA+ID4gLQkJCQlJ
OTE1X1dSSVRFKFBTUl9FVkVOVChjcHVfdHJhbnNjb2RlciksIHZhbCk7Cj4+ID4gPiAtCQkJCXBz
cl9ldmVudF9wcmludCh2YWwsIHBzcjJfZW5hYmxlZCk7Cj4+ID4gPiAtCQkJfQo+PiA+ID4gKwkJ
CUk5MTVfV1JJVEUoUFNSX0VWRU5UKGNwdV90cmFuc2NvZGVyKSwgdmFsKTsKPj4gPiA+ICsJCQlw
c3JfZXZlbnRfcHJpbnQodmFsLCBwc3IyX2VuYWJsZWQpOwo+PiA+ID4gIAkJfQo+PiA+ID4gIAl9
Cj4+ID4gPiAtCj4+ID4gPiAtCWlmIChtYXNrKSB7Cj4+ID4gPiAtCQltYXNrIHw9IEk5MTVfUkVB
RChFRFBfUFNSX0lNUik7Cj4+ID4gPiAtCQlJOTE1X1dSSVRFKEVEUF9QU1JfSU1SLCBtYXNrKTsK
Pj4gPiA+IC0KPj4gPiA+IC0JCXNjaGVkdWxlX3dvcmsoJmRldl9wcml2LT5wc3Iud29yayk7Cj4+
ID4gPiAtCX0KPj4gPiA+ICB9Cj4+ID4gPgo+PiA+ID4gIHN0YXRpYyBib29sIGludGVsX2RwX2dl
dF9hbHBtX3N0YXR1cyhzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwKQo+PiA+ID4gQEAgLTczNyw3
ICs3MDMsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9wc3JfZW5hYmxlX3NvdXJjZShzdHJ1Y3QgaW50
ZWxfZHAgKmludGVsX2RwLAo+PiA+ID4KPj4gPiA+ICAJSTkxNV9XUklURShFRFBfUFNSX0RFQlVH
KGRldl9wcml2LT5wc3IudHJhbnNjb2RlciksIG1hc2spOwo+PiA+ID4KPj4gPiA+IC0JcHNyX2ly
cV9jb250cm9sKGRldl9wcml2LCBkZXZfcHJpdi0+cHNyLmRlYnVnKTsKPj4gPiA+ICsJcHNyX2ly
cV9jb250cm9sKGRldl9wcml2KTsKPj4gPiA+ICB9Cj4+ID4gPgo+PiA+ID4gIHN0YXRpYyB2b2lk
IGludGVsX3Bzcl9lbmFibGVfbG9ja2VkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
diwKPj4gPiA+IEBAIC03NjIsNyArNzI4LDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfcHNyX2VuYWJs
ZV9sb2NrZWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAo+PiA+ID4gIAkgKiB0
byBhdm9pZCBhbnkgcmVuZGVyaW5nIHByb2JsZW1zLgo+PiA+ID4gIAkgKi8KPj4gPiA+ICAJdmFs
ID0gSTkxNV9SRUFEKEVEUF9QU1JfSUlSKTsKPj4gPiA+IC0JdmFsICY9IEVEUF9QU1JfRVJST1Io
ZWRwX3Bzcl9zaGlmdChkZXZfcHJpdi0+cHNyLnRyYW5zY29kZXIpKTsKPj4gPiA+ICsJdmFsICY9
IEVEUF9QU1JfRVJST1IoZGV2X3ByaXYtPnBzci50cmFuc2NvZGVyKTsKPj4gPiA+ICAJaWYgKHZh
bCkgewo+PiA+ID4gIAkJZGV2X3ByaXYtPnBzci5zaW5rX25vdF9yZWxpYWJsZSA9IHRydWU7Cj4+
ID4gPiAgCQlEUk1fREVCVUdfS01TKCJQU1IgaW50ZXJydXB0aW9uIGVycm9yIHNldCwgbm90IGVu
YWJsaW5nIFBTUlxuIik7Cj4+ID4gPiBAQCAtMTExMCw3ICsxMDc2LDcgQEAgaW50IGludGVsX3Bz
cl9kZWJ1Z19zZXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCB1NjQgdmFsKQo+
PiA+ID4KPj4gPiA+ICAJb2xkX21vZGUgPSBkZXZfcHJpdi0+cHNyLmRlYnVnICYgSTkxNV9QU1Jf
REVCVUdfTU9ERV9NQVNLOwo+PiA+ID4gIAlkZXZfcHJpdi0+cHNyLmRlYnVnID0gdmFsOwo+PiA+
ID4gLQlwc3JfaXJxX2NvbnRyb2woZGV2X3ByaXYsIGRldl9wcml2LT5wc3IuZGVidWcpOwo+PiA+
ID4gKwlwc3JfaXJxX2NvbnRyb2woZGV2X3ByaXYpOwo+PiA+ID4KPj4gPiA+ICAJbXV0ZXhfdW5s
b2NrKCZkZXZfcHJpdi0+cHNyLmxvY2spOwo+PiA+ID4KPj4gPiA+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9y
ZWcuaAo+PiA+ID4gaW5kZXggMDJlMWVmMTBjNDdlLi4xYzZkOTk5NDQ2MzAgMTAwNjQ0Cj4+ID4g
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCj4+ID4gPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCj4+ID4gPiBAQCAtNDIyNSwxMyArNDIyNSwxMiBA
QCBlbnVtIHsKPj4gPiA+ICAvKiBCc3BlYyBjbGFpbXMgdGhvc2UgYXJlbid0IHNoaWZ0ZWQgYnV0
IHN0YXkgYXQgMHg2NDgwMCAqLwo+PiA+ID4gICNkZWZpbmUgRURQX1BTUl9JTVIJCQkJX01NSU8o
MHg2NDgzNCkKPj4gPiA+ICAjZGVmaW5lIEVEUF9QU1JfSUlSCQkJCV9NTUlPKDB4NjQ4MzgpCj4+
ID4gPiAtI2RlZmluZSAgIEVEUF9QU1JfRVJST1Ioc2hpZnQpCQkJKDEgPDwgKChzaGlmdCkgKyAy
KSkKPj4gPiA+IC0jZGVmaW5lICAgRURQX1BTUl9QT1NUX0VYSVQoc2hpZnQpCQkoMSA8PCAoKHNo
aWZ0KSArIDEpKQo+PiA+ID4gLSNkZWZpbmUgICBFRFBfUFNSX1BSRV9FTlRSWShzaGlmdCkJCSgx
IDw8IChzaGlmdCkpCj4+ID4gPiAtI2RlZmluZSAgIEVEUF9QU1JfVFJBTlNDT0RFUl9DX1NISUZU
CQkyNAo+PiA+ID4gLSNkZWZpbmUgICBFRFBfUFNSX1RSQU5TQ09ERVJfQl9TSElGVAkJMTYKPj4g
PiA+IC0jZGVmaW5lICAgRURQX1BTUl9UUkFOU0NPREVSX0FfU0hJRlQJCTgKPj4gPiA+IC0jZGVm
aW5lICAgRURQX1BTUl9UUkFOU0NPREVSX0VEUF9TSElGVAkJMAo+PiA+ID4gKyNkZWZpbmUgICBf
RURQX1BTUl9UUkFOU19TSElGVCh0cmFucykJCSgodHJhbnMpID09IFRSQU5TQ09ERVJfRURQID8g
XAo+PiA+ID4gKwkJCQkJCSAwIDogKCh0cmFucykgKyAxKSAqIDgpCj4+ID4KPj4gPiAodHJhbnMg
LSBUUkFOU0NPREVSX0EpICsgMQo+PiA+Cj4+ID4gdG8gbm90IGRlcGVuZCBvbiB0aGUgZW51bSB2
YWx1ZSBvZiBUUkFOU0NPREVSX0EuCj4+Cj4+IGFncmVlZAo+Pgo+PiB0aGFua3MKPj4gTHVjYXMg
RGUgTWFyY2hpCj4+Cj4+ID4KPj4gPiA+ICsjZGVmaW5lICAgRURQX1BTUl9UUkFOU19NQVNLKHRy
YW5zKQkJKDB4NyA8PCBfRURQX1BTUl9UUkFOU19TSElGVCh0cmFucykpCj4+ID4gPiArI2RlZmlu
ZSAgIEVEUF9QU1JfRVJST1IodHJhbnMpCQkJKDB4NCA8PCBfRURQX1BTUl9UUkFOU19TSElGVCh0
cmFucykpCj4+ID4gPiArI2RlZmluZSAgIEVEUF9QU1JfUE9TVF9FWElUKHRyYW5zKQkJKDB4MiA8
PCBfRURQX1BTUl9UUkFOU19TSElGVCh0cmFucykpCj4+ID4gPiArI2RlZmluZSAgIEVEUF9QU1Jf
UFJFX0VOVFJZKHRyYW5zKQkJKDB4MSA8PCBfRURQX1BTUl9UUkFOU19TSElGVCh0cmFucykpCj4+
ID4gPgo+PiA+ID4gICNkZWZpbmUgX1NSRF9BVVhfQ1RMX0EJCQkJMHg2MDgxMAo+PiA+ID4gICNk
ZWZpbmUgX1NSRF9BVVhfQ1RMX0VEUAkJCTB4NmY4MTAKPj4gPiA+IC0tCj4+ID4gPiAyLjIzLjAK
Pj4gPiA+Cj4+ID4gPiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwo+PiA+ID4gSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdAo+PiA+ID4gSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwo+PiA+ID4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9pbnRlbC1nZngKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vaW50ZWwtZ2Z4

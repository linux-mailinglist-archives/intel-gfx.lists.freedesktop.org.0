Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D083FF8BAD
	for <lists+intel-gfx@lfdr.de>; Tue, 12 Nov 2019 10:29:18 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BD90089E9B;
	Tue, 12 Nov 2019 09:29:16 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 011316E0FB
 for <intel-gfx@lists.freedesktop.org>; Tue, 12 Nov 2019 09:29:13 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19170023-1500050 
 for multiple; Tue, 12 Nov 2019 09:28:59 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 12 Nov 2019 09:28:44 +0000
Message-Id: <20191112092854.869-17-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191112092854.869-1-chris@chris-wilson.co.uk>
References: <20191112092854.869-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 17/27] drm/i915/gt: Expose busywait duration to
 sysfs
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UgYnVzeXdhaXQgb24gYW4gaW5mbGlnaHQgcmVxdWVzdCAob25lIHRoYXQgaXMgY3VycmVudGx5
IGV4ZWN1dGluZyBvbgpIVywgYW5kIHNvIG1pZ2h0IGNvbXBsZXRlIHF1aWNrbHkpIHByaW9yIHRv
IHNldHRpbmcgdXAgYW4gaW50ZXJydXB0IGFuZApzbGVlcGluZy4gVGhlIHRyYWRlIG9mZiBpcyB0
aGF0IHdlIGtlZXAgYW4gZXhwZW5zaXZlIENQVSBjb3JlIGJ1c3kgaW4Kb3JkZXIgdG8gYXZvaWQg
d2FrZSB1cCBsYXRlbmN5OiB3aGVyZSB0aGF0IHRyYWRlIG9mZiBzaG91bGQgbGllIGlzIGJlc3QK
bGVmdCB0byB0aGUgc3lzYWRtaW4uCgpUaGUgYnVzeXdhaXQgbWVjaGFuaXNtIGNhbiBiZSBjb21w
aWxlZCBvdXQgd2l0aAoKCS4vc2NyaXB0cy9jb25maWcgLS1zZXQtdmFsIERSTV9JOTE1X1NQSU5f
UkVRVUVTVCAwCgpUaGUgbWF4aW11bSBidXN5d2FpdCBkdXJhdGlvbiBjYW4gYmUgYWRqdXN0ZWQg
cGVyLWVuZ2luZSB1c2luZywKCgkvc3lzL2NsYXNzL2RybS9jYXJkPy9lbmdpbmUvKi9tc19idXN5
d2FpdF9kdXJhdGlvbl9ucwoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJp
cy13aWxzb24uY28udWs+CkNjOiBKb29uYXMgTGFodGluZW4gPGpvb25hcy5sYWh0aW5lbkBsaW51
eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvS2NvbmZpZy5wcm9maWxlICAg
ICAgICAgfCAgOSArKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3Mu
YyAgICB8ICAyICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9zeXNmcy5j
IHwgNDkgKysrKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZV90eXBlcy5oIHwgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0
LmMgICAgICAgICAgfCAxOSArKysrLS0tLQogNSBmaWxlcyBjaGFuZ2VkLCA2OCBpbnNlcnRpb25z
KCspLCAxMiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9L
Y29uZmlnLnByb2ZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9LY29uZmlnLnByb2ZpbGUKaW5k
ZXggYjg3YzhmNDg1YTI0Li5iOTA2MGIwMjNjNTEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L0tjb25maWcucHJvZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9LY29uZmln
LnByb2ZpbGUKQEAgLTM1LDkgKzM1LDkgQEAgY29uZmlnIERSTV9JOTE1X1BSRUVNUFRfVElNRU9V
VAogCiAJICBNYXkgYmUgMCB0byBkaXNhYmxlIHRoZSB0aW1lb3V0LgogCi1jb25maWcgRFJNX0k5
MTVfU1BJTl9SRVFVRVNUCi0JaW50ICJCdXN5d2FpdCBmb3IgcmVxdWVzdCBjb21wbGV0aW9uICh1
cykiCi0JZGVmYXVsdCA1ICMgbWljcm9zZWNvbmRzCitjb25maWcgRFJNX0k5MTVfTUFYX1JFUVVF
U1RfQlVTWVdBSVQKKwlpbnQgIkJ1c3l3YWl0IGZvciByZXF1ZXN0IGNvbXBsZXRpb24gbGltaXQg
KG5zKSIKKwlkZWZhdWx0IDgwMDAgIyBuYW5vc2Vjb25kcwogCWhlbHAKIAkgIEJlZm9yZSBzbGVl
cGluZyB3YWl0aW5nIGZvciBhIHJlcXVlc3QgKEdQVSBvcGVyYXRpb24pIHRvIGNvbXBsZXRlLAog
CSAgd2UgbWF5IHNwZW5kIHNvbWUgdGltZSBwb2xsaW5nIGZvciBpdHMgY29tcGxldGlvbi4gQXMg
dGhlIElSUSBtYXkKQEAgLTQ1LDYgKzQ1LDkgQEAgY29uZmlnIERSTV9JOTE1X1NQSU5fUkVRVUVT
VAogCSAgY2hlY2sgaWYgdGhlIHJlcXVlc3Qgd2lsbCBjb21wbGV0ZSBpbiB0aGUgdGltZSBpdCB3
b3VsZCBoYXZlIHRha2VuCiAJICB1cyB0byBlbmFibGUgdGhlIGludGVycnVwdC4KIAorCSAgVGhp
cyBpcyBhZGp1c3RhYmxlIHZpYQorCSAgL3N5cy9jbGFzcy9kcm0vY2FyZD8vZW5naW5lLyovbWF4
X2J1c3l3YWl0X2R1cmF0aW9uX25zCisKIAkgIE1heSBiZSAwIHRvIGRpc2FibGUgdGhlIGluaXRp
YWwgc3Bpbi4gSW4gcHJhY3RpY2UsIHdlIGVzdGltYXRlCiAJICB0aGUgY29zdCBvZiBlbmFibGlu
ZyB0aGUgaW50ZXJydXB0IChpZiBjdXJyZW50bHkgZGlzYWJsZWQpIHRvIGJlCiAJICBhIGZldyBt
aWNyb3NlY29uZHMuCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCmlu
ZGV4IDU0ZTc4NWRjNmEzYi4uNzlmNzBiMzA1YmVkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9lbmdpbmVfY3MuYwpAQCAtMzExLDYgKzMxMSw4IEBAIHN0YXRpYyBpbnQgaW50ZWxf
ZW5naW5lX3NldHVwKHN0cnVjdCBpbnRlbF9ndCAqZ3QsIGVudW0gaW50ZWxfZW5naW5lX2lkIGlk
KQogCiAJZW5naW5lLT5wcm9wcy5oZWFydGJlYXRfaW50ZXJ2YWxfbXMgPQogCQlDT05GSUdfRFJN
X0k5MTVfSEVBUlRCRUFUX0lOVEVSVkFMOworCWVuZ2luZS0+cHJvcHMubWF4X2J1c3l3YWl0X2R1
cmF0aW9uX25zID0KKwkJQ09ORklHX0RSTV9JOTE1X01BWF9SRVFVRVNUX0JVU1lXQUlUOwogCWVu
Z2luZS0+cHJvcHMucHJlZW1wdF90aW1lb3V0X21zID0KIAkJQ09ORklHX0RSTV9JOTE1X1BSRUVN
UFRfVElNRU9VVDsKIAllbmdpbmUtPnByb3BzLnN0b3BfdGltZW91dF9tcyA9CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfc3lzZnMuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9zeXNmcy5jCmluZGV4IGIxYmQ3NjhiMTNkNy4u
NmQ4NzUyOWM2NGE3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfc3lzZnMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVf
c3lzZnMuYwpAQCAtMTQyLDYgKzE0Miw1NCBAQCBhbGxfY2Fwc19zaG93KHN0cnVjdCBrb2JqZWN0
ICprb2JqLCBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIgKmJ1ZikKIHN0YXRpYyBz
dHJ1Y3Qga29ial9hdHRyaWJ1dGUgYWxsX2NhcHNfYXR0ciA9CiBfX0FUVFIoa25vd25fY2FwYWJp
bGl0aWVzLCAwNDQ0LCBhbGxfY2Fwc19zaG93LCBOVUxMKTsKIAorc3RhdGljIHNzaXplX3QKK21h
eF9zcGluX3N0b3JlKHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3Qga29ial9hdHRyaWJ1dGUg
KmF0dHIsCisJICAgICAgIGNvbnN0IGNoYXIgKmJ1Ziwgc2l6ZV90IGNvdW50KQoreworCXN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9IGtvYmpfdG9fZW5naW5lKGtvYmopOworCXVuc2ln
bmVkIGxvbmcgbG9uZyBkdXJhdGlvbjsKKwlpbnQgZXJyOworCisJLyoKKwkgKiBXaGVuIHdhaXRp
bmcgZm9yIGEgcmVxdWVzdCwgaWYgaXMgaXQgY3VycmVudGx5IGJlaW5nIGV4ZWN1dGVkCisJICog
b24gdGhlIEdQVSwgd2UgYnVzeXdhaXQgZm9yIGEgc2hvcnQgd2hpbGUgYmVmb3JlIHNsZWVwaW5n
LiBUaGUKKwkgKiBwcmVtaXNlIGlzIHRoYXQgbW9zdCByZXF1ZXN0cyBhcmUgc2hvcnQsIGFuZCBp
ZiBpdCBpcyBhbHJlYWR5CisJICogZXhlY3V0aW5nIHRoZW4gdGhlcmUgaXMgYSBnb29kIGNoYW5j
ZSB0aGF0IGl0IHdpbGwgY29tcGxldGUKKwkgKiBiZWZvcmUgd2UgY2FuIHNldHVwIHRoZSBpbnRl
cnJ1cHQgaGFuZGxlciBhbmQgZ28gdG8gc2xlZXAuCisJICogV2UgdHJ5IHRvIG9mZnNldCB0aGUg
Y29zdCBvZiBnb2luZyB0byBzbGVlcCwgYnkgZmlyc3Qgc3Bpbm5pbmcKKwkgKiBvbiB0aGUgcmVx
dWVzdCAtLSBpZiBpdCBjb21wbGV0ZWQgaW4gbGVzcyB0aW1lIHRoYW4gaXQgd291bGQgdGFrZQor
CSAqIHRvIGdvIHNsZWVwLCBwcm9jZXNzIHRoZSBpbnRlcnJ1cHQgYW5kIHJldHVybiBiYWNrIHRv
IHRoZSBjbGllbnQsCisJICogdGhlbiB3ZSBoYXZlIHNhdmVkIHRoZSBjbGllbnQgc29tZSBsYXRl
bmN5LCBhbGJlaXQgYXQgdGhlIGNvc3QKKwkgKiBvZiBzcGlubmluZyBvbiBhbiBleHBlbnNpdmUg
Q1BVIGNvcmUuCisJICoKKwkgKiBXaGlsZSB3ZSB0cnkgdG8gYXZvaWQgd2FpdGluZyBhdCBhbGwg
Zm9yIGEgcmVxdWVzdCB0aGF0IGlzIHVubGlrZWx5CisJICogdG8gY29tcGxldGUsIGRlY2lkaW5n
IGhvdyBsb25nIGl0IGlzIHdvcnRoIHNwaW5uaW5nIGlzIGZvciBpcyBhbgorCSAqIGFyYml0cmFy
eSBkZWNpc2lvbjogdHJhZGluZyBvZmYgcG93ZXIgdnMgbGF0ZW5jeS4KKwkgKi8KKworCWVyciA9
IGtzdHJ0b3VsbChidWYsIDAsICZkdXJhdGlvbik7CisJaWYgKGVycikKKwkJcmV0dXJuIGVycjsK
KworCWlmIChkdXJhdGlvbiA+IGppZmZpZXNfdG9fbnNlY3MoMikpCisJCXJldHVybiAtRUlOVkFM
OworCisJV1JJVEVfT05DRShlbmdpbmUtPnByb3BzLm1heF9idXN5d2FpdF9kdXJhdGlvbl9ucywg
ZHVyYXRpb24pOworCisJcmV0dXJuIGNvdW50OworfQorCitzdGF0aWMgc3NpemVfdAorbWF4X3Nw
aW5fc2hvdyhzdHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IGtvYmpfYXR0cmlidXRlICphdHRy
LCBjaGFyICpidWYpCit7CisJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lID0ga29ial90
b19lbmdpbmUoa29iaik7CisKKwlyZXR1cm4gc3ByaW50ZihidWYsICIlbHVcbiIsIGVuZ2luZS0+
cHJvcHMubWF4X2J1c3l3YWl0X2R1cmF0aW9uX25zKTsKK30KKworc3RhdGljIHN0cnVjdCBrb2Jq
X2F0dHJpYnV0ZSBtYXhfc3Bpbl9hdHRyID0KK19fQVRUUihtYXhfYnVzeXdhaXRfZHVyYXRpb25f
bnMsIDA2NDQsIG1heF9zcGluX3Nob3csIG1heF9zcGluX3N0b3JlKTsKKwogc3RhdGljIHNzaXpl
X3QKIHRpbWVzbGljZV9zdG9yZShzdHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IGtvYmpfYXR0
cmlidXRlICphdHRyLAogCQljb25zdCBjaGFyICpidWYsIHNpemVfdCBjb3VudCkKQEAgLTIyNCw2
ICsyNzIsNyBAQCB2b2lkIGludGVsX2VuZ2luZXNfYWRkX3N5c2ZzKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1KQogCQkmbW1pb19hdHRyLmF0dHIsCiAJCSZjYXBzX2F0dHIuYXR0ciwKIAkJ
JmFsbF9jYXBzX2F0dHIuYXR0ciwKKwkJJm1heF9zcGluX2F0dHIuYXR0ciwKIAkJTlVMTAogCX07
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBl
cy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKaW5kZXgg
NmJkY2EzZTdhZTlmLi45MjZlNTBiNmZiYzkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZV90eXBlcy5oCkBAIC01MTYsNiArNTE2LDcgQEAgc3RydWN0IGludGVsX2Vu
Z2luZV9jcyB7CiAKIAlzdHJ1Y3QgewogCQl1bnNpZ25lZCBsb25nIGhlYXJ0YmVhdF9pbnRlcnZh
bF9tczsKKwkJdW5zaWduZWQgbG9uZyBtYXhfYnVzeXdhaXRfZHVyYXRpb25fbnM7CiAJCXVuc2ln
bmVkIGxvbmcgcHJlZW1wdF90aW1lb3V0X21zOwogCQl1bnNpZ25lZCBsb25nIHN0b3BfdGltZW91
dF9tczsKIAkJdW5zaWduZWQgbG9uZyB0aW1lc2xpY2VfZHVyYXRpb25fbXM7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVxdWVzdC5jCmluZGV4IDIwZWVlZjM4NjU3Ny4uNWI5ZDIxMTBjNTczIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYwpAQCAtMTMwMyw3ICsxMzAzLDcgQEAgdm9pZCBp
OTE1X3JlcXVlc3RfYWRkKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQogCW11dGV4X3VubG9jaygm
dGwtPm11dGV4KTsKIH0KIAotc3RhdGljIHVuc2lnbmVkIGxvbmcgbG9jYWxfY2xvY2tfdXModW5z
aWduZWQgaW50ICpjcHUpCitzdGF0aWMgdW5zaWduZWQgbG9uZyBsb2NhbF9jbG9ja19ucyh1bnNp
Z25lZCBpbnQgKmNwdSkKIHsKIAl1bnNpZ25lZCBsb25nIHQ7CiAKQEAgLTEzMjAsNyArMTMyMCw3
IEBAIHN0YXRpYyB1bnNpZ25lZCBsb25nIGxvY2FsX2Nsb2NrX3VzKHVuc2lnbmVkIGludCAqY3B1
KQogCSAqIHN0b3AgYnVzeXdhaXRpbmcsIHNlZSBidXN5d2FpdF9zdG9wKCkuCiAJICovCiAJKmNw
dSA9IGdldF9jcHUoKTsKLQl0ID0gbG9jYWxfY2xvY2soKSA+PiAxMDsKKwl0ID0gbG9jYWxfY2xv
Y2soKTsKIAlwdXRfY3B1KCk7CiAKIAlyZXR1cm4gdDsKQEAgLTEzMzAsMTUgKzEzMzAsMTUgQEAg
c3RhdGljIGJvb2wgYnVzeXdhaXRfc3RvcCh1bnNpZ25lZCBsb25nIHRpbWVvdXQsIHVuc2lnbmVk
IGludCBjcHUpCiB7CiAJdW5zaWduZWQgaW50IHRoaXNfY3B1OwogCi0JaWYgKHRpbWVfYWZ0ZXIo
bG9jYWxfY2xvY2tfdXMoJnRoaXNfY3B1KSwgdGltZW91dCkpCisJaWYgKHRpbWVfYWZ0ZXIobG9j
YWxfY2xvY2tfbnMoJnRoaXNfY3B1KSwgdGltZW91dCkpCiAJCXJldHVybiB0cnVlOwogCiAJcmV0
dXJuIHRoaXNfY3B1ICE9IGNwdTsKIH0KIAotc3RhdGljIGJvb2wgX19pOTE1X3NwaW5fcmVxdWVz
dChjb25zdCBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICogY29uc3QgcnEsCi0JCQkJaW50IHN0YXRlLCB1
bnNpZ25lZCBsb25nIHRpbWVvdXRfdXMpCitzdGF0aWMgYm9vbCBfX2k5MTVfc3Bpbl9yZXF1ZXN0
KGNvbnN0IHN0cnVjdCBpOTE1X3JlcXVlc3QgKiBjb25zdCBycSwgaW50IHN0YXRlKQogeworCXVu
c2lnbmVkIGxvbmcgdGltZW91dF9uczsKIAl1bnNpZ25lZCBpbnQgY3B1OwogCiAJLyoKQEAgLTEz
NjYsNyArMTM2Niw4IEBAIHN0YXRpYyBib29sIF9faTkxNV9zcGluX3JlcXVlc3QoY29uc3Qgc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqIGNvbnN0IHJxLAogCSAqIHRha2VzIHRvIHNsZWVwIG9uIGEgcmVx
dWVzdCwgb24gdGhlIG9yZGVyIG9mIGEgbWljcm9zZWNvbmQuCiAJICovCiAKLQl0aW1lb3V0X3Vz
ICs9IGxvY2FsX2Nsb2NrX3VzKCZjcHUpOworCXRpbWVvdXRfbnMgPSBSRUFEX09OQ0UocnEtPmVu
Z2luZS0+cHJvcHMubWF4X2J1c3l3YWl0X2R1cmF0aW9uX25zKTsKKwl0aW1lb3V0X25zICs9IGxv
Y2FsX2Nsb2NrX25zKCZjcHUpOwogCWRvIHsKIAkJaWYgKGk5MTVfcmVxdWVzdF9jb21wbGV0ZWQo
cnEpKQogCQkJcmV0dXJuIHRydWU7CkBAIC0xMzc0LDcgKzEzNzUsNyBAQCBzdGF0aWMgYm9vbCBf
X2k5MTVfc3Bpbl9yZXF1ZXN0KGNvbnN0IHN0cnVjdCBpOTE1X3JlcXVlc3QgKiBjb25zdCBycSwK
IAkJaWYgKHNpZ25hbF9wZW5kaW5nX3N0YXRlKHN0YXRlLCBjdXJyZW50KSkKIAkJCWJyZWFrOwog
Ci0JCWlmIChidXN5d2FpdF9zdG9wKHRpbWVvdXRfdXMsIGNwdSkpCisJCWlmIChidXN5d2FpdF9z
dG9wKHRpbWVvdXRfbnMsIGNwdSkpCiAJCQlicmVhazsKIAogCQljcHVfcmVsYXgoKTsKQEAgLTE0
NjAsOCArMTQ2MSw4IEBAIGxvbmcgaTkxNV9yZXF1ZXN0X3dhaXQoc3RydWN0IGk5MTVfcmVxdWVz
dCAqcnEsCiAJICogY29tcGxldGlvbi4gVGhhdCByZXF1aXJlcyBoYXZpbmcgYSBnb29kIHByZWRp
Y3RvciBmb3IgdGhlIHJlcXVlc3QKIAkgKiBkdXJhdGlvbiwgd2hpY2ggd2UgY3VycmVudGx5IGxh
Y2suCiAJICovCi0JaWYgKElTX0FDVElWRShDT05GSUdfRFJNX0k5MTVfU1BJTl9SRVFVRVNUKSAm
JgotCSAgICBfX2k5MTVfc3Bpbl9yZXF1ZXN0KHJxLCBzdGF0ZSwgQ09ORklHX0RSTV9JOTE1X1NQ
SU5fUkVRVUVTVCkpIHsKKwlpZiAoSVNfQUNUSVZFKENPTkZJR19EUk1fSTkxNV9NQVhfUkVRVUVT
VF9CVVNZV0FJVCkgJiYKKwkgICAgX19pOTE1X3NwaW5fcmVxdWVzdChycSwgc3RhdGUpKSB7CiAJ
CWRtYV9mZW5jZV9zaWduYWwoJnJxLT5mZW5jZSk7CiAJCWdvdG8gb3V0OwogCX0KLS0gCjIuMjQu
MAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwt
Z2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 74DE1389D0
	for <lists+intel-gfx@lfdr.de>; Fri,  7 Jun 2019 14:08:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C9ABE89DA3;
	Fri,  7 Jun 2019 12:08:51 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0DB8989DA3
 for <Intel-gfx@lists.freedesktop.org>; Fri,  7 Jun 2019 12:08:50 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 07 Jun 2019 05:08:49 -0700
X-ExtLoop1: 1
Received: from ssirotki-mobl3.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.251.93.246])
 by fmsmga007.fm.intel.com with ESMTP; 07 Jun 2019 05:08:48 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Fri,  7 Jun 2019 13:08:33 +0100
Message-Id: <20190607120838.20514-8-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607120838.20514-1-tvrtko.ursulin@linux.intel.com>
References: <20190607120838.20514-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC 07/12] drm/i915: Remove I915_READ8
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCk9ubHkgYSBm
ZXcgY2FsbCBzaXRlcyByZW1haW4gd2hpY2ggaGF2ZSBiZWVuIGNvbnZlcnRlZCB0byB1bmNvcmUg
bW1pbwphY2Nlc3NvcnMgYW5kIHNvIHRoZSBtYWNybyBjYW4gYmUgcmVtb3ZlZC4KClNpZ25lZC1v
ZmYtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Ci0tLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgfCAgMiAtLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfY3J0LmMgfCA0MSArKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyAgfCAgNiArKy0tLQogMyBmaWxlcyBjaGFuZ2Vk
LCAyNiBpbnNlcnRpb25zKCspLCAyMyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYu
aAppbmRleCBiMjc2MzcyMWI3NmQuLjEzODE1Nzk1ZTE5NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5oCkBAIC0yODUyLDggKzI4NTIsNiBAQCBleHRlcm4gdm9pZCBpbnRlbF9kaXNwbGF5X3ByaW50
X2Vycm9yX3N0YXRlKHN0cnVjdCBkcm1faTkxNV9lcnJvcl9zdGF0ZV9idWYgKmUsCiAjZGVmaW5l
IF9fSTkxNV9SRUdfT1Aob3BfXywgZGV2X3ByaXZfXywgLi4uKSBcCiAJaW50ZWxfdW5jb3JlXyMj
b3BfXygmKGRldl9wcml2X18pLT51bmNvcmUsIF9fVkFfQVJHU19fKQogCi0jZGVmaW5lIEk5MTVf
UkVBRDgocmVnX18pCSAgX19JOTE1X1JFR19PUChyZWFkOCwgZGV2X3ByaXYsIChyZWdfXykpCi0K
ICNkZWZpbmUgSTkxNV9SRUFEMTYocmVnX18pCSAgIF9fSTkxNV9SRUdfT1AocmVhZDE2LCBkZXZf
cHJpdiwgKHJlZ19fKSkKICNkZWZpbmUgSTkxNV9XUklURTE2KHJlZ19fLCB2YWxfXykgX19JOTE1
X1JFR19PUCh3cml0ZTE2LCBkZXZfcHJpdiwgKHJlZ19fKSwgKHZhbF9fKSkKIApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfY3J0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pbnRlbF9jcnQuYwppbmRleCBiYjU2NTE4NTc2YTEuLjNmY2YyZjg0YmNjZSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfY3J0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaW50ZWxfY3J0LmMKQEAgLTY0Myw2ICs2NDMsNyBAQCBpbnRlbF9jcnRfbG9hZF9kZXRl
Y3Qoc3RydWN0IGludGVsX2NydCAqY3J0LCB1MzIgcGlwZSkKIHsKIAlzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZGV2ID0gY3J0LT5iYXNlLmJhc2UuZGV2OwogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiA9IHRvX2k5MTUoZGV2KTsKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSAm
ZGV2X3ByaXYtPnVuY29yZTsKIAl1MzIgc2F2ZV9iY2xycGF0OwogCXUzMiBzYXZlX3Z0b3RhbDsK
IAl1MzIgdnRvdGFsLCB2YWN0aXZlOwpAQCAtNjYzLDkgKzY2NCw5IEBAIGludGVsX2NydF9sb2Fk
X2RldGVjdChzdHJ1Y3QgaW50ZWxfY3J0ICpjcnQsIHUzMiBwaXBlKQogCXBpcGVjb25mX3JlZyA9
IFBJUEVDT05GKHBpcGUpOwogCXBpcGVfZHNsX3JlZyA9IFBJUEVEU0wocGlwZSk7CiAKLQlzYXZl
X2JjbHJwYXQgPSBJOTE1X1JFQUQoYmNscnBhdF9yZWcpOwotCXNhdmVfdnRvdGFsID0gSTkxNV9S
RUFEKHZ0b3RhbF9yZWcpOwotCXZibGFuayA9IEk5MTVfUkVBRCh2YmxhbmtfcmVnKTsKKwlzYXZl
X2JjbHJwYXQgPSBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIGJjbHJwYXRfcmVnKTsKKwlzYXZl
X3Z0b3RhbCA9IGludGVsX3VuY29yZV9yZWFkKHVuY29yZSwgdnRvdGFsX3JlZyk7CisJdmJsYW5r
ID0gaW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCB2YmxhbmtfcmVnKTsKIAogCXZ0b3RhbCA9ICgo
c2F2ZV92dG90YWwgPj4gMTYpICYgMHhmZmYpICsgMTsKIAl2YWN0aXZlID0gKHNhdmVfdnRvdGFs
ICYgMHg3ZmYpICsgMTsKQEAgLTY3NCwyMSArNjc1LDIzIEBAIGludGVsX2NydF9sb2FkX2RldGVj
dChzdHJ1Y3QgaW50ZWxfY3J0ICpjcnQsIHUzMiBwaXBlKQogCXZibGFua19lbmQgPSAoKHZibGFu
ayA+PiAxNikgJiAweGZmZikgKyAxOwogCiAJLyogU2V0IHRoZSBib3JkZXIgY29sb3IgdG8gcHVy
cGxlLiAqLwotCUk5MTVfV1JJVEUoYmNscnBhdF9yZWcsIDB4NTAwMDUwKTsKKwlpbnRlbF91bmNv
cmVfd3JpdGUodW5jb3JlLCBiY2xycGF0X3JlZywgMHg1MDAwNTApOwogCiAJaWYgKCFJU19HRU4o
ZGV2X3ByaXYsIDIpKSB7Ci0JCXUzMiBwaXBlY29uZiA9IEk5MTVfUkVBRChwaXBlY29uZl9yZWcp
OwotCQlJOTE1X1dSSVRFKHBpcGVjb25mX3JlZywgcGlwZWNvbmYgfCBQSVBFQ09ORl9GT1JDRV9C
T1JERVIpOwotCQlQT1NUSU5HX1JFQUQocGlwZWNvbmZfcmVnKTsKKwkJdTMyIHBpcGVjb25mID0g
aW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBwaXBlY29uZl9yZWcpOworCQlpbnRlbF91bmNvcmVf
d3JpdGUodW5jb3JlLAorCQkJCSAgIHBpcGVjb25mX3JlZywKKwkJCQkgICBwaXBlY29uZiB8IFBJ
UEVDT05GX0ZPUkNFX0JPUkRFUik7CisJCWludGVsX3VuY29yZV9wb3N0aW5nX3JlYWQodW5jb3Jl
LCBwaXBlY29uZl9yZWcpOwogCQkvKiBXYWl0IGZvciBuZXh0IFZibGFuayB0byBzdWJzdGl0dWUK
IAkJICogYm9yZGVyIGNvbG9yIGZvciBDb2xvciBpbmZvICovCiAJCWludGVsX3dhaXRfZm9yX3Zi
bGFuayhkZXZfcHJpdiwgcGlwZSk7Ci0JCXN0MDAgPSBJOTE1X1JFQUQ4KF9WR0FfTVNSX1dSSVRF
KTsKKwkJc3QwMCA9IGludGVsX3VuY29yZV9yZWFkOCh1bmNvcmUsIF9WR0FfTVNSX1dSSVRFKTsK
IAkJc3RhdHVzID0gKChzdDAwICYgKDEgPDwgNCkpICE9IDApID8KIAkJCWNvbm5lY3Rvcl9zdGF0
dXNfY29ubmVjdGVkIDoKIAkJCWNvbm5lY3Rvcl9zdGF0dXNfZGlzY29ubmVjdGVkOwogCi0JCUk5
MTVfV1JJVEUocGlwZWNvbmZfcmVnLCBwaXBlY29uZik7CisJCWludGVsX3VuY29yZV93cml0ZSh1
bmNvcmUsIHBpcGVjb25mX3JlZywgcGlwZWNvbmYpOwogCX0gZWxzZSB7CiAJCWJvb2wgcmVzdG9y
ZV92YmxhbmsgPSBmYWxzZTsKIAkJaW50IGNvdW50LCBkZXRlY3Q7CkBAIC03MDIsOSArNzA1LDEw
IEBAIGludGVsX2NydF9sb2FkX2RldGVjdChzdHJ1Y3QgaW50ZWxfY3J0ICpjcnQsIHUzMiBwaXBl
KQogCQkJdTMyIHZzeW5jX3N0YXJ0ID0gKHZzeW5jICYgMHhmZmZmKSArIDE7CiAKIAkJCXZibGFu
a19zdGFydCA9IHZzeW5jX3N0YXJ0OwotCQkJSTkxNV9XUklURSh2YmxhbmtfcmVnLAotCQkJCSAg
ICh2Ymxhbmtfc3RhcnQgLSAxKSB8Ci0JCQkJICAgKCh2YmxhbmtfZW5kIC0gMSkgPDwgMTYpKTsK
KwkJCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCisJCQkJCSAgIHZibGFua19yZWcsCisJCQkJ
CSAgICh2Ymxhbmtfc3RhcnQgLSAxKSB8CisJCQkJCSAgICgodmJsYW5rX2VuZCAtIDEpIDw8IDE2
KSk7CiAJCQlyZXN0b3JlX3ZibGFuayA9IHRydWU7CiAJCX0KIAkJLyogc2FtcGxlIGluIHRoZSB2
ZXJ0aWNhbCBib3JkZXIsIHNlbGVjdGluZyB0aGUgbGFyZ2VyIG9uZSAqLwpAQCAtNzE2LDkgKzcy
MCwxMCBAQCBpbnRlbF9jcnRfbG9hZF9kZXRlY3Qoc3RydWN0IGludGVsX2NydCAqY3J0LCB1MzIg
cGlwZSkKIAkJLyoKIAkJICogV2FpdCBmb3IgdGhlIGJvcmRlciB0byBiZSBkaXNwbGF5ZWQKIAkJ
ICovCi0JCXdoaWxlIChJOTE1X1JFQUQocGlwZV9kc2xfcmVnKSA+PSB2YWN0aXZlKQorCQl3aGls
ZSAoaW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBwaXBlX2RzbF9yZWcpID49IHZhY3RpdmUpCiAJ
CQk7Ci0JCXdoaWxlICgoZHNsID0gSTkxNV9SRUFEKHBpcGVfZHNsX3JlZykpIDw9IHZzYW1wbGUp
CisJCXdoaWxlICgoZHNsID0gaW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLCBwaXBlX2RzbF9yZWcp
KSA8PQorCQkgICAgICAgdnNhbXBsZSkKIAkJCTsKIAkJLyoKIAkJICogV2F0Y2ggU1QwMCBmb3Ig
YW4gZW50aXJlIHNjYW5saW5lCkBAIC03MjgsMTQgKzczMywxNCBAQCBpbnRlbF9jcnRfbG9hZF9k
ZXRlY3Qoc3RydWN0IGludGVsX2NydCAqY3J0LCB1MzIgcGlwZSkKIAkJZG8gewogCQkJY291bnQr
KzsKIAkJCS8qIFJlYWQgdGhlIFNUMDAgVkdBIHN0YXR1cyByZWdpc3RlciAqLwotCQkJc3QwMCA9
IEk5MTVfUkVBRDgoX1ZHQV9NU1JfV1JJVEUpOworCQkJc3QwMCA9IGludGVsX3VuY29yZV9yZWFk
OCh1bmNvcmUsIF9WR0FfTVNSX1dSSVRFKTsKIAkJCWlmIChzdDAwICYgKDEgPDwgNCkpCiAJCQkJ
ZGV0ZWN0Kys7Ci0JCX0gd2hpbGUgKChJOTE1X1JFQUQocGlwZV9kc2xfcmVnKSA9PSBkc2wpKTsK
KwkJfSB3aGlsZSAoKGludGVsX3VuY29yZV9yZWFkKHVuY29yZSwgcGlwZV9kc2xfcmVnKSA9PSBk
c2wpKTsKIAogCQkvKiByZXN0b3JlIHZibGFuayBpZiBuZWNlc3NhcnkgKi8KIAkJaWYgKHJlc3Rv
cmVfdmJsYW5rKQotCQkJSTkxNV9XUklURSh2YmxhbmtfcmVnLCB2YmxhbmspOworCQkJaW50ZWxf
dW5jb3JlX3dyaXRlKHVuY29yZSwgdmJsYW5rX3JlZywgdmJsYW5rKTsKIAkJLyoKIAkJICogSWYg
bW9yZSB0aGFuIDMvNCBvZiB0aGUgc2NhbmxpbmUgZGV0ZWN0ZWQgYSBtb25pdG9yLAogCQkgKiB0
aGVuIGl0IGlzIGFzc3VtZWQgdG8gYmUgcHJlc2VudC4gVGhpcyB3b3JrcyBldmVuIG9uIGk4MzAs
CkBAIC03NDgsNyArNzUzLDcgQEAgaW50ZWxfY3J0X2xvYWRfZGV0ZWN0KHN0cnVjdCBpbnRlbF9j
cnQgKmNydCwgdTMyIHBpcGUpCiAJfQogCiAJLyogUmVzdG9yZSBwcmV2aW91cyBzZXR0aW5ncyAq
LwotCUk5MTVfV1JJVEUoYmNscnBhdF9yZWcsIHNhdmVfYmNscnBhdCk7CisJaW50ZWxfdW5jb3Jl
X3dyaXRlKHVuY29yZSwgYmNscnBhdF9yZWcsIHNhdmVfYmNscnBhdCk7CiAKIAlyZXR1cm4gc3Rh
dHVzOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKaW5kZXggZDcyNzJkNGZmMjU4Li45M2U0MTFl
NmFkMTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYwpAQCAtODE2MCwxNSArODE2MCwxNSBAQCB1
bnNpZ25lZCBsb25nIGk5MTVfY2hpcHNldF92YWwoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2KQogCXJldHVybiB2YWw7CiB9CiAKLXVuc2lnbmVkIGxvbmcgaTkxNV9tY2hfdmFsKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3Vuc2lnbmVkIGxvbmcgaTkxNV9tY2hf
dmFsKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewogCXVuc2lnbmVkIGxvbmcgbSwg
eCwgYjsKIAl1MzIgdHNmczsKIAotCXRzZnMgPSBJOTE1X1JFQUQoVFNGUyk7CisJdHNmcyA9IGlu
dGVsX3VuY29yZV9yZWFkKCZpOTE1LT51bmNvcmUsIFRTRlMpOwogCiAJbSA9ICgodHNmcyAmIFRT
RlNfU0xPUEVfTUFTSykgPj4gVFNGU19TTE9QRV9TSElGVCk7Ci0JeCA9IEk5MTVfUkVBRDgoVFIx
KTsKKwl4ID0gaW50ZWxfdW5jb3JlX3JlYWQ4KCZpOTE1LT51bmNvcmUsIFRSMSk7CiAKIAliID0g
dHNmcyAmIFRTRlNfSU5UUl9NQVNLOwogCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwt
Z2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

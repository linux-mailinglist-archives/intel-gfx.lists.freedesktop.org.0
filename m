Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C40822D0B6
	for <lists+intel-gfx@lfdr.de>; Tue, 28 May 2019 22:52:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9E2EF6E05F;
	Tue, 28 May 2019 20:52:19 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C1A6E6E063
 for <intel-gfx@lists.freedesktop.org>; Tue, 28 May 2019 20:52:18 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 16711850-1500050 for multiple; Tue, 28 May 2019 21:52:07 +0100
MIME-Version: 1.0
To: Matthew Auld <matthew.auld@intel.com>, intel-gfx@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <20190528195724.2786-2-matthew.auld@intel.com>
References: <20190528195724.2786-1-matthew.auld@intel.com>
 <20190528195724.2786-2-matthew.auld@intel.com>
Message-ID: <155907672446.13891.15224037398405673437@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Tue, 28 May 2019 21:52:04 +0100
Subject: Re: [Intel-gfx] [PATCH v5 2/2] drm/i915: add in-kernel blitter
 client
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: CQ Tang <cq.tang@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBNYXR0aGV3IEF1bGQgKDIwMTktMDUtMjggMjA6NTc6MjQpCj4gVGhlIHBsYW4gaXMg
dG8gdXNlIHRoZSBibGl0dGVyIGVuZ2luZSBmb3IgYXN5bmMgb2JqZWN0IGNsZWFyaW5nIHdoZW4K
PiB1c2luZyBsb2NhbCBtZW1vcnksIGJ1dCBiZWZvcmUgd2UgY2FuIG1vdmUgdGhlIHdvcmtlciB0
byBnZXRfcGFnZXMoKSB3ZQo+IGhhdmUgdG8gZmlyc3QgdGFtZSBzb21lIG1vcmUgb2Ygb3VyIHN0
cnVjdF9tdXRleCB1c2FnZS4gV2l0aCB0aGlzIGluCj4gbWluZCB3ZSBzaG91bGQgYmUgYWJsZSB0
byB1cHN0cmVhbSB0aGUgb2JqZWN0IGNsZWFyaW5nIGFzIHNvbWUKPiBzZWxmdGVzdHMsIHdoaWNo
IHNob3VsZCBzZXJ2ZSBhcyBhIGd1aW5lYSBwaWcgZm9yIHRoZSBvbmdvaW5nIGxvY2tpbmcKPiBy
ZXdvcmsgYW5kIHVwY29taW5nIGFzeW5jIGdldF9wYWdlcygpIGZyYW1ld29yay4KPiAKPiBTaWdu
ZWQtb2ZmLWJ5OiBNYXR0aGV3IEF1bGQgPG1hdHRoZXcuYXVsZEBpbnRlbC5jb20+Cj4gQ2M6IENR
IFRhbmcgPGNxLnRhbmdAaW50ZWwuY29tPgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9N
YWtlZmlsZSAgICAgICAgICAgICAgICAgfCAgIDIgKwo+ICAuLi4vZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9jbGllbnRfYmx0LmMgICAgfCAzMDYgKysrKysrKysrKysrKysrKysrCj4gIC4uLi9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NsaWVudF9ibHQuaCAgICB8ICAyMSArKwo+ICAuLi4v
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfYmx0LmMgICAgfCAxMDkgKysrKysrKwo+
ICAuLi4vZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfYmx0LmggICAgfCAgMjQgKysK
PiAgLi4uL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jbGllbnRfYmx0LmMgIHwgMTI3ICsr
KysrKysrCj4gIC4uLi9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fb2JqZWN0X2JsdC5jICB8
IDExMSArKysrKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5k
cy5oICB8ICAgMSArCj4gIC4uLi9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9saXZlX3NlbGZ0ZXN0
cy5oICB8ICAgMiArCj4gIDkgZmlsZXMgY2hhbmdlZCwgNzAzIGluc2VydGlvbnMoKykKPiAgY3Jl
YXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jbGllbnRf
Ymx0LmMKPiAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9jbGllbnRfYmx0LmgKPiAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfYmx0LmMKPiAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfYmx0LmgKPiAgY3JlYXRlIG1vZGUg
MTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY2xpZW50
X2JsdC5jCj4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2Vs
ZnRlc3RzL2k5MTVfZ2VtX29iamVjdF9ibHQuYwo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCj4gaW5k
ZXggODM1ODhlOTg0MGY4Li5hNzg1MGJiZmZiZTAgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvTWFrZWZpbGUKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQo+
IEBAIC05MCw2ICs5MCw3IEBAIG9iai15ICs9IGdlbS8KPiAgZ2VtLXkgKz0gXAo+ICAgICAgICAg
Z2VtL2k5MTVfZ2VtX2J1c3kubyBcCj4gICAgICAgICBnZW0vaTkxNV9nZW1fY2xmbHVzaC5vIFwK
PiArICAgICAgIGdlbS9pOTE1X2dlbV9jbGllbnRfYmx0Lm8gXAo+ICAgICAgICAgZ2VtL2k5MTVf
Z2VtX2NvbnRleHQubyBcCj4gICAgICAgICBnZW0vaTkxNV9nZW1fZG1hYnVmLm8gXAo+ICAgICAg
ICAgZ2VtL2k5MTVfZ2VtX2RvbWFpbi5vIFwKPiBAQCAtOTcsNiArOTgsNyBAQCBnZW0teSArPSBc
Cj4gICAgICAgICBnZW0vaTkxNV9nZW1fZmVuY2UubyBcCj4gICAgICAgICBnZW0vaTkxNV9nZW1f
aW50ZXJuYWwubyBcCj4gICAgICAgICBnZW0vaTkxNV9nZW1fb2JqZWN0Lm8gXAo+ICsgICAgICAg
Z2VtL2k5MTVfZ2VtX29iamVjdF9ibHQubyBcCj4gICAgICAgICBnZW0vaTkxNV9nZW1fbW1hbi5v
IFwKPiAgICAgICAgIGdlbS9pOTE1X2dlbV9wYWdlcy5vIFwKPiAgICAgICAgIGdlbS9pOTE1X2dl
bV9waHlzLm8gXAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fY2xpZW50X2JsdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NsaWVu
dF9ibHQuYwo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAwLi4yZDhj
ZjI5YTU3OTYKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX2NsaWVudF9ibHQuYwo+IEBAIC0wLDAgKzEsMzA2IEBACj4gKy8vIFNQRFgtTGlj
ZW5zZS1JZGVudGlmaWVyOiBNSVQKPiArLyoKPiArICogQ29weXJpZ2h0IMKpIDIwMTkgSW50ZWwg
Q29ycG9yYXRpb24KPiArICovCj4gKyNpbmNsdWRlICJpOTE1X2dlbV9jbGllbnRfYmx0LmgiCj4g
Kwo+ICsjaW5jbHVkZSAiaTkxNV9nZW1fb2JqZWN0X2JsdC5oIgo+ICsjaW5jbHVkZSAiaW50ZWxf
ZHJ2LmgiCj4gKwo+ICtzdHJ1Y3QgaTkxNV9zbGVldmUgewo+ICsgICAgICAgc3RydWN0IGk5MTVf
dm1hICp2bWE7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwo+ICsg
ICAgICAgc3RydWN0IHNnX3RhYmxlICpwYWdlczsKPiArICAgICAgIHN0cnVjdCBpOTE1X3BhZ2Vf
c2l6ZXMgcGFnZV9zaXplczsKPiArfTsKPiArCj4gK3N0YXRpYyBpbnQgdm1hX3NldF9wYWdlcyhz
dHJ1Y3QgaTkxNV92bWEgKnZtYSkKPiArewo+ICsgICAgICAgc3RydWN0IGk5MTVfc2xlZXZlICpz
bGVldmUgPSB2bWEtPnByaXZhdGU7Cj4gKwo+ICsgICAgICAgdm1hLT5wYWdlcyA9IHNsZWV2ZS0+
cGFnZXM7Cj4gKyAgICAgICB2bWEtPnBhZ2Vfc2l6ZXMgPSBzbGVldmUtPnBhZ2Vfc2l6ZXM7Cj4g
Kwo+ICsgICAgICAgcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHZtYV9jbGVhcl9w
YWdlcyhzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKPiArewo+ICsgICAgICAgR0VNX0JVR19PTighdm1h
LT5wYWdlcyk7Cj4gKyAgICAgICB2bWEtPnBhZ2VzID0gTlVMTDsKPiArfQo+ICsKPiArc3RhdGlj
IGludCB2bWFfYmluZChzdHJ1Y3QgaTkxNV92bWEgKnZtYSwKPiArICAgICAgICAgICAgICAgICAg
IGVudW0gaTkxNV9jYWNoZV9sZXZlbCBjYWNoZV9sZXZlbCwKPiArICAgICAgICAgICAgICAgICAg
IHUzMiBmbGFncykKPiArewo+ICsgICAgICAgcmV0dXJuIHZtYS0+dm0tPnZtYV9vcHMuYmluZF92
bWEodm1hLCBjYWNoZV9sZXZlbCwgZmxhZ3MpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2bWFf
dW5iaW5kKHN0cnVjdCBpOTE1X3ZtYSAqdm1hKQo+ICt7Cj4gKyAgICAgICB2bWEtPnZtLT52bWFf
b3BzLnVuYmluZF92bWEodm1hKTsKPiArfQo+ICsKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBpOTE1
X3ZtYV9vcHMgcHJveHlfdm1hX29wcyA9IHsKPiArICAgICAgIC5zZXRfcGFnZXMgPSB2bWFfc2V0
X3BhZ2VzLAo+ICsgICAgICAgLmNsZWFyX3BhZ2VzID0gdm1hX2NsZWFyX3BhZ2VzLAo+ICsgICAg
ICAgLmJpbmRfdm1hID0gdm1hX2JpbmQsCj4gKyAgICAgICAudW5iaW5kX3ZtYSA9IHZtYV91bmJp
bmQsCj4gK307Cj4gKwo+ICtzdGF0aWMgc3RydWN0IGk5MTVfc2xlZXZlICpjcmVhdGVfc2xlZXZl
KHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBzZ190YWJsZSAqcGFn
ZXMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaTkx
NV9wYWdlX3NpemVzICpwYWdlX3NpemVzKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgaTkxNV9zbGVl
dmUgKnNsZWV2ZTsKPiArICAgICAgIHN0cnVjdCBpOTE1X3ZtYSAqdm1hOwo+ICsgICAgICAgaW50
IGVycjsKPiArCj4gKyAgICAgICBzbGVldmUgPSBremFsbG9jKHNpemVvZigqc2xlZXZlKSwgR0ZQ
X0tFUk5FTCk7Cj4gKyAgICAgICBpZiAoIXNsZWV2ZSkKPiArICAgICAgICAgICAgICAgcmV0dXJu
IEVSUl9QVFIoLUVOT01FTSk7Cj4gKwo+ICsgICAgICAgdm1hID0gaTkxNV92bWFfaW5zdGFuY2Uo
b2JqLCB2bSwgTlVMTCk7Cj4gKyAgICAgICBpZiAoSVNfRVJSKHZtYSkpIHsKPiArICAgICAgICAg
ICAgICAgZXJyID0gUFRSX0VSUih2bWEpOwo+ICsgICAgICAgICAgICAgICBnb3RvIGVycl9mcmVl
Owo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIHZtYS0+cHJpdmF0ZSA9IHNsZWV2ZTsKPiArICAg
ICAgIHZtYS0+b3BzID0gJnByb3h5X3ZtYV9vcHM7Cj4gKwo+ICsgICAgICAgc2xlZXZlLT52bWEg
PSB2bWE7Cj4gKyAgICAgICBzbGVldmUtPm9iaiA9IGk5MTVfZ2VtX29iamVjdF9nZXQob2JqKTsK
PiArICAgICAgIHNsZWV2ZS0+cGFnZXMgPSBwYWdlczsKPiArICAgICAgIHNsZWV2ZS0+cGFnZV9z
aXplcyA9ICpwYWdlX3NpemVzOwo+ICsKPiArICAgICAgIHJldHVybiBzbGVldmU7Cj4gKwo+ICtl
cnJfZnJlZToKPiArICAgICAgIGtmcmVlKHNsZWV2ZSk7Cj4gKyAgICAgICByZXR1cm4gRVJSX1BU
UihlcnIpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBkZXN0cm95X3NsZWV2ZShzdHJ1Y3QgaTkx
NV9zbGVldmUgKnNsZWV2ZSkKPiArewo+ICsgICAgICAgaTkxNV9nZW1fb2JqZWN0X3B1dChzbGVl
dmUtPm9iaik7Cj4gKyAgICAgICBrZnJlZShzbGVldmUpOwo+ICt9Cj4gKwo+ICtzdHJ1Y3QgY2xl
YXJfcGFnZXNfd29yayB7Cj4gKyAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlIGRtYTsKPiArICAgICAg
IHN0cnVjdCBkbWFfZmVuY2VfY2IgY2I7Cj4gKyAgICAgICBzdHJ1Y3QgaTkxNV9zd19mZW5jZSB3
YWl0Owo+ICsgICAgICAgc3RydWN0IHdvcmtfc3RydWN0IHdvcms7Cj4gKyAgICAgICBzdHJ1Y3Qg
aXJxX3dvcmsgaXJxX3dvcms7Cj4gKyAgICAgICBzdHJ1Y3QgaTkxNV9zbGVldmUgKnNsZWV2ZTsK
PiArICAgICAgIHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZTsKPiArICAgICAgIHUzMiB2YWx1ZTsK
PiArfTsKPiArCj4gK3N0YXRpYyBjb25zdCBjaGFyICpjbGVhcl9wYWdlc193b3JrX2RyaXZlcl9u
YW1lKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQo+ICt7Cj4gKyAgICAgICByZXR1cm4gRFJJVkVS
X05BTUU7Cj4gK30KPiArCj4gK3N0YXRpYyBjb25zdCBjaGFyICpjbGVhcl9wYWdlc193b3JrX3Rp
bWVsaW5lX25hbWUoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCj4gK3sKPiArICAgICAgIHJldHVy
biAiY2xlYXIiOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBjbGVhcl9wYWdlc193b3JrX3JlbGVh
c2Uoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCj4gK3sKPiArICAgICAgIHN0cnVjdCBjbGVhcl9w
YWdlc193b3JrICp3ID0gY29udGFpbmVyX29mKGZlbmNlLCB0eXBlb2YoKncpLCBkbWEpOwo+ICsK
PiArICAgICAgIGRlc3Ryb3lfc2xlZXZlKHctPnNsZWV2ZSk7Cj4gKwo+ICsgICAgICAgaTkxNV9z
d19mZW5jZV9maW5pKCZ3LT53YWl0KTsKPiArCj4gKyAgICAgICBCVUlMRF9CVUdfT04ob2Zmc2V0
b2YodHlwZW9mKCp3KSwgZG1hKSk7Cj4gKyAgICAgICBkbWFfZmVuY2VfZnJlZSgmdy0+ZG1hKTsK
PiArfQo+ICsKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBkbWFfZmVuY2Vfb3BzIGNsZWFyX3BhZ2Vz
X3dvcmtfb3BzID0gewo+ICsgICAgICAgLmdldF9kcml2ZXJfbmFtZSA9IGNsZWFyX3BhZ2VzX3dv
cmtfZHJpdmVyX25hbWUsCj4gKyAgICAgICAuZ2V0X3RpbWVsaW5lX25hbWUgPSBjbGVhcl9wYWdl
c193b3JrX3RpbWVsaW5lX25hbWUsCj4gKyAgICAgICAucmVsZWFzZSA9IGNsZWFyX3BhZ2VzX3dv
cmtfcmVsZWFzZSwKPiArfTsKPiArCj4gK3N0YXRpYyB2b2lkIGNsZWFyX3BhZ2VzX3NpZ25hbF9p
cnFfd29ya2VyKHN0cnVjdCBpcnFfd29yayAqd29yaykKPiArewo+ICsgICAgICAgc3RydWN0IGNs
ZWFyX3BhZ2VzX3dvcmsgKncgPSBjb250YWluZXJfb2Yod29yaywgdHlwZW9mKCp3KSwgaXJxX3dv
cmspOwo+ICsKPiArICAgICAgIGRtYV9mZW5jZV9zaWduYWwoJnctPmRtYSk7Cj4gKyAgICAgICBk
bWFfZmVuY2VfcHV0KCZ3LT5kbWEpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBjbGVhcl9wYWdl
c19kbWFfZmVuY2VfY2Ioc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkbWFfZmVuY2VfY2IgKmNiKQo+ICt7Cj4gKyAg
ICAgICBzdHJ1Y3QgY2xlYXJfcGFnZXNfd29yayAqdyA9IGNvbnRhaW5lcl9vZihjYiwgdHlwZW9m
KCp3KSwgY2IpOwo+ICsKPiArICAgICAgIGlmIChmZW5jZS0+ZXJyb3IpCj4gKyAgICAgICAgICAg
ICAgIGRtYV9mZW5jZV9zZXRfZXJyb3IoJnctPmRtYSwgZmVuY2UtPmVycm9yKTsKPiArCj4gKyAg
ICAgICAvKgo+ICsgICAgICAgICogUHVzaCB0aGUgc2lnbmFsbGluZyBvZiB0aGUgZmVuY2UgaW50
byB5ZXQgYW5vdGhlciB3b3JrZXIgdG8gYXZvaWQKPiArICAgICAgICAqIHRoZSBuaWdodG1hcmUg
bG9ja2luZyBhcm91bmQgdGhlIGZlbmNlIHNwaW5sb2NrLgo+ICsgICAgICAgICovCj4gKyAgICAg
ICBpcnFfd29ya19xdWV1ZSgmdy0+aXJxX3dvcmspOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBj
bGVhcl9wYWdlc193b3JrZXIoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQo+ICt7Cj4gKyAgICAg
ICBzdHJ1Y3QgY2xlYXJfcGFnZXNfd29yayAqdyA9IGNvbnRhaW5lcl9vZih3b3JrLCB0eXBlb2Yo
KncpLCB3b3JrKTsKPiArICAgICAgIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdy0+
Y2UtPmdlbV9jb250ZXh0LT5pOTE1Owo+ICsgICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9vYmpl
Y3QgKm9iaiA9IHctPnNsZWV2ZS0+b2JqOwo+ICsgICAgICAgc3RydWN0IGk5MTVfdm1hICp2bWEg
PSB3LT5zbGVldmUtPnZtYTsKPiArICAgICAgIHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+ICsg
ICAgICAgaW50IGVyciA9IHctPmRtYS5lcnJvcjsKPiArCj4gKyAgICAgICBpZiAodW5saWtlbHko
ZXJyKSkKPiArICAgICAgICAgICAgICAgZ290byBvdXRfc2lnbmFsOwo+ICsKPiArICAgICAgIGlm
IChvYmotPmNhY2hlX2RpcnR5KSB7Cj4gKyAgICAgICAgICAgICAgIG9iai0+d3JpdGVfZG9tYWlu
ID0gMDsKPiArICAgICAgICAgICAgICAgaWYgKGk5MTVfZ2VtX29iamVjdF9oYXNfc3RydWN0X3Bh
Z2Uob2JqKSkKPiArICAgICAgICAgICAgICAgICAgICAgICBkcm1fY2xmbHVzaF9zZyh3LT5zbGVl
dmUtPnBhZ2VzKTsKPiArICAgICAgICAgICAgICAgb2JqLT5jYWNoZV9kaXJ0eSA9IGZhbHNlOwo+
ICsgICAgICAgfQo+ICsKPiArICAgICAgIC8qIFhYWDogd2UgbmVlZCB0byBraWxsIHRoaXMgKi8K
PiArICAgICAgIG11dGV4X2xvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwo+ICsgICAgICAg
ZXJyID0gaTkxNV92bWFfcGluKHZtYSwgMCwgMCwgUElOX1VTRVIpOwoKR2V0dGluZyBjbG9zZXIs
IGRheSBieSBkYXkuCgo+ICsgICAgICAgaWYgKHVubGlrZWx5KGVycikpCj4gKyAgICAgICAgICAg
ICAgIGdvdG8gb3V0X3VubG9jazsKPiArCj4gKyAgICAgICBycSA9IGk5MTVfcmVxdWVzdF9jcmVh
dGUody0+Y2UpOwo+ICsgICAgICAgaWYgKElTX0VSUihycSkpIHsKPiArICAgICAgICAgICAgICAg
ZXJyID0gUFRSX0VSUihycSk7Cj4gKyAgICAgICAgICAgICAgIGdvdG8gb3V0X3VucGluOwo+ICsg
ICAgICAgfQo+ICsKPiArICAgICAgIC8qIFRoZXJlJ3Mgbm8gd2F5IHRoZSBmZW5jZSBoYXMgc2ln
bmFsbGVkICovCj4gKyAgICAgICBpZiAoZG1hX2ZlbmNlX2FkZF9jYWxsYmFjaygmcnEtPmZlbmNl
LCAmdy0+Y2IsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9wYWdl
c19kbWFfZmVuY2VfY2IpKQo+ICsgICAgICAgICAgICAgICBHRU1fQlVHX09OKDEpOwo+ICsKPiAr
ICAgICAgIGlmICh3LT5jZS0+ZW5naW5lLT5lbWl0X2luaXRfYnJlYWRjcnVtYikgewo+ICsgICAg
ICAgICAgICAgICBlcnIgPSB3LT5jZS0+ZW5naW5lLT5lbWl0X2luaXRfYnJlYWRjcnVtYihycSk7
Cj4gKyAgICAgICAgICAgICAgIGlmICh1bmxpa2VseShlcnIpKQo+ICsgICAgICAgICAgICAgICAg
ICAgICAgIGdvdG8gb3V0X3JlcXVlc3Q7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgZXJyID0g
aW50ZWxfZW1pdF92bWFfZmlsbF9ibHQocnEsIHZtYSwgdy0+dmFsdWUpOwo+ICsgICAgICAgaWYg
KHVubGlrZWx5KGVycikpCj4gKyAgICAgICAgICAgICAgIGdvdG8gb3V0X3JlcXVlc3Q7Cj4gKwo+
ICsgICAgICAgLyogWFhYOiBtb3JlIGZldmVyaXNoIG5pZ2h0bWFyZXMgYXdhaXQgKi8KPiArICAg
ICAgIGk5MTVfdm1hX2xvY2sodm1hKTsKPiArICAgICAgIGVyciA9IGk5MTVfdm1hX21vdmVfdG9f
YWN0aXZlKHZtYSwgcnEsIEVYRUNfT0JKRUNUX1dSSVRFKTsKPiArICAgICAgIGk5MTVfdm1hX3Vu
bG9jayh2bWEpOwoKUmlnaHQuIFRoYXQgaXMgYWN0dWFsbHkgZ29pbmcgdG8gYmUgcXVpdGUgdHJp
Y2t5LiBHb29kIHRvIGhhdmUgaXQKc3BlbGxlZCBvdXQuIEhvdyB3ZWxsIGRvIHdlIGRldGVjdCB0
aGUgbG9jayBpbnZlcnNpb24gaWYgeW91IHJlbW92ZSB0aGUKb3RoZXIgWFhYIGlzIGEgZ29vZCBx
dWVzdGlvbi4KCkluIGdlbmVyYWwgSSB0aGluayBpdCBpcyBiZXR0ZXIgdG8gdGhlIG1vdmVfdG9f
YWN0aXZlIGJlZm9yZSBlbWl0dGluZwp0aGUgY29tbWFuZHMgdGhhdCBtYXkgd3JpdGUgaW50byB0
aGUgdm1hIC0tIGJ1dCBpdCBkb2Vzbid0IG1hdHRlciBpbgp0aGlzIGNhc2UgYmVjYXVzZSB5b3Ug
dXNlIGk5MTVfcmVxdWVzdF9za2lwLCBob3dldmVyIGl0IGtlZXBzIG9uCnRyaWdnZXJpbmcgYWxh
cm0gYmVsbHMgOikKCj4gK291dF9yZXF1ZXN0Ogo+ICsgICAgICAgaWYgKHVubGlrZWx5KGVycikp
IHsKPiArICAgICAgICAgICAgICAgaTkxNV9yZXF1ZXN0X3NraXAocnEsIGVycik7Cj4gKyAgICAg
ICAgICAgICAgIGVyciA9IDA7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgaTkxNV9yZXF1ZXN0
X2FkZChycSk7Cj4gK291dF91bnBpbjoKPiArICAgICAgIGk5MTVfdm1hX3VucGluKHZtYSk7Cj4g
K291dF91bmxvY2s6Cj4gKyAgICAgICBtdXRleF91bmxvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0
ZXgpOwo+ICtvdXRfc2lnbmFsOgo+ICsgICAgICAgaWYgKHVubGlrZWx5KGVycikpIHsKPiArICAg
ICAgICAgICAgICAgZG1hX2ZlbmNlX3NldF9lcnJvcigmdy0+ZG1hLCBlcnIpOwo+ICsgICAgICAg
ICAgICAgICBkbWFfZmVuY2Vfc2lnbmFsKCZ3LT5kbWEpOwo+ICsgICAgICAgICAgICAgICBkbWFf
ZmVuY2VfcHV0KCZ3LT5kbWEpOwo+ICsgICAgICAgfQo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IF9f
aTkxNV9zd19mZW5jZV9jYWxsCj4gK2NsZWFyX3BhZ2VzX3dvcmtfbm90aWZ5KHN0cnVjdCBpOTE1
X3N3X2ZlbmNlICpmZW5jZSwKPiArICAgICAgICAgICAgICAgICAgICAgICBlbnVtIGk5MTVfc3df
ZmVuY2Vfbm90aWZ5IHN0YXRlKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgY2xlYXJfcGFnZXNfd29y
ayAqdyA9IGNvbnRhaW5lcl9vZihmZW5jZSwgdHlwZW9mKCp3KSwgd2FpdCk7Cj4gKwo+ICsgICAg
ICAgc3dpdGNoIChzdGF0ZSkgewo+ICsgICAgICAgY2FzZSBGRU5DRV9DT01QTEVURToKPiArICAg
ICAgICAgICAgICAgc2NoZWR1bGVfd29yaygmdy0+d29yayk7Cj4gKyAgICAgICAgICAgICAgIGJy
ZWFrOwo+ICsKPiArICAgICAgIGNhc2UgRkVOQ0VfRlJFRToKPiArICAgICAgICAgICAgICAgZG1h
X2ZlbmNlX3B1dCgmdy0+ZG1hKTsKPiArICAgICAgICAgICAgICAgYnJlYWs7Cj4gKyAgICAgICB9
Cj4gKwo+ICsgICAgICAgcmV0dXJuIE5PVElGWV9ET05FOwo+ICt9Cj4gKwo+ICtzdGF0aWMgREVG
SU5FX1NQSU5MT0NLKGZlbmNlX2xvY2spOwo+ICsKPiArLyogWFhYOiBiZXR0ZXIgbmFtZSBwbGVh
c2UgKi8KPiAraW50IGk5MTVfZ2VtX3NjaGVkdWxlX2ZpbGxfcGFnZXNfYmx0KHN0cnVjdCBkcm1f
aTkxNV9nZW1fb2JqZWN0ICpvYmosCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc3RydWN0IHNnX3RhYmxlICpwYWdlcywKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc3RydWN0IGk5MTVfcGFnZV9zaXplcyAqcGFnZV9zaXplcywKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdTMyIHZhbHVlKQo+ICt7Cj4gKyAg
ICAgICBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUob2JqLT5iYXNlLmRl
dik7Cj4gKyAgICAgICBzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4ID0gY2UtPmdlbV9jb250
ZXh0Owo+ICsgICAgICAgc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm07Cj4gKyAgICAgICBz
dHJ1Y3QgY2xlYXJfcGFnZXNfd29yayAqd29yazsKPiArICAgICAgIHN0cnVjdCBpOTE1X3NsZWV2
ZSAqc2xlZXZlOwo+ICsgICAgICAgaW50IGVycjsKPiArCj4gKyAgICAgICB2bSA9IGN0eC0+cHBn
dHQgPyAmY3R4LT5wcGd0dC0+dm0gOiAmaTkxNS0+Z2d0dC52bTsKPiArCj4gKyAgICAgICBzbGVl
dmUgPSBjcmVhdGVfc2xlZXZlKHZtLCBvYmosIHBhZ2VzLCBwYWdlX3NpemVzKTsKPiArICAgICAg
IGlmIChJU19FUlIoc2xlZXZlKSkKPiArICAgICAgICAgICAgICAgcmV0dXJuIFBUUl9FUlIoc2xl
ZXZlKTsKPiArCj4gKyAgICAgICB3b3JrID0ga21hbGxvYyhzaXplb2YoKndvcmspLCBHRlBfS0VS
TkVMKTsKPiArICAgICAgIGlmICghd29yaykgewo+ICsgICAgICAgICAgICAgICBkZXN0cm95X3Ns
ZWV2ZShzbGVldmUpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiArICAgICAg
IH0KPiArCj4gKyAgICAgICB3b3JrLT52YWx1ZSA9IHZhbHVlOwo+ICsgICAgICAgd29yay0+c2xl
ZXZlID0gc2xlZXZlOwo+ICsgICAgICAgd29yay0+Y2UgPSBjZTsKPiArCj4gKyAgICAgICBJTklU
X1dPUksoJndvcmstPndvcmssIGNsZWFyX3BhZ2VzX3dvcmtlcik7Cj4gKwo+ICsgICAgICAgaW5p
dF9pcnFfd29yaygmd29yay0+aXJxX3dvcmssIGNsZWFyX3BhZ2VzX3NpZ25hbF9pcnFfd29ya2Vy
KTsKPiArCj4gKyAgICAgICBkbWFfZmVuY2VfaW5pdCgmd29yay0+ZG1hLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgJmNsZWFyX3BhZ2VzX3dvcmtfb3BzLAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgJmZlbmNlX2xvY2ssCj4gKyAgICAgICAgICAgICAgICAgICAgICBpOTE1LT5tbS51bm9yZGVy
ZWRfdGltZWxpbmUsCj4gKyAgICAgICAgICAgICAgICAgICAgICAwKTsKPiArICAgICAgIGk5MTVf
c3dfZmVuY2VfaW5pdCgmd29yay0+d2FpdCwgY2xlYXJfcGFnZXNfd29ya19ub3RpZnkpOwo+ICsK
PiArICAgICAgIGk5MTVfZ2VtX29iamVjdF9sb2NrKG9iaik7Cj4gKyAgICAgICBlcnIgPSBpOTE1
X3N3X2ZlbmNlX2F3YWl0X3Jlc2VydmF0aW9uKCZ3b3JrLT53YWl0LAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmotPnJlc3YsIE5VTEwsCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsIEk5MTVfRkVOQ0Vf
VElNRU9VVCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
STkxNV9GRU5DRV9HRlApOwo+ICsgICAgICAgaWYgKGVyciA8IDApIHsKPiArICAgICAgICAgICAg
ICAgZG1hX2ZlbmNlX3NldF9lcnJvcigmd29yay0+ZG1hLCBlcnIpOwo+ICsgICAgICAgfSBlbHNl
IHsKPiArICAgICAgICAgICAgICAgcmVzZXJ2YXRpb25fb2JqZWN0X2FkZF9leGNsX2ZlbmNlKG9i
ai0+cmVzdiwgJndvcmstPmRtYSk7Cj4gKyAgICAgICAgICAgICAgIGVyciA9IDA7Cj4gKyAgICAg
ICB9Cj4gKyAgICAgICBpOTE1X2dlbV9vYmplY3RfdW5sb2NrKG9iaik7Cj4gKwo+ICsgICAgICAg
ZG1hX2ZlbmNlX2dldCgmd29yay0+ZG1hKTsKPiArICAgICAgIGk5MTVfc3dfZmVuY2VfY29tbWl0
KCZ3b3JrLT53YWl0KTsKPiArCj4gKyAgICAgICByZXR1cm4gZXJyOwo+ICt9Cj4gKwo+ICsjaWYg
SVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VMRlRFU1QpCj4gKyNpbmNsdWRlICJzZWxmdGVz
dHMvaTkxNV9nZW1fY2xpZW50X2JsdC5jIgo+ICsjZW5kaWYKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NsaWVudF9ibHQuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9jbGllbnRfYmx0LmgKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+
IGluZGV4IDAwMDAwMDAwMDAwMC4uM2RiZDI4YzIyZmY1Cj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jbGllbnRfYmx0LmgKPiBAQCAtMCww
ICsxLDIxIEBACj4gKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQgKi8KPiArLyoKPiAr
ICogQ29weXJpZ2h0IMKpIDIwMTkgSW50ZWwgQ29ycG9yYXRpb24KPiArICovCj4gKyNpZm5kZWYg
X19JOTE1X0dFTV9DTElFTlRfQkxUX0hfXwo+ICsjZGVmaW5lIF9fSTkxNV9HRU1fQ0xJRU5UX0JM
VF9IX18KPiArCj4gKyNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgo+ICsKPiArc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3Q7Cj4gK3N0cnVjdCBpOTE1X3BhZ2Vfc2l6ZXM7Cj4gK3N0cnVjdCBpbnRl
bF9jb250ZXh0Owo+ICtzdHJ1Y3Qgc2dfdGFibGU7Cj4gKwo+ICtpbnQgaTkxNV9nZW1fc2NoZWR1
bGVfZmlsbF9wYWdlc19ibHQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGludGVsX2NvbnRleHQgKmNl
LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qgc2dfdGFibGUg
KnBhZ2VzLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaTkx
NV9wYWdlX3NpemVzICpwYWdlX3NpemVzLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB1MzIgdmFsdWUpOwo+ICsKPiArI2VuZGlmCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfYmx0LmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X2JsdC5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBp
bmRleCAwMDAwMDAwMDAwMDAuLjg0MzI0Yjc1NWRlNgo+IC0tLSAvZGV2L251bGwKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X2JsdC5jCj4gQEAgLTAsMCAr
MSwxMDkgQEAKPiArLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVAo+ICsvKgo+ICsgKiBD
b3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgo+ICsgKi8KPiArCj4gKyNpbmNsdWRl
ICJpOTE1X2dlbV9vYmplY3RfYmx0LmgiCj4gKwo+ICsjaW5jbHVkZSAiaTkxNV9nZW1fY2xmbHVz
aC5oIgo+ICsjaW5jbHVkZSAiaW50ZWxfZHJ2LmgiCj4gKwo+ICtpbnQgaW50ZWxfZW1pdF92bWFf
ZmlsbF9ibHQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cnVjdCBpOTE1X3ZtYSAqdm1hLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1MzIgdmFsdWUpCj4gK3sKPiArICAgICAgIHUzMiAqY3M7Cj4gKwo+ICsgICAgICAgY3MgPSBp
bnRlbF9yaW5nX2JlZ2luKHJxLCA4KTsKPiArICAgICAgIGlmIChJU19FUlIoY3MpKQo+ICsgICAg
ICAgICAgICAgICByZXR1cm4gUFRSX0VSUihjcyk7Cj4gKwo+ICsgICAgICAgaWYgKElOVEVMX0dF
TihycS0+aTkxNSkgPj0gOCkgewo+ICsgICAgICAgICAgICAgICAqY3MrKyA9IFhZX0NPTE9SX0JM
VF9DTUQgfCBCTFRfV1JJVEVfUkdCQSB8ICg3LTIpOwo+ICsgICAgICAgICAgICAgICAqY3MrKyA9
IEJMVF9ERVBUSF8zMiB8IEJMVF9ST1BfQ09MT1JfQ09QWSB8IFBBR0VfU0laRTsKPiArICAgICAg
ICAgICAgICAgKmNzKysgPSAwOwo+ICsgICAgICAgICAgICAgICAqY3MrKyA9IHZtYS0+c2l6ZSA+
PiBQQUdFX1NISUZUIDw8IDE2IHwgUEFHRV9TSVpFIC8gNDsKPiArICAgICAgICAgICAgICAgKmNz
KysgPSBsb3dlcl8zMl9iaXRzKHZtYS0+bm9kZS5zdGFydCk7Cj4gKyAgICAgICAgICAgICAgICpj
cysrID0gdXBwZXJfMzJfYml0cyh2bWEtPm5vZGUuc3RhcnQpOwo+ICsgICAgICAgICAgICAgICAq
Y3MrKyA9IHZhbHVlOwo+ICsgICAgICAgICAgICAgICAqY3MrKyA9IE1JX05PT1A7Cj4gKyAgICAg
ICB9IGVsc2Ugewo+ICsgICAgICAgICAgICAgICAqY3MrKyA9IFhZX0NPTE9SX0JMVF9DTUQgfCBC
TFRfV1JJVEVfUkdCQSB8ICg2LTIpOwo+ICsgICAgICAgICAgICAgICAqY3MrKyA9IEJMVF9ERVBU
SF8zMiB8IEJMVF9ST1BfQ09MT1JfQ09QWSB8IFBBR0VfU0laRTsKPiArICAgICAgICAgICAgICAg
KmNzKysgPSAwOwo+ICsgICAgICAgICAgICAgICAqY3MrKyA9IHZtYS0+c2l6ZSA+PiBQQUdFX1NI
SUZUIDw8IDE2IHwgUEFHRV9TSVpFIC8gNDsKPiArICAgICAgICAgICAgICAgKmNzKysgPSB2bWEt
Pm5vZGUuc3RhcnQ7Cj4gKyAgICAgICAgICAgICAgICpjcysrID0gdmFsdWU7Cj4gKyAgICAgICAg
ICAgICAgICpjcysrID0gTUlfTk9PUDsKPiArICAgICAgICAgICAgICAgKmNzKysgPSBNSV9OT09Q
Owo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIGludGVsX3JpbmdfYWR2YW5jZShycSwgY3MpOwo+
ICsKPiArICAgICAgIHJldHVybiAwOwo+ICt9Cj4gKwo+ICtpbnQgaTkxNV9nZW1fb2JqZWN0X2Zp
bGxfYmx0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB1MzIgdmFsdWUpCj4gK3sKPiArICAgICAgIHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1ID0gdG9faTkxNShvYmotPmJhc2UuZGV2KTsKPiArICAgICAgIHN0cnVjdCBp
OTE1X2dlbV9jb250ZXh0ICpjdHggPSBjZS0+Z2VtX2NvbnRleHQ7Cj4gKyAgICAgICBzdHJ1Y3Qg
aTkxNV9hZGRyZXNzX3NwYWNlICp2bTsKPiArICAgICAgIHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJx
Owo+ICsgICAgICAgc3RydWN0IGk5MTVfdm1hICp2bWE7Cj4gKyAgICAgICBpbnQgZXJyOwo+ICsK
PiArICAgICAgIC8qIFhYWDogY2UtPnZtIHBsZWFzZSAqLwo+ICsgICAgICAgdm0gPSBjdHgtPnBw
Z3R0ID8gJmN0eC0+cHBndHQtPnZtIDogJmk5MTUtPmdndHQudm07Cj4gKwo+ICsgICAgICAgdm1h
ID0gaTkxNV92bWFfaW5zdGFuY2Uob2JqLCB2bSwgTlVMTCk7Cj4gKyAgICAgICBpZiAoSVNfRVJS
KHZtYSkpCj4gKyAgICAgICAgICAgICAgIHJldHVybiBQVFJfRVJSKHZtYSk7Cj4gKwo+ICsgICAg
ICAgZXJyID0gaTkxNV92bWFfcGluKHZtYSwgMCwgMCwgUElOX1VTRVIpOwo+ICsgICAgICAgaWYg
KHVubGlrZWx5KGVycikpCj4gKyAgICAgICAgICAgICAgIHJldHVybiBlcnI7Cj4gKwo+ICsgICAg
ICAgaWYgKG9iai0+Y2FjaGVfZGlydHkgJiB+b2JqLT5jYWNoZV9jb2hlcmVudCkgewo+ICsgICAg
ICAgICAgICAgICBpOTE1X2dlbV9vYmplY3RfbG9jayhvYmopOwo+ICsgICAgICAgICAgICAgICBp
OTE1X2dlbV9jbGZsdXNoX29iamVjdChvYmosIDApOwo+ICsgICAgICAgICAgICAgICBpOTE1X2dl
bV9vYmplY3RfdW5sb2NrKG9iaik7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgcnEgPSBpOTE1
X3JlcXVlc3RfY3JlYXRlKGNlKTsKPiArICAgICAgIGlmIChJU19FUlIocnEpKSB7Cj4gKyAgICAg
ICAgICAgICAgIGVyciA9IFBUUl9FUlIocnEpOwo+ICsgICAgICAgICAgICAgICBnb3RvIG91dF91
bnBpbjsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBlcnIgPSBpOTE1X3JlcXVlc3RfYXdhaXRf
b2JqZWN0KHJxLCBvYmosIHRydWUpOwo+ICsgICAgICAgaWYgKHVubGlrZWx5KGVycikpCj4gKyAg
ICAgICAgICAgICAgIGdvdG8gb3V0X3JlcXVlc3Q7Cj4gKwo+ICsgICAgICAgaWYgKGNlLT5lbmdp
bmUtPmVtaXRfaW5pdF9icmVhZGNydW1iKSB7Cj4gKyAgICAgICAgICAgICAgIGVyciA9IGNlLT5l
bmdpbmUtPmVtaXRfaW5pdF9icmVhZGNydW1iKHJxKTsKPiArICAgICAgICAgICAgICAgaWYgKHVu
bGlrZWx5KGVycikpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgZ290byBvdXRfcmVxdWVzdDsK
PiArICAgICAgIH0KPiArCj4gKyAgICAgICBlcnIgPSBpbnRlbF9lbWl0X3ZtYV9maWxsX2JsdChy
cSwgdm1hLCB2YWx1ZSk7Cj4gKyAgICAgICBpZiAodW5saWtlbHkoZXJyKSkKPiArICAgICAgICAg
ICAgICAgZ290byBvdXRfcmVxdWVzdDsKPiArCj4gKyAgICAgICBpOTE1X3ZtYV9sb2NrKHZtYSk7
Cj4gKyAgICAgICBlcnIgPSBpOTE1X3ZtYV9tb3ZlX3RvX2FjdGl2ZSh2bWEsIHJxLCBFWEVDX09C
SkVDVF9XUklURSk7Cj4gKyAgICAgICBpOTE1X3ZtYV91bmxvY2sodm1hKTsKPiArb3V0X3JlcXVl
c3Q6Cj4gKyAgICAgICBpZiAodW5saWtlbHkoZXJyKSkKPiArICAgICAgICAgICAgICAgaTkxNV9y
ZXF1ZXN0X3NraXAocnEsIGVycik7Cj4gKwo+ICsgICAgICAgaTkxNV9yZXF1ZXN0X2FkZChycSk7
Cj4gK291dF91bnBpbjoKPiArICAgICAgIGk5MTVfdm1hX3VucGluKHZtYSk7Cj4gKyAgICAgICBy
ZXR1cm4gZXJyOwo+ICt9Cj4gKwo+ICsjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VM
RlRFU1QpCj4gKyNpbmNsdWRlICJzZWxmdGVzdHMvaTkxNV9nZW1fb2JqZWN0X2JsdC5jIgo+ICsj
ZW5kaWYKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29i
amVjdF9ibHQuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfYmx0
LmgKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAwMDAwMDAwMDAwMC4uN2VjN2RlNmFj
MGMwCj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9vYmplY3RfYmx0LmgKPiBAQCAtMCwwICsxLDI0IEBACj4gKy8qIFNQRFgtTGljZW5zZS1J
ZGVudGlmaWVyOiBNSVQgKi8KPiArLyoKPiArICogQ29weXJpZ2h0IMKpIDIwMTkgSW50ZWwgQ29y
cG9yYXRpb24KPiArICovCj4gKwo+ICsjaWZuZGVmIF9fSTkxNV9HRU1fT0JKRUNUX0JMVF9IX18K
PiArI2RlZmluZSBfX0k5MTVfR0VNX09CSkVDVF9CTFRfSF9fCj4gKwo+ICsjaW5jbHVkZSA8bGlu
dXgvdHlwZXMuaD4KPiArCj4gK3N0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0Owo+ICtzdHJ1Y3Qg
aW50ZWxfY29udGV4dDsKPiArc3RydWN0IGk5MTVfcmVxdWVzdDsKPiArc3RydWN0IGk5MTVfdm1h
Owo+ICsKPiAraW50IGludGVsX2VtaXRfdm1hX2ZpbGxfYmx0KHN0cnVjdCBpOTE1X3JlcXVlc3Qg
KnJxLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaTkxNV92bWEgKnZtYSwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgdTMyIHZhbHVlKTsKPiArCj4gK2ludCBpOTE1
X2dlbV9vYmplY3RfZmlsbF9ibHQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUzMiB2YWx1ZSk7Cj4gKwo+ICsjZW5kaWYKPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9j
bGllbnRfYmx0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2Vt
X2NsaWVudF9ibHQuYwo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAw
Li5iNjUwZDg2NTZkOTIKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jbGllbnRfYmx0LmMKPiBAQCAtMCwwICsxLDEyNyBA
QAo+ICsvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCj4gKy8qCj4gKyAqIENvcHlyaWdo
dCDCqSAyMDE5IEludGVsIENvcnBvcmF0aW9uCj4gKyAqLwo+ICsKPiArI2luY2x1ZGUgIi4uL2k5
MTVfc2VsZnRlc3QuaCIKPiArCj4gKyNpbmNsdWRlICJzZWxmdGVzdHMvaWd0X2ZsdXNoX3Rlc3Qu
aCIKPiArI2luY2x1ZGUgInNlbGZ0ZXN0cy9tb2NrX2RybS5oIgo+ICsjaW5jbHVkZSAibW9ja19j
b250ZXh0LmgiCj4gKwo+ICtzdGF0aWMgaW50IGlndF9jbGllbnRfZmlsbCh2b2lkICphcmcpCj4g
K3sKPiArICAgICAgIHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSA9IGFyZzsKPiArICAgICAgIHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gY2UtPmdlbV9jb250ZXh0LT5pOTE1Owo+ICsg
ICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKPiArICAgICAgIHN0cnVjdCBy
bmRfc3RhdGUgcHJuZzsKPiArICAgICAgIElHVF9USU1FT1VUKGVuZCk7Cj4gKyAgICAgICB1MzIg
KnZhZGRyOwo+ICsgICAgICAgaW50IGVyciA9IDA7Cj4gKwo+ICsgICAgICAgcHJhbmRvbV9zZWVk
X3N0YXRlKCZwcm5nLCBpOTE1X3NlbGZ0ZXN0LnJhbmRvbV9zZWVkKTsKPiArCj4gKyAgICAgICBk
byB7Cj4gKyAgICAgICAgICAgICAgIHUzMiBzeiA9IHByYW5kb21fdTMyX3N0YXRlKCZwcm5nKSAl
IFNaXzMyTTsKPiArICAgICAgICAgICAgICAgdTMyIHZhbCA9IHByYW5kb21fdTMyX3N0YXRlKCZw
cm5nKTsKPiArICAgICAgICAgICAgICAgdTMyIGk7Cj4gKwo+ICsgICAgICAgICAgICAgICBzeiA9
IHJvdW5kX3VwKHN6LCBQQUdFX1NJWkUpOwo+ICsKPiArICAgICAgICAgICAgICAgcHJfZGVidWco
IiVzIHdpdGggc3o9JXgsIHZhbD0leFxuIiwgX19mdW5jX18sIHN6LCB2YWwpOwo+ICsKPiArICAg
ICAgICAgICAgICAgb2JqID0gaTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9pbnRlcm5hbChpOTE1LCBz
eik7Cj4gKyAgICAgICAgICAgICAgIGlmIChJU19FUlIob2JqKSkgewo+ICsgICAgICAgICAgICAg
ICAgICAgICAgIGVyciA9IFBUUl9FUlIob2JqKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBn
b3RvIGVycl9mbHVzaDsKPiArICAgICAgICAgICAgICAgfQo+ICsKPiArICAgICAgICAgICAgICAg
dmFkZHIgPSBpOTE1X2dlbV9vYmplY3RfcGluX21hcChvYmosIEk5MTVfTUFQX1dCKTsKPiArICAg
ICAgICAgICAgICAgaWYgKElTX0VSUih2YWRkcikpIHsKPiArICAgICAgICAgICAgICAgICAgICAg
ICBlcnIgPSBQVFJfRVJSKHZhZGRyKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVy
cl9wdXQ7Cj4gKyAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAgIC8qCj4gKyAg
ICAgICAgICAgICAgICAqIFhYWDogVGhlIGdvYWwgaXMgbW92ZSB0aGlzIHRvIGdldF9wYWdlcywg
c28gdHJ5IHRvIGRpcnR5IHRoZQo+ICsgICAgICAgICAgICAgICAgKiBDUFUgY2FjaGUgZmlyc3Qg
dG8gY2hlY2sgdGhhdCB3ZSBkbyB0aGUgcmVxdWlyZWQgY2xmbHVzaAo+ICsgICAgICAgICAgICAg
ICAgKiBiZWZvcmUgc2NoZWR1bGluZyB0aGUgYmx0IGZvciAhbGxjIHBsYXRmb3Jtcy4gVGhpcyBt
YXRjaGVzCj4gKyAgICAgICAgICAgICAgICAqIHNvbWUgdmVyc2lvbiBvZiByZWFsaXR5IHdoZXJl
IGF0IGdldF9wYWdlcyB0aGUgcGFnZXMKPiArICAgICAgICAgICAgICAgICogdGhlbXNlbHZlcyBt
YXkgbm90IHlldCBiZSBjb2hlcmVudCB3aXRoIHRoZSBHUFUoc3dhcC1pbikuIElmCj4gKyAgICAg
ICAgICAgICAgICAqIHdlIGFyZSBtaXNzaW5nIHRoZSBmbHVzaCB0aGVuIHdlIHNob3VsZCBzZWUg
dGhlIHN0YWxlIGNhY2hlCj4gKyAgICAgICAgICAgICAgICAqIHZhbHVlcyBhZnRlciB3ZSBkbyB0
aGUgc2V0X3RvX2NwdV9kb21haW4gYW5kIHBpY2sgaXQgdXAgYXMgYQo+ICsgICAgICAgICAgICAg
ICAgKiB0ZXN0IGZhaWx1cmUuCj4gKyAgICAgICAgICAgICAgICAqLwo+ICsgICAgICAgICAgICAg
ICBtZW1zZXQzMih2YWRkciwgdmFsIF4gMHhkZWFkYmVhZiwgb2JqLT5iYXNlLnNpemUgLyBzaXpl
b2YodTMyKSk7Cj4gKwo+ICsgICAgICAgICAgICAgICBpZiAoIShvYmotPmNhY2hlX2NvaGVyZW50
ICYgSTkxNV9CT19DQUNIRV9DT0hFUkVOVF9GT1JfV1JJVEUpKQo+ICsgICAgICAgICAgICAgICAg
ICAgICAgIG9iai0+Y2FjaGVfZGlydHkgPSB0cnVlOwo+ICsKPiArICAgICAgICAgICAgICAgZXJy
ID0gaTkxNV9nZW1fc2NoZWR1bGVfZmlsbF9wYWdlc19ibHQob2JqLCBjZSwgb2JqLT5tbS5wYWdl
cywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgJm9iai0+bW0ucGFnZV9zaXplcywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgdmFsKTsKPiArICAgICAgICAgICAgICAgaWYgKGVycikK
PiArICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVycl91bnBpbjsKPiArCj4gKyAgICAgICAg
ICAgICAgIC8qCj4gKyAgICAgICAgICAgICAgICAqIFhYWDogRm9yIG5vdyBkbyB0aGUgd2FpdCB3
aXRob3V0IHRoZSBvYmplY3QgcmVzdiBsb2NrIHRvCj4gKyAgICAgICAgICAgICAgICAqIGVuc3Vy
ZSB3ZSBkb24ndCBkZWFkbG9jay4KPiArICAgICAgICAgICAgICAgICovCj4gKyAgICAgICAgICAg
ICAgIGVyciA9IGk5MTVfZ2VtX29iamVjdF93YWl0KG9iaiwKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgSTkxNV9XQUlUX0lOVEVSUlVQVElCTEUgfAo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJOTE1X1dBSVRfQUxMLAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNQVhfU0NIRURVTEVfVElN
RU9VVCk7Cj4gKyAgICAgICAgICAgICAgIGlmIChlcnIpCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgZ290byBlcnJfdW5waW47Cj4gKwo+ICsgICAgICAgICAgICAgICBpOTE1X2dlbV9vYmplY3Rf
bG9jayhvYmopOwo+ICsgICAgICAgICAgICAgICBlcnIgPSBpOTE1X2dlbV9vYmplY3Rfc2V0X3Rv
X2NwdV9kb21haW4ob2JqLCBmYWxzZSk7Cj4gKyAgICAgICAgICAgICAgIGk5MTVfZ2VtX29iamVj
dF91bmxvY2sob2JqKTsKPiArICAgICAgICAgICAgICAgaWYgKGVycikKPiArICAgICAgICAgICAg
ICAgICAgICAgICBnb3RvIGVycl91bnBpbjsKPiArCj4gKyAgICAgICAgICAgICAgIGZvciAoaSA9
IDA7IGkgPCBvYmotPmJhc2Uuc2l6ZSAvIHNpemVvZih1MzIpOyArK2kpIHsKPiArICAgICAgICAg
ICAgICAgICAgICAgICBpZiAodmFkZHJbaV0gIT0gdmFsKSB7Cj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBwcl9lcnIoInZhZGRyWyV1XT0leCwgZXhwZWN0ZWQ9JXhcbiIsIGksCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFkZHJbaV0sIHZhbCk7Cj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSAtRUlOVkFMOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZ290byBlcnJfdW5waW47Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgfQo+ICsgICAgICAgICAgICAgICB9Cj4gKwo+ICsgICAgICAgICAgICAgICBpOTE1
X2dlbV9vYmplY3RfdW5waW5fbWFwKG9iaik7Cj4gKyAgICAgICAgICAgICAgIGk5MTVfZ2VtX29i
amVjdF9wdXQob2JqKTsKPiArICAgICAgIH0gd2hpbGUgKCF0aW1lX2FmdGVyKGppZmZpZXMsIGVu
ZCkpOwo+ICsKPiArICAgICAgIGdvdG8gZXJyX2ZsdXNoOwo+ICsKPiArZXJyX3VucGluOgo+ICsg
ICAgICAgaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChvYmopOwo+ICtlcnJfcHV0Ogo+ICsgICAg
ICAgaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwo+ICtlcnJfZmx1c2g6Cj4gKyAgICAgICBtdXRl
eF9sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211dGV4KTsKPiArICAgICAgIGlmIChpZ3RfZmx1c2hf
dGVzdChpOTE1LCBJOTE1X1dBSVRfTE9DS0VEKSkKPiArICAgICAgICAgICAgICAgZXJyID0gLUVJ
TzsKPiArICAgICAgIG11dGV4X3VubG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7Cj4gKwo+
ICsgICAgICAgaWYgKGVyciA9PSAtRU5PTUVNKQo+ICsgICAgICAgICAgICAgICBlcnIgPSAwOwo+
ICsKPiArICAgICAgIHJldHVybiBlcnI7Cj4gK30KPiArCj4gK2ludCBpOTE1X2dlbV9jbGllbnRf
Ymx0X2xpdmVfc2VsZnRlc3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQo+ICt7Cj4g
KyAgICAgICBzdGF0aWMgY29uc3Qgc3RydWN0IGk5MTVfc3VidGVzdCB0ZXN0c1tdID0gewo+ICsg
ICAgICAgICAgICAgICBTVUJURVNUKGlndF9jbGllbnRfZmlsbCksCj4gKyAgICAgICB9Owo+ICsK
PiArICAgICAgIGlmIChpOTE1X3Rlcm1pbmFsbHlfd2VkZ2VkKGk5MTUpKQo+ICsgICAgICAgICAg
ICAgICByZXR1cm4gMDsKPiArCj4gKyAgICAgICBpZiAoIUhBU19FTkdJTkUoaTkxNSwgQkNTMCkp
Cj4gKyAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICsKPiArICAgICAgIHJldHVybiBpOTE1X3N1
YnRlc3RzKHRlc3RzLCBpOTE1LT5lbmdpbmVbQkNTMF0tPmtlcm5lbF9jb250ZXh0KTsKPiArfQo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2Vt
X29iamVjdF9ibHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9n
ZW1fb2JqZWN0X2JsdC5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAw
MDAuLjcxNzUyMWM4ZWIwYQo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX29iamVjdF9ibHQuYwo+IEBAIC0wLDAgKzEsMTEx
IEBACj4gKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKPiArLyoKPiArICogQ29weXJp
Z2h0IMKpIDIwMTkgSW50ZWwgQ29ycG9yYXRpb24KPiArICovCj4gKwo+ICsjaW5jbHVkZSAiLi4v
aTkxNV9zZWxmdGVzdC5oIgo+ICsKPiArI2luY2x1ZGUgInNlbGZ0ZXN0cy9pZ3RfZmx1c2hfdGVz
dC5oIgo+ICsjaW5jbHVkZSAic2VsZnRlc3RzL21vY2tfZHJtLmgiCj4gKyNpbmNsdWRlICJtb2Nr
X2NvbnRleHQuaCIKPiArCj4gK3N0YXRpYyBpbnQgaWd0X2ZpbGxfYmx0KHZvaWQgKmFyZykKPiAr
ewo+ICsgICAgICAgc3RydWN0IGludGVsX2NvbnRleHQgKmNlID0gYXJnOwo+ICsgICAgICAgc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBjZS0+Z2VtX2NvbnRleHQtPmk5MTU7Cj4gKyAg
ICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwo+ICsgICAgICAgc3RydWN0IHJu
ZF9zdGF0ZSBwcm5nOwo+ICsgICAgICAgSUdUX1RJTUVPVVQoZW5kKTsKPiArICAgICAgIHUzMiAq
dmFkZHI7Cj4gKyAgICAgICBpbnQgZXJyID0gMDsKPiArCj4gKyAgICAgICBwcmFuZG9tX3NlZWRf
c3RhdGUoJnBybmcsIGk5MTVfc2VsZnRlc3QucmFuZG9tX3NlZWQpOwo+ICsKPiArICAgICAgIGRv
IHsKPiArICAgICAgICAgICAgICAgdTMyIHN6ID0gcHJhbmRvbV91MzJfc3RhdGUoJnBybmcpICUg
U1pfMzJNOwo+ICsgICAgICAgICAgICAgICB1MzIgdmFsID0gcHJhbmRvbV91MzJfc3RhdGUoJnBy
bmcpOwo+ICsgICAgICAgICAgICAgICB1MzIgaTsKPiArCj4gKyAgICAgICAgICAgICAgIHN6ID0g
cm91bmRfdXAoc3osIFBBR0VfU0laRSk7Cj4gKwo+ICsgICAgICAgICAgICAgICBwcl9kZWJ1Zygi
JXMgd2l0aCBzej0leCwgdmFsPSV4XG4iLCBfX2Z1bmNfXywgc3osIHZhbCk7Cj4gKwo+ICsgICAg
ICAgICAgICAgICBvYmogPSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX2ludGVybmFsKGk5MTUsIHN6
KTsKPiArICAgICAgICAgICAgICAgaWYgKElTX0VSUihvYmopKSB7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgZXJyID0gUFRSX0VSUih2YWRkcik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAg
Z290byBlcnJfZmx1c2g7Cj4gKyAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAg
IHZhZGRyID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9tYXAob2JqLCBJOTE1X01BUF9XQik7Cj4gKyAg
ICAgICAgICAgICAgIGlmIChJU19FUlIodmFkZHIpKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgZXJyID0gUFRSX0VSUih2YWRkcik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgZ290byBl
cnJfcHV0Owo+ICsgICAgICAgICAgICAgICB9Cj4gKwo+ICsgICAgICAgICAgICAgICAvKgo+ICsg
ICAgICAgICAgICAgICAgKiBNYWtlIHN1cmUgdGhlIHBvdGVudGlhbGx5IGFzeW5jIGNsZmx1c2gg
ZG9lcyBpdHMgam9iLCBpZgo+ICsgICAgICAgICAgICAgICAgKiByZXF1aXJlZC4KPiArICAgICAg
ICAgICAgICAgICovCj4gKyAgICAgICAgICAgICAgIG1lbXNldDMyKHZhZGRyLCB2YWwgXiAweGRl
YWRiZWFmLCBvYmotPmJhc2Uuc2l6ZSAvIHNpemVvZih1MzIpKTsKPiArCj4gKyAgICAgICAgICAg
ICAgIGlmICghKG9iai0+Y2FjaGVfY29oZXJlbnQgJiBJOTE1X0JPX0NBQ0hFX0NPSEVSRU5UX0ZP
Ul9XUklURSkpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgb2JqLT5jYWNoZV9kaXJ0eSA9IHRy
dWU7Cj4gKwo+ICsKPiArICAgICAgICAgICAgICAgbXV0ZXhfbG9jaygmaTkxNS0+ZHJtLnN0cnVj
dF9tdXRleCk7Cj4gKyAgICAgICAgICAgICAgIGVyciA9IGk5MTVfZ2VtX29iamVjdF9maWxsX2Js
dChvYmosIGNlLCB2YWwpOwo+ICsgICAgICAgICAgICAgICBtdXRleF91bmxvY2soJmk5MTUtPmRy
bS5zdHJ1Y3RfbXV0ZXgpOwo+ICsgICAgICAgICAgICAgICBpZiAoZXJyKQo+ICsgICAgICAgICAg
ICAgICAgICAgICAgIGdvdG8gZXJyX3VucGluOwo+ICsKPiArICAgICAgICAgICAgICAgaTkxNV9n
ZW1fb2JqZWN0X2xvY2sob2JqKTsKPiArICAgICAgICAgICAgICAgZXJyID0gaTkxNV9nZW1fb2Jq
ZWN0X3NldF90b19jcHVfZG9tYWluKG9iaiwgZmFsc2UpOwo+ICsgICAgICAgICAgICAgICBpOTE1
X2dlbV9vYmplY3RfdW5sb2NrKG9iaik7Cj4gKyAgICAgICAgICAgICAgIGlmIChlcnIpCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgZ290byBlcnJfdW5waW47Cj4gKwo+ICsgICAgICAgICAgICAg
ICBmb3IgKGkgPSAwOyBpIDwgb2JqLT5iYXNlLnNpemUgLyBzaXplb2YodTMyKTsgKytpKSB7Cj4g
KyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhZGRyW2ldICE9IHZhbCkgewo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcHJfZXJyKCJ2YWRkclsldV09JXgsIGV4cGVjdGVkPSV4
XG4iLCBpLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhZGRyW2ld
LCB2YWwpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gLUVJTlZBTDsK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyX3VucGluOwo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIH0KPiArICAgICAgICAgICAgICAgfQo+ICsKPiArICAgICAgICAg
ICAgICAgaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChvYmopOwo+ICsgICAgICAgICAgICAgICBp
OTE1X2dlbV9vYmplY3RfcHV0KG9iaik7Cj4gKyAgICAgICB9IHdoaWxlICghdGltZV9hZnRlcihq
aWZmaWVzLCBlbmQpKTsKPiArCj4gKyAgICAgICBnb3RvIGVycl9mbHVzaDsKPiArCj4gK2Vycl91
bnBpbjoKPiArICAgICAgIGk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAob2JqKTsKPiArZXJyX3B1
dDoKPiArICAgICAgIGk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKPiArZXJyX2ZsdXNoOgo+ICsg
ICAgICAgbXV0ZXhfbG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7Cj4gKyAgICAgICBpZiAo
aWd0X2ZsdXNoX3Rlc3QoaTkxNSwgSTkxNV9XQUlUX0xPQ0tFRCkpCj4gKyAgICAgICAgICAgICAg
IGVyciA9IC1FSU87Cj4gKyAgICAgICBtdXRleF91bmxvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0
ZXgpOwo+ICsKPiArICAgICAgIGlmIChlcnIgPT0gLUVOT01FTSkKPiArICAgICAgICAgICAgICAg
ZXJyID0gMDsKPiArCj4gKyAgICAgICByZXR1cm4gZXJyOwo+ICt9Cj4gKwo+ICtpbnQgaTkxNV9n
ZW1fb2JqZWN0X2JsdF9saXZlX3NlbGZ0ZXN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSkKPiArewo+ICsgICAgICAgc3RhdGljIGNvbnN0IHN0cnVjdCBpOTE1X3N1YnRlc3QgdGVzdHNb
XSA9IHsKPiArICAgICAgICAgICAgICAgU1VCVEVTVChpZ3RfZmlsbF9ibHQpLAo+ICsgICAgICAg
fTsKPiArCj4gKyAgICAgICBpZiAoaTkxNV90ZXJtaW5hbGx5X3dlZGdlZChpOTE1KSkKPiArICAg
ICAgICAgICAgICAgcmV0dXJuIDA7Cj4gKwo+ICsgICAgICAgaWYgKCFIQVNfRU5HSU5FKGk5MTUs
IEJDUzApKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gMDsKPiArCj4gKyAgICAgICByZXR1cm4g
aTkxNV9zdWJ0ZXN0cyh0ZXN0cywgaTkxNS0+ZW5naW5lW0JDUzBdLT5rZXJuZWxfY29udGV4dCk7
Cj4gK30KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3B1X2Nv
bW1hbmRzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ncHVfY29tbWFuZHMuaAo+
IGluZGV4IGEzNGVjZTUzYTc3MS4uN2U5NTgyN2IwNzI2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZ3B1X2NvbW1hbmRzLmgKPiBAQCAtMTgwLDYgKzE4MCw3IEBACj4g
ICNkZWZpbmUgR0ZYX09QX0RSQVdSRUNUX0lORk9fSTk2NSAgKCgweDc5MDA8PDE2KXwweDIpCj4g
IAo+ICAjZGVmaW5lIENPTE9SX0JMVF9DTUQgICAgICAgICAgICAgICAgICAoMjw8MjkgfCAweDQw
PDwyMiB8ICg1LTIpKQo+ICsjZGVmaW5lIFhZX0NPTE9SX0JMVF9DTUQgICAgICAgICAgICAgICAo
Mjw8MjkgfCAweDUwPDwyMikKPiAgI2RlZmluZSBTUkNfQ09QWV9CTFRfQ01EICAgICAgICAgICAg
ICAgKCgyPDwyOSl8KDB4NDM8PDIyKXw0KQo+ICAjZGVmaW5lIFhZX1NSQ19DT1BZX0JMVF9DTUQg
ICAgICAgICAgICAoKDI8PDI5KXwoMHg1Mzw8MjIpfDYpCj4gICNkZWZpbmUgWFlfTU9OT19TUkNf
Q09QWV9JTU1fQkxUICAgICAgICgoMjw8MjkpfCgweDcxPDwyMil8NSkKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfbGl2ZV9zZWxmdGVzdHMuaCBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2xpdmVfc2VsZnRlc3RzLmgKPiBpbmRl
eCA5YmRhMzZhNTk4YjMuLmQ1ZGM0NDI3ZDY2NCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9saXZlX3NlbGZ0ZXN0cy5oCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfbGl2ZV9zZWxmdGVzdHMuaAo+IEBAIC0yNSw2ICsy
NSw4IEBAIHNlbGZ0ZXN0KGdlbSwgaTkxNV9nZW1fbGl2ZV9zZWxmdGVzdHMpCj4gIHNlbGZ0ZXN0
KGV2aWN0LCBpOTE1X2dlbV9ldmljdF9saXZlX3NlbGZ0ZXN0cykKPiAgc2VsZnRlc3QoaHVnZXBh
Z2VzLCBpOTE1X2dlbV9odWdlX3BhZ2VfbGl2ZV9zZWxmdGVzdHMpCj4gIHNlbGZ0ZXN0KGNvbnRl
eHRzLCBpOTE1X2dlbV9jb250ZXh0X2xpdmVfc2VsZnRlc3RzKQo+ICtzZWxmdGVzdChibHQsIGk5
MTVfZ2VtX29iamVjdF9ibHRfbGl2ZV9zZWxmdGVzdHMpCj4gK3NlbGZ0ZXN0KGNsaWVudCwgaTkx
NV9nZW1fY2xpZW50X2JsdF9saXZlX3NlbGZ0ZXN0cykKPiAgc2VsZnRlc3QocmVzZXQsIGludGVs
X3Jlc2V0X2xpdmVfc2VsZnRlc3RzKQo+ICBzZWxmdGVzdChoYW5nY2hlY2ssIGludGVsX2hhbmdj
aGVja19saXZlX3NlbGZ0ZXN0cykKPiAgc2VsZnRlc3QoZXhlY2xpc3RzLCBpbnRlbF9leGVjbGlz
dHNfbGl2ZV9zZWxmdGVzdHMpCgpUb25zIG9mIFhYWCB0byBiZSB3b3JrZWQgb24sIGJ1dCB0aGF0
IGlzIHRoZSBwb2ludCBvZiB0aGUgcGF0Y2g6IHRvCnN0YXJ0IHNwZWxsaW5nIG91dCB0aGUgd29y
ayB0aGF0IG5lZWRzIHRvIGJlIGRvbmUgZm9yIHRoaXMgYXBwcm9hY2ggdG8KZXZlbiB3b3JrLiBB
bmQgdGhlcmUncyBwbGVudHkgbW9yZSBsYXllcnMgd2UgbmVlZCB0byBhZGQgdGVzdHMgYXMgd2UK
cmVtb3ZlIHRoZSBsb2NrIGltcGVkaW1lbnRzLgoKUmV2aWV3ZWQtYnk6IENocmlzIFdpbHNvbiA8
Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgotQ2hyaXMKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C9FFC181506
	for <lists+intel-gfx@lfdr.de>; Wed, 11 Mar 2020 10:35:08 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D8F636E960;
	Wed, 11 Mar 2020 09:35:06 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 055CF6E958;
 Wed, 11 Mar 2020 09:34:57 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 20518712-1500050 
 for multiple; Wed, 11 Mar 2020 09:34:51 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 11 Mar 2020 09:34:48 +0000
Message-Id: <20200311093448.4103262-5-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20200311093448.4103262-1-chris@chris-wilson.co.uk>
References: <20200311093448.4103262-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t 5/5] i915: Exercise timeslice sysfs
 property
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UgW3dpbGxdIGV4cG9zZSB2YXJpb3VzIHBlci1lbmdpbmUgc2NoZWR1bGluZyBjb250cm9scy4g
T25lIG9mIHdoaWNoLAondGltZXNsaWNlX2R1cmF0aW9uX21zJywgZGVmaW5lcyB0aGUgc2NoZWR1
bGluZyBxdWFudHVtLiBJZiBhIGNvbnRleHQKZXhoYXVzdHMgaXRzIHRpbWVzbGljZSwgaXQgd2ls
bCBiZSBwcmVlbXB0ZWQgaW4gZmF2b3VyIG9mIHJ1bm5pbmcgb25lIG9mCml0cyBjb21wYXRyaW90
cy4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVr
PgotLS0KIHRlc3RzL01ha2VmaWxlLnNvdXJjZXMgICAgICAgICAgICAgICAgfCAgIDMgKwogdGVz
dHMvaTkxNS9zeXNmc190aW1lc2xpY2VfZHVyYXRpb24uYyB8IDUzMSArKysrKysrKysrKysrKysr
KysrKysrKysrKwogdGVzdHMvaW50ZWwtY2kvYmxhY2tsaXN0LnR4dCAgICAgICAgICB8ICAgMSAr
CiB0ZXN0cy9tZXNvbi5idWlsZCAgICAgICAgICAgICAgICAgICAgIHwgICAxICsKIDQgZmlsZXMg
Y2hhbmdlZCwgNTM2IGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEwMDY0NCB0ZXN0cy9pOTE1
L3N5c2ZzX3RpbWVzbGljZV9kdXJhdGlvbi5jCgpkaWZmIC0tZ2l0IGEvdGVzdHMvTWFrZWZpbGUu
c291cmNlcyBiL3Rlc3RzL01ha2VmaWxlLnNvdXJjZXMKaW5kZXggN2IxZjgxOTRkLi4xNzkzMDIw
ZWEgMTAwNjQ0Ci0tLSBhL3Rlc3RzL01ha2VmaWxlLnNvdXJjZXMKKysrIGIvdGVzdHMvTWFrZWZp
bGUuc291cmNlcwpAQCAtMTEwLDYgKzExMCw5IEBAIHN5c2ZzX2hlYXJ0YmVhdF9pbnRlcnZhbF9T
T1VSQ0VTID0gaTkxNS9zeXNmc19oZWFydGJlYXRfaW50ZXJ2YWwuYwogVEVTVFNfcHJvZ3MgKz0g
c3lzZnNfcHJlZW1wdF90aW1lb3V0CiBzeXNmc19wcmVlbXB0X3RpbWVvdXRfU09VUkNFUyA9IGk5
MTUvc3lzZnNfcHJlZW1wdF90aW1lb3V0LmMKIAorVEVTVFNfcHJvZ3MgKz0gc3lzZnNfdGltZXNs
aWNlX2R1cmF0aW9uCitzeXNmc190aW1lc2xpY2VfZHVyYXRpb25fU09VUkNFUyA9IGk5MTUvc3lz
ZnNfdGltZXNsaWNlX2R1cmF0aW9uLmMKKwogVEVTVFNfcHJvZ3MgKz0gZ2VtX2JhZF9yZWxvYwog
Z2VtX2JhZF9yZWxvY19TT1VSQ0VTID0gaTkxNS9nZW1fYmFkX3JlbG9jLmMKIApkaWZmIC0tZ2l0
IGEvdGVzdHMvaTkxNS9zeXNmc190aW1lc2xpY2VfZHVyYXRpb24uYyBiL3Rlc3RzL2k5MTUvc3lz
ZnNfdGltZXNsaWNlX2R1cmF0aW9uLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MDAwLi4xNTE3NGRkZWMKLS0tIC9kZXYvbnVsbAorKysgYi90ZXN0cy9pOTE1L3N5c2ZzX3RpbWVz
bGljZV9kdXJhdGlvbi5jCkBAIC0wLDAgKzEsNTMxIEBACisvKgorICogQ29weXJpZ2h0IMKpIDIw
MTkgSW50ZWwgQ29ycG9yYXRpb24KKyAqCisgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVk
LCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQorICogY29weSBvZiB0
aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29m
dHdhcmUiKSwKKyAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24s
IGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KKyAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5
LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAorICogYW5k
L29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRv
IHdob20gdGhlCisgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8g
dGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgorICoKKyAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90
aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIChpbmNsdWRpbmcgdGhlIG5leHQKKyAqIHBh
cmFncmFwaCkgc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBw
b3J0aW9ucyBvZiB0aGUKKyAqIFNvZnR3YXJlLgorICoKKyAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9W
SURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCisg
KiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9G
IE1FUkNIQU5UQUJJTElUWSwKKyAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFO
RCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTAorICogVEhFIEFVVEhPUlMgT1Ig
Q09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RI
RVIKKyAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQg
T1IgT1RIRVJXSVNFLCBBUklTSU5HCisgKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBX
SVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTCisgKiBJTiBUSEUg
U09GVFdBUkUuCisgKi8KKworI2luY2x1ZGUgPGRpcmVudC5oPgorI2luY2x1ZGUgPGVycm5vLmg+
CisjaW5jbHVkZSA8ZmNudGwuaD4KKyNpbmNsdWRlIDxpbnR0eXBlcy5oPgorI2luY2x1ZGUgPHN5
cy9zdGF0Lmg+CisjaW5jbHVkZSA8c3lzL3R5cGVzLmg+CisjaW5jbHVkZSA8dW5pc3RkLmg+CisK
KyNpbmNsdWRlICJkcm10ZXN0LmgiIC8qIGdlbV9xdWllc2NlbnRfZ3B1KCkhICovCisjaW5jbHVk
ZSAiaTkxNS9nZW1fZW5naW5lX3RvcG9sb2d5LmgiCisjaW5jbHVkZSAiaTkxNS9nZW1fbW1hbi5o
IgorI2luY2x1ZGUgImlndF9kdW1teWxvYWQuaCIKKyNpbmNsdWRlICJpZ3Rfc3lzZnMuaCIKKyNp
bmNsdWRlICJpb2N0bF93cmFwcGVycy5oIiAvKiBpZ3RfcmVxdWlyZV9nZW0oKSEgKi8KKyNpbmNs
dWRlICJpbnRlbF9jaGlwc2V0LmgiCisjaW5jbHVkZSAiaW50ZWxfcmVnLmgiCisjaW5jbHVkZSAi
c3dfc3luYy5oIgorCisjZGVmaW5lIEFUVFIgInRpbWVzbGljZV9kdXJhdGlvbl9tcyIKKyNkZWZp
bmUgUkVTRVRfVElNRU9VVCAyMCAvKiBtaWxsaXNlY29uZHMsIGF0IGxlYXN0IG9uZSBqaWZmaWUg
Zm9yIGt3b3JrZXIgKi8KKworI2RlZmluZSBNSV9TRU1BUEhPUkVfV0FJVAkJKDB4MWMgPDwgMjMp
CisjZGVmaW5lICAgTUlfU0VNQVBIT1JFX1BPTEwgICAgICAgICAgICAgKDEgPDwgMTUpCisjZGVm
aW5lICAgTUlfU0VNQVBIT1JFX1NBRF9HVF9TREQgICAgICAgKDAgPDwgMTIpCisjZGVmaW5lICAg
TUlfU0VNQVBIT1JFX1NBRF9HVEVfU0REICAgICAgKDEgPDwgMTIpCisjZGVmaW5lICAgTUlfU0VN
QVBIT1JFX1NBRF9MVF9TREQgICAgICAgKDIgPDwgMTIpCisjZGVmaW5lICAgTUlfU0VNQVBIT1JF
X1NBRF9MVEVfU0REICAgICAgKDMgPDwgMTIpCisjZGVmaW5lICAgTUlfU0VNQVBIT1JFX1NBRF9F
UV9TREQgICAgICAgKDQgPDwgMTIpCisjZGVmaW5lICAgTUlfU0VNQVBIT1JFX1NBRF9ORVFfU0RE
ICAgICAgKDUgPDwgMTIpCisKK3N0YXRpYyBib29sIF9fZW5hYmxlX2hhbmdjaGVjayhpbnQgZGly
LCBib29sIHN0YXRlKQoreworCXJldHVybiBpZ3Rfc3lzZnNfc2V0KGRpciwgImVuYWJsZV9oYW5n
Y2hlY2siLCBzdGF0ZSA/ICIxIiA6ICIwIik7Cit9CisKK3N0YXRpYyBib29sIGVuYWJsZV9oYW5n
Y2hlY2soaW50IGk5MTUsIGJvb2wgc3RhdGUpCit7CisJYm9vbCBzdWNjZXNzOworCWludCBkaXI7
CisKKwlkaXIgPSBpZ3Rfc3lzZnNfb3Blbl9wYXJhbWV0ZXJzKGk5MTUpOworCWlmIChkaXIgPCAw
KSAvKiBubyBwYXJhbWV0ZXJzLCBtdXN0IGJlIGRlZmF1bHQhICovCisJCXJldHVybiBmYWxzZTsK
KworCXN1Y2Nlc3MgPSBfX2VuYWJsZV9oYW5nY2hlY2soZGlyLCBzdGF0ZSk7CisJY2xvc2UoZGly
KTsKKworCXJldHVybiBzdWNjZXNzOworfQorCitzdGF0aWMgdm9pZCBzZXRfdGltZXNsaWNlKGlu
dCBlbmdpbmUsIHVuc2lnbmVkIGludCB2YWx1ZSkKK3sKKwl1bnNpZ25lZCBpbnQgZGVsYXk7CisK
KwlpZ3Rfc3lzZnNfcHJpbnRmKGVuZ2luZSwgQVRUUiwgIiV1IiwgdmFsdWUpOworCWlndF9zeXNm
c19zY2FuZihlbmdpbmUsIEFUVFIsICIldSIsICZkZWxheSk7CisJaWd0X2Fzc2VydF9lcShkZWxh
eSwgdmFsdWUpOworfQorCitzdGF0aWMgdm9pZCB0ZXN0X2lkZW1wb3RlbnQoaW50IGk5MTUsIGlu
dCBlbmdpbmUpCit7CisJY29uc3QgdW5zaWduZWQgaW50IGRlbGF5c1tdID0geyAwLCAxLCAxMjM0
LCA2NTQzMjEgfTsKKwl1bnNpZ25lZCBpbnQgc2F2ZWQ7CisKKwkvKiBRdWljayB0ZXN0IHRvIHZl
cmlmeSB0aGUga2VybmVsIHJlcG9ydHMgdGhlIHNhbWUgdmFsdWVzIGFzIHdlIHdyaXRlICovCisK
KwlpZ3RfYXNzZXJ0KGlndF9zeXNmc19zY2FuZihlbmdpbmUsIEFUVFIsICIldSIsICZzYXZlZCkg
PT0gMSk7CisJaWd0X2RlYnVnKCJJbml0aWFsICVzOiV1XG4iLCBBVFRSLCBzYXZlZCk7CisKKwlm
b3IgKGludCBpID0gMDsgaSA8IEFSUkFZX1NJWkUoZGVsYXlzKTsgaSsrKQorCQlzZXRfdGltZXNs
aWNlKGVuZ2luZSwgZGVsYXlzW2ldKTsKKworCXNldF90aW1lc2xpY2UoZW5naW5lLCBzYXZlZCk7
Cit9CisKK3N0YXRpYyB2b2lkIHRlc3RfaW52YWxpZChpbnQgaTkxNSwgaW50IGVuZ2luZSkKK3sK
Kwl1bnNpZ25lZCBpbnQgc2F2ZWQsIGRlbGF5OworCisJLyogUXVpY2sgdGVzdCB0aGF0IG5vbi1y
ZXByZXNlbnRhYmxlIGRlbGF5cyBhcmUgcmVqZWN0ZWQgKi8KKworCWlndF9hc3NlcnQoaWd0X3N5
c2ZzX3NjYW5mKGVuZ2luZSwgQVRUUiwgIiV1IiwgJnNhdmVkKSA9PSAxKTsKKwlpZ3RfZGVidWco
IkluaXRpYWwgJXM6JXVcbiIsIEFUVFIsIHNhdmVkKTsKKworCWlndF9zeXNmc19wcmludGYoZW5n
aW5lLCBBVFRSLCBQUkl1NjQsIC0xKTsKKwlpZ3Rfc3lzZnNfc2NhbmYoZW5naW5lLCBBVFRSLCAi
JXUiLCAmZGVsYXkpOworCWlndF9hc3NlcnRfZXEoZGVsYXksIHNhdmVkKTsKKworCWlndF9zeXNm
c19wcmludGYoZW5naW5lLCBBVFRSLCAiJWQiLCAtMSk7CisJaWd0X3N5c2ZzX3NjYW5mKGVuZ2lu
ZSwgQVRUUiwgIiV1IiwgJmRlbGF5KTsKKwlpZ3RfYXNzZXJ0X2VxKGRlbGF5LCBzYXZlZCk7CisK
KwlpZ3Rfc3lzZnNfcHJpbnRmKGVuZ2luZSwgQVRUUiwgUFJJdTY0LCAxMjN1bGwgPDwgMzIpOwor
CWlndF9zeXNmc19zY2FuZihlbmdpbmUsIEFUVFIsICIldSIsICZkZWxheSk7CisJaWd0X2Fzc2Vy
dF9lcShkZWxheSwgc2F2ZWQpOworfQorCitzdGF0aWMgdm9pZCBzZXRfdW5iYW5uYWJsZShpbnQg
aTkxNSwgdWludDMyX3QgY3R4KQoreworCXN0cnVjdCBkcm1faTkxNV9nZW1fY29udGV4dF9wYXJh
bSBwID0geworCQkuY3R4X2lkID0gY3R4LAorCQkucGFyYW0gPSBJOTE1X0NPTlRFWFRfUEFSQU1f
QkFOTkFCTEUsCisJfTsKKworCWdlbV9jb250ZXh0X3NldF9wYXJhbShpOTE1LCAmcCk7Cit9CisK
K3N0YXRpYyB1aW50MzJfdCBjcmVhdGVfY29udGV4dChpbnQgaTkxNSwgdW5zaWduZWQgaW50IGNs
YXNzLCB1bnNpZ25lZCBpbnQgaW5zdCwgaW50IHByaW8pCit7CisJdWludDMyX3QgY3R4OworCisJ
Y3R4ID0gZ2VtX2NvbnRleHRfY3JlYXRlX2Zvcl9lbmdpbmUoaTkxNSwgY2xhc3MsIGluc3QpOwor
CXNldF91bmJhbm5hYmxlKGk5MTUsIGN0eCk7CisJZ2VtX2NvbnRleHRfc2V0X3ByaW9yaXR5KGk5
MTUsIGN0eCwgcHJpbyk7CisKKwlyZXR1cm4gY3R4OworfQorCitzdGF0aWMgaW50IGNtcF91MzIo
Y29uc3Qgdm9pZCAqX2EsIGNvbnN0IHZvaWQgKl9iKQoreworCWNvbnN0IHVpbnQzMl90ICphID0g
X2EsICpiID0gX2I7CisKKwlyZXR1cm4gKmEgLSAqYjsKK30KKworc3RhdGljIGRvdWJsZSBjbG9j
a3JhdGUoaW50IGk5MTUpCit7CisJaW50IGZyZXE7CisJZHJtX2k5MTVfZ2V0cGFyYW1fdCBncCA9
IHsKKwkJLnZhbHVlID0gJmZyZXEsCisJCS5wYXJhbSA9IEk5MTVfUEFSQU1fQ1NfVElNRVNUQU1Q
X0ZSRVFVRU5DWSwKKwl9OworCisJaWd0X3JlcXVpcmUoaWd0X2lvY3RsKGk5MTUsIERSTV9JT0NU
TF9JOTE1X0dFVFBBUkFNLCAmZ3ApID09IDApOworCXJldHVybiAxZTkgLyBmcmVxOworfQorCitz
dGF0aWMgdWludDY0X3QgX190ZXN0X2R1cmF0aW9uKGludCBpOTE1LCBpbnQgZW5naW5lLCB1bnNp
Z25lZCBpbnQgdGltZW91dCkKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNfb2JqZWN0MiBv
YmpbM10gPSB7CisJCXsKKwkJCS5oYW5kbGUgPSBnZW1fY3JlYXRlKGk5MTUsIDQwOTYpLAorCQkJ
Lm9mZnNldCA9IDAsCisJCQkuZmxhZ3MgPSBFWEVDX09CSkVDVF9QSU5ORUQsCisJCX0sCisJCXsK
KwkJCS5oYW5kbGUgPSBnZW1fY3JlYXRlKGk5MTUsIDQwOTYpLAorCQkJLm9mZnNldCA9IDQwOTYs
CisJCQkuZmxhZ3MgPSBFWEVDX09CSkVDVF9QSU5ORUQsCisJCX0sCisJCXsgZ2VtX2NyZWF0ZShp
OTE1LCA0MDk2KSB9CisJfTsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyIGViID0g
eworCQkuYnVmZmVyX2NvdW50ID0gQVJSQVlfU0laRShvYmopLAorCQkuYnVmZmVyc19wdHIgPSB0
b191c2VyX3BvaW50ZXIob2JqKSwKKwl9OworCWNvbnN0IGludCBnZW4gPSBpbnRlbF9nZW4oaW50
ZWxfZ2V0X2RybV9kZXZpZChpOTE1KSk7CisJZG91YmxlIGR1cmF0aW9uID0gY2xvY2tyYXRlKGk5
MTUpOworCXVuc2lnbmVkIGludCBjbGFzcywgaW5zdCwgbW1pbzsKKwl1aW50MzJfdCAqY3MsICpt
YXA7CisJdWludDMyX3QgY3R4WzJdOworCWludCBzdGFydDsKKwlpbnQgaTsKKworCWlndF9yZXF1
aXJlKGdlbV9zY2hlZHVsZXJfaGFzX3ByZWVtcHRpb24oaTkxNSkpOworCWlndF9yZXF1aXJlKGdl
biA+PSA4KTsgLyogTUlfU0VNQVBIT1JFX1dBSVQgKi8KKworCWlndF9hc3NlcnQoaWd0X3N5c2Zz
X3NjYW5mKGVuZ2luZSwgImNsYXNzIiwgIiV1IiwgJmNsYXNzKSA9PSAxKTsKKwlpZ3RfYXNzZXJ0
KGlndF9zeXNmc19zY2FuZihlbmdpbmUsICJpbnN0YW5jZSIsICIldSIsICZpbnN0KSA9PSAxKTsK
KwlpZ3RfcmVxdWlyZShpZ3Rfc3lzZnNfc2NhbmYoZW5naW5lLCAibW1pb19iYXNlIiwgIiV4Iiwg
Jm1taW8pID09IDEpOworCisJc2V0X3RpbWVzbGljZShlbmdpbmUsIHRpbWVvdXQpOworCisJY3R4
WzBdID0gY3JlYXRlX2NvbnRleHQoaTkxNSwgY2xhc3MsIGluc3QsIDApOworCWN0eFsxXSA9IGNy
ZWF0ZV9jb250ZXh0KGk5MTUsIGNsYXNzLCBpbnN0LCAwKTsKKworCW1hcCA9IGdlbV9tbWFwX19k
ZXZpY2VfY29oZXJlbnQoaTkxNSwgb2JqWzJdLmhhbmRsZSwKKwkJCQkJMCwgNDA5NiwgUFJPVF9X
UklURSk7CisJZ2VtX3NldF9kb21haW4oaTkxNSwgb2JqWzJdLmhhbmRsZSwKKwkJICAgICAgIEk5
MTVfR0VNX0RPTUFJTl9HVFQsIEk5MTVfR0VNX0RPTUFJTl9HVFQpOworCisJY3MgPSBtYXA7CisJ
Zm9yIChpID0gMDsgaSA8IDEwOyBpKyspIHsKKwkJKmNzKysgPSBNSV9TRU1BUEhPUkVfV0FJVCB8
CisJCQlNSV9TRU1BUEhPUkVfUE9MTCB8CisJCQlNSV9TRU1BUEhPUkVfU0FEX05FUV9TREQgfAor
CQkJKDQgLSAyICsgKGdlbiA+PSAxMikpOworCQkqY3MrKyA9IDA7CisJCSpjcysrID0gb2JqWzBd
Lm9mZnNldCArIHNpemVvZih1aW50MzJfdCkgKiBpOworCQkqY3MrKyA9IDA7CisJCWlmIChnZW4g
Pj0gMTIpCisJCQkqY3MrKyA9IDA7CisKKwkJKmNzKysgPSAweDI0IDw8IDIzIHwgMjsgLyogU1JN
ICovCisJCSpjcysrID0gbW1pbyArIDB4MzU4OworCQkqY3MrKyA9IG9ialsxXS5vZmZzZXQgKyBz
aXplb2YodWludDMyX3QpICogaTsKKwkJKmNzKysgPSAwOworCisJCSpjcysrID0gTUlfU1RPUkVf
RFdPUkRfSU1NOworCQkqY3MrKyA9IG9ialswXS5vZmZzZXQgKworCQkJNDA5NiAtIHNpemVvZih1
aW50MzJfdCkgKiBpIC0gc2l6ZW9mKHVpbnQzMl90KTsKKwkJKmNzKysgPSAwOworCQkqY3MrKyA9
IDE7CisJfQorCSpjcysrID0gTUlfQkFUQ0hfQlVGRkVSX0VORDsKKworCWNzICs9IDE2IC0gKChj
cyAtIG1hcCkgJiAxNSk7CisJc3RhcnQgPSAoY3MgLSBtYXApICogc2l6ZW9mKCpjcyk7CisJZm9y
IChpID0gMDsgaSA8IDEwOyBpKyspIHsKKwkJKmNzKysgPSBNSV9TVE9SRV9EV09SRF9JTU07CisJ
CSpjcysrID0gb2JqWzBdLm9mZnNldCArIHNpemVvZih1aW50MzJfdCkgKiBpOworCQkqY3MrKyA9
IDA7CisJCSpjcysrID0gMTsKKworCQkqY3MrKyA9IE1JX1NFTUFQSE9SRV9XQUlUIHwKKwkJCU1J
X1NFTUFQSE9SRV9QT0xMIHwKKwkJCU1JX1NFTUFQSE9SRV9TQURfTkVRX1NERCB8CisJCQkoNCAt
IDIgKyAoZ2VuID49IDEyKSk7CisJCSpjcysrID0gMDsKKwkJKmNzKysgPSBvYmpbMF0ub2Zmc2V0
ICsKKwkJCTQwOTYgLSBzaXplb2YodWludDMyX3QpICogaSAtIHNpemVvZih1aW50MzJfdCk7CisJ
CSpjcysrID0gMDsKKwkJaWYgKGdlbiA+PSAxMikKKwkJCSpjcysrID0gMDsKKwl9CisJKmNzKysg
PSBNSV9CQVRDSF9CVUZGRVJfRU5EOworCWlndF9hc3NlcnQoY3MgLSBtYXAgPCA0MDk2IC8gc2l6
ZW9mKCpjcykpOworCW11bm1hcChtYXAsIDQwOTYpOworCisJZWIucnN2ZDEgPSBjdHhbMF07CisJ
Z2VtX2V4ZWNidWYoaTkxNSwgJmViKTsKKworCWViLnJzdmQxID0gY3R4WzFdOworCWViLmJhdGNo
X3N0YXJ0X29mZnNldCA9IHN0YXJ0OworCWdlbV9leGVjYnVmKGk5MTUsICZlYik7CisKKwlnZW1f
c3luYyhpOTE1LCBvYmpbMl0uaGFuZGxlKTsKKworCWdlbV9zZXRfZG9tYWluKGk5MTUsIG9ialsx
XS5oYW5kbGUsCisJCSAgICAgICBJOTE1X0dFTV9ET01BSU5fR1RULCBJOTE1X0dFTV9ET01BSU5f
R1RUKTsKKwltYXAgPSBnZW1fbW1hcF9fZGV2aWNlX2NvaGVyZW50KGk5MTUsIG9ialsxXS5oYW5k
bGUsCisJCQkJCTAsIDQwOTYsIFBST1RfV1JJVEUpOworCWZvciAoaSA9IDA7IGkgPCA5OyBpKysp
CisJCW1hcFtpXSA9IG1hcFtpICsgMV0gLSBtYXBbaV07CisJcXNvcnQobWFwLCA5LCBzaXplb2Yo
Km1hcCksIGNtcF91MzIpOworCWR1cmF0aW9uICo9IG1hcFs0XSAvIDI7IC8qIDIgc2VtYS13YWl0
cyBiZXR3ZWVuIHRpbWVzdGFtcCB1cGRhdGVzICovCisJbXVubWFwKG1hcCwgNDA5Nik7CisKKwlm
b3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShjdHgpOyBpKyspCisJCWdlbV9jb250ZXh0X2Rlc3Ry
b3koaTkxNSwgY3R4W2ldKTsKKworCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKG9iaik7IGkr
KykKKwkJZ2VtX2Nsb3NlKGk5MTUsIG9ialtpXS5oYW5kbGUpOworCisJcmV0dXJuIGR1cmF0aW9u
OworfQorCitzdGF0aWMgdW5zaWduZWQgaW50IHNldF9oZWFydGJlYXQoaW50IGVuZ2luZSwgdW5z
aWduZWQgaW50IHZhbHVlKQoreworCWNvbnN0IGNoYXIgKmF0dHI9ICJoZWFydGJlYXRfaW50ZXJ2
YWxfbXMiOworCXVuc2lnbmVkIGludCBvbGQgPSB+dmFsdWUsIG5ldzsKKworCWlndF9kZWJ1Zygi
c2V0ICVzOiVkXG4iLCBhdHRyLCB2YWx1ZSk7CisJaWd0X3N5c2ZzX3NjYW5mKGVuZ2luZSwgYXR0
ciwgIiV1IiwgJm9sZCk7CisJaWd0X3JlcXVpcmUoaWd0X3N5c2ZzX3ByaW50ZihlbmdpbmUsIGF0
dHIsICIldSIsIHZhbHVlKSA+IDApOworCWlndF9zeXNmc19zY2FuZihlbmdpbmUsIGF0dHIsICIl
dSIsICZuZXcpOworCWlndF9hc3NlcnRfZXEobmV3LCB2YWx1ZSk7CisKKwlyZXR1cm4gb2xkOwor
fQorCitzdGF0aWMgdm9pZCBkaXNhYmxlX2hlYXJ0YmVhdChpbnQgZW5naW5lLCB1bnNpZ25lZCBp
bnQgKnNhdmVkKQoreworCSpzYXZlZCA9IHNldF9oZWFydGJlYXQoZW5naW5lLCAwKTsKK30KKwor
c3RhdGljIHZvaWQgZW5hYmxlX2hlYXJ0YmVhdChpbnQgZW5naW5lLCB1bnNpZ25lZCBpbnQgc2F2
ZWQpCit7CisJc2V0X2hlYXJ0YmVhdChlbmdpbmUsIHNhdmVkKTsKK30KKworc3RhdGljIHZvaWQg
dGVzdF9kdXJhdGlvbihpbnQgaTkxNSwgaW50IGVuZ2luZSkKK3sKKwlpbnQgZGVsYXlzW10gPSB7
IDEsIDUwLCAxMDAsIDUwMCB9OworCXVuc2lnbmVkIGludCBzYXZlZCwgaGVhcnRiZWF0OworCisJ
LyoKKwkgKiBUaW1lc2xpY2luZyBhdCBpdHMgdmVyeSBiYXNpYyBsZXZlbCBpcyBzaGFyaW5nIHRo
ZSBHUFUgYnkKKwkgKiBydW5uaW5nIG9uZSBjb250ZXh0IGZvciBpbnRlcnZhbCBiZWZvcmUgcnVu
bmluZyBhbm90aGVyLiBBZnRlcgorCSAqIGVhY2ggaW50ZXJ2YWwgdGhlIHJ1bm5pbmcgY29udGV4
dCBpcyBzd2FwcGVkIGZvciBhbm90aGVyIHJ1bm5hYmxlCisJICogY29udGV4dC4KKwkgKgorCSAq
IFdlIGNhbiBtZWFzdXJlIHRoaXMgZGlyZWN0bHkgYnkgd2F0Y2hpbmcgdGhlIHhDU19USU1FU1RB
TVAgYW5kCisJICogcmVjb3JkaW5nIGl0cyB2YWx1ZSBldmVyeSB0aW1lIHdlIHN3aXRjaCBpbnRv
IHRoZSBjb250ZXh0LCB1c2luZworCSAqIGEgY291cGxlIG9mIHNlbWFwaG9yZXMgdG8gYnVzeXNw
aW4gZm9yIHRoZSB0aW1lc2xpY2UuCisJICovCisKKwlpZ3RfYXNzZXJ0KGlndF9zeXNmc19zY2Fu
ZihlbmdpbmUsIEFUVFIsICIldSIsICZzYXZlZCkgPT0gMSk7CisJaWd0X2RlYnVnKCJJbml0aWFs
ICVzOiV1XG4iLCBBVFRSLCBzYXZlZCk7CisKKwlnZW1fcXVpZXNjZW50X2dwdShpOTE1KTsKKwor
CWRpc2FibGVfaGVhcnRiZWF0KGVuZ2luZSwgJmhlYXJ0YmVhdCk7CisJZm9yIChpbnQgaSA9IDA7
IGkgPCBBUlJBWV9TSVpFKGRlbGF5cyk7IGkrKykgeworCQl1aW50NjRfdCBlbGFwc2VkOworCisJ
CWVsYXBzZWQgPSBfX3Rlc3RfZHVyYXRpb24oaTkxNSwgZW5naW5lLCBkZWxheXNbaV0pOworCQlp
Z3RfaW5mbygiJXM6JWQsIGVsYXBzZWQ9JS4zZm1zXG4iLAorCQkJIEFUVFIsIGRlbGF5c1tpXSwg
ZWxhcHNlZCAqIDFlLTYpOworCisJCS8qCisJCSAqIFdlIG5lZWQgdG8gZ2l2ZSBhIGNvdXBsZSBv
ZiBqaWZmaWVzIHNsYWNrIGZvciB0aGUgc2NoZWR1bGVyIHRpbWVvdXRzCisJCSAqIGFuZCB0aGVu
IGEgbGl0dGxlIG1vcmUgc2xhY2sgZnIgdGhlIG92ZXJoZWFkIGluIHN1Ym1pdHRpbmcgYW5kCisJ
CSAqIG1lYXN1cmluZy4gNTBtcyBzaG91bGQgY292ZXIgYWxsIG9mIG91ciBzaW5zIGFuZCBiZSB1
c2VmdWwKKwkJICogdG9sZXJhbmNlLgorCQkgKi8KKwkJaWd0X2Fzc2VydF9mKGVsYXBzZWQgLyAx
MDAwIC8gMTAwMCA8IGRlbGF5c1tpXSArIDUwLAorCQkJICAgICAiVGltZXNsaWNlIGV4Y2VlZGVk
IHJlcXVlc3QhXG4iKTsKKwl9CisJZW5hYmxlX2hlYXJ0YmVhdChlbmdpbmUsIGhlYXJ0YmVhdCk7
CisKKwlnZW1fcXVpZXNjZW50X2dwdShpOTE1KTsKKwlzZXRfdGltZXNsaWNlKGVuZ2luZSwgc2F2
ZWQpOworfQorCitzdGF0aWMgdWludDY0X3QgX190ZXN0X3RpbWVvdXQoaW50IGk5MTUsIGludCBl
bmdpbmUsIHVuc2lnbmVkIGludCB0aW1lb3V0KQoreworCXVuc2lnbmVkIGludCBjbGFzcywgaW5z
dDsKKwlzdHJ1Y3QgdGltZXNwZWMgdHMgPSB7fTsKKwlpZ3Rfc3Bpbl90ICpzcGluWzJdOworCXVp
bnQ2NF90IGVsYXBzZWQ7CisJdWludDMyX3QgY3R4WzJdOworCisJaWd0X2Fzc2VydChpZ3Rfc3lz
ZnNfc2NhbmYoZW5naW5lLCAiY2xhc3MiLCAiJXUiLCAmY2xhc3MpID09IDEpOworCWlndF9hc3Nl
cnQoaWd0X3N5c2ZzX3NjYW5mKGVuZ2luZSwgImluc3RhbmNlIiwgIiV1IiwgJmluc3QpID09IDEp
OworCisJc2V0X3RpbWVzbGljZShlbmdpbmUsIHRpbWVvdXQpOworCisJY3R4WzBdID0gY3JlYXRl
X2NvbnRleHQoaTkxNSwgY2xhc3MsIGluc3QsIDApOworCXNwaW5bMF0gPSBpZ3Rfc3Bpbl9uZXco
aTkxNSwgY3R4WzBdLAorCQkJICAgICAgIC5mbGFncyA9IChJR1RfU1BJTl9OT19QUkVFTVBUSU9O
IHwKKwkJCQkJIElHVF9TUElOX1BPTExfUlVOIHwKKwkJCQkJIElHVF9TUElOX0ZFTkNFX09VVCkp
OworCWlndF9zcGluX2J1c3l3YWl0X3VudGlsX3N0YXJ0ZWQoc3BpblswXSk7CisKKwljdHhbMV0g
PSBjcmVhdGVfY29udGV4dChpOTE1LCBjbGFzcywgaW5zdCwgMCk7CisJaWd0X25zZWNfZWxhcHNl
ZCgmdHMpOworCXNwaW5bMV0gPSBpZ3Rfc3Bpbl9uZXcoaTkxNSwgY3R4WzFdLCAuZmxhZ3MgPSBJ
R1RfU1BJTl9QT0xMX1JVTik7CisJaWd0X3NwaW5fYnVzeXdhaXRfdW50aWxfc3RhcnRlZChzcGlu
WzFdKTsKKwllbGFwc2VkID0gaWd0X25zZWNfZWxhcHNlZCgmdHMpOworCisJaWd0X3NwaW5fZnJl
ZShpOTE1LCBzcGluWzFdKTsKKworCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV93YWl0KHNwaW5b
MF0tPm91dF9mZW5jZSwgUkVTRVRfVElNRU9VVCksIDApOworCWlndF9hc3NlcnRfZXEoc3luY19m
ZW5jZV9zdGF0dXMoc3BpblswXS0+b3V0X2ZlbmNlKSwgLUVJTyk7CisKKwlpZ3Rfc3Bpbl9mcmVl
KGk5MTUsIHNwaW5bMF0pOworCisJZ2VtX2NvbnRleHRfZGVzdHJveShpOTE1LCBjdHhbMV0pOwor
CWdlbV9jb250ZXh0X2Rlc3Ryb3koaTkxNSwgY3R4WzBdKTsKKwlnZW1fcXVpZXNjZW50X2dwdShp
OTE1KTsKKworCXJldHVybiBlbGFwc2VkOworfQorCitzdGF0aWMgdm9pZCB0ZXN0X3RpbWVvdXQo
aW50IGk5MTUsIGludCBlbmdpbmUpCit7CisJaW50IGRlbGF5c1tdID0geyAxLCA1MCwgMTAwLCA1
MDAgfTsKKwl1bnNpZ25lZCBpbnQgc2F2ZWQ7CisKKwkvKgorCSAqIFRpbWVzbGljaW5nIHJlcXVp
cmVzIHVzIHRvIHByZWVtcHQgdGhlIHJ1bm5pbmcgY29udGV4dCBpbiBvcmRlciB0bworCSAqIHN3
aXRjaCBpbnRvIGl0cyBjb250ZW1wb3JhcnkuIElmIHdlIGNvdXBsZSBhIHVucHJlZW1wdGFibGUg
aG9nCisJICogd2l0aCBhIGZhc3QgZm9yY2VkIHJlc2V0LCB3ZSBjYW4gbWVhc3VyZSB0aGUgdGlt
ZXNsaWNlIGJ5IGhvdyBsb25nCisJICogaXQgdGFrZXMgZm9yIHRoZSBob2cgdG8gYmUgcmVzZXQg
YW5kIHRoZSBoaWdoIHByaW9yaXR5IGNvbnRleHQKKwkgKiB0byBjb21wbGV0ZS4KKwkgKi8KKwor
CWlndF9yZXF1aXJlKGlndF9zeXNmc19wcmludGYoZW5naW5lLCAicHJlZW1wdF90aW1lb3V0X21z
IiwgIiV1IiwgMSkgPT0gMSk7CisJaWd0X2Fzc2VydChpZ3Rfc3lzZnNfc2NhbmYoZW5naW5lLCBB
VFRSLCAiJXUiLCAmc2F2ZWQpID09IDEpOworCWlndF9kZWJ1ZygiSW5pdGlhbCAlczoldVxuIiwg
QVRUUiwgc2F2ZWQpOworCisJZ2VtX3F1aWVzY2VudF9ncHUoaTkxNSk7CisJaWd0X3JlcXVpcmUo
ZW5hYmxlX2hhbmdjaGVjayhpOTE1LCBmYWxzZSkpOworCisJZm9yIChpbnQgaSA9IDA7IGkgPCBB
UlJBWV9TSVpFKGRlbGF5cyk7IGkrKykgeworCQl1aW50NjRfdCBlbGFwc2VkOworCisJCWVsYXBz
ZWQgPSBfX3Rlc3RfdGltZW91dChpOTE1LCBlbmdpbmUsIGRlbGF5c1tpXSk7CisJCWlndF9pbmZv
KCIlczolZCwgZWxhcHNlZD0lLjNmbXNcbiIsCisJCQkgQVRUUiwgZGVsYXlzW2ldLCBlbGFwc2Vk
ICogMWUtNik7CisKKwkJLyoKKwkJICogV2UgbmVlZCB0byBnaXZlIGEgY291cGxlIG9mIGppZmZp
ZXMgc2xhY2sgZm9yIHRoZSBzY2hlZHVsZXIgdGltZW91dHMKKwkJICogYW5kIHRoZW4gYSBsaXR0
bGUgbW9yZSBzbGFjayBmciB0aGUgb3ZlcmhlYWQgaW4gc3VibWl0dGluZyBhbmQKKwkJICogbWVh
c3VyaW5nLiA1MG1zIHNob3VsZCBjb3ZlciBhbGwgb2Ygb3VyIHNpbnMgYW5kIGJlIHVzZWZ1bAor
CQkgKiB0b2xlcmFuY2UuCisJCSAqLworCQlpZ3RfYXNzZXJ0X2YoZWxhcHNlZCAvIDEwMDAgLyAx
MDAwIDwgZGVsYXlzW2ldICsgNTAsCisJCQkgICAgICJUaW1lc2xpY2UgZXhjZWVkZWQgcmVxdWVz
dCFcbiIpOworCX0KKworCWlndF9hc3NlcnQoZW5hYmxlX2hhbmdjaGVjayhpOTE1LCB0cnVlKSk7
CisJZ2VtX3F1aWVzY2VudF9ncHUoaTkxNSk7CisJc2V0X3RpbWVzbGljZShlbmdpbmUsIHNhdmVk
KTsKK30KKworc3RhdGljIHZvaWQgdGVzdF9vZmYoaW50IGk5MTUsIGludCBlbmdpbmUpCit7CisJ
dW5zaWduZWQgaW50IGNsYXNzLCBpbnN0OworCXVuc2lnbmVkIGludCBzYXZlZDsKKwlpZ3Rfc3Bp
bl90ICpzcGluWzJdOworCXVpbnQzMl90IGN0eFsyXTsKKworCS8qCisJICogQXMgYWx3YXlzLCB0
aGVyZSBhcmUgc29tZSB3aG8gbXVzdCBydW4gdW5pbnRlcnJ1cHRlZCBhbmQgc2ltcGx5IGRvCisJ
ICogbm90IHdhbnQgdG8gc2hhcmUgdGhlIEdQVSBldmVuIGZvciBhIG1pY3Jvc2Vjb25kLiBUaG9z
ZSBncmVlZHkKKwkgKiBjbGllbnRzIGNhbiBkaXNhYmxlIHRpbWVzbGljaW5nIGVudGlyZWx5LCBh
bmQgc28gc2V0IHRoZSB0aW1lc2xpY2UKKwkgKiB0byAwLiBXZSB0ZXN0IHRoYXQgYSBob2cgaXMg
bm90IHByZWVtcHRlZCB3aXRoaW4gdGhlIDE1MHMgb2YKKwkgKiBvdXIgYm9yZWRvbSB0aHJlc2hv
bGQuCisJICovCisKKwlpZ3RfcmVxdWlyZShpZ3Rfc3lzZnNfcHJpbnRmKGVuZ2luZSwgInByZWVt
cHRfdGltZW91dF9tcyIsICIldSIsIDEpID09IDEpOworCWlndF9hc3NlcnQoaWd0X3N5c2ZzX3Nj
YW5mKGVuZ2luZSwgQVRUUiwgIiV1IiwgJnNhdmVkKSA9PSAxKTsKKwlpZ3RfZGVidWcoIkluaXRp
YWwgJXM6JXVcbiIsIEFUVFIsIHNhdmVkKTsKKworCWdlbV9xdWllc2NlbnRfZ3B1KGk5MTUpOwor
CWlndF9yZXF1aXJlKGVuYWJsZV9oYW5nY2hlY2soaTkxNSwgZmFsc2UpKTsKKworCWlndF9hc3Nl
cnQoaWd0X3N5c2ZzX3NjYW5mKGVuZ2luZSwgImNsYXNzIiwgIiV1IiwgJmNsYXNzKSA9PSAxKTsK
KwlpZ3RfYXNzZXJ0KGlndF9zeXNmc19zY2FuZihlbmdpbmUsICJpbnN0YW5jZSIsICIldSIsICZp
bnN0KSA9PSAxKTsKKworCXNldF90aW1lc2xpY2UoZW5naW5lLCAwKTsKKworCWN0eFswXSA9IGNy
ZWF0ZV9jb250ZXh0KGk5MTUsIGNsYXNzLCBpbnN0LCAwKTsKKwlzcGluWzBdID0gaWd0X3NwaW5f
bmV3KGk5MTUsIGN0eFswXSwKKwkJCSAgICAgICAuZmxhZ3MgPSAoSUdUX1NQSU5fTk9fUFJFRU1Q
VElPTiB8CisJCQkJCSBJR1RfU1BJTl9QT0xMX1JVTiB8CisJCQkJCSBJR1RfU1BJTl9GRU5DRV9P
VVQpKTsKKwlpZ3Rfc3Bpbl9idXN5d2FpdF91bnRpbF9zdGFydGVkKHNwaW5bMF0pOworCisJY3R4
WzFdID0gY3JlYXRlX2NvbnRleHQoaTkxNSwgY2xhc3MsIGluc3QsIDApOworCXNwaW5bMV0gPSBp
Z3Rfc3Bpbl9uZXcoaTkxNSwgY3R4WzFdLCAuZmxhZ3MgPSBJR1RfU1BJTl9QT0xMX1JVTik7CisK
Kwlmb3IgKGludCBpID0gMDsgaSA8IDE1MDsgaSsrKSB7CisJCWlndF9hc3NlcnRfZXEoc3luY19m
ZW5jZV9zdGF0dXMoc3BpblswXS0+b3V0X2ZlbmNlKSwgMCk7CisJCXNsZWVwKDEpOworCX0KKwor
CXNldF90aW1lc2xpY2UoZW5naW5lLCAxKTsKKworCWlndF9zcGluX2J1c3l3YWl0X3VudGlsX3N0
YXJ0ZWQoc3BpblsxXSk7CisJaWd0X3NwaW5fZnJlZShpOTE1LCBzcGluWzFdKTsKKworCWlndF9h
c3NlcnRfZXEoc3luY19mZW5jZV93YWl0KHNwaW5bMF0tPm91dF9mZW5jZSwgUkVTRVRfVElNRU9V
VCksIDApOworCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV9zdGF0dXMoc3BpblswXS0+b3V0X2Zl
bmNlKSwgLUVJTyk7CisKKwlpZ3Rfc3Bpbl9mcmVlKGk5MTUsIHNwaW5bMF0pOworCisJZ2VtX2Nv
bnRleHRfZGVzdHJveShpOTE1LCBjdHhbMV0pOworCWdlbV9jb250ZXh0X2Rlc3Ryb3koaTkxNSwg
Y3R4WzBdKTsKKworCWlndF9hc3NlcnQoZW5hYmxlX2hhbmdjaGVjayhpOTE1LCB0cnVlKSk7CisJ
Z2VtX3F1aWVzY2VudF9ncHUoaTkxNSk7CisKKwlzZXRfdGltZXNsaWNlKGVuZ2luZSwgc2F2ZWQp
OworfQorCitpZ3RfbWFpbgoreworCXN0YXRpYyBjb25zdCBzdHJ1Y3QgeworCQljb25zdCBjaGFy
ICpuYW1lOworCQl2b2lkICgqZm4pKGludCwgaW50KTsKKwl9IHRlc3RzW10gPSB7CisJCXsgImlk
ZW1wb3RlbnQiLCB0ZXN0X2lkZW1wb3RlbnQgfSwKKwkJeyAiaW52YWxpZCIsIHRlc3RfaW52YWxp
ZCB9LAorCQl7ICJkdXJhdGlvbiIsIHRlc3RfZHVyYXRpb24gfSwKKwkJeyAidGltZW91dCIsIHRl
c3RfdGltZW91dCB9LAorCQl7ICJvZmYiLCB0ZXN0X29mZiB9LAorCQl7IH0KKwl9OworCWludCBp
OTE1ID0gLTEsIGVuZ2luZXMgPSAtMTsKKworCWlndF9maXh0dXJlIHsKKwkJaW50IHN5czsKKwor
CQlpOTE1ID0gZHJtX29wZW5fZHJpdmVyKERSSVZFUl9JTlRFTCk7CisJCWlndF9yZXF1aXJlX2dl
bShpOTE1KTsKKwkJaWd0X2FsbG93X2hhbmcoaTkxNSwgMCwgMCk7CisKKwkJc3lzID0gaWd0X3N5
c2ZzX29wZW4oaTkxNSk7CisJCWlndF9yZXF1aXJlKHN5cyAhPSAtMSk7CisKKwkJZW5naW5lcyA9
IG9wZW5hdChzeXMsICJlbmdpbmUiLCBPX1JET05MWSk7CisJCWlndF9yZXF1aXJlKGVuZ2luZXMg
IT0gLTEpOworCisJCWNsb3NlKHN5cyk7CisJfQorCisJZm9yICh0eXBlb2YoKnRlc3RzKSAqdCA9
IHRlc3RzOyB0LT5uYW1lOyB0KyspCisJCWlndF9zdWJ0ZXN0X3dpdGhfZHluYW1pYyh0LT5uYW1l
KQorCQkJZHluX3N5c2ZzX2VuZ2luZXMoaTkxNSwgZW5naW5lcywgQVRUUiwgdC0+Zm4pOworCisJ
aWd0X2ZpeHR1cmUgeworCQljbG9zZShlbmdpbmVzKTsKKwkJY2xvc2UoaTkxNSk7CisJfQorfQpk
aWZmIC0tZ2l0IGEvdGVzdHMvaW50ZWwtY2kvYmxhY2tsaXN0LnR4dCBiL3Rlc3RzL2ludGVsLWNp
L2JsYWNrbGlzdC50eHQKaW5kZXggYTAyZWY2N2U2Li5kMGUxZWU5MDkgMTAwNjQ0Ci0tLSBhL3Rl
c3RzL2ludGVsLWNpL2JsYWNrbGlzdC50eHQKKysrIGIvdGVzdHMvaW50ZWwtY2kvYmxhY2tsaXN0
LnR4dApAQCAtNjIsNiArNjIsNyBAQCBpZ3RAZ2VtX3VzZXJwdHJfYmxpdHNAKG1ham9yfG1pbm9y
fGZvcmtlZHxtbG9ja2VkfHN3YXBwaW5nKS4qCiBpZ3RAZ2VtX3dhaXRALipoYW5nLioKIGlndEBz
eXNmc19oZWFydGJlYXRfdGltZW91dEBsb25nLioKIGlndEBzeXNmc19wcmVlbXB0aW9uX3RpbWVv
dXRAb2ZmLioKK2lndEBzeXNmc190aW1lc2xpY2VfZHVyYXRpb25Ab2ZmLioKICMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAjIEdFTTogTm90IHdvcnRoIGZp
eGluZwogIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZGlm
ZiAtLWdpdCBhL3Rlc3RzL21lc29uLmJ1aWxkIGIvdGVzdHMvbWVzb24uYnVpbGQKaW5kZXggM2U1
OTUyMTAxLi43NjI5YWZkZTkgMTAwNjQ0Ci0tLSBhL3Rlc3RzL21lc29uLmJ1aWxkCisrKyBiL3Rl
c3RzL21lc29uLmJ1aWxkCkBAIC0yMjksNiArMjI5LDcgQEAgaTkxNV9wcm9ncyA9IFsKIAknaTkx
NV9zdXNwZW5kJywKIAknc3lzZnNfaGVhcnRiZWF0X2ludGVydmFsJywKIAknc3lzZnNfcHJlZW1w
dF90aW1lb3V0JywKKwknc3lzZnNfdGltZXNsaWNlX2R1cmF0aW9uJywKIF0KIAogdGVzdF9kZXBz
ID0gWyBpZ3RfZGVwcyBdCi0tIAoyLjI1LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeAo=

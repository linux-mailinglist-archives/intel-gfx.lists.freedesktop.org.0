Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A5CD337D3B2
	for <lists+intel-gfx@lfdr.de>; Wed, 12 May 2021 20:58:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 05E4D6ECC2;
	Wed, 12 May 2021 18:58:58 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A5B836ECC2
 for <intel-gfx@lists.freedesktop.org>; Wed, 12 May 2021 18:58:57 +0000 (UTC)
IronPort-SDR: 2LBK9nVAKpdQIlObvqqaNoLxIQVVG4ExcxTzpGdX2/8B1EuHys3vn0SpQKFYopKVlU+PmkCp9J
 7sAnjfXiI36A==
X-IronPort-AV: E=McAfee;i="6200,9189,9982"; a="180046966"
X-IronPort-AV: E=Sophos;i="5.82,295,1613462400"; d="scan'208";a="180046966"
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by fmsmga107.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 12 May 2021 11:58:57 -0700
IronPort-SDR: GqWPCyqBrLcyoG+c3Klc13d/zJc+PekSEK0CdTslEP5UQOEzvxIMu1LJzoelFp/xTC7fjnTDai
 p75aWNHDM4hw==
X-IronPort-AV: E=Sophos;i="5.82,295,1613462400"; d="scan'208";a="622799084"
Received: from olovaszi-mobl1.ger.corp.intel.com (HELO localhost)
 ([10.252.33.202])
 by fmsmga006-auth.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 12 May 2021 11:58:54 -0700
From: Jani Nikula <jani.nikula@linux.intel.com>
To: Ville Syrjala <ville.syrjala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
In-Reply-To: <20210421164849.12806-12-ville.syrjala@linux.intel.com>
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
References: <20210421164849.12806-1-ville.syrjala@linux.intel.com>
 <20210421164849.12806-12-ville.syrjala@linux.intel.com>
Date: Wed, 12 May 2021 21:58:51 +0300
Message-ID: <87fsyru6c4.fsf@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH 11/17] drm/i915: Introduce
 rkl_get_combo_buf_trans()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCAyMSBBcHIgMjAyMSwgVmlsbGUgU3lyamFsYSA8dmlsbGUuc3lyamFsYUBsaW51eC5p
bnRlbC5jb20+IHdyb3RlOgo+IEZyb206IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBs
aW51eC5pbnRlbC5jb20+Cj4KPiBHaXZlIFJLTCBpdHMgb3duIGdldF9idWZfdHJhbnMoKSBmdW5j
Lgo+Cj4gTm90ZSB0aGF0IHRoZSBzcGVjIGN1cnJlbnRseSBvbmx5IGxpc3RzIHZhbHVlcyBmb3Ig
RFAuCj4gVW50aWwgd2UgZ2V0IHRoYXQgY2xhcmlmaWVkIGxldCdzIGp1c3QgYXNzdW1lIHRoYXQg
Zm9yCj4gSERNSSBhbmQgZURQIHdlIHNob3VsZCBkbyB3aGF0IFRHTCBkb2VzIChleGNlcHQgd2Ug
ZmFsbAo+IGJhY2sgdG8gdGhlIFJLTCBEUCB2YWx1ZXMgaW5zdGVhZCBvZiBUR0wgRFAgdmFsdWVz
IHdoZW4KPiBub3QgdXNpbmcgdGhlIGVEUCBzcGVjaWZpYyB2YWx1ZXMsIHdoZXJlYXMgcHJldmlv
dXNseQo+IHdlIHVzZWQgYWxsIFRHTCB2YWx1ZXMgZm9yIGVEUCkuCj4KPiBTaWduZWQtb2ZmLWJ5
OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgoKUmV2aWV3
ZWQtYnk6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBpbnRlbC5jb20+CgoKPiAtLS0KPiAgLi4u
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5jICAgIHwgNjUgKysrKysrKysr
KysrKysrLS0tLQo+ICAxIGZpbGUgY2hhbmdlZCwgNTMgaW5zZXJ0aW9ucygrKSwgMTIgZGVsZXRp
b25zKC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kZGlfYnVmX3RyYW5zLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rk
aV9idWZfdHJhbnMuYwo+IGluZGV4IDFkNzg2NDBjNDM5ZS4uZmQ1NWM4MTJmMTRhIDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGlfYnVmX3RyYW5z
LmMKPiBAQCAtMTQ1OCwxMCArMTQ1OCw3IEBAIHRnbF9nZXRfY29tYm9fYnVmX3RyYW5zX2RwKHN0
cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAo+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7Cj4gIAo+ICAJaWYgKGNydGNf
c3RhdGUtPnBvcnRfY2xvY2sgPiAyNzAwMDApIHsKPiAtCQlpZiAoSVNfUk9DS0VUTEFLRShkZXZf
cHJpdikpIHsKPiAtCQkJcmV0dXJuIGludGVsX2dldF9idWZfdHJhbnMoJnJrbF9jb21ib19waHlf
ZGRpX3RyYW5zbGF0aW9uc19kcF9oYnIyX2hicjMsCj4gLQkJCQkJCSAgIG5fZW50cmllcyk7Cj4g
LQkJfSBlbHNlIGlmIChJU19UR0xfVShkZXZfcHJpdikgfHwgSVNfVEdMX1koZGV2X3ByaXYpKSB7
Cj4gKwkJaWYgKElTX1RHTF9VKGRldl9wcml2KSB8fCBJU19UR0xfWShkZXZfcHJpdikpIHsKPiAg
CQkJcmV0dXJuIGludGVsX2dldF9idWZfdHJhbnMoJnRnbF91eV9jb21ib19waHlfZGRpX3RyYW5z
bGF0aW9uc19kcF9oYnIyLAo+ICAJCQkJCQkgICBuX2VudHJpZXMpOwo+ICAJCX0gZWxzZSB7Cj4g
QEAgLTE0NjksMTMgKzE0NjYsOCBAQCB0Z2xfZ2V0X2NvbWJvX2J1Zl90cmFuc19kcChzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlciwKPiAgCQkJCQkJICAgbl9lbnRyaWVzKTsKPiAgCQl9Cj4g
IAl9IGVsc2Ugewo+IC0JCWlmIChJU19ST0NLRVRMQUtFKGRldl9wcml2KSkgewo+IC0JCQlyZXR1
cm4gaW50ZWxfZ2V0X2J1Zl90cmFucygmcmtsX2NvbWJvX3BoeV9kZGlfdHJhbnNsYXRpb25zX2Rw
X2hiciwKPiAtCQkJCQkJICAgbl9lbnRyaWVzKTsKPiAtCQl9IGVsc2Ugewo+IC0JCQlyZXR1cm4g
aW50ZWxfZ2V0X2J1Zl90cmFucygmdGdsX2NvbWJvX3BoeV9kZGlfdHJhbnNsYXRpb25zX2RwX2hi
ciwKPiAtCQkJCQkJICAgbl9lbnRyaWVzKTsKPiAtCQl9Cj4gKwkJcmV0dXJuIGludGVsX2dldF9i
dWZfdHJhbnMoJnRnbF9jb21ib19waHlfZGRpX3RyYW5zbGF0aW9uc19kcF9oYnIsCj4gKwkJCQkJ
ICAgbl9lbnRyaWVzKTsKPiAgCX0KPiAgfQo+ICAKPiBAQCAtMTUxNCw2ICsxNTA2LDUzIEBAIHRn
bF9nZXRfY29tYm9fYnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAo+ICAJ
CXJldHVybiB0Z2xfZ2V0X2NvbWJvX2J1Zl90cmFuc19kcChlbmNvZGVyLCBjcnRjX3N0YXRlLCBu
X2VudHJpZXMpOwo+ICB9Cj4gIAo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZf
dHJhbnMgKgo+ICtya2xfZ2V0X2NvbWJvX2J1Zl90cmFuc19kcChzdHJ1Y3QgaW50ZWxfZW5jb2Rl
ciAqZW5jb2RlciwKPiArCQkJICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNf
c3RhdGUsCj4gKwkJCSAgIGludCAqbl9lbnRyaWVzKQo+ICt7Cj4gKwlpZiAoY3J0Y19zdGF0ZS0+
cG9ydF9jbG9jayA+IDI3MDAwMCkKPiArCQlyZXR1cm4gaW50ZWxfZ2V0X2J1Zl90cmFucygmcmts
X2NvbWJvX3BoeV9kZGlfdHJhbnNsYXRpb25zX2RwX2hicjJfaGJyMywgbl9lbnRyaWVzKTsKPiAr
CWVsc2UKPiArCQlyZXR1cm4gaW50ZWxfZ2V0X2J1Zl90cmFucygmcmtsX2NvbWJvX3BoeV9kZGlf
dHJhbnNsYXRpb25zX2RwX2hiciwgbl9lbnRyaWVzKTsKPiArfQo+ICsKPiArc3RhdGljIGNvbnN0
IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKPiArcmtsX2dldF9jb21ib19idWZfdHJhbnNf
ZWRwKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAo+ICsJCQkgICAgY29uc3Qgc3RydWN0
IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCj4gKwkJCSAgICBpbnQgKm5fZW50cmllcykK
PiArewo+ICsJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShlbmNv
ZGVyLT5iYXNlLmRldik7Cj4gKwlzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwID0gZW5jX3RvX2lu
dGVsX2RwKGVuY29kZXIpOwo+ICsKPiArCWlmIChjcnRjX3N0YXRlLT5wb3J0X2Nsb2NrID4gNTQw
MDAwKSB7Cj4gKwkJcmV0dXJuIGludGVsX2dldF9idWZfdHJhbnMoJmljbF9jb21ib19waHlfZGRp
X3RyYW5zbGF0aW9uc19lZHBfaGJyMywKPiArCQkJCQkgICBuX2VudHJpZXMpOwo+ICsJfSBlbHNl
IGlmIChkZXZfcHJpdi0+dmJ0LmVkcC5ob2JsICYmICFpbnRlbF9kcC0+aG9ibF9mYWlsZWQpIHsK
PiArCQlyZXR1cm4gaW50ZWxfZ2V0X2J1Zl90cmFucygmdGdsX2NvbWJvX3BoeV9kZGlfdHJhbnNs
YXRpb25zX2VkcF9oYnIyX2hvYmwsCj4gKwkJCQkJICAgbl9lbnRyaWVzKTsKPiArCX0gZWxzZSBp
ZiAoZGV2X3ByaXYtPnZidC5lZHAubG93X3Zzd2luZykgewo+ICsJCXJldHVybiBpbnRlbF9nZXRf
YnVmX3RyYW5zKCZpY2xfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfZWRwX2hicjIsCj4gKwkJ
CQkJICAgbl9lbnRyaWVzKTsKPiArCX0KPiArCj4gKwlyZXR1cm4gcmtsX2dldF9jb21ib19idWZf
dHJhbnNfZHAoZW5jb2RlciwgY3J0Y19zdGF0ZSwgbl9lbnRyaWVzKTsKPiArfQo+ICsKPiArc3Rh
dGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKPiArcmtsX2dldF9jb21ib19i
dWZfdHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCj4gKwkJCWNvbnN0IHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+ICsJCQlpbnQgKm5fZW50cmllcykKPiAr
ewo+ICsJLyogRklYTUUgdW5jbGVhciB3aGF0IHZhbHVlcyB3ZSBzaG91bGQgdXNlIGZvciBIRE1J
IGFuZCBlRFAgKi8KPiArCWlmIChpbnRlbF9jcnRjX2hhc190eXBlKGNydGNfc3RhdGUsIElOVEVM
X09VVFBVVF9IRE1JKSkKPiArCQlyZXR1cm4gdGdsX2dldF9jb21ib19idWZfdHJhbnNfaGRtaShl
bmNvZGVyLCBjcnRjX3N0YXRlLCBuX2VudHJpZXMpOwo+ICsJZWxzZSBpZiAoaW50ZWxfY3J0Y19o
YXNfdHlwZShjcnRjX3N0YXRlLCBJTlRFTF9PVVRQVVRfRURQKSkKPiArCQlyZXR1cm4gcmtsX2dl
dF9jb21ib19idWZfdHJhbnNfZWRwKGVuY29kZXIsIGNydGNfc3RhdGUsIG5fZW50cmllcyk7Cj4g
KwllbHNlCj4gKwkJcmV0dXJuIHJrbF9nZXRfY29tYm9fYnVmX3RyYW5zX2RwKGVuY29kZXIsIGNy
dGNfc3RhdGUsIG5fZW50cmllcyk7Cj4gK30KPiArCj4gIHN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50
ZWxfZGRpX2J1Zl90cmFucyAqCj4gIHRnbF9nZXRfZGtsX2J1Zl90cmFuc19oZG1pKHN0cnVjdCBp
bnRlbF9lbmNvZGVyICplbmNvZGVyLAo+ICAJCQkgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZSAqY3J0Y19zdGF0ZSwKPiBAQCAtMTU3Myw3ICsxNjEyLDkgQEAgdm9pZCBpbnRlbF9kZGlf
YnVmX3RyYW5zX2luaXQoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIpCj4gIAlzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOwo+ICAJ
ZW51bSBwaHkgcGh5ID0gaW50ZWxfcG9ydF90b19waHkoaTkxNSwgZW5jb2Rlci0+cG9ydCk7Cj4g
IAo+IC0JaWYgKERJU1BMQVlfVkVSKGk5MTUpID49IDEyKSB7Cj4gKwlpZiAoSVNfUk9DS0VUTEFL
RShpOTE1KSkgewo+ICsJCWVuY29kZXItPmdldF9idWZfdHJhbnMgPSBya2xfZ2V0X2NvbWJvX2J1
Zl90cmFuczsKPiArCX0gZWxzZSBpZiAoRElTUExBWV9WRVIoaTkxNSkgPj0gMTIpIHsKPiAgCQlp
ZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGk5MTUsIHBoeSkpCj4gIAkJCWVuY29kZXItPmdldF9idWZf
dHJhbnMgPSB0Z2xfZ2V0X2NvbWJvX2J1Zl90cmFuczsKPiAgCQllbHNlCgotLSAKSmFuaSBOaWt1
bGEsIEludGVsIE9wZW4gU291cmNlIEdyYXBoaWNzIENlbnRlcgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVs
LWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

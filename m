Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 065C6391D2E
	for <lists+intel-gfx@lfdr.de>; Wed, 26 May 2021 18:37:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 30E2E6E194;
	Wed, 26 May 2021 16:37:39 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-ed1-x536.google.com (mail-ed1-x536.google.com
 [IPv6:2a00:1450:4864:20::536])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D40A76E194
 for <intel-gfx@lists.freedesktop.org>; Wed, 26 May 2021 16:37:37 +0000 (UTC)
Received: by mail-ed1-x536.google.com with SMTP id df21so2316242edb.3
 for <intel-gfx@lists.freedesktop.org>; Wed, 26 May 2021 09:37:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=7j7ZufiiTOqzVpKZdemVCOGwdsjbZKVtKpD5Om67Ua8=;
 b=Ww7HhkJb3QLyvOFvYPcOwG8HpIgTuHowg3wFIs5RBvC5UjILC9xJ+2rXietplVbID4
 dfYTk0Cwnm9M2CIxasOzgxHhmEZP218CbSFRuSNUPXGCr2i1RotdaNu/52rN6j8zJa59
 zKk2WROp+Kne4nIRl0HcDI7ABIPu4VOCMSOfs=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=7j7ZufiiTOqzVpKZdemVCOGwdsjbZKVtKpD5Om67Ua8=;
 b=aQTF9H4Sst3HyDyZ63YD5cAVwPtHRGhfAtGAr8Ii3KR34NXf6jzeBh6Jd64SOO+TbC
 DWVLyAxAjYfcTjy2XBY9XYTewWjpFGgmI0DwO4vN/ugvb2l8BFl0gzddSPHNi1LWDpKH
 fVjas6My5QjyIY6K5K4Q9PHlGJqPOeoGcpJik3kAm/yqRZWyLJb4Pb8MzbCB2C+Q375c
 A42t900CIp15SUGIAZTyC9M4EpSTAgLoLEmzTYZKnip1yWiWab2fURL+k5Yv8qrclDg4
 bdwpa7ylAx6xiG5bxcyu8wkWl78mOwwwf1tdlvT7jyJfhPnc+OVyAmqaKOlcTR/YQPev
 9Ebg==
X-Gm-Message-State: AOAM532Fnt47/didOQtArqn5e4qDgrYmRjR6K6jqXoSCzYbR42V5nwmh
 E6fWEM4KCcwHnquSCyrO8f5ZOmiXRQFjmg==
X-Google-Smtp-Source: ABdhPJz9MXWowukPtGUGiDeQDRFv+ZlDAUYjAp4oW4QmS2DyWYMbPfQwy5K/oPLKfQzEmr7LzRnJ0w==
X-Received: by 2002:aa7:cf19:: with SMTP id a25mr26117084edy.336.1622047056191; 
 Wed, 26 May 2021 09:37:36 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:57f4:0:efd0:b9e5:5ae6:c2fa])
 by smtp.gmail.com with ESMTPSA id l19sm12712038edv.17.2021.05.26.09.37.35
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 26 May 2021 09:37:35 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: Intel Graphics Development <intel-gfx@lists.freedesktop.org>
Date: Wed, 26 May 2021 18:37:30 +0200
Message-Id: <20210526163730.3423181-1-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.31.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915: Disable gpu relocations
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Thomas=20Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 Chris Wilson <chris@chris-wilson.co.uk>, Matthew Auld <matthew.auld@intel.com>,
 Dave Airlie <airlied@redhat.com>, Daniel Vetter <daniel.vetter@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TWVkaWEgdXNlcnNwYWNlIHdhcyB0aGUgbGFzdCB1c2Vyc3BhY2UgdG8gc3RpbGwgdXNlIHRoZW0s
IGFuZCB0aGV5CmNvbnZlcnRlZCBub3cgdG9vOgoKaHR0cHM6Ly9naXRodWIuY29tL2ludGVsL21l
ZGlhLWRyaXZlci9jb21taXQvMTQ0MDIwYzM3NzcwMDgzOTc0YmVkZjU5OTAyYjcwYjhmNDQ0Yzc5
OQoKVGhpcyBtZWFucyBubyByZWFzb24gYW55bW9yZSB0byBtYWtlIHJlbG9jYXRpb25zIGZhc3Rl
ciB0aGFuIHRoZXkndmUKYmVlbiBmb3IgdGhlIGZpcnN0IDkgeWVhcnMgb2YgZ2VtLiBUaGlzIGNv
ZGUgd2FzIGFkZGVkIGluCgpjb21taXQgN2RkNGY2NzI5ZjkyNDNiZDcwNDZjNmYwNGMxMDdhNDU2
YmRhMzhlYgpBdXRob3I6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpE
YXRlOiAgIEZyaSBKdW4gMTYgMTU6MDU6MjQgMjAxNyArMDEwMAoKICAgIGRybS9pOTE1OiBBc3lu
YyBHUFUgcmVsb2NhdGlvbiBwcm9jZXNzaW5nCgpGdXJ0aGVybW9yZSB0aGVyZSdzIHByZXR0eSBz
dHJvbmcgaW5kaWNhdGlvbnMgaXQncyBidWdneSwgc2luY2UgdGhlCmNvZGUgdG8gdXNlIGl0IGJ5
IGRlZmF1bHQgYXMgdGhlIG9ubHkgb3B0aW9uIGhhZCB0byBiZSByZXZlcnRlZDoKCmNvbW1pdCBh
ZDVkOTVlNGQ1Mzg3MzdlZDNmYTI1NDkzNzc3ZGVjZjI2NGEzMDExCkF1dGhvcjogRGF2ZSBBaXJs
aWUgPGFpcmxpZWRAcmVkaGF0LmNvbT4KRGF0ZTogICBUdWUgU2VwIDggMTU6NDE6MTcgMjAyMCAr
MTAwMAoKICAgIFJldmVydCAiZHJtL2k5MTUvZ2VtOiBBc3luYyBHUFUgcmVsb2NhdGlvbnMgb25s
eSIKClRoaXMgY29kZSBqdXN0IGRpc2FibGVzIGdwdSByZWxvY2F0aW9ucywgbGVhdmluZyB0aGUg
Z2FyYmFnZQpjb2xsZWN0aW9uIGZvciBsYXRlciBwYXRjaGVzIGFuZCBtb3JlIGltcG9ydGFudGx5
LCBtdWNoIGxlc3MgY29uZnVzaW5nCmRpZmYuIEFsc28gZ2l2ZW4gaG93IG11Y2ggaGVhZGFjaGVz
IHRoaXMgY29kZSBoYXMgY2F1c2VkIGluIHRoZSBwYXN0LApsZXR0aW5nIHRoaXMgc29hayBmb3Ig
YSBiaXQgc2VlbXMganVzdGlmaWVkLgoKQ2M6IEpvbiBCbG9vbWZpZWxkIDxqb24uYmxvb21maWVs
ZEBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJA
aW50ZWwuY29tPgpDYzogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CkNj
OiBNYWFydGVuIExhbmtob3JzdCA8bWFhcnRlbi5sYW5raG9yc3RAbGludXguaW50ZWwuY29tPgpD
YzogSm9vbmFzIExhaHRpbmVuIDxqb29uYXMubGFodGluZW5AbGludXguaW50ZWwuY29tPgpDYzog
RGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBmZndsbC5jaD4KQ2M6ICJUaG9tYXMgSGVsbHN0
csO2bSIgPHRob21hcy5oZWxsc3Ryb21AbGludXguaW50ZWwuY29tPgpDYzogTWF0dGhldyBBdWxk
IDxtYXR0aGV3LmF1bGRAaW50ZWwuY29tPgpDYzogTGlvbmVsIExhbmR3ZXJsaW4gPGxpb25lbC5n
LmxhbmR3ZXJsaW5AaW50ZWwuY29tPgpDYzogRGF2ZSBBaXJsaWUgPGFpcmxpZWRAcmVkaGF0LmNv
bT4KQ2M6IEphc29uIEVrc3RyYW5kIDxqYXNvbkBqbGVrc3RyYW5kLm5ldD4KLS0tCiAuLi4vZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMgICAgfCA0MyArKysrKysrKy0tLS0t
LS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgMTggaW5zZXJ0aW9ucygrKSwgMjUgZGVsZXRpb25zKC0p
CgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZm
ZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMKaW5k
ZXggMjk3MTQzNTExZjk5Li4zMWU5MDRmNzlkMGEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYwpAQCAtMTU3MSw3ICsxNTcxLDcgQEAgc3RhdGlj
IGludCBfX3JlbG9jX2VudHJ5X2dwdShzdHJ1Y3QgaTkxNV9leGVjYnVmZmVyICplYiwKIAlyZXR1
cm4gdHJ1ZTsKIH0KIAotc3RhdGljIGludCByZWxvY19lbnRyeV9ncHUoc3RydWN0IGk5MTVfZXhl
Y2J1ZmZlciAqZWIsCitzdGF0aWMgaW50IF9fbWF5YmVfdW51c2VkIHJlbG9jX2VudHJ5X2dwdShz
dHJ1Y3QgaTkxNV9leGVjYnVmZmVyICplYiwKIAkJCSAgICBzdHJ1Y3QgaTkxNV92bWEgKnZtYSwK
IAkJCSAgICB1NjQgb2Zmc2V0LAogCQkJICAgIHU2NCB0YXJnZXRfYWRkcikKQEAgLTE1OTMsMzIg
KzE1OTMsMjUgQEAgcmVsb2NhdGVfZW50cnkoc3RydWN0IGk5MTVfdm1hICp2bWEsCiB7CiAJdTY0
IHRhcmdldF9hZGRyID0gcmVsb2NhdGlvbl90YXJnZXQocmVsb2MsIHRhcmdldCk7CiAJdTY0IG9m
ZnNldCA9IHJlbG9jLT5vZmZzZXQ7Ci0JaW50IHJlbG9jX2dwdSA9IHJlbG9jX2VudHJ5X2dwdShl
Yiwgdm1hLCBvZmZzZXQsIHRhcmdldF9hZGRyKTsKLQotCWlmIChyZWxvY19ncHUgPCAwKQotCQly
ZXR1cm4gcmVsb2NfZ3B1OwotCi0JaWYgKCFyZWxvY19ncHUpIHsKLQkJYm9vbCB3aWRlID0gZWIt
PnJlbG9jX2NhY2hlLnVzZV82NGJpdF9yZWxvYzsKLQkJdm9pZCAqdmFkZHI7CisJYm9vbCB3aWRl
ID0gZWItPnJlbG9jX2NhY2hlLnVzZV82NGJpdF9yZWxvYzsKKwl2b2lkICp2YWRkcjsKIAogcmVw
ZWF0OgotCQl2YWRkciA9IHJlbG9jX3ZhZGRyKHZtYS0+b2JqLCBlYiwKLQkJCQkgICAgb2Zmc2V0
ID4+IFBBR0VfU0hJRlQpOwotCQlpZiAoSVNfRVJSKHZhZGRyKSkKLQkJCXJldHVybiBQVFJfRVJS
KHZhZGRyKTsKLQotCQlHRU1fQlVHX09OKCFJU19BTElHTkVEKG9mZnNldCwgc2l6ZW9mKHUzMikp
KTsKLQkJY2xmbHVzaF93cml0ZTMyKHZhZGRyICsgb2Zmc2V0X2luX3BhZ2Uob2Zmc2V0KSwKLQkJ
CQlsb3dlcl8zMl9iaXRzKHRhcmdldF9hZGRyKSwKLQkJCQllYi0+cmVsb2NfY2FjaGUudmFkZHIp
OwotCi0JCWlmICh3aWRlKSB7Ci0JCQlvZmZzZXQgKz0gc2l6ZW9mKHUzMik7Ci0JCQl0YXJnZXRf
YWRkciA+Pj0gMzI7Ci0JCQl3aWRlID0gZmFsc2U7Ci0JCQlnb3RvIHJlcGVhdDsKLQkJfQorCXZh
ZGRyID0gcmVsb2NfdmFkZHIodm1hLT5vYmosIGViLAorCQkJICAgIG9mZnNldCA+PiBQQUdFX1NI
SUZUKTsKKwlpZiAoSVNfRVJSKHZhZGRyKSkKKwkJcmV0dXJuIFBUUl9FUlIodmFkZHIpOworCisJ
R0VNX0JVR19PTighSVNfQUxJR05FRChvZmZzZXQsIHNpemVvZih1MzIpKSk7CisJY2xmbHVzaF93
cml0ZTMyKHZhZGRyICsgb2Zmc2V0X2luX3BhZ2Uob2Zmc2V0KSwKKwkJCWxvd2VyXzMyX2JpdHMo
dGFyZ2V0X2FkZHIpLAorCQkJZWItPnJlbG9jX2NhY2hlLnZhZGRyKTsKKworCWlmICh3aWRlKSB7
CisJCW9mZnNldCArPSBzaXplb2YodTMyKTsKKwkJdGFyZ2V0X2FkZHIgPj49IDMyOworCQl3aWRl
ID0gZmFsc2U7CisJCWdvdG8gcmVwZWF0OwogCX0KIAogCXJldHVybiB0YXJnZXQtPm5vZGUuc3Rh
cnQgfCBVUERBVEU7Ci0tIAoyLjMxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2ludGVsLWdmeAo=

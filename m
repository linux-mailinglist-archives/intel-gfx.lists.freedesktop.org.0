Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4CFB7145F0D
	for <lists+intel-gfx@lfdr.de>; Thu, 23 Jan 2020 00:17:20 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 910F56F92E;
	Wed, 22 Jan 2020 23:17:18 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2F4D86F92E;
 Wed, 22 Jan 2020 23:17:17 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 Jan 2020 15:17:16 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,351,1574150400"; d="scan'208";a="375061720"
Received: from jhli-desk1.jf.intel.com ([10.54.74.160])
 by orsmga004.jf.intel.com with ESMTP; 22 Jan 2020 15:17:16 -0800
From: Juston Li <juston.li@intel.com>
To: igt-dev@lists.freedesktop.org, intel-gfx@lists.freedesktop.org,
 ville.syrjala@linux.intel.com, daniel@ffwll.ch
Date: Wed, 22 Jan 2020 15:16:55 -0800
Message-Id: <20200122231655.9702-2-juston.li@intel.com>
X-Mailer: git-send-email 2.21.1
In-Reply-To: <20200122231655.9702-1-juston.li@intel.com>
References: <20200122231655.9702-1-juston.li@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v5 i-g-t 2/2] tests/kms_getfb: Add getfb2 tests
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Stone <daniels@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogRGFuaWVsIFN0b25lIDxkYW5pZWxzQGNvbGxhYm9yYS5jb20+CgpNaXJyb3JpbmcgYWRk
ZmIyLCBhZGQgdGVzdHMgZm9yIHRoZSBuZXcgaW9jdGwgd2hpY2ggd2lsbCByZXR1cm4gdXMKaW5m
b3JtYXRpb24gYWJvdXQgZnJhbWVidWZmZXJzIGNvbnRhaW5pbmcgbXVsdGlwbGUgYnVmZmVycywg
YXMgd2VsbCBhcwptb2RpZmllcnMuCgpDaGFuZ2VzIHNpbmNlIHY0OgotIFJlbW92ZSB1bm5lY2Vz
c2FyeSBibyBjcmVhdGlvbiBmb3IgZ2V0ZmIyLWhhbmRsZS1jbG9zZWQgc3VidGVzdAoKQ2hhbmdl
cyBzaW5jZSB2MzoKLSBBZGQgc3VidGVzdHMgdG8gZW5zdXJlIGhhbmRsZXMgYXJlbid0IHJldHVy
bmVkIGZvciBub24tcm9vdCBhbmQKICBub24tbWFzdGVyIGNhbGxlcnMKCkNoYW5nZXMgc2luY2Ug
djE6Ci0gQWRkIHRlc3QgdGhhdCB1c2VzIGdldGZiMiBvdXRwdXQgdG8gY2FsbCBhZGRmYjIgYXMg
c3VnZ2VzdGVkIGJ5IFZpbGxlCgpTaWduZWQtb2ZmLWJ5OiBEYW5pZWwgU3RvbmUgPGRhbmllbHNA
Y29sbGFib3JhLmNvbT4KU2lnbmVkLW9mZi1ieTogSnVzdG9uIExpIDxqdXN0b24ubGlAaW50ZWwu
Y29tPgpSZXZpZXdlZC1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4Lmlu
dGVsLmNvbT4KLS0tCiB0ZXN0cy9rbXNfZ2V0ZmIuYyB8IDE1NiArKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrCiAxIGZpbGUgY2hhbmdlZCwgMTU2IGluc2VydGlv
bnMoKykKCmRpZmYgLS1naXQgYS90ZXN0cy9rbXNfZ2V0ZmIuYyBiL3Rlc3RzL2ttc19nZXRmYi5j
CmluZGV4IDI5MjY3OWFkM2ViOS4uZTA0NmE0M2ExNTU1IDEwMDY0NAotLS0gYS90ZXN0cy9rbXNf
Z2V0ZmIuYworKysgYi90ZXN0cy9rbXNfZ2V0ZmIuYwpAQCAtNDAsNiArNDAsOCBAQAogI2luY2x1
ZGUgImRybS5oIgogI2luY2x1ZGUgImRybV9mb3VyY2MuaCIKIAorI2luY2x1ZGUgImlndF9kZXZp
Y2UuaCIKKwogc3RhdGljIGJvb2wgaGFzX2dldGZiX2lmYWNlKGludCBmZCkKIHsKIAlzdHJ1Y3Qg
ZHJtX21vZGVfZmJfY21kIGFyZyA9IHsgfTsKQEAgLTI1Miw2ICsyNTQsMTU0IEBAIHN0YXRpYyB2
b2lkIHRlc3RfZHVwbGljYXRlX2hhbmRsZXMoaW50IGZkKQogCX0KIH0KIAorc3RhdGljIHZvaWQg
dGVzdF9nZXRmYjIoaW50IGZkKQoreworCXN0cnVjdCBkcm1fbW9kZV9mYl9jbWQyIGFkZF9iYXNp
YyA9IHt9OworCisJaWd0X2ZpeHR1cmUgeworCQlzdHJ1Y3QgZHJtX21vZGVfZmJfY21kMiBnZXQg
PSB7fTsKKworCQlhZGRfYmFzaWMud2lkdGggPSAxMDI0OworCQlhZGRfYmFzaWMuaGVpZ2h0ID0g
MTAyNDsKKwkJYWRkX2Jhc2ljLnBpeGVsX2Zvcm1hdCA9IERSTV9GT1JNQVRfWFJHQjg4ODg7CisJ
CWFkZF9iYXNpYy5waXRjaGVzWzBdID0gMTAyNCo0OworCQlhZGRfYmFzaWMuaGFuZGxlc1swXSA9
IGlndF9jcmVhdGVfYm9fd2l0aF9kaW1lbnNpb25zKGZkLCAxMDI0LCAxMDI0LAorCQkJRFJNX0ZP
Uk1BVF9YUkdCODg4OCwgMCwgMCwgTlVMTCwgTlVMTCwgTlVMTCk7CisJCWlndF9hc3NlcnQoYWRk
X2Jhc2ljLmhhbmRsZXNbMF0pOworCQlkb19pb2N0bChmZCwgRFJNX0lPQ1RMX01PREVfQURERkIy
LCAmYWRkX2Jhc2ljKTsKKworCQlnZXQuZmJfaWQgPSBhZGRfYmFzaWMuZmJfaWQ7CisJCWRvX2lv
Y3RsKGZkLCBEUk1fSU9DVExfTU9ERV9HRVRGQjIsICZnZXQpOworCQlpZ3RfYXNzZXJ0X25lcV91
MzIoZ2V0LmhhbmRsZXNbMF0sIDApOworCQlnZW1fY2xvc2UoZmQsIGdldC5oYW5kbGVzWzBdKTsK
Kwl9CisKKwlpZ3Rfc3VidGVzdCgiZ2V0ZmIyLWhhbmRsZS16ZXJvIikgeworCQlzdHJ1Y3QgZHJt
X21vZGVfZmJfY21kMiBnZXQgPSB7fTsKKwkJZG9faW9jdGxfZXJyKGZkLCBEUk1fSU9DVExfTU9E
RV9HRVRGQjIsICZnZXQsIEVOT0VOVCk7CisJfQorCisJaWd0X3N1YnRlc3QoImdldGZiMi1oYW5k
bGUtY2xvc2VkIikgeworCQlzdHJ1Y3QgZHJtX21vZGVfZmJfY21kMiBhZGQgPSBhZGRfYmFzaWM7
CisJCXN0cnVjdCBkcm1fbW9kZV9mYl9jbWQyIGdldCA9IHsgfTsKKworCQlkb19pb2N0bChmZCwg
RFJNX0lPQ1RMX01PREVfQURERkIyLCAmYWRkKTsKKwkJZG9faW9jdGwoZmQsIERSTV9JT0NUTF9N
T0RFX1JNRkIsICZhZGQuZmJfaWQpOworCisJCWdldC5mYl9pZCA9IGFkZC5mYl9pZDsKKwkJZG9f
aW9jdGxfZXJyKGZkLCBEUk1fSU9DVExfTU9ERV9HRVRGQjIsICZnZXQsIEVOT0VOVCk7CisJfQor
CisJaWd0X3N1YnRlc3QoImdldGZiMi1oYW5kbGUtbm90LWZiIikgeworCQlzdHJ1Y3QgZHJtX21v
ZGVfZmJfY21kMiBnZXQgPSB7IC5mYl9pZCA9IGdldF9hbnlfcHJvcF9pZChmZCkgfTsKKwkJaWd0
X3JlcXVpcmUoZ2V0LmZiX2lkID4gMCk7CisJCWRvX2lvY3RsX2VycihmZCwgRFJNX0lPQ1RMX01P
REVfR0VURkIyLCAmZ2V0LCBFTk9FTlQpOworCX0KKworCWlndF9zdWJ0ZXN0KCJnZXRmYjItYWNj
ZXB0LWNjcyIpIHsKKwkJc3RydWN0IGRybV9tb2RlX2ZiX2NtZDIgYWRkX2NjcyA9IHsgfTsKKwkJ
c3RydWN0IGRybV9tb2RlX2ZiX2NtZDIgZ2V0ID0geyB9OworCQlpbnQgaTsKKworCQlnZXRfY2Nz
X2ZiKGZkLCAmYWRkX2Njcyk7CisJCWlndF9yZXF1aXJlKGFkZF9jY3MuZmJfaWQgIT0gMCk7CisJ
CWdldC5mYl9pZCA9IGFkZF9jY3MuZmJfaWQ7CisJCWRvX2lvY3RsKGZkLCBEUk1fSU9DVExfTU9E
RV9HRVRGQjIsICZnZXQpOworCisJCWlndF9hc3NlcnRfZXFfdTMyKGdldC53aWR0aCwgYWRkX2Nj
cy53aWR0aCk7CisJCWlndF9hc3NlcnRfZXFfdTMyKGdldC5oZWlnaHQsIGFkZF9jY3MuaGVpZ2h0
KTsKKwkJaWd0X2Fzc2VydChnZXQuZmxhZ3MgJiBEUk1fTU9ERV9GQl9NT0RJRklFUlMpOworCisJ
CWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGdldC5oYW5kbGVzKTsgaSsrKSB7CisJCQlpZ3Rf
YXNzZXJ0X2VxX3UzMihnZXQucGl0Y2hlc1tpXSwgYWRkX2Njcy5waXRjaGVzW2ldKTsKKwkJCWln
dF9hc3NlcnRfZXFfdTMyKGdldC5vZmZzZXRzW2ldLCBhZGRfY2NzLm9mZnNldHNbaV0pOworCQkJ
aWYgKGFkZF9jY3MuaGFuZGxlc1tpXSAhPSAwKSB7CisJCQkJaWd0X2Fzc2VydF9uZXFfdTMyKGdl
dC5oYW5kbGVzW2ldLCAwKTsKKwkJCQlpZ3RfYXNzZXJ0X25lcV91MzIoZ2V0LmhhbmRsZXNbaV0s
CisJCQkJCQkgICBhZGRfY2NzLmhhbmRsZXNbaV0pOworCQkJCWlndF9hc3NlcnRfZXFfdTY0KGdl
dC5tb2RpZmllcltpXSwKKwkJCQkJCSAgYWRkX2Njcy5tb2RpZmllcltpXSk7CisJCQl9IGVsc2Ug
eworCQkJCWlndF9hc3NlcnRfZXFfdTMyKGdldC5oYW5kbGVzW2ldLCAwKTsKKwkJCQlpZ3RfYXNz
ZXJ0X2VxX3U2NChnZXQubW9kaWZpZXJbaV0sIDApOworCQkJfQorCQl9CisJCWlndF9hc3NlcnRf
ZXFfdTMyKGdldC5oYW5kbGVzWzBdLCBnZXQuaGFuZGxlc1sxXSk7CisKKwkJZG9faW9jdGwoZmQs
IERSTV9JT0NUTF9NT0RFX1JNRkIsICZnZXQuZmJfaWQpOworCQlnZW1fY2xvc2UoZmQsIGFkZF9j
Y3MuaGFuZGxlc1swXSk7CisJCWdlbV9jbG9zZShmZCwgZ2V0LmhhbmRsZXNbMF0pOworCX0KKwor
CWlndF9zdWJ0ZXN0KCJnZXRmYjItaW50by1hZGRmYjIiKSB7CisJCXN0cnVjdCBkcm1fbW9kZV9m
Yl9jbWQyIGNtZCA9IHsgfTsKKworCQljbWQuZmJfaWQgPSBhZGRfYmFzaWMuZmJfaWQ7CisJCWRv
X2lvY3RsKGZkLCBEUk1fSU9DVExfTU9ERV9HRVRGQjIsICZjbWQpOworCQlkb19pb2N0bChmZCwg
RFJNX0lPQ1RMX01PREVfQURERkIyLCAmY21kKTsKKworCQlkb19pb2N0bChmZCwgRFJNX0lPQ1RM
X01PREVfUk1GQiwgJmNtZC5mYl9pZCk7CisJCWdlbV9jbG9zZShmZCwgY21kLmhhbmRsZXNbMF0p
OworCX0KKworCWlndF9maXh0dXJlIHsKKwkJZG9faW9jdGwoZmQsIERSTV9JT0NUTF9NT0RFX1JN
RkIsICZhZGRfYmFzaWMuZmJfaWQpOworCQlnZW1fY2xvc2UoZmQsIGFkZF9iYXNpYy5oYW5kbGVz
WzBdKTsKKwl9Cit9CisKK3N0YXRpYyB2b2lkIHRlc3RfaGFuZGxlX3Byb3RlY3Rpb24odm9pZCkg
eworCWludCBub25fbWFzdGVyX2ZkOworCXN0cnVjdCBkcm1fbW9kZV9mYl9jbWQyIG5vbl9tYXN0
ZXJfYWRkID0ge307CisKKwlpZ3RfZml4dHVyZSB7CisJCW5vbl9tYXN0ZXJfZmQgPSBkcm1fb3Bl
bl9kcml2ZXIoRFJJVkVSX0FOWSk7CisKKwkJbm9uX21hc3Rlcl9hZGQud2lkdGggPSAxMDI0Owor
CQlub25fbWFzdGVyX2FkZC5oZWlnaHQgPSAxMDI0OworCQlub25fbWFzdGVyX2FkZC5waXhlbF9m
b3JtYXQgPSBEUk1fRk9STUFUX1hSR0I4ODg4OworCQlub25fbWFzdGVyX2FkZC5waXRjaGVzWzBd
ID0gMTAyNCo0OworCQlub25fbWFzdGVyX2FkZC5oYW5kbGVzWzBdID0gaWd0X2NyZWF0ZV9ib193
aXRoX2RpbWVuc2lvbnMobm9uX21hc3Rlcl9mZCwgMTAyNCwgMTAyNCwKKwkJCURSTV9GT1JNQVRf
WFJHQjg4ODgsIDAsIDAsIE5VTEwsIE5VTEwsIE5VTEwpOworCQlpZ3RfcmVxdWlyZShub25fbWFz
dGVyX2FkZC5oYW5kbGVzWzBdICE9IDApOworCQlkb19pb2N0bChub25fbWFzdGVyX2ZkLCBEUk1f
SU9DVExfTU9ERV9BRERGQjIsICZub25fbWFzdGVyX2FkZCk7CisJfQorCisJaWd0X3N1YnRlc3Qo
ImdldGZiLWhhbmRsZS1wcm90ZWN0aW9uIikgeworCQlzdHJ1Y3QgZHJtX21vZGVfZmJfY21kIGdl
dCA9IHsgLmZiX2lkID0gbm9uX21hc3Rlcl9hZGQuZmJfaWR9OworCisJCWlndF9mb3JrKGNoaWxk
LCAxKSB7CisJCQlpZ3RfZHJvcF9yb290KCk7CisKKwkJCWRvX2lvY3RsKG5vbl9tYXN0ZXJfZmQs
IERSTV9JT0NUTF9NT0RFX0dFVEZCLCAmZ2V0KTsKKwkJCS8qIGlvY3RsIHN1Y2NlZWRzIGJ1dCBo
YW5kbGUgc2hvdWxkIGJlIDAgKi8KKwkJCWlndF9hc3NlcnRfZXFfdTMyKGdldC5oYW5kbGUsIDAp
OworCQl9CisJCWlndF93YWl0Y2hpbGRyZW4oKTsKKwl9CisKKwlpZ3Rfc3VidGVzdCgiZ2V0ZmIy
LWhhbmRsZS1wcm90ZWN0aW9uIikgeworCQlzdHJ1Y3QgZHJtX21vZGVfZmJfY21kMiBnZXQgPSB7
IC5mYl9pZCA9IG5vbl9tYXN0ZXJfYWRkLmZiX2lkfTsKKwkJaW50IGk7CisKKwkJaWd0X2Zvcmso
Y2hpbGQsIDEpIHsKKwkJCWlndF9kcm9wX3Jvb3QoKTsKKworCQkJZG9faW9jdGwobm9uX21hc3Rl
cl9mZCwgRFJNX0lPQ1RMX01PREVfR0VURkIyLCAmZ2V0KTsKKwkJCS8qIGlvY3RsIHN1Y2NlZWRz
IGJ1dCBoYW5kbGVzIHNob3VsZCBiZSAwICovCisJCQlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0la
RShnZXQuaGFuZGxlcyk7IGkrKykgeworCQkJCWlndF9hc3NlcnRfZXFfdTMyKGdldC5oYW5kbGVz
W2ldLCAwKTsKKwkJCX0KKwkJfQorCQlpZ3Rfd2FpdGNoaWxkcmVuKCk7CisJfQorCisJaWd0X2Zp
eHR1cmUgeworCQlkb19pb2N0bChub25fbWFzdGVyX2ZkLCBEUk1fSU9DVExfTU9ERV9STUZCLCAm
bm9uX21hc3Rlcl9hZGQuZmJfaWQpOworCQlnZW1fY2xvc2Uobm9uX21hc3Rlcl9mZCwgbm9uX21h
c3Rlcl9hZGQuaGFuZGxlc1swXSk7CisJfQorfQorCiBpZ3RfbWFpbgogewogCWludCBmZDsKQEAg
LTI2Nyw2ICs0MTcsMTIgQEAgaWd0X21haW4KIAlpZ3Rfc3VidGVzdF9ncm91cAogCQl0ZXN0X2R1
cGxpY2F0ZV9oYW5kbGVzKGZkKTsKIAorCWlndF9zdWJ0ZXN0X2dyb3VwCisJCXRlc3RfZ2V0ZmIy
KGZkKTsKKworCWlndF9zdWJ0ZXN0X2dyb3VwCisJCXRlc3RfaGFuZGxlX3Byb3RlY3Rpb24oKTsK
KwogCWlndF9maXh0dXJlCiAJCWNsb3NlKGZkKTsKIH0KLS0gCjIuMjEuMQoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlz
dApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4D80638969
	for <lists+intel-gfx@lfdr.de>; Fri,  7 Jun 2019 13:52:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5CAF389DA2;
	Fri,  7 Jun 2019 11:52:34 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 12D4689D8E;
 Fri,  7 Jun 2019 11:52:33 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 07 Jun 2019 04:52:32 -0700
Received: from jkrzyszt-desk.igk.intel.com ([172.22.244.18])
 by orsmga007-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 07 Jun 2019 04:52:28 -0700
From: Janusz Krzysztofik <janusz.krzysztofik@linux.intel.com>
To: igt-dev@lists.freedesktop.org
Date: Fri,  7 Jun 2019 13:51:42 +0200
Message-Id: <20190607115142.32668-2-janusz.krzysztofik@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190607115142.32668-1-janusz.krzysztofik@linux.intel.com>
References: <20190607115142.32668-1-janusz.krzysztofik@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t v11 1/1] tests: Add a new test for device
 hot unplug
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: janusz.krzysztofik@intel.com, intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogSmFudXN6IEtyenlzenRvZmlrIDxqYW51c3oua3J6eXN6dG9maWtAaW50ZWwuY29tPgoK
VGhlcmUgaXMgYSB0ZXN0IHdoaWNoIHZlcmlmaWVzIHVubG9hZGluZyBvZiBpOTE1IGRyaXZlciBt
b2R1bGUgYnV0IG5vIHRlc3QKZXhpc3RzIHRoYXQgY2hlY2tzIGhvdyBhIGRyaXZlciBiZWhhdmVz
IHdoZW4gaXQgZ2V0cyB1bmJvdW5kIGZyb20gYSBkZXZpY2UKb3Igd2hlbiB0aGUgZGV2aWNlIGdl
dHMgdW5wbHVnZ2VkLiAgUHJvdmlkZSBzdWNoIHRlc3QgdXNpbmcgc3lzZnMKaW50ZXJmYWNlLgoK
VHdvIG1pbmltYWxpc3RpYyBzdWJ0ZXN0cyAtICJ1bmJpbmQtcmViaW5kIiBhbmQgInVucGx1Zy1y
ZXNjYW4iIC0gcGVyZm9ybQpkZXNpcmVkIG9wZXJhdGlvbnMgb24gYSBEUk0gZGV2aWNlIHdoaWNo
IGlzIGJlbGVpdmVkIHRvIGJlIG5vdCBpbiB1c2UuCgpBIHN1YnRlc3QgbmFtZWQgImRybV9vcGVu
LWhvdHVucGx1ZyIgdW5wbHVncyBhIERSTSBkZXZpY2Ugd2hpbGUga2VlcGluZwphIGZpbGUgZGVz
Y3JpcHRvciBvcGVuLgoKQ2hhbmdlbG9nOgp2MjoKLSBydW4gYSBzdWJwcm9jZXNzIHdpdGggZHVt
bXlfbG9hZCBpbnN0ZWFkIG9mIGV4dGVybmFsIGNvbW1hbmQKICAoQW50b25pbykuCgp2MzoKLSBy
dW4gZHVtbXlfbG9hZCBmcm9tIHRoZSB0ZXN0IHByb2Nlc3MgZGlyZWN0bHkgKEFudG9uaW8pLgoK
djQ6Ci0gcnVuIGR1bW15X2xvYWQgZnJvbSBpbnNpZGUgc3VidGVzdHMgKEFudG9uaW8pLgoKdjU6
Ci0gdHJ5IHRvIHJlc3RvcmUgdGhlIGRldmljZSB0byBhIHdvcmtpbmcgc3RhdGUgYWZ0ZXIgZWFj
aCBzdWJ0ZXN0CiAgKFBldHJpLCBEYW5pZWwpLgoKdjY6Ci0gcnVuIHdvcmtsb2FkIGluc2lkZSBh
biBpZ3QgaGVscGVyIHN1YnByb2Nlc3Mgc28gcmVzb3VyY2VzIGNvbnN1bWVkCiAgYnkgdGhlIHdv
cmtsb2FkIGFyZSBjbGVhbmVkIHVwIGF1dG9tYXRpY2FsbHkgb24gd29ya2xvYWQgc3VicHJvY2Vz
cwogIGNyYXNoLCB3aXRob3V0IGFmZmVjdGluZyB0ZXN0IHJlc3VsdHMsCi0gbW92ZSB0aGUgaWd0
IGhlbHBlciB3aXRoIHdvcmtsb2FkIGJhY2sgZnJvbSBzdWJ0ZXN0cyB0byBpbml0aWFsCiAgZml4
dHVyZSBzbyB3b3JrbG9hZCBjcmFzaCBhbHNvIGRvZXMgbm90IGFmZmVjdCB0ZXN0IHJlc3VsdHMs
Ci0gb3RoZXIgY2xlYW51cHMgc3VnZ2VzdGVkIGJ5IEthdGFyenluYSBhbmQgQ2hyaXMuCgp2NzoK
LSBubyBjaGFuZ2VzLgoKdjg6Ci0gbW92ZSB3b3JrbG9hZCBmdW5jdGlvbnMgYmFjayBmcm9tIGZp
eHR1cmUgdG8gc3VidGVzdHMsCi0gcmVnaXN0ZXIgZGlmZmVyZW50IGFjdGlvbnMgYW5kIGRpZmZl
cmVudCB3b3JrbG9hZHMgaW4gcmVzcGVjdGl2ZQogIHRhYmxlcyBhbmQgaXRlcmF0ZSBvdmVyIHRo
b3NlIHRhYmxlcyB3aGlsZSBlbnVtZXJhdGluZyBzdWJ0ZXN0cywKLSBpbnRyb2R1Y2UgbmV3IHN1
YnRlc3QgZmxhdm9ycyBieSBzaW1wbHkgb21pdGluZyBtb2R1bGUgdW5sb2FkIHN0ZXAsCi0gaW5z
dGVhZCBvZiBzaW1wbHkgcmVxdWVzdGluZyBidXMgcmVzY2FuIG9yIG5vdCwgaW50cm9kdWNlIGFj
dGlvbgogIHNwZWNpZmljIGRldmljZSByZWNvdmVyeSBoZWxwZXJzLCByZXF1aXJlZCBzcGVjaWZp
Y2FsbHkgd2l0aCB0aG9zZQogIG5ldyBzdWJ0ZXN0cyBub3QgdG91Y2hpbmcgdGhlIG1vZHVsZSwK
LSBzcGxpdCB3b3JrbG9hZCBmdW5jdGlvbnMgaW4gdHdvIHBhcnRzLCBvbmUgc3Bhd25pbmcgdGhl
IHdvcmtsb2FkLAogIHRoZSBvdGhlciB3YWl0aW5nIGZvciBpdHMgY29tcGxldGlvbiwKLSBmb3Ig
dGhlIG5ldyBzdWJ0ZXN0cyBub3QgcmVxdWlyaW5nIG1vZHVsZSB1bmxvYWQsIHJ1biB3b3JrbG9h
ZAogIGZ1bmN0aW9ucyBkaXJlY3RseSBmcm9tIHRoZSB0ZXN0IHByb2Nlc3MgYW5kIHVzZSBuZXcg
d29ya2xvYWQKICBjb21wbGV0aW9uIHdhaXQgZnVuY3Rpb25zIGluIHBsYWNlIG9mIHN1YnByb2Nl
c3MgY29tcGxldGlvbiB3YWl0LAotIHRha2UgbW9yZSBjb250cm9sIG92ZXIgbG9nZ2luZywgbG9u
Z2p1bXBzIGFuZCBleGl0IGNvZGVzIGluCiAgd29ya2xvYWQgc3VicHJvY2Vzc2VzLAotIGFkZCBz
b21lIGRlYnVnIG1lc3NhZ2VzIGZvciBlYXN5IHByb2dyZXNzIHdhdGNoaW5nLAotIG1vdmUgZnVu
Y3Rpb24gQVBJIGRlc2NyaXB0aW9ucyBvbiB0b3Agb2YgcmVzcGVjdGl2ZSB0eXBlZGVmcy4KCnY5
OgpBbGwgY2hhbmdlcyBhZnRlciBEYW5pZWwncyBjb21tZW50cyAtIHRoYW5rcyEKLSBmbGF0dGVu
IHRoZSBjb2RlLCBkb24ndCB0cnkgdG8gY3JlYXRlIGEgbWlkbGF5ZXIgKERhbmllbCksCi0gcHJv
dmlkZSBtaW1pbWFsIHN1YnRlc3RzIHRoYXQgZXZlbiBkb24ndCBrZWVwIGRldmljZSBvcGVuIChE
YW5pZWwpLAotIGRvbid0IHVzZSBkcml2ZXIgdW5iaW5kIGluIG1vcmUgYWR2YW5jZWQgc3VidGVz
dHMgKERhbmllbCksCi0gcHJvdmlkZSBzdWJ0ZXN0cyB3aXRoIGRpZmZlcmVudCBsZXZlbCBvZiBy
ZXNvdXJjZXMgYWxsb2NhdGVkCiAgZHVyaW5nIGRldmljZSB1bnBsdWcgKERhbmllbCksCi0gcHJv
dmlkZSBzdWJ0ZXN0cyB3aGljaCBjaGVjayBkcml2ZXIgYmVoYXZpb3IgYWZ0ZXIgZGV2aWNlIGhv
dAogIHVucGx1ZyAoRGFuaWVsKS4KCnYxMDoKLSByZW5hbWUgdmFyaWFibGVzIGFuZCBmdW5jdGlv
biBhcmd1bWVudHMgdG8gc29tZXRoaW5nIHRoYXQgaW5kaWNhdGVzCiAgdGhleSdyZSBmaWxlIGRl
c2NyaXB0b3JzIChEYW5pZWwpLAotIGludHJvZHVjZSBhIGRhdGEgc3RydWN0dXJlIHRoYXQgY29u
dGFpbnMgdmFyaW91cyBmaWxlIGRlc2NyaXB0b3JzCiAgYW5kIGEgaGVscGVyIGZ1bmN0aW9uIHRv
IHNldCB0aGVtIGFsbCAoRGFuaWVsKSwKLSBmaXggc3RyYW5nZSBpbmRlbnRpbmcgKERhbmllbCks
Ci0gbGltaXQgc2NvcGUgdG8gZmlyc3QgdGhyZWUgc3VidGVzdHMgYXMgdGhlIGZpcnN0IHNldCBv
ZiB0ZXN0cyB0bwogIG1lcmdlIChEYW5pZWwpLgoKdjExOgotIGZpeCB0eXBvcyBpbiBzb21lIGNv
bW1lbnRzLAotIHVzZSBTUERYIGxpY2Vuc2UgaWRlbnRpZmllciwKLSBpbmNsdWRlIGEgcGVyLXBh
dGNoIGNoYW5nZWxvZyBpbiB0aGUgY29tbWl0IG1lc3NhZ2UgKERhbmllbCkuCgpDYzogQW50b25p
byBBcmdlbnppYW5vIDxhbnRvbmlvLmFyZ2Vuemlhbm9AaW50ZWwuY29tPgpDYzogUGV0cmkgTGF0
dmFsYSA8cGV0cmkubGF0dmFsYUBpbnRlbC5jb20+CkNjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWxA
ZmZ3bGwuY2g+CkNjOiBLYXRhcnp5bmEgRGVjIDxrYXRhcnp5bmEuZGVjQGludGVsLmNvbT4KQ2M6
IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogTWljaGHFgiBXYWpk
ZWN6a28gPG1pY2hhbC53YWpkZWN6a29AaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBKYW51c3og
S3J6eXN6dG9maWsgPGphbnVzei5rcnp5c3p0b2Zpa0BpbnRlbC5jb20+Ci0tLQogdGVzdHMvTWFr
ZWZpbGUuc291cmNlcyB8ICAgMSArCiB0ZXN0cy9jb3JlX2hvdHVucGx1Zy5jIHwgMjIyICsrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiB0ZXN0cy9tZXNvbi5idWlsZCAg
ICAgIHwgICAxICsKIDMgZmlsZXMgY2hhbmdlZCwgMjI0IGluc2VydGlvbnMoKykKIGNyZWF0ZSBt
b2RlIDEwMDY0NCB0ZXN0cy9jb3JlX2hvdHVucGx1Zy5jCgpkaWZmIC0tZ2l0IGEvdGVzdHMvTWFr
ZWZpbGUuc291cmNlcyBiL3Rlc3RzL01ha2VmaWxlLnNvdXJjZXMKaW5kZXggMDI3ZWQ4MmYuLjNm
MjQyNjVmIDEwMDY0NAotLS0gYS90ZXN0cy9NYWtlZmlsZS5zb3VyY2VzCisrKyBiL3Rlc3RzL01h
a2VmaWxlLnNvdXJjZXMKQEAgLTE3LDYgKzE3LDcgQEAgVEVTVFNfcHJvZ3MgPSBcCiAJY29yZV9n
ZXRjbGllbnQgXAogCWNvcmVfZ2V0c3RhdHMgXAogCWNvcmVfZ2V0dmVyc2lvbiBcCisJY29yZV9o
b3R1bnBsdWcgXAogCWNvcmVfc2V0bWFzdGVyX3ZzX2F1dGggXAogCWRlYnVnZnNfdGVzdCBcCiAJ
ZHJtX2ltcG9ydF9leHBvcnQgXApkaWZmIC0tZ2l0IGEvdGVzdHMvY29yZV9ob3R1bnBsdWcuYyBi
L3Rlc3RzL2NvcmVfaG90dW5wbHVnLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MDAuLmQzNmEwNTcyCi0tLSAvZGV2L251bGwKKysrIGIvdGVzdHMvY29yZV9ob3R1bnBsdWcuYwpA
QCAtMCwwICsxLDIyMiBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKKy8q
CisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpbmNsdWRl
ICJpZ3QuaCIKKyNpbmNsdWRlICJpZ3RfZGV2aWNlLmgiCisjaW5jbHVkZSAiaWd0X2R1bW15bG9h
ZC5oIgorI2luY2x1ZGUgImlndF9rbW9kLmgiCisjaW5jbHVkZSAiaWd0X3N5c2ZzLmgiCisKKyNp
bmNsdWRlIDxsaW1pdHMuaD4KKyNpbmNsdWRlIDxzdHJpbmcuaD4KKyNpbmNsdWRlIDx1bmlzdGQu
aD4KKworc3RydWN0IGhvdHVucGx1ZyB7CisJaW50IGNoaXBzZXQ7CisJc3RydWN0IHsKKwkJaW50
IGRybTsKKwkJaW50IHN5c2ZzX2RldjsKKwkJaW50IHN5c2ZzX2J1czsKKwl9IGZkOworfTsKKwor
LyogSGVscGVycyAqLworCitzdGF0aWMgdm9pZCBwcmVwYXJlKHN0cnVjdCBob3R1bnBsdWcgKnBy
aXYpCit7CisJLyogb3BlbiB0aGUgZHJpdmVyICovCisJcHJpdi0+ZmQuZHJtID0gX19kcm1fb3Bl
bl9kcml2ZXIocHJpdi0+Y2hpcHNldCk7CisJaWd0X2Fzc2VydChwcml2LT5mZC5kcm0gPj0gMCk7
CisKKwkvKiBwcmVwYXJlIGZvciBkZXZpY2UgdW5wbHVnICovCisJcHJpdi0+ZmQuc3lzZnNfZGV2
ID0gaWd0X3N5c2ZzX29wZW4ocHJpdi0+ZmQuZHJtKTsKKwlpZ3RfYXNzZXJ0KHByaXYtPmZkLnN5
c2ZzX2RldiA+PSAwKTsKKworCS8qIHByZXBhcmUgZm9yIGJ1cyByZXNjYW4gKi8KKwlwcml2LT5m
ZC5zeXNmc19idXMgPSBvcGVuYXQocHJpdi0+ZmQuc3lzZnNfZGV2LCAiZGV2aWNlL3N1YnN5c3Rl
bSIsCisJCQkJICAgIE9fRElSRUNUT1JZKTsKKwlpZ3RfYXNzZXJ0KHByaXYtPmZkLnN5c2ZzX2J1
cyA+PSAwKTsKK30KKworLyogUmUtYmluZCB0aGUgZHJpdmVyIHRvIHRoZSBkZXZpY2UgKi8KK3N0
YXRpYyB2b2lkIGRyaXZlcl9iaW5kKGludCBmZF9zeXNmc19kcnYsIGNvbnN0IGNoYXIgKmRldl9i
dXNfYWRkcikKK3sKKwlpZ3Rfc2V0X3RpbWVvdXQoNjAsICJEcml2ZXIgcmUtYmluZCB0aW1lb3V0
ISIpOworCWlndF9zeXNmc19zZXQoZmRfc3lzZnNfZHJ2LCAiYmluZCIsIGRldl9idXNfYWRkcik7
CisJaWd0X3Jlc2V0X3RpbWVvdXQoKTsKKworCWNsb3NlKGZkX3N5c2ZzX2Rydik7Cit9CisKKy8q
IFVuYmluZCB0aGUgZHJpdmVyIGZyb20gdGhlIGRldmljZSAqLworc3RhdGljIHZvaWQgZHJpdmVy
X3VuYmluZChpbnQgZmRfc3lzZnNfZHJ2LCBjb25zdCBjaGFyICpkZXZfYnVzX2FkZHIpCit7CisJ
aWd0X3NldF90aW1lb3V0KDYwLCAiRHJpdmVyIHVuYmluZCB0aW1lb3V0ISIpOworCWlndF9zeXNm
c19zZXQoZmRfc3lzZnNfZHJ2LCAidW5iaW5kIiwgZGV2X2J1c19hZGRyKTsKKwlpZ3RfcmVzZXRf
dGltZW91dCgpOworCisJLyogZG9uJ3QgY2xvc2UgZmRfc3lzZnNfZHJ2LCBpdCB3aWxsIGJlIHVz
ZWQgZm9yIGRyaXZlciByZWJpbmRpbmcgKi8KK30KKworLyogUmUtZGlzY292ZXIgdGhlIGRldmlj
ZSBieSByZXNjYW5uaW5nIGl0cyBidXMgKi8KK3N0YXRpYyB2b2lkIGJ1c19yZXNjYW4oaW50IGZk
X3N5c2ZzX2J1cykKK3sKKwlpZ3Rfc2V0X3RpbWVvdXQoNjAsICJCdXMgcmVzY2FuIHRpbWVvdXQh
Iik7CisJaWd0X3N5c2ZzX3NldChmZF9zeXNmc19idXMsICJyZXNjYW4iLCAiMSIpOworCWlndF9y
ZXNldF90aW1lb3V0KCk7CisKKwljbG9zZShmZF9zeXNmc19idXMpOworfQorCisvKiBSZW1vdmUg
KHZpcnR1YWxseSB1bnBsdWcpIHRoZSBkZXZpY2UgZnJvbSBpdHMgYnVzICovCitzdGF0aWMgdm9p
ZCBkZXZpY2VfdW5wbHVnKGludCBmZF9zeXNmc19kZXYpCit7CisJaWd0X3NldF90aW1lb3V0KDYw
LCAiRGV2aWNlIHVucGx1ZyB0aW1lb3V0ISIpOworCWlndF9zeXNmc19zZXQoZmRfc3lzZnNfZGV2
LCAiZGV2aWNlL3JlbW92ZSIsICIxIik7CisJaWd0X3Jlc2V0X3RpbWVvdXQoKTsKKworCWNsb3Nl
KGZkX3N5c2ZzX2Rldik7Cit9CisKKy8qIFN1YnRlc3RzICovCisKK3N0YXRpYyB2b2lkIHVuYmlu
ZF9yZWJpbmQoaW50IGNoaXBzZXQpCit7CisJc3RydWN0IGhvdHVucGx1ZyBwcml2OworCWludCBm
ZF9zeXNmc19kcnYsIGxlbjsKKwljaGFyIHBhdGhbUEFUSF9NQVhdOworCWNvbnN0IGNoYXIgKmRl
dl9idXNfYWRkcjsKKworCXByaXYuY2hpcHNldCA9IGNoaXBzZXQ7CisJcHJlcGFyZSgmcHJpdik7
CisKKwkvKiBzeXNmc19idXMgbm90IG5lZWRlZCBmb3IgdW5iaW5kL3JlYmluZCAqLworCWNsb3Nl
KHByaXYuZmQuc3lzZnNfYnVzKTsKKworCS8qIHByZXBhcmUgZm9yIGRyaXZlciBiaW5kL3VuYmlu
ZCAqLworCWZkX3N5c2ZzX2RydiA9IG9wZW5hdChwcml2LmZkLnN5c2ZzX2RldiwgImRldmljZS9k
cml2ZXIiLCBPX0RJUkVDVE9SWSk7CisJaWd0X2Fzc2VydChmZF9zeXNmc19kcnYgPj0gMCk7CisK
KwlsZW4gPSByZWFkbGlua2F0KHByaXYuZmQuc3lzZnNfZGV2LCAiZGV2aWNlIiwgcGF0aCwgc2l6
ZW9mKHBhdGgpIC0gMSk7CisJcGF0aFtsZW5dID0gJ1wwJzsKKwlkZXZfYnVzX2FkZHIgPSBzdHJy
Y2hyKHBhdGgsICcvJykgKyAxOworCisJLyogc3lzZnNfZGV2IG5vIGxvbmdlciBuZWVkZWQgZm9y
IHVuYmluZC9yZWJpbmQgKi8KKwljbG9zZShwcml2LmZkLnN5c2ZzX2Rldik7CisKKwlpZ3RfZGVi
dWcoImNsb3NpbmcgZGV2aWNlXG4iKTsKKwljbG9zZShwcml2LmZkLmRybSk7CisKKwlpZ3RfZGVi
dWcoInVuYmluZGluZyBkcml2ZXJcbiIpOworCWRyaXZlcl91bmJpbmQoZmRfc3lzZnNfZHJ2LCBk
ZXZfYnVzX2FkZHIpOworCisJaWd0X2RlYnVnKCJyZWJpbmRpbmcgZHJpdmVyXG4iKTsKKwlkcml2
ZXJfYmluZChmZF9zeXNmc19kcnYsIGRldl9idXNfYWRkcik7CisKKwlpZ3RfZGVidWcoInJlb3Bl
bmluZyBkZXZpY2VcbiIpOworCXByaXYuZmQuZHJtID0gX19kcm1fb3Blbl9kcml2ZXIoY2hpcHNl
dCk7CisJaWd0X2Fzc2VydChwcml2LmZkLmRybSA+PSAwKTsKKworCWNsb3NlKHByaXYuZmQuZHJt
KTsKK30KKworc3RhdGljIHZvaWQgdW5wbHVnX3Jlc2NhbihpbnQgY2hpcHNldCkKK3sKKwlzdHJ1
Y3QgaG90dW5wbHVnIHByaXY7CisKKwlwcml2LmNoaXBzZXQgPSBjaGlwc2V0OworCXByZXBhcmUo
JnByaXYpOworCisJaWd0X2RlYnVnKCJjbG9zaW5nIGRldmljZVxuIik7CisJY2xvc2UocHJpdi5m
ZC5kcm0pOworCisJaWd0X2RlYnVnKCJ1bnBsdWdnaW5nIGRldmljZVxuIik7CisJZGV2aWNlX3Vu
cGx1Zyhwcml2LmZkLnN5c2ZzX2Rldik7CisKKwlpZ3RfZGVidWcoInJlY292ZXJpbmcgZGV2aWNl
XG4iKTsKKwlidXNfcmVzY2FuKHByaXYuZmQuc3lzZnNfYnVzKTsKKworCWlndF9kZWJ1ZygicmVv
cGVuaW5nIGRyaXZlclxuIik7CisJcHJpdi5mZC5kcm0gPSBfX2RybV9vcGVuX2RyaXZlcihjaGlw
c2V0KTsKKwlpZ3RfYXNzZXJ0KHByaXYuZmQuZHJtID49IDApOworCisJY2xvc2UocHJpdi5mZC5k
cm0pOworfQorCitzdGF0aWMgdm9pZCBkcm1fb3Blbl9ob3R1bnBsdWcoaW50IGNoaXBzZXQpCit7
CisJc3RydWN0IGhvdHVucGx1ZyBwcml2OworCisJcHJpdi5jaGlwc2V0ID0gY2hpcHNldDsKKwlw
cmVwYXJlKCZwcml2KTsKKworCWlndF9kZWJ1ZygidW5wbHVnZ2luZyBkZXZpY2VcbiIpOworCWRl
dmljZV91bnBsdWcocHJpdi5mZC5zeXNmc19kZXYpOworCisJaWd0X2RlYnVnKCJyZWNvdmVyaW5n
IGRldmljZVxuIik7CisJYnVzX3Jlc2Nhbihwcml2LmZkLnN5c2ZzX2J1cyk7CisKKwlpZ3RfZGVi
dWcoImNsb3NpbmcgZGV2aWNlXG4iKTsKKwljbG9zZShwcml2LmZkLmRybSk7CisKKwlpZ3RfZGVi
dWcoInJlb3BlbmluZyBkcml2ZXJcbiIpOworCXByaXYuZmQuZHJtID0gX19kcm1fb3Blbl9kcml2
ZXIoY2hpcHNldCk7CisJaWd0X2Fzc2VydChwcml2LmZkLmRybSA+PSAwKTsKKworCWNsb3NlKHBy
aXYuZmQuZHJtKTsKK30KKworLyogTWFpbiAqLworCitpZ3RfbWFpbiB7CisJaW50IGNoaXBzZXQ7
CisJY2hhciAqbW9kdWxlOworCisJaWd0X2ZpeHR1cmUgeworCQljaGFyIHBhdGhbUEFUSF9NQVhd
OworCQlpbnQgZmRfZHJtLCBmZF9zeXNmc19kZXYsIGxlbjsKKworCQkvKioKKwkJICogU2luY2Ug
c29tZSBzdWJ0ZXN0cyBkZXBlbmQgb24gc3VjY2Vzc2Z1bCB1bmxvYWQgb2YgYSBkcml2ZXIKKwkJ
ICogbW9kdWxlLCBkb24ndCB1c2UgZHJtX29wZW5fZHJpdmVyKCkgYXMgaXQga2VlcHMgYSBkZXZp
Y2UgZmlsZQorCQkgKiBkZXNjcmlwdG9yIG9wZW4gZm9yIGV4aXQgaGFuZGxlciB1c2UgYW5kIHRo
YXQgZWZmZWN0aXZlbHkKKwkJICogcHJldmVudHMgdGhlIG1vZHVsZSBmcm9tIGJlaW5nIHVubG9h
ZGVkLgorCQkgKi8KKwkJZmRfZHJtID0gX19kcm1fb3Blbl9kcml2ZXIoRFJJVkVSX0FOWSk7CisJ
CWlndF9hc3NlcnQoZmRfZHJtID49IDApOworCisJCWlmIChpc19pOTE1X2RldmljZShmZF9kcm0p
KSB7CisJCQljaGlwc2V0ID0gRFJJVkVSX0lOVEVMOworCQkJbW9kdWxlID0gc3RyZHVwKCJpOTE1
Iik7CisJCX0gZWxzZSB7CisJCQljaGlwc2V0ID0gRFJJVkVSX0FOWTsKKworCQkJLyogQ2FwdHVy
ZSBtb2R1bGUgbmFtZSB0byBiZSB1bmxvYWRlZCAqLworCQkJZmRfc3lzZnNfZGV2ID0gaWd0X3N5
c2ZzX29wZW4oZmRfZHJtKTsKKwkJCWxlbiA9IHJlYWRsaW5rYXQoZmRfc3lzZnNfZGV2LCAiZGV2
aWNlL2RyaXZlci9tb2R1bGUiLAorCQkJCQkgcGF0aCwgc2l6ZW9mKHBhdGgpIC0gMSk7CisJCQlj
bG9zZShmZF9zeXNmc19kZXYpOworCQkJcGF0aFtsZW5dID0gJ1wwJzsKKwkJCW1vZHVsZSA9IHN0
cmR1cChzdHJyY2hyKHBhdGgsICcvJykgKyAxKTsKKwkJfQorCQljbG9zZShmZF9kcm0pOworCisJ
CWlndF9pbmZvKCJSdW5uaW5nIHRoZSB0ZXN0IG9uIGRyaXZlciBcIiVzXCIsIGNoaXBzZXQgbWFz
ayAlIzB4XG4iLAorCQkJIG1vZHVsZSwgY2hpcHNldCk7CisJfQorCisJaWd0X3N1YnRlc3QoInVu
YmluZC1yZWJpbmQiKQorCQl1bmJpbmRfcmViaW5kKGNoaXBzZXQpOworCisJaWd0X3N1YnRlc3Qo
InVucGx1Zy1yZXNjYW4iKQorCQl1bnBsdWdfcmVzY2FuKGNoaXBzZXQpOworCisJaWd0X3N1YnRl
c3QoImRybV9vcGVuLWhvdHVucGx1ZyIpCisJCWRybV9vcGVuX2hvdHVucGx1ZyhjaGlwc2V0KTsK
KworCWlndF9maXh0dXJlIHsKKwkJZnJlZShtb2R1bGUpOworCX0KK30KZGlmZiAtLWdpdCBhL3Rl
c3RzL21lc29uLmJ1aWxkIGIvdGVzdHMvbWVzb24uYnVpbGQKaW5kZXggZjE2OGZiYmEuLjBjMDIy
NTIxIDEwMDY0NAotLS0gYS90ZXN0cy9tZXNvbi5idWlsZAorKysgYi90ZXN0cy9tZXNvbi5idWls
ZApAQCAtMyw2ICszLDcgQEAgdGVzdF9wcm9ncyA9IFsKIAknY29yZV9nZXRjbGllbnQnLAogCSdj
b3JlX2dldHN0YXRzJywKIAknY29yZV9nZXR2ZXJzaW9uJywKKwknY29yZV9ob3R1bnBsdWcnLAog
CSdjb3JlX3NldG1hc3Rlcl92c19hdXRoJywKIAknZGVidWdmc190ZXN0JywKIAknZHJtX2ltcG9y
dF9leHBvcnQnLAotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVl
ZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9pbnRlbC1nZng=

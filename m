Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E0BD5D02FD
	for <lists+intel-gfx@lfdr.de>; Tue,  8 Oct 2019 23:40:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CFB3289B84;
	Tue,  8 Oct 2019 21:40:37 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 47D8889B03
 for <intel-gfx@lists.freedesktop.org>; Tue,  8 Oct 2019 21:40:34 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18770556-1500050 
 for multiple; Tue, 08 Oct 2019 22:40:23 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  8 Oct 2019 22:40:15 +0100
Message-Id: <20191008214021.5120-4-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191008214021.5120-1-chris@chris-wilson.co.uk>
References: <20191008214021.5120-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 3/9] drm/i915/perf: allow for CS OA configs to
 be created lazily
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogTGlvbmVsIExhbmR3ZXJsaW4gPGxpb25lbC5nLmxhbmR3ZXJsaW5AaW50ZWwuY29tPgoK
SGVyZSB3ZSBpbnRyb2R1Y2UgYSBtZWNoYW5pc20gYnkgd2hpY2ggdGhlIGV4ZWNidWYgcGFydCBv
ZiB0aGUgaTkxNQpkcml2ZXIgd2lsbCBiZSBhYmxlIHRvIHJlcXVlc3QgdGhhdCBhIGJhdGNoIGJ1
ZmZlciBjb250YWluaW5nIHRoZQpwcm9ncmFtbWluZyBmb3IgYSBwYXJ0aWN1bGFyIE9BIGNvbmZp
ZyBiZSBjcmVhdGVkLgoKV2UnbGwgZXhlY3V0ZSB0aGVzZSBPQSBjb25maWd1cmF0aW9uIGJ1ZmZl
cnMgcmlnaHQgYmVmb3JlIGV4ZWN1dGluZyBhCnNldCBvZiB1c2Vyc3BhY2UgY29tbWFuZHMgc28g
dGhhdCBhIHBhcnRpY3VsYXIgdXNlciBiYXRjaGJ1ZmZlciBiZQpleGVjdXRlZCB3aXRoIGEgZ2l2
ZW4gT0EgY29uZmlndXJhdGlvbi4KClRoaXMgbWVjaGFuaXNtIGVzc2VudGlhbGx5IGFsbG93cyB0
aGUgdXNlcnNwYWNlIGRyaXZlciB0byBnbyB0aHJvdWdoCnNldmVyYWwgT0EgY29uZmlndXJhdGlv
biB3aXRob3V0IGhhdmluZyB0byBvcGVuL2Nsb3NlIHRoZSBpOTE1L3BlcmYKc3RyZWFtLgoKdjI6
IE5vIG5lZWQgZm9yIGxvY2tpbmcgb24gb2JqZWN0IE9BIGNvbmZpZyBvYmplY3QgY3JlYXRpb24g
KENocmlzKQogICAgRmx1c2ggY3B1IG1hcHBpbmcgb2YgT0EgY29uZmlnIChDaHJpcykKCnYzOiBQ
cm9wZXJseSBkZWFsIHdpdGggdGhlIHBlcmZfbWV0cmljIGxvY2sgKENocmlzL0xpb25lbCkKCnY0
OiBGaXggb2EgY29uZmlnIHVucmVmL3B1dCB3aGVuIG5vdCBmb3VuZCAoTGlvbmVsKQoKdjU6IEFs
bG9jYXRlIEJPcyBmb3IgY29uZmlndXJhdGlvbnMgb24gdGhlIHN0cmVhbSBpbnN0ZWFkIG9mIGds
b2JhbGx5CiAgICAoTGlvbmVsKQoKdjY6IEZpeCA2NGJpdCBkaXZpc2lvbiAoQ2hyaXMpCgp2Nzog
U3RvcmUgYWxsb2NhdGVkIGNvbmZpZyBCT3MgaW50byB0aGUgc3RyZWFtIChMaW9uZWwpCgpTaWdu
ZWQtb2ZmLWJ5OiBMaW9uZWwgTGFuZHdlcmxpbiA8bGlvbmVsLmcubGFuZHdlcmxpbkBpbnRlbC5j
b20+ClJldmlld2VkLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4g
KHY0KQotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oIHwg
ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jICAgICAgICAgICAgIHwgMjY0
ICsrKysrKysrKysrKysrKystLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5oICAg
ICAgICAgICAgIHwgIDMxICsrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmX3R5cGVz
LmggICAgICAgfCAgMjQgKy0KIDQgZmlsZXMgY2hhbmdlZCwgMjc1IGluc2VydGlvbnMoKyksIDQ1
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2dwdV9jb21tYW5kcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3B1X2NvbW1h
bmRzLmgKaW5kZXggYjAyMjdhYjJmZTFiLi4wOTg3MTAwYzc4NmIgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oCkBAIC0xMzgsNiArMTM4LDcgQEAKIC8q
IEdlbjExKy4gYWRkciA9IGJhc2UgKyAoY3R4X3Jlc3RvcmUgPyBvZmZzZXQgJiBHRU5NQVNLKDEy
LDIpIDogb2Zmc2V0KSAqLwogI2RlZmluZSAgIE1JX0xSSV9DU19NTUlPCQkoMTw8MTkpCiAjZGVm
aW5lICAgTUlfTFJJX0ZPUkNFX1BPU1RFRAkJKDE8PDEyKQorI2RlZmluZSBNSV9MT0FEX1JFR0lT
VEVSX0lNTV9NQVhfUkVHUyAoMTI2KQogI2RlZmluZSBNSV9TVE9SRV9SRUdJU1RFUl9NRU0gICAg
ICAgIE1JX0lOU1RSKDB4MjQsIDEpCiAjZGVmaW5lIE1JX1NUT1JFX1JFR0lTVEVSX01FTV9HRU44
ICAgTUlfSU5TVFIoMHgyNCwgMikKICNkZWZpbmUgICBNSV9TUk1fTFJNX0dMT0JBTF9HVFQJCSgx
PDwyMikKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKaW5kZXggMDI3YTFkMzlmMDA2Li41YmQ5MTJj
MDFkYjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCkBAIC0zNjksNTIgKzM2OSwyMTUgQEAg
c3RydWN0IHBlcmZfb3Blbl9wcm9wZXJ0aWVzIHsKIAlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmU7CiB9OwogCitzdHJ1Y3QgaTkxNV9vYV9jb25maWdfYm8geworCXN0cnVjdCBsaXN0X2hl
YWQgbGluazsKKworCXN0cnVjdCBpOTE1X29hX2NvbmZpZyAqb2FfY29uZmlnOworCXN0cnVjdCBp
OTE1X3ZtYSAqdm1hOworfTsKKwogc3RhdGljIGVudW0gaHJ0aW1lcl9yZXN0YXJ0IG9hX3BvbGxf
Y2hlY2tfdGltZXJfY2Ioc3RydWN0IGhydGltZXIgKmhydGltZXIpOwogCi1zdGF0aWMgdm9pZCBm
cmVlX29hX2NvbmZpZyhzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2NvbmZpZykKK3ZvaWQgaTkx
NV9vYV9jb25maWdfcmVsZWFzZShzdHJ1Y3Qga3JlZiAqcmVmKQogeworCXN0cnVjdCBpOTE1X29h
X2NvbmZpZyAqb2FfY29uZmlnID0KKwkJY29udGFpbmVyX29mKHJlZiwgdHlwZW9mKCpvYV9jb25m
aWcpLCByZWYpOworCiAJaWYgKCFQVFJfRVJSKG9hX2NvbmZpZy0+ZmxleF9yZWdzKSkKIAkJa2Zy
ZWUob2FfY29uZmlnLT5mbGV4X3JlZ3MpOwogCWlmICghUFRSX0VSUihvYV9jb25maWctPmJfY291
bnRlcl9yZWdzKSkKIAkJa2ZyZWUob2FfY29uZmlnLT5iX2NvdW50ZXJfcmVncyk7CiAJaWYgKCFQ
VFJfRVJSKG9hX2NvbmZpZy0+bXV4X3JlZ3MpKQogCQlrZnJlZShvYV9jb25maWctPm11eF9yZWdz
KTsKLQlrZnJlZShvYV9jb25maWcpOworCisJa2ZyZWVfcmN1KG9hX2NvbmZpZywgcmN1KTsKIH0K
IAotc3RhdGljIHZvaWQgcHV0X29hX2NvbmZpZyhzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2Nv
bmZpZykKK3N0cnVjdCBpOTE1X29hX2NvbmZpZyAqCitpOTE1X3BlcmZfZ2V0X29hX2NvbmZpZyhz
dHJ1Y3QgaTkxNV9wZXJmICpwZXJmLCBpbnQgbWV0cmljc19zZXQpCiB7Ci0JaWYgKCFhdG9taWNf
ZGVjX2FuZF90ZXN0KCZvYV9jb25maWctPnJlZl9jb3VudCkpCi0JCXJldHVybjsKKwlzdHJ1Y3Qg
aTkxNV9vYV9jb25maWcgKm9hX2NvbmZpZzsKIAotCWZyZWVfb2FfY29uZmlnKG9hX2NvbmZpZyk7
CisJcmN1X3JlYWRfbG9jaygpOworCWlmIChtZXRyaWNzX3NldCA9PSAxKQorCQlvYV9jb25maWcg
PSAmcGVyZi0+dGVzdF9jb25maWc7CisJZWxzZQorCQlvYV9jb25maWcgPSBpZHJfZmluZCgmcGVy
Zi0+bWV0cmljc19pZHIsIG1ldHJpY3Nfc2V0KTsKKwlpZiAob2FfY29uZmlnKQorCQlvYV9jb25m
aWcgPSBpOTE1X29hX2NvbmZpZ19nZXQob2FfY29uZmlnKTsKKwlyY3VfcmVhZF91bmxvY2soKTsK
KworCXJldHVybiBvYV9jb25maWc7CiB9CiAKLXN0YXRpYyBpbnQgZ2V0X29hX2NvbmZpZyhzdHJ1
Y3QgaTkxNV9wZXJmICpwZXJmLAotCQkJIGludCBtZXRyaWNzX3NldCwKLQkJCSBzdHJ1Y3QgaTkx
NV9vYV9jb25maWcgKipvdXRfY29uZmlnKQorc3RhdGljIHUzMiAqd3JpdGVfY3NfbWlfbHJpKHUz
MiAqY3MsCisJCQkgICAgY29uc3Qgc3RydWN0IGk5MTVfb2FfcmVnICpyZWdfZGF0YSwKKwkJCSAg
ICB1MzIgbl9yZWdzKQogewotCWludCByZXQ7CisJdTMyIGk7CiAKLQlpZiAobWV0cmljc19zZXQg
PT0gMSkgewotCQkqb3V0X2NvbmZpZyA9ICZwZXJmLT50ZXN0X2NvbmZpZzsKLQkJYXRvbWljX2lu
YygmcGVyZi0+dGVzdF9jb25maWcucmVmX2NvdW50KTsKLQkJcmV0dXJuIDA7CisJZm9yIChpID0g
MDsgaSA8IG5fcmVnczsgaSsrKSB7CisJCWlmICgoaSAlIE1JX0xPQURfUkVHSVNURVJfSU1NX01B
WF9SRUdTKSA9PSAwKSB7CisJCQl1MzIgbl9scmkgPSBtaW5fdCh1MzIsCisJCQkJCSAgbl9yZWdz
IC0gaSwKKwkJCQkJICBNSV9MT0FEX1JFR0lTVEVSX0lNTV9NQVhfUkVHUyk7CisKKwkJCSpjcysr
ID0gTUlfTE9BRF9SRUdJU1RFUl9JTU0obl9scmkpOworCQl9CisJCSpjcysrID0gaTkxNV9tbWlv
X3JlZ19vZmZzZXQocmVnX2RhdGFbaV0uYWRkcik7CisJCSpjcysrID0gcmVnX2RhdGFbaV0udmFs
dWU7CiAJfQogCi0JcmV0ID0gbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKCZwZXJmLT5tZXRyaWNz
X2xvY2spOwotCWlmIChyZXQpCi0JCXJldHVybiByZXQ7CisJcmV0dXJuIGNzOworfQogCi0JKm91
dF9jb25maWcgPSBpZHJfZmluZCgmcGVyZi0+bWV0cmljc19pZHIsIG1ldHJpY3Nfc2V0KTsKLQlp
ZiAoISpvdXRfY29uZmlnKQotCQlyZXQgPSAtRUlOVkFMOwotCWVsc2UKLQkJYXRvbWljX2luYygm
KCpvdXRfY29uZmlnKS0+cmVmX2NvdW50KTsKK3N0YXRpYyBpbnQgbnVtX2xyaV9kd29yZHMoaW50
IG51bV9yZWdzKQoreworCWludCBjb3VudCA9IDA7CiAKLQltdXRleF91bmxvY2soJnBlcmYtPm1l
dHJpY3NfbG9jayk7CisJaWYgKG51bV9yZWdzID4gMCkgeworCQljb3VudCArPSBESVZfUk9VTkRf
VVAobnVtX3JlZ3MsIE1JX0xPQURfUkVHSVNURVJfSU1NX01BWF9SRUdTKTsKKwkJY291bnQgKz0g
bnVtX3JlZ3MgKiAyOworCX0KIAotCXJldHVybiByZXQ7CisJcmV0dXJuIGNvdW50OworfQorCitz
dGF0aWMgc3RydWN0IGk5MTVfb2FfY29uZmlnX2JvICoKK2FsbG9jX29hX2NvbmZpZ19idWZmZXIo
c3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKKwkJICAgICAgIHN0cnVjdCBpOTE1X29h
X2NvbmZpZyAqb2FfY29uZmlnKQoreworCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmo7
CisJc3RydWN0IGk5MTVfb2FfY29uZmlnX2JvICpvYV9ibzsKKwlzaXplX3QgY29uZmlnX2xlbmd0
aCA9IDA7CisJdTMyICpjczsKKwlpbnQgZXJyOworCisJb2FfYm8gPSBremFsbG9jKHNpemVvZigq
b2FfYm8pLCBHRlBfS0VSTkVMKTsKKwlpZiAoIW9hX2JvKQorCQlyZXR1cm4gRVJSX1BUUigtRU5P
TUVNKTsKKworCW9hX2JvLT5vYV9jb25maWcgPSBpOTE1X29hX2NvbmZpZ19nZXQob2FfY29uZmln
KTsKKworCWNvbmZpZ19sZW5ndGggKz0gbnVtX2xyaV9kd29yZHMob2FfY29uZmlnLT5tdXhfcmVn
c19sZW4pOworCWNvbmZpZ19sZW5ndGggKz0gbnVtX2xyaV9kd29yZHMob2FfY29uZmlnLT5iX2Nv
dW50ZXJfcmVnc19sZW4pOworCWNvbmZpZ19sZW5ndGggKz0gbnVtX2xyaV9kd29yZHMob2FfY29u
ZmlnLT5mbGV4X3JlZ3NfbGVuKTsKKwljb25maWdfbGVuZ3RoKys7IC8qIE1JX0JBVENIX0JVRkZF
Ul9FTkQgKi8KKwljb25maWdfbGVuZ3RoID0gQUxJR04oc2l6ZW9mKHUzMikgKiBjb25maWdfbGVu
Z3RoLCBJOTE1X0dUVF9QQUdFX1NJWkUpOworCisJb2JqID0gaTkxNV9nZW1fb2JqZWN0X2NyZWF0
ZV9zaG1lbShzdHJlYW0tPnBlcmYtPmk5MTUsIGNvbmZpZ19sZW5ndGgpOworCWlmIChJU19FUlIo
b2JqKSkgeworCQllcnIgPSBQVFJfRVJSKG9iaik7CisJCWdvdG8gZXJyX29hX2NvbmZpZzsKKwl9
CisKKwljcyA9IGk5MTVfZ2VtX29iamVjdF9waW5fbWFwKG9iaiwgSTkxNV9NQVBfV0IpOworCWlm
IChJU19FUlIoY3MpKSB7CisJCWVyciA9IFBUUl9FUlIoY3MpOworCQlnb3RvIGVycl9vYV9ibzsK
Kwl9CisKKwljcyA9IHdyaXRlX2NzX21pX2xyaShjcywKKwkJCSAgICAgb2FfY29uZmlnLT5tdXhf
cmVncywKKwkJCSAgICAgb2FfY29uZmlnLT5tdXhfcmVnc19sZW4pOworCWNzID0gd3JpdGVfY3Nf
bWlfbHJpKGNzLAorCQkJICAgICBvYV9jb25maWctPmJfY291bnRlcl9yZWdzLAorCQkJICAgICBv
YV9jb25maWctPmJfY291bnRlcl9yZWdzX2xlbik7CisJY3MgPSB3cml0ZV9jc19taV9scmkoY3Ms
CisJCQkgICAgIG9hX2NvbmZpZy0+ZmxleF9yZWdzLAorCQkJICAgICBvYV9jb25maWctPmZsZXhf
cmVnc19sZW4pOworCisJKmNzKysgPSBNSV9CQVRDSF9CVUZGRVJfRU5EOworCisJaTkxNV9nZW1f
b2JqZWN0X2ZsdXNoX21hcChvYmopOworCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAob2JqKTsK
KworCW9hX2JvLT52bWEgPQorCQlpOTE1X3ZtYV9pbnN0YW5jZShvYmosICZzdHJlYW0tPmVuZ2lu
ZS0+Z3QtPmdndHQtPnZtLCBOVUxMKTsKKwlpZiAoSVNfRVJSKG9hX2JvLT52bWEpKSB7CisJCWVy
ciA9IFBUUl9FUlIob2FfYm8tPnZtYSk7CisJCWdvdG8gZXJyX29hX2JvOworCX0KKworCXJldHVy
biBvYV9ibzsKKworZXJyX29hX2JvOgorCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKK2Vycl9v
YV9jb25maWc6CisJaTkxNV9vYV9jb25maWdfcHV0KG9hX2JvLT5vYV9jb25maWcpOworCWtmcmVl
KG9hX2JvKTsKKwlyZXR1cm4gRVJSX1BUUihlcnIpOworfQorCitzdGF0aWMgdm9pZCBmcmVlX29h
X2NvbmZpZ19ibyhzdHJ1Y3QgaTkxNV9vYV9jb25maWdfYm8gKm9hX2JvKQoreworCWk5MTVfb2Ff
Y29uZmlnX3B1dChvYV9iby0+b2FfY29uZmlnKTsKKwlpOTE1X3ZtYV9wdXQob2FfYm8tPnZtYSk7
CisJa2ZyZWUob2FfYm8pOworfQorCitpbnQgaTkxNV9wZXJmX3N0cmVhbV9nZXRfb2FfY29uZmln
KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCisJCQkJICAgaW50IG1ldHJpY3Nfc2V0
LAorCQkJCSAgIHN0cnVjdCBpOTE1X29hX2NvbmZpZyAqKm91dF9jb25maWcsCisJCQkJICAgc3Ry
dWN0IGk5MTVfdm1hICoqb3V0X3ZtYSkKK3sKKwlzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2Nv
bmZpZzsKKwlpbnQgZXJyID0gMDsKKworCWlmICghc3RyZWFtLT5wZXJmLT5pOTE1KQorCQlyZXR1
cm4gLUVOT0RFVjsKKworCW9hX2NvbmZpZyA9IGk5MTVfcGVyZl9nZXRfb2FfY29uZmlnKHN0cmVh
bS0+cGVyZiwgbWV0cmljc19zZXQpOworCWlmICghb2FfY29uZmlnKQorCQlyZXR1cm4gLUVJTlZB
TDsKKworCWlmIChvdXRfdm1hKSB7CisJCXN0cnVjdCBpOTE1X29hX2NvbmZpZ19ibyAqb2FfYm8g
PSBOVUxMLCAqb2FfYm9faXRlcjsKKworCQkvKiBMb29rIGZvciB0aGUgYnVmZmVyIGluIHRoZSBh
bHJlYWR5IGFsbG9jYXRlZCBCT3MgYXR0YWNoZWQKKwkJICogdG8gdGhlIHN0cmVhbS4KKwkJICov
CisJCWVyciA9IG11dGV4X2xvY2tfaW50ZXJydXB0aWJsZSgmc3RyZWFtLT5jb25maWdfbXV0ZXgp
OworCQlpZiAoZXJyKQorCQkJZ290byBlcnI7CisKKwkJbGlzdF9mb3JfZWFjaF9lbnRyeShvYV9i
b19pdGVyLCAmc3RyZWFtLT5vYV9jb25maWdfYm9zLCBsaW5rKSB7CisJCQlpZiAob2FfYm9faXRl
ci0+b2FfY29uZmlnID09IG9hX2NvbmZpZyAmJgorCQkJICAgIG1lbWNtcChvYV9ib19pdGVyLT5v
YV9jb25maWctPnV1aWQsCisJCQkJICAgb2FfY29uZmlnLT51dWlkLAorCQkJCSAgIHNpemVvZihv
YV9jb25maWctPnV1aWQpKSA9PSAwKSB7CisJCQkJb2FfYm8gPSBvYV9ib19pdGVyOworCQkJCWJy
ZWFrOworCQkJfQorCQl9CisKKwkJbXV0ZXhfdW5sb2NrKCZzdHJlYW0tPmNvbmZpZ19tdXRleCk7
CisKKwkJaWYgKCFvYV9ibykgeworCQkJb2FfYm8gPSBhbGxvY19vYV9jb25maWdfYnVmZmVyKHN0
cmVhbSwgb2FfY29uZmlnKTsKKwkJCWlmIChJU19FUlIob2FfYm8pKSB7CisJCQkJZXJyID0gUFRS
X0VSUihvYV9ibyk7CisJCQkJZ290byBlcnI7CisJCQl9CisKKwkJCWVyciA9IG11dGV4X2xvY2tf
aW50ZXJydXB0aWJsZSgmc3RyZWFtLT5jb25maWdfbXV0ZXgpOworCQkJaWYgKGVycikgeworCQkJ
CWZyZWVfb2FfY29uZmlnX2JvKG9hX2JvKTsKKwkJCQlnb3RvIGVycjsKKwkJCX0KKworCQkJbGlz
dF9hZGQoJm9hX2JvLT5saW5rLCAmc3RyZWFtLT5vYV9jb25maWdfYm9zKTsKKworCQkJbXV0ZXhf
dW5sb2NrKCZzdHJlYW0tPmNvbmZpZ19tdXRleCk7CisJCX0KKworCQkqb3V0X3ZtYSA9IGk5MTVf
dm1hX2dldChvYV9iby0+dm1hKTsKKwl9CisKK2VycjoKKwlpZiAoIWVycikKKwkJKm91dF9jb25m
aWcgPSBvYV9jb25maWc7CisJcmV0dXJuIGVycjsKIH0KIAogc3RhdGljIHUzMiBnZW44X29hX2h3
X3RhaWxfcmVhZChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQpAQCAtMTMzNyw2ICsx
NTAwLDE2IEBAIGZyZWVfb2FfYnVmZmVyKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0p
CiAJc3RyZWFtLT5vYV9idWZmZXIudmFkZHIgPSBOVUxMOwogfQogCitzdGF0aWMgdm9pZAorZnJl
ZV9vYV9jb25maWdzKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCit7CisJc3RydWN0
IGk5MTVfb2FfY29uZmlnX2JvICpvYV9ibywgKnRtcDsKKworCWk5MTVfb2FfY29uZmlnX3B1dChz
dHJlYW0tPm9hX2NvbmZpZyk7CisJbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKG9hX2JvLCB0bXAs
ICZzdHJlYW0tPm9hX2NvbmZpZ19ib3MsIGxpbmspCisJCWZyZWVfb2FfY29uZmlnX2JvKG9hX2Jv
KTsKK30KKwogc3RhdGljIHZvaWQgaTkxNV9vYV9zdHJlYW1fZGVzdHJveShzdHJ1Y3QgaTkxNV9w
ZXJmX3N0cmVhbSAqc3RyZWFtKQogewogCXN0cnVjdCBpOTE1X3BlcmYgKnBlcmYgPSBzdHJlYW0t
PnBlcmY7CkBAIC0xMzU4LDcgKzE1MzEsNyBAQCBzdGF0aWMgdm9pZCBpOTE1X29hX3N0cmVhbV9k
ZXN0cm95KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiAJaWYgKHN0cmVhbS0+Y3R4
KQogCQlvYV9wdXRfcmVuZGVyX2N0eF9pZChzdHJlYW0pOwogCi0JcHV0X29hX2NvbmZpZyhzdHJl
YW0tPm9hX2NvbmZpZyk7CisJZnJlZV9vYV9jb25maWdzKHN0cmVhbSk7CiAKIAlpZiAocGVyZi0+
c3B1cmlvdXNfcmVwb3J0X3JzLm1pc3NlZCkgewogCQlEUk1fTk9URSgiJWQgc3B1cmlvdXMgT0Eg
cmVwb3J0IG5vdGljZXMgc3VwcHJlc3NlZCBkdWUgdG8gcmF0ZWxpbWl0aW5nXG4iLApAQCAtMjE3
MSw2ICsyMzQ0LDggQEAgc3RhdGljIGludCBpOTE1X29hX3N0cmVhbV9pbml0KHN0cnVjdCBpOTE1
X3BlcmZfc3RyZWFtICpzdHJlYW0sCiAJCXJldHVybiAtRUlOVkFMOwogCX0KIAorCW11dGV4X2lu
aXQoJnN0cmVhbS0+Y29uZmlnX211dGV4KTsKKwogCXN0cmVhbS0+c2FtcGxlX3NpemUgPSBzaXpl
b2Yoc3RydWN0IGRybV9pOTE1X3BlcmZfcmVjb3JkX2hlYWRlcik7CiAKIAlmb3JtYXRfc2l6ZSA9
IHBlcmYtPm9hX2Zvcm1hdHNbcHJvcHMtPm9hX2Zvcm1hdF0uc2l6ZTsKQEAgLTIxOTksOSArMjM3
NCwxMCBAQCBzdGF0aWMgaW50IGk5MTVfb2Ffc3RyZWFtX2luaXQoc3RydWN0IGk5MTVfcGVyZl9z
dHJlYW0gKnN0cmVhbSwKIAkJfQogCX0KIAotCXJldCA9IGdldF9vYV9jb25maWcocGVyZiwgcHJv
cHMtPm1ldHJpY3Nfc2V0LCAmc3RyZWFtLT5vYV9jb25maWcpOwotCWlmIChyZXQpIHsKKwlzdHJl
YW0tPm9hX2NvbmZpZyA9IGk5MTVfcGVyZl9nZXRfb2FfY29uZmlnKHBlcmYsIHByb3BzLT5tZXRy
aWNzX3NldCk7CisJaWYgKCFzdHJlYW0tPm9hX2NvbmZpZykgewogCQlEUk1fREVCVUcoIkludmFs
aWQgT0EgY29uZmlnIGlkPSVpXG4iLCBwcm9wcy0+bWV0cmljc19zZXQpOworCQlyZXQgPSAtRUlO
VkFMOwogCQlnb3RvIGVycl9jb25maWc7CiAJfQogCkBAIC0yMjM0LDYgKzI0MTAsOSBAQCBzdGF0
aWMgaW50IGk5MTVfb2Ffc3RyZWFtX2luaXQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVh
bSwKIAkJZ290byBlcnJfZW5hYmxlOwogCX0KIAorCURSTV9ERUJVRygib3BlbmluZyBzdHJlYW0g
b2EgY29uZmlnIHV1aWQ9JXNcbiIsCisJCSAgc3RyZWFtLT5vYV9jb25maWctPnV1aWQpOworCiAJ
aHJ0aW1lcl9pbml0KCZzdHJlYW0tPnBvbGxfY2hlY2tfdGltZXIsCiAJCSAgICAgQ0xPQ0tfTU9O
T1RPTklDLCBIUlRJTUVSX01PREVfUkVMKTsKIAlzdHJlYW0tPnBvbGxfY2hlY2tfdGltZXIuZnVu
Y3Rpb24gPSBvYV9wb2xsX2NoZWNrX3RpbWVyX2NiOwpAQCAtMjI0OSwxMSArMjQyOCwxMSBAQCBz
dGF0aWMgaW50IGk5MTVfb2Ffc3RyZWFtX2luaXQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0
cmVhbSwKIAlmcmVlX29hX2J1ZmZlcihzdHJlYW0pOwogCiBlcnJfb2FfYnVmX2FsbG9jOgotCXB1
dF9vYV9jb25maWcoc3RyZWFtLT5vYV9jb25maWcpOwotCiAJaW50ZWxfdW5jb3JlX2ZvcmNld2Fr
ZV9wdXQoc3RyZWFtLT5ndC0+dW5jb3JlLCBGT1JDRVdBS0VfQUxMKTsKIAlpbnRlbF9ydW50aW1l
X3BtX3B1dChzdHJlYW0tPmd0LT51bmNvcmUtPnJwbSwgc3RyZWFtLT53YWtlcmVmKTsKIAorCWZy
ZWVfb2FfY29uZmlncyhzdHJlYW0pOworCiBlcnJfY29uZmlnOgogCWlmIChzdHJlYW0tPmN0eCkK
IAkJb2FfcHV0X3JlbmRlcl9jdHhfaWQoc3RyZWFtKTsKQEAgLTI3MjQsNiArMjkwMyw3IEBAIGk5
MTVfcGVyZl9vcGVuX2lvY3RsX2xvY2tlZChzdHJ1Y3QgaTkxNV9wZXJmICpwZXJmLAogCQlnb3Rv
IGVycl9jdHg7CiAJfQogCisJSU5JVF9MSVNUX0hFQUQoJnN0cmVhbS0+b2FfY29uZmlnX2Jvcyk7
CiAJc3RyZWFtLT5wZXJmID0gcGVyZjsKIAlzdHJlYW0tPmd0ID0gJnBlcmYtPmk5MTUtPmd0Owog
CXN0cmVhbS0+Y3R4ID0gc3BlY2lmaWNfY3R4OwpAQCAtMzA1OCw3ICszMjM4LDggQEAgdm9pZCBp
OTE1X3BlcmZfcmVnaXN0ZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJaWYgKHJl
dCkKIAkJZ290byBzeXNmc19lcnJvcjsKIAotCWF0b21pY19zZXQoJnBlcmYtPnRlc3RfY29uZmln
LnJlZl9jb3VudCwgMSk7CisJcGVyZi0+dGVzdF9jb25maWcucGVyZiA9IHBlcmY7CisJa3JlZl9p
bml0KCZwZXJmLT50ZXN0X2NvbmZpZy5yZWYpOwogCiAJZ290byBleGl0OwogCkBAIC0zMzE2LDcg
KzM0OTcsOCBAQCBpbnQgaTkxNV9wZXJmX2FkZF9jb25maWdfaW9jdGwoc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwgdm9pZCAqZGF0YSwKIAkJcmV0dXJuIC1FTk9NRU07CiAJfQogCi0JYXRvbWljX3Nl
dCgmb2FfY29uZmlnLT5yZWZfY291bnQsIDEpOworCW9hX2NvbmZpZy0+cGVyZiA9IHBlcmY7CisJ
a3JlZl9pbml0KCZvYV9jb25maWctPnJlZik7CiAKIAlpZiAoIXV1aWRfaXNfdmFsaWQoYXJncy0+
dXVpZCkpIHsKIAkJRFJNX0RFQlVHKCJJbnZhbGlkIHV1aWQgZm9ybWF0IGZvciBPQSBjb25maWdc
biIpOwpAQCAtMzQxNSw3ICszNTk3LDcgQEAgaW50IGk5MTVfcGVyZl9hZGRfY29uZmlnX2lvY3Rs
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiBzeXNmc19lcnI6CiAJbXV0ZXhf
dW5sb2NrKCZwZXJmLT5tZXRyaWNzX2xvY2spOwogcmVnX2VycjoKLQlwdXRfb2FfY29uZmlnKG9h
X2NvbmZpZyk7CisJaTkxNV9vYV9jb25maWdfcHV0KG9hX2NvbmZpZyk7CiAJRFJNX0RFQlVHKCJG
YWlsZWQgdG8gYWRkIG5ldyBPQSBjb25maWdcbiIpOwogCXJldHVybiBlcnI7CiB9CkBAIC0zNDUx
LDEzICszNjMzLDEzIEBAIGludCBpOTE1X3BlcmZfcmVtb3ZlX2NvbmZpZ19pb2N0bChzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAogCiAJcmV0ID0gbXV0ZXhfbG9ja19pbnRlcnJ1
cHRpYmxlKCZwZXJmLT5tZXRyaWNzX2xvY2spOwogCWlmIChyZXQpCi0JCWdvdG8gbG9ja19lcnI7
CisJCXJldHVybiByZXQ7CiAKIAlvYV9jb25maWcgPSBpZHJfZmluZCgmcGVyZi0+bWV0cmljc19p
ZHIsICphcmcpOwogCWlmICghb2FfY29uZmlnKSB7CiAJCURSTV9ERUJVRygiRmFpbGVkIHRvIHJl
bW92ZSB1bmtub3duIE9BIGNvbmZpZ1xuIik7CiAJCXJldCA9IC1FTk9FTlQ7Ci0JCWdvdG8gY29u
ZmlnX2VycjsKKwkJZ290byBlcnJfdW5sb2NrOwogCX0KIAogCUdFTV9CVUdfT04oKmFyZyAhPSBv
YV9jb25maWctPmlkKTsKQEAgLTM0NjcsMTMgKzM2NDksMTYgQEAgaW50IGk5MTVfcGVyZl9yZW1v
dmVfY29uZmlnX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAKIAlp
ZHJfcmVtb3ZlKCZwZXJmLT5tZXRyaWNzX2lkciwgKmFyZyk7CiAKKwltdXRleF91bmxvY2soJnBl
cmYtPm1ldHJpY3NfbG9jayk7CisKIAlEUk1fREVCVUcoIlJlbW92ZWQgY29uZmlnICVzIGlkPSVp
XG4iLCBvYV9jb25maWctPnV1aWQsIG9hX2NvbmZpZy0+aWQpOwogCi0JcHV0X29hX2NvbmZpZyhv
YV9jb25maWcpOworCWk5MTVfb2FfY29uZmlnX3B1dChvYV9jb25maWcpOworCisJcmV0dXJuIDA7
CiAKLWNvbmZpZ19lcnI6CitlcnJfdW5sb2NrOgogCW11dGV4X3VubG9jaygmcGVyZi0+bWV0cmlj
c19sb2NrKTsKLWxvY2tfZXJyOgogCXJldHVybiByZXQ7CiB9CiAKQEAgLTM2NDMsNyArMzgyOCw3
IEBAIHZvaWQgaTkxNV9wZXJmX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAK
IHN0YXRpYyBpbnQgZGVzdHJveV9jb25maWcoaW50IGlkLCB2b2lkICpwLCB2b2lkICpkYXRhKQog
ewotCXB1dF9vYV9jb25maWcocCk7CisJaTkxNV9vYV9jb25maWdfcHV0KHApOwogCXJldHVybiAw
OwogfQogCkBAIC0zNjU1LDkgKzM4NDAsNiBAQCB2b2lkIGk5MTVfcGVyZl9maW5pKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICppOTE1KQogewogCXN0cnVjdCBpOTE1X3BlcmYgKnBlcmYgPSAmaTkx
NS0+cGVyZjsKIAotCWlmICghcGVyZi0+aTkxNSkKLQkJcmV0dXJuOwotCiAJaWRyX2Zvcl9lYWNo
KCZwZXJmLT5tZXRyaWNzX2lkciwgZGVzdHJveV9jb25maWcsIHBlcmYpOwogCWlkcl9kZXN0cm95
KCZwZXJmLT5tZXRyaWNzX2lkcik7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfcGVyZi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmgKaW5kZXggMjk1
ZTMzZThlZWY3Li4yZDFmY2M5NGM1MTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfcGVyZi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5oCkBAIC03
LDEyICs3LDE2IEBACiAjZGVmaW5lIF9fSTkxNV9QRVJGX0hfXwogCiAjaW5jbHVkZSA8bGludXgv
dHlwZXMuaD4KKyNpbmNsdWRlIDxsaW51eC9rcmVmLmg+CiAKICNpbmNsdWRlICJpOTE1X3BlcmZf
dHlwZXMuaCIKIAogc3RydWN0IGRybV9kZXZpY2U7CiBzdHJ1Y3QgZHJtX2ZpbGU7CitzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdDsKIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlOworc3RydWN0IGk5
MTVfb2FfY29uZmlnOworc3RydWN0IGk5MTVfcGVyZl9zdHJlYW07CiBzdHJ1Y3QgaW50ZWxfY29u
dGV4dDsKIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3M7CiAKQEAgLTI4LDcgKzMyLDM0IEBAIGludCBp
OTE1X3BlcmZfYWRkX2NvbmZpZ19pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpk
YXRhLAogCQkJICAgICAgIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSk7CiBpbnQgaTkxNV9wZXJmX3Jl
bW92ZV9jb25maWdfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKIAkJ
CQkgIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSk7CisKIHZvaWQgaTkxNV9vYV9pbml0X3JlZ19zdGF0
ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCiAJCQkgICAgY29uc3Qgc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKIAorc3RydWN0IGk5MTVfb2FfY29uZmlnICoKK2k5MTVf
cGVyZl9nZXRfb2FfY29uZmlnKHN0cnVjdCBpOTE1X3BlcmYgKnBlcmYsIGludCBtZXRyaWNzX3Nl
dCk7CisKK2ludCBpOTE1X3BlcmZfc3RyZWFtX2dldF9vYV9jb25maWcoc3RydWN0IGk5MTVfcGVy
Zl9zdHJlYW0gKnN0cmVhbSwKKwkJCQkgICBpbnQgbWV0cmljc19zZXQsCisJCQkJICAgc3RydWN0
IGk5MTVfb2FfY29uZmlnICoqb3V0X2NvbmZpZywKKwkJCQkgICBzdHJ1Y3QgaTkxNV92bWEgKipv
dXRfdm1hKTsKKworc3RhdGljIGlubGluZSBzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKgoraTkxNV9v
YV9jb25maWdfZ2V0KHN0cnVjdCBpOTE1X29hX2NvbmZpZyAqb2FfY29uZmlnKQoreworCWlmIChr
cmVmX2dldF91bmxlc3NfemVybygmb2FfY29uZmlnLT5yZWYpKQorCQlyZXR1cm4gb2FfY29uZmln
OworCWVsc2UKKwkJcmV0dXJuIE5VTEw7Cit9CisKK3ZvaWQgaTkxNV9vYV9jb25maWdfcmVsZWFz
ZShzdHJ1Y3Qga3JlZiAqcmVmKTsKK3N0YXRpYyBpbmxpbmUgdm9pZCBpOTE1X29hX2NvbmZpZ19w
dXQoc3RydWN0IGk5MTVfb2FfY29uZmlnICpvYV9jb25maWcpCit7CisJaWYgKCFvYV9jb25maWcp
CisJCXJldHVybjsKKworCWtyZWZfcHV0KCZvYV9jb25maWctPnJlZiwgaTkxNV9vYV9jb25maWdf
cmVsZWFzZSk7Cit9CisKICNlbmRpZiAvKiBfX0k5MTVfUEVSRl9IX18gKi8KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZl90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9wZXJmX3R5cGVzLmgKaW5kZXggODJjZDNiMjk1MDM3Li41YmFlZTRmMGZlOTEg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZl90eXBlcy5oCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZl90eXBlcy5oCkBAIC0yMiw2ICsyMiw3IEBA
CiBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZTsKIHN0cnVjdCBmaWxlOwogc3RydWN0IGk5MTVfZ2Vt
X2NvbnRleHQ7CitzdHJ1Y3QgaTkxNV9wZXJmOwogc3RydWN0IGk5MTVfdm1hOwogc3RydWN0IGlu
dGVsX2NvbnRleHQ7CiBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzOwpAQCAtMzcsNiArMzgsOCBAQCBz
dHJ1Y3QgaTkxNV9vYV9yZWcgewogfTsKIAogc3RydWN0IGk5MTVfb2FfY29uZmlnIHsKKwlzdHJ1
Y3QgaTkxNV9wZXJmICpwZXJmOworCiAJY2hhciB1dWlkW1VVSURfU1RSSU5HX0xFTiArIDFdOwog
CWludCBpZDsKIApAQCAtNTEsNyArNTQsOCBAQCBzdHJ1Y3QgaTkxNV9vYV9jb25maWcgewogCXN0
cnVjdCBhdHRyaWJ1dGUgKmF0dHJzWzJdOwogCXN0cnVjdCBkZXZpY2VfYXR0cmlidXRlIHN5c2Zz
X21ldHJpY19pZDsKIAotCWF0b21pY190IHJlZl9jb3VudDsKKwlzdHJ1Y3Qga3JlZiByZWY7CisJ
c3RydWN0IHJjdV9oZWFkIHJjdTsKIH07CiAKIHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtOwpAQCAt
MTc4LDEzICsxODIsMjUgQEAgc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gewogCSAqLwogCWNvbnN0
IHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtX29wcyAqb3BzOwogCisJLyoqCisJICogQGFjdGl2ZV9j
b25maWdfbXV0ZXg6IFByb3RlY3RzIGFjY2VzcyB0byBAb2FfY29uZmlnICYgQG9hX2NvbmZpZ19i
b3MuCisJICovCisJc3RydWN0IG11dGV4IGNvbmZpZ19tdXRleDsKKwogCS8qKgogCSAqIEBvYV9j
b25maWc6IFRoZSBPQSBjb25maWd1cmF0aW9uIHVzZWQgYnkgdGhlIHN0cmVhbS4KIAkgKi8KIAlz
dHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2NvbmZpZzsKIAorCS8qKgorCSAqIEBvYV9jb25maWdf
Ym9zOiBBIGxpc3Qgb2Ygc3RydWN0IGk5MTVfb2FfY29uZmlnX2JvIGFsbG9jYXRlZCBsYXppbHkK
KwkgKiBlYWNoIHRpbWUgQG9hX2NvbmZpZyBjaGFuZ2VzLgorCSAqLworCXN0cnVjdCBsaXN0X2hl
YWQgb2FfY29uZmlnX2JvczsKKwogCS8qKgogCSAqIEBwaW5uZWRfY3R4OiBUaGUgT0EgY29udGV4
dCBzcGVjaWZpYyBpbmZvcm1hdGlvbi4KKwkgKiBUaGUgT0EgY29udGV4dCBzcGVjaWZpYyBpbmZv
cm1hdGlvbi4KIAkgKi8KIAlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqcGlubmVkX2N0eDsKIAl1MzIg
c3BlY2lmaWNfY3R4X2lkOwpAQCAtMzM3LDEzICszNTMsMTMgQEAgc3RydWN0IGk5MTVfcGVyZiB7
CiAKIAkvKgogCSAqIExvY2sgYXNzb2NpYXRlZCB3aXRoIGFkZGluZy9tb2RpZnlpbmcvcmVtb3Zp
bmcgT0EgY29uZmlncwotCSAqIGluIGRldl9wcml2LT5wZXJmLm1ldHJpY3NfaWRyLgorCSAqIGlu
IHBlcmYtPm1ldHJpY3NfaWRyLgogCSAqLwogCXN0cnVjdCBtdXRleCBtZXRyaWNzX2xvY2s7CiAK
IAkvKgotCSAqIExpc3Qgb2YgZHluYW1pYyBjb25maWd1cmF0aW9ucywgeW91IG5lZWQgdG8gaG9s
ZAotCSAqIGRldl9wcml2LT5wZXJmLm1ldHJpY3NfbG9jayB0byBhY2Nlc3MgaXQuCisJICogTGlz
dCBvZiBkeW5hbWljIGNvbmZpZ3VyYXRpb25zIChzdHJ1Y3QgaTkxNV9vYV9jb25maWcpLCB5b3UK
KwkgKiBuZWVkIHRvIGhvbGQgcGVyZi0+bWV0cmljc19sb2NrIHRvIGFjY2VzcyBpdC4KIAkgKi8K
IAlzdHJ1Y3QgaWRyIG1ldHJpY3NfaWRyOwogCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50
ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

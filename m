Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4201310B08D
	for <lists+intel-gfx@lfdr.de>; Wed, 27 Nov 2019 14:46:22 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9BD196E22A;
	Wed, 27 Nov 2019 13:46:20 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 944686E0FB
 for <intel-gfx@lists.freedesktop.org>; Wed, 27 Nov 2019 13:46:18 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 27 Nov 2019 05:46:18 -0800
X-IronPort-AV: E=Sophos;i="5.69,249,1571727600"; d="scan'208";a="203078453"
Received: from kjbrenna-mobl1.ger.corp.intel.com (HELO [10.251.83.147])
 ([10.251.83.147])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 27 Nov 2019 05:46:16 -0800
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191127111742.3271036-1-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <b834e9b3-9654-12bd-09ef-cf7d13101a0f@linux.intel.com>
Date: Wed, 27 Nov 2019 13:46:14 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191127111742.3271036-1-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH] drm/i915: Copy across scheduler behaviour
 flags across submit fences
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDI3LzExLzIwMTkgMTE6MTcsIENocmlzIFdpbHNvbiB3cm90ZToKPiBXZSB3YW50IHRoZSBi
b25kZWQgcmVxdWVzdCB0byBoYXZlIHRoZSBzYW1lIHNjaGVkdWxlciBwcm9wZXJ0aWVzIGFzIGl0
cwo+IG1hc3RlciBzbyB0aGF0IGl0IGlzIHBsYWNlZCBhdCB0aGUgc2FtZSBkZXB0aCBpbiB0aGUg
cXVldWUuIEZvciBleGFtcGxlLAo+IGNvbnNpZGVyIHdlIGhhdmUgcmVxdWVzdHMgQSwgQiBhbmQg
QicsIHdoZXJlIEIgJiBCJyBhcmUgYSBib25kZWQgcGFpciB0bwo+IHJ1biBpbiBwYXJhbGxlbCBv
biB0d28gZW5naW5lcy4KPiAKPiAJQSAtPiBCCj4gICAgICAgCSAgICAgXC0gQicKPiAKPiBCIHdp
bGwgcnVuIGFmdGVyIEEgYW5kIHNvIG1heSBiZSBzY2hlZHVsZWQgb24gYW4gaWRsZSBlbmdpbmUg
YW5kIHdhaXQgb24KPiBBIHVzaW5nIGEgc2VtYXBob3JlLiBCJyBzZWVzIEIgYmVpbmcgZXhlY3V0
ZWQgYW5kIHNvIGVudGVycyB0aGUgcXVldWUgb24KPiB0aGUgc2FtZSBlbmdpbmUgYXMgQS4gQXMg
QicgZGlkIG5vdCBpbmhlcml0IHRoZSBzZW1hcGhvcmUtY2hhaW4gZnJvbSBCLAo+IGl0IG1heSBo
YXZlIGhpZ2hlciBwcmVjZWRlbmNlIHRoYW4gQSBhbmQgc28gcHJlZW1wdHMgZXhlY3V0aW9uLiBI
b3dldmVyLAo+IEInIHRoZW4gc2l0cyBvbiBhIHNlbWFwaG9yZSB3YWl0aW5nIGZvciBCLCB3aG8g
aXMgd2FpdGluZyBmb3IgQSwgd2hvIGlzCj4gYmxvY2tlZCBieSBCLgo+IAo+IEVyZ28gQicgbmVl
ZHMgdG8gaW5oZXJpdCB0aGUgc2NoZWR1bGVyIHByb3BlcnRpZXMgZnJvbSBCIChpLmUuIHRoZQo+
IHNlbWFwaG9yZSBjaGFpbikgc28gdGhhdCBpdCBpcyBzY2hlZHVsZWQgd2l0aCB0aGUgc2FtZSBw
cmlvcml0eSBhcyBCIGFuZAo+IHdpbGwgbm90IGJlIGV4ZWN1dGVkIGFoZWFkIG9mIEJzIGRlcGVu
ZGVuY2llcy4KPiAKPiBGdXJ0aGVybW9yZSwgdG8gcHJldmVudCB0aGUgcHJpb3JpdGllcyBjaGFu
Z2luZyB2aWEgdGhlIGV4cG9zZSBmZW5jZSBvbgo+IEInLCB3ZSBuZWVkIHRvIGNvdXBsZSBpbiB0
aGUgZGVwZW5kZW5jaWVzIGZvciBQSS4gVGhpcyByZXF1aXJlcyB1cyB0bwo+IHJlbGF4IG91ciBz
YW5pdHktY2hlY2tzIHRoYXQgZGVwZW5kZW5jaWVzIGFyZSBzdHJpY3RseSBpbiBvcmRlci4KCkdv
b2QgY2F0Y2gsIHRoaXMgbmVlZGVkIHNvbWUgZGVlcCB0aGlua2luZyEgQW5kIGl0IGxvb2tzIG9r
YXksIGV2ZW4gCnRob3VnaCBpZGVhbGx5IHdlIHdvdWxkIGJlIGFibGUgdG8gZml4IGl0IG5vdCB0
byBzaWduYWwgdGhlIHN1Ym1pdCBmZW5jZSAKdW50aWwgc2VtYXBob3JlIHdhcyBjb21wbGV0ZWQu
IEJ1dCBmb3IgdGhhdCBJIHRoaW5rIHdlIHdvdWxkIG5lZWQgdG8gCmVtaXQgYSByZXF1ZXN0IHdo
aWxlIGVtaXR0aW5nIGEgcmVxdWVzdCwgc28gdGhhdCB0aGUgc2VtYXBob3JlIHdhaXQgCndvdWxk
IGJlIGluIGl0cyBvd24uCgpPbmNlIHRoaXMgcGFzc2VzIEJBVCBJJ2xsIHBhc3MgaXQgb24gdG8g
Y3VzdG9tZXIgdG8gdHJ5LgoKUmVnYXJkcywKClR2cnRrbwoKPiBGaXhlczogZWUxMTM2OTA4ZTli
ICgiZHJtL2k5MTUvZXhlY2xpc3RzOiBWaXJ0dWFsIGVuZ2luZSBib25kaW5nIikKPiBTaWduZWQt
b2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KPiBDYzogVHZy
dGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KPiAtLS0KPiAgIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jICAgfCA0NiArKysrKysrKysrKysrKysrKysrKysr
LS0tLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NoZWR1bGVyLmMgfCAgMSAtCj4g
ICAyIGZpbGVzIGNoYW5nZWQsIDM4IGluc2VydGlvbnMoKyksIDkgZGVsZXRpb25zKC0pCj4gCj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMKPiBpbmRleCBhNTU4ZjY0MTg2ZmEuLjkzYmVh
Njk4N2U1NyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3Qu
Ywo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jCj4gQEAgLTMwMCwx
MSArMzAwLDExIEBAIHZvaWQgaTkxNV9yZXF1ZXN0X3JldGlyZV91cHRvKHN0cnVjdCBpOTE1X3Jl
cXVlc3QgKnJxKQo+ICAgfQo+ICAgCj4gICBzdGF0aWMgaW50Cj4gLV9faTkxNV9yZXF1ZXN0X2F3
YWl0X2V4ZWN1dGlvbihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwKPiAtCQkJICAgICAgIHN0cnVj
dCBpOTE1X3JlcXVlc3QgKnNpZ25hbCwKPiAtCQkJICAgICAgIHZvaWQgKCpob29rKShzdHJ1Y3Qg
aTkxNV9yZXF1ZXN0ICpycSwKPiAtCQkJCQkgICAgc3RydWN0IGRtYV9mZW5jZSAqc2lnbmFsKSwK
PiAtCQkJICAgICAgIGdmcF90IGdmcCkKPiArX19hd2FpdF9leGVjdXRpb24oc3RydWN0IGk5MTVf
cmVxdWVzdCAqcnEsCj4gKwkJICBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpzaWduYWwsCj4gKwkJICB2
b2lkICgqaG9vaykoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCj4gKwkJCSAgICAgICBzdHJ1Y3Qg
ZG1hX2ZlbmNlICpzaWduYWwpLAo+ICsJCSAgZ2ZwX3QgZ2ZwKQo+ICAgewo+ICAgCXN0cnVjdCBl
eGVjdXRlX2NiICpjYjsKPiAgIAo+IEBAIC0zNDEsNiArMzQxLDggQEAgX19pOTE1X3JlcXVlc3Rf
YXdhaXRfZXhlY3V0aW9uKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAo+ICAgCX0KPiAgIAlzcGlu
X3VubG9ja19pcnEoJnNpZ25hbC0+bG9jayk7Cj4gICAKPiArCS8qIENvcHkgYWNyb3NzIHNlbWFw
aG9yZSBzdGF0dXMgYXMgd2UgbmVlZCB0aGUgc2FtZSBiZWhhdmlvdXIgKi8KPiArCXJxLT5zY2hl
ZC5mbGFncyB8PSBzaWduYWwtPnNjaGVkLmZsYWdzOwo+ICAgCXJldHVybiAwOwo+ICAgfQo+ICAg
Cj4gQEAgLTg0Myw3ICs4NDUsNyBAQCBlbWl0X3NlbWFwaG9yZV93YWl0KHN0cnVjdCBpOTE1X3Jl
cXVlc3QgKnRvLAo+ICAgCQlnb3RvIGF3YWl0X2ZlbmNlOwo+ICAgCj4gICAJLyogT25seSBzdWJt
aXQgb3VyIHNwaW5uZXIgYWZ0ZXIgdGhlIHNpZ25hbGVyIGlzIHJ1bm5pbmchICovCj4gLQlpZiAo
X19pOTE1X3JlcXVlc3RfYXdhaXRfZXhlY3V0aW9uKHRvLCBmcm9tLCBOVUxMLCBnZnApKQo+ICsJ
aWYgKF9fYXdhaXRfZXhlY3V0aW9uKHRvLCBmcm9tLCBOVUxMLCBnZnApKQo+ICAgCQlnb3RvIGF3
YWl0X2ZlbmNlOwo+ICAgCj4gICAJLyogV2UgbmVlZCB0byBwaW4gdGhlIHNpZ25hbGVyJ3MgSFdT
UCB1bnRpbCB3ZSBhcmUgZmluaXNoZWQgcmVhZGluZy4gKi8KPiBAQCAtOTkzLDYgKzk5NSwzNSBA
QCBpOTE1X3JlcXVlc3RfYXdhaXRfZG1hX2ZlbmNlKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCBz
dHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkKPiAgIAlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+ICtzdGF0
aWMgaW50Cj4gK19faTkxNV9yZXF1ZXN0X2F3YWl0X2V4ZWN1dGlvbihzdHJ1Y3QgaTkxNV9yZXF1
ZXN0ICpycSwKPiArCQkJICAgICAgIHN0cnVjdCBpOTE1X3JlcXVlc3QgKnNpZ25hbCwKPiArCQkJ
ICAgICAgIHZvaWQgKCpob29rKShzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwKPiArCQkJCQkgICAg
c3RydWN0IGRtYV9mZW5jZSAqc2lnbmFsKSkKPiArewo+ICsJaW50IGVycjsKPiArCj4gKwllcnIg
PSBfX2F3YWl0X2V4ZWN1dGlvbihycSwgc2lnbmFsLCBob29rLCBJOTE1X0ZFTkNFX0dGUCk7Cj4g
KwlpZiAoZXJyKQo+ICsJCXJldHVybiBlcnI7Cj4gKwo+ICsJaWYgKCFycS0+ZW5naW5lLT5zY2hl
ZHVsZSkKPiArCQlyZXR1cm4gMDsKPiArCj4gKwkvKiBTcXVhc2ggcmVwZWF0ZWQgZGVwZW5lbmRp
Y2VzIHRvIHRoZSBzYW1lIHRpbWVsaW5lcyAqLwo+ICsJaWYgKHNpZ25hbC0+ZmVuY2UuY29udGV4
dCAmJgo+ICsJICAgIGludGVsX3RpbWVsaW5lX3N5bmNfaXNfbGF0ZXIoaTkxNV9yZXF1ZXN0X3Rp
bWVsaW5lKHJxKSwKPiArCQkJCQkgJnNpZ25hbC0+ZmVuY2UpKQo+ICsJCXJldHVybiAwOwo+ICsK
PiArCS8qIENvdXBsZSB0aGUgZGVwZW5kZW5jeSB0cmVlIGZvciBQSSBvbiB0aGlzIGV4cG9zZWQg
cnEtPmZlbmNlICovCj4gKwllcnIgPSBpOTE1X3NjaGVkX25vZGVfYWRkX2RlcGVuZGVuY3koJnJx
LT5zY2hlZCwgJnNpZ25hbC0+c2NoZWQpOwo+ICsJaWYgKGVyciA8IDApCj4gKwkJcmV0dXJuIGVy
cjsKPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiAgIGludAo+ICAgaTkxNV9yZXF1ZXN0X2F3
YWl0X2V4ZWN1dGlvbihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwKPiAgIAkJCSAgICAgc3RydWN0
IGRtYV9mZW5jZSAqZmVuY2UsCj4gQEAgLTEwMjYsOCArMTA1Nyw3IEBAIGk5MTVfcmVxdWVzdF9h
d2FpdF9leGVjdXRpb24oc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCj4gICAJCWlmIChkbWFfZmVu
Y2VfaXNfaTkxNShmZW5jZSkpCj4gICAJCQlyZXQgPSBfX2k5MTVfcmVxdWVzdF9hd2FpdF9leGVj
dXRpb24ocnEsCj4gICAJCQkJCQkJICAgICB0b19yZXF1ZXN0KGZlbmNlKSwKPiAtCQkJCQkJCSAg
ICAgaG9vaywKPiAtCQkJCQkJCSAgICAgSTkxNV9GRU5DRV9HRlApOwo+ICsJCQkJCQkJICAgICBo
b29rKTsKPiAgIAkJZWxzZQo+ICAgCQkJcmV0ID0gaTkxNV9zd19mZW5jZV9hd2FpdF9kbWFfZmVu
Y2UoJnJxLT5zdWJtaXQsIGZlbmNlLAo+ICAgCQkJCQkJCSAgICBJOTE1X0ZFTkNFX1RJTUVPVVQs
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NoZWR1bGVyLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxlci5jCj4gaW5kZXggMTkzN2EyNmQ0MTJm
Li4yYmMyYWE0NmExYjkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9z
Y2hlZHVsZXIuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NoZWR1bGVyLmMK
PiBAQCAtNDg0LDcgKzQ4NCw2IEBAIHZvaWQgaTkxNV9zY2hlZF9ub2RlX2Zpbmkoc3RydWN0IGk5
MTVfc2NoZWRfbm9kZSAqbm9kZSkKPiAgIAkgKiBzbyB3ZSBtYXkgYmUgY2FsbGVkIG91dC1vZi1v
cmRlci4KPiAgIAkgKi8KPiAgIAlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUoZGVwLCB0bXAsICZu
b2RlLT5zaWduYWxlcnNfbGlzdCwgc2lnbmFsX2xpbmspIHsKPiAtCQlHRU1fQlVHX09OKCFub2Rl
X3NpZ25hbGVkKGRlcC0+c2lnbmFsZXIpKTsKPiAgIAkJR0VNX0JVR19PTighbGlzdF9lbXB0eSgm
ZGVwLT5kZnNfbGluaykpOwo+ICAgCj4gICAJCWxpc3RfZGVsKCZkZXAtPndhaXRfbGluayk7Cj4g
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdm
eCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

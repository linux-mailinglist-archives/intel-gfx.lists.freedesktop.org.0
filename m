Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D7D5E255E2
	for <lists+intel-gfx@lfdr.de>; Tue, 21 May 2019 18:43:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 444D789327;
	Tue, 21 May 2019 16:43:16 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E2BB489327
 for <intel-gfx@lists.freedesktop.org>; Tue, 21 May 2019 16:43:13 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 16631143-1500050 for multiple; Tue, 21 May 2019 17:43:11 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Lionel Landwerlin <lionel.g.landwerlin@intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20190521140855.3957-1-lionel.g.landwerlin@intel.com>
 <20190521140855.3957-4-lionel.g.landwerlin@intel.com>
In-Reply-To: <20190521140855.3957-4-lionel.g.landwerlin@intel.com>
Message-ID: <155845698911.23981.10616480836626822176@skylake-alporthouse-com>
Date: Tue, 21 May 2019 17:43:09 +0100
Subject: Re: [Intel-gfx] [PATCH 3/5] drm/i915/perf: allow for CS OA configs
 to be created lazily
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBMaW9uZWwgTGFuZHdlcmxpbiAoMjAxOS0wNS0yMSAxNTowODo1MykKPiBIZXJlIHdl
IGludHJvZHVjZSBhIG1lY2hhbmlzbSBieSB3aGljaCB0aGUgZXhlY2J1ZiBwYXJ0IG9mIHRoZSBp
OTE1Cj4gZHJpdmVyIHdpbGwgYmUgYWJsZSB0byByZXF1ZXN0IHRoYXQgYSBiYXRjaCBidWZmZXIg
Y29udGFpbmluZyB0aGUKPiBwcm9ncmFtbWluZyBmb3IgYSBwYXJ0aWN1bGFyIE9BIGNvbmZpZyBi
ZSBjcmVhdGVkLgo+IAo+IFdlJ2xsIGV4ZWN1dGUgdGhlc2UgT0EgY29uZmlndXJhdGlvbiBidWZm
ZXJzIHJpZ2h0IGJlZm9yZSBleGVjdXRpbmcgYQo+IHNldCBvZiB1c2Vyc3BhY2UgY29tbWFuZHMg
c28gdGhhdCBhIHBhcnRpY3VsYXIgdXNlciBiYXRjaGJ1ZmZlciBiZQo+IGV4ZWN1dGVkIHdpdGgg
YSBnaXZlbiBPQSBjb25maWd1cmF0aW9uLgo+IAo+IFRoaXMgbWVjaGFuaXNtIGVzc2VudGlhbGx5
IGFsbG93cyB0aGUgdXNlcnNwYWNlIGRyaXZlciB0byBnbyB0aHJvdWdoCj4gc2V2ZXJhbCBPQSBj
b25maWd1cmF0aW9uIHdpdGhvdXQgaGF2aW5nIHRvIG9wZW4vY2xvc2UgdGhlIGk5MTUvcGVyZgo+
IHN0cmVhbS4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBMaW9uZWwgTGFuZHdlcmxpbiA8bGlvbmVsLmcu
bGFuZHdlcmxpbkBpbnRlbC5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2dwdV9jb21tYW5kcy5oIHwgICAxICsKPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9k
cnYuaCAgICAgICAgICAgICAgfCAgMjIgKystCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
cGVyZi5jICAgICAgICAgICAgIHwgMTg3ICsrKysrKysrKysrKysrKystLS0KPiAgMyBmaWxlcyBj
aGFuZ2VkLCAxNzggaW5zZXJ0aW9ucygrKSwgMzIgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3B1X2NvbW1hbmRzLmgKPiBpbmRleCBhMzRlY2U1M2E3
NzEuLmJiY2I4MGNmMmE4NSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9ncHVfY29tbWFuZHMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2dwdV9jb21tYW5kcy5oCj4gQEAgLTEyNiw2ICsxMjYsNyBAQAo+ICAgKi8KPiAgI2RlZmluZSBN
SV9MT0FEX1JFR0lTVEVSX0lNTSh4KSAgICAgICAgTUlfSU5TVFIoMHgyMiwgMiooeCktMSkKPiAg
I2RlZmluZSAgIE1JX0xSSV9GT1JDRV9QT1NURUQgICAgICAgICAgKDE8PDEyKQo+ICsjZGVmaW5l
IE1JX0xPQURfUkVHSVNURVJfSU1NX01BWF9SRUdTICgxMjYpCj4gICNkZWZpbmUgTUlfU1RPUkVf
UkVHSVNURVJfTUVNICAgICAgICBNSV9JTlNUUigweDI0LCAxKQo+ICAjZGVmaW5lIE1JX1NUT1JF
X1JFR0lTVEVSX01FTV9HRU44ICAgTUlfSU5TVFIoMHgyNCwgMikKPiAgI2RlZmluZSAgIE1JX1NS
TV9MUk1fR0xPQkFMX0dUVCAgICAgICAgICAgICAgICAoMTw8MjIpCj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2Rydi5oCj4gaW5kZXggMWFkMzgxOGQyNjc2Li5hYmQ1NjRiZmEwM2IgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZHJ2LmgKPiBAQCAtMTI3NCw2ICsxMjc0LDEwIEBAIHN0cnVjdCBpOTE1X29hX2Nv
bmZpZyB7Cj4gICAgICAgICBzdHJ1Y3QgYXR0cmlidXRlICphdHRyc1syXTsKPiAgICAgICAgIHN0
cnVjdCBkZXZpY2VfYXR0cmlidXRlIHN5c2ZzX21ldHJpY19pZDsKPiAgCj4gKyAgICAgICBzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwo+ICsKPiArICAgICAgIHN0cnVjdCBsaXN0X2hl
YWQgdm1hX2xpbms7Cj4gKwo+ICAgICAgICAgYXRvbWljX3QgcmVmX2NvdW50Owo+ICB9Owo+ICAK
PiBAQCAtMTg1NiwxMSArMTg2MCwyMSBAQCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSB7Cj4gICAg
ICAgICAgICAgICAgIHN0cnVjdCBtdXRleCBtZXRyaWNzX2xvY2s7Cj4gIAo+ICAgICAgICAgICAg
ICAgICAvKgo+IC0gICAgICAgICAgICAgICAgKiBMaXN0IG9mIGR5bmFtaWMgY29uZmlndXJhdGlv
bnMsIHlvdSBuZWVkIHRvIGhvbGQKPiAtICAgICAgICAgICAgICAgICogZGV2X3ByaXYtPnBlcmYu
bWV0cmljc19sb2NrIHRvIGFjY2VzcyBpdC4KPiArICAgICAgICAgICAgICAgICogTGlzdCBvZiBk
eW5hbWljIGNvbmZpZ3VyYXRpb25zIChzdHJ1Y3QgaTkxNV9vYV9jb25maWcpLCB5b3UKPiArICAg
ICAgICAgICAgICAgICogbmVlZCB0byBob2xkIGRldl9wcml2LT5wZXJmLm1ldHJpY3NfbG9jayB0
byBhY2Nlc3MgaXQuCj4gICAgICAgICAgICAgICAgICAqLwo+ICAgICAgICAgICAgICAgICBzdHJ1
Y3QgaWRyIG1ldHJpY3NfaWRyOwo+ICAKPiArICAgICAgICAgICAgICAgLyoKPiArICAgICAgICAg
ICAgICAgICogTGlzdCBvZiBkeW5hbWljIGNvbmZpZ3VyYXRpb25zIChzdHJ1Y3QgaTkxNV9vYV9j
b25maWcpCj4gKyAgICAgICAgICAgICAgICAqIHdoaWNoIGhhdmUgYW4gYWxsb2NhdGVkIGJ1ZmZl
ciBpbiBHR1RUIGZvciByZWNvbmZpZ3VyYXRpb24sCj4gKyAgICAgICAgICAgICAgICAqIHlvdSBu
ZWVkIHRvIGhvbGQgZGV2X3ByaXYtPnBlcmYubWV0cmljc19sb2NrIHRvIGFjY2VzcyBpdC4KPiAr
ICAgICAgICAgICAgICAgICogRWxlbWVudHMgYXJlIGFkZGVkIHRvIHRoZSBsaXN0IGxhemlsbHkg
b24gZXhlY2J1ZiAod2hlbiBhCj4gKyAgICAgICAgICAgICAgICAqIHBhcnRpY3VsYXIgY29uZmln
dXJhdGlvbiBpcyByZXF1ZXN0ZWQpLiBUaGUgbGlzdCBpcyBmcmVlZAo+ICsgICAgICAgICAgICAg
ICAgKiB1cG9uIGNsb3NpbmcgdGhlIHBlcmYgc3RyZWFtLgo+ICsgICAgICAgICAgICAgICAgKi8K
PiArICAgICAgICAgICAgICAgc3RydWN0IGxpc3RfaGVhZCBtZXRyaWNzX2J1ZmZlcnM7Cj4gKwo+
ICAgICAgICAgICAgICAgICAvKgo+ICAgICAgICAgICAgICAgICAgKiBMb2NrIGFzc29jaWF0ZWQg
d2l0aCBhbnl0aGluZyBiZWxvdyB3aXRoaW4gdGhpcyBzdHJ1Y3R1cmUKPiAgICAgICAgICAgICAg
ICAgICogZXhjZXB0IGV4Y2x1c2l2ZV9zdHJlYW0uCj4gQEAgLTMxMzYsNiArMzE1MCwxMCBAQCBp
bnQgaTkxNV9wZXJmX3JlbW92ZV9jb25maWdfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwg
dm9pZCAqZGF0YSwKPiAgdm9pZCBpOTE1X29hX2luaXRfcmVnX3N0YXRlKHN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGlu
dGVsX2NvbnRleHQgKmNlLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1MzIgKnJlZ19z
dGF0ZSk7Cj4gK2ludCBpOTE1X3BlcmZfZ2V0X29hX2NvbmZpZyhzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IG1ldHJpY3Nfc2V0
LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKipv
dXRfY29uZmlnLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX29iamVjdCAqKm91dF9vYmopOwo+ICAKPiAgLyogaTkxNV9nZW1fZXZpY3QuYyAqLwo+ICBp
bnQgX19tdXN0X2NoZWNrIGk5MTVfZ2VtX2V2aWN0X3NvbWV0aGluZyhzdHJ1Y3QgaTkxNV9hZGRy
ZXNzX3NwYWNlICp2bSwKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9w
ZXJmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwo+IGluZGV4IDhjN2ZhN2Y3
MDE0Yi4uN2UwZWJkNGJjOGYyIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcGVyZi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKPiBAQCAt
MzY1LDkgKzM2NSwxNiBAQCBzdHJ1Y3QgcGVyZl9vcGVuX3Byb3BlcnRpZXMgewo+ICAgICAgICAg
aW50IG9hX3BlcmlvZF9leHBvbmVudDsKPiAgfTsKPiAgCj4gLXN0YXRpYyB2b2lkIGZyZWVfb2Ff
Y29uZmlnKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiAtICAgICAgICAgICAg
ICAgICAgICAgICAgICBzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2NvbmZpZykKPiArc3RhdGlj
IHZvaWQgcHV0X29hX2NvbmZpZyhzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2NvbmZpZykKPiAg
ewo+ICsgICAgICAgaWYgKCFhdG9taWNfZGVjX2FuZF90ZXN0KCZvYV9jb25maWctPnJlZl9jb3Vu
dCkpCj4gKyAgICAgICAgICAgICAgIHJldHVybjsKPiArCj4gKyAgICAgICBpZiAob2FfY29uZmln
LT5vYmopIHsKPiArICAgICAgICAgICAgICAgbGlzdF9kZWwoJm9hX2NvbmZpZy0+dm1hX2xpbmsp
Owo+ICsgICAgICAgICAgICAgICBpOTE1X2dlbV9vYmplY3RfcHV0KG9hX2NvbmZpZy0+b2JqKTsK
PiArICAgICAgIH0KPiArCj4gICAgICAgICBpZiAoIVBUUl9FUlIob2FfY29uZmlnLT5mbGV4X3Jl
Z3MpKQo+ICAgICAgICAgICAgICAgICBrZnJlZShvYV9jb25maWctPmZsZXhfcmVncyk7Cj4gICAg
ICAgICBpZiAoIVBUUl9FUlIob2FfY29uZmlnLT5iX2NvdW50ZXJfcmVncykpCj4gQEAgLTM3Nywz
OCArMzg0LDE0MiBAQCBzdGF0aWMgdm9pZCBmcmVlX29hX2NvbmZpZyhzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYsCj4gICAgICAgICBrZnJlZShvYV9jb25maWcpOwo+ICB9Cj4gIAo+
IC1zdGF0aWMgdm9pZCBwdXRfb2FfY29uZmlnKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBpOTE1X29hX2NvbmZpZyAq
b2FfY29uZmlnKQo+ICtzdGF0aWMgdTMyICp3cml0ZV9jc19taV9scmkodTMyICpjcywgY29uc3Qg
c3RydWN0IGk5MTVfb2FfcmVnICpyZWdfZGF0YSwgdTMyIG5fcmVncykKPiAgewo+IC0gICAgICAg
aWYgKCFhdG9taWNfZGVjX2FuZF90ZXN0KCZvYV9jb25maWctPnJlZl9jb3VudCkpCj4gLSAgICAg
ICAgICAgICAgIHJldHVybjsKPiArICAgICAgIHUzMiBpOwo+ICsKPiArICAgICAgIGZvciAoaSA9
IDA7IGkgPCBuX3JlZ3M7IGkrKykgewo+ICsgICAgICAgICAgICAgICBpZiAoKGkgJSBNSV9MT0FE
X1JFR0lTVEVSX0lNTV9NQVhfUkVHUykgPT0gMCkgewo+ICsgICAgICAgICAgICAgICAgICAgICAg
IHUzMiBuX2xyaSA9IG1pbihuX3JlZ3MgLSBpLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAodTMyKSBNSV9MT0FEX1JFR0lTVEVSX0lNTV9NQVhfUkVHUyk7Cj4gIAo+
IC0gICAgICAgZnJlZV9vYV9jb25maWcoZGV2X3ByaXYsIG9hX2NvbmZpZyk7Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgKmNzKysgPSBNSV9MT0FEX1JFR0lTVEVSX0lNTShuX2xyaSk7Cj4gKyAg
ICAgICAgICAgICAgIH0KPiArICAgICAgICAgICAgICAgKmNzKysgPSBpOTE1X21taW9fcmVnX29m
ZnNldChyZWdfZGF0YVtpXS5hZGRyKTsKPiArICAgICAgICAgICAgICAgKmNzKysgPSByZWdfZGF0
YVtpXS52YWx1ZTsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICByZXR1cm4gY3M7Cj4gIH0KPiAg
Cj4gLXN0YXRpYyBpbnQgZ2V0X29hX2NvbmZpZyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgIGludCBtZXRyaWNzX3NldCwKPiAtICAg
ICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGk5MTVfb2FfY29uZmlnICoqb3V0X2NvbmZpZykK
PiArc3RhdGljIGludCBhbGxvY19vYV9jb25maWdfYnVmZmVyKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaTkx
NV9vYV9jb25maWcgKm9hX2NvbmZpZykKPiAgewo+ICsgICAgICAgc3RydWN0IGRybV9pOTE1X2dl
bV9vYmplY3QgKmJvOwo+ICsgICAgICAgc2l6ZV90IGNvbmZpZ19sZW5ndGggPSAwOwo+ICAgICAg
ICAgaW50IHJldDsKPiArICAgICAgIHUzMiAqY3M7Cj4gIAo+IC0gICAgICAgaWYgKG1ldHJpY3Nf
c2V0ID09IDEpIHsKPiAtICAgICAgICAgICAgICAgKm91dF9jb25maWcgPSAmZGV2X3ByaXYtPnBl
cmYub2EudGVzdF9jb25maWc7Cj4gLSAgICAgICAgICAgICAgIGF0b21pY19pbmMoJmRldl9wcml2
LT5wZXJmLm9hLnRlc3RfY29uZmlnLnJlZl9jb3VudCk7Cj4gLSAgICAgICAgICAgICAgIHJldHVy
biAwOwo+ICsgICAgICAgaWYgKG9hX2NvbmZpZy0+bXV4X3JlZ3NfbGVuID4gMCkgewo+ICsgICAg
ICAgICAgICAgICBjb25maWdfbGVuZ3RoICs9IERJVl9ST1VORF9VUChvYV9jb25maWctPm11eF9y
ZWdzX2xlbiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
TUlfTE9BRF9SRUdJU1RFUl9JTU1fTUFYX1JFR1MpICogNDsKPiArICAgICAgICAgICAgICAgY29u
ZmlnX2xlbmd0aCArPSBvYV9jb25maWctPm11eF9yZWdzX2xlbiAqIDg7Cj4gKyAgICAgICB9Cj4g
KyAgICAgICBpZiAob2FfY29uZmlnLT5iX2NvdW50ZXJfcmVnc19sZW4gPiAwKSB7Cj4gKyAgICAg
ICAgICAgICAgIGNvbmZpZ19sZW5ndGggKz0gRElWX1JPVU5EX1VQKG9hX2NvbmZpZy0+Yl9jb3Vu
dGVyX3JlZ3NfbGVuLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBNSV9MT0FEX1JFR0lTVEVSX0lNTV9NQVhfUkVHUykgKiA0Owo+ICsgICAgICAgICAgICAg
ICBjb25maWdfbGVuZ3RoICs9IG9hX2NvbmZpZy0+Yl9jb3VudGVyX3JlZ3NfbGVuICogODsKPiAg
ICAgICAgIH0KPiArICAgICAgIGlmIChvYV9jb25maWctPmZsZXhfcmVnc19sZW4gPiAwKSB7Cj4g
KyAgICAgICAgICAgICAgIGNvbmZpZ19sZW5ndGggKz0gRElWX1JPVU5EX1VQKG9hX2NvbmZpZy0+
ZmxleF9yZWdzX2xlbiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgTUlfTE9BRF9SRUdJU1RFUl9JTU1fTUFYX1JFR1MpICogNDsKPiArICAgICAgICAgICAg
ICAgY29uZmlnX2xlbmd0aCArPSBvYV9jb25maWctPmZsZXhfcmVnc19sZW4gKiA4Owo+ICsgICAg
ICAgfQo+ICsgICAgICAgY29uZmlnX2xlbmd0aCArPSA0OyAvKiBNSV9CQVRDSF9CVUZGRVJfRU5E
ICovCj4gKyAgICAgICBjb25maWdfbGVuZ3RoID0gQUxJR04oY29uZmlnX2xlbmd0aCwgSTkxNV9H
VFRfUEFHRV9TSVpFKTsKPiAgCj4gLSAgICAgICByZXQgPSBtdXRleF9sb2NrX2ludGVycnVwdGli
bGUoJmRldl9wcml2LT5wZXJmLm1ldHJpY3NfbG9jayk7Cj4gKyAgICAgICByZXQgPSBpOTE1X211
dGV4X2xvY2tfaW50ZXJydXB0aWJsZSgmaTkxNS0+ZHJtKTsKCnN0cnVjdF9tdXRleCBub3QgcmVx
dWlyZWQgZm9yIGNyZWF0aW5nL3BvcHVsYXRpbmcgYW4gb2JqZWN0LgoKPiAgICAgICAgIGlmIChy
ZXQpCj4gICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gIAo+IC0gICAgICAgKm91dF9jb25m
aWcgPSBpZHJfZmluZCgmZGV2X3ByaXYtPnBlcmYubWV0cmljc19pZHIsIG1ldHJpY3Nfc2V0KTsK
PiAtICAgICAgIGlmICghKm91dF9jb25maWcpCj4gLSAgICAgICAgICAgICAgIHJldCA9IC1FSU5W
QUw7Cj4gLSAgICAgICBlbHNlCj4gLSAgICAgICAgICAgICAgIGF0b21pY19pbmMoJigqb3V0X2Nv
bmZpZyktPnJlZl9jb3VudCk7Cj4gKyAgICAgICBibyA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGUo
aTkxNSwgY29uZmlnX2xlbmd0aCk7Cj4gKyAgICAgICBpZiAoSVNfRVJSKGJvKSkgewo+ICsgICAg
ICAgICAgICAgICByZXQgPSBQVFJfRVJSKGJvKTsKPiArICAgICAgICAgICAgICAgZ290byB1bmxv
Y2s7Cj4gKyAgICAgICB9Cj4gIAo+IC0gICAgICAgbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+cGVy
Zi5tZXRyaWNzX2xvY2spOwo+ICsgICAgICAgY3MgPSBpOTE1X2dlbV9vYmplY3RfcGluX21hcChi
bywgSTkxNV9NQVBfV0IpOwo+ICsgICAgICAgaWYgKElTX0VSUihjcykpIHsKPiArICAgICAgICAg
ICAgICAgcmV0ID0gUFRSX0VSUihjcyk7Cj4gKyAgICAgICAgICAgICAgIGdvdG8gZXJyX3VucmVm
Owo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIG1lbXNldChjcywgMCwgY29uZmlnX2xlbmd0aCk7
CgpBbHJlYWR5IHplcm9lZCwgYW5kIHdyaXRlX2NzX21pX2xyaSgpIGxlYXZlcyBubyBob2xlcy4K
Cj4gKyAgICAgICBjcyA9IHdyaXRlX2NzX21pX2xyaShjcywgb2FfY29uZmlnLT5tdXhfcmVncywg
b2FfY29uZmlnLT5tdXhfcmVnc19sZW4pOwo+ICsgICAgICAgY3MgPSB3cml0ZV9jc19taV9scmko
Y3MsIG9hX2NvbmZpZy0+Yl9jb3VudGVyX3JlZ3MsIG9hX2NvbmZpZy0+Yl9jb3VudGVyX3JlZ3Nf
bGVuKTsKPiArICAgICAgIGNzID0gd3JpdGVfY3NfbWlfbHJpKGNzLCBvYV9jb25maWctPmZsZXhf
cmVncywgb2FfY29uZmlnLT5mbGV4X3JlZ3NfbGVuKTsKPiArCj4gKyAgICAgICAqY3MrKyA9IE1J
X0JBVENIX0JVRkZFUl9FTkQ7Cj4gKwoKaTkxNV9nZW1fb2JqZWN0X2ZsdXNoX21hcChibyk7Cgo+
ICsgICAgICAgaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChibyk7Cj4gKwo+ICsgICAgICAgb2Ff
Y29uZmlnLT5vYmogPSBibzsKPiArCj4gKyAgICAgICBnb3RvIHVubG9jazsKPiArCj4gK2Vycl91
bnJlZjoKPiArICAgICAgIG9hX2NvbmZpZy0+b2JqID0gTlVMTDsKCndhcyBuZXZlciBzZXQuCgo+
ICsgICAgICAgaTkxNV9nZW1fb2JqZWN0X3B1dChibyk7CgpZb3UgY291bGQgYXZvaWQgdGhlIHVu
Y29uZGl0aW9uYWwganVtcCBieSBqdXN0IHRha2luZyB0aGUgcmVmIGluCm9hX2NvbmZpZy0+b2Jq
ID0gaTkxNV9nZW1fb2JqZWN0X2dldChibyk7Cgo+ICt1bmxvY2s6Cj4gKyAgICAgICBtdXRleF91
bmxvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOwo+ICsgICAgICAgcmV0dXJuIHJldDsKPiAr
fQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1n
ZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

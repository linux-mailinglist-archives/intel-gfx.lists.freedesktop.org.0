Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5077BFE506
	for <lists+intel-gfx@lfdr.de>; Fri, 15 Nov 2019 19:42:23 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 958A86EA2E;
	Fri, 15 Nov 2019 18:42:21 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2E7446EA2E
 for <intel-gfx@lists.freedesktop.org>; Fri, 15 Nov 2019 18:42:20 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19217606-1500050 
 for multiple; Fri, 15 Nov 2019 18:41:57 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 15 Nov 2019 18:41:56 +0000
Message-Id: <20191115184156.1482912-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC] drm/i915/selftests: Autotune timeouts
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Tm90IGFsbCBIVyBpcyBtYWRlIGVxdWFsLCBhbmQgc28gb25lIHRpbWVvdXQgZm9yIGEgdGVzdCBv
biBvbmUgbWF5IGZhaWwKb24gYW5vdGhlci4gTm93IHRoYXQgd2UgbWVhc3VyZSBhIGJhc2VsaW5l
IGZvciB0aGUgbGF0ZW5jeSBvZiBhbiBlbmdpbmUsCndlIGNhbiBwcm92aWRlIGEgbW9yZSBwcmVj
aXNlIGVzdGltYXRlIGZvciBob3cgbG9uZyBhIHRlc3Qgd2lsbCBydW4gYW5kCmFmdGVyIGFwcGx5
aW5nIHNvbWUgc2FmZXR5IGZhY3RvcnMsIHByb3ZpZGUgYW4gYWNjdXJhdGUgdGltZW91dCBmb3Ig
dGhlCnRlc3QuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNv
bi5jby51az4KQ2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+CkNj
OiBTdHVhcnQgU3VtbWVycyA8c3R1YXJ0LnN1bW1lcnNAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L01ha2VmaWxlICAgICAgICAgICAgICAgICB8ICAzICstCiAuLi4vZHJtL2k5
MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0LmMgfCAgNyArLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMgICB8ICAzICstCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9zZWxmdGVzdF9jb250ZXh0LmMgICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3Qvc2VsZnRlc3RfZW5naW5lX2NzLmMgIHwgIDUgKystCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2suYyAgfCAgNyArLS0KIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3NlbGZ0ZXN0X2xyYy5jICAgICAgICB8IDQxICsrKysrKysrLS0tLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9tb2NzLmMgICAgICAgfCAgMyArLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfdGltZWxpbmUuYyAgIHwgIDUgKystCiAuLi4vZ3B1
L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3dvcmthcm91bmRzLmMgICAgfCAgMiArLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfZ2VtX2d0dC5jIHwgIDMgKy0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3JlcXVlc3QuYyB8IDEwICsrLS0tCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9zZWxmdGVzdHMvaWd0X3V0aWxzLmMgICAgfCA0NCArKysrKysrKysrKysrKysr
KysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaWd0X3V0aWxzLmggICAgfCAyMCAr
KysrKysrKysKIDE0IGZpbGVzIGNoYW5nZWQsIDExNSBpbnNlcnRpb25zKCspLCA0MSBkZWxldGlv
bnMoLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMv
aWd0X3V0aWxzLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvaWd0X3V0aWxzLmgKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtl
ZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCmluZGV4IDdiODNhNTEwYmFiYi4u
ZmFlZjhjMTY2NmQ0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQpAQCAtMjYyLDcgKzI2Miw4IEBAIGk5
MTUtJChDT05GSUdfRFJNX0k5MTVfU0VMRlRFU1QpICs9IFwKIAlzZWxmdGVzdHMvaWd0X2xpdmVf
dGVzdC5vIFwKIAlzZWxmdGVzdHMvaWd0X21tYXAubyBcCiAJc2VsZnRlc3RzL2lndF9yZXNldC5v
IFwKLQlzZWxmdGVzdHMvaWd0X3NwaW5uZXIubworCXNlbGZ0ZXN0cy9pZ3Rfc3Bpbm5lci5vIFwK
KwlzZWxmdGVzdHMvaWd0X3V0aWxzLm8KIAogIyB2aXJ0dWFsIGdwdSBjb2RlCiBpOTE1LXkgKz0g
aTkxNV92Z3B1Lm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVz
dHMvaTkxNV9nZW1fY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0
cy9pOTE1X2dlbV9jb250ZXh0LmMKaW5kZXggMTA2YTNiZmEzYmI2Li5iNDE1Njg0Nzc0MjYgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fY29u
dGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1f
Y29udGV4dC5jCkBAIC0xOCw2ICsxOCw3IEBACiAjaW5jbHVkZSAic2VsZnRlc3RzL2lndF9saXZl
X3Rlc3QuaCIKICNpbmNsdWRlICJzZWxmdGVzdHMvaWd0X3Jlc2V0LmgiCiAjaW5jbHVkZSAic2Vs
ZnRlc3RzL2lndF9zcGlubmVyLmgiCisjaW5jbHVkZSAic2VsZnRlc3RzL2lndF91dGlscy5oIgog
I2luY2x1ZGUgInNlbGZ0ZXN0cy9tb2NrX2RybS5oIgogI2luY2x1ZGUgInNlbGZ0ZXN0cy9tb2Nr
X2dlbV9kZXZpY2UuaCIKIApAQCAtODYsNyArODcsNyBAQCBzdGF0aWMgaW50IGxpdmVfbm9wX3N3
aXRjaCh2b2lkICphcmcpCiAJCQl9CiAJCQlpOTE1X3JlcXVlc3RfYWRkKHJxKTsKIAkJfQotCQlp
ZiAoaTkxNV9yZXF1ZXN0X3dhaXQocnEsIDAsIEhaIC8gNSkgPCAwKSB7CisJCWlmIChpZ3RfcmVx
dWVzdF93YWl0KHJxLCAwLCAyKSA8IDApIHsKIAkJCXByX2VycigiRmFpbGVkIHRvIHBvcHVsYXRl
ZCAlZCBjb250ZXh0c1xuIiwgbmN0eCk7CiAJCQlpbnRlbF9ndF9zZXRfd2VkZ2VkKCZpOTE1LT5n
dCk7CiAJCQllcnIgPSAtRUlPOwpAQCAtMTI5LDcgKzEzMCw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9u
b3Bfc3dpdGNoKHZvaWQgKmFyZykKIAogCQkJCWk5MTVfcmVxdWVzdF9hZGQocnEpOwogCQkJfQot
CQkJaWYgKGk5MTVfcmVxdWVzdF93YWl0KHJxLCAwLCBIWiAvIDUpIDwgMCkgeworCQkJaWYgKGln
dF9yZXF1ZXN0X3dhaXQocnEsIDAsIDIpIDwgMCkgewogCQkJCXByX2VycigiU3dpdGNoaW5nIGJl
dHdlZW4gJWxkIGNvbnRleHRzIHRpbWVkIG91dFxuIiwKIAkJCQkgICAgICAgcHJpbWUpOwogCQkJ
CWludGVsX2d0X3NldF93ZWRnZWQoJmk5MTUtPmd0KTsKQEAgLTE5Myw3ICsxOTQsNyBAQCBzdGF0
aWMgaW50IF9fbGl2ZV9wYXJhbGxlbF9zd2l0Y2gxKHZvaWQgKmRhdGEpCiAKIAkJCWk5MTVfcmVx
dWVzdF9hZGQocnEpOwogCQl9Ci0JCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChycSwgMCwgSFogLyA1
KSA8IDApCisJCWlmIChpZ3RfcmVxdWVzdF93YWl0KHJxLCAwLCAyKSA8IDApCiAJCQllcnIgPSAt
RVRJTUU7CiAJCWk5MTVfcmVxdWVzdF9wdXQocnEpOwogCQlpZiAoZXJyKQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMKaW5kZXggMzk5YWNhZTJmMzNmLi45YmE1
ODhlMTEzZTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmth
cm91bmRzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMu
YwpAQCAtOSw2ICs5LDcgQEAKICNpbmNsdWRlICJpbnRlbF9ndC5oIgogI2luY2x1ZGUgImludGVs
X3JpbmcuaCIKICNpbmNsdWRlICJpbnRlbF93b3JrYXJvdW5kcy5oIgorI2luY2x1ZGUgInNlbGZ0
ZXN0cy9pZ3RfdXRpbHMuaCIKIAogLyoqCiAgKiBET0M6IEhhcmR3YXJlIHdvcmthcm91bmRzCkBA
IC0xNTkzLDcgKzE1OTQsNyBAQCBzdGF0aWMgaW50IGVuZ2luZV93YV9saXN0X3ZlcmlmeShzdHJ1
Y3QgaW50ZWxfY29udGV4dCAqY2UsCiAJCWdvdG8gZXJyX3ZtYTsKIAogCWk5MTVfcmVxdWVzdF9h
ZGQocnEpOwotCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChycSwgMCwgSFogLyA1KSA8IDApIHsKKwlp
ZiAoaWd0X3JlcXVlc3Rfd2FpdChycSwgMCwgMikgPCAwKSB7CiAJCWVyciA9IC1FVElNRTsKIAkJ
Z290byBlcnJfdm1hOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2NvbnRl
eHQuYwppbmRleCA1N2U0MGRiOGNiZDIuLjY1ZDAzM2ZkNmJmOCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfY29udGV4dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L3NlbGZ0ZXN0X2NvbnRleHQuYwpAQCAtMTEsNiArMTEsNyBAQAogCiAjaW5jbHVk
ZSAiZ2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRleHQuaCIKICNpbmNsdWRlICJzZWxmdGVzdHMvaWd0
X2ZsdXNoX3Rlc3QuaCIKKyNpbmNsdWRlICJzZWxmdGVzdHMvaWd0X3V0aWxzLmgiCiAjaW5jbHVk
ZSAic2VsZnRlc3RzL21vY2tfZHJtLmgiCiAKIHN0YXRpYyBpbnQgcmVxdWVzdF9zeW5jKHN0cnVj
dCBpOTE1X3JlcXVlc3QgKnJxKQpAQCAtMjYsNyArMjcsNyBAQCBzdGF0aWMgaW50IHJlcXVlc3Rf
c3luYyhzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkKIAlfX2k5MTVfcmVxdWVzdF9jb21taXQocnEp
OwogCV9faTkxNV9yZXF1ZXN0X3F1ZXVlKHJxLCBOVUxMKTsKIAotCXRpbWVvdXQgPSBpOTE1X3Jl
cXVlc3Rfd2FpdChycSwgMCwgSFogLyAxMCk7CisJdGltZW91dCA9IGlndF9yZXF1ZXN0X3dhaXQo
cnEsIDAsIDEpOwogCWlmICh0aW1lb3V0IDwgMCkKIAkJZXJyID0gdGltZW91dDsKIAllbHNlCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9lbmdpbmVfY3MuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2VuZ2luZV9jcy5jCmluZGV4IDU5ODFh
N2I3MWVjOS4uZTBkZTQ2NTA5YTg4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9zZWxmdGVzdF9lbmdpbmVfY3MuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxm
dGVzdF9lbmdpbmVfY3MuYwpAQCAtMTEsNiArMTEsNyBAQAogCiAjaW5jbHVkZSAiaTkxNV9zZWxm
dGVzdC5oIgogI2luY2x1ZGUgInNlbGZ0ZXN0cy9pZ3RfZmx1c2hfdGVzdC5oIgorI2luY2x1ZGUg
InNlbGZ0ZXN0cy9pZ3RfdXRpbHMuaCIKIAogI2RlZmluZSBDT1VOVCA1CiAKQEAgLTE3MSw3ICsx
NzIsNyBAQCBzdGF0aWMgaW50IHBlcmZfbWlfYmJfc3RhcnQodm9pZCAqYXJnKQogCQkJaTkxNV9y
ZXF1ZXN0X2dldChycSk7CiAJCQlpOTE1X3JlcXVlc3RfYWRkKHJxKTsKIAotCQkJaWYgKGk5MTVf
cmVxdWVzdF93YWl0KHJxLCAwLCBIWiAvIDUpIDwgMCkKKwkJCWlmIChpZ3RfcmVxdWVzdF93YWl0
KHJxLCAwLCAyKSA8IDApCiAJCQkJZXJyID0gLUVJTzsKIAkJCWk5MTVfcmVxdWVzdF9wdXQocnEp
OwogCQkJaWYgKGVycikKQEAgLTMxNSw3ICszMTYsNyBAQCBzdGF0aWMgaW50IHBlcmZfbWlfbm9v
cCh2b2lkICphcmcpCiAJCQlpOTE1X3JlcXVlc3RfZ2V0KHJxKTsKIAkJCWk5MTVfcmVxdWVzdF9h
ZGQocnEpOwogCi0JCQlpZiAoaTkxNV9yZXF1ZXN0X3dhaXQocnEsIDAsIEhaIC8gNSkgPCAwKQor
CQkJaWYgKGlndF9yZXF1ZXN0X3dhaXQocnEsIDAsIDIpIDwgMCkKIAkJCQllcnIgPSAtRUlPOwog
CQkJaTkxNV9yZXF1ZXN0X3B1dChycSk7CiAJCQlpZiAoZXJyKQpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2NoZWNrLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9zZWxmdGVzdF9oYW5nY2hlY2suYwppbmRleCBmZjJkOGFmMjgyYTYuLjFhZTI1YTY2
OGUxOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2No
ZWNrLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2NoZWNrLmMK
QEAgLTMzLDYgKzMzLDcgQEAKICNpbmNsdWRlICJzZWxmdGVzdHMvaWd0X2ZsdXNoX3Rlc3QuaCIK
ICNpbmNsdWRlICJzZWxmdGVzdHMvaWd0X3Jlc2V0LmgiCiAjaW5jbHVkZSAic2VsZnRlc3RzL2ln
dF9hdG9taWMuaCIKKyNpbmNsdWRlICJzZWxmdGVzdHMvaWd0X3V0aWxzLmgiCiAKICNpbmNsdWRl
ICJzZWxmdGVzdHMvbW9ja19kcm0uaCIKIApAQCAtNjU1LDcgKzY1Niw3IEBAIHN0YXRpYyBpbnQg
YWN0aXZlX3JlcXVlc3RfcHV0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQogCWlmICghcnEpCiAJ
CXJldHVybiAwOwogCi0JaWYgKGk5MTVfcmVxdWVzdF93YWl0KHJxLCAwLCA1ICogSFopIDwgMCkg
eworCWlmIChpZ3RfcmVxdWVzdF93YWl0KHJxLCAwLCA1MDApIDwgMCkgewogCQlHRU1fVFJBQ0Uo
IiVzIHRpbWVkIG91dCB3YWl0aW5nIGZvciBjb21wbGV0aW9uIG9mIGZlbmNlICVsbHg6JWxsZFxu
IiwKIAkJCSAgcnEtPmVuZ2luZS0+bmFtZSwKIAkJCSAgcnEtPmZlbmNlLmNvbnRleHQsCkBAIC04
NDUsNyArODQ2LDcgQEAgc3RhdGljIGludCBfX2lndF9yZXNldF9lbmdpbmVzKHN0cnVjdCBpbnRl
bF9ndCAqZ3QsCiAJCQljb3VudCsrOwogCiAJCQlpZiAocnEpIHsKLQkJCQlpZiAoaTkxNV9yZXF1
ZXN0X3dhaXQocnEsIDAsIEhaIC8gNSkgPCAwKSB7CisJCQkJaWYgKGlndF9yZXF1ZXN0X3dhaXQo
cnEsIDAsIDIpIDwgMCkgewogCQkJCQlzdHJ1Y3QgZHJtX3ByaW50ZXIgcCA9CiAJCQkJCQlkcm1f
aW5mb19wcmludGVyKGd0LT5pOTE1LT5kcm0uZGV2KTsKIApAQCAtMTAzOCw3ICsxMDM5LDcgQEAg
c3RhdGljIGludCBpZ3RfcmVzZXRfd2FpdCh2b2lkICphcmcpCiAKIAlyZXNldF9jb3VudCA9IGZh
a2VfaGFuZ2NoZWNrKGd0LCBBTExfRU5HSU5FUyk7CiAKLQl0aW1lb3V0ID0gaTkxNV9yZXF1ZXN0
X3dhaXQocnEsIDAsIDEwKTsKKwl0aW1lb3V0ID0gaWd0X3JlcXVlc3Rfd2FpdChycSwgMCwgMSk7
CiAJaWYgKHRpbWVvdXQgPCAwKSB7CiAJCXByX2VycigiaTkxNV9yZXF1ZXN0X3dhaXQgZmFpbGVk
IG9uIGEgc3R1Y2sgcmVxdWVzdDogZXJyPSVsZFxuIiwKIAkJICAgICAgIHRpbWVvdXQpOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYwppbmRleCAyYTFiNWEyZTBlYzUuLjYwNTk3
YmI3YmYxOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJj
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKQEAgLTE0LDYg
KzE0LDcgQEAKICNpbmNsdWRlICJzZWxmdGVzdHMvaTkxNV9yYW5kb20uaCIKICNpbmNsdWRlICJz
ZWxmdGVzdHMvaWd0X2ZsdXNoX3Rlc3QuaCIKICNpbmNsdWRlICJzZWxmdGVzdHMvaWd0X2xpdmVf
dGVzdC5oIgorI2luY2x1ZGUgInNlbGZ0ZXN0cy9pZ3RfdXRpbHMuaCIKICNpbmNsdWRlICJzZWxm
dGVzdHMvaWd0X3NwaW5uZXIuaCIKICNpbmNsdWRlICJzZWxmdGVzdHMvbGliX3N3X2ZlbmNlLmgi
CiAKQEAgLTc1MSw3ICs3NTIsNyBAQCBzdGF0aWMgaW50IGxpdmVfYnVzeXdhaXRfcHJlZW1wdCh2
b2lkICphcmcpCiAJCX0KIAogCQkvKiBMb3cgcHJpb3JpdHkgcmVxdWVzdCBzaG91bGQgYmUgYnVz
eXdhaXRpbmcgbm93ICovCi0JCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChsbywgMCwgMSkgIT0gLUVU
SU1FKSB7CisJCWlmIChpZ3RfcmVxdWVzdF93YWl0KGxvLCAwLCAwKSAhPSAtRVRJTUUpIHsKIAkJ
CXByX2VycigiJXM6IEJ1c3l3YWl0aW5nIHJlcXVlc3QgZGlkIG5vdCFcbiIsCiAJCQkgICAgICAg
ZW5naW5lLT5uYW1lKTsKIAkJCWVyciA9IC1FSU87CkBAIC03NzksNyArNzgwLDcgQEAgc3RhdGlj
IGludCBsaXZlX2J1c3l3YWl0X3ByZWVtcHQodm9pZCAqYXJnKQogCQlpbnRlbF9yaW5nX2FkdmFu
Y2UoaGksIGNzKTsKIAkJaTkxNV9yZXF1ZXN0X2FkZChoaSk7CiAKLQkJaWYgKGk5MTVfcmVxdWVz
dF93YWl0KGxvLCAwLCBIWiAvIDUpIDwgMCkgeworCQlpZiAoaWd0X3JlcXVlc3Rfd2FpdChsbywg
MCwgMikgPCAwKSB7CiAJCQlzdHJ1Y3QgZHJtX3ByaW50ZXIgcCA9IGRybV9pbmZvX3ByaW50ZXIo
Z3QtPmk5MTUtPmRybS5kZXYpOwogCiAJCQlwcl9lcnIoIiVzOiBGYWlsZWQgdG8gcHJlZW1wdCBz
ZW1hcGhvcmUgYnVzeXdhaXQhXG4iLApAQCAtMTIwMSw3ICsxMjAyLDcgQEAgc3RhdGljIGludCBf
X2NhbmNlbF9hY3RpdmUwKHN0cnVjdCBsaXZlX3ByZWVtcHRfY2FuY2VsICphcmcpCiAJaWYgKGVy
cikKIAkJZ290byBvdXQ7CiAKLQlpZiAoaTkxNV9yZXF1ZXN0X3dhaXQocnEsIDAsIEhaIC8gNSkg
PCAwKSB7CisJaWYgKGlndF9yZXF1ZXN0X3dhaXQocnEsIDAsIDIpIDwgMCkgewogCQllcnIgPSAt
RUlPOwogCQlnb3RvIG91dDsKIAl9CkBAIC0xMjY2LDcgKzEyNjcsNyBAQCBzdGF0aWMgaW50IF9f
Y2FuY2VsX2FjdGl2ZTEoc3RydWN0IGxpdmVfcHJlZW1wdF9jYW5jZWwgKmFyZykKIAkJZ290byBv
dXQ7CiAKIAlpZ3Rfc3Bpbm5lcl9lbmQoJmFyZy0+YS5zcGluKTsKLQlpZiAoaTkxNV9yZXF1ZXN0
X3dhaXQocnFbMV0sIDAsIEhaIC8gNSkgPCAwKSB7CisJaWYgKGlndF9yZXF1ZXN0X3dhaXQocnFb
MV0sIDAsIDIpIDwgMCkgewogCQllcnIgPSAtRUlPOwogCQlnb3RvIG91dDsKIAl9CkBAIC0xMzQ5
LDcgKzEzNTAsNyBAQCBzdGF0aWMgaW50IF9fY2FuY2VsX3F1ZXVlZChzdHJ1Y3QgbGl2ZV9wcmVl
bXB0X2NhbmNlbCAqYXJnKQogCWlmIChlcnIpCiAJCWdvdG8gb3V0OwogCi0JaWYgKGk5MTVfcmVx
dWVzdF93YWl0KHJxWzJdLCAwLCBIWiAvIDUpIDwgMCkgeworCWlmIChpZ3RfcmVxdWVzdF93YWl0
KHJxWzJdLCAwLCAyKSA8IDApIHsKIAkJZXJyID0gLUVJTzsKIAkJZ290byBvdXQ7CiAJfQpAQCAt
MTQxMCw3ICsxNDExLDcgQEAgc3RhdGljIGludCBfX2NhbmNlbF9ob3N0aWxlKHN0cnVjdCBsaXZl
X3ByZWVtcHRfY2FuY2VsICphcmcpCiAJaWYgKGVycikKIAkJZ290byBvdXQ7CiAKLQlpZiAoaTkx
NV9yZXF1ZXN0X3dhaXQocnEsIDAsIEhaIC8gNSkgPCAwKSB7CisJaWYgKGlndF9yZXF1ZXN0X3dh
aXQocnEsIDAsIDIpIDwgMCkgewogCQllcnIgPSAtRUlPOwogCQlnb3RvIG91dDsKIAl9CkBAIC0x
NzI3LDkgKzE3MjgsOSBAQCBzdGF0aWMgaW50IGxpdmVfc3VwcHJlc3Nfd2FpdF9wcmVlbXB0KHZv
aWQgKmFyZykKIAkJCX0KIAkJCUdFTV9CVUdfT04oIWk5MTVfcmVxdWVzdF9zdGFydGVkKHJxWzBd
KSk7CiAKLQkJCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChycVtkZXB0aF0sCi0JCQkJCSAgICAgIEk5
MTVfV0FJVF9QUklPUklUWSwKLQkJCQkJICAgICAgMSkgIT0gLUVUSU1FKSB7CisJCQlpZiAoaWd0
X3JlcXVlc3Rfd2FpdChycVtkZXB0aF0sCisJCQkJCSAgICAgSTkxNV9XQUlUX1BSSU9SSVRZLAor
CQkJCQkgICAgIDApICE9IC1FVElNRSkgewogCQkJCXByX2VycigiJXM6IFdhaXRlciBkZXB0aDol
ZCBjb21wbGV0ZWQhXG4iLAogCQkJCSAgICAgICBlbmdpbmUtPm5hbWUsIGRlcHRoKTsKIAkJCQln
b3RvIGVycl93ZWRnZWQ7CkBAIC0xODIwLDcgKzE4MjEsNyBAQCBzdGF0aWMgaW50IGxpdmVfY2hh
aW5fcHJlZW1wdCh2b2lkICphcmcpCiAJCQkgX19mdW5jX18sIGVuZ2luZS0+bmFtZSwgcmluZ19z
aXplKTsKIAogCQlpZ3Rfc3Bpbm5lcl9lbmQoJmxvLnNwaW4pOwotCQlpZiAoaTkxNV9yZXF1ZXN0
X3dhaXQocnEsIDAsIEhaIC8gMikgPCAwKSB7CisJCWlmIChpZ3RfcmVxdWVzdF93YWl0KHJxLCAw
LCA1KSA8IDApIHsKIAkJCXByX2VycigiVGltZWQgb3V0IHdhaXRpbmcgdG8gZmx1c2ggJXNcbiIs
IGVuZ2luZS0+bmFtZSk7CiAJCQlnb3RvIGVycl93ZWRnZWQ7CiAJCX0KQEAgLTE4NjEsNyArMTg2
Miw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9jaGFpbl9wcmVlbXB0KHZvaWQgKmFyZykKIAkJCWVuZ2lu
ZS0+c2NoZWR1bGUocnEsICZhdHRyKTsKIAogCQkJaWd0X3NwaW5uZXJfZW5kKCZoaS5zcGluKTsK
LQkJCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChycSwgMCwgSFogLyA1KSA8IDApIHsKKwkJCWlmIChp
Z3RfcmVxdWVzdF93YWl0KHJxLCAwLCAyKSA8IDApIHsKIAkJCQlzdHJ1Y3QgZHJtX3ByaW50ZXIg
cCA9CiAJCQkJCWRybV9pbmZvX3ByaW50ZXIoZ3QtPmk5MTUtPmRybS5kZXYpOwogCkBAIC0xODc3
LDcgKzE4NzgsNyBAQCBzdGF0aWMgaW50IGxpdmVfY2hhaW5fcHJlZW1wdCh2b2lkICphcmcpCiAJ
CQlpZiAoSVNfRVJSKHJxKSkKIAkJCQlnb3RvIGVycl93ZWRnZWQ7CiAJCQlpOTE1X3JlcXVlc3Rf
YWRkKHJxKTsKLQkJCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChycSwgMCwgSFogLyA1KSA8IDApIHsK
KwkJCWlmIChpZ3RfcmVxdWVzdF93YWl0KHJxLCAwLCAyKSA8IDApIHsKIAkJCQlzdHJ1Y3QgZHJt
X3ByaW50ZXIgcCA9CiAJCQkJCWRybV9pbmZvX3ByaW50ZXIoZ3QtPmk5MTUtPmRybS5kZXYpOwog
CkBAIC0yMDgwLDcgKzIwODEsNyBAQCBzdGF0aWMgaW50IGxpdmVfcHJlZW1wdF9nYW5nKHZvaWQg
KmFyZykKIAkJCXN0cnVjdCBpOTE1X3JlcXVlc3QgKm4gPQogCQkJCWxpc3RfbmV4dF9lbnRyeShy
cSwgY2xpZW50X2xpbmspOwogCi0JCQlpZiAoZXJyID09IDAgJiYgaTkxNV9yZXF1ZXN0X3dhaXQo
cnEsIDAsIEhaIC8gNSkgPCAwKSB7CisJCQlpZiAoZXJyID09IDAgJiYgaWd0X3JlcXVlc3Rfd2Fp
dChycSwgMCwgMikgPCAwKSB7CiAJCQkJc3RydWN0IGRybV9wcmludGVyIHAgPQogCQkJCQlkcm1f
aW5mb19wcmludGVyKGVuZ2luZS0+aTkxNS0+ZHJtLmRldik7CiAKQEAgLTIyOTQsNyArMjI5NSw3
IEBAIHN0YXRpYyBpbnQgbGl2ZV9wcmVlbXB0X3RpbWVvdXQodm9pZCAqYXJnKQogCQlpbnRlbF9l
bmdpbmVfZmx1c2hfc3VibWlzc2lvbihlbmdpbmUpOwogCQllbmdpbmUtPnByb3BzLnByZWVtcHRf
dGltZW91dF9tcyA9IHNhdmVkX3RpbWVvdXQ7CiAKLQkJaWYgKGk5MTVfcmVxdWVzdF93YWl0KHJx
LCAwLCBIWiAvIDEwKSA8IDApIHsKKwkJaWYgKGlndF9yZXF1ZXN0X3dhaXQocnEsIDAsIDEpIDwg
MCkgewogCQkJaW50ZWxfZ3Rfc2V0X3dlZGdlZChndCk7CiAJCQlpOTE1X3JlcXVlc3RfcHV0KHJx
KTsKIAkJCWVyciA9IC1FVElNRTsKQEAgLTI2NDIsNyArMjY0Myw3IEBAIHN0YXRpYyBpbnQgbm9w
X3ZpcnR1YWxfZW5naW5lKHN0cnVjdCBpbnRlbF9ndCAqZ3QsCiAJCX0KIAogCQlmb3IgKG5jID0g
MDsgbmMgPCBuY3R4OyBuYysrKSB7Ci0JCQlpZiAoaTkxNV9yZXF1ZXN0X3dhaXQocmVxdWVzdFtu
Y10sIDAsIEhaIC8gMTApIDwgMCkgeworCQkJaWYgKGlndF9yZXF1ZXN0X3dhaXQocmVxdWVzdFtu
Y10sIDAsIDEpIDwgMCkgewogCQkJCXByX2VycigiJXMoJXMpOiB3YWl0IGZvciAlbGx4OiVsbGQg
dGltZWQgb3V0XG4iLAogCQkJCSAgICAgICBfX2Z1bmNfXywgdmVbMF0tPmVuZ2luZS0+bmFtZSwK
IAkJCQkgICAgICAgcmVxdWVzdFtuY10tPmZlbmNlLmNvbnRleHQsCkBAIC0yNzc5LDcgKzI3ODAs
NyBAQCBzdGF0aWMgaW50IG1hc2tfdmlydHVhbF9lbmdpbmUoc3RydWN0IGludGVsX2d0ICpndCwK
IAl9CiAKIAlmb3IgKG4gPSAwOyBuIDwgbnNpYmxpbmc7IG4rKykgewotCQlpZiAoaTkxNV9yZXF1
ZXN0X3dhaXQocmVxdWVzdFtuXSwgMCwgSFogLyAxMCkgPCAwKSB7CisJCWlmIChpZ3RfcmVxdWVz
dF93YWl0KHJlcXVlc3Rbbl0sIDAsIDEpIDwgMCkgewogCQkJcHJfZXJyKCIlcyglcyk6IHdhaXQg
Zm9yICVsbHg6JWxsZCB0aW1lZCBvdXRcbiIsCiAJCQkgICAgICAgX19mdW5jX18sIHZlLT5lbmdp
bmUtPm5hbWUsCiAJCQkgICAgICAgcmVxdWVzdFtuXS0+ZmVuY2UuY29udGV4dCwKQEAgLTI5MTgs
NyArMjkxOSw3IEBAIHN0YXRpYyBpbnQgcHJlc2VydmVkX3ZpcnR1YWxfZW5naW5lKHN0cnVjdCBp
bnRlbF9ndCAqZ3QsCiAJCWk5MTVfcmVxdWVzdF9hZGQocnEpOwogCX0KIAotCWlmIChpOTE1X3Jl
cXVlc3Rfd2FpdChsYXN0LCAwLCBIWiAvIDUpIDwgMCkgeworCWlmIChpZ3RfcmVxdWVzdF93YWl0
KGxhc3QsIDAsIDIpIDwgMCkgewogCQllcnIgPSAtRVRJTUU7CiAJCWdvdG8gb3V0X2VuZDsKIAl9
CkBAIC0zMDgxLDcgKzMwODIsNyBAQCBzdGF0aWMgaW50IGJvbmRfdmlydHVhbF9lbmdpbmUoc3Ry
dWN0IGludGVsX2d0ICpndCwKIAkJfQogCQlvbnN0YWNrX2ZlbmNlX2ZpbmkoJmZlbmNlKTsKIAot
CQlpZiAoaTkxNV9yZXF1ZXN0X3dhaXQocnFbMF0sIDAsIEhaIC8gMTApIDwgMCkgeworCQlpZiAo
aWd0X3JlcXVlc3Rfd2FpdChycVswXSwgMCwgMSkgPCAwKSB7CiAJCQlwcl9lcnIoIk1hc3RlciBy
ZXF1ZXN0IGRpZCBub3QgZXhlY3V0ZSAob24gJXMpIVxuIiwKIAkJCSAgICAgICBycVswXS0+ZW5n
aW5lLT5uYW1lKTsKIAkJCWVyciA9IC1FSU87CkBAIC0zNDgwLDcgKzM0ODEsNyBAQCBzdGF0aWMg
aW50IF9fbGl2ZV9scmNfc3RhdGUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCWlu
dGVsX2VuZ2luZV9mbHVzaF9zdWJtaXNzaW9uKGVuZ2luZSk7CiAJZXhwZWN0ZWRbUklOR19UQUlM
X0lEWF0gPSBjZS0+cmluZy0+dGFpbDsKIAotCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChycSwgMCwg
SFogLyA1KSA8IDApIHsKKwlpZiAoaWd0X3JlcXVlc3Rfd2FpdChycSwgMCwgMikgPCAwKSB7CiAJ
CWVyciA9IC1FVElNRTsKIAkJZ290byBlcnJfcnE7CiAJfQpAQCAtMzYxMyw3ICszNjE0LDcgQEAg
c3RhdGljIGludCBfX2xpdmVfZ3ByX2NsZWFyKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZSwKIAlpOTE1X3JlcXVlc3RfZ2V0KHJxKTsKIAlpOTE1X3JlcXVlc3RfYWRkKHJxKTsKIAotCWlm
IChpOTE1X3JlcXVlc3Rfd2FpdChycSwgMCwgSFogLyA1KSA8IDApIHsKKwlpZiAoaWd0X3JlcXVl
c3Rfd2FpdChycSwgMCwgMikgPCAwKSB7CiAJCWVyciA9IC1FVElNRTsKIAkJZ290byBlcnJfcnE7
CiAJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbW9jcy5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbW9jcy5jCmluZGV4IDgwY2IzY2Jh
YWQ3Ny4uNGRlZWU2ZmQwMzRmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9z
ZWxmdGVzdF9tb2NzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbW9j
cy5jCkBAIC0xMCw2ICsxMCw3IEBACiAjaW5jbHVkZSAiZ2VtL3NlbGZ0ZXN0cy9tb2NrX2NvbnRl
eHQuaCIKICNpbmNsdWRlICJzZWxmdGVzdHMvaWd0X3Jlc2V0LmgiCiAjaW5jbHVkZSAic2VsZnRl
c3RzL2lndF9zcGlubmVyLmgiCisjaW5jbHVkZSAic2VsZnRlc3RzL2lndF91dGlscy5oIgogCiBz
dHJ1Y3QgbGl2ZV9tb2NzIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfbW9jc190YWJsZSB0YWJsZTsKQEAg
LTIxLDcgKzIyLDcgQEAgc3RhdGljIGludCByZXF1ZXN0X2FkZF9zeW5jKHN0cnVjdCBpOTE1X3Jl
cXVlc3QgKnJxLCBpbnQgZXJyKQogewogCWk5MTVfcmVxdWVzdF9nZXQocnEpOwogCWk5MTVfcmVx
dWVzdF9hZGQocnEpOwotCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChycSwgMCwgSFogLyA1KSA8IDAp
CisJaWYgKGlndF9yZXF1ZXN0X3dhaXQocnEsIDAsIDIpIDwgMCkKIAkJZXJyID0gLUVUSU1FOwog
CWk5MTVfcmVxdWVzdF9wdXQocnEpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9zZWxmdGVzdF90aW1lbGluZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRl
c3RfdGltZWxpbmUuYwppbmRleCBmMDRhNTlmZTVkMmMuLmIyZjVmYTk4ZjlkMSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfdGltZWxpbmUuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF90aW1lbGluZS5jCkBAIC0xNyw2ICsxNyw3IEBA
CiAjaW5jbHVkZSAiLi4vc2VsZnRlc3RzL2lndF9mbHVzaF90ZXN0LmgiCiAjaW5jbHVkZSAiLi4v
c2VsZnRlc3RzL21vY2tfZ2VtX2RldmljZS5oIgogI2luY2x1ZGUgInNlbGZ0ZXN0cy9tb2NrX3Rp
bWVsaW5lLmgiCisjaW5jbHVkZSAic2VsZnRlc3RzL2lndF91dGlscy5oIgogCiBzdGF0aWMgc3Ry
dWN0IHBhZ2UgKmh3c3BfcGFnZShzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRsKQogewpAQCAtNzI1
LDcgKzcyNiw3IEBAIHN0YXRpYyBpbnQgbGl2ZV9od3NwX3dyYXAodm9pZCAqYXJnKQogCiAJCWk5
MTVfcmVxdWVzdF9hZGQocnEpOwogCi0JCWlmIChpOTE1X3JlcXVlc3Rfd2FpdChycSwgMCwgSFog
LyA1KSA8IDApIHsKKwkJaWYgKGlndF9yZXF1ZXN0X3dhaXQocnEsIDAsIDIpIDwgMCkgewogCQkJ
cHJfZXJyKCJXYWl0IGZvciB0aW1lbGluZSB3cml0ZXMgdGltZWQgb3V0IVxuIik7CiAJCQllcnIg
PSAtRUlPOwogCQkJZ290byBvdXQ7CkBAIC03OTIsNyArNzkzLDcgQEAgc3RhdGljIGludCBsaXZl
X2h3c3BfcmVjeWNsZSh2b2lkICphcmcpCiAJCQkJYnJlYWs7CiAJCQl9CiAKLQkJCWlmIChpOTE1
X3JlcXVlc3Rfd2FpdChycSwgMCwgSFogLyA1KSA8IDApIHsKKwkJCWlmIChpZ3RfcmVxdWVzdF93
YWl0KHJxLCAwLCAyKSA8IDApIHsKIAkJCQlwcl9lcnIoIldhaXQgZm9yIHRpbWVsaW5lIHdyaXRl
cyB0aW1lZCBvdXQhXG4iKTsKIAkJCQlpOTE1X3JlcXVlc3RfcHV0KHJxKTsKIAkJCQlpbnRlbF90
aW1lbGluZV9wdXQodGwpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2Vs
ZnRlc3Rfd29ya2Fyb3VuZHMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3dv
cmthcm91bmRzLmMKaW5kZXggYWMxOTIxODU0Y2JmLi43ZDUwZGRkNWU1M2IgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3dvcmthcm91bmRzLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rfd29ya2Fyb3VuZHMuYwpAQCAtMzcsNyArMzcs
NyBAQCBzdGF0aWMgaW50IHJlcXVlc3RfYWRkX3N5bmMoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEs
IGludCBlcnIpCiB7CiAJaTkxNV9yZXF1ZXN0X2dldChycSk7CiAJaTkxNV9yZXF1ZXN0X2FkZChy
cSk7Ci0JaWYgKGk5MTVfcmVxdWVzdF93YWl0KHJxLCAwLCBIWiAvIDUpIDwgMCkKKwlpZiAoaWd0
X3JlcXVlc3Rfd2FpdChycSwgMCwgMikgPCAwKQogCQllcnIgPSAtRUlPOwogCWk5MTVfcmVxdWVz
dF9wdXQocnEpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMv
aTkxNV9nZW1fZ3R0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1f
Z3R0LmMKaW5kZXggZDk0ZGI0ODdjNGRkLi5hNWY5N2MwYzdmZTAgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9ndHQuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZ3R0LmMKQEAgLTM1LDYgKzM1LDcgQEAKICNp
bmNsdWRlICJtb2NrX2RybS5oIgogI2luY2x1ZGUgIm1vY2tfZ2VtX2RldmljZS5oIgogI2luY2x1
ZGUgImlndF9mbHVzaF90ZXN0LmgiCisjaW5jbHVkZSAiaWd0X3V0aWxzLmgiCiAKIHN0YXRpYyB2
b2lkIGNsZWFudXBfZnJlZWRfb2JqZWN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkK
IHsKQEAgLTE3MzIsNyArMTczMyw3IEBAIHN0YXRpYyBpbnQgY29udGV4dF9zeW5jKHN0cnVjdCBp
bnRlbF9jb250ZXh0ICpjZSkKIAlpOTE1X3JlcXVlc3RfZ2V0KHJxKTsKIAlpOTE1X3JlcXVlc3Rf
YWRkKHJxKTsKIAotCXRpbWVvdXQgPSBpOTE1X3JlcXVlc3Rfd2FpdChycSwgMCwgSFogLyA1KTsK
Kwl0aW1lb3V0ID0gaWd0X3JlcXVlc3Rfd2FpdChycSwgMCwgMik7CiAJaTkxNV9yZXF1ZXN0X3B1
dChycSk7CiAKIAlyZXR1cm4gdGltZW91dCA8IDAgPyAtRUlPIDogMDsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3JlcXVlc3QuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3JlcXVlc3QuYwppbmRleCBkMjlmNDRjZjMxNjIuLjZl
YzhhZjU2NWJiMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5
MTVfcmVxdWVzdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3Jl
cXVlc3QuYwpAQCAtMzMsNiArMzMsNyBAQAogI2luY2x1ZGUgImk5MTVfc2VsZnRlc3QuaCIKICNp
bmNsdWRlICJpZ3RfbGl2ZV90ZXN0LmgiCiAjaW5jbHVkZSAiaWd0X3NwaW5uZXIuaCIKKyNpbmNs
dWRlICJpZ3RfdXRpbHMuaCIKICNpbmNsdWRlICJsaWJfc3dfZmVuY2UuaCIKIAogI2luY2x1ZGUg
Im1vY2tfZHJtLmgiCkBAIC02OCw5ICs2OSw5IEBAIHN0YXRpYyBpbnQgaWd0X2FkZF9yZXF1ZXN0
KHZvaWQgKmFyZykKIAogc3RhdGljIGludCBpZ3Rfd2FpdF9yZXF1ZXN0KHZvaWQgKmFyZykKIHsK
LQljb25zdCBsb25nIFQgPSBIWiAvIDQ7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUg
PSBhcmc7CiAJc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdDsKKwljb25zdCB1bnNpZ25lZCBs
b25nIFQgPSBpZ3RfcmVxdWVzdF90aW1lb3V0KGk5MTUtPmd0LmVuZ2luZVtSQ1MwXSwgMik7CiAJ
aW50IGVyciA9IC1FSU5WQUw7CiAKIAkvKiBTdWJtaXQgYSByZXF1ZXN0LCB0aGVuIHdhaXQgdXBv
biBpdCAqLwpAQCAtMjMxLDggKzIzMiw3IEBAIHN0YXRpYyBpbnQgaWd0X3JlcXVlc3RfcmV3aW5k
KHZvaWQgKmFyZykKIAlyZXF1ZXN0LT5lbmdpbmUtPnN1Ym1pdF9yZXF1ZXN0KHJlcXVlc3QpOwog
CXJjdV9yZWFkX3VubG9jaygpOwogCi0KLQlpZiAoaTkxNV9yZXF1ZXN0X3dhaXQodmlwLCAwLCBI
WikgPT0gLUVUSU1FKSB7CisJaWYgKGlndF9yZXF1ZXN0X3dhaXQodmlwLCAwLCAxMCkgPT0gLUVU
SU1FKSB7CiAJCXByX2VycigidGltZWQgb3V0IHdhaXRpbmcgZm9yIGhpZ2ggcHJpb3JpdHkgcmVx
dWVzdFxuIik7CiAJCWdvdG8gZXJyOwogCX0KQEAgLTEwNzgsNyArMTA3OCw3IEBAIHN0YXRpYyBp
bnQgX19saXZlX3BhcmFsbGVsX2VuZ2luZTEodm9pZCAqYXJnKQogCQlpOTE1X3JlcXVlc3RfYWRk
KHJxKTsKIAogCQllcnIgPSAwOwotCQlpZiAoaTkxNV9yZXF1ZXN0X3dhaXQocnEsIDAsIEhaIC8g
NSkgPCAwKQorCQlpZiAoaWd0X3JlcXVlc3Rfd2FpdChycSwgMCwgMikgPCAwKQogCQkJZXJyID0g
LUVUSU1FOwogCQlpOTE1X3JlcXVlc3RfcHV0KHJxKTsKIAkJaWYgKGVycikKQEAgLTExNzYsNyAr
MTE3Niw3IEBAIHN0YXRpYyBpbnQgX19saXZlX3BhcmFsbGVsX3NwaW4odm9pZCAqYXJnKQogCX0K
IAlpZ3Rfc3Bpbm5lcl9lbmQoJnNwaW4pOwogCi0JaWYgKGVyciA9PSAwICYmIGk5MTVfcmVxdWVz
dF93YWl0KHJxLCAwLCBIWiAvIDUpIDwgMCkKKwlpZiAoZXJyID09IDAgJiYgaWd0X3JlcXVlc3Rf
d2FpdChycSwgMCwgMikgPCAwKQogCQllcnIgPSAtRUlPOwogCWk5MTVfcmVxdWVzdF9wdXQocnEp
OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaWd0X3V0aWxz
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaWd0X3V0aWxzLmMKbmV3IGZpbGUg
bW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5mYWY2OGE2NDlkYTYKLS0tIC9kZXYvbnVs
bAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaWd0X3V0aWxzLmMKQEAgLTAs
MCArMSw0NCBAQAorLyoKKyAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKKyAqCisgKiBD
b3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpbmNsdWRlIDxsaW51
eC9qaWZmaWVzLmg+CisjaW5jbHVkZSA8bGludXgvbG9nMi5oPgorCisjaW5jbHVkZSAiZ3QvaW50
ZWxfZW5naW5lLmgiCisjaW5jbHVkZSAiaTkxNV9kcnYuaCIgLyogZm9yX2VhY2hfZW5naW5lX21h
c2tlZCgpICovCisjaW5jbHVkZSAiaTkxNV9yZXF1ZXN0LmgiCisjaW5jbHVkZSAiaWd0X3V0aWxz
LmgiCisKK3Vuc2lnbmVkIGxvbmcgaWd0X3JlcXVlc3RfdGltZW91dChzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUsCisJCQkJICB1bnNpZ25lZCBpbnQgZmFjdG9yKQoreworCXVuc2lnbmVk
IGxvbmcgYmFzZTsKKworCWlmIChpc19wb3dlcl9vZl8yKGVuZ2luZS0+bWFzaykpIHsKKwkJYmFz
ZSA9IGV3bWFfZGVsYXlfcmVhZCgmZW5naW5lLT5kZWxheSk7CisJfSBlbHNlIHsKKwkJaW50ZWxf
ZW5naW5lX21hc2tfdCBtYXNrID0gZW5naW5lLT5tYXNrLCB0bXA7CisJCXVuc2lnbmVkIGludCBu
ID0gMDsKKworCQliYXNlID0gMDsKKwkJZm9yX2VhY2hfZW5naW5lX21hc2tlZChlbmdpbmUsIGVu
Z2luZS0+Z3QsIG1hc2ssIHRtcCkKKwkJCWJhc2UgKz0gZXdtYV9kZWxheV9yZWFkKCZlbmdpbmUt
PmRlbGF5KSwgbisrOworCQliYXNlIC89IG47CisJfQorCisJaWYgKGZhY3RvcikKKwkJYmFzZSAq
PSBmYWN0b3IgKiAxMDsKKworCXJldHVybiB1c2Vjc190b19qaWZmaWVzKGJhc2UpICsgMTsKK30K
KworaW50IGlndF9yZXF1ZXN0X3dhaXQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCisJCSAgICAg
dW5zaWduZWQgaW50IGZsYWdzLAorCQkgICAgIHVuc2lnbmVkIGludCBmYWN0b3IpCit7CisJcmV0
dXJuIGk5MTVfcmVxdWVzdF93YWl0KHJxLCBmbGFncywKKwkJCQkgaWd0X3JlcXVlc3RfdGltZW91
dChycS0+ZW5naW5lLCBmYWN0b3IpKTsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L3NlbGZ0ZXN0cy9pZ3RfdXRpbHMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0
cy9pZ3RfdXRpbHMuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmI5
MmZkMWI1MTFkZQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0
ZXN0cy9pZ3RfdXRpbHMuaApAQCAtMCwwICsxLDIwIEBACisvKgorICogU1BEWC1MaWNlbnNlLUlk
ZW50aWZpZXI6IE1JVAorICoKKyAqIENvcHlyaWdodCDCqSAyMDE5IEludGVsIENvcnBvcmF0aW9u
CisgKi8KKworI2lmbmRlZiBfX0k5MTVfU0VMRlRFU1RTX0lHVF9VVElMU19IX18KKyNkZWZpbmUg
X19JOTE1X1NFTEZURVNUU19JR1RfVVRJTFNfSF9fCisKK3N0cnVjdCBpbnRlbF9lbmdpbmVfY3M7
CitzdHJ1Y3QgaTkxNV9yZXF1ZXN0OworCit1bnNpZ25lZCBsb25nIGlndF9yZXF1ZXN0X3RpbWVv
dXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAorCQkJCSAgdW5zaWduZWQgaW50IGZh
Y3Rvcik7CisKK2ludCBpZ3RfcmVxdWVzdF93YWl0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAor
CQkgICAgIHVuc2lnbmVkIGludCBmbGFncywKKwkJICAgICB1bnNpZ25lZCBpbnQgZmFjdG9yKTsK
KworI2VuZGlmIC8qIF9fSTkxNV9TRUxGVEVTVFNfSUdUX1VUSUxTX0hfXyAqLwotLSAKMi4yNC4w
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1n
ZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

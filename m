Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6A4633B8748
	for <lists+intel-gfx@lfdr.de>; Wed, 30 Jun 2021 18:54:49 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C6C686EA51;
	Wed, 30 Jun 2021 16:54:47 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-qk1-x72b.google.com (mail-qk1-x72b.google.com
 [IPv6:2607:f8b0:4864:20::72b])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 94AA46EA51;
 Wed, 30 Jun 2021 16:54:46 +0000 (UTC)
Received: by mail-qk1-x72b.google.com with SMTP id b2so3111987qka.7;
 Wed, 30 Jun 2021 09:54:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=Nv/sfFdXK4pjU9qCxCDHMjLejOMZRWYWsYHchTSu3x8=;
 b=pxkUnlR9ilrQhUXsYfhC5Jnpnx1sxIz1rzNZ58ERVmC1uxckL1me/2n4meOmwH40Sq
 cZn/G76Nz2cMsvL7WW14Do0UoO6Y2K9iXDQn8RpvYQCUU3yLjovEISdYVQbUSluqwZDE
 Dg595mq/QpCu79gD/pei/z5mcmIlSXNY3QVDaFc4mel9e1dua00GRPys3uY7x9ivoLxD
 bsGVCMj2uYABhY8z/TFadn26jl/3notgPBqHYO/12Cz1pU+tTpykZPDsfBEvFHl3xcij
 NnNGCuqaH1UlWRY7cyGxcCBUY93rhhgcoOxYK2m62FxDuNfFCN45vXNOK8NID5cypbMl
 xLwA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=Nv/sfFdXK4pjU9qCxCDHMjLejOMZRWYWsYHchTSu3x8=;
 b=AUbObT3eoOZI7INb8Cn50m+p2T4gJwofA0zN0K8XvZglX3FcQpQxz8Jc5SpDFfXDMc
 NX9ND3knlHxkB0xkedwHqGmsmVqAknGYKkRq8wU8XvvvaT37Z+wuYSatYr+9R7qQIAHU
 immQ6/TSDhoL0jhf1tv8xp7/r71MmBSEJtn5MegGRaBkDCGaK5VdBwxDoU+aokIYnVcL
 iHus9iNdTfOzkm75frqQMw1+NwktRT+r/Fc99lgtgxTtbkryjQIIrP/HIbJOsdGg4dps
 11/R1iyyZnLjXQLehXPuK+xHZ23KfEQaaDcUX+Ut1rCpXHo5AvOrI0DcHHpOvA1lPc7g
 hUzQ==
X-Gm-Message-State: AOAM530mJQ0cFV2PPqW9EFs1gruZemTVhYTDqABYpx0uZQ+f4QawBpCB
 Y6h0WxkEIuUd/5ZriLmXJ7iPMR782B4mGkQTX8pR2m0clOzFFA==
X-Google-Smtp-Source: ABdhPJyZqwmpuOBX3ejh7V1fi+OtOygYG6krV/XWHOrsRUEjZz1iqZZ/jHDtf/+6Jhj5TNkBeO+KSvCmlue2a/VHBt8=
X-Received: by 2002:a37:4388:: with SMTP id
 q130mr36683137qka.460.1625072085534; 
 Wed, 30 Jun 2021 09:54:45 -0700 (PDT)
MIME-Version: 1.0
References: <20210624193045.5087-1-thomas.hellstrom@linux.intel.com>
 <20210624193045.5087-2-thomas.hellstrom@linux.intel.com>
 <CAM0jSHMbhYs5u7eV-Adjo1d=qB69WNuh-Z1gY-wfH31_=F7czg@mail.gmail.com>
 <7593b3ba63007323679472f5120f7d72a96f71c1.camel@linux.intel.com>
In-Reply-To: <7593b3ba63007323679472f5120f7d72a96f71c1.camel@linux.intel.com>
From: Matthew Auld <matthew.william.auld@gmail.com>
Date: Wed, 30 Jun 2021 17:54:19 +0100
Message-ID: <CAM0jSHNyHH2emeOXS4m6-7cAexD626pkQM_Qa6PP5Q-A6bnsaA@mail.gmail.com>
To: =?UTF-8?Q?Thomas_Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>
Subject: Re: [Intel-gfx] [PATCH 1/2] drm/i915/ttm: Reorganize the ttm move
 code somewhat
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Matthew Auld <matthew.auld@intel.com>,
 ML dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCAzMCBKdW4gMjAyMSBhdCAxNjoyNywgVGhvbWFzIEhlbGxzdHLDtm0KPHRob21hcy5o
ZWxsc3Ryb21AbGludXguaW50ZWwuY29tPiB3cm90ZToKPgo+IE9uIFdlZCwgMjAyMS0wNi0zMCBh
dCAxNToxOSArMDEwMCwgTWF0dGhldyBBdWxkIHdyb3RlOgo+ID4gT24gVGh1LCAyNCBKdW4gMjAy
MSBhdCAyMDozMSwgVGhvbWFzIEhlbGxzdHLDtm0KPiA+IDx0aG9tYXMuaGVsbHN0cm9tQGxpbnV4
LmludGVsLmNvbT4gd3JvdGU6Cj4gPiA+Cj4gPiA+IEluIG9yZGVyIHRvIG1ha2UgdGhlIGNvZGUg
YSBiaXQgbW9yZSByZWFkYWJsZSBhbmQgdG8gZmFjaWxpdGF0ZQo+ID4gPiBhc3luYyBtZW1jcHkg
bW92ZXMsIHJlb3JnYW5pemUgdGhlIG1vdmUgY29kZSBhIGxpdHRsZS4gRGV0ZXJtaW5lCj4gPiA+
IGF0IGFuIGVhcmx5IHN0YWdlIHdoZXRoZXIgdG8gY29weSBvciB0byBjbGVhci4KPiA+ID4KPiA+
ID4gU2lnbmVkLW9mZi1ieTogVGhvbWFzIEhlbGxzdHLDtm0gPHRob21hcy5oZWxsc3Ryb21AbGlu
dXguaW50ZWwuY29tPgo+ID4gPiAtLS0KPiA+ID4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV90dG0uYyB8IDcwICsrKysrKysrKysrKysrLS0tLS0tLQo+ID4gPiAtLS0tCj4gPiA+
ICAxIGZpbGUgY2hhbmdlZCwgNDAgaW5zZXJ0aW9ucygrKSwgMzAgZGVsZXRpb25zKC0pCj4gPiA+
Cj4gPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdHRt
LmMKPiA+ID4gYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdHRtLmMKPiA+ID4g
aW5kZXggYzM5ZDk4MmM0ZmE2Li40ZTUyOWFkY2RmYzcgMTAwNjQ0Cj4gPiA+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90dG0uYwo+ID4gPiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdHRtLmMKPiA+ID4gQEAgLTQzMSw2ICs0MzEsNyBAQCBp
OTE1X3R0bV9yZXNvdXJjZV9nZXRfc3Qoc3RydWN0Cj4gPiA+IGRybV9pOTE1X2dlbV9vYmplY3Qg
Km9iaiwKPiA+ID4gIH0KPiA+ID4KPiA+ID4gIHN0YXRpYyBpbnQgaTkxNV90dG1fYWNjZWxfbW92
ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+ID4gPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgYm9vbCBjbGVhciwKPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0cnVjdCB0dG1fcmVzb3VyY2UgKmRzdF9tZW0sCj4gPiA+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzdHJ1Y3Qgc2dfdGFibGUgKmRzdF9zdCkKPiA+ID4gIHsKPiA+ID4gQEAg
LTQ0OSwxMyArNDUwLDEwIEBAIHN0YXRpYyBpbnQgaTkxNV90dG1fYWNjZWxfbW92ZShzdHJ1Y3QK
PiA+ID4gdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+ID4gPiAgICAgICAgICAgICAgICAgcmV0dXJu
IC1FSU5WQUw7Cj4gPiA+Cj4gPiA+ICAgICAgICAgZHN0X2xldmVsID0gaTkxNV90dG1fY2FjaGVf
bGV2ZWwoaTkxNSwgZHN0X21lbSwgdHRtKTsKPiA+ID4gLSAgICAgICBpZiAoIXR0bSB8fCAhdHRt
X3R0X2lzX3BvcHVsYXRlZCh0dG0pKSB7Cj4gPiA+ICsgICAgICAgaWYgKGNsZWFyKSB7Cj4gPiA+
ICAgICAgICAgICAgICAgICBpZiAoYm8tPnR5cGUgPT0gdHRtX2JvX3R5cGVfa2VybmVsKQo+ID4g
PiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiA+Cj4gPiBXYXMgdGhh
dCBtZWFudCB0byBiZToKPiA+IHJldHVybiAwOgo+ID4KPiA+ID8KPiA+Cj4gPiBBbHNvIGRvZXMg
dGhhdCBtZWFuIHdlIGFyZSBpbmNvcnJlY3RseSBmYWxsaW5nIGJhY2sgdG8gbWVtc2V0LCBmb3IK
PiA+IG5vbi11c2Vyc3BhY2Ugb2JqZWN0cywgaW5zdGVhZCBvZiBtYWtpbmcgaXQgYSBub29wPwo+
Cj4gTm8sIHdlJ3JlIGRlbGliZXJhdGVseSBmYWxsaW5nIGJhY2sgdG8gbWVtc2V0IGZvciBub24t
dXNlcnNwYWNlCj4gb2JqZWN0cywgYnV0IHRoZSBsb2dpYyBvbmx5IG1lbXNldHMgaW4gdGhlIEJP
X0FMTE9DX0NQVV9DTEVBUiBjYXNlIGlmCj4gZXZlcnl0aGluZyBpcyBpbXBsZW1lbnRlZCBjb3Jy
ZWN0bHkuCj4KPiA+Cj4gPiA+Cj4gPiA+IC0gICAgICAgICAgICAgICBpZiAodHRtICYmICEodHRt
LT5wYWdlX2ZsYWdzICYKPiA+ID4gVFRNX1BBR0VfRkxBR19aRVJPX0FMTE9DKSkKPiA+ID4gLSAg
ICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4gPiA+IC0KPiA+ID4gICAgICAgICAgICAg
ICAgIGludGVsX2VuZ2luZV9wbV9nZXQoaTkxNS0+Z3QubWlncmF0ZS5jb250ZXh0LQo+ID4gPiA+
ZW5naW5lKTsKPiA+ID4gICAgICAgICAgICAgICAgIHJldCA9IGludGVsX2NvbnRleHRfbWlncmF0
ZV9jbGVhcihpOTE1LQo+ID4gPiA+Z3QubWlncmF0ZS5jb250ZXh0LCBOVUxMLAo+ID4gPiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzdF9zdC0+c2ds
LAo+ID4gPiBkc3RfbGV2ZWwsCj4gPiA+IEBAIC00ODksMjcgKzQ4Nyw1MyBAQCBzdGF0aWMgaW50
IGk5MTVfdHRtX2FjY2VsX21vdmUoc3RydWN0Cj4gPiA+IHR0bV9idWZmZXJfb2JqZWN0ICpibywK
PiA+ID4gICAgICAgICByZXR1cm4gcmV0Owo+ID4gPiAgfQo+ID4gPgo+ID4gPiAtc3RhdGljIGlu
dCBpOTE1X3R0bV9tb3ZlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sIGJvb2wgZXZpY3Qs
Cj4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHgg
KmN0eCwKPiA+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB0dG1fcmVzb3VyY2Ug
KmRzdF9tZW0sCj4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX3BsYWNl
ICpob3ApCj4gPiA+ICtzdGF0aWMgdm9pZCBfX2k5MTVfdHRtX21vdmUoc3RydWN0IHR0bV9idWZm
ZXJfb2JqZWN0ICpibywgYm9vbAo+ID4gPiBjbGVhciwKPiA+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHN0cnVjdCB0dG1fcmVzb3VyY2UgKmRzdF9tZW0sCj4gPiA+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3Qgc2dfdGFibGUgKmRzdF9zdCkKPiA+ID4gIHsKPiA+ID4g
ICAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0gaTkxNV90dG1fdG9fZ2Vt
KGJvKTsKPiA+ID4gLSAgICAgICBzdHJ1Y3QgdHRtX3Jlc291cmNlX21hbmFnZXIgKmRzdF9tYW4g
PQo+ID4gPiAtICAgICAgICAgICAgICAgdHRtX21hbmFnZXJfdHlwZShiby0+YmRldiwgZHN0X21l
bS0+bWVtX3R5cGUpOwo+ID4gPiAgICAgICAgIHN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICpk
c3RfcmVnLCAqc3JjX3JlZzsKPiA+ID4gICAgICAgICB1bmlvbiB7Cj4gPiA+ICAgICAgICAgICAg
ICAgICBzdHJ1Y3QgdHRtX2ttYXBfaXRlcl90dCB0dDsKPiA+ID4gICAgICAgICAgICAgICAgIHN0
cnVjdCB0dG1fa21hcF9pdGVyX2lvbWFwIGlvOwo+ID4gPiAgICAgICAgIH0gX2RzdF9pdGVyLCBf
c3JjX2l0ZXI7Cj4gPiA+ICAgICAgICAgc3RydWN0IHR0bV9rbWFwX2l0ZXIgKmRzdF9pdGVyLCAq
c3JjX2l0ZXI7Cj4gPiA+IC0gICAgICAgc3RydWN0IHNnX3RhYmxlICpkc3Rfc3Q7Cj4gPiA+ICAg
ICAgICAgaW50IHJldDsKPiA+ID4KPiA+ID4gICAgICAgICBkc3RfcmVnID0gaTkxNV90dG1fcmVn
aW9uKGJvLT5iZGV2LCBkc3RfbWVtLT5tZW1fdHlwZSk7Cj4gPiA+ICAgICAgICAgc3JjX3JlZyA9
IGk5MTVfdHRtX3JlZ2lvbihiby0+YmRldiwgYm8tPnJlc291cmNlLQo+ID4gPiA+bWVtX3R5cGUp
Owo+ID4gPiAgICAgICAgIEdFTV9CVUdfT04oIWRzdF9yZWcgfHwgIXNyY19yZWcpOwo+ID4gPgo+
ID4gPiArICAgICAgIHJldCA9IGk5MTVfdHRtX2FjY2VsX21vdmUoYm8sIGNsZWFyLCBkc3RfbWVt
LCBkc3Rfc3QpOwo+ID4gPiArICAgICAgIGlmIChyZXQpIHsKPiA+Cj4gPiBPbmUgZnV0dXJlIGNv
bnNpZGVyYXRpb24gaXMgZmxhdCBDQ1Mgd2hlcmUgSSBkb24ndCB0aGluayB3ZSBjYW4KPiA+IGVh
c2lseQo+ID4gZmFsbCBiYWNrIHRvIG1lbWNweSBmb3IgdXNlcnNwYWNlIG9iamVjdHMuIE1heWJl
IHdlIGNhbiBtYWtlIHRoaXMKPiA+IGZhbGxiYWNrIGNvbmRpdGlvbmFsIG9uIERHMSBvciAhQUxM
T0NfVVNFUiBmb3Igbm93LCBvciBqdXN0IGFkZCBhCj4gPiBUT0RPPwo+Cj4gVWdoLiBJcyB0aGF0
IHRydWUgZm9yIGJvdGggY2xlYXJpbmcgYW5kIGNvcHlpbmcsIG9yIGlzIGl0IG9ubHkgY29weWlu
Zz8KCldpdGggY2xlYXJpbmcgSSB0aGluayB3ZSBhcmUgcmVxdWlyZWQgdG8gbnVrZSB0aGUgYXV4
IENDUyBzdGF0ZSB1c2luZwpzb21lIHNwZWNpYWwgYmxpdHRlciBjb21tYW5kLgoKRm9yIGNvcHlp
bmcvbW92aW5nIEkgdGhpbmsgaXQncyBhIHNpbWlsYXIgc3RvcnksIHdoZXJlIHNwZWNpYWwgY2Fy
ZQptaWdodCBiZSBuZWVkZWQgZm9yIHRoZSBhdXggc3RhdGUsIHdoaWNoIGxpa2VseSByZXF1aXJl
cyB0aGUgYmxpdHRlci4KQWx0aG91Z2ggdGJoIEkgZG9uJ3QgcmVhbGx5IHJlbWVtYmVyIGFsbCB0
aGUgZGV0YWlscy4KCj4KPiBQcm9ibGVtIGlzIGlmIHdlIGhpdCBhbiBlbmdpbmUgcmVzZXQgYW5k
IGZlbmNlIGVycm9yIGR1cmluZyBpbml0aWFsCj4gY2xlYXJpbmcgLyBzd2FwaW4sIHRoZSBwbGFu
IG1vdmluZyBmb3J3YXJkIGlzIHRvIGludGVyY2VwdCB0aGF0IGFuZAo+IHJlc29ydCB0byBjcHUg
Y2xlYXJpbmcgLyBjb3B5aW5nIGZvciBzZWN1cml0eSByZWFzb25zLiBJbiB0aGUgd29yc3QKPiBj
YXNlIHdlIGF0IGxlYXN0IG5lZWQgdG8gYmUgYWJsZSB0byBjbGVhci4KPgo+IC9UaG9tYXMKPgo+
Cj4gPgo+ID4gPiArICAgICAgICAgICAgICAgZHN0X2l0ZXIgPSAhY3B1X21hcHNfaW9tZW0oZHN0
X21lbSkgPwo+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICB0dG1fa21hcF9pdGVyX3R0X2lu
aXQoJl9kc3RfaXRlci50dCwgYm8tCj4gPiA+ID50dG0pIDoKPiA+ID4gKyAgICAgICAgICAgICAg
ICAgICAgICAgdHRtX2ttYXBfaXRlcl9pb21hcF9pbml0KCZfZHN0X2l0ZXIuaW8sCj4gPiA+ICZk
c3RfcmVnLT5pb21hcCwKPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGRzdF9zdCwgZHN0X3JlZy0KPiA+ID4gPnJlZ2lvbi5zdGFydCk7Cj4gPiA+
ICsKPiA+ID4gKyAgICAgICAgICAgICAgIHNyY19pdGVyID0gIWNwdV9tYXBzX2lvbWVtKGJvLT5y
ZXNvdXJjZSkgPwo+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICB0dG1fa21hcF9pdGVyX3R0
X2luaXQoJl9zcmNfaXRlci50dCwgYm8tCj4gPiA+ID50dG0pIDoKPiA+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgdHRtX2ttYXBfaXRlcl9pb21hcF9pbml0KCZfc3JjX2l0ZXIuaW8sCj4gPiA+
ICZzcmNfcmVnLT5pb21hcCwKPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIG9iai0KPiA+ID4gPnR0bS5jYWNoZWRfaW9fc3QsCj4gPiA+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNfcmVnLQo+ID4g
PiA+cmVnaW9uLnN0YXJ0KTsKPiA+ID4gKwo+ID4gPiArICAgICAgICAgICAgICAgdHRtX21vdmVf
bWVtY3B5KGJvLCBkc3RfbWVtLT5udW1fcGFnZXMsIGRzdF9pdGVyLAo+ID4gPiBzcmNfaXRlcik7
Cj4gPiA+ICsgICAgICAgfQo+ID4gPiArfQo+ID4gPiArCj4gPiA+ICtzdGF0aWMgaW50IGk5MTVf
dHRtX21vdmUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywgYm9vbCBldmljdCwKPiA+ID4g
KyAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB0dG1fb3BlcmF0aW9uX2N0eCAqY3R4LAo+
ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHR0bV9yZXNvdXJjZSAqZHN0X21l
bSwKPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB0dG1fcGxhY2UgKmhvcCkK
PiA+ID4gK3sKPiA+ID4gKyAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0g
aTkxNV90dG1fdG9fZ2VtKGJvKTsKPiA+ID4gKyAgICAgICBzdHJ1Y3QgdHRtX3Jlc291cmNlX21h
bmFnZXIgKmRzdF9tYW4gPQo+ID4gPiArICAgICAgICAgICAgICAgdHRtX21hbmFnZXJfdHlwZShi
by0+YmRldiwgZHN0X21lbS0+bWVtX3R5cGUpOwo+ID4gPiArICAgICAgIHN0cnVjdCB0dG1fdHQg
KnR0bSA9IGJvLT50dG07Cj4gPiA+ICsgICAgICAgc3RydWN0IHNnX3RhYmxlICpkc3Rfc3Q7Cj4g
PiA+ICsgICAgICAgYm9vbCBjbGVhcjsKPiA+ID4gKyAgICAgICBpbnQgcmV0Owo+ID4gPiArCj4g
PiA+ICAgICAgICAgLyogU3luYyBmb3Igbm93LiBXZSBjb3VsZCBkbyB0aGUgYWN0dWFsIGNvcHkg
YXN5bmMuICovCj4gPiA+ICAgICAgICAgcmV0ID0gdHRtX2JvX3dhaXRfY3R4KGJvLCBjdHgpOwo+
ID4gPiAgICAgICAgIGlmIChyZXQpCj4gPiA+IEBAIC01MjYsOSArNTUwLDggQEAgc3RhdGljIGlu
dCBpOTE1X3R0bV9tb3ZlKHN0cnVjdAo+ID4gPiB0dG1fYnVmZmVyX29iamVjdCAqYm8sIGJvb2wg
ZXZpY3QsCj4gPiA+ICAgICAgICAgfQo+ID4gPgo+ID4gPiAgICAgICAgIC8qIFBvcHVsYXRlIHR0
bSB3aXRoIHBhZ2VzIGlmIG5lZWRlZC4gVHlwaWNhbGx5IHN5c3RlbQo+ID4gPiBtZW1vcnkuICov
Cj4gPiA+IC0gICAgICAgaWYgKGJvLT50dG0gJiYgKGRzdF9tYW4tPnVzZV90dCB8fAo+ID4gPiAt
ICAgICAgICAgICAgICAgICAgICAgICAoYm8tPnR0bS0+cGFnZV9mbGFncyAmCj4gPiA+IFRUTV9Q
QUdFX0ZMQUdfU1dBUFBFRCkpKSB7Cj4gPiA+IC0gICAgICAgICAgICAgICByZXQgPSB0dG1fdHRf
cG9wdWxhdGUoYm8tPmJkZXYsIGJvLT50dG0sIGN0eCk7Cj4gPiA+ICsgICAgICAgaWYgKHR0bSAm
JiAoZHN0X21hbi0+dXNlX3R0IHx8ICh0dG0tPnBhZ2VfZmxhZ3MgJgo+ID4gPiBUVE1fUEFHRV9G
TEFHX1NXQVBQRUQpKSkgewo+ID4gPiArICAgICAgICAgICAgICAgcmV0ID0gdHRtX3R0X3BvcHVs
YXRlKGJvLT5iZGV2LCB0dG0sIGN0eCk7Cj4gPiA+ICAgICAgICAgICAgICAgICBpZiAocmV0KQo+
ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4gPiAgICAgICAgIH0K
PiA+ID4gQEAgLTUzNywyMyArNTYwLDEwIEBAIHN0YXRpYyBpbnQgaTkxNV90dG1fbW92ZShzdHJ1
Y3QKPiA+ID4gdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBib29sIGV2aWN0LAo+ID4gPiAgICAgICAg
IGlmIChJU19FUlIoZHN0X3N0KSkKPiA+ID4gICAgICAgICAgICAgICAgIHJldHVybiBQVFJfRVJS
KGRzdF9zdCk7Cj4gPiA+Cj4gPiA+IC0gICAgICAgcmV0ID0gaTkxNV90dG1fYWNjZWxfbW92ZShi
bywgZHN0X21lbSwgZHN0X3N0KTsKPiA+ID4gLSAgICAgICBpZiAocmV0KSB7Cj4gPiA+IC0gICAg
ICAgICAgICAgICAvKiBJZiB3ZSBzdGFydCBtYXBwaW5nIEdHVFQsIHdlIGNhbiBubyBsb25nZXIg
dXNlCj4gPiA+IG1hbjo6dXNlX3R0IGhlcmUuICovCj4gPiA+IC0gICAgICAgICAgICAgICBkc3Rf
aXRlciA9ICFjcHVfbWFwc19pb21lbShkc3RfbWVtKSA/Cj4gPiA+IC0gICAgICAgICAgICAgICAg
ICAgICAgIHR0bV9rbWFwX2l0ZXJfdHRfaW5pdCgmX2RzdF9pdGVyLnR0LCBiby0KPiA+ID4gPnR0
bSkgOgo+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICB0dG1fa21hcF9pdGVyX2lvbWFwX2lu
aXQoJl9kc3RfaXRlci5pbywKPiA+ID4gJmRzdF9yZWctPmlvbWFwLAo+ID4gPiAtICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0X3N0LCBkc3RfcmVnLQo+
ID4gPiA+cmVnaW9uLnN0YXJ0KTsKPiA+ID4gLQo+ID4gPiAtICAgICAgICAgICAgICAgc3JjX2l0
ZXIgPSAhY3B1X21hcHNfaW9tZW0oYm8tPnJlc291cmNlKSA/Cj4gPiA+IC0gICAgICAgICAgICAg
ICAgICAgICAgIHR0bV9rbWFwX2l0ZXJfdHRfaW5pdCgmX3NyY19pdGVyLnR0LCBiby0KPiA+ID4g
PnR0bSkgOgo+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICB0dG1fa21hcF9pdGVyX2lvbWFw
X2luaXQoJl9zcmNfaXRlci5pbywKPiA+ID4gJnNyY19yZWctPmlvbWFwLAo+ID4gPiAtICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLQo+ID4gPiA+dHRt
LmNhY2hlZF9pb19zdCwKPiA+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHNyY19yZWctCj4gPiA+ID5yZWdpb24uc3RhcnQpOwo+ID4gPiArICAgICAg
IGNsZWFyID0gIWNwdV9tYXBzX2lvbWVtKGJvLT5yZXNvdXJjZSkgJiYgKCF0dG0gfHwKPiA+ID4g
IXR0bV90dF9pc19wb3B1bGF0ZWQodHRtKSk7Cj4gPiA+ICsgICAgICAgaWYgKCEoY2xlYXIgJiYg
dHRtICYmICEodHRtLT5wYWdlX2ZsYWdzICYKPiA+ID4gVFRNX1BBR0VfRkxBR19aRVJPX0FMTE9D
KSkpCj4gPgo+ID4gU2VlbXMgcXVpdGUgaGFyZCB0byByZWFkPwo+ID4KPiA+IFJldmlld2VkLWJ5
OiBNYXR0aGV3IEF1bGQgPG1hdHRoZXcuYXVsZEBpbnRlbC5jb20+Cj4gPgo+ID4KPiA+ID4gKyAg
ICAgICAgICAgICAgIF9faTkxNV90dG1fbW92ZShibywgY2xlYXIsIGRzdF9tZW0sIGRzdF9zdCk7
Cj4gPiA+Cj4gPiA+IC0gICAgICAgICAgICAgICB0dG1fbW92ZV9tZW1jcHkoYm8sIGRzdF9tZW0t
Pm51bV9wYWdlcywgZHN0X2l0ZXIsCj4gPiA+IHNyY19pdGVyKTsKPiA+ID4gLSAgICAgICB9Cj4g
PiA+IC0gICAgICAgLyogQmVsb3cgZHN0X21lbSBiZWNvbWVzIGJvLT5yZXNvdXJjZS4gKi8KPiA+
ID4gICAgICAgICB0dG1fYm9fbW92ZV9zeW5jX2NsZWFudXAoYm8sIGRzdF9tZW0pOwo+ID4gPiAg
ICAgICAgIGk5MTVfdHRtX2FkanVzdF9kb21haW5zX2FmdGVyX21vdmUob2JqKTsKPiA+ID4gICAg
ICAgICBpOTE1X3R0bV9mcmVlX2NhY2hlZF9pb19zdChvYmopOwo+ID4gPiAtLQo+ID4gPiAyLjMx
LjEKPiA+ID4KPgo+Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9y
ZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdm
eAo=

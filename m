Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 640CC3A2D9B
	for <lists+intel-gfx@lfdr.de>; Thu, 10 Jun 2021 15:59:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A1F076ED34;
	Thu, 10 Jun 2021 13:59:16 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-yb1-xb2c.google.com (mail-yb1-xb2c.google.com
 [IPv6:2607:f8b0:4864:20::b2c])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 14EF66ED6B
 for <intel-gfx@lists.freedesktop.org>; Thu, 10 Jun 2021 13:59:15 +0000 (UTC)
Received: by mail-yb1-xb2c.google.com with SMTP id n133so40939319ybf.6
 for <intel-gfx@lists.freedesktop.org>; Thu, 10 Jun 2021 06:59:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=jlekstrand-net.20150623.gappssmtp.com; s=20150623;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=vz88TG2t3wHyHeHSsfk4XrpWiwqZ6jeUeTjx+9bno9Q=;
 b=J2oDJRyUK6lsyWJdmXmHIRRIyctFK+q0ttIfn/P7XdwzBUeWVCGRRU7AXn395A/fWX
 uy+m5mGiOiabDoGhSQg7kySuwXeTqPIde4NgotHjAyENTHSzR4YvGo2v5JwnepDzVCGg
 twoA7Dx0/mOcl37gC6UJliBuDw9P9sE99ZxPi4wHpnrHhtAZtqHpBzJ2ILe+RPvC+bA3
 PMuEu8FZaSpHV6s73VreAfqWqM3/OIcyB8e37mB7n+ieZAo9q3pl2HdiPKcjAjVx71ia
 hJP31TT3a9XDw7LxL6JG3ZuUruLzhjTYFL9FDqUEWak3d7PWie9ChinEQ2r3R101uw1F
 F0PA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=vz88TG2t3wHyHeHSsfk4XrpWiwqZ6jeUeTjx+9bno9Q=;
 b=Y97WEJst386h+JLhdUCxz5M/1ez4SKiO/9q0zXqEf9O7Wjw94EECMyaieu7RuLzAE2
 h/e5ZoiLwcCxjCHzrNjQZ2SoFZStKuiV2Qx9/boOwUvU2BN0rQrg2r3mNpYMx3/GWMWW
 YUygrCzvNHgVIPEQJElm4yRGgvzxrks+y7hf6EeupSvq6qGwRyKjrZuF9QhKEXCH0eRe
 til2RT9DKN8mkI+Iaj+mbJuGhDLKvTFxDvr6igI6e1n8Jyg2hA1ouQ+BWAvRqWKidWdl
 5OtrQq+6XZGwvpBVrJpHPaGbkelrJ0gPkfD4aVVYQ3N+N1GczHsE9L0LrF+0/b46g6Tj
 1INw==
X-Gm-Message-State: AOAM530lMRfQVUq6J7faYVKEj4CWTtK87yoPm4v225YGdOt9b3yHzKqR
 /P+UzsL6SdRuo44V79bhz9pjy5xdK40W4VpCTWuOqg==
X-Google-Smtp-Source: ABdhPJzoiTM4MToa9/DidIlMjXB/t1IsDNscu7OH2tmdnBFEzox2aTWugVcTtrXOdZGKIKcU2aMa/DqWtaf03O2D008=
X-Received: by 2002:a25:a2c5:: with SMTP id c5mr7481369ybn.432.1623333554134; 
 Thu, 10 Jun 2021 06:59:14 -0700 (PDT)
MIME-Version: 1.0
References: <20210609212959.471209-1-jason@jlekstrand.net>
 <20210609212959.471209-6-jason@jlekstrand.net>
 <ea36431d-521a-c1c0-59e5-a196f55c28dd@amd.com>
In-Reply-To: <ea36431d-521a-c1c0-59e5-a196f55c28dd@amd.com>
From: Jason Ekstrand <jason@jlekstrand.net>
Date: Thu, 10 Jun 2021 08:59:03 -0500
Message-ID: <CAOFGe97+JK9-HLsVrXdvm45Qk721utwpHyy8xpqR7uRCpZm5ig@mail.gmail.com>
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
Subject: Re: [Intel-gfx] [PATCH 5/5] DONOTMERGE: dma-buf: Get rid of
 dma_fence_get_rcu_safe
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel GFX <intel-gfx@lists.freedesktop.org>,
 Matthew Auld <matthew.auld@intel.com>,
 Maling list - DRI developers <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCBKdW4gMTAsIDIwMjEgYXQgMTo1MSBBTSBDaHJpc3RpYW4gS8O2bmlnCjxjaHJpc3Rp
YW4ua29lbmlnQGFtZC5jb20+IHdyb3RlOgo+Cj4gQW0gMDkuMDYuMjEgdW0gMjM6Mjkgc2Nocmll
YiBKYXNvbiBFa3N0cmFuZDoKPiA+IFRoaXMgaGVscGVyIGV4aXN0ZWQgdG8gaGFuZGxlIHRoZSB3
ZWlyZCBjb3JuZXItY2FzZXMgY2F1c2VkIGJ5IHVzaW5nCj4gPiBTTEFCX1RZUEVTQUZFX0JZX1JD
VSBmb3IgYmFja2luZyBkbWFfZmVuY2UuICBOb3cgdGhhdCBubyBvbmUgaXMgdXNpbmcKPiA+IHRo
YXQgYW55bW9yZSAoaTkxNSB3YXMgdGhlIG9ubHkgcmVhbCB1c2VyKSwgZG1hX2ZlbmNlX2dldF9y
Y3UgaXMKPiA+IHN1ZmZpY2llbnQuICBUaGUgb25lIHNsaWdodGx5IGFubm95aW5nIHRoaW5nIHdl
IGhhdmUgdG8gZGVhbCB3aXRoIGhlcmUKPiA+IGlzIHRoYXQgZG1hX2ZlbmNlX2dldF9yY3Vfc2Fm
ZSBkaWQgYW4gcmN1X2RlcmVmZXJlbmNlIGFzIHdlbGwgYXMgYQo+ID4gU0xBQl9UWVBFU0FGRV9C
WV9SQ1Utc2FmZSBkbWFfZmVuY2VfZ2V0X3JjdS4gIFRoaXMgbWVhbnMgZWFjaCBjYWxsIHNpdGUK
PiA+IGVuZHMgdXAgYmVpbmcgMyBsaW5lcyBpbnN0ZWFkIG9mIDEuCj4KPiBUaGF0J3MgYW4gb3V0
cmlnaHQgTkFLLgo+Cj4gVGhlIGxvb3AgaW4gZG1hX2ZlbmNlX2dldF9yY3Vfc2FmZSBpcyBuZWNl
c3NhcnkgYmVjYXVzZSB0aGUgdW5kZXJseWluZwo+IGZlbmNlIG9iamVjdCBjYW4gYmUgcmVwbGFj
ZWQgd2hpbGUgdGFraW5nIHRoZSByZWZlcmVuY2UuCgpSaWdodC4gIEkgaGFkIG1pc3NlZCBhIGJp
dCBvZiB0aGF0IHdoZW4gSSBmaXJzdCByZWFkIHRocm91Z2ggaXQuICBJCnNlZSB0aGUgbmVlZCBm
b3IgdGhlIGxvb3Agbm93LiAgQnV0IHRoZXJlIGFyZSBzb21lIG90aGVyIHRyaWNreSBiaXRzCmlu
IHRoZXJlIGJlc2lkZXMganVzdCB0aGUgbG9vcC4KCj4gVGhpcyBpcyBjb21wbGV0ZWx5IHVucmVs
YXRlZCB0byBTTEFCX1RZUEVTQUZFX0JZX1JDVS4gU2VlIHRoZQo+IGRtYV9mZW5jZV9jaGFpbiB1
c2FnZSBmb3IgcmVmZXJlbmNlLgo+Cj4gV2hhdCB5b3UgY2FuIHJlbW92ZSBpcyB0aGUgc2VxdWVu
Y2UgbnVtYmVyIGhhbmRsaW5nIGluIGRtYS1idWYuIFRoYXQKPiBzaG91bGQgbWFrZSBhZGRpbmcg
ZmVuY2VzIHF1aXRlIGEgYml0IHF1aWNrZXIuCgpJJ2xsIGxvb2sgYXQgdGhhdCBhbmQgdHJ5IHRv
IHVuZGVyc3RhbmQgd2hhdCdzIGdvaW5nIG9uIHRoZXJlLgoKLS1KYXNvbgoKPiBSZWdhcmRzLAo+
IENocmlzdGlhbi4KPgo+ID4KPiA+IFNpZ25lZC1vZmYtYnk6IEphc29uIEVrc3RyYW5kIDxqYXNv
bkBqbGVrc3RyYW5kLm5ldD4KPiA+IENjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZm
d2xsLmNoPgo+ID4gQ2M6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNv
bT4KPiA+IENjOiBNYXR0aGV3IEF1bGQgPG1hdHRoZXcuYXVsZEBpbnRlbC5jb20+Cj4gPiBDYzog
TWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KPiA+
IC0tLQo+ID4gICBkcml2ZXJzL2RtYS1idWYvZG1hLWZlbmNlLWNoYWluLmMgICAgICAgICB8ICA4
ICsrLS0KPiA+ICAgZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMgICAgICAgICAgICAgICAgfCAg
NCArLQo+ID4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmVuY2UuYyB8ICA0
ICstCj4gPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfYWN0aXZlLmggICAgICAgIHwgIDQg
Ky0KPiA+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYyAgICAgICAgICAgfCAgNCAr
LQo+ID4gICBpbmNsdWRlL2RybS9kcm1fc3luY29iai5oICAgICAgICAgICAgICAgICB8ICA0ICst
Cj4gPiAgIGluY2x1ZGUvbGludXgvZG1hLWZlbmNlLmggICAgICAgICAgICAgICAgIHwgNTAgLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+ICAgaW5jbHVkZS9saW51eC9kbWEtcmVzdi5oICAgICAg
ICAgICAgICAgICAgfCAgNCArLQo+ID4gICA4IGZpbGVzIGNoYW5nZWQsIDIzIGluc2VydGlvbnMo
KyksIDU5IGRlbGV0aW9ucygtKQo+ID4KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2RtYS1idWYv
ZG1hLWZlbmNlLWNoYWluLmMgYi9kcml2ZXJzL2RtYS1idWYvZG1hLWZlbmNlLWNoYWluLmMKPiA+
IGluZGV4IDdkMTI5ZTY4YWM3MDEuLjQ2ZGZjN2Q5NGQ4ZWQgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2
ZXJzL2RtYS1idWYvZG1hLWZlbmNlLWNoYWluLmMKPiA+ICsrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9k
bWEtZmVuY2UtY2hhaW4uYwo+ID4gQEAgLTE1LDE1ICsxNSwxNyBAQCBzdGF0aWMgYm9vbCBkbWFf
ZmVuY2VfY2hhaW5fZW5hYmxlX3NpZ25hbGluZyhzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSk7Cj4g
PiAgICAqIGRtYV9mZW5jZV9jaGFpbl9nZXRfcHJldiAtIHVzZSBSQ1UgdG8gZ2V0IGEgcmVmZXJl
bmNlIHRvIHRoZSBwcmV2aW91cyBmZW5jZQo+ID4gICAgKiBAY2hhaW46IGNoYWluIG5vZGUgdG8g
Z2V0IHRoZSBwcmV2aW91cyBub2RlIGZyb20KPiA+ICAgICoKPiA+IC0gKiBVc2UgZG1hX2ZlbmNl
X2dldF9yY3Vfc2FmZSB0byBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIHByZXZpb3VzIGZlbmNlIG9m
IHRoZQo+ID4gLSAqIGNoYWluIG5vZGUuCj4gPiArICogVXNlIHJjdV9kZXJlZmVyZW5jZSBhbmQg
ZG1hX2ZlbmNlX2dldF9yY3UgdG8gZ2V0IGEgcmVmZXJlbmNlIHRvIHRoZQo+ID4gKyAqIHByZXZp
b3VzIGZlbmNlIG9mIHRoZSBjaGFpbiBub2RlLgo+ID4gICAgKi8KPiA+ICAgc3RhdGljIHN0cnVj
dCBkbWFfZmVuY2UgKmRtYV9mZW5jZV9jaGFpbl9nZXRfcHJldihzdHJ1Y3QgZG1hX2ZlbmNlX2No
YWluICpjaGFpbikKPiA+ICAgewo+ID4gICAgICAgc3RydWN0IGRtYV9mZW5jZSAqcHJldjsKPiA+
Cj4gPiAgICAgICByY3VfcmVhZF9sb2NrKCk7Cj4gPiAtICAgICBwcmV2ID0gZG1hX2ZlbmNlX2dl
dF9yY3Vfc2FmZSgmY2hhaW4tPnByZXYpOwo+ID4gKyAgICAgcHJldiA9IHJjdV9kZXJlZmVyZW5j
ZShjaGFpbi0+cHJldik7Cj4gPiArICAgICBpZiAocHJldikKPiA+ICsgICAgICAgICAgICAgcHJl
diA9IGRtYV9mZW5jZV9nZXRfcmN1KHByZXYpOwo+ID4gICAgICAgcmN1X3JlYWRfdW5sb2NrKCk7
Cj4gPiAgICAgICByZXR1cm4gcHJldjsKPiA+ICAgfQo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
ZG1hLWJ1Zi9kbWEtcmVzdi5jIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMKPiA+IGluZGV4
IGYyNmM3MTc0N2Q0M2EuLmNmZTBkYjNjY2EyOTIgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2ZXJzL2Rt
YS1idWYvZG1hLXJlc3YuYwo+ID4gKysrIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMKPiA+
IEBAIC0zNzYsNyArMzc2LDkgQEAgaW50IGRtYV9yZXN2X2NvcHlfZmVuY2VzKHN0cnVjdCBkbWFf
cmVzdiAqZHN0LCBzdHJ1Y3QgZG1hX3Jlc3YgKnNyYykKPiA+ICAgICAgICAgICAgICAgZHN0X2xp
c3QgPSBOVUxMOwo+ID4gICAgICAgfQo+ID4KPiA+IC0gICAgIG5ldyA9IGRtYV9mZW5jZV9nZXRf
cmN1X3NhZmUoJnNyYy0+ZmVuY2VfZXhjbCk7Cj4gPiArICAgICBuZXcgPSByY3VfZGVyZWZlcmVu
Y2Uoc3JjLT5mZW5jZV9leGNsKTsKPiA+ICsgICAgIGlmIChuZXcpCj4gPiArICAgICAgICAgICAg
IG5ldyA9IGRtYV9mZW5jZV9nZXRfcmN1KG5ldyk7Cj4gPiAgICAgICByY3VfcmVhZF91bmxvY2so
KTsKPiA+Cj4gPiAgICAgICBzcmNfbGlzdCA9IGRtYV9yZXN2X3NoYXJlZF9saXN0KGRzdCk7Cj4g
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ZlbmNlLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmVuY2UuYwo+ID4gaW5kZXggNzJk
OWI5MmIxNzU0Ny4uMGFlYjYxMTdmMzg5MyAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9mZW5jZS5jCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfZmVuY2UuYwo+ID4gQEAgLTE2MSw3ICsxNjEsOSBAQCBpbnQgYW1kZ3B1
X2ZlbmNlX2VtaXQoc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLCBzdHJ1Y3QgZG1hX2ZlbmNlICoq
ZiwKPiA+ICAgICAgICAgICAgICAgc3RydWN0IGRtYV9mZW5jZSAqb2xkOwo+ID4KPiA+ICAgICAg
ICAgICAgICAgcmN1X3JlYWRfbG9jaygpOwo+ID4gLSAgICAgICAgICAgICBvbGQgPSBkbWFfZmVu
Y2VfZ2V0X3JjdV9zYWZlKHB0cik7Cj4gPiArICAgICAgICAgICAgIG9sZCA9IHJjdV9kZXJlZmVy
ZW5jZSgqcHRyKTsKPiA+ICsgICAgICAgICAgICAgaWYgKG9sZCkKPiA+ICsgICAgICAgICAgICAg
ICAgICAgICBvbGQgPSBkbWFfZmVuY2VfZ2V0X3JjdShvbGQpOwo+ID4gICAgICAgICAgICAgICBy
Y3VfcmVhZF91bmxvY2soKTsKPiA+Cj4gPiAgICAgICAgICAgICAgIGlmIChvbGQpIHsKPiA+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2FjdGl2ZS5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9hY3RpdmUuaAo+ID4gaW5kZXggZDBmZWRhNjhiODc0Zi4uYmQ4OWNm
YzgwNmNhNSAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfYWN0aXZl
LmgKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfYWN0aXZlLmgKPiA+IEBAIC0x
MDMsNyArMTAzLDkgQEAgaTkxNV9hY3RpdmVfZmVuY2VfZ2V0KHN0cnVjdCBpOTE1X2FjdGl2ZV9m
ZW5jZSAqYWN0aXZlKQo+ID4gICAgICAgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7Cj4gPgo+ID4g
ICAgICAgcmN1X3JlYWRfbG9jaygpOwo+ID4gLSAgICAgZmVuY2UgPSBkbWFfZmVuY2VfZ2V0X3Jj
dV9zYWZlKCZhY3RpdmUtPmZlbmNlKTsKPiA+ICsgICAgIGZlbmNlID0gcmN1X2RlcmVmZXJlbmNl
KGFjdGl2ZS0+ZmVuY2UpOwo+ID4gKyAgICAgaWYgKGZlbmNlKQo+ID4gKyAgICAgICAgICAgICBm
ZW5jZSA9IGRtYV9mZW5jZV9nZXRfcmN1KGZlbmNlKTsKPiA+ICAgICAgIHJjdV9yZWFkX3VubG9j
aygpOwo+ID4KPiA+ICAgICAgIHJldHVybiBmZW5jZTsKPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEu
Ywo+ID4gaW5kZXggMGYyMjdmMjhiMjgwMi4uZWQwMzg4ZDk5MTk3ZSAxMDA2NDQKPiA+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmMKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfdm1hLmMKPiA+IEBAIC0zNTEsNyArMzUxLDkgQEAgaW50IGk5MTVfdm1hX3dh
aXRfZm9yX2JpbmQoc3RydWN0IGk5MTVfdm1hICp2bWEpCj4gPiAgICAgICAgICAgICAgIHN0cnVj
dCBkbWFfZmVuY2UgKmZlbmNlOwo+ID4KPiA+ICAgICAgICAgICAgICAgcmN1X3JlYWRfbG9jaygp
Owo+ID4gLSAgICAgICAgICAgICBmZW5jZSA9IGRtYV9mZW5jZV9nZXRfcmN1X3NhZmUoJnZtYS0+
YWN0aXZlLmV4Y2wuZmVuY2UpOwo+ID4gKyAgICAgICAgICAgICBmZW5jZSA9IHJjdV9kZXJlZmVy
ZW5jZSh2bWEtPmFjdGl2ZS5leGNsLmZlbmNlKTsKPiA+ICsgICAgICAgICAgICAgaWYgKGZlbmNl
KQo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGZlbmNlID0gZG1hX2ZlbmNlX2dldF9yY3UoZmVu
Y2UpOwo+ID4gICAgICAgICAgICAgICByY3VfcmVhZF91bmxvY2soKTsKPiA+ICAgICAgICAgICAg
ICAgaWYgKGZlbmNlKSB7Cj4gPiAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gZG1hX2ZlbmNl
X3dhaXQoZmVuY2UsIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsKPiA+IGRpZmYgLS1naXQgYS9pbmNs
dWRlL2RybS9kcm1fc3luY29iai5oIGIvaW5jbHVkZS9kcm0vZHJtX3N5bmNvYmouaAo+ID4gaW5k
ZXggNmNmNzI0M2ExZGM1ZS4uNmM0NWQ1Mjk4OGJjYyAxMDA2NDQKPiA+IC0tLSBhL2luY2x1ZGUv
ZHJtL2RybV9zeW5jb2JqLmgKPiA+ICsrKyBiL2luY2x1ZGUvZHJtL2RybV9zeW5jb2JqLmgKPiA+
IEBAIC0xMDUsNyArMTA1LDkgQEAgZHJtX3N5bmNvYmpfZmVuY2VfZ2V0KHN0cnVjdCBkcm1fc3lu
Y29iaiAqc3luY29iaikKPiA+ICAgICAgIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlOwo+ID4KPiA+
ICAgICAgIHJjdV9yZWFkX2xvY2soKTsKPiA+IC0gICAgIGZlbmNlID0gZG1hX2ZlbmNlX2dldF9y
Y3Vfc2FmZSgmc3luY29iai0+ZmVuY2UpOwo+ID4gKyAgICAgZmVuY2UgPSByY3VfZGVyZWZlcmVu
Y2Uoc3luY29iai0+ZmVuY2UpOwo+ID4gKyAgICAgaWYgKGZlbmNlKQo+ID4gKyAgICAgICAgICAg
ICBmZW5jZSA9IGRtYV9mZW5jZV9nZXRfcmN1KHN5bmNvYmotPmZlbmNlKTsKPiA+ICAgICAgIHJj
dV9yZWFkX3VubG9jaygpOwo+ID4KPiA+ICAgICAgIHJldHVybiBmZW5jZTsKPiA+IGRpZmYgLS1n
aXQgYS9pbmNsdWRlL2xpbnV4L2RtYS1mZW5jZS5oIGIvaW5jbHVkZS9saW51eC9kbWEtZmVuY2Uu
aAo+ID4gaW5kZXggNmZmYjRiMmM2MzcxNS4uZjRhMmFiMmIxYWU0NiAxMDA2NDQKPiA+IC0tLSBh
L2luY2x1ZGUvbGludXgvZG1hLWZlbmNlLmgKPiA+ICsrKyBiL2luY2x1ZGUvbGludXgvZG1hLWZl
bmNlLmgKPiA+IEBAIC0zMDcsNTYgKzMwNyw2IEBAIHN0YXRpYyBpbmxpbmUgc3RydWN0IGRtYV9m
ZW5jZSAqZG1hX2ZlbmNlX2dldF9yY3Uoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCj4gPiAgICAg
ICAgICAgICAgIHJldHVybiBOVUxMOwo+ID4gICB9Cj4gPgo+ID4gLS8qKgo+ID4gLSAqIGRtYV9m
ZW5jZV9nZXRfcmN1X3NhZmUgIC0gYWNxdWlyZSBhIHJlZmVyZW5jZSB0byBhbiBSQ1UgdHJhY2tl
ZCBmZW5jZQo+ID4gLSAqIEBmZW5jZXA6IHBvaW50ZXIgdG8gZmVuY2UgdG8gaW5jcmVhc2UgcmVm
Y291bnQgb2YKPiA+IC0gKgo+ID4gLSAqIEZ1bmN0aW9uIHJldHVybnMgTlVMTCBpZiBubyByZWZj
b3VudCBjb3VsZCBiZSBvYnRhaW5lZCwgb3IgdGhlIGZlbmNlLgo+ID4gLSAqIFRoaXMgZnVuY3Rp
b24gaGFuZGxlcyBhY3F1aXJpbmcgYSByZWZlcmVuY2UgdG8gYSBmZW5jZSB0aGF0IG1heSBiZQo+
ID4gLSAqIHJlYWxsb2NhdGVkIHdpdGhpbiB0aGUgUkNVIGdyYWNlIHBlcmlvZCAoc3VjaCBhcyB3
aXRoIFNMQUJfVFlQRVNBRkVfQllfUkNVKSwKPiA+IC0gKiBzbyBsb25nIGFzIHRoZSBjYWxsZXIg
aXMgdXNpbmcgUkNVIG9uIHRoZSBwb2ludGVyIHRvIHRoZSBmZW5jZS4KPiA+IC0gKgo+ID4gLSAq
IEFuIGFsdGVybmF0aXZlIG1lY2hhbmlzbSBpcyB0byBlbXBsb3kgYSBzZXFsb2NrIHRvIHByb3Rl
Y3QgYSBidW5jaCBvZgo+ID4gLSAqIGZlbmNlcywgc3VjaCBhcyB1c2VkIGJ5IHN0cnVjdCBkbWFf
cmVzdi4gV2hlbiB1c2luZyBhIHNlcWxvY2ssCj4gPiAtICogdGhlIHNlcWxvY2sgbXVzdCBiZSB0
YWtlbiBiZWZvcmUgYW5kIGNoZWNrZWQgYWZ0ZXIgYSByZWZlcmVuY2UgdG8gdGhlCj4gPiAtICog
ZmVuY2UgaXMgYWNxdWlyZWQgKGFzIHNob3duIGhlcmUpLgo+ID4gLSAqCj4gPiAtICogVGhlIGNh
bGxlciBpcyByZXF1aXJlZCB0byBob2xkIHRoZSBSQ1UgcmVhZCBsb2NrLgo+ID4gLSAqLwo+ID4g
LXN0YXRpYyBpbmxpbmUgc3RydWN0IGRtYV9mZW5jZSAqCj4gPiAtZG1hX2ZlbmNlX2dldF9yY3Vf
c2FmZShzdHJ1Y3QgZG1hX2ZlbmNlIF9fcmN1ICoqZmVuY2VwKQo+ID4gLXsKPiA+IC0gICAgIGRv
IHsKPiA+IC0gICAgICAgICAgICAgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7Cj4gPiAtCj4gPiAt
ICAgICAgICAgICAgIGZlbmNlID0gcmN1X2RlcmVmZXJlbmNlKCpmZW5jZXApOwo+ID4gLSAgICAg
ICAgICAgICBpZiAoIWZlbmNlKQo+ID4gLSAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOVUxM
Owo+ID4gLQo+ID4gLSAgICAgICAgICAgICBpZiAoIWRtYV9mZW5jZV9nZXRfcmN1KGZlbmNlKSkK
PiA+IC0gICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPiA+IC0KPiA+IC0gICAgICAgICAg
ICAgLyogVGhlIGF0b21pY19pbmNfbm90X3plcm8oKSBpbnNpZGUgZG1hX2ZlbmNlX2dldF9yY3Uo
KQo+ID4gLSAgICAgICAgICAgICAgKiBwcm92aWRlcyBhIGZ1bGwgbWVtb3J5IGJhcnJpZXIgdXBv
biBzdWNjZXNzIChzdWNoIGFzIG5vdykuCj4gPiAtICAgICAgICAgICAgICAqIFRoaXMgaXMgcGFp
cmVkIHdpdGggdGhlIHdyaXRlIGJhcnJpZXIgZnJvbSBhc3NpZ25pbmcKPiA+IC0gICAgICAgICAg
ICAgICogdG8gdGhlIF9fcmN1IHByb3RlY3RlZCBmZW5jZSBwb2ludGVyIHNvIHRoYXQgaWYgdGhh
dAo+ID4gLSAgICAgICAgICAgICAgKiBwb2ludGVyIHN0aWxsIG1hdGNoZXMgdGhlIGN1cnJlbnQg
ZmVuY2UsIHdlIGtub3cgd2UKPiA+IC0gICAgICAgICAgICAgICogaGF2ZSBzdWNjZXNzZnVsbHkg
YWNxdWlyZSBhIHJlZmVyZW5jZSB0byBpdC4gSWYgaXQgbm8KPiA+IC0gICAgICAgICAgICAgICog
bG9uZ2VyIG1hdGNoZXMsIHdlIGFyZSBob2xkaW5nIGEgcmVmZXJlbmNlIHRvIHNvbWUgb3RoZXIK
PiA+IC0gICAgICAgICAgICAgICogcmVhbGxvY2F0ZWQgcG9pbnRlci4gVGhpcyBpcyBwb3NzaWJs
ZSBpZiB0aGUgYWxsb2NhdG9yCj4gPiAtICAgICAgICAgICAgICAqIGlzIHVzaW5nIGEgZnJlZWxp
c3QgbGlrZSBTTEFCX1RZUEVTQUZFX0JZX1JDVSB3aGVyZSB0aGUKPiA+IC0gICAgICAgICAgICAg
ICogZmVuY2UgcmVtYWlucyB2YWxpZCBmb3IgdGhlIFJDVSBncmFjZSBwZXJpb2QsIGJ1dCBpdAo+
ID4gLSAgICAgICAgICAgICAgKiBtYXkgYmUgcmVhbGxvY2F0ZWQuIFdoZW4gdXNpbmcgc3VjaCBh
bGxvY2F0b3JzLCB3ZSBhcmUKPiA+IC0gICAgICAgICAgICAgICogcmVzcG9uc2libGUgZm9yIGVu
c3VyaW5nIHRoZSByZWZlcmVuY2Ugd2UgZ2V0IGlzIHRvCj4gPiAtICAgICAgICAgICAgICAqIHRo
ZSByaWdodCBmZW5jZSwgYXMgYmVsb3cuCj4gPiAtICAgICAgICAgICAgICAqLwo+ID4gLSAgICAg
ICAgICAgICBpZiAoZmVuY2UgPT0gcmN1X2FjY2Vzc19wb2ludGVyKCpmZW5jZXApKQo+ID4gLSAg
ICAgICAgICAgICAgICAgICAgIHJldHVybiByY3VfcG9pbnRlcl9oYW5kb2ZmKGZlbmNlKTsKPiA+
IC0KPiA+IC0gICAgICAgICAgICAgZG1hX2ZlbmNlX3B1dChmZW5jZSk7Cj4gPiAtICAgICB9IHdo
aWxlICgxKTsKPiA+IC19Cj4gPiAtCj4gPiAgICNpZmRlZiBDT05GSUdfTE9DS0RFUAo+ID4gICBi
b29sIGRtYV9mZW5jZV9iZWdpbl9zaWduYWxsaW5nKHZvaWQpOwo+ID4gICB2b2lkIGRtYV9mZW5j
ZV9lbmRfc2lnbmFsbGluZyhib29sIGNvb2tpZSk7Cj4gPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9s
aW51eC9kbWEtcmVzdi5oIGIvaW5jbHVkZS9saW51eC9kbWEtcmVzdi5oCj4gPiBpbmRleCA1NjJi
ODg1Y2Y5YzNkLi5hMzhjMDIxZjM3OWFmIDEwMDY0NAo+ID4gLS0tIGEvaW5jbHVkZS9saW51eC9k
bWEtcmVzdi5oCj4gPiArKysgYi9pbmNsdWRlL2xpbnV4L2RtYS1yZXN2LmgKPiA+IEBAIC0yNDgs
NyArMjQ4LDkgQEAgZG1hX3Jlc3ZfZ2V0X2V4Y2xfdW5sb2NrZWQoc3RydWN0IGRtYV9yZXN2ICpv
YmopCj4gPiAgICAgICAgICAgICAgIHJldHVybiBOVUxMOwo+ID4KPiA+ICAgICAgIHJjdV9yZWFk
X2xvY2soKTsKPiA+IC0gICAgIGZlbmNlID0gZG1hX2ZlbmNlX2dldF9yY3Vfc2FmZSgmb2JqLT5m
ZW5jZV9leGNsKTsKPiA+ICsgICAgIGZlbmNlID0gcmN1X2RlcmVmZXJlbmNlKG9iai0+ZmVuY2Vf
ZXhjbCk7Cj4gPiArICAgICBpZiAoZmVuY2UpCj4gPiArICAgICAgICAgICAgIGZlbmNlID0gZG1h
X2ZlbmNlX2dldF9yY3UoZmVuY2UpOwo+ID4gICAgICAgcmN1X3JlYWRfdW5sb2NrKCk7Cj4gPgo+
ID4gICAgICAgcmV0dXJuIGZlbmNlOwo+Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2ludGVsLWdmeAo=

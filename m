Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0260C97808
	for <lists+intel-gfx@lfdr.de>; Wed, 21 Aug 2019 13:38:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A293F6E2C4;
	Wed, 21 Aug 2019 11:38:39 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 966B86E2C4
 for <intel-gfx@lists.freedesktop.org>; Wed, 21 Aug 2019 11:38:37 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18213239-1500050 
 for <intel-gfx@lists.freedesktop.org>; Wed, 21 Aug 2019 12:38:35 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 21 Aug 2019 12:38:33 +0100
Message-Id: <20190821113834.28644-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0.rc1
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 1/2] drm/i915: Replace PIN_NONFAULT with calls to
 PIN_NOEVICT
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2hlbiB1bmRlciBzZXZlcmUgc3RyZXNzIGZvciBHVFQgbWFwcGFibGUgc3BhY2UsIHRoZSBMUlUg
ZXZpY3Rpb24gbW9kZWwKZmFsbHMgb2ZmIGEgY2xpZmYuIFdlIHNwZW5kIGFsbCBvdXIgdGltZSBz
Y2FubmluZyB0aGUgbXVjaCBsYXJnZXIKbm9uLW1hcHBhYmxlIGFyZWEgc2VhcmNoaW5nIGZvciBz
b21ldGhpbmcgd2l0aGluIHRoZSBtYXBwYWJsZSB6b25lIHdlIGNhbgpldmljdC4gVHVybiB0aGlz
IG9uIGl0cyBoZWFkIGJ5IG9ubHkgdXNpbmcgdGhlIGZ1bGwgdm1hIGZvciB0aGUgb2JqZWN0IGlm
Cml0IGlzIGFscmVhZHkgcGlubmVkIGluIHRoZSBtYXBwYWJsZSB6b25lIG9yIHRoZXJlIGlzIHN1
ZmZpY2llbnQgKmZyZWUqCnNwYWNlIHRvIGFjY29tbW9kYXRlIGl0IChwcmlvcml0aXppbmcgc3Bl
ZWR5IHJldXNlKS4gSWYgdGhlcmUgaXMgbm90LAppbW1lZGlhdGVseSBmYWxsIGJhY2sgdG8gdXNp
bmcgc21hbGwgY2h1bmtzICh0aWxlcm93IGZvciBHVFQgbW1hcCwgc2luZ2xlCnBhZ2VzIGZvciBw
d3JpdGUvcmVsb2NhdGlvbikgYW5kIHVzaW5nIHJhbmRvbSBldmljdGlvbiBiZWZvcmUgZG9pbmcg
YSBmdWxsCnNlYXJjaC4KClRlc3RjYXNlOiBpZ3QvZ2VtX2NvbmN1cnJlbnRfYmx0ClJlZmVyZW5j
ZXM6IGh0dHBzOi8vYnVncy5mcmVlZGVza3RvcC5vcmcvc2hvd19idWcuY2dpP2lkPTExMDg0OApT
aWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KUmV2
aWV3ZWQtYnk6IE1hdHRoZXcgQXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jIHwgNCArKy0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5jICAgICAgIHwgOCArKysrLS0tLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyAgICAgICAgICAgICAgICB8IDggKysrKy0t
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2V2aWN0LmMgICAgICAgICAgfCA4IC0t
LS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyAgICAgICAgICAgIHwg
NiArKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5oICAgICAgICAgICAg
fCA2ICsrKy0tLQogNiBmaWxlcyBjaGFuZ2VkLCAxOCBpbnNlcnRpb25zKCspLCAyMiBkZWxldGlv
bnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhl
Y2J1ZmZlci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIu
YwppbmRleCBmMzAyNThlZWJiZDIuLjJkY2EyOTYyYzczYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCkBAIC0xMDM1LDggKzEwMzUsOCBAQCBz
dGF0aWMgdm9pZCAqcmVsb2NfaW9tYXAoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwK
IAogCQl2bWEgPSBpOTE1X2dlbV9vYmplY3RfZ2d0dF9waW4ob2JqLCBOVUxMLCAwLCAwLAogCQkJ
CQkgICAgICAgUElOX01BUFBBQkxFIHwKLQkJCQkJICAgICAgIFBJTl9OT05CTE9DSyB8Ci0JCQkJ
CSAgICAgICBQSU5fTk9ORkFVTFQpOworCQkJCQkgICAgICAgUElOX05PTkJMT0NLIC8qIE5PV0FS
TiAqLyB8CisJCQkJCSAgICAgICBQSU5fTk9FVklDVCk7CiAJCWlmIChJU19FUlIodm1hKSkgewog
CQkJbWVtc2V0KCZjYWNoZS0+bm9kZSwgMCwgc2l6ZW9mKGNhY2hlLT5ub2RlKSk7CiAJCQllcnIg
PSBkcm1fbW1faW5zZXJ0X25vZGVfaW5fcmFuZ2UKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fbW1hbi5jCmluZGV4IDQ4YzJjYmU5YjI3OC4uZGJhNWRkNzc5MTQ5IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmMKQEAgLTI2NCwxNSArMjY0LDE1IEBAIHZt
X2ZhdWx0X3QgaTkxNV9nZW1fZmF1bHQoc3RydWN0IHZtX2ZhdWx0ICp2bWYpCiAJLyogTm93IHBp
biBpdCBpbnRvIHRoZSBHVFQgYXMgbmVlZGVkICovCiAJdm1hID0gaTkxNV9nZW1fb2JqZWN0X2dn
dHRfcGluKG9iaiwgTlVMTCwgMCwgMCwKIAkJCQkgICAgICAgUElOX01BUFBBQkxFIHwKLQkJCQkg
ICAgICAgUElOX05PTkJMT0NLIHwKLQkJCQkgICAgICAgUElOX05PTkZBVUxUKTsKKwkJCQkgICAg
ICAgUElOX05PTkJMT0NLIC8qIE5PV0FSTiAqLyB8CisJCQkJICAgICAgIFBJTl9OT1NFQVJDSCk7
CiAJaWYgKElTX0VSUih2bWEpKSB7CiAJCS8qIFVzZSBhIHBhcnRpYWwgdmlldyBpZiBpdCBpcyBi
aWdnZXIgdGhhbiBhdmFpbGFibGUgc3BhY2UgKi8KIAkJc3RydWN0IGk5MTVfZ2d0dF92aWV3IHZp
ZXcgPQogCQkJY29tcHV0ZV9wYXJ0aWFsX3ZpZXcob2JqLCBwYWdlX29mZnNldCwgTUlOX0NIVU5L
X1BBR0VTKTsKIAkJdW5zaWduZWQgaW50IGZsYWdzOwogCi0JCWZsYWdzID0gUElOX01BUFBBQkxF
OworCQlmbGFncyA9IFBJTl9NQVBQQUJMRSB8IFBJTl9OT1NFQVJDSDsKIAkJaWYgKHZpZXcudHlw
ZSA9PSBJOTE1X0dHVFRfVklFV19OT1JNQUwpCiAJCQlmbGFncyB8PSBQSU5fTk9OQkxPQ0s7IC8q
IGF2b2lkIHdhcm5pbmdzIGZvciBwaW5uZWQgKi8KIApAQCAtMjgyLDcgKzI4Miw3IEBAIHZtX2Zh
dWx0X3QgaTkxNV9nZW1fZmF1bHQoc3RydWN0IHZtX2ZhdWx0ICp2bWYpCiAJCSAqLwogCiAJCXZt
YSA9IGk5MTVfZ2VtX29iamVjdF9nZ3R0X3BpbihvYmosICZ2aWV3LCAwLCAwLCBmbGFncyk7Ci0J
CWlmIChJU19FUlIodm1hKSAmJiAhdmlldy50eXBlKSB7CisJCWlmIChJU19FUlIodm1hKSkgewog
CQkJZmxhZ3MgPSBQSU5fTUFQUEFCTEU7CiAJCQl2aWV3LnR5cGUgPSBJOTE1X0dHVFRfVklFV19Q
QVJUSUFMOwogCQkJdm1hID0gaTkxNV9nZW1fb2JqZWN0X2dndHRfcGluKG9iaiwgJnZpZXcsIDAs
IDAsIGZsYWdzKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCmluZGV4IDIyMDIxZGEyODIzOS4uNjg5
NzY2ODlkNTY5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKQEAgLTM0NSw4ICszNDUsOCBAQCBp
OTE1X2dlbV9ndHRfcHJlYWQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAl3YWtl
cmVmID0gaW50ZWxfcnVudGltZV9wbV9nZXQoJmk5MTUtPnJ1bnRpbWVfcG0pOwogCXZtYSA9IGk5
MTVfZ2VtX29iamVjdF9nZ3R0X3BpbihvYmosIE5VTEwsIDAsIDAsCiAJCQkJICAgICAgIFBJTl9N
QVBQQUJMRSB8Ci0JCQkJICAgICAgIFBJTl9OT05GQVVMVCB8Ci0JCQkJICAgICAgIFBJTl9OT05C
TE9DSyk7CisJCQkJICAgICAgIFBJTl9OT05CTE9DSyAvKiBOT1dBUk4gKi8gfAorCQkJCSAgICAg
ICBQSU5fTk9FVklDVCk7CiAJaWYgKCFJU19FUlIodm1hKSkgewogCQlub2RlLnN0YXJ0ID0gaTkx
NV9nZ3R0X29mZnNldCh2bWEpOwogCQlub2RlLmFsbG9jYXRlZCA9IGZhbHNlOwpAQCAtNTU5LDgg
KzU1OSw4IEBAIGk5MTVfZ2VtX2d0dF9wd3JpdGVfZmFzdChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29i
amVjdCAqb2JqLAogCiAJdm1hID0gaTkxNV9nZW1fb2JqZWN0X2dndHRfcGluKG9iaiwgTlVMTCwg
MCwgMCwKIAkJCQkgICAgICAgUElOX01BUFBBQkxFIHwKLQkJCQkgICAgICAgUElOX05PTkZBVUxU
IHwKLQkJCQkgICAgICAgUElOX05PTkJMT0NLKTsKKwkJCQkgICAgICAgUElOX05PTkJMT0NLIC8q
IE5PV0FSTiAqLyB8CisJCQkJICAgICAgIFBJTl9OT0VWSUNUKTsKIAlpZiAoIUlTX0VSUih2bWEp
KSB7CiAJCW5vZGUuc3RhcnQgPSBpOTE1X2dndHRfb2Zmc2V0KHZtYSk7CiAJCW5vZGUuYWxsb2Nh
dGVkID0gZmFsc2U7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9l
dmljdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZXZpY3QuYwppbmRleCAxNzk2
MzkxYmM1OTguLjUyYzg2YzZlMDY3MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW1fZXZpY3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ldmlj
dC5jCkBAIC02MSw5ICs2MSw2IEBAIG1hcmtfZnJlZShzdHJ1Y3QgZHJtX21tX3NjYW4gKnNjYW4s
CiAJaWYgKGk5MTVfdm1hX2lzX3Bpbm5lZCh2bWEpKQogCQlyZXR1cm4gZmFsc2U7CiAKLQlpZiAo
ZmxhZ3MgJiBQSU5fTk9ORkFVTFQgJiYgaTkxNV92bWFfaGFzX3VzZXJmYXVsdCh2bWEpKQotCQly
ZXR1cm4gZmFsc2U7Ci0KIAlsaXN0X2FkZCgmdm1hLT5ldmljdF9saW5rLCB1bndpbmQpOwogCXJl
dHVybiBkcm1fbW1fc2Nhbl9hZGRfYmxvY2soc2NhbiwgJnZtYS0+bm9kZSk7CiB9CkBAIC0zMzAs
MTEgKzMyNyw2IEBAIGludCBpOTE1X2dlbV9ldmljdF9mb3Jfbm9kZShzdHJ1Y3QgaTkxNV9hZGRy
ZXNzX3NwYWNlICp2bSwKIAkJCWJyZWFrOwogCQl9CiAKLQkJaWYgKGZsYWdzICYgUElOX05PTkZB
VUxUICYmIGk5MTVfdm1hX2hhc191c2VyZmF1bHQodm1hKSkgewotCQkJcmV0ID0gLUVOT1NQQzsK
LQkJCWJyZWFrOwotCQl9Ci0KIAkJLyogT3ZlcmxhcCBvZiBvYmplY3RzIGluIHRoZSBzYW1lIGJh
dGNoPyAqLwogCQlpZiAoaTkxNV92bWFfaXNfcGlubmVkKHZtYSkpIHsKIAkJCXJldCA9IC1FTk9T
UEM7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCmluZGV4IDE0ZWVmOGY4ZDE2YS4uYjA2
ZDFkOTA1NGJhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYwpAQCAtMzc2OSw3ICsz
NzY5LDggQEAgaW50IGk5MTVfZ2VtX2d0dF9pbnNlcnQoc3RydWN0IGk5MTVfYWRkcmVzc19zcGFj
ZSAqdm0sCiAJaWYgKGZsYWdzICYgUElOX05PRVZJQ1QpCiAJCXJldHVybiAtRU5PU1BDOwogCi0J
LyogTm8gZnJlZSBzcGFjZSwgcGljayBhIHNsb3QgYXQgcmFuZG9tLgorCS8qCisJICogTm8gZnJl
ZSBzcGFjZSwgcGljayBhIHNsb3QgYXQgcmFuZG9tLgogCSAqCiAJICogVGhlcmUgaXMgYSBwYXRo
b2xvZ2ljYWwgY2FzZSBoZXJlIHVzaW5nIGEgR1RUIHNoYXJlZCBiZXR3ZWVuCiAJICogbW1hcCBh
bmQgR1BVIChpLmUuIGdndHQvYWxpYXNpbmdfcHBndHQgYnV0IG5vdCBmdWxsLXBwZ3R0KToKQEAg
LTM3OTcsNiArMzc5OCw5IEBAIGludCBpOTE1X2dlbV9ndHRfaW5zZXJ0KHN0cnVjdCBpOTE1X2Fk
ZHJlc3Nfc3BhY2UgKnZtLAogCWlmIChlcnIgIT0gLUVOT1NQQykKIAkJcmV0dXJuIGVycjsKIAor
CWlmIChmbGFncyAmIFBJTl9OT1NFQVJDSCkKKwkJcmV0dXJuIC1FTk9TUEM7CisKIAkvKiBSYW5k
b21seSBzZWxlY3RlZCBwbGFjZW1lbnQgaXMgcGlubmVkLCBkbyBhIHNlYXJjaCAqLwogCWVyciA9
IGk5MTVfZ2VtX2V2aWN0X3NvbWV0aGluZyh2bSwgc2l6ZSwgYWxpZ25tZW50LCBjb2xvciwKIAkJ
CQkgICAgICAgc3RhcnQsIGVuZCwgZmxhZ3MpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9nZW1fZ3R0LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQu
aAppbmRleCA1MTI3NDQ4MzUwMmUuLmI5N2E0N2ZjN2E2OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9nZW1fZ3R0LmgKQEAgLTYwMCw5ICs2MDAsOSBAQCBpbnQgaTkxNV9nZW1fZ3R0X2luc2VydChz
dHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKIAkJCXU2NCBzdGFydCwgdTY0IGVuZCwgdW5z
aWduZWQgaW50IGZsYWdzKTsKIAogLyogRmxhZ3MgdXNlZCBieSBwaW4vYmluZCZmcmllbmRzLiAq
LwotI2RlZmluZSBQSU5fTk9OQkxPQ0sJCUJJVF9VTEwoMCkKLSNkZWZpbmUgUElOX05PTkZBVUxU
CQlCSVRfVUxMKDEpCi0jZGVmaW5lIFBJTl9OT0VWSUNUCQlCSVRfVUxMKDIpCisjZGVmaW5lIFBJ
Tl9OT0VWSUNUCQlCSVRfVUxMKDApCisjZGVmaW5lIFBJTl9OT1NFQVJDSAkJQklUX1VMTCgxKQor
I2RlZmluZSBQSU5fTk9OQkxPQ0sJCUJJVF9VTEwoMikKICNkZWZpbmUgUElOX01BUFBBQkxFCQlC
SVRfVUxMKDMpCiAjZGVmaW5lIFBJTl9aT05FXzRHCQlCSVRfVUxMKDQpCiAjZGVmaW5lIFBJTl9I
SUdICQlCSVRfVUxMKDUpCi0tIAoyLjIzLjAucmMxCgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 18C6521E49
	for <lists+intel-gfx@lfdr.de>; Fri, 17 May 2019 21:31:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 994988999A;
	Fri, 17 May 2019 19:31:56 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 92F168999A
 for <intel-gfx@lists.freedesktop.org>; Fri, 17 May 2019 19:31:55 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 17 May 2019 12:31:55 -0700
X-ExtLoop1: 1
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga001.jf.intel.com with SMTP; 17 May 2019 12:31:53 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 17 May 2019 22:31:52 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 17 May 2019 22:31:26 +0300
Message-Id: <20190517193132.8140-8-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190517193132.8140-1-ville.syrjala@linux.intel.com>
References: <20190517193132.8140-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 08/14] drm/i915: Use intel_ types in
 intel_modeset_checks()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClN3
aXRjaCB0byB1c2luZyBpbnRlbF8gdHlwZXMgaW5zdGVhZCBvZiBkcm1fIHR5cGVzLiBBdm9pZHMK
dWdseSBjYXN0cyBhbmQgbmFzdHkgYWxpYXNpbmcgdmFyaWFibGVzIHdpdGggZGlmZmVyZW50IHR5
cGVzLgoKU2lnbmVkLW9mZi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4
LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMgfCA3
NyArKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgMzggaW5zZXJ0
aW9ucygrKSwgMzkgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGlzcGxheS5j
CmluZGV4IDE5MmY1NDhiMjRlZC4uYjc3MGVlMjhjZGNjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfZGlzcGxheS5jCkBAIC0xMjkwNCwzOCArMTI5MDQsMzcgQEAgc3RhdGljIGludCBpbnRlbF9t
b2Rlc2V0X2FsbF9waXBlcyhzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCiAJcmV0dXJu
IDA7CiB9CiAKLXN0YXRpYyBpbnQgaW50ZWxfbW9kZXNldF9jaGVja3Moc3RydWN0IGRybV9hdG9t
aWNfc3RhdGUgKnN0YXRlKQorc3RhdGljIGludCBpbnRlbF9tb2Rlc2V0X2NoZWNrcyhzdHJ1Y3Qg
aW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIHsKLQlzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRl
ICppbnRlbF9zdGF0ZSA9IHRvX2ludGVsX2F0b21pY19zdGF0ZShzdGF0ZSk7Ci0Jc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShzdGF0ZS0+ZGV2KTsKLQlzdHJ1Y3Qg
ZHJtX2NydGMgKmNydGM7Ci0Jc3RydWN0IGRybV9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwg
Km5ld19jcnRjX3N0YXRlOworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRv
X2k5MTUoc3RhdGUtPmJhc2UuZGV2KTsKKwlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2Ny
dGNfc3RhdGUsICpuZXdfY3J0Y19zdGF0ZTsKKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YzsKIAlp
bnQgcmV0ID0gMCwgaTsKIAotCWlmICghY2hlY2tfZGlnaXRhbF9wb3J0X2NvbmZsaWN0cyhpbnRl
bF9zdGF0ZSkpIHsKKwlpZiAoIWNoZWNrX2RpZ2l0YWxfcG9ydF9jb25mbGljdHMoc3RhdGUpKSB7
CiAJCURSTV9ERUJVR19LTVMoInJlamVjdGluZyBjb25mbGljdGluZyBkaWdpdGFsIHBvcnQgY29u
ZmlndXJhdGlvblxuIik7CiAJCXJldHVybiAtRUlOVkFMOwogCX0KIAogCS8qIGtlZXAgdGhlIGN1
cnJlbnQgc2V0dGluZyAqLwotCWlmICghaW50ZWxfc3RhdGUtPmNkY2xrLmZvcmNlX21pbl9jZGNs
a19jaGFuZ2VkKQotCQlpbnRlbF9zdGF0ZS0+Y2RjbGsuZm9yY2VfbWluX2NkY2xrID0KLQkJCWRl
dl9wcml2LT5jZGNsay5mb3JjZV9taW5fY2RjbGs7CisJaWYgKCFzdGF0ZS0+Y2RjbGsuZm9yY2Vf
bWluX2NkY2xrX2NoYW5nZWQpCisJCXN0YXRlLT5jZGNsay5mb3JjZV9taW5fY2RjbGsgPSBkZXZf
cHJpdi0+Y2RjbGsuZm9yY2VfbWluX2NkY2xrOwogCi0JaW50ZWxfc3RhdGUtPm1vZGVzZXQgPSB0
cnVlOwotCWludGVsX3N0YXRlLT5hY3RpdmVfY3J0Y3MgPSBkZXZfcHJpdi0+YWN0aXZlX2NydGNz
OwotCWludGVsX3N0YXRlLT5jZGNsay5sb2dpY2FsID0gZGV2X3ByaXYtPmNkY2xrLmxvZ2ljYWw7
Ci0JaW50ZWxfc3RhdGUtPmNkY2xrLmFjdHVhbCA9IGRldl9wcml2LT5jZGNsay5hY3R1YWw7Ci0J
aW50ZWxfc3RhdGUtPmNkY2xrLnBpcGUgPSBJTlZBTElEX1BJUEU7CisJc3RhdGUtPm1vZGVzZXQg
PSB0cnVlOworCXN0YXRlLT5hY3RpdmVfY3J0Y3MgPSBkZXZfcHJpdi0+YWN0aXZlX2NydGNzOwor
CXN0YXRlLT5jZGNsay5sb2dpY2FsID0gZGV2X3ByaXYtPmNkY2xrLmxvZ2ljYWw7CisJc3RhdGUt
PmNkY2xrLmFjdHVhbCA9IGRldl9wcml2LT5jZGNsay5hY3R1YWw7CisJc3RhdGUtPmNkY2xrLnBp
cGUgPSBJTlZBTElEX1BJUEU7CiAKLQlmb3JfZWFjaF9vbGRuZXdfY3J0Y19pbl9zdGF0ZShzdGF0
ZSwgY3J0Yywgb2xkX2NydGNfc3RhdGUsIG5ld19jcnRjX3N0YXRlLCBpKSB7Ci0JCWlmIChuZXdf
Y3J0Y19zdGF0ZS0+YWN0aXZlKQotCQkJaW50ZWxfc3RhdGUtPmFjdGl2ZV9jcnRjcyB8PSAxIDw8
IGk7CisJZm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsIG9s
ZF9jcnRjX3N0YXRlLAorCQkJCQkgICAgbmV3X2NydGNfc3RhdGUsIGkpIHsKKwkJaWYgKG5ld19j
cnRjX3N0YXRlLT5iYXNlLmFjdGl2ZSkKKwkJCXN0YXRlLT5hY3RpdmVfY3J0Y3MgfD0gMSA8PCBp
OwogCQllbHNlCi0JCQlpbnRlbF9zdGF0ZS0+YWN0aXZlX2NydGNzICY9IH4oMSA8PCBpKTsKKwkJ
CXN0YXRlLT5hY3RpdmVfY3J0Y3MgJj0gfigxIDw8IGkpOwogCi0JCWlmIChvbGRfY3J0Y19zdGF0
ZS0+YWN0aXZlICE9IG5ld19jcnRjX3N0YXRlLT5hY3RpdmUpCi0JCQlpbnRlbF9zdGF0ZS0+YWN0
aXZlX3BpcGVfY2hhbmdlcyB8PSBkcm1fY3J0Y19tYXNrKGNydGMpOworCQlpZiAob2xkX2NydGNf
c3RhdGUtPmJhc2UuYWN0aXZlICE9IG5ld19jcnRjX3N0YXRlLT5iYXNlLmFjdGl2ZSkKKwkJCXN0
YXRlLT5hY3RpdmVfcGlwZV9jaGFuZ2VzIHw9IGRybV9jcnRjX21hc2soJmNydGMtPmJhc2UpOwog
CX0KIAogCS8qCkBAIC0xMjk0OCw3ICsxMjk0Nyw3IEBAIHN0YXRpYyBpbnQgaW50ZWxfbW9kZXNl
dF9jaGVja3Moc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQogCWlmIChkZXZfcHJpdi0+
ZGlzcGxheS5tb2Rlc2V0X2NhbGNfY2RjbGspIHsKIAkJZW51bSBwaXBlIHBpcGU7CiAKLQkJcmV0
ID0gZGV2X3ByaXYtPmRpc3BsYXkubW9kZXNldF9jYWxjX2NkY2xrKGludGVsX3N0YXRlKTsKKwkJ
cmV0ID0gZGV2X3ByaXYtPmRpc3BsYXkubW9kZXNldF9jYWxjX2NkY2xrKHN0YXRlKTsKIAkJaWYg
KHJldCA8IDApCiAJCQlyZXR1cm4gcmV0OwogCkBAIC0xMjk1OCwxOSArMTI5NTcsMTkgQEAgc3Rh
dGljIGludCBpbnRlbF9tb2Rlc2V0X2NoZWNrcyhzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3Rh
dGUpCiAJCSAqIHRvdWNoaW5nIHRoZSBoYXJkd2FyZQogCQkgKi8KIAkJaWYgKGludGVsX2NkY2xr
X2NoYW5nZWQoJmRldl9wcml2LT5jZGNsay5sb2dpY2FsLAotCQkJCQkmaW50ZWxfc3RhdGUtPmNk
Y2xrLmxvZ2ljYWwpKSB7Ci0JCQlyZXQgPSBpbnRlbF9sb2NrX2FsbF9waXBlcyhzdGF0ZSk7CisJ
CQkJCSZzdGF0ZS0+Y2RjbGsubG9naWNhbCkpIHsKKwkJCXJldCA9IGludGVsX2xvY2tfYWxsX3Bp
cGVzKCZzdGF0ZS0+YmFzZSk7CiAJCQlpZiAocmV0IDwgMCkKIAkJCQlyZXR1cm4gcmV0OwogCQl9
CiAKLQkJaWYgKGlzX3Bvd2VyX29mXzIoaW50ZWxfc3RhdGUtPmFjdGl2ZV9jcnRjcykpIHsKKwkJ
aWYgKGlzX3Bvd2VyX29mXzIoc3RhdGUtPmFjdGl2ZV9jcnRjcykpIHsKIAkJCXN0cnVjdCBkcm1f
Y3J0YyAqY3J0YzsKIAkJCXN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsKIAotCQkJ
cGlwZSA9IGlsb2cyKGludGVsX3N0YXRlLT5hY3RpdmVfY3J0Y3MpOworCQkJcGlwZSA9IGlsb2cy
KHN0YXRlLT5hY3RpdmVfY3J0Y3MpOwogCQkJY3J0YyA9ICZpbnRlbF9nZXRfY3J0Y19mb3JfcGlw
ZShkZXZfcHJpdiwgcGlwZSktPmJhc2U7Ci0JCQljcnRjX3N0YXRlID0gZHJtX2F0b21pY19nZXRf
bmV3X2NydGNfc3RhdGUoc3RhdGUsIGNydGMpOworCQkJY3J0Y19zdGF0ZSA9IGRybV9hdG9taWNf
Z2V0X25ld19jcnRjX3N0YXRlKCZzdGF0ZS0+YmFzZSwgY3J0Yyk7CiAJCQlpZiAoY3J0Y19zdGF0
ZSAmJiBuZWVkc19tb2Rlc2V0KGNydGNfc3RhdGUpKQogCQkJCXBpcGUgPSBJTlZBTElEX1BJUEU7
CiAJCX0gZWxzZSB7CkBAIC0xMjk4MSwzMyArMTI5ODAsMzMgQEAgc3RhdGljIGludCBpbnRlbF9t
b2Rlc2V0X2NoZWNrcyhzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCiAJCWlmIChwaXBl
ICE9IElOVkFMSURfUElQRSAmJgogCQkgICAgaW50ZWxfY2RjbGtfbmVlZHNfY2QyeF91cGRhdGUo
ZGV2X3ByaXYsCiAJCQkJCQkgICZkZXZfcHJpdi0+Y2RjbGsuYWN0dWFsLAotCQkJCQkJICAmaW50
ZWxfc3RhdGUtPmNkY2xrLmFjdHVhbCkpIHsKLQkJCXJldCA9IGludGVsX2xvY2tfYWxsX3BpcGVz
KHN0YXRlKTsKKwkJCQkJCSAgJnN0YXRlLT5jZGNsay5hY3R1YWwpKSB7CisJCQlyZXQgPSBpbnRl
bF9sb2NrX2FsbF9waXBlcygmc3RhdGUtPmJhc2UpOwogCQkJaWYgKHJldCA8IDApCiAJCQkJcmV0
dXJuIHJldDsKIAotCQkJaW50ZWxfc3RhdGUtPmNkY2xrLnBpcGUgPSBwaXBlOworCQkJc3RhdGUt
PmNkY2xrLnBpcGUgPSBwaXBlOwogCQl9IGVsc2UgaWYgKGludGVsX2NkY2xrX25lZWRzX21vZGVz
ZXQoJmRldl9wcml2LT5jZGNsay5hY3R1YWwsCi0JCQkJCQkgICAgICZpbnRlbF9zdGF0ZS0+Y2Rj
bGsuYWN0dWFsKSkgewotCQkJcmV0ID0gaW50ZWxfbW9kZXNldF9hbGxfcGlwZXMoc3RhdGUpOwor
CQkJCQkJICAgICAmc3RhdGUtPmNkY2xrLmFjdHVhbCkpIHsKKwkJCXJldCA9IGludGVsX21vZGVz
ZXRfYWxsX3BpcGVzKCZzdGF0ZS0+YmFzZSk7CiAJCQlpZiAocmV0IDwgMCkKIAkJCQlyZXR1cm4g
cmV0OwogCi0JCQlpbnRlbF9zdGF0ZS0+Y2RjbGsucGlwZSA9IElOVkFMSURfUElQRTsKKwkJCXN0
YXRlLT5jZGNsay5waXBlID0gSU5WQUxJRF9QSVBFOwogCQl9CiAKIAkJRFJNX0RFQlVHX0tNUygi
TmV3IGNkY2xrIGNhbGN1bGF0ZWQgdG8gYmUgbG9naWNhbCAldSBrSHosIGFjdHVhbCAldSBrSHpc
biIsCi0JCQkgICAgICBpbnRlbF9zdGF0ZS0+Y2RjbGsubG9naWNhbC5jZGNsaywKLQkJCSAgICAg
IGludGVsX3N0YXRlLT5jZGNsay5hY3R1YWwuY2RjbGspOworCQkJICAgICAgc3RhdGUtPmNkY2xr
LmxvZ2ljYWwuY2RjbGssCisJCQkgICAgICBzdGF0ZS0+Y2RjbGsuYWN0dWFsLmNkY2xrKTsKIAkJ
RFJNX0RFQlVHX0tNUygiTmV3IHZvbHRhZ2UgbGV2ZWwgY2FsY3VsYXRlZCB0byBiZSBsb2dpY2Fs
ICV1LCBhY3R1YWwgJXVcbiIsCi0JCQkgICAgICBpbnRlbF9zdGF0ZS0+Y2RjbGsubG9naWNhbC52
b2x0YWdlX2xldmVsLAotCQkJICAgICAgaW50ZWxfc3RhdGUtPmNkY2xrLmFjdHVhbC52b2x0YWdl
X2xldmVsKTsKKwkJCSAgICAgIHN0YXRlLT5jZGNsay5sb2dpY2FsLnZvbHRhZ2VfbGV2ZWwsCisJ
CQkgICAgICBzdGF0ZS0+Y2RjbGsuYWN0dWFsLnZvbHRhZ2VfbGV2ZWwpOwogCX0KIAotCWludGVs
X21vZGVzZXRfY2xlYXJfcGxscyhpbnRlbF9zdGF0ZSk7CisJaW50ZWxfbW9kZXNldF9jbGVhcl9w
bGxzKHN0YXRlKTsKIAogCWlmIChJU19IQVNXRUxMKGRldl9wcml2KSkKLQkJcmV0dXJuIGhhc3dl
bGxfbW9kZV9zZXRfcGxhbmVzX3dvcmthcm91bmQoaW50ZWxfc3RhdGUpOworCQlyZXR1cm4gaGFz
d2VsbF9tb2RlX3NldF9wbGFuZXNfd29ya2Fyb3VuZChzdGF0ZSk7CiAKIAlyZXR1cm4gMDsKIH0K
QEAgLTEzMDk2LDcgKzEzMDk1LDcgQEAgc3RhdGljIGludCBpbnRlbF9hdG9taWNfY2hlY2soc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiwKIAkJcmV0dXJuIHJldDsKIAogCWlmIChhbnlfbXMpIHsKLQkJ
cmV0ID0gaW50ZWxfbW9kZXNldF9jaGVja3Moc3RhdGUpOworCQlyZXQgPSBpbnRlbF9tb2Rlc2V0
X2NoZWNrcyhpbnRlbF9zdGF0ZSk7CiAKIAkJaWYgKHJldCkKIAkJCXJldHVybiByZXQ7Ci0tIAoy
LjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCklu
dGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

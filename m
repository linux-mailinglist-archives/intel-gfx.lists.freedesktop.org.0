Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3AF2824C0FE
	for <lists+intel-gfx@lfdr.de>; Thu, 20 Aug 2020 16:53:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 94D066E54C;
	Thu, 20 Aug 2020 14:53:05 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3E4AF6E94D;
 Thu, 20 Aug 2020 14:53:04 +0000 (UTC)
IronPort-SDR: wTJ9WWiZpwJmjsugoPX/Kv0LIN92UrZhC2yItBwyUzuUGHDuQMkJ04y8dbp6jl4LEVoS1EIqZ3
 ScM2wS0rnXRQ==
X-IronPort-AV: E=McAfee;i="6000,8403,9718"; a="240136191"
X-IronPort-AV: E=Sophos;i="5.76,333,1592895600"; d="scan'208";a="240136191"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by fmsmga105.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 20 Aug 2020 07:53:03 -0700
IronPort-SDR: fubk1n1G0ZOjYDDwXXRaDkRRdCm8fMzFSO+YyWVm2gNCL/zo1skbtDub87rX0totATf1nLAY2o
 eF3QfHutRGiw==
X-IronPort-AV: E=Sophos;i="5.76,333,1592895600"; d="scan'208";a="472679724"
Received: from jkrzyszt-desk.igk.intel.com ([172.22.244.18])
 by orsmga005-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 20 Aug 2020 07:53:01 -0700
From: Janusz Krzysztofik <janusz.krzysztofik@linux.intel.com>
To: igt-dev@lists.freedesktop.org
Date: Thu, 20 Aug 2020 16:52:05 +0200
Message-Id: <20200820145215.13238-10-janusz.krzysztofik@linux.intel.com>
X-Mailer: git-send-email 2.21.1
In-Reply-To: <20200820145215.13238-1-janusz.krzysztofik@linux.intel.com>
References: <20200820145215.13238-1-janusz.krzysztofik@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t v3 09/19] tests/core_hotunplug: Prepare
 invariant data once per test run
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Micha=C5=82=20Winiarski?= <michal.winiarski@intel.com>,
 intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RWFjaCBzdWJ0ZXN0IG5vdyBjYWxscyBhIHByZXBhcmUoKSBoZWxwZXIgd2hpY2ggb3BlbnMgYSBj
b3VwbGUgb2YgZmlsZXMKcmVxdWlyZWQgYnkgdGhhdCBzdWJ0ZXN0LiAgVGhvc2UgZmlsZXMgYXJl
IHRoZW4gY2xvc2VkIGFmdGVyIHVzZSwKZWl0aGVyIGRpcmVjdGx5IGZyb20gdGhlIHN1YnRlc3Qg
Ym9keSwgb3IgaW5kaXJlY3RseSBmcm9tIGluc2lkZSBvbmUgb2YKaGVscGVyIGZ1bmN0aW9ucyBj
YWxsZWQgZHVyaW5nIHRoZSBzdWJ0ZXN0IGV4ZWN1dGlvbi4gIFRoYXQgYXBwcm9hY2gKbm90IG9u
bHkgbWFrZXMgbGlmZWN5Y2xlIG9mIGluZGl2aWR1YWwgZmlsZSBkZXNjcmlwdG9ycyBkaWZmaWN1
bHQgdG8KZm9sbG93IGJ1dCBhbHNvIHByZXZlbnRzIHVzIGZyb20gcmUtcnVubmluZyBoZWFsdGgg
Y2hlY2tzIG9uIHN1YnRlc3QKZmFpbHVyZXMgZnJvbSBmb2xsb3cgdXAgaWd0X2ZpeHR1cmUgc2Vj
dGlvbnMgc2luY2Ugd2UgbWF5IG5lZWQgdG8gcmV0cnkKYnVzIHJlc2NhbiBvciBkcml2ZXIgcmVi
aW5kIG9wZXJhdGlvbnMuCgpUd28gb2YgdGhvc2UgZmlsZXMgLSBkZXZpY2UgYnVzIGFuZCBkcml2
ZXIgc3lzZnMgbm9kZXMgLSBhcmUgbm90CmFmZmVjdGVkIG5vciBpbnRlcmZlcmUgd2l0aCBkcml2
ZXIgdW5iaW5kIC8gZGV2aWNlIHVucGx1ZyBvcGVyYXRpb25zCnBlcmZvcm1lZCBieSBzdWJ0ZXN0
cy4gIFRoZW4sIHRoZXJlIGlzIG5vdCBtdWNoIHNlbnNlIGluIGNsb3NpbmcgYW5kCnJlb3Blbmlu
ZyB0aG9zZSBub2Rlcy4gIE9wZW4gdGhlbSBvbmNlIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSB0ZXN0
IHJ1biwKdGhlbiBjbG9zZSB0aGVtIGFzIGxhdGUgYXMgb24gdGVzdCBjb21wbGV0aW9uLgoKVGhl
IHByZXBhcmUoKSBoZWxwZXIgYWxzbyBwb3B1bGF0ZXMgYSBkZXZpY2UgYnVzIGFkZHJlc3Mgc3Ry
aW5nIHVzZWQgYnkKZHJpdmVyIHVuYmluZCAvIHJlYmluZCBvcGVyYXRpb25zLiAgU2luY2UgdGhl
IGJ1cyBhZGRyZXNzIG9mIGFuCmV4ZXJjaXNlZCBkZXZpY2UgbmV2ZXIgY2hhbmdlcywgYWxzbyBw
cmVwYXJlIHRoYXQgc3RyaW5nIG9ubHkgb25jZSBhdAp0aGUgYmVnaW5uaW5nIG9mIGEgdGVzdCBy
dW4uICBOb3RlIHRoYXQgaXQgaXMgdGhlIHNhbWUgYXMgdGhlIGxhc3QKY29tcG9uZW50IG9mIGEg
ZGV2aWNlIGZpbHRlciBzdHJpbmcgd2hpY2ggaXMgYWxyZWFkeSByZXNvbHZlZCBhbmQKaW5zdGFs
bGVkIGZyb20gYW4gaW5pdGlhbCBpZ3RfZml4dHVyZSBzZWN0aW9uIG9mIHRoZSB0ZXN0LiAgVGhl
biwKaW5pdGlhbGl6ZSB0aGUgZGV2aWNlIGJ1cyBhZGRyZXNzIGZpZWxkIG9mIGEgaG90dW5wbHVn
IHN0cnVjdHVyZQppbnN0YW5jZSB3aXRoIGEgcG9pbnRlciB0byB0aGUgcmVzcGVjdGl2ZSBzdWJz
dHJpbmcgb2YgdGhhdCBmaWx0ZXIKcmF0aGVyIHRoYW4gcmVzb2x2aW5nIGl0IGFnYWluIGZyb20g
dGhlIGRldmljZSBzeXNmcyBub2RlIHBhdGhuYW1lLgoKVGhlcmUgaXMgb25lIG1vcmUgc3lzZnMg
bm9kZSAtIGEgRFJNIGRldmljZSBub2RlIC0gbm93IG9wZW5lZCBieSB0aGUKcHJlcGFyZSgpIGhl
bHBlciBmb3Igc3VidGVzdHMgd2hpY2ggcGVyZm9ybSBkZXZpY2UgcmVtb3ZlIG9wZXJhdGlvbnMu
ClRoYXQgbm9kZSBjYW4ndCBiZSBvcGVuZWQgb25seSBvbmNlIGF0IHRoZSBiZWdpbm5pbmcgb2Yg
YSB0ZXN0IHJ1bgpiZWNhdXNlIGl0cyBvcGVuIGZpbGUgZGVzY3JpcHRvciBpcyBubyBsb25nZXIg
dXNhYmxlIGFzIHNvb24gYXMgYQpkcml2ZXIgdW5iaW5kIG9wZXJhdGlvbiBpcyBwZXJmb3JtZWQu
ICBPbiB0aGUgb3RoZXIgaGFuZCwgaXQgY2FuJ3QgYmUKb3BlbmVkIGVhc2lseSBmcm9tIGluc2lk
ZSBhIGRldmljZV9yZW1vdmUoKSBoZWxwZXIgc2luY2Ugc29tZSBzdWJ0ZXN0cwpqdXN0IGRvbid0
IG9wZW4gdGhlIGRldmljZSBzbyBpdHMgZmlsZSBkZXNjcmlwdG9yIHVzZWQgYnkKaWd0X3N5c2Zz
X29wZW4oKSBtYXkganVzdCBub3QgYmUgYXZhaWxhYmxlLiAgSG93ZXZlciwgbm90ZSB0aGF0IG9u
bHkgYQpQQ0kgc3lzZnMgbm9kZSBvZiB0aGUgZGV2aWNlLCBub3QgbmVjZXNzYXJpbHkgdGhlIERS
TSBvbmUsIGlzIGFjdHVhbGx5CnJlcXVpcmVkIGZvciBhIHN1Y2Nlc3NmdWwgZGV2aWNlIHJlbW92
ZSBvcGVyYXRpb24sIGFuZCB0aGF0IG5vZGUgY2FuIGJlCm9wZW5lZCBlYXNpbHkgZnJvbSBhIGJ1
cyBmaWxlIGRlc2NyaXB0b3IgdXNpbmcgYSBkZXZpY2UgYnVzIGFkZHJlc3MKc3RyaW5nLCBib3Ro
IGFscmVhZHkgYXZhaWxhYmxlLiAgVGhlbiwgY2hhbmdlIHRoZSBzZW1hbnRpY3Mgb2YgYQouZmQu
c3lzZnNfZGV2IGZpZWxkIG9mIHRoZSBob3R1bnBsdWcgc3RydWN0dXJlIGZyb20gRFJNIHRvIFBD
SSBkZXZpY2UKc3lzZnMgZmlsZSBkZXNjcmlwdG9yLCB0aGVuIGxldCB0aGUgZGV2aWNlX3JlbW92
ZSgpIGhlbHBlciBvcGVuIHRoZQpkZXZpY2UgUENJIG5vZGUgYnkgaXRzZWxmIGFuZCBzdG9yZSBp
dHMgZmlsZSBkZXNjcmlwdG9yIGluIHRoYXQgZmllbGQuCkFsc28sIGZvciBzdGlsbCBtb3JlIGVh
c3kgYWNjZXNzIHRvIHRoZSBkZXZpY2UgUENJIG5vZGUsIHVzZSBhCidzdWJzeXN0ZW0vZGV2aWNl
cycgc3Vibm9kZSBvZiB0aGUgUENJIGRldmljZSBhcyBpdHMgYnVzIHN5c2ZzIGxvY2F0aW9uCmlu
c3RlYWQgb2YganVzdCAnc3Vic3lzdGVtJywgdGhlbiBhZGp1c3QgYSByZWxhdGl2ZSBwYXRoIHRv
IHRoZSBidXMKJ3Jlc2NhbicgZnVuY3Rpb24gYWNjb3JkaW5nbHkuCgpBIHNpZGUgYmVuZWZpdCBv
ZiB1c2luZyB0aGUgUENJIGRldmljZSBzeXNmcyBub2RlLCBub3QgdGhlIERSTSBvbmUsCndoaWxl
IHJlbW92aW5nIHRoZSBkZXZpY2UgaXMgdGhhdCBhIGZ1dHVyZSBzdWJ0ZXN0IG1heSBub3cgZWFz
aWx5CnBlcmZvcm0gYm90aCBkcml2ZXIgdW5iaW5kIGFuZCBkZXZpY2UgcmVtb3ZlIG9wZXJhdGlv
bnMgaW4gYSByb3cuCgp2MzogUmVmcmVzaC4KClN1Z2dlc3RlZC1ieTogTWljaGHFgiBXaW5pYXJz
a2kgPG1pY2hhbC53aW5pYXJza2lAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBKYW51c3ogS3J6
eXN6dG9maWsgPGphbnVzei5rcnp5c3p0b2Zpa0BsaW51eC5pbnRlbC5jb20+ClJldmlld2VkLWJ5
OiBNaWNoYcWCIFdpbmlhcnNraSA8bWljaGFsLndpbmlhcnNraUBpbnRlbC5jb20+Ci0tLQogdGVz
dHMvY29yZV9ob3R1bnBsdWcuYyB8IDg1ICsrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDMxIGluc2VydGlvbnMoKyksIDU0IGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL3Rlc3RzL2NvcmVfaG90dW5wbHVnLmMgYi90ZXN0cy9jb3JlX2hv
dHVucGx1Zy5jCmluZGV4IGY3YTU0MDEwYi4uODQ5YTc3NGZmIDEwMDY0NAotLS0gYS90ZXN0cy9j
b3JlX2hvdHVucGx1Zy5jCisrKyBiL3Rlc3RzL2NvcmVfaG90dW5wbHVnLmMKQEAgLTg2LDQxICs4
NiwzMCBAQCBzdGF0aWMgaW50IGNsb3NlX3N5c2ZzKGludCBmZF9zeXNmc19kZXYpCiAJcmV0dXJu
IGxvY2FsX2Nsb3NlKGZkX3N5c2ZzX2RldiwgIkRldmljZSBzeXNmcyBub2RlIGNsb3NlIGZhaWxl
ZCIpOwogfQogCi1zdGF0aWMgdm9pZCBwcmVwYXJlX2Zvcl91bmJpbmQoc3RydWN0IGhvdHVucGx1
ZyAqcHJpdiwgY2hhciAqYnVmLCBpbnQgYnVmbGVuKQorc3RhdGljIHZvaWQgcHJlcGFyZShzdHJ1
Y3QgaG90dW5wbHVnICpwcml2KQogewotCWludCBsZW47CisJY29uc3QgY2hhciAqZmlsdGVyID0g
aWd0X2RldmljZV9maWx0ZXJfZ2V0KDApLCAqc3lzZnNfcGF0aDsKIAotCWlndF9hc3NlcnQoYnVm
bGVuKTsKKwlpZ3RfYXNzZXJ0KGZpbHRlcik7CiAKLQlwcml2LT5mZC5zeXNmc19kcnYgPSBvcGVu
YXQocHJpdi0+ZmQuc3lzZnNfZGV2LCAiZGV2aWNlL2RyaXZlciIsCi0JCQkJICAgIE9fRElSRUNU
T1JZKTsKLQlpZ3RfYXNzZXJ0X2ZkKHByaXYtPmZkLnN5c2ZzX2Rydik7Ci0KLQlsZW4gPSByZWFk
bGlua2F0KHByaXYtPmZkLnN5c2ZzX2RldiwgImRldmljZSIsIGJ1ZiwgYnVmbGVuIC0gMSk7Ci0J
YnVmW2xlbl0gPSAnXDAnOwotCXByaXYtPmRldl9idXNfYWRkciA9IHN0cnJjaHIoYnVmLCAnLycp
OworCXByaXYtPmRldl9idXNfYWRkciA9IHN0cnJjaHIoZmlsdGVyLCAnLycpOwogCWlndF9hc3Nl
cnQocHJpdi0+ZGV2X2J1c19hZGRyKyspOwogCi0JLyogc3lzZnNfZGV2IG5vIGxvbmdlciBuZWVk
ZWQgKi8KLQlwcml2LT5mZC5zeXNmc19kZXYgPSBjbG9zZV9zeXNmcyhwcml2LT5mZC5zeXNmc19k
ZXYpOwotCWlndF9hc3NlcnRfZXEocHJpdi0+ZmQuc3lzZnNfZGV2LCAtMSk7Ci19Ci0KLXN0YXRp
YyB2b2lkIHByZXBhcmUoc3RydWN0IGhvdHVucGx1ZyAqcHJpdiwgY2hhciAqYnVmLCBpbnQgYnVm
bGVuKQotewotCXByaXYtPmZkLmRybSA9IGxvY2FsX2RybV9vcGVuX2RyaXZlcigiIiwgIiBmb3Ig
c3VidGVzdCIpOworCXN5c2ZzX3BhdGggPSBzdHJjaHIoZmlsdGVyLCAnOicpOworCWlndF9hc3Nl
cnQoc3lzZnNfcGF0aCsrKTsKIAotCXByaXYtPmZkLnN5c2ZzX2RldiA9IGlndF9zeXNmc19vcGVu
KHByaXYtPmZkLmRybSk7CisJcHJpdi0+ZmQuc3lzZnNfZGV2ID0gb3BlbihzeXNmc19wYXRoLCBP
X0RJUkVDVE9SWSk7CiAJaWd0X2Fzc2VydF9mZChwcml2LT5mZC5zeXNmc19kZXYpOwogCi0JaWYg
KGJ1ZikgewotCQlwcmVwYXJlX2Zvcl91bmJpbmQocHJpdiwgYnVmLCBidWZsZW4pOwotCX0gZWxz
ZSB7Ci0JCS8qIHByZXBhcmUgZm9yIGJ1cyByZXNjYW4gKi8KLQkJcHJpdi0+ZmQuc3lzZnNfYnVz
ID0gb3BlbmF0KHByaXYtPmZkLnN5c2ZzX2RldiwKLQkJCQkJICAgICJkZXZpY2Uvc3Vic3lzdGVt
IiwgT19ESVJFQ1RPUlkpOwotCQlpZ3RfYXNzZXJ0X2ZkKHByaXYtPmZkLnN5c2ZzX2J1cyk7Ci0J
fQorCXByaXYtPmZkLnN5c2ZzX2RydiA9IG9wZW5hdChwcml2LT5mZC5zeXNmc19kZXYsICJkcml2
ZXIiLCBPX0RJUkVDVE9SWSk7CisJaWd0X2Fzc2VydF9mZChwcml2LT5mZC5zeXNmc19kcnYpOwor
CisJcHJpdi0+ZmQuc3lzZnNfYnVzID0gb3BlbmF0KHByaXYtPmZkLnN5c2ZzX2RldiwgInN1YnN5
c3RlbS9kZXZpY2VzIiwKKwkJCQkgICAgT19ESVJFQ1RPUlkpOworCWlndF9hc3NlcnRfZmQocHJp
di0+ZmQuc3lzZnNfYnVzKTsKKworCXByaXYtPmZkLnN5c2ZzX2RldiA9IGNsb3NlX3N5c2ZzKHBy
aXYtPmZkLnN5c2ZzX2Rldik7CisJaWd0X2Fzc2VydF9lcShwcml2LT5mZC5zeXNmc19kZXYsIC0x
KTsKIH0KIAogLyogVW5iaW5kIHRoZSBkcml2ZXIgZnJvbSB0aGUgZGV2aWNlICovCkBAIC0xMzMs
OCArMTIyLDYgQEAgc3RhdGljIHZvaWQgZHJpdmVyX3VuYmluZChzdHJ1Y3QgaG90dW5wbHVnICpw
cml2LCBjb25zdCBjaGFyICpwcmVmaXgpCiAJaWd0X3N5c2ZzX3NldChwcml2LT5mZC5zeXNmc19k
cnYsICJ1bmJpbmQiLCBwcml2LT5kZXZfYnVzX2FkZHIpOwogCWlndF9yZXNldF90aW1lb3V0KCk7
CiAJcHJpdi0+ZmFpbHVyZSA9IE5VTEw7Ci0KLQkvKiBkb24ndCBjbG9zZSBmZC5zeXNmc19kcnYs
IGl0IHdpbGwgYmUgdXNlZCBmb3IgZHJpdmVyIHJlYmluZGluZyAqLwogfQogCiAvKiBSZS1iaW5k
IHRoZSBkcml2ZXIgdG8gdGhlIGRldmljZSAqLwpAQCAtMTQ3LDE4ICsxMzQsMjAgQEAgc3RhdGlj
IHZvaWQgZHJpdmVyX2JpbmQoc3RydWN0IGhvdHVucGx1ZyAqcHJpdikKIAlpZ3Rfc3lzZnNfc2V0
KHByaXYtPmZkLnN5c2ZzX2RydiwgImJpbmQiLCBwcml2LT5kZXZfYnVzX2FkZHIpOwogCWlndF9y
ZXNldF90aW1lb3V0KCk7CiAJcHJpdi0+ZmFpbHVyZSA9IE5VTEw7Ci0KLQljbG9zZShwcml2LT5m
ZC5zeXNmc19kcnYpOwogfQogCiAvKiBSZW1vdmUgKHZpcnR1YWxseSB1bnBsdWcpIHRoZSBkZXZp
Y2UgZnJvbSBpdHMgYnVzICovCiBzdGF0aWMgdm9pZCBkZXZpY2VfdW5wbHVnKHN0cnVjdCBob3R1
bnBsdWcgKnByaXYsIGNvbnN0IGNoYXIgKnByZWZpeCkKIHsKKwlwcml2LT5mZC5zeXNmc19kZXYg
PSBvcGVuYXQocHJpdi0+ZmQuc3lzZnNfYnVzLCBwcml2LT5kZXZfYnVzX2FkZHIsCisJCQkJICAg
IE9fRElSRUNUT1JZKTsKKwlpZ3RfYXNzZXJ0X2ZkKHByaXYtPmZkLnN5c2ZzX2Rldik7CisKIAlp
Z3RfZGVidWcoIiVzdW5wbHVnZ2luZyB0aGUgZGV2aWNlXG4iLCBwcmVmaXgpOwogCiAJcHJpdi0+
ZmFpbHVyZSA9ICJEZXZpY2UgdW5wbHVnIHRpbWVvdXQhIjsKIAlpZ3Rfc2V0X3RpbWVvdXQoNjAs
IHByaXYtPmZhaWx1cmUpOwotCWlndF9zeXNmc19zZXQocHJpdi0+ZmQuc3lzZnNfZGV2LCAiZGV2
aWNlL3JlbW92ZSIsICIxIik7CisJaWd0X3N5c2ZzX3NldChwcml2LT5mZC5zeXNmc19kZXYsICJy
ZW1vdmUiLCAiMSIpOwogCWlndF9yZXNldF90aW1lb3V0KCk7CiAJcHJpdi0+ZmFpbHVyZSA9IE5V
TEw7CiAKQEAgLTE3MiwxMSArMTYxLDkgQEAgc3RhdGljIHZvaWQgYnVzX3Jlc2NhbihzdHJ1Y3Qg
aG90dW5wbHVnICpwcml2KQogCiAJcHJpdi0+ZmFpbHVyZSA9ICJCdXMgcmVzY2FuIHRpbWVvdXQh
IjsKIAlpZ3Rfc2V0X3RpbWVvdXQoNjAsIHByaXYtPmZhaWx1cmUpOwotCWlndF9zeXNmc19zZXQo
cHJpdi0+ZmQuc3lzZnNfYnVzLCAicmVzY2FuIiwgIjEiKTsKKwlpZ3Rfc3lzZnNfc2V0KHByaXYt
PmZkLnN5c2ZzX2J1cywgIi4uL3Jlc2NhbiIsICIxIik7CiAJaWd0X3Jlc2V0X3RpbWVvdXQoKTsK
IAlwcml2LT5mYWlsdXJlID0gTlVMTDsKLQotCWNsb3NlKHByaXYtPmZkLnN5c2ZzX2J1cyk7CiB9
CiAKIHN0YXRpYyB2b2lkIGhlYWx0aGNoZWNrKHN0cnVjdCBob3R1bnBsdWcgKnByaXYpCkBAIC0y
MjksMTQgKzIxNiw2IEBAIHN0YXRpYyB2b2lkIHNldF9maWx0ZXJfZnJvbV9kZXZpY2UoaW50IGZk
KQogCiBzdGF0aWMgdm9pZCB1bmJpbmRfcmViaW5kKHN0cnVjdCBob3R1bnBsdWcgKnByaXYpCiB7
Ci0JY2hhciBidWZbUEFUSF9NQVhdOwotCi0JcHJlcGFyZShwcml2LCBidWYsIHNpemVvZihidWYp
KTsKLQotCWlndF9kZWJ1ZygiY2xvc2luZyB0aGUgZGV2aWNlXG4iKTsKLQlwcml2LT5mZC5kcm0g
PSBjbG9zZV9kZXZpY2UocHJpdi0+ZmQuZHJtKTsKLQlpZ3RfYXNzZXJ0X2VxKHByaXYtPmZkLmRy
bSwgLTEpOwotCiAJZHJpdmVyX3VuYmluZChwcml2LCAiIik7CiAKIAlkcml2ZXJfYmluZChwcml2
KTsKQEAgLTI0NiwxMiArMjI1LDYgQEAgc3RhdGljIHZvaWQgdW5iaW5kX3JlYmluZChzdHJ1Y3Qg
aG90dW5wbHVnICpwcml2KQogCiBzdGF0aWMgdm9pZCB1bnBsdWdfcmVzY2FuKHN0cnVjdCBob3R1
bnBsdWcgKnByaXYpCiB7Ci0JcHJlcGFyZShwcml2LCBOVUxMLCAwKTsKLQotCWlndF9kZWJ1Zygi
Y2xvc2luZyB0aGUgZGV2aWNlXG4iKTsKLQlwcml2LT5mZC5kcm0gPSBjbG9zZV9kZXZpY2UocHJp
di0+ZmQuZHJtKTsKLQlpZ3RfYXNzZXJ0X2VxKHByaXYtPmZkLmRybSwgLTEpOwotCiAJZGV2aWNl
X3VucGx1Zyhwcml2LCAiIik7CiAKIAlidXNfcmVzY2FuKHByaXYpOwpAQCAtMjYxLDkgKzIzNCw3
IEBAIHN0YXRpYyB2b2lkIHVucGx1Z19yZXNjYW4oc3RydWN0IGhvdHVucGx1ZyAqcHJpdikKIAog
c3RhdGljIHZvaWQgaG90dW5iaW5kX2xhdGVjbG9zZShzdHJ1Y3QgaG90dW5wbHVnICpwcml2KQog
ewotCWNoYXIgYnVmW1BBVEhfTUFYXTsKLQotCXByZXBhcmUocHJpdiwgYnVmLCBzaXplb2YoYnVm
KSk7CisJcHJpdi0+ZmQuZHJtID0gbG9jYWxfZHJtX29wZW5fZHJpdmVyKCIiLCAiIGZvciBob3R1
bmJpbmQiKTsKIAogCWRyaXZlcl91bmJpbmQocHJpdiwgImhvdCAiKTsKIApAQCAtMjc3LDcgKzI0
OCw3IEBAIHN0YXRpYyB2b2lkIGhvdHVuYmluZF9sYXRlY2xvc2Uoc3RydWN0IGhvdHVucGx1ZyAq
cHJpdikKIAogc3RhdGljIHZvaWQgaG90dW5wbHVnX2xhdGVjbG9zZShzdHJ1Y3QgaG90dW5wbHVn
ICpwcml2KQogewotCXByZXBhcmUocHJpdiwgTlVMTCwgMCk7CisJcHJpdi0+ZmQuZHJtID0gbG9j
YWxfZHJtX29wZW5fZHJpdmVyKCIiLCAiIGZvciBob3R1bnBsdWciKTsKIAogCWRldmljZV91bnBs
dWcocHJpdiwgImhvdCAiKTsKIApAQCAtMzEzLDYgKzI4NCw4IEBAIGlndF9tYWluCiAJCXNldF9m
aWx0ZXJfZnJvbV9kZXZpY2UoZmRfZHJtKTsKIAogCQlpZ3RfYXNzZXJ0X2VxKGNsb3NlX2Rldmlj
ZShmZF9kcm0pLCAtMSk7CisKKwkJcHJlcGFyZSgmcHJpdik7CiAJfQogCiAJaWd0X2Rlc2NyaWJl
KCJDaGVjayBpZiB0aGUgZHJpdmVyIGNhbiBiZSBjbGVhbmx5IHVuYm91bmQgZnJvbSBhIGRldmlj
ZSBiZWxpZXZlZCB0byBiZSBjbG9zZWQiKTsKQEAgLTM0MCw2ICszMTMsMTAgQEAgaWd0X21haW4K
IAlpZ3Rfc3VidGVzdCgiaG90dW5wbHVnLWxhdGVjbG9zZSIpCiAJCWhvdHVucGx1Z19sYXRlY2xv
c2UoJnByaXYpOwogCi0JaWd0X2ZpeHR1cmUKKwlpZ3RfZml4dHVyZSB7CiAJCXBvc3RfaGVhbHRo
Y2hlY2soJnByaXYpOworCisJCWNsb3NlKHByaXYuZmQuc3lzZnNfYnVzKTsKKwkJY2xvc2UocHJp
di5mZC5zeXNmc19kcnYpOworCX0KIH0KLS0gCjIuMjEuMQoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

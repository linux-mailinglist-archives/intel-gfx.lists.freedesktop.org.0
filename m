Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6A64A100B01
	for <lists+intel-gfx@lfdr.de>; Mon, 18 Nov 2019 19:01:29 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B11D26E78B;
	Mon, 18 Nov 2019 18:01:27 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A686D6E4EC
 for <intel-gfx@lists.freedesktop.org>; Mon, 18 Nov 2019 18:01:26 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 18 Nov 2019 10:01:25 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,321,1569308400"; d="scan'208";a="407473227"
Received: from orsosgc001.ra.intel.com (HELO orsosgc001.amr.corp.intel.com)
 ([10.23.184.150])
 by fmsmga006.fm.intel.com with ESMTP; 18 Nov 2019 10:01:25 -0800
Date: Mon, 18 Nov 2019 10:01:25 -0800
From: Umesh Nerlige Ramappa <umesh.nerlige.ramappa@intel.com>
To: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Message-ID: <20191118180125.GA39317@orsosgc001.amr.corp.intel.com>
References: <20191114192114.61547-1-umesh.nerlige.ramappa@intel.com>
 <20191114192114.61547-2-umesh.nerlige.ramappa@intel.com>
 <e82f80f9-c7f5-d33a-e0b5-ad97949ad1c3@intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <e82f80f9-c7f5-d33a-e0b5-ad97949ad1c3@intel.com>
User-Agent: Mutt/1.12.0 (2019-05-25)
Subject: Re: [Intel-gfx] [PATCH 2/2] drm/i915/perf: Configure OAR for
 specific context
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org, Chris Wilson <chris.p.wilson@intel.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gTW9uLCBOb3YgMTgsIDIwMTkgYXQgMDM6NDI6MjhQTSArMDIwMCwgTGlvbmVsIExhbmR3ZXJs
aW4gd3JvdGU6Cj5PbiAxNC8xMS8yMDE5IDIxOjIxLCBVbWVzaCBOZXJsaWdlIFJhbWFwcGEgd3Jv
dGU6Cj4+R2VuMTIgc3VwcG9ydHMgc2F2aW5nL3Jlc3RvcmluZyByZW5kZXIgY291bnRlcnMgcGVy
IGNvbnRleHQuIEFwcGx5IE9BUgo+PmNvbmZpZ3VyYXRpb24gb25seSBmb3IgdGhlIGNvbnRleHQg
dGhhdCBpcyBwYXNzZWQgaW4gdG8gcGVyZi4KPj4KPj52MjoKPj4tIEZpeCBPQUNUWENPTlRST0wg
dmFsdWUgdG8gb25seSBzdG9wL3Jlc3VtZSBjb3VudGVycy4KPj4tIFJlbW92ZSBnZW4xMl91cGRh
dGVfcmVnX3N0YXRlX3VubG9ja2VkIGFzIHBvd2VyIHN0YXRlIGlzIGFscmVhZHkKPj4gICBhcHBs
aWVkIGJ5IHRoZSBjYWxsZXIuCj4+Cj4+U2lnbmVkLW9mZi1ieTogVW1lc2ggTmVybGlnZSBSYW1h
cHBhIDx1bWVzaC5uZXJsaWdlLnJhbWFwcGFAaW50ZWwuY29tPgo+Pi0tLQo+PiAgZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMgfCAxOTMgKysrKysrKysrKysrKysrKystLS0tLS0tLS0t
LS0tLQo+PiAgMSBmaWxlIGNoYW5nZWQsIDEwOCBpbnNlcnRpb25zKCspLCA4NSBkZWxldGlvbnMo
LSkKPj4KPj5kaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwo+PmluZGV4IDIyMWMxMDkwYWU5My4uMmYw
YmU1ZmJlZjRiIDEwMDY0NAo+Pi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5j
Cj4+KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKPj5AQCAtMjA3OCwyMCAr
MjA3OCwxMiBAQCBnZW44X3VwZGF0ZV9yZWdfc3RhdGVfdW5sb2NrZWQoY29uc3Qgc3RydWN0IGlu
dGVsX2NvbnRleHQgKmNlLAo+PiAgCXUzMiAqcmVnX3N0YXRlID0gY2UtPmxyY19yZWdfc3RhdGU7
Cj4+ICAJaW50IGk7Cj4+LQlpZiAoSVNfR0VOKHN0cmVhbS0+cGVyZi0+aTkxNSwgMTIpKSB7Cj4+
LQkJdTMyIGZvcm1hdCA9IHN0cmVhbS0+b2FfYnVmZmVyLmZvcm1hdDsKPj4rCXJlZ19zdGF0ZVtj
dHhfb2FjdHhjdHJsICsgMV0gPQo+PisJCShzdHJlYW0tPnBlcmlvZF9leHBvbmVudCA8PCBHRU44
X09BX1RJTUVSX1BFUklPRF9TSElGVCkgfAo+PisJCShzdHJlYW0tPnBlcmlvZGljID8gR0VOOF9P
QV9USU1FUl9FTkFCTEUgOiAwKSB8Cj4+KwkJR0VOOF9PQV9DT1VOVEVSX1JFU1VNRTsKPj4tCQly
ZWdfc3RhdGVbY3R4X29hY3R4Y3RybCArIDFdID0KPj4tCQkJKGZvcm1hdCA8PCBHRU4xMl9PQVJf
T0FDT05UUk9MX0NPVU5URVJfRk9STUFUX1NISUZUKSB8Cj4+LQkJCShzdHJlYW0tPm9hX2NvbmZp
ZyA/IEdFTjEyX09BUl9PQUNPTlRST0xfQ09VTlRFUl9FTkFCTEUgOiAwKTsKPj4tCX0gZWxzZSB7
Cj4+LQkJcmVnX3N0YXRlW2N0eF9vYWN0eGN0cmwgKyAxXSA9Cj4+LQkJCShzdHJlYW0tPnBlcmlv
ZF9leHBvbmVudCA8PCBHRU44X09BX1RJTUVSX1BFUklPRF9TSElGVCkgfAo+Pi0JCQkoc3RyZWFt
LT5wZXJpb2RpYyA/IEdFTjhfT0FfVElNRVJfRU5BQkxFIDogMCkgfAo+Pi0JCQlHRU44X09BX0NP
VU5URVJfUkVTVU1FOwo+Pi0JfQo+Pi0KPj4tCWZvciAoaSA9IDA7ICEhY3R4X2ZsZXhldTAgJiYg
aSA8IEFSUkFZX1NJWkUoZmxleF9yZWdzKTsgaSsrKQo+PisJZm9yIChpID0gMDsgaSA8IEFSUkFZ
X1NJWkUoZmxleF9yZWdzKTsgaSsrKQo+PiAgCQlyZWdfc3RhdGVbY3R4X2ZsZXhldTAgKyBpICog
MiArIDFdID0KPj4gIAkJCW9hX2NvbmZpZ19mbGV4X3JlZyhzdHJlYW0tPm9hX2NvbmZpZywgZmxl
eF9yZWdzW2ldKTsKPj5AQCAtMjIyNCwzNCArMjIxNiw0OSBAQCBzdGF0aWMgaW50IGdlbjhfY29u
ZmlndXJlX2NvbnRleHQoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwKPj4gIAlyZXR1cm4g
ZXJyOwo+PiAgfQo+Pi1zdGF0aWMgaW50IGdlbjEyX2VtaXRfb2FyX2NvbmZpZyhzdHJ1Y3QgaW50
ZWxfY29udGV4dCAqY2UsIGJvb2wgZW5hYmxlKQo+PitzdGF0aWMgaW50IGdlbjEyX2NvbmZpZ3Vy
ZV9vYXJfY29udGV4dChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLCBib29sIGVuYWJs
ZSkKPj4gIHsKPj4tCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwo+Pi0JdTMyICpjczsKPj4tCWlu
dCBlcnIgPSAwOwo+Pi0KPj4tCXJxID0gaTkxNV9yZXF1ZXN0X2NyZWF0ZShjZSk7Cj4+LQlpZiAo
SVNfRVJSKHJxKSkKPj4tCQlyZXR1cm4gUFRSX0VSUihycSk7Cj4+KwlpbnQgZXJyOwo+PisJc3Ry
dWN0IGludGVsX2NvbnRleHQgKmNlID0gc3RyZWFtLT5waW5uZWRfY3R4Owo+PisJc3RydWN0IGZs
ZXggcmVnc19jb250ZXh0W10gPSB7Cj4+KwkJewo+PisJCQlHRU44X09BQ1RYQ09OVFJPTCwKPj4r
CQkJc3RyZWFtLT5wZXJmLT5jdHhfb2FjdHhjdHJsX29mZnNldCArIDEsCj4+KwkJCWVuYWJsZSA/
IEdFTjhfT0FfQ09VTlRFUl9SRVNVTUUgOiAwLAo+PisJCX0sCj4+Kwl9Owo+Cj4KPldoZW4gZG8g
d2UgY29uZmlndXJlIHRoZSBGbGV4IHJlZ2lzdGVycz8KCkkgZG9uJ3Qgc2VlIGZsZXggcmVnaXN0
ZXJzIGluIHRoZSBjb250ZXh0IGltYWdlIGR1bXAgb3IgaW4gdGhlIHNwZWMsIHNvIApJIGd1ZXNz
IHdlIHdvdWxkIG9ubHkgY29uZmlndXJlIHRoZW0gaWYgdGhleSBhcmUgcGFydCBvZiB0aGUgbWV0
cmljIHNldC4KCldpbGwgcG9zdCBhIG5ldyB2ZXJzaW9uIHdpdGggYmVsb3cgY29tbWVudHMuCgpU
aGFua3MsClVtZXNoCgo+Cj4KPj4rCXN0cnVjdCBmbGV4IHJlZ3NfbHJpW10gPSB7Cj4+KwkJewo+
PisJCQlHRU4xMl9PQVJfT0FDT05UUk9MLAo+PisJCX0sCj4+KwkJewo+PisJCQlSSU5HX0NPTlRF
WFRfQ09OVFJPTChjZS0+ZW5naW5lLT5tbWlvX2Jhc2UpLAo+PisJCX0sCj4+Kwl9Owo+PisJdTMy
IGZvcm1hdCA9IHN0cmVhbS0+b2FfYnVmZmVyLmZvcm1hdDsKPj4tCWNzID0gaW50ZWxfcmluZ19i
ZWdpbihycSwgNCk7Cj4+LQlpZiAoSVNfRVJSKGNzKSkgewo+Pi0JCWVyciA9IFBUUl9FUlIoY3Mp
Owo+Pi0JCWdvdG8gb3V0Owo+Pi0JfQo+PisJcmVnc19scmlbMF0udmFsdWUgPQo+PisJCShmb3Jt
YXQgPDwgR0VOMTJfT0FSX09BQ09OVFJPTF9DT1VOVEVSX0ZPUk1BVF9TSElGVCkgfAo+PisJCShl
bmFibGUgPyBHRU4xMl9PQVJfT0FDT05UUk9MX0NPVU5URVJfRU5BQkxFIDogMCk7Cj4+LQkqY3Mr
KyA9IE1JX0xPQURfUkVHSVNURVJfSU1NKDEpOwo+Pi0JKmNzKysgPSBpOTE1X21taW9fcmVnX29m
ZnNldChSSU5HX0NPTlRFWFRfQ09OVFJPTChjZS0+ZW5naW5lLT5tbWlvX2Jhc2UpKTsKPj4tCSpj
cysrID0gX01BU0tFRF9GSUVMRChHRU4xMl9DVFhfQ1RSTF9PQVJfQ09OVEVYVF9FTkFCTEUsCj4+
LQkJCSAgICAgIGVuYWJsZSA/IEdFTjEyX0NUWF9DVFJMX09BUl9DT05URVhUX0VOQUJMRSA6IDAp
Owo+Pi0JKmNzKysgPSBNSV9OT09QOwo+PisJcmVnc19scmlbMV0udmFsdWUgPQo+PisJCV9NQVNL
RURfRklFTEQoR0VOMTJfQ1RYX0NUUkxfT0FSX0NPTlRFWFRfRU5BQkxFLAo+PisJCQkgICAgICBl
bmFibGUgPwo+PisJCQkgICAgICBHRU4xMl9DVFhfQ1RSTF9PQVJfQ09OVEVYVF9FTkFCTEUgOgo+
PisJCQkgICAgICAwKTsKPgo+Cj5DYW4ndCB3ZSBwdXQgdGhvc2UgdmFsdWVzIGluIHRoZSBhcnJh
eSBhYm92ZT8KPgo+Cj4+LQlpbnRlbF9yaW5nX2FkdmFuY2UocnEsIGNzKTsKPj4rCS8qIE1vZGlm
eSB0aGUgY29udGV4dCBpbWFnZSBvZiBwaW5uZWQgY29udGV4dCB3aXRoIHJlZ3NfY29udGV4dCov
Cj4+KwllcnIgPSBpbnRlbF9jb250ZXh0X2xvY2tfcGlubmVkKGNlKTsKPj4rCWlmIChlcnIpCj4+
KwkJcmV0dXJuIGVycjsKPj4tb3V0Ogo+Pi0JaTkxNV9yZXF1ZXN0X2FkZChycSk7Cj4+KwllcnIg
PSBnZW44X21vZGlmeV9jb250ZXh0KGNlLCByZWdzX2NvbnRleHQsIEFSUkFZX1NJWkUocmVnc19j
b250ZXh0KSk7Cj4+KwlpbnRlbF9jb250ZXh0X3VubG9ja19waW5uZWQoY2UpOwo+PisJaWYgKGVy
cikKPj4rCQlyZXR1cm4gZXJyOwo+Pi0JcmV0dXJuIGVycjsKPj4rCS8qIEFwcGx5IHJlZ3NfbHJp
IHVzaW5nIExSSSB3aXRoIHBpbm5lZCBjb250ZXh0ICovCj4+KwlyZXR1cm4gZ2VuOF9tb2RpZnlf
c2VsZihjZSwgcmVnc19scmksIEFSUkFZX1NJWkUocmVnc19scmkpKTsKPj4gIH0KPj4gIC8qCj4+
QEAgLTIyNzcsNTMgKzIyODQsMTYgQEAgc3RhdGljIGludCBnZW4xMl9lbWl0X29hcl9jb25maWco
c3RydWN0IGludGVsX2NvbnRleHQgKmNlLCBib29sIGVuYWJsZSkKPj4gICAqICAgcGVyLWNvbnRl
eHQgT0Egc3RhdGUuCj4+ICAgKgo+PiAgICogTm90ZTogaXQncyBvbmx5IHRoZSBSQ1MvUmVuZGVy
IGNvbnRleHQgdGhhdCBoYXMgYW55IE9BIHN0YXRlLgo+PisgKiBOb3RlOiB0aGUgZmlyc3QgZmxl
eCByZWdpc3RlciBwYXNzZWQgbXVzdCBhbHdheXMgYmUgUl9QV1JfQ0xLX1NUQVRFCj4+ICAgKi8K
Pj4tc3RhdGljIGludCBscmNfY29uZmlndXJlX2FsbF9jb250ZXh0cyhzdHJ1Y3QgaTkxNV9wZXJm
X3N0cmVhbSAqc3RyZWFtLAo+Pi0JCQkJICAgICAgY29uc3Qgc3RydWN0IGk5MTVfb2FfY29uZmln
ICpvYV9jb25maWcpCj4+K3N0YXRpYyBpbnQgb2FfY29uZmlndXJlX2FsbF9jb250ZXh0cyhzdHJ1
Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAo+PisJCQkJICAgICBzdHJ1Y3QgZmxleCAqcmVn
cywKPj4rCQkJCSAgICAgc2l6ZV90IG51bV9yZWdzKQo+PiAgewo+PiAgCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1ID0gc3RyZWFtLT5wZXJmLT5pOTE1Owo+Pi0JLyogVGhlIE1NSU8gb2Zm
c2V0cyBmb3IgRmxleCBFVSByZWdpc3RlcnMgYXJlbid0IGNvbnRpZ3VvdXMgKi8KPj4tCWNvbnN0
IHUzMiBjdHhfZmxleGV1MCA9IHN0cmVhbS0+cGVyZi0+Y3R4X2ZsZXhldTBfb2Zmc2V0Owo+Pi0j
ZGVmaW5lIGN0eF9mbGV4ZXVOKE4pIChjdHhfZmxleGV1MCArIDIgKiAoTikgKyAxKQo+Pi0Jc3Ry
dWN0IGZsZXggcmVnc1tdID0gewo+Pi0JCXsKPj4tCQkJR0VOOF9SX1BXUl9DTEtfU1RBVEUsCj4+
LQkJCUNUWF9SX1BXUl9DTEtfU1RBVEUsCj4+LQkJfSwKPj4tCQl7Cj4+LQkJCUlTX0dFTihpOTE1
LCAxMikgPwo+Pi0JCQlHRU4xMl9PQVJfT0FDT05UUk9MIDogR0VOOF9PQUNUWENPTlRST0wsCj4+
LQkJCXN0cmVhbS0+cGVyZi0+Y3R4X29hY3R4Y3RybF9vZmZzZXQgKyAxLAo+Pi0JCX0sCj4+LQkJ
eyBFVV9QRVJGX0NOVEwwLCBjdHhfZmxleGV1TigwKSB9LAo+Pi0JCXsgRVVfUEVSRl9DTlRMMSwg
Y3R4X2ZsZXhldU4oMSkgfSwKPj4tCQl7IEVVX1BFUkZfQ05UTDIsIGN0eF9mbGV4ZXVOKDIpIH0s
Cj4+LQkJeyBFVV9QRVJGX0NOVEwzLCBjdHhfZmxleGV1TigzKSB9LAo+Pi0JCXsgRVVfUEVSRl9D
TlRMNCwgY3R4X2ZsZXhldU4oNCkgfSwKPj4tCQl7IEVVX1BFUkZfQ05UTDUsIGN0eF9mbGV4ZXVO
KDUpIH0sCj4+LQkJeyBFVV9QRVJGX0NOVEw2LCBjdHhfZmxleGV1Tig2KSB9LAo+Pi0JfTsKPj4t
I3VuZGVmIGN0eF9mbGV4ZXVOCj4+ICAJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOwo+
PiAgCXN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgsICpjbjsKPj4tCXNpemVfdCBhcnJheV9z
aXplID0gSVNfR0VOKGk5MTUsIDEyKSA/IDIgOiBBUlJBWV9TSVpFKHJlZ3MpOwo+Pi0JaW50IGks
IGVycjsKPj4tCj4+LQlpZiAoSVNfR0VOKGk5MTUsIDEyKSkgewo+Pi0JCXUzMiBmb3JtYXQgPSBz
dHJlYW0tPm9hX2J1ZmZlci5mb3JtYXQ7Cj4+LQo+Pi0JCXJlZ3NbMV0udmFsdWUgPQo+Pi0JCQko
Zm9ybWF0IDw8IEdFTjEyX09BUl9PQUNPTlRST0xfQ09VTlRFUl9GT1JNQVRfU0hJRlQpIHwKPj4t
CQkJKG9hX2NvbmZpZyA/IEdFTjEyX09BUl9PQUNPTlRST0xfQ09VTlRFUl9FTkFCTEUgOiAwKTsK
Pj4tCX0gZWxzZSB7Cj4+LQkJcmVnc1sxXS52YWx1ZSA9Cj4+LQkJCShzdHJlYW0tPnBlcmlvZF9l
eHBvbmVudCA8PCBHRU44X09BX1RJTUVSX1BFUklPRF9TSElGVCkgfAo+Pi0JCQkoc3RyZWFtLT5w
ZXJpb2RpYyA/IEdFTjhfT0FfVElNRVJfRU5BQkxFIDogMCkgfAo+Pi0JCQlHRU44X09BX0NPVU5U
RVJfUkVTVU1FOwo+Pi0JfQo+Pi0KPj4tCWZvciAoaSA9IDI7ICEhY3R4X2ZsZXhldTAgJiYgaSA8
IGFycmF5X3NpemU7IGkrKykKPj4tCQlyZWdzW2ldLnZhbHVlID0gb2FfY29uZmlnX2ZsZXhfcmVn
KG9hX2NvbmZpZywgcmVnc1tpXS5yZWcpOwo+PisJaW50IGVycjsKPj4gIAlsb2NrZGVwX2Fzc2Vy
dF9oZWxkKCZzdHJlYW0tPnBlcmYtPmxvY2spOwo+PkBAIC0yMzUzLDcgKzIzMjMsNyBAQCBzdGF0
aWMgaW50IGxyY19jb25maWd1cmVfYWxsX2NvbnRleHRzKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFt
ICpzdHJlYW0sCj4+ICAJCXNwaW5fdW5sb2NrKCZpOTE1LT5nZW0uY29udGV4dHMubG9jayk7Cj4+
LQkJZXJyID0gZ2VuOF9jb25maWd1cmVfY29udGV4dChjdHgsIHJlZ3MsIGFycmF5X3NpemUpOwo+
PisJCWVyciA9IGdlbjhfY29uZmlndXJlX2NvbnRleHQoY3R4LCByZWdzLCBudW1fcmVncyk7Cj4+
ICAJCWlmIChlcnIpIHsKPj4gIAkJCWk5MTVfZ2VtX2NvbnRleHRfcHV0KGN0eCk7Cj4+ICAJCQly
ZXR1cm4gZXJyOwo+PkBAIC0yMzc4LDcgKzIzNDgsNyBAQCBzdGF0aWMgaW50IGxyY19jb25maWd1
cmVfYWxsX2NvbnRleHRzKHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0sCj4+ICAJCXJl
Z3NbMF0udmFsdWUgPSBpbnRlbF9zc2V1X21ha2VfcnBjcyhpOTE1LCAmY2UtPnNzZXUpOwo+Pi0J
CWVyciA9IGdlbjhfbW9kaWZ5X3NlbGYoY2UsIHJlZ3MsIGFycmF5X3NpemUpOwo+PisJCWVyciA9
IGdlbjhfbW9kaWZ5X3NlbGYoY2UsIHJlZ3MsIG51bV9yZWdzKTsKPj4gIAkJaWYgKGVycikKPj4g
IAkJCXJldHVybiBlcnI7Cj4+ICAJfQo+PkBAIC0yMzg2LDYgKzIzNTYsNTYgQEAgc3RhdGljIGlu
dCBscmNfY29uZmlndXJlX2FsbF9jb250ZXh0cyhzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3Ry
ZWFtLAo+PiAgCXJldHVybiAwOwo+PiAgfQo+PitzdGF0aWMgaW50IGdlbjEyX2NvbmZpZ3VyZV9h
bGxfY29udGV4dHMoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKPj4rCQkJCQljb25z
dCBzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2NvbmZpZykKPj4rewo+PisJc3RydWN0IGZsZXgg
cmVnc1tdID0gewo+PisJCXsKPj4rCQkJR0VOOF9SX1BXUl9DTEtfU1RBVEUsCj4+KwkJCUNUWF9S
X1BXUl9DTEtfU1RBVEUsCj4+KwkJfSwKPj4rCX07Cj4+Kwo+PisJcmV0dXJuIG9hX2NvbmZpZ3Vy
ZV9hbGxfY29udGV4dHMoc3RyZWFtLCByZWdzLCBBUlJBWV9TSVpFKHJlZ3MpKTsKPj4rfQo+PisK
Pj4rc3RhdGljIGludCBscmNfY29uZmlndXJlX2FsbF9jb250ZXh0cyhzdHJ1Y3QgaTkxNV9wZXJm
X3N0cmVhbSAqc3RyZWFtLAo+PisJCQkJICAgICAgY29uc3Qgc3RydWN0IGk5MTVfb2FfY29uZmln
ICpvYV9jb25maWcpCj4+K3sKPj4rCS8qIFRoZSBNTUlPIG9mZnNldHMgZm9yIEZsZXggRVUgcmVn
aXN0ZXJzIGFyZW4ndCBjb250aWd1b3VzICovCj4+Kwljb25zdCB1MzIgY3R4X2ZsZXhldTAgPSBz
dHJlYW0tPnBlcmYtPmN0eF9mbGV4ZXUwX29mZnNldDsKPj4rI2RlZmluZSBjdHhfZmxleGV1TihO
KSAoY3R4X2ZsZXhldTAgKyAyICogKE4pICsgMSkKPj4rCXN0cnVjdCBmbGV4IHJlZ3NbXSA9IHsK
Pj4rCQl7Cj4+KwkJCUdFTjhfUl9QV1JfQ0xLX1NUQVRFLAo+PisJCQlDVFhfUl9QV1JfQ0xLX1NU
QVRFLAo+PisJCX0sCj4+KwkJewo+PisJCQlHRU44X09BQ1RYQ09OVFJPTCwKPj4rCQkJc3RyZWFt
LT5wZXJmLT5jdHhfb2FjdHhjdHJsX29mZnNldCArIDEsCj4+KwkJfSwKPj4rCQl7IEVVX1BFUkZf
Q05UTDAsIGN0eF9mbGV4ZXVOKDApIH0sCj4+KwkJeyBFVV9QRVJGX0NOVEwxLCBjdHhfZmxleGV1
TigxKSB9LAo+PisJCXsgRVVfUEVSRl9DTlRMMiwgY3R4X2ZsZXhldU4oMikgfSwKPj4rCQl7IEVV
X1BFUkZfQ05UTDMsIGN0eF9mbGV4ZXVOKDMpIH0sCj4+KwkJeyBFVV9QRVJGX0NOVEw0LCBjdHhf
ZmxleGV1Tig0KSB9LAo+PisJCXsgRVVfUEVSRl9DTlRMNSwgY3R4X2ZsZXhldU4oNSkgfSwKPj4r
CQl7IEVVX1BFUkZfQ05UTDYsIGN0eF9mbGV4ZXVOKDYpIH0sCj4+Kwl9Owo+PisjdW5kZWYgY3R4
X2ZsZXhldU4KPj4rCWludCBpOwo+PisKPj4rCXJlZ3NbMV0udmFsdWUgPQo+PisJCShzdHJlYW0t
PnBlcmlvZF9leHBvbmVudCA8PCBHRU44X09BX1RJTUVSX1BFUklPRF9TSElGVCkgfAo+PisJCShz
dHJlYW0tPnBlcmlvZGljID8gR0VOOF9PQV9USU1FUl9FTkFCTEUgOiAwKSB8Cj4+KwkJR0VOOF9P
QV9DT1VOVEVSX1JFU1VNRTsKPj4rCj4+Kwlmb3IgKGkgPSAyOyBpIDwgQVJSQVlfU0laRShyZWdz
KTsgaSsrKQo+PisJCXJlZ3NbaV0udmFsdWUgPSBvYV9jb25maWdfZmxleF9yZWcob2FfY29uZmln
LCByZWdzW2ldLnJlZyk7Cj4+Kwo+PisJcmV0dXJuIG9hX2NvbmZpZ3VyZV9hbGxfY29udGV4dHMo
c3RyZWFtLCByZWdzLCBBUlJBWV9TSVpFKHJlZ3MpKTsKPj4rfQo+PisKPj4gIHN0YXRpYyBpbnQg
Z2VuOF9lbmFibGVfbWV0cmljX3NldChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtKQo+
PiAgewo+PiAgCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSA9IHN0cmVhbS0+dW5jb3JlOwo+
PkBAIC0yNDY5LDcgKzI0ODksNyBAQCBzdGF0aWMgaW50IGdlbjEyX2VuYWJsZV9tZXRyaWNfc2V0
KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCj4+ICAJICogdG8gbWFrZSBzdXJlIGFs
bCBzbGljZXMvc3Vic2xpY2VzIGFyZSBPTiBiZWZvcmUgd3JpdGluZyB0byBOT0EKPj4gIAkgKiBy
ZWdpc3RlcnMuCj4+ICAJICovCj4+LQlyZXQgPSBscmNfY29uZmlndXJlX2FsbF9jb250ZXh0cyhz
dHJlYW0sIG9hX2NvbmZpZyk7Cj4+KwlyZXQgPSBnZW4xMl9jb25maWd1cmVfYWxsX2NvbnRleHRz
KHN0cmVhbSwgb2FfY29uZmlnKTsKPj4gIAlpZiAocmV0KQo+PiAgCQlyZXR1cm4gcmV0Owo+PkBA
IC0yNDc5LDggKzI0OTksNyBAQCBzdGF0aWMgaW50IGdlbjEyX2VuYWJsZV9tZXRyaWNfc2V0KHN0
cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCj4+ICAJICogcmVxdWVzdGVkIHRoaXMuCj4+
ICAJICovCj4+ICAJaWYgKHN0cmVhbS0+Y3R4KSB7Cj4+LQkJcmV0ID0gZ2VuMTJfZW1pdF9vYXJf
Y29uZmlnKHN0cmVhbS0+cGlubmVkX2N0eCwKPj4tCQkJCQkgICAgb2FfY29uZmlnICE9IE5VTEwp
Owo+PisJCXJldCA9IGdlbjEyX2NvbmZpZ3VyZV9vYXJfY29udGV4dChzdHJlYW0sIG9hX2NvbmZp
ZyAhPSBOVUxMKTsKPgo+Cj5JIHRoaW5rIHlvdSBjYW4gYXNzdW1lIG9hX2NvbmZpZyBpcyBnb2lu
ZyB0byBiZSAhPSBOVUxMIGluIHRoZSAKPmVuYWJsZV9tZXRyaWNfc2V0IHZmdW5jLgo+Cj4KPj4g
IAkJaWYgKHJldCkKPj4gIAkJCXJldHVybiByZXQ7Cj4+ICAJfQo+PkBAIC0yNTE0LDExICsyNTMz
LDExIEBAIHN0YXRpYyB2b2lkIGdlbjEyX2Rpc2FibGVfbWV0cmljX3NldChzdHJ1Y3QgaTkxNV9w
ZXJmX3N0cmVhbSAqc3RyZWFtKQo+PiAgCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSA9IHN0
cmVhbS0+dW5jb3JlOwo+PiAgCS8qIFJlc2V0IGFsbCBjb250ZXh0cycgc2xpY2VzL3N1YnNsaWNl
cyBjb25maWd1cmF0aW9ucy4gKi8KPj4tCWxyY19jb25maWd1cmVfYWxsX2NvbnRleHRzKHN0cmVh
bSwgTlVMTCk7Cj4+KwlnZW4xMl9jb25maWd1cmVfYWxsX2NvbnRleHRzKHN0cmVhbSwgTlVMTCk7
Cj4+ICAJLyogZGlzYWJsZSB0aGUgY29udGV4dCBzYXZlL3Jlc3RvcmUgb3IgT0FSIGNvdW50ZXJz
ICovCj4+ICAJaWYgKHN0cmVhbS0+Y3R4KQo+Pi0JCWdlbjEyX2VtaXRfb2FyX2NvbmZpZyhzdHJl
YW0tPnBpbm5lZF9jdHgsIGZhbHNlKTsKPj4rCQlnZW4xMl9jb25maWd1cmVfb2FyX2NvbnRleHQo
c3RyZWFtLCBmYWxzZSk7Cj4+ICAJLyogTWFrZSBzdXJlIHdlIGRpc2FibGUgbm9hIHRvIHNhdmUg
cG93ZXIuICovCj4+ICAJaW50ZWxfdW5jb3JlX3Jtdyh1bmNvcmUsIFJQTV9DT05GSUcxLCBHRU4x
MF9HVF9OT0FfRU5BQkxFLCAwKTsKPj5AQCAtMjg2MCw3ICsyODc5LDExIEBAIHZvaWQgaTkxNV9v
YV9pbml0X3JlZ19zdGF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCj4+ICAJCXJl
dHVybjsKPj4gIAlzdHJlYW0gPSBlbmdpbmUtPmk5MTUtPnBlcmYuZXhjbHVzaXZlX3N0cmVhbTsK
Pj4tCWlmIChzdHJlYW0pCj4+KwkvKgo+PisJICogRm9yIGdlbjEyLCBvbmx5IENUWF9SX1BXUl9D
TEtfU1RBVEUgbmVlZHMgdXBkYXRlLCBidXQgdGhlIGNhbGxlcgo+PisJICogaXMgYWxyZWFkeSBk
b2luZyB0aGF0LCBzbyBub3RoaW5nIHRvIGJlIGRvbmUgZm9yIGdlbjEyIGhlcmUuCj4+KwkgKi8K
Pj4rCWlmIChzdHJlYW0gJiYgSU5URUxfR0VOKHN0cmVhbS0+cGVyZi0+aTkxNSkgPCAxMikKPj4g
IAkJZ2VuOF91cGRhdGVfcmVnX3N0YXRlX3VubG9ja2VkKGNlLCBzdHJlYW0pOwo+PiAgfQo+Cj4K
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4
IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

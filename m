Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id F174857F8F
	for <lists+intel-gfx@lfdr.de>; Thu, 27 Jun 2019 11:46:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5D5866E175;
	Thu, 27 Jun 2019 09:46:05 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AD82C6E175
 for <intel-gfx@lists.freedesktop.org>; Thu, 27 Jun 2019 09:46:03 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 17041192-1500050 for multiple; Thu, 27 Jun 2019 10:46:01 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Lionel Landwerlin <lionel.g.landwerlin@intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20190627080045.8814-1-lionel.g.landwerlin@intel.com>
 <20190627080045.8814-8-lionel.g.landwerlin@intel.com>
In-Reply-To: <20190627080045.8814-8-lionel.g.landwerlin@intel.com>
Message-ID: <156162875829.20851.6935372567348885846@skylake-alporthouse-com>
Date: Thu, 27 Jun 2019 10:45:58 +0100
Subject: Re: [Intel-gfx] [PATCH v5 07/10] drm/i915: add a new perf
 configuration execbuf parameter
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBMaW9uZWwgTGFuZHdlcmxpbiAoMjAxOS0wNi0yNyAwOTowMDo0MikKPiBXZSB3YW50
IHRoZSBhYmlsaXR5IHRvIGRpc3BhdGNoIGEgc2V0IG9mIGNvbW1hbmQgYnVmZmVyIHRvIHRoZQo+
IGhhcmR3YXJlLCBlYWNoIHdpdGggYSBkaWZmZXJlbnQgT0EgY29uZmlndXJhdGlvbi4gVG8gYWNo
aWV2ZSB0aGlzLCB3ZQo+IHJldXNlIGEgY291cGxlIG9mIGZpZWxkcyBmcm9tIHRoZSBleGVjYnVm
MiBzdHJ1Y3QgKEkgQ0FOIEhBWgo+IGV4ZWNidWYzPykgdG8gbm90aWZ5IHdoYXQgT0EgY29uZmln
dXJhdGlvbiBzaG91bGQgYmUgdXNlZCBmb3IgYSBiYXRjaAo+IGJ1ZmZlci4gVGhpcyByZXF1aXJl
cyB0aGUgcHJvY2VzcyBtYWtpbmcgdGhlIGV4ZWNidWYgd2l0aCB0aGlzIGZsYWcgdG8KPiBhbHNv
IG93biB0aGUgcGVyZiBmZCBhdCB0aGUgdGltZSBvZiBleGVjYnVmLgo+IAo+IHYyOiBBZGQgYSBl
bWl0X29hX2NvbmZpZygpIHZmdW5jIGluIHRoZSBpbnRlbF9lbmdpbmVfY3MgKENocmlzKQo+ICAg
ICBNb3ZlIG9hX2NvbmZpZyB2bWEgdG8gYWN0aXZlIChDaHJpcykKPiAKPiB2MzogRG9uJ3QgZHJv
cCB0aGUgbG9jayBmb3IgZW5naW5lIGxvb2t1cCAoQ2hyaXMpCj4gICAgIE1vdmUgT0EgY29uZmln
IHZtYSB0byBhY3RpdmUgYmVmb3JlIHdyaXRpbmcgdGhlIHJpbmdidWZmZXIgKENocmlzKQo+IAo+
IHY0OiBSZXVzZSBpOTE1X3VzZXJfZXh0ZW5zaW9uX2ZuCj4gICAgIFNlcmlhbGl6ZSByZXF1ZXN0
cyB3aXRoIE9BIGNvbmZpZyB1cGRhdGVzCj4gCj4gU2lnbmVkLW9mZi1ieTogTGlvbmVsIExhbmR3
ZXJsaW4gPGxpb25lbC5nLmxhbmR3ZXJsaW5AaW50ZWwuY29tPgo+IC0tLQo+ICAuLi4vZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMgICAgfCAxMzAgKysrKysrKysrKysrKysr
KystCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jICAgICB8ICAg
MiArCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oICB8ICAg
OSArKwo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICAgICAgICAgfCAg
IDEgKwo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMgICAgfCAg
IDQgKy0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyAgICAgICAgICAgICAgIHwg
ICA0ICsKPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgICAgICAgICAgIHwg
IDEwICstCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jICAgICAgICAgICAgICB8
ICAyNiArKy0tCj4gIGluY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaCAgICAgICAgICAgICAgICAg
ICB8ICAzNyArKysrKwo+ICA5IGZpbGVzIGNoYW5nZWQsIDIwOCBpbnNlcnRpb25zKCspLCAxNSBk
ZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2V4ZWNidWZmZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9l
eGVjYnVmZmVyLmMKPiBpbmRleCA0NzZmYWRlNmZjYWIuLjE4YWUzZThhNGUwMiAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYwo+IEBAIC0y
ODMsNyArMjgzLDExIEBAIHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgewo+ICAgICAgICAgc3RydWN0
IHsKPiAgICAgICAgICAgICAgICAgdTY0IGZsYWdzOyAvKiogQXZhaWxhYmxlIGV4dGVuc2lvbnMg
cGFyYW1ldGVycyAqLwo+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNi
dWZmZXJfZXh0X3RpbWVsaW5lX2ZlbmNlcyB0aW1lbGluZV9mZW5jZXM7Cj4gKyAgICAgICAgICAg
ICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcl9leHRfcGVyZiBwZXJmX2NvbmZpZzsK
PiAgICAgICAgIH0gZXh0ZW5zaW9uczsKPiArCj4gKyAgICAgICBzdHJ1Y3QgaTkxNV9vYV9jb25m
aWcgKm9hX2NvbmZpZzsgLyoqIEhXIGNvbmZpZ3VyYXRpb24gZm9yIE9BLCBOVUxMIGlzIG5vdCBu
ZWVkZWQuICovCj4gKyAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2FfYm87Cj4g
IH07Cj4gIAo+ICAjZGVmaW5lIGV4ZWNfZW50cnkoRUIsIFZNQSkgKCYoRUIpLT5leGVjWyhWTUEp
LT5leGVjX2ZsYWdzIC0gKEVCKS0+ZmxhZ3NdKQo+IEBAIC0xMjEwLDYgKzEyMTQsMzQgQEAgc3Rh
dGljIGludCByZWxvY19tb3ZlX3RvX2dwdShzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgc3RydWN0
IGk5MTVfdm1hICp2bWEpCj4gICAgICAgICByZXR1cm4gZXJyOwo+ICB9Cj4gIAo+ICsKPiArc3Rh
dGljIGludAo+ICtnZXRfZXhlY2J1Zl9vYV9jb25maWcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2LAo+ICsgICAgICAgICAgICAgICAgICAgICBzMzIgcGVyZl9mZCwgdTY0IG9hX2Nv
bmZpZ19pZCwKPiArICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGk5MTVfb2FfY29uZmlnICoq
b3V0X29hX2NvbmZpZywKPiArICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRybV9pOTE1X2dl
bV9vYmplY3QgKipvdXRfb2Ffb2JqKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgZmlsZSAqcGVyZl9m
aWxlOwo+ICsgICAgICAgaW50IHJldDsKPiArCj4gKyAgICAgICBpZiAoIWRldl9wcml2LT5wZXJm
Lm9hLmV4Y2x1c2l2ZV9zdHJlYW0pCj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+
ICsKPiArICAgICAgIHBlcmZfZmlsZSA9IGZnZXQocGVyZl9mZCk7Cj4gKyAgICAgICBpZiAoIXBl
cmZfZmlsZSkKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsgICAgICAg
aWYgKHBlcmZfZmlsZS0+cHJpdmF0ZV9kYXRhICE9IGRldl9wcml2LT5wZXJmLm9hLmV4Y2x1c2l2
ZV9zdHJlYW0pCj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ICsKPiArICAgICAg
IGZwdXQocGVyZl9maWxlKTsKPiArCj4gKyAgICAgICByZXQgPSBpOTE1X3BlcmZfZ2V0X29hX2Nv
bmZpZyhkZXZfcHJpdiwgb2FfY29uZmlnX2lkLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgb3V0X29hX2NvbmZpZywgb3V0X29hX29iaik7Cj4gKwo+ICsgICAgICAgcmV0
dXJuIHJldDsKPiArfQo+ICsKPiAgc3RhdGljIGludCBfX3JlbG9jX2dwdV9hbGxvYyhzdHJ1Y3Qg
aTkxNV9leGVjYnVmZmVyICplYiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVj
dCBpOTE1X3ZtYSAqdm1hLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQg
aW50IGxlbikKPiBAQCAtMjA3Miw2ICsyMTA0LDY0IEBAIGFkZF90b19jbGllbnQoc3RydWN0IGk5
MTVfcmVxdWVzdCAqcnEsIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkKPiAgICAgICAgIGxpc3RfYWRk
X3RhaWwoJnJxLT5jbGllbnRfbGluaywgJnJxLT5maWxlX3ByaXYtPm1tLnJlcXVlc3RfbGlzdCk7
Cj4gIH0KPiAgCj4gK3N0YXRpYyBpbnQgZWJfb2FfY29uZmlnKHN0cnVjdCBpOTE1X2V4ZWNidWZm
ZXIgKmViKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgaTkxNV92bWEgKm9hX3ZtYTsKPiArICAgICAg
IGludCBlcnI7Cj4gKwo+ICsgICAgICAgaWYgKCFlYi0+b2FfY29uZmlnKQo+ICsgICAgICAgICAg
ICAgICByZXR1cm4gMDsKPiArCj4gKyAgICAgICBlcnIgPSBpOTE1X2FjdGl2ZV9yZXF1ZXN0X3Nl
dCgmZWItPmVuZ2luZS0+bGFzdF9vYV9jb25maWcsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBlYi0+cmVxdWVzdCk7Cj4gKyAgICAgICBpZiAoZXJyKQo+ICsgICAgICAg
ICAgICAgICByZXR1cm4gZXJyOwo+ICsKPiArICAgICAgIC8qCj4gKyAgICAgICAgKiBJZiB0aGUg
cGVyZiBzdHJlYW0gd2FzIG9wZW5lZCB3aXRoIGhvbGQgcHJlZW1wdGlvbiwgZmxhZyB0aGUKPiAr
ICAgICAgICAqIHJlcXVlc3QgcHJvcGVybHkgc28gdGhhdCB0aGUgcHJpb3JpdHkgb2YgdGhlIHJl
cXVlc3QgaXMgYnVtcGVkIG9uY2UKPiArICAgICAgICAqIGl0IHJlYWNoZXMgdGhlIGV4ZWNsaXN0
IHBvcnRzLgo+ICsgICAgICAgICovCj4gKyAgICAgICBpZiAoZWItPmk5MTUtPnBlcmYub2EuZXhj
bHVzaXZlX3N0cmVhbS0+aG9sZF9wcmVlbXB0aW9uKQo+ICsgICAgICAgICAgICAgICBlYi0+cmVx
dWVzdC0+aGFzX3BlcmYgPSB0cnVlOwoKTGVhdmUgdGhpcyBjaHVuayBmb3IgdGhlIG5leHQgYmF0
dGxlXlcgcGF0Y2guCgo+ICsgICAgICAgLyoKPiArICAgICAgICAqIElmIHRoZSBjb25maWcgaGFz
bid0IGNoYW5nZWQsIHNraXAgcmVjb25maWd1cmluZyB0aGUgSFcgKHRoaXMgaXMKPiArICAgICAg
ICAqIHN1YmplY3QgdG8gYSBkZWxheSB3ZSB3YW50IHRvIGF2b2lkIGhhcyBtdWNoIGFzIHBvc3Np
YmxlKS4KPiArICAgICAgICAqLwo+ICsgICAgICAgaWYgKGViLT5vYV9jb25maWcgPT0gZWItPmk5
MTUtPnBlcmYub2EuZXhjbHVzaXZlX3N0cmVhbS0+b2FfY29uZmlnKQo+ICsgICAgICAgICAgICAg
ICByZXR1cm4gMDsKPiArCj4gKyAgICAgICBvYV92bWEgPSBpOTE1X3ZtYV9pbnN0YW5jZShlYi0+
b2FfYm8sCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmZWItPmVuZ2luZS0+
aTkxNS0+Z2d0dC52bSwgTlVMTCk7Cj4gKyAgICAgICBpZiAodW5saWtlbHkoSVNfRVJSKG9hX3Zt
YSkpKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gUFRSX0VSUihvYV92bWEpOwo+ICsKPiArICAg
ICAgIGVyciA9IGk5MTVfdm1hX3BpbihvYV92bWEsIDAsIDAsIFBJTl9HTE9CQUwpOwo+ICsgICAg
ICAgaWYgKGVycikKPiArICAgICAgICAgICAgICAgcmV0dXJuIGVycjsKClVnaC4gV2Ugc2hvdWxk
IG5vdCBiZSBwaW5uZWQgYWZ0ZXIgY3JlYXRpbmcgdGhlIHJlcXVlc3QuIE1pZ2h0IG5vdAptYXR0
ZXIgLS0gaXQncyBqdXN0IHJlc2VydmF0aW9uIHVuZGVyIGl0cyBvd24gbG9jayB0aGF0IG11c3Qg
bm90IGJlCmNyb3NzZWQgd2l0aCB0aGUgdGltZWxpbmUgbG9jayBjdXJyZW50bHkgaGVsZCBoZXJl
LgoKPiArCj4gKyAgICAgICBlcnIgPSBpOTE1X3ZtYV9tb3ZlX3RvX2FjdGl2ZShvYV92bWEsIGVi
LT5yZXF1ZXN0LCAwKTsKCllvdSBjYW4gdW5waW4gaW1tZWRpYXRlbHkgYWZ0ZXIgbW92ZV90b19h
Y3RpdmUgKGFzIHRoZSBhY3RpdmUgaXMgdHJlYXRlZApieSBiZWluZyBwaW5uZWQpLgoKSSdtIHRo
aW5raW5nIHRoaXMgd2lsbCBiZSByZXBsYWNlZCB3aXRoIGp1c3QgaTkxNV9hY3RpdmVfcmVmKCkg
YXMgeW91Cm9ubHkgY2FyZSBhYm91dCB0aGUgdm1hLgoKPiArICAgICAgIGlmIChlcnIpIHsKPiAr
ICAgICAgICAgICAgICAgaTkxNV92bWFfdW5waW4ob2Ffdm1hKTsKPiArICAgICAgICAgICAgICAg
cmV0dXJuIGVycjsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBlcnIgPSBlYi0+ZW5naW5lLT5l
bWl0X2JiX3N0YXJ0KGViLT5yZXF1ZXN0LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBvYV92bWEtPm5vZGUuc3RhcnQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIDAsIEk5MTVfRElTUEFUQ0hfU0VDVVJFKTsKPiArICAgICAgIGlmIChl
cnIpIHsKPiArICAgICAgICAgICAgICAgaTkxNV92bWFfdW5waW4ob2Ffdm1hKTsKPiArICAgICAg
ICAgICAgICAgcmV0dXJuIGVycjsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBpOTE1X3ZtYV91
bnBpbihvYV92bWEpOwo+ICsKPiArICAgICAgIHN3YXAoZWItPm9hX2NvbmZpZywgZWItPmk5MTUt
PnBlcmYub2EuZXhjbHVzaXZlX3N0cmVhbS0+b2FfY29uZmlnKTsKPiArCj4gKyAgICAgICByZXR1
cm4gMDsKPiArfQo+ICsKPiAgc3RhdGljIGludCBlYl9zdWJtaXQoc3RydWN0IGk5MTVfZXhlY2J1
ZmZlciAqZWIpCj4gIHsKPiAgICAgICAgIGludCBlcnI7Cj4gQEAgLTIwOTgsNiArMjE4OCwxMCBA
QCBzdGF0aWMgaW50IGViX3N1Ym1pdChzdHJ1Y3QgaTkxNV9leGVjYnVmZmVyICplYikKPiAgICAg
ICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyOwo+ICAgICAgICAgfQo+ICAKPiArICAgICAg
IGVyciA9IGViX29hX2NvbmZpZyhlYik7Cj4gKyAgICAgICBpZiAoZXJyKQo+ICsgICAgICAgICAg
ICAgICByZXR1cm4gZXJyOwo+ICsKPiAgICAgICAgIGVyciA9IGViLT5lbmdpbmUtPmVtaXRfYmJf
c3RhcnQoZWItPnJlcXVlc3QsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGViLT5iYXRjaC0+bm9kZS5zdGFydCArCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGViLT5iYXRjaF9zdGFydF9vZmZzZXQsCj4gQEAgLTI1MjAsOCArMjYxNCwy
MiBAQCBzdGF0aWMgaW50IHBhcnNlX3RpbWVsaW5lX2ZlbmNlcyhzdHJ1Y3QgaTkxNV91c2VyX2V4
dGVuc2lvbiBfX3VzZXIgKmV4dCwgdm9pZCAqZAo+ICAgICAgICAgcmV0dXJuIDA7Cj4gIH0KPiAg
Cj4gK3N0YXRpYyBpbnQgcGFyc2VfcGVyZl9jb25maWcoc3RydWN0IGk5MTVfdXNlcl9leHRlbnNp
b24gX191c2VyICpleHQsIHZvaWQgKmRhdGEpCj4gK3sKPiArICAgICAgIHN0cnVjdCBpOTE1X2V4
ZWNidWZmZXIgKmViID0gZGF0YTsKPiArCj4gKyAgICAgICBpZiAoY29weV9mcm9tX3VzZXIoJmVi
LT5leHRlbnNpb25zLnBlcmZfY29uZmlnLCBleHQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2l6ZW9mKGViLT5leHRlbnNpb25zLnBlcmZfY29uZmlnKSkpCj4gKyAgICAgICAgICAgICAg
IHJldHVybiAtRUZBVUxUOwo+ICsKPiArICAgICAgIGViLT5leHRlbnNpb25zLmZsYWdzIHw9IEJJ
VChEUk1fSTkxNV9HRU1fRVhFQ0JVRkZFUl9FWFRfUEVSRik7Cj4gKwo+ICsgICAgICAgcmV0dXJu
IDA7Cj4gK30KPiArCj4gIHN0YXRpYyBjb25zdCBpOTE1X3VzZXJfZXh0ZW5zaW9uX2ZuIGV4ZWNi
dWZfZXh0ZW5zaW9uc1tdID0gewo+ICAgICAgICAgIFtEUk1fSTkxNV9HRU1fRVhFQ0JVRkZFUl9F
WFRfVElNRUxJTkVfRkVOQ0VTXSA9IHBhcnNlX3RpbWVsaW5lX2ZlbmNlcywKPiArICAgICAgICBb
RFJNX0k5MTVfR0VNX0VYRUNCVUZGRVJfRVhUX1BFUkZdID0gcGFyc2VfcGVyZl9jb25maWcsCj4g
IH07Cj4gIAo+ICBzdGF0aWMgaW50Cj4gQEAgLTI1NzMsNiArMjY4MSw3IEBAIGk5MTVfZ2VtX2Rv
X2V4ZWNidWZmZXIoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiAgICAgICAgIGViLmJ1ZmZlcl9j
b3VudCA9IGFyZ3MtPmJ1ZmZlcl9jb3VudDsKPiAgICAgICAgIGViLmJhdGNoX3N0YXJ0X29mZnNl
dCA9IGFyZ3MtPmJhdGNoX3N0YXJ0X29mZnNldDsKPiAgICAgICAgIGViLmJhdGNoX2xlbiA9IGFy
Z3MtPmJhdGNoX2xlbjsKPiArICAgICAgIGViLm9hX2NvbmZpZyA9IE5VTEw7Cj4gIAo+ICAgICAg
ICAgZWIuYmF0Y2hfZmxhZ3MgPSAwOwo+ICAgICAgICAgaWYgKGFyZ3MtPmZsYWdzICYgSTkxNV9F
WEVDX1NFQ1VSRSkgewo+IEBAIC0yNjUxLDkgKzI3NjAsMjMgQEAgaTkxNV9nZW1fZG9fZXhlY2J1
ZmZlcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAgICAgICAgaWYgKHVubGlrZWx5KGVycikp
Cj4gICAgICAgICAgICAgICAgIGdvdG8gZXJyX3VubG9jazsKPiAgCj4gKyAgICAgICBpZiAoZWIu
ZXh0ZW5zaW9ucy5mbGFncyAmIEJJVChEUk1fSTkxNV9HRU1fRVhFQ0JVRkZFUl9FWFRfUEVSRikp
IHsKPiArICAgICAgICAgICAgICAgaWYgKCFpbnRlbF9lbmdpbmVfaGFzX29hKGViLmVuZ2luZSkp
IHsKPiArICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSAtRU5PREVWOwo+ICsgICAgICAgICAg
ICAgICAgICAgICAgIGdvdG8gZXJyX2VuZ2luZTsKPiArICAgICAgICAgICAgICAgfQo+ICsKPiAr
ICAgICAgICAgICAgICAgZXJyID0gZ2V0X2V4ZWNidWZfb2FfY29uZmlnKGViLmk5MTUsCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYi5leHRlbnNpb25zLnBl
cmZfY29uZmlnLnBlcmZfZmQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBlYi5leHRlbnNpb25zLnBlcmZfY29uZmlnLm9hX2NvbmZpZywKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZlYi5vYV9jb25maWcsICZlYi5vYV9i
byk7Cj4gKyAgICAgICAgICAgICAgIGlmIChlcnIpCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
Z290byBlcnJfZW5naW5lOwoKV2h5IGlzIHRoaXMgdW5kZXIgdGhlIHN0cnVjdF9tdXRleD8KCj4g
KyAgICAgICB9Cj4gKwo+ICAgICAgICAgZXJyID0gZWJfd2FpdF9mb3JfcmluZygmZWIpOyAvKiBt
YXkgdGVtcG9yYXJpbHkgZHJvcCBzdHJ1Y3RfbXV0ZXggKi8KPiAgICAgICAgIGlmICh1bmxpa2Vs
eShlcnIpKQo+IC0gICAgICAgICAgICAgICBnb3RvIGVycl9lbmdpbmU7Cj4gKyAgICAgICAgICAg
ICAgIGdvdG8gZXJyX29hOwo+ICAKPiAgICAgICAgIGVyciA9IGViX3JlbG9jYXRlKCZlYik7Cj4g
ICAgICAgICBpZiAoZXJyKSB7Cj4gQEAgLTI4MDYsNiArMjkyOSwxMSBAQCBpOTE1X2dlbV9kb19l
eGVjYnVmZmVyKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gIGVycl92bWE6Cj4gICAgICAgICBp
ZiAoZWIuZXhlYykKPiAgICAgICAgICAgICAgICAgZWJfcmVsZWFzZV92bWFzKCZlYik7Cj4gK2Vy
cl9vYToKPiArICAgICAgIGlmIChlYi5vYV9jb25maWcpIHsKPiArICAgICAgICAgICAgICAgaTkx
NV9nZW1fb2JqZWN0X3B1dChlYi5vYV9ibyk7Cj4gKyAgICAgICAgICAgICAgIGk5MTVfb2FfY29u
ZmlnX3B1dChlYi5vYV9jb25maWcpOwo+ICsgICAgICAgfQo+ICBlcnJfZW5naW5lOgo+ICAgICAg
ICAgZWJfdW5waW5fY29udGV4dCgmZWIpOwo+ICBlcnJfdW5sb2NrOgo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCj4gaW5kZXggNDk2MWY3NGZkOTAyLi5iYTRkMmMx
YWJkMWEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5l
X2NzLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwo+
IEBAIC04NTksNiArODU5LDggQEAgaW50IGludGVsX2VuZ2luZV9pbml0X2NvbW1vbihzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUpCj4gIAo+ICAgICAgICAgZW5naW5lLT5zZXRfZGVmYXVs
dF9zdWJtaXNzaW9uKGVuZ2luZSk7Cj4gIAo+ICsgICAgICAgSU5JVF9BQ1RJVkVfUkVRVUVTVCgm
ZW5naW5lLT5sYXN0X29hX2NvbmZpZyk7Cj4gKwo+ICAgICAgICAgcmV0dXJuIDA7Cj4gIAo+ICBl
cnJfdW5waW46Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2Vu
Z2luZV90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVz
LmgKPiBpbmRleCA3ZTA1NjExNDM0NGUuLjM5ZGE0MDkzN2U3ZiAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaAo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCj4gQEAgLTM2Myw2ICszNjMsOCBA
QCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzIHsKPiAgICAgICAgIHN0cnVjdCBpOTE1X3dhX2xpc3Qg
d2FfbGlzdDsKPiAgICAgICAgIHN0cnVjdCBpOTE1X3dhX2xpc3Qgd2hpdGVsaXN0Owo+ICAKPiAr
ICAgICAgIHN0cnVjdCBpOTE1X2FjdGl2ZV9yZXF1ZXN0IGxhc3Rfb2FfY29uZmlnOwo+ICsKPiAg
ICAgICAgIHUzMiAgICAgICAgICAgICBpcnFfa2VlcF9tYXNrOyAvKiBhbHdheXMga2VlcCB0aGVz
ZSBpbnRlcnJ1cHRzICovCj4gICAgICAgICB1MzIgICAgICAgICAgICAgaXJxX2VuYWJsZV9tYXNr
OyAvKiBiaXRtYXNrIHRvIGVuYWJsZSByaW5nIGludGVycnVwdCAqLwo+ICAgICAgICAgdm9pZCAg
ICAgICAgICAgICgqaXJxX2VuYWJsZSkoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsK
PiBAQCAtNDQ2LDYgKzQ0OCw3IEBAIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mgewo+ICAjZGVmaW5l
IEk5MTVfRU5HSU5FX0hBU19TRU1BUEhPUkVTICAgQklUKDMpCj4gICNkZWZpbmUgSTkxNV9FTkdJ
TkVfTkVFRFNfQlJFQURDUlVNQl9UQVNLTEVUIEJJVCg0KQo+ICAjZGVmaW5lIEk5MTVfRU5HSU5F
X0lTX1ZJUlRVQUwgICAgICAgQklUKDUpCj4gKyNkZWZpbmUgSTkxNV9FTkdJTkVfSEFTX09BICAg
ICAgICAgICBCSVQoNikKPiAgICAgICAgIHVuc2lnbmVkIGludCBmbGFnczsKPiAgCj4gICAgICAg
ICAvKgo+IEBAIC01NDEsNiArNTQ0LDEyIEBAIGludGVsX2VuZ2luZV9pc192aXJ0dWFsKGNvbnN0
IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAgICAgICAgIHJldHVybiBlbmdpbmUt
PmZsYWdzICYgSTkxNV9FTkdJTkVfSVNfVklSVFVBTDsKPiAgfQo+ICAKPiArc3RhdGljIGlubGlu
ZSBib29sCj4gK2ludGVsX2VuZ2luZV9oYXNfb2EoY29uc3Qgc3RydWN0IGludGVsX2VuZ2luZV9j
cyAqZW5naW5lKQo+ICt7Cj4gKyAgICAgICByZXR1cm4gZW5naW5lLT5mbGFncyAmIEk5MTVfRU5H
SU5FX0hBU19PQTsKPiArfQo+ICsKPiAgI2RlZmluZSBpbnN0ZG9uZV9zbGljZV9tYXNrKGRldl9w
cml2X18pIFwKPiAgICAgICAgIChJU19HRU4oZGV2X3ByaXZfXywgNykgPyBcCj4gICAgICAgICAg
MSA6IFJVTlRJTUVfSU5GTyhkZXZfcHJpdl9fKS0+c3NldS5zbGljZV9tYXNrKQo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2xyYy5jCj4gaW5kZXggMjg2ODViYTkxYTJjLi5hNmVhNDY4OTg2ZDEg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwo+IEBAIC0yNzYzLDYgKzI3NjMs
NyBAQCBpbnQgaW50ZWxfZXhlY2xpc3RzX3N1Ym1pc3Npb25fc2V0dXAoc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lKQo+ICAgICAgICAgICAgICAgICBlbmdpbmUtPmluaXRfY29udGV4dCA9
IGdlbjhfaW5pdF9yY3NfY29udGV4dDsKPiAgICAgICAgICAgICAgICAgZW5naW5lLT5lbWl0X2Zs
dXNoID0gZ2VuOF9lbWl0X2ZsdXNoX3JlbmRlcjsKPiAgICAgICAgICAgICAgICAgZW5naW5lLT5l
bWl0X2ZpbmlfYnJlYWRjcnVtYiA9IGdlbjhfZW1pdF9maW5pX2JyZWFkY3J1bWJfcmNzOwo+ICsg
ICAgICAgICAgICAgICBlbmdpbmUtPmZsYWdzIHw9IEk5MTVfRU5HSU5FX0hBU19PQTsKPiAgICAg
ICAgIH0KPiAgCj4gICAgICAgICByZXR1cm4gMDsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ2J1ZmZlci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfcmluZ2J1ZmZlci5jCj4gaW5kZXggZjA5NDQwNmRjYzU2Li5hMWFlZTA5MmQwYTMgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ2J1ZmZlci5jCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ2J1ZmZlci5jCj4gQEAgLTIx
OTIsOCArMjE5MiwxMCBAQCBzdGF0aWMgdm9pZCBzZXR1cF9yY3Moc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lKQo+ICAgICAgICAgICAgICAgICBlbmdpbmUtPmlycV9lbmFibGVfbWFzayA9
IEk5MTVfVVNFUl9JTlRFUlJVUFQ7Cj4gICAgICAgICB9Cj4gIAo+IC0gICAgICAgaWYgKElTX0hB
U1dFTEwoaTkxNSkpCj4gKyAgICAgICBpZiAoSVNfSEFTV0VMTChpOTE1KSkgewo+ICAgICAgICAg
ICAgICAgICBlbmdpbmUtPmVtaXRfYmJfc3RhcnQgPSBoc3dfZW1pdF9iYl9zdGFydDsKPiArICAg
ICAgICAgICAgICAgZW5naW5lLT5mbGFncyB8PSBJOTE1X0VOR0lORV9IQVNfT0E7Cj4gKyAgICAg
ICB9Cj4gIAo+ICAgICAgICAgZW5naW5lLT5yZXN1bWUgPSByY3NfcmVzdW1lOwo+ICB9Cj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5jCj4gaW5kZXggNDhmOTAwOWE2MzE4Li5lZjU0Y2YxYzU0YTUgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKPiBAQCAtNDg2LDYgKzQ4NiwxMCBAQCBzdGF0aWMg
aW50IGk5MTVfZ2V0cGFyYW1faW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0
YSwKPiAgICAgICAgIGNhc2UgSTkxNV9QQVJBTV9QRVJGX1JFVklTSU9OOgo+ICAgICAgICAgICAg
ICAgICB2YWx1ZSA9IDE7Cj4gICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgY2FzZSBJ
OTE1X1BBUkFNX0hBU19FWEVDX1BFUkZfQ09ORklHOgo+ICsgICAgICAgICAgICAgICAvKiBPYnZp
b3VzbHkgcmVxdWlyZXMgcGVyZiBzdXBwb3J0LiAqLwo+ICsgICAgICAgICAgICAgICB2YWx1ZSA9
IGRldl9wcml2LT5wZXJmLmluaXRpYWxpemVkOwo+ICsgICAgICAgICAgICAgICBicmVhazsKPiAg
ICAgICAgIGRlZmF1bHQ6Cj4gICAgICAgICAgICAgICAgIERSTV9ERUJVRygiVW5rbm93biBwYXJh
bWV0ZXIgJWRcbiIsIHBhcmFtLT5wYXJhbSk7Cj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlO
VkFMOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAo+IGluZGV4IDAzMjNjODE4MmE2Ny4uNTFiMTAz
NDkzNjIzIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCj4gQEAgLTEwOTYsNiArMTA5Niw4
IEBAIHN0cnVjdCBpOTE1X29hX3JlZyB7Cj4gIH07Cj4gIAo+ICBzdHJ1Y3QgaTkxNV9vYV9jb25m
aWcgewo+ICsgICAgICAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTU7Cj4gKwo+ICAgICAg
ICAgY2hhciB1dWlkW1VVSURfU1RSSU5HX0xFTiArIDFdOwo+ICAgICAgICAgaW50IGlkOwo+ICAK
PiBAQCAtMTExNCw3ICsxMTE2LDcgQEAgc3RydWN0IGk5MTVfb2FfY29uZmlnIHsKPiAgCj4gICAg
ICAgICBzdHJ1Y3QgbGlzdF9oZWFkIHZtYV9saW5rOwo+ICAKPiAtICAgICAgIGF0b21pY190IHJl
Zl9jb3VudDsKPiArICAgICAgIHN0cnVjdCBrcmVmIHJlZjsKPiAgfTsKPiAgCj4gIHN0cnVjdCBp
OTE1X3BlcmZfc3RyZWFtOwo+IEBAIC0yNjEyLDYgKzI2MTQsMTIgQEAgaW50IGk5MTVfcGVyZl9n
ZXRfb2FfY29uZmlnKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpbnQgbWV0cmljc19zZXQsCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cnVjdCBpOTE1X29hX2NvbmZpZyAqKm91dF9jb25maWcsCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICoqb3V0X29iaik7Cj4g
K3ZvaWQgaTkxNV9vYV9jb25maWdfcmVsZWFzZShzdHJ1Y3Qga3JlZiAqcmVmKTsKPiArCj4gK3N0
YXRpYyBpbmxpbmUgdm9pZCBpOTE1X29hX2NvbmZpZ19wdXQoc3RydWN0IGk5MTVfb2FfY29uZmln
ICpvYV9jb25maWcpCj4gK3sKPiArICAgICAgIGtyZWZfcHV0KCZvYV9jb25maWctPnJlZiwgaTkx
NV9vYV9jb25maWdfcmVsZWFzZSk7Cj4gK30KPiAgCj4gIC8qIGk5MTVfZ2VtX2V2aWN0LmMgKi8K
PiAgaW50IF9fbXVzdF9jaGVjayBpOTE1X2dlbV9ldmljdF9zb21ldGhpbmcoc3RydWN0IGk5MTVf
YWRkcmVzc19zcGFjZSAqdm0sCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcGVyZi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKPiBpbmRleCBiMmY1
YmE4NzkyMWMuLjM0ZDc0ZmE2NGM3NCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3BlcmYuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5jCj4g
QEAgLTM2NiwxMCArMzY2LDExIEBAIHN0cnVjdCBwZXJmX29wZW5fcHJvcGVydGllcyB7Cj4gICAg
ICAgICBpbnQgb2FfcGVyaW9kX2V4cG9uZW50Owo+ICB9Owo+ICAKPiAtc3RhdGljIHZvaWQgcHV0
X29hX2NvbmZpZyhzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2NvbmZpZykKPiArdm9pZCBpOTE1
X29hX2NvbmZpZ19yZWxlYXNlKHN0cnVjdCBrcmVmICpyZWYpCj4gIHsKPiAtICAgICAgIGlmICgh
YXRvbWljX2RlY19hbmRfdGVzdCgmb2FfY29uZmlnLT5yZWZfY291bnQpKQo+IC0gICAgICAgICAg
ICAgICByZXR1cm47Cj4gKyAgICAgICBzdHJ1Y3QgaTkxNV9vYV9jb25maWcgKm9hX2NvbmZpZyA9
IGNvbnRhaW5lcl9vZihyZWYsIHR5cGVvZigqb2FfY29uZmlnKSwgcmVmKTsKPiArCj4gKyAgICAg
ICBsb2NrZGVwX2Fzc2VydF9oZWxkKCZvYV9jb25maWctPmk5MTUtPnBlcmYubWV0cmljc19sb2Nr
KTsKClRoYXQncyBub3QgdHJ1ZSBmb3IgdGhlIGViIHBhdGhzLgoKPiAgCj4gICAgICAgICBpZiAo
b2FfY29uZmlnLT5vYmopIHsKPiAgICAgICAgICAgICAgICAgbGlzdF9kZWwoJm9hX2NvbmZpZy0+
dm1hX2xpbmspOwo+IEBAIC00ODUsNyArNDg2LDcgQEAgaW50IGk5MTVfcGVyZl9nZXRfb2FfY29u
ZmlnKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAo+ICAgICAgICAgfQo+ICAKPiAgICAg
ICAgIGlmIChvdXRfY29uZmlnKSB7Cj4gLSAgICAgICAgICAgICAgIGF0b21pY19pbmMoJm9hX2Nv
bmZpZy0+cmVmX2NvdW50KTsKPiArICAgICAgICAgICAgICAga3JlZl9nZXQoJm9hX2NvbmZpZy0+
cmVmKTsKPiAgICAgICAgICAgICAgICAgKm91dF9jb25maWcgPSBvYV9jb25maWc7Cj4gICAgICAg
ICB9Cj4gIAo+IEBAIC01MDcsNyArNTA4LDcgQEAgaW50IGk5MTVfcGVyZl9nZXRfb2FfY29uZmln
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAo+ICAKPiAgZXJyX2J1Zl9hbGxvYzoKPiAg
ICAgICAgIGlmIChvdXRfY29uZmlnKSB7Cj4gLSAgICAgICAgICAgICAgIHB1dF9vYV9jb25maWco
b2FfY29uZmlnKTsKPiArICAgICAgICAgICAgICAgaTkxNV9vYV9jb25maWdfcHV0KG9hX2NvbmZp
Zyk7Cj4gICAgICAgICAgICAgICAgICpvdXRfY29uZmlnID0gTlVMTDsKPiAgICAgICAgIH0KPiAg
dW5sb2NrOgo+IEBAIC0xNDgzLDcgKzE0ODQsNyBAQCBzdGF0aWMgdm9pZCBpOTE1X29hX3N0cmVh
bV9kZXN0cm95KHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCj4gICAgICAgICBpZiAo
c3RyZWFtLT5jdHgpCj4gICAgICAgICAgICAgICAgIG9hX3B1dF9yZW5kZXJfY3R4X2lkKHN0cmVh
bSk7Cj4gIAo+IC0gICAgICAgcHV0X29hX2NvbmZpZyhzdHJlYW0tPm9hX2NvbmZpZyk7Cj4gKyAg
ICAgICBpOTE1X29hX2NvbmZpZ19wdXQoc3RyZWFtLT5vYV9jb25maWcpOwo+ICAKPiAgICAgICAg
IGlmIChkZXZfcHJpdi0+cGVyZi5vYS5zcHVyaW91c19yZXBvcnRfcnMubWlzc2VkKSB7Cj4gICAg
ICAgICAgICAgICAgIERSTV9OT1RFKCIlZCBzcHVyaW91cyBPQSByZXBvcnQgbm90aWNlcyBzdXBw
cmVzc2VkIGR1ZSB0byByYXRlbGltaXRpbmdcbiIsCj4gQEAgLTI0MzAsNyArMjQzMSw3IEBAIHN0
YXRpYyBpbnQgaTkxNV9vYV9zdHJlYW1faW5pdChzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3Ry
ZWFtLAo+ICAgICAgICAgZnJlZV9vYV9idWZmZXIoZGV2X3ByaXYpOwo+ICAKPiAgZXJyX29hX2J1
Zl9hbGxvYzoKPiAtICAgICAgIHB1dF9vYV9jb25maWcoc3RyZWFtLT5vYV9jb25maWcpOwo+ICsg
ICAgICAgaTkxNV9vYV9jb25maWdfcHV0KHN0cmVhbS0+b2FfY29uZmlnKTsKPiAgCj4gICAgICAg
ICBpbnRlbF91bmNvcmVfZm9yY2V3YWtlX3B1dCgmZGV2X3ByaXYtPnVuY29yZSwgRk9SQ0VXQUtF
X0FMTCk7Cj4gICAgICAgICBpbnRlbF9ydW50aW1lX3BtX3B1dCgmZGV2X3ByaXYtPnJ1bnRpbWVf
cG0sIHN0cmVhbS0+d2FrZXJlZik7Cj4gQEAgLTMyNDYsNyArMzI0Nyw3IEBAIHZvaWQgaTkxNV9w
ZXJmX3JlZ2lzdGVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgICAgICAg
IGlmIChyZXQpCj4gICAgICAgICAgICAgICAgIGdvdG8gc3lzZnNfZXJyb3I7Cj4gIAo+IC0gICAg
ICAgYXRvbWljX3NldCgmZGV2X3ByaXYtPnBlcmYub2EudGVzdF9jb25maWcucmVmX2NvdW50LCAx
KTsKPiArICAgICAgIGRldl9wcml2LT5wZXJmLm9hLnRlc3RfY29uZmlnLmk5MTUgPSBkZXZfcHJp
djsKPiAgCj4gICAgICAgICBnb3RvIGV4aXQ7Cj4gIAo+IEBAIC0zNTAyLDcgKzM1MDMsOCBAQCBp
bnQgaTkxNV9wZXJmX2FkZF9jb25maWdfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9p
ZCAqZGF0YSwKPiAgICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gICAgICAgICB9Cj4g
IAo+IC0gICAgICAgYXRvbWljX3NldCgmb2FfY29uZmlnLT5yZWZfY291bnQsIDEpOwo+ICsgICAg
ICAgb2FfY29uZmlnLT5pOTE1ID0gZGV2X3ByaXY7Cj4gKyAgICAgICBrcmVmX2luaXQoJm9hX2Nv
bmZpZy0+cmVmKTsKPiAgCj4gICAgICAgICBpZiAoIXV1aWRfaXNfdmFsaWQoYXJncy0+dXVpZCkp
IHsKPiAgICAgICAgICAgICAgICAgRFJNX0RFQlVHKCJJbnZhbGlkIHV1aWQgZm9ybWF0IGZvciBP
QSBjb25maWdcbiIpOwo+IEBAIC0zNjAxLDcgKzM2MDMsNyBAQCBpbnQgaTkxNV9wZXJmX2FkZF9j
b25maWdfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKPiAgc3lzZnNf
ZXJyOgo+ICAgICAgICAgbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+cGVyZi5tZXRyaWNzX2xvY2sp
Owo+ICByZWdfZXJyOgo+IC0gICAgICAgcHV0X29hX2NvbmZpZyhvYV9jb25maWcpOwo+ICsgICAg
ICAgaTkxNV9vYV9jb25maWdfcHV0KG9hX2NvbmZpZyk7Cj4gICAgICAgICBEUk1fREVCVUcoIkZh
aWxlZCB0byBhZGQgbmV3IE9BIGNvbmZpZ1xuIik7Cj4gICAgICAgICByZXR1cm4gZXJyOwo+ICB9
Cj4gQEAgLTM2NTUsNyArMzY1Nyw3IEBAIGludCBpOTE1X3BlcmZfcmVtb3ZlX2NvbmZpZ19pb2N0
bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAo+ICAKPiAgICAgICAgIERSTV9E
RUJVRygiUmVtb3ZlZCBjb25maWcgJXMgaWQ9JWlcbiIsIG9hX2NvbmZpZy0+dXVpZCwgb2FfY29u
ZmlnLT5pZCk7Cj4gIAo+IC0gICAgICAgcHV0X29hX2NvbmZpZyhvYV9jb25maWcpOwo+ICsgICAg
ICAgaTkxNV9vYV9jb25maWdfcHV0KG9hX2NvbmZpZyk7Cj4gIAo+ICBjb25maWdfZXJyOgo+ICAg
ICAgICAgbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+cGVyZi5tZXRyaWNzX2xvY2spOwo+IEBAIC0z
ODI0LDcgKzM4MjYsNyBAQCBzdGF0aWMgaW50IGRlc3Ryb3lfY29uZmlnKGludCBpZCwgdm9pZCAq
cCwgdm9pZCAqZGF0YSkKPiAgewo+ICAgICAgICAgc3RydWN0IGk5MTVfb2FfY29uZmlnICpvYV9j
b25maWcgPSBwOwo+ICAKPiAtICAgICAgIHB1dF9vYV9jb25maWcob2FfY29uZmlnKTsKPiArICAg
ICAgIGk5MTVfb2FfY29uZmlnX3B1dChvYV9jb25maWcpOwo+ICAKPiAgICAgICAgIHJldHVybiAw
Owo+ICB9Cj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaCBiL2luY2x1
ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAo+IGluZGV4IGI3ZmUxOTE1ZTM0ZC4uNTkzOGE3Mzk2M2Zl
IDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAo+ICsrKyBiL2luY2x1
ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAo+IEBAIC02MjMsNiArNjIzLDE2IEBAIHR5cGVkZWYgc3Ry
dWN0IGRybV9pOTE1X2lycV93YWl0IHsKPiAgICovCj4gICNkZWZpbmUgSTkxNV9QQVJBTV9IQVNf
RVhFQ19USU1FTElORV9GRU5DRVMgNTUKPiAgCj4gKy8qCj4gKyAqIFJlcXVlc3QgYW4gaTkxNS9w
ZXJmIHBlcmZvcm1hbmNlIGNvbmZpZ3VyYXRpb24gY2hhbmdlIGJlZm9yZSBydW5uaW5nIHRoZQo+
ICsgKiBjb21tYW5kcyBnaXZlbiBpbiBhbiBleGVjYnVmLgo+ICsgKgo+ICsgKiBQZXJmb3JtYW5j
ZSBjb25maWd1cmF0aW9uIElEIGFuZCB0aGUgZmlsZSBkZXNjcmlwdG9yIG9mIHRoZSBpOTE1IHBl
cmYKPiArICogc3RyZWFtIGFyZSBnaXZlbiB0aHJvdWdoIGRybV9pOTE1X2dlbV9leGVjYnVmZmVy
X2V4dF9wZXJmLiBTZWUKPiArICogSTkxNV9FWEVDX0VYVC4KPiArICovCj4gKyNkZWZpbmUgSTkx
NV9QQVJBTV9IQVNfRVhFQ19QRVJGX0NPTkZJRyA1Ngo+ICsKPiAgLyogTXVzdCBiZSBrZXB0IGNv
bXBhY3QgLS0gbm8gaG9sZXMgYW5kIHdlbGwgZG9jdW1lbnRlZCAqLwo+ICAKPiAgdHlwZWRlZiBz
dHJ1Y3QgZHJtX2k5MTVfZ2V0cGFyYW0gewo+IEBAIC0xMDI2LDYgKzEwMzYsMTIgQEAgZW51bSBk
cm1faTkxNV9nZW1fZXhlY2J1ZmZlcl9leHQgewo+ICAgICAgICAgICovCj4gICAgICAgICBEUk1f
STkxNV9HRU1fRVhFQ0JVRkZFUl9FWFRfVElNRUxJTkVfRkVOQ0VTLAo+ICAKPiArICAgICAgIC8q
Kgo+ICsgICAgICAgICogVGhpcyBpZGVudGlmaWVyIGlzIGFzc29jaWF0ZWQgd2l0aAo+ICsgICAg
ICAgICogZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXJfcGVyZl9leHQuCj4gKyAgICAgICAgKi8KPiAr
ICAgICAgIERSTV9JOTE1X0dFTV9FWEVDQlVGRkVSX0VYVF9QRVJGLAo+ICsKPiAgICAgICAgIERS
TV9JOTE1X0dFTV9FWEVDQlVGRkVSX0VYVF9NQVggLyogbm9uLUFCSSAqLwo+ICB9Owo+ICAKPiBA
QCAtMTA1NCw2ICsxMDcwLDI3IEBAIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcl9leHRf
dGltZWxpbmVfZmVuY2VzIHsKPiAgICAgICAgIF9fdTY0IHZhbHVlc19wdHI7Cj4gIH07Cj4gIAo+
ICtzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXJfZXh0X3BlcmYgewo+ICsgICAgICAgc3Ry
dWN0IGk5MTVfdXNlcl9leHRlbnNpb24gYmFzZTsKPiArCj4gKyAgICAgICAvKioKPiArICAgICAg
ICAqIFBlcmZvcm1hbmNlIGZpbGUgZGVzY3JpcHRvciByZXR1cm5lZCBieSBEUk1fSU9DVExfSTkx
NV9QRVJGX09QRU4uCj4gKyAgICAgICAgKiBUaGlzIGlzIHVzZWQgdG8gaWRlbnRpZnkgdGhhdCB0
aGUgYXBwbGljYXRpb24KPiArICAgICAgICAqLwo+ICsgICAgICAgX19zMzIgcGVyZl9mZDsKPiAr
Cj4gKyAgICAgICAvKioKPiArICAgICAgICAqIFVudXNlZCBmb3Igbm93LiBNdXN0IGJlIGNsZWFy
ZWQgdG8gemVyby4KPiArICAgICAgICAqLwo+ICsgICAgICAgX191MzIgcGFkOwo+ICsKPiArICAg
ICAgIC8qKgo+ICsgICAgICAgICogT0EgY29uZmlndXJhdGlvbiBJRCB0byBzd2l0Y2ggdG8gYmVm
b3JlIGV4ZWN1dGluZyB0aGUgY29tbWFuZHMKPiArICAgICAgICAqIGFzc29jaWF0ZWQgdG8gdGhl
IGV4ZWNidWYuCj4gKyAgICAgICAgKi8KPiArICAgICAgIF9fdTY0IG9hX2NvbmZpZzsKPiArfTsK
PiArCj4gIHN0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcjIgewo+ICAgICAgICAgLyoqCj4g
ICAgICAgICAgKiBMaXN0IG9mIGdlbV9leGVjX29iamVjdDIgc3RydWN0cwo+IC0tIAo+IDIuMjEu
MC4zOTIuZ2Y4ZjY3ODcxNTllCj4gCj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KPiBJbnRlbC1nZnggbWFpbGluZyBsaXN0Cj4gSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vaW50ZWwtZ2Z4Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2lu
dGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6878DFE0B2
	for <lists+intel-gfx@lfdr.de>; Fri, 15 Nov 2019 15:58:10 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A1FE46E78A;
	Fri, 15 Nov 2019 14:58:08 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9DB6A6E787;
 Fri, 15 Nov 2019 14:58:06 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 19214498-1500050 for multiple; Fri, 15 Nov 2019 14:58:03 +0000
MIME-Version: 1.0
To: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <63f9d35b-be47-2996-9624-571ef62f7dba@linux.intel.com>
References: <20191114191546.149722-1-chris@chris-wilson.co.uk>
 <d4ed5098-47d2-8c5e-ec22-b405e4894e66@linux.intel.com>
 <157382334855.11997.2341234642800700162@skylake-alporthouse-com>
 <63f9d35b-be47-2996-9624-571ef62f7dba@linux.intel.com>
Message-ID: <157382988048.11997.11923349142639979993@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Fri, 15 Nov 2019 14:58:00 +0000
Subject: Re: [Intel-gfx] [PATCH i-g-t] i915/gem_exec_balancer: Throw a few
 hangs into the virtual pipelines
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBUdnJ0a28gVXJzdWxpbiAoMjAxOS0xMS0xNSAxNDo1MjoxNikKPiAKPiBPbiAxNS8x
MS8yMDE5IDEzOjA5LCBDaHJpcyBXaWxzb24gd3JvdGU6Cj4gPiBRdW90aW5nIFR2cnRrbyBVcnN1
bGluICgyMDE5LTExLTE1IDEzOjAyOjI0KQo+ID4+Cj4gPj4gT24gMTQvMTEvMjAxOSAxOToxNSwg
Q2hyaXMgV2lsc29uIHdyb3RlOgo+ID4+PiBBbHRob3VnaCBhIHZpcnR1YWwgZW5naW5lIGl0c2Vs
ZiBoYXMgbm8gaGFuZyBkZXRlY3Rpb247IHRoYXQgaXMgb24gdGhlCj4gPj4+IHVuZGVybHlpbmcg
cGh5c2ljYWwgZW5naW5lcywgaXQgZG9lcyBwcm92aWRlIGEgdW5pcXVlIG1lYW5zIGZvciBjbGll
bnRzCj4gPj4+IHRvIHRyeSBhbmQgYnJlYWsgdGhlIHN5c3RlbS4gVHJ5IGFuZCBicmVhayBpdCBi
ZWZvcmUgdGhleSBkby4KPiA+Pj4KPiA+Pj4gU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxj
aHJpc0BjaHJpcy13aWxzb24uY28udWs+Cj4gPj4+IENjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtv
LnVyc3VsaW5AaW50ZWwuY29tPgo+ID4+PiAtLS0KPiA+Pj4gICAgdGVzdHMvaTkxNS9nZW1fZXhl
Y19iYWxhbmNlci5jIHwgMTA1ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwo+ID4+
PiAgICAxIGZpbGUgY2hhbmdlZCwgMTA1IGluc2VydGlvbnMoKykKPiA+Pj4KPiA+Pj4gZGlmZiAt
LWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX2V4ZWNfYmFsYW5jZXIuYyBiL3Rlc3RzL2k5MTUvZ2VtX2V4
ZWNfYmFsYW5jZXIuYwo+ID4+PiBpbmRleCA3MGM0NTI5YjQuLjg2MDI4Y2ZkZCAxMDA2NDQKPiA+
Pj4gLS0tIGEvdGVzdHMvaTkxNS9nZW1fZXhlY19iYWxhbmNlci5jCj4gPj4+ICsrKyBiL3Rlc3Rz
L2k5MTUvZ2VtX2V4ZWNfYmFsYW5jZXIuYwo+ID4+PiBAQCAtMjQsNiArMjQsNyBAQAo+ID4+PiAg
ICAjaW5jbHVkZSA8c2NoZWQuaD4KPiA+Pj4gICAgCj4gPj4+ICAgICNpbmNsdWRlICJpZ3QuaCIK
PiA+Pj4gKyNpbmNsdWRlICJpZ3RfZ3QuaCIKPiA+Pj4gICAgI2luY2x1ZGUgImlndF9wZXJmLmgi
Cj4gPj4+ICAgICNpbmNsdWRlICJpOTE1L2dlbV9yaW5nLmgiCj4gPj4+ICAgICNpbmNsdWRlICJz
d19zeW5jLmgiCj4gPj4+IEBAIC0xMzE0LDYgKzEzMTUsMTAyIEBAIHN0YXRpYyB2b2lkIHNlbWFw
aG9yZShpbnQgaTkxNSkKPiA+Pj4gICAgICAgIGdlbV9xdWllc2NlbnRfZ3B1KGk5MTUpOwo+ID4+
PiAgICB9Cj4gPj4+ICAgIAo+ID4+PiArc3RhdGljIHZvaWQgc2V0X3VuYmFubmFibGUoaW50IGk5
MTUsIHVpbnQzMl90IGN0eCkKPiA+Pj4gK3sKPiA+Pj4gKyAgICAgc3RydWN0IGRybV9pOTE1X2dl
bV9jb250ZXh0X3BhcmFtIHAgPSB7Cj4gPj4+ICsgICAgICAgICAgICAgLmN0eF9pZCA9IGN0eCwK
PiA+Pj4gKyAgICAgICAgICAgICAucGFyYW0gPSBJOTE1X0NPTlRFWFRfUEFSQU1fQkFOTkFCTEUs
Cj4gPj4+ICsgICAgIH07Cj4gPj4+ICsKPiA+Pj4gKyAgICAgaWd0X2Fzc2VydF9lcShfX2dlbV9j
b250ZXh0X3NldF9wYXJhbShpOTE1LCAmcCksIDApOwo+ID4+PiArfQo+ID4+PiArCj4gPj4+ICtz
dGF0aWMgdm9pZCBoYW5nbWUoaW50IGk5MTUpCj4gPj4+ICt7Cj4gPj4+ICsgICAgIHN0cnVjdCBk
cm1faTkxNV9nZW1fZXhlY19vYmplY3QyIGJhdGNoID0gewo+ID4+PiArICAgICAgICAgICAgIC5o
YW5kbGUgPSBiYXRjaF9jcmVhdGUoaTkxNSksCj4gPj4+ICsgICAgIH07Cj4gPj4+ICsKPiA+Pj4g
KyAgICAgLyoKPiA+Pj4gKyAgICAgICogRmlsbCB0aGUgYXZhaWxhYmxlIGVuZ2luZXMgd2l0aCBo
YW5naW5nIHZpcnR1YWwgZW5naW5lcyBhbmQgdmVyaWZ5Cj4gPj4+ICsgICAgICAqIHRoYXQgZXhl
Y3V0aW9uIGNvbnRpbnVlcyBvbnRvIHRoZSBzZWNvbmQgYmF0Y2guCj4gPj4+ICsgICAgICAqLwo+
ID4+PiArCj4gPj4+ICsgICAgIGZvciAoaW50IGNsYXNzID0gMTsgY2xhc3MgPCAzMjsgY2xhc3Mr
Kykgewo+ID4+PiArICAgICAgICAgICAgIHN0cnVjdCBpOTE1X2VuZ2luZV9jbGFzc19pbnN0YW5j
ZSAqY2k7Cj4gPj4+ICsgICAgICAgICAgICAgc3RydWN0IGNsaWVudCB7Cj4gPj4+ICsgICAgICAg
ICAgICAgICAgICAgICBpZ3Rfc3Bpbl90ICpzcGluWzJdOwo+ID4+PiArICAgICAgICAgICAgIH0g
KmNsaWVudDsKPiA+Pj4gKyAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgY291bnQ7Cj4gPj4+ICsg
ICAgICAgICAgICAgdWludDMyX3QgYmc7Cj4gPj4+ICsKPiA+Pj4gKyAgICAgICAgICAgICBjaSA9
IGxpc3RfZW5naW5lcyhpOTE1LCAxdSA8PCBjbGFzcywgJmNvdW50KTsKPiA+Pj4gKyAgICAgICAg
ICAgICBpZiAoIWNpKQo+ID4+PiArICAgICAgICAgICAgICAgICAgICAgY29udGludWU7Cj4gPj4+
ICsKPiA+Pj4gKyAgICAgICAgICAgICBpZiAoY291bnQgPCAyKSB7Cj4gPj4+ICsgICAgICAgICAg
ICAgICAgICAgICBmcmVlKGNpKTsKPiA+Pj4gKyAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVl
Owo+ID4+PiArICAgICAgICAgICAgIH0KPiA+Pj4gKwo+ID4+PiArICAgICAgICAgICAgIGNsaWVu
dCA9IG1hbGxvYyhzaXplb2YoKmNsaWVudCkgKiBjb3VudCk7Cj4gPj4+ICsgICAgICAgICAgICAg
aWd0X2Fzc2VydChjbGllbnQpOwo+ID4+PiArCj4gPj4+ICsgICAgICAgICAgICAgZm9yIChpbnQg
aSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7Cj4gPj4+ICsgICAgICAgICAgICAgICAgICAgICB1aW50
MzJfdCBjdHggPSBnZW1fY29udGV4dF9jcmVhdGUoaTkxNSk7Cj4gPj4+ICsgICAgICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgY2xpZW50ICpjID0gJmNsaWVudFtpXTsKPiA+Pj4gKyAgICAgICAgICAg
ICAgICAgICAgIHVuc2lnbmVkIGludCBmbGFnczsKPiA+Pj4gKwo+ID4+PiArICAgICAgICAgICAg
ICAgICAgICAgc2V0X3VuYmFubmFibGUoaTkxNSwgY3R4KTsKPiA+Pj4gKyAgICAgICAgICAgICAg
ICAgICAgIHNldF9sb2FkX2JhbGFuY2VyKGk5MTUsIGN0eCwgY2ksIGNvdW50LCBOVUxMKTsKPiA+
Pj4gKwo+ID4+PiArICAgICAgICAgICAgICAgICAgICAgZmxhZ3MgPSBJR1RfU1BJTl9GRU5DRV9P
VVQgfCBJR1RfU1BJTl9OT19QUkVFTVBUSU9OOwo+ID4+PiArICAgICAgICAgICAgICAgICAgICAg
Zm9yIChpbnQgaiA9IDA7IGogPCBBUlJBWV9TSVpFKGMtPnNwaW4pOyBqKyspICB7Cj4gPj4+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMtPnNwaW5bal0gPSBpZ3Rfc3Bpbl9uZXcoaTkx
NSwgY3R4LAo+ID4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIC5mbGFncyA9IGZsYWdzKTsKPiA+Pj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZmxhZ3MgPSBJR1RfU1BJTl9GRU5DRV9PVVQ7Cj4gPj4+ICsgICAgICAgICAgICAg
ICAgICAgICB9Cj4gPj4+ICsKPiA+Pj4gKyAgICAgICAgICAgICAgICAgICAgIGdlbV9jb250ZXh0
X2Rlc3Ryb3koaTkxNSwgY3R4KTsKPiA+Pj4gKyAgICAgICAgICAgICB9Cj4gPj4+ICsKPiA+Pj4g
KyAgICAgICAgICAgICAvKiBBcHBseSBzb21lIGJhY2tncm91bmQgY29udGV4dCB0byBzcGVlZCB1
cCBoYW5nIGRldGVjdGlvbiAqLwo+ID4+PiArICAgICAgICAgICAgIGJnID0gZ2VtX2NvbnRleHRf
Y3JlYXRlKGk5MTUpOwo+ID4+PiArICAgICAgICAgICAgIHNldF9lbmdpbmVzKGk5MTUsIGJnLCBj
aSwgY291bnQpOwo+ID4+PiArICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY291bnQ7
IGkrKykgewo+ID4+PiArICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9l
eGVjYnVmZmVyMiBleGVjYnVmID0gewo+ID4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAuYnVmZmVyc19wdHIgPSB0b191c2VyX3BvaW50ZXIoJmJhdGNoKSwKPiA+Pj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgLmJ1ZmZlcl9jb3VudCA9IDEsCj4gPj4+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIC5mbGFncyA9IGksCj4gPj4+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIC5yc3ZkMSA9IGJnLAo+ID4+PiArICAgICAgICAgICAgICAgICAgICAgfTsKPiA+
Pj4gKyAgICAgICAgICAgICAgICAgICAgIGdlbV9leGVjYnVmKGk5MTUsICZleGVjYnVmKTsKPiA+
Pj4gKyAgICAgICAgICAgICB9Cj4gPj4+ICsgICAgICAgICAgICAgZ2VtX2NvbnRleHRfZGVzdHJv
eShpOTE1LCBiZyk7Cj4gPj4+ICsKPiA+Pj4gKyAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsg
aSA8IGNvdW50OyBpKyspIHsKPiA+Pj4gKyAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBjbGll
bnQgKmMgPSAmY2xpZW50W2ldOwo+ID4+PiArCj4gPj4+ICsgICAgICAgICAgICAgICAgICAgICBp
Z3RfZGVidWcoIldhaXRpbmcgZm9yIGNsaWVudFslZF0uc3BpblslZF1cbiIsIGksIDApOwo+ID4+
PiArICAgICAgICAgICAgICAgICAgICAgZ2VtX3N5bmMoaTkxNSwgYy0+c3BpblswXS0+aGFuZGxl
KTsKPiA+Pj4gKyAgICAgICAgICAgICAgICAgICAgIGlndF9hc3NlcnRfZXEoc3luY19mZW5jZV9z
dGF0dXMoYy0+c3BpblswXS0+b3V0X2ZlbmNlKSwKPiA+Pj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgLUVJTyk7Cj4gPj4+ICsKPiA+Pj4gKyAgICAgICAgICAgICAgICAgICAg
IGlndF9kZWJ1ZygiV2FpdGluZyBmb3IgY2xpZW50WyVkXS5zcGluWyVkXVxuIiwgaSwgMSk7Cj4g
Pj4+ICsgICAgICAgICAgICAgICAgICAgICBnZW1fc3luYyhpOTE1LCBjLT5zcGluWzFdLT5oYW5k
bGUpOwo+ID4+PiArICAgICAgICAgICAgICAgICAgICAgaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNl
X3N0YXR1cyhjLT5zcGluWzFdLT5vdXRfZmVuY2UpLAo+ID4+PiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAtRUlPKTsKPiA+Pj4gKwo+ID4+PiArICAgICAgICAgICAgICAgICAg
ICAgaWd0X3NwaW5fZnJlZShpOTE1LCBjLT5zcGluWzBdKTsKPiA+Pj4gKyAgICAgICAgICAgICAg
ICAgICAgIGlndF9zcGluX2ZyZWUoaTkxNSwgYy0+c3BpblsxXSk7Cj4gPj4+ICsgICAgICAgICAg
ICAgfQo+ID4+PiArICAgICAgICAgICAgIGZyZWUoY2xpZW50KTsKPiA+Pj4gKyAgICAgfQo+ID4+
PiArCj4gPj4+ICsgICAgIGdlbV9jbG9zZShpOTE1LCBiYXRjaC5oYW5kbGUpOwo+ID4+PiArICAg
ICBnZW1fcXVpZXNjZW50X2dwdShpOTE1KTsKPiA+Pj4gK30KPiA+Pj4gKwo+ID4+PiAgICBzdGF0
aWMgdm9pZCBzbW9rZXRlc3QoaW50IGk5MTUsIGludCB0aW1lb3V0KQo+ID4+PiAgICB7Cj4gPj4+
ICAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNfb2JqZWN0MiBiYXRjaFsyXSA9IHsKPiA+
Pj4gQEAgLTE0ODYsNCArMTU4MywxMiBAQCBpZ3RfbWFpbgo+ID4+PiAgICAgICAgaWd0X2ZpeHR1
cmUgewo+ID4+PiAgICAgICAgICAgICAgICBpZ3Rfc3RvcF9oYW5nX2RldGVjdG9yKCk7Cj4gPj4+
ICAgICAgICB9Cj4gPj4+ICsKPiA+Pj4gKyAgICAgaWd0X3N1YnRlc3QoImhhbmciKSB7Cj4gPj4+
ICsgICAgICAgICAgICAgaWd0X2hhbmdfdCBoYW5nID0gaWd0X2FsbG93X2hhbmcoaTkxNSwgMCwg
MCk7Cj4gPj4+ICsKPiA+Pj4gKyAgICAgICAgICAgICBoYW5nbWUoaTkxNSk7Cj4gPj4+ICsKPiA+
Pj4gKyAgICAgICAgICAgICBpZ3RfZGlzYWxsb3dfaGFuZyhpOTE1LCBoYW5nKTsKPiA+Pj4gKyAg
ICAgfQo+ID4+PiAgICB9Cj4gPj4+Cj4gPj4KPiA+PiBMb29rcyBnb29kLiBCdXQgZG8gd2UgbmVl
ZCBzb21lIGNvcmUgaGVscGVycyB0byBmaWd1cmUgb3V0IHdoZW4gcHJlZW1wdAo+ID4+IHRpbWVv
dXQgaXMgY29tcGlsZWQgb3V0Pwo+ID4gCj4gPiBJdCBzaG91bGQgc3RpbGwgd29yayB0aGUgc2Ft
ZSwgYnV0IHNsb3dlcjsgMTBzIGhhbmcgZGV0ZWN0aW9uIHJhdGhlcgo+ID4gdGhhbiB+MjAwbXMu
Cj4gCj4gWW91IGFyZSB0YWxraW5nIGFib3V0IG9sZCBoYW5nY2hlY2s/IEkgd2FzIHRoaW5raW5n
IGFib3V0IGFsbCBuZXcgCj4gS2NvbmZpZydzIGNvbXBpbGVkIG91dC4gTm8gaGVhcnRiZWF0cywg
bm8gcHJlZW1wdGlvbiB0aW1lb3V0LiBTdGlsbCB3b3Jrcz8KCldvcmtzIGV2ZW4gZmFzdGVyLiA6
KQoKVGhlIHNwaW5uZXJzIHRoZW4gZ2V0IGtpbGxlZCB3aGVuIHRoZSBjb250ZXh0cyBhcmUgY2xv
c2VkIChkZWZhdWx0IGlzCm5vbi1wZXJzaXN0ZW50IGNvbnRleHRzIGlmIHlvdSBkaXNhYmxlIGhl
YXJ0YmVhdHMgZW50aXJlbHkpLiBUaGUKY2hhbGxlbmdlIGlzIHJlYWxseSBvbiB0aGUgcGVyLWVu
Z2luZSBoZWFydGJlYXQgY29udHJvbHMgdG8gbWFrZSBzdXJlIHdlCmtpY2sgb2ZmIHRoZSBkZWFk
IGNvbnRleHRzLCBidXQgdGhhdCdzIGZvciB0aGUgZnV0dXJlLgotQ2hyaXMKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlz
dApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

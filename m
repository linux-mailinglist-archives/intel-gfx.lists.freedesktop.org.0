Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EFB0CF7919
	for <lists+intel-gfx@lfdr.de>; Mon, 11 Nov 2019 17:48:21 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 426C26E950;
	Mon, 11 Nov 2019 16:48:20 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B142D6E94F;
 Mon, 11 Nov 2019 16:48:18 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 11 Nov 2019 08:48:17 -0800
X-IronPort-AV: E=Sophos;i="5.68,293,1569308400"; d="scan'208";a="197722055"
Received: from mpotanix-mobl2.ccr.corp.intel.com (HELO [10.252.20.183])
 ([10.252.20.183])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/AES256-SHA;
 11 Nov 2019 08:48:15 -0800
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20191108204932.6197-1-chris@chris-wilson.co.uk>
 <20191108204932.6197-2-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <d3ebc198-d18c-24ac-d99c-ae3874723dc9@linux.intel.com>
Date: Mon, 11 Nov 2019 16:48:14 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191108204932.6197-2-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [igt-dev] [PATCH i-g-t 2/3] i915/gem_userptr_blits:
 Exercise userptr + userfaultfd
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDA4LzExLzIwMTkgMjA6NDksIENocmlzIFdpbHNvbiB3cm90ZToKPiBSZWdpc3RlciBhIHVz
ZXJzcGFjZSBmYXVsdCBoYW5kbGVyIGZvciBhIG1lbW9yeSByZWdpb24gdGhhdCB3ZSBhbHNvIHBh
c3MKPiB0byB0aGUgR1BVIHZpYSB1c2VycHRyLCBhbmQgbWFrZSBzdXJlIHRoZSBwYWdlZmF1bHQg
aXMgcHJvcGVybHkgc2VydmljZWQKPiBiZWZvcmUgd2UgZXhlY3V0ZS4KPiAKPiBTaWduZWQtb2Zm
LWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KPiBDYzogVHZydGtv
IFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KPiAtLS0KPiAgIHRlc3RzL2k5MTUv
Z2VtX3VzZXJwdHJfYmxpdHMuYyB8IDExOSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
Ky0KPiAgIDEgZmlsZSBjaGFuZ2VkLCAxMTggaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQo+
IAo+IGRpZmYgLS1naXQgYS90ZXN0cy9pOTE1L2dlbV91c2VycHRyX2JsaXRzLmMgYi90ZXN0cy9p
OTE1L2dlbV91c2VycHRyX2JsaXRzLmMKPiBpbmRleCAxMWQ2ZjRhMWMuLjc3NGE5ZjkyYyAxMDA2
NDQKPiAtLS0gYS90ZXN0cy9pOTE1L2dlbV91c2VycHRyX2JsaXRzLmMKPiArKysgYi90ZXN0cy9p
OTE1L2dlbV91c2VycHRyX2JsaXRzLmMKPiBAQCAtMzYsNiArMzYsOCBAQAo+ICAgICogVGhlIGdv
YWwgaXMgdG8gc2ltcGx5IGVuc3VyZSB0aGUgYmFzaWNzIHdvcmsuCj4gICAgKi8KPiAgIAo+ICsj
aW5jbHVkZSA8bGludXgvdXNlcmZhdWx0ZmQuaD4KPiArCj4gICAjaW5jbHVkZSAiaWd0LmgiCj4g
ICAjaW5jbHVkZSA8c3RkbGliLmg+Cj4gICAjaW5jbHVkZSA8c3RkaW8uaD4KPiBAQCAtNDQsOSAr
NDYsMTEgQEAKPiAgICNpbmNsdWRlIDxpbnR0eXBlcy5oPgo+ICAgI2luY2x1ZGUgPGVycm5vLmg+
Cj4gICAjaW5jbHVkZSA8c2V0am1wLmg+Cj4gKyNpbmNsdWRlIDxzeXMvaW9jdGwuaD4KPiArI2lu
Y2x1ZGUgPHN5cy9tbWFuLmg+Cj4gICAjaW5jbHVkZSA8c3lzL3N0YXQuaD4KPiArI2luY2x1ZGUg
PHN5cy9zeXNjYWxsLmg+Cj4gICAjaW5jbHVkZSA8c3lzL3RpbWUuaD4KPiAtI2luY2x1ZGUgPHN5
cy9tbWFuLmg+Cj4gICAjaW5jbHVkZSA8Z2xpYi5oPgo+ICAgI2luY2x1ZGUgPHNpZ25hbC5oPgo+
ICAgI2luY2x1ZGUgPHB0aHJlYWQuaD4KPiBAQCAtMTgzMSw2ICsxODM1LDExNiBAQCBzdGF0aWMg
dm9pZCB0ZXN0X2ludmFsaWRhdGVfY2xvc2VfcmFjZShpbnQgZmQsIGJvb2wgb3ZlcmxhcCkKPiAg
IAlmcmVlKHRfZGF0YS5wdHIpOwo+ICAgfQo+ICAgCj4gK3N0cnVjdCB1ZmRfdGhyZWFkIHsKPiAr
CXVpbnQzMl90ICpwYWdlOwo+ICsJaW50IGk5MTU7Cj4gK307Cj4gKwo+ICtzdGF0aWMgdWludDMy
X3QgY3JlYXRlX3BhZ2UoaW50IGk5MTUsIHZvaWQgKnBhZ2UpCj4gK3sKPiArCXVpbnQzMl90IGhh
bmRsZTsKPiArCj4gKwlnZW1fdXNlcnB0cihpOTE1LCBwYWdlLCA0MDk2LCAwLCAwLCAmaGFuZGxl
KTsKPiArCXJldHVybiBoYW5kbGU7Cj4gK30KPiArCj4gK3N0YXRpYyB1aW50MzJfdCBjcmVhdGVf
YmF0Y2goaW50IGk5MTUpCj4gK3sKPiArCWNvbnN0IHVpbnQzMl90IGJiZSA9IE1JX0JBVENIX0JV
RkZFUl9FTkQ7Cj4gKwl1aW50MzJfdCBoYW5kbGU7Cj4gKwo+ICsJaGFuZGxlID0gZ2VtX2NyZWF0
ZShpOTE1LCA0MDk2KTsKPiArCWdlbV93cml0ZShpOTE1LCBoYW5kbGUsIDAsICZiYmUsIHNpemVv
ZihiYmUpKTsKPiArCj4gKwlyZXR1cm4gaGFuZGxlOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCAq
dWZkX3RocmVhZCh2b2lkICphcmcpCj4gK3sKPiArCXN0cnVjdCB1ZmRfdGhyZWFkICp0ID0gYXJn
Owo+ICsJc3RydWN0IGRybV9pOTE1X2dlbV9leGVjX29iamVjdDIgb2JqWzJdID0gewo+ICsJCXsg
LmhhbmRsZSA9IGNyZWF0ZV9wYWdlKHQtPmk5MTUsIHQtPnBhZ2UpIH0sCj4gKwkJeyAuaGFuZGxl
ID0gY3JlYXRlX2JhdGNoKHQtPmk5MTUpIH0sCj4gKwl9Owo+ICsJc3RydWN0IGRybV9pOTE1X2dl
bV9leGVjYnVmZmVyMiBlYiA9IHsKPiArCQkuYnVmZmVyc19wdHIgPSB0b191c2VyX3BvaW50ZXIo
b2JqKSwKPiArCQkuYnVmZmVyX2NvdW50ID0gQVJSQVlfU0laRShvYmopLAo+ICsJfTsKPiArCj4g
KwlpZ3RfZGVidWcoInN1Ym1pdHRpbmcgZmF1bHRcbiIpOwo+ICsJZ2VtX2V4ZWNidWYodC0+aTkx
NSwgJmViKTsKPiArCWdlbV9zeW5jKHQtPmk5MTUsIG9ialsxXS5oYW5kbGUpOwo+ICsKPiArCWZv
ciAoaW50IGkgPSAwOyBpIDwgQVJSQVlfU0laRShvYmopOyBpKyspCj4gKwkJZ2VtX2Nsb3NlKHQt
Pmk5MTUsIG9ialtpXS5oYW5kbGUpOwo+ICsKPiArCXQtPmk5MTUgPSAtMTsKPiArCXJldHVybiBO
VUxMOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHVzZXJmYXVsdGZkKGludCBmbGFncykKPiArewo+
ICsJcmV0dXJuIHN5c2NhbGwoU1lTX3VzZXJmYXVsdGZkLCBmbGFncyk7Cj4gK30KPiArCj4gK3N0
YXRpYyB2b2lkIHRlc3RfdXNlcmZhdWx0KGludCBpOTE1KQo+ICt7Cj4gKwlzdHJ1Y3QgdWZmZGlv
X2FwaSBhcGkgPSB7IC5hcGkgPSBVRkZEX0FQSSB9Owo+ICsJc3RydWN0IHVmZmRpb19yZWdpc3Rl
ciByZWc7Cj4gKwlzdHJ1Y3QgdWZmZGlvX2NvcHkgY29weTsKPiArCXN0cnVjdCB1ZmZkX21zZyBt
c2c7Cj4gKwlzdHJ1Y3QgdWZkX3RocmVhZCB0Owo+ICsJcHRocmVhZF90IHRocmVhZDsKPiArCWNo
YXIgcG9pc29uWzQwOTZdOwo+ICsJaW50IHVmZDsKPiArCj4gKwkvKgo+ICsJICogUmVnaXN0ZXIg
YSBwYWdlIHdpdGggdXNlcmZhdWx0ZmQsIGFuZCB3cmFwIHRoYXQgaW5zaWRlIGEgdXNlcnB0ciBi
by4KPiArCSAqIFdoZW4gd2UgdHJ5IHRvIHVzZSBndXAgaW5zaWRlciB1c2VycHRyX2dldF9wYWdl
cywgaXQgd2lsbCB0cmlnZ2VyCj4gKwkgKiBhIHBhZ2VmYXVsdCB0aGF0IGlzIHNlbnQgdG8gdGhl
IHVzZXJmYXVsdGZkIGZvciBzZXJ2aWNpbmcuIFRoaXMKPiArCSAqIGlzIGFyYml0cmFyaWx5IHNs
b3csIGFzIHRoZSBzdWJtaXNzaW9uIG11c3Qgd2FpdCB1bnRpbCB0aGUgZmF1bHQKPiArCSAqIGlz
IHNlcnZpY2VkIGJ5IHRoZSB1c2Vyc3BhY2UgZmF1bHQgaGFuZGxlci4KPiArCSAqLwo+ICsKPiAr
CXVmZCA9IHVzZXJmYXVsdGZkKDApOwo+ICsJaWd0X3JlcXVpcmVfZih1ZmQgIT0gLTEsICJrZXJu
ZWwgc3VwcG9ydCBmb3IgdXNlcmZhdWx0ZmRcbiIpOwo+ICsJaWd0X3JlcXVpcmVfZihpb2N0bCh1
ZmQsIFVGRkRJT19BUEksICZhcGkpID09IDAgJiYgYXBpLmFwaSA9PSBVRkZEX0FQSSwKPiArCQkg
ICAgICAidXNlcmZhdWx0ZmQgQVBJIHYlbGxkOiVsbGRcbiIsIFVGRkRfQVBJLCBhcGkuYXBpKTsK
PiArCj4gKwl0Lmk5MTUgPSBpOTE1Owo+ICsKPiArCXQucGFnZSA9IG1tYXAoTlVMTCwgNDA5Niwg
UFJPVF9XUklURSwgTUFQX1NIQVJFRCB8IE1BUF9BTk9OLCAwLCAwKTsKPiArCWlndF9hc3NlcnQo
dC5wYWdlICE9IE1BUF9GQUlMRUQpOwo+ICsKPiArCW1lbXNldCgmcmVnLCAwLCBzaXplb2YocmVn
KSk7Cj4gKwlyZWcubW9kZSA9IFVGRkRJT19SRUdJU1RFUl9NT0RFX01JU1NJTkc7Cj4gKwlyZWcu
cmFuZ2Uuc3RhcnQgPSB0b191c2VyX3BvaW50ZXIodC5wYWdlKTsKPiArCXJlZy5yYW5nZS5sZW4g
PSA0MDk2Owo+ICsJZG9faW9jdGwodWZkLCBVRkZESU9fUkVHSVNURVIsICZyZWcpOwo+ICsJaWd0
X2Fzc2VydChyZWcuaW9jdGxzID09IFVGRkRfQVBJX1JBTkdFX0lPQ1RMUyk7Cj4gKwo+ICsJaWd0
X2Fzc2VydChwdGhyZWFkX2NyZWF0ZSgmdGhyZWFkLCBOVUxMLCB1ZmRfdGhyZWFkLCAmdCkgPT0g
MCk7Cj4gKwo+ICsJLyogV2FpdCBmb3IgdGhlIGZhdWx0ICovCj4gKwlpZ3RfYXNzZXJ0X2VxKHJl
YWQodWZkLCAmbXNnLCBzaXplb2YobXNnKSksIHNpemVvZihtc2cpKTsKPiArCWlndF9hc3NlcnRf
ZXEobXNnLmV2ZW50LCBVRkZEX0VWRU5UX1BBR0VGQVVMVCk7Cj4gKwlpZ3RfYXNzZXJ0KGZyb21f
dXNlcl9wb2ludGVyKG1zZy5hcmcucGFnZWZhdWx0LmFkZHJlc3MpID09IHQucGFnZSk7Cj4gKwo+
ICsJLyogRmF1bHRpbmcgdGhyZWFkIHJlbWFpbnMgYmxvY2tlZCAqLwo+ICsJaWd0X2Fzc2VydF9l
cSh0Lmk5MTUsIGk5MTUpOwoKVGhpcyBsb29rcyBjb3VsZCBiZSBhIGZhbHNlIG5lZ2F0aXZlIHNp
bmNlIG5vdGhpbmcgc2F5cyB0aGUgdGhyZWFkIGlzIApub3QgYmxvY2tlZCBqdXN0IG5vdCBnb3Qg
cm91bmQgcmVzZXR0aW5nIHQtPmk5MTUuCgo+ICsKPiArCW1lbXNldCgmY29weSwgMCwgc2l6ZW9m
KGNvcHkpKTsKPiArCWNvcHkuZHN0ID0gbXNnLmFyZy5wYWdlZmF1bHQuYWRkcmVzczsKPiArCWNv
cHkuc3JjID0gdG9fdXNlcl9wb2ludGVyKG1lbXNldChwb2lzb24sIDB4YzUsIHNpemVvZihwb2lz
b24pKSk7Cj4gKwljb3B5LmxlbiA9IDQwOTY7Cj4gKwlkb19pb2N0bCh1ZmQsIFVGRkRJT19DT1BZ
LCAmY29weSk7CgpXaGF0IGlzIHRoZSBwb2ludCBvZiBwb2lzb24gZGF0YT8KCldvdWxkIGl0IHdv
cmsgYmV0dGVyIHRvIGhhdmUgYSBoYW5naW5nIGJhdGNoIHJlZ2lzdGVyZWQgd2l0aCB1c2VyZmF1
bHQgCmFuZCB0aGVuIHJlcGxhY2UgaXQgd2l0aCBhIHZhbGlkIGJhdGNoIGhlcmU/IFRoYXQgd291
bGQgZW5zdXJlIGV4ZWNidWYgCndhcyAgYmxvY2tlZCB1bnRpbCB1c2VyZmF1bHQgaGFuZGxlciBm
aW5pc2hlcyBvdGhlcndpc2Ugd2UgZ2V0IGEgR1BVIGhhbmcuCgpSZWdhcmRzLAoKVHZydGtvCgo+
ICsKPiArCXB0aHJlYWRfam9pbih0aHJlYWQsIE5VTEwpOwo+ICsKPiArCW11bm1hcCh0LnBhZ2Us
IDQwOTYpOwo+ICsJY2xvc2UodWZkKTsKPiArfQo+ICsKPiAgIHVpbnQ2NF90IHRvdGFsX3JhbTsK
PiAgIHVpbnQ2NF90IGFwZXJ0dXJlX3NpemU7Cj4gICBpbnQgZmQsIGNvdW50Owo+IEBAIC0xOTAy
LDYgKzIwMTYsOSBAQCBpZ3RfbWFpbl9hcmdzKCJjOiIsIE5VTEwsIGhlbHBfc3RyLCBvcHRfaGFu
ZGxlciwgTlVMTCkKPiAgIAkJaWd0X3N1YnRlc3QoImZvcmJpZGRlbi1vcGVyYXRpb25zIikKPiAg
IAkJCXRlc3RfZm9yYmlkZGVuX29wcyhmZCk7Cj4gICAKPiArCQlpZ3Rfc3VidGVzdCgidXNlcmZh
dWx0IikKPiArCQkJdGVzdF91c2VyZmF1bHQoZmQpOwo+ICsKPiAgIAkJaWd0X3N1YnRlc3QoInJl
bG9jYXRpb25zIikKPiAgIAkJCXRlc3RfcmVsb2NhdGlvbnMoZmQpOwo+ICAgCX0KPiAKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxp
bmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

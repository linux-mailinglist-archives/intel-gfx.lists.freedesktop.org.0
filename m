Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EF51317324
	for <lists+intel-gfx@lfdr.de>; Wed,  8 May 2019 10:07:54 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A90E9893C9;
	Wed,  8 May 2019 08:07:49 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 508CB893AB
 for <intel-gfx@lists.freedesktop.org>; Wed,  8 May 2019 08:07:48 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16485921-1500050 
 for multiple; Wed, 08 May 2019 09:07:10 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  8 May 2019 09:06:45 +0100
Message-Id: <20190508080704.24223-21-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190508080704.24223-1-chris@chris-wilson.co.uk>
References: <20190508080704.24223-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 21/40] drm/i915: Move object->pages API to
 i915_gem_object.[ch]
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Q3VycmVudGx5IHRoZSBjb2RlIGZvciBtYW5pcHVsYXRpbmcgdGhlIHBhZ2VzIG9uIGFuIG9iamVj
dCBpcyBzdGlsbApyZXNpZGluZyBpbiBpOTE1X2dlbS5jLCBtb3ZlIGl0IHRvIGk5MTVfZ2VtX29i
amVjdC5jCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5j
by51az4KQ2M6IEpvb25hcyBMYWh0aW5lbiA8am9vbmFzLmxhaHRpbmVuQGxpbnV4LmludGVsLmNv
bT4KUmV2aWV3ZWQtYnk6IE1hdHRoZXcgQXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgICAgICAgICAgfCAgIDQgKy0K
IC4uLi9ncHUvZHJtL2k5MTUveyA9PiBnZW19L2k5MTVfZ2VtX29iamVjdC5jICB8ICAgNSArLQog
Li4uL2dwdS9kcm0vaTkxNS97ID0+IGdlbX0vaTkxNV9nZW1fb2JqZWN0LmggIHwgMTI3ICsrKysr
KysrKysrKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAgICAg
ICB8IDEzNyArLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2xv
YmFscy5jICAgICAgICAgICB8ICAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEu
aCAgICAgICAgICAgICAgIHwgICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9mcm9u
dGJ1ZmZlci5oICAgICAgfCAgIDIgKy0KIDcgZmlsZXMgY2hhbmdlZCwgMTQxIGluc2VydGlvbnMo
KyksIDEzOCBkZWxldGlvbnMoLSkKIHJlbmFtZSBkcml2ZXJzL2dwdS9kcm0vaTkxNS97ID0+IGdl
bX0vaTkxNV9nZW1fb2JqZWN0LmMgKDk3JSkKIHJlbmFtZSBkcml2ZXJzL2dwdS9kcm0vaTkxNS97
ID0+IGdlbX0vaTkxNV9nZW1fb2JqZWN0LmggKDU5JSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCmluZGV4
IDk2MzQ0YzlhMDcyNi4uMWM4YmQwYTUyMTJkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQpAQCAtODYs
NyArODYsMTAgQEAgaTkxNS15ICs9ICQoZ3QteSkKIAogIyBHRU0gKEdyYXBoaWNzIEV4ZWN1dGlv
biBNYW5hZ2VtZW50KSBjb2RlCiBvYmoteSArPSBnZW0vCitnZW0teSArPSBcCisJZ2VtL2k5MTVf
Z2VtX29iamVjdC5vCiBpOTE1LXkgKz0gXAorCSAgJChnZW0teSkgXAogCSAgaTkxNV9hY3RpdmUu
byBcCiAJICBpOTE1X2NtZF9wYXJzZXIubyBcCiAJICBpOTE1X2dlbV9iYXRjaF9wb29sLm8gXApA
QCAtOTksNyArMTAyLDYgQEAgaTkxNS15ICs9IFwKIAkgIGk5MTVfZ2VtX2d0dC5vIFwKIAkgIGk5
MTVfZ2VtX2ludGVybmFsLm8gXAogCSAgaTkxNV9nZW0ubyBcCi0JICBpOTE1X2dlbV9vYmplY3Qu
byBcCiAJICBpOTE1X2dlbV9wbS5vIFwKIAkgIGk5MTVfZ2VtX3JlbmRlcl9zdGF0ZS5vIFwKIAkg
IGk5MTVfZ2VtX3Nocmlua2VyLm8gXApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW1fb2JqZWN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2Jq
ZWN0LmMKc2ltaWxhcml0eSBpbmRleCA5NyUKcmVuYW1lIGZyb20gZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9nZW1fb2JqZWN0LmMKcmVuYW1lIHRvIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9vYmplY3QuYwppbmRleCBhYzZhNWFiODQ1ODYuLjgxNzkyNTJiYjM5YiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fb2JqZWN0LmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5jCkBAIC0yMiw5ICsyMiwxMCBAQAog
ICoKICAqLwogCi0jaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJpOTE1X2dlbV9vYmpl
Y3QuaCIKLSNpbmNsdWRlICJpOTE1X2dsb2JhbHMuaCIKKworI2luY2x1ZGUgIi4uL2k5MTVfZHJ2
LmgiCisjaW5jbHVkZSAiLi4vaTkxNV9nbG9iYWxzLmgiCiAKIHN0YXRpYyBzdHJ1Y3QgaTkxNV9n
bG9iYWxfb2JqZWN0IHsKIAlzdHJ1Y3QgaTkxNV9nbG9iYWwgYmFzZTsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX29iamVjdC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oCnNpbWlsYXJpdHkgaW5kZXggNTklCnJlbmFtZSBmcm9t
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX29iamVjdC5oCnJlbmFtZSB0byBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmgKaW5kZXggMzY2NmIwYzVmNmNhLi4w
NjFiMjBjM2RhNWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX29i
amVjdC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaApA
QCAtMTMsNyArMTMsNyBAQAogCiAjaW5jbHVkZSA8ZHJtL2k5MTVfZHJtLmg+CiAKLSNpbmNsdWRl
ICJnZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVzLmgiCisjaW5jbHVkZSAiaTkxNV9nZW1fb2JqZWN0
X3R5cGVzLmgiCiAKIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICppOTE1X2dlbV9vYmplY3Rf
YWxsb2Modm9pZCk7CiB2b2lkIGk5MTVfZ2VtX29iamVjdF9mcmVlKHN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmopOwpAQCAtMTkyLDYgKzE5MiwxMzEgQEAgaTkxNV9nZW1fb2JqZWN0X2dl
dF90aWxlX3Jvd19zaXplKGNvbnN0IHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiBp
bnQgaTkxNV9nZW1fb2JqZWN0X3NldF90aWxpbmcoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Qg
Km9iaiwKIAkJCSAgICAgICB1bnNpZ25lZCBpbnQgdGlsaW5nLCB1bnNpZ25lZCBpbnQgc3RyaWRl
KTsKIAorc3RydWN0IHNjYXR0ZXJsaXN0ICoKK2k5MTVfZ2VtX29iamVjdF9nZXRfc2coc3RydWN0
IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKKwkJICAgICAgIHVuc2lnbmVkIGludCBuLCB1bnNp
Z25lZCBpbnQgKm9mZnNldCk7CisKK3N0cnVjdCBwYWdlICoKK2k5MTVfZ2VtX29iamVjdF9nZXRf
cGFnZShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAorCQkJIHVuc2lnbmVkIGludCBu
KTsKKworc3RydWN0IHBhZ2UgKgoraTkxNV9nZW1fb2JqZWN0X2dldF9kaXJ0eV9wYWdlKHN0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCisJCQkgICAgICAgdW5zaWduZWQgaW50IG4pOwor
CitkbWFfYWRkcl90CitpOTE1X2dlbV9vYmplY3RfZ2V0X2RtYV9hZGRyZXNzKHN0cnVjdCBkcm1f
aTkxNV9nZW1fb2JqZWN0ICpvYmosCisJCQkJdW5zaWduZWQgbG9uZyBuKTsKKwordm9pZCBfX2k5
MTVfZ2VtX29iamVjdF9zZXRfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwK
KwkJCQkgc3RydWN0IHNnX3RhYmxlICpwYWdlcywKKwkJCQkgdW5zaWduZWQgaW50IHNnX3BhZ2Vf
c2l6ZXMpOworaW50IF9faTkxNV9nZW1fb2JqZWN0X2dldF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX29iamVjdCAqb2JqKTsKKworc3RhdGljIGlubGluZSBpbnQgX19tdXN0X2NoZWNrCitpOTE1
X2dlbV9vYmplY3RfcGluX3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCit7
CisJbWlnaHRfbG9jaygmb2JqLT5tbS5sb2NrKTsKKworCWlmIChhdG9taWNfaW5jX25vdF96ZXJv
KCZvYmotPm1tLnBhZ2VzX3Bpbl9jb3VudCkpCisJCXJldHVybiAwOworCisJcmV0dXJuIF9faTkx
NV9nZW1fb2JqZWN0X2dldF9wYWdlcyhvYmopOworfQorCitzdGF0aWMgaW5saW5lIGJvb2wKK2k5
MTVfZ2VtX29iamVjdF9oYXNfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikK
K3sKKwlyZXR1cm4gIUlTX0VSUl9PUl9OVUxMKFJFQURfT05DRShvYmotPm1tLnBhZ2VzKSk7Cit9
CisKK3N0YXRpYyBpbmxpbmUgdm9pZAorX19pOTE1X2dlbV9vYmplY3RfcGluX3BhZ2VzKHN0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCit7CisJR0VNX0JVR19PTighaTkxNV9nZW1fb2Jq
ZWN0X2hhc19wYWdlcyhvYmopKTsKKworCWF0b21pY19pbmMoJm9iai0+bW0ucGFnZXNfcGluX2Nv
dW50KTsKK30KKworc3RhdGljIGlubGluZSBib29sCitpOTE1X2dlbV9vYmplY3RfaGFzX3Bpbm5l
ZF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQoreworCXJldHVybiBhdG9t
aWNfcmVhZCgmb2JqLT5tbS5wYWdlc19waW5fY291bnQpOworfQorCitzdGF0aWMgaW5saW5lIHZv
aWQKK19faTkxNV9nZW1fb2JqZWN0X3VucGluX3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2Jq
ZWN0ICpvYmopCit7CisJR0VNX0JVR19PTighaTkxNV9nZW1fb2JqZWN0X2hhc19wYWdlcyhvYmop
KTsKKwlHRU1fQlVHX09OKCFpOTE1X2dlbV9vYmplY3RfaGFzX3Bpbm5lZF9wYWdlcyhvYmopKTsK
KworCWF0b21pY19kZWMoJm9iai0+bW0ucGFnZXNfcGluX2NvdW50KTsKK30KKworc3RhdGljIGlu
bGluZSB2b2lkCitpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMoc3RydWN0IGRybV9pOTE1X2dl
bV9vYmplY3QgKm9iaikKK3sKKwlfX2k5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdlcyhvYmopOwor
fQorCitlbnVtIGk5MTVfbW1fc3ViY2xhc3MgeyAvKiBsb2NrZGVwIHN1YmNsYXNzIGZvciBvYmot
Pm1tLmxvY2svc3RydWN0X211dGV4ICovCisJSTkxNV9NTV9OT1JNQUwgPSAwLAorCUk5MTVfTU1f
U0hSSU5LRVIgLyogY2FsbGVkICJyZWN1cnNpdmVseSIgZnJvbSBkaXJlY3QtcmVjbGFpbS1lc3F1
ZSAqLworfTsKKworaW50IF9faTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqLAorCQkJCWVudW0gaTkxNV9tbV9zdWJjbGFzcyBzdWJjbGFzcyk7
Cit2b2lkIF9faTkxNV9nZW1fb2JqZWN0X3RydW5jYXRlKHN0cnVjdCBkcm1faTkxNV9nZW1fb2Jq
ZWN0ICpvYmopOworCitlbnVtIGk5MTVfbWFwX3R5cGUgeworCUk5MTVfTUFQX1dCID0gMCwKKwlJ
OTE1X01BUF9XQywKKyNkZWZpbmUgSTkxNV9NQVBfT1ZFUlJJREUgQklUKDMxKQorCUk5MTVfTUFQ
X0ZPUkNFX1dCID0gSTkxNV9NQVBfV0IgfCBJOTE1X01BUF9PVkVSUklERSwKKwlJOTE1X01BUF9G
T1JDRV9XQyA9IEk5MTVfTUFQX1dDIHwgSTkxNV9NQVBfT1ZFUlJJREUsCit9OworCisvKioKKyAq
IGk5MTVfZ2VtX29iamVjdF9waW5fbWFwIC0gcmV0dXJuIGEgY29udGlndW91cyBtYXBwaW5nIG9m
IHRoZSBlbnRpcmUgb2JqZWN0CisgKiBAb2JqOiB0aGUgb2JqZWN0IHRvIG1hcCBpbnRvIGtlcm5l
bCBhZGRyZXNzIHNwYWNlCisgKiBAdHlwZTogdGhlIHR5cGUgb2YgbWFwcGluZywgdXNlZCB0byBz
ZWxlY3QgcGdwcm90X3QKKyAqCisgKiBDYWxscyBpOTE1X2dlbV9vYmplY3RfcGluX3BhZ2VzKCkg
dG8gcHJldmVudCByZWFwaW5nIG9mIHRoZSBvYmplY3QncworICogcGFnZXMgYW5kIHRoZW4gcmV0
dXJucyBhIGNvbnRpZ3VvdXMgbWFwcGluZyBvZiB0aGUgYmFja2luZyBzdG9yYWdlIGludG8KKyAq
IHRoZSBrZXJuZWwgYWRkcmVzcyBzcGFjZS4gQmFzZWQgb24gdGhlIEB0eXBlIG9mIG1hcHBpbmcs
IHRoZSBQVEUgd2lsbCBiZQorICogc2V0IHRvIGVpdGhlciBXcml0ZUJhY2sgb3IgV3JpdGVDb21i
aW5lICh2aWEgcGdwcm90X3QpLgorICoKKyAqIFRoZSBjYWxsZXIgaXMgcmVzcG9uc2libGUgZm9y
IGNhbGxpbmcgaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcCgpIHdoZW4gdGhlCisgKiBtYXBwaW5n
IGlzIG5vIGxvbmdlciByZXF1aXJlZC4KKyAqCisgKiBSZXR1cm5zIHRoZSBwb2ludGVyIHRocm91
Z2ggd2hpY2ggdG8gYWNjZXNzIHRoZSBtYXBwZWQgb2JqZWN0LCBvciBhbgorICogRVJSX1BUUigp
IG9uIGVycm9yLgorICovCit2b2lkICpfX211c3RfY2hlY2sgaTkxNV9nZW1fb2JqZWN0X3Bpbl9t
YXAoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKKwkJCQkJICAgZW51bSBpOTE1X21h
cF90eXBlIHR5cGUpOworCit2b2lkIF9faTkxNV9nZW1fb2JqZWN0X2ZsdXNoX21hcChzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAorCQkJCSB1bnNpZ25lZCBsb25nIG9mZnNldCwKKwkJ
CQkgdW5zaWduZWQgbG9uZyBzaXplKTsKK3N0YXRpYyBpbmxpbmUgdm9pZCBpOTE1X2dlbV9vYmpl
Y3RfZmx1c2hfbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCit7CisJX19pOTE1
X2dlbV9vYmplY3RfZmx1c2hfbWFwKG9iaiwgMCwgb2JqLT5iYXNlLnNpemUpOworfQorCisvKioK
KyAqIGk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAgLSByZWxlYXNlcyBhbiBlYXJsaWVyIG1hcHBp
bmcKKyAqIEBvYmo6IHRoZSBvYmplY3QgdG8gdW5tYXAKKyAqCisgKiBBZnRlciBwaW5uaW5nIHRo
ZSBvYmplY3QgYW5kIG1hcHBpbmcgaXRzIHBhZ2VzLCBvbmNlIHlvdSBhcmUgZmluaXNoZWQKKyAq
IHdpdGggeW91ciBhY2Nlc3MsIGNhbGwgaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcCgpIHRvIHJl
bGVhc2UgdGhlIHBpbgorICogdXBvbiB0aGUgbWFwcGluZy4gT25jZSB0aGUgcGluIGNvdW50IHJl
YWNoZXMgemVybywgdGhhdCBtYXBwaW5nIG1heSBiZQorICogcmVtb3ZlZC4KKyAqLworc3RhdGlj
IGlubGluZSB2b2lkIGk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAoc3RydWN0IGRybV9pOTE1X2dl
bV9vYmplY3QgKm9iaikKK3sKKwlpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMob2JqKTsKK30K
Kwogc3RhdGljIGlubGluZSBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICoKIGk5MTVfZ2VtX29iamVj
dF9sYXN0X3dyaXRlX2VuZ2luZShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogewpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5kZXggOTVlOWIyYzY5ZjE3Li5mYmI4NmQ3NGEwMTkgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kcnYuaApAQCAtMjgwOSwxMzcgKzI4MDksNiBAQCBzdGF0aWMgaW5s
aW5lIGludCBfX3NnX3BhZ2VfY291bnQoY29uc3Qgc3RydWN0IHNjYXR0ZXJsaXN0ICpzZykKIAly
ZXR1cm4gc2ctPmxlbmd0aCA+PiBQQUdFX1NISUZUOwogfQogCi1zdHJ1Y3Qgc2NhdHRlcmxpc3Qg
KgotaTkxNV9nZW1fb2JqZWN0X2dldF9zZyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2Jq
LAotCQkgICAgICAgdW5zaWduZWQgaW50IG4sIHVuc2lnbmVkIGludCAqb2Zmc2V0KTsKLQotc3Ry
dWN0IHBhZ2UgKgotaTkxNV9nZW1fb2JqZWN0X2dldF9wYWdlKHN0cnVjdCBkcm1faTkxNV9nZW1f
b2JqZWN0ICpvYmosCi0JCQkgdW5zaWduZWQgaW50IG4pOwotCi1zdHJ1Y3QgcGFnZSAqCi1pOTE1
X2dlbV9vYmplY3RfZ2V0X2RpcnR5X3BhZ2Uoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aiwKLQkJCSAgICAgICB1bnNpZ25lZCBpbnQgbik7Ci0KLWRtYV9hZGRyX3QKLWk5MTVfZ2VtX29i
amVjdF9nZXRfZG1hX2FkZHJlc3Moc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKLQkJ
CQl1bnNpZ25lZCBsb25nIG4pOwotCi12b2lkIF9faTkxNV9nZW1fb2JqZWN0X3NldF9wYWdlcyhz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAotCQkJCSBzdHJ1Y3Qgc2dfdGFibGUgKnBh
Z2VzLAotCQkJCSB1bnNpZ25lZCBpbnQgc2dfcGFnZV9zaXplcyk7Ci1pbnQgX19pOTE1X2dlbV9v
YmplY3RfZ2V0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopOwotCi1zdGF0
aWMgaW5saW5lIGludCBfX211c3RfY2hlY2sKLWk5MTVfZ2VtX29iamVjdF9waW5fcGFnZXMoc3Ry
dWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKLXsKLQltaWdodF9sb2NrKCZvYmotPm1tLmxv
Y2spOwotCi0JaWYgKGF0b21pY19pbmNfbm90X3plcm8oJm9iai0+bW0ucGFnZXNfcGluX2NvdW50
KSkKLQkJcmV0dXJuIDA7Ci0KLQlyZXR1cm4gX19pOTE1X2dlbV9vYmplY3RfZ2V0X3BhZ2VzKG9i
aik7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgYm9vbAotaTkxNV9nZW1fb2JqZWN0X2hhc19wYWdlcyhz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQotewotCXJldHVybiAhSVNfRVJSX09SX05V
TEwoUkVBRF9PTkNFKG9iai0+bW0ucGFnZXMpKTsKLX0KLQotc3RhdGljIGlubGluZSB2b2lkCi1f
X2k5MTVfZ2VtX29iamVjdF9waW5fcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aikKLXsKLQlHRU1fQlVHX09OKCFpOTE1X2dlbV9vYmplY3RfaGFzX3BhZ2VzKG9iaikpOwotCi0J
YXRvbWljX2luYygmb2JqLT5tbS5wYWdlc19waW5fY291bnQpOwotfQotCi1zdGF0aWMgaW5saW5l
IGJvb2wKLWk5MTVfZ2VtX29iamVjdF9oYXNfcGlubmVkX3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmopCi17Ci0JcmV0dXJuIGF0b21pY19yZWFkKCZvYmotPm1tLnBhZ2VzX3Bp
bl9jb3VudCk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZAotX19pOTE1X2dlbV9vYmplY3RfdW5w
aW5fcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKLXsKLQlHRU1fQlVHX09O
KCFpOTE1X2dlbV9vYmplY3RfaGFzX3BhZ2VzKG9iaikpOwotCUdFTV9CVUdfT04oIWk5MTVfZ2Vt
X29iamVjdF9oYXNfcGlubmVkX3BhZ2VzKG9iaikpOwotCi0JYXRvbWljX2RlYygmb2JqLT5tbS5w
YWdlc19waW5fY291bnQpOwotfQotCi1zdGF0aWMgaW5saW5lIHZvaWQKLWk5MTVfZ2VtX29iamVj
dF91bnBpbl9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQotewotCV9faTkx
NV9nZW1fb2JqZWN0X3VucGluX3BhZ2VzKG9iaik7Ci19Ci0KLWVudW0gaTkxNV9tbV9zdWJjbGFz
cyB7IC8qIGxvY2tkZXAgc3ViY2xhc3MgZm9yIG9iai0+bW0ubG9jay9zdHJ1Y3RfbXV0ZXggKi8K
LQlJOTE1X01NX05PUk1BTCA9IDAsCi0JSTkxNV9NTV9TSFJJTktFUiAvKiBjYWxsZWQgInJlY3Vy
c2l2ZWx5IiBmcm9tIGRpcmVjdC1yZWNsYWltLWVzcXVlICovCi19OwotCi1pbnQgX19pOTE1X2dl
bV9vYmplY3RfcHV0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCi0JCQkJ
ZW51bSBpOTE1X21tX3N1YmNsYXNzIHN1YmNsYXNzKTsKLXZvaWQgX19pOTE1X2dlbV9vYmplY3Rf
dHJ1bmNhdGUoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7Ci0KLWVudW0gaTkxNV9t
YXBfdHlwZSB7Ci0JSTkxNV9NQVBfV0IgPSAwLAotCUk5MTVfTUFQX1dDLAotI2RlZmluZSBJOTE1
X01BUF9PVkVSUklERSBCSVQoMzEpCi0JSTkxNV9NQVBfRk9SQ0VfV0IgPSBJOTE1X01BUF9XQiB8
IEk5MTVfTUFQX09WRVJSSURFLAotCUk5MTVfTUFQX0ZPUkNFX1dDID0gSTkxNV9NQVBfV0MgfCBJ
OTE1X01BUF9PVkVSUklERSwKLX07Ci0KLXN0YXRpYyBpbmxpbmUgZW51bSBpOTE1X21hcF90eXBl
Ci1pOTE1X2NvaGVyZW50X21hcF90eXBlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQot
ewotCXJldHVybiBIQVNfTExDKGk5MTUpID8gSTkxNV9NQVBfV0IgOiBJOTE1X01BUF9XQzsKLX0K
LQotLyoqCi0gKiBpOTE1X2dlbV9vYmplY3RfcGluX21hcCAtIHJldHVybiBhIGNvbnRpZ3VvdXMg
bWFwcGluZyBvZiB0aGUgZW50aXJlIG9iamVjdAotICogQG9iajogdGhlIG9iamVjdCB0byBtYXAg
aW50byBrZXJuZWwgYWRkcmVzcyBzcGFjZQotICogQHR5cGU6IHRoZSB0eXBlIG9mIG1hcHBpbmcs
IHVzZWQgdG8gc2VsZWN0IHBncHJvdF90Ci0gKgotICogQ2FsbHMgaTkxNV9nZW1fb2JqZWN0X3Bp
bl9wYWdlcygpIHRvIHByZXZlbnQgcmVhcGluZyBvZiB0aGUgb2JqZWN0J3MKLSAqIHBhZ2VzIGFu
ZCB0aGVuIHJldHVybnMgYSBjb250aWd1b3VzIG1hcHBpbmcgb2YgdGhlIGJhY2tpbmcgc3RvcmFn
ZSBpbnRvCi0gKiB0aGUga2VybmVsIGFkZHJlc3Mgc3BhY2UuIEJhc2VkIG9uIHRoZSBAdHlwZSBv
ZiBtYXBwaW5nLCB0aGUgUFRFIHdpbGwgYmUKLSAqIHNldCB0byBlaXRoZXIgV3JpdGVCYWNrIG9y
IFdyaXRlQ29tYmluZSAodmlhIHBncHJvdF90KS4KLSAqCi0gKiBUaGUgY2FsbGVyIGlzIHJlc3Bv
bnNpYmxlIGZvciBjYWxsaW5nIGk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAoKSB3aGVuIHRoZQot
ICogbWFwcGluZyBpcyBubyBsb25nZXIgcmVxdWlyZWQuCi0gKgotICogUmV0dXJucyB0aGUgcG9p
bnRlciB0aHJvdWdoIHdoaWNoIHRvIGFjY2VzcyB0aGUgbWFwcGVkIG9iamVjdCwgb3IgYW4KLSAq
IEVSUl9QVFIoKSBvbiBlcnJvci4KLSAqLwotdm9pZCAqX19tdXN0X2NoZWNrIGk5MTVfZ2VtX29i
amVjdF9waW5fbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCi0JCQkJCSAgIGVu
dW0gaTkxNV9tYXBfdHlwZSB0eXBlKTsKLQotdm9pZCBfX2k5MTVfZ2VtX29iamVjdF9mbHVzaF9t
YXAoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKLQkJCQkgdW5zaWduZWQgbG9uZyBv
ZmZzZXQsCi0JCQkJIHVuc2lnbmVkIGxvbmcgc2l6ZSk7Ci1zdGF0aWMgaW5saW5lIHZvaWQgaTkx
NV9nZW1fb2JqZWN0X2ZsdXNoX21hcChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQot
ewotCV9faTkxNV9nZW1fb2JqZWN0X2ZsdXNoX21hcChvYmosIDAsIG9iai0+YmFzZS5zaXplKTsK
LX0KLQotLyoqCi0gKiBpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwIC0gcmVsZWFzZXMgYW4gZWFy
bGllciBtYXBwaW5nCi0gKiBAb2JqOiB0aGUgb2JqZWN0IHRvIHVubWFwCi0gKgotICogQWZ0ZXIg
cGlubmluZyB0aGUgb2JqZWN0IGFuZCBtYXBwaW5nIGl0cyBwYWdlcywgb25jZSB5b3UgYXJlIGZp
bmlzaGVkCi0gKiB3aXRoIHlvdXIgYWNjZXNzLCBjYWxsIGk5MTVfZ2VtX29iamVjdF91bnBpbl9t
YXAoKSB0byByZWxlYXNlIHRoZSBwaW4KLSAqIHVwb24gdGhlIG1hcHBpbmcuIE9uY2UgdGhlIHBp
biBjb3VudCByZWFjaGVzIHplcm8sIHRoYXQgbWFwcGluZyBtYXkgYmUKLSAqIHJlbW92ZWQuCi0g
Ki8KLXN0YXRpYyBpbmxpbmUgdm9pZCBpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCi17Ci0JaTkxNV9nZW1fb2JqZWN0X3VucGluX3BhZ2Vz
KG9iaik7Ci19Ci0KIGludCBpOTE1X2dlbV9vYmpfcHJlcGFyZV9zaG1lbV9yZWFkKHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJCQkJICAgIHVuc2lnbmVkIGludCAqbmVlZHNfY2xm
bHVzaCk7CiBpbnQgaTkxNV9nZW1fb2JqX3ByZXBhcmVfc2htZW1fd3JpdGUoc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKm9iaiwKQEAgLTMzMzgsNCArMzIwNywxMCBAQCBzdGF0aWMgaW5saW5l
IHUzMiBpOTE1X3NjcmF0Y2hfb2Zmc2V0KGNvbnN0IHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpp
OTE1KQogCXJldHVybiBpOTE1X2dndHRfb2Zmc2V0KGk5MTUtPmd0LnNjcmF0Y2gpOwogfQogCitz
dGF0aWMgaW5saW5lIGVudW0gaTkxNV9tYXBfdHlwZQoraTkxNV9jb2hlcmVudF9tYXBfdHlwZShz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKK3sKKwlyZXR1cm4gSEFTX0xMQyhpOTE1KSA/
IEk5MTVfTUFQX1dCIDogSTkxNV9NQVBfV0M7Cit9CisKICNlbmRpZgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nbG9iYWxzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2dsb2JhbHMuYwppbmRleCA4MWU1YzJjZTMzNmIuLmRiNTJhNThlYWRjYyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nbG9iYWxzLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9nbG9iYWxzLmMKQEAgLTksNyArOSw3IEBACiAKICNpbmNsdWRlICJpOTE1
X2FjdGl2ZS5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX2NvbnRleHQuaCIKLSNpbmNsdWRlICJpOTE1
X2dlbV9vYmplY3QuaCIKKyNpbmNsdWRlICJnZW0vaTkxNV9nZW1fb2JqZWN0LmgiCiAjaW5jbHVk
ZSAiaTkxNV9nbG9iYWxzLmgiCiAjaW5jbHVkZSAiaTkxNV9yZXF1ZXN0LmgiCiAjaW5jbHVkZSAi
aTkxNV9zY2hlZHVsZXIuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
dm1hLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5oCmluZGV4IDZlYWI3MDk1M2E1
Ny4uNzk1MGZhOTZlZTg2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Zt
YS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmgKQEAgLTMyLDcgKzMyLDcg
QEAKIAogI2luY2x1ZGUgImk5MTVfZ2VtX2d0dC5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX2ZlbmNl
X3JlZy5oIgotI2luY2x1ZGUgImk5MTVfZ2VtX29iamVjdC5oIgorI2luY2x1ZGUgImdlbS9pOTE1
X2dlbV9vYmplY3QuaCIKIAogI2luY2x1ZGUgImk5MTVfYWN0aXZlLmgiCiAjaW5jbHVkZSAiaTkx
NV9yZXF1ZXN0LmgiCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9mcm9u
dGJ1ZmZlci5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZnJvbnRidWZmZXIuaAppbmRl
eCBkNTg5NDY2NmY2NTguLjU3MjczMjBjODA4NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaW50ZWxfZnJvbnRidWZmZXIuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF9mcm9udGJ1ZmZlci5oCkBAIC0yNCw3ICsyNCw3IEBACiAjaWZuZGVmIF9fSU5URUxfRlJPTlRC
VUZGRVJfSF9fCiAjZGVmaW5lIF9fSU5URUxfRlJPTlRCVUZGRVJfSF9fCiAKLSNpbmNsdWRlICJp
OTE1X2dlbV9vYmplY3QuaCIKKyNpbmNsdWRlICJnZW0vaTkxNV9nZW1fb2JqZWN0LmgiCiAKIHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlOwogc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Q7Ci0tIAoy
LjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCklu
dGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C32F8231B7
	for <lists+intel-gfx@lfdr.de>; Mon, 20 May 2019 12:49:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 80BC8891AF;
	Mon, 20 May 2019 10:49:17 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8C8B1891A8;
 Mon, 20 May 2019 10:49:16 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 May 2019 03:49:16 -0700
X-ExtLoop1: 1
Received: from dmironox-mobl5.ccr.corp.intel.com (HELO [10.252.20.122])
 ([10.252.20.122])
 by fmsmga008.fm.intel.com with ESMTP; 20 May 2019 03:49:14 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, igt-dev@lists.freedesktop.org
References: <20190517112526.6738-1-tvrtko.ursulin@linux.intel.com>
 <20190517112526.6738-13-tvrtko.ursulin@linux.intel.com>
 <155812174911.1890.4438273089258312619@skylake-alporthouse-com>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <5fcce814-0534-9435-4219-3900b46fa44d@linux.intel.com>
Date: Mon, 20 May 2019 11:49:13 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <155812174911.1890.4438273089258312619@skylake-alporthouse-com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [igt-dev] [PATCH i-g-t 12/25] gem_wsim: Engine map
 support
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDE3LzA1LzIwMTkgMjA6MzUsIENocmlzIFdpbHNvbiB3cm90ZToKPiBRdW90aW5nIFR2cnRr
byBVcnN1bGluICgyMDE5LTA1LTE3IDEyOjI1OjEzKQo+PiBGcm9tOiBUdnJ0a28gVXJzdWxpbiA8
dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgo+Pgo+PiBTdXBwb3J0IG5ldyBpOTE1IHVBUEkgZm9y
IGNvbmZpZ3VyaW5nIGNvbnRleHRzIHdpdGggZW5naW5lIG1hcHMuCj4+Cj4+IFBsZWFzZSByZWZl
ciB0byB0aGUgUkVBRE1FIGZpbGUgZm9yIG1vcmUgZGV0YWlsZWQgZXhwbGFuYXRpb24uCj4+Cj4+
IHYyOgo+PiAgICogQWxsb3cgZGVmaW5pbmcgZW5naW5lIG1hcHMgYnkgY2xhc3MuCj4+Cj4+IFNp
Z25lZC1vZmYtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Cj4+
IC0tLQo+PiAgIGJlbmNobWFya3MvZ2VtX3dzaW0uYyAgfCAyMTEgKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKystLS0tLS0KPj4gICBiZW5jaG1hcmtzL3dzaW0vUkVBRE1FIHwgIDI1
ICsrKystCj4+ICAgMiBmaWxlcyBjaGFuZ2VkLCAyMDQgaW5zZXJ0aW9ucygrKSwgMzIgZGVsZXRp
b25zKC0pCj4+Cj4+IGRpZmYgLS1naXQgYS9iZW5jaG1hcmtzL2dlbV93c2ltLmMgYi9iZW5jaG1h
cmtzL2dlbV93c2ltLmMKPj4gaW5kZXggNjBiN2QzMmUyMmQ0Li5lNWIxMmUzNzQ5MGUgMTAwNjQ0
Cj4+IC0tLSBhL2JlbmNobWFya3MvZ2VtX3dzaW0uYwo+PiArKysgYi9iZW5jaG1hcmtzL2dlbV93
c2ltLmMKPj4gQEAgLTU3LDYgKzU3LDcgQEAKPj4gICAjaW5jbHVkZSAiZXdtYS5oIgo+PiAgIAo+
PiAgIGVudW0gaW50ZWxfZW5naW5lX2lkIHsKPj4gKyAgICAgICBERUZBVUxULAo+PiAgICAgICAg
ICBSQ1MsCj4+ICAgICAgICAgIEJDUywKPj4gICAgICAgICAgVkNTLAo+PiBAQCAtODEsNyArODIs
OCBAQCBlbnVtIHdfdHlwZQo+PiAgICAgICAgICBTV19GRU5DRSwKPj4gICAgICAgICAgU1dfRkVO
Q0VfU0lHTkFMLAo+PiAgICAgICAgICBDVFhfUFJJT1JJVFksCj4+IC0gICAgICAgUFJFRU1QVElP
Tgo+PiArICAgICAgIFBSRUVNUFRJT04sCj4+ICsgICAgICAgRU5HSU5FX01BUAo+PiAgIH07Cj4+
ICAgCj4+ICAgc3RydWN0IGRlcHMKPj4gQEAgLTExNSw2ICsxMTcsMTAgQEAgc3RydWN0IHdfc3Rl
cAo+PiAgICAgICAgICAgICAgICAgIGludCB0aHJvdHRsZTsKPj4gICAgICAgICAgICAgICAgICBp
bnQgZmVuY2Vfc2lnbmFsOwo+PiAgICAgICAgICAgICAgICAgIGludCBwcmlvcml0eTsKPj4gKyAg
ICAgICAgICAgICAgIHN0cnVjdCB7Cj4+ICsgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVk
IGludCBlbmdpbmVfbWFwX2NvdW50Owo+PiArICAgICAgICAgICAgICAgICAgICAgICBlbnVtIGlu
dGVsX2VuZ2luZV9pZCAqZW5naW5lX21hcDsKPj4gKyAgICAgICAgICAgICAgIH07Cj4+ICAgICAg
ICAgIH07Cj4+ICAgCj4+ICAgICAgICAgIC8qIEltcGxlbWVudGF0aW9uIGRldGFpbHMgKi8KPj4g
QEAgLTE0Miw2ICsxNDgsOCBAQCBERUNMQVJFX0VXTUEodWludDY0X3QsIHJ0LCA0LCAyKQo+PiAg
IHN0cnVjdCBjdHggewo+PiAgICAgICAgICB1aW50MzJfdCBpZDsKPj4gICAgICAgICAgaW50IHBy
aW9yaXR5Owo+PiArICAgICAgIHVuc2lnbmVkIGludCBlbmdpbmVfbWFwX2NvdW50Owo+PiArICAg
ICAgIGVudW0gaW50ZWxfZW5naW5lX2lkICplbmdpbmVfbWFwOwo+PiAgICAgICAgICBib29sIHRh
cmdldHNfaW5zdGFuY2U7Cj4+ICAgICAgICAgIGJvb2wgd2FudHNfYmFsYW5jZTsKPj4gICAgICAg
ICAgdW5zaWduZWQgaW50IHN0YXRpY192Y3M7Cj4+IEBAIC0yMDAsMTAgKzIwOCwxMCBAQCBzdHJ1
Y3Qgd29ya2xvYWQKPj4gICAgICAgICAgICAgICAgICBpbnQgZmQ7Cj4+ICAgICAgICAgICAgICAg
ICAgYm9vbCBmaXJzdDsKPj4gICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgbnVtX2VuZ2lu
ZXM7Cj4+IC0gICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgZW5naW5lX21hcFs1XTsKPj4gKyAg
ICAgICAgICAgICAgIHVuc2lnbmVkIGludCBlbmdpbmVfbWFwW05VTV9FTkdJTkVTXTsKPj4gICAg
ICAgICAgICAgICAgICB1aW50NjRfdCB0X3ByZXY7Cj4+IC0gICAgICAgICAgICAgICB1aW50NjRf
dCBwcmV2WzVdOwo+PiAtICAgICAgICAgICAgICAgZG91YmxlIGJ1c3lbNV07Cj4+ICsgICAgICAg
ICAgICAgICB1aW50NjRfdCBwcmV2W05VTV9FTkdJTkVTXTsKPj4gKyAgICAgICAgICAgICAgIGRv
dWJsZSBidXN5W05VTV9FTkdJTkVTXTsKPj4gICAgICAgICAgfSBidXN5X2JhbGFuY2VyOwo+PiAg
IH07Cj4+ICAgCj4+IEBAIC0yMzQsNiArMjQyLDcgQEAgc3RhdGljIGludCBmZDsKPj4gICAjZGVm
aW5lIFJFRyh4KSAodm9sYXRpbGUgdWludDMyX3QgKikoKHZvbGF0aWxlIGNoYXIgKilpZ3RfZ2xv
YmFsX21taW8gKyB4KQo+PiAgIAo+PiAgIHN0YXRpYyBjb25zdCBjaGFyICpyaW5nX3N0cl9tYXBb
TlVNX0VOR0lORVNdID0gewo+PiArICAgICAgIFtERUZBVUxUXSA9ICJERUZBVUxUIiwKPj4gICAg
ICAgICAgW1JDU10gPSAiUkNTIiwKPj4gICAgICAgICAgW0JDU10gPSAiQkNTIiwKPj4gICAgICAg
ICAgW1ZDU10gPSAiVkNTIiwKPj4gQEAgLTMzMCw2ICszMzksNDMgQEAgc3RhdGljIGludCBzdHJf
dG9fZW5naW5lKGNvbnN0IGNoYXIgKnN0cikKPj4gICAgICAgICAgcmV0dXJuIC0xOwo+PiAgIH0K
Pj4gICAKPj4gK3N0YXRpYyBpbnQgcGFyc2VfZW5naW5lX21hcChzdHJ1Y3Qgd19zdGVwICpzdGVw
LCBjb25zdCBjaGFyICpfc3RyKQo+PiArewo+PiArICAgICAgIGNoYXIgKnRva2VuLCAqdGN0eCA9
IE5VTEwsICp0c3RhcnQgPSAoY2hhciAqKV9zdHI7Cj4+ICsKPj4gKyAgICAgICB3aGlsZSAoKHRv
a2VuID0gc3RydG9rX3IodHN0YXJ0LCAifCIsICZ0Y3R4KSkpIHsKPj4gKyAgICAgICAgICAgICAg
IGVudW0gaW50ZWxfZW5naW5lX2lkIGVuZ2luZTsKPj4gKyAgICAgICAgICAgICAgIHVuc2lnbmVk
IGludCBhZGQ7Cj4+ICsKPj4gKyAgICAgICAgICAgICAgIHRzdGFydCA9IE5VTEw7Cj4+ICsKPj4g
KyAgICAgICAgICAgICAgIGlmICghc3RyY21wKHRva2VuLCAiREVGQVVMVCIpKQo+PiArICAgICAg
ICAgICAgICAgICAgICAgICByZXR1cm4gLTE7Cj4+ICsKPj4gKyAgICAgICAgICAgICAgIGVuZ2lu
ZSA9IHN0cl90b19lbmdpbmUodG9rZW4pOwo+PiArICAgICAgICAgICAgICAgaWYgKChpbnQpZW5n
aW5lIDwgMCkKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwo+PiArCj4+ICsg
ICAgICAgICAgICAgICBpZiAoZW5naW5lICE9IFZDUyAmJiBlbmdpbmUgIT0gVkNTMSAmJiBlbmdp
bmUgIT0gVkNTMikKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOyAvKiBUT0RP
ICovCj4gCj4gU3RpbGwgYSBsaXR0bGUgY29uY2VybmVkIHRoYXQgdGhlIG1hcCBpcyBWQ1Mgb25s
eS4gSXQganVzdCBkb2Vzbid0IGZpdAo+IG15IGV4cGVjdGF0aW9ucyBvZiB3aGF0IHRoZSBtYXAg
d2lsbCBiZS4KCkkgdGhpbmsgSSBjb3VsZCB1cGRhdGUgdGhpcyBub3cgdGhhdCBsb2FkX2JhbGFu
Y2UgdGFrZXMgYSBsaXN0LgoKPj4gKwo+PiArICAgICAgICAgICAgICAgYWRkID0gZW5naW5lID09
IFZDUyA/IDIgOiAxOwo+IAo+IFdpbGwgd2Ugbm90IGV2ZXJ5IGFzayB3aGF0IGhhcHBlbnMgaWYg
d2UgaGFkIG1pbGxpb25zIG9mIGVuZ2luZXMgYXQgb3VyCj4gZGlzcG9zYWwuIEJ1dCB0aGF0J3Mg
YSB0b21tb3Jyb3cgcHJvYmxlbSwgb2suCgpUaGlzIGlzIGltcHJvdmVkIGluIGEgbGF0ZXIgcGF0
Y2guIEl0IGZlbHQgZWFzaWVyIHRvIGdlbmVyYWxpemUgYXQgdGhlIAplbmQgaW4gdGhpcyBpbnN0
YW5jZSBpbnN0ZWFkIG9mIHRyeWluZyB0byByZWJhc2UgdGhlIHdob2xlIHNlcmllcy4KCj4gCj4+
ICsgICAgICAgICAgICAgICBzdGVwLT5lbmdpbmVfbWFwX2NvdW50ICs9IGFkZDsKPj4gKyAgICAg
ICAgICAgICAgIHN0ZXAtPmVuZ2luZV9tYXAgPSByZWFsbG9jKHN0ZXAtPmVuZ2luZV9tYXAsCj4+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwLT5lbmdpbmVf
bWFwX2NvdW50ICoKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNpemVvZihzdGVwLT5lbmdpbmVfbWFwWzBdKSk7Cj4+ICsKPj4gKyAgICAgICAgICAgICAgIGlm
IChlbmdpbmUgIT0gVkNTKSB7Cj4+ICsgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAtPmVuZ2lu
ZV9tYXBbc3RlcC0+ZW5naW5lX21hcF9jb3VudCAtIDFdID0gZW5naW5lOwo+PiArICAgICAgICAg
ICAgICAgfSBlbHNlIHsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgc3RlcC0+ZW5naW5lX21h
cFtzdGVwLT5lbmdpbmVfbWFwX2NvdW50IC0gMl0gPSBWQ1MxOwo+PiArICAgICAgICAgICAgICAg
ICAgICAgICBzdGVwLT5lbmdpbmVfbWFwW3N0ZXAtPmVuZ2luZV9tYXBfY291bnQgLSAxXSA9IFZD
UzI7Cj4+ICsgICAgICAgICAgICAgICB9Cj4+ICsgICAgICAgfQo+PiArCj4+ICsgICAgICAgcmV0
dXJuIDA7Cj4+ICt9Cj4+ICsKPj4gICBzdGF0aWMgc3RydWN0IHdvcmtsb2FkICoKPj4gICBwYXJz
ZV93b3JrbG9hZChzdHJ1Y3Qgd19hcmcgKmFyZywgdW5zaWduZWQgaW50IGZsYWdzLCBzdHJ1Y3Qg
d29ya2xvYWQgKmFwcF93KQo+PiAgIHsKPj4gQEAgLTQ0OCw2ICs0OTQsMzMgQEAgcGFyc2Vfd29y
a2xvYWQoc3RydWN0IHdfYXJnICphcmcsIHVuc2lnbmVkIGludCBmbGFncywgc3RydWN0IHdvcmts
b2FkICphcHBfdykKPj4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXN0cmNt
cChmaWVsZCwgImYiKSkgewo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVw
LnR5cGUgPSBTV19GRU5DRTsKPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290
byBhZGRfc3RlcDsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghc3RyY21w
KGZpZWxkLCAiTSIpKSB7Cj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWdu
ZWQgaW50IG5yID0gMDsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAo
KGZpZWxkID0gc3RydG9rX3IoZnN0YXJ0LCAiLiIsICZmY3R4KSkgIT0KPj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgTlVMTCkgewo+PiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdG1wID0gYXRvaShmaWVsZCk7Cj4+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBjaGVja19hcmcobnIgPT0gMCAmJiB0bXAgPD0gMCwKPj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSW52YWxp
ZCBjb250ZXh0IGF0IHN0ZXAgJXUhXG4iLAo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIG5yX3N0ZXBzKTsKPj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGNoZWNrX2FyZyhuciA+IDEsCj4+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkludmFsaWQgZW5naW5lIG1hcCBmb3Jt
YXQgYXQgc3RlcCAldSFcbiIsCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgbnJfc3RlcHMpOwo+PiArCj4+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpZiAobnIgPT0gMCkgewo+PiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwLmNvbnRleHQgPSB0bXA7Cj4+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugewo+PiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAgPSBwYXJzZV9lbmdpbmVfbWFw
KCZzdGVwLAo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkKTsKPj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tfYXJnKHRtcCA8IDAsCj4+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSW52YWxp
ZCBlbmdpbmUgbWFwIGxpc3QgYXQgc3RlcCAldSFcbiIsCj4+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBucl9zdGVwcyk7Cj4+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Cj4+ICsKPj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5yKys7Cj4+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgfQo+PiArCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Rl
cC50eXBlID0gRU5HSU5FX01BUDsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBn
b3RvIGFkZF9zdGVwOwo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghc3Ry
Y21wKGZpZWxkLCAiWCIpKSB7Cj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVu
c2lnbmVkIGludCBuciA9IDA7Cj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdo
aWxlICgoZmllbGQgPSBzdHJ0b2tfcihmc3RhcnQsICIuIiwgJmZjdHgpKSAhPQo+PiBAQCAtNzc0
LDYgKzg0Nyw3IEBAIHRlcm1pbmF0ZV9iYihzdHJ1Y3Qgd19zdGVwICp3LCB1bnNpZ25lZCBpbnQg
ZmxhZ3MpCj4+ICAgfQo+PiAgIAo+PiAgIHN0YXRpYyBjb25zdCB1bnNpZ25lZCBpbnQgZWJfZW5n
aW5lX21hcFtOVU1fRU5HSU5FU10gPSB7Cj4+ICsgICAgICAgW0RFRkFVTFRdID0gSTkxNV9FWEVD
X0RFRkFVTFQsCj4+ICAgICAgICAgIFtSQ1NdID0gSTkxNV9FWEVDX1JFTkRFUiwKPj4gICAgICAg
ICAgW0JDU10gPSBJOTE1X0VYRUNfQkxULAo+PiAgICAgICAgICBbVkNTXSA9IEk5MTVfRVhFQ19C
U0QsCj4+IEBAIC03OTYsMTEgKzg3MCwzNiBAQCBlYl9zZXRfZW5naW5lKHN0cnVjdCBkcm1faTkx
NV9nZW1fZXhlY2J1ZmZlcjIgKmViLAo+PiAgICAgICAgICAgICAgICAgIGViLT5mbGFncyA9IGVi
X2VuZ2luZV9tYXBbZW5naW5lXTsKPj4gICB9Cj4+ICAgCj4+ICtzdGF0aWMgdW5zaWduZWQgaW50
Cj4+ICtmaW5kX2VuZ2luZV9pbl9tYXAoc3RydWN0IGN0eCAqY3R4LCBlbnVtIGludGVsX2VuZ2lu
ZV9pZCBlbmdpbmUpCj4+ICt7Cj4+ICsgICAgICAgdW5zaWduZWQgaW50IGk7Cj4+ICsKPj4gKyAg
ICAgICBmb3IgKGkgPSAwOyBpIDwgY3R4LT5lbmdpbmVfbWFwX2NvdW50OyBpKyspIHsKPj4gKyAg
ICAgICAgICAgICAgIGlmIChjdHgtPmVuZ2luZV9tYXBbaV0gPT0gZW5naW5lKQo+PiArICAgICAg
ICAgICAgICAgICAgICAgICByZXR1cm4gaSArIDE7Cj4+ICsgICAgICAgfQo+PiArCj4+ICsgICAg
ICAgaWd0X2Fzc2VydCgwKTsKPj4gKyAgICAgICByZXR1cm4gMDsKPiAKPiBObyBiYWxhbmNlciBp
biB0aGUgbWFwIGF0IHRoaXMgcG9pbnQ/CgpDb3JyZWN0LCBvbmx5IGluIG9uZSBvZiB0aGUgbGF0
ZXIgcGF0Y2hlcy4KCj4gCj4+ICt9Cj4+ICsKPj4gK3N0YXRpYyBzdHJ1Y3QgY3R4ICoKPj4gK19f
Z2V0X2N0eChzdHJ1Y3Qgd29ya2xvYWQgKndyaywgc3RydWN0IHdfc3RlcCAqdykKPj4gK3sKPj4g
KyAgICAgICByZXR1cm4gJndyay0+Y3R4X2xpc3Rbdy0+Y29udGV4dCAqIDJdOwo+PiArfQo+PiAr
Cj4+ICAgc3RhdGljIHZvaWQKPj4gLWViX3VwZGF0ZV9mbGFncyhzdHJ1Y3Qgd19zdGVwICp3LCBl
bnVtIGludGVsX2VuZ2luZV9pZCBlbmdpbmUsCj4+IC0gICAgICAgICAgICAgICB1bnNpZ25lZCBp
bnQgZmxhZ3MpCj4+ICtlYl91cGRhdGVfZmxhZ3Moc3RydWN0IHdvcmtsb2FkICp3cmssIHN0cnVj
dCB3X3N0ZXAgKncsCj4+ICsgICAgICAgICAgICAgICBlbnVtIGludGVsX2VuZ2luZV9pZCBlbmdp
bmUsIHVuc2lnbmVkIGludCBmbGFncykKPj4gICB7Cj4+IC0gICAgICAgZWJfc2V0X2VuZ2luZSgm
dy0+ZWIsIGVuZ2luZSwgZmxhZ3MpOwo+PiArICAgICAgIHN0cnVjdCBjdHggKmN0eCA9IF9fZ2V0
X2N0eCh3cmssIHcpOwo+PiArCj4+ICsgICAgICAgaWYgKGN0eC0+ZW5naW5lX21hcCkKPj4gKyAg
ICAgICAgICAgICAgIHctPmViLmZsYWdzID0gZmluZF9lbmdpbmVfaW5fbWFwKGN0eCwgZW5naW5l
KTsKPj4gKyAgICAgICBlbHNlCj4+ICsgICAgICAgICAgICAgICBlYl9zZXRfZW5naW5lKCZ3LT5l
YiwgZW5naW5lLCBmbGFncyk7Cj4+ICAgCj4+ICAgICAgICAgIHctPmViLmZsYWdzIHw9IEk5MTVf
RVhFQ19IQU5ETEVfTFVUOwo+PiAgICAgICAgICB3LT5lYi5mbGFncyB8PSBJOTE1X0VYRUNfTk9f
UkVMT0M7Cj4+IEBAIC04MTksMTIgKzkxOCw2IEBAIGdldF9zdGF0dXNfb2JqZWN0cyhzdHJ1Y3Qg
d29ya2xvYWQgKndyaykKPj4gICAgICAgICAgICAgICAgICByZXR1cm4gd3JrLT5zdGF0dXNfb2Jq
ZWN0Owo+PiAgIH0KPj4gICAKPj4gLXN0YXRpYyBzdHJ1Y3QgY3R4ICoKPj4gLV9fZ2V0X2N0eChz
dHJ1Y3Qgd29ya2xvYWQgKndyaywgc3RydWN0IHdfc3RlcCAqdykKPj4gLXsKPj4gLSAgICAgICBy
ZXR1cm4gJndyay0+Y3R4X2xpc3Rbdy0+Y29udGV4dCAqIDJdOwo+PiAtfQo+PiAtCj4+ICAgc3Rh
dGljIHVpbnQzMl90Cj4+ICAgZ2V0X2N0eGlkKHN0cnVjdCB3b3JrbG9hZCAqd3JrLCBzdHJ1Y3Qg
d19zdGVwICp3KQo+PiAgIHsKPj4gQEAgLTg5NCw3ICs5ODcsNyBAQCBhbGxvY19zdGVwX2JhdGNo
KHN0cnVjdCB3b3JrbG9hZCAqd3JrLCBzdHJ1Y3Qgd19zdGVwICp3LCB1bnNpZ25lZCBpbnQgZmxh
Z3MpCj4+ICAgICAgICAgICAgICAgICAgZW5naW5lID0gVkNTMjsKPj4gICAgICAgICAgZWxzZSBp
ZiAoZmxhZ3MgJiBTV0FQVkNTICYmIGVuZ2luZSA9PSBWQ1MyKQo+PiAgICAgICAgICAgICAgICAg
IGVuZ2luZSA9IFZDUzE7Cj4+IC0gICAgICAgZWJfdXBkYXRlX2ZsYWdzKHcsIGVuZ2luZSwgZmxh
Z3MpOwo+PiArICAgICAgIGViX3VwZGF0ZV9mbGFncyh3cmssIHcsIGVuZ2luZSwgZmxhZ3MpOwo+
PiAgICNpZmRlZiBERUJVRwo+PiAgICAgICAgICBwcmludGYoIiV1OiAldTp8Iiwgdy0+aWR4LCB3
LT5lYi5idWZmZXJfY291bnQpOwo+PiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDw9IGo7IGkrKykK
Pj4gQEAgLTkzNiw3ICsxMDI5LDcgQEAgc3RhdGljIHZvaWQgdm1fZGVzdHJveShpbnQgaTkxNSwg
dWludDMyX3Qgdm1faWQpCj4+ICAgICAgICAgIGlndF9hc3NlcnRfZXEoX192bV9kZXN0cm95KGk5
MTUsIHZtX2lkKSwgMCk7Cj4+ICAgfQo+PiAgIAo+PiAtc3RhdGljIHZvaWQKPj4gK3N0YXRpYyBp
bnQKPj4gICBwcmVwYXJlX3dvcmtsb2FkKHVuc2lnbmVkIGludCBpZCwgc3RydWN0IHdvcmtsb2Fk
ICp3cmssIHVuc2lnbmVkIGludCBmbGFncykKPj4gICB7Cj4+ICAgICAgICAgIHVuc2lnbmVkIGlu
dCBjdHhfdmNzOwo+PiBAQCAtOTk5LDMwICsxMDkyLDUzIEBAIHByZXBhcmVfd29ya2xvYWQodW5z
aWduZWQgaW50IGlkLCBzdHJ1Y3Qgd29ya2xvYWQgKndyaywgdW5zaWduZWQgaW50IGZsYWdzKQo+
PiAgICAgICAgICAvKgo+PiAgICAgICAgICAgKiBJZGVudGlmeSBpZiBjb250ZXh0cyB0YXJnZXQg
c3BlY2lmaWMgZW5naW5lIGluc3RhbmNlcyBhbmQgaWYgdGhleQo+PiAgICAgICAgICAgKiB3YW50
IHRvIGJlIGJhbGFuY2VkLgo+PiArICAgICAgICAqCj4+ICsgICAgICAgICogVHJhbnNmZXIgb3Zl
ciBlbmdpbmUgbWFwIGNvbmZpZ3VyYXRpb24gZnJvbSB0aGUgd29ya2xvYWQgc3RlcC4KPj4gICAg
ICAgICAgICovCj4+ICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB3cmstPm5yX2N0eHM7IGogKz0g
Mikgewo+PiAgICAgICAgICAgICAgICAgIGJvb2wgdGFyZ2V0cyA9IGZhbHNlOwo+PiAgICAgICAg
ICAgICAgICAgIGJvb2wgYmFsYW5jZSA9IGZhbHNlOwo+PiAgIAo+PiAgICAgICAgICAgICAgICAg
IGZvciAoaSA9IDAsIHcgPSB3cmstPnN0ZXBzOyBpIDwgd3JrLT5ucl9zdGVwczsgaSsrLCB3Kysp
IHsKPj4gLSAgICAgICAgICAgICAgICAgICAgICAgaWYgKHctPnR5cGUgIT0gQkFUQ0gpCj4+IC0g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7Cj4+IC0KPj4gICAgICAgICAg
ICAgICAgICAgICAgICAgIGlmICh3LT5jb250ZXh0ICE9IChqIC8gMikpCj4+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwo+PiAgIAo+PiAtICAgICAgICAgICAgICAg
ICAgICAgICBpZiAody0+ZW5naW5lID09IFZDUykKPj4gLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBiYWxhbmNlID0gdHJ1ZTsKPj4gLSAgICAgICAgICAgICAgICAgICAgICAgZWxzZQo+
PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHMgPSB0cnVlOwo+PiArICAg
ICAgICAgICAgICAgICAgICAgICBpZiAody0+dHlwZSA9PSBCQVRDSCkgewo+PiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGlmICh3LT5lbmdpbmUgPT0gVkNTKQo+PiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZSA9IHRydWU7Cj4+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQo+PiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdGFyZ2V0cyA9IHRydWU7Cj4+ICsgICAgICAgICAgICAgICAgICAgICAg
IH0gZWxzZSBpZiAody0+dHlwZSA9PSBFTkdJTkVfTUFQKSB7Cj4+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgd3JrLT5jdHhfbGlzdFtqXS5lbmdpbmVfbWFwID0gdy0+ZW5naW5lX21h
cDsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmstPmN0eF9saXN0W2pdLmVu
Z2luZV9tYXBfY291bnQgPQo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdy0+ZW5naW5lX21hcF9jb3VudDsKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgfQo+PiAg
ICAgICAgICAgICAgICAgIH0KPj4gICAKPj4gLSAgICAgICAgICAgICAgIGlmIChmbGFncyAmIEk5
MTUpIHsKPj4gLSAgICAgICAgICAgICAgICAgICAgICAgd3JrLT5jdHhfbGlzdFtqXS50YXJnZXRz
X2luc3RhbmNlID0gdGFyZ2V0czsKPj4gKyAgICAgICAgICAgICAgIHdyay0+Y3R4X2xpc3Rbal0u
dGFyZ2V0c19pbnN0YW5jZSA9IHRhcmdldHM7Cj4+ICsgICAgICAgICAgICAgICBpZiAoZmxhZ3Mg
JiBJOTE1KQo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgd3JrLT5jdHhfbGlzdFtqXS53YW50
c19iYWxhbmNlID0gYmFsYW5jZTsKPj4gKyAgICAgICB9Cj4+ICsKPj4gKyAgICAgICAvKgo+PiAr
ICAgICAgICAqIEVuc3VyZSBWQ1MgaXMgbm90IGFsbG93ZWQgd2l0aCBlbmdpbmUgbWFwIGNvbnRl
eHRzLgo+PiArICAgICAgICAqLwo+PiArICAgICAgIGZvciAoaiA9IDA7IGogPCB3cmstPm5yX2N0
eHM7IGogKz0gMikgewo+PiArICAgICAgICAgICAgICAgZm9yIChpID0gMCwgdyA9IHdyay0+c3Rl
cHM7IGkgPCB3cmstPm5yX3N0ZXBzOyBpKyssIHcrKykgewo+PiArICAgICAgICAgICAgICAgICAg
ICAgICBpZiAody0+Y29udGV4dCAhPSAoaiAvIDIpKQo+PiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGNvbnRpbnVlOwo+PiArCj4+ICsgICAgICAgICAgICAgICAgICAgICAgIGlmICh3
LT50eXBlICE9IEJBVENIKQo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRp
bnVlOwo+PiArCj4+ICsgICAgICAgICAgICAgICAgICAgICAgIGlmICh3cmstPmN0eF9saXN0W2pd
LmVuZ2luZV9tYXAgJiYgdy0+ZW5naW5lID09IFZDUykgewo+IAo+IEJ1dCB3b3VsZG4ndCBWQ1Mg
c3RpbGwgYmUgbWVhbmluZyB1c2UgdGhlIGJhbGFuY2VyIGFuZCBub3QgYSBzcGVjaWZpYwo+IGVu
Z2luZT8/Pwo+IAo+IEknbSBub3QgdW5kZXJzdGFuZGluZyBob3cgeW91IGFyZSB1c2luZyBtYXBz
IGluIHRoZSAud3NpbSA6KAoKQmF0Y2ggc2VudCB0byBWQ1MgbWVhbnMgYW55IFZDUyBpZiBub3Qg
YSBjb250ZXh0IHdpdGggYSBtYXAsIGJ1dCBWQ1MgCm1lbnRpb25lZCBpbiB0aGUgbWFwIG5vdyBh
dXRvLWV4cGFuZHMgdG8gYWxsIHByZXNlbnQgVkNTIGluc3RhbmNlcy4KClZDUyBhcyBlbmdpbmUg
c3BlY2lmaWVyIGF0IGV4ZWNidWYgdGltZSBjb3VsZCBiZSBhbGxvd2VkIGlmIGNvZGUgd291bGQg
CnRoZW4gY2hlY2sgaWYgdGhlcmUgaXMgYSBsb2FkIGJhbGFuY2VyIGJ1aWx0IG9mIHZjcyBlbmdp
bmVzIGluIHRoaXMgY29udGV4dC4KCkJ1dCB3aGF0IHVzZSBjYXNlIHlvdSB0aGluayBpcyBub3Qg
Y292ZXJlZD8KCldlIGdvdCBsZWdhY3kgd3NpbSBmaWxlcyB3aGljaCBpbXBsaWNpdGx5IGNyZWF0
ZSBhIG1hcCBieSBkb2luZzoKCjEuVkNTLjEwMDAuMC4wIC0+IHN1Ym1pdCBhIGJhdGNoIHRvIGFu
eSB2Y3MKCkFuZCB0aGVuIGFmdGVyIHRoaXMgc2VyaWVzIHlvdSBjYW4gYWxzbyBkbzoKCk0uMS5W
Q1MKQi4xCjEuREVGQVVMVC4xMDAwLjAuMAoKV2hpY2ggd291bGQgaGF2ZSB0aGUgc2FtZSBlZmZl
Y3QuCgpZb3Ugd291bGQgc2VlbSB3YW50OgoKTS4xLlZDUwpCLjEKMS5WQ1MuMTAwMC4wLjAKCj8K
CkJ1dCBJIGRvbid0IHNlZSB3aGF0IGl0IGdhaW5zPwoKUmVnYXJkcywKClR2cnRrbwpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGlu
ZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

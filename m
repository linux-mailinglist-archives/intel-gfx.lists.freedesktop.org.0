Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8B41B48BA4
	for <lists+intel-gfx@lfdr.de>; Mon, 17 Jun 2019 20:13:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 443EC89327;
	Mon, 17 Jun 2019 18:13:35 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 75B0E892C9
 for <Intel-gfx@lists.freedesktop.org>; Mon, 17 Jun 2019 18:13:34 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 17 Jun 2019 11:13:34 -0700
X-ExtLoop1: 1
Received: from yyosef-mobl.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.23.42])
 by fmsmga007.fm.intel.com with ESMTP; 17 Jun 2019 11:13:32 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Mon, 17 Jun 2019 19:12:33 +0100
Message-Id: <20190617181236.7981-31-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190617181236.7981-1-tvrtko.ursulin@linux.intel.com>
References: <20190617181236.7981-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC 30/33] drm/i915: Save trip via top-level i915 in a
 few more places
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCkZvciBndCBy
ZWxhdGVkIG9wZXJhdGlvbnMgaXQgbWFrZXMgbW9yZSBsb2dpY2FsIHNlbnNlIHRvIHN0YXkgaW4g
dGhlIHJlYWxtCm9mIGd0IGluc3RlYWQgb2YgZGVyZWZlcmVuY2luZyB2aWEgZHJpdmVyIGk5MTUu
CgpUaGlzIHBhdGNoIGhhbmRsZXMgYSBmZXcgb2YgdGhlIGVhc3kgb25lcyB3aXRoIHdvcmsgcmVx
dWlyaW5nIG1vcmUKcmVmYWN0b3Jpbmcgc3RpbGwgb3V0c3RhbmRpbmcuCgpTaWduZWQtb2ZmLWJ5
OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgpSZXZpZXdlZC1ieTog
Q2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Ci0tLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMgICAgICAgfCAzICstLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0LmMgfCAzICstLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMgICAgICAgICAgICAgfCAy
ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICAgICAgICAgICAgICAg
ICB8IDQgKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ2J1ZmZlci5jICAg
ICAgICAgICAgfCAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5k
cy5jICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2hh
bmdjaGVjay5jICAgICAgICAgIHwgOCArKysrLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
c2VsZnRlc3Rfd29ya2Fyb3VuZHMuYyAgICAgICAgfCAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dlbV9ndHQuYyAgICAgICAgICAgICAgICAgICB8IDQgKystLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9nZW1fcmVuZGVyX3N0YXRlLmMgICAgICAgICAgfCAyICstCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jICAgICAgICAgICAgICAgICB8IDIgKy0KIDEx
IGZpbGVzIGNoYW5nZWQsIDE2IGluc2VydGlvbnMoKyksIDE4IGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaHVnZV9wYWdlcy5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMKaW5kZXggZGNm
NjBhOGMyMjllLi4yMTU0Y2RlZTRhYjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9zZWxmdGVzdHMvaHVnZV9wYWdlcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9zZWxmdGVzdHMvaHVnZV9wYWdlcy5jCkBAIC0xMDM5LDggKzEwMzksNyBAQCBzdGF0aWMgaW50
IF9faWd0X3dyaXRlX2h1Z2Uoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwKIAkJCSAgICB1
NjQgc2l6ZSwgdTY0IG9mZnNldCwKIAkJCSAgICB1MzIgZHdvcmQsIHUzMiB2YWwpCiB7Ci0Jc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KG9iai0+YmFzZS5kZXYpOwotCXN0
cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtID0gY3R4LT52bSA/OiAmaTkxNS0+Z2d0dC52bTsK
KwlzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSA9IGN0eC0+dm0gPzogJmVuZ2luZS0+Z3Qt
PmdndHQtPnZtOwogCXVuc2lnbmVkIGludCBmbGFncyA9IFBJTl9VU0VSIHwgUElOX09GRlNFVF9G
SVhFRDsKIAlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKIAlpbnQgZXJyOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0LmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2NvbnRleHQuYwppbmRleCAw
M2FjNTAwM2FiZjEuLmEyZGEzNjY5ZTIwNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9jb250ZXh0LmMKQEAgLTI0MSw4ICsyNDEsNyBA
QCBzdGF0aWMgaW50IGdwdV9maWxsKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJ
CSAgICBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAJCSAgICB1bnNpZ25lZCBpbnQg
ZHcpCiB7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KG9iai0+YmFz
ZS5kZXYpOwotCXN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtID0gY3R4LT52bSA/OiAmaTkx
NS0+Z2d0dC52bTsKKwlzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSA9IGN0eC0+dm0gPzog
JmVuZ2luZS0+Z3QtPmdndHQtPnZtOwogCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOwogCXN0cnVj
dCBpOTE1X3ZtYSAqdm1hOwogCXN0cnVjdCBpOTE1X3ZtYSAqYmF0Y2g7CmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCmluZGV4IDI5ZWM5YWFhZjFjNy4uZjM0Nzk3ZTEx
YTcwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3Mu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwpAQCAtNTgw
LDcgKzU4MCw3IEBAIHN0YXRpYyBpbnQgaW5pdF9zdGF0dXNfcGFnZShzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUpCiAKIAlpOTE1X2dlbV9vYmplY3Rfc2V0X2NhY2hlX2NvaGVyZW5jeShv
YmosIEk5MTVfQ0FDSEVfTExDKTsKIAotCXZtYSA9IGk5MTVfdm1hX2luc3RhbmNlKG9iaiwgJmVu
Z2luZS0+aTkxNS0+Z2d0dC52bSwgTlVMTCk7CisJdm1hID0gaTkxNV92bWFfaW5zdGFuY2Uob2Jq
LCAmZW5naW5lLT5ndC0+Z2d0dC0+dm0sIE5VTEwpOwogCWlmIChJU19FUlIodm1hKSkgewogCQly
ZXQgPSBQVFJfRVJSKHZtYSk7CiAJCWdvdG8gZXJyOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9s
cmMuYwppbmRleCBjNDAwYzY2ZDBlZTUuLjE5OTI3M2RlNDk4YyAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfbHJjLmMKQEAgLTE4NzksNyArMTg3OSw3IEBAIHN0YXRpYyBpbnQgbHJjX3NldHVw
X3dhX2N0eChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJaWYgKElTX0VSUihvYmop
KQogCQlyZXR1cm4gUFRSX0VSUihvYmopOwogCi0Jdm1hID0gaTkxNV92bWFfaW5zdGFuY2Uob2Jq
LCAmZW5naW5lLT5pOTE1LT5nZ3R0LnZtLCBOVUxMKTsKKwl2bWEgPSBpOTE1X3ZtYV9pbnN0YW5j
ZShvYmosICZlbmdpbmUtPmd0LT5nZ3R0LT52bSwgTlVMTCk7CiAJaWYgKElTX0VSUih2bWEpKSB7
CiAJCWVyciA9IFBUUl9FUlIodm1hKTsKIAkJZ290byBlcnI7CkBAIC0yOTcwLDcgKzI5NzAsNyBA
QCBzdGF0aWMgaW50IGV4ZWNsaXN0c19jb250ZXh0X2RlZmVycmVkX2FsbG9jKHN0cnVjdCBpbnRl
bF9jb250ZXh0ICpjZSwKIAlpZiAoSVNfRVJSKGN0eF9vYmopKQogCQlyZXR1cm4gUFRSX0VSUihj
dHhfb2JqKTsKIAotCXZtYSA9IGk5MTVfdm1hX2luc3RhbmNlKGN0eF9vYmosICZlbmdpbmUtPmk5
MTUtPmdndHQudm0sIE5VTEwpOworCXZtYSA9IGk5MTVfdm1hX2luc3RhbmNlKGN0eF9vYmosICZl
bmdpbmUtPmd0LT5nZ3R0LT52bSwgTlVMTCk7CiAJaWYgKElTX0VSUih2bWEpKSB7CiAJCXJldCA9
IFBUUl9FUlIodm1hKTsKIAkJZ290byBlcnJvcl9kZXJlZl9vYmo7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMKaW5kZXggZTZiYjRiZmQwMjJmLi5hODc4YmIyMTRh
NjIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3JpbmdidWZmZXIu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMKQEAgLTE0
MDUsNyArMTQwNSw3IEBAIGFsbG9jX2NvbnRleHRfdm1hKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSkKIAkJaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChvYmopOwogCX0KIAotCXZtYSA9
IGk5MTVfdm1hX2luc3RhbmNlKG9iaiwgJmk5MTUtPmdndHQudm0sIE5VTEwpOworCXZtYSA9IGk5
MTVfdm1hX2luc3RhbmNlKG9iaiwgJmVuZ2luZS0+Z3QtPmdndHQtPnZtLCBOVUxMKTsKIAlpZiAo
SVNfRVJSKHZtYSkpIHsKIAkJZXJyID0gUFRSX0VSUih2bWEpOwogCQlnb3RvIGVycl9vYmo7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYwppbmRleCAwYjMzMDhl
MzlhMTcuLmM5ZTkyOTI4NWJjOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfd29ya2Fyb3VuZHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93
b3JrYXJvdW5kcy5jCkBAIC0xMzY5LDcgKzEzNjksNyBAQCBzdGF0aWMgaW50IGVuZ2luZV93YV9s
aXN0X3ZlcmlmeShzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCiAJaWYgKCF3YWwtPmNvdW50KQog
CQlyZXR1cm4gMDsKIAotCXZtYSA9IGNyZWF0ZV9zY3JhdGNoKCZjZS0+ZW5naW5lLT5pOTE1LT5n
Z3R0LnZtLCB3YWwtPmNvdW50KTsKKwl2bWEgPSBjcmVhdGVfc2NyYXRjaCgmY2UtPmVuZ2luZS0+
Z3QtPmdndHQtPnZtLCB3YWwtPmNvdW50KTsKIAlpZiAoSVNfRVJSKHZtYSkpCiAJCXJldHVybiBQ
VFJfRVJSKHZtYSk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0
ZXN0X2hhbmdjaGVjay5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfaGFuZ2No
ZWNrLmMKaW5kZXggODU3N2JhYTA1MGZiLi5hMmViNGM4MzQ3MmUgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2hhbmdjaGVjay5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2hhbmdjaGVjay5jCkBAIC0xMzAsNyArMTMwLDcgQEAgc3Rh
dGljIHN0cnVjdCBpOTE1X3JlcXVlc3QgKgogaGFuZ19jcmVhdGVfcmVxdWVzdChzdHJ1Y3QgaGFu
ZyAqaCwgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogewogCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1ID0gaC0+aTkxNTsKLQlzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2
bSA9IGgtPmN0eC0+dm0gPzogJmk5MTUtPmdndHQudm07CisJc3RydWN0IGk5MTVfYWRkcmVzc19z
cGFjZSAqdm0gPSBoLT5jdHgtPnZtID86ICZlbmdpbmUtPmd0LT5nZ3R0LT52bTsKIAlzdHJ1Y3Qg
aTkxNV9yZXF1ZXN0ICpycSA9IE5VTEw7CiAJc3RydWN0IGk5MTVfdm1hICpod3MsICp2bWE7CiAJ
dW5zaWduZWQgaW50IGZsYWdzOwpAQCAtMTQzLDEyICsxNDMsMTIgQEAgaGFuZ19jcmVhdGVfcmVx
dWVzdChzdHJ1Y3QgaGFuZyAqaCwgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCQlz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwogCQl2b2lkICp2YWRkcjsKIAotCQlvYmog
PSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX2ludGVybmFsKGgtPmk5MTUsIFBBR0VfU0laRSk7CisJ
CW9iaiA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfaW50ZXJuYWwoaTkxNSwgUEFHRV9TSVpFKTsK
IAkJaWYgKElTX0VSUihvYmopKQogCQkJcmV0dXJuIEVSUl9DQVNUKG9iaik7CiAKIAkJdmFkZHIg
PSBpOTE1X2dlbV9vYmplY3RfcGluX21hcChvYmosCi0JCQkJCQlpOTE1X2NvaGVyZW50X21hcF90
eXBlKGgtPmk5MTUpKTsKKwkJCQkJCWk5MTVfY29oZXJlbnRfbWFwX3R5cGUoaTkxNSkpOwogCQlp
ZiAoSVNfRVJSKHZhZGRyKSkgewogCQkJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwogCQkJcmV0
dXJuIEVSUl9DQVNUKHZhZGRyKTsKQEAgLTI1NSw3ICsyNTUsNyBAQCBoYW5nX2NyZWF0ZV9yZXF1
ZXN0KHN0cnVjdCBoYW5nICpoLCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJfQog
CiAJZmxhZ3MgPSAwOwotCWlmIChJTlRFTF9HRU4odm0tPmk5MTUpIDw9IDUpCisJaWYgKElOVEVM
X0dFTihpOTE1KSA8PSA1KQogCQlmbGFncyB8PSBJOTE1X0RJU1BBVENIX1NFQ1VSRTsKIAogCWVy
ciA9IHJxLT5lbmdpbmUtPmVtaXRfYmJfc3RhcnQocnEsIHZtYS0+bm9kZS5zdGFydCwgUEFHRV9T
SVpFLCBmbGFncyk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVz
dF93b3JrYXJvdW5kcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rfd29ya2Fy
b3VuZHMuYwppbmRleCA0ZGI5Mjk2NDVlNWIuLjkwNWMxNzI2OTc1ZCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rfd29ya2Fyb3VuZHMuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF93b3JrYXJvdW5kcy5jCkBAIC0xMDMsNyArMTAzLDcg
QEAgcmVhZF9ub25wcml2cyhzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4LCBzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJaTkxNV9nZW1fb2JqZWN0X2ZsdXNoX21hcChyZXN1bHQp
OwogCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAocmVzdWx0KTsKIAotCXZtYSA9IGk5MTVfdm1h
X2luc3RhbmNlKHJlc3VsdCwgJmVuZ2luZS0+aTkxNS0+Z2d0dC52bSwgTlVMTCk7CisJdm1hID0g
aTkxNV92bWFfaW5zdGFuY2UocmVzdWx0LCAmZW5naW5lLT5ndC0+Z2d0dC0+dm0sIE5VTEwpOwog
CWlmIChJU19FUlIodm1hKSkgewogCQllcnIgPSBQVFJfRVJSKHZtYSk7CiAJCWdvdG8gZXJyX29i
ajsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKaW5kZXggYmZiOTc2NzIzN2JmLi5jY2Iy
ZWYzYTcwZTEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCkBAIC0xODczLDcgKzE4
NzMsNyBAQCBzdGF0aWMgaW50IGdlbjZfYWxsb2NfdmFfcmFuZ2Uoc3RydWN0IGk5MTVfYWRkcmVz
c19zcGFjZSAqdm0sCiAKIAlpZiAoZmx1c2gpIHsKIAkJbWFya190bGJzX2RpcnR5KCZwcGd0dC0+
YmFzZSk7Ci0JCWdlbjZfZ2d0dF9pbnZhbGlkYXRlKCZ2bS0+aTkxNS0+Z2d0dCk7CisJCWdlbjZf
Z2d0dF9pbnZhbGlkYXRlKHZtLT5ndC0+Z2d0dCk7CiAJfQogCiAJaW50ZWxfcnVudGltZV9wbV9w
dXQoJnZtLT5pOTE1LT5ydW50aW1lX3BtLCB3YWtlcmVmKTsKQEAgLTIwNTksNyArMjA1OSw3IEBA
IHN0YXRpYyBjb25zdCBzdHJ1Y3QgaTkxNV92bWFfb3BzIHBkX3ZtYV9vcHMgPSB7CiBzdGF0aWMg
c3RydWN0IGk5MTVfdm1hICpwZF92bWFfY3JlYXRlKHN0cnVjdCBnZW42X3BwZ3R0ICpwcGd0dCwg
aW50IHNpemUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBwcGd0dC0+YmFz
ZS52bS5pOTE1OwotCXN0cnVjdCBpOTE1X2dndHQgKmdndHQgPSAmaTkxNS0+Z2d0dDsKKwlzdHJ1
Y3QgaTkxNV9nZ3R0ICpnZ3R0ID0gcHBndHQtPmJhc2Uudm0uZ3QtPmdndHQ7CiAJc3RydWN0IGk5
MTVfdm1hICp2bWE7CiAKIAlHRU1fQlVHX09OKCFJU19BTElHTkVEKHNpemUsIEk5MTVfR1RUX1BB
R0VfU0laRSkpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fcmVu
ZGVyX3N0YXRlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9yZW5kZXJfc3RhdGUu
YwppbmRleCA0ZWUwMzIwNzJkNGYuLjZiZGEwOGMxZThkNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9nZW1fcmVuZGVyX3N0YXRlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9nZW1fcmVuZGVyX3N0YXRlLmMKQEAgLTE5NCw3ICsxOTQsNyBAQCBpbnQgaTkx
NV9nZW1fcmVuZGVyX3N0YXRlX2VtaXQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEpCiAJaWYgKElT
X0VSUihzby5vYmopKQogCQlyZXR1cm4gUFRSX0VSUihzby5vYmopOwogCi0Jc28udm1hID0gaTkx
NV92bWFfaW5zdGFuY2Uoc28ub2JqLCAmZW5naW5lLT5pOTE1LT5nZ3R0LnZtLCBOVUxMKTsKKwlz
by52bWEgPSBpOTE1X3ZtYV9pbnN0YW5jZShzby5vYmosICZlbmdpbmUtPmd0LT5nZ3R0LT52bSwg
TlVMTCk7CiAJaWYgKElTX0VSUihzby52bWEpKSB7CiAJCWVyciA9IFBUUl9FUlIoc28udm1hKTsK
IAkJZ290byBlcnJfb2JqOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
cHVfZXJyb3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMKaW5kZXgg
ZjQxMWUzMjQ0MjA4Li5jNDA3OTlmYWQyY2QgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZ3B1X2Vycm9yLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVf
ZXJyb3IuYwpAQCAtMTQwOSwxMiArMTQwOSwxMiBAQCBjYXB0dXJlX29iamVjdChzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiBzdGF0aWMgdm9pZCBnZW1fcmVjb3JkX3JpbmdzKHN0
cnVjdCBpOTE1X2dwdV9zdGF0ZSAqZXJyb3IpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUgPSBlcnJvci0+aTkxNTsKLQlzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0ID0gJmk5MTUtPmdn
dHQ7CiAJaW50IGk7CiAKIAlmb3IgKGkgPSAwOyBpIDwgSTkxNV9OVU1fRU5HSU5FUzsgaSsrKSB7
CiAJCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9IGk5MTUtPmVuZ2luZVtpXTsKIAkJ
c3RydWN0IGRybV9pOTE1X2Vycm9yX2VuZ2luZSAqZWUgPSAmZXJyb3ItPmVuZ2luZVtpXTsKKwkJ
c3RydWN0IGk5MTVfZ2d0dCAqZ2d0dCA9IGVuZ2luZS0+Z3QtPmdndHQ7CiAJCXN0cnVjdCBpOTE1
X3JlcXVlc3QgKnJlcXVlc3Q7CiAKIAkJZWUtPmVuZ2luZV9pZCA9IC0xOwotLSAKMi4yMC4xCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

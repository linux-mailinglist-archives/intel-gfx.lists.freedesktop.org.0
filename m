Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AC7E0349BEB
	for <lists+intel-gfx@lfdr.de>; Thu, 25 Mar 2021 22:48:57 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C1A246EE64;
	Thu, 25 Mar 2021 21:48:55 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3A8286EE68
 for <intel-gfx@lists.freedesktop.org>; Thu, 25 Mar 2021 21:48:39 +0000 (UTC)
IronPort-SDR: 8lk0GVCL2wM67zclCGgN4u3gl1KBDNBEgV+aO6tCuh6g/e0gOHZl9CfxIvZ7W5zZPlGZkxZFMy
 5/o70ABDfjJA==
X-IronPort-AV: E=McAfee;i="6000,8403,9934"; a="171005104"
X-IronPort-AV: E=Sophos;i="5.81,278,1610438400"; d="scan'208";a="171005104"
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by fmsmga107.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 25 Mar 2021 14:48:38 -0700
IronPort-SDR: gmsdgdWHTj6V+wPy9vPAmIp410+KsgzDfPYSGcaAllkePdWy5tLTH2PJlh32IenPYlL4zHA8EV
 +X1FnUCOJSqA==
X-IronPort-AV: E=Sophos;i="5.81,278,1610438400"; d="scan'208";a="375235733"
Received: from ideak-desk.fi.intel.com ([10.237.68.141])
 by orsmga003-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 25 Mar 2021 14:48:37 -0700
From: Imre Deak <imre.deak@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 25 Mar 2021 23:48:04 +0200
Message-Id: <20210325214808.2071517-22-imre.deak@intel.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20210325214808.2071517-1-imre.deak@intel.com>
References: <20210325214808.2071517-1-imre.deak@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 21/25] drm/i915/selftest: Unify use of
 intel_remapped_plane_info in igt_vma_rotate_remap()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWx3YXlzIHVzZSB0aGUgbW9kaWZpZWQgY29weSBvZiB0aGUgaW50ZWxfcmVtYXBwZWRfcGxhbmVf
aW5mbyB2YXJpYWJsZXMuCkFuIHVwY29taW5nIHBhdGNoIHVwZGF0ZXMgdGhlIGRzdF9zdHJpZGUg
ZmllbGQgaW4gdGhlc2UgY29waWVzIGFmdGVyCndoaWNoIHdlIGNhbid0IHVzZSB0aGUgb3JpZ2lu
YWwgdmVyc2lvbnMuCgp2MjogSW5pdCB2aWV3IGluIGlndF92bWFfcm90YXRlX3JlbWFwKCkgd2hl
biBkZWNsYXJpbmcgaXQuIChWaWxsZSkKClNpZ25lZC1vZmYtYnk6IEltcmUgRGVhayA8aW1yZS5k
ZWFrQGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFs
YUBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5
MTVfdm1hLmMgfCA2MyArKysrKysrKysrKystLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDM0
IGluc2VydGlvbnMoKyksIDI5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X3ZtYS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2Vs
ZnRlc3RzL2k5MTVfdm1hLmMKaW5kZXggOWRkNjc5OTEwNWU2Ni4uOTVkZDY3MTJhYzkwNSAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfdm1hLmMKQEAgLTUxNSwyMiArNTE1
LDI0IEBAIHN0YXRpYyBpbnQgaWd0X3ZtYV9yb3RhdGVfcmVtYXAodm9pZCAqYXJnKQogCWZvciAo
dCA9IHR5cGVzOyAqdDsgdCsrKSB7CiAJZm9yIChhID0gcGxhbmVzOyBhLT53aWR0aDsgYSsrKSB7
CiAJCWZvciAoYiA9IHBsYW5lcyArIEFSUkFZX1NJWkUocGxhbmVzKTsgYi0tICE9IHBsYW5lczsg
KSB7Ci0JCQlzdHJ1Y3QgaTkxNV9nZ3R0X3ZpZXcgdmlldyA9IHt9OworCQkJc3RydWN0IGk5MTVf
Z2d0dF92aWV3IHZpZXcgPSB7CisJCQkJLnR5cGUgPSAqdCwKKwkJCQkucmVtYXBwZWQucGxhbmVb
MF0gPSAqYSwKKwkJCQkucmVtYXBwZWQucGxhbmVbMV0gPSAqYiwKKwkJCX07CisJCQlzdHJ1Y3Qg
aW50ZWxfcmVtYXBwZWRfcGxhbmVfaW5mbyAqcGxhbmVfaW5mbyA9IHZpZXcucmVtYXBwZWQucGxh
bmU7CiAJCQl1bnNpZ25lZCBpbnQgbiwgbWF4X29mZnNldDsKIAotCQkJbWF4X29mZnNldCA9IG1h
eChhLT5zdHJpZGUgKiBhLT5oZWlnaHQsCi0JCQkJCSBiLT5zdHJpZGUgKiBiLT5oZWlnaHQpOwor
CQkJbWF4X29mZnNldCA9IG1heChwbGFuZV9pbmZvWzBdLnN0cmlkZSAqIHBsYW5lX2luZm9bMF0u
aGVpZ2h0LAorCQkJCQkgcGxhbmVfaW5mb1sxXS5zdHJpZGUgKiBwbGFuZV9pbmZvWzFdLmhlaWdo
dCk7CiAJCQlHRU1fQlVHX09OKG1heF9vZmZzZXQgPiBtYXhfcGFnZXMpOwogCQkJbWF4X29mZnNl
dCA9IG1heF9wYWdlcyAtIG1heF9vZmZzZXQ7CiAKLQkJCXZpZXcudHlwZSA9ICp0OwotCQkJdmll
dy5yb3RhdGVkLnBsYW5lWzBdID0gKmE7Ci0JCQl2aWV3LnJvdGF0ZWQucGxhbmVbMV0gPSAqYjsK
LQotCQkJZm9yX2VhY2hfcHJpbWVfbnVtYmVyX2Zyb20odmlldy5yb3RhdGVkLnBsYW5lWzBdLm9m
ZnNldCwgMCwgbWF4X29mZnNldCkgewotCQkJCWZvcl9lYWNoX3ByaW1lX251bWJlcl9mcm9tKHZp
ZXcucm90YXRlZC5wbGFuZVsxXS5vZmZzZXQsIDAsIG1heF9vZmZzZXQpIHsKKwkJCWZvcl9lYWNo
X3ByaW1lX251bWJlcl9mcm9tKHBsYW5lX2luZm9bMF0ub2Zmc2V0LCAwLCBtYXhfb2Zmc2V0KSB7
CisJCQkJZm9yX2VhY2hfcHJpbWVfbnVtYmVyX2Zyb20ocGxhbmVfaW5mb1sxXS5vZmZzZXQsIDAs
IG1heF9vZmZzZXQpIHsKIAkJCQkJc3RydWN0IHNjYXR0ZXJsaXN0ICpzZzsKIAkJCQkJc3RydWN0
IGk5MTVfdm1hICp2bWE7CisJCQkJCXVuc2lnbmVkIGludCBleHBlY3RlZF9wYWdlczsKIAogCQkJ
CQl2bWEgPSBjaGVja2VkX3ZtYV9pbnN0YW5jZShvYmosIHZtLCAmdmlldyk7CiAJCQkJCWlmIChJ
U19FUlIodm1hKSkgewpAQCAtNTQ0LDI1ICs1NDYsMjcgQEAgc3RhdGljIGludCBpZ3Rfdm1hX3Jv
dGF0ZV9yZW1hcCh2b2lkICphcmcpCiAJCQkJCQlnb3RvIG91dF9vYmplY3Q7CiAJCQkJCX0KIAor
CQkJCQlleHBlY3RlZF9wYWdlcyA9IHJvdGF0ZWRfc2l6ZSgmcGxhbmVfaW5mb1swXSwgJnBsYW5l
X2luZm9bMV0pOworCiAJCQkJCWlmICh2aWV3LnR5cGUgPT0gSTkxNV9HR1RUX1ZJRVdfUk9UQVRF
RCAmJgotCQkJCQkgICAgdm1hLT5zaXplICE9IHJvdGF0ZWRfc2l6ZShhLCBiKSAqIFBBR0VfU0la
RSkgeworCQkJCQkgICAgdm1hLT5zaXplICE9IGV4cGVjdGVkX3BhZ2VzICogUEFHRV9TSVpFKSB7
CiAJCQkJCQlwcl9lcnIoIlZNQSBpcyB3cm9uZyBzaXplLCBleHBlY3RlZCAlbHUsIGZvdW5kICVs
bHVcbiIsCi0JCQkJCQkgICAgICAgUEFHRV9TSVpFICogcm90YXRlZF9zaXplKGEsIGIpLCB2bWEt
PnNpemUpOworCQkJCQkJICAgICAgIFBBR0VfU0laRSAqIGV4cGVjdGVkX3BhZ2VzLCB2bWEtPnNp
emUpOwogCQkJCQkJZXJyID0gLUVJTlZBTDsKIAkJCQkJCWdvdG8gb3V0X29iamVjdDsKIAkJCQkJ
fQogCiAJCQkJCWlmICh2aWV3LnR5cGUgPT0gSTkxNV9HR1RUX1ZJRVdfUkVNQVBQRUQgJiYKLQkJ
CQkJICAgIHZtYS0+c2l6ZSA+IHJvdGF0ZWRfc2l6ZShhLCBiKSAqIFBBR0VfU0laRSkgeworCQkJ
CQkgICAgdm1hLT5zaXplID4gZXhwZWN0ZWRfcGFnZXMgKiBQQUdFX1NJWkUpIHsKIAkJCQkJCXBy
X2VycigiVk1BIGlzIHdyb25nIHNpemUsIGV4cGVjdGVkICVsdSwgZm91bmQgJWxsdVxuIiwKLQkJ
CQkJCSAgICAgICBQQUdFX1NJWkUgKiByb3RhdGVkX3NpemUoYSwgYiksIHZtYS0+c2l6ZSk7CisJ
CQkJCQkgICAgICAgUEFHRV9TSVpFICogZXhwZWN0ZWRfcGFnZXMsIHZtYS0+c2l6ZSk7CiAJCQkJ
CQllcnIgPSAtRUlOVkFMOwogCQkJCQkJZ290byBvdXRfb2JqZWN0OwogCQkJCQl9CiAKLQkJCQkJ
aWYgKHZtYS0+cGFnZXMtPm5lbnRzID4gcm90YXRlZF9zaXplKGEsIGIpKSB7CisJCQkJCWlmICh2
bWEtPnBhZ2VzLT5uZW50cyA+IGV4cGVjdGVkX3BhZ2VzKSB7CiAJCQkJCQlwcl9lcnIoInNnIHRh
YmxlIGlzIHdyb25nIHNpemVvLCBleHBlY3RlZCAldSwgZm91bmQgJXUgbmVudHNcbiIsCi0JCQkJ
CQkgICAgICAgcm90YXRlZF9zaXplKGEsIGIpLCB2bWEtPnBhZ2VzLT5uZW50cyk7CisJCQkJCQkg
ICAgICAgZXhwZWN0ZWRfcGFnZXMsIHZtYS0+cGFnZXMtPm5lbnRzKTsKIAkJCQkJCWVyciA9IC1F
SU5WQUw7CiAJCQkJCQlnb3RvIG91dF9vYmplY3Q7CiAJCQkJCX0KQEAgLTU5MCwxNCArNTk0LDE0
IEBAIHN0YXRpYyBpbnQgaWd0X3ZtYV9yb3RhdGVfcmVtYXAodm9pZCAqYXJnKQogCQkJCQkJCXBy
X2VycigiSW5jb25zaXN0ZW50ICVzIFZNQSBwYWdlcyBmb3IgcGxhbmUgJWQ6IFsoJWQsICVkLCAl
ZCwgJWQpLCAoJWQsICVkLCAlZCwgJWQpXVxuIiwKIAkJCQkJCQkgICAgICAgdmlldy50eXBlID09
IEk5MTVfR0dUVF9WSUVXX1JPVEFURUQgPwogCQkJCQkJCSAgICAgICAicm90YXRlZCIgOiAicmVt
YXBwZWQiLCBuLAotCQkJCQkJCSAgICAgICB2aWV3LnJvdGF0ZWQucGxhbmVbMF0ud2lkdGgsCi0J
CQkJCQkJICAgICAgIHZpZXcucm90YXRlZC5wbGFuZVswXS5oZWlnaHQsCi0JCQkJCQkJICAgICAg
IHZpZXcucm90YXRlZC5wbGFuZVswXS5zdHJpZGUsCi0JCQkJCQkJICAgICAgIHZpZXcucm90YXRl
ZC5wbGFuZVswXS5vZmZzZXQsCi0JCQkJCQkJICAgICAgIHZpZXcucm90YXRlZC5wbGFuZVsxXS53
aWR0aCwKLQkJCQkJCQkgICAgICAgdmlldy5yb3RhdGVkLnBsYW5lWzFdLmhlaWdodCwKLQkJCQkJ
CQkgICAgICAgdmlldy5yb3RhdGVkLnBsYW5lWzFdLnN0cmlkZSwKLQkJCQkJCQkgICAgICAgdmll
dy5yb3RhdGVkLnBsYW5lWzFdLm9mZnNldCk7CisJCQkJCQkJICAgICAgIHBsYW5lX2luZm9bMF0u
d2lkdGgsCisJCQkJCQkJICAgICAgIHBsYW5lX2luZm9bMF0uaGVpZ2h0LAorCQkJCQkJCSAgICAg
ICBwbGFuZV9pbmZvWzBdLnN0cmlkZSwKKwkJCQkJCQkgICAgICAgcGxhbmVfaW5mb1swXS5vZmZz
ZXQsCisJCQkJCQkJICAgICAgIHBsYW5lX2luZm9bMV0ud2lkdGgsCisJCQkJCQkJICAgICAgIHBs
YW5lX2luZm9bMV0uaGVpZ2h0LAorCQkJCQkJCSAgICAgICBwbGFuZV9pbmZvWzFdLnN0cmlkZSwK
KwkJCQkJCQkgICAgICAgcGxhbmVfaW5mb1sxXS5vZmZzZXQpOwogCQkJCQkJCWVyciA9IC1FSU5W
QUw7CiAJCQkJCQkJZ290byBvdXRfb2JqZWN0OwogCQkJCQkJfQpAQCAtODg3LDYgKzg5MSw3IEBA
IHN0YXRpYyBpbnQgaWd0X3ZtYV9yZW1hcHBlZF9ndHQodm9pZCAqYXJnKQogCQkJCS50eXBlID0g
KnQsCiAJCQkJLnJvdGF0ZWQucGxhbmVbMF0gPSAqcCwKIAkJCX07CisJCQlzdHJ1Y3QgaW50ZWxf
cmVtYXBwZWRfcGxhbmVfaW5mbyAqcGxhbmVfaW5mbyA9IHZpZXcucm90YXRlZC5wbGFuZTsKIAkJ
CXN0cnVjdCBpOTE1X3ZtYSAqdm1hOwogCQkJdTMyIF9faW9tZW0gKm1hcDsKIAkJCXVuc2lnbmVk
IGludCB4LCB5OwpAQCAtOTEyLDE1ICs5MTcsMTUgQEAgc3RhdGljIGludCBpZ3Rfdm1hX3JlbWFw
cGVkX2d0dCh2b2lkICphcmcpCiAJCQkJZ290byBvdXQ7CiAJCQl9CiAKLQkJCWZvciAoeSA9IDAg
OyB5IDwgcC0+aGVpZ2h0OyB5KyspIHsKLQkJCQlmb3IgKHggPSAwIDsgeCA8IHAtPndpZHRoOyB4
KyspIHsKKwkJCWZvciAoeSA9IDAgOyB5IDwgcGxhbmVfaW5mb1swXS5oZWlnaHQ7IHkrKykgewor
CQkJCWZvciAoeCA9IDAgOyB4IDwgcGxhbmVfaW5mb1swXS53aWR0aDsgeCsrKSB7CiAJCQkJCXVu
c2lnbmVkIGludCBvZmZzZXQ7CiAJCQkJCXUzMiB2YWwgPSB5IDw8IDE2IHwgeDsKIAogCQkJCQlp
ZiAoKnQgPT0gSTkxNV9HR1RUX1ZJRVdfUk9UQVRFRCkKLQkJCQkJCW9mZnNldCA9ICh4ICogcC0+
aGVpZ2h0ICsgeSkgKiBQQUdFX1NJWkU7CisJCQkJCQlvZmZzZXQgPSAoeCAqIHBsYW5lX2luZm9b
MF0uaGVpZ2h0ICsgeSkgKiBQQUdFX1NJWkU7CiAJCQkJCWVsc2UKLQkJCQkJCW9mZnNldCA9ICh5
ICogcC0+d2lkdGggKyB4KSAqIFBBR0VfU0laRTsKKwkJCQkJCW9mZnNldCA9ICh5ICogcGxhbmVf
aW5mb1swXS53aWR0aCArIHgpICogUEFHRV9TSVpFOwogCiAJCQkJCWlvd3JpdGUzMih2YWwsICZt
YXBbb2Zmc2V0IC8gc2l6ZW9mKCptYXApXSk7CiAJCQkJfQpAQCAtOTQzLDggKzk0OCw4IEBAIHN0
YXRpYyBpbnQgaWd0X3ZtYV9yZW1hcHBlZF9ndHQodm9pZCAqYXJnKQogCQkJCWdvdG8gb3V0Owog
CQkJfQogCi0JCQlmb3IgKHkgPSAwIDsgeSA8IHAtPmhlaWdodDsgeSsrKSB7Ci0JCQkJZm9yICh4
ID0gMCA7IHggPCBwLT53aWR0aDsgeCsrKSB7CisJCQlmb3IgKHkgPSAwIDsgeSA8IHBsYW5lX2lu
Zm9bMF0uaGVpZ2h0OyB5KyspIHsKKwkJCQlmb3IgKHggPSAwIDsgeCA8IHBsYW5lX2luZm9bMF0u
d2lkdGg7IHgrKykgewogCQkJCQl1bnNpZ25lZCBpbnQgb2Zmc2V0LCBzcmNfaWR4OwogCQkJCQl1
MzIgZXhwID0geSA8PCAxNiB8IHg7CiAJCQkJCXUzMiB2YWw7Ci0tIAoyLjI1LjEKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5n
IGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

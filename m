Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AFB132052EA
	for <lists+intel-gfx@lfdr.de>; Tue, 23 Jun 2020 14:57:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 041276E3D3;
	Tue, 23 Jun 2020 12:57:17 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from ste-pvt-msa1.bahnhof.se (ste-pvt-msa1.bahnhof.se
 [213.80.101.70])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0B4656E3D3
 for <intel-gfx@lists.freedesktop.org>; Tue, 23 Jun 2020 12:57:16 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by ste-pvt-msa1.bahnhof.se (Postfix) with ESMTP id 5829341488;
 Tue, 23 Jun 2020 14:57:14 +0200 (CEST)
Authentication-Results: ste-pvt-msa1.bahnhof.se; dkim=pass (1024-bit key;
 unprotected) header.d=shipmail.org header.i=@shipmail.org header.b=nJzBeoVe; 
 dkim-atps=neutral
X-Virus-Scanned: Debian amavisd-new at bahnhof.se
X-Spam-Flag: NO
X-Spam-Score: -2.099
X-Spam-Level: 
X-Spam-Status: No, score=-2.099 tagged_above=-999 required=6.31
 tests=[BAYES_00=-1.9, DKIM_SIGNED=0.1, DKIM_VALID=-0.1,
 DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1, URIBL_BLOCKED=0.001]
 autolearn=ham autolearn_force=no
Received: from ste-pvt-msa1.bahnhof.se ([127.0.0.1])
 by localhost (ste-pvt-msa1.bahnhof.se [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id oMZTtOd5myPR; Tue, 23 Jun 2020 14:57:13 +0200 (CEST)
Received: from mail1.shipmail.org (h-205-35.A357.priv.bahnhof.se
 [155.4.205.35]) (Authenticated sender: mb878879)
 by ste-pvt-msa1.bahnhof.se (Postfix) with ESMTPA id 6978F41485;
 Tue, 23 Jun 2020 14:57:12 +0200 (CEST)
Received: from localhost.localdomain (unknown [134.134.139.83])
 by mail1.shipmail.org (Postfix) with ESMTPSA id 9A03A362166;
 Tue, 23 Jun 2020 14:57:10 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=shipmail.org; s=mail;
 t=1592917031; bh=p5Tmd2H0jjKEUq1AGYy2JBRqEI7A+7uK4Fqp4P3MEUM=;
 h=Subject:From:To:References:Date:In-Reply-To:From;
 b=nJzBeoVeNgEsLSVtFSCZK9fcTl8oYW92R+/vaCb9xV8qpE+ONbURS6LoMVazMOVkd
 9LAhqU61F1boKU438L7evVY7g6u9jpI5dkd/2LLSKuTozNNdi8B9sEKjo316kByAhX
 UJWqyVQg0B6lSiHkdIYM4tUpwHcE42NVthKBH7+4=
From: =?UTF-8?Q?Thomas_Hellstr=c3=b6m_=28Intel=29?= <thomas_os@shipmail.org>
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20200622095921.15530-1-chris@chris-wilson.co.uk>
 <20200622095921.15530-7-chris@chris-wilson.co.uk>
 <1712fc5b-9b1e-0632-13c0-e0bc2c1d889d@shipmail.org>
Message-ID: <e05ef872-8659-2a11-5c89-c42cf080905b@shipmail.org>
Date: Tue, 23 Jun 2020 14:57:06 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.8.0
MIME-Version: 1.0
In-Reply-To: <1712fc5b-9b1e-0632-13c0-e0bc2c1d889d@shipmail.org>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 7/7] drm/i915/gem: Acquire all vma/objects
 under reservation_ww_class
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDYvMjMvMjAgMToyMiBQTSwgVGhvbWFzIEhlbGxzdHLDtm0gKEludGVsKSB3cm90ZToKPiBI
aSwgQ2hyaXMsCj4KPiBPbiA2LzIyLzIwIDExOjU5IEFNLCBDaHJpcyBXaWxzb24gd3JvdGU6Cj4+
IEluIG9yZGVyIHRvIGFjdHVhbGx5IGhhbmRsZSBldmljdGlvbiBhbmQgd2hhdCBub3QsIHdlIG5l
ZWQgdG8gcHJvY2Vzcwo+PiBhbGwgdGhlIG9iamVjdHMgdG9nZXRoZXIgdW5kZXIgYSBjb21tb24g
bG9jaywgcmVzZXJ2YXRpb25fd3dfY2xhc3MuIEFzCj4+IHN1Y2gsIGRvIGEgbWVtb3J5IHJlc2Vy
dmF0aW9uIHBhc3MgYWZ0ZXIgbG9va2luZyB1cCB0aGUgb2JqZWN0L3ZtYSwKPj4gd2hpY2ggdGhl
biBmZWVkcyBpbnRvIHRoZSByZXN0IG9mIGV4ZWNidWYgW3JlbG9jYXRpb24sIGNtZHBhcnNpbmcs
Cj4+IGZsdXNoaW5nIGFuZCBvZmMgZXhlY3V0aW9uXS4KPj4KPj4gU2lnbmVkLW9mZi1ieTogQ2hy
aXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Cj4+IC0tLQo+PiDCoCAuLi4vZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmPCoMKgwqAgfCA5MSArKysrKysrKysr
KysrKy0tLS0tCj4+IMKgIDEgZmlsZSBjaGFuZ2VkLCA3MCBpbnNlcnRpb25zKCspLCAyMSBkZWxl
dGlvbnMoLSkKPj4KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9leGVjYnVmZmVyLmMgCj4+IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X2V4ZWNidWZmZXIuYwo+PiBpbmRleCA0NmZjYmRmODE2MWMuLjhkYjJlMDEzNDY1ZiAxMDA2NDQK
Pj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYwo+
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCj4+
IEBAIC01MywxMCArNTMsOSBAQCBzdHJ1Y3QgZWJfdm1hX2FycmF5IHsKPj4gwqAgwqAgI2RlZmlu
ZSBfX0VYRUNfT0JKRUNUX0hBU19QSU7CoMKgwqDCoMKgwqDCoCBCSVQoMzEpCj4+IMKgICNkZWZp
bmUgX19FWEVDX09CSkVDVF9IQVNfRkVOQ0XCoMKgwqDCoMKgwqDCoCBCSVQoMzApCj4+IC0jZGVm
aW5lIF9fRVhFQ19PQkpFQ1RfSEFTX1BBR0VTwqDCoMKgwqDCoMKgwqAgQklUKDI5KQo+PiAtI2Rl
ZmluZSBfX0VYRUNfT0JKRUNUX05FRURTX01BUMKgwqDCoMKgwqDCoMKgIEJJVCgyOCkKPj4gLSNk
ZWZpbmUgX19FWEVDX09CSkVDVF9ORUVEU19CSUFTwqDCoMKgIEJJVCgyNykKPj4gLSNkZWZpbmUg
X19FWEVDX09CSkVDVF9JTlRFUk5BTF9GTEFHU8KgwqDCoCAofjB1IDw8IDI3KSAvKiBhbGwgb2Yg
dGhlIAo+PiBhYm92ZSAqLwo+PiArI2RlZmluZSBfX0VYRUNfT0JKRUNUX05FRURTX01BUMKgwqDC
oMKgwqDCoMKgIEJJVCgyOSkKPj4gKyNkZWZpbmUgX19FWEVDX09CSkVDVF9ORUVEU19CSUFTwqDC
oMKgIEJJVCgyOCkKPj4gKyNkZWZpbmUgX19FWEVDX09CSkVDVF9JTlRFUk5BTF9GTEFHU8KgwqDC
oCAofjB1IDw8IDI4KSAvKiBhbGwgb2YgdGhlIAo+PiBhYm92ZSAqLwo+PiDCoCDCoCAjZGVmaW5l
IF9fRVhFQ19IQVNfUkVMT0PCoMKgwqAgQklUKDMxKQo+PiDCoCAjZGVmaW5lIF9fRVhFQ19JTlRF
Uk5BTF9GTEFHU8KgwqDCoCAofjB1IDw8IDMxKQo+PiBAQCAtMjQxLDYgKzI0MCw4IEBAIHN0cnVj
dCBpOTE1X2V4ZWNidWZmZXIgewo+PiDCoMKgwqDCoMKgIHN0cnVjdCBpbnRlbF9jb250ZXh0ICpj
b250ZXh0OyAvKiBsb2dpY2FsIHN0YXRlIGZvciB0aGUgcmVxdWVzdCAqLwo+PiDCoMKgwqDCoMKg
IHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpnZW1fY29udGV4dDsgLyoqIGNhbGxlcidzIGNvbnRl
eHQgKi8KPj4gwqAgK8KgwqDCoCBzdHJ1Y3QgZG1hX2ZlbmNlICptbV9mZW5jZTsKPj4gKwo+PiDC
oMKgwqDCoMKgIHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJlcXVlc3Q7IC8qKiBvdXIgcmVxdWVzdCB0
byBidWlsZCAqLwo+PiDCoMKgwqDCoMKgIHN0cnVjdCBlYl92bWEgKmJhdGNoOyAvKiogaWRlbnRp
dHkgb2YgdGhlIGJhdGNoIG9iai92bWEgKi8KPj4gwqDCoMKgwqDCoCBzdHJ1Y3QgaTkxNV92bWEg
KnRyYW1wb2xpbmU7IC8qKiB0cmFtcG9saW5lIHVzZWQgZm9yIGNoYWluaW5nICovCj4+IEBAIC0z
MzEsMTIgKzMzMiw3IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBlYl91bnJlc2VydmVfdm1hKHN0cnVj
dCAKPj4gZWJfdm1hICpldikKPj4gwqDCoMKgwqDCoCBpZiAoZXYtPmZsYWdzICYgX19FWEVDX09C
SkVDVF9IQVNfUElOKQo+PiDCoMKgwqDCoMKgwqDCoMKgwqAgX19pOTE1X3ZtYV91bnBpbih2bWEp
Owo+PiDCoCAtwqDCoMKgIGlmIChldi0+ZmxhZ3MgJiBfX0VYRUNfT0JKRUNUX0hBU19QQUdFUykK
Pj4gLcKgwqDCoMKgwqDCoMKgIGk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdlcyh2bWEtPm9iaik7
Cj4+IC0KPj4gLcKgwqDCoCBldi0+ZmxhZ3MgJj0gfihfX0VYRUNfT0JKRUNUX0hBU19QSU4gfAo+
PiAtwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCBfX0VYRUNfT0JKRUNUX0hBU19GRU5DRSB8
Cj4+IC3CoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIF9fRVhFQ19PQkpFQ1RfSEFTX1BBR0VT
KTsKPj4gK8KgwqDCoCBldi0+ZmxhZ3MgJj0gfihfX0VYRUNfT0JKRUNUX0hBU19QSU4gfCBfX0VY
RUNfT0JKRUNUX0hBU19GRU5DRSk7Cj4+IMKgIH0KPj4gwqAgwqAgc3RhdGljIHZvaWQgZWJfdm1h
X2FycmF5X2Rlc3Ryb3koc3RydWN0IGtyZWYgKmtyZWYpCj4+IEBAIC02NjcsNiArNjYzLDU1IEBA
IGViX2FkZF92bWEoc3RydWN0IGk5MTVfZXhlY2J1ZmZlciAqZWIsCj4+IMKgwqDCoMKgwqAgbGlz
dF9hZGRfdGFpbCgmZXYtPmxvY2tfbGluaywgJmViLT5sb2NrKTsKPj4gwqAgfQo+PiDCoCArc3Rh
dGljIGludCBlYl92bWFfZ2V0X3BhZ2VzKHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgKmViLAo+PiAr
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIHN0cnVjdCBlYl92bWEgKmV2LAo+PiArwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIHU2NCBpZHgpCj4+ICt7Cj4+ICvCoMKgwqAgc3Ry
dWN0IGk5MTVfdm1hICp2bWEgPSBldi0+dm1hOwo+PiArwqDCoMKgIGludCBlcnI7Cj4+ICsKPj4g
K8KgwqDCoCAvKiBYWFggYWxzbyBwcmVhbGxvY2F0ZSBQRCBmb3Igdm1hICovCj4+ICsKPj4gK8Kg
wqDCoCBlcnIgPSBfX19faTkxNV9nZW1fb2JqZWN0X2dldF9wYWdlc19hc3luYyh2bWEtPm9iaik7
Cj4+ICvCoMKgwqAgaWYgKGVycikKPj4gK8KgwqDCoMKgwqDCoMKgIHJldHVybiBlcnI7Cj4+ICsK
Pj4gK8KgwqDCoCByZXR1cm4gaTkxNV9hY3RpdmVfcmVmKCZ2bWEtPm9iai0+bW0uYWN0aXZlLCBp
ZHgsIGViLT5tbV9mZW5jZSk7Cj4+ICt9Cj4+ICsKPj4gK3N0YXRpYyBpbnQgZWJfcmVzZXJ2ZV9t
bShzdHJ1Y3QgaTkxNV9leGVjYnVmZmVyICplYikKPj4gK3sKPj4gK8KgwqDCoCBjb25zdCB1NjQg
aWR4ID0gZWItPmNvbnRleHQtPnRpbWVsaW5lLT5mZW5jZV9jb250ZXh0Owo+PiArwqDCoMKgIHN0
cnVjdCB3d19hY3F1aXJlX2N0eCBhY3F1aXJlOwo+PiArwqDCoMKgIHN0cnVjdCBlYl92bWEgKmV2
Owo+PiArwqDCoMKgIGludCBlcnI7Cj4+ICsKPj4gK8KgwqDCoCBlYi0+bW1fZmVuY2UgPSBfX2Rt
YV9mZW5jZV9jcmVhdGVfcHJveHkoMCwgMCk7Cj4+ICvCoMKgwqAgaWYgKCFlYi0+bW1fZmVuY2Up
Cj4+ICvCoMKgwqDCoMKgwqDCoCByZXR1cm4gLUVOT01FTTsKPgo+IFF1ZXN0aW9uOiBlYiBpcyBs
b2NhbCB0byB0aGlzIHRocmVhZCwgcmlnaHQsIHNvIGViLT5tbV9mZW5jZSBpcyBub3QgCj4gY29u
c2lkZXJlZCAicHVibGlzaGVkIiB5ZXQ/Cj4KPj4gKwo+PiArwqDCoMKgIHd3X2FjcXVpcmVfaW5p
dCgmYWNxdWlyZSwgJnJlc2VydmF0aW9uX3d3X2NsYXNzKTsKPj4gKwo+PiArwqDCoMKgIGVyciA9
IGViX2xvY2tfdm1hKGViLCAmYWNxdWlyZSk7Cj4+ICvCoMKgwqAgaWYgKGVycikKPj4gK8KgwqDC
oMKgwqDCoMKgIGdvdG8gb3V0Owo+PiArCj4+ICvCoMKgwqAgd3dfYWNxdWlyZV9kb25lKCZhY3F1
aXJlKTsKPj4gKwo+PiArwqDCoMKgIGxpc3RfZm9yX2VhY2hfZW50cnkoZXYsICZlYi0+bG9jaywg
bG9ja19saW5rKSB7Cj4+ICvCoMKgwqDCoMKgwqDCoCBzdHJ1Y3QgaTkxNV92bWEgKnZtYSA9IGV2
LT52bWE7Cj4+ICsKPj4gK8KgwqDCoMKgwqDCoMKgIGlmIChlcnIgPT0gMCkKPj4gK8KgwqDCoMKg
wqDCoMKgwqDCoMKgwqAgZXJyID0gZWJfdm1hX2dldF9wYWdlcyhlYiwgZXYsIGlkeCk7Cj4KPiBJ
IGZpZ3VyZSB0aGlzIGlzIHdoZXJlIHlvdSBwdWJsaXNoIHRoZSBwcm94eSBmZW5jZT8gSWYgc28s
IHRoZSBmZW5jZSAKPiBzaWduYWxpbmcgY3JpdGljYWwgcGF0aCBzdGFydHMgd2l0aCB0aGlzIGxv
b3AsIGFuZCB0aGF0IG1lYW5zIGFueSBjb2RlIAo+IHdlIGNhbGwgYmV0d2VlbiBoZXJlIGFuZCBz
dWJtaXNzaW9uIGNvbXBsZXRlIChpbmNsdWRpbmcgc3Bhd25lZCB3b3JrIAo+IHdlIG5lZWQgdG8g
d2FpdCBmb3IgYmVmb3JlIHN1Ym1pc3Npb24pIG1heSBub3QgbG9jayB0aGUgCj4gcmVzZXJ2YXRp
b25fd3dfY2xhc3Mgbm9yIChzdGlsbCBiZWluZyBkaXNjdXNzZWQpIGFsbG9jYXRlIG1lbW9yeS4g
SXQgCj4gbG9va3MgbGlrZSBpOTE1X3Bpbl92bWEgdGFrZXMgYSByZXNlcnZhdGlvbl93d19jbGFz
cy4gQW5kIGFsbCBtZW1vcnkgCj4gcGlubmluZyBzZWVtcyB0byBiZSBpbiB0aGUgZmVuY2UgY3Jp
dGljYWwgcGF0aCBhcyB3ZWxsPwoKQW5kIEkgdGhpbmsgZXZlbiBpZiB3ZSBhdCBzb21lIHBvaW50
IGVuZCB1cCB3aXRoIHRoZSBhbGxvY2F0aW9uIAphbm5vdGF0aW9uIHRoZSBvdGhlciB3YXkgYXJv
dW5kLCBhbGxvd2luZyBtZW1vcnkgYWxsb2NhdGlvbnMgaW4gZmVuY2UgCnNpZ25hbGxpbmcgY3Jp
dGljYWwgcGF0aHMsIGJvdGggcmVsb2NhdGlvbnMgYW5kIHVzZXJwb2ludGVyIHdvdWxkIGNhdXNl
IApsb2NrZGVwIHByb2JsZW1zIGJlY2F1c2Ugb2YKCm1tYXBfc2VtLT5yZXNlcnZhdGlvbl9vYmpl
Y3QtPmZlbmNlX3dhaXQgKGZhdWx0IGhhbmRsZXJzLCBsb2NrZGVwIHByaW1pbmcpCnZzCmZlbmNl
X2NyaXRpY2FsLT5ndXAvY29weV9mcm9tX3VzZXItPm1tYXBfc2VtCgovVGhvbWFzCgoKPgo+IC9U
aG9tYXMKPgo+Cj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KPiBJbnRlbC1nZnggbWFpbGluZyBsaXN0Cj4gSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50
ZWwtZ2Z4Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCklu
dGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

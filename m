Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 50D0AC4898
	for <lists+intel-gfx@lfdr.de>; Wed,  2 Oct 2019 09:36:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 96771891EB;
	Wed,  2 Oct 2019 07:36:03 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 34F6A891EB
 for <intel-gfx@lists.freedesktop.org>; Wed,  2 Oct 2019 07:36:02 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18688838-1500050 
 for multiple; Wed, 02 Oct 2019 08:35:44 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  2 Oct 2019 08:35:40 +0100
Message-Id: <20191002073540.12315-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191001155307.19735-1-chris@chris-wilson.co.uk>
References: <20191001155307.19735-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3] drm/i915/selftests: Exercise potential false
 lite-restore
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SWYgZXhlY2xpc3RzJ3MgbGl0ZS1yZXN0b3JlIGlzIGJhc2VkIG9uIHRoZSBjb21tb24gR0VNIGNv
bnRleHQgdGFnCnJhdGhlciB0aGFuIHRoZSBwZXItaW50ZWxfY29udGV4dCBMUkNBLCB0aGVuIGEg
Y29udGV4dCBzd2l0Y2ggYmV0d2Vlbgp0d28gaW50ZWxfY29udGV4dHMgb24gdGhlIHNhbWUgZW5n
aW5lIGRlcml2ZWQgZnJvbSB0aGUgc2FtZSBHRU0gY29udGV4dAp3aWxsIHBlcmZvcm0gYSBsaXRl
LXJlc3RvcmUgaW5zdGVhZCBvZiBhIGZ1bGwgY29udGV4dCBzd2l0Y2guIFdlIGNhbgpleHBsb2l0
IHRoaXMgYnkgcG9pc29uaW5nIHRoZSByaW5nYnVmZmVyIG9mIHRoZSBmaXJzdCBjb250ZXh0IGFu
ZCB0cnlpbmcKdG8gdHJpY2sgYSBzaW1wbGUgUklOR19UQUlMIHVwZGF0ZSAoaS5lLiBsaXRlLXJl
c3RvcmUpCgp2MjogQWxzbyBjaGVjayB3aGF0IGhhcHBlbnMgaWYgcHJlZW1wdCBjZVswXSB3aXRo
IGNlWzFdIChib3RoIGluc3RhbmNlcwpvbiB0aGUgc2FtZSBlbmdpbmUgZnJvbSB0aGUgc2FtZSBw
YXJlbnQgY29udGV4dCkgW1R2cnRrb10KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hy
aXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGlu
QGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBp
bnRlbC5jb20+Ci0tLQpNb3JlIGxvY2tkZXAgYXBwZWFzZW1lbnQKLS0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICB8ICAxOCArKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3NlbGZ0ZXN0X2xyYy5jIHwgMTc4ICsrKysrKysrKysrKysrKysrKysrKysrKysKIDIgZmls
ZXMgY2hhbmdlZCwgMTkyIGluc2VydGlvbnMoKyksIDQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9scmMuYwppbmRleCA5ODc3YjZiYTEzZGYuLjJjZWYwNmJlMzg4MiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKQEAgLTIzNSw2ICsyMzUsMTYgQEAgc3RhdGlj
IHZvaWQgZXhlY2xpc3RzX2luaXRfcmVnX3N0YXRlKHUzMiAqcmVnX3N0YXRlLAogCQkJCSAgICAg
Y29uc3Qgc3RydWN0IGludGVsX3JpbmcgKnJpbmcsCiAJCQkJICAgICBib29sIGNsb3NlKTsKIAor
c3RhdGljIHZvaWQgX19jb250ZXh0X3Bpbl9hY3F1aXJlKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpj
ZSkKK3sKKyAgICAgICBtdXRleF9hY3F1aXJlKCZjZS0+cGluX211dGV4LmRlcF9tYXAsIDIsIDAs
IF9SRVRfSVBfKTsKK30KKworc3RhdGljIHZvaWQgX19jb250ZXh0X3Bpbl9yZWxlYXNlKHN0cnVj
dCBpbnRlbF9jb250ZXh0ICpjZSkKK3sKKyAgICAgICBtdXRleF9yZWxlYXNlKCZjZS0+cGluX211
dGV4LmRlcF9tYXAsIDAsIF9SRVRfSVBfKTsKK30KKwogc3RhdGljIHZvaWQgbWFya19laW8oc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcnEpCiB7CiAJaWYgKCFpOTE1X3JlcXVlc3Rfc2lnbmFsZWQocnEp
KQpAQCAtMjc2MSw3ICsyNzcxLDcgQEAgc3RhdGljIHZvaWQgX19leGVjbGlzdHNfcmVzZXQoc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCBib29sIHN0YWxsZWQpCiAJR0VNX0JVR19PTigh
aTkxNV92bWFfaXNfcGlubmVkKGNlLT5zdGF0ZSkpOwogCiAJLyogUHJvY2xhaW0gd2UgaGF2ZSBl
eGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBjb250ZXh0IGltYWdlISAqLwotCW11dGV4X2FjcXVpcmUo
JmNlLT5waW5fbXV0ZXguZGVwX21hcCwgMiwgMCwgX1RISVNfSVBfKTsKKwlfX2NvbnRleHRfcGlu
X2FjcXVpcmUoY2UpOwogCiAJcnEgPSBhY3RpdmVfcmVxdWVzdChycSk7CiAJaWYgKCFycSkgewpA
QCAtMjgyNSw3ICsyODM1LDcgQEAgc3RhdGljIHZvaWQgX19leGVjbGlzdHNfcmVzZXQoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCBib29sIHN0YWxsZWQpCiAJX19leGVjbGlzdHNfcmVz
ZXRfcmVnX3N0YXRlKGNlLCBlbmdpbmUpOwogCV9fZXhlY2xpc3RzX3VwZGF0ZV9yZWdfc3RhdGUo
Y2UsIGVuZ2luZSk7CiAJY2UtPmxyY19kZXNjIHw9IENUWF9ERVNDX0ZPUkNFX1JFU1RPUkU7IC8q
IHBhcmFub2lkOiBHUFUgd2FzIHJlc2V0ISAqLwotCW11dGV4X3JlbGVhc2UoJmNlLT5waW5fbXV0
ZXguZGVwX21hcCwgMCwgX1RISVNfSVBfKTsKKwlfX2NvbnRleHRfcGluX3JlbGVhc2UoY2UpOwog
CiB1bndpbmQ6CiAJLyogUHVzaCBiYWNrIGFueSBpbmNvbXBsZXRlIHJlcXVlc3RzIGZvciByZXBs
YXkgYWZ0ZXIgdGhlIHJlc2V0LiAqLwpAQCAtNDQzOSw3ICs0NDQ5LDcgQEAgdm9pZCBpbnRlbF9s
cl9jb250ZXh0X3Jlc2V0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAkJCSAgICBi
b29sIHNjcnViKQogewogCUdFTV9CVUdfT04oIWludGVsX2NvbnRleHRfaXNfcGlubmVkKGNlKSk7
Ci0JbXV0ZXhfYWNxdWlyZSgmY2UtPnBpbl9tdXRleC5kZXBfbWFwLCAyLCAwLCBfVEhJU19JUF8p
OworCV9fY29udGV4dF9waW5fYWNxdWlyZShjZSk7CiAKIAkvKgogCSAqIFdlIHdhbnQgYSBzaW1w
bGUgY29udGV4dCArIHJpbmcgdG8gZXhlY3V0ZSB0aGUgYnJlYWRjcnVtYiB1cGRhdGUuCkBAIC00
NDY1LDcgKzQ0NzUsNyBAQCB2b2lkIGludGVsX2xyX2NvbnRleHRfcmVzZXQoc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqZW5naW5lLAogCWludGVsX3JpbmdfdXBkYXRlX3NwYWNlKGNlLT5yaW5nKTsK
IAogCV9fZXhlY2xpc3RzX3VwZGF0ZV9yZWdfc3RhdGUoY2UsIGVuZ2luZSk7Ci0JbXV0ZXhfcmVs
ZWFzZSgmY2UtPnBpbl9tdXRleC5kZXBfbWFwLCAwLCBfVEhJU19JUF8pOworCV9fY29udGV4dF9w
aW5fcmVsZWFzZShjZSk7CiB9CiAKICNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1fSTkxNV9TRUxG
VEVTVCkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xyYy5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKaW5kZXggOTNmMmZjZGM0
OWJmLi4zMjJhYmY0OWI1NzggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X2xyYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xyYy5j
CkBAIC03OSw2ICs3OSwxODIgQEAgc3RhdGljIGludCBsaXZlX3Nhbml0eWNoZWNrKHZvaWQgKmFy
ZykKIAlyZXR1cm4gZXJyOwogfQogCitzdGF0aWMgaW50IGxpdmVfdW5saXRlX3Jlc3RvcmUoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIGludCBwcmlvKQoreworCXN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZTsKKwlzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4OworCWVudW0g
aW50ZWxfZW5naW5lX2lkIGlkOworCWludGVsX3dha2VyZWZfdCB3YWtlcmVmOworCXN0cnVjdCBp
Z3Rfc3Bpbm5lciBzcGluOworCWludCBlcnIgPSAtRU5PTUVNOworCisJLyoKKwkgKiBDaGVjayB0
aGF0IHdlIGNhbiBjb3JyZWN0bHkgY29udGV4dCBzd2l0Y2ggYmV0d2VlbiAyIGluc3RhbmNlcwor
CSAqIG9uIHRoZSBzYW1lIGVuZ2luZSBmcm9tIHRoZSBzYW1lIHBhcmVudCBjb250ZXh0LgorCSAq
LworCisJbXV0ZXhfbG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7CisJd2FrZXJlZiA9IGlu
dGVsX3J1bnRpbWVfcG1fZ2V0KCZpOTE1LT5ydW50aW1lX3BtKTsKKworCWlmIChpZ3Rfc3Bpbm5l
cl9pbml0KCZzcGluLCAmaTkxNS0+Z3QpKQorCQlnb3RvIGVycl91bmxvY2s7CisKKwljdHggPSBr
ZXJuZWxfY29udGV4dChpOTE1KTsKKwlpZiAoIWN0eCkKKwkJZ290byBlcnJfc3BpbjsKKworCWVy
ciA9IDA7CisJZm9yX2VhY2hfZW5naW5lKGVuZ2luZSwgaTkxNSwgaWQpIHsKKwkJc3RydWN0IGlu
dGVsX2NvbnRleHQgKmNlWzJdID0ge307CisJCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxWzJdOwor
CQlzdHJ1Y3QgaWd0X2xpdmVfdGVzdCB0OworCQlpbnQgbjsKKworCQlpZiAocHJpbyAmJiAhaW50
ZWxfZW5naW5lX2hhc19wcmVlbXB0aW9uKGVuZ2luZSkpCisJCQljb250aW51ZTsKKworCQlpZiAo
IWludGVsX2VuZ2luZV9jYW5fc3RvcmVfZHdvcmQoZW5naW5lKSkKKwkJCWNvbnRpbnVlOworCisJ
CWlmIChpZ3RfbGl2ZV90ZXN0X2JlZ2luKCZ0LCBpOTE1LCBfX2Z1bmNfXywgZW5naW5lLT5uYW1l
KSkgeworCQkJZXJyID0gLUVJTzsKKwkJCWJyZWFrOworCQl9CisKKwkJZm9yIChuID0gMDsgbiA8
IEFSUkFZX1NJWkUoY2UpOyBuKyspIHsKKwkJCXN0cnVjdCBpbnRlbF9jb250ZXh0ICp0bXA7CisK
KwkJCXRtcCA9IGludGVsX2NvbnRleHRfY3JlYXRlKGN0eCwgZW5naW5lKTsKKwkJCWlmIChJU19F
UlIodG1wKSkgeworCQkJCWVyciA9IFBUUl9FUlIodG1wKTsKKwkJCQlnb3RvIGVycl9jZTsKKwkJ
CX0KKworCQkJZXJyID0gaW50ZWxfY29udGV4dF9waW4odG1wKTsKKwkJCWlmIChlcnIpIHsKKwkJ
CQlpbnRlbF9jb250ZXh0X3B1dCh0bXApOworCQkJCWdvdG8gZXJyX2NlOworCQkJfQorCisJCQkv
KgorCQkJICogU2V0dXAgdGhlIHBhaXIgb2YgY29udGV4dHMgc3VjaCB0aGF0IGlmIHdlCisJCQkg
KiBsaXRlLXJlc3RvcmUgdXNpbmcgdGhlIFJJTkdfVEFJTCBmcm9tIGNlWzFdIGl0CisJCQkgKiB3
aWxsIGV4ZWN1dGUgZ2FyYmFnZSBmcm9tIGNlWzBdLT5yaW5nLgorCQkJICovCisJCQltZW1zZXQo
dG1wLT5yaW5nLT52YWRkciwKKwkJCSAgICAgICBQT0lTT05fSU5VU0UsIC8qIElQRUhSOiAweDVh
NWE1YTVhIFtodW5nIV0gKi8KKwkJCSAgICAgICB0bXAtPnJpbmctPnZtYS0+c2l6ZSk7CisKKwkJ
CWNlW25dID0gdG1wOworCQl9CisJCUdFTV9CVUdfT04oIWNlWzFdLT5yaW5nLT5zaXplKTsKKwkJ
aW50ZWxfcmluZ19yZXNldChjZVsxXS0+cmluZywgY2VbMV0tPnJpbmctPnNpemUgLyAyKTsKKwor
CQlsb2NhbF9iaF9kaXNhYmxlKCk7IC8qIGFwcGVhc2UgbG9ja2RlcCAqLworCQlfX2NvbnRleHRf
cGluX2FjcXVpcmUoY2VbMV0pOworCQlfX2V4ZWNsaXN0c191cGRhdGVfcmVnX3N0YXRlKGNlWzFd
LCBlbmdpbmUpOworCQlfX2NvbnRleHRfcGluX3JlbGVhc2UoY2VbMV0pOworCQlsb2NhbF9iaF9l
bmFibGUoKTsKKworCQlycVswXSA9IGlndF9zcGlubmVyX2NyZWF0ZV9yZXF1ZXN0KCZzcGluLCBj
ZVswXSwgTUlfQVJCX0NIRUNLKTsKKwkJaWYgKElTX0VSUihycVswXSkpIHsKKwkJCWVyciA9IFBU
Ul9FUlIocnFbMF0pOworCQkJZ290byBlcnJfY2U7CisJCX0KKworCQlpOTE1X3JlcXVlc3RfZ2V0
KHJxWzBdKTsKKwkJaTkxNV9yZXF1ZXN0X2FkZChycVswXSk7CisJCUdFTV9CVUdfT04ocnFbMF0t
PnRhaWwgPiBjZVsxXS0+cmluZy0+ZW1pdCk7CisKKwkJaWYgKCFpZ3Rfd2FpdF9mb3Jfc3Bpbm5l
cigmc3BpbiwgcnFbMF0pKSB7CisJCQlpOTE1X3JlcXVlc3RfcHV0KHJxWzBdKTsKKwkJCWdvdG8g
ZXJyX2NlOworCQl9CisKKwkJcnFbMV0gPSBpOTE1X3JlcXVlc3RfY3JlYXRlKGNlWzFdKTsKKwkJ
aWYgKElTX0VSUihycVsxXSkpIHsKKwkJCWVyciA9IFBUUl9FUlIocnFbMV0pOworCQkJaTkxNV9y
ZXF1ZXN0X3B1dChycVswXSk7CisJCQlnb3RvIGVycl9jZTsKKwkJfQorCisJCWlmICghcHJpbykg
eworCQkJLyoKKwkJCSAqIEVuc3VyZSB3ZSBkbyB0aGUgc3dpdGNoIHRvIGNlWzFdIG9uIGNvbXBs
ZXRpb24uCisJCQkgKgorCQkJICogcnFbMF0gaXMgYWxyZWFkeSBzdWJtaXR0ZWQsIHNvIHRoaXMg
c2hvdWxkIHJlZHVjZQorCQkJICogdG8gYSBuby1vcCAoYSB3YWl0IG9uIGEgcmVxdWVzdCBvbiB0
aGUgc2FtZSBlbmdpbmUKKwkJCSAqIHVzZXMgdGhlIHN1Ym1pdCBmZW5jZSwgbm90IHRoZSBjb21w
bGV0aW9uIGZlbmNlKSwKKwkJCSAqIGJ1dCBpdCB3aWxsIGluc3RhbGwgYSBkZXBlbmRlbmN5IG9u
IHJxWzFdIGZvciBycVswXQorCQkJICogdGhhdCB3aWxsIHByZXZlbnQgdGhlIHBhaXIgYmVpbmcg
cmVvcmRlcmVkIGJ5CisJCQkgKiB0aW1lc2xpY2luZy4KKwkJCSAqLworCQkJaTkxNV9yZXF1ZXN0
X2F3YWl0X2RtYV9mZW5jZShycVsxXSwgJnJxWzBdLT5mZW5jZSk7CisJCX0KKworCQlpOTE1X3Jl
cXVlc3RfZ2V0KHJxWzFdKTsKKwkJaTkxNV9yZXF1ZXN0X2FkZChycVsxXSk7CisJCUdFTV9CVUdf
T04ocnFbMV0tPnRhaWwgPD0gcnFbMF0tPnRhaWwpOworCQlpOTE1X3JlcXVlc3RfcHV0KHJxWzBd
KTsKKworCQlpZiAocHJpbykgeworCQkJc3RydWN0IGk5MTVfc2NoZWRfYXR0ciBhdHRyID0gewor
CQkJCS5wcmlvcml0eSA9IHByaW8sCisJCQl9OworCisJCQkvKiBBbHRlcm5hdGl2ZWx5IHByZWVt
cHQgdGhlIHNwaW5uZXIgd2l0aCBjZVsxXSAqLworCQkJZW5naW5lLT5zY2hlZHVsZShycVsxXSwg
JmF0dHIpOworCQl9CisKKwkJLyogQW5kIHN3aXRjaCBiYWNrIHRvIGNlWzBdIGZvciBnb29kIG1l
YXN1cmUgKi8KKwkJcnFbMF0gPSBpOTE1X3JlcXVlc3RfY3JlYXRlKGNlWzBdKTsKKwkJaWYgKElT
X0VSUihycVswXSkpIHsKKwkJCWVyciA9IFBUUl9FUlIocnFbMF0pOworCQkJaTkxNV9yZXF1ZXN0
X3B1dChycVsxXSk7CisJCQlnb3RvIGVycl9jZTsKKwkJfQorCisJCWk5MTVfcmVxdWVzdF9hd2Fp
dF9kbWFfZmVuY2UocnFbMF0sICZycVsxXS0+ZmVuY2UpOworCQlpOTE1X3JlcXVlc3RfYWRkKHJx
WzBdKTsKKwkJR0VNX0JVR19PTihycVswXS0+dGFpbCA+IHJxWzFdLT50YWlsKTsKKwkJaTkxNV9y
ZXF1ZXN0X3B1dChycVsxXSk7CisKK2Vycl9jZToKKwkJdGFza2xldF9raWxsKCZlbmdpbmUtPmV4
ZWNsaXN0cy50YXNrbGV0KTsgLyogZmx1c2ggc3VibWlzc2lvbiAqLworCQlpZ3Rfc3Bpbm5lcl9l
bmQoJnNwaW4pOworCQlmb3IgKG4gPSAwOyBuIDwgQVJSQVlfU0laRShjZSk7IG4rKykgeworCQkJ
aWYgKElTX0VSUl9PUl9OVUxMKGNlW25dKSkKKwkJCQlicmVhazsKKworCQkJaW50ZWxfY29udGV4
dF91bnBpbihjZVtuXSk7CisJCQlpbnRlbF9jb250ZXh0X3B1dChjZVtuXSk7CisJCX0KKworCQlp
ZiAoaWd0X2xpdmVfdGVzdF9lbmQoJnQpKQorCQkJZXJyID0gLUVJTzsKKwkJaWYgKGVycikKKwkJ
CWJyZWFrOworCX0KKworCWtlcm5lbF9jb250ZXh0X2Nsb3NlKGN0eCk7CitlcnJfc3BpbjoKKwlp
Z3Rfc3Bpbm5lcl9maW5pKCZzcGluKTsKK2Vycl91bmxvY2s6CisJaW50ZWxfcnVudGltZV9wbV9w
dXQoJmk5MTUtPnJ1bnRpbWVfcG0sIHdha2VyZWYpOworCW11dGV4X3VubG9jaygmaTkxNS0+ZHJt
LnN0cnVjdF9tdXRleCk7CisJcmV0dXJuIGVycjsKK30KKworc3RhdGljIGludCBsaXZlX3VubGl0
ZV9zd2l0Y2godm9pZCAqYXJnKQoreworCXJldHVybiBsaXZlX3VubGl0ZV9yZXN0b3JlKGFyZywg
MCk7Cit9CisKK3N0YXRpYyBpbnQgbGl2ZV91bmxpdGVfcHJlZW1wdCh2b2lkICphcmcpCit7CisJ
cmV0dXJuIGxpdmVfdW5saXRlX3Jlc3RvcmUoYXJnLCBJOTE1X1VTRVJfUFJJT1JJVFkoSTkxNV9Q
UklPUklUWV9NQVgpKTsKK30KKwogc3RhdGljIGludAogZW1pdF9zZW1hcGhvcmVfY2hhaW4oc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcnEsIHN0cnVjdCBpOTE1X3ZtYSAqdm1hLCBpbnQgaWR4KQogewpA
QCAtMjE3OCw2ICsyMzU0LDggQEAgaW50IGludGVsX2V4ZWNsaXN0c19saXZlX3NlbGZ0ZXN0cyhz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsKIAlzdGF0aWMgY29uc3Qgc3RydWN0IGk5
MTVfc3VidGVzdCB0ZXN0c1tdID0gewogCQlTVUJURVNUKGxpdmVfc2FuaXR5Y2hlY2spLAorCQlT
VUJURVNUKGxpdmVfdW5saXRlX3N3aXRjaCksCisJCVNVQlRFU1QobGl2ZV91bmxpdGVfcHJlZW1w
dCksCiAJCVNVQlRFU1QobGl2ZV90aW1lc2xpY2VfcHJlZW1wdCksCiAJCVNVQlRFU1QobGl2ZV9i
dXN5d2FpdF9wcmVlbXB0KSwKIAkJU1VCVEVTVChsaXZlX3ByZWVtcHQpLAotLSAKMi4yMy4wCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

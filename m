Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3FF12857BF
	for <lists+intel-gfx@lfdr.de>; Thu,  8 Aug 2019 03:44:47 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 604E46E77F;
	Thu,  8 Aug 2019 01:44:45 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 47F966E0A2
 for <intel-gfx@lists.freedesktop.org>; Thu,  8 Aug 2019 01:44:43 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 07 Aug 2019 18:44:43 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,358,1559545200"; d="scan'208";a="165538120"
Received: from dceraolo-linux.fm.intel.com ([10.1.27.145])
 by orsmga007.jf.intel.com with ESMTP; 07 Aug 2019 18:44:43 -0700
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  7 Aug 2019 18:44:21 -0700
Message-Id: <20190808014423.20377-2-daniele.ceraolospurio@intel.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190808014423.20377-1-daniele.ceraolospurio@intel.com>
References: <20190808014423.20377-1-daniele.ceraolospurio@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [RFC 1/3] drm/i915: split out uncore_mmio_debug
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TXVsdGlwbGUgdW5jb3JlIHN0cnVjdHVyZXMgd2lsbCBzaGFyZSB0aGUgZGVidWcgaW5mcmFzdHJ1
Y3R1cmUsIHNvCm1vdmUgaXQgdG8gYSBjb21tb24gcGxhY2UgYW5kIGFkZCBleHRyYSBsb2NraW5n
IGFyb3VuZCBpdC4KQWxzbywgc2luY2Ugd2Ugbm93IGhhdmUgYSBzZXBhcmF0ZSBvYmplY3QsIGl0
IGlzIGNsZWFuZXIgdG8gaGF2ZQpkZWRpY2F0ZWQgZnVuY3Rpb25zIHdvcmtpbmcgb24gdGhlIG9i
amVjdCB0byBzdG9wIGFuZCByZXN0YXJ0IHRoZQptbWlvIGRlYnVnLiBBcGFydCBmcm9tIHRoZSBj
b3NtZXRpYyBjaGFuZ2VzLCB0aGlzIHBhdGNoIGludHJvZHVjZXMKMiBmdW5jdGlvbmFsIHVwZGF0
ZXM6CgotIEFsbCBjYWxscyB0byBjaGVja19mb3JfdW5jbGFpbWVkX21taW8gd2lsbCBub3cgcmV0
dXJuIGZhbHNlIHdoZW4KICB0aGUgZGVidWcgaXMgc3VzcGVuZGVkLCBub3QganVzdCB0aGUgb25l
cyB0aGF0IGFyZSBhY3RpdmUgb25seSB3aGVuCiAgaTkxNV9tb2RwYXJhbXMubW1pb19kZWJ1ZyBp
cyBzZXQuIElmIHdlIGRvbid0IHRydXN0IHRoZSByZXN1bHQgb2YgdGhlCiAgY2hlY2sgd2hpbGUg
YSB1c2VyIGlzIGRvaW5nIG1taW8gYWNjZXNzIHRoZW4gd2Ugc2hvdWxkbid0IGF0dGVtcHQgdGhl
CiAgY2hlY2sgYW55d2hlcmUuCgotIGk5MTVfbW9kcGFyYW1zLm1taW9fZGVidWcgaXMgbm90IHNh
dmUvcmVzdG9yZWQgYW55bW9yZSBhcm91bmQgdXNlcgogIGFjY2Vzcy4gVGhlIHZhbHVlIGlzIG5v
dyBuZXZlciB0b3VjaGVkIGJ5IHRoZSBrZXJuZWwgd2hpbGUgZGVidWcgaXMKICBkaXNhYmxlZCBz
byBubyBuZWVkIGZvciBzYXZlL3Jlc3RvcmUuCgp2Mjogc3F1YXNoIG1taW9fZGVidWcgcGF0Y2hl
cywgcmVzdHJpY3QgbW1pb19kZWJ1ZyBsb2NrIHVzYWdlIChDaHJpcykKClNpZ25lZC1vZmYtYnk6
IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5jb20+
CkNjOiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Rydi5jICAgICB8ICAzICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5o
ICAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5jIHwgOTEgKysr
KysrKysrKysrKysrKysrKystLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3Vu
Y29yZS5oIHwgMTggKysrLS0tCiA1IGZpbGVzIGNoYW5nZWQsIDc5IGluc2VydGlvbnMoKyksIDM2
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVi
dWdmcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKaW5kZXggM2IxNTI2
NmM1NGZkLi4yMzEwNTEyMTExYWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZGVidWdmcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCkBA
IC0xMTI5LDcgKzExMjksNyBAQCBzdGF0aWMgaW50IGk5MTVfZm9yY2V3YWtlX2RvbWFpbnMoc3Ry
dWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQogCXVuc2lnbmVkIGludCB0bXA7CiAKIAlzZXFf
cHJpbnRmKG0sICJ1c2VyLmJ5cGFzc19jb3VudCA9ICV1XG4iLAotCQkgICB1bmNvcmUtPnVzZXJf
Zm9yY2V3YWtlLmNvdW50KTsKKwkJICAgdW5jb3JlLT51c2VyX2ZvcmNld2FrZV9jb3VudCk7CiAK
IAlmb3JfZWFjaF9md19kb21haW4oZndfZG9tYWluLCB1bmNvcmUsIHRtcCkKIAkJc2VxX3ByaW50
ZihtLCAiJXMud2FrZV9jb3VudCA9ICV1XG4iLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKaW5kZXgg
MzQ4MGRiMzZiNjNmLi5mYmJmZjRhMTMzYmEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwpAQCAt
NzQ0LDYgKzc0NCw3IEBAIHN0YXRpYyBpbnQgaTkxNV9kcml2ZXJfZWFybHlfcHJvYmUoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCiAJaW50ZWxfZGV2aWNlX2luZm9fc3VicGxh
dGZvcm1faW5pdChkZXZfcHJpdik7CiAKKwlpbnRlbF91bmNvcmVfbW1pb19kZWJ1Z19pbml0X2Vh
cmx5KCZkZXZfcHJpdi0+bW1pb19kZWJ1Zyk7CiAJaW50ZWxfdW5jb3JlX2luaXRfZWFybHkoJmRl
dl9wcml2LT51bmNvcmUsIGRldl9wcml2KTsKIAogCXNwaW5fbG9ja19pbml0KCZkZXZfcHJpdi0+
aXJxX2xvY2spOwpAQCAtMjA0NCw3ICsyMDQ1LDcgQEAgc3RhdGljIGludCBpOTE1X2RybV9zdXNw
ZW5kX2xhdGUoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgYm9vbCBoaWJlcm5hdGlvbikKIAogb3V0
OgogCWVuYWJsZV9ycG1fd2FrZXJlZl9hc3NlcnRzKHJwbSk7Ci0JaWYgKCFkZXZfcHJpdi0+dW5j
b3JlLnVzZXJfZm9yY2V3YWtlLmNvdW50KQorCWlmICghZGV2X3ByaXYtPnVuY29yZS51c2VyX2Zv
cmNld2FrZV9jb3VudCkKIAkJaW50ZWxfcnVudGltZV9wbV9kcml2ZXJfcmVsZWFzZShycG0pOwog
CiAJcmV0dXJuIHJldDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IGM5NDc2ZjI0ZjVjMS4u
MTNjMjdhNzVkY2E4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5o
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTEzNDYsNiArMTM0Niw3
IEBAIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlIHsKIAlyZXNvdXJjZV9zaXplX3Qgc3RvbGVuX3Vz
YWJsZV9zaXplOwkvKiBUb3RhbCBzaXplIG1pbnVzIHJlc2VydmVkIHJhbmdlcyAqLwogCiAJc3Ry
dWN0IGludGVsX3VuY29yZSB1bmNvcmU7CisJc3RydWN0IGludGVsX3VuY29yZV9tbWlvX2RlYnVn
IG1taW9fZGVidWc7CiAKIAlzdHJ1Y3QgaTkxNV92aXJ0dWFsX2dwdSB2Z3B1OwogCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2ludGVsX3VuY29yZS5jCmluZGV4IDM5ZTg3MTBhZmRkOS4uOWU1ODNmMTNhOWU0IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91bmNvcmUuYwpAQCAtMzQsNiArMzQsMzIgQEAKIAogI2Rl
ZmluZSBfX3Jhd19wb3N0aW5nX3JlYWQoLi4uKSAoKHZvaWQpX19yYXdfdW5jb3JlX3JlYWQzMihf
X1ZBX0FSR1NfXykpCiAKK3ZvaWQKK2ludGVsX3VuY29yZV9tbWlvX2RlYnVnX2luaXRfZWFybHko
c3RydWN0IGludGVsX3VuY29yZV9tbWlvX2RlYnVnICptbWlvX2RlYnVnKQoreworCXNwaW5fbG9j
a19pbml0KCZtbWlvX2RlYnVnLT5sb2NrKTsKKwltbWlvX2RlYnVnLT51bmNsYWltZWRfbW1pb19j
aGVjayA9IDE7Cit9CisKK3N0YXRpYyB2b2lkIG1taW9fZGVidWdfc3VzcGVuZChzdHJ1Y3QgaW50
ZWxfdW5jb3JlX21taW9fZGVidWcgKm1taW9fZGVidWcpCit7CisJbG9ja2RlcF9hc3NlcnRfaGVs
ZCgmbW1pb19kZWJ1Zy0+bG9jayk7CisKKwkvKiBTYXZlIGFuZCBkaXNhYmxlIG1taW8gZGVidWdn
aW5nIGZvciB0aGUgdXNlciBieXBhc3MgKi8KKwlpZiAoIW1taW9fZGVidWctPnN1c3BlbmRfY291
bnQrKykgeworCQltbWlvX2RlYnVnLT5zYXZlZF9tbWlvX2NoZWNrID0gbW1pb19kZWJ1Zy0+dW5j
bGFpbWVkX21taW9fY2hlY2s7CisJCW1taW9fZGVidWctPnVuY2xhaW1lZF9tbWlvX2NoZWNrID0g
MDsKKwl9Cit9CisKK3N0YXRpYyB2b2lkIG1taW9fZGVidWdfcmVzdW1lKHN0cnVjdCBpbnRlbF91
bmNvcmVfbW1pb19kZWJ1ZyAqbW1pb19kZWJ1ZykKK3sKKwlsb2NrZGVwX2Fzc2VydF9oZWxkKCZt
bWlvX2RlYnVnLT5sb2NrKTsKKworCWlmICghLS1tbWlvX2RlYnVnLT5zdXNwZW5kX2NvdW50KQor
CQltbWlvX2RlYnVnLT51bmNsYWltZWRfbW1pb19jaGVjayA9IG1taW9fZGVidWctPnNhdmVkX21t
aW9fY2hlY2s7Cit9CisKIHN0YXRpYyBjb25zdCBjaGFyICogY29uc3QgZm9yY2V3YWtlX2RvbWFp
bl9uYW1lc1tdID0gewogCSJyZW5kZXIiLAogCSJibGl0dGVyIiwKQEAgLTQ3Niw2ICs1MDIsMTEg
QEAgY2hlY2tfZm9yX3VuY2xhaW1lZF9tbWlvKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSkK
IHsKIAlib29sIHJldCA9IGZhbHNlOwogCisJbG9ja2RlcF9hc3NlcnRfaGVsZCgmdW5jb3JlLT5k
ZWJ1Zy0+bG9jayk7CisKKwlpZiAodW5jb3JlLT5kZWJ1Zy0+c3VzcGVuZF9jb3VudCkKKwkJcmV0
dXJuIGZhbHNlOworCiAJaWYgKGludGVsX3VuY29yZV9oYXNfZnBnYV9kYmdfdW5jbGFpbWVkKHVu
Y29yZSkpCiAJCXJldCB8PSBmcGdhX2NoZWNrX2Zvcl91bmNsYWltZWRfbW1pbyh1bmNvcmUpOwog
CkBAIC02MDgsMTcgKzYzOSwxMSBAQCB2b2lkIGludGVsX3VuY29yZV9mb3JjZXdha2VfZ2V0KHN0
cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSwKIHZvaWQgaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV91
c2VyX2dldChzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUpCiB7CiAJc3Bpbl9sb2NrX2lycSgm
dW5jb3JlLT5sb2NrKTsKLQlpZiAoIXVuY29yZS0+dXNlcl9mb3JjZXdha2UuY291bnQrKykgewor
CWlmICghdW5jb3JlLT51c2VyX2ZvcmNld2FrZV9jb3VudCsrKSB7CiAJCWludGVsX3VuY29yZV9m
b3JjZXdha2VfZ2V0X19sb2NrZWQodW5jb3JlLCBGT1JDRVdBS0VfQUxMKTsKLQotCQkvKiBTYXZl
IGFuZCBkaXNhYmxlIG1taW8gZGVidWdnaW5nIGZvciB0aGUgdXNlciBieXBhc3MgKi8KLQkJdW5j
b3JlLT51c2VyX2ZvcmNld2FrZS5zYXZlZF9tbWlvX2NoZWNrID0KLQkJCXVuY29yZS0+dW5jbGFp
bWVkX21taW9fY2hlY2s7Ci0JCXVuY29yZS0+dXNlcl9mb3JjZXdha2Uuc2F2ZWRfbW1pb19kZWJ1
ZyA9Ci0JCQlpOTE1X21vZHBhcmFtcy5tbWlvX2RlYnVnOwotCi0JCXVuY29yZS0+dW5jbGFpbWVk
X21taW9fY2hlY2sgPSAwOwotCQlpOTE1X21vZHBhcmFtcy5tbWlvX2RlYnVnID0gMDsKKwkJc3Bp
bl9sb2NrKCZ1bmNvcmUtPmRlYnVnLT5sb2NrKTsKKwkJbW1pb19kZWJ1Z19zdXNwZW5kKHVuY29y
ZS0+ZGVidWcpOworCQlzcGluX3VubG9jaygmdW5jb3JlLT5kZWJ1Zy0+bG9jayk7CiAJfQogCXNw
aW5fdW5sb2NrX2lycSgmdW5jb3JlLT5sb2NrKTsKIH0KQEAgLTYzMywxNSArNjU4LDE0IEBAIHZv
aWQgaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV91c2VyX2dldChzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1
bmNvcmUpCiB2b2lkIGludGVsX3VuY29yZV9mb3JjZXdha2VfdXNlcl9wdXQoc3RydWN0IGludGVs
X3VuY29yZSAqdW5jb3JlKQogewogCXNwaW5fbG9ja19pcnEoJnVuY29yZS0+bG9jayk7Ci0JaWYg
KCEtLXVuY29yZS0+dXNlcl9mb3JjZXdha2UuY291bnQpIHsKLQkJaWYgKGludGVsX3VuY29yZV91
bmNsYWltZWRfbW1pbyh1bmNvcmUpKQorCWlmICghLS11bmNvcmUtPnVzZXJfZm9yY2V3YWtlX2Nv
dW50KSB7CisJCXNwaW5fbG9jaygmdW5jb3JlLT5kZWJ1Zy0+bG9jayk7CisJCW1taW9fZGVidWdf
cmVzdW1lKHVuY29yZS0+ZGVidWcpOworCisJCWlmIChjaGVja19mb3JfdW5jbGFpbWVkX21taW8o
dW5jb3JlKSkKIAkJCWRldl9pbmZvKHVuY29yZS0+aTkxNS0+ZHJtLmRldiwKIAkJCQkgIkludmFs
aWQgbW1pbyBkZXRlY3RlZCBkdXJpbmcgdXNlciBhY2Nlc3NcbiIpOwotCi0JCXVuY29yZS0+dW5j
bGFpbWVkX21taW9fY2hlY2sgPQotCQkJdW5jb3JlLT51c2VyX2ZvcmNld2FrZS5zYXZlZF9tbWlv
X2NoZWNrOwotCQlpOTE1X21vZHBhcmFtcy5tbWlvX2RlYnVnID0KLQkJCXVuY29yZS0+dXNlcl9m
b3JjZXdha2Uuc2F2ZWRfbW1pb19kZWJ1ZzsKKwkJc3Bpbl91bmxvY2soJnVuY29yZS0+ZGVidWct
PmxvY2spOwogCiAJCWludGVsX3VuY29yZV9mb3JjZXdha2VfcHV0X19sb2NrZWQodW5jb3JlLCBG
T1JDRVdBS0VfQUxMKTsKIAl9CkBAIC0xMDg4LDcgKzExMTIsMTYgQEAgdW5jbGFpbWVkX3JlZ19k
ZWJ1ZyhzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUsCiAJaWYgKGxpa2VseSghaTkxNV9tb2Rw
YXJhbXMubW1pb19kZWJ1ZykpCiAJCXJldHVybjsKIAorCS8qIGludGVycnVwdHMgYXJlIGRpc2Fi
bGVkIGFuZCByZS1lbmFibGVkIGFyb3VuZCB1bmNvcmUtPmxvY2sgdXNhZ2UgKi8KKwlsb2NrZGVw
X2Fzc2VydF9oZWxkKCZ1bmNvcmUtPmxvY2spOworCisJaWYgKGJlZm9yZSkKKwkJc3Bpbl9sb2Nr
KCZ1bmNvcmUtPmRlYnVnLT5sb2NrKTsKKwogCV9fdW5jbGFpbWVkX3JlZ19kZWJ1Zyh1bmNvcmUs
IHJlZywgcmVhZCwgYmVmb3JlKTsKKworCWlmICghYmVmb3JlKQorCQlzcGluX3VubG9jaygmdW5j
b3JlLT5kZWJ1Zy0+bG9jayk7CiB9CiAKICNkZWZpbmUgR0VOMl9SRUFEX0hFQURFUih4KSBcCkBA
IC0xNjA3LDYgKzE2NDAsNyBAQCB2b2lkIGludGVsX3VuY29yZV9pbml0X2Vhcmx5KHN0cnVjdCBp
bnRlbF91bmNvcmUgKnVuY29yZSwKIAlzcGluX2xvY2tfaW5pdCgmdW5jb3JlLT5sb2NrKTsKIAl1
bmNvcmUtPmk5MTUgPSBpOTE1OwogCXVuY29yZS0+cnBtID0gJmk5MTUtPnJ1bnRpbWVfcG07CisJ
dW5jb3JlLT5kZWJ1ZyA9ICZpOTE1LT5tbWlvX2RlYnVnOwogfQogCiBzdGF0aWMgdm9pZCB1bmNv
cmVfcmF3X2luaXQoc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlKQpAQCAtMTYzMiw3ICsxNjY2
LDYgQEAgc3RhdGljIGludCB1bmNvcmVfZm9yY2V3YWtlX2luaXQoc3RydWN0IGludGVsX3VuY29y
ZSAqdW5jb3JlKQogCXJldCA9IGludGVsX3VuY29yZV9md19kb21haW5zX2luaXQodW5jb3JlKTsK
IAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwotCiAJZm9yY2V3YWtlX2Vhcmx5X3Nhbml0aXplKHVu
Y29yZSwgMCk7CiAKIAlpZiAoSVNfR0VOX1JBTkdFKGk5MTUsIDYsIDcpKSB7CkBAIC0xNjgxLDgg
KzE3MTQsNiBAQCBpbnQgaW50ZWxfdW5jb3JlX2luaXRfbW1pbyhzdHJ1Y3QgaW50ZWxfdW5jb3Jl
ICp1bmNvcmUpCiAJaWYgKElOVEVMX0dFTihpOTE1KSA+IDUgJiYgIWludGVsX3ZncHVfYWN0aXZl
KGk5MTUpKQogCQl1bmNvcmUtPmZsYWdzIHw9IFVOQ09SRV9IQVNfRk9SQ0VXQUtFOwogCi0JdW5j
b3JlLT51bmNsYWltZWRfbW1pb19jaGVjayA9IDE7Ci0KIAlpZiAoIWludGVsX3VuY29yZV9oYXNf
Zm9yY2V3YWtlKHVuY29yZSkpIHsKIAkJdW5jb3JlX3Jhd19pbml0KHVuY29yZSk7CiAJfSBlbHNl
IHsKQEAgLTE3MDcsNyArMTczOCw3IEBAIGludCBpbnRlbF91bmNvcmVfaW5pdF9tbWlvKHN0cnVj
dCBpbnRlbF91bmNvcmUgKnVuY29yZSkKIAkJdW5jb3JlLT5mbGFncyB8PSBVTkNPUkVfSEFTX0ZJ
Rk87CiAKIAkvKiBjbGVhciBvdXQgdW5jbGFpbWVkIHJlZyBkZXRlY3Rpb24gYml0ICovCi0JaWYg
KGNoZWNrX2Zvcl91bmNsYWltZWRfbW1pbyh1bmNvcmUpKQorCWlmIChpbnRlbF91bmNvcmVfdW5j
bGFpbWVkX21taW8odW5jb3JlKSkKIAkJRFJNX0RFQlVHKCJ1bmNsYWltZWQgbW1pbyBkZXRlY3Rl
ZCBvbiB1bmNvcmUgaW5pdCwgY2xlYXJpbmdcbiIpOwogCiAJcmV0dXJuIDA7CkBAIC0xOTUyLDcg
KzE5ODMsMTMgQEAgaW50IF9faW50ZWxfd2FpdF9mb3JfcmVnaXN0ZXIoc3RydWN0IGludGVsX3Vu
Y29yZSAqdW5jb3JlLAogCiBib29sIGludGVsX3VuY29yZV91bmNsYWltZWRfbW1pbyhzdHJ1Y3Qg
aW50ZWxfdW5jb3JlICp1bmNvcmUpCiB7Ci0JcmV0dXJuIGNoZWNrX2Zvcl91bmNsYWltZWRfbW1p
byh1bmNvcmUpOworCWJvb2wgcmV0OworCisJc3Bpbl9sb2NrX2lycSgmdW5jb3JlLT5kZWJ1Zy0+
bG9jayk7CisJcmV0ID0gY2hlY2tfZm9yX3VuY2xhaW1lZF9tbWlvKHVuY29yZSk7CisJc3Bpbl91
bmxvY2tfaXJxKCZ1bmNvcmUtPmRlYnVnLT5sb2NrKTsKKworCXJldHVybiByZXQ7CiB9CiAKIGJv
b2wKQEAgLTE5NjAsMjQgKzE5OTcsMjQgQEAgaW50ZWxfdW5jb3JlX2FybV91bmNsYWltZWRfbW1p
b19kZXRlY3Rpb24oc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlKQogewogCWJvb2wgcmV0ID0g
ZmFsc2U7CiAKLQlzcGluX2xvY2tfaXJxKCZ1bmNvcmUtPmxvY2spOworCXNwaW5fbG9ja19pcnEo
JnVuY29yZS0+ZGVidWctPmxvY2spOwogCi0JaWYgKHVubGlrZWx5KHVuY29yZS0+dW5jbGFpbWVk
X21taW9fY2hlY2sgPD0gMCkpCisJaWYgKHVubGlrZWx5KHVuY29yZS0+ZGVidWctPnVuY2xhaW1l
ZF9tbWlvX2NoZWNrIDw9IDApKQogCQlnb3RvIG91dDsKIAotCWlmICh1bmxpa2VseShpbnRlbF91
bmNvcmVfdW5jbGFpbWVkX21taW8odW5jb3JlKSkpIHsKKwlpZiAodW5saWtlbHkoY2hlY2tfZm9y
X3VuY2xhaW1lZF9tbWlvKHVuY29yZSkpKSB7CiAJCWlmICghaTkxNV9tb2RwYXJhbXMubW1pb19k
ZWJ1ZykgewogCQkJRFJNX0RFQlVHKCJVbmNsYWltZWQgcmVnaXN0ZXIgZGV0ZWN0ZWQsICIKIAkJ
CQkgICJlbmFibGluZyBvbmVzaG90IHVuY2xhaW1lZCByZWdpc3RlciByZXBvcnRpbmcuICIKIAkJ
CQkgICJQbGVhc2UgdXNlIGk5MTUubW1pb19kZWJ1Zz1OIGZvciBtb3JlIGluZm9ybWF0aW9uLlxu
Iik7CiAJCQlpOTE1X21vZHBhcmFtcy5tbWlvX2RlYnVnKys7CiAJCX0KLQkJdW5jb3JlLT51bmNs
YWltZWRfbW1pb19jaGVjay0tOworCQl1bmNvcmUtPmRlYnVnLT51bmNsYWltZWRfbW1pb19jaGVj
ay0tOwogCQlyZXQgPSB0cnVlOwogCX0KIAogb3V0OgotCXNwaW5fdW5sb2NrX2lycSgmdW5jb3Jl
LT5sb2NrKTsKKwlzcGluX3VubG9ja19pcnEoJnVuY29yZS0+ZGVidWctPmxvY2spOwogCiAJcmV0
dXJuIHJldDsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29y
ZS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdW5jb3JlLmgKaW5kZXggZTYwM2QyMTBh
MzRkLi40MTRmYzJjYjA0NTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X3VuY29yZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VuY29yZS5oCkBAIC0z
Niw2ICszNiwxMyBAQCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZTsKIHN0cnVjdCBpbnRlbF9ydW50
aW1lX3BtOwogc3RydWN0IGludGVsX3VuY29yZTsKIAorc3RydWN0IGludGVsX3VuY29yZV9tbWlv
X2RlYnVnIHsKKwlzcGlubG9ja190IGxvY2s7IC8qKiBsb2NrIGlzIGFsc28gdGFrZW4gaW4gaXJx
IGNvbnRleHRzLiAqLworCWludCB1bmNsYWltZWRfbW1pb19jaGVjazsKKwlpbnQgc2F2ZWRfbW1p
b19jaGVjazsKKwl1MzIgc3VzcGVuZF9jb3VudDsKK307CisKIGVudW0gZm9yY2V3YWtlX2RvbWFp
bl9pZCB7CiAJRldfRE9NQUlOX0lEX1JFTkRFUiA9IDAsCiAJRldfRE9NQUlOX0lEX0JMSVRURVIs
CkBAIC0xMzcsMTQgKzE0NCw5IEBAIHN0cnVjdCBpbnRlbF91bmNvcmUgewogCQl1MzIgX19pb21l
bSAqcmVnX2FjazsKIAl9ICpmd19kb21haW5bRldfRE9NQUlOX0lEX0NPVU5UXTsKIAotCXN0cnVj
dCB7Ci0JCXVuc2lnbmVkIGludCBjb3VudDsKLQotCQlpbnQgc2F2ZWRfbW1pb19jaGVjazsKLQkJ
aW50IHNhdmVkX21taW9fZGVidWc7Ci0JfSB1c2VyX2ZvcmNld2FrZTsKKwl1bnNpZ25lZCBpbnQg
dXNlcl9mb3JjZXdha2VfY291bnQ7CiAKLQlpbnQgdW5jbGFpbWVkX21taW9fY2hlY2s7CisJc3Ry
dWN0IGludGVsX3VuY29yZV9tbWlvX2RlYnVnICpkZWJ1ZzsKIH07CiAKIC8qIEl0ZXJhdGUgb3Zl
ciBpbml0aWFsaXNlZCBmdyBkb21haW5zICovCkBAIC0xNzksNiArMTgxLDggQEAgaW50ZWxfdW5j
b3JlX2hhc19maWZvKGNvbnN0IHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSkKIAlyZXR1cm4g
dW5jb3JlLT5mbGFncyAmIFVOQ09SRV9IQVNfRklGTzsKIH0KIAordm9pZAoraW50ZWxfdW5jb3Jl
X21taW9fZGVidWdfaW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfdW5jb3JlX21taW9fZGVidWcgKm1t
aW9fZGVidWcpOwogdm9pZCBpbnRlbF91bmNvcmVfaW5pdF9lYXJseShzdHJ1Y3QgaW50ZWxfdW5j
b3JlICp1bmNvcmUsCiAJCQkgICAgIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKIGlu
dCBpbnRlbF91bmNvcmVfaW5pdF9tbWlvKHN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSk7Ci0t
IAoyLjIyLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 075EA100974
	for <lists+intel-gfx@lfdr.de>; Mon, 18 Nov 2019 17:45:00 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4815A6E624;
	Mon, 18 Nov 2019 16:44:58 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 76BD86E612
 for <intel-gfx@lists.freedesktop.org>; Mon, 18 Nov 2019 16:44:57 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 18 Nov 2019 08:44:57 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,320,1569308400"; d="scan'208";a="200024798"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga008.jf.intel.com with SMTP; 18 Nov 2019 08:44:54 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Mon, 18 Nov 2019 18:44:54 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 18 Nov 2019 18:44:28 +0200
Message-Id: <20191118164430.27265-9-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191118164430.27265-1-ville.syrjala@linux.intel.com>
References: <20191118164430.27265-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 08/10] drm/i915: s/intel_crtc/crtc/ in
 .crtc_enable() and .crtc_disable()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkdl
dCByaWQgb2YgdGhlIGhvcnJpYmxlIGFsaWFzaW5nIGRybV9jcnRjIGFuZCBpbnRlbF9jcnRjIHZh
cmlhYmxlcwppbiB0aGUgY3J0YyBlbmFibGUvZGlzYWJsZSBob29rcy4KClJldmlld2VkLWJ5OiBN
YW5hc2kgTmF2YXJlIDxtYW5hc2kuZC5uYXZhcmVAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBW
aWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIHwgMTQyICsrKysrKysrKy0t
LS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA2NSBpbnNlcnRpb25zKCspLCA3NyBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4
IDU1NmIzMWJmMmZiMC4uZDZhZDMyMTc5YTE3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtNjQ3NSwxMyArNjQ3NSwxMSBAQCBzdGF0aWMgdm9p
ZCBpbnRlbF9kaXNhYmxlX3ByaW1hcnlfcGxhbmUoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3Rh
dGUgKmNydGNfc3RhdAogc3RhdGljIHZvaWQgaXJvbmxha2VfY3J0Y19lbmFibGUoc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCQkJCSBzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0
YXRlICpzdGF0ZSkKIHsKLQlzdHJ1Y3QgZHJtX2NydGMgKmNydGMgPSBwaXBlX2NvbmZpZy0+dWFw
aS5jcnRjOwotCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBjcnRjLT5kZXY7Ci0Jc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShkZXYpOwotCXN0cnVjdCBpbnRlbF9j
cnRjICppbnRlbF9jcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjKTsKLQllbnVtIHBpcGUgcGlwZSA9
IGludGVsX2NydGMtPnBpcGU7CisJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9j
cnRjKHBpcGVfY29uZmlnLT51YXBpLmNydGMpOworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiA9IHRvX2k5MTUoY3J0Yy0+YmFzZS5kZXYpOworCWVudW0gcGlwZSBwaXBlID0gY3J0
Yy0+cGlwZTsKIAotCWlmIChXQVJOX09OKGludGVsX2NydGMtPmFjdGl2ZSkpCisJaWYgKFdBUk5f
T04oY3J0Yy0+YWN0aXZlKSkKIAkJcmV0dXJuOwogCiAJLyoKQEAgLTY1MTMsOSArNjUxMSw5IEBA
IHN0YXRpYyB2b2lkIGlyb25sYWtlX2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpwaXBlX2NvbmZpZywKIAogCWlyb25sYWtlX3NldF9waXBlY29uZihwaXBlX2NvbmZpZyk7CiAK
LQlpbnRlbF9jcnRjLT5hY3RpdmUgPSB0cnVlOworCWNydGMtPmFjdGl2ZSA9IHRydWU7CiAKLQlp
bnRlbF9lbmNvZGVyc19wcmVfZW5hYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKKwlpbnRlbF9lbmNv
ZGVyc19wcmVfZW5hYmxlKHN0YXRlLCBjcnRjKTsKIAogCWlmIChwaXBlX2NvbmZpZy0+aGFzX3Bj
aF9lbmNvZGVyKSB7CiAJCS8qIE5vdGU6IEZESSBQTEwgZW5hYmxpbmcgX211c3RfIGJlIGRvbmUg
YmVmb3JlIHdlIGVuYWJsZSB0aGUKQEAgLTY1MzksNyArNjUzNyw3IEBAIHN0YXRpYyB2b2lkIGly
b25sYWtlX2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZywK
IAlpbnRlbF9kaXNhYmxlX3ByaW1hcnlfcGxhbmUocGlwZV9jb25maWcpOwogCiAJaWYgKGRldl9w
cml2LT5kaXNwbGF5LmluaXRpYWxfd2F0ZXJtYXJrcykKLQkJZGV2X3ByaXYtPmRpc3BsYXkuaW5p
dGlhbF93YXRlcm1hcmtzKHN0YXRlLCBpbnRlbF9jcnRjKTsKKwkJZGV2X3ByaXYtPmRpc3BsYXku
aW5pdGlhbF93YXRlcm1hcmtzKHN0YXRlLCBjcnRjKTsKIAlpbnRlbF9lbmFibGVfcGlwZShwaXBl
X2NvbmZpZyk7CiAKIAlpZiAocGlwZV9jb25maWctPmhhc19wY2hfZW5jb2RlcikKQEAgLTY1NDcs
NyArNjU0NSw3IEBAIHN0YXRpYyB2b2lkIGlyb25sYWtlX2NydGNfZW5hYmxlKHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZywKIAogCWludGVsX2NydGNfdmJsYW5rX29uKHBpcGVf
Y29uZmlnKTsKIAotCWludGVsX2VuY29kZXJzX2VuYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7CisJ
aW50ZWxfZW5jb2RlcnNfZW5hYmxlKHN0YXRlLCBjcnRjKTsKIAogCWlmIChIQVNfUENIX0NQVChk
ZXZfcHJpdikpCiAJCWNwdF92ZXJpZnlfbW9kZXNldChkZXZfcHJpdiwgcGlwZSk7CkBAIC02NjIx
LDIyICs2NjE5LDIxIEBAIHN0YXRpYyB2b2lkIGhzd19zZXRfZnJhbWVfc3RhcnRfZGVsYXkoY29u
c3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiBzdGF0aWMgdm9pZCBoYXN3
ZWxsX2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZywKIAkJ
CQlzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIHsKLQlzdHJ1Y3QgZHJtX2NydGMg
KmNydGMgPSBwaXBlX2NvbmZpZy0+dWFwaS5jcnRjOwotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiA9IHRvX2k5MTUoY3J0Yy0+ZGV2KTsKLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50
ZWxfY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Yyk7Ci0JZW51bSBwaXBlIHBpcGUgPSBpbnRlbF9j
cnRjLT5waXBlLCBoc3dfd29ya2Fyb3VuZF9waXBlOworCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRj
ID0gdG9faW50ZWxfY3J0YyhwaXBlX2NvbmZpZy0+dWFwaS5jcnRjKTsKKwlzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMtPmJhc2UuZGV2KTsKKwllbnVtIHBp
cGUgcGlwZSA9IGNydGMtPnBpcGUsIGhzd193b3JrYXJvdW5kX3BpcGU7CiAJZW51bSB0cmFuc2Nv
ZGVyIGNwdV90cmFuc2NvZGVyID0gcGlwZV9jb25maWctPmNwdV90cmFuc2NvZGVyOwogCWJvb2wg
cHNsX2Nsa2dhdGVfd2E7CiAKLQlpZiAoV0FSTl9PTihpbnRlbF9jcnRjLT5hY3RpdmUpKQorCWlm
IChXQVJOX09OKGNydGMtPmFjdGl2ZSkpCiAJCXJldHVybjsKIAotCWludGVsX2VuY29kZXJzX3By
ZV9wbGxfZW5hYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKKwlpbnRlbF9lbmNvZGVyc19wcmVfcGxs
X2VuYWJsZShzdGF0ZSwgY3J0Yyk7CiAKIAlpZiAocGlwZV9jb25maWctPnNoYXJlZF9kcGxsKQog
CQlpbnRlbF9lbmFibGVfc2hhcmVkX2RwbGwocGlwZV9jb25maWcpOwogCi0JaW50ZWxfZW5jb2Rl
cnNfcHJlX2VuYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7CisJaW50ZWxfZW5jb2RlcnNfcHJlX2Vu
YWJsZShzdGF0ZSwgY3J0Yyk7CiAKIAlpZiAoaW50ZWxfY3J0Y19oYXNfZHBfZW5jb2RlcihwaXBl
X2NvbmZpZykpCiAJCWludGVsX2RwX3NldF9tX24ocGlwZV9jb25maWcsIE0xX04xKTsKQEAgLTY2
NjgsNyArNjY2NSw3IEBAIHN0YXRpYyB2b2lkIGhhc3dlbGxfY3J0Y19lbmFibGUoc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49
IDkgfHwgSVNfQlJPQURXRUxMKGRldl9wcml2KSkKIAkJYmR3X3NldF9waXBlbWlzYyhwaXBlX2Nv
bmZpZyk7CiAKLQlpbnRlbF9jcnRjLT5hY3RpdmUgPSB0cnVlOworCWNydGMtPmFjdGl2ZSA9IHRy
dWU7CiAKIAkvKiBEaXNwbGF5IFdBICMxMTgwOiBXYURpc2FibGVTY2FsYXJDbG9ja0dhdGluZzog
Z2xrLCBjbmwgKi8KIAlwc2xfY2xrZ2F0ZV93YSA9IChJU19HRU1JTklMQUtFKGRldl9wcml2KSB8
fCBJU19DQU5OT05MQUtFKGRldl9wcml2KSkgJiYKQEAgLTY2OTIsMTYgKzY2ODksMTYgQEAgc3Rh
dGljIHZvaWQgaGFzd2VsbF9jcnRjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlw
ZV9jb25maWcsCiAJCWludGVsX2Rpc2FibGVfcHJpbWFyeV9wbGFuZShwaXBlX2NvbmZpZyk7CiAK
IAlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMSkKLQkJaWNsX3NldF9waXBlX2NoaWNrZW4o
aW50ZWxfY3J0Yyk7CisJCWljbF9zZXRfcGlwZV9jaGlja2VuKGNydGMpOwogCiAJaWYgKCF0cmFu
c2NvZGVyX2lzX2RzaShjcHVfdHJhbnNjb2RlcikpCiAJCWludGVsX2RkaV9lbmFibGVfdHJhbnNj
b2Rlcl9mdW5jKHBpcGVfY29uZmlnKTsKIAogCWlmIChkZXZfcHJpdi0+ZGlzcGxheS5pbml0aWFs
X3dhdGVybWFya3MpCi0JCWRldl9wcml2LT5kaXNwbGF5LmluaXRpYWxfd2F0ZXJtYXJrcyhzdGF0
ZSwgaW50ZWxfY3J0Yyk7CisJCWRldl9wcml2LT5kaXNwbGF5LmluaXRpYWxfd2F0ZXJtYXJrcyhz
dGF0ZSwgY3J0Yyk7CiAKIAlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMSkKLQkJaWNsX3Bp
cGVfbWJ1c19lbmFibGUoaW50ZWxfY3J0Yyk7CisJCWljbF9waXBlX21idXNfZW5hYmxlKGNydGMp
OwogCiAJLyogWFhYOiBEbyB0aGUgcGlwZSBhc3NlcnRpb25zIGF0IHRoZSByaWdodCBwbGFjZSBm
b3IgQlhUIERTSS4gKi8KIAlpZiAoIXRyYW5zY29kZXJfaXNfZHNpKGNwdV90cmFuc2NvZGVyKSkK
QEAgLTY3MTIsNyArNjcwOSw3IEBAIHN0YXRpYyB2b2lkIGhhc3dlbGxfY3J0Y19lbmFibGUoc3Ry
dWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnLAogCiAJaW50ZWxfY3J0Y192Ymxhbmtf
b24ocGlwZV9jb25maWcpOwogCi0JaW50ZWxfZW5jb2RlcnNfZW5hYmxlKHN0YXRlLCBpbnRlbF9j
cnRjKTsKKwlpbnRlbF9lbmNvZGVyc19lbmFibGUoc3RhdGUsIGNydGMpOwogCiAJaWYgKHBzbF9j
bGtnYXRlX3dhKSB7CiAJCWludGVsX3dhaXRfZm9yX3ZibGFuayhkZXZfcHJpdiwgcGlwZSk7CkBA
IC02NzQ2LDExICs2NzQzLDkgQEAgc3RhdGljIHZvaWQgaXJvbmxha2VfcGZpdF9kaXNhYmxlKGNv
bnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSkKIHN0YXRpYyB2b2lk
IGlyb25sYWtlX2NydGNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNf
c3RhdGUsCiAJCQkJICBzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIHsKLQlzdHJ1
Y3QgZHJtX2NydGMgKmNydGMgPSBvbGRfY3J0Y19zdGF0ZS0+dWFwaS5jcnRjOwotCXN0cnVjdCBk
cm1fZGV2aWNlICpkZXYgPSBjcnRjLT5kZXY7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2ID0gdG9faTkxNShkZXYpOwotCXN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0g
dG9faW50ZWxfY3J0YyhjcnRjKTsKLQllbnVtIHBpcGUgcGlwZSA9IGludGVsX2NydGMtPnBpcGU7
CisJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKG9sZF9jcnRjX3N0YXRl
LT51YXBpLmNydGMpOworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5
MTUoY3J0Yy0+YmFzZS5kZXYpOworCWVudW0gcGlwZSBwaXBlID0gY3J0Yy0+cGlwZTsKIAogCS8q
CiAJICogU29tZXRpbWVzIHNwdXJpb3VzIENQVSBwaXBlIHVuZGVycnVucyBoYXBwZW4gd2hlbiB0
aGUKQEAgLTY3NjAsMTggKzY3NTUsMTggQEAgc3RhdGljIHZvaWQgaXJvbmxha2VfY3J0Y19kaXNh
YmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwKIAlpbnRlbF9zZXRf
Y3B1X2ZpZm9fdW5kZXJydW5fcmVwb3J0aW5nKGRldl9wcml2LCBwaXBlLCBmYWxzZSk7CiAJaW50
ZWxfc2V0X3BjaF9maWZvX3VuZGVycnVuX3JlcG9ydGluZyhkZXZfcHJpdiwgcGlwZSwgZmFsc2Up
OwogCi0JaW50ZWxfZW5jb2RlcnNfZGlzYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7CisJaW50ZWxf
ZW5jb2RlcnNfZGlzYWJsZShzdGF0ZSwgY3J0Yyk7CiAKLQlpbnRlbF9jcnRjX3ZibGFua19vZmYo
aW50ZWxfY3J0Yyk7CisJaW50ZWxfY3J0Y192Ymxhbmtfb2ZmKGNydGMpOwogCiAJaW50ZWxfZGlz
YWJsZV9waXBlKG9sZF9jcnRjX3N0YXRlKTsKIAogCWlyb25sYWtlX3BmaXRfZGlzYWJsZShvbGRf
Y3J0Y19zdGF0ZSk7CiAKIAlpZiAob2xkX2NydGNfc3RhdGUtPmhhc19wY2hfZW5jb2RlcikKLQkJ
aXJvbmxha2VfZmRpX2Rpc2FibGUoaW50ZWxfY3J0Yyk7CisJCWlyb25sYWtlX2ZkaV9kaXNhYmxl
KGNydGMpOwogCi0JaW50ZWxfZW5jb2RlcnNfcG9zdF9kaXNhYmxlKHN0YXRlLCBpbnRlbF9jcnRj
KTsKKwlpbnRlbF9lbmNvZGVyc19wb3N0X2Rpc2FibGUoc3RhdGUsIGNydGMpOwogCiAJaWYgKG9s
ZF9jcnRjX3N0YXRlLT5oYXNfcGNoX2VuY29kZXIpIHsKIAkJaXJvbmxha2VfZGlzYWJsZV9wY2hf
dHJhbnNjb2RlcihkZXZfcHJpdiwgcGlwZSk7CkBAIC02Nzk0LDcgKzY3ODksNyBAQCBzdGF0aWMg
dm9pZCBpcm9ubGFrZV9jcnRjX2Rpc2FibGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9j
cnRjX3N0YXRlLAogCQkJSTkxNV9XUklURShQQ0hfRFBMTF9TRUwsIHRlbXApOwogCQl9CiAKLQkJ
aXJvbmxha2VfZmRpX3BsbF9kaXNhYmxlKGludGVsX2NydGMpOworCQlpcm9ubGFrZV9mZGlfcGxs
X2Rpc2FibGUoY3J0Yyk7CiAJfQogCiAJaW50ZWxfc2V0X2NwdV9maWZvX3VuZGVycnVuX3JlcG9y
dGluZyhkZXZfcHJpdiwgcGlwZSwgdHJ1ZSk7CkBAIC02ODA0LDE0ICs2Nzk5LDEzIEBAIHN0YXRp
YyB2b2lkIGlyb25sYWtlX2NydGNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xk
X2NydGNfc3RhdGUsCiBzdGF0aWMgdm9pZCBoYXN3ZWxsX2NydGNfZGlzYWJsZShzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUsCiAJCQkJIHN0cnVjdCBpbnRlbF9hdG9taWNf
c3RhdGUgKnN0YXRlKQogewotCXN0cnVjdCBkcm1fY3J0YyAqY3J0YyA9IG9sZF9jcnRjX3N0YXRl
LT51YXBpLmNydGM7Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkx
NShjcnRjLT5kZXYpOwotCXN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0gdG9faW50ZWxf
Y3J0YyhjcnRjKTsKKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMob2xk
X2NydGNfc3RhdGUtPnVhcGkuY3J0Yyk7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gdG9faTkxNShjcnRjLT5iYXNlLmRldik7CiAJZW51bSB0cmFuc2NvZGVyIGNwdV90cmFu
c2NvZGVyID0gb2xkX2NydGNfc3RhdGUtPmNwdV90cmFuc2NvZGVyOwogCi0JaW50ZWxfZW5jb2Rl
cnNfZGlzYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7CisJaW50ZWxfZW5jb2RlcnNfZGlzYWJsZShz
dGF0ZSwgY3J0Yyk7CiAKLQlpbnRlbF9jcnRjX3ZibGFua19vZmYoaW50ZWxfY3J0Yyk7CisJaW50
ZWxfY3J0Y192Ymxhbmtfb2ZmKGNydGMpOwogCiAJLyogWFhYOiBEbyB0aGUgcGlwZSBhc3NlcnRp
b25zIGF0IHRoZSByaWdodCBwbGFjZSBmb3IgQlhUIERTSS4gKi8KIAlpZiAoIXRyYW5zY29kZXJf
aXNfZHNpKGNwdV90cmFuc2NvZGVyKSkKQEAgLTY4MjYsMTMgKzY4MjAsMTMgQEAgc3RhdGljIHZv
aWQgaGFzd2VsbF9jcnRjX2Rpc2FibGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm9sZF9jcnRj
X3N0YXRlLAogCWludGVsX2RzY19kaXNhYmxlKG9sZF9jcnRjX3N0YXRlKTsKIAogCWlmIChJTlRF
TF9HRU4oZGV2X3ByaXYpID49IDkpCi0JCXNreWxha2Vfc2NhbGVyX2Rpc2FibGUoaW50ZWxfY3J0
Yyk7CisJCXNreWxha2Vfc2NhbGVyX2Rpc2FibGUoY3J0Yyk7CiAJZWxzZQogCQlpcm9ubGFrZV9w
Zml0X2Rpc2FibGUob2xkX2NydGNfc3RhdGUpOwogCi0JaW50ZWxfZW5jb2RlcnNfcG9zdF9kaXNh
YmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKKwlpbnRlbF9lbmNvZGVyc19wb3N0X2Rpc2FibGUoc3Rh
dGUsIGNydGMpOwogCi0JaW50ZWxfZW5jb2RlcnNfcG9zdF9wbGxfZGlzYWJsZShzdGF0ZSwgaW50
ZWxfY3J0Yyk7CisJaW50ZWxfZW5jb2RlcnNfcG9zdF9wbGxfZGlzYWJsZShzdGF0ZSwgY3J0Yyk7
CiB9CiAKIHN0YXRpYyB2b2lkIGk5eHhfcGZpdF9lbmFibGUoY29uc3Qgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUpCkBAIC03MDM3LDEzICs3MDMxLDExIEBAIHN0YXRpYyB2b2lk
IG1vZGVzZXRfcHV0X3Bvd2VyX2RvbWFpbnMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LAogc3RhdGljIHZvaWQgdmFsbGV5dmlld19jcnRjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZSAqcGlwZV9jb25maWcsCiAJCQkJICAgc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAq
c3RhdGUpCiB7Ci0Jc3RydWN0IGRybV9jcnRjICpjcnRjID0gcGlwZV9jb25maWctPnVhcGkuY3J0
YzsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gY3J0Yy0+ZGV2OwotCXN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZGV2KTsKLQlzdHJ1Y3QgaW50ZWxfY3J0YyAq
aW50ZWxfY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Yyk7Ci0JZW51bSBwaXBlIHBpcGUgPSBpbnRl
bF9jcnRjLT5waXBlOworCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjID0gdG9faW50ZWxfY3J0Yyhw
aXBlX2NvbmZpZy0+dWFwaS5jcnRjKTsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYgPSB0b19pOTE1KGNydGMtPmJhc2UuZGV2KTsKKwllbnVtIHBpcGUgcGlwZSA9IGNydGMtPnBp
cGU7CiAKLQlpZiAoV0FSTl9PTihpbnRlbF9jcnRjLT5hY3RpdmUpKQorCWlmIChXQVJOX09OKGNy
dGMtPmFjdGl2ZSkpCiAJCXJldHVybjsKIAogCWlmIChpbnRlbF9jcnRjX2hhc19kcF9lbmNvZGVy
KHBpcGVfY29uZmlnKSkKQEAgLTcwNTksMjEgKzcwNTEsMjEgQEAgc3RhdGljIHZvaWQgdmFsbGV5
dmlld19jcnRjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcsCiAK
IAlpOXh4X3NldF9waXBlY29uZihwaXBlX2NvbmZpZyk7CiAKLQlpbnRlbF9jcnRjLT5hY3RpdmUg
PSB0cnVlOworCWNydGMtPmFjdGl2ZSA9IHRydWU7CiAKIAlpbnRlbF9zZXRfY3B1X2ZpZm9fdW5k
ZXJydW5fcmVwb3J0aW5nKGRldl9wcml2LCBwaXBlLCB0cnVlKTsKIAotCWludGVsX2VuY29kZXJz
X3ByZV9wbGxfZW5hYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKKwlpbnRlbF9lbmNvZGVyc19wcmVf
cGxsX2VuYWJsZShzdGF0ZSwgY3J0Yyk7CiAKIAlpZiAoSVNfQ0hFUlJZVklFVyhkZXZfcHJpdikp
IHsKLQkJY2h2X3ByZXBhcmVfcGxsKGludGVsX2NydGMsIHBpcGVfY29uZmlnKTsKLQkJY2h2X2Vu
YWJsZV9wbGwoaW50ZWxfY3J0YywgcGlwZV9jb25maWcpOworCQljaHZfcHJlcGFyZV9wbGwoY3J0
YywgcGlwZV9jb25maWcpOworCQljaHZfZW5hYmxlX3BsbChjcnRjLCBwaXBlX2NvbmZpZyk7CiAJ
fSBlbHNlIHsKLQkJdmx2X3ByZXBhcmVfcGxsKGludGVsX2NydGMsIHBpcGVfY29uZmlnKTsKLQkJ
dmx2X2VuYWJsZV9wbGwoaW50ZWxfY3J0YywgcGlwZV9jb25maWcpOworCQl2bHZfcHJlcGFyZV9w
bGwoY3J0YywgcGlwZV9jb25maWcpOworCQl2bHZfZW5hYmxlX3BsbChjcnRjLCBwaXBlX2NvbmZp
Zyk7CiAJfQogCi0JaW50ZWxfZW5jb2RlcnNfcHJlX2VuYWJsZShzdGF0ZSwgaW50ZWxfY3J0Yyk7
CisJaW50ZWxfZW5jb2RlcnNfcHJlX2VuYWJsZShzdGF0ZSwgY3J0Yyk7CiAKIAlpOXh4X3BmaXRf
ZW5hYmxlKHBpcGVfY29uZmlnKTsKIApAQCAtNzA4MiwxMiArNzA3NCwxMiBAQCBzdGF0aWMgdm9p
ZCB2YWxsZXl2aWV3X2NydGNfZW5hYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2Nv
bmZpZywKIAkvKiB1cGRhdGUgRFNQQ05UUiB0byBjb25maWd1cmUgZ2FtbWEgZm9yIHBpcGUgYm90
dG9tIGNvbG9yICovCiAJaW50ZWxfZGlzYWJsZV9wcmltYXJ5X3BsYW5lKHBpcGVfY29uZmlnKTsK
IAotCWRldl9wcml2LT5kaXNwbGF5LmluaXRpYWxfd2F0ZXJtYXJrcyhzdGF0ZSwgaW50ZWxfY3J0
Yyk7CisJZGV2X3ByaXYtPmRpc3BsYXkuaW5pdGlhbF93YXRlcm1hcmtzKHN0YXRlLCBjcnRjKTsK
IAlpbnRlbF9lbmFibGVfcGlwZShwaXBlX2NvbmZpZyk7CiAKIAlpbnRlbF9jcnRjX3ZibGFua19v
bihwaXBlX2NvbmZpZyk7CiAKLQlpbnRlbF9lbmNvZGVyc19lbmFibGUoc3RhdGUsIGludGVsX2Ny
dGMpOworCWludGVsX2VuY29kZXJzX2VuYWJsZShzdGF0ZSwgY3J0Yyk7CiB9CiAKIHN0YXRpYyB2
b2lkIGk5eHhfc2V0X3BsbF9kaXZpZGVycyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
Y3J0Y19zdGF0ZSkKQEAgLTcxMDIsMTMgKzcwOTQsMTEgQEAgc3RhdGljIHZvaWQgaTl4eF9zZXRf
cGxsX2RpdmlkZXJzKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQog
c3RhdGljIHZvaWQgaTl4eF9jcnRjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlw
ZV9jb25maWcsCiAJCQkgICAgIHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQogewot
CXN0cnVjdCBkcm1fY3J0YyAqY3J0YyA9IHBpcGVfY29uZmlnLT51YXBpLmNydGM7Ci0Jc3RydWN0
IGRybV9kZXZpY2UgKmRldiA9IGNydGMtPmRldjsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYgPSB0b19pOTE1KGRldik7Ci0Jc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMg
PSB0b19pbnRlbF9jcnRjKGNydGMpOwotCWVudW0gcGlwZSBwaXBlID0gaW50ZWxfY3J0Yy0+cGlw
ZTsKKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMocGlwZV9jb25maWct
PnVhcGkuY3J0Yyk7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkx
NShjcnRjLT5iYXNlLmRldik7CisJZW51bSBwaXBlIHBpcGUgPSBjcnRjLT5waXBlOwogCi0JaWYg
KFdBUk5fT04oaW50ZWxfY3J0Yy0+YWN0aXZlKSkKKwlpZiAoV0FSTl9PTihjcnRjLT5hY3RpdmUp
KQogCQlyZXR1cm47CiAKIAlpOXh4X3NldF9wbGxfZGl2aWRlcnMocGlwZV9jb25maWcpOwpAQCAt
NzEyMSwxNCArNzExMSwxNCBAQCBzdGF0aWMgdm9pZCBpOXh4X2NydGNfZW5hYmxlKHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZywKIAogCWk5eHhfc2V0X3BpcGVjb25mKHBpcGVf
Y29uZmlnKTsKIAotCWludGVsX2NydGMtPmFjdGl2ZSA9IHRydWU7CisJY3J0Yy0+YWN0aXZlID0g
dHJ1ZTsKIAogCWlmICghSVNfR0VOKGRldl9wcml2LCAyKSkKIAkJaW50ZWxfc2V0X2NwdV9maWZv
X3VuZGVycnVuX3JlcG9ydGluZyhkZXZfcHJpdiwgcGlwZSwgdHJ1ZSk7CiAKLQlpbnRlbF9lbmNv
ZGVyc19wcmVfZW5hYmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKKwlpbnRlbF9lbmNvZGVyc19wcmVf
ZW5hYmxlKHN0YXRlLCBjcnRjKTsKIAotCWk5eHhfZW5hYmxlX3BsbChpbnRlbF9jcnRjLCBwaXBl
X2NvbmZpZyk7CisJaTl4eF9lbmFibGVfcGxsKGNydGMsIHBpcGVfY29uZmlnKTsKIAogCWk5eHhf
cGZpdF9lbmFibGUocGlwZV9jb25maWcpOwogCkBAIC03MTM4LDE0ICs3MTI4LDE0IEBAIHN0YXRp
YyB2b2lkIGk5eHhfY3J0Y19lbmFibGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29u
ZmlnLAogCWludGVsX2Rpc2FibGVfcHJpbWFyeV9wbGFuZShwaXBlX2NvbmZpZyk7CiAKIAlpZiAo
ZGV2X3ByaXYtPmRpc3BsYXkuaW5pdGlhbF93YXRlcm1hcmtzKQotCQlkZXZfcHJpdi0+ZGlzcGxh
eS5pbml0aWFsX3dhdGVybWFya3Moc3RhdGUsIGludGVsX2NydGMpOworCQlkZXZfcHJpdi0+ZGlz
cGxheS5pbml0aWFsX3dhdGVybWFya3Moc3RhdGUsIGNydGMpOwogCWVsc2UKLQkJaW50ZWxfdXBk
YXRlX3dhdGVybWFya3MoaW50ZWxfY3J0Yyk7CisJCWludGVsX3VwZGF0ZV93YXRlcm1hcmtzKGNy
dGMpOwogCWludGVsX2VuYWJsZV9waXBlKHBpcGVfY29uZmlnKTsKIAogCWludGVsX2NydGNfdmJs
YW5rX29uKHBpcGVfY29uZmlnKTsKIAotCWludGVsX2VuY29kZXJzX2VuYWJsZShzdGF0ZSwgaW50
ZWxfY3J0Yyk7CisJaW50ZWxfZW5jb2RlcnNfZW5hYmxlKHN0YXRlLCBjcnRjKTsKIH0KIAogc3Rh
dGljIHZvaWQgaTl4eF9wZml0X2Rpc2FibGUoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUg
Km9sZF9jcnRjX3N0YXRlKQpAQCAtNzE2NiwxMSArNzE1Niw5IEBAIHN0YXRpYyB2b2lkIGk5eHhf
cGZpdF9kaXNhYmxlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0
ZSkKIHN0YXRpYyB2b2lkIGk5eHhfY3J0Y19kaXNhYmxlKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpvbGRfY3J0Y19zdGF0ZSwKIAkJCSAgICAgIHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0
YXRlKQogewotCXN0cnVjdCBkcm1fY3J0YyAqY3J0YyA9IG9sZF9jcnRjX3N0YXRlLT51YXBpLmNy
dGM7Ci0Jc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtPmRldjsKLQlzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGRldik7Ci0Jc3RydWN0IGludGVsX2NydGMg
KmludGVsX2NydGMgPSB0b19pbnRlbF9jcnRjKGNydGMpOwotCWVudW0gcGlwZSBwaXBlID0gaW50
ZWxfY3J0Yy0+cGlwZTsKKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMo
b2xkX2NydGNfc3RhdGUtPnVhcGkuY3J0Yyk7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2ID0gdG9faTkxNShjcnRjLT5iYXNlLmRldik7CisJZW51bSBwaXBlIHBpcGUgPSBjcnRj
LT5waXBlOwogCiAJLyoKIAkgKiBPbiBnZW4yIHBsYW5lcyBhcmUgZG91YmxlIGJ1ZmZlcmVkIGJ1
dCB0aGUgcGlwZSBpc24ndCwgc28gd2UgbXVzdApAQCAtNzE3OSwxNSArNzE2NywxNSBAQCBzdGF0
aWMgdm9pZCBpOXh4X2NydGNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2Ny
dGNfc3RhdGUsCiAJaWYgKElTX0dFTihkZXZfcHJpdiwgMikpCiAJCWludGVsX3dhaXRfZm9yX3Zi
bGFuayhkZXZfcHJpdiwgcGlwZSk7CiAKLQlpbnRlbF9lbmNvZGVyc19kaXNhYmxlKHN0YXRlLCBp
bnRlbF9jcnRjKTsKKwlpbnRlbF9lbmNvZGVyc19kaXNhYmxlKHN0YXRlLCBjcnRjKTsKIAotCWlu
dGVsX2NydGNfdmJsYW5rX29mZihpbnRlbF9jcnRjKTsKKwlpbnRlbF9jcnRjX3ZibGFua19vZmYo
Y3J0Yyk7CiAKIAlpbnRlbF9kaXNhYmxlX3BpcGUob2xkX2NydGNfc3RhdGUpOwogCiAJaTl4eF9w
Zml0X2Rpc2FibGUob2xkX2NydGNfc3RhdGUpOwogCi0JaW50ZWxfZW5jb2RlcnNfcG9zdF9kaXNh
YmxlKHN0YXRlLCBpbnRlbF9jcnRjKTsKKwlpbnRlbF9lbmNvZGVyc19wb3N0X2Rpc2FibGUoc3Rh
dGUsIGNydGMpOwogCiAJaWYgKCFpbnRlbF9jcnRjX2hhc190eXBlKG9sZF9jcnRjX3N0YXRlLCBJ
TlRFTF9PVVRQVVRfRFNJKSkgewogCQlpZiAoSVNfQ0hFUlJZVklFVyhkZXZfcHJpdikpCkBAIC03
MTk4LDEzICs3MTg2LDEzIEBAIHN0YXRpYyB2b2lkIGk5eHhfY3J0Y19kaXNhYmxlKHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwKIAkJCWk5eHhfZGlzYWJsZV9wbGwob2xk
X2NydGNfc3RhdGUpOwogCX0KIAotCWludGVsX2VuY29kZXJzX3Bvc3RfcGxsX2Rpc2FibGUoc3Rh
dGUsIGludGVsX2NydGMpOworCWludGVsX2VuY29kZXJzX3Bvc3RfcGxsX2Rpc2FibGUoc3RhdGUs
IGNydGMpOwogCiAJaWYgKCFJU19HRU4oZGV2X3ByaXYsIDIpKQogCQlpbnRlbF9zZXRfY3B1X2Zp
Zm9fdW5kZXJydW5fcmVwb3J0aW5nKGRldl9wcml2LCBwaXBlLCBmYWxzZSk7CiAKIAlpZiAoIWRl
dl9wcml2LT5kaXNwbGF5LmluaXRpYWxfd2F0ZXJtYXJrcykKLQkJaW50ZWxfdXBkYXRlX3dhdGVy
bWFya3MoaW50ZWxfY3J0Yyk7CisJCWludGVsX3VwZGF0ZV93YXRlcm1hcmtzKGNydGMpOwogCiAJ
LyogY2xvY2sgdGhlIHBpcGUgZG93biB0byA2NDB4NDgwQDYwIHRvIHBvdGVudGlhbGx5IHNhdmUg
cG93ZXIgKi8KIAlpZiAoSVNfSTgzMChkZXZfcHJpdikpCi0tIAoyLjIzLjAKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxp
c3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B8396F84F9
	for <lists+intel-gfx@lfdr.de>; Tue, 12 Nov 2019 01:14:23 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7B2776EA0E;
	Tue, 12 Nov 2019 00:14:21 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1DB956EA0E
 for <intel-gfx@lists.freedesktop.org>; Tue, 12 Nov 2019 00:14:20 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 11 Nov 2019 16:14:19 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,294,1569308400"; d="scan'208";a="197856488"
Received: from mdroper-desk1.fm.intel.com (HELO
 mdroper-desk1.amr.corp.intel.com) ([10.1.27.135])
 by orsmga008.jf.intel.com with ESMTP; 11 Nov 2019 16:14:18 -0800
Date: Mon, 11 Nov 2019 16:15:25 -0800
From: Matt Roper <matthew.d.roper@intel.com>
To: Stanislav Lisovskiy <stanislav.lisovskiy@intel.com>
Message-ID: <20191112001525.GB2262@mdroper-desk1.amr.corp.intel.com>
References: <20191107153037.17640-1-stanislav.lisovskiy@intel.com>
 <20191107153037.17640-2-stanislav.lisovskiy@intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191107153037.17640-2-stanislav.lisovskiy@intel.com>
User-Agent: Mutt/1.12.1 (2019-06-15)
Subject: Re: [Intel-gfx] [PATCH v10 1/2] drm/i915: Refactor
 intel_can_enable_sagv
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCBOb3YgMDcsIDIwMTkgYXQgMDU6MzA6MzZQTSArMDIwMCwgU3RhbmlzbGF2IExpc292
c2tpeSB3cm90ZToKPiBDdXJyZW50bHkgaW50ZWxfY2FuX2VuYWJsZV9zYWd2IGZ1bmN0aW9uIGNv
bnRhaW5zCj4gYSBtaXggb2Ygd29ya2Fyb3VuZHMgZm9yIGRpZmZlcmVudCBwbGF0Zm9ybXMKPiBz
b21lIG9mIHRoZW0gYXJlIG5vdCB2YWxpZCBmb3IgZ2VucyA+PSAxMSBhbHJlYWR5LAo+IHNvIGxl
dHMgc3BsaXQgaXQgaW50byBzZXBhcmF0ZSBmdW5jdGlvbnMuCj4gCj4gdjI6Cj4gICAgIC0gUmV3
b3JrIHdhdGVybWFyayBjYWxjdWxhdGlvbiBhbGdvcml0aG0gdG8KPiAgICAgICBhdHRlbXB0IHRv
IGNhbGN1bGF0ZSBMZXZlbCAwIHdhdGVybWFyawo+ICAgICAgIHdpdGggYWRkZWQgc2FndiBibG9j
ayB0aW1lIGxhdGVuY3kgYW5kCj4gICAgICAgY2hlY2sgaWYgaXQgZml0cyBpbiBEQnVmIGluIG9y
ZGVyIHRvCj4gICAgICAgZGV0ZXJtaW5lIGlmIFNBR1YgY2FuIGJlIGVuYWJsZWQgYWxyZWFkeQo+
ICAgICAgIGF0IHRoaXMgc3RhZ2UsIGp1c3QgYXMgQlNwZWMgNDkzMjUgc3RhdGVzLgo+ICAgICAg
IGlmIHRoYXQgZmFpbHMgcm9sbGJhY2sgdG8gdXN1YWwgTGV2ZWwgMAo+ICAgICAgIGxhdGVuY3kg
YW5kIGRpc2FibGUgU0FHVi4KPiAgICAgLSBSZW1vdmUgdW5uZWVkZWQgdGFicyhKYW1lcyBBdXNt
dXMpCj4gCj4gdjM6IFJlYmFzZWQgdGhlIHBhdGNoCj4gCj4gdjQ6IC0gQWRkZWQgYmFjayBpbnRl
cmxhY2VkIGNoZWNrIGZvciBHZW4xMiBhbmQKPiAgICAgICBhZGRlZCBzZXBhcmF0ZSBmdW5jdGlv
biBmb3IgVEdMIFNBR1YgY2hlY2sKPiAgICAgICAodGhhbmtzIHRvIEphbWVzIEF1c211cyBmb3Ig
c3BvdHRpbmcpCj4gICAgIC0gUmVtb3ZlZCB1bm5lZWRlZCBnZW4gY2hlY2sKPiAgICAgLSBFeHRy
YWN0ZWQgR2VuMTIgU0FHViBkZWNpc2lvbiBtYWtpbmcgY29kZQo+ICAgICAgIHRvIGEgc2VwYXJh
dGUgZnVuY3Rpb24gZnJvbSBza2xfY29tcHV0ZV93bQo+IAo+IHY1OiAtIEFkZGVkIFNBR1YgZ2xv
YmFsIHN0YXRlIHRvIGRldl9wcml2LCBiZWNhdXNlCj4gICAgICAgd2UgbmVlZCB0byB0cmFjayBh
bGwgcGlwZXMsIG5vdCBvbmx5IHRob3NlCj4gICAgICAgaW4gYXRvbWljIHN0YXRlLiBFYWNoIHBp
cGUgaGFzIG5vdyBjb3JyZXNwb25kZW50Cj4gICAgICAgYml0IG1hc2sgcmVmbGVjdGluZywgd2hl
dGhlciBpdCBjYW4gdG9sZXJhdGUKPiAgICAgICBTQUdWIG9yIG5vdCh0aGFua3MgdG8gVmlsbGUg
U3lyamFsYSBmb3Igc3VnZ2VzdGlvbnMpLgo+ICAgICAtIE5vdyB1c2luZyBhY3RpdmUgZmxhZyBp
bnN0ZWFkIG9mIGVuYWJsZSBpbiBjcmMKPiAgICAgICB1c2FnZSBjaGVjay4KPiAKPiB2NjogLSBG
aXhlZCByZWJhc2UgY29uZmxpY3RzCj4gCj4gU2lnbmVkLW9mZi1ieTogU3RhbmlzbGF2IExpc292
c2tpeSA8c3RhbmlzbGF2Lmxpc292c2tpeUBpbnRlbC5jb20+Cj4gQ2M6IFZpbGxlIFN5cmrDpGzD
pCA8dmlsbGUuc3lyamFsYUBpbnRlbC5jb20+Cj4gQ2M6IEphbWVzIEF1c211cyA8amFtZXMuYXVz
bXVzQGludGVsLmNvbT4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5LmMgIHwgICA0ICsKPiAgLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eV90eXBlcy5oICAgIHwgICA5ICsKPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAg
ICAgICAgICAgICAgIHwgICA2ICsKPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyAg
ICAgICAgICAgICAgIHwgMjk2ICsrKysrKysrKysrKysrKysrLQo+ICA0IGZpbGVzIGNoYW5nZWQs
IDMwMyBpbnNlcnRpb25zKCspLCAxMiBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwo+IGluZGV4IDg3NmZjMjU5NjhiZi4uN2Vh
MWU3NTE4YWI2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5LmMKPiBAQCAtMTQ4NTUsNiArMTQ4NTUsMTAgQEAgc3RhdGljIHZvaWQgaW50ZWxfYXRv
bWljX2NvbW1pdF90YWlsKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQo+ICAJCWlm
IChkZXZfcHJpdi0+ZGlzcGxheS5vcHRpbWl6ZV93YXRlcm1hcmtzKQo+ICAJCQlkZXZfcHJpdi0+
ZGlzcGxheS5vcHRpbWl6ZV93YXRlcm1hcmtzKHN0YXRlLAo+ICAJCQkJCQkJICAgICAgbmV3X2Ny
dGNfc3RhdGUpOwo+ICsJCWlmIChzdGF0ZS0+Y3J0Y19zYWd2X21hc2sgJiBCSVQoY3J0Yy0+cGlw
ZSkpCj4gKwkJCWRldl9wcml2LT5jcnRjX3NhZ3ZfbWFzayB8PSBCSVQoY3J0Yy0+cGlwZSk7Cj4g
KwkJZWxzZQo+ICsJCQlkZXZfcHJpdi0+Y3J0Y19zYWd2X21hc2sgJj0gfkJJVChjcnRjLT5waXBl
KTsKPiAgCX0KPiAgCj4gIAlmb3JfZWFjaF9vbGRuZXdfaW50ZWxfY3J0Y19pbl9zdGF0ZShzdGF0
ZSwgY3J0Yywgb2xkX2NydGNfc3RhdGUsIG5ld19jcnRjX3N0YXRlLCBpKSB7Cj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgKPiBpbmRl
eCBmYWRkOTg1M2Y5NjYuLmZiMjc0NTM4YWYyMyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCj4gQEAgLTQ5MCw2ICs0OTAs
MTQgQEAgc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSB7Cj4gIAkgKi8KPiAgCXU4IGFjdGl2ZV9w
aXBlX2NoYW5nZXM7Cj4gIAo+ICsJLyoKPiArCSAqIENvbnRhaW5zIGEgbWFzayB3aGljaCByZWZs
ZWN0cyB3aGV0aGVyIGNvcnJlc3BvbmRlbnQgcGlwZQo+ICsJICogY2FuIHRvbGVyYXRlIFNBR1Yg
b3Igbm90LCBzbyB0aGF0IHdlIGNhbiBtYWtlIGEgZGVjaXNpb24KPiArCSAqIGF0IGF0b21pY19j
b21taXRfdGFpbCBzdGFnZSwgd2hldGhlciB3ZSBlbmFibGUgaXQgb3Igbm90Cj4gKwkgKiBiYXNl
ZCBvbiBnbG9iYWwgc3RhdGUgaW4gZGV2X3ByaXYuCj4gKwkgKi8KPiArCXUzMiBjcnRjX3NhZ3Zf
bWFzazsKPiArCj4gIAl1OCBhY3RpdmVfcGlwZXM7Cj4gIAkvKiBtaW5pbXVtIGFjY2VwdGFibGUg
Y2RjbGsgZm9yIGVhY2ggcGlwZSAqLwo+ICAJaW50IG1pbl9jZGNsa1tJOTE1X01BWF9QSVBFU107
Cj4gQEAgLTY3MCw2ICs2NzgsNyBAQCBzdHJ1Y3Qgc2tsX3BsYW5lX3dtIHsKPiAgCXN0cnVjdCBz
a2xfd21fbGV2ZWwgd21bOF07Cj4gIAlzdHJ1Y3Qgc2tsX3dtX2xldmVsIHV2X3dtWzhdOwo+ICAJ
c3RydWN0IHNrbF93bV9sZXZlbCB0cmFuc193bTsKPiArCXN0cnVjdCBza2xfd21fbGV2ZWwgc2Fn
dl93bTA7Cj4gIAlib29sIGlzX3BsYW5hcjsKPiAgfTsKPiAgCj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5oCj4gaW5kZXggN2UwZjY3YmFiZTIwLi40ZjRlMmU4Mzk1MTMgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZHJ2LmgKPiBAQCAtMTE3Niw2ICsxMTc2LDEyIEBAIHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlIHsKPiAgCj4gIAl1MzIgc2Fndl9ibG9ja190aW1lX3VzOwo+ICAKPiArCS8qCj4gKwkgKiBD
b250YWlucyBhIGJpdCBtYXNrLCB3aGV0aGVyIGNvcnJlc3BvbmRlbnQKPiArCSAqIHBpcGUgYWxs
b3dzIFNBR1Ygb3Igbm90Lgo+ICsJICovCj4gKwl1MzIgY3J0Y19zYWd2X21hc2s7Cj4gKwo+ICAJ
c3RydWN0IHsKPiAgCQkvKgo+ICAJCSAqIFJhdyB3YXRlcm1hcmsgbGF0ZW5jeSB2YWx1ZXM6Cj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9wbS5jCj4gaW5kZXggMmQzODllNDM3ZTg3Li5jNzkyZGQxNjg3NDIg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYwo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKPiBAQCAtMzc0MCw3ICszNzQwLDcgQEAgaW50
ZWxfZGlzYWJsZV9zYWd2KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgCXJl
dHVybiAwOwo+ICB9Cj4gIAo+IC1ib29sIGludGVsX2Nhbl9lbmFibGVfc2FndihzdHJ1Y3QgaW50
ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKPiArc3RhdGljIHZvaWQgc2tsX3NldF9zYWd2X21hc2so
c3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gIHsKPiAgCXN0cnVjdCBkcm1fZGV2
aWNlICpkZXYgPSBzdGF0ZS0+YmFzZS5kZXY7Cj4gIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYgPSB0b19pOTE1KGRldik7Cj4gQEAgLTM3NTAsMjEgKzM3NTAsMjMgQEAgYm9vbCBp
bnRlbF9jYW5fZW5hYmxlX3NhZ3Yoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4g
IAllbnVtIHBpcGUgcGlwZTsKPiAgCWludCBsZXZlbCwgbGF0ZW5jeTsKPiAgCj4gKwlzdGF0ZS0+
Y3J0Y19zYWd2X21hc2sgPSAwOwo+ICsKPiAgCWlmICghaW50ZWxfaGFzX3NhZ3YoZGV2X3ByaXYp
KQo+IC0JCXJldHVybiBmYWxzZTsKPiArCQlyZXR1cm47Cj4gIAo+ICAJLyoKPiAgCSAqIElmIHRo
ZXJlIGFyZSBubyBhY3RpdmUgQ1JUQ3MsIG5vIGFkZGl0aW9uYWwgY2hlY2tzIG5lZWQgYmUgcGVy
Zm9ybWVkCj4gIAkgKi8KPiAgCWlmIChod2VpZ2h0OChzdGF0ZS0+YWN0aXZlX3BpcGVzKSA9PSAw
KQo+IC0JCXJldHVybiB0cnVlOwo+ICsJCXJldHVybjsKPiAgCj4gIAkvKgo+ICAJICogU0tMKyB3
b3JrYXJvdW5kOiBic3BlYyByZWNvbW1lbmRzIHdlIGRpc2FibGUgU0FHViB3aGVuIHdlIGhhdmUK
PiAgCSAqIG1vcmUgdGhlbiBvbmUgcGlwZSBlbmFibGVkCj4gIAkgKi8KPiAgCWlmIChod2VpZ2h0
OChzdGF0ZS0+YWN0aXZlX3BpcGVzKSA+IDEpCj4gLQkJcmV0dXJuIGZhbHNlOwo+ICsJCXJldHVy
bjsKPiAgCj4gIAkvKiBTaW5jZSB3ZSdyZSBub3cgZ3VhcmFudGVlZCB0byBvbmx5IGhhdmUgb25l
IGFjdGl2ZSBDUlRDLi4uICovCj4gIAlwaXBlID0gZmZzKHN0YXRlLT5hY3RpdmVfcGlwZXMpIC0g
MTsKPiBAQCAtMzc3Miw3ICszNzc0LDcgQEAgYm9vbCBpbnRlbF9jYW5fZW5hYmxlX3NhZ3Yoc3Ry
dWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gIAljcnRjX3N0YXRlID0gdG9faW50ZWxf
Y3J0Y19zdGF0ZShjcnRjLT5iYXNlLnN0YXRlKTsKPiAgCj4gIAlpZiAoY3J0Y19zdGF0ZS0+aHcu
YWRqdXN0ZWRfbW9kZS5mbGFncyAmIERSTV9NT0RFX0ZMQUdfSU5URVJMQUNFKQo+IC0JCXJldHVy
biBmYWxzZTsKPiArCQlyZXR1cm47Cj4gIAo+ICAJZm9yX2VhY2hfaW50ZWxfcGxhbmVfb25fY3J0
YyhkZXYsIGNydGMsIHBsYW5lKSB7Cj4gIAkJc3RydWN0IHNrbF9wbGFuZV93bSAqd20gPQo+IEBA
IC0zODAwLDkgKzM4MDIsMTI3IEBAIGJvb2wgaW50ZWxfY2FuX2VuYWJsZV9zYWd2KHN0cnVjdCBp
bnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQo+ICAJCSAqIGNhbid0IGVuYWJsZSBTQUdWLgo+ICAJ
CSAqLwo+ICAJCWlmIChsYXRlbmN5IDwgZGV2X3ByaXYtPnNhZ3ZfYmxvY2tfdGltZV91cykKPiAt
CQkJcmV0dXJuIGZhbHNlOwo+ICsJCQlyZXR1cm47Cj4gIAl9Cj4gIAo+ICsJc3RhdGUtPmNydGNf
c2Fndl9tYXNrIHw9IEJJVChjcnRjLT5waXBlKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgdGds
X3NldF9zYWd2X21hc2soc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpOwo+ICsKPiAr
c3RhdGljIHZvaWQgaWNsX3NldF9zYWd2X21hc2soc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAq
c3RhdGUpCj4gK3sKPiArCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBzdGF0ZS0+YmFzZS5kZXY7
Cj4gKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGRldik7Cj4g
KwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YzsKPiArCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpu
ZXdfY3J0Y19zdGF0ZTsKPiArCWludCBsZXZlbCwgbGF0ZW5jeTsKPiArCWludCBpOwo+ICsJaW50
IHBsYW5lX2lkOwo+ICsKPiArCXN0YXRlLT5jcnRjX3NhZ3ZfbWFzayA9IDA7Cj4gKwo+ICsJaWYg
KCFpbnRlbF9oYXNfc2FndihkZXZfcHJpdikpCj4gKwkJcmV0dXJuOwo+ICsKPiArCS8qCj4gKwkg
KiBJZiB0aGVyZSBhcmUgbm8gYWN0aXZlIENSVENzLCBubyBhZGRpdGlvbmFsIGNoZWNrcyBuZWVk
IGJlIHBlcmZvcm1lZAo+ICsJICovCj4gKwlpZiAoaHdlaWdodDgoc3RhdGUtPmFjdGl2ZV9waXBl
cykgPT0gMCkKPiArCQlyZXR1cm47Cj4gKwo+ICsJZm9yX2VhY2hfbmV3X2ludGVsX2NydGNfaW5f
c3RhdGUoc3RhdGUsIGNydGMsCj4gKwkJCQkJICAgICBuZXdfY3J0Y19zdGF0ZSwgaSkgewo+ICsJ
CXVuc2lnbmVkIGludCBmbGFncyA9IGNydGMtPmJhc2Uuc3RhdGUtPmFkanVzdGVkX21vZGUuZmxh
Z3M7Cj4gKwkJYm9vbCBjYW5fc2FndjsKPiArCj4gKwkJaWYgKGZsYWdzICYgRFJNX01PREVfRkxB
R19JTlRFUkxBQ0UpCj4gKwkJCWNvbnRpbnVlOwo+ICsKPiArCQlpZiAoIW5ld19jcnRjX3N0YXRl
LT5iYXNlLmFjdGl2ZSkKPiArCQkJY29udGludWU7Cj4gKwo+ICsJCWNhbl9zYWd2ID0gdHJ1ZTsK
PiArCQlmb3JfZWFjaF9wbGFuZV9pZF9vbl9jcnRjKGNydGMsIHBsYW5lX2lkKSB7Cj4gKwkJCXN0
cnVjdCBza2xfcGxhbmVfd20gKndtID0KPiArCQkJCSZuZXdfY3J0Y19zdGF0ZS0+d20uc2tsLm9w
dGltYWwucGxhbmVzW3BsYW5lX2lkXTsKPiArCj4gKwkJCS8qIFNraXAgdGhpcyBwbGFuZSBpZiBp
dCdzIG5vdCBlbmFibGVkICovCj4gKwkJCWlmICghd20tPndtWzBdLnBsYW5lX2VuKQo+ICsJCQkJ
Y29udGludWU7Cj4gKwo+ICsJCQkvKiBGaW5kIHRoZSBoaWdoZXN0IGVuYWJsZWQgd20gbGV2ZWwg
Zm9yIHRoaXMgcGxhbmUgKi8KPiArCQkJZm9yIChsZXZlbCA9IGlsa193bV9tYXhfbGV2ZWwoZGV2
X3ByaXYpOwo+ICsJCQkgICAgICF3bS0+d21bbGV2ZWxdLnBsYW5lX2VuOyAtLWxldmVsKSB7Cj4g
KwkJCX0KPiArCj4gKwkJCWxhdGVuY3kgPSBkZXZfcHJpdi0+d20uc2tsX2xhdGVuY3lbbGV2ZWxd
Owo+ICsKPiArCQkJLyoKPiArCQkJICogSWYgYW55IG9mIHRoZSBwbGFuZXMgb24gdGhpcyBwaXBl
IGRvbid0IGVuYWJsZQo+ICsJCQkgKiB3bSBsZXZlbHMgdGhhdCBpbmN1ciBtZW1vcnkgbGF0ZW5j
aWVzIGhpZ2hlciB0aGFuCj4gKwkJCSAqIHNhZ3ZfYmxvY2tfdGltZV91cyB3ZSBjYW4ndCBlbmFi
bGUgU0FHVi4KPiArCQkJICovCj4gKwkJCWlmIChsYXRlbmN5IDwgZGV2X3ByaXYtPnNhZ3ZfYmxv
Y2tfdGltZV91cykgewo+ICsJCQkJY2FuX3NhZ3YgPSBmYWxzZTsKPiArCQkJCWJyZWFrOwo+ICsJ
CQl9CgpJIGZpbmQgdGhlIHdvcmRpbmcgb2YgdGhlIGJzcGVjICgiaWYgYW55IGVuYWJsZWQgcGxh
bmUgd2lsbCBub3QgYmUgYWJsZQp0byBlbmFibGUgd2F0ZXJtYXJrcyBmb3IgbWVtb3J5IGxhdGVu
Y3kgPj0gU0FHViBibG9jayB0aW1lIikgaW4gdGhpcwphcmVhIHNvbWV3aGF0IGFtYmlndW91cy4g
IFRvIG1lIHRoYXQgd29yZGluZyBzb3VuZHMgbGlrZSB0aGV5IHdhbnQgdXMgdG8KY2FsY3VsYXRl
IHRoZSB3YXRlcm1hcmtzIG9uZSBtb3JlIHRpbWUsIGJ1dCB1c2luZyB0aGUgU0FHViBibG9ja2lu
ZyB0aW1lCnJhdGhlciB0aGFuIGFueSBvZiB0aGUgOCBsYXRlbmN5IHZhbHVlcyB3ZSByZWNlaXZl
ZCBmcm9tIHRoZSBwY29kZSAtLS0KaWYgdGhlIGNhbGN1bGF0ZWQgd2F0ZXJtYXJrIHZhbHVlIGZv
ciB0aGF0ICJzYWd2IGxldmVsIiBmaXRzIHdpdGhpbiB0aGUKRERCIGFsbG9jYXRpb24gdGhlbiB3
ZSBjYW4gZW5hYmxlIFNBR1YsIG90aGVyd2lzZSB3ZSBjYW4ndC4KCllvdXIgYXBwcm9hY2ggaGVy
ZSBzb21ld2hhdCBhcHByb3hpbWF0ZXMgdGhhdC4gIElmIHRoZSBoaWdoZXN0IHdhdGVybWFyawps
ZXZlbCB3ZSBlbmFibGVkIGhhZCBhIGxhdGVuY3kgaGlnaGVyIHRoYW4gdGhlIFNBR1YgYmxvY2tp
bmcgdGltZSwgdGhlbgp3ZSBhdXRvbWF0aWNhbGx5IGtub3cgd2UgYWxzbyB3b3VsZCBoYXZlIGhh
ZCBhIHZhbGlkIHdhdGVybWFyayB2YWx1ZSBmb3IKYSBsb3dlciBzYWd2IGxhdGVuY3kuICBCdXQg
aWYgdGhlIGhpZ2hlc3QgbGF0ZW5jeSB3ZSBlbmFibGVkIGhhcyBhIGxvd2VyCmxhdGVuY3ksIHdl
IGNhbid0IHNheSBmb3IgY2VydGFpbiB3aGV0aGVyIHRoZSBTQUdWJ3MgYmxvY2tpbmcgdGltZSB3
b3VsZApoYXZlIGxlZCB0byB2YWxpZCBvciBpbnZhbGlkIHdhdGVybWFya3MuICBJZiB0aGUgZmly
c3Qgd2F0ZXJtYXJrIGxldmVsCndlIGZhaWxlZCBvbiBhbHNvIGhhZCBhIGxvd2VyIGxhdGVuY3kg
dGhhbiB0aGUgU0FHViB0aW1lIHRoZW4gd2UgY2FuCmNvbmNsdWRlIHRoYXQgdGhlIFNBR1YgY2Fu
J3QgYmUgZW5hYmxlZC4gIEJ1dCBpZiB0aGUgbmV4dCBsZXZlbCB1cCBoYWQgYQpsYXRlbmN5IGhp
Z2hlciB0aGFuIHRoZSBibG9ja2luZyB0aW1lIChpLmUuLCBnb29kIDwgU0FHViA8IGJhZCksIHdl
CmNhbid0IHJlYWxseSB0ZWxsIHdoZXRoZXIgU0FHViB3YXMgcG9zc2libGUgd2l0aG91dCBhY3R1
YWxseSBkb2luZyB0aGUKZXh0cmEgd2F0ZXJtYXJrIGNhbGN1bGF0aW9uLgoKQnV0IGV2ZW4gZ2l2
ZW4gdGhlIGFib3ZlLCB0aGUgYnNwZWMgc3VnZ2VzdGlvbiBzZWVtcyBzb21ld2hhdCBzdXJwcmlz
aW5nCnRvIG1lLiAgSW50dWl0aXZlbHkgaXQgc2VlbXMgbGlrZSBTQUdWIHdvdWxkIGJlIGludHJv
ZHVjaW5nIGFuCmFkZGl0aW9uYWwgZGVsYXkgb24gdG9wIG9mIHRoZSBleGlzdGluZyBtZW1vcnkg
ZmV0Y2ggbGF0ZW5jeSwgbm90CnJlcGxhY2luZyB0aGUgbGF0ZW5jeSBlbnRpcmVseS4gIEludHVp
dGl2ZWx5IHRoZSBhbGdvcml0aG0gc3VnZ2VzdGVkIGZvcgpUR0wgbWFrZXMgc2Vuc2UgdG8gbWUg
KGkuZS4sIGFkZCB0aGUgU0FHVidzIGV4dHJhIGRlbGF5IHRvIHRoZSBXTTAKbGF0ZW5jeSB0byBl
bnN1cmUgdGhhdCByZWd1bGFyIGxhdGVuY3kgcGx1cyBhbiBleHRyYSBTQUdWIGRlbGF5IGRvZXNu
J3QKbGVhZCB1cyB0byBydW4gZHJ5KSwgYnV0IHRoYXQncyBub3Qgd2hhdCB0aGUgYnNwZWMgY2Fs
bHMgZm9yIG9uIElDTC4KSSdtIG5vdCByZWFsbHkgc3VyZSB3aGV0aGVyIHRoYXQncyB0cnVseSBh
biBpbnRlbnRpb25hbCBiZWhhdmlvciBjaGFuZ2UKYmV0d2VlbiBwbGF0Zm9ybXMgb3Igd2hldGhl
ciB0aGUgVEdMIGJzcGVjIHNlY3Rpb24gZG9lcyBqdXN0IGEgYmV0dGVyCmpvYiBvZiBleHBsYWlu
aW5nIHdoYXQgd2FzIHN1cHBvc2VkIHRvIGJlIGRvbmUgYW5kIGNsYXJpZnlpbmcgdGhlCmxhbmd1
YWdlLgoKQW55d2F5LCB3ZSBzaG91bGQgcHJvYmFibHkgdHJ1c3QgdGhlIGJzcGVjIGZvciBub3cs
IHNvIGl0IHNlZW1zIHRvIG1lCmxpa2Ugd2Ugc2hvdWxkIGFkZCBhICJmYWtlIiB3YXRlcm1hcmsg
bGV2ZWwgYXNzb2NpYXRlZCB3aXRoIHRoZSBTQUdWCmJsb2NrIHRpbWUgYW5kIGV4cGxpY2l0bHkg
Y2FsY3VsYXRlIHRoYXQgYXMgZW5hYmxlZC9kaXNhYmxlZCBhbnl0aW1lIHdlCmhhdmUgYSBnb29k
IDwgU0FHViA8IGJhZCBzaXR1YXRpb24uCgo+ICsJCX0KPiArCQlpZiAoY2FuX3NhZ3YpCj4gKwkJ
CXN0YXRlLT5jcnRjX3NhZ3ZfbWFzayB8PSBCSVQoY3J0Yy0+cGlwZSk7Cj4gKwl9Cj4gK30KPiAr
Cj4gK2Jvb2wgaW50ZWxfY2FuX2VuYWJsZV9zYWd2KHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUg
KnN0YXRlKQo+ICt7Cj4gKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gc3RhdGUtPmJhc2UuZGV2
Owo+ICsJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShkZXYpOwo+
ICsJZW51bSBwaXBlIHBpcGU7Cj4gKwo+ICsJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIp
Cj4gKwkJdGdsX3NldF9zYWd2X21hc2soc3RhdGUpOwo+ICsJZWxzZSBpZiAoSU5URUxfR0VOKGRl
dl9wcml2KSA9PSAxMSkKPiArCQlpY2xfc2V0X3NhZ3ZfbWFzayhzdGF0ZSk7Cj4gKwllbHNlCj4g
KwkJc2tsX3NldF9zYWd2X21hc2soc3RhdGUpOwo+ICsKPiArCS8qCj4gKwkgKiBGb3IgU0FHViB3
ZSBuZWVkIHRvIGFjY291bnQgYWxsIHRoZSBwaXBlcywKPiArCSAqIG5vdCBvbmx5IHRoZSBvbmVz
IHdoaWNoIGFyZSBpbiBzdGF0ZSBjdXJyZW50bHkuCj4gKwkgKi8KPiArCWZvcl9lYWNoX3BpcGUo
ZGV2X3ByaXYsIHBpcGUpIHsKPiArCQl1bnNpZ25lZCBpbnQgYWN0aXZlX3BpcGVzOwo+ICsJCS8q
Cj4gKwkJICogRmlndXJlIG91dCBpZiB3ZSBhcmUgY2hhbmdpbmcgYWN0aXZlIHBpcGVzIGhlcmUK
PiArCQkgKiB0aGVuIGFmdGVyIGNvbW1pdCBkZXZfcHJpdi0+YWN0aXZlX3BpcGVzIHdpbGwKPiAr
CQkgKiBhbnl3YXkgYmUgYXNzaWduZWQgdG8gc3RhdGUtPmFjdGl2ZV9waXBlcy4KPiArCQkgKi8K
PiArCQlpZiAoc3RhdGUtPmFjdGl2ZV9waXBlX2NoYW5nZXMpCj4gKwkJCWFjdGl2ZV9waXBlcyA9
IHN0YXRlLT5hY3RpdmVfcGlwZXM7Cj4gKwkJZWxzZQo+ICsJCQlhY3RpdmVfcGlwZXMgPSBkZXZf
cHJpdi0+YWN0aXZlX3BpcGVzOwo+ICsKPiArCQkvKiBTa2lwIGlmIHBpcGUgaXMgaW5hY3RpdmUg
Ki8KPiArCQlpZiAoIShCSVQocGlwZSkgJiBhY3RpdmVfcGlwZXMpKQo+ICsJCQljb250aW51ZTsK
PiArCj4gKwkJLyoKPiArCQkgKiBQaXBlIGNhbiBiZSBhY3RpdmUgaW4gdGhpcyBzdGF0ZSBvciBp
biBkZXZfcHJpdgo+ICsJCSAqIGFzIHdlIGhhdmVuJ3QgY29tbWl0dGVkIHRoaXNlIGNoYW5nZXMg
eWV0KGFuZCB3ZSBzaG91bGRuJ3QpCj4gKwkJICogLSB3ZSBuZWVkIHRvIGNoZWNrIGJvdGguCj4g
KwkJICovCj4gKwkJaWYgKHN0YXRlLT5hY3RpdmVfcGlwZV9jaGFuZ2VzICYgQklUKHBpcGUpKSB7
Cj4gKwkJCWJvb2wgc3RhdGVfc2Fndl9tYXNrZWQgPSBcCj4gKwkJCQkoQklUKHBpcGUpICYgc3Rh
dGUtPmNydGNfc2Fndl9tYXNrKSA9PSAwOwo+ICsJCQlpZiAoc3RhdGVfc2Fndl9tYXNrZWQpCj4g
KwkJCQlyZXR1cm4gZmFsc2U7Cj4gKwkJfSBlbHNlIHsKPiArCQkJYm9vbCBzYWd2X21hc2tlZCA9
IFwKPiArCQkJCShCSVQocGlwZSkgJiBkZXZfcHJpdi0+Y3J0Y19zYWd2X21hc2spID09IDA7CgpJ
ZiB3ZSdyZSBub3QgY2hhbmdpbmcgd2hpY2ggcGlwZXMgYXJlIGFjdGl2ZSwgdGhlbiB3ZSBkaWRu
J3QgZ2xvYmFsbHkKbG9jayBldmVyeXRoaW5nIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhpcyBhdG9t
aWMgdHJhbnNhY3Rpb247IHdlIGNhbiBoYXZlCnJhY2luZyBjb21taXRzIGFnYWluc3QgZGlmZmVy
ZW50IENSVEMncy4gIFNvIHdoZW4geW91IGxvb2sgYXQKZGV2X3ByaXYtPmNydGNfc2Fndl9tYXNr
IGhlcmUsIHRoZSB2YWx1ZSBtaWdodCBjaGFuZ2UgaW1tZWRpYXRlbHkKYWZ0ZXJ3YXJkIGlmIGEg
Y29tbWl0IG9uIGEgZGlmZmVyZW50IENSVEMgY29tcGxldGVkIGluIHRoZSBtZWFudGltZS4KCkkg
ZG9uJ3QgdGhpbmsgd2Ugd2FudCB0byBsb29rIGF0IG90aGVyIENSVEMncyBvdXRzaWRlIG91ciBj
dXJyZW50CnRyYW5zYWN0aW9uIGhlcmUuICBXZSBzaG91bGQganVzdCBmaWd1cmUgb3V0IHdoZXRo
ZXIgb3VyIG93biBDUlRDJ3MgYXJlCm9rYXkgd2l0aCBTQUdWIG9yIG5vdC4gIFRoZW4gaW4gdGhl
IGNvbW1pdCBwaGFzZSB3ZSdkIG5lZWQgdG8gZ3JhYiBzb21lCmtpbmQgb2YgU0FHViBsb2NrLCBj
b21iaW5lIG91ciBsb2NhbCAiU0FHViBva2F5IiB3aXRoIHRoZSBnbG9iYWwgIlNBR1YKb2theSIg
YW5kIGVuYWJsZS9kaXNhYmxlIGFzIG5lY2Vzc2FyeS4KClNvbWUga2luZCBvZiByZWZlcmVuY2Ut
Y291bnRpbmcgbWVjaGFuaXNtIG1pZ2h0IG1ha2UgdGhpcyBzaW1wbGVyLi4uaXMKdGhlcmUgYW55
IHdheSB3ZSBjb3VsZCB0aWUgdGhpcyBpbiB3aXRoIHBvd2VyIGRvbWFpbnMgKGUuZy4sIGFkZGlu
ZyBhCiJTQUdWIG9mZiIgcG93ZXIgZG9tYWluIGFuZCBwb3dlciB3ZWxsIHRoYXQgd2UgZ3JhYiBk
dXJpbmcgY29tbWl0IHdoZW4Kd2UndmUgY2FsY3VsYXRlZCB0aGF0IG91ciBvd24gY3J0Y3MgY2Fu
J3QgY29wZSB3aXRoIFNBR1YgbGF0ZW5jeSk/CgoKPiArCQkJaWYgKHNhZ3ZfbWFza2VkKQo+ICsJ
CQkJcmV0dXJuIGZhbHNlOwo+ICsJCX0KPiArCX0KPiAgCXJldHVybiB0cnVlOwo+ICB9Cj4gIAo+
IEBAIC0zOTI1LDYgKzQwNDUsNyBAQCBzdGF0aWMgaW50IHNrbF9jb21wdXRlX3dtX3BhcmFtcyhj
b25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKPiAgCQkJCSBpbnQgY29s
b3JfcGxhbmUpOwo+ICBzdGF0aWMgdm9pZCBza2xfY29tcHV0ZV9wbGFuZV93bShjb25zdCBzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKPiAgCQkJCSBpbnQgbGV2ZWwsCj4gKwkJ
CQkgdTMyIGxhdGVuY3ksCj4gIAkJCQkgY29uc3Qgc3RydWN0IHNrbF93bV9wYXJhbXMgKndwLAo+
ICAJCQkJIGNvbnN0IHN0cnVjdCBza2xfd21fbGV2ZWwgKnJlc3VsdF9wcmV2LAo+ICAJCQkJIHN0
cnVjdCBza2xfd21fbGV2ZWwgKnJlc3VsdCAvKiBvdXQgKi8pOwo+IEBAIC0zOTQ3LDcgKzQwNjgs
MTAgQEAgc2tsX2N1cnNvcl9hbGxvY2F0aW9uKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpjcnRjX3N0YXRlLAo+ICAJV0FSTl9PTihyZXQpOwo+ICAKPiAgCWZvciAobGV2ZWwgPSAwOyBs
ZXZlbCA8PSBtYXhfbGV2ZWw7IGxldmVsKyspIHsKPiAtCQlza2xfY29tcHV0ZV9wbGFuZV93bShj
cnRjX3N0YXRlLCBsZXZlbCwgJndwLCAmd20sICZ3bSk7Cj4gKwkJdTMyIGxhdGVuY3kgPSBkZXZf
cHJpdi0+d20uc2tsX2xhdGVuY3lbbGV2ZWxdOwo+ICsKPiArCQlza2xfY29tcHV0ZV9wbGFuZV93
bShjcnRjX3N0YXRlLCBsZXZlbCwgbGF0ZW5jeSwgJndwLCAmd20sICZ3bSk7Cj4gKwo+ICAJCWlm
ICh3bS5taW5fZGRiX2FsbG9jID09IFUxNl9NQVgpCj4gIAkJCWJyZWFrOwo+ICAKPiBAQCAtNDIx
Miw2ICs0MzM2LDY4IEBAIGljbF9nZXRfdG90YWxfcmVsYXRpdmVfZGF0YV9yYXRlKHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+ICAJcmV0dXJuIHRvdGFsX2RhdGFfcmF0ZTsK
PiAgfQo+ICAKPiArc3RhdGljIGludAo+ICt0Z2xfY2hlY2tfcGlwZV9maXRzX3NhZ3Zfd20oc3Ry
dWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCj4gKwkJICAgICAgc3RydWN0IHNrbF9k
ZGJfYWxsb2NhdGlvbiAqZGRiIC8qIG91dCAqLykKPiArewo+ICsJc3RydWN0IGRybV9jcnRjICpj
cnRjID0gY3J0Y19zdGF0ZS0+YmFzZS5jcnRjOwo+ICsJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gdG9faTkxNShjcnRjLT5kZXYpOwo+ICsJc3RydWN0IGludGVsX2NydGMgKmlu
dGVsX2NydGMgPSB0b19pbnRlbF9jcnRjKGNydGMpOwo+ICsJc3RydWN0IHNrbF9kZGJfZW50cnkg
KmFsbG9jID0gJmNydGNfc3RhdGUtPndtLnNrbC5kZGI7Cj4gKwl1MTYgYWxsb2Nfc2l6ZTsKPiAr
CXUxNiB0b3RhbFtJOTE1X01BWF9QTEFORVNdID0ge307Cj4gKwl1NjQgdG90YWxfZGF0YV9yYXRl
Owo+ICsJZW51bSBwbGFuZV9pZCBwbGFuZV9pZDsKPiArCWludCBudW1fYWN0aXZlOwo+ICsJdTY0
IHBsYW5lX2RhdGFfcmF0ZVtJOTE1X01BWF9QTEFORVNdID0ge307Cj4gKwl1MzIgYmxvY2tzOwo+
ICsKPiArCS8qCj4gKwkgKiBObyBuZWVkIHRvIGNoZWNrIGdlbiBoZXJlLCB3ZSBjYWxsIHRoaXMg
b25seSBmb3IgZ2VuMTIKPiArCSAqLwo+ICsJdG90YWxfZGF0YV9yYXRlID0KPiArCQlpY2xfZ2V0
X3RvdGFsX3JlbGF0aXZlX2RhdGFfcmF0ZShjcnRjX3N0YXRlLAo+ICsJCQkJCQkgcGxhbmVfZGF0
YV9yYXRlKTsKPiArCj4gKwlza2xfZGRiX2dldF9waXBlX2FsbG9jYXRpb25fbGltaXRzKGRldl9w
cml2LCBjcnRjX3N0YXRlLAo+ICsJCQkJCSAgIHRvdGFsX2RhdGFfcmF0ZSwKPiArCQkJCQkgICBk
ZGIsIGFsbG9jLCAmbnVtX2FjdGl2ZSk7Cj4gKwlhbGxvY19zaXplID0gc2tsX2RkYl9lbnRyeV9z
aXplKGFsbG9jKTsKPiArCWlmIChhbGxvY19zaXplID09IDApCj4gKwkJcmV0dXJuIC1FTk9TUEM7
Cj4gKwo+ICsJLyogQWxsb2NhdGUgZml4ZWQgbnVtYmVyIG9mIGJsb2NrcyBmb3IgY3Vyc29yLiAq
Lwo+ICsJdG90YWxbUExBTkVfQ1VSU09SXSA9IHNrbF9jdXJzb3JfYWxsb2NhdGlvbihjcnRjX3N0
YXRlLCBudW1fYWN0aXZlKTsKPiArCWFsbG9jX3NpemUgLT0gdG90YWxbUExBTkVfQ1VSU09SXTsK
PiArCWNydGNfc3RhdGUtPndtLnNrbC5wbGFuZV9kZGJfeVtQTEFORV9DVVJTT1JdLnN0YXJ0ID0K
PiArCQlhbGxvYy0+ZW5kIC0gdG90YWxbUExBTkVfQ1VSU09SXTsKPiArCWNydGNfc3RhdGUtPndt
LnNrbC5wbGFuZV9kZGJfeVtQTEFORV9DVVJTT1JdLmVuZCA9IGFsbG9jLT5lbmQ7Cj4gKwo+ICsJ
LyoKPiArCSAqIERvIGNoZWNrIGlmIHdlIGNhbiBmaXQgTDAgKyBzYWd2X2Jsb2NrX3RpbWUgYW5k
Cj4gKwkgKiBkaXNhYmxlIFNBR1YgaWYgd2UgY2FuJ3QuCj4gKwkgKi8KPiArCWJsb2NrcyA9IDA7
Cj4gKwlmb3JfZWFjaF9wbGFuZV9pZF9vbl9jcnRjKGludGVsX2NydGMsIHBsYW5lX2lkKSB7Cj4g
KwkJY29uc3Qgc3RydWN0IHNrbF9wbGFuZV93bSAqd20gPQo+ICsJCQkmY3J0Y19zdGF0ZS0+d20u
c2tsLm9wdGltYWwucGxhbmVzW3BsYW5lX2lkXTsKPiArCj4gKwkJaWYgKHBsYW5lX2lkID09IFBM
QU5FX0NVUlNPUikgewo+ICsJCQlpZiAoV0FSTl9PTih3bS0+c2Fndl93bTAubWluX2RkYl9hbGxv
YyA+Cj4gKwkJCQkgICAgdG90YWxbUExBTkVfQ1VSU09SXSkpIHsKPiArCQkJCWJsb2NrcyA9IFUz
Ml9NQVg7Cj4gKwkJCQlicmVhazsKPiArCQkJfQo+ICsJCQljb250aW51ZTsKPiArCQl9Cj4gKwo+
ICsJCWJsb2NrcyArPSB3bS0+c2Fndl93bTAubWluX2RkYl9hbGxvYzsKPiArCQlpZiAoYmxvY2tz
ID4gYWxsb2Nfc2l6ZSkKPiArCQkJcmV0dXJuIC1FTk9TUEM7Cj4gKwl9Cj4gKwlyZXR1cm4gMDsK
PiArfQo+ICsKPiAgc3RhdGljIGludAo+ICBza2xfYWxsb2NhdGVfcGlwZV9kZGIoc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCj4gIAkJICAgICAgc3RydWN0IHNrbF9kZGJfYWxs
b2NhdGlvbiAqZGRiIC8qIG91dCAqLykKPiBAQCAtNDY0MSw2ICs0ODI3LDcgQEAgc3RhdGljIGJv
b2wgc2tsX3dtX2hhc19saW5lcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGlu
dCBsZXZlbCkKPiAgCj4gIHN0YXRpYyB2b2lkIHNrbF9jb21wdXRlX3BsYW5lX3dtKGNvbnN0IHN0
cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+ICAJCQkJIGludCBsZXZlbCwKPiAr
CQkJCSB1MzIgbGF0ZW5jeSwKPiAgCQkJCSBjb25zdCBzdHJ1Y3Qgc2tsX3dtX3BhcmFtcyAqd3As
Cj4gIAkJCQkgY29uc3Qgc3RydWN0IHNrbF93bV9sZXZlbCAqcmVzdWx0X3ByZXYsCj4gIAkJCQkg
c3RydWN0IHNrbF93bV9sZXZlbCAqcmVzdWx0IC8qIG91dCAqLykKCkl0IGRvZXNuJ3QgbG9vayBs
aWtlIHRoaXMgbGF0ZW5jeSBwYXJhbWV0ZXIgZ2V0cyB1c2VkIChpdCBnZXRzIG1hc2tlZCBieQph
IGxvY2FsIGxhdGVuY3kgdmFyaWFibGUgc3RpbGwuCgoKPiBAQCAtNDc2NywyMCArNDk1NCw0NSBA
QCBzdGF0aWMgdm9pZCBza2xfY29tcHV0ZV9wbGFuZV93bShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKPiAgc3RhdGljIHZvaWQKPiAgc2tsX2NvbXB1dGVfd21fbGV2
ZWxzKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+ICAJCSAgICAg
IGNvbnN0IHN0cnVjdCBza2xfd21fcGFyYW1zICp3bV9wYXJhbXMsCj4gLQkJICAgICAgc3RydWN0
IHNrbF93bV9sZXZlbCAqbGV2ZWxzKQo+ICsJCSAgICAgIHN0cnVjdCBza2xfcGxhbmVfd20gKnBs
YW5lX3dtLAo+ICsJCSAgICAgIGJvb2wgeXV2KQo+ICB7Cj4gIAlzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGNfc3RhdGUtPnVhcGkuY3J0Yy0+ZGV2KTsKPiAg
CWludCBsZXZlbCwgbWF4X2xldmVsID0gaWxrX3dtX21heF9sZXZlbChkZXZfcHJpdik7Cj4gKwkv
Kgo+ICsJICogQ2hlY2sgd2hpY2gga2luZCBvZiBwbGFuZSBpcyBpdCBhbmQgYmFzZWQgb24gdGhh
dCBjYWxjdWxhdGUKPiArCSAqIGNvcnJlc3BvbmRlbnQgV00gbGV2ZWxzLgo+ICsJICovCj4gKwlz
dHJ1Y3Qgc2tsX3dtX2xldmVsICpsZXZlbHMgPSB5dXYgPyBwbGFuZV93bS0+dXZfd20gOiBwbGFu
ZV93bS0+d207Cj4gIAlzdHJ1Y3Qgc2tsX3dtX2xldmVsICpyZXN1bHRfcHJldiA9ICZsZXZlbHNb
MF07Cj4gIAo+ICAJZm9yIChsZXZlbCA9IDA7IGxldmVsIDw9IG1heF9sZXZlbDsgbGV2ZWwrKykg
ewo+ICAJCXN0cnVjdCBza2xfd21fbGV2ZWwgKnJlc3VsdCA9ICZsZXZlbHNbbGV2ZWxdOwo+ICsJ
CXUzMiBsYXRlbmN5ID0gZGV2X3ByaXYtPndtLnNrbF9sYXRlbmN5W2xldmVsXTsKPiAgCj4gLQkJ
c2tsX2NvbXB1dGVfcGxhbmVfd20oY3J0Y19zdGF0ZSwgbGV2ZWwsIHdtX3BhcmFtcywKPiAtCQkJ
CSAgICAgcmVzdWx0X3ByZXYsIHJlc3VsdCk7Cj4gKwkJc2tsX2NvbXB1dGVfcGxhbmVfd20oY3J0
Y19zdGF0ZSwgbGV2ZWwsIGxhdGVuY3ksCj4gKwkJCQkgICAgIHdtX3BhcmFtcywgcmVzdWx0X3By
ZXYsIHJlc3VsdCk7Cj4gIAo+ICAJCXJlc3VsdF9wcmV2ID0gcmVzdWx0Owo+ICAJfQo+ICsJLyoK
PiArCSAqIEZvciBHZW4xMiBpZiBpdCBpcyBhbiBMMCB3ZSBuZWVkIHRvIGFsc28KPiArCSAqIGNv
bnNpZGVyIHNhZ3ZfYmxvY2tfdGltZSB3aGVuIGNhbGN1bGF0aW5nCj4gKwkgKiBMMCB3YXRlcm1h
cmsgLSB3ZSB3aWxsIG5lZWQgdGhhdCB3aGVuIG1ha2luZwo+ICsJICogYSBkZWNpc2lvbiB3aGV0
aGVyIGVuYWJsZSBTQUdWIG9yIG5vdC4KPiArCSAqIEZvciBvbGRlciBnZW5zIHdlIGFncmVlZCB0
byBjb3B5IEwwIHZhbHVlIGZvcgo+ICsJICogY29tcGF0aWJpbGl0eS4KPiArCSAqLwo+ICsJaWYg
KChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDEyKSkgewo+ICsJCXUzMiBsYXRlbmN5ID0gZGV2X3By
aXYtPndtLnNrbF9sYXRlbmN5WzBdOwo+ICsKPiArCQlsYXRlbmN5ICs9IGRldl9wcml2LT5zYWd2
X2Jsb2NrX3RpbWVfdXM7Cj4gKwkJc2tsX2NvbXB1dGVfcGxhbmVfd20oY3J0Y19zdGF0ZSwgMCwg
bGF0ZW5jeSwKPiArCQkgICAgIHdtX3BhcmFtcywgJmxldmVsc1swXSwKPiArCQkgICAgJnBsYW5l
X3dtLT5zYWd2X3dtMCk7Cj4gKwl9IGVsc2UKPiArCQltZW1jcHkoJnBsYW5lX3dtLT5zYWd2X3dt
MCwgJmxldmVsc1swXSwKPiArCQkJc2l6ZW9mKHN0cnVjdCBza2xfd21fbGV2ZWwpKTsKPiAgfQo+
ICAKPiAgc3RhdGljIHUzMgo+IEBAIC00ODczLDcgKzUwODUsNyBAQCBzdGF0aWMgaW50IHNrbF9i
dWlsZF9wbGFuZV93bV9zaW5nbGUoc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUs
Cj4gIAlpZiAocmV0KQo+ICAJCXJldHVybiByZXQ7Cj4gIAo+IC0Jc2tsX2NvbXB1dGVfd21fbGV2
ZWxzKGNydGNfc3RhdGUsICZ3bV9wYXJhbXMsIHdtLT53bSk7Cj4gKwlza2xfY29tcHV0ZV93bV9s
ZXZlbHMoY3J0Y19zdGF0ZSwgJndtX3BhcmFtcywgd20sIGZhbHNlKTsKPiAgCXNrbF9jb21wdXRl
X3RyYW5zaXRpb25fd20oY3J0Y19zdGF0ZSwgJndtX3BhcmFtcywgd20pOwo+ICAKPiAgCXJldHVy
biAwOwo+IEBAIC00ODk1LDcgKzUxMDcsNyBAQCBzdGF0aWMgaW50IHNrbF9idWlsZF9wbGFuZV93
bV91dihzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKPiAgCWlmIChyZXQpCj4g
IAkJcmV0dXJuIHJldDsKPiAgCj4gLQlza2xfY29tcHV0ZV93bV9sZXZlbHMoY3J0Y19zdGF0ZSwg
JndtX3BhcmFtcywgd20tPnV2X3dtKTsKPiArCXNrbF9jb21wdXRlX3dtX2xldmVscyhjcnRjX3N0
YXRlLCAmd21fcGFyYW1zLCB3bSwgdHJ1ZSk7Cj4gIAo+ICAJcmV0dXJuIDA7Cj4gIH0KPiBAQCAt
NTE2Nyw2ICs1Mzc5LDggQEAgc2tsX2RkYl9hZGRfYWZmZWN0ZWRfcGxhbmVzKGNvbnN0IHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwKPiAgCXJldHVybiAwOwo+ICB9Cj4g
IAo+ICtzdGF0aWMgdm9pZCB0Z2xfc2V0X3NhZ3Zfd20wKHN0cnVjdCBpbnRlbF9hdG9taWNfc3Rh
dGUgKnN0YXRlKTsKPiArCj4gIHN0YXRpYyBpbnQKPiAgc2tsX2NvbXB1dGVfZGRiKHN0cnVjdCBp
bnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQo+ICB7Cj4gQEAgLTUxNzcsNiArNTM5MSwxMSBAQCBz
a2xfY29tcHV0ZV9kZGIoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gIAlzdHJ1
Y3QgaW50ZWxfY3J0YyAqY3J0YzsKPiAgCWludCByZXQsIGk7Cj4gIAo+ICsJLyogRm9yIEdlbjEy
KyBmb3IgU0FHViB3ZSBoYXZlIGEgc3BlY2lhbCBMMCB3bSB2YWx1ZXMgKi8KPiArCWlmIChJTlRF
TF9HRU4oZGV2X3ByaXYpID49IDEyKQo+ICsJCWlmIChpbnRlbF9jYW5fZW5hYmxlX3NhZ3Yoc3Rh
dGUpKQo+ICsJCQl0Z2xfc2V0X3NhZ3Zfd20wKHN0YXRlKTsKPiArCj4gIAltZW1jcHkoZGRiLCAm
ZGV2X3ByaXYtPndtLnNrbF9ody5kZGIsIHNpemVvZigqZGRiKSk7Cj4gIAo+ICAJZm9yX2VhY2hf
b2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsIG9sZF9jcnRjX3N0YXRlLAo+
IEBAIC01NDQzLDYgKzU2NjIsNTYgQEAgc3RhdGljIGludCBza2xfd21fYWRkX2FmZmVjdGVkX3Bs
YW5lcyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKPiAgCXJldHVybiAwOwo+ICB9
Cj4gIAo+ICt2b2lkIHRnbF9zZXRfc2Fndl93bTAoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAq
c3RhdGUpCj4gK3sKPiArCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjOwo+ICsJc3RydWN0IGludGVs
X2NydGNfc3RhdGUgKm5ld19jcnRjX3N0YXRlOwo+ICsJc3RydWN0IGludGVsX2NydGNfc3RhdGUg
Km9sZF9jcnRjX3N0YXRlOwo+ICsJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IHN0YXRlLT5iYXNl
LmRldjsKPiArCWNvbnN0IHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5
MTUoZGV2KTsKPiArCWludCBpOwo+ICsKPiArCS8qCj4gKwkgKiBJZiB3ZSBkZXRlcm1pbmVkIHRo
YXQgd2UgY2FuIGFjdHVhbGx5IGVuYWJsZSBTQUdWLCB0aGVuCj4gKwkgKiBhY3R1YWxseSB1c2Ug
dGhvc2UgbGV2ZWxzIHRnbF9jaGVja19waXBlX2ZpdHNfc2Fndl93bQo+ICsJICogaGFzIGFscmVh
ZHkgdGFrZW4gY2FyZSBvZiBjaGVja2luZyBpZiBMMCArIHNhZ3YgYmxvY2sgdGltZQo+ICsJICog
Zml0cyBpbnRvIGRkYi4KPiArCSAqLwo+ICsJZm9yX2VhY2hfb2xkbmV3X2ludGVsX2NydGNfaW5f
c3RhdGUoc3RhdGUsIGNydGMsIG9sZF9jcnRjX3N0YXRlLAo+ICsJCQkJICAgIG5ld19jcnRjX3N0
YXRlLCBpKSB7Cj4gKwkJc3RydWN0IGludGVsX3BsYW5lICpwbGFuZTsKPiArCj4gKwkJZm9yX2Vh
Y2hfaW50ZWxfcGxhbmVfb25fY3J0YygmZGV2X3ByaXYtPmRybSwgY3J0YywgcGxhbmUpIHsKPiAr
CQkJZW51bSBwbGFuZV9pZCBwbGFuZV9pZCA9IHBsYW5lLT5pZDsKPiArCj4gKwkJCXN0cnVjdCBz
a2xfcGxhbmVfd20gKnBsYW5lX3dtID0gXAo+ICsJCQkgICAgJm5ld19jcnRjX3N0YXRlLT53bS5z
a2wub3B0aW1hbC5wbGFuZXNbcGxhbmVfaWRdOwo+ICsJCQlzdHJ1Y3Qgc2tsX3dtX2xldmVsICpz
YWd2X3dtMCA9ICZwbGFuZV93bS0+c2Fndl93bTA7Cj4gKwkJCXN0cnVjdCBza2xfd21fbGV2ZWwg
KmwwX3dtMCA9ICZwbGFuZV93bS0+d21bMF07Cj4gKwo+ICsJCQltZW1jcHkobDBfd20wLCBzYWd2
X3dtMCwgc2l6ZW9mKHN0cnVjdCBza2xfd21fbGV2ZWwpKTsKPiArCQl9Cj4gKwl9Cj4gK30KPiAr
Cj4gK3N0YXRpYyB2b2lkIHRnbF9zZXRfc2Fndl9tYXNrKHN0cnVjdCBpbnRlbF9hdG9taWNfc3Rh
dGUgKnN0YXRlKQo+ICt7Cj4gKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YzsKPiArCXN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpuZXdfY3J0Y19zdGF0ZTsKPiArCXN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpvbGRfY3J0Y19zdGF0ZTsKPiArCXN0cnVjdCBza2xfZGRiX2FsbG9jYXRpb24gKmRkYiA9
ICZzdGF0ZS0+d21fcmVzdWx0cy5kZGI7Cj4gKwlpbnQgcmV0LCBpOwo+ICsKPiArCWZvcl9lYWNo
X29sZG5ld19pbnRlbF9jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0ZSwK
PiArCQkJCQkgICAgbmV3X2NydGNfc3RhdGUsIGkpIHsKPiArCQlyZXQgPSB0Z2xfY2hlY2tfcGlw
ZV9maXRzX3NhZ3Zfd20obmV3X2NydGNfc3RhdGUsIGRkYik7Cj4gKwkJaWYgKCFyZXQpIHsKPiAr
CQkJaW50IHBpcGVfYml0ID0gQklUKGNydGMtPnBpcGUpOwo+ICsJCQlzdGF0ZS0+Y3J0Y19zYWd2
X21hc2sgfD0gcGlwZV9iaXQ7Cj4gKwkJfQo+ICsJfQo+ICt9Cj4gKwo+ICBzdGF0aWMgaW50Cj4g
IHNrbF9jb21wdXRlX3dtKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQo+ICB7Cj4g
QEAgLTU0NTUsNiArNTcyNCw5IEBAIHNrbF9jb21wdXRlX3dtKHN0cnVjdCBpbnRlbF9hdG9taWNf
c3RhdGUgKnN0YXRlKQo+ICAJLyogQ2xlYXIgYWxsIGRpcnR5IGZsYWdzICovCj4gIAlyZXN1bHRz
LT5kaXJ0eV9waXBlcyA9IDA7Cj4gIAo+ICsJLyogSWYgd2UgZXhpdCBiZWZvcmUgY2hlY2sgaXMg
ZG9uZSAqLwo+ICsJc3RhdGUtPmNydGNfc2Fndl9tYXNrID0gMDsKPiArCj4gIAlyZXQgPSBza2xf
ZGRiX2FkZF9hZmZlY3RlZF9waXBlcyhzdGF0ZSk7Cj4gIAlpZiAocmV0KQo+ICAJCXJldHVybiBy
ZXQ7Cj4gLS0gCj4gMi4xNy4xCj4gCj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KPiBJbnRlbC1nZnggbWFpbGluZyBsaXN0Cj4gSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vaW50ZWwtZ2Z4CgotLSAKTWF0dCBSb3BlcgpHcmFwaGljcyBTb2Z0d2FyZSBFbmdp
bmVlcgpWVFQtT1NHQyBQbGF0Zm9ybSBFbmFibGVtZW50CkludGVsIENvcnBvcmF0aW9uCig5MTYp
IDM1Ni0yNzk1Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

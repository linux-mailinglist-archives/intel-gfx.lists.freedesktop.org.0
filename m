Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3C27612D41
	for <lists+intel-gfx@lfdr.de>; Fri,  3 May 2019 14:11:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8522D89DFC;
	Fri,  3 May 2019 12:11:57 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 127B389DFB
 for <intel-gfx@lists.freedesktop.org>; Fri,  3 May 2019 12:11:54 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16440749-1500050 
 for multiple; Fri, 03 May 2019 12:52:27 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  3 May 2019 12:52:20 +0100
Message-Id: <20190503115225.30831-8-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190503115225.30831-1-chris@chris-wilson.co.uk>
References: <20190503115225.30831-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 08/13] drm/i915: Only reschedule the submission
 tasklet if preemption is possible
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SWYgd2UgY291cGxlIHRoZSBzY2hlZHVsZXIgbW9yZSB0aWdodGx5IHdpdGggdGhlIGV4ZWNsaXN0
cyBwb2xpY3ksIHdlCmNhbiBhcHBseSB0aGUgcHJlZW1wdGlvbiBwb2xpY3kgdG8gdGhlIHF1ZXN0
aW9uIG9mIHdoZXRoZXIgd2UgbmVlZCB0bwpraWNrIHRoZSB0YXNrbGV0IGF0IGFsbCBmb3IgdGhp
cyBwcmlvcml0eSBidW1wLgoKdjI6IFJlcGhyYXNlIGl0IGFzIGEgY29yZSBpOTE1IHBvbGljeSBh
bmQgbm90IGFuIGV4ZWNsaXN0cyBmb2libGUuCnYzOiBQdWxsIHRoZSBraWNrIHRvZ2V0aGVyLgoK
U2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CkNj
OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgotLS0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oICAgICAgfCAxOCAtLS0tLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICAgICAgIHwgIDQgKy0tCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYyAgICAgIHwgIDcgKysrLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMgICAgICAgICB8ICAyIC0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X3NjaGVkdWxlci5jICAgICAgIHwgMzcgKysrKysrKysrKysrLS0tLS0tLS0t
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxlci5oICAgICAgIHwgMTggKysrKysr
KysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uYyB8ICAzICst
CiA3IGZpbGVzIGNoYW5nZWQsIDUwIGluc2VydGlvbnMoKyksIDM5IGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKaW5kZXggOWUyYTE4M2EzNTFjLi45MzU5
YjNhN2FkOWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2lu
ZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oCkBAIC0xMDYs
MjQgKzEwNiw2IEBAIGhhbmdjaGVja19hY3Rpb25fdG9fc3RyKGNvbnN0IGVudW0gaW50ZWxfZW5n
aW5lX2hhbmdjaGVja19hY3Rpb24gYSkKIAogdm9pZCBpbnRlbF9lbmdpbmVzX3NldF9zY2hlZHVs
ZXJfY2FwcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7CiAKLXN0YXRpYyBpbmxpbmUg
Ym9vbCBfX2V4ZWNsaXN0c19uZWVkX3ByZWVtcHQoaW50IHByaW8sIGludCBsYXN0KQotewotCS8q
Ci0JICogQWxsb3cgcHJlZW1wdGlvbiBvZiBsb3cgLT4gbm9ybWFsIC0+IGhpZ2gsIGJ1dCB3ZSBk
bwotCSAqIG5vdCBhbGxvdyBsb3cgcHJpb3JpdHkgdGFza3MgdG8gcHJlZW1wdCBvdGhlciBsb3cg
cHJpb3JpdHkKLQkgKiB0YXNrcyB1bmRlciB0aGUgaW1wcmVzc2lvbiB0aGF0IGxhdGVuY3kgZm9y
IGxvdyBwcmlvcml0eQotCSAqIHRhc2tzIGRvZXMgbm90IG1hdHRlciAoYXMgbXVjaCBhcyBiYWNr
Z3JvdW5kIHRocm91Z2hwdXQpLAotCSAqIHNvIGtpc3MuCi0JICoKLQkgKiBNb3JlIG5hdHVyYWxs
eSB3ZSB3b3VsZCB3cml0ZQotCSAqCXByaW8gPj0gbWF4KDAsIGxhc3QpOwotCSAqIGV4Y2VwdCB0
aGF0IHdlIHdpc2ggdG8gcHJldmVudCB0cmlnZ2VyaW5nIHByZWVtcHRpb24gYXQgdGhlIHNhbWUK
LQkgKiBwcmlvcml0eSBsZXZlbDogdGhlIHRhc2sgdGhhdCBpcyBydW5uaW5nIHNob3VsZCByZW1h
aW4gcnVubmluZwotCSAqIHRvIHByZXNlcnZlIEZJRk8gb3JkZXJpbmcgb2YgZGVwZW5kZW5jaWVz
LgotCSAqLwotCXJldHVybiBwcmlvID4gbWF4KEk5MTVfUFJJT1JJVFlfTk9STUFMIC0gMSwgbGFz
dCk7Ci19Ci0KIHN0YXRpYyBpbmxpbmUgdm9pZAogZXhlY2xpc3RzX3NldF9hY3RpdmUoc3RydWN0
IGludGVsX2VuZ2luZV9leGVjbGlzdHMgKmV4ZWNsaXN0cywKIAkJICAgICB1bnNpZ25lZCBpbnQg
Yml0KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwppbmRleCA5MDkwMGM3ZDcwNTguLmFm
Y2RmYzQ0MGJiZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJj
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKQEAgLTI1Miw4ICsy
NTIsOCBAQCBzdGF0aWMgaW5saW5lIGJvb2wgbmVlZF9wcmVlbXB0KGNvbnN0IHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSwKIAkgKiBvdXJzZWx2ZXMsIGlnbm9yZSB0aGUgcmVxdWVzdC4K
IAkgKi8KIAlsYXN0X3ByaW8gPSBlZmZlY3RpdmVfcHJpbyhycSk7Ci0JaWYgKCFfX2V4ZWNsaXN0
c19uZWVkX3ByZWVtcHQoZW5naW5lLT5leGVjbGlzdHMucXVldWVfcHJpb3JpdHlfaGludCwKLQkJ
CQkgICAgICBsYXN0X3ByaW8pKQorCWlmICghaTkxNV9zY2hlZHVsZXJfbmVlZF9wcmVlbXB0KGVu
Z2luZS0+ZXhlY2xpc3RzLnF1ZXVlX3ByaW9yaXR5X2hpbnQsCisJCQkJCSBsYXN0X3ByaW8pKQog
CQlyZXR1cm4gZmFsc2U7CiAKIAkvKgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3Qvc2VsZnRlc3RfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMu
YwppbmRleCA4NDUzOGY2OTE4NWIuLjRiMDQyODkzZGMwZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3Qvc2VsZnRlc3RfbHJjLmMKQEAgLTYzOCwxNCArNjM4LDE5IEBAIHN0YXRpYyBzdHJ1Y3QgaTkx
NV9yZXF1ZXN0ICpkdW1teV9yZXF1ZXN0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkK
IAlHRU1fQlVHX09OKGk5MTVfcmVxdWVzdF9jb21wbGV0ZWQocnEpKTsKIAogCWk5MTVfc3dfZmVu
Y2VfaW5pdCgmcnEtPnN1Ym1pdCwgZHVtbXlfbm90aWZ5KTsKLQlpOTE1X3N3X2ZlbmNlX2NvbW1p
dCgmcnEtPnN1Ym1pdCk7CisJc2V0X2JpdChJOTE1X0ZFTkNFX0ZMQUdfQUNUSVZFLCAmcnEtPmZl
bmNlLmZsYWdzKTsKIAogCXJldHVybiBycTsKIH0KIAogc3RhdGljIHZvaWQgZHVtbXlfcmVxdWVz
dF9mcmVlKHN0cnVjdCBpOTE1X3JlcXVlc3QgKmR1bW15KQogeworCS8qIFdlIGhhdmUgdG8gZmFr
ZSB0aGUgQ1MgaW50ZXJydXB0IHRvIGtpY2sgdGhlIG5leHQgcmVxdWVzdCAqLworCWk5MTVfc3df
ZmVuY2VfY29tbWl0KCZkdW1teS0+c3VibWl0KTsKKwogCWk5MTVfcmVxdWVzdF9tYXJrX2NvbXBs
ZXRlKGR1bW15KTsKKwlkbWFfZmVuY2Vfc2lnbmFsKCZkdW1teS0+ZmVuY2UpOworCiAJaTkxNV9z
Y2hlZF9ub2RlX2ZpbmkoJmR1bW15LT5zY2hlZCk7CiAJaTkxNV9zd19mZW5jZV9maW5pKCZkdW1t
eS0+c3VibWl0KTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1
ZXN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYwppbmRleCBkMDZjNDUz
MDViMDMuLjhjYjNlZDU1MzFlMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9yZXF1ZXN0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMKQEAg
LTEzNzcsOSArMTM3Nyw3IEBAIGxvbmcgaTkxNV9yZXF1ZXN0X3dhaXQoc3RydWN0IGk5MTVfcmVx
dWVzdCAqcnEsCiAJaWYgKGZsYWdzICYgSTkxNV9XQUlUX1BSSU9SSVRZKSB7CiAJCWlmICghaTkx
NV9yZXF1ZXN0X3N0YXJ0ZWQocnEpICYmIElOVEVMX0dFTihycS0+aTkxNSkgPj0gNikKIAkJCWdl
bjZfcnBzX2Jvb3N0KHJxKTsKLQkJbG9jYWxfYmhfZGlzYWJsZSgpOyAvKiBzdXNwZW5kIHRhc2ts
ZXRzIGZvciByZXByaW9yaXRpc2F0aW9uICovCiAJCWk5MTVfc2NoZWR1bGVfYnVtcF9wcmlvcml0
eShycSwgSTkxNV9QUklPUklUWV9XQUlUKTsKLQkJbG9jYWxfYmhfZW5hYmxlKCk7IC8qIGtpY2sg
dGFza2xldHMgZW4gbWFzc2UgKi8KIAl9CiAKIAl3YWl0LnRzayA9IGN1cnJlbnQ7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxlci5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9zY2hlZHVsZXIuYwppbmRleCAzOWJjNGY1NGUyNzIuLmZhZGYwY2Q5Yzc1
YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2hlZHVsZXIuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxlci5jCkBAIC0yNjEsMTYgKzI2MSwz
MCBAQCBzY2hlZF9sb2NrX2VuZ2luZShjb25zdCBzdHJ1Y3QgaTkxNV9zY2hlZF9ub2RlICpub2Rl
LAogCXJldHVybiBlbmdpbmU7CiB9CiAKLXN0YXRpYyBib29sIGluZmxpZ2h0KGNvbnN0IHN0cnVj
dCBpOTE1X3JlcXVlc3QgKnJxLAotCQkgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSkKK3N0YXRpYyBpbmxpbmUgaW50IHJxX3ByaW8oY29uc3Qgc3RydWN0IGk5MTVfcmVx
dWVzdCAqcnEpCiB7Ci0JY29uc3Qgc3RydWN0IGk5MTVfcmVxdWVzdCAqYWN0aXZlOworCXJldHVy
biBycS0+c2NoZWQuYXR0ci5wcmlvcml0eSB8IF9fTk9fUFJFRU1QVElPTjsKK30KKworc3RhdGlj
IHZvaWQga2lja19zdWJtaXNzaW9uKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwgaW50
IHByaW8pCit7CisJY29uc3Qgc3RydWN0IGk5MTVfcmVxdWVzdCAqaW5mbGlnaHQgPQorCQlwb3J0
X3JlcXVlc3QoZW5naW5lLT5leGVjbGlzdHMucG9ydCk7CiAKLQlpZiAoIWk5MTVfcmVxdWVzdF9p
c19hY3RpdmUocnEpKQotCQlyZXR1cm4gZmFsc2U7CisJaWYgKCFpbmZsaWdodCkgLyogY3VycmVu
dGx5IGlkbGUsIG5vdGhpbmcgdG8gZG8gKi8KKwkJcmV0dXJuOworCisJLyoKKwkgKiBJZiB3ZSBh
cmUgYWxyZWFkeSB0aGUgY3VycmVudGx5IGV4ZWN1dGluZyBjb250ZXh0LCBkb24ndAorCSAqIGJv
dGhlciBldmFsdWF0aW5nIGlmIHdlIHNob3VsZCBwcmVlbXB0IG91cnNlbHZlcywgb3IgaWYKKwkg
KiB3ZSBleHBlY3Qgbm90aGluZyB0byBjaGFuZ2UgYXMgYSByZXN1bHQgb2YgcnVubmluZyB0aGUK
KwkgKiB0YXNrbGV0LCBpLmUuIHdlIGhhdmUgbm90IGNoYW5nZSB0aGUgcHJpb3JpdHkgcXVldWUK
KwkgKiBzdWZmaWNpZW50bHkgdG8gb3VzdCB0aGUgcnVubmluZyBjb250ZXh0LgorCSAqLworCWlm
ICghaTkxNV9zY2hlZHVsZXJfbmVlZF9wcmVlbXB0KHByaW8sIHJxX3ByaW8oaW5mbGlnaHQpKSkK
KwkJcmV0dXJuOwogCi0JYWN0aXZlID0gcG9ydF9yZXF1ZXN0KGVuZ2luZS0+ZXhlY2xpc3RzLnBv
cnQpOwotCXJldHVybiBhY3RpdmUtPmh3X2NvbnRleHQgPT0gcnEtPmh3X2NvbnRleHQ7CisJdGFz
a2xldF9oaV9zY2hlZHVsZSgmZW5naW5lLT5leGVjbGlzdHMudGFza2xldCk7CiB9CiAKIHN0YXRp
YyB2b2lkIF9faTkxNV9zY2hlZHVsZShzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwKQEAgLTM5Niwx
NSArNDEwLDggQEAgc3RhdGljIHZvaWQgX19pOTE1X3NjaGVkdWxlKHN0cnVjdCBpOTE1X3JlcXVl
c3QgKnJxLAogCiAJCWVuZ2luZS0+ZXhlY2xpc3RzLnF1ZXVlX3ByaW9yaXR5X2hpbnQgPSBwcmlv
OwogCi0JCS8qCi0JCSAqIElmIHdlIGFyZSBhbHJlYWR5IHRoZSBjdXJyZW50bHkgZXhlY3V0aW5n
IGNvbnRleHQsIGRvbid0Ci0JCSAqIGJvdGhlciBldmFsdWF0aW5nIGlmIHdlIHNob3VsZCBwcmVl
bXB0IG91cnNlbHZlcy4KLQkJICovCi0JCWlmIChpbmZsaWdodChub2RlX3RvX3JlcXVlc3Qobm9k
ZSksIGVuZ2luZSkpCi0JCQljb250aW51ZTsKLQogCQkvKiBEZWZlciAodGFza2xldCkgc3VibWlz
c2lvbiB1bnRpbCBhZnRlciBhbGwgb2Ygb3VyIHVwZGF0ZXMuICovCi0JCXRhc2tsZXRfaGlfc2No
ZWR1bGUoJmVuZ2luZS0+ZXhlY2xpc3RzLnRhc2tsZXQpOworCQlraWNrX3N1Ym1pc3Npb24oZW5n
aW5lLCBwcmlvKTsKIAl9CiAKIAlzcGluX3VubG9jaygmZW5naW5lLT50aW1lbGluZS5sb2NrKTsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NoZWR1bGVyLmggYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxlci5oCmluZGV4IDA3ZDI0M2FjZjU1My4uN2Vl
ZmNjZmYzOWJmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxl
ci5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NoZWR1bGVyLmgKQEAgLTUyLDQg
KzUyLDIyIEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBpOTE1X3ByaW9saXN0X2ZyZWUoc3RydWN0IGk5
MTVfcHJpb2xpc3QgKnApCiAJCV9faTkxNV9wcmlvbGlzdF9mcmVlKHApOwogfQogCitzdGF0aWMg
aW5saW5lIGJvb2wgaTkxNV9zY2hlZHVsZXJfbmVlZF9wcmVlbXB0KGludCBwcmlvLCBpbnQgYWN0
aXZlKQoreworCS8qCisJICogQWxsb3cgcHJlZW1wdGlvbiBvZiBsb3cgLT4gbm9ybWFsIC0+IGhp
Z2gsIGJ1dCB3ZSBkbworCSAqIG5vdCBhbGxvdyBsb3cgcHJpb3JpdHkgdGFza3MgdG8gcHJlZW1w
dCBvdGhlciBsb3cgcHJpb3JpdHkKKwkgKiB0YXNrcyB1bmRlciB0aGUgaW1wcmVzc2lvbiB0aGF0
IGxhdGVuY3kgZm9yIGxvdyBwcmlvcml0eQorCSAqIHRhc2tzIGRvZXMgbm90IG1hdHRlciAoYXMg
bXVjaCBhcyBiYWNrZ3JvdW5kIHRocm91Z2hwdXQpLAorCSAqIHNvIGtpc3MuCisJICoKKwkgKiBN
b3JlIG5hdHVyYWxseSB3ZSB3b3VsZCB3cml0ZQorCSAqCXByaW8gPj0gbWF4KDAsIGxhc3QpOwor
CSAqIGV4Y2VwdCB0aGF0IHdlIHdpc2ggdG8gcHJldmVudCB0cmlnZ2VyaW5nIHByZWVtcHRpb24g
YXQgdGhlIHNhbWUKKwkgKiBwcmlvcml0eSBsZXZlbDogdGhlIHRhc2sgdGhhdCBpcyBydW5uaW5n
IHNob3VsZCByZW1haW4gcnVubmluZworCSAqIHRvIHByZXNlcnZlIEZJRk8gb3JkZXJpbmcgb2Yg
ZGVwZW5kZW5jaWVzLgorCSAqLworCXJldHVybiBwcmlvID4gbWF4KEk5MTVfUFJJT1JJVFlfTk9S
TUFMIC0gMSwgYWN0aXZlKTsKK30KKwogI2VuZGlmIC8qIF9JOTE1X1NDSEVEVUxFUl9IXyAqLwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19zdWJtaXNzaW9uLmMKaW5kZXggNTdlZDFk
ZDRhZTQxLi4zODBkODNhMmJmYjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2lu
dGVsX2d1Y19zdWJtaXNzaW9uLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3Vj
X3N1Ym1pc3Npb24uYwpAQCAtNzQ3LDcgKzc0Nyw4IEBAIHN0YXRpYyBib29sIF9fZ3VjX2RlcXVl
dWUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCQkJCSZlbmdpbmUtPmk5MTUtPmd1
Yy5wcmVlbXB0X3dvcmtbZW5naW5lLT5pZF07CiAJCQlpbnQgcHJpbyA9IGV4ZWNsaXN0cy0+cXVl
dWVfcHJpb3JpdHlfaGludDsKIAotCQkJaWYgKF9fZXhlY2xpc3RzX25lZWRfcHJlZW1wdChwcmlv
LCBwb3J0X3ByaW8ocG9ydCkpKSB7CisJCQlpZiAoaTkxNV9zY2hlZHVsZXJfbmVlZF9wcmVlbXB0
KHByaW8sCisJCQkJCQkJcG9ydF9wcmlvKHBvcnQpKSkgewogCQkJCWV4ZWNsaXN0c19zZXRfYWN0
aXZlKGV4ZWNsaXN0cywKIAkJCQkJCSAgICAgRVhFQ0xJU1RTX0FDVElWRV9QUkVFTVBUKTsKIAkJ
CQlxdWV1ZV93b3JrKGVuZ2luZS0+aTkxNS0+Z3VjLnByZWVtcHRfd3EsCi0tIAoyLjIwLjEKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBt
YWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

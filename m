Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D0BDA65B4B
	for <lists+intel-gfx@lfdr.de>; Thu, 11 Jul 2019 18:14:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5B6396E162;
	Thu, 11 Jul 2019 16:14:16 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C18586E162
 for <intel-gfx@lists.freedesktop.org>; Thu, 11 Jul 2019 16:14:14 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 11 Jul 2019 09:14:14 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,479,1557212400"; d="scan'208";a="193451028"
Received: from ideak-desk.fi.intel.com ([10.237.68.142])
 by fmsmga002.fm.intel.com with ESMTP; 11 Jul 2019 09:14:13 -0700
Date: Thu, 11 Jul 2019 19:13:57 +0300
From: Imre Deak <imre.deak@intel.com>
To: Ville Syrjala <ville.syrjala@linux.intel.com>
Message-ID: <20190711161357.GF12363@ideak-desk.fi.intel.com>
References: <20190701160550.24205-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190701160550.24205-1-ville.syrjala@linux.intel.com>
User-Agent: Mutt/1.9.4 (2018-02-28)
Subject: Re: [Intel-gfx] [PATCH 1/6] drm/i915: Check
 crtc_state->wm.need_postvbl_update before grabbing wm.mutex
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: imre.deak@intel.com
Cc: intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gTW9uLCBKdWwgMDEsIDIwMTkgYXQgMDc6MDU6NDVQTSArMDMwMCwgVmlsbGUgU3lyamFsYSB3
cm90ZToKPiBGcm9tOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwu
Y29tPgo+IAo+IHdtLm11dGV4IGRvZXMgbm90IHByb3RlY3QgdGhlIGNydGMgc3RhdGUgc28gbm8g
cG9pbnQgaW4gZ3JhYmJpbmcgaXQKPiB0byBjaGVjayBjcnRjX3N0YXRlLT53bS5uZWVkX3Bvc3R2
YmxfdXBkYXRlLgo+IAo+IEFsc28gZG8gYSBiaXQgb2Ygcy9pbnRlbF9jcnRjL2NydGMvIHdoaWxl
IGF0IGl0Lgo+IAo+IFNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFs
YUBsaW51eC5pbnRlbC5jb20+CgpMb29rcyBvaywgb24gcGF0Y2hlcyAxLTY6ClJldmlld2VkLWJ5
OiBJbXJlIERlYWsgPGltcmUuZGVha0BpbnRlbC5jb20+Cgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9wbS5jIHwgMjMgKysrKysrKysrKysrLS0tLS0tLS0tLS0KPiAgMSBmaWxl
IGNoYW5nZWQsIDEyIGluc2VydGlvbnMoKyksIDExIGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfcG0uYwo+IGluZGV4IGQxMGM2MmQzZjEwYy4uODA3YTA3ODY5MGQ1IDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKPiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9wbS5jCj4gQEAgLTE1NjYsMTMgKzE1NjYsMTMgQEAgc3RhdGljIHZv
aWQgZzR4X29wdGltaXplX3dhdGVybWFya3Moc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3Rh
dGUsCj4gIAkJCQkgICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCj4gIHsK
PiAgCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY3J0Y19zdGF0
ZS0+YmFzZS5jcnRjLT5kZXYpOwo+IC0Jc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMgPSB0
b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPmJhc2UuY3J0Yyk7Cj4gKwlzdHJ1Y3QgaW50ZWxfY3J0
YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+YmFzZS5jcnRjKTsKPiAgCj4gIAlp
ZiAoIWNydGNfc3RhdGUtPndtLm5lZWRfcG9zdHZibF91cGRhdGUpCj4gIAkJcmV0dXJuOwo+ICAK
PiAgCW11dGV4X2xvY2soJmRldl9wcml2LT53bS53bV9tdXRleCk7Cj4gLQlpbnRlbF9jcnRjLT53
bS5hY3RpdmUuZzR4ID0gY3J0Y19zdGF0ZS0+d20uZzR4Lm9wdGltYWw7Cj4gKwljcnRjLT53bS5h
Y3RpdmUuZzR4ID0gY3J0Y19zdGF0ZS0+d20uZzR4Lm9wdGltYWw7Cj4gIAlnNHhfcHJvZ3JhbV93
YXRlcm1hcmtzKGRldl9wcml2KTsKPiAgCW11dGV4X3VubG9jaygmZGV2X3ByaXYtPndtLndtX211
dGV4KTsKPiAgfQo+IEBAIC0yMTg1LDEzICsyMTg1LDEzIEBAIHN0YXRpYyB2b2lkIHZsdl9vcHRp
bWl6ZV93YXRlcm1hcmtzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAo+ICAJCQkJ
ICAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQo+ICB7Cj4gIAlzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGNfc3RhdGUtPmJhc2UuY3J0
Yy0+ZGV2KTsKPiAtCXN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0gdG9faW50ZWxfY3J0
YyhjcnRjX3N0YXRlLT5iYXNlLmNydGMpOwo+ICsJc3RydWN0IGludGVsX2NydGMgKmNydGMgPSB0
b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPmJhc2UuY3J0Yyk7Cj4gIAo+ICAJaWYgKCFjcnRjX3N0
YXRlLT53bS5uZWVkX3Bvc3R2YmxfdXBkYXRlKQo+ICAJCXJldHVybjsKPiAgCj4gIAltdXRleF9s
b2NrKCZkZXZfcHJpdi0+d20ud21fbXV0ZXgpOwo+IC0JaW50ZWxfY3J0Yy0+d20uYWN0aXZlLnZs
diA9IGNydGNfc3RhdGUtPndtLnZsdi5vcHRpbWFsOwo+ICsJY3J0Yy0+d20uYWN0aXZlLnZsdiA9
IGNydGNfc3RhdGUtPndtLnZsdi5vcHRpbWFsOwo+ICAJdmx2X3Byb2dyYW1fd2F0ZXJtYXJrcyhk
ZXZfcHJpdik7Cj4gIAltdXRleF91bmxvY2soJmRldl9wcml2LT53bS53bV9tdXRleCk7Cj4gIH0K
PiBAQCAtNTcyMywxMCArNTcyMywxMCBAQCBzdGF0aWMgdm9pZCBpbGtfaW5pdGlhbF93YXRlcm1h
cmtzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlLAo+ICAJCQkJICAgc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCj4gIHsKPiAgCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY3J0Y19zdGF0ZS0+YmFzZS5jcnRjLT5kZXYpOwo+IC0J
c3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUt
PmJhc2UuY3J0Yyk7Cj4gKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMo
Y3J0Y19zdGF0ZS0+YmFzZS5jcnRjKTsKPiAgCj4gIAltdXRleF9sb2NrKCZkZXZfcHJpdi0+d20u
d21fbXV0ZXgpOwo+IC0JaW50ZWxfY3J0Yy0+d20uYWN0aXZlLmlsayA9IGNydGNfc3RhdGUtPndt
Lmlsay5pbnRlcm1lZGlhdGU7Cj4gKwljcnRjLT53bS5hY3RpdmUuaWxrID0gY3J0Y19zdGF0ZS0+
d20uaWxrLmludGVybWVkaWF0ZTsKPiAgCWlsa19wcm9ncmFtX3dhdGVybWFya3MoZGV2X3ByaXYp
Owo+ICAJbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+d20ud21fbXV0ZXgpOwo+ICB9Cj4gQEAgLTU3
MzUsMTMgKzU3MzUsMTQgQEAgc3RhdGljIHZvaWQgaWxrX29wdGltaXplX3dhdGVybWFya3Moc3Ry
dWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsCj4gIAkJCQkgICAgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUpCj4gIHsKPiAgCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiA9IHRvX2k5MTUoY3J0Y19zdGF0ZS0+YmFzZS5jcnRjLT5kZXYpOwo+IC0Jc3RydWN0
IGludGVsX2NydGMgKmludGVsX2NydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPmJhc2Uu
Y3J0Yyk7Cj4gKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19z
dGF0ZS0+YmFzZS5jcnRjKTsKPiArCj4gKwlpZiAoIWNydGNfc3RhdGUtPndtLm5lZWRfcG9zdHZi
bF91cGRhdGUpCj4gKwkJcmV0dXJuOwo+ICAKPiAgCW11dGV4X2xvY2soJmRldl9wcml2LT53bS53
bV9tdXRleCk7Cj4gLQlpZiAoY3J0Y19zdGF0ZS0+d20ubmVlZF9wb3N0dmJsX3VwZGF0ZSkgewo+
IC0JCWludGVsX2NydGMtPndtLmFjdGl2ZS5pbGsgPSBjcnRjX3N0YXRlLT53bS5pbGsub3B0aW1h
bDsKPiAtCQlpbGtfcHJvZ3JhbV93YXRlcm1hcmtzKGRldl9wcml2KTsKPiAtCX0KPiArCWNydGMt
PndtLmFjdGl2ZS5pbGsgPSBjcnRjX3N0YXRlLT53bS5pbGsub3B0aW1hbDsKPiArCWlsa19wcm9n
cmFtX3dhdGVybWFya3MoZGV2X3ByaXYpOwo+ICAJbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+d20u
d21fbXV0ZXgpOwo+ICB9Cj4gIAo+IC0tIAo+IDIuMjEuMAo+IAo+IF9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCj4gSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdAo+
IEludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeApfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 826466E80C
	for <lists+intel-gfx@lfdr.de>; Fri, 19 Jul 2019 17:38:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 88BA56E480;
	Fri, 19 Jul 2019 15:38:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AF0726E480
 for <intel-gfx@lists.freedesktop.org>; Fri, 19 Jul 2019 15:38:31 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga105.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 19 Jul 2019 08:38:30 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,282,1559545200"; d="scan'208";a="159133937"
Received: from esulliva-mobl.ger.corp.intel.com (HELO [10.251.94.109])
 ([10.251.94.109])
 by orsmga007.jf.intel.com with ESMTP; 19 Jul 2019 08:38:29 -0700
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
References: <20190719130423.11195-1-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <b11ee855-2692-47f6-0e06-52381ee20c23@linux.intel.com>
Date: Fri, 19 Jul 2019 16:38:28 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.2
MIME-Version: 1.0
In-Reply-To: <20190719130423.11195-1-chris@chris-wilson.co.uk>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH] drm/i915: Hide unshrinkable context objects
 from the shrinker
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Ck9uIDE5LzA3LzIwMTkgMTQ6MDQsIENocmlzIFdpbHNvbiB3cm90ZToKPiBUaGUgc2hyaW5rZXIg
Y2Fubm90IHRvdWNoIG9iamVjdHMgdXNlZCBieSB0aGUgY29udGV4dHMgKGxvZ2ljYWwgc3RhdGUK
PiBhbmQgcmluZykuIEN1cnJlbnRseSB3ZSBtYXJrIHRob3NlIGFzICJwaW5fZ2xvYmFsIiB0byBs
ZXQgdGhlIHNocmlua2VyCj4gc2tpcCBvdmVyIHRoZW0sIGhvd2V2ZXIsIGlmIHdlIHJlbW92ZSB0
aGVtIGZyb20gdGhlIHNocmlua2VyIGxpc3RzCj4gZW50aXJlbHksIHdlIGRvbid0IGV2ZW50IGhh
dmUgdG8gaW5jbHVkZSB0aGVtIGluIG91ciBzaHJpbmsgYWNjb3VudGluZy4KPiAKPiBCeSBrZWVw
aW5nIHRoZSB1bnNocmlua2FibGUgb2JqZWN0cyBpbiBvdXIgc2hyaW5rZXIgdHJhY2tpbmcsIHdl
IHJlcG9ydAo+IGEgbGFyZ2UgbnVtYmVyIG9mIG9iamVjdHMgYXZhaWxhYmxlIHRvIGJlIHNocnVu
aywgYW5kIGxlYXZlIHRoZSBzaHJpbmtlcgo+IGRlZXBseSB1bnNhdGlzZmllZCB3aGVuIHdlIGZh
aWwgdG8gcmVjbGFpbSB0aG9zZS4gVGhlIHNocmlua2VyIHdpbGwKPiBwZXJzaXN0IGluIHRyeWlu
ZyB0byByZWNsYWltIHRoZSB1bmF2YWlsYWJsZSBvYmplY3RzLCBmb3JjaW5nIHRoZSBzeXN0ZW0K
PiBpbnRvIGEgbGl2ZWxvY2sgKG5vdCBldmVuIGhpdHRpbmcgdGhlIGRyZWFkIG9vbWtpbGxlciku
Cj4gCj4gdjI6IEV4dGVuZCB1bnNocmlua2FibGUgcHJvdGVjdGlvbiBmb3IgcGVybWEtcGlubmVk
IHNjcmF0Y2ggYW5kIGd1Ywo+IGFsbG9jYXRpb25zIChUdnJ0a28pCj4gCj4gU2lnbmVkLW9mZi1i
eTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Cj4gQ2M6IFR2cnRrbyBV
cnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Cj4gLS0tCj4gICBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMgICB8IDExICsrLS0KPiAgIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaCAgIHwgIDQgKysKPiAgIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jICAgIHwgMTMgKy0tLS0KPiAgIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaHJpbmtlci5jIHwgNTcgKysrKysrKysrKysrKysr
KysrKysKPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYyAgICAgIHwg
IDQgKy0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0LmMgICAgICAgICAgIHwg
IDIgKwo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ2J1ZmZlci5jICAgfCAx
NyArKystLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5jICAgICAg
IHwgIDIgKwo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMgICAgICAgICAg
fCAgMyArLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYyAgICAgICAgICAgICAg
fCAxNSArKysrKysKPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmggICAgICAgICAg
ICAgIHwgIDQgKysKPiAgIDExIGZpbGVzIGNoYW5nZWQsIDEwMSBpbnNlcnRpb25zKCspLCAzMSBk
ZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX29iamVjdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVj
dC5jCj4gaW5kZXggZDUxOTdhMmExMDZmLi40ZWE5N2ZjYTljMzUgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5jCj4gQEAgLTYzLDYgKzYzLDggQEAgdm9p
ZCBpOTE1X2dlbV9vYmplY3RfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAo+
ICAgCXNwaW5fbG9ja19pbml0KCZvYmotPnZtYS5sb2NrKTsKPiAgIAlJTklUX0xJU1RfSEVBRCgm
b2JqLT52bWEubGlzdCk7Cj4gICAKPiArCUlOSVRfTElTVF9IRUFEKCZvYmotPm1tLmxpbmspOwo+
ICsKPiAgIAlJTklUX0xJU1RfSEVBRCgmb2JqLT5sdXRfbGlzdCk7Cj4gICAJSU5JVF9MSVNUX0hF
QUQoJm9iai0+YmF0Y2hfcG9vbF9saW5rKTsKPiAgIAo+IEBAIC0yNzMsMTQgKzI3NSw3IEBAIHZv
aWQgaTkxNV9nZW1fZnJlZV9vYmplY3Qoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpnZW1fb2JqKQo+
ICAgCSAqIG9yIGVsc2Ugd2UgbWF5IG9vbSB3aGlsc3QgdGhlcmUgYXJlIHBsZW50eSBvZiBkZWZl
cnJlZAo+ICAgCSAqIGZyZWVkIG9iamVjdHMuCj4gICAJICovCj4gLQlpZiAoaTkxNV9nZW1fb2Jq
ZWN0X2hhc19wYWdlcyhvYmopICYmCj4gLQkgICAgaTkxNV9nZW1fb2JqZWN0X2lzX3Nocmlua2Fi
bGUob2JqKSkgewo+IC0JCXVuc2lnbmVkIGxvbmcgZmxhZ3M7Cj4gLQo+IC0JCXNwaW5fbG9ja19p
cnFzYXZlKCZpOTE1LT5tbS5vYmpfbG9jaywgZmxhZ3MpOwo+IC0JCWxpc3RfZGVsX2luaXQoJm9i
ai0+bW0ubGluayk7Cj4gLQkJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmaTkxNS0+bW0ub2JqX2xv
Y2ssIGZsYWdzKTsKPiAtCX0KPiArCWk5MTVfZ2VtX29iamVjdF9tYWtlX3Vuc2hyaW5rYWJsZShv
YmopOwo+ICAgCj4gICAJLyoKPiAgIAkgKiBTaW5jZSB3ZSByZXF1aXJlIGJsb2NraW5nIG9uIHN0
cnVjdF9tdXRleCB0byB1bmJpbmQgdGhlIGZyZWVkCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9vYmplY3QuaAo+IGluZGV4IDY3YWVhMDdlYTAxOS4uMzcxNGNmMjM0ZDY0IDEw
MDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaAo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaAo+IEBAIC0z
OTQsNiArMzk0LDEwIEBAIGk5MTVfZ2VtX29iamVjdF9waW5fdG9fZGlzcGxheV9wbGFuZShzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAo+ICAgCQkJCSAgICAgdW5zaWduZWQgaW50IGZs
YWdzKTsKPiAgIHZvaWQgaTkxNV9nZW1fb2JqZWN0X3VucGluX2Zyb21fZGlzcGxheV9wbGFuZShz
dHJ1Y3QgaTkxNV92bWEgKnZtYSk7Cj4gICAKPiArdm9pZCBpOTE1X2dlbV9vYmplY3RfbWFrZV91
bnNocmlua2FibGUoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaik7Cj4gK3ZvaWQgaTkx
NV9nZW1fb2JqZWN0X21ha2Vfc2hyaW5rYWJsZShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAq
b2JqKTsKPiArdm9pZCBpOTE1X2dlbV9vYmplY3RfbWFrZV9wdXJnZWFibGUoc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKm9iaik7Cj4gKwo+ICAgc3RhdGljIGlubGluZSBib29sIGNwdV93cml0
ZV9uZWVkc19jbGZsdXNoKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCj4gICB7Cj4g
ICAJaWYgKG9iai0+Y2FjaGVfZGlydHkpCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX3BhZ2VzLmMKPiBpbmRleCBiMzZhZDI2OWY0ZWEuLjkyYWQzY2MyMjBlMyAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGFnZXMuYwo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jCj4gQEAgLTE1MywyNCArMTUz
LDEzIEBAIHN0YXRpYyB2b2lkIF9faTkxNV9nZW1fb2JqZWN0X3Jlc2V0X3BhZ2VfaXRlcihzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQo+ICAgc3RydWN0IHNnX3RhYmxlICoKPiAgIF9f
aTkxNV9nZW1fb2JqZWN0X3Vuc2V0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpv
YmopCj4gICB7Cj4gLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUob2Jq
LT5iYXNlLmRldik7Cj4gICAJc3RydWN0IHNnX3RhYmxlICpwYWdlczsKPiAgIAo+ICAgCXBhZ2Vz
ID0gZmV0Y2hfYW5kX3plcm8oJm9iai0+bW0ucGFnZXMpOwo+ICAgCWlmIChJU19FUlJfT1JfTlVM
TChwYWdlcykpCj4gICAJCXJldHVybiBwYWdlczsKPiAgIAo+IC0JaWYgKGk5MTVfZ2VtX29iamVj
dF9pc19zaHJpbmthYmxlKG9iaikpIHsKPiAtCQl1bnNpZ25lZCBsb25nIGZsYWdzOwo+IC0KPiAt
CQlzcGluX2xvY2tfaXJxc2F2ZSgmaTkxNS0+bW0ub2JqX2xvY2ssIGZsYWdzKTsKPiAtCj4gLQkJ
bGlzdF9kZWwoJm9iai0+bW0ubGluayk7Cj4gLQkJaTkxNS0+bW0uc2hyaW5rX2NvdW50LS07Cj4g
LQkJaTkxNS0+bW0uc2hyaW5rX21lbW9yeSAtPSBvYmotPmJhc2Uuc2l6ZTsKPiAtCj4gLQkJc3Bp
bl91bmxvY2tfaXJxcmVzdG9yZSgmaTkxNS0+bW0ub2JqX2xvY2ssIGZsYWdzKTsKPiAtCX0KPiAr
CWk5MTVfZ2VtX29iamVjdF9tYWtlX3Vuc2hyaW5rYWJsZShvYmopOwo+ICAgCj4gICAJaWYgKG9i
ai0+bW0ubWFwcGluZykgewo+ICAgCQl2b2lkICpwdHI7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaHJpbmtlci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX3Nocmlua2VyLmMKPiBpbmRleCAzZjRjNmJkY2MzYzMuLjE0YWJmZDc3
MzY1ZiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fc2hy
aW5rZXIuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaHJpbmtl
ci5jCj4gQEAgLTUzMCwzICs1MzAsNjAgQEAgdm9pZCBpOTE1X2dlbV9zaHJpbmtlcl90YWludHNf
bXV0ZXgoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCj4gICAJaWYgKHVubG9jaykKPiAg
IAkJbXV0ZXhfcmVsZWFzZSgmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleC5kZXBfbWFwLCAwLCBfUkVU
X0lQXyk7Cj4gICB9Cj4gKwo+ICt2b2lkIGk5MTVfZ2VtX29iamVjdF9tYWtlX3Vuc2hyaW5rYWJs
ZShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQo+ICt7Cj4gKwlpZiAoIWxpc3RfZW1w
dHkoJm9iai0+bW0ubGluaykpIHsKCldoaWNoIGxvY2sgcHJvdGVjdHMgdGhpcyBsaXN0IGhlYWQ/
Cgo+ICsJCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShvYmotPmJhc2Uu
ZGV2KTsKPiArCQl1bnNpZ25lZCBsb25nIGZsYWdzOwo+ICsKPiArCQlzcGluX2xvY2tfaXJxc2F2
ZSgmaTkxNS0+bW0ub2JqX2xvY2ssIGZsYWdzKTsKPiArCQlHRU1fQlVHX09OKGxpc3RfZW1wdHko
Jm9iai0+bW0ubGluaykpOwo+ICsKPiArCQlsaXN0X2RlbF9pbml0KCZvYmotPm1tLmxpbmspOwo+
ICsJCWk5MTUtPm1tLnNocmlua19jb3VudC0tOwo+ICsJCWk5MTUtPm1tLnNocmlua19tZW1vcnkg
LT0gb2JqLT5iYXNlLnNpemU7Cj4gKwo+ICsJCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmk5MTUt
Pm1tLm9ial9sb2NrLCBmbGFncyk7Cj4gKwl9Cj4gK30KPiArCj4gK3ZvaWQgaTkxNV9nZW1fb2Jq
ZWN0X21ha2Vfc2hyaW5rYWJsZShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQo+ICt7
Cj4gKwlHRU1fQlVHX09OKCFpOTE1X2dlbV9vYmplY3RfaGFzX3BhZ2VzKG9iaikpOwo+ICsJR0VN
X0JVR19PTighbGlzdF9lbXB0eSgmb2JqLT5tbS5saW5rKSk7Cj4gKwo+ICsJaWYgKGk5MTVfZ2Vt
X29iamVjdF9pc19zaHJpbmthYmxlKG9iaikpIHsKPiArCQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSA9IHRvX2k5MTUob2JqLT5iYXNlLmRldik7Cj4gKwkJdW5zaWduZWQgbG9uZyBmbGFn
czsKPiArCj4gKwkJc3Bpbl9sb2NrX2lycXNhdmUoJmk5MTUtPm1tLm9ial9sb2NrLCBmbGFncyk7
Cj4gKwkJR0VNX0JVR19PTigha3JlZl9yZWFkKCZvYmotPmJhc2UucmVmY291bnQpKTsKPiArCj4g
KwkJbGlzdF9hZGRfdGFpbCgmb2JqLT5tbS5saW5rLCAmaTkxNS0+bW0uc2hyaW5rX2xpc3QpOwo+
ICsJCWk5MTUtPm1tLnNocmlua19jb3VudCsrOwo+ICsJCWk5MTUtPm1tLnNocmlua19tZW1vcnkg
Kz0gb2JqLT5iYXNlLnNpemU7Cj4gKwo+ICsJCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmk5MTUt
Pm1tLm9ial9sb2NrLCBmbGFncyk7Cj4gKwl9Cj4gK30KPiArCj4gK3ZvaWQgaTkxNV9nZW1fb2Jq
ZWN0X21ha2VfcHVyZ2VhYmxlKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCj4gK3sK
PiArCUdFTV9CVUdfT04oIWk5MTVfZ2VtX29iamVjdF9oYXNfcGFnZXMob2JqKSk7Cj4gKwlHRU1f
QlVHX09OKCFsaXN0X2VtcHR5KCZvYmotPm1tLmxpbmspKTsKPiArCj4gKwlpZiAoaTkxNV9nZW1f
b2JqZWN0X2lzX3Nocmlua2FibGUob2JqKSkgewo+ICsJCXN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1ID0gdG9faTkxNShvYmotPmJhc2UuZGV2KTsKPiArCQl1bnNpZ25lZCBsb25nIGZsYWdz
Owo+ICsKPiArCQlzcGluX2xvY2tfaXJxc2F2ZSgmaTkxNS0+bW0ub2JqX2xvY2ssIGZsYWdzKTsK
PiArCQlHRU1fQlVHX09OKCFrcmVmX3JlYWQoJm9iai0+YmFzZS5yZWZjb3VudCkpOwo+ICsKPiAr
CQlsaXN0X2FkZF90YWlsKCZvYmotPm1tLmxpbmssICZpOTE1LT5tbS5wdXJnZV9saXN0KTsKPiAr
CQlpOTE1LT5tbS5zaHJpbmtfY291bnQrKzsKPiArCQlpOTE1LT5tbS5zaHJpbmtfbWVtb3J5ICs9
IG9iai0+YmFzZS5zaXplOwo+ICsKPiArCQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZpOTE1LT5t
bS5vYmpfbG9jaywgZmxhZ3MpOwo+ICsJfQo+ICt9CgpDb21tb24gaGVscGVyIGZvciB0aGUgYWJv
dmUgdG8gcGFzc2luZyBpbiB0aGUgY29ycmVjdCBsaXN0IGZyb20gZWFjaD8KCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYwo+IGluZGV4IDllNGY1MWNlNTJmZi4uOTgzMGVk
ZGExYWRlIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRl
eHQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2NvbnRleHQuYwo+IEBA
IC0xMTgsNyArMTE4LDcgQEAgc3RhdGljIGludCBfX2NvbnRleHRfcGluX3N0YXRlKHN0cnVjdCBp
OTE1X3ZtYSAqdm1hKQo+ICAgCSAqIEFuZCBtYXJrIGl0IGFzIGEgZ2xvYmFsbHkgcGlubmVkIG9i
amVjdCB0byBsZXQgdGhlIHNocmlua2VyIGtub3cKPiAgIAkgKiBpdCBjYW5ub3QgcmVjbGFpbSB0
aGUgb2JqZWN0IHVudGlsIHdlIHJlbGVhc2UgaXQuCj4gICAJICovCj4gLQl2bWEtPm9iai0+cGlu
X2dsb2JhbCsrOwo+ICsJaTkxNV92bWFfbWFrZV91bnNocmlua2FibGUodm1hKTsKPiAgIAl2bWEt
Pm9iai0+bW0uZGlydHkgPSB0cnVlOwo+ICAgCj4gICAJcmV0dXJuIDA7Cj4gQEAgLTEyNiw4ICsx
MjYsOCBAQCBzdGF0aWMgaW50IF9fY29udGV4dF9waW5fc3RhdGUoc3RydWN0IGk5MTVfdm1hICp2
bWEpCj4gICAKPiAgIHN0YXRpYyB2b2lkIF9fY29udGV4dF91bnBpbl9zdGF0ZShzdHJ1Y3QgaTkx
NV92bWEgKnZtYSkKPiAgIHsKPiAtCXZtYS0+b2JqLT5waW5fZ2xvYmFsLS07Cj4gICAJX19pOTE1
X3ZtYV91bnBpbih2bWEpOwo+ICsJaTkxNV92bWFfbWFrZV9zaHJpbmthYmxlKHZtYSk7Cj4gICB9
Cj4gICAKPiAgIHN0YXRpYyB2b2lkIF9faW50ZWxfY29udGV4dF9yZXRpcmUoc3RydWN0IGk5MTVf
YWN0aXZlICphY3RpdmUpCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2d0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndC5jCj4gaW5kZXggZjdl
NjlkYjQwMTlkLi41YjE2YjIzM2EwNTkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZ3QuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0
LmMKPiBAQCAtMjMxLDYgKzIzMSw4IEBAIGludCBpbnRlbF9ndF9pbml0X3NjcmF0Y2goc3RydWN0
IGludGVsX2d0ICpndCwgdW5zaWduZWQgaW50IHNpemUpCj4gICAJaWYgKHJldCkKPiAgIAkJZ290
byBlcnJfdW5yZWY7Cj4gICAKPiArCWk5MTVfZ2VtX29iamVjdF9tYWtlX3Vuc2hyaW5rYWJsZShv
YmopOwo+ICsKPiAgIAlndC0+c2NyYXRjaCA9IHZtYTsKPiAgIAlyZXR1cm4gMDsKPiAgIAo+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nYnVmZmVyLmMKPiBpbmRleCAzOGVjMTFh
ZTZlZDcuLmQ4ZWZiODhmMzNmMyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9yaW5nYnVmZmVyLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9yaW5nYnVmZmVyLmMKPiBAQCAtMTIzOCw3ICsxMjM4LDcgQEAgaW50IGludGVsX3JpbmdfcGlu
KHN0cnVjdCBpbnRlbF9yaW5nICpyaW5nKQo+ICAgCQlnb3RvIGVycl9yaW5nOwo+ICAgCX0KPiAg
IAo+IC0Jdm1hLT5vYmotPnBpbl9nbG9iYWwrKzsKPiArCWk5MTVfdm1hX21ha2VfdW5zaHJpbmth
YmxlKHZtYSk7Cj4gICAKPiAgIAlHRU1fQlVHX09OKHJpbmctPnZhZGRyKTsKPiAgIAlyaW5nLT52
YWRkciA9IGFkZHI7Cj4gQEAgLTEyNjcsNiArMTI2Nyw4IEBAIHZvaWQgaW50ZWxfcmluZ19yZXNl
dChzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZywgdTMyIHRhaWwpCj4gICAKPiAgIHZvaWQgaW50ZWxf
cmluZ191bnBpbihzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKPiAgIHsKPiArCXN0cnVjdCBpOTE1
X3ZtYSAqdm1hID0gcmluZy0+dm1hOwo+ICsKPiAgIAlpZiAoIWF0b21pY19kZWNfYW5kX3Rlc3Qo
JnJpbmctPnBpbl9jb3VudCkpCj4gICAJCXJldHVybjsKPiAgIAo+IEBAIC0xMjc1LDE4ICsxMjc3
LDE3IEBAIHZvaWQgaW50ZWxfcmluZ191bnBpbihzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKPiAg
IAkvKiBEaXNjYXJkIGFueSB1bnVzZWQgYnl0ZXMgYmV5b25kIHRoYXQgc3VibWl0dGVkIHRvIGh3
LiAqLwo+ICAgCWludGVsX3JpbmdfcmVzZXQocmluZywgcmluZy0+dGFpbCk7Cj4gICAKPiAtCUdF
TV9CVUdfT04oIXJpbmctPnZtYSk7Cj4gLQlpOTE1X3ZtYV91bnNldF9nZ3R0X3dyaXRlKHJpbmct
PnZtYSk7Cj4gLQlpZiAoaTkxNV92bWFfaXNfbWFwX2FuZF9mZW5jZWFibGUocmluZy0+dm1hKSkK
PiAtCQlpOTE1X3ZtYV91bnBpbl9pb21hcChyaW5nLT52bWEpOwo+ICsJaTkxNV92bWFfdW5zZXRf
Z2d0dF93cml0ZSh2bWEpOwo+ICsJaWYgKGk5MTVfdm1hX2lzX21hcF9hbmRfZmVuY2VhYmxlKHZt
YSkpCj4gKwkJaTkxNV92bWFfdW5waW5faW9tYXAodm1hKTsKPiAgIAllbHNlCj4gLQkJaTkxNV9n
ZW1fb2JqZWN0X3VucGluX21hcChyaW5nLT52bWEtPm9iaik7Cj4gKwkJaTkxNV9nZW1fb2JqZWN0
X3VucGluX21hcCh2bWEtPm9iaik7Cj4gICAKPiAgIAlHRU1fQlVHX09OKCFyaW5nLT52YWRkcik7
Cj4gICAJcmluZy0+dmFkZHIgPSBOVUxMOwo+ICAgCj4gLQlyaW5nLT52bWEtPm9iai0+cGluX2ds
b2JhbC0tOwo+IC0JaTkxNV92bWFfdW5waW4ocmluZy0+dm1hKTsKPiArCWk5MTVfdm1hX3VucGlu
KHZtYSk7Cj4gKwlpOTE1X3ZtYV9tYWtlX3B1cmdlYWJsZSh2bWEpOwoKV2h5IGlzIHJpbmcgcHVy
Z2VhYmxlIGFuZCBzY3JhdGNoIG9yIGNvbnRleHQgc3RhdGUgc2hyaW5rYWJsZT8KCj4gICAKPiAg
IAlpbnRlbF90aW1lbGluZV91bnBpbihyaW5nLT50aW1lbGluZSk7Cj4gICB9Cj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmMKPiBpbmRleCA4M2YyYzE5NzM3NWYuLmE1YmEwMTY0
ZmQxNCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWMu
Ywo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5jCj4gQEAgLTU5
Nyw2ICs1OTcsOCBAQCBzdHJ1Y3QgaTkxNV92bWEgKmludGVsX2d1Y19hbGxvY2F0ZV92bWEoc3Ry
dWN0IGludGVsX2d1YyAqZ3VjLCB1MzIgc2l6ZSkKPiAgIAkJZ290byBlcnI7Cj4gICAJfQo+ICAg
Cj4gKwlpOTE1X2dlbV9vYmplY3RfbWFrZV91bnNocmlua2FibGUob2JqKTsKPiArCj4gICAJcmV0
dXJuIHZtYTsKPiAgIAo+ICAgZXJyOgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2RlYnVnZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCj4g
aW5kZXggNmI4NGQwNGE2YTI4Li5jNDNmMjcwMDg1ZjUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2RlYnVnZnMuYwo+IEBAIC0zNjMsOCArMzYzLDkgQEAgc3RhdGljIGludCBpOTE1X2dlbV9v
YmplY3RfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpCj4gICAJc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBub2RlX3RvX2k5MTUobS0+cHJpdmF0ZSk7Cj4gICAJaW50
IHJldDsKPiAgIAo+IC0Jc2VxX3ByaW50ZihtLCAiJXUgc2hyaW5rYWJsZSBvYmplY3RzLCAlbGx1
IGJ5dGVzXG4iLAo+ICsJc2VxX3ByaW50ZihtLCAiJXUgc2hyaW5rYWJsZSBbJXUgZnJlZV0gb2Jq
ZWN0cywgJWxsdSBieXRlc1xuIiwKPiAgIAkJICAgaTkxNS0+bW0uc2hyaW5rX2NvdW50LAo+ICsJ
CSAgIGF0b21pY19yZWFkKCZpOTE1LT5tbS5mcmVlX2NvdW50KSwKPiAgIAkJICAgaTkxNS0+bW0u
c2hyaW5rX21lbW9yeSk7Cj4gICAKPiAgIAlzZXFfcHV0YyhtLCAnXG4nKTsKPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfdm1hLmMKPiBpbmRleCBlYjE2YTFhOTNiYmMuLmUyN2RkYmZmNDg3ZSAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV92bWEuYwo+IEBAIC0xMDMwLDYgKzEwMzAsMjEgQEAgaW50IGk5MTVfdm1h
X3VuYmluZChzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKPiAgIAlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+
ICt2b2lkIGk5MTVfdm1hX21ha2VfdW5zaHJpbmthYmxlKHN0cnVjdCBpOTE1X3ZtYSAqdm1hKQo+
ICt7Cj4gKwlpOTE1X2dlbV9vYmplY3RfbWFrZV91bnNocmlua2FibGUodm1hLT5vYmopOwo+ICt9
Cj4gKwo+ICt2b2lkIGk5MTVfdm1hX21ha2Vfc2hyaW5rYWJsZShzdHJ1Y3QgaTkxNV92bWEgKnZt
YSkKPiArewo+ICsJaTkxNV9nZW1fb2JqZWN0X21ha2Vfc2hyaW5rYWJsZSh2bWEtPm9iaik7Cj4g
K30KPiArCj4gK3ZvaWQgaTkxNV92bWFfbWFrZV9wdXJnZWFibGUoc3RydWN0IGk5MTVfdm1hICp2
bWEpCj4gK3sKPiArCWk5MTVfZ2VtX29iamVjdF9tYWtlX3B1cmdlYWJsZSh2bWEtPm9iaik7Cj4g
K30KCldvdWxkIGk5MTVfdm1hX21ha2VfKm9iamVjdCpfLi4uIGJlIGEgYmV0dGVyIG5hbWU/IEkg
YW0gdGhpbmtpbmcgdGhlIApjb25jZXB0IGRvZXMgbm90IGFwcGx5IHRvIHZtYSdzLgoKPiArCj4g
ICAjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VMRlRFU1QpCj4gICAjaW5jbHVkZSAi
c2VsZnRlc3RzL2k5MTVfdm1hLmMiCj4gICAjZW5kaWYKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV92bWEuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmgK
PiBpbmRleCA0Yjc2OWRiNjQ5YmYuLmEyNGJkNjc4N2VmNyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV92bWEuaAo+IEBAIC00NTksNCArNDU5LDggQEAgdm9pZCBpOTE1X3ZtYV9wYXJrZWQoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwo+ICAgc3RydWN0IGk5MTVfdm1hICppOTE1X3ZtYV9h
bGxvYyh2b2lkKTsKPiAgIHZvaWQgaTkxNV92bWFfZnJlZShzdHJ1Y3QgaTkxNV92bWEgKnZtYSk7
Cj4gICAKPiArdm9pZCBpOTE1X3ZtYV9tYWtlX3Vuc2hyaW5rYWJsZShzdHJ1Y3QgaTkxNV92bWEg
KnZtYSk7Cj4gK3ZvaWQgaTkxNV92bWFfbWFrZV9zaHJpbmthYmxlKHN0cnVjdCBpOTE1X3ZtYSAq
dm1hKTsKPiArdm9pZCBpOTE1X3ZtYV9tYWtlX3B1cmdlYWJsZShzdHJ1Y3QgaTkxNV92bWEgKnZt
YSk7Cj4gKwo+ICAgI2VuZGlmCj4gCgpSZWdhcmRzLAoKVHZydGtvCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50
ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AEC6B635E1
	for <lists+intel-gfx@lfdr.de>; Tue,  9 Jul 2019 14:29:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 781208935B;
	Tue,  9 Jul 2019 12:29:35 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DBB598935B
 for <intel-gfx@lists.freedesktop.org>; Tue,  9 Jul 2019 12:29:33 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 17184438-1500050 for multiple; Tue, 09 Jul 2019 13:29:31 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Mika Kuoppala <mika.kuoppala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20190707210024.26192-1-chris@chris-wilson.co.uk>
 <20190707210024.26192-2-chris@chris-wilson.co.uk>
 <87h87v1jlw.fsf@gaia.fi.intel.com>
In-Reply-To: <87h87v1jlw.fsf@gaia.fi.intel.com>
Message-ID: <156267536884.9375.17191983325513622086@skylake-alporthouse-com>
Date: Tue, 09 Jul 2019 13:29:28 +0100
Subject: Re: [Intel-gfx] [PATCH 01/11] drm/i915/gtt: Use shallow dma pages
 for scratch
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBNaWthIEt1b3BwYWxhICgyMDE5LTA3LTA5IDEzOjI0OjI3KQo+IENocmlzIFdpbHNv
biA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPiB3cml0ZXM6Cj4gCj4gPiBXZSBvbmx5IHVzZSB0
aGUgZG1hIHBhZ2VzIGZvciBzY3JhdGNoLCBhbmQgc28gZG8gbm90IG5lZWQgdG8gYWxsb2NhdGUK
PiA+IHRoZSBleHRyYSBzdG9yYWdlIGZvciB0aGUgc2hhZG93IHBhZ2UgZGlyZWN0b3J5Lgo+ID4K
PiA+IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVr
Pgo+ID4gQ2M6IE1pa2EgS3VvcHBhbGEgPG1pa2Eua3VvcHBhbGFAbGludXguaW50ZWwuY29tPgo+
ID4gLS0tCj4gPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMgfCAxOTIgKysr
KysrKysrKysrLS0tLS0tLS0tLS0tLS0tLQo+ID4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2VtX2d0dC5oIHwgICA2ICstCj4gPiAgMiBmaWxlcyBjaGFuZ2VkLCA4NSBpbnNlcnRpb25zKCsp
LCAxMTMgZGVsZXRpb25zKC0pCj4gPgo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZ2VtX2d0dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMK
PiA+IGluZGV4IDIzNmM5NjRkZDc2MS4uOTM3MjM2OTEzZTcwIDEwMDY0NAo+ID4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2VtX2d0dC5jCj4gPiBAQCAtNTk0LDI1ICs1OTQsMTcgQEAgc3RhdGljIHZv
aWQgY2xlYW51cF9wYWdlX2RtYShzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKPiA+ICAK
PiA+ICAjZGVmaW5lIGttYXBfYXRvbWljX3B4KHB4KSBrbWFwX2F0b21pYyhweF9iYXNlKHB4KS0+
cGFnZSkKPiA+ICAKPiA+IC0jZGVmaW5lIGZpbGxfcHgodm0sIHB4LCB2KSBmaWxsX3BhZ2VfZG1h
KCh2bSksIHB4X2Jhc2UocHgpLCAodikpCj4gPiAtI2RlZmluZSBmaWxsMzJfcHgodm0sIHB4LCB2
KSBmaWxsX3BhZ2VfZG1hXzMyKCh2bSksIHB4X2Jhc2UocHgpLCAodikpCj4gPiArI2RlZmluZSBm
aWxsX3B4KHB4LCB2KSBmaWxsX3BhZ2VfZG1hKHB4X2Jhc2UocHgpLCAodikpCj4gPiArI2RlZmlu
ZSBmaWxsMzJfcHgocHgsIHYpIGZpbGxfcGFnZV9kbWFfMzIocHhfYmFzZShweCksICh2KSkKPiA+
ICAKPiA+IC1zdGF0aWMgdm9pZCBmaWxsX3BhZ2VfZG1hKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3Bh
Y2UgKnZtLAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGk5MTVfcGFnZV9kbWEg
KnAsCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1NjQgdmFsKQo+ID4gK3N0YXRp
YyB2b2lkIGZpbGxfcGFnZV9kbWEoc3RydWN0IGk5MTVfcGFnZV9kbWEgKnAsIGNvbnN0IHU2NCB2
YWwpCj4gPiAgewo+ID4gLSAgICAgdTY0ICogY29uc3QgdmFkZHIgPSBrbWFwX2F0b21pYyhwLT5w
YWdlKTsKPiA+IC0KPiA+IC0gICAgIG1lbXNldDY0KHZhZGRyLCB2YWwsIFBBR0VfU0laRSAvIHNp
emVvZih2YWwpKTsKPiA+IC0KPiA+IC0gICAgIGt1bm1hcF9hdG9taWModmFkZHIpOwo+ID4gKyAg
ICAga3VubWFwX2F0b21pYyhtZW1zZXQ2NChrbWFwX2F0b21pYyhwLT5wYWdlKSwgdmFsLCBJOTE1
X1BERVMpKTsKPiAKPiBOZWF0Lgo+IAo+IEkgd291bGQgZ28gZm9yIDUxMiBpbnN0ZWFkIG9mIEk5
MTVfUERFUy4gVGhlcmUgaXMgbm8gbWFnaWMKPiBhbmQgdGhlcmUgbmV2ZXIgd2lsbCBiZSBtYWdp
YyBhcyBpdCBpcyBhcyBjb25zdCBhcyBjYXJ2ZWQgaW50byBzdG9uZS4KCkkgd2FzIGp1c3QgZ29p
bmcgd2l0aCBJOTE1X1BERVMgYW5kIEk5MTVfUERFX01BU0sgdGhyb3VnaG91dC4gTGF0ZXIgdGhp
cwpvbmUgYmVjb21lcyBjb3VudCwgZndpdy4KPiAKPiA+ICB9Cj4gPiAgCj4gPiAtc3RhdGljIHZv
aWQgZmlsbF9wYWdlX2RtYV8zMihzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKPiA+IC0g
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBpOTE1X3BhZ2VfZG1hICpwLAo+ID4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdTMyIHYpCj4gPiArc3RhdGljIHZvaWQgZmls
bF9wYWdlX2RtYV8zMihzdHJ1Y3QgaTkxNV9wYWdlX2RtYSAqcCwgY29uc3QgdTMyIHYpCj4gPiAg
ewo+ID4gLSAgICAgZmlsbF9wYWdlX2RtYSh2bSwgcCwgKHU2NCl2IDw8IDMyIHwgdik7Cj4gPiAr
ICAgICBmaWxsX3BhZ2VfZG1hKHAsICh1NjQpdiA8PCAzMiB8IHYpOwo+ID4gIH0KPiA+ICAKPiA+
ICBzdGF0aWMgaW50Cj4gPiBAQCAtNjg3LDYgKzY3OSwyMSBAQCBzdGF0aWMgdm9pZCBjbGVhbnVw
X3NjcmF0Y2hfcGFnZShzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSkKPiA+ICAgICAgIF9f
ZnJlZV9wYWdlcyhwLT5wYWdlLCBvcmRlcik7Cj4gPiAgfQo+ID4gIAo+ID4gK3N0YXRpYyB2b2lk
IGZyZWVfc2NyYXRjaChzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSkKPiA+ICt7Cj4gPiAr
ICAgICBpZiAoIXZtLT5zY3JhdGNoX3BhZ2UuZGFkZHIpIC8qIHNldCB0byAwIG9uIGNsb25lcyAq
Lwo+ID4gKyAgICAgICAgICAgICByZXR1cm47Cj4gPiArCj4gPiArICAgICBpZiAodm0tPnNjcmF0
Y2hfcGRwLmRhZGRyKQo+ID4gKyAgICAgICAgICAgICBjbGVhbnVwX3BhZ2VfZG1hKHZtLCAmdm0t
PnNjcmF0Y2hfcGRwKTsKPiA+ICsgICAgIGlmICh2bS0+c2NyYXRjaF9wZC5kYWRkcikKPiA+ICsg
ICAgICAgICAgICAgY2xlYW51cF9wYWdlX2RtYSh2bSwgJnZtLT5zY3JhdGNoX3BkKTsKPiA+ICsg
ICAgIGlmICh2bS0+c2NyYXRjaF9wdC5kYWRkcikKPiA+ICsgICAgICAgICAgICAgY2xlYW51cF9w
YWdlX2RtYSh2bSwgJnZtLT5zY3JhdGNoX3B0KTsKPiA+ICsKPiA+ICsgICAgIGNsZWFudXBfc2Ny
YXRjaF9wYWdlKHZtKTsKPiA+ICt9Cj4gPiArCj4gPiAgc3RhdGljIHN0cnVjdCBpOTE1X3BhZ2Vf
dGFibGUgKmFsbG9jX3B0KHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtKQo+ID4gIHsKPiA+
ICAgICAgIHN0cnVjdCBpOTE1X3BhZ2VfdGFibGUgKnB0Owo+ID4gQEAgLTcxMSwxOCArNzE4LDYg
QEAgc3RhdGljIHZvaWQgZnJlZV9wdChzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwgc3Ry
dWN0IGk5MTVfcGFnZV90YWJsZSAqcHQpCj4gPiAgICAgICBrZnJlZShwdCk7Cj4gPiAgfQo+ID4g
IAo+ID4gLXN0YXRpYyB2b2lkIGdlbjhfaW5pdGlhbGl6ZV9wdChzdHJ1Y3QgaTkxNV9hZGRyZXNz
X3NwYWNlICp2bSwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGk5MTVf
cGFnZV90YWJsZSAqcHQpCj4gPiAtewo+ID4gLSAgICAgZmlsbF9weCh2bSwgcHQsIHZtLT5zY3Jh
dGNoX3B0ZSk7Cj4gPiAtfQo+ID4gLQo+ID4gLXN0YXRpYyB2b2lkIGdlbjZfaW5pdGlhbGl6ZV9w
dChzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKPiA+IC0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc3RydWN0IGk5MTVfcGFnZV90YWJsZSAqcHQpCj4gPiAtewo+ID4gLSAgICAgZmls
bDMyX3B4KHZtLCBwdCwgdm0tPnNjcmF0Y2hfcHRlKTsKPiA+IC19Cj4gPiAtCj4gPiAgc3RhdGlj
IHN0cnVjdCBpOTE1X3BhZ2VfZGlyZWN0b3J5ICpfX2FsbG9jX3BkKHZvaWQpCj4gPiAgewo+ID4g
ICAgICAgc3RydWN0IGk5MTVfcGFnZV9kaXJlY3RvcnkgKnBkOwo+ID4gQEAgLTc2NSw5ICs3NjAs
MTEgQEAgc3RhdGljIHZvaWQgZnJlZV9wZChzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwK
PiA+ICAgICAgIGtmcmVlKHBkKTsKPiA+ICB9Cj4gPiAgCj4gPiAtI2RlZmluZSBpbml0X3BkKHZt
LCBwZCwgdG8pIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAo+ID4g
LSAgICAgZmlsbF9weCgodm0pLCAocGQpLCBnZW44X3BkZV9lbmNvZGUocHhfZG1hKHRvKSwgSTkx
NV9DQUNIRV9MTEMpKTsgXAo+ID4gLSAgICAgbWVtc2V0X3AoKHBkKS0+ZW50cnksICh0byksIDUx
Mik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKPiA+ICtzdGF0aWMgdm9pZCBpbml0
X3BkKHN0cnVjdCBpOTE1X3BhZ2VfZGlyZWN0b3J5ICpwZCwKPiA+ICsgICAgICAgICAgICAgICAg
IHN0cnVjdCBpOTE1X3BhZ2VfZG1hICpzY3JhdGNoKQo+ID4gK3sKPiA+ICsgICAgIGZpbGxfcHgo
cGQsIGdlbjhfcGRlX2VuY29kZShzY3JhdGNoLT5kYWRkciwgSTkxNV9DQUNIRV9MTEMpKTsKPiA+
ICsgICAgIG1lbXNldF9wKHBkLT5lbnRyeSwgc2NyYXRjaCwgNTEyKTsKPiA+ICB9Cj4gPiAgCj4g
PiAgc3RhdGljIGlubGluZSB2b2lkCj4gPiBAQCAtODY5LDEyICs4NjYsMTEgQEAgc3RhdGljIHZv
aWQgZ2VuOF9wcGd0dF9jbGVhcl9wZChzdHJ1Y3QgaTkxNV9hZGRyZXNzX3NwYWNlICp2bSwKPiA+
ICAgICAgIHUzMiBwZGU7Cj4gPiAgCj4gPiAgICAgICBnZW44X2Zvcl9lYWNoX3BkZShwdCwgcGQs
IHN0YXJ0LCBsZW5ndGgsIHBkZSkgewo+ID4gLSAgICAgICAgICAgICBHRU1fQlVHX09OKHB0ID09
IHZtLT5zY3JhdGNoX3B0KTsKPiA+ICsgICAgICAgICAgICAgR0VNX0JVR19PTihweF9iYXNlKHB0
KSA9PSAmdm0tPnNjcmF0Y2hfcHQpOwo+ID4gIAo+ID4gICAgICAgICAgICAgICBhdG9taWNfaW5j
KCZwdC0+dXNlZCk7Cj4gPiAgICAgICAgICAgICAgIGdlbjhfcHBndHRfY2xlYXJfcHQodm0sIHB0
LCBzdGFydCwgbGVuZ3RoKTsKPiA+IC0gICAgICAgICAgICAgaWYgKHJlbGVhc2VfcGRfZW50cnko
cGQsIHBkZSwgJnB0LT51c2VkLAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBweF9iYXNlKHZtLT5zY3JhdGNoX3B0KSkpCj4gPiArICAgICAgICAgICAgIGlmIChyZWxlYXNl
X3BkX2VudHJ5KHBkLCBwZGUsICZwdC0+dXNlZCwgJnZtLT5zY3JhdGNoX3B0KSkKPiA+ICAgICAg
ICAgICAgICAgICAgICAgICBmcmVlX3B0KHZtLCBwdCk7Cj4gPiAgICAgICB9Cj4gPiAgfQo+ID4g
QEAgLTg5MCwxMiArODg2LDExIEBAIHN0YXRpYyB2b2lkIGdlbjhfcHBndHRfY2xlYXJfcGRwKHN0
cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAo+ID4gICAgICAgdW5zaWduZWQgaW50IHBkcGU7
Cj4gPiAgCj4gPiAgICAgICBnZW44X2Zvcl9lYWNoX3BkcGUocGQsIHBkcCwgc3RhcnQsIGxlbmd0
aCwgcGRwZSkgewo+ID4gLSAgICAgICAgICAgICBHRU1fQlVHX09OKHBkID09IHZtLT5zY3JhdGNo
X3BkKTsKPiA+ICsgICAgICAgICAgICAgR0VNX0JVR19PTihweF9iYXNlKHBkKSA9PSAmdm0tPnNj
cmF0Y2hfcGQpOwo+IAo+IFBlcmhhcHMgZnV0dXJlIHdpbGwgYnJpbmcgcGRfcG9pbnRzX3NjcmF0
Y2gocGQpLgo+IAo+IE5vdyB0aGUgaW50cmlndWluZywgYm9yZGVyaW5nIGlycml0YXRpbmcsIHF1
ZXN0aW9uIGluIG15IG1pbmQgaXMKPiB0aGF0IGNhbiB3ZSBmb2xkIHRoZSBzY3JhdGNoX3BkIGFu
ZCBzY3JhdGNoX3BkcCB0byBiZSB0aGUgc2FtZSB0aGluZy4KCk5vLCB3ZSBjYW4gZm9sZCB0aGUg
c2NyYXRjaF9wZCB0byBiZSB0aGUgc2FtZSAoZG1hIHdpc2UpIGFzIHRoZXkgZG8gbmVlZAp0byBl
bmQgdXAgYXQgdGhlIHNjcmF0Y2hfcHRlLiBBbmQgc2FkbHkgd2UgY2FuJ3QgdXNlIHRoZSBzY3Jh
dGNoX3B0ZSBhcwp0aGUgZmlsbGVyIGZvciBzY3JhdGNoX3BkLgoKPiBQYXRjaCBsZ3RtIHdpdGgg
c29tZSBkaXNsaWtlIHRvd2FyZHMgSTkxNV9QREVTLAoKSSdtIG5vdCBrZWVuIG9uIGl0IHRiaC4g
QnV0IHRoZSBtaXggb2YgYWx0ZXJuYXRpbmcgYmV0d2VlbiA1MTIvMHgxZmYKZG9lcyBzdWdnZXN0
IHRvIHVzZSBzb21lIG5hbWUuCi1DaHJpcwpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9pbnRlbC1nZng=

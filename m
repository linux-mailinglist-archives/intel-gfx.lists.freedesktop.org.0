Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 62DF42651F
	for <lists+intel-gfx@lfdr.de>; Wed, 22 May 2019 15:51:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 390C489B03;
	Wed, 22 May 2019 13:51:30 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 26B7889AC2;
 Wed, 22 May 2019 13:51:18 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 22 May 2019 06:51:18 -0700
X-ExtLoop1: 1
Received: from dmironox-mobl5.ccr.corp.intel.com (HELO localhost.localdomain)
 ([10.252.20.122])
 by fmsmga008.fm.intel.com with ESMTP; 22 May 2019 06:51:17 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: igt-dev@lists.freedesktop.org
Date: Wed, 22 May 2019 14:51:02 +0100
Message-Id: <20190522135104.26930-13-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190522135104.26930-1-tvrtko.ursulin@linux.intel.com>
References: <20190522135104.26930-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI i-g-t 12/14] test/i915: gem_exec_store: use the
 gem_engine_topology library
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogQW5kaSBTaHl0aSA8YW5kaS5zaHl0aUBpbnRlbC5jb20+CgpSZXBsYWNlIHRoZSBsZWdh
Y3kgZm9yX2VhY2hfZW5naW5lKiBkZWZpbmVzIHdpdGggdGhlIG9uZXMKaW1wbGVtZW50ZWQgaW4g
dGhlIGdlbV9lbmdpbmVfdG9wb2xvZ3kgbGlicmFyeS4KClNpZ25lZC1vZmYtYnk6IEFuZGkgU2h5
dGkgPGFuZGkuc2h5dGlAaW50ZWwuY29tPgpDYzogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13
aWxzb24uY28udWs+ClJldmlld2VkLWJ5OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5A
aW50ZWwuY29tPgotLS0KIHRlc3RzL2k5MTUvZ2VtX2V4ZWNfc3RvcmUuYyB8IDM2ICsrKysrKysr
KysrKysrKysrKy0tLS0tLS0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDE4IGluc2VydGlv
bnMoKyksIDE4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX2V4ZWNf
c3RvcmUuYyBiL3Rlc3RzL2k5MTUvZ2VtX2V4ZWNfc3RvcmUuYwppbmRleCBhNzY3MzQ4OTMzYWMu
LmI3NGMzZDg0YmNjMiAxMDA2NDQKLS0tIGEvdGVzdHMvaTkxNS9nZW1fZXhlY19zdG9yZS5jCisr
KyBiL3Rlc3RzL2k5MTUvZ2VtX2V4ZWNfc3RvcmUuYwpAQCAtMzcsNyArMzcsNyBAQAogCiAjZGVm
aW5lIEVOR0lORV9NQVNLICAoSTkxNV9FWEVDX1JJTkdfTUFTSyB8IExPQ0FMX0k5MTVfRVhFQ19C
U0RfTUFTSykKIAotc3RhdGljIHZvaWQgc3RvcmVfZHdvcmQoaW50IGZkLCB1bnNpZ25lZCByaW5n
KQorc3RhdGljIHZvaWQgc3RvcmVfZHdvcmQoaW50IGZkLCBjb25zdCBzdHJ1Y3QgaW50ZWxfZXhl
Y3V0aW9uX2VuZ2luZTIgKmUpCiB7CiAJY29uc3QgaW50IGdlbiA9IGludGVsX2dlbihpbnRlbF9n
ZXRfZHJtX2RldmlkKGZkKSk7CiAJc3RydWN0IGRybV9pOTE1X2dlbV9leGVjX29iamVjdDIgb2Jq
WzJdOwpAQCAtNDYsMTQgKzQ2LDEzIEBAIHN0YXRpYyB2b2lkIHN0b3JlX2R3b3JkKGludCBmZCwg
dW5zaWduZWQgcmluZykKIAl1aW50MzJfdCBiYXRjaFsxNl07CiAJaW50IGk7CiAKLQlnZW1fcmVx
dWlyZV9yaW5nKGZkLCByaW5nKTsKLQlpZ3RfcmVxdWlyZShnZW1fY2FuX3N0b3JlX2R3b3JkKGZk
LCByaW5nKSk7CisJaWd0X3JlcXVpcmUoZ2VtX2NsYXNzX2Nhbl9zdG9yZV9kd29yZChmZCwgZS0+
Y2xhc3MpKTsKIAogCWludGVsX2RldGVjdF9hbmRfY2xlYXJfbWlzc2VkX2ludGVycnVwdHMoZmQp
OwogCW1lbXNldCgmZXhlY2J1ZiwgMCwgc2l6ZW9mKGV4ZWNidWYpKTsKIAlleGVjYnVmLmJ1ZmZl
cnNfcHRyID0gdG9fdXNlcl9wb2ludGVyKG9iaik7CiAJZXhlY2J1Zi5idWZmZXJfY291bnQgPSAy
OwotCWV4ZWNidWYuZmxhZ3MgPSByaW5nOworCWV4ZWNidWYuZmxhZ3MgPSBlLT5mbGFnczsKIAlp
ZiAoZ2VuID4gMyAmJiBnZW4gPCA2KQogCQlleGVjYnVmLmZsYWdzIHw9IEk5MTVfRVhFQ19TRUNV
UkU7CiAKQEAgLTk3LDcgKzk2LDggQEAgc3RhdGljIHZvaWQgc3RvcmVfZHdvcmQoaW50IGZkLCB1
bnNpZ25lZCByaW5nKQogfQogCiAjZGVmaW5lIFBBR0VTIDEKLXN0YXRpYyB2b2lkIHN0b3JlX2Nh
Y2hlbGluZXMoaW50IGZkLCB1bnNpZ25lZCByaW5nLCB1bnNpZ25lZCBpbnQgZmxhZ3MpCitzdGF0
aWMgdm9pZCBzdG9yZV9jYWNoZWxpbmVzKGludCBmZCwgY29uc3Qgc3RydWN0IGludGVsX2V4ZWN1
dGlvbl9lbmdpbmUyICplLAorCQkJICAgICB1bnNpZ25lZCBpbnQgZmxhZ3MpCiB7CiAJY29uc3Qg
aW50IGdlbiA9IGludGVsX2dlbihpbnRlbF9nZXRfZHJtX2RldmlkKGZkKSk7CiAJc3RydWN0IGRy
bV9pOTE1X2dlbV9leGVjX29iamVjdDIgKm9iajsKQEAgLTExMCwxMyArMTEwLDEyIEBAIHN0YXRp
YyB2b2lkIHN0b3JlX2NhY2hlbGluZXMoaW50IGZkLCB1bnNpZ25lZCByaW5nLCB1bnNpZ25lZCBp
bnQgZmxhZ3MpCiAJcmVsb2MgPSBjYWxsb2MoTkNBQ0hFTElORVMsIHNpemVvZigqcmVsb2MpKTsK
IAlpZ3RfYXNzZXJ0KHJlbG9jKTsKIAotCWdlbV9yZXF1aXJlX3JpbmcoZmQsIHJpbmcpOwotCWln
dF9yZXF1aXJlKGdlbV9jYW5fc3RvcmVfZHdvcmQoZmQsIHJpbmcpKTsKKwlpZ3RfcmVxdWlyZShn
ZW1fY2xhc3NfY2FuX3N0b3JlX2R3b3JkKGZkLCBlLT5jbGFzcykpOwogCiAJaW50ZWxfZGV0ZWN0
X2FuZF9jbGVhcl9taXNzZWRfaW50ZXJydXB0cyhmZCk7CiAJbWVtc2V0KCZleGVjYnVmLCAwLCBz
aXplb2YoZXhlY2J1ZikpOwogCWV4ZWNidWYuYnVmZmVyX2NvdW50ID0gZmxhZ3MgJiBQQUdFUyA/
IE5DQUNIRUxJTkVTICsgMSA6IDI7Ci0JZXhlY2J1Zi5mbGFncyA9IHJpbmc7CisJZXhlY2J1Zi5m
bGFncyA9IGUtPmZsYWdzOwogCWlmIChnZW4gPiAzICYmIGdlbiA8IDYpCiAJCWV4ZWNidWYuZmxh
Z3MgfD0gSTkxNV9FWEVDX1NFQ1VSRTsKIApAQCAtMTgwLDEyICsxNzksMTMgQEAgc3RhdGljIHZv
aWQgc3RvcmVfYWxsKGludCBmZCkKIHsKIAljb25zdCBpbnQgZ2VuID0gaW50ZWxfZ2VuKGludGVs
X2dldF9kcm1fZGV2aWQoZmQpKTsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNfb2JqZWN0MiBv
YmpbMl07CisJc3RydWN0IGludGVsX2V4ZWN1dGlvbl9lbmdpbmUyICplbmdpbmU7CiAJc3RydWN0
IGRybV9pOTE1X2dlbV9yZWxvY2F0aW9uX2VudHJ5IHJlbG9jWzMyXTsKIAlzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX2V4ZWNidWZmZXIyIGV4ZWNidWY7CiAJdW5zaWduZWQgZW5naW5lc1sxNl0sIHBlcm11
dGVkWzE2XTsKIAl1aW50MzJfdCBiYXRjaFsxNl07CiAJdWludDY0X3Qgb2Zmc2V0OwotCXVuc2ln
bmVkIGVuZ2luZSwgbmVuZ2luZTsKKwl1bnNpZ25lZCBuZW5naW5lOwogCWludCB2YWx1ZTsKIAlp
bnQgaSwgajsKIApAQCAtMjIwLDE0ICsyMjAsMTQgQEAgc3RhdGljIHZvaWQgc3RvcmVfYWxsKGlu
dCBmZCkKIAogCW5lbmdpbmUgPSAwOwogCWludGVsX2RldGVjdF9hbmRfY2xlYXJfbWlzc2VkX2lu
dGVycnVwdHMoZmQpOwotCWZvcl9lYWNoX3BoeXNpY2FsX2VuZ2luZShmZCwgZW5naW5lKSB7Ci0J
CWlmICghZ2VtX2Nhbl9zdG9yZV9kd29yZChmZCwgZW5naW5lKSkKKwlfX2Zvcl9lYWNoX3BoeXNp
Y2FsX2VuZ2luZShmZCwgZW5naW5lKSB7CisJCWlmICghZ2VtX2NsYXNzX2Nhbl9zdG9yZV9kd29y
ZChmZCwgZW5naW5lLT5jbGFzcykpCiAJCQljb250aW51ZTsKIAogCQlpZ3RfYXNzZXJ0KDIqKG5l
bmdpbmUrMSkqc2l6ZW9mKGJhdGNoKSA8PSA0MDk2KTsKIAogCQlleGVjYnVmLmZsYWdzICY9IH5F
TkdJTkVfTUFTSzsKLQkJZXhlY2J1Zi5mbGFncyB8PSBlbmdpbmU7CisJCWV4ZWNidWYuZmxhZ3Mg
fD0gZW5naW5lLT5mbGFnczsKIAogCQlqID0gMipuZW5naW5lOwogCQlyZWxvY1tqXS50YXJnZXRf
aGFuZGxlID0gb2JqWzBdLmhhbmRsZTsKQEAgLTI1OSw3ICsyNTksNyBAQCBzdGF0aWMgdm9pZCBz
dG9yZV9hbGwoaW50IGZkKQogCQlleGVjYnVmLmJhdGNoX3N0YXJ0X29mZnNldCA9IGoqc2l6ZW9m
KGJhdGNoKTsKIAkJZ2VtX2V4ZWNidWYoZmQsICZleGVjYnVmKTsKIAotCQllbmdpbmVzW25lbmdp
bmUrK10gPSBlbmdpbmU7CisJCWVuZ2luZXNbbmVuZ2luZSsrXSA9IGVuZ2luZS0+ZmxhZ3M7CiAJ
fQogCWdlbV9zeW5jKGZkLCBvYmpbMV0uaGFuZGxlKTsKIApAQCAtMzExLDcgKzMxMSw3IEBAIHN0
YXRpYyBpbnQgcHJpbnRfd2VsY29tZShpbnQgZmQpCiAKIGlndF9tYWluCiB7Ci0JY29uc3Qgc3Ry
dWN0IGludGVsX2V4ZWN1dGlvbl9lbmdpbmUgKmU7CisJY29uc3Qgc3RydWN0IGludGVsX2V4ZWN1
dGlvbl9lbmdpbmUyICplOwogCWludCBmZDsKIAogCWlndF9maXh0dXJlIHsKQEAgLTMyOSwxNSAr
MzI5LDE1IEBAIGlndF9tYWluCiAJCWlndF9mb3JrX2hhbmdfZGV0ZWN0b3IoZmQpOwogCX0KIAot
CWZvciAoZSA9IGludGVsX2V4ZWN1dGlvbl9lbmdpbmVzOyBlLT5uYW1lOyBlKyspIHsKKwlfX2Zv
cl9lYWNoX3BoeXNpY2FsX2VuZ2luZShmZCwgZSkgewogCQlpZ3Rfc3VidGVzdF9mKCJiYXNpYy0l
cyIsIGUtPm5hbWUpCi0JCQlzdG9yZV9kd29yZChmZCwgZS0+ZXhlY19pZCB8IGUtPmZsYWdzKTsK
KwkJCXN0b3JlX2R3b3JkKGZkLCBlKTsKIAogCQlpZ3Rfc3VidGVzdF9mKCJjYWNoZWxpbmVzLSVz
IiwgZS0+bmFtZSkKLQkJCXN0b3JlX2NhY2hlbGluZXMoZmQsIGUtPmV4ZWNfaWQgfCBlLT5mbGFn
cywgMCk7CisJCQlzdG9yZV9jYWNoZWxpbmVzKGZkLCBlLCAwKTsKIAogCQlpZ3Rfc3VidGVzdF9m
KCJwYWdlcy0lcyIsIGUtPm5hbWUpCi0JCQlzdG9yZV9jYWNoZWxpbmVzKGZkLCBlLT5leGVjX2lk
IHwgZS0+ZmxhZ3MsIFBBR0VTKTsKKwkJCXN0b3JlX2NhY2hlbGluZXMoZmQsIGUsIFBBR0VTKTsK
IAl9CiAKIAlpZ3Rfc3VidGVzdCgiYmFzaWMtYWxsIikKLS0gCjIuMjAuMQoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlz
dApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 59F931406F7
	for <lists+intel-gfx@lfdr.de>; Fri, 17 Jan 2020 10:52:52 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 070406F4C7;
	Fri, 17 Jan 2020 09:52:50 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B93486F4C4
 for <intel-gfx@lists.freedesktop.org>; Fri, 17 Jan 2020 09:52:46 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 17 Jan 2020 01:52:46 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,329,1574150400"; d="scan'208";a="424412517"
Received: from slisovsk-lenovo-ideapad-720s-13ikb.fi.intel.com ([10.237.72.89])
 by fmsmga005.fm.intel.com with ESMTP; 17 Jan 2020 01:52:44 -0800
From: Stanislav Lisovskiy <stanislav.lisovskiy@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 17 Jan 2020 11:50:25 +0200
Message-Id: <20200117095026.1113-5-stanislav.lisovskiy@intel.com>
X-Mailer: git-send-email 2.24.1.485.gad05a3d8e5
In-Reply-To: <20200117095026.1113-1-stanislav.lisovskiy@intel.com>
References: <20200117095026.1113-1-stanislav.lisovskiy@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v13 4/5] drm/i915: Manipulate DBuf slices
 properly
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U3RhcnQgbWFuaXB1bGF0aW5nIERCdWYgc2xpY2VzIGFzIGEgbWFzaywKYnV0IG5vdCBhcyBhIHRv
dGFsIG51bWJlciwgYXMgY3VycmVudCBhcHByb2FjaApkb2Vzbid0IGdpdmUgdXMgZnVsbCBjb250
cm9sIG9uIGFsbCBjb21iaW5hdGlvbnMKb2Ygc2xpY2VzLCB3aGljaCB3ZSBtaWdodCBuZWVkKGxp
a2UgZW5hYmxpbmcgUzIKb25seSBjYW4ndCBlbmFibGVkIGJ5IHNldHRpbmcgZW5hYmxlZF9zbGlj
ZXM9MSkuCgpSZW1vdmVkIHdyb25nIGNvZGUgZnJvbSBpbnRlbF9nZXRfZGRiX3NpemUgYXMKaXQg
ZG9lc24ndCBtYXRjaCB0byBCU3BlYy4gRm9yIG5vdyBzdGlsbCBqdXN0CnVzZSBEQnVmIHNsaWNl
IHVudGlsIHByb3BlciBhbGdvcml0aG0gaXMgaW1wbGVtZW50ZWQuCgpPdGhlciBtaW5vciBjb2Rl
IHJlZmFjdG9yaW5nIHRvIGdldCBwcmVwYXJlZApmb3IgbWFqb3IgREJ1ZiBhc3NpZ25tZW50IGNo
YW5nZXMgbGFuZGVkOgotIEFzIG5vdyBlbmFibGVkIHNsaWNlcyBjb250YWluIGEgbWFzawogIHdl
IHN0aWxsIG5lZWQgc29tZSB2YWx1ZSB3aGljaCBzaG91bGQKICByZWZsZWN0IGhvdyBtdWNoIERC
dWYgc2xpY2VzIGFyZSBzdXBwb3J0ZWQKICBieSB0aGUgcGxhdGZvcm0sIG5vdyBkZXZpY2UgaW5m
byBjb250YWlucwogIG51bV9zdXBwb3J0ZWRfZGJ1Zl9zbGljZXMuCi0gUmVtb3ZlZCB1bm5lZWRl
ZCBhc3NlcnRpb24gYXMgd2UgYXJlIG5vdwogIG1hbmlwdWxhdGluZyBzbGljZXMgaW4gYSBtb3Jl
IHByb3BlciB3YXkuCgp2MjogU3RhcnQgdXNpbmcgZW5hYmxlZF9zbGljZXMgaW4gZGV2X3ByaXYK
CnYzOiAiZW5hYmxlZF9zbGljZXMiIGlzIG5vdyAiZW5hYmxlZF9kYnVmX3NsaWNlc19tYXNrIiwK
ICAgIGFzIHRoaXMgbm93IHNpdHMgaW4gZGV2X3ByaXYgaW5kZXBlbmRlbnRseS4KCnY0OiAtIEZp
eGVkIGRlYnVnIHByaW50IGZvcm1hdHRpbmcgdG8gaGV4KE1hdHQgUm9wZXIpCiAgICAtIE9wdGlt
aXplZCBkYnVmIHNsaWNlIHVwZGF0ZXMgdG8gYmUgdXNlZCBvbmx5CiAgICAgIGlmIHNsaWNlIHVu
aW9uIGlzIGRpZmZlcmVudCBmcm9tIGN1cnJlbnQgY29uZihNYXR0IFJvcGVyKQogICAgLSBGaXhl
ZCBzb21lIGZ1bmN0aW9ucyB0byBiZSBzdGF0aWMoTWF0dCBSb3BlcikKICAgIC0gQ3JlYXRlZCBh
IHBhcmFtZXRlcml6ZWQgdmVyc2lvbiBmb3IgREJVRl9DVEwgdG8KICAgICAgc2ltcGxpZnkgREJ1
ZiBwcm9ncmFtbWluZyBjeWNsZShNYXR0IFJvcGVyKQogICAgLSBSZW1vdmVkIHVucmVxdXJlZCBm
aWVsZCBmcm9tIEdFTjEwX0ZFQVRVUkVTKE1hdHQgUm9wZXIpCgp2NTogLSBSZW1vdmVkIHJlZHVu
ZGFudCBwcm9ncmFtbWluZyBkYnVmIHNsaWNlcyBoZWxwZXIoVmlsbGUgU3lyasOkbMOkKQogICAg
LSBTdGFydGVkIHRvIHVzZSBwYXJhbWV0ZXJpemVkIGxvb3AgZm9yIGh3IHJlYWRvdXQgdG8gZ2V0
IHNsaWNlcwogICAgICAoVmlsbGUgU3lyasOkbMOkKQogICAgLSBBZGRlZCBiYWNrIGFzc2VydGlv
biBjaGVja2luZyBhbW91bnQgb2YgREJVRiBzbGljZXMgZW5hYmxlZAogICAgICBhZnRlciBEQyBz
dGF0ZXMgNS82IHRyYW5zaXRpb24sIGFsc28gYWRkZWQgbmV3IGFzc2VydGlvbgogICAgICBhcyBz
dGFydGluZyBmcm9tIElDTCBETUMgc2VlbXMgdG8gcmVzdG9yZSB0aGUgbGFzdCBEQnVmCiAgICAg
IHBvd2VyIHN0YXRlIHNldCwgcmF0aGVyIHRoYW4gcG93ZXIgdXAgYWxsIGRidWYgc2xpY2VzCiAg
ICAgIGFzIGFzc2VydGlvbiB3YXMgcHJldmlvdXNseSBleHBlY3RpbmcoVmlsbGUgU3lyasOkbMOk
KQoKdjY6IC0gTm93IHVzaW5nIGVudW0gZm9yIERCdWYgc2xpY2VzIGluIHRoaXMgcGF0Y2ggKFZp
bGxlIFN5cmrDpGzDpCkKICAgIC0gUmVtb3ZlZCBnZW4xMV9hc3NlcnRfZGJ1Zl9lbmFibGVkIGFu
ZCBwdXQgZ2VuOV9hc3NlcnRfZGJ1Zl9lbmFibGVkCiAgICAgIGJhY2ssIGFzIHdlIHJlYWxseSBu
ZWVkIHRvIGhhdmUgYSBzaW5nbGUgdW5pZmllZCBhc3NlcnQgaGVyZQogICAgICBob3dldmVyIGN1
cnJlbnRseSBlbmFibGluZyBhbHdheXMgc2xpY2UgMSBpcyBlbmZvcmNlZCBieSBCU3BlYywKICAg
ICAgc28gd2Ugd2lsbCBoYXZlIHRvIE9SIGVuYWJsZWQgc2xpY2VzIG1hc2sgd2l0aCAxIGluIG9y
ZGVyCiAgICAgIHRvIGJlIGNvbnNpc3RlbnQgd2l0aCBCU3BlYywgdGhhdCB3YXkgd2UgY2FuIHVu
aWZ5IHRoYXQKICAgICAgYXNzZXJ0aW9uIGFuZCBhZ2FpbnN0IHRoZSBhY3R1YWwgc3RhdGUgZnJv
bSB0aGUgZHJpdmVyLCBidXQKICAgICAgbm90IHNvbWUgaGFyZGNvZGVkIHZhbHVlLihjb25jbHVk
ZWQgd2l0aCBWaWxsZSkKICAgIC0gUmVtb3ZlIHBhcmFtZXRlcml6ZWQgREJVRl9DVEwgdmVyc2lv
biwgdG8gZXh0cmFjdCBpdCB0byBhbm90aGVyCiAgICAgIHBhdGNoLihWaWxsZSBTeXJqw6Rsw6Qp
CiAgICAtIFJlbW92ZWQgdW5uZWVkZWQgaGFyZGNvZGVkIHJldHVybiB2YWx1ZSBmb3Igb2xkZXIg
Z2VucyBmcm9tCiAgICAgIGludGVsX2VuYWJsZWRfZGJ1Zl9zbGljZXNfbWFzayAtIHRoaXMgbm93
IGlzIGhhbmRsZWQgaW4gYQogICAgICB1bmlmaWVkIG1hbm5lciBzaW5jZSBkZXZpY2UgaW5mbyBh
bnl3YXkgcmV0dXJucyBtYXggZGJ1ZiBzbGljZXMKICAgICAgYXMgMSBmb3Igb2xkZXIgcGxhdGZv
cm1zKE1hdHRoZXcgUm9wZXIpCiAgICAtIE5vdyB1c2luZyBJTlRFTF9JTkZPKGRldl9wcml2KS0+
bnVtX3N1cHBvcnRlZF9kYnVmX3NsaWNlcyBpbnN0ZWFkCiAgICAgIG9mIGludGVsX2RidWZfbWF4
X3NsaWNlcyBmdW5jdGlvbiBhcyBpdCBpcyB0cml2aWFsKE1hdHRoZXcgUm9wZXIpCgpTaWduZWQt
b2ZmLWJ5OiBTdGFuaXNsYXYgTGlzb3Zza2l5IDxzdGFuaXNsYXYubGlzb3Zza2l5QGludGVsLmNv
bT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyAgfCAy
MyArKy0tLQogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5jICAgIHwg
OTIgKysrKysrLS0tLS0tLS0tLS0tLQogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eV90eXBlcy5oICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAg
ICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BjaS5jICAgICAg
ICAgICAgICAgfCAgNSArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8u
aCAgICAgIHwgIDEgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyAgICAgICAgICAg
ICAgIHwgNTMgKysrLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmggICAg
ICAgICAgICAgICB8ICAyICstCiA4IGZpbGVzIGNoYW5nZWQsIDYzIGluc2VydGlvbnMoKyksIDEx
NyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlz
cGxheS5jCmluZGV4IDhiMDZlZjI5NjkzZS4uMDYxZGUxNjFiOTViIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtMTM3NzAsMTIgKzEzNzcwLDEy
IEBAIHN0YXRpYyB2b2lkIHZlcmlmeV93bV9zdGF0ZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywK
IAogCXNrbF9waXBlX2RkYl9nZXRfaHdfc3RhdGUoY3J0YywgaHctPmRkYl95LCBody0+ZGRiX3V2
KTsKIAotCWh3X2VuYWJsZWRfc2xpY2VzID0gaW50ZWxfZW5hYmxlZF9kYnVmX3NsaWNlc19udW0o
ZGV2X3ByaXYpOworCWh3X2VuYWJsZWRfc2xpY2VzID0gaW50ZWxfZW5hYmxlZF9kYnVmX3NsaWNl
c19tYXNrKGRldl9wcml2KTsKIAogCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDExICYmCi0J
ICAgIGh3X2VuYWJsZWRfc2xpY2VzICE9IGRldl9wcml2LT5lbmFibGVkX2RidWZfc2xpY2VzX251
bSkKLQkJRFJNX0VSUk9SKCJtaXNtYXRjaCBpbiBEQlVGIFNsaWNlcyAoZXhwZWN0ZWQgJXUsIGdv
dCAldSlcbiIsCi0JCQkgIGRldl9wcml2LT5lbmFibGVkX2RidWZfc2xpY2VzX251bSwKKwkgICAg
aHdfZW5hYmxlZF9zbGljZXMgIT0gZGV2X3ByaXYtPmVuYWJsZWRfZGJ1Zl9zbGljZXNfbWFzaykK
KwkJRFJNX0VSUk9SKCJtaXNtYXRjaCBpbiBEQlVGIFNsaWNlcyAoZXhwZWN0ZWQgMHgleCwgZ290
IDB4JXgpXG4iLAorCQkJICBkZXZfcHJpdi0+ZW5hYmxlZF9kYnVmX3NsaWNlc19tYXNrLAogCQkJ
ICBod19lbmFibGVkX3NsaWNlcyk7CiAKIAkvKiBwbGFuZXMgKi8KQEAgLTE1MTE5LDIyICsxNTEx
OSwyMyBAQCBzdGF0aWMgdm9pZCBpbnRlbF91cGRhdGVfdHJhbnNfcG9ydF9zeW5jX2NydGNzKHN0
cnVjdCBpbnRlbF9jcnRjICpjcnRjLAogc3RhdGljIHZvaWQgaWNsX2RidWZfc2xpY2VfcHJlX3Vw
ZGF0ZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIHsKIAlzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7Ci0JdTggaHdf
ZW5hYmxlZF9zbGljZXMgPSBkZXZfcHJpdi0+ZW5hYmxlZF9kYnVmX3NsaWNlc19udW07Ci0JdTgg
cmVxdWlyZWRfc2xpY2VzID0gc3RhdGUtPmVuYWJsZWRfZGJ1Zl9zbGljZXNfbnVtOworCXU4IGh3
X2VuYWJsZWRfc2xpY2VzID0gZGV2X3ByaXYtPmVuYWJsZWRfZGJ1Zl9zbGljZXNfbWFzazsKKwl1
OCByZXF1aXJlZF9zbGljZXMgPSBzdGF0ZS0+ZW5hYmxlZF9kYnVmX3NsaWNlc19tYXNrOworCXU4
IHNsaWNlc191bmlvbiA9IGh3X2VuYWJsZWRfc2xpY2VzIHwgcmVxdWlyZWRfc2xpY2VzOwogCiAJ
LyogSWYgMm5kIERCdWYgc2xpY2UgcmVxdWlyZWQsIGVuYWJsZSBpdCBoZXJlICovCi0JaWYgKElO
VEVMX0dFTihkZXZfcHJpdikgPj0gMTEgJiYgcmVxdWlyZWRfc2xpY2VzID4gaHdfZW5hYmxlZF9z
bGljZXMpCi0JCWljbF9kYnVmX3NsaWNlc191cGRhdGUoZGV2X3ByaXYsIHJlcXVpcmVkX3NsaWNl
cyk7CisJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTEgJiYgc2xpY2VzX3VuaW9uICE9IGh3
X2VuYWJsZWRfc2xpY2VzKQorCQlpY2xfZGJ1Zl9zbGljZXNfdXBkYXRlKGRldl9wcml2LCBzbGlj
ZXNfdW5pb24pOwogfQogCiBzdGF0aWMgdm9pZCBpY2xfZGJ1Zl9zbGljZV9wb3N0X3VwZGF0ZShz
dHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KHN0YXRlLT5iYXNlLmRldik7Ci0JdTggaHdfZW5hYmxl
ZF9zbGljZXMgPSBkZXZfcHJpdi0+ZW5hYmxlZF9kYnVmX3NsaWNlc19udW07Ci0JdTggcmVxdWly
ZWRfc2xpY2VzID0gc3RhdGUtPmVuYWJsZWRfZGJ1Zl9zbGljZXNfbnVtOworCXU4IGh3X2VuYWJs
ZWRfc2xpY2VzID0gZGV2X3ByaXYtPmVuYWJsZWRfZGJ1Zl9zbGljZXNfbWFzazsKKwl1OCByZXF1
aXJlZF9zbGljZXMgPSBzdGF0ZS0+ZW5hYmxlZF9kYnVmX3NsaWNlc19tYXNrOwogCiAJLyogSWYg
Mm5kIERCdWYgc2xpY2UgaXMgbm8gbW9yZSByZXF1aXJlZCBkaXNhYmxlIGl0ICovCi0JaWYgKElO
VEVMX0dFTihkZXZfcHJpdikgPj0gMTEgJiYgcmVxdWlyZWRfc2xpY2VzIDwgaHdfZW5hYmxlZF9z
bGljZXMpCisJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTEgJiYgcmVxdWlyZWRfc2xpY2Vz
ICE9IGh3X2VuYWJsZWRfc2xpY2VzKQogCQlpY2xfZGJ1Zl9zbGljZXNfdXBkYXRlKGRldl9wcml2
LCByZXF1aXJlZF9zbGljZXMpOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5jCmluZGV4IDA4MDY1NzIwMzkxZi4uYjg2ODQyYjFm
ZjdhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXlfcG93ZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXlfcG93ZXIuYwpAQCAtMTUsNiArMTUsNyBAQAogI2luY2x1ZGUgImludGVsX2Rpc3BsYXlfdHlw
ZXMuaCIKICNpbmNsdWRlICJpbnRlbF9kcGlvX3BoeS5oIgogI2luY2x1ZGUgImludGVsX2hvdHBs
dWcuaCIKKyNpbmNsdWRlICJpbnRlbF9wbS5oIgogI2luY2x1ZGUgImludGVsX3NpZGViYW5kLmgi
CiAjaW5jbHVkZSAiaW50ZWxfdGMuaCIKICNpbmNsdWRlICJpbnRlbF92Z2EuaCIKQEAgLTEwMjgs
MTEgKzEwMjksMTMgQEAgc3RhdGljIGJvb2wgZ2VuOV9kY19vZmZfcG93ZXJfd2VsbF9lbmFibGVk
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAogc3RhdGljIHZvaWQgZ2VuOV9h
c3NlcnRfZGJ1Zl9lbmFibGVkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIHsK
LQl1MzIgdG1wID0gSTkxNV9SRUFEKERCVUZfQ1RMKTsKKwl1OCBod19lbmFibGVkX2RidWZfc2xp
Y2VzID0gaW50ZWxfZW5hYmxlZF9kYnVmX3NsaWNlc19tYXNrKGRldl9wcml2KTsKKwl1OCBlbmFi
bGVkX2RidWZfc2xpY2VzID0gZGV2X3ByaXYtPmVuYWJsZWRfZGJ1Zl9zbGljZXNfbWFzazsKIAot
CVdBUk4oKHRtcCAmIChEQlVGX1BPV0VSX1NUQVRFIHwgREJVRl9QT1dFUl9SRVFVRVNUKSkgIT0K
LQkgICAgIChEQlVGX1BPV0VSX1NUQVRFIHwgREJVRl9QT1dFUl9SRVFVRVNUKSwKLQkgICAgICJV
bmV4cGVjdGVkIERCdWYgcG93ZXIgcG93ZXIgc3RhdGUgKDB4JTA4eClcbiIsIHRtcCk7CisJV0FS
Tihod19lbmFibGVkX2RidWZfc2xpY2VzICE9IGVuYWJsZWRfZGJ1Zl9zbGljZXMsCisJICAgICAi
VW5leHBlY3RlZCBEQnVmIHBvd2VyIHBvd2VyIHN0YXRlICgweCUwOHgsIGV4cGVjdGVkIDB4JTA4
eClcbiIsCisJICAgICBod19lbmFibGVkX2RidWZfc2xpY2VzLAorCSAgICAgZW5hYmxlZF9kYnVm
X3NsaWNlcyk7CiB9CiAKIHN0YXRpYyB2b2lkIGdlbjlfZGlzYWJsZV9kY19zdGF0ZXMoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQpAQCAtNDM4OCw4NiArNDM5MSw0OSBAQCBib29s
IGludGVsX2RidWZfc2xpY2Vfc2V0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwK
IAogc3RhdGljIHZvaWQgZ2VuOV9kYnVmX2VuYWJsZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpCiB7Ci0JaW50ZWxfZGJ1Zl9zbGljZV9zZXQoZGV2X3ByaXYsIERCVUZfQ1RMLCB0
cnVlKTsKKwlpY2xfZGJ1Zl9zbGljZXNfdXBkYXRlKGRldl9wcml2LCBCSVQoREJVRl9TMSkpOwog
fQogCiBzdGF0aWMgdm9pZCBnZW45X2RidWZfZGlzYWJsZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYpCiB7Ci0JaW50ZWxfZGJ1Zl9zbGljZV9zZXQoZGV2X3ByaXYsIERCVUZfQ1RM
LCBmYWxzZSk7Ci19Ci0KLXN0YXRpYyB1OCBpbnRlbF9kYnVmX21heF9zbGljZXMoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQotewotCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwg
MTEpCi0JCXJldHVybiAxOwotCXJldHVybiAyOworCWljbF9kYnVmX3NsaWNlc191cGRhdGUoZGV2
X3ByaXYsIDApOwogfQogCiB2b2lkIGljbF9kYnVmX3NsaWNlc191cGRhdGUoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJICAgIHU4IHJlcV9zbGljZXMpCiB7Ci0JY29uc3Qg
dTggaHdfZW5hYmxlZF9zbGljZXMgPSBkZXZfcHJpdi0+ZW5hYmxlZF9kYnVmX3NsaWNlc19udW07
Ci0JYm9vbCByZXQ7CisJaW50IGk7CisJaW50IG1heF9zbGljZXMgPSBJTlRFTF9JTkZPKGRldl9w
cml2KS0+bnVtX3N1cHBvcnRlZF9kYnVmX3NsaWNlczsKIAotCWlmIChyZXFfc2xpY2VzID4gaW50
ZWxfZGJ1Zl9tYXhfc2xpY2VzKGRldl9wcml2KSkgewotCQlEUk1fRVJST1IoIkludmFsaWQgbnVt
YmVyIG9mIGRidWYgc2xpY2VzIHJlcXVlc3RlZFxuIik7Ci0JCXJldHVybjsKLQl9CisJV0FSTiho
d2VpZ2h0OChyZXFfc2xpY2VzKSA+IG1heF9zbGljZXMsCisJICAgICAiSW52YWxpZCBudW1iZXIg
b2YgZGJ1ZiBzbGljZXMgcmVxdWVzdGVkXG4iKTsKIAotCWlmIChyZXFfc2xpY2VzID09IGh3X2Vu
YWJsZWRfc2xpY2VzIHx8IHJlcV9zbGljZXMgPT0gMCkKLQkJcmV0dXJuOworCURSTV9ERUJVR19L
TVMoIlVwZGF0aW5nIGRidWYgc2xpY2VzIHRvIDB4JXhcbiIsIHJlcV9zbGljZXMpOwogCi0JaWYg
KHJlcV9zbGljZXMgPiBod19lbmFibGVkX3NsaWNlcykKLQkJcmV0ID0gaW50ZWxfZGJ1Zl9zbGlj
ZV9zZXQoZGV2X3ByaXYsCi0JCQkJCSAgIERCVUZfQ1RMX1MoREJVRl9TMiksIHRydWUpOwotCWVs
c2UKLQkJcmV0ID0gaW50ZWxfZGJ1Zl9zbGljZV9zZXQoZGV2X3ByaXYsCi0JCQkJCSAgIERCVUZf
Q1RMX1MoREJVRl9TMiksIGZhbHNlKTsKKwlmb3IgKGkgPSAwOyBpIDwgbWF4X3NsaWNlczsgaSsr
KSB7CisJCWludGVsX2RidWZfc2xpY2Vfc2V0KGRldl9wcml2LAorCQkJCSAgICAgREJVRl9DVExf
UyhpKSwKKwkJCQkgICAgIChyZXFfc2xpY2VzICYgQklUKGkpKSAhPSAwKTsKKwl9CiAKLQlpZiAo
cmV0KQotCQlkZXZfcHJpdi0+ZW5hYmxlZF9kYnVmX3NsaWNlc19udW0gPSByZXFfc2xpY2VzOwor
CWRldl9wcml2LT5lbmFibGVkX2RidWZfc2xpY2VzX21hc2sgPSByZXFfc2xpY2VzOwogfQogCiBz
dGF0aWMgdm9pZCBpY2xfZGJ1Zl9lbmFibGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2KQogewotCUk5MTVfV1JJVEUoREJVRl9DVExfUyhEQlVGX1MxKSwKLQkJICAgSTkxNV9SRUFE
KERCVUZfQ1RMX1MoREJVRl9TMSkpIHwgREJVRl9QT1dFUl9SRVFVRVNUKTsKLQlJOTE1X1dSSVRF
KERCVUZfQ1RMX1MoREJVRl9TMiksCi0JCSAgIEk5MTVfUkVBRChEQlVGX0NUTF9TKERCVUZfUzIp
KSB8IERCVUZfUE9XRVJfUkVRVUVTVCk7Ci0JUE9TVElOR19SRUFEKERCVUZfQ1RMX1MoREJVRl9T
MikpOwotCi0JdWRlbGF5KDEwKTsKLQotCWlmICghKEk5MTVfUkVBRChEQlVGX0NUTF9TKERCVUZf
UzEpKSAmIERCVUZfUE9XRVJfU1RBVEUpIHx8Ci0JICAgICEoSTkxNV9SRUFEKERCVUZfQ1RMX1Mo
REJVRl9TMikpICYgREJVRl9QT1dFUl9TVEFURSkpCi0JCURSTV9FUlJPUigiREJ1ZiBwb3dlciBl
bmFibGUgdGltZW91dFxuIik7Ci0JZWxzZQotCQkvKgotCQkgKiBGSVhNRTogZm9yIG5vdyBwcmV0
ZW5kIHRoYXQgd2Ugb25seSBoYXZlIDEgc2xpY2UsIHNlZQotCQkgKiBpbnRlbF9lbmFibGVkX2Ri
dWZfc2xpY2VzX251bSgpLgotCQkgKi8KLQkJZGV2X3ByaXYtPmVuYWJsZWRfZGJ1Zl9zbGljZXNf
bnVtID0gMTsKKwkvKgorCSAqIEp1c3QgcG93ZXIgdXAgMSBzbGljZSwgd2Ugd2lsbAorCSAqIGZp
Z3VyZSBvdXQgbGF0ZXIgd2hpY2ggc2xpY2VzIHdlIGhhdmUgYW5kIHdoYXQgd2UgbmVlZC4KKwkg
Ki8KKwlpY2xfZGJ1Zl9zbGljZXNfdXBkYXRlKGRldl9wcml2LCBCSVQoREJVRl9TMSkpOwogfQog
CiBzdGF0aWMgdm9pZCBpY2xfZGJ1Zl9kaXNhYmxlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdikKIHsKLQlJOTE1X1dSSVRFKERCVUZfQ1RMX1MoREJVRl9TMSksCi0JCSAgIEk5MTVf
UkVBRChEQlVGX0NUTF9TKERCVUZfUzEpKSAmIH5EQlVGX1BPV0VSX1JFUVVFU1QpOwotCUk5MTVf
V1JJVEUoREJVRl9DVExfUyhEQlVGX1MyKSwKLQkJICAgSTkxNV9SRUFEKERCVUZfQ1RMX1MoREJV
Rl9TMikpICYgfkRCVUZfUE9XRVJfUkVRVUVTVCk7Ci0JUE9TVElOR19SRUFEKERCVUZfQ1RMX1Mo
REJVRl9TMikpOwotCi0JdWRlbGF5KDEwKTsKLQotCWlmICgoSTkxNV9SRUFEKERCVUZfQ1RMX1Mo
REJVRl9TMSkpICYgREJVRl9QT1dFUl9TVEFURSkgfHwKLQkgICAgKEk5MTVfUkVBRChEQlVGX0NU
TF9TKERCVUZfUzIpKSAmIERCVUZfUE9XRVJfU1RBVEUpKQotCQlEUk1fRVJST1IoIkRCdWYgcG93
ZXIgZGlzYWJsZSB0aW1lb3V0IVxuIik7Ci0JZWxzZQotCQkvKgotCQkgKiBGSVhNRTogZm9yIG5v
dyBwcmV0ZW5kIHRoYXQgdGhlIGZpcnN0IHNsaWNlIGlzIGFsd2F5cwotCQkgKiBlbmFibGVkLCBz
ZWUgaW50ZWxfZW5hYmxlZF9kYnVmX3NsaWNlc19udW0oKS4KLQkJICovCi0JCWRldl9wcml2LT5l
bmFibGVkX2RidWZfc2xpY2VzX251bSA9IDE7CisJLyoKKwkgKiBBcyBvZiBCU3BlYyBTbGljZSAx
IGlzIGFsd2F5cyBlbmFibGVkLgorCSAqLworCWljbF9kYnVmX3NsaWNlc191cGRhdGUoZGV2X3By
aXYsIEJJVChEQlVGX1MxKSk7CiB9CiAKIHN0YXRpYyB2b2lkIGljbF9tYnVzX2luaXQoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAppbmRleCA2ZGNhOTBlYmNhMzUuLjA5ZjE0
ZTllNzg2MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5X3R5cGVzLmgKQEAgLTUxOCw3ICs1MTgsNyBAQCBzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0
YXRlIHsKIAlzdHJ1Y3Qgc2tsX2RkYl92YWx1ZXMgd21fcmVzdWx0czsKIAogCS8qIE51bWJlciBv
ZiBlbmFibGVkIERCdWYgc2xpY2VzICovCi0JdTggZW5hYmxlZF9kYnVmX3NsaWNlc19udW07CisJ
dTggZW5hYmxlZF9kYnVmX3NsaWNlc19tYXNrOwogCiAJc3RydWN0IGk5MTVfc3dfZmVuY2UgY29t
bWl0X3JlYWR5OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5o
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRleCA5ZGJmMmU1N2IwMWIuLjVi
ODk1YWQzOGZiYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBAIC0xMjA4LDcgKzEyMDgsNyBA
QCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSB7CiAJCWJvb2wgZGlzdHJ1c3RfYmlvc193bTsKIAl9
IHdtOwogCi0JdTggZW5hYmxlZF9kYnVmX3NsaWNlc19udW07IC8qIEdFTjExIGhhcyBjb25maWd1
cmFibGUgMiBzbGljZXMgKi8KKwl1OCBlbmFibGVkX2RidWZfc2xpY2VzX21hc2s7IC8qIEdFTjEx
IGhhcyBjb25maWd1cmFibGUgMiBzbGljZXMgKi8KIAogCXN0cnVjdCBkcmFtX2luZm8gewogCQli
b29sIHZhbGlkOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wY2kuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGNpLmMKaW5kZXggODNmMDE0MDFiOGI1Li42YzZk
YWE0NGM0MzkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGNpLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wY2kuYwpAQCAtNjE1LDcgKzYxNSw4IEBAIHN0
YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGV2aWNlX2luZm8gY2h2X2luZm8gPSB7CiAJLmhhc19n
dF91YyA9IDEsIFwKIAkuZGlzcGxheS5oYXNfaGRjcCA9IDEsIFwKIAkuZGlzcGxheS5oYXNfaXBj
ID0gMSwgXAotCS5kZGJfc2l6ZSA9IDg5NgorCS5kZGJfc2l6ZSA9IDg5NiwgXAorCS5udW1fc3Vw
cG9ydGVkX2RidWZfc2xpY2VzID0gMQogCiAjZGVmaW5lIFNLTF9QTEFURk9STSBcCiAJR0VOOV9G
RUFUVVJFUywgXApAQCAtNjUwLDYgKzY1MSw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxf
ZGV2aWNlX2luZm8gc2tsX2d0NF9pbmZvID0gewogI2RlZmluZSBHRU45X0xQX0ZFQVRVUkVTIFwK
IAlHRU4oOSksIFwKIAkuaXNfbHAgPSAxLCBcCisJLm51bV9zdXBwb3J0ZWRfZGJ1Zl9zbGljZXMg
PSAxLCBcCiAJLmRpc3BsYXkuaGFzX2hvdHBsdWcgPSAxLCBcCiAJLmVuZ2luZV9tYXNrID0gQklU
KFJDUzApIHwgQklUKFZDUzApIHwgQklUKEJDUzApIHwgQklUKFZFQ1MwKSwgXAogCS5waXBlX21h
c2sgPSBCSVQoUElQRV9BKSB8IEJJVChQSVBFX0IpIHwgQklUKFBJUEVfQyksIFwKQEAgLTc3NCw2
ICs3NzYsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2RldmljZV9pbmZvIGNubF9pbmZv
ID0gewogCX0sIFwKIAlHRU4oMTEpLCBcCiAJLmRkYl9zaXplID0gMjA0OCwgXAorCS5udW1fc3Vw
cG9ydGVkX2RidWZfc2xpY2VzID0gMiwgXAogCS5oYXNfbG9naWNhbF9yaW5nX2Vsc3EgPSAxLCBc
CiAJLmNvbG9yID0geyAuZGVnYW1tYV9sdXRfc2l6ZSA9IDMzLCAuZ2FtbWFfbHV0X3NpemUgPSAy
NjIxNDUgfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2Vf
aW5mby5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uaAppbmRleCAy
NzI1Y2I3ZmMxNjkuLjdkNGQxMjJkMjE4MiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfZGV2aWNlX2luZm8uaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9k
ZXZpY2VfaW5mby5oCkBAIC0xODAsNiArMTgwLDcgQEAgc3RydWN0IGludGVsX2RldmljZV9pbmZv
IHsKIAl9IGRpc3BsYXk7CiAKIAl1MTYgZGRiX3NpemU7IC8qIGluIGJsb2NrcyAqLworCXU4IG51
bV9zdXBwb3J0ZWRfZGJ1Zl9zbGljZXM7IC8qIG51bWJlciBvZiBEQnVmIHNsaWNlcyAqLwogCiAJ
LyogUmVnaXN0ZXIgb2Zmc2V0cyBmb3IgdGhlIHZhcmlvdXMgZGlzcGxheSBwaXBlcyBhbmQgdHJh
bnNjb2RlcnMgKi8KIAlpbnQgcGlwZV9vZmZzZXRzW0k5MTVfTUFYX1RSQU5TQ09ERVJTXTsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9wbS5jCmluZGV4IGYyMjUwOWY4YWMyOC4uYjRiMjkxZDQyNDRiIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX3BtLmMKQEAgLTM2NDQsMjYgKzM2NDQsMTggQEAgYm9vbCBpbGtfZGlz
YWJsZV9scF93bShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJcmV0dXJuIF9p
bGtfZGlzYWJsZV9scF93bShkZXZfcHJpdiwgV01fRElSVFlfTFBfQUxMKTsKIH0KIAotdTggaW50
ZWxfZW5hYmxlZF9kYnVmX3NsaWNlc19udW0oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2KQordTggaW50ZWxfZW5hYmxlZF9kYnVmX3NsaWNlc19tYXNrKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdikKIHsKLQl1OCBlbmFibGVkX2RidWZfc2xpY2VzX251bTsKLQotCS8q
IFNsaWNlIDEgd2lsbCBhbHdheXMgYmUgZW5hYmxlZCAqLwotCWVuYWJsZWRfZGJ1Zl9zbGljZXNf
bnVtID0gMTsKLQotCS8qIEdlbiBwcmlvciB0byBHRU4xMSBoYXZlIG9ubHkgb25lIERCdWYgc2xp
Y2UgKi8KLQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA8IDExKQotCQlyZXR1cm4gZW5hYmxlZF9k
YnVmX3NsaWNlc19udW07CisJaW50IGk7CisJaW50IG1heF9zbGljZXMgPSBJTlRFTF9JTkZPKGRl
dl9wcml2KS0+bnVtX3N1cHBvcnRlZF9kYnVmX3NsaWNlczsKKwl1OCBlbmFibGVkX3NsaWNlc19t
YXNrID0gMDsKIAotCS8qCi0JICogRklYTUU6IGZvciBub3cgd2UnbGwgb25seSBldmVyIHVzZSAx
IHNsaWNlOyBwcmV0ZW5kIHRoYXQgd2UgaGF2ZQotCSAqIG9ubHkgdGhhdCAxIHNsaWNlIGVuYWJs
ZWQgdW50aWwgd2UgaGF2ZSBhIHByb3BlciB3YXkgZm9yIG9uLWRlbWFuZAotCSAqIHRvZ2dsaW5n
IG9mIHRoZSBzZWNvbmQgc2xpY2UuCi0JICovCi0JaWYgKDAgJiYgSTkxNV9SRUFEKERCVUZfQ1RM
X1MoREJVRl9TMikpICYgREJVRl9QT1dFUl9TVEFURSkKLQkJZW5hYmxlZF9kYnVmX3NsaWNlc19u
dW0rKzsKKwlmb3IgKGkgPSAwOyBpIDwgbWF4X3NsaWNlczsgaSsrKSB7CisJCWlmIChJOTE1X1JF
QUQoREJVRl9DVExfUyhpKSkgJiBEQlVGX1BPV0VSX1NUQVRFKQorCQkJZW5hYmxlZF9zbGljZXNf
bWFzayB8PSBCSVQoaSk7CisJfQogCi0JcmV0dXJuIGVuYWJsZWRfZGJ1Zl9zbGljZXNfbnVtOwor
CXJldHVybiBlbmFibGVkX3NsaWNlc19tYXNrOwogfQogCiAvKgpAQCAtMzg3MSw4ICszODYzLDYg
QEAgc3RhdGljIHUxNiBpbnRlbF9nZXRfZGRiX3NpemUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2LAogewogCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSA9IGNydGNfc3Rh
dGUtPnVhcGkuc3RhdGU7CiAJc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqaW50ZWxfc3RhdGUg
PSB0b19pbnRlbF9hdG9taWNfc3RhdGUoc3RhdGUpOwotCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxh
eV9tb2RlICphZGp1c3RlZF9tb2RlOwotCXU2NCB0b3RhbF9kYXRhX2J3OwogCXUxNiBkZGJfc2l6
ZSA9IElOVEVMX0lORk8oZGV2X3ByaXYpLT5kZGJfc2l6ZTsKIAogCVdBUk5fT04oZGRiX3NpemUg
PT0gMCk7CkBAIC0zODgwLDIzICszODcwLDggQEAgc3RhdGljIHUxNiBpbnRlbF9nZXRfZGRiX3Np
emUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCWlmIChJTlRFTF9HRU4oZGV2
X3ByaXYpIDwgMTEpCiAJCXJldHVybiBkZGJfc2l6ZSAtIDQ7IC8qIDQgYmxvY2tzIGZvciBieXBh
c3MgcGF0aCBhbGxvY2F0aW9uICovCiAKLQlhZGp1c3RlZF9tb2RlID0gJmNydGNfc3RhdGUtPmh3
LmFkanVzdGVkX21vZGU7Ci0JdG90YWxfZGF0YV9idyA9IHRvdGFsX2RhdGFfcmF0ZSAqIGRybV9t
b2RlX3ZyZWZyZXNoKGFkanVzdGVkX21vZGUpOwotCi0JLyoKLQkgKiAxMkdCL3MgaXMgbWF4aW11
bSBCVyBzdXBwb3J0ZWQgYnkgc2luZ2xlIERCdWYgc2xpY2UuCi0JICoKLQkgKiBGSVhNRSBkYnVm
IHNsaWNlIGNvZGUgaXMgYnJva2VuOgotCSAqIC0gbXVzdCB3YWl0IGZvciBwbGFuZXMgdG8gc3Rv
cCB1c2luZyB0aGUgc2xpY2UgYmVmb3JlIHBvd2VyaW5nIGl0IG9mZgotCSAqIC0gcGxhbmUgc3Ry
YWRkbGluZyBib3RoIHNsaWNlcyBpcyBpbGxlZ2FsIGluIG11bHRpLXBpcGUgc2NlbmFyaW9zCi0J
ICogLSBzaG91bGQgdmFsaWRhdGUgd2Ugc3RheSB3aXRoaW4gdGhlIGh3IGJhbmR3aWR0aCBsaW1p
dHMKLQkgKi8KLQlpZiAoMCAmJiAobnVtX2FjdGl2ZSA+IDEgfHwgdG90YWxfZGF0YV9idyA+PSBH
QnBzKDEyKSkpIHsKLQkJaW50ZWxfc3RhdGUtPmVuYWJsZWRfZGJ1Zl9zbGljZXNfbnVtID0gMjsK
LQl9IGVsc2UgewotCQlpbnRlbF9zdGF0ZS0+ZW5hYmxlZF9kYnVmX3NsaWNlc19udW0gPSAxOwot
CQlkZGJfc2l6ZSAvPSAyOwotCX0KKwlpbnRlbF9zdGF0ZS0+ZW5hYmxlZF9kYnVmX3NsaWNlc19t
YXNrID0gQklUKERCVUZfUzEpOworCWRkYl9zaXplIC89IDI7CiAKIAlyZXR1cm4gZGRiX3NpemU7
CiB9CkBAIC00MDkzLDggKzQwNjgsOCBAQCB2b2lkIHNrbF9waXBlX2RkYl9nZXRfaHdfc3RhdGUo
c3RydWN0IGludGVsX2NydGMgKmNydGMsCiAKIHZvaWQgc2tsX2RkYl9nZXRfaHdfc3RhdGUoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogewotCWRldl9wcml2LT5lbmFibGVkX2Ri
dWZfc2xpY2VzX251bSA9Ci0JCQkJaW50ZWxfZW5hYmxlZF9kYnVmX3NsaWNlc19udW0oZGV2X3By
aXYpOworCWRldl9wcml2LT5lbmFibGVkX2RidWZfc2xpY2VzX21hc2sgPQorCQkJCWludGVsX2Vu
YWJsZWRfZGJ1Zl9zbGljZXNfbWFzayhkZXZfcHJpdik7CiB9CiAKIC8qCkBAIC01MjM2LDcgKzUy
MTEsNyBAQCBza2xfY29tcHV0ZV9kZGIoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUp
CiAJc3RydWN0IGludGVsX2NydGMgKmNydGM7CiAJaW50IHJldCwgaTsKIAotCXN0YXRlLT5lbmFi
bGVkX2RidWZfc2xpY2VzX251bSA9IGRldl9wcml2LT5lbmFibGVkX2RidWZfc2xpY2VzX251bTsK
KwlzdGF0ZS0+ZW5hYmxlZF9kYnVmX3NsaWNlc19tYXNrID0gZGV2X3ByaXYtPmVuYWJsZWRfZGJ1
Zl9zbGljZXNfbWFzazsKIAogCWZvcl9lYWNoX29sZG5ld19pbnRlbF9jcnRjX2luX3N0YXRlKHN0
YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0ZSwKIAkJCQkJICAgIG5ld19jcnRjX3N0YXRlLCBpKSB7
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5oIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaW50ZWxfcG0uaAppbmRleCAyMmZkMmRhZjYwOGUuLmQ2MGE4NTQyMWM1YSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uaAorKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5oCkBAIC0zMiw3ICszMiw3IEBAIHZvaWQgZzR4X3dtX2dl
dF9od19zdGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCB2bHZf
d21fZ2V0X2h3X3N0YXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lk
IGlsa193bV9nZXRfaHdfc3RhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsK
IHZvaWQgc2tsX3dtX2dldF9od19zdGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYpOwotdTggaW50ZWxfZW5hYmxlZF9kYnVmX3NsaWNlc19udW0oc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2KTsKK3U4IGludGVsX2VuYWJsZWRfZGJ1Zl9zbGljZXNfbWFzayhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBza2xfcGlwZV9kZGJfZ2V0X2h3
X3N0YXRlKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAogCQkJICAgICAgIHN0cnVjdCBza2xfZGRi
X2VudHJ5ICpkZGJfeSwKIAkJCSAgICAgICBzdHJ1Y3Qgc2tsX2RkYl9lbnRyeSAqZGRiX3V2KTsK
LS0gCjIuMjQuMS40ODUuZ2FkMDVhM2Q4ZTUKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeAo=

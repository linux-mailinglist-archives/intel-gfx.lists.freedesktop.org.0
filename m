Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4639EBF5FD
	for <lists+intel-gfx@lfdr.de>; Thu, 26 Sep 2019 17:35:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2E2A86ED87;
	Thu, 26 Sep 2019 15:35:04 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 56D2F6ED87
 for <intel-gfx@lists.freedesktop.org>; Thu, 26 Sep 2019 15:35:03 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Sep 2019 08:35:02 -0700
X-IronPort-AV: E=Sophos;i="5.64,552,1559545200"; d="scan'208";a="341276503"
Received: from ideak-desk.fi.intel.com ([10.237.68.142])
 by orsmga004-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Sep 2019 08:35:00 -0700
Date: Thu, 26 Sep 2019 18:34:00 +0300
From: Imre Deak <imre.deak@intel.com>
To: =?iso-8859-1?Q?Jos=E9?= Roberto de Souza <jose.souza@intel.com>
Message-ID: <20190926153400.GC20817@ideak-desk.fi.intel.com>
References: <20190925234509.29505-1-jose.souza@intel.com>
 <20190925234509.29505-3-jose.souza@intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190925234509.29505-3-jose.souza@intel.com>
User-Agent: Mutt/1.9.4 (2018-02-28)
Subject: Re: [Intel-gfx] [PATCH v4 2/4] drm/i915/tgl: Add dkl phy
 programming sequences
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Reply-To: imre.deak@intel.com
Cc: intel-gfx@lists.freedesktop.org, Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCBTZXAgMjUsIDIwMTkgYXQgMDQ6NDU6MDdQTSAtMDcwMCwgSm9zw6kgUm9iZXJ0byBk
ZSBTb3V6YSB3cm90ZToKPiBGcm9tOiBDbGludG9uIEEgVGF5bG9yIDxjbGludG9uLmEudGF5bG9y
QGludGVsLmNvbT4KPiAKPiBBZGRlZCBES0wgUGh5IHNlcXVlbmNlcyBhbmQgaGVscGVycyBmdW5j
dGlvbnMgdG8gcHJvZ3JhbSB2b2x0YWdlCj4gc3dpbmcsIGNsb2NrIGdhdGluZyBhbmQgZHAgbW9k
ZS4KPiAKPiBJdCBpcyBub3Qgd3JpdHRlbiBpbiBEUCBlbmFibGluZyBzZXF1ZW5jZSBidXQgIlBI
WSBDbG9ja2dhdGluZwo+IHByb2dyYW1taW5nIiBzdGF0ZXMgdGhhdCBjbG9jayBnYXRpbmcgc2hv
dWxkIGJlIGVuYWJsZWQgYWZ0ZXIgdGhlCj4gbGluayB0cmFpbmluZyBidXQgZG9pbmcgc28gY2F1
c2VzIGFsbCB0aGUgZm9sbG93aW5nIHRyYWluaW5ncyB0byBmYWlsCj4gc28gbm90IGVuYWJsaW5n
IGl0IGZvci4KPiAKPiB2MjoKPiBTZXR0aW5nIHRoZSByaWdodCBISVBfSU5ERVhfUkVHIGJpdHMg
KEpvc8OpKQo+IAo+IHYzOgo+IEFkZGluZyB0aGUgbWVhbmluZyBvZiBlYWNoIGNvbHVtbiBvZiB0
Z2xfZGtsX3BoeV9kZGlfdHJhbnNsYXRpb25zCj4gQWRkaW5nIGlmIGdlbiA+PSAxMiBvbiBpbnRl
bF9kZGlfaGRtaV9sZXZlbCgpIGFuZAo+IGludGVsX2RkaV9wcmVfZW5hYmxlX2hkbWkoKSBpbnN0
ZWFkIG9mIHJldXNlIHBhcnQgb2YgZ2VuID49IDExIGlmCj4gCj4gdjQ6Cj4gTW92ZWQgdGhlIERQ
X01PREUgbGFuZSBwcm9ncmFtaW5nIHRvIGFub3RoZXIgcGF0Y2ggYXMgSUNMIGFsc28KPiBuZWVk
ZWQgaXQKPiBTaGFyaW5nIGljbF9waHlfc2V0X2Nsb2NrX2dhdGluZygpIGFuZCBpY2xfcHJvZ3Jh
bV9tZ19kcF9tb2RlKCkgd2l0aAo+IFRHTCBhcyBiaXRzIGFuZCBwcm9ncmFtaW5nIGFzIG5vdyBp
dCBhbG1vc3QgaWRlbnRpY2FsIHRvIElDTAo+IAo+IEJTcGVjOiA0OTI5Mgo+IEJTcGVjOiA0OTE5
MAo+IAo+IENjOiBJbXJlIERlYWsgPGltcmUuZGVha0BpbnRlbC5jb20+Cj4gQ2M6IEx1Y2FzIERl
IE1hcmNoaSA8bHVjYXMuZGVtYXJjaGlAaW50ZWwuY29tPgo+IFNpZ25lZC1vZmYtYnk6IEpvc8Op
IFJvYmVydG8gZGUgU291emEgPGpvc2Uuc291emFAaW50ZWwuY29tPgo+IFNpZ25lZC1vZmYtYnk6
IENsaW50b24gQSBUYXlsb3IgPGNsaW50b24uYS50YXlsb3JAaW50ZWwuY29tPgo+IC0tLQo+ICBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jIHwgMTc1ICsrKysrKysrKysr
KysrKysrKysrLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggICAgICAgICAg
fCAgIDggLS0KPiAgMiBmaWxlcyBjaGFuZ2VkLCAxNTUgaW5zZXJ0aW9ucygrKSwgMjggZGVsZXRp
b25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGRpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaS5jCj4gaW5k
ZXggMzE2Y2VkYjE2OTM1Li40ZGE3OTQwZjFmY2YgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGRpLmMKPiBAQCAtNTg2LDYgKzU4NiwyNiBAQCBzdGF0aWMgY29uc3Qg
c3RydWN0IGljbF9tZ19waHlfZGRpX2J1Zl90cmFucyBpY2xfbWdfcGh5X2RkaV90cmFuc2xhdGlv
bnNbXSA9IHsKPiAgCXsgMHgwLCAweDAwLCAweDAwIH0sCS8qIDMgICAgICAgICAgICAgIDAgICAq
Lwo+ICB9Owo+ICAKPiArc3RydWN0IHRnbF9ka2xfcGh5X2RkaV9idWZfdHJhbnMgewo+ICsJdTMy
IGRrbF92c3dpbmdfY29udHJvbDsKPiArCXUzMiBka2xfcHJlc2hvb3RfY29udHJvbDsKPiArCXUz
MiBka2xfZGVfZW1waGFzaXNfY29udHJvbDsKPiArfTsKPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1
Y3QgdGdsX2RrbF9waHlfZGRpX2J1Zl90cmFucyB0Z2xfZGtsX3BoeV9kZGlfdHJhbnNsYXRpb25z
W10gPSB7Cj4gKwkJCQkvKiBWUwlwcmUtZW1wCU5vbi10cmFucyBtVglQcmUtZW1waCBkQiAqLwo+
ICsJeyAweDcsIDB4MCwgMHgwMCB9LAkvKiAwCTAJNDAwbVYJCTAgZEIgKi8KPiArCXsgMHg1LCAw
eDAsIDB4MDMgfSwJLyogMAkxCTQwMG1WCQkzLjUgZEIgKi8KPiArCXsgMHgyLCAweDAsIDB4MGIg
fSwJLyogMAkyCTQwMG1WCQk2IGRCICovCj4gKwl7IDB4MCwgMHgwLCAweDE5IH0sCS8qIDAJMwk0
MDBtVgkJOS41IGRCICovCj4gKwl7IDB4NSwgMHgwLCAweDAwIH0sCS8qIDEJMAk2MDBtVgkJMCBk
QiAqLwo+ICsJeyAweDIsIDB4MCwgMHgwMyB9LAkvKiAxCTEJNjAwbVYJCTMuNSBkQiAqLwo+ICsJ
eyAweDAsIDB4MCwgMHgxNCB9LAkvKiAxCTIJNjAwbVYJCTYgZEIgKi8KPiArCXsgMHgyLCAweDAs
IDB4MDAgfSwJLyogMgkwCTgwMG1WCQkwIGRCICovCj4gKwl7IDB4MCwgMHgwLCAweDBCIH0sCS8q
IDIJMQk4MDBtVgkJMy41IGRCICovCj4gKwl7IDB4MCwgMHgwLCAweDAwIH0sCS8qIDMJMAkxMjAw
bVYJCTAgZEIgSERNSSBkZWZhdWx0ICovCj4gK307Cj4gKwo+ICBzdGF0aWMgY29uc3Qgc3RydWN0
IGRkaV9idWZfdHJhbnMgKgo+ICBiZHdfZ2V0X2J1Zl90cmFuc19lZHAoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2LCBpbnQgKm5fZW50cmllcykKPiAgewo+IEBAIC04NzIsNyArODky
LDE0IEBAIHN0YXRpYyBpbnQgaW50ZWxfZGRpX2hkbWlfbGV2ZWwoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2LCBlbnVtIHBvcnQgcG9yCj4gIAo+ICAJbGV2ZWwgPSBkZXZfcHJpdi0+
dmJ0LmRkaV9wb3J0X2luZm9bcG9ydF0uaGRtaV9sZXZlbF9zaGlmdDsKPiAgCj4gLQlpZiAoSU5U
RUxfR0VOKGRldl9wcml2KSA+PSAxMSkgewo+ICsJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0g
MTIpIHsKPiArCQlpZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKQo+ICsJCQlp
Y2xfZ2V0X2NvbWJvX2J1Zl90cmFucyhkZXZfcHJpdiwgSU5URUxfT1VUUFVUX0hETUksCj4gKwkJ
CQkJCTAsICZuX2VudHJpZXMpOwo+ICsJCWVsc2UKPiArCQkJbl9lbnRyaWVzID0gQVJSQVlfU0la
RSh0Z2xfZGtsX3BoeV9kZGlfdHJhbnNsYXRpb25zKTsKPiArCQlkZWZhdWx0X2VudHJ5ID0gbl9l
bnRyaWVzIC0gMTsKPiArCX0gZWxzZSBpZiAoSU5URUxfR0VOKGRldl9wcml2KSA9PSAxMSkgewo+
ICAJCWlmIChpbnRlbF9waHlfaXNfY29tYm8oZGV2X3ByaXYsIHBoeSkpCj4gIAkJCWljbF9nZXRf
Y29tYm9fYnVmX3RyYW5zKGRldl9wcml2LCBJTlRFTF9PVVRQVVRfSERNSSwKPiAgCQkJCQkJMCwg
Jm5fZW50cmllcyk7Cj4gQEAgLTIzMzQsNyArMjM2MSwxMyBAQCB1OCBpbnRlbF9kZGlfZHBfdm9s
dGFnZV9tYXgoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIpCj4gIAllbnVtIHBoeSBwaHkg
PSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgcG9ydCk7Cj4gIAlpbnQgbl9lbnRyaWVzOwo+
ICAKPiAtCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDExKSB7Cj4gKwlpZiAoSU5URUxfR0VO
KGRldl9wcml2KSA+PSAxMikgewo+ICsJCWlmIChpbnRlbF9waHlfaXNfY29tYm8oZGV2X3ByaXYs
IHBoeSkpCj4gKwkJCWljbF9nZXRfY29tYm9fYnVmX3RyYW5zKGRldl9wcml2LCBlbmNvZGVyLT50
eXBlLAo+ICsJCQkJCQlpbnRlbF9kcC0+bGlua19yYXRlLCAmbl9lbnRyaWVzKTsKPiArCQllbHNl
Cj4gKwkJCW5fZW50cmllcyA9IEFSUkFZX1NJWkUodGdsX2RrbF9waHlfZGRpX3RyYW5zbGF0aW9u
cyk7Cj4gKwl9IGVsc2UgaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPT0gMTEpIHsKPiAgCQlpZiAo
aW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKQo+ICAJCQlpY2xfZ2V0X2NvbWJvX2J1
Zl90cmFucyhkZXZfcHJpdiwgZW5jb2Rlci0+dHlwZSwKPiAgCQkJCQkJaW50ZWxfZHAtPmxpbmtf
cmF0ZSwgJm5fZW50cmllcyk7Cj4gQEAgLTI3NzYsNiArMjgwOSw2MyBAQCBzdGF0aWMgdm9pZCBp
Y2xfZGRpX3Zzd2luZ19zZXF1ZW5jZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKPiAg
CQlpY2xfbWdfcGh5X2RkaV92c3dpbmdfc2VxdWVuY2UoZW5jb2RlciwgbGlua19jbG9jaywgbGV2
ZWwpOwo+ICB9Cj4gIAo+ICtzdGF0aWMgdm9pZAo+ICt0Z2xfZGtsX3BoeV9kZGlfdnN3aW5nX3Nl
cXVlbmNlKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLCBpbnQgbGlua19jbG9jaywKPiAr
CQkJCXUzMiBsZXZlbCkKPiArewo+ICsJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7Cj4gKwllbnVtIHRjX3BvcnQgdGNfcG9ydCA9
IGludGVsX3BvcnRfdG9fdGMoZGV2X3ByaXYsIGVuY29kZXItPnBvcnQpOwo+ICsJY29uc3Qgc3Ry
dWN0IHRnbF9ka2xfcGh5X2RkaV9idWZfdHJhbnMgKmRkaV90cmFuc2xhdGlvbnM7Cj4gKwl1MzIg
bl9lbnRyaWVzLCB2YWwsIGxuOwo+ICsKPiArCW5fZW50cmllcyA9IEFSUkFZX1NJWkUodGdsX2Rr
bF9waHlfZGRpX3RyYW5zbGF0aW9ucyk7Cj4gKwlkZGlfdHJhbnNsYXRpb25zID0gdGdsX2RrbF9w
aHlfZGRpX3RyYW5zbGF0aW9uczsKPiArCj4gKwlpZiAobGV2ZWwgPj0gbl9lbnRyaWVzKQo+ICsJ
CWxldmVsID0gbl9lbnRyaWVzIC0gMTsKPiArCj4gKwlmb3IgKGxuID0gMDsgbG4gPCAyOyBsbisr
KSB7CgpuaXQ6CglkcGNudGxfdmFsID0gREtMX1RYX1ZTV0lOR19DT05UUk9MKC4uLikgfCAuLi47
CglkcGNudGxfbWFzayA9IH4oREtMX1RYX1BSRVNIT09UX0NPRUZGX01BU0sgfCAuLi4pOwoKPiAr
CQlJOTE1X1dSSVRFKEhJUF9JTkRFWF9SRUcodGNfcG9ydCksIEhJUF9JTkRFWF9WQUwodGNfcG9y
dCwgbG4pKTsKPiArCj4gKwkJLyogQWxsIHRoZSByZWdpc3RlcnMgYXJlIFJNVyAqLwo+ICsJCXZh
bCA9IEk5MTVfUkVBRChES0xfVFhfRFBDTlRMMCh0Y19wb3J0KSk7CgoJdmFsICY9IH5kcGNudF9t
YXNrOwoJdmFsIHw9IGRwY250X3ZhbDsKCj4gKwkJdmFsICY9IH4oREtMX1RYX1BSRVNIT09UX0NP
RUZGX01BU0sgfAo+ICsJCQkgREtMX1RYX0RFX0VNUEFIU0lTX0NPRUZGX01BU0sgfAo+ICsJCQkg
REtMX1RYX1ZTV0lOR19DT05UUk9MX01BU0spOwo+ICsJCXZhbCB8PSBES0xfVFhfVlNXSU5HX0NP
TlRST0woZGRpX3RyYW5zbGF0aW9uc1tsZXZlbF0uZGtsX3Zzd2luZ19jb250cm9sKTsKPiArCQl2
YWwgfD0gREtMX1RYX0RFX0VNUEhBU0lTX0NPRUZGKGRkaV90cmFuc2xhdGlvbnNbbGV2ZWxdLmRr
bF9kZV9lbXBoYXNpc19jb250cm9sKTsKPiArCQl2YWwgfD0gREtMX1RYX1BSRVNIT09UX0NPRUZG
KGRkaV90cmFuc2xhdGlvbnNbbGV2ZWxdLmRrbF9wcmVzaG9vdF9jb250cm9sKTsKPiArCQlJOTE1
X1dSSVRFKERLTF9UWF9EUENOVEwwKHRjX3BvcnQpLCB2YWwpOwo+ICsKPiArCQl2YWwgPSBJOTE1
X1JFQUQoREtMX1RYX0RQQ05UTDEodGNfcG9ydCkpOwoKCXZhbCAmPSB+ZHBjbnRfbWFzazsKCXZh
bCB8PSBkcGNudF92YWw7Cgo+ICsJCXZhbCAmPSB+KERLTF9UWF9QUkVTSE9PVF9DT0VGRl9NQVNL
IHwKPiArCQkJIERLTF9UWF9ERV9FTVBBSFNJU19DT0VGRl9NQVNLIHwKPiArCQkJIERLTF9UWF9W
U1dJTkdfQ09OVFJPTF9NQVNLKTsKPiArCQl2YWwgfD0gREtMX1RYX1ZTV0lOR19DT05UUk9MKGRk
aV90cmFuc2xhdGlvbnNbbGV2ZWxdLmRrbF92c3dpbmdfY29udHJvbCk7Cj4gKwkJdmFsIHw9IERL
TF9UWF9ERV9FTVBIQVNJU19DT0VGRihkZGlfdHJhbnNsYXRpb25zW2xldmVsXS5ka2xfZGVfZW1w
aGFzaXNfY29udHJvbCk7Cj4gKwkJdmFsIHw9IERLTF9UWF9QUkVTSE9PVF9DT0VGRihkZGlfdHJh
bnNsYXRpb25zW2xldmVsXS5ka2xfcHJlc2hvb3RfY29udHJvbCk7Cj4gKwkJSTkxNV9XUklURShE
S0xfVFhfRFBDTlRMMSh0Y19wb3J0KSwgdmFsKTsKPiArCj4gKwkJdmFsID0gSTkxNV9SRUFEKERL
TF9UWF9EUENOVEwyKHRjX3BvcnQpKTsKPiArCQl2YWwgJj0gfkRLTF9UWF9EUDIwQklUTU9ERTsK
PiArCQlJOTE1X1dSSVRFKERLTF9UWF9EUENOVEwyKHRjX3BvcnQpLCB2YWwpOwo+ICsJfQo+ICt9
Cj4gKwo+ICtzdGF0aWMgdm9pZCB0Z2xfZGRpX3Zzd2luZ19zZXF1ZW5jZShzdHJ1Y3QgaW50ZWxf
ZW5jb2RlciAqZW5jb2RlciwKPiArCQkJCSAgICBpbnQgbGlua19jbG9jaywKPiArCQkJCSAgICB1
MzIgbGV2ZWwsCj4gKwkJCQkgICAgZW51bSBpbnRlbF9vdXRwdXRfdHlwZSB0eXBlKQo+ICt7Cj4g
KwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXItPmJh
c2UuZGV2KTsKPiArCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBl
bmNvZGVyLT5wb3J0KTsKPiArCj4gKwlpZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBw
aHkpKQo+ICsJCWljbF9jb21ib19waHlfZGRpX3Zzd2luZ19zZXF1ZW5jZShlbmNvZGVyLCBsZXZl
bCwgdHlwZSk7Cj4gKwllbHNlCj4gKwkJdGdsX2RrbF9waHlfZGRpX3Zzd2luZ19zZXF1ZW5jZShl
bmNvZGVyLCBsaW5rX2Nsb2NrLCBsZXZlbCk7Cj4gK30KPiArCj4gIHN0YXRpYyB1MzIgdHJhbnNs
YXRlX3NpZ25hbF9sZXZlbChpbnQgc2lnbmFsX2xldmVscykKPiAgewo+ICAJaW50IGk7Cj4gQEAg
LTI4MDcsNyArMjg5NywxMCBAQCB1MzIgYnh0X3NpZ25hbF9sZXZlbHMoc3RydWN0IGludGVsX2Rw
ICppbnRlbF9kcCkKPiAgCXN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyID0gJmRwb3J0LT5i
YXNlOwo+ICAJaW50IGxldmVsID0gaW50ZWxfZGRpX2RwX2xldmVsKGludGVsX2RwKTsKPiAgCj4g
LQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMSkKPiArCWlmIChJTlRFTF9HRU4oZGV2X3By
aXYpID49IDEyKQo+ICsJCXRnbF9kZGlfdnN3aW5nX3NlcXVlbmNlKGVuY29kZXIsIGludGVsX2Rw
LT5saW5rX3JhdGUsCj4gKwkJCQkJbGV2ZWwsIGVuY29kZXItPnR5cGUpOwo+ICsJZWxzZSBpZiAo
SU5URUxfR0VOKGRldl9wcml2KSA+PSAxMSkKPiAgCQlpY2xfZGRpX3Zzd2luZ19zZXF1ZW5jZShl
bmNvZGVyLCBpbnRlbF9kcC0+bGlua19yYXRlLAo+ICAJCQkJCWxldmVsLCBlbmNvZGVyLT50eXBl
KTsKPiAgCWVsc2UgaWYgKElTX0NBTk5PTkxBS0UoZGV2X3ByaXYpKQo+IEBAIC0zMDcxLDM4ICsz
MTY0LDYxIEBAIGljbF9waHlfc2V0X2Nsb2NrX2dhdGluZyhzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9w
b3J0ICpkaWdfcG9ydCwgYm9vbCBlbmFibGUpCj4gIAkgICAgICAgTUdfRFBfTU9ERV9DRkdfR0FP
TlBXUl9HQVRJTkc7Cj4gIAo+ICAJZm9yIChsbiA9IDA7IGxuIDwgMjsgbG4rKykgewo+IC0JCXZh
bCA9IEk5MTVfUkVBRChNR19EUF9NT0RFKGxuLCBwb3J0KSk7Cj4gKwkJaWYgKElOVEVMX0dFTihk
ZXZfcHJpdikgPj0gMTIpIHsKPiArCQkJSTkxNV9XUklURShISVBfSU5ERVhfUkVHKHRjX3BvcnQp
LCBISVBfSU5ERVhfVkFMKHRjX3BvcnQsIGxuKSk7Cj4gKwkJCXZhbCA9IEk5MTVfUkVBRChES0xf
RFBfTU9ERSh0Y19wb3J0KSk7Cj4gKwkJfSBlbHNlIHsKPiArCQkJdmFsID0gSTkxNV9SRUFEKE1H
X0RQX01PREUobG4sIHBvcnQpKTsKPiArCQl9Cj4gKwo+ICAJCWlmIChlbmFibGUpCj4gIAkJCXZh
bCB8PSBiaXRzOwo+ICAJCWVsc2UKPiAgCQkJdmFsICY9IH5iaXRzOwo+IC0JCUk5MTVfV1JJVEUo
TUdfRFBfTU9ERShsbiwgcG9ydCksIHZhbCk7Cj4gKwo+ICsJCWlmIChJTlRFTF9HRU4oZGV2X3By
aXYpID49IDEyKQo+ICsJCQlJOTE1X1dSSVRFKERLTF9EUF9NT0RFKHRjX3BvcnQpLCB2YWwpOwo+
ICsJCWVsc2UKPiArCQkJSTkxNV9XUklURShNR19EUF9NT0RFKGxuLCBwb3J0KSwgdmFsKTsKPiAg
CX0KPiAgCj4gLQliaXRzID0gTUdfTUlTQ19TVVMwX0NGR19UUjJQV1JfR0FUSU5HIHwgTUdfTUlT
Q19TVVMwX0NGR19DTDJQV1JfR0FUSU5HIHwKPiAtCSAgICAgICBNR19NSVNDX1NVUzBfQ0ZHX0dB
T05QV1JfR0FUSU5HIHwgTUdfTUlTQ19TVVMwX0NGR19UUlBXUl9HQVRJTkcgfAo+IC0JICAgICAg
IE1HX01JU0NfU1VTMF9DRkdfQ0wxUFdSX0dBVElORyB8IE1HX01JU0NfU1VTMF9DRkdfREdQV1Jf
R0FUSU5HOwo+ICsJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPT0gMTEpIHsKCm5pdDoKCWlmIChH
RU4gPj0gMTIpCgkJcmV0dXJuOwoKUmV2aWV3ZWQtYnk6IEltcmUgRGVhayA8aW1yZS5kZWFrQGlu
dGVsLmNvbT4KCj4gKwkJYml0cyA9IE1HX01JU0NfU1VTMF9DRkdfVFIyUFdSX0dBVElORyB8Cj4g
KwkJICAgICAgIE1HX01JU0NfU1VTMF9DRkdfQ0wyUFdSX0dBVElORyB8Cj4gKwkJICAgICAgIE1H
X01JU0NfU1VTMF9DRkdfR0FPTlBXUl9HQVRJTkcgfAo+ICsJCSAgICAgICBNR19NSVNDX1NVUzBf
Q0ZHX1RSUFdSX0dBVElORyB8Cj4gKwkJICAgICAgIE1HX01JU0NfU1VTMF9DRkdfQ0wxUFdSX0dB
VElORyB8Cj4gKwkJICAgICAgIE1HX01JU0NfU1VTMF9DRkdfREdQV1JfR0FUSU5HOwo+ICAKPiAt
CXZhbCA9IEk5MTVfUkVBRChNR19NSVNDX1NVUzAodGNfcG9ydCkpOwo+IC0JaWYgKGVuYWJsZSkK
PiAtCQl2YWwgfD0gKGJpdHMgfCBNR19NSVNDX1NVUzBfU1VTQ0xLX0RZTkNMS0dBVEVfTU9ERSgz
KSk7Cj4gLQllbHNlCj4gLQkJdmFsICY9IH4oYml0cyB8IE1HX01JU0NfU1VTMF9TVVNDTEtfRFlO
Q0xLR0FURV9NT0RFX01BU0spOwo+IC0JSTkxNV9XUklURShNR19NSVNDX1NVUzAodGNfcG9ydCks
IHZhbCk7Cj4gKwkJdmFsID0gSTkxNV9SRUFEKE1HX01JU0NfU1VTMCh0Y19wb3J0KSk7Cj4gKwkJ
aWYgKGVuYWJsZSkKPiArCQkJdmFsIHw9IChiaXRzIHwgTUdfTUlTQ19TVVMwX1NVU0NMS19EWU5D
TEtHQVRFX01PREUoMykpOwo+ICsJCWVsc2UKPiArCQkJdmFsICY9IH4oYml0cyB8IE1HX01JU0Nf
U1VTMF9TVVNDTEtfRFlOQ0xLR0FURV9NT0RFX01BU0spOwo+ICsJCUk5MTVfV1JJVEUoTUdfTUlT
Q19TVVMwKHRjX3BvcnQpLCB2YWwpOwo+ICsJfQo+ICB9Cj4gIAo+ICBzdGF0aWMgdm9pZCBpY2xf
cHJvZ3JhbV9tZ19kcF9tb2RlKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19w
b3J0KQo+ICB7Cj4gIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1
KGludGVsX2RpZ19wb3J0LT5iYXNlLmJhc2UuZGV2KTsKPiAgCWVudW0gcG9ydCBwb3J0ID0gaW50
ZWxfZGlnX3BvcnQtPmJhc2UucG9ydDsKPiArCWVudW0gdGNfcG9ydCB0Y19wb3J0ID0gaW50ZWxf
cG9ydF90b190YyhkZXZfcHJpdiwgcG9ydCk7Cj4gIAl1MzIgbG4wLCBsbjEsIHBpbl9hc3NpZ25t
ZW50Owo+ICAJdTggd2lkdGg7Cj4gIAo+ICAJaWYgKGludGVsX2RpZ19wb3J0LT50Y19tb2RlID09
IFRDX1BPUlRfVEJUX0FMVCkKPiAgCQlyZXR1cm47Cj4gIAo+IC0JbG4wID0gSTkxNV9SRUFEKE1H
X0RQX01PREUoMCwgcG9ydCkpOwo+IC0JbG4xID0gSTkxNV9SRUFEKE1HX0RQX01PREUoMSwgcG9y
dCkpOwo+ICsJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIpIHsKPiArCQlJOTE1X1dSSVRF
KEhJUF9JTkRFWF9SRUcodGNfcG9ydCksIEhJUF9JTkRFWF9WQUwodGNfcG9ydCwgMHgwKSk7Cj4g
KwkJbG4wID0gSTkxNV9SRUFEKERLTF9EUF9NT0RFKHRjX3BvcnQpKTsKPiArCQlJOTE1X1dSSVRF
KEhJUF9JTkRFWF9SRUcodGNfcG9ydCksIEhJUF9JTkRFWF9WQUwodGNfcG9ydCwgMHgxKSk7Cj4g
KwkJbG4xID0gSTkxNV9SRUFEKERLTF9EUF9NT0RFKHRjX3BvcnQpKTsKPiArCX0gZWxzZSB7Cj4g
KwkJbG4wID0gSTkxNV9SRUFEKE1HX0RQX01PREUoMCwgcG9ydCkpOwo+ICsJCWxuMSA9IEk5MTVf
UkVBRChNR19EUF9NT0RFKDEsIHBvcnQpKTsKPiArCX0KPiAgCj4gIAlsbjAgJj0gfihNR19EUF9N
T0RFX0NGR19EUF9YMV9NT0RFIHwgTUdfRFBfTU9ERV9DRkdfRFBfWDFfTU9ERSk7Cj4gIAlsbjEg
Jj0gfihNR19EUF9NT0RFX0NGR19EUF9YMV9NT0RFIHwgTUdfRFBfTU9ERV9DRkdfRFBfWDJfTU9E
RSk7Cj4gQEAgLTMxNTcsOCArMzI3MywxNSBAQCBzdGF0aWMgdm9pZCBpY2xfcHJvZ3JhbV9tZ19k
cF9tb2RlKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0KQo+ICAJCU1J
U1NJTkdfQ0FTRShwaW5fYXNzaWdubWVudCk7Cj4gIAl9Cj4gIAo+IC0JSTkxNV9XUklURShNR19E
UF9NT0RFKDAsIHBvcnQpLCBsbjApOwo+IC0JSTkxNV9XUklURShNR19EUF9NT0RFKDEsIHBvcnQp
LCBsbjEpOwo+ICsJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTIpIHsKPiArCQlJOTE1X1dS
SVRFKEhJUF9JTkRFWF9SRUcodGNfcG9ydCksIEhJUF9JTkRFWF9WQUwodGNfcG9ydCwgMHgwKSk7
Cj4gKwkJSTkxNV9XUklURShES0xfRFBfTU9ERSh0Y19wb3J0KSwgbG4wKTsKPiArCQlJOTE1X1dS
SVRFKEhJUF9JTkRFWF9SRUcodGNfcG9ydCksIEhJUF9JTkRFWF9WQUwodGNfcG9ydCwgMHgxKSk7
Cj4gKwkJSTkxNV9XUklURShES0xfRFBfTU9ERSh0Y19wb3J0KSwgbG4xKTsKPiArCX0gZWxzZSB7
Cj4gKwkJSTkxNV9XUklURShNR19EUF9NT0RFKDAsIHBvcnQpLCBsbjApOwo+ICsJCUk5MTVfV1JJ
VEUoTUdfRFBfTU9ERSgxLCBwb3J0KSwgbG4xKTsKPiArCX0KPiAgfQo+ICAKPiAgc3RhdGljIHZv
aWQgaW50ZWxfZHBfc2lua19zZXRfZmVjX3JlYWR5KHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAs
Cj4gQEAgLTMyNjMsNyArMzM4Niw3IEBAIHN0YXRpYyB2b2lkIHRnbF9kZGlfcHJlX2VuYWJsZV9k
cChzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKPiAgCWljbF9waHlfc2V0X2Nsb2NrX2dh
dGluZyhkaWdfcG9ydCwgZmFsc2UpOwo+ICAKPiAgCS8qIDcuZSAqLwo+IC0JaWNsX2RkaV92c3dp
bmdfc2VxdWVuY2UoZW5jb2RlciwgY3J0Y19zdGF0ZS0+cG9ydF9jbG9jaywgbGV2ZWwsCj4gKwl0
Z2xfZGRpX3Zzd2luZ19zZXF1ZW5jZShlbmNvZGVyLCBjcnRjX3N0YXRlLT5wb3J0X2Nsb2NrLCBs
ZXZlbCwKPiAgCQkJCWVuY29kZXItPnR5cGUpOwo+ICAKPiAgCS8qIDcuZiAqLwo+IEBAIC0zMjk1
LDYgKzM0MTgsMTUgQEAgc3RhdGljIHZvaWQgdGdsX2RkaV9wcmVfZW5hYmxlX2RwKHN0cnVjdCBp
bnRlbF9lbmNvZGVyICplbmNvZGVyLAo+ICAJLyogNy5rICovCj4gIAlpbnRlbF9kcF9zdG9wX2xp
bmtfdHJhaW4oaW50ZWxfZHApOwo+ICAKPiArCS8qCj4gKwkgKiBUT0RPOiBlbmFibGUgY2xvY2sg
Z2F0aW5nCj4gKwkgKgo+ICsJICogSXQgaXMgbm90IHdyaXR0ZW4gaW4gRFAgZW5hYmxpbmcgc2Vx
dWVuY2UgYnV0ICJQSFkgQ2xvY2tnYXRpbmcKPiArCSAqIHByb2dyYW1taW5nIiBzdGF0ZXMgdGhh
dCBjbG9jayBnYXRpbmcgc2hvdWxkIGJlIGVuYWJsZWQgYWZ0ZXIgdGhlCj4gKwkgKiBsaW5rIHRy
YWluaW5nIGJ1dCBkb2luZyBzbyBjYXVzZXMgYWxsIHRoZSBmb2xsb3dpbmcgdHJhaW5pbmdzIHRv
IGZhaWwKPiArCSAqIHNvIG5vdCBlbmFibGluZyBpdCBmb3Igbm93Lgo+ICsJICovCj4gKwo+ICAJ
LyogNy5sICovCj4gIAlpbnRlbF9kZGlfZW5hYmxlX2ZlYyhlbmNvZGVyLCBjcnRjX3N0YXRlKTsK
PiAgCWludGVsX2RzY19lbmFibGUoZW5jb2RlciwgY3J0Y19zdGF0ZSk7Cj4gQEAgLTM0MDIsNyAr
MzUzNCwxMCBAQCBzdGF0aWMgdm9pZCBpbnRlbF9kZGlfcHJlX2VuYWJsZV9oZG1pKHN0cnVjdCBp
bnRlbF9lbmNvZGVyICplbmNvZGVyLAo+ICAJaWNsX3Byb2dyYW1fbWdfZHBfbW9kZShkaWdfcG9y
dCk7Cj4gIAlpY2xfcGh5X3NldF9jbG9ja19nYXRpbmcoZGlnX3BvcnQsIGZhbHNlKTsKPiAgCj4g
LQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMSkKPiArCWlmIChJTlRFTF9HRU4oZGV2X3By
aXYpID49IDEyKQo+ICsJCXRnbF9kZGlfdnN3aW5nX3NlcXVlbmNlKGVuY29kZXIsIGNydGNfc3Rh
dGUtPnBvcnRfY2xvY2ssCj4gKwkJCQkJbGV2ZWwsIElOVEVMX09VVFBVVF9IRE1JKTsKPiArCWVs
c2UgaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPT0gMTEpCj4gIAkJaWNsX2RkaV92c3dpbmdfc2Vx
dWVuY2UoZW5jb2RlciwgY3J0Y19zdGF0ZS0+cG9ydF9jbG9jaywKPiAgCQkJCQlsZXZlbCwgSU5U
RUxfT1VUUFVUX0hETUkpOwo+ICAJZWxzZSBpZiAoSVNfQ0FOTk9OTEFLRShkZXZfcHJpdikpCj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3JlZy5oCj4gaW5kZXggYmNmNDQ5YzFkMTUyLi43ZjZiNTlhYTYzNDgg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKPiBAQCAtMTAyNDUsMTQgKzEwMjQ1LDYgQEAg
ZW51bSBza2xfcG93ZXJfZ2F0ZSB7Cj4gIAkJCQkJCSAgICAgX0RLTF9UWF9EVzE4KQo+ICAKPiAg
I2RlZmluZSBfREtMX0RQX01PREUJCQkJCTB4QTAKPiAtI2RlZmluZSAgREtMX0RQX01PREVfQ0ZH
X0dBT05QV1JfR0FUSU5HCQkoMSA8PCAxKQo+IC0jZGVmaW5lICBES0xfRFBfTU9ERV9DRkdfRElH
UFdSX0dBVElORwkJKDEgPDwgMikKPiAtI2RlZmluZSAgREtMX0RQX01PREVfQ0ZHX0NMTlBXUl9H
QVRJTkcJCSgxIDw8IDMpCj4gLSNkZWZpbmUgIERLTF9EUF9NT0RFX0NGR19UUlBXUl9HQVRJTkcJ
CSgxIDw8IDQpCj4gLSNkZWZpbmUgIERLTF9EUF9NT0RFX0NGR19UUjJQV1JfR0FUSU5HCQkoMSA8
PCA1KQo+IC0jZGVmaW5lICBES0xfRFBfTU9ERV9DRkdfR0FUSU5HX0NUUkxfTUFTSwkoMHgxZiA8
PCAxKQo+IC0jZGVmaW5lICBES0xfRFBfTU9ERV9DRkdfRFBfWDFfTU9ERQkJCSgxIDw8IDYpCj4g
LSNkZWZpbmUgIERLTF9EUF9NT0RFX0NGR19EUF9YMl9NT0RFCQkJKDEgPDwgNykKPiAgI2RlZmlu
ZSBES0xfRFBfTU9ERSh0Y19wb3J0KSBfTU1JTyhfUE9SVCh0Y19wb3J0LCBcCj4gIAkJCQkJCSAg
ICAgX0RLTF9QSFkxX0JBU0UsIFwKPiAgCQkJCQkJICAgICBfREtMX1BIWTJfQkFTRSkgKyBcCj4g
LS0gCj4gMi4yMy4wCj4gCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVs
LWdmeA==

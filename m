Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6FFCEDC2FF
	for <lists+intel-gfx@lfdr.de>; Fri, 18 Oct 2019 12:45:00 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4D2066E11F;
	Fri, 18 Oct 2019 10:44:58 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6FF5B6E11F
 for <intel-gfx@lists.freedesktop.org>; Fri, 18 Oct 2019 10:44:56 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 18 Oct 2019 03:44:55 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,311,1566889200"; d="scan'208";a="186788642"
Received: from lgrafter-mobl2.ger.corp.intel.com (HELO
 mwahaha-bdw.ger.corp.intel.com) ([10.252.29.114])
 by orsmga007.jf.intel.com with ESMTP; 18 Oct 2019 03:44:53 -0700
From: Matthew Auld <matthew.auld@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 18 Oct 2019 11:44:48 +0100
Message-Id: <20191018104450.19100-1-matthew.auld@intel.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 1/3] drm/i915: enumerate and init each
 supported region
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogQWJkaWVsIEphbnVsZ3VlIDxhYmRpZWwuamFudWxndWVAbGludXguaW50ZWwuY29tPgoK
Tm90aGluZyB0byBlbnVtZXJhdGUgeWV0Li4uCgpTaWduZWQtb2ZmLWJ5OiBBYmRpZWwgSmFudWxn
dWUgPGFiZGllbC5qYW51bGd1ZUBsaW51eC5pbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IE1hdHRo
ZXcgQXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KQ2M6IEpvb25hcyBMYWh0aW5lbiA8am9v
bmFzLmxhaHRpbmVuQGxpbnV4LmludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IENocmlzIFdpbHNvbiA8
Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmggICAgICAgICAgICAgICB8ICA3ICsrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZW1fZ3R0LmMgICAgICAgICAgIHwgNTYgKysrKysrKysrKysrKysrKy0tLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uaCAgICAgIHwgIDIgKwogZHJpdmVycy9ncHUvZHJt
L2k5MTUvaW50ZWxfbWVtb3J5X3JlZ2lvbi5oICAgIHwgMTYgKysrKysrCiAuLi4vZ3B1L2RybS9p
OTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYyAgfCAgNiArKwogNSBmaWxlcyBjaGFuZ2Vk
LCA4MCBpbnNlcnRpb25zKCspLCA3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5o
CmluZGV4IDQwZTkyM2IwYzJjOC4uZmFmNjQ1ODAyNzEwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2
LmgKQEAgLTY4NCw2ICs2ODQsOCBAQCBzdHJ1Y3QgaTkxNV9nZW1fbW0gewogCSAqLwogCXN0cnVj
dCB2ZnNtb3VudCAqZ2VtZnM7CiAKKwlzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbiAqcmVnaW9u
c1tJTlRFTF9SRUdJT05fVU5LTk9XTl07CisKIAlzdHJ1Y3Qgbm90aWZpZXJfYmxvY2sgb29tX25v
dGlmaWVyOwogCXN0cnVjdCBub3RpZmllcl9ibG9jayB2bWFwX25vdGlmaWVyOwogCXN0cnVjdCBz
aHJpbmtlciBzaHJpbmtlcjsKQEAgLTE3ODMsNiArMTc4NSw4IEBAIElTX1NVQlBMQVRGT1JNKGNv
bnN0IHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCiAjZGVmaW5lIEhBU19JUEMoZGV2
X3ByaXYpCQkgKElOVEVMX0lORk8oZGV2X3ByaXYpLT5kaXNwbGF5Lmhhc19pcGMpCiAKKyNkZWZp
bmUgSEFTX1JFR0lPTihpOTE1LCBpKSAoSU5URUxfSU5GTyhpOTE1KS0+bWVtb3J5X3JlZ2lvbnMg
JiAoaSkpCisKICNkZWZpbmUgSEFTX0dUX1VDKGRldl9wcml2KQkoSU5URUxfSU5GTyhkZXZfcHJp
diktPmhhc19ndF91YykKIAogLyogSGF2aW5nIEd1QyBpcyBub3QgdGhlIHNhbWUgYXMgdXNpbmcg
R3VDICovCkBAIC0yMDAxLDYgKzIwMDUsOSBAQCBpbnQgX19tdXN0X2NoZWNrIGk5MTVfZ2VtX2V2
aWN0X2Zvcl9ub2RlKHN0cnVjdCBpOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLAogCQkJCQkgdW5zaWdu
ZWQgaW50IGZsYWdzKTsKIGludCBpOTE1X2dlbV9ldmljdF92bShzdHJ1Y3QgaTkxNV9hZGRyZXNz
X3NwYWNlICp2bSk7CiAKK3ZvaWQgaTkxNV9nZW1fY2xlYW51cF9tZW1vcnlfcmVnaW9ucyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7CitpbnQgaTkxNV9nZW1faW5pdF9tZW1vcnlfcmVn
aW9ucyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7CisKIC8qIGk5MTVfZ2VtX2ludGVy
bmFsLmMgKi8KIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICoKIGk5MTVfZ2VtX29iamVjdF9j
cmVhdGVfaW50ZXJuYWwoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dlbV9ndHQuYwppbmRleCA3YjE1YmI4OTE5NzAuLjdiOGUzMGM3MmY4NiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKQEAgLTI3NDQsNiArMjc0NCw1MiBAQCBp
bnQgaTkxNV9pbml0X2dndHQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJcmV0dXJu
IDA7CiB9CiAKK3ZvaWQgaTkxNV9nZW1fY2xlYW51cF9tZW1vcnlfcmVnaW9ucyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKK3sKKwlpbnQgaTsKKworCWk5MTVfZ2VtX2NsZWFudXBfc3Rv
bGVuKGk5MTUpOworCisJZm9yIChpID0gMDsgaSA8IElOVEVMX1JFR0lPTl9VTktOT1dOOyBpKysp
IHsKKwkJc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKnJlZ2lvbiA9IGk5MTUtPm1tLnJlZ2lv
bnNbaV07CisKKwkJaWYgKHJlZ2lvbikKKwkJCWludGVsX21lbW9yeV9yZWdpb25fcHV0KHJlZ2lv
bik7CisJfQorfQorCitpbnQgaTkxNV9nZW1faW5pdF9tZW1vcnlfcmVnaW9ucyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKK3sKKwlpbnQgZXJyLCBpOworCisJLyoKKwkgKiBJbml0aWFs
aXNlIHN0b2xlbiBlYXJseSBzbyB0aGF0IHdlIG1heSByZXNlcnZlIHByZWFsbG9jYXRlZAorCSAq
IG9iamVjdHMgZm9yIHRoZSBCSU9TIHRvIEtNUyB0cmFuc2l0aW9uLgorCSAqLworCS8qIFhYWDog
c3RvbGVuIHdpbGwgYmVjb21lIGEgcmVnaW9uIGF0IHNvbWUgcG9pbnQgKi8KKwllcnIgPSBpOTE1
X2dlbV9pbml0X3N0b2xlbihpOTE1KTsKKwlpZiAoZXJyKQorCQlyZXR1cm4gZXJyOworCisJZm9y
IChpID0gMDsgaSA8IElOVEVMX1JFR0lPTl9VTktOT1dOOyBpKyspIHsKKwkJc3RydWN0IGludGVs
X21lbW9yeV9yZWdpb24gKm1lbSA9IEVSUl9QVFIoLUVOT0RFVik7CisKKwkJaWYgKCFIQVNfUkVH
SU9OKGk5MTUsIEJJVChpKSkpCisJCQljb250aW51ZTsKKworCQlpZiAoSVNfRVJSKG1lbSkpIHsK
KwkJCWVyciA9IFBUUl9FUlIobWVtKTsKKwkJCWdvdG8gb3V0X2NsZWFudXA7CisJCX0KKwl9CisK
KwlyZXR1cm4gMDsKKworb3V0X2NsZWFudXA6CisJaTkxNV9nZW1fY2xlYW51cF9tZW1vcnlfcmVn
aW9ucyhpOTE1KTsKKwlyZXR1cm4gZXJyOworfQorCiBzdGF0aWMgdm9pZCBnZ3R0X2NsZWFudXBf
aHcoc3RydWN0IGk5MTVfZ2d0dCAqZ2d0dCkKIHsKIAlzdHJ1Y3QgaTkxNV92bWEgKnZtYSwgKnZu
OwpAQCAtMjc4MSw2ICsyODI3LDggQEAgdm9pZCBpOTE1X2dndHRfZHJpdmVyX3JlbGVhc2Uoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB7CiAJc3RydWN0IHBhZ2V2ZWMgKnB2ZWM7CiAK
KwlpOTE1X2dlbV9jbGVhbnVwX21lbW9yeV9yZWdpb25zKGk5MTUpOworCiAJZmluaV9hbGlhc2lu
Z19wcGd0dCgmaTkxNS0+Z2d0dCk7CiAKIAlnZ3R0X2NsZWFudXBfaHcoJmk5MTUtPmdndHQpOwpA
QCAtMjc5MCw4ICsyODM4LDYgQEAgdm9pZCBpOTE1X2dndHRfZHJpdmVyX3JlbGVhc2Uoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJCXNldF9wYWdlc19hcnJheV93YihwdmVjLT5wYWdl
cywgcHZlYy0+bnIpOwogCQlfX3BhZ2V2ZWNfcmVsZWFzZShwdmVjKTsKIAl9Ci0KLQlpOTE1X2dl
bV9jbGVhbnVwX3N0b2xlbihpOTE1KTsKIH0KIAogc3RhdGljIHVuc2lnbmVkIGludCBnZW42X2dl
dF90b3RhbF9ndHRfc2l6ZSh1MTYgc25iX2dtY2hfY3RsKQpAQCAtMzI0MCwxMSArMzI4Niw3IEBA
IGludCBpOTE1X2dndHRfaW5pdF9odyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYp
CiAJaWYgKHJldCkKIAkJcmV0dXJuIHJldDsKIAotCS8qCi0JICogSW5pdGlhbGlzZSBzdG9sZW4g
ZWFybHkgc28gdGhhdCB3ZSBtYXkgcmVzZXJ2ZSBwcmVhbGxvY2F0ZWQKLQkgKiBvYmplY3RzIGZv
ciB0aGUgQklPUyB0byBLTVMgdHJhbnNpdGlvbi4KLQkgKi8KLQlyZXQgPSBpOTE1X2dlbV9pbml0
X3N0b2xlbihkZXZfcHJpdik7CisJcmV0ID0gaTkxNV9nZW1faW5pdF9tZW1vcnlfcmVnaW9ucyhk
ZXZfcHJpdik7CiAJaWYgKHJldCkKIAkJZ290byBvdXRfZ3R0X2NsZWFudXA7CiAKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5oCmluZGV4IDBjZGMyNDY1NTM0Yi4uZTk5NDBm
OTMyZDI2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5m
by5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmgKQEAgLTE2
MCw2ICsxNjAsOCBAQCBzdHJ1Y3QgaW50ZWxfZGV2aWNlX2luZm8gewogCiAJdW5zaWduZWQgaW50
IHBhZ2Vfc2l6ZXM7IC8qIHBhZ2Ugc2l6ZXMgc3VwcG9ydGVkIGJ5IHRoZSBIVyAqLwogCisJdTMy
IG1lbW9yeV9yZWdpb25zOyAvKiByZWdpb25zIHN1cHBvcnRlZCBieSB0aGUgSFcgKi8KKwogCXUz
MiBkaXNwbGF5X21taW9fb2Zmc2V0OwogCiAJdTggcGlwZV9tYXNrOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfbWVtb3J5X3JlZ2lvbi5oIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaW50ZWxfbWVtb3J5X3JlZ2lvbi5oCmluZGV4IDUyYzE0MWI2MTA4Yy4uY2RmZTM2ZjZk
YTZlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9tZW1vcnlfcmVnaW9u
LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfbWVtb3J5X3JlZ2lvbi5oCkBAIC0x
OCw2ICsxOCwyMiBAQCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdDsKIHN0cnVjdCBpbnRlbF9t
ZW1vcnlfcmVnaW9uOwogc3RydWN0IHNnX3RhYmxlOwogCisvKioKKyAqICBCYXNlIG1lbW9yeSB0
eXBlCisgKi8KK2VudW0gaW50ZWxfbWVtb3J5X3R5cGUgeworCUlOVEVMX01FTU9SWV9VTktOT1dO
ID0gMCwKK307CisKK2VudW0gaW50ZWxfcmVnaW9uX2lkIHsKKwlJTlRFTF9SRUdJT05fVU5LTk9X
TiA9IDAsIC8qIFNob3VsZCBiZSBsYXN0ICovCit9OworCisjZGVmaW5lIElOVEVMX01FTU9SWV9U
WVBFX1NISUZUIDE2CisKKyNkZWZpbmUgTUVNT1JZX1RZUEVfRlJPTV9SRUdJT04ocikgKGlsb2cy
KChyKSA+PiBJTlRFTF9NRU1PUllfVFlQRV9TSElGVCkpCisjZGVmaW5lIE1FTU9SWV9JTlNUQU5D
RV9GUk9NX1JFR0lPTihyKSAoaWxvZzIoKHIpICYgMHhmZmZmKSkKKwogI2RlZmluZSBJOTE1X0FM
TE9DX01JTl9QQUdFX1NJWkUgIEJJVCgwKQogI2RlZmluZSBJOTE1X0FMTE9DX0NPTlRJR1VPVVMg
ICAgIEJJVCgxKQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMv
bW9ja19nZW1fZGV2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19n
ZW1fZGV2aWNlLmMKaW5kZXggOWMyMmQ0MWIzMGNkLi5iYzVlM2M2NzQwOWYgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9tb2NrX2dlbV9kZXZpY2UuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvbW9ja19nZW1fZGV2aWNlLmMKQEAgLTc0LDYg
Kzc0LDggQEAgc3RhdGljIHZvaWQgbW9ja19kZXZpY2VfcmVsZWFzZShzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZGV2KQogCiAJaTkxNV9nZW1mc19maW5pKGk5MTUpOwogCisJaTkxNV9nZW1fY2xlYW51cF9t
ZW1vcnlfcmVnaW9ucyhpOTE1KTsKKwogCWRybV9tb2RlX2NvbmZpZ19jbGVhbnVwKCZpOTE1LT5k
cm0pOwogCiAJZHJtX2Rldl9maW5pKCZpOTE1LT5kcm0pOwpAQCAtMTk2LDYgKzE5OCwxMCBAQCBz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqbW9ja19nZW1fZGV2aWNlKHZvaWQpCiAKIAlXQVJOX09O
KGk5MTVfZ2VtZnNfaW5pdChpOTE1KSk7CiAKKwllcnIgPSBpOTE1X2dlbV9pbml0X21lbW9yeV9y
ZWdpb25zKGk5MTUpOworCWlmIChlcnIpCisJCWdvdG8gZXJyX2NvbnRleHQ7CisKIAlyZXR1cm4g
aTkxNTsKIAogZXJyX2NvbnRleHQ6Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

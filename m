Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E65DDEE1F8
	for <lists+intel-gfx@lfdr.de>; Mon,  4 Nov 2019 15:15:00 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 548076E4AB;
	Mon,  4 Nov 2019 14:14:59 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6FD206E4AB
 for <intel-gfx@lists.freedesktop.org>; Mon,  4 Nov 2019 14:14:58 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 04 Nov 2019 06:14:57 -0800
X-IronPort-AV: E=Sophos;i="5.68,267,1569308400"; d="scan'208";a="191761365"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga007-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 04 Nov 2019 06:14:55 -0800
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon,  4 Nov 2019 16:14:38 +0200
Message-Id: <20191104141439.26312-3-jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191104141439.26312-1-jani.nikula@intel.com>
References: <20191104141439.26312-1-jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH v2 3/4] drm/i915/dsc: split out encoder specific
 parts from DSC compute params
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U3BsaXQgb3V0IHRoZSBEUCBzcGVjaWZpYyBwYXJ0cywgbWFraW5nIGl0IGVhc2llciB0byBhZGQg
RFNJIHNwZWNpZmljCmNvbmZpZ3VyYXRpb24uIEFsc28gbW92ZSB0aGUgZW5jb2RlciBzcGVjaWZp
YyBwYXJ0cyB0b3dhcmRzIHRoZSBlbmQsIHRvCmFsbG93IG92ZXJyaWRpbmcgZ2VuZXJpYyBjb25m
aWd1cmF0aW9uIGlmIG5lZWRlZC4gVGhpcyBhbHNvIGltcHJvdmVzCmNsYXJpdHkgYnkgbWFraW5n
IGl0IGNsZWFyIHRoZSBlbmNvZGVyIGluZGVwZW5kZW50IGNvbmZpZ3VyYXRpb24gZG9lcwpub3Qg
ZGVwZW5kIG9uIHRoZSBlbmNvZGVyIHNwZWNpZmljIHBhcnRzLgoKdjI6IFJlYmFzZQoKQ2M6IE1h
bmFzaSBOYXZhcmUgPG1hbmFzaS5kLm5hdmFyZUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEph
bmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF9kcC5jICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF92ZHNjLmMgfCA2OCArKysrKysrKysrKysrKy0tLS0tLS0tLQogZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92ZHNjLmggfCAgNSArLQogMyBmaWxlcyBjaGFuZ2Vk
LCA0NSBpbnNlcnRpb25zKCspLCAzMCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2RwLmMKaW5kZXggZmUxZDY4M2VhYjI4Li45ZTk1OTM5NjVhOWEgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKQEAgLTIxMzIsNyArMjEzMiw3IEBA
IHN0YXRpYyBpbnQgaW50ZWxfZHBfZHNjX2NvbXB1dGVfY29uZmlnKHN0cnVjdCBpbnRlbF9kcCAq
aW50ZWxfZHAsCiAJCX0KIAl9CiAKLQlyZXQgPSBpbnRlbF9kcF9jb21wdXRlX2RzY19wYXJhbXMo
aW50ZWxfZHAsIHBpcGVfY29uZmlnKTsKKwlyZXQgPSBpbnRlbF9kc2NfY29tcHV0ZV9wYXJhbXMo
JmRpZ19wb3J0LT5iYXNlLCBwaXBlX2NvbmZpZyk7CiAJaWYgKHJldCA8IDApIHsKIAkJRFJNX0RF
QlVHX0tNUygiQ2Fubm90IGNvbXB1dGUgdmFsaWQgRFNDIHBhcmFtZXRlcnMgZm9yIElucHV0IEJw
cCA9ICVkICIKIAkJCSAgICAgICJDb21wcmVzc2VkIEJQUCA9ICVkXG4iLApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92ZHNjLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX3Zkc2MuYwppbmRleCBmMWRmNjU0MzY5YTcuLmFjMTA3MzZh
MDc2YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92ZHNj
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92ZHNjLmMKQEAgLTMz
NSwzMiArMzM1LDE0IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcmNfcGFyYW1ldGVycyAqZ2V0X3Jj
X3BhcmFtcyh1MTYgY29tcHJlc3NlZF9icHAsCiAJcmV0dXJuICZyY19wYXJhbWV0ZXJzW3Jvd19p
bmRleF1bY29sdW1uX2luZGV4XTsKIH0KIAotaW50IGludGVsX2RwX2NvbXB1dGVfZHNjX3BhcmFt
cyhzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAotCQkJCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRl
ICpwaXBlX2NvbmZpZykKKy8qIFZhbHVlcyBmaWxsZWQgZnJvbSBEU0MgU2luayBEUENEICovCitz
dGF0aWMgaW50IGludGVsX2RzY19kcF9jb21wdXRlX3BhcmFtcyhzdHJ1Y3QgaW50ZWxfZW5jb2Rl
ciAqZW5jb2RlciwKKwkJCQkgICAgICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29u
ZmlnKQogeworCXN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAgPSBlbmNfdG9faW50ZWxfZHAoJmVu
Y29kZXItPmJhc2UpOwogCXN0cnVjdCBkcm1fZHNjX2NvbmZpZyAqdmRzY19jZmcgPSAmcGlwZV9j
b25maWctPmRzYy5jb25maWc7Ci0JdTE2IGNvbXByZXNzZWRfYnBwID0gcGlwZV9jb25maWctPmRz
Yy5jb21wcmVzc2VkX2JwcDsKLQljb25zdCBzdHJ1Y3QgcmNfcGFyYW1ldGVycyAqcmNfcGFyYW1z
OwotCXU4IGkgPSAwOwotCXU4IGxpbmVfYnVmX2RlcHRoID0gMDsKKwl1OCBsaW5lX2J1Zl9kZXB0
aDsKIAotCXZkc2NfY2ZnLT5waWNfd2lkdGggPSBwaXBlX2NvbmZpZy0+aHcuYWRqdXN0ZWRfbW9k
ZS5jcnRjX2hkaXNwbGF5OwotCXZkc2NfY2ZnLT5waWNfaGVpZ2h0ID0gcGlwZV9jb25maWctPmh3
LmFkanVzdGVkX21vZGUuY3J0Y192ZGlzcGxheTsKLQl2ZHNjX2NmZy0+c2xpY2Vfd2lkdGggPSBE
SVZfUk9VTkRfVVAodmRzY19jZmctPnBpY193aWR0aCwKLQkJCQkJICAgICBwaXBlX2NvbmZpZy0+
ZHNjLnNsaWNlX2NvdW50KTsKLQkvKgotCSAqIFNsaWNlIEhlaWdodCBvZiA4IHdvcmtzIGZvciBh
bGwgY3VycmVudGx5IGF2YWlsYWJsZSBwYW5lbHMuIFNvIHN0YXJ0Ci0JICogd2l0aCB0aGF0IGlm
IHBpY19oZWlnaHQgaXMgYW4gaW50ZWdyYWwgbXVsdGlwbGUgb2YgOC4KLQkgKiBFdmVudHVhbGx5
IGFkZCBsb2dpYyB0byB0cnkgbXVsdGlwbGUgc2xpY2UgaGVpZ2h0cy4KLQkgKi8KLQlpZiAodmRz
Y19jZmctPnBpY19oZWlnaHQgJSA4ID09IDApCi0JCXZkc2NfY2ZnLT5zbGljZV9oZWlnaHQgPSA4
OwotCWVsc2UgaWYgKHZkc2NfY2ZnLT5waWNfaGVpZ2h0ICUgNCA9PSAwKQotCQl2ZHNjX2NmZy0+
c2xpY2VfaGVpZ2h0ID0gNDsKLQllbHNlCi0JCXZkc2NfY2ZnLT5zbGljZV9oZWlnaHQgPSAyOwot
Ci0JLyogVmFsdWVzIGZpbGxlZCBmcm9tIERTQyBTaW5rIERQQ0QgKi8KIAl2ZHNjX2NmZy0+ZHNj
X3ZlcnNpb25fbWFqb3IgPQogCQkoaW50ZWxfZHAtPmRzY19kcGNkW0RQX0RTQ19SRVYgLSBEUF9E
U0NfU1VQUE9SVF0gJgogCQkgRFBfRFNDX01BSk9SX01BU0spID4+IERQX0RTQ19NQUpPUl9TSElG
VDsKQEAgLTM3Nyw2ICszNTksNyBAQCBpbnQgaW50ZWxfZHBfY29tcHV0ZV9kc2NfcGFyYW1zKHN0
cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsCiAJCURSTV9ERUJVR19LTVMoIkRTQyBTaW5rIExpbmUg
QnVmZmVyIERlcHRoIGludmFsaWRcbiIpOwogCQlyZXR1cm4gLUVJTlZBTDsKIAl9CisKIAlpZiAo
dmRzY19jZmctPmRzY192ZXJzaW9uX21pbm9yID09IDIpCiAJCXZkc2NfY2ZnLT5saW5lX2J1Zl9k
ZXB0aCA9IChsaW5lX2J1Zl9kZXB0aCA9PSBEU0NfMV8yX01BWF9MSU5FQlVGX0RFUFRIX0JJVFMp
ID8KIAkJCURTQ18xXzJfTUFYX0xJTkVCVUZfREVQVEhfVkFMIDogbGluZV9idWZfZGVwdGg7CkBA
IC0zODQsMTMgKzM2Nyw0MiBAQCBpbnQgaW50ZWxfZHBfY29tcHV0ZV9kc2NfcGFyYW1zKHN0cnVj
dCBpbnRlbF9kcCAqaW50ZWxfZHAsCiAJCXZkc2NfY2ZnLT5saW5lX2J1Zl9kZXB0aCA9IChsaW5l
X2J1Zl9kZXB0aCA+IERTQ18xXzFfTUFYX0xJTkVCVUZfREVQVEhfQklUUykgPwogCQkJRFNDXzFf
MV9NQVhfTElORUJVRl9ERVBUSF9CSVRTIDogbGluZV9idWZfZGVwdGg7CiAKKwl2ZHNjX2NmZy0+
YmxvY2tfcHJlZF9lbmFibGUgPQorCQkJaW50ZWxfZHAtPmRzY19kcGNkW0RQX0RTQ19CTEtfUFJF
RElDVElPTl9TVVBQT1JUIC0gRFBfRFNDX1NVUFBPUlRdICYKKwkJRFBfRFNDX0JMS19QUkVESUNU
SU9OX0lTX1NVUFBPUlRFRDsKKworCXJldHVybiAwOworfQorCitpbnQgaW50ZWxfZHNjX2NvbXB1
dGVfcGFyYW1zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAorCQkJICAgICBzdHJ1Y3Qg
aW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcpCit7CisJc3RydWN0IGRybV9kc2NfY29uZmln
ICp2ZHNjX2NmZyA9ICZwaXBlX2NvbmZpZy0+ZHNjLmNvbmZpZzsKKwl1MTYgY29tcHJlc3NlZF9i
cHAgPSBwaXBlX2NvbmZpZy0+ZHNjLmNvbXByZXNzZWRfYnBwOworCWNvbnN0IHN0cnVjdCByY19w
YXJhbWV0ZXJzICpyY19wYXJhbXM7CisJdTggaSA9IDA7CisJaW50IHJldDsKKworCXZkc2NfY2Zn
LT5waWNfd2lkdGggPSBwaXBlX2NvbmZpZy0+aHcuYWRqdXN0ZWRfbW9kZS5jcnRjX2hkaXNwbGF5
OworCXZkc2NfY2ZnLT5waWNfaGVpZ2h0ID0gcGlwZV9jb25maWctPmh3LmFkanVzdGVkX21vZGUu
Y3J0Y192ZGlzcGxheTsKKwl2ZHNjX2NmZy0+c2xpY2Vfd2lkdGggPSBESVZfUk9VTkRfVVAodmRz
Y19jZmctPnBpY193aWR0aCwKKwkJCQkJICAgICBwaXBlX2NvbmZpZy0+ZHNjLnNsaWNlX2NvdW50
KTsKKwkvKgorCSAqIFNsaWNlIEhlaWdodCBvZiA4IHdvcmtzIGZvciBhbGwgY3VycmVudGx5IGF2
YWlsYWJsZSBwYW5lbHMuIFNvIHN0YXJ0CisJICogd2l0aCB0aGF0IGlmIHBpY19oZWlnaHQgaXMg
YW4gaW50ZWdyYWwgbXVsdGlwbGUgb2YgOC4KKwkgKiBFdmVudHVhbGx5IGFkZCBsb2dpYyB0byB0
cnkgbXVsdGlwbGUgc2xpY2UgaGVpZ2h0cy4KKwkgKi8KKwlpZiAodmRzY19jZmctPnBpY19oZWln
aHQgJSA4ID09IDApCisJCXZkc2NfY2ZnLT5zbGljZV9oZWlnaHQgPSA4OworCWVsc2UgaWYgKHZk
c2NfY2ZnLT5waWNfaGVpZ2h0ICUgNCA9PSAwKQorCQl2ZHNjX2NmZy0+c2xpY2VfaGVpZ2h0ID0g
NDsKKwllbHNlCisJCXZkc2NfY2ZnLT5zbGljZV9oZWlnaHQgPSAyOworCiAJLyogR2VuIDExIGRv
ZXMgbm90IHN1cHBvcnQgWUNiQ3IgKi8KIAl2ZHNjX2NmZy0+c2ltcGxlXzQyMiA9IGZhbHNlOwog
CS8qIEdlbiAxMSBkb2VzIG5vdCBzdXBwb3J0IFZCUiAqLwogCXZkc2NfY2ZnLT52YnJfZW5hYmxl
ID0gZmFsc2U7Ci0JdmRzY19jZmctPmJsb2NrX3ByZWRfZW5hYmxlID0KLQkJCWludGVsX2RwLT5k
c2NfZHBjZFtEUF9EU0NfQkxLX1BSRURJQ1RJT05fU1VQUE9SVCAtIERQX0RTQ19TVVBQT1JUXSAm
Ci0JCURQX0RTQ19CTEtfUFJFRElDVElPTl9JU19TVVBQT1JURUQ7CiAKIAkvKiBHZW4gMTEgb25s
eSBzdXBwb3J0cyBpbnRlZ3JhbCB2YWx1ZXMgb2YgYnBwICovCiAJdmRzY19jZmctPmJpdHNfcGVy
X3BpeGVsID0gY29tcHJlc3NlZF9icHAgPDwgNDsKQEAgLTQ1OCw2ICs0NzAsMTAgQEAgaW50IGlu
dGVsX2RwX2NvbXB1dGVfZHNjX3BhcmFtcyhzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogCXZk
c2NfY2ZnLT5pbml0aWFsX3NjYWxlX3ZhbHVlID0gKHZkc2NfY2ZnLT5yY19tb2RlbF9zaXplIDw8
IDMpIC8KIAkJKHZkc2NfY2ZnLT5yY19tb2RlbF9zaXplIC0gdmRzY19jZmctPmluaXRpYWxfb2Zm
c2V0KTsKIAorCXJldCA9IGludGVsX2RzY19kcF9jb21wdXRlX3BhcmFtcyhlbmNvZGVyLCBwaXBl
X2NvbmZpZyk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKwogCXJldHVybiBkcm1fZHNjX2Nv
bXB1dGVfcmNfcGFyYW1ldGVycyh2ZHNjX2NmZyk7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdmRzYy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF92ZHNjLmgKaW5kZXggOTBkM2Y2MDE3ZmNiLi40ZWQyMjU2NzUwYzMgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdmRzYy5oCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdmRzYy5oCkBAIC04LDEzICs4LDEy
IEBACiAKIHN0cnVjdCBpbnRlbF9lbmNvZGVyOwogc3RydWN0IGludGVsX2NydGNfc3RhdGU7Ci1z
dHJ1Y3QgaW50ZWxfZHA7CiAKIHZvaWQgaW50ZWxfZHNjX2VuYWJsZShzdHJ1Y3QgaW50ZWxfZW5j
b2RlciAqZW5jb2RlciwKIAkJICAgICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNy
dGNfc3RhdGUpOwogdm9pZCBpbnRlbF9kc2NfZGlzYWJsZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZSAqY3J0Y19zdGF0ZSk7Ci1pbnQgaW50ZWxfZHBfY29tcHV0ZV9kc2NfcGFyYW1zKHN0
cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsCi0JCQkJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBp
cGVfY29uZmlnKTsKK2ludCBpbnRlbF9kc2NfY29tcHV0ZV9wYXJhbXMoc3RydWN0IGludGVsX2Vu
Y29kZXIgKmVuY29kZXIsCisJCQkgICAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2Nv
bmZpZyk7CiBlbnVtIGludGVsX2Rpc3BsYXlfcG93ZXJfZG9tYWluCiBpbnRlbF9kc2NfcG93ZXJf
ZG9tYWluKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKTsKIAotLSAK
Mi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJ
bnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

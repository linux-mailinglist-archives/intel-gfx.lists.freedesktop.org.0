Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D188EB23E6
	for <lists+intel-gfx@lfdr.de>; Fri, 13 Sep 2019 18:14:27 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8A28F6F417;
	Fri, 13 Sep 2019 16:14:25 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 951BF6F417
 for <intel-gfx@lists.freedesktop.org>; Fri, 13 Sep 2019 16:14:23 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 18480047-1500050 for multiple; Fri, 13 Sep 2019 17:13:48 +0100
MIME-Version: 1.0
To: =?utf-8?b?VmlsbGUgU3lyasOkbMOk?= <ville.syrjala@linux.intel.com>
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <20190913160334.GC1208@intel.com>
References: <20190913074720.7718-1-chris@chris-wilson.co.uk>
 <20190913160334.GC1208@intel.com>
Message-ID: <156839122631.18832.11616206837543268861@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Fri, 13 Sep 2019 17:13:46 +0100
Subject: Re: [Intel-gfx] [PATCH] drm/i915/gt: Only unwedge if we can reset
 first
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBWaWxsZSBTeXJqw6Rsw6QgKDIwMTktMDktMTMgMTc6MDM6MzQpCj4gT24gRnJpLCBT
ZXAgMTMsIDIwMTkgYXQgMDg6NDc6MjBBTSArMDEwMCwgQ2hyaXMgV2lsc29uIHdyb3RlOgo+ID4g
VW53ZWRnaW5nIHRoZSBHUFUgcmVxdWlyZXMgYSBzdWNjZXNzZnVsIEdQVSByZXNldCBiZWZvcmUg
d2UgcmVzdG9yZSB0aGUKPiA+IGRlZmF1bHQgc3VibWlzc2lvbiwgb3IgZWxzZSB3ZSBtYXkgc2Vl
IHJlc2lkdWFsIGNvbnRleHQgc3dpdGNoIGV2ZW50cwo+ID4gdGhhdCB3ZSB3ZXJlIG5vdCBleHBl
Y3RpbmcuCj4gPiAKPiA+IHYyOiBQdWxsIGluIHRoZSBzcGVjaWFsLWNhc2UgcmVzZXRfY2xvYmJl
cnNfZGlzcGxheSwgYW5kIGV4cGxhaW4gd2h5IGl0Cj4gPiBzaG91bGQgYmUgc2FmZSBpbiB0aGUg
Y29udGV4dCBvZiB1bndlZGdpbmcuCj4gPiAKPiA+IFJlcG9ydGVkLWJ5OiBKYW51c3ogS3J6eXN6
dG9maWsgPGphbnVzei5rcnp5c3p0b2Zpa0BsaW51eC5pbnRlbC5jb20+Cj4gPiBTaWduZWQtb2Zm
LWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KPiA+IENjOiBKYW51
c3ogS3J6eXN6dG9maWsgPGphbnVzei5rcnp5c3p0b2Zpa0BsaW51eC5pbnRlbC5jb20+Cj4gPiBD
YzogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNv
bT4KPiA+IENjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29t
Pgo+ID4gUmV2aWV3ZWQtYnk6IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUuY2VyYW9s
b3NwdXJpb0BpbnRlbC5jb20+Cj4gPiAtLS0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9yZXNldC5jIHwgMzAgKysrKysrKysrKysrKysrKysrKysrKysrKystCj4gPiAgMSBmaWxl
IGNoYW5nZWQsIDI5IGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKPiA+IAo+ID4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNldC5jCj4gPiBpbmRleCBlZTUyOTQ3ZWIzMWQuLmQzYjFj
ZGFmZDRjMiAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jl
c2V0LmMKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKPiA+
IEBAIC03LDYgKzcsNyBAQAo+ID4gICNpbmNsdWRlIDxsaW51eC9zY2hlZC9tbS5oPgo+ID4gICNp
bmNsdWRlIDxsaW51eC9zdG9wX21hY2hpbmUuaD4KPiA+ICAKPiA+ICsjaW5jbHVkZSAiZGlzcGxh
eS9pbnRlbF9kaXNwbGF5LmgiCj4gPiAgI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxfZGlzcGxheV90
eXBlcy5oIgo+ID4gICNpbmNsdWRlICJkaXNwbGF5L2ludGVsX292ZXJsYXkuaCIKPiA+ICAKPiA+
IEBAIC03MjksNiArNzMwLDI4IEBAIHN0YXRpYyB2b2lkIG5vcF9zdWJtaXRfcmVxdWVzdChzdHJ1
Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KQo+ID4gICAgICAgaW50ZWxfZW5naW5lX3F1ZXVlX2Jy
ZWFkY3J1bWJzKGVuZ2luZSk7Cj4gPiAgfQo+ID4gIAo+ID4gK3N0YXRpYyBib29sIHJlc2V0X2Ns
b2JiZXJzX2Rpc3BsYXkoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCj4gPiArewo+ID4g
KyAgICAgc3RydWN0IGludGVsX2NydGMgKmNydGM7Cj4gPiArCj4gPiArICAgICBpZiAoIUlOVEVM
X0lORk8oaTkxNSktPmdwdV9yZXNldF9jbG9iYmVyc19kaXNwbGF5KQo+ID4gKyAgICAgICAgICAg
ICByZXR1cm4gZmFsc2U7Cj4gPiArCj4gPiArICAgICAvKgo+ID4gKyAgICAgICogV2hpbGUgdGhp
cyBhcHBlYXJzIHJhY3ksIHdlIHNob3VsZCBvbmx5IGJlIGluc3BlY3RpbmcgdGhlIGRpc3BsYXkK
PiA+ICsgICAgICAqIHN0YXRlIGF0IHJ1bnRpbWUgZnJvbSBpbnNpZGUgYSBHUFUgcmVzZXQsIHdo
aWNoIHdpbGwgYmUgc2VyaWFsaXplZAo+ID4gKyAgICAgICogd2l0aCBtb2Rlc2V0cyBvbiBhZmZl
Y3RlZCBtYWNoaW5lcy4gRm9yIGEgZnVsbCBkZXZpY2UgcmVzZXQsCj4gPiArICAgICAgKiB3ZSBz
aG91bGQgYWxyZWFkeSBoYXZlIGNsZWFyZWQgdGhlIGFjdGl2ZSBDUlRDIHN0YXRlIGluCj4gPiAr
ICAgICAgKiBpbnRlbF9wcmVwYXJlX3Jlc2V0KCkuCj4gPiArICAgICAgKi8KPiA+ICsgICAgIGZv
cl9lYWNoX2ludGVsX2NydGMoJmk5MTUtPmRybSwgY3J0Yykgewo+ID4gKyAgICAgICAgICAgICBp
ZiAoY3J0Yy0+YWN0aXZlKQo+ID4gKyAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwo+
ID4gKyAgICAgfQo+ID4gKwo+ID4gKyAgICAgcmV0dXJuIGZhbHNlOwo+ID4gK30KPiA+ICsKPiA+
ICBzdGF0aWMgdm9pZCBfX2ludGVsX2d0X3NldF93ZWRnZWQoc3RydWN0IGludGVsX2d0ICpndCkK
PiA+ICB7Cj4gPiAgICAgICBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7Cj4gPiBAQCAt
NzkzLDYgKzgxNiw3IEBAIHN0YXRpYyBib29sIF9faW50ZWxfZ3RfdW5zZXRfd2VkZ2VkKHN0cnVj
dCBpbnRlbF9ndCAqZ3QpCj4gPiAgICAgICBzdHJ1Y3QgaW50ZWxfZ3RfdGltZWxpbmVzICp0aW1l
bGluZXMgPSAmZ3QtPnRpbWVsaW5lczsKPiA+ICAgICAgIHN0cnVjdCBpbnRlbF90aW1lbGluZSAq
dGw7Cj4gPiAgICAgICB1bnNpZ25lZCBsb25nIGZsYWdzOwo+ID4gKyAgICAgYm9vbCBvazsKPiA+
ICAKPiA+ICAgICAgIGlmICghdGVzdF9iaXQoSTkxNV9XRURHRUQsICZndC0+cmVzZXQuZmxhZ3Mp
KQo+ID4gICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKPiA+IEBAIC04MzgsNyArODYyLDExIEBA
IHN0YXRpYyBib29sIF9faW50ZWxfZ3RfdW5zZXRfd2VkZ2VkKHN0cnVjdCBpbnRlbF9ndCAqZ3Qp
Cj4gPiAgICAgICB9Cj4gPiAgICAgICBzcGluX3VubG9ja19pcnFyZXN0b3JlKCZ0aW1lbGluZXMt
PmxvY2ssIGZsYWdzKTsKPiA+ICAKPiA+IC0gICAgIGludGVsX2d0X3Nhbml0aXplKGd0LCBmYWxz
ZSk7Cj4gPiArICAgICBvayA9IGZhbHNlOwo+ID4gKyAgICAgaWYgKCFyZXNldF9jbG9iYmVyc19k
aXNwbGF5KGd0LT5pOTE1KSkKPiA+ICsgICAgICAgICAgICAgb2sgPSBfX2ludGVsX2d0X3Jlc2V0
KGd0LCBBTExfRU5HSU5FUykgPT0gMDsKPiAKPiAvbWUgcmUtcmVhZGluZyBhIGxvdCBvZiB0aGUg
cmVzZXQgY29kZS4uCj4gCj4gSSdtIHJhdGhlciBjb25mdXNlZCBhYm91dCB0aGUgd2hvbGUgcmVz
ZXQgZmxvdy4gV2Ugbm93IGRvIGEgcmVzZXQgaGVyZSwKPiBidXQgdGhlbiB3ZSBzdGlsbCBkbyBh
bm90aGVyIG9uZSBsYXRlciBvbj8gRXhjZXB0IGZvciBpOTE1X2dlbV9zYW5pdGl6ZSgpLAo+IHdo
aWNoIGdldHMgY2FsbGVkIGR1cmluZyBwcm9iZSBhbmQgcmVzdW1lIHNvIG9ubHkgZG9lcyB0aGUg
c2luZ2xlIHJlc2V0Cj4gSSBndWVzcy4KClRoZSBpZGVhIHdhcyB0byBrZWVwIHdlZGdpbmcgYXMg
YSBzZXBhcmF0ZSBwcm9jZXNzIChzaW5jZSB0aGF0IGdpdmVzCm5pY2Ugc3ltbWV0cnkgYmVjYXVz
ZSBzZXQtd2VkZ2UgdW5zZXQtd2VkZ2UpLiBXZSBjYW4gbWVyZ2UgaXQgc28KdGhhdCB3ZSBvbmx5
IGRvIHRoZSBzaW5nbGUgcmVzZXQsIGJ1dCB3ZSBzdGlsbCBzaG91bGQga2VlcCB0aGUgcmVxdWVz
dApmbHVzaGluZyBpbiBwbGFjZSwgb3Igd2UgbmVlZCB0byBwbGF5IGdhbWVzIHdpdGggcmN1IGJh
cnJpZXJzIGFnYWluLgogCj4gSG9wZWZ1bGx5IHdlIGNhbid0IGJlIG1hcmtlZCBhcyB3ZWRnZWQg
ZHVyaW5nIHByb2JlIGJlY2F1c2UgSSB0aGluawo+IHRoaXMgZ2V0cyBjYWxsZWQgYmVmb3JlIGNy
dGMtPmFjdGl2ZSBpcyBwb3B1bGF0ZWQgc28gd2UnZCBqdXN0IGRvIHRoZQo+IHJlc2V0IGFueXdh
eS4KCkkgd2FzIGhvcGluZyB0aGUgY3J0Y3Mgd291bGQgYmUgb2ZmIGF0IHRoYXQgcG9pbnQuLi4g
VGhleSB3ZXJlbid0LgoKPiBBcyBmb3IgdGhlIHJlc3VtZSBjYXNlcywgSSB0aGluayB0aGUgZGlz
cGxheSBzaG91bGQgYmUgb2ZmIGFscmVhZHkKPiB3aGVuIHRoaXMgZ2V0cyBjYWxsZWQuCj4gCj4g
U28gSSBndWVzcyBJJ20gbm90IHJlYWxseSBzdXJlIHdoYXQgdGhpcyBjaGVjayBpcyBtZWFudCB0
byBkbyBmb3IgdXMuCgpJIGdhdmUgdXAsCgotICAgICAgIGludGVsX2d0X3Nhbml0aXplKGd0LCBm
YWxzZSk7CisgICAgICAgLyogV2UgbXVzdCByZXNldCBwZW5kaW5nIEdQVSBldmVudHMgYmVmb3Jl
IHJlc3RvcmluZyBvdXIgc3VibWlzc2lvbiAqLworICAgICAgIG9rID0gIUhBU19FWEVDTElTVFMo
Z3QtPmk5MTUpOworICAgICAgIGlmICghSU5URUxfSU5GTyhndC0+aTkxNSktPmdwdV9yZXNldF9j
bG9iYmVyc19kaXNwbGF5KQorICAgICAgICAgICAgICAgb2sgPSBfX2ludGVsX2d0X3Jlc2V0KGd0
LCBBTExfRU5HSU5FUykgPT0gMDsKKyAgICAgICBpZiAoIW9rKQorICAgICAgICAgICAgICAgcmV0
dXJuIGZhbHNlOwoKLUNocmlzCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2lu
dGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AA5EE67994
	for <lists+intel-gfx@lfdr.de>; Sat, 13 Jul 2019 12:00:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E29536E3DA;
	Sat, 13 Jul 2019 10:00:50 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7BA5A6E3CE
 for <intel-gfx@lists.freedesktop.org>; Sat, 13 Jul 2019 10:00:34 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 17265472-1500050 
 for multiple; Sat, 13 Jul 2019 11:00:18 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Sat, 13 Jul 2019 11:00:08 +0100
Message-Id: <20190713100016.8026-3-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190713100016.8026-1-chris@chris-wilson.co.uk>
References: <20190713100016.8026-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 03/11] drm/i915/uc: introduce
 intel_uc_fw_supported
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGludGVs
LmNvbT4KCkluc3RlYWQgb2YgYWx3YXlzIGNoZWNraW5nIGluIHRoZSBkZXZpY2UgY29uZmlnIGlz
IEd1QyBhbmQgSHVDIGFyZQpzdXBwb3J0ZWQgb3Igbm90LCB3ZSBjYW4gc2F2ZSB0aGUgc3RhdGUg
aW4gdGhlIHVjX2Z3IHN0cnVjdHVyZSBhbmQKYXZvaWQgZ29pbmcgdGhyb3VnaCBpOTE1IGV2ZXJ5
IHRpbWUgZnJvbSB0aGUgbG93LWxldmVsIHVjIG1hbmFnZW1lbnQKY29kZS4gd2hpbGUgYXQgaXQg
RklSTVdBUkVfTk9ORSBoYXMgYmVlbiByZW5hbWVkIHRvIGJldHRlciBpbmRpY2F0ZSB0aGF0Cndl
IGhhdmVuJ3Qgc3RhcnRlZCB0aGUgZmV0Y2gvbG9hZCB5ZXQsIGJ1dCB3ZSBtaWdodCBoYXZlIGFs
cmVhZHkgc2VsZWN0ZWQKYSBibG9iLgoKU2lnbmVkLW9mZi1ieTogRGFuaWVsZSBDZXJhb2xvIFNw
dXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNvbT4KQ2M6IE1pY2hhbCBXYWpkZWN6
a28gPG1pY2hhbC53YWpkZWN6a29AaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2ludGVsX2d1Y19mdy5jIHwgIDYgKysrKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9o
dWNfZncuYyB8ICA2ICsrKysrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdWMuYyAgICAg
fCAyNSArKysrKysrKysrKystLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X3VjX2Z3LmMgIHwgIDQgKysrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdWNfZncuaCAg
fCAzMCArKysrKysrKysrKysrKysrKysrKysrKystLS0tLQogNSBmaWxlcyBjaGFuZ2VkLCA1MSBp
bnNlcnRpb25zKCspLCAyMCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9ndWNfZncuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19m
dy5jCmluZGV4IGRiMWUwZGFjYTdkYi4uZWU5NWQ0OTYwYzVjIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfZncuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
bnRlbF9ndWNfZncuYwpAQCAtNzksOCArNzksMTIgQEAgc3RhdGljIHZvaWQgZ3VjX2Z3X3NlbGVj
dChzdHJ1Y3QgaW50ZWxfdWNfZncgKmd1Y19mdykKIAogCUdFTV9CVUdfT04oZ3VjX2Z3LT50eXBl
ICE9IElOVEVMX1VDX0ZXX1RZUEVfR1VDKTsKIAotCWlmICghSEFTX0dVQyhpOTE1KSkKKwlpZiAo
IUhBU19HVUMoaTkxNSkpIHsKKwkJZ3VjX2Z3LT5mZXRjaF9zdGF0dXMgPSBJTlRFTF9VQ19GSVJN
V0FSRV9OT1RfU1VQUE9SVEVEOwogCQlyZXR1cm47CisJfQorCisJZ3VjX2Z3LT5mZXRjaF9zdGF0
dXMgPSBJTlRFTF9VQ19GSVJNV0FSRV9OT1RfU1RBUlRFRDsKIAogCWlmIChpOTE1X21vZHBhcmFt
cy5ndWNfZmlybXdhcmVfcGF0aCkgewogCQlndWNfZnctPnBhdGggPSBpOTE1X21vZHBhcmFtcy5n
dWNfZmlybXdhcmVfcGF0aDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X2h1Y19mdy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfaHVjX2Z3LmMKaW5kZXggMDVj
YmY4MzM4ZjUzLi4wNmU3MjZiYTk4NjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2ludGVsX2h1Y19mdy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2h1Y19mdy5j
CkBAIC03Myw4ICs3MywxMiBAQCBzdGF0aWMgdm9pZCBodWNfZndfc2VsZWN0KHN0cnVjdCBpbnRl
bF91Y19mdyAqaHVjX2Z3KQogCiAJR0VNX0JVR19PTihodWNfZnctPnR5cGUgIT0gSU5URUxfVUNf
RldfVFlQRV9IVUMpOwogCi0JaWYgKCFIQVNfSFVDKGRldl9wcml2KSkKKwlpZiAoIUhBU19IVUMo
ZGV2X3ByaXYpKSB7CisJCWh1Y19mdy0+ZmV0Y2hfc3RhdHVzID0gSU5URUxfVUNfRklSTVdBUkVf
Tk9UX1NVUFBPUlRFRDsKIAkJcmV0dXJuOworCX0KKworCWh1Y19mdy0+ZmV0Y2hfc3RhdHVzID0g
SU5URUxfVUNfRklSTVdBUkVfTk9UX1NUQVJURUQ7CiAKIAlpZiAoaTkxNV9tb2RwYXJhbXMuaHVj
X2Zpcm13YXJlX3BhdGgpIHsKIAkJaHVjX2Z3LT5wYXRoID0gaTkxNV9tb2RwYXJhbXMuaHVjX2Zp
cm13YXJlX3BhdGg7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91Yy5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdWMuYwppbmRleCAwMGJhYWNjYzJmMWMuLmUy
YjIwZjhlODhjZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdWMuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91Yy5jCkBAIC03NSw3ICs3NSw4IEBAIHN0
YXRpYyBpbnQgX19nZXRfZGVmYXVsdF9ndWNfbG9nX2xldmVsKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1KQogewogCWludCBndWNfbG9nX2xldmVsOwogCi0JaWYgKCFIQVNfR1VDKGk5MTUp
IHx8ICFpbnRlbF91Y19pc191c2luZ19ndWMoaTkxNSkpCisJaWYgKCFpbnRlbF91Y19md19zdXBw
b3J0ZWQoJmk5MTUtPmd1Yy5mdykgfHwKKwkgICAgIWludGVsX3VjX2lzX3VzaW5nX2d1YyhpOTE1
KSkKIAkJZ3VjX2xvZ19sZXZlbCA9IEdVQ19MT0dfTEVWRUxfRElTQUJMRUQ7CiAJZWxzZSBpZiAo
SVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfREVCVUcpIHx8CiAJCSBJU19FTkFCTEVEKENPTkZJ
R19EUk1fSTkxNV9ERUJVR19HRU0pKQpAQCAtMTIzLDE2ICsxMjQsMTYgQEAgc3RhdGljIHZvaWQg
c2FuaXRpemVfb3B0aW9uc19lYXJseShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlp
ZiAoaW50ZWxfdWNfaXNfdXNpbmdfZ3VjKGk5MTUpICYmICFpbnRlbF91Y19md19pc19zZWxlY3Rl
ZChndWNfZncpKSB7CiAJCURSTV9XQVJOKCJJbmNvbXBhdGlibGUgb3B0aW9uIGRldGVjdGVkOiAl
cz0lZCwgJXMhXG4iLAogCQkJICJlbmFibGVfZ3VjIiwgaTkxNV9tb2RwYXJhbXMuZW5hYmxlX2d1
YywKLQkJCSAhSEFTX0dVQyhpOTE1KSA/ICJubyBHdUMgaGFyZHdhcmUiIDoKLQkJCQkJICAibm8g
R3VDIGZpcm13YXJlIik7CisJCQkgIWludGVsX3VjX2Z3X3N1cHBvcnRlZChndWNfZncpID8KKwkJ
CQkibm8gR3VDIGhhcmR3YXJlIiA6ICJubyBHdUMgZmlybXdhcmUiKTsKIAl9CiAKIAkvKiBWZXJp
ZnkgSHVDIGZpcm13YXJlIGF2YWlsYWJpbGl0eSAqLwogCWlmIChpbnRlbF91Y19pc191c2luZ19o
dWMoaTkxNSkgJiYgIWludGVsX3VjX2Z3X2lzX3NlbGVjdGVkKGh1Y19mdykpIHsKIAkJRFJNX1dB
Uk4oIkluY29tcGF0aWJsZSBvcHRpb24gZGV0ZWN0ZWQ6ICVzPSVkLCAlcyFcbiIsCiAJCQkgImVu
YWJsZV9ndWMiLCBpOTE1X21vZHBhcmFtcy5lbmFibGVfZ3VjLAotCQkJICFIQVNfSFVDKGk5MTUp
ID8gIm5vIEh1QyBoYXJkd2FyZSIgOgotCQkJCQkgICJubyBIdUMgZmlybXdhcmUiKTsKKwkJCSAh
aW50ZWxfdWNfZndfc3VwcG9ydGVkKGh1Y19mdykgPworCQkJCSJubyBIdUMgaGFyZHdhcmUiIDog
Im5vIEh1QyBmaXJtd2FyZSIpOwogCX0KIAogCS8qIFhYWDogR3VDIHN1Ym1pc3Npb24gaXMgdW5h
dmFpbGFibGUgZm9yIG5vdyAqLwpAQCAtMTUyLDggKzE1Myw4IEBAIHN0YXRpYyB2b2lkIHNhbml0
aXplX29wdGlvbnNfZWFybHkoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJaWYgKGk5
MTVfbW9kcGFyYW1zLmd1Y19sb2dfbGV2ZWwgPiAwICYmICFpbnRlbF91Y19pc191c2luZ19ndWMo
aTkxNSkpIHsKIAkJRFJNX1dBUk4oIkluY29tcGF0aWJsZSBvcHRpb24gZGV0ZWN0ZWQ6ICVzPSVk
LCAlcyFcbiIsCiAJCQkgImd1Y19sb2dfbGV2ZWwiLCBpOTE1X21vZHBhcmFtcy5ndWNfbG9nX2xl
dmVsLAotCQkJICFIQVNfR1VDKGk5MTUpID8gIm5vIEd1QyBoYXJkd2FyZSIgOgotCQkJCQkgICJH
dUMgbm90IGVuYWJsZWQiKTsKKwkJCSAhaW50ZWxfdWNfZndfc3VwcG9ydGVkKGd1Y19mdykgPwor
CQkJCSJubyBHdUMgaGFyZHdhcmUiIDogIkd1QyBub3QgZW5hYmxlZCIpOwogCQlpOTE1X21vZHBh
cmFtcy5ndWNfbG9nX2xldmVsID0gMDsKIAl9CiAKQEAgLTM4MCw3ICszODEsNyBAQCBpbnQgaW50
ZWxfdWNfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlpZiAoIVVTRVNfR1VD
KGk5MTUpKQogCQlyZXR1cm4gMDsKIAotCWlmICghSEFTX0dVQyhpOTE1KSkKKwlpZiAoIWludGVs
X3VjX2Z3X3N1cHBvcnRlZCgmZ3VjLT5mdykpCiAJCXJldHVybiAtRU5PREVWOwogCiAJLyogWFhY
OiBHdUMgc3VibWlzc2lvbiBpcyB1bmF2YWlsYWJsZSBmb3Igbm93ICovCkBAIC00MjMsNyArNDI0
LDcgQEAgdm9pZCBpbnRlbF91Y19maW5pKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQog
CWlmICghVVNFU19HVUMoaTkxNSkpCiAJCXJldHVybjsKIAotCUdFTV9CVUdfT04oIUhBU19HVUMo
aTkxNSkpOworCUdFTV9CVUdfT04oIWludGVsX3VjX2Z3X3N1cHBvcnRlZCgmZ3VjLT5mdykpOwog
CiAJaWYgKFVTRVNfR1VDX1NVQk1JU1NJT04oaTkxNSkpCiAJCWludGVsX2d1Y19zdWJtaXNzaW9u
X2ZpbmkoZ3VjKTsKQEAgLTQzOSw3ICs0NDAsNyBAQCBzdGF0aWMgdm9pZCBfX3VjX3Nhbml0aXpl
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCXN0cnVjdCBpbnRlbF9ndWMgKmd1YyA9
ICZpOTE1LT5ndWM7CiAJc3RydWN0IGludGVsX2h1YyAqaHVjID0gJmk5MTUtPmh1YzsKIAotCUdF
TV9CVUdfT04oIUhBU19HVUMoaTkxNSkpOworCUdFTV9CVUdfT04oIWludGVsX3VjX2Z3X3N1cHBv
cnRlZCgmZ3VjLT5mdykpOwogCiAJaW50ZWxfaHVjX3Nhbml0aXplKGh1Yyk7CiAJaW50ZWxfZ3Vj
X3Nhbml0aXplKGd1Yyk7CkBAIC00NjQsNyArNDY1LDcgQEAgaW50IGludGVsX3VjX2luaXRfaHco
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJaWYgKCFVU0VTX0dVQyhpOTE1KSkKIAkJ
cmV0dXJuIDA7CiAKLQlHRU1fQlVHX09OKCFIQVNfR1VDKGk5MTUpKTsKKwlHRU1fQlVHX09OKCFp
bnRlbF91Y19md19zdXBwb3J0ZWQoJmd1Yy0+ZncpKTsKIAogCWd1Y19yZXNldF9pbnRlcnJ1cHRz
KGd1Yyk7CiAKQEAgLTU2MSw3ICs1NjIsNyBAQCB2b2lkIGludGVsX3VjX2ZpbmlfaHcoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJaWYgKCFpbnRlbF9ndWNfaXNfbG9hZGVkKGd1Yykp
CiAJCXJldHVybjsKIAotCUdFTV9CVUdfT04oIUhBU19HVUMoaTkxNSkpOworCUdFTV9CVUdfT04o
IWludGVsX3VjX2Z3X3N1cHBvcnRlZCgmZ3VjLT5mdykpOwogCiAJaWYgKFVTRVNfR1VDX1NVQk1J
U1NJT04oaTkxNSkpCiAJCWludGVsX2d1Y19zdWJtaXNzaW9uX2Rpc2FibGUoZ3VjKTsKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VjX2Z3LmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF91Y19mdy5jCmluZGV4IGYzNDJkZGQ0N2RmOC4uOGNlNzIxMDkwN2MwIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91Y19mdy5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2ludGVsX3VjX2Z3LmMKQEAgLTQ3LDYgKzQ3LDggQEAgdm9pZCBpbnRl
bF91Y19md19mZXRjaChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJc2l6ZV90
IHNpemU7CiAJaW50IGVycjsKIAorCUdFTV9CVUdfT04oIWludGVsX3VjX2Z3X3N1cHBvcnRlZCh1
Y19mdykpOworCiAJaWYgKCF1Y19mdy0+cGF0aCkgewogCQlkZXZfaW5mbyhkZXZfcHJpdi0+ZHJt
LmRldiwKIAkJCSAiJXM6IE5vIGZpcm13YXJlIHdhcyBkZWZpbmVkIGZvciAlcyFcbiIsCkBAIC0z
MjgsNyArMzMwLDcgQEAgdm9pZCBpbnRlbF91Y19md19jbGVhbnVwX2ZldGNoKHN0cnVjdCBpbnRl
bF91Y19mdyAqdWNfZncpCiAJaWYgKG9iaikKIAkJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwog
Ci0JdWNfZnctPmZldGNoX3N0YXR1cyA9IElOVEVMX1VDX0ZJUk1XQVJFX05PTkU7CisJdWNfZnct
PmZldGNoX3N0YXR1cyA9IElOVEVMX1VDX0ZJUk1XQVJFX05PVF9TVEFSVEVEOwogfQogCiAvKioK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VjX2Z3LmggYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF91Y19mdy5oCmluZGV4IDI0ZTY2NDY5MTUzYy4uODMzZDA0ZDA2
NTc2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91Y19mdy5oCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VjX2Z3LmgKQEAgLTI2LDYgKzI2LDcgQEAKICNk
ZWZpbmUgX0lOVEVMX1VDX0ZXX0hfCiAKICNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgorI2luY2x1
ZGUgImk5MTVfZ2VtLmgiCiAKIHN0cnVjdCBkcm1fcHJpbnRlcjsKIHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlOwpAQCAtMzQsOCArMzUsMTAgQEAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGU7CiAjZGVm
aW5lIElOVEVMX1VDX0ZJUk1XQVJFX1VSTCAiaHR0cHM6Ly9naXQua2VybmVsLm9yZy9wdWIvc2Nt
L2xpbnV4L2tlcm5lbC9naXQvZmlybXdhcmUvbGludXgtZmlybXdhcmUuZ2l0L3RyZWUvaTkxNSIK
IAogZW51bSBpbnRlbF91Y19md19zdGF0dXMgeworCUlOVEVMX1VDX0ZJUk1XQVJFX05PVF9TVVBQ
T1JURUQgPSAtMiwgLyogbm8gdWMgSFcgKi8KIAlJTlRFTF9VQ19GSVJNV0FSRV9GQUlMID0gLTEs
Ci0JSU5URUxfVUNfRklSTVdBUkVfTk9ORSA9IDAsCisJSU5URUxfVUNfRklSTVdBUkVfVU5JTklU
SUFMSVpFRCA9IDAsIC8qIHVzZWQgdG8gY2F0Y2ggY2hlY2tzIGRvbmUgdG9vIGVhcmx5ICovCisJ
SU5URUxfVUNfRklSTVdBUkVfTk9UX1NUQVJURUQgPSAxLAogCUlOVEVMX1VDX0ZJUk1XQVJFX1BF
TkRJTkcsCiAJSU5URUxfVUNfRklSTVdBUkVfU1VDQ0VTUwogfTsKQEAgLTc5LDEwICs4MiwxNCBA
QCBzdGF0aWMgaW5saW5lCiBjb25zdCBjaGFyICppbnRlbF91Y19md19zdGF0dXNfcmVwcihlbnVt
IGludGVsX3VjX2Z3X3N0YXR1cyBzdGF0dXMpCiB7CiAJc3dpdGNoIChzdGF0dXMpIHsKKwljYXNl
IElOVEVMX1VDX0ZJUk1XQVJFX05PVF9TVVBQT1JURUQ6CisJCXJldHVybiAiTi9BIC0gdWMgSFcg
bm90IGF2YWlsYWJsZSI7CiAJY2FzZSBJTlRFTF9VQ19GSVJNV0FSRV9GQUlMOgogCQlyZXR1cm4g
IkZBSUwiOwotCWNhc2UgSU5URUxfVUNfRklSTVdBUkVfTk9ORToKLQkJcmV0dXJuICJOT05FIjsK
KwljYXNlIElOVEVMX1VDX0ZJUk1XQVJFX1VOSU5JVElBTElaRUQ6CisJCXJldHVybiAiVU5JTklU
SUFMSVpFRCI7CisJY2FzZSBJTlRFTF9VQ19GSVJNV0FSRV9OT1RfU1RBUlRFRDoKKwkJcmV0dXJu
ICJOT1RfU1RBUlRFRCI7CiAJY2FzZSBJTlRFTF9VQ19GSVJNV0FSRV9QRU5ESU5HOgogCQlyZXR1
cm4gIlBFTkRJTkciOwogCWNhc2UgSU5URUxfVUNfRklSTVdBUkVfU1VDQ0VTUzoKQEAgLTEwNiw5
ICsxMTMsMTUgQEAgc3RhdGljIGlubGluZQogdm9pZCBpbnRlbF91Y19md19pbml0X2Vhcmx5KHN0
cnVjdCBpbnRlbF91Y19mdyAqdWNfZncsCiAJCQkgICAgZW51bSBpbnRlbF91Y19md190eXBlIHR5
cGUpCiB7CisJLyoKKwkgKiB3ZSB1c2UgRklSTVdBUkVfVU5JTklUSUFMSVpFRCB0byBkZXRlY3Qg
Y2hlY2tzIGFnYWluc3QgZmV0Y2hfc3RhdHVzCisJICogYmVmb3JlIHdlJ3JlIGxvb2tlZCBhdCB0
aGUgSFcgY2FwcyB0byBzZWUgaWYgd2UgaGF2ZSB1YyBzdXBwb3J0CisJICovCisJQlVJTERfQlVH
X09OKElOVEVMX1VDX0ZJUk1XQVJFX1VOSU5JVElBTElaRUQpOworCiAJdWNfZnctPnBhdGggPSBO
VUxMOwotCXVjX2Z3LT5mZXRjaF9zdGF0dXMgPSBJTlRFTF9VQ19GSVJNV0FSRV9OT05FOwotCXVj
X2Z3LT5sb2FkX3N0YXR1cyA9IElOVEVMX1VDX0ZJUk1XQVJFX05PTkU7CisJdWNfZnctPmZldGNo
X3N0YXR1cyA9IElOVEVMX1VDX0ZJUk1XQVJFX1VOSU5JVElBTElaRUQ7CisJdWNfZnctPmxvYWRf
c3RhdHVzID0gSU5URUxfVUNfRklSTVdBUkVfTk9UX1NUQVJURUQ7CiAJdWNfZnctPnR5cGUgPSB0
eXBlOwogfQogCkBAIC0xMjIsNiArMTM1LDEzIEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBpbnRlbF91
Y19md19pc19sb2FkZWQoc3RydWN0IGludGVsX3VjX2Z3ICp1Y19mdykKIAlyZXR1cm4gdWNfZnct
PmxvYWRfc3RhdHVzID09IElOVEVMX1VDX0ZJUk1XQVJFX1NVQ0NFU1M7CiB9CiAKK3N0YXRpYyBp
bmxpbmUgYm9vbCBpbnRlbF91Y19md19zdXBwb3J0ZWQoc3RydWN0IGludGVsX3VjX2Z3ICp1Y19m
dykKK3sKKwkvKiBzaG91bGRuJ3QgY2FsbCB0aGlzIGJlZm9yZSBjaGVja2luZyBody9ibG9iIGF2
YWlsYWJpbGl0eSAqLworCUdFTV9CVUdfT04odWNfZnctPmZldGNoX3N0YXR1cyA9PSBJTlRFTF9V
Q19GSVJNV0FSRV9VTklOSVRJQUxJWkVEKTsKKwlyZXR1cm4gdWNfZnctPmZldGNoX3N0YXR1cyAh
PSBJTlRFTF9VQ19GSVJNV0FSRV9OT1RfU1VQUE9SVEVEOworfQorCiBzdGF0aWMgaW5saW5lIHZv
aWQgaW50ZWxfdWNfZndfc2FuaXRpemUoc3RydWN0IGludGVsX3VjX2Z3ICp1Y19mdykKIHsKIAlp
ZiAoaW50ZWxfdWNfZndfaXNfbG9hZGVkKHVjX2Z3KSkKLS0gCjIuMjIuMAoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlz
dApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

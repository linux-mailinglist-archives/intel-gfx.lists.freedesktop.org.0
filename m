Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C00E23B1C2B
	for <lists+intel-gfx@lfdr.de>; Wed, 23 Jun 2021 16:14:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E03716E90D;
	Wed, 23 Jun 2021 14:14:04 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6ECF66E905
 for <intel-gfx@lists.freedesktop.org>; Wed, 23 Jun 2021 14:14:03 +0000 (UTC)
IronPort-SDR: aEyVCUoM8aj3KFgbd1+j1pAV+k/J0r7xGUG3Lj11zfYEZYQgscC068e0JwbYCQG/WSK8g3LUMA
 zIdSUqKFeUPw==
X-IronPort-AV: E=McAfee;i="6200,9189,10024"; a="186957118"
X-IronPort-AV: E=Sophos;i="5.83,294,1616482800"; d="scan'208";a="186957118"
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by fmsmga106.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 23 Jun 2021 07:14:02 -0700
IronPort-SDR: D2Icaw2Saw/dF+ZNTAYDJCtJZLcfzd6dl62A1iNNDnBT7nf1FWIaI+VuG95rxQ8pJ13buv7Brp
 kGuWdV19lQDg==
X-IronPort-AV: E=Sophos;i="5.83,294,1616482800"; d="scan'208";a="487326838"
Received: from huynhn-mobl1.amr.corp.intel.com (HELO localhost)
 ([10.249.35.176])
 by orsmga001-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 23 Jun 2021 07:13:57 -0700
From: Jani Nikula <jani.nikula@linux.intel.com>
To: Ville Syrjala <ville.syrjala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
In-Reply-To: <20210608073603.2408-16-ville.syrjala@linux.intel.com>
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
References: <20210608073603.2408-1-ville.syrjala@linux.intel.com>
 <20210608073603.2408-16-ville.syrjala@linux.intel.com>
Date: Wed, 23 Jun 2021 17:13:53 +0300
Message-ID: <87tulou0ri.fsf@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH v2 15/17] drm/i915: Clean up jsl/ehl buf
 trans functions
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVHVlLCAwOCBKdW4gMjAyMSwgVmlsbGUgU3lyamFsYSA8dmlsbGUuc3lyamFsYUBsaW51eC5p
bnRlbC5jb20+IHdyb3RlOgo+IEZyb206IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBs
aW51eC5pbnRlbC5jb20+Cj4KPiBUaGUganNsL2VobCBidWYgdHJhbnMgZnVuY3Rpb25zIGFyZSBu
ZWVkbGVzc2x5IGNvbnBsaWNhdGVkLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBeCgpNeSBvbmx5IGRpc2FwcG9pbnRtZW50IGhlcmUgaXMgdGhhdCBu
b3cgc29tZSBvZiB0aGUKKl9nZXRfY29tYm9fYnVmX3RyYW5zX2VkcCgpIGZ1bmN0aW9ucyBoYW5k
bGUgbG93IHZzd2luZyBpbnNpZGUsIGFuZCBzb21lCmV4cGVjdCB0byBvbmx5IGJlIGNhbGxlZCBm
b3IgbG93IHZzd2luZy4KCkF0IGxlYXN0IGNubCBjb3VsZCBzd2l0Y2ggdG8gc2FtZSBzdHlsZSBh
cyBoZXJlLCB0aGUgcmVzdCBnZXQgbW9yZQpjb21wbGljYXRlZC4KCk5vdCBhIGJpZyBpc3N1ZSwg
YW5kIHRoZSBjb2RlIGlzIGVhc3kgZW5vdWdoIHRvIGZvbGxvdyBmb3IgZWFjaAppbmRpdmlkdWFs
IHBsYXRmb3JtLiBBbmQgSSBsaWtlIHRoZSByZWR1Y3Rpb24gaW4gY2FsbCBkZXB0aC4KClJldmll
d2VkLWJ5OiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1bGFAaW50ZWwuY29tPgoKCj4gU2ltcGxpZnkg
dGhlbS4KPgo+IFNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBs
aW51eC5pbnRlbC5jb20+Cj4gLS0tCj4gIC4uLi9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaV9i
dWZfdHJhbnMuYyAgICB8IDg3ICsrKysrLS0tLS0tLS0tLS0tLS0KPiAgMSBmaWxlIGNoYW5nZWQs
IDIwIGluc2VydGlvbnMoKyksIDY3IGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGlfYnVmX3RyYW5zLmMKPiBpbmRleCA5Mzk4YWE2
MjU4NWIuLjJiZDUxY2U0YWEyYyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2RkaV9idWZfdHJhbnMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5jCj4gQEAgLTEzNzcsNDIgKzEzNzcsMTYgQEAg
aWNsX2dldF9tZ19idWZfdHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCj4gIAkJ
cmV0dXJuIGljbF9nZXRfbWdfYnVmX3RyYW5zX2RwKGVuY29kZXIsIGNydGNfc3RhdGUsIG5fZW50
cmllcyk7Cj4gIH0KPiAgCj4gLXN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFu
cyAqCj4gLWVobF9nZXRfY29tYm9fYnVmX3RyYW5zX2hkbWkoc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXIsCj4gLQkJCSAgICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNf
c3RhdGUsCj4gLQkJCSAgICAgaW50ICpuX2VudHJpZXMpCj4gLXsKPiAtCXJldHVybiBpbnRlbF9n
ZXRfYnVmX3RyYW5zKCZpY2xfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfaGRtaSwKPiAtCQkJ
CSAgIG5fZW50cmllcyk7Cj4gLX0KPiAtCj4gLXN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRp
X2J1Zl90cmFucyAqCj4gLWVobF9nZXRfY29tYm9fYnVmX3RyYW5zX2RwKHN0cnVjdCBpbnRlbF9l
bmNvZGVyICplbmNvZGVyLAo+IC0JCQkgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
Y3J0Y19zdGF0ZSwKPiAtCQkJICAgaW50ICpuX2VudHJpZXMpCj4gLXsKPiAtCXJldHVybiBpbnRl
bF9nZXRfYnVmX3RyYW5zKCZlaGxfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfZHAsCj4gLQkJ
CQkgICBuX2VudHJpZXMpOwo+IC19Cj4gIAo+ICBzdGF0aWMgY29uc3Qgc3RydWN0IGludGVsX2Rk
aV9idWZfdHJhbnMgKgo+ICBlaGxfZ2V0X2NvbWJvX2J1Zl90cmFuc19lZHAoc3RydWN0IGludGVs
X2VuY29kZXIgKmVuY29kZXIsCj4gIAkJCSAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqY3J0Y19zdGF0ZSwKPiAgCQkJICAgIGludCAqbl9lbnRyaWVzKQo+ICB7Cj4gLQlzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsK
PiAtCj4gLQlpZiAoZGV2X3ByaXYtPnZidC5lZHAubG93X3Zzd2luZykgewo+IC0JCWlmIChjcnRj
X3N0YXRlLT5wb3J0X2Nsb2NrID4gMjcwMDAwKSB7Cj4gLQkJCXJldHVybiBpbnRlbF9nZXRfYnVm
X3RyYW5zKCZlaGxfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfZWRwX2hicjIsCj4gLQkJCQkJ
CSAgIG5fZW50cmllcyk7Cj4gLQkJfSBlbHNlIHsKPiAtCQkJcmV0dXJuIGludGVsX2dldF9idWZf
dHJhbnMoJmljbF9jb21ib19waHlfZGRpX3RyYW5zbGF0aW9uc19lZHBfaGJyMiwKPiAtCQkJCQkJ
ICAgbl9lbnRyaWVzKTsKPiAtCQl9Cj4gLQl9Cj4gLQo+IC0JcmV0dXJuIGVobF9nZXRfY29tYm9f
YnVmX3RyYW5zX2RwKGVuY29kZXIsIGNydGNfc3RhdGUsIG5fZW50cmllcyk7Cj4gKwlpZiAoY3J0
Y19zdGF0ZS0+cG9ydF9jbG9jayA+IDI3MDAwMCkKPiArCQlyZXR1cm4gaW50ZWxfZ2V0X2J1Zl90
cmFucygmZWhsX2NvbWJvX3BoeV9kZGlfdHJhbnNsYXRpb25zX2VkcF9oYnIyLCBuX2VudHJpZXMp
Owo+ICsJZWxzZQo+ICsJCXJldHVybiBpbnRlbF9nZXRfYnVmX3RyYW5zKCZpY2xfY29tYm9fcGh5
X2RkaV90cmFuc2xhdGlvbnNfZWRwX2hicjIsIG5fZW50cmllcyk7Cj4gIH0KPiAgCj4gIHN0YXRp
YyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAqCj4gQEAgLTE0MjAsMzAgKzEzOTQs
MTUgQEAgZWhsX2dldF9jb21ib19idWZfdHJhbnMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29k
ZXIsCj4gIAkJCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+ICAJ
CQlpbnQgKm5fZW50cmllcykKPiAgewo+ICsJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7Cj4gKwo+ICAJaWYgKGludGVsX2NydGNf
aGFzX3R5cGUoY3J0Y19zdGF0ZSwgSU5URUxfT1VUUFVUX0hETUkpKQo+IC0JCXJldHVybiBlaGxf
Z2V0X2NvbWJvX2J1Zl90cmFuc19oZG1pKGVuY29kZXIsIGNydGNfc3RhdGUsIG5fZW50cmllcyk7
Cj4gLQllbHNlIGlmIChpbnRlbF9jcnRjX2hhc190eXBlKGNydGNfc3RhdGUsIElOVEVMX09VVFBV
VF9FRFApKQo+ICsJCXJldHVybiBpbnRlbF9nZXRfYnVmX3RyYW5zKCZpY2xfY29tYm9fcGh5X2Rk
aV90cmFuc2xhdGlvbnNfaGRtaSwgbl9lbnRyaWVzKTsKPiArCWVsc2UgaWYgKGludGVsX2NydGNf
aGFzX3R5cGUoY3J0Y19zdGF0ZSwgSU5URUxfT1VUUFVUX0VEUCkgJiYKPiArCQkgZGV2X3ByaXYt
PnZidC5lZHAubG93X3Zzd2luZykKPiAgCQlyZXR1cm4gZWhsX2dldF9jb21ib19idWZfdHJhbnNf
ZWRwKGVuY29kZXIsIGNydGNfc3RhdGUsIG5fZW50cmllcyk7Cj4gIAllbHNlCj4gLQkJcmV0dXJu
IGVobF9nZXRfY29tYm9fYnVmX3RyYW5zX2RwKGVuY29kZXIsIGNydGNfc3RhdGUsIG5fZW50cmll
cyk7Cj4gLX0KPiAtCj4gLXN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyAq
Cj4gLWpzbF9nZXRfY29tYm9fYnVmX3RyYW5zX2hkbWkoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIsCj4gLQkJCSAgICAgY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3Rh
dGUsCj4gLQkJCSAgICAgaW50ICpuX2VudHJpZXMpCj4gLXsKPiAtCXJldHVybiBpbnRlbF9nZXRf
YnVmX3RyYW5zKCZpY2xfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfaGRtaSwKPiAtCQkJCSAg
IG5fZW50cmllcyk7Cj4gLX0KPiAtCj4gLXN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1
Zl90cmFucyAqCj4gLWpzbF9nZXRfY29tYm9fYnVmX3RyYW5zX2RwKHN0cnVjdCBpbnRlbF9lbmNv
ZGVyICplbmNvZGVyLAo+IC0JCQkgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0
Y19zdGF0ZSwKPiAtCQkJICAgaW50ICpuX2VudHJpZXMpCj4gLXsKPiAtCXJldHVybiBpbnRlbF9n
ZXRfYnVmX3RyYW5zKCZpY2xfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfZHBfaGJyMl9lZHBf
aGJyMywKPiAtCQkJCSAgIG5fZW50cmllcyk7Cj4gKwkJcmV0dXJuIGludGVsX2dldF9idWZfdHJh
bnMoJmVobF9jb21ib19waHlfZGRpX3RyYW5zbGF0aW9uc19kcCwgbl9lbnRyaWVzKTsKPiAgfQo+
ICAKPiAgc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKPiBAQCAtMTQ1
MSwxOSArMTQxMCwxMCBAQCBqc2xfZ2V0X2NvbWJvX2J1Zl90cmFuc19lZHAoc3RydWN0IGludGVs
X2VuY29kZXIgKmVuY29kZXIsCj4gIAkJCSAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqY3J0Y19zdGF0ZSwKPiAgCQkJICAgIGludCAqbl9lbnRyaWVzKQo+ICB7Cj4gLQlzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsK
PiAtCj4gLQlpZiAoZGV2X3ByaXYtPnZidC5lZHAubG93X3Zzd2luZykgewo+IC0JCWlmIChjcnRj
X3N0YXRlLT5wb3J0X2Nsb2NrID4gMjcwMDAwKSB7Cj4gLQkJCXJldHVybiBpbnRlbF9nZXRfYnVm
X3RyYW5zKCZqc2xfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfZWRwX2hicjIsCj4gLQkJCQkJ
CSAgIG5fZW50cmllcyk7Cj4gLQkJfSBlbHNlIHsKPiAtCQkJcmV0dXJuIGludGVsX2dldF9idWZf
dHJhbnMoJmpzbF9jb21ib19waHlfZGRpX3RyYW5zbGF0aW9uc19lZHBfaGJyLAo+IC0JCQkJCQkg
ICBuX2VudHJpZXMpOwo+IC0JCX0KPiAtCX0KPiAtCj4gLQlyZXR1cm4ganNsX2dldF9jb21ib19i
dWZfdHJhbnNfZHAoZW5jb2RlciwgY3J0Y19zdGF0ZSwgbl9lbnRyaWVzKTsKPiArCWlmIChjcnRj
X3N0YXRlLT5wb3J0X2Nsb2NrID4gMjcwMDAwKQo+ICsJCXJldHVybiBpbnRlbF9nZXRfYnVmX3Ry
YW5zKCZqc2xfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfZWRwX2hicjIsIG5fZW50cmllcyk7
Cj4gKwllbHNlCj4gKwkJcmV0dXJuIGludGVsX2dldF9idWZfdHJhbnMoJmpzbF9jb21ib19waHlf
ZGRpX3RyYW5zbGF0aW9uc19lZHBfaGJyLCBuX2VudHJpZXMpOwo+ICB9Cj4gIAo+ICBzdGF0aWMg
Y29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKgo+IEBAIC0xNDcxLDEyICsxNDIxLDE1
IEBAIGpzbF9nZXRfY29tYm9fYnVmX3RyYW5zKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVy
LAo+ICAJCQljb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKPiAgCQkJ
aW50ICpuX2VudHJpZXMpCj4gIHsKPiArCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
diA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOwo+ICsKPiAgCWlmIChpbnRlbF9jcnRjX2hh
c190eXBlKGNydGNfc3RhdGUsIElOVEVMX09VVFBVVF9IRE1JKSkKPiAtCQlyZXR1cm4ganNsX2dl
dF9jb21ib19idWZfdHJhbnNfaGRtaShlbmNvZGVyLCBjcnRjX3N0YXRlLCBuX2VudHJpZXMpOwo+
IC0JZWxzZSBpZiAoaW50ZWxfY3J0Y19oYXNfdHlwZShjcnRjX3N0YXRlLCBJTlRFTF9PVVRQVVRf
RURQKSkKPiArCQlyZXR1cm4gaW50ZWxfZ2V0X2J1Zl90cmFucygmaWNsX2NvbWJvX3BoeV9kZGlf
dHJhbnNsYXRpb25zX2hkbWksIG5fZW50cmllcyk7Cj4gKwllbHNlIGlmIChpbnRlbF9jcnRjX2hh
c190eXBlKGNydGNfc3RhdGUsIElOVEVMX09VVFBVVF9FRFApICYmCj4gKwkJIGRldl9wcml2LT52
YnQuZWRwLmxvd192c3dpbmcpCj4gIAkJcmV0dXJuIGpzbF9nZXRfY29tYm9fYnVmX3RyYW5zX2Vk
cChlbmNvZGVyLCBjcnRjX3N0YXRlLCBuX2VudHJpZXMpOwo+ICAJZWxzZQo+IC0JCXJldHVybiBq
c2xfZ2V0X2NvbWJvX2J1Zl90cmFuc19kcChlbmNvZGVyLCBjcnRjX3N0YXRlLCBuX2VudHJpZXMp
Owo+ICsJCXJldHVybiBpbnRlbF9nZXRfYnVmX3RyYW5zKCZpY2xfY29tYm9fcGh5X2RkaV90cmFu
c2xhdGlvbnNfZHBfaGJyMl9lZHBfaGJyMywgbl9lbnRyaWVzKTsKPiAgfQo+ICAKPiAgc3RhdGlj
IGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICoKCi0tIApKYW5pIE5pa3VsYSwgSW50
ZWwgT3BlbiBTb3VyY2UgR3JhcGhpY3MgQ2VudGVyCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeAo=

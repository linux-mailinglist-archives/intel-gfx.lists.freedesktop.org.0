Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9DBD722F1E
	for <lists+intel-gfx@lfdr.de>; Mon, 20 May 2019 10:42:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1AC2489349;
	Mon, 20 May 2019 08:42:41 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 191A089349
 for <Intel-gfx@lists.freedesktop.org>; Mon, 20 May 2019 08:42:38 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 16611622-1500050 for multiple; Mon, 20 May 2019 09:42:29 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Intel-gfx@lists.freedesktop.org,
 Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
References: <20190520082816.32137-1-tvrtko.ursulin@linux.intel.com>
In-Reply-To: <20190520082816.32137-1-tvrtko.ursulin@linux.intel.com>
Message-ID: <155834174747.6928.4632655584513112667@skylake-alporthouse-com>
Date: Mon, 20 May 2019 09:42:27 +0100
Subject: Re: [Intel-gfx] [PATCH 1/2] drm/i915/selftests: Add
 live_context_workarounds
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBUdnJ0a28gVXJzdWxpbiAoMjAxOS0wNS0yMCAwOToyODoxNSkKPiBGcm9tOiBUdnJ0
a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwuY29tPgo+IAo+IFRlc3QgY29udGV4dCB3
b3JrYXJvdW5kcyBoYXZlIGJlZW4gY29ycmVjdGx5IGFwcGxpZWQgaW4gYSBuZXdseSBjcmVhdGVk
Cj4gY29udGV4dC4KPiAKPiBUbyBhY2NvbXBsaXNoIHRoaXMgdGhlIGV4aXN0aW5nIGVuZ2luZV93
YV9saXN0X3ZlcmlmeSBoZWxwZXIgaXMgZXh0ZW5kZWQKPiB0byB0YWtlIGluIGEgY29udGV4dCBm
cm9tIHdoaWNoIHJlYWRpbmcgb2YgdGhlIHdvcmthcm91bmQgbGlzdCB3aWxsIGJlCj4gZG9uZS4K
PiAKPiBTaWduZWQtb2ZmLWJ5OiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50ZWwu
Y29tPgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5j
ICAgfCAxOCArKysrKysrLS0tCj4gIC4uLi9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rfd29ya2Fy
b3VuZHMuYyAgICB8IDM2ICsrKysrKysrKysrKysrKysrKy0KPiAgMiBmaWxlcyBjaGFuZ2VkLCA0
OSBpbnNlcnRpb25zKCspLCA1IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYwo+IGluZGV4IDQzZTI5MDMwNjU1MS4uNDQ5NGJjOTE3
MDg0IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91
bmRzLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5j
Cj4gQEAgLTEzMzgsMTEgKzEzMzgsMTMgQEAgd2FfbGlzdF9zcm0oc3RydWN0IGk5MTVfcmVxdWVz
dCAqcnEsCj4gICAgICAgICByZXR1cm4gMDsKPiAgfQo+ICAKPiAtc3RhdGljIGludCBlbmdpbmVf
d2FfbGlzdF92ZXJpZnkoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAo+ICtzdGF0aWMg
aW50IGVuZ2luZV93YV9saXN0X3ZlcmlmeShzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4LAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW0gaW50ZWxfZW5naW5lX2lkIGlk
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBpOTE1X3dh
X2xpc3QgKiBjb25zdCB3YWwsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29u
c3QgY2hhciAqZnJvbSkKPiAgewo+ICAgICAgICAgY29uc3Qgc3RydWN0IGk5MTVfd2EgKndhOwo+
ICsgICAgICAgc3RydWN0IGludGVsX2NvbnRleHQgKmNlOwoKUGFzcyBpbnRlbF9jb250ZXh0IGFy
b3VuZCwgaXQncyBmYXIgbGVzcyBoYWlyeSBpbiB0aGUgbG9uZyBydW4uCgo+ICAgICAgICAgc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcnE7Cj4gICAgICAgICBzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKPiAg
ICAgICAgIHVuc2lnbmVkIGludCBpOwo+IEBAIC0xMzUyLDExICsxMzU0LDE2IEBAIHN0YXRpYyBp
bnQgZW5naW5lX3dhX2xpc3RfdmVyaWZ5KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwK
PiAgICAgICAgIGlmICghd2FsLT5jb3VudCkKPiAgICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4g
IAo+IC0gICAgICAgdm1hID0gY3JlYXRlX3NjcmF0Y2goJmVuZ2luZS0+aTkxNS0+Z2d0dC52bSwg
d2FsLT5jb3VudCk7Cj4gKyAgICAgICB2bWEgPSBjcmVhdGVfc2NyYXRjaCgmY3R4LT5pOTE1LT5n
Z3R0LnZtLCB3YWwtPmNvdW50KTsKPiAgICAgICAgIGlmIChJU19FUlIodm1hKSkKPiAgICAgICAg
ICAgICAgICAgcmV0dXJuIFBUUl9FUlIodm1hKTsKPiAgCj4gLSAgICAgICBycSA9IGk5MTVfcmVx
dWVzdF9jcmVhdGUoZW5naW5lLT5rZXJuZWxfY29udGV4dCk7Cj4gKyAgICAgICBjZSA9IGk5MTVf
Z2VtX2NvbnRleHRfZ2V0X2VuZ2luZShjdHgsIGlkKTsKPiArICAgICAgIGlmIChJU19FUlIoY2Up
KQo+ICsgICAgICAgICAgICAgICByZXR1cm4gUFRSX0VSUihjZSk7Cj4gKwo+ICsgICAgICAgcnEg
PSBpbnRlbF9jb250ZXh0X2NyZWF0ZV9yZXF1ZXN0KGNlKTsKCkZ3aXcsIHRoaXMgaXMgaWd0X3Jl
cXVlc3RfYWxsb2MoKSwgYnV0IEknZCByZWNvbW1lbmQgcGFzc2luZwppbnRlbF9jb250ZXh0LgoK
PiArICAgICAgIGludGVsX2NvbnRleHRfcHV0KGNlKTsKPiAgICAgICAgIGlmIChJU19FUlIocnEp
KSB7Cj4gICAgICAgICAgICAgICAgIGVyciA9IFBUUl9FUlIocnEpOwo+ICAgICAgICAgICAgICAg
ICBnb3RvIGVycl92bWE7Cj4gQEAgLTEzOTQsNyArMTQwMSwxMCBAQCBzdGF0aWMgaW50IGVuZ2lu
ZV93YV9saXN0X3ZlcmlmeShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCj4gIGludCBp
bnRlbF9lbmdpbmVfdmVyaWZ5X3dvcmthcm91bmRzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyICpm
cm9tKQo+ICB7Cj4gLSAgICAgICByZXR1cm4gZW5naW5lX3dhX2xpc3RfdmVyaWZ5KGVuZ2luZSwg
JmVuZ2luZS0+d2FfbGlzdCwgZnJvbSk7Cj4gKyAgICAgICByZXR1cm4gZW5naW5lX3dhX2xpc3Rf
dmVyaWZ5KGVuZ2luZS0+a2VybmVsX2NvbnRleHQtPmdlbV9jb250ZXh0LAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBlbmdpbmUtPmlkLAo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAmZW5naW5lLT53YV9saXN0LAo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBmcm9tKTsKPiAgfQo+ICAKPiAgI2lmIElTX0VOQUJMRUQoQ09O
RklHX0RSTV9JOTE1X1NFTEZURVNUKQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9zZWxmdGVzdF93b3JrYXJvdW5kcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2Vs
ZnRlc3Rfd29ya2Fyb3VuZHMuYwo+IGluZGV4IDlmNzY4MGI5OTg0Yi4uYWUzZjkyZDU1ZWQ4IDEw
MDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3dvcmthcm91bmRz
LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF93b3JrYXJvdW5kcy5j
Cj4gQEAgLTEwMTMsNyArMTAxMyw3IEBAIHN0YXRpYyBib29sIHZlcmlmeV9ndF9lbmdpbmVfd2Eo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCj4gICAgICAgICBvayAmPSB3YV9saXN0X3Zl
cmlmeSgmaTkxNS0+dW5jb3JlLCAmbGlzdHMtPmd0X3dhX2xpc3QsIHN0cik7Cj4gIAo+ICAgICAg
ICAgZm9yX2VhY2hfZW5naW5lKGVuZ2luZSwgaTkxNSwgaWQpIHsKPiAtICAgICAgICAgICAgICAg
b2sgJj0gZW5naW5lX3dhX2xpc3RfdmVyaWZ5KGVuZ2luZSwKPiArICAgICAgICAgICAgICAgb2sg
Jj0gZW5naW5lX3dhX2xpc3RfdmVyaWZ5KGk5MTUtPmtlcm5lbF9jb250ZXh0LCBpZCwKCmJlY29t
ZXMKCglvayAmPSBlbmdpbmVfd2FfbGlzdF92ZXJpZnkoZW5naW5lLT5rZXJuZWxfY29udGV4dCwK
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbGlzdHMtPmVu
Z2luZVtpZF0ud2FfbGlzdCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cikgPT0gMDsKPiAgICAgICAgIH0KPiBAQCAtMTE0Miw2ICsxMTQyLDM5IEBAIGxp
dmVfZW5naW5lX3Jlc2V0X2d0X2VuZ2luZV93b3JrYXJvdW5kcyh2b2lkICphcmcpCj4gICAgICAg
ICByZXR1cm4gcmV0Owo+ICB9Cj4gIAo+ICtzdGF0aWMgaW50Cj4gK2ludGVsX2N0eF92ZXJpZnlf
d29ya2Fyb3VuZHMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCBjb25zdCBjaGFyICpm
cm9tKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4ID0KPiArICAg
ICAgICAgICAgICAgaTkxNV9nZW1fY29udGV4dF9jcmVhdGVfa2VybmVsKGVuZ2luZS0+aTkxNSwg
MCk7Cj4gKyAgICAgICBpbnQgcmV0Owo+ICsKPiArICAgICAgIGlmIChJU19FUlIoY3R4KSkKPiAr
ICAgICAgICAgICAgICAgcmV0dXJuIFBUUl9FUlIoY3R4KTsKPiArCgpMb29rcyBsaWtlIHRoZSBm
aXJzdCB1c2VyIGZvciBhIEdFTS1sZXNzIGludGVsX2NvbnRleHQuIEZvb2QgZm9yCnRob3VnaHQu
Cgo+ICsgICAgICAgcmV0ID0gZW5naW5lX3dhX2xpc3RfdmVyaWZ5KGN0eCwgZW5naW5lLT5pZCwg
JmVuZ2luZS0+Y3R4X3dhX2xpc3QsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZnJvbSk7Cj4gKwo+ICsgICAgICAgaTkxNV9nZW1fY29udGV4dF9zZXRfY2xvc2VkKGN0eCk7
Cj4gKyAgICAgICBpOTE1X2dlbV9jb250ZXh0X3B1dChjdHgpOwo+ICsKPiArICAgICAgIHJldHVy
biByZXQ7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQKPiArbGl2ZV9jb250ZXh0X3dvcmthcm91bmRz
KHZvaWQgKmFyZykKPiArewo+ICsgICAgICAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUg
PSBhcmc7Cj4gKyAgICAgICBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7Cj4gKyAgICAg
ICBlbnVtIGludGVsX2VuZ2luZV9pZCBpZDsKPiArICAgICAgIGludCByZXQgPSAwOwo+ICsKPiAr
ICAgICAgIGZvcl9lYWNoX2VuZ2luZShlbmdpbmUsIGk5MTUsIGlkKQoKU28geW91IG1pZ2h0IGFz
IHdlbGwgY3JlYXRlIHRoZSBjb250ZXh0IGluIHRoZSBvdXRlciBzY29wZSwgdGhlbiBpdGVyYXRl
Cm92ZXIgdGhlIGZvcl9lYWNoX2dlbV9lbmdpbmUoKQoKPiArICAgICAgICAgICAgICAgcmV0IHw9
IGludGVsX2N0eF92ZXJpZnlfd29ya2Fyb3VuZHMoZW5naW5lLCBlbmdpbmUtPm5hbWUpOwoKQW5k
IHRoZW4gd2UgY291bGQgZXZlbiBleHRlbmQgdGhpcyB0byBpbmplY3QgYSByZXNldCBhbmQgdmVy
aWZ5IHRoZQpjb250ZXh0IGlzIHVuYWZmZWN0ZWQuCi1DaHJpcwpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVs
LWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 756EA5EAC11
	for <lists+intel-gfx@lfdr.de>; Mon, 26 Sep 2022 18:07:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4C5A710E715;
	Mon, 26 Sep 2022 16:07:02 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B182910E715
 for <intel-gfx@lists.freedesktop.org>; Mon, 26 Sep 2022 16:06:58 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=intel.com; i=@intel.com; q=dns/txt; s=Intel;
 t=1664208418; x=1695744418;
 h=date:message-id:from:to:cc:subject:in-reply-to:
 references:mime-version;
 bh=Usts34g892FGzU3KWcSm/tp8LzKYxEBBJdj9HAXSofo=;
 b=MIUSePKM9WUtqo7W/sFV4jhHbmI2gWpXD8uKHP6xjNULQ5YK6omYPzNQ
 /s5kBgT7Y3qsrPoldZAO67Qyh1b93fN7jIQrouWAN16bgo1at0yBQbh7r
 FInuKR4bjzCQVogDoihxcAYBIsl0MZeliAg2gH60+Hv6N4h8INsiLOLhm
 PkWk85Za41DXEDRmRPDLXohv0bqJkqJw8DIcb44HU6KgI8YCjDaMFrTd8
 N5BvRZKqK6xxfCqwyrDqgtJbG+E6//VCTDXnSp9PMaOUcY+t7uFTjXFla
 t+Mh5psF897lrx1Fh/j4PGqoq8xt0tm9NpjjslBZU9kCHhm6cs9x6BMXn A==;
X-IronPort-AV: E=McAfee;i="6500,9779,10482"; a="387358744"
X-IronPort-AV: E=Sophos;i="5.93,346,1654585200"; d="scan'208";a="387358744"
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by fmsmga105.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 26 Sep 2022 09:06:03 -0700
X-IronPort-AV: E=McAfee;i="6500,9779,10482"; a="689607775"
X-IronPort-AV: E=Sophos;i="5.93,346,1654585200"; d="scan'208";a="689607775"
Received: from justinbl-mobl.amr.corp.intel.com (HELO adixit-arch.intel.com)
 ([10.212.181.227])
 by fmsmga004-auth.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 26 Sep 2022 09:06:02 -0700
Date: Mon, 26 Sep 2022 08:55:34 -0700
Message-ID: <87zgemuo3t.wl-ashutosh.dixit@intel.com>
From: "Dixit, Ashutosh" <ashutosh.dixit@intel.com>
To: Umesh Nerlige Ramappa <umesh.nerlige.ramappa@intel.com>
In-Reply-To: <20220923201154.283784-6-umesh.nerlige.ramappa@intel.com>
References: <20220923201154.283784-1-umesh.nerlige.ramappa@intel.com>	<20220923201154.283784-6-umesh.nerlige.ramappa@intel.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?ISO-8859-4?Q?Goj=F2?=) APEL-LB/10.8 EasyPG/1.0.0
 Emacs/28.1 (x86_64-pc-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
Subject: Re: [Intel-gfx] [PATCH v2 05/15] drm/i915/perf: Enable commands per
 clock reporting in OA
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

On Fri, 23 Sep 2022 13:11:44 -0700, Umesh Nerlige Ramappa wrote:
>
> XEHPSDV and DG2 provide a way to configure bytes per clock vs commands
> per clock reporting. Enable bytes per clock setting on enabling OA.

The commit title should also be changed to say bytes per clock instead of
commands per clock.

Also please add "Bspec: 51762" (and also maybe "Bspec: 52201") to the
commit message.

> @@ -2760,6 +2762,16 @@ gen12_enable_metric_set(struct i915_perf_stream *stream,
>			    (period_exponent << GEN12_OAG_OAGLBCTXCTRL_TIMER_PERIOD_SHIFT))
>			    : 0);
>
> +	/*
> +	 * Initialize Super Queue Internal Cnt Register
> +	 * Set PMON Enable in order to collect valid metrics.
> +	 * Enable commands per clock reporting in OA for XEHPSDV onward.

Here also say bytes per clock instead of commands per clock.

> +	 */
> +	sqcnt1 = GEN12_SQCNT1_PMON_ENABLE |
> +		 (HAS_OA_BPC_REPORTING(i915) ? GEN12_SQCNT1_OABPC : 0);
> +
> +	intel_uncore_rmw(uncore, GEN12_SQCNT1, 0, sqcnt1);
> +

With that, this patch is:

Reviewed-by: Ashutosh Dixit <ashutosh.dixit@intel.com>

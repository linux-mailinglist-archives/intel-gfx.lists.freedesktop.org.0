Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3A470169FB
	for <lists+intel-gfx@lfdr.de>; Tue,  7 May 2019 20:12:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8D25B6E81E;
	Tue,  7 May 2019 18:12:44 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 39DF26E81E
 for <intel-gfx@lists.freedesktop.org>; Tue,  7 May 2019 18:12:43 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 07 May 2019 11:12:42 -0700
X-ExtLoop1: 1
Received: from dceraolo-linux.fm.intel.com (HELO [10.1.27.145]) ([10.1.27.145])
 by fmsmga007.fm.intel.com with ESMTP; 07 May 2019 11:12:42 -0700
To: Stuart Summers <stuart.summers@intel.com>, intel-gfx@lists.freedesktop.org
References: <20190503213020.25628-1-stuart.summers@intel.com>
 <20190503213020.25628-5-stuart.summers@intel.com>
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Message-ID: <acd7780b-455b-2397-7c9f-8180d41ee5c1@intel.com>
Date: Tue, 7 May 2019 11:12:57 -0700
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.4.0
MIME-Version: 1.0
In-Reply-To: <20190503213020.25628-5-stuart.summers@intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 4/5] drm/i915: Refactor sseu helper functions
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

CgpPbiA1LzMvMTkgMjozMCBQTSwgU3R1YXJ0IFN1bW1lcnMgd3JvdGU6Cj4gTW92ZSBmdW5jdGlv
bnMgdG8gaW50ZWxfc3NldS5oIGFuZCByZW1vdmUgaW5saW5lIHF1YWxpZmllci4KPiBBZGRpdGlv
bmFsbHksIGVuc3VyZSB0aGVzZSBhcmUgYWxsIHByZWZpeGVkIHdpdGggaW50ZWxfc3NldV8qCj4g
dG8gbWF0Y2ggdGhlIGNvbnZlbnRpb24gb2Ygb3RoZXIgZnVuY3Rpb25zIGluIGk5MTUuCj4gCj4g
djI6IGZpeCBzcGFjaW5nIGZyb20gY2hlY2twYXRjaCB3YXJuaW5nCj4gdjM6IHNxdWFzaCBoZWxw
ZXIgZnVuY3Rpb24gY2hhbmdlcyBpbnRvIGEgc2luZ2xlIHBhdGNoCj4gICAgICBicmVhayA4MCBj
aGFyYWN0ZXIgbGluZSB0byBmaXggY2hlY2twYXRjaCB3YXJuaW5nCj4gICAgICBtb3ZlIGdldC9z
ZXRfZXVzIGhlbHBlcnMgdG8gaW50ZWxfZGV2aWNlX2luZm8uYwo+IAo+IEFja2VkLWJ5OiBKYW5p
IE5pa3VsYSA8amFuaS5uaWt1bGFAaW50ZWwuY29tPgo+IENjOiBEYW5pZWxlIENlcmFvbG8gU3B1
cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29tPgo+IFNpZ25lZC1vZmYtYnk6IFN0
dWFydCBTdW1tZXJzIDxzdHVhcnQuc3VtbWVyc0BpbnRlbC5jb20+Cj4gLS0tCj4gICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmMgICAgIHwgIDE3ICsrKysKPiAgIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuaCAgICAgfCAgMTAgKy0tCj4gICBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyAgICAgIHwgICA0ICstCj4gICBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5jICAgICAgICAgIHwgICAyICstCj4gICBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jIHwgMTAzICsrKysrKysrKysrKysrKystLS0tLS0tCj4g
ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5oIHwgIDQ0IC0tLS0tLS0t
LS0KPiAgIDYgZmlsZXMgY2hhbmdlZCwgOTcgaW5zZXJ0aW9ucygrKSwgODMgZGVsZXRpb25zKC0p
Cj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuYwo+IGluZGV4IDdmNDQ4ZjNiZWEw
Yi4uYTA3NTZmMDA2ZjVmIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX3NzZXUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuYwo+
IEBAIC04LDYgKzgsMjMgQEAKPiAgICNpbmNsdWRlICJpbnRlbF9scmNfcmVnLmgiCj4gICAjaW5j
bHVkZSAiaW50ZWxfc3NldS5oIgo+ICAgCj4gK3Vuc2lnbmVkIGludAo+ICtpbnRlbF9zc2V1X3N1
YnNsaWNlX3RvdGFsKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1KQo+ICt7Cj4gKwl1
bnNpZ25lZCBpbnQgaSwgdG90YWwgPSAwOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9T
SVpFKHNzZXUtPnN1YnNsaWNlX21hc2spOyBpKyspCj4gKwkJdG90YWwgKz0gaHdlaWdodDgoc3Nl
dS0+c3Vic2xpY2VfbWFza1tpXSk7Cj4gKwo+ICsJcmV0dXJuIHRvdGFsOwo+ICt9Cj4gKwo+ICt1
bnNpZ25lZCBpbnQKPiAraW50ZWxfc3NldV9zdWJzbGljZXNfcGVyX3NsaWNlKGNvbnN0IHN0cnVj
dCBzc2V1X2Rldl9pbmZvICpzc2V1LCB1OCBzbGljZSkKPiArewo+ICsJcmV0dXJuIGh3ZWlnaHQ4
KHNzZXUtPnN1YnNsaWNlX21hc2tbc2xpY2VdKTsKPiArfQo+ICsKPiAgIHUzMiBpbnRlbF9zc2V1
X21ha2VfcnBjcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKPiAgIAkJCSBjb25zdCBz
dHJ1Y3QgaW50ZWxfc3NldSAqcmVxX3NzZXUpCj4gICB7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX3NzZXUuaAo+IGluZGV4IDk2MThkZmY0NmQ4My4uYjUwZDA0MDFhNGUyIDEwMDY0NAo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuaAo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuaAo+IEBAIC02MywxMSArNjMsMTEgQEAgaW50ZWxf
c3NldV9mcm9tX2RldmljZV9pbmZvKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1KQo+
ICAgCXJldHVybiB2YWx1ZTsKPiAgIH0KPiAgIAo+IC1zdGF0aWMgaW5saW5lIHVuc2lnbmVkIGlu
dAo+IC1pbnRlbF9zc2V1X3N1YnNsaWNlc19wZXJfc2xpY2UoY29uc3Qgc3RydWN0IHNzZXVfZGV2
X2luZm8gKnNzZXUsIHU4IHNsaWNlKQo+IC17Cj4gLQlyZXR1cm4gaHdlaWdodDgoc3NldS0+c3Vi
c2xpY2VfbWFza1tzbGljZV0pOwo+IC19Cj4gK3Vuc2lnbmVkIGludAo+ICtpbnRlbF9zc2V1X3N1
YnNsaWNlX3RvdGFsKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1KTsKPiArCj4gK3Vu
c2lnbmVkIGludAo+ICtpbnRlbF9zc2V1X3N1YnNsaWNlc19wZXJfc2xpY2UoY29uc3Qgc3RydWN0
IHNzZXVfZGV2X2luZm8gKnNzZXUsIHU4IHNsaWNlKTsKPiAgIAo+ICAgdTMyIGludGVsX3NzZXVf
bWFrZV9ycGNzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAo+ICAgCQkJIGNvbnN0IHN0
cnVjdCBpbnRlbF9zc2V1ICpyZXFfc3NldSk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZGVidWdmcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2Zz
LmMKPiBpbmRleCBkY2ViMzJhMTZjNWMuLmZjZTNjY2Q4N2Y3NiAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZGVidWdmcy5jCj4gQEAgLTQxNjAsNyArNDE2MCw3IEBAIHN0YXRpYyB2b2lkIGJy
b2Fkd2VsbF9zc2V1X2RldmljZV9zdGF0dXMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LAo+ICAgCQkJCVJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnNzZXUuc3Vic2xpY2VfbWFza1tz
XTsKPiAgIAkJfQo+ICAgCQlzc2V1LT5ldV90b3RhbCA9IHNzZXUtPmV1X3Blcl9zdWJzbGljZSAq
Cj4gLQkJCQkgc3NldV9zdWJzbGljZV90b3RhbChzc2V1KTsKPiArCQkJCSBpbnRlbF9zc2V1X3N1
YnNsaWNlX3RvdGFsKHNzZXUpOwo+ICAgCj4gICAJCS8qIHN1YnRyYWN0IGZ1c2VkIG9mZiBFVShz
KSBmcm9tIGVuYWJsZWQgc2xpY2UocykgKi8KPiAgIAkJZm9yIChzID0gMDsgcyA8IGZscyhzc2V1
LT5zbGljZV9tYXNrKTsgcysrKSB7Cj4gQEAgLTQxODQsNyArNDE4NCw3IEBAIHN0YXRpYyB2b2lk
IGk5MTVfcHJpbnRfc3NldV9pbmZvKHN0cnVjdCBzZXFfZmlsZSAqbSwgYm9vbCBpc19hdmFpbGFi
bGVfaW5mbywKPiAgIAlzZXFfcHJpbnRmKG0sICIgICVzIFNsaWNlIFRvdGFsOiAldVxuIiwgdHlw
ZSwKPiAgIAkJICAgaHdlaWdodDgoc3NldS0+c2xpY2VfbWFzaykpOwo+ICAgCXNlcV9wcmludGYo
bSwgIiAgJXMgU3Vic2xpY2UgVG90YWw6ICV1XG4iLCB0eXBlLAo+IC0JCSAgIHNzZXVfc3Vic2xp
Y2VfdG90YWwoc3NldSkpOwo+ICsJCSAgIGludGVsX3NzZXVfc3Vic2xpY2VfdG90YWwoc3NldSkp
Owo+ICAgCWZvciAocyA9IDA7IHMgPCBmbHMoc3NldS0+c2xpY2VfbWFzayk7IHMrKykgewo+ICAg
CQlzZXFfcHJpbnRmKG0sICIgICVzIFNsaWNlJWkgc3Vic2xpY2VzOiAldVxuIiwgdHlwZSwKPiAg
IAkJCSAgIHMsIGludGVsX3NzZXVfc3Vic2xpY2VzX3Blcl9zbGljZShzc2V1LCBzKSk7Cj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5jCj4gaW5kZXggZGNjODcyZjljNjc2Li5jMmVhM2YwOTkyYjIgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKPiBAQCAtMzgyLDcgKzM4Miw3IEBAIHN0YXRpYyBp
bnQgaTkxNV9nZXRwYXJhbV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRh
LAo+ICAgCQl2YWx1ZSA9IGk5MTVfY21kX3BhcnNlcl9nZXRfdmVyc2lvbihkZXZfcHJpdik7Cj4g
ICAJCWJyZWFrOwo+ICAgCWNhc2UgSTkxNV9QQVJBTV9TVUJTTElDRV9UT1RBTDoKPiAtCQl2YWx1
ZSA9IHNzZXVfc3Vic2xpY2VfdG90YWwoc3NldSk7Cj4gKwkJdmFsdWUgPSBpbnRlbF9zc2V1X3N1
YnNsaWNlX3RvdGFsKHNzZXUpOwo+ICAgCQlpZiAoIXZhbHVlKQo+ICAgCQkJcmV0dXJuIC1FTk9E
RVY7Cj4gICAJCWJyZWFrOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF9kZXZpY2VfaW5mby5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8u
Ywo+IGluZGV4IDlkNmI5YzQ1YmM1ZS4uNjg5NzAyYjI4ZTgwIDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jCj4gQEAgLTkwLDcgKzkwLDcgQEAgc3RhdGljIHZv
aWQgc3NldV9kdW1wKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1LCBzdHJ1Y3QgZHJt
X3ByaW50ZXIgKnApCj4gICAKPiAgIAlkcm1fcHJpbnRmKHAsICJzbGljZSB0b3RhbDogJXUsIG1h
c2s9JTA0eFxuIiwKPiAgIAkJICAgaHdlaWdodDgoc3NldS0+c2xpY2VfbWFzayksIHNzZXUtPnNs
aWNlX21hc2spOwo+IC0JZHJtX3ByaW50ZihwLCAic3Vic2xpY2UgdG90YWw6ICV1XG4iLCBzc2V1
X3N1YnNsaWNlX3RvdGFsKHNzZXUpKTsKPiArCWRybV9wcmludGYocCwgInN1YnNsaWNlIHRvdGFs
OiAldVxuIiwgaW50ZWxfc3NldV9zdWJzbGljZV90b3RhbChzc2V1KSk7Cj4gICAJZm9yIChzID0g
MDsgcyA8IHNzZXUtPm1heF9zbGljZXM7IHMrKykgewo+ICAgCQlkcm1fcHJpbnRmKHAsICJzbGlj
ZSVkOiAldSBzdWJzbGljZXMsIG1hc2s9JTA0eFxuIiwKPiAgIAkJCSAgIHMsIGludGVsX3NzZXVf
c3Vic2xpY2VzX3Blcl9zbGljZShzc2V1LCBzKSwKPiBAQCAtMTE0LDYgKzExNCw0MyBAQCB2b2lk
IGludGVsX2RldmljZV9pbmZvX2R1bXBfcnVudGltZShjb25zdCBzdHJ1Y3QgaW50ZWxfcnVudGlt
ZV9pbmZvICppbmZvLAo+ICAgCQkgICBpbmZvLT5jc190aW1lc3RhbXBfZnJlcXVlbmN5X2toeik7
Cj4gICB9Cj4gICAKPiArc3RhdGljIGludCBpbnRlbF9zc2V1X2V1X2lkeChjb25zdCBzdHJ1Y3Qg
c3NldV9kZXZfaW5mbyAqc3NldSwgaW50IHNsaWNlLAoKTm8gbmVlZCBmb3IgaW50ZWxfIHByZWZp
eCBmb3IgdGhlc2UgZnVuY3Rpb25zIGlmIHRoZXkncmUgc3RhdGljICh3aGljaCAKYWxzbyBoZWxw
cyByZWR1Y2luZyB0aGUgZGlmZikuCgo+ICsJCQkgICAgIGludCBzdWJzbGljZSkKPiArewo+ICsJ
aW50IHN1YnNsaWNlX3N0cmlkZSA9IERJVl9ST1VORF9VUChzc2V1LT5tYXhfZXVzX3Blcl9zdWJz
bGljZSwKPiArCQkJCQkgICBCSVRTX1BFUl9CWVRFKTsKClRoaXMgd2FzIEdFTl9TU0VVX1NUUklE
RSBpbiB0aGUgZGVsZXRlZCBjb2RlIChvdGhlciBvY2N1cnJlbmNlcyBiZWxvdyBhcyAKd2VsbCku
CgpXaXRoIHRoZXNlIGFkZHJlc3NlZDoKClJldmlld2VkLWJ5OiBEYW5pZWxlIENlcmFvbG8gU3B1
cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29tPgoKRGFuaWVsZQoKPiArCWludCBz
bGljZV9zdHJpZGUgPSBzc2V1LT5tYXhfc3Vic2xpY2VzICogc3Vic2xpY2Vfc3RyaWRlOwo+ICsK
PiArCXJldHVybiBzbGljZSAqIHNsaWNlX3N0cmlkZSArIHN1YnNsaWNlICogc3Vic2xpY2Vfc3Ry
aWRlOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdTE2IGludGVsX3NzZXVfZ2V0X2V1cyhjb25zdCBzdHJ1
Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSwgaW50IHNsaWNlLAo+ICsJCQkgICAgICBpbnQgc3Vic2xp
Y2UpCj4gK3sKPiArCWludCBpLCBvZmZzZXQgPSBpbnRlbF9zc2V1X2V1X2lkeChzc2V1LCBzbGlj
ZSwgc3Vic2xpY2UpOwo+ICsJdTE2IGV1X21hc2sgPSAwOwo+ICsKPiArCWZvciAoaSA9IDA7Cj4g
KwkgICAgIGkgPCBESVZfUk9VTkRfVVAoc3NldS0+bWF4X2V1c19wZXJfc3Vic2xpY2UsIEJJVFNf
UEVSX0JZVEUpOyBpKyspIHsKPiArCQlldV9tYXNrIHw9ICgodTE2KXNzZXUtPmV1X21hc2tbb2Zm
c2V0ICsgaV0pIDw8Cj4gKwkJCShpICogQklUU19QRVJfQllURSk7Cj4gKwl9Cj4gKwo+ICsJcmV0
dXJuIGV1X21hc2s7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGludGVsX3NzZXVfc2V0X2V1cyhz
dHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSwgaW50IHNsaWNlLAo+ICsJCQkgICAgICAgaW50IHN1
YnNsaWNlLCB1MTYgZXVfbWFzaykKPiArewo+ICsJaW50IGksIG9mZnNldCA9IGludGVsX3NzZXVf
ZXVfaWR4KHNzZXUsIHNsaWNlLCBzdWJzbGljZSk7Cj4gKwo+ICsJZm9yIChpID0gMDsKPiArCSAg
ICAgaSA8IERJVl9ST1VORF9VUChzc2V1LT5tYXhfZXVzX3Blcl9zdWJzbGljZSwgQklUU19QRVJf
QllURSk7IGkrKykgewo+ICsJCXNzZXUtPmV1X21hc2tbb2Zmc2V0ICsgaV0gPQo+ICsJCQkoZXVf
bWFzayA+PiAoQklUU19QRVJfQllURSAqIGkpKSAmIDB4ZmY7Cj4gKwl9Cj4gK30KPiArCj4gICB2
b2lkIGludGVsX2RldmljZV9pbmZvX2R1bXBfdG9wb2xvZ3koY29uc3Qgc3RydWN0IHNzZXVfZGV2
X2luZm8gKnNzZXUsCj4gICAJCQkJICAgICBzdHJ1Y3QgZHJtX3ByaW50ZXIgKnApCj4gICB7Cj4g
QEAgLTEzMCw3ICsxNjcsNyBAQCB2b2lkIGludGVsX2RldmljZV9pbmZvX2R1bXBfdG9wb2xvZ3ko
Y29uc3Qgc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUsCj4gICAJCQkgICBzc2V1LT5zdWJzbGlj
ZV9tYXNrW3NdKTsKPiAgIAo+ICAgCQlmb3IgKHNzID0gMDsgc3MgPCBzc2V1LT5tYXhfc3Vic2xp
Y2VzOyBzcysrKSB7Cj4gLQkJCXUxNiBlbmFibGVkX2V1cyA9IHNzZXVfZ2V0X2V1cyhzc2V1LCBz
LCBzcyk7Cj4gKwkJCXUxNiBlbmFibGVkX2V1cyA9IGludGVsX3NzZXVfZ2V0X2V1cyhzc2V1LCBz
LCBzcyk7Cj4gICAKPiAgIAkJCWRybV9wcmludGYocCwgIlx0c3Vic2xpY2UlZDogJXUgRVVzICgw
eCVoeClcbiIsCj4gICAJCQkJICAgc3MsIGh3ZWlnaHQxNihlbmFibGVkX2V1cyksIGVuYWJsZWRf
ZXVzKTsKPiBAQCAtMTgwLDcgKzIxNyw3IEBAIHN0YXRpYyB2b2lkIGdlbjExX3NzZXVfaW5mb19p
bml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgIAkJCXNzZXUtPnN1YnNs
aWNlX21hc2tbc10gPSAoc3NfZW4gPj4gc3NfaWR4KSAmIHNzX2VuX21hc2s7Cj4gICAJCQlmb3Ig
KHNzID0gMDsgc3MgPCBzc2V1LT5tYXhfc3Vic2xpY2VzOyBzcysrKSB7Cj4gICAJCQkJaWYgKHNz
ZXUtPnN1YnNsaWNlX21hc2tbc10gJiBCSVQoc3MpKQo+IC0JCQkJCXNzZXVfc2V0X2V1cyhzc2V1
LCBzLCBzcywgZXVfZW4pOwo+ICsJCQkJCWludGVsX3NzZXVfc2V0X2V1cyhzc2V1LCBzLCBzcywg
ZXVfZW4pOwo+ICAgCQkJfQo+ICAgCQl9Cj4gICAJfQo+IEBAIC0yMjIsMzIgKzI1OSwzMiBAQCBz
dGF0aWMgdm9pZCBnZW4xMF9zc2V1X2luZm9faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpCj4gICAJLyogU2xpY2UwICovCj4gICAJZXVfZW4gPSB+STkxNV9SRUFEKEdFTjhf
RVVfRElTQUJMRTApOwo+ICAgCWZvciAoc3MgPSAwOyBzcyA8IHNzZXUtPm1heF9zdWJzbGljZXM7
IHNzKyspCj4gLQkJc3NldV9zZXRfZXVzKHNzZXUsIDAsIHNzLCAoZXVfZW4gPj4gKDggKiBzcykp
ICYgZXVfbWFzayk7Cj4gKwkJaW50ZWxfc3NldV9zZXRfZXVzKHNzZXUsIDAsIHNzLCAoZXVfZW4g
Pj4gKDggKiBzcykpICYgZXVfbWFzayk7Cj4gICAJLyogU2xpY2UxICovCj4gLQlzc2V1X3NldF9l
dXMoc3NldSwgMSwgMCwgKGV1X2VuID4+IDI0KSAmIGV1X21hc2spOwo+ICsJaW50ZWxfc3NldV9z
ZXRfZXVzKHNzZXUsIDEsIDAsIChldV9lbiA+PiAyNCkgJiBldV9tYXNrKTsKPiAgIAlldV9lbiA9
IH5JOTE1X1JFQUQoR0VOOF9FVV9ESVNBQkxFMSk7Cj4gLQlzc2V1X3NldF9ldXMoc3NldSwgMSwg
MSwgZXVfZW4gJiBldV9tYXNrKTsKPiArCWludGVsX3NzZXVfc2V0X2V1cyhzc2V1LCAxLCAxLCBl
dV9lbiAmIGV1X21hc2spOwo+ICAgCS8qIFNsaWNlMiAqLwo+IC0Jc3NldV9zZXRfZXVzKHNzZXUs
IDIsIDAsIChldV9lbiA+PiA4KSAmIGV1X21hc2spOwo+IC0Jc3NldV9zZXRfZXVzKHNzZXUsIDIs
IDEsIChldV9lbiA+PiAxNikgJiBldV9tYXNrKTsKPiArCWludGVsX3NzZXVfc2V0X2V1cyhzc2V1
LCAyLCAwLCAoZXVfZW4gPj4gOCkgJiBldV9tYXNrKTsKPiArCWludGVsX3NzZXVfc2V0X2V1cyhz
c2V1LCAyLCAxLCAoZXVfZW4gPj4gMTYpICYgZXVfbWFzayk7Cj4gICAJLyogU2xpY2UzICovCj4g
LQlzc2V1X3NldF9ldXMoc3NldSwgMywgMCwgKGV1X2VuID4+IDI0KSAmIGV1X21hc2spOwo+ICsJ
aW50ZWxfc3NldV9zZXRfZXVzKHNzZXUsIDMsIDAsIChldV9lbiA+PiAyNCkgJiBldV9tYXNrKTsK
PiAgIAlldV9lbiA9IH5JOTE1X1JFQUQoR0VOOF9FVV9ESVNBQkxFMik7Cj4gLQlzc2V1X3NldF9l
dXMoc3NldSwgMywgMSwgZXVfZW4gJiBldV9tYXNrKTsKPiArCWludGVsX3NzZXVfc2V0X2V1cyhz
c2V1LCAzLCAxLCBldV9lbiAmIGV1X21hc2spOwo+ICAgCS8qIFNsaWNlNCAqLwo+IC0Jc3NldV9z
ZXRfZXVzKHNzZXUsIDQsIDAsIChldV9lbiA+PiA4KSAmIGV1X21hc2spOwo+IC0Jc3NldV9zZXRf
ZXVzKHNzZXUsIDQsIDEsIChldV9lbiA+PiAxNikgJiBldV9tYXNrKTsKPiArCWludGVsX3NzZXVf
c2V0X2V1cyhzc2V1LCA0LCAwLCAoZXVfZW4gPj4gOCkgJiBldV9tYXNrKTsKPiArCWludGVsX3Nz
ZXVfc2V0X2V1cyhzc2V1LCA0LCAxLCAoZXVfZW4gPj4gMTYpICYgZXVfbWFzayk7Cj4gICAJLyog
U2xpY2U1ICovCj4gLQlzc2V1X3NldF9ldXMoc3NldSwgNSwgMCwgKGV1X2VuID4+IDI0KSAmIGV1
X21hc2spOwo+ICsJaW50ZWxfc3NldV9zZXRfZXVzKHNzZXUsIDUsIDAsIChldV9lbiA+PiAyNCkg
JiBldV9tYXNrKTsKPiAgIAlldV9lbiA9IH5JOTE1X1JFQUQoR0VOMTBfRVVfRElTQUJMRTMpOwo+
IC0Jc3NldV9zZXRfZXVzKHNzZXUsIDUsIDEsIGV1X2VuICYgZXVfbWFzayk7Cj4gKwlpbnRlbF9z
c2V1X3NldF9ldXMoc3NldSwgNSwgMSwgZXVfZW4gJiBldV9tYXNrKTsKPiAgIAo+ICAgCS8qIERv
IGEgc2Vjb25kIHBhc3Mgd2hlcmUgd2UgbWFyayB0aGUgc3Vic2xpY2VzIGRpc2FibGVkIGlmIGFs
bCB0aGVpcgo+ICAgCSAqIGV1cyBhcmUgb2ZmLgo+ICAgCSAqLwo+ICAgCWZvciAocyA9IDA7IHMg
PCBzc2V1LT5tYXhfc2xpY2VzOyBzKyspIHsKPiAgIAkJZm9yIChzcyA9IDA7IHNzIDwgc3NldS0+
bWF4X3N1YnNsaWNlczsgc3MrKykgewo+IC0JCQlpZiAoc3NldV9nZXRfZXVzKHNzZXUsIHMsIHNz
KSA9PSAwKQo+ICsJCQlpZiAoaW50ZWxfc3NldV9nZXRfZXVzKHNzZXUsIHMsIHNzKSA9PSAwKQo+
ICAgCQkJCXNzZXUtPnN1YnNsaWNlX21hc2tbc10gJj0gfkJJVChzcyk7Cj4gICAJCX0KPiAgIAl9
Cj4gQEAgLTI2MCw5ICsyOTcsMTAgQEAgc3RhdGljIHZvaWQgZ2VuMTBfc3NldV9pbmZvX2luaXQo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+ICAgCSAqIEVVIGluIGFueSBvbmUg
c3Vic2xpY2UgbWF5IGJlIGZ1c2VkIG9mZiBmb3IgZGllCj4gICAJICogcmVjb3ZlcnkuCj4gICAJ
ICovCj4gLQlzc2V1LT5ldV9wZXJfc3Vic2xpY2UgPSBzc2V1X3N1YnNsaWNlX3RvdGFsKHNzZXUp
ID8KPiArCXNzZXUtPmV1X3Blcl9zdWJzbGljZSA9IGludGVsX3NzZXVfc3Vic2xpY2VfdG90YWwo
c3NldSkgPwo+ICAgCQkJCURJVl9ST1VORF9VUChzc2V1LT5ldV90b3RhbCwKPiAtCQkJCQkgICAg
IHNzZXVfc3Vic2xpY2VfdG90YWwoc3NldSkpIDogMDsKPiArCQkJCQkgICAgIGludGVsX3NzZXVf
c3Vic2xpY2VfdG90YWwoc3NldSkpIDoKPiArCQkJCTA7Cj4gICAKPiAgIAkvKiBObyByZXN0cmlj
dGlvbnMgb24gUG93ZXIgR2F0aW5nICovCj4gICAJc3NldS0+aGFzX3NsaWNlX3BnID0gMTsKPiBA
QCAtMjkwLDcgKzMyOCw3IEBAIHN0YXRpYyB2b2lkIGNoZXJyeXZpZXdfc3NldV9pbmZvX2luaXQo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+ICAgCQkJICBDSFZfRkdUX0VVX0RJ
U19TUzBfUjFfU0hJRlQpIDw8IDQpOwo+ICAgCj4gICAJCXNzZXUtPnN1YnNsaWNlX21hc2tbMF0g
fD0gQklUKDApOwo+IC0JCXNzZXVfc2V0X2V1cyhzc2V1LCAwLCAwLCB+ZGlzYWJsZWRfbWFzayk7
Cj4gKwkJaW50ZWxfc3NldV9zZXRfZXVzKHNzZXUsIDAsIDAsIH5kaXNhYmxlZF9tYXNrKTsKPiAg
IAl9Cj4gICAKPiAgIAlpZiAoIShmdXNlICYgQ0hWX0ZHVF9ESVNBQkxFX1NTMSkpIHsKPiBAQCAt
MzAxLDcgKzMzOSw3IEBAIHN0YXRpYyB2b2lkIGNoZXJyeXZpZXdfc3NldV9pbmZvX2luaXQoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+ICAgCQkJICBDSFZfRkdUX0VVX0RJU19T
UzFfUjFfU0hJRlQpIDw8IDQpOwo+ICAgCj4gICAJCXNzZXUtPnN1YnNsaWNlX21hc2tbMF0gfD0g
QklUKDEpOwo+IC0JCXNzZXVfc2V0X2V1cyhzc2V1LCAwLCAxLCB+ZGlzYWJsZWRfbWFzayk7Cj4g
KwkJaW50ZWxfc3NldV9zZXRfZXVzKHNzZXUsIDAsIDEsIH5kaXNhYmxlZF9tYXNrKTsKPiAgIAl9
Cj4gICAKPiAgIAlzc2V1LT5ldV90b3RhbCA9IGNvbXB1dGVfZXVfdG90YWwoc3NldSk7Cj4gQEAg
LTMxMCw4ICszNDgsOSBAQCBzdGF0aWMgdm9pZCBjaGVycnl2aWV3X3NzZXVfaW5mb19pbml0KHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgIAkgKiBDSFYgZXhwZWN0ZWQgdG8g
YWx3YXlzIGhhdmUgYSB1bmlmb3JtIGRpc3RyaWJ1dGlvbiBvZiBFVQo+ICAgCSAqIGFjcm9zcyBz
dWJzbGljZXMuCj4gICAJKi8KPiAtCXNzZXUtPmV1X3Blcl9zdWJzbGljZSA9IHNzZXVfc3Vic2xp
Y2VfdG90YWwoc3NldSkgPwo+IC0JCQkJc3NldS0+ZXVfdG90YWwgLyBzc2V1X3N1YnNsaWNlX3Rv
dGFsKHNzZXUpIDoKPiArCXNzZXUtPmV1X3Blcl9zdWJzbGljZSA9IGludGVsX3NzZXVfc3Vic2xp
Y2VfdG90YWwoc3NldSkgPwo+ICsJCQkJc3NldS0+ZXVfdG90YWwgLwo+ICsJCQkJCWludGVsX3Nz
ZXVfc3Vic2xpY2VfdG90YWwoc3NldSkgOgo+ICAgCQkJCTA7Cj4gICAJLyoKPiAgIAkgKiBDSFYg
c3VwcG9ydHMgc3Vic2xpY2UgcG93ZXIgZ2F0aW5nIG9uIGRldmljZXMgd2l0aCBtb3JlIHRoYW4K
PiBAQCAtMzE5LDcgKzM1OCw3IEBAIHN0YXRpYyB2b2lkIGNoZXJyeXZpZXdfc3NldV9pbmZvX2lu
aXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+ICAgCSAqIG1vcmUgdGhhbiBv
bmUgRVUgcGFpciBwZXIgc3Vic2xpY2UuCj4gICAJKi8KPiAgIAlzc2V1LT5oYXNfc2xpY2VfcGcg
PSAwOwo+IC0Jc3NldS0+aGFzX3N1YnNsaWNlX3BnID0gc3NldV9zdWJzbGljZV90b3RhbChzc2V1
KSA+IDE7Cj4gKwlzc2V1LT5oYXNfc3Vic2xpY2VfcGcgPSBpbnRlbF9zc2V1X3N1YnNsaWNlX3Rv
dGFsKHNzZXUpID4gMTsKPiAgIAlzc2V1LT5oYXNfZXVfcGcgPSAoc3NldS0+ZXVfcGVyX3N1YnNs
aWNlID4gMik7Cj4gICB9Cj4gICAKPiBAQCAtMzY5LDcgKzQwOCw3IEBAIHN0YXRpYyB2b2lkIGdl
bjlfc3NldV9pbmZvX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+ICAg
Cj4gICAJCQlldV9kaXNhYmxlZF9tYXNrID0gKGV1X2Rpc2FibGUgPj4gKHNzICogOCkpICYgZXVf
bWFzazsKPiAgIAo+IC0JCQlzc2V1X3NldF9ldXMoc3NldSwgcywgc3MsIH5ldV9kaXNhYmxlZF9t
YXNrKTsKPiArCQkJaW50ZWxfc3NldV9zZXRfZXVzKHNzZXUsIHMsIHNzLCB+ZXVfZGlzYWJsZWRf
bWFzayk7Cj4gICAKPiAgIAkJCWV1X3Blcl9zcyA9IHNzZXUtPm1heF9ldXNfcGVyX3N1YnNsaWNl
IC0KPiAgIAkJCQlod2VpZ2h0OChldV9kaXNhYmxlZF9tYXNrKTsKPiBAQCAtMzkzLDkgKzQzMiwx
MCBAQCBzdGF0aWMgdm9pZCBnZW45X3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikKPiAgIAkgKiByZWNvdmVyeS4gQlhUIGlzIGV4cGVjdGVkIHRvIGJlIHBl
cmZlY3RseSB1bmlmb3JtIGluIEVVCj4gICAJICogZGlzdHJpYnV0aW9uLgo+ICAgCSovCj4gLQlz
c2V1LT5ldV9wZXJfc3Vic2xpY2UgPSBzc2V1X3N1YnNsaWNlX3RvdGFsKHNzZXUpID8KPiArCXNz
ZXUtPmV1X3Blcl9zdWJzbGljZSA9IGludGVsX3NzZXVfc3Vic2xpY2VfdG90YWwoc3NldSkgPwo+
ICAgCQkJCURJVl9ST1VORF9VUChzc2V1LT5ldV90b3RhbCwKPiAtCQkJCQkgICAgIHNzZXVfc3Vi
c2xpY2VfdG90YWwoc3NldSkpIDogMDsKPiArCQkJCQkgICAgIGludGVsX3NzZXVfc3Vic2xpY2Vf
dG90YWwoc3NldSkpIDoKPiArCQkJCTA7Cj4gICAJLyoKPiAgIAkgKiBTS0wrIHN1cHBvcnRzIHNs
aWNlIHBvd2VyIGdhdGluZyBvbiBkZXZpY2VzIHdpdGggbW9yZSB0aGFuCj4gICAJICogb25lIHNs
aWNlLCBhbmQgc3VwcG9ydHMgRVUgcG93ZXIgZ2F0aW5nIG9uIGRldmljZXMgd2l0aAo+IEBAIC00
MDcsNyArNDQ3LDcgQEAgc3RhdGljIHZvaWQgZ2VuOV9zc2V1X2luZm9faW5pdChzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCj4gICAJc3NldS0+aGFzX3NsaWNlX3BnID0KPiAgIAkJ
IUlTX0dFTjlfTFAoZGV2X3ByaXYpICYmIGh3ZWlnaHQ4KHNzZXUtPnNsaWNlX21hc2spID4gMTsK
PiAgIAlzc2V1LT5oYXNfc3Vic2xpY2VfcGcgPQo+IC0JCUlTX0dFTjlfTFAoZGV2X3ByaXYpICYm
IHNzZXVfc3Vic2xpY2VfdG90YWwoc3NldSkgPiAxOwo+ICsJCUlTX0dFTjlfTFAoZGV2X3ByaXYp
ICYmIGludGVsX3NzZXVfc3Vic2xpY2VfdG90YWwoc3NldSkgPiAxOwo+ICAgCXNzZXUtPmhhc19l
dV9wZyA9IHNzZXUtPmV1X3Blcl9zdWJzbGljZSA+IDI7Cj4gICAKPiAgIAlpZiAoSVNfR0VOOV9M
UChkZXZfcHJpdikpIHsKPiBAQCAtNDc3LDcgKzUxNyw3IEBAIHN0YXRpYyB2b2lkIGJyb2Fkd2Vs
bF9zc2V1X2luZm9faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCj4gICAJ
CQlldV9kaXNhYmxlZF9tYXNrID0KPiAgIAkJCQlldV9kaXNhYmxlW3NdID4+IChzcyAqIHNzZXUt
Pm1heF9ldXNfcGVyX3N1YnNsaWNlKTsKPiAgIAo+IC0JCQlzc2V1X3NldF9ldXMoc3NldSwgcywg
c3MsIH5ldV9kaXNhYmxlZF9tYXNrKTsKPiArCQkJaW50ZWxfc3NldV9zZXRfZXVzKHNzZXUsIHMs
IHNzLCB+ZXVfZGlzYWJsZWRfbWFzayk7Cj4gICAKPiAgIAkJCW5fZGlzYWJsZWQgPSBod2VpZ2h0
OChldV9kaXNhYmxlZF9tYXNrKTsKPiAgIAo+IEBAIC00OTYsOSArNTM2LDEwIEBAIHN0YXRpYyB2
b2lkIGJyb2Fkd2VsbF9zc2V1X2luZm9faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYpCj4gICAJICogc3Vic2xpY2VzIHdpdGggdGhlIGV4Y2VwdGlvbiB0aGF0IGFueSBvbmUg
RVUgaW4gYW55IG9uZSBzdWJzbGljZSBtYXkKPiAgIAkgKiBiZSBmdXNlZCBvZmYgZm9yIGRpZSBy
ZWNvdmVyeS4KPiAgIAkgKi8KPiAtCXNzZXUtPmV1X3Blcl9zdWJzbGljZSA9IHNzZXVfc3Vic2xp
Y2VfdG90YWwoc3NldSkgPwo+ICsJc3NldS0+ZXVfcGVyX3N1YnNsaWNlID0gaW50ZWxfc3NldV9z
dWJzbGljZV90b3RhbChzc2V1KSA/Cj4gICAJCQkJRElWX1JPVU5EX1VQKHNzZXUtPmV1X3RvdGFs
LAo+IC0JCQkJCSAgICAgc3NldV9zdWJzbGljZV90b3RhbChzc2V1KSkgOiAwOwo+ICsJCQkJCSAg
ICAgaW50ZWxfc3NldV9zdWJzbGljZV90b3RhbChzc2V1KSkgOgo+ICsJCQkJMDsKPiAgIAo+ICAg
CS8qCj4gICAJICogQkRXIHN1cHBvcnRzIHNsaWNlIHBvd2VyIGdhdGluZyBvbiBkZXZpY2VzIHdp
dGggbW9yZSB0aGFuCj4gQEAgLTU2MSw4ICs2MDIsOCBAQCBzdGF0aWMgdm9pZCBoYXN3ZWxsX3Nz
ZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgIAo+ICAg
CWZvciAocyA9IDA7IHMgPCBzc2V1LT5tYXhfc2xpY2VzOyBzKyspIHsKPiAgIAkJZm9yIChzcyA9
IDA7IHNzIDwgc3NldS0+bWF4X3N1YnNsaWNlczsgc3MrKykgewo+IC0JCQlzc2V1X3NldF9ldXMo
c3NldSwgcywgc3MsCj4gLQkJCQkgICAgICgxVUwgPDwgc3NldS0+ZXVfcGVyX3N1YnNsaWNlKSAt
IDEpOwo+ICsJCQlpbnRlbF9zc2V1X3NldF9ldXMoc3NldSwgcywgc3MsCj4gKwkJCQkJICAgKDFV
TCA8PCBzc2V1LT5ldV9wZXJfc3Vic2xpY2UpIC0gMSk7Cj4gICAJCX0KPiAgIAl9Cj4gICAKPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uaCBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmgKPiBpbmRleCA5ZDQzZjdlZGZk
NjMuLjY0MTJhOWM3Mjg5OCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF9kZXZpY2VfaW5mby5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNl
X2luZm8uaAo+IEBAIC0yMTgsNTAgKzIxOCw2IEBAIHN0cnVjdCBpbnRlbF9kcml2ZXJfY2FwcyB7
Cj4gICAJYm9vbCBoYXNfbG9naWNhbF9jb250ZXh0czoxOwo+ICAgfTsKPiAgIAo+IC1zdGF0aWMg
aW5saW5lIHVuc2lnbmVkIGludCBzc2V1X3N1YnNsaWNlX3RvdGFsKGNvbnN0IHN0cnVjdCBzc2V1
X2Rldl9pbmZvICpzc2V1KQo+IC17Cj4gLQl1bnNpZ25lZCBpbnQgaSwgdG90YWwgPSAwOwo+IC0K
PiAtCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKHNzZXUtPnN1YnNsaWNlX21hc2spOyBpKysp
Cj4gLQkJdG90YWwgKz0gaHdlaWdodDgoc3NldS0+c3Vic2xpY2VfbWFza1tpXSk7Cj4gLQo+IC0J
cmV0dXJuIHRvdGFsOwo+IC19Cj4gLQo+IC1zdGF0aWMgaW5saW5lIGludCBzc2V1X2V1X2lkeChj
b25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSwKPiAtCQkJICAgICAgaW50IHNsaWNlLCBp
bnQgc3Vic2xpY2UpCj4gLXsKPiAtCWludCBzdWJzbGljZV9zdHJpZGUgPSBHRU5fU1NFVV9TVFJJ
REUoc3NldS0+bWF4X2V1c19wZXJfc3Vic2xpY2UpOwo+IC0JaW50IHNsaWNlX3N0cmlkZSA9IHNz
ZXUtPm1heF9zdWJzbGljZXMgKiBzdWJzbGljZV9zdHJpZGU7Cj4gLQo+IC0JcmV0dXJuIHNsaWNl
ICogc2xpY2Vfc3RyaWRlICsgc3Vic2xpY2UgKiBzdWJzbGljZV9zdHJpZGU7Cj4gLX0KPiAtCj4g
LXN0YXRpYyBpbmxpbmUgdTE2IHNzZXVfZ2V0X2V1cyhjb25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5m
byAqc3NldSwKPiAtCQkJICAgICAgIGludCBzbGljZSwgaW50IHN1YnNsaWNlKQo+IC17Cj4gLQlp
bnQgaSwgb2Zmc2V0ID0gc3NldV9ldV9pZHgoc3NldSwgc2xpY2UsIHN1YnNsaWNlKTsKPiAtCXUx
NiBldV9tYXNrID0gMDsKPiAtCj4gLQlmb3IgKGkgPSAwOyBpIDwgR0VOX1NTRVVfU1RSSURFKHNz
ZXUtPm1heF9ldXNfcGVyX3N1YnNsaWNlKTsgaSsrKSB7Cj4gLQkJZXVfbWFzayB8PSAoKHUxNikg
c3NldS0+ZXVfbWFza1tvZmZzZXQgKyBpXSkgPDwKPiAtCQkJKGkgKiBCSVRTX1BFUl9CWVRFKTsK
PiAtCX0KPiAtCj4gLQlyZXR1cm4gZXVfbWFzazsKPiAtfQo+IC0KPiAtc3RhdGljIGlubGluZSB2
b2lkIHNzZXVfc2V0X2V1cyhzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSwKPiAtCQkJCWludCBz
bGljZSwgaW50IHN1YnNsaWNlLCB1MTYgZXVfbWFzaykKPiAtewo+IC0JaW50IGksIG9mZnNldCA9
IHNzZXVfZXVfaWR4KHNzZXUsIHNsaWNlLCBzdWJzbGljZSk7Cj4gLQo+IC0JZm9yIChpID0gMDsg
aSA8IEdFTl9TU0VVX1NUUklERShzc2V1LT5tYXhfZXVzX3Blcl9zdWJzbGljZSk7IGkrKykgewo+
IC0JCXNzZXUtPmV1X21hc2tbb2Zmc2V0ICsgaV0gPQo+IC0JCQkoZXVfbWFzayA+PiAoQklUU19Q
RVJfQllURSAqIGkpKSAmIDB4ZmY7Cj4gLQl9Cj4gLX0KPiAtCj4gICBjb25zdCBjaGFyICppbnRl
bF9wbGF0Zm9ybV9uYW1lKGVudW0gaW50ZWxfcGxhdGZvcm0gcGxhdGZvcm0pOwo+ICAgCj4gICB2
b2lkIGludGVsX2RldmljZV9pbmZvX3N1YnBsYXRmb3JtX2luaXQoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2KTsKPiAKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
aW50ZWwtZ2Z4

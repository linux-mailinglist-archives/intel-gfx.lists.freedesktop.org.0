Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E7CC8115963
	for <lists+intel-gfx@lfdr.de>; Fri,  6 Dec 2019 23:42:42 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 130E56FA9F;
	Fri,  6 Dec 2019 22:42:41 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
X-Greylist: delayed 2397 seconds by postgrey-1.36 at gabe;
 Fri, 06 Dec 2019 22:42:39 UTC
Received: from 4.mo3.mail-out.ovh.net (4.mo3.mail-out.ovh.net [178.33.46.10])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 902D96FAA5
 for <intel-gfx@lists.freedesktop.org>; Fri,  6 Dec 2019 22:42:39 +0000 (UTC)
Received: from player697.ha.ovh.net (unknown [10.108.54.87])
 by mo3.mail-out.ovh.net (Postfix) with ESMTP id 34292233B65
 for <intel-gfx@lists.freedesktop.org>; Fri,  6 Dec 2019 22:24:29 +0100 (CET)
Received: from etezian.org (81-175-223-118.bb.dnainternet.fi [81.175.223.118])
 (Authenticated sender: andi@etezian.org)
 by player697.ha.ovh.net (Postfix) with ESMTPSA id 0207BD05E966;
 Fri,  6 Dec 2019 21:24:24 +0000 (UTC)
From: Andi Shyti <andi@etezian.org>
To: Intel GFX <intel-gfx@lists.freedesktop.org>
Date: Fri,  6 Dec 2019 23:24:17 +0200
Message-Id: <20191206212417.20178-1-andi@etezian.org>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
X-Ovh-Tracer-Id: 14342838913952957021
X-VR-SPAMSTATE: OK
X-VR-SPAMSCORE: -100
X-VR-SPAMCAUSE: gggruggvucftvghtrhhoucdtuddrgedufedrudekfedgudegfecutefuodetggdotefrodftvfcurfhrohhfihhlvgemucfqggfjqdffgfeufgfipdevjffgvefmvefgnecuuegrihhlohhuthemucehtddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmdenucfjughrpefhvffufffkofgggfestdekredtredttdenucfhrhhomheptehnughiucfuhhihthhiuceorghnughisegvthgviihirghnrdhorhhgqeenucfkpheptddrtddrtddrtddpkedurddujeehrddvvdefrdduudeknecurfgrrhgrmhepmhhouggvpehsmhhtphdqohhuthdphhgvlhhopehplhgrhigvrheileejrdhhrgdrohhvhhdrnhgvthdpihhnvghtpedtrddtrddtrddtpdhmrghilhhfrhhomheprghnughisegvthgviihirghnrdhorhhgpdhrtghpthhtohepihhnthgvlhdqghhfgieslhhishhtshdrfhhrvggvuggvshhkthhophdrohhrghenucevlhhushhtvghrufhiiigvpedt
Subject: [Intel-gfx] [PATCH] drm/i915/gt: Replace I915_WRITE with its uncore
 counterpart
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogQW5kaSBTaHl0aSA8YW5kaS5zaHl0aUBpbnRlbC5jb20+CgpHZXQgcmlkIG9mIHRoZSBs
YXN0IHJlbWFpbmluZyBJOTE1X1dSSVRFcyBhbmQgcmVwbGFjZSB0aGVtIHdpdGgKaW50ZWxfdW5j
b3JlX3dyaXRlKCkuCgpTaWduZWQtb2ZmLWJ5OiBBbmRpIFNoeXRpIDxhbmRpLnNoeXRpQGludGVs
LmNvbT4KLS0tCiAuLi4vZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jpbmdfc3VibWlzc2lvbi5jICAg
fCA0OCArKysrKysrKysrLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgMjUgaW5zZXJ0aW9ucygr
KSwgMjMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfcmluZ19zdWJtaXNzaW9uLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9y
aW5nX3N1Ym1pc3Npb24uYwppbmRleCA5ZjI3Mjg5YjcyNDkuLmY2NjIyMGYzYzBlNiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ19zdWJtaXNzaW9uLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ19zdWJtaXNzaW9uLmMKQEAgLTQ5
NywxNCArNDk3LDEzIEBAIHN0YXRpYyB2b2lkIHNldF9od3N0YW0oc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lLCB1MzIgbWFzaykKIAogc3RhdGljIHZvaWQgc2V0X2h3c19wZ2Eoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCBwaHlzX2FkZHJfdCBwaHlzKQogewotCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGVuZ2luZS0+aTkxNTsKIAl1MzIgYWRkcjsKIAog
CWFkZHIgPSBsb3dlcl8zMl9iaXRzKHBoeXMpOwotCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49
IDQpCisJaWYgKElOVEVMX0dFTihlbmdpbmUtPmk5MTUpID49IDQpCiAJCWFkZHIgfD0gKHBoeXMg
Pj4gMjgpICYgMHhmMDsKIAotCUk5MTVfV1JJVEUoSFdTX1BHQSwgYWRkcik7CisJaW50ZWxfdW5j
b3JlX3dyaXRlKGVuZ2luZS0+dW5jb3JlLCBIV1NfUEdBLCBhZGRyKTsKIH0KIAogc3RhdGljIHN0
cnVjdCBwYWdlICpzdGF0dXNfcGFnZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCkBA
IC01MjMsMTQgKzUyMiwxMyBAQCBzdGF0aWMgdm9pZCByaW5nX3NldHVwX3BoeXNfc3RhdHVzX3Bh
Z2Uoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCiBzdGF0aWMgdm9pZCBzZXRfaHdz
cChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIHUzMiBvZmZzZXQpCiB7Ci0Jc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gZW5naW5lLT5pOTE1OwogCWk5MTVfcmVnX3Qg
aHdzcDsKIAogCS8qCiAJICogVGhlIHJpbmcgc3RhdHVzIHBhZ2UgYWRkcmVzc2VzIGFyZSBubyBs
b25nZXIgbmV4dCB0byB0aGUgcmVzdCBvZgogCSAqIHRoZSByaW5nIHJlZ2lzdGVycyBhcyBvZiBn
ZW43LgogCSAqLwotCWlmIChJU19HRU4oZGV2X3ByaXYsIDcpKSB7CisJaWYgKElTX0dFTihlbmdp
bmUtPmk5MTUsIDcpKSB7CiAJCXN3aXRjaCAoZW5naW5lLT5pZCkgewogCQkvKgogCQkgKiBObyBt
b3JlIHJpbmdzIGV4aXN0IG9uIEdlbjcuIERlZmF1bHQgY2FzZSBpcyBvbmx5IHRvIHNodXQgdXAK
QEAgLTU1MiwxNCArNTUwLDE0IEBAIHN0YXRpYyB2b2lkIHNldF9od3NwKHN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZSwgdTMyIG9mZnNldCkKIAkJCWh3c3AgPSBWRUJPWF9IV1NfUEdBX0dF
Tjc7CiAJCQlicmVhazsKIAkJfQotCX0gZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCA2KSkgewor
CX0gZWxzZSBpZiAoSVNfR0VOKGVuZ2luZS0+aTkxNSwgNikpIHsKIAkJaHdzcCA9IFJJTkdfSFdT
X1BHQV9HRU42KGVuZ2luZS0+bW1pb19iYXNlKTsKIAl9IGVsc2UgewogCQlod3NwID0gUklOR19I
V1NfUEdBKGVuZ2luZS0+bW1pb19iYXNlKTsKIAl9CiAKLQlJOTE1X1dSSVRFKGh3c3AsIG9mZnNl
dCk7Ci0JUE9TVElOR19SRUFEKGh3c3ApOworCWludGVsX3VuY29yZV93cml0ZShlbmdpbmUtPnVu
Y29yZSwgaHdzcCwgb2Zmc2V0KTsKKwlpbnRlbF91bmNvcmVfcG9zdGluZ19yZWFkKGVuZ2luZS0+
dW5jb3JlLCBod3NwKTsKIH0KIAogc3RhdGljIHZvaWQgZmx1c2hfY3NfdGxiKHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSkKQEAgLTg0Myw3ICs4NDEsOCBAQCBzdGF0aWMgdm9pZCByZXNl
dF9maW5pc2goc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCiBzdGF0aWMgaW50IHJj
c19yZXN1bWUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogewotCXN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGVuZ2luZS0+aTkxNTsKKwlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSA9IGVuZ2luZS0+aTkxNTsKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1bmNv
cmUgPSBlbmdpbmUtPnVuY29yZTsKIAogCS8qCiAJICogRGlzYWJsZSBDT05TVEFOVF9CVUZGRVIg
YmVmb3JlIGl0IGlzIGxvYWRlZCBmcm9tIHRoZSBjb250ZXh0CkBAIC04NTUsMTMgKzg1NCwxNCBA
QCBzdGF0aWMgaW50IHJjc19yZXN1bWUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQog
CSAqIHRoZXkgYXJlIGFscmVhZHkgYWNjdXN0b21lZCB0byBmcm9tIGJlZm9yZSBjb250ZXh0cyB3
ZXJlCiAJICogZW5hYmxlZC4KIAkgKi8KLQlpZiAoSVNfR0VOKGRldl9wcml2LCA0KSkKLQkJSTkx
NV9XUklURShFQ09TS1BELAorCWlmIChJU19HRU4oaTkxNSwgNCkpCisJCWludGVsX3VuY29yZV93
cml0ZSh1bmNvcmUsIEVDT1NLUEQsCiAJCQkgICBfTUFTS0VEX0JJVF9FTkFCTEUoRUNPX0NPTlNU
QU5UX0JVRkZFUl9TUl9ESVNBQkxFKSk7CiAKIAkvKiBXYVRpbWVkU2luZ2xlVmVydGV4RGlzcGF0
Y2g6Y2wsYncsY3RnLGVsayxpbGssc25iICovCi0JaWYgKElTX0dFTl9SQU5HRShkZXZfcHJpdiwg
NCwgNikpCi0JCUk5MTVfV1JJVEUoTUlfTU9ERSwgX01BU0tFRF9CSVRfRU5BQkxFKFZTX1RJTUVS
X0RJU1BBVENIKSk7CisJaWYgKElTX0dFTl9SQU5HRShpOTE1LCA0LCA2KSkKKwkJaW50ZWxfdW5j
b3JlX3dyaXRlKHVuY29yZSwgTUlfTU9ERSwKKwkJCQkgICBfTUFTS0VEX0JJVF9FTkFCTEUoVlNf
VElNRVJfRElTUEFUQ0gpKTsKIAogCS8qIFdlIG5lZWQgdG8gZGlzYWJsZSB0aGUgQXN5bmNGbGlw
IHBlcmZvcm1hbmNlIG9wdGltaXNhdGlvbnMgaW4gb3JkZXIKIAkgKiB0byB1c2UgTUlfV0FJVF9G
T1JfRVZFTlQgd2l0aGluIHRoZSBDUy4gSXQgc2hvdWxkIGFscmVhZHkgYmUKQEAgLTg2OSwzMyAr
ODY5LDM1IEBAIHN0YXRpYyBpbnQgcmNzX3Jlc3VtZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUpCiAJICoKIAkgKiBXYURpc2FibGVBc3luY0ZsaXBQZXJmTW9kZTpzbmIsaXZiLGhzdyx2
bHYKIAkgKi8KLQlpZiAoSVNfR0VOX1JBTkdFKGRldl9wcml2LCA2LCA3KSkKLQkJSTkxNV9XUklU
RShNSV9NT0RFLCBfTUFTS0VEX0JJVF9FTkFCTEUoQVNZTkNfRkxJUF9QRVJGX0RJU0FCTEUpKTsK
KwlpZiAoSVNfR0VOX1JBTkdFKGk5MTUsIDYsIDcpKQorCQlpbnRlbF91bmNvcmVfd3JpdGUodW5j
b3JlLCBNSV9NT0RFLAorCQkJCSAgIF9NQVNLRURfQklUX0VOQUJMRShBU1lOQ19GTElQX1BFUkZf
RElTQUJMRSkpOwogCiAJLyogUmVxdWlyZWQgZm9yIHRoZSBoYXJkd2FyZSB0byBwcm9ncmFtIHNj
YW5saW5lIHZhbHVlcyBmb3Igd2FpdGluZyAqLwogCS8qIFdhRW5hYmxlRmx1c2hUbGJJbnZhbGlk
YXRpb25Nb2RlOnNuYiAqLwotCWlmIChJU19HRU4oZGV2X3ByaXYsIDYpKQotCQlJOTE1X1dSSVRF
KEdGWF9NT0RFLAorCWlmIChJU19HRU4oaTkxNSwgNikpCisJCWludGVsX3VuY29yZV93cml0ZSh1
bmNvcmUsIEdGWF9NT0RFLAogCQkJICAgX01BU0tFRF9CSVRfRU5BQkxFKEdGWF9UTEJfSU5WQUxJ
REFURV9FWFBMSUNJVCkpOwogCiAJLyogV2FCQ1NWQ1NUbGJJbnZhbGlkYXRpb25Nb2RlOml2Yix2
bHYsaHN3ICovCi0JaWYgKElTX0dFTihkZXZfcHJpdiwgNykpCi0JCUk5MTVfV1JJVEUoR0ZYX01P
REVfR0VONywKKwlpZiAoSVNfR0VOKGk5MTUsIDcpKQorCQlpbnRlbF91bmNvcmVfd3JpdGUodW5j
b3JlLCBHRlhfTU9ERV9HRU43LAogCQkJICAgX01BU0tFRF9CSVRfRU5BQkxFKEdGWF9UTEJfSU5W
QUxJREFURV9FWFBMSUNJVCkgfAogCQkJICAgX01BU0tFRF9CSVRfRU5BQkxFKEdGWF9SRVBMQVlf
TU9ERSkpOwogCi0JaWYgKElTX0dFTihkZXZfcHJpdiwgNikpIHsKKwlpZiAoSVNfR0VOKGk5MTUs
IDYpKSB7CiAJCS8qIEZyb20gdGhlIFNhbmR5YnJpZGdlIFBSTSwgdm9sdW1lIDEgcGFydCAzLCBw
YWdlIDI0OgogCQkgKiAiSWYgdGhpcyBiaXQgaXMgc2V0LCBTVEN1bml0IHdpbGwgaGF2ZSBMUkEg
YXMgcmVwbGFjZW1lbnQKIAkJICogIHBvbGljeS4gWy4uLl0gVGhpcyBiaXQgbXVzdCBiZSByZXNl
dC4gIExSQSByZXBsYWNlbWVudAogCQkgKiAgcG9saWN5IGlzIG5vdCBzdXBwb3J0ZWQuIgogCQkg
Ki8KLQkJSTkxNV9XUklURShDQUNIRV9NT0RFXzAsCisJCWludGVsX3VuY29yZV93cml0ZSh1bmNv
cmUsIENBQ0hFX01PREVfMCwKIAkJCSAgIF9NQVNLRURfQklUX0RJU0FCTEUoQ00wX1NUQ19FVklD
VF9ESVNBQkxFX0xSQV9TTkIpKTsKIAl9CiAKLQlpZiAoSVNfR0VOX1JBTkdFKGRldl9wcml2LCA2
LCA3KSkKLQkJSTkxNV9XUklURShJTlNUUE0sIF9NQVNLRURfQklUX0VOQUJMRShJTlNUUE1fRk9S
Q0VfT1JERVJJTkcpKTsKKwlpZiAoSVNfR0VOX1JBTkdFKGk5MTUsIDYsIDcpKQorCQlpbnRlbF91
bmNvcmVfd3JpdGUodW5jb3JlLCBJTlNUUE0sCisJCQkJICAgX01BU0tFRF9CSVRfRU5BQkxFKElO
U1RQTV9GT1JDRV9PUkRFUklORykpOwogCiAJcmV0dXJuIHhjc19yZXN1bWUoZW5naW5lKTsKIH0K
LS0gCjIuMjQuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

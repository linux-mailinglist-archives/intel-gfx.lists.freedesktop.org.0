Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 74DE1FB980
	for <lists+intel-gfx@lfdr.de>; Wed, 13 Nov 2019 21:14:40 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E04236EE4A;
	Wed, 13 Nov 2019 20:14:37 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D072B6EE4A;
 Wed, 13 Nov 2019 20:14:35 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19192569-1500050 
 for multiple; Wed, 13 Nov 2019 20:13:56 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 13 Nov 2019 20:13:55 +0000
Message-Id: <20191113201355.17469-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t] igt: Use COND_BBEND for busy spinning on
 gen9
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org, Joonas Lahtinen <joonas.lahtinen@intel.com>,
 Mika Kuoppala <mika.kuoppala@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogSm9uIEJsb29tZmllbGQgPGpvbi5ibG9vbWZpZWxkQGludGVsLmNvbT4KCmdlbjkrIGlu
dHJvZHVjZXMgYSBjbWRwYXJzZXIgZm9yIHRoZSBCTFQgZW5naW5lIHdoaWNoIGNvcGllcyB0aGUK
aW5jb21pbmcgQkIgdG8gYSBrbWQgb3duZWQgYnVmZmVyIGZvciBzdWJtaXNzaW9uICh0byBwcmV2
ZW50IGNoYW5nZXMKYmVpbmcgbWFkZSBhZnRlciB0aGUgYmIgaGFzIGJlZW4gc2FmZWx5IHNjYW5u
ZWQpLiBUaGlzIGJyZWFrcyB0aGUKc3BpbiBmdW5jdGlvbmFsaXR5IGJlY2F1c2UgaXQgcmVsaWVz
IG9uIGNoYW5naW5nIHRoZSBzdWJtaXR0ZWQgc3BpbgpidWZmZXJzIGluIG9yZGVyIHRvIHRlcm1p
bmF0ZSB0aGVtLgoKSW5zdGVhZCwgZm9yIGdlbjkrLCB3ZSBjaGFuZ2UgdGhlIHNlbWFudGljcyBi
eSBpbnRyb2R1Y2luZyBhIENPTkRfQkJfRU5ECmludG8gdGhlIGluZmluaXRlIGxvb3AsIHRvIHdh
aXQgdW50aWwgYSBtZW1vcnkgZmxhZyAoaW4gYW5vdGhlIGJvKSBpcwpjbGVhcmVkLgoKdjI6IENv
cnJlY3Qgbm9wIGxlbmd0aCB0byBhdm9pZCBvdmVyd3JpdGluZyBiYl9lbmQgaW5zdHIgd2hlbiB1
c2luZwogICAgYSBkZXBlbmRlbmN5IGJvIChjb3JrKQp2MzogZml4IGNvbmZsaWN0cyBvbiBpZ3Rf
ZHVtbXlsb2FkIChNaWthKQp2NDogcy9ib29sIHJ1bm5pbmcvdWludDMyX3QgcnVubmluZywgZml4
IHItPmRlbHRhIChNaWthKQp2NTogcmVtb3ZlIG92ZXJ6ZWFsb3VzIGFzc2VydCAoTWlrYSkKdjY6
IHJlYmFzZSBvbiB0b3Agb2YgbGliIGNoYW5nZXMgKE1pa2EpCnY3OiByZXdvcmsgb24gdG9wIG9m
IHB1YmxpYyBpZ3QgbGliIGNoYW5nZXMgKE1pa2EpCnY4OiByZWJhc2UKdjk6IHNpbXBsaWZ5IGJ5
IHVzaW5nIGJiIGVuZCBhcyBjb25kaXRpb25hbCAoQ2hyaXMpCgpTaWduZWQtb2ZmLWJ5OiBKb24g
Qmxvb21maWVsZCA8am9uLmJsb29tZmllbGRAaW50ZWwuY29tPiAodjIpCkNjOiBKb29uYXMgTGFo
dGluZW4gPGpvb25hcy5sYWh0aW5lbkBpbnRlbC5jb20+CkNjOiBSb2RyaWdvIFZpdmkgPHJvZHJp
Z28udml2aUBpbnRlbC5jb20+CkNjOiBNaWthIEt1b3BwYWxhIDxtaWthLmt1b3BwYWxhQGludGVs
LmNvbT4KU2lnbmVkLW9mZi1ieTogTWlrYSBLdW9wcGFsYSA8bWlrYS5rdW9wcGFsYUBsaW51eC5p
bnRlbC5jb20+Ci0tLQogbGliL2k4MzBfcmVnLmggICAgICAgICAgICAgICAgICAgICAgICAgIHwg
IDIgKy0KIGxpYi9pZ3RfZHVtbXlsb2FkLmMgICAgICAgICAgICAgICAgICAgICB8IDI0ICsrKysr
KysrKysrKysrKysrKysrKysrLQogbGliL2ludGVsX3JlZy5oICAgICAgICAgICAgICAgICAgICAg
ICAgIHwgIDMgKysrCiB0ZXN0cy9pOTE1L2dlbV9kb3VibGVfaXJxX2xvb3AuYyAgICAgICAgfCAg
MiAtLQogdGVzdHMvaTkxNS9nZW1fd3JpdGVfcmVhZF9yaW5nX3N3aXRjaC5jIHwgIDIgKy0KIDUg
ZmlsZXMgY2hhbmdlZCwgMjggaW5zZXJ0aW9ucygrKSwgNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9saWIvaTgzMF9yZWcuaCBiL2xpYi9pODMwX3JlZy5oCmluZGV4IGE1NzY5MWM3ZS4uNDEw
MjAyNTY3IDEwMDY0NAotLS0gYS9saWIvaTgzMF9yZWcuaAorKysgYi9saWIvaTgzMF9yZWcuaApA
QCAtNDMsNyArNDMsNyBAQAogLyogYnJvYWR3YXRlciBmbHVzaCBiaXRzICovCiAjZGVmaW5lIEJS
V19NSV9HTE9CQUxfU05BUFNIT1RfUkVTRVQgICAoMSA8PCAzKQogCi0jZGVmaW5lIE1JX0NPTkRf
QkFUQ0hfQlVGRkVSX0VORAkoMHgzNjw8MjMgfCAxKQorI2RlZmluZSBNSV9DT05EX0JBVENIX0JV
RkZFUl9FTkQJKDB4MzYgPDwgMjMpCiAjZGVmaW5lIE1JX0RPX0NPTVBBUkUJCQkoMTw8MjEpCiAK
ICNkZWZpbmUgTUlfQkFUQ0hfQlVGRkVSX0VORAkoMHhBIDw8IDIzKQpkaWZmIC0tZ2l0IGEvbGli
L2lndF9kdW1teWxvYWQuYyBiL2xpYi9pZ3RfZHVtbXlsb2FkLmMKaW5kZXggYjllMjM5ZGIzLi5m
NTg1NTM3NmEgMTAwNjQ0Ci0tLSBhL2xpYi9pZ3RfZHVtbXlsb2FkLmMKKysrIGIvbGliL2lndF9k
dW1teWxvYWQuYwpAQCAtMjA1LDcgKzIwNSwyOSBAQCBlbWl0X3JlY3Vyc2l2ZV9iYXRjaChpZ3Rf
c3Bpbl90ICpzcGluLAogCSAqIHRyb3VibGUuIFNlZSBodHRwczovL2J1Z3MuZnJlZWRlc2t0b3Au
b3JnL3Nob3dfYnVnLmNnaT9pZD0xMDIyNjIKIAkgKi8KIAlpZiAoIShvcHRzLT5mbGFncyAmIElH
VF9TUElOX0ZBU1QpKQotCQljcyArPSAxMDAwOworCQljcyArPSA5NjA7CisKKwkvKgorCSAqIFdo
ZW4gdXNpbmcgYSBjbWRwYXJzZXIsIHRoZSBiYXRjaCBpcyBjb3BpZWQgaW50byBhIHJlYWQgb25s
eSBsb2NhdGlvbgorCSAqIGFuZCB2YWxpZGF0ZWQuIFdlIGFyZSB0aGVuIHVuYWJsZSB0byBhbHRl
ciB0aGUgZXhlY3V0aW5nIGJhdGNoLAorCSAqIGJyZWFraW5nIHRoZSBvbGRlciAqc3Bpbi0+Y29u
ZGl0aW9uID0gTUlfQkJfRU5EIHRlcm1pbmF0aW9uLgorCSAqIEluc3RlYWQgd2UgY2FuIHVzZSBh
IGNvbmRpdGlvbmFsIE1JX0JCX0VORCBoZXJlIHRoYXQgbG9va3MgYXQKKwkgKiB0aGUgdXNlcidz
IGNvcHkgb2YgdGhlIGJhdGNoIGFuZCB0ZXJtaW5hdGVzIHdoZW4gdGhleSBtb2RpZmllZCBpdC4K
KwkgKi8KKwlpZiAoZ2VuID49IDkpIHsKKwkJciA9ICZyZWxvY3NbYmF0Y2gtPnJlbG9jYXRpb25f
Y291bnQrK107CisKKwkJci0+cHJlc3VtZWRfb2Zmc2V0ID0gMDsKKwkJci0+dGFyZ2V0X2hhbmRs
ZSA9IGJhdGNoLT5oYW5kbGU7CisJCXItPm9mZnNldCA9IChjcyArIDIgLSBiYXRjaF9zdGFydCkg
KiBzaXplb2YoKmNzKTsKKwkJci0+cmVhZF9kb21haW5zID0gSTkxNV9HRU1fRE9NQUlOX0NPTU1B
TkQ7CisJCXItPmRlbHRhID0gKHNwaW4tPmNvbmRpdGlvbiAtIGJhdGNoX3N0YXJ0KSAqIHNpemVv
ZigqY3MpOworCisJCSpjcysrID0gTUlfQ09ORF9CQVRDSF9CVUZGRVJfRU5EIHwgMSA8PCAyMSB8
IDUgPDwgMTIgfCAyOworCQkqY3MrKyA9IE1JX0JBVENIX0JVRkZFUl9FTkQ7CisJCSpjcysrID0g
ci0+ZGVsdGE7CisJCSpjcysrID0gMDsKKwl9CiAKIAkvKiByZWN1cnNlICovCiAJciA9ICZyZWxv
Y3Nbb2JqW0JBVENIXS5yZWxvY2F0aW9uX2NvdW50KytdOwpkaWZmIC0tZ2l0IGEvbGliL2ludGVs
X3JlZy5oIGIvbGliL2ludGVsX3JlZy5oCmluZGV4IDA2OTQ0MGNiNy4uMTBjYTc2MGEyIDEwMDY0
NAotLS0gYS9saWIvaW50ZWxfcmVnLmgKKysrIGIvbGliL2ludGVsX3JlZy5oCkBAIC0yNTkzLDYg
KzI1OTMsOSBAQCBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBT
T0ZUV0FSRS4KICNkZWZpbmUgTUlfQkFUQ0hfQlVGRkVSCQkoKDB4MzAgPDwgMjMpIHwgMSkKICNk
ZWZpbmUgTUlfQkFUQ0hfQlVGRkVSX1NUQVJUCSgweDMxIDw8IDIzKQogI2RlZmluZSBNSV9CQVRD
SF9CVUZGRVJfRU5ECSgweEEgPDwgMjMpCisjZGVmaW5lIE1JX0NPTkRfQkFUQ0hfQlVGRkVSX0VO
RAkoMHgzNiA8PCAyMykKKyNkZWZpbmUgTUlfRE9fQ09NUEFSRSAgICAgICAgICAgICAgICAgICAo
MTw8MjEpCisKICNkZWZpbmUgTUlfQkFUQ0hfTk9OX1NFQ1VSRQkJKDEpCiAjZGVmaW5lIE1JX0JB
VENIX05PTl9TRUNVUkVfSTk2NQkoMSA8PCA4KQogI2RlZmluZSBNSV9CQVRDSF9OT05fU0VDVVJF
X0hTVwkJKDE8PDEzKSAvKiBBZGRpdGlvbmFsIGJpdCBmb3IgUkNTICovCmRpZmYgLS1naXQgYS90
ZXN0cy9pOTE1L2dlbV9kb3VibGVfaXJxX2xvb3AuYyBiL3Rlc3RzL2k5MTUvZ2VtX2RvdWJsZV9p
cnFfbG9vcC5jCmluZGV4IGIzMjZmYzU4YS4uZjE3ZjYxYzE5IDEwMDY0NAotLS0gYS90ZXN0cy9p
OTE1L2dlbV9kb3VibGVfaXJxX2xvb3AuYworKysgYi90ZXN0cy9pOTE1L2dlbV9kb3VibGVfaXJx
X2xvb3AuYwpAQCAtNTIsOCArNTIsNiBAQCBzdGF0aWMgZHJtX2ludGVsX2JvICp0YXJnZXRfYnVm
ZmVyLCAqYmx0X2JvOwogSUdUX1RFU1RfREVTQ1JJUFRJT04oIkJhc2ljIGNoZWNrIGZvciBtaXNz
ZWQgSVJRcyBvbiBibHQgcmluZy4iKTsKIAogCi0jZGVmaW5lIE1JX0NPTkRfQkFUQ0hfQlVGRkVS
X0VORAkoMHgzNjw8MjMgfCAxKQotI2RlZmluZSBNSV9ET19DT01QQVJFCQkJKDE8PDIxKQogc3Rh
dGljIHZvaWQKIGR1bW15X3JlbG9jX2xvb3Aodm9pZCkKIHsKZGlmZiAtLWdpdCBhL3Rlc3RzL2k5
MTUvZ2VtX3dyaXRlX3JlYWRfcmluZ19zd2l0Y2guYyBiL3Rlc3RzL2k5MTUvZ2VtX3dyaXRlX3Jl
YWRfcmluZ19zd2l0Y2guYwppbmRleCBlZjIyOWNjNTkuLjA5NWMxM2MzNCAxMDA2NDQKLS0tIGEv
dGVzdHMvaTkxNS9nZW1fd3JpdGVfcmVhZF9yaW5nX3N3aXRjaC5jCisrKyBiL3Rlc3RzL2k5MTUv
Z2VtX3dyaXRlX3JlYWRfcmluZ19zd2l0Y2guYwpAQCAtMTE1LDcgKzExNSw3IEBAIHN0YXRpYyB2
b2lkIHJ1bl90ZXN0KGludCByaW5nKQogCSAqIG90aGVyd2lzZSB0aGUgb2JqLT5sYXN0X3dyaXRl
X3NlcW5vIHdpbGwgYmUgdXBkYXRlZC4gKi8KIAlpZiAocmluZyA9PSBJOTE1X0VYRUNfUkVOREVS
KSB7CiAJCUJFR0lOX0JBVENIKDQsIDEpOwotCQlPVVRfQkFUQ0goTUlfQ09ORF9CQVRDSF9CVUZG
RVJfRU5EIHwgTUlfRE9fQ09NUEFSRSk7CisJCU9VVF9CQVRDSChNSV9DT05EX0JBVENIX0JVRkZF
Ul9FTkQgfCBNSV9ET19DT01QQVJFIHwgMSk7CiAJCU9VVF9CQVRDSCgweGZmZmZmZmZmKTsgLyog
Y29tcGFyZSBkd29yZCAqLwogCQlPVVRfUkVMT0ModGFyZ2V0X2JvLCBJOTE1X0dFTV9ET01BSU5f
UkVOREVSLCAwLCAwKTsKIAkJT1VUX0JBVENIKE1JX05PT1ApOwotLSAKMi4yNC4wCgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGlu
ZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

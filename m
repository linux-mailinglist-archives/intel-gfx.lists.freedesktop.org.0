Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9EEAAE8BEE
	for <lists+intel-gfx@lfdr.de>; Tue, 29 Oct 2019 16:39:57 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1B1E26EC37;
	Tue, 29 Oct 2019 15:39:56 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D8B6B6EC36
 for <intel-gfx@lists.freedesktop.org>; Tue, 29 Oct 2019 15:39:53 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 29 Oct 2019 08:39:53 -0700
X-IronPort-AV: E=Sophos;i="5.68,244,1569308400"; d="scan'208";a="374584419"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga005-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 29 Oct 2019 08:39:51 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 29 Oct 2019 17:39:30 +0200
Message-Id: <20191029153930.27103-4-jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191029153930.27103-1-jani.nikula@intel.com>
References: <20191029153930.27103-1-jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH 4/4] drm/i915/dsi: initialize DSI on each port
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TWFrZSBEU0kgaW5pdGlhbGl6YXRpb24gc2ltaWxhciB0byBvdGhlciBlbmNvZGVycyBieSBjYWxs
aW5nIGluaXQgb24KZWFjaCBwb3NzaWJsZSBwb3J0LiBUaGlzIHRha2VzIGEgc3RlcCB0b3dhcmRz
IGJlaW5nIGFibGUgdG8gaGF2ZSB0d28Kc2VwYXJhdGUgRFNJIGRpc3BsYXlzLCB0aG91Z2ggY3Vy
cmVudGx5IHRoaXMgd291bGQgbGlrZWx5IGJyZWFrIGlmIHRoZXJlCndlcmUgdHdvIERTSSBjaGls
ZCBkZXZpY2VzIHByZXNlbnQgaW4gdGhlIFZCVC4KCkNjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxl
LnN5cmphbGFAbGludXguaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBKYW5pIE5pa3VsYSA8amFu
aS5uaWt1bGFAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNs
X2RzaS5jICAgICAgIHwgIDcgKysrKy0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kaXNwbGF5LmMgfCAxNSArKysrKysrKysrLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHNpLmggICAgIHwgIDQgKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS92bHZfZHNpLmMgICAgICAgfCAxMCArKysrLS0tLS0tCiA0IGZpbGVzIGNoYW5nZWQs
IDIwIGluc2VydGlvbnMoKyksIDE2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pY2xfZHNpLmMKaW5kZXggNmUzOThjMzNhNTI0Li44MWEzYzM2Njc5YTIgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jCkBAIC0xNTQzLDcgKzE1NDMsNyBAQCBzdGF0
aWMgdm9pZCBpY2xfZHNpX2FkZF9wcm9wZXJ0aWVzKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNv
bm5lY3RvcikKIAkJCQljb25uZWN0b3ItPnBhbmVsLmZpeGVkX21vZGUtPnZkaXNwbGF5KTsKIH0K
IAotdm9pZCBpY2xfZHNpX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQor
dm9pZCBpY2xfZHNpX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBlbnVt
IHBvcnQgcG9ydCkKIHsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gJmRldl9wcml2LT5kcm07
CiAJc3RydWN0IGludGVsX2RzaSAqaW50ZWxfZHNpOwpAQCAtMTU1MSwxMSArMTU1MSwxMiBAQCB2
b2lkIGljbF9kc2lfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJc3Ry
dWN0IGludGVsX2Nvbm5lY3RvciAqaW50ZWxfY29ubmVjdG9yOwogCXN0cnVjdCBkcm1fY29ubmVj
dG9yICpjb25uZWN0b3I7CiAJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmZpeGVkX21vZGU7Ci0J
ZW51bSBwb3J0IHBvcnQ7CiAKLQlpZiAoIWludGVsX2Jpb3NfaXNfZHNpX3ByZXNlbnQoZGV2X3By
aXYsICZwb3J0KSkKKwlpZiAoIWRldl9wcml2LT52YnQuZGRpX3BvcnRfaW5mb1twb3J0XS5zdXBw
b3J0c19kc2kpCiAJCXJldHVybjsKIAorCURSTV9ERUJVR19LTVMoIkluaXRpYWxpemluZyBEU0kg
b24gcG9ydCAlY1xuIiwgcG9ydF9uYW1lKHBvcnQpKTsKKwogCWludGVsX2RzaSA9IGt6YWxsb2Mo
c2l6ZW9mKCppbnRlbF9kc2kpLCBHRlBfS0VSTkVMKTsKIAlpZiAoIWludGVsX2RzaSkKIAkJcmV0
dXJuOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwppbmRl
eCBlNTZhNzVjMDcwNDMuLjhkZDg4MjdhMTk3NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKQEAgLTE1OTQ2LDEzICsxNTk0NiwxNSBAQCBzdGF0aWMg
dm9pZCBpbnRlbF9zZXR1cF9vdXRwdXRzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dikKIAkJaW50ZWxfZGRpX2luaXQoZGV2X3ByaXYsIFBPUlRfRyk7CiAJCWludGVsX2RkaV9pbml0
KGRldl9wcml2LCBQT1JUX0gpOwogCQlpbnRlbF9kZGlfaW5pdChkZXZfcHJpdiwgUE9SVF9JKTsK
LQkJaWNsX2RzaV9pbml0KGRldl9wcml2KTsKKwkJaWNsX2RzaV9pbml0KGRldl9wcml2LCBQT1JU
X0EpOworCQlpY2xfZHNpX2luaXQoZGV2X3ByaXYsIFBPUlRfQik7CiAJfSBlbHNlIGlmIChJU19F
TEtIQVJUTEFLRShkZXZfcHJpdikpIHsKIAkJaW50ZWxfZGRpX2luaXQoZGV2X3ByaXYsIFBPUlRf
QSk7CiAJCWludGVsX2RkaV9pbml0KGRldl9wcml2LCBQT1JUX0IpOwogCQlpbnRlbF9kZGlfaW5p
dChkZXZfcHJpdiwgUE9SVF9DKTsKIAkJaW50ZWxfZGRpX2luaXQoZGV2X3ByaXYsIFBPUlRfRCk7
Ci0JCWljbF9kc2lfaW5pdChkZXZfcHJpdik7CisJCWljbF9kc2lfaW5pdChkZXZfcHJpdiwgUE9S
VF9BKTsKKwkJaWNsX2RzaV9pbml0KGRldl9wcml2LCBQT1JUX0IpOwogCX0gZWxzZSBpZiAoSVNf
R0VOKGRldl9wcml2LCAxMSkpIHsKIAkJaW50ZWxfZGRpX2luaXQoZGV2X3ByaXYsIFBPUlRfQSk7
CiAJCWludGVsX2RkaV9pbml0KGRldl9wcml2LCBQT1JUX0IpOwpAQCAtMTU5NjgsNyArMTU5NzAs
OCBAQCBzdGF0aWMgdm9pZCBpbnRlbF9zZXR1cF9vdXRwdXRzKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikKIAkJICAgIGludGVsX2Jpb3NfaXNfcG9ydF9wcmVzZW50KGRldl9wcml2
LCBQT1JUX0YpKQogCQkJaW50ZWxfZGRpX2luaXQoZGV2X3ByaXYsIFBPUlRfRik7CiAKLQkJaWNs
X2RzaV9pbml0KGRldl9wcml2KTsKKwkJaWNsX2RzaV9pbml0KGRldl9wcml2LCBQT1JUX0EpOwor
CQlpY2xfZHNpX2luaXQoZGV2X3ByaXYsIFBPUlRfQik7CiAJfSBlbHNlIGlmIChJU19HRU45X0xQ
KGRldl9wcml2KSkgewogCQkvKgogCQkgKiBGSVhNRTogQnJveHRvbiBkb2Vzbid0IHN1cHBvcnQg
cG9ydCBkZXRlY3Rpb24gdmlhIHRoZQpAQCAtMTU5NzksNyArMTU5ODIsOCBAQCBzdGF0aWMgdm9p
ZCBpbnRlbF9zZXR1cF9vdXRwdXRzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikK
IAkJaW50ZWxfZGRpX2luaXQoZGV2X3ByaXYsIFBPUlRfQik7CiAJCWludGVsX2RkaV9pbml0KGRl
dl9wcml2LCBQT1JUX0MpOwogCi0JCXZsdl9kc2lfaW5pdChkZXZfcHJpdik7CisJCXZsdl9kc2lf
aW5pdChkZXZfcHJpdiwgUE9SVF9BKTsKKwkJdmx2X2RzaV9pbml0KGRldl9wcml2LCBQT1JUX0Mp
OwogCX0gZWxzZSBpZiAoSEFTX0RESShkZXZfcHJpdikpIHsKIAkJaW50IGZvdW5kOwogCkBAIC0x
NjA5OCw3ICsxNjEwMiw4IEBAIHN0YXRpYyB2b2lkIGludGVsX3NldHVwX291dHB1dHMoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQkJCWludGVsX2hkbWlfaW5pdChkZXZfcHJp
diwgQ0hWX0hETUlELCBQT1JUX0QpOwogCQl9CiAKLQkJdmx2X2RzaV9pbml0KGRldl9wcml2KTsK
KwkJdmx2X2RzaV9pbml0KGRldl9wcml2LCBQT1JUX0EpOworCQl2bHZfZHNpX2luaXQoZGV2X3By
aXYsIFBPUlRfQyk7CiAJfSBlbHNlIGlmIChJU19QSU5FVklFVyhkZXZfcHJpdikpIHsKIAkJaW50
ZWxfbHZkc19pbml0KGRldl9wcml2KTsKIAkJaW50ZWxfY3J0X2luaXQoZGV2X3ByaXYpOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kc2kuaCBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHNpLmgKaW5kZXggYjE1YmU1ODE0NTk5Li5j
MmY0NDc2ZTAzYTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZHNpLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kc2kuaApA
QCAtMTYyLDcgKzE2Miw3IEBAIHN0YXRpYyBpbmxpbmUgdTE2IGludGVsX2RzaV9lbmNvZGVyX3Bv
cnRzKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQogfQogCiAvKiBpY2xfZHNpLmMgKi8K
LXZvaWQgaWNsX2RzaV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7Cit2
b2lkIGljbF9kc2lfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGVudW0g
cG9ydCBwb3J0KTsKIAogLyogaW50ZWxfZHNpLmMgKi8KIGludCBpbnRlbF9kc2lfYml0cmF0ZShj
b25zdCBzdHJ1Y3QgaW50ZWxfZHNpICppbnRlbF9kc2kpOwpAQCAtMTc5LDcgKzE3OSw3IEBAIGVu
dW0gZHJtX21vZGVfc3RhdHVzIGludGVsX2RzaV9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fY29ubmVj
dG9yICpjb25uZWN0b3IsCiBzdHJ1Y3QgaW50ZWxfZHNpX2hvc3QgKmludGVsX2RzaV9ob3N0X2lu
aXQoc3RydWN0IGludGVsX2RzaSAqaW50ZWxfZHNpLAogCQkJCQkgICBjb25zdCBzdHJ1Y3QgbWlw
aV9kc2lfaG9zdF9vcHMgKmZ1bmNzLAogCQkJCQkgICBlbnVtIHBvcnQgcG9ydCk7Ci12b2lkIHZs
dl9kc2lfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwordm9pZCB2bHZf
ZHNpX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCBlbnVtIHBvcnQgcG9y
dCk7CiAKIC8qIHZsdl9kc2lfcGxsLmMgKi8KIGludCB2bHZfZHNpX3BsbF9jb21wdXRlKHN0cnVj
dCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS92bHZfZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L3Zsdl9k
c2kuYwppbmRleCA1MDA2NGNkZTA3MjQuLjI5M2M3MGUzNjE5NCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS92bHZfZHNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS92bHZfZHNpLmMKQEAgLTE4MDksNyArMTgwOSw3IEBAIHN0YXRpYyB2b2lkIHZs
dl9kcGh5X3BhcmFtX2luaXQoc3RydWN0IGludGVsX2RzaSAqaW50ZWxfZHNpKQogCWludGVsX2Rz
aV9sb2dfcGFyYW1zKGludGVsX2RzaSk7CiB9CiAKLXZvaWQgdmx2X2RzaV9pbml0KHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3ZvaWQgdmx2X2RzaV9pbml0KHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiwgZW51bSBwb3J0IHBvcnQpCiB7CiAJc3RydWN0IGRybV9k
ZXZpY2UgKmRldiA9ICZkZXZfcHJpdi0+ZHJtOwogCXN0cnVjdCBpbnRlbF9kc2kgKmludGVsX2Rz
aTsKQEAgLTE4MTgsMTQgKzE4MTgsMTIgQEAgdm9pZCB2bHZfZHNpX2luaXQoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2KQogCXN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmludGVsX2Nv
bm5lY3RvcjsKIAlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOwogCXN0cnVjdCBkcm1f
ZGlzcGxheV9tb2RlICpjdXJyZW50X21vZGUsICpmaXhlZF9tb2RlOwotCWVudW0gcG9ydCBwb3J0
OwotCi0JRFJNX0RFQlVHX0tNUygiXG4iKTsKIAotCS8qIFRoZXJlIGlzIG5vIGRldGVjdGlvbiBt
ZXRob2QgZm9yIE1JUEkgc28gcmVseSBvbiBWQlQgKi8KLQlpZiAoIWludGVsX2Jpb3NfaXNfZHNp
X3ByZXNlbnQoZGV2X3ByaXYsICZwb3J0KSkKKwlpZiAoIWRldl9wcml2LT52YnQuZGRpX3BvcnRf
aW5mb1twb3J0XS5zdXBwb3J0c19kc2kpCiAJCXJldHVybjsKIAorCURSTV9ERUJVR19LTVMoIklu
aXRpYWxpemluZyBEU0kgb24gcG9ydCAlY1xuIiwgcG9ydF9uYW1lKHBvcnQpKTsKKwogCWlmIChJ
U19HRU45X0xQKGRldl9wcml2KSkKIAkJZGV2X3ByaXYtPm1pcGlfbW1pb19iYXNlID0gQlhUX01J
UElfQkFTRTsKIAllbHNlCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DBD0AEC3F2
	for <lists+intel-gfx@lfdr.de>; Fri,  1 Nov 2019 14:44:18 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 01B406F7EB;
	Fri,  1 Nov 2019 13:44:17 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A42836F7EB
 for <intel-gfx@lists.freedesktop.org>; Fri,  1 Nov 2019 13:44:15 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 01 Nov 2019 06:41:13 -0700
X-IronPort-AV: E=Sophos;i="5.68,255,1569308400"; d="scan'208";a="204504062"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga006-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 01 Nov 2019 06:41:11 -0700
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri,  1 Nov 2019 15:40:53 +0200
Message-Id: <20191101134054.30228-3-jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191101134054.30228-1-jani.nikula@intel.com>
References: <20191101134054.30228-1-jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH 3/4] drm/i915/dsc: split out encoder specific
 parts from DSC compute params
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U3BsaXQgb3V0IHRoZSBEUCBzcGVjaWZpYyBwYXJ0cywgbWFraW5nIGl0IGVhc2llciB0byBhZGQg
RFNJIHNwZWNpZmljCmNvbmZpZ3VyYXRpb24uIEFsc28gbW92ZSB0aGUgZW5jb2RlciBzcGVjaWZp
YyBwYXJ0cyB0b3dhcmRzIHRoZSBlbmQsIHRvCmFsbG93IG92ZXJyaWRpbmcgZ2VuZXJpYyBjb25m
aWd1cmF0aW9uIGlmIG5lZWRlZC4gVGhpcyBhbHNvIGltcHJvdmVzCmNsYXJpdHkgYnkgbWFraW5n
IGl0IGNsZWFyIHRoZSBlbmNvZGVyIGluZGVwZW5kZW50IGNvbmZpZ3VyYXRpb24gZG9lcwpub3Qg
ZGVwZW5kIG9uIHRoZSBlbmNvZGVyIHNwZWNpZmljIHBhcnRzLgoKQ2M6IE1hbmFzaSBOYXZhcmUg
PG1hbmFzaS5kLm5hdmFyZUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEphbmkgTmlrdWxhIDxq
YW5pLm5pa3VsYUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kcC5jICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92
ZHNjLmMgfCA2OCArKysrKysrKysrKysrKy0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF92ZHNjLmggfCAgNSArLQogMyBmaWxlcyBjaGFuZ2VkLCA0NSBpbnNlcnRp
b25zKCspLCAzMCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2RwLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2RwLmMKaW5kZXggYzYxYWMwYzNhY2I1Li4xNWFkZDUwYTgzMWMgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKQEAgLTIxMzIsNyArMjEzMiw3IEBAIHN0YXRpYyBpbnQg
aW50ZWxfZHBfZHNjX2NvbXB1dGVfY29uZmlnKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsCiAJ
CX0KIAl9CiAKLQlyZXQgPSBpbnRlbF9kcF9jb21wdXRlX2RzY19wYXJhbXMoaW50ZWxfZHAsIHBp
cGVfY29uZmlnKTsKKwlyZXQgPSBpbnRlbF9kc2NfY29tcHV0ZV9wYXJhbXMoJmRpZ19wb3J0LT5i
YXNlLCBwaXBlX2NvbmZpZyk7CiAJaWYgKHJldCA8IDApIHsKIAkJRFJNX0RFQlVHX0tNUygiQ2Fu
bm90IGNvbXB1dGUgdmFsaWQgRFNDIHBhcmFtZXRlcnMgZm9yIElucHV0IEJwcCA9ICVkICIKIAkJ
CSAgICAgICJDb21wcmVzc2VkIEJQUCA9ICVkXG4iLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92ZHNjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX3Zkc2MuYwppbmRleCBiNmMwOTAzMjc0NDMuLjA3OWY3NDIzMzg0MiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92ZHNjLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92ZHNjLmMKQEAgLTMzNSwzMiArMzM1LDE0
IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcmNfcGFyYW1ldGVycyAqZ2V0X3JjX3BhcmFtcyh1MTYg
Y29tcHJlc3NlZF9icHAsCiAJcmV0dXJuICZyY19wYXJhbWV0ZXJzW3Jvd19pbmRleF1bY29sdW1u
X2luZGV4XTsKIH0KIAotaW50IGludGVsX2RwX2NvbXB1dGVfZHNjX3BhcmFtcyhzdHJ1Y3QgaW50
ZWxfZHAgKmludGVsX2RwLAotCQkJCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpwaXBlX2NvbmZp
ZykKKy8qIFZhbHVlcyBmaWxsZWQgZnJvbSBEU0MgU2luayBEUENEICovCitzdGF0aWMgaW50IGlu
dGVsX2RzY19kcF9jb21wdXRlX3BhcmFtcyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwK
KwkJCQkgICAgICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmlnKQogeworCXN0
cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAgPSBlbmNfdG9faW50ZWxfZHAoJmVuY29kZXItPmJhc2Up
OwogCXN0cnVjdCBkcm1fZHNjX2NvbmZpZyAqdmRzY19jZmcgPSAmcGlwZV9jb25maWctPmRzYy5j
b25maWc7Ci0JdTE2IGNvbXByZXNzZWRfYnBwID0gcGlwZV9jb25maWctPmRzYy5jb21wcmVzc2Vk
X2JwcDsKLQljb25zdCBzdHJ1Y3QgcmNfcGFyYW1ldGVycyAqcmNfcGFyYW1zOwotCXU4IGkgPSAw
OwotCXU4IGxpbmVfYnVmX2RlcHRoID0gMDsKKwl1OCBsaW5lX2J1Zl9kZXB0aDsKIAotCXZkc2Nf
Y2ZnLT5waWNfd2lkdGggPSBwaXBlX2NvbmZpZy0+YmFzZS5hZGp1c3RlZF9tb2RlLmNydGNfaGRp
c3BsYXk7Ci0JdmRzY19jZmctPnBpY19oZWlnaHQgPSBwaXBlX2NvbmZpZy0+YmFzZS5hZGp1c3Rl
ZF9tb2RlLmNydGNfdmRpc3BsYXk7Ci0JdmRzY19jZmctPnNsaWNlX3dpZHRoID0gRElWX1JPVU5E
X1VQKHZkc2NfY2ZnLT5waWNfd2lkdGgsCi0JCQkJCSAgICAgcGlwZV9jb25maWctPmRzYy5zbGlj
ZV9jb3VudCk7Ci0JLyoKLQkgKiBTbGljZSBIZWlnaHQgb2YgOCB3b3JrcyBmb3IgYWxsIGN1cnJl
bnRseSBhdmFpbGFibGUgcGFuZWxzLiBTbyBzdGFydAotCSAqIHdpdGggdGhhdCBpZiBwaWNfaGVp
Z2h0IGlzIGFuIGludGVncmFsIG11bHRpcGxlIG9mIDguCi0JICogRXZlbnR1YWxseSBhZGQgbG9n
aWMgdG8gdHJ5IG11bHRpcGxlIHNsaWNlIGhlaWdodHMuCi0JICovCi0JaWYgKHZkc2NfY2ZnLT5w
aWNfaGVpZ2h0ICUgOCA9PSAwKQotCQl2ZHNjX2NmZy0+c2xpY2VfaGVpZ2h0ID0gODsKLQllbHNl
IGlmICh2ZHNjX2NmZy0+cGljX2hlaWdodCAlIDQgPT0gMCkKLQkJdmRzY19jZmctPnNsaWNlX2hl
aWdodCA9IDQ7Ci0JZWxzZQotCQl2ZHNjX2NmZy0+c2xpY2VfaGVpZ2h0ID0gMjsKLQotCS8qIFZh
bHVlcyBmaWxsZWQgZnJvbSBEU0MgU2luayBEUENEICovCiAJdmRzY19jZmctPmRzY192ZXJzaW9u
X21ham9yID0KIAkJKGludGVsX2RwLT5kc2NfZHBjZFtEUF9EU0NfUkVWIC0gRFBfRFNDX1NVUFBP
UlRdICYKIAkJIERQX0RTQ19NQUpPUl9NQVNLKSA+PiBEUF9EU0NfTUFKT1JfU0hJRlQ7CkBAIC0z
NzcsNiArMzU5LDcgQEAgaW50IGludGVsX2RwX2NvbXB1dGVfZHNjX3BhcmFtcyhzdHJ1Y3QgaW50
ZWxfZHAgKmludGVsX2RwLAogCQlEUk1fREVCVUdfS01TKCJEU0MgU2luayBMaW5lIEJ1ZmZlciBE
ZXB0aCBpbnZhbGlkXG4iKTsKIAkJcmV0dXJuIC1FSU5WQUw7CiAJfQorCiAJaWYgKHZkc2NfY2Zn
LT5kc2NfdmVyc2lvbl9taW5vciA9PSAyKQogCQl2ZHNjX2NmZy0+bGluZV9idWZfZGVwdGggPSAo
bGluZV9idWZfZGVwdGggPT0gRFNDXzFfMl9NQVhfTElORUJVRl9ERVBUSF9CSVRTKSA/CiAJCQlE
U0NfMV8yX01BWF9MSU5FQlVGX0RFUFRIX1ZBTCA6IGxpbmVfYnVmX2RlcHRoOwpAQCAtMzg0LDEz
ICszNjcsNDIgQEAgaW50IGludGVsX2RwX2NvbXB1dGVfZHNjX3BhcmFtcyhzdHJ1Y3QgaW50ZWxf
ZHAgKmludGVsX2RwLAogCQl2ZHNjX2NmZy0+bGluZV9idWZfZGVwdGggPSAobGluZV9idWZfZGVw
dGggPiBEU0NfMV8xX01BWF9MSU5FQlVGX0RFUFRIX0JJVFMpID8KIAkJCURTQ18xXzFfTUFYX0xJ
TkVCVUZfREVQVEhfQklUUyA6IGxpbmVfYnVmX2RlcHRoOwogCisJdmRzY19jZmctPmJsb2NrX3By
ZWRfZW5hYmxlID0KKwkJCWludGVsX2RwLT5kc2NfZHBjZFtEUF9EU0NfQkxLX1BSRURJQ1RJT05f
U1VQUE9SVCAtIERQX0RTQ19TVVBQT1JUXSAmCisJCURQX0RTQ19CTEtfUFJFRElDVElPTl9JU19T
VVBQT1JURUQ7CisKKwlyZXR1cm4gMDsKK30KKworaW50IGludGVsX2RzY19jb21wdXRlX3BhcmFt
cyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKKwkJCSAgICAgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKnBpcGVfY29uZmlnKQoreworCXN0cnVjdCBkcm1fZHNjX2NvbmZpZyAqdmRzY19j
ZmcgPSAmcGlwZV9jb25maWctPmRzYy5jb25maWc7CisJdTE2IGNvbXByZXNzZWRfYnBwID0gcGlw
ZV9jb25maWctPmRzYy5jb21wcmVzc2VkX2JwcDsKKwljb25zdCBzdHJ1Y3QgcmNfcGFyYW1ldGVy
cyAqcmNfcGFyYW1zOworCXU4IGkgPSAwOworCWludCByZXQ7CisKKwl2ZHNjX2NmZy0+cGljX3dp
ZHRoID0gcGlwZV9jb25maWctPmJhc2UuYWRqdXN0ZWRfbW9kZS5jcnRjX2hkaXNwbGF5OworCXZk
c2NfY2ZnLT5waWNfaGVpZ2h0ID0gcGlwZV9jb25maWctPmJhc2UuYWRqdXN0ZWRfbW9kZS5jcnRj
X3ZkaXNwbGF5OworCXZkc2NfY2ZnLT5zbGljZV93aWR0aCA9IERJVl9ST1VORF9VUCh2ZHNjX2Nm
Zy0+cGljX3dpZHRoLAorCQkJCQkgICAgIHBpcGVfY29uZmlnLT5kc2Muc2xpY2VfY291bnQpOwor
CS8qCisJICogU2xpY2UgSGVpZ2h0IG9mIDggd29ya3MgZm9yIGFsbCBjdXJyZW50bHkgYXZhaWxh
YmxlIHBhbmVscy4gU28gc3RhcnQKKwkgKiB3aXRoIHRoYXQgaWYgcGljX2hlaWdodCBpcyBhbiBp
bnRlZ3JhbCBtdWx0aXBsZSBvZiA4LgorCSAqIEV2ZW50dWFsbHkgYWRkIGxvZ2ljIHRvIHRyeSBt
dWx0aXBsZSBzbGljZSBoZWlnaHRzLgorCSAqLworCWlmICh2ZHNjX2NmZy0+cGljX2hlaWdodCAl
IDggPT0gMCkKKwkJdmRzY19jZmctPnNsaWNlX2hlaWdodCA9IDg7CisJZWxzZSBpZiAodmRzY19j
ZmctPnBpY19oZWlnaHQgJSA0ID09IDApCisJCXZkc2NfY2ZnLT5zbGljZV9oZWlnaHQgPSA0Owor
CWVsc2UKKwkJdmRzY19jZmctPnNsaWNlX2hlaWdodCA9IDI7CisKIAkvKiBHZW4gMTEgZG9lcyBu
b3Qgc3VwcG9ydCBZQ2JDciAqLwogCXZkc2NfY2ZnLT5zaW1wbGVfNDIyID0gZmFsc2U7CiAJLyog
R2VuIDExIGRvZXMgbm90IHN1cHBvcnQgVkJSICovCiAJdmRzY19jZmctPnZicl9lbmFibGUgPSBm
YWxzZTsKLQl2ZHNjX2NmZy0+YmxvY2tfcHJlZF9lbmFibGUgPQotCQkJaW50ZWxfZHAtPmRzY19k
cGNkW0RQX0RTQ19CTEtfUFJFRElDVElPTl9TVVBQT1JUIC0gRFBfRFNDX1NVUFBPUlRdICYKLQkJ
RFBfRFNDX0JMS19QUkVESUNUSU9OX0lTX1NVUFBPUlRFRDsKIAogCS8qIEdlbiAxMSBvbmx5IHN1
cHBvcnRzIGludGVncmFsIHZhbHVlcyBvZiBicHAgKi8KIAl2ZHNjX2NmZy0+Yml0c19wZXJfcGl4
ZWwgPSBjb21wcmVzc2VkX2JwcCA8PCA0OwpAQCAtNDU4LDYgKzQ3MCwxMCBAQCBpbnQgaW50ZWxf
ZHBfY29tcHV0ZV9kc2NfcGFyYW1zKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsCiAJdmRzY19j
ZmctPmluaXRpYWxfc2NhbGVfdmFsdWUgPSAodmRzY19jZmctPnJjX21vZGVsX3NpemUgPDwgMykg
LwogCQkodmRzY19jZmctPnJjX21vZGVsX3NpemUgLSB2ZHNjX2NmZy0+aW5pdGlhbF9vZmZzZXQp
OwogCisJcmV0ID0gaW50ZWxfZHNjX2RwX2NvbXB1dGVfcGFyYW1zKGVuY29kZXIsIHBpcGVfY29u
ZmlnKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCiAJcmV0dXJuIGRybV9kc2NfY29tcHV0
ZV9yY19wYXJhbWV0ZXJzKHZkc2NfY2ZnKTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92ZHNjLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX3Zkc2MuaAppbmRleCA5MGQzZjYwMTdmY2IuLjRlZDIyNTY3NTBjMyAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92ZHNjLmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92ZHNjLmgKQEAgLTgsMTMgKzgsMTIgQEAK
IAogc3RydWN0IGludGVsX2VuY29kZXI7CiBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZTsKLXN0cnVj
dCBpbnRlbF9kcDsKIAogdm9pZCBpbnRlbF9kc2NfZW5hYmxlKHN0cnVjdCBpbnRlbF9lbmNvZGVy
ICplbmNvZGVyLAogCQkgICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19z
dGF0ZSk7CiB2b2lkIGludGVsX2RzY19kaXNhYmxlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpjcnRjX3N0YXRlKTsKLWludCBpbnRlbF9kcF9jb21wdXRlX2RzY19wYXJhbXMoc3RydWN0
IGludGVsX2RwICppbnRlbF9kcCwKLQkJCQlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9j
b25maWcpOworaW50IGludGVsX2RzY19jb21wdXRlX3BhcmFtcyhzdHJ1Y3QgaW50ZWxfZW5jb2Rl
ciAqZW5jb2RlciwKKwkJCSAgICAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBpcGVfY29uZmln
KTsKIGVudW0gaW50ZWxfZGlzcGxheV9wb3dlcl9kb21haW4KIGludGVsX2RzY19wb3dlcl9kb21h
aW4oY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpOwogCi0tIAoyLjIw
LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

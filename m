Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3D1F8F31A
	for <lists+intel-gfx@lfdr.de>; Tue, 30 Apr 2019 11:35:56 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8E9E088FA4;
	Tue, 30 Apr 2019 09:35:54 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1AB2688FA4
 for <intel-gfx@lists.freedesktop.org>; Tue, 30 Apr 2019 09:35:52 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 16404933-1500050 
 for multiple; Tue, 30 Apr 2019 10:35:33 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 30 Apr 2019 10:35:32 +0100
Message-Id: <20190430093532.27003-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190429180020.27274-2-chris@chris-wilson.co.uk>
References: <20190429180020.27274-2-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2] drm/i915: Only reschedule the submission
 tasklet if preemption is possible
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SWYgd2UgY291cGxlIHRoZSBzY2hlZHVsZXIgbW9yZSB0aWdodGx5IHdpdGggdGhlIGV4ZWNsaXN0
cyBwb2xpY3ksIHdlCmNhbiBhcHBseSB0aGUgcHJlZW1wdGlvbiBwb2xpY3kgdG8gdGhlIHF1ZXN0
aW9uIG9mIHdoZXRoZXIgd2UgbmVlZCB0bwpraWNrIHRoZSB0YXNrbGV0IGF0IGFsbCBmb3IgdGhp
cyBwcmlvcml0eSBidW1wLgoKdjI6IFJlcGhyYXNlIGl0IGFzIGEgY29yZSBpOTE1IHBvbGljeSBh
bmQgbm90IGFuIGV4ZWNsaXN0cyBmb2libGUuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24g
PGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KQ2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJz
dWxpbkBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5l
LmggICAgICB8IDE4IC0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfbHJjLmMgICAgICAgICB8ICA0ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X2xyYy5jICAgICAgfCAgNyArKysrKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X3JlcXVlc3QuYyAgICAgICAgIHwgIDIgLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2No
ZWR1bGVyLmMgICAgICAgfCAxOCArKysrKysrKysrKy0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfc2NoZWR1bGVyLmggICAgICAgfCAxOCArKysrKysrKysrKysrKysrKysKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19zdWJtaXNzaW9uLmMgfCAgMyArKy0KIDcgZmlsZXMg
Y2hhbmdlZCwgMzkgaW5zZXJ0aW9ucygrKSwgMzEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmggYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9lbmdpbmUuaAppbmRleCAzZTUzZjUzYmM1MmIuLjMxNzcxMmQ2ZjdlNiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKQEAgLTEwNiwyNCArMTA2LDYg
QEAgaGFuZ2NoZWNrX2FjdGlvbl90b19zdHIoY29uc3QgZW51bSBpbnRlbF9lbmdpbmVfaGFuZ2No
ZWNrX2FjdGlvbiBhKQogCiB2b2lkIGludGVsX2VuZ2luZXNfc2V0X3NjaGVkdWxlcl9jYXBzKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKIAotc3RhdGljIGlubGluZSBib29sIF9fZXhl
Y2xpc3RzX25lZWRfcHJlZW1wdChpbnQgcHJpbywgaW50IGxhc3QpCi17Ci0JLyoKLQkgKiBBbGxv
dyBwcmVlbXB0aW9uIG9mIGxvdyAtPiBub3JtYWwgLT4gaGlnaCwgYnV0IHdlIGRvCi0JICogbm90
IGFsbG93IGxvdyBwcmlvcml0eSB0YXNrcyB0byBwcmVlbXB0IG90aGVyIGxvdyBwcmlvcml0eQot
CSAqIHRhc2tzIHVuZGVyIHRoZSBpbXByZXNzaW9uIHRoYXQgbGF0ZW5jeSBmb3IgbG93IHByaW9y
aXR5Ci0JICogdGFza3MgZG9lcyBub3QgbWF0dGVyIChhcyBtdWNoIGFzIGJhY2tncm91bmQgdGhy
b3VnaHB1dCksCi0JICogc28ga2lzcy4KLQkgKgotCSAqIE1vcmUgbmF0dXJhbGx5IHdlIHdvdWxk
IHdyaXRlCi0JICoJcHJpbyA+PSBtYXgoMCwgbGFzdCk7Ci0JICogZXhjZXB0IHRoYXQgd2Ugd2lz
aCB0byBwcmV2ZW50IHRyaWdnZXJpbmcgcHJlZW1wdGlvbiBhdCB0aGUgc2FtZQotCSAqIHByaW9y
aXR5IGxldmVsOiB0aGUgdGFzayB0aGF0IGlzIHJ1bm5pbmcgc2hvdWxkIHJlbWFpbiBydW5uaW5n
Ci0JICogdG8gcHJlc2VydmUgRklGTyBvcmRlcmluZyBvZiBkZXBlbmRlbmNpZXMuCi0JICovCi0J
cmV0dXJuIHByaW8gPiBtYXgoSTkxNV9QUklPUklUWV9OT1JNQUwgLSAxLCBsYXN0KTsKLX0KLQog
c3RhdGljIGlubGluZSB2b2lkCiBleGVjbGlzdHNfc2V0X2FjdGl2ZShzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2V4ZWNsaXN0cyAqZXhlY2xpc3RzLAogCQkgICAgIHVuc2lnbmVkIGludCBiaXQpCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCmluZGV4IDAxZjU4YTE1MmE5ZS4uNGNiODdkOTZkZWIx
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpAQCAtMjUxLDggKzI1MSw4IEBAIHN0
YXRpYyBpbmxpbmUgYm9vbCBuZWVkX3ByZWVtcHQoY29uc3Qgc3RydWN0IGludGVsX2VuZ2luZV9j
cyAqZW5naW5lLAogCSAqIG91cnNlbHZlcywgaWdub3JlIHRoZSByZXF1ZXN0LgogCSAqLwogCWxh
c3RfcHJpbyA9IGVmZmVjdGl2ZV9wcmlvKHJxKTsKLQlpZiAoIV9fZXhlY2xpc3RzX25lZWRfcHJl
ZW1wdChlbmdpbmUtPmV4ZWNsaXN0cy5xdWV1ZV9wcmlvcml0eV9oaW50LAotCQkJCSAgICAgIGxh
c3RfcHJpbykpCisJaWYgKCFpOTE1X3NjaGVkdWxlcl9uZWVkX3ByZWVtcHQoZW5naW5lLT5leGVj
bGlzdHMucXVldWVfcHJpb3JpdHlfaGludCwKKwkJCQkJIGxhc3RfcHJpbykpCiAJCXJldHVybiBm
YWxzZTsKIAogCS8qCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVz
dF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xyYy5jCmluZGV4IDg0
NTM4ZjY5MTg1Yi4uNGIwNDI4OTNkYzBlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9zZWxmdGVzdF9scmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVz
dF9scmMuYwpAQCAtNjM4LDE0ICs2MzgsMTkgQEAgc3RhdGljIHN0cnVjdCBpOTE1X3JlcXVlc3Qg
KmR1bW15X3JlcXVlc3Qoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCUdFTV9CVUdf
T04oaTkxNV9yZXF1ZXN0X2NvbXBsZXRlZChycSkpOwogCiAJaTkxNV9zd19mZW5jZV9pbml0KCZy
cS0+c3VibWl0LCBkdW1teV9ub3RpZnkpOwotCWk5MTVfc3dfZmVuY2VfY29tbWl0KCZycS0+c3Vi
bWl0KTsKKwlzZXRfYml0KEk5MTVfRkVOQ0VfRkxBR19BQ1RJVkUsICZycS0+ZmVuY2UuZmxhZ3Mp
OwogCiAJcmV0dXJuIHJxOwogfQogCiBzdGF0aWMgdm9pZCBkdW1teV9yZXF1ZXN0X2ZyZWUoc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqZHVtbXkpCiB7CisJLyogV2UgaGF2ZSB0byBmYWtlIHRoZSBDUyBp
bnRlcnJ1cHQgdG8ga2ljayB0aGUgbmV4dCByZXF1ZXN0ICovCisJaTkxNV9zd19mZW5jZV9jb21t
aXQoJmR1bW15LT5zdWJtaXQpOworCiAJaTkxNV9yZXF1ZXN0X21hcmtfY29tcGxldGUoZHVtbXkp
OworCWRtYV9mZW5jZV9zaWduYWwoJmR1bW15LT5mZW5jZSk7CisKIAlpOTE1X3NjaGVkX25vZGVf
ZmluaSgmZHVtbXktPnNjaGVkKTsKIAlpOTE1X3N3X2ZlbmNlX2ZpbmkoJmR1bW15LT5zdWJtaXQp
OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jCmluZGV4IGFmOGM5ZmE1ZTA2Ni4uMmUy
MmRhNjZhNTZjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3Qu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYwpAQCAtMTM1OCw5ICsx
MzU4LDcgQEAgbG9uZyBpOTE1X3JlcXVlc3Rfd2FpdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwK
IAlpZiAoZmxhZ3MgJiBJOTE1X1dBSVRfUFJJT1JJVFkpIHsKIAkJaWYgKCFpOTE1X3JlcXVlc3Rf
c3RhcnRlZChycSkgJiYgSU5URUxfR0VOKHJxLT5pOTE1KSA+PSA2KQogCQkJZ2VuNl9ycHNfYm9v
c3QocnEpOwotCQlsb2NhbF9iaF9kaXNhYmxlKCk7IC8qIHN1c3BlbmQgdGFza2xldHMgZm9yIHJl
cHJpb3JpdGlzYXRpb24gKi8KIAkJaTkxNV9zY2hlZHVsZV9idW1wX3ByaW9yaXR5KHJxLCBJOTE1
X1BSSU9SSVRZX1dBSVQpOwotCQlsb2NhbF9iaF9lbmFibGUoKTsgLyoga2ljayB0YXNrbGV0cyBl
biBtYXNzZSAqLwogCX0KIAogCXdhaXQudHNrID0gY3VycmVudDsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NoZWR1bGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3NjaGVkdWxlci5jCmluZGV4IDM5YmM0ZjU0ZTI3Mi4uODhkMTg2MDBmNWRiIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxlci5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfc2NoZWR1bGVyLmMKQEAgLTI2MSwxNiArMjYxLDIwIEBAIHNjaGVk
X2xvY2tfZW5naW5lKGNvbnN0IHN0cnVjdCBpOTE1X3NjaGVkX25vZGUgKm5vZGUsCiAJcmV0dXJu
IGVuZ2luZTsKIH0KIAotc3RhdGljIGJvb2wgaW5mbGlnaHQoY29uc3Qgc3RydWN0IGk5MTVfcmVx
dWVzdCAqcnEsCi0JCSAgICAgY29uc3Qgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQor
c3RhdGljIGlubGluZSBpbnQgcnFfcHJpbyhjb25zdCBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkK
IHsKLQljb25zdCBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICphY3RpdmU7CisJcmV0dXJuIHJxLT5zY2hl
ZC5hdHRyLnByaW9yaXR5IHwgX19OT19QUkVFTVBUSU9OOworfQorCitzdGF0aWMgYm9vbCBraWNr
X3Rhc2tsZXQoY29uc3Qgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCBpbnQgcHJpbykK
K3sKKwljb25zdCBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICppbmZsaWdodCA9CisJCXBvcnRfcmVxdWVz
dChlbmdpbmUtPmV4ZWNsaXN0cy5wb3J0KTsKIAotCWlmICghaTkxNV9yZXF1ZXN0X2lzX2FjdGl2
ZShycSkpCisJaWYgKCFpbmZsaWdodCkKIAkJcmV0dXJuIGZhbHNlOwogCi0JYWN0aXZlID0gcG9y
dF9yZXF1ZXN0KGVuZ2luZS0+ZXhlY2xpc3RzLnBvcnQpOwotCXJldHVybiBhY3RpdmUtPmh3X2Nv
bnRleHQgPT0gcnEtPmh3X2NvbnRleHQ7CisJcmV0dXJuIGk5MTVfc2NoZWR1bGVyX25lZWRfcHJl
ZW1wdChwcmlvLCBycV9wcmlvKGluZmxpZ2h0KSk7CiB9CiAKIHN0YXRpYyB2b2lkIF9faTkxNV9z
Y2hlZHVsZShzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwKQEAgLTQwMCw3ICs0MDQsNyBAQCBzdGF0
aWMgdm9pZCBfX2k5MTVfc2NoZWR1bGUoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCiAJCSAqIElm
IHdlIGFyZSBhbHJlYWR5IHRoZSBjdXJyZW50bHkgZXhlY3V0aW5nIGNvbnRleHQsIGRvbid0CiAJ
CSAqIGJvdGhlciBldmFsdWF0aW5nIGlmIHdlIHNob3VsZCBwcmVlbXB0IG91cnNlbHZlcy4KIAkJ
ICovCi0JCWlmIChpbmZsaWdodChub2RlX3RvX3JlcXVlc3Qobm9kZSksIGVuZ2luZSkpCisJCWlm
ICgha2lja190YXNrbGV0KGVuZ2luZSwgcHJpbykpCiAJCQljb250aW51ZTsKIAogCQkvKiBEZWZl
ciAodGFza2xldCkgc3VibWlzc2lvbiB1bnRpbCBhZnRlciBhbGwgb2Ygb3VyIHVwZGF0ZXMuICov
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxlci5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2hlZHVsZXIuaAppbmRleCAwN2QyNDNhY2Y1NTMuLjdl
ZWZjY2ZmMzliZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2hlZHVs
ZXIuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjaGVkdWxlci5oCkBAIC01Miw0
ICs1MiwyMiBAQCBzdGF0aWMgaW5saW5lIHZvaWQgaTkxNV9wcmlvbGlzdF9mcmVlKHN0cnVjdCBp
OTE1X3ByaW9saXN0ICpwKQogCQlfX2k5MTVfcHJpb2xpc3RfZnJlZShwKTsKIH0KIAorc3RhdGlj
IGlubGluZSBib29sIGk5MTVfc2NoZWR1bGVyX25lZWRfcHJlZW1wdChpbnQgcHJpbywgaW50IGFj
dGl2ZSkKK3sKKwkvKgorCSAqIEFsbG93IHByZWVtcHRpb24gb2YgbG93IC0+IG5vcm1hbCAtPiBo
aWdoLCBidXQgd2UgZG8KKwkgKiBub3QgYWxsb3cgbG93IHByaW9yaXR5IHRhc2tzIHRvIHByZWVt
cHQgb3RoZXIgbG93IHByaW9yaXR5CisJICogdGFza3MgdW5kZXIgdGhlIGltcHJlc3Npb24gdGhh
dCBsYXRlbmN5IGZvciBsb3cgcHJpb3JpdHkKKwkgKiB0YXNrcyBkb2VzIG5vdCBtYXR0ZXIgKGFz
IG11Y2ggYXMgYmFja2dyb3VuZCB0aHJvdWdocHV0KSwKKwkgKiBzbyBraXNzLgorCSAqCisJICog
TW9yZSBuYXR1cmFsbHkgd2Ugd291bGQgd3JpdGUKKwkgKglwcmlvID49IG1heCgwLCBsYXN0KTsK
KwkgKiBleGNlcHQgdGhhdCB3ZSB3aXNoIHRvIHByZXZlbnQgdHJpZ2dlcmluZyBwcmVlbXB0aW9u
IGF0IHRoZSBzYW1lCisJICogcHJpb3JpdHkgbGV2ZWw6IHRoZSB0YXNrIHRoYXQgaXMgcnVubmlu
ZyBzaG91bGQgcmVtYWluIHJ1bm5pbmcKKwkgKiB0byBwcmVzZXJ2ZSBGSUZPIG9yZGVyaW5nIG9m
IGRlcGVuZGVuY2llcy4KKwkgKi8KKwlyZXR1cm4gcHJpbyA+IG1heChJOTE1X1BSSU9SSVRZX05P
Uk1BTCAtIDEsIGFjdGl2ZSk7Cit9CisKICNlbmRpZiAvKiBfSTkxNV9TQ0hFRFVMRVJfSF8gKi8K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19zdWJtaXNzaW9uLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfc3VibWlzc2lvbi5jCmluZGV4IDRjODE0
MzQ0ODA5Yy4uNDEwMzkzYmI4NTU5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
bnRlbF9ndWNfc3VibWlzc2lvbi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1
Y19zdWJtaXNzaW9uLmMKQEAgLTc0Niw3ICs3NDYsOCBAQCBzdGF0aWMgYm9vbCBfX2d1Y19kZXF1
ZXVlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAkJCQkmZW5naW5lLT5pOTE1LT5n
dWMucHJlZW1wdF93b3JrW2VuZ2luZS0+aWRdOwogCQkJaW50IHByaW8gPSBleGVjbGlzdHMtPnF1
ZXVlX3ByaW9yaXR5X2hpbnQ7CiAKLQkJCWlmIChfX2V4ZWNsaXN0c19uZWVkX3ByZWVtcHQocHJp
bywgcG9ydF9wcmlvKHBvcnQpKSkgeworCQkJaWYgKGk5MTVfc2NoZWR1bGVyX25lZWRfcHJlZW1w
dChwcmlvLAorCQkJCQkJCXBvcnRfcHJpbyhwb3J0KSkpIHsKIAkJCQlleGVjbGlzdHNfc2V0X2Fj
dGl2ZShleGVjbGlzdHMsCiAJCQkJCQkgICAgIEVYRUNMSVNUU19BQ1RJVkVfUFJFRU1QVCk7CiAJ
CQkJcXVldWVfd29yayhlbmdpbmUtPmk5MTUtPmd1Yy5wcmVlbXB0X3dxLAotLSAKMi4yMC4xCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8F92724C466
	for <lists+intel-gfx@lfdr.de>; Thu, 20 Aug 2020 19:21:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9A3706E99C;
	Thu, 20 Aug 2020 17:21:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DD59C6E999
 for <intel-gfx@lists.freedesktop.org>; Thu, 20 Aug 2020 17:21:28 +0000 (UTC)
IronPort-SDR: sXA+0oRl38jG9KbjOiWc4Qm+kO6iYhlrwrmmq2PXKX0ZksizoL8vnkZWDZ8zoktGOaDRLA1ofu
 TN7td5Ukdcdw==
X-IronPort-AV: E=McAfee;i="6000,8403,9718"; a="156416947"
X-IronPort-AV: E=Sophos;i="5.76,333,1592895600"; d="scan'208";a="156416947"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by orsmga102.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 20 Aug 2020 10:21:27 -0700
IronPort-SDR: xUq+aOsh1JRQWuFTUaKXCiJYHb8d+6WQsDsFoJRwFRPgjkq5rEaJu1vSFuW9485dmtFmf7e44g
 4AMd3TVaMvHA==
X-IronPort-AV: E=Sophos;i="5.76,333,1592895600"; d="scan'208";a="320959823"
Received: from bucherax-mobl.amr.corp.intel.com (HELO
 josouza-MOBL2.amr.corp.intel.com) ([10.255.82.219])
 by fmsmga004-auth.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 20 Aug 2020 10:21:27 -0700
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 20 Aug 2020 10:23:52 -0700
Message-Id: <20200820172353.15773-1-jose.souza@intel.com>
X-Mailer: git-send-email 2.28.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 1/2] drm/i915: Compute has_drrs after compute
 has_psr
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Hariom Pandey <hariom.pandey@intel.com>, Srinivas K <srinivasx.k@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RFJSUyBhbmQgUFNSIGNhbid0IGJlIGVuYWJsZSB0b2dldGhlciwgc28gZ2l2aW5nIHByZWZlcmVu
Y2UgdG8gUFNSCmFzIGl0IGFsbG93cyBtb3JlIHBvd2VyLXNhdmluZ3MgYnkgY29tcGxldGUgc2h1
dHRpbmcgZG93biBkaXNwbGF5LApzbyB0byBndWFyYW50ZWUgdGhpcywgaXQgc2hvdWxkIGNvbXB1
dGUgRFJSUyBzdGF0ZSBhZnRlciBjb21wdXRlIFBTUi4KCkNjOiBTcmluaXZhcyBLIDxzcmluaXZh
c3gua0BpbnRlbC5jb20+CkNjOiBIYXJpb20gUGFuZGV5IDxoYXJpb20ucGFuZGV5QGludGVsLmNv
bT4KU2lnbmVkLW9mZi1ieTogSm9zw6kgUm9iZXJ0byBkZSBTb3V6YSA8am9zZS5zb3V6YUBpbnRl
bC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jIHwgNTIg
KysrKysrKysrKysrKysrLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDMxIGluc2VydGlvbnMo
KyksIDIxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZHAuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAu
YwppbmRleCA3OWMyN2Y5MWY0MmMuLjNiZjUwYjFhZTk4MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHAuYwpAQCAtMjU3NSw2ICsyNTc1LDM0IEBAIGludGVsX2RwX2NvbXB1
dGVfaGRyX21ldGFkYXRhX2luZm9mcmFtZV9zZHAoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwK
IAkJaW50ZWxfaGRtaV9pbmZvZnJhbWVfZW5hYmxlKEhETUlfUEFDS0VUX1RZUEVfR0FNVVRfTUVU
QURBVEEpOwogfQogCitzdGF0aWMgdm9pZAoraW50ZWxfZHBfZHJyc19jb21wdXRlX2NvbmZpZyhz
dHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAorCQkJICAgICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqcGlwZV9jb25maWcsCisJCQkgICAgIGludCBvdXRwdXRfYnBwLCBib29sIGNvbnN0YW50X24p
Cit7CisJc3RydWN0IGludGVsX2Nvbm5lY3RvciAqaW50ZWxfY29ubmVjdG9yID0gaW50ZWxfZHAt
PmF0dGFjaGVkX2Nvbm5lY3RvcjsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYg
PSBkcF90b19pOTE1KGludGVsX2RwKTsKKworCS8qCisJICogRFJSUyBhbmQgUFNSIGNhbid0IGJl
IGVuYWJsZSB0b2dldGhlciwgc28gZ2l2aW5nIHByZWZlcmVuY2UgdG8gUFNSCisJICogYXMgaXQg
YWxsb3dzIG1vcmUgcG93ZXItc2F2aW5ncyBieSBjb21wbGV0ZSBzaHV0dGluZyBkb3duIGRpc3Bs
YXksCisJICogc28gdG8gZ3VhcmFudGVlIHRoaXMsIGludGVsX2RwX2RycnNfY29tcHV0ZV9jb25m
aWcoKSBtdXN0IGJlIGNhbGxlZAorCSAqIGFmdGVyIGludGVsX3Bzcl9jb21wdXRlX2NvbmZpZygp
LgorCSAqLworCWlmIChwaXBlX2NvbmZpZy0+aGFzX3BzcikKKwkJcmV0dXJuOworCisJaWYgKCFp
bnRlbF9jb25uZWN0b3ItPnBhbmVsLmRvd25jbG9ja19tb2RlIHx8CisJICAgIGRldl9wcml2LT5k
cnJzLnR5cGUgIT0gU0VBTUxFU1NfRFJSU19TVVBQT1JUKQorCQlyZXR1cm47CisKKwlwaXBlX2Nv
bmZpZy0+aGFzX2RycnMgPSB0cnVlOworCWludGVsX2xpbmtfY29tcHV0ZV9tX24ob3V0cHV0X2Jw
cCwgcGlwZV9jb25maWctPmxhbmVfY291bnQsCisJCQkgICAgICAgaW50ZWxfY29ubmVjdG9yLT5w
YW5lbC5kb3duY2xvY2tfbW9kZS0+Y2xvY2ssCisJCQkgICAgICAgcGlwZV9jb25maWctPnBvcnRf
Y2xvY2ssICZwaXBlX2NvbmZpZy0+ZHBfbTJfbjIsCisJCQkgICAgICAgY29uc3RhbnRfbiwgcGlw
ZV9jb25maWctPmZlY19lbmFibGUpOworfQorCiBpbnQKIGludGVsX2RwX2NvbXB1dGVfY29uZmln
KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyLAogCQkJc3RydWN0IGludGVsX2NydGNfc3Rh
dGUgKnBpcGVfY29uZmlnLApAQCAtMjYwNSw3ICsyNjMzLDYgQEAgaW50ZWxfZHBfY29tcHV0ZV9j
b25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJaWYgKHJldCkKIAkJcmV0dXJu
IHJldDsKIAotCXBpcGVfY29uZmlnLT5oYXNfZHJycyA9IGZhbHNlOwogCWlmICghaW50ZWxfZHBf
cG9ydF9oYXNfYXVkaW8oZGV2X3ByaXYsIHBvcnQpKQogCQlwaXBlX2NvbmZpZy0+aGFzX2F1ZGlv
ID0gZmFsc2U7CiAJZWxzZSBpZiAoaW50ZWxfY29ubl9zdGF0ZS0+Zm9yY2VfYXVkaW8gPT0gSERN
SV9BVURJT19BVVRPKQpAQCAtMjY1NywyMSArMjY4NCwxMiBAQCBpbnRlbF9kcF9jb21wdXRlX2Nv
bmZpZyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJCSAgICAgICAmcGlwZV9jb25m
aWctPmRwX21fbiwKIAkJCSAgICAgICBjb25zdGFudF9uLCBwaXBlX2NvbmZpZy0+ZmVjX2VuYWJs
ZSk7CiAKLQlpZiAoaW50ZWxfY29ubmVjdG9yLT5wYW5lbC5kb3duY2xvY2tfbW9kZSAhPSBOVUxM
ICYmCi0JCWRldl9wcml2LT5kcnJzLnR5cGUgPT0gU0VBTUxFU1NfRFJSU19TVVBQT1JUKSB7Ci0J
CQlwaXBlX2NvbmZpZy0+aGFzX2RycnMgPSB0cnVlOwotCQkJaW50ZWxfbGlua19jb21wdXRlX21f
bihvdXRwdXRfYnBwLAotCQkJCQkgICAgICAgcGlwZV9jb25maWctPmxhbmVfY291bnQsCi0JCQkJ
CSAgICAgICBpbnRlbF9jb25uZWN0b3ItPnBhbmVsLmRvd25jbG9ja19tb2RlLT5jbG9jaywKLQkJ
CQkJICAgICAgIHBpcGVfY29uZmlnLT5wb3J0X2Nsb2NrLAotCQkJCQkgICAgICAgJnBpcGVfY29u
ZmlnLT5kcF9tMl9uMiwKLQkJCQkJICAgICAgIGNvbnN0YW50X24sIHBpcGVfY29uZmlnLT5mZWNf
ZW5hYmxlKTsKLQl9Ci0KIAlpZiAoIUhBU19EREkoZGV2X3ByaXYpKQogCQlpbnRlbF9kcF9zZXRf
Y2xvY2soZW5jb2RlciwgcGlwZV9jb25maWcpOwogCiAJaW50ZWxfcHNyX2NvbXB1dGVfY29uZmln
KGludGVsX2RwLCBwaXBlX2NvbmZpZyk7CisJaW50ZWxfZHBfZHJyc19jb21wdXRlX2NvbmZpZyhp
bnRlbF9kcCwgcGlwZV9jb25maWcsIG91dHB1dF9icHAsCisJCQkJICAgICBjb25zdGFudF9uKTsK
IAlpbnRlbF9kcF9jb21wdXRlX3ZzY19zZHAoaW50ZWxfZHAsIHBpcGVfY29uZmlnLCBjb25uX3N0
YXRlKTsKIAlpbnRlbF9kcF9jb21wdXRlX2hkcl9tZXRhZGF0YV9pbmZvZnJhbWVfc2RwKGludGVs
X2RwLCBwaXBlX2NvbmZpZywgY29ubl9zdGF0ZSk7CiAKQEAgLTc3MzAsMTYgKzc3NDgsOCBAQCB2
b2lkIGludGVsX2VkcF9kcnJzX2VuYWJsZShzdHJ1Y3QgaW50ZWxfZHAgKmludGVsX2RwLAogewog
CXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGRwX3RvX2k5MTUoaW50ZWxfZHAp
OwogCi0JaWYgKCFjcnRjX3N0YXRlLT5oYXNfZHJycykgewotCQlkcm1fZGJnX2ttcygmZGV2X3By
aXYtPmRybSwgIlBhbmVsIGRvZXNuJ3Qgc3VwcG9ydCBEUlJTXG4iKTsKKwlpZiAoIWNydGNfc3Rh
dGUtPmhhc19kcnJzKQogCQlyZXR1cm47Ci0JfQotCi0JaWYgKGRldl9wcml2LT5wc3IuZW5hYmxl
ZCkgewotCQlkcm1fZGJnX2ttcygmZGV2X3ByaXYtPmRybSwKLQkJCSAgICAiUFNSIGVuYWJsZWQu
IE5vdCBlbmFibGluZyBEUlJTLlxuIik7Ci0JCXJldHVybjsKLQl9CiAKIAltdXRleF9sb2NrKCZk
ZXZfcHJpdi0+ZHJycy5tdXRleCk7CiAJaWYgKGRldl9wcml2LT5kcnJzLmRwKSB7Ci0tIAoyLjI4
LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVs
LWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

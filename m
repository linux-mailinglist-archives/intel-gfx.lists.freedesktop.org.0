Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id F26972116E8
	for <lists+intel-gfx@lfdr.de>; Thu,  2 Jul 2020 01:55:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 67BD76EA23;
	Wed,  1 Jul 2020 23:54:54 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EFB416E1E5
 for <intel-gfx@lists.freedesktop.org>; Wed,  1 Jul 2020 23:54:50 +0000 (UTC)
IronPort-SDR: rR0O9cjxqlfK7hLGmsuHjY1vDOfks50oIHg+Sh+tgiqg8ITiIAQhDBoinNikiVe11MhZXEBvwa
 w6gkkCkY7o3Q==
X-IronPort-AV: E=McAfee;i="6000,8403,9669"; a="164785952"
X-IronPort-AV: E=Sophos;i="5.75,302,1589266800"; d="scan'208";a="164785952"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by fmsmga101.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 01 Jul 2020 16:54:50 -0700
IronPort-SDR: RmJJb29jl44WC+hQ//GxF+F4ZYCRBIDErbA6TdG9J1CCNVqldSkVAkln4TUHNb3tDBm069ORji
 4ApZEnJWeqfQ==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.75,302,1589266800"; d="scan'208";a="356276344"
Received: from ldmartin1-desk.jf.intel.com ([10.165.21.151])
 by orsmga001.jf.intel.com with ESMTP; 01 Jul 2020 16:54:49 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  1 Jul 2020 16:53:15 -0700
Message-Id: <20200701235339.32608-5-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20200701235339.32608-1-lucas.demarchi@intel.com>
References: <20200701235339.32608-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3 04/28] drm/i915/dg1: add support for the
 master unit interrupt
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

REcxIGhhcyBtYXN0ZXIgdW5pdCBpbnRlcnJ1cHQgcmVnaXN0ZXIgd2hpY2ggaXMgdXNlZCB0byBp
bmRpY2F0ZSB0aGUKY29ycmVjdCBzb3VyY2Ugb2YgaW50ZXJydXB0LgoKdjI6IGZpeCBjb2Rpbmcg
c3R5bGUgb24gcmVnaXN0ZXIgZGVmaW5pdGlvbgoKQ2M6IFJhZGhha3Jpc2huYSBTcmlwYWRhIDxy
YWRoYWtyaXNobmEuc3JpcGFkYUBpbnRlbC5jb20+CkNjOiBEYW5pZWxlIFNwdXJpbyBDZXJhb2xv
IDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29tPgpDYzogTWF0dCBSb3BlciA8bWF0dGhl
dy5kLnJvcGVyQGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogTHVjYXMgRGUgTWFyY2hpIDxsdWNh
cy5kZW1hcmNoaUBpbnRlbC5jb20+ClJldmlld2VkLWJ5OiBKb3PDqSBSb2JlcnRvIGRlIFNvdXph
IDxqb3NlLnNvdXphQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rl
YnVnZnMuYyB8ICA0ICsrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYyAgICAgfCA1
NiArKysrKysrKysrKysrKysrKysrKysrKysrKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9yZWcuaCAgICAgfCAgNCArKysKIDMgZmlsZXMgY2hhbmdlZCwgNjEgaW5zZXJ0aW9ucygrKSwg
MyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rl
YnVnZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCmluZGV4IDljYTk0
YTQzNWI3NS4uYjc2YTYxZWMyMTkwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2RlYnVnZnMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYwpA
QCAtNDkyLDYgKzQ5MiwxMCBAQCBzdGF0aWMgaW50IGk5MTVfaW50ZXJydXB0X2luZm8oc3RydWN0
IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQogCQlzZXFfcHJpbnRmKG0sICJQQ1UgaW50ZXJydXB0
IGVuYWJsZTpcdCUwOHhcbiIsCiAJCQkgICBJOTE1X1JFQUQoR0VOOF9QQ1VfSUVSKSk7CiAJfSBl
bHNlIGlmIChJTlRFTF9HRU4oZGV2X3ByaXYpID49IDExKSB7CisJCWlmIChIQVNfTUFTVEVSX1VO
SVRfSVJRKGRldl9wcml2KSkKKwkJCXNlcV9wcmludGYobSwgIk1hc3RlciBVbml0IEludGVycnVw
dCBDb250cm9sOiAgJTA4eFxuIiwKKwkJCQkgICBJOTE1X1JFQUQoREcxX01TVFJfVU5JVF9JTlRS
KSk7CisKIAkJc2VxX3ByaW50ZihtLCAiTWFzdGVyIEludGVycnVwdCBDb250cm9sOiAgJTA4eFxu
IiwKIAkJCSAgIEk5MTVfUkVBRChHRU4xMV9HRlhfTVNUUl9JUlEpKTsKIApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfaXJxLmMKaW5kZXggNTYyYjQzZWQwNzdmLi40YzlkMGE0YTI0NzYgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9pcnEuYwpAQCAtMjU4NCw2ICsyNTg0LDQ2IEBAIHN0YXRpYyBpcnFyZXR1cm5fdCBnZW4x
MV9pcnFfaGFuZGxlcihpbnQgaXJxLCB2b2lkICphcmcpCiAJCQkJICAgZ2VuMTFfbWFzdGVyX2lu
dHJfZW5hYmxlKTsKIH0KIAorc3RhdGljIHUzMiBkZzFfbWFzdGVyX2ludHJfZGlzYWJsZV9hbmRf
YWNrKHZvaWQgX19pb21lbSAqIGNvbnN0IHJlZ3MpCit7CisJdTMyIHZhbDsKKworCS8qIEZpcnN0
IGRpc2FibGUgaW50ZXJydXB0cyAqLworCXJhd19yZWdfd3JpdGUocmVncywgREcxX01TVFJfVU5J
VF9JTlRSLCAwKTsKKworCS8qIEdldCB0aGUgaW5kaWNhdGlvbiBsZXZlbHMgYW5kIGFjayB0aGUg
bWFzdGVyIHVuaXQgKi8KKwl2YWwgPSByYXdfcmVnX3JlYWQocmVncywgREcxX01TVFJfVU5JVF9J
TlRSKTsKKwlpZiAodW5saWtlbHkoIXZhbCkpCisJCXJldHVybiAwOworCisJcmF3X3JlZ193cml0
ZShyZWdzLCBERzFfTVNUUl9VTklUX0lOVFIsIHZhbCk7CisKKwkvKgorCSAqIE5vdyB3aXRoIG1h
c3RlciBkaXNhYmxlZCwgZ2V0IGEgc2FtcGxlIG9mIGxldmVsIGluZGljYXRpb25zCisJICogZm9y
IHRoaXMgaW50ZXJydXB0IGFuZCBhY2sgdGhlbSByaWdodCBhd2F5IC0gd2Uga2VlcCBHRU4xMV9N
QVNURVJfSVJRCisJICogb3V0IGFzIHRoaXMgYml0IGRvZXNuJ3QgZXhpc3QgYW55bW9yZSBmb3Ig
REcxCisJICovCisJdmFsID0gcmF3X3JlZ19yZWFkKHJlZ3MsIEdFTjExX0dGWF9NU1RSX0lSUSkg
JiB+R0VOMTFfTUFTVEVSX0lSUTsKKwlpZiAodW5saWtlbHkoIXZhbCkpCisJCXJldHVybiAwOwor
CisJcmF3X3JlZ193cml0ZShyZWdzLCBHRU4xMV9HRlhfTVNUUl9JUlEsIHZhbCk7CisKKwlyZXR1
cm4gdmFsOworfQorCitzdGF0aWMgaW5saW5lIHZvaWQgZGcxX21hc3Rlcl9pbnRyX2VuYWJsZSh2
b2lkIF9faW9tZW0gKiBjb25zdCByZWdzKQoreworCXJhd19yZWdfd3JpdGUocmVncywgREcxX01T
VFJfVU5JVF9JTlRSLCBERzFfTVNUUl9JUlEpOworfQorCitzdGF0aWMgaXJxcmV0dXJuX3QgZGcx
X2lycV9oYW5kbGVyKGludCBpcnEsIHZvaWQgKmFyZykKK3sKKwlyZXR1cm4gX19nZW4xMV9pcnFf
aGFuZGxlcihhcmcsCisJCQkJICAgZGcxX21hc3Rlcl9pbnRyX2Rpc2FibGVfYW5kX2FjaywKKwkJ
CQkgICBkZzFfbWFzdGVyX2ludHJfZW5hYmxlKTsKK30KKwogLyogQ2FsbGVkIGZyb20gZHJtIGdl
bmVyaWMgY29kZSwgcGFzc2VkICdjcnRjJyB3aGljaAogICogd2UgdXNlIGFzIGEgcGlwZSBpbmRl
eAogICovCkBAIC0yOTIwLDcgKzI5NjAsMTAgQEAgc3RhdGljIHZvaWQgZ2VuMTFfaXJxX3Jlc2V0
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIHsKIAlzdHJ1Y3QgaW50ZWxfdW5j
b3JlICp1bmNvcmUgPSAmZGV2X3ByaXYtPnVuY29yZTsKIAotCWdlbjExX21hc3Rlcl9pbnRyX2Rp
c2FibGUoZGV2X3ByaXYtPnVuY29yZS5yZWdzKTsKKwlpZiAoSEFTX01BU1RFUl9VTklUX0lSUShk
ZXZfcHJpdikpCisJCWRnMV9tYXN0ZXJfaW50cl9kaXNhYmxlX2FuZF9hY2soZGV2X3ByaXYtPnVu
Y29yZS5yZWdzKTsKKwllbHNlCisJCWdlbjExX21hc3Rlcl9pbnRyX2Rpc2FibGUoZGV2X3ByaXYt
PnVuY29yZS5yZWdzKTsKIAogCWdlbjExX2d0X2lycV9yZXNldCgmZGV2X3ByaXYtPmd0KTsKIAln
ZW4xMV9kaXNwbGF5X2lycV9yZXNldChkZXZfcHJpdik7CkBAIC0zNTE3LDggKzM1NjAsMTMgQEAg
c3RhdGljIHZvaWQgZ2VuMTFfaXJxX3Bvc3RpbnN0YWxsKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdikKIAogCUk5MTVfV1JJVEUoR0VOMTFfRElTUExBWV9JTlRfQ1RMLCBHRU4xMV9E
SVNQTEFZX0lSUV9FTkFCTEUpOwogCi0JZ2VuMTFfbWFzdGVyX2ludHJfZW5hYmxlKHVuY29yZS0+
cmVncyk7Ci0JUE9TVElOR19SRUFEKEdFTjExX0dGWF9NU1RSX0lSUSk7CisJaWYgKEhBU19NQVNU
RVJfVU5JVF9JUlEoZGV2X3ByaXYpKSB7CisJCWRnMV9tYXN0ZXJfaW50cl9lbmFibGUodW5jb3Jl
LT5yZWdzKTsKKwkJUE9TVElOR19SRUFEKERHMV9NU1RSX1VOSVRfSU5UUik7CisJfSBlbHNlIHsK
KwkJZ2VuMTFfbWFzdGVyX2ludHJfZW5hYmxlKHVuY29yZS0+cmVncyk7CisJCVBPU1RJTkdfUkVB
RChHRU4xMV9HRlhfTVNUUl9JUlEpOworCX0KIH0KIAogc3RhdGljIHZvaWQgY2hlcnJ5dmlld19p
cnFfcG9zdGluc3RhbGwoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQpAQCAtNDA0
Myw2ICs0MDkxLDggQEAgc3RhdGljIGlycV9oYW5kbGVyX3QgaW50ZWxfaXJxX2hhbmRsZXIoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQllbHNlCiAJCQlyZXR1cm4gaTh4eF9p
cnFfaGFuZGxlcjsKIAl9IGVsc2UgeworCQlpZiAoSEFTX01BU1RFUl9VTklUX0lSUShkZXZfcHJp
dikpCisJCQlyZXR1cm4gZGcxX2lycV9oYW5kbGVyOwogCQlpZiAoSU5URUxfR0VOKGRldl9wcml2
KSA+PSAxMSkKIAkJCXJldHVybiBnZW4xMV9pcnFfaGFuZGxlcjsKIAkJZWxzZSBpZiAoSU5URUxf
R0VOKGRldl9wcml2KSA+PSA4KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9yZWcuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKaW5kZXggOWQ2NTM2YWZj
OTRiLi5lZDFiODE1MWNlNzIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
cmVnLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaApAQCAtNzcyMyw2ICs3
NzIzLDEwIEBAIGVudW0gewogI2RlZmluZSAgR0VOMTFfR1RfRFcxX0lSUQkJKDEgPDwgMSkKICNk
ZWZpbmUgIEdFTjExX0dUX0RXMF9JUlEJCSgxIDw8IDApCiAKKyNkZWZpbmUgREcxX01TVFJfVU5J
VF9JTlRSCQlfTU1JTygweDE5MDAwOCkKKyNkZWZpbmUgICBERzFfTVNUUl9JUlEJCQlSRUdfQklU
KDMxKQorI2RlZmluZSAgIERHMV9NU1RSX1VOSVQodSkJCVJFR19CSVQodSkKKwogI2RlZmluZSBH
RU4xMV9ESVNQTEFZX0lOVF9DVEwJCV9NTUlPKDB4NDQyMDApCiAjZGVmaW5lICBHRU4xMV9ESVNQ
TEFZX0lSUV9FTkFCTEUJKDEgPDwgMzEpCiAjZGVmaW5lICBHRU4xMV9BVURJT19DT0RFQ19JUlEJ
CSgxIDw8IDI0KQotLSAKMi4yNi4yCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVl
ZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9pbnRlbC1nZngK

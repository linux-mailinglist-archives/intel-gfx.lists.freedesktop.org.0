Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5670464A1C
	for <lists+intel-gfx@lfdr.de>; Wed, 10 Jul 2019 17:52:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4AD176E108;
	Wed, 10 Jul 2019 15:52:40 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3DE6E6E10A
 for <intel-gfx@lists.freedesktop.org>; Wed, 10 Jul 2019 15:52:39 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Jul 2019 08:52:38 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,475,1557212400"; d="scan'208";a="186168398"
Received: from irsmsx102.ger.corp.intel.com ([163.33.3.155])
 by fmsmga001.fm.intel.com with ESMTP; 10 Jul 2019 08:52:37 -0700
Received: from localhost (172.28.172.64) by IRSMSX102.ger.corp.intel.com
 (163.33.3.155) with Microsoft SMTP Server (TLS) id 14.3.439.0; Wed, 10 Jul
 2019 16:52:36 +0100
Date: Wed, 10 Jul 2019 17:52:34 +0200
From: =?utf-8?Q?Micha=C5=82?= Winiarski <michal.winiarski@intel.com>
To: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Message-ID: <20190710155234.zzvnvtvf7xscpctw@mwiniars-main.ger.corp.intel.com>
References: <20190710005437.3496-1-daniele.ceraolospurio@intel.com>
 <20190710005437.3496-3-daniele.ceraolospurio@intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190710005437.3496-3-daniele.ceraolospurio@intel.com>
Organization: Intel Technology Poland sp. z o.o. - KRS 101882 - ul.
 Slowackiego 173, 80-298 Gdansk
User-Agent: NeoMutt/20180716
X-Originating-IP: [172.28.172.64]
Subject: Re: [Intel-gfx] [PATCH 02/12] drm/i915/guc: simplify guc client
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Matthew Brost <MatthewBrostmatthew.brost@intel.com>,
 intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVHVlLCBKdWwgMDksIDIwMTkgYXQgMDU6NTQ6MjdQTSAtMDcwMCwgRGFuaWVsZSBDZXJhb2xv
IFNwdXJpbyB3cm90ZToKPiBXZSBvcmlnaW5hbGx5IGFkZGVkIHN1cHBvcnQsIGluIHNvbWUgY2Fz
ZXMgcGFydGlhbCwgZm9yIGRpZmZlcmVudCBtb2Rlcwo+IG9mIG9wZXJhdGlvbnMgdmlhIGd1YyBj
bGllbnRzOgo+IAo+IC0gcHJveHkgdnMgZGlyZWN0IHN1Ym1pc3Npb247Cj4gLSB2YXJpYWJsZSBl
bmdpbmUgbWFzayBwZXItY2xpZW50Lgo+IAo+IFdlIG9ubHkgZXZlciB1c2VkIG9uZSBmbG93IChh
bGwgc3VibWlzc2lvbnMgdmlhIGEgc2luZ2xlIHByb3h5KSwgc28gdGhlCj4gb3RoZXIgY29kZSBw
YXRocyBoYXZlbid0IGJlZW4gZXhlcmNpc2VkIGFuZCBhcmUgbW9zdCBsaWtlbHkKPiBub24tZnVu
Y3Rpb25hbC4gVGhlIGd1YyBmaXJtd2FyZSBpbnRlcmZhY2UgaXMgYWxzbyBpbiB0aGUgcHJvY2Vz
cyBvZgo+IGJlaW5nIHVwZGF0ZWQgdG8gYmV0dGVyIGZpdCB0aGUgaTkxNSBmbG93IGFuZCBvdXIg
Y2xpZW50IGFic3RyYWN0aW9uCj4gd2lsbCBuZWVkIHRvIGNoYW5nZSBhY2NvcmRpbmdseSAob3Ig
cG9zc2libHkgZ28gYXdheSBlbnRpcmVseSksIHNvIHRoZXNlCj4gb2xkIHVudXNlZCBwYXRocyBj
YW4gYmUgY29uc2lkZXJlZCBkZWFkIGFuZCByZW1vdmVkLgo+IAo+IFNpZ25lZC1vZmYtYnk6IERh
bmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5jb20+Cj4g
Q2M6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+IENjOiBNaWNoYWwg
V2FqZGVjemtvIDxtaWNoYWwud2FqZGVjemtvQGludGVsLmNvbT4KPiBDYzogTWF0dGhldyBCcm9z
dCA8bWF0dGhldy5icm9zdEBpbnRlbC5jb20+Cj4gQ2M6IEpvaG4gSGFycmlzb24gPEpvaG4uQy5I
YXJyaXNvbkBJbnRlbC5jb20+Cj4gQWNrZWQtYnk6IE1hdHRoZXcgQnJvc3QgPE1hdHRoZXcgQnJv
c3QgPG1hdHRoZXcuYnJvc3RAaW50ZWwuY29tPgoKZHJtL2k5MTUvZ3VjOiBzaW1wbGlmeSBndWMg
Y2xpZW50CiAgICAgICAgICAgICAgXiBTZW50ZW5jZSBjYXNlCgpSZXZpZXdlZC1ieTogTWljaGHF
giBXaW5pYXJza2kgPG1pY2hhbC53aW5pYXJza2lAaW50ZWwuY29tPgoKLU1pY2hhxYIKCj4gLS0t
Cj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jICAgICAgICAgfCAgMyArLQo+
ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfc3VibWlzc2lvbi5jIHwgNzMgKystLS0t
LS0tLS0tLS0tLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19zdWJtaXNz
aW9uLmggfCAgMiAtCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pbnRlbF9ndWMu
YyAgfCAxMiArLS0tCj4gIDQgZmlsZXMgY2hhbmdlZCwgOCBpbnNlcnRpb25zKCspLCA4MiBkZWxl
dGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1
Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYwo+IGluZGV4IGI0ZDE5
NTY3Nzg3Ny4uZGM2NWE2MTMxYTViIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZGVidWdmcy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2Zz
LmMKPiBAQCAtMjAyMSw3ICsyMDIxLDYgQEAgc3RhdGljIGludCBpOTE1X2d1Y19zdGFnZV9wb29s
KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkKPiAgCXN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiA9IG5vZGVfdG9faTkxNShtLT5wcml2YXRlKTsKPiAgCWNvbnN0IHN0cnVj
dCBpbnRlbF9ndWMgKmd1YyA9ICZkZXZfcHJpdi0+Z3VjOwo+ICAJc3RydWN0IGd1Y19zdGFnZV9k
ZXNjICpkZXNjID0gZ3VjLT5zdGFnZV9kZXNjX3Bvb2xfdmFkZHI7Cj4gLQlzdHJ1Y3QgaW50ZWxf
Z3VjX2NsaWVudCAqY2xpZW50ID0gZ3VjLT5leGVjYnVmX2NsaWVudDsKPiAgCWludGVsX2VuZ2lu
ZV9tYXNrX3QgdG1wOwo+ICAJaW50IGluZGV4Owo+ICAKPiBAQCAtMjA1MSw3ICsyMDUwLDcgQEAg
c3RhdGljIGludCBpOTE1X2d1Y19zdGFnZV9wb29sKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAq
ZGF0YSkKPiAgCQkJICAgZGVzYy0+d3FfYWRkciwgZGVzYy0+d3Ffc2l6ZSk7Cj4gIAkJc2VxX3B1
dGMobSwgJ1xuJyk7Cj4gIAo+IC0JCWZvcl9lYWNoX2VuZ2luZV9tYXNrZWQoZW5naW5lLCBkZXZf
cHJpdiwgY2xpZW50LT5lbmdpbmVzLCB0bXApIHsKPiArCQlmb3JfZWFjaF9lbmdpbmUoZW5naW5l
LCBkZXZfcHJpdiwgdG1wKSB7Cj4gIAkJCXUzMiBndWNfZW5naW5lX2lkID0gZW5naW5lLT5ndWNf
aWQ7Cj4gIAkJCXN0cnVjdCBndWNfZXhlY2xpc3RfY29udGV4dCAqbHJjID0KPiAgCQkJCQkJJmRl
c2MtPmxyY1tndWNfZW5naW5lX2lkXTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1
Y19zdWJtaXNzaW9uLmMKPiBpbmRleCA4NTIwYmIyMjQxNzUuLjMwNjkyZjgyODliZCAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfc3VibWlzc2lvbi5jCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uYwo+IEBAIC0zNjMs
MTAgKzM2Myw3IEBAIHN0YXRpYyB2b2lkIGd1Y19zdGFnZV9kZXNjX3Bvb2xfZGVzdHJveShzdHJ1
Y3QgaW50ZWxfZ3VjICpndWMpCj4gIHN0YXRpYyB2b2lkIGd1Y19zdGFnZV9kZXNjX2luaXQoc3Ry
dWN0IGludGVsX2d1Y19jbGllbnQgKmNsaWVudCkKPiAgewo+ICAJc3RydWN0IGludGVsX2d1YyAq
Z3VjID0gY2xpZW50LT5ndWM7Cj4gLQlzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4ID0gY2xp
ZW50LT5vd25lcjsKPiAtCXN0cnVjdCBpOTE1X2dlbV9lbmdpbmVzX2l0ZXIgaXQ7Cj4gIAlzdHJ1
Y3QgZ3VjX3N0YWdlX2Rlc2MgKmRlc2M7Cj4gLQlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2U7Cj4g
IAl1MzIgZ2Z4X2FkZHI7Cj4gIAo+ICAJZGVzYyA9IF9fZ2V0X3N0YWdlX2Rlc2MoY2xpZW50KTsK
PiBAQCAtMzgwLDU1ICszNzcsNiBAQCBzdGF0aWMgdm9pZCBndWNfc3RhZ2VfZGVzY19pbml0KHN0
cnVjdCBpbnRlbF9ndWNfY2xpZW50ICpjbGllbnQpCj4gIAlkZXNjLT5wcmlvcml0eSA9IGNsaWVu
dC0+cHJpb3JpdHk7Cj4gIAlkZXNjLT5kYl9pZCA9IGNsaWVudC0+ZG9vcmJlbGxfaWQ7Cj4gIAo+
IC0JZm9yX2VhY2hfZ2VtX2VuZ2luZShjZSwgaTkxNV9nZW1fY29udGV4dF9sb2NrX2VuZ2luZXMo
Y3R4KSwgaXQpIHsKPiAtCQlzdHJ1Y3QgZ3VjX2V4ZWNsaXN0X2NvbnRleHQgKmxyYzsKPiAtCj4g
LQkJaWYgKCEoY2UtPmVuZ2luZS0+bWFzayAmIGNsaWVudC0+ZW5naW5lcykpCj4gLQkJCWNvbnRp
bnVlOwo+IC0KPiAtCQkvKiBUT0RPOiBXZSBoYXZlIGEgZGVzaWduIGlzc3VlIHRvIGJlIHNvbHZl
ZCBoZXJlLiBPbmx5IHdoZW4gd2UKPiAtCQkgKiByZWNlaXZlIHRoZSBmaXJzdCBiYXRjaCwgd2Ug
a25vdyB3aGljaCBlbmdpbmUgaXMgdXNlZCBieSB0aGUKPiAtCQkgKiB1c2VyLiBCdXQgaGVyZSBH
dUMgZXhwZWN0cyB0aGUgbHJjIGFuZCByaW5nIHRvIGJlIHBpbm5lZC4gSXQKPiAtCQkgKiBpcyBu
b3QgYW4gaXNzdWUgZm9yIGRlZmF1bHQgY29udGV4dCwgd2hpY2ggaXMgdGhlIG9ubHkgb25lCj4g
LQkJICogZm9yIG5vdyB3aG8gb3ducyBhIEd1QyBjbGllbnQuIEJ1dCBmb3IgZnV0dXJlIG93bmVy
IG9mIEd1Qwo+IC0JCSAqIGNsaWVudCwgbmVlZCB0byBtYWtlIHN1cmUgbHJjIGlzIHBpbm5lZCBw
cmlvciB0byBlbnRlciBoZXJlLgo+IC0JCSAqLwo+IC0JCWlmICghY2UtPnN0YXRlKQo+IC0JCQli
cmVhazsJLyogWFhYOiBjb250aW51ZT8gKi8KPiAtCj4gLQkJLyoKPiAtCQkgKiBYWFg6IFdoZW4g
dGhpcyBpcyBhIEdVQ19TVEFHRV9ERVNDX0FUVFJfS0VSTkVMIGNsaWVudCAocHJveHkKPiAtCQkg
KiBzdWJtaXNzaW9uIG9yLCBpbiBvdGhlciB3b3Jkcywgbm90IHVzaW5nIGEgZGlyZWN0IHN1Ym1p
c3Npb24KPiAtCQkgKiBtb2RlbCkgdGhlIEtNRCdzIExSQ0EgaXMgbm90IHVzZWQgZm9yIGFueSB3
b3JrIHN1Ym1pc3Npb24uCj4gLQkJICogSW5zdGVhZCwgdGhlIEd1QyB1c2VzIHRoZSBMUkNBIG9m
IHRoZSB1c2VyIG1vZGUgY29udGV4dCAoc2VlCj4gLQkJICogZ3VjX2FkZF9yZXF1ZXN0IGJlbG93
KS4KPiAtCQkgKi8KPiAtCQlscmMgPSAmZGVzYy0+bHJjW2NlLT5lbmdpbmUtPmd1Y19pZF07Cj4g
LQkJbHJjLT5jb250ZXh0X2Rlc2MgPSBsb3dlcl8zMl9iaXRzKGNlLT5scmNfZGVzYyk7Cj4gLQo+
IC0JCS8qIFRoZSBzdGF0ZSBwYWdlIGlzIGFmdGVyIFBQSFdTUCAqLwo+IC0JCWxyYy0+cmluZ19s
cmNhID0gaW50ZWxfZ3VjX2dndHRfb2Zmc2V0KGd1YywgY2UtPnN0YXRlKSArCj4gLQkJCQkgTFJD
X1NUQVRFX1BOICogUEFHRV9TSVpFOwo+IC0KPiAtCQkvKiBYWFg6IEluIGRpcmVjdCBzdWJtaXNz
aW9uLCB0aGUgR3VDIHdhbnRzIHRoZSBIVyBjb250ZXh0IGlkCj4gLQkJICogaGVyZS4gSW4gcHJv
eHkgc3VibWlzc2lvbiwgaXQgd2FudHMgdGhlIHN0YWdlIGlkCj4gLQkJICovCj4gLQkJbHJjLT5j
b250ZXh0X2lkID0gKGNsaWVudC0+c3RhZ2VfaWQgPDwgR1VDX0VMQ19DVFhJRF9PRkZTRVQpIHwK
PiAtCQkJCShjZS0+ZW5naW5lLT5ndWNfaWQgPDwgR1VDX0VMQ19FTkdJTkVfT0ZGU0VUKTsKPiAt
Cj4gLQkJbHJjLT5yaW5nX2JlZ2luID0gaW50ZWxfZ3VjX2dndHRfb2Zmc2V0KGd1YywgY2UtPnJp
bmctPnZtYSk7Cj4gLQkJbHJjLT5yaW5nX2VuZCA9IGxyYy0+cmluZ19iZWdpbiArIGNlLT5yaW5n
LT5zaXplIC0gMTsKPiAtCQlscmMtPnJpbmdfbmV4dF9mcmVlX2xvY2F0aW9uID0gbHJjLT5yaW5n
X2JlZ2luOwo+IC0JCWxyYy0+cmluZ19jdXJyZW50X3RhaWxfcG9pbnRlcl92YWx1ZSA9IDA7Cj4g
LQo+IC0JCWRlc2MtPmVuZ2luZXNfdXNlZCB8PSBCSVQoY2UtPmVuZ2luZS0+Z3VjX2lkKTsKPiAt
CX0KPiAtCWk5MTVfZ2VtX2NvbnRleHRfdW5sb2NrX2VuZ2luZXMoY3R4KTsKPiAtCj4gLQlEUk1f
REVCVUdfRFJJVkVSKCJIb3N0IGVuZ2luZXMgMHgleCA9PiBHdUMgZW5naW5lcyB1c2VkIDB4JXhc
biIsCj4gLQkJCSBjbGllbnQtPmVuZ2luZXMsIGRlc2MtPmVuZ2luZXNfdXNlZCk7Cj4gLQlXQVJO
X09OKGRlc2MtPmVuZ2luZXNfdXNlZCA9PSAwKTsKPiAtCj4gIAkvKgo+ICAJICogVGhlIGRvb3Ji
ZWxsLCBwcm9jZXNzIGRlc2NyaXB0b3IsIGFuZCB3b3JrcXVldWUgYXJlIGFsbCBwYXJ0cwo+ICAJ
ICogb2YgdGhlIGNsaWVudCBvYmplY3QsIHdoaWNoIHRoZSBHdUMgd2lsbCByZWZlcmVuY2Ugdmlh
IHRoZSBHR1RUCj4gQEAgLTgzNiw4ICs3ODQsNyBAQCBzdGF0aWMgYm9vbCBndWNfdmVyaWZ5X2Rv
b3JiZWxscyhzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCj4gIAo+ICAvKioKPiAgICogZ3VjX2NsaWVu
dF9hbGxvYygpIC0gQWxsb2NhdGUgYW4gaW50ZWxfZ3VjX2NsaWVudAo+IC0gKiBAZGV2X3ByaXY6
CWRyaXZlciBwcml2YXRlIGRhdGEgc3RydWN0dXJlCj4gLSAqIEBlbmdpbmVzOglUaGUgc2V0IG9m
IGVuZ2luZXMgdG8gZW5hYmxlIGZvciB0aGlzIGNsaWVudAo+ICsgKiBAZ3VjOgl0aGUgaW50ZWxf
Z3VjIHN0cnVjdHVyZQo+ICAgKiBAcHJpb3JpdHk6CWZvdXIgbGV2ZWxzIHByaW9yaXR5IF9DUklU
SUNBTCwgX0hJR0gsIF9OT1JNQUwgYW5kIF9MT1cKPiAgICoJCVRoZSBrZXJuZWwgY2xpZW50IHRv
IHJlcGxhY2UgRXhlY0xpc3Qgc3VibWlzc2lvbiBpcyBjcmVhdGVkIHdpdGgKPiAgICoJCU5PUk1B
TCBwcmlvcml0eS4gUHJpb3JpdHkgb2YgYSBjbGllbnQgZm9yIHNjaGVkdWxlciBjYW4gYmUgSElH
SCwKPiBAQCAtODQ4LDEzICs3OTUsOSBAQCBzdGF0aWMgYm9vbCBndWNfdmVyaWZ5X2Rvb3JiZWxs
cyhzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCj4gICAqIFJldHVybjoJQW4gaW50ZWxfZ3VjX2NsaWVu
dCBvYmplY3QgaWYgc3VjY2VzcywgZWxzZSBOVUxMLgo+ICAgKi8KPiAgc3RhdGljIHN0cnVjdCBp
bnRlbF9ndWNfY2xpZW50ICoKPiAtZ3VjX2NsaWVudF9hbGxvYyhzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYsCj4gLQkJIHUzMiBlbmdpbmVzLAo+IC0JCSB1MzIgcHJpb3JpdHksCj4g
LQkJIHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCj4gK2d1Y19jbGllbnRfYWxsb2Moc3Ry
dWN0IGludGVsX2d1YyAqZ3VjLCB1MzIgcHJpb3JpdHkpCj4gIHsKPiAgCXN0cnVjdCBpbnRlbF9n
dWNfY2xpZW50ICpjbGllbnQ7Cj4gLQlzdHJ1Y3QgaW50ZWxfZ3VjICpndWMgPSAmZGV2X3ByaXYt
Pmd1YzsKPiAgCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOwo+ICAJdm9pZCAqdmFkZHI7Cj4gIAlpbnQg
cmV0Owo+IEBAIC04NjQsOCArODA3LDYgQEAgZ3VjX2NsaWVudF9hbGxvYyhzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gIAkJcmV0dXJuIEVSUl9QVFIoLUVOT01FTSk7Cj4gIAo+
ICAJY2xpZW50LT5ndWMgPSBndWM7Cj4gLQljbGllbnQtPm93bmVyID0gY3R4Owo+IC0JY2xpZW50
LT5lbmdpbmVzID0gZW5naW5lczsKPiAgCWNsaWVudC0+cHJpb3JpdHkgPSBwcmlvcml0eTsKPiAg
CWNsaWVudC0+ZG9vcmJlbGxfaWQgPSBHVUNfRE9PUkJFTExfSU5WQUxJRDsKPiAgCXNwaW5fbG9j
a19pbml0KCZjbGllbnQtPndxX2xvY2spOwo+IEBAIC05MTAsOCArODUxLDggQEAgZ3VjX2NsaWVu
dF9hbGxvYyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gIAllbHNlCj4gIAkJ
Y2xpZW50LT5wcm9jX2Rlc2Nfb2Zmc2V0ID0gKEdVQ19EQl9TSVpFIC8gMik7Cj4gIAo+IC0JRFJN
X0RFQlVHX0RSSVZFUigibmV3IHByaW9yaXR5ICV1IGNsaWVudCAlcCBmb3IgZW5naW5lKHMpIDB4
JXg6IHN0YWdlX2lkICV1XG4iLAo+IC0JCQkgcHJpb3JpdHksIGNsaWVudCwgY2xpZW50LT5lbmdp
bmVzLCBjbGllbnQtPnN0YWdlX2lkKTsKPiArCURSTV9ERUJVR19EUklWRVIoIm5ldyBwcmlvcml0
eSAldSBjbGllbnQgJXA6IHN0YWdlX2lkICV1XG4iLAo+ICsJCQkgcHJpb3JpdHksIGNsaWVudCwg
Y2xpZW50LT5zdGFnZV9pZCk7Cj4gIAlEUk1fREVCVUdfRFJJVkVSKCJkb29yYmVsbCBpZCAldSwg
Y2FjaGVsaW5lIG9mZnNldCAweCVseFxuIiwKPiAgCQkJIGNsaWVudC0+ZG9vcmJlbGxfaWQsIGNs
aWVudC0+ZG9vcmJlbGxfb2Zmc2V0KTsKPiAgCj4gQEAgLTk1MSwxNSArODkyLDExIEBAIHN0YXRp
YyBpbmxpbmUgYm9vbCBjdHhfc2F2ZV9yZXN0b3JlX2Rpc2FibGVkKHN0cnVjdCBpbnRlbF9jb250
ZXh0ICpjZSkKPiAgCj4gIHN0YXRpYyBpbnQgZ3VjX2NsaWVudHNfY3JlYXRlKHN0cnVjdCBpbnRl
bF9ndWMgKmd1YykKPiAgewo+IC0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0g
Z3VjX3RvX2k5MTUoZ3VjKTsKPiAgCXN0cnVjdCBpbnRlbF9ndWNfY2xpZW50ICpjbGllbnQ7Cj4g
IAo+ICAJR0VNX0JVR19PTihndWMtPmV4ZWNidWZfY2xpZW50KTsKPiAgCj4gLQljbGllbnQgPSBn
dWNfY2xpZW50X2FsbG9jKGRldl9wcml2LAo+IC0JCQkJICBJTlRFTF9JTkZPKGRldl9wcml2KS0+
ZW5naW5lX21hc2ssCj4gLQkJCQkgIEdVQ19DTElFTlRfUFJJT1JJVFlfS01EX05PUk1BTCwKPiAt
CQkJCSAgZGV2X3ByaXYtPmtlcm5lbF9jb250ZXh0KTsKPiArCWNsaWVudCA9IGd1Y19jbGllbnRf
YWxsb2MoZ3VjLCBHVUNfQ0xJRU5UX1BSSU9SSVRZX0tNRF9OT1JNQUwpOwo+ICAJaWYgKElTX0VS
UihjbGllbnQpKSB7Cj4gIAkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gY3JlYXRlIEd1QyBjbGllbnQg
Zm9yIHN1Ym1pc3Npb24hXG4iKTsKPiAgCQlyZXR1cm4gUFRSX0VSUihjbGllbnQpOwo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfc3VibWlzc2lvbi5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3VjX3N1Ym1pc3Npb24uaAo+IGluZGV4IDdkODIzYTUx
M2I5Yy4uODdhMzhjYjZmYWYzIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2lu
dGVsX2d1Y19zdWJtaXNzaW9uLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9n
dWNfc3VibWlzc2lvbi5oCj4gQEAgLTU4LDExICs1OCw5IEBAIHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlOwo+ICBzdHJ1Y3QgaW50ZWxfZ3VjX2NsaWVudCB7Cj4gIAlzdHJ1Y3QgaTkxNV92bWEgKnZt
YTsKPiAgCXZvaWQgKnZhZGRyOwo+IC0Jc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKm93bmVyOwo+
ICAJc3RydWN0IGludGVsX2d1YyAqZ3VjOwo+ICAKPiAgCS8qIGJpdG1hcCBvZiAoaG9zdCkgZW5n
aW5lIGlkcyAqLwo+IC0JdTMyIGVuZ2luZXM7Cj4gIAl1MzIgcHJpb3JpdHk7Cj4gIAl1MzIgc3Rh
Z2VfaWQ7Cj4gIAl1MzIgcHJvY19kZXNjX29mZnNldDsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX2d1Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
c2VsZnRlc3RzL2ludGVsX2d1Yy5jCj4gaW5kZXggMWExOTE1ZTQ0ZjZiLi42Y2E3NmY1YTk4ZDQg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX2d1Yy5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2ludGVsX2d1Yy5jCj4gQEAg
LTEwNSwxMiArMTA1LDcgQEAgc3RhdGljIGludCByaW5nX2Rvb3JiZWxsX25vcChzdHJ1Y3QgaW50
ZWxfZ3VjX2NsaWVudCAqY2xpZW50KQo+ICAgKi8KPiAgc3RhdGljIGludCB2YWxpZGF0ZV9jbGll
bnQoc3RydWN0IGludGVsX2d1Y19jbGllbnQgKmNsaWVudCwgaW50IGNsaWVudF9wcmlvcml0eSkK
PiAgewo+IC0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gZ3VjX3RvX2k5MTUo
Y2xpZW50LT5ndWMpOwo+IC0Jc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eF9vd25lciA9IGRl
dl9wcml2LT5rZXJuZWxfY29udGV4dDsKPiAtCj4gLQlpZiAoY2xpZW50LT5vd25lciAhPSBjdHhf
b3duZXIgfHwKPiAtCSAgICBjbGllbnQtPmVuZ2luZXMgIT0gSU5URUxfSU5GTyhkZXZfcHJpdikt
PmVuZ2luZV9tYXNrIHx8Cj4gLQkgICAgY2xpZW50LT5wcmlvcml0eSAhPSBjbGllbnRfcHJpb3Jp
dHkgfHwKPiArCWlmIChjbGllbnQtPnByaW9yaXR5ICE9IGNsaWVudF9wcmlvcml0eSB8fAo+ICAJ
ICAgIGNsaWVudC0+ZG9vcmJlbGxfaWQgPT0gR1VDX0RPT1JCRUxMX0lOVkFMSUQpCj4gIAkJcmV0
dXJuIC1FSU5WQUw7Cj4gIAllbHNlCj4gQEAgLTI0NywxMCArMjQyLDcgQEAgc3RhdGljIGludCBp
Z3RfZ3VjX2Rvb3JiZWxscyh2b2lkICphcmcpCj4gIAkJZ290byB1bmxvY2s7Cj4gIAo+ICAJZm9y
IChpID0gMDsgaSA8IEFUVEVNUFRTOyBpKyspIHsKPiAtCQljbGllbnRzW2ldID0gZ3VjX2NsaWVu
dF9hbGxvYyhkZXZfcHJpdiwKPiAtCQkJCQkgICAgICBJTlRFTF9JTkZPKGRldl9wcml2KS0+ZW5n
aW5lX21hc2ssCj4gLQkJCQkJICAgICAgaSAlIEdVQ19DTElFTlRfUFJJT1JJVFlfTlVNLAo+IC0J
CQkJCSAgICAgIGRldl9wcml2LT5rZXJuZWxfY29udGV4dCk7Cj4gKwkJY2xpZW50c1tpXSA9IGd1
Y19jbGllbnRfYWxsb2MoZ3VjLCBpICUgR1VDX0NMSUVOVF9QUklPUklUWV9OVU0pOwo+ICAKPiAg
CQlpZiAoIWNsaWVudHNbaV0pIHsKPiAgCQkJcHJfZXJyKCJbJWRdIE5vIGd1YyBjbGllbnRcbiIs
IGkpOwo+IC0tIAo+IDIuMjAuMQo+IAo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCj4gSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdAo+IEludGVsLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2ludGVsLWdmeApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9p
bnRlbC1nZng=

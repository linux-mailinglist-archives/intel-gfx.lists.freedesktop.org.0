Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E7304102521
	for <lists+intel-gfx@lfdr.de>; Tue, 19 Nov 2019 14:04:35 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3656D6E90C;
	Tue, 19 Nov 2019 13:04:34 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6D03B6E51B
 for <intel-gfx@lists.freedesktop.org>; Tue, 19 Nov 2019 13:04:24 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 19 Nov 2019 05:04:24 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,324,1569308400"; d="scan'208";a="209189519"
Received: from vandita-desktop.iind.intel.com ([10.223.74.218])
 by orsmga003.jf.intel.com with ESMTP; 19 Nov 2019 05:04:22 -0800
From: Vandita Kulkarni <vandita.kulkarni@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 19 Nov 2019 18:03:14 +0530
Message-Id: <20191119123316.5094-7-vandita.kulkarni@intel.com>
X-Mailer: git-send-email 2.21.0.5.gaeb582a
In-Reply-To: <20191119123316.5094-1-vandita.kulkarni@intel.com>
References: <20191119123316.5094-1-vandita.kulkarni@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [V3 6/8] drm/i915/dsi: Configure TE interrupt for cmd
 mode
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UgbmVlZCB0byBjb25maWd1cmUgVEUgaW50ZXJydXB0IGluIHR3byBwbGFjZXMuClBvcnQgaW50
ZXJydXB0IGFuZCBEU0kgaW50ZXJydXB0IG1hc2sgcmVnaXN0ZXJzLgoKdjI6IEhpZGUgdGhlIHBy
aXZhdGUgZmxhZ3MgY2hlY2sgaW5zaWRlIGNvbmZpZ3VyZV90ZSAoSmFuaSkKClNpZ25lZC1vZmYt
Ynk6IFZhbmRpdGEgS3Vsa2FybmkgPHZhbmRpdGEua3Vsa2FybmlAaW50ZWwuY29tPgotLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMgfCA1NSArKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrLS0KIDEgZmlsZSBjaGFuZ2VkLCA1MyBpbnNlcnRpb25zKCspLCAyIGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5jCmluZGV4IGRhZTAwZjdkZDdkZi4uYTNkMWZjMGJm
YjU2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2lycS5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKQEAgLTQxLDYgKzQxLDcgQEAKICNpbmNsdWRl
ICJkaXNwbGF5L2ludGVsX2hvdHBsdWcuaCIKICNpbmNsdWRlICJkaXNwbGF5L2ludGVsX2xwZV9h
dWRpby5oIgogI2luY2x1ZGUgImRpc3BsYXkvaW50ZWxfcHNyLmgiCisjaW5jbHVkZSAiZGlzcGxh
eS9pbnRlbF9kc2kuaCIKIAogI2luY2x1ZGUgImd0L2ludGVsX2d0LmgiCiAjaW5jbHVkZSAiZ3Qv
aW50ZWxfZ3RfaXJxLmgiCkBAIC0yNTcxLDEyICsyNTcyLDQ2IEBAIGludCBpbGtfZW5hYmxlX3Zi
bGFuayhzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCiAJcmV0dXJuIDA7CiB9CiAKK3N0YXRpYyBib29s
IGdlbjExX2RzaV9jb25maWd1cmVfdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
LAorCQkJCSAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLCBib29sIGVuYWJsZSkKK3sK
KwllbnVtIHBvcnQgcG9ydDsKKwl1MzIgdG1wOworCisJaWYgKCEobW9kZS0+cHJpdmF0ZV9mbGFn
cyAmCisJICAgIChJOTE1X01PREVfRkxBR19EU0lfVVNFX1RFMSB8IEk5MTVfTU9ERV9GTEFHX0RT
SV9VU0VfVEUwKSkpCisJCXJldHVybiBmYWxzZTsKKworCWlmIChtb2RlLT5wcml2YXRlX2ZsYWdz
ICYgSTkxNV9NT0RFX0ZMQUdfRFNJX1VTRV9URTEpCisJCXBvcnQgPSBQT1JUX0I7CisJZWxzZQor
CQlwb3J0ID0gUE9SVF9BOworCisJdG1wID0gIEk5MTVfUkVBRChEU0lfSU5UUl9NQVNLX1JFRyhw
b3J0KSk7CisJaWYgKGVuYWJsZSkKKwkJdG1wICY9IH5EU0lfVEVfRVZFTlQ7CisJZWxzZQorCQl0
bXAgfD0gRFNJX1RFX0VWRU5UOworCisJSTkxNV9XUklURShEU0lfSU5UUl9NQVNLX1JFRyhwb3J0
KSwgdG1wKTsKKwlyZXR1cm4gdHJ1ZTsKK30KKwogaW50IGJkd19lbmFibGVfdmJsYW5rKHN0cnVj
dCBkcm1fY3J0YyAqY3J0YykKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYg
PSB0b19pOTE1KGNydGMtPmRldik7Ci0JZW51bSBwaXBlIHBpcGUgPSB0b19pbnRlbF9jcnRjKGNy
dGMpLT5waXBlOworCXN0cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0gdG9faW50ZWxfY3J0
YyhjcnRjKTsKKwllbnVtIHBpcGUgcGlwZSA9IGludGVsX2NydGMtPnBpcGU7CisJc3RydWN0IGRy
bV92YmxhbmtfY3J0YyAqdmJsYW5rOworCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlOwog
CXVuc2lnbmVkIGxvbmcgaXJxZmxhZ3M7CiAKKwl2YmxhbmsgPSAmY3J0Yy0+ZGV2LT52Ymxhbmtb
ZHJtX2NydGNfaW5kZXgoY3J0YyldOworCW1vZGUgPSAmdmJsYW5rLT5od21vZGU7CisKKwlpZiAo
Z2VuMTFfZHNpX2NvbmZpZ3VyZV90ZShkZXZfcHJpdiwgbW9kZSwgdHJ1ZSkpCisJCXJldHVybiAw
OworCiAJc3Bpbl9sb2NrX2lycXNhdmUoJmRldl9wcml2LT5pcnFfbG9jaywgaXJxZmxhZ3MpOwog
CWJkd19lbmFibGVfcGlwZV9pcnEoZGV2X3ByaXYsIHBpcGUsIEdFTjhfUElQRV9WQkxBTkspOwog
CXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmRldl9wcml2LT5pcnFfbG9jaywgaXJxZmxhZ3MpOwpA
QCAtMjY0Miw5ICsyNjc3LDE4IEBAIHZvaWQgaWxrX2Rpc2FibGVfdmJsYW5rKHN0cnVjdCBkcm1f
Y3J0YyAqY3J0YykKIHZvaWQgYmR3X2Rpc2FibGVfdmJsYW5rKHN0cnVjdCBkcm1fY3J0YyAqY3J0
YykKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMt
PmRldik7Ci0JZW51bSBwaXBlIHBpcGUgPSB0b19pbnRlbF9jcnRjKGNydGMpLT5waXBlOworCXN0
cnVjdCBpbnRlbF9jcnRjICppbnRlbF9jcnRjID0gdG9faW50ZWxfY3J0YyhjcnRjKTsKKwllbnVt
IHBpcGUgcGlwZSA9IGludGVsX2NydGMtPnBpcGU7CisJc3RydWN0IGRybV92YmxhbmtfY3J0YyAq
dmJsYW5rOworCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlOwogCXVuc2lnbmVkIGxvbmcg
aXJxZmxhZ3M7CiAKKwl2YmxhbmsgPSAmY3J0Yy0+ZGV2LT52YmxhbmtbZHJtX2NydGNfaW5kZXgo
Y3J0YyldOworCW1vZGUgPSAmdmJsYW5rLT5od21vZGU7CisKKwlpZiAoZ2VuMTFfZHNpX2NvbmZp
Z3VyZV90ZShkZXZfcHJpdiwgbW9kZSwgZmFsc2UpKQorCQlyZXR1cm47CisKIAlzcGluX2xvY2tf
aXJxc2F2ZSgmZGV2X3ByaXYtPmlycV9sb2NrLCBpcnFmbGFncyk7CiAJYmR3X2Rpc2FibGVfcGlw
ZV9pcnEoZGV2X3ByaXYsIHBpcGUsIEdFTjhfUElQRV9WQkxBTkspOwogCXNwaW5fdW5sb2NrX2ly
cXJlc3RvcmUoJmRldl9wcml2LT5pcnFfbG9jaywgaXJxZmxhZ3MpOwpAQCAtMzM1MCw2ICszMzk0
LDEzIEBAIHN0YXRpYyB2b2lkIGdlbjhfZGVfaXJxX3Bvc3RpbnN0YWxsKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdikKIAkJZ2VuM19hc3NlcnRfaWlyX2lzX3plcm8odW5jb3JlLCBF
RFBfUFNSX0lJUik7CiAJfQogCisJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPj0gMTEpIHsKKwkJ
ZW51bSBwb3J0IHBvcnQ7CisKKwkJaWYgKGludGVsX2Jpb3NfaXNfZHNpX3ByZXNlbnQoZGV2X3By
aXYsICZwb3J0KSkKKwkJCWRlX3BvcnRfbWFza2VkIHw9IERTSTBfVEUgfCBEU0kxX1RFOworCX0K
KwogCWZvcl9lYWNoX3BpcGUoZGV2X3ByaXYsIHBpcGUpIHsKIAkJZGV2X3ByaXYtPmRlX2lycV9t
YXNrW3BpcGVdID0gfmRlX3BpcGVfbWFza2VkOwogCi0tIAoyLjIxLjAuNS5nYWViNTgyYQoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1h
aWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1CB46DE9D7
	for <lists+intel-gfx@lfdr.de>; Mon, 21 Oct 2019 12:38:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C2E3689C9B;
	Mon, 21 Oct 2019 10:38:49 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 25A9589C9B
 for <intel-gfx@lists.freedesktop.org>; Mon, 21 Oct 2019 10:38:46 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 21 Oct 2019 03:38:45 -0700
X-IronPort-AV: E=Sophos;i="5.67,323,1566889200"; d="scan'208";a="191070031"
Received: from jkrzyszt-desk.ger.corp.intel.com ([172.22.244.17])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 21 Oct 2019 03:38:44 -0700
From: Janusz Krzysztofik <janusz.krzysztofik@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 21 Oct 2019 12:37:38 +0200
Message-ID: <3560772.ZnhquFFD5R@jkrzyszt-desk.ger.corp.intel.com>
Organization: Intel Technology Poland sp. z o.o. - ul. Slowackiego 173,
 80-298 Gdansk - KRS 101882 - NIP 957-07-52-316
In-Reply-To: <20191010142316.25183-1-chris@chris-wilson.co.uk>
References: <20191010142316.25183-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH] RFC drm/i915: Allow userspace to specify
 ringsize on construction
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SGkgQ2hyaXMsCgpPbiBUaHVyc2RheSwgT2N0b2JlciAxMCwgMjAxOSA0OjIzOjE2IFBNIENFU1Qg
Q2hyaXMgV2lsc29uIHdyb3RlOgo+IE5vIGdvb2QgcmVhc29uIHdoeSB3ZSBtdXN0IGFsd2F5cyB1
c2UgYSBzdGF0aWMgcmluZ3NpemUsIHNvIGxldAo+IHVzZXJzcGFjZSBzZWxlY3Qgb25lIGR1cmlu
ZyBjb25zdHJ1Y3Rpb24uCgpJJ3ZlIGhlYXJkIGZyb20gVU1EIHBlb3BsZSB0aGV5IGxpa2UgdGhp
cyBzb2x1dGlvbiA6LSkKCj4gU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJp
cy13aWxzb24uY28udWs+Cj4gQ2M6IEpvb25hcyBMYWh0aW5lbiA8am9vbmFzLmxhaHRpbmVuQGxp
bnV4LmludGVsLmNvbT4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X2NvbnRleHQuYyB8IDgzICsrKysrKysrKysrKysrKysrKystLQo+ICBpbmNsdWRlL3VhcGkvZHJt
L2k5MTVfZHJtLmggICAgICAgICAgICAgICAgIHwgMTIgKysrCj4gIDIgZmlsZXMgY2hhbmdlZCwg
ODkgaW5zZXJ0aW9ucygrKSwgNiBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMKPiBpbmRleCA0NmU1YjNiNTMyODguLjk2MzVlMzc3
YzhhZSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29u
dGV4dC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQu
Ywo+IEBAIC00NTUsMjMgKzQ1NSwzMCBAQCBfX2NyZWF0ZV9jb250ZXh0KHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1KQo+ICAJcmV0dXJuIEVSUl9QVFIoZXJyKTsKPiAgfQo+ICAKPiAtc3Rh
dGljIHZvaWQKPiArc3RhdGljIGludAo+ICBjb250ZXh0X2FwcGx5X2FsbChzdHJ1Y3QgaTkxNV9n
ZW1fY29udGV4dCAqY3R4LAo+IC0JCSAgdm9pZCAoKmZuKShzdHJ1Y3QgaW50ZWxfY29udGV4dCAq
Y2UsIHZvaWQgKmRhdGEpLAo+ICsJCSAgaW50ICgqZm4pKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpj
ZSwgdm9pZCAqZGF0YSksCj4gIAkJICB2b2lkICpkYXRhKQo+ICB7Cj4gIAlzdHJ1Y3QgaTkxNV9n
ZW1fZW5naW5lc19pdGVyIGl0Owo+ICAJc3RydWN0IGludGVsX2NvbnRleHQgKmNlOwo+ICsJaW50
IGVyciA9IDA7Cj4gIAo+IC0JZm9yX2VhY2hfZ2VtX2VuZ2luZShjZSwgaTkxNV9nZW1fY29udGV4
dF9sb2NrX2VuZ2luZXMoY3R4KSwgaXQpCj4gLQkJZm4oY2UsIGRhdGEpOwo+ICsJZm9yX2VhY2hf
Z2VtX2VuZ2luZShjZSwgaTkxNV9nZW1fY29udGV4dF9sb2NrX2VuZ2luZXMoY3R4KSwgaXQpIHsK
PiArCQllcnIgPSBmbihjZSwgZGF0YSk7Cj4gKwkJaWYgKGVycikKPiArCQkJYnJlYWs7Cj4gKwl9
Cj4gIAlpOTE1X2dlbV9jb250ZXh0X3VubG9ja19lbmdpbmVzKGN0eCk7Cj4gKwo+ICsJcmV0dXJu
IGVycjsKPiAgfQo+ICAKPiAtc3RhdGljIHZvaWQgX19hcHBseV9wcGd0dChzdHJ1Y3QgaW50ZWxf
Y29udGV4dCAqY2UsIHZvaWQgKnZtKQo+ICtzdGF0aWMgaW50IF9fYXBwbHlfcHBndHQoc3RydWN0
IGludGVsX2NvbnRleHQgKmNlLCB2b2lkICp2bSkKPiAgewo+ICAJaTkxNV92bV9wdXQoY2UtPnZt
KTsKPiAgCWNlLT52bSA9IGk5MTVfdm1fZ2V0KHZtKTsKPiArCXJldHVybiAwOwo+ICB9Cj4gIAo+
ICBzdGF0aWMgc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqCj4gQEAgLTUwOSw5ICs1MTYsMTAg
QEAgc3RhdGljIHZvaWQgX19zZXRfdGltZWxpbmUoc3RydWN0IGludGVsX3RpbWVsaW5lICoqZHN0
LAo+ICAJCWludGVsX3RpbWVsaW5lX3B1dChvbGQpOwo+ICB9Cj4gIAo+IC1zdGF0aWMgdm9pZCBf
X2FwcGx5X3RpbWVsaW5lKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwgdm9pZCAqdGltZWxpbmUp
Cj4gK3N0YXRpYyBpbnQgX19hcHBseV90aW1lbGluZShzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2Us
IHZvaWQgKnRpbWVsaW5lKQo+ICB7Cj4gIAlfX3NldF90aW1lbGluZSgmY2UtPnRpbWVsaW5lLCB0
aW1lbGluZSk7Cj4gKwlyZXR1cm4gMDsKPiAgfQo+ICAKPiAgc3RhdGljIHZvaWQgX19hc3NpZ25f
dGltZWxpbmUoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwKPiBAQCAtMTA4Niw2ICsxMDk0
LDY1IEBAIHN0YXRpYyBpbnQgc2V0X3BwZ3R0KHN0cnVjdCBkcm1faTkxNV9maWxlX3ByaXZhdGUg
KmZpbGVfcHJpdiwKPiAgCXJldHVybiBlcnI7Cj4gIH0KPiAgCj4gK3N0YXRpYyBpbnQgX19hcHBs
eV9yaW5nc2l6ZShzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsIHZvaWQgKnN6KQo+ICt7Cj4gKwlp
bnQgZXJyID0gMDsKPiArCj4gKwlpZiAoaW50ZWxfY29udGV4dF9sb2NrX3Bpbm5lZChjZSkpCj4g
KwkJcmV0dXJuIC1FSU5UUjsKPiArCj4gKwlpZiAoaW50ZWxfY29udGV4dF9pc19waW5uZWQoY2Up
KSB7Cj4gKwkJZXJyID0gLUVCVVNZOyAvKiBJbiBhY3RpdmUgdXNlISBDb21lIGJhY2sgbGF0ZXIh
ICovCj4gKwkJZ290byB1bmxvY2s7Cj4gKwl9Cj4gKwo+ICsJaWYgKHRlc3RfYml0KENPTlRFWFRf
QUxMT0NfQklULCAmY2UtPmZsYWdzKSkgewo+ICsJCXN0cnVjdCBpbnRlbF9yaW5nICpyaW5nOwo+
ICsKPiArCQkvKiBSZXBsYWNlIHRoZSBleGlzdGluZyByaW5nYnVmZmVyICovCj4gKwkJcmluZyA9
IGludGVsX2VuZ2luZV9jcmVhdGVfcmluZyhjZS0+ZW5naW5lLAo+ICsJCQkJCQkodW5zaWduZWQg
bG9uZylzeik7Cj4gKwkJaWYgKElTX0VSUihyaW5nKSkgewo+ICsJCQllcnIgPSBQVFJfRVJSKHJp
bmcpOwo+ICsJCQlnb3RvIHVubG9jazsKPiArCQl9Cj4gKwo+ICsJCWludGVsX3JpbmdfcHV0KGNl
LT5yaW5nKTsKPiArCQljZS0+cmluZyA9IHJpbmc7Cj4gKwo+ICsJCS8qIENvbnRleHQgaW1hZ2Ug
d2lsbCBiZSB1cGRhdGVkIG9uIG5leHQgcGluICovCj4gKwl9IGVsc2Ugewo+ICsJCWNlLT5yaW5n
ID0gc3o7Cj4gKwl9Cj4gKwo+ICt1bmxvY2s6Cj4gKwlpbnRlbF9jb250ZXh0X3VubG9ja19waW5u
ZWQoY2UpOwo+ICsJcmV0dXJuIGVycjsKPiArfQo+ICsKPiArc3RhdGljIGludCBzZXRfcmluZ3Np
emUoc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0eCwKPiArCQkJc3RydWN0IGRybV9pOTE1X2dl
bV9jb250ZXh0X3BhcmFtICphcmdzKQo+ICt7Cj4gKwlpZiAoIUhBU19MT0dJQ0FMX1JJTkdfQ09O
VEVYVFMoY3R4LT5pOTE1KSkKPiArCQlyZXR1cm4gLUVOT0RFVjsKPiArCj4gKwlpZiAoYXJncy0+
c2l6ZSkKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlpZiAoIUlTX0FMSUdORUQoYXJncy0+
dmFsdWUsIEk5MTVfR1RUX1BBR0VfU0laRSkpCj4gKwkJcmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsJ
aWYgKGFyZ3MtPnZhbHVlIDwgSTkxNV9HVFRfUEFHRV9TSVpFKQo+ICsJCXJldHVybiAtRUlOVkFM
Owo+ICsKPiArCWlmIChhcmdzLT52YWx1ZSA+IDEyOCAqIEk5MTVfR1RUX1BBR0VfU0laRSkKPiAr
CQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlyZXR1cm4gY29udGV4dF9hcHBseV9hbGwoY3R4LAo+
ICsJCQkJIF9fYXBwbHlfcmluZ3NpemUsCj4gKwkJCQkgX19pbnRlbF9jb250ZXh0X3Jpbmdfc2l6
ZShhcmdzLT52YWx1ZSkpOwo+ICt9Cj4gKwo+ICBzdGF0aWMgaW50IGdlbjhfZW1pdF9ycGNzX2Nv
bmZpZyhzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwKPiAgCQkJCSBzdHJ1Y3QgaW50ZWxfY29udGV4
dCAqY2UsCj4gIAkJCQkgc3RydWN0IGludGVsX3NzZXUgc3NldSkKPiBAQCAtMTc5OCw2ICsxODY1
LDEwIEBAIHN0YXRpYyBpbnQgY3R4X3NldHBhcmFtKHN0cnVjdCBkcm1faTkxNV9maWxlX3ByaXZh
dGUgKmZwcml2LAo+ICAJCXJldCA9IHNldF9wZXJzaXN0ZW5jZShjdHgsIGFyZ3MpOwo+ICAJCWJy
ZWFrOwo+ICAKPiArCWNhc2UgSTkxNV9DT05URVhUX1BBUkFNX1JJTkdTSVpFOgo+ICsJCXJldCA9
IHNldF9yaW5nc2l6ZShjdHgsIGFyZ3MpOwo+ICsJCWJyZWFrOwo+ICsKPiAgCWNhc2UgSTkxNV9D
T05URVhUX1BBUkFNX0JBTl9QRVJJT0Q6Cj4gIAlkZWZhdWx0Ogo+ICAJCXJldCA9IC1FSU5WQUw7
Cj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaCBiL2luY2x1ZGUvdWFw
aS9kcm0vaTkxNV9kcm0uaAo+IGluZGV4IGViOWU3MDRkNzE3YS4uZTM3NWNkMmNmNjZiIDEwMDY0
NAo+IC0tLSBhL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAo+ICsrKyBiL2luY2x1ZGUvdWFw
aS9kcm0vaTkxNV9kcm0uaAo+IEBAIC0xNTgwLDYgKzE1ODAsMTggQEAgc3RydWN0IGRybV9pOTE1
X2dlbV9jb250ZXh0X3BhcmFtIHsKPiAgICogQnkgZGVmYXVsdCwgbmV3IGNvbnRleHRzIGFsbG93
IHBlcnNpc3RlbmNlLgo+ICAgKi8KPiAgI2RlZmluZSBJOTE1X0NPTlRFWFRfUEFSQU1fUEVSU0lT
VEVOQ0UJMHhiCj4gKwo+ICsvKgo+ICsgKgo+ICsgKiBJOTE1X0NPTlRFWFRfUEFSQU1fUklOR1NJ
WkU6Cj4gKyAqCj4gKyAqIFNldHMgdGhlIHNpemUgb2YgdGhlIHJpbmdidWZmZXIgdG8gdXNlIGZv
ciBsb2dpY2FsIHJpbmcgY29udGV4dHMuCj4gKyAqIE9ubHkgcG9zc2libGUgdG8gYmUgc2V0IHBy
aW9yIHRvIGZpcnN0IHVzZSwgaS5lLiBkdXJpbmcgY29uc3RydWN0aW9uLgo+ICsgKiBPbmx5IGFw
cGxpZXMgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGVuZ2luZSBhbmQgbG9zdCBmb3IgdGhvc2UgZW5n
aW5lcwo+ICsgKiBhcmUgcmVwbGFjZWQgYnkgYSBuZXcgbWFwcGluZy4KPiArICogTXVzdCBiZSBi
ZXR3ZWVuIDQgLSA1MTIgS2lCLgoKbml0OiBJbiBjYXNlIHRoZSByZXF1aXJlbWVudCBmb3IgdGhl
IHJlcXVlc3RlZCByaW5nIHNpemUgdG8gYmUgYSBtdWx0aXBsZSBvZiA0ayBtYXkgCmJlIG5vdCBv
YnZpb3VzIGZvciB1c2VycywgYW5kIHNpbmNlIHdlIGRvbid0IGVtaXQgYSBkZWJ1ZyBtZXNzYWdl
IGlmIG5vdCAKc2F0aXNmaWVkLCBtYXliZSB3ZSBzaG91bGQgYWxzbyBtZW50aW9uIHRoYXQgaGVy
ZS4gIEFueXdheSwgbGd0bS4KUmV2aWV3ZWQtYnk6IEphbnVzeiBLcnp5c3p0b2ZpayA8amFudXN6
LmtyenlzenRvZmlrQGxpbnV4LmludGVsLmNvbT4KClRoYW5rcywKSmFudXN6Cgo+ICsgKi8KPiAr
I2RlZmluZSBJOTE1X0NPTlRFWFRfUEFSQU1fUklOR1NJWkUJMHhjCj4gIC8qIE11c3QgYmUga2Vw
dCBjb21wYWN0IC0tIG5vIGhvbGVzIGFuZCB3ZWxsIGRvY3VtZW50ZWQgKi8KPiAgCj4gIAlfX3U2
NCB2YWx1ZTsKPiAKCgoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVs
LWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4A02C37585B
	for <lists+intel-gfx@lfdr.de>; Thu,  6 May 2021 18:19:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AA2136ECCE;
	Thu,  6 May 2021 16:19:48 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B8F026ECCB
 for <intel-gfx@lists.freedesktop.org>; Thu,  6 May 2021 16:19:46 +0000 (UTC)
IronPort-SDR: yuIkFbI+sPLI6fm2lHgY7XjfYAckwfnTxzqaR5BZbC2ov2AvJVO/WHDaqcz131XqMsJ537VfpF
 dny0m6bKNUUQ==
X-IronPort-AV: E=McAfee;i="6200,9189,9976"; a="195395943"
X-IronPort-AV: E=Sophos;i="5.82,277,1613462400"; d="scan'208";a="195395943"
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by fmsmga102.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 06 May 2021 09:19:46 -0700
IronPort-SDR: rO6fwtlIv2VCwsCLzloAbWKRsltCEOL5ogAWZfxqAfoVhDcVk5y0jyj1LAse7iX8N6PF5b1o/A
 OtN10PlDIqXQ==
X-IronPort-AV: E=Sophos;i="5.82,277,1613462400"; d="scan'208";a="407072196"
Received: from ideak-desk.fi.intel.com ([10.237.68.141])
 by orsmga002-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 06 May 2021 09:19:44 -0700
From: Imre Deak <imre.deak@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu,  6 May 2021 19:19:26 +0300
Message-Id: <20210506161930.309688-7-imre.deak@intel.com>
X-Mailer: git-send-email 2.27.0
In-Reply-To: <20210506161930.309688-1-imre.deak@intel.com>
References: <20210506161930.309688-1-imre.deak@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 06/10] drm/i915/xelpd: Support 128k plane
 stride
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>,
 =?UTF-8?q?Juha-Pekka=20Heikkil=C3=A4?= <juha-pekka.heikkila@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogSnVoYS1QZWtrYSBIZWlra2lsw6QgPGp1aGEtcGVra2EuaGVpa2tpbGFAaW50ZWwuY29t
PgoKWEVfTFBEIHN1cHBvcnRzIHBsYW5lIHN0cmlkZXMgdXAgdG8gMTI4S0IuCgpDYzogVmFuZGl0
YSBLdWxrYXJuaSA8dmFuZGl0YS5rdWxrYXJuaUBpbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEp1
aGEtUGVra2EgSGVpa2tpbMOkIDxqdWhhLXBla2thLmhlaWtraWxhQGludGVsLmNvbT4KU2lnbmVk
LW9mZi1ieTogTWF0dCBSb3BlciA8bWF0dGhldy5kLnJvcGVyQGludGVsLmNvbT4KUmV2aWV3ZWQt
Ynk6IEx1Y2FzIERlIE1hcmNoaSA8bHVjYXMuZGVtYXJjaGlAaW50ZWwuY29tPgpTaWduZWQtb2Zm
LWJ5OiBJbXJlIERlYWsgPGltcmUuZGVha0BpbnRlbC5jb20+Ci0tLQogLi4uL2RybS9pOTE1L2Rp
c3BsYXkvc2tsX3VuaXZlcnNhbF9wbGFuZS5jICAgIHwgNDYgKysrKysrKysrKysrKysrLS0tLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCAgICAgICAgICAgICAgIHwgIDIgKwogMiBm
aWxlcyBjaGFuZ2VkLCAzOSBpbnNlcnRpb25zKCspLCA5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvc2tsX3VuaXZlcnNhbF9wbGFuZS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9za2xfdW5pdmVyc2FsX3BsYW5lLmMKaW5kZXgg
NmRmM2U3NDVmODMwZC4uNjhhMGMwYTkyZmExYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9za2xfdW5pdmVyc2FsX3BsYW5lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9za2xfdW5pdmVyc2FsX3BsYW5lLmMKQEAgLTQ4MiwxNyArNDgyLDM1IEBA
IHNrbF9wbGFuZV9tYXhfc3RyaWRlKHN0cnVjdCBpbnRlbF9wbGFuZSAqcGxhbmUsCiAJCSAgICAg
dTMyIHBpeGVsX2Zvcm1hdCwgdTY0IG1vZGlmaWVyLAogCQkgICAgIHVuc2lnbmVkIGludCByb3Rh
dGlvbikKIHsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUocGxhbmUt
PmJhc2UuZGV2KTsKIAljb25zdCBzdHJ1Y3QgZHJtX2Zvcm1hdF9pbmZvICppbmZvID0gZHJtX2Zv
cm1hdF9pbmZvKHBpeGVsX2Zvcm1hdCk7CiAJaW50IGNwcCA9IGluZm8tPmNwcFswXTsKKwlpbnQg
bWF4X2hvcml6b250YWxfcGl4ZWxzID0gODE5MjsKKwlpbnQgbWF4X3N0cmlkZV9ieXRlczsKKwor
CWlmIChESVNQTEFZX1ZFUihpOTE1KSA+PSAxMykgeworCQkvKgorCQkgKiBUaGUgc3RyaWRlIGlu
IGJ5dGVzIG11c3Qgbm90IGV4Y2VlZCBvZiB0aGUgc2l6ZQorCQkgKiBvZiAxMjhLIGJ5dGVzLiBG
b3IgcGl4ZWwgZm9ybWF0cyBvZiA2NGJwcCB3aWxsIGFsbG93CisJCSAqIGZvciBhIDE2SyBwaXhl
bCBzdXJmYWNlLgorCQkgKi8KKwkJbWF4X3N0cmlkZV9ieXRlcyA9IDEzMTA3MjsKKwkJaWYgKGNw
cCA9PSA4KQorCQkJbWF4X2hvcml6b250YWxfcGl4ZWxzID0gMTYzODQ7CisJCWVsc2UKKwkJCW1h
eF9ob3Jpem9udGFsX3BpeGVscyA9IDY1NTM2OworCX0gZWxzZSB7CisJCS8qCisJCSAqICJUaGUg
c3RyaWRlIGluIGJ5dGVzIG11c3Qgbm90IGV4Y2VlZCB0aGUKKwkJICogb2YgdGhlIHNpemUgb2Yg
OEsgcGl4ZWxzIGFuZCAzMksgYnl0ZXMuIgorCQkgKi8KKwkJbWF4X3N0cmlkZV9ieXRlcyA9IDMy
NzY4OworCX0KIAotCS8qCi0JICogIlRoZSBzdHJpZGUgaW4gYnl0ZXMgbXVzdCBub3QgZXhjZWVk
IHRoZQotCSAqIG9mIHRoZSBzaXplIG9mIDhLIHBpeGVscyBhbmQgMzJLIGJ5dGVzLiIKLQkgKi8K
IAlpZiAoZHJtX3JvdGF0aW9uXzkwX29yXzI3MChyb3RhdGlvbikpCi0JCXJldHVybiBtaW4oODE5
MiwgMzI3NjggLyBjcHApOworCQlyZXR1cm4gbWluKG1heF9ob3Jpem9udGFsX3BpeGVscywgbWF4
X3N0cmlkZV9ieXRlcyAvIGNwcCk7CiAJZWxzZQotCQlyZXR1cm4gbWluKDgxOTIgKiBjcHAsIDMy
NzY4KTsKKwkJcmV0dXJuIG1pbihtYXhfaG9yaXpvbnRhbF9waXhlbHMgKiBjcHAsIG1heF9zdHJp
ZGVfYnl0ZXMpOwogfQogCiAKQEAgLTE0NTIsNyArMTQ3MCwxMCBAQCBzdGF0aWMgaW50IHNrbF9j
aGVja19tYWluX3N1cmZhY2Uoc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSkK
IAkJfQogCX0KIAotCWRybV9XQVJOX09OKCZkZXZfcHJpdi0+ZHJtLCB4ID4gODE5MSB8fCB5ID4g
ODE5MSk7CisJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMykKKwkJZHJtX1dBUk5fT04o
JmRldl9wcml2LT5kcm0sIHggPiA2NTUzNSB8fCB5ID4gNjU1MzUpOworCWVsc2UKKwkJZHJtX1dB
Uk5fT04oJmRldl9wcml2LT5kcm0sIHggPiA4MTkxIHx8IHkgPiA4MTkxKTsKIAogCXBsYW5lX3N0
YXRlLT52aWV3LmNvbG9yX3BsYW5lWzBdLm9mZnNldCA9IG9mZnNldDsKIAlwbGFuZV9zdGF0ZS0+
dmlldy5jb2xvcl9wbGFuZVswXS54ID0geDsKQEAgLTE1MjYsNyArMTU0NywxMCBAQCBzdGF0aWMg
aW50IHNrbF9jaGVja19udjEyX2F1eF9zdXJmYWNlKHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAq
cGxhbmVfc3RhdGUpCiAJCX0KIAl9CiAKLQlkcm1fV0FSTl9PTigmaTkxNS0+ZHJtLCB4ID4gODE5
MSB8fCB5ID4gODE5MSk7CisJaWYgKERJU1BMQVlfVkVSKGk5MTUpID49IDEzKQorCQlkcm1fV0FS
Tl9PTigmaTkxNS0+ZHJtLCB4ID4gNjU1MzUgfHwgeSA+IDY1NTM1KTsKKwllbHNlCisJCWRybV9X
QVJOX09OKCZpOTE1LT5kcm0sIHggPiA4MTkxIHx8IHkgPiA4MTkxKTsKIAogCXBsYW5lX3N0YXRl
LT52aWV3LmNvbG9yX3BsYW5lW3V2X3BsYW5lXS5vZmZzZXQgPSBvZmZzZXQ7CiAJcGxhbmVfc3Rh
dGUtPnZpZXcuY29sb3JfcGxhbmVbdXZfcGxhbmVdLnggPSB4OwpAQCAtMjIzOSw3ICsyMjYzLDEx
IEBAIHNrbF9nZXRfaW5pdGlhbF9wbGFuZV9jb25maWcoc3RydWN0IGludGVsX2NydGMgKmNydGMs
CiAKIAl2YWwgPSBpbnRlbF9kZV9yZWFkKGRldl9wcml2LCBQTEFORV9TVFJJREUocGlwZSwgcGxh
bmVfaWQpKTsKIAlzdHJpZGVfbXVsdCA9IHNrbF9wbGFuZV9zdHJpZGVfbXVsdChmYiwgMCwgRFJN
X01PREVfUk9UQVRFXzApOwotCWZiLT5waXRjaGVzWzBdID0gKHZhbCAmIDB4M2ZmKSAqIHN0cmlk
ZV9tdWx0OworCisJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMykKKwkJZmItPnBpdGNo
ZXNbMF0gPSAodmFsICYgUExBTkVfU1RSSURFX01BU0tfWEVMUEQpICogc3RyaWRlX211bHQ7CisJ
ZWxzZQorCQlmYi0+cGl0Y2hlc1swXSA9ICh2YWwgJiBQTEFORV9TVFJJREVfTUFTSykgKiBzdHJp
ZGVfbXVsdDsKIAogCWFsaWduZWRfaGVpZ2h0ID0gaW50ZWxfZmJfYWxpZ25faGVpZ2h0KGZiLCAw
LCBmYi0+aGVpZ2h0KTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9y
ZWcuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKaW5kZXggOWZmZDE3M2Y4Yjdm
OS4uODQ2ZmE5MjdhM2Q4MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9y
ZWcuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCkBAIC03MjEyLDYgKzcy
MTIsOCBAQCBlbnVtIHsKIAlfUElQRShwaXBlLCBfUExBTkVfU1RSSURFXzNfQSwgX1BMQU5FX1NU
UklERV8zX0IpCiAjZGVmaW5lIFBMQU5FX1NUUklERShwaXBlLCBwbGFuZSkJXAogCV9NTUlPX1BM
QU5FKHBsYW5lLCBfUExBTkVfU1RSSURFXzEocGlwZSksIF9QTEFORV9TVFJJREVfMihwaXBlKSkK
KyNkZWZpbmUgUExBTkVfU1RSSURFX01BU0sJCVJFR19HRU5NQVNLKDEwLCAwKQorI2RlZmluZSBQ
TEFORV9TVFJJREVfTUFTS19YRUxQRAkJUkVHX0dFTk1BU0soMTEsIDApCiAKICNkZWZpbmUgX1BM
QU5FX1BPU18xX0IJCQkJMHg3MTE4YwogI2RlZmluZSBfUExBTkVfUE9TXzJfQgkJCQkweDcxMjhj
Ci0tIAoyLjI3LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9y
ZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdm
eAo=

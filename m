Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8C14EE03DD
	for <lists+intel-gfx@lfdr.de>; Tue, 22 Oct 2019 14:28:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 88C046E612;
	Tue, 22 Oct 2019 12:28:50 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EB2DB6E781
 for <intel-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 12:28:48 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18924931-1500050 
 for <intel-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 13:28:47 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 22 Oct 2019 13:28:45 +0100
Message-Id: <20191022122845.25038-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0.rc0
MIME-Version: 1.0
Subject: [Intel-gfx] [CI] drm/i915: Drop assertion that ce->pin_mutex guards
 state updates
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhlIGFjdHVhbCBjb25kaXRpb25zIGFyZSB0aGF0IHdlIGtub3cgdGhlIEdQVSBpcyBub3QgYWNj
ZXNzaW5nIHRoZQpjb250ZXh0LCBhbmQgd2UgaG9sZCBhIHBpbiBvbiB0aGUgY29udGV4dCBpbWFn
ZSB0byBhbGxvdyBDUFUgYWNjZXNzLiBXZQp1c2VkIGEgZmFrZSBsb2NrIG9uIGNlLT5waW5fbXV0
ZXggc28gdGhhdCB3ZSBjb3VsZCB0cnkgYW5kIHVzZSBsb2NrZGVwCnRvIGFzc2VydCB0aGF0IGFj
Y2VzcyBpcyBzZXJpYWxpc2VkLCBidXQgdGhlIHZhcmlvdXMgZGlmZmVyZW50CmhhcmRpcnEvc29m
dGlycSBjb250ZXh0cyB3aGVyZSB3ZSBuZWVkIHRvICpmYWtlKiBob2xkaW5nIHRoZSBwaW5fbXV0
ZXgKYXJlIGNhdXNpbmcgbW9yZSB0cm91YmxlLgoKU3RpbGwgaXQgd291bGQgYmUgbmljZSBpZiB3
ZSBkaWQgaGF2ZSBhIHdheSB0byByZWFzc3VyZSBvdXJzZWx2ZXMgdGhhdAp0aGUgZGlyZWN0IHVw
ZGF0ZSB0byB0aGUgY29udGV4dCBpbWFnZSBpcyBzZXJpYWxpc2VkIHdpdGggR1BVIGV4ZWN1dGlv
bi4KSW4gdGhlIG1lYW50aW1lLCBzdG9wIGxvY2tkZXAgY29tcGxhaW5pbmcgYWJvdXQgZmFsc2Ug
aXJxIGludmVyc2lvbnMuCgpCdWd6aWxsYTogaHR0cHM6Ly9idWdzLmZyZWVkZXNrdG9wLm9yZy9z
aG93X2J1Zy5jZ2k/aWQ9MTExOTIzClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hyaXNA
Y2hyaXMtd2lsc29uLmNvLnVrPgpBY2tlZC1ieTogTWlrYSBLdW9wcGFsYSA8bWlrYS5rdW9wcGFs
YUBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3Rf
cG0uYyAgfCAgMiAtLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgICAgfCAx
NiAtLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMu
YyB8ICA1IC0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyAgICAgICB8ICAx
IC0KIDQgZmlsZXMgY2hhbmdlZCwgMjQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2d0X3BtLmMKaW5kZXggNDI3YWRlZDUxMmYyLi4wNmU3M2Q1NmNmY2YgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3BtLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYwpAQCAtMTc2LDkgKzE3Niw3IEBAIGludCBpbnRl
bF9ndF9yZXN1bWUoc3RydWN0IGludGVsX2d0ICpndCkKIAkJY2UgPSBlbmdpbmUtPmtlcm5lbF9j
b250ZXh0OwogCQlpZiAoY2UpIHsKIAkJCUdFTV9CVUdfT04oIWludGVsX2NvbnRleHRfaXNfcGlu
bmVkKGNlKSk7Ci0JCQltdXRleF9hY3F1aXJlKCZjZS0+cGluX211dGV4LmRlcF9tYXAsIDAsIDAs
IF9USElTX0lQXyk7CiAJCQljZS0+b3BzLT5yZXNldChjZSk7Ci0JCQltdXRleF9yZWxlYXNlKCZj
ZS0+cGluX211dGV4LmRlcF9tYXAsIDAsIF9USElTX0lQXyk7CiAJCX0KIAogCQllbmdpbmUtPnNl
cmlhbCsrOyAvKiBrZXJuZWwgY29udGV4dCBsb3N0ICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2xyYy5jCmluZGV4IGQwMDg4ZDAyMDIyMC4uZjlmM2U5ODViYjc5IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9scmMuYwpAQCAtMjM1LDE2ICsyMzUsNiBAQCBzdGF0aWMgdm9pZCBleGVjbGlz
dHNfaW5pdF9yZWdfc3RhdGUodTMyICpyZWdfc3RhdGUsCiAJCQkJICAgICBjb25zdCBzdHJ1Y3Qg
aW50ZWxfcmluZyAqcmluZywKIAkJCQkgICAgIGJvb2wgY2xvc2UpOwogCi1zdGF0aWMgdm9pZCBf
X2NvbnRleHRfcGluX2FjcXVpcmUoc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQotewotCW11dGV4
X2FjcXVpcmUoJmNlLT5waW5fbXV0ZXguZGVwX21hcCwgMiwgMCwgX1JFVF9JUF8pOwotfQotCi1z
dGF0aWMgdm9pZCBfX2NvbnRleHRfcGluX3JlbGVhc2Uoc3RydWN0IGludGVsX2NvbnRleHQgKmNl
KQotewotCW11dGV4X3JlbGVhc2UoJmNlLT5waW5fbXV0ZXguZGVwX21hcCwgMCwgX1JFVF9JUF8p
OwotfQotCiBzdGF0aWMgdm9pZCBtYXJrX2VpbyhzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkKIHsK
IAlpZiAoaTkxNV9yZXF1ZXN0X2NvbXBsZXRlZChycSkpCkBAIC0yNzkyLDkgKzI3ODIsNiBAQCBz
dGF0aWMgdm9pZCBfX2V4ZWNsaXN0c19yZXNldChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdp
bmUsIGJvb2wgc3RhbGxlZCkKIAljZSA9IHJxLT5od19jb250ZXh0OwogCUdFTV9CVUdfT04oIWk5
MTVfdm1hX2lzX3Bpbm5lZChjZS0+c3RhdGUpKTsKIAotCS8qIFByb2NsYWltIHdlIGhhdmUgZXhj
bHVzaXZlIGFjY2VzcyB0byB0aGUgY29udGV4dCBpbWFnZSEgKi8KLQlfX2NvbnRleHRfcGluX2Fj
cXVpcmUoY2UpOwotCiAJcnEgPSBhY3RpdmVfcmVxdWVzdChycSk7CiAJaWYgKCFycSkgewogCQkv
KiBJZGxlIGNvbnRleHQ7IHRpZHkgdXAgdGhlIHJpbmcgc28gd2UgY2FuIHJlc3RhcnQgYWZyZXNo
ICovCkBAIC0yODYwLDcgKzI4NDcsNiBAQCBzdGF0aWMgdm9pZCBfX2V4ZWNsaXN0c19yZXNldChz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIGJvb2wgc3RhbGxlZCkKIAlfX2V4ZWNsaXN0
c19yZXNldF9yZWdfc3RhdGUoY2UsIGVuZ2luZSk7CiAJX19leGVjbGlzdHNfdXBkYXRlX3JlZ19z
dGF0ZShjZSwgZW5naW5lKTsKIAljZS0+bHJjX2Rlc2MgfD0gQ1RYX0RFU0NfRk9SQ0VfUkVTVE9S
RTsgLyogcGFyYW5vaWQ6IEdQVSB3YXMgcmVzZXQhICovCi0JX19jb250ZXh0X3Bpbl9yZWxlYXNl
KGNlKTsKIAogdW53aW5kOgogCS8qIFB1c2ggYmFjayBhbnkgaW5jb21wbGV0ZSByZXF1ZXN0cyBm
b3IgcmVwbGF5IGFmdGVyIHRoZSByZXNldC4gKi8KQEAgLTQ1MDIsNyArNDQ4OCw2IEBAIHZvaWQg
aW50ZWxfbHJfY29udGV4dF9yZXNldChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAJ
CQkgICAgYm9vbCBzY3J1YikKIHsKIAlHRU1fQlVHX09OKCFpbnRlbF9jb250ZXh0X2lzX3Bpbm5l
ZChjZSkpOwotCV9fY29udGV4dF9waW5fYWNxdWlyZShjZSk7CiAKIAkvKgogCSAqIFdlIHdhbnQg
YSBzaW1wbGUgY29udGV4dCArIHJpbmcgdG8gZXhlY3V0ZSB0aGUgYnJlYWRjcnVtYiB1cGRhdGUu
CkBAIC00NTI4LDcgKzQ1MTMsNiBAQCB2b2lkIGludGVsX2xyX2NvbnRleHRfcmVzZXQoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCWludGVsX3JpbmdfdXBkYXRlX3NwYWNlKGNlLT5y
aW5nKTsKIAogCV9fZXhlY2xpc3RzX3VwZGF0ZV9yZWdfc3RhdGUoY2UsIGVuZ2luZSk7Ci0JX19j
b250ZXh0X3Bpbl9yZWxlYXNlKGNlKTsKIH0KIAogI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9J
OTE1X1NFTEZURVNUKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRl
c3RfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYwppbmRleCA1
ZGM2Nzk3ODFhMDguLjc1MTZkMWM5MDkyNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRl
c3RfbHJjLmMKQEAgLTE2OCwxMiArMTY4LDcgQEAgc3RhdGljIGludCBsaXZlX3VubGl0ZV9yZXN0
b3JlKHN0cnVjdCBpbnRlbF9ndCAqZ3QsIGludCBwcmlvKQogCQl9CiAJCUdFTV9CVUdfT04oIWNl
WzFdLT5yaW5nLT5zaXplKTsKIAkJaW50ZWxfcmluZ19yZXNldChjZVsxXS0+cmluZywgY2VbMV0t
PnJpbmctPnNpemUgLyAyKTsKLQotCQlsb2NhbF9pcnFfZGlzYWJsZSgpOyAvKiBhcHBlYXNlIGxv
Y2tkZXAgKi8KLQkJX19jb250ZXh0X3Bpbl9hY3F1aXJlKGNlWzFdKTsKIAkJX19leGVjbGlzdHNf
dXBkYXRlX3JlZ19zdGF0ZShjZVsxXSwgZW5naW5lKTsKLQkJX19jb250ZXh0X3Bpbl9yZWxlYXNl
KGNlWzFdKTsKLQkJbG9jYWxfaXJxX2VuYWJsZSgpOwogCiAJCXJxWzBdID0gaWd0X3NwaW5uZXJf
Y3JlYXRlX3JlcXVlc3QoJnNwaW4sIGNlWzBdLCBNSV9BUkJfQ0hFQ0spOwogCQlpZiAoSVNfRVJS
KHJxWzBdKSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwppbmRleCBkMmFjNTFmZTRmMDQuLjMx
MzBiMGM3ZWQ4MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKQEAgLTI2MTUsNyArMjYxNSw2
IEBAIHZvaWQgaTkxNV9vYV9pbml0X3JlZ19zdGF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY29udGV4
dCAqY2UsCiAJc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbTsKIAogCS8qIHBlcmYuZXhj
bHVzaXZlX3N0cmVhbSBzZXJpYWxpc2VkIGJ5IGdlbjhfY29uZmlndXJlX2FsbF9jb250ZXh0cygp
ICovCi0JbG9ja2RlcF9hc3NlcnRfaGVsZCgmY2UtPnBpbl9tdXRleCk7CiAKIAlpZiAoZW5naW5l
LT5jbGFzcyAhPSBSRU5ERVJfQ0xBU1MpCiAJCXJldHVybjsKLS0gCjIuMjQuMC5yYzAKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWls
aW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

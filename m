Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4269B1FDA7A
	for <lists+intel-gfx@lfdr.de>; Thu, 18 Jun 2020 02:43:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0C9A76EA25;
	Thu, 18 Jun 2020 00:43:28 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 920F76E8D6
 for <intel-gfx@lists.freedesktop.org>; Thu, 18 Jun 2020 00:42:54 +0000 (UTC)
IronPort-SDR: QyKnMLt+Ukpbxn3bw3VOHgHmXQFUqa2ZDBtnSCbYCmhjo2YGwUaxkbYbuiRnNJ7Ha882QqQT3K
 VDepe0Tg8jxA==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by fmsmga101.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 17 Jun 2020 17:42:54 -0700
IronPort-SDR: 6GSVVBo2hZ8WqZiFFSL44YBOGttJN8TAfGm60qTMOkEWE23m9fW95eMKGHGHGtLTBKrOteD7pu
 m5L+sPo4i58g==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.73,524,1583222400"; d="scan'208";a="477011923"
Received: from ldmartin1-desk.jf.intel.com ([10.165.21.151])
 by fmsmga006.fm.intel.com with ESMTP; 17 Jun 2020 17:42:54 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 17 Jun 2020 17:42:39 -0700
Message-Id: <20200618004240.16263-32-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20200618004240.16263-1-lucas.demarchi@intel.com>
References: <20200618004240.16263-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 31/32] drm/i915/dg1: Add initial DG1
 workarounds
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogU3R1YXJ0IFN1bW1lcnMgPHN0dWFydC5zdW1tZXJzQGludGVsLmNvbT4KCkRHMSBzaGFy
ZXMgc29tZSB3b3JrYXJvdW5kcyB3aXRoIFRHTCBhbmQgUktMIGFuZCBhbHNvIGhhcyBzb21lCmFk
ZGl0aW9uYWwgd29ya2Fyb3VuZHMgb2YgaXRzIG93bi4KCk1lZGlhIHBvd2VyIGdhdGluZyBzaG91
bGQgbm90IGJlIGFwcGxpZWQgc28gd2UganVzdCBzZXQgaXQgdG8Kbm9wX2luaXRfY2xvY2tfZ2F0
aW5nKCkuCgpCU3BlYzogNTM1MDgKCkNjOiBNYXR0IEF0d29vZCA8bWF0dGhldy5zLmF0d29vZEBp
bnRlbC5jb20+CkNjOiBNYXR0IFJvcGVyIDxtYXR0aGV3LmQucm9wZXJAaW50ZWwuY29tPgpDYzog
UmFkaGFrcmlzaG5hIFNyaXBhZGEgPHJhZGhha3Jpc2huYS5zcmlwYWRhQGludGVsLmNvbT4KQ2M6
IEpvc8OpIFJvYmVydG8gZGUgU291emEgPGpvc2Uuc291emFAaW50ZWwuY29tPgpTaWduZWQtb2Zm
LWJ5OiBTdHVhcnQgU3VtbWVycyA8c3R1YXJ0LnN1bW1lcnNAaW50ZWwuY29tPgpTaWduZWQtb2Zm
LWJ5OiBMdWNhcyBEZSBNYXJjaGkgPGx1Y2FzLmRlbWFyY2hpQGludGVsLmNvbT4KLS0tCiAuLi4v
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMgICAgfCAgNSArLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYyAgIHwgIDQgKy0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMgICB8IDkxICsrKysrKysrKysrKysr
KystLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggICAgICAgICAgICAgICB8IDEw
ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jICAgICAgICAgICAgICAgfCAxNyAr
KystCiA1IGZpbGVzIGNoYW5nZWQsIDEwNSBpbnNlcnRpb25zKCspLCAyMiBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlf
cG93ZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dl
ci5jCmluZGV4IDVkYzYyZTYwNjhmMjQuLjNhMDE2YWJkODBjNTMgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5jCkBAIC01NDYyLDgg
KzU0NjIsOSBAQCBzdGF0aWMgdm9pZCB0Z2xfYndfYnVkZHlfaW5pdChzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYpCiAJdW5zaWduZWQgbG9uZyBhYm94X21hc2sgPSBJTlRFTF9JTkZP
KGRldl9wcml2KS0+YWJveF9tYXNrOwogCWludCBjb25maWcsIGk7CiAKLQlpZiAoSVNfVEdMX1JF
VklEKGRldl9wcml2LCBUR0xfUkVWSURfQTAsIFRHTF9SRVZJRF9CMCkpCi0JCS8qIFdhXzE0MDk3
NjcxMDg6IHRnbCAqLworCWlmIChJU19ERzFfUkVWSUQoZGV2X3ByaXYsIERHMV9SRVZJRF9BMCwg
REcxX1JFVklEX0EwKSB8fAorCSAgICBJU19UR0xfUkVWSUQoZGV2X3ByaXYsIFRHTF9SRVZJRF9B
MCwgVEdMX1JFVklEX0IwKSkKKwkJLyogV2FfMTQwOTc2NzEwODp0Z2wsZGcxICovCiAJCXRhYmxl
ID0gd2FfMTQwOTc2NzEwOF9idWRkeV9wYWdlX21hc2tzOwogCWVsc2UKIAkJdGFibGUgPSB0Z2xf
YnVkZHlfcGFnZV9tYXNrczsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfc3ByaXRlLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nw
cml0ZS5jCmluZGV4IDYzYWM3OWY4OGZhMjEuLmJhMDNmMjQ1OWQ5YjUgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYwpAQCAtMjg0Miw4ICsyODQyLDggQEAg
c3RhdGljIGJvb2wgc2tsX3BsYW5lX2Zvcm1hdF9tb2Rfc3VwcG9ydGVkKHN0cnVjdCBkcm1fcGxh
bmUgKl9wbGFuZSwKIHN0YXRpYyBib29sIGdlbjEyX3BsYW5lX3N1cHBvcnRzX21jX2NjcyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCQkJCWVudW0gcGxhbmVfaWQgcGxhbmVf
aWQpCiB7Ci0JLyogV2FfMTQwMTA0NzcwMDg6dGdsW2EwLi5jMF0scmtsW2FsbF0gKi8KLQlpZiAo
SVNfUk9DS0VUTEFLRShkZXZfcHJpdikgfHwKKwkvKiBXYV8xNDAxMDQ3NzAwODp0Z2xbYTAuLmMw
XSxya2xbYWxsXSxkZzFbYWxsXSAqLworCWlmIChJU19ERzEoZGV2X3ByaXYpIHx8IElTX1JPQ0tF
VExBS0UoZGV2X3ByaXYpIHx8CiAJICAgIElTX1RHTF9SRVZJRChkZXZfcHJpdiwgVEdMX1JFVklE
X0EwLCBUR0xfUkVWSURfQzApKQogCQlyZXR1cm4gZmFsc2U7CiAKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jCmluZGV4IDc0MTcxMGNhMmI5YTUuLjVhOTc3MjAx
MWQzMzUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91
bmRzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYwpA
QCAtNjQxLDYgKzY0MSwyMCBAQCBzdGF0aWMgdm9pZCB0Z2xfY3R4X3dvcmthcm91bmRzX2luaXQo
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCSAgICAgICAwKTsKIH0KIAorc3RhdGlj
IHZvaWQgZGcxX2N0eF93b3JrYXJvdW5kc19pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSwKKwkJCQkgICAgIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndhbCkKK3sKKwlnZW4xMl9jdHhf
d29ya2Fyb3VuZHNfaW5pdChlbmdpbmUsIHdhbCk7CisKKwkvKiBXYV8xNDA5MDQ0NzY0ICovCisJ
V0FfQ0xSX0JJVF9NQVNLRUQoR0VOMTFfQ09NTU9OX1NMSUNFX0NISUNLRU4zLAorCQkJICBERzFf
RkxPQVRfUE9JTlRfQkxFTkRfT1BUX1NUUklDVF9NT0RFX0VOKTsKKworCS8qIFdhXzIyMDEwNDkz
Mjk4ICovCisJV0FfU0VUX0JJVF9NQVNLRUQoSElaX0NISUNLRU4sCisJCQkgIERHMV9IWl9SRUFE
X1NVUFBSRVNTSU9OX09QVElNSVpBVElPTl9ESVNBQkxFKTsKK30KKwogc3RhdGljIHZvaWQKIF9f
aW50ZWxfZW5naW5lX2luaXRfY3R4X3dhKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwK
IAkJCSAgIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndhbCwKQEAgLTY1Myw3ICs2NjcsOSBAQCBfX2lu
dGVsX2VuZ2luZV9pbml0X2N0eF93YShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAK
IAl3YV9pbml0X3N0YXJ0KHdhbCwgbmFtZSwgZW5naW5lLT5uYW1lKTsKIAotCWlmIChJU19ST0NL
RVRMQUtFKGk5MTUpIHx8IElTX1RJR0VSTEFLRShpOTE1KSkKKwlpZiAoSVNfREcxKGk5MTUpKQor
CQlkZzFfY3R4X3dvcmthcm91bmRzX2luaXQoZW5naW5lLCB3YWwpOworCWVsc2UgaWYgKElTX1JP
Q0tFVExBS0UoaTkxNSkgfHwgSVNfVElHRVJMQUtFKGk5MTUpKQogCQl0Z2xfY3R4X3dvcmthcm91
bmRzX2luaXQoZW5naW5lLCB3YWwpOwogCWVsc2UgaWYgKElTX0dFTihpOTE1LCAxMikpCiAJCWdl
bjEyX2N0eF93b3JrYXJvdW5kc19pbml0KGVuZ2luZSwgd2FsKTsKQEAgLTEyMTMsMTAgKzEyMjks
MzAgQEAgdGdsX2d0X3dvcmthcm91bmRzX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUsIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndhbCkKIAkJCSAgICBMM19DTEtHQVRFX0RJUyB8IEwz
X0NSMlhfQ0xLR0FURV9ESVMpOwogfQogCitzdGF0aWMgdm9pZAorZGcxX2d0X3dvcmthcm91bmRz
X2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHN0cnVjdCBpOTE1X3dhX2xpc3Qg
KndhbCkKK3sKKwlnZW4xMl9ndF93b3JrYXJvdW5kc19pbml0KGk5MTUsIHdhbCk7CisKKwkvKiBX
YV8xNjA3MDg3MDU2OmRnMSAqLworCWlmIChJU19ERzFfUkVWSUQoaTkxNSwgREcxX1JFVklEX0Ew
LCBERzFfUkVWSURfQTApKQorCQl3YV93cml0ZV9vcih3YWwsCisJCQkgICAgU0xJQ0VfVU5JVF9M
RVZFTF9DTEtHQVRFLAorCQkJICAgIEwzX0NMS0dBVEVfRElTIHwgTDNfQ1IyWF9DTEtHQVRFX0RJ
Uyk7CisKKwkvKiBXYV8xNDA5NDIwNjA0OmRnMSAqLworCWlmIChJU19ERzEoaTkxNSkpCisJCXdh
X3dyaXRlX29yKHdhbCwKKwkJCSAgICBTVUJTTElDRV9VTklUX0xFVkVMX0NMS0dBVEUyLAorCQkJ
ICAgIENQU1NVTklUX0NMS0dBVEVfRElTKTsKK30KKwogc3RhdGljIHZvaWQKIGd0X2luaXRfd29y
a2Fyb3VuZHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHN0cnVjdCBpOTE1X3dhX2xp
c3QgKndhbCkKIHsKLQlpZiAoSVNfVElHRVJMQUtFKGk5MTUpKQorCWlmIChJU19ERzEoaTkxNSkp
CisJCWRnMV9ndF93b3JrYXJvdW5kc19pbml0KGk5MTUsIHdhbCk7CisJZWxzZSBpZiAoSVNfVElH
RVJMQUtFKGk5MTUpKQogCQl0Z2xfZ3Rfd29ya2Fyb3VuZHNfaW5pdChpOTE1LCB3YWwpOwogCWVs
c2UgaWYgKElTX0dFTihpOTE1LCAxMikpCiAJCWdlbjEyX2d0X3dvcmthcm91bmRzX2luaXQoaTkx
NSwgd2FsKTsKQEAgLTE1ODEsNiArMTYxNywyMCBAQCBzdGF0aWMgdm9pZCB0Z2xfd2hpdGVsaXN0
X2J1aWxkKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAl9CiB9CiAKK3N0YXRpYyB2
b2lkIGRnMV93aGl0ZWxpc3RfYnVpbGQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQor
eworCXN0cnVjdCBpOTE1X3dhX2xpc3QgKncgPSAmZW5naW5lLT53aGl0ZWxpc3Q7CisKKwl0Z2xf
d2hpdGVsaXN0X2J1aWxkKGVuZ2luZSk7CisKKwkvKiBHRU46QlVHOjE0MDkyODA0NDE6ZGcxICov
CisJaWYgKElTX0RHMV9SRVZJRChlbmdpbmUtPmk5MTUsIERHMV9SRVZJRF9BMCwgREcxX1JFVklE
X0EwKSAmJgorCSAgICAoZW5naW5lLT5jbGFzcyA9PSBSRU5ERVJfQ0xBU1MgfHwKKwkgICAgIGVu
Z2luZS0+Y2xhc3MgPT0gQ09QWV9FTkdJTkVfQ0xBU1MpKQorCQl3aGl0ZWxpc3RfcmVnX2V4dCh3
LCBSSU5HX0lEKGVuZ2luZS0+bW1pb19iYXNlKSwKKwkJCQkgIFJJTkdfRk9SQ0VfVE9fTk9OUFJJ
Vl9BQ0NFU1NfUkQpOworfQorCiB2b2lkIGludGVsX2VuZ2luZV9pbml0X3doaXRlbGlzdChzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUgPSBlbmdpbmUtPmk5MTU7CkBAIC0xNTg4LDcgKzE2MzgsOSBAQCB2b2lkIGludGVsX2Vu
Z2luZV9pbml0X3doaXRlbGlzdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAKIAl3
YV9pbml0X3N0YXJ0KHcsICJ3aGl0ZWxpc3QiLCBlbmdpbmUtPm5hbWUpOwogCi0JaWYgKElTX0dF
TihpOTE1LCAxMikpCisJaWYgKElTX0RHMShpOTE1KSkKKwkJZGcxX3doaXRlbGlzdF9idWlsZChl
bmdpbmUpOworCWVsc2UgaWYgKElTX0dFTihpOTE1LCAxMikpCiAJCXRnbF93aGl0ZWxpc3RfYnVp
bGQoZW5naW5lKTsKIAllbHNlIGlmIChJU19HRU4oaTkxNSwgMTEpKQogCQlpY2xfd2hpdGVsaXN0
X2J1aWxkKGVuZ2luZSk7CkBAIC0xNjQyLDE1ICsxNjk0LDE4IEBAIHJjc19lbmdpbmVfd2FfaW5p
dChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndh
bCkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGVuZ2luZS0+aTkxNTsKIAot
CWlmIChJU19UR0xfUkVWSUQoaTkxNSwgVEdMX1JFVklEX0EwLCBUR0xfUkVWSURfQTApKSB7CisJ
aWYgKElTX0RHMV9SRVZJRChpOTE1LCBERzFfUkVWSURfQTAsIERHMV9SRVZJRF9BMCkgfHwKKwkg
ICAgSVNfVEdMX1JFVklEKGk5MTUsIFRHTF9SRVZJRF9BMCwgVEdMX1JFVklEX0EwKSkgewogCQkv
KgotCQkgKiBXYV8xNjA3MTM4MzM2OnRnbAotCQkgKiBXYV8xNjA3MDYzOTg4OnRnbAorCQkgKiBX
YV8xNjA3MTM4MzM2OnRnbFthMF0sZGcxW2EwXQorCQkgKiBXYV8xNjA3MDYzOTg4OnRnbFthMF0s
ZGcxW2EwXQogCQkgKi8KIAkJd2Ffd3JpdGVfb3Iod2FsLAogCQkJICAgIEdFTjlfQ1RYX1BSRUVN
UFRfUkVHLAogCQkJICAgIEdFTjEyX0RJU0FCTEVfUE9TSF9CVVNZX0ZGX0RPUF9DRyk7CisJfQog
CisJaWYgKElTX1RHTF9SRVZJRChpOTE1LCBUR0xfUkVWSURfQTAsIFRHTF9SRVZJRF9BMCkpIHsK
IAkJLyoKIAkJICogV2FfMTYwNjY3OTEwMzp0Z2wKIAkJICogKHNlZSBhbHNvIFdhXzE2MDY2ODIx
NjY6aWNsKQpAQCAtMTY2MywzMiArMTcxOCw0MCBAQCByY3NfZW5naW5lX3dhX2luaXQoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLCBzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwpCiAJCXdh
X3dyaXRlX29yKHdhbCwKIAkJCSAgICBHRU43X0ZGX1RIUkVBRF9NT0RFLAogCQkJICAgIEdFTjEy
X0ZGX1RFU1NFTEFUSU9OX0RPUF9HQVRFX0RJU0FCTEUpOworCX0KIAotCQkvKiBXYV8xNDA4NjE1
MDcyOnRnbCAqLworCWlmIChJU19ERzEoaTkxNSkgfHwgSVNfVEdMX1JFVklEKGk5MTUsIFRHTF9S
RVZJRF9BMCwgVEdMX1JFVklEX0EwKSkgeworCQkvKiBXYV8xNDA4NjE1MDcyOnRnbFthMF0sZGcx
ICovCiAJCXdhX3dyaXRlX29yKHdhbCwgVU5TTElDRV9VTklUX0xFVkVMX0NMS0dBVEUyLAogCQkJ
ICAgIFZTVU5JVF9DTEtHQVRFX0RJU19UR0wpOwogCX0KIAotCWlmIChJU19ST0NLRVRMQUtFKGk5
MTUpIHx8IElTX1RJR0VSTEFLRShpOTE1KSkgewotCQkvKiBXYV8xNjA2OTMxNjAxOnRnbCxya2wg
Ki8KKwlpZiAoSVNfREcxKGk5MTUpIHx8IElTX1JPQ0tFVExBS0UoaTkxNSkgfHwgSVNfVElHRVJM
QUtFKGk5MTUpKSB7CisJCS8qIFdhXzE2MDY5MzE2MDE6dGdsLHJrbCxkZzEgKi8KIAkJd2FfbWFz
a2VkX2VuKHdhbCwgR0VON19ST1dfQ0hJQ0tFTjIsIEdFTjEyX0RJU0FCTEVfRUFSTFlfUkVBRCk7
CisJfQogCi0JCS8qIFdhXzE0MDk4MDQ4MDg6dGdsLHJrbCAqLworCWlmIChJU19ERzFfUkVWSUQo
aTkxNSwgREcxX1JFVklEX0EwLCBERzFfUkVWSURfQTApIHx8CisJICAgIElTX1JPQ0tFVExBS0Uo
aTkxNSkgfHwgSVNfVElHRVJMQUtFKGk5MTUpKSB7CisJCS8qIFdhXzE0MDk4MDQ4MDg6dGdsLHJr
bCxkZzFbYTBdICovCiAJCXdhX21hc2tlZF9lbih3YWwsIEdFTjdfUk9XX0NISUNLRU4yLAogCQkJ
ICAgICBHRU4xMl9QVVNIX0NPTlNUX0RFUkVGX0hPTERfRElTKTsKIAogCQkvKgogCQkgKiBXYV8x
NDA5MDg1MjI1OnRnbAotCQkgKiBXYV8xNDAxMDIyOTIwNjp0Z2wscmtsCisJCSAqIFdhXzE0MDEw
MjI5MjA2OnRnbCxya2wsZGcxW2EwXQogCQkgKi8KIAkJd2FfbWFza2VkX2VuKHdhbCwgR0VOOV9S
T1dfQ0hJQ0tFTjQsIEdFTjEyX0RJU0FCTEVfVERMX1BVU0gpOwogCiAJCS8qCiAJCSAqIFdhXzE2
MDcwMzAzMTc6dGdsCiAJCSAqIFdhXzE2MDcxODY1MDA6dGdsCi0JCSAqIFdhXzE2MDcyOTc2Mjc6
dGdsLHJrbCB0aGVyZSBhcmUgbXVsdGlwbGUgZW50cmllcyBmb3IgdGhpcwotCQkgKiBXQSBpbiB0
aGUgQlNwZWM7IHNvbWUgaW5kaWNhdGUgdGhpcyBpcyBhbiBBMC1vbmx5IFdBLAotCQkgKiBvdGhl
cnMgaW5kaWNhdGUgaXQgYXBwbGllcyB0byBhbGwgc3RlcHBpbmdzLgorCQkgKiBXYV8xNjA3Mjk3
NjI3OnRnbCxya2wsZGcxW2EwXQorCQkgKgorCQkgKiBPbiBUR0wgYW5kIFJLTCB0aGVyZSBhcmUg
bXVsdGlwbGUgZW50cmllcyBmb3IgdGhpcyBXQSBpbiB0aGUKKwkJICogQlNwZWM7IHNvbWUgaW5k
aWNhdGUgdGhpcyBpcyBhbiBBMC1vbmx5IFdBLCBvdGhlcnMgaW5kaWNhdGUKKwkJICogaXQgYXBw
bGllcyB0byBhbGwgc3RlcHBpbmdzIHNvIHdlIHRydXN0IHRoZSAiYWxsIHN0ZXBwaW5ncy4iCisJ
CSAqIEZvciBERzEgdGhpcyBvbmx5IGFwcGxpZXMgdG8gQTAuCiAJCSAqLwogCQl3YV9tYXNrZWRf
ZW4od2FsLAogCQkJICAgICBHRU42X1JDX1NMRUVQX1BTTUlfQ09OVFJPTCwKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3JlZy5oCmluZGV4IDM0ZWQ0MTkyODNhNzAuLjBmZDZhZWQ5MDhjZGUgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9yZWcuaApAQCAtMjUzMCw2ICsyNTMwLDcgQEAgc3RhdGljIGlubGluZSBib29sIGk5
MTVfbW1pb19yZWdfdmFsaWQoaTkxNV9yZWdfdCByZWcpCiAjZGVmaW5lIFJJTkdfUFNNSV9DVEwo
YmFzZSkJX01NSU8oKGJhc2UpICsgMHg1MCkKICNkZWZpbmUgUklOR19NQVhfSURMRShiYXNlKQlf
TU1JTygoYmFzZSkgKyAweDU0KQogI2RlZmluZSBSSU5HX0hXU19QR0EoYmFzZSkJX01NSU8oKGJh
c2UpICsgMHg4MCkKKyNkZWZpbmUgUklOR19JRChiYXNlKQkJX01NSU8oKGJhc2UpICsgMHg4YykK
ICNkZWZpbmUgUklOR19IV1NfUEdBX0dFTjYoYmFzZSkJX01NSU8oKGJhc2UpICsgMHgyMDgwKQog
I2RlZmluZSBSSU5HX1JFU0VUX0NUTChiYXNlKQlfTU1JTygoYmFzZSkgKyAweGQwKQogI2RlZmlu
ZSAgIFJFU0VUX0NUTF9DQVRfRVJST1IJICAgUkVHX0JJVCgyKQpAQCAtNDE0NCw2ICs0MTQ1LDcg
QEAgZW51bSB7CiAKICNkZWZpbmUgR0VOOV9DTEtHQVRFX0RJU18zCQlfTU1JTygweDQ2NTM4KQog
I2RlZmluZSAgIFRHTF9WUkhfR0FUSU5HX0RJUwkJUkVHX0JJVCgzMSkKKyNkZWZpbmUgICBEUFRf
R0FUSU5HX0RJUwkJUkVHX0JJVCgyMikKIAogI2RlZmluZSBHRU45X0NMS0dBVEVfRElTXzQJCV9N
TUlPKDB4NDY1M0MpCiAjZGVmaW5lICAgQlhUX0dNQlVTX0dBVElOR19ESVMJCSgxIDw8IDE0KQpA
QCAtNzk1OSwxMiArNzk2MSwxNCBAQCBlbnVtIHsKICNkZWZpbmUgR0VOOF9MM0NOVExSRUcJX01N
SU8oMHg3MDM0KQogICAjZGVmaW5lIEdFTjhfRVJSREVUQkNUUkwgKDEgPDwgOSkKIAotI2RlZmlu
ZSBHRU4xMV9DT01NT05fU0xJQ0VfQ0hJQ0tFTjMJCV9NTUlPKDB4NzMwNCkKLSAgI2RlZmluZSBH
RU4xMV9CTEVORF9FTUJfRklYX0RJU0FCTEVfSU5fUkNDCSgxIDw8IDExKQotICAjZGVmaW5lIEdF
TjEyX0RJU0FCTEVfQ1BTX0FXQVJFX0NPTE9SX1BJUEUJKDEgPDwgOSkKKyNkZWZpbmUgR0VOMTFf
Q09NTU9OX1NMSUNFX0NISUNLRU4zCQkJX01NSU8oMHg3MzA0KQorICAjZGVmaW5lIERHMV9GTE9B
VF9QT0lOVF9CTEVORF9PUFRfU1RSSUNUX01PREVfRU4JUkVHX0JJVCgxMikKKyAgI2RlZmluZSBH
RU4xMV9CTEVORF9FTUJfRklYX0RJU0FCTEVfSU5fUkNDCQlSRUdfQklUKDExKQorICAjZGVmaW5l
IEdFTjEyX0RJU0FCTEVfQ1BTX0FXQVJFX0NPTE9SX1BJUEUJCVJFR19CSVQoOSkKIAogI2RlZmlu
ZSBISVpfQ0hJQ0tFTgkJCQkJX01NSU8oMHg3MDE4KQogIyBkZWZpbmUgQ0hWX0haXzhYOF9NT0RF
X0lOXzFYCQkJCSgxIDw8IDE1KQorIyBkZWZpbmUgREcxX0haX1JFQURfU1VQUFJFU1NJT05fT1BU
SU1JWkFUSU9OX0RJU0FCTEUgICAoMSA8PCAxNCkKICMgZGVmaW5lIEJEV19ISVpfUE9XRVJfQ09N
UElMRVJfQ0xPQ0tfR0FUSU5HX0RJU0FCTEUJKDEgPDwgMykKIAogI2RlZmluZSBHRU45X1NMSUNF
X0NPTU1PTl9FQ09fQ0hJQ0tFTjAJCV9NTUlPKDB4NzMwOCkKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX3BtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5j
CmluZGV4IDJhMzJkNjIzMDc5NTQuLjc3YmYxYThjMjg1YjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
cG0uYwpAQCAtNzEyMyw2ICs3MTIzLDE5IEBAIHN0YXRpYyB2b2lkIHRnbF9pbml0X2Nsb2NrX2dh
dGluZyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJCQkgMCwgREZSX0RJU0FC
TEUpOwogfQogCitzdGF0aWMgdm9pZCBkZzFfaW5pdF9jbG9ja19nYXRpbmcoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2KQoreworCS8qCisJICogQXMgb3Bwb3NlZCB0byBUR0wsIHdl
IHNob3VsZCBub3QgdG91Y2ggdGhlIHJlZ2lzdGVycyBmb3IgIG1lZGlhIHBvd2VyCisJICogZ2F0
aW5nCisJICovCisKKwkvKiBXYV8xNDAxMDA5Njg0NDpkZzFbYTBdICovCisJaWYgKElTX0RHMV9S
RVZJRChkZXZfcHJpdiwgREcxX1JFVklEX0EwLCBERzFfUkVWSURfQTApKQorCQlJOTE1X1dSSVRF
KEdFTjlfQ0xLR0FURV9ESVNfMywgSTkxNV9SRUFEKEdFTjlfQ0xLR0FURV9ESVNfMykgfAorCQkJ
ICAgRFBUX0dBVElOR19ESVMpOworfQorCiBzdGF0aWMgdm9pZCBjbnBfaW5pdF9jbG9ja19nYXRp
bmcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogewogCWlmICghSEFTX1BDSF9D
TlAoZGV2X3ByaXYpKQpAQCAtNzQ5OSw3ICs3NTEyLDkgQEAgc3RhdGljIHZvaWQgbm9wX2luaXRf
Y2xvY2tfZ2F0aW5nKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKICAqLwogdm9p
ZCBpbnRlbF9pbml0X2Nsb2NrX2dhdGluZ19ob29rcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpCiB7Ci0JaWYgKElTX0dFTihkZXZfcHJpdiwgMTIpKQorCWlmIChJU19ERzEoZGV2
X3ByaXYpKQorCQlkZXZfcHJpdi0+ZGlzcGxheS5pbml0X2Nsb2NrX2dhdGluZyA9IGRnMV9pbml0
X2Nsb2NrX2dhdGluZzsKKwllbHNlIGlmIChJU19HRU4oZGV2X3ByaXYsIDEyKSkKIAkJZGV2X3By
aXYtPmRpc3BsYXkuaW5pdF9jbG9ja19nYXRpbmcgPSB0Z2xfaW5pdF9jbG9ja19nYXRpbmc7CiAJ
ZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCAxMSkpCiAJCWRldl9wcml2LT5kaXNwbGF5LmluaXRf
Y2xvY2tfZ2F0aW5nID0gaWNsX2luaXRfY2xvY2tfZ2F0aW5nOwotLSAKMi4yNi4yCgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGlu
ZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

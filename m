Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3358410CCF9
	for <lists+intel-gfx@lfdr.de>; Thu, 28 Nov 2019 17:44:50 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F24E96E85E;
	Thu, 28 Nov 2019 16:44:47 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 424486E85E
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Nov 2019 16:44:46 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19379329-1500050 
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Nov 2019 16:44:43 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 28 Nov 2019 16:44:42 +0000
Message-Id: <20191128164442.10882-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [CI] drm/i915: Introduce DRM_I915_GEM_MMAP_OFFSET
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogQWJkaWVsIEphbnVsZ3VlIDxhYmRpZWwuamFudWxndWVAbGludXguaW50ZWwuY29tPgoK
VGhpcyBpcyByZWFsbHkganVzdCBhbiBhbGlhcyBvZiBtbWFwX2d0dC4gVGhlICdtbWFwIG9mZnNl
dCcgbm9tZW5jbGF0dXJlCmNvbWVzIGZyb20gdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoaXMgaW9j
dGwgd2hpY2ggaXMgdGhlIG9mZnNldCBpbnRvIHRoZQpkZXZpY2UgZmQgd2hpY2ggdXNlcnBhY2Ug
dXNlcyB3aXRoIG1tYXAoMikuCgptbWFwX2d0dCB3YXMgb3VyIGluaXRpYWwgbW1hcF9vZmZzZXQg
aW1wbGVtZW50YXRpb24sIHRoaXMgZXh0ZW5kcwpvdXIgQ1BVIG1tYXAgc3VwcG9ydCB0byBhbGxv
dyBhZGRpdGlvbmFsIGZhdWx0IGhhbmRsZXJzIHRoYXQgZGVwZW5kcyBvbgp0aGUgb2JqZWN0J3Mg
YmFja2luZyBwYWdlcy4KCk5vdGUgdGhhdCB3ZSBtdWx0aXBsZXggbW1hcF9ndHQgYW5kIG1tYXBf
b2Zmc2V0IHRocm91Z2ggdGhlIHNhbWUgaW9jdGwsCmFuZCB1c2UgdGhlIHplcm8gZXh0ZW5kaW5n
IGJlaGF2aW91ciBvZiBkcm0gdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuCnRoZW0sIHdoZW4gd2Ug
aW5zcGVjdCB0aGUgZmxhZ3MuCgpUbyBzdXBwb3J0IG11bHRpcGxlIG1tYXAgdHlwZXMgb24gYW4g
b2JqZWN0IHdlIG5lZWQgdG8gc3VwcG9ydCBtdWx0aXBsZQptbWFwX29mZnNldHMgZm9yIGFuIG9i
amVjdCAoZWFjaCBvZmZzZXQgaW4gdGhlIGdsb2JhbCBkZXZpY2UgYWRkcmVzcwpzcGFjZSBjb3Jy
ZXNwb25kaW5nIHRvIGEgdW5pcXVlIGluc3RhbmNlIG9mIHRoZSBvYmplY3QgZm9yIGEgZmlsZSAr
IG1tYXAKdHlwZSkuIEFzIHdlIGRyb3AgdGhlIHNpbXBsaWZpZWQgZHJtIGNvcmUgaWRlYSBvZiBh
IHNpbmdsZSBtbWFwX29mZnNldCwKd2UgbmVlZCB0byBwcm92aWRlIHJlcGxhY2VtZW50IGhvb2tz
IGZvciB0aGUgZHVtYiBtbWFwIGludGVyZmFjZSBhcwp3ZWxsLgoKTGluazogaHR0cHM6Ly9naXRs
YWIuZnJlZWRlc2t0b3Aub3JnL21lc2EvbWVzYS9tZXJnZV9yZXF1ZXN0cy8xNjc1ClRlc3RjYXNl
OiBpZ3QvZ2VtX21tYXBfb2Zmc2V0ClNpZ25lZC1vZmYtYnk6IEFiZGllbCBKYW51bGd1ZSA8YWJk
aWVsLmphbnVsZ3VlQGxpbnV4LmludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogTWF0dGhldyBBdWxk
IDxtYXR0aGV3LmF1bGRAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9kb21haW4uYyAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2lvY3Rscy5oICAgIHwgICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fbW1hbi5jICAgICAgfCA0NjQgKysrKysrKysrKysrKystLS0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5oICAgICAgfCAgMzQgKysKIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYyAgICB8ICAxOCArCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmggICAgfCAgIDcgKy0KIC4uLi9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oICB8ICAyMiArCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fcGFnZXMuYyAgICAgfCAgIDMgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX3RpbGluZy5jICAgIHwgICAxICsKIC4uLi9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL2k5MTVfZ2VtX21tYW4uYyAgICB8ICA4NSArKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9yZXNldC5jICAgICAgICAgfCAgIDcgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZHJ2LmMgICAgICAgICAgICAgICB8ICAxNSArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuaCAgICAgICAgICAgICAgIHwgICA0IC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2VtLmMgICAgICAgICAgICAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZXRwYXJhbS5jICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1h
LmMgICAgICAgICAgICAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEu
aCAgICAgICAgICAgICAgIHwgICAzICsKIGluY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaCAgICAg
ICAgICAgICAgICAgICB8ICAyNyArCiAxOCBmaWxlcyBjaGFuZ2VkLCA1NjUgaW5zZXJ0aW9ucygr
KSwgMTM5IGRlbGV0aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9tbWFuLmgKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fZG9tYWluLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fZG9tYWluLmMKaW5kZXggOWFlYmNmMjYzMTkxLi5iMDZjMTcyNWQ0NDUgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kb21haW4uYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG9tYWluLmMKQEAgLTEzLDYgKzEzLDcgQEAKICNp
bmNsdWRlICJpOTE1X2dlbV9vYmplY3QuaCIKICNpbmNsdWRlICJpOTE1X3ZtYS5oIgogI2luY2x1
ZGUgImk5MTVfZ2VtX2xtZW0uaCIKKyNpbmNsdWRlICJpOTE1X2dlbV9tbWFuLmgiCiAKIHN0YXRp
YyB2b2lkIF9faTkxNV9nZW1fb2JqZWN0X2ZsdXNoX2Zvcl9kaXNwbGF5KHN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0ICpvYmopCiB7CkBAIC0yNjMsNyArMjY0LDcgQEAgaW50IGk5MTVfZ2VtX29i
amVjdF9zZXRfY2FjaGVfbGV2ZWwoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJ
CX0KIAogCQkJaWYgKG9iai0+dXNlcmZhdWx0X2NvdW50KQotCQkJCV9faTkxNV9nZW1fb2JqZWN0
X3JlbGVhc2VfbW1hcChvYmopOworCQkJCV9faTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9n
dHQob2JqKTsKIAogCQkJLyoKIAkJCSAqIEFzIHdlIG5vIGxvbmdlciBuZWVkIGEgZmVuY2UgZm9y
IEdUVCBhY2Nlc3MsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1faW9jdGxzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1faW9jdGxzLmgK
aW5kZXggZGRjN2YyYTUyYjNlLi44N2Q4YjI3ZjQyNmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9pb2N0bHMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1faW9jdGxzLmgKQEAgLTI4LDggKzI4LDggQEAgaW50IGk5MTVfZ2VtX21h
ZHZpc2VfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKIAkJCSAgIHN0
cnVjdCBkcm1fZmlsZSAqZmlsZSk7CiBpbnQgaTkxNV9nZW1fbW1hcF9pb2N0bChzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAogCQkJc3RydWN0IGRybV9maWxlICpmaWxlKTsKLWlu
dCBpOTE1X2dlbV9tbWFwX2d0dF9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpk
YXRhLAotCQkJICAgIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSk7CitpbnQgaTkxNV9nZW1fbW1hcF9v
ZmZzZXRfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKKwkJCSAgICAg
ICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpOwogaW50IGk5MTVfZ2VtX3ByZWFkX2lvY3RsKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJCQkgc3RydWN0IGRybV9maWxlICpmaWxl
KTsKIGludCBpOTE1X2dlbV9wd3JpdGVfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9p
ZCAqZGF0YSwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9t
bWFuLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5jCmluZGV4IGQ2
MDk3MzYwM2NjMS4uNDMxOGYyMzFmNjYwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fbW1hbi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9tbWFuLmMKQEAgLTUsNiArNSw3IEBACiAgKi8KIAogI2luY2x1ZGUgPGxpbnV4L21tYW4u
aD4KKyNpbmNsdWRlIDxsaW51eC9wZm5fdC5oPgogI2luY2x1ZGUgPGxpbnV4L3NpemVzLmg+CiAK
ICNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgpAQCAtMTQsNiArMTUsNyBAQAogI2luY2x1ZGUgImk5
MTVfZ2VtX2d0dC5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX2lvY3Rscy5oIgogI2luY2x1ZGUgImk5
MTVfZ2VtX29iamVjdC5oIgorI2luY2x1ZGUgImk5MTVfZ2VtX21tYW4uaCIKICNpbmNsdWRlICJp
OTE1X3RyYWNlLmgiCiAjaW5jbHVkZSAiaTkxNV92bWEuaCIKIApAQCAtMTQ0LDYgKzE0Niw5IEBA
IHN0YXRpYyB1bnNpZ25lZCBpbnQgdGlsZV9yb3dfcGFnZXMoY29uc3Qgc3RydWN0IGRybV9pOTE1
X2dlbV9vYmplY3QgKm9iaikKICAqIDMgLSBSZW1vdmUgaW1wbGljaXQgc2V0LWRvbWFpbihHVFQp
IGFuZCBzeW5jaHJvbmlzYXRpb24gb24gaW5pdGlhbAogICogICAgIHBhZ2VmYXVsdDsgc3dhcGlu
IHJlbWFpbnMgdHJhbnNwYXJlbnQuCiAgKgorICogNCAtIFN1cHBvcnQgbXVsdGlwbGUgZmF1bHQg
aGFuZGxlcnMgcGVyIG9iamVjdCBkZXBlbmRpbmcgb24gb2JqZWN0J3MKKyAqICAgICBiYWNraW5n
IHN0b3JhZ2UgKGEuay5hLiBNTUFQX09GRlNFVCkuCisgKgogICogUmVzdHJpY3Rpb25zOgogICoK
ICAqICAqIHNub29wYWJsZSBvYmplY3RzIGNhbm5vdCBiZSBhY2Nlc3NlZCB2aWEgdGhlIEdUVC4g
SXQgY2FuIGNhdXNlIG1hY2hpbmUKQEAgLTE3MSw3ICsxNzYsNyBAQCBzdGF0aWMgdW5zaWduZWQg
aW50IHRpbGVfcm93X3BhZ2VzKGNvbnN0IHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmop
CiAgKi8KIGludCBpOTE1X2dlbV9tbWFwX2d0dF92ZXJzaW9uKHZvaWQpCiB7Ci0JcmV0dXJuIDM7
CisJcmV0dXJuIDQ7CiB9CiAKIHN0YXRpYyBpbmxpbmUgc3RydWN0IGk5MTVfZ2d0dF92aWV3CkBA
IC0xOTcsMjkgKzIwMiw4MiBAQCBjb21wdXRlX3BhcnRpYWxfdmlldyhjb25zdCBzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCXJldHVybiB2aWV3OwogfQogCi0vKioKLSAqIGk5MTVf
Z2VtX2ZhdWx0IC0gZmF1bHQgYSBwYWdlIGludG8gdGhlIEdUVAotICogQHZtZjogZmF1bHQgaW5m
bwotICoKLSAqIFRoZSBmYXVsdCBoYW5kbGVyIGlzIHNldCB1cCBieSBkcm1fZ2VtX21tYXAoKSB3
aGVuIGEgb2JqZWN0IGlzIEdUVCBtYXBwZWQKLSAqIGZyb20gdXNlcnNwYWNlLiAgVGhlIGZhdWx0
IGhhbmRsZXIgdGFrZXMgY2FyZSBvZiBiaW5kaW5nIHRoZSBvYmplY3QgdG8KLSAqIHRoZSBHVFQg
KGlmIG5lZWRlZCksIGFsbG9jYXRpbmcgYW5kIHByb2dyYW1taW5nIGEgZmVuY2UgcmVnaXN0ZXIg
KGFnYWluLAotICogb25seSBpZiBuZWVkZWQgYmFzZWQgb24gd2hldGhlciB0aGUgb2xkIHJlZyBp
cyBzdGlsbCB2YWxpZCBvciB0aGUgb2JqZWN0Ci0gKiBpcyB0aWxlZCkgYW5kIGluc2VydGluZyBh
IG5ldyBQVEUgaW50byB0aGUgZmF1bHRpbmcgcHJvY2Vzcy4KLSAqCi0gKiBOb3RlIHRoYXQgdGhl
IGZhdWx0aW5nIHByb2Nlc3MgbWF5IGludm9sdmUgZXZpY3RpbmcgZXhpc3Rpbmcgb2JqZWN0cwot
ICogZnJvbSB0aGUgR1RUIGFuZC9vciBmZW5jZSByZWdpc3RlcnMgdG8gbWFrZSByb29tLiAgU28g
cGVyZm9ybWFuY2UgbWF5Ci0gKiBzdWZmZXIgaWYgdGhlIEdUVCB3b3JraW5nIHNldCBpcyBsYXJn
ZSBvciB0aGVyZSBhcmUgZmV3IGZlbmNlIHJlZ2lzdGVycwotICogbGVmdC4KLSAqCi0gKiBUaGUg
Y3VycmVudCBmZWF0dXJlIHNldCBzdXBwb3J0ZWQgYnkgaTkxNV9nZW1fZmF1bHQoKSBhbmQgdGh1
cyBHVFQgbW1hcHMKLSAqIGlzIGV4cG9zZWQgdmlhIEk5MTVfUEFSQU1fTU1BUF9HVFRfVkVSU0lP
TiAoc2VlIGk5MTVfZ2VtX21tYXBfZ3R0X3ZlcnNpb24pLgotICovCi12bV9mYXVsdF90IGk5MTVf
Z2VtX2ZhdWx0KHN0cnVjdCB2bV9mYXVsdCAqdm1mKQorc3RhdGljIHZtX2ZhdWx0X3QgaTkxNV9l
cnJvcl90b192bWZfZmF1bHQoaW50IGVycikKK3sKKwlzd2l0Y2ggKGVycikgeworCWRlZmF1bHQ6
CisJCVdBUk5fT05DRShlcnIsICJ1bmhhbmRsZWQgZXJyb3IgaW4gJXM6ICVpXG4iLCBfX2Z1bmNf
XywgZXJyKTsKKwkJLyogZmFsbHRocm91Z2ggKi8KKwljYXNlIC1FSU86IC8qIHNobWVtZnMgZmFp
bHVyZSBmcm9tIHN3YXAgZGV2aWNlICovCisJY2FzZSAtRUZBVUxUOiAvKiBwdXJnZWQgb2JqZWN0
ICovCisJY2FzZSAtRU5PREVWOiAvKiBiYWQgb2JqZWN0LCBob3cgZGlkIHlvdSBnZXQgaGVyZSEg
Ki8KKwkJcmV0dXJuIFZNX0ZBVUxUX1NJR0JVUzsKKworCWNhc2UgLUVOT1NQQzogLyogc2htZW1m
cyBhbGxvY2F0aW9uIGZhaWx1cmUgKi8KKwljYXNlIC1FTk9NRU06IC8qIG91ciBhbGxvY2F0aW9u
IGZhaWx1cmUgKi8KKwkJcmV0dXJuIFZNX0ZBVUxUX09PTTsKKworCWNhc2UgMDoKKwljYXNlIC1F
QUdBSU46CisJY2FzZSAtRVJFU1RBUlRTWVM6CisJY2FzZSAtRUlOVFI6CisJY2FzZSAtRUJVU1k6
CisJCS8qCisJCSAqIEVCVVNZIGlzIG9rOiB0aGlzIGp1c3QgbWVhbnMgdGhhdCBhbm90aGVyIHRo
cmVhZAorCQkgKiBhbHJlYWR5IGRpZCB0aGUgam9iLgorCQkgKi8KKwkJcmV0dXJuIFZNX0ZBVUxU
X05PUEFHRTsKKwl9Cit9CisKK3N0YXRpYyB2bV9mYXVsdF90IGNwdV9mYXVsdChzdHJ1Y3Qgdm1f
ZmF1bHQgKnZtZikKK3sKKwlzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKmFyZWEgPSB2bWYtPnZtYTsK
KwlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqcHJpdiA9IGFyZWEtPnZtX3ByaXZhdGVfZGF0YTsK
KwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0gcHJpdi0+b2JqOworCXVuc2lnbmVk
IGxvbmcgaSwgc2l6ZSA9IGFyZWEtPnZtX2VuZCAtIGFyZWEtPnZtX3N0YXJ0OworCWJvb2wgd3Jp
dGUgPSBhcmVhLT52bV9mbGFncyAmIFZNX1dSSVRFOworCXZtX2ZhdWx0X3QgcmV0OworCWludCBl
cnI7CisKKwlpZiAoIWk5MTVfZ2VtX29iamVjdF9oYXNfc3RydWN0X3BhZ2Uob2JqKSkKKwkJcmV0
dXJuIFZNX0ZBVUxUX1NJR0JVUzsKKworCS8qIFNhbml0eSBjaGVjayB0aGF0IHdlIGFsbG93IHdy
aXRpbmcgaW50byB0aGlzIG9iamVjdCAqLworCWlmIChpOTE1X2dlbV9vYmplY3RfaXNfcmVhZG9u
bHkob2JqKSAmJiB3cml0ZSkKKwkJcmV0dXJuIFZNX0ZBVUxUX1NJR0JVUzsKKworCWVyciA9IGk5
MTVfZ2VtX29iamVjdF9waW5fcGFnZXMob2JqKTsKKwlpZiAoZXJyKQorCQlyZXR1cm4gaTkxNV9l
cnJvcl90b192bWZfZmF1bHQoZXJyKTsKKworCS8qIFBURXMgYXJlIHJldm9rZWQgaW4gb2JqLT5v
cHMtPnB1dF9wYWdlcygpICovCisJZm9yIChpID0gMDsgaSA8IHNpemUgPj4gUEFHRV9TSElGVDsg
aSsrKSB7CisJCXN0cnVjdCBwYWdlICpwYWdlID0gaTkxNV9nZW1fb2JqZWN0X2dldF9wYWdlKG9i
aiwgaSk7CisKKwkJcmV0ID0gdm1mX2luc2VydF9wZm4oYXJlYSwKKwkJCQkgICAgICh1bnNpZ25l
ZCBsb25nKWFyZWEtPnZtX3N0YXJ0ICsgaSAqIFBBR0VfU0laRSwKKwkJCQkgICAgIHBhZ2VfdG9f
cGZuKHBhZ2UpKTsKKwkJaWYgKHJldCAhPSBWTV9GQVVMVF9OT1BBR0UpCisJCQlicmVhazsKKwl9
CisKKwlpZiAod3JpdGUpIHsKKwkJR0VNX0JVR19PTighaTkxNV9nZW1fb2JqZWN0X2hhc19waW5u
ZWRfcGFnZXMob2JqKSk7CisJCW9iai0+bW0uZGlydHkgPSB0cnVlOworCX0KKworCWk5MTVfZ2Vt
X29iamVjdF91bnBpbl9wYWdlcyhvYmopOworCisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZt
X2ZhdWx0X3QgZ3R0X2ZhdWx0KHN0cnVjdCB2bV9mYXVsdCAqdm1mKQogewogI2RlZmluZSBNSU5f
Q0hVTktfUEFHRVMgKFNaXzFNID4+IFBBR0VfU0hJRlQpCiAJc3RydWN0IHZtX2FyZWFfc3RydWN0
ICphcmVhID0gdm1mLT52bWE7Ci0Jc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiA9IHRv
X2ludGVsX2JvKGFyZWEtPnZtX3ByaXZhdGVfZGF0YSk7CisJc3RydWN0IGk5MTVfbW1hcF9vZmZz
ZXQgKnByaXYgPSBhcmVhLT52bV9wcml2YXRlX2RhdGE7CisJc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3QgKm9iaiA9IHByaXYtPm9iajsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gb2JqLT5i
YXNlLmRldjsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUoZGV2KTsK
IAlzdHJ1Y3QgaW50ZWxfcnVudGltZV9wbSAqcnBtID0gJmk5MTUtPnJ1bnRpbWVfcG07CkBAIC0z
MTIsNiArMzcwLDkgQEAgdm1fZmF1bHRfdCBpOTE1X2dlbV9mYXVsdChzdHJ1Y3Qgdm1fZmF1bHQg
KnZtZikKIAkJbGlzdF9hZGQoJm9iai0+dXNlcmZhdWx0X2xpbmssICZpOTE1LT5nZ3R0LnVzZXJm
YXVsdF9saXN0KTsKIAltdXRleF91bmxvY2soJmk5MTUtPmdndHQudm0ubXV0ZXgpOwogCisJLyog
VHJhY2sgdGhlIG1tbyBhc3NvY2lhdGVkIHdpdGggdGhlIGZlbmNlZCB2bWEgKi8KKwl2bWEtPm1t
byA9IHByaXY7CisKIAlpZiAoSVNfQUNUSVZFKENPTkZJR19EUk1fSTkxNV9VU0VSRkFVTFRfQVVU
T1NVU1BFTkQpKQogCQlpbnRlbF93YWtlcmVmX2F1dG8oJmk5MTUtPmdndHQudXNlcmZhdWx0X3dh
a2VyZWYsCiAJCQkJICAgbXNlY3NfdG9famlmZmllc190aW1lb3V0KENPTkZJR19EUk1fSTkxNV9V
U0VSRkFVTFRfQVVUT1NVU1BFTkQpKTsKQEAgLTMzMiw2NyArMzkzLDM2IEBAIHZtX2ZhdWx0X3Qg
aTkxNV9nZW1fZmF1bHQoc3RydWN0IHZtX2ZhdWx0ICp2bWYpCiAJaW50ZWxfcnVudGltZV9wbV9w
dXQocnBtLCB3YWtlcmVmKTsKIAlpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMob2JqKTsKIGVy
cjoKLQlzd2l0Y2ggKHJldCkgewotCWRlZmF1bHQ6Ci0JCVdBUk5fT05DRShyZXQsICJ1bmhhbmRs
ZWQgZXJyb3IgaW4gJXM6ICVpXG4iLCBfX2Z1bmNfXywgcmV0KTsKLQkJLyogZmFsbHRocm91Z2gg
Ki8KLQljYXNlIC1FSU86IC8qIHNobWVtZnMgZmFpbHVyZSBmcm9tIHN3YXAgZGV2aWNlICovCi0J
Y2FzZSAtRUZBVUxUOiAvKiBwdXJnZWQgb2JqZWN0ICovCi0JY2FzZSAtRU5PREVWOiAvKiBiYWQg
b2JqZWN0LCBob3cgZGlkIHlvdSBnZXQgaGVyZSEgKi8KLQkJcmV0dXJuIFZNX0ZBVUxUX1NJR0JV
UzsKLQotCWNhc2UgLUVOT1NQQzogLyogc2htZW1mcyBhbGxvY2F0aW9uIGZhaWx1cmUgKi8KLQlj
YXNlIC1FTk9NRU06IC8qIG91ciBhbGxvY2F0aW9uIGZhaWx1cmUgKi8KLQkJcmV0dXJuIFZNX0ZB
VUxUX09PTTsKLQotCWNhc2UgMDoKLQljYXNlIC1FQUdBSU46Ci0JY2FzZSAtRVJFU1RBUlRTWVM6
Ci0JY2FzZSAtRUlOVFI6Ci0JY2FzZSAtRUJVU1k6Ci0JCS8qCi0JCSAqIEVCVVNZIGlzIG9rOiB0
aGlzIGp1c3QgbWVhbnMgdGhhdCBhbm90aGVyIHRocmVhZAotCQkgKiBhbHJlYWR5IGRpZCB0aGUg
am9iLgotCQkgKi8KLQkJcmV0dXJuIFZNX0ZBVUxUX05PUEFHRTsKLQl9CisJcmV0dXJuIGk5MTVf
ZXJyb3JfdG9fdm1mX2ZhdWx0KHJldCk7CiB9CiAKLXZvaWQgX19pOTE1X2dlbV9vYmplY3RfcmVs
ZWFzZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCit2b2lkIF9faTkxNV9n
ZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9ndHQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aikKIHsKIAlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKIAogCUdFTV9CVUdfT04oIW9iai0+dXNlcmZh
dWx0X2NvdW50KTsKIAotCW9iai0+dXNlcmZhdWx0X2NvdW50ID0gMDsKLQlsaXN0X2RlbCgmb2Jq
LT51c2VyZmF1bHRfbGluayk7Ci0JZHJtX3ZtYV9ub2RlX3VubWFwKCZvYmotPmJhc2Uudm1hX25v
ZGUsCi0JCQkgICBvYmotPmJhc2UuZGV2LT5hbm9uX2lub2RlLT5pX21hcHBpbmcpOwotCiAJZm9y
X2VhY2hfZ2d0dF92bWEodm1hLCBvYmopCi0JCWk5MTVfdm1hX3Vuc2V0X3VzZXJmYXVsdCh2bWEp
OworCQlpOTE1X3ZtYV9yZXZva2VfbW1hcCh2bWEpOworCisJR0VNX0JVR19PTihvYmotPnVzZXJm
YXVsdF9jb3VudCk7CiB9CiAKLS8qKgotICogaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcCAt
IHJlbW92ZSBwaHlzaWNhbCBwYWdlIG1hcHBpbmdzCi0gKiBAb2JqOiBvYmogaW4gcXVlc3Rpb24K
LSAqCi0gKiBQcmVzZXJ2ZSB0aGUgcmVzZXJ2YXRpb24gb2YgdGhlIG1tYXBwaW5nIHdpdGggdGhl
IERSTSBjb3JlIGNvZGUsIGJ1dAotICogcmVsaW5xdWlzaCBvd25lcnNoaXAgb2YgdGhlIHBhZ2Vz
IGJhY2sgdG8gdGhlIHN5c3RlbS4KLSAqCisvKgogICogSXQgaXMgdml0YWwgdGhhdCB3ZSByZW1v
dmUgdGhlIHBhZ2UgbWFwcGluZyBpZiB3ZSBoYXZlIG1hcHBlZCBhIHRpbGVkCiAgKiBvYmplY3Qg
dGhyb3VnaCB0aGUgR1RUIGFuZCB0aGVuIGxvc2UgdGhlIGZlbmNlIHJlZ2lzdGVyIGR1ZSB0bwog
ICogcmVzb3VyY2UgcHJlc3N1cmUuIFNpbWlsYXJseSBpZiB0aGUgb2JqZWN0IGhhcyBiZWVuIG1v
dmVkIG91dCBvZiB0aGUKICAqIGFwZXJ0dXJlLCB0aGFuIHBhZ2VzIG1hcHBlZCBpbnRvIHVzZXJz
cGFjZSBtdXN0IGJlIHJldm9rZWQuIFJlbW92aW5nIHRoZQogICogbWFwcGluZyB3aWxsIHRoZW4g
dHJpZ2dlciBhIHBhZ2UgZmF1bHQgb24gdGhlIG5leHQgdXNlciBhY2Nlc3MsIGFsbG93aW5nCi0g
KiBmaXh1cCBieSBpOTE1X2dlbV9mYXVsdCgpLgorICogZml4dXAgYnkgZ3R0X2ZhdWx0KCkuCiAg
Ki8KLXZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChzdHJ1Y3QgZHJtX2k5MTVfZ2Vt
X29iamVjdCAqb2JqKQorc3RhdGljIHZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9n
dHQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUob2JqLT5iYXNlLmRldik7CiAJaW50ZWxfd2FrZXJlZl90
IHdha2VyZWY7CiAKLQkvKiBTZXJpYWxpc2F0aW9uIGJldHdlZW4gdXNlciBHVFQgYWNjZXNzIGFu
ZCBvdXIgY29kZSBkZXBlbmRzIHVwb24KKwkvKgorCSAqIFNlcmlhbGlzYXRpb24gYmV0d2VlbiB1
c2VyIEdUVCBhY2Nlc3MgYW5kIG91ciBjb2RlIGRlcGVuZHMgdXBvbgogCSAqIHJldm9raW5nIHRo
ZSBDUFUncyBQVEUgd2hpbHN0IHRoZSBtdXRleCBpcyBoZWxkLiBUaGUgbmV4dCB1c2VyCiAJICog
cGFnZWZhdWx0IHRoZW4gaGFzIHRvIHdhaXQgdW50aWwgd2UgcmVsZWFzZSB0aGUgbXV0ZXguCiAJ
ICoKQEAgLTQwNiw5ICs0MzYsMTAgQEAgdm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFw
KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAJaWYgKCFvYmotPnVzZXJmYXVsdF9j
b3VudCkKIAkJZ290byBvdXQ7CiAKLQlfX2k5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXAob2Jq
KTsKKwlfX2k5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXBfZ3R0KG9iaik7CiAKLQkvKiBFbnN1
cmUgdGhhdCB0aGUgQ1BVJ3MgUFRFIGFyZSByZXZva2VkIGFuZCB0aGVyZSBhcmUgbm90IG91dHN0
YW5kaW5nCisJLyoKKwkgKiBFbnN1cmUgdGhhdCB0aGUgQ1BVJ3MgUFRFIGFyZSByZXZva2VkIGFu
ZCB0aGVyZSBhcmUgbm90IG91dHN0YW5kaW5nCiAJICogbWVtb3J5IHRyYW5zYWN0aW9ucyBmcm9t
IHVzZXJzcGFjZSBiZWZvcmUgd2UgcmV0dXJuLiBUaGUgVExCCiAJICogZmx1c2hpbmcgaW1wbGll
ZCBhYm92ZSBieSBjaGFuZ2luZyB0aGUgUFRFIGFib3ZlICpzaG91bGQqIGJlCiAJICogc3VmZmlj
aWVudCwgYW4gZXh0cmEgYmFycmllciBoZXJlIGp1c3QgcHJvdmlkZXMgdXMgd2l0aCBhIGJpdApA
QCAtNDIyLDU3ICs0NTMsMTQ0IEBAIHZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogCWludGVsX3J1bnRpbWVfcG1fcHV0KCZp
OTE1LT5ydW50aW1lX3BtLCB3YWtlcmVmKTsKIH0KIAotc3RhdGljIGludCBjcmVhdGVfbW1hcF9v
ZmZzZXQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKK3ZvaWQgaTkxNV9nZW1fb2Jq
ZWN0X3JlbGVhc2VfbW1hcF9vZmZzZXQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikK
K3sKKwlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vOworCisJbXV0ZXhfbG9jaygmb2JqLT5t
bW9fbG9jayk7CisJbGlzdF9mb3JfZWFjaF9lbnRyeShtbW8sICZvYmotPm1tYXBfb2Zmc2V0cywg
b2Zmc2V0KSB7CisJCS8qCisJCSAqIHZtYV9ub2RlX3VubWFwIGZvciBHVFQgbW1hcHMgaGFuZGxl
ZCBhbHJlYWR5IGluCisJCSAqIF9faTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9ndHQKKwkJ
ICovCisJCWlmIChtbW8tPm1tYXBfdHlwZSAhPSBJOTE1X01NQVBfVFlQRV9HVFQpCisJCQlkcm1f
dm1hX25vZGVfdW5tYXAoJm1tby0+dm1hX25vZGUsCisJCQkJCSAgIG9iai0+YmFzZS5kZXYtPmFu
b25faW5vZGUtPmlfbWFwcGluZyk7CisJfQorCW11dGV4X3VubG9jaygmb2JqLT5tbW9fbG9jayk7
Cit9CisKKy8qKgorICogaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcCAtIHJlbW92ZSBwaHlz
aWNhbCBwYWdlIG1hcHBpbmdzCisgKiBAb2JqOiBvYmogaW4gcXVlc3Rpb24KKyAqCisgKiBQcmVz
ZXJ2ZSB0aGUgcmVzZXJ2YXRpb24gb2YgdGhlIG1tYXBwaW5nIHdpdGggdGhlIERSTSBjb3JlIGNv
ZGUsIGJ1dAorICogcmVsaW5xdWlzaCBvd25lcnNoaXAgb2YgdGhlIHBhZ2VzIGJhY2sgdG8gdGhl
IHN5c3RlbS4KKyAqLwordm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCit7CisJaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1h
cF9ndHQob2JqKTsKKwlpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwX29mZnNldChvYmopOwor
fQorCitzdGF0aWMgc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKgorbW1hcF9vZmZzZXRfY3JlYXRl
KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCisJCSAgIGVudW0gaTkxNV9tbWFwX3R5
cGUgbW1hcF90eXBlLAorCQkgICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCiB7CiAJc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KG9iai0+YmFzZS5kZXYpOwotCXN0cnVjdCBp
bnRlbF9ndCAqZ3QgPSAmaTkxNS0+Z3Q7CisJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1tbzsK
IAlpbnQgZXJyOwogCi0JZXJyID0gZHJtX2dlbV9jcmVhdGVfbW1hcF9vZmZzZXQoJm9iai0+YmFz
ZSk7CisJbW1vID0ga21hbGxvYyhzaXplb2YoKm1tbyksIEdGUF9LRVJORUwpOworCWlmICghbW1v
KQorCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsKKworCW1tby0+b2JqID0gb2JqOworCW1tby0+
ZGV2ID0gb2JqLT5iYXNlLmRldjsKKwltbW8tPmZpbGUgPSBmaWxlOworCW1tby0+bW1hcF90eXBl
ID0gbW1hcF90eXBlOworCWRybV92bWFfbm9kZV9yZXNldCgmbW1vLT52bWFfbm9kZSk7CisKKwll
cnIgPSBkcm1fdm1hX29mZnNldF9hZGQobW1vLT5kZXYtPnZtYV9vZmZzZXRfbWFuYWdlciwgJm1t
by0+dm1hX25vZGUsCisJCQkJIG9iai0+YmFzZS5zaXplIC8gUEFHRV9TSVpFKTsKIAlpZiAobGlr
ZWx5KCFlcnIpKQotCQlyZXR1cm4gMDsKKwkJZ290byBvdXQ7CiAKIAkvKiBBdHRlbXB0IHRvIHJl
YXAgc29tZSBtbWFwIHNwYWNlIGZyb20gZGVhZCBvYmplY3RzICovCi0JZXJyID0gaW50ZWxfZ3Rf
cmV0aXJlX3JlcXVlc3RzX3RpbWVvdXQoZ3QsIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsKKwllcnIg
PSBpbnRlbF9ndF9yZXRpcmVfcmVxdWVzdHNfdGltZW91dCgmaTkxNS0+Z3QsIE1BWF9TQ0hFRFVM
RV9USU1FT1VUKTsKIAlpZiAoZXJyKQotCQlyZXR1cm4gZXJyOworCQlnb3RvIGVycjsKIAogCWk5
MTVfZ2VtX2RyYWluX2ZyZWVkX29iamVjdHMoaTkxNSk7Ci0JcmV0dXJuIGRybV9nZW1fY3JlYXRl
X21tYXBfb2Zmc2V0KCZvYmotPmJhc2UpOworCWVyciA9IGRybV92bWFfb2Zmc2V0X2FkZChtbW8t
PmRldi0+dm1hX29mZnNldF9tYW5hZ2VyLCAmbW1vLT52bWFfbm9kZSwKKwkJCQkgb2JqLT5iYXNl
LnNpemUgLyBQQUdFX1NJWkUpOworCWlmIChlcnIpCisJCWdvdG8gZXJyOworCitvdXQ6CisJbXV0
ZXhfbG9jaygmb2JqLT5tbW9fbG9jayk7CisJbGlzdF9hZGQoJm1tby0+b2Zmc2V0LCAmb2JqLT5t
bWFwX29mZnNldHMpOworCW11dGV4X3VubG9jaygmb2JqLT5tbW9fbG9jayk7CisKKwlpZiAoZmls
ZSkKKwkJZHJtX3ZtYV9ub2RlX2FsbG93KCZtbW8tPnZtYV9ub2RlLCBmaWxlKTsKKworCXJldHVy
biBtbW87CisKK2VycjoKKwlrZnJlZShtbW8pOworCXJldHVybiBFUlJfUFRSKGVycik7CiB9CiAK
LWludAotaTkxNV9nZW1fbW1hcF9ndHQoc3RydWN0IGRybV9maWxlICpmaWxlLAotCQkgIHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsCi0JCSAgdTMyIGhhbmRsZSwKLQkJICB1NjQgKm9mZnNldCkKK3N0
YXRpYyBpbnQKK19fYXNzaWduX2dlbV9vYmplY3RfbW1hcF9kYXRhKHN0cnVjdCBkcm1fZmlsZSAq
ZmlsZSwKKwkJCSAgICAgIHUzMiBoYW5kbGUsCisJCQkgICAgICBlbnVtIGk5MTVfbW1hcF90eXBl
IG1tYXBfdHlwZSwKKwkJCSAgICAgIHU2NCAqb2Zmc2V0KQogewogCXN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmo7Ci0JaW50IHJldDsKLQotCWlmICghaTkxNV9nZ3R0X2hhc19hcGVydHVy
ZSgmdG9faTkxNShkZXYpLT5nZ3R0KSkKLQkJcmV0dXJuIC1FTk9ERVY7CisJc3RydWN0IGk5MTVf
bW1hcF9vZmZzZXQgKm1tbzsKKwlpbnQgZXJyOwogCiAJb2JqID0gaTkxNV9nZW1fb2JqZWN0X2xv
b2t1cChmaWxlLCBoYW5kbGUpOwogCWlmICghb2JqKQogCQlyZXR1cm4gLUVOT0VOVDsKIAotCWlm
IChpOTE1X2dlbV9vYmplY3RfbmV2ZXJfYmluZF9nZ3R0KG9iaikpIHsKLQkJcmV0ID0gLUVOT0RF
VjsKKwlpZiAobW1hcF90eXBlID09IEk5MTVfTU1BUF9UWVBFX0dUVCAmJgorCSAgICBpOTE1X2dl
bV9vYmplY3RfbmV2ZXJfYmluZF9nZ3R0KG9iaikpIHsKKwkJZXJyID0gLUVOT0RFVjsKIAkJZ290
byBvdXQ7CiAJfQogCi0JcmV0ID0gY3JlYXRlX21tYXBfb2Zmc2V0KG9iaik7Ci0JaWYgKHJldCA9
PSAwKQotCQkqb2Zmc2V0ID0gZHJtX3ZtYV9ub2RlX29mZnNldF9hZGRyKCZvYmotPmJhc2Uudm1h
X25vZGUpOworCWlmIChtbWFwX3R5cGUgIT0gSTkxNV9NTUFQX1RZUEVfR1RUICYmCisJICAgICFp
OTE1X2dlbV9vYmplY3RfaGFzX3N0cnVjdF9wYWdlKG9iaikpIHsKKwkJZXJyID0gLUVOT0RFVjsK
KwkJZ290byBvdXQ7CisJfQogCisJbW1vID0gbW1hcF9vZmZzZXRfY3JlYXRlKG9iaiwgbW1hcF90
eXBlLCBmaWxlKTsKKwlpZiAoSVNfRVJSKG1tbykpIHsKKwkJZXJyID0gUFRSX0VSUihtbW8pOwor
CQlnb3RvIG91dDsKKwl9CisKKwkqb2Zmc2V0ID0gZHJtX3ZtYV9ub2RlX29mZnNldF9hZGRyKCZt
bW8tPnZtYV9ub2RlKTsKIG91dDoKIAlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7Ci0JcmV0dXJu
IHJldDsKKwlyZXR1cm4gZXJyOworfQorCitpbnQKK2k5MTVfZ2VtX2R1bWJfbW1hcF9vZmZzZXQo
c3RydWN0IGRybV9maWxlICpmaWxlLAorCQkJICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAorCQkJ
ICB1MzIgaGFuZGxlLAorCQkJICB1NjQgKm9mZnNldCkKK3sKKwllbnVtIGk5MTVfbW1hcF90eXBl
IG1tYXBfdHlwZTsKKworCWlmIChib290X2NwdV9oYXMoWDg2X0ZFQVRVUkVfUEFUKSkKKwkJbW1h
cF90eXBlID0gSTkxNV9NTUFQX1RZUEVfV0M7CisJZWxzZSBpZiAoIWk5MTVfZ2d0dF9oYXNfYXBl
cnR1cmUoJnRvX2k5MTUoZGV2KS0+Z2d0dCkpCisJCXJldHVybiAtRU5PREVWOworCWVsc2UKKwkJ
bW1hcF90eXBlID0gSTkxNV9NTUFQX1RZUEVfR1RUOworCisJcmV0dXJuIF9fYXNzaWduX2dlbV9v
YmplY3RfbW1hcF9kYXRhKGZpbGUsIGhhbmRsZSwgbW1hcF90eXBlLCBvZmZzZXQpOwogfQogCiAv
KioKLSAqIGk5MTVfZ2VtX21tYXBfZ3R0X2lvY3RsIC0gcHJlcGFyZSBhbiBvYmplY3QgZm9yIEdU
VCBtbWFwJ2luZworICogaTkxNV9nZW1fbW1hcF9vZmZzZXRfaW9jdGwgLSBwcmVwYXJlIGFuIG9i
amVjdCBmb3IgR1RUIG1tYXAnaW5nCiAgKiBAZGV2OiBEUk0gZGV2aWNlCiAgKiBAZGF0YTogR1RU
IG1hcHBpbmcgaW9jdGwgZGF0YQogICogQGZpbGU6IEdFTSBvYmplY3QgaW5mbwpAQCAtNDg3LDEy
ICs2MDUsMTc2IEBAIGk5MTVfZ2VtX21tYXBfZ3R0KHN0cnVjdCBkcm1fZmlsZSAqZmlsZSwKICAq
IHVzZXJzcGFjZS4KICAqLwogaW50Ci1pOTE1X2dlbV9tbWFwX2d0dF9pb2N0bChzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAotCQkJc3RydWN0IGRybV9maWxlICpmaWxlKQoraTkx
NV9nZW1fbW1hcF9vZmZzZXRfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0
YSwKKwkJCSAgIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkKIHsKLQlzdHJ1Y3QgZHJtX2k5MTVfZ2Vt
X21tYXBfZ3R0ICphcmdzID0gZGF0YTsKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9
IHRvX2k5MTUoZGV2KTsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX21tYXBfb2Zmc2V0ICphcmdzID0g
ZGF0YTsKKwllbnVtIGk5MTVfbW1hcF90eXBlIHR5cGU7CisKKwlzd2l0Y2ggKGFyZ3MtPmZsYWdz
KSB7CisJY2FzZSBJOTE1X01NQVBfT0ZGU0VUX0dUVDoKKwkJaWYgKCFpOTE1X2dndHRfaGFzX2Fw
ZXJ0dXJlKCZpOTE1LT5nZ3R0KSkKKwkJCXJldHVybiAtRU5PREVWOworCQl0eXBlID0gSTkxNV9N
TUFQX1RZUEVfR1RUOworCQlicmVhazsKKworCWNhc2UgSTkxNV9NTUFQX09GRlNFVF9XQzoKKwkJ
aWYgKCFib290X2NwdV9oYXMoWDg2X0ZFQVRVUkVfUEFUKSkKKwkJCXJldHVybiAtRU5PREVWOwor
CQl0eXBlID0gSTkxNV9NTUFQX1RZUEVfV0M7CisJCWJyZWFrOworCisJY2FzZSBJOTE1X01NQVBf
T0ZGU0VUX1dCOgorCQl0eXBlID0gSTkxNV9NTUFQX1RZUEVfV0I7CisJCWJyZWFrOworCisJY2Fz
ZSBJOTE1X01NQVBfT0ZGU0VUX1VDOgorCQlpZiAoIWJvb3RfY3B1X2hhcyhYODZfRkVBVFVSRV9Q
QVQpKQorCQkJcmV0dXJuIC1FTk9ERVY7CisJCXR5cGUgPSBJOTE1X01NQVBfVFlQRV9VQzsKKwkJ
YnJlYWs7CisKKwlkZWZhdWx0OgorCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwlyZXR1cm4gX19h
c3NpZ25fZ2VtX29iamVjdF9tbWFwX2RhdGEoZmlsZSwgYXJncy0+aGFuZGxlLCB0eXBlLAorCQkJ
CQkgICAgICZhcmdzLT5vZmZzZXQpOworfQorCit2b2lkIGk5MTVfbW1hcF9vZmZzZXRfZGVzdHJv
eShzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vLCBzdHJ1Y3QgbXV0ZXggKm11dGV4KQorewor
CWRybV92bWFfb2Zmc2V0X3JlbW92ZShtbW8tPmRldi0+dm1hX29mZnNldF9tYW5hZ2VyLCAmbW1v
LT52bWFfbm9kZSk7CisKKwltdXRleF9sb2NrKG11dGV4KTsKKwlsaXN0X2RlbCgmbW1vLT5vZmZz
ZXQpOworCW11dGV4X3VubG9jayhtdXRleCk7CisKKwlrZnJlZShtbW8pOworfQorCitzdGF0aWMg
dm9pZCB2bV9vcGVuKHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hKQoreworCXN0cnVjdCBpOTE1
X21tYXBfb2Zmc2V0ICptbW8gPSB2bWEtPnZtX3ByaXZhdGVfZGF0YTsKKwlzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqID0gbW1vLT5vYmo7CisKKwlHRU1fQlVHX09OKCFvYmopOworCWk5
MTVfZ2VtX29iamVjdF9nZXQob2JqKTsKK30KKworc3RhdGljIHZvaWQgdm1fY2xvc2Uoc3RydWN0
IHZtX2FyZWFfc3RydWN0ICp2bWEpCit7CisJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1tbyA9
IHZtYS0+dm1fcHJpdmF0ZV9kYXRhOworCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmog
PSBtbW8tPm9iajsKKworCUdFTV9CVUdfT04oIW9iaik7CisJaTkxNV9nZW1fb2JqZWN0X3B1dChv
YmopOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IHZtX29wZXJhdGlvbnNfc3RydWN0IGd0dF92
bV9vcHMgPSB7CisJLmZhdWx0ID0gZ3R0X2ZhdWx0LAorCS5vcGVuID0gdm1fb3BlbiwKKwkuY2xv
c2UgPSB2bV9jbG9zZSwKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgdm1fb3BlcmF0aW9uc19z
dHJ1Y3QgY3B1X3ZtX29wcyA9IHsKKwkuZmF1bHQgPSBjcHVfZmF1bHQsCisJLm9wZW4gPSB2bV9v
cGVuLAorCS5jbG9zZSA9IHZtX2Nsb3NlLAorfTsKIAotCXJldHVybiBpOTE1X2dlbV9tbWFwX2d0
dChmaWxlLCBkZXYsIGFyZ3MtPmhhbmRsZSwgJmFyZ3MtPm9mZnNldCk7CisvKgorICogVGhpcyBv
dmVyY29tZXMgdGhlIGxpbWl0YXRpb24gaW4gZHJtX2dlbV9tbWFwJ3MgYXNzaWdubWVudCBvZiBh
CisgKiBkcm1fZ2VtX29iamVjdCBhcyB0aGUgdm1hLT52bV9wcml2YXRlX2RhdGEuIFNpbmNlIHdl
IG5lZWQgdG8KKyAqIGJlIGFibGUgdG8gcmVzb2x2ZSBtdWx0aXBsZSBtbWFwIG9mZnNldHMgd2hp
Y2ggY291bGQgYmUgdGllZAorICogdG8gYSBzaW5nbGUgZ2VtIG9iamVjdC4KKyAqLworaW50IGk5
MTVfZ2VtX21tYXAoc3RydWN0IGZpbGUgKmZpbHAsIHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1h
KQoreworCXN0cnVjdCBkcm1fdm1hX29mZnNldF9ub2RlICpub2RlOworCXN0cnVjdCBkcm1fZmls
ZSAqcHJpdiA9IGZpbHAtPnByaXZhdGVfZGF0YTsKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0g
cHJpdi0+bWlub3ItPmRldjsKKwlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vID0gTlVMTDsK
KwlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiA9IE5VTEw7CisKKwlpZiAoZHJtX2Rldl9pc191
bnBsdWdnZWQoZGV2KSkKKwkJcmV0dXJuIC1FTk9ERVY7CisKKwlkcm1fdm1hX29mZnNldF9sb2Nr
X2xvb2t1cChkZXYtPnZtYV9vZmZzZXRfbWFuYWdlcik7CisJbm9kZSA9IGRybV92bWFfb2Zmc2V0
X2V4YWN0X2xvb2t1cF9sb2NrZWQoZGV2LT52bWFfb2Zmc2V0X21hbmFnZXIsCisJCQkJCQkgIHZt
YS0+dm1fcGdvZmYsCisJCQkJCQkgIHZtYV9wYWdlcyh2bWEpKTsKKwlpZiAobGlrZWx5KG5vZGUp
KSB7CisJCW1tbyA9IGNvbnRhaW5lcl9vZihub2RlLCBzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCwK
KwkJCQkgICB2bWFfbm9kZSk7CisJCS8qCisJCSAqIEluIG91ciBkZXBlbmRlbmN5IGNoYWluLCB0
aGUgZHJtX3ZtYV9vZmZzZXRfbm9kZQorCQkgKiBkZXBlbmRzIG9uIHRoZSB2YWxpZGl0eSBvZiB0
aGUgbW1vLCB3aGljaCBkZXBlbmRzIG9uCisJCSAqIHRoZSBnZW0gb2JqZWN0LiBIb3dldmVyIHRo
ZSBvbmx5IHJlZmVyZW5jZSB3ZSBoYXZlCisJCSAqIGF0IHRoaXMgcG9pbnQgaXMgdGhlIG1tbyAo
YXMgdGhlIHBhcmVudCBvZiB0aGUgbm9kZSkuCisJCSAqIFRyeSB0byBjaGVjayBpZiB0aGUgZ2Vt
IG9iamVjdCB3YXMgYXQgbGVhc3QgY2xlYXJlZC4KKwkJICovCisJCWlmICghbW1vIHx8ICFtbW8t
Pm9iaikgeworCQkJZHJtX3ZtYV9vZmZzZXRfdW5sb2NrX2xvb2t1cChkZXYtPnZtYV9vZmZzZXRf
bWFuYWdlcik7CisJCQlyZXR1cm4gLUVJTlZBTDsKKwkJfQorCQkvKgorCQkgKiBTa2lwIDAtcmVm
Y250ZWQgb2JqZWN0cyBhcyBpdCBpcyBpbiB0aGUgcHJvY2VzcyBvZiBiZWluZworCQkgKiBkZXN0
cm95ZWQgYW5kIHdpbGwgYmUgaW52YWxpZCB3aGVuIHRoZSB2bWEgbWFuYWdlciBsb2NrCisJCSAq
IGlzIHJlbGVhc2VkLgorCQkgKi8KKwkJb2JqID0gJm1tby0+b2JqLT5iYXNlOworCQlpZiAoIWty
ZWZfZ2V0X3VubGVzc196ZXJvKCZvYmotPnJlZmNvdW50KSkKKwkJCW9iaiA9IE5VTEw7CisJfQor
CWRybV92bWFfb2Zmc2V0X3VubG9ja19sb29rdXAoZGV2LT52bWFfb2Zmc2V0X21hbmFnZXIpOwor
CWlmICghb2JqKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWlmICghZHJtX3ZtYV9ub2RlX2lzX2Fs
bG93ZWQobm9kZSwgcHJpdikpIHsKKwkJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKG9iaik7
CisJCXJldHVybiAtRUFDQ0VTOworCX0KKworCWlmIChpOTE1X2dlbV9vYmplY3RfaXNfcmVhZG9u
bHkodG9faW50ZWxfYm8ob2JqKSkpIHsKKwkJaWYgKHZtYS0+dm1fZmxhZ3MgJiBWTV9XUklURSkg
eworCQkJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKG9iaik7CisJCQlyZXR1cm4gLUVJTlZB
TDsKKwkJfQorCQl2bWEtPnZtX2ZsYWdzICY9IH5WTV9NQVlXUklURTsKKwl9CisKKwl2bWEtPnZt
X2ZsYWdzIHw9IFZNX1BGTk1BUCB8IFZNX0RPTlRFWFBBTkQgfCBWTV9ET05URFVNUDsKKwl2bWEt
PnZtX3ByaXZhdGVfZGF0YSA9IG1tbzsKKworCXN3aXRjaCAobW1vLT5tbWFwX3R5cGUpIHsKKwlj
YXNlIEk5MTVfTU1BUF9UWVBFX1dDOgorCQl2bWEtPnZtX3BhZ2VfcHJvdCA9CisJCQlwZ3Byb3Rf
d3JpdGVjb21iaW5lKHZtX2dldF9wYWdlX3Byb3Qodm1hLT52bV9mbGFncykpOworCQl2bWEtPnZt
X29wcyA9ICZjcHVfdm1fb3BzOworCQlicmVhazsKKworCWNhc2UgSTkxNV9NTUFQX1RZUEVfV0I6
CisJCXZtYS0+dm1fcGFnZV9wcm90ID0gdm1fZ2V0X3BhZ2VfcHJvdCh2bWEtPnZtX2ZsYWdzKTsK
KwkJdm1hLT52bV9vcHMgPSAmY3B1X3ZtX29wczsKKwkJYnJlYWs7CisKKwljYXNlIEk5MTVfTU1B
UF9UWVBFX1VDOgorCQl2bWEtPnZtX3BhZ2VfcHJvdCA9CisJCQlwZ3Byb3Rfbm9uY2FjaGVkKHZt
X2dldF9wYWdlX3Byb3Qodm1hLT52bV9mbGFncykpOworCQl2bWEtPnZtX29wcyA9ICZjcHVfdm1f
b3BzOworCQlicmVhazsKKworCWNhc2UgSTkxNV9NTUFQX1RZUEVfR1RUOgorCQl2bWEtPnZtX3Bh
Z2VfcHJvdCA9CisJCQlwZ3Byb3Rfd3JpdGVjb21iaW5lKHZtX2dldF9wYWdlX3Byb3Qodm1hLT52
bV9mbGFncykpOworCQl2bWEtPnZtX29wcyA9ICZndHRfdm1fb3BzOworCQlicmVhazsKKwl9CisJ
dm1hLT52bV9wYWdlX3Byb3QgPSBwZ3Byb3RfZGVjcnlwdGVkKHZtYS0+dm1fcGFnZV9wcm90KTsK
KworCXJldHVybiAwOwogfQogCiAjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VMRlRF
U1QpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5o
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX21tYW4uaApuZXcgZmlsZSBtb2Rl
IDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjAzMDc4NDM0NDBhYwotLS0gL2Rldi9udWxsCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmgKQEAgLTAsMCArMSwz
NCBAQAorLyoKKyAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQKKyAqCisgKiBDb3B5cmln
aHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpZm5kZWYgX19JOTE1X0dFTV9N
TUFOX0hfXworI2RlZmluZSBfX0k5MTVfR0VNX01NQU5fSF9fCisKKyNpbmNsdWRlIDxsaW51eC9t
bV90eXBlcy5oPgorI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+CisKK3N0cnVjdCBkcm1fZGV2aWNl
Oworc3RydWN0IGRybV9maWxlOworc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Q7CitzdHJ1Y3Qg
ZmlsZTsKK3N0cnVjdCBpOTE1X21tYXBfb2Zmc2V0Oworc3RydWN0IG11dGV4OworCitpbnQgaTkx
NV9nZW1fbW1hcF9ndHRfdmVyc2lvbih2b2lkKTsKK2ludCBpOTE1X2dlbV9tbWFwKHN0cnVjdCBm
aWxlICpmaWxwLCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSk7CisKK2ludCBpOTE1X2dlbV9k
dW1iX21tYXBfb2Zmc2V0KHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2LAorCQkJICAgICAgc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiwKKwkJCSAgICAgIHUzMiBoYW5kbGUsIHU2NCAqb2Zmc2V0KTsK
Kwordm9pZCBfX2k5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXBfZ3R0KHN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0ICpvYmopOwordm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKHN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopOwordm9pZCBpOTE1X2dlbV9vYmplY3RfcmVs
ZWFzZV9tbWFwX29mZnNldChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsKKwordm9p
ZCBpOTE1X21tYXBfb2Zmc2V0X2Rlc3Ryb3koc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1tbywK
KwkJCSAgICAgIHN0cnVjdCBtdXRleCAqbXV0ZXgpOworCisjZW5kaWYKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYwppbmRleCA0NTg5NDVlMTgyM2UuLmYxYjg3YTgz
OTkyNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVj
dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYwpAQCAt
MjksNiArMjksNyBAQAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1f
Y2xmbHVzaC5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX2NvbnRleHQuaCIKKyNpbmNsdWRlICJpOTE1
X2dlbV9tbWFuLmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1fb2JqZWN0LmgiCiAjaW5jbHVkZSAiaTkx
NV9nbG9iYWxzLmgiCiAjaW5jbHVkZSAiaTkxNV90cmFjZS5oIgpAQCAtNjEsNiArNjIsOSBAQCB2
b2lkIGk5MTVfZ2VtX29iamVjdF9pbml0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmos
CiAKIAlJTklUX0xJU1RfSEVBRCgmb2JqLT5sdXRfbGlzdCk7CiAKKwltdXRleF9pbml0KCZvYmot
Pm1tb19sb2NrKTsKKwlJTklUX0xJU1RfSEVBRCgmb2JqLT5tbWFwX29mZnNldHMpOworCiAJaW5p
dF9yY3VfaGVhZCgmb2JqLT5yY3UpOwogCiAJb2JqLT5vcHMgPSBvcHM7CkBAIC05Nyw2ICsxMDEs
NyBAQCB2b2lkIGk5MTVfZ2VtX2Nsb3NlX29iamVjdChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdl
bSwgc3RydWN0IGRybV9maWxlICpmaWxlKQogCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpv
YmogPSB0b19pbnRlbF9ibyhnZW0pOwogCXN0cnVjdCBkcm1faTkxNV9maWxlX3ByaXZhdGUgKmZw
cml2ID0gZmlsZS0+ZHJpdmVyX3ByaXY7CiAJc3RydWN0IGk5MTVfbHV0X2hhbmRsZSAqbHV0LCAq
bG47CisJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1tbywgKm9uOwogCUxJU1RfSEVBRChjbG9z
ZSk7CiAKIAlpOTE1X2dlbV9vYmplY3RfbG9jayhvYmopOwpAQCAtMTExLDYgKzExNiw5IEBAIHZv
aWQgaTkxNV9nZW1fY2xvc2Vfb2JqZWN0KHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqZ2VtLCBzdHJ1
Y3QgZHJtX2ZpbGUgKmZpbGUpCiAJfQogCWk5MTVfZ2VtX29iamVjdF91bmxvY2sob2JqKTsKIAor
CWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShtbW8sIG9uLCAmb2JqLT5tbWFwX29mZnNldHMsIG9m
ZnNldCkKKwkJZHJtX3ZtYV9ub2RlX3Jldm9rZSgmbW1vLT52bWFfbm9kZSwgZmlsZSk7CisKIAls
aXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUobHV0LCBsbiwgJmNsb3NlLCBvYmpfbGluaykgewogCQlz
dHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4ID0gbHV0LT5jdHg7CiAJCXN0cnVjdCBpOTE1X3Zt
YSAqdm1hOwpAQCAtMTU4LDYgKzE2Niw4IEBAIHN0YXRpYyB2b2lkIF9faTkxNV9nZW1fZnJlZV9v
YmplY3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCiAJd2FrZXJlZiA9IGludGVs
X3J1bnRpbWVfcG1fZ2V0KCZpOTE1LT5ydW50aW1lX3BtKTsKIAlsbGlzdF9mb3JfZWFjaF9lbnRy
eV9zYWZlKG9iaiwgb24sIGZyZWVkLCBmcmVlZCkgeworCQlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNl
dCAqbW1vLCAqbW47CisKIAkJdHJhY2VfaTkxNV9nZW1fb2JqZWN0X2Rlc3Ryb3kob2JqKTsKIAog
CQlpZiAoIWxpc3RfZW1wdHkoJm9iai0+dm1hLmxpc3QpKSB7CkBAIC0xODMsNiArMTkzLDE0IEBA
IHN0YXRpYyB2b2lkIF9faTkxNV9nZW1fZnJlZV9vYmplY3RzKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1LAogCQkJc3Bpbl91bmxvY2soJm9iai0+dm1hLmxvY2spOwogCQl9CiAKKwkJaTkx
NV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChvYmopOworCisJCWxpc3RfZm9yX2VhY2hfZW50cnlf
c2FmZShtbW8sIG1uLCAmb2JqLT5tbWFwX29mZnNldHMsIG9mZnNldCkgeworCQkJbW1vLT5vYmog
PSBOVUxMOworCQkJaTkxNV9tbWFwX29mZnNldF9kZXN0cm95KG1tbywgJm9iai0+bW1vX2xvY2sp
OworCQl9CisKKwkJR0VNX0JVR19PTighbGlzdF9lbXB0eSgmb2JqLT5tbWFwX29mZnNldHMpKTsK
IAkJR0VNX0JVR19PTihhdG9taWNfcmVhZCgmb2JqLT5iaW5kX2NvdW50KSk7CiAJCUdFTV9CVUdf
T04ob2JqLT51c2VyZmF1bHRfY291bnQpOwogCQlHRU1fQlVHX09OKCFsaXN0X2VtcHR5KCZvYmot
Pmx1dF9saXN0KSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fb2JqZWN0LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmgK
aW5kZXggZTU3NTBkNTA2Y2M5Li5hMWViN2MwYjIzYWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fb2JqZWN0LmgKQEAgLTEzMiwxMyArMTMyLDEzIEBAIHZvaWQgaTkxNV9n
ZW1fb2JqZWN0X3VubG9ja19mZW5jZShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAog
c3RhdGljIGlubGluZSB2b2lkCiBpOTE1X2dlbV9vYmplY3Rfc2V0X3JlYWRvbmx5KHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiB7Ci0Jb2JqLT5iYXNlLnZtYV9ub2RlLnJlYWRvbmx5
ID0gdHJ1ZTsKKwlvYmotPmZsYWdzIHw9IEk5MTVfQk9fUkVBRE9OTFk7CiB9CiAKIHN0YXRpYyBp
bmxpbmUgYm9vbAogaTkxNV9nZW1fb2JqZWN0X2lzX3JlYWRvbmx5KGNvbnN0IHN0cnVjdCBkcm1f
aTkxNV9nZW1fb2JqZWN0ICpvYmopCiB7Ci0JcmV0dXJuIG9iai0+YmFzZS52bWFfbm9kZS5yZWFk
b25seTsKKwlyZXR1cm4gb2JqLT5mbGFncyAmIEk5MTVfQk9fUkVBRE9OTFk7CiB9CiAKIHN0YXRp
YyBpbmxpbmUgYm9vbApAQCAtMzg3LDkgKzM4Nyw2IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBpOTE1
X2dlbV9vYmplY3RfdW5waW5fbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAJ
aTkxNV9nZW1fb2JqZWN0X3VucGluX3BhZ2VzKG9iaik7CiB9CiAKLXZvaWQgX19pOTE1X2dlbV9v
YmplY3RfcmVsZWFzZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopOwotdm9p
ZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmopOwotCiB2b2lkCiBpOTE1X2dlbV9vYmplY3RfZmx1c2hfd3JpdGVfZG9tYWluKHN0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJCQkJICAgdW5zaWduZWQgaW50IGZsdXNoX2Rv
bWFpbnMpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29i
amVjdF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90
eXBlcy5oCmluZGV4IDE1ZjgyOTdkYzM0ZS4uYzBiZWI5N2I1NmQxIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVzLmgKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oCkBAIC02Myw2ICs2Mywy
MyBAQCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdF9vcHMgewogCXZvaWQgKCpyZWxlYXNlKShz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsKIH07CiAKK2VudW0gaTkxNV9tbWFwX3R5
cGUgeworCUk5MTVfTU1BUF9UWVBFX0dUVCA9IDAsCisJSTkxNV9NTUFQX1RZUEVfV0MsCisJSTkx
NV9NTUFQX1RZUEVfV0IsCisJSTkxNV9NTUFQX1RZUEVfVUMsCit9OworCitzdHJ1Y3QgaTkxNV9t
bWFwX29mZnNldCB7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldjsKKwlzdHJ1Y3QgZHJtX3ZtYV9v
ZmZzZXRfbm9kZSB2bWFfbm9kZTsKKwlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwor
CXN0cnVjdCBkcm1fZmlsZSAqZmlsZTsKKwllbnVtIGk5MTVfbW1hcF90eXBlIG1tYXBfdHlwZTsK
KworCXN0cnVjdCBsaXN0X2hlYWQgb2Zmc2V0OworfTsKKwogc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3QgewogCXN0cnVjdCBkcm1fZ2VtX29iamVjdCBiYXNlOwogCkBAIC0xMTgsMTIgKzEzNSwx
NyBAQCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCB7CiAJdW5zaWduZWQgaW50IHVzZXJmYXVs
dF9jb3VudDsKIAlzdHJ1Y3QgbGlzdF9oZWFkIHVzZXJmYXVsdF9saW5rOwogCisJLyogUHJvdGVj
dHMgYWNjZXNzIHRvIG1tYXAgb2Zmc2V0cyAqLworCXN0cnVjdCBtdXRleCBtbW9fbG9jazsKKwlz
dHJ1Y3QgbGlzdF9oZWFkIG1tYXBfb2Zmc2V0czsKKwogCUk5MTVfU0VMRlRFU1RfREVDTEFSRShz
dHJ1Y3QgbGlzdF9oZWFkIHN0X2xpbmspOwogCiAJdW5zaWduZWQgbG9uZyBmbGFnczsKICNkZWZp
bmUgSTkxNV9CT19BTExPQ19DT05USUdVT1VTIEJJVCgwKQogI2RlZmluZSBJOTE1X0JPX0FMTE9D
X1ZPTEFUSUxFICAgQklUKDEpCiAjZGVmaW5lIEk5MTVfQk9fQUxMT0NfRkxBR1MgKEk5MTVfQk9f
QUxMT0NfQ09OVElHVU9VUyB8IEk5MTVfQk9fQUxMT0NfVk9MQVRJTEUpCisjZGVmaW5lIEk5MTVf
Qk9fUkVBRE9OTFkgICAgICAgICBCSVQoMikKIAogCS8qCiAJICogSXMgdGhlIG9iamVjdCB0byBi
ZSBtYXBwZWQgYXMgcmVhZC1vbmx5IHRvIHRoZSBHUFUKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX3BhZ2VzLmMKaW5kZXggZjQwMmMyYzQxNWMyLi43NTE5N2NhNjk2YTggMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jCkBAIC04LDYgKzgsNyBAQAog
I2luY2x1ZGUgImk5MTVfZ2VtX29iamVjdC5oIgogI2luY2x1ZGUgImk5MTVfc2NhdHRlcmxpc3Qu
aCIKICNpbmNsdWRlICJpOTE1X2dlbV9sbWVtLmgiCisjaW5jbHVkZSAiaTkxNV9nZW1fbW1hbi5o
IgogCiB2b2lkIF9faTkxNV9nZW1fb2JqZWN0X3NldF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2Vt
X29iamVjdCAqb2JqLAogCQkJCSBzdHJ1Y3Qgc2dfdGFibGUgKnBhZ2VzLApAQCAtMjA3LDYgKzIw
OCw4IEBAIGludCBfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dl
bV9vYmplY3QgKm9iaikKIAkJZ290byB1bmxvY2s7CiAJfQogCisJaTkxNV9nZW1fb2JqZWN0X3Jl
bGVhc2VfbW1hcF9vZmZzZXQob2JqKTsKKwogCS8qCiAJICogLT5wdXRfcGFnZXMgbWlnaHQgbmVl
ZCB0byBhbGxvY2F0ZSBtZW1vcnkgZm9yIHRoZSBiaXQxNyBzd2l6emxlCiAJICogYXJyYXksIGhl
bmNlIHByb3RlY3QgdGhlbSBmcm9tIGJlaW5nIHJlYXBlZCBieSByZW1vdmluZyB0aGVtIGZyb20g
Z3R0CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdGlsaW5n
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdGlsaW5nLmMKaW5kZXggMWZh
NTkyZDgyYWY1Li42Yzc4MjVhMmRjMmEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV90aWxpbmcuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fdGlsaW5nLmMKQEAgLTExLDYgKzExLDcgQEAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgog
I2luY2x1ZGUgImk5MTVfZ2VtLmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1faW9jdGxzLmgiCisjaW5j
bHVkZSAiaTkxNV9nZW1fbW1hbi5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX29iamVjdC5oIgogCiAv
KioKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9n
ZW1fbW1hbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9t
bWFuLmMKaW5kZXggNmNlOTE2N2Y4YzlmLi41ZWQ1NmQ3MmU5NTkgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1hbi5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1hbi5jCkBAIC01NjUsMTYg
KzU2NSwxNiBAQCBzdGF0aWMgYm9vbCBhc3NlcnRfbW1hcF9vZmZzZXQoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUsCiAJCQkgICAgICAgaW50IGV4cGVjdGVkKQogewogCXN0cnVjdCBkcm1f
aTkxNV9nZW1fb2JqZWN0ICpvYmo7Ci0JaW50IGVycjsKKwlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNl
dCAqbW1vOwogCiAJb2JqID0gaTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9pbnRlcm5hbChpOTE1LCBz
aXplKTsKIAlpZiAoSVNfRVJSKG9iaikpCiAJCXJldHVybiBQVFJfRVJSKG9iaik7CiAKLQllcnIg
PSBjcmVhdGVfbW1hcF9vZmZzZXQob2JqKTsKKwltbW8gPSBtbWFwX29mZnNldF9jcmVhdGUob2Jq
LCBJOTE1X01NQVBfT0ZGU0VUX0dUVCwgTlVMTCk7CiAJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmop
OwogCi0JcmV0dXJuIGVyciA9PSBleHBlY3RlZDsKKwlyZXR1cm4gUFRSX0VSUl9PUl9aRVJPKG1t
bykgPT0gZXhwZWN0ZWQ7CiB9CiAKIHN0YXRpYyB2b2lkIGRpc2FibGVfcmV0aXJlX3dvcmtlcihz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKQEAgLTYwOSw2ICs2MDksOCBAQCBzdGF0aWMg
aW50IGlndF9tbWFwX29mZnNldF9leGhhdXN0aW9uKHZvaWQgKmFyZykKIAlzdHJ1Y3QgZHJtX21t
ICptbSA9ICZpOTE1LT5kcm0udm1hX29mZnNldF9tYW5hZ2VyLT52bV9hZGRyX3NwYWNlX21tOwog
CXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmo7CiAJc3RydWN0IGRybV9tbV9ub2RlICpo
b2xlLCAqbmV4dDsKKwkvKiBPd25lcnNoaXAgdHJhbnNmZXJyZWQgdG8gcGFyZW50IGdlbSBvYmpl
Y3QgaW4gY3JlYXRlX21tYXBfb2Zmc2V0ICovCisJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1t
bzsKIAlpbnQgbG9vcCwgZXJyOwogCiAJLyogRGlzYWJsZSBiYWNrZ3JvdW5kIHJlYXBlciAqLwpA
QCAtNjczLDkgKzY3NSwxMCBAQCBzdGF0aWMgaW50IGlndF9tbWFwX29mZnNldF9leGhhdXN0aW9u
KHZvaWQgKmFyZykKIAkJZ290byBvdXQ7CiAJfQogCi0JZXJyID0gY3JlYXRlX21tYXBfb2Zmc2V0
KG9iaik7Ci0JaWYgKGVycikgeworCW1tbyA9IG1tYXBfb2Zmc2V0X2NyZWF0ZShvYmosIEk5MTVf
TU1BUF9PRkZTRVRfR1RULCBOVUxMKTsKKwlpZiAoSVNfRVJSKG1tbykpIHsKIAkJcHJfZXJyKCJV
bmFibGUgdG8gaW5zZXJ0IG9iamVjdCBpbnRvIHJlY2xhaW1lZCBob2xlXG4iKTsKKwkJZXJyID0g
UFRSX0VSUihtbW8pOwogCQlnb3RvIGVycl9vYmo7CiAJfQogCkBAIC03MjQsMTAgKzcyNywxMSBA
QCBzdGF0aWMgaW50IGlndF9tbWFwX29mZnNldF9leGhhdXN0aW9uKHZvaWQgKmFyZykKIH0KIAog
I2RlZmluZSBleHBhbmQzMih4KSAoKCh4KSA8PCAwKSB8ICgoeCkgPDwgOCkgfCAoKHgpIDw8IDE2
KSB8ICgoeCkgPDwgMjQpKQotc3RhdGljIGludCBpZ3RfbW1hcF9ndHQodm9pZCAqYXJnKQorc3Rh
dGljIGludCBpZ3RfbW1hcCh2b2lkICphcmcsIGVudW0gaTkxNV9tbWFwX3R5cGUgdHlwZSkKIHsK
IAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGFyZzsKIAlzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX29iamVjdCAqb2JqOworCXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICptbW87CiAJc3RydWN0
IHZtX2FyZWFfc3RydWN0ICphcmVhOwogCXVuc2lnbmVkIGxvbmcgYWRkcjsKIAl2b2lkICp2YWRk
cjsKQEAgLTc0OSwxOCArNzUzLDE5IEBAIHN0YXRpYyBpbnQgaWd0X21tYXBfZ3R0KHZvaWQgKmFy
ZykKIAlpOTE1X2dlbV9vYmplY3RfZmx1c2hfbWFwKG9iaik7CiAJaTkxNV9nZW1fb2JqZWN0X3Vu
cGluX21hcChvYmopOwogCi0JZXJyID0gY3JlYXRlX21tYXBfb2Zmc2V0KG9iaik7Ci0JaWYgKGVy
cikKKwltbW8gPSBtbWFwX29mZnNldF9jcmVhdGUob2JqLCB0eXBlLCBOVUxMKTsKKwlpZiAoSVNf
RVJSKG1tbykpIHsKKwkJZXJyID0gUFRSX0VSUihtbW8pOwogCQlnb3RvIG91dDsKKwl9CiAKLQlh
ZGRyID0gaWd0X21tYXBfbm9kZShpOTE1LCAmb2JqLT5iYXNlLnZtYV9ub2RlLAotCQkJICAgICAw
LCBQUk9UX1dSSVRFLCBNQVBfU0hBUkVEKTsKKwlhZGRyID0gaWd0X21tYXBfbm9kZShpOTE1LCAm
bW1vLT52bWFfbm9kZSwgMCwgUFJPVF9XUklURSwgTUFQX1NIQVJFRCk7CiAJaWYgKElTX0VSUl9W
QUxVRShhZGRyKSkgewogCQllcnIgPSBhZGRyOwogCQlnb3RvIG91dDsKIAl9CiAKLQlwcl9kZWJ1
ZygiaWd0X21tYXAob2JqOmd0dCkgQCAlbHhcbiIsIGFkZHIpOworCXByX2RlYnVnKCJpZ3RfbW1h
cCgpIEAgJWx4XG4iLCBhZGRyKTsKIAogCWFyZWEgPSBmaW5kX3ZtYShjdXJyZW50LT5tbSwgYWRk
cik7CiAJaWYgKCFhcmVhKSB7CkBAIC03NjksOCArNzc0LDggQEAgc3RhdGljIGludCBpZ3RfbW1h
cF9ndHQodm9pZCAqYXJnKQogCQlnb3RvIG91dF91bm1hcDsKIAl9CiAKLQlpZiAoYXJlYS0+dm1f
cHJpdmF0ZV9kYXRhICE9IG9iaikgewotCQlwcl9lcnIoInZtX2FyZWFfc3RydWN0IGRpZCBub3Qg
cG9pbnQgYmFjayB0byBvdXIgb2JqZWN0IVxuIik7CisJaWYgKGFyZWEtPnZtX3ByaXZhdGVfZGF0
YSAhPSBtbW8pIHsKKwkJcHJfZXJyKCJ2bV9hcmVhX3N0cnVjdCBkaWQgbm90IHBvaW50IGJhY2sg
dG8gb3VyIG1tYXBfb2Zmc2V0IG9iamVjdCFcbiIpOwogCQllcnIgPSAtRUlOVkFMOwogCQlnb3Rv
IG91dF91bm1hcDsKIAl9CkBAIC03ODAsMTQgKzc4NSwxNCBAQCBzdGF0aWMgaW50IGlndF9tbWFw
X2d0dCh2b2lkICphcmcpCiAJCXUzMiB4OwogCiAJCWlmIChnZXRfdXNlcih4LCB1eCkpIHsKLQkJ
CXByX2VycigiVW5hYmxlIHRvIHJlYWQgZnJvbSBHVFQgbW1hcCwgb2Zmc2V0OiV6ZFxuIiwKKwkJ
CXByX2VycigiVW5hYmxlIHRvIHJlYWQgZnJvbSBtbWFwLCBvZmZzZXQ6JXpkXG4iLAogCQkJICAg
ICAgIGkgKiBzaXplb2YoeCkpOwogCQkJZXJyID0gLUVGQVVMVDsKIAkJCWJyZWFrOwogCQl9CiAK
IAkJaWYgKHggIT0gZXhwYW5kMzIoUE9JU09OX0lOVVNFKSkgewotCQkJcHJfZXJyKCJSZWFkIGlu
Y29ycmVjdCB2YWx1ZSBmcm9tIEdUVCBtbWFwLCBvZmZzZXQ6JXpkLCBmb3VuZDoleCwgZXhwZWN0
ZWQ6JXhcbiIsCisJCQlwcl9lcnIoIlJlYWQgaW5jb3JyZWN0IHZhbHVlIGZyb20gbW1hcCwgb2Zm
c2V0OiV6ZCwgZm91bmQ6JXgsIGV4cGVjdGVkOiV4XG4iLAogCQkJICAgICAgIGkgKiBzaXplb2Yo
eCksIHgsIGV4cGFuZDMyKFBPSVNPTl9JTlVTRSkpOwogCQkJZXJyID0gLUVJTlZBTDsKIAkJCWJy
ZWFrOwpAQCAtNzk1LDcgKzgwMCw3IEBAIHN0YXRpYyBpbnQgaWd0X21tYXBfZ3R0KHZvaWQgKmFy
ZykKIAogCQl4ID0gZXhwYW5kMzIoUE9JU09OX0ZSRUUpOwogCQlpZiAocHV0X3VzZXIoeCwgdXgp
KSB7Ci0JCQlwcl9lcnIoIlVuYWJsZSB0byB3cml0ZSB0byBHVFQgbW1hcCwgb2Zmc2V0OiV6ZFxu
IiwKKwkJCXByX2VycigiVW5hYmxlIHRvIHdyaXRlIHRvIG1tYXAsIG9mZnNldDolemRcbiIsCiAJ
CQkgICAgICAgaSAqIHNpemVvZih4KSk7CiAJCQllcnIgPSAtRUZBVUxUOwogCQkJYnJlYWs7CkBA
IC04MTEsNyArODE2LDcgQEAgc3RhdGljIGludCBpZ3RfbW1hcF9ndHQodm9pZCAqYXJnKQogCQln
b3RvIG91dDsKIAl9CiAJaWYgKGVyciA9PSAwICYmIG1lbWNocl9pbnYodmFkZHIsIFBPSVNPTl9G
UkVFLCBQQUdFX1NJWkUpKSB7Ci0JCXByX2VycigiV3JpdGUgdmlhIEdHVFQgbW1hcCBkaWQgbm90
IGxhbmQgaW4gYmFja2luZyBzdG9yZVxuIik7CisJCXByX2VycigiV3JpdGUgdmlhIG1tYXAgZGlk
IG5vdCBsYW5kIGluIGJhY2tpbmcgc3RvcmVcbiIpOwogCQllcnIgPSAtRUlOVkFMOwogCX0KIAlp
OTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKG9iaik7CkBAIC04MjEsNiArODI2LDE2IEBAIHN0YXRp
YyBpbnQgaWd0X21tYXBfZ3R0KHZvaWQgKmFyZykKIAlyZXR1cm4gZXJyOwogfQogCitzdGF0aWMg
aW50IGlndF9tbWFwX2d0dCh2b2lkICphcmcpCit7CisJcmV0dXJuIGlndF9tbWFwKGFyZywgSTkx
NV9NTUFQX1RZUEVfR1RUKTsKK30KKworc3RhdGljIGludCBpZ3RfbW1hcF9jcHUodm9pZCAqYXJn
KQoreworCXJldHVybiBpZ3RfbW1hcChhcmcsIEk5MTVfTU1BUF9UWVBFX1dDKTsKK30KKwogc3Rh
dGljIGludCBjaGVja19wcmVzZW50X3B0ZShwdGVfdCAqcHRlLCB1bnNpZ25lZCBsb25nIGFkZHIs
IHZvaWQgKmRhdGEpCiB7CiAJaWYgKCFwdGVfcHJlc2VudCgqcHRlKSB8fCBwdGVfbm9uZSgqcHRl
KSkgewpAQCAtODczLDEwICs4ODgsMTEgQEAgc3RhdGljIGludCBwcmVmYXVsdF9yYW5nZSh1NjQg
c3RhcnQsIHU2NCBsZW4pCiAJcmV0dXJuIF9fZ2V0X3VzZXIoYywgZW5kIC0gMSk7CiB9CiAKLXN0
YXRpYyBpbnQgaWd0X21tYXBfZ3R0X3Jldm9rZSh2b2lkICphcmcpCitzdGF0aWMgaW50IGlndF9t
bWFwX3Jldm9rZSh2b2lkICphcmcsIGVudW0gaTkxNV9tbWFwX3R5cGUgdHlwZSkKIHsKIAlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGFyZzsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29i
amVjdCAqb2JqOworCXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICptbW87CiAJdW5zaWduZWQgbG9u
ZyBhZGRyOwogCWludCBlcnI7CiAKQEAgLTg4NywxMiArOTAzLDEzIEBAIHN0YXRpYyBpbnQgaWd0
X21tYXBfZ3R0X3Jldm9rZSh2b2lkICphcmcpCiAJaWYgKElTX0VSUihvYmopKQogCQlyZXR1cm4g
UFRSX0VSUihvYmopOwogCi0JZXJyID0gY3JlYXRlX21tYXBfb2Zmc2V0KG9iaik7Ci0JaWYgKGVy
cikKKwltbW8gPSBtbWFwX29mZnNldF9jcmVhdGUob2JqLCB0eXBlLCBOVUxMKTsKKwlpZiAoSVNf
RVJSKG1tbykpIHsKKwkJZXJyID0gUFRSX0VSUihtbW8pOwogCQlnb3RvIG91dDsKKwl9CiAKLQlh
ZGRyID0gaWd0X21tYXBfbm9kZShpOTE1LCAmb2JqLT5iYXNlLnZtYV9ub2RlLAotCQkJICAgICAw
LCBQUk9UX1dSSVRFLCBNQVBfU0hBUkVEKTsKKwlhZGRyID0gaWd0X21tYXBfbm9kZShpOTE1LCAm
bW1vLT52bWFfbm9kZSwgMCwgUFJPVF9XUklURSwgTUFQX1NIQVJFRCk7CiAJaWYgKElTX0VSUl9W
QUxVRShhZGRyKSkgewogCQllcnIgPSBhZGRyOwogCQlnb3RvIG91dDsKQEAgLTkwMiw3ICs5MTks
OCBAQCBzdGF0aWMgaW50IGlndF9tbWFwX2d0dF9yZXZva2Uodm9pZCAqYXJnKQogCWlmIChlcnIp
CiAJCWdvdG8gb3V0X3VubWFwOwogCi0JR0VNX0JVR19PTighYXRvbWljX3JlYWQoJm9iai0+Ymlu
ZF9jb3VudCkpOworCUdFTV9CVUdfT04obW1vLT5tbWFwX3R5cGUgPT0gSTkxNV9NTUFQX1RZUEVf
R1RUICYmCisJCSAgICFhdG9taWNfcmVhZCgmb2JqLT5iaW5kX2NvdW50KSk7CiAKIAllcnIgPSBj
aGVja19wcmVzZW50KGFkZHIsIG9iai0+YmFzZS5zaXplKTsKIAlpZiAoZXJyKQpAQCAtOTIwLDYg
KzkzOCwxNSBAQCBzdGF0aWMgaW50IGlndF9tbWFwX2d0dF9yZXZva2Uodm9pZCAqYXJnKQogCX0K
IAlHRU1fQlVHX09OKGF0b21pY19yZWFkKCZvYmotPmJpbmRfY291bnQpKTsKIAorCWlmICh0eXBl
ICE9IEk5MTVfTU1BUF9UWVBFX0dUVCkgeworCQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMo
b2JqKTsKKwkJaWYgKGk5MTVfZ2VtX29iamVjdF9oYXNfcGFnZXMob2JqKSkgeworCQkJcHJfZXJy
KCJGYWlsZWQgdG8gcHV0LXBhZ2VzIG9iamVjdCFcbiIpOworCQkJZXJyID0gLUVJTlZBTDsKKwkJ
CWdvdG8gb3V0X3VubWFwOworCQl9CisJfQorCiAJZXJyID0gY2hlY2tfYWJzZW50KGFkZHIsIG9i
ai0+YmFzZS5zaXplKTsKIAlpZiAoZXJyKQogCQlnb3RvIG91dF91bm1hcDsKQEAgLTkzMSw2ICs5
NTgsMTYgQEAgc3RhdGljIGludCBpZ3RfbW1hcF9ndHRfcmV2b2tlKHZvaWQgKmFyZykKIAlyZXR1
cm4gZXJyOwogfQogCitzdGF0aWMgaW50IGlndF9tbWFwX2d0dF9yZXZva2Uodm9pZCAqYXJnKQor
eworCXJldHVybiBpZ3RfbW1hcF9yZXZva2UoYXJnLCBJOTE1X01NQVBfVFlQRV9HVFQpOworfQor
CitzdGF0aWMgaW50IGlndF9tbWFwX2NwdV9yZXZva2Uodm9pZCAqYXJnKQoreworCXJldHVybiBp
Z3RfbW1hcF9yZXZva2UoYXJnLCBJOTE1X01NQVBfVFlQRV9XQyk7Cit9CisKIGludCBpOTE1X2dl
bV9tbWFuX2xpdmVfc2VsZnRlc3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogewog
CXN0YXRpYyBjb25zdCBzdHJ1Y3QgaTkxNV9zdWJ0ZXN0IHRlc3RzW10gPSB7CkBAIC05MzgsNyAr
OTc1LDkgQEAgaW50IGk5MTVfZ2VtX21tYW5fbGl2ZV9zZWxmdGVzdHMoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUpCiAJCVNVQlRFU1QoaWd0X3Ntb2tlX3RpbGluZyksCiAJCVNVQlRFU1Qo
aWd0X21tYXBfb2Zmc2V0X2V4aGF1c3Rpb24pLAogCQlTVUJURVNUKGlndF9tbWFwX2d0dCksCisJ
CVNVQlRFU1QoaWd0X21tYXBfY3B1KSwKIAkJU1VCVEVTVChpZ3RfbW1hcF9ndHRfcmV2b2tlKSwK
KwkJU1VCVEVTVChpZ3RfbW1hcF9jcHVfcmV2b2tlKSwKIAl9OwogCiAJcmV0dXJuIGk5MTVfc3Vi
dGVzdHModGVzdHMsIGk5MTUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfcmVzZXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKaW5k
ZXggMzYxODkyMzhlMTNjLi4wZTk0YjcyMGM5OTMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfcmVzZXQuYwpAQCAtNjc4LDggKzY3OCwxMyBAQCBzdGF0aWMgdm9pZCByZXZva2VfbW1hcHMo
c3RydWN0IGludGVsX2d0ICpndCkKIAkJCWNvbnRpbnVlOwogCiAJCUdFTV9CVUdfT04odm1hLT5m
ZW5jZSAhPSAmZ3QtPmdndHQtPmZlbmNlX3JlZ3NbaV0pOwotCQlub2RlID0gJnZtYS0+b2JqLT5i
YXNlLnZtYV9ub2RlOworCisJCWlmICghdm1hLT5tbW8pCisJCQljb250aW51ZTsKKworCQlub2Rl
ID0gJnZtYS0+bW1vLT52bWFfbm9kZTsKIAkJdm1hX29mZnNldCA9IHZtYS0+Z2d0dF92aWV3LnBh
cnRpYWwub2Zmc2V0IDw8IFBBR0VfU0hJRlQ7CisKIAkJdW5tYXBfbWFwcGluZ19yYW5nZShndC0+
aTkxNS0+ZHJtLmFub25faW5vZGUtPmlfbWFwcGluZywKIAkJCQkgICAgZHJtX3ZtYV9ub2RlX29m
ZnNldF9hZGRyKG5vZGUpICsgdm1hX29mZnNldCwKIAkJCQkgICAgdm1hLT5zaXplLApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZHJ2LmMKaW5kZXggZjUwOWQ4MjZmY2M3Li45NDBhODkwN2YzZTcgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kcnYuYwpAQCAtNjEsNiArNjEsNyBAQAogCiAjaW5jbHVkZSAiZ2VtL2k5MTVf
Z2VtX2NvbnRleHQuaCIKICNpbmNsdWRlICJnZW0vaTkxNV9nZW1faW9jdGxzLmgiCisjaW5jbHVk
ZSAiZ2VtL2k5MTVfZ2VtX21tYW4uaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndC5oIgogI2luY2x1
ZGUgImd0L2ludGVsX2d0X3BtLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfcmM2LmgiCkBAIC0yNjYy
LDE4ICsyNjYzLDEyIEBAIGNvbnN0IHN0cnVjdCBkZXZfcG1fb3BzIGk5MTVfcG1fb3BzID0gewog
CS5ydW50aW1lX3Jlc3VtZSA9IGludGVsX3J1bnRpbWVfcmVzdW1lLAogfTsKIAotc3RhdGljIGNv
bnN0IHN0cnVjdCB2bV9vcGVyYXRpb25zX3N0cnVjdCBpOTE1X2dlbV92bV9vcHMgPSB7Ci0JLmZh
dWx0ID0gaTkxNV9nZW1fZmF1bHQsCi0JLm9wZW4gPSBkcm1fZ2VtX3ZtX29wZW4sCi0JLmNsb3Nl
ID0gZHJtX2dlbV92bV9jbG9zZSwKLX07Ci0KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZmlsZV9vcGVy
YXRpb25zIGk5MTVfZHJpdmVyX2ZvcHMgPSB7CiAJLm93bmVyID0gVEhJU19NT0RVTEUsCiAJLm9w
ZW4gPSBkcm1fb3BlbiwKIAkucmVsZWFzZSA9IGRybV9yZWxlYXNlLAogCS51bmxvY2tlZF9pb2N0
bCA9IGRybV9pb2N0bCwKLQkubW1hcCA9IGRybV9nZW1fbW1hcCwKKwkubW1hcCA9IGk5MTVfZ2Vt
X21tYXAsCiAJLnBvbGwgPSBkcm1fcG9sbCwKIAkucmVhZCA9IGRybV9yZWFkLAogCS5jb21wYXRf
aW9jdGwgPSBpOTE1X2NvbXBhdF9pb2N0bCwKQEAgLTI3MjAsNyArMjcxNSw3IEBAIHN0YXRpYyBj
b25zdCBzdHJ1Y3QgZHJtX2lvY3RsX2Rlc2MgaTkxNV9pb2N0bHNbXSA9IHsKIAlEUk1fSU9DVExf
REVGX0RSVihJOTE1X0dFTV9QUkVBRCwgaTkxNV9nZW1fcHJlYWRfaW9jdGwsIERSTV9SRU5ERVJf
QUxMT1cpLAogCURSTV9JT0NUTF9ERUZfRFJWKEk5MTVfR0VNX1BXUklURSwgaTkxNV9nZW1fcHdy
aXRlX2lvY3RsLCBEUk1fUkVOREVSX0FMTE9XKSwKIAlEUk1fSU9DVExfREVGX0RSVihJOTE1X0dF
TV9NTUFQLCBpOTE1X2dlbV9tbWFwX2lvY3RsLCBEUk1fUkVOREVSX0FMTE9XKSwKLQlEUk1fSU9D
VExfREVGX0RSVihJOTE1X0dFTV9NTUFQX0dUVCwgaTkxNV9nZW1fbW1hcF9ndHRfaW9jdGwsIERS
TV9SRU5ERVJfQUxMT1cpLAorCURSTV9JT0NUTF9ERUZfRFJWKEk5MTVfR0VNX01NQVBfT0ZGU0VU
LCBpOTE1X2dlbV9tbWFwX29mZnNldF9pb2N0bCwgRFJNX1JFTkRFUl9BTExPVyksCiAJRFJNX0lP
Q1RMX0RFRl9EUlYoSTkxNV9HRU1fU0VUX0RPTUFJTiwgaTkxNV9nZW1fc2V0X2RvbWFpbl9pb2N0
bCwgRFJNX1JFTkRFUl9BTExPVyksCiAJRFJNX0lPQ1RMX0RFRl9EUlYoSTkxNV9HRU1fU1dfRklO
SVNILCBpOTE1X2dlbV9zd19maW5pc2hfaW9jdGwsIERSTV9SRU5ERVJfQUxMT1cpLAogCURSTV9J
T0NUTF9ERUZfRFJWKEk5MTVfR0VNX1NFVF9USUxJTkcsIGk5MTVfZ2VtX3NldF90aWxpbmdfaW9j
dGwsIERSTV9SRU5ERVJfQUxMT1cpLApAQCAtMjc2Miw3ICsyNzU3LDYgQEAgc3RhdGljIHN0cnVj
dCBkcm1fZHJpdmVyIGRyaXZlciA9IHsKIAogCS5nZW1fY2xvc2Vfb2JqZWN0ID0gaTkxNV9nZW1f
Y2xvc2Vfb2JqZWN0LAogCS5nZW1fZnJlZV9vYmplY3RfdW5sb2NrZWQgPSBpOTE1X2dlbV9mcmVl
X29iamVjdCwKLQkuZ2VtX3ZtX29wcyA9ICZpOTE1X2dlbV92bV9vcHMsCiAKIAkucHJpbWVfaGFu
ZGxlX3RvX2ZkID0gZHJtX2dlbV9wcmltZV9oYW5kbGVfdG9fZmQsCiAJLnByaW1lX2ZkX3RvX2hh
bmRsZSA9IGRybV9nZW1fcHJpbWVfZmRfdG9faGFuZGxlLApAQCAtMjc3Myw3ICsyNzY3LDggQEAg
c3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIGRyaXZlciA9IHsKIAkuZ2V0X3NjYW5vdXRfcG9zaXRp
b24gPSBpOTE1X2dldF9jcnRjX3NjYW5vdXRwb3MsCiAKIAkuZHVtYl9jcmVhdGUgPSBpOTE1X2dl
bV9kdW1iX2NyZWF0ZSwKLQkuZHVtYl9tYXBfb2Zmc2V0ID0gaTkxNV9nZW1fbW1hcF9ndHQsCisJ
LmR1bWJfbWFwX29mZnNldCA9IGk5MTVfZ2VtX2R1bWJfbW1hcF9vZmZzZXQsCisKIAkuaW9jdGxz
ID0gaTkxNV9pb2N0bHMsCiAJLm51bV9pb2N0bHMgPSBBUlJBWV9TSVpFKGk5MTVfaW9jdGxzKSwK
IAkuZm9wcyA9ICZpOTE1X2RyaXZlcl9mb3BzLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5kZXgg
MTQ3NDRjMTE0NDc1Li4wZDRhZDE4ZTEwZGQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaApAQCAt
MTg1Nyw5ICsxODU3LDYgQEAgaTkxNV9tdXRleF9sb2NrX2ludGVycnVwdGlibGUoc3RydWN0IGRy
bV9kZXZpY2UgKmRldikKIGludCBpOTE1X2dlbV9kdW1iX2NyZWF0ZShzdHJ1Y3QgZHJtX2ZpbGUg
KmZpbGVfcHJpdiwKIAkJCSBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJIHN0cnVjdCBkcm1f
bW9kZV9jcmVhdGVfZHVtYiAqYXJncyk7Ci1pbnQgaTkxNV9nZW1fbW1hcF9ndHQoc3RydWN0IGRy
bV9maWxlICpmaWxlX3ByaXYsIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCi0JCSAgICAgIHUzMiBo
YW5kbGUsIHU2NCAqb2Zmc2V0KTsKLWludCBpOTE1X2dlbV9tbWFwX2d0dF92ZXJzaW9uKHZvaWQp
OwogCiBpbnQgX19tdXN0X2NoZWNrIGk5MTVfZ2VtX3NldF9nbG9iYWxfc2Vxbm8oc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwgdTMyIHNlcW5vKTsKIApAQCAtMTg4Miw3ICsxODc5LDYgQEAgdm9pZCBp
OTE1X2dlbV9kcml2ZXJfcmVsZWFzZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYp
Owogdm9pZCBpOTE1X2dlbV9zdXNwZW5kKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dik7CiB2b2lkIGk5MTVfZ2VtX3N1c3BlbmRfbGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpOwogdm9pZCBpOTE1X2dlbV9yZXN1bWUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KTsKLXZtX2ZhdWx0X3QgaTkxNV9nZW1fZmF1bHQoc3RydWN0IHZtX2ZhdWx0ICp2
bWYpOwogCiBpbnQgaTkxNV9nZW1fb3BlbihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwg
c3RydWN0IGRybV9maWxlICpmaWxlKTsKIHZvaWQgaTkxNV9nZW1fcmVsZWFzZShzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2Vt
LmMKaW5kZXggNjEzOTViMDM0NDNlLi42NzlmYjQ2YTdjYzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZW0uYwpAQCAtNDQsNiArNDQsNyBAQAogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9jbGZsdXNoLmgi
CiAjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCIKICNpbmNsdWRlICJnZW0vaTkxNV9n
ZW1faW9jdGxzLmgiCisjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX21tYW4uaCIKICNpbmNsdWRlICJn
ZW0vaTkxNV9nZW1fcG0uaCIKICNpbmNsdWRlICJndC9pbnRlbF9jb250ZXh0LmgiCiAjaW5jbHVk
ZSAiZ3QvaW50ZWxfZW5naW5lX3VzZXIuaCIKQEAgLTg1NSw3ICs4NTYsNyBAQCB2b2lkIGk5MTVf
Z2VtX3J1bnRpbWVfc3VzcGVuZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAogCWxp
c3RfZm9yX2VhY2hfZW50cnlfc2FmZShvYmosIG9uLAogCQkJCSAmaTkxNS0+Z2d0dC51c2VyZmF1
bHRfbGlzdCwgdXNlcmZhdWx0X2xpbmspCi0JCV9faTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1h
cChvYmopOworCQlfX2k5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXBfZ3R0KG9iaik7CiAKIAkv
KgogCSAqIFRoZSBmZW5jZSB3aWxsIGJlIGxvc3Qgd2hlbiB0aGUgZGV2aWNlIHBvd2VycyBkb3du
LiBJZiBhbnkgd2VyZQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRw
YXJhbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jCmluZGV4IGNmOGE4
YzNlZjA0Ny4uNTRmY2U4MWQ1NzI0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2dldHBhcmFtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5j
CkBAIC0yLDYgKzIsNyBAQAogICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVAogICovCiAK
KyNpbmNsdWRlICJnZW0vaTkxNV9nZW1fbW1hbi5oIgogI2luY2x1ZGUgImd0L2ludGVsX2VuZ2lu
ZV91c2VyLmgiCiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV92bWEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmMK
aW5kZXggZTU1MTJmMjZlMjBhLi41MTA4ZGNiMmU1YjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfdm1hLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEu
YwpAQCAtMTA1NCw3ICsxMDU0LDcgQEAgc3RhdGljIHZvaWQgX19pOTE1X3ZtYV9pb3VubWFwKHN0
cnVjdCBpOTE1X3ZtYSAqdm1hKQogCiB2b2lkIGk5MTVfdm1hX3Jldm9rZV9tbWFwKHN0cnVjdCBp
OTE1X3ZtYSAqdm1hKQogewotCXN0cnVjdCBkcm1fdm1hX29mZnNldF9ub2RlICpub2RlID0gJnZt
YS0+b2JqLT5iYXNlLnZtYV9ub2RlOworCXN0cnVjdCBkcm1fdm1hX29mZnNldF9ub2RlICpub2Rl
OwogCXU2NCB2bWFfb2Zmc2V0OwogCiAJbG9ja2RlcF9hc3NlcnRfaGVsZCgmdm1hLT52bS0+bXV0
ZXgpOwpAQCAtMTA2NSw2ICsxMDY1LDcgQEAgdm9pZCBpOTE1X3ZtYV9yZXZva2VfbW1hcChzdHJ1
Y3QgaTkxNV92bWEgKnZtYSkKIAlHRU1fQlVHX09OKCFpOTE1X3ZtYV9pc19tYXBfYW5kX2ZlbmNl
YWJsZSh2bWEpKTsKIAlHRU1fQlVHX09OKCF2bWEtPm9iai0+dXNlcmZhdWx0X2NvdW50KTsKIAor
CW5vZGUgPSAmdm1hLT5tbW8tPnZtYV9ub2RlOwogCXZtYV9vZmZzZXQgPSB2bWEtPmdndHRfdmll
dy5wYXJ0aWFsLm9mZnNldCA8PCBQQUdFX1NISUZUOwogCXVubWFwX21hcHBpbmdfcmFuZ2Uodm1h
LT52bS0+aTkxNS0+ZHJtLmFub25faW5vZGUtPmlfbWFwcGluZywKIAkJCSAgICBkcm1fdm1hX25v
ZGVfb2Zmc2V0X2FkZHIobm9kZSkgKyB2bWFfb2Zmc2V0LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV92bWEuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmgK
aW5kZXggNDY1OTMyODEzYmM1Li5mMDlmNGY1MTNjNDEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfdm1hLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEu
aApAQCAtNjMsNiArNjMsOSBAQCBzdHJ1Y3QgaTkxNV92bWEgewogCXU2NCBkaXNwbGF5X2FsaWdu
bWVudDsKIAlzdHJ1Y3QgaTkxNV9wYWdlX3NpemVzIHBhZ2Vfc2l6ZXM7CiAKKwkvKiBtbWFwLW9m
ZnNldCBhc3NvY2lhdGVkIHdpdGggZmVuY2luZyBmb3IgdGhpcyB2bWEgKi8KKwlzdHJ1Y3QgaTkx
NV9tbWFwX29mZnNldAkqbW1vOworCiAJdTMyIGZlbmNlX3NpemU7CiAJdTMyIGZlbmNlX2FsaWdu
bWVudDsKIApkaWZmIC0tZ2l0IGEvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oIGIvaW5jbHVk
ZS91YXBpL2RybS9pOTE1X2RybS5oCmluZGV4IDU0MDBkN2UwNTdmMS4uZTg0NGMzYThkMTk3IDEw
MDY0NAotLS0gYS9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgKKysrIGIvaW5jbHVkZS91YXBp
L2RybS9pOTE1X2RybS5oCkBAIC0zOTUsNiArMzk1LDcgQEAgdHlwZWRlZiBzdHJ1Y3QgX2RybV9p
OTE1X3NhcmVhIHsKICNkZWZpbmUgRFJNX0lPQ1RMX0k5MTVfR0VNX1BXUklURQlEUk1fSU9XIChE
Uk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX1BXUklURSwgc3RydWN0IGRybV9pOTE1X2dl
bV9wd3JpdGUpCiAjZGVmaW5lIERSTV9JT0NUTF9JOTE1X0dFTV9NTUFQCQlEUk1fSU9XUihEUk1f
Q09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX01NQVAsIHN0cnVjdCBkcm1faTkxNV9nZW1fbW1h
cCkKICNkZWZpbmUgRFJNX0lPQ1RMX0k5MTVfR0VNX01NQVBfR1RUCURSTV9JT1dSKERSTV9DT01N
QU5EX0JBU0UgKyBEUk1fSTkxNV9HRU1fTU1BUF9HVFQsIHN0cnVjdCBkcm1faTkxNV9nZW1fbW1h
cF9ndHQpCisjZGVmaW5lIERSTV9JT0NUTF9JOTE1X0dFTV9NTUFQX09GRlNFVAlEUk1fSU9XUihE
Uk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX01NQVBfR1RULCBzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX21tYXBfb2Zmc2V0KQogI2RlZmluZSBEUk1fSU9DVExfSTkxNV9HRU1fU0VUX0RPTUFJTglE
Uk1fSU9XIChEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX1NFVF9ET01BSU4sIHN0cnVj
dCBkcm1faTkxNV9nZW1fc2V0X2RvbWFpbikKICNkZWZpbmUgRFJNX0lPQ1RMX0k5MTVfR0VNX1NX
X0ZJTklTSAlEUk1fSU9XIChEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX1NXX0ZJTklT
SCwgc3RydWN0IGRybV9pOTE1X2dlbV9zd19maW5pc2gpCiAjZGVmaW5lIERSTV9JT0NUTF9JOTE1
X0dFTV9TRVRfVElMSU5HCURSTV9JT1dSIChEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VN
X1NFVF9USUxJTkcsIHN0cnVjdCBkcm1faTkxNV9nZW1fc2V0X3RpbGluZykKQEAgLTc5Myw2ICs3
OTQsMzIgQEAgc3RydWN0IGRybV9pOTE1X2dlbV9tbWFwX2d0dCB7CiAJX191NjQgb2Zmc2V0Owog
fTsKIAorc3RydWN0IGRybV9pOTE1X2dlbV9tbWFwX29mZnNldCB7CisJLyoqIEhhbmRsZSBmb3Ig
dGhlIG9iamVjdCBiZWluZyBtYXBwZWQuICovCisJX191MzIgaGFuZGxlOworCV9fdTMyIHBhZDsK
KwkvKioKKwkgKiBGYWtlIG9mZnNldCB0byB1c2UgZm9yIHN1YnNlcXVlbnQgbW1hcCBjYWxsCisJ
ICoKKwkgKiBUaGlzIGlzIGEgZml4ZWQtc2l6ZSB0eXBlIGZvciAzMi82NCBjb21wYXRpYmlsaXR5
LgorCSAqLworCV9fdTY0IG9mZnNldDsKKworCS8qKgorCSAqIEZsYWdzIGZvciBleHRlbmRlZCBi
ZWhhdmlvdXIuCisJICoKKwkgKiBJdCBpcyBtYW5kYXRvcnkgdGhhdCBlaXRoZXIgb25lIG9mIHRo
ZSBNTUFQX09GRlNFVCBmbGFncworCSAqIHNob3VsZCBiZSBwYXNzZWQgaGVyZS4KKwkgKi8KKwlf
X3U2NCBmbGFnczsKKyNkZWZpbmUgSTkxNV9NTUFQX09GRlNFVF9HVFQgMAorI2RlZmluZSBJOTE1
X01NQVBfT0ZGU0VUX1dDICAxCisjZGVmaW5lIEk5MTVfTU1BUF9PRkZTRVRfV0IgIDIKKyNkZWZp
bmUgSTkxNV9NTUFQX09GRlNFVF9VQyAgMworCisJX191NjQgZXh0ZW5zaW9uczsKK307CisKIHN0
cnVjdCBkcm1faTkxNV9nZW1fc2V0X2RvbWFpbiB7CiAJLyoqIEhhbmRsZSBmb3IgdGhlIG9iamVj
dCAqLwogCV9fdTMyIGhhbmRsZTsKLS0gCjIuMjQuMAoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vaW50ZWwtZ2Z4

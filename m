Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 040A07A64E
	for <lists+intel-gfx@lfdr.de>; Tue, 30 Jul 2019 12:57:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 715796E48F;
	Tue, 30 Jul 2019 10:57:24 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8877B6E48F
 for <intel-gfx@lists.freedesktop.org>; Tue, 30 Jul 2019 10:57:23 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 30 Jul 2019 03:57:22 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,326,1559545200"; d="scan'208";a="371499522"
Received: from ramaling-i9x.iind.intel.com ([10.99.66.154])
 by fmsmga006.fm.intel.com with ESMTP; 30 Jul 2019 03:57:21 -0700
From: Ramalingam C <ramalingam.c@intel.com>
To: intel-gfx <intel-gfx@lists.freedesktop.org>
Date: Tue, 30 Jul 2019 09:28:35 +0530
Message-Id: <20190730035835.24103-1-ramalingam.c@intel.com>
X-Mailer: git-send-email 2.19.1
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t v5] tests/i915/gem_exec_async: Update with
 engine discovery
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TGVnYWN5IGV4ZWNidWYgYWJpIHRlc3RzIGFyZSBwcmVmaXhlZCB3aXRoIGxlZ2FjeS4gTmV3IHRl
c3QgYXJlIGFkZGVkIHRvCnJ1biBvbiBwaHlzaWNhbCBlbmdpbmVzIGFjY2Vzc2VkIHRocm91Z2gg
ZW5naW5lIGRpc2NvdmVyeS4KClNvIGxlZ2FjeSB0ZXN0cyBydW4gb24gdGhlIHVuY29uZmlndXJl
ZCAod2l0aCBlbmdpbmUgbWFwKSBjb250ZXh0IGFuZAp1c2UgYSBuZXcgaGVscGVyIGdlbV9lYl9m
bGFnc190b19lbmdpbmUgdG8gbG9vayB1cCB0aGUgZW5naW5lIGZyb20gdGhlCmludGVsX2V4ZWN1
dGlvbl9lbmdpbmVzMiBzdGF0aWMgbGlzdC4gVGhpcyBpcyBvbmx5IHRvIGVuYWJsZSB0aGUgY29y
ZQp0ZXN0IGNvZGUgdG8gYmUgc2hhcmVkLgoKUGxhY2VzIHdoZXJlIG5ldyBjb250ZXh0cyBhcmUg
Y3JlYXRlZCBoYWQgdG8gYmUgdXBkYXRlZCB0byBlaXRoZXIKZXF1YWxseSBjb25maWd1cmUgdGhl
IGNvbnRleHRzIG9yIG5vdC4KCnYyOgogIHJldGFpbmVkIHRoZSB0ZXN0IGFzIGl0IGlzIGZvciBs
ZWdhY3kgdWFwaSB0ZXN0aW5nIGFuZCBkdXBsY2lhdGVkIGZvcgoJbmV3IGVuZ2luZSBkaXNjb3Zl
cnkgW1R2cnRrb10KdjM6CiAgRmV3IG5pdHMgYWRkcmVzc2VkIFtUdnJ0a29dCnY0OgogIEluIGxl
Z2FjeSB1QVBJIHRlc3QgcGF0aCwgaXRlcmF0ZSB0aHJvdWdoIGZvcl9lYWNoX2VuZ2luZSBbVHZy
dGtvXQp2NToKICBGdW5jdGlvbiBmb3IgZXhlY19mbGFnIGNvbXBhcmlzb24gW1R2cnRrb10KClNp
Z25lZC1vZmYtYnk6IFJhbWFsaW5nYW0gQyA8cmFtYWxpbmdhbS5jQGludGVsLmNvbT4KLS0tCiBs
aWIvaWd0X2d0LmMgICAgICAgICAgICAgICAgfCAyNSArKysrKysrKysrKysrKysrKysKIGxpYi9p
Z3RfZ3QuaCAgICAgICAgICAgICAgICB8ICAxICsKIHRlc3RzL2k5MTUvZ2VtX2V4ZWNfYXN5bmMu
YyB8IDUyICsrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0KIDMgZmlsZXMgY2hh
bmdlZCwgNjQgaW5zZXJ0aW9ucygrKSwgMTQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvbGli
L2lndF9ndC5jIGIvbGliL2lndF9ndC5jCmluZGV4IDc4ZTNjZDA4OTI1Yi4uZjU5NGE0NjI4MmJj
IDEwMDY0NAotLS0gYS9saWIvaWd0X2d0LmMKKysrIGIvbGliL2lndF9ndC5jCkBAIC02MzMsMyAr
NjMzLDI4IEBAIGJvb2wgZ2VtX3JpbmdfaGFzX3BoeXNpY2FsX2VuZ2luZShpbnQgZmQsIHVuc2ln
bmVkIHJpbmcpCiAKIAlyZXR1cm4gZ2VtX2hhc19yaW5nKGZkLCByaW5nKTsKIH0KKworYm9vbCBn
ZW1fZWJfZmxhZ3NfYXJlX2RpZmZlcmVudF9lbmdpbmVzKHVuc2lnbmVkIGViX2ZsYWcxLCB1bnNp
Z25lZCBlYl9mbGFnMikKK3sKKwlpZiAoZWJfZmxhZzEgPT0gZWJfZmxhZzIpCisJCXJldHVybiBm
YWxzZTsKKworCS8qIERFRkFVTFQgc3RhbmRzIGZvciBSRU5ERVIgaW4gbGVnYWN5IHVBUEkqLwor
CWlmICgoZWJfZmxhZzEgPT0gSTkxNV9FWEVDX0RFRkFVTFQgJiYgZWJfZmxhZzIgPT0gSTkxNV9F
WEVDX1JFTkRFUikgfHwKKwkgICAgIChlYl9mbGFnMSA9PSBJOTE1X0VYRUNfUkVOREVSICYmIGVi
X2ZsYWcyID09IEk5MTVfRVhFQ19ERUZBVUxUKSkKKwkJcmV0dXJuIGZhbHNlOworCisJLyoKKwkg
KiBCU0QgY291bGQgYmUgZXhlY3V0ZWQgb24gQlNEMS9CU0QyLiBTbyBCU0QgYW5kIEJTRC1uIGNv
dWxkIGJlCisJICogc2FtZSBlbmdpbmUuCisJICovCisJaWYgKChlYl9mbGFnMSA9PSBJOTE1X0VY
RUNfQlNEKSAmJgorCSAgICAoZWJfZmxhZzIgJiB+STkxNV9FWEVDX0JTRF9NQVNLKSA9PSBJOTE1
X0VYRUNfQlNEKQorCQkJcmV0dXJuIGZhbHNlOworCisJaWYgKChlYl9mbGFnMiA9PSBJOTE1X0VY
RUNfQlNEKSAmJgorCSAgICAoZWJfZmxhZzEgJiB+STkxNV9FWEVDX0JTRF9NQVNLKSA9PSBJOTE1
X0VYRUNfQlNEKQorCQkJcmV0dXJuIGZhbHNlOworCisJcmV0dXJuIHRydWU7Cit9CmRpZmYgLS1n
aXQgYS9saWIvaWd0X2d0LmggYi9saWIvaWd0X2d0LmgKaW5kZXggNzNiNTAwMmEwNGJkLi43NjBi
OGJhZWZjNDggMTAwNjQ0Ci0tLSBhL2xpYi9pZ3RfZ3QuaAorKysgYi9saWIvaWd0X2d0LmgKQEAg
LTEwMSw1ICsxMDEsNiBAQCBleHRlcm4gY29uc3Qgc3RydWN0IGludGVsX2V4ZWN1dGlvbl9lbmdp
bmUyIHsKIH0gaW50ZWxfZXhlY3V0aW9uX2VuZ2luZXMyW107CiAKIGludCBnZW1fZXhlY2J1Zl9m
bGFnc190b19lbmdpbmVfY2xhc3ModW5zaWduZWQgaW50IGZsYWdzKTsKK2Jvb2wgZ2VtX2ViX2Zs
YWdzX2FyZV9kaWZmZXJlbnRfZW5naW5lcyh1bnNpZ25lZCBlYl9mbGFnMSwgdW5zaWduZWQgZWJf
ZmxhZzIpOwogCiAjZW5kaWYgLyogSUdUX0dUX0ggKi8KZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUv
Z2VtX2V4ZWNfYXN5bmMuYyBiL3Rlc3RzL2k5MTUvZ2VtX2V4ZWNfYXN5bmMuYwppbmRleCA5YTA2
YWY3ZTI5Y2IuLjVmZGNlNWFjNWI3NyAxMDA2NDQKLS0tIGEvdGVzdHMvaTkxNS9nZW1fZXhlY19h
c3luYy5jCisrKyBiL3Rlc3RzL2k5MTUvZ2VtX2V4ZWNfYXN5bmMuYwpAQCAtODAsOSArODAsMTAg
QEAgc3RhdGljIHZvaWQgc3RvcmVfZHdvcmQoaW50IGZkLCB1bnNpZ25lZCByaW5nLAogCWdlbV9j
bG9zZShmZCwgb2JqWzFdLmhhbmRsZSk7CiB9CiAKLXN0YXRpYyB2b2lkIG9uZShpbnQgZmQsIHVu
c2lnbmVkIHJpbmcsIHVpbnQzMl90IGZsYWdzKQorc3RhdGljIHZvaWQgb25lKGludCBmZCwgY29u
c3Qgc3RydWN0IGludGVsX2V4ZWN1dGlvbl9lbmdpbmUyICplMiwgYm9vbCBsZWdhY3kpCiB7CiAJ
Y29uc3QgaW50IGdlbiA9IGludGVsX2dlbihpbnRlbF9nZXRfZHJtX2RldmlkKGZkKSk7CisJY29u
c3Qgc3RydWN0IGludGVsX2V4ZWN1dGlvbl9lbmdpbmUyICpvdGhlcjI7CiAJc3RydWN0IGRybV9p
OTE1X2dlbV9leGVjX29iamVjdDIgb2JqWzJdOwogI2RlZmluZSBTQ1JBVENIIDAKICNkZWZpbmUg
QkFUQ0ggMQpAQCAtMTM4LDIwICsxMzksMzMgQEAgc3RhdGljIHZvaWQgb25lKGludCBmZCwgdW5z
aWduZWQgcmluZywgdWludDMyX3QgZmxhZ3MpCiAJbWVtc2V0KCZleGVjYnVmLCAwLCBzaXplb2Yo
ZXhlY2J1ZikpOwogCWV4ZWNidWYuYnVmZmVyc19wdHIgPSB0b191c2VyX3BvaW50ZXIob2JqKTsK
IAlleGVjYnVmLmJ1ZmZlcl9jb3VudCA9IDI7Ci0JZXhlY2J1Zi5mbGFncyA9IHJpbmcgfCBmbGFn
czsKKwlleGVjYnVmLmZsYWdzID0gZTItPmZsYWdzOwogCWlndF9yZXF1aXJlKF9fZ2VtX2V4ZWNi
dWYoZmQsICZleGVjYnVmKSA9PSAwKTsKIAlnZW1fY2xvc2UoZmQsIG9ialtCQVRDSF0uaGFuZGxl
KTsKIAogCWkgPSAwOwotCWZvcl9lYWNoX3BoeXNpY2FsX2VuZ2luZShmZCwgb3RoZXIpIHsKLQkJ
aWYgKG90aGVyID09IHJpbmcpCi0JCQljb250aW51ZTsKKwlpZiAobGVnYWN5KSB7CisJCWZvcl9l
YWNoX2VuZ2luZShmZCwgb3RoZXIpIHsKKwkJCWlmIChnZW1fZWJfZmxhZ3NfYXJlX2RpZmZlcmVu
dF9lbmdpbmVzKGUyLT5mbGFncywgb3RoZXIpKQorCQkJCWNvbnRpbnVlOwogCi0JCWlmICghZ2Vt
X2Nhbl9zdG9yZV9kd29yZChmZCwgb3RoZXIpKQotCQkJY29udGludWU7CisJCQlpZiAoIWdlbV9j
YW5fc3RvcmVfZHdvcmQoZmQsIG90aGVyKSkKKwkJCQljb250aW51ZTsKKworCQkJc3RvcmVfZHdv
cmQoZmQsIG90aGVyLCBvYmpbU0NSQVRDSF0uaGFuZGxlLCA0KmksIGkpOworCQkJaSsrOworCQl9
CisJfSBlbHNlIHsKKwkJX19mb3JfZWFjaF9waHlzaWNhbF9lbmdpbmUoZmQsIG90aGVyMikgewor
CQkJaWYgKGdlbV9lbmdpbmVfaXNfZXF1YWwoZTIsIG90aGVyMikpCisJCQkJY29udGludWU7CiAK
LQkJc3RvcmVfZHdvcmQoZmQsIG90aGVyLCBvYmpbU0NSQVRDSF0uaGFuZGxlLCA0KmksIGkpOwot
CQlpKys7CisJCQlpZiAoIWdlbV9jbGFzc19jYW5fc3RvcmVfZHdvcmQoZmQsIG90aGVyMi0+Y2xh
c3MpKQorCQkJCWNvbnRpbnVlOworCisJCQlzdG9yZV9kd29yZChmZCwgb3RoZXIyLT5mbGFncywg
b2JqW1NDUkFUQ0hdLmhhbmRsZSwgNCppLCBpKTsKKwkJCWkrKzsKKwkJfQogCX0KIAogCSpiYXRj
aCA9IE1JX0JBVENIX0JVRkZFUl9FTkQ7CkBAIC0xODUsNyArMTk5LDkgQEAgc3RhdGljIGJvb2wg
aGFzX2FzeW5jX2V4ZWNidWYoaW50IGZkKQogCiBpZ3RfbWFpbgogeworCWNvbnN0IHN0cnVjdCBp
bnRlbF9leGVjdXRpb25fZW5naW5lMiAqZTI7CiAJY29uc3Qgc3RydWN0IGludGVsX2V4ZWN1dGlv
bl9lbmdpbmUgKmU7CisJc3RydWN0IGludGVsX2V4ZWN1dGlvbl9lbmdpbmUyIGUyX187CiAJaW50
IGZkID0gLTE7CiAKIAlpZ3Rfc2tpcF9vbl9zaW11bGF0aW9uKCk7CkBAIC0yMDAsMTQgKzIxNiwy
MiBAQCBpZ3RfbWFpbgogCX0KIAogCWZvciAoZSA9IGludGVsX2V4ZWN1dGlvbl9lbmdpbmVzOyBl
LT5uYW1lOyBlKyspIHsKLQkJLyogZGVmYXVsdCBleGVjLWlkIGlzIHB1cmVseSBzeW1ib2xpYyAq
LwotCQlpZiAoZS0+ZXhlY19pZCA9PSAwKQorCQllMl9fID0gZ2VtX2ViX2ZsYWdzX3RvX2VuZ2lu
ZShlLT5leGVjX2lkIHwgZS0+ZmxhZ3MpOworCQlpZiAoZTJfXy5mbGFncyA9PSAtMSkKIAkJCWNv
bnRpbnVlOworCQllMiA9ICZlMl9fOwogCi0JCWlndF9zdWJ0ZXN0X2YoImNvbmN1cnJlbnQtd3Jp
dGVzLSVzIiwgZS0+bmFtZSkgeworCQlpZ3Rfc3VidGVzdF9mKCJsZWdhY3ktY29uY3VycmVudC13
cml0ZXMtJXMiLCBlMi0+bmFtZSkgewogCQkJaWd0X3JlcXVpcmUoZ2VtX3JpbmdfaGFzX3BoeXNp
Y2FsX2VuZ2luZShmZCwgZS0+ZXhlY19pZCB8IGUtPmZsYWdzKSk7Ci0JCQlpZ3RfcmVxdWlyZShn
ZW1fY2FuX3N0b3JlX2R3b3JkKGZkLCBlLT5leGVjX2lkIHwgZS0+ZmxhZ3MpKTsKLQkJCW9uZShm
ZCwgZS0+ZXhlY19pZCwgZS0+ZmxhZ3MpOworCQkJaWd0X3JlcXVpcmUoZ2VtX2NsYXNzX2Nhbl9z
dG9yZV9kd29yZChmZCwgZTItPmNsYXNzKSk7CisJCQlvbmUoZmQsIGUyLCB0cnVlKTsKKwkJfQor
CX0KKworCV9fZm9yX2VhY2hfcGh5c2ljYWxfZW5naW5lKGZkLCBlMikgeworCQlpZ3Rfc3VidGVz
dF9mKCJjb25jdXJyZW50LXdyaXRlcy0lcyIsIGUyLT5uYW1lKSB7CisJCQlpZ3RfcmVxdWlyZShn
ZW1fY2xhc3NfY2FuX3N0b3JlX2R3b3JkKGZkLCBlMi0+Y2xhc3MpKTsKKwkJCW9uZShmZCwgZTIs
IGZhbHNlKTsKIAkJfQogCX0KIAotLSAKMi4xOS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9pbnRlbC1nZng=

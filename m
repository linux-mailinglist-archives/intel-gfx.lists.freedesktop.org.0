Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 77A42EF87C
	for <lists+intel-gfx@lfdr.de>; Tue,  5 Nov 2019 10:21:32 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 76A146E948;
	Tue,  5 Nov 2019 09:21:30 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7B5186E94F
 for <intel-gfx@lists.freedesktop.org>; Tue,  5 Nov 2019 09:21:29 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19084823-1500050 
 for multiple; Tue, 05 Nov 2019 09:21:17 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  5 Nov 2019 09:21:12 +0000
Message-Id: <20191105092115.11451-7-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191105092115.11451-1-chris@chris-wilson.co.uk>
References: <20191105092115.11451-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 07/10] drm/i915: Move i915_gem_init_contexts()
 earlier
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgdGhlIEdFTSBnbG9iYWwgY29udGV4dCBzZXR1cCBpcyBub3cgaW5kZXBlbmRlbnQgb2YgdGhl
IEdUIHN0YXRlCihhbHRob3VnaCBHVCBkb2VzIGN1cnJlbnRseSBzdGlsbCBkZXBlbmRpbmcgdXBv
biB0aGUgZ2xvYmFsCmk5MTUtPmtlcm5lbF9jb250ZXh0KSwgd2UgY2FuIG1vdmUgaXRzIGluaXQg
ZWFybGllciwgbGVhdmluZyB0aGUgZ3QgaW5pdApyZWFkeSB0byBleHRyYWN0ZWQuCgpTaWduZWQt
b2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jIHwgIDIgKy0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmggfCAgMiArLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9nZW0uYyAgICAgICAgICAgICB8IDIzICsrKysrKysrKysrLS0tLS0tLS0t
LQogMyBmaWxlcyBjaGFuZ2VkLCAxNCBpbnNlcnRpb25zKCspLCAxMyBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwppbmRleCBlYjBhODA2
YTNmZmIuLjZhNmFjOWUyNzc0NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fY29udGV4dC5jCkBAIC02ODIsNyArNjgyLDcgQEAgc3RhdGljIHZvaWQgaW5pdF9jb250ZXh0
cyhzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dHMgKmdjKQogCWluaXRfbGxpc3RfaGVhZCgmZ2MtPmZy
ZWVfbGlzdCk7CiB9CiAKLXZvaWQgaTkxNV9nZW1faW5pdF9jb250ZXh0cyhzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqaTkxNSkKK3ZvaWQgaTkxNV9nZW1faW5pdF9fY29udGV4dHMoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB7CiAJaW5pdF9jb250ZXh0cygmaTkxNS0+Z2VtLmNvbnRl
eHRzKTsKIAlEUk1fREVCVUdfRFJJVkVSKCIlcyBjb250ZXh0IHN1cHBvcnQgaW5pdGlhbGl6ZWRc
biIsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4
dC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaAppbmRleCBk
OTlmZmY0ODFkNTkuLjgwYTkwZWFkNDEwOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fY29udGV4dC5oCkBAIC0xMTUsNyArMTE1LDcgQEAgc3RhdGljIGlubGluZSBib29s
IGk5MTVfZ2VtX2NvbnRleHRfaXNfa2VybmVsKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgp
CiB9CiAKIC8qIGk5MTVfZ2VtX2NvbnRleHQuYyAqLwotdm9pZCBpOTE1X2dlbV9pbml0X2NvbnRl
eHRzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKK3ZvaWQgaTkxNV9nZW1faW5pdF9f
Y29udGV4dHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpOwogCiBpbnQgaTkxNV9nZW1f
Y29udGV4dF9vcGVuKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCQkJICBzdHJ1Y3Qg
ZHJtX2ZpbGUgKmZpbGUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKaW5kZXggYjI0ODI1YzY5MWY3
Li4wNDM1MGU2MWM4NmMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2Vt
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwpAQCAtMTIxNiwxOCArMTIx
NiwxNyBAQCBpbnQgaTkxNV9nZW1faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYpCiAJfQogCiAJaW50ZWxfZ3RfaW5pdCgmZGV2X3ByaXYtPmd0KTsKLQlpOTE1X2dlbV9pbml0
X2NvbnRleHRzKGRldl9wcml2KTsKIAogCXJldCA9IGludGVsX2VuZ2luZXNfc2V0dXAoJmRldl9w
cml2LT5ndCk7CiAJaWYgKHJldCkgewogCQlHRU1fQlVHX09OKHJldCA9PSAtRUlPKTsKLQkJZ290
byBlcnJfdW5sb2NrOworCQlnb3RvIGVycl9ndF9lYXJseTsKIAl9CiAKIAlyZXQgPSBpbnRlbF9l
bmdpbmVzX2luaXQoJmRldl9wcml2LT5ndCk7CiAJaWYgKHJldCkgewogCQlHRU1fQlVHX09OKHJl
dCA9PSAtRUlPKTsKLQkJZ290byBlcnJfc2NyYXRjaDsKKwkJZ290byBlcnJfZW5naW5lczsKIAl9
CiAKIAlpbnRlbF91Y19pbml0KCZkZXZfcHJpdi0+Z3QudWMpOwpAQCAtMTI1NCwxOSArMTI1Mywx
OSBAQCBpbnQgaTkxNV9nZW1faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYp
CiAKIAlyZXQgPSBpbnRlbF9lbmdpbmVzX3ZlcmlmeV93b3JrYXJvdW5kcygmZGV2X3ByaXYtPmd0
KTsKIAlpZiAocmV0KQotCQlnb3RvIGVycl9ndDsKKwkJZ290byBlcnJfZ3RfbGF0ZTsKIAogCXJl
dCA9IF9faW50ZWxfZW5naW5lc19yZWNvcmRfZGVmYXVsdHMoJmRldl9wcml2LT5ndCk7CiAJaWYg
KHJldCkKLQkJZ290byBlcnJfZ3Q7CisJCWdvdG8gZXJyX2d0X2xhdGU7CiAKIAlyZXQgPSBpOTE1
X2luamVjdF9wcm9iZV9lcnJvcihkZXZfcHJpdiwgLUVOT0RFVik7CiAJaWYgKHJldCkKLQkJZ290
byBlcnJfZ3Q7CisJCWdvdG8gZXJyX2d0X2xhdGU7CiAKIAlyZXQgPSBpOTE1X2luamVjdF9wcm9i
ZV9lcnJvcihkZXZfcHJpdiwgLUVJTyk7CiAJaWYgKHJldCkKLQkJZ290byBlcnJfZ3Q7CisJCWdv
dG8gZXJyX2d0X2xhdGU7CiAKIAlpbnRlbF91bmNvcmVfZm9yY2V3YWtlX3B1dCgmZGV2X3ByaXYt
PnVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7CiAKQEAgLTEyNzgsNyArMTI3Nyw3IEBAIGludCBpOTE1
X2dlbV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkgKiBIVyBhcyBp
cnJldmlzaWJseSB3ZWRnZWQsIGJ1dCBrZWVwIGVub3VnaCBzdGF0ZSBhcm91bmQgdGhhdCB0aGUK
IAkgKiBkcml2ZXIgZG9lc24ndCBleHBsb2RlIGR1cmluZyBydW50aW1lLgogCSAqLwotZXJyX2d0
OgorZXJyX2d0X2xhdGU6CiAJaW50ZWxfZ3Rfc2V0X3dlZGdlZF9vbl9pbml0KCZkZXZfcHJpdi0+
Z3QpOwogCWk5MTVfZ2VtX3N1c3BlbmQoZGV2X3ByaXYpOwogCWk5MTVfZ2VtX3N1c3BlbmRfbGF0
ZShkZXZfcHJpdik7CkBAIC0xMjg3LDExICsxMjg2LDEyIEBAIGludCBpOTE1X2dlbV9pbml0KHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIGVycl9pbml0X2h3OgogCWludGVsX3Vj
X2ZpbmlfaHcoJmRldl9wcml2LT5ndC51Yyk7CiBlcnJfdWNfaW5pdDoKLQlpZiAocmV0ICE9IC1F
SU8pIHsKKwlpZiAocmV0ICE9IC1FSU8pCiAJCWludGVsX3VjX2ZpbmkoJmRldl9wcml2LT5ndC51
Yyk7CitlcnJfZW5naW5lczoKKwlpZiAocmV0ICE9IC1FSU8pCiAJCWludGVsX2VuZ2luZXNfY2xl
YW51cCgmZGV2X3ByaXYtPmd0KTsKLQl9Ci1lcnJfc2NyYXRjaDoKK2Vycl9ndF9lYXJseToKIAlp
bnRlbF9ndF9kcml2ZXJfcmVsZWFzZSgmZGV2X3ByaXYtPmd0KTsKIGVycl91bmxvY2s6CiAJaW50
ZWxfdW5jb3JlX2ZvcmNld2FrZV9wdXQoJmRldl9wcml2LT51bmNvcmUsIEZPUkNFV0FLRV9BTEwp
OwpAQCAtMTM4Miw2ICsxMzgyLDcgQEAgc3RhdGljIHZvaWQgaTkxNV9nZW1faW5pdF9fbW0oc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiB2b2lkIGk5MTVfZ2VtX2luaXRfZWFybHkoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogewogCWk5MTVfZ2VtX2luaXRfX21tKGRl
dl9wcml2KTsKKwlpOTE1X2dlbV9pbml0X19jb250ZXh0cyhkZXZfcHJpdik7CiAKIAlzcGluX2xv
Y2tfaW5pdCgmZGV2X3ByaXYtPmZiX3RyYWNraW5nLmxvY2spOwogfQotLSAKMi4yNC4wCgpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFp
bGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

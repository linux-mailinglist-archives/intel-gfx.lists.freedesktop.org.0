Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0C76990FC5
	for <lists+intel-gfx@lfdr.de>; Sat, 17 Aug 2019 11:40:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2639C6E495;
	Sat, 17 Aug 2019 09:39:55 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B7BE16E4A5
 for <intel-gfx@lists.freedesktop.org>; Sat, 17 Aug 2019 09:39:44 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 17 Aug 2019 02:39:44 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,396,1559545200"; d="scan'208";a="376950687"
Received: from vidyashr-mobl1.amr.corp.intel.com (HELO
 ldmartin-desk1.intel.com) ([10.251.152.227])
 by fmsmga005.fm.intel.com with ESMTP; 17 Aug 2019 02:39:41 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Sat, 17 Aug 2019 02:38:42 -0700
Message-Id: <20190817093902.2171-21-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190817093902.2171-1-lucas.demarchi@intel.com>
References: <20190817093902.2171-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 20/40] drm/i915/tgl: Introduce initial Tiger
 Lake workarounds
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWRkIGVtcHR5IHdvcmthcm91bmQgaG9va3MgZm9yIFRpZ2VyIExha2UuIFRoZSB3b3JrYXJvdW5k
cyB3aWxsIGJlIGFkZGVkCm9uIHNlcGFyYXRlIHBhdGNoZXMuIFdlIHdlcmUgYWxyZWFkeSBhcHBs
eWluZwpXYVJzRm9yY2V3YWtlQWRkRGVsYXlGb3JBY2ssIHdoaWNoIGlzIGluZGVlZCBzdGlsbCB2
YWxpZCwgc28gYWxzbyB1cGRhdGUKdGhlIGNvbW1lbnQuCgpDYzogRGFuaWVsZSBDZXJhb2xvIFNw
dXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogTHVj
YXMgRGUgTWFyY2hpIDxsdWNhcy5kZW1hcmNoaUBpbnRlbC5jb20+ClJldmlld2VkLWJ5OiBSYWRo
YWtyaXNobmEgU3JpcGFkYSA8cmFkaGFrcmlzaG5hLnNyaXBhZGFAaW50ZWwuY29tPgotLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAgICAgICAgfCAgMSArCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jIHwgMjYgKysrKysrKysrKysrKysr
KysrLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jICAgICAgICAgICAgIHwgIDQg
KysrLQogMyBmaWxlcyBjaGFuZ2VkLCAyNyBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKaW5kZXggZDI4MDBkYzdmYTRmLi5lMzBkMmE4
OTJmMjkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCkBAIC0yMTQ4LDYgKzIxNDgs
NyBAQCBzdGF0aWMgaW50IGludGVsX2luaXRfd29ya2Fyb3VuZF9iYihzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUpCiAJCXJldHVybiAwOwogCiAJc3dpdGNoIChJTlRFTF9HRU4oZW5naW5l
LT5pOTE1KSkgeworCWNhc2UgMTI6CiAJY2FzZSAxMToKIAkJcmV0dXJuIDA7CiAJY2FzZSAxMDoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF93b3JrYXJvdW5kcy5jCmluZGV4IDcwNGFj
ZTAxZTdmNS4uMTI2YWIzNjY3OTE5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF93b3JrYXJvdW5kcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X3dvcmthcm91bmRzLmMKQEAgLTU2OSw2ICs1NjksMTEgQEAgc3RhdGljIHZvaWQgaWNsX2N0eF93
b3JrYXJvdW5kc19pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAkJCSAgR0VO
MTFfU0FNUExFUl9FTkFCTEVfSEVBRExFU1NfTVNHKTsKIH0KIAorc3RhdGljIHZvaWQgdGdsX2N0
eF93b3JrYXJvdW5kc19pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKKwkJCQkg
ICAgIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndhbCkKK3sKK30KKwogc3RhdGljIHZvaWQKIF9faW50
ZWxfZW5naW5lX2luaXRfY3R4X3dhKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAkJ
CSAgIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndhbCwKQEAgLTU4MSw3ICs1ODYsOSBAQCBfX2ludGVs
X2VuZ2luZV9pbml0X2N0eF93YShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAKIAl3
YV9pbml0X3N0YXJ0KHdhbCwgbmFtZSwgZW5naW5lLT5uYW1lKTsKIAotCWlmIChJU19HRU4oaTkx
NSwgMTEpKQorCWlmIChJU19HRU4oaTkxNSwgMTIpKQorCQl0Z2xfY3R4X3dvcmthcm91bmRzX2lu
aXQoZW5naW5lLCB3YWwpOworCWVsc2UgaWYgKElTX0dFTihpOTE1LCAxMSkpCiAJCWljbF9jdHhf
d29ya2Fyb3VuZHNfaW5pdChlbmdpbmUsIHdhbCk7CiAJZWxzZSBpZiAoSVNfQ0FOTk9OTEFLRShp
OTE1KSkKIAkJY25sX2N0eF93b3JrYXJvdW5kc19pbml0KGVuZ2luZSwgd2FsKTsKQEAgLTg5MCwx
MCArODk3LDE3IEBAIGljbF9ndF93b3JrYXJvdW5kc19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1LCBzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwpCiAJCSAgICBHQU1UX0NIS05fRElT
QUJMRV9MM19DT0hfUElQRSk7CiB9CiAKK3N0YXRpYyB2b2lkCit0Z2xfZ3Rfd29ya2Fyb3VuZHNf
aW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgc3RydWN0IGk5MTVfd2FfbGlzdCAq
d2FsKQoreworfQorCiBzdGF0aWMgdm9pZAogZ3RfaW5pdF93b3JrYXJvdW5kcyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSwgc3RydWN0IGk5MTVfd2FfbGlzdCAqd2FsKQogewotCWlmIChJ
U19HRU4oaTkxNSwgMTEpKQorCWlmIChJU19HRU4oaTkxNSwgMTIpKQorCQl0Z2xfZ3Rfd29ya2Fy
b3VuZHNfaW5pdChpOTE1LCB3YWwpOworCWVsc2UgaWYgKElTX0dFTihpOTE1LCAxMSkpCiAJCWlj
bF9ndF93b3JrYXJvdW5kc19pbml0KGk5MTUsIHdhbCk7CiAJZWxzZSBpZiAoSVNfQ0FOTk9OTEFL
RShpOTE1KSkKIAkJY25sX2d0X3dvcmthcm91bmRzX2luaXQoaTkxNSwgd2FsKTsKQEAgLTExODMs
NiArMTE5NywxMCBAQCBzdGF0aWMgdm9pZCBpY2xfd2hpdGVsaXN0X2J1aWxkKHN0cnVjdCBpbnRl
bF9lbmdpbmVfY3MgKmVuZ2luZSkKIAl9CiB9CiAKK3N0YXRpYyB2b2lkIHRnbF93aGl0ZWxpc3Rf
YnVpbGQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQoreworfQorCiB2b2lkIGludGVs
X2VuZ2luZV9pbml0X3doaXRlbGlzdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiB7
CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBlbmdpbmUtPmk5MTU7CkBAIC0xMTkw
LDcgKzEyMDgsOSBAQCB2b2lkIGludGVsX2VuZ2luZV9pbml0X3doaXRlbGlzdChzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzICplbmdpbmUpCiAKIAl3YV9pbml0X3N0YXJ0KHcsICJ3aGl0ZWxpc3QiLCBl
bmdpbmUtPm5hbWUpOwogCi0JaWYgKElTX0dFTihpOTE1LCAxMSkpCisJaWYgKElTX0dFTihpOTE1
LCAxMikpCisJCXRnbF93aGl0ZWxpc3RfYnVpbGQoZW5naW5lKTsKKwllbHNlIGlmIChJU19HRU4o
aTkxNSwgMTEpKQogCQlpY2xfd2hpdGVsaXN0X2J1aWxkKGVuZ2luZSk7CiAJZWxzZSBpZiAoSVNf
Q0FOTk9OTEFLRShpOTE1KSkKIAkJY25sX3doaXRlbGlzdF9idWlsZChlbmdpbmUpOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2ludGVsX3BtLmMKaW5kZXggYWNhNjc2ZTc5OTQ4Li43NWVlMDI3YWJiODAgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaW50ZWxfcG0uYwpAQCAtOTU5Nyw3ICs5NTk3LDkgQEAgc3RhdGljIHZvaWQgbm9wX2lu
aXRfY2xvY2tfZ2F0aW5nKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKICAqLwog
dm9pZCBpbnRlbF9pbml0X2Nsb2NrX2dhdGluZ19ob29rcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYpCiB7Ci0JaWYgKElTX0dFTihkZXZfcHJpdiwgMTEpKQorCWlmIChJU19HRU4o
ZGV2X3ByaXYsIDEyKSkKKwkJZGV2X3ByaXYtPmRpc3BsYXkuaW5pdF9jbG9ja19nYXRpbmcgPSBu
b3BfaW5pdF9jbG9ja19nYXRpbmc7CisJZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCAxMSkpCiAJ
CWRldl9wcml2LT5kaXNwbGF5LmluaXRfY2xvY2tfZ2F0aW5nID0gaWNsX2luaXRfY2xvY2tfZ2F0
aW5nOwogCWVsc2UgaWYgKElTX0NBTk5PTkxBS0UoZGV2X3ByaXYpKQogCQlkZXZfcHJpdi0+ZGlz
cGxheS5pbml0X2Nsb2NrX2dhdGluZyA9IGNubF9pbml0X2Nsb2NrX2dhdGluZzsKLS0gCjIuMjEu
MAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwt
Z2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

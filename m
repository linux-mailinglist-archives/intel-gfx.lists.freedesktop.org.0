Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E5DC4109F65
	for <lists+intel-gfx@lfdr.de>; Tue, 26 Nov 2019 14:43:17 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 43AB76E3C1;
	Tue, 26 Nov 2019 13:43:16 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 144B46E3C1
 for <intel-gfx@lists.freedesktop.org>; Tue, 26 Nov 2019 13:43:15 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Nov 2019 05:43:14 -0800
X-IronPort-AV: E=Sophos;i="5.69,245,1571727600"; d="scan'208";a="383152843"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga005-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 26 Nov 2019 05:43:12 -0800
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 26 Nov 2019 15:42:38 +0200
Message-Id: <71f6f4314bd94e4a6ee4b942b8f69fce427a43f5.1574775655.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1574775655.git.jani.nikula@intel.com>
References: <cover.1574775655.git.jani.nikula@intel.com>
MIME-Version: 1.0
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Subject: [Intel-gfx] [PATCH v3 03/13] drm/i915/bios: add support for
 querying DSC details for encoder
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWRkIGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSBEU0MgZGF0YSBmb3IgYW4gZW5jb2Rlci4K
CkluaXRpYWxseSwgdGhpcyBpcyBEU0kgc3BlY2lmaWMsIGFzIERQIGRvZXMgbm90IHVzZSBWQlQg
c2V0dGluZ3MgZm9yIERTQwphdCBhbGwuIEl0J3MgYWxzbyBub3QgdmVyeSBwcmV0dHkuCgpJbiB0
aGUgZnV0dXJlIHdlIG1pZ2h0IGhhdmUgYSBwb2ludGVyIGZyb20gZW5jb2RlciB0byB0aGUgY2hp
bGQgZGV2aWNlLAp3aGljaCB3b3VsZCBtYWtlIHRoZSBjaGlsZCBkZXZpY2UgbGlzdCBxdWVyeSBo
ZXJlIHNvIG11Y2ggbW9yZSBzZW5zaWJsZS4KCnYzOgotIHVzZSBjcnRjX3N0YXRlIGluc3RlYWQg
b2YgcGlwZV9jb25maWcKLSByZXR1cm4gdHJ1ZSBieSBkZWZhdWx0IGZyb20gaW50ZWxfYmlvc19n
ZXRfZHNjX3BhcmFtcygpCi0gZXhwYW5kIHRoZSBjb21tZW50IGFib3V0IHJjX2J1ZmZlcl9ibG9j
a19zaXplIGFuZCByY19idWZmZXJfc2l6ZQoKdjI6Ci0gbWFrZSBtb3JlIHJvYnVzdCwgZGVidWcg
bG9nIGVycm9ycyBiZXR0ZXIKCkJzcGVjOiAyOTg4NQpDYzogVmFuZGl0YSBLdWxrYXJuaSA8dmFu
ZGl0YS5rdWxrYXJuaUBpbnRlbC5jb20+CkNjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmph
bGFAbGludXguaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1
bGFAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlv
cy5jIHwgOTkgKysrKysrKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfYmlvcy5oIHwgIDUgKysKIDIgZmlsZXMgY2hhbmdlZCwgMTA0IGluc2VydGlv
bnMoKykKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jp
b3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5jCmluZGV4IDlh
YzZjNjU3YTA1ZS4uZWYwYzhmYjI4ZWQ2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX2Jpb3MuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Jpb3MuYwpAQCAtMjksNiArMjksNyBAQAogI2luY2x1ZGUgPGRybS9pOTE1X2RybS5o
PgogCiAjaW5jbHVkZSAiZGlzcGxheS9pbnRlbF9kaXNwbGF5LmgiCisjaW5jbHVkZSAiZGlzcGxh
eS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgiCiAjaW5jbHVkZSAiZGlzcGxheS9pbnRlbF9nbWJ1cy5o
IgogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKQEAgLTIzMzcsNiArMjMzOCwxMDQgQEAgYm9vbCBp
bnRlbF9iaW9zX2lzX2RzaV9wcmVzZW50KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
diwKIAlyZXR1cm4gZmFsc2U7CiB9CiAKK3N0YXRpYyB2b2lkIGZpbGxfZHNjKHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAorCQkgICAgIHN0cnVjdCBkc2NfY29tcHJlc3Npb25f
cGFyYW1ldGVyc19lbnRyeSAqZHNjLAorCQkgICAgIGludCBkc2NfbWF4X2JwYykKK3sKKwlzdHJ1
Y3QgZHJtX2RzY19jb25maWcgKnZkc2NfY2ZnID0gJmNydGNfc3RhdGUtPmRzYy5jb25maWc7CisJ
aW50IGJwYyA9IDg7CisKKwl2ZHNjX2NmZy0+ZHNjX3ZlcnNpb25fbWFqb3IgPSBkc2MtPnZlcnNp
b25fbWFqb3I7CisJdmRzY19jZmctPmRzY192ZXJzaW9uX21pbm9yID0gZHNjLT52ZXJzaW9uX21p
bm9yOworCisJaWYgKGRzYy0+c3VwcG9ydF8xMmJwYyAmJiBkc2NfbWF4X2JwYyA+PSAxMikKKwkJ
YnBjID0gMTI7CisJZWxzZSBpZiAoZHNjLT5zdXBwb3J0XzEwYnBjICYmIGRzY19tYXhfYnBjID49
IDEwKQorCQlicGMgPSAxMDsKKwllbHNlIGlmIChkc2MtPnN1cHBvcnRfOGJwYyAmJiBkc2NfbWF4
X2JwYyA+PSA4KQorCQlicGMgPSA4OworCWVsc2UKKwkJRFJNX0RFQlVHX0tNUygiVkJUOiBVbnN1
cHBvcnRlZCBCUEMgJWQgZm9yIERDU1xuIiwKKwkJCSAgICAgIGRzY19tYXhfYnBjKTsKKworCWNy
dGNfc3RhdGUtPnBpcGVfYnBwID0gYnBjICogMzsKKworCWNydGNfc3RhdGUtPmRzYy5jb21wcmVz
c2VkX2JwcCA9IG1pbihjcnRjX3N0YXRlLT5waXBlX2JwcCwKKwkJCQkJICAgICBWQlRfRFNDX01B
WF9CUFAoZHNjLT5tYXhfYnBwKSk7CisKKwkvKgorCSAqIEZJWE1FOiBUaGlzIGlzIHVnbHksIGFu
ZCBzbGljZSBjb3VudCBzaG91bGQgdGFrZSBEU0MgZW5naW5lCisJICogdGhyb3VnaHB1dCBldGMu
IGludG8gYWNjb3VudC4KKwkgKgorCSAqIEFsc28sIHBlciBzcGVjIERTSSBzdXBwb3J0cyAxLCAy
LCAzIG9yIDQgaG9yaXpvbnRhbCBzbGljZXMuCisJICovCisJaWYgKGRzYy0+c2xpY2VzX3Blcl9s
aW5lICYgQklUKDIpKSB7CisJCWNydGNfc3RhdGUtPmRzYy5zbGljZV9jb3VudCA9IDQ7CisJfSBl
bHNlIGlmIChkc2MtPnNsaWNlc19wZXJfbGluZSAmIEJJVCgxKSkgeworCQljcnRjX3N0YXRlLT5k
c2Muc2xpY2VfY291bnQgPSAyOworCX0gZWxzZSB7CisJCS8qIEZJWE1FICovCisJCWlmICghKGRz
Yy0+c2xpY2VzX3Blcl9saW5lICYgQklUKDApKSkKKwkJCURSTV9ERUJVR19LTVMoIlZCVDogVW5z
dXBwb3J0ZWQgRFNDIHNsaWNlIGNvdW50IGZvciBEU0lcbiIpOworCisJCWNydGNfc3RhdGUtPmRz
Yy5zbGljZV9jb3VudCA9IDE7CisJfQorCisJaWYgKGNydGNfc3RhdGUtPmh3LmFkanVzdGVkX21v
ZGUuY3J0Y19oZGlzcGxheSAlCisJICAgIGNydGNfc3RhdGUtPmRzYy5zbGljZV9jb3VudCAhPSAw
KQorCQlEUk1fREVCVUdfS01TKCJWQlQ6IERTQyBoZGlzcGxheSAlZCBub3QgZGl2aXNpYmxlIGJ5
IHNsaWNlIGNvdW50ICVkXG4iLAorCQkJICAgICAgY3J0Y19zdGF0ZS0+aHcuYWRqdXN0ZWRfbW9k
ZS5jcnRjX2hkaXNwbGF5LAorCQkJICAgICAgY3J0Y19zdGF0ZS0+ZHNjLnNsaWNlX2NvdW50KTsK
KworCS8qCisJICogRklYTUU6IFVzZSBWQlQgcmNfYnVmZmVyX2Jsb2NrX3NpemUgYW5kIHJjX2J1
ZmZlcl9zaXplIGZvciB0aGUKKwkgKiBpbXBsZW1lbnRhdGlvbiBzcGVjaWZpYyBwaHlzaWNhbCBy
YXRlIGJ1ZmZlciBzaXplLiBDdXJyZW50bHkgd2UgdXNlCisJICogdGhlIHJlcXVpcmVkIHJhdGUg
YnVmZmVyIG1vZGVsIHNpemUgY2FsY3VsYXRlZCBpbgorCSAqIGRybV9kc2NfY29tcHV0ZV9yY19w
YXJhbWV0ZXJzKCkgYWNjb3JkaW5nIHRvIFZFU0EgRFNDIEFubmV4IEUuCisJICoKKwkgKiBUaGUg
VkJUIHJjX2J1ZmZlcl9ibG9ja19zaXplIGFuZCByY19idWZmZXJfc2l6ZSBkZWZpbml0aW9ucwor
CSAqIGNvcnJlc3BvbmQgdG8gRFAgMS40IERQQ0Qgb2Zmc2V0cyAweDYyIGFuZCAweDYzLiBUaGUg
RFAgRFNDCisJICogaW1wbGVtZW50YXRpb24gc2hvdWxkIGFsc28gdXNlIHRoZSBEUENEIChvciBw
ZXJoYXBzIFZCVCBmb3IgZURQKQorCSAqIHByb3ZpZGVkIHZhbHVlIGZvciB0aGUgYnVmZmVyIHNp
emUuCisJICovCisKKwkvKiBGSVhNRTogRFNJIHNwZWMgc2F5cyBicGMgKyAxIGZvciB0aGlzIG9u
ZSAqLworCXZkc2NfY2ZnLT5saW5lX2J1Zl9kZXB0aCA9IFZCVF9EU0NfTElORV9CVUZGRVJfREVQ
VEgoZHNjLT5saW5lX2J1ZmZlcl9kZXB0aCk7CisKKwl2ZHNjX2NmZy0+YmxvY2tfcHJlZF9lbmFi
bGUgPSBkc2MtPmJsb2NrX3ByZWRpY3Rpb25fZW5hYmxlOworCisJdmRzY19jZmctPnNsaWNlX2hl
aWdodCA9IGRzYy0+c2xpY2VfaGVpZ2h0OworfQorCisvKiBGSVhNRTogaW5pdGlhbGx5IERTSSBz
cGVjaWZpYyAqLworYm9vbCBpbnRlbF9iaW9zX2dldF9kc2NfcGFyYW1zKHN0cnVjdCBpbnRlbF9l
bmNvZGVyICplbmNvZGVyLAorCQkJICAgICAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlLAorCQkJICAgICAgIGludCBkc2NfbWF4X2JwYykKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOworCWNvbnN0IHN0cnVj
dCBkaXNwbGF5X2RldmljZV9kYXRhICpkZXZkYXRhOworCWNvbnN0IHN0cnVjdCBjaGlsZF9kZXZp
Y2VfY29uZmlnICpjaGlsZDsKKworCWxpc3RfZm9yX2VhY2hfZW50cnkoZGV2ZGF0YSwgJmk5MTUt
PnZidC5kaXNwbGF5X2RldmljZXMsIG5vZGUpIHsKKwkJY2hpbGQgPSAmZGV2ZGF0YS0+Y2hpbGQ7
CisKKwkJaWYgKCEoY2hpbGQtPmRldmljZV90eXBlICYgREVWSUNFX1RZUEVfTUlQSV9PVVRQVVQp
KQorCQkJY29udGludWU7CisKKwkJaWYgKGNoaWxkLT5kdm9fcG9ydCAtIERWT19QT1JUX01JUElB
ID09IGVuY29kZXItPnBvcnQpIHsKKwkJCWlmICghZGV2ZGF0YS0+ZHNjKQorCQkJCXJldHVybiBm
YWxzZTsKKworCQkJaWYgKGNydGNfc3RhdGUpCisJCQkJZmlsbF9kc2MoY3J0Y19zdGF0ZSwgZGV2
ZGF0YS0+ZHNjLCBkc2NfbWF4X2JwYyk7CisKKwkJCXJldHVybiB0cnVlOworCQl9CisJfQorCisJ
cmV0dXJuIGZhbHNlOworfQorCiAvKioKICAqIGludGVsX2Jpb3NfaXNfcG9ydF9ocGRfaW52ZXJ0
ZWQgLSBpcyBIUEQgaW52ZXJ0ZWQgZm9yICVwb3J0CiAgKiBAaTkxNToJaTkxNSBkZXZpY2UgaW5z
dGFuY2UKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlv
cy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9iaW9zLmgKaW5kZXggOThm
MDY0ODI4YTU3Li5kNmEwYzI5ZDM3YWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfYmlvcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfYmlvcy5oCkBAIC0zNSw2ICszNSw4IEBACiAjaW5jbHVkZSA8ZHJtL2k5MTVfZHJtLmg+
CiAKIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlOworc3RydWN0IGludGVsX2NydGNfc3RhdGU7Citz
dHJ1Y3QgaW50ZWxfZW5jb2RlcjsKIGVudW0gcG9ydDsKIAogZW51bSBpbnRlbF9iYWNrbGlnaHRf
dHlwZSB7CkBAIC0yNDIsNSArMjQ0LDggQEAgYm9vbCBpbnRlbF9iaW9zX2lzX3BvcnRfaHBkX2lu
dmVydGVkKGNvbnN0IHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogYm9vbCBpbnRlbF9i
aW9zX2lzX2xzcGNvbl9wcmVzZW50KGNvbnN0IHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
LAogCQkJCSAgZW51bSBwb3J0IHBvcnQpOwogZW51bSBhdXhfY2ggaW50ZWxfYmlvc19wb3J0X2F1
eF9jaChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIGVudW0gcG9ydCBwb3J0KTsK
K2Jvb2wgaW50ZWxfYmlvc19nZXRfZHNjX3BhcmFtcyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5j
b2RlciwKKwkJCSAgICAgICBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKKwkJ
CSAgICAgICBpbnQgZHNjX21heF9icGMpOwogCiAjZW5kaWYgLyogX0lOVEVMX0JJT1NfSF8gKi8K
LS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

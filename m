Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id AB7614DB73
	for <lists+intel-gfx@lfdr.de>; Thu, 20 Jun 2019 22:39:39 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0AE5C6E81E;
	Thu, 20 Jun 2019 20:39:31 +0000 (UTC)
X-Original-To: Intel-gfx@lists.freedesktop.org
Delivered-To: Intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6A0A46E802
 for <Intel-gfx@lists.freedesktop.org>; Thu, 20 Jun 2019 20:38:57 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Jun 2019 13:38:57 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,398,1557212400"; d="scan'208";a="186938733"
Received: from yyosef-mobl.ger.corp.intel.com (HELO localhost.localdomain)
 ([10.252.23.42])
 by fmsmga002.fm.intel.com with ESMTP; 20 Jun 2019 13:38:56 -0700
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
To: Intel-gfx@lists.freedesktop.org
Date: Thu, 20 Jun 2019 21:38:27 +0100
Message-Id: <20190620203835.1421-25-tvrtko.ursulin@linux.intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190620203835.1421-1-tvrtko.ursulin@linux.intel.com>
References: <20190620203835.1421-1-tvrtko.ursulin@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 25/33] drm/i915: Compartmentalize
 timeline_init/park/fini
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCkNvbnRpbnVp
bmcgb24gdGhlIHRoZW1lIG9mIGJldHRlciBsb2dpY2FsIG9yZ2FuaXphdGlvbiBvZiBvdXIgY29k
ZSwgbWFrZQp0aGUgZmlyc3Qgc3RlcCB0b3dhcmRzIG1ha2luZyB0aGUgdGltZWxpbmUgY29kZSBi
ZXR0ZXIgaXNvbGF0ZWQgZnJvbSB3aWRlcgpzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZS4KClNpZ25l
ZC1vZmYtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+ClJldmll
d2VkLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3RpbWVsaW5lLmMgfCA2NyArKysrKysrKysrKysrKysrKy0t
LS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgNDEgaW5zZXJ0aW9ucygrKSwgMjYgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90aW1lbGluZS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90aW1lbGluZS5jCmluZGV4IGMzMTFjZTljNmY5ZC4u
ZGM4ODVhMTNiMTZkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3RpbWVs
aW5lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV90aW1lbGluZS5jCkBAIC0yNjEs
MTggKzI2MSwyMyBAQCBpbnQgaTkxNV90aW1lbGluZV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1LAogCXJldHVybiAwOwogfQogCi12b2lkIGk5MTVfdGltZWxpbmVzX2luaXQoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCitzdGF0aWMgdm9pZCB0aW1lbGluZXNfaW5pdChz
dHJ1Y3QgaW50ZWxfZ3QgKmd0KQogewotCXN0cnVjdCBpOTE1X2d0X3RpbWVsaW5lcyAqZ3QgPSAm
aTkxNS0+Z3QudGltZWxpbmVzOworCXN0cnVjdCBpOTE1X2d0X3RpbWVsaW5lcyAqdGltZWxpbmVz
ID0gJmd0LT50aW1lbGluZXM7CiAKLQltdXRleF9pbml0KCZndC0+bXV0ZXgpOwotCUlOSVRfTElT
VF9IRUFEKCZndC0+YWN0aXZlX2xpc3QpOworCW11dGV4X2luaXQoJnRpbWVsaW5lcy0+bXV0ZXgp
OworCUlOSVRfTElTVF9IRUFEKCZ0aW1lbGluZXMtPmFjdGl2ZV9saXN0KTsKIAotCXNwaW5fbG9j
a19pbml0KCZndC0+aHdzcF9sb2NrKTsKLQlJTklUX0xJU1RfSEVBRCgmZ3QtPmh3c3BfZnJlZV9s
aXN0KTsKKwlzcGluX2xvY2tfaW5pdCgmdGltZWxpbmVzLT5od3NwX2xvY2spOworCUlOSVRfTElT
VF9IRUFEKCZ0aW1lbGluZXMtPmh3c3BfZnJlZV9saXN0KTsKIAogCS8qIHZpYSBpOTE1X2dlbV93
YWl0X2Zvcl9pZGxlKCkgKi8KLQlpOTE1X2dlbV9zaHJpbmtlcl90YWludHNfbXV0ZXgoaTkxNSwg
Jmd0LT5tdXRleCk7CisJaTkxNV9nZW1fc2hyaW5rZXJfdGFpbnRzX211dGV4KGd0LT5pOTE1LCAm
dGltZWxpbmVzLT5tdXRleCk7Cit9CisKK3ZvaWQgaTkxNV90aW1lbGluZXNfaW5pdChzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKK3sKKwl0aW1lbGluZXNfaW5pdCgmaTkxNS0+Z3QpOwog
fQogCiBzdGF0aWMgdm9pZCB0aW1lbGluZV9hZGRfdG9fYWN0aXZlKHN0cnVjdCBpOTE1X3RpbWVs
aW5lICp0bCkKQEAgLTI5Myw2ICsyOTgsMjQgQEAgc3RhdGljIHZvaWQgdGltZWxpbmVfcmVtb3Zl
X2Zyb21fYWN0aXZlKHN0cnVjdCBpOTE1X3RpbWVsaW5lICp0bCkKIAltdXRleF91bmxvY2soJmd0
LT5tdXRleCk7CiB9CiAKK3N0YXRpYyB2b2lkIHRpbWVsaW5lc19wYXJrKHN0cnVjdCBpbnRlbF9n
dCAqZ3QpCit7CisJc3RydWN0IGk5MTVfZ3RfdGltZWxpbmVzICp0aW1lbGluZXMgPSAmZ3QtPnRp
bWVsaW5lczsKKwlzdHJ1Y3QgaTkxNV90aW1lbGluZSAqdGltZWxpbmU7CisKKwltdXRleF9sb2Nr
KCZ0aW1lbGluZXMtPm11dGV4KTsKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5KHRpbWVsaW5lLCAmdGlt
ZWxpbmVzLT5hY3RpdmVfbGlzdCwgbGluaykgeworCQkvKgorCQkgKiBBbGwga25vd24gZmVuY2Vz
IGFyZSBjb21wbGV0ZWQgc28gd2UgY2FuIHNjcmFwCisJCSAqIHRoZSBjdXJyZW50IHN5bmMgcG9p
bnQgdHJhY2tpbmcgYW5kIHN0YXJ0IGFmcmVzaCwKKwkJICogYW55IGF0dGVtcHQgdG8gd2FpdCB1
cG9uIGEgcHJldmlvdXMgc3luYyBwb2ludAorCQkgKiB3aWxsIGJlIHNraXBwZWQgYXMgdGhlIGZl
bmNlIHdhcyBzaWduYWxlZC4KKwkJICovCisJCWk5MTVfc3luY21hcF9mcmVlKCZ0aW1lbGluZS0+
c3luYyk7CisJfQorCW11dGV4X3VubG9jaygmdGltZWxpbmVzLT5tdXRleCk7Cit9CisKIC8qKgog
ICogaTkxNV90aW1lbGluZXNfcGFyayAtIGNhbGxlZCB3aGVuIHRoZSBkcml2ZXIgaWRsZXMKICAq
IEBpOTE1OiB0aGUgZHJtX2k5MTVfcHJpdmF0ZSBkZXZpY2UKQEAgLTMwNSwyMCArMzI4LDcgQEAg
c3RhdGljIHZvaWQgdGltZWxpbmVfcmVtb3ZlX2Zyb21fYWN0aXZlKHN0cnVjdCBpOTE1X3RpbWVs
aW5lICp0bCkKICAqLwogdm9pZCBpOTE1X3RpbWVsaW5lc19wYXJrKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICppOTE1KQogewotCXN0cnVjdCBpOTE1X2d0X3RpbWVsaW5lcyAqZ3QgPSAmaTkxNS0+
Z3QudGltZWxpbmVzOwotCXN0cnVjdCBpOTE1X3RpbWVsaW5lICp0aW1lbGluZTsKLQotCW11dGV4
X2xvY2soJmd0LT5tdXRleCk7Ci0JbGlzdF9mb3JfZWFjaF9lbnRyeSh0aW1lbGluZSwgJmd0LT5h
Y3RpdmVfbGlzdCwgbGluaykgewotCQkvKgotCQkgKiBBbGwga25vd24gZmVuY2VzIGFyZSBjb21w
bGV0ZWQgc28gd2UgY2FuIHNjcmFwCi0JCSAqIHRoZSBjdXJyZW50IHN5bmMgcG9pbnQgdHJhY2tp
bmcgYW5kIHN0YXJ0IGFmcmVzaCwKLQkJICogYW55IGF0dGVtcHQgdG8gd2FpdCB1cG9uIGEgcHJl
dmlvdXMgc3luYyBwb2ludAotCQkgKiB3aWxsIGJlIHNraXBwZWQgYXMgdGhlIGZlbmNlIHdhcyBz
aWduYWxlZC4KLQkJICovCi0JCWk5MTVfc3luY21hcF9mcmVlKCZ0aW1lbGluZS0+c3luYyk7Ci0J
fQotCW11dGV4X3VubG9jaygmZ3QtPm11dGV4KTsKKwl0aW1lbGluZXNfcGFyaygmaTkxNS0+Z3Qp
OwogfQogCiB2b2lkIGk5MTVfdGltZWxpbmVfZmluaShzdHJ1Y3QgaTkxNV90aW1lbGluZSAqdGlt
ZWxpbmUpCkBAIC01NjMsMTQgKzU3MywxOSBAQCB2b2lkIF9faTkxNV90aW1lbGluZV9mcmVlKHN0
cnVjdCBrcmVmICprcmVmKQogCWtmcmVlKHRpbWVsaW5lKTsKIH0KIAotdm9pZCBpOTE1X3RpbWVs
aW5lc19maW5pKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQorc3RhdGljIHZvaWQgdGlt
ZWxpbmVzX2Zpbmkoc3RydWN0IGludGVsX2d0ICpndCkKIHsKLQlzdHJ1Y3QgaTkxNV9ndF90aW1l
bGluZXMgKmd0ID0gJmk5MTUtPmd0LnRpbWVsaW5lczsKKwlzdHJ1Y3QgaTkxNV9ndF90aW1lbGlu
ZXMgKnRpbWVsaW5lcyA9ICZndC0+dGltZWxpbmVzOwogCi0JR0VNX0JVR19PTighbGlzdF9lbXB0
eSgmZ3QtPmFjdGl2ZV9saXN0KSk7Ci0JR0VNX0JVR19PTighbGlzdF9lbXB0eSgmZ3QtPmh3c3Bf
ZnJlZV9saXN0KSk7CisJR0VNX0JVR19PTighbGlzdF9lbXB0eSgmdGltZWxpbmVzLT5hY3RpdmVf
bGlzdCkpOworCUdFTV9CVUdfT04oIWxpc3RfZW1wdHkoJnRpbWVsaW5lcy0+aHdzcF9mcmVlX2xp
c3QpKTsKIAotCW11dGV4X2Rlc3Ryb3koJmd0LT5tdXRleCk7CisJbXV0ZXhfZGVzdHJveSgmdGlt
ZWxpbmVzLT5tdXRleCk7Cit9CisKK3ZvaWQgaTkxNV90aW1lbGluZXNfZmluaShzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKK3sKKwl0aW1lbGluZXNfZmluaSgmaTkxNS0+Z3QpOwogfQog
CiAjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VMRlRFU1QpCi0tIAoyLjIwLjEKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBt
YWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

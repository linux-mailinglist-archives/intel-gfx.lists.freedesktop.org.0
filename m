Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 87A30D2907
	for <lists+intel-gfx@lfdr.de>; Thu, 10 Oct 2019 14:10:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D62206EB18;
	Thu, 10 Oct 2019 12:10:13 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C78206EB18
 for <intel-gfx@lists.freedesktop.org>; Thu, 10 Oct 2019 12:10:11 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga105.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Oct 2019 05:10:11 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,280,1566889200"; d="scan'208";a="184391128"
Received: from pashteka-mobl.ger.corp.intel.com (HELO [10.252.41.207])
 ([10.252.41.207])
 by orsmga007.jf.intel.com with ESMTP; 10 Oct 2019 05:10:09 -0700
To: Matt Roper <matthew.d.roper@intel.com>
References: <20191004113514.17064-1-maarten.lankhorst@linux.intel.com>
 <20191004113514.17064-5-maarten.lankhorst@linux.intel.com>
 <20191007193717.GI6810@mdroper-desk1.amr.corp.intel.com>
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Message-ID: <de56b194-c19f-5aa6-c125-66ae853f7058@linux.intel.com>
Date: Thu, 10 Oct 2019 14:10:08 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191007193717.GI6810@mdroper-desk1.amr.corp.intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 04/24] drm/i915: Remove cursor use of
 properties for coordinates
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T3AgMDctMTAtMjAxOSBvbSAyMTozNyBzY2hyZWVmIE1hdHQgUm9wZXI6Cj4gT24gRnJpLCBPY3Qg
MDQsIDIwMTkgYXQgMDE6MzQ6NTRQTSArMDIwMCwgTWFhcnRlbiBMYW5raG9yc3Qgd3JvdGU6Cj4+
IFdlIGhhdmUgYSBzcmMgYW5kIGRlY3QgcmVjdGFuZ2xlLCB1c2UgaXQgaW5zdGVhZCBvZiByZWx5
aW5nIG9uCj4+IHRoZSBjb3JlIGRybSBwcm9wZXJ0aWVzLgo+Pgo+PiBUaGlzIHJlbW92ZXMgdGhl
IHNwZWNpYWwgY2FzZSBpbiB0aGUgd2F0ZXJtYXJrIGNvZGUgZm9yIGN1cnNvciB3L2guCj4+Cj4+
IFNpZ25lZC1vZmYtYnk6IE1hYXJ0ZW4gTGFua2hvcnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51
eC5pbnRlbC5jb20+Cj4gSSB0aGluayB5b3Ugc2hvdWxkIG1ha2UgaXQgbW9yZSBjbGVhciBpbiB0
aGUgY29tbWl0IG1lc3NhZ2UgaGVyZSB0aGF0Cj4geW91J3JlIGFjdHVhbGx5IG92ZXJ3cml0aW5n
IHRoZSBjbGlwcGVkIGNvb3JkaW5hdGVzIGluIHNyYy9kc3Qgd2l0aCB0aGUKPiB1bmNsaXBwZWQg
Y29vcmRpbmF0ZXMgdGhhdCB3ZSBwcm9ncmFtIGludG8gb3VyIGhhcmR3YXJlLiAgSSBtaXNzZWQg
dGhhdAo+IHRoZSBmaXJzdCB0aW1lIHJlYWRpbmcgdGhyb3VnaCB0aGUgcGF0Y2g7IHVzaW5nIGNs
aXBwZWQgY29vcmRpbmF0ZXMKPiB3b3VsZCBvYnZpb3VzbHkgY2F1c2UgbG90cyBvZiBmYWlsdXJl
cy4KPgo+IEFjdHVhbGx5LCBldmVuIGlmIHRoaXMgaXMgc2FmZSBhdCB0aGUgbW9tZW50LCB3ZSdy
ZSB2aW9sYXRpbmcgdGhlCj4gZG9jdW1lbnRlZCBleHBlY3RhdGlvbnMgb2YgdGhlIERSTSBjb3Jl
LiAgSSdkIHN1Z2dlc3QgYWxzbyBhZGRpbmcgYSBkcm0KPiBjb3JlIHBhdGNoIHRoYXQgdXBkYXRl
cyB0aGUgY29tbWVudCBvbiBkcm1fcGxhbmVfc3RhdGUgdG8gaW5kaWNhdGUgdGhhdAo+IHRoZSBj
b250ZW50cyBtYXkgb3IgbWF5IG5vdCBiZSBjbGlwcGVkIChkcml2ZXItc3BlY2lmaWMpIGFuZCB0
aGF0IHRoZQo+IGNvcmUgc2hvdWxkbid0IGFzc3VtZSBlaXRoZXIgd2F5LgoKaHR0cHM6Ly9wYXRj
aHdvcmsuZnJlZWRlc2t0b3Aub3JnL3BhdGNoLzMzNTI0NS8/c2VyaWVzPTY3ODQwJnJldj0xCgo/
Cgp+TWFhcnRlbgoKPgo+IE1hdHQKPgo+PiAtLS0KPj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGlzcGxheS5jIHwgNTcgKysrKysrKysrKystLS0tLS0tLQo+PiAgZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyAgICAgICAgICAgICAgfCA1OCArKysrKysrLS0tLS0t
LS0tLS0tLQo+PiAgMiBmaWxlcyBjaGFuZ2VkLCA1MyBpbnNlcnRpb25zKCspLCA2MiBkZWxldGlv
bnMoLSkKPj4KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5
LmMKPj4gaW5kZXggYzNhYzVhNWM1MTg1Li45ZTM0YmU0OGM3NzAgMTAwNjQ0Cj4+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCj4+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCj4+IEBAIC0xMDU5MSwxNiAr
MTA1OTEsMTYgQEAgc3RhdGljIHUzMiBpbnRlbF9jdXJzb3JfYmFzZShjb25zdCBzdHJ1Y3QgaW50
ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlKQo+PiAgCS8qIElMSysgZG8gdGhpcyBhdXRvbWFn
aWNhbGx5ICovCj4+ICAJaWYgKEhBU19HTUNIKGRldl9wcml2KSAmJgo+PiAgCSAgICBwbGFuZV9z
dGF0ZS0+YmFzZS5yb3RhdGlvbiAmIERSTV9NT0RFX1JPVEFURV8xODApCj4+IC0JCWJhc2UgKz0g
KHBsYW5lX3N0YXRlLT5iYXNlLmNydGNfaCAqCj4+IC0JCQkgcGxhbmVfc3RhdGUtPmJhc2UuY3J0
Y193IC0gMSkgKiBmYi0+Zm9ybWF0LT5jcHBbMF07Cj4+ICsJCWJhc2UgKz0gKGRybV9yZWN0X2hl
aWdodCgmcGxhbmVfc3RhdGUtPmJhc2UuZHN0KSAqCj4+ICsJCQkgZHJtX3JlY3Rfd2lkdGgoJnBs
YW5lX3N0YXRlLT5iYXNlLmRzdCkgLSAxKSAqIGZiLT5mb3JtYXQtPmNwcFswXTsKPj4gIAo+PiAg
CXJldHVybiBiYXNlOwo+PiAgfQo+PiAgCj4+ICBzdGF0aWMgdTMyIGludGVsX2N1cnNvcl9wb3Np
dGlvbihjb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlKQo+PiAgewo+
PiAtCWludCB4ID0gcGxhbmVfc3RhdGUtPmJhc2UuY3J0Y194Owo+PiAtCWludCB5ID0gcGxhbmVf
c3RhdGUtPmJhc2UuY3J0Y195Owo+PiArCWludCB4ID0gcGxhbmVfc3RhdGUtPmJhc2UuZHN0Lngx
Owo+PiArCWludCB5ID0gcGxhbmVfc3RhdGUtPmJhc2UuZHN0LnkxOwo+PiAgCXUzMiBwb3MgPSAw
Owo+PiAgCj4+ICAJaWYgKHggPCAwKSB7Cj4+IEBAIC0xMDYyMiw4ICsxMDYyMiw4IEBAIHN0YXRp
YyBib29sIGludGVsX2N1cnNvcl9zaXplX29rKGNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0
ZSAqcGxhbmVfc3RhdGUpCj4+ICB7Cj4+ICAJY29uc3Qgc3RydWN0IGRybV9tb2RlX2NvbmZpZyAq
Y29uZmlnID0KPj4gIAkJJnBsYW5lX3N0YXRlLT5iYXNlLnBsYW5lLT5kZXYtPm1vZGVfY29uZmln
Owo+PiAtCWludCB3aWR0aCA9IHBsYW5lX3N0YXRlLT5iYXNlLmNydGNfdzsKPj4gLQlpbnQgaGVp
Z2h0ID0gcGxhbmVfc3RhdGUtPmJhc2UuY3J0Y19oOwo+PiArCWludCB3aWR0aCA9IGRybV9yZWN0
X3dpZHRoKCZwbGFuZV9zdGF0ZS0+YmFzZS5kc3QpOwo+PiArCWludCBoZWlnaHQgPSBkcm1fcmVj
dF9oZWlnaHQoJnBsYW5lX3N0YXRlLT5iYXNlLmRzdCk7Cj4+ICAKPj4gIAlyZXR1cm4gd2lkdGgg
PiAwICYmIHdpZHRoIDw9IGNvbmZpZy0+Y3Vyc29yX3dpZHRoICYmCj4+ICAJCWhlaWdodCA+IDAg
JiYgaGVpZ2h0IDw9IGNvbmZpZy0+Y3Vyc29yX2hlaWdodDsKPj4gQEAgLTEwNjQyLDggKzEwNjQy
LDggQEAgc3RhdGljIGludCBpbnRlbF9jdXJzb3JfY2hlY2tfc3VyZmFjZShzdHJ1Y3QgaW50ZWxf
cGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlKQo+PiAgCWlmICghcGxhbmVfc3RhdGUtPmJhc2Uudmlz
aWJsZSkKPj4gIAkJcmV0dXJuIDA7Cj4+ICAKPj4gLQlzcmNfeCA9IHBsYW5lX3N0YXRlLT5iYXNl
LnNyY194ID4+IDE2Owo+PiAtCXNyY195ID0gcGxhbmVfc3RhdGUtPmJhc2Uuc3JjX3kgPj4gMTY7
Cj4+ICsJc3JjX3ggPSBwbGFuZV9zdGF0ZS0+YmFzZS5zcmMueDEgPj4gMTY7Cj4+ICsJc3JjX3kg
PSBwbGFuZV9zdGF0ZS0+YmFzZS5zcmMueTEgPj4gMTY7Cj4+ICAKPj4gIAlpbnRlbF9hZGRfZmJf
b2Zmc2V0cygmc3JjX3gsICZzcmNfeSwgcGxhbmVfc3RhdGUsIDApOwo+PiAgCW9mZnNldCA9IGlu
dGVsX3BsYW5lX2NvbXB1dGVfYWxpZ25lZF9vZmZzZXQoJnNyY194LCAmc3JjX3ksCj4+IEBAIC0x
MDY3OCw2ICsxMDY3OCwxMCBAQCBzdGF0aWMgaW50IGludGVsX2NoZWNrX2N1cnNvcihzdHJ1Y3Qg
aW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKPj4gIAlpZiAocmV0KQo+PiAgCQlyZXR1cm4g
cmV0Owo+PiAgCj4+ICsJLyogVXNlIHRoZSB1bmNsaXBwZWQgc3JjL2RzdCByZWN0YW5nbGVzLCB3
aGljaCB3ZSBwcm9ncmFtIHRvIGh3ICovCj4+ICsJcGxhbmVfc3RhdGUtPmJhc2Uuc3JjID0gZHJt
X3BsYW5lX3N0YXRlX3NyYygmcGxhbmVfc3RhdGUtPmJhc2UpOwo+PiArCXBsYW5lX3N0YXRlLT5i
YXNlLmRzdCA9IGRybV9wbGFuZV9zdGF0ZV9kZXN0KCZwbGFuZV9zdGF0ZS0+YmFzZSk7Cj4+ICsK
Pj4gIAlyZXQgPSBpbnRlbF9jdXJzb3JfY2hlY2tfc3VyZmFjZShwbGFuZV9zdGF0ZSk7Cj4+ICAJ
aWYgKHJldCkKPj4gIAkJcmV0dXJuIHJldDsKPj4gQEAgLTEwNzIwLDcgKzEwNzI0LDcgQEAgc3Rh
dGljIHUzMiBpODQ1X2N1cnNvcl9jdGwoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNy
dGNfc3RhdGUsCj4+ICAKPj4gIHN0YXRpYyBib29sIGk4NDVfY3Vyc29yX3NpemVfb2soY29uc3Qg
c3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSkKPj4gIHsKPj4gLQlpbnQgd2lk
dGggPSBwbGFuZV9zdGF0ZS0+YmFzZS5jcnRjX3c7Cj4+ICsJaW50IHdpZHRoID0gZHJtX3JlY3Rf
d2lkdGgoJnBsYW5lX3N0YXRlLT5iYXNlLmRzdCk7Cj4+ICAKPj4gIAkvKgo+PiAgCSAqIDg0NWcv
ODY1ZyBhcmUgb25seSBsaW1pdGVkIGJ5IHRoZSB3aWR0aCBvZiB0aGVpciBjdXJzb3JzLAo+PiBA
QCAtMTA3NDYsOCArMTA3NTAsOCBAQCBzdGF0aWMgaW50IGk4NDVfY2hlY2tfY3Vyc29yKHN0cnVj
dCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+PiAgCS8qIENoZWNrIGZvciB3aGljaCBj
dXJzb3IgdHlwZXMgd2Ugc3VwcG9ydCAqLwo+PiAgCWlmICghaTg0NV9jdXJzb3Jfc2l6ZV9vayhw
bGFuZV9zdGF0ZSkpIHsKPj4gIAkJRFJNX0RFQlVHKCJDdXJzb3IgZGltZW5zaW9uICVkeCVkIG5v
dCBzdXBwb3J0ZWRcbiIsCj4+IC0JCQkgIHBsYW5lX3N0YXRlLT5iYXNlLmNydGNfdywKPj4gLQkJ
CSAgcGxhbmVfc3RhdGUtPmJhc2UuY3J0Y19oKTsKPj4gKwkJCSAgZHJtX3JlY3Rfd2lkdGgoJnBs
YW5lX3N0YXRlLT5iYXNlLmRzdCksCj4+ICsJCQkgIGRybV9yZWN0X2hlaWdodCgmcGxhbmVfc3Rh
dGUtPmJhc2UuZHN0KSk7Cj4+ICAJCXJldHVybiAtRUlOVkFMOwo+PiAgCX0KPj4gIAo+PiBAQCAt
MTA3ODAsOCArMTA3ODQsOCBAQCBzdGF0aWMgdm9pZCBpODQ1X3VwZGF0ZV9jdXJzb3Ioc3RydWN0
IGludGVsX3BsYW5lICpwbGFuZSwKPj4gIAl1bnNpZ25lZCBsb25nIGlycWZsYWdzOwo+PiAgCj4+
ICAJaWYgKHBsYW5lX3N0YXRlICYmIHBsYW5lX3N0YXRlLT5iYXNlLnZpc2libGUpIHsKPj4gLQkJ
dW5zaWduZWQgaW50IHdpZHRoID0gcGxhbmVfc3RhdGUtPmJhc2UuY3J0Y193Owo+PiAtCQl1bnNp
Z25lZCBpbnQgaGVpZ2h0ID0gcGxhbmVfc3RhdGUtPmJhc2UuY3J0Y19oOwo+PiArCQl1bnNpZ25l
ZCBpbnQgd2lkdGggPSBkcm1fcmVjdF93aWR0aCgmcGxhbmVfc3RhdGUtPmJhc2Uuc3JjKTsKPj4g
KwkJdW5zaWduZWQgaW50IGhlaWdodCA9IGRybV9yZWN0X2hlaWdodCgmcGxhbmVfc3RhdGUtPmJh
c2UuZHN0KTsKPj4gIAo+PiAgCQljbnRsID0gcGxhbmVfc3RhdGUtPmN0bCB8Cj4+ICAJCQlpODQ1
X2N1cnNvcl9jdGxfY3J0YyhjcnRjX3N0YXRlKTsKPj4gQEAgLTEwODgzLDcgKzEwODg3LDcgQEAg
c3RhdGljIHUzMiBpOXh4X2N1cnNvcl9jdGwoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUg
KmNydGNfc3RhdGUsCj4+ICAJaWYgKElTX0dFTihkZXZfcHJpdiwgNikgfHwgSVNfSVZZQlJJREdF
KGRldl9wcml2KSkKPj4gIAkJY250bCB8PSBNQ1VSU09SX1RSSUNLTEVfRkVFRF9ESVNBQkxFOwo+
PiAgCj4+IC0Jc3dpdGNoIChwbGFuZV9zdGF0ZS0+YmFzZS5jcnRjX3cpIHsKPj4gKwlzd2l0Y2gg
KGRybV9yZWN0X3dpZHRoKCZwbGFuZV9zdGF0ZS0+YmFzZS5kc3QpKSB7Cj4+ICAJY2FzZSA2NDoK
Pj4gIAkJY250bCB8PSBNQ1VSU09SX01PREVfNjRfQVJHQl9BWDsKPj4gIAkJYnJlYWs7Cj4+IEBA
IC0xMDg5NCw3ICsxMDg5OCw3IEBAIHN0YXRpYyB1MzIgaTl4eF9jdXJzb3JfY3RsKGNvbnN0IHN0
cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+PiAgCQljbnRsIHw9IE1DVVJTT1Jf
TU9ERV8yNTZfQVJHQl9BWDsKPj4gIAkJYnJlYWs7Cj4+ICAJZGVmYXVsdDoKPj4gLQkJTUlTU0lO
R19DQVNFKHBsYW5lX3N0YXRlLT5iYXNlLmNydGNfdyk7Cj4+ICsJCU1JU1NJTkdfQ0FTRShkcm1f
cmVjdF93aWR0aCgmcGxhbmVfc3RhdGUtPmJhc2UuZHN0KSk7Cj4+ICAJCXJldHVybiAwOwo+PiAg
CX0KPj4gIAo+PiBAQCAtMTA5MDgsOCArMTA5MTIsOCBAQCBzdGF0aWMgYm9vbCBpOXh4X2N1cnNv
cl9zaXplX29rKGNvbnN0IHN0cnVjdCBpbnRlbF9wbGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGUpCj4+
ICB7Cj4+ICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0KPj4gIAkJdG9faTkx
NShwbGFuZV9zdGF0ZS0+YmFzZS5wbGFuZS0+ZGV2KTsKPj4gLQlpbnQgd2lkdGggPSBwbGFuZV9z
dGF0ZS0+YmFzZS5jcnRjX3c7Cj4+IC0JaW50IGhlaWdodCA9IHBsYW5lX3N0YXRlLT5iYXNlLmNy
dGNfaDsKPj4gKwlpbnQgd2lkdGggPSBkcm1fcmVjdF93aWR0aCgmcGxhbmVfc3RhdGUtPmJhc2Uu
ZHN0KTsKPj4gKwlpbnQgaGVpZ2h0ID0gZHJtX3JlY3RfaGVpZ2h0KCZwbGFuZV9zdGF0ZS0+YmFz
ZS5kc3QpOwo+PiAgCj4+ICAJaWYgKCFpbnRlbF9jdXJzb3Jfc2l6ZV9vayhwbGFuZV9zdGF0ZSkp
Cj4+ICAJCXJldHVybiBmYWxzZTsKPj4gQEAgLTEwOTYyLDE3ICsxMDk2NiwxOSBAQCBzdGF0aWMg
aW50IGk5eHhfY2hlY2tfY3Vyc29yKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
LAo+PiAgCS8qIENoZWNrIGZvciB3aGljaCBjdXJzb3IgdHlwZXMgd2Ugc3VwcG9ydCAqLwo+PiAg
CWlmICghaTl4eF9jdXJzb3Jfc2l6ZV9vayhwbGFuZV9zdGF0ZSkpIHsKPj4gIAkJRFJNX0RFQlVH
KCJDdXJzb3IgZGltZW5zaW9uICVkeCVkIG5vdCBzdXBwb3J0ZWRcbiIsCj4+IC0JCQkgIHBsYW5l
X3N0YXRlLT5iYXNlLmNydGNfdywKPj4gLQkJCSAgcGxhbmVfc3RhdGUtPmJhc2UuY3J0Y19oKTsK
Pj4gKwkJCSAgZHJtX3JlY3Rfd2lkdGgoJnBsYW5lX3N0YXRlLT5iYXNlLmRzdCksCj4+ICsJCQkg
IGRybV9yZWN0X2hlaWdodCgmcGxhbmVfc3RhdGUtPmJhc2UuZHN0KSk7Cj4+ICAJCXJldHVybiAt
RUlOVkFMOwo+PiAgCX0KPj4gIAo+PiAgCVdBUk5fT04ocGxhbmVfc3RhdGUtPmJhc2UudmlzaWJs
ZSAmJgo+PiAgCQlwbGFuZV9zdGF0ZS0+Y29sb3JfcGxhbmVbMF0uc3RyaWRlICE9IGZiLT5waXRj
aGVzWzBdKTsKPj4gIAo+PiAtCWlmIChmYi0+cGl0Y2hlc1swXSAhPSBwbGFuZV9zdGF0ZS0+YmFz
ZS5jcnRjX3cgKiBmYi0+Zm9ybWF0LT5jcHBbMF0pIHsKPj4gKwlpZiAoZmItPnBpdGNoZXNbMF0g
IT0KPj4gKwkgICAgZHJtX3JlY3Rfd2lkdGgoJnBsYW5lX3N0YXRlLT5iYXNlLmRzdCkgKiBmYi0+
Zm9ybWF0LT5jcHBbMF0pIHsKPj4gIAkJRFJNX0RFQlVHX0tNUygiSW52YWxpZCBjdXJzb3Igc3Ry
aWRlICgldSkgKGN1cnNvciB3aWR0aCAlZClcbiIsCj4+IC0JCQkgICAgICBmYi0+cGl0Y2hlc1sw
XSwgcGxhbmVfc3RhdGUtPmJhc2UuY3J0Y193KTsKPj4gKwkJCSAgICAgIGZiLT5waXRjaGVzWzBd
LAo+PiArCQkJICAgICAgZHJtX3JlY3Rfd2lkdGgoJnBsYW5lX3N0YXRlLT5iYXNlLmRzdCkpOwo+
PiAgCQlyZXR1cm4gLUVJTlZBTDsKPj4gIAl9Cj4+ICAKPj4gQEAgLTEwOTg3LDcgKzEwOTkzLDcg
QEAgc3RhdGljIGludCBpOXh4X2NoZWNrX2N1cnNvcihzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
Y3J0Y19zdGF0ZSwKPj4gIAkgKiBSZWZ1c2UgdGhlIHB1dCB0aGUgY3Vyc29yIGludG8gdGhhdCBj
b21wcm9taXNlZCBwb3NpdGlvbi4KPj4gIAkgKi8KPj4gIAlpZiAoSVNfQ0hFUlJZVklFVyhkZXZf
cHJpdikgJiYgcGlwZSA9PSBQSVBFX0MgJiYKPj4gLQkgICAgcGxhbmVfc3RhdGUtPmJhc2Uudmlz
aWJsZSAmJiBwbGFuZV9zdGF0ZS0+YmFzZS5jcnRjX3ggPCAwKSB7Cj4+ICsJICAgIHBsYW5lX3N0
YXRlLT5iYXNlLnZpc2libGUgJiYgcGxhbmVfc3RhdGUtPmJhc2UuZHN0LngxIDwgMCkgewo+PiAg
CQlEUk1fREVCVUdfS01TKCJDSFYgY3Vyc29yIEMgbm90IGFsbG93ZWQgdG8gc3RyYWRkbGUgdGhl
IGxlZnQgc2NyZWVuIGVkZ2VcbiIpOwo+PiAgCQlyZXR1cm4gLUVJTlZBTDsKPj4gIAl9Cj4+IEBA
IC0xMTAwNywxMSArMTEwMTMsMTQgQEAgc3RhdGljIHZvaWQgaTl4eF91cGRhdGVfY3Vyc29yKHN0
cnVjdCBpbnRlbF9wbGFuZSAqcGxhbmUsCj4+ICAJdW5zaWduZWQgbG9uZyBpcnFmbGFnczsKPj4g
IAo+PiAgCWlmIChwbGFuZV9zdGF0ZSAmJiBwbGFuZV9zdGF0ZS0+YmFzZS52aXNpYmxlKSB7Cj4+
ICsJCXVuc2lnbmVkIHdpZHRoID0gZHJtX3JlY3Rfd2lkdGgoJnBsYW5lX3N0YXRlLT5iYXNlLmRz
dCk7Cj4+ICsJCXVuc2lnbmVkIGhlaWdodCA9IGRybV9yZWN0X2hlaWdodCgmcGxhbmVfc3RhdGUt
PmJhc2UuZHN0KTsKPj4gKwo+PiAgCQljbnRsID0gcGxhbmVfc3RhdGUtPmN0bCB8Cj4+ICAJCQlp
OXh4X2N1cnNvcl9jdGxfY3J0YyhjcnRjX3N0YXRlKTsKPj4gIAo+PiAtCQlpZiAocGxhbmVfc3Rh
dGUtPmJhc2UuY3J0Y19oICE9IHBsYW5lX3N0YXRlLT5iYXNlLmNydGNfdykKPj4gLQkJCWZiY19j
dGwgPSBDVVJfRkJDX0NUTF9FTiB8IChwbGFuZV9zdGF0ZS0+YmFzZS5jcnRjX2ggLSAxKTsKPj4g
KwkJaWYgKHdpZHRoICE9IGhlaWdodCkKPj4gKwkJCWZiY19jdGwgPSBDVVJfRkJDX0NUTF9FTiB8
IChoZWlnaHQgLSAxKTsKPj4gIAo+PiAgCQliYXNlID0gaW50ZWxfY3Vyc29yX2Jhc2UocGxhbmVf
c3RhdGUpOwo+PiAgCQlwb3MgPSBpbnRlbF9jdXJzb3JfcG9zaXRpb24ocGxhbmVfc3RhdGUpOwo+
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX3BtLmMKPj4gaW5kZXggNmFlYWFkNTg3YTIwLi41MzM1OGUzM2Rm
MWIgMTAwNjQ0Cj4+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKPj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYwo+PiBAQCAtMTExNywxMCArMTExNyw3
IEBAIHN0YXRpYyB1MTYgZzR4X2NvbXB1dGVfd20oY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3Rh
dGUgKmNydGNfc3RhdGUsCj4+ICAJY2xvY2sgPSBhZGp1c3RlZF9tb2RlLT5jcnRjX2Nsb2NrOwo+
PiAgCWh0b3RhbCA9IGFkanVzdGVkX21vZGUtPmNydGNfaHRvdGFsOwo+PiAgCj4+IC0JaWYgKHBs
YW5lLT5pZCA9PSBQTEFORV9DVVJTT1IpCj4+IC0JCXdpZHRoID0gcGxhbmVfc3RhdGUtPmJhc2Uu
Y3J0Y193Owo+PiAtCWVsc2UKPj4gLQkJd2lkdGggPSBkcm1fcmVjdF93aWR0aCgmcGxhbmVfc3Rh
dGUtPmJhc2UuZHN0KTsKPj4gKwl3aWR0aCA9IGRybV9yZWN0X3dpZHRoKCZwbGFuZV9zdGF0ZS0+
YmFzZS5kc3QpOwo+PiAgCj4+ICAJaWYgKHBsYW5lLT5pZCA9PSBQTEFORV9DVVJTT1IpIHsKPj4g
IAkJd20gPSBpbnRlbF93bV9tZXRob2QyKGNsb2NrLCBodG90YWwsIHdpZHRoLCBjcHAsIGxhdGVu
Y3kpOwo+PiBAQCAtMjU0OSw3ICsyNTQ2LDggQEAgc3RhdGljIHUzMiBpbGtfY29tcHV0ZV9jdXJf
d20oY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCj4+ICAKPj4gIAly
ZXR1cm4gaWxrX3dtX21ldGhvZDIoY3J0Y19zdGF0ZS0+cGl4ZWxfcmF0ZSwKPj4gIAkJCSAgICAg
IGNydGNfc3RhdGUtPmJhc2UuYWRqdXN0ZWRfbW9kZS5jcnRjX2h0b3RhbCwKPj4gLQkJCSAgICAg
IHBsYW5lX3N0YXRlLT5iYXNlLmNydGNfdywgY3BwLCBtZW1fdmFsdWUpOwo+PiArCQkJICAgICAg
ZHJtX3JlY3Rfd2lkdGgoJnBsYW5lX3N0YXRlLT5iYXNlLmRzdCksCj4+ICsJCQkgICAgICBjcHAs
IG1lbV92YWx1ZSk7Cj4+ICB9Cj4+ICAKPj4gIC8qIE9ubHkgZm9yIFdNX0xQLiAqLwo+PiBAQCAt
NDA0Niw3ICs0MDQ0LDYgQEAgc3RhdGljIHVpbnRfZml4ZWRfMTZfMTZfdAo+PiAgc2tsX3BsYW5l
X2Rvd25zY2FsZV9hbW91bnQoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3Rh
dGUsCj4+ICAJCQkgICBjb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRl
KQo+PiAgewo+PiAtCXN0cnVjdCBpbnRlbF9wbGFuZSAqcGxhbmUgPSB0b19pbnRlbF9wbGFuZShw
bGFuZV9zdGF0ZS0+YmFzZS5wbGFuZSk7Cj4+ICAJdTMyIHNyY193LCBzcmNfaCwgZHN0X3csIGRz
dF9oOwo+PiAgCXVpbnRfZml4ZWRfMTZfMTZfdCBmcF93X3JhdGlvLCBmcF9oX3JhdGlvOwo+PiAg
CXVpbnRfZml4ZWRfMTZfMTZfdCBkb3duc2NhbGVfaCwgZG93bnNjYWxlX3c7Cj4+IEBAIC00MDU0
LDI3ICs0MDUxLDE3IEBAIHNrbF9wbGFuZV9kb3duc2NhbGVfYW1vdW50KGNvbnN0IHN0cnVjdCBp
bnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+PiAgCWlmIChXQVJOX09OKCFpbnRlbF93bV9w
bGFuZV92aXNpYmxlKGNydGNfc3RhdGUsIHBsYW5lX3N0YXRlKSkpCj4+ICAJCXJldHVybiB1MzJf
dG9fZml4ZWQxNigwKTsKPj4gIAo+PiAtCS8qIG4uYi4sIHNyYyBpcyAxNi4xNiBmaXhlZCBwb2lu
dCwgZHN0IGlzIHdob2xlIGludGVnZXIgKi8KPj4gLQlpZiAocGxhbmUtPmlkID09IFBMQU5FX0NV
UlNPUikgewo+PiAtCQkvKgo+PiAtCQkgKiBDdXJzb3JzIG9ubHkgc3VwcG9ydCAwLzE4MCBkZWdy
ZWUgcm90YXRpb24sCj4+IC0JCSAqIGhlbmNlIG5vIG5lZWQgdG8gYWNjb3VudCBmb3Igcm90YXRp
b24gaGVyZS4KPj4gLQkJICovCj4+IC0JCXNyY193ID0gcGxhbmVfc3RhdGUtPmJhc2Uuc3JjX3cg
Pj4gMTY7Cj4+IC0JCXNyY19oID0gcGxhbmVfc3RhdGUtPmJhc2Uuc3JjX2ggPj4gMTY7Cj4+IC0J
CWRzdF93ID0gcGxhbmVfc3RhdGUtPmJhc2UuY3J0Y193Owo+PiAtCQlkc3RfaCA9IHBsYW5lX3N0
YXRlLT5iYXNlLmNydGNfaDsKPj4gLQl9IGVsc2Ugewo+PiAtCQkvKgo+PiAtCQkgKiBTcmMgY29v
cmRpbmF0ZXMgYXJlIGFscmVhZHkgcm90YXRlZCBieSAyNzAgZGVncmVlcyBmb3IKPj4gLQkJICog
dGhlIDkwLzI3MCBkZWdyZWUgcGxhbmUgcm90YXRpb24gY2FzZXMgKHRvIG1hdGNoIHRoZQo+PiAt
CQkgKiBHVFQgbWFwcGluZyksIGhlbmNlIG5vIG5lZWQgdG8gYWNjb3VudCBmb3Igcm90YXRpb24g
aGVyZS4KPj4gLQkJICovCj4+IC0JCXNyY193ID0gZHJtX3JlY3Rfd2lkdGgoJnBsYW5lX3N0YXRl
LT5iYXNlLnNyYykgPj4gMTY7Cj4+IC0JCXNyY19oID0gZHJtX3JlY3RfaGVpZ2h0KCZwbGFuZV9z
dGF0ZS0+YmFzZS5zcmMpID4+IDE2Owo+PiAtCQlkc3RfdyA9IGRybV9yZWN0X3dpZHRoKCZwbGFu
ZV9zdGF0ZS0+YmFzZS5kc3QpOwo+PiAtCQlkc3RfaCA9IGRybV9yZWN0X2hlaWdodCgmcGxhbmVf
c3RhdGUtPmJhc2UuZHN0KTsKPj4gLQl9Cj4+ICsJLyoKPj4gKwkgKiBTcmMgY29vcmRpbmF0ZXMg
YXJlIGFscmVhZHkgcm90YXRlZCBieSAyNzAgZGVncmVlcyBmb3IKPj4gKwkgKiB0aGUgOTAvMjcw
IGRlZ3JlZSBwbGFuZSByb3RhdGlvbiBjYXNlcyAodG8gbWF0Y2ggdGhlCj4+ICsJICogR1RUIG1h
cHBpbmcpLCBoZW5jZSBubyBuZWVkIHRvIGFjY291bnQgZm9yIHJvdGF0aW9uIGhlcmUuCj4+ICsJ
ICoKPj4gKwkgKiBuLmIuLCBzcmMgaXMgMTYuMTYgZml4ZWQgcG9pbnQsIGRzdCBpcyB3aG9sZSBp
bnRlZ2VyLgo+PiArCSAqLwo+PiArCXNyY193ID0gZHJtX3JlY3Rfd2lkdGgoJnBsYW5lX3N0YXRl
LT5iYXNlLnNyYykgPj4gMTY7Cj4+ICsJc3JjX2ggPSBkcm1fcmVjdF9oZWlnaHQoJnBsYW5lX3N0
YXRlLT5iYXNlLnNyYykgPj4gMTY7Cj4+ICsJZHN0X3cgPSBkcm1fcmVjdF93aWR0aCgmcGxhbmVf
c3RhdGUtPmJhc2UuZHN0KTsKPj4gKwlkc3RfaCA9IGRybV9yZWN0X2hlaWdodCgmcGxhbmVfc3Rh
dGUtPmJhc2UuZHN0KTsKPj4gIAo+PiAgCWZwX3dfcmF0aW8gPSBkaXZfZml4ZWQxNihzcmNfdywg
ZHN0X3cpOwo+PiAgCWZwX2hfcmF0aW8gPSBkaXZfZml4ZWQxNihzcmNfaCwgZHN0X2gpOwo+PiBA
QCAtNDY5OCwyMCArNDY4NSwxNSBAQCBza2xfY29tcHV0ZV9wbGFuZV93bV9wYXJhbXMoY29uc3Qg
c3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCj4+ICAJCQkgICAgY29uc3Qgc3Ry
dWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSwKPj4gIAkJCSAgICBzdHJ1Y3Qgc2ts
X3dtX3BhcmFtcyAqd3AsIGludCBjb2xvcl9wbGFuZSkKPj4gIHsKPj4gLQlzdHJ1Y3QgaW50ZWxf
cGxhbmUgKnBsYW5lID0gdG9faW50ZWxfcGxhbmUocGxhbmVfc3RhdGUtPmJhc2UucGxhbmUpOwo+
PiAgCWNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0gcGxhbmVfc3RhdGUtPmJhc2Uu
ZmI7Cj4+ICAJaW50IHdpZHRoOwo+PiAgCj4+IC0JaWYgKHBsYW5lLT5pZCA9PSBQTEFORV9DVVJT
T1IpIHsKPj4gLQkJd2lkdGggPSBwbGFuZV9zdGF0ZS0+YmFzZS5jcnRjX3c7Cj4+IC0JfSBlbHNl
IHsKPj4gLQkJLyoKPj4gLQkJICogU3JjIGNvb3JkaW5hdGVzIGFyZSBhbHJlYWR5IHJvdGF0ZWQg
YnkgMjcwIGRlZ3JlZXMgZm9yCj4+IC0JCSAqIHRoZSA5MC8yNzAgZGVncmVlIHBsYW5lIHJvdGF0
aW9uIGNhc2VzICh0byBtYXRjaCB0aGUKPj4gLQkJICogR1RUIG1hcHBpbmcpLCBoZW5jZSBubyBu
ZWVkIHRvIGFjY291bnQgZm9yIHJvdGF0aW9uIGhlcmUuCj4+IC0JCSAqLwo+PiAtCQl3aWR0aCA9
IGRybV9yZWN0X3dpZHRoKCZwbGFuZV9zdGF0ZS0+YmFzZS5zcmMpID4+IDE2Owo+PiAtCX0KPj4g
KwkvKgo+PiArCSAqIFNyYyBjb29yZGluYXRlcyBhcmUgYWxyZWFkeSByb3RhdGVkIGJ5IDI3MCBk
ZWdyZWVzIGZvcgo+PiArCSAqIHRoZSA5MC8yNzAgZGVncmVlIHBsYW5lIHJvdGF0aW9uIGNhc2Vz
ICh0byBtYXRjaCB0aGUKPj4gKwkgKiBHVFQgbWFwcGluZyksIGhlbmNlIG5vIG5lZWQgdG8gYWNj
b3VudCBmb3Igcm90YXRpb24gaGVyZS4KPj4gKwkgKi8KPj4gKwl3aWR0aCA9IGRybV9yZWN0X3dp
ZHRoKCZwbGFuZV9zdGF0ZS0+YmFzZS5zcmMpID4+IDE2Owo+PiAgCj4+ICAJcmV0dXJuIHNrbF9j
b21wdXRlX3dtX3BhcmFtcyhjcnRjX3N0YXRlLCB3aWR0aCwKPj4gIAkJCQkgICAgIGZiLT5mb3Jt
YXQsIGZiLT5tb2RpZmllciwKPj4gLS0gCj4+IDIuMjMuMAo+Pgo+PiBfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+PiBJbnRlbC1nZnggbWFpbGluZyBsaXN0
Cj4+IEludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPj4gaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngKCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0Cklu
dGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

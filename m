Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B26BF3B8750
	for <lists+intel-gfx@lfdr.de>; Wed, 30 Jun 2021 19:00:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 898E26EA55;
	Wed, 30 Jun 2021 17:00:15 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-oi1-x235.google.com (mail-oi1-x235.google.com
 [IPv6:2607:f8b0:4864:20::235])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E2FB76EA54
 for <intel-gfx@lists.freedesktop.org>; Wed, 30 Jun 2021 17:00:13 +0000 (UTC)
Received: by mail-oi1-x235.google.com with SMTP id u11so3843399oiv.1
 for <intel-gfx@lists.freedesktop.org>; Wed, 30 Jun 2021 10:00:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=BfVHT28HXDR3dnmHS3jh+g5WcHD2kxFJAYch/cUXIys=;
 b=KrgC7v/fnX/mmj9O2kvZ4E2HpZzLxNSDoJQCMx+QSbulwXStjgRqO4fBds+zoZaFO1
 FfhOG3wjZoWpzMAV/Q+W/d5qJNEyNN1idBI8AHxPaQZRGU7yA3NQ+twRW/3TeNCD4stl
 Kgc1KejAFyfIf67HYu4mnkk3GZ8kkXk+7IY+w=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=BfVHT28HXDR3dnmHS3jh+g5WcHD2kxFJAYch/cUXIys=;
 b=pxaxAzkUvvSTQpCagECP6kcuMzLkSgvj+HEuNJNlh1Ji/Cqs6GnQSeUAGZymzLoY2J
 5E6CU9rmbo4trWFIINJ6v1+S59MgY1lK5hW0IiQ5klXP3Ft59pA3vC2qjfkHi+TNZeOn
 sm4GKQPrdfUX0m7FMWs35cncpOWmkmIJpIh9VTz7f9AV3qsfcbtrx30QbyXoxjL9NOrJ
 5TCWjSofPQQLXYq33ra9ceUv6h2sKwRhTyGFjSd0kGfUVa01xi0WaEiIQbB0394aARBg
 +vO5rrVchaHHm3qowVGU24EmrAxcYgd9ZDJwhyNWIddZ+IxHTGIXI9kWA/oBN5v62DMJ
 FtMg==
X-Gm-Message-State: AOAM530eGHxe2Sj34PdSxcqHxkjnN414ksJnqLXP/OgvZW600jzMcNrI
 q8K6TcJL/OBgulOhd9cUIsXZuSLbVOfa1pwqOsJqvg==
X-Google-Smtp-Source: ABdhPJzZ2l0zsardKT558yX7X2XysrGXvTrmiAM+yDKa7wRDttt3tcDzXC3r0ssT5yO//U8MpWOhKX+rKZVSK4D6ojI=
X-Received: by 2002:aca:4b92:: with SMTP id y140mr3696716oia.101.1625072413084; 
 Wed, 30 Jun 2021 10:00:13 -0700 (PDT)
MIME-Version: 1.0
References: <20210624193045.5087-1-thomas.hellstrom@linux.intel.com>
 <20210624193045.5087-2-thomas.hellstrom@linux.intel.com>
 <CAM0jSHMbhYs5u7eV-Adjo1d=qB69WNuh-Z1gY-wfH31_=F7czg@mail.gmail.com>
 <7593b3ba63007323679472f5120f7d72a96f71c1.camel@linux.intel.com>
 <CAM0jSHNyHH2emeOXS4m6-7cAexD626pkQM_Qa6PP5Q-A6bnsaA@mail.gmail.com>
In-Reply-To: <CAM0jSHNyHH2emeOXS4m6-7cAexD626pkQM_Qa6PP5Q-A6bnsaA@mail.gmail.com>
From: Daniel Vetter <daniel@ffwll.ch>
Date: Wed, 30 Jun 2021 19:00:01 +0200
Message-ID: <CAKMK7uEFzTi8DrS-Tz=cRvQJTHQX_ByGg8WtnqUh0Fw8jn+VXg@mail.gmail.com>
To: Matthew Auld <matthew.william.auld@gmail.com>
Subject: Re: [Intel-gfx] [PATCH 1/2] drm/i915/ttm: Reorganize the ttm move
 code somewhat
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?Q?Thomas_Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Matthew Auld <matthew.auld@intel.com>,
 ML dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCBKdW4gMzAsIDIwMjEgYXQgNjo1NCBQTSBNYXR0aGV3IEF1bGQKPG1hdHRoZXcud2ls
bGlhbS5hdWxkQGdtYWlsLmNvbT4gd3JvdGU6Cj4KPiBPbiBXZWQsIDMwIEp1biAyMDIxIGF0IDE2
OjI3LCBUaG9tYXMgSGVsbHN0csO2bQo+IDx0aG9tYXMuaGVsbHN0cm9tQGxpbnV4LmludGVsLmNv
bT4gd3JvdGU6Cj4gPgo+ID4gT24gV2VkLCAyMDIxLTA2LTMwIGF0IDE1OjE5ICswMTAwLCBNYXR0
aGV3IEF1bGQgd3JvdGU6Cj4gPiA+IE9uIFRodSwgMjQgSnVuIDIwMjEgYXQgMjA6MzEsIFRob21h
cyBIZWxsc3Ryw7ZtCj4gPiA+IDx0aG9tYXMuaGVsbHN0cm9tQGxpbnV4LmludGVsLmNvbT4gd3Jv
dGU6Cj4gPiA+ID4KPiA+ID4gPiBJbiBvcmRlciB0byBtYWtlIHRoZSBjb2RlIGEgYml0IG1vcmUg
cmVhZGFibGUgYW5kIHRvIGZhY2lsaXRhdGUKPiA+ID4gPiBhc3luYyBtZW1jcHkgbW92ZXMsIHJl
b3JnYW5pemUgdGhlIG1vdmUgY29kZSBhIGxpdHRsZS4gRGV0ZXJtaW5lCj4gPiA+ID4gYXQgYW4g
ZWFybHkgc3RhZ2Ugd2hldGhlciB0byBjb3B5IG9yIHRvIGNsZWFyLgo+ID4gPiA+Cj4gPiA+ID4g
U2lnbmVkLW9mZi1ieTogVGhvbWFzIEhlbGxzdHLDtm0gPHRob21hcy5oZWxsc3Ryb21AbGludXgu
aW50ZWwuY29tPgo+ID4gPiA+IC0tLQo+ID4gPiA+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fdHRtLmMgfCA3MCArKysrKysrKysrKysrKy0tLS0tLS0KPiA+ID4gPiAtLS0tCj4g
PiA+ID4gIDEgZmlsZSBjaGFuZ2VkLCA0MCBpbnNlcnRpb25zKCspLCAzMCBkZWxldGlvbnMoLSkK
PiA+ID4gPgo+ID4gPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fdHRtLmMKPiA+ID4gPiBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90
dG0uYwo+ID4gPiA+IGluZGV4IGMzOWQ5ODJjNGZhNi4uNGU1MjlhZGNkZmM3IDEwMDY0NAo+ID4g
PiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90dG0uYwo+ID4gPiA+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90dG0uYwo+ID4gPiA+IEBA
IC00MzEsNiArNDMxLDcgQEAgaTkxNV90dG1fcmVzb3VyY2VfZ2V0X3N0KHN0cnVjdAo+ID4gPiA+
IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKPiA+ID4gPiAgfQo+ID4gPiA+Cj4gPiA+ID4gIHN0
YXRpYyBpbnQgaTkxNV90dG1fYWNjZWxfbW92ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJv
LAo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIGNsZWFyLAo+ID4g
PiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX3Jlc291cmNlICpk
c3RfbWVtLAo+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qgc2df
dGFibGUgKmRzdF9zdCkKPiA+ID4gPiAgewo+ID4gPiA+IEBAIC00NDksMTMgKzQ1MCwxMCBAQCBz
dGF0aWMgaW50IGk5MTVfdHRtX2FjY2VsX21vdmUoc3RydWN0Cj4gPiA+ID4gdHRtX2J1ZmZlcl9v
YmplY3QgKmJvLAo+ID4gPiA+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiA+ID4g
Pgo+ID4gPiA+ICAgICAgICAgZHN0X2xldmVsID0gaTkxNV90dG1fY2FjaGVfbGV2ZWwoaTkxNSwg
ZHN0X21lbSwgdHRtKTsKPiA+ID4gPiAtICAgICAgIGlmICghdHRtIHx8ICF0dG1fdHRfaXNfcG9w
dWxhdGVkKHR0bSkpIHsKPiA+ID4gPiArICAgICAgIGlmIChjbGVhcikgewo+ID4gPiA+ICAgICAg
ICAgICAgICAgICBpZiAoYm8tPnR5cGUgPT0gdHRtX2JvX3R5cGVfa2VybmVsKQo+ID4gPiA+ICAg
ICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ID4gPgo+ID4gPiBXYXMgdGhh
dCBtZWFudCB0byBiZToKPiA+ID4gcmV0dXJuIDA6Cj4gPiA+Cj4gPiA+ID8KPiA+ID4KPiA+ID4g
QWxzbyBkb2VzIHRoYXQgbWVhbiB3ZSBhcmUgaW5jb3JyZWN0bHkgZmFsbGluZyBiYWNrIHRvIG1l
bXNldCwgZm9yCj4gPiA+IG5vbi11c2Vyc3BhY2Ugb2JqZWN0cywgaW5zdGVhZCBvZiBtYWtpbmcg
aXQgYSBub29wPwo+ID4KPiA+IE5vLCB3ZSdyZSBkZWxpYmVyYXRlbHkgZmFsbGluZyBiYWNrIHRv
IG1lbXNldCBmb3Igbm9uLXVzZXJzcGFjZQo+ID4gb2JqZWN0cywgYnV0IHRoZSBsb2dpYyBvbmx5
IG1lbXNldHMgaW4gdGhlIEJPX0FMTE9DX0NQVV9DTEVBUiBjYXNlIGlmCj4gPiBldmVyeXRoaW5n
IGlzIGltcGxlbWVudGVkIGNvcnJlY3RseS4KPiA+Cj4gPiA+Cj4gPiA+ID4KPiA+ID4gPiAtICAg
ICAgICAgICAgICAgaWYgKHR0bSAmJiAhKHR0bS0+cGFnZV9mbGFncyAmCj4gPiA+ID4gVFRNX1BB
R0VfRkxBR19aRVJPX0FMTE9DKSkKPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICByZXR1
cm4gMDsKPiA+ID4gPiAtCj4gPiA+ID4gICAgICAgICAgICAgICAgIGludGVsX2VuZ2luZV9wbV9n
ZXQoaTkxNS0+Z3QubWlncmF0ZS5jb250ZXh0LQo+ID4gPiA+ID5lbmdpbmUpOwo+ID4gPiA+ICAg
ICAgICAgICAgICAgICByZXQgPSBpbnRlbF9jb250ZXh0X21pZ3JhdGVfY2xlYXIoaTkxNS0KPiA+
ID4gPiA+Z3QubWlncmF0ZS5jb250ZXh0LCBOVUxMLAo+ID4gPiA+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0X3N0LT5zZ2wsCj4gPiA+ID4gZHN0
X2xldmVsLAo+ID4gPiA+IEBAIC00ODksMjcgKzQ4Nyw1MyBAQCBzdGF0aWMgaW50IGk5MTVfdHRt
X2FjY2VsX21vdmUoc3RydWN0Cj4gPiA+ID4gdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+ID4gPiA+
ICAgICAgICAgcmV0dXJuIHJldDsKPiA+ID4gPiAgfQo+ID4gPiA+Cj4gPiA+ID4gLXN0YXRpYyBp
bnQgaTkxNV90dG1fbW92ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBib29sIGV2aWN0
LAo+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX29wZXJhdGlvbl9j
dHggKmN0eCwKPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHR0bV9yZXNv
dXJjZSAqZHN0X21lbSwKPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHR0
bV9wbGFjZSAqaG9wKQo+ID4gPiA+ICtzdGF0aWMgdm9pZCBfX2k5MTVfdHRtX21vdmUoc3RydWN0
IHR0bV9idWZmZXJfb2JqZWN0ICpibywgYm9vbAo+ID4gPiA+IGNsZWFyLAo+ID4gPiA+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX3Jlc291cmNlICpkc3RfbWVtLAo+ID4g
PiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qgc2dfdGFibGUgKmRzdF9zdCkK
PiA+ID4gPiAgewo+ID4gPiA+ICAgICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aiA9IGk5MTVfdHRtX3RvX2dlbShibyk7Cj4gPiA+ID4gLSAgICAgICBzdHJ1Y3QgdHRtX3Jlc291
cmNlX21hbmFnZXIgKmRzdF9tYW4gPQo+ID4gPiA+IC0gICAgICAgICAgICAgICB0dG1fbWFuYWdl
cl90eXBlKGJvLT5iZGV2LCBkc3RfbWVtLT5tZW1fdHlwZSk7Cj4gPiA+ID4gICAgICAgICBzdHJ1
Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbiAqZHN0X3JlZywgKnNyY19yZWc7Cj4gPiA+ID4gICAgICAg
ICB1bmlvbiB7Cj4gPiA+ID4gICAgICAgICAgICAgICAgIHN0cnVjdCB0dG1fa21hcF9pdGVyX3R0
IHR0Owo+ID4gPiA+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX2ttYXBfaXRlcl9pb21hcCBp
bzsKPiA+ID4gPiAgICAgICAgIH0gX2RzdF9pdGVyLCBfc3JjX2l0ZXI7Cj4gPiA+ID4gICAgICAg
ICBzdHJ1Y3QgdHRtX2ttYXBfaXRlciAqZHN0X2l0ZXIsICpzcmNfaXRlcjsKPiA+ID4gPiAtICAg
ICAgIHN0cnVjdCBzZ190YWJsZSAqZHN0X3N0Owo+ID4gPiA+ICAgICAgICAgaW50IHJldDsKPiA+
ID4gPgo+ID4gPiA+ICAgICAgICAgZHN0X3JlZyA9IGk5MTVfdHRtX3JlZ2lvbihiby0+YmRldiwg
ZHN0X21lbS0+bWVtX3R5cGUpOwo+ID4gPiA+ICAgICAgICAgc3JjX3JlZyA9IGk5MTVfdHRtX3Jl
Z2lvbihiby0+YmRldiwgYm8tPnJlc291cmNlLQo+ID4gPiA+ID5tZW1fdHlwZSk7Cj4gPiA+ID4g
ICAgICAgICBHRU1fQlVHX09OKCFkc3RfcmVnIHx8ICFzcmNfcmVnKTsKPiA+ID4gPgo+ID4gPiA+
ICsgICAgICAgcmV0ID0gaTkxNV90dG1fYWNjZWxfbW92ZShibywgY2xlYXIsIGRzdF9tZW0sIGRz
dF9zdCk7Cj4gPiA+ID4gKyAgICAgICBpZiAocmV0KSB7Cj4gPiA+Cj4gPiA+IE9uZSBmdXR1cmUg
Y29uc2lkZXJhdGlvbiBpcyBmbGF0IENDUyB3aGVyZSBJIGRvbid0IHRoaW5rIHdlIGNhbgo+ID4g
PiBlYXNpbHkKPiA+ID4gZmFsbCBiYWNrIHRvIG1lbWNweSBmb3IgdXNlcnNwYWNlIG9iamVjdHMu
IE1heWJlIHdlIGNhbiBtYWtlIHRoaXMKPiA+ID4gZmFsbGJhY2sgY29uZGl0aW9uYWwgb24gREcx
IG9yICFBTExPQ19VU0VSIGZvciBub3csIG9yIGp1c3QgYWRkIGEKPiA+ID4gVE9ETz8KPiA+Cj4g
PiBVZ2guIElzIHRoYXQgdHJ1ZSBmb3IgYm90aCBjbGVhcmluZyBhbmQgY29weWluZywgb3IgaXMg
aXQgb25seSBjb3B5aW5nPwo+Cj4gV2l0aCBjbGVhcmluZyBJIHRoaW5rIHdlIGFyZSByZXF1aXJl
ZCB0byBudWtlIHRoZSBhdXggQ0NTIHN0YXRlIHVzaW5nCj4gc29tZSBzcGVjaWFsIGJsaXR0ZXIg
Y29tbWFuZC4KPgo+IEZvciBjb3B5aW5nL21vdmluZyBJIHRoaW5rIGl0J3MgYSBzaW1pbGFyIHN0
b3J5LCB3aGVyZSBzcGVjaWFsIGNhcmUKPiBtaWdodCBiZSBuZWVkZWQgZm9yIHRoZSBhdXggc3Rh
dGUsIHdoaWNoIGxpa2VseSByZXF1aXJlcyB0aGUgYmxpdHRlci4KPiBBbHRob3VnaCB0YmggSSBk
b24ndCByZWFsbHkgcmVtZW1iZXIgYWxsIHRoZSBkZXRhaWxzLgoKVGhlcmUncyBtb3JlIHRoYW4g
anVzdCBmbGF0IENDUywgZm9yIGRnMiB3ZSdsbCBhbHNvIHN1cHBvcnQgcmVzaXplYWJsZQpCQVIg
d2l0aCB0aGUgZ29hbCB0byBtYWtlIHRoZSBub24tbWFwcGFibGUgbG1lbSBhdmFpbGFibGUgdG9v
LiBBZmFpawp0aGVyZSdzIG5vIGZhbGxiYWNrIHdheSB0byBhY2Nlc3MgdGhhdCBtZW1vcnkgd2l0
aG91dCBhIGNvcHkgZW5naW5lLgoKSSB0aGluayBvbiB0aG9zZSBwbGF0Zm9ybXMgd2Ugc2ltcGx5
IGhhdmUgdG8gZ28gYmFjayB0byB3ZWRnaW5nIHRoZQpkcml2ZXIgaWYgcmVzZXQgb2YgdGhlIGNv
cHkgZW5naW5lIGZhaWxzIGFuZCBvbmUgb3VyIGtlcm5lbCBjb250ZXh0CndhcyBpbXBhY3RlZC4g
Tm90aGluZyByZWFsbHkgd2UgY2FuIGRvIG11Y2ggdGhlcmUuIE9uIHRoZSBiaWcgc2VydmVyCmdw
dXMgd2UnbGwgaGF2ZSBhIGRlZGljYXRlZCBjb3B5ZW5naW5lIGZvciB0aGUga2VybmVsIHJlc2Vy
dmVkLCBzbwpwcmV0dHkgdW5saWtlbHkgdGhhdCBkaWVzLCBidXQgb24gREcyIHRoZXJlJ3Mgb25s
eSBvbmUuCi1EYW5pZWwKCj4gPiBQcm9ibGVtIGlzIGlmIHdlIGhpdCBhbiBlbmdpbmUgcmVzZXQg
YW5kIGZlbmNlIGVycm9yIGR1cmluZyBpbml0aWFsCj4gPiBjbGVhcmluZyAvIHN3YXBpbiwgdGhl
IHBsYW4gbW92aW5nIGZvcndhcmQgaXMgdG8gaW50ZXJjZXB0IHRoYXQgYW5kCj4gPiByZXNvcnQg
dG8gY3B1IGNsZWFyaW5nIC8gY29weWluZyBmb3Igc2VjdXJpdHkgcmVhc29ucy4gSW4gdGhlIHdv
cnN0Cj4gPiBjYXNlIHdlIGF0IGxlYXN0IG5lZWQgdG8gYmUgYWJsZSB0byBjbGVhci4KPiA+Cj4g
PiAvVGhvbWFzCj4gPgo+ID4KPiA+ID4KPiA+ID4gPiArICAgICAgICAgICAgICAgZHN0X2l0ZXIg
PSAhY3B1X21hcHNfaW9tZW0oZHN0X21lbSkgPwo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAg
ICAgIHR0bV9rbWFwX2l0ZXJfdHRfaW5pdCgmX2RzdF9pdGVyLnR0LCBiby0KPiA+ID4gPiA+dHRt
KSA6Cj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgdHRtX2ttYXBfaXRlcl9pb21hcF9p
bml0KCZfZHN0X2l0ZXIuaW8sCj4gPiA+ID4gJmRzdF9yZWctPmlvbWFwLAo+ID4gPiA+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3Rfc3QsIGRzdF9y
ZWctCj4gPiA+ID4gPnJlZ2lvbi5zdGFydCk7Cj4gPiA+ID4gKwo+ID4gPiA+ICsgICAgICAgICAg
ICAgICBzcmNfaXRlciA9ICFjcHVfbWFwc19pb21lbShiby0+cmVzb3VyY2UpID8KPiA+ID4gPiAr
ICAgICAgICAgICAgICAgICAgICAgICB0dG1fa21hcF9pdGVyX3R0X2luaXQoJl9zcmNfaXRlci50
dCwgYm8tCj4gPiA+ID4gPnR0bSkgOgo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIHR0
bV9rbWFwX2l0ZXJfaW9tYXBfaW5pdCgmX3NyY19pdGVyLmlvLAo+ID4gPiA+ICZzcmNfcmVnLT5p
b21hcCwKPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgb2JqLQo+ID4gPiA+ID50dG0uY2FjaGVkX2lvX3N0LAo+ID4gPiA+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNfcmVnLQo+ID4gPiA+ID5y
ZWdpb24uc3RhcnQpOwo+ID4gPiA+ICsKPiA+ID4gPiArICAgICAgICAgICAgICAgdHRtX21vdmVf
bWVtY3B5KGJvLCBkc3RfbWVtLT5udW1fcGFnZXMsIGRzdF9pdGVyLAo+ID4gPiA+IHNyY19pdGVy
KTsKPiA+ID4gPiArICAgICAgIH0KPiA+ID4gPiArfQo+ID4gPiA+ICsKPiA+ID4gPiArc3RhdGlj
IGludCBpOTE1X3R0bV9tb3ZlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sIGJvb2wgZXZp
Y3QsCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB0dG1fb3BlcmF0aW9u
X2N0eCAqY3R4LAo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX3Jl
c291cmNlICpkc3RfbWVtLAo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qg
dHRtX3BsYWNlICpob3ApCj4gPiA+ID4gK3sKPiA+ID4gPiArICAgICAgIHN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0ICpvYmogPSBpOTE1X3R0bV90b19nZW0oYm8pOwo+ID4gPiA+ICsgICAgICAg
c3RydWN0IHR0bV9yZXNvdXJjZV9tYW5hZ2VyICpkc3RfbWFuID0KPiA+ID4gPiArICAgICAgICAg
ICAgICAgdHRtX21hbmFnZXJfdHlwZShiby0+YmRldiwgZHN0X21lbS0+bWVtX3R5cGUpOwo+ID4g
PiA+ICsgICAgICAgc3RydWN0IHR0bV90dCAqdHRtID0gYm8tPnR0bTsKPiA+ID4gPiArICAgICAg
IHN0cnVjdCBzZ190YWJsZSAqZHN0X3N0Owo+ID4gPiA+ICsgICAgICAgYm9vbCBjbGVhcjsKPiA+
ID4gPiArICAgICAgIGludCByZXQ7Cj4gPiA+ID4gKwo+ID4gPiA+ICAgICAgICAgLyogU3luYyBm
b3Igbm93LiBXZSBjb3VsZCBkbyB0aGUgYWN0dWFsIGNvcHkgYXN5bmMuICovCj4gPiA+ID4gICAg
ICAgICByZXQgPSB0dG1fYm9fd2FpdF9jdHgoYm8sIGN0eCk7Cj4gPiA+ID4gICAgICAgICBpZiAo
cmV0KQo+ID4gPiA+IEBAIC01MjYsOSArNTUwLDggQEAgc3RhdGljIGludCBpOTE1X3R0bV9tb3Zl
KHN0cnVjdAo+ID4gPiA+IHR0bV9idWZmZXJfb2JqZWN0ICpibywgYm9vbCBldmljdCwKPiA+ID4g
PiAgICAgICAgIH0KPiA+ID4gPgo+ID4gPiA+ICAgICAgICAgLyogUG9wdWxhdGUgdHRtIHdpdGgg
cGFnZXMgaWYgbmVlZGVkLiBUeXBpY2FsbHkgc3lzdGVtCj4gPiA+ID4gbWVtb3J5LiAqLwo+ID4g
PiA+IC0gICAgICAgaWYgKGJvLT50dG0gJiYgKGRzdF9tYW4tPnVzZV90dCB8fAo+ID4gPiA+IC0g
ICAgICAgICAgICAgICAgICAgICAgIChiby0+dHRtLT5wYWdlX2ZsYWdzICYKPiA+ID4gPiBUVE1f
UEFHRV9GTEFHX1NXQVBQRUQpKSkgewo+ID4gPiA+IC0gICAgICAgICAgICAgICByZXQgPSB0dG1f
dHRfcG9wdWxhdGUoYm8tPmJkZXYsIGJvLT50dG0sIGN0eCk7Cj4gPiA+ID4gKyAgICAgICBpZiAo
dHRtICYmIChkc3RfbWFuLT51c2VfdHQgfHwgKHR0bS0+cGFnZV9mbGFncyAmCj4gPiA+ID4gVFRN
X1BBR0VfRkxBR19TV0FQUEVEKSkpIHsKPiA+ID4gPiArICAgICAgICAgICAgICAgcmV0ID0gdHRt
X3R0X3BvcHVsYXRlKGJvLT5iZGV2LCB0dG0sIGN0eCk7Cj4gPiA+ID4gICAgICAgICAgICAgICAg
IGlmIChyZXQpCj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+
ID4gPiAgICAgICAgIH0KPiA+ID4gPiBAQCAtNTM3LDIzICs1NjAsMTAgQEAgc3RhdGljIGludCBp
OTE1X3R0bV9tb3ZlKHN0cnVjdAo+ID4gPiA+IHR0bV9idWZmZXJfb2JqZWN0ICpibywgYm9vbCBl
dmljdCwKPiA+ID4gPiAgICAgICAgIGlmIChJU19FUlIoZHN0X3N0KSkKPiA+ID4gPiAgICAgICAg
ICAgICAgICAgcmV0dXJuIFBUUl9FUlIoZHN0X3N0KTsKPiA+ID4gPgo+ID4gPiA+IC0gICAgICAg
cmV0ID0gaTkxNV90dG1fYWNjZWxfbW92ZShibywgZHN0X21lbSwgZHN0X3N0KTsKPiA+ID4gPiAt
ICAgICAgIGlmIChyZXQpIHsKPiA+ID4gPiAtICAgICAgICAgICAgICAgLyogSWYgd2Ugc3RhcnQg
bWFwcGluZyBHR1RULCB3ZSBjYW4gbm8gbG9uZ2VyIHVzZQo+ID4gPiA+IG1hbjo6dXNlX3R0IGhl
cmUuICovCj4gPiA+ID4gLSAgICAgICAgICAgICAgIGRzdF9pdGVyID0gIWNwdV9tYXBzX2lvbWVt
KGRzdF9tZW0pID8KPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICB0dG1fa21hcF9pdGVy
X3R0X2luaXQoJl9kc3RfaXRlci50dCwgYm8tCj4gPiA+ID4gPnR0bSkgOgo+ID4gPiA+IC0gICAg
ICAgICAgICAgICAgICAgICAgIHR0bV9rbWFwX2l0ZXJfaW9tYXBfaW5pdCgmX2RzdF9pdGVyLmlv
LAo+ID4gPiA+ICZkc3RfcmVnLT5pb21hcCwKPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0X3N0LCBkc3RfcmVnLQo+ID4gPiA+ID5yZWdp
b24uc3RhcnQpOwo+ID4gPiA+IC0KPiA+ID4gPiAtICAgICAgICAgICAgICAgc3JjX2l0ZXIgPSAh
Y3B1X21hcHNfaW9tZW0oYm8tPnJlc291cmNlKSA/Cj4gPiA+ID4gLSAgICAgICAgICAgICAgICAg
ICAgICAgdHRtX2ttYXBfaXRlcl90dF9pbml0KCZfc3JjX2l0ZXIudHQsIGJvLQo+ID4gPiA+ID50
dG0pIDoKPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICB0dG1fa21hcF9pdGVyX2lvbWFw
X2luaXQoJl9zcmNfaXRlci5pbywKPiA+ID4gPiAmc3JjX3JlZy0+aW9tYXAsCj4gPiA+ID4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai0KPiA+ID4g
PiA+dHRtLmNhY2hlZF9pb19zdCwKPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc3JjX3JlZy0KPiA+ID4gPiA+cmVnaW9uLnN0YXJ0KTsKPiA+
ID4gPiArICAgICAgIGNsZWFyID0gIWNwdV9tYXBzX2lvbWVtKGJvLT5yZXNvdXJjZSkgJiYgKCF0
dG0gfHwKPiA+ID4gPiAhdHRtX3R0X2lzX3BvcHVsYXRlZCh0dG0pKTsKPiA+ID4gPiArICAgICAg
IGlmICghKGNsZWFyICYmIHR0bSAmJiAhKHR0bS0+cGFnZV9mbGFncyAmCj4gPiA+ID4gVFRNX1BB
R0VfRkxBR19aRVJPX0FMTE9DKSkpCj4gPiA+Cj4gPiA+IFNlZW1zIHF1aXRlIGhhcmQgdG8gcmVh
ZD8KPiA+ID4KPiA+ID4gUmV2aWV3ZWQtYnk6IE1hdHRoZXcgQXVsZCA8bWF0dGhldy5hdWxkQGlu
dGVsLmNvbT4KPiA+ID4KPiA+ID4KPiA+ID4gPiArICAgICAgICAgICAgICAgX19pOTE1X3R0bV9t
b3ZlKGJvLCBjbGVhciwgZHN0X21lbSwgZHN0X3N0KTsKPiA+ID4gPgo+ID4gPiA+IC0gICAgICAg
ICAgICAgICB0dG1fbW92ZV9tZW1jcHkoYm8sIGRzdF9tZW0tPm51bV9wYWdlcywgZHN0X2l0ZXIs
Cj4gPiA+ID4gc3JjX2l0ZXIpOwo+ID4gPiA+IC0gICAgICAgfQo+ID4gPiA+IC0gICAgICAgLyog
QmVsb3cgZHN0X21lbSBiZWNvbWVzIGJvLT5yZXNvdXJjZS4gKi8KPiA+ID4gPiAgICAgICAgIHR0
bV9ib19tb3ZlX3N5bmNfY2xlYW51cChibywgZHN0X21lbSk7Cj4gPiA+ID4gICAgICAgICBpOTE1
X3R0bV9hZGp1c3RfZG9tYWluc19hZnRlcl9tb3ZlKG9iaik7Cj4gPiA+ID4gICAgICAgICBpOTE1
X3R0bV9mcmVlX2NhY2hlZF9pb19zdChvYmopOwo+ID4gPiA+IC0tCj4gPiA+ID4gMi4zMS4xCj4g
PiA+ID4KPiA+Cj4gPgo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCj4gSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdAo+IEludGVsLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeAoKCgotLSAKRGFuaWVsIFZldHRlcgpTb2Z0d2FyZSBFbmdpbmVlciwgSW50ZWwg
Q29ycG9yYXRpb24KaHR0cDovL2Jsb2cuZmZ3bGwuY2gKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D2795BE67D
	for <lists+intel-gfx@lfdr.de>; Wed, 25 Sep 2019 22:33:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1E4BD6FB5D;
	Wed, 25 Sep 2019 20:33:36 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 28C916FB63
 for <intel-gfx@lists.freedesktop.org>; Wed, 25 Sep 2019 20:33:28 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 25 Sep 2019 13:33:27 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,549,1559545200"; d="scan'208";a="219110792"
Received: from jausmus-gentoo-dev6.jf.intel.com (HELO jausmus-gentoo-dev6)
 ([10.54.75.43])
 by fmsmga002.fm.intel.com with SMTP; 25 Sep 2019 13:33:26 -0700
Received: by jausmus-gentoo-dev6 (sSMTP sendmail emulation);
 Wed, 25 Sep 2019 13:34:04 -0700
From: James Ausmus <james.ausmus@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 25 Sep 2019 13:33:52 -0700
Message-Id: <20190925203352.9827-4-james.ausmus@intel.com>
X-Mailer: git-send-email 2.22.1
In-Reply-To: <20190925203352.9827-1-james.ausmus@intel.com>
References: <20190925203352.9827-1-james.ausmus@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 3/3] drm/i915/tgl: Remove single pipe
 restriction from SAGV
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Rm9yIEdlbjEyLCBCU3BlYyBubyBsb25nZXIgdGVsbHMgdXMgdG8gZGlzYWJsZSBTQUdWIHdoZW4g
PiAxIHBpcGUgaXMKYWN0aXZlLiBVcGRhdGUgaW50ZWxfY2FuX2VuYWJsZV9zYWd2IHRvIGFsbG93
IHRoaXMsIGFuZCBsb29wIHRocm91Z2ggYWxsCmFjdGl2ZSBwbGFuZXMgb24gYWxsIGFjdGl2ZSBj
cnRjcyB0byBjaGVjayBhZ2FpbnN0IHRoZSBpbnRlcmxhY2VkIGFuZApsYXRlbmN5IHJlc3RyaWN0
aW9ucy4KCkJTcGVjOiA0OTMyNQoKQ2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBs
aW51eC5pbnRlbC5jb20+CkNjOiBTdGFuaXNsYXYgTGlzb3Zza2l5IDxzdGFuaXNsYXYubGlzb3Zz
a2l5QGludGVsLmNvbT4KQ2M6IEx1Y2FzIERlIE1hcmNoaSA8bHVjYXMuZGVtYXJjaGlAaW50ZWwu
Y29tPgpTaWduZWQtb2ZmLWJ5OiBKYW1lcyBBdXNtdXMgPGphbWVzLmF1c211c0BpbnRlbC5jb20+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYyB8IDYzICsrKysrKysrKysrKysr
KysrLS0tLS0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDMyIGluc2VydGlvbnMoKyksIDMx
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3Bt
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jCmluZGV4IGNhMmJlYzA5ZWRiNS4u
Y2I1MGM2OTdhNmI4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3BtLmMKQEAgLTM3NzUsNyArMzc3NSw2
IEBAIGJvb2wgaW50ZWxfY2FuX2VuYWJsZV9zYWd2KHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUg
KnN0YXRlKQogCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjOwogCXN0cnVjdCBpbnRlbF9wbGFuZSAq
cGxhbmU7CiAJc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGU7Ci0JZW51bSBwaXBl
IHBpcGU7CiAJaW50IGxldmVsLCBsYXRlbmN5OwogCWludCBzYWd2X2Jsb2NrX3RpbWVfdXM7CiAK
QEAgLTM3OTEsNDcgKzM3OTAsNDkgQEAgYm9vbCBpbnRlbF9jYW5fZW5hYmxlX3NhZ3Yoc3RydWN0
IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCiAJCXJldHVybiB0cnVlOwogCiAJLyoKLQkgKiBT
S0wrIHdvcmthcm91bmQ6IGJzcGVjIHJlY29tbWVuZHMgd2UgZGlzYWJsZSBTQUdWIHdoZW4gd2Ug
aGF2ZQorCSAqIFNLTC1JQ0wgd29ya2Fyb3VuZDogYnNwZWMgcmVjb21tZW5kcyB3ZSBkaXNhYmxl
IFNBR1Ygd2hlbiB3ZSBoYXZlCiAJICogbW9yZSB0aGVuIG9uZSBwaXBlIGVuYWJsZWQKIAkgKi8K
LQlpZiAoaHdlaWdodDgoc3RhdGUtPmFjdGl2ZV9waXBlcykgPiAxKQorCWlmIChJTlRFTF9HRU4o
ZGV2X3ByaXYpIDwgMTIgJiYgaHdlaWdodDgoc3RhdGUtPmFjdGl2ZV9waXBlcykgPiAxKQogCQly
ZXR1cm4gZmFsc2U7CiAKLQkvKiBTaW5jZSB3ZSdyZSBub3cgZ3VhcmFudGVlZCB0byBvbmx5IGhh
dmUgb25lIGFjdGl2ZSBDUlRDLi4uICovCi0JcGlwZSA9IGZmcyhzdGF0ZS0+YWN0aXZlX3BpcGVz
KSAtIDE7Ci0JY3J0YyA9IGludGVsX2dldF9jcnRjX2Zvcl9waXBlKGRldl9wcml2LCBwaXBlKTsK
LQljcnRjX3N0YXRlID0gdG9faW50ZWxfY3J0Y19zdGF0ZShjcnRjLT5iYXNlLnN0YXRlKTsKKwlm
b3JfZWFjaF9pbnRlbF9jcnRjKCZkZXZfcHJpdi0+ZHJtLCBjcnRjKSB7CisJCWNydGNfc3RhdGUg
PSB0b19pbnRlbF9jcnRjX3N0YXRlKGNydGMtPmJhc2Uuc3RhdGUpOworCQlpZiAoIWNydGNfc3Rh
dGUtPmJhc2UuYWN0aXZlKQorCQkJY29udGludWU7CiAKLQlpZiAoY3J0Yy0+YmFzZS5zdGF0ZS0+
YWRqdXN0ZWRfbW9kZS5mbGFncyAmIERSTV9NT0RFX0ZMQUdfSU5URVJMQUNFKQotCQlyZXR1cm4g
ZmFsc2U7CisJCWlmIChjcnRjLT5iYXNlLnN0YXRlLT5hZGp1c3RlZF9tb2RlLmZsYWdzICYKKwkJ
ICAgIERSTV9NT0RFX0ZMQUdfSU5URVJMQUNFKQorCQkJcmV0dXJuIGZhbHNlOwogCi0JZm9yX2Vh
Y2hfaW50ZWxfcGxhbmVfb25fY3J0YyhkZXYsIGNydGMsIHBsYW5lKSB7Ci0JCXN0cnVjdCBza2xf
cGxhbmVfd20gKndtID0KLQkJCSZjcnRjX3N0YXRlLT53bS5za2wub3B0aW1hbC5wbGFuZXNbcGxh
bmUtPmlkXTsKKwkJZm9yX2VhY2hfaW50ZWxfcGxhbmVfb25fY3J0YyhkZXYsIGNydGMsIHBsYW5l
KSB7CisJCQlzdHJ1Y3Qgc2tsX3BsYW5lX3dtICp3bSA9CisJCQkJJmNydGNfc3RhdGUtPndtLnNr
bC5vcHRpbWFsLnBsYW5lc1twbGFuZS0+aWRdOwogCi0JCS8qIFNraXAgdGhpcyBwbGFuZSBpZiBp
dCdzIG5vdCBlbmFibGVkICovCi0JCWlmICghd20tPndtWzBdLnBsYW5lX2VuKQotCQkJY29udGlu
dWU7CisJCQkvKiBTa2lwIHRoaXMgcGxhbmUgaWYgaXQncyBub3QgZW5hYmxlZCAqLworCQkJaWYg
KCF3bS0+d21bMF0ucGxhbmVfZW4pCisJCQkJY29udGludWU7CiAKLQkJLyogRmluZCB0aGUgaGln
aGVzdCBlbmFibGVkIHdtIGxldmVsIGZvciB0aGlzIHBsYW5lICovCi0JCWZvciAobGV2ZWwgPSBp
bGtfd21fbWF4X2xldmVsKGRldl9wcml2KTsKLQkJICAgICAhd20tPndtW2xldmVsXS5wbGFuZV9l
bjsgLS1sZXZlbCkKLQkJICAgICB7IH0KKwkJCS8qIEZpbmQgdGhlIGhpZ2hlc3QgZW5hYmxlZCB3
bSBsZXZlbCBmb3IgdGhpcyBwbGFuZSAqLworCQkJZm9yIChsZXZlbCA9IGlsa193bV9tYXhfbGV2
ZWwoZGV2X3ByaXYpOworCQkJICAgICAhd20tPndtW2xldmVsXS5wbGFuZV9lbjsgLS1sZXZlbCkK
KwkJCSAgICAgeyB9CiAKLQkJbGF0ZW5jeSA9IGRldl9wcml2LT53bS5za2xfbGF0ZW5jeVtsZXZl
bF07CisJCQlsYXRlbmN5ID0gZGV2X3ByaXYtPndtLnNrbF9sYXRlbmN5W2xldmVsXTsKIAotCQlp
ZiAoc2tsX25lZWRzX21lbW9yeV9id193YShkZXZfcHJpdikgJiYKLQkJICAgIHBsYW5lLT5iYXNl
LnN0YXRlLT5mYi0+bW9kaWZpZXIgPT0KLQkJICAgIEk5MTVfRk9STUFUX01PRF9YX1RJTEVEKQot
CQkJbGF0ZW5jeSArPSAxNTsKKwkJCWlmIChza2xfbmVlZHNfbWVtb3J5X2J3X3dhKGRldl9wcml2
KSAmJgorCQkJICAgIHBsYW5lLT5iYXNlLnN0YXRlLT5mYi0+bW9kaWZpZXIgPT0KKwkJCSAgICBJ
OTE1X0ZPUk1BVF9NT0RfWF9USUxFRCkKKwkJCQlsYXRlbmN5ICs9IDE1OwogCi0JCS8qCi0JCSAq
IElmIGFueSBvZiB0aGUgcGxhbmVzIG9uIHRoaXMgcGlwZSBkb24ndCBlbmFibGUgd20gbGV2ZWxz
IHRoYXQKLQkJICogaW5jdXIgbWVtb3J5IGxhdGVuY2llcyBoaWdoZXIgdGhhbiBzYWd2X2Jsb2Nr
X3RpbWVfdXMgd2UKLQkJICogY2FuJ3QgZW5hYmxlIFNBR1YuCi0JCSAqLwotCQlpZiAobGF0ZW5j
eSA8IHNhZ3ZfYmxvY2tfdGltZV91cykKLQkJCXJldHVybiBmYWxzZTsKKwkJCS8qCisJCQkgKiBJ
ZiBhbnkgb2YgdGhlIHBsYW5lcyBvbiB0aGlzIHBpcGUgZG9uJ3QgZW5hYmxlIHdtCisJCQkgKiBs
ZXZlbHMgdGhhdCBpbmN1ciBtZW1vcnkgbGF0ZW5jaWVzIGhpZ2hlciB0aGFuCisJCQkgKiBzYWd2
X2Jsb2NrX3RpbWVfdXMgd2UgY2FuJ3QgZW5hYmxlIFNBR1YuCisJCQkgKi8KKwkJCWlmIChsYXRl
bmN5IDwgc2Fndl9ibG9ja190aW1lX3VzKQorCQkJCXJldHVybiBmYWxzZTsKKwkJfQogCX0KIAog
CXJldHVybiB0cnVlOwotLSAKMi4yMi4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9pbnRlbC1nZng=

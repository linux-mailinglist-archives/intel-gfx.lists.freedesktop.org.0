Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4B26B1088BE
	for <lists+intel-gfx@lfdr.de>; Mon, 25 Nov 2019 07:40:19 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 44AAC89DC1;
	Mon, 25 Nov 2019 06:40:17 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 146A989DC1
 for <intel-gfx@lists.freedesktop.org>; Mon, 25 Nov 2019 06:40:14 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 24 Nov 2019 22:40:13 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,240,1571727600"; d="scan'208";a="206207872"
Received: from unknown (HELO localhost.localdomain) ([10.223.165.29])
 by fmsmga007.fm.intel.com with ESMTP; 24 Nov 2019 22:40:12 -0800
From: Ankit Navik <ankit.p.navik@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 25 Nov 2019 12:09:04 +0530
Message-Id: <1574663945-31742-3-git-send-email-ankit.p.navik@intel.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1574663945-31742-1-git-send-email-ankit.p.navik@intel.com>
References: <1574663945-31742-1-git-send-email-ankit.p.navik@intel.com>
Subject: [Intel-gfx] [PATCH v5 2/3] drm/i915: set optimum eu/slice/sub-slice
 configuration based on load type
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: ankit.p.navik@intel.com, vipin.anand@intel.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCB3aWxsIHNlbGVjdCBvcHRpbXVtIGV1L3NsaWNlL3N1Yi1zbGljZSBjb25maWd1
cmF0aW9uIGJhc2VkIG9uCnR5cGUgb2YgbG9hZCAobG93LCBtZWRpdW0sIGhpZ2gpIGFzIGlucHV0
LgpCYXNlZCBvbiBvdXIgcmVhZGluZ3MgYW5kIGV4cGVyaW1lbnRzIHdlIGhhdmUgcHJlZGVmaW5l
ZCBzZXQgb2Ygb3B0aW11bQpjb25maWd1cmF0aW9uIGZvciBlYWNoIHBsYXRmb3JtKENIVCwgS0JM
KS4KaTkxNV9nZW1fY29udGV4dF9zZXRfbG9hZF90eXBlIHdpbGwgc2VsZWN0IG9wdGltdW0gY29u
ZmlndXJhdGlvbiBmcm9tCnByZS1kZWZpbmVkIG9wdGltdW0gY29uZmlndXJhdGlvbiB0YWJsZShv
cHRfY29uZmlnKS4KCkl0IGFsc28gaW50cm9kdWNlIGZsYWcgdXBkYXRlX3JlbmRlcl9jb25maWcg
d2hpY2ggY2FuIHNldCBieSBhbnkgZ292ZXJub3IuCgp2MjoKICogTW92ZSBzdGF0aWMgb3B0aW11
bV9jb25maWcgdG8gZGV2aWNlIGluaXQgdGltZS4KICogUmVuYW1lIGZ1bmN0aW9uIHRvIGFwcHJv
cHJpYXRlIG5hbWUsIGZpeCBkYXRhIHR5cGVzIGFuZCBwYXRjaCBvcmRlcmluZy4KICogUmVuYW1l
IHByZXZfbG9hZF90eXBlIHRvIHBlbmRpbmdfbG9hZF90eXBlLiAoVHZydGtvIFVyc3VsaW4pCgp2
MzoKICogQWRkIHNhZmUgZ3VhcmQgY2hlY2sgaW4gaTkxNV9nZW1fY29udGV4dF9zZXRfbG9hZF90
eXBlLgogKiBSZW5hbWUgc3RydWN0IGZyb20gb3B0aW11bV9jb25maWcgdG8gaTkxNV9zc2V1X29w
dGltdW1fY29uZmlnIHRvCiAgIGF2b2lkIG5hbWVzcGFjZSBjbGFzaGVzLgogKiBSZWR1Y2VzIG1l
bWNweSBmb3Igc3BhY2UgZWZmaWNpZW50LgogKiBSZWJhc2UuCiAqIEltcHJvdmVkIGNvbW1pdCBt
ZXNzYWdlLiAoVHZydGtvIFVyc3VsaW4pCgp2NDoKICogTW92ZSBvcHRpbXVtIGNvbmZpZyB0YWJs
ZSB0byBmaWxlIHNjb3BlLiAoVHZydGtvIFVyc3VsaW4pCgp2NToKICogQWRkcyBvcHRpbWFsIHRh
YmxlIG9mIHNsaWNlL3N1Yi1zbGljZS9FVSBmb3IgR2VuIDkgR1QxLgogKiBSZWJhc2UuCgpDYzog
VmlwaW4gQW5hbmQgPHZpcGluLmFuYW5kQGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogQW5raXQg
TmF2aWsgPGFua2l0LnAubmF2aWtAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMgICAgICAgfCAxOSArKysrKysrKwogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCAgICAgICB8ICAyICsKIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0X3R5cGVzLmggfCAzMiArKysrKysrKysrKysr
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICAgICAgICAgICAgIHwgNDIg
KysrKysrKysrKysrKysrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgICAg
ICAgICAgICAgICB8ICA1ICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5m
by5jICAgICAgICAgIHwgNTggKysrKysrKysrKysrKysrKysrKysrKy0KIDYgZmlsZXMgY2hhbmdl
ZCwgMTU0IGluc2VydGlvbnMoKyksIDQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMKaW5kZXggM2ZkOGU3My4uY2Q5ODkxNSAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCkBAIC00NjUsMTAgKzQ2
NSwyOSBAQCBpOTE1X2dlbV9jcmVhdGVfY29udGV4dChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSwgdW5zaWduZWQgaW50IGZsYWdzKQogCiAJdHJhY2VfaTkxNV9jb250ZXh0X2NyZWF0ZShj
dHgpOwogCWF0b21pY19zZXQoJmN0eC0+cmVxX2NudCwgMCk7CisJY3R4LT5zbGljZV9jbnQgPSBo
d2VpZ2h0OChSVU5USU1FX0lORk8oaTkxNSktPnNzZXUuc2xpY2VfbWFzayk7CisJY3R4LT5zdWJz
bGljZV9jbnQgPSBod2VpZ2h0OCgKKwkJCVJVTlRJTUVfSU5GTyhpOTE1KS0+c3NldS5zdWJzbGlj
ZV9tYXNrWzBdKTsKKwljdHgtPmV1X2NudCA9IFJVTlRJTUVfSU5GTyhpOTE1KS0+c3NldS5ldV9w
ZXJfc3Vic2xpY2U7CiAKIAlyZXR1cm4gY3R4OwogfQogCit2b2lkIGk5MTVfZ2VtX2NvbnRleHRf
c2V0X2xvYWRfdHlwZShzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4LAorCQkJCQllbnVtIGdl
bV9sb2FkX3R5cGUgdHlwZSkKK3sKKwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYg
PSBjdHgtPmk5MTU7CisKKwlpZiAoR0VNX1dBUk5fT04odHlwZSA+IExPQURfVFlQRV9MQVNUKSkK
KwkJcmV0dXJuOworCisJLyogQ2FsbCBvcHRfY29uZmlnIHRvIGdldCBjb3JyZWN0IGNvbmZpZ3Vy
YXRpb24gZm9yIGV1LHNsaWNlLHN1YnNsaWNlICovCisJY3R4LT5zbGljZV9jbnQgPSBkZXZfcHJp
di0+b3B0X2NvbmZpZ1t0eXBlXS5zbGljZTsKKwljdHgtPnN1YnNsaWNlX2NudCA9IGRldl9wcml2
LT5vcHRfY29uZmlnW3R5cGVdLnN1YnNsaWNlOworCWN0eC0+ZXVfY250ID0gZGV2X3ByaXYtPm9w
dF9jb25maWdbdHlwZV0uZXU7CisJY3R4LT5wZW5kaW5nX2xvYWRfdHlwZSA9IHR5cGU7Cit9CisK
IHN0YXRpYyB2b2lkCiBkZXN0cm95X2tlcm5lbF9jb250ZXh0KHN0cnVjdCBpOTE1X2dlbV9jb250
ZXh0ICoqY3R4cCkKIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9jb250ZXh0LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4
dC5oCmluZGV4IGNmZTgwNTkuLjY5NjFjYzcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX2NvbnRleHQuaApAQCAtMTYyLDYgKzE2Miw4IEBAIGludCBpOTE1X2dlbV9jb250
ZXh0X3NldHBhcmFtX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJ
CQkJICAgIHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2KTsKIGludCBpOTE1X2dlbV9jb250ZXh0
X3Jlc2V0X3N0YXRzX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJ
CQkJICAgICAgIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSk7Cit2b2lkIGk5MTVfZ2VtX2NvbnRleHRf
c2V0X2xvYWRfdHlwZShzdHJ1Y3QgaTkxNV9nZW1fY29udGV4dCAqY3R4LAorCQkJCWVudW0gZ2Vt
X2xvYWRfdHlwZSB0eXBlKTsKIAogc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKgogaTkxNV9nZW1f
Y29udGV4dF9jcmVhdGVfa2VybmVsKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBpbnQg
cHJpbyk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29u
dGV4dF90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRf
dHlwZXMuaAppbmRleCA2Y2FhNmEyLi44NGJmMzZmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dF90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0X3R5cGVzLmgKQEAgLTQwLDYgKzQwLDE5IEBAIHN0
cnVjdCBpOTE1X2dlbV9lbmdpbmVzX2l0ZXIgewogCWNvbnN0IHN0cnVjdCBpOTE1X2dlbV9lbmdp
bmVzICplbmdpbmVzOwogfTsKIAorZW51bSBnZW1fbG9hZF90eXBlIHsKKwlMT0FEX1RZUEVfTE9X
LAorCUxPQURfVFlQRV9NRURJVU0sCisJTE9BRF9UWVBFX0hJR0gsCisJTE9BRF9UWVBFX0xBU1QK
K307CisKK3N0cnVjdCBpOTE1X3NzZXVfb3B0aW11bV9jb25maWcgeworCXU4IHNsaWNlOworCXU4
IHN1YnNsaWNlOworCXU4IGV1OworfTsKKwogLyoqCiAgKiBzdHJ1Y3QgaTkxNV9nZW1fY29udGV4
dCAtIGNsaWVudCBzdGF0ZQogICoKQEAgLTE4MCw2ICsxOTMsMjUgQEAgc3RydWN0IGk5MTVfZ2Vt
X2NvbnRleHQgewogCSAqIGdvIGZvciBsb3cvbWVkaXVtL2hpZ2ggbG9hZCBjb25maWd1cmF0aW9u
IG9mIHRoZSBHUFUuCiAJICovCiAJYXRvbWljX3QgcmVxX2NudDsKKworCS8qKiBzbGljZV9jbnQ6
IHVzZWQgdG8gc2V0IHRoZSAjIG9mIHNsaWNlcyB0byBiZSBlbmFibGVkLiAqLworCXU4IHNsaWNl
X2NudDsKKworCS8qKiBzdWJzbGljZV9jbnQ6IHVzZWQgdG8gc2V0IHRoZSAjIG9mIHN1YnNsaWNl
cyB0byBiZSBlbmFibGVkLiAqLworCXU4IHN1YnNsaWNlX2NudDsKKworCS8qKiBldV9jbnQ6IHVz
ZWQgdG8gc2V0IHRoZSAjIG9mIGV1IHRvIGJlIGVuYWJsZWQuICovCisJdTggZXVfY250OworCisJ
LyoqIGxvYWRfdHlwZTogVGhlIGRlc2lnbmF0ZWQgbG9hZF90eXBlIChoaWdoL21lZGl1bS9sb3cp
IGZvciBhIGdpdmVuCisJICogbnVtYmVyIG9mIHBlbmRpbmcgY29tbWFuZHMgaW4gdGhlIGNvbW1h
bmQgcXVldWUuCisJICovCisJZW51bSBnZW1fbG9hZF90eXBlIGxvYWRfdHlwZTsKKworCS8qKiBw
ZW5kaW5nX2xvYWRfdHlwZTogVGhlIGVhcmxpZXIgbG9hZCB0eXBlIHRoYXQgdGhlIEdQVSB3YXMg
Y29uZmlndXJlZAorCSAqIGZvciAoaGlnaC9tZWRpdW0vbG93KS4KKwkgKi8KKwllbnVtIGdlbV9s
b2FkX3R5cGUgcGVuZGluZ19sb2FkX3R5cGU7CiB9OwogCiAjZW5kaWYgLyogX19JOTE1X0dFTV9D
T05URVhUX1RZUEVTX0hfXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwppbmRleCA0
OTExYjYzLi4yNGRjN2JkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9scmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpAQCAtMjEz
Myw2ICsyMTMzLDM2IEBAIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19jb250ZXh0X3VucGluKHN0cnVj
dCBpbnRlbF9jb250ZXh0ICpjZSkKIAlpbnRlbF9yaW5nX3Jlc2V0KGNlLT5yaW5nLCBjZS0+cmlu
Zy0+dGFpbCk7CiB9CiAKK3N0YXRpYyB1MzIKK2dldF9jb250ZXh0X3JwY3NfY29uZmlnKHN0cnVj
dCBpOTE1X2dlbV9jb250ZXh0ICpjdHgpCit7CisJdTMyIHJwY3MgPSAwOworCXN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGN0eC0+aTkxNTsKKworCWlmIChJTlRFTF9HRU4oZGV2
X3ByaXYpIDwgOCkKKwkJcmV0dXJuIDA7CisKKwlpZiAoUlVOVElNRV9JTkZPKGRldl9wcml2KS0+
c3NldS5oYXNfc2xpY2VfcGcpIHsKKwkJcnBjcyB8PSBHRU44X1JQQ1NfU19DTlRfRU5BQkxFOwor
CQlycGNzIHw9IGN0eC0+c2xpY2VfY250IDw8IEdFTjhfUlBDU19TX0NOVF9TSElGVDsKKwkJcnBj
cyB8PSBHRU44X1JQQ1NfRU5BQkxFOworCX0KKworCWlmIChSVU5USU1FX0lORk8oZGV2X3ByaXYp
LT5zc2V1Lmhhc19zdWJzbGljZV9wZykgeworCQlycGNzIHw9IEdFTjhfUlBDU19TU19DTlRfRU5B
QkxFOworCQlycGNzIHw9IGN0eC0+c3Vic2xpY2VfY250IDw8IEdFTjhfUlBDU19TU19DTlRfU0hJ
RlQ7CisJCXJwY3MgfD0gR0VOOF9SUENTX0VOQUJMRTsKKwl9CisKKwlpZiAoUlVOVElNRV9JTkZP
KGRldl9wcml2KS0+c3NldS5oYXNfZXVfcGcpIHsKKwkJcnBjcyB8PSBjdHgtPmV1X2NudCA8PCBH
RU44X1JQQ1NfRVVfTUlOX1NISUZUOworCQlycGNzIHw9IGN0eC0+ZXVfY250IDw8IEdFTjhfUlBD
U19FVV9NQVhfU0hJRlQ7CisJCXJwY3MgfD0gR0VOOF9SUENTX0VOQUJMRTsKKwl9CisKKwlyZXR1
cm4gcnBjczsKK30KKwogc3RhdGljIHZvaWQKIF9fZXhlY2xpc3RzX3VwZGF0ZV9yZWdfc3RhdGUo
Y29uc3Qgc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAogCQkJICAgICBjb25zdCBzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzICplbmdpbmUpCkBAIC0yMTQ5LDggKzIxNzksMTMgQEAgX19leGVjbGlzdHNf
dXBkYXRlX3JlZ19zdGF0ZShjb25zdCBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCiAKIAkvKiBS
UENTICovCiAJaWYgKGVuZ2luZS0+Y2xhc3MgPT0gUkVOREVSX0NMQVNTKSB7Ci0JCXJlZ3NbQ1RY
X1JfUFdSX0NMS19TVEFURV0gPQotCQkJaW50ZWxfc3NldV9tYWtlX3JwY3MoZW5naW5lLT5pOTE1
LCAmY2UtPnNzZXUpOworCQlpZihlbmdpbmUtPmk5MTUtPnByZWRpY3RpdmVfbG9hZF9lbmFibGUp
IHsKKwkJCXJlZ3NbQ1RYX1JfUFdSX0NMS19TVEFURV0gPQorCQkJCWdldF9jb250ZXh0X3JwY3Nf
Y29uZmlnKGNlLT5nZW1fY29udGV4dCk7CisJCX0gZWxzZSB7CisJCQlyZWdzW0NUWF9SX1BXUl9D
TEtfU1RBVEVdID0KKwkJCQlpbnRlbF9zc2V1X21ha2VfcnBjcyhlbmdpbmUtPmk5MTUsICZjZS0+
c3NldSk7CisJCX0KIAogCQlpOTE1X29hX2luaXRfcmVnX3N0YXRlKGNlLCBlbmdpbmUpOwogCX0K
QEAgLTIxODIsNiArMjIxNyw5IEBAIF9fZXhlY2xpc3RzX2NvbnRleHRfcGluKHN0cnVjdCBpbnRl
bF9jb250ZXh0ICpjZSwKIAljZS0+bHJjX3JlZ19zdGF0ZSA9IHZhZGRyICsgTFJDX1NUQVRFX1BO
ICogUEFHRV9TSVpFOwogCV9fZXhlY2xpc3RzX3VwZGF0ZV9yZWdfc3RhdGUoY2UsIGVuZ2luZSk7
CiAKKwlpZiAoY2UtPmdlbV9jb250ZXh0LT5sb2FkX3R5cGUgIT0gY2UtPmdlbV9jb250ZXh0LT5w
ZW5kaW5nX2xvYWRfdHlwZSkKKwkJY2UtPmdlbV9jb250ZXh0LT5sb2FkX3R5cGUgPSBjZS0+Z2Vt
X2NvbnRleHQtPnBlbmRpbmdfbG9hZF90eXBlOworCiAJcmV0dXJuIDA7CiAKIHVucGluX2FjdGl2
ZToKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IGRiM2MzYTAuLmFkODgyNWYgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kcnYuaApAQCAtMTA5Miw2ICsxMDkyLDExIEBAIHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlIHsKIAkvKiBwcm90ZWN0cyBwYW5lbCBwb3dlciBzZXF1ZW5jZXIgc3RhdGUgKi8KIAlz
dHJ1Y3QgbXV0ZXggcHBzX211dGV4OwogCisJLyogb3B0aW1hbCBzbGljZS9zdWJzbGljZS9FVSBj
b25maWdyYXRpb24gc3RhdGUgKi8KKwlzdHJ1Y3QgaTkxNV9zc2V1X29wdGltdW1fY29uZmlnICpv
cHRfY29uZmlnOworCisJaW50IHByZWRpY3RpdmVfbG9hZF9lbmFibGU7CisKIAl1bnNpZ25lZCBp
bnQgZnNiX2ZyZXEsIG1lbV9mcmVxLCBpc19kZHIzOwogCXVuc2lnbmVkIGludCBza2xfcHJlZmVy
cmVkX3Zjb19mcmVxOwogCXVuc2lnbmVkIGludCBtYXhfY2RjbGtfZnJlcTsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jCmluZGV4IDg1ZTQ4MGIuLjgxYjBmOGEgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uYwpAQCAtODczLDYgKzg3MywzNCBA
QCB2b2lkIGludGVsX2RldmljZV9pbmZvX3N1YnBsYXRmb3JtX2luaXQoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUpCiAJUlVOVElNRV9JTkZPKGk5MTUpLT5wbGF0Zm9ybV9tYXNrW3BpXSB8
PSBtYXNrOwogfQogCisvKiBzdGF0aWMgdGFibGUgb2Ygc2xpY2Uvc3Vic2xpY2UvRVUgZm9yIENo
ZXJyeXZpZXcgKi8KK3N0YXRpYyBjb25zdCBzdHJ1Y3QgaTkxNV9zc2V1X29wdGltdW1fY29uZmln
IGNodl9jb25maWdbTE9BRF9UWVBFX0xBU1RdID0geworCXsxLCAxLCA0fSwJLyogTG93ICovCisJ
ezEsIDEsIDZ9LAkvKiBNZWRpdW0gKi8KKwl7MSwgMiwgNn0JLyogSGlnaCAqLworfTsKKworLyog
c3RhdGljIHRhYmxlIG9mIHNsaWNlL3N1YnNsaWNlL0VVIGZvciBHTEsgR1QxICovCitzdGF0aWMg
Y29uc3Qgc3RydWN0IGk5MTVfc3NldV9vcHRpbXVtX2NvbmZpZyBnbGtfZ3QxX2NvbmZpZ1tMT0FE
X1RZUEVfTEFTVF0gPSB7CisJezEsIDIsIDJ9LAkvKiBMb3cgKi8KKwl7MSwgMiwgM30sCS8qIE1l
ZGl1bSAqLworCXsxLCAyLCA2fQkvKiBIaWdoICovCit9OworCisvKiBzdGF0aWMgdGFibGUgb2Yg
c2xpY2Uvc3Vic2xpY2UvRVUgZm9yIEtCTCBHVDIgKi8KK3N0YXRpYyBjb25zdCBzdHJ1Y3QgaTkx
NV9zc2V1X29wdGltdW1fY29uZmlnIGtibF9ndDJfY29uZmlnW0xPQURfVFlQRV9MQVNUXSA9IHsK
Kwl7MSwgMywgMn0sCS8qIExvdyAqLworCXsxLCAzLCA0fSwJLyogTWVkaXVtICovCisJezEsIDMs
IDh9CS8qIEhpZ2ggKi8KK307CisKKy8qIHN0YXRpYyB0YWJsZSBvZiBzbGljZS9zdWJzbGljZS9F
VSBmb3IgS0JMIEdUMyAqLworc3RhdGljIGNvbnN0IHN0cnVjdCBpOTE1X3NzZXVfb3B0aW11bV9j
b25maWcga2JsX2d0M19jb25maWdbTE9BRF9UWVBFX0xBU1RdID0geworCXsyLCAzLCA0fSwJLyog
TG93ICovCisJezIsIDMsIDZ9LAkvKiBNZWRpdW0gKi8KKwl7MiwgMywgOH0JLyogSGlnaCAqLwor
fTsKKwogLyoqCiAgKiBpbnRlbF9kZXZpY2VfaW5mb19ydW50aW1lX2luaXQgLSBpbml0aWFsaXpl
IHJ1bnRpbWUgaW5mbwogICogQGRldl9wcml2OiB0aGUgaTkxNSBkZXZpY2UKQEAgLTg5NCw2ICs5
MjIsNyBAQCB2b2lkIGludGVsX2RldmljZV9pbmZvX3J1bnRpbWVfaW5pdChzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJc3RydWN0IGludGVsX2RldmljZV9pbmZvICppbmZvID0g
bWt3cml0ZV9kZXZpY2VfaW5mbyhkZXZfcHJpdik7CiAJc3RydWN0IGludGVsX3J1bnRpbWVfaW5m
byAqcnVudGltZSA9IFJVTlRJTUVfSU5GTyhkZXZfcHJpdik7CiAJZW51bSBwaXBlIHBpcGU7CisJ
c3RydWN0IGk5MTVfc3NldV9vcHRpbXVtX2NvbmZpZyAqb3B0X2NvbmZpZyA9IE5VTEw7CiAKIAlp
ZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMCkgewogCQlmb3JfZWFjaF9waXBlKGRldl9wcml2
LCBwaXBlKQpAQCAtOTg2LDEyICsxMDE1LDM0IEBAIHZvaWQgaW50ZWxfZGV2aWNlX2luZm9fcnVu
dGltZV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkvKiBJbml0aWFs
aXplIHNsaWNlL3N1YnNsaWNlL0VVIGluZm8gKi8KIAlpZiAoSVNfSEFTV0VMTChkZXZfcHJpdikp
CiAJCWhhc3dlbGxfc3NldV9pbmZvX2luaXQoZGV2X3ByaXYpOwotCWVsc2UgaWYgKElTX0NIRVJS
WVZJRVcoZGV2X3ByaXYpKQorCWVsc2UgaWYgKElTX0NIRVJSWVZJRVcoZGV2X3ByaXYpKSB7CiAJ
CWNoZXJyeXZpZXdfc3NldV9pbmZvX2luaXQoZGV2X3ByaXYpOworCQlvcHRfY29uZmlnID0gY2h2
X2NvbmZpZzsKKwkJQlVJTERfQlVHX09OKEFSUkFZX1NJWkUoY2h2X2NvbmZpZykgIT0gTE9BRF9U
WVBFX0xBU1QpOworCX0KIAllbHNlIGlmIChJU19CUk9BRFdFTEwoZGV2X3ByaXYpKQogCQlicm9h
ZHdlbGxfc3NldV9pbmZvX2luaXQoZGV2X3ByaXYpOwotCWVsc2UgaWYgKElTX0dFTihkZXZfcHJp
diwgOSkpCisJZWxzZSBpZiAoSVNfR0VOKGRldl9wcml2LCA5KSkgewogCQlnZW45X3NzZXVfaW5m
b19pbml0KGRldl9wcml2KTsKKworCQlzd2l0Y2ggKGluZm8tPmd0KSB7CisJCWRlZmF1bHQ6IC8q
IGZhbGwgdGhyb3VnaCAqLworCQljYXNlIDE6CisJCQlvcHRfY29uZmlnID0gZ2xrX2d0MV9jb25m
aWc7CisJCQlCVUlMRF9CVUdfT04oQVJSQVlfU0laRShnbGtfZ3QxX2NvbmZpZykKKwkJCQkJCSE9
IExPQURfVFlQRV9MQVNUKTsKKwkJY2FzZSAyOgorCQkJb3B0X2NvbmZpZyA9IGtibF9ndDJfY29u
ZmlnOworCQkJQlVJTERfQlVHX09OKEFSUkFZX1NJWkUoa2JsX2d0Ml9jb25maWcpCisJCQkJCQkh
PSBMT0FEX1RZUEVfTEFTVCk7CisJCWJyZWFrOworCQljYXNlIDM6CisJCQlvcHRfY29uZmlnID0g
a2JsX2d0M19jb25maWc7CisJCQlCVUlMRF9CVUdfT04oQVJSQVlfU0laRShrYmxfZ3QzX2NvbmZp
ZykKKwkJCQkJCSE9IExPQURfVFlQRV9MQVNUKTsKKwkJYnJlYWs7CisJCX0KKwl9CiAJZWxzZSBp
ZiAoSVNfR0VOKGRldl9wcml2LCAxMCkpCiAJCWdlbjEwX3NzZXVfaW5mb19pbml0KGRldl9wcml2
KTsKIAllbHNlIGlmIChJU19HRU4oZGV2X3ByaXYsIDExKSkKQEAgLTEwMDQsNiArMTA1NSw5IEBA
IHZvaWQgaW50ZWxfZGV2aWNlX2luZm9fcnVudGltZV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikKIAkJaW5mby0+cHBndHRfdHlwZSA9IElOVEVMX1BQR1RUX05PTkU7CiAJ
fQogCisJaWYgKG9wdF9jb25maWcpCisJCWRldl9wcml2LT5vcHRfY29uZmlnID0gb3B0X2NvbmZp
ZzsKKwogCS8qIEluaXRpYWxpemUgY29tbWFuZCBzdHJlYW0gdGltZXN0YW1wIGZyZXF1ZW5jeSAq
LwogCXJ1bnRpbWUtPmNzX3RpbWVzdGFtcF9mcmVxdWVuY3lfa2h6ID0gcmVhZF90aW1lc3RhbXBf
ZnJlcXVlbmN5KGRldl9wcml2KTsKIH0KLS0gCjIuNy40CgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdm
eEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9pbnRlbC1nZng=

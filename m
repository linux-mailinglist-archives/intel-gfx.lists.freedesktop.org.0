Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3643D10AB58
	for <lists+intel-gfx@lfdr.de>; Wed, 27 Nov 2019 08:58:10 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 638356E1BD;
	Wed, 27 Nov 2019 07:58:07 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 06A336E0E3;
 Wed, 27 Nov 2019 07:58:05 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19353423-1500050 
 for multiple; Wed, 27 Nov 2019 07:58:05 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 27 Nov 2019 07:57:58 +0000
Message-Id: <20191127075758.3181102-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t] i915/gem_ctx_persistence: Bump the reset
 timeout
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgdGhlIGRlZmF1bHQgcHJlZW1wdC1yZXNldCB0aW1lb3V0IGhhcyBiZWVuIGluY3JlYXNlZCBm
cm9tIDEwMG1zIHRvCjY0MG1zLCB3ZSBuZWVkIGEgY29ycmVzcG9uZGluZyBpbmNyZWFzZSBpbiBv
dXIgb3duIHRpbWVvdXQgc28gdGhhdCB3ZQphbGxvdyBlbm91Z2ggdGltZSBmb3IgdGhlIHByZWVt
cHQtcmVzZXQgdG8gb2NjdXIgYW5kIGNsb3NlIHRoZSBodW5nCmNvbnRleHRzLgoKU2lnbmVkLW9m
Zi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Ci0tLQogdGVzdHMv
aTkxNS9nZW1fY3R4X3BlcnNpc3RlbmNlLmMgfCAzNCArKysrKysrKysrKysrKysrKy0tLS0tLS0t
LS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDE4IGluc2VydGlvbnMoKyksIDE2IGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL3Rlc3RzL2k5MTUvZ2VtX2N0eF9wZXJzaXN0ZW5jZS5jIGIvdGVzdHMv
aTkxNS9nZW1fY3R4X3BlcnNpc3RlbmNlLmMKaW5kZXggMGY3MDRjNjM5Li40OTc5YzM1ZTkgMTAw
NjQ0Ci0tLSBhL3Rlc3RzL2k5MTUvZ2VtX2N0eF9wZXJzaXN0ZW5jZS5jCisrKyBiL3Rlc3RzL2k5
MTUvZ2VtX2N0eF9wZXJzaXN0ZW5jZS5jCkBAIC00MCw2ICs0MCw4IEBACiAjaW5jbHVkZSAiaW9j
dGxfd3JhcHBlcnMuaCIgLyogZ2VtX3dhaXQoKSEgKi8KICNpbmNsdWRlICJzd19zeW5jLmgiCiAK
K3N0YXRpYyB1bnNpZ25lZCBsb25nIHJlc2V0X3RpbWVvdXRfbXMgPSBNU0VDX1BFUl9TRUM7IC8q
IGRlZmF1bHQ6IDY0MG1zICovCisKIHN0YXRpYyBib29sIGhhc19wZXJzaXN0ZW5jZShpbnQgaTkx
NSkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2NvbnRleHRfcGFyYW0gcCA9IHsKQEAgLTE2MSwx
MiArMTYzLDEyIEBAIHN0YXRpYyB2b2lkIHRlc3RfcGVyc2lzdGVuY2UoaW50IGk5MTUsIHVuc2ln
bmVkIGludCBlbmdpbmUpCiAJCQkgICAgLmZsYWdzID0gSUdUX1NQSU5fRkVOQ0VfT1VUKTsKIAln
ZW1fY29udGV4dF9kZXN0cm95KGk5MTUsIGN0eCk7CiAKLQl0aW1lb3V0ID0gTlNFQ19QRVJfU0VD
IC8gNTsKKwl0aW1lb3V0ID0gcmVzZXRfdGltZW91dF9tcyAqIDEwMDA7CiAJaWd0X2Fzc2VydF9l
cShnZW1fd2FpdChpOTE1LCBzcGluLT5oYW5kbGUsICZ0aW1lb3V0KSwgLUVUSU1FKTsKIAogCWln
dF9zcGluX2VuZChzcGluKTsKIAotCXRpbWVvdXQgPSBOU0VDX1BFUl9TRUMgLyA1OworCXRpbWVv
dXQgPSByZXNldF90aW1lb3V0X21zICogMTAwMDsKIAlpZ3RfYXNzZXJ0X2VxKGdlbV93YWl0KGk5
MTUsIHNwaW4tPmhhbmRsZSwgJnRpbWVvdXQpLCAwKTsKIAlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVu
Y2Vfc3RhdHVzKHNwaW4tPm91dF9mZW5jZSksIDEpOwogCkBAIC0xNzYsNyArMTc4LDcgQEAgc3Rh
dGljIHZvaWQgdGVzdF9wZXJzaXN0ZW5jZShpbnQgaTkxNSwgdW5zaWduZWQgaW50IGVuZ2luZSkK
IAogc3RhdGljIHZvaWQgdGVzdF9ub25wZXJzaXN0ZW50X2NsZWFudXAoaW50IGk5MTUsIHVuc2ln
bmVkIGludCBlbmdpbmUpCiB7Ci0JaW50NjRfdCB0aW1lb3V0ID0gTlNFQ19QRVJfU0VDIC8gNTsK
KwlpbnQ2NF90IHRpbWVvdXQgPSByZXNldF90aW1lb3V0X21zICogMTAwMDsKIAlpZ3Rfc3Bpbl90
ICpzcGluOwogCXVpbnQzMl90IGN0eDsKIApAQCAtMjI2LDEwICsyMjgsMTAgQEAgc3RhdGljIHZv
aWQgdGVzdF9ub25wZXJzaXN0ZW50X21peGVkKGludCBpOTE1LCB1bnNpZ25lZCBpbnQgZW5naW5l
KQogCX0KIAogCS8qIE91dGVyIHBhaXIgb2YgY29udGV4dHMgd2VyZSBub24tcGVyc2lzdGVudCBh
bmQga2lsbGVkICovCi0JaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3dhaXQoZmVuY2VbMF0sIE1T
RUNfUEVSX1NFQyAvIDUpLCAwKTsKKwlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfd2FpdChmZW5j
ZVswXSwgcmVzZXRfdGltZW91dF9tcyksIDApOwogCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV9z
dGF0dXMoZmVuY2VbMF0pLCAtRUlPKTsKIAotCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV93YWl0
KGZlbmNlWzJdLCBNU0VDX1BFUl9TRUMgLyA1KSwgMCk7CisJaWd0X2Fzc2VydF9lcShzeW5jX2Zl
bmNlX3dhaXQoZmVuY2VbMl0sIHJlc2V0X3RpbWVvdXRfbXMpLCAwKTsKIAlpZ3RfYXNzZXJ0X2Vx
KHN5bmNfZmVuY2Vfc3RhdHVzKGZlbmNlWzJdKSwgLUVJTyk7CiAKIAkvKiBCdXQgdGhlIG1pZGRs
ZSBjb250ZXh0IGlzIHN0aWxsIHJ1bm5pbmcgKi8KQEAgLTI0MCw3ICsyNDIsNyBAQCBzdGF0aWMg
dm9pZCB0ZXN0X25vbnBlcnNpc3RlbnRfbWl4ZWQoaW50IGk5MTUsIHVuc2lnbmVkIGludCBlbmdp
bmUpCiAKIHN0YXRpYyB2b2lkIHRlc3Rfbm9ucGVyc2lzdGVudF9ob3N0aWxlKGludCBpOTE1LCB1
bnNpZ25lZCBpbnQgZW5naW5lKQogewotCWludDY0X3QgdGltZW91dCA9IE5TRUNfUEVSX1NFQyAv
IDI7CisJaW50NjRfdCB0aW1lb3V0ID0gcmVzZXRfdGltZW91dF9tcyAqIDEwMDA7CiAJaWd0X3Nw
aW5fdCAqc3BpbjsKIAl1aW50MzJfdCBjdHg7CiAKQEAgLTI2Niw3ICsyNjgsNyBAQCBzdGF0aWMg
dm9pZCB0ZXN0X25vbnBlcnNpc3RlbnRfaG9zdGlsZShpbnQgaTkxNSwgdW5zaWduZWQgaW50IGVu
Z2luZSkKIAogc3RhdGljIHZvaWQgdGVzdF9ub25wZXJzaXN0ZW50X2hvc3RpbGVfcHJlZW1wdChp
bnQgaTkxNSwgdW5zaWduZWQgaW50IGVuZ2luZSkKIHsKLQlpbnQ2NF90IHRpbWVvdXQgPSBOU0VD
X1BFUl9TRUMgLyAyOworCWludDY0X3QgdGltZW91dCA9IHJlc2V0X3RpbWVvdXRfbXMgKiAxMDAw
OwogCWlndF9zcGluX3QgKnNwaW5bMl07CiAJdWludDMyX3QgY3R4OwogCkBAIC0zMDksNyArMzEx
LDcgQEAgc3RhdGljIHZvaWQgdGVzdF9ub25wZXJzaXN0ZW50X2hvc3RpbGVfcHJlZW1wdChpbnQg
aTkxNSwgdW5zaWduZWQgaW50IGVuZ2luZSkKIAogc3RhdGljIHZvaWQgdGVzdF9ub2hhbmdjaGVj
a19ob3N0aWxlKGludCBpOTE1KQogewotCWludDY0X3QgdGltZW91dCA9IE5TRUNfUEVSX1NFQyAv
IDI7CisJaW50NjRfdCB0aW1lb3V0ID0gcmVzZXRfdGltZW91dF9tcyAqIDEwMDA7CiAJaW50IGRp
cjsKIAogCS8qCkBAIC0zNjEsNyArMzYzLDcgQEAgc3RhdGljIHZvaWQgdGVzdF9ub25wZXJzaXN0
ZW50X2ZpbGUoaW50IGk5MTUpCiAJY2xvc2UoaTkxNSk7CiAJZmx1c2hfZGVsYXllZF9mcHV0KGRl
YnVnZnMpOwogCi0JaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3dhaXQoc3Bpbi0+b3V0X2ZlbmNl
LCBNU0VDX1BFUl9TRUMgLyA1KSwgMCk7CisJaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3dhaXQo
c3Bpbi0+b3V0X2ZlbmNlLCByZXNldF90aW1lb3V0X21zKSwgMCk7CiAJaWd0X2Fzc2VydF9lcShz
eW5jX2ZlbmNlX3N0YXR1cyhzcGluLT5vdXRfZmVuY2UpLCAtRUlPKTsKIAogCXNwaW4tPmhhbmRs
ZSA9IDA7CkBAIC00MDIsMTAgKzQwNCwxMCBAQCBzdGF0aWMgdm9pZCB0ZXN0X25vbnBlcnNpc3Rl
bnRfcXVldWVkKGludCBpOTE1LCB1bnNpZ25lZCBpbnQgZW5naW5lKQogCiAJZ2VtX2NvbnRleHRf
ZGVzdHJveShpOTE1LCBjdHgpOwogCi0JaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3dhaXQoc3Bp
bi0+b3V0X2ZlbmNlLCBNU0VDX1BFUl9TRUMgLyA1KSwgMCk7CisJaWd0X2Fzc2VydF9lcShzeW5j
X2ZlbmNlX3dhaXQoc3Bpbi0+b3V0X2ZlbmNlLCByZXNldF90aW1lb3V0X21zKSwgMCk7CiAJaWd0
X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3N0YXR1cyhzcGluLT5vdXRfZmVuY2UpLCAtRUlPKTsKIAot
CWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV93YWl0KGZlbmNlLCBNU0VDX1BFUl9TRUMgLyA1KSwg
MCk7CisJaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3dhaXQoZmVuY2UsIHJlc2V0X3RpbWVvdXRf
bXMpLCAwKTsKIAlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfc3RhdHVzKGZlbmNlKSwgLUVJTyk7
CiAKIAlpZ3Rfc3Bpbl9mcmVlKGk5MTUsIHNwaW4pOwpAQCAtNDc5LDcgKzQ4MSw3IEBAIHN0YXRp
YyB2b2lkIHRlc3RfcHJvY2VzcyhpbnQgaTkxNSkKIAlmZW5jZSA9IHJlY3ZmZChzdlsxXSk7CiAJ
Y2xvc2Uoc3ZbMV0pOwogCi0JaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3dhaXQoZmVuY2UsIE1T
RUNfUEVSX1NFQyAvIDUpLCAwKTsKKwlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfd2FpdChmZW5j
ZSwgcmVzZXRfdGltZW91dF9tcyksIDApOwogCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV9zdGF0
dXMoZmVuY2UpLCAtRUlPKTsKIAljbG9zZShmZW5jZSk7CiAKQEAgLTUzMCw3ICs1MzIsNyBAQCBz
dGF0aWMgdm9pZCB0ZXN0X3Byb2Nlc3NfbWl4ZWQoaW50IGk5MTUsIHVuc2lnbmVkIGludCBlbmdp
bmUpCiAJY2xvc2Uoc3ZbMV0pOwogCiAJLyogRmlyc3QgZmVuY2UgaXMgbm9uLXBlcnNpc3RlbnQs
IHNvIHNob3VsZCBiZSByZXNldCAqLwotCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV93YWl0KGZl
bmNlWzBdLCBNU0VDX1BFUl9TRUMgLyA1KSwgMCk7CisJaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNl
X3dhaXQoZmVuY2VbMF0sIHJlc2V0X3RpbWVvdXRfbXMpLCAwKTsKIAlpZ3RfYXNzZXJ0X2VxKHN5
bmNfZmVuY2Vfc3RhdHVzKGZlbmNlWzBdKSwgLUVJTyk7CiAJY2xvc2UoZmVuY2VbMF0pOwogCkBA
IC02MDUsNyArNjA3LDcgQEAgc3RhdGljIHZvaWQgdGVzdF9wcm9jZXNzZXMoaW50IGk5MTUpCiAJ
CWlmIChpID09IDApIHsKIAkJCS8qIEZpcnN0IGZlbmNlIGlzIG5vbi1wZXJzaXN0ZW50LCBzbyBz
aG91bGQgYmUgcmVzZXQgKi8KIAkJCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV93YWl0KGZlbmNl
LAotCQkJCQkJICAgICAgTVNFQ19QRVJfU0VDIC8gNSksIDApOworCQkJCQkJICAgICAgcmVzZXRf
dGltZW91dF9tcyksIDApOwogCQkJaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3N0YXR1cyhmZW5j
ZSksIC1FSU8pOwogCQl9IGVsc2UgewogCQkJLyogU2Vjb25kIGZlbmNlIGlzIHBlcnNpc3RlbnQs
IHNvIHN0aWxsIHNwaW5uaW5nICovCkBAIC02NDUsMTEgKzY0NywxMSBAQCBzdGF0aWMgdm9pZCBf
X3Ntb2tlcihpbnQgaTkxNSwgdW5zaWduZWQgaW50IGVuZ2luZSwgaW50IGV4cGVjdGVkKQogCiAJ
aWd0X3NwaW5fZW5kKHNwaW4pOwogCi0JaWd0X2Fzc2VydF9lcShzeW5jX2ZlbmNlX3dhaXQoc3Bp
bi0+b3V0X2ZlbmNlLCBNU0VDX1BFUl9TRUMpLCAwKTsKKwlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVu
Y2Vfd2FpdChzcGluLT5vdXRfZmVuY2UsIHJlc2V0X3RpbWVvdXRfbXMpLCAwKTsKIAlpZ3RfYXNz
ZXJ0X2VxKHN5bmNfZmVuY2Vfc3RhdHVzKHNwaW4tPm91dF9mZW5jZSksIGV4cGVjdGVkKTsKIAog
CWlmIChmZW5jZSAhPSAtMSkgewotCQlpZ3RfYXNzZXJ0X2VxKHN5bmNfZmVuY2Vfd2FpdChmZW5j
ZSwgTVNFQ19QRVJfU0VDKSwgMCk7CisJCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV93YWl0KGZl
bmNlLCByZXNldF90aW1lb3V0X21zKSwgMCk7CiAJCWlndF9hc3NlcnRfZXEoc3luY19mZW5jZV9z
dGF0dXMoZmVuY2UpLCBleHBlY3RlZCk7CiAJCWNsb3NlKGZlbmNlKTsKIAl9Ci0tIAoyLjI0LjAK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdm
eCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

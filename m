Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 24CD1EA3FF
	for <lists+intel-gfx@lfdr.de>; Wed, 30 Oct 2019 20:22:28 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5655E6EB50;
	Wed, 30 Oct 2019 19:22:25 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A914E6ED06
 for <intel-gfx@lists.freedesktop.org>; Wed, 30 Oct 2019 19:22:13 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19024458-1500050 
 for multiple; Wed, 30 Oct 2019 19:22:01 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 30 Oct 2019 19:21:52 +0000
Message-Id: <20191030192159.18404-4-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0.rc1
In-Reply-To: <20191030192159.18404-1-chris@chris-wilson.co.uk>
References: <20191030192159.18404-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 04/11] drm/i915/gt: Move user_forcewake
 application to GT
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UgYWxyZWFkeSB0cmFjayB0aGUgZGVidWdmcyB1c2VyX2ZvcmNld2FrZSBvbiB0aGUgR1QsIHNv
IGl0IGlzIG5hdHVyYWwKdG8gcHVsbCB0aGUgc3VzcGVuZC9yZXN1bWUgaGFuZGxpbmcgdW5kZXIg
Z3QvIGFzIHdlbGwuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdp
bHNvbi5jby51az4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcG0uYyB8
IDIyIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2d0X3BtLmMgIHwgMjIgKysrKysrKysrKysrKysrKysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCAy
MiBpbnNlcnRpb25zKCspLCAyMiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9wbS5jCmluZGV4IDY0ZGQwNGFlM2Q1Ny4uNjc3OWFiMzQxMDFiIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcG0uYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcG0uYwpAQCAtMTEsMjQgKzExLDYgQEAKIAogI2luY2x1
ZGUgImk5MTVfZHJ2LmgiCiAKLXN0YXRpYyB2b2lkIHVzZXJfZm9yY2V3YWtlKHN0cnVjdCBpbnRl
bF9ndCAqZ3QsIGJvb2wgc3VzcGVuZCkKLXsKLQlpbnQgY291bnQgPSBhdG9taWNfcmVhZCgmZ3Qt
PnVzZXJfd2FrZXJlZik7Ci0KLQkvKiBJbnNpZGUgc3VzcGVuZC9yZXN1bWUgc28gc2luZ2xlIHRo
cmVhZGVkLCBubyByYWNlcyB0byB3b3JyeSBhYm91dC4gKi8KLQlpZiAobGlrZWx5KCFjb3VudCkp
Ci0JCXJldHVybjsKLQotCWludGVsX2d0X3BtX2dldChndCk7Ci0JaWYgKHN1c3BlbmQpIHsKLQkJ
R0VNX0JVR19PTihjb3VudCA+IGF0b21pY19yZWFkKCZndC0+d2FrZXJlZi5jb3VudCkpOwotCQlh
dG9taWNfc3ViKGNvdW50LCAmZ3QtPndha2VyZWYuY291bnQpOwotCX0gZWxzZSB7Ci0JCWF0b21p
Y19hZGQoY291bnQsICZndC0+d2FrZXJlZi5jb3VudCk7Ci0JfQotCWludGVsX2d0X3BtX3B1dChn
dCk7Ci19Ci0KIHZvaWQgaTkxNV9nZW1fc3VzcGVuZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSkKIHsKIAlHRU1fVFJBQ0UoIlxuIik7CkBAIC0zNiw4ICsxOCw2IEBAIHZvaWQgaTkxNV9n
ZW1fc3VzcGVuZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAlpbnRlbF93YWtlcmVm
X2F1dG8oJmk5MTUtPmdndHQudXNlcmZhdWx0X3dha2VyZWYsIDApOwogCWZsdXNoX3dvcmtxdWV1
ZShpOTE1LT53cSk7CiAKLQl1c2VyX2ZvcmNld2FrZSgmaTkxNS0+Z3QsIHRydWUpOwotCiAJLyoK
IAkgKiBXZSBoYXZlIHRvIGZsdXNoIGFsbCB0aGUgZXhlY3V0aW5nIGNvbnRleHRzIHRvIG1haW4g
bWVtb3J5IHNvCiAJICogdGhhdCB0aGV5IGNhbiBzYXZlZCBpbiB0aGUgaGliZXJuYXRpb24gaW1h
Z2UuIFRvIGVuc3VyZSB0aGUgbGFzdApAQCAtMTMyLDggKzExMiw2IEBAIHZvaWQgaTkxNV9nZW1f
cmVzdW1lKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCWlmIChpbnRlbF9ndF9yZXN1
bWUoJmk5MTUtPmd0KSkKIAkJZ290byBlcnJfd2VkZ2VkOwogCi0JdXNlcl9mb3JjZXdha2UoJmk5
MTUtPmd0LCBmYWxzZSk7Ci0KIG91dF91bmxvY2s6CiAJaW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9w
dXQoJmk5MTUtPnVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7CiAJcmV0dXJuOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2d0X3BtLmMKaW5kZXggMTY3OWY0Zjc4ZDY1Li4xMTY2MWRlOGM0MGIgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X3BtLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfcG0uYwpAQCAtMTgsNiArMTgsMjQgQEAKICNp
bmNsdWRlICJpbnRlbF9ycHMuaCIKICNpbmNsdWRlICJpbnRlbF93YWtlcmVmLmgiCiAKK3N0YXRp
YyB2b2lkIHVzZXJfZm9yY2V3YWtlKHN0cnVjdCBpbnRlbF9ndCAqZ3QsIGJvb2wgc3VzcGVuZCkK
K3sKKwlpbnQgY291bnQgPSBhdG9taWNfcmVhZCgmZ3QtPnVzZXJfd2FrZXJlZik7CisKKwkvKiBJ
bnNpZGUgc3VzcGVuZC9yZXN1bWUgc28gc2luZ2xlIHRocmVhZGVkLCBubyByYWNlcyB0byB3b3Jy
eSBhYm91dC4gKi8KKwlpZiAobGlrZWx5KCFjb3VudCkpCisJCXJldHVybjsKKworCWludGVsX2d0
X3BtX2dldChndCk7CisJaWYgKHN1c3BlbmQpIHsKKwkJR0VNX0JVR19PTihjb3VudCA+IGF0b21p
Y19yZWFkKCZndC0+d2FrZXJlZi5jb3VudCkpOworCQlhdG9taWNfc3ViKGNvdW50LCAmZ3QtPndh
a2VyZWYuY291bnQpOworCX0gZWxzZSB7CisJCWF0b21pY19hZGQoY291bnQsICZndC0+d2FrZXJl
Zi5jb3VudCk7CisJfQorCWludGVsX2d0X3BtX3B1dChndCk7Cit9CisKIHN0YXRpYyBpbnQgX19n
dF91bnBhcmsoc3RydWN0IGludGVsX3dha2VyZWYgKndmKQogewogCXN0cnVjdCBpbnRlbF9ndCAq
Z3QgPSBjb250YWluZXJfb2Yod2YsIHR5cGVvZigqZ3QpLCB3YWtlcmVmKTsKQEAgLTIxMCw2ICsy
MjgsOCBAQCBpbnQgaW50ZWxfZ3RfcmVzdW1lKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiAKIAlpbnRl
bF91Y19yZXN1bWUoJmd0LT51Yyk7CiAKKwl1c2VyX2ZvcmNld2FrZShndCwgZmFsc2UpOworCiAJ
aW50ZWxfdW5jb3JlX2ZvcmNld2FrZV9wdXQoZ3QtPnVuY29yZSwgRk9SQ0VXQUtFX0FMTCk7CiAJ
aW50ZWxfZ3RfcG1fcHV0KGd0KTsKIApAQCAtMjMzLDYgKzI1Myw4IEBAIHZvaWQgaW50ZWxfZ3Rf
c3VzcGVuZChzdHJ1Y3QgaW50ZWxfZ3QgKmd0KQogewogCWludGVsX3dha2VyZWZfdCB3YWtlcmVm
OwogCisJdXNlcl9mb3JjZXdha2UoZ3QsIHRydWUpOworCiAJLyogV2UgZXhwZWN0IHRvIGJlIGlk
bGUgYWxyZWFkeTsgYnV0IGFsc28gd2FudCB0byBiZSBpbmRlcGVuZGVudCAqLwogCXdhaXRfZm9y
X2lkbGUoZ3QpOwogCi0tIAoyLjI0LjAucmMxCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9pbnRlbC1nZng=

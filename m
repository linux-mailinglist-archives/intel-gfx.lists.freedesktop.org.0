Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4247910EE8
	for <lists+intel-gfx@lfdr.de>; Thu,  2 May 2019 00:04:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E9B9389229;
	Wed,  1 May 2019 22:04:17 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CE4AF89229
 for <intel-gfx@lists.freedesktop.org>; Wed,  1 May 2019 22:04:15 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 01 May 2019 15:04:15 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.60,419,1549958400"; d="scan'208";a="140491927"
Received: from dceraolo-linux.fm.intel.com (HELO [10.1.27.145]) ([10.1.27.145])
 by orsmga006.jf.intel.com with ESMTP; 01 May 2019 15:04:14 -0700
To: Stuart Summers <stuart.summers@intel.com>, intel-gfx@lists.freedesktop.org
References: <20190501153450.30494-1-stuart.summers@intel.com>
 <20190501153450.30494-7-stuart.summers@intel.com>
From: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Message-ID: <a3268e42-287e-b054-64dc-f05a29454887@intel.com>
Date: Wed, 1 May 2019 15:04:25 -0700
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.4.0
MIME-Version: 1.0
In-Reply-To: <20190501153450.30494-7-stuart.summers@intel.com>
Content-Language: en-US
Subject: Re: [Intel-gfx] [PATCH 6/6] drm/i915: Expand subslice mask
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

CgpPbiA1LzEvMTkgODozNCBBTSwgU3R1YXJ0IFN1bW1lcnMgd3JvdGU6Cj4gQ3VycmVudGx5LCB0
aGUgc3Vic2xpY2VfbWFzayBydW50aW1lIHBhcmFtZXRlciBpcyBzdG9yZWQgYXMgYW4KPiBhcnJh
eSBvZiBzdWJzbGljZXMgcGVyIHNsaWNlLiBFeHBhbmQgdGhlIHN1YnNsaWNlIG1hc2sgYXJyYXkg
dG8KPiBiZXR0ZXIgbWF0Y2ggd2hhdCBpcyBwcmVzZW50ZWQgdG8gdXNlcnNwYWNlIHRocm91Z2gg
dGhlCj4gSTkxNV9RVUVSWV9UT1BPTE9HWV9JTkZPIGlvY3RsLiBUaGUgaW5kZXggaW50byB0aGlz
IGFycmF5IGlzCj4gdGhlbiBjYWxjdWxhdGVkOgo+ICAgIHNsaWNlICogc3Vic2xpY2Ugc3RyaWRl
ICsgc3Vic2xpY2UgaW5kZXggLyA4Cj4gCj4gdjI6IGZpeCBzcGFjaW5nIGluIHNldF9zc2V1X2lu
Zm8gYXJncwo+ICAgICAgdXNlIHNldF9zc2V1X2luZm8gdG8gaW5pdGlhbGl6ZSBzc2V1IGRhdGEg
d2hlbiBidWlsZGluZwo+ICAgICAgZGV2aWNlIHN0YXR1cyBpbiBkZWJ1Z2ZzCj4gICAgICByZW5h
bWUgdmFyaWFibGVzIGluIGludGVsX2VuZ2luZV90eXBlcy5oIHRvIGF2b2lkIGNoZWNrcGF0Y2gK
PiAgICAgIHdhcm5pbmdzCj4gdjM6IHVwZGF0ZSBoZWFkZXJzIGluIGludGVsX3NzZXUuaAo+IHY0
OiBhZGQgY29uc3QgdG8gc29tZSBzc2V1X2Rldl9pbmZvIHZhcmlhYmxlcwo+ICAgICAgdXNlIHNz
ZXUtPmV1X3N0cmlkZSBmb3IgRVUgc3RyaWRlIGNhbGN1bGF0aW9ucwo+IAo+IENjOiBEYW5pZWxl
IENlcmFvbG8gU3B1cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29tPgo+IFNpZ25l
ZC1vZmYtYnk6IFN0dWFydCBTdW1tZXJzIDxzdHVhcnQuc3VtbWVyc0BpbnRlbC5jb20+CgpDYW4g
eW91IGFsc28gZ2V0IGFuIGFjayBmcm9tIExpb25lbCwgdG8gbWFrZSBzdXJlIHRoaXMgYWxsIGZp
dHMgd2l0aCB0aGUgCmV4cGVjdGVkIHJlcG9ydGluZz8KCj4gLS0tCj4gICBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyAgICB8ICAgNiArLQo+ICAgZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmggfCAgMzIgKysrLS0KPiAgIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2hhbmdjaGVjay5jICAgIHwgICAzICstCj4gICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmMgICAgICAgICB8ICA0OSArKysrKy0tCj4gICBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmggICAgICAgICB8ICAxNiArKy0KPiAg
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMgIHwgICAyICstCj4g
ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYyAgICAgICAgICB8ICA0NCArKyst
LS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgICAgICAgICAgICAgIHwgICA2
ICstCj4gICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dwdV9lcnJvci5jICAgICAgICB8ICAg
NSArLQo+ICAgZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9xdWVyeS5jICAgICAgICAgICAgfCAg
MTAgKy0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMgICAgIHwg
MTQyICsrKysrKysrKysrLS0tLS0tLS0KPiAgIDExIGZpbGVzIGNoYW5nZWQsIDE5OCBpbnNlcnRp
b25zKCspLCAxMTcgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lX2NzLmMKPiBpbmRleCA2ZTQwZjhlYTlhNmEuLjhmNzk2N2NjOWE1MCAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCj4gQEAgLTkxNCw3ICs5
MTQsNyBAQCB1MzIgaW50ZWxfY2FsY3VsYXRlX21jcl9zX3NzX3NlbGVjdChzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCj4gICAJY29uc3Qgc3RydWN0IHNzZXVfZGV2X2luZm8gKnNz
ZXUgPSAmUlVOVElNRV9JTkZPKGRldl9wcml2KS0+c3NldTsKPiAgIAl1MzIgbWNyX3Nfc3Nfc2Vs
ZWN0Owo+ICAgCXUzMiBzbGljZSA9IGZscyhzc2V1LT5zbGljZV9tYXNrKTsKPiAtCXUzMiBzdWJz
bGljZSA9IGZscyhzc2V1LT5zdWJzbGljZV9tYXNrW3NsaWNlXSk7Cj4gKwl1MzIgc3Vic2xpY2Ug
PSBmbHMoc3NldS0+c3Vic2xpY2VfbWFza1tzbGljZSAqIHNzZXUtPnNzX3N0cmlkZV0pOwoKVGhp
cyAoYW5kIHRoZSByZWdpc3RlcnMgd2UgdXNlIGJlbG93KSBvbmx5IHdvcmtzIGlmIHNzX3N0cmlk
ZSA9IDEuIENhbiAKd2UgYWRkIGE6CgoJR0VNX0JVR19PTihzc2V1LT5zc19zdHJpZGUgPiAxKTsK
CnRvIGNhdGNoIHRoZSBmYWN0IHRoYXQgdGhpcyBmdW5jdGlvbiB3aWxsIG5lZWQgdXBkYXRpbmcg
dG8gaGFuZGxlIHRoYXQgCmNhc2UgaWYvd2hlbiB3ZSBnZXQgaXQ/Cgo+ICAgCj4gICAJaWYgKElT
X0dFTihkZXZfcHJpdiwgMTApKQo+ICAgCQltY3Jfc19zc19zZWxlY3QgPSBHRU44X01DUl9TTElD
RShzbGljZSkgfAo+IEBAIC05OTAsNiArOTkwLDcgQEAgdm9pZCBpbnRlbF9lbmdpbmVfZ2V0X2lu
c3Rkb25lKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKPiAgIAkJCSAgICAgICBzdHJ1
Y3QgaW50ZWxfaW5zdGRvbmUgKmluc3Rkb25lKQo+ICAgewo+ICAgCXN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdiA9IGVuZ2luZS0+aTkxNTsKPiArCWNvbnN0IHN0cnVjdCBzc2V1X2Rl
dl9pbmZvICpzc2V1ID0gJlJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnNzZXU7Cj4gICAJc3RydWN0
IGludGVsX3VuY29yZSAqdW5jb3JlID0gZW5naW5lLT51bmNvcmU7Cj4gICAJdTMyIG1taW9fYmFz
ZSA9IGVuZ2luZS0+bW1pb19iYXNlOwo+ICAgCWludCBzbGljZTsKPiBAQCAtMTAwNyw3ICsxMDA4
LDggQEAgdm9pZCBpbnRlbF9lbmdpbmVfZ2V0X2luc3Rkb25lKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSwKPiAgIAo+ICAgCQlpbnN0ZG9uZS0+c2xpY2VfY29tbW9uID0KPiAgIAkJCWlu
dGVsX3VuY29yZV9yZWFkKHVuY29yZSwgR0VON19TQ19JTlNURE9ORSk7Cj4gLQkJZm9yX2VhY2hf
aW5zdGRvbmVfc2xpY2Vfc3Vic2xpY2UoZGV2X3ByaXYsIHNsaWNlLCBzdWJzbGljZSkgewo+ICsJ
CWZvcl9lYWNoX2luc3Rkb25lX3NsaWNlX3N1YnNsaWNlKGRldl9wcml2LCBzc2V1LCBzbGljZSwK
PiArCQkJCQkJIHN1YnNsaWNlKSB7Cj4gICAJCQlpbnN0ZG9uZS0+c2FtcGxlcltzbGljZV1bc3Vi
c2xpY2VdID0KPiAgIAkJCQlyZWFkX3N1YnNsaWNlX3JlZyhkZXZfcHJpdiwgc2xpY2UsIHN1YnNs
aWNlLAo+ICAgCQkJCQkJICBHRU43X1NBTVBMRVJfSU5TVERPTkUpOwo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCj4gaW5kZXggOWQ2NGUzM2Y4NDI3Li4x
NzEwNTQ2YTI0NDYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
ZW5naW5lX3R5cGVzLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdp
bmVfdHlwZXMuaAo+IEBAIC01MzQsMjAgKzUzNCwyMiBAQCBpbnRlbF9lbmdpbmVfbmVlZHNfYnJl
YWRjcnVtYl90YXNrbGV0KGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAg
IAlyZXR1cm4gZW5naW5lLT5mbGFncyAmIEk5MTVfRU5HSU5FX05FRURTX0JSRUFEQ1JVTUJfVEFT
S0xFVDsKPiAgIH0KPiAgIAo+IC0jZGVmaW5lIGluc3Rkb25lX3NsaWNlX21hc2soZGV2X3ByaXZf
XykgXAo+IC0JKElTX0dFTihkZXZfcHJpdl9fLCA3KSA/IFwKPiAtCSAxIDogUlVOVElNRV9JTkZP
KGRldl9wcml2X18pLT5zc2V1LnNsaWNlX21hc2spCj4gLQo+IC0jZGVmaW5lIGluc3Rkb25lX3N1
YnNsaWNlX21hc2soZGV2X3ByaXZfXykgXAo+IC0JKElTX0dFTihkZXZfcHJpdl9fLCA3KSA/IFwK
PiAtCSAxIDogUlVOVElNRV9JTkZPKGRldl9wcml2X18pLT5zc2V1LnN1YnNsaWNlX21hc2tbMF0p
Cj4gLQo+IC0jZGVmaW5lIGZvcl9lYWNoX2luc3Rkb25lX3NsaWNlX3N1YnNsaWNlKGRldl9wcml2
X18sIHNsaWNlX18sIHN1YnNsaWNlX18pIFwKPiAtCWZvciAoKHNsaWNlX18pID0gMCwgKHN1YnNs
aWNlX18pID0gMDsgXAo+IC0JICAgICAoc2xpY2VfXykgPCBJOTE1X01BWF9TTElDRVM7IFwKPiAt
CSAgICAgKHN1YnNsaWNlX18pID0gKChzdWJzbGljZV9fKSArIDEpIDwgSTkxNV9NQVhfU1VCU0xJ
Q0VTID8gKHN1YnNsaWNlX18pICsgMSA6IDAsIFwKPiAtCSAgICAgICAoc2xpY2VfXykgKz0gKChz
dWJzbGljZV9fKSA9PSAwKSkgXAo+IC0JCWZvcl9lYWNoX2lmKChCSVQoc2xpY2VfXykgJiBpbnN0
ZG9uZV9zbGljZV9tYXNrKGRldl9wcml2X18pKSAmJiBcCj4gLQkJCSAgICAoQklUKHN1YnNsaWNl
X18pICYgaW5zdGRvbmVfc3Vic2xpY2VfbWFzayhkZXZfcHJpdl9fKSkpCj4gKyNkZWZpbmUgaW5z
dGRvbmVfaGFzX3NsaWNlKGRldl9wcml2X19fLCBzc2V1X19fLCBzbGljZV9fXykgXAo+ICsJKChJ
U19HRU4oZGV2X3ByaXZfX18sIDcpID8gXAo+ICsJICAxIDogKHNzZXVfX18pLT5zbGljZV9tYXNr
KSAmIFwKCkknZCBwdXQgdGhlIHRlcm5hcnkgb3Agb24gdGhlIHNhbWUgbGluZSBoZXJlIGZvciBy
ZWFkYWJpbGl0eQoKPiArCUJJVChzbGljZV9fXykpIFwKCm5vIG5lZWQgZm9yICJcIiBoZXJlIChh
bmQgYmVsb3cpLgoKPiArCj4gKyNkZWZpbmUgaW5zdGRvbmVfaGFzX3N1YnNsaWNlKGRldl9wcml2
X18sIHNzZXVfXywgc2xpY2VfXywgc3Vic2xpY2VfXykgXAoKbmVlZCBzb21lIG1vcmUgcGFyZW50
aGVzaXMgaW4gdGhpcyBtYWNybyB0byBmaXggdGhlIE1BQ1JPX0FSR19QUkVDRURFTkNFIAp3YXJu
aW5nIGluIGNoZWNrcGF0Y2guCgo+ICsJKChJU19HRU4oZGV2X3ByaXZfXywgNykgPyBcCj4gKwkg
IDEgOiAoc3NldV9fKS0+c3Vic2xpY2VfbWFza1tzbGljZV9fICogKHNzZXVfXyktPnNzX3N0cmlk
ZSArIFwKPiArCQkJCSAgICAgIHN1YnNsaWNlX18gLyBCSVRTX1BFUl9CWVRFXSkgJiBcCgpUaGUg
Y2FsY3VsYXRpb24gdG8gZ2V0IHRoZSBjb3JyZWN0IHN1YnNsaWNlIHU4IGVudHJ5OgoKCXNzZXUt
PnN1YnNsaWNlX21hc2tbcyAqIHNzZXUtPnNzX3N0cmlkZSArIHNzIC8gQklUU19QRVJfQllURV0K
CnNlZW1zIHRvIGJlIHJlcGVhdGVkIGEgZmV3IHRpbWVzIGluIHRoaXMgcGF0Y2gsIHNvIGl0IG1p
Z2h0IGJlIHdvcnRoIAptb3ZpbmcgaXQgdG8gaXRzIG93biBpbmxpbmUgZnVuY3Rpb24uIGxvb2tz
IGxpa2UgeW91IGFsd2F5cyB1bHRpbWF0ZWx5IAp3YW50IGEgYm9vbCwgc28gd2UgY291bGQgYWxz
byBnbyBhIGJpdCBmdXJ0aGVyIGFuZCBoYXZlIHNvbWV0aGluZyBsaWtlOgoKc3RhdGljIGlubGlu
ZSBib29sIGludGVsX3NzZXVfaGFzX3N1YnNsaWNlKHNzZXUsIHMsIHNzKQp7Cgl1OCBtYXNrID0g
c3NldS0+c3Vic2xpY2VfbWFza1tzICogc3NldS0+c3Nfc3RyaWRlICsKCQkJCSAgICAgIHNzIC8g
QklUU19QRVJfQllURV07CgoJcmV0dXJuIG1hc2sgJiBCSVQoc3MgJSBCSVRTX1BFUl9CWVRFKTsK
fQoKYW5kIHRoZW4gZG86CgojZGVmaW5lIGluc3Rkb25lX2hhc19zdWJzbGljZShkZXZfcHJpdl9f
LCBzc2V1X18sIHNsaWNlX18sIHN1YnNsaWNlX18pIFwKCSgoSVNfR0VOKGRldl9wcml2X18sIDcp
ID8gc3Vic2xpY2VfXyA9PSAwIDogXAoJCWludGVsX3NzZXVfaGFzX3N1YnNsaWNlKC4uLikpCgo+
ICsJIEJJVChzdWJzbGljZV9fICUgQklUU19QRVJfQllURSkpIFwKPiArCj4gKyNkZWZpbmUgZm9y
X2VhY2hfaW5zdGRvbmVfc2xpY2Vfc3Vic2xpY2UoZGV2X3ByaXZfLCBzc2V1Xywgc2xpY2VfLCBz
dWJzbGljZV8pIFwKPiArCWZvciAoKHNsaWNlXykgPSAwLCAoc3Vic2xpY2VfKSA9IDA7IChzbGlj
ZV8pIDwgSTkxNV9NQVhfU0xJQ0VTOyBcCj4gKwkgICAgIChzdWJzbGljZV8pID0gKChzdWJzbGlj
ZV8pICsgMSkgPCBJOTE1X01BWF9TVUJTTElDRVMgPyAoc3Vic2xpY2VfKSArIDEgOiAwLCBcCgpU
aGlzIHRlcm5hcnkgb3Agc2hvdWxkIGJlIHNpbXBsaWZpYWJsZSBhczoKCgkoc3Vic2xpY2VfKSA9
ICgoc3Vic2xpY2VfKSArIDEpICUgSTkxNV9NQVhfU1VCU0xJQ0VTLAoKPiArCSAgICAgICAoc2xp
Y2VfKSArPSAoKHN1YnNsaWNlXykgPT0gMCkpIFwKPiArCQlmb3JfZWFjaF9pZihpbnN0ZG9uZV9o
YXNfc2xpY2UoZGV2X3ByaXZfLCBzc2V1Xywgc2xpY2UpICYmIFwKCm1pc3NpbmcgdGhlICJfIiBh
ZnRlciAic2xpY2UiCgo+ICsJCQkgICAgaW5zdGRvbmVfaGFzX3N1YnNsaWNlKGRldl9wcml2Xywg
c3NldV8sIHNsaWNlXywgc3Vic2xpY2VfKSkgXAo+ICAgCj4gICAjZW5kaWYgLyogX19JTlRFTF9F
TkdJTkVfVFlQRVNfSF9fICovCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2hhbmdjaGVjay5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfaGFuZ2No
ZWNrLmMKPiBpbmRleCBlNWVhYTA2ZmU3NGQuLjUzYzFjOTgxNjFlMSAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9oYW5nY2hlY2suYwo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2hhbmdjaGVjay5jCj4gQEAgLTUwLDYgKzUwLDcgQEAgc3Rh
dGljIGJvb2wgaW5zdGRvbmVfdW5jaGFuZ2VkKHUzMiBjdXJyZW50X2luc3Rkb25lLCB1MzIgKm9s
ZF9pbnN0ZG9uZSkKPiAgIHN0YXRpYyBib29sIHN1YnVuaXRzX3N0dWNrKHN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZSkKPiAgIHsKPiAgIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYgPSBlbmdpbmUtPmk5MTU7Cj4gKwljb25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3Nl
dSA9ICZSVU5USU1FX0lORk8oZGV2X3ByaXYpLT5zc2V1Owo+ICAgCXN0cnVjdCBpbnRlbF9pbnN0
ZG9uZSBpbnN0ZG9uZTsKPiAgIAlzdHJ1Y3QgaW50ZWxfaW5zdGRvbmUgKmFjY3VfaW5zdGRvbmUg
PSAmZW5naW5lLT5oYW5nY2hlY2suaW5zdGRvbmU7Cj4gICAJYm9vbCBzdHVjazsKPiBAQCAtNzEs
NyArNzIsNyBAQCBzdGF0aWMgYm9vbCBzdWJ1bml0c19zdHVjayhzdHJ1Y3QgaW50ZWxfZW5naW5l
X2NzICplbmdpbmUpCj4gICAJc3R1Y2sgJj0gaW5zdGRvbmVfdW5jaGFuZ2VkKGluc3Rkb25lLnNs
aWNlX2NvbW1vbiwKPiAgIAkJCQkgICAgJmFjY3VfaW5zdGRvbmUtPnNsaWNlX2NvbW1vbik7Cj4g
ICAKPiAtCWZvcl9lYWNoX2luc3Rkb25lX3NsaWNlX3N1YnNsaWNlKGRldl9wcml2LCBzbGljZSwg
c3Vic2xpY2UpIHsKPiArCWZvcl9lYWNoX2luc3Rkb25lX3NsaWNlX3N1YnNsaWNlKGRldl9wcml2
LCBzc2V1LCBzbGljZSwgc3Vic2xpY2UpIHsKPiAgIAkJc3R1Y2sgJj0gaW5zdGRvbmVfdW5jaGFu
Z2VkKGluc3Rkb25lLnNhbXBsZXJbc2xpY2VdW3N1YnNsaWNlXSwKPiAgIAkJCQkJICAgICZhY2N1
X2luc3Rkb25lLT5zYW1wbGVyW3NsaWNlXVtzdWJzbGljZV0pOwo+ICAgCQlzdHVjayAmPSBpbnN0
ZG9uZV91bmNoYW5nZWQoaW5zdGRvbmUucm93W3NsaWNlXVtzdWJzbGljZV0sCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX3NzZXUuYwo+IGluZGV4IDRhMGI4MmZjMTA4Yy4uNDkzMTZiN2VmMDc0
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuYwo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuYwo+IEBAIC04LDYgKzgsMTcg
QEAKPiAgICNpbmNsdWRlICJpbnRlbF9scmNfcmVnLmgiCj4gICAjaW5jbHVkZSAiaW50ZWxfc3Nl
dS5oIgo+ICAgCj4gK3ZvaWQgaW50ZWxfc3NldV9zZXRfaW5mbyhzdHJ1Y3Qgc3NldV9kZXZfaW5m
byAqc3NldSwgdTggbWF4X3NsaWNlcywKPiArCQkJIHU4IG1heF9zdWJzbGljZXMsIHU4IG1heF9l
dXNfcGVyX3N1YnNsaWNlKQo+ICt7Cj4gKwlzc2V1LT5tYXhfc2xpY2VzID0gbWF4X3NsaWNlczsK
PiArCXNzZXUtPm1heF9zdWJzbGljZXMgPSBtYXhfc3Vic2xpY2VzOwo+ICsJc3NldS0+bWF4X2V1
c19wZXJfc3Vic2xpY2UgPSBtYXhfZXVzX3Blcl9zdWJzbGljZTsKPiArCj4gKwlzc2V1LT5zc19z
dHJpZGUgPSBHRU5fU1NFVV9TVFJJREUoc3NldS0+bWF4X3N1YnNsaWNlcyk7Cj4gKwlzc2V1LT5l
dV9zdHJpZGUgPSBHRU5fU1NFVV9TVFJJREUoc3NldS0+bWF4X2V1c19wZXJfc3Vic2xpY2UpOwo+
ICt9Cj4gKwo+ICAgdW5zaWduZWQgaW50Cj4gICBpbnRlbF9zc2V1X3N1YnNsaWNlX3RvdGFsKGNv
bnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1KQo+ICAgewo+IEBAIC0yMiwxNyArMzMsMzkg
QEAgaW50ZWxfc3NldV9zdWJzbGljZV90b3RhbChjb25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAq
c3NldSkKPiAgIHVuc2lnbmVkIGludAo+ICAgaW50ZWxfc3NldV9zdWJzbGljZXNfcGVyX3NsaWNl
KGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1LCB1OCBzbGljZSkKCkhlcmUgd2UgcGFz
cyBzbGljZSBhcyB1OCwgYnV0IGJlbG93IHdlIHVzZSBpbnQuIEFueSByZWFzb24gZm9yIHRoZSAK
ZGlmZmVyZW5jZT8KCj4gICB7Cj4gLQlyZXR1cm4gaHdlaWdodDgoc3NldS0+c3Vic2xpY2VfbWFz
a1tzbGljZV0pOwo+ICsJdW5zaWduZWQgaW50IGksIHRvdGFsID0gMDsKPiArCj4gKwlmb3IgKGkg
PSAwOyBpIDwgc3NldS0+c3Nfc3RyaWRlOyBpKyspCj4gKwkJdG90YWwgKz0gaHdlaWdodDgoc3Nl
dS0+c3Vic2xpY2VfbWFza1tzbGljZSAqIHNzZXUtPnNzX3N0cmlkZSArCj4gKwkJCQkJCSAgICAg
IGldKTsKPiArCj4gKwlyZXR1cm4gdG90YWw7Cj4gK30KPiArCj4gK3ZvaWQgaW50ZWxfc3NldV9j
b3B5X3N1YnNsaWNlcyhjb25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSwgaW50IHNsaWNl
LAo+ICsJCQkgICAgICAgdTggKnRvX21hc2ssIGNvbnN0IHU4ICpmcm9tX21hc2spCgpZb3UgYWx3
YXlzIHVzZSBzc2V1LT5zdWJzbGljZV9tYXNrIGhhcyBhIGZyb21fbWFzaywgY2FuJ3Qgd2UganVz
dCBnZXQgCnRoYXQgZnJvbSB0aGUgc3NldSBwYXJhbSBhbmQgYXZvaWQgdGhlIGZyb21fbWFzaz8K
Cj4gK3sKPiArCWludCBvZmZzZXQgPSBzbGljZSAqIHNzZXUtPnNzX3N0cmlkZTsKPiArCj4gKwlt
ZW1jcHkoJnRvX21hc2tbb2Zmc2V0XSwgJmZyb21fbWFza1tvZmZzZXRdLCBzc2V1LT5zc19zdHJp
ZGUpOwo+ICt9Cj4gKwo+ICt2b2lkIGludGVsX3NzZXVfc2V0X3N1YnNsaWNlcyhzdHJ1Y3Qgc3Nl
dV9kZXZfaW5mbyAqc3NldSwgaW50IHNsaWNlLAo+ICsJCQkgICAgICB1MzIgc3NfbWFzaykKPiAr
ewo+ICsJaW50IGksIG9mZnNldCA9IHNsaWNlICogc3NldS0+c3Nfc3RyaWRlOwo+ICsKPiArCWZv
ciAoaSA9IDA7IGkgPCBzc2V1LT5zc19zdHJpZGU7IGkrKykKPiArCQlzc2V1LT5zdWJzbGljZV9t
YXNrW29mZnNldCArIGldID0KPiArCQkJKHNzX21hc2sgPj4gKEJJVFNfUEVSX0JZVEUgKiBpKSkg
JiAweGZmOwo+ICAgfQo+ICAgCj4gICBzdGF0aWMgaW50IGludGVsX3NzZXVfZXVfaWR4KGNvbnN0
IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1LCBpbnQgc2xpY2UsCj4gICAJCQkgICAgIGludCBz
dWJzbGljZSkKPiAgIHsKPiAtCWludCBzdWJzbGljZV9zdHJpZGUgPSBESVZfUk9VTkRfVVAoc3Nl
dS0+bWF4X2V1c19wZXJfc3Vic2xpY2UsCj4gLQkJCQkJICAgQklUU19QRVJfQllURSk7Cj4gLQlp
bnQgc2xpY2Vfc3RyaWRlID0gc3NldS0+bWF4X3N1YnNsaWNlcyAqIHN1YnNsaWNlX3N0cmlkZTsK
PiArCWludCBzbGljZV9zdHJpZGUgPSBzc2V1LT5tYXhfc3Vic2xpY2VzICogc3NldS0+ZXVfc3Ry
aWRlOwo+ICAgCj4gLQlyZXR1cm4gc2xpY2UgKiBzbGljZV9zdHJpZGUgKyBzdWJzbGljZSAqIHN1
YnNsaWNlX3N0cmlkZTsKPiArCXJldHVybiBzbGljZSAqIHNsaWNlX3N0cmlkZSArIHN1YnNsaWNl
ICogc3NldS0+ZXVfc3RyaWRlOwo+ICAgfQo+ICAgCj4gICB1MTYgaW50ZWxfc3NldV9nZXRfZXVz
KGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1LCBpbnQgc2xpY2UsCj4gQEAgLTQxLDgg
Kzc0LDcgQEAgdTE2IGludGVsX3NzZXVfZ2V0X2V1cyhjb25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5m
byAqc3NldSwgaW50IHNsaWNlLAo+ICAgCWludCBpLCBvZmZzZXQgPSBpbnRlbF9zc2V1X2V1X2lk
eChzc2V1LCBzbGljZSwgc3Vic2xpY2UpOwo+ICAgCXUxNiBldV9tYXNrID0gMDsKPiAgIAo+IC0J
Zm9yIChpID0gMDsKPiAtCSAgICAgaSA8IERJVl9ST1VORF9VUChzc2V1LT5tYXhfZXVzX3Blcl9z
dWJzbGljZSwgQklUU19QRVJfQllURSk7IGkrKykgewo+ICsJZm9yIChpID0gMDsgaSA8IHNzZXUt
PmV1X3N0cmlkZTsgaSsrKSB7Cj4gICAJCWV1X21hc2sgfD0gKCh1MTYpc3NldS0+ZXVfbWFza1tv
ZmZzZXQgKyBpXSkgPDwKPiAgIAkJCShpICogQklUU19QRVJfQllURSk7Cj4gICAJfQo+IEBAIC01
NSw4ICs4Nyw3IEBAIHZvaWQgaW50ZWxfc3NldV9zZXRfZXVzKHN0cnVjdCBzc2V1X2Rldl9pbmZv
ICpzc2V1LCBpbnQgc2xpY2UsIGludCBzdWJzbGljZSwKPiAgIHsKPiAgIAlpbnQgaSwgb2Zmc2V0
ID0gaW50ZWxfc3NldV9ldV9pZHgoc3NldSwgc2xpY2UsIHN1YnNsaWNlKTsKPiAgIAo+IC0JZm9y
IChpID0gMDsKPiAtCSAgICAgaSA8IERJVl9ST1VORF9VUChzc2V1LT5tYXhfZXVzX3Blcl9zdWJz
bGljZSwgQklUU19QRVJfQllURSk7IGkrKykgewo+ICsJZm9yIChpID0gMDsgaSA8IHNzZXUtPmV1
X3N0cmlkZTsgaSsrKSB7Cj4gICAJCXNzZXUtPmV1X21hc2tbb2Zmc2V0ICsgaV0gPQo+ICAgCQkJ
KGV1X21hc2sgPj4gKEJJVFNfUEVSX0JZVEUgKiBpKSkgJiAweGZmOwo+ICAgCX0KPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5oIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5oCj4gaW5kZXggNTZlMzcyMWFlODNmLi5iZjAxZjMzOGE4
Y2MgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5oCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5oCj4gQEAgLTksMTYgKzks
MTggQEAKPiAgIAo+ICAgI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+Cj4gICAjaW5jbHVkZSA8bGlu
dXgva2VybmVsLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9zdHJpbmcuaD4KPiAgIAo+ICAgc3RydWN0
IGRybV9pOTE1X3ByaXZhdGU7Cj4gICAKPiAgICNkZWZpbmUgR0VOX01BWF9TTElDRVMJCSg2KSAv
KiBDTkwgdXBwZXIgYm91bmQgKi8KPiAgICNkZWZpbmUgR0VOX01BWF9TVUJTTElDRVMJKDgpIC8q
IElDTCB1cHBlciBib3VuZCAqLwo+ICAgI2RlZmluZSBHRU5fU1NFVV9TVFJJREUoYml0cykgRElW
X1JPVU5EX1VQKGJpdHMsIEJJVFNfUEVSX0JZVEUpCj4gKyNkZWZpbmUgR0VOX01BWF9TVUJTTElD
RV9TVFJJREUgR0VOX1NTRVVfU1RSSURFKEdFTl9NQVhfU1VCU0xJQ0VTKQo+ICAgCj4gICBzdHJ1
Y3Qgc3NldV9kZXZfaW5mbyB7Cj4gICAJdTggc2xpY2VfbWFzazsKPiAtCXU4IHN1YnNsaWNlX21h
c2tbR0VOX01BWF9TTElDRVNdOwo+ICsJdTggc3Vic2xpY2VfbWFza1tHRU5fTUFYX1NMSUNFUyAq
IEdFTl9NQVhfU1VCU0xJQ0VfU1RSSURFXTsKPiAgIAl1MTYgZXVfdG90YWw7Cj4gICAJdTggZXVf
cGVyX3N1YnNsaWNlOwo+ICAgCXU4IG1pbl9ldV9pbl9wb29sOwo+IEBAIC0zMyw2ICszNSw5IEBA
IHN0cnVjdCBzc2V1X2Rldl9pbmZvIHsKPiAgIAl1OCBtYXhfc3Vic2xpY2VzOwo+ICAgCXU4IG1h
eF9ldXNfcGVyX3N1YnNsaWNlOwo+ICAgCj4gKwl1OCBzc19zdHJpZGU7Cj4gKwl1OCBldV9zdHJp
ZGU7Cj4gKwo+ICAgCS8qIFdlIGRvbid0IGhhdmUgbW9yZSB0aGFuIDggZXVzIHBlciBzdWJzbGlj
ZSBhdCB0aGUgbW9tZW50IGFuZCBhcyB3ZQo+ICAgCSAqIHN0b3JlIGV1cyBlbmFibGVkIHVzaW5n
IGJpdHMsIG5vIG5lZWQgdG8gbXVsdGlwbHkgYnkgZXVzIHBlcgo+ICAgCSAqIHN1YnNsaWNlLgo+
IEBAIC02MywxMiArNjgsMjEgQEAgaW50ZWxfc3NldV9mcm9tX2RldmljZV9pbmZvKGNvbnN0IHN0
cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1KQo+ICAgCXJldHVybiB2YWx1ZTsKPiAgIH0KPiAgIAo+
ICt2b2lkIGludGVsX3NzZXVfc2V0X2luZm8oc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUsIHU4
IG1heF9zbGljZXMsCj4gKwkJCSB1OCBtYXhfc3Vic2xpY2VzLCB1OCBtYXhfZXVzX3Blcl9zdWJz
bGljZSk7Cj4gKwo+ICAgdW5zaWduZWQgaW50Cj4gICBpbnRlbF9zc2V1X3N1YnNsaWNlX3RvdGFs
KGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1KTsKPiAgIAo+ICAgdW5zaWduZWQgaW50
Cj4gICBpbnRlbF9zc2V1X3N1YnNsaWNlc19wZXJfc2xpY2UoY29uc3Qgc3RydWN0IHNzZXVfZGV2
X2luZm8gKnNzZXUsIHU4IHNsaWNlKTsKPiAgIAo+ICt2b2lkIGludGVsX3NzZXVfY29weV9zdWJz
bGljZXMoY29uc3Qgc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUsIGludCBzbGljZSwKPiArCQkJ
ICAgICAgIHU4ICp0b19tYXNrLCBjb25zdCB1OCAqZnJvbV9tYXNrKTsKPiArCj4gK3ZvaWQgaW50
ZWxfc3NldV9zZXRfc3Vic2xpY2VzKHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1LCBpbnQgc2xp
Y2UsCj4gKwkJCSAgICAgIHUzMiBzc19tYXNrKTsKPiArCj4gICB1MTYgaW50ZWxfc3NldV9nZXRf
ZXVzKGNvbnN0IHN0cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1LCBpbnQgc2xpY2UsCj4gICAJCSAg
ICAgICBpbnQgc3Vic2xpY2UpOwo+ICAgCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF93b3JrYXJvdW5kcy5jCj4gaW5kZXggNDNlMjkwMzA2NTUxLi43YzdlOTU1NmMxYzUgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3VuZHMuYwo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMKPiBAQCAtNzY3
LDcgKzc2Nyw3IEBAIHdhX2luaXRfbWNyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBz
dHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwpCj4gICAJCXUzMiBzbGljZSA9IGZscyhzc2V1LT5zbGlj
ZV9tYXNrKTsKPiAgIAkJdTMyIGZ1c2UzID0KPiAgIAkJCWludGVsX3VuY29yZV9yZWFkKCZpOTE1
LT51bmNvcmUsIEdFTjEwX01JUlJPUl9GVVNFMyk7Cj4gLQkJdTggc3NfbWFzayA9IHNzZXUtPnN1
YnNsaWNlX21hc2tbc2xpY2VdOwo+ICsJCXU4IHNzX21hc2sgPSBzc2V1LT5zdWJzbGljZV9tYXNr
W3NsaWNlICogc3NldS0+c3Nfc3RyaWRlXTsKCmNvdWxkIHVzZSBhCgoJR0VNX0JVR19PTihzc2V1
LT5zc19zdHJpZGUgPiAxKTsKCmhlcmUgYXMgd2VsbCB0byByZW1pbmQgdXMgdGhpcyB3aWxsIG5l
ZWQgY2hhbmdlcyBpbiB0aGF0IGNhc2UKCj4gICAKPiAgIAkJdTggZW5hYmxlZF9tYXNrID0gKHNz
X21hc2sgfCBzc19tYXNrID4+Cj4gICAJCQkJICAgR0VOMTBfTDNCQU5LX1BBSVJfQ09VTlQpICYg
R0VOMTBfTDNCQU5LX01BU0s7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZGVidWdmcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kZWJ1Z2ZzLmMKPiBpbmRl
eCAzZjNlZTgzYWMzMTUuLjA4MDg5YzI0ZGIyNSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2RlYnVnZnMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZGVidWdmcy5jCj4gQEAgLTEyNTcsNiArMTI1Nyw3IEBAIHN0YXRpYyB2b2lkIGk5MTVfaW5zdGRv
bmVfaW5mbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gICAJCQkgICAgICAg
c3RydWN0IHNlcV9maWxlICptLAo+ICAgCQkJICAgICAgIHN0cnVjdCBpbnRlbF9pbnN0ZG9uZSAq
aW5zdGRvbmUpCj4gICB7Cj4gKwlzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSA9ICZSVU5USU1F
X0lORk8oZGV2X3ByaXYpLT5zc2V1Owo+ICAgCWludCBzbGljZTsKPiAgIAlpbnQgc3Vic2xpY2U7
Cj4gICAKPiBAQCAtMTI3MiwxMSArMTI3MywxMSBAQCBzdGF0aWMgdm9pZCBpOTE1X2luc3Rkb25l
X2luZm8oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAo+ICAgCWlmIChJTlRFTF9H
RU4oZGV2X3ByaXYpIDw9IDYpCj4gICAJCXJldHVybjsKPiAgIAo+IC0JZm9yX2VhY2hfaW5zdGRv
bmVfc2xpY2Vfc3Vic2xpY2UoZGV2X3ByaXYsIHNsaWNlLCBzdWJzbGljZSkKPiArCWZvcl9lYWNo
X2luc3Rkb25lX3NsaWNlX3N1YnNsaWNlKGRldl9wcml2LCBzc2V1LCBzbGljZSwgc3Vic2xpY2Up
Cj4gICAJCXNlcV9wcmludGYobSwgIlx0XHRTQU1QTEVSX0lOU1RET05FWyVkXVslZF06IDB4JTA4
eFxuIiwKPiAgIAkJCSAgIHNsaWNlLCBzdWJzbGljZSwgaW5zdGRvbmUtPnNhbXBsZXJbc2xpY2Vd
W3N1YnNsaWNlXSk7Cj4gICAKPiAtCWZvcl9lYWNoX2luc3Rkb25lX3NsaWNlX3N1YnNsaWNlKGRl
dl9wcml2LCBzbGljZSwgc3Vic2xpY2UpCj4gKwlmb3JfZWFjaF9pbnN0ZG9uZV9zbGljZV9zdWJz
bGljZShkZXZfcHJpdiwgc3NldSwgc2xpY2UsIHN1YnNsaWNlKQo+ICAgCQlzZXFfcHJpbnRmKG0s
ICJcdFx0Uk9XX0lOU1RET05FWyVkXVslZF06IDB4JTA4eFxuIiwKPiAgIAkJCSAgIHNsaWNlLCBz
dWJzbGljZSwgaW5zdGRvbmUtPnJvd1tzbGljZV1bc3Vic2xpY2VdKTsKPiAgIH0KPiBAQCAtNDA2
Niw3ICs0MDY3LDkgQEAgc3RhdGljIHZvaWQgZ2VuMTBfc3NldV9kZXZpY2Vfc3RhdHVzKHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiAgIAkJCWNvbnRpbnVlOwo+ICAgCj4gICAJ
CXNzZXUtPnNsaWNlX21hc2sgfD0gQklUKHMpOwo+IC0JCXNzZXUtPnN1YnNsaWNlX21hc2tbc10g
PSBpbmZvLT5zc2V1LnN1YnNsaWNlX21hc2tbc107Cj4gKwkJaW50ZWxfc3NldV9jb3B5X3N1YnNs
aWNlcygmaW5mby0+c3NldSwgcywKPiArCQkJCQkgIHNzZXUtPnN1YnNsaWNlX21hc2ssCj4gKwkJ
CQkJICBpbmZvLT5zc2V1LnN1YnNsaWNlX21hc2spOwo+ICAgCj4gICAJCWZvciAoc3MgPSAwOyBz
cyA8IGluZm8tPnNzZXUubWF4X3N1YnNsaWNlczsgc3MrKykgewo+ICAgCQkJdW5zaWduZWQgaW50
IGV1X2NudDsKPiBAQCAtNDExNywxOCArNDEyMCwyMiBAQCBzdGF0aWMgdm9pZCBnZW45X3NzZXVf
ZGV2aWNlX3N0YXR1cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gICAJCXNz
ZXUtPnNsaWNlX21hc2sgfD0gQklUKHMpOwo+ICAgCj4gICAJCWlmIChJU19HRU45X0JDKGRldl9w
cml2KSkKPiAtCQkJc3NldS0+c3Vic2xpY2VfbWFza1tzXSA9Cj4gLQkJCQlSVU5USU1FX0lORk8o
ZGV2X3ByaXYpLT5zc2V1LnN1YnNsaWNlX21hc2tbc107Cj4gKwkJCWludGVsX3NzZXVfY29weV9z
dWJzbGljZXMoJmluZm8tPnNzZXUsIHMsCj4gKwkJCQkJCSAgc3NldS0+c3Vic2xpY2VfbWFzaywK
PiArCQkJCQkJICBpbmZvLT5zc2V1LnN1YnNsaWNlX21hc2spOwo+ICAgCj4gICAJCWZvciAoc3Mg
PSAwOyBzcyA8IGluZm8tPnNzZXUubWF4X3N1YnNsaWNlczsgc3MrKykgewo+ICAgCQkJdW5zaWdu
ZWQgaW50IGV1X2NudDsKPiArCQkJdTggc3NfaWR4ID0gcyAqIGluZm8tPnNzZXUuc3Nfc3RyaWRl
ICsKPiArCQkJCSAgICBzcyAvIEJJVFNfUEVSX0JZVEU7Cj4gICAKPiAgIAkJCWlmIChJU19HRU45
X0xQKGRldl9wcml2KSkgewo+ICAgCQkJCWlmICghKHNfcmVnW3NdICYgKEdFTjlfUEdDVExfU1Nf
QUNLKHNzKSkpKQo+ICAgCQkJCQkvKiBza2lwIGRpc2FibGVkIHN1YnNsaWNlICovCj4gICAJCQkJ
CWNvbnRpbnVlOwo+ICAgCj4gLQkJCQlzc2V1LT5zdWJzbGljZV9tYXNrW3NdIHw9IEJJVChzcyk7
Cj4gKwkJCQlzc2V1LT5zdWJzbGljZV9tYXNrW3NzX2lkeF0gfD0KPiArCQkJCQlCSVQoc3MgJSBC
SVRTX1BFUl9CWVRFKTsKPiAgIAkJCX0KPiAgIAo+ICAgCQkJZXVfY250ID0gMiAqIGh3ZWlnaHQz
MihldV9yZWdbMipzICsgc3MvMl0gJgo+IEBAIC00MTQ1LDI1ICs0MTUyLDI0IEBAIHN0YXRpYyB2
b2lkIGdlbjlfc3NldV9kZXZpY2Vfc3RhdHVzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiwKPiAgIHN0YXRpYyB2b2lkIGJyb2Fkd2VsbF9zc2V1X2RldmljZV9zdGF0dXMoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAo+ICAgCQkJCQkgc3RydWN0IHNzZXVfZGV2X2lu
Zm8gKnNzZXUpCj4gICB7Cj4gKwlzdHJ1Y3QgaW50ZWxfcnVudGltZV9pbmZvICppbmZvID0gUlVO
VElNRV9JTkZPKGRldl9wcml2KTsKPiAgIAl1MzIgc2xpY2VfaW5mbyA9IEk5MTVfUkVBRChHRU44
X0dUX1NMSUNFX0lORk8pOwo+ICAgCWludCBzOwo+ICAgCj4gICAJc3NldS0+c2xpY2VfbWFzayA9
IHNsaWNlX2luZm8gJiBHRU44X0xTTElDRVNUQVRfTUFTSzsKPiAgIAo+ICAgCWlmIChzc2V1LT5z
bGljZV9tYXNrKSB7Cj4gLQkJc3NldS0+ZXVfcGVyX3N1YnNsaWNlID0KPiAtCQkJUlVOVElNRV9J
TkZPKGRldl9wcml2KS0+c3NldS5ldV9wZXJfc3Vic2xpY2U7Cj4gLQkJZm9yIChzID0gMDsgcyA8
IGZscyhzc2V1LT5zbGljZV9tYXNrKTsgcysrKSB7Cj4gLQkJCXNzZXUtPnN1YnNsaWNlX21hc2tb
c10gPQo+IC0JCQkJUlVOVElNRV9JTkZPKGRldl9wcml2KS0+c3NldS5zdWJzbGljZV9tYXNrW3Nd
Owo+IC0JCX0KPiArCQlzc2V1LT5ldV9wZXJfc3Vic2xpY2UgPSBpbmZvLT5zc2V1LmV1X3Blcl9z
dWJzbGljZTsKPiArCQlmb3IgKHMgPSAwOyBzIDwgZmxzKHNzZXUtPnNsaWNlX21hc2spOyBzKysp
Cj4gKwkJCWludGVsX3NzZXVfY29weV9zdWJzbGljZXMoJmluZm8tPnNzZXUsIHMsCj4gKwkJCQkJ
CSAgc3NldS0+c3Vic2xpY2VfbWFzaywKPiArCQkJCQkJICBpbmZvLT5zc2V1LnN1YnNsaWNlX21h
c2spOwo+ICAgCQlzc2V1LT5ldV90b3RhbCA9IHNzZXUtPmV1X3Blcl9zdWJzbGljZSAqCj4gICAJ
CQkJIGludGVsX3NzZXVfc3Vic2xpY2VfdG90YWwoc3NldSk7Cj4gICAKPiAgIAkJLyogc3VidHJh
Y3QgZnVzZWQgb2ZmIEVVKHMpIGZyb20gZW5hYmxlZCBzbGljZShzKSAqLwo+ICAgCQlmb3IgKHMg
PSAwOyBzIDwgZmxzKHNzZXUtPnNsaWNlX21hc2spOyBzKyspIHsKPiAtCQkJdTggc3Vic2xpY2Vf
N2V1ID0KPiAtCQkJCVJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnNzZXUuc3Vic2xpY2VfN2V1W3Nd
Owo+ICsJCQl1OCBzdWJzbGljZV83ZXUgPSBpbmZvLT5zc2V1LnN1YnNsaWNlXzdldVtzXTsKPiAg
IAo+ICAgCQkJc3NldS0+ZXVfdG90YWwgLT0gaHdlaWdodDgoc3Vic2xpY2VfN2V1KTsKPiAgIAkJ
fQo+IEBAIC00MjEwLDYgKzQyMTYsNyBAQCBzdGF0aWMgdm9pZCBpOTE1X3ByaW50X3NzZXVfaW5m
byhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIGJvb2wgaXNfYXZhaWxhYmxlX2luZm8sCj4gICBzdGF0aWMg
aW50IGk5MTVfc3NldV9zdGF0dXMoc3RydWN0IHNlcV9maWxlICptLCB2b2lkICp1bnVzZWQpCj4g
ICB7Cj4gICAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gbm9kZV90b19pOTE1
KG0tPnByaXZhdGUpOwo+ICsJY29uc3Qgc3RydWN0IGludGVsX3J1bnRpbWVfaW5mbyAqaW5mbyA9
IFJVTlRJTUVfSU5GTyhkZXZfcHJpdik7Cj4gICAJc3RydWN0IHNzZXVfZGV2X2luZm8gc3NldTsK
PiAgIAlpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZjsKPiAgIAo+IEBAIC00MjE3LDE0ICs0MjI0LDEz
IEBAIHN0YXRpYyBpbnQgaTkxNV9zc2V1X3N0YXR1cyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQg
KnVudXNlZCkKPiAgIAkJcmV0dXJuIC1FTk9ERVY7Cj4gICAKPiAgIAlzZXFfcHV0cyhtLCAiU1NF
VSBEZXZpY2UgSW5mb1xuIik7Cj4gLQlpOTE1X3ByaW50X3NzZXVfaW5mbyhtLCB0cnVlLCAmUlVO
VElNRV9JTkZPKGRldl9wcml2KS0+c3NldSk7Cj4gKwlpOTE1X3ByaW50X3NzZXVfaW5mbyhtLCB0
cnVlLCAmaW5mby0+c3NldSk7Cj4gICAKPiAgIAlzZXFfcHV0cyhtLCAiU1NFVSBEZXZpY2UgU3Rh
dHVzXG4iKTsKPiAgIAltZW1zZXQoJnNzZXUsIDAsIHNpemVvZihzc2V1KSk7Cj4gLQlzc2V1Lm1h
eF9zbGljZXMgPSBSVU5USU1FX0lORk8oZGV2X3ByaXYpLT5zc2V1Lm1heF9zbGljZXM7Cj4gLQlz
c2V1Lm1heF9zdWJzbGljZXMgPSBSVU5USU1FX0lORk8oZGV2X3ByaXYpLT5zc2V1Lm1heF9zdWJz
bGljZXM7Cj4gLQlzc2V1Lm1heF9ldXNfcGVyX3N1YnNsaWNlID0KPiAtCQlSVU5USU1FX0lORk8o
ZGV2X3ByaXYpLT5zc2V1Lm1heF9ldXNfcGVyX3N1YnNsaWNlOwo+ICsJaW50ZWxfc3NldV9zZXRf
aW5mbygmc3NldSwgaW5mby0+c3NldS5tYXhfc2xpY2VzLAo+ICsJCQkgICAgaW5mby0+c3NldS5t
YXhfc3Vic2xpY2VzLAo+ICsJCQkgICAgaW5mby0+c3NldS5tYXhfZXVzX3Blcl9zdWJzbGljZSk7
Cj4gICAKPiAgIAl3aXRoX2ludGVsX3J1bnRpbWVfcG0oZGV2X3ByaXYsIHdha2VyZWYpIHsKPiAg
IAkJaWYgKElTX0NIRVJSWVZJRVcoZGV2X3ByaXYpKQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwo+
IGluZGV4IDEzMGM1MTQwZGIwZC4uNmFmZTRlM2FmZWE0IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2Rydi5jCj4gQEAgLTMyNiw3ICszMjYsNyBAQCBzdGF0aWMgaW50IGk5MTVfZ2V0cGFyYW1faW9j
dGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKPiAgIAlzdHJ1Y3QgcGNpX2Rl
diAqcGRldiA9IGRldl9wcml2LT5kcm0ucGRldjsKPiAgIAljb25zdCBzdHJ1Y3Qgc3NldV9kZXZf
aW5mbyAqc3NldSA9ICZSVU5USU1FX0lORk8oZGV2X3ByaXYpLT5zc2V1Owo+ICAgCWRybV9pOTE1
X2dldHBhcmFtX3QgKnBhcmFtID0gZGF0YTsKPiAtCWludCB2YWx1ZTsKPiArCWludCB2YWx1ZSA9
IDA7Cj4gICAKPiAgIAlzd2l0Y2ggKHBhcmFtLT5wYXJhbSkgewo+ICAgCWNhc2UgSTkxNV9QQVJB
TV9JUlFfQUNUSVZFOgo+IEBAIC00NTUsNyArNDU1LDkgQEAgc3RhdGljIGludCBpOTE1X2dldHBh
cmFtX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCj4gICAJCQlyZXR1
cm4gLUVOT0RFVjsKPiAgIAkJYnJlYWs7Cj4gICAJY2FzZSBJOTE1X1BBUkFNX1NVQlNMSUNFX01B
U0s6Cj4gLQkJdmFsdWUgPSBzc2V1LT5zdWJzbGljZV9tYXNrWzBdOwo+ICsJCS8qIE9ubHkgY29w
eSBiaXRzIGZyb20gdGhlIGZpcnN0IHN1YnNsaWNlICovCgpzL3N1YnNsaWNlL3NsaWNlLyA/Cgo+
ICsJCW1lbWNweSgmdmFsdWUsIHNzZXUtPnN1YnNsaWNlX21hc2ssCj4gKwkJICAgICAgIG1pbihz
c2V1LT5zc19zdHJpZGUsICh1OClzaXplb2YodmFsdWUpKSk7Cj4gICAJCWlmICghdmFsdWUpCj4g
ICAJCQlyZXR1cm4gLUVOT0RFVjsKPiAgIAkJYnJlYWs7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dwdV9lcnJvci5jCj4gaW5kZXggZTFiODU4YmQxZDMyLi4xNDA5MThkZDliN2QgMTAwNjQ0Cj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9ncHVfZXJyb3IuYwo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZ3B1X2Vycm9yLmMKPiBAQCAtNDA3LDYgKzQwNyw3IEBAIHN0
YXRpYyB2b2lkIHByaW50X2Vycm9yX2J1ZmZlcnMoc3RydWN0IGRybV9pOTE1X2Vycm9yX3N0YXRl
X2J1ZiAqbSwKPiAgIHN0YXRpYyB2b2lkIGVycm9yX3ByaW50X2luc3Rkb25lKHN0cnVjdCBkcm1f
aTkxNV9lcnJvcl9zdGF0ZV9idWYgKm0sCj4gICAJCQkJIGNvbnN0IHN0cnVjdCBkcm1faTkxNV9l
cnJvcl9lbmdpbmUgKmVlKQo+ICAgewo+ICsJc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUgPSAm
UlVOVElNRV9JTkZPKG0tPmk5MTUpLT5zc2V1Owo+ICAgCWludCBzbGljZTsKPiAgIAlpbnQgc3Vi
c2xpY2U7Cj4gICAKPiBAQCAtNDIyLDEyICs0MjMsMTIgQEAgc3RhdGljIHZvaWQgZXJyb3JfcHJp
bnRfaW5zdGRvbmUoc3RydWN0IGRybV9pOTE1X2Vycm9yX3N0YXRlX2J1ZiAqbSwKPiAgIAlpZiAo
SU5URUxfR0VOKG0tPmk5MTUpIDw9IDYpCj4gICAJCXJldHVybjsKPiAgIAo+IC0JZm9yX2VhY2hf
aW5zdGRvbmVfc2xpY2Vfc3Vic2xpY2UobS0+aTkxNSwgc2xpY2UsIHN1YnNsaWNlKQo+ICsJZm9y
X2VhY2hfaW5zdGRvbmVfc2xpY2Vfc3Vic2xpY2UobS0+aTkxNSwgc3NldSwgc2xpY2UsIHN1YnNs
aWNlKQo+ICAgCQllcnJfcHJpbnRmKG0sICIgIFNBTVBMRVJfSU5TVERPTkVbJWRdWyVkXTogMHgl
MDh4XG4iLAo+ICAgCQkJICAgc2xpY2UsIHN1YnNsaWNlLAo+ICAgCQkJICAgZWUtPmluc3Rkb25l
LnNhbXBsZXJbc2xpY2VdW3N1YnNsaWNlXSk7Cj4gICAKPiAtCWZvcl9lYWNoX2luc3Rkb25lX3Ns
aWNlX3N1YnNsaWNlKG0tPmk5MTUsIHNsaWNlLCBzdWJzbGljZSkKPiArCWZvcl9lYWNoX2luc3Rk
b25lX3NsaWNlX3N1YnNsaWNlKG0tPmk5MTUsIHNzZXUsIHNsaWNlLCBzdWJzbGljZSkKPiAgIAkJ
ZXJyX3ByaW50ZihtLCAiICBST1dfSU5TVERPTkVbJWRdWyVkXTogMHglMDh4XG4iLAo+ICAgCQkJ
ICAgc2xpY2UsIHN1YnNsaWNlLAo+ICAgCQkJICAgZWUtPmluc3Rkb25lLnJvd1tzbGljZV1bc3Vi
c2xpY2VdKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9xdWVyeS5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9xdWVyeS5jCj4gaW5kZXggN2MxNzA4YzIyODEx
Li4wMDBkY2IxNDVjZTAgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9x
dWVyeS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9xdWVyeS5jCj4gQEAgLTM3
LDggKzM3LDYgQEAgc3RhdGljIGludCBxdWVyeV90b3BvbG9neV9pbmZvKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdiwKPiAgIAljb25zdCBzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3Nl
dSA9ICZSVU5USU1FX0lORk8oZGV2X3ByaXYpLT5zc2V1Owo+ICAgCXN0cnVjdCBkcm1faTkxNV9x
dWVyeV90b3BvbG9neV9pbmZvIHRvcG87Cj4gICAJdTMyIHNsaWNlX2xlbmd0aCwgc3Vic2xpY2Vf
bGVuZ3RoLCBldV9sZW5ndGgsIHRvdGFsX2xlbmd0aDsKPiAtCXU4IHN1YnNsaWNlX3N0cmlkZSA9
IEdFTl9TU0VVX1NUUklERShzc2V1LT5tYXhfc3Vic2xpY2VzKTsKPiAtCXU4IGV1X3N0cmlkZSA9
IEdFTl9TU0VVX1NUUklERShzc2V1LT5tYXhfZXVzX3Blcl9zdWJzbGljZSk7Cj4gICAJaW50IHJl
dDsKPiAgIAo+ICAgCWlmIChxdWVyeV9pdGVtLT5mbGFncyAhPSAwKQo+IEBAIC01MCw4ICs0OCw4
IEBAIHN0YXRpYyBpbnQgcXVlcnlfdG9wb2xvZ3lfaW5mbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsCj4gICAJQlVJTERfQlVHX09OKHNpemVvZih1OCkgIT0gc2l6ZW9mKHNzZXUt
PnNsaWNlX21hc2spKTsKPiAgIAo+ICAgCXNsaWNlX2xlbmd0aCA9IHNpemVvZihzc2V1LT5zbGlj
ZV9tYXNrKTsKPiAtCXN1YnNsaWNlX2xlbmd0aCA9IHNzZXUtPm1heF9zbGljZXMgKiBzdWJzbGlj
ZV9zdHJpZGU7Cj4gLQlldV9sZW5ndGggPSBzc2V1LT5tYXhfc2xpY2VzICogc3NldS0+bWF4X3N1
YnNsaWNlcyAqIGV1X3N0cmlkZTsKPiArCXN1YnNsaWNlX2xlbmd0aCA9IHNzZXUtPm1heF9zbGlj
ZXMgKiBzc2V1LT5zc19zdHJpZGU7Cj4gKwlldV9sZW5ndGggPSBzc2V1LT5tYXhfc2xpY2VzICog
c3NldS0+bWF4X3N1YnNsaWNlcyAqIHNzZXUtPmV1X3N0cmlkZTsKPiAgIAl0b3RhbF9sZW5ndGgg
PSBzaXplb2YodG9wbykgKyBzbGljZV9sZW5ndGggKyBzdWJzbGljZV9sZW5ndGggKwo+ICAgCQkg
ICAgICAgZXVfbGVuZ3RoOwo+ICAgCj4gQEAgLTY5LDkgKzY3LDkgQEAgc3RhdGljIGludCBxdWVy
eV90b3BvbG9neV9pbmZvKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiAgIAl0
b3BvLm1heF9ldXNfcGVyX3N1YnNsaWNlID0gc3NldS0+bWF4X2V1c19wZXJfc3Vic2xpY2U7Cj4g
ICAKPiAgIAl0b3BvLnN1YnNsaWNlX29mZnNldCA9IHNsaWNlX2xlbmd0aDsKPiAtCXRvcG8uc3Vi
c2xpY2Vfc3RyaWRlID0gc3Vic2xpY2Vfc3RyaWRlOwo+ICsJdG9wby5zdWJzbGljZV9zdHJpZGUg
PSBzc2V1LT5zc19zdHJpZGU7Cj4gICAJdG9wby5ldV9vZmZzZXQgPSBzbGljZV9sZW5ndGggKyBz
dWJzbGljZV9sZW5ndGg7Cj4gLQl0b3BvLmV1X3N0cmlkZSA9IGV1X3N0cmlkZTsKPiArCXRvcG8u
ZXVfc3RyaWRlID0gc3NldS0+ZXVfc3RyaWRlOwo+ICAgCj4gICAJaWYgKF9fY29weV90b191c2Vy
KHU2NF90b191c2VyX3B0cihxdWVyeV9pdGVtLT5kYXRhX3B0ciksCj4gICAJCQkgICAmdG9wbywg
c2l6ZW9mKHRvcG8pKSkKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
ZGV2aWNlX2luZm8uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMK
PiBpbmRleCBlMWRiY2NmMDRjZDkuLmJiYmMwYThjMjE4MyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaW50ZWxfZGV2aWNlX2luZm8uYwo+IEBAIC04NCwxNyArODQsNDIgQEAgdm9pZCBpbnRl
bF9kZXZpY2VfaW5mb19kdW1wX2ZsYWdzKGNvbnN0IHN0cnVjdCBpbnRlbF9kZXZpY2VfaW5mbyAq
aW5mbywKPiAgICN1bmRlZiBQUklOVF9GTEFHCj4gICB9Cj4gICAKPiArI2RlZmluZSBTU19TVFJf
TUFYX1NJWkUgKEdFTl9NQVhfU1VCU0xJQ0VfU1RSSURFICogMikKPiArCj4gK3N0YXRpYyB1OCAq
Cj4gK3N1YnNsaWNlX3Blcl9zbGljZV9zdHIodTggKmJ1ZiwgY29uc3Qgc3RydWN0IHNzZXVfZGV2
X2luZm8gKnNzZXUsIHU4IHNsaWNlKQo+ICt7Cj4gKwlpbnQgaTsKPiArCXU4IHNzX29mZnNldCA9
IHNsaWNlICogc3NldS0+c3Nfc3RyaWRlOwo+ICsKPiArCUdFTV9CVUdfT04oc2xpY2UgPj0gc3Nl
dS0+bWF4X3NsaWNlcyk7Cj4gKwo+ICsJbWVtc2V0KGJ1ZiwgMCwgU1NfU1RSX01BWF9TSVpFKTsK
PiArCj4gKwkvKgo+ICsJICogUHJpbnQgc3Vic2xpY2UgaW5mb3JtYXRpb24gaW4gcmV2ZXJzZSBv
cmRlciB0byBtYXRjaAo+ICsJICogdXNlcnNwYWNlIGV4cGVjdGF0aW9ucy4KPiArCSAqLwo+ICsJ
Zm9yIChpID0gMDsgaSA8IHNzZXUtPnNzX3N0cmlkZTsgaSsrKQo+ICsJCXNwcmludGYoJmJ1Zltp
ICogMl0sICIlMDJ4IiwKPiArCQkJc3NldS0+c3Vic2xpY2VfbWFza1tzc19vZmZzZXQgKyBzc2V1
LT5zc19zdHJpZGUgLQo+ICsJCQkJCSAgICAoaSArIDEpXSk7Cj4gKwo+ICsJcmV0dXJuIGJ1ZjsK
PiArfQo+ICsKPiAgIHN0YXRpYyB2b2lkIHNzZXVfZHVtcChjb25zdCBzdHJ1Y3Qgc3NldV9kZXZf
aW5mbyAqc3NldSwgc3RydWN0IGRybV9wcmludGVyICpwKQo+ICAgewo+ICAgCWludCBzOwo+ICsJ
dTggYnVmW1NTX1NUUl9NQVhfU0laRV07Cj4gICAKPiAgIAlkcm1fcHJpbnRmKHAsICJzbGljZSB0
b3RhbDogJXUsIG1hc2s9JTA0eFxuIiwKPiAgIAkJICAgaHdlaWdodDgoc3NldS0+c2xpY2VfbWFz
ayksIHNzZXUtPnNsaWNlX21hc2spOwo+ICAgCWRybV9wcmludGYocCwgInN1YnNsaWNlIHRvdGFs
OiAldVxuIiwgaW50ZWxfc3NldV9zdWJzbGljZV90b3RhbChzc2V1KSk7Cj4gICAJZm9yIChzID0g
MDsgcyA8IHNzZXUtPm1heF9zbGljZXM7IHMrKykgewo+IC0JCWRybV9wcmludGYocCwgInNsaWNl
JWQ6ICV1IHN1YnNsaWNlcywgbWFzaz0lMDR4XG4iLAo+ICsJCWRybV9wcmludGYocCwgInNsaWNl
JWQ6ICV1IHN1YnNsaWNlcywgbWFzaz0lc1xuIiwKPiAgIAkJCSAgIHMsIGludGVsX3NzZXVfc3Vi
c2xpY2VzX3Blcl9zbGljZShzc2V1LCBzKSwKPiAtCQkJICAgc3NldS0+c3Vic2xpY2VfbWFza1tz
XSk7Cj4gKwkJCSAgIHN1YnNsaWNlX3Blcl9zbGljZV9zdHIoYnVmLCBzc2V1LCBzKSk7Cj4gICAJ
fQo+ICAgCWRybV9wcmludGYocCwgIkVVIHRvdGFsOiAldVxuIiwgc3NldS0+ZXVfdG90YWwpOwo+
ICAgCWRybV9wcmludGYocCwgIkVVIHBlciBzdWJzbGljZTogJXVcbiIsIHNzZXUtPmV1X3Blcl9z
dWJzbGljZSk7Cj4gQEAgLTExOCw2ICsxNDMsNyBAQCB2b2lkIGludGVsX2RldmljZV9pbmZvX2R1
bXBfdG9wb2xvZ3koY29uc3Qgc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUsCj4gICAJCQkJICAg
ICBzdHJ1Y3QgZHJtX3ByaW50ZXIgKnApCj4gICB7Cj4gICAJaW50IHMsIHNzOwo+ICsJdTggYnVm
W1NTX1NUUl9NQVhfU0laRV07Cj4gICAKPiAgIAlpZiAoc3NldS0+bWF4X3NsaWNlcyA9PSAwKSB7
Cj4gICAJCWRybV9wcmludGYocCwgIlVuYXZhaWxhYmxlXG4iKTsKPiBAQCAtMTI1LDkgKzE1MSw5
IEBAIHZvaWQgaW50ZWxfZGV2aWNlX2luZm9fZHVtcF90b3BvbG9neShjb25zdCBzdHJ1Y3Qgc3Nl
dV9kZXZfaW5mbyAqc3NldSwKPiAgIAl9Cj4gICAKPiAgIAlmb3IgKHMgPSAwOyBzIDwgc3NldS0+
bWF4X3NsaWNlczsgcysrKSB7Cj4gLQkJZHJtX3ByaW50ZihwLCAic2xpY2UlZDogJXUgc3Vic2xp
Y2UocykgKDB4JWhoeCk6XG4iLAo+ICsJCWRybV9wcmludGYocCwgInNsaWNlJWQ6ICV1IHN1YnNs
aWNlKHMpICgweCVzKTpcbiIsCj4gICAJCQkgICBzLCBpbnRlbF9zc2V1X3N1YnNsaWNlc19wZXJf
c2xpY2Uoc3NldSwgcyksCj4gLQkJCSAgIHNzZXUtPnN1YnNsaWNlX21hc2tbc10pOwo+ICsJCQkg
ICBzdWJzbGljZV9wZXJfc2xpY2Vfc3RyKGJ1Ziwgc3NldSwgcykpOwo+ICAgCj4gICAJCWZvciAo
c3MgPSAwOyBzcyA8IHNzZXUtPm1heF9zdWJzbGljZXM7IHNzKyspIHsKPiAgIAkJCXUxNiBlbmFi
bGVkX2V1cyA9IGludGVsX3NzZXVfZ2V0X2V1cyhzc2V1LCBzLCBzcyk7Cj4gQEAgLTE1NiwxNSAr
MTgyLDEwIEBAIHN0YXRpYyB2b2lkIGdlbjExX3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdikKPiAgIAl1OCBldV9lbjsKPiAgIAlpbnQgczsKPiAgIAo+IC0J
aWYgKElTX0VMS0hBUlRMQUtFKGRldl9wcml2KSkgewo+IC0JCXNzZXUtPm1heF9zbGljZXMgPSAx
Owo+IC0JCXNzZXUtPm1heF9zdWJzbGljZXMgPSA0Owo+IC0JCXNzZXUtPm1heF9ldXNfcGVyX3N1
YnNsaWNlID0gODsKPiAtCX0gZWxzZSB7Cj4gLQkJc3NldS0+bWF4X3NsaWNlcyA9IDE7Cj4gLQkJ
c3NldS0+bWF4X3N1YnNsaWNlcyA9IDg7Cj4gLQkJc3NldS0+bWF4X2V1c19wZXJfc3Vic2xpY2Ug
PSA4Owo+IC0JfQo+ICsJaWYgKElTX0VMS0hBUlRMQUtFKGRldl9wcml2KSkKPiArCQlpbnRlbF9z
c2V1X3NldF9pbmZvKHNzZXUsIDEsIDQsIDgpOwo+ICsJZWxzZQo+ICsJCWludGVsX3NzZXVfc2V0
X2luZm8oc3NldSwgMSwgOCwgOCk7Cj4gICAKPiAgIAlzX2VuID0gSTkxNV9SRUFEKEdFTjExX0dU
X1NMSUNFX0VOQUJMRSkgJiBHRU4xMV9HVF9TX0VOQV9NQVNLOwo+ICAgCXNzX2VuID0gfkk5MTVf
UkVBRChHRU4xMV9HVF9TVUJTTElDRV9ESVNBQkxFKTsKPiBAQCAtMTc3LDkgKzE5OCwxMSBAQCBz
dGF0aWMgdm9pZCBnZW4xMV9zc2V1X2luZm9faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpCj4gICAJCQlpbnQgc3M7Cj4gICAKPiAgIAkJCXNzZXUtPnNsaWNlX21hc2sgfD0g
QklUKHMpOwo+IC0JCQlzc2V1LT5zdWJzbGljZV9tYXNrW3NdID0gKHNzX2VuID4+IHNzX2lkeCkg
JiBzc19lbl9tYXNrOwo+ICsJCQlzc2V1LT5zdWJzbGljZV9tYXNrW3MgKiBzc2V1LT5zc19zdHJp
ZGVdID0KPiArCQkJCShzc19lbiA+PiBzc19pZHgpICYgc3NfZW5fbWFzazsKClNob3VsZG4ndCB0
aGlzIGp1c3QgY2FsbCBpbnRlbF9zc2V1X3NldF9zdWJzbGljZXMoKSBpbnN0ZWFkIG9mIGRvaW5n
IHRoZSAKc2V0dGluZyBsb2NhbGx5PwoKPiAgIAkJCWZvciAoc3MgPSAwOyBzcyA8IHNzZXUtPm1h
eF9zdWJzbGljZXM7IHNzKyspIHsKPiAtCQkJCWlmIChzc2V1LT5zdWJzbGljZV9tYXNrW3NdICYg
QklUKHNzKSkKPiArCQkJCWlmIChzc2V1LT5zdWJzbGljZV9tYXNrW3MgKiBzc2V1LT5zc19zdHJp
ZGVdICYKPiArCQkJCSAgICBCSVQoc3MpKQoKVGhpcyBjdWxkIHVzZSB0aGUgaW50ZWxfc3NldV9o
YXNfc3Vic2xpY2UoKSBzdWdnZXN0ZWQgZWFybGllciwgb3RoZXJ3aXNlIAppdCBuZWVkcyB0byBj
b25zaWRlciBzc19zdHJpZGUgPiAxCgo+ICAgCQkJCQlpbnRlbF9zc2V1X3NldF9ldXMoc3NldSwg
cywgc3MsIGV1X2VuKTsKPiAgIAkJCX0KPiAgIAkJfQo+IEBAIC0yMDEsMjMgKzIyNCwxMCBAQCBz
dGF0aWMgdm9pZCBnZW4xMF9zc2V1X2luZm9faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpCj4gICAJY29uc3QgaW50IGV1X21hc2sgPSAweGZmOwo+ICAgCXUzMiBzdWJzbGlj
ZV9tYXNrLCBldV9lbjsKPiAgIAo+ICsJaW50ZWxfc3NldV9zZXRfaW5mbyhzc2V1LCA2LCA0LCA4
KTsKPiArCj4gICAJc3NldS0+c2xpY2VfbWFzayA9IChmdXNlMiAmIEdFTjEwX0YyX1NfRU5BX01B
U0spID4+Cj4gICAJCQkgICAgR0VOMTBfRjJfU19FTkFfU0hJRlQ7Cj4gLQlzc2V1LT5tYXhfc2xp
Y2VzID0gNjsKPiAtCXNzZXUtPm1heF9zdWJzbGljZXMgPSA0Owo+IC0Jc3NldS0+bWF4X2V1c19w
ZXJfc3Vic2xpY2UgPSA4Owo+IC0KPiAtCXN1YnNsaWNlX21hc2sgPSAoMSA8PCA0KSAtIDE7Cj4g
LQlzdWJzbGljZV9tYXNrICY9IH4oKGZ1c2UyICYgR0VOMTBfRjJfU1NfRElTX01BU0spID4+Cj4g
LQkJCSAgIEdFTjEwX0YyX1NTX0RJU19TSElGVCk7Cj4gLQo+IC0JLyoKPiAtCSAqIFNsaWNlMCBj
YW4gaGF2ZSB1cCB0byAzIHN1YnNsaWNlcywgYnV0IHRoZXJlIGFyZSBvbmx5IDIgaW4KPiAtCSAq
IHNsaWNlMS8yLgo+IC0JICovCj4gLQlzc2V1LT5zdWJzbGljZV9tYXNrWzBdID0gc3Vic2xpY2Vf
bWFzazsKPiAtCWZvciAocyA9IDE7IHMgPCBzc2V1LT5tYXhfc2xpY2VzOyBzKyspCj4gLQkJc3Nl
dS0+c3Vic2xpY2VfbWFza1tzXSA9IHN1YnNsaWNlX21hc2sgJiAweDM7Cj4gICAKPiAgIAkvKiBT
bGljZTAgKi8KPiAgIAlldV9lbiA9IH5JOTE1X1JFQUQoR0VOOF9FVV9ESVNBQkxFMCk7Cj4gQEAg
LTI0MiwxNCArMjUyLDIyIEBAIHN0YXRpYyB2b2lkIGdlbjEwX3NzZXVfaW5mb19pbml0KHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgIAlldV9lbiA9IH5JOTE1X1JFQUQoR0VO
MTBfRVVfRElTQUJMRTMpOwo+ICAgCWludGVsX3NzZXVfc2V0X2V1cyhzc2V1LCA1LCAxLCBldV9l
biAmIGV1X21hc2spOwo+ICAgCj4gLQkvKiBEbyBhIHNlY29uZCBwYXNzIHdoZXJlIHdlIG1hcmsg
dGhlIHN1YnNsaWNlcyBkaXNhYmxlZCBpZiBhbGwgdGhlaXIKPiAtCSAqIGV1cyBhcmUgb2ZmLgo+
IC0JICovCj4gKwlzdWJzbGljZV9tYXNrID0gKDEgPDwgNCkgLSAxOwo+ICsJc3Vic2xpY2VfbWFz
ayAmPSB+KChmdXNlMiAmIEdFTjEwX0YyX1NTX0RJU19NQVNLKSA+Pgo+ICsJCQkgICBHRU4xMF9G
Ml9TU19ESVNfU0hJRlQpOwo+ICsKPiAgIAlmb3IgKHMgPSAwOyBzIDwgc3NldS0+bWF4X3NsaWNl
czsgcysrKSB7Cj4gICAJCWZvciAoc3MgPSAwOyBzcyA8IHNzZXUtPm1heF9zdWJzbGljZXM7IHNz
KyspIHsKPiAgIAkJCWlmIChpbnRlbF9zc2V1X2dldF9ldXMoc3NldSwgcywgc3MpID09IDApCj4g
LQkJCQlzc2V1LT5zdWJzbGljZV9tYXNrW3NdICY9IH5CSVQoc3MpOwo+ICsJCQkJc3Vic2xpY2Vf
bWFzayAmPSB+QklUKHNzKTsKPiAgIAkJfQo+ICsKPiArCQkvKgo+ICsJCSAqIFNsaWNlMCBjYW4g
aGF2ZSB1cCB0byAzIHN1YnNsaWNlcywgYnV0IHRoZXJlIGFyZSBvbmx5IDIgaW4KPiArCQkgKiBz
bGljZTEvMi4KPiArCQkgKi8KPiArCQlpbnRlbF9zc2V1X3NldF9zdWJzbGljZXMoc3NldSwgcywg
cyA9PSAwID8gc3Vic2xpY2VfbWFzayA6Cj4gKwkJCQkJCQkgICBzdWJzbGljZV9tYXNrICYgMHgz
KTsKPiAgIAl9Cj4gICAKPiAgIAlzc2V1LT5ldV90b3RhbCA9IGNvbXB1dGVfZXVfdG90YWwoc3Nl
dSk7Cj4gQEAgLTI3NSwxMyArMjkzLDEyIEBAIHN0YXRpYyB2b2lkIGNoZXJyeXZpZXdfc3NldV9p
bmZvX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQo+ICAgewo+ICAgCXN0
cnVjdCBzc2V1X2Rldl9pbmZvICpzc2V1ID0gJlJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnNzZXU7
Cj4gICAJdTMyIGZ1c2U7Cj4gKwl1OCBzdWJzbGljZV9tYXNrOwo+ICAgCj4gICAJZnVzZSA9IEk5
MTVfUkVBRChDSFZfRlVTRV9HVCk7Cj4gICAKPiAgIAlzc2V1LT5zbGljZV9tYXNrID0gQklUKDAp
Owo+IC0Jc3NldS0+bWF4X3NsaWNlcyA9IDE7Cj4gLQlzc2V1LT5tYXhfc3Vic2xpY2VzID0gMjsK
PiAtCXNzZXUtPm1heF9ldXNfcGVyX3N1YnNsaWNlID0gODsKPiArCWludGVsX3NzZXVfc2V0X2lu
Zm8oc3NldSwgMSwgMiwgOCk7Cj4gICAKPiAgIAlpZiAoIShmdXNlICYgQ0hWX0ZHVF9ESVNBQkxF
X1NTMCkpIHsKPiAgIAkJdTggZGlzYWJsZWRfbWFzayA9Cj4gQEAgLTI5MCw3ICszMDcsNyBAQCBz
dGF0aWMgdm9pZCBjaGVycnl2aWV3X3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikKPiAgIAkJCSgoKGZ1c2UgJiBDSFZfRkdUX0VVX0RJU19TUzBfUjFfTUFT
SykgPj4KPiAgIAkJCSAgQ0hWX0ZHVF9FVV9ESVNfU1MwX1IxX1NISUZUKSA8PCA0KTsKPiAgIAo+
IC0JCXNzZXUtPnN1YnNsaWNlX21hc2tbMF0gfD0gQklUKDApOwo+ICsJCXN1YnNsaWNlX21hc2sg
fD0gQklUKDApOwo+ICAgCQlpbnRlbF9zc2V1X3NldF9ldXMoc3NldSwgMCwgMCwgfmRpc2FibGVk
X21hc2spOwo+ICAgCX0KPiAgIAo+IEBAIC0zMDEsMTAgKzMxOCwxMiBAQCBzdGF0aWMgdm9pZCBj
aGVycnl2aWV3X3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dikKPiAgIAkJCSgoKGZ1c2UgJiBDSFZfRkdUX0VVX0RJU19TUzFfUjFfTUFTSykgPj4KPiAgIAkJ
CSAgQ0hWX0ZHVF9FVV9ESVNfU1MxX1IxX1NISUZUKSA8PCA0KTsKPiAgIAo+IC0JCXNzZXUtPnN1
YnNsaWNlX21hc2tbMF0gfD0gQklUKDEpOwo+ICsJCXN1YnNsaWNlX21hc2sgfD0gQklUKDEpOwo+
ICAgCQlpbnRlbF9zc2V1X3NldF9ldXMoc3NldSwgMCwgMSwgfmRpc2FibGVkX21hc2spOwo+ICAg
CX0KPiAgIAo+ICsJaW50ZWxfc3NldV9zZXRfc3Vic2xpY2VzKHNzZXUsIDAsIHN1YnNsaWNlX21h
c2spOwo+ICsKPiAgIAlzc2V1LT5ldV90b3RhbCA9IGNvbXB1dGVfZXVfdG90YWwoc3NldSk7Cj4g
ICAKPiAgIAkvKgo+IEBAIC0zMTIsNyArMzMxLDggQEAgc3RhdGljIHZvaWQgY2hlcnJ5dmlld19z
c2V1X2luZm9faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCj4gICAJICog
YWNyb3NzIHN1YnNsaWNlcy4KPiAgIAkqLwo+ICAgCXNzZXUtPmV1X3Blcl9zdWJzbGljZSA9IGlu
dGVsX3NzZXVfc3Vic2xpY2VfdG90YWwoc3NldSkgPwo+IC0JCQkJc3NldS0+ZXVfdG90YWwgLyBp
bnRlbF9zc2V1X3N1YnNsaWNlX3RvdGFsKHNzZXUpIDoKPiArCQkJCXNzZXUtPmV1X3RvdGFsIC8K
PiArCQkJCQlpbnRlbF9zc2V1X3N1YnNsaWNlX3RvdGFsKHNzZXUpIDoKPiAgIAkJCQkwOwo+ICAg
CS8qCj4gICAJICogQ0hWIHN1cHBvcnRzIHN1YnNsaWNlIHBvd2VyIGdhdGluZyBvbiBkZXZpY2Vz
IHdpdGggbW9yZSB0aGFuCj4gQEAgLTMzNiw5ICszNTYsOCBAQCBzdGF0aWMgdm9pZCBnZW45X3Nz
ZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgIAlzc2V1
LT5zbGljZV9tYXNrID0gKGZ1c2UyICYgR0VOOF9GMl9TX0VOQV9NQVNLKSA+PiBHRU44X0YyX1Nf
RU5BX1NISUZUOwo+ICAgCj4gICAJLyogQlhUIGhhcyBhIHNpbmdsZSBzbGljZSBhbmQgYXQgbW9z
dCAzIHN1YnNsaWNlcy4gKi8KPiAtCXNzZXUtPm1heF9zbGljZXMgPSBJU19HRU45X0xQKGRldl9w
cml2KSA/IDEgOiAzOwo+IC0Jc3NldS0+bWF4X3N1YnNsaWNlcyA9IElTX0dFTjlfTFAoZGV2X3By
aXYpID8gMyA6IDQ7Cj4gLQlzc2V1LT5tYXhfZXVzX3Blcl9zdWJzbGljZSA9IDg7Cj4gKwlpbnRl
bF9zc2V1X3NldF9pbmZvKHNzZXUsIElTX0dFTjlfTFAoZGV2X3ByaXYpID8gMSA6IDMsCj4gKwkJ
CSAgICBJU19HRU45X0xQKGRldl9wcml2KSA/IDMgOiA0LCA4KTsKPiAgIAo+ICAgCS8qCj4gICAJ
ICogVGhlIHN1YnNsaWNlIGRpc2FibGUgZmllbGQgaXMgZ2xvYmFsLCBpLmUuIGl0IGFwcGxpZXMK
PiBAQCAtMzU3LDE0ICszNzYsMTYgQEAgc3RhdGljIHZvaWQgZ2VuOV9zc2V1X2luZm9faW5pdChz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCj4gICAJCQkvKiBza2lwIGRpc2FibGVk
IHNsaWNlICovCj4gICAJCQljb250aW51ZTsKPiAgIAo+IC0JCXNzZXUtPnN1YnNsaWNlX21hc2tb
c10gPSBzdWJzbGljZV9tYXNrOwo+ICsJCWludGVsX3NzZXVfc2V0X3N1YnNsaWNlcyhzc2V1LCBz
LCBzdWJzbGljZV9tYXNrKTsKPiAgIAo+ICAgCQlldV9kaXNhYmxlID0gSTkxNV9SRUFEKEdFTjlf
RVVfRElTQUJMRShzKSk7Cj4gICAJCWZvciAoc3MgPSAwOyBzcyA8IHNzZXUtPm1heF9zdWJzbGlj
ZXM7IHNzKyspIHsKPiAgIAkJCWludCBldV9wZXJfc3M7Cj4gICAJCQl1OCBldV9kaXNhYmxlZF9t
YXNrOwo+ICsJCQl1OCBzc19pZHggPSBzICogc3NldS0+c3Nfc3RyaWRlICsgc3MgLyBCSVRTX1BF
Ul9CWVRFOwo+ICAgCj4gLQkJCWlmICghKHNzZXUtPnN1YnNsaWNlX21hc2tbc10gJiBCSVQoc3Mp
KSkKPiArCQkJaWYgKCEoc3NldS0+c3Vic2xpY2VfbWFza1tzc19pZHhdICYKPiArCQkJICAgICAg
QklUKHNzICUgQklUU19QRVJfQllURSkpKQo+ICAgCQkJCS8qIHNraXAgZGlzYWJsZWQgc3Vic2xp
Y2UgKi8KPiAgIAkJCQljb250aW51ZTsKPiAgIAo+IEBAIC00MzcsOSArNDU4LDcgQEAgc3RhdGlj
IHZvaWQgYnJvYWR3ZWxsX3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdikKPiAgIAo+ICAgCWZ1c2UyID0gSTkxNV9SRUFEKEdFTjhfRlVTRTIpOwo+ICAgCXNz
ZXUtPnNsaWNlX21hc2sgPSAoZnVzZTIgJiBHRU44X0YyX1NfRU5BX01BU0spID4+IEdFTjhfRjJf
U19FTkFfU0hJRlQ7Cj4gLQlzc2V1LT5tYXhfc2xpY2VzID0gMzsKPiAtCXNzZXUtPm1heF9zdWJz
bGljZXMgPSAzOwo+IC0Jc3NldS0+bWF4X2V1c19wZXJfc3Vic2xpY2UgPSA4Owo+ICsJaW50ZWxf
c3NldV9zZXRfaW5mbyhzc2V1LCAzLCAzLCA4KTsKPiAgIAo+ICAgCS8qCj4gICAJICogVGhlIHN1
YnNsaWNlIGRpc2FibGUgZmllbGQgaXMgZ2xvYmFsLCBpLmUuIGl0IGFwcGxpZXMKPiBAQCAtNDY2
LDE4ICs0ODUsMjEgQEAgc3RhdGljIHZvaWQgYnJvYWR3ZWxsX3NzZXVfaW5mb19pbml0KHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKPiAgIAkJCS8qIHNraXAgZGlzYWJsZWQgc2xp
Y2UgKi8KPiAgIAkJCWNvbnRpbnVlOwo+ICAgCj4gLQkJc3NldS0+c3Vic2xpY2VfbWFza1tzXSA9
IHN1YnNsaWNlX21hc2s7Cj4gKwkJaW50ZWxfc3NldV9zZXRfc3Vic2xpY2VzKHNzZXUsIHMsIHN1
YnNsaWNlX21hc2spOwo+ICAgCj4gICAJCWZvciAoc3MgPSAwOyBzcyA8IHNzZXUtPm1heF9zdWJz
bGljZXM7IHNzKyspIHsKPiAgIAkJCXU4IGV1X2Rpc2FibGVkX21hc2s7Cj4gKwkJCXU4IHNzX2lk
eCA9IHMgKiBzc2V1LT5zc19zdHJpZGUgKyBzcyAvIEJJVFNfUEVSX0JZVEU7Cj4gICAJCQl1MzIg
bl9kaXNhYmxlZDsKPiAgIAo+IC0JCQlpZiAoIShzc2V1LT5zdWJzbGljZV9tYXNrW3NdICYgQklU
KHNzKSkpCj4gKwkJCWlmICghKHNzZXUtPnN1YnNsaWNlX21hc2tbc3NfaWR4XSAmCj4gKwkJCSAg
ICAgIEJJVChzcyAlIEJJVFNfUEVSX0JZVEUpKSkKPiAgIAkJCQkvKiBza2lwIGRpc2FibGVkIHN1
YnNsaWNlICovCj4gICAJCQkJY29udGludWU7Cj4gICAKPiAgIAkJCWV1X2Rpc2FibGVkX21hc2sg
PQo+IC0JCQkJZXVfZGlzYWJsZVtzXSA+PiAoc3MgKiBzc2V1LT5tYXhfZXVzX3Blcl9zdWJzbGlj
ZSk7Cj4gKwkJCQlldV9kaXNhYmxlW3NdID4+Cj4gKwkJCQkJKHNzICogc3NldS0+bWF4X2V1c19w
ZXJfc3Vic2xpY2UpOwo+ICAgCj4gICAJCQlpbnRlbF9zc2V1X3NldF9ldXMoc3NldSwgcywgc3Ms
IH5ldV9kaXNhYmxlZF9tYXNrKTsKPiAgIAo+IEBAIC01MTcsNiArNTM5LDcgQEAgc3RhdGljIHZv
aWQgaGFzd2VsbF9zc2V1X2luZm9faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYpCj4gICAJc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUgPSAmUlVOVElNRV9JTkZPKGRldl9w
cml2KS0+c3NldTsKPiAgIAl1MzIgZnVzZTE7Cj4gICAJaW50IHMsIHNzOwo+ICsJdTMyIHN1YnNs
aWNlX21hc2s7Cj4gICAKPiAgIAkvKgo+ICAgCSAqIFRoZXJlIGlzbid0IGEgcmVnaXN0ZXIgdG8g
dGVsbCB1cyBob3cgbWFueSBzbGljZXMvc3Vic2xpY2VzLiBXZQo+IEBAIC01MjgsMjIgKzU1MSwx
OCBAQCBzdGF0aWMgdm9pZCBoYXN3ZWxsX3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdikKPiAgIAkJLyogZmFsbCB0aHJvdWdoICovCj4gICAJY2FzZSAxOgo+
ICAgCQlzc2V1LT5zbGljZV9tYXNrID0gQklUKDApOwo+IC0JCXNzZXUtPnN1YnNsaWNlX21hc2tb
MF0gPSBCSVQoMCk7Cj4gKwkJc3Vic2xpY2VfbWFzayA9IEJJVCgwKTsKPiAgIAkJYnJlYWs7Cj4g
ICAJY2FzZSAyOgo+ICAgCQlzc2V1LT5zbGljZV9tYXNrID0gQklUKDApOwo+IC0JCXNzZXUtPnN1
YnNsaWNlX21hc2tbMF0gPSBCSVQoMCkgfCBCSVQoMSk7Cj4gKwkJc3Vic2xpY2VfbWFzayA9IEJJ
VCgwKSB8IEJJVCgxKTsKPiAgIAkJYnJlYWs7Cj4gICAJY2FzZSAzOgo+ICAgCQlzc2V1LT5zbGlj
ZV9tYXNrID0gQklUKDApIHwgQklUKDEpOwo+IC0JCXNzZXUtPnN1YnNsaWNlX21hc2tbMF0gPSBC
SVQoMCkgfCBCSVQoMSk7Cj4gLQkJc3NldS0+c3Vic2xpY2VfbWFza1sxXSA9IEJJVCgwKSB8IEJJ
VCgxKTsKPiArCQlzdWJzbGljZV9tYXNrID0gQklUKDApIHwgQklUKDEpOwo+ICAgCQlicmVhazsK
PiAgIAl9Cj4gICAKPiAtCXNzZXUtPm1heF9zbGljZXMgPSBod2VpZ2h0OChzc2V1LT5zbGljZV9t
YXNrKTsKPiAtCXNzZXUtPm1heF9zdWJzbGljZXMgPSBod2VpZ2h0OChzc2V1LT5zdWJzbGljZV9t
YXNrWzBdKTsKPiAtCj4gICAJZnVzZTEgPSBJOTE1X1JFQUQoSFNXX1BBVlBfRlVTRTEpOwo+ICAg
CXN3aXRjaCAoKGZ1c2UxICYgSFNXX0YxX0VVX0RJU19NQVNLKSA+PiBIU1dfRjFfRVVfRElTX1NI
SUZUKSB7Cj4gICAJZGVmYXVsdDoKPiBAQCAtNTYwLDkgKzU3OSwxNCBAQCBzdGF0aWMgdm9pZCBo
YXN3ZWxsX3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikK
PiAgIAkJc3NldS0+ZXVfcGVyX3N1YnNsaWNlID0gNjsKPiAgIAkJYnJlYWs7Cj4gICAJfQo+IC0J
c3NldS0+bWF4X2V1c19wZXJfc3Vic2xpY2UgPSBzc2V1LT5ldV9wZXJfc3Vic2xpY2U7Cj4gKwo+
ICsJaW50ZWxfc3NldV9zZXRfaW5mbyhzc2V1LCBod2VpZ2h0OChzc2V1LT5zbGljZV9tYXNrKSwK
PiArCQkJICAgIGh3ZWlnaHQ4KHN1YnNsaWNlX21hc2spLAo+ICsJCQkgICAgc3NldS0+ZXVfcGVy
X3N1YnNsaWNlKTsKClBlcnNvbmFsIHByZWZlcmVuY2U6IGNvdWxkIHVzZSBhIGxvY2FsIHZhcmlh
YmxlIGZvciBldV9wZXJfc3Vic2xpY2UgCmFib3ZlIHRvIGF2b2lkIHNldHRpbmcgaXQgdG8gaXRz
ZWxmIGhlcmUuCgpEYW5pZWxlCgo+ICAgCj4gICAJZm9yIChzID0gMDsgcyA8IHNzZXUtPm1heF9z
bGljZXM7IHMrKykgewo+ICsJCWludGVsX3NzZXVfc2V0X3N1YnNsaWNlcyhzc2V1LCBzLCBzdWJz
bGljZV9tYXNrKTsKPiArCj4gICAJCWZvciAoc3MgPSAwOyBzcyA8IHNzZXUtPm1heF9zdWJzbGlj
ZXM7IHNzKyspIHsKPiAgIAkJCWludGVsX3NzZXVfc2V0X2V1cyhzc2V1LCBzLCBzcywKPiAgIAkJ
CQkJICAgKDFVTCA8PCBzc2V1LT5ldV9wZXJfc3Vic2xpY2UpIC0gMSk7Cj4gCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxp
c3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

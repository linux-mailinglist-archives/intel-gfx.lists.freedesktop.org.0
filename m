Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9571A1A9BA2
	for <lists+intel-gfx@lfdr.de>; Wed, 15 Apr 2020 13:03:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3D6CE6E0D9;
	Wed, 15 Apr 2020 11:03:31 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 60B5B6E0D9
 for <intel-gfx@lists.freedesktop.org>; Wed, 15 Apr 2020 11:03:30 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 20905193-1500050 
 for multiple; Wed, 15 Apr 2020 12:03:24 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 15 Apr 2020 12:03:20 +0100
Message-Id: <20200415110320.23158-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20200415100322.28378-1-chris@chris-wilson.co.uk>
References: <20200415100322.28378-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/selftests: Exercise basic RPS
 interrupt generation
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Chris Wilson <chris@chris-wilson.co.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

U2luY2Ugd2UgZGVwZW5kIHVwb24gUlBTIGdlbmVyYXRpbmcgaW50ZXJydXB0cyBhZnRlciBldmFs
dWF0aW9uCmludGVydmFscyB0byBkZXRlcm1pbmUgd2hlbiB0byB1cC9kb3duIGNsb2NrIHRoZSBH
UFUsIGl0IGlzIGltcGVyYXRpdmUKdGhhdCB3ZSBzdWNjZXNzZnVsbHkgZW5hYmxlIGludGVycnVw
dCBnZW5lcmF0aW9uISBWZXJpZnkgdGhhdCB3ZSBkbyBzZWUKYW4gaW50ZXJydXB0IGlmIHdlIGtl
ZXAgdGhlIEdQVSBidXN5IGZvciBhbiBlbnRpcmUgRUkuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBX
aWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9ycHMuYyAgICAgIHwgICA0ICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X2d0X3BtLmMgfCAgIDIgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3Rf
cnBzLmMgICB8IDIxMiArKysrKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3Qvc2VsZnRlc3RfcnBzLmggICB8ICAxMSArKwogNCBmaWxlcyBjaGFuZ2VkLCAyMjkgaW5z
ZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Nl
bGZ0ZXN0X3Jwcy5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
c2VsZnRlc3RfcnBzLmgKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9ycHMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jwcy5jCmluZGV4IDg2MTEw
NDU4ZTJhNy4uZDE5MTYxYzdhM2Q4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9ycHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ycHMuYwpA
QCAtMTkyMywzICsxOTIzLDcgQEAgYm9vbCBpOTE1X2dwdV90dXJib19kaXNhYmxlKHZvaWQpCiAJ
cmV0dXJuIHJldDsKIH0KIEVYUE9SVF9TWU1CT0xfR1BMKGk5MTVfZ3B1X3R1cmJvX2Rpc2FibGUp
OworCisjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VMRlRFU1QpCisjaW5jbHVkZSAi
c2VsZnRlc3RfcnBzLmMiCisjZW5kaWYKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3NlbGZ0ZXN0X2d0X3BtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9n
dF9wbS5jCmluZGV4IDA5ZmY4ZTRmODhhZi4uYzUwYmI1MDJmZTAzIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9ndF9wbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L3NlbGZ0ZXN0X2d0X3BtLmMKQEAgLTcsNiArNyw3IEBACiAKICNpbmNsdWRlICJz
ZWxmdGVzdF9sbGMuaCIKICNpbmNsdWRlICJzZWxmdGVzdF9yYzYuaCIKKyNpbmNsdWRlICJzZWxm
dGVzdF9ycHMuaCIKIAogc3RhdGljIGludCBsaXZlX2d0X3Jlc3VtZSh2b2lkICphcmcpCiB7CkBA
IC01Miw2ICs1Myw3IEBAIGludCBpbnRlbF9ndF9wbV9saXZlX3NlbGZ0ZXN0cyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsKIAlzdGF0aWMgY29uc3Qgc3RydWN0IGk5MTVfc3VidGVz
dCB0ZXN0c1tdID0gewogCQlTVUJURVNUKGxpdmVfcmM2X21hbnVhbCksCisJCVNVQlRFU1QobGl2
ZV9ycHNfaW50ZXJydXB0KSwKIAkJU1VCVEVTVChsaXZlX2d0X3Jlc3VtZSksCiAJfTsKIApkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfcnBzLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9ycHMuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwMDAwMDAuLmRkMzQ3N2U1MzgwZQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3Jwcy5jCkBAIC0wLDAgKzEsMjEyIEBACisvLyBTUERY
LUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCisvKgorICogQ29weXJpZ2h0IMKpIDIwMjAgSW50ZWwg
Q29ycG9yYXRpb24KKyAqLworCisjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3BtLmgiCisjaW5jbHVk
ZSAiaW50ZWxfZ3RfcG0uaCIKKyNpbmNsdWRlICJzZWxmdGVzdF9ycHMuaCIKKyNpbmNsdWRlICJz
ZWxmdGVzdHMvaWd0X2ZsdXNoX3Rlc3QuaCIKKyNpbmNsdWRlICJzZWxmdGVzdHMvaWd0X3NwaW5u
ZXIuaCIKKworc3RhdGljIHZvaWQgZHVtbXlfcnBzX3dvcmsoc3RydWN0IHdvcmtfc3RydWN0ICp3
cmspCit7Cit9CisKK3N0YXRpYyBpbnQgX19ycHNfdXBfaW50ZXJydXB0KHN0cnVjdCBpbnRlbF9y
cHMgKnJwcywKKwkJCSAgICAgIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKKwkJCSAg
ICAgIHN0cnVjdCBpZ3Rfc3Bpbm5lciAqc3BpbikKK3sKKwlzdHJ1Y3QgaW50ZWxfdW5jb3JlICp1
bmNvcmUgPSBlbmdpbmUtPnVuY29yZTsKKwlzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycTsKKwl1MzIg
dGltZW91dDsKKworCWludGVsX2d0X3BtX3dhaXRfZm9yX2lkbGUoZW5naW5lLT5ndCk7CisJR0VN
X0JVR19PTihycHMtPmFjdGl2ZSk7CisKKwlycHMtPnBtX2lpciA9IDA7CisJcnBzLT5jdXJfZnJl
cSA9IHJwcy0+bWluX2ZyZXE7CisKKwlycSA9IGlndF9zcGlubmVyX2NyZWF0ZV9yZXF1ZXN0KHNw
aW4sIGVuZ2luZS0+a2VybmVsX2NvbnRleHQsIE1JX05PT1ApOworCWlmIChJU19FUlIocnEpKQor
CQlyZXR1cm4gUFRSX0VSUihycSk7CisKKwlpOTE1X3JlcXVlc3RfZ2V0KHJxKTsKKwlpOTE1X3Jl
cXVlc3RfYWRkKHJxKTsKKworCWlmICghaWd0X3dhaXRfZm9yX3NwaW5uZXIoc3BpbiwgcnEpKSB7
CisJCXByX2VycigiJXM6IFJQUyBzcGlubmVyIGRpZCBub3Qgc3RhcnRcbiIsCisJCSAgICAgICBl
bmdpbmUtPm5hbWUpOworCQlpOTE1X3JlcXVlc3RfcHV0KHJxKTsKKwkJaW50ZWxfZ3Rfc2V0X3dl
ZGdlZChlbmdpbmUtPmd0KTsKKwkJcmV0dXJuIC1FSU87CisJfQorCisJaWYgKCFycHMtPmFjdGl2
ZSkgeworCQlwcl9lcnIoIiVzOiBSUFMgbm90IGVuYWJsZWQgb24gc3RhcnRpbmcgc3Bpbm5lclxu
IiwKKwkJICAgICAgIGVuZ2luZS0+bmFtZSk7CisJCWlndF9zcGlubmVyX2VuZChzcGluKTsKKwkJ
aTkxNV9yZXF1ZXN0X3B1dChycSk7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCWlmICghKHJw
cy0+cG1fZXZlbnRzICYgR0VONl9QTV9SUF9VUF9USFJFU0hPTEQpKSB7CisJCXByX2VycigiJXM6
IFJQUyBkaWQgbm90IHJlZ2lzdGVyIFVQIGludGVycnVwdFxuIiwKKwkJICAgICAgIGVuZ2luZS0+
bmFtZSk7CisJCWk5MTVfcmVxdWVzdF9wdXQocnEpOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisK
KwlpZiAocnBzLT5sYXN0X2ZyZXEgIT0gcnBzLT5taW5fZnJlcSkgeworCQlwcl9lcnIoIiVzOiBS
UFMgZGlkIG5vdCBwcm9ncmFtIG1pbiBmcmVxdWVuY3lcbiIsCisJCSAgICAgICBlbmdpbmUtPm5h
bWUpOworCQlpOTE1X3JlcXVlc3RfcHV0KHJxKTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCisJ
dGltZW91dCA9IGludGVsX3VuY29yZV9yZWFkKHVuY29yZSwgR0VONl9SUF9VUF9FSSk7CisJdGlt
ZW91dCA9IEdUX1BNX0lOVEVSVkFMX1RPX1VTKGVuZ2luZS0+aTkxNSwgdGltZW91dCk7CisKKwl1
c2xlZXBfcmFuZ2UoMiAqIHRpbWVvdXQsIDMgKiB0aW1lb3V0KTsKKwlHRU1fQlVHX09OKGk5MTVf
cmVxdWVzdF9jb21wbGV0ZWQocnEpKTsKKworCWlndF9zcGlubmVyX2VuZChzcGluKTsKKwlpOTE1
X3JlcXVlc3RfcHV0KHJxKTsKKworCWlmIChycHMtPmN1cl9mcmVxICE9IHJwcy0+bWluX2ZyZXEp
IHsKKwkJcHJfZXJyKCIlczogRnJlcXVlbmN5IHVuZXhwZWN0ZWRseSBjaGFuZ2VkIFt1cF0sIG5v
dyAlZCFcbiIsCisJCSAgICAgICBlbmdpbmUtPm5hbWUsIGludGVsX3Jwc19yZWFkX2FjdHVhbF9m
cmVxdWVuY3kocnBzKSk7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCWlmICghKHJwcy0+cG1f
aWlyICYgR0VONl9QTV9SUF9VUF9USFJFU0hPTEQpKSB7CisJCXByX2VycigiJXM6IFVQIGludGVy
cnVwdCBub3QgcmVjb3JkZWQgZm9yIHNwaW5uZXIsIHBtX2lpcjoleCwgcHJldl91cDoleCwgdXBf
dGhyZXNob2xkOiV4LCB1cF9laToleFxuIiwKKwkJICAgICAgIGVuZ2luZS0+bmFtZSwgcnBzLT5w
bV9paXIsCisJCSAgICAgICBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIEdFTjZfUlBfUFJFVl9V
UCksCisJCSAgICAgICBpbnRlbF91bmNvcmVfcmVhZCh1bmNvcmUsIEdFTjZfUlBfVVBfVEhSRVNI
T0xEKSwKKwkJICAgICAgIGludGVsX3VuY29yZV9yZWFkKHVuY29yZSwgR0VONl9SUF9VUF9FSSkp
OworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwlpbnRlbF9ndF9wbV93YWl0X2Zvcl9pZGxlKGVu
Z2luZS0+Z3QpOworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IF9fcnBzX2Rvd25faW50ZXJy
dXB0KHN0cnVjdCBpbnRlbF9ycHMgKnJwcywKKwkJCQlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUpCit7CisJc3RydWN0IGludGVsX3VuY29yZSAqdW5jb3JlID0gZW5naW5lLT51bmNvcmU7
CisJdTMyIHRpbWVvdXQ7CisKKwlHRU1fQlVHX09OKCFycHMtPmFjdGl2ZSk7CisKKwlpbnRlbF9y
cHNfc2V0KHJwcywgcnBzLT5tYXhfZnJlcSk7CisKKwlpZiAoIShycHMtPnBtX2V2ZW50cyAmIEdF
TjZfUE1fUlBfRE9XTl9USFJFU0hPTEQpKSB7CisJCXByX2VycigiJXM6IFJQUyBkaWQgbm90IHJl
Z2lzdGVyIERPV04gaW50ZXJydXB0XG4iLAorCQkgICAgICAgZW5naW5lLT5uYW1lKTsKKwkJcmV0
dXJuIC1FSU5WQUw7CisJfQorCisJaWYgKHJwcy0+bGFzdF9mcmVxICE9IHJwcy0+bWF4X2ZyZXEp
IHsKKwkJcHJfZXJyKCIlczogUlBTIGRpZCBub3QgcHJvZ3JhbSBtYXggZnJlcXVlbmN5XG4iLAor
CQkgICAgICAgZW5naW5lLT5uYW1lKTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCisJdGltZW91
dCA9IGludGVsX3VuY29yZV9yZWFkKHVuY29yZSwgR0VONl9SUF9ET1dOX0VJKTsKKwl0aW1lb3V0
ID0gR1RfUE1fSU5URVJWQUxfVE9fVVMoZW5naW5lLT5pOTE1LCB0aW1lb3V0KTsKKworCS8qIEZs
dXNoIGFueSBwcmV2aW91cyBFSSAqLworCXVzbGVlcF9yYW5nZSh0aW1lb3V0LCAyICogdGltZW91
dCk7CisKKwkvKiBSZXNldCB0aGUgaW50ZXJydXB0IHN0YXR1cyAqLworCXJwc19kaXNhYmxlX2lu
dGVycnVwdHMocnBzKTsKKwlHRU1fQlVHX09OKHJwcy0+cG1faWlyKTsKKwlycHNfZW5hYmxlX2lu
dGVycnVwdHMocnBzKTsKKworCS8qIEFuZCB0aGVuIHdhaXQgZm9yIHRoZSB0aW1lb3V0LCBmb3Ig
cmVhbCB0aGlzIHRpbWUgKi8KKwl1c2xlZXBfcmFuZ2UoMiAqIHRpbWVvdXQsIDMgKiB0aW1lb3V0
KTsKKworCWlmIChycHMtPmN1cl9mcmVxICE9IHJwcy0+bWF4X2ZyZXEpIHsKKwkJcHJfZXJyKCIl
czogRnJlcXVlbmN5IHVuZXhwZWN0ZWRseSBjaGFuZ2VkIFtkb3duXSwgbm93ICVkIVxuIiwKKwkJ
ICAgICAgIGVuZ2luZS0+bmFtZSwKKwkJICAgICAgIGludGVsX3Jwc19yZWFkX2FjdHVhbF9mcmVx
dWVuY3kocnBzKSk7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCWlmICghKHJwcy0+cG1faWly
ICYgKEdFTjZfUE1fUlBfRE9XTl9USFJFU0hPTEQgfCBHRU42X1BNX1JQX0RPV05fVElNRU9VVCkp
KSB7CisJCXByX2VycigiJXM6IERPV04gaW50ZXJydXB0IG5vdCByZWNvcmRlZCBmb3IgaWRsZSwg
cG1faWlyOiV4LCBwcmV2X2Rvd246JXgsIGRvd25fdGhyZXNob2xkOiV4LCBkb3duX2VpOiV4XG4i
LAorCQkgICAgICAgZW5naW5lLT5uYW1lLCBycHMtPnBtX2lpciwKKwkJICAgICAgIGludGVsX3Vu
Y29yZV9yZWFkKHVuY29yZSwgR0VONl9SUF9QUkVWX0RPV04pLAorCQkgICAgICAgaW50ZWxfdW5j
b3JlX3JlYWQodW5jb3JlLCBHRU42X1JQX0RPV05fVEhSRVNIT0xEKSwKKwkJICAgICAgIGludGVs
X3VuY29yZV9yZWFkKHVuY29yZSwgR0VONl9SUF9ET1dOX0VJKSk7CisJCXJldHVybiAtRUlOVkFM
OworCX0KKworCXJldHVybiAwOworfQorCitpbnQgbGl2ZV9ycHNfaW50ZXJydXB0KHZvaWQgKmFy
ZykKK3sKKwlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gYXJnOworCXN0cnVjdCBpbnRlbF9ycHMgKnJw
cyA9ICZndC0+cnBzOworCXZvaWQgKCpzYXZlZF93b3JrKShzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndy
ayk7CisJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOworCWVudW0gaW50ZWxfZW5naW5l
X2lkIGlkOworCXN0cnVjdCBpZ3Rfc3Bpbm5lciBzcGluOworCXUzMiBwbV9ldmVudHM7CisJaW50
IGVyciA9IDA7CisKKwkvKgorCSAqIEZpcnN0LCBsZXQncyBjaGVjayB3aGV0aGVyIG9yIG5vdCB3
ZSBhcmUgcmVjZWl2aW5nIGludGVycnVwdHMuCisJICovCisKKwlpZiAoIXJwcy0+ZW5hYmxlZCB8
fCBycHMtPm1heF9mcmVxIDw9IHJwcy0+bWluX2ZyZXEpCisJCXJldHVybiAwOworCisJaW50ZWxf
Z3RfcG1fZ2V0KGd0KTsKKwlwbV9ldmVudHMgPSBycHMtPnBtX2V2ZW50czsKKwlpbnRlbF9ndF9w
bV9wdXQoZ3QpOworCWlmICghcG1fZXZlbnRzKSB7CisJCXByX2VycigiTm8gUlBTIFBNIGV2ZW50
cyByZWdpc3RlcmVkLCBidXQgUlBTIGlzIGVuYWJsZWQ/XG4iKTsKKwkJcmV0dXJuIC1FTk9ERVY7
CisJfQorCisJaWYgKGlndF9zcGlubmVyX2luaXQoJnNwaW4sIGd0KSkKKwkJcmV0dXJuIC1FTk9N
RU07CisKKworCWludGVsX2d0X3BtX3dhaXRfZm9yX2lkbGUoZ3QpOworCXNhdmVkX3dvcmsgPSBy
cHMtPndvcmsuZnVuYzsKKwlycHMtPndvcmsuZnVuYyA9IGR1bW15X3Jwc193b3JrOworCisJZm9y
X2VhY2hfZW5naW5lKGVuZ2luZSwgZ3QsIGlkKSB7CisJCS8qIEtlZXAgdGhlIGVuZ2luZSBidXN5
IHdpdGggYSBzcGlubmVyOyBleHBlY3QgYW4gVVAhICovCisJCWlmIChwbV9ldmVudHMgJiBHRU42
X1BNX1JQX1VQX1RIUkVTSE9MRCkgeworCQkJZXJyID0gX19ycHNfdXBfaW50ZXJydXB0KHJwcywg
ZW5naW5lLCAmc3Bpbik7CisJCQlpZiAoZXJyKQorCQkJCWdvdG8gb3V0OworCQl9CisKKwkJLyog
S2VlcCB0aGUgZW5naW5lIGF3YWtlIGJ1dCBpZGxlIGFuZCBjaGVjayBmb3IgRE9XTiAqLworCQlp
ZiAocG1fZXZlbnRzICYgR0VONl9QTV9SUF9ET1dOX1RIUkVTSE9MRCkgeworCQkJaW50ZWxfZW5n
aW5lX3BtX2dldChlbmdpbmUpOworCQkJZXJyID0gX19ycHNfZG93bl9pbnRlcnJ1cHQocnBzLCBl
bmdpbmUpOworCQkJaW50ZWxfZW5naW5lX3BtX3B1dChlbmdpbmUpOworCQkJaWYgKGVycikKKwkJ
CQlnb3RvIG91dDsKKwkJfQorCX0KKworb3V0OgorCWlmIChpZ3RfZmx1c2hfdGVzdChndC0+aTkx
NSkpCisJCWVyciA9IC1FSU87CisKKwlpZ3Rfc3Bpbm5lcl9maW5pKCZzcGluKTsKKworCWludGVs
X2d0X3BtX3dhaXRfZm9yX2lkbGUoZ3QpOworCXJwcy0+d29yay5mdW5jID0gc2F2ZWRfd29yazsK
KworCXJldHVybiBlcnI7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9z
ZWxmdGVzdF9ycHMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X3Jwcy5oCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uYWJiYTY2NDIwOTk2Ci0tLSAv
ZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfcnBzLmgKQEAg
LTAsMCArMSwxMSBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVCAqLworLyoKKyAq
IENvcHlyaWdodCDCqSAyMDIwIEludGVsIENvcnBvcmF0aW9uCisgKi8KKworI2lmbmRlZiBTRUxG
VEVTVF9SUFNfSAorI2RlZmluZSBTRUxGVEVTVF9SUFNfSAorCitpbnQgbGl2ZV9ycHNfaW50ZXJy
dXB0KHZvaWQgKmFyZyk7CisKKyNlbmRpZiAvKiBTRUxGVEVTVF9SUFNfSCAqLwotLSAKMi4yMC4x
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1n
ZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

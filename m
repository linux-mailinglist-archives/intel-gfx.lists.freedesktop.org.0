Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 001912BA31
	for <lists+intel-gfx@lfdr.de>; Mon, 27 May 2019 20:36:34 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 46F1989A35;
	Mon, 27 May 2019 18:36:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8DAF989A14
 for <intel-gfx@lists.freedesktop.org>; Mon, 27 May 2019 18:36:31 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 27 May 2019 11:36:30 -0700
X-ExtLoop1: 1
Received: from irvmail001.ir.intel.com ([163.33.26.43])
 by orsmga003.jf.intel.com with ESMTP; 27 May 2019 11:36:27 -0700
Received: from mwajdecz-MOBL1.ger.corp.intel.com
 (mwajdecz-mobl1.ger.corp.intel.com [172.28.174.50])
 by irvmail001.ir.intel.com (8.14.3/8.13.6/MailSET/Hub) with ESMTP id
 x4RIaJDA007368; Mon, 27 May 2019 19:36:26 +0100
From: Michal Wajdeczko <michal.wajdeczko@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 27 May 2019 18:35:59 +0000
Message-Id: <20190527183613.17076-4-michal.wajdeczko@intel.com>
X-Mailer: git-send-email 2.21.0.windows.1
In-Reply-To: <20190527183613.17076-1-michal.wajdeczko@intel.com>
References: <20190527183613.17076-1-michal.wajdeczko@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v5 03/17] drm/i915/guc: Updates for GuC 32.0.3
 firmware
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TmV3IEd1QyAzMi4wLjMgZmlybXdhcmUgbWFkZSBtYW55IGNoYW5nZXMgYXJvdW5kIGl0cyBBQkkg
dGhhdApyZXF1aXJlIGRyaXZlciB1cGRhdGVzOgoKKiBGVyByZWxlYXNlIHZlcnNpb24gbnVtYmVy
aW5nIHNjaGVtYSBub3cgaW5jbHVkZXMgcGF0Y2ggbnVtYmVyCiogRlcgcmVsZWFzZSB2ZXJzaW9u
IGVuY29kaW5nIGluIENTUyBoZWFkZXIKKiBCb290IHBhcmFtZXRlcnMKKiBTdXNwZW5kL3Jlc3Vt
ZSBwcm90b2NvbAoqIFNhbXBsZS1mb3JjZXdha2UgY29tbWFuZAoqIEFkZGl0aW9uYWwgRGF0YSBT
dHJ1Y3R1cmVzIChBRFMpCgpUaGlzIGNvbW1pdCBpcyBhIHNxdWFzaCBvZiBwYXRjaGVzIDMtOCBm
cm9tIHNlcmllcyBbMV0uClsxXSBodHRwczovL3BhdGNod29yay5mcmVlZGVza3RvcC5vcmcvc2Vy
aWVzLzU4NzYwLwoKU2lnbmVkLW9mZi1ieTogTWljaGFsIFdhamRlY3prbyA8bWljaGFsLndhamRl
Y3prb0BpbnRlbC5jb20+CkNjOiBKb29uYXMgTGFodGluZW4gPGpvb25hcy5sYWh0aW5lbkBsaW51
eC5pbnRlbC5jb20+CkNjOiBEYW5pZWxlIENlcmFvbG8gU3B1cmlvIDxkYW5pZWxlLmNlcmFvbG9z
cHVyaW9AaW50ZWwuY29tPgpDYzogUm9kcmlnbyBWaXZpIDxyb2RyaWdvLnZpdmlAaW50ZWwuY29t
PgpDYzogQW51c2hhIFNyaXZhdHNhIDxhbnVzaGEuc3JpdmF0c2FAaW50ZWwuY29tPgpDYzogSmVm
ZiBNY2dlZSA8amVmZi5tY2dlZUBpbnRlbC5jb20+CkNjOiBKb2huIFNwb3Rzd29vZCA8am9obi5h
LnNwb3Rzd29vZEBpbnRlbC5jb20+CkNjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5A
aW50ZWwuY29tPgpDYzogVG9tYXN6IExpcyA8dG9tYXN6Lmxpc0BpbnRlbC5jb20+CkFja2VkLWJ5
OiBEYW5pZWxlIENlcmFvbG8gU3B1cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29t
PiAjIG51bWJlcmluZyBzY2hlbWEKQWNrZWQtYnk6IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRh
bmllbGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5jb20+ICMgY2NzIGhlYXNlcgpBY2tlZC1ieTogRGFu
aWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGludGVsLmNvbT4gIyBi
b290IHBhcmFtcwpBY2tlZC1ieTogSm9obiBTcG90c3dvb2QgPGpvaG4uYS5zcG90c3dvb2RAaW50
ZWwuY29tPiAjIHN1c3BlbmQvcmVzdW1lCkFja2VkLWJ5OiBEYW5pZWxlIENlcmFvbG8gU3B1cmlv
IDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29tPiAjIHNhbXBsZS1mb3JjZXdha2UKQWNr
ZWQtYnk6IEpvaG4gU3BvdHN3b29kIDxqb2huLmEuc3BvdHN3b29kQGludGVsLmNvbT4gIyBzYW1w
bGUtZm9yY2V3YWtlCkFja2VkLWJ5OiBEYW5pZWxlIENlcmFvbG8gU3B1cmlvIDxkYW5pZWxlLmNl
cmFvbG9zcHVyaW9AaW50ZWwuY29tPiAjIEFEUwotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZS5oICAgIHwgICAyICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZV9jcy5jIHwgICA5ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWMuYyAg
ICAgICAgICB8ICA4OCArKysrLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNf
YWRzLmMgICAgICB8ICA5NSArKysrKysrLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
Z3VjX2Z3LmMgICAgICAgfCAgNzUgKysrKystLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF9ndWNfZndpZi5oICAgICB8IDE5MSArKysrKysrKysrLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF91Y19mdy5jICAgICAgICB8ICAyMCArLS0KIDcgZmlsZXMgY2hhbmdl
ZCwgMjM3IGluc2VydGlvbnMoKyksIDI0MyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2VuZ2luZS5oCmluZGV4IDkzNTliM2E3YWQ5Yy4uMWMwZGIxNTFmMGIxIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaApAQCAtNTI2LDYgKzUyNiw4IEBAIGt0
aW1lX3QgaW50ZWxfZW5naW5lX2dldF9idXN5X3RpbWUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAq
ZW5naW5lKTsKIHN0cnVjdCBpOTE1X3JlcXVlc3QgKgogaW50ZWxfZW5naW5lX2ZpbmRfYWN0aXZl
X3JlcXVlc3Qoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKTsKIAordTMyIGludGVsX2Vu
Z2luZV9jb250ZXh0X3NpemUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHU4IGNsYXNz
KTsKKwogI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1X1NFTEZURVNUKQogCiBzdGF0aWMg
aW5saW5lIGJvb2wgaW5qZWN0X3ByZWVtcHRfaGFuZyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2V4ZWNs
aXN0cyAqZXhlY2xpc3RzKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZW5naW5lX2NzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3Mu
YwppbmRleCAyNTkwZjU5MDRiNjcuLjFjODNlYTlhZGFjMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKQEAgLTE1Niw3ICsxNTYsNyBAQCBzdGF0aWMgY29uc3Qg
c3RydWN0IGVuZ2luZV9pbmZvIGludGVsX2VuZ2luZXNbXSA9IHsKIH07CiAKIC8qKgotICogX19f
aW50ZWxfZW5naW5lX2NvbnRleHRfc2l6ZSgpIC0gcmV0dXJuIHRoZSBzaXplIG9mIHRoZSBjb250
ZXh0IGZvciBhbiBlbmdpbmUKKyAqIGludGVsX2VuZ2luZV9jb250ZXh0X3NpemUoKSAtIHJldHVy
biB0aGUgc2l6ZSBvZiB0aGUgY29udGV4dCBmb3IgYW4gZW5naW5lCiAgKiBAZGV2X3ByaXY6IGk5
MTUgZGV2aWNlIHByaXZhdGUKICAqIEBjbGFzczogZW5naW5lIGNsYXNzCiAgKgpAQCAtMTY5LDgg
KzE2OSw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZW5naW5lX2luZm8gaW50ZWxfZW5naW5lc1td
ID0gewogICogaW4gTFJDIG1vZGUsIGJ1dCBkb2VzIG5vdCBpbmNsdWRlIHRoZSAic2hhcmVkIGRh
dGEgcGFnZSIgdXNlZCB3aXRoCiAgKiBHdUMgc3VibWlzc2lvbi4gVGhlIGNhbGxlciBzaG91bGQg
YWNjb3VudCBmb3IgdGhpcyBpZiB1c2luZyB0aGUgR3VDLgogICovCi1zdGF0aWMgdTMyCi1fX2lu
dGVsX2VuZ2luZV9jb250ZXh0X3NpemUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
LCB1OCBjbGFzcykKK3UzMiBpbnRlbF9lbmdpbmVfY29udGV4dF9zaXplKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICpkZXZfcHJpdiwgdTggY2xhc3MpCiB7CiAJdTMyIGN4dF9zaXplOwogCkBAIC0z
MjcsOCArMzI2LDggQEAgaW50ZWxfZW5naW5lX3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiwKIAogCWVuZ2luZS0+dWFiaV9jbGFzcyA9IGludGVsX2VuZ2luZV9jbGFzc2Vz
W2luZm8tPmNsYXNzXS51YWJpX2NsYXNzOwogCi0JZW5naW5lLT5jb250ZXh0X3NpemUgPSBfX2lu
dGVsX2VuZ2luZV9jb250ZXh0X3NpemUoZGV2X3ByaXYsCi0JCQkJCQkJICAgZW5naW5lLT5jbGFz
cyk7CisJZW5naW5lLT5jb250ZXh0X3NpemUgPSBpbnRlbF9lbmdpbmVfY29udGV4dF9zaXplKGRl
dl9wcml2LAorCQkJCQkJCSBlbmdpbmUtPmNsYXNzKTsKIAlpZiAoV0FSTl9PTihlbmdpbmUtPmNv
bnRleHRfc2l6ZSA+IEJJVCgyMCkpKQogCQllbmdpbmUtPmNvbnRleHRfc2l6ZSA9IDA7CiAJaWYg
KGVuZ2luZS0+Y29udGV4dF9zaXplKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfZ3VjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWMuYwppbmRleCBjNGFj
MjkzMDlmY2MuLjYwZTY0NjNhM2FhYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfZ3VjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3VjLmMKQEAgLTI1
MCwxNCArMjUwLDcgQEAgdm9pZCBpbnRlbF9ndWNfZmluaShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMp
CiBzdGF0aWMgdTMyIGd1Y19jdGxfZGVidWdfZmxhZ3Moc3RydWN0IGludGVsX2d1YyAqZ3VjKQog
ewogCXUzMiBsZXZlbCA9IGludGVsX2d1Y19sb2dfZ2V0X2xldmVsKCZndWMtPmxvZyk7Ci0JdTMy
IGZsYWdzOwotCXUzMiBhZHM7Ci0KLQlhZHMgPSBpbnRlbF9ndWNfZ2d0dF9vZmZzZXQoZ3VjLCBn
dWMtPmFkc192bWEpID4+IFBBR0VfU0hJRlQ7Ci0JZmxhZ3MgPSBhZHMgPDwgR1VDX0FEU19BRERS
X1NISUZUIHwgR1VDX0FEU19FTkFCTEVEOwotCi0JaWYgKCFHVUNfTE9HX0xFVkVMX0lTX0VOQUJM
RUQobGV2ZWwpKQotCQlmbGFncyB8PSBHVUNfTE9HX0RFRkFVTFRfRElTQUJMRUQ7CisJdTMyIGZs
YWdzID0gMDsKIAogCWlmICghR1VDX0xPR19MRVZFTF9JU19WRVJCT1NFKGxldmVsKSkKIAkJZmxh
Z3MgfD0gR1VDX0xPR19ESVNBQkxFRDsKQEAgLTI3MiwxMSArMjY1LDcgQEAgc3RhdGljIHUzMiBn
dWNfY3RsX2ZlYXR1cmVfZmxhZ3Moc3RydWN0IGludGVsX2d1YyAqZ3VjKQogewogCXUzMiBmbGFn
cyA9IDA7CiAKLQlmbGFncyB8PSAgR1VDX0NUTF9WQ1MyX0VOQUJMRUQ7Ci0KLQlpZiAoVVNFU19H
VUNfU1VCTUlTU0lPTihndWNfdG9faTkxNShndWMpKSkKLQkJZmxhZ3MgfD0gR1VDX0NUTF9LRVJO
RUxfU1VCTUlTU0lPTlM7Ci0JZWxzZQorCWlmICghVVNFU19HVUNfU1VCTUlTU0lPTihndWNfdG9f
aTkxNShndWMpKSkKIAkJZmxhZ3MgfD0gR1VDX0NUTF9ESVNBQkxFX1NDSEVEVUxFUjsKIAogCXJl
dHVybiBmbGFnczsKQEAgLTM0MCw2ICszMjksMTQgQEAgc3RhdGljIHUzMiBndWNfY3RsX2xvZ19w
YXJhbXNfZmxhZ3Moc3RydWN0IGludGVsX2d1YyAqZ3VjKQogCXJldHVybiBmbGFnczsKIH0KIAor
c3RhdGljIHUzMiBndWNfY3RsX2Fkc19mbGFncyhzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCit7CisJ
dTMyIGFkcyA9IGludGVsX2d1Y19nZ3R0X29mZnNldChndWMsIGd1Yy0+YWRzX3ZtYSkgPj4gUEFH
RV9TSElGVDsKKwl1MzIgZmxhZ3MgPSBhZHMgPDwgR1VDX0FEU19BRERSX1NISUZUOworCisJcmV0
dXJuIGZsYWdzOworfQorCiAvKgogICogSW5pdGlhbGlzZSB0aGUgR3VDIHBhcmFtZXRlciBibG9j
ayBiZWZvcmUgc3RhcnRpbmcgdGhlIGZpcm13YXJlCiAgKiB0cmFuc2Zlci4gVGhlc2UgcGFyYW1l
dGVycyBhcmUgcmVhZCBieSB0aGUgZmlybXdhcmUgb24gc3RhcnR1cApAQCAtMzUzLDIwICszNTAs
MTEgQEAgdm9pZCBpbnRlbF9ndWNfaW5pdF9wYXJhbXMoc3RydWN0IGludGVsX2d1YyAqZ3VjKQog
CiAJbWVtc2V0KHBhcmFtcywgMCwgc2l6ZW9mKHBhcmFtcykpOwogCi0JLyoKLQkgKiBHdUMgQVJB
VCBpbmNyZW1lbnQgaXMgMTAgbnMuIEd1QyBkZWZhdWx0IHNjaGVkdWxlciBxdWFudHVtIGlzIG9u
ZQotCSAqIHNlY29uZC4gVGhpcyBBUkFSIGlzIGNhbGN1bGF0ZWQgYnk6Ci0JICogU2NoZWR1bGVy
LVF1YW50dW0taW4tbnMgLyBBUkFULWluY3JlbWVudC1pbi1ucyA9IDEwMDAwMDAwMDAgLyAxMAot
CSAqLwotCXBhcmFtc1tHVUNfQ1RMX0FSQVRfSElHSF0gPSAwOwotCXBhcmFtc1tHVUNfQ1RMX0FS
QVRfTE9XXSA9IDEwMDAwMDAwMDsKLQotCXBhcmFtc1tHVUNfQ1RMX1dBXSB8PSBHVUNfQ1RMX1dB
X1VLX0JZX0RSSVZFUjsKLQorCXBhcmFtc1tHVUNfQ1RMX0NUWElORk9dID0gZ3VjX2N0bF9jdHhp
bmZvX2ZsYWdzKGd1Yyk7CisJcGFyYW1zW0dVQ19DVExfTE9HX1BBUkFNU10gPSBndWNfY3RsX2xv
Z19wYXJhbXNfZmxhZ3MoZ3VjKTsKIAlwYXJhbXNbR1VDX0NUTF9GRUFUVVJFXSA9IGd1Y19jdGxf
ZmVhdHVyZV9mbGFncyhndWMpOwotCXBhcmFtc1tHVUNfQ1RMX0xPR19QQVJBTVNdICA9IGd1Y19j
dGxfbG9nX3BhcmFtc19mbGFncyhndWMpOwogCXBhcmFtc1tHVUNfQ1RMX0RFQlVHXSA9IGd1Y19j
dGxfZGVidWdfZmxhZ3MoZ3VjKTsKLQlwYXJhbXNbR1VDX0NUTF9DVFhJTkZPXSA9IGd1Y19jdGxf
Y3R4aW5mb19mbGFncyhndWMpOworCXBhcmFtc1tHVUNfQ1RMX0FEU10gPSBndWNfY3RsX2Fkc19m
bGFncyhndWMpOwogCiAJZm9yIChpID0gMDsgaSA8IEdVQ19DVExfTUFYX0RXT1JEUzsgaSsrKQog
CQlEUk1fREVCVUdfRFJJVkVSKCJwYXJhbVslMmRdID0gJSN4XG4iLCBpLCBwYXJhbXNbaV0pOwpA
QCAtNTUwLDI1ICs1MzgsMzMgQEAgaW50IGludGVsX2d1Y19hdXRoX2h1YyhzdHJ1Y3QgaW50ZWxf
Z3VjICpndWMsIHUzMiByc2Ffb2Zmc2V0KQogCXJldHVybiBpbnRlbF9ndWNfc2VuZChndWMsIGFj
dGlvbiwgQVJSQVlfU0laRShhY3Rpb24pKTsKIH0KIAotLyoKLSAqIFRoZSBFTlRFUi9FWElUX1Nf
U1RBVEUgYWN0aW9ucyBxdWV1ZSB0aGUgc2F2ZS9yZXN0b3JlIG9wZXJhdGlvbiBpbiBHdUMgRlcg
YW5kCi0gKiB0aGVuIHJldHVybiwgc28gd2FpdGluZyBvbiB0aGUgSDJHIGlzIG5vdCBlbm91Z2gg
dG8gZ3VhcmFudGVlIEd1QyBpcyBkb25lLgotICogV2hlbiBhbGwgdGhlIHByb2Nlc3NpbmcgaXMg
ZG9uZSwgR3VDIHdyaXRlcyBJTlRFTF9HVUNfU0xFRVBfU1RBVEVfU1VDQ0VTUyB0bwotICogc2Ny
YXRjaCByZWdpc3RlciAxNCwgc28gd2UgY2FuIHBvbGwgb24gdGhhdC4gTm90ZSB0aGF0IEd1QyBk
b2VzIG5vdCBlbnN1cmUKLSAqIHRoYXQgdGhlIHZhbHVlIGluIHRoZSByZWdpc3RlciBpcyBkaWZm
ZXJlbnQgZnJvbQotICogSU5URUxfR1VDX1NMRUVQX1NUQVRFX1NVQ0NFU1Mgd2hpbGUgdGhlIGFj
dGlvbiBpcyBpbiBwcm9ncmVzcyBzbyB3ZSBuZWVkIHRvCi0gKiB0YWtlIGNhcmUgb2YgdGhhdCBv
dXJzZWx2ZXMgYXMgd2VsbC4KKy8qKgorICogaW50ZWxfZ3VjX3N1c3BlbmQoKSAtIG5vdGlmeSBH
dUMgZW50ZXJpbmcgc3VzcGVuZCBzdGF0ZQorICogQGd1YzoJdGhlIGd1YwogICovCi1zdGF0aWMg
aW50IGd1Y19zbGVlcF9zdGF0ZV9hY3Rpb24oc3RydWN0IGludGVsX2d1YyAqZ3VjLAotCQkJCSAg
Y29uc3QgdTMyICphY3Rpb24sIHUzMiBsZW4pCitpbnQgaW50ZWxfZ3VjX3N1c3BlbmQoc3RydWN0
IGludGVsX2d1YyAqZ3VjKQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9
IGd1Y190b19pOTE1KGd1Yyk7CiAJaW50IHJldDsKIAl1MzIgc3RhdHVzOworCXUzMiBhY3Rpb25b
XSA9IHsKKwkJSU5URUxfR1VDX0FDVElPTl9FTlRFUl9TX1NUQVRFLAorCQlHVUNfUE9XRVJfRDEs
IC8qIGFueSB2YWx1ZSBncmVhdGVyIHRoYW4gR1VDX1BPV0VSX0QwICovCisJfTsKKworCS8qCisJ
ICogVGhlIEVOVEVSX1NfU1RBVEUgYWN0aW9uIHF1ZXVlcyB0aGUgc2F2ZS9yZXN0b3JlIG9wZXJh
dGlvbiBpbiBHdUMgRlcKKwkgKiBhbmQgdGhlbiByZXR1cm5zLCBzbyB3YWl0aW5nIG9uIHRoZSBI
MkcgaXMgbm90IGVub3VnaCB0byBndWFyYW50ZWUKKwkgKiBHdUMgaXMgZG9uZS4gV2hlbiBhbGwg
dGhlIHByb2Nlc3NpbmcgaXMgZG9uZSwgR3VDIHdyaXRlcworCSAqIElOVEVMX0dVQ19TTEVFUF9T
VEFURV9TVUNDRVNTIHRvIHNjcmF0Y2ggcmVnaXN0ZXIgMTQsIHNvIHdlIGNhbiBwb2xsCisJICog
b24gdGhhdC4gTm90ZSB0aGF0IEd1QyBkb2VzIG5vdCBlbnN1cmUgdGhhdCB0aGUgdmFsdWUgaW4g
dGhlIHJlZ2lzdGVyCisJICogaXMgZGlmZmVyZW50IGZyb20gSU5URUxfR1VDX1NMRUVQX1NUQVRF
X1NVQ0NFU1Mgd2hpbGUgdGhlIGFjdGlvbiBpcworCSAqIGluIHByb2dyZXNzIHNvIHdlIG5lZWQg
dG8gdGFrZSBjYXJlIG9mIHRoYXQgb3Vyc2VsdmVzIGFzIHdlbGwuCisJICovCiAKIAlJOTE1X1dS
SVRFKFNPRlRfU0NSQVRDSCgxNCksIElOVEVMX0dVQ19TTEVFUF9TVEFURV9JTlZBTElEX01BU0sp
OwogCi0JcmV0ID0gaW50ZWxfZ3VjX3NlbmQoZ3VjLCBhY3Rpb24sIGxlbik7CisJcmV0ID0gaW50
ZWxfZ3VjX3NlbmQoZ3VjLCBhY3Rpb24sIEFSUkFZX1NJWkUoYWN0aW9uKSk7CiAJaWYgKHJldCkK
IAkJcmV0dXJuIHJldDsKIApAQCAtNTg4LDIxICs1ODQsNiBAQCBzdGF0aWMgaW50IGd1Y19zbGVl
cF9zdGF0ZV9hY3Rpb24oc3RydWN0IGludGVsX2d1YyAqZ3VjLAogCXJldHVybiAwOwogfQogCi0v
KioKLSAqIGludGVsX2d1Y19zdXNwZW5kKCkgLSBub3RpZnkgR3VDIGVudGVyaW5nIHN1c3BlbmQg
c3RhdGUKLSAqIEBndWM6CXRoZSBndWMKLSAqLwotaW50IGludGVsX2d1Y19zdXNwZW5kKHN0cnVj
dCBpbnRlbF9ndWMgKmd1YykKLXsKLQl1MzIgZGF0YVtdID0gewotCQlJTlRFTF9HVUNfQUNUSU9O
X0VOVEVSX1NfU1RBVEUsCi0JCUdVQ19QT1dFUl9EMSwgLyogYW55IHZhbHVlIGdyZWF0ZXIgdGhh
biBHVUNfUE9XRVJfRDAgKi8KLQkJaW50ZWxfZ3VjX2dndHRfb2Zmc2V0KGd1YywgZ3VjLT5zaGFy
ZWRfZGF0YSkKLQl9OwotCi0JcmV0dXJuIGd1Y19zbGVlcF9zdGF0ZV9hY3Rpb24oZ3VjLCBkYXRh
LCBBUlJBWV9TSVpFKGRhdGEpKTsKLX0KLQogLyoqCiAgKiBpbnRlbF9ndWNfcmVzZXRfZW5naW5l
KCkgLSBhc2sgR3VDIHRvIHJlc2V0IGFuIGVuZ2luZQogICogQGd1YzoJaW50ZWxfZ3VjIHN0cnVj
dHVyZQpAQCAtNjMyLDEzICs2MTMsMTIgQEAgaW50IGludGVsX2d1Y19yZXNldF9lbmdpbmUoc3Ry
dWN0IGludGVsX2d1YyAqZ3VjLAogICovCiBpbnQgaW50ZWxfZ3VjX3Jlc3VtZShzdHJ1Y3QgaW50
ZWxfZ3VjICpndWMpCiB7Ci0JdTMyIGRhdGFbXSA9IHsKKwl1MzIgYWN0aW9uW10gPSB7CiAJCUlO
VEVMX0dVQ19BQ1RJT05fRVhJVF9TX1NUQVRFLAogCQlHVUNfUE9XRVJfRDAsCi0JCWludGVsX2d1
Y19nZ3R0X29mZnNldChndWMsIGd1Yy0+c2hhcmVkX2RhdGEpCiAJfTsKIAotCXJldHVybiBndWNf
c2xlZXBfc3RhdGVfYWN0aW9uKGd1YywgZGF0YSwgQVJSQVlfU0laRShkYXRhKSk7CisJcmV0dXJu
IGludGVsX2d1Y19zZW5kKGd1YywgYWN0aW9uLCBBUlJBWV9TSVpFKGFjdGlvbikpOwogfQogCiAv
KioKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19hZHMuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19hZHMuYwppbmRleCBiZWM2MmYzNGIxNWEuLjFh
YTFlYzBmZjRhMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3VjX2Fk
cy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19hZHMuYwpAQCAtNTEsNyAr
NTEsNyBAQCBzdGF0aWMgdm9pZCBndWNfcG9saWNpZXNfaW5pdChzdHJ1Y3QgZ3VjX3BvbGljaWVz
ICpwb2xpY2llcykKIAlwb2xpY2llcy0+bWF4X251bV93b3JrX2l0ZW1zID0gUE9MSUNZX01BWF9O
VU1fV0k7CiAKIAlmb3IgKHAgPSAwOyBwIDwgR1VDX0NMSUVOVF9QUklPUklUWV9OVU07IHArKykg
ewotCQlmb3IgKGkgPSBHVUNfUkVOREVSX0VOR0lORTsgaSA8IEdVQ19NQVhfRU5HSU5FU19OVU07
IGkrKykgeworCQlmb3IgKGkgPSAwOyBpIDwgR1VDX01BWF9FTkdJTkVfQ0xBU1NFUzsgaSsrKSB7
CiAJCQlwb2xpY3kgPSAmcG9saWNpZXMtPnBvbGljeVtwXVtpXTsKIAogCQkJZ3VjX3BvbGljeV9p
bml0KHBvbGljeSk7CkBAIC02MSw2ICs2MSwxMSBAQCBzdGF0aWMgdm9pZCBndWNfcG9saWNpZXNf
aW5pdChzdHJ1Y3QgZ3VjX3BvbGljaWVzICpwb2xpY2llcykKIAlwb2xpY2llcy0+aXNfdmFsaWQg
PSAxOwogfQogCitzdGF0aWMgdm9pZCBndWNfY3RfcG9vbF9lbnRyaWVzX2luaXQoc3RydWN0IGd1
Y19jdF9wb29sX2VudHJ5ICpwb29sLCB1MzIgbnVtKQoreworCW1lbXNldChwb29sLCAwLCBudW0g
KiBzaXplb2YoKnBvb2wpKTsKK30KKwogLyoKICAqIFRoZSBmaXJzdCA4MCBkd29yZHMgb2YgdGhl
IHJlZ2lzdGVyIHN0YXRlIGNvbnRleHQsIGNvbnRhaW5pbmcgdGhlCiAgKiBleGVjbGlzdHMgYW5k
IHBwZ3R0IHJlZ2lzdGVycy4KQEAgLTc1LDIwICs4MCwyMSBAQCBzdGF0aWMgdm9pZCBndWNfcG9s
aWNpZXNfaW5pdChzdHJ1Y3QgZ3VjX3BvbGljaWVzICpwb2xpY2llcykKIGludCBpbnRlbF9ndWNf
YWRzX2NyZWF0ZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiB7CiAJc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2ID0gZ3VjX3RvX2k5MTUoZ3VjKTsKLQlzdHJ1Y3QgaTkxNV92bWEgKnZt
YSwgKmtlcm5lbF9jdHhfdm1hOwotCXN0cnVjdCBwYWdlICpwYWdlOworCXN0cnVjdCBpOTE1X3Zt
YSAqdm1hOwogCS8qIFRoZSBhZHMgb2JqIGluY2x1ZGVzIHRoZSBzdHJ1Y3QgaXRzZWxmIGFuZCBi
dWZmZXJzIHBhc3NlZCB0byBHdUMgKi8KIAlzdHJ1Y3QgewogCQlzdHJ1Y3QgZ3VjX2FkcyBhZHM7
CiAJCXN0cnVjdCBndWNfcG9saWNpZXMgcG9saWNpZXM7CiAJCXN0cnVjdCBndWNfbW1pb19yZWdf
c3RhdGUgcmVnX3N0YXRlOworCQlzdHJ1Y3QgZ3VjX2d0X3N5c3RlbV9pbmZvIHN5c3RlbV9pbmZv
OworCQlzdHJ1Y3QgZ3VjX2NsaWVudHNfaW5mbyBjbGllbnRzX2luZm87CisJCXN0cnVjdCBndWNf
Y3RfcG9vbF9lbnRyeSBjdF9wb29sW0dVQ19DVF9QT09MX1NJWkVdOwogCQl1OCByZWdfc3RhdGVf
YnVmZmVyW0dVQ19TM19TQVZFX1NQQUNFX1BBR0VTICogUEFHRV9TSVpFXTsKIAl9IF9fcGFja2Vk
ICpibG9iOwotCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZTsKLQllbnVtIGludGVsX2Vu
Z2luZV9pZCBpZDsKLQljb25zdCB1MzIgc2tpcHBlZF9vZmZzZXQgPSBMUkNfSEVBREVSX1BBR0VT
ICogUEFHRV9TSVpFOwogCWNvbnN0IHUzMiBza2lwcGVkX3NpemUgPSBMUkNfUFBIV1NQX1NaICog
UEFHRV9TSVpFICsgTFJfSFdfQ09OVEVYVF9TSVpFOwogCXUzMiBiYXNlOworCXU4IGVuZ2luZV9j
bGFzczsKKwlpbnQgcmV0OwogCiAJR0VNX0JVR19PTihndWMtPmFkc192bWEpOwogCkBAIC05OCw1
MSArMTA0LDY4IEBAIGludCBpbnRlbF9ndWNfYWRzX2NyZWF0ZShzdHJ1Y3QgaW50ZWxfZ3VjICpn
dWMpCiAKIAlndWMtPmFkc192bWEgPSB2bWE7CiAKLQlwYWdlID0gaTkxNV92bWFfZmlyc3RfcGFn
ZSh2bWEpOwotCWJsb2IgPSBrbWFwKHBhZ2UpOworCWJsb2IgPSBpOTE1X2dlbV9vYmplY3RfcGlu
X21hcChndWMtPmFkc192bWEtPm9iaiwgSTkxNV9NQVBfV0IpOworCWlmIChJU19FUlIoYmxvYikp
IHsKKwkJcmV0ID0gUFRSX0VSUihibG9iKTsKKwkJZ290byBlcnJfdm1hOworCX0KIAogCS8qIEd1
QyBzY2hlZHVsaW5nIHBvbGljaWVzICovCiAJZ3VjX3BvbGljaWVzX2luaXQoJmJsb2ItPnBvbGlj
aWVzKTsKIAotCS8qIE1NSU8gcmVnIHN0YXRlICovCi0JZm9yX2VhY2hfZW5naW5lKGVuZ2luZSwg
ZGV2X3ByaXYsIGlkKSB7Ci0JCWJsb2ItPnJlZ19zdGF0ZS53aGl0ZV9saXN0W2VuZ2luZS0+Z3Vj
X2lkXS5tbWlvX3N0YXJ0ID0KLQkJCWVuZ2luZS0+bW1pb19iYXNlICsgR1VDX01NSU9fV0hJVEVf
TElTVF9TVEFSVDsKLQotCQkvKiBOb3RoaW5nIHRvIGJlIHNhdmVkIG9yIHJlc3RvcmVkIGZvciBu
b3cuICovCi0JCWJsb2ItPnJlZ19zdGF0ZS53aGl0ZV9saXN0W2VuZ2luZS0+Z3VjX2lkXS5jb3Vu
dCA9IDA7Ci0JfQotCiAJLyoKLQkgKiBUaGUgR3VDIHJlcXVpcmVzIGEgIkdvbGRlbiBDb250ZXh0
IiB3aGVuIGl0IHJlaW5pdGlhbGlzZXMKLQkgKiBlbmdpbmVzIGFmdGVyIGEgcmVzZXQuIEhlcmUg
d2UgdXNlIHRoZSBSZW5kZXIgcmluZyBkZWZhdWx0Ci0JICogY29udGV4dCwgd2hpY2ggbXVzdCBh
bHJlYWR5IGV4aXN0IGFuZCBiZSBwaW5uZWQgaW4gdGhlIEdHVFQsCi0JICogc28gaXRzIGFkZHJl
c3Mgd29uJ3QgY2hhbmdlIGFmdGVyIHdlJ3ZlIHRvbGQgdGhlIEd1QyB3aGVyZQotCSAqIHRvIGZp
bmQgaXQuIE5vdGUgdGhhdCB3ZSBoYXZlIHRvIHNraXAgb3VyIGhlYWRlciAoMSBwYWdlKSwKLQkg
KiBiZWNhdXNlIG91ciBHdUMgc2hhcmVkIGRhdGEgaXMgdGhlcmUuCisJICogR3VDIGV4cGVjdHMg
YSBwZXItZW5naW5lLWNsYXNzIGNvbnRleHQgaW1hZ2UgYW5kIHNpemUKKwkgKiAobWludXMgaHdz
cCBhbmQgcmluZyBjb250ZXh0KS4gVGhlIGNvbnRleHQgaW1hZ2Ugd2lsbCBiZQorCSAqIHVzZWQg
dG8gcmVpbml0aWFsaXplIGVuZ2luZXMgYWZ0ZXIgYSByZXNldC4gSXQgbXVzdCBleGlzdAorCSAq
IGFuZCBiZSBwaW5uZWQgaW4gdGhlIEdHVFQsIHNvIHRoYXQgdGhlIGFkZHJlc3Mgd29uJ3QgY2hh
bmdlIGFmdGVyCisJICogd2UgaGF2ZSB0b2xkIEd1QyB3aGVyZSB0byBmaW5kIGl0LiBUaGUgY29u
dGV4dCBzaXplIHdpbGwgYmUgdXNlZAorCSAqIHRvIHZhbGlkYXRlIHRoYXQgdGhlIExSQyBiYXNl
ICsgc2l6ZSBmYWxsIHdpdGhpbiBhbGxvd2VkIEdHVFQuCiAJICovCi0Ja2VybmVsX2N0eF92bWEg
PSBkZXZfcHJpdi0+ZW5naW5lW1JDUzBdLT5rZXJuZWxfY29udGV4dC0+c3RhdGU7Ci0JYmxvYi0+
YWRzLmdvbGRlbl9jb250ZXh0X2xyY2EgPQotCQlpbnRlbF9ndWNfZ2d0dF9vZmZzZXQoZ3VjLCBr
ZXJuZWxfY3R4X3ZtYSkgKyBza2lwcGVkX29mZnNldDsKKwlmb3IgKGVuZ2luZV9jbGFzcyA9IDA7
IGVuZ2luZV9jbGFzcyA8PSBNQVhfRU5HSU5FX0NMQVNTOyArK2VuZ2luZV9jbGFzcykgeworCQlp
ZiAoZW5naW5lX2NsYXNzID09IE9USEVSX0NMQVNTKQorCQkJY29udGludWU7CisJCS8qCisJCSAq
IFRPRE86IFNldCBjb250ZXh0IHBvaW50ZXIgdG8gZGVmYXVsdCBzdGF0ZSB0byBhbGxvdworCQkg
KiBHdUMgdG8gcmUtaW5pdCBndWlsdHkgY29udGV4dHMgYWZ0ZXIgaW50ZXJuYWwgcmVzZXQuCisJ
CSAqLworCQlibG9iLT5hZHMuZ29sZGVuX2NvbnRleHRfbHJjYVtlbmdpbmVfY2xhc3NdID0gMDsK
KwkJYmxvYi0+YWRzLmVuZ19zdGF0ZV9zaXplW2VuZ2luZV9jbGFzc10gPQorCQkJaW50ZWxfZW5n
aW5lX2NvbnRleHRfc2l6ZShkZXZfcHJpdiwgZW5naW5lX2NsYXNzKSAtCisJCQlza2lwcGVkX3Np
emU7CisJfQogCi0JLyoKLQkgKiBUaGUgR3VDIGV4cGVjdHMgdXMgdG8gZXhjbHVkZSB0aGUgcG9y
dGlvbiBvZiB0aGUgY29udGV4dCBpbWFnZSB0aGF0Ci0JICogaXQgc2tpcHMgZnJvbSB0aGUgc2l6
ZSBpdCBpcyB0byByZWFkLiBJdCBzdGFydHMgcmVhZGluZyBmcm9tIGFmdGVyCi0JICogdGhlIGV4
ZWNsaXN0IGNvbnRleHQgKHNvIHNraXBwaW5nIHRoZSBmaXJzdCBwYWdlIFtQUEhXU1BdIGFuZCA4
MAotCSAqIGR3b3JkcykuIFdlaXJkIGd1YyBpcyB3ZWlyZC4KLQkgKi8KLQlmb3JfZWFjaF9lbmdp
bmUoZW5naW5lLCBkZXZfcHJpdiwgaWQpCi0JCWJsb2ItPmFkcy5lbmdfc3RhdGVfc2l6ZVtlbmdp
bmUtPmd1Y19pZF0gPQotCQkJZW5naW5lLT5jb250ZXh0X3NpemUgLSBza2lwcGVkX3NpemU7CisJ
LyogU3lzdGVtIGluZm8gKi8KKwlibG9iLT5zeXN0ZW1faW5mby5zbGljZV9lbmFibGVkID0gaHdl
aWdodDgoUlVOVElNRV9JTkZPKGRldl9wcml2KS0+c3NldS5zbGljZV9tYXNrKTsKKwlibG9iLT5z
eXN0ZW1faW5mby5yY3NfZW5hYmxlZCA9IDE7CisJYmxvYi0+c3lzdGVtX2luZm8uYmNzX2VuYWJs
ZWQgPSAxOworCisJYmxvYi0+c3lzdGVtX2luZm8udmRib3hfZW5hYmxlX21hc2sgPSBWREJPWF9N
QVNLKGRldl9wcml2KTsKKwlibG9iLT5zeXN0ZW1faW5mby52ZWJveF9lbmFibGVfbWFzayA9IFZF
Qk9YX01BU0soZGV2X3ByaXYpOworCWJsb2ItPnN5c3RlbV9pbmZvLnZkYm94X3NmY19zdXBwb3J0
X21hc2sgPSBSVU5USU1FX0lORk8oZGV2X3ByaXYpLT52ZGJveF9zZmNfYWNjZXNzOwogCiAJYmFz
ZSA9IGludGVsX2d1Y19nZ3R0X29mZnNldChndWMsIHZtYSk7CisKKwkvKiBDbGllbnRzIGluZm8g
ICovCisJZ3VjX2N0X3Bvb2xfZW50cmllc19pbml0KGJsb2ItPmN0X3Bvb2wsIEFSUkFZX1NJWkUo
YmxvYi0+Y3RfcG9vbCkpOworCisJYmxvYi0+Y2xpZW50c19pbmZvLmNsaWVudHNfbnVtID0gMTsK
KwlibG9iLT5jbGllbnRzX2luZm8uY3RfcG9vbF9hZGRyID0gYmFzZSArIHB0cl9vZmZzZXQoYmxv
YiwgY3RfcG9vbCk7CisJYmxvYi0+Y2xpZW50c19pbmZvLmN0X3Bvb2xfY291bnQgPSBBUlJBWV9T
SVpFKGJsb2ItPmN0X3Bvb2wpOworCisJLyogQURTICovCiAJYmxvYi0+YWRzLnNjaGVkdWxlcl9w
b2xpY2llcyA9IGJhc2UgKyBwdHJfb2Zmc2V0KGJsb2IsIHBvbGljaWVzKTsKIAlibG9iLT5hZHMu
cmVnX3N0YXRlX2J1ZmZlciA9IGJhc2UgKyBwdHJfb2Zmc2V0KGJsb2IsIHJlZ19zdGF0ZV9idWZm
ZXIpOwogCWJsb2ItPmFkcy5yZWdfc3RhdGVfYWRkciA9IGJhc2UgKyBwdHJfb2Zmc2V0KGJsb2Is
IHJlZ19zdGF0ZSk7CisJYmxvYi0+YWRzLmd0X3N5c3RlbV9pbmZvID0gYmFzZSArIHB0cl9vZmZz
ZXQoYmxvYiwgc3lzdGVtX2luZm8pOworCWJsb2ItPmFkcy5jbGllbnRzX2luZm8gPSBiYXNlICsg
cHRyX29mZnNldChibG9iLCBjbGllbnRzX2luZm8pOwogCi0Ja3VubWFwKHBhZ2UpOworCWk5MTVf
Z2VtX29iamVjdF91bnBpbl9tYXAoZ3VjLT5hZHNfdm1hLT5vYmopOwogCiAJcmV0dXJuIDA7CisK
K2Vycl92bWE6CisJaTkxNV92bWFfdW5waW5fYW5kX3JlbGVhc2UoJmd1Yy0+YWRzX3ZtYSwgMCk7
CisJcmV0dXJuIHJldDsKIH0KIAogdm9pZCBpbnRlbF9ndWNfYWRzX2Rlc3Ryb3koc3RydWN0IGlu
dGVsX2d1YyAqZ3VjKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3Vj
X2Z3LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfZncuYwppbmRleCA4YjJkY2M3
MGI5NTYuLmM3NDBiZjM3MzFkZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50
ZWxfZ3VjX2Z3LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3VjX2Z3LmMKQEAg
LTMwLDUzICszMCw2MCBAQAogI2luY2x1ZGUgImludGVsX2d1Y19mdy5oIgogI2luY2x1ZGUgImk5
MTVfZHJ2LmgiCiAKLSNkZWZpbmUgU0tMX0ZXX01BSk9SIDkKLSNkZWZpbmUgU0tMX0ZXX01JTk9S
IDMzCi0KLSNkZWZpbmUgQlhUX0ZXX01BSk9SIDkKLSNkZWZpbmUgQlhUX0ZXX01JTk9SIDI5Ci0K
LSNkZWZpbmUgS0JMX0ZXX01BSk9SIDkKLSNkZWZpbmUgS0JMX0ZXX01JTk9SIDM5Ci0KLSNkZWZp
bmUgR1VDX0ZXX1BBVEgocGxhdGZvcm0sIG1ham9yLCBtaW5vcikgXAotICAgICAgICJpOTE1LyIg
X19zdHJpbmdpZnkocGxhdGZvcm0pICJfZ3VjX3ZlciIgX19zdHJpbmdpZnkobWFqb3IpICJfIiBf
X3N0cmluZ2lmeShtaW5vcikgIi5iaW4iCi0KLSNkZWZpbmUgSTkxNV9TS0xfR1VDX1VDT0RFIEdV
Q19GV19QQVRIKHNrbCwgU0tMX0ZXX01BSk9SLCBTS0xfRldfTUlOT1IpCi1NT0RVTEVfRklSTVdB
UkUoSTkxNV9TS0xfR1VDX1VDT0RFKTsKLQotI2RlZmluZSBJOTE1X0JYVF9HVUNfVUNPREUgR1VD
X0ZXX1BBVEgoYnh0LCBCWFRfRldfTUFKT1IsIEJYVF9GV19NSU5PUikKLU1PRFVMRV9GSVJNV0FS
RShJOTE1X0JYVF9HVUNfVUNPREUpOwotCi0jZGVmaW5lIEk5MTVfS0JMX0dVQ19VQ09ERSBHVUNf
RldfUEFUSChrYmwsIEtCTF9GV19NQUpPUiwgS0JMX0ZXX01JTk9SKQotTU9EVUxFX0ZJUk1XQVJF
KEk5MTVfS0JMX0dVQ19VQ09ERSk7CisjZGVmaW5lIF9fTUFLRV9HVUNfRldfUEFUSChLRVkpIFwK
KwkiaTkxNS8iIFwKKwlfX3N0cmluZ2lmeShLRVkjI19HVUNfRldfUFJFRklYKSAiX2d1Y18iIFwK
KwlfX3N0cmluZ2lmeShLRVkjI19HVUNfRldfTUFKT1IpICIuIiBcCisJX19zdHJpbmdpZnkoS0VZ
IyNfR1VDX0ZXX01JTk9SKSAiLiIgXAorCV9fc3RyaW5naWZ5KEtFWSMjX0dVQ19GV19QQVRDSCkg
Ii5iaW4iCisKKyNkZWZpbmUgU0tMX0dVQ19GV19QUkVGSVggc2tsCisjZGVmaW5lIFNLTF9HVUNf
RldfTUFKT1IgMzIKKyNkZWZpbmUgU0tMX0dVQ19GV19NSU5PUiAwCisjZGVmaW5lIFNLTF9HVUNf
RldfUEFUQ0ggMworI2RlZmluZSBTS0xfR1VDX0ZJUk1XQVJFX1BBVEggX19NQUtFX0dVQ19GV19Q
QVRIKFNLTCkKK01PRFVMRV9GSVJNV0FSRShTS0xfR1VDX0ZJUk1XQVJFX1BBVEgpOworCisjZGVm
aW5lIEJYVF9HVUNfRldfUFJFRklYIGJ4dAorI2RlZmluZSBCWFRfR1VDX0ZXX01BSk9SIDMyCisj
ZGVmaW5lIEJYVF9HVUNfRldfTUlOT1IgMAorI2RlZmluZSBCWFRfR1VDX0ZXX1BBVENIIDMKKyNk
ZWZpbmUgQlhUX0dVQ19GSVJNV0FSRV9QQVRIIF9fTUFLRV9HVUNfRldfUEFUSChCWFQpCitNT0RV
TEVfRklSTVdBUkUoQlhUX0dVQ19GSVJNV0FSRV9QQVRIKTsKKworI2RlZmluZSBLQkxfR1VDX0ZX
X1BSRUZJWCBrYmwKKyNkZWZpbmUgS0JMX0dVQ19GV19NQUpPUiAzMgorI2RlZmluZSBLQkxfR1VD
X0ZXX01JTk9SIDAKKyNkZWZpbmUgS0JMX0dVQ19GV19QQVRDSCAzCisjZGVmaW5lIEtCTF9HVUNf
RklSTVdBUkVfUEFUSCBfX01BS0VfR1VDX0ZXX1BBVEgoS0JMKQorTU9EVUxFX0ZJUk1XQVJFKEtC
TF9HVUNfRklSTVdBUkVfUEFUSCk7CiAKIHN0YXRpYyB2b2lkIGd1Y19md19zZWxlY3Qoc3RydWN0
IGludGVsX3VjX2Z3ICpndWNfZncpCiB7CiAJc3RydWN0IGludGVsX2d1YyAqZ3VjID0gY29udGFp
bmVyX29mKGd1Y19mdywgc3RydWN0IGludGVsX2d1YywgZncpOwotCXN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdiA9IGd1Y190b19pOTE1KGd1Yyk7CisJc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTUgPSBndWNfdG9faTkxNShndWMpOwogCiAJR0VNX0JVR19PTihndWNfZnctPnR5
cGUgIT0gSU5URUxfVUNfRldfVFlQRV9HVUMpOwogCi0JaWYgKCFIQVNfR1VDKGRldl9wcml2KSkK
KwlpZiAoIUhBU19HVUMoaTkxNSkpCiAJCXJldHVybjsKIAogCWlmIChpOTE1X21vZHBhcmFtcy5n
dWNfZmlybXdhcmVfcGF0aCkgewogCQlndWNfZnctPnBhdGggPSBpOTE1X21vZHBhcmFtcy5ndWNf
ZmlybXdhcmVfcGF0aDsKIAkJZ3VjX2Z3LT5tYWpvcl92ZXJfd2FudGVkID0gMDsKIAkJZ3VjX2Z3
LT5taW5vcl92ZXJfd2FudGVkID0gMDsKLQl9IGVsc2UgaWYgKElTX1NLWUxBS0UoZGV2X3ByaXYp
KSB7Ci0JCWd1Y19mdy0+cGF0aCA9IEk5MTVfU0tMX0dVQ19VQ09ERTsKLQkJZ3VjX2Z3LT5tYWpv
cl92ZXJfd2FudGVkID0gU0tMX0ZXX01BSk9SOwotCQlndWNfZnctPm1pbm9yX3Zlcl93YW50ZWQg
PSBTS0xfRldfTUlOT1I7Ci0JfSBlbHNlIGlmIChJU19CUk9YVE9OKGRldl9wcml2KSkgewotCQln
dWNfZnctPnBhdGggPSBJOTE1X0JYVF9HVUNfVUNPREU7Ci0JCWd1Y19mdy0+bWFqb3JfdmVyX3dh
bnRlZCA9IEJYVF9GV19NQUpPUjsKLQkJZ3VjX2Z3LT5taW5vcl92ZXJfd2FudGVkID0gQlhUX0ZX
X01JTk9SOwotCX0gZWxzZSBpZiAoSVNfS0FCWUxBS0UoZGV2X3ByaXYpIHx8IElTX0NPRkZFRUxB
S0UoZGV2X3ByaXYpKSB7Ci0JCWd1Y19mdy0+cGF0aCA9IEk5MTVfS0JMX0dVQ19VQ09ERTsKLQkJ
Z3VjX2Z3LT5tYWpvcl92ZXJfd2FudGVkID0gS0JMX0ZXX01BSk9SOwotCQlndWNfZnctPm1pbm9y
X3Zlcl93YW50ZWQgPSBLQkxfRldfTUlOT1I7CisJfSBlbHNlIGlmIChJU19LQUJZTEFLRShpOTE1
KSB8fCBJU19DT0ZGRUVMQUtFKGk5MTUpKSB7CisJCWd1Y19mdy0+cGF0aCA9IEtCTF9HVUNfRklS
TVdBUkVfUEFUSDsKKwkJZ3VjX2Z3LT5tYWpvcl92ZXJfd2FudGVkID0gS0JMX0dVQ19GV19NQUpP
UjsKKwkJZ3VjX2Z3LT5taW5vcl92ZXJfd2FudGVkID0gS0JMX0dVQ19GV19NSU5PUjsKKwl9IGVs
c2UgaWYgKElTX0JST1hUT04oaTkxNSkpIHsKKwkJZ3VjX2Z3LT5wYXRoID0gQlhUX0dVQ19GSVJN
V0FSRV9QQVRIOworCQlndWNfZnctPm1ham9yX3Zlcl93YW50ZWQgPSBCWFRfR1VDX0ZXX01BSk9S
OworCQlndWNfZnctPm1pbm9yX3Zlcl93YW50ZWQgPSBCWFRfR1VDX0ZXX01JTk9SOworCX0gZWxz
ZSBpZiAoSVNfU0tZTEFLRShpOTE1KSkgeworCQlndWNfZnctPnBhdGggPSBTS0xfR1VDX0ZJUk1X
QVJFX1BBVEg7CisJCWd1Y19mdy0+bWFqb3JfdmVyX3dhbnRlZCA9IFNLTF9HVUNfRldfTUFKT1I7
CisJCWd1Y19mdy0+bWlub3JfdmVyX3dhbnRlZCA9IFNLTF9HVUNfRldfTUlOT1I7CiAJfQogfQog
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfZndpZi5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3VjX2Z3aWYuaAppbmRleCBiMmY1MTQ4ZjRmMTcuLmZh
NzQ1YTU4ZDM4ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZ3VjX2Z3
aWYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfZndpZi5oCkBAIC0zOSw2
ICszOSwxNCBAQAogI2RlZmluZSBHVUNfVklERU9fRU5HSU5FMgkJNAogI2RlZmluZSBHVUNfTUFY
X0VOR0lORVNfTlVNCQkoR1VDX1ZJREVPX0VOR0lORTIgKyAxKQogCisvKgorICogWFhYOiBCZXdh
cmUgdGhhdCBHZW45IGZpcm13YXJlIDMyLnggdXNlcyB3cm9uZyBkZWZpbml0aW9uIGZvcgorICog
R1VDX01BWF9JTlNUQU5DRVNfUEVSX0NMQVNTICgxKSBidXQgdGhpcyBpcyBoYXJtbGVzcyBmb3Ig
dXMgbm93CisgKiBhcyB3ZSBhcmUgbm90IGVuYWJsaW5nIEd1QyBzdWJtaXNzaW9uIG1vZGUgd2hl
cmUgdGhpcyB3aWxsIGJlIHVzZWQKKyAqLworI2RlZmluZSBHVUNfTUFYX0VOR0lORV9DTEFTU0VT
CQk1CisjZGVmaW5lIEdVQ19NQVhfSU5TVEFOQ0VTX1BFUl9DTEFTUwk0CisKICNkZWZpbmUgR1VD
X0RPT1JCRUxMX0lOVkFMSUQJCTI1NgogCiAjZGVmaW5lIEdVQ19EQl9TSVpFCQkJKFBBR0VfU0la
RSkKQEAgLTczLDQ0ICs4MSwyOCBAQAogI2RlZmluZSBHVUNfU1RBR0VfREVTQ19BVFRSX1BDSAkJ
QklUKDYpCiAjZGVmaW5lIEdVQ19TVEFHRV9ERVNDX0FUVFJfVEVSTUlOQVRFRAlCSVQoNykKIAot
LyogVGhlIGd1YyBjb250cm9sIGRhdGEgaXMgMTAgRFdPUkRzICovCisvKiBOZXcgR3VDIGNvbnRy
b2wgZGF0YSAqLwogI2RlZmluZSBHVUNfQ1RMX0NUWElORk8JCQkwCiAjZGVmaW5lICAgR1VDX0NU
TF9DVFhOVU1fSU4xNl9TSElGVAkwCiAjZGVmaW5lICAgR1VDX0NUTF9CQVNFX0FERFJfU0hJRlQJ
MTIKIAotI2RlZmluZSBHVUNfQ1RMX0FSQVRfSElHSAkJMQotI2RlZmluZSBHVUNfQ1RMX0FSQVRf
TE9XCQkyCi0KLSNkZWZpbmUgR1VDX0NUTF9ERVZJQ0VfSU5GTwkJMwotCi0jZGVmaW5lIEdVQ19D
VExfTE9HX1BBUkFNUwkJNAorI2RlZmluZSBHVUNfQ1RMX0xPR19QQVJBTVMJCTEKICNkZWZpbmUg
ICBHVUNfTE9HX1ZBTElECQkJKDEgPDwgMCkKICNkZWZpbmUgICBHVUNfTE9HX05PVElGWV9PTl9I
QUxGX0ZVTEwJKDEgPDwgMSkKICNkZWZpbmUgICBHVUNfTE9HX0FMTE9DX0lOX01FR0FCWVRFCSgx
IDw8IDMpCiAjZGVmaW5lICAgR1VDX0xPR19DUkFTSF9TSElGVAkJNAotI2RlZmluZSAgIEdVQ19M
T0dfQ1JBU0hfTUFTSwkJKDB4MSA8PCBHVUNfTE9HX0NSQVNIX1NISUZUKQorI2RlZmluZSAgIEdV
Q19MT0dfQ1JBU0hfTUFTSwkJKDB4MyA8PCBHVUNfTE9HX0NSQVNIX1NISUZUKQogI2RlZmluZSAg
IEdVQ19MT0dfRFBDX1NISUZUCQk2CiAjZGVmaW5lICAgR1VDX0xPR19EUENfTUFTSwkgICAgICAg
ICgweDcgPDwgR1VDX0xPR19EUENfU0hJRlQpCiAjZGVmaW5lICAgR1VDX0xPR19JU1JfU0hJRlQJ
CTkKICNkZWZpbmUgICBHVUNfTE9HX0lTUl9NQVNLCSAgICAgICAgKDB4NyA8PCBHVUNfTE9HX0lT
Ul9TSElGVCkKICNkZWZpbmUgICBHVUNfTE9HX0JVRl9BRERSX1NISUZUCTEyCiAKLSNkZWZpbmUg
R1VDX0NUTF9QQUdFX0ZBVUxUX0NPTlRST0wJNQorI2RlZmluZSBHVUNfQ1RMX1dBCQkJMgorI2Rl
ZmluZSBHVUNfQ1RMX0ZFQVRVUkUJCQkzCisjZGVmaW5lICAgR1VDX0NUTF9ESVNBQkxFX1NDSEVE
VUxFUgkoMSA8PCAxNCkKIAotI2RlZmluZSBHVUNfQ1RMX1dBCQkJNgotI2RlZmluZSAgIEdVQ19D
VExfV0FfVUtfQllfRFJJVkVSCSgxIDw8IDMpCi0KLSNkZWZpbmUgR1VDX0NUTF9GRUFUVVJFCQkJ
NwotI2RlZmluZSAgIEdVQ19DVExfVkNTMl9FTkFCTEVECQkoMSA8PCAwKQotI2RlZmluZSAgIEdV
Q19DVExfS0VSTkVMX1NVQk1JU1NJT05TCSgxIDw8IDEpCi0jZGVmaW5lICAgR1VDX0NUTF9GRUFU
VVJFMgkJKDEgPDwgMikKLSNkZWZpbmUgICBHVUNfQ1RMX1BPV0VSX0dBVElORwkJKDEgPDwgMykK
LSNkZWZpbmUgICBHVUNfQ1RMX0RJU0FCTEVfU0NIRURVTEVSCSgxIDw8IDQpCi0jZGVmaW5lICAg
R1VDX0NUTF9QUkVFTVBUSU9OX0xPRwkoMSA8PCA1KQotI2RlZmluZSAgIEdVQ19DVExfRU5BQkxF
X1NMUEMJCSgxIDw8IDcpCi0jZGVmaW5lICAgR1VDX0NUTF9SRVNFVF9PTl9QUkVNUFRfRkFJTFVS
RQkoMSA8PCA4KQotCi0jZGVmaW5lIEdVQ19DVExfREVCVUcJCQk4CisjZGVmaW5lIEdVQ19DVExf
REVCVUcJCQk0CiAjZGVmaW5lICAgR1VDX0xPR19WRVJCT1NJVFlfU0hJRlQJMAogI2RlZmluZSAg
IEdVQ19MT0dfVkVSQk9TSVRZX0xPVwkJKDAgPDwgR1VDX0xPR19WRVJCT1NJVFlfU0hJRlQpCiAj
ZGVmaW5lICAgR1VDX0xPR19WRVJCT1NJVFlfTUVECQkoMSA8PCBHVUNfTE9HX1ZFUkJPU0lUWV9T
SElGVCkKQEAgLTEyMywxMyArMTE1LDEwIEBACiAjZGVmaW5lCSAgR1VDX0xPR19ERVNUSU5BVElP
Tl9NQVNLCSgzIDw8IDQpCiAjZGVmaW5lICAgR1VDX0xPR19ESVNBQkxFRAkJKDEgPDwgNikKICNk
ZWZpbmUgICBHVUNfUFJPRklMRV9FTkFCTEVECQkoMSA8PCA3KQotI2RlZmluZSAgIEdVQ19XUV9U
UkFDS19FTkFCTEVECQkoMSA8PCA4KQotI2RlZmluZSAgIEdVQ19BRFNfRU5BQkxFRAkJKDEgPDwg
OSkKLSNkZWZpbmUgICBHVUNfTE9HX0RFRkFVTFRfRElTQUJMRUQJKDEgPDwgMTApCi0jZGVmaW5l
ICAgR1VDX0FEU19BRERSX1NISUZUCQkxMQotI2RlZmluZSAgIEdVQ19BRFNfQUREUl9NQVNLCQkw
eGZmZmZmODAwCiAKLSNkZWZpbmUgR1VDX0NUTF9SU1JWRAkJCTkKKyNkZWZpbmUgR1VDX0NUTF9B
RFMJCQk1CisjZGVmaW5lICAgR1VDX0FEU19BRERSX1NISUZUCQkxCisjZGVmaW5lICAgR1VDX0FE
U19BRERSX01BU0sJCSgweEZGRkZGIDw8IEdVQ19BRFNfQUREUl9TSElGVCkKIAogI2RlZmluZSBH
VUNfQ1RMX01BWF9EV09SRFMJCShTT0ZUX1NDUkFUQ0hfQ09VTlQgLSAyKSAvKiBbMS4uMTRdICov
CiAKQEAgLTE2OCwxMSArMTU3LDcgQEAKICAqICAgIGluIGZ3LiBTbyBkcml2ZXIgd2lsbCBsb2Fk
IGEgdHJ1bmNhdGVkIGZpcm13YXJlIGluIHRoaXMgY2FzZS4KICAqCiAgKiBIdUMgZmlybXdhcmUg
bGF5b3V0IGlzIHNhbWUgYXMgR3VDIGZpcm13YXJlLgotICoKLSAqIEh1QyBmaXJtd2FyZSBjc3Mg
aGVhZGVyIGlzIGRpZmZlcmVudC4gSG93ZXZlciwgdGhlIG9ubHkgZGlmZmVyZW5jZSBpcyB3aGVy
ZQotICogdGhlIHZlcnNpb24gaW5mb3JtYXRpb24gaXMgc2F2ZWQuIFRoZSB1Y19jc3NfaGVhZGVy
IGlzIHVuaWZpZWQgdG8gc3VwcG9ydAotICogYm90aC4gRHJpdmVyIHNob3VsZCBnZXQgSHVDIHZl
cnNpb24gZnJvbSB1Y19jc3NfaGVhZGVyLmh1Y19zd192ZXJzaW9uLCB3aGlsZQotICogdWNfY3Nz
X2hlYWRlci5ndWNfc3dfdmVyc2lvbiBmb3IgR3VDLgorICogT25seSBIdUMgdmVyc2lvbiBpbmZv
cm1hdGlvbiBpcyBzYXZlZCBpbiBhIGRpZmZlcmVudCB3YXkuCiAgKi8KIAogc3RydWN0IHVjX2Nz
c19oZWFkZXIgewpAQCAtMTgzLDQxICsxNjgsMjcgQEAgc3RydWN0IHVjX2Nzc19oZWFkZXIgewog
CXUzMiBoZWFkZXJfdmVyc2lvbjsKIAl1MzIgbW9kdWxlX2lkOwogCXUzMiBtb2R1bGVfdmVuZG9y
OwotCXVuaW9uIHsKLQkJc3RydWN0IHsKLQkJCXU4IGRheTsKLQkJCXU4IG1vbnRoOwotCQkJdTE2
IHllYXI7Ci0JCX07Ci0JCXUzMiBkYXRlOwotCX07CisJdTMyIGRhdGU7CisjZGVmaW5lIENTU19E
QVRFX0RBWQkJCSgweEZGIDw8IDApCisjZGVmaW5lIENTU19EQVRFX01PTlRICQkJKDB4RkYgPDwg
OCkKKyNkZWZpbmUgQ1NTX0RBVEVfWUVBUgkJCSgweEZGRkYgPDwgMTYpCiAJdTMyIHNpemVfZHc7
IC8qIHVDb2RlIHBsdXMgaGVhZGVyX3NpemVfZHcgKi8KIAl1MzIga2V5X3NpemVfZHc7CiAJdTMy
IG1vZHVsdXNfc2l6ZV9kdzsKIAl1MzIgZXhwb25lbnRfc2l6ZV9kdzsKLQl1bmlvbiB7Ci0JCXN0
cnVjdCB7Ci0JCQl1OCBob3VyOwotCQkJdTggbWluOwotCQkJdTE2IHNlYzsKLQkJfTsKLQkJdTMy
IHRpbWU7Ci0JfTsKLQorCXUzMiB0aW1lOworI2RlZmluZSBDU1NfVElNRV9IT1VSCQkJKDB4RkYg
PDwgMCkKKyNkZWZpbmUgQ1NTX0RBVEVfTUlOCQkJKDB4RkYgPDwgOCkKKyNkZWZpbmUgQ1NTX0RB
VEVfU0VDCQkJKDB4RkZGRiA8PCAxNikKIAljaGFyIHVzZXJuYW1lWzhdOwogCWNoYXIgYnVpbGRu
dW1iZXJbMTJdOwotCXVuaW9uIHsKLQkJc3RydWN0IHsKLQkJCXUzMiBicmFuY2hfY2xpZW50X3Zl
cnNpb247Ci0JCQl1MzIgc3dfdmVyc2lvbjsKLQl9IGd1YzsKLQkJc3RydWN0IHsKLQkJCXUzMiBz
d192ZXJzaW9uOwotCQkJdTMyIHJlc2VydmVkOwotCX0gaHVjOwotCX07Ci0JdTMyIHByb2RfcHJl
cHJvZF9mdzsKLQl1MzIgcmVzZXJ2ZWRbMTJdOworCXUzMiBzd192ZXJzaW9uOworI2RlZmluZSBD
U1NfU1dfVkVSU0lPTl9HVUNfTUFKT1IJKDB4RkYgPDwgMTYpCisjZGVmaW5lIENTU19TV19WRVJT
SU9OX0dVQ19NSU5PUgkoMHhGRiA8PCA4KQorI2RlZmluZSBDU1NfU1dfVkVSU0lPTl9HVUNfUEFU
Q0gJKDB4RkYgPDwgMCkKKyNkZWZpbmUgQ1NTX1NXX1ZFUlNJT05fSFVDX01BSk9SCSgweEZGRkYg
PDwgMTYpCisjZGVmaW5lIENTU19TV19WRVJTSU9OX0hVQ19NSU5PUgkoMHhGRkZGIDw8IDApCisJ
dTMyIHJlc2VydmVkWzE0XTsKIAl1MzIgaGVhZGVyX2luZm87CiB9IF9fcGFja2VkOwogCkBAIC00
MjMsMjMgKzM5NCwxOSBAQCBzdHJ1Y3QgZ3VjX2N0X2J1ZmZlcl9kZXNjIHsKIHN0cnVjdCBndWNf
cG9saWN5IHsKIAkvKiBUaW1lIGZvciBvbmUgd29ya2xvYWQgdG8gZXhlY3V0ZS4gKGluIG1pY3Jv
IHNlY29uZHMpICovCiAJdTMyIGV4ZWN1dGlvbl9xdWFudHVtOwotCXUzMiByZXNlcnZlZDE7Ci0K
IAkvKiBUaW1lIHRvIHdhaXQgZm9yIGEgcHJlZW1wdGlvbiByZXF1ZXN0IHRvIGNvbXBsZXRlZCBi
ZWZvcmUgaXNzdWluZyBhCiAJICogcmVzZXQuIChpbiBtaWNybyBzZWNvbmRzKS4gKi8KIAl1MzIg
cHJlZW1wdGlvbl90aW1lOwotCiAJLyogSG93IG11Y2ggdGltZSB0byBhbGxvdyB0byBydW4gYWZ0
ZXIgdGhlIGZpcnN0IGZhdWx0IGlzIG9ic2VydmVkLgogCSAqIFRoZW4gcHJlZW1wdCBhZnRlcndh
cmRzLiAoaW4gbWljcm8gc2Vjb25kcykgKi8KIAl1MzIgZmF1bHRfdGltZTsKLQogCXUzMiBwb2xp
Y3lfZmxhZ3M7Ci0JdTMyIHJlc2VydmVkWzJdOworCXUzMiByZXNlcnZlZFs4XTsKIH0gX19wYWNr
ZWQ7CiAKIHN0cnVjdCBndWNfcG9saWNpZXMgewotCXN0cnVjdCBndWNfcG9saWN5IHBvbGljeVtH
VUNfQ0xJRU5UX1BSSU9SSVRZX05VTV1bR1VDX01BWF9FTkdJTkVTX05VTV07Ci0KKwlzdHJ1Y3Qg
Z3VjX3BvbGljeSBwb2xpY3lbR1VDX0NMSUVOVF9QUklPUklUWV9OVU1dW0dVQ19NQVhfRU5HSU5F
X0NMQVNTRVNdOworCXUzMiBzdWJtaXNzaW9uX3F1ZXVlX2RlcHRoW0dVQ19NQVhfRU5HSU5FX0NM
QVNTRVNdOwogCS8qIEluIG1pY3JvIHNlY29uZHMuIEhvdyBtdWNoIHRpbWUgdG8gYWxsb3cgYmVm
b3JlIERQQyBwcm9jZXNzaW5nIGlzCiAJICogY2FsbGVkIGJhY2sgdmlhIGludGVycnVwdCAodG8g
cHJldmVudCBEUEMgcXVldWUgZHJhaW4gc3RhcnZpbmcpLgogCSAqIFR5cGljYWxseSAxMDAwcyBv
ZiBtaWNybyBzZWNvbmRzIChleGFtcGxlIG9ubHksIG5vdCBncmFudWxhcml0eSkuICovCkBAIC00
NTIsNTcgKzQxOSw3MyBAQCBzdHJ1Y3QgZ3VjX3BvbGljaWVzIHsKIAkgKiBpZGxlLiAqLwogCXUz
MiBtYXhfbnVtX3dvcmtfaXRlbXM7CiAKLQl1MzIgcmVzZXJ2ZWRbMTldOworCXUzMiByZXNlcnZl
ZFs0XTsKIH0gX19wYWNrZWQ7CiAKIC8qIEd1QyBNTUlPIHJlZyBzdGF0ZSBzdHJ1Y3QgKi8KIAot
I2RlZmluZSBHVUNfUkVHU0VUX0ZMQUdTX05PTkUJCTB4MAotI2RlZmluZSBHVUNfUkVHU0VUX1BP
V0VSQ1lDTEUJCTB4MQotI2RlZmluZSBHVUNfUkVHU0VUX01BU0tFRAkJMHgyCi0jZGVmaW5lIEdV
Q19SRUdTRVRfRU5HSU5FUkVTRVQJCTB4NAotI2RlZmluZSBHVUNfUkVHU0VUX1NBVkVfREVGQVVM
VF9WQUxVRQkweDgKLSNkZWZpbmUgR1VDX1JFR1NFVF9TQVZFX0NVUlJFTlRfVkFMVUUJMHgxMAog
Ci0jZGVmaW5lIEdVQ19SRUdTRVRfTUFYX1JFR0lTVEVSUwkyNQotI2RlZmluZSBHVUNfTU1JT19X
SElURV9MSVNUX1NUQVJUCTB4MjRkMAotI2RlZmluZSBHVUNfTU1JT19XSElURV9MSVNUX01BWAkJ
MTIKKyNkZWZpbmUgR1VDX1JFR1NFVF9NQVhfUkVHSVNURVJTCTY0CiAjZGVmaW5lIEdVQ19TM19T
QVZFX1NQQUNFX1BBR0VTCQkxMAogCi1zdHJ1Y3QgZ3VjX21taW9fcmVnc2V0IHsKLQlzdHJ1Y3Qg
X19wYWNrZWQgewotCQl1MzIgb2Zmc2V0OwotCQl1MzIgdmFsdWU7Ci0JCXUzMiBmbGFnczsKLQl9
IHJlZ2lzdGVyc1tHVUNfUkVHU0VUX01BWF9SRUdJU1RFUlNdOworc3RydWN0IGd1Y19tbWlvX3Jl
ZyB7CisJdTMyIG9mZnNldDsKKwl1MzIgdmFsdWU7CisJdTMyIGZsYWdzOworI2RlZmluZSBHVUNf
UkVHU0VUX01BU0tFRAkJKDEgPDwgMCkKK30gX19wYWNrZWQ7CiAKK3N0cnVjdCBndWNfbW1pb19y
ZWdzZXQgeworCXN0cnVjdCBndWNfbW1pb19yZWcgcmVnaXN0ZXJzW0dVQ19SRUdTRVRfTUFYX1JF
R0lTVEVSU107CiAJdTMyIHZhbHVlc192YWxpZDsKIAl1MzIgbnVtYmVyX29mX3JlZ2lzdGVyczsK
IH0gX19wYWNrZWQ7CiAKLS8qIE1NSU8gcmVnaXN0ZXJzIHRoYXQgYXJlIHNldCBhcyBub24gcHJp
dmlsZWdlZCAqLwotc3RydWN0IG1taW9fd2hpdGVfbGlzdCB7Ci0JdTMyIG1taW9fc3RhcnQ7Ci0J
dTMyIG9mZnNldHNbR1VDX01NSU9fV0hJVEVfTElTVF9NQVhdOwotCXUzMiBjb3VudDsKKy8qIEd1
QyByZWdpc3RlciBzZXRzICovCitzdHJ1Y3QgZ3VjX21taW9fcmVnX3N0YXRlIHsKKwlzdHJ1Y3Qg
Z3VjX21taW9fcmVnc2V0IGVuZ2luZV9yZWdbR1VDX01BWF9FTkdJTkVfQ0xBU1NFU11bR1VDX01B
WF9JTlNUQU5DRVNfUEVSX0NMQVNTXTsKKwl1MzIgcmVzZXJ2ZWRbOThdOwogfSBfX3BhY2tlZDsK
IAotc3RydWN0IGd1Y19tbWlvX3JlZ19zdGF0ZSB7Ci0Jc3RydWN0IGd1Y19tbWlvX3JlZ3NldCBn
bG9iYWxfcmVnOwotCXN0cnVjdCBndWNfbW1pb19yZWdzZXQgZW5naW5lX3JlZ1tHVUNfTUFYX0VO
R0lORVNfTlVNXTsKLQlzdHJ1Y3QgbW1pb193aGl0ZV9saXN0IHdoaXRlX2xpc3RbR1VDX01BWF9F
TkdJTkVTX05VTV07CisvKiBIVyBpbmZvICovCitzdHJ1Y3QgZ3VjX2d0X3N5c3RlbV9pbmZvIHsK
Kwl1MzIgc2xpY2VfZW5hYmxlZDsKKwl1MzIgcmNzX2VuYWJsZWQ7CisJdTMyIHJlc2VydmVkMDsK
Kwl1MzIgYmNzX2VuYWJsZWQ7CisJdTMyIHZkYm94X2VuYWJsZV9tYXNrOworCXUzMiB2ZGJveF9z
ZmNfc3VwcG9ydF9tYXNrOworCXUzMiB2ZWJveF9lbmFibGVfbWFzazsKKwl1MzIgcmVzZXJ2ZWRb
OV07CiB9IF9fcGFja2VkOwogCi0vKiBHdUMgQWRkaXRpb25hbCBEYXRhIFN0cnVjdCAqLworLyog
Q2xpZW50cyBpbmZvICovCitzdHJ1Y3QgZ3VjX2N0X3Bvb2xfZW50cnkgeworCXN0cnVjdCBndWNf
Y3RfYnVmZmVyX2Rlc2MgZGVzYzsKKwl1MzIgcmVzZXJ2ZWRbN107Cit9IF9fcGFja2VkOwogCisj
ZGVmaW5lIEdVQ19DVF9QT09MX1NJWkUJMgorCitzdHJ1Y3QgZ3VjX2NsaWVudHNfaW5mbyB7CisJ
dTMyIGNsaWVudHNfbnVtOworCXUzMiByZXNlcnZlZDBbMTNdOworCXUzMiBjdF9wb29sX2FkZHI7
CisJdTMyIGN0X3Bvb2xfY291bnQ7CisJdTMyIHJlc2VydmVkWzRdOworfSBfX3BhY2tlZDsKKwor
LyogR3VDIEFkZGl0aW9uYWwgRGF0YSBTdHJ1Y3QgKi8KIHN0cnVjdCBndWNfYWRzIHsKIAl1MzIg
cmVnX3N0YXRlX2FkZHI7CiAJdTMyIHJlZ19zdGF0ZV9idWZmZXI7Ci0JdTMyIGdvbGRlbl9jb250
ZXh0X2xyY2E7CiAJdTMyIHNjaGVkdWxlcl9wb2xpY2llczsKLQl1MzIgcmVzZXJ2ZWQwWzNdOwot
CXUzMiBlbmdfc3RhdGVfc2l6ZVtHVUNfTUFYX0VOR0lORVNfTlVNXTsKLQl1MzIgcmVzZXJ2ZWQy
WzRdOworCXUzMiBndF9zeXN0ZW1faW5mbzsKKwl1MzIgY2xpZW50c19pbmZvOworCXUzMiBjb250
cm9sX2RhdGE7CisJdTMyIGdvbGRlbl9jb250ZXh0X2xyY2FbR1VDX01BWF9FTkdJTkVfQ0xBU1NF
U107CisJdTMyIGVuZ19zdGF0ZV9zaXplW0dVQ19NQVhfRU5HSU5FX0NMQVNTRVNdOworCXUzMiBy
ZXNlcnZlZFsxNl07CiB9IF9fcGFja2VkOwogCiAvKiBHdUMgbG9nZ2luZyBzdHJ1Y3R1cmVzICov
CkBAIC02NDYsNyArNjI5LDYgQEAgZW51bSBpbnRlbF9ndWNfYWN0aW9uIHsKIAlJTlRFTF9HVUNf
QUNUSU9OX0RFRkFVTFQgPSAweDAsCiAJSU5URUxfR1VDX0FDVElPTl9SRVFVRVNUX1BSRUVNUFRJ
T04gPSAweDIsCiAJSU5URUxfR1VDX0FDVElPTl9SRVFVRVNUX0VOR0lORV9SRVNFVCA9IDB4MywK
LQlJTlRFTF9HVUNfQUNUSU9OX1NBTVBMRV9GT1JDRVdBS0UgPSAweDYsCiAJSU5URUxfR1VDX0FD
VElPTl9BTExPQ0FURV9ET09SQkVMTCA9IDB4MTAsCiAJSU5URUxfR1VDX0FDVElPTl9ERUFMTE9D
QVRFX0RPT1JCRUxMID0gMHgyMCwKIAlJTlRFTF9HVUNfQUNUSU9OX0xPR19CVUZGRVJfRklMRV9G
TFVTSF9DT01QTEVURSA9IDB4MzAsCkBAIC02NTQsNiArNjM2LDcgQEAgZW51bSBpbnRlbF9ndWNf
YWN0aW9uIHsKIAlJTlRFTF9HVUNfQUNUSU9OX0VOVEVSX1NfU1RBVEUgPSAweDUwMSwKIAlJTlRF
TF9HVUNfQUNUSU9OX0VYSVRfU19TVEFURSA9IDB4NTAyLAogCUlOVEVMX0dVQ19BQ1RJT05fU0xQ
Q19SRVFVRVNUID0gMHgzMDAzLAorCUlOVEVMX0dVQ19BQ1RJT05fU0FNUExFX0ZPUkNFV0FLRSA9
IDB4MzAwNSwKIAlJTlRFTF9HVUNfQUNUSU9OX0FVVEhFTlRJQ0FURV9IVUMgPSAweDQwMDAsCiAJ
SU5URUxfR1VDX0FDVElPTl9SRUdJU1RFUl9DT01NQU5EX1RSQU5TUE9SVF9CVUZGRVIgPSAweDQ1
MDUsCiAJSU5URUxfR1VDX0FDVElPTl9ERVJFR0lTVEVSX0NPTU1BTkRfVFJBTlNQT1JUX0JVRkZF
UiA9IDB4NDUwNiwKQEAgLTY3NCw5ICs2NTcsOSBAQCBlbnVtIGludGVsX2d1Y19yZXBvcnRfc3Rh
dHVzIHsKIH07CiAKIGVudW0gaW50ZWxfZ3VjX3NsZWVwX3N0YXRlX3N0YXR1cyB7Ci0JSU5URUxf
R1VDX1NMRUVQX1NUQVRFX1NVQ0NFU1MgPSAweDAsCi0JSU5URUxfR1VDX1NMRUVQX1NUQVRFX1BS
RUVNUFRfVE9fSURMRV9GQUlMRUQgPSAweDEsCi0JSU5URUxfR1VDX1NMRUVQX1NUQVRFX0VOR0lO
RV9SRVNFVF9GQUlMRUQgPSAweDIKKwlJTlRFTF9HVUNfU0xFRVBfU1RBVEVfU1VDQ0VTUyA9IDB4
MSwKKwlJTlRFTF9HVUNfU0xFRVBfU1RBVEVfUFJFRU1QVF9UT19JRExFX0ZBSUxFRCA9IDB4MiwK
KwlJTlRFTF9HVUNfU0xFRVBfU1RBVEVfRU5HSU5FX1JFU0VUX0ZBSUxFRCA9IDB4MwogI2RlZmlu
ZSBJTlRFTF9HVUNfU0xFRVBfU1RBVEVfSU5WQUxJRF9NQVNLIDB4ODAwMDAwMDAKIH07CiAKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VjX2Z3LmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF91Y19mdy5jCmluZGV4IGI5Y2I2ZmVhOTMzMi4uZWNhNzQxYTg1N2E1
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF91Y19mdy5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3VjX2Z3LmMKQEAgLTIyLDYgKzIyLDcgQEAKICAqCiAg
Ki8KIAorI2luY2x1ZGUgPGxpbnV4L2JpdGZpZWxkLmg+CiAjaW5jbHVkZSA8bGludXgvZmlybXdh
cmUuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3ByaW50Lmg+CiAKQEAgLTExOSwyMSArMTIwLDIwIEBA
IHZvaWQgaW50ZWxfdWNfZndfZmV0Y2goc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
LAogCQlnb3RvIGZhaWw7CiAJfQogCi0JLyoKLQkgKiBUaGUgR3VDIGZpcm13YXJlIGltYWdlIGhh
cyB0aGUgdmVyc2lvbiBudW1iZXIgZW1iZWRkZWQgYXQgYQotCSAqIHdlbGwta25vd24gb2Zmc2V0
IHdpdGhpbiB0aGUgZmlybXdhcmUgYmxvYjsgbm90ZSB0aGF0IG1ham9yIC8gbWlub3IKLQkgKiB2
ZXJzaW9uIGFyZSBUV08gYnl0ZXMgZWFjaCAoaS5lLiB1MTYpLCBhbHRob3VnaCBhbGwgcG9pbnRl
cnMgYW5kCi0JICogb2Zmc2V0cyBhcmUgZGVmaW5lZCBpbiB0ZXJtcyBvZiBieXRlcyAodTgpLgot
CSAqLworCS8qIEdldCB2ZXJzaW9uIG51bWJlcnMgZnJvbSB0aGUgQ1NTIGhlYWRlciAqLwogCXN3
aXRjaCAodWNfZnctPnR5cGUpIHsKIAljYXNlIElOVEVMX1VDX0ZXX1RZUEVfR1VDOgotCQl1Y19m
dy0+bWFqb3JfdmVyX2ZvdW5kID0gY3NzLT5ndWMuc3dfdmVyc2lvbiA+PiAxNjsKLQkJdWNfZnct
Pm1pbm9yX3Zlcl9mb3VuZCA9IGNzcy0+Z3VjLnN3X3ZlcnNpb24gJiAweEZGRkY7CisJCXVjX2Z3
LT5tYWpvcl92ZXJfZm91bmQgPSBGSUVMRF9HRVQoQ1NTX1NXX1ZFUlNJT05fR1VDX01BSk9SLAor
CQkJCQkJICAgY3NzLT5zd192ZXJzaW9uKTsKKwkJdWNfZnctPm1pbm9yX3Zlcl9mb3VuZCA9IEZJ
RUxEX0dFVChDU1NfU1dfVkVSU0lPTl9HVUNfTUlOT1IsCisJCQkJCQkgICBjc3MtPnN3X3ZlcnNp
b24pOwogCQlicmVhazsKIAogCWNhc2UgSU5URUxfVUNfRldfVFlQRV9IVUM6Ci0JCXVjX2Z3LT5t
YWpvcl92ZXJfZm91bmQgPSBjc3MtPmh1Yy5zd192ZXJzaW9uID4+IDE2OwotCQl1Y19mdy0+bWlu
b3JfdmVyX2ZvdW5kID0gY3NzLT5odWMuc3dfdmVyc2lvbiAmIDB4RkZGRjsKKwkJdWNfZnctPm1h
am9yX3Zlcl9mb3VuZCA9IEZJRUxEX0dFVChDU1NfU1dfVkVSU0lPTl9IVUNfTUFKT1IsCisJCQkJ
CQkgICBjc3MtPnN3X3ZlcnNpb24pOworCQl1Y19mdy0+bWlub3JfdmVyX2ZvdW5kID0gRklFTERf
R0VUKENTU19TV19WRVJTSU9OX0hVQ19NSU5PUiwKKwkJCQkJCSAgIGNzcy0+c3dfdmVyc2lvbik7
CiAJCWJyZWFrOwogCiAJZGVmYXVsdDoKLS0gCjIuMTkuMgoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

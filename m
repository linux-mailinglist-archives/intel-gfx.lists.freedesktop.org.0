Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 441F0D0766
	for <lists+intel-gfx@lfdr.de>; Wed,  9 Oct 2019 08:42:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EB9FB6E8DE;
	Wed,  9 Oct 2019 06:42:39 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5DE356E8DD
 for <intel-gfx@lists.freedesktop.org>; Wed,  9 Oct 2019 06:42:37 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18772590-1500050 
 for multiple; Wed, 09 Oct 2019 07:42:26 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  9 Oct 2019 07:42:23 +0100
Message-Id: <20191009064224.25348-8-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191009064224.25348-1-chris@chris-wilson.co.uk>
References: <20191009064224.25348-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 8/9] drm/i915: add a new perf configuration
 execbuf parameter
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogTGlvbmVsIExhbmR3ZXJsaW4gPGxpb25lbC5nLmxhbmR3ZXJsaW5AaW50ZWwuY29tPgoK
V2Ugd2FudCB0aGUgYWJpbGl0eSB0byBkaXNwYXRjaCBhIHNldCBvZiBjb21tYW5kIGJ1ZmZlciB0
byB0aGUKaGFyZHdhcmUsIGVhY2ggd2l0aCBhIGRpZmZlcmVudCBPQSBjb25maWd1cmF0aW9uLiBU
byBhY2hpZXZlIHRoaXMsIHdlCnJldXNlIGEgY291cGxlIG9mIGZpZWxkcyBmcm9tIHRoZSBleGVj
YnVmMiBzdHJ1Y3QgKEkgQ0FOIEhBWgpleGVjYnVmMz8pIHRvIG5vdGlmeSB3aGF0IE9BIGNvbmZp
Z3VyYXRpb24gc2hvdWxkIGJlIHVzZWQgZm9yIGEgYmF0Y2gKYnVmZmVyLiBUaGlzIHJlcXVpcmVz
IHRoZSBwcm9jZXNzIG1ha2luZyB0aGUgZXhlY2J1ZiB3aXRoIHRoaXMgZmxhZyB0bwphbHNvIG93
biB0aGUgcGVyZiBmZCBhdCB0aGUgdGltZSBvZiBleGVjYnVmLgoKdjI6IEFkZCBhIGVtaXRfb2Ff
Y29uZmlnKCkgdmZ1bmMgaW4gdGhlIGludGVsX2VuZ2luZV9jcyAoQ2hyaXMpCiAgICBNb3ZlIG9h
X2NvbmZpZyB2bWEgdG8gYWN0aXZlIChDaHJpcykKCnYzOiBEb24ndCBkcm9wIHRoZSBsb2NrIGZv
ciBlbmdpbmUgbG9va3VwIChDaHJpcykKICAgIE1vdmUgT0EgY29uZmlnIHZtYSB0byBhY3RpdmUg
YmVmb3JlIHdyaXRpbmcgdGhlIHJpbmdidWZmZXIgKENocmlzKQoKdjQ6IFJldXNlIGk5MTVfdXNl
cl9leHRlbnNpb25fZm4KICAgIFNlcmlhbGl6ZSByZXF1ZXN0cyB3aXRoIE9BIGNvbmZpZyB1cGRh
dGVzCgp2NTogQ2hlY2sgdGhhdCB0aGUgY2hhaW5lZCBleHRlbnNpb24gaXMgb25seSBwcmVzZW50
IG9uY2UgKENocmlzKQogICAgVW5waW4gb2Ffdm1hIGluIG1haW4gcGF0aCAoQ2hyaXMpCgp2Njog
VXNlIEJJVF9VTEwgKENocmlzKQoKdjc6IEhvbGQgZHJtLnN0cnVjdF9tdXRleCB3aGVuIHNlcmlh
bGl6aW5nIHRoZSByZXF1ZXN0IHdpdGggT0EgY29uZmlnIChDaHJpcykKCnY4OiBSZW1vdmUgYWN0
aXZlIHJlcXVlc3QgZnJvbSBlbmdpbmUgKExpb25lbCkKCnY5OiBNb3ZlIGZldGNoaW5nIE9BIGNv
bmZpZ3VyYXRpb24gcGFzcyBlbmdpbmUgcGlubmluZyAoTGlvbmVsKQogICAgTG9jayBWTUEgYmVm
b3JlIG1vdmluZyB0byBhY3RpdmUgKENocmlzKQoKdjEwOiBGaXggbGVhayBvbiBwZXJmX2ZkIChM
aW9uZWwpCgpTaWduZWQtb2ZmLWJ5OiBMaW9uZWwgTGFuZHdlcmxpbiA8bGlvbmVsLmcubGFuZHdl
cmxpbkBpbnRlbC5jb20+Ci0tLQogLi4uL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1
ZmZlci5jICAgIHwgMTQxICsrKysrKysrKysrKysrKysrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZXRwYXJhbS5jICAgICAgICAgIHwgICA0ICsKIGluY2x1ZGUvdWFwaS9kcm0vaTkxNV9k
cm0uaCAgICAgICAgICAgICAgICAgICB8ICA0NCArKysrKy0KIDMgZmlsZXMgY2hhbmdlZCwgMTgy
IGluc2VydGlvbnMoKyksIDcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMKaW5kZXggYjMwODUwM2VjN2NlLi41ZGUxMTlkZGVh
MWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVm
ZmVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIu
YwpAQCAtMjQsNiArMjQsNyBAQAogI2luY2x1ZGUgImk5MTVfZ2VtX2NsZmx1c2guaCIKICNpbmNs
dWRlICJpOTE1X2dlbV9jb250ZXh0LmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1faW9jdGxzLmgiCisj
aW5jbHVkZSAiaTkxNV9wZXJmLmgiCiAjaW5jbHVkZSAiaTkxNV90cmFjZS5oIgogI2luY2x1ZGUg
Imk5MTVfdXNlcl9leHRlbnNpb25zLmgiCiAKQEAgLTQ3LDYgKzQ4LDggQEAgZW51bSB7CiAjZGVm
aW5lIF9fRVhFQ19JTlRFUk5BTF9GTEFHUwkofjB1IDw8IDMwKQogI2RlZmluZSBVUERBVEUJCQlQ
SU5fT0ZGU0VUX0ZJWEVECiAKKyNkZWZpbmUgRVhUUkFfVk1BIDIKKwogI2RlZmluZSBCQVRDSF9P
RkZTRVRfQklBUyAoMjU2KjEwMjQpCiAKICNkZWZpbmUgX19JOTE1X0VYRUNfSUxMRUdBTF9GTEFH
UyBcCkBAIC0yNzMsNiArMjc2LDEyIEBAIHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgewogCSAqLwog
CWludCBsdXRfc2l6ZTsKIAlzdHJ1Y3QgaGxpc3RfaGVhZCAqYnVja2V0czsgLyoqIGh0IGZvciBy
ZWxvY2F0aW9uIGhhbmRsZXMgKi8KKworCXN0cnVjdCB7IC8qIEhXIGNvbmZpZ3VyYXRpb24gZm9y
IE9BLiAqLworCQlzdHJ1Y3QgZmlsZSAqZmlsZTsKKwkJc3RydWN0IGk5MTVfb2FfY29uZmlnICpj
b25maWc7CisJCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOworCX0gb2E7CiB9OwogCiAjZGVmaW5lIGV4
ZWNfZW50cnkoRUIsIFZNQSkgKCYoRUIpLT5leGVjWyhWTUEpLT5leGVjX2ZsYWdzIC0gKEVCKS0+
ZmxhZ3NdKQpAQCAtODg5LDYgKzg5OCwxMiBAQCBzdGF0aWMgdm9pZCBlYl9kZXN0cm95KGNvbnN0
IHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIgKmViKQogCiAJaWYgKGViLT5sdXRfc2l6ZSA+IDApCiAJ
CWtmcmVlKGViLT5idWNrZXRzKTsKKworCWlmIChlYi0+b2EuY29uZmlnKSB7CisJCWk5MTVfdm1h
X3B1dChlYi0+b2Eudm1hKTsKKwkJaTkxNV9vYV9jb25maWdfcHV0KGViLT5vYS5jb25maWcpOwor
CQlmcHV0KGViLT5vYS5maWxlKTsKKwl9CiB9CiAKIHN0YXRpYyBpbmxpbmUgdTY0CkBAIC0yMDUx
LDYgKzIwNjYsNTggQEAgYWRkX3RvX2NsaWVudChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwgc3Ry
dWN0IGRybV9maWxlICpmaWxlKQogCXNwaW5fdW5sb2NrKCZmaWxlX3ByaXYtPm1tLmxvY2spOwog
fQogCitzdGF0aWMgaW50IGViX29hX2NvbmZpZyhzdHJ1Y3QgaTkxNV9leGVjYnVmZmVyICplYikK
K3sKKwlzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtOworCXN0cnVjdCBpOTE1X3BlcmYg
KnBlcmY7CisJaW50IGVycjsKKworCWlmICghZWItPm9hLmNvbmZpZykKKwkJcmV0dXJuIDA7CisK
KwlzdHJlYW0gPSBlYi0+b2EuZmlsZS0+cHJpdmF0ZV9kYXRhOworCXBlcmYgPSBzdHJlYW0tPnBl
cmY7CisKKwllcnIgPSBtdXRleF9sb2NrX2ludGVycnVwdGlibGUoJnBlcmYtPmxvY2spOworCWlm
IChlcnIpCisJCXJldHVybiBlcnI7CisKKwlpZiAoc3RyZWFtICE9IHBlcmYtPmV4Y2x1c2l2ZV9z
dHJlYW0pIHsKKwkJZXJyID0gLUVJTlZBTDsKKwkJZ290byBvdXQ7CisJfQorCisJaWYgKHN0cmVh
bS0+ZW5naW5lICE9IGViLT5lbmdpbmUpIHsgLyogRklYTUU6IHZpcnR1YWwgc2VsZWN0aW9uICov
CisJCWVyciA9IC1FSU5WQUw7CisJCWdvdG8gb3V0OworCX0KKworCWVyciA9IGk5MTVfYWN0aXZl
X2ZlbmNlX3NldCgmcGVyZi0+YWN0aXZlX2NvbmZpZywgZWItPnJlcXVlc3QpOworCWlmIChlcnIp
CisJCWdvdG8gb3V0OworCisJLyoKKwkgKiBJZiB0aGUgY29uZmlnIGhhc24ndCBjaGFuZ2VkLCBz
a2lwIHJlY29uZmlndXJpbmcgdGhlIEhXICh0aGlzIGlzCisJICogc3ViamVjdCB0byBhIGRlbGF5
IHdlIHdhbnQgdG8gYXZvaWQgaGFzIG11Y2ggYXMgcG9zc2libGUpLgorCSAqCisJICogQWZ0ZXIg
YSBHUFUgcmVzZXQsIHRoZSBvYSBjb25maWcgd2lsbCBub3QgYmUgcmVjb3ZlcmVkLgorCSAqLwor
CWlmIChlYi0+b2EuY29uZmlnID09IHN0cmVhbS0+b2FfY29uZmlnKQorCQlnb3RvIG91dDsKKwor
CWVyciA9IGViLT5lbmdpbmUtPmVtaXRfYmJfc3RhcnQoZWItPnJlcXVlc3QsCisJCQkJCWViLT5v
YS52bWEtPm5vZGUuc3RhcnQsIDAsCisJCQkJCUk5MTVfRElTUEFUQ0hfU0VDVVJFKTsgLyogZ2d0
dCAqLworCWlmIChlcnIpCisJCWdvdG8gb3V0OworCisJc3dhcChlYi0+b2EuY29uZmlnLCBzdHJl
YW0tPm9hX2NvbmZpZyk7CisKK291dDoKKwltdXRleF91bmxvY2soJnBlcmYtPmxvY2spOworCXJl
dHVybiBlcnI7Cit9CisKIHN0YXRpYyBpbnQgZWJfc3VibWl0KHN0cnVjdCBpOTE1X2V4ZWNidWZm
ZXIgKmViKQogewogCWludCBlcnI7CkBAIC0yMDc3LDYgKzIxNDQsMTAgQEAgc3RhdGljIGludCBl
Yl9zdWJtaXQoc3RydWN0IGk5MTVfZXhlY2J1ZmZlciAqZWIpCiAJCQlyZXR1cm4gZXJyOwogCX0K
IAorCWVyciA9IGViX29hX2NvbmZpZyhlYik7CisJaWYgKGVycikKKwkJcmV0dXJuIGVycjsKKwog
CWVyciA9IGViLT5lbmdpbmUtPmVtaXRfYmJfc3RhcnQoZWItPnJlcXVlc3QsCiAJCQkJCWViLT5i
YXRjaC0+bm9kZS5zdGFydCArCiAJCQkJCWViLT5iYXRjaF9zdGFydF9vZmZzZXQsCkBAIC0yNDI3
LDcgKzI0OTgsNTYgQEAgc2lnbmFsX2ZlbmNlX2FycmF5KHN0cnVjdCBpOTE1X2V4ZWNidWZmZXIg
KmViLAogCX0KIH0KIAorc3RhdGljIGludCBwYXJzZV9wZXJmX2NvbmZpZyhzdHJ1Y3QgaTkxNV91
c2VyX2V4dGVuc2lvbiBfX3VzZXIgKmV4dCwgdm9pZCAqZGF0YSkKK3sKKwlzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX2V4ZWNidWZmZXJfZXh0X3BlcmYgcGVyZl9jb25maWc7CisJc3RydWN0IGk5MTVfZXhl
Y2J1ZmZlciAqZWIgPSBkYXRhOworCXN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW07CisJ
c3RydWN0IGk5MTVfb2FfY29uZmlnICpjb25maWc7CisJc3RydWN0IGk5MTVfdm1hICp2bWE7CisJ
c3RydWN0IGZpbGUgKmZpbGU7CisJaW50IGVycjsKKworCWlmIChlYi0+b2EuY29uZmlnKQorCQly
ZXR1cm4gLUVJTlZBTDsgLyogZXhjbHVzaXZlICovCisKKwlpZiAoY29weV9mcm9tX3VzZXIoJnBl
cmZfY29uZmlnLCBleHQsIHNpemVvZihwZXJmX2NvbmZpZykpKQorCQlyZXR1cm4gLUVGQVVMVDsK
KworCWZpbGUgPSBmZ2V0KHBlcmZfY29uZmlnLnBlcmZfZmQpOworCWlmICghZmlsZSkKKwkJcmV0
dXJuIC1FSU5WQUw7CisKKwlzdHJlYW0gPSBpOTE1X3BlcmZfZmlsZV9nZXRfc3RyZWFtKGZpbGUp
OworCWlmICghc3RyZWFtKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWNvbmZpZyA9IGk5MTVfcGVy
Zl9nZXRfb2FfY29uZmlnKHN0cmVhbS0+cGVyZiwgcGVyZl9jb25maWcub2FfY29uZmlnKTsKKwlp
ZiAoIWNvbmZpZykgeworCQllcnIgPSAtRUlOVkFMOworCQlnb3RvIGVycl9maWxlOworCX0KKwor
CXZtYSA9IGk5MTVfcGVyZl9zdHJlYW1fZ2V0X29hX3ZtYShzdHJlYW0sIGNvbmZpZyk7CisJaWYg
KElTX0VSUih2bWEpKSB7CisJCWVyciA9IFBUUl9FUlIodm1hKTsKKwkJZ290byBlcnJfY29uZmln
OworCX0KKworCWViLT5vYS52bWEgPSB2bWE7CisJZWItPm9hLmZpbGUgPSBmaWxlOworCWViLT5v
YS5jb25maWcgPSBjb25maWc7CisJcmV0dXJuIDA7CisKK2Vycl9jb25maWc6CisJaTkxNV9vYV9j
b25maWdfcHV0KGNvbmZpZyk7CitlcnJfZmlsZToKKwlmcHV0KGZpbGUpOworCXJldHVybiBlcnI7
Cit9CisKIHN0YXRpYyBjb25zdCBpOTE1X3VzZXJfZXh0ZW5zaW9uX2ZuIGV4ZWNidWZfZXh0ZW5z
aW9uc1tdID0geworCVtJOTE1X0VYRUNfRVhUX1BFUkZfQ09ORklHXSA9IHBhcnNlX3BlcmZfY29u
ZmlnLAogfTsKIAogc3RhdGljIGludApAQCAtMjQ2NywxMCArMjU4NywxMiBAQCBpOTE1X2dlbV9k
b19leGVjYnVmZmVyKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJaWYgKERCR19GT1JDRV9SRUxP
QyB8fCAhKGFyZ3MtPmZsYWdzICYgSTkxNV9FWEVDX05PX1JFTE9DKSkKIAkJYXJncy0+ZmxhZ3Mg
fD0gX19FWEVDX0hBU19SRUxPQzsKIAorCWViLm9hLmNvbmZpZyA9IE5VTEw7CisKIAllYi5leGVj
ID0gZXhlYzsKLQllYi52bWEgPSAoc3RydWN0IGk5MTVfdm1hICoqKShleGVjICsgYXJncy0+YnVm
ZmVyX2NvdW50ICsgMSk7CisJZWIudm1hID0gKHN0cnVjdCBpOTE1X3ZtYSAqKikoZXhlYyArIGFy
Z3MtPmJ1ZmZlcl9jb3VudCArIEVYVFJBX1ZNQSk7CiAJZWIudm1hWzBdID0gTlVMTDsKLQllYi5m
bGFncyA9ICh1bnNpZ25lZCBpbnQgKikoZWIudm1hICsgYXJncy0+YnVmZmVyX2NvdW50ICsgMSk7
CisJZWIuZmxhZ3MgPSAodW5zaWduZWQgaW50ICopKGViLnZtYSArIGFyZ3MtPmJ1ZmZlcl9jb3Vu
dCArIEVYVFJBX1ZNQSk7CiAKIAllYi5pbnZhbGlkX2ZsYWdzID0gX19FWEVDX09CSkVDVF9VTktO
T1dOX0ZMQUdTOwogCXJlbG9jX2NhY2hlX2luaXQoJmViLnJlbG9jX2NhY2hlLCBlYi5pOTE1KTsK
QEAgLTI1ODgsNiArMjcxMCwxNyBAQCBpOTE1X2dlbV9kb19leGVjYnVmZmVyKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsCiAJCX0KIAl9CiAKKwlpZiAoZWIub2EuY29uZmlnKSB7CisJCWVyciA9IGk5
MTVfdm1hX3BpbihlYi5vYS52bWEsIDAsIDAsIFBJTl9HTE9CQUwgfCBQSU5fSElHSCk7CisJCWlm
IChlcnIpCisJCQlnb3RvIGVycl92bWE7CisKKwkJZWIudm1hW2ViLmJ1ZmZlcl9jb3VudF0gPSBl
Yi5vYS52bWE7CisJCWViLmZsYWdzW2ViLmJ1ZmZlcl9jb3VudF0gPSBfX0VYRUNfT0JKRUNUX0hB
U19QSU47CisJCWViLm9hLnZtYS0+ZXhlY19mbGFncyA9ICZlYi5mbGFnc1tlYi5idWZmZXJfY291
bnRdOworCQllYi5idWZmZXJfY291bnQrKzsKKwl9CisKIAlpZiAoZWIuYmF0Y2hfbGVuID09IDAp
CiAJCWViLmJhdGNoX2xlbiA9IGViLmJhdGNoLT5zaXplIC0gZWIuYmF0Y2hfc3RhcnRfb2Zmc2V0
OwogCkBAIC0yNzY4LDcgKzI5MDEsNyBAQCBpOTE1X2dlbV9leGVjYnVmZmVyX2lvY3RsKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJLyogQ29weSBpbiB0aGUgZXhlYyBsaXN0
IGZyb20gdXNlcmxhbmQgKi8KIAlleGVjX2xpc3QgPSBrdm1hbGxvY19hcnJheShjb3VudCwgc2l6
ZW9mKCpleGVjX2xpc3QpLAogCQkJCSAgIF9fR0ZQX05PV0FSTiB8IEdGUF9LRVJORUwpOwotCWV4
ZWMyX2xpc3QgPSBrdm1hbGxvY19hcnJheShjb3VudCArIDEsIGViX2VsZW1lbnRfc2l6ZSgpLAor
CWV4ZWMyX2xpc3QgPSBrdm1hbGxvY19hcnJheShjb3VudCArIEVYVFJBX1ZNQSwgZWJfZWxlbWVu
dF9zaXplKCksCiAJCQkJICAgIF9fR0ZQX05PV0FSTiB8IEdGUF9LRVJORUwpOwogCWlmIChleGVj
X2xpc3QgPT0gTlVMTCB8fCBleGVjMl9saXN0ID09IE5VTEwpIHsKIAkJRFJNX0RFQlVHKCJGYWls
ZWQgdG8gYWxsb2NhdGUgZXhlYyBsaXN0IGZvciAlZCBidWZmZXJzXG4iLApAQCAtMjg0NCw3ICsy
OTc3LDcgQEAgaTkxNV9nZW1fZXhlY2J1ZmZlcjJfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRl
diwgdm9pZCAqZGF0YSwKIAkJcmV0dXJuIC1FSU5WQUw7CiAKIAkvKiBBbGxvY2F0ZSBhbiBleHRy
YSBzbG90IGZvciB1c2UgYnkgdGhlIGNvbW1hbmQgcGFyc2VyICovCi0JZXhlYzJfbGlzdCA9IGt2
bWFsbG9jX2FycmF5KGNvdW50ICsgMSwgZWJfZWxlbWVudF9zaXplKCksCisJZXhlYzJfbGlzdCA9
IGt2bWFsbG9jX2FycmF5KGNvdW50ICsgRVhUUkFfVk1BLCBlYl9lbGVtZW50X3NpemUoKSwKIAkJ
CQkgICAgX19HRlBfTk9XQVJOIHwgR0ZQX0tFUk5FTCk7CiAJaWYgKGV4ZWMyX2xpc3QgPT0gTlVM
TCkgewogCQlEUk1fREVCVUcoIkZhaWxlZCB0byBhbGxvY2F0ZSBleGVjIGxpc3QgZm9yICV6ZCBi
dWZmZXJzXG4iLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJh
bS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jCmluZGV4IGFkMzNmYmU5
MGEyOC4uNmFkMjkwYjE0ZTEyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dldHBhcmFtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jCkBA
IC0xNjAsNiArMTYwLDEwIEBAIGludCBpOTE1X2dldHBhcmFtX2lvY3RsKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJY2FzZSBJOTE1X1BBUkFNX1BFUkZfUkVWSVNJT046CiAJ
CXZhbHVlID0gaTkxNV9wZXJmX2lvY3RsX3ZlcnNpb24oKTsKIAkJYnJlYWs7CisJY2FzZSBJOTE1
X1BBUkFNX0hBU19FWEVDX1BFUkZfQ09ORklHOgorCQkvKiBPYnZpb3VzbHkgcmVxdWlyZXMgcGVy
ZiBzdXBwb3J0LiAqLworCQl2YWx1ZSA9ICEhaTkxNS0+cGVyZi5pOTE1OworCQlicmVhazsKIAlk
ZWZhdWx0OgogCQlEUk1fREVCVUcoIlVua25vd24gcGFyYW1ldGVyICVkXG4iLCBwYXJhbS0+cGFy
YW0pOwogCQlyZXR1cm4gLUVJTlZBTDsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9kcm0vaTkx
NV9kcm0uaCBiL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAppbmRleCAwNmM1YzE4NzI2NGIu
LjJjZTQ5OGU0OThhMiAxMDA2NDQKLS0tIGEvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCisr
KyBiL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaApAQCAtNjE4LDYgKzYxOCwxNiBAQCB0eXBl
ZGVmIHN0cnVjdCBkcm1faTkxNV9pcnFfd2FpdCB7CiAgKi8KICNkZWZpbmUgSTkxNV9QQVJBTV9Q
RVJGX1JFVklTSU9OCTU0CiAKKy8qCisgKiBSZXF1ZXN0IGFuIGk5MTUvcGVyZiBwZXJmb3JtYW5j
ZSBjb25maWd1cmF0aW9uIGNoYW5nZSBiZWZvcmUgcnVubmluZyB0aGUKKyAqIGNvbW1hbmRzIGdp
dmVuIGluIGFuIGV4ZWNidWYuCisgKgorICogUGVyZm9ybWFuY2UgY29uZmlndXJhdGlvbiBJRCBh
bmQgdGhlIGZpbGUgZGVzY3JpcHRvciBvZiB0aGUgaTkxNSBwZXJmCisgKiBzdHJlYW0gYXJlIGdp
dmVuIHRocm91Z2ggZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXJfZXh0X3BlcmYuIFNlZQorICogSTkx
NV9FWEVDX1VTRV9FWFRFTlNJT05TLgorICovCisjZGVmaW5lIEk5MTVfUEFSQU1fSEFTX0VYRUNf
UEVSRl9DT05GSUcgNTUKKwogLyogTXVzdCBiZSBrZXB0IGNvbXBhY3QgLS0gbm8gaG9sZXMgYW5k
IHdlbGwgZG9jdW1lbnRlZCAqLwogCiB0eXBlZGVmIHN0cnVjdCBkcm1faTkxNV9nZXRwYXJhbSB7
CkBAIC0xMDE0LDYgKzEwMjQsMjkgQEAgc3RydWN0IGRybV9pOTE1X2dlbV9leGVjX2ZlbmNlIHsK
IAlfX3UzMiBmbGFnczsKIH07CiAKK3N0cnVjdCBkcm1faTkxNV9nZW1fZXhlY2J1ZmZlcl9leHRf
cGVyZiB7CisJc3RydWN0IGk5MTVfdXNlcl9leHRlbnNpb24gYmFzZTsgLyogLm5hbWUgPSBJOTE1
X0VYRUNfRVhUX1BFUkZfQ09ORklHICovCisKKwkvKgorCSAqIFBlcmZvcm1hbmNlIGZpbGUgZGVz
Y3JpcHRvciByZXR1cm5lZCBieSBEUk1fSU9DVExfSTkxNV9QRVJGX09QRU4uCisJICogVGhpcyBp
cyB1c2VkIHRvIGlkZW50aWZ5IHRoYXQgdGhlIGFwcGxpY2F0aW9uIHJlcXVlc3RpbmcgYSBIVwor
CSAqIHBlcmZvcm1hbmNlIGNvbmZpZ3VyYXRpb24gY2hhbmdlIGFjdHVhbGx5IGhhcyBhIHJpZ2h0
IHRvIGRvIHNvCisJICogYmVjYXVzZSBpdCBhbHNvIGhhcyBhY2Nlc3MgdGhlIGk5MTUtcGVyZiBz
dHJlYW0uCisJICovCisJX19zMzIgcGVyZl9mZDsKKworCS8qCisJICogVW51c2VkIGZvciBub3cu
IE11c3QgYmUgY2xlYXJlZCB0byB6ZXJvLgorCSAqLworCV9fdTMyIGZsYWdzOworCisJLyoKKwkg
KiBPQSBjb25maWd1cmF0aW9uIElEIHRvIHN3aXRjaCB0byBiZWZvcmUgZXhlY3V0aW5nIHRoZSBj
b21tYW5kcworCSAqIGFzc29jaWF0ZWQgdG8gdGhlIGV4ZWNidWYuCisJICovCisJX191NjQgb2Ff
Y29uZmlnOworfTsKKwogc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiB7CiAJLyoqCiAJ
ICogTGlzdCBvZiBnZW1fZXhlY19vYmplY3QyIHN0cnVjdHMKQEAgLTEwMzgsOSArMTA3MSwxMyBA
QCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2V4ZWNidWZmZXIyIHsKIAkgKgogCSAqIElmIEk5MTVfRVhF
Q19VU0VfRVhURU5TSU9OUyBpcyBzZXQsIHRoZW4gdGhpcyBpcyBhIHBvaW50ZXIgdG8gYQogCSAq
IHNpbmdsZSBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX2Jhc2VfZXhlY2J1ZmZlcl9leHQgYW5kIG51bV9j
bGlwcmVjdHMgaXMKLQkgKiAwLgorCSAqIDAuIEV4dGVuc2lvbnM6CisJICogICBkcm1faTkxNV9n
ZW1fZXhlY2J1ZmZlcl9leHRfcGVyZiAoSTkxNV9FWEVDX0VYVF9QRVJGX0NPTkZJRykKIAkgKi8K
IAlfX3U2NCBjbGlwcmVjdHNfcHRyOworI2RlZmluZSBJOTE1X0VYRUNfRVhUX1BFUkZfQ09ORklH
IDAKKworCV9fdTY0IGZsYWdzOwogI2RlZmluZSBJOTE1X0VYRUNfUklOR19NQVNLICAgICAgICAg
ICAgICAoMHgzZikKICNkZWZpbmUgSTkxNV9FWEVDX0RFRkFVTFQgICAgICAgICAgICAgICAgKDA8
PDApCiAjZGVmaW5lIEk5MTVfRVhFQ19SRU5ERVIgICAgICAgICAgICAgICAgICgxPDwwKQpAQCAt
MTA0OCw3ICsxMDg1LDggQEAgc3RydWN0IGRybV9pOTE1X2dlbV9leGVjYnVmZmVyMiB7CiAjZGVm
aW5lIEk5MTVfRVhFQ19CTFQgICAgICAgICAgICAgICAgICAgICgzPDwwKQogI2RlZmluZSBJOTE1
X0VYRUNfVkVCT1ggICAgICAgICAgICAgICAgICAoNDw8MCkKIAotLyogVXNlZCBmb3Igc3dpdGNo
aW5nIHRoZSBjb25zdGFudHMgYWRkcmVzc2luZyBtb2RlIG9uIGdlbjQrIFJFTkRFUiByaW5nLgor
LyoKKyAqIFVzZWQgZm9yIHN3aXRjaGluZyB0aGUgY29uc3RhbnRzIGFkZHJlc3NpbmcgbW9kZSBv
biBnZW40KyBSRU5ERVIgcmluZy4KICAqIEdlbjYrIG9ubHkgc3VwcG9ydHMgcmVsYXRpdmUgYWRk
cmVzc2luZyB0byBkeW5hbWljIHN0YXRlIChkZWZhdWx0KSBhbmQKICAqIGFic29sdXRlIGFkZHJl
c3NpbmcuCiAgKgpAQCAtMTA1OCw3ICsxMDk2LDcgQEAgc3RydWN0IGRybV9pOTE1X2dlbV9leGVj
YnVmZmVyMiB7CiAjZGVmaW5lIEk5MTVfRVhFQ19DT05TVEFOVFNfUkVMX0dFTkVSQUwgKDA8PDYp
IC8qIGRlZmF1bHQgKi8KICNkZWZpbmUgSTkxNV9FWEVDX0NPTlNUQU5UU19BQlNPTFVURSAJKDE8
PDYpCiAjZGVmaW5lIEk5MTVfRVhFQ19DT05TVEFOVFNfUkVMX1NVUkZBQ0UgKDI8PDYpIC8qIGdl
bjQvNSBvbmx5ICovCi0JX191NjQgZmxhZ3M7CisKIAlfX3U2NCByc3ZkMTsgLyogbm93IHVzZWQg
Zm9yIGNvbnRleHQgaW5mbyAqLwogCV9fdTY0IHJzdmQyOwogfTsKLS0gCjIuMjMuMAoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxp
bmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

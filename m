Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 97EF53931A2
	for <lists+intel-gfx@lfdr.de>; Thu, 27 May 2021 17:01:55 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 854976E7DD;
	Thu, 27 May 2021 15:01:53 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 19AE26F403;
 Thu, 27 May 2021 15:01:52 +0000 (UTC)
IronPort-SDR: hzwW6WaPdHY8VXVRpf4ajPLTxqu/WimjAjrVRXnM8m0jvFvimhi8ebVShEJ49AFm2D5/6NtV+R
 U14lBeOQz+xw==
X-IronPort-AV: E=McAfee;i="6200,9189,9996"; a="183089144"
X-IronPort-AV: E=Sophos;i="5.82,334,1613462400"; d="scan'208";a="183089144"
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by fmsmga107.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 27 May 2021 08:01:50 -0700
IronPort-SDR: FL1KthgPsXdjh9mLeCpOsaNy///C3J7yZa1KKSJCrZhY6Wo+c8cLsM0615sv60tcKeSKSxwiWX
 Ni6cYeGHnv/Q==
X-IronPort-AV: E=Sophos;i="5.82,334,1613462400"; d="scan'208";a="477522057"
Received: from ibanaga-mobl.ger.corp.intel.com ([10.249.254.58])
 by orsmga001-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 27 May 2021 08:01:49 -0700
Message-ID: <8b3382726763050334a6cb214f7ba560eebf8f28.camel@linux.intel.com>
From: Thomas =?ISO-8859-1?Q?Hellstr=F6m?= <thomas.hellstrom@linux.intel.com>
To: Christian =?ISO-8859-1?Q?K=F6nig?= <christian.koenig@amd.com>, 
 intel-gfx@lists.freedesktop.org, dri-devel@lists.freedesktop.org
Date: Thu, 27 May 2021 17:01:46 +0200
In-Reply-To: <883eab20-4326-d14a-2eb0-5e95f174a0d9@amd.com>
References: <20210527141923.1962350-1-thomas.hellstrom@linux.intel.com>
 <883eab20-4326-d14a-2eb0-5e95f174a0d9@amd.com>
User-Agent: Evolution 3.38.4 (3.38.4-1.fc33) 
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [RFC PATCH] drm/ttm: Fix swapping dereferences of
 freed memory
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVGh1LCAyMDIxLTA1LTI3IGF0IDE2OjU0ICswMjAwLCBDaHJpc3RpYW4gS8O2bmlnIHdyb3Rl
Ogo+IEFtIDI3LjA1LjIxIHVtIDE2OjE5IHNjaHJpZWIgVGhvbWFzIEhlbGxzdHLDtm06Cj4gPiBU
aGUgc3dhcHBpbmcgY29kZSB3YXMgZGVyZWZlcmVuY2UgYm8tPnR0bSBwb2ludGVycyB3aXRob3V0
IGhhdmluZwo+ID4gdGhlCj4gPiBkbWEtcmVzdiBsb2NrIGhlbGQuIEFsc28gaXQgbWlnaHQgdHJ5
IHRvIHN3YXAgb3V0IHVucG9wdWxhdGVkIGJvcy4KPiA+IAo+ID4gRml4IHRoaXMgYnkgbW92aW5n
IHRoZSBiby0+dHRtIGRlcmVmZXJlbmNlIHVudGlsIHdlIGhhdmUgdGhlCj4gPiByZXNlcnZhdGlv
bgo+ID4gbG9jay4gQ2hlY2sgdGhhdCB0aGUgdHRtX3R0IGlzIHBvcHVsYXRlZCBhZnRlciB0aGUg
c3dhcF9ub3RpZnkKPiA+IGNhbGxiYWNrLgo+ID4gCj4gPiBTaWduZWQtb2ZmLWJ5OiBUaG9tYXMg
SGVsbHN0csO2bSA8dGhvbWFzLmhlbGxzdHJvbUBsaW51eC5pbnRlbC5jb20+Cj4gPiAtLS0KPiA+
IMKgIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmPCoMKgwqDCoCB8IDE2ICsrKysrKysrKysr
KysrKy0KPiA+IMKgIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2RldmljZS5jIHzCoCA4ICsrKy0t
LS0tCj4gPiDCoCAyIGZpbGVzIGNoYW5nZWQsIDE4IGluc2VydGlvbnMoKyksIDYgZGVsZXRpb25z
KC0pCj4gPiAKPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCj4g
PiBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKPiA+IGluZGV4IDlmNTM1MDZhODJmYy4u
ODYyMTNkMzc2NTdiIDEwMDY0NAo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8u
Ywo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYwo+ID4gQEAgLTExNjMsNiAr
MTE2MywxNiBAQCBpbnQgdHRtX2JvX3N3YXBvdXQoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0Cj4g
PiAqYm8sIHN0cnVjdCB0dG1fb3BlcmF0aW9uX2N0eCAqY3R4LAo+ID4gwqDCoMKgwqDCoMKgwqDC
oGlmICghdHRtX2JvX2V2aWN0X3N3YXBvdXRfYWxsb3dhYmxlKGJvLCBjdHgsICZwbGFjZSwKPiA+
ICZsb2NrZWQsIE5VTEwpKQo+ID4gwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqByZXR1
cm4gLUVCVVNZOwo+ID4gwqAgCj4gPiArwqDCoMKgwqDCoMKgwqBkbWFfcmVzdl9hc3NlcnRfaGVs
ZChiby0+YmFzZS5yZXN2KTsKPiA+ICsKPiA+ICvCoMKgwqDCoMKgwqDCoGlmICghYm8tPnR0bSB8
fAo+ID4gK8KgwqDCoMKgwqDCoMKgwqDCoMKgIGJvLT50dG0tPnBhZ2VfZmxhZ3MgJiBUVE1fUEFH
RV9GTEFHX1NHIHx8Cj4gPiArwqDCoMKgwqDCoMKgwqDCoMKgwqAgYm8tPnR0bS0+cGFnZV9mbGFn
cyAmIFRUTV9QQUdFX0ZMQUdfU1dBUFBFRCkgewo+ID4gK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoGlmIChsb2NrZWQpCj4gPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoGRtYV9yZXN2X3VubG9jayhiby0+YmFzZS5yZXN2KTsKPiA+ICvCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqByZXR1cm4gLUVCVVNZOwo+ID4gK8KgwqDCoMKgwqDCoMKg
fQo+ID4gKwo+ID4gwqDCoMKgwqDCoMKgwqDCoGlmICghdHRtX2JvX2dldF91bmxlc3NfemVybyhi
bykpIHsKPiA+IMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgaWYgKGxvY2tlZCkKPiA+
IMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoGRtYV9yZXN2
X3VubG9jayhiby0+YmFzZS5yZXN2KTsKPiA+IEBAIC0xMjE1LDcgKzEyMjUsOCBAQCBpbnQgdHRt
X2JvX3N3YXBvdXQoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0Cj4gPiAqYm8sIHN0cnVjdCB0dG1f
b3BlcmF0aW9uX2N0eCAqY3R4LAo+ID4gwqDCoMKgwqDCoMKgwqDCoGlmIChiby0+YmRldi0+ZnVu
Y3MtPnN3YXBfbm90aWZ5KQo+ID4gwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBiby0+
YmRldi0+ZnVuY3MtPnN3YXBfbm90aWZ5KGJvKTsKPiA+IMKgIAo+ID4gLcKgwqDCoMKgwqDCoMKg
cmV0ID0gdHRtX3R0X3N3YXBvdXQoYm8tPmJkZXYsIGJvLT50dG0sIGdmcF9mbGFncyk7Cj4gPiAr
wqDCoMKgwqDCoMKgwqBpZiAodHRtX3R0X2lzX3BvcHVsYXRlZChiby0+dHRtKSkKPiA+ICvCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqByZXQgPSB0dG1fdHRfc3dhcG91dChiby0+YmRldiwg
Ym8tPnR0bSwgZ2ZwX2ZsYWdzKTsKPiAKPiBFeGFjdGx5IHRoYXQgaXMgd2hhdCBJIHdvbid0IHJl
Y29tbWVuZC4gV2Ugd291bGQgdHJ5IHRvIHN3YXAgb3V0IHRoZSAKPiBzYW1lIEJPIG92ZXIgYW5k
IG92ZXIgYWdhaW4gd2l0aCB0aGF0LgoKQnV0IHdlIHdvdWxkbid0IHNpbmNlIHRoZSBCTyBpcyB0
YWtlbiBvZmYgdGhlIExSVSBhbmQgbmV2ZXIgcmUtYWRkZWQsCgo+IAo+IFdoeSBub3QgbW92ZSB0
aGF0IHRvIHRoZSBjaGVjayBhYm92ZSBhcyB3ZWxsPwoKQmVjYXVzZSB0aGUgQk8gbWF5IGJlY29t
ZSB1bnBvcHVsYXRlZCBpbiBzd2FwX25vdGlmeSgpLCBpOTE1LCBsaWtlCnZtd2dmeCwgc29tZXRp
bWVzIHNldHMgdXAgZ3B1IGJpbmRpbmdzIGZyb20gc3lzdGVtLCBhbmQgd2hlbiB3ZSBnZXQgYQpu
b3RpZmljYXRpb24gZnJvbSB1c2VyLXNwYWNlIHRoYXQgdGhvc2UgYXJlIHB1cmdlYWJsZSwgd2Ug
ZG9uJ3Qgd2FudCB0bwpwdXJnZSBpbW1lZGlhdGVseSBidXQgd2FpdCBmb3IgYSBwb3RlbnRpYWwg
c3dhcG91dC4KCi9UaG9tYXMKCgo+IAo+IENocmlzdGlhbi4KPiAKPiA+IMKgIG91dDoKPiA+IMKg
IAo+ID4gwqDCoMKgwqDCoMKgwqDCoC8qCj4gPiBAQCAtMTIyNSw2ICsxMjM2LDkgQEAgaW50IHR0
bV9ib19zd2Fwb3V0KHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdAo+ID4gKmJvLCBzdHJ1Y3QgdHRt
X29wZXJhdGlvbl9jdHggKmN0eCwKPiA+IMKgwqDCoMKgwqDCoMKgwqBpZiAobG9ja2VkKQo+ID4g
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBkbWFfcmVzdl91bmxvY2soYm8tPmJhc2Uu
cmVzdik7Cj4gPiDCoMKgwqDCoMKgwqDCoMKgdHRtX2JvX3B1dChibyk7Cj4gPiArCj4gPiArwqDC
oMKgwqDCoMKgwqAvKiBEb24ndCBicmVhayBsb2NraW5nIHJ1bGVzLiAqLwo+ID4gK8KgwqDCoMKg
wqDCoMKgV0FSTl9PTihyZXQgPT0gLUVCVVNZKTsKPiA+IMKgwqDCoMKgwqDCoMKgwqByZXR1cm4g
cmV0Owo+ID4gwqAgfQo+ID4gwqAgCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fZGV2aWNlLmMKPiA+IGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fZGV2aWNlLmMKPiA+
IGluZGV4IDQ2MDk1M2RjYWQxMS4uZWFhNzQ4N2FlNDA0IDEwMDY0NAo+ID4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL3R0bS90dG1fZGV2aWNlLmMKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0v
dHRtX2RldmljZS5jCj4gPiBAQCAtMTQzLDE0ICsxNDMsMTIgQEAgaW50IHR0bV9kZXZpY2Vfc3dh
cG91dChzdHJ1Y3QgdHRtX2RldmljZQo+ID4gKmJkZXYsIHN0cnVjdCB0dG1fb3BlcmF0aW9uX2N0
eCAqY3R4LAo+ID4gwqAgCj4gPiDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoGZvciAo
aiA9IDA7IGogPCBUVE1fTUFYX0JPX1BSSU9SSVRZOyArK2opIHsKPiA+IMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoGxpc3RfZm9yX2VhY2hfZW50cnkoYm8s
ICZtYW4tPmxydVtqXSwgbHJ1KQo+ID4gewo+ID4gLcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgdWludDMyX3QgbnVtX3BhZ2VzOwo+
ID4gK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgcGdvZmZfdCBudW1fcGFnZXM7Cj4gPiDCoCAKPiA+IC3CoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoGlmICghYm8tPnR0
bSB8fAo+ID4gLcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgIGJvLT50dG0tPnBhZ2VfZmxhZ3MgJgo+ID4gVFRNX1BBR0Vf
RkxBR19TRyB8fAo+ID4gLcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIGJvLT50dG0tPnBhZ2VfZmxhZ3MgJgo+ID4gVFRN
X1BBR0VfRkxBR19TV0FQUEVEKQo+ID4gK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgaWYgKCFSRUFEX09OQ0UoYm8tPnR0bSkpCj4g
PiDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoGNvbnRpbnVlOwo+ID4gwqAgCj4gPiAtwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBudW1f
cGFnZXMgPSBiby0+dHRtLT5udW1fcGFnZXM7Cj4gPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBudW1fcGFnZXMgPSBiby0+YmFz
ZS5zaXplID4+Cj4gPiBQQUdFX1NISUZUOwo+ID4gwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoHJldCA9IHR0bV9ib19zd2Fwb3V0
KGJvLCBjdHgsCj4gPiBnZnBfZmxhZ3MpOwo+ID4gwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoC8qIHR0bV9ib19zd2Fwb3V0IGhh
cyBkcm9wcGVkIHRoZQo+ID4gbHJ1X2xvY2sgKi8KPiA+IMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBpZiAoIXJldCkKPiAKCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZngg
bWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

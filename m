Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CA37039EFB4
	for <lists+intel-gfx@lfdr.de>; Tue,  8 Jun 2021 09:36:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1ADF36EADC;
	Tue,  8 Jun 2021 07:36:36 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9FBFB6EAF0
 for <intel-gfx@lists.freedesktop.org>; Tue,  8 Jun 2021 07:36:34 +0000 (UTC)
IronPort-SDR: OfWtHoaOoZDrZUnD1g0xUTpo78VVE2yBlQYF7pqH+RMDPs5ozOYOK7DFWMiXD+dQ8f29s1muJ8
 /cAEp3Sip2fg==
X-IronPort-AV: E=McAfee;i="6200,9189,10008"; a="204605195"
X-IronPort-AV: E=Sophos;i="5.83,257,1616482800"; d="scan'208";a="204605195"
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by fmsmga103.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 08 Jun 2021 00:36:34 -0700
IronPort-SDR: +ka5uDe5d4+PvAMHEZoa9q1LcQ3yNsdg1Xsswsmm2AoBtWgSMaM6BD5FzpAwYArTuSngr+/qTv
 27XcaHuHSjDw==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.83,257,1616482800"; d="scan'208";a="401891680"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.171])
 by orsmga006.jf.intel.com with SMTP; 08 Jun 2021 00:36:31 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Tue, 08 Jun 2021 10:36:31 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  8 Jun 2021 10:35:54 +0300
Message-Id: <20210608073603.2408-9-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.31.1
In-Reply-To: <20210608073603.2408-1-ville.syrjala@linux.intel.com>
References: <20210608073603.2408-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 08/17] drm/i915: Store the HDMI default entry
 in the bug trans struct
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClN0
b3JlIHRoZSBkZWZhdWx0IEhETUkgYnVmIHRyYW5zIGVudHJ5IGluIHN0cnVjdCBpbnRlbF9kZGlf
YnVmX3RyYW5zCnNvIHRoYXQgaXQncyBuZXh0IHRvIHRoZSBhY3R1YWwgdGFibGUuIFRoaXMgbGV0
J3MgdXMgc3RhcnQgcmlkZGluZwpvdXJzZWx2ZXMgb2Ygc29tZSBwbGF0b2ZybSBzcGVjaWZpY3Mg
aW4gaW50ZWxfZGRpX2hkbWlfbnVtX2VudHJpZXMoKS4KClJldmlld2VkLWJ5OiBKYW5pIE5pa3Vs
YSA8amFuaS5uaWt1bGFAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6Qg
PHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIC4uLi9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2RkaV9idWZfdHJhbnMuYyAgICB8IDQ5ICsrKysrKysrKystLS0tLS0tLS0KIC4uLi9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaV9idWZfdHJhbnMuaCAgICB8ICAxICsKIDIgZmlsZXMg
Y2hhbmdlZCwgMjcgaW5zZXJ0aW9ucygrKSwgMjMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGlfYnVmX3RyYW5zLmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaV9idWZfdHJhbnMuYwppbmRleCA5NWI4
ZjliNDNlYTIuLmZkMjIxNmRjOGMzMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kZGlfYnVmX3RyYW5zLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kZGlfYnVmX3RyYW5zLmMKQEAgLTY2LDYgKzY2LDcgQEAgc3RhdGljIGNv
bnN0IHVuaW9uIGludGVsX2RkaV9idWZfdHJhbnNfZW50cnkgX2hzd19kZGlfdHJhbnNsYXRpb25z
X2hkbWlbXSA9IHsKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyBoc3df
ZGRpX3RyYW5zbGF0aW9uc19oZG1pID0gewogCS5lbnRyaWVzID0gX2hzd19kZGlfdHJhbnNsYXRp
b25zX2hkbWksCiAJLm51bV9lbnRyaWVzID0gQVJSQVlfU0laRShfaHN3X2RkaV90cmFuc2xhdGlv
bnNfaGRtaSksCisJLmhkbWlfZGVmYXVsdF9lbnRyeSA9IDYsCiB9OwogCiBzdGF0aWMgY29uc3Qg
dW5pb24gaW50ZWxfZGRpX2J1Zl90cmFuc19lbnRyeSBfYmR3X2RkaV90cmFuc2xhdGlvbnNfZWRw
W10gPSB7CkBAIC0xMzYsNiArMTM3LDcgQEAgc3RhdGljIGNvbnN0IHVuaW9uIGludGVsX2RkaV9i
dWZfdHJhbnNfZW50cnkgX2Jkd19kZGlfdHJhbnNsYXRpb25zX2hkbWlbXSA9IHsKIHN0YXRpYyBj
b25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyBiZHdfZGRpX3RyYW5zbGF0aW9uc19oZG1p
ID0gewogCS5lbnRyaWVzID0gX2Jkd19kZGlfdHJhbnNsYXRpb25zX2hkbWksCiAJLm51bV9lbnRy
aWVzID0gQVJSQVlfU0laRShfYmR3X2RkaV90cmFuc2xhdGlvbnNfaGRtaSksCisJLmhkbWlfZGVm
YXVsdF9lbnRyeSA9IDcsCiB9OwogCiAvKiBTa3lsYWtlIEggYW5kIFMgKi8KQEAgLTMzMCw2ICsz
MzIsNyBAQCBzdGF0aWMgY29uc3QgdW5pb24gaW50ZWxfZGRpX2J1Zl90cmFuc19lbnRyeSBfc2ts
X2RkaV90cmFuc2xhdGlvbnNfaGRtaVtdID0gewogc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9k
ZGlfYnVmX3RyYW5zIHNrbF9kZGlfdHJhbnNsYXRpb25zX2hkbWkgPSB7CiAJLmVudHJpZXMgPSBf
c2tsX2RkaV90cmFuc2xhdGlvbnNfaGRtaSwKIAkubnVtX2VudHJpZXMgPSBBUlJBWV9TSVpFKF9z
a2xfZGRpX3RyYW5zbGF0aW9uc19oZG1pKSwKKwkuaGRtaV9kZWZhdWx0X2VudHJ5ID0gOCwKIH07
CiAKIC8qIFNreWxha2UvS2FieWxha2UgWSAqLwpAQCAtMzUwLDYgKzM1Myw3IEBAIHN0YXRpYyBj
b25zdCB1bmlvbiBpbnRlbF9kZGlfYnVmX3RyYW5zX2VudHJ5IF9za2xfeV9kZGlfdHJhbnNsYXRp
b25zX2hkbWlbXSA9IHsKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFucyBz
a2xfeV9kZGlfdHJhbnNsYXRpb25zX2hkbWkgPSB7CiAJLmVudHJpZXMgPSBfc2tsX3lfZGRpX3Ry
YW5zbGF0aW9uc19oZG1pLAogCS5udW1fZW50cmllcyA9IEFSUkFZX1NJWkUoX3NrbF95X2RkaV90
cmFuc2xhdGlvbnNfaGRtaSksCisJLmhkbWlfZGVmYXVsdF9lbnRyeSA9IDgsCiB9OwogCiBzdGF0
aWMgY29uc3QgdW5pb24gaW50ZWxfZGRpX2J1Zl90cmFuc19lbnRyeSBfYnh0X2RkaV90cmFuc2xh
dGlvbnNfZHBbXSA9IHsKQEAgLTQxMCw2ICs0MTQsNyBAQCBzdGF0aWMgY29uc3QgdW5pb24gaW50
ZWxfZGRpX2J1Zl90cmFuc19lbnRyeSBfYnh0X2RkaV90cmFuc2xhdGlvbnNfaGRtaVtdID0gewog
c3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zIGJ4dF9kZGlfdHJhbnNsYXRp
b25zX2hkbWkgPSB7CiAJLmVudHJpZXMgPSBfYnh0X2RkaV90cmFuc2xhdGlvbnNfaGRtaSwKIAku
bnVtX2VudHJpZXMgPSBBUlJBWV9TSVpFKF9ieHRfZGRpX3RyYW5zbGF0aW9uc19oZG1pKSwKKwku
aGRtaV9kZWZhdWx0X2VudHJ5ID0gQVJSQVlfU0laRShfYnh0X2RkaV90cmFuc2xhdGlvbnNfaGRt
aSkgLSAxLAogfTsKIAogLyogVm9sdGFnZSBTd2luZyBQcm9ncmFtbWluZyBmb3IgVmNjSU8gMC44
NVYgZm9yIERQICovCkBAIC00NDcsNiArNDUyLDcgQEAgc3RhdGljIGNvbnN0IHVuaW9uIGludGVs
X2RkaV9idWZfdHJhbnNfZW50cnkgX2NubF9kZGlfdHJhbnNsYXRpb25zX2hkbWlfMF84NVZbXQog
c3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zIGNubF9kZGlfdHJhbnNsYXRp
b25zX2hkbWlfMF84NVYgPSB7CiAJLmVudHJpZXMgPSBfY25sX2RkaV90cmFuc2xhdGlvbnNfaGRt
aV8wXzg1ViwKIAkubnVtX2VudHJpZXMgPSBBUlJBWV9TSVpFKF9jbmxfZGRpX3RyYW5zbGF0aW9u
c19oZG1pXzBfODVWKSwKKwkuaGRtaV9kZWZhdWx0X2VudHJ5ID0gQVJSQVlfU0laRShfY25sX2Rk
aV90cmFuc2xhdGlvbnNfaGRtaV8wXzg1VikgLSAxLAogfTsKIAogLyogVm9sdGFnZSBTd2luZyBQ
cm9ncmFtbWluZyBmb3IgVmNjSU8gMC44NVYgZm9yIGVEUCAqLwpAQCAtNTA3LDYgKzUxMyw3IEBA
IHN0YXRpYyBjb25zdCB1bmlvbiBpbnRlbF9kZGlfYnVmX3RyYW5zX2VudHJ5IF9jbmxfZGRpX3Ry
YW5zbGF0aW9uc19oZG1pXzBfOTVWW10KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1
Zl90cmFucyBjbmxfZGRpX3RyYW5zbGF0aW9uc19oZG1pXzBfOTVWID0gewogCS5lbnRyaWVzID0g
X2NubF9kZGlfdHJhbnNsYXRpb25zX2hkbWlfMF85NVYsCiAJLm51bV9lbnRyaWVzID0gQVJSQVlf
U0laRShfY25sX2RkaV90cmFuc2xhdGlvbnNfaGRtaV8wXzk1ViksCisJLmhkbWlfZGVmYXVsdF9l
bnRyeSA9IEFSUkFZX1NJWkUoX2NubF9kZGlfdHJhbnNsYXRpb25zX2hkbWlfMF85NVYpIC0gMSwK
IH07CiAKIC8qIFZvbHRhZ2UgU3dpbmcgUHJvZ3JhbW1pbmcgZm9yIFZjY0lPIDAuOTVWIGZvciBl
RFAgKi8KQEAgLTU2OCw2ICs1NzUsNyBAQCBzdGF0aWMgY29uc3QgdW5pb24gaW50ZWxfZGRpX2J1
Zl90cmFuc19lbnRyeSBfY25sX2RkaV90cmFuc2xhdGlvbnNfaGRtaV8xXzA1VltdCiBzdGF0aWMg
Y29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgY25sX2RkaV90cmFuc2xhdGlvbnNfaGRt
aV8xXzA1ViA9IHsKIAkuZW50cmllcyA9IF9jbmxfZGRpX3RyYW5zbGF0aW9uc19oZG1pXzFfMDVW
LAogCS5udW1fZW50cmllcyA9IEFSUkFZX1NJWkUoX2NubF9kZGlfdHJhbnNsYXRpb25zX2hkbWlf
MV8wNVYpLAorCS5oZG1pX2RlZmF1bHRfZW50cnkgPSBBUlJBWV9TSVpFKF9jbmxfZGRpX3RyYW5z
bGF0aW9uc19oZG1pXzFfMDVWKSAtIDEsCiB9OwogCiAvKiBWb2x0YWdlIFN3aW5nIFByb2dyYW1t
aW5nIGZvciBWY2NJTyAxLjA1ViBmb3IgZURQICovCkBAIC02NjEsNiArNjY5LDcgQEAgc3RhdGlj
IGNvbnN0IHVuaW9uIGludGVsX2RkaV9idWZfdHJhbnNfZW50cnkgX2ljbF9jb21ib19waHlfZGRp
X3RyYW5zbGF0aW9uc19oZG0KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50ZWxfZGRpX2J1Zl90cmFu
cyBpY2xfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfaGRtaSA9IHsKIAkuZW50cmllcyA9IF9p
Y2xfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfaGRtaSwKIAkubnVtX2VudHJpZXMgPSBBUlJB
WV9TSVpFKF9pY2xfY29tYm9fcGh5X2RkaV90cmFuc2xhdGlvbnNfaGRtaSksCisJLmhkbWlfZGVm
YXVsdF9lbnRyeSA9IEFSUkFZX1NJWkUoX2ljbF9jb21ib19waHlfZGRpX3RyYW5zbGF0aW9uc19o
ZG1pKSAtIDEsCiB9OwogCiBzdGF0aWMgY29uc3QgdW5pb24gaW50ZWxfZGRpX2J1Zl90cmFuc19l
bnRyeSBfZWhsX2NvbWJvX3BoeV9kZGlfdHJhbnNsYXRpb25zX2RwW10gPSB7CkBAIC04MTMsNiAr
ODIyLDcgQEAgc3RhdGljIGNvbnN0IHVuaW9uIGludGVsX2RkaV9idWZfdHJhbnNfZW50cnkgX2lj
bF9tZ19waHlfZGRpX3RyYW5zbGF0aW9uc19oZG1pW10KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgaW50
ZWxfZGRpX2J1Zl90cmFucyBpY2xfbWdfcGh5X2RkaV90cmFuc2xhdGlvbnNfaGRtaSA9IHsKIAku
ZW50cmllcyA9IF9pY2xfbWdfcGh5X2RkaV90cmFuc2xhdGlvbnNfaGRtaSwKIAkubnVtX2VudHJp
ZXMgPSBBUlJBWV9TSVpFKF9pY2xfbWdfcGh5X2RkaV90cmFuc2xhdGlvbnNfaGRtaSksCisJLmhk
bWlfZGVmYXVsdF9lbnRyeSA9IEFSUkFZX1NJWkUoX2ljbF9tZ19waHlfZGRpX3RyYW5zbGF0aW9u
c19oZG1pKSAtIDEsCiB9OwogCiBzdGF0aWMgY29uc3QgdW5pb24gaW50ZWxfZGRpX2J1Zl90cmFu
c19lbnRyeSBfdGdsX2RrbF9waHlfZGRpX3RyYW5zbGF0aW9uc19kcF9oYnJbXSA9IHsKQEAgLTg3
MCw2ICs4ODAsNyBAQCBzdGF0aWMgY29uc3QgdW5pb24gaW50ZWxfZGRpX2J1Zl90cmFuc19lbnRy
eSBfdGdsX2RrbF9waHlfZGRpX3RyYW5zbGF0aW9uc19oZG1pWwogc3RhdGljIGNvbnN0IHN0cnVj
dCBpbnRlbF9kZGlfYnVmX3RyYW5zIHRnbF9ka2xfcGh5X2RkaV90cmFuc2xhdGlvbnNfaGRtaSA9
IHsKIAkuZW50cmllcyA9IF90Z2xfZGtsX3BoeV9kZGlfdHJhbnNsYXRpb25zX2hkbWksCiAJLm51
bV9lbnRyaWVzID0gQVJSQVlfU0laRShfdGdsX2RrbF9waHlfZGRpX3RyYW5zbGF0aW9uc19oZG1p
KSwKKwkuaGRtaV9kZWZhdWx0X2VudHJ5ID0gQVJSQVlfU0laRShfdGdsX2RrbF9waHlfZGRpX3Ry
YW5zbGF0aW9uc19oZG1pKSAtIDEsCiB9OwogCiBzdGF0aWMgY29uc3QgdW5pb24gaW50ZWxfZGRp
X2J1Zl90cmFuc19lbnRyeSBfdGdsX2NvbWJvX3BoeV9kZGlfdHJhbnNsYXRpb25zX2RwX2hicltd
ID0gewpAQCAtMTY5Myw0MiArMTcwNCwzNCBAQCBpbnQgaW50ZWxfZGRpX2hkbWlfbnVtX2VudHJp
ZXMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiB7CiAJc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShlbmNvZGVyLT5iYXNlLmRldik7CiAJZW51bSBwaHkg
cGh5ID0gaW50ZWxfcG9ydF90b19waHkoZGV2X3ByaXYsIGVuY29kZXItPnBvcnQpOworCWNvbnN0
IHN0cnVjdCBpbnRlbF9kZGlfYnVmX3RyYW5zICpkZGlfdHJhbnNsYXRpb25zID0gTlVMTDsKIAlp
bnQgbl9lbnRyaWVzOwogCiAJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMikgewogCQlp
ZiAoaW50ZWxfcGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKQotCQkJdGdsX2dldF9jb21ib19i
dWZfdHJhbnNfaGRtaShlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKKwkJCWRkaV90
cmFuc2xhdGlvbnMgPSB0Z2xfZ2V0X2NvbWJvX2J1Zl90cmFuc19oZG1pKGVuY29kZXIsIGNydGNf
c3RhdGUsICZuX2VudHJpZXMpOwogCQllbHNlCi0JCQl0Z2xfZ2V0X2RrbF9idWZfdHJhbnNfaGRt
aShlbmNvZGVyLCBjcnRjX3N0YXRlLCAmbl9lbnRyaWVzKTsKLQkJKmRlZmF1bHRfZW50cnkgPSBu
X2VudHJpZXMgLSAxOworCQkJZGRpX3RyYW5zbGF0aW9ucyA9IHRnbF9nZXRfZGtsX2J1Zl90cmFu
c19oZG1pKGVuY29kZXIsIGNydGNfc3RhdGUsICZuX2VudHJpZXMpOwogCX0gZWxzZSBpZiAoRElT
UExBWV9WRVIoZGV2X3ByaXYpID09IDExKSB7CiAJCWlmIChpbnRlbF9waHlfaXNfY29tYm8oZGV2
X3ByaXYsIHBoeSkpCi0JCQlpY2xfZ2V0X2NvbWJvX2J1Zl90cmFuc19oZG1pKGVuY29kZXIsIGNy
dGNfc3RhdGUsICZuX2VudHJpZXMpOworCQkJZGRpX3RyYW5zbGF0aW9ucyA9IGljbF9nZXRfY29t
Ym9fYnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5fZW50cmllcyk7CiAJCWVs
c2UKLQkJCWljbF9nZXRfbWdfYnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgY3J0Y19zdGF0ZSwgJm5f
ZW50cmllcyk7Ci0JCSpkZWZhdWx0X2VudHJ5ID0gbl9lbnRyaWVzIC0gMTsKKwkJCWRkaV90cmFu
c2xhdGlvbnMgPSBpY2xfZ2V0X21nX2J1Zl90cmFuc19oZG1pKGVuY29kZXIsIGNydGNfc3RhdGUs
ICZuX2VudHJpZXMpOwogCX0gZWxzZSBpZiAoSVNfQ0FOTk9OTEFLRShkZXZfcHJpdikpIHsKLQkJ
Y25sX2dldF9idWZfdHJhbnNfaGRtaShlbmNvZGVyLCAmbl9lbnRyaWVzKTsKLQkJKmRlZmF1bHRf
ZW50cnkgPSBuX2VudHJpZXMgLSAxOworCQlkZGlfdHJhbnNsYXRpb25zID0gY25sX2dldF9idWZf
dHJhbnNfaGRtaShlbmNvZGVyLCAmbl9lbnRyaWVzKTsKIAl9IGVsc2UgaWYgKElTX0dFTUlOSUxB
S0UoZGV2X3ByaXYpIHx8IElTX0JST1hUT04oZGV2X3ByaXYpKSB7Ci0JCWJ4dF9nZXRfYnVmX3Ry
YW5zX2hkbWkoZW5jb2RlciwgJm5fZW50cmllcyk7Ci0JCSpkZWZhdWx0X2VudHJ5ID0gbl9lbnRy
aWVzIC0gMTsKLQl9IGVsc2UgaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA9PSA5KSB7Ci0JCWhz
d19nZXRfYnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgJm5fZW50cmllcyk7Ci0JCSpkZWZhdWx0X2Vu
dHJ5ID0gODsKLQl9IGVsc2UgaWYgKElTX0JST0FEV0VMTChkZXZfcHJpdikpIHsKLQkJaHN3X2dl
dF9idWZfdHJhbnNfaGRtaShlbmNvZGVyLCAmbl9lbnRyaWVzKTsKLQkJKmRlZmF1bHRfZW50cnkg
PSA3OwotCX0gZWxzZSBpZiAoSVNfSEFTV0VMTChkZXZfcHJpdikpIHsKLQkJaHN3X2dldF9idWZf
dHJhbnNfaGRtaShlbmNvZGVyLCAmbl9lbnRyaWVzKTsKLQkJKmRlZmF1bHRfZW50cnkgPSA2Owot
CX0gZWxzZSB7Ci0JCWRybV9XQVJOKCZkZXZfcHJpdi0+ZHJtLCAxLCAiZGRpIHRyYW5zbGF0aW9u
IHRhYmxlIG1pc3NpbmdcbiIpOwotCQlyZXR1cm4gMDsKKwkJZGRpX3RyYW5zbGF0aW9ucyA9IGJ4
dF9nZXRfYnVmX3RyYW5zX2hkbWkoZW5jb2RlciwgJm5fZW50cmllcyk7CisJfSBlbHNlIGlmIChE
SVNQTEFZX1ZFUihkZXZfcHJpdikgPT0gOSB8fAorCQkgICBJU19CUk9BRFdFTEwoZGV2X3ByaXYp
IHx8IElTX0hBU1dFTEwoZGV2X3ByaXYpKSB7CisJCWRkaV90cmFuc2xhdGlvbnMgPSBoc3dfZ2V0
X2J1Zl90cmFuc19oZG1pKGVuY29kZXIsICZuX2VudHJpZXMpOwogCX0KIAotCWlmIChkcm1fV0FS
Tl9PTl9PTkNFKCZkZXZfcHJpdi0+ZHJtLCBuX2VudHJpZXMgPT0gMCkpCisJaWYgKGRybV9XQVJO
X09OKCZkZXZfcHJpdi0+ZHJtLCAhZGRpX3RyYW5zbGF0aW9ucykpIHsKKwkJKmRlZmF1bHRfZW50
cnkgPSAwOwogCQlyZXR1cm4gMDsKKwl9CisKKwkqZGVmYXVsdF9lbnRyeSA9IGRkaV90cmFuc2xh
dGlvbnMtPmhkbWlfZGVmYXVsdF9lbnRyeTsKIAogCXJldHVybiBuX2VudHJpZXM7CiB9CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaV9idWZfdHJhbnMu
aCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpX2J1Zl90cmFucy5oCmlu
ZGV4IDJmZmE1MzQwMTBiMy4uODc5ZjFkZWVjM2M4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaV9idWZfdHJhbnMuaAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RkaV9idWZfdHJhbnMuaApAQCAtNTYsNiArNTYsNyBAQCB1
bmlvbiBpbnRlbF9kZGlfYnVmX3RyYW5zX2VudHJ5IHsKIHN0cnVjdCBpbnRlbF9kZGlfYnVmX3Ry
YW5zIHsKIAljb25zdCB1bmlvbiBpbnRlbF9kZGlfYnVmX3RyYW5zX2VudHJ5ICplbnRyaWVzOwog
CXU4IG51bV9lbnRyaWVzOworCXU4IGhkbWlfZGVmYXVsdF9lbnRyeTsKIH07CiAKIGJvb2wgaXNf
aG9ibF9idWZfdHJhbnMoY29uc3Qgc3RydWN0IGludGVsX2RkaV9idWZfdHJhbnMgKnRhYmxlKTsK
LS0gCjIuMzEuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4
Cg==

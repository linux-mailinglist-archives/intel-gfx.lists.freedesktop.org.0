Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 64E0A734BE
	for <lists+intel-gfx@lfdr.de>; Wed, 24 Jul 2019 19:12:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F20306E5F9;
	Wed, 24 Jul 2019 17:12:40 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F11B06E5FB
 for <intel-gfx@lists.freedesktop.org>; Wed, 24 Jul 2019 17:12:21 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 24 Jul 2019 10:12:21 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,303,1559545200"; d="scan'208";a="171556926"
Received: from jssummer-desk.ra.intel.com ([10.54.134.159])
 by fmsmga007.fm.intel.com with ESMTP; 24 Jul 2019 10:12:21 -0700
From: Stuart Summers <stuart.summers@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 24 Jul 2019 10:12:16 -0700
Message-Id: <20190724171220.22986-6-stuart.summers@intel.com>
X-Mailer: git-send-email 2.21.0.5.gaeb582a983
In-Reply-To: <20190724171220.22986-1-stuart.summers@intel.com>
References: <20190724171220.22986-1-stuart.summers@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 5/9] drm/i915: Add function to set subslices
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWRkIGEgbmV3IGZ1bmN0aW9uIHRvIHNldCBhIHJhbmdlIG9mIHN1YnNsaWNlcyBmb3IgYQpzcGVj
aWZpZWQgc2xpY2UgYmFzZWQgb24gYSBnaXZlbiBtYXNrLgoKU2lnbmVkLW9mZi1ieTogU3R1YXJ0
IFN1bW1lcnMgPHN0dWFydC5zdW1tZXJzQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9zc2V1LmMgICAgIHwgMTAgKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX3NzZXUuaCAgICAgfCAgMyArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
ZGV2aWNlX2luZm8uYyB8IDUzICsrKysrKysrKysrKysrLS0tLS0tLS0tLQogMyBmaWxlcyBjaGFu
Z2VkLCA0NSBpbnNlcnRpb25zKCspLCAyMSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9zc2V1LmMKaW5kZXggNzFhYmYwYzlhNDZiLi42MDdjMTQ0NzI4N2MgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3NzZXUuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmMKQEAgLTMwLDYgKzMwLDE2IEBAIGludGVsX3NzZXVf
c3Vic2xpY2VfdG90YWwoY29uc3Qgc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUpCiAJcmV0dXJu
IHRvdGFsOwogfQogCit2b2lkIGludGVsX3NzZXVfc2V0X3N1YnNsaWNlcyhzdHJ1Y3Qgc3NldV9k
ZXZfaW5mbyAqc3NldSwgaW50IHNsaWNlLAorCQkJICAgICAgdTMyIHNzX21hc2spCit7CisJaW50
IGksIG9mZnNldCA9IHNsaWNlICogc3NldS0+c3Nfc3RyaWRlOworCisJZm9yIChpID0gMDsgaSA8
IHNzZXUtPnNzX3N0cmlkZTsgaSsrKQorCQlzc2V1LT5zdWJzbGljZV9tYXNrW29mZnNldCArIGld
ID0KKwkJCShzc19tYXNrID4+IChCSVRTX1BFUl9CWVRFICogaSkpICYgMHhmZjsKK30KKwogdW5z
aWduZWQgaW50CiBpbnRlbF9zc2V1X3N1YnNsaWNlc19wZXJfc2xpY2UoY29uc3Qgc3RydWN0IHNz
ZXVfZGV2X2luZm8gKnNzZXUsIHU4IHNsaWNlKQogewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvaW50ZWxfc3NldS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
c3NldS5oCmluZGV4IGZlMjJkNWIxOGU2Ny4uMjI2MWQ0ZTdkOThiIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9zc2V1LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfc3NldS5oCkBAIC03NSw2ICs3NSw5IEBAIGludGVsX3NzZXVfc3Vic2xpY2Vf
dG90YWwoY29uc3Qgc3RydWN0IHNzZXVfZGV2X2luZm8gKnNzZXUpOwogdW5zaWduZWQgaW50CiBp
bnRlbF9zc2V1X3N1YnNsaWNlc19wZXJfc2xpY2UoY29uc3Qgc3RydWN0IHNzZXVfZGV2X2luZm8g
KnNzZXUsIHU4IHNsaWNlKTsKIAordm9pZCBpbnRlbF9zc2V1X3NldF9zdWJzbGljZXMoc3RydWN0
IHNzZXVfZGV2X2luZm8gKnNzZXUsIGludCBzbGljZSwKKwkJCSAgICAgIHUzMiBzc19tYXNrKTsK
KwogdTMyIGludGVsX3NzZXVfbWFrZV9ycGNzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
LAogCQkJIGNvbnN0IHN0cnVjdCBpbnRlbF9zc2V1ICpyZXFfc3NldSk7CiAKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5jCmluZGV4IDdkZTdiN2I1NDBjYi4uMjJiNTlmZGIz
MWZjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kZXZpY2VfaW5mby5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RldmljZV9pbmZvLmMKQEAgLTIwNiw3
ICsyMDYsMTAgQEAgc3RhdGljIHZvaWQgZ2VuMTFfc3NldV9pbmZvX2luaXQoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQkJaW50IHNzOwogCiAJCQlzc2V1LT5zbGljZV9tYXNr
IHw9IEJJVChzKTsKLQkJCXNzZXUtPnN1YnNsaWNlX21hc2tbc10gPSAoc3NfZW4gPj4gc3NfaWR4
KSAmIHNzX2VuX21hc2s7CisKKwkJCWludGVsX3NzZXVfc2V0X3N1YnNsaWNlcyhzc2V1LCBzLCAo
c3NfZW4gPj4gc3NfaWR4KSAmCisJCQkJCQkJICBzc19lbl9tYXNrKTsKKwogCQkJZm9yIChzcyA9
IDA7IHNzIDwgc3NldS0+bWF4X3N1YnNsaWNlczsgc3MrKykgewogCQkJCWlmIChzc2V1LT5zdWJz
bGljZV9tYXNrW3NdICYgQklUKHNzKSkKIAkJCQkJc3NldV9zZXRfZXVzKHNzZXUsIHMsIHNzLCBl
dV9lbik7CkBAIC0yMzUsMTQgKzIzOCw2IEBAIHN0YXRpYyB2b2lkIGdlbjEwX3NzZXVfaW5mb19p
bml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlzc2V1LT5zbGljZV9tYXNr
ID0gKGZ1c2UyICYgR0VOMTBfRjJfU19FTkFfTUFTSykgPj4KIAkJCSAgICBHRU4xMF9GMl9TX0VO
QV9TSElGVDsKIAotCXN1YnNsaWNlX21hc2sgPSAoMSA8PCA0KSAtIDE7Ci0Jc3Vic2xpY2VfbWFz
ayAmPSB+KChmdXNlMiAmIEdFTjEwX0YyX1NTX0RJU19NQVNLKSA+PgotCQkJICAgR0VOMTBfRjJf
U1NfRElTX1NISUZUKTsKLQotCS8qCi0JICogU2xpY2UwIGNhbiBoYXZlIHVwIHRvIDMgc3Vic2xp
Y2VzLCBidXQgdGhlcmUgYXJlIG9ubHkgMiBpbgotCSAqIHNsaWNlMS8yLgotCSAqLwogCXNzZXUt
PnN1YnNsaWNlX21hc2tbMF0gPSBzdWJzbGljZV9tYXNrOwogCWZvciAocyA9IDE7IHMgPCBzc2V1
LT5tYXhfc2xpY2VzOyBzKyspCiAJCXNzZXUtPnN1YnNsaWNlX21hc2tbc10gPSBzdWJzbGljZV9t
YXNrICYgMHgzOwpAQCAtMjcwLDE0ICsyNjUsMjUgQEAgc3RhdGljIHZvaWQgZ2VuMTBfc3NldV9p
bmZvX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCWV1X2VuID0gfkk5
MTVfUkVBRChHRU4xMF9FVV9ESVNBQkxFMyk7CiAJc3NldV9zZXRfZXVzKHNzZXUsIDUsIDEsIGV1
X2VuICYgZXVfbWFzayk7CiAKLQkvKiBEbyBhIHNlY29uZCBwYXNzIHdoZXJlIHdlIG1hcmsgdGhl
IHN1YnNsaWNlcyBkaXNhYmxlZCBpZiBhbGwgdGhlaXIKLQkgKiBldXMgYXJlIG9mZi4KLQkgKi8K
KwlzdWJzbGljZV9tYXNrID0gKDEgPDwgNCkgLSAxOworCXN1YnNsaWNlX21hc2sgJj0gfigoZnVz
ZTIgJiBHRU4xMF9GMl9TU19ESVNfTUFTSykgPj4KKwkJCSAgIEdFTjEwX0YyX1NTX0RJU19TSElG
VCk7CisKIAlmb3IgKHMgPSAwOyBzIDwgc3NldS0+bWF4X3NsaWNlczsgcysrKSB7CisJCXUzMiBz
dWJzbGljZV9tYXNrX3dpdGhfZXVzID0gc3Vic2xpY2VfbWFzazsKKwogCQlmb3IgKHNzID0gMDsg
c3MgPCBzc2V1LT5tYXhfc3Vic2xpY2VzOyBzcysrKSB7CiAJCQlpZiAoc3NldV9nZXRfZXVzKHNz
ZXUsIHMsIHNzKSA9PSAwKQotCQkJCXNzZXUtPnN1YnNsaWNlX21hc2tbc10gJj0gfkJJVChzcyk7
CisJCQkJc3Vic2xpY2VfbWFza193aXRoX2V1cyAmPSB+QklUKHNzKTsKIAkJfQorCisJCS8qCisJ
CSAqIFNsaWNlMCBjYW4gaGF2ZSB1cCB0byAzIHN1YnNsaWNlcywgYnV0IHRoZXJlIGFyZSBvbmx5
IDIgaW4KKwkJICogc2xpY2UxLzIuCisJCSAqLworCQlpbnRlbF9zc2V1X3NldF9zdWJzbGljZXMo
c3NldSwgcywgcyA9PSAwID8KKwkJCQkJCSAgc3Vic2xpY2VfbWFza193aXRoX2V1cyA6CisJCQkJ
CQkgIHN1YnNsaWNlX21hc2tfd2l0aF9ldXMgJiAweDMpOwogCX0KIAogCXNzZXUtPmV1X3RvdGFs
ID0gY29tcHV0ZV9ldV90b3RhbChzc2V1KTsKQEAgLTMwMyw2ICszMDksNyBAQCBzdGF0aWMgdm9p
ZCBjaGVycnl2aWV3X3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdikKIHsKIAlzdHJ1Y3Qgc3NldV9kZXZfaW5mbyAqc3NldSA9ICZSVU5USU1FX0lORk8oZGV2
X3ByaXYpLT5zc2V1OwogCXUzMiBmdXNlOworCXU4IHN1YnNsaWNlX21hc2s7CiAKIAlmdXNlID0g
STkxNV9SRUFEKENIVl9GVVNFX0dUKTsKIApAQCAtMzE2LDcgKzMyMyw3IEBAIHN0YXRpYyB2b2lk
IGNoZXJyeXZpZXdfc3NldV9pbmZvX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2KQogCQkJKCgoZnVzZSAmIENIVl9GR1RfRVVfRElTX1NTMF9SMV9NQVNLKSA+PgogCQkJICBD
SFZfRkdUX0VVX0RJU19TUzBfUjFfU0hJRlQpIDw8IDQpOwogCi0JCXNzZXUtPnN1YnNsaWNlX21h
c2tbMF0gfD0gQklUKDApOworCQlzdWJzbGljZV9tYXNrIHw9IEJJVCgwKTsKIAkJc3NldV9zZXRf
ZXVzKHNzZXUsIDAsIDAsIH5kaXNhYmxlZF9tYXNrKTsKIAl9CiAKQEAgLTMyNywxMCArMzM0LDEy
IEBAIHN0YXRpYyB2b2lkIGNoZXJyeXZpZXdfc3NldV9pbmZvX2luaXQoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2KQogCQkJKCgoZnVzZSAmIENIVl9GR1RfRVVfRElTX1NTMV9SMV9N
QVNLKSA+PgogCQkJICBDSFZfRkdUX0VVX0RJU19TUzFfUjFfU0hJRlQpIDw8IDQpOwogCi0JCXNz
ZXUtPnN1YnNsaWNlX21hc2tbMF0gfD0gQklUKDEpOworCQlzdWJzbGljZV9tYXNrIHw9IEJJVCgx
KTsKIAkJc3NldV9zZXRfZXVzKHNzZXUsIDAsIDEsIH5kaXNhYmxlZF9tYXNrKTsKIAl9CiAKKwlp
bnRlbF9zc2V1X3NldF9zdWJzbGljZXMoc3NldSwgMCwgc3Vic2xpY2VfbWFzayk7CisKIAlzc2V1
LT5ldV90b3RhbCA9IGNvbXB1dGVfZXVfdG90YWwoc3NldSk7CiAKIAkvKgpAQCAtMzgzLDcgKzM5
Miw3IEBAIHN0YXRpYyB2b2lkIGdlbjlfc3NldV9pbmZvX2luaXQoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2KQogCQkJLyogc2tpcCBkaXNhYmxlZCBzbGljZSAqLwogCQkJY29udGlu
dWU7CiAKLQkJc3NldS0+c3Vic2xpY2VfbWFza1tzXSA9IHN1YnNsaWNlX21hc2s7CisJCWludGVs
X3NzZXVfc2V0X3N1YnNsaWNlcyhzc2V1LCBzLCBzdWJzbGljZV9tYXNrKTsKIAogCQlldV9kaXNh
YmxlID0gSTkxNV9SRUFEKEdFTjlfRVVfRElTQUJMRShzKSk7CiAJCWZvciAoc3MgPSAwOyBzcyA8
IHNzZXUtPm1heF9zdWJzbGljZXM7IHNzKyspIHsKQEAgLTQ5MCw3ICs0OTksNyBAQCBzdGF0aWMg
dm9pZCBicm9hZHdlbGxfc3NldV9pbmZvX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRl
dl9wcml2KQogCQkJLyogc2tpcCBkaXNhYmxlZCBzbGljZSAqLwogCQkJY29udGludWU7CiAKLQkJ
c3NldS0+c3Vic2xpY2VfbWFza1tzXSA9IHN1YnNsaWNlX21hc2s7CisJCWludGVsX3NzZXVfc2V0
X3N1YnNsaWNlcyhzc2V1LCBzLCBzdWJzbGljZV9tYXNrKTsKIAogCQlmb3IgKHNzID0gMDsgc3Mg
PCBzc2V1LT5tYXhfc3Vic2xpY2VzOyBzcysrKSB7CiAJCQl1OCBldV9kaXNhYmxlZF9tYXNrOwpA
QCAtNTQxLDYgKzU1MCw3IEBAIHN0YXRpYyB2b2lkIGhhc3dlbGxfc3NldV9pbmZvX2luaXQoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCXN0cnVjdCBzc2V1X2Rldl9pbmZvICpz
c2V1ID0gJlJVTlRJTUVfSU5GTyhkZXZfcHJpdiktPnNzZXU7CiAJdTMyIGZ1c2UxOwogCWludCBz
LCBzczsKKwl1MzIgc3Vic2xpY2VfbWFzazsKIAogCS8qCiAJICogVGhlcmUgaXNuJ3QgYSByZWdp
c3RlciB0byB0ZWxsIHVzIGhvdyBtYW55IHNsaWNlcy9zdWJzbGljZXMuIFdlCkBAIC01NTIsMTYg
KzU2MiwxNSBAQCBzdGF0aWMgdm9pZCBoYXN3ZWxsX3NzZXVfaW5mb19pbml0KHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkJLyogZmFsbCB0aHJvdWdoICovCiAJY2FzZSAxOgog
CQlzc2V1LT5zbGljZV9tYXNrID0gQklUKDApOwotCQlzc2V1LT5zdWJzbGljZV9tYXNrWzBdID0g
QklUKDApOworCQlzdWJzbGljZV9tYXNrID0gQklUKDApOwogCQlicmVhazsKIAljYXNlIDI6CiAJ
CXNzZXUtPnNsaWNlX21hc2sgPSBCSVQoMCk7Ci0JCXNzZXUtPnN1YnNsaWNlX21hc2tbMF0gPSBC
SVQoMCkgfCBCSVQoMSk7CisJCXN1YnNsaWNlX21hc2sgPSBCSVQoMCkgfCBCSVQoMSk7CiAJCWJy
ZWFrOwogCWNhc2UgMzoKIAkJc3NldS0+c2xpY2VfbWFzayA9IEJJVCgwKSB8IEJJVCgxKTsKLQkJ
c3NldS0+c3Vic2xpY2VfbWFza1swXSA9IEJJVCgwKSB8IEJJVCgxKTsKLQkJc3NldS0+c3Vic2xp
Y2VfbWFza1sxXSA9IEJJVCgwKSB8IEJJVCgxKTsKKwkJc3Vic2xpY2VfbWFzayA9IEJJVCgwKSB8
IEJJVCgxKTsKIAkJYnJlYWs7CiAJfQogCkBAIC01ODcsNiArNTk2LDggQEAgc3RhdGljIHZvaWQg
aGFzd2VsbF9zc2V1X2luZm9faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYp
CiAJCQkgICAgc3NldS0+ZXVfcGVyX3N1YnNsaWNlKTsKIAogCWZvciAocyA9IDA7IHMgPCBzc2V1
LT5tYXhfc2xpY2VzOyBzKyspIHsKKwkJaW50ZWxfc3NldV9zZXRfc3Vic2xpY2VzKHNzZXUsIHMs
IHN1YnNsaWNlX21hc2spOworCiAJCWZvciAoc3MgPSAwOyBzcyA8IHNzZXUtPm1heF9zdWJzbGlj
ZXM7IHNzKyspIHsKIAkJCXNzZXVfc2V0X2V1cyhzc2V1LCBzLCBzcywKIAkJCQkgICAgICgxVUwg
PDwgc3NldS0+ZXVfcGVyX3N1YnNsaWNlKSAtIDEpOwotLSAKMi4yMS4wLjUuZ2FlYjU4MmE5ODMK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdm
eCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

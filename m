Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 69D7A31DDDC
	for <lists+intel-gfx@lfdr.de>; Wed, 17 Feb 2021 18:04:22 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C96D16E593;
	Wed, 17 Feb 2021 17:04:20 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DBBDD6E593
 for <intel-gfx@lists.freedesktop.org>; Wed, 17 Feb 2021 17:04:18 +0000 (UTC)
IronPort-SDR: u3XtB+3KRBXPyC9jD+GvSIqXFfp9XvLG9b6OYK8ioei6b/hXNISV4bIlLWjT/0Bc/ZQQeu2yND
 GUycOblH7ulw==
X-IronPort-AV: E=McAfee;i="6000,8403,9898"; a="268104981"
X-IronPort-AV: E=Sophos;i="5.81,184,1610438400"; d="scan'208";a="268104981"
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by fmsmga105.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 17 Feb 2021 09:04:02 -0800
IronPort-SDR: 0ceyy6rqurSd11x1oVPOJJOsmG7YCoEIJVkuAlD/JWnPv3lP8tMHth3ZI0XEsL5E1vxSlC2x93
 xjfi+pr+vKSA==
X-IronPort-AV: E=Sophos;i="5.81,184,1610438400"; d="scan'208";a="439429844"
Received: from mvalka-mobl1.ger.corp.intel.com (HELO localhost)
 ([10.252.39.140])
 by orsmga001-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 17 Feb 2021 09:04:00 -0800
From: Jani Nikula <jani.nikula@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 17 Feb 2021 19:03:32 +0200
Message-Id: <a94ca37acde900ce211f446a697e20531dfa72c2.1613580193.git.jani.nikula@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1613580193.git.jani.nikula@intel.com>
References: <cover.1613580193.git.jani.nikula@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 02/12] drm/i915/bios: store bdb version in i915
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com, Lucas De Marchi <lucas.demarchi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

V2UnbGwgYmUgbmVlZGluZyB0aGUgdmVyc2lvbiBpbiBtb3JlIHBsYWNlcyBpbiB0aGUgZnV0dXJl
LCBzbyBhdm9pZCB0aGUKbmVlZCB0byBwYXNzIGl0IGFyb3VuZC4gTm8gZnVuY3Rpb25hbCBjaGFu
Z2VzLgoKQ2M6IEx1Y2FzIERlIE1hcmNoaSA8bHVjYXMuZGVtYXJjaGlAaW50ZWwuY29tPgpDYzog
VmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KU2lnbmVkLW9m
Zi1ieTogSmFuaSBOaWt1bGEgPGphbmkubmlrdWxhQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jpb3MuYyB8IDI4ICsrKysrKysrKysrLS0tLS0tLS0t
LS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oICAgICAgICAgICB8ICAzICsrKwog
MiBmaWxlcyBjaGFuZ2VkLCAxNyBpbnNlcnRpb25zKCspLCAxNCBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jpb3MuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5jCmluZGV4IDgwMmMyMjhiMjk0MC4u
YTg3MTJmZThiZjNlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Jpb3MuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Jpb3Mu
YwpAQCAtNTk3LDcgKzU5Nyw3IEBAIGNoaWxkX2RldmljZV9wdHIoY29uc3Qgc3RydWN0IGJkYl9n
ZW5lcmFsX2RlZmluaXRpb25zICpkZWZzLCBpbnQgaSkKIH0KIAogc3RhdGljIHZvaWQKLXBhcnNl
X3Nkdm9fZGV2aWNlX21hcHBpbmcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHU4IGJk
Yl92ZXJzaW9uKQorcGFyc2Vfc2R2b19kZXZpY2VfbWFwcGluZyhzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSkKIHsKIAlzdHJ1Y3Qgc2R2b19kZXZpY2VfbWFwcGluZyAqbWFwcGluZzsKIAlj
b25zdCBzdHJ1Y3QgZGlzcGxheV9kZXZpY2VfZGF0YSAqZGV2ZGF0YTsKQEAgLTE3NjAsOCArMTc2
MCw3IEBAIHN0YXRpYyBlbnVtIHBvcnQgZHZvX3BvcnRfdG9fcG9ydChzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqaTkxNSwKIH0KIAogc3RhdGljIHZvaWQgcGFyc2VfZGRpX3BvcnQoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUsCi0JCQkgICBzdHJ1Y3QgZGlzcGxheV9kZXZpY2VfZGF0YSAq
ZGV2ZGF0YSwKLQkJCSAgIHU4IGJkYl92ZXJzaW9uKQorCQkJICAgc3RydWN0IGRpc3BsYXlfZGV2
aWNlX2RhdGEgKmRldmRhdGEpCiB7CiAJY29uc3Qgc3RydWN0IGNoaWxkX2RldmljZV9jb25maWcg
KmNoaWxkID0gJmRldmRhdGEtPmNoaWxkOwogCXN0cnVjdCBkZGlfdmJ0X3BvcnRfaW5mbyAqaW5m
bzsKQEAgLTE4MDAsMTAgKzE3OTksMTAgQEAgc3RhdGljIHZvaWQgcGFyc2VfZGRpX3BvcnQoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAJaW5mby0+c3VwcG9ydHNfZHAgPSBpc19kcDsK
IAlpbmZvLT5zdXBwb3J0c19lZHAgPSBpc19lZHA7CiAKLQlpZiAoYmRiX3ZlcnNpb24gPj0gMTk1
KQorCWlmIChpOTE1LT52YnQudmVyc2lvbiA+PSAxOTUpCiAJCWluZm8tPnN1cHBvcnRzX3R5cGVj
X3VzYiA9IGNoaWxkLT5kcF91c2JfdHlwZV9jOwogCi0JaWYgKGJkYl92ZXJzaW9uID49IDIwOSkK
KwlpZiAoaTkxNS0+dmJ0LnZlcnNpb24gPj0gMjA5KQogCQlpbmZvLT5zdXBwb3J0c190YnQgPSBj
aGlsZC0+dGJ0OwogCiAJZHJtX2RiZ19rbXMoJmk5MTUtPmRybSwKQEAgLTE4MzQsNyArMTgzMyw3
IEBAIHN0YXRpYyB2b2lkIHBhcnNlX2RkaV9wb3J0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpp
OTE1LAogCQlzYW5pdGl6ZV9hdXhfY2goaTkxNSwgcG9ydCk7CiAJfQogCi0JaWYgKGJkYl92ZXJz
aW9uID49IDE1OCkgeworCWlmIChpOTE1LT52YnQudmVyc2lvbiA+PSAxNTgpIHsKIAkJLyogVGhl
IFZCVCBIRE1JIGxldmVsIHNoaWZ0IHZhbHVlcyBtYXRjaCB0aGUgdGFibGUgd2UgaGF2ZS4gKi8K
IAkJdTggaGRtaV9sZXZlbF9zaGlmdCA9IGNoaWxkLT5oZG1pX2xldmVsX3NoaWZ0ZXJfdmFsdWU7
CiAJCWRybV9kYmdfa21zKCZpOTE1LT5kcm0sCkBAIC0xODQ1LDcgKzE4NDQsNyBAQCBzdGF0aWMg
dm9pZCBwYXJzZV9kZGlfcG9ydChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKIAkJaW5m
by0+aGRtaV9sZXZlbF9zaGlmdF9zZXQgPSB0cnVlOwogCX0KIAotCWlmIChiZGJfdmVyc2lvbiA+
PSAyMDQpIHsKKwlpZiAoaTkxNS0+dmJ0LnZlcnNpb24gPj0gMjA0KSB7CiAJCWludCBtYXhfdG1k
c19jbG9jazsKIAogCQlzd2l0Y2ggKGNoaWxkLT5oZG1pX21heF9kYXRhX3JhdGUpIHsKQEAgLTE4
NzEsNyArMTg3MCw3IEBAIHN0YXRpYyB2b2lkIHBhcnNlX2RkaV9wb3J0KHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1LAogCX0KIAogCS8qIFBhcnNlIHRoZSBJX2Jvb3N0IGNvbmZpZyBmb3Ig
U0tMIGFuZCBhYm92ZSAqLwotCWlmIChiZGJfdmVyc2lvbiA+PSAxOTYgJiYgY2hpbGQtPmlib29z
dCkgeworCWlmIChpOTE1LT52YnQudmVyc2lvbiA+PSAxOTYgJiYgY2hpbGQtPmlib29zdCkgewog
CQlpbmZvLT5kcF9ib29zdF9sZXZlbCA9IHRyYW5zbGF0ZV9pYm9vc3QoY2hpbGQtPmRwX2lib29z
dF9sZXZlbCk7CiAJCWRybV9kYmdfa21zKCZpOTE1LT5kcm0sCiAJCQkgICAgIlBvcnQgJWMgVkJU
IChlKURQIGJvb3N0IGxldmVsOiAlZFxuIiwKQEAgLTE4ODMsNyArMTg4Miw3IEBAIHN0YXRpYyB2
b2lkIHBhcnNlX2RkaV9wb3J0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCX0KIAog
CS8qIERQIG1heCBsaW5rIHJhdGUgZm9yIENOTCsgKi8KLQlpZiAoYmRiX3ZlcnNpb24gPj0gMjE2
KSB7CisJaWYgKGk5MTUtPnZidC52ZXJzaW9uID49IDIxNikgewogCQlzd2l0Y2ggKGNoaWxkLT5k
cF9tYXhfbGlua19yYXRlKSB7CiAJCWRlZmF1bHQ6CiAJCWNhc2UgVkJUX0RQX01BWF9MSU5LX1JB
VEVfSEJSMzoKQEAgLTE5MDcsMTggKzE5MDYsMTggQEAgc3RhdGljIHZvaWQgcGFyc2VfZGRpX3Bv
cnQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsCiAJaW5mby0+Y2hpbGQgPSBjaGlsZDsK
IH0KIAotc3RhdGljIHZvaWQgcGFyc2VfZGRpX3BvcnRzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICppOTE1LCB1OCBiZGJfdmVyc2lvbikKK3N0YXRpYyB2b2lkIHBhcnNlX2RkaV9wb3J0cyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsKIAlzdHJ1Y3QgZGlzcGxheV9kZXZpY2VfZGF0
YSAqZGV2ZGF0YTsKIAogCWlmICghSEFTX0RESShpOTE1KSAmJiAhSVNfQ0hFUlJZVklFVyhpOTE1
KSkKIAkJcmV0dXJuOwogCi0JaWYgKGJkYl92ZXJzaW9uIDwgMTU1KQorCWlmIChpOTE1LT52YnQu
dmVyc2lvbiA8IDE1NSkKIAkJcmV0dXJuOwogCiAJbGlzdF9mb3JfZWFjaF9lbnRyeShkZXZkYXRh
LCAmaTkxNS0+dmJ0LmRpc3BsYXlfZGV2aWNlcywgbm9kZSkKLQkJcGFyc2VfZGRpX3BvcnQoaTkx
NSwgZGV2ZGF0YSwgYmRiX3ZlcnNpb24pOworCQlwYXJzZV9kZGlfcG9ydChpOTE1LCBkZXZkYXRh
KTsKIH0KIAogc3RhdGljIHZvaWQKQEAgLTIyMjksNiArMjIyOCw3IEBAIHZvaWQgaW50ZWxfYmlv
c19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCX0KIAogCWJkYiA9IGdldF9i
ZGJfaGVhZGVyKHZidCk7CisJaTkxNS0+dmJ0LnZlcnNpb24gPSBiZGItPnZlcnNpb247CiAKIAlk
cm1fZGJnX2ttcygmaTkxNS0+ZHJtLAogCQkgICAgIlZCVCBzaWduYXR1cmUgXCIlLipzXCIsIEJE
QiB2ZXJzaW9uICVkXG4iLApAQCAtMjI1Miw4ICsyMjUyLDggQEAgdm9pZCBpbnRlbF9iaW9zX2lu
aXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJcGFyc2VfY29tcHJlc3Npb25fcGFy
YW1ldGVycyhpOTE1LCBiZGIpOwogCiAJLyogRnVydGhlciBwcm9jZXNzaW5nIG9uIHByZS1wYXJz
ZWQgZGF0YSAqLwotCXBhcnNlX3Nkdm9fZGV2aWNlX21hcHBpbmcoaTkxNSwgYmRiLT52ZXJzaW9u
KTsKLQlwYXJzZV9kZGlfcG9ydHMoaTkxNSwgYmRiLT52ZXJzaW9uKTsKKwlwYXJzZV9zZHZvX2Rl
dmljZV9tYXBwaW5nKGk5MTUpOworCXBhcnNlX2RkaV9wb3J0cyhpOTE1KTsKIAogb3V0OgogCWlm
ICghdmJ0KSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRleCBmODQxM2IzYjlkYTguLjYyYmUx
NDY1ZjUyYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBAIC02MTUsNiArNjE1LDkgQEAgZW51
bSBwc3JfbGluZXNfdG9fd2FpdCB7CiB9OwogCiBzdHJ1Y3QgaW50ZWxfdmJ0X2RhdGEgeworCS8q
IGJkYiB2ZXJzaW9uICovCisJdTE2IHZlcnNpb247CisKIAlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZSAqbGZwX2x2ZHNfdmJ0X21vZGU7IC8qIGlmIGFueSAqLwogCXN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlICpzZHZvX2x2ZHNfdmJ0X21vZGU7IC8qIGlmIGFueSAqLwogCi0tIAoyLjIwLjEKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWls
aW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

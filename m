Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EEBECBCABB
	for <lists+intel-gfx@lfdr.de>; Tue, 24 Sep 2019 17:00:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4905189CD5;
	Tue, 24 Sep 2019 15:00:22 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 428B689CD3
 for <intel-gfx@lists.freedesktop.org>; Tue, 24 Sep 2019 15:00:20 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18601413-1500050 
 for multiple; Tue, 24 Sep 2019 15:59:55 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 24 Sep 2019 15:59:50 +0100
Message-Id: <20190924145950.3011-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20190923230209.16480-1-chris@chris-wilson.co.uk>
References: <20190923230209.16480-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2] drm/i915/selftests: Verify the LRC register
 layout between init and HW
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QmVmb3JlIHdlIHN1Ym1pdCB0aGUgZmlyc3QgY29udGV4dCB0byBIVywgd2UgbmVlZCB0byBjb25z
dHJ1Y3QgYSB2YWxpZAppbWFnZSBvZiB0aGUgcmVnaXN0ZXIgc3RhdGUuIFRoaXMgbGF5b3V0IGlz
IGRlZmluZWQgYnkgdGhlIEhXIGFuZCBzaG91bGQKbWF0Y2ggdGhlIGxheW91dCBnZW5lcmF0ZWQg
YnkgSFcgd2hlbiBpdCBzYXZlcyB0aGUgY29udGV4dCBpbWFnZS4KQXNzZXJ0aW5nIHRoYXQgdGhp
cyBzaG91bGQgYmUgZXF1aXZhbGVudCBzaG91bGQgaGVscCBhdm9pZCBhbnkgdW5kZWZpbmVkCmJl
aGF2aW91ciBhbmQgdmVyaWZ5IHRoYXQgd2UgaGF2ZW4ndCBtaXNzZWQgYW55dGhpbmcgaW1wb3J0
YW50IQoKT2YgY291cnNlLCBoYXZpbmcgaW5zaXN0ZWQgdGhhdCB0aGUgaW5pdGlhbCByZWdpc3Rl
ciBzdGF0ZSB3aXRoaW4gdGhlCkxSQyBzaG91bGQgbWF0Y2ggdGhhdCByZXR1cm5lZCBieSBIVywg
d2UgbmVlZCB0byBlbnN1cmUgdGhhdCBpdCBkb2VzLgoKdjI6IERyb3AgdGhlIFJFTEFUSVZFX01N
SU8gZmxhZyBmcm9tIGdlbjExLCB3ZSBpZ25vcmUgaXQgZm9yCmNvbnN0cnVjdGluZyB0aGUgbHJj
IGltYWdlLgoKU2lnbmVkLW9mZi1ieTogQ2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24u
Y28udWs+CkNjOiBNaWthIEt1b3BwYWxhIDxtaWthLmt1b3BwYWxhQGxpbnV4LmludGVsLmNvbT4K
Q2M6IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5j
b20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYyAgIHwg
ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICAgICAgICAgfCA2
NjcgKysrKysrKysrKysrLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmNf
cmVnLmggICAgICAgfCAgNjIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xy
Yy5jICAgICAgICB8IDE0MiArKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYyAg
ICAgICAgICAgICAgfCAgMzUgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5oICAg
ICAgICAgICAgICB8ICAgNSArLQogLi4uL2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2xpdmVfc2Vs
ZnRlc3RzLmggIHwgICAxICsKIDcgZmlsZXMgY2hhbmdlZCwgNjQ4IGluc2VydGlvbnMoKyksIDI2
NiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRl
eHQuYwppbmRleCA0YTM0YzRmNjIwNjUuLmY3YmEwOTM1ZWQ2NyAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCkBAIC0xMTE1LDcgKzExMTUsNyBAQCBzdGF0
aWMgaW50IGdlbjhfZW1pdF9ycGNzX2NvbmZpZyhzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSwKIAog
CW9mZnNldCA9IGk5MTVfZ2d0dF9vZmZzZXQoY2UtPnN0YXRlKSArCiAJCSBMUkNfU1RBVEVfUE4g
KiBQQUdFX1NJWkUgKwotCQkgKENUWF9SX1BXUl9DTEtfU1RBVEUgKyAxKSAqIDQ7CisJCSBDVFhf
Ul9QV1JfQ0xLX1NUQVRFICogNDsKIAogCSpjcysrID0gTUlfU1RPUkVfRFdPUkRfSU1NX0dFTjQg
fCBNSV9VU0VfR0dUVDsKIAkqY3MrKyA9IGxvd2VyXzMyX2JpdHMob2Zmc2V0KTsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfbHJjLmMKaW5kZXggNmNmZGMwZjlmMmI5Li5jYWFjMDkxYjNlYjkgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCkBAIC0yMzAsOSArMjMwLDEwIEBAIHN0YXRp
YyBpbnQgX19leGVjbGlzdHNfY29udGV4dF9hbGxvYyhzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2Us
CiAJCQkJICAgICBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwogCiBzdGF0aWMgdm9p
ZCBleGVjbGlzdHNfaW5pdF9yZWdfc3RhdGUodTMyICpyZWdfc3RhdGUsCi0JCQkJICAgICBzdHJ1
Y3QgaW50ZWxfY29udGV4dCAqY2UsCi0JCQkJICAgICBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUsCi0JCQkJICAgICBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZyk7CisJCQkJICAgICBjb25z
dCBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCisJCQkJICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmUsCisJCQkJICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfcmluZyAqcmlu
ZywKKwkJCQkgICAgIGJvb2wgY2xvc2UpOwogCiBzdGF0aWMgdm9pZCBtYXJrX2VpbyhzdHJ1Y3Qg
aTkxNV9yZXF1ZXN0ICpycSkKIHsKQEAgLTQ3MSw2ICs0NzIsNDExIEBAIGxyY19kZXNjcmlwdG9y
KHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5l
KQogCXJldHVybiBkZXNjOwogfQogCitzdGF0aWMgdTMyICpzZXRfb2Zmc2V0cyh1MzIgKnJlZ3Ms
CisJCQljb25zdCB1OCAqZGF0YSwKKwkJCWNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSkKKyNkZWZpbmUgTk9QKHgpIChCSVQoNykgfCAoeCkpCisjZGVmaW5lIExSSShjb3VudCwg
ZmxhZ3MpICgoZmxhZ3MpIDw8IDYgfCAoY291bnQpKQorI2RlZmluZSBQT1NURUQgQklUKDApCisj
ZGVmaW5lIFJFRyh4KSAoKCh4KSA+PiAyKSB8IEJVSUxEX0JVR19PTl9aRVJPKHggPj0gMHgyMDAp
KQorI2RlZmluZSBSRUcxNih4KSBcCisJKCgoeCkgPj4gOSkgfCBCSVQoNykgfCBCVUlMRF9CVUdf
T05fWkVSTyh4ID49IDB4MTAwMDApKSwgXAorCSgoKHgpID4+IDIpICYgMHg3ZikKKyNkZWZpbmUg
RU5EKCkgMAoreworCWNvbnN0IHUzMiBiYXNlID0gZW5naW5lLT5tbWlvX2Jhc2U7CisKKwl3aGls
ZSAoKmRhdGEpIHsKKwkJdTggY291bnQsIGZsYWdzOworCisJCWlmICgqZGF0YSAmIEJJVCg3KSkg
eyAvKiBza2lwICovCisJCQlyZWdzICs9ICpkYXRhKysgJiB+QklUKDcpOworCQkJY29udGludWU7
CisJCX0KKworCQljb3VudCA9ICpkYXRhICYgMHgzZjsKKwkJZmxhZ3MgPSAqZGF0YSA+PiA2Owor
CQlkYXRhKys7CisKKwkJKnJlZ3MgPSBNSV9MT0FEX1JFR0lTVEVSX0lNTShjb3VudCk7CisJCWlm
IChmbGFncyAmIFBPU1RFRCkKKwkJCSpyZWdzIHw9IE1JX0xSSV9GT1JDRV9QT1NURUQ7CisJCWlm
IChJTlRFTF9HRU4oZW5naW5lLT5pOTE1KSA+PSAxMSkKKwkJCSpyZWdzIHw9IE1JX0xSSV9DU19N
TUlPOworCQlyZWdzKys7CisKKwkJR0VNX0JVR19PTighY291bnQpOworCQlkbyB7CisJCQl1MzIg
b2Zmc2V0ID0gMDsKKwkJCXU4IHY7CisKKwkJCWRvIHsKKwkJCQl2ID0gKmRhdGErKzsKKwkJCQlv
ZmZzZXQgPDw9IDc7CisJCQkJb2Zmc2V0IHw9IHYgJiB+QklUKDcpOworCQkJfSB3aGlsZSAodiAm
IEJJVCg3KSk7CisKKwkJCSpyZWdzID0gYmFzZSArIChvZmZzZXQgPDwgMik7CisJCQlyZWdzICs9
IDI7CisJCX0gd2hpbGUgKC0tY291bnQpOworCX0KKworCXJldHVybiByZWdzOworfQorCitzdGF0
aWMgY29uc3QgdTggZ2VuOF94Y3Nfb2Zmc2V0c1tdID0geworCU5PUCgxKSwKKwlMUkkoMTEsIDAp
LAorCVJFRzE2KDB4MjQ0KSwKKwlSRUcoMHgwMzQpLAorCVJFRygweDAzMCksCisJUkVHKDB4MDM4
KSwKKwlSRUcoMHgwM2MpLAorCVJFRygweDE2OCksCisJUkVHKDB4MTQwKSwKKwlSRUcoMHgxMTAp
LAorCVJFRygweDExYyksCisJUkVHKDB4MTE0KSwKKwlSRUcoMHgxMTgpLAorCisJTk9QKDkpLAor
CUxSSSg5LCAwKSwKKwlSRUcxNigweDNhOCksCisJUkVHMTYoMHgyOGMpLAorCVJFRzE2KDB4Mjg4
KSwKKwlSRUcxNigweDI4NCksCisJUkVHMTYoMHgyODApLAorCVJFRzE2KDB4MjdjKSwKKwlSRUcx
NigweDI3OCksCisJUkVHMTYoMHgyNzQpLAorCVJFRzE2KDB4MjcwKSwKKworCU5PUCgxMyksCisJ
TFJJKDIsIDApLAorCVJFRzE2KDB4MjAwKSwKKwlSRUcoMHgwMjgpLAorCisJRU5EKCksCit9Owor
CitzdGF0aWMgY29uc3QgdTggZ2VuOV94Y3Nfb2Zmc2V0c1tdID0geworCU5PUCgxKSwKKwlMUkko
MTQsIFBPU1RFRCksCisJUkVHMTYoMHgyNDQpLAorCVJFRygweDAzNCksCisJUkVHKDB4MDMwKSwK
KwlSRUcoMHgwMzgpLAorCVJFRygweDAzYyksCisJUkVHKDB4MTY4KSwKKwlSRUcoMHgxNDApLAor
CVJFRygweDExMCksCisJUkVHKDB4MTFjKSwKKwlSRUcoMHgxMTQpLAorCVJFRygweDExOCksCisJ
UkVHKDB4MWMwKSwKKwlSRUcoMHgxYzQpLAorCVJFRygweDFjOCksCisKKwlOT1AoMyksCisJTFJJ
KDksIFBPU1RFRCksCisJUkVHMTYoMHgzYTgpLAorCVJFRzE2KDB4MjhjKSwKKwlSRUcxNigweDI4
OCksCisJUkVHMTYoMHgyODQpLAorCVJFRzE2KDB4MjgwKSwKKwlSRUcxNigweDI3YyksCisJUkVH
MTYoMHgyNzgpLAorCVJFRzE2KDB4Mjc0KSwKKwlSRUcxNigweDI3MCksCisKKwlOT1AoMTMpLAor
CUxSSSgxLCBQT1NURUQpLAorCVJFRzE2KDB4MjAwKSwKKworCU5PUCgxMyksCisJTFJJKDQ0LCBQ
T1NURUQpLAorCVJFRygweDAyOCksCisJUkVHKDB4MDljKSwKKwlSRUcoMHgwYzApLAorCVJFRygw
eDE3OCksCisJUkVHKDB4MTdjKSwKKwlSRUcxNigweDM1OCksCisJUkVHKDB4MTcwKSwKKwlSRUco
MHgxNTApLAorCVJFRygweDE1NCksCisJUkVHKDB4MTU4KSwKKwlSRUcxNigweDQxYyksCisJUkVH
MTYoMHg2MDApLAorCVJFRzE2KDB4NjA0KSwKKwlSRUcxNigweDYwOCksCisJUkVHMTYoMHg2MGMp
LAorCVJFRzE2KDB4NjEwKSwKKwlSRUcxNigweDYxNCksCisJUkVHMTYoMHg2MTgpLAorCVJFRzE2
KDB4NjFjKSwKKwlSRUcxNigweDYyMCksCisJUkVHMTYoMHg2MjQpLAorCVJFRzE2KDB4NjI4KSwK
KwlSRUcxNigweDYyYyksCisJUkVHMTYoMHg2MzApLAorCVJFRzE2KDB4NjM0KSwKKwlSRUcxNigw
eDYzOCksCisJUkVHMTYoMHg2M2MpLAorCVJFRzE2KDB4NjQwKSwKKwlSRUcxNigweDY0NCksCisJ
UkVHMTYoMHg2NDgpLAorCVJFRzE2KDB4NjRjKSwKKwlSRUcxNigweDY1MCksCisJUkVHMTYoMHg2
NTQpLAorCVJFRzE2KDB4NjU4KSwKKwlSRUcxNigweDY1YyksCisJUkVHMTYoMHg2NjApLAorCVJF
RzE2KDB4NjY0KSwKKwlSRUcxNigweDY2OCksCisJUkVHMTYoMHg2NmMpLAorCVJFRzE2KDB4Njcw
KSwKKwlSRUcxNigweDY3NCksCisJUkVHMTYoMHg2NzgpLAorCVJFRzE2KDB4NjdjKSwKKwlSRUco
MHgwNjgpLAorCisJRU5EKCksCit9OworCitzdGF0aWMgY29uc3QgdTggZ2VuMTJfeGNzX29mZnNl
dHNbXSA9IHsKKwlOT1AoMSksCisJTFJJKDEzLCBQT1NURUQpLAorCVJFRzE2KDB4MjQ0KSwKKwlS
RUcoMHgwMzQpLAorCVJFRygweDAzMCksCisJUkVHKDB4MDM4KSwKKwlSRUcoMHgwM2MpLAorCVJF
RygweDE2OCksCisJUkVHKDB4MTQwKSwKKwlSRUcoMHgxMTApLAorCVJFRygweDFjMCksCisJUkVH
KDB4MWM0KSwKKwlSRUcoMHgxYzgpLAorCVJFRygweDE4MCksCisJUkVHMTYoMHgyYjQpLAorCisJ
Tk9QKDUpLAorCUxSSSg5LCBQT1NURUQpLAorCVJFRzE2KDB4M2E4KSwKKwlSRUcxNigweDI4Yyks
CisJUkVHMTYoMHgyODgpLAorCVJFRzE2KDB4Mjg0KSwKKwlSRUcxNigweDI4MCksCisJUkVHMTYo
MHgyN2MpLAorCVJFRzE2KDB4Mjc4KSwKKwlSRUcxNigweDI3NCksCisJUkVHMTYoMHgyNzApLAor
CisJTk9QKDEzKSwKKwlMUkkoMiwgUE9TVEVEKSwKKwlSRUcxNigweDIwMCksCisJUkVHMTYoMHgy
MDQpLAorCisJTk9QKDExKSwKKwlMUkkoNTAsIFBPU1RFRCksCisJUkVHMTYoMHg1ODgpLAorCVJF
RzE2KDB4NTg4KSwKKwlSRUcxNigweDU4OCksCisJUkVHMTYoMHg1ODgpLAorCVJFRzE2KDB4NTg4
KSwKKwlSRUcxNigweDU4OCksCisJUkVHKDB4MDI4KSwKKwlSRUcoMHgwOWMpLAorCVJFRygweDBj
MCksCisJUkVHKDB4MTc4KSwKKwlSRUcoMHgxN2MpLAorCVJFRzE2KDB4MzU4KSwKKwlSRUcoMHgx
NzApLAorCVJFRygweDE1MCksCisJUkVHKDB4MTU0KSwKKwlSRUcoMHgxNTgpLAorCVJFRzE2KDB4
NDFjKSwKKwlSRUcxNigweDYwMCksCisJUkVHMTYoMHg2MDQpLAorCVJFRzE2KDB4NjA4KSwKKwlS
RUcxNigweDYwYyksCisJUkVHMTYoMHg2MTApLAorCVJFRzE2KDB4NjE0KSwKKwlSRUcxNigweDYx
OCksCisJUkVHMTYoMHg2MWMpLAorCVJFRzE2KDB4NjIwKSwKKwlSRUcxNigweDYyNCksCisJUkVH
MTYoMHg2MjgpLAorCVJFRzE2KDB4NjJjKSwKKwlSRUcxNigweDYzMCksCisJUkVHMTYoMHg2MzQp
LAorCVJFRzE2KDB4NjM4KSwKKwlSRUcxNigweDYzYyksCisJUkVHMTYoMHg2NDApLAorCVJFRzE2
KDB4NjQ0KSwKKwlSRUcxNigweDY0OCksCisJUkVHMTYoMHg2NGMpLAorCVJFRzE2KDB4NjUwKSwK
KwlSRUcxNigweDY1NCksCisJUkVHMTYoMHg2NTgpLAorCVJFRzE2KDB4NjVjKSwKKwlSRUcxNigw
eDY2MCksCisJUkVHMTYoMHg2NjQpLAorCVJFRzE2KDB4NjY4KSwKKwlSRUcxNigweDY2YyksCisJ
UkVHMTYoMHg2NzApLAorCVJFRzE2KDB4Njc0KSwKKwlSRUcxNigweDY3OCksCisJUkVHMTYoMHg2
N2MpLAorCVJFRygweDA2OCksCisKKwlFTkQoKSwKK307CisKK3N0YXRpYyBjb25zdCB1OCBnZW44
X3Jjc19vZmZzZXRzW10gPSB7CisJTk9QKDEpLAorCUxSSSgxNCwgUE9TVEVEKSwKKwlSRUcxNigw
eDI0NCksCisJUkVHKDB4MDM0KSwKKwlSRUcoMHgwMzApLAorCVJFRygweDAzOCksCisJUkVHKDB4
MDNjKSwKKwlSRUcoMHgxNjgpLAorCVJFRygweDE0MCksCisJUkVHKDB4MTEwKSwKKwlSRUcoMHgx
MWMpLAorCVJFRygweDExNCksCisJUkVHKDB4MTE4KSwKKwlSRUcoMHgxYzApLAorCVJFRygweDFj
NCksCisJUkVHKDB4MWM4KSwKKworCU5PUCgzKSwKKwlMUkkoOSwgUE9TVEVEKSwKKwlSRUcxNigw
eDNhOCksCisJUkVHMTYoMHgyOGMpLAorCVJFRzE2KDB4Mjg4KSwKKwlSRUcxNigweDI4NCksCisJ
UkVHMTYoMHgyODApLAorCVJFRzE2KDB4MjdjKSwKKwlSRUcxNigweDI3OCksCisJUkVHMTYoMHgy
NzQpLAorCVJFRzE2KDB4MjcwKSwKKworCU5PUCgxMyksCisJTFJJKDEsIDApLAorCVJFRygweDBj
OCksCisKKwlFTkQoKSwKK307CisKK3N0YXRpYyBjb25zdCB1OCBnZW4xMV9yY3Nfb2Zmc2V0c1td
ID0geworCU5PUCgxKSwKKwlMUkkoMTUsIFBPU1RFRCksCisJUkVHMTYoMHgyNDQpLAorCVJFRygw
eDAzNCksCisJUkVHKDB4MDMwKSwKKwlSRUcoMHgwMzgpLAorCVJFRygweDAzYyksCisJUkVHKDB4
MTY4KSwKKwlSRUcoMHgxNDApLAorCVJFRygweDExMCksCisJUkVHKDB4MTFjKSwKKwlSRUcoMHgx
MTQpLAorCVJFRygweDExOCksCisJUkVHKDB4MWMwKSwKKwlSRUcoMHgxYzQpLAorCVJFRygweDFj
OCksCisJUkVHKDB4MTgwKSwKKworCU5PUCgxKSwKKwlMUkkoOSwgUE9TVEVEKSwKKwlSRUcxNigw
eDNhOCksCisJUkVHMTYoMHgyOGMpLAorCVJFRzE2KDB4Mjg4KSwKKwlSRUcxNigweDI4NCksCisJ
UkVHMTYoMHgyODApLAorCVJFRzE2KDB4MjdjKSwKKwlSRUcxNigweDI3OCksCisJUkVHMTYoMHgy
NzQpLAorCVJFRzE2KDB4MjcwKSwKKworCUxSSSgxLCBQT1NURUQpLAorCVJFRygweDFiMCksCisK
KwlOT1AoMTApLAorCUxSSSgxLCAwKSwKKwlSRUcoMHgwYzgpLAorCisJRU5EKCksCit9OworCitz
dGF0aWMgY29uc3QgdTggZ2VuMTJfcmNzX29mZnNldHNbXSA9IHsKKwlOT1AoMSksCisJTFJJKDEz
LCBQT1NURUQpLAorCVJFRzE2KDB4MjQ0KSwKKwlSRUcoMHgwMzQpLAorCVJFRygweDAzMCksCisJ
UkVHKDB4MDM4KSwKKwlSRUcoMHgwM2MpLAorCVJFRygweDE2OCksCisJUkVHKDB4MTQwKSwKKwlS
RUcoMHgxMTApLAorCVJFRygweDFjMCksCisJUkVHKDB4MWM0KSwKKwlSRUcoMHgxYzgpLAorCVJF
RygweDE4MCksCisJUkVHMTYoMHgyYjQpLAorCisJTk9QKDUpLAorCUxSSSg5LCBQT1NURUQpLAor
CVJFRzE2KDB4M2E4KSwKKwlSRUcxNigweDI4YyksCisJUkVHMTYoMHgyODgpLAorCVJFRzE2KDB4
Mjg0KSwKKwlSRUcxNigweDI4MCksCisJUkVHMTYoMHgyN2MpLAorCVJFRzE2KDB4Mjc4KSwKKwlS
RUcxNigweDI3NCksCisJUkVHMTYoMHgyNzApLAorCisJTFJJKDMsIFBPU1RFRCksCisJUkVHKDB4
MWIwKSwKKwlSRUcxNigweDVhOCksCisJUkVHMTYoMHg1YWMpLAorCisJTk9QKDYpLAorCUxSSSgx
LCAwKSwKKwlSRUcoMHgwYzgpLAorCisJRU5EKCksCit9OworCisjdW5kZWYgRU5ECisjdW5kZWYg
UkVHMTYKKyN1bmRlZiBSRUcKKyN1bmRlZiBMUkkKKyN1bmRlZiBOT1AKKworc3RhdGljIGNvbnN0
IHU4ICpyZWdfb2Zmc2V0cyhjb25zdCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCit7
CisJaWYgKGVuZ2luZS0+Y2xhc3MgPT0gUkVOREVSX0NMQVNTKSB7CisJCWlmIChJTlRFTF9HRU4o
ZW5naW5lLT5pOTE1KSA+PSAxMikKKwkJCXJldHVybiBnZW4xMl9yY3Nfb2Zmc2V0czsKKwkJZWxz
ZSBpZiAoSU5URUxfR0VOKGVuZ2luZS0+aTkxNSkgPj0gMTEpCisJCQlyZXR1cm4gZ2VuMTFfcmNz
X29mZnNldHM7CisJCWVsc2UKKwkJCXJldHVybiBnZW44X3Jjc19vZmZzZXRzOworCX0gZWxzZSB7
CisJCWlmIChJTlRFTF9HRU4oZW5naW5lLT5pOTE1KSA+PSAxMikKKwkJCXJldHVybiBnZW4xMl94
Y3Nfb2Zmc2V0czsKKwkJZWxzZSBpZiAoSU5URUxfR0VOKGVuZ2luZS0+aTkxNSkgPj0gOSkKKwkJ
CXJldHVybiBnZW45X3hjc19vZmZzZXRzOworCQllbHNlCisJCQlyZXR1cm4gZ2VuOF94Y3Nfb2Zm
c2V0czsKKwl9Cit9CisKIHN0YXRpYyB2b2lkIHVud2luZF93YV90YWlsKHN0cnVjdCBpOTE1X3Jl
cXVlc3QgKnJxKQogewogCXJxLT50YWlsID0gaW50ZWxfcmluZ193cmFwKHJxLT5yaW5nLCBycS0+
d2FfdGFpbCAtIFdBX1RBSUxfQllURVMpOwpAQCAtNjU0LDcgKzEwNjAsNyBAQCBzdGF0aWMgdTY0
IGV4ZWNsaXN0c191cGRhdGVfY29udGV4dChjb25zdCBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkK
IAlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UgPSBycS0+aHdfY29udGV4dDsKIAl1NjQgZGVzYzsK
IAotCWNlLT5scmNfcmVnX3N0YXRlW0NUWF9SSU5HX1RBSUwgKyAxXSA9CisJY2UtPmxyY19yZWdf
c3RhdGVbQ1RYX1JJTkdfVEFJTF0gPQogCQlpbnRlbF9yaW5nX3NldF90YWlsKHJxLT5yaW5nLCBy
cS0+dGFpbCk7CiAKIAkvKgpAQCAtODI2LDU0ICsxMjMyLDcgQEAgc3RhdGljIGJvb2wgY2FuX21l
cmdlX3JxKGNvbnN0IHN0cnVjdCBpOTE1X3JlcXVlc3QgKnByZXYsCiBzdGF0aWMgdm9pZCB2aXJ0
dWFsX3VwZGF0ZV9yZWdpc3Rlcl9vZmZzZXRzKHUzMiAqcmVncywKIAkJCQkJICAgIHN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIHsKLQl1MzIgYmFzZSA9IGVuZ2luZS0+bW1pb19iYXNl
OwotCi0JLyogUmVmYWN0b3Igc28gdGhhdCB3ZSBvbmx5IGhhdmUgb25lIHBsYWNlIHRoYXQga25v
d3MgYWxsIHRoZSBvZmZzZXRzISAqLwotCUdFTV9XQVJOX09OKElOVEVMX0dFTihlbmdpbmUtPmk5
MTUpID49IDEyKTsKLQotCS8qIE11c3QgbWF0Y2ggZXhlY2xpc3RzX2luaXRfcmVnX3N0YXRlKCkh
ICovCi0KLQkvKiBDb21tb24gcGFydCAqLwotCXJlZ3NbQ1RYX0NPTlRFWFRfQ09OVFJPTF0gPQot
CQlpOTE1X21taW9fcmVnX29mZnNldChSSU5HX0NPTlRFWFRfQ09OVFJPTChiYXNlKSk7Ci0JcmVn
c1tDVFhfUklOR19IRUFEXSA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KFJJTkdfSEVBRChiYXNlKSk7
Ci0JcmVnc1tDVFhfUklOR19UQUlMXSA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KFJJTkdfVEFJTChi
YXNlKSk7Ci0JcmVnc1tDVFhfUklOR19CVUZGRVJfU1RBUlRdID0gaTkxNV9tbWlvX3JlZ19vZmZz
ZXQoUklOR19TVEFSVChiYXNlKSk7Ci0JcmVnc1tDVFhfUklOR19CVUZGRVJfQ09OVFJPTF0gPSBp
OTE1X21taW9fcmVnX29mZnNldChSSU5HX0NUTChiYXNlKSk7Ci0KLQlyZWdzW0NUWF9CQl9IRUFE
X1VdID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoUklOR19CQkFERFJfVURXKGJhc2UpKTsKLQlyZWdz
W0NUWF9CQl9IRUFEX0xdID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoUklOR19CQkFERFIoYmFzZSkp
OwotCXJlZ3NbQ1RYX0JCX1NUQVRFXSA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KFJJTkdfQkJTVEFU
RShiYXNlKSk7Ci0KLQlyZWdzW0NUWF9TRUNPTkRfQkJfSEVBRF9VXSA9Ci0JCWk5MTVfbW1pb19y
ZWdfb2Zmc2V0KFJJTkdfU0JCQUREUl9VRFcoYmFzZSkpOwotCXJlZ3NbQ1RYX1NFQ09ORF9CQl9I
RUFEX0xdID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoUklOR19TQkJBRERSKGJhc2UpKTsKLQlyZWdz
W0NUWF9TRUNPTkRfQkJfU1RBVEVdID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoUklOR19TQkJTVEFU
RShiYXNlKSk7Ci0KLQkvKiBQUEdUVCBwYXJ0ICovCi0JcmVnc1tDVFhfQ1RYX1RJTUVTVEFNUF0g
PQotCQlpOTE1X21taW9fcmVnX29mZnNldChSSU5HX0NUWF9USU1FU1RBTVAoYmFzZSkpOwotCi0J
cmVnc1tDVFhfUERQM19VRFddID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoR0VOOF9SSU5HX1BEUF9V
RFcoYmFzZSwgMykpOwotCXJlZ3NbQ1RYX1BEUDNfTERXXSA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0
KEdFTjhfUklOR19QRFBfTERXKGJhc2UsIDMpKTsKLQlyZWdzW0NUWF9QRFAyX1VEV10gPSBpOTE1
X21taW9fcmVnX29mZnNldChHRU44X1JJTkdfUERQX1VEVyhiYXNlLCAyKSk7Ci0JcmVnc1tDVFhf
UERQMl9MRFddID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoR0VOOF9SSU5HX1BEUF9MRFcoYmFzZSwg
MikpOwotCXJlZ3NbQ1RYX1BEUDFfVURXXSA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KEdFTjhfUklO
R19QRFBfVURXKGJhc2UsIDEpKTsKLQlyZWdzW0NUWF9QRFAxX0xEV10gPSBpOTE1X21taW9fcmVn
X29mZnNldChHRU44X1JJTkdfUERQX0xEVyhiYXNlLCAxKSk7Ci0JcmVnc1tDVFhfUERQMF9VRFdd
ID0gaTkxNV9tbWlvX3JlZ19vZmZzZXQoR0VOOF9SSU5HX1BEUF9VRFcoYmFzZSwgMCkpOwotCXJl
Z3NbQ1RYX1BEUDBfTERXXSA9IGk5MTVfbW1pb19yZWdfb2Zmc2V0KEdFTjhfUklOR19QRFBfTERX
KGJhc2UsIDApKTsKLQotCWlmIChlbmdpbmUtPmNsYXNzID09IFJFTkRFUl9DTEFTUykgewotCQly
ZWdzW0NUWF9SQ1NfSU5ESVJFQ1RfQ1RYXSA9Ci0JCQlpOTE1X21taW9fcmVnX29mZnNldChSSU5H
X0lORElSRUNUX0NUWChiYXNlKSk7Ci0JCXJlZ3NbQ1RYX1JDU19JTkRJUkVDVF9DVFhfT0ZGU0VU
XSA9Ci0JCQlpOTE1X21taW9fcmVnX29mZnNldChSSU5HX0lORElSRUNUX0NUWF9PRkZTRVQoYmFz
ZSkpOwotCQlyZWdzW0NUWF9CQl9QRVJfQ1RYX1BUUl0gPQotCQkJaTkxNV9tbWlvX3JlZ19vZmZz
ZXQoUklOR19CQl9QRVJfQ1RYX1BUUihiYXNlKSk7Ci0KLQkJcmVnc1tDVFhfUl9QV1JfQ0xLX1NU
QVRFXSA9Ci0JCQlpOTE1X21taW9fcmVnX29mZnNldChHRU44X1JfUFdSX0NMS19TVEFURSk7Ci0J
fQorCXNldF9vZmZzZXRzKHJlZ3MsIHJlZ19vZmZzZXRzKGVuZ2luZSksIGVuZ2luZSk7CiB9CiAK
IHN0YXRpYyBib29sIHZpcnR1YWxfbWF0Y2hlcyhjb25zdCBzdHJ1Y3QgdmlydHVhbF9lbmdpbmUg
KnZlLApAQCAtMTczOCw4ICsyMDk3LDggQEAgc3RhdGljIHZvaWQgZXhlY2xpc3RzX2NvbnRleHRf
dW5waW4oc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQogfQogCiBzdGF0aWMgdm9pZAotX19leGVj
bGlzdHNfdXBkYXRlX3JlZ19zdGF0ZShzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCi0JCQkgICAg
IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKK19fZXhlY2xpc3RzX3VwZGF0ZV9yZWdf
c3RhdGUoY29uc3Qgc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAorCQkJICAgICBjb25zdCBzdHJ1
Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiB7CiAJc3RydWN0IGludGVsX3JpbmcgKnJpbmcg
PSBjZS0+cmluZzsKIAl1MzIgKnJlZ3MgPSBjZS0+bHJjX3JlZ19zdGF0ZTsKQEAgLTE3NDcsMTYg
KzIxMDYsMTYgQEAgX19leGVjbGlzdHNfdXBkYXRlX3JlZ19zdGF0ZShzdHJ1Y3QgaW50ZWxfY29u
dGV4dCAqY2UsCiAJR0VNX0JVR19PTighaW50ZWxfcmluZ19vZmZzZXRfdmFsaWQocmluZywgcmlu
Zy0+aGVhZCkpOwogCUdFTV9CVUdfT04oIWludGVsX3Jpbmdfb2Zmc2V0X3ZhbGlkKHJpbmcsIHJp
bmctPnRhaWwpKTsKIAotCXJlZ3NbQ1RYX1JJTkdfQlVGRkVSX1NUQVJUICsgMV0gPSBpOTE1X2dn
dHRfb2Zmc2V0KHJpbmctPnZtYSk7Ci0JcmVnc1tDVFhfUklOR19IRUFEICsgMV0gPSByaW5nLT5o
ZWFkOwotCXJlZ3NbQ1RYX1JJTkdfVEFJTCArIDFdID0gcmluZy0+dGFpbDsKKwlyZWdzW0NUWF9S
SU5HX0JVRkZFUl9TVEFSVF0gPSBpOTE1X2dndHRfb2Zmc2V0KHJpbmctPnZtYSk7CisJcmVnc1tD
VFhfUklOR19IRUFEXSA9IHJpbmctPmhlYWQ7CisJcmVnc1tDVFhfUklOR19UQUlMXSA9IHJpbmct
PnRhaWw7CiAKIAkvKiBSUENTICovCiAJaWYgKGVuZ2luZS0+Y2xhc3MgPT0gUkVOREVSX0NMQVNT
KSB7Ci0JCXJlZ3NbQ1RYX1JfUFdSX0NMS19TVEFURSArIDFdID0KKwkJcmVnc1tDVFhfUl9QV1Jf
Q0xLX1NUQVRFXSA9CiAJCQlpbnRlbF9zc2V1X21ha2VfcnBjcyhlbmdpbmUtPmk5MTUsICZjZS0+
c3NldSk7CiAKLQkJaTkxNV9vYV9pbml0X3JlZ19zdGF0ZShlbmdpbmUsIGNlLCByZWdzKTsKKwkJ
aTkxNV9vYV9pbml0X3JlZ19zdGF0ZShjZSwgZW5naW5lKTsKIAl9CiB9CiAKQEAgLTI0NjUsNyAr
MjgyNCw3IEBAIHN0YXRpYyB2b2lkIF9fZXhlY2xpc3RzX3Jlc2V0KHN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZSwgYm9vbCBzdGFsbGVkKQogCQkgICAgICAgZW5naW5lLT5waW5uZWRfZGVm
YXVsdF9zdGF0ZSArIExSQ19TVEFURV9QTiAqIFBBR0VfU0laRSwKIAkJICAgICAgIGVuZ2luZS0+
Y29udGV4dF9zaXplIC0gUEFHRV9TSVpFKTsKIAl9Ci0JZXhlY2xpc3RzX2luaXRfcmVnX3N0YXRl
KHJlZ3MsIGNlLCBlbmdpbmUsIGNlLT5yaW5nKTsKKwlleGVjbGlzdHNfaW5pdF9yZWdfc3RhdGUo
cmVncywgY2UsIGVuZ2luZSwgY2UtPnJpbmcsIGZhbHNlKTsKIAogb3V0X3JlcGxheToKIAlHRU1f
VFJBQ0UoIiVzIHJlcGxheSB7aGVhZDolMDR4LCB0YWlsOiUwNHhcbiIsCkBAIC0zMjQzLDcgKzM2
MDIsNyBAQCBpbnQgaW50ZWxfZXhlY2xpc3RzX3N1Ym1pc3Npb25faW5pdChzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmUpCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyB1MzIgaW50ZWxfbHJf
aW5kaXJlY3RfY3R4X29mZnNldChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCitzdGF0
aWMgdTMyIGludGVsX2xyX2luZGlyZWN0X2N0eF9vZmZzZXQoY29uc3Qgc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lKQogewogCXUzMiBpbmRpcmVjdF9jdHhfb2Zmc2V0OwogCkBAIC0zMjc4
LDc1ICszNjM3LDQ4IEBAIHN0YXRpYyB1MzIgaW50ZWxfbHJfaW5kaXJlY3RfY3R4X29mZnNldChz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAKIAogc3RhdGljIHZvaWQgaW5pdF9jb21t
b25fcmVnX3N0YXRlKHUzMiAqIGNvbnN0IHJlZ3MsCi0JCQkJICBzdHJ1Y3QgaTkxNV9wcGd0dCAq
IGNvbnN0IHBwZ3R0LAotCQkJCSAgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAotCQkJ
CSAgc3RydWN0IGludGVsX3JpbmcgKnJpbmcpCisJCQkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUsCisJCQkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKIHsK
LQljb25zdCB1MzIgYmFzZSA9IGVuZ2luZS0+bW1pb19iYXNlOwotCi0JQ1RYX1JFRyhyZWdzLCBD
VFhfQ09OVEVYVF9DT05UUk9MLCBSSU5HX0NPTlRFWFRfQ09OVFJPTChiYXNlKSwKKwlyZWdzW0NU
WF9DT05URVhUX0NPTlRST0xdID0KIAkJX01BU0tFRF9CSVRfRElTQUJMRShDVFhfQ1RSTF9FTkdJ
TkVfQ1RYX1JFU1RPUkVfSU5ISUJJVCkgfAotCQlfTUFTS0VEX0JJVF9FTkFCTEUoQ1RYX0NUUkxf
SU5ISUJJVF9TWU5fQ1RYX1NXSVRDSCkpOwotCWlmIChJTlRFTF9HRU4oZW5naW5lLT5pOTE1KSA8
IDExKSB7Ci0JCXJlZ3NbQ1RYX0NPTlRFWFRfQ09OVFJPTCArIDFdIHw9CisJCV9NQVNLRURfQklU
X0VOQUJMRShDVFhfQ1RSTF9JTkhJQklUX1NZTl9DVFhfU1dJVENIKTsKKwlpZiAoSU5URUxfR0VO
KGVuZ2luZS0+aTkxNSkgPCAxMSkKKwkJcmVnc1tDVFhfQ09OVEVYVF9DT05UUk9MXSB8PQogCQkJ
X01BU0tFRF9CSVRfRElTQUJMRShDVFhfQ1RSTF9FTkdJTkVfQ1RYX1NBVkVfSU5ISUJJVCB8CiAJ
CQkJCSAgICBDVFhfQ1RSTF9SU19DVFhfRU5BQkxFKTsKLQl9Ci0JQ1RYX1JFRyhyZWdzLCBDVFhf
UklOR19IRUFELCBSSU5HX0hFQUQoYmFzZSksIDApOwotCUNUWF9SRUcocmVncywgQ1RYX1JJTkdf
VEFJTCwgUklOR19UQUlMKGJhc2UpLCAwKTsKLQlDVFhfUkVHKHJlZ3MsIENUWF9SSU5HX0JVRkZF
Ul9TVEFSVCwgUklOR19TVEFSVChiYXNlKSwgMCk7Ci0JQ1RYX1JFRyhyZWdzLCBDVFhfUklOR19C
VUZGRVJfQ09OVFJPTCwgUklOR19DVEwoYmFzZSksCi0JCVJJTkdfQ1RMX1NJWkUocmluZy0+c2l6
ZSkgfCBSSU5HX1ZBTElEKTsKLQlDVFhfUkVHKHJlZ3MsIENUWF9CQl9IRUFEX1UsIFJJTkdfQkJB
RERSX1VEVyhiYXNlKSwgMCk7Ci0JQ1RYX1JFRyhyZWdzLCBDVFhfQkJfSEVBRF9MLCBSSU5HX0JC
QUREUihiYXNlKSwgMCk7Ci0JQ1RYX1JFRyhyZWdzLCBDVFhfQkJfU1RBVEUsIFJJTkdfQkJTVEFU
RShiYXNlKSwgUklOR19CQl9QUEdUVCk7CisKKwlyZWdzW0NUWF9SSU5HX0JVRkZFUl9DT05UUk9M
XSA9IFJJTkdfQ1RMX1NJWkUocmluZy0+c2l6ZSkgfCBSSU5HX1ZBTElEOworCXJlZ3NbQ1RYX0JC
X1NUQVRFXSA9IFJJTkdfQkJfUFBHVFQ7CiB9CiAKIHN0YXRpYyB2b2lkIGluaXRfd2FfYmJfcmVn
X3N0YXRlKHUzMiAqIGNvbnN0IHJlZ3MsCi0JCQkJIHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSwKKwkJCQkgY29uc3Qgc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCQkJCSB1
MzIgcG9zX2JiX3Blcl9jdHgpCiB7Ci0Jc3RydWN0IGk5MTVfY3R4X3dvcmthcm91bmRzICogY29u
c3Qgd2FfY3R4ID0gJmVuZ2luZS0+d2FfY3R4OwotCWNvbnN0IHUzMiBiYXNlID0gZW5naW5lLT5t
bWlvX2Jhc2U7Ci0JY29uc3QgdTMyIHBvc19pbmRpcmVjdF9jdHggPSBwb3NfYmJfcGVyX2N0eCAr
IDI7Ci0JY29uc3QgdTMyIHBvc19pbmRpcmVjdF9jdHhfb2Zmc2V0ID0gcG9zX2luZGlyZWN0X2N0
eCArIDI7CisJY29uc3Qgc3RydWN0IGk5MTVfY3R4X3dvcmthcm91bmRzICogY29uc3Qgd2FfY3R4
ID0gJmVuZ2luZS0+d2FfY3R4OworCisJaWYgKHdhX2N0eC0+cGVyX2N0eC5zaXplKSB7CisJCWNv
bnN0IHUzMiBnZ3R0X29mZnNldCA9IGk5MTVfZ2d0dF9vZmZzZXQod2FfY3R4LT52bWEpOworCisJ
CXJlZ3NbcG9zX2JiX3Blcl9jdHhdID0KKwkJCShnZ3R0X29mZnNldCArIHdhX2N0eC0+cGVyX2N0
eC5vZmZzZXQpIHwgMHgwMTsKKwl9CiAKLQlDVFhfUkVHKHJlZ3MsIHBvc19pbmRpcmVjdF9jdHgs
IFJJTkdfSU5ESVJFQ1RfQ1RYKGJhc2UpLCAwKTsKLQlDVFhfUkVHKHJlZ3MsIHBvc19pbmRpcmVj
dF9jdHhfb2Zmc2V0LAotCQlSSU5HX0lORElSRUNUX0NUWF9PRkZTRVQoYmFzZSksIDApOwogCWlm
ICh3YV9jdHgtPmluZGlyZWN0X2N0eC5zaXplKSB7CiAJCWNvbnN0IHUzMiBnZ3R0X29mZnNldCA9
IGk5MTVfZ2d0dF9vZmZzZXQod2FfY3R4LT52bWEpOwogCi0JCXJlZ3NbcG9zX2luZGlyZWN0X2N0
eCArIDFdID0KKwkJcmVnc1twb3NfYmJfcGVyX2N0eCArIDJdID0KIAkJCShnZ3R0X29mZnNldCAr
IHdhX2N0eC0+aW5kaXJlY3RfY3R4Lm9mZnNldCkgfAogCQkJKHdhX2N0eC0+aW5kaXJlY3RfY3R4
LnNpemUgLyBDQUNIRUxJTkVfQllURVMpOwogCi0JCXJlZ3NbcG9zX2luZGlyZWN0X2N0eF9vZmZz
ZXQgKyAxXSA9CisJCXJlZ3NbcG9zX2JiX3Blcl9jdHggKyA0XSA9CiAJCQlpbnRlbF9scl9pbmRp
cmVjdF9jdHhfb2Zmc2V0KGVuZ2luZSkgPDwgNjsKIAl9Ci0KLQlDVFhfUkVHKHJlZ3MsIHBvc19i
Yl9wZXJfY3R4LCBSSU5HX0JCX1BFUl9DVFhfUFRSKGJhc2UpLCAwKTsKLQlpZiAod2FfY3R4LT5w
ZXJfY3R4LnNpemUpIHsKLQkJY29uc3QgdTMyIGdndHRfb2Zmc2V0ID0gaTkxNV9nZ3R0X29mZnNl
dCh3YV9jdHgtPnZtYSk7Ci0KLQkJcmVnc1twb3NfYmJfcGVyX2N0eCArIDFdID0KLQkJCShnZ3R0
X29mZnNldCArIHdhX2N0eC0+cGVyX2N0eC5vZmZzZXQpIHwgMHgwMTsKLQl9CiB9CiAKLXN0YXRp
YyB2b2lkIGluaXRfcHBndHRfcmVnX3N0YXRlKHUzMiAqcmVncywgdTMyIGJhc2UsCi0JCQkJIHN0
cnVjdCBpOTE1X3BwZ3R0ICpwcGd0dCkKK3N0YXRpYyB2b2lkIGluaXRfcHBndHRfcmVnX3N0YXRl
KHUzMiAqcmVncywgY29uc3Qgc3RydWN0IGk5MTVfcHBndHQgKnBwZ3R0KQogewotCS8qIFBEUCB2
YWx1ZXMgd2VsbCBiZSBhc3NpZ25lZCBsYXRlciBpZiBuZWVkZWQgKi8KLQlDVFhfUkVHKHJlZ3Ms
IENUWF9QRFAzX1VEVywgR0VOOF9SSU5HX1BEUF9VRFcoYmFzZSwgMyksIDApOwotCUNUWF9SRUco
cmVncywgQ1RYX1BEUDNfTERXLCBHRU44X1JJTkdfUERQX0xEVyhiYXNlLCAzKSwgMCk7Ci0JQ1RY
X1JFRyhyZWdzLCBDVFhfUERQMl9VRFcsIEdFTjhfUklOR19QRFBfVURXKGJhc2UsIDIpLCAwKTsK
LQlDVFhfUkVHKHJlZ3MsIENUWF9QRFAyX0xEVywgR0VOOF9SSU5HX1BEUF9MRFcoYmFzZSwgMiks
IDApOwotCUNUWF9SRUcocmVncywgQ1RYX1BEUDFfVURXLCBHRU44X1JJTkdfUERQX1VEVyhiYXNl
LCAxKSwgMCk7Ci0JQ1RYX1JFRyhyZWdzLCBDVFhfUERQMV9MRFcsIEdFTjhfUklOR19QRFBfTERX
KGJhc2UsIDEpLCAwKTsKLQlDVFhfUkVHKHJlZ3MsIENUWF9QRFAwX1VEVywgR0VOOF9SSU5HX1BE
UF9VRFcoYmFzZSwgMCksIDApOwotCUNUWF9SRUcocmVncywgQ1RYX1BEUDBfTERXLCBHRU44X1JJ
TkdfUERQX0xEVyhiYXNlLCAwKSwgMCk7Ci0KIAlpZiAoaTkxNV92bV9pc180bHZsKCZwcGd0dC0+
dm0pKSB7CiAJCS8qIDY0YiBQUEdUVCAoNDhiaXQgY2Fub25pY2FsKQogCQkgKiBQRFAwX0RFU0NS
SVBUT1IgY29udGFpbnMgdGhlIGJhc2UgYWRkcmVzcyB0byBQTUw0IGFuZApAQCAtMzM2OSw5MSAr
MzcwMSwxMSBAQCBzdGF0aWMgc3RydWN0IGk5MTVfcHBndHQgKnZtX2FsaWFzKHN0cnVjdCBpOTE1
X2FkZHJlc3Nfc3BhY2UgKnZtKQogCQlyZXR1cm4gaTkxNV92bV90b19wcGd0dCh2bSk7CiB9CiAK
LXN0YXRpYyB2b2lkIGdlbjhfaW5pdF9yZWdfc3RhdGUodTMyICogY29uc3QgcmVncywKLQkJCQlz
dHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCi0JCQkJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5n
aW5lLAotCQkJCXN0cnVjdCBpbnRlbF9yaW5nICpyaW5nKQotewotCXN0cnVjdCBpOTE1X3BwZ3R0
ICogY29uc3QgcHBndHQgPSB2bV9hbGlhcyhjZS0+dm0pOwotCWNvbnN0IGJvb2wgcmNzID0gZW5n
aW5lLT5jbGFzcyA9PSBSRU5ERVJfQ0xBU1M7Ci0JY29uc3QgdTMyIGJhc2UgPSBlbmdpbmUtPm1t
aW9fYmFzZTsKLQljb25zdCB1MzIgbHJpX2Jhc2UgPQotCQlpbnRlbF9lbmdpbmVfaGFzX3JlbGF0
aXZlX21taW8oZW5naW5lKSA/IE1JX0xSSV9DU19NTUlPIDogMDsKLQotCXJlZ3NbQ1RYX0xSSV9I
RUFERVJfMF0gPQotCQlNSV9MT0FEX1JFR0lTVEVSX0lNTShyY3MgPyAxNCA6IDExKSB8Ci0JCU1J
X0xSSV9GT1JDRV9QT1NURUQgfAotCQlscmlfYmFzZTsKLQotCWluaXRfY29tbW9uX3JlZ19zdGF0
ZShyZWdzLCBwcGd0dCwgZW5naW5lLCByaW5nKTsKLQlDVFhfUkVHKHJlZ3MsIENUWF9TRUNPTkRf
QkJfSEVBRF9VLCBSSU5HX1NCQkFERFJfVURXKGJhc2UpLCAwKTsKLQlDVFhfUkVHKHJlZ3MsIENU
WF9TRUNPTkRfQkJfSEVBRF9MLCBSSU5HX1NCQkFERFIoYmFzZSksIDApOwotCUNUWF9SRUcocmVn
cywgQ1RYX1NFQ09ORF9CQl9TVEFURSwgUklOR19TQkJTVEFURShiYXNlKSwgMCk7Ci0JaWYgKHJj
cykKLQkJaW5pdF93YV9iYl9yZWdfc3RhdGUocmVncywgZW5naW5lLCBDVFhfQkJfUEVSX0NUWF9Q
VFIpOwotCi0JcmVnc1tDVFhfTFJJX0hFQURFUl8xXSA9Ci0JCU1JX0xPQURfUkVHSVNURVJfSU1N
KDkpIHwKLQkJTUlfTFJJX0ZPUkNFX1BPU1RFRCB8Ci0JCWxyaV9iYXNlOwotCi0JQ1RYX1JFRyhy
ZWdzLCBDVFhfQ1RYX1RJTUVTVEFNUCwgUklOR19DVFhfVElNRVNUQU1QKGJhc2UpLCAwKTsKLQot
CWluaXRfcHBndHRfcmVnX3N0YXRlKHJlZ3MsIGJhc2UsIHBwZ3R0KTsKLQotCWlmIChyY3MpIHsK
LQkJcmVnc1tDVFhfTFJJX0hFQURFUl8yXSA9IE1JX0xPQURfUkVHSVNURVJfSU1NKDEpIHwgbHJp
X2Jhc2U7Ci0JCUNUWF9SRUcocmVncywgQ1RYX1JfUFdSX0NMS19TVEFURSwgR0VOOF9SX1BXUl9D
TEtfU1RBVEUsIDApOwotCX0KLQotCXJlZ3NbQ1RYX0VORF0gPSBNSV9CQVRDSF9CVUZGRVJfRU5E
OwotCWlmIChJTlRFTF9HRU4oZW5naW5lLT5pOTE1KSA+PSAxMCkKLQkJcmVnc1tDVFhfRU5EXSB8
PSBCSVQoMCk7Ci19Ci0KLXN0YXRpYyB2b2lkIGdlbjEyX2luaXRfcmVnX3N0YXRlKHUzMiAqIGNv
bnN0IHJlZ3MsCi0JCQkJIHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKLQkJCQkgc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lLAotCQkJCSBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKLXsK
LQlzdHJ1Y3QgaTkxNV9wcGd0dCAqIGNvbnN0IHBwZ3R0ID0gaTkxNV92bV90b19wcGd0dChjZS0+
dm0pOwotCWNvbnN0IGJvb2wgcmNzID0gZW5naW5lLT5jbGFzcyA9PSBSRU5ERVJfQ0xBU1M7Ci0J
Y29uc3QgdTMyIGJhc2UgPSBlbmdpbmUtPm1taW9fYmFzZTsKLQljb25zdCB1MzIgbHJpX2Jhc2Ug
PQotCQlpbnRlbF9lbmdpbmVfaGFzX3JlbGF0aXZlX21taW8oZW5naW5lKSA/IE1JX0xSSV9DU19N
TUlPIDogMDsKLQotCXJlZ3NbQ1RYX0xSSV9IRUFERVJfMF0gPQotCQlNSV9MT0FEX1JFR0lTVEVS
X0lNTShyY3MgPyAxMSA6IDkpIHwKLQkJTUlfTFJJX0ZPUkNFX1BPU1RFRCB8Ci0JCWxyaV9iYXNl
OwotCi0JaW5pdF9jb21tb25fcmVnX3N0YXRlKHJlZ3MsIHBwZ3R0LCBlbmdpbmUsIHJpbmcpOwot
Ci0JLyogV2Ugd2FudCBjdHhfcHRyIGZvciBhbGwgZW5naW5lcyB0byBiZSBzZXQgKi8KLQlpbml0
X3dhX2JiX3JlZ19zdGF0ZShyZWdzLCBlbmdpbmUsIEdFTjEyX0NUWF9CQl9QRVJfQ1RYX1BUUik7
Ci0KLQlyZWdzW0NUWF9MUklfSEVBREVSXzFdID0KLQkJTUlfTE9BRF9SRUdJU1RFUl9JTU0oOSkg
fAotCQlNSV9MUklfRk9SQ0VfUE9TVEVEIHwKLQkJbHJpX2Jhc2U7Ci0KLQlDVFhfUkVHKHJlZ3Ms
IENUWF9DVFhfVElNRVNUQU1QLCBSSU5HX0NUWF9USU1FU1RBTVAoYmFzZSksIDApOwotCi0JaW5p
dF9wcGd0dF9yZWdfc3RhdGUocmVncywgYmFzZSwgcHBndHQpOwotCi0JaWYgKHJjcykgewotCQly
ZWdzW0dFTjEyX0NUWF9MUklfSEVBREVSXzNdID0KLQkJCU1JX0xPQURfUkVHSVNURVJfSU1NKDEp
IHwgbHJpX2Jhc2U7Ci0JCUNUWF9SRUcocmVncywgQ1RYX1JfUFdSX0NMS19TVEFURSwgR0VOOF9S
X1BXUl9DTEtfU1RBVEUsIDApOwotCi0JCS8qIFRPRE86IG9hX2luaXRfcmVnX3N0YXRlID8gKi8K
LQl9Ci19Ci0KIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19pbml0X3JlZ19zdGF0ZSh1MzIgKnJlZ3Ms
Ci0JCQkJICAgICBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCi0JCQkJICAgICBzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzICplbmdpbmUsCi0JCQkJICAgICBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykK
KwkJCQkgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKKwkJCQkgICAgIGNvbnN0
IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKKwkJCQkgICAgIGNvbnN0IHN0cnVjdCBp
bnRlbF9yaW5nICpyaW5nLAorCQkJCSAgICAgYm9vbCBjbG9zZSkKIHsKIAkvKgogCSAqIEEgY29u
dGV4dCBpcyBhY3R1YWxseSBhIGJpZyBiYXRjaCBidWZmZXIgd2l0aCBzZXZlcmFsCkBAIC0zNDY1
LDEwICszNzE3LDIxIEBAIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19pbml0X3JlZ19zdGF0ZSh1MzIg
KnJlZ3MsCiAJICoKIAkgKiBNdXN0IGtlZXAgY29uc2lzdGVudCB3aXRoIHZpcnR1YWxfdXBkYXRl
X3JlZ2lzdGVyX29mZnNldHMoKS4KIAkgKi8KLQlpZiAoSU5URUxfR0VOKGVuZ2luZS0+aTkxNSkg
Pj0gMTIpCi0JCWdlbjEyX2luaXRfcmVnX3N0YXRlKHJlZ3MsIGNlLCBlbmdpbmUsIHJpbmcpOwot
CWVsc2UKLQkJZ2VuOF9pbml0X3JlZ19zdGF0ZShyZWdzLCBjZSwgZW5naW5lLCByaW5nKTsKKwl1
MzIgKmJiZSA9IHNldF9vZmZzZXRzKHJlZ3MsIHJlZ19vZmZzZXRzKGVuZ2luZSksIGVuZ2luZSk7
CisKKwlpZiAoY2xvc2UpIHsgLyogQ2xvc2UgdGhlIGJhdGNoOyB1c2VkIG1haW5seSBieSBsaXZl
X2xyY19sYXlvdXQoKSAqLworCQkqYmJlID0gTUlfQkFUQ0hfQlVGRkVSX0VORDsKKwkJaWYgKElO
VEVMX0dFTihlbmdpbmUtPmk5MTUpID49IDEwKQorCQkJKmJiZSB8PSBCSVQoMCk7CisJfQorCisJ
aW5pdF9jb21tb25fcmVnX3N0YXRlKHJlZ3MsIGVuZ2luZSwgcmluZyk7CisJaW5pdF9wcGd0dF9y
ZWdfc3RhdGUocmVncywgdm1fYWxpYXMoY2UtPnZtKSk7CisKKwlpbml0X3dhX2JiX3JlZ19zdGF0
ZShyZWdzLCBlbmdpbmUsCisJCQkgICAgIElOVEVMX0dFTihlbmdpbmUtPmk5MTUpID49IDEyID8K
KwkJCSAgICAgR0VOMTJfQ1RYX0JCX1BFUl9DVFhfUFRSIDoKKwkJCSAgICAgQ1RYX0JCX1BFUl9D
VFhfUFRSKTsKIH0KIAogc3RhdGljIGludApAQCAtMzQ3Nyw2ICszNzQwLDcgQEAgcG9wdWxhdGVf
bHJfY29udGV4dChzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCiAJCSAgICBzdHJ1Y3QgaW50ZWxf
ZW5naW5lX2NzICplbmdpbmUsCiAJCSAgICBzdHJ1Y3QgaW50ZWxfcmluZyAqcmluZykKIHsKKwli
b29sIGluaGliaXQgPSB0cnVlOwogCXZvaWQgKnZhZGRyOwogCXUzMiAqcmVnczsKIAlpbnQgcmV0
OwpAQCAtMzUwOCwxNCArMzc3MiwxNSBAQCBwb3B1bGF0ZV9scl9jb250ZXh0KHN0cnVjdCBpbnRl
bF9jb250ZXh0ICpjZSwKIAogCQltZW1jcHkodmFkZHIgKyBzdGFydCwgZGVmYXVsdHMgKyBzdGFy
dCwgZW5naW5lLT5jb250ZXh0X3NpemUpOwogCQlpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKGVu
Z2luZS0+ZGVmYXVsdF9zdGF0ZSk7CisJCWluaGliaXQgPSBmYWxzZTsKIAl9CiAKIAkvKiBUaGUg
c2Vjb25kIHBhZ2Ugb2YgdGhlIGNvbnRleHQgb2JqZWN0IGNvbnRhaW5zIHNvbWUgZmllbGRzIHdo
aWNoIG11c3QKIAkgKiBiZSBzZXQgdXAgcHJpb3IgdG8gdGhlIGZpcnN0IGV4ZWN1dGlvbi4gKi8K
IAlyZWdzID0gdmFkZHIgKyBMUkNfU1RBVEVfUE4gKiBQQUdFX1NJWkU7Ci0JZXhlY2xpc3RzX2lu
aXRfcmVnX3N0YXRlKHJlZ3MsIGNlLCBlbmdpbmUsIHJpbmcpOwotCWlmICghZW5naW5lLT5kZWZh
dWx0X3N0YXRlKQotCQlyZWdzW0NUWF9DT05URVhUX0NPTlRST0wgKyAxXSB8PQorCWV4ZWNsaXN0
c19pbml0X3JlZ19zdGF0ZShyZWdzLCBjZSwgZW5naW5lLCByaW5nLCBpbmhpYml0KTsKKwlpZiAo
aW5oaWJpdCkKKwkJcmVnc1tDVFhfQ09OVEVYVF9DT05UUk9MXSB8PQogCQkJX01BU0tFRF9CSVRf
RU5BQkxFKENUWF9DVFJMX0VOR0lORV9DVFhfUkVTVE9SRV9JTkhJQklUKTsKIAogCXJldCA9IDA7
CkBAIC00MjEyLDcgKzQ0NzcsNyBAQCB2b2lkIGludGVsX2xyX2NvbnRleHRfcmVzZXQoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCQkJICAgICAgIGVuZ2luZS0+cGlubmVkX2RlZmF1
bHRfc3RhdGUgKyBMUkNfU1RBVEVfUE4gKiBQQUdFX1NJWkUsCiAJCQkgICAgICAgZW5naW5lLT5j
b250ZXh0X3NpemUgLSBQQUdFX1NJWkUpOwogCQl9Ci0JCWV4ZWNsaXN0c19pbml0X3JlZ19zdGF0
ZShyZWdzLCBjZSwgZW5naW5lLCBjZS0+cmluZyk7CisJCWV4ZWNsaXN0c19pbml0X3JlZ19zdGF0
ZShyZWdzLCBjZSwgZW5naW5lLCBjZS0+cmluZywgZmFsc2UpOwogCX0KIAogCS8qIFJlcnVuIHRo
ZSByZXF1ZXN0OyBpdHMgcGF5bG9hZCBoYXMgYmVlbiBuZXV0ZXJlZCAoaWYgZ3VpbHR5KS4gKi8K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyY19yZWcuaCBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyY19yZWcuaAppbmRleCA3ZTc3M2U3NGEzZmUu
LjA2YWIwMjc2ZTEwZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
bHJjX3JlZy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyY19yZWcuaApA
QCAtMTAsNjAgKzEwLDQwIEBACiAjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4KIAogLyogR0VOOCB0
byBHRU4xMSBSZWcgU3RhdGUgQ29udGV4dCAqLwotI2RlZmluZSBDVFhfTFJJX0hFQURFUl8wCQkw
eDAxCi0jZGVmaW5lIENUWF9DT05URVhUX0NPTlRST0wJCTB4MDIKLSNkZWZpbmUgQ1RYX1JJTkdf
SEVBRAkJCTB4MDQKLSNkZWZpbmUgQ1RYX1JJTkdfVEFJTAkJCTB4MDYKLSNkZWZpbmUgQ1RYX1JJ
TkdfQlVGRkVSX1NUQVJUCQkweDA4Ci0jZGVmaW5lIENUWF9SSU5HX0JVRkZFUl9DT05UUk9MCQkw
eDBhCi0jZGVmaW5lIENUWF9CQl9IRUFEX1UJCQkweDBjCi0jZGVmaW5lIENUWF9CQl9IRUFEX0wJ
CQkweDBlCi0jZGVmaW5lIENUWF9CQl9TVEFURQkJCTB4MTAKLSNkZWZpbmUgQ1RYX1NFQ09ORF9C
Ql9IRUFEX1UJCTB4MTIKLSNkZWZpbmUgQ1RYX1NFQ09ORF9CQl9IRUFEX0wJCTB4MTQKLSNkZWZp
bmUgQ1RYX1NFQ09ORF9CQl9TVEFURQkJMHgxNgotI2RlZmluZSBDVFhfQkJfUEVSX0NUWF9QVFIJ
CTB4MTgKLSNkZWZpbmUgQ1RYX1JDU19JTkRJUkVDVF9DVFgJCTB4MWEKLSNkZWZpbmUgQ1RYX1JD
U19JTkRJUkVDVF9DVFhfT0ZGU0VUCTB4MWMKLSNkZWZpbmUgQ1RYX0xSSV9IRUFERVJfMQkJMHgy
MQotI2RlZmluZSBDVFhfQ1RYX1RJTUVTVEFNUAkJMHgyMgotI2RlZmluZSBDVFhfUERQM19VRFcJ
CQkweDI0Ci0jZGVmaW5lIENUWF9QRFAzX0xEVwkJCTB4MjYKLSNkZWZpbmUgQ1RYX1BEUDJfVURX
CQkJMHgyOAotI2RlZmluZSBDVFhfUERQMl9MRFcJCQkweDJhCi0jZGVmaW5lIENUWF9QRFAxX1VE
VwkJCTB4MmMKLSNkZWZpbmUgQ1RYX1BEUDFfTERXCQkJMHgyZQotI2RlZmluZSBDVFhfUERQMF9V
RFcJCQkweDMwCi0jZGVmaW5lIENUWF9QRFAwX0xEVwkJCTB4MzIKLSNkZWZpbmUgQ1RYX0xSSV9I
RUFERVJfMgkJMHg0MQotI2RlZmluZSBDVFhfUl9QV1JfQ0xLX1NUQVRFCQkweDQyCi0jZGVmaW5l
IENUWF9FTkQJCQkJMHg0NAorI2RlZmluZSBDVFhfQ09OVEVYVF9DT05UUk9MCQkoMHgwMiArIDEp
CisjZGVmaW5lIENUWF9SSU5HX0hFQUQJCQkoMHgwNCArIDEpCisjZGVmaW5lIENUWF9SSU5HX1RB
SUwJCQkoMHgwNiArIDEpCisjZGVmaW5lIENUWF9SSU5HX0JVRkZFUl9TVEFSVAkJKDB4MDggKyAx
KQorI2RlZmluZSBDVFhfUklOR19CVUZGRVJfQ09OVFJPTAkJKDB4MGEgKyAxKQorI2RlZmluZSBD
VFhfQkJfU1RBVEUJCQkoMHgxMCArIDEpCisjZGVmaW5lIENUWF9CQl9QRVJfQ1RYX1BUUgkJKDB4
MTggKyAxKQorI2RlZmluZSBDVFhfUERQM19VRFcJCQkoMHgyNCArIDEpCisjZGVmaW5lIENUWF9Q
RFAzX0xEVwkJCSgweDI2ICsgMSkKKyNkZWZpbmUgQ1RYX1BEUDJfVURXCQkJKDB4MjggKyAxKQor
I2RlZmluZSBDVFhfUERQMl9MRFcJCQkoMHgyYSArIDEpCisjZGVmaW5lIENUWF9QRFAxX1VEVwkJ
CSgweDJjICsgMSkKKyNkZWZpbmUgQ1RYX1BEUDFfTERXCQkJKDB4MmUgKyAxKQorI2RlZmluZSBD
VFhfUERQMF9VRFcJCQkoMHgzMCArIDEpCisjZGVmaW5lIENUWF9QRFAwX0xEVwkJCSgweDMyICsg
MSkKKyNkZWZpbmUgQ1RYX1JfUFdSX0NMS19TVEFURQkJKDB4NDIgKyAxKQogCiAjZGVmaW5lIEdF
TjlfQ1RYX1JJTkdfTUlfTU9ERQkJMHg1NAogCiAvKiBHRU4xMisgUmVnIFN0YXRlIENvbnRleHQg
Ki8KLSNkZWZpbmUgR0VOMTJfQ1RYX0JCX1BFUl9DVFhfUFRSCQkweDEyCi0jZGVmaW5lIEdFTjEy
X0NUWF9MUklfSEVBREVSXzMJCQkweDQxCi0KLSNkZWZpbmUgQ1RYX1JFRyhyZWdfc3RhdGUsIHBv
cywgcmVnLCB2YWwpIGRvIHsgXAotCXUzMiAqcmVnX3N0YXRlX18gPSAocmVnX3N0YXRlKTsgXAot
CWNvbnN0IHUzMiBwb3NfXyA9IChwb3MpOyBcCi0JKHJlZ19zdGF0ZV9fKVsocG9zX18pICsgMF0g
PSBpOTE1X21taW9fcmVnX29mZnNldChyZWcpOyBcCi0JKHJlZ19zdGF0ZV9fKVsocG9zX18pICsg
MV0gPSAodmFsKTsgXAotfSB3aGlsZSAoMCkKKyNkZWZpbmUgR0VOMTJfQ1RYX0JCX1BFUl9DVFhf
UFRSCQkoMHgxMiArIDEpCiAKICNkZWZpbmUgQVNTSUdOX0NUWF9QRFAocHBndHQsIHJlZ19zdGF0
ZSwgbikgZG8geyBcCiAJdTMyICpyZWdfc3RhdGVfXyA9IChyZWdfc3RhdGUpOyBcCiAJY29uc3Qg
dTY0IGFkZHJfXyA9IGk5MTVfcGFnZV9kaXJfZG1hX2FkZHIoKHBwZ3R0KSwgKG4pKTsgXAotCShy
ZWdfc3RhdGVfXylbQ1RYX1BEUCAjIyBuICMjIF9VRFcgKyAxXSA9IHVwcGVyXzMyX2JpdHMoYWRk
cl9fKTsgXAotCShyZWdfc3RhdGVfXylbQ1RYX1BEUCAjIyBuICMjIF9MRFcgKyAxXSA9IGxvd2Vy
XzMyX2JpdHMoYWRkcl9fKTsgXAorCShyZWdfc3RhdGVfXylbQ1RYX1BEUCAjIyBuICMjIF9VRFdd
ID0gdXBwZXJfMzJfYml0cyhhZGRyX18pOyBcCisJKHJlZ19zdGF0ZV9fKVtDVFhfUERQICMjIG4g
IyMgX0xEV10gPSBsb3dlcl8zMl9iaXRzKGFkZHJfXyk7IFwKIH0gd2hpbGUgKDApCiAKICNkZWZp
bmUgQVNTSUdOX0NUWF9QTUw0KHBwZ3R0LCByZWdfc3RhdGUpIGRvIHsgXAogCXUzMiAqcmVnX3N0
YXRlX18gPSAocmVnX3N0YXRlKTsgXAogCWNvbnN0IHU2NCBhZGRyX18gPSBweF9kbWEocHBndHQt
PnBkKTsgXAotCShyZWdfc3RhdGVfXylbQ1RYX1BEUDBfVURXICsgMV0gPSB1cHBlcl8zMl9iaXRz
KGFkZHJfXyk7IFwKLQkocmVnX3N0YXRlX18pW0NUWF9QRFAwX0xEVyArIDFdID0gbG93ZXJfMzJf
Yml0cyhhZGRyX18pOyBcCisJKHJlZ19zdGF0ZV9fKVtDVFhfUERQMF9VRFddID0gdXBwZXJfMzJf
Yml0cyhhZGRyX18pOyBcCisJKHJlZ19zdGF0ZV9fKVtDVFhfUERQMF9MRFddID0gbG93ZXJfMzJf
Yml0cyhhZGRyX18pOyBcCiB9IHdoaWxlICgwKQogCiAjZGVmaW5lIEdFTjhfQ1RYX1JDU19JTkRJ
UkVDVF9DVFhfT0ZGU0VUX0RFRkFVTFQJMHgxNwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVz
dF9scmMuYwppbmRleCA5M2E4NzFiZmQ5NWQuLjIyZWEyZTc0NzA2NCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKQEAgLTIyMDEsMyArMjIwMSwxNDUgQEAgaW50IGludGVs
X2V4ZWNsaXN0c19saXZlX3NlbGZ0ZXN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkK
IAogCXJldHVybiBpOTE1X2xpdmVfc3VidGVzdHModGVzdHMsIGk5MTUpOwogfQorCitzdGF0aWMg
dm9pZCBoZXhkdW1wKGNvbnN0IHZvaWQgKmJ1Ziwgc2l6ZV90IGxlbikKK3sKKwljb25zdCBzaXpl
X3Qgcm93c2l6ZSA9IDggKiBzaXplb2YodTMyKTsKKwljb25zdCB2b2lkICpwcmV2ID0gTlVMTDsK
Kwlib29sIHNraXAgPSBmYWxzZTsKKwlzaXplX3QgcG9zOworCisJZm9yIChwb3MgPSAwOyBwb3Mg
PCBsZW47IHBvcyArPSByb3dzaXplKSB7CisJCWNoYXIgbGluZVsxMjhdOworCisJCWlmIChwcmV2
ICYmICFtZW1jbXAocHJldiwgYnVmICsgcG9zLCByb3dzaXplKSkgeworCQkJaWYgKCFza2lwKSB7
CisJCQkJcHJfaW5mbygiKlxuIik7CisJCQkJc2tpcCA9IHRydWU7CisJCQl9CisJCQljb250aW51
ZTsKKwkJfQorCisJCVdBUk5fT05fT05DRShoZXhfZHVtcF90b19idWZmZXIoYnVmICsgcG9zLCBs
ZW4gLSBwb3MsCisJCQkJCQlyb3dzaXplLCBzaXplb2YodTMyKSwKKwkJCQkJCWxpbmUsIHNpemVv
ZihsaW5lKSwKKwkJCQkJCWZhbHNlKSA+PSBzaXplb2YobGluZSkpOworCQlwcl9pbmZvKCJbJTA0
enhdICVzXG4iLCBwb3MsIGxpbmUpOworCisJCXByZXYgPSBidWYgKyBwb3M7CisJCXNraXAgPSBm
YWxzZTsKKwl9Cit9CisKK3N0YXRpYyBpbnQgbGl2ZV9scmNfbGF5b3V0KHZvaWQgKmFyZykKK3sK
KwlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gYXJnOworCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZTsKKwllbnVtIGludGVsX2VuZ2luZV9pZCBpZDsKKwl1MzIgKm1lbTsKKwlpbnQgZXJyOwor
CisJLyoKKwkgKiBDaGVjayB0aGUgcmVnaXN0ZXJzIG9mZnNldHMgd2UgdXNlIHRvIGNyZWF0ZSB0
aGUgaW5pdGlhbCByZWcgc3RhdGUKKwkgKiBtYXRjaCB0aGUgbGF5b3V0IHNhdmVkIGJ5IEhXLgor
CSAqLworCisJbWVtID0ga21hbGxvYyhQQUdFX1NJWkUsIEdGUF9LRVJORUwpOworCWlmICghbWVt
KQorCQlyZXR1cm4gLUVOT01FTTsKKworCWVyciA9IDA7CisJZm9yX2VhY2hfZW5naW5lKGVuZ2lu
ZSwgZ3QtPmk5MTUsIGlkKSB7CisJCXUzMiAqaHcsICpscmM7CisJCWludCBkdzsKKworCQlpZiAo
IWVuZ2luZS0+ZGVmYXVsdF9zdGF0ZSkKKwkJCWNvbnRpbnVlOworCisJCWh3ID0gaTkxNV9nZW1f
b2JqZWN0X3Bpbl9tYXAoZW5naW5lLT5kZWZhdWx0X3N0YXRlLAorCQkJCQkgICAgIEk5MTVfTUFQ
X1dCKTsKKwkJaWYgKElTX0VSUihodykpIHsKKwkJCWVyciA9IFBUUl9FUlIoaHcpOworCQkJYnJl
YWs7CisJCX0KKwkJaHcgKz0gTFJDX1NUQVRFX1BOICogUEFHRV9TSVpFIC8gc2l6ZW9mKCpodyk7
CisKKwkJbHJjID0gbWVtc2V0KG1lbSwgMCwgUEFHRV9TSVpFKTsKKwkJZXhlY2xpc3RzX2luaXRf
cmVnX3N0YXRlKGxyYywKKwkJCQkJIGVuZ2luZS0+a2VybmVsX2NvbnRleHQsCisJCQkJCSBlbmdp
bmUsCisJCQkJCSBlbmdpbmUtPmtlcm5lbF9jb250ZXh0LT5yaW5nLAorCQkJCQkgdHJ1ZSk7CisK
KwkJZHcgPSAwOworCQlkbyB7CisJCQl1MzIgbHJpID0gaHdbZHddOworCisJCQlpZiAobHJpID09
IDApIHsKKwkJCQlkdysrOworCQkJCWNvbnRpbnVlOworCQkJfQorCisJCQlpZiAoKGxyaSAmIEdF
Tk1BU0soMzEsIDIzKSkgIT0gTUlfSU5TVFIoMHgyMiwgMCkpIHsKKwkJCQlwcl9lcnIoIiVzOiBF
eHBlY3RlZCBMUkkgY29tbWFuZCBhdCBkd29yZCAlZCwgZm91bmQgJTA4eFxuIiwKKwkJCQkgICAg
ICAgZW5naW5lLT5uYW1lLCBkdywgbHJpKTsKKwkJCQllcnIgPSAtRUlOVkFMOworCQkJCWJyZWFr
OworCQkJfQorCisJCQlpZiAobHJjW2R3XSAhPSBscmkpIHsKKwkJCQlwcl9lcnIoIiVzOiBMUkkg
Y29tbWFuZCBtaXNtYXRjaCBhdCBkd29yZCAlZCwgZXhwZWN0ZWQgJTA4eCBmb3VuZCAlMDh4XG4i
LAorCQkJCSAgICAgICBlbmdpbmUtPm5hbWUsIGR3LCBscmksIGxyY1tkd10pOworCQkJCWVyciA9
IC1FSU5WQUw7CisJCQkJYnJlYWs7CisJCQl9CisKKwkJCWxyaSAmPSAweDdmOworCQkJbHJpKys7
CisJCQlkdysrOworCisJCQl3aGlsZSAobHJpKSB7CisJCQkJaWYgKGh3W2R3XSAhPSBscmNbZHdd
KSB7CisJCQkJCXByX2VycigiJXM6IERpZmZlcmVudCByZWdpc3RlcnMgZm91bmQgYXQgZHdvcmQg
JWQsIGV4cGVjdGVkICV4LCBmb3VuZCAleFxuIiwKKwkJCQkJICAgICAgIGVuZ2luZS0+bmFtZSwg
ZHcsIGh3W2R3XSwgbHJjW2R3XSk7CisJCQkJCWVyciA9IC1FSU5WQUw7CisJCQkJCWJyZWFrOwor
CQkJCX0KKworCQkJCS8qCisJCQkJICogU2tpcCBvdmVyIHRoZSBhY3R1YWwgcmVnaXN0ZXIgdmFs
dWUgYXMgd2UKKwkJCQkgKiBleHBlY3QgdGhhdCB0byBkaWZmZXIuCisJCQkJICovCisJCQkJZHcg
Kz0gMjsKKwkJCQlscmkgLT0gMjsKKwkJCX0KKwkJfSB3aGlsZSAoKGxyY1tkd10gJiB+QklUKDAp
KSAhPSBNSV9CQVRDSF9CVUZGRVJfRU5EKTsKKworCQlpZiAoZXJyKSB7CisJCQlwcl9pbmZvKCIl
czogSFcgcmVnaXN0ZXIgaW1hZ2U6XG4iLCBlbmdpbmUtPm5hbWUpOworCQkJaGV4ZHVtcChodywg
UEFHRV9TSVpFKTsKKworCQkJcHJfaW5mbygiJXM6IFNXIHJlZ2lzdGVyIGltYWdlOlxuIiwgZW5n
aW5lLT5uYW1lKTsKKwkJCWhleGR1bXAobHJjLCBQQUdFX1NJWkUpOworCQl9CisKKwkJaTkxNV9n
ZW1fb2JqZWN0X3VucGluX21hcChlbmdpbmUtPmRlZmF1bHRfc3RhdGUpOworCQlpZiAoZXJyKQor
CQkJYnJlYWs7CisJfQorCisJa2ZyZWUobWVtKTsKKwlyZXR1cm4gZXJyOworfQorCitpbnQgaW50
ZWxfbHJjX2xpdmVfc2VsZnRlc3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQorewor
CXN0YXRpYyBjb25zdCBzdHJ1Y3QgaTkxNV9zdWJ0ZXN0IHRlc3RzW10gPSB7CisJCVNVQlRFU1Qo
bGl2ZV9scmNfbGF5b3V0KSwKKwl9OworCisJaWYgKCFIQVNfTE9HSUNBTF9SSU5HX0NPTlRFWFRT
KGk5MTUpKQorCQlyZXR1cm4gMDsKKworCXJldHVybiBpbnRlbF9ndF9saXZlX3N1YnRlc3RzKHRl
c3RzLCAmaTkxNS0+Z3QpOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9wZXJmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BlcmYuYwppbmRleCBjMWI3NjQy
MzM3NjEuLjUyNGY2NzEwYjdhYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9wZXJmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmMKQEAgLTE2NzMs
MTAgKzE2NzMsOCBAQCBzdGF0aWMgdTMyIG9hX2NvbmZpZ19mbGV4X3JlZyhjb25zdCBzdHJ1Y3Qg
aTkxNV9vYV9jb25maWcgKm9hX2NvbmZpZywKICAqIGluIHRoZSBjYXNlIHRoYXQgdGhlIE9BIHVu
aXQgaGFzIGJlZW4gZGlzYWJsZWQuCiAgKi8KIHN0YXRpYyB2b2lkCi1nZW44X3VwZGF0ZV9yZWdf
c3RhdGVfdW5sb2NrZWQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKLQkJCSAgICAg
ICBzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UsCi0JCQkgICAgICAgdTMyICpyZWdfc3RhdGUsCi0J
CQkgICAgICAgY29uc3Qgc3RydWN0IGk5MTVfb2FfY29uZmlnICpvYV9jb25maWcpCitnZW44X3Vw
ZGF0ZV9yZWdfc3RhdGVfdW5sb2NrZWQoY29uc3Qgc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAor
CQkJICAgICAgIGNvbnN0IHN0cnVjdCBpOTE1X3BlcmZfc3RyZWFtICpzdHJlYW0pCiB7CiAJc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBjZS0+ZW5naW5lLT5pOTE1OwogCXUzMiBjdHhf
b2FjdHhjdHJsID0gaTkxNS0+cGVyZi5jdHhfb2FjdHhjdHJsX29mZnNldDsKQEAgLTE2OTEsMjEg
KzE2ODksMTkgQEAgZ2VuOF91cGRhdGVfcmVnX3N0YXRlX3VubG9ja2VkKHN0cnVjdCBpOTE1X3Bl
cmZfc3RyZWFtICpzdHJlYW0sCiAJCUVVX1BFUkZfQ05UTDUsCiAJCUVVX1BFUkZfQ05UTDYsCiAJ
fTsKKwl1MzIgKnJlZ19zdGF0ZSA9IGNlLT5scmNfcmVnX3N0YXRlOwogCWludCBpOwogCi0JQ1RY
X1JFRyhyZWdfc3RhdGUsIGN0eF9vYWN0eGN0cmwsIEdFTjhfT0FDVFhDT05UUk9MLAorCXJlZ19z
dGF0ZVtjdHhfb2FjdHhjdHJsICsgMV0gPQogCQkoc3RyZWFtLT5wZXJpb2RfZXhwb25lbnQgPDwg
R0VOOF9PQV9USU1FUl9QRVJJT0RfU0hJRlQpIHwKIAkJKHN0cmVhbS0+cGVyaW9kaWMgPyBHRU44
X09BX1RJTUVSX0VOQUJMRSA6IDApIHwKLQkJR0VOOF9PQV9DT1VOVEVSX1JFU1VNRSk7CisJCUdF
TjhfT0FfQ09VTlRFUl9SRVNVTUU7CiAKLQlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShmbGV4
X3JlZ3MpOyBpKyspIHsKLQkJQ1RYX1JFRyhyZWdfc3RhdGUsIGN0eF9mbGV4ZXUwICsgaSAqIDIs
IGZsZXhfcmVnc1tpXSwKLQkJCW9hX2NvbmZpZ19mbGV4X3JlZyhvYV9jb25maWcsIGZsZXhfcmVn
c1tpXSkpOwotCX0KKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShmbGV4X3JlZ3MpOyBpKysp
CisJCXJlZ19zdGF0ZVtjdHhfZmxleGV1MCArIGkgKiAyICsgMV0gPQorCQkJb2FfY29uZmlnX2Zs
ZXhfcmVnKHN0cmVhbS0+b2FfY29uZmlnLCBmbGV4X3JlZ3NbaV0pOwogCi0JQ1RYX1JFRyhyZWdf
c3RhdGUsCi0JCUNUWF9SX1BXUl9DTEtfU1RBVEUsIEdFTjhfUl9QV1JfQ0xLX1NUQVRFLAotCQlp
bnRlbF9zc2V1X21ha2VfcnBjcyhpOTE1LCAmY2UtPnNzZXUpKTsKKwlyZWdfc3RhdGVbQ1RYX1Jf
UFdSX0NMS19TVEFURV0gPSBpbnRlbF9zc2V1X21ha2VfcnBjcyhpOTE1LCAmY2UtPnNzZXUpOwog
fQogCiBzdHJ1Y3QgZmxleCB7CkBAIC0xNzI5LDcgKzE3MjUsNyBAQCBnZW44X3N0b3JlX2ZsZXgo
c3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsCiAJb2Zmc2V0ID0gaTkxNV9nZ3R0X29mZnNldChjZS0+
c3RhdGUpICsgTFJDX1NUQVRFX1BOICogUEFHRV9TSVpFOwogCWRvIHsKIAkJKmNzKysgPSBNSV9T
VE9SRV9EV09SRF9JTU1fR0VONCB8IE1JX1VTRV9HR1RUOwotCQkqY3MrKyA9IG9mZnNldCArIChm
bGV4LT5vZmZzZXQgKyAxKSAqIHNpemVvZih1MzIpOworCQkqY3MrKyA9IG9mZnNldCArIGZsZXgt
Pm9mZnNldCAqIHNpemVvZih1MzIpOwogCQkqY3MrKyA9IDA7CiAJCSpjcysrID0gZmxleC0+dmFs
dWU7CiAJfSB3aGlsZSAoZmxleCsrLCAtLWNvdW50KTsKQEAgLTE4NjMsNyArMTg1OSw3IEBAIHN0
YXRpYyBpbnQgZ2VuOF9jb25maWd1cmVfYWxsX2NvbnRleHRzKHN0cnVjdCBpOTE1X3BlcmZfc3Ry
ZWFtICpzdHJlYW0sCiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBzdHJlYW0tPmRl
dl9wcml2OwogCS8qIFRoZSBNTUlPIG9mZnNldHMgZm9yIEZsZXggRVUgcmVnaXN0ZXJzIGFyZW4n
dCBjb250aWd1b3VzICovCiAJY29uc3QgdTMyIGN0eF9mbGV4ZXUwID0gaTkxNS0+cGVyZi5jdHhf
ZmxleGV1MF9vZmZzZXQ7Ci0jZGVmaW5lIGN0eF9mbGV4ZXVOKE4pIChjdHhfZmxleGV1MCArIDIg
KiAoTikpCisjZGVmaW5lIGN0eF9mbGV4ZXVOKE4pIChjdHhfZmxleGV1MCArIDIgKiAoTikgKyAx
KQogCXN0cnVjdCBmbGV4IHJlZ3NbXSA9IHsKIAkJewogCQkJR0VOOF9SX1BXUl9DTEtfU1RBVEUs
CkBAIC0xODcxLDcgKzE4NjcsNyBAQCBzdGF0aWMgaW50IGdlbjhfY29uZmlndXJlX2FsbF9jb250
ZXh0cyhzdHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtLAogCQl9LAogCQl7CiAJCQlHRU44
X09BQ1RYQ09OVFJPTCwKLQkJCWk5MTUtPnBlcmYuY3R4X29hY3R4Y3RybF9vZmZzZXQsCisJCQlp
OTE1LT5wZXJmLmN0eF9vYWN0eGN0cmxfb2Zmc2V0ICsgMSwKIAkJCSgoc3RyZWFtLT5wZXJpb2Rf
ZXhwb25lbnQgPDwgR0VOOF9PQV9USU1FUl9QRVJJT0RfU0hJRlQpIHwKIAkJCSAoc3RyZWFtLT5w
ZXJpb2RpYyA/IEdFTjhfT0FfVElNRVJfRU5BQkxFIDogMCkgfAogCQkJIEdFTjhfT0FfQ09VTlRF
Ul9SRVNVTUUpCkBAIC0yMjk5LDkgKzIyOTUsOCBAQCBzdGF0aWMgaW50IGk5MTVfb2Ffc3RyZWFt
X2luaXQoc3RydWN0IGk5MTVfcGVyZl9zdHJlYW0gKnN0cmVhbSwKIAlyZXR1cm4gcmV0OwogfQog
Ci12b2lkIGk5MTVfb2FfaW5pdF9yZWdfc3RhdGUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5n
aW5lLAotCQkJICAgIHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKLQkJCSAgICB1MzIgKnJlZ3Mp
Cit2b2lkIGk5MTVfb2FfaW5pdF9yZWdfc3RhdGUoY29uc3Qgc3RydWN0IGludGVsX2NvbnRleHQg
KmNlLAorCQkJICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIHsKIAlz
dHJ1Y3QgaTkxNV9wZXJmX3N0cmVhbSAqc3RyZWFtOwogCkBAIC0yMzEzLDcgKzIzMDgsNyBAQCB2
b2lkIGk5MTVfb2FfaW5pdF9yZWdfc3RhdGUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5l
LAogCiAJc3RyZWFtID0gZW5naW5lLT5pOTE1LT5wZXJmLmV4Y2x1c2l2ZV9zdHJlYW07CiAJaWYg
KHN0cmVhbSkKLQkJZ2VuOF91cGRhdGVfcmVnX3N0YXRlX3VubG9ja2VkKHN0cmVhbSwgY2UsIHJl
Z3MsIHN0cmVhbS0+b2FfY29uZmlnKTsKKwkJZ2VuOF91cGRhdGVfcmVnX3N0YXRlX3VubG9ja2Vk
KGNlLCBzdHJlYW0pOwogfQogCiAvKioKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfcGVyZi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wZXJmLmgKaW5kZXggYTQx
MmIxNmQ5ZmZjLi5mNGZiMzExMTg0YjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfcGVyZi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGVyZi5oCkBAIC0y
NSw4ICsyNSw3IEBAIGludCBpOTE1X3BlcmZfYWRkX2NvbmZpZ19pb2N0bChzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2LCB2b2lkICpkYXRhLAogCQkJICAgICAgIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSk7
CiBpbnQgaTkxNV9wZXJmX3JlbW92ZV9jb25maWdfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRl
diwgdm9pZCAqZGF0YSwKIAkJCQkgIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSk7Ci12b2lkIGk5MTVf
b2FfaW5pdF9yZWdfc3RhdGUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAotCQkJICAg
IHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSwKLQkJCSAgICB1MzIgKnJlZ19zdGF0ZSk7Cit2b2lk
IGk5MTVfb2FfaW5pdF9yZWdfc3RhdGUoY29uc3Qgc3RydWN0IGludGVsX2NvbnRleHQgKmNlLAor
CQkJICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7CiAKICNlbmRpZiAv
KiBfX0k5MTVfUEVSRl9IX18gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3Nl
bGZ0ZXN0cy9pOTE1X2xpdmVfc2VsZnRlc3RzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvaTkxNV9saXZlX3NlbGZ0ZXN0cy5oCmluZGV4IDFjY2YwZjczMWFjMC4uNjZkODNjMTM5
MGMxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9saXZl
X3NlbGZ0ZXN0cy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2xp
dmVfc2VsZnRlc3RzLmgKQEAgLTE1LDYgKzE1LDcgQEAgc2VsZnRlc3Qod29ya2Fyb3VuZHMsIGlu
dGVsX3dvcmthcm91bmRzX2xpdmVfc2VsZnRlc3RzKQogc2VsZnRlc3QoZ3RfZW5naW5lcywgaW50
ZWxfZW5naW5lX2xpdmVfc2VsZnRlc3RzKQogc2VsZnRlc3QoZ3RfdGltZWxpbmVzLCBpbnRlbF90
aW1lbGluZV9saXZlX3NlbGZ0ZXN0cykKIHNlbGZ0ZXN0KGd0X2NvbnRleHRzLCBpbnRlbF9jb250
ZXh0X2xpdmVfc2VsZnRlc3RzKQorc2VsZnRlc3QoZ3RfbHJjLCBpbnRlbF9scmNfbGl2ZV9zZWxm
dGVzdHMpCiBzZWxmdGVzdChyZXF1ZXN0cywgaTkxNV9yZXF1ZXN0X2xpdmVfc2VsZnRlc3RzKQog
c2VsZnRlc3QoYWN0aXZlLCBpOTE1X2FjdGl2ZV9saXZlX3NlbGZ0ZXN0cykKIHNlbGZ0ZXN0KG9i
amVjdHMsIGk5MTVfZ2VtX29iamVjdF9saXZlX3NlbGZ0ZXN0cykKLS0gCjIuMjMuMAoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxp
bmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

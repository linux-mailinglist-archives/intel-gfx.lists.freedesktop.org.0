Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4FD36436F6
	for <lists+intel-gfx@lfdr.de>; Thu, 13 Jun 2019 15:54:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CFAFC89AA6;
	Thu, 13 Jun 2019 13:54:02 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 41DB389A91;
 Thu, 13 Jun 2019 13:54:00 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: gtucker) with ESMTPSA id 030C3283571
From: Guillaume Tucker <guillaume.tucker@collabora.com>
To: Arkadiusz Hiler <arkadiusz.hiler@intel.com>,
 Petri Latvala <petri.latvala@intel.com>
Date: Thu, 13 Jun 2019 14:53:21 +0100
Message-Id: <4eab9010dbe8d6e24d47c0c51b99dfa3f9475e5d.1560433744.git.guillaume.tucker@collabora.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1560433744.git.guillaume.tucker@collabora.com>
References: <cover.1560433744.git.guillaume.tucker@collabora.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH i-g-t v2 3/4] i915/gem_create: use atomic_*
 instead of __sync_*
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: igt-dev@lists.freedesktop.org, intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

VGhpcyBmaXhlcyBidWlsZHMgb24gc29tZSBhcmNoaXRlY3R1cmVzLCBpbiBwYXJ0aWN1bGFyIE1J
UFMgd2hpY2gKZG9lc24ndCBoYXZlIF9fc3luY19hZGRfYW5kX2ZldGNoXzggYW5kIF9fc3luY192
YWxfY29tcGFyZV9hbmRfc3dhcF84CmZvciA2NC1iaXQgdmFyaWFibGUgaGFuZGxpbmcuCgoqIHJl
cGxhY2UgY2FsbHMgdG8gdGhlIG9sZGVyIF9fc3luY18qIGZ1bmN0aW9ucyB3aXRoIHRoZSBuZXcg
YXRvbWljXyoKICBzdGFuZGFyZCBvbmVzCiogdXNlIHRoZSBfQXRvbWljIHR5cGUgbW9kaWZpZXIg
YXMgcmVxdWlyZWQgd2l0aCBzdGRhdG9taWMuaCBmdW5jdGlvbnMKKiBhZGQgZGVwZW5kZW5jeSBm
b3IgZ2VtX2NyZWF0ZSBvbiBsaWJhdG9taWMKClNpZ25lZC1vZmYtYnk6IEd1aWxsYXVtZSBUdWNr
ZXIgPGd1aWxsYXVtZS50dWNrZXJAY29sbGFib3JhLmNvbT4KLS0tCiB0ZXN0cy9NYWtlZmlsZS5h
bSAgICAgICB8ICAyICstCiB0ZXN0cy9pOTE1L2dlbV9jcmVhdGUuYyB8IDE2ICsrKysrKysrKysr
Ky0tLS0KIHRlc3RzL21lc29uLmJ1aWxkICAgICAgIHwgIDkgKysrKysrKystCiAzIGZpbGVzIGNo
YW5nZWQsIDIxIGluc2VydGlvbnMoKyksIDYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvdGVz
dHMvTWFrZWZpbGUuYW0gYi90ZXN0cy9NYWtlZmlsZS5hbQppbmRleCA1YTQyOGI4YWMyMTMuLmJi
ZDM4NmM5YzJkYiAxMDA2NDQKLS0tIGEvdGVzdHMvTWFrZWZpbGUuYW0KKysrIGIvdGVzdHMvTWFr
ZWZpbGUuYW0KQEAgLTkwLDcgKzkwLDcgQEAgQU1fTERGTEFHUyA9IC1XbCwtLWFzLW5lZWRlZAog
ZHJtX2ltcG9ydF9leHBvcnRfQ0ZMQUdTID0gJChBTV9DRkxBR1MpICQoVEhSRUFEX0NGTEFHUykK
IGRybV9pbXBvcnRfZXhwb3J0X0xEQUREID0gJChMREFERCkgLWxwdGhyZWFkCiBnZW1fY3JlYXRl
X0NGTEFHUyA9ICQoQU1fQ0ZMQUdTKSAkKFRIUkVBRF9DRkxBR1MpCi1nZW1fY3JlYXRlX0xEQURE
ID0gJChMREFERCkgLWxwdGhyZWFkCitnZW1fY3JlYXRlX0xEQUREID0gJChMREFERCkgLWxwdGhy
ZWFkIC1sYXRvbWljCiBnZW1fY2xvc2VfcmFjZV9DRkxBR1MgPSAkKEFNX0NGTEFHUykgJChUSFJF
QURfQ0ZMQUdTKQogZ2VtX2Nsb3NlX3JhY2VfTERBREQgPSAkKExEQUREKSAtbHB0aHJlYWQKIGdl
bV9jdHhfdGhyYXNoX0NGTEFHUyA9ICQoQU1fQ0ZMQUdTKSAkKFRIUkVBRF9DRkxBR1MpCmRpZmYg
LS1naXQgYS90ZXN0cy9pOTE1L2dlbV9jcmVhdGUuYyBiL3Rlc3RzL2k5MTUvZ2VtX2NyZWF0ZS5j
CmluZGV4IDQzY2JmNDVmMjg5Yi4uOTAwOGNkOGEyMWUzIDEwMDY0NAotLS0gYS90ZXN0cy9pOTE1
L2dlbV9jcmVhdGUuYworKysgYi90ZXN0cy9pOTE1L2dlbV9jcmVhdGUuYwpAQCAtNDUsNiArNDUs
NyBAQAogI2luY2x1ZGUgPHN5cy90aW1lLmg+CiAjaW5jbHVkZSA8Z2V0b3B0Lmg+CiAjaW5jbHVk
ZSA8cHRocmVhZC5oPgorI2luY2x1ZGUgPHN0ZGF0b21pYy5oPgogCiAjaW5jbHVkZSA8ZHJtLmg+
CiAKQEAgLTE1Niw3ICsxNTcsMTQgQEAgc3RhdGljIHZvaWQgaW52YWxpZF9ub25hbGlnbmVkX3Np
emUoaW50IGZkKQogCWdlbV9jbG9zZShmZCwgY3JlYXRlLmhhbmRsZSk7CiB9CiAKLXN0YXRpYyB1
aW50NjRfdCBnZXRfbnBhZ2VzKHVpbnQ2NF90ICpnbG9iYWwsIHVpbnQ2NF90IG5wYWdlcykKK3N0
YXRpYyB1aW50NjRfdCBhdG9taWNfY29tcGFyZV9zd2FwX3U2NChfQXRvbWljKHVpbnQ2NF90KSAq
cHRyLAorCQkJCQl1aW50NjRfdCBvbGR2YWwsIHVpbnQ2NF90IG5ld3ZhbCkKK3sKKwlhdG9taWNf
Y29tcGFyZV9leGNoYW5nZV9zdHJvbmcocHRyLCAmb2xkdmFsLCBuZXd2YWwpOworCXJldHVybiBv
bGR2YWw7Cit9CisKK3N0YXRpYyB1aW50NjRfdCBnZXRfbnBhZ2VzKF9BdG9taWModWludDY0X3Qp
ICpnbG9iYWwsIHVpbnQ2NF90IG5wYWdlcykKIHsKIAl1aW50NjRfdCB0cnksIG9sZCwgbWF4Owog
CkBAIC0xNjUsMTMgKzE3MywxMyBAQCBzdGF0aWMgdWludDY0X3QgZ2V0X25wYWdlcyh1aW50NjRf
dCAqZ2xvYmFsLCB1aW50NjRfdCBucGFnZXMpCiAJCW9sZCA9IG1heDsKIAkJdHJ5ID0gMSArIG5w
YWdlcyAlIChtYXggLyAyKTsKIAkJbWF4IC09IHRyeTsKLQl9IHdoaWxlICgobWF4ID0gX19zeW5j
X3ZhbF9jb21wYXJlX2FuZF9zd2FwKGdsb2JhbCwgb2xkLCBtYXgpKSAhPSBvbGQpOworCX0gd2hp
bGUgKChtYXggPSBhdG9taWNfY29tcGFyZV9zd2FwX3U2NChnbG9iYWwsIG9sZCwgbWF4KSkgIT0g
b2xkKTsKIAogCXJldHVybiB0cnk7CiB9CiAKIHN0cnVjdCB0aHJlYWRfY2xlYXIgewotCXVpbnQ2
NF90IG1heDsKKwlfQXRvbWljKHVpbnQ2NF90KSBtYXg7CiAJaW50IHRpbWVvdXQ7CiAJaW50IGk5
MTU7CiB9OwpAQCAtMjAyLDcgKzIxMCw3IEBAIHN0YXRpYyB2b2lkICp0aHJlYWRfY2xlYXIodm9p
ZCAqZGF0YSkKIAkJfQogCQlnZW1fY2xvc2UoaTkxNSwgY3JlYXRlLmhhbmRsZSk7CiAKLQkJX19z
eW5jX2FkZF9hbmRfZmV0Y2goJmFyZy0+bWF4LCBucGFnZXMpOworCQlhdG9taWNfZmV0Y2hfYWRk
KCZhcmctPm1heCwgbnBhZ2VzKTsKIAl9CiAKIAlyZXR1cm4gTlVMTDsKZGlmZiAtLWdpdCBhL3Rl
c3RzL21lc29uLmJ1aWxkIGIvdGVzdHMvbWVzb24uYnVpbGQKaW5kZXggZjE2OGZiYmFlMmE4Li5m
ZmQ0MzJkMzgxOTMgMTAwNjQ0Ci0tLSBhL3Rlc3RzL21lc29uLmJ1aWxkCisrKyBiL3Rlc3RzL21l
c29uLmJ1aWxkCkBAIC0xMTAsNyArMTEwLDYgQEAgaTkxNV9wcm9ncyA9IFsKIAknZ2VtX2Nsb3Nl
X3JhY2UnLAogCSdnZW1fY29uY3VycmVudF9ibGl0JywKIAknZ2VtX2NwdV9yZWxvYycsCi0JJ2dl
bV9jcmVhdGUnLAogCSdnZW1fY3NfcHJlZmV0Y2gnLAogCSdnZW1fY3NfdGxiJywKIAknZ2VtX2N0
eF9iYWRfZGVzdHJveScsCkBAIC0yNzcsNiArMjc2LDE0IEBAIGZvcmVhY2ggcHJvZyA6IGk5MTVf
cHJvZ3MKIAl0ZXN0X2xpc3QgKz0gcHJvZwogZW5kZm9yZWFjaAogCit0ZXN0X2V4ZWN1dGFibGVz
ICs9IGV4ZWN1dGFibGUoJ2dlbV9jcmVhdGUnLAorCSAgIGpvaW5fcGF0aHMoJ2k5MTUnLCAnZ2Vt
X2NyZWF0ZS5jJyksCisJICAgZGVwZW5kZW5jaWVzIDogdGVzdF9kZXBzICsgWyBsaWJhdG9taWMg
XSwKKwkgICBpbnN0YWxsX2RpciA6IGxpYmV4ZWNkaXIsCisJICAgaW5zdGFsbF9ycGF0aCA6IGxp
YmV4ZWNkaXJfcnBhdGhkaXIsCisJICAgaW5zdGFsbCA6IHRydWUpCit0ZXN0X2xpc3QgKz0gJ2dl
bV9jcmVhdGUnCisKIHRlc3RfZXhlY3V0YWJsZXMgKz0gZXhlY3V0YWJsZSgnZ2VtX2N0eF9zc2V1
JywKIAkgICBqb2luX3BhdGhzKCdpOTE1JywgJ2dlbV9jdHhfc3NldS5jJyksCiAJICAgZGVwZW5k
ZW5jaWVzIDogdGVzdF9kZXBzICsgWyBsaWJfaWd0X3BlcmYgXSwKLS0gCjIuMjAuMQoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxp
bmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

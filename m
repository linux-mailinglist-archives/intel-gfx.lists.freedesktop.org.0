Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E06446C996
	for <lists+intel-gfx@lfdr.de>; Thu, 18 Jul 2019 09:00:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 084A16E320;
	Thu, 18 Jul 2019 07:00:43 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 23EAD6E318
 for <intel-gfx@lists.freedesktop.org>; Thu, 18 Jul 2019 07:00:38 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 17390372-1500050 
 for multiple; Thu, 18 Jul 2019 08:00:26 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 18 Jul 2019 08:00:08 +0100
Message-Id: <20190718070024.21781-4-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190718070024.21781-1-chris@chris-wilson.co.uk>
References: <20190718070024.21781-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 04/20] drm/i915/execlists: Cancel breadcrumb on
 preempting the virtual engine
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgd2UgdW53aW5kIHRoZSByZXF1ZXN0cyBmb3IgYSBwcmVlbXB0aW9uIGV2ZW50LCB3ZSByZXR1
cm4gYSB2aXJ0dWFsCnJlcXVlc3QgYmFjayB0byBpdHMgb3JpZ2luYWwgdmlydHVhbCBlbmdpbmUg
KHNvIHRoYXQgaXQgaXMgYXZhaWxhYmxlIGZvcgpleGVjdXRpb24gb24gYW55IG9mIGl0cyBzaWJs
aW5ncykuIEluIHRoZSBwcm9jZXNzLCB0aGlzIG1lYW5zIHRoYXQgaXRzCmJyZWFkY3J1bWIgc2hv
dWxkIG5vIGxvbmdlciBiZSBhc3NvY2lhdGVkIHdpdGggdGhlIG9yaWdpbmFsIHBoeXNpY2FsCmVu
Z2luZSwgYW5kIHNvIHdlIGFyZSBmb3JjZWQgdG8gZGVjb3VwbGUgaXQuIFByZXZpb3VzbHksIGFz
IHRoZSByZXF1ZXN0CmNvdWxkIG5vdCBjb21wbGV0ZSB3aXRob3V0IG91ciBhd2FyZW5lc3MsIHdl
IHdvdWxkIG1vdmUgaXQgdG8gdGhlIG5leHQKcmVhbCBlbmdpbmUgd2l0aG91dCBhbnkgZGFuZ2Vy
LiBIb3dldmVyLCBwcmVlbXB0LXRvLWJ1c3kgYWxsb3dlZCBmb3IKcmVxdWVzdHMgdG8gY29udGlu
dWUgb24gdGhlIEhXIGFuZCBjb21wbGV0ZSBpbiB0aGUgYmFja2dyb3VuZCBhcyB3ZQp1bndvdW5k
LCB3aGljaCBtZWFudCB0aGF0IHdlIGNvdWxkIGVuZCB1cCByZXRpcmluZyB0aGUgcmVxdWVzdCBi
ZWZvcmUKZml4aW5nIHVwIHRoZSBicmVhZGNydW1iIGxpbmsuCgpbNTE2NzkuNTE3OTQzXSBJTkZP
OiB0cnlpbmcgdG8gcmVnaXN0ZXIgbm9uLXN0YXRpYyBrZXkuCls1MTY3OS41MTc5NTZdIHRoZSBj
b2RlIGlzIGZpbmUgYnV0IG5lZWRzIGxvY2tkZXAgYW5ub3RhdGlvbi4KWzUxNjc5LjUxNzk2MF0g
dHVybmluZyBvZmYgdGhlIGxvY2tpbmcgY29ycmVjdG5lc3MgdmFsaWRhdG9yLgpbNTE2NzkuNTE3
OTY2XSBDUFU6IDAgUElEOiAzMjcwIENvbW06IGt3b3JrZXIvdTg6MCBUYWludGVkOiBHICAgICBV
ICAgICAgICAgICAgNS4yLjArICM3MTcKWzUxNjc5LjUxNzk3MV0gSGFyZHdhcmUgbmFtZTogSW50
ZWwgQ29ycG9yYXRpb24gTlVDN2k1Qk5LL05VQzdpNUJOQiwgQklPUyBCTktCTDM1Ny44NkEuMDA1
Mi4yMDE3LjA5MTguMTM0NiAwOS8xOC8yMDE3Cls1MTY3OS41MTgwMTJdIFdvcmtxdWV1ZTogaTkx
NSByZXRpcmVfd29ya19oYW5kbGVyIFtpOTE1XQpbNTE2NzkuNTE4MDE3XSBDYWxsIFRyYWNlOgpb
NTE2NzkuNTE4MDI2XSAgZHVtcF9zdGFjaysweDY3LzB4OTAKWzUxNjc5LjUxODAzMV0gIHJlZ2lz
dGVyX2xvY2tfY2xhc3MrMHg1MmMvMHg1NDAKWzUxNjc5LjUxODAzOF0gID8gZmluZF9oZWxkX2xv
Y2srMHgyZC8weDkwCls1MTY3OS41MTgwNDJdICBfX2xvY2tfYWNxdWlyZSsweDY4LzB4MTgwMApb
NTE2NzkuNTE4MDQ3XSAgPyBmaW5kX2hlbGRfbG9jaysweDJkLzB4OTAKWzUxNjc5LjUxODA3M10g
ID8gX19pOTE1X3N3X2ZlbmNlX2NvbXBsZXRlKzB4ZmYvMHgxYzAgW2k5MTVdCls1MTY3OS41MTgw
NzldICBsb2NrX2FjcXVpcmUrMHg5MC8weDE3MApbNTE2NzkuNTE4MTA1XSAgPyBpOTE1X3JlcXVl
c3RfY2FuY2VsX2JyZWFkY3J1bWIrMHgyOS8weDE2MCBbaTkxNV0KWzUxNjc5LjUxODExMl0gIF9y
YXdfc3Bpbl9sb2NrKzB4MjcvMHg0MApbNTE2NzkuNTE4MTM4XSAgPyBpOTE1X3JlcXVlc3RfY2Fu
Y2VsX2JyZWFkY3J1bWIrMHgyOS8weDE2MCBbaTkxNV0KWzUxNjc5LjUxODE2NV0gIGk5MTVfcmVx
dWVzdF9jYW5jZWxfYnJlYWRjcnVtYisweDI5LzB4MTYwIFtpOTE1XQpbNTE2NzkuNTE4MTk5XSAg
aTkxNV9yZXF1ZXN0X3JldGlyZSsweDQzZi8weDUzMCBbaTkxNV0KWzUxNjc5LjUxODIzMl0gIHJl
dGlyZV9yZXF1ZXN0cysweDRkLzB4NjAgW2k5MTVdCls1MTY3OS41MTgyNjNdICBpOTE1X3JldGly
ZV9yZXF1ZXN0cysweGRmLzB4MWYwIFtpOTE1XQpbNTE2NzkuNTE4Mjk0XSAgcmV0aXJlX3dvcmtf
aGFuZGxlcisweDRjLzB4NjAgW2k5MTVdCls1MTY3OS41MTgzMDFdICBwcm9jZXNzX29uZV93b3Jr
KzB4MjJjLzB4NWMwCls1MTY3OS41MTgzMDddICB3b3JrZXJfdGhyZWFkKzB4MzcvMHgzOTAKWzUx
Njc5LjUxODMxMV0gID8gcHJvY2Vzc19vbmVfd29yaysweDVjMC8weDVjMApbNTE2NzkuNTE4MzE2
XSAga3RocmVhZCsweDExNi8weDEzMApbNTE2NzkuNTE4MzIwXSAgPyBrdGhyZWFkX2NyZWF0ZV9v
bl9ub2RlKzB4NDAvMHg0MApbNTE2NzkuNTE4MzI1XSAgcmV0X2Zyb21fZm9yaysweDI0LzB4MzAK
WzUxNjc5LjUyMDE3N10gLS0tLS0tLS0tLS0tWyBjdXQgaGVyZSBdLS0tLS0tLS0tLS0tCls1MTY3
OS41MjAxODldIGxpc3RfZGVsIGNvcnJ1cHRpb24sIGZmZmY4ODg4MzY3NWUyZjAtPm5leHQgaXMg
TElTVF9QT0lTT04xIChkZWFkMDAwMDAwMDAwMTAwKQoKQnVnemlsbGE6IGh0dHBzOi8vYnVncy5m
cmVlZGVza3RvcC5vcmcvc2hvd19idWcuY2dpP2lkPTExMTE1OQpGaXhlczogMjJiN2E0MjZiYmUx
ICgiZHJtL2k5MTUvZXhlY2xpc3RzOiBQcmVlbXB0LXRvLWJ1c3kiKQpTaWduZWQtb2ZmLWJ5OiBD
aHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KQ2M6IFR2cnRrbyBVcnN1bGlu
IDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfbHJjLmMgfCAxMyArKysrKysrKysrKysrCiAxIGZpbGUgY2hhbmdlZCwgMTMgaW5zZXJ0
aW9ucygrKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKaW5kZXggZjk1YTA0MmE5MmM2
Li44ODRkZmMxY2IwMzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2xyYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCkBAIC00OTUs
NiArNDk1LDE5IEBAIF9fdW53aW5kX2luY29tcGxldGVfcmVxdWVzdHMoc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lKQogCQkJbGlzdF9tb3ZlKCZycS0+c2NoZWQubGluaywgcGwpOwogCQkJ
YWN0aXZlID0gcnE7CiAJCX0gZWxzZSB7CisJCQkvKgorCQkJICogRGVjb3VwbGUgdGhlIHZpcnR1
YWwgYnJlYWRjcnVtYiBiZWZvcmUgbW92aW5nIGl0CisJCQkgKiBiYWNrIHRvIHRoZSB2aXJ0dWFs
IGVuZ2luZSAtLSB3ZSBkb24ndCB3YW50IHRoZQorCQkJICogcmVxdWVzdCB0byBjb21wbGV0ZSBp
biB0aGUgYmFja2dyb3VuZCBhbmQgdHJ5CisJCQkgKiBhbmQgY2FuY2VsIHRoZSBicmVhZGNydW1i
IG9uIHRoZSB2aXJ0dWFsIGVuZ2luZQorCQkJICogKGluc3RlYWQgb2YgdGhlIG9sZCBlbmdpbmUg
d2hlcmUgaXQgaXMgbGlua2VkKSEKKwkJCSAqLworCQkJaWYgKHRlc3RfYml0KERNQV9GRU5DRV9G
TEFHX0VOQUJMRV9TSUdOQUxfQklULAorCQkJCSAgICAgJnJxLT5mZW5jZS5mbGFncykpIHsKKwkJ
CQlzcGluX2xvY2soJnJxLT5sb2NrKTsKKwkJCQlpOTE1X3JlcXVlc3RfY2FuY2VsX2JyZWFkY3J1
bWIocnEpOworCQkJCXNwaW5fdW5sb2NrKCZycS0+bG9jayk7CisJCQl9CiAJCQlycS0+ZW5naW5l
ID0gb3duZXI7CiAJCQlvd25lci0+c3VibWl0X3JlcXVlc3QocnEpOwogCQkJYWN0aXZlID0gTlVM
TDsKLS0gCjIuMjIuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwt
Z2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 87F2611A111
	for <lists+intel-gfx@lfdr.de>; Wed, 11 Dec 2019 03:09:10 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 29B716EA3A;
	Wed, 11 Dec 2019 02:09:04 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 70C956EA35
 for <intel-gfx@lists.freedesktop.org>; Wed, 11 Dec 2019 02:09:02 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Dec 2019 18:09:01 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,301,1571727600"; d="scan'208";a="210618376"
Received: from josouza-mobl.jf.intel.com (HELO josouza-MOBL.intel.com)
 ([10.98.40.69])
 by fmsmga008.fm.intel.com with ESMTP; 10 Dec 2019 18:09:00 -0800
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 10 Dec 2019 18:08:51 -0800
Message-Id: <20191211020858.423049-4-jose.souza@intel.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191211020858.423049-1-jose.souza@intel.com>
References: <20191211020858.423049-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2 04/11] drm/i915: Introduce
 intel_crtc_state_reset()
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCldl
IGhhdmUgYSBmZXcgcGxhY2VzIHdoZXJlIHdlIHdhbnQgdG8gcmVzZXQgYSBjcnRjIHN0YXRlIHRv
IGl0cwpkZWZhdWx0IHZhbHVlcy4gTGV0J3MgYWRkIGEgaGVscGVyIGZvciB0aGF0LiBXZSdsbCBu
ZWVkIHRoZSBuZXcKX19kcm1fYXRvbWljX2hlbHBlcl9jcnRjX3N0YXRlX3Jlc2V0KCkgaGVscGVy
IGZvciB0aGlzIHRvIGFsbG93CnVzIHRvIGp1c3QgcmVzZXQgdGhlIHN0YXRlIGl0c2VsZiB3aXRo
b3V0IGNsb2JiZXJpbmcgdGhlCmNydGMtPnN0YXRlIHBvaW50ZXIuCgpBbmQgd2hpbGUgYXQgaXQg
bGV0J3MgemVybyBvdXQgdGhlIHdob2xlIHRoaW5nLCBleGNlcHQgYSBmZXcKY2hvaWNlIG1lbWJl
ciB3aGljaCB3ZSdsbCBtYXJrIGFzICJpbnZhbGlkIi4gQW5kIHRoYW5rcyB0byB0aGlzCndlIGNh
biBub3cgbnVrZSBpbnRlbF9jcnRjX2luaXRfc2NhbGVycygpLgoKUmV2aWV3ZWQtYnk6IEpvc8Op
IFJvYmVydG8gZGUgU291emEgPGpvc2Uuc291emFAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBW
aWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIHwgNDcgKysrKysrKysrLS0t
LS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAyMiBpbnNlcnRpb25zKCspLCAyNSBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4
IDhjN2NlNDU5ZjAxYi4uYTcyOWUwZmQzODliIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtMTY0LDcgKzE2NCw2IEBAIHN0YXRpYyB2b2lkIHZs
dl9wcmVwYXJlX3BsbChzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAkJCSAgICBjb25zdCBzdHJ1
Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcpOwogc3RhdGljIHZvaWQgY2h2X3ByZXBh
cmVfcGxsKHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjLAogCQkJICAgIGNvbnN0IHN0cnVjdCBpbnRl
bF9jcnRjX3N0YXRlICpwaXBlX2NvbmZpZyk7Ci1zdGF0aWMgdm9pZCBpbnRlbF9jcnRjX2luaXRf
c2NhbGVycyhzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSk7CiBzdGF0aWMgdm9p
ZCBza3lsYWtlX3BmaXRfZW5hYmxlKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlKTsKIHN0YXRpYyB2b2lkIGlyb25sYWtlX3BmaXRfZGlzYWJsZShjb25zdCBzdHJ1Y3Qg
aW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUpOwogc3RhdGljIHZvaWQgaXJvbmxha2Vf
cGZpdF9lbmFibGUoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpOwpA
QCAtMTA2MzAsOCArMTA2MjksNiBAQCBzdGF0aWMgYm9vbCBoYXN3ZWxsX2dldF9waXBlX2NvbmZp
ZyhzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAl1NjQgcG93ZXJfZG9tYWluX21hc2s7CiAJYm9v
bCBhY3RpdmU7CiAKLQlpbnRlbF9jcnRjX2luaXRfc2NhbGVycyhwaXBlX2NvbmZpZyk7Ci0KIAlw
aXBlX2NvbmZpZy0+bWFzdGVyX3RyYW5zY29kZXIgPSBJTlZBTElEX1RSQU5TQ09ERVI7CiAKIAlw
b3dlcl9kb21haW4gPSBQT1dFUl9ET01BSU5fUElQRShjcnRjLT5waXBlKTsKQEAgLTExNjc5LDYg
KzExNjc2LDIwIEBAIHN0YXRpYyB2b2lkIGlyb25sYWtlX3BjaF9jbG9ja19nZXQoc3RydWN0IGlu
dGVsX2NydGMgKmNydGMsCiAJCQkJCSAmcGlwZV9jb25maWctPmZkaV9tX24pOwogfQogCitzdGF0
aWMgdm9pZCBpbnRlbF9jcnRjX3N0YXRlX3Jlc2V0KHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpj
cnRjX3N0YXRlLAorCQkJCSAgIHN0cnVjdCBpbnRlbF9jcnRjICpjcnRjKQoreworCW1lbXNldChj
cnRjX3N0YXRlLCAwLCBzaXplb2YoKmNydGNfc3RhdGUpKTsKKworCV9fZHJtX2F0b21pY19oZWxw
ZXJfY3J0Y19zdGF0ZV9yZXNldCgmY3J0Y19zdGF0ZS0+dWFwaSwgJmNydGMtPmJhc2UpOworCisJ
Y3J0Y19zdGF0ZS0+Y3B1X3RyYW5zY29kZXIgPSBJTlZBTElEX1RSQU5TQ09ERVI7CisJY3J0Y19z
dGF0ZS0+bWFzdGVyX3RyYW5zY29kZXIgPSBJTlZBTElEX1RSQU5TQ09ERVI7CisJY3J0Y19zdGF0
ZS0+aHN3X3dvcmthcm91bmRfcGlwZSA9IElOVkFMSURfUElQRTsKKwljcnRjX3N0YXRlLT5vdXRw
dXRfZm9ybWF0ID0gSU5URUxfT1VUUFVUX0ZPUk1BVF9JTlZBTElEOworCWNydGNfc3RhdGUtPnNj
YWxlcl9zdGF0ZS5zY2FsZXJfaWQgPSAtMTsKK30KKwogLyogUmV0dXJucyB0aGUgY3VycmVudGx5
IHByb2dyYW1tZWQgbW9kZSBvZiB0aGUgZ2l2ZW4gZW5jb2Rlci4gKi8KIHN0cnVjdCBkcm1fZGlz
cGxheV9tb2RlICoKIGludGVsX2VuY29kZXJfY3VycmVudF9tb2RlKHN0cnVjdCBpbnRlbF9lbmNv
ZGVyICplbmNvZGVyKQpAQCAtMTE3MDQsNyArMTE3MTUsNyBAQCBpbnRlbF9lbmNvZGVyX2N1cnJl
bnRfbW9kZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikKIAkJcmV0dXJuIE5VTEw7CiAJ
fQogCi0JY3J0Y19zdGF0ZS0+dWFwaS5jcnRjID0gJmNydGMtPmJhc2U7CisJaW50ZWxfY3J0Y19z
dGF0ZV9yZXNldChjcnRjX3N0YXRlLCBjcnRjKTsKIAogCWlmICghZGV2X3ByaXYtPmRpc3BsYXku
Z2V0X3BpcGVfY29uZmlnKGNydGMsIGNydGNfc3RhdGUpKSB7CiAJCWtmcmVlKGNydGNfc3RhdGUp
OwpAQCAtMTM1NTIsMTggKzEzNTYzLDE0IEBAIHZlcmlmeV9jcnRjX3N0YXRlKHN0cnVjdCBpbnRl
bF9jcnRjICpjcnRjLAogCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBjcnRjLT5iYXNlLmRldjsK
IAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGRldik7CiAJc3Ry
dWN0IGludGVsX2VuY29kZXIgKmVuY29kZXI7Ci0Jc3RydWN0IGludGVsX2NydGNfc3RhdGUgKnBp
cGVfY29uZmlnOwotCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZTsKKwlzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqcGlwZV9jb25maWcgPSBvbGRfY3J0Y19zdGF0ZTsKKwlzdHJ1Y3QgZHJt
X2F0b21pY19zdGF0ZSAqc3RhdGUgPSBvbGRfY3J0Y19zdGF0ZS0+dWFwaS5zdGF0ZTsKIAlib29s
IGFjdGl2ZTsKIAotCXN0YXRlID0gb2xkX2NydGNfc3RhdGUtPnVhcGkuc3RhdGU7CiAJX19kcm1f
YXRvbWljX2hlbHBlcl9jcnRjX2Rlc3Ryb3lfc3RhdGUoJm9sZF9jcnRjX3N0YXRlLT51YXBpKTsK
IAlpbnRlbF9jcnRjX2ZyZWVfaHdfc3RhdGUob2xkX2NydGNfc3RhdGUpOwotCi0JcGlwZV9jb25m
aWcgPSBvbGRfY3J0Y19zdGF0ZTsKLQltZW1zZXQocGlwZV9jb25maWcsIDAsIHNpemVvZigqcGlw
ZV9jb25maWcpKTsKLQlwaXBlX2NvbmZpZy0+dWFwaS5jcnRjID0gJmNydGMtPmJhc2U7Ci0JcGlw
ZV9jb25maWctPnVhcGkuc3RhdGUgPSBzdGF0ZTsKKwlpbnRlbF9jcnRjX3N0YXRlX3Jlc2V0KG9s
ZF9jcnRjX3N0YXRlLCBjcnRjKTsKKwlvbGRfY3J0Y19zdGF0ZS0+dWFwaS5zdGF0ZSA9IHN0YXRl
OwogCiAJRFJNX0RFQlVHX0tNUygiW0NSVEM6JWQ6JXNdXG4iLCBjcnRjLT5iYXNlLmJhc2UuaWQs
IGNydGMtPmJhc2UubmFtZSk7CiAKQEAgLTE1Njk3LDE1ICsxNTcwNCw2IEBAIGludGVsX2N1cnNv
cl9wbGFuZV9jcmVhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCXJldHVy
biBFUlJfUFRSKHJldCk7CiB9CiAKLXN0YXRpYyB2b2lkIGludGVsX2NydGNfaW5pdF9zY2FsZXJz
KHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQotewotCXN0cnVjdCBpbnRlbF9j
cnRjX3NjYWxlcl9zdGF0ZSAqc2NhbGVyX3N0YXRlID0KLQkJJmNydGNfc3RhdGUtPnNjYWxlcl9z
dGF0ZTsKLQotCW1lbXNldChzY2FsZXJfc3RhdGUsIDAsIHNpemVvZigqc2NhbGVyX3N0YXRlKSk7
Ci0Jc2NhbGVyX3N0YXRlLT5zY2FsZXJfaWQgPSAtMTsKLX0KLQogI2RlZmluZSBJTlRFTF9DUlRD
X0ZVTkNTIFwKIAkuZ2FtbWFfc2V0ID0gZHJtX2F0b21pY19oZWxwZXJfbGVnYWN5X2dhbW1hX3Nl
dCwgXAogCS5zZXRfY29uZmlnID0gZHJtX2F0b21pY19oZWxwZXJfc2V0X2NvbmZpZywgXApAQCAt
MTU3ODgsOSArMTU3ODYsOSBAQCBzdGF0aWMgc3RydWN0IGludGVsX2NydGMgKmludGVsX2NydGNf
YWxsb2Modm9pZCkKIAkJcmV0dXJuIEVSUl9QVFIoLUVOT01FTSk7CiAJfQogCi0JX19kcm1fYXRv
bWljX2hlbHBlcl9jcnRjX3Jlc2V0KCZjcnRjLT5iYXNlLCAmY3J0Y19zdGF0ZS0+dWFwaSk7Ci0J
aW50ZWxfY3J0Y19pbml0X3NjYWxlcnMoY3J0Y19zdGF0ZSk7CisJaW50ZWxfY3J0Y19zdGF0ZV9y
ZXNldChjcnRjX3N0YXRlLCBjcnRjKTsKIAorCWNydGMtPmJhc2Uuc3RhdGUgPSAmY3J0Y19zdGF0
ZS0+dWFwaTsKIAljcnRjLT5jb25maWcgPSBjcnRjX3N0YXRlOwogCiAJcmV0dXJuIGNydGM7CkBA
IC0xNzQxMSw4ICsxNzQwOSw3IEBAIHN0YXRpYyB2b2lkIGludGVsX21vZGVzZXRfcmVhZG91dF9o
d19zdGF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCiAJCV9fZHJtX2F0b21pY19oZWxwZXJf
Y3J0Y19kZXN0cm95X3N0YXRlKCZjcnRjX3N0YXRlLT51YXBpKTsKIAkJaW50ZWxfY3J0Y19mcmVl
X2h3X3N0YXRlKGNydGNfc3RhdGUpOwotCQltZW1zZXQoY3J0Y19zdGF0ZSwgMCwgc2l6ZW9mKCpj
cnRjX3N0YXRlKSk7Ci0JCV9fZHJtX2F0b21pY19oZWxwZXJfY3J0Y19yZXNldCgmY3J0Yy0+YmFz
ZSwgJmNydGNfc3RhdGUtPnVhcGkpOworCQlpbnRlbF9jcnRjX3N0YXRlX3Jlc2V0KGNydGNfc3Rh
dGUsIGNydGMpOwogCiAJCWNydGNfc3RhdGUtPmh3LmFjdGl2ZSA9IGNydGNfc3RhdGUtPmh3LmVu
YWJsZSA9CiAJCQlkZXZfcHJpdi0+ZGlzcGxheS5nZXRfcGlwZV9jb25maWcoY3J0YywgY3J0Y19z
dGF0ZSk7Ci0tIAoyLjI0LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2lu
dGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 73702C8B1C
	for <lists+intel-gfx@lfdr.de>; Wed,  2 Oct 2019 16:24:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A174D89A62;
	Wed,  2 Oct 2019 14:24:02 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 73E3F89A62
 for <intel-gfx@lists.freedesktop.org>; Wed,  2 Oct 2019 14:24:00 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 18694704-1500050 for multiple; Wed, 02 Oct 2019 15:23:50 +0100
MIME-Version: 1.0
To: "Bloomfield, Jon" <jon.bloomfield@intel.com>,
 "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <AD48BB7FB99B174FBCC69E228F58B3B68CE4E083@FMSMSX119.amr.corp.intel.com>
References: <20191002112000.12280-1-chris@chris-wilson.co.uk>
 <20191002112000.12280-20-chris@chris-wilson.co.uk>
 <AD48BB7FB99B174FBCC69E228F58B3B68CE4E083@FMSMSX119.amr.corp.intel.com>
Message-ID: <157002622680.1880.4071563479110739610@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Wed, 02 Oct 2019 15:23:46 +0100
Subject: Re: [Intel-gfx] [PATCH 20/30] drm/i915: Cancel non-persistent
 contexts on close
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBCbG9vbWZpZWxkLCBKb24gKDIwMTktMTAtMDIgMTQ6NTI6MzIpCj4gCj4gCj4gPiAt
LS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQo+ID4gRnJvbTogQ2hyaXMgV2lsc29uIDxjaHJpc0Bj
aHJpcy13aWxzb24uY28udWs+Cj4gPiBTZW50OiBXZWRuZXNkYXksIE9jdG9iZXIgMiwgMjAxOSA0
OjIwIEFNCj4gPiBUbzogaW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+ID4gQ2M6IENo
cmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPjsgSm9vbmFzIExhaHRpbmVuCj4g
PiA8am9vbmFzLmxhaHRpbmVuQGxpbnV4LmludGVsLmNvbT47IFdpbmlhcnNraSwgTWljaGFsCj4g
PiA8bWljaGFsLndpbmlhcnNraUBpbnRlbC5jb20+OyBCbG9vbWZpZWxkLCBKb24gPGpvbi5ibG9v
bWZpZWxkQGludGVsLmNvbT4KPiA+IFN1YmplY3Q6IFtQQVRDSCAyMC8zMF0gZHJtL2k5MTU6IENh
bmNlbCBub24tcGVyc2lzdGVudCBjb250ZXh0cyBvbiBjbG9zZQo+ID4gCj4gPiBOb3JtYWxseSwg
d2UgcmVseSBvbiBvdXIgaGFuZ2NoZWNrIHRvIHByZXZlbnQgcGVyc2lzdGVudCBiYXRjaGVzIGZy
b20KPiA+IGhvZ2dpbmcgdGhlIEdQVS4gSG93ZXZlciwgaWYgdGhlIHVzZXIgZGlzYWJsZXMgaGFu
Z2NoZWNrLCB0aGlzIG1lY2hhbmlzbQo+ID4gYnJlYWtzIGRvd24uIERlc3BpdGUgb3VyIGluc2lz
dGVuY2UgdGhhdCB0aGlzIGlzIHVuc2FmZSwgdGhlIHVzZXJzIGFyZQo+ID4gZXF1YWxseSBpbnNp
c3RlbnQgdGhhdCB0aGV5IHdhbnQgdG8gdXNlIGVuZGxlc3MgYmF0Y2hlcyBhbmQgd2lsbCBkaXNh
YmxlCj4gPiB0aGUgaGFuZ2NoZWNrIG1lY2hhbmlzbS4gV2UgYXJlIGxvb2tpbmcgYXQgcGVyaGFw
cyByZXBsYWNpbmcgaGFuZ2NoZWNrCj4gPiB3aXRoIGEgc29mdGVyIG1lY2hhbmlzbSwgdGhhdCBz
ZW5kcyBhIHB1bHNlIGRvd24gdGhlIGVuZ2luZSB0byBjaGVjayBpZgo+ID4gaXQgaXMgd2VsbC4g
V2UgY2FuIHVzZSB0aGUgc2FtZSBwcmVlbXB0aXZlIHB1bHNlIHRvIGZsdXNoIGFuIGFjdGl2ZQo+
ID4gcGVyc2lzdGVudCBjb250ZXh0IG9mZiB0aGUgR1BVIHVwb24gY29udGV4dCBjbG9zZSwgcHJl
dmVudGluZyByZXNvdXJjZXMKPiA+IGJlaW5nIGxvc3QgYW5kIHVua2lsbGFibGUgcmVxdWVzdHMg
cmVtYWluaW5nIG9uIHRoZSBHUFUgYWZ0ZXIgcHJvY2Vzcwo+ID4gdGVybWluYXRpb24uIFRvIGF2
b2lkIGNoYW5naW5nIHRoZSBBQkkgYW5kIGFjY2lkZW50YWxseSBicmVha2luZwo+ID4gZXhpc3Rp
bmcgdXNlcnNwYWNlLCB3ZSBtYWtlIHRoZSBwZXJzaXN0ZW5jZSBvZiBhIGNvbnRleHQgZXhwbGlj
aXQgYW5kCj4gPiBlbmFibGUgaXQgYnkgZGVmYXVsdCAobWF0Y2hpbmcgY3VycmVudCBBQkkpLiBV
c2Vyc3BhY2UgY2FuIG9wdCBvdXQgb2YKPiA+IHBlcnNpc3RlbnQgbW9kZSAoZm9yY2luZyByZXF1
ZXN0cyB0byBiZSBjYW5jZWxsZWQgd2hlbiB0aGUgY29udGV4dCBpcwo+ID4gY2xvc2VkIGJ5IHBy
b2Nlc3MgdGVybWluYXRpb24gb3IgZXhwbGljaXRseSkgYnkgYSBjb250ZXh0IHBhcmFtZXRlci4g
VG8KPiA+IGZhY2lsaXRhdGUgZXhpc3RpbmcgdXNlLWNhc2VzIG9mIGRpc2FibGluZyBoYW5nY2hl
Y2ssIGlmIHRoZSBtb2RwYXJhbSBpcwo+ID4gZGlzYWJsZWQgKGk5MTUuZW5hYmxlX2hhbmdjaGVj
az0wKSwgd2UgZGlzYWJsZSBwZXJzaXN0ZW5jZSBtb2RlIGJ5Cj4gPiBkZWZhdWx0LiAgKE5vdGUs
IG9uZSBvZiB0aGUgb3V0Y29tZXMgZm9yIHN1cHBvcnRpbmcgZW5kbGVzcyBtb2RlIHdpbGwgYmUK
PiA+IHRoZSByZW1vdmFsIG9mIGhhbmdjaGVja2luZywgYXQgd2hpY2ggcG9pbnQgb3B0aW5nIGlu
dG8gcGVyc2lzdGVudCBtb2RlCj4gPiB3aWxsIGJlIG1hbmRhdG9yeSwgb3IgbWF5YmUgdGhlIGRl
ZmF1bHQgcGVyaGFwcyBjb250cm9sbGVkIGJ5IGNncm91cHMuKQo+ID4gCj4gPiBUZXN0Y2FzZTog
aWd0L2dlbV9jdHhfcGVyc2lzdGVuY2UKPiA+IFNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8
Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+ID4gQ2M6IEpvb25hcyBMYWh0aW5lbiA8am9vbmFz
LmxhaHRpbmVuQGxpbnV4LmludGVsLmNvbT4KPiA+IENjOiBNaWNoYcWCIFdpbmlhcnNraSA8bWlj
aGFsLndpbmlhcnNraUBpbnRlbC5jb20+Cj4gPiBDYzogSm9uIEJsb29tZmllbGQgPGpvbi5ibG9v
bWZpZWxkQGludGVsLmNvbT4KPiA+IFJldmlld2VkLWJ5OiBKb24gQmxvb21maWVsZCA8am9uLmJs
b29tZmllbGRAaW50ZWwuY29tPgo+ID4gLS0tCj4gPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFr
ZWZpbGUgICAgICAgICAgICAgICAgIHwgICAxICsKPiA+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fY29udGV4dC5jICAgfCAxMjIgKysrKysrKysrKysrKysrKysrCj4gPiAgZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaCAgIHwgIDE1ICsrKwo+ID4g
IC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHRfdHlwZXMuaCB8ICAgMSArCj4g
PiAgLi4uL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfY29udGV4dC5jIHwgICAyICsK
PiA+ICAuLi4vZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQuYyAgfCAgNTYg
KysrKysrKysKPiA+ICAuLi4vZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9oZWFydGJlYXQu
aCAgfCAgMTQgKysKPiA+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0u
YyAgICAgfCAgIDIgKy0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ByaW9saXN0X3R5
cGVzLmggICAgfCAgIDEgKwo+ID4gIGluY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaCAgICAgICAg
ICAgICAgICAgICB8ICAxNSArKysKPiA+ICAxMCBmaWxlcyBjaGFuZ2VkLCAyMjggaW5zZXJ0aW9u
cygrKSwgMSBkZWxldGlvbigtKQo+ID4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmMKPiA+ICBjcmVhdGUgbW9kZSAxMDA2
NDQgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2hlYXJ0YmVhdC5oCj4gPiAK
PiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L01ha2VmaWxlCj4gPiBpbmRleCAxZjg3YzcwYTI4NDIuLjU2MWZhMmJiMzAw
NiAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCj4gPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQo+ID4gQEAgLTc2LDYgKzc2LDcgQEAgZ3Qt
eSArPSBcCj4gPiAgICAgICBndC9pbnRlbF9icmVhZGNydW1icy5vIFwKPiA+ICAgICAgIGd0L2lu
dGVsX2NvbnRleHQubyBcCj4gPiAgICAgICBndC9pbnRlbF9lbmdpbmVfY3MubyBcCj4gPiArICAg
ICBndC9pbnRlbF9lbmdpbmVfaGVhcnRiZWF0Lm8gXAo+ID4gICAgICAgZ3QvaW50ZWxfZW5naW5l
X3BtLm8gXAo+ID4gICAgICAgZ3QvaW50ZWxfZW5naW5lX3Bvb2wubyBcCj4gPiAgICAgICBndC9p
bnRlbF9lbmdpbmVfc3lzZnMubyBcCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYwo+ID4gYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fY29udGV4dC5jCj4gPiBpbmRleCAwYWI0MTY4ODdmYzIuLmU4MzIyMzhhNzJlNSAx
MDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0
LmMKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMK
PiAKPiA8U05JUD4KPiAKPiA+ICtzdGF0aWMgaW50Cj4gPiArc2V0X3BlcnNpc3RlbmNlKHN0cnVj
dCBpOTE1X2dlbV9jb250ZXh0ICpjdHgsCj4gPiArICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBk
cm1faTkxNV9nZW1fY29udGV4dF9wYXJhbSAqYXJncykKPiA+ICt7Cj4gPiArICAgICBpZiAoYXJn
cy0+c2l6ZSkKPiA+ICsgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gPiArCj4gPiArICAg
ICBpZiAoYXJncy0+dmFsdWUpIHsKPiA+ICsgICAgICAgICAgICAgaTkxNV9nZW1fY29udGV4dF9z
ZXRfcGVyc2lzdGVuY2UoY3R4KTsKPiA+ICsgICAgICAgICAgICAgcmV0dXJuIDA7Cj4gPiArICAg
ICB9Cj4gPiArCj4gPiArICAgICAvKiBUbyBjYW5jZWwgYSBjb250ZXh0IHdlIHVzZSAicHJlZW1w
dC10by1pZGxlIiAqLwo+ID4gKyAgICAgaWYgKCEoY3R4LT5pOTE1LT5jYXBzLnNjaGVkdWxlciAm
Cj4gPiBJOTE1X1NDSEVEVUxFUl9DQVBfUFJFRU1QVElPTikpCj4gPiArICAgICAgICAgICAgIHJl
dHVybiAtRU5PREVWOwo+ID4gKwo+ID4gKyAgICAgaTkxNV9nZW1fY29udGV4dF9jbGVhcl9wZXJz
aXN0ZW5jZShjdHgpOwo+ID4gKyAgICAgcmV0dXJuIDA7Cj4gPiArfQo+IAo+IEhtbW4uIEdpdmVu
IHRoYXQgZGlzYWJsaW5nIGhhbmdjaGVjayBpcyBhbiBleHBsaWNpdCBvcGVyYXRpb24sIGFuZCB3
ZSBhbHJlYWR5IGNoYW5nZSB0aGUgZGVmYXVsdCBzZXR0aW5nLCBjYW4ndCB3ZSBtYWtlIGl0IGEg
aGFyZCByZXF1aXJlbWVudCB0aGF0IHBlcnNpc3RlbmNlIHJlcXVpcmVzIGhhbmdjaGVjaz8gWW91
IHNob3VsZCBub3QgcmVhbGx5IGJlIGFibGUgdG8gb3B0IGJhY2sgaW4gdG8gcGVyc2lzdGVuY2Ug
aWYgaGFuZ2NoZWNrIGlzIGRpc2FibGVkLiBJbiBmYWN0IHlvdSBjb3VsZCBqdXN0IHRlc3QgZm9y
IGhhbmdjaGVjayB3aGVuIGRlY2lkaW5nIHdoZXRoZXIgdG8ga2lsbCB0aGUgY29udGV4dCwgYW5k
IGZvcmNlLWtpbGwgaWYgaXQgaXMgb2ZmIC0gdGhhdCB3YXkgaWYgaGFuZ2NoZWNrIGlzIGRpc2Fi
bGVkIGFmdGVyIGEgY29udGV4dCBzdGFydHMgaXQgd2lsbCBnZXQgY2xlYW5lZCB1cC4KCkp1c3Qg
Z3JlYXQsIG5vdyBJIGdvdCB0byB1cGRhdGUgdGhlIGlndCB0byB0cmVhdCBpOTE1LmVuYWJsZV9o
YW5nY2hlY2sKYXMgQVBJIQotQ2hyaXMKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vaW50ZWwtZ2Z4

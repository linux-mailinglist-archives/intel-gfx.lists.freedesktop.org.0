Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 608F11430F6
	for <lists+intel-gfx@lfdr.de>; Mon, 20 Jan 2020 18:47:38 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 052DE6EA54;
	Mon, 20 Jan 2020 17:47:36 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EF4486EA54
 for <intel-gfx@lists.freedesktop.org>; Mon, 20 Jan 2020 17:47:34 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Jan 2020 09:47:34 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,342,1574150400"; d="scan'208";a="219708993"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga008.jf.intel.com with SMTP; 20 Jan 2020 09:47:32 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Mon, 20 Jan 2020 19:47:31 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 20 Jan 2020 19:47:11 +0200
Message-Id: <20200120174728.21095-2-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200120174728.21095-1-ville.syrjala@linux.intel.com>
References: <20200120174728.21095-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 01/17] drm/i915: Polish WM_LINETIME register
 stuff
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkxl
dCdzIHN0b3JlIHRoZSBub3JtYWwgYW5kIElQUyBsaW5ldGltZSB3YXRlcm1hcmtzIGluZGl2aWR1
YWxseSwKYW5kIHdoaWxlIGF0IGl0IHdlJ2xsIHBpbXAgdGhlIHJlZ2lzdGVyIGRlZmluaXRpb25z
IGFzIHdlbGwuCgp2MjogRGVhbCB3aXRoIGd2dAoKUmV2aWV3ZWQtYnk6IFN0YW5pc2xhdiBMaXNv
dnNraXkgPHN0YW5pc2xhdi5saXNvdnNraXlAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBWaWxs
ZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIC4uLi9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCAgICB8ICAzICstCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndnQvaGFuZGxlcnMuYyAgICAgICAgICAgfCAgNiArLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9yZWcuaCAgICAgICAgICAgICAgIHwgMTQgKystLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfcG0uYyAgICAgICAgICAgICAgIHwgNjcgKysrKysrKysrKy0tLS0tLS0t
LQogNCBmaWxlcyBjaGFuZ2VkLCA0OSBpbnNlcnRpb25zKCspLCA0MSBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlw
ZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5o
CmluZGV4IDE1NWNlNDlhZTc2NC4uYmZlODVlMTgwZTE2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaApAQCAtNjYyLDcgKzY2Miw4
IEBAIHN0cnVjdCBpbnRlbF9jcnRjX3NjYWxlcl9zdGF0ZSB7CiAKIHN0cnVjdCBpbnRlbF9waXBl
X3dtIHsKIAlzdHJ1Y3QgaW50ZWxfd21fbGV2ZWwgd21bNV07Ci0JdTMyIGxpbmV0aW1lOworCXUx
NiBsaW5ldGltZTsKKwl1MTYgaXBzX2xpbmV0aW1lOwogCWJvb2wgZmJjX3dtX2VuYWJsZWQ7CiAJ
Ym9vbCBwaXBlX2VuYWJsZWQ7CiAJYm9vbCBzcHJpdGVzX2VuYWJsZWQ7CmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvaGFuZGxlcnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d2dC9oYW5kbGVycy5jCmluZGV4IDZkMjhkNzJlNmM3ZS4uMTg0NzVkZDM3N2VkIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQvaGFuZGxlcnMuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndnQvaGFuZGxlcnMuYwpAQCAtMjQxNSw5ICsyNDE1LDkgQEAgc3RhdGljIGlu
dCBpbml0X2dlbmVyaWNfbW1pb19pbmZvKHN0cnVjdCBpbnRlbF9ndnQgKmd2dCkKIAlNTUlPX0Yo
X01NSU8oMHg3MTQ0YyksIDB4YywgMCwgMCwgMCwgRF9QUkVfU0tMLCBOVUxMLCBOVUxMKTsKIAlN
TUlPX0YoX01NSU8oMHg3MjQ0YyksIDB4YywgMCwgMCwgMCwgRF9QUkVfU0tMLCBOVUxMLCBOVUxM
KTsKIAotCU1NSU9fRChQSVBFX1dNX0xJTkVUSU1FKFBJUEVfQSksIERfQUxMKTsKLQlNTUlPX0Qo
UElQRV9XTV9MSU5FVElNRShQSVBFX0IpLCBEX0FMTCk7Ci0JTU1JT19EKFBJUEVfV01fTElORVRJ
TUUoUElQRV9DKSwgRF9BTEwpOworCU1NSU9fRChXTV9MSU5FVElNRShQSVBFX0EpLCBEX0FMTCk7
CisJTU1JT19EKFdNX0xJTkVUSU1FKFBJUEVfQiksIERfQUxMKTsKKwlNTUlPX0QoV01fTElORVRJ
TUUoUElQRV9DKSwgRF9BTEwpOwogCU1NSU9fRChTUExMX0NUTCwgRF9BTEwpOwogCU1NSU9fRChf
TU1JTyhfV1JQTExfQ1RMMSksIERfQUxMKTsKIAlNTUlPX0QoX01NSU8oX1dSUExMX0NUTDIpLCBE
X0FMTCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAppbmRleCBiOTNjNGMxOGYwNWMuLmJhMDIzYmJm
NTQ1YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAorKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCkBAIC0xMDUzOCwxMyArMTA1MzgsMTMgQEAg
ZW51bSBza2xfcG93ZXJfZ2F0ZSB7CiAjZGVmaW5lICBEX0NPTVBfQ09NUF9ESVNBQkxFCQkoMSA8
PCAwKQogCiAvKiBQaXBlIFdNX0xJTkVUSU1FIC0gd2F0ZXJtYXJrIGxpbmUgdGltZSAqLwotI2Rl
ZmluZSBfUElQRV9XTV9MSU5FVElNRV9BCQkweDQ1MjcwCi0jZGVmaW5lIF9QSVBFX1dNX0xJTkVU
SU1FX0IJCTB4NDUyNzQKLSNkZWZpbmUgUElQRV9XTV9MSU5FVElNRShwaXBlKSBfTU1JT19QSVBF
KHBpcGUsIF9QSVBFX1dNX0xJTkVUSU1FX0EsIF9QSVBFX1dNX0xJTkVUSU1FX0IpCi0jZGVmaW5l
ICAgUElQRV9XTV9MSU5FVElNRV9NQVNLCQkJKDB4MWZmKQotI2RlZmluZSAgIFBJUEVfV01fTElO
RVRJTUVfVElNRSh4KQkJKCh4KSkKLSNkZWZpbmUgICBQSVBFX1dNX0xJTkVUSU1FX0lQU19MSU5F
VElNRV9NQVNLCSgweDFmZiA8PCAxNikKLSNkZWZpbmUgICBQSVBFX1dNX0xJTkVUSU1FX0lQU19M
SU5FVElNRSh4KQkoKHgpIDw8IDE2KQorI2RlZmluZSBfV01fTElORVRJTUVfQQkJMHg0NTI3MAor
I2RlZmluZSBfV01fTElORVRJTUVfQgkJMHg0NTI3NAorI2RlZmluZSBXTV9MSU5FVElNRShwaXBl
KSBfTU1JT19QSVBFKHBpcGUsIF9XTV9MSU5FVElNRV9BLCBfV01fTElORVRJTUVfQikKKyNkZWZp
bmUgIEhTV19MSU5FVElNRV9NQVNLCVJFR19HRU5NQVNLKDgsIDApCisjZGVmaW5lICBIU1dfTElO
RVRJTUUoeCkJUkVHX0ZJRUxEX1BSRVAoSFNXX0xJTkVUSU1FX01BU0ssICh4KSkKKyNkZWZpbmUg
IEhTV19JUFNfTElORVRJTUVfTUFTSwlSRUdfR0VOTUFTSygyNCwgMTYpCisjZGVmaW5lICBIU1df
SVBTX0xJTkVUSU1FKHgpCVJFR19GSUVMRF9QUkVQKEhTV19JUFNfTElORVRJTUVfTUFTSywgKHgp
KQogCiAvKiBTRlVTRV9TVFJBUCAqLwogI2RlZmluZSBTRlVTRV9TVFJBUAkJCV9NTUlPKDB4YzIw
MTQpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYwppbmRleCA4MWU1YTMyNzhmZGEuLmE0YjY2ZWUxZTNk
OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jCkBAIC0yODExLDMxICsyODExLDMxIEBAIHN0YXRp
YyB2b2lkIGlsa19jb21wdXRlX3dtX2xldmVsKGNvbnN0IHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiwKIH0KIAogc3RhdGljIHUzMgotaHN3X2NvbXB1dGVfbGluZXRpbWVfd20oY29u
c3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCitoc3dfbGluZXRpbWVfd20o
Y29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiB7Ci0JY29uc3Qgc3Ry
dWN0IGludGVsX2F0b21pY19zdGF0ZSAqaW50ZWxfc3RhdGUgPQotCQl0b19pbnRlbF9hdG9taWNf
c3RhdGUoY3J0Y19zdGF0ZS0+dWFwaS5zdGF0ZSk7CiAJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKmFkanVzdGVkX21vZGUgPQogCQkmY3J0Y19zdGF0ZS0+aHcuYWRqdXN0ZWRfbW9kZTsK
LQl1MzIgbGluZXRpbWUsIGlwc19saW5ldGltZTsKIAogCWlmICghY3J0Y19zdGF0ZS0+aHcuYWN0
aXZlKQogCQlyZXR1cm4gMDsKLQlpZiAoV0FSTl9PTihhZGp1c3RlZF9tb2RlLT5jcnRjX2Nsb2Nr
ID09IDApKQotCQlyZXR1cm4gMDsKLQlpZiAoV0FSTl9PTihpbnRlbF9zdGF0ZS0+Y2RjbGsubG9n
aWNhbC5jZGNsayA9PSAwKSkKLQkJcmV0dXJuIDA7CiAKLQkvKiBUaGUgV00gYXJlIGNvbXB1dGVk
IHdpdGggYmFzZSBvbiBob3cgbG9uZyBpdCB0YWtlcyB0byBmaWxsIGEgc2luZ2xlCi0JICogcm93
IGF0IHRoZSBnaXZlbiBjbG9jayByYXRlLCBtdWx0aXBsaWVkIGJ5IDguCi0JICogKi8KLQlsaW5l
dGltZSA9IERJVl9ST1VORF9DTE9TRVNUKGFkanVzdGVkX21vZGUtPmNydGNfaHRvdGFsICogMTAw
MCAqIDgsCi0JCQkJICAgICBhZGp1c3RlZF9tb2RlLT5jcnRjX2Nsb2NrKTsKLQlpcHNfbGluZXRp
bWUgPSBESVZfUk9VTkRfQ0xPU0VTVChhZGp1c3RlZF9tb2RlLT5jcnRjX2h0b3RhbCAqIDEwMDAg
KiA4LAotCQkJCQkgaW50ZWxfc3RhdGUtPmNkY2xrLmxvZ2ljYWwuY2RjbGspOworCXJldHVybiBE
SVZfUk9VTkRfQ0xPU0VTVChhZGp1c3RlZF9tb2RlLT5jcnRjX2h0b3RhbCAqIDEwMDAgKiA4LAor
CQkJCSBhZGp1c3RlZF9tb2RlLT5jcnRjX2Nsb2NrKTsKK30KKworc3RhdGljIHUzMgoraHN3X2lw
c19saW5ldGltZV93bShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkK
K3sKKwljb25zdCBzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSA9CisJCXRvX2ludGVs
X2F0b21pY19zdGF0ZShjcnRjX3N0YXRlLT51YXBpLnN0YXRlKTsKKwljb25zdCBzdHJ1Y3QgZHJt
X2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSA9CisJCSZjcnRjX3N0YXRlLT5ody5hZGp1c3Rl
ZF9tb2RlOworCisJaWYgKCFjcnRjX3N0YXRlLT5ody5hY3RpdmUpCisJCXJldHVybiAwOwogCi0J
cmV0dXJuIFBJUEVfV01fTElORVRJTUVfSVBTX0xJTkVUSU1FKGlwc19saW5ldGltZSkgfAotCSAg
ICAgICBQSVBFX1dNX0xJTkVUSU1FX1RJTUUobGluZXRpbWUpOworCXJldHVybiBESVZfUk9VTkRf
Q0xPU0VTVChhZGp1c3RlZF9tb2RlLT5jcnRjX2h0b3RhbCAqIDEwMDAgKiA4LAorCQkJCSBzdGF0
ZS0+Y2RjbGsubG9naWNhbC5jZGNsayk7CiB9CiAKIHN0YXRpYyB2b2lkIGludGVsX3JlYWRfd21f
bGF0ZW5jeShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCkBAIC0zMTc4LDggKzMx
NzgsMTAgQEAgc3RhdGljIGludCBpbGtfY29tcHV0ZV9waXBlX3dtKHN0cnVjdCBpbnRlbF9jcnRj
X3N0YXRlICpjcnRjX3N0YXRlKQogCWlsa19jb21wdXRlX3dtX2xldmVsKGRldl9wcml2LCBpbnRl
bF9jcnRjLCAwLCBjcnRjX3N0YXRlLAogCQkJICAgICBwcmlzdGF0ZSwgc3Byc3RhdGUsIGN1cnN0
YXRlLCAmcGlwZV93bS0+d21bMF0pOwogCi0JaWYgKElTX0hBU1dFTEwoZGV2X3ByaXYpIHx8IElT
X0JST0FEV0VMTChkZXZfcHJpdikpCi0JCXBpcGVfd20tPmxpbmV0aW1lID0gaHN3X2NvbXB1dGVf
bGluZXRpbWVfd20oY3J0Y19zdGF0ZSk7CisJaWYgKElTX0hBU1dFTEwoZGV2X3ByaXYpIHx8IElT
X0JST0FEV0VMTChkZXZfcHJpdikpIHsKKwkJcGlwZV93bS0+bGluZXRpbWUgPSBoc3dfbGluZXRp
bWVfd20oY3J0Y19zdGF0ZSk7CisJCXBpcGVfd20tPmlwc19saW5ldGltZSA9IGhzd19pcHNfbGlu
ZXRpbWVfd20oY3J0Y19zdGF0ZSk7CisJfQogCiAJaWYgKCFpbGtfdmFsaWRhdGVfcGlwZV93bShk
ZXZfcHJpdiwgcGlwZV93bSkpCiAJCXJldHVybiAtRUlOVkFMOwpAQCAtMzQyNiwxMyArMzQyOCwx
NCBAQCBzdGF0aWMgdm9pZCBpbGtfY29tcHV0ZV93bV9yZXN1bHRzKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdiwKIAkvKiBMUDAgcmVnaXN0ZXIgdmFsdWVzICovCiAJZm9yX2VhY2hf
aW50ZWxfY3J0YygmZGV2X3ByaXYtPmRybSwgaW50ZWxfY3J0YykgewogCQllbnVtIHBpcGUgcGlw
ZSA9IGludGVsX2NydGMtPnBpcGU7Ci0JCWNvbnN0IHN0cnVjdCBpbnRlbF93bV9sZXZlbCAqciA9
Ci0JCQkmaW50ZWxfY3J0Yy0+d20uYWN0aXZlLmlsay53bVswXTsKKwkJY29uc3Qgc3RydWN0IGlu
dGVsX3BpcGVfd20gKnBpcGVfd20gPSAmaW50ZWxfY3J0Yy0+d20uYWN0aXZlLmlsazsKKwkJY29u
c3Qgc3RydWN0IGludGVsX3dtX2xldmVsICpyID0gJnBpcGVfd20tPndtWzBdOwogCiAJCWlmIChX
QVJOX09OKCFyLT5lbmFibGUpKQogCQkJY29udGludWU7Ci0KLQkJcmVzdWx0cy0+d21fbGluZXRp
bWVbcGlwZV0gPSBpbnRlbF9jcnRjLT53bS5hY3RpdmUuaWxrLmxpbmV0aW1lOworCQlyZXN1bHRz
LT53bV9saW5ldGltZVtwaXBlXSA9CisJCQlIU1dfTElORVRJTUUocGlwZV93bS0+bGluZXRpbWUp
IHwKKwkJCUhTV19JUFNfTElORVRJTUUocGlwZV93bS0+aXBzX2xpbmV0aW1lKTsKIAogCQlyZXN1
bHRzLT53bV9waXBlW3BpcGVdID0KIAkJCShyLT5wcmlfdmFsIDw8IFdNMF9QSVBFX1BMQU5FX1NI
SUZUKSB8CkBAIC0zNTg1LDExICszNTg4LDExIEBAIHN0YXRpYyB2b2lkIGlsa193cml0ZV93bV92
YWx1ZXMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQlJOTE1X1dSSVRFKFdN
MF9QSVBFQ19JVkIsIHJlc3VsdHMtPndtX3BpcGVbMl0pOwogCiAJaWYgKGRpcnR5ICYgV01fRElS
VFlfTElORVRJTUUoUElQRV9BKSkKLQkJSTkxNV9XUklURShQSVBFX1dNX0xJTkVUSU1FKFBJUEVf
QSksIHJlc3VsdHMtPndtX2xpbmV0aW1lWzBdKTsKKwkJSTkxNV9XUklURShXTV9MSU5FVElNRShQ
SVBFX0EpLCByZXN1bHRzLT53bV9saW5ldGltZVswXSk7CiAJaWYgKGRpcnR5ICYgV01fRElSVFlf
TElORVRJTUUoUElQRV9CKSkKLQkJSTkxNV9XUklURShQSVBFX1dNX0xJTkVUSU1FKFBJUEVfQiks
IHJlc3VsdHMtPndtX2xpbmV0aW1lWzFdKTsKKwkJSTkxNV9XUklURShXTV9MSU5FVElNRShQSVBF
X0IpLCByZXN1bHRzLT53bV9saW5ldGltZVsxXSk7CiAJaWYgKGRpcnR5ICYgV01fRElSVFlfTElO
RVRJTUUoUElQRV9DKSkKLQkJSTkxNV9XUklURShQSVBFX1dNX0xJTkVUSU1FKFBJUEVfQyksIHJl
c3VsdHMtPndtX2xpbmV0aW1lWzJdKTsKKwkJSTkxNV9XUklURShXTV9MSU5FVElNRShQSVBFX0Mp
LCByZXN1bHRzLT53bV9saW5ldGltZVsyXSk7CiAKIAlpZiAoZGlydHkgJiBXTV9ESVJUWV9EREIp
IHsKIAkJaWYgKElTX0hBU1dFTEwoZGV2X3ByaXYpIHx8IElTX0JST0FEV0VMTChkZXZfcHJpdikp
IHsKQEAgLTU1NjgsNyArNTU3MSw3IEBAIHN0YXRpYyB2b2lkIHNrbF9hdG9taWNfdXBkYXRlX2Ny
dGNfd20oc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsCiAJaWYgKChzdGF0ZS0+d21f
cmVzdWx0cy5kaXJ0eV9waXBlcyAmIEJJVChjcnRjLT5waXBlKSkgPT0gMCkKIAkJcmV0dXJuOwog
Ci0JSTkxNV9XUklURShQSVBFX1dNX0xJTkVUSU1FKHBpcGUpLCBwaXBlX3dtLT5saW5ldGltZSk7
CisJSTkxNV9XUklURShXTV9MSU5FVElNRShwaXBlKSwgSFNXX0xJTkVUSU1FKHBpcGVfd20tPmxp
bmV0aW1lKSk7CiB9CiAKIHN0YXRpYyB2b2lkIHNrbF9pbml0aWFsX3dtKHN0cnVjdCBpbnRlbF9h
dG9taWNfc3RhdGUgKnN0YXRlLApAQCAtNTcxMyw3ICs1NzE2LDggQEAgdm9pZCBza2xfcGlwZV93
bV9nZXRfaHdfc3RhdGUoc3RydWN0IGludGVsX2NydGMgKmNydGMsCiAJaWYgKCFjcnRjLT5hY3Rp
dmUpCiAJCXJldHVybjsKIAotCW91dC0+bGluZXRpbWUgPSBJOTE1X1JFQUQoUElQRV9XTV9MSU5F
VElNRShwaXBlKSk7CisJdmFsID0gSTkxNV9SRUFEKFdNX0xJTkVUSU1FKHBpcGUpKTsKKwlvdXQt
PmxpbmV0aW1lID0gUkVHX0ZJRUxEX0dFVChIU1dfTElORVRJTUVfTUFTSywgdmFsKTsKIH0KIAog
dm9pZCBza2xfd21fZ2V0X2h3X3N0YXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
dikKQEAgLTU3NTUsNyArNTc1OSw3IEBAIHN0YXRpYyB2b2lkIGlsa19waXBlX3dtX2dldF9od19z
dGF0ZShzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YykKIAogCWh3LT53bV9waXBlW3BpcGVdID0gSTkx
NV9SRUFEKHdtMF9waXBlX3JlZ1twaXBlXSk7CiAJaWYgKElTX0hBU1dFTEwoZGV2X3ByaXYpIHx8
IElTX0JST0FEV0VMTChkZXZfcHJpdikpCi0JCWh3LT53bV9saW5ldGltZVtwaXBlXSA9IEk5MTVf
UkVBRChQSVBFX1dNX0xJTkVUSU1FKHBpcGUpKTsKKwkJaHctPndtX2xpbmV0aW1lW3BpcGVdID0g
STkxNV9SRUFEKFdNX0xJTkVUSU1FKHBpcGUpKTsKIAogCW1lbXNldChhY3RpdmUsIDAsIHNpemVv
ZigqYWN0aXZlKSk7CiAKQEAgLTU3NzQsNyArNTc3OCwxMCBAQCBzdGF0aWMgdm9pZCBpbGtfcGlw
ZV93bV9nZXRfaHdfc3RhdGUoc3RydWN0IGludGVsX2NydGMgKmNydGMpCiAJCWFjdGl2ZS0+d21b
MF0ucHJpX3ZhbCA9ICh0bXAgJiBXTTBfUElQRV9QTEFORV9NQVNLKSA+PiBXTTBfUElQRV9QTEFO
RV9TSElGVDsKIAkJYWN0aXZlLT53bVswXS5zcHJfdmFsID0gKHRtcCAmIFdNMF9QSVBFX1NQUklU
RV9NQVNLKSA+PiBXTTBfUElQRV9TUFJJVEVfU0hJRlQ7CiAJCWFjdGl2ZS0+d21bMF0uY3VyX3Zh
bCA9IHRtcCAmIFdNMF9QSVBFX0NVUlNPUl9NQVNLOwotCQlhY3RpdmUtPmxpbmV0aW1lID0gaHct
PndtX2xpbmV0aW1lW3BpcGVdOworCQlhY3RpdmUtPmxpbmV0aW1lID0gUkVHX0ZJRUxEX0dFVChI
U1dfTElORVRJTUVfTUFTSywKKwkJCQkJCSBody0+d21fbGluZXRpbWVbcGlwZV0pOworCQlhY3Rp
dmUtPmlwc19saW5ldGltZSA9IFJFR19GSUVMRF9HRVQoSFNXX0lQU19MSU5FVElNRV9NQVNLLAor
CQkJCQkJICAgICBody0+d21fbGluZXRpbWVbcGlwZV0pOwogCX0gZWxzZSB7CiAJCWludCBsZXZl
bCwgbWF4X2xldmVsID0gaWxrX3dtX21heF9sZXZlbChkZXZfcHJpdik7CiAKLS0gCjIuMjQuMQoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4
IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4Cg==

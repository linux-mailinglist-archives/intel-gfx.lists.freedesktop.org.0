Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 89497B8C6F
	for <lists+intel-gfx@lfdr.de>; Fri, 20 Sep 2019 10:15:02 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D512E6FAFE;
	Fri, 20 Sep 2019 08:15:00 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C727C6FAFE
 for <intel-gfx@lists.freedesktop.org>; Fri, 20 Sep 2019 08:14:59 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Sep 2019 01:14:59 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,528,1559545200"; d="scan'208";a="192306434"
Received: from gaia.fi.intel.com ([10.237.72.192])
 by orsmga006.jf.intel.com with ESMTP; 20 Sep 2019 01:14:57 -0700
Received: by gaia.fi.intel.com (Postfix, from userid 1000)
 id 68F425C1E01; Fri, 20 Sep 2019 11:14:36 +0300 (EEST)
From: Mika Kuoppala <mika.kuoppala@linux.intel.com>
To: Chris Wilson <chris@chris-wilson.co.uk>, intel-gfx@lists.freedesktop.org
In-Reply-To: <20190919151811.9526-1-chris@chris-wilson.co.uk>
References: <20190919151811.9526-1-chris@chris-wilson.co.uk>
Date: Fri, 20 Sep 2019 11:14:36 +0300
Message-ID: <87a7azpeoj.fsf@gaia.fi.intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH v2] drm/i915/tgl: Suspend pre-parser across
 GTT invalidations
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

Q2hyaXMgV2lsc29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+IHdyaXRlczoKCj4gQmVmb3Jl
IHdlIGV4ZWN1dGUgYSBiYXRjaCwgd2UgbXVzdCBmaXJzdCBpc3N1ZSBhbnkgYW5kIGFsbCBUTEIK
PiBpbnZhbGlkYXRpb25zIHNvIHRoYXQgYmF0Y2ggcGlja3MgdXAgdGhlIG5ldyBwYWdlIHRhYmxl
IGVudHJpZXMuCj4gVGlnZXJsYWtlJ3MgcHJlcGFyc2VyIGlzIHdlYWtlbmluZyBvdXIgcG9zdC1z
eW5jIENTX1NUQUxMIGluc2lkZSB0aGUKPiBpbnZhbGlkYXRlIHBpcGUtY29udHJvbCBhbmQgYWxs
b3dpbmcgdGhlIGxvYWRpbmcgb2YgdGhlIGJhdGNoIGJ1ZmZlcgo+IGJlZm9yZSB3ZSBoYXZlIHNl
dHVwIGl0cyBwYWdlIHRhYmxlIChhbmQgc28gaXQgbG9hZHMgdGhlIHdyb25nIHBhZ2UgYW5kCj4g
ZXhlY3V0ZXMgaW5kZWZpbml0ZWx5KS4KPgo+IFRoZSBpZ3RfY3NfdGxiIGluZGljYXRlcyB0aGF0
IHRoaXMgaXNzdWUgY2FuIG9ubHkgYmUgb2JzZXJ2ZWQgb24gcmNzLAo+IGV2ZW4gdGhvdWdoIHRo
ZSBwcmVwYXJzZXIgaXMgY29tbW9uIHRvIGFsbCBlbmdpbmVzLiBBbHRlcm5hdGl2ZWx5LCB3ZQo+
IGNvdWxkIGRvIFRMQiBzaG9vdGRvd24gdmlhIG1taW8gb24gdXBkYXRpbmcgdGhlIEdUVC4KPgo+
IEJ5IGluc2VydGluZyB0aGUgcHJlLXBhcnNlciBkaXNhYmxlIGluc2lkZSBFTUlUX0lOVkFMSURB
VEUsIHdlIHdpbGwgYWxzbwo+IGFjY2lkZW50YWxseSBmaXh1cCBleGVjdXRpb24gdGhhdCB3cml0
ZXMgaW50byBzdWJzZXF1ZW50IGJhdGNoZXMsIHN1Y2gKPiBhcyBnZW1fZXhlY193aGlzcGVyIGFu
ZCBldmVuIHJlbG9jYXRpb25zIHBlcmZvcm1lZCBvbiB0aGUgR1BVLiBXZSBzaG91bGQKPiBiZSBj
YXJlZnVsIG5vdCB0byBhbGxvdyB0aGlzIGRpc2FibGUgdG8gYmVjb21lIGJha2VkIGludG8gdGhl
IHVBQkkhCj4KPiBUZXN0Y2FzZTogaWd0L2k5MTVfc2VsZnRlc3RzL2xpdmVfZ3R0L2lndF9jc190
bGIKPiBTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51
az4KPiBDYzogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xvc3B1cmlvQGlu
dGVsLmNvbT4KPiBDYzogTWlrYSBLdW9wcGFsYSA8bWlrYS5rdW9wcGFsYUBsaW51eC5pbnRlbC5j
b20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jIHwgNzUgKysr
KysrKysrKysrKysrKysrKysrKysrKysrKy0KPiAgMSBmaWxlIGNoYW5nZWQsIDc0IGluc2VydGlv
bnMoKyksIDEgZGVsZXRpb24oLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9ndC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCj4g
aW5kZXggYTk5MTY2YTJkMmViLi42MGI3YjE2M2MzZDAgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9scmMuYwo+IEBAIC0yODA3LDYgKzI4MDcsNzkgQEAgc3RhdGljIGludCBnZW4xMV9l
bWl0X2ZsdXNoX3JlbmRlcihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0LAo+ICAJcmV0dXJu
IDA7Cj4gIH0KPiAgCj4gK3N0YXRpYyB1MzIgcHJlcGFyc2VyX2Rpc2FibGUoYm9vbCBzdGF0ZSkK
PiArewo+ICsJcmV0dXJuIE1JX0FSQl9DSEVDSyB8IDEgPDwgOCB8IHN0YXRlOwo+ICt9CgpEZXNj
cmlwdGl2ZSBlbm91Z2gsIHNvIG5vIG5lZWQgdG8gZGVmaW5lIHRoZSBtYXNrLgoKQWNrZWQtYnk6
IE1pa2EgS3VvcHBhbGEgPG1pa2Eua3VvcHBhbGFAbGludXguaW50ZWwuY29tPgoKPiArCj4gK3N0
YXRpYyBpbnQgZ2VuMTJfZW1pdF9mbHVzaF9yZW5kZXIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVx
dWVzdCwKPiArCQkJCSAgIHUzMiBtb2RlKQo+ICt7Cj4gKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2Nz
ICplbmdpbmUgPSByZXF1ZXN0LT5lbmdpbmU7Cj4gKwljb25zdCB1MzIgc2NyYXRjaF9hZGRyID0K
PiArCQlpbnRlbF9ndF9zY3JhdGNoX29mZnNldChlbmdpbmUtPmd0LAo+ICsJCQkJCUlOVEVMX0dU
X1NDUkFUQ0hfRklFTERfUkVOREVSX0ZMVVNIKTsKPiArCj4gKwlpZiAobW9kZSAmIEVNSVRfRkxV
U0gpIHsKPiArCQl1MzIgZmxhZ3MgPSAwOwo+ICsJCXUzMiAqY3M7Cj4gKwo+ICsJCWZsYWdzIHw9
IFBJUEVfQ09OVFJPTF9USUxFX0NBQ0hFX0ZMVVNIOwo+ICsJCWZsYWdzIHw9IFBJUEVfQ09OVFJP
TF9SRU5ERVJfVEFSR0VUX0NBQ0hFX0ZMVVNIOwo+ICsJCWZsYWdzIHw9IFBJUEVfQ09OVFJPTF9E
RVBUSF9DQUNIRV9GTFVTSDsKPiArCQlmbGFncyB8PSBQSVBFX0NPTlRST0xfRENfRkxVU0hfRU5B
QkxFOwo+ICsJCWZsYWdzIHw9IFBJUEVfQ09OVFJPTF9GTFVTSF9FTkFCTEU7Cj4gKwo+ICsJCWZs
YWdzIHw9IFBJUEVfQ09OVFJPTF9RV19XUklURTsKPiArCQlmbGFncyB8PSBQSVBFX0NPTlRST0xf
R0xPQkFMX0dUVF9JVkI7Cj4gKwo+ICsJCWZsYWdzIHw9IFBJUEVfQ09OVFJPTF9DU19TVEFMTDsK
PiArCj4gKwkJY3MgPSBpbnRlbF9yaW5nX2JlZ2luKHJlcXVlc3QsIDYpOwo+ICsJCWlmIChJU19F
UlIoY3MpKQo+ICsJCQlyZXR1cm4gUFRSX0VSUihjcyk7Cj4gKwo+ICsJCWNzID0gZ2VuOF9lbWl0
X3BpcGVfY29udHJvbChjcywgZmxhZ3MsIHNjcmF0Y2hfYWRkcik7Cj4gKwkJaW50ZWxfcmluZ19h
ZHZhbmNlKHJlcXVlc3QsIGNzKTsKPiArCX0KPiArCj4gKwlpZiAobW9kZSAmIEVNSVRfSU5WQUxJ
REFURSkgewo+ICsJCXUzMiBmbGFncyA9IDA7Cj4gKwkJdTMyICpjczsKPiArCj4gKwkJZmxhZ3Mg
fD0gUElQRV9DT05UUk9MX0NPTU1BTkRfQ0FDSEVfSU5WQUxJREFURTsKPiArCQlmbGFncyB8PSBQ
SVBFX0NPTlRST0xfVExCX0lOVkFMSURBVEU7Cj4gKwkJZmxhZ3MgfD0gUElQRV9DT05UUk9MX0lO
U1RSVUNUSU9OX0NBQ0hFX0lOVkFMSURBVEU7Cj4gKwkJZmxhZ3MgfD0gUElQRV9DT05UUk9MX1RF
WFRVUkVfQ0FDSEVfSU5WQUxJREFURTsKPiArCQlmbGFncyB8PSBQSVBFX0NPTlRST0xfVkZfQ0FD
SEVfSU5WQUxJREFURTsKPiArCQlmbGFncyB8PSBQSVBFX0NPTlRST0xfQ09OU1RfQ0FDSEVfSU5W
QUxJREFURTsKPiArCQlmbGFncyB8PSBQSVBFX0NPTlRST0xfU1RBVEVfQ0FDSEVfSU5WQUxJREFU
RTsKPiArCj4gKwkJZmxhZ3MgfD0gUElQRV9DT05UUk9MX0dMT0JBTF9HVFRfSVZCOwo+ICsJCWZs
YWdzIHw9IFBJUEVfQ09OVFJPTF9RV19XUklURTsKPiArCj4gKwkJZmxhZ3MgfD0gUElQRV9DT05U
Uk9MX0NTX1NUQUxMOwo+ICsKPiArCQljcyA9IGludGVsX3JpbmdfYmVnaW4ocmVxdWVzdCwgOCk7
Cj4gKwkJaWYgKElTX0VSUihjcykpCj4gKwkJCXJldHVybiBQVFJfRVJSKGNzKTsKPiArCj4gKwkJ
LyoKPiArCQkgKiBQcmV2ZW50IHRoZSBwcmUtcGFyc2VyIGZyb20gc2tpcHBpbmcgcGFzdCB0aGUg
VExCCj4gKwkJICogaW52YWxpZGF0ZSBhbmQgbG9hZGluZyBhIHN0YWxlIHBhZ2UgZm9yIHRoZSBi
YXRjaAo+ICsJCSAqIGJ1ZmZlciAvIHJlcXVlc3QgcGF5bG9hZC4KPiArCQkgKi8KPiArCQkqY3Mr
KyA9IHByZXBhcnNlcl9kaXNhYmxlKHRydWUpOwo+ICsKPiArCQljcyA9IGdlbjhfZW1pdF9waXBl
X2NvbnRyb2woY3MsIGZsYWdzLCBzY3JhdGNoX2FkZHIpOwo+ICsKPiArCQkqY3MrKyA9IHByZXBh
cnNlcl9kaXNhYmxlKGZhbHNlKTsKPiArCQlpbnRlbF9yaW5nX2FkdmFuY2UocmVxdWVzdCwgY3Mp
Owo+ICsJfQo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICAvKgo+ICAgKiBSZXNlcnZlIHNw
YWNlIGZvciAyIE5PT1BzIGF0IHRoZSBlbmQgb2YgZWFjaCByZXF1ZXN0IHRvIGJlCj4gICAqIHVz
ZWQgYXMgYSB3b3JrYXJvdW5kIGZvciBub3QgYmVpbmcgYWxsb3dlZCB0byBkbyBsaXRlCj4gQEAg
LTMwNzIsNyArMzE0NSw3IEBAIHN0YXRpYyB2b2lkIHJjc19zdWJtaXNzaW9uX292ZXJyaWRlKHN0
cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKPiAgewo+ICAJc3dpdGNoIChJTlRFTF9HRU4o
ZW5naW5lLT5pOTE1KSkgewo+ICAJY2FzZSAxMjoKPiAtCQllbmdpbmUtPmVtaXRfZmx1c2ggPSBn
ZW4xMV9lbWl0X2ZsdXNoX3JlbmRlcjsKPiArCQllbmdpbmUtPmVtaXRfZmx1c2ggPSBnZW4xMl9l
bWl0X2ZsdXNoX3JlbmRlcjsKPiAgCQllbmdpbmUtPmVtaXRfZmluaV9icmVhZGNydW1iID0gZ2Vu
MTJfZW1pdF9maW5pX2JyZWFkY3J1bWJfcmNzOwo+ICAJCWJyZWFrOwo+ICAJY2FzZSAxMToKPiAt
LSAKPiAyLjIzLjAKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

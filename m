Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D8F94232FAD
	for <lists+intel-gfx@lfdr.de>; Thu, 30 Jul 2020 11:38:30 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C526C6E8BB;
	Thu, 30 Jul 2020 09:38:24 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (unknown [77.68.26.236])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 001B06E091
 for <intel-gfx@lists.freedesktop.org>; Thu, 30 Jul 2020 09:38:10 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 21979061-1500050 
 for multiple; Thu, 30 Jul 2020 10:38:02 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 30 Jul 2020 10:37:48 +0100
Message-Id: <20200730093756.16737-14-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20200730093756.16737-1-chris@chris-wilson.co.uk>
References: <20200730093756.16737-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 13/21] drm/i915/gt: Distinguish the virtual
 breadcrumbs from the irq breadcrumbs
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: thomas.hellstrom@intel.com, Chris Wilson <chris@chris-wilson.co.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gdGhlIHZpcnR1YWwgZW5naW5lcywgd2Ugb25seSB1c2UgdGhlIGludGVsX2JyZWFkY3J1bWJz
IGZvciB0cmFja2luZwpzaWduYWxpbmcgb2Ygc3RhbGUgYnJlYWRjcnVtYnMgZnJvbSB0aGUgaXJx
X3dvcmtlcnMuIFRoZXkgZG8gbm90IGhhdmUKYW55IGFzc29jaWF0ZWQgaW50ZXJydXB0IGhhbmRs
aW5nLCBhY3RpdmUgcmVxdWVzdHMgYXJlIHBhc3NlZCB0byBhCnBoeXNpY2FsIGVuZ2luZSBhbmQg
YXNzb2NpYXRlZCBicmVhZGNydW1iIGludGVycnVwdCBoYW5kbGVyLiBUaGlzIGNhdXNlcwppc3N1
ZXMgZm9yIHVzIGFzIHdlIG5lZWQgdG8gZW5zdXJlIHRoYXQgd2UgZG8gbm90IGFjdHVhbGx5IHRy
eSBhbmQKZW5hYmxlIGludGVycnVwdHMgYW5kIHRoZSBwb3dlcm1hbmFnZW1lbnQgcmVxdWlyZWQg
Zm9yIHRoZW0gb24gdGhlCnZpcnR1YWwgZW5naW5lLCBhcyB0aGV5IHdpbGwgbmV2ZXIgYmUgZGlz
YWJsZWQuIEluc3RlYWQsIGxldCdzCnNwZWNpZnkgdGhlIHBoeXNpY2FsIGVuZ2luZSB1c2VkIGZv
ciBpbnRlcnJ1cHQgaGFuZGxlciBvbiBhIHBhcnRpY3VsYXIKYnJlYWRjcnVtYi4KCnYyOiBEcm9w
IGItPmlycV9hcm1lZCA9IHRydWUgbW9ja2luZyBmb3Igbm8gaW50ZXJydXB0IEhXCgpTaWduZWQt
b2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KQ2M6IFR2cnRr
byBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuYyAgIHwgNzYgKysrKysrKysrKy0tLS0tLS0tLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuaCAgIHwgMzYgKysrKysr
KysrCiAuLi4vZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzX3R5cGVzLmggfCA0NyAr
KysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oICAgICAg
ICB8IDE3IC0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYyAg
ICAgfCAxNCArKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYyAg
ICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgg
IHwgMzEgKy0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2lycS5jICAg
ICAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAgICAgICAg
ICB8IDExICsrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmVzZXQuYyAgICAgICAg
IHwgIDEgKwogLi4uL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1Ym1pc3Npb24uYyAgIHwg
IDMgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jwcy5jICAgICAgICAgICB8ICAx
ICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMgICAgICAgICB8IDEwICsr
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYyAgICAgICAgICAgICAgIHwgIDEgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMgICAgICAgICAgIHwgIDEgKwogZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmggICAgICAgICAgIHwgIDQgLQogMTYgZmls
ZXMgY2hhbmdlZCwgMTYyIGluc2VydGlvbnMoKyksIDk1IGRlbGV0aW9ucygtKQogY3JlYXRlIG1v
ZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmgKIGNy
ZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1i
c190eXBlcy5oCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJl
YWRjcnVtYnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmMK
aW5kZXggZmJkYzQ2NWE1ODcwLi4yZmZkNDdhODY2NTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuYwpAQCAtMjgsNiArMjgsNyBAQAogCiAjaW5jbHVkZSAi
aTkxNV9kcnYuaCIKICNpbmNsdWRlICJpOTE1X3RyYWNlLmgiCisjaW5jbHVkZSAiaW50ZWxfYnJl
YWRjcnVtYnMuaCIKICNpbmNsdWRlICJpbnRlbF9ndF9wbS5oIgogI2luY2x1ZGUgImludGVsX2d0
X3JlcXVlc3RzLmgiCiAKQEAgLTU1LDMwICs1NiwyOCBAQCBzdGF0aWMgdm9pZCBpcnFfZGlzYWJs
ZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAKIHN0YXRpYyB2b2lkIF9faW50ZWxf
YnJlYWRjcnVtYnNfZGlzYXJtX2lycShzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKmIpCiB7Ci0J
c3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lID0KLQkJY29udGFpbmVyX29mKGIsIHN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MsIGJyZWFkY3J1bWJzKTsKLQogCWxvY2tkZXBfYXNzZXJ0X2hlbGQo
JmItPmlycV9sb2NrKTsKIAorCWlmICghYi0+aXJxX2VuZ2luZSB8fCAhYi0+aXJxX2FybWVkKQor
CQlyZXR1cm47CisKIAlHRU1fQlVHX09OKCFiLT5pcnFfZW5hYmxlZCk7CiAJaWYgKCEtLWItPmly
cV9lbmFibGVkKQotCQlpcnFfZGlzYWJsZShlbmdpbmUpOworCQlpcnFfZGlzYWJsZShiLT5pcnFf
ZW5naW5lKTsKIAogCVdSSVRFX09OQ0UoYi0+aXJxX2FybWVkLCBmYWxzZSk7Ci0JaW50ZWxfZ3Rf
cG1fcHV0X2FzeW5jKGVuZ2luZS0+Z3QpOworCWludGVsX2d0X3BtX3B1dF9hc3luYyhiLT5pcnFf
ZW5naW5lLT5ndCk7CiB9CiAKLXZvaWQgaW50ZWxfZW5naW5lX2Rpc2FybV9icmVhZGNydW1icyhz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCit2b2lkIGludGVsX2JyZWFkY3J1bWJzX3Bh
cmsoc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpiKQogewotCXN0cnVjdCBpbnRlbF9icmVhZGNy
dW1icyAqYiA9ICZlbmdpbmUtPmJyZWFkY3J1bWJzOwogCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CiAK
IAlpZiAoIVJFQURfT05DRShiLT5pcnFfYXJtZWQpKQogCQlyZXR1cm47CiAKIAlzcGluX2xvY2tf
aXJxc2F2ZSgmYi0+aXJxX2xvY2ssIGZsYWdzKTsKLQlpZiAoYi0+aXJxX2FybWVkKQotCQlfX2lu
dGVsX2JyZWFkY3J1bWJzX2Rpc2FybV9pcnEoYik7CisJX19pbnRlbF9icmVhZGNydW1ic19kaXNh
cm1faXJxKGIpOwogCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmItPmlycV9sb2NrLCBmbGFncyk7
CiB9CiAKQEAgLTEzMywxMyArMTMyLDggQEAgX19kbWFfZmVuY2Vfc2lnbmFsX19ub3RpZnkoc3Ry
dWN0IGRtYV9mZW5jZSAqZmVuY2UsCiAKIHN0YXRpYyB2b2lkIGFkZF9yZXRpcmUoc3RydWN0IGlu
dGVsX2JyZWFkY3J1bWJzICpiLCBzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRsKQogewotCXN0cnVj
dCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSA9Ci0JCWNvbnRhaW5lcl9vZihiLCBzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzLCBicmVhZGNydW1icyk7Ci0KLQlpZiAodW5saWtlbHkoaW50ZWxfZW5naW5l
X2lzX3ZpcnR1YWwoZW5naW5lKSkpCi0JCWVuZ2luZSA9IGludGVsX3ZpcnR1YWxfZW5naW5lX2dl
dF9zaWJsaW5nKGVuZ2luZSwgMCk7Ci0KLQlpbnRlbF9lbmdpbmVfYWRkX3JldGlyZShlbmdpbmUs
IHRsKTsKKwlpZiAoYi0+aXJxX2VuZ2luZSkKKwkJaW50ZWxfZW5naW5lX2FkZF9yZXRpcmUoYi0+
aXJxX2VuZ2luZSwgdGwpOwogfQogCiBzdGF0aWMgYm9vbCBfX3NpZ25hbF9yZXF1ZXN0KHN0cnVj
dCBpOTE1X3JlcXVlc3QgKnJxLCBzdHJ1Y3QgbGlzdF9oZWFkICpzaWduYWxzKQpAQCAtMTY0LDcg
KzE1OCw3IEBAIHN0YXRpYyB2b2lkIHNpZ25hbF9pcnFfd29yayhzdHJ1Y3QgaXJxX3dvcmsgKndv
cmspCiAKIAlzcGluX2xvY2soJmItPmlycV9sb2NrKTsKIAotCWlmIChiLT5pcnFfYXJtZWQgJiYg
bGlzdF9lbXB0eSgmYi0+c2lnbmFsZXJzKSkKKwlpZiAobGlzdF9lbXB0eSgmYi0+c2lnbmFsZXJz
KSkKIAkJX19pbnRlbF9icmVhZGNydW1ic19kaXNhcm1faXJxKGIpOwogCiAJbGlzdF9zcGxpY2Vf
aW5pdCgmYi0+c2lnbmFsZWRfcmVxdWVzdHMsICZzaWduYWwpOwpAQCAtMjIyLDE0ICsyMTYsMTIg
QEAgc3RhdGljIHZvaWQgc2lnbmFsX2lycV93b3JrKHN0cnVjdCBpcnFfd29yayAqd29yaykKIAog
c3RhdGljIHZvaWQgX19pbnRlbF9icmVhZGNydW1ic19hcm1faXJxKHN0cnVjdCBpbnRlbF9icmVh
ZGNydW1icyAqYikKIHsKLQlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUgPQotCQljb250
YWluZXJfb2YoYiwgc3RydWN0IGludGVsX2VuZ2luZV9jcywgYnJlYWRjcnVtYnMpOwotCiAJbG9j
a2RlcF9hc3NlcnRfaGVsZCgmYi0+aXJxX2xvY2spOwotCWlmIChiLT5pcnFfYXJtZWQpCisKKwlp
ZiAoIWItPmlycV9lbmdpbmUgfHwgYi0+aXJxX2FybWVkKQogCQlyZXR1cm47CiAKLQlpZiAoIWlu
dGVsX2d0X3BtX2dldF9pZl9hd2FrZShlbmdpbmUtPmd0KSkKKwlpZiAoIWludGVsX2d0X3BtX2dl
dF9pZl9hd2FrZShiLT5pcnFfZW5naW5lLT5ndCkpCiAJCXJldHVybjsKIAogCS8qCkBAIC0yNDks
MzcgKzI0MSw0OSBAQCBzdGF0aWMgdm9pZCBfX2ludGVsX2JyZWFkY3J1bWJzX2FybV9pcnEoc3Ry
dWN0IGludGVsX2JyZWFkY3J1bWJzICpiKQogCSAqLwogCiAJaWYgKCFiLT5pcnFfZW5hYmxlZCsr
KQotCQlpcnFfZW5hYmxlKGVuZ2luZSk7CisJCWlycV9lbmFibGUoYi0+aXJxX2VuZ2luZSk7CiB9
CiAKLXZvaWQgaW50ZWxfZW5naW5lX2luaXRfYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lKQorc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICoKK2ludGVsX2JyZWFkY3J1
bWJzX2NyZWF0ZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICppcnFfZW5naW5lKQogewotCXN0cnVj
dCBpbnRlbF9icmVhZGNydW1icyAqYiA9ICZlbmdpbmUtPmJyZWFkY3J1bWJzOworCXN0cnVjdCBp
bnRlbF9icmVhZGNydW1icyAqYjsKKworCWIgPSBremFsbG9jKHNpemVvZigqYiksIEdGUF9LRVJO
RUwpOworCWlmICghYikKKwkJcmV0dXJuIE5VTEw7CiAKIAlzcGluX2xvY2tfaW5pdCgmYi0+aXJx
X2xvY2spOwogCUlOSVRfTElTVF9IRUFEKCZiLT5zaWduYWxlcnMpOwogCUlOSVRfTElTVF9IRUFE
KCZiLT5zaWduYWxlZF9yZXF1ZXN0cyk7CiAKIAlpbml0X2lycV93b3JrKCZiLT5pcnFfd29yaywg
c2lnbmFsX2lycV93b3JrKTsKKworCWItPmlycV9lbmdpbmUgPSBpcnFfZW5naW5lOworCisJcmV0
dXJuIGI7CiB9CiAKLXZvaWQgaW50ZWxfZW5naW5lX3Jlc2V0X2JyZWFkY3J1bWJzKHN0cnVjdCBp
bnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKK3ZvaWQgaW50ZWxfYnJlYWRjcnVtYnNfcmVzZXQoc3Ry
dWN0IGludGVsX2JyZWFkY3J1bWJzICpiKQogewotCXN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAq
YiA9ICZlbmdpbmUtPmJyZWFkY3J1bWJzOwogCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CiAKKwlpZiAo
IWItPmlycV9lbmdpbmUpCisJCXJldHVybjsKKwogCXNwaW5fbG9ja19pcnFzYXZlKCZiLT5pcnFf
bG9jaywgZmxhZ3MpOwogCiAJaWYgKGItPmlycV9lbmFibGVkKQotCQlpcnFfZW5hYmxlKGVuZ2lu
ZSk7CisJCWlycV9lbmFibGUoYi0+aXJxX2VuZ2luZSk7CiAJZWxzZQotCQlpcnFfZGlzYWJsZShl
bmdpbmUpOworCQlpcnFfZGlzYWJsZShiLT5pcnFfZW5naW5lKTsKIAogCXNwaW5fdW5sb2NrX2ly
cXJlc3RvcmUoJmItPmlycV9sb2NrLCBmbGFncyk7CiB9CiAKLXZvaWQgaW50ZWxfZW5naW5lX2Zp
bmlfYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQordm9pZCBpbnRl
bF9icmVhZGNydW1ic19mcmVlKHN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYikKIHsKKwlrZnJl
ZShiKTsKIH0KIAogc3RhdGljIHZvaWQgaW5zZXJ0X2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVx
dWVzdCAqcnEsCkBAIC0zNjksMTEgKzM3MywxMSBAQCBib29sIGk5MTVfcmVxdWVzdF9lbmFibGVf
YnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkKIAkgKiByZXF1ZXN0IHN1Ym1pdC91
bnN1Ym1pdCBwYXRoLCBhbmQgc28gd2UgbXVzdCBiZSBtb3JlIGNhcmVmdWwgdG8KIAkgKiBhY3F1
aXJlIHRoZSByaWdodCBsb2NrLgogCSAqLwotCWIgPSAmUkVBRF9PTkNFKHJxLT5lbmdpbmUpLT5i
cmVhZGNydW1iczsKKwliID0gUkVBRF9PTkNFKHJxLT5lbmdpbmUpLT5icmVhZGNydW1iczsKIAlz
cGluX2xvY2soJmItPmlycV9sb2NrKTsKLQl3aGlsZSAodW5saWtlbHkoYiAhPSAmUkVBRF9PTkNF
KHJxLT5lbmdpbmUpLT5icmVhZGNydW1icykpIHsKKwl3aGlsZSAodW5saWtlbHkoYiAhPSBSRUFE
X09OQ0UocnEtPmVuZ2luZSktPmJyZWFkY3J1bWJzKSkgewogCQlzcGluX3VubG9jaygmYi0+aXJx
X2xvY2spOwotCQliID0gJlJFQURfT05DRShycS0+ZW5naW5lKS0+YnJlYWRjcnVtYnM7CisJCWIg
PSBSRUFEX09OQ0UocnEtPmVuZ2luZSktPmJyZWFkY3J1bWJzOwogCQlzcGluX2xvY2soJmItPmly
cV9sb2NrKTsKIAl9CiAKQEAgLTM5NCw3ICszOTgsNyBAQCBib29sIGk5MTVfcmVxdWVzdF9lbmFi
bGVfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkKIAogdm9pZCBpOTE1X3JlcXVl
c3RfY2FuY2VsX2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEpCiB7Ci0Jc3RydWN0
IGludGVsX2JyZWFkY3J1bWJzICpiID0gJnJxLT5lbmdpbmUtPmJyZWFkY3J1bWJzOworCXN0cnVj
dCBpbnRlbF9icmVhZGNydW1icyAqYiA9IHJxLT5lbmdpbmUtPmJyZWFkY3J1bWJzOwogCiAJLyoK
IAkgKiBXZSBtdXN0IHdhaXQgZm9yIGItPmlycV9sb2NrIHNvIHRoYXQgd2Uga25vdyB0aGUgaW50
ZXJydXB0IGhhbmRsZXIKQEAgLTQxOCwxMSArNDIyLDExIEBAIHZvaWQgaTkxNV9yZXF1ZXN0X2Nh
bmNlbF9icmVhZGNydW1iKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQogdm9pZCBpbnRlbF9lbmdp
bmVfcHJpbnRfYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCQkJ
CSAgICBzdHJ1Y3QgZHJtX3ByaW50ZXIgKnApCiB7Ci0Jc3RydWN0IGludGVsX2JyZWFkY3J1bWJz
ICpiID0gJmVuZ2luZS0+YnJlYWRjcnVtYnM7CisJc3RydWN0IGludGVsX2JyZWFkY3J1bWJzICpi
ID0gZW5naW5lLT5icmVhZGNydW1iczsKIAlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2U7CiAJc3Ry
dWN0IGk5MTVfcmVxdWVzdCAqcnE7CiAKLQlpZiAobGlzdF9lbXB0eSgmYi0+c2lnbmFsZXJzKSkK
KwlpZiAoIWIgfHwgbGlzdF9lbXB0eSgmYi0+c2lnbmFsZXJzKSkKIAkJcmV0dXJuOwogCiAJZHJt
X3ByaW50ZihwLCAiU2lnbmFsczpcbiIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2JyZWFkY3J1bWJzLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5l
ZDNkMWRlYWJmYmQKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9icmVhZGNydW1icy5oCkBAIC0wLDAgKzEsMzYgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVu
dGlmaWVyOiBNSVQgKi8KKy8qCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlv
bgorICovCisKKyNpZm5kZWYgX19JTlRFTF9CUkVBRENSVU1CU19fCisjZGVmaW5lIF9fSU5URUxf
QlJFQURDUlVNQlNfXworCisjaW5jbHVkZSA8bGludXgvaXJxX3dvcmsuaD4KKworI2luY2x1ZGUg
ImludGVsX2VuZ2luZV90eXBlcy5oIgorCitzdHJ1Y3QgZHJtX3ByaW50ZXI7CitzdHJ1Y3QgaTkx
NV9yZXF1ZXN0Oworc3RydWN0IGludGVsX2JyZWFkY3J1bWJzOworCitzdHJ1Y3QgaW50ZWxfYnJl
YWRjcnVtYnMgKgoraW50ZWxfYnJlYWRjcnVtYnNfY3JlYXRlKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmlycV9lbmdpbmUpOwordm9pZCBpbnRlbF9icmVhZGNydW1ic19mcmVlKHN0cnVjdCBpbnRl
bF9icmVhZGNydW1icyAqYik7CisKK3ZvaWQgaW50ZWxfYnJlYWRjcnVtYnNfcmVzZXQoc3RydWN0
IGludGVsX2JyZWFkY3J1bWJzICpiKTsKK3ZvaWQgaW50ZWxfYnJlYWRjcnVtYnNfcGFyayhzdHJ1
Y3QgaW50ZWxfYnJlYWRjcnVtYnMgKmIpOworCitzdGF0aWMgaW5saW5lIHZvaWQKK2ludGVsX2Vu
Z2luZV9zaWduYWxfYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQor
eworCWlycV93b3JrX3F1ZXVlKCZlbmdpbmUtPmJyZWFkY3J1bWJzLT5pcnFfd29yayk7Cit9CisK
K3ZvaWQgaW50ZWxfZW5naW5lX3ByaW50X2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVf
Y3MgKmVuZ2luZSwKKwkJCQkgICAgc3RydWN0IGRybV9wcmludGVyICpwKTsKKworYm9vbCBpOTE1
X3JlcXVlc3RfZW5hYmxlX2JyZWFkY3J1bWIoc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCk7
Cit2b2lkIGk5MTVfcmVxdWVzdF9jYW5jZWxfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0
ICpyZXF1ZXN0KTsKKworI2VuZGlmIC8qIF9fSU5URUxfQlJFQURDUlVNQlNfXyAqLwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnNfdHlwZXMuaCBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzX3R5cGVzLmgKbmV3IGZp
bGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi44ZTUzYjk5NDI2OTUKLS0tIC9kZXYv
bnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9icmVhZGNydW1ic190eXBl
cy5oCkBAIC0wLDAgKzEsNDcgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQgKi8K
Ky8qCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBJbnRlbCBDb3Jwb3JhdGlvbgorICovCisKKyNpZm5k
ZWYgX19JTlRFTF9CUkVBRENSVU1CU19UWVBFU19fCisjZGVmaW5lIF9fSU5URUxfQlJFQURDUlVN
QlNfVFlQRVNfXworCisjaW5jbHVkZSA8bGludXgvaXJxX3dvcmsuaD4KKyNpbmNsdWRlIDxsaW51
eC9saXN0Lmg+CisjaW5jbHVkZSA8bGludXgvc3BpbmxvY2suaD4KKyNpbmNsdWRlIDxsaW51eC90
eXBlcy5oPgorCisvKgorICogUmF0aGVyIHRoYW4gaGF2ZSBldmVyeSBjbGllbnQgd2FpdCB1cG9u
IGFsbCB1c2VyIGludGVycnVwdHMsCisgKiB3aXRoIHRoZSBoZXJkIHdha2luZyBhZnRlciBldmVy
eSBpbnRlcnJ1cHQgYW5kIGVhY2ggZG9pbmcgdGhlCisgKiBoZWF2eXdlaWdodCBzZXFubyBkYW5j
ZSwgd2UgZGVsZWdhdGUgdGhlIHRhc2sgKG9mIGJlaW5nIHRoZQorICogYm90dG9tLWhhbGYgb2Yg
dGhlIHVzZXIgaW50ZXJydXB0KSB0byB0aGUgZmlyc3QgY2xpZW50LiBBZnRlcgorICogZXZlcnkg
aW50ZXJydXB0LCB3ZSB3YWtlIHVwIG9uZSBjbGllbnQsIHdobyBkb2VzIHRoZSBoZWF2eXdlaWdo
dAorICogY29oZXJlbnQgc2Vxbm8gcmVhZCBhbmQgZWl0aGVyIGdvZXMgYmFjayB0byBzbGVlcCAo
aWYgaW5jb21wbGV0ZSksCisgKiBvciB3YWtlcyB1cCBhbGwgdGhlIGNvbXBsZXRlZCBjbGllbnRz
IGluIHBhcmFsbGVsLCBiZWZvcmUgdGhlbgorICogdHJhbnNmZXJyaW5nIHRoZSBib3R0b20taGFs
ZiBzdGF0dXMgdG8gdGhlIG5leHQgY2xpZW50IGluIHRoZSBxdWV1ZS4KKyAqCisgKiBDb21wYXJl
ZCB0byB3YWxraW5nIHRoZSBlbnRpcmUgbGlzdCBvZiB3YWl0ZXJzIGluIGEgc2luZ2xlIGRlZGlj
YXRlZAorICogYm90dG9tLWhhbGYsIHdlIHJlZHVjZSB0aGUgbGF0ZW5jeSBvZiB0aGUgZmlyc3Qg
d2FpdGVyIGJ5IGF2b2lkaW5nCisgKiBhIGNvbnRleHQgc3dpdGNoLCBidXQgaW5jdXIgYWRkaXRp
b25hbCBjb2hlcmVudCBzZXFubyByZWFkcyB3aGVuCisgKiBmb2xsb3dpbmcgdGhlIGNoYWluIG9m
IHJlcXVlc3QgYnJlYWRjcnVtYnMuIFNpbmNlIGl0IGlzIG1vc3QgbGlrZWx5CisgKiB0aGF0IHdl
IGhhdmUgYSBzaW5nbGUgY2xpZW50IHdhaXRpbmcgb24gZWFjaCBzZXFubywgdGhlbiByZWR1Y2lu
ZworICogdGhlIG92ZXJoZWFkIG9mIHdha2luZyB0aGF0IGNsaWVudCBpcyBtdWNoIHByZWZlcnJl
ZC4KKyAqLworc3RydWN0IGludGVsX2JyZWFkY3J1bWJzIHsKKwlzcGlubG9ja190IGlycV9sb2Nr
OyAvKiBwcm90ZWN0cyB0aGUgbGlzdHMgdXNlZCBpbiBoYXJkaXJxIGNvbnRleHQgKi8KKworCS8q
IE5vdCBhbGwgYnJlYWRjcnVtYnMgYXJlIGF0dGFjaGVkIHRvIHBoeXNpY2FsIEhXICovCisJc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqaXJxX2VuZ2luZTsKKworCXN0cnVjdCBsaXN0X2hlYWQgc2ln
bmFsZXJzOworCXN0cnVjdCBsaXN0X2hlYWQgc2lnbmFsZWRfcmVxdWVzdHM7CisKKwlzdHJ1Y3Qg
aXJxX3dvcmsgaXJxX3dvcms7IC8qIGZvciB1c2UgZnJvbSBpbnNpZGUgaXJxX2xvY2sgKi8KKwor
CXVuc2lnbmVkIGludCBpcnFfZW5hYmxlZDsKKworCWJvb2wgaXJxX2FybWVkOworfTsKKworI2Vu
ZGlmIC8qIF9fSU5URUxfQlJFQURDUlVNQlNfVFlQRVNfXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9lbmdpbmUuaAppbmRleCBmYWYwMGEzNTNlMjUuLjA4ZTJjMDAwZGNjMyAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKQEAgLTIyMywyMyArMjIzLDYgQEAgdm9p
ZCBpbnRlbF9lbmdpbmVfZ2V0X2luc3Rkb25lKGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdpbmVfY3Mg
KmVuZ2luZSwKIAogdm9pZCBpbnRlbF9lbmdpbmVfaW5pdF9leGVjbGlzdHMoc3RydWN0IGludGVs
X2VuZ2luZV9jcyAqZW5naW5lKTsKIAotdm9pZCBpbnRlbF9lbmdpbmVfaW5pdF9icmVhZGNydW1i
cyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwotdm9pZCBpbnRlbF9lbmdpbmVfZmlu
aV9icmVhZGNydW1icyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwotCi12b2lkIGlu
dGVsX2VuZ2luZV9kaXNhcm1fYnJlYWRjcnVtYnMoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5n
aW5lKTsKLQotc3RhdGljIGlubGluZSB2b2lkCi1pbnRlbF9lbmdpbmVfc2lnbmFsX2JyZWFkY3J1
bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKLXsKLQlpcnFfd29ya19xdWV1ZSgm
ZW5naW5lLT5icmVhZGNydW1icy5pcnFfd29yayk7Ci19Ci0KLXZvaWQgaW50ZWxfZW5naW5lX3Jl
c2V0X2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSk7Ci12b2lkIGlu
dGVsX2VuZ2luZV9maW5pX2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZSk7Ci0KLXZvaWQgaW50ZWxfZW5naW5lX3ByaW50X2JyZWFkY3J1bWJzKHN0cnVjdCBpbnRlbF9l
bmdpbmVfY3MgKmVuZ2luZSwKLQkJCQkgICAgc3RydWN0IGRybV9wcmludGVyICpwKTsKLQogc3Rh
dGljIGlubGluZSB1MzIgKl9fZ2VuOF9lbWl0X3BpcGVfY29udHJvbCh1MzIgKmJhdGNoLCB1MzIg
ZmxhZ3MwLCB1MzIgZmxhZ3MxLCB1MzIgb2Zmc2V0KQogewogCW1lbXNldChiYXRjaCwgMCwgNiAq
IHNpemVvZih1MzIpKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2VuZ2luZV9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMK
aW5kZXggZGQxYTQyYzRkMzQ0Li5jMjBhOTFjMTMxOGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2VuZ2luZV9jcy5jCkBAIC0yOCw2ICsyOCw3IEBACiAKICNpbmNsdWRlICJpOTE1
X2Rydi5oIgogCisjaW5jbHVkZSAiaW50ZWxfYnJlYWRjcnVtYnMuaCIKICNpbmNsdWRlICJpbnRl
bF9jb250ZXh0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZW5naW5lLmgiCiAjaW5jbHVkZSAiaW50ZWxf
ZW5naW5lX3BtLmgiCkBAIC03MDAsOCArNzAxLDEzIEBAIHN0YXRpYyBpbnQgZW5naW5lX3NldHVw
X2NvbW1vbihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJaWYgKGVycikKIAkJcmV0
dXJuIGVycjsKIAorCWVuZ2luZS0+YnJlYWRjcnVtYnMgPSBpbnRlbF9icmVhZGNydW1ic19jcmVh
dGUoZW5naW5lKTsKKwlpZiAoIWVuZ2luZS0+YnJlYWRjcnVtYnMpIHsKKwkJZXJyID0gLUVOT01F
TTsKKwkJZ290byBlcnJfc3RhdHVzOworCX0KKwogCWludGVsX2VuZ2luZV9pbml0X2FjdGl2ZShl
bmdpbmUsIEVOR0lORV9QSFlTSUNBTCk7Ci0JaW50ZWxfZW5naW5lX2luaXRfYnJlYWRjcnVtYnMo
ZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9leGVjbGlzdHMoZW5naW5lKTsKIAlpbnRlbF9l
bmdpbmVfaW5pdF9jbWRfcGFyc2VyKGVuZ2luZSk7CiAJaW50ZWxfZW5naW5lX2luaXRfX3BtKGVu
Z2luZSk7CkBAIC03MTYsNiArNzIyLDEwIEBAIHN0YXRpYyBpbnQgZW5naW5lX3NldHVwX2NvbW1v
bihzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJaW50ZWxfZW5naW5lX2luaXRfY3R4
X3dhKGVuZ2luZSk7CiAKIAlyZXR1cm4gMDsKKworZXJyX3N0YXR1czoKKwljbGVhbnVwX3N0YXR1
c19wYWdlKGVuZ2luZSk7CisJcmV0dXJuIGVycjsKIH0KIAogc3RydWN0IG1lYXN1cmVfYnJlYWRj
cnVtYiB7CkBAIC05MDIsOSArOTEyLDkgQEAgdm9pZCBpbnRlbF9lbmdpbmVfY2xlYW51cF9jb21t
b24oc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCXRhc2tsZXRfa2lsbCgmZW5naW5l
LT5leGVjbGlzdHMudGFza2xldCk7IC8qIGZsdXNoIHRoZSBjYWxsYmFjayAqLwogCiAJY2xlYW51
cF9zdGF0dXNfcGFnZShlbmdpbmUpOworCWludGVsX2JyZWFkY3J1bWJzX2ZyZWUoZW5naW5lLT5i
cmVhZGNydW1icyk7CiAKIAlpbnRlbF9lbmdpbmVfZmluaV9yZXRpcmUoZW5naW5lKTsKLQlpbnRl
bF9lbmdpbmVfZmluaV9icmVhZGNydW1icyhlbmdpbmUpOwogCWludGVsX2VuZ2luZV9jbGVhbnVw
X2NtZF9wYXJzZXIoZW5naW5lKTsKIAogCWlmIChlbmdpbmUtPmRlZmF1bHRfc3RhdGUpCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0uYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9wbS5jCmluZGV4IDhlYzNlZWNmM2UzOS4u
ZjdiMmUwN2UyMjI5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9l
bmdpbmVfcG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfcG0u
YwpAQCAtNiw2ICs2LDcgQEAKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAKKyNpbmNsdWRlICJp
bnRlbF9icmVhZGNydW1icy5oIgogI2luY2x1ZGUgImludGVsX2NvbnRleHQuaCIKICNpbmNsdWRl
ICJpbnRlbF9lbmdpbmUuaCIKICNpbmNsdWRlICJpbnRlbF9lbmdpbmVfaGVhcnRiZWF0LmgiCkBA
IC0yNDcsNyArMjQ4LDcgQEAgc3RhdGljIGludCBfX2VuZ2luZV9wYXJrKHN0cnVjdCBpbnRlbF93
YWtlcmVmICp3ZikKIAljYWxsX2lkbGVfYmFycmllcnMoZW5naW5lKTsgLyogY2xlYW51cCBhZnRl
ciB3ZWRnaW5nICovCiAKIAlpbnRlbF9lbmdpbmVfcGFya19oZWFydGJlYXQoZW5naW5lKTsKLQlp
bnRlbF9lbmdpbmVfZGlzYXJtX2JyZWFkY3J1bWJzKGVuZ2luZSk7CisJaW50ZWxfYnJlYWRjcnVt
YnNfcGFyayhlbmdpbmUtPmJyZWFkY3J1bWJzKTsKIAogCS8qIE11c3QgYmUgcmVzZXQgdXBvbiBp
ZGxpbmcsIG9yIHdlIG1heSBtaXNzIHRoZSBidXN5IHdha2V1cC4gKi8KIAlHRU1fQlVHX09OKGVu
Z2luZS0+ZXhlY2xpc3RzLnF1ZXVlX3ByaW9yaXR5X2hpbnQgIT0gSU5UX01JTik7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfdHlwZXMuaCBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oCmluZGV4IDhkZTkyZmQ3ZDM5
Mi4uYzQwMGFhYTIyODdiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9lbmdpbmVfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdp
bmVfdHlwZXMuaApAQCAtMjIsNiArMjIsNyBAQAogI2luY2x1ZGUgImk5MTVfcG11LmgiCiAjaW5j
bHVkZSAiaTkxNV9wcmlvbGlzdF90eXBlcy5oIgogI2luY2x1ZGUgImk5MTVfc2VsZnRlc3QuaCIK
KyNpbmNsdWRlICJpbnRlbF9icmVhZGNydW1ic190eXBlcy5oIgogI2luY2x1ZGUgImludGVsX3Nz
ZXUuaCIKICNpbmNsdWRlICJpbnRlbF90aW1lbGluZV90eXBlcy5oIgogI2luY2x1ZGUgImludGVs
X3VuY29yZS5oIgpAQCAtMzczLDM0ICszNzQsOCBAQCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzIHsK
IAkgKi8KIAlzdHJ1Y3QgZXdtYV9fZW5naW5lX2xhdGVuY3kgbGF0ZW5jeTsKIAotCS8qIFJhdGhl
ciB0aGFuIGhhdmUgZXZlcnkgY2xpZW50IHdhaXQgdXBvbiBhbGwgdXNlciBpbnRlcnJ1cHRzLAot
CSAqIHdpdGggdGhlIGhlcmQgd2FraW5nIGFmdGVyIGV2ZXJ5IGludGVycnVwdCBhbmQgZWFjaCBk
b2luZyB0aGUKLQkgKiBoZWF2eXdlaWdodCBzZXFubyBkYW5jZSwgd2UgZGVsZWdhdGUgdGhlIHRh
c2sgKG9mIGJlaW5nIHRoZQotCSAqIGJvdHRvbS1oYWxmIG9mIHRoZSB1c2VyIGludGVycnVwdCkg
dG8gdGhlIGZpcnN0IGNsaWVudC4gQWZ0ZXIKLQkgKiBldmVyeSBpbnRlcnJ1cHQsIHdlIHdha2Ug
dXAgb25lIGNsaWVudCwgd2hvIGRvZXMgdGhlIGhlYXZ5d2VpZ2h0Ci0JICogY29oZXJlbnQgc2Vx
bm8gcmVhZCBhbmQgZWl0aGVyIGdvZXMgYmFjayB0byBzbGVlcCAoaWYgaW5jb21wbGV0ZSksCi0J
ICogb3Igd2FrZXMgdXAgYWxsIHRoZSBjb21wbGV0ZWQgY2xpZW50cyBpbiBwYXJhbGxlbCwgYmVm
b3JlIHRoZW4KLQkgKiB0cmFuc2ZlcnJpbmcgdGhlIGJvdHRvbS1oYWxmIHN0YXR1cyB0byB0aGUg
bmV4dCBjbGllbnQgaW4gdGhlIHF1ZXVlLgotCSAqCi0JICogQ29tcGFyZWQgdG8gd2Fsa2luZyB0
aGUgZW50aXJlIGxpc3Qgb2Ygd2FpdGVycyBpbiBhIHNpbmdsZSBkZWRpY2F0ZWQKLQkgKiBib3R0
b20taGFsZiwgd2UgcmVkdWNlIHRoZSBsYXRlbmN5IG9mIHRoZSBmaXJzdCB3YWl0ZXIgYnkgYXZv
aWRpbmcKLQkgKiBhIGNvbnRleHQgc3dpdGNoLCBidXQgaW5jdXIgYWRkaXRpb25hbCBjb2hlcmVu
dCBzZXFubyByZWFkcyB3aGVuCi0JICogZm9sbG93aW5nIHRoZSBjaGFpbiBvZiByZXF1ZXN0IGJy
ZWFkY3J1bWJzLiBTaW5jZSBpdCBpcyBtb3N0IGxpa2VseQotCSAqIHRoYXQgd2UgaGF2ZSBhIHNp
bmdsZSBjbGllbnQgd2FpdGluZyBvbiBlYWNoIHNlcW5vLCB0aGVuIHJlZHVjaW5nCi0JICogdGhl
IG92ZXJoZWFkIG9mIHdha2luZyB0aGF0IGNsaWVudCBpcyBtdWNoIHByZWZlcnJlZC4KLQkgKi8K
LQlzdHJ1Y3QgaW50ZWxfYnJlYWRjcnVtYnMgewotCQlzcGlubG9ja190IGlycV9sb2NrOwotCQlz
dHJ1Y3QgbGlzdF9oZWFkIHNpZ25hbGVyczsKLQotCQlzdHJ1Y3QgbGlzdF9oZWFkIHNpZ25hbGVk
X3JlcXVlc3RzOwotCi0JCXN0cnVjdCBpcnFfd29yayBpcnFfd29yazsgLyogZm9yIHVzZSBmcm9t
IGluc2lkZSBpcnFfbG9jayAqLwotCi0JCXVuc2lnbmVkIGludCBpcnFfZW5hYmxlZDsKLQotCQli
b29sIGlycV9hcm1lZDsKLQl9IGJyZWFkY3J1bWJzOworCS8qIEtlZXAgdHJhY2sgb2YgYWxsIHRo
ZSBzZXFubyB1c2VkLCBhIHRyYWlsIG9mIGJyZWFkY3J1bWJzICovCisJc3RydWN0IGludGVsX2Jy
ZWFkY3J1bWJzICpicmVhZGNydW1iczsKIAogCXN0cnVjdCBpbnRlbF9lbmdpbmVfcG11IHsKIAkJ
LyoqCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9pcnEuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2lycS5jCmluZGV4IGIwNWRhNjhlNTJm
NC4uMjU3MDYzYTU3MTAxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRl
bF9ndF9pcnEuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9ndF9pcnEuYwpA
QCAtOCw2ICs4LDcgQEAKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9p
cnEuaCIKKyNpbmNsdWRlICJpbnRlbF9icmVhZGNydW1icy5oIgogI2luY2x1ZGUgImludGVsX2d0
LmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3RfaXJxLmgiCiAjaW5jbHVkZSAiaW50ZWxfdW5jb3JlLmgi
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCmluZGV4IDkwNGU5YjhiY2JmNi4uMDNjYWM5
MzAzZGZjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYwpAQCAtMTM3LDYgKzEzNyw3
IEBACiAjaW5jbHVkZSAiaTkxNV9wZXJmLmgiCiAjaW5jbHVkZSAiaTkxNV90cmFjZS5oIgogI2lu
Y2x1ZGUgImk5MTVfdmdwdS5oIgorI2luY2x1ZGUgImludGVsX2JyZWFkY3J1bWJzLmgiCiAjaW5j
bHVkZSAiaW50ZWxfY29udGV4dC5oIgogI2luY2x1ZGUgImludGVsX2VuZ2luZV9wbS5oIgogI2lu
Y2x1ZGUgImludGVsX2d0LmgiCkBAIC00MTE5LDcgKzQxMjAsNyBAQCBzdGF0aWMgaW50IGV4ZWNs
aXN0c19yZXN1bWUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogewogCWludGVsX21v
Y3NfaW5pdF9lbmdpbmUoZW5naW5lKTsKIAotCWludGVsX2VuZ2luZV9yZXNldF9icmVhZGNydW1i
cyhlbmdpbmUpOworCWludGVsX2JyZWFkY3J1bWJzX3Jlc2V0KGVuZ2luZS0+YnJlYWRjcnVtYnMp
OwogCiAJaWYgKEdFTV9TSE9XX0RFQlVHKCkgJiYgdW5leHBlY3RlZF9zdGFydGluZ19zdGF0ZShl
bmdpbmUpKSB7CiAJCXN0cnVjdCBkcm1fcHJpbnRlciBwID0gZHJtX2RlYnVnX3ByaW50ZXIoX19m
dW5jX18pOwpAQCAtNTcxNSw5ICs1NzE2LDcgQEAgaW50ZWxfZXhlY2xpc3RzX2NyZWF0ZV92aXJ0
dWFsKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKipzaWJsaW5ncywKIAlzbnByaW50Zih2ZS0+YmFz
ZS5uYW1lLCBzaXplb2YodmUtPmJhc2UubmFtZSksICJ2aXJ0dWFsIik7CiAKIAlpbnRlbF9lbmdp
bmVfaW5pdF9hY3RpdmUoJnZlLT5iYXNlLCBFTkdJTkVfVklSVFVBTCk7Ci0JaW50ZWxfZW5naW5l
X2luaXRfYnJlYWRjcnVtYnMoJnZlLT5iYXNlKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9leGVjbGlz
dHMoJnZlLT5iYXNlKTsKLQl2ZS0+YmFzZS5icmVhZGNydW1icy5pcnFfYXJtZWQgPSB0cnVlOyAv
KiBmYWtlIEhXLCB1c2VkIGZvciBpcnFfd29yayAqLwogCiAJdmUtPmJhc2UuY29wcyA9ICZ2aXJ0
dWFsX2NvbnRleHRfb3BzOwogCXZlLT5iYXNlLnJlcXVlc3RfYWxsb2MgPSBleGVjbGlzdHNfcmVx
dWVzdF9hbGxvYzsKQEAgLTU3MzQsNiArNTczMywxMiBAQCBpbnRlbF9leGVjbGlzdHNfY3JlYXRl
X3ZpcnR1YWwoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqKnNpYmxpbmdzLAogCiAJaW50ZWxfY29u
dGV4dF9pbml0KCZ2ZS0+Y29udGV4dCwgJnZlLT5iYXNlKTsKIAorCXZlLT5iYXNlLmJyZWFkY3J1
bWJzID0gaW50ZWxfYnJlYWRjcnVtYnNfY3JlYXRlKE5VTEwpOworCWlmICghdmUtPmJhc2UuYnJl
YWRjcnVtYnMpIHsKKwkJZXJyID0gLUVOT01FTTsKKwkJZ290byBlcnJfcHV0OworCX0KKwogCWZv
ciAobiA9IDA7IG4gPCBjb3VudDsgbisrKSB7CiAJCXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKnNp
YmxpbmcgPSBzaWJsaW5nc1tuXTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfcmVzZXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMK
aW5kZXggNDZhNWNlZmZjMjJmLi5hYzM2YjY3ZmI0NmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfcmVzZXQuYwpAQCAtMTUsNiArMTUsNyBAQAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAj
aW5jbHVkZSAiaTkxNV9ncHVfZXJyb3IuaCIKICNpbmNsdWRlICJpOTE1X2lycS5oIgorI2luY2x1
ZGUgImludGVsX2JyZWFkY3J1bWJzLmgiCiAjaW5jbHVkZSAiaW50ZWxfZW5naW5lX3BtLmgiCiAj
aW5jbHVkZSAiaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJpbnRlbF9ndF9wbS5oIgpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcmluZ19zdWJtaXNzaW9uLmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1Ym1pc3Npb24uYwppbmRleCA5NDkxNWY2
Njg3MTUuLjE4NmFhMmQzYTgzZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfcmluZ19zdWJtaXNzaW9uLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfcmluZ19zdWJtaXNzaW9uLmMKQEAgLTMyLDYgKzMyLDcgQEAKICNpbmNsdWRlICJnZW42X3Bw
Z3R0LmgiCiAjaW5jbHVkZSAiZ2VuN19yZW5kZXJjbGVhci5oIgogI2luY2x1ZGUgImk5MTVfZHJ2
LmgiCisjaW5jbHVkZSAiaW50ZWxfYnJlYWRjcnVtYnMuaCIKICNpbmNsdWRlICJpbnRlbF9jb250
ZXh0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJpbnRlbF9yZXNldC5oIgpA
QCAtMjU1LDcgKzI1Niw3IEBAIHN0YXRpYyBpbnQgeGNzX3Jlc3VtZShzdHJ1Y3QgaW50ZWxfZW5n
aW5lX2NzICplbmdpbmUpCiAJZWxzZQogCQlyaW5nX3NldHVwX3N0YXR1c19wYWdlKGVuZ2luZSk7
CiAKLQlpbnRlbF9lbmdpbmVfcmVzZXRfYnJlYWRjcnVtYnMoZW5naW5lKTsKKwlpbnRlbF9icmVh
ZGNydW1ic19yZXNldChlbmdpbmUtPmJyZWFkY3J1bWJzKTsKIAogCS8qIEVuZm9yY2Ugb3JkZXJp
bmcgYnkgcmVhZGluZyBIRUFEIHJlZ2lzdGVyIGJhY2sgKi8KIAlFTkdJTkVfUE9TVElOR19SRUFE
KGVuZ2luZSwgUklOR19IRUFEKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX3Jwcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfcnBzLmMKaW5kZXgg
OTdiYTE0YWQ1MmU0Li5lNmEwMGVlYTA2MzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX3Jwcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jw
cy5jCkBAIC03LDYgKzcsNyBAQAogI2luY2x1ZGUgPGRybS9pOTE1X2RybS5oPgogCiAjaW5jbHVk
ZSAiaTkxNV9kcnYuaCIKKyNpbmNsdWRlICJpbnRlbF9icmVhZGNydW1icy5oIgogI2luY2x1ZGUg
ImludGVsX2d0LmgiCiAjaW5jbHVkZSAiaW50ZWxfZ3RfY2xvY2tfdXRpbHMuaCIKICNpbmNsdWRl
ICJpbnRlbF9ndF9pcnEuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21v
Y2tfZW5naW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9tb2NrX2VuZ2luZS5jCmluZGV4
IDA2MzAzYmE5OGMxOS4uZDE5NzFmZmRjYTQyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9tb2NrX2VuZ2luZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tf
ZW5naW5lLmMKQEAgLTI2MSwxMSArMjYxLDEyIEBAIHN0YXRpYyB2b2lkIG1vY2tfZW5naW5lX3Jl
bGVhc2Uoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogCiAJR0VNX0JVR19PTih0aW1l
cl9wZW5kaW5nKCZtb2NrLT5od19kZWxheSkpOwogCisJaW50ZWxfYnJlYWRjcnVtYnNfZnJlZShl
bmdpbmUtPmJyZWFkY3J1bWJzKTsKKwogCWludGVsX2NvbnRleHRfdW5waW4oZW5naW5lLT5rZXJu
ZWxfY29udGV4dCk7CiAJaW50ZWxfY29udGV4dF9wdXQoZW5naW5lLT5rZXJuZWxfY29udGV4dCk7
CiAKIAlpbnRlbF9lbmdpbmVfZmluaV9yZXRpcmUoZW5naW5lKTsKLQlpbnRlbF9lbmdpbmVfZmlu
aV9icmVhZGNydW1icyhlbmdpbmUpOwogfQogCiBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICptb2Nr
X2VuZ2luZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKQEAgLTMyMywxMSArMzI0LDE0
IEBAIGludCBtb2NrX2VuZ2luZV9pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkK
IAlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2U7CiAKIAlpbnRlbF9lbmdpbmVfaW5pdF9hY3RpdmUo
ZW5naW5lLCBFTkdJTkVfTU9DSyk7Ci0JaW50ZWxfZW5naW5lX2luaXRfYnJlYWRjcnVtYnMoZW5n
aW5lKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9leGVjbGlzdHMoZW5naW5lKTsKIAlpbnRlbF9lbmdp
bmVfaW5pdF9fcG0oZW5naW5lKTsKIAlpbnRlbF9lbmdpbmVfaW5pdF9yZXRpcmUoZW5naW5lKTsK
IAorCWVuZ2luZS0+YnJlYWRjcnVtYnMgPSBpbnRlbF9icmVhZGNydW1ic19jcmVhdGUoTlVMTCk7
CisJaWYgKCFlbmdpbmUtPmJyZWFkY3J1bWJzKQorCQlyZXR1cm4gLUVOT01FTTsKKwogCWNlID0g
Y3JlYXRlX2tlcm5lbF9jb250ZXh0KGVuZ2luZSk7CiAJaWYgKElTX0VSUihjZSkpCiAJCWdvdG8g
ZXJyX2JyZWFkY3J1bWJzOwpAQCAtMzM5LDcgKzM0Myw3IEBAIGludCBtb2NrX2VuZ2luZV9pbml0
KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAlyZXR1cm4gMDsKIAogZXJyX2JyZWFk
Y3J1bWJzOgotCWludGVsX2VuZ2luZV9maW5pX2JyZWFkY3J1bWJzKGVuZ2luZSk7CisJaW50ZWxf
YnJlYWRjcnVtYnNfZnJlZShlbmdpbmUtPmJyZWFkY3J1bWJzKTsKIAlyZXR1cm4gLUVOT01FTTsK
IH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKaW5kZXggMWZhNjc3MDBkOGY0Li5mMTEzZmU0NDU3
MmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfaXJxLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9pcnEuYwpAQCAtNDEsNiArNDEsNyBAQAogI2luY2x1ZGUg
ImRpc3BsYXkvaW50ZWxfbHBlX2F1ZGlvLmgiCiAjaW5jbHVkZSAiZGlzcGxheS9pbnRlbF9wc3Iu
aCIKIAorI2luY2x1ZGUgImd0L2ludGVsX2JyZWFkY3J1bWJzLmgiCiAjaW5jbHVkZSAiZ3QvaW50
ZWxfZ3QuaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndF9pcnEuaCIKICNpbmNsdWRlICJndC9pbnRl
bF9ndF9wbV9pcnEuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVx
dWVzdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXF1ZXN0LmMKaW5kZXggMGNmMmEx
MGEyNGYxLi4zYjEyMWZhMzhjNjAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcmVxdWVzdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jCkBA
IC0zMSw2ICszMSw3IEBACiAjaW5jbHVkZSA8bGludXgvc2NoZWQvc2lnbmFsLmg+CiAKICNpbmNs
dWRlICJnZW0vaTkxNV9nZW1fY29udGV4dC5oIgorI2luY2x1ZGUgImd0L2ludGVsX2JyZWFkY3J1
bWJzLmgiCiAjaW5jbHVkZSAiZ3QvaW50ZWxfY29udGV4dC5oIgogI2luY2x1ZGUgImd0L2ludGVs
X3JpbmcuaCIKICNpbmNsdWRlICJndC9pbnRlbF9ycHMuaCIKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9y
ZXF1ZXN0LmgKaW5kZXggZmMxODM3OGM2ODVkLi4xNmI3MjEwODAxOTUgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVxdWVzdC5oCkBAIC0zNjEsMTAgKzM2MSw2IEBAIHZvaWQgaTkxNV9yZXF1ZXN0
X3N1Ym1pdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KTsKIHZvaWQgX19pOTE1X3JlcXVl
c3RfdW5zdWJtaXQoc3RydWN0IGk5MTVfcmVxdWVzdCAqcmVxdWVzdCk7CiB2b2lkIGk5MTVfcmVx
dWVzdF91bnN1Ym1pdChzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KTsKIAotLyogTm90ZTog
cGFydCBvZiB0aGUgaW50ZWxfYnJlYWRjcnVtYnMgZmFtaWx5ICovCi1ib29sIGk5MTVfcmVxdWVz
dF9lbmFibGVfYnJlYWRjcnVtYihzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpyZXF1ZXN0KTsKLXZvaWQg
aTkxNV9yZXF1ZXN0X2NhbmNlbF9icmVhZGNydW1iKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJlcXVl
c3QpOwotCiBsb25nIGk5MTVfcmVxdWVzdF93YWl0KHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLAog
CQkgICAgICAgdW5zaWduZWQgaW50IGZsYWdzLAogCQkgICAgICAgbG9uZyB0aW1lb3V0KQotLSAK
Mi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJ
bnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

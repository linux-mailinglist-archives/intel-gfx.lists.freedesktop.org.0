Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DF45A426FC
	for <lists+intel-gfx@lfdr.de>; Wed, 12 Jun 2019 15:08:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5077789381;
	Wed, 12 Jun 2019 13:08:08 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A586089381
 for <intel-gfx@lists.freedesktop.org>; Wed, 12 Jun 2019 13:08:06 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 12 Jun 2019 06:08:05 -0700
X-ExtLoop1: 1
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga008.jf.intel.com with SMTP; 12 Jun 2019 06:08:02 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Wed, 12 Jun 2019 16:08:01 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 12 Jun 2019 16:07:58 +0300
Message-Id: <20190612130801.2085-1-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 1/4] drm/i915: Don't clobber M/N values during
 fastset check
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Blubberbub@protonmail.com, stable@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCldl
J3JlIG5vdyBjYWxsaW5nIGludGVsX3BpcGVfY29uZmlnX2NvbXBhcmUoLi4uLCB0cnVlKSB1bmNv
ZGl0aW9uYWxseQp3aGljaCBtZWFucyB3ZSdyZSBhbHdheXMgZ29pbmcgY2xvYmJlciB0aGUgY2Fs
Y3VsYXRlZCBNL04gdmFsdWVzIHdpdGgKdGhlIG9sZCB2YWx1ZXMgaWYgdGhlIGZ1enp5IE0vTiBj
aGVjayBwYXNzZXMuIFRoYXQgY2F1c2VzIHByb2JsZW1zCmJlY2F1c2UgdGhlIGZ1enp5IGNoZWNr
IGFsbG93cyBmb3IgYSBodWdlIGRpZmZlcmVuY2UgaW4gdGhlIHZhbHVlcy4KCkknbSBhY3R1YWxs
eSB0ZW1wdGVkIHRvIGp1c3QgbWFrZSB0aGUgTS9OIGNoZWNrcyBleGFjdCwgYnV0IHRoYXQgbWln
aHQKcHJldmVudCBmYXN0Ym9vdCBmcm9tIGtpY2tpbmcgaW4gd2hlbiBwZW9wbGUgd2FudCBpdC4g
U28gZm9yIG5vdyBsZXQncwpvdmVyd3JpdGUgdGhlIGNvbXB1dGVkIHZhbHVlcyB3aXRoIHRoZSBv
bGQgdmFsdWVzIG9ubHkgaWYgZGVjaWRlIHRvIHNraXAKdGhlIG1vZGVzZXQuCgpDYzogc3RhYmxl
QHZnZXIua2VybmVsLm9yZwpDYzogQmx1YmJlcmJ1YkBwcm90b25tYWlsLmNvbQpDYzogTWFhcnRl
biBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KQ2M6IEhhbnMg
ZGUgR29lZGUgPGhkZWdvZWRlQHJlZGhhdC5jb20+ClRlc3RlZC1ieTogQmx1YmJlcmJ1YkBwcm90
b25tYWlsLmNvbQpCdWd6aWxsYTogaHR0cHM6Ly9idWdzLmZyZWVkZXNrdG9wLm9yZy9zaG93X2J1
Zy5jZ2k/aWQ9MTEwNzgyCkZpeGVzOiBkMTlmOTU4ZGIyM2MgKCJkcm0vaTkxNTogRW5hYmxlIGZh
c3RzZXQgZm9yIG5vbi1ib290IG1vZGVzZXRzLiIpClNpZ25lZC1vZmYtYnk6IFZpbGxlIFN5cmrD
pGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvaW50ZWxfZGlzcGxheS5jIHwgMzUgKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLQog
MSBmaWxlIGNoYW5nZWQsIDI3IGluc2VydGlvbnMoKyksIDggZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaW50ZWxfZGlzcGxheS5jCmluZGV4IDFiMWRkYjQ4Y2E3YS4uNzNiM2U5MmI3ZWQ1
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kaXNwbGF5LmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZGlzcGxheS5jCkBAIC0xMjI5OSw5ICsxMjI5OSw2
IEBAIGludGVsX2NvbXBhcmVfbGlua19tX24oY29uc3Qgc3RydWN0IGludGVsX2xpbmtfbV9uICpt
X24sCiAJCQkgICAgICBtMl9uMi0+Z21jaF9tLCBtMl9uMi0+Z21jaF9uLCAhYWRqdXN0KSAmJgog
CSAgICBpbnRlbF9jb21wYXJlX21fbihtX24tPmxpbmtfbSwgbV9uLT5saW5rX24sCiAJCQkgICAg
ICBtMl9uMi0+bGlua19tLCBtMl9uMi0+bGlua19uLCAhYWRqdXN0KSkgewotCQlpZiAoYWRqdXN0
KQotCQkJKm0yX24yID0gKm1fbjsKLQogCQlyZXR1cm4gdHJ1ZTsKIAl9CiAKQEAgLTEzNDMzLDYg
KzEzNDMwLDMyIEBAIHN0YXRpYyBpbnQgY2FsY193YXRlcm1hcmtfZGF0YShzdHJ1Y3QgaW50ZWxf
YXRvbWljX3N0YXRlICpzdGF0ZSkKIAlyZXR1cm4gMDsKIH0KIAorc3RhdGljIHZvaWQgaW50ZWxf
Y3J0Y19jaGVja19mYXN0c2V0KHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0
ZSwKKwkJCQkgICAgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpuZXdfY3J0Y19zdGF0ZSkKK3sK
KwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPQorCQl0b19pOTE1KG5ld19jcnRj
X3N0YXRlLT5iYXNlLmNydGMtPmRldik7CisKKwlpZiAoIWludGVsX3BpcGVfY29uZmlnX2NvbXBh
cmUoZGV2X3ByaXYsIG9sZF9jcnRjX3N0YXRlLAorCQkJCSAgICAgICBuZXdfY3J0Y19zdGF0ZSwg
dHJ1ZSkpCisJCXJldHVybjsKKworCW5ld19jcnRjX3N0YXRlLT5iYXNlLm1vZGVfY2hhbmdlZCA9
IGZhbHNlOworCW5ld19jcnRjX3N0YXRlLT51cGRhdGVfcGlwZSA9IHRydWU7CisKKwkvKgorCSAq
IElmIHdlJ3JlIG5vdCBkb2luZyB0aGUgZnVsbCBtb2Rlc2V0IHdlIHdhbnQgdG8KKwkgKiBrZWVw
IHRoZSBjdXJyZW50IE0vTiB2YWx1ZXMgYXMgdGhleSBtYXkgYmUKKwkgKiBzdWZmaWNpZW50bHkg
ZGlmZmVyZW50IHRvIHRoZSBjb21wdXRlZCB2YWx1ZXMKKwkgKiB0byBjYXVzZSBwcm9ibGVtcy4K
KwkgKgorCSAqIEZJWE1FOiBzaG91bGQgcmVhbGx5IGNvcHkgbW9yZSBmdXp6eSBzdGF0ZSBoZXJl
CisJICovCisJbmV3X2NydGNfc3RhdGUtPmZkaV9tX24gPSBvbGRfY3J0Y19zdGF0ZS0+ZmRpX21f
bjsKKwluZXdfY3J0Y19zdGF0ZS0+ZHBfbV9uID0gb2xkX2NydGNfc3RhdGUtPmRwX21fbjsKKwlu
ZXdfY3J0Y19zdGF0ZS0+ZHBfbTJfbjIgPSBvbGRfY3J0Y19zdGF0ZS0+ZHBfbTJfbjI7Cit9CisK
IC8qKgogICogaW50ZWxfYXRvbWljX2NoZWNrIC0gdmFsaWRhdGUgc3RhdGUgb2JqZWN0CiAgKiBA
ZGV2OiBkcm0gZGV2aWNlCkBAIC0xMzQ3NCwxMSArMTM0OTcsNyBAQCBzdGF0aWMgaW50IGludGVs
X2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQlpZiAocmV0KQogCQkJZ290
byBmYWlsOwogCi0JCWlmIChpbnRlbF9waXBlX2NvbmZpZ19jb21wYXJlKGRldl9wcml2LCBvbGRf
Y3J0Y19zdGF0ZSwKLQkJCQkJICAgICAgbmV3X2NydGNfc3RhdGUsIHRydWUpKSB7Ci0JCQluZXdf
Y3J0Y19zdGF0ZS0+YmFzZS5tb2RlX2NoYW5nZWQgPSBmYWxzZTsKLQkJCW5ld19jcnRjX3N0YXRl
LT51cGRhdGVfcGlwZSA9IHRydWU7Ci0JCX0KKwkJaW50ZWxfY3J0Y19jaGVja19mYXN0c2V0KG9s
ZF9jcnRjX3N0YXRlLCBuZXdfY3J0Y19zdGF0ZSk7CiAKIAkJaWYgKG5lZWRzX21vZGVzZXQoJm5l
d19jcnRjX3N0YXRlLT5iYXNlKSkKIAkJCWFueV9tcyA9IHRydWU7Ci0tIAoyLjIxLjAKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWls
aW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

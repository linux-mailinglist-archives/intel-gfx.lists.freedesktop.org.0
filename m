Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AAF1528DC2
	for <lists+intel-gfx@lfdr.de>; Fri, 24 May 2019 01:31:39 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E17AD6E08A;
	Thu, 23 May 2019 23:31:34 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EBEB56E083
 for <intel-gfx@lists.freedesktop.org>; Thu, 23 May 2019 23:31:33 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 23 May 2019 16:31:34 -0700
X-ExtLoop1: 1
Received: from irvmail001.ir.intel.com ([163.33.26.43])
 by fmsmga006.fm.intel.com with ESMTP; 23 May 2019 16:31:32 -0700
Received: from mwajdecz-MOBL1.ger.corp.intel.com
 (mwajdecz-mobl1.ger.corp.intel.com [10.249.139.89])
 by irvmail001.ir.intel.com (8.14.3/8.13.6/MailSET/Hub) with ESMTP id
 x4NNVN0d023503; Fri, 24 May 2019 00:31:31 +0100
From: Michal Wajdeczko <michal.wajdeczko@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 23 May 2019 23:30:33 +0000
Message-Id: <20190523233049.28020-7-michal.wajdeczko@intel.com>
X-Mailer: git-send-email 2.21.0.windows.1
In-Reply-To: <20190523233049.28020-1-michal.wajdeczko@intel.com>
References: <20190523233049.28020-1-michal.wajdeczko@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v4 06/22] drm/i915/guc: Update suspend/resume
 protocol
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TmV3IEd1QyBmaXJtd2FyZXMgdXNlIHVwZGF0ZWQgc2xlZXAgc3RhdHVzIGRlZmluaXRpb25zLgpU
aGUgcG9sbGluZyBvbiBzY3JhdGNoIHJlZ2lzdGVyIDE0IGlzIGFsc28gbm93IHJlcXVpcmVkIG9u
bHkgb24gc3VzcGVuZAphbmQgdGhlcmUgaXMgbm8gbmVlZCB0byBwcm92aWRlIHRoZSBzaGFyZWQg
cGFnZS4KCnYyOiBpbmNsdWRlIGNoYW5nZXMgZm9yIHBvbGxpbmcgYW5kIHNoYXJlZCBwYWdlCgpT
aWduZWQtb2ZmLWJ5OiBNaWNoYWwgV2FqZGVjemtvIDxtaWNoYWwud2FqZGVjemtvQGludGVsLmNv
bT4KU2lnbmVkLW9mZi1ieTogRGFuaWVsZSBDZXJhb2xvIFNwdXJpbyA8ZGFuaWVsZS5jZXJhb2xv
c3B1cmlvQGludGVsLmNvbT4KQ2M6IEpvb25hcyBMYWh0aW5lbiA8am9vbmFzLmxhaHRpbmVuQGxp
bnV4LmludGVsLmNvbT4KQ2M6IEpvaG4gU3BvdHN3b29kIDxqb2huLmEuc3BvdHN3b29kQGludGVs
LmNvbT4KUmV2aWV3ZWQtYnk6IEpvaG4gU3BvdHN3b29kIDxqb2huLmEuc3BvdHN3b29kQGludGVs
LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWMuYyAgICAgIHwgNTAgKysr
KysrKysrKystLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNf
ZndpZi5oIHwgIDYgKystLQogMiBmaWxlcyBjaGFuZ2VkLCAyNCBpbnNlcnRpb25zKCspLCAzMiBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Yy5jCmluZGV4IDI5NTEzZTNjZTExOC4u
NjBlNjQ2M2EzYWFjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWMu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWMuYwpAQCAtNTM4LDI1ICs1Mzgs
MzMgQEAgaW50IGludGVsX2d1Y19hdXRoX2h1YyhzdHJ1Y3QgaW50ZWxfZ3VjICpndWMsIHUzMiBy
c2Ffb2Zmc2V0KQogCXJldHVybiBpbnRlbF9ndWNfc2VuZChndWMsIGFjdGlvbiwgQVJSQVlfU0la
RShhY3Rpb24pKTsKIH0KIAotLyoKLSAqIFRoZSBFTlRFUi9FWElUX1NfU1RBVEUgYWN0aW9ucyBx
dWV1ZSB0aGUgc2F2ZS9yZXN0b3JlIG9wZXJhdGlvbiBpbiBHdUMgRlcgYW5kCi0gKiB0aGVuIHJl
dHVybiwgc28gd2FpdGluZyBvbiB0aGUgSDJHIGlzIG5vdCBlbm91Z2ggdG8gZ3VhcmFudGVlIEd1
QyBpcyBkb25lLgotICogV2hlbiBhbGwgdGhlIHByb2Nlc3NpbmcgaXMgZG9uZSwgR3VDIHdyaXRl
cyBJTlRFTF9HVUNfU0xFRVBfU1RBVEVfU1VDQ0VTUyB0bwotICogc2NyYXRjaCByZWdpc3RlciAx
NCwgc28gd2UgY2FuIHBvbGwgb24gdGhhdC4gTm90ZSB0aGF0IEd1QyBkb2VzIG5vdCBlbnN1cmUK
LSAqIHRoYXQgdGhlIHZhbHVlIGluIHRoZSByZWdpc3RlciBpcyBkaWZmZXJlbnQgZnJvbQotICog
SU5URUxfR1VDX1NMRUVQX1NUQVRFX1NVQ0NFU1Mgd2hpbGUgdGhlIGFjdGlvbiBpcyBpbiBwcm9n
cmVzcyBzbyB3ZSBuZWVkIHRvCi0gKiB0YWtlIGNhcmUgb2YgdGhhdCBvdXJzZWx2ZXMgYXMgd2Vs
bC4KKy8qKgorICogaW50ZWxfZ3VjX3N1c3BlbmQoKSAtIG5vdGlmeSBHdUMgZW50ZXJpbmcgc3Vz
cGVuZCBzdGF0ZQorICogQGd1YzoJdGhlIGd1YwogICovCi1zdGF0aWMgaW50IGd1Y19zbGVlcF9z
dGF0ZV9hY3Rpb24oc3RydWN0IGludGVsX2d1YyAqZ3VjLAotCQkJCSAgY29uc3QgdTMyICphY3Rp
b24sIHUzMiBsZW4pCitpbnQgaW50ZWxfZ3VjX3N1c3BlbmQoc3RydWN0IGludGVsX2d1YyAqZ3Vj
KQogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IGd1Y190b19pOTE1KGd1
Yyk7CiAJaW50IHJldDsKIAl1MzIgc3RhdHVzOworCXUzMiBhY3Rpb25bXSA9IHsKKwkJSU5URUxf
R1VDX0FDVElPTl9FTlRFUl9TX1NUQVRFLAorCQlHVUNfUE9XRVJfRDEsIC8qIGFueSB2YWx1ZSBn
cmVhdGVyIHRoYW4gR1VDX1BPV0VSX0QwICovCisJfTsKKworCS8qCisJICogVGhlIEVOVEVSX1Nf
U1RBVEUgYWN0aW9uIHF1ZXVlcyB0aGUgc2F2ZS9yZXN0b3JlIG9wZXJhdGlvbiBpbiBHdUMgRlcK
KwkgKiBhbmQgdGhlbiByZXR1cm5zLCBzbyB3YWl0aW5nIG9uIHRoZSBIMkcgaXMgbm90IGVub3Vn
aCB0byBndWFyYW50ZWUKKwkgKiBHdUMgaXMgZG9uZS4gV2hlbiBhbGwgdGhlIHByb2Nlc3Npbmcg
aXMgZG9uZSwgR3VDIHdyaXRlcworCSAqIElOVEVMX0dVQ19TTEVFUF9TVEFURV9TVUNDRVNTIHRv
IHNjcmF0Y2ggcmVnaXN0ZXIgMTQsIHNvIHdlIGNhbiBwb2xsCisJICogb24gdGhhdC4gTm90ZSB0
aGF0IEd1QyBkb2VzIG5vdCBlbnN1cmUgdGhhdCB0aGUgdmFsdWUgaW4gdGhlIHJlZ2lzdGVyCisJ
ICogaXMgZGlmZmVyZW50IGZyb20gSU5URUxfR1VDX1NMRUVQX1NUQVRFX1NVQ0NFU1Mgd2hpbGUg
dGhlIGFjdGlvbiBpcworCSAqIGluIHByb2dyZXNzIHNvIHdlIG5lZWQgdG8gdGFrZSBjYXJlIG9m
IHRoYXQgb3Vyc2VsdmVzIGFzIHdlbGwuCisJICovCiAKIAlJOTE1X1dSSVRFKFNPRlRfU0NSQVRD
SCgxNCksIElOVEVMX0dVQ19TTEVFUF9TVEFURV9JTlZBTElEX01BU0spOwogCi0JcmV0ID0gaW50
ZWxfZ3VjX3NlbmQoZ3VjLCBhY3Rpb24sIGxlbik7CisJcmV0ID0gaW50ZWxfZ3VjX3NlbmQoZ3Vj
LCBhY3Rpb24sIEFSUkFZX1NJWkUoYWN0aW9uKSk7CiAJaWYgKHJldCkKIAkJcmV0dXJuIHJldDsK
IApAQCAtNTc2LDIxICs1ODQsNiBAQCBzdGF0aWMgaW50IGd1Y19zbGVlcF9zdGF0ZV9hY3Rpb24o
c3RydWN0IGludGVsX2d1YyAqZ3VjLAogCXJldHVybiAwOwogfQogCi0vKioKLSAqIGludGVsX2d1
Y19zdXNwZW5kKCkgLSBub3RpZnkgR3VDIGVudGVyaW5nIHN1c3BlbmQgc3RhdGUKLSAqIEBndWM6
CXRoZSBndWMKLSAqLwotaW50IGludGVsX2d1Y19zdXNwZW5kKHN0cnVjdCBpbnRlbF9ndWMgKmd1
YykKLXsKLQl1MzIgZGF0YVtdID0gewotCQlJTlRFTF9HVUNfQUNUSU9OX0VOVEVSX1NfU1RBVEUs
Ci0JCUdVQ19QT1dFUl9EMSwgLyogYW55IHZhbHVlIGdyZWF0ZXIgdGhhbiBHVUNfUE9XRVJfRDAg
Ki8KLQkJaW50ZWxfZ3VjX2dndHRfb2Zmc2V0KGd1YywgZ3VjLT5zaGFyZWRfZGF0YSkKLQl9Owot
Ci0JcmV0dXJuIGd1Y19zbGVlcF9zdGF0ZV9hY3Rpb24oZ3VjLCBkYXRhLCBBUlJBWV9TSVpFKGRh
dGEpKTsKLX0KLQogLyoqCiAgKiBpbnRlbF9ndWNfcmVzZXRfZW5naW5lKCkgLSBhc2sgR3VDIHRv
IHJlc2V0IGFuIGVuZ2luZQogICogQGd1YzoJaW50ZWxfZ3VjIHN0cnVjdHVyZQpAQCAtNjIwLDEz
ICs2MTMsMTIgQEAgaW50IGludGVsX2d1Y19yZXNldF9lbmdpbmUoc3RydWN0IGludGVsX2d1YyAq
Z3VjLAogICovCiBpbnQgaW50ZWxfZ3VjX3Jlc3VtZShzdHJ1Y3QgaW50ZWxfZ3VjICpndWMpCiB7
Ci0JdTMyIGRhdGFbXSA9IHsKKwl1MzIgYWN0aW9uW10gPSB7CiAJCUlOVEVMX0dVQ19BQ1RJT05f
RVhJVF9TX1NUQVRFLAogCQlHVUNfUE9XRVJfRDAsCi0JCWludGVsX2d1Y19nZ3R0X29mZnNldChn
dWMsIGd1Yy0+c2hhcmVkX2RhdGEpCiAJfTsKIAotCXJldHVybiBndWNfc2xlZXBfc3RhdGVfYWN0
aW9uKGd1YywgZGF0YSwgQVJSQVlfU0laRShkYXRhKSk7CisJcmV0dXJuIGludGVsX2d1Y19zZW5k
KGd1YywgYWN0aW9uLCBBUlJBWV9TSVpFKGFjdGlvbikpOwogfQogCiAvKioKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19md2lmLmggYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9ndWNfZndpZi5oCmluZGV4IGUxOGE4YzAzMTJlZi4uNTkyYzc4YzFlY2M4IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9ndWNfZndpZi5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2d1Y19md2lmLmgKQEAgLTYzNyw5ICs2MzcsOSBAQCBl
bnVtIGludGVsX2d1Y19yZXBvcnRfc3RhdHVzIHsKIH07CiAKIGVudW0gaW50ZWxfZ3VjX3NsZWVw
X3N0YXRlX3N0YXR1cyB7Ci0JSU5URUxfR1VDX1NMRUVQX1NUQVRFX1NVQ0NFU1MgPSAweDAsCi0J
SU5URUxfR1VDX1NMRUVQX1NUQVRFX1BSRUVNUFRfVE9fSURMRV9GQUlMRUQgPSAweDEsCi0JSU5U
RUxfR1VDX1NMRUVQX1NUQVRFX0VOR0lORV9SRVNFVF9GQUlMRUQgPSAweDIKKwlJTlRFTF9HVUNf
U0xFRVBfU1RBVEVfU1VDQ0VTUyA9IDB4MSwKKwlJTlRFTF9HVUNfU0xFRVBfU1RBVEVfUFJFRU1Q
VF9UT19JRExFX0ZBSUxFRCA9IDB4MiwKKwlJTlRFTF9HVUNfU0xFRVBfU1RBVEVfRU5HSU5FX1JF
U0VUX0ZBSUxFRCA9IDB4MwogI2RlZmluZSBJTlRFTF9HVUNfU0xFRVBfU1RBVEVfSU5WQUxJRF9N
QVNLIDB4ODAwMDAwMDAKIH07CiAKLS0gCjIuMTkuMgoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vaW50ZWwtZ2Z4

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 2C3F234503C
	for <lists+intel-gfx@lfdr.de>; Mon, 22 Mar 2021 20:50:28 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 920686E067;
	Mon, 22 Mar 2021 19:50:26 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9ED8B6E067
 for <intel-gfx@lists.freedesktop.org>; Mon, 22 Mar 2021 19:50:25 +0000 (UTC)
IronPort-SDR: 78MpR4nGnbjzfxe4pW//hUfM7kc4GmT6KpyH3aIy0AEt8XCgv9pT2MqRODAwM0vt1refxSMsQB
 yq5TlfjIjgwg==
X-IronPort-AV: E=McAfee;i="6000,8403,9931"; a="187020687"
X-IronPort-AV: E=Sophos;i="5.81,269,1610438400"; d="scan'208";a="187020687"
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by fmsmga102.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 22 Mar 2021 12:50:24 -0700
IronPort-SDR: flPyt3hjcyL0NRu+VSqhhbjwyvUjrFwys+B1hkz5KYgQjUPOdDE5a4/uYu1JyWvQjRQJCS6ANG
 A4UQ3vLCqoTQ==
X-IronPort-AV: E=Sophos;i="5.81,269,1610438400"; d="scan'208";a="524563293"
Received: from mdroper-desk1.fm.intel.com ([10.1.27.168])
 by orsmga004-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 22 Mar 2021 12:50:23 -0700
From: Matt Roper <matthew.d.roper@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Mon, 22 Mar 2021 12:50:17 -0700
Message-Id: <20210322195017.3969488-1-matthew.d.roper@intel.com>
X-Mailer: git-send-email 2.25.4
In-Reply-To: <20210322194810.3969336-1-matthew.d.roper@intel.com>
References: <20210322194810.3969336-1-matthew.d.roper@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v2.1 6/6] drm/i915/display: Simplify GLK display
 version tests
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Ville=20Syrj=C3=A4l=C3=A4?= <ville.syrjala@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

R0xLIGhhcyBhbHdheXMgYmVlbiBhIGJpdCBvZiBhIHNwZWNpYWwgY2FzZSBzaW5jZSBpdCByZXBv
cnRzIElOVEVMX0dFTigpCmFzIDksIGJ1dCBoYXMgdmVyc2lvbiAxMCBkaXNwbGF5IElQLiAgTm93
IHdlIGNhbiBwcm9wZXJseSByZXByZXNlbnQgdGhlCmRpc3BsYXkgdmVyc2lvbiBhcyAxMCBhbmQg
c2ltcGxpZnkgdGhlIGRpc3BsYXkgZ2VuZXJhdGlvbiB0ZXN0cwp0aHJvdWdob3V0IHRoZSBkaXNw
bGF5IGNvZGUuCgpBc2lkZSBmcm9tIG1hbnVhbGx5IGFkZGluZyB0aGUgdmVyc2lvbiB0byB0aGUg
Z2xrX2luZm8gc3RydWN0dXJlLCB0aGUKcmVzdCBvZiB0aGlzIHBhdGNoIGlzIGdlbmVyYXRlZCB3
aXRoIGEgQ29jY2luZWxsZSBzZW1hbnRpYyBwYXRjaC4gIE5vdGUKdGhhdCB3ZSBhbHNvIG5lZWQg
dG8gc3dpdGNoIGFueSBjb2RlIHRoYXQgbWF0Y2hlcyBnZW4xMCB0b2RheSBidXQgKm5vdCoKR0xL
IHRvIGJlIENOTC1zcGVjaWZpYzoKCiAgICAgICAgQEAgZXhwcmVzc2lvbiBkZXZfcHJpdjsgQEAK
ICAgICAgICAtIERJU1BMQVlfVkVSKGRldl9wcml2KSA+IDkKICAgICAgICArIERJU1BMQVlfVkVS
KGRldl9wcml2KSA+PSAxMAoKICAgICAgICBAQCBleHByZXNzaW9uIGRldl9wcml2LCBFOyBAQAog
ICAgICAgICgKICAgICAgICAtIERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCAmJiBFCiAgICAg
ICAgKyAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDExIHx8IElTX0NBTk5PTkxBS0UoZGV2X3By
aXYpKSAmJiBFCiAgICAgICAgfAogICAgICAgIC0gRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEw
CiAgICAgICAgKyBESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTEgfHwgSVNfQ0FOTk9OTEFLRShk
ZXZfcHJpdikKICAgICAgICB8CiAgICAgICAgLSBJU19ESVNQTEFZX1JBTkdFKGRldl9wcml2LCAx
MCwgRSkKICAgICAgICArIElTX0RJU1BMQVlfUkFOR0UoZGV2X3ByaXYsIDExLCBFKSB8fCBJU19D
QU5OT05MQUtFKGRldl9wcml2KQogICAgICAgICkKCiAgICAgICAgQEAgZXhwcmVzc2lvbiBkZXZf
cHJpdiwgRSwgRTI7IEBACiAgICAgICAgKAogICAgICAgIC0gKElTX0NBTk5PTkxBS0UoZGV2X3By
aXYpIHx8IElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKQogICAgICAgICsgSVNfRElTUExBWV9WRVIo
ZGV2X3ByaXYsIDEwKQogICAgICAgIHwKICAgICAgICAtIEUgfHwgSVNfQ0FOTk9OTEFLRShkZXZf
cHJpdikgfHwgSVNfR0VNSU5JTEFLRShkZXZfcHJpdikKICAgICAgICArIEUgfHwgSVNfRElTUExB
WV9WRVIoZGV2X3ByaXYsIDEwKQogICAgICAgIHwKICAgICAgICAtIChJU19HRU1JTklMQUtFKGRl
dl9wcml2KSB8fCBJU19DQU5OT05MQUtFKGRldl9wcml2KSkKICAgICAgICArIElTX0RJU1BMQVlf
VkVSKGRldl9wcml2LCAxMCkKICAgICAgICB8CiAgICAgICAgLSBJU19HRU1JTklMQUtFKGRldl9w
cml2KSB8fCBFIHx8IElTX0NBTk5PTkxBS0UoZGV2X3ByaXYpCiAgICAgICAgKyBFIHx8IElTX0RJ
U1BMQVlfVkVSKGRldl9wcml2LCAxMCkKICAgICAgICB8CiAgICAgICAgLSBFIHx8IElTX0dFTUlO
SUxBS0UoZGV2X3ByaXYpIHx8IEUyIHx8IElTX0NBTk5PTkxBS0UoZGV2X3ByaXYpCiAgICAgICAg
KyBFIHx8IEUyIHx8IElTX0RJU1BMQVlfVkVSKGRldl9wcml2LCAxMCkKICAgICAgICB8CiAgICAg
ICAgLSAoSVNfRElTUExBWV9WRVIoZGV2X3ByaXYsIDEwKSB8fCBJU19HRU1JTklMQUtFKGRldl9w
cml2KSkKICAgICAgICArIElTX0RJU1BMQVlfVkVSKGRldl9wcml2LCAxMCkKICAgICAgICB8CiAg
ICAgICAgLSAoSVNfR0VNSU5JTEFLRShkZXZfcHJpdikgfHwgSVNfRElTUExBWV9WRVIoZGV2X3By
aXYsIDEwKSkKICAgICAgICArIElTX0RJU1BMQVlfVkVSKGRldl9wcml2LCAxMCkKICAgICAgICAp
CgogICAgICAgIEBAIGV4cHJlc3Npb24gZGV2X3ByaXY7IEBACiAgICAgICAgLSAoSVNfRElTUExB
WV9WRVIoZGV2X3ByaXYsIDkpICYmICFJU19HRU1JTklMQUtFKGRldl9wcml2KSkKICAgICAgICAr
IElTX0RJU1BMQVlfVkVSKGRldl9wcml2LCA5KQoKICAgICAgICBAQCBleHByZXNzaW9uIGRldl9w
cml2OyBAQAogICAgICAgICgKICAgICAgICAtICEoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEx
IHx8IElTX0RJU1BMQVlfVkVSKGRldl9wcml2LCAxMCkpCiAgICAgICAgKyBESVNQTEFZX1ZFUihk
ZXZfcHJpdikgPCAxMAogICAgICAgIHwKICAgICAgICAtIChESVNQTEFZX1ZFUihkZXZfcHJpdikg
Pj0gMTEgfHwgSVNfRElTUExBWV9WRVIoZGV2X3ByaXYsIDEwKSkKICAgICAgICArIERJU1BMQVlf
VkVSKGRldl9wcml2KSA+PSAxMAogICAgICAgICkKCiAgICAgICAgQEAgZXhwcmVzc2lvbiBkZXZf
cHJpdiwgRTsgQEAKICAgICAgICAtIEUgfHwgRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDExIHx8
IElTX0RJU1BMQVlfVkVSKGRldl9wcml2LCAxMCkKICAgICAgICArIEUgfHwgRElTUExBWV9WRVIo
ZGV2X3ByaXYpID49IDEwCgogICAgICAgIEBAIGV4cHJlc3Npb24gZGV2X3ByaXYsIEU7IEBACiAg
ICAgICAgLSAoSVNfRElTUExBWV9SQU5HRShkZXZfcHJpdiwgMTEsIEUpIHx8IElTX0RJU1BMQVlf
VkVSKGRldl9wcml2LCAxMCkpCiAgICAgICAgKyBJU19ESVNQTEFZX1JBTkdFKGRldl9wcml2LCAx
MCwgRSkKCiAgICAgICAgQEAgZXhwcmVzc2lvbiBkZXZfcHJpdjsgQEAKICAgICAgICAoCiAgICAg
ICAgLSBESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTEgfHwgSVNfQ0FOTk9OTEFLRShkZXZfcHJp
dikgfHwgSVNfR0VOOV9MUChkZXZfcHJpdikKICAgICAgICArIERJU1BMQVlfVkVSKGRldl9wcml2
KSA+PSAxMCB8fCBJU19HRU45X0xQKGRldl9wcml2KQogICAgICAgIHwKICAgICAgICAtIElTX0dF
TjlfTFAoZGV2X3ByaXYpIHx8IERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMSB8fCBJU19DQU5O
T05MQUtFKGRldl9wcml2KQogICAgICAgICsgSVNfR0VOOV9MUChkZXZfcHJpdikgfHwgRElTUExB
WV9WRVIoZGV2X3ByaXYpID49IDEwCiAgICAgICAgKQoKICAgICAgICBAQCBleHByZXNzaW9uIGRl
dl9wcml2LCBFOyBAQAogICAgICAgIC0gIShESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gRSkKICAg
ICAgICArIERJU1BMQVlfVkVSKGRldl9wcml2KSA8IEUKCnYyOgogLSBDb252ZXJ0IGdlbjEwIGNv
bmRpdGlvbnMgdGhhdCBkb24ndCBpbmNsdWRlIEdMSyBpbnRvIENOTCBjb25kaXRpb25zLgogICAo
VmlsbGUpCgp2MzoKIC0gUmV3b3JrIGNvY2NpbmVsbGUgcnVsZXMgc28gdGhhdCAidmVyPj0xMCIg
dHVybnMgaW50byAidmVyPj0xMXx8aXNfY25sLiIgKFZpbGxlKQoKdjMuMToKIC0gTWFudWFsbHkg
cmUtYWRkIHRoZSAiLmRpc3BsYXkudmVyc2lvbiA9IDEwIiB0byBnbGtfaW5mbyBhZnRlcgogICBy
ZWdlbmVyYXRpbmcgcGF0Y2ggdmlhIENvY2NpbmVsbGUuCgpDYzogVmlsbGUgU3lyasOkbMOkIDx2
aWxsZS5zeXJqYWxhQGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogTWF0dCBSb3BlciA8bWF0dGhl
dy5kLnJvcGVyQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2F0b21pYy5jICAgfCAgNyArKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2F1ZGlvLmMgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9iaW9zLmMgICAgIHwgIDMgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
Y2RjbGsuYyAgICB8IDI2ICsrKysrKystLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfY29sb3IuYyAgICB8ICA4ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfY3J0Yy5jICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXkuYyAgfCAgOSArKy0tLQogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheV9kZWJ1Z2ZzLmMgIHwgIDUgKy0tCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5X3Bvd2VyLmMgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kcC5jICAgICAgIHwgIDYgKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2ZiYy5jICAgICAgfCAgNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9oZGNwLmMgICAgIHwgIDEgLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9o
ZG1pLmMgICAgIHwgMTMgKysrLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9wc3IuYyAgICAgIHwgIDcgKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF92ZHNjLmMgICAgIHwgIDYgKy0tCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9za2xfdW5pdmVyc2Fs
X3BsYW5lLmMgICAgfCAzNyArKysrKysrKystLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X3BjaS5jICAgICAgICAgICAgICAgfCAgMSArCiAxNyBmaWxlcyBjaGFuZ2VkLCA2NCBp
bnNlcnRpb25zKCspLCA3NSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9hdG9taWMuYwppbmRleCAyYjkyODc5NTc1NWUuLjRmYTM4OWZjZThjYiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWMuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pYy5jCkBAIC0zMzIsOCAr
MzMyLDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfYXRvbWljX3NldHVwX3NjYWxlcihzdHJ1Y3QgaW50
ZWxfY3J0Y19zY2FsZXJfc3RhdGUgKnNjYWxlcl9zdGEKIAkgICAgcGxhbmVfc3RhdGUtPmh3LmZi
LT5mb3JtYXQtPmlzX3l1diAmJgogCSAgICBwbGFuZV9zdGF0ZS0+aHcuZmItPmZvcm1hdC0+bnVt
X3BsYW5lcyA+IDEpIHsKIAkJc3RydWN0IGludGVsX3BsYW5lICpwbGFuZSA9IHRvX2ludGVsX3Bs
YW5lKHBsYW5lX3N0YXRlLT51YXBpLnBsYW5lKTsKLQkJaWYgKElTX0RJU1BMQVlfVkVSKGRldl9w
cml2LCA5KSAmJgotCQkgICAgIUlTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKSB7CisJCWlmIChJU19E
SVNQTEFZX1ZFUihkZXZfcHJpdiwgOSkpIHsKIAkJCW1vZGUgPSBTS0xfUFNfU0NBTEVSX01PREVf
TlYxMjsKIAkJfSBlbHNlIGlmIChpY2xfaXNfaGRyX3BsYW5lKGRldl9wcml2LCBwbGFuZS0+aWQp
KSB7CiAJCQkvKgpAQCAtMzUxLDcgKzM1MCw3IEBAIHN0YXRpYyB2b2lkIGludGVsX2F0b21pY19z
ZXR1cF9zY2FsZXIoc3RydWN0IGludGVsX2NydGNfc2NhbGVyX3N0YXRlICpzY2FsZXJfc3RhCiAJ
CQlpZiAobGlua2VkKQogCQkJCW1vZGUgfD0gUFNfUExBTkVfWV9TRUwobGlua2VkLT5pZCk7CiAJ
CX0KLQl9IGVsc2UgaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+IDkgfHwgSVNfR0VNSU5JTEFL
RShkZXZfcHJpdikpIHsKKwl9IGVsc2UgaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCkg
ewogCQltb2RlID0gUFNfU0NBTEVSX01PREVfTk9STUFMOwogCX0gZWxzZSBpZiAobnVtX3NjYWxl
cnNfbmVlZCA9PSAxICYmIGludGVsX2NydGMtPm51bV9zY2FsZXJzID4gMSkgewogCQkvKgpAQCAt
NDYwLDcgKzQ1OSw3IEBAIGludCBpbnRlbF9hdG9taWNfc2V0dXBfc2NhbGVycyhzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCQkJICogaXNuJ3QgbmVjZXNzYXJ5IHRvIGNoYW5n
ZSBiZXR3ZWVuIEhRIGFuZCBkeW4gbW9kZQogCQkJCSAqIG9uIHRob3NlIHBsYXRmb3Jtcy4KIAkJ
CQkgKi8KLQkJCQlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEwIHx8IElTX0dFTUlOSUxB
S0UoZGV2X3ByaXYpKQorCQkJCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTApCiAJCQkJ
CWNvbnRpbnVlOwogCiAJCQkJcGxhbmUgPSBkcm1fcGxhbmVfZnJvbV9pbmRleCgmZGV2X3ByaXYt
PmRybSwgaSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2F1ZGlvLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F1ZGlvLmMKaW5k
ZXggN2FiOWQxNjY5ZjA5Li4zZWEyMGM4NTc0NDAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXVkaW8uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2F1ZGlvLmMKQEAgLTEwMjIsNyArMTAyMiw3IEBAIHN0YXRpYyB1bnNpZ25l
ZCBsb25nIGk5MTVfYXVkaW9fY29tcG9uZW50X2dldF9wb3dlcihzdHJ1Y3QgZGV2aWNlICprZGV2
KQogCQlpZiAoSVNfR0VNSU5JTEFLRShkZXZfcHJpdikpCiAJCQlnbGtfZm9yY2VfYXVkaW9fY2Rj
bGsoZGV2X3ByaXYsIHRydWUpOwogCi0JCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTAg
fHwgSVNfR0VNSU5JTEFLRShkZXZfcHJpdikpCisJCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikg
Pj0gMTApCiAJCQlpbnRlbF9kZV93cml0ZShkZXZfcHJpdiwgQVVEX1BJTl9CVUZfQ1RMLAogCQkJ
CSAgICAgICAoaW50ZWxfZGVfcmVhZChkZXZfcHJpdiwgQVVEX1BJTl9CVUZfQ1RMKSB8IEFVRF9Q
SU5fQlVGX0VOQUJMRSkpOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfYmlvcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9i
aW9zLmMKaW5kZXggMTgyZGI5ZGUwM2MzLi4zZDBjMDM1YjVlMzggMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfYmlvcy5jCkBAIC05MTcsOCArOTE3LDcgQEAgcGFyc2VfcHNy
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LCBjb25zdCBzdHJ1Y3QgYmRiX2hlYWRlciAq
YmRiKQogCSAqIE9sZCBkZWNpbWFsIHZhbHVlIGlzIHdha2UgdXAgdGltZSBpbiBtdWx0aXBsZXMg
b2YgMTAwIHVzLgogCSAqLwogCWlmIChiZGItPnZlcnNpb24gPj0gMjA1ICYmCi0JICAgIChJU19H
RU45X0JDKGk5MTUpIHx8IElTX0dFTUlOSUxBS0UoaTkxNSkgfHwKLQkgICAgIERJU1BMQVlfVkVS
KGk5MTUpID49IDEwKSkgeworCSAgICAoSVNfR0VOOV9CQyhpOTE1KSB8fCBESVNQTEFZX1ZFUihp
OTE1KSA+PSAxMCkpIHsKIAkJc3dpdGNoIChwc3JfdGFibGUtPnRwMV93YWtldXBfdGltZSkgewog
CQljYXNlIDA6CiAJCQlpOTE1LT52YnQucHNyLnRwMV93YWtldXBfdGltZV91cyA9IDUwMDsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY2RjbGsuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY2RjbGsuYwppbmRleCA0YmU4NDhkMGQx
NTYuLjNmNDNhZDRkNzM2MiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9jZGNsay5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
Y2RjbGsuYwpAQCAtMTM5Nyw3ICsxMzk3LDcgQEAgc3RhdGljIHZvaWQgYnh0X2RlX3BsbF9yZWFk
b3V0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkgKiBDTkwrIGhhdmUgdGhl
IHJhdGlvIGRpcmVjdGx5IGluIHRoZSBQTEwgZW5hYmxlIHJlZ2lzdGVyLCBnZW45bHAgaGFkCiAJ
ICogaXQgaW4gYSBzZXBhcmF0ZSBQTEwgY29udHJvbCByZWdpc3Rlci4KIAkgKi8KLQlpZiAoRElT
UExBWV9WRVIoZGV2X3ByaXYpID49IDEwKQorCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0g
MTEgfHwgSVNfQ0FOTk9OTEFLRShkZXZfcHJpdikpCiAJCXJhdGlvID0gdmFsICYgQ05MX0NEQ0xL
X1BMTF9SQVRJT19NQVNLOwogCWVsc2UKIAkJcmF0aW8gPSBpbnRlbF9kZV9yZWFkKGRldl9wcml2
LCBCWFRfREVfUExMX0NUTCkgJiBCWFRfREVfUExMX1JBVElPX01BU0s7CkBAIC0xNDMzLDcgKzE0
MzMsNyBAQCBzdGF0aWMgdm9pZCBieHRfZ2V0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiwKIAkJYnJlYWs7CiAJY2FzZSBCWFRfQ0RDTEtfQ0QyWF9ESVZfU0VMXzFfNToK
IAkJZHJtX1dBUk4oJmRldl9wcml2LT5kcm0sCi0JCQkgSVNfR0VNSU5JTEFLRShkZXZfcHJpdikg
fHwgRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEwLAorCQkJIERJU1BMQVlfVkVSKGRldl9wcml2
KSA+PSAxMCwKIAkJCSAiVW5zdXBwb3J0ZWQgZGl2aWRlclxuIik7CiAJCWRpdiA9IDM7CiAJCWJy
ZWFrOwpAQCAtMTQ0MSw3ICsxNDQxLDggQEAgc3RhdGljIHZvaWQgYnh0X2dldF9jZGNsayhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCWRpdiA9IDQ7CiAJCWJyZWFrOwogCWNh
c2UgQlhUX0NEQ0xLX0NEMlhfRElWX1NFTF80OgotCQlkcm1fV0FSTigmZGV2X3ByaXYtPmRybSwg
RElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEwLAorCQlkcm1fV0FSTigmZGV2X3ByaXYtPmRybSwK
KwkJCSBESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTEgfHwgSVNfQ0FOTk9OTEFLRShkZXZfcHJp
diksCiAJCQkgIlVuc3VwcG9ydGVkIGRpdmlkZXJcbiIpOwogCQlkaXYgPSA4OwogCQlicmVhazsK
QEAgLTE1NTgsNyArMTU1OSw3IEBAIHN0YXRpYyB2b2lkIGJ4dF9zZXRfY2RjbGsoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCWludCByZXQ7CiAKIAkvKiBJbmZvcm0gcG93ZXIg
Y29udHJvbGxlciBvZiB1cGNvbWluZyBmcmVxdWVuY3kgY2hhbmdlLiAqLwotCWlmIChESVNQTEFZ
X1ZFUihkZXZfcHJpdikgPj0gMTApCisJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMSB8
fCBJU19DQU5OT05MQUtFKGRldl9wcml2KSkKIAkJcmV0ID0gc2tsX3Bjb2RlX3JlcXVlc3QoZGV2
X3ByaXYsIFNLTF9QQ09ERV9DRENMS19DT05UUk9MLAogCQkJCQlTS0xfQ0RDTEtfUFJFUEFSRV9G
T1JfQ0hBTkdFLAogCQkJCQlTS0xfQ0RDTEtfUkVBRFlfRk9SX0NIQU5HRSwKQEAgLTE1OTEsNyAr
MTU5Miw3IEBAIHN0YXRpYyB2b2lkIGJ4dF9zZXRfY2RjbGsoc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2LAogCQlicmVhazsKIAljYXNlIDM6CiAJCWRybV9XQVJOKCZkZXZfcHJpdi0+
ZHJtLAotCQkJIElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpIHx8IERJU1BMQVlfVkVSKGRldl9wcml2
KSA+PSAxMCwKKwkJCSBESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTAsCiAJCQkgIlVuc3VwcG9y
dGVkIGRpdmlkZXJcbiIpOwogCQlkaXZpZGVyID0gQlhUX0NEQ0xLX0NEMlhfRElWX1NFTF8xXzU7
CiAJCWJyZWFrOwpAQCAtMTU5OSwxMyArMTYwMCwxNCBAQCBzdGF0aWMgdm9pZCBieHRfc2V0X2Nk
Y2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJZGl2aWRlciA9IEJYVF9D
RENMS19DRDJYX0RJVl9TRUxfMjsKIAkJYnJlYWs7CiAJY2FzZSA4OgotCQlkcm1fV0FSTigmZGV2
X3ByaXYtPmRybSwgRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEwLAorCQlkcm1fV0FSTigmZGV2
X3ByaXYtPmRybSwKKwkJCSBESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTEgfHwgSVNfQ0FOTk9O
TEFLRShkZXZfcHJpdiksCiAJCQkgIlVuc3VwcG9ydGVkIGRpdmlkZXJcbiIpOwogCQlkaXZpZGVy
ID0gQlhUX0NEQ0xLX0NEMlhfRElWX1NFTF80OwogCQlicmVhazsKIAl9CiAKLQlpZiAoRElTUExB
WV9WRVIoZGV2X3ByaXYpID49IDEwKSB7CisJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAx
MSB8fCBJU19DQU5OT05MQUtFKGRldl9wcml2KSkgewogCQlpZiAoZGV2X3ByaXYtPmNkY2xrLmh3
LnZjbyAhPSAwICYmCiAJCSAgICBkZXZfcHJpdi0+Y2RjbGsuaHcudmNvICE9IHZjbykKIAkJCWNu
bF9jZGNsa19wbGxfZGlzYWJsZShkZXZfcHJpdik7CkBAIC0xNjM2LDcgKzE2MzgsNyBAQCBzdGF0
aWMgdm9pZCBieHRfc2V0X2NkY2xrKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwK
IAlpZiAocGlwZSAhPSBJTlZBTElEX1BJUEUpCiAJCWludGVsX3dhaXRfZm9yX3ZibGFuayhkZXZf
cHJpdiwgcGlwZSk7CiAKLQlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEwKSB7CisJaWYg
KERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMSB8fCBJU19DQU5OT05MQUtFKGRldl9wcml2KSkg
ewogCQlyZXQgPSBzYW5keWJyaWRnZV9wY29kZV93cml0ZShkZXZfcHJpdiwgU0tMX1BDT0RFX0NE
Q0xLX0NPTlRST0wsCiAJCQkJCSAgICAgIGNkY2xrX2NvbmZpZy0+dm9sdGFnZV9sZXZlbCk7CiAJ
fSBlbHNlIHsKQEAgLTE2NjEsNyArMTY2Myw3IEBAIHN0YXRpYyB2b2lkIGJ4dF9zZXRfY2RjbGso
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCiAJaW50ZWxfdXBkYXRlX2NkY2xr
KGRldl9wcml2KTsKIAotCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTApCisJaWYgKERJ
U1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMSB8fCBJU19DQU5OT05MQUtFKGRldl9wcml2KSkKIAkJ
LyoKIAkJICogQ2FuJ3QgcmVhZCBvdXQgdGhlIHZvbHRhZ2UgbGV2ZWwgOigKIAkJICogTGV0J3Mg
anVzdCBhc3N1bWUgZXZlcnl0aGluZyBpcyBhcyBleHBlY3RlZC4KQEAgLTE5OTgsNyArMjAwMCw3
IEBAIHN0YXRpYyBpbnQgaW50ZWxfcGl4ZWxfcmF0ZV90b19jZGNsayhjb25zdCBzdHJ1Y3QgaW50
ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYgPSB0b19pOTE1KGNydGNfc3RhdGUtPnVhcGkuY3J0Yy0+ZGV2KTsKIAlpbnQgcGl4ZWxf
cmF0ZSA9IGNydGNfc3RhdGUtPnBpeGVsX3JhdGU7CiAKLQlpZiAoRElTUExBWV9WRVIoZGV2X3By
aXYpID49IDEwIHx8IElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKQorCWlmIChESVNQTEFZX1ZFUihk
ZXZfcHJpdikgPj0gMTApCiAJCXJldHVybiBESVZfUk9VTkRfVVAocGl4ZWxfcmF0ZSwgMik7CiAJ
ZWxzZSBpZiAoSVNfRElTUExBWV9WRVIoZGV2X3ByaXYsIDkpIHx8CiAJCSBJU19CUk9BRFdFTEwo
ZGV2X3ByaXYpIHx8IElTX0hBU1dFTEwoZGV2X3ByaXYpKQpAQCAtMjA0OCw3ICsyMDUwLDcgQEAg
aW50IGludGVsX2NydGNfY29tcHV0ZV9taW5fY2RjbGsoY29uc3Qgc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKmNydGNfc3RhdGUpCiAJICAgIGNydGNfc3RhdGUtPmhhc19hdWRpbyAmJgogCSAgICBj
cnRjX3N0YXRlLT5wb3J0X2Nsb2NrID49IDU0MDAwMCAmJgogCSAgICBjcnRjX3N0YXRlLT5sYW5l
X2NvdW50ID09IDQpIHsKLQkJaWYgKElTX0NBTk5PTkxBS0UoZGV2X3ByaXYpIHx8IElTX0dFTUlO
SUxBS0UoZGV2X3ByaXYpKSB7CisJCWlmIChJU19ESVNQTEFZX1ZFUihkZXZfcHJpdiwgMTApKSB7
CiAJCQkvKiBEaXNwbGF5IFdBICMxMTQ1OiBnbGssY25sICovCiAJCQltaW5fY2RjbGsgPSBtYXgo
MzE2ODAwLCBtaW5fY2RjbGspOwogCQl9IGVsc2UgaWYgKElTX0RJU1BMQVlfVkVSKGRldl9wcml2
LCA5KSB8fCBJU19CUk9BRFdFTEwoZGV2X3ByaXYpKSB7CkBAIC0yNTg4LDcgKzI1OTAsNyBAQCBz
dGF0aWMgaW50IGludGVsX2NvbXB1dGVfbWF4X2RvdGNsayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYpCiB7CiAJaW50IG1heF9jZGNsa19mcmVxID0gZGV2X3ByaXYtPm1heF9jZGNs
a19mcmVxOwogCi0JaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCB8fCBJU19HRU1JTklM
QUtFKGRldl9wcml2KSkKKwlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEwKQogCQlyZXR1
cm4gMiAqIG1heF9jZGNsa19mcmVxOwogCWVsc2UgaWYgKElTX0RJU1BMQVlfVkVSKGRldl9wcml2
LCA5KSB8fAogCQkgSVNfQlJPQURXRUxMKGRldl9wcml2KSB8fCBJU19IQVNXRUxMKGRldl9wcml2
KSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY29sb3Iu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY29sb3IuYwppbmRleCAzN2Uy
NzU1MDlhMzYuLmM3NWQ3MTI0ZDU3YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9jb2xvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfY29sb3IuYwpAQCAtNzM3LDcgKzczNyw3IEBAIHN0YXRpYyB2b2lkIGl2Yl9sb2FkX2x1
dF9leHRfbWF4KGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogCSAq
IFRvRG86IEV4dGVuZCB0aGUgQUJJIHRvIGJlIGFibGUgdG8gcHJvZ3JhbSB2YWx1ZXMKIAkgKiBm
cm9tIDMuMCB0byA3LjAKIAkgKi8KLQlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEwIHx8
IElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKSB7CisJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+
PSAxMCkgewogCQlpbnRlbF9kc2JfcmVnX3dyaXRlKGNydGNfc3RhdGUsIFBSRUNfUEFMX0VYVDJf
R0NfTUFYKHBpcGUsIDApLAogCQkJCSAgICAxIDw8IDE2KTsKIAkJaW50ZWxfZHNiX3JlZ193cml0
ZShjcnRjX3N0YXRlLCBQUkVDX1BBTF9FWFQyX0dDX01BWChwaXBlLCAxKSwKQEAgLTE3MTEsNyAr
MTcxMSw3IEBAIGludCBpbnRlbF9jb2xvcl9nZXRfZ2FtbWFfYml0X3ByZWNpc2lvbihjb25zdCBz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0CiAJfSBlbHNlIHsKIAkJaWYgKERJU1BM
QVlfVkVSKGRldl9wcml2KSA+PSAxMSkKIAkJCXJldHVybiBpY2xfZ2FtbWFfcHJlY2lzaW9uKGNy
dGNfc3RhdGUpOwotCQllbHNlIGlmIChJU19DQU5OT05MQUtFKGRldl9wcml2KSB8fCBJU19HRU1J
TklMQUtFKGRldl9wcml2KSkKKwkJZWxzZSBpZiAoSVNfRElTUExBWV9WRVIoZGV2X3ByaXYsIDEw
KSkKIAkJCXJldHVybiBnbGtfZ2FtbWFfcHJlY2lzaW9uKGNydGNfc3RhdGUpOwogCQllbHNlIGlm
IChJU19JUk9OTEFLRShkZXZfcHJpdikpCiAJCQlyZXR1cm4gaWxrX2dhbW1hX3ByZWNpc2lvbihj
cnRjX3N0YXRlKTsKQEAgLTIxMTksNyArMjExOSw3IEBAIHZvaWQgaW50ZWxfY29sb3JfaW5pdChz
dHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YykKIAl9IGVsc2UgewogCQlpZiAoRElTUExBWV9WRVIoZGV2
X3ByaXYpID49IDExKQogCQkJZGV2X3ByaXYtPmRpc3BsYXkuY29sb3JfY2hlY2sgPSBpY2xfY29s
b3JfY2hlY2s7Ci0JCWVsc2UgaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCB8fCBJU19H
RU1JTklMQUtFKGRldl9wcml2KSkKKwkJZWxzZSBpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49
IDEwKQogCQkJZGV2X3ByaXYtPmRpc3BsYXkuY29sb3JfY2hlY2sgPSBnbGtfY29sb3JfY2hlY2s7
CiAJCWVsc2UgaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSA3KQogCQkJZGV2X3ByaXYtPmRp
c3BsYXkuY29sb3JfY2hlY2sgPSBpdmJfY29sb3JfY2hlY2s7CkBAIC0yMTM2LDcgKzIxMzYsNyBA
QCB2b2lkIGludGVsX2NvbG9yX2luaXQoc3RydWN0IGludGVsX2NydGMgKmNydGMpCiAJCWlmIChE
SVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTEpIHsKIAkJCWRldl9wcml2LT5kaXNwbGF5LmxvYWRf
bHV0cyA9IGljbF9sb2FkX2x1dHM7CiAJCQlkZXZfcHJpdi0+ZGlzcGxheS5yZWFkX2x1dHMgPSBp
Y2xfcmVhZF9sdXRzOwotCQl9IGVsc2UgaWYgKElTX0NBTk5PTkxBS0UoZGV2X3ByaXYpIHx8IElT
X0dFTUlOSUxBS0UoZGV2X3ByaXYpKSB7CisJCX0gZWxzZSBpZiAoSVNfRElTUExBWV9WRVIoZGV2
X3ByaXYsIDEwKSkgewogCQkJZGV2X3ByaXYtPmRpc3BsYXkubG9hZF9sdXRzID0gZ2xrX2xvYWRf
bHV0czsKIAkJCWRldl9wcml2LT5kaXNwbGF5LnJlYWRfbHV0cyA9IGdsa19yZWFkX2x1dHM7CiAJ
CX0gZWxzZSBpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDgpIHsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3J0Yy5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9jcnRjLmMKaW5kZXggMDA0YWNlNTIzOTcwLi4zOTM1ODA3NmMw
NWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3J0Yy5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY3J0Yy5jCkBAIC0zMzUs
NyArMzM1LDcgQEAgaW50IGludGVsX2NydGNfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYsIGVudW0gcGlwZSBwaXBlKQogCQlkZXZfcHJpdi0+cGxhbmVfdG9fY3J0Y19tYXBw
aW5nW2k5eHhfcGxhbmVdID0gY3J0YzsKIAl9CiAKLQlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYp
ID49IDEwKQorCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTEgfHwgSVNfQ0FOTk9OTEFL
RShkZXZfcHJpdikpCiAJCWRybV9jcnRjX2NyZWF0ZV9zY2FsaW5nX2ZpbHRlcl9wcm9wZXJ0eSgm
Y3J0Yy0+YmFzZSwKIAkJCQkJCUJJVChEUk1fU0NBTElOR19GSUxURVJfREVGQVVMVCkgfAogCQkJ
CQkJQklUKERSTV9TQ0FMSU5HX0ZJTFRFUl9ORUFSRVNUX05FSUdIQk9SKSk7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4IDhhNTAxNGY0YjNmNC4u
YTFmYjVhMTAxOTQyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXkuYwpAQCAtMzI1OSw3ICszMjU5LDcgQEAgc3RhdGljIGJvb2wgbmVlZHNfbnYxMl93YShj
b25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKIAkJcmV0dXJuIGZhbHNl
OwogCiAJLyogV0EgRGlzcGxheSAjMDgyNzogR2VuOTphbGwgKi8KLQlpZiAoSVNfRElTUExBWV9W
RVIoZGV2X3ByaXYsIDkpICYmICFJU19HRU1JTklMQUtFKGRldl9wcml2KSkKKwlpZiAoSVNfRElT
UExBWV9WRVIoZGV2X3ByaXYsIDkpKQogCQlyZXR1cm4gdHJ1ZTsKIAogCXJldHVybiBmYWxzZTsK
QEAgLTM5ODksNyArMzk4OSw3IEBAIHN0YXRpYyB2b2lkIGhzd19jcnRjX2VuYWJsZShzdHJ1Y3Qg
aW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKIAljcnRjLT5hY3RpdmUgPSB0cnVlOwogCiAJLyog
RGlzcGxheSBXQSAjMTE4MDogV2FEaXNhYmxlU2NhbGFyQ2xvY2tHYXRpbmc6IGdsaywgY25sICov
Ci0JcHNsX2Nsa2dhdGVfd2EgPSAoSVNfR0VNSU5JTEFLRShkZXZfcHJpdikgfHwgSVNfQ0FOTk9O
TEFLRShkZXZfcHJpdikpICYmCisJcHNsX2Nsa2dhdGVfd2EgPSBJU19ESVNQTEFZX1ZFUihkZXZf
cHJpdiwgMTApICYmCiAJCW5ld19jcnRjX3N0YXRlLT5wY2hfcGZpdC5lbmFibGVkOwogCWlmIChw
c2xfY2xrZ2F0ZV93YSkKIAkJZ2xrX3BpcGVfc2NhbGVyX2Nsb2NrX2dhdGluZ193YShkZXZfcHJp
diwgcGlwZSwgdHJ1ZSk7CkBAIC0xMzMyOSw4ICsxMzMyOSw3IEBAIHN0YXRpYyB2b2lkIGludGVs
X21vZGVzZXRfcmVhZG91dF9od19zdGF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCQkJICog
dXNlIHBsYW5lLT5taW5fY2RjbGsoKSA6KAogCQkJICovCiAJCQlpZiAocGxhbmVfc3RhdGUtPnVh
cGkudmlzaWJsZSAmJiBwbGFuZS0+bWluX2NkY2xrKSB7Ci0JCQkJaWYgKGNydGNfc3RhdGUtPmRv
dWJsZV93aWRlIHx8Ci0JCQkJICAgIERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCB8fCBJU19H
RU1JTklMQUtFKGRldl9wcml2KSkKKwkJCQlpZiAoY3J0Y19zdGF0ZS0+ZG91YmxlX3dpZGUgfHwg
RElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEwKQogCQkJCQljcnRjX3N0YXRlLT5taW5fY2RjbGtb
cGxhbmUtPmlkXSA9CiAJCQkJCQlESVZfUk9VTkRfVVAoY3J0Y19zdGF0ZS0+cGl4ZWxfcmF0ZSwg
Mik7CiAJCQkJZWxzZQpAQCAtMTM0MjEsNyArMTM0MjAsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9l
YXJseV9kaXNwbGF5X3dhcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJICog
RGlzcGxheSBXQSAjMTE4NSBXYURpc2FibGVEQVJCRkNsa0dhdGluZzpjbmwsZ2xrLGljbCxlaGws
dGdsCiAJICogQWxzbyBrbm93biBhcyBXYV8xNDAxMDQ4MDI3OC4KIAkgKi8KLQlpZiAoSVNfRElT
UExBWV9SQU5HRShkZXZfcHJpdiwgMTAsIDEyKSB8fCBJU19HRU1JTklMQUtFKGRldl9wcml2KSkK
KwlpZiAoSVNfRElTUExBWV9SQU5HRShkZXZfcHJpdiwgMTAsIDEyKSkKIAkJaW50ZWxfZGVfd3Jp
dGUoZGV2X3ByaXYsIEdFTjlfQ0xLR0FURV9ESVNfMCwKIAkJCSAgICAgICBpbnRlbF9kZV9yZWFk
KGRldl9wcml2LCBHRU45X0NMS0dBVEVfRElTXzApIHwgREFSQkZfR0FUSU5HX0RJUyk7CiAKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9kZWJ1
Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfZGVidWdm
cy5jCmluZGV4IDE2NjZhYTIzMDkyYi4uNTY0NTA5YTRlNjY2IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfZGVidWdmcy5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9kZWJ1Z2ZzLmMKQEAgLTI0MTYs
MTAgKzI0MTYsNyBAQCBpbnQgaW50ZWxfY29ubmVjdG9yX2RlYnVnZnNfYWRkKHN0cnVjdCBkcm1f
Y29ubmVjdG9yICpjb25uZWN0b3IpCiAJCQkJICAgIGNvbm5lY3RvciwgJmk5MTVfaGRjcF9zaW5r
X2NhcGFiaWxpdHlfZm9wcyk7CiAJfQogCi0JaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAx
MCAmJgotCSAgICAoKGNvbm5lY3Rvci0+Y29ubmVjdG9yX3R5cGUgPT0gRFJNX01PREVfQ09OTkVD
VE9SX0Rpc3BsYXlQb3J0ICYmCi0JICAgICAgIXRvX2ludGVsX2Nvbm5lY3Rvcihjb25uZWN0b3Ip
LT5tc3RfcG9ydCkgfHwKLQkgICAgIGNvbm5lY3Rvci0+Y29ubmVjdG9yX3R5cGUgPT0gRFJNX01P
REVfQ09OTkVDVE9SX2VEUCkpCisJaWYgKChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTEgfHwg
SVNfQ0FOTk9OTEFLRShkZXZfcHJpdikpICYmICgoY29ubmVjdG9yLT5jb25uZWN0b3JfdHlwZSA9
PSBEUk1fTU9ERV9DT05ORUNUT1JfRGlzcGxheVBvcnQgJiYgIXRvX2ludGVsX2Nvbm5lY3Rvcihj
b25uZWN0b3IpLT5tc3RfcG9ydCkgfHwgY29ubmVjdG9yLT5jb25uZWN0b3JfdHlwZSA9PSBEUk1f
TU9ERV9DT05ORUNUT1JfZURQKSkKIAkJZGVidWdmc19jcmVhdGVfZmlsZSgiaTkxNV9kc2NfZmVj
X3N1cHBvcnQiLCBTX0lSVUdPLCByb290LAogCQkJCSAgICBjb25uZWN0b3IsICZpOTE1X2RzY19m
ZWNfc3VwcG9ydF9mb3BzKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXlfcG93ZXIuYwppbmRleCAxZWIxNmJhZDY3N2EuLmNlZjE3NzIwOGU2OCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bv
d2VyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bv
d2VyLmMKQEAgLTQ1MzcsNyArNDUzNyw3IEBAIHN0YXRpYyB1MzIgZ2V0X2FsbG93ZWRfZGNfbWFz
ayhjb25zdCBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCW1heF9kYyA9IDM7
CiAJZWxzZSBpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEyKQogCQltYXhfZGMgPSA0Owot
CWVsc2UgaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCB8fCBJU19HRU45X0JDKGRldl9w
cml2KSkKKwllbHNlIGlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTEgfHwgSVNfQ0FOTk9O
TEFLRShkZXZfcHJpdikgfHwgSVNfR0VOOV9CQyhkZXZfcHJpdikpCiAJCW1heF9kYyA9IDI7CiAJ
ZWxzZSBpZiAoSVNfR0VOOV9MUChkZXZfcHJpdikpCiAJCW1heF9kYyA9IDE7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKaW5kZXggNGJhNWUzN2YxN2QyLi5kODFiOGQyMzgx
NjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKQEAgLTI5Miw3ICsy
OTIsNyBAQCBpbnRlbF9kcF9zZXRfc291cmNlX3JhdGVzKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxf
ZHApCiAJZHJtX1dBUk5fT04oJmRldl9wcml2LT5kcm0sCiAJCSAgICBpbnRlbF9kcC0+c291cmNl
X3JhdGVzIHx8IGludGVsX2RwLT5udW1fc291cmNlX3JhdGVzKTsKIAotCWlmIChESVNQTEFZX1ZF
UihkZXZfcHJpdikgPj0gMTApIHsKKwlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDExIHx8
IElTX0NBTk5PTkxBS0UoZGV2X3ByaXYpKSB7CiAJCXNvdXJjZV9yYXRlcyA9IGNubF9yYXRlczsK
IAkJc2l6ZSA9IEFSUkFZX1NJWkUoY25sX3JhdGVzKTsKIAkJaWYgKElTX0RJU1BMQVlfVkVSKGRl
dl9wcml2LCAxMCkpCkBAIC03NzYsNyArNzc2LDcgQEAgaW50ZWxfZHBfbW9kZV92YWxpZChzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCSAqIE91dHB1dCBicHAgaXMgc3RvcmVkIGlu
IDYuNCBmb3JtYXQgc28gcmlnaHQgc2hpZnQgYnkgNCB0byBnZXQgdGhlCiAJICogaW50ZWdlciB2
YWx1ZSBzaW5jZSB3ZSBzdXBwb3J0IG9ubHkgaW50ZWdlciB2YWx1ZXMgb2YgYnBwLgogCSAqLwot
CWlmICgoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEwIHx8IElTX0dFTUlOSUxBS0UoZGV2X3By
aXYpKSAmJgorCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTAgJiYKIAkgICAgZHJtX2Rw
X3Npbmtfc3VwcG9ydHNfZHNjKGludGVsX2RwLT5kc2NfZHBjZCkpIHsKIAkJaWYgKGludGVsX2Rw
X2lzX2VkcChpbnRlbF9kcCkpIHsKIAkJCWRzY19tYXhfb3V0cHV0X2JwcCA9CkBAIC0yNTIzLDcg
KzI1MjMsNyBAQCBpbnRlbF9lZHBfaW5pdF9kcGNkKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAp
CiAJaW50ZWxfZHBfc2V0X2NvbW1vbl9yYXRlcyhpbnRlbF9kcCk7CiAKIAkvKiBSZWFkIHRoZSBl
RFAgRFNDIERQQ0QgcmVnaXN0ZXJzICovCi0JaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAx
MCB8fCBJU19HRU1JTklMQUtFKGRldl9wcml2KSkKKwlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYp
ID49IDEwKQogCQlpbnRlbF9kcF9nZXRfZHNjX3NpbmtfY2FwKGludGVsX2RwKTsKIAogCS8qCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZiYy5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mYmMuYwppbmRleCA1OGY2MDMwNjY3MDAu
Ljg4ZTAyZWUzYTYzMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9mYmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZiYy5j
CkBAIC02NTMsNyArNjUzLDcgQEAgc3RhdGljIGJvb2wgaW50ZWxfZmJjX2h3X3RyYWNraW5nX2Nv
dmVyc19zY3JlZW4oc3RydWN0IGludGVsX2NydGMgKmNydGMpCiAJc3RydWN0IGludGVsX2ZiYyAq
ZmJjID0gJmRldl9wcml2LT5mYmM7CiAJdW5zaWduZWQgaW50IGVmZmVjdGl2ZV93LCBlZmZlY3Rp
dmVfaCwgbWF4X3csIG1heF9oOwogCi0JaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCB8
fCBJU19HRU1JTklMQUtFKGRldl9wcml2KSkgeworCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikg
Pj0gMTApIHsKIAkJbWF4X3cgPSA1MTIwOwogCQltYXhfaCA9IDQwOTY7CiAJfSBlbHNlIGlmIChE
SVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gOCB8fCBJU19IQVNXRUxMKGRldl9wcml2KSkgewpAQCAt
MTAzNiw3ICsxMDM2LDcgQEAgYm9vbCBpbnRlbF9mYmNfcHJlX3VwZGF0ZShzdHJ1Y3QgaW50ZWxf
YXRvbWljX3N0YXRlICpzdGF0ZSwKIAkJICogaWYgYXQgbGVhc3Qgb25lIGZyYW1lIGhhcyBhbHJl
YWR5IHBhc3NlZC4KIAkJICovCiAJCWlmIChmYmMtPmFjdGl2YXRlZCAmJgotCQkgICAgKERJU1BM
QVlfVkVSKGRldl9wcml2KSA+PSAxMCB8fCBJU19HRU1JTklMQUtFKGRldl9wcml2KSkpCisJCSAg
ICBESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTApCiAJCQluZWVkX3ZibGFua193YWl0ID0gdHJ1
ZTsKIAkJZmJjLT5hY3RpdmF0ZWQgPSBmYWxzZTsKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkY3AuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfaGRjcC5jCmluZGV4IGZlMGJmYWJkYmI1ZC4uZDg1NzBlMTRmZTYwIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkY3AuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkY3AuYwpAQCAtMjIwNiw3ICsyMjA2
LDYgQEAgc3RhdGljIGJvb2wgaXNfaGRjcDJfc3VwcG9ydGVkKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikKIAkJcmV0dXJuIGZhbHNlOwogCiAJcmV0dXJuIChESVNQTEFZX1ZFUihk
ZXZfcHJpdikgPj0gMTAgfHwKLQkJSVNfR0VNSU5JTEFLRShkZXZfcHJpdikgfHwKIAkJSVNfS0FC
WUxBS0UoZGV2X3ByaXYpIHx8CiAJCUlTX0NPRkZFRUxBS0UoZGV2X3ByaXYpIHx8CiAJCUlTX0NP
TUVUTEFLRShkZXZfcHJpdikpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9oZG1pLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hk
bWkuYwppbmRleCBlZjc2NmE3YjZjNzEuLmQ2OWYwYTZkYzI2ZCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9oZG1pLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZGlzcGxheS9pbnRlbF9oZG1pLmMKQEAgLTU2NCw3ICs1NjQsNyBAQCBzdGF0aWMgdTMy
IGhzd19pbmZvZnJhbWVzX2VuYWJsZWQoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiAJ
CVZJREVPX0RJUF9FTkFCTEVfR0NQX0hTVyB8IFZJREVPX0RJUF9FTkFCTEVfVlNfSFNXIHwKIAkJ
VklERU9fRElQX0VOQUJMRV9HTVBfSFNXIHwgVklERU9fRElQX0VOQUJMRV9TUERfSFNXKTsKIAot
CWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTAgfHwgSVNfR0VNSU5JTEFLRShkZXZfcHJp
dikpCisJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCkKIAkJbWFzayB8PSBWSURFT19E
SVBfRU5BQkxFX0RSTV9HTEs7CiAKIAlyZXR1cm4gdmFsICYgbWFzazsKQEAgLTgyMCw3ICs4MjAs
NyBAQCBpbnRlbF9oZG1pX2NvbXB1dGVfZHJtX2luZm9mcmFtZShzdHJ1Y3QgaW50ZWxfZW5jb2Rl
ciAqZW5jb2RlciwKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1
KGVuY29kZXItPmJhc2UuZGV2KTsKIAlpbnQgcmV0OwogCi0JaWYgKCEoRElTUExBWV9WRVIoZGV2
X3ByaXYpID49IDEwIHx8IElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKSkKKwlpZiAoRElTUExBWV9W
RVIoZGV2X3ByaXYpIDwgMTApCiAJCXJldHVybiB0cnVlOwogCiAJaWYgKCFjcnRjX3N0YXRlLT5o
YXNfaW5mb2ZyYW1lKQpAQCAtMTc3NSw3ICsxNzc1LDcgQEAgc3RhdGljIGludCBpbnRlbF9oZG1p
X3NvdXJjZV9tYXhfdG1kc19jbG9jayhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikKIAlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2Uu
ZGV2KTsKIAlpbnQgbWF4X3RtZHNfY2xvY2ssIHZidF9tYXhfdG1kc19jbG9jazsKIAotCWlmIChE
SVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTAgfHwgSVNfR0VNSU5JTEFLRShkZXZfcHJpdikpCisJ
aWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCkKIAkJbWF4X3RtZHNfY2xvY2sgPSA1OTQw
MDA7CiAJZWxzZSBpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDggfHwgSVNfSEFTV0VMTChk
ZXZfcHJpdikpCiAJCW1heF90bWRzX2Nsb2NrID0gMzAwMDAwOwpAQCAtMjE2NCw4ICsyMTY0LDcg
QEAgaW50IGludGVsX2hkbWlfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmVu
Y29kZXIsCiAKIAlwaXBlX2NvbmZpZy0+bGFuZV9jb3VudCA9IDQ7CiAKLQlpZiAoc2NkYy0+c2Ny
YW1ibGluZy5zdXBwb3J0ZWQgJiYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCB8fAotCQkJ
CQkgICBJU19HRU1JTklMQUtFKGRldl9wcml2KSkpIHsKKwlpZiAoc2NkYy0+c2NyYW1ibGluZy5z
dXBwb3J0ZWQgJiYgRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEwKSB7CiAJCWlmIChzY2RjLT5z
Y3JhbWJsaW5nLmxvd19yYXRlcykKIAkJCXBpcGVfY29uZmlnLT5oZG1pX3NjcmFtYmxpbmcgPSB0
cnVlOwogCkBAIC0yNDYwLDcgKzI0NTksNyBAQCBpbnRlbF9oZG1pX2FkZF9wcm9wZXJ0aWVzKHN0
cnVjdCBpbnRlbF9oZG1pICppbnRlbF9oZG1pLCBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqYwogCWlu
dGVsX2F0dGFjaF9oZG1pX2NvbG9yc3BhY2VfcHJvcGVydHkoY29ubmVjdG9yKTsKIAlkcm1fY29u
bmVjdG9yX2F0dGFjaF9jb250ZW50X3R5cGVfcHJvcGVydHkoY29ubmVjdG9yKTsKIAotCWlmIChE
SVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTAgfHwgSVNfR0VNSU5JTEFLRShkZXZfcHJpdikpCisJ
aWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCkKIAkJZHJtX29iamVjdF9hdHRhY2hfcHJv
cGVydHkoJmNvbm5lY3Rvci0+YmFzZSwKIAkJCWNvbm5lY3Rvci0+ZGV2LT5tb2RlX2NvbmZpZy5o
ZHJfb3V0cHV0X21ldGFkYXRhX3Byb3BlcnR5LCAwKTsKIApAQCAtMjgxNSw3ICsyODE0LDcgQEAg
dm9pZCBpbnRlbF9oZG1pX2luaXRfY29ubmVjdG9yKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQg
KmRpZ19wb3J0LAogCWNvbm5lY3Rvci0+ZG91Ymxlc2Nhbl9hbGxvd2VkID0gMDsKIAljb25uZWN0
b3ItPnN0ZXJlb19hbGxvd2VkID0gMTsKIAotCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0g
MTAgfHwgSVNfR0VNSU5JTEFLRShkZXZfcHJpdikpCisJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2
KSA+PSAxMCkKIAkJY29ubmVjdG9yLT55Y2Jjcl80MjBfYWxsb3dlZCA9IHRydWU7CiAKIAlpbnRl
bF9jb25uZWN0b3ItPnBvbGxlZCA9IERSTV9DT05ORUNUT1JfUE9MTF9IUEQ7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Bzci5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wc3IuYwppbmRleCA0YWI1NjhmODJkZGYuLmQwNWY5YWFh
OGMwNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wc3Iu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Bzci5jCkBAIC01MjQs
NyArNTI0LDcgQEAgc3RhdGljIHZvaWQgaHN3X2FjdGl2YXRlX3BzcjIoc3RydWN0IGludGVsX2Rw
ICppbnRlbF9kcCkKIAl2YWwgPSBwc3JfY29tcHV0ZV9pZGxlX2ZyYW1lcyhpbnRlbF9kcCkgPDwg
RURQX1BTUjJfSURMRV9GUkFNRV9TSElGVDsKIAogCXZhbCB8PSBFRFBfUFNSMl9FTkFCTEUgfCBF
RFBfU1VfVFJBQ0tfRU5BQkxFOwotCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTAgfHwg
SVNfR0VNSU5JTEFLRShkZXZfcHJpdikpCisJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAx
MCkKIAkJdmFsIHw9IEVEUF9ZX0NPT1JESU5BVEVfRU5BQkxFOwogCiAJdmFsIHw9IEVEUF9QU1Iy
X0ZSQU1FX0JFRk9SRV9TVShpbnRlbF9kcC0+cHNyLnNpbmtfc3luY19sYXRlbmN5ICsgMSk7CkBA
IC03NjUsNyArNzY1LDcgQEAgc3RhdGljIGJvb2wgaW50ZWxfcHNyMl9jb25maWdfdmFsaWQoc3Ry
dWN0IGludGVsX2RwICppbnRlbF9kcCwKIAkJcHNyX21heF9oID0gNTEyMDsKIAkJcHNyX21heF92
ID0gMzIwMDsKIAkJbWF4X2JwcCA9IDMwOwotCX0gZWxzZSBpZiAoRElTUExBWV9WRVIoZGV2X3By
aXYpID49IDEwIHx8IElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKSB7CisJfSBlbHNlIGlmIChESVNQ
TEFZX1ZFUihkZXZfcHJpdikgPj0gMTApIHsKIAkJcHNyX21heF9oID0gNDA5NjsKIAkJcHNyX21h
eF92ID0gMjMwNDsKIAkJbWF4X2JwcCA9IDI0OwpAQCAtOTA5LDggKzkwOSw3IEBAIHN0YXRpYyB2
b2lkIGludGVsX3Bzcl9lbmFibGVfc291cmNlKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsCiAJ
aWYgKElTX0hBU1dFTEwoZGV2X3ByaXYpIHx8IElTX0JST0FEV0VMTChkZXZfcHJpdikpCiAJCWhz
d19wc3Jfc2V0dXBfYXV4KGludGVsX2RwKTsKIAotCWlmIChpbnRlbF9kcC0+cHNyLnBzcjJfZW5h
YmxlZCAmJiAoSVNfRElTUExBWV9WRVIoZGV2X3ByaXYsIDkpICYmCi0JCQkJCSAgICFJU19HRU1J
TklMQUtFKGRldl9wcml2KSkpIHsKKwlpZiAoaW50ZWxfZHAtPnBzci5wc3IyX2VuYWJsZWQgJiYg
SVNfRElTUExBWV9WRVIoZGV2X3ByaXYsIDkpKSB7CiAJCWk5MTVfcmVnX3QgcmVnID0gQ0hJQ0tF
Tl9UUkFOUyhjcHVfdHJhbnNjb2Rlcik7CiAJCXUzMiBjaGlja2VuID0gaW50ZWxfZGVfcmVhZChk
ZXZfcHJpdiwgcmVnKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF92ZHNjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Zkc2Mu
YwppbmRleCAxY2NlZjE1OWE5YTAuLjUyNzJiYzgwY2UwNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF92ZHNjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS9pbnRlbF92ZHNjLmMKQEAgLTM0NiwxMSArMzQ2LDcgQEAgYm9vbCBpbnRlbF9k
c2Nfc291cmNlX3N1cHBvcnQoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3Rh
dGUpCiAJaWYgKERJU1BMQVlfVkVSKGk5MTUpID49IDEyKQogCQlyZXR1cm4gdHJ1ZTsKIAotCWlm
IChESVNQTEFZX1ZFUihpOTE1KSA+PSAxMCAmJgotCSAgICAocGlwZSAhPSBQSVBFX0EgfHwKLQkg
ICAgIChjcHVfdHJhbnNjb2RlciA9PSBUUkFOU0NPREVSX0VEUCB8fAotCSAgICAgIGNwdV90cmFu
c2NvZGVyID09IFRSQU5TQ09ERVJfRFNJXzAgfHwKLQkgICAgICBjcHVfdHJhbnNjb2RlciA9PSBU
UkFOU0NPREVSX0RTSV8xKSkpCisJaWYgKChESVNQTEFZX1ZFUihpOTE1KSA+PSAxMSB8fCBJU19D
QU5OT05MQUtFKGk5MTUpKSAmJiAocGlwZSAhPSBQSVBFX0EgfHwgKGNwdV90cmFuc2NvZGVyID09
IFRSQU5TQ09ERVJfRURQIHx8IGNwdV90cmFuc2NvZGVyID09IFRSQU5TQ09ERVJfRFNJXzAgfHwg
Y3B1X3RyYW5zY29kZXIgPT0gVFJBTlNDT0RFUl9EU0lfMSkpKQogCQlyZXR1cm4gdHJ1ZTsKIAog
CXJldHVybiBmYWxzZTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
c2tsX3VuaXZlcnNhbF9wbGFuZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9za2xf
dW5pdmVyc2FsX3BsYW5lLmMKaW5kZXggODliMjQ3NWEzZDYwLi5jNmQ3YjZjMDU0YjUgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvc2tsX3VuaXZlcnNhbF9wbGFuZS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvc2tsX3VuaXZlcnNhbF9wbGFuZS5j
CkBAIC0yOTQsNyArMjk0LDcgQEAgc2tsX3BsYW5lX3JhdGlvKGNvbnN0IHN0cnVjdCBpbnRlbF9j
cnRjX3N0YXRlICpjcnRjX3N0YXRlLAogCWNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZi
ID0gcGxhbmVfc3RhdGUtPmh3LmZiOwogCiAJaWYgKGZiLT5mb3JtYXQtPmNwcFswXSA9PSA4KSB7
Ci0JCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTAgfHwgSVNfR0VNSU5JTEFLRShkZXZf
cHJpdikpIHsKKwkJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCkgewogCQkJKm51bSA9
IDEwOwogCQkJKmRlbiA9IDg7CiAJCX0gZWxzZSB7CkBAIC0zMTcsNyArMzE3LDcgQEAgc3RhdGlj
IGludCBza2xfcGxhbmVfbWluX2NkY2xrKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpj
cnRjX3N0YXRlLAogCXNrbF9wbGFuZV9yYXRpbyhjcnRjX3N0YXRlLCBwbGFuZV9zdGF0ZSwgJm51
bSwgJmRlbik7CiAKIAkvKiB0d28gcGl4ZWxzIHBlciBjbG9jayBvbiBnbGsrICovCi0JaWYgKERJ
U1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCB8fCBJU19HRU1JTklMQUtFKGRldl9wcml2KSkKKwlp
ZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49IDEwKQogCQlkZW4gKj0gMjsKIAogCXJldHVybiBE
SVZfUk9VTkRfVVAocGl4ZWxfcmF0ZSAqIG51bSwgZGVuKTsKQEAgLTgxMCw3ICs4MTAsNyBAQCBz
dGF0aWMgdTMyIHNrbF9wbGFuZV9jdGxfY3J0Yyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0
ZSAqY3J0Y19zdGF0ZSkKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19p
OTE1KGNydGNfc3RhdGUtPnVhcGkuY3J0Yy0+ZGV2KTsKIAl1MzIgcGxhbmVfY3RsID0gMDsKIAot
CWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTAgfHwgSVNfR0VNSU5JTEFLRShkZXZfcHJp
dikpCisJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCkKIAkJcmV0dXJuIHBsYW5lX2N0
bDsKIAogCWlmIChjcnRjX3N0YXRlLT5nYW1tYV9lbmFibGUpCkBAIC04NDksNyArODQ5LDcgQEAg
c3RhdGljIHUzMiBza2xfcGxhbmVfY3RsKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpj
cnRjX3N0YXRlLAogCXBsYW5lX2N0bCB8PSBza2xfcGxhbmVfY3RsX3RpbGluZyhmYi0+bW9kaWZp
ZXIpOwogCXBsYW5lX2N0bCB8PSBza2xfcGxhbmVfY3RsX3JvdGF0ZShyb3RhdGlvbiAmIERSTV9N
T0RFX1JPVEFURV9NQVNLKTsKIAotCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTApCisJ
aWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMSB8fCBJU19DQU5OT05MQUtFKGRldl9wcml2
KSkKIAkJcGxhbmVfY3RsIHw9IGNubF9wbGFuZV9jdGxfZmxpcChyb3RhdGlvbiAmCiAJCQkJCQlE
Uk1fTU9ERV9SRUZMRUNUX01BU0spOwogCkBAIC05NzYsNyArOTc2LDcgQEAgc2tsX3Byb2dyYW1f
cGxhbmUoc3RydWN0IGludGVsX3BsYW5lICpwbGFuZSwKIAogCXBsYW5lX2N0bCB8PSBza2xfcGxh
bmVfY3RsX2NydGMoY3J0Y19zdGF0ZSk7CiAKLQlpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49
IDEwIHx8IElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKQorCWlmIChESVNQTEFZX1ZFUihkZXZfcHJp
dikgPj0gMTApCiAJCXBsYW5lX2NvbG9yX2N0bCA9IHBsYW5lX3N0YXRlLT5jb2xvcl9jdGwgfAog
CQkJZ2xrX3BsYW5lX2NvbG9yX2N0bF9jcnRjKGNydGNfc3RhdGUpOwogCkBAIC0xMDE3LDcgKzEw
MTcsNyBAQCBza2xfcHJvZ3JhbV9wbGFuZShzdHJ1Y3QgaW50ZWxfcGxhbmUgKnBsYW5lLAogCQlp
bnRlbF9kZV93cml0ZV9mdyhkZXZfcHJpdiwgUExBTkVfQ1VTX0NUTChwaXBlLCBwbGFuZV9pZCks
CiAJCQkJICBwbGFuZV9zdGF0ZS0+Y3VzX2N0bCk7CiAKLQlpZiAoRElTUExBWV9WRVIoZGV2X3By
aXYpID49IDEwIHx8IElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKQorCWlmIChESVNQTEFZX1ZFUihk
ZXZfcHJpdikgPj0gMTApCiAJCWludGVsX2RlX3dyaXRlX2Z3KGRldl9wcml2LCBQTEFORV9DT0xP
Ul9DVEwocGlwZSwgcGxhbmVfaWQpLAogCQkJCSAgcGxhbmVfY29sb3JfY3RsKTsKIApAQCAtMTIy
Miw3ICsxMjIyLDcgQEAgc3RhdGljIGludCBza2xfcGxhbmVfY2hlY2tfZHN0X2Nvb3JkaW5hdGVz
KGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3MKIAkgKiB0aGFuIHRoZSBjdXJz
b3IgZW5kaW5nIGxlc3MgdGhhbiA0IHBpeGVscyBmcm9tIHRoZSBsZWZ0IGVkZ2Ugb2YgdGhlCiAJ
ICogc2NyZWVuIG1heSBjYXVzZSBGSUZPIHVuZGVyZmxvdyBhbmQgZGlzcGxheSBjb3JydXB0aW9u
LgogCSAqLwotCWlmICgoSVNfR0VNSU5JTEFLRShkZXZfcHJpdikgfHwgSVNfQ0FOTk9OTEFLRShk
ZXZfcHJpdikpICYmCisJaWYgKElTX0RJU1BMQVlfVkVSKGRldl9wcml2LCAxMCkgJiYKIAkgICAg
KGNydGNfeCArIGNydGNfdyA8IDQgfHwgY3J0Y194ID4gcGlwZV9zcmNfdyAtIDQpKSB7CiAJCWRy
bV9kYmdfa21zKCZkZXZfcHJpdi0+ZHJtLAogCQkJICAgICJyZXF1ZXN0ZWQgcGxhbmUgWCAlcyBw
b3NpdGlvbiAlZCBpbnZhbGlkICh2YWxpZCByYW5nZSAlZC0lZClcbiIsCkBAIC0xMjYyLDcgKzEy
NjIsNyBAQCBzdGF0aWMgaW50IHNrbF9wbGFuZV9tYXhfc2NhbGUoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2LAogCSAqIHRoZSBiZXN0IGNhc2UuCiAJICogRklYTUUgbmVlZCB0byBw
cm9wZXJseSBjaGVjayB0aGlzIGxhdGVyLgogCSAqLwotCWlmIChESVNQTEFZX1ZFUihkZXZfcHJp
dikgPj0gMTAgfHwgSVNfR0VNSU5JTEFLRShkZXZfcHJpdikgfHwKKwlpZiAoRElTUExBWV9WRVIo
ZGV2X3ByaXYpID49IDEwIHx8CiAJICAgICFpbnRlbF9mb3JtYXRfaW5mb19pc195dXZfc2VtaXBs
YW5hcihmYi0+Zm9ybWF0LCBmYi0+bW9kaWZpZXIpKQogCQlyZXR1cm4gMHgzMDAwMCAtIDE7CiAJ
ZWxzZQpAQCAtMTY4Nyw3ICsxNjg3LDcgQEAgc3RhdGljIGludCBza2xfcGxhbmVfY2hlY2soc3Ry
dWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAKIAlwbGFuZV9zdGF0ZS0+Y3RsID0g
c2tsX3BsYW5lX2N0bChjcnRjX3N0YXRlLCBwbGFuZV9zdGF0ZSk7CiAKLQlpZiAoRElTUExBWV9W
RVIoZGV2X3ByaXYpID49IDEwIHx8IElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKQorCWlmIChESVNQ
TEFZX1ZFUihkZXZfcHJpdikgPj0gMTApCiAJCXBsYW5lX3N0YXRlLT5jb2xvcl9jdGwgPSBnbGtf
cGxhbmVfY29sb3JfY3RsKGNydGNfc3RhdGUsCiAJCQkJCQkJICAgICBwbGFuZV9zdGF0ZSk7CiAK
QEAgLTE3MTksNyArMTcxOSw3IEBAIHN0YXRpYyBib29sIHNrbF9wbGFuZV9oYXNfcGxhbmFyKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAlpZiAoSVNfU0tZTEFLRShkZXZfcHJp
dikgfHwgSVNfQlJPWFRPTihkZXZfcHJpdikpCiAJCXJldHVybiBmYWxzZTsKIAotCWlmIChJU19E
SVNQTEFZX1ZFUihkZXZfcHJpdiwgOSkgJiYgIUlTX0dFTUlOSUxBS0UoZGV2X3ByaXYpICYmIHBp
cGUgPT0gUElQRV9DKQorCWlmIChJU19ESVNQTEFZX1ZFUihkZXZfcHJpdiwgOSkgJiYgcGlwZSA9
PSBQSVBFX0MpCiAJCXJldHVybiBmYWxzZTsKIAogCWlmIChwbGFuZV9pZCAhPSBQTEFORV9QUklN
QVJZICYmIHBsYW5lX2lkICE9IFBMQU5FX1NQUklURTApCkBAIC0xNzc2LDcgKzE3NzYsNyBAQCBz
dGF0aWMgYm9vbCBza2xfcGxhbmVfaGFzX2NjcyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYsCiAJaWYgKHBsYW5lX2lkID09IFBMQU5FX0NVUlNPUikKIAkJcmV0dXJuIGZhbHNlOwog
Ci0JaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCkKKwlpZiAoRElTUExBWV9WRVIoZGV2
X3ByaXYpID49IDExIHx8IElTX0NBTk5PTkxBS0UoZGV2X3ByaXYpKQogCQlyZXR1cm4gdHJ1ZTsK
IAogCWlmIChJU19HRU1JTklMQUtFKGRldl9wcml2KSkKQEAgLTIwMTMsNyArMjAxMyw3IEBAIHNr
bF91bml2ZXJzYWxfcGxhbmVfY3JlYXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJp
diwKIAkJcGxhbmUtPm1pbl93aWR0aCA9IGljbF9wbGFuZV9taW5fd2lkdGg7CiAJCXBsYW5lLT5t
YXhfd2lkdGggPSBpY2xfcGxhbmVfbWF4X3dpZHRoOwogCQlwbGFuZS0+bWF4X2hlaWdodCA9IGlj
bF9wbGFuZV9tYXhfaGVpZ2h0OwotCX0gZWxzZSBpZiAoRElTUExBWV9WRVIoZGV2X3ByaXYpID49
IDEwIHx8IElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKSB7CisJfSBlbHNlIGlmIChESVNQTEFZX1ZF
UihkZXZfcHJpdikgPj0gMTApIHsKIAkJcGxhbmUtPm1heF93aWR0aCA9IGdsa19wbGFuZV9tYXhf
d2lkdGg7CiAJCXBsYW5lLT5tYXhfaGVpZ2h0ID0gc2tsX3BsYW5lX21heF9oZWlnaHQ7CiAJfSBl
bHNlIHsKQEAgLTIwMzksNyArMjAzOSw3IEBAIHNrbF91bml2ZXJzYWxfcGxhbmVfY3JlYXRlKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAlpZiAoRElTUExBWV9WRVIoZGV2X3By
aXYpID49IDExKQogCQlmb3JtYXRzID0gaWNsX2dldF9wbGFuZV9mb3JtYXRzKGRldl9wcml2LCBw
aXBlLAogCQkJCQkJcGxhbmVfaWQsICZudW1fZm9ybWF0cyk7Ci0JZWxzZSBpZiAoRElTUExBWV9W
RVIoZGV2X3ByaXYpID49IDEwIHx8IElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKQorCWVsc2UgaWYg
KERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMCkKIAkJZm9ybWF0cyA9IGdsa19nZXRfcGxhbmVf
Zm9ybWF0cyhkZXZfcHJpdiwgcGlwZSwKIAkJCQkJCXBsYW5lX2lkLCAmbnVtX2Zvcm1hdHMpOwog
CWVsc2UKQEAgLTIwNzYsNyArMjA3Niw3IEBAIHNrbF91bml2ZXJzYWxfcGxhbmVfY3JlYXRlKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJRFJNX01PREVfUk9UQVRFXzAgfCBE
Uk1fTU9ERV9ST1RBVEVfOTAgfAogCQlEUk1fTU9ERV9ST1RBVEVfMTgwIHwgRFJNX01PREVfUk9U
QVRFXzI3MDsKIAotCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTApCisJaWYgKERJU1BM
QVlfVkVSKGRldl9wcml2KSA+PSAxMSB8fCBJU19DQU5OT05MQUtFKGRldl9wcml2KSkKIAkJc3Vw
cG9ydGVkX3JvdGF0aW9ucyB8PSBEUk1fTU9ERV9SRUZMRUNUX1g7CiAKIAlkcm1fcGxhbmVfY3Jl
YXRlX3JvdGF0aW9uX3Byb3BlcnR5KCZwbGFuZS0+YmFzZSwKQEAgLTIwODUsNyArMjA4NSw3IEBA
IHNrbF91bml2ZXJzYWxfcGxhbmVfY3JlYXRlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiwKIAogCXN1cHBvcnRlZF9jc2MgPSBCSVQoRFJNX0NPTE9SX1lDQkNSX0JUNjAxKSB8IEJJ
VChEUk1fQ09MT1JfWUNCQ1JfQlQ3MDkpOwogCi0JaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+
PSAxMCB8fCBJU19HRU1JTklMQUtFKGRldl9wcml2KSkKKwlpZiAoRElTUExBWV9WRVIoZGV2X3By
aXYpID49IDEwKQogCQlzdXBwb3J0ZWRfY3NjIHw9IEJJVChEUk1fQ09MT1JfWUNCQ1JfQlQyMDIw
KTsKIAogCWRybV9wbGFuZV9jcmVhdGVfY29sb3JfcHJvcGVydGllcygmcGxhbmUtPmJhc2UsCkBA
IC0yMTA2LDcgKzIxMDYsNyBAQCBza2xfdW5pdmVyc2FsX3BsYW5lX2NyZWF0ZShzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJaWYgKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAx
MikKIAkJZHJtX3BsYW5lX2VuYWJsZV9mYl9kYW1hZ2VfY2xpcHMoJnBsYW5lLT5iYXNlKTsKIAot
CWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTApCisJaWYgKERJU1BMQVlfVkVSKGRldl9w
cml2KSA+PSAxMSB8fCBJU19DQU5OT05MQUtFKGRldl9wcml2KSkKIAkJZHJtX3BsYW5lX2NyZWF0
ZV9zY2FsaW5nX2ZpbHRlcl9wcm9wZXJ0eSgmcGxhbmUtPmJhc2UsCiAJCQkJCQlCSVQoRFJNX1ND
QUxJTkdfRklMVEVSX0RFRkFVTFQpIHwKIAkJCQkJCUJJVChEUk1fU0NBTElOR19GSUxURVJfTkVB
UkVTVF9ORUlHSEJPUikpOwpAQCAtMjE2NSw3ICsyMTY1LDcgQEAgc2tsX2dldF9pbml0aWFsX3Bs
YW5lX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YywKIAllbHNlCiAJCXBpeGVsX2Zvcm1h
dCA9IHZhbCAmIFBMQU5FX0NUTF9GT1JNQVRfTUFTSzsKIAotCWlmIChESVNQTEFZX1ZFUihkZXZf
cHJpdikgPj0gMTAgfHwgSVNfR0VNSU5JTEFLRShkZXZfcHJpdikpIHsKKwlpZiAoRElTUExBWV9W
RVIoZGV2X3ByaXYpID49IDEwKSB7CiAJCWFscGhhID0gaW50ZWxfZGVfcmVhZChkZXZfcHJpdiwK
IAkJCQkgICAgICBQTEFORV9DT0xPUl9DVEwocGlwZSwgcGxhbmVfaWQpKTsKIAkJYWxwaGEgJj0g
UExBTkVfQ09MT1JfQUxQSEFfTUFTSzsKQEAgLTIyMjcsOCArMjIyNyw3IEBAIHNrbF9nZXRfaW5p
dGlhbF9wbGFuZV9jb25maWcoc3RydWN0IGludGVsX2NydGMgKmNydGMsCiAJCWJyZWFrOwogCX0K
IAotCWlmIChESVNQTEFZX1ZFUihkZXZfcHJpdikgPj0gMTAgJiYKLQkgICAgdmFsICYgUExBTkVf
Q1RMX0ZMSVBfSE9SSVpPTlRBTCkKKwlpZiAoKERJU1BMQVlfVkVSKGRldl9wcml2KSA+PSAxMSB8
fCBJU19DQU5OT05MQUtFKGRldl9wcml2KSkgJiYgdmFsICYgUExBTkVfQ1RMX0ZMSVBfSE9SSVpP
TlRBTCkKIAkJcGxhbmVfY29uZmlnLT5yb3RhdGlvbiB8PSBEUk1fTU9ERV9SRUZMRUNUX1g7CiAK
IAkvKiA5MC8yNzAgZGVncmVlIHJvdGF0aW9uIHdvdWxkIHJlcXVpcmUgZXh0cmEgd29yayAqLwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wY2kuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfcGNpLmMKaW5kZXggZDMyNzg4MmQ2ZDRiLi40ODA1NTM3NDY3OTQgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGNpLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9wY2kuYwpAQCAtNzIzLDYgKzcyMyw3IEBAIHN0YXRpYyBjb25zdCBz
dHJ1Y3QgaW50ZWxfZGV2aWNlX2luZm8gYnh0X2luZm8gPSB7CiBzdGF0aWMgY29uc3Qgc3RydWN0
IGludGVsX2RldmljZV9pbmZvIGdsa19pbmZvID0gewogCUdFTjlfTFBfRkVBVFVSRVMsCiAJUExB
VEZPUk0oSU5URUxfR0VNSU5JTEFLRSksCisJLmRpc3BsYXkudmVyc2lvbiA9IDEwLAogCS5kZGJf
c2l6ZSA9IDEwMjQsCiAJR0xLX0NPTE9SUywKIH07Ci0tIAoyLjI1LjQKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QK
SW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C6B3EE0366
	for <lists+intel-gfx@lfdr.de>; Tue, 22 Oct 2019 13:51:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 87D5A6E5FC;
	Tue, 22 Oct 2019 11:51:49 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DB3546E5F5
 for <intel-gfx@lists.freedesktop.org>; Tue, 22 Oct 2019 11:51:44 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18924476-1500050 
 for multiple; Tue, 22 Oct 2019 12:51:39 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue, 22 Oct 2019 12:51:24 +0100
Message-Id: <20191022115126.18746-2-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0.rc0
In-Reply-To: <20191022115126.18746-1-chris@chris-wilson.co.uk>
References: <20191022115126.18746-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 2/4] drm/i915/gt: Tidy up debug-warns for the
 mocs control table
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QXMgd2UgYWx3YXlzIHJ1biBuZXcgcGxhdGZvcm1zIHRocm91Z2ggQ0ksIHdlIG9ubHkgbmVlZCB0
aGUgZGVidWcgY29kZQpjb21waWxlZCBpbiBkdXJpbmcgQ0kgcnVucy4KClNpZ25lZC1vZmYtYnk6
IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgotLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX21vY3MuYyB8IDMwICsrKysrKysrKystLS0tLS0tLS0tLS0tLS0t
LS0KIDEgZmlsZSBjaGFuZ2VkLCAxMSBpbnNlcnRpb25zKCspLCAxOSBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9tb2NzLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9tb2NzLmMKaW5kZXggYWVhMzg5NmNjMTM5Li43NDlkYzcz
ZWE5MzggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX21vY3MuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9tb2NzLmMKQEAgLTI5MCw0NCArMjkw
LDQyIEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2k5MTVfbW9jc19lbnRyeSBpY2VsYWtlX21v
Y3NfdGFibGVbXSA9IHsKIHN0YXRpYyBib29sIGdldF9tb2NzX3NldHRpbmdzKGNvbnN0IHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCQkJICAgICAgc3RydWN0IGRybV9pOTE1X21vY3Nf
dGFibGUgKnRhYmxlKQogewotCWJvb2wgcmVzdWx0ID0gZmFsc2U7Ci0KIAlpZiAoSU5URUxfR0VO
KGk5MTUpID49IDEyKSB7CiAJCXRhYmxlLT5zaXplICA9IEFSUkFZX1NJWkUodGlnZXJsYWtlX21v
Y3NfdGFibGUpOwogCQl0YWJsZS0+dGFibGUgPSB0aWdlcmxha2VfbW9jc190YWJsZTsKIAkJdGFi
bGUtPm5fZW50cmllcyA9IEdFTjExX05VTV9NT0NTX0VOVFJJRVM7Ci0JCXJlc3VsdCA9IHRydWU7
CiAJfSBlbHNlIGlmIChJU19HRU4oaTkxNSwgMTEpKSB7CiAJCXRhYmxlLT5zaXplICA9IEFSUkFZ
X1NJWkUoaWNlbGFrZV9tb2NzX3RhYmxlKTsKIAkJdGFibGUtPnRhYmxlID0gaWNlbGFrZV9tb2Nz
X3RhYmxlOwogCQl0YWJsZS0+bl9lbnRyaWVzID0gR0VOMTFfTlVNX01PQ1NfRU5UUklFUzsKLQkJ
cmVzdWx0ID0gdHJ1ZTsKIAl9IGVsc2UgaWYgKElTX0dFTjlfQkMoaTkxNSkgfHwgSVNfQ0FOTk9O
TEFLRShpOTE1KSkgewogCQl0YWJsZS0+c2l6ZSAgPSBBUlJBWV9TSVpFKHNreWxha2VfbW9jc190
YWJsZSk7CiAJCXRhYmxlLT5uX2VudHJpZXMgPSBHRU45X05VTV9NT0NTX0VOVFJJRVM7CiAJCXRh
YmxlLT50YWJsZSA9IHNreWxha2VfbW9jc190YWJsZTsKLQkJcmVzdWx0ID0gdHJ1ZTsKIAl9IGVs
c2UgaWYgKElTX0dFTjlfTFAoaTkxNSkpIHsKIAkJdGFibGUtPnNpemUgID0gQVJSQVlfU0laRShi
cm94dG9uX21vY3NfdGFibGUpOwogCQl0YWJsZS0+bl9lbnRyaWVzID0gR0VOOV9OVU1fTU9DU19F
TlRSSUVTOwogCQl0YWJsZS0+dGFibGUgPSBicm94dG9uX21vY3NfdGFibGU7Ci0JCXJlc3VsdCA9
IHRydWU7CiAJfSBlbHNlIHsKIAkJV0FSTl9PTkNFKElOVEVMX0dFTihpOTE1KSA+PSA5LAogCQkJ
ICAiUGxhdGZvcm0gdGhhdCBzaG91bGQgaGF2ZSBhIE1PQ1MgdGFibGUgZG9lcyBub3QuXG4iKTsK
KwkJcmV0dXJuIGZhbHNlOwogCX0KIAorCWlmIChHRU1fREVCVUdfV0FSTl9PTih0YWJsZS0+c2l6
ZSA+IHRhYmxlLT5uX2VudHJpZXMpKQorCQlyZXR1cm4gZmFsc2U7CisKIAkvKiBXYURpc2FibGVT
a2lwQ2FjaGluZzpza2wsYnh0LGtibCxnbGsgKi8KIAlpZiAoSVNfR0VOKGk5MTUsIDkpKSB7CiAJ
CWludCBpOwogCiAJCWZvciAoaSA9IDA7IGkgPCB0YWJsZS0+c2l6ZTsgaSsrKQotCQkJaWYgKFdB
Uk5fT04odGFibGUtPnRhYmxlW2ldLmwzY2NfdmFsdWUgJgotCQkJCSAgICAoTDNfRVNDKDEpIHwg
TDNfU0NDKDB4NykpKSkKKwkJCWlmIChHRU1fREVCVUdfV0FSTl9PTih0YWJsZS0+dGFibGVbaV0u
bDNjY192YWx1ZSAmCisJCQkJCSAgICAgIChMM19FU0MoMSkgfCBMM19TQ0MoMHg3KSkpKQogCQkJ
CXJldHVybiBmYWxzZTsKIAl9CiAKLQlyZXR1cm4gcmVzdWx0OworCXJldHVybiB0cnVlOwogfQog
CiBzdGF0aWMgaTkxNV9yZWdfdCBtb2NzX3JlZ2lzdGVyKGNvbnN0IHN0cnVjdCBpbnRlbF9lbmdp
bmVfY3MgKmVuZ2luZSwgaW50IGluZGV4KQpAQCAtMzk2LDkgKzM5NCw3IEBAIHN0YXRpYyB1MTYg
Z2V0X2VudHJ5X2wzY2MoY29uc3Qgc3RydWN0IGRybV9pOTE1X21vY3NfdGFibGUgKnRhYmxlLAog
CXJldHVybiB0YWJsZS0+dGFibGVbSTkxNV9NT0NTX1BURV0ubDNjY192YWx1ZTsKIH0KIAotc3Rh
dGljIGlubGluZSB1MzIgbDNjY19jb21iaW5lKGNvbnN0IHN0cnVjdCBkcm1faTkxNV9tb2NzX3Rh
YmxlICp0YWJsZSwKLQkJCSAgICAgICB1MTYgbG93LAotCQkJICAgICAgIHUxNiBoaWdoKQorc3Rh
dGljIGlubGluZSB1MzIgbDNjY19jb21iaW5lKHUxNiBsb3csIHUxNiBoaWdoKQogewogCXJldHVy
biBsb3cgfCAodTMyKWhpZ2ggPDwgMTY7CiB9CkBAIC00MTYsNyArNDEyLDcgQEAgc3RhdGljIHZv
aWQgaW5pdF9sM2NjX3RhYmxlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAogCQlp
bnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLAogCQkJCSAgIEdFTjlfTE5DRkNNT0NTKGkpLAotCQkJ
CSAgIGwzY2NfY29tYmluZSh0YWJsZSwgbG93LCBoaWdoKSk7CisJCQkJICAgbDNjY19jb21iaW5l
KGxvdywgaGlnaCkpOwogCX0KIAogCS8qIE9kZCB0YWJsZSBzaXplIC0gMSBsZWZ0IG92ZXIgKi8K
QEAgLTQyNSw3ICs0MjEsNyBAQCBzdGF0aWMgdm9pZCBpbml0X2wzY2NfdGFibGUoc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCiAJCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCiAJ
CQkJICAgR0VOOV9MTkNGQ01PQ1MoaSksCi0JCQkJICAgbDNjY19jb21iaW5lKHRhYmxlLCBsb3cs
IHVudXNlZF92YWx1ZSkpOworCQkJCSAgIGwzY2NfY29tYmluZShsb3csIHVudXNlZF92YWx1ZSkp
OwogCQlpKys7CiAJfQogCkBAIC00MzMsOCArNDI5LDcgQEAgc3RhdGljIHZvaWQgaW5pdF9sM2Nj
X3RhYmxlKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAlmb3IgKDsgaSA8IHRhYmxl
LT5uX2VudHJpZXMgLyAyOyBpKyspCiAJCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCiAJCQkJ
ICAgR0VOOV9MTkNGQ01PQ1MoaSksCi0JCQkJICAgbDNjY19jb21iaW5lKHRhYmxlLCB1bnVzZWRf
dmFsdWUsCi0JCQkJCQl1bnVzZWRfdmFsdWUpKTsKKwkJCQkgICBsM2NjX2NvbWJpbmUodW51c2Vk
X3ZhbHVlLCB1bnVzZWRfdmFsdWUpKTsKIH0KIAogdm9pZCBpbnRlbF9tb2NzX2luaXRfZW5naW5l
KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKQEAgLTQ2Niw5ICs0NjEsNiBAQCBzdGF0
aWMgdm9pZCBpbnRlbF9tb2NzX2luaXRfZ2xvYmFsKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiAJaWYg
KCFnZXRfbW9jc19zZXR0aW5ncyhndC0+aTkxNSwgJnRhYmxlKSkKIAkJcmV0dXJuOwogCi0JaWYg
KEdFTV9ERUJVR19XQVJOX09OKHRhYmxlLnNpemUgPiB0YWJsZS5uX2VudHJpZXMpKQotCQlyZXR1
cm47Ci0KIAlmb3IgKGluZGV4ID0gMDsgaW5kZXggPCB0YWJsZS5zaXplOyBpbmRleCsrKQogCQlp
bnRlbF91bmNvcmVfd3JpdGUodW5jb3JlLAogCQkJCSAgIEdFTjEyX0dMT0JBTF9NT0NTKGluZGV4
KSwKLS0gCjIuMjQuMC5yYzAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2lu
dGVsLWdmeA==

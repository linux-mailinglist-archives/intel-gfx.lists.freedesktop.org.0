Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 14100B286C
	for <lists+intel-gfx@lfdr.de>; Sat, 14 Sep 2019 00:33:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 974EA6F48B;
	Fri, 13 Sep 2019 22:32:59 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3E2786F489
 for <intel-gfx@lists.freedesktop.org>; Fri, 13 Sep 2019 22:32:57 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 13 Sep 2019 15:32:56 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,489,1559545200"; d="scan'208";a="337037964"
Received: from josouza-mobl.jf.intel.com (HELO josouza-MOBL.intel.com)
 ([10.24.9.135])
 by orsmga004.jf.intel.com with ESMTP; 13 Sep 2019 15:32:56 -0700
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 13 Sep 2019 15:32:40 -0700
Message-Id: <20190913223251.354877-4-jose.souza@intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20190913223251.354877-1-jose.souza@intel.com>
References: <20190913223251.354877-1-jose.souza@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 03/14] drm/i915/tgl: Finish modular FIA support
 on registers
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SWYgcGxhdGZvcm0gc3VwcG9ydHMgYW5kIGhhcyBtb2R1bGFyIEZJQSBpcyBlbmFibGVkLCB0aGUg
cmVnaXN0ZXJzCmJpdHMgYWxzbyBjaGFuZ2UsIGV4YW1wbGU6IHJlYWRpbmcgVEMzIHJlZ2lzdGVy
cyB3aXRoIG1vZHVsYXIgRklBCmVuYWJsZWQsIGRyaXZlciBzaG91bGQgcmVhZCBmcm9tIEZJQTIg
YnV0IHdpdGggVEMxIGJpdHMgb2Zmc2V0cy4KCkl0IGlzIGRlc2NyaWJlZCBpbiBCU3BlYyA1MDIz
MSBmb3IgREZMRVhEUFNQLCBvdGhlciByZWdpc3RlcnMgZG9uJ3QKaGF2ZSB0aGUgQlNwZWMgZGVz
Y3JpcHRpb24gYnV0IHRlc3RpbmcgaW4gcmVhbCBoYXJkd2FyZSBoYXZlIHByb3Zlbgp0aGF0IGl0
IGhhZCBtb3ZlZCBmb3IgYWxsIG90aGVyIHJlZ2lzdGVycyB0b28uCgpTaWduZWQtb2ZmLWJ5OiBK
b3PDqSBSb2JlcnRvIGRlIFNvdXphIDxqb3NlLnNvdXphQGludGVsLmNvbT4KLS0tCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyB8ICAyICsKIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdGMuYyAgICAgIHwgNTIgKysrKysrKysrKysrLS0tLS0t
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdGMuaCAgICAgIHwgIDIgKwog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCAgICAgICAgICAgICAgfCAgMyArKwogZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCAgICAgICAgICAgICAgfCA0NSArKysrKysrKy0t
LS0tLS0tLQogNSBmaWxlcyBjaGFuZ2VkLCA2MSBpbnNlcnRpb25zKCspLCA0MyBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4
IDRlMDAxMTEzZTgyOC4uY2QwYTI0OGJmZTQ5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpAQCAtMTUzODQsNiArMTUzODQsOCBAQCBzdGF0aWMgdm9p
ZCBpbnRlbF9zZXR1cF9vdXRwdXRzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikK
IAlpZiAoIUhBU19ESVNQTEFZKGRldl9wcml2KSkKIAkJcmV0dXJuOwogCisJaW50ZWxfdGNfaW5p
dChkZXZfcHJpdik7CisKIAlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMikgewogCQkvKiBU
T0RPOiBpbml0aWFsaXplIFRDIHBvcnRzIGFzIHdlbGwgKi8KIAkJaW50ZWxfZGRpX2luaXQoZGV2
X3ByaXYsIFBPUlRfQSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX3RjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3RjLmMKaW5k
ZXggM2E3MzAyZTM2MGNjLi5mYzVkMGU3M2NmMjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfdGMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX3RjLmMKQEAgLTIzLDE5ICsyMywyMSBAQCBzdGF0aWMgY29uc3QgY2hhciAqdGNf
cG9ydF9tb2RlX25hbWUoZW51bSB0Y19wb3J0X21vZGUgbW9kZSkKIAlyZXR1cm4gbmFtZXNbbW9k
ZV07CiB9CiAKLXN0YXRpYyBib29sIGhhc19tb2R1bGFyX2ZpYShzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSkKK3ZvaWQgaW50ZWxfdGNfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSkKIHsKKwl1MzIgdmFsOworCiAJaWYgKCFJTlRFTF9JTkZPKGk5MTUpLT5kaXNwbGF5Lmhh
c19tb2R1bGFyX2ZpYSkKLQkJcmV0dXJuIGZhbHNlOworCQlyZXR1cm47CiAKLQlyZXR1cm4gaW50
ZWxfdW5jb3JlX3JlYWQoJmk5MTUtPnVuY29yZSwKLQkJCQkgUE9SVF9UWF9ERkxFWERQU1AoRklB
MSkpICYgTU9EVUxBUl9GSUFfTUFTSzsKKwl2YWwgPSBpbnRlbF91bmNvcmVfcmVhZCgmaTkxNS0+
dW5jb3JlLCBQT1JUX1RYX0RGTEVYRFBTUChGSUExKSk7CisJaTkxNS0+aGFzX21vZHVsYXJfZmlh
ID0gdmFsICYgTU9EVUxBUl9GSUFfTUFTSzsKIH0KIAogc3RhdGljIGVudW0gcGh5X2ZpYSB0Y19w
b3J0X3RvX2ZpYShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKIAkJCQkgICBlbnVtIHRj
X3BvcnQgdGNfcG9ydCkKIHsKLQlpZiAoIWhhc19tb2R1bGFyX2ZpYShpOTE1KSkKKwlpZiAoIWk5
MTUtPmhhc19tb2R1bGFyX2ZpYSkKIAkJcmV0dXJuIEZJQTE7CiAKIAkvKgpAQCAtNTEsMTQgKzUz
LDE1IEBAIHUzMiBpbnRlbF90Y19wb3J0X2dldF9sYW5lX21hc2soc3RydWN0IGludGVsX2RpZ2l0
YWxfcG9ydCAqZGlnX3BvcnQpCiAJZW51bSB0Y19wb3J0IHRjX3BvcnQgPSBpbnRlbF9wb3J0X3Rv
X3RjKGk5MTUsIGRpZ19wb3J0LT5iYXNlLnBvcnQpOwogCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVu
Y29yZSA9ICZpOTE1LT51bmNvcmU7CiAJdTMyIGxhbmVfbWFzazsKKwlib29sIG1vZF9maWEgPSBp
OTE1LT5oYXNfbW9kdWxhcl9maWE7CiAKIAlsYW5lX21hc2sgPSBpbnRlbF91bmNvcmVfcmVhZCh1
bmNvcmUsCiAJCQkJICAgICAgUE9SVF9UWF9ERkxFWERQU1AoZGlnX3BvcnQtPnRjX3BoeV9maWEp
KTsKIAogCVdBUk5fT04obGFuZV9tYXNrID09IDB4ZmZmZmZmZmYpOwogCi0JcmV0dXJuIChsYW5l
X21hc2sgJiBEUF9MQU5FX0FTU0lHTk1FTlRfTUFTSyh0Y19wb3J0KSkgPj4KLQkgICAgICAgRFBf
TEFORV9BU1NJR05NRU5UX1NISUZUKHRjX3BvcnQpOworCXJldHVybiAobGFuZV9tYXNrICYgRFBf
TEFORV9BU1NJR05NRU5UX01BU0sobW9kX2ZpYSwgdGNfcG9ydCkpID4+CisJICAgICAgIERQX0xB
TkVfQVNTSUdOTUVOVF9TSElGVChtb2RfZmlhLCB0Y19wb3J0KTsKIH0KIAogdTMyIGludGVsX3Rj
X3BvcnRfZ2V0X3Bpbl9hc3NpZ25tZW50X21hc2soc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAq
ZGlnX3BvcnQpCkBAIC02Niw2ICs2OSw3IEBAIHUzMiBpbnRlbF90Y19wb3J0X2dldF9waW5fYXNz
aWdubWVudF9tYXNrKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0KQogCXN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShkaWdfcG9ydC0+YmFzZS5iYXNlLmRl
dik7CiAJZW51bSB0Y19wb3J0IHRjX3BvcnQgPSBpbnRlbF9wb3J0X3RvX3RjKGk5MTUsIGRpZ19w
b3J0LT5iYXNlLnBvcnQpOwogCXN0cnVjdCBpbnRlbF91bmNvcmUgKnVuY29yZSA9ICZpOTE1LT51
bmNvcmU7CisJYm9vbCBtb2RfZmlhID0gaTkxNS0+aGFzX21vZHVsYXJfZmlhOwogCXUzMiBwaW5f
bWFzazsKIAogCXBpbl9tYXNrID0gaW50ZWxfdW5jb3JlX3JlYWQodW5jb3JlLApAQCAtNzMsOCAr
NzcsOCBAQCB1MzIgaW50ZWxfdGNfcG9ydF9nZXRfcGluX2Fzc2lnbm1lbnRfbWFzayhzdHJ1Y3Qg
aW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCkKIAogCVdBUk5fT04ocGluX21hc2sgPT0gMHhm
ZmZmZmZmZik7CiAKLQlyZXR1cm4gKHBpbl9tYXNrICYgRFBfUElOX0FTU0lHTk1FTlRfTUFTSyh0
Y19wb3J0KSkgPj4KLQkgICAgICAgRFBfUElOX0FTU0lHTk1FTlRfU0hJRlQodGNfcG9ydCk7CisJ
cmV0dXJuIChwaW5fbWFzayAmIERQX1BJTl9BU1NJR05NRU5UX01BU0sobW9kX2ZpYSwgdGNfcG9y
dCkpID4+CisJICAgICAgIERQX1BJTl9BU1NJR05NRU5UX1NISUZUKG1vZF9maWEsIHRjX3BvcnQp
OwogfQogCiBpbnQgaW50ZWxfdGNfcG9ydF9maWFfbWF4X2xhbmVfY291bnQoc3RydWN0IGludGVs
X2RpZ2l0YWxfcG9ydCAqZGlnX3BvcnQpCkBAIC0xMTQsMjUgKzExOCwyOCBAQCB2b2lkIGludGVs
X3RjX3BvcnRfc2V0X2ZpYV9sYW5lX2NvdW50KHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRp
Z19wb3J0LAogCWVudW0gdGNfcG9ydCB0Y19wb3J0ID0gaW50ZWxfcG9ydF90b190YyhpOTE1LCBk
aWdfcG9ydC0+YmFzZS5wb3J0KTsKIAlib29sIGxhbmVfcmV2ZXJzYWwgPSBkaWdfcG9ydC0+c2F2
ZWRfcG9ydF9iaXRzICYgRERJX0JVRl9QT1JUX1JFVkVSU0FMOwogCXN0cnVjdCBpbnRlbF91bmNv
cmUgKnVuY29yZSA9ICZpOTE1LT51bmNvcmU7CisJYm9vbCBtb2RfZmlhID0gaTkxNS0+aGFzX21v
ZHVsYXJfZmlhOwogCXUzMiB2YWw7CiAKIAlXQVJOX09OKGxhbmVfcmV2ZXJzYWwgJiYgZGlnX3Bv
cnQtPnRjX21vZGUgIT0gVENfUE9SVF9MRUdBQ1kpOwogCiAJdmFsID0gaW50ZWxfdW5jb3JlX3Jl
YWQodW5jb3JlLAogCQkJCVBPUlRfVFhfREZMRVhEUE1MRTEoZGlnX3BvcnQtPnRjX3BoeV9maWEp
KTsKLQl2YWwgJj0gfkRGTEVYRFBNTEUxX0RQTUxFVENfTUFTSyh0Y19wb3J0KTsKKwl2YWwgJj0g
fkRGTEVYRFBNTEUxX0RQTUxFVENfTUFTSyhtb2RfZmlhLCB0Y19wb3J0KTsKIAogCXN3aXRjaCAo
cmVxdWlyZWRfbGFuZXMpIHsKIAljYXNlIDE6Ci0JCXZhbCB8PSBsYW5lX3JldmVyc2FsID8gREZM
RVhEUE1MRTFfRFBNTEVUQ19NTDModGNfcG9ydCkgOgotCQkJREZMRVhEUE1MRTFfRFBNTEVUQ19N
TDAodGNfcG9ydCk7CisJCXZhbCB8PSBsYW5lX3JldmVyc2FsID8KKwkJCURGTEVYRFBNTEUxX0RQ
TUxFVENfTUwzKG1vZF9maWEsIHRjX3BvcnQpIDoKKwkJCURGTEVYRFBNTEUxX0RQTUxFVENfTUww
KG1vZF9maWEsIHRjX3BvcnQpOwogCQlicmVhazsKIAljYXNlIDI6Ci0JCXZhbCB8PSBsYW5lX3Jl
dmVyc2FsID8gREZMRVhEUE1MRTFfRFBNTEVUQ19NTDNfMih0Y19wb3J0KSA6Ci0JCQlERkxFWERQ
TUxFMV9EUE1MRVRDX01MMV8wKHRjX3BvcnQpOworCQl2YWwgfD0gbGFuZV9yZXZlcnNhbCA/CisJ
CQlERkxFWERQTUxFMV9EUE1MRVRDX01MM18yKG1vZF9maWEsIHRjX3BvcnQpIDoKKwkJCURGTEVY
RFBNTEUxX0RQTUxFVENfTUwxXzAobW9kX2ZpYSwgdGNfcG9ydCk7CiAJCWJyZWFrOwogCWNhc2Ug
NDoKLQkJdmFsIHw9IERGTEVYRFBNTEUxX0RQTUxFVENfTUwzXzAodGNfcG9ydCk7CisJCXZhbCB8
PSBERkxFWERQTUxFMV9EUE1MRVRDX01MM18wKG1vZF9maWEsIHRjX3BvcnQpOwogCQlicmVhazsK
IAlkZWZhdWx0OgogCQlNSVNTSU5HX0NBU0UocmVxdWlyZWRfbGFuZXMpOwpAQCAtMTgwLDkgKzE4
Nyw5IEBAIHN0YXRpYyB1MzIgdGNfcG9ydF9saXZlX3N0YXR1c19tYXNrKHN0cnVjdCBpbnRlbF9k
aWdpdGFsX3BvcnQgKmRpZ19wb3J0KQogCQlyZXR1cm4gbWFzazsKIAl9CiAKLQlpZiAodmFsICYg
VENfTElWRV9TVEFURV9UQlQodGNfcG9ydCkpCisJaWYgKHZhbCAmIFRDX0xJVkVfU1RBVEVfVEJU
KGk5MTUtPmhhc19tb2R1bGFyX2ZpYSwgdGNfcG9ydCkpCiAJCW1hc2sgfD0gQklUKFRDX1BPUlRf
VEJUX0FMVCk7Ci0JaWYgKHZhbCAmIFRDX0xJVkVfU1RBVEVfVEModGNfcG9ydCkpCisJaWYgKHZh
bCAmIFRDX0xJVkVfU1RBVEVfVEMoaTkxNS0+aGFzX21vZHVsYXJfZmlhLCB0Y19wb3J0KSkKIAkJ
bWFzayB8PSBCSVQoVENfUE9SVF9EUF9BTFQpOwogCiAJaWYgKGludGVsX3VuY29yZV9yZWFkKHVu
Y29yZSwgU0RFSVNSKSAmIFNERV9UQ19IT1RQTFVHX0lDUCh0Y19wb3J0KSkKQEAgLTIwMCw2ICsy
MDcsNyBAQCBzdGF0aWMgYm9vbCBpY2xfdGNfcGh5X3N0YXR1c19jb21wbGV0ZShzdHJ1Y3QgaW50
ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCkKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSA9IHRvX2k5MTUoZGlnX3BvcnQtPmJhc2UuYmFzZS5kZXYpOwogCWVudW0gdGNfcG9ydCB0Y19w
b3J0ID0gaW50ZWxfcG9ydF90b190YyhpOTE1LCBkaWdfcG9ydC0+YmFzZS5wb3J0KTsKIAlzdHJ1
Y3QgaW50ZWxfdW5jb3JlICp1bmNvcmUgPSAmaTkxNS0+dW5jb3JlOworCWJvb2wgbW9kX2ZpYSA9
IGk5MTUtPmhhc19tb2R1bGFyX2ZpYTsKIAl1MzIgdmFsOwogCiAJdmFsID0gaW50ZWxfdW5jb3Jl
X3JlYWQodW5jb3JlLApAQCAtMjEwLDcgKzIxOCw3IEBAIHN0YXRpYyBib29sIGljbF90Y19waHlf
c3RhdHVzX2NvbXBsZXRlKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0KQogCQly
ZXR1cm4gZmFsc2U7CiAJfQogCi0JcmV0dXJuIHZhbCAmIERQX1BIWV9NT0RFX1NUQVRVU19DT01Q
TEVURUQodGNfcG9ydCk7CisJcmV0dXJuIHZhbCAmIERQX1BIWV9NT0RFX1NUQVRVU19DT01QTEVU
RUQobW9kX2ZpYSwgdGNfcG9ydCk7CiB9CiAKIHN0YXRpYyBib29sIGljbF90Y19waHlfc2V0X3Nh
ZmVfbW9kZShzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCwKQEAgLTIxOSw2ICsy
MjcsNyBAQCBzdGF0aWMgYm9vbCBpY2xfdGNfcGh5X3NldF9zYWZlX21vZGUoc3RydWN0IGludGVs
X2RpZ2l0YWxfcG9ydCAqZGlnX3BvcnQsCiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUg
PSB0b19pOTE1KGRpZ19wb3J0LT5iYXNlLmJhc2UuZGV2KTsKIAllbnVtIHRjX3BvcnQgdGNfcG9y
dCA9IGludGVsX3BvcnRfdG9fdGMoaTkxNSwgZGlnX3BvcnQtPmJhc2UucG9ydCk7CiAJc3RydWN0
IGludGVsX3VuY29yZSAqdW5jb3JlID0gJmk5MTUtPnVuY29yZTsKKwlib29sIG1vZF9maWEgPSBp
OTE1LT5oYXNfbW9kdWxhcl9maWE7CiAJdTMyIHZhbDsKIAogCXZhbCA9IGludGVsX3VuY29yZV9y
ZWFkKHVuY29yZSwKQEAgLTIzMSw5ICsyNDAsOSBAQCBzdGF0aWMgYm9vbCBpY2xfdGNfcGh5X3Nl
dF9zYWZlX21vZGUoc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqZGlnX3BvcnQsCiAJCXJldHVy
biBmYWxzZTsKIAl9CiAKLQl2YWwgJj0gfkRQX1BIWV9NT0RFX1NUQVRVU19OT1RfU0FGRSh0Y19w
b3J0KTsKKwl2YWwgJj0gfkRQX1BIWV9NT0RFX1NUQVRVU19OT1RfU0FGRShtb2RfZmlhLCB0Y19w
b3J0KTsKIAlpZiAoIWVuYWJsZSkKLQkJdmFsIHw9IERQX1BIWV9NT0RFX1NUQVRVU19OT1RfU0FG
RSh0Y19wb3J0KTsKKwkJdmFsIHw9IERQX1BIWV9NT0RFX1NUQVRVU19OT1RfU0FGRShtb2RfZmlh
LCB0Y19wb3J0KTsKIAogCWludGVsX3VuY29yZV93cml0ZSh1bmNvcmUsCiAJCQkgICBQT1JUX1RY
X0RGTEVYRFBDU1NTKGRpZ19wb3J0LT50Y19waHlfZmlhKSwgdmFsKTsKQEAgLTI1MCw2ICsyNTks
NyBAQCBzdGF0aWMgYm9vbCBpY2xfdGNfcGh5X2lzX2luX3NhZmVfbW9kZShzdHJ1Y3QgaW50ZWxf
ZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCkKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9
IHRvX2k5MTUoZGlnX3BvcnQtPmJhc2UuYmFzZS5kZXYpOwogCWVudW0gdGNfcG9ydCB0Y19wb3J0
ID0gaW50ZWxfcG9ydF90b190YyhpOTE1LCBkaWdfcG9ydC0+YmFzZS5wb3J0KTsKIAlzdHJ1Y3Qg
aW50ZWxfdW5jb3JlICp1bmNvcmUgPSAmaTkxNS0+dW5jb3JlOworCWJvb2wgbW9kX2ZpYSA9IGk5
MTUtPmhhc19tb2R1bGFyX2ZpYTsKIAl1MzIgdmFsOwogCiAJdmFsID0gaW50ZWxfdW5jb3JlX3Jl
YWQodW5jb3JlLApAQCAtMjYwLDcgKzI3MCw3IEBAIHN0YXRpYyBib29sIGljbF90Y19waHlfaXNf
aW5fc2FmZV9tb2RlKHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmRpZ19wb3J0KQogCQlyZXR1
cm4gdHJ1ZTsKIAl9CiAKLQlyZXR1cm4gISh2YWwgJiBEUF9QSFlfTU9ERV9TVEFUVVNfTk9UX1NB
RkUodGNfcG9ydCkpOworCXJldHVybiAhKHZhbCAmIERQX1BIWV9NT0RFX1NUQVRVU19OT1RfU0FG
RShtb2RfZmlhLCB0Y19wb3J0KSk7CiB9CiAKIC8qCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX3RjLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX3RjLmgKaW5kZXggNDYzZjFiM2M4MzZmLi4yMzc0MzUyZDdjMzEgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfdGMuaAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3RjLmgKQEAgLTEwLDYgKzEwLDcgQEAKICNpbmNsdWRl
IDxsaW51eC90eXBlcy5oPgogCiBzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0Oworc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGU7CiAKIGJvb2wgaW50ZWxfdGNfcG9ydF9jb25uZWN0ZWQoc3RydWN0IGlu
dGVsX2RpZ2l0YWxfcG9ydCAqZGlnX3BvcnQpOwogdTMyIGludGVsX3RjX3BvcnRfZ2V0X2xhbmVf
bWFzayhzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCk7CkBAIC0yNyw1ICsyOCw2
IEBAIHZvaWQgaW50ZWxfdGNfcG9ydF9wdXRfbGluayhzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0
ICpkaWdfcG9ydCk7CiBib29sIGludGVsX3RjX3BvcnRfcmVmX2hlbGQoc3RydWN0IGludGVsX2Rp
Z2l0YWxfcG9ydCAqZGlnX3BvcnQpOwogCiB2b2lkIGludGVsX3RjX3BvcnRfaW5pdChzdHJ1Y3Qg
aW50ZWxfZGlnaXRhbF9wb3J0ICpkaWdfcG9ydCwgYm9vbCBpc19sZWdhY3kpOwordm9pZCBpbnRl
bF90Y19pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiAKICNlbmRpZiAv
KiBfX0lOVEVMX1RDX0hfXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKaW5kZXggYmY2MDA4ODhi
M2YxLi5hMzZkMTkyOWZkZTEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaApAQCAtMTc2NSw2ICsx
NzY1LDkgQEAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgewogCS8qIE11dGV4IHRvIHByb3RlY3Qg
dGhlIGFib3ZlIGhkY3AgY29tcG9uZW50IHJlbGF0ZWQgdmFsdWVzLiAqLwogCXN0cnVjdCBtdXRl
eCBoZGNwX2NvbXBfbXV0ZXg7CiAKKwkvKiBNb25vbGl0aGljIG9yIG1vZHVsYXIgRklBICovCisJ
Ym9vbCBoYXNfbW9kdWxhcl9maWE7CisKIAkvKgogCSAqIE5PVEU6IFRoaXMgaXMgdGhlIGRyaTEv
dW1zIGR1bmdlb24sIGRvbid0IGFkZCBzdHVmZiBoZXJlLiBZb3VyIHBhdGNoCiAJICogd2lsbCBi
ZSByZWplY3RlZC4gSW5zdGVhZCBsb29rIGZvciBhIGJldHRlciBwbGFjZS4KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3JlZy5oCmluZGV4IDE2ZDU1NDhhZGI4NC4uOGFhZjUzMjgzMjAwIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfcmVnLmgKQEAgLTIxNjUsMTQgKzIxNjUsMTUgQEAgc3RhdGljIGlubGluZSBib29sIGk5
MTVfbW1pb19yZWdfdmFsaWQoaTkxNV9yZWdfdCByZWcpCiAjZGVmaW5lIF9GSUEoZmlhKQkJCV9Q
SUNLKChmaWEpLCBGSUExX0JBU0UsIEZJQTJfQkFTRSwgRklBM19CQVNFKQogI2RlZmluZSBfTU1J
T19GSUEoZmlhLCBvZmYpCQlfTU1JTyhfRklBKGZpYSkgKyAob2ZmKSkKIAorI2RlZmluZSBfVENf
TU9EX1BPUlRfSUQoaGFzX21vZHVsYXJfZmlhLCB0Y19wb3J0KQkoKGhhc19tb2R1bGFyX2ZpYSkg
PyAodGNfcG9ydCkgJSAyIDogKHRjX3BvcnQpKQogLyogSUNMIFBIWSBERkxFWCByZWdpc3RlcnMg
Ki8KLSNkZWZpbmUgUE9SVF9UWF9ERkxFWERQTUxFMShmaWEpCV9NTUlPX0ZJQSgoZmlhKSwgIDB4
MDA4QzApCi0jZGVmaW5lICAgREZMRVhEUE1MRTFfRFBNTEVUQ19NQVNLKHRjX3BvcnQpCSgweGYg
PDwgKDQgKiAodGNfcG9ydCkpKQotI2RlZmluZSAgIERGTEVYRFBNTEUxX0RQTUxFVENfTUwwKHRj
X3BvcnQpCSgxIDw8ICg0ICogKHRjX3BvcnQpKSkKLSNkZWZpbmUgICBERkxFWERQTUxFMV9EUE1M
RVRDX01MMV8wKHRjX3BvcnQpCSgzIDw8ICg0ICogKHRjX3BvcnQpKSkKLSNkZWZpbmUgICBERkxF
WERQTUxFMV9EUE1MRVRDX01MMyh0Y19wb3J0KQkoOCA8PCAoNCAqICh0Y19wb3J0KSkpCi0jZGVm
aW5lICAgREZMRVhEUE1MRTFfRFBNTEVUQ19NTDNfMih0Y19wb3J0KQkoMTIgPDwgKDQgKiAodGNf
cG9ydCkpKQotI2RlZmluZSAgIERGTEVYRFBNTEUxX0RQTUxFVENfTUwzXzAodGNfcG9ydCkJKDE1
IDw8ICg0ICogKHRjX3BvcnQpKSkKKyNkZWZpbmUgUE9SVF9UWF9ERkxFWERQTUxFMShmaWEpCQkJ
X01NSU9fRklBKChmaWEpLCAgMHgwMDhDMCkKKyNkZWZpbmUgICBERkxFWERQTUxFMV9EUE1MRVRD
X01BU0sobW9kLCB0Y19wb3J0KQkoMHhmIDw8ICg0ICogKF9UQ19NT0RfUE9SVF9JRChtb2QsIHRj
X3BvcnQpKSkpCisjZGVmaW5lICAgREZMRVhEUE1MRTFfRFBNTEVUQ19NTDAobW9kLCB0Y19wb3J0
KQkJKDEgPDwgKDQgKiAoX1RDX01PRF9QT1JUX0lEKG1vZCwgdGNfcG9ydCkpKSkKKyNkZWZpbmUg
ICBERkxFWERQTUxFMV9EUE1MRVRDX01MMV8wKG1vZCwgdGNfcG9ydCkJKDMgPDwgKDQgKiAoX1RD
X01PRF9QT1JUX0lEKG1vZCwgdGNfcG9ydCkpKSkKKyNkZWZpbmUgICBERkxFWERQTUxFMV9EUE1M
RVRDX01MMyhtb2QsIHRjX3BvcnQpCQkoOCA8PCAoNCAqIChfVENfTU9EX1BPUlRfSUQobW9kLCB0
Y19wb3J0KSkpKQorI2RlZmluZSAgIERGTEVYRFBNTEUxX0RQTUxFVENfTUwzXzIobW9kLCB0Y19w
b3J0KQkoMTIgPDwgKDQgKiAoX1RDX01PRF9QT1JUX0lEKG1vZCwgdGNfcG9ydCkpKSkKKyNkZWZp
bmUgICBERkxFWERQTUxFMV9EUE1MRVRDX01MM18wKG1vZCwgdGNfcG9ydCkJKDE1IDw8ICg0ICog
KF9UQ19NT0RfUE9SVF9JRChtb2QsIHRjX3BvcnQpKSkpCiAKIC8qIEJYVCBQSFkgUmVmIHJlZ2lz
dGVycyAqLwogI2RlZmluZSBfUE9SVF9SRUZfRFczX0EJCQkweDE2MjE4QwpAQCAtMTE2NjksMjMg
KzExNjcwLDIzIEBAIGVudW0gc2tsX3Bvd2VyX2dhdGUgewogCQkJCQkJX0lDTF9EU0MxX1JDX0JV
Rl9USFJFU0hfMV9VRFdfUEIsIFwKIAkJCQkJCV9JQ0xfRFNDMV9SQ19CVUZfVEhSRVNIXzFfVURX
X1BDKQogCi0jZGVmaW5lIFBPUlRfVFhfREZMRVhEUFNQKGZpYSkJCQlfTU1JT19GSUEoKGZpYSks
IDB4MDA4QTApCi0jZGVmaW5lICAgTU9EVUxBUl9GSUFfTUFTSwkJCSgxIDw8IDQpCi0jZGVmaW5l
ICAgVENfTElWRV9TVEFURV9UQlQodGNfcG9ydCkJCSgxIDw8ICgodGNfcG9ydCkgKiA4ICsgNikp
Ci0jZGVmaW5lICAgVENfTElWRV9TVEFURV9UQyh0Y19wb3J0KQkJKDEgPDwgKCh0Y19wb3J0KSAq
IDggKyA1KSkKLSNkZWZpbmUgICBEUF9MQU5FX0FTU0lHTk1FTlRfU0hJRlQodGNfcG9ydCkJKCh0
Y19wb3J0KSAqIDgpCi0jZGVmaW5lICAgRFBfTEFORV9BU1NJR05NRU5UX01BU0sodGNfcG9ydCkJ
KDB4ZiA8PCAoKHRjX3BvcnQpICogOCkpCi0jZGVmaW5lICAgRFBfTEFORV9BU1NJR05NRU5UKHRj
X3BvcnQsIHgpCSgoeCkgPDwgKCh0Y19wb3J0KSAqIDgpKQorI2RlZmluZSBQT1JUX1RYX0RGTEVY
RFBTUChmaWEpCQkJCV9NTUlPX0ZJQSgoZmlhKSwgMHgwMDhBMCkKKyNkZWZpbmUgICBNT0RVTEFS
X0ZJQV9NQVNLCQkJCSgxIDw8IDQpCisjZGVmaW5lICAgVENfTElWRV9TVEFURV9UQlQobW9kLCB0
Y19wb3J0KQkJKDEgPDwgKChfVENfTU9EX1BPUlRfSUQobW9kLCB0Y19wb3J0KSkgKiA4ICsgNikp
CisjZGVmaW5lICAgVENfTElWRV9TVEFURV9UQyhtb2QsIHRjX3BvcnQpCQkoMSA8PCAoKF9UQ19N
T0RfUE9SVF9JRChtb2QsIHRjX3BvcnQpKSAqIDggKyA1KSkKKyNkZWZpbmUgICBEUF9MQU5FX0FT
U0lHTk1FTlRfU0hJRlQobW9kLCB0Y19wb3J0KQkoKF9UQ19NT0RfUE9SVF9JRChtb2QsIHRjX3Bv
cnQpKSAqIDgpCisjZGVmaW5lICAgRFBfTEFORV9BU1NJR05NRU5UX01BU0sobW9kLCB0Y19wb3J0
KQkJKDB4ZiA8PCAoKF9UQ19NT0RfUE9SVF9JRChtb2QsIHRjX3BvcnQpKSAqIDgpKQorI2RlZmlu
ZSAgIERQX0xBTkVfQVNTSUdOTUVOVChtb2QsIHRjX3BvcnQsIHgpCQkoKHgpIDw8ICgoX1RDX01P
RF9QT1JUX0lEKG1vZCwgdGNfcG9ydCkpICogOCkpCiAKLSNkZWZpbmUgUE9SVF9UWF9ERkxFWERQ
UE1TKGZpYSkJCQlfTU1JT19GSUEoKGZpYSksIDB4MDA4OTApCi0jZGVmaW5lICAgRFBfUEhZX01P
REVfU1RBVFVTX0NPTVBMRVRFRCh0Y19wb3J0KQkJKDEgPDwgKHRjX3BvcnQpKQorI2RlZmluZSBQ
T1JUX1RYX0RGTEVYRFBQTVMoZmlhKQkJCQlfTU1JT19GSUEoKGZpYSksIDB4MDA4OTApCisjZGVm
aW5lICAgRFBfUEhZX01PREVfU1RBVFVTX0NPTVBMRVRFRChtb2QsIHRjX3BvcnQpCSgxIDw8IChf
VENfTU9EX1BPUlRfSUQobW9kLCB0Y19wb3J0KSkpCiAKLSNkZWZpbmUgUE9SVF9UWF9ERkxFWERQ
Q1NTUyhmaWEpCQlfTU1JT19GSUEoKGZpYSksIDB4MDA4OTQpCi0jZGVmaW5lICAgRFBfUEhZX01P
REVfU1RBVFVTX05PVF9TQUZFKHRjX3BvcnQpCQkoMSA8PCAodGNfcG9ydCkpCisjZGVmaW5lIFBP
UlRfVFhfREZMRVhEUENTU1MoZmlhKQkJCV9NTUlPX0ZJQSgoZmlhKSwgMHgwMDg5NCkKKyNkZWZp
bmUgICBEUF9QSFlfTU9ERV9TVEFUVVNfTk9UX1NBRkUobW9kLCB0Y19wb3J0KQkoMSA8PCAoX1RD
X01PRF9QT1JUX0lEKG1vZCwgdGNfcG9ydCkpKQogCi0jZGVmaW5lIFBPUlRfVFhfREZMRVhQQTEo
ZmlhKQkJCV9NTUlPX0ZJQSgoZmlhKSwgMHgwMDg4MCkKLSNkZWZpbmUgICBEUF9QSU5fQVNTSUdO
TUVOVF9TSElGVCh0Y19wb3J0KQkJKCh0Y19wb3J0KSAqIDQpCi0jZGVmaW5lICAgRFBfUElOX0FT
U0lHTk1FTlRfTUFTSyh0Y19wb3J0KQkJKDB4ZiA8PCAoKHRjX3BvcnQpICogNCkpCi0jZGVmaW5l
ICAgRFBfUElOX0FTU0lHTk1FTlQodGNfcG9ydCwgeCkJKCh4KSA8PCAoKHRjX3BvcnQpICogNCkp
CisjZGVmaW5lIFBPUlRfVFhfREZMRVhQQTEoZmlhKQkJCQlfTU1JT19GSUEoKGZpYSksIDB4MDA4
ODApCisjZGVmaW5lICAgRFBfUElOX0FTU0lHTk1FTlRfU0hJRlQobW9kLCB0Y19wb3J0KQkJKChf
VENfTU9EX1BPUlRfSUQobW9kLCB0Y19wb3J0KSkgKiA0KQorI2RlZmluZSAgIERQX1BJTl9BU1NJ
R05NRU5UX01BU0sobW9kLCB0Y19wb3J0KQkoMHhmIDw8ICgoX1RDX01PRF9QT1JUX0lEKG1vZCwg
dGNfcG9ydCkpICogNCkpCisjZGVmaW5lICAgRFBfUElOX0FTU0lHTk1FTlQobW9kLCB0Y19wb3J0
LCB4KQkoKHgpIDw8ICgoX1RDX01PRF9QT1JUX0lEKG1vZCwgdGNfcG9ydCkpICogNCkpCiAKICNl
bmRpZiAvKiBfSTkxNV9SRUdfSF8gKi8KLS0gCjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1n
ZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

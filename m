Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 08A3263B37
	for <lists+intel-gfx@lfdr.de>; Tue,  9 Jul 2019 20:39:55 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3ADB389F3C;
	Tue,  9 Jul 2019 18:39:52 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A680889F06
 for <intel-gfx@lists.freedesktop.org>; Tue,  9 Jul 2019 18:39:50 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Jul 2019 11:39:50 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,471,1557212400"; d="scan'208";a="156261113"
Received: from mdroper-desk.fm.intel.com ([10.105.128.126])
 by orsmga007.jf.intel.com with ESMTP; 09 Jul 2019 11:39:50 -0700
From: Matt Roper <matthew.d.roper@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  9 Jul 2019 11:39:31 -0700
Message-Id: <20190709183934.445-3-matthew.d.roper@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190709183934.445-1-matthew.d.roper@intel.com>
References: <20190709183934.445-1-matthew.d.roper@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v6 2/5] drm/i915/gen11: Program
 ICL_DPCLKA_CFGCR0 according to PHY
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

QWx0aG91Z2ggdGhlIHJlZ2lzdGVyIG5hbWUgaW1wbGllcyB0aGF0IGl0IG9wZXJhdGVzIG9uIERE
SSdzLApEUENMS0FfQ0ZHQ1IwX0lDTCBhY3R1YWxseSBuZWVkcyB0byBiZSBwcm9ncmFtbWVkIGFj
Y29yZGluZyB0byB0aGUgUEhZCnRoYXQncyBpbiB1c2UuICBJLmUuLCB3aGVuIHVzaW5nIEVITCdz
IERESS1EIG9uIGNvbWJvIFBIWSBBLCB0aGUgYml0cwpkZXNjcmliZWQgYXMgInBvcnQgQSIgaW4g
dGhlIGJzcGVjIGFyZSB3aGF0IHdlIG5lZWQgdG8gc2V0LiAgVGhlIGJzcGVjCmNsYXJpZmllczoK
CiAgICAgICAgIltGb3IgRUhMXSBERElEIGNsb2NrIHRpZWQgdG8gRERJQSBjbG9jaywgc28gRFBD
TEtBX0NGR0NSMCBERElBCiAgICAgICAgQ2xvY2sgU2VsZWN0IGNob29zZXMgdGhlIFBMTCBmb3Ig
Ym90aCBERElBIGFuZCBERElEIGFuZCBkcml2ZXMKICAgICAgICBwb3J0IEEgaW4gYWxsIGNhc2Vz
LiIKCkFsc28sIHNpbmNlIHRoZSBDTkwgRFBDTEtBX0NGR0NSMCBiaXQgZGVmaW5lcyBhcmUgc3Rp
bGwgcG9ydC1iYXNlZCwgd2UKY3JlYXRlIHNlcGFyYXRlIElDTC1zcGVjaWZpYyBkZWZpbmVzIHRo
YXQgYWNjZXB0IHRoZSBQSFkgcmF0aGVyIHRoYW4KdHJ5aW5nIHRvIHNoYXJlIHRoZSBzYW1lIGJp
dCBkZWZpbml0aW9ucyBiZXR3ZWVuIENOTCBhbmQgSUNMLgoKdjU6IE1ha2UgaWNsX2RwY2xrYV9j
ZmdjcjBfY2xrX29mZigpIHRha2UgcGh5IHJhdGhlciB0aGFuIHBvcnQuICBXaGVuCiAgICBzcGxp
dHRpbmcgdGhlIG9yaWdpbmFsIHBhdGNoIHRoZSBodW5rIHRvIGhhbmRsZSB0aGlzIHdvdW5kIHVw
IHRvbwogICAgbGF0ZSBpbiB0aGUgc2VyaWVzLiAgKFNwYXJzZSkKCnY2OiBTaW5jZSB3ZSdyZSBh
bHJlYWR5IGNoYW5naW5nIHRoaXMgY29kZSwKICAgIHMvRFBDTEtBX0NGR0NSMF9JQ0wvSUNMX0RQ
Q0xLQV9DRkdDUjAvIGZvciBjb25zaXN0ZW5jeS4gIChKb3NlKQoKQnNwZWM6IDMzMTQ4CkNjOiBK
b3PDqSBSb2JlcnRvIGRlIFNvdXphIDxqb3NlLnNvdXphQGludGVsLmNvbT4KU2lnbmVkLW9mZi1i
eTogTWF0dCBSb3BlciA8bWF0dGhldy5kLnJvcGVyQGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IFZp
bGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+ClJldmlld2VkLWJ5
OiBKb3PDqSBSb2JlcnRvIGRlIFNvdXphIDxqb3NlLnNvdXphQGludGVsLmNvbT4KLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ljbF9kc2kuYyAgICAgICB8IDMzICsrKysrKy0tLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMgICAgIHwgNjMgKysrKysr
KysrKysrLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eS5jIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggICAgICAgICAgICAg
IHwgMTIgKystLQogNCBmaWxlcyBjaGFuZ2VkLCA2NyBpbnNlcnRpb25zKCspLCA0MyBkZWxldGlv
bnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ljbF9kc2ku
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jCmluZGV4IDNjZjk1YzM0
MTQzYy4uOGYxMzI0YzJmNTM5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ljbF9kc2kuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ljbF9kc2ku
YwpAQCAtNTYwLDE0ICs1NjAsMTYgQEAgc3RhdGljIHZvaWQgZ2VuMTFfZHNpX2dhdGVfY2xvY2tz
KHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQogCXN0cnVjdCBpbnRlbF9kc2kgKmludGVs
X2RzaSA9IGVuY190b19pbnRlbF9kc2koJmVuY29kZXItPmJhc2UpOwogCXUzMiB0bXA7CiAJZW51
bSBwb3J0IHBvcnQ7CisJZW51bSBwaHkgcGh5OwogCiAJbXV0ZXhfbG9jaygmZGV2X3ByaXYtPmRw
bGxfbG9jayk7Ci0JdG1wID0gSTkxNV9SRUFEKERQQ0xLQV9DRkdDUjBfSUNMKTsKKwl0bXAgPSBJ
OTE1X1JFQUQoSUNMX0RQQ0xLQV9DRkdDUjApOwogCWZvcl9lYWNoX2RzaV9wb3J0KHBvcnQsIGlu
dGVsX2RzaS0+cG9ydHMpIHsKLQkJdG1wIHw9IERQQ0xLQV9DRkdDUjBfRERJX0NMS19PRkYocG9y
dCk7CisJCXBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBwb3J0KTsKKwkJdG1wIHw9
IElDTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfT0ZGKHBoeSk7CiAJfQogCi0JSTkxNV9XUklURShE
UENMS0FfQ0ZHQ1IwX0lDTCwgdG1wKTsKKwlJOTE1X1dSSVRFKElDTF9EUENMS0FfQ0ZHQ1IwLCB0
bXApOwogCW11dGV4X3VubG9jaygmZGV2X3ByaXYtPmRwbGxfbG9jayk7CiB9CiAKQEAgLTU3Nywx
NCArNTc5LDE2IEBAIHN0YXRpYyB2b2lkIGdlbjExX2RzaV91bmdhdGVfY2xvY2tzKHN0cnVjdCBp
bnRlbF9lbmNvZGVyICplbmNvZGVyKQogCXN0cnVjdCBpbnRlbF9kc2kgKmludGVsX2RzaSA9IGVu
Y190b19pbnRlbF9kc2koJmVuY29kZXItPmJhc2UpOwogCXUzMiB0bXA7CiAJZW51bSBwb3J0IHBv
cnQ7CisJZW51bSBwaHkgcGh5OwogCiAJbXV0ZXhfbG9jaygmZGV2X3ByaXYtPmRwbGxfbG9jayk7
Ci0JdG1wID0gSTkxNV9SRUFEKERQQ0xLQV9DRkdDUjBfSUNMKTsKKwl0bXAgPSBJOTE1X1JFQUQo
SUNMX0RQQ0xLQV9DRkdDUjApOwogCWZvcl9lYWNoX2RzaV9wb3J0KHBvcnQsIGludGVsX2RzaS0+
cG9ydHMpIHsKLQkJdG1wICY9IH5EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfT0ZGKHBvcnQpOworCQlw
aHkgPSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgcG9ydCk7CisJCXRtcCAmPSB+SUNMX0RQ
Q0xLQV9DRkdDUjBfRERJX0NMS19PRkYocGh5KTsKIAl9CiAKLQlJOTE1X1dSSVRFKERQQ0xLQV9D
RkdDUjBfSUNMLCB0bXApOworCUk5MTVfV1JJVEUoSUNMX0RQQ0xLQV9DRkdDUjAsIHRtcCk7CiAJ
bXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+ZHBsbF9sb2NrKTsKIH0KIApAQCAtNTk1LDIzICs1OTks
MjYgQEAgc3RhdGljIHZvaWQgZ2VuMTFfZHNpX21hcF9wbGwoc3RydWN0IGludGVsX2VuY29kZXIg
KmVuY29kZXIsCiAJc3RydWN0IGludGVsX2RzaSAqaW50ZWxfZHNpID0gZW5jX3RvX2ludGVsX2Rz
aSgmZW5jb2Rlci0+YmFzZSk7CiAJc3RydWN0IGludGVsX3NoYXJlZF9kcGxsICpwbGwgPSBjcnRj
X3N0YXRlLT5zaGFyZWRfZHBsbDsKIAllbnVtIHBvcnQgcG9ydDsKKwllbnVtIHBoeSBwaHk7CiAJ
dTMyIHZhbDsKIAogCW11dGV4X2xvY2soJmRldl9wcml2LT5kcGxsX2xvY2spOwogCi0JdmFsID0g
STkxNV9SRUFEKERQQ0xLQV9DRkdDUjBfSUNMKTsKKwl2YWwgPSBJOTE1X1JFQUQoSUNMX0RQQ0xL
QV9DRkdDUjApOwogCWZvcl9lYWNoX2RzaV9wb3J0KHBvcnQsIGludGVsX2RzaS0+cG9ydHMpIHsK
LQkJdmFsICY9IH5EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX01BU0socG9ydCk7Ci0JCXZhbCB8
PSBEUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMKHBsbC0+aW5mby0+aWQsIHBvcnQpOworCQlwaHkg
PSBpbnRlbF9wb3J0X3RvX3BoeShkZXZfcHJpdiwgcG9ydCk7CisJCXZhbCAmPSB+SUNMX0RQQ0xL
QV9DRkdDUjBfRERJX0NMS19TRUxfTUFTSyhwaHkpOworCQl2YWwgfD0gSUNMX0RQQ0xLQV9DRkdD
UjBfRERJX0NMS19TRUwocGxsLT5pbmZvLT5pZCwgcGh5KTsKIAl9Ci0JSTkxNV9XUklURShEUENM
S0FfQ0ZHQ1IwX0lDTCwgdmFsKTsKKwlJOTE1X1dSSVRFKElDTF9EUENMS0FfQ0ZHQ1IwLCB2YWwp
OwogCiAJZm9yX2VhY2hfZHNpX3BvcnQocG9ydCwgaW50ZWxfZHNpLT5wb3J0cykgewotCQl2YWwg
Jj0gfkRQQ0xLQV9DRkdDUjBfRERJX0NMS19PRkYocG9ydCk7CisJCXBoeSA9IGludGVsX3BvcnRf
dG9fcGh5KGRldl9wcml2LCBwb3J0KTsKKwkJdmFsICY9IH5JQ0xfRFBDTEtBX0NGR0NSMF9ERElf
Q0xLX09GRihwaHkpOwogCX0KLQlJOTE1X1dSSVRFKERQQ0xLQV9DRkdDUjBfSUNMLCB2YWwpOwor
CUk5MTVfV1JJVEUoSUNMX0RQQ0xLQV9DRkdDUjAsIHZhbCk7CiAKLQlQT1NUSU5HX1JFQUQoRFBD
TEtBX0NGR0NSMF9JQ0wpOworCVBPU1RJTkdfUkVBRChJQ0xfRFBDTEtBX0NGR0NSMCk7CiAKIAlt
dXRleF91bmxvY2soJmRldl9wcml2LT5kcGxsX2xvY2spOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGRpLmMKaW5kZXggMzBlNDg2MDlkYjFkLi5iNWJjMDBjNGUzZmUgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGRpLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kZGkuYwpAQCAtMjcyOSwxMiArMjcy
OSwxMyBAQCB1MzIgZGRpX3NpZ25hbF9sZXZlbHMoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCkK
IAogc3RhdGljIGlubGluZQogdTMyIGljbF9kcGNsa2FfY2ZnY3IwX2Nsa19vZmYoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAotCQkJICAgICAgZW51bSBwb3J0IHBvcnQpCisJCQkg
ICAgICBlbnVtIHBoeSBwaHkpCiB7Ci0JaWYgKGludGVsX3BvcnRfaXNfY29tYm9waHkoZGV2X3By
aXYsIHBvcnQpKSB7Ci0JCXJldHVybiBJQ0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX09GRihwb3J0
KTsKLQl9IGVsc2UgaWYgKGludGVsX3BvcnRfaXNfdGMoZGV2X3ByaXYsIHBvcnQpKSB7Ci0JCWVu
dW0gdGNfcG9ydCB0Y19wb3J0ID0gaW50ZWxfcG9ydF90b190YyhkZXZfcHJpdiwgcG9ydCk7CisJ
aWYgKGludGVsX3BoeV9pc19jb21ibyhkZXZfcHJpdiwgcGh5KSkgeworCQlyZXR1cm4gSUNMX0RQ
Q0xLQV9DRkdDUjBfRERJX0NMS19PRkYocGh5KTsKKwl9IGVsc2UgaWYgKGludGVsX3BoeV9pc190
YyhkZXZfcHJpdiwgcGh5KSkgeworCQllbnVtIHRjX3BvcnQgdGNfcG9ydCA9IGludGVsX3BvcnRf
dG9fdGMoZGV2X3ByaXYsCisJCQkJCQkJKGVudW0gcG9ydClwaHkpOwogCiAJCXJldHVybiBJQ0xf
RFBDTEtBX0NGR0NSMF9UQ19DTEtfT0ZGKHRjX3BvcnQpOwogCX0KQEAgLTI3NDcsMjMgKzI3NDgs
MzMgQEAgc3RhdGljIHZvaWQgaWNsX21hcF9wbGxzX3RvX3BvcnRzKHN0cnVjdCBpbnRlbF9lbmNv
ZGVyICplbmNvZGVyLAogewogCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRv
X2k5MTUoZW5jb2Rlci0+YmFzZS5kZXYpOwogCXN0cnVjdCBpbnRlbF9zaGFyZWRfZHBsbCAqcGxs
ID0gY3J0Y19zdGF0ZS0+c2hhcmVkX2RwbGw7Ci0JZW51bSBwb3J0IHBvcnQgPSBlbmNvZGVyLT5w
b3J0OworCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBlbmNvZGVy
LT5wb3J0KTsKIAl1MzIgdmFsOwogCiAJbXV0ZXhfbG9jaygmZGV2X3ByaXYtPmRwbGxfbG9jayk7
CiAKLQl2YWwgPSBJOTE1X1JFQUQoRFBDTEtBX0NGR0NSMF9JQ0wpOwotCVdBUk5fT04oKHZhbCAm
IGljbF9kcGNsa2FfY2ZnY3IwX2Nsa19vZmYoZGV2X3ByaXYsIHBvcnQpKSA9PSAwKTsKKwl2YWwg
PSBJOTE1X1JFQUQoSUNMX0RQQ0xLQV9DRkdDUjApOworCVdBUk5fT04oKHZhbCAmIGljbF9kcGNs
a2FfY2ZnY3IwX2Nsa19vZmYoZGV2X3ByaXYsIHBoeSkpID09IDApOwogCi0JaWYgKGludGVsX3Bv
cnRfaXNfY29tYm9waHkoZGV2X3ByaXYsIHBvcnQpKSB7Ci0JCXZhbCAmPSB+RFBDTEtBX0NGR0NS
MF9ERElfQ0xLX1NFTF9NQVNLKHBvcnQpOwotCQl2YWwgfD0gRFBDTEtBX0NGR0NSMF9ERElfQ0xL
X1NFTChwbGwtPmluZm8tPmlkLCBwb3J0KTsKLQkJSTkxNV9XUklURShEUENMS0FfQ0ZHQ1IwX0lD
TCwgdmFsKTsKLQkJUE9TVElOR19SRUFEKERQQ0xLQV9DRkdDUjBfSUNMKTsKKwlpZiAoaW50ZWxf
cGh5X2lzX2NvbWJvKGRldl9wcml2LCBwaHkpKSB7CisJCS8qCisJCSAqIEV2ZW4gdGhvdWdoIHRo
aXMgcmVnaXN0ZXIgcmVmZXJlbmNlcyBERElzLCBub3RlIHRoYXQgd2UKKwkJICogd2FudCB0byBw
YXNzIHRoZSBQSFkgcmF0aGVyIHRoYW4gdGhlIHBvcnQgKERESSkuICBGb3IKKwkJICogSUNMLCBw
b3J0PXBoeSBpbiBhbGwgY2FzZXMgc28gaXQgZG9lc24ndCBtYXR0ZXIsIGJ1dCBmb3IKKwkJICog
RUhMIHRoZSBic3BlYyBub3RlcyB0aGUgZm9sbG93aW5nOgorCQkgKgorCQkgKiAgICJERElEIGNs
b2NrIHRpZWQgdG8gRERJQSBjbG9jaywgc28gRFBDTEtBX0NGR0NSMCBERElBCisJCSAqICAgQ2xv
Y2sgU2VsZWN0IGNob29zZXMgdGhlIFBMTCBmb3IgYm90aCBERElBIGFuZCBERElEIGFuZAorCQkg
KiAgIGRyaXZlcyBwb3J0IEEgaW4gYWxsIGNhc2VzLiIKKwkJICovCisJCXZhbCAmPSB+SUNMX0RQ
Q0xLQV9DRkdDUjBfRERJX0NMS19TRUxfTUFTSyhwaHkpOworCQl2YWwgfD0gSUNMX0RQQ0xLQV9D
RkdDUjBfRERJX0NMS19TRUwocGxsLT5pbmZvLT5pZCwgcGh5KTsKKwkJSTkxNV9XUklURShJQ0xf
RFBDTEtBX0NGR0NSMCwgdmFsKTsKKwkJUE9TVElOR19SRUFEKElDTF9EUENMS0FfQ0ZHQ1IwKTsK
IAl9CiAKLQl2YWwgJj0gfmljbF9kcGNsa2FfY2ZnY3IwX2Nsa19vZmYoZGV2X3ByaXYsIHBvcnQp
OwotCUk5MTVfV1JJVEUoRFBDTEtBX0NGR0NSMF9JQ0wsIHZhbCk7CisJdmFsICY9IH5pY2xfZHBj
bGthX2NmZ2NyMF9jbGtfb2ZmKGRldl9wcml2LCBwaHkpOworCUk5MTVfV1JJVEUoSUNMX0RQQ0xL
QV9DRkdDUjAsIHZhbCk7CiAKIAltdXRleF91bmxvY2soJmRldl9wcml2LT5kcGxsX2xvY2spOwog
fQpAQCAtMjc3MSwxNCArMjc4MiwxNCBAQCBzdGF0aWMgdm9pZCBpY2xfbWFwX3BsbHNfdG9fcG9y
dHMoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29kZXIsCiBzdGF0aWMgdm9pZCBpY2xfdW5tYXBf
cGxsc190b19wb3J0cyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlcikKIHsKIAlzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGVuY29kZXItPmJhc2UuZGV2KTsK
LQllbnVtIHBvcnQgcG9ydCA9IGVuY29kZXItPnBvcnQ7CisJZW51bSBwaHkgcGh5ID0gaW50ZWxf
cG9ydF90b19waHkoZGV2X3ByaXYsIGVuY29kZXItPnBvcnQpOwogCXUzMiB2YWw7CiAKIAltdXRl
eF9sb2NrKCZkZXZfcHJpdi0+ZHBsbF9sb2NrKTsKIAotCXZhbCA9IEk5MTVfUkVBRChEUENMS0Ff
Q0ZHQ1IwX0lDTCk7Ci0JdmFsIHw9IGljbF9kcGNsa2FfY2ZnY3IwX2Nsa19vZmYoZGV2X3ByaXYs
IHBvcnQpOwotCUk5MTVfV1JJVEUoRFBDTEtBX0NGR0NSMF9JQ0wsIHZhbCk7CisJdmFsID0gSTkx
NV9SRUFEKElDTF9EUENMS0FfQ0ZHQ1IwKTsKKwl2YWwgfD0gaWNsX2RwY2xrYV9jZmdjcjBfY2xr
X29mZihkZXZfcHJpdiwgcGh5KTsKKwlJOTE1X1dSSVRFKElDTF9EUENMS0FfQ0ZHQ1IwLCB2YWwp
OwogCiAJbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+ZHBsbF9sb2NrKTsKIH0KQEAgLTI4MzYsMTEg
KzI4NDcsMTMgQEAgdm9pZCBpY2xfc2FuaXRpemVfZW5jb2Rlcl9wbGxfbWFwcGluZyhzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlcikKIAkJZGRpX2Nsa19uZWVkZWQgPSBmYWxzZTsKIAl9CiAK
LQl2YWwgPSBJOTE1X1JFQUQoRFBDTEtBX0NGR0NSMF9JQ0wpOworCXZhbCA9IEk5MTVfUkVBRChJ
Q0xfRFBDTEtBX0NGR0NSMCk7CiAJZm9yX2VhY2hfcG9ydF9tYXNrZWQocG9ydCwgcG9ydF9tYXNr
KSB7CisJCWVudW0gcGh5IHBoeSA9IGludGVsX3BvcnRfdG9fcGh5KGRldl9wcml2LCBwb3J0KTsK
KwogCQlib29sIGRkaV9jbGtfdW5nYXRlZCA9ICEodmFsICYKIAkJCQkJIGljbF9kcGNsa2FfY2Zn
Y3IwX2Nsa19vZmYoZGV2X3ByaXYsCi0JCQkJCQkJCSAgIHBvcnQpKTsKKwkJCQkJCQkJICAgcGh5
KSk7CiAKIAkJaWYgKGRkaV9jbGtfbmVlZGVkID09IGRkaV9jbGtfdW5nYXRlZCkKIAkJCWNvbnRp
bnVlOwpAQCAtMjg1MiwxMCArMjg2NSwxMCBAQCB2b2lkIGljbF9zYW5pdGl6ZV9lbmNvZGVyX3Bs
bF9tYXBwaW5nKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyKQogCQlpZiAoV0FSTl9PTihk
ZGlfY2xrX25lZWRlZCkpCiAJCQljb250aW51ZTsKIAotCQlEUk1fTk9URSgiUG9ydCAlYyBpcyBk
aXNhYmxlZC9pbiBEU0kgbW9kZSB3aXRoIGFuIHVuZ2F0ZWQgRERJIGNsb2NrLCBnYXRlIGl0XG4i
LAotCQkJIHBvcnRfbmFtZShwb3J0KSk7Ci0JCXZhbCB8PSBpY2xfZHBjbGthX2NmZ2NyMF9jbGtf
b2ZmKGRldl9wcml2LCBwb3J0KTsKLQkJSTkxNV9XUklURShEUENMS0FfQ0ZHQ1IwX0lDTCwgdmFs
KTsKKwkJRFJNX05PVEUoIlBIWSAlYyBpcyBkaXNhYmxlZC9pbiBEU0kgbW9kZSB3aXRoIGFuIHVu
Z2F0ZWQgRERJIGNsb2NrLCBnYXRlIGl0XG4iLAorCQkJIHBoeV9uYW1lKHBvcnQpKTsKKwkJdmFs
IHw9IGljbF9kcGNsa2FfY2ZnY3IwX2Nsa19vZmYoZGV2X3ByaXYsIHBoeSk7CisJCUk5MTVfV1JJ
VEUoSUNMX0RQQ0xLQV9DRkdDUjAsIHZhbCk7CiAJfQogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCmluZGV4IDQzY2FlZTZkM2MyZi4uNDRjNzlmOGJk
MDI4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3Bs
YXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXkuYwpA
QCAtMTAwOTYsNyArMTAwOTYsNyBAQCBzdGF0aWMgdm9pZCBpY2VsYWtlX2dldF9kZGlfcGxsKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAl1MzIgdGVtcDsKIAogCWlmIChpbnRl
bF9wb3J0X2lzX2NvbWJvcGh5KGRldl9wcml2LCBwb3J0KSkgewotCQl0ZW1wID0gSTkxNV9SRUFE
KERQQ0xLQV9DRkdDUjBfSUNMKSAmCisJCXRlbXAgPSBJOTE1X1JFQUQoSUNMX0RQQ0xLQV9DRkdD
UjApICYKIAkJICAgICAgIERQQ0xLQV9DRkdDUjBfRERJX0NMS19TRUxfTUFTSyhwb3J0KTsKIAkJ
aWQgPSB0ZW1wID4+IERQQ0xLQV9DRkdDUjBfRERJX0NMS19TRUxfU0hJRlQocG9ydCk7CiAJCXBv
cnRfZHBsbF9pZCA9IElDTF9QT1JUX0RQTExfREVGQVVMVDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfcmVnLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5o
CmluZGV4IDU4OThmNTllM2RkNy4uZDNmYzU3NWE5NGRiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3JlZy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVn
LmgKQEAgLTk2OTcsMTcgKzk2OTcsMjEgQEAgZW51bSBza2xfcG93ZXJfZ2F0ZSB7CiAgKiBDTkwg
Q2xvY2tzCiAgKi8KICNkZWZpbmUgRFBDTEtBX0NGR0NSMAkJCQlfTU1JTygweDZDMjAwKQotI2Rl
ZmluZSBEUENMS0FfQ0ZHQ1IwX0lDTAkJCV9NTUlPKDB4MTY0MjgwKQogI2RlZmluZSAgRFBDTEtB
X0NGR0NSMF9ERElfQ0xLX09GRihwb3J0KQkoMSA8PCAoKHBvcnQpID09ICBQT1JUX0YgPyAyMyA6
IFwKIAkJCQkJCSAgICAgIChwb3J0KSArIDEwKSkKLSNkZWZpbmUgIElDTF9EUENMS0FfQ0ZHQ1Iw
X0RESV9DTEtfT0ZGKHBvcnQpICAgKDEgPDwgKChwb3J0KSArIDEwKSkKLSNkZWZpbmUgIElDTF9E
UENMS0FfQ0ZHQ1IwX1RDX0NMS19PRkYodGNfcG9ydCkgKDEgPDwgKCh0Y19wb3J0KSA9PSBQT1JU
X1RDNCA/IFwKLQkJCQkJCSAgICAgIDIxIDogKHRjX3BvcnQpICsgMTIpKQogI2RlZmluZSAgRFBD
TEtBX0NGR0NSMF9ERElfQ0xLX1NFTF9TSElGVChwb3J0KQkoKHBvcnQpID09IFBPUlRfRiA/IDIx
IDogXAogCQkJCQkJKHBvcnQpICogMikKICNkZWZpbmUgIERQQ0xLQV9DRkdDUjBfRERJX0NMS19T
RUxfTUFTSyhwb3J0KQkoMyA8PCBEUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX1NISUZUKHBvcnQp
KQogI2RlZmluZSAgRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NFTChwbGwsIHBvcnQpCSgocGxsKSA8
PCBEUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX1NISUZUKHBvcnQpKQogCisjZGVmaW5lIElDTF9E
UENMS0FfQ0ZHQ1IwCQkJX01NSU8oMHgxNjQyODApCisjZGVmaW5lICBJQ0xfRFBDTEtBX0NGR0NS
MF9ERElfQ0xLX09GRihwaHkpCSgxIDw8IF9QSUNLKHBoeSwgMTAsIDExLCAyNCkpCisjZGVmaW5l
ICBJQ0xfRFBDTEtBX0NGR0NSMF9UQ19DTEtfT0ZGKHRjX3BvcnQpICgxIDw8ICgodGNfcG9ydCkg
PT0gUE9SVF9UQzQgPyBcCisJCQkJCQkgICAgICAyMSA6ICh0Y19wb3J0KSArIDEyKSkKKyNkZWZp
bmUgIElDTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX1NISUZUKHBoeSkJKChwaHkpICogMikK
KyNkZWZpbmUgIElDTF9EUENMS0FfQ0ZHQ1IwX0RESV9DTEtfU0VMX01BU0socGh5KQkoMyA8PCBJ
Q0xfRFBDTEtBX0NGR0NSMF9ERElfQ0xLX1NFTF9TSElGVChwaHkpKQorI2RlZmluZSAgSUNMX0RQ
Q0xLQV9DRkdDUjBfRERJX0NMS19TRUwocGxsLCBwaHkpCSgocGxsKSA8PCBJQ0xfRFBDTEtBX0NG
R0NSMF9ERElfQ0xLX1NFTF9TSElGVChwaHkpKQorCiAvKiBDTkwgUExMICovCiAjZGVmaW5lIERQ
TEwwX0VOQUJMRQkJMHg0NjAxMAogI2RlZmluZSBEUExMMV9FTkFCTEUJCTB4NDYwMTQKLS0gCjIu
MjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50
ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

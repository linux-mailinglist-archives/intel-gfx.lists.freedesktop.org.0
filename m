Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id AA29DB19A6
	for <lists+intel-gfx@lfdr.de>; Fri, 13 Sep 2019 10:30:30 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1CE966EED3;
	Fri, 13 Sep 2019 08:30:29 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9C11D6EED3
 for <intel-gfx@lists.freedesktop.org>; Fri, 13 Sep 2019 08:30:26 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by orsmga106.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 13 Sep 2019 01:30:26 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,500,1559545200"; d="scan'208";a="186375249"
Received: from genxfsim-desktop.iind.intel.com ([10.223.74.120])
 by fmsmga007.fm.intel.com with ESMTP; 13 Sep 2019 01:30:23 -0700
From: Anshuman Gupta <anshuman.gupta@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 13 Sep 2019 13:53:38 +0530
Message-Id: <20190913082339.1785-7-anshuman.gupta@intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190913082339.1785-1-anshuman.gupta@intel.com>
References: <20190913082339.1785-1-anshuman.gupta@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v8 6/7] drm/i915/tgl: switch between dc3co and
 dc5 based on display idleness
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: jani.nikula@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

REMzQ08gaXMgdXNlZnVsIHBvd2VyIHN0YXRlLCB3aGVuIERNQyBkZXRlY3RzIFBTUjIgaWRsZSBm
cmFtZQp3aGlsZSBhbiBhY3RpdmUgdmlkZW8gcGxheWJhY2ssIHBsYXlpbmcgMzBmcHMgdmlkZW8g
b24gNjBoeiBwYW5lbAppcyB0aGUgY2xhc3NpYyBleGFtcGxlIG9mIHRoaXMgdXNlIGNhc2UuCgpC
LlNwZWNzOjQ5MTk2IGhhcyBhIHJlc3RyaWN0aW9uIHRvIGVuYWJsZSBEQzNDTyBvbmx5IGZvciBW
aWRlbyBQbGF5YmFjay4KSXQgd2lsbCBiZSB3b3J0aHkgdG8gZW5hYmxlIERDM0NPIGFmdGVyIGNv
bXBsZXRpb24gb2YgZWFjaCBwYWdlZmxpcAphbmQgc3dpdGNoIGJhY2sgdG8gREM1IHdoZW4gZGlz
cGxheSBpcyBpZGxlIGJlY2F1c2UgZHJpdmVyIGRvZXNuJ3QKZGlmZmVyZW50aWF0ZSBiZXR3ZWVu
IHZpZGVvIHBsYXliYWNrIGFuZCBhIG5vcm1hbCBwYWdlZmxpcC4KV2Ugd2lsbCB1c2UgRnJvbnRi
dWZmZXIgZmx1c2ggY2FsbCB0Z2xfZGMzY29fZmx1c2goKSB0byBlbmFibGUgREMzQ08Kc3RhdGUg
b25seSBmb3IgT1JJR0lOX0ZMSVAgZmx1c2ggY2FsbCwgYmVjYXVzZSBEQzNDTyBzdGF0ZSBoYXMg
cHJpbWFyaWx5CnRhcmdldGVkIGZvciBWUEIgdXNlIGNhc2UuIFdlIGFyZSBub3QgaW50ZXJlc3Rl
ZCBoZXJlIGZvciBmcm9udGJ1ZmZlcgppbnZhbGlkYXRlcyBjYWxscyBiZWNhdXNlIHRoYXQgdHJp
Z2dlcnMgUFNSMiBleGl0LCB3aGljaCB3aWxsCmV4cGxpY2l0bHkgZGlzYWJsZSBEQzNDTy4KCkRD
NSBhbmQgREM2IHNhdmVzIG1vcmUgcG93ZXIsIGJ1dCBjYW4ndCBiZSBlbnRlcmVkIGR1cmluZyB2
aWRlbwpwbGF5YmFjayBiZWNhdXNlIHRoZXJlIGFyZSBub3QgZW5vdWdoIGlkbGUgZnJhbWVzIGlu
IGEgcm93IHRvIG1lZXQKbW9zdCBQU1IyIHBhbmVsIGRlZXAgc2xlZXAgZW50cnkgcmVxdWlyZW1l
bnQgdHlwaWNhbGx5IDQgZnJhbWVzLgpBcyBQU1IyIGV4aXN0aW5nIGltcGxlbWVudGF0aW9uIGlz
IHVzaW5nIG1pbmltdW0gNiBpZGxlIGZyYW1lcyBmb3IKZGVlcCBzbGVlcCwgaXQgaXMgc2FmZXIg
dG8gZW5hYmxlIERDNS82IGFmdGVyIDYgaWRsZSBmcmFtZXMKKEJ5IHNjaGVkdWxpbmcgYSBkZWxh
eWVkIHdvcmsgb2YgNiBpZGxlIGZyYW1lcywgb25jZSBEQzNDTyBoYXMgYmVlbgplbmFibGVkIGFm
dGVyIGEgcGFnZWZsaXApLgoKQWZ0ZXIgbWFudWFsbHkgd2FpdGluZyBmb3IgNiBpZGxlIGZyYW1l
cyBEQzUvNiB3aWxsIGJlIGVuYWJsZWQgYW5kClBTUjIgZGVlcCBzbGVlcCBpZGxlIGZyYW1lcyB3
aWxsIGJlIHJlc3RvcmVkIHRvIDYgaWRsZSBmcmFtZXMsIGF0IHRoaXMKcG9pbnQgRE1DIHdpbGwg
dHJpZ2dlcnMgREM1LzYgb25jZSBQU1IyIGVudGVycyB0byBkZWVwIHNsZWVwIGFmdGVyCjYgaWRs
ZSBmcmFtZXMuCkluIGZ1dHVyZSB3aGVuIHdlIHdpbGwgZW5hYmxlIFMvVyBQU1IyIHRyYWNraW5n
LCB3ZSBjYW4gY2hhbmdlIHRoZQpQU1IyIHJlcXVpcmVkIGRlZXAgc2xlZXAgaWRsZSBmcmFtZXMg
dG8gMSBzbyBETUMgY2FuIHRyaWdnZXIgdGhlCkRDNS82IGltbWVkaWF0ZWx5IGFmdGVyIFMvVyBt
YW51YWwgd2FpdGluZyBvZiA2IGlkbGUgZnJhbWVzIGdldApjb21wbGV0ZS4KCnYyOiBjYWxjdWxh
dGVkIHMvdyBzdGF0ZSB0byBzd2l0Y2ggb3ZlciBkYzNjbyB3aGVuIHRoZXJlIGlzIGFuCiAgICB1
cGRhdGUuIFtJbXJlXQogICAgVXNlZCBjYW5jZWxfZGVsYXllZF93b3JrX3N5bmMoKSBpbiBvcmRl
ciB0byBhdm9pZCBhbnkgcmFjZQogICAgd2l0aCBhbHJlYWR5IHNjaGVkdWxlZCBkZWxheWVkIHdv
cmsuIFtJbXJlXQp2MzogQ2FuY2VsX2RlbGF5ZWRfd29ya19zeW5jKCkgbWF5IGJsb2NrZWQgdGhl
IGNvbW1pdCB3b3JrLgogICAgaGVuY2UgZHJvcHBpbmcgaXQsIGRjNV9pZGxlX3RocmVhZCgpIGNo
ZWNrcyB0aGUgdmFsaWQgd2FrZXJlZiBiZWZvcmUKICAgIHB1dHRpbmcgdGhlIHJlZmVyZW5jZSBj
b3VudCwgd2hpY2ggYXZvaWRzIGFueSBjaGFuY2VzIG9mIGRyb3BwaW5nCiAgICBhIHplcm8gd2Fr
ZXJlZi4gW0ltcmUgKElSQyldCnY0OiBVc2VkIGZyb250YnVmZmVyIGZsdXNoIG1lY2hhbmlzbS4g
W0ltcmVdCnY1OiBVc2VkIHBzci5waXBlIHRvIGV4dHJhY3QgZnJvbnRidWZmZXIgYnVzeSBiaXRz
LiBbSW1yZV0KICAgIFVzZWQgY2FuY2VsX2RlbGF5ZWRfd29ya19zeW5jKCkgaW4gZW5jb2RlciBk
aXNhYmxlIHBhdGguIFtJbXJlXQogICAgVXNlZCBtb2RfZGVsYXllZF93b3JrKCkgaW5zdGVhZCBv
ZiBjYW5jZWxsaW5nIGFuZCBzY2hlZHVsaW5nIGEKICAgIGRlbGF5ZWQgd29yay4gW0ltcmVdCiAg
ICBVc2VkIHBzci5sb2NrIGluIHRnbF9kYzVfaWRsZV90aHJlYWQoKSB0byBlbmFibGUgcHNyMiBk
ZWVwCiAgICBzbGVlcC4gW0ltcmVdCiAgICBSZW1vdmVkIERDNV9SRVFfSURMRV9GUkFNRVMgbWFj
cm8uIFtJbXJlXQoKQ2M6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBpbnRlbC5jb20+CkNjOiBJ
bXJlIERlYWsgPGltcmUuZGVha0BpbnRlbC5jb20+CkNjOiBBbmltZXNoIE1hbm5hIDxhbmltZXNo
Lm1hbm5hQGludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogQW5zaHVtYW4gR3VwdGEgPGFuc2h1bWFu
Lmd1cHRhQGludGVsLmNvbT4KLS0tCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5
X3Bvd2VyLmMgICAgfCA5NyArKysrKysrKysrKysrKysrKysrCiAuLi4vZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmggICAgfCAgNCArCiAuLi4vZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZnJvbnRidWZmZXIuYyAgfCAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX3Bzci5jICAgICAgfCAgMSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5oICAgICAgICAgICAgICAgfCAgMSArCiA1IGZpbGVzIGNoYW5nZWQsIDEwNCBpbnNlcnRpb25z
KCspCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNw
bGF5X3Bvd2VyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlf
cG93ZXIuYwppbmRleCA0MmVhYmNkZWNmMDAuLmE2MDUwNDdjYjI4YSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMKQEAgLTIwLDYg
KzIwLDcgQEAKICNpbmNsdWRlICJpbnRlbF9zaWRlYmFuZC5oIgogI2luY2x1ZGUgImludGVsX3Rj
LmgiCiAjaW5jbHVkZSAiaW50ZWxfcG0uaCIKKyNpbmNsdWRlICJpbnRlbF9wc3IuaCIKIAogYm9v
bCBpbnRlbF9kaXNwbGF5X3Bvd2VyX3dlbGxfaXNfZW5hYmxlZChzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqZGV2X3ByaXYsCiAJCQkJCSBlbnVtIGk5MTVfcG93ZXJfd2VsbF9pZCBwb3dlcl93ZWxs
X2lkKTsKQEAgLTc3Myw2ICs3NzQsMjcgQEAgc3RhdGljIHZvaWQgZ2VuOV9zZXRfZGNfc3RhdGUo
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCB1MzIgc3RhdGUpCiAJZGV2X3ByaXYt
PmNzci5kY19zdGF0ZSA9IHZhbCAmIG1hc2s7CiB9CiAKK3N0YXRpYyB1MzIgaW50ZWxfZ2V0X2Zy
YW1lX3RpbWVfdXMoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNzdGF0ZSkKK3sKKwl1
MzIgcGl4ZWxfcmF0ZSwgY3J0Y19odG90YWwsIGNydGNfdnRvdGFsOworCXUzMiBmcmFtZXRpbWVf
dXM7CisKKwlpZiAoIWNzdGF0ZSB8fCAhY3N0YXRlLT5iYXNlLmFjdGl2ZSkKKwkJcmV0dXJuIDA7
CisKKwlwaXhlbF9yYXRlID0gY3N0YXRlLT5waXhlbF9yYXRlOworCisJaWYgKFdBUk5fT04ocGl4
ZWxfcmF0ZSA9PSAwKSkKKwkJcmV0dXJuIDA7CisKKwljcnRjX2h0b3RhbCA9IGNzdGF0ZS0+YmFz
ZS5hZGp1c3RlZF9tb2RlLmNydGNfaHRvdGFsOworCWNydGNfdnRvdGFsID0gY3N0YXRlLT5iYXNl
LmFkanVzdGVkX21vZGUuY3J0Y192dG90YWw7CisJZnJhbWV0aW1lX3VzID0gRElWX1JPVU5EX1VQ
KGNydGNfaHRvdGFsICogY3J0Y192dG90YWwgKiAxMDAwVUxMLAorCQkJCSAgICBwaXhlbF9yYXRl
KTsKKworCXJldHVybiBmcmFtZXRpbWVfdXM7Cit9CisKIHZvaWQgdGdsX2Rpc2FibGVfcHNyMl90
cmFuc2NvZGVyX2V4aXRsaW5lKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjc3RhdGUp
CiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShjc3RhdGUt
PmJhc2UuY3J0Yy0+ZGV2KTsKQEAgLTc4NCw2ICs4MDYsOSBAQCB2b2lkIHRnbF9kaXNhYmxlX3Bz
cjJfdHJhbnNjb2Rlcl9leGl0bGluZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3N0
YXRlKQogCXZhbCA9IEk5MTVfUkVBRChFWElUTElORShjc3RhdGUtPmNwdV90cmFuc2NvZGVyKSk7
CiAJdmFsICY9IH5FWElUTElORV9FTkFCTEU7CiAJSTkxNV9XUklURShFWElUTElORShjc3RhdGUt
PmNwdV90cmFuc2NvZGVyKSwgdmFsKTsKKworCS8qIEFzIHBzcjIgZW5jb2RlciBoYXMgZGlzYWJs
ZWQsIGNhbmNlbCB0aGUgZGM1IGlkbGUgZGVsYXllZCB3b3JrICovCisJY2FuY2VsX2RlbGF5ZWRf
d29ya19zeW5jKCZkZXZfcHJpdi0+Y3NyLmlkbGVfd29yayk7CiB9CiAKIHZvaWQgdGdsX2VuYWJs
ZV9wc3IyX3RyYW5zY29kZXJfZXhpdGxpbmUoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUg
KmNzdGF0ZSkKQEAgLTgxNyw2ICs4NDIsNjAgQEAgdm9pZCB0Z2xfZW5hYmxlX3BzcjJfdHJhbnNj
b2Rlcl9leGl0bGluZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3N0YXRlKQogCUk5
MTVfV1JJVEUoRVhJVExJTkUoY3N0YXRlLT5jcHVfdHJhbnNjb2RlciksIHZhbCk7CiB9CiAKKy8q
CisgKiBXaGVuIHdlIHdpbGwgZW5hYmxlIG1hbnVhbCBQU1IyIFMvVyB0cmFja2luZyBpbiBmdXR1
cmUKKyAqIHdlIHdpbGwgaW1wbGVtZW50IHRoaXMgZW50aXJlIERDM0NPIGZsdXNoIGxvZ2ljIGlu
CisgKiBpbnRlbF9wc3JfZmx1c2goKS4KKyAqLwordm9pZCB0Z2xfZGMzY29fZmx1c2goc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAorCQkgICAgIHVuc2lnbmVkIGludCBmcm9udGJ1
ZmZlcl9iaXRzLCBlbnVtIGZiX29wX29yaWdpbiBvcmlnaW4pCit7CisJc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNzdGF0ZTsKKwlzdHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YzsKKwl1MzIgZGVsYXk7
CisJdW5zaWduZWQgaW50IGJ1c3lfZnJvbnRidWZmZXJfYml0czsKKworCWlmICghSVNfVElHRVJM
QUtFKGRldl9wcml2KSkKKwkJcmV0dXJuOworCisJaWYgKCEoZGV2X3ByaXYtPmNzci5hbGxvd2Vk
X2RjX21hc2sgJiBEQ19TVEFURV9FTl9EQzNDTykpCisJCXJldHVybjsKKworCWlmIChvcmlnaW4g
IT0gT1JJR0lOX0ZMSVApCisJCXJldHVybjsKKworCW11dGV4X2xvY2soJmRldl9wcml2LT5wc3Iu
bG9jayk7CisJY3J0YyA9IGludGVsX2dldF9jcnRjX2Zvcl9waXBlKGRldl9wcml2LCBkZXZfcHJp
di0+cHNyLnBpcGUpOworCWNzdGF0ZSA9IHRvX2ludGVsX2NydGNfc3RhdGUoY3J0Yy0+YmFzZS5z
dGF0ZSk7CisKKwlmcm9udGJ1ZmZlcl9iaXRzICY9CisJCUlOVEVMX0ZST05UQlVGRkVSX0FMTF9N
QVNLKGRldl9wcml2LT5wc3IucGlwZSk7CisKKwlidXN5X2Zyb250YnVmZmVyX2JpdHMgJj0gfmZy
b250YnVmZmVyX2JpdHM7CisKKwlpZiAoIWRldl9wcml2LT5wc3IucHNyMl9lbmFibGVkIHx8ICFk
ZXZfcHJpdi0+cHNyLmFjdGl2ZSkKKwkJZ290byB1bmxvY2s7CisKKwkvKgorCSAqIEF0IGV2ZXJ5
IGZsaXAgZnJvbnRidWZmZXIgZmx1c2ggbW9kaWZpZWQgZGVsYXkgb2YgZGVsYXllZCB3b3JrLAor
CSAqIHdoZW4gZGVsYXllZCBzY2hlZHVsZXMgdGhhdCBtZWFucyBkaXNwbGF5IGhhcyBiZWVuIGlk
bGUuCisJICovCisJaWYgKCFidXN5X2Zyb250YnVmZmVyX2JpdHMpIHsKKwkJaWYgKCFkZXZfcHJp
di0+cHNyLnBzcjJfZGVlcF9zbHBfZGlzYWJsZWQpIHsKKwkJCXRnbF9wc3IyX2RlZXBfc2xlZXBf
ZGlzYWJsZShkZXZfcHJpdik7CisJCQlkZXZfcHJpdi0+cHNyLnBzcjJfZGVlcF9zbHBfZGlzYWJs
ZWQgPSB0cnVlOworCQl9CisJCXRnbF9zZXRfdGFyZ2V0X2RjX3N0YXRlKGRldl9wcml2LCBEQ19T
VEFURV9FTl9EQzNDTyk7CisJCS8qIERDNS9EQzYgcmVxdWlyZWQgaWRsZSBmcmFtZXMgPSA2ICov
CisJCWRlbGF5ID0gNiAqIGludGVsX2dldF9mcmFtZV90aW1lX3VzKGNzdGF0ZSk7CisJCW1vZF9k
ZWxheWVkX3dvcmsoc3lzdGVtX3dxLCAmZGV2X3ByaXYtPmNzci5pZGxlX3dvcmssCisJCQkJIHVz
ZWNzX3RvX2ppZmZpZXMoZGVsYXkpKTsKKwl9CisKK3VubG9jazoKKwltdXRleF91bmxvY2soJmRl
dl9wcml2LT5wc3IubG9jayk7Cit9CisKIHN0YXRpYyBib29sIHRnbF9kYzNjb19pc19lZHBfY29u
bmVjdGVkKHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICAqY3J0Y19zdGF0ZSkKIHsKIAlzdHJ1Y3Qg
ZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUgPSBjcnRjX3N0YXRlLT5iYXNlLnN0YXRlOwpAQCAtODc2
LDYgKzk1NSwyMyBAQCB2b2lkIHRnbF9kYzNjb19jcnRjX2dldF9jb25maWcoc3RydWN0IGludGVs
X2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiAJCWNydGNfc3RhdGUtPmhhc19kYzNjb19leGl0bGlu
ZSA9IHRydWU7CiB9CiAKK3ZvaWQgdGdsX2RjNV9pZGxlX3RocmVhZChzdHJ1Y3Qgd29ya19zdHJ1
Y3QgKndvcmspCit7CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0KKwkJY29u
dGFpbmVyX29mKHdvcmssIHR5cGVvZigqZGV2X3ByaXYpLCBjc3IuaWRsZV93b3JrLndvcmspOwor
CisJLyogSWYgZGVsYXllZCB3b3JrIGlzIHBlbmRpbmcsIGl0IGlzIG5vdCBpZGxlICovCisJaWYg
KGRlbGF5ZWRfd29ya19wZW5kaW5nKCZkZXZfcHJpdi0+Y3NyLmlkbGVfd29yaykpCisJCXJldHVy
bjsKKworCURSTV9ERUJVR19LTVMoIkRDNS82IGlkbGUgdGhyZWFkXG4iKTsKKwltdXRleF9sb2Nr
KCZkZXZfcHJpdi0+cHNyLmxvY2spOworCXRnbF9zZXRfdGFyZ2V0X2RjX3N0YXRlKGRldl9wcml2
LCBEQ19TVEFURV9FTl9VUFRPX0RDNik7CisJdGdsX3BzcjJfZGVlcF9zbGVlcF9lbmFibGUoZGV2
X3ByaXYpOworCWRldl9wcml2LT5wc3IucHNyMl9kZWVwX3NscF9kaXNhYmxlZCA9IGZhbHNlOwor
CW11dGV4X3VubG9jaygmZGV2X3ByaXYtPnBzci5sb2NrKTsKK30KKwogc3RhdGljIHZvaWQKIGFs
bG93ZWRfZGNfbWFza190b190YXJnZXRfZGNfc3RhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2KQogewpAQCAtNDIzNyw2ICs0MzMzLDcgQEAgaW50IGludGVsX3Bvd2VyX2RvbWFp
bnNfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAKIAlJTklUX0RFTEFZ
RURfV09SSygmcG93ZXJfZG9tYWlucy0+YXN5bmNfcHV0X3dvcmssCiAJCQkgIGludGVsX2Rpc3Bs
YXlfcG93ZXJfcHV0X2FzeW5jX3dvcmspOworCUlOSVRfREVMQVlFRF9XT1JLKCZkZXZfcHJpdi0+
Y3NyLmlkbGVfd29yaywgdGdsX2RjNV9pZGxlX3RocmVhZCk7CiAKIAkvKgogCSAqIFRoZSBlbmFi
bGluZyBvcmRlciB3aWxsIGJlIGZyb20gbG93ZXIgdG8gaGlnaGVyIGluZGV4ZWQgd2VsbHMsCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93
ZXIuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dlci5o
CmluZGV4IGJmNjhmMjZhNWEzNy4uODc3MjVhMjNmZWFkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuaAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuaApAQCAtOSw2ICs5LDcgQEAK
ICNpbmNsdWRlICJpbnRlbF9kaXNwbGF5LmgiCiAjaW5jbHVkZSAiaW50ZWxfcnVudGltZV9wbS5o
IgogI2luY2x1ZGUgImk5MTVfcmVnLmgiCisjaW5jbHVkZSAiaW50ZWxfZnJvbnRidWZmZXIuaCIK
IAogc3RydWN0IGRybV9pOTE1X3ByaXZhdGU7CiBzdHJ1Y3QgaW50ZWxfZW5jb2RlcjsKQEAgLTI2
NSw2ICsyNjYsOSBAQCB2b2lkIHRnbF9kYzNjb19jcnRjX2NvbXB1dGVfY29uZmlnKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIHZvaWQgdGdsX2RjM2NvX2NydGNfZ2V0X2NvbmZp
ZyhzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSk7CiB2b2lkIHRnbF9kaXNhYmxl
X3BzcjJfdHJhbnNjb2Rlcl9leGl0bGluZShjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
c3RhdGUpOwogdm9pZCB0Z2xfZW5hYmxlX3BzcjJfdHJhbnNjb2Rlcl9leGl0bGluZShjb25zdCBz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqc3RhdGUpOwordm9pZCB0Z2xfZGMzY29fZmx1c2goc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAorCQkgICAgIHVuc2lnbmVkIGludCBmcm9u
dGJ1ZmZlcl9iaXRzLCBlbnVtIGZiX29wX29yaWdpbiBvcmlnaW4pOwordm9pZCB0Z2xfZGM1X2lk
bGVfdGhyZWFkKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yayk7CiAKIGNvbnN0IGNoYXIgKgogaW50
ZWxfZGlzcGxheV9wb3dlcl9kb21haW5fc3RyKGVudW0gaW50ZWxfZGlzcGxheV9wb3dlcl9kb21h
aW4gZG9tYWluKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZnJvbnRidWZmZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZnJv
bnRidWZmZXIuYwppbmRleCBmYzQwZGMxZmRiY2MuLmMzYjEwZjZlNDM4MiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mcm9udGJ1ZmZlci5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZnJvbnRidWZmZXIuYwpAQCAtOTAsNiAr
OTAsNyBAQCBzdGF0aWMgdm9pZCBmcm9udGJ1ZmZlcl9mbHVzaChzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSwKIAltaWdodF9zbGVlcCgpOwogCWludGVsX2VkcF9kcnJzX2ZsdXNoKGk5MTUs
IGZyb250YnVmZmVyX2JpdHMpOwogCWludGVsX3Bzcl9mbHVzaChpOTE1LCBmcm9udGJ1ZmZlcl9i
aXRzLCBvcmlnaW4pOworCXRnbF9kYzNjb19mbHVzaChpOTE1LCBmcm9udGJ1ZmZlcl9iaXRzLCBv
cmlnaW4pOwogCWludGVsX2ZiY19mbHVzaChpOTE1LCBmcm9udGJ1ZmZlcl9iaXRzLCBvcmlnaW4p
OwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Bz
ci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wc3IuYwppbmRleCAxMWQz
N2Y5NmNlNzEuLjU1MmVhZjJiZDE2ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9wc3IuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX3Bzci5jCkBAIC01NzQsNiArNTc0LDcgQEAgc3RhdGljIHZvaWQgdGdsX2Rpc2FsbG93X2Rj
M2NvX29uX3BzcjJfZXhpdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJY2Fu
Y2VsX2RlbGF5ZWRfd29yaygmZGV2X3ByaXYtPmNzci5pZGxlX3dvcmspOwogCS8qIEJlZm9yZSBQ
U1IyIGV4aXQgZGlzYWxsb3cgZGMzY28qLwogCXRnbF9zZXRfdGFyZ2V0X2RjX3N0YXRlKGRldl9w
cml2LCBEQ19TVEFURV9FTl9VUFRPX0RDNik7CisJZGV2X3ByaXYtPnBzci5wc3IyX2RlZXBfc2xw
X2Rpc2FibGVkID0gZmFsc2U7CiB9CiAKIHN0YXRpYyBib29sIGludGVsX3BzcjJfY29uZmlnX3Zh
bGlkKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRl
eCA0NTIxYjkzODFkYjMuLjI1NTkxYzEyOGM1OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBA
IC0zMzksNiArMzM5LDcgQEAgc3RydWN0IGludGVsX2NzciB7CiAJdTMyIGRjX3N0YXRlOwogCXUz
MiB0YXJnZXRfZGNfc3RhdGU7CiAJdTMyIGFsbG93ZWRfZGNfbWFzazsKKwlzdHJ1Y3QgZGVsYXll
ZF93b3JrIGlkbGVfd29yazsKIAlpbnRlbF93YWtlcmVmX3Qgd2FrZXJlZjsKIH07CiAKLS0gCjIu
MjEuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50
ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

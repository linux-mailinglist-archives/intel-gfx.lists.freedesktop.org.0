Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A2AE916430
	for <lists+intel-gfx@lfdr.de>; Tue,  7 May 2019 15:05:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A351389F45;
	Tue,  7 May 2019 13:05:33 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 13C4A89F45
 for <intel-gfx@lists.freedesktop.org>; Tue,  7 May 2019 13:05:32 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 07 May 2019 06:05:31 -0700
X-ExtLoop1: 1
Received: from shashanks-u1804-dt.iind.intel.com ([10.223.74.135])
 by fmsmga008.fm.intel.com with ESMTP; 07 May 2019 06:05:29 -0700
From: Shashank Sharma <shashank.sharma@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  7 May 2019 18:32:56 +0530
Message-Id: <20190507130257.22837-1-shashank.sharma@intel.com>
X-Mailer: git-send-email 2.17.1
Subject: [Intel-gfx] [PATCH v3 1/2] drm/i915/GLK: Properly handle plane CSC
 for BT2020 framebuffers
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Maarten Lankhorst <maarten.lankhorst@intel.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJhbWVidWZmZXIgZm9ybWF0cyBQMDF4IGFyZSBzdXBwb3J0ZWQgYnkgR0xLLCBidXQgdGhlIGZ1
bmN0aW9uIHdoaWNoCmhhbmRsZXMgQ1NDIG9uIHBsYW5lIGNvbG9yIGNvbnRyb2wgcmVnaXN0ZXIs
IHN0aWxsIGV4cGVjdGVzIHRoZSBpbnB1dApidWZmZXIgdG8gYmUgUkVDNzA5LiBUaGlzIGNhbiBj
YXVzZSBpbmFjY3VyYXRlIG91dHB1dCBmb3IgZGlyZWN0IFAwMXgKZmxpcHMuCgpUaGlzIHBhdGNo
IGNoZWNrcyBpZiB0aGUgY29sb3JfZW5jb2RpbmcgcHJvcGVydHkgaXMgc2V0IHRvIFlDQkNSXzIw
MjAsCmFuZCBlbmFibGVzIHRoZSBjb3JyZXNwb25kaW5nIGNvbG9yIGNvbnZlcnNpb24gbW9kZSBv
biBwbGFuZSBDU0MuCgpQUzogcmVuYW1lZCB2YXJpYWJsZSBwbGFuZV9jb2xvcl9jdGwgdG8gY29s
b3JfY3RsIGZvciA4MCBjaGFyIHN0dWZmLgoKVjI6IEV4cG9zZSB0aGUgWUNCQ1JfQlQyMDIwIHZh
bHVlIGluIGVudW0gdmFsdWVzIG9mIHN1cHBvcnRlZCBlbmNvZGluZwogICAgZm9ybWF0cy4KVjM6
IEZpeGVkIHRoZSBtaXNzaW5nIEJJVCgpIHdoaWxlIHNldHRpbmcgc3VwcG9ydGVkX2VuY29kaW5n
cwogICAgKEx1a2FzLCB0ZWFtIEtvZGkpCgpDYzogVmlsbGUgU3lyamFsYSA8dmlsbGUuc3lyamFs
YUBsaW51eC5pbnRlbC5jb20+CkNjOiBNYWFydGVuIExhbmtob3JzdCA8bWFhcnRlbi5sYW5raG9y
c3RAaW50ZWwuY29tPgpDYzogVW1hIFNoYW5rYXIgPHVtYS5zaGFua2FyQGludGVsLmNvbT4KU2ln
bmVkLW9mZi1ieTogU2hhc2hhbmsgU2hhcm1hIDxzaGFzaGFuay5zaGFybWFAaW50ZWwuY29tPgot
LS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rpc3BsYXkuYyB8IDI2ICsrKysrKysrKysr
KysrKystLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9zcHJpdGUuYyAgfCAx
MCArKysrKysrKy0tCiAyIGZpbGVzIGNoYW5nZWQsIDI0IGluc2VydGlvbnMoKyksIDEyIGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rpc3BsYXku
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rpc3BsYXkuYwppbmRleCBkZDY1ZDdjNTIx
YzEuLjJkNGQzMTI4YmYxZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
ZGlzcGxheS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rpc3BsYXkuYwpAQCAt
Mzg2OCwyNCArMzg2OCwzMCBAQCB1MzIgZ2xrX3BsYW5lX2NvbG9yX2N0bChjb25zdCBzdHJ1Y3Qg
aW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJdG9faTkxNShwbGFuZV9zdGF0ZS0+YmFz
ZS5wbGFuZS0+ZGV2KTsKIAljb25zdCBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiA9IHBsYW5l
X3N0YXRlLT5iYXNlLmZiOwogCXN0cnVjdCBpbnRlbF9wbGFuZSAqcGxhbmUgPSB0b19pbnRlbF9w
bGFuZShwbGFuZV9zdGF0ZS0+YmFzZS5wbGFuZSk7Ci0JdTMyIHBsYW5lX2NvbG9yX2N0bCA9IDA7
CisJdTMyIGNvbG9yX2N0bCA9IDA7CiAKLQlwbGFuZV9jb2xvcl9jdGwgfD0gUExBTkVfQ09MT1Jf
UExBTkVfR0FNTUFfRElTQUJMRTsKLQlwbGFuZV9jb2xvcl9jdGwgfD0gZ2xrX3BsYW5lX2NvbG9y
X2N0bF9hbHBoYShwbGFuZV9zdGF0ZSk7CisJY29sb3JfY3RsIHw9IFBMQU5FX0NPTE9SX1BMQU5F
X0dBTU1BX0RJU0FCTEU7CisJY29sb3JfY3RsIHw9IGdsa19wbGFuZV9jb2xvcl9jdGxfYWxwaGEo
cGxhbmVfc3RhdGUpOwogCiAJaWYgKGZiLT5mb3JtYXQtPmlzX3l1diAmJiAhaWNsX2lzX2hkcl9w
bGFuZShkZXZfcHJpdiwgcGxhbmUtPmlkKSkgewotCQlpZiAocGxhbmVfc3RhdGUtPmJhc2UuY29s
b3JfZW5jb2RpbmcgPT0gRFJNX0NPTE9SX1lDQkNSX0JUNzA5KQotCQkJcGxhbmVfY29sb3JfY3Rs
IHw9IFBMQU5FX0NPTE9SX0NTQ19NT0RFX1lVVjcwOV9UT19SR0I3MDk7Ci0JCWVsc2UKLQkJCXBs
YW5lX2NvbG9yX2N0bCB8PSBQTEFORV9DT0xPUl9DU0NfTU9ERV9ZVVY2MDFfVE9fUkdCNzA5Owor
CQlzd2l0Y2ggKHBsYW5lX3N0YXRlLT5iYXNlLmNvbG9yX2VuY29kaW5nKSB7CisJCWNhc2UgRFJN
X0NPTE9SX1lDQkNSX0JUNzA5OgorCQkJY29sb3JfY3RsIHw9IFBMQU5FX0NPTE9SX0NTQ19NT0RF
X1lVVjcwOV9UT19SR0I3MDk7CisJCQlicmVhazsKKwkJY2FzZSBEUk1fQ09MT1JfWUNCQ1JfQlQy
MDIwOgorCQkJY29sb3JfY3RsIHw9IFBMQU5FX0NPTE9SX0NTQ19NT0RFX1lVVjIwMjBfVE9fUkdC
MjAyMDsKKwkJCWJyZWFrOworCQlkZWZhdWx0OgorCQkJY29sb3JfY3RsIHw9IFBMQU5FX0NPTE9S
X0NTQ19NT0RFX1lVVjYwMV9UT19SR0I3MDk7CisJCX0KIAogCQlpZiAocGxhbmVfc3RhdGUtPmJh
c2UuY29sb3JfcmFuZ2UgPT0gRFJNX0NPTE9SX1lDQkNSX0ZVTExfUkFOR0UpCi0JCQlwbGFuZV9j
b2xvcl9jdGwgfD0gUExBTkVfQ09MT1JfWVVWX1JBTkdFX0NPUlJFQ1RJT05fRElTQUJMRTsKKwkJ
CWNvbG9yX2N0bCB8PSBQTEFORV9DT0xPUl9ZVVZfUkFOR0VfQ09SUkVDVElPTl9ESVNBQkxFOwog
CX0gZWxzZSBpZiAoZmItPmZvcm1hdC0+aXNfeXV2KSB7Ci0JCXBsYW5lX2NvbG9yX2N0bCB8PSBQ
TEFORV9DT0xPUl9JTlBVVF9DU0NfRU5BQkxFOworCQljb2xvcl9jdGwgfD0gUExBTkVfQ09MT1Jf
SU5QVVRfQ1NDX0VOQUJMRTsKIAl9CiAKLQlyZXR1cm4gcGxhbmVfY29sb3JfY3RsOworCXJldHVy
biBjb2xvcl9jdGw7CiB9CiAKIHN0YXRpYyBpbnQKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2ludGVsX3Nwcml0ZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfc3ByaXRl
LmMKaW5kZXggMjkxM2U4OTI4MGQ3Li40NGFhZWFjMWIyZWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX3Nwcml0ZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2lu
dGVsX3Nwcml0ZS5jCkBAIC0yMjM4LDYgKzIyMzgsNyBAQCBza2xfdW5pdmVyc2FsX3BsYW5lX2Ny
ZWF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJc3RydWN0IGludGVsX3Bs
YW5lICpwbGFuZTsKIAllbnVtIGRybV9wbGFuZV90eXBlIHBsYW5lX3R5cGU7CiAJdW5zaWduZWQg
aW50IHN1cHBvcnRlZF9yb3RhdGlvbnM7CisJdW5zaWduZWQgaW50IHN1cHBvcnRlZF9lbmNvZGlu
Z3M7CiAJdW5zaWduZWQgaW50IHBvc3NpYmxlX2NydGNzOwogCWNvbnN0IHU2NCAqbW9kaWZpZXJz
OwogCWNvbnN0IHUzMiAqZm9ybWF0czsKQEAgLTIzMjUsOSArMjMyNiwxNCBAQCBza2xfdW5pdmVy
c2FsX3BsYW5lX2NyZWF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCQkJ
CSAgIERSTV9NT0RFX1JPVEFURV8wLAogCQkJCQkgICBzdXBwb3J0ZWRfcm90YXRpb25zKTsKIAor
CXN1cHBvcnRlZF9lbmNvZGluZ3MgPSBCSVQoRFJNX0NPTE9SX1lDQkNSX0JUNjAxKSB8CisJCQkg
ICAgICBCSVQoRFJNX0NPTE9SX1lDQkNSX0JUNzA5KTsKKworCWlmIChJTlRFTF9HRU4oZGV2X3By
aXYpID49IDEwIHx8IElTX0dFTUlOSUxBS0UoZGV2X3ByaXYpKQorCQlzdXBwb3J0ZWRfZW5jb2Rp
bmdzIHw9IEJJVChEUk1fQ09MT1JfWUNCQ1JfQlQyMDIwKTsKKwogCWRybV9wbGFuZV9jcmVhdGVf
Y29sb3JfcHJvcGVydGllcygmcGxhbmUtPmJhc2UsCi0JCQkJCSAgQklUKERSTV9DT0xPUl9ZQ0JD
Ul9CVDYwMSkgfAotCQkJCQkgIEJJVChEUk1fQ09MT1JfWUNCQ1JfQlQ3MDkpLAorCQkJCQkgIHN1
cHBvcnRlZF9lbmNvZGluZ3MsCiAJCQkJCSAgQklUKERSTV9DT0xPUl9ZQ0JDUl9MSU1JVEVEX1JB
TkdFKSB8CiAJCQkJCSAgQklUKERSTV9DT0xPUl9ZQ0JDUl9GVUxMX1JBTkdFKSwKIAkJCQkJICBE
Uk1fQ09MT1JfWUNCQ1JfQlQ3MDksCi0tIAoyLjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3DB511DC3E7
	for <lists+intel-gfx@lfdr.de>; Thu, 21 May 2020 02:39:02 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F03A66E8EA;
	Thu, 21 May 2020 00:38:57 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 202B06E8CD
 for <intel-gfx@lists.freedesktop.org>; Thu, 21 May 2020 00:38:16 +0000 (UTC)
IronPort-SDR: 6ZG+o6aTp26WYYyefZo5e+eJ+f6tb9cxS0GwbVWEohOaxZnfRDgWIserfGI4qTtOFeuKYFG+Im
 wK1rScK2cQkw==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by fmsmga105.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 20 May 2020 17:38:15 -0700
IronPort-SDR: LSOUn14X6fX5WxkfxQo0mHEhBR/1hlWwTNWwK+tGLK5l3vBAxCUpptX1up2sP9G2LUeWdsFTEy
 gm1oNupnhfDA==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.73,415,1583222400"; d="scan'208";a="466720969"
Received: from ldmartin1-desk.jf.intel.com ([10.165.21.151])
 by fmsmga006.fm.intel.com with ESMTP; 20 May 2020 17:38:15 -0700
From: Lucas De Marchi <lucas.demarchi@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 20 May 2020 17:38:02 -0700
Message-Id: <20200521003803.18936-37-lucas.demarchi@intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20200521003803.18936-1-lucas.demarchi@intel.com>
References: <20200521003803.18936-1-lucas.demarchi@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 36/37] drm/i915/dg1: Add initial DG1 workarounds
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: fernando.pacheco@intel.com, Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogU3R1YXJ0IFN1bW1lcnMgPHN0dWFydC5zdW1tZXJzQGludGVsLmNvbT4KCkRHMSBzaGFy
ZXMgc29tZSB3b3JrYXJvdW5kcyB3aXRoIFRHTCBhbmQgUktMIGFuZCBhbHNvIGhhcyBzb21lCmFk
ZGl0aW9uYWwgd29ya2Fyb3VuZHMgb2YgaXRzIG93bi4KCk1lZGlhIHBvd2VyIGdhdGluZyBzaG91
bGQgbm90IGJlIGFwcGxpZWQgc28gd2UganVzdCBzZXQgaXQgdG8Kbm9wX2luaXRfY2xvY2tfZ2F0
aW5nKCkuCgpCU3BlYzogNTM1MDgKCkNjOiBNYXR0IEF0d29vZCA8bWF0dGhldy5zLmF0d29vZEBp
bnRlbC5jb20+CkNjOiBNYXR0IFJvcGVyIDxtYXR0aGV3LmQucm9wZXJAaW50ZWwuY29tPgpDYzog
UmFkaGFrcmlzaG5hIFNyaXBhZGEgPHJhZGhha3Jpc2huYS5zcmlwYWRhQGludGVsLmNvbT4KQ2M6
IEpvc8OpIFJvYmVydG8gZGUgU291emEgPGpvc2Uuc291emFAaW50ZWwuY29tPgpTaWduZWQtb2Zm
LWJ5OiBTdHVhcnQgU3VtbWVycyA8c3R1YXJ0LnN1bW1lcnNAaW50ZWwuY29tPgpTaWduZWQtb2Zm
LWJ5OiBMdWNhcyBEZSBNYXJjaGkgPGx1Y2FzLmRlbWFyY2hpQGludGVsLmNvbT4KLS0tCiAuLi4v
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3Bvd2VyLmMgICAgfCAgNSArLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYyAgIHwgIDQgKy0KIGRyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMgICB8IDkxICsrKysrKysrKysrKysr
KystLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggICAgICAgICAgICAgICB8IDEw
ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jICAgICAgICAgICAgICAgfCAxNyAr
KystCiA1IGZpbGVzIGNoYW5nZWQsIDEwNSBpbnNlcnRpb25zKCspLCAyMiBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlf
cG93ZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV9wb3dl
ci5jCmluZGV4IDI2NTE4MzY5NGM2Mi4uNzBlN2JmNTdhY2RhIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfcG93ZXIuYwpAQCAtNTQ1NSw4ICs1
NDU1LDkgQEAgc3RhdGljIHZvaWQgdGdsX2J3X2J1ZGR5X2luaXQoc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2KQogCWNvbnN0IHN0cnVjdCBidWRkeV9wYWdlX21hc2sgKnRhYmxlOwog
CWludCBpOwogCi0JaWYgKElTX1RHTF9SRVZJRChkZXZfcHJpdiwgVEdMX1JFVklEX0EwLCBUR0xf
UkVWSURfQjApKQotCQkvKiBXYV8xNDA5NzY3MTA4OiB0Z2wgKi8KKwlpZiAoSVNfREcxX1JFVklE
KGRldl9wcml2LCBERzFfUkVWSURfQTAsIERHMV9SRVZJRF9BMCkgfHwKKwkgICAgSVNfVEdMX1JF
VklEKGRldl9wcml2LCBUR0xfUkVWSURfQTAsIFRHTF9SRVZJRF9CMCkpCisJCS8qIFdhXzE0MDk3
NjcxMDg6dGdsLGRnMSAqLwogCQl0YWJsZSA9IHdhXzE0MDk3NjcxMDhfYnVkZHlfcGFnZV9tYXNr
czsKIAllbHNlCiAJCXRhYmxlID0gdGdsX2J1ZGR5X3BhZ2VfbWFza3M7CmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYwppbmRleCAyMGVlYTgxMTE4ZGEuLjFiNzEw
OGI2NWQ3ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9z
cHJpdGUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5j
CkBAIC0yODQyLDggKzI4NDIsOCBAQCBzdGF0aWMgYm9vbCBza2xfcGxhbmVfZm9ybWF0X21vZF9z
dXBwb3J0ZWQoc3RydWN0IGRybV9wbGFuZSAqX3BsYW5lLAogc3RhdGljIGJvb2wgZ2VuMTJfcGxh
bmVfc3VwcG9ydHNfbWNfY2NzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJ
CQkJZW51bSBwbGFuZV9pZCBwbGFuZV9pZCkKIHsKLQkvKiBXYV8xNDAxMDQ3NzAwODp0Z2xbYTAu
LmMwXSxya2xbYWxsXSAqLwotCWlmIChJU19ST0NLRVRMQUtFKGRldl9wcml2KSB8fAorCS8qIFdh
XzE0MDEwNDc3MDA4OnRnbFthMC4uYzBdLHJrbFthbGxdLGRnMVthbGxdICovCisJaWYgKElTX0RH
MShkZXZfcHJpdikgfHwgSVNfUk9DS0VUTEFLRShkZXZfcHJpdikgfHwKIAkgICAgSVNfVEdMX1JF
VklEKGRldl9wcml2LCBUR0xfUkVWSURfQTAsIFRHTF9SRVZJRF9DMCkpCiAJCXJldHVybiBmYWxz
ZTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfd29ya2Fyb3Vu
ZHMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMKaW5kZXgg
MzFjNWI4NWE1Y2Y1Li5iMTkzOTVmOGEwMDEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX3dvcmthcm91bmRzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfd29ya2Fyb3VuZHMuYwpAQCAtNjE3LDYgKzYxNywyMCBAQCBzdGF0aWMgdm9pZCB0Z2xf
Y3R4X3dvcmthcm91bmRzX2luaXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogCSAg
ICAgICBGRl9NT0RFMl9URFNfVElNRVJfMTI4LCAwKTsKIH0KIAorc3RhdGljIHZvaWQgZGcxX2N0
eF93b3JrYXJvdW5kc19pbml0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKKwkJCQkg
ICAgIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndhbCkKK3sKKwlnZW4xMl9jdHhfd29ya2Fyb3VuZHNf
aW5pdChlbmdpbmUsIHdhbCk7CisKKwkvKiBXYV8xNDA5MDQ0NzY0ICovCisJV0FfQ0xSX0JJVF9N
QVNLRUQoR0VOMTFfQ09NTU9OX1NMSUNFX0NISUNLRU4zLAorCQkJICBERzFfRkxPQVRfUE9JTlRf
QkxFTkRfT1BUX1NUUklDVF9NT0RFX0VOKTsKKworCS8qIFdhXzIyMDEwNDkzMjk4ICovCisJV0Ff
U0VUX0JJVF9NQVNLRUQoSElaX0NISUNLRU4sCisJCQkgIERHMV9IWl9SRUFEX1NVUFBSRVNTSU9O
X09QVElNSVpBVElPTl9ESVNBQkxFKTsKK30KKwogc3RhdGljIHZvaWQKIF9faW50ZWxfZW5naW5l
X2luaXRfY3R4X3dhKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAkJCSAgIHN0cnVj
dCBpOTE1X3dhX2xpc3QgKndhbCwKQEAgLTYyOSw3ICs2NDMsOSBAQCBfX2ludGVsX2VuZ2luZV9p
bml0X2N0eF93YShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAKIAl3YV9pbml0X3N0
YXJ0KHdhbCwgbmFtZSwgZW5naW5lLT5uYW1lKTsKIAotCWlmIChJU19USUdFUkxBS0UoaTkxNSkp
CisJaWYgKElTX0RHMShpOTE1KSkKKwkJZGcxX2N0eF93b3JrYXJvdW5kc19pbml0KGVuZ2luZSwg
d2FsKTsKKwllbHNlIGlmIChJU19USUdFUkxBS0UoaTkxNSkpCiAJCXRnbF9jdHhfd29ya2Fyb3Vu
ZHNfaW5pdChlbmdpbmUsIHdhbCk7CiAJZWxzZSBpZiAoSVNfR0VOKGk5MTUsIDEyKSkKIAkJZ2Vu
MTJfY3R4X3dvcmthcm91bmRzX2luaXQoZW5naW5lLCB3YWwpOwpAQCAtOTY0LDEwICs5ODAsMzAg
QEAgdGdsX2d0X3dvcmthcm91bmRzX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUs
IHN0cnVjdCBpOTE1X3dhX2xpc3QgKndhbCkKIAkJCSAgICBMM19DTEtHQVRFX0RJUyB8IEwzX0NS
MlhfQ0xLR0FURV9ESVMpOwogfQogCitzdGF0aWMgdm9pZAorZGcxX2d0X3dvcmthcm91bmRzX2lu
aXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndh
bCkKK3sKKwlnZW4xMl9ndF93b3JrYXJvdW5kc19pbml0KGk5MTUsIHdhbCk7CisKKwkvKiBXYV8x
NjA3MDg3MDU2OmRnMSAqLworCWlmIChJU19ERzFfUkVWSUQoaTkxNSwgREcxX1JFVklEX0EwLCBE
RzFfUkVWSURfQTApKQorCQl3YV93cml0ZV9vcih3YWwsCisJCQkgICAgU0xJQ0VfVU5JVF9MRVZF
TF9DTEtHQVRFLAorCQkJICAgIEwzX0NMS0dBVEVfRElTIHwgTDNfQ1IyWF9DTEtHQVRFX0RJUyk7
CisKKwkvKiBXYV8xNDA5NDIwNjA0OmRnMSAqLworCWlmIChJU19ERzEoaTkxNSkpCisJCXdhX3dy
aXRlX29yKHdhbCwKKwkJCSAgICBTVUJTTElDRV9VTklUX0xFVkVMX0NMS0dBVEUyLAorCQkJICAg
IENQU1NVTklUX0NMS0dBVEVfRElTKTsKK30KKwogc3RhdGljIHZvaWQKIGd0X2luaXRfd29ya2Fy
b3VuZHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsIHN0cnVjdCBpOTE1X3dhX2xpc3Qg
KndhbCkKIHsKLQlpZiAoSVNfVElHRVJMQUtFKGk5MTUpKQorCWlmIChJU19ERzEoaTkxNSkpCisJ
CWRnMV9ndF93b3JrYXJvdW5kc19pbml0KGk5MTUsIHdhbCk7CisJZWxzZSBpZiAoSVNfVElHRVJM
QUtFKGk5MTUpKQogCQl0Z2xfZ3Rfd29ya2Fyb3VuZHNfaW5pdChpOTE1LCB3YWwpOwogCWVsc2Ug
aWYgKElTX0dFTihpOTE1LCAxMikpCiAJCWdlbjEyX2d0X3dvcmthcm91bmRzX2luaXQoaTkxNSwg
d2FsKTsKQEAgLTEyOTcsNiArMTMzMywyMCBAQCBzdGF0aWMgdm9pZCB0Z2xfd2hpdGVsaXN0X2J1
aWxkKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIAl9CiB9CiAKK3N0YXRpYyB2b2lk
IGRnMV93aGl0ZWxpc3RfYnVpbGQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQorewor
CXN0cnVjdCBpOTE1X3dhX2xpc3QgKncgPSAmZW5naW5lLT53aGl0ZWxpc3Q7CisKKwl0Z2xfd2hp
dGVsaXN0X2J1aWxkKGVuZ2luZSk7CisKKwkvKiBHRU46QlVHOjE0MDkyODA0NDE6ZGcxICovCisJ
aWYgKElTX0RHMV9SRVZJRChlbmdpbmUtPmk5MTUsIERHMV9SRVZJRF9BMCwgREcxX1JFVklEX0Ew
KSAmJgorCSAgICAoZW5naW5lLT5jbGFzcyA9PSBSRU5ERVJfQ0xBU1MgfHwKKwkgICAgIGVuZ2lu
ZS0+Y2xhc3MgPT0gQ09QWV9FTkdJTkVfQ0xBU1MpKQorCQl3aGl0ZWxpc3RfcmVnX2V4dCh3LCBS
SU5HX0lEKGVuZ2luZS0+bW1pb19iYXNlKSwKKwkJCQkgIFJJTkdfRk9SQ0VfVE9fTk9OUFJJVl9B
Q0NFU1NfUkQpOworfQorCiB2b2lkIGludGVsX2VuZ2luZV9pbml0X3doaXRlbGlzdChzdHJ1Y3Qg
aW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUgPSBlbmdpbmUtPmk5MTU7CkBAIC0xMzA0LDcgKzEzNTQsOSBAQCB2b2lkIGludGVsX2VuZ2lu
ZV9pbml0X3doaXRlbGlzdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAKIAl3YV9p
bml0X3N0YXJ0KHcsICJ3aGl0ZWxpc3QiLCBlbmdpbmUtPm5hbWUpOwogCi0JaWYgKElTX0dFTihp
OTE1LCAxMikpCisJaWYgKElTX0RHMShpOTE1KSkKKwkJZGcxX3doaXRlbGlzdF9idWlsZChlbmdp
bmUpOworCWVsc2UgaWYgKElTX0dFTihpOTE1LCAxMikpCiAJCXRnbF93aGl0ZWxpc3RfYnVpbGQo
ZW5naW5lKTsKIAllbHNlIGlmIChJU19HRU4oaTkxNSwgMTEpKQogCQlpY2xfd2hpdGVsaXN0X2J1
aWxkKGVuZ2luZSk7CkBAIC0xMzU2LDE1ICsxNDA4LDE4IEBAIHJjc19lbmdpbmVfd2FfaW5pdChz
dHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIHN0cnVjdCBpOTE1X3dhX2xpc3QgKndhbCkK
IHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGVuZ2luZS0+aTkxNTsKIAotCWlm
IChJU19UR0xfUkVWSUQoaTkxNSwgVEdMX1JFVklEX0EwLCBUR0xfUkVWSURfQTApKSB7CisJaWYg
KElTX0RHMV9SRVZJRChpOTE1LCBERzFfUkVWSURfQTAsIERHMV9SRVZJRF9BMCkgfHwKKwkgICAg
SVNfVEdMX1JFVklEKGk5MTUsIFRHTF9SRVZJRF9BMCwgVEdMX1JFVklEX0EwKSkgewogCQkvKgot
CQkgKiBXYV8xNjA3MTM4MzM2OnRnbAotCQkgKiBXYV8xNjA3MDYzOTg4OnRnbAorCQkgKiBXYV8x
NjA3MTM4MzM2OnRnbFthMF0sZGcxW2EwXQorCQkgKiBXYV8xNjA3MDYzOTg4OnRnbFthMF0sZGcx
W2EwXQogCQkgKi8KIAkJd2Ffd3JpdGVfb3Iod2FsLAogCQkJICAgIEdFTjlfQ1RYX1BSRUVNUFRf
UkVHLAogCQkJICAgIEdFTjEyX0RJU0FCTEVfUE9TSF9CVVNZX0ZGX0RPUF9DRyk7CisJfQogCisJ
aWYgKElTX1RHTF9SRVZJRChpOTE1LCBUR0xfUkVWSURfQTAsIFRHTF9SRVZJRF9BMCkpIHsKIAkJ
LyoKIAkJICogV2FfMTYwNjY3OTEwMzp0Z2wKIAkJICogKHNlZSBhbHNvIFdhXzE2MDY2ODIxNjY6
aWNsKQpAQCAtMTM3NywzMiArMTQzMiw0MCBAQCByY3NfZW5naW5lX3dhX2luaXQoc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lLCBzdHJ1Y3QgaTkxNV93YV9saXN0ICp3YWwpCiAJCXdhX3dy
aXRlX29yKHdhbCwKIAkJCSAgICBHRU43X0ZGX1RIUkVBRF9NT0RFLAogCQkJICAgIEdFTjEyX0ZG
X1RFU1NFTEFUSU9OX0RPUF9HQVRFX0RJU0FCTEUpOworCX0KIAotCQkvKiBXYV8xNDA4NjE1MDcy
OnRnbCAqLworCWlmIChJU19ERzEoaTkxNSkgfHwgSVNfVEdMX1JFVklEKGk5MTUsIFRHTF9SRVZJ
RF9BMCwgVEdMX1JFVklEX0EwKSkgeworCQkvKiBXYV8xNDA4NjE1MDcyOnRnbFthMF0sZGcxICov
CiAJCXdhX3dyaXRlX29yKHdhbCwgVU5TTElDRV9VTklUX0xFVkVMX0NMS0dBVEUyLAogCQkJICAg
IFZTVU5JVF9DTEtHQVRFX0RJU19UR0wpOwogCX0KIAotCWlmIChJU19ST0NLRVRMQUtFKGk5MTUp
IHx8IElTX1RJR0VSTEFLRShpOTE1KSkgewotCQkvKiBXYV8xNjA2OTMxNjAxOnRnbCxya2wgKi8K
KwlpZiAoSVNfREcxKGk5MTUpIHx8IElTX1JPQ0tFVExBS0UoaTkxNSkgfHwgSVNfVElHRVJMQUtF
KGk5MTUpKSB7CisJCS8qIFdhXzE2MDY5MzE2MDE6dGdsLHJrbCxkZzEgKi8KIAkJd2FfbWFza2Vk
X2VuKHdhbCwgR0VON19ST1dfQ0hJQ0tFTjIsIEdFTjEyX0RJU0FCTEVfRUFSTFlfUkVBRCk7CisJ
fQogCi0JCS8qIFdhXzE0MDk4MDQ4MDg6dGdsLHJrbCAqLworCWlmIChJU19ERzFfUkVWSUQoaTkx
NSwgREcxX1JFVklEX0EwLCBERzFfUkVWSURfQTApIHx8CisJICAgIElTX1JPQ0tFVExBS0UoaTkx
NSkgfHwgSVNfVElHRVJMQUtFKGk5MTUpKSB7CisJCS8qIFdhXzE0MDk4MDQ4MDg6dGdsLHJrbCxk
ZzFbYTBdICovCiAJCXdhX21hc2tlZF9lbih3YWwsIEdFTjdfUk9XX0NISUNLRU4yLAogCQkJICAg
ICBHRU4xMl9QVVNIX0NPTlNUX0RFUkVGX0hPTERfRElTKTsKIAogCQkvKgogCQkgKiBXYV8xNDA5
MDg1MjI1OnRnbAotCQkgKiBXYV8xNDAxMDIyOTIwNjp0Z2wscmtsCisJCSAqIFdhXzE0MDEwMjI5
MjA2OnRnbCxya2wsZGcxW2EwXQogCQkgKi8KIAkJd2FfbWFza2VkX2VuKHdhbCwgR0VOOV9ST1df
Q0hJQ0tFTjQsIEdFTjEyX0RJU0FCTEVfVERMX1BVU0gpOwogCiAJCS8qCiAJCSAqIFdhXzE2MDcw
MzAzMTc6dGdsCiAJCSAqIFdhXzE2MDcxODY1MDA6dGdsCi0JCSAqIFdhXzE2MDcyOTc2Mjc6dGds
LHJrbCB0aGVyZSBhcmUgbXVsdGlwbGUgZW50cmllcyBmb3IgdGhpcwotCQkgKiBXQSBpbiB0aGUg
QlNwZWM7IHNvbWUgaW5kaWNhdGUgdGhpcyBpcyBhbiBBMC1vbmx5IFdBLAotCQkgKiBvdGhlcnMg
aW5kaWNhdGUgaXQgYXBwbGllcyB0byBhbGwgc3RlcHBpbmdzLgorCQkgKiBXYV8xNjA3Mjk3NjI3
OnRnbCxya2wsZGcxW2EwXQorCQkgKgorCQkgKiBPbiBUR0wgYW5kIFJLTCB0aGVyZSBhcmUgbXVs
dGlwbGUgZW50cmllcyBmb3IgdGhpcyBXQSBpbiB0aGUKKwkJICogQlNwZWM7IHNvbWUgaW5kaWNh
dGUgdGhpcyBpcyBhbiBBMC1vbmx5IFdBLCBvdGhlcnMgaW5kaWNhdGUKKwkJICogaXQgYXBwbGll
cyB0byBhbGwgc3RlcHBpbmdzIHNvIHdlIHRydXN0IHRoZSAiYWxsIHN0ZXBwaW5ncy4iCisJCSAq
IEZvciBERzEgdGhpcyBvbmx5IGFwcGxpZXMgdG8gQTAuCiAJCSAqLwogCQl3YV9tYXNrZWRfZW4o
d2FsLAogCQkJICAgICBHRU42X1JDX1NMRUVQX1BTTUlfQ09OVFJPTCwKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X3JlZy5oCmluZGV4IGRhOGFlYmFjM2ZhYy4uMDY4ZGZlNjI4NGNmIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfcmVnLmgKQEAgLTI1MjAsNiArMjUyMCw3IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBpOTE1X21t
aW9fcmVnX3ZhbGlkKGk5MTVfcmVnX3QgcmVnKQogI2RlZmluZSBSSU5HX1BTTUlfQ1RMKGJhc2Up
CV9NTUlPKChiYXNlKSArIDB4NTApCiAjZGVmaW5lIFJJTkdfTUFYX0lETEUoYmFzZSkJX01NSU8o
KGJhc2UpICsgMHg1NCkKICNkZWZpbmUgUklOR19IV1NfUEdBKGJhc2UpCV9NTUlPKChiYXNlKSAr
IDB4ODApCisjZGVmaW5lIFJJTkdfSUQoYmFzZSkJCV9NTUlPKChiYXNlKSArIDB4OGMpCiAjZGVm
aW5lIFJJTkdfSFdTX1BHQV9HRU42KGJhc2UpCV9NTUlPKChiYXNlKSArIDB4MjA4MCkKICNkZWZp
bmUgUklOR19SRVNFVF9DVEwoYmFzZSkJX01NSU8oKGJhc2UpICsgMHhkMCkKICNkZWZpbmUgICBS
RVNFVF9DVExfQ0FUX0VSUk9SCSAgIFJFR19CSVQoMikKQEAgLTQxMzEsNiArNDEzMiw3IEBAIGVu
dW0gewogCiAjZGVmaW5lIEdFTjlfQ0xLR0FURV9ESVNfMwkJX01NSU8oMHg0NjUzOCkKICNkZWZp
bmUgICBUR0xfVlJIX0dBVElOR19ESVMJCVJFR19CSVQoMzEpCisjZGVmaW5lICAgRFBUX0dBVElO
R19ESVMJCVJFR19CSVQoMjIpCiAKICNkZWZpbmUgR0VOOV9DTEtHQVRFX0RJU180CQlfTU1JTygw
eDQ2NTNDKQogI2RlZmluZSAgIEJYVF9HTUJVU19HQVRJTkdfRElTCQkoMSA8PCAxNCkKQEAgLTc5
NjAsMTIgKzc5NjIsMTQgQEAgZW51bSBoYXJkd2FyZV9lcnJvciB7CiAjZGVmaW5lIEdFTjhfTDND
TlRMUkVHCV9NTUlPKDB4NzAzNCkKICAgI2RlZmluZSBHRU44X0VSUkRFVEJDVFJMICgxIDw8IDkp
CiAKLSNkZWZpbmUgR0VOMTFfQ09NTU9OX1NMSUNFX0NISUNLRU4zCQlfTU1JTygweDczMDQpCi0g
ICNkZWZpbmUgR0VOMTFfQkxFTkRfRU1CX0ZJWF9ESVNBQkxFX0lOX1JDQwkoMSA8PCAxMSkKLSAg
I2RlZmluZSBHRU4xMl9ESVNBQkxFX0NQU19BV0FSRV9DT0xPUl9QSVBFCSgxIDw8IDkpCisjZGVm
aW5lIEdFTjExX0NPTU1PTl9TTElDRV9DSElDS0VOMwkJCV9NTUlPKDB4NzMwNCkKKyAgI2RlZmlu
ZSBERzFfRkxPQVRfUE9JTlRfQkxFTkRfT1BUX1NUUklDVF9NT0RFX0VOCVJFR19CSVQoMTIpCisg
ICNkZWZpbmUgR0VOMTFfQkxFTkRfRU1CX0ZJWF9ESVNBQkxFX0lOX1JDQwkJUkVHX0JJVCgxMSkK
KyAgI2RlZmluZSBHRU4xMl9ESVNBQkxFX0NQU19BV0FSRV9DT0xPUl9QSVBFCQlSRUdfQklUKDkp
CiAKICNkZWZpbmUgSElaX0NISUNLRU4JCQkJCV9NTUlPKDB4NzAxOCkKICMgZGVmaW5lIENIVl9I
Wl84WDhfTU9ERV9JTl8xWAkJCQkoMSA8PCAxNSkKKyMgZGVmaW5lIERHMV9IWl9SRUFEX1NVUFBS
RVNTSU9OX09QVElNSVpBVElPTl9ESVNBQkxFICAgKDEgPDwgMTQpCiAjIGRlZmluZSBCRFdfSEla
X1BPV0VSX0NPTVBJTEVSX0NMT0NLX0dBVElOR19ESVNBQkxFCSgxIDw8IDMpCiAKICNkZWZpbmUg
R0VOOV9TTElDRV9DT01NT05fRUNPX0NISUNLRU4wCQlfTU1JTygweDczMDgpCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfcG0uYwppbmRleCA0ZDg4NWVmMGJhYzUuLjA1ZTdkNDQ2MWFjYiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pbnRlbF9wbS5jCkBAIC03MTUzLDYgKzcxNTMsMTkgQEAgc3RhdGljIHZvaWQgdGdsX2luaXRf
Y2xvY2tfZ2F0aW5nKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkJCSAwLCBE
RlJfRElTQUJMRSk7CiB9CiAKK3N0YXRpYyB2b2lkIGRnMV9pbml0X2Nsb2NrX2dhdGluZyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCit7CisJLyoKKwkgKiBBcyBvcHBvc2VkIHRv
IFRHTCwgd2Ugc2hvdWxkIG5vdCB0b3VjaCB0aGUgcmVnaXN0ZXJzIGZvciAgbWVkaWEgcG93ZXIK
KwkgKiBnYXRpbmcKKwkgKi8KKworCS8qIFdhXzE0MDEwMDk2ODQ0OmRnMVthMF0gKi8KKwlpZiAo
SVNfREcxX1JFVklEKGRldl9wcml2LCBERzFfUkVWSURfQTAsIERHMV9SRVZJRF9BMCkpCisJCUk5
MTVfV1JJVEUoR0VOOV9DTEtHQVRFX0RJU18zLCBJOTE1X1JFQUQoR0VOOV9DTEtHQVRFX0RJU18z
KSB8CisJCQkgICBEUFRfR0FUSU5HX0RJUyk7Cit9CisKIHN0YXRpYyB2b2lkIGNucF9pbml0X2Ns
b2NrX2dhdGluZyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiB7CiAJaWYgKCFI
QVNfUENIX0NOUChkZXZfcHJpdikpCkBAIC03NjcwLDcgKzc2ODMsOSBAQCBzdGF0aWMgdm9pZCBu
b3BfaW5pdF9jbG9ja19nYXRpbmcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQog
ICovCiB2b2lkIGludGVsX2luaXRfY2xvY2tfZ2F0aW5nX2hvb2tzKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdikKIHsKLQlpZiAoSVNfR0VOKGRldl9wcml2LCAxMikpCisJaWYgKElT
X0RHMShkZXZfcHJpdikpCisJCWRldl9wcml2LT5kaXNwbGF5LmluaXRfY2xvY2tfZ2F0aW5nID0g
ZGcxX2luaXRfY2xvY2tfZ2F0aW5nOworCWVsc2UgaWYgKElTX0dFTihkZXZfcHJpdiwgMTIpKQog
CQlkZXZfcHJpdi0+ZGlzcGxheS5pbml0X2Nsb2NrX2dhdGluZyA9IHRnbF9pbml0X2Nsb2NrX2dh
dGluZzsKIAllbHNlIGlmIChJU19HRU4oZGV2X3ByaXYsIDExKSkKIAkJZGV2X3ByaXYtPmRpc3Bs
YXkuaW5pdF9jbG9ja19nYXRpbmcgPSBpY2xfaW5pdF9jbG9ja19nYXRpbmc7Ci0tIAoyLjI2LjIK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdm
eCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

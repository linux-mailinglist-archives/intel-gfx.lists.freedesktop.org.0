Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id F18C7C90EE
	for <lists+intel-gfx@lfdr.de>; Wed,  2 Oct 2019 20:35:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 252856E175;
	Wed,  2 Oct 2019 18:35:16 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 302CF6E175
 for <intel-gfx@lists.freedesktop.org>; Wed,  2 Oct 2019 18:35:14 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18697910-1500050 
 for multiple; Wed, 02 Oct 2019 19:35:02 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed,  2 Oct 2019 19:34:59 +0100
Message-Id: <20191002183459.26614-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191001155307.19735-1-chris@chris-wilson.co.uk>
References: <20191001155307.19735-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3] drm/i915/selftests: Exercise potential false
 lite-restore
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SWYgZXhlY2xpc3RzJ3MgbGl0ZS1yZXN0b3JlIGlzIGJhc2VkIG9uIHRoZSBjb21tb24gR0VNIGNv
bnRleHQgdGFnCnJhdGhlciB0aGFuIHRoZSBwZXItaW50ZWxfY29udGV4dCBMUkNBLCB0aGVuIGEg
Y29udGV4dCBzd2l0Y2ggYmV0d2Vlbgp0d28gaW50ZWxfY29udGV4dHMgb24gdGhlIHNhbWUgZW5n
aW5lIGRlcml2ZWQgZnJvbSB0aGUgc2FtZSBHRU0gY29udGV4dAp3aWxsIHBlcmZvcm0gYSBsaXRl
LXJlc3RvcmUgaW5zdGVhZCBvZiBhIGZ1bGwgY29udGV4dCBzd2l0Y2guIFdlIGNhbgpleHBsb2l0
IHRoaXMgYnkgcG9pc29uaW5nIHRoZSByaW5nYnVmZmVyIG9mIHRoZSBmaXJzdCBjb250ZXh0IGFu
ZCB0cnlpbmcKdG8gdHJpY2sgYSBzaW1wbGUgUklOR19UQUlMIHVwZGF0ZSAoaS5lLiBsaXRlLXJl
c3RvcmUpCgp2MjogQWxzbyBjaGVjayB3aGF0IGhhcHBlbnMgaWYgcHJlZW1wdCBjZVswXSB3aXRo
IGNlWzFdIChib3RoIGluc3RhbmNlcwpvbiB0aGUgc2FtZSBlbmdpbmUgZnJvbSB0aGUgc2FtZSBw
YXJlbnQgY29udGV4dCkgW1R2cnRrb10KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hy
aXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGlu
QGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBp
bnRlbC5jb20+Ci0tLQpBc3NlcnQgcG9zdGZpeCBhcyB0YWlsIGlzbid0IHdyaXR0ZW4gdW50aWwg
c3VibWl0LiBPb3BzLgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jICAg
IHwgIDE4ICsrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMgfCAxODAg
KysrKysrKysrKysrKysrKysrKysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCAxOTQgaW5zZXJ0aW9u
cygrKSwgNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5jCmluZGV4
IDk4NzdiNmJhMTNkZi4uNDMxZDNiOGMzMzcxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9scmMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9s
cmMuYwpAQCAtMjM1LDYgKzIzNSwxNiBAQCBzdGF0aWMgdm9pZCBleGVjbGlzdHNfaW5pdF9yZWdf
c3RhdGUodTMyICpyZWdfc3RhdGUsCiAJCQkJICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfcmluZyAq
cmluZywKIAkJCQkgICAgIGJvb2wgY2xvc2UpOwogCitzdGF0aWMgdm9pZCBfX2NvbnRleHRfcGlu
X2FjcXVpcmUoc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQoreworCW11dGV4X2FjcXVpcmUoJmNl
LT5waW5fbXV0ZXguZGVwX21hcCwgMiwgMCwgX1JFVF9JUF8pOworfQorCitzdGF0aWMgdm9pZCBf
X2NvbnRleHRfcGluX3JlbGVhc2Uoc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQoreworCW11dGV4
X3JlbGVhc2UoJmNlLT5waW5fbXV0ZXguZGVwX21hcCwgMCwgX1JFVF9JUF8pOworfQorCiBzdGF0
aWMgdm9pZCBtYXJrX2VpbyhzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycSkKIHsKIAlpZiAoIWk5MTVf
cmVxdWVzdF9zaWduYWxlZChycSkpCkBAIC0yNzYxLDcgKzI3NzEsNyBAQCBzdGF0aWMgdm9pZCBf
X2V4ZWNsaXN0c19yZXNldChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIGJvb2wgc3Rh
bGxlZCkKIAlHRU1fQlVHX09OKCFpOTE1X3ZtYV9pc19waW5uZWQoY2UtPnN0YXRlKSk7CiAKIAkv
KiBQcm9jbGFpbSB3ZSBoYXZlIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gdGhlIGNvbnRleHQgaW1hZ2Uh
ICovCi0JbXV0ZXhfYWNxdWlyZSgmY2UtPnBpbl9tdXRleC5kZXBfbWFwLCAyLCAwLCBfVEhJU19J
UF8pOworCV9fY29udGV4dF9waW5fYWNxdWlyZShjZSk7CiAKIAlycSA9IGFjdGl2ZV9yZXF1ZXN0
KHJxKTsKIAlpZiAoIXJxKSB7CkBAIC0yODI1LDcgKzI4MzUsNyBAQCBzdGF0aWMgdm9pZCBfX2V4
ZWNsaXN0c19yZXNldChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsIGJvb2wgc3RhbGxl
ZCkKIAlfX2V4ZWNsaXN0c19yZXNldF9yZWdfc3RhdGUoY2UsIGVuZ2luZSk7CiAJX19leGVjbGlz
dHNfdXBkYXRlX3JlZ19zdGF0ZShjZSwgZW5naW5lKTsKIAljZS0+bHJjX2Rlc2MgfD0gQ1RYX0RF
U0NfRk9SQ0VfUkVTVE9SRTsgLyogcGFyYW5vaWQ6IEdQVSB3YXMgcmVzZXQhICovCi0JbXV0ZXhf
cmVsZWFzZSgmY2UtPnBpbl9tdXRleC5kZXBfbWFwLCAwLCBfVEhJU19JUF8pOworCV9fY29udGV4
dF9waW5fcmVsZWFzZShjZSk7CiAKIHVud2luZDoKIAkvKiBQdXNoIGJhY2sgYW55IGluY29tcGxl
dGUgcmVxdWVzdHMgZm9yIHJlcGxheSBhZnRlciB0aGUgcmVzZXQuICovCkBAIC00NDM5LDcgKzQ0
NDksNyBAQCB2b2lkIGludGVsX2xyX2NvbnRleHRfcmVzZXQoc3RydWN0IGludGVsX2VuZ2luZV9j
cyAqZW5naW5lLAogCQkJICAgIGJvb2wgc2NydWIpCiB7CiAJR0VNX0JVR19PTighaW50ZWxfY29u
dGV4dF9pc19waW5uZWQoY2UpKTsKLQltdXRleF9hY3F1aXJlKCZjZS0+cGluX211dGV4LmRlcF9t
YXAsIDIsIDAsIF9USElTX0lQXyk7CisJX19jb250ZXh0X3Bpbl9hY3F1aXJlKGNlKTsKIAogCS8q
CiAJICogV2Ugd2FudCBhIHNpbXBsZSBjb250ZXh0ICsgcmluZyB0byBleGVjdXRlIHRoZSBicmVh
ZGNydW1iIHVwZGF0ZS4KQEAgLTQ0NjUsNyArNDQ3NSw3IEBAIHZvaWQgaW50ZWxfbHJfY29udGV4
dF9yZXNldChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUsCiAJaW50ZWxfcmluZ191cGRh
dGVfc3BhY2UoY2UtPnJpbmcpOwogCiAJX19leGVjbGlzdHNfdXBkYXRlX3JlZ19zdGF0ZShjZSwg
ZW5naW5lKTsKLQltdXRleF9yZWxlYXNlKCZjZS0+cGluX211dGV4LmRlcF9tYXAsIDAsIF9USElT
X0lQXyk7CisJX19jb250ZXh0X3Bpbl9yZWxlYXNlKGNlKTsKIH0KIAogI2lmIElTX0VOQUJMRUQo
Q09ORklHX0RSTV9JOTE1X1NFTEZURVNUKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3Qvc2VsZnRlc3RfbHJjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9s
cmMuYwppbmRleCA5M2YyZmNkYzQ5YmYuLmU3YmMyZGJiYjJhNSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3Qvc2VsZnRlc3RfbHJjLmMKQEAgLTc5LDYgKzc5LDE4NCBAQCBzdGF0aWMgaW50IGxpdmVf
c2FuaXR5Y2hlY2sodm9pZCAqYXJnKQogCXJldHVybiBlcnI7CiB9CiAKK3N0YXRpYyBpbnQgbGl2
ZV91bmxpdGVfcmVzdG9yZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgaW50IHByaW8p
Cit7CisJc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOworCXN0cnVjdCBpOTE1X2dlbV9j
b250ZXh0ICpjdHg7CisJZW51bSBpbnRlbF9lbmdpbmVfaWQgaWQ7CisJaW50ZWxfd2FrZXJlZl90
IHdha2VyZWY7CisJc3RydWN0IGlndF9zcGlubmVyIHNwaW47CisJaW50IGVyciA9IC1FTk9NRU07
CisKKwkvKgorCSAqIENoZWNrIHRoYXQgd2UgY2FuIGNvcnJlY3RseSBjb250ZXh0IHN3aXRjaCBi
ZXR3ZWVuIDIgaW5zdGFuY2VzCisJICogb24gdGhlIHNhbWUgZW5naW5lIGZyb20gdGhlIHNhbWUg
cGFyZW50IGNvbnRleHQuCisJICovCisKKwltdXRleF9sb2NrKCZpOTE1LT5kcm0uc3RydWN0X211
dGV4KTsKKwl3YWtlcmVmID0gaW50ZWxfcnVudGltZV9wbV9nZXQoJmk5MTUtPnJ1bnRpbWVfcG0p
OworCisJaWYgKGlndF9zcGlubmVyX2luaXQoJnNwaW4sICZpOTE1LT5ndCkpCisJCWdvdG8gZXJy
X3VubG9jazsKKworCWN0eCA9IGtlcm5lbF9jb250ZXh0KGk5MTUpOworCWlmICghY3R4KQorCQln
b3RvIGVycl9zcGluOworCisJZXJyID0gMDsKKwlmb3JfZWFjaF9lbmdpbmUoZW5naW5lLCBpOTE1
LCBpZCkgeworCQlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2VbMl0gPSB7fTsKKwkJc3RydWN0IGk5
MTVfcmVxdWVzdCAqcnFbMl07CisJCXN0cnVjdCBpZ3RfbGl2ZV90ZXN0IHQ7CisJCWludCBuOwor
CisJCWlmIChwcmlvICYmICFpbnRlbF9lbmdpbmVfaGFzX3ByZWVtcHRpb24oZW5naW5lKSkKKwkJ
CWNvbnRpbnVlOworCisJCWlmICghaW50ZWxfZW5naW5lX2Nhbl9zdG9yZV9kd29yZChlbmdpbmUp
KQorCQkJY29udGludWU7CisKKwkJaWYgKGlndF9saXZlX3Rlc3RfYmVnaW4oJnQsIGk5MTUsIF9f
ZnVuY19fLCBlbmdpbmUtPm5hbWUpKSB7CisJCQllcnIgPSAtRUlPOworCQkJYnJlYWs7CisJCX0K
KworCQlmb3IgKG4gPSAwOyBuIDwgQVJSQVlfU0laRShjZSk7IG4rKykgeworCQkJc3RydWN0IGlu
dGVsX2NvbnRleHQgKnRtcDsKKworCQkJdG1wID0gaW50ZWxfY29udGV4dF9jcmVhdGUoY3R4LCBl
bmdpbmUpOworCQkJaWYgKElTX0VSUih0bXApKSB7CisJCQkJZXJyID0gUFRSX0VSUih0bXApOwor
CQkJCWdvdG8gZXJyX2NlOworCQkJfQorCisJCQllcnIgPSBpbnRlbF9jb250ZXh0X3Bpbih0bXAp
OworCQkJaWYgKGVycikgeworCQkJCWludGVsX2NvbnRleHRfcHV0KHRtcCk7CisJCQkJZ290byBl
cnJfY2U7CisJCQl9CisKKwkJCS8qCisJCQkgKiBTZXR1cCB0aGUgcGFpciBvZiBjb250ZXh0cyBz
dWNoIHRoYXQgaWYgd2UKKwkJCSAqIGxpdGUtcmVzdG9yZSB1c2luZyB0aGUgUklOR19UQUlMIGZy
b20gY2VbMV0gaXQKKwkJCSAqIHdpbGwgZXhlY3V0ZSBnYXJiYWdlIGZyb20gY2VbMF0tPnJpbmcu
CisJCQkgKi8KKwkJCW1lbXNldCh0bXAtPnJpbmctPnZhZGRyLAorCQkJICAgICAgIFBPSVNPTl9J
TlVTRSwgLyogSVBFSFI6IDB4NWE1YTVhNWEgW2h1bmchXSAqLworCQkJICAgICAgIHRtcC0+cmlu
Zy0+dm1hLT5zaXplKTsKKworCQkJY2Vbbl0gPSB0bXA7CisJCX0KKwkJR0VNX0JVR19PTighY2Vb
MV0tPnJpbmctPnNpemUpOworCQlpbnRlbF9yaW5nX3Jlc2V0KGNlWzFdLT5yaW5nLCBjZVsxXS0+
cmluZy0+c2l6ZSAvIDIpOworCisJCWxvY2FsX2JoX2Rpc2FibGUoKTsgLyogYXBwZWFzZSBsb2Nr
ZGVwICovCisJCV9fY29udGV4dF9waW5fYWNxdWlyZShjZVsxXSk7CisJCV9fZXhlY2xpc3RzX3Vw
ZGF0ZV9yZWdfc3RhdGUoY2VbMV0sIGVuZ2luZSk7CisJCV9fY29udGV4dF9waW5fcmVsZWFzZShj
ZVsxXSk7CisJCWxvY2FsX2JoX2VuYWJsZSgpOworCisJCXJxWzBdID0gaWd0X3NwaW5uZXJfY3Jl
YXRlX3JlcXVlc3QoJnNwaW4sIGNlWzBdLCBNSV9BUkJfQ0hFQ0spOworCQlpZiAoSVNfRVJSKHJx
WzBdKSkgeworCQkJZXJyID0gUFRSX0VSUihycVswXSk7CisJCQlnb3RvIGVycl9jZTsKKwkJfQor
CisJCWk5MTVfcmVxdWVzdF9nZXQocnFbMF0pOworCQlpOTE1X3JlcXVlc3RfYWRkKHJxWzBdKTsK
KwkJR0VNX0JVR19PTihycVswXS0+cG9zdGZpeCA+IGNlWzFdLT5yaW5nLT5lbWl0KTsKKworCQlp
ZiAoIWlndF93YWl0X2Zvcl9zcGlubmVyKCZzcGluLCBycVswXSkpIHsKKwkJCWk5MTVfcmVxdWVz
dF9wdXQocnFbMF0pOworCQkJZ290byBlcnJfY2U7CisJCX0KKworCQlycVsxXSA9IGk5MTVfcmVx
dWVzdF9jcmVhdGUoY2VbMV0pOworCQlpZiAoSVNfRVJSKHJxWzFdKSkgeworCQkJZXJyID0gUFRS
X0VSUihycVsxXSk7CisJCQlpOTE1X3JlcXVlc3RfcHV0KHJxWzBdKTsKKwkJCWdvdG8gZXJyX2Nl
OworCQl9CisKKwkJaWYgKCFwcmlvKSB7CisJCQkvKgorCQkJICogRW5zdXJlIHdlIGRvIHRoZSBz
d2l0Y2ggdG8gY2VbMV0gb24gY29tcGxldGlvbi4KKwkJCSAqCisJCQkgKiBycVswXSBpcyBhbHJl
YWR5IHN1Ym1pdHRlZCwgc28gdGhpcyBzaG91bGQgcmVkdWNlCisJCQkgKiB0byBhIG5vLW9wIChh
IHdhaXQgb24gYSByZXF1ZXN0IG9uIHRoZSBzYW1lIGVuZ2luZQorCQkJICogdXNlcyB0aGUgc3Vi
bWl0IGZlbmNlLCBub3QgdGhlIGNvbXBsZXRpb24gZmVuY2UpLAorCQkJICogYnV0IGl0IHdpbGwg
aW5zdGFsbCBhIGRlcGVuZGVuY3kgb24gcnFbMV0gZm9yIHJxWzBdCisJCQkgKiB0aGF0IHdpbGwg
cHJldmVudCB0aGUgcGFpciBiZWluZyByZW9yZGVyZWQgYnkKKwkJCSAqIHRpbWVzbGljaW5nLgor
CQkJICovCisJCQlpOTE1X3JlcXVlc3RfYXdhaXRfZG1hX2ZlbmNlKHJxWzFdLCAmcnFbMF0tPmZl
bmNlKTsKKwkJfQorCisJCWk5MTVfcmVxdWVzdF9nZXQocnFbMV0pOworCQlpOTE1X3JlcXVlc3Rf
YWRkKHJxWzFdKTsKKwkJR0VNX0JVR19PTihycVsxXS0+cG9zdGZpeCA8PSBycVswXS0+cG9zdGZp
eCk7CisJCWk5MTVfcmVxdWVzdF9wdXQocnFbMF0pOworCisJCWlmIChwcmlvKSB7CisJCQlzdHJ1
Y3QgaTkxNV9zY2hlZF9hdHRyIGF0dHIgPSB7CisJCQkJLnByaW9yaXR5ID0gcHJpbywKKwkJCX07
CisKKwkJCS8qIEFsdGVybmF0aXZlbHkgcHJlZW1wdCB0aGUgc3Bpbm5lciB3aXRoIGNlWzFdICov
CisJCQllbmdpbmUtPnNjaGVkdWxlKHJxWzFdLCAmYXR0cik7CisJCX0KKworCQkvKiBBbmQgc3dp
dGNoIGJhY2sgdG8gY2VbMF0gZm9yIGdvb2QgbWVhc3VyZSAqLworCQlycVswXSA9IGk5MTVfcmVx
dWVzdF9jcmVhdGUoY2VbMF0pOworCQlpZiAoSVNfRVJSKHJxWzBdKSkgeworCQkJZXJyID0gUFRS
X0VSUihycVswXSk7CisJCQlpOTE1X3JlcXVlc3RfcHV0KHJxWzFdKTsKKwkJCWdvdG8gZXJyX2Nl
OworCQl9CisKKwkJaTkxNV9yZXF1ZXN0X2F3YWl0X2RtYV9mZW5jZShycVswXSwgJnJxWzFdLT5m
ZW5jZSk7CisJCWk5MTVfcmVxdWVzdF9nZXQocnFbMF0pOworCQlpOTE1X3JlcXVlc3RfYWRkKHJx
WzBdKTsKKwkJR0VNX0JVR19PTihycVswXS0+cG9zdGZpeCA+IHJxWzFdLT5wb3N0Zml4KTsKKwkJ
aTkxNV9yZXF1ZXN0X3B1dChycVsxXSk7CisJCWk5MTVfcmVxdWVzdF9wdXQocnFbMF0pOworCitl
cnJfY2U6CisJCXRhc2tsZXRfa2lsbCgmZW5naW5lLT5leGVjbGlzdHMudGFza2xldCk7IC8qIGZs
dXNoIHN1Ym1pc3Npb24gKi8KKwkJaWd0X3NwaW5uZXJfZW5kKCZzcGluKTsKKwkJZm9yIChuID0g
MDsgbiA8IEFSUkFZX1NJWkUoY2UpOyBuKyspIHsKKwkJCWlmIChJU19FUlJfT1JfTlVMTChjZVtu
XSkpCisJCQkJYnJlYWs7CisKKwkJCWludGVsX2NvbnRleHRfdW5waW4oY2Vbbl0pOworCQkJaW50
ZWxfY29udGV4dF9wdXQoY2Vbbl0pOworCQl9CisKKwkJaWYgKGlndF9saXZlX3Rlc3RfZW5kKCZ0
KSkKKwkJCWVyciA9IC1FSU87CisJCWlmIChlcnIpCisJCQlicmVhazsKKwl9CisKKwlrZXJuZWxf
Y29udGV4dF9jbG9zZShjdHgpOworZXJyX3NwaW46CisJaWd0X3NwaW5uZXJfZmluaSgmc3Bpbik7
CitlcnJfdW5sb2NrOgorCWludGVsX3J1bnRpbWVfcG1fcHV0KCZpOTE1LT5ydW50aW1lX3BtLCB3
YWtlcmVmKTsKKwltdXRleF91bmxvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOworCXJldHVy
biBlcnI7Cit9CisKK3N0YXRpYyBpbnQgbGl2ZV91bmxpdGVfc3dpdGNoKHZvaWQgKmFyZykKK3sK
KwlyZXR1cm4gbGl2ZV91bmxpdGVfcmVzdG9yZShhcmcsIDApOworfQorCitzdGF0aWMgaW50IGxp
dmVfdW5saXRlX3ByZWVtcHQodm9pZCAqYXJnKQoreworCXJldHVybiBsaXZlX3VubGl0ZV9yZXN0
b3JlKGFyZywgSTkxNV9VU0VSX1BSSU9SSVRZKEk5MTVfUFJJT1JJVFlfTUFYKSk7Cit9CisKIHN0
YXRpYyBpbnQKIGVtaXRfc2VtYXBob3JlX2NoYWluKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxLCBz
dHJ1Y3QgaTkxNV92bWEgKnZtYSwgaW50IGlkeCkKIHsKQEAgLTIxNzgsNiArMjM1Niw4IEBAIGlu
dCBpbnRlbF9leGVjbGlzdHNfbGl2ZV9zZWxmdGVzdHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUpCiB7CiAJc3RhdGljIGNvbnN0IHN0cnVjdCBpOTE1X3N1YnRlc3QgdGVzdHNbXSA9IHsK
IAkJU1VCVEVTVChsaXZlX3Nhbml0eWNoZWNrKSwKKwkJU1VCVEVTVChsaXZlX3VubGl0ZV9zd2l0
Y2gpLAorCQlTVUJURVNUKGxpdmVfdW5saXRlX3ByZWVtcHQpLAogCQlTVUJURVNUKGxpdmVfdGlt
ZXNsaWNlX3ByZWVtcHQpLAogCQlTVUJURVNUKGxpdmVfYnVzeXdhaXRfcHJlZW1wdCksCiAJCVNV
QlRFU1QobGl2ZV9wcmVlbXB0KSwKLS0gCjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vaW50ZWwtZ2Z4

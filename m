Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3E95DC4256
	for <lists+intel-gfx@lfdr.de>; Tue,  1 Oct 2019 23:10:34 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 46AD66E560;
	Tue,  1 Oct 2019 21:10:32 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 867746E560
 for <intel-gfx@lists.freedesktop.org>; Tue,  1 Oct 2019 21:10:30 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18685766-1500050 
 for multiple; Tue, 01 Oct 2019 22:10:14 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Tue,  1 Oct 2019 22:10:05 +0100
Message-Id: <20191001211005.32643-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191001155307.19735-1-chris@chris-wilson.co.uk>
References: <20191001155307.19735-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH v3] drm/i915/selftests: Exercise potential false
 lite-restore
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SWYgZXhlY2xpc3RzJ3MgbGl0ZS1yZXN0b3JlIGlzIGJhc2VkIG9uIHRoZSBjb21tb24gR0VNIGNv
bnRleHQgdGFnCnJhdGhlciB0aGFuIHRoZSBwZXItaW50ZWxfY29udGV4dCBMUkNBLCB0aGVuIGEg
Y29udGV4dCBzd2l0Y2ggYmV0d2Vlbgp0d28gaW50ZWxfY29udGV4dHMgb24gdGhlIHNhbWUgZW5n
aW5lIGRlcml2ZWQgZnJvbSB0aGUgc2FtZSBHRU0gY29udGV4dAp3aWxsIHBlcmZvcm0gYSBsaXRl
LXJlc3RvcmUgaW5zdGVhZCBvZiBhIGZ1bGwgY29udGV4dCBzd2l0Y2guIFdlIGNhbgpleHBsb2l0
IHRoaXMgYnkgcG9pc29uaW5nIHRoZSByaW5nYnVmZmVyIG9mIHRoZSBmaXJzdCBjb250ZXh0IGFu
ZCB0cnlpbmcKdG8gdHJpY2sgYSBzaW1wbGUgUklOR19UQUlMIHVwZGF0ZSAoaS5lLiBsaXRlLXJl
c3RvcmUpCgp2MjogQWxzbyBjaGVjayB3aGF0IGhhcHBlbnMgaWYgcHJlZW1wdCBjZVswXSB3aXRo
IGNlWzFdIChib3RoIGluc3RhbmNlcwpvbiB0aGUgc2FtZSBlbmdpbmUgZnJvbSB0aGUgc2FtZSBw
YXJlbnQgY29udGV4dCkgW1R2cnRrb10KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hy
aXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGlu
QGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBp
bnRlbC5jb20+Ci0tLQpNYXJrIHVwIHRoZSBjb250ZXh0IGltYWdlIGFkanVzdG1lbnQgdG8gYXBw
ZWFzZSBsb2NrZGVwCi0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMgICAg
fCAgMTggKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYyB8IDE3NiAr
KysrKysrKysrKysrKysrKysrKysrKysrCiAyIGZpbGVzIGNoYW5nZWQsIDE5MCBpbnNlcnRpb25z
KCspLCA0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2xyYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKaW5kZXgg
OTg3N2I2YmExM2RmLi4yY2VmMDZiZTM4ODIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2xyYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xy
Yy5jCkBAIC0yMzUsNiArMjM1LDE2IEBAIHN0YXRpYyB2b2lkIGV4ZWNsaXN0c19pbml0X3JlZ19z
dGF0ZSh1MzIgKnJlZ19zdGF0ZSwKIAkJCQkgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9yaW5nICpy
aW5nLAogCQkJCSAgICAgYm9vbCBjbG9zZSk7CiAKK3N0YXRpYyB2b2lkIF9fY29udGV4dF9waW5f
YWNxdWlyZShzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UpCit7CisgICAgICAgbXV0ZXhfYWNxdWly
ZSgmY2UtPnBpbl9tdXRleC5kZXBfbWFwLCAyLCAwLCBfUkVUX0lQXyk7Cit9CisKK3N0YXRpYyB2
b2lkIF9fY29udGV4dF9waW5fcmVsZWFzZShzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UpCit7Cisg
ICAgICAgbXV0ZXhfcmVsZWFzZSgmY2UtPnBpbl9tdXRleC5kZXBfbWFwLCAwLCBfUkVUX0lQXyk7
Cit9CisKIHN0YXRpYyB2b2lkIG1hcmtfZWlvKHN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxKQogewog
CWlmICghaTkxNV9yZXF1ZXN0X3NpZ25hbGVkKHJxKSkKQEAgLTI3NjEsNyArMjc3MSw3IEBAIHN0
YXRpYyB2b2lkIF9fZXhlY2xpc3RzX3Jlc2V0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2lu
ZSwgYm9vbCBzdGFsbGVkKQogCUdFTV9CVUdfT04oIWk5MTVfdm1hX2lzX3Bpbm5lZChjZS0+c3Rh
dGUpKTsKIAogCS8qIFByb2NsYWltIHdlIGhhdmUgZXhjbHVzaXZlIGFjY2VzcyB0byB0aGUgY29u
dGV4dCBpbWFnZSEgKi8KLQltdXRleF9hY3F1aXJlKCZjZS0+cGluX211dGV4LmRlcF9tYXAsIDIs
IDAsIF9USElTX0lQXyk7CisJX19jb250ZXh0X3Bpbl9hY3F1aXJlKGNlKTsKIAogCXJxID0gYWN0
aXZlX3JlcXVlc3QocnEpOwogCWlmICghcnEpIHsKQEAgLTI4MjUsNyArMjgzNSw3IEBAIHN0YXRp
YyB2b2lkIF9fZXhlY2xpc3RzX3Jlc2V0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwg
Ym9vbCBzdGFsbGVkKQogCV9fZXhlY2xpc3RzX3Jlc2V0X3JlZ19zdGF0ZShjZSwgZW5naW5lKTsK
IAlfX2V4ZWNsaXN0c191cGRhdGVfcmVnX3N0YXRlKGNlLCBlbmdpbmUpOwogCWNlLT5scmNfZGVz
YyB8PSBDVFhfREVTQ19GT1JDRV9SRVNUT1JFOyAvKiBwYXJhbm9pZDogR1BVIHdhcyByZXNldCEg
Ki8KLQltdXRleF9yZWxlYXNlKCZjZS0+cGluX211dGV4LmRlcF9tYXAsIDAsIF9USElTX0lQXyk7
CisJX19jb250ZXh0X3Bpbl9yZWxlYXNlKGNlKTsKIAogdW53aW5kOgogCS8qIFB1c2ggYmFjayBh
bnkgaW5jb21wbGV0ZSByZXF1ZXN0cyBmb3IgcmVwbGF5IGFmdGVyIHRoZSByZXNldC4gKi8KQEAg
LTQ0MzksNyArNDQ0OSw3IEBAIHZvaWQgaW50ZWxfbHJfY29udGV4dF9yZXNldChzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzICplbmdpbmUsCiAJCQkgICAgYm9vbCBzY3J1YikKIHsKIAlHRU1fQlVHX09O
KCFpbnRlbF9jb250ZXh0X2lzX3Bpbm5lZChjZSkpOwotCW11dGV4X2FjcXVpcmUoJmNlLT5waW5f
bXV0ZXguZGVwX21hcCwgMiwgMCwgX1RISVNfSVBfKTsKKwlfX2NvbnRleHRfcGluX2FjcXVpcmUo
Y2UpOwogCiAJLyoKIAkgKiBXZSB3YW50IGEgc2ltcGxlIGNvbnRleHQgKyByaW5nIHRvIGV4ZWN1
dGUgdGhlIGJyZWFkY3J1bWIgdXBkYXRlLgpAQCAtNDQ2NSw3ICs0NDc1LDcgQEAgdm9pZCBpbnRl
bF9scl9jb250ZXh0X3Jlc2V0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKIAlpbnRl
bF9yaW5nX3VwZGF0ZV9zcGFjZShjZS0+cmluZyk7CiAKIAlfX2V4ZWNsaXN0c191cGRhdGVfcmVn
X3N0YXRlKGNlLCBlbmdpbmUpOwotCW11dGV4X3JlbGVhc2UoJmNlLT5waW5fbXV0ZXguZGVwX21h
cCwgMCwgX1RISVNfSVBfKTsKKwlfX2NvbnRleHRfcGluX3JlbGVhc2UoY2UpOwogfQogCiAjaWYg
SVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VMRlRFU1QpCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L3NlbGZ0ZXN0X2xyYy5jCmluZGV4IDkzZjJmY2RjNDliZi4uNTkzNmY0NmVlYjA4IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYwpAQCAtNzksNiArNzksMTgwIEBAIHN0YXRp
YyBpbnQgbGl2ZV9zYW5pdHljaGVjayh2b2lkICphcmcpCiAJcmV0dXJuIGVycjsKIH0KIAorc3Rh
dGljIGludCBsaXZlX3VubGl0ZV9yZXN0b3JlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1
LCBpbnQgcHJpbykKK3sKKwlzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmU7CisJc3RydWN0
IGk5MTVfZ2VtX2NvbnRleHQgKmN0eDsKKwllbnVtIGludGVsX2VuZ2luZV9pZCBpZDsKKwlpbnRl
bF93YWtlcmVmX3Qgd2FrZXJlZjsKKwlzdHJ1Y3QgaWd0X3NwaW5uZXIgc3BpbjsKKwlpbnQgZXJy
ID0gLUVOT01FTTsKKworCS8qCisJICogQ2hlY2sgdGhhdCB3ZSBjYW4gY29ycmVjdGx5IGNvbnRl
eHQgc3dpdGNoIGJldHdlZW4gMiBpbnN0YW5jZXMKKwkgKiBvbiB0aGUgc2FtZSBlbmdpbmUgZnJv
bSB0aGUgc2FtZSBwYXJlbnQgY29udGV4dC4KKwkgKi8KKworCW11dGV4X2xvY2soJmk5MTUtPmRy
bS5zdHJ1Y3RfbXV0ZXgpOworCXdha2VyZWYgPSBpbnRlbF9ydW50aW1lX3BtX2dldCgmaTkxNS0+
cnVudGltZV9wbSk7CisKKwlpZiAoaWd0X3NwaW5uZXJfaW5pdCgmc3BpbiwgJmk5MTUtPmd0KSkK
KwkJZ290byBlcnJfdW5sb2NrOworCisJY3R4ID0ga2VybmVsX2NvbnRleHQoaTkxNSk7CisJaWYg
KCFjdHgpCisJCWdvdG8gZXJyX3NwaW47CisKKwllcnIgPSAwOworCWZvcl9lYWNoX2VuZ2luZShl
bmdpbmUsIGk5MTUsIGlkKSB7CisJCXN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZVsyXSA9IHt9Owor
CQlzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycVsyXTsKKwkJc3RydWN0IGlndF9saXZlX3Rlc3QgdDsK
KwkJaW50IG47CisKKwkJaWYgKHByaW8gJiYgIWludGVsX2VuZ2luZV9oYXNfcHJlZW1wdGlvbihl
bmdpbmUpKQorCQkJY29udGludWU7CisKKwkJaWYgKCFpbnRlbF9lbmdpbmVfY2FuX3N0b3JlX2R3
b3JkKGVuZ2luZSkpCisJCQljb250aW51ZTsKKworCQlpZiAoaWd0X2xpdmVfdGVzdF9iZWdpbigm
dCwgaTkxNSwgX19mdW5jX18sIGVuZ2luZS0+bmFtZSkpIHsKKwkJCWVyciA9IC1FSU87CisJCQli
cmVhazsKKwkJfQorCisJCWZvciAobiA9IDA7IG4gPCBBUlJBWV9TSVpFKGNlKTsgbisrKSB7CisJ
CQlzdHJ1Y3QgaW50ZWxfY29udGV4dCAqdG1wOworCisJCQl0bXAgPSBpbnRlbF9jb250ZXh0X2Ny
ZWF0ZShjdHgsIGVuZ2luZSk7CisJCQlpZiAoSVNfRVJSKHRtcCkpIHsKKwkJCQllcnIgPSBQVFJf
RVJSKHRtcCk7CisJCQkJZ290byBlcnJfY2U7CisJCQl9CisKKwkJCWVyciA9IGludGVsX2NvbnRl
eHRfcGluKHRtcCk7CisJCQlpZiAoZXJyKSB7CisJCQkJaW50ZWxfY29udGV4dF9wdXQodG1wKTsK
KwkJCQlnb3RvIGVycl9jZTsKKwkJCX0KKworCQkJLyoKKwkJCSAqIFNldHVwIHRoZSBwYWlyIG9m
IGNvbnRleHRzIHN1Y2ggdGhhdCBpZiB3ZQorCQkJICogbGl0ZS1yZXN0b3JlIHVzaW5nIHRoZSBS
SU5HX1RBSUwgZnJvbSBjZVsxXSBpdAorCQkJICogd2lsbCBleGVjdXRlIGdhcmJhZ2UgZnJvbSBj
ZVswXS0+cmluZy4KKwkJCSAqLworCQkJbWVtc2V0KHRtcC0+cmluZy0+dmFkZHIsCisJCQkgICAg
ICAgUE9JU09OX0lOVVNFLCAvKiBJUEVIUjogMHg1YTVhNWE1YSBbaHVuZyFdICovCisJCQkgICAg
ICAgdG1wLT5yaW5nLT52bWEtPnNpemUpOworCisJCQljZVtuXSA9IHRtcDsKKwkJfQorCQlHRU1f
QlVHX09OKCFjZVsxXS0+cmluZy0+c2l6ZSk7CisJCWludGVsX3JpbmdfcmVzZXQoY2VbMV0tPnJp
bmcsIGNlWzFdLT5yaW5nLT5zaXplIC8gMik7CisKKwkJX19jb250ZXh0X3Bpbl9hY3F1aXJlKGNl
WzFdKTsKKwkJX19leGVjbGlzdHNfdXBkYXRlX3JlZ19zdGF0ZShjZVsxXSwgZW5naW5lKTsKKwkJ
X19jb250ZXh0X3Bpbl9yZWxlYXNlKGNlWzFdKTsKKworCQlycVswXSA9IGlndF9zcGlubmVyX2Ny
ZWF0ZV9yZXF1ZXN0KCZzcGluLCBjZVswXSwgTUlfQVJCX0NIRUNLKTsKKwkJaWYgKElTX0VSUihy
cVswXSkpIHsKKwkJCWVyciA9IFBUUl9FUlIocnFbMF0pOworCQkJZ290byBlcnJfY2U7CisJCX0K
KworCQlpOTE1X3JlcXVlc3RfZ2V0KHJxWzBdKTsKKwkJaTkxNV9yZXF1ZXN0X2FkZChycVswXSk7
CisJCUdFTV9CVUdfT04ocnFbMF0tPnRhaWwgPiBjZVsxXS0+cmluZy0+ZW1pdCk7CisKKwkJaWYg
KCFpZ3Rfd2FpdF9mb3Jfc3Bpbm5lcigmc3BpbiwgcnFbMF0pKSB7CisJCQlpOTE1X3JlcXVlc3Rf
cHV0KHJxWzBdKTsKKwkJCWdvdG8gZXJyX2NlOworCQl9CisKKwkJcnFbMV0gPSBpOTE1X3JlcXVl
c3RfY3JlYXRlKGNlWzFdKTsKKwkJaWYgKElTX0VSUihycVsxXSkpIHsKKwkJCWVyciA9IFBUUl9F
UlIocnFbMV0pOworCQkJaTkxNV9yZXF1ZXN0X3B1dChycVswXSk7CisJCQlnb3RvIGVycl9jZTsK
KwkJfQorCisJCWlmICghcHJpbykgeworCQkJLyoKKwkJCSAqIEVuc3VyZSB3ZSBkbyB0aGUgc3dp
dGNoIHRvIGNlWzFdIG9uIGNvbXBsZXRpb24uCisJCQkgKgorCQkJICogcnFbMF0gaXMgYWxyZWFk
eSBzdWJtaXR0ZWQsIHNvIHRoaXMgc2hvdWxkIHJlZHVjZQorCQkJICogdG8gYSBuby1vcCAoYSB3
YWl0IG9uIGEgcmVxdWVzdCBvbiB0aGUgc2FtZSBlbmdpbmUKKwkJCSAqIHVzZXMgdGhlIHN1Ym1p
dCBmZW5jZSwgbm90IHRoZSBjb21wbGV0aW9uIGZlbmNlKSwKKwkJCSAqIGJ1dCBpdCB3aWxsIGlu
c3RhbGwgYSBkZXBlbmRlbmN5IG9uIHJxWzFdIGZvciBycVswXQorCQkJICogdGhhdCB3aWxsIHBy
ZXZlbnQgdGhlIHBhaXIgYmVpbmcgcmVvcmRlcmVkIGJ5CisJCQkgKiB0aW1lc2xpY2luZy4KKwkJ
CSAqLworCQkJaTkxNV9yZXF1ZXN0X2F3YWl0X2RtYV9mZW5jZShycVsxXSwgJnJxWzBdLT5mZW5j
ZSk7CisJCX0KKworCQlpOTE1X3JlcXVlc3RfZ2V0KHJxWzFdKTsKKwkJaTkxNV9yZXF1ZXN0X2Fk
ZChycVsxXSk7CisJCUdFTV9CVUdfT04ocnFbMV0tPnRhaWwgPD0gcnFbMF0tPnRhaWwpOworCQlp
OTE1X3JlcXVlc3RfcHV0KHJxWzBdKTsKKworCQlpZiAocHJpbykgeworCQkJc3RydWN0IGk5MTVf
c2NoZWRfYXR0ciBhdHRyID0geworCQkJCS5wcmlvcml0eSA9IHByaW8sCisJCQl9OworCisJCQkv
KiBBbHRlcm5hdGl2ZWx5IHByZWVtcHQgdGhlIHNwaW5uZXIgd2l0aCBjZVsxXSAqLworCQkJZW5n
aW5lLT5zY2hlZHVsZShycVsxXSwgJmF0dHIpOworCQl9CisKKwkJLyogQW5kIHN3aXRjaCBiYWNr
IHRvIGNlWzBdIGZvciBnb29kIG1lYXN1cmUgKi8KKwkJcnFbMF0gPSBpOTE1X3JlcXVlc3RfY3Jl
YXRlKGNlWzBdKTsKKwkJaWYgKElTX0VSUihycVswXSkpIHsKKwkJCWVyciA9IFBUUl9FUlIocnFb
MF0pOworCQkJaTkxNV9yZXF1ZXN0X3B1dChycVsxXSk7CisJCQlnb3RvIGVycl9jZTsKKwkJfQor
CisJCWk5MTVfcmVxdWVzdF9hd2FpdF9kbWFfZmVuY2UocnFbMF0sICZycVsxXS0+ZmVuY2UpOwor
CQlpOTE1X3JlcXVlc3RfYWRkKHJxWzBdKTsKKwkJR0VNX0JVR19PTihycVswXS0+dGFpbCA+IHJx
WzFdLT50YWlsKTsKKwkJaTkxNV9yZXF1ZXN0X3B1dChycVsxXSk7CisKK2Vycl9jZToKKwkJdGFz
a2xldF9raWxsKCZlbmdpbmUtPmV4ZWNsaXN0cy50YXNrbGV0KTsgLyogZmx1c2ggc3VibWlzc2lv
biAqLworCQlpZ3Rfc3Bpbm5lcl9lbmQoJnNwaW4pOworCQlmb3IgKG4gPSAwOyBuIDwgQVJSQVlf
U0laRShjZSk7IG4rKykgeworCQkJaWYgKElTX0VSUl9PUl9OVUxMKGNlW25dKSkKKwkJCQlicmVh
azsKKworCQkJaW50ZWxfY29udGV4dF91bnBpbihjZVtuXSk7CisJCQlpbnRlbF9jb250ZXh0X3B1
dChjZVtuXSk7CisJCX0KKworCQlpZiAoaWd0X2xpdmVfdGVzdF9lbmQoJnQpKQorCQkJZXJyID0g
LUVJTzsKKwkJaWYgKGVycikKKwkJCWJyZWFrOworCX0KKworCWtlcm5lbF9jb250ZXh0X2Nsb3Nl
KGN0eCk7CitlcnJfc3BpbjoKKwlpZ3Rfc3Bpbm5lcl9maW5pKCZzcGluKTsKK2Vycl91bmxvY2s6
CisJaW50ZWxfcnVudGltZV9wbV9wdXQoJmk5MTUtPnJ1bnRpbWVfcG0sIHdha2VyZWYpOworCW11
dGV4X3VubG9jaygmaTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7CisJcmV0dXJuIGVycjsKK30KKwor
c3RhdGljIGludCBsaXZlX3VubGl0ZV9zd2l0Y2godm9pZCAqYXJnKQoreworCXJldHVybiBsaXZl
X3VubGl0ZV9yZXN0b3JlKGFyZywgMCk7Cit9CisKK3N0YXRpYyBpbnQgbGl2ZV91bmxpdGVfcHJl
ZW1wdCh2b2lkICphcmcpCit7CisJcmV0dXJuIGxpdmVfdW5saXRlX3Jlc3RvcmUoYXJnLCBJOTE1
X1VTRVJfUFJJT1JJVFkoSTkxNV9QUklPUklUWV9NQVgpKTsKK30KKwogc3RhdGljIGludAogZW1p
dF9zZW1hcGhvcmVfY2hhaW4oc3RydWN0IGk5MTVfcmVxdWVzdCAqcnEsIHN0cnVjdCBpOTE1X3Zt
YSAqdm1hLCBpbnQgaWR4KQogewpAQCAtMjE3OCw2ICsyMzUyLDggQEAgaW50IGludGVsX2V4ZWNs
aXN0c19saXZlX3NlbGZ0ZXN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsKIAlz
dGF0aWMgY29uc3Qgc3RydWN0IGk5MTVfc3VidGVzdCB0ZXN0c1tdID0gewogCQlTVUJURVNUKGxp
dmVfc2FuaXR5Y2hlY2spLAorCQlTVUJURVNUKGxpdmVfdW5saXRlX3N3aXRjaCksCisJCVNVQlRF
U1QobGl2ZV91bmxpdGVfcHJlZW1wdCksCiAJCVNVQlRFU1QobGl2ZV90aW1lc2xpY2VfcHJlZW1w
dCksCiAJCVNVQlRFU1QobGl2ZV9idXN5d2FpdF9wcmVlbXB0KSwKIAkJU1VCVEVTVChsaXZlX3By
ZWVtcHQpLAotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9p
bnRlbC1nZng=

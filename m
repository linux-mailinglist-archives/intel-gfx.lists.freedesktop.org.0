Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9DA4B2DDE57
	for <lists+intel-gfx@lfdr.de>; Fri, 18 Dec 2020 07:04:43 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BD4DA89AA2;
	Fri, 18 Dec 2020 06:04:38 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from us-smtp-delivery-44.mimecast.com
 (us-smtp-delivery-44.mimecast.com [207.211.30.44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5638789A61
 for <intel-gfx@lists.freedesktop.org>; Fri, 18 Dec 2020 06:04:29 +0000 (UTC)
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-227-bb9EMtqnNyu2Q5qqx1Vszg-1; Fri, 18 Dec 2020 01:04:26 -0500
X-MC-Unique: bb9EMtqnNyu2Q5qqx1Vszg-1
Received: from smtp.corp.redhat.com (int-mx02.intmail.prod.int.phx2.redhat.com
 [10.5.11.12])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 138D8180E461
 for <intel-gfx@lists.freedesktop.org>; Fri, 18 Dec 2020 06:04:25 +0000 (UTC)
Received: from dreadlord-bne-redhat-com.bne.redhat.com (unknown [10.64.32.209])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 4D4C060BE5
 for <intel-gfx@lists.freedesktop.org>; Fri, 18 Dec 2020 06:04:24 +0000 (UTC)
From: Dave Airlie <airlied@gmail.com>
To: intel-gfx@lists.freedesktop.org
Date: Fri, 18 Dec 2020 16:04:08 +1000
Message-Id: <20201218060420.3203-2-airlied@gmail.com>
In-Reply-To: <20201218060420.3203-1-airlied@gmail.com>
References: <20201218060420.3203-1-airlied@gmail.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.12
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: gmail.com
Subject: [Intel-gfx] [PATCH 01/13] drm/i915/display: move needs_modeset to
 an inline in header
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogRGF2ZSBBaXJsaWUgPGFpcmxpZWRAcmVkaGF0LmNvbT4KClRoaXMgZnVuY3Rpb24gaXMg
Z29pbmcgdG8gYmUgdXNlZCBpbiBhIGxhdGVyIGNoYW5nZSwgc28gY2xlYW4gaXQKdXAgZmlyc3Qg
YmVmb3JlIG1vdmluZyBpdC4KClJldmlld2VkLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5
cmphbGFAbGludXguaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBEYXZlIEFpcmxpZSA8YWlybGll
ZEByZWRoYXQuY29tPgpTaWduZWQtb2ZmLWJ5OiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1bGFAaW50
ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5j
ICB8IDc4ICsrKysrKysrKy0tLS0tLS0tLS0KIC4uLi9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXlfdHlwZXMuaCAgICB8ICA2ICsrCiAyIGZpbGVzIGNoYW5nZWQsIDQyIGluc2VydGlvbnMo
KyksIDQyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRl
bF9kaXNwbGF5LmMKaW5kZXggYzU2N2MwY2FkYTdlLi44MDEwMzIxMWY0MDcgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jCkBAIC01NDIsMTIgKzU0Miw2
IEBAIGljbF93YV9zY2FsZXJjbGtnYXRpbmcoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LCBlbnVtIHBpcGUgcGlwZSwKIAkJICAgICAgICAgICAgICAgaW50ZWxfZGVfcmVhZChkZXZf
cHJpdiwgQ0xLR0FURV9ESVNfUFNMKHBpcGUpKSAmIH5EUEZSX0dBVElOR19ESVMpOwogfQogCi1z
dGF0aWMgYm9vbAotbmVlZHNfbW9kZXNldChjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAq
c3RhdGUpCi17Ci0JcmV0dXJuIGRybV9hdG9taWNfY3J0Y19uZWVkc19tb2Rlc2V0KCZzdGF0ZS0+
dWFwaSk7Ci19Ci0KIHN0YXRpYyBib29sCiBpc190cmFuc19wb3J0X3N5bmNfc2xhdmUoY29uc3Qg
c3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiB7CkBAIC02NDc0LDcgKzY0Njgs
NyBAQCBzdGF0aWMgYm9vbCBoc3dfcHJlX3VwZGF0ZV9kaXNhYmxlX2lwcyhjb25zdCBzdHJ1Y3Qg
aW50ZWxfY3J0Y19zdGF0ZSAqb2xkX2NydGNfcwogCWlmICghb2xkX2NydGNfc3RhdGUtPmlwc19l
bmFibGVkKQogCQlyZXR1cm4gZmFsc2U7CiAKLQlpZiAobmVlZHNfbW9kZXNldChuZXdfY3J0Y19z
dGF0ZSkpCisJaWYgKGludGVsX2NydGNfbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkpCiAJ
CXJldHVybiB0cnVlOwogCiAJLyoKQEAgLTY1MDEsNyArNjQ5NSw3IEBAIHN0YXRpYyBib29sIGhz
d19wb3N0X3VwZGF0ZV9lbmFibGVfaXBzKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpv
bGRfY3J0Y19zCiAJaWYgKCFuZXdfY3J0Y19zdGF0ZS0+aXBzX2VuYWJsZWQpCiAJCXJldHVybiBm
YWxzZTsKIAotCWlmIChuZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSkKKwlpZiAoaW50ZWxf
Y3J0Y19uZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSkKIAkJcmV0dXJuIHRydWU7CiAKIAkv
KgpAQCAtNjU1NCw3ICs2NTQ4LDcgQEAgc3RhdGljIGJvb2wgbmVlZHNfc2NhbGVyY2xrX3dhKGNv
bnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQogc3RhdGljIGJvb2wgcGxh
bmVzX2VuYWJsaW5nKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0
ZSwKIAkJCSAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqbmV3X2NydGNfc3RhdGUp
CiB7Ci0JcmV0dXJuICghb2xkX2NydGNfc3RhdGUtPmFjdGl2ZV9wbGFuZXMgfHwgbmVlZHNfbW9k
ZXNldChuZXdfY3J0Y19zdGF0ZSkpICYmCisJcmV0dXJuICghb2xkX2NydGNfc3RhdGUtPmFjdGl2
ZV9wbGFuZXMgfHwgaW50ZWxfY3J0Y19uZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSkgJiYK
IAkJbmV3X2NydGNfc3RhdGUtPmFjdGl2ZV9wbGFuZXM7CiB9CiAKQEAgLTY1NjIsNyArNjU1Niw3
IEBAIHN0YXRpYyBib29sIHBsYW5lc19kaXNhYmxpbmcoY29uc3Qgc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKm9sZF9jcnRjX3N0YXRlLAogCQkJICAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19z
dGF0ZSAqbmV3X2NydGNfc3RhdGUpCiB7CiAJcmV0dXJuIG9sZF9jcnRjX3N0YXRlLT5hY3RpdmVf
cGxhbmVzICYmCi0JCSghbmV3X2NydGNfc3RhdGUtPmFjdGl2ZV9wbGFuZXMgfHwgbmVlZHNfbW9k
ZXNldChuZXdfY3J0Y19zdGF0ZSkpOworCQkoIW5ld19jcnRjX3N0YXRlLT5hY3RpdmVfcGxhbmVz
IHx8IGludGVsX2NydGNfbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkpOwogfQogCiBzdGF0
aWMgdm9pZCBpbnRlbF9wb3N0X3BsYW5lX3VwZGF0ZShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRl
ICpzdGF0ZSwKQEAgLTY2ODUsNyArNjY3OSw3IEBAIHN0YXRpYyB2b2lkIGludGVsX3ByZV9wbGFu
ZV91cGRhdGUoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsCiAJICogSWYgd2UncmUg
ZG9pbmcgYSBtb2Rlc2V0IHdlIGRvbid0IG5lZWQgdG8gZG8gYW55CiAJICogcHJlLXZibGFuayB3
YXRlcm1hcmsgcHJvZ3JhbW1pbmcgaGVyZS4KIAkgKi8KLQlpZiAoIW5lZWRzX21vZGVzZXQobmV3
X2NydGNfc3RhdGUpKSB7CisJaWYgKCFpbnRlbF9jcnRjX25lZWRzX21vZGVzZXQobmV3X2NydGNf
c3RhdGUpKSB7CiAJCS8qCiAJCSAqIEZvciBwbGF0Zm9ybXMgdGhhdCBzdXBwb3J0IGF0b21pYyB3
YXRlcm1hcmtzLCBwcm9ncmFtIHRoZQogCQkgKiAnaW50ZXJtZWRpYXRlJyB3YXRlcm1hcmtzIGlt
bWVkaWF0ZWx5LiAgT24gcHJlLWdlbjkgcGxhdGZvcm1zLCB0aGVzZQpAQCAtMTIwNDYsNyArMTIw
NDAsNyBAQCBzdGF0aWMgdm9pZCBpOXh4X3VwZGF0ZV9jdXJzb3Ioc3RydWN0IGludGVsX3BsYW5l
ICpwbGFuZSwKIAlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSA5KQogCQlza2xfd3JpdGVfY3Vy
c29yX3dtKHBsYW5lLCBjcnRjX3N0YXRlKTsKIAotCWlmICghbmVlZHNfbW9kZXNldChjcnRjX3N0
YXRlKSkKKwlpZiAoIWludGVsX2NydGNfbmVlZHNfbW9kZXNldChjcnRjX3N0YXRlKSkKIAkJaW50
ZWxfcHNyMl9wcm9ncmFtX3BsYW5lX3NlbF9mZXRjaChwbGFuZSwgY3J0Y19zdGF0ZSwgcGxhbmVf
c3RhdGUsIDApOwogCiAJaWYgKHBsYW5lLT5jdXJzb3IuYmFzZSAhPSBiYXNlIHx8CkBAIC0xMjYx
Niw3ICsxMjYxMCw3IEBAIGludCBpbnRlbF9wbGFuZV9hdG9taWNfY2FsY19jaGFuZ2VzKGNvbnN0
IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0CiAJc3RydWN0IGludGVsX2Ny
dGMgKmNydGMgPSB0b19pbnRlbF9jcnRjKGNydGNfc3RhdGUtPnVhcGkuY3J0Yyk7CiAJc3RydWN0
IGludGVsX3BsYW5lICpwbGFuZSA9IHRvX2ludGVsX3BsYW5lKHBsYW5lX3N0YXRlLT51YXBpLnBs
YW5lKTsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMt
PmJhc2UuZGV2KTsKLQlib29sIG1vZGVfY2hhbmdlZCA9IG5lZWRzX21vZGVzZXQoY3J0Y19zdGF0
ZSk7CisJYm9vbCBtb2RlX2NoYW5nZWQgPSBpbnRlbF9jcnRjX25lZWRzX21vZGVzZXQoY3J0Y19z
dGF0ZSk7CiAJYm9vbCB3YXNfY3J0Y19lbmFibGVkID0gb2xkX2NydGNfc3RhdGUtPmh3LmFjdGl2
ZTsKIAlib29sIGlzX2NydGNfZW5hYmxlZCA9IGNydGNfc3RhdGUtPmh3LmFjdGl2ZTsKIAlib29s
IHR1cm5fb2ZmLCB0dXJuX29uLCB2aXNpYmxlLCB3YXNfdmlzaWJsZTsKQEAgLTEyOTgwLDcgKzEy
OTc0LDcgQEAgc3RhdGljIGludCBpbnRlbF9jcnRjX2F0b21pY19jaGVjayhzdHJ1Y3QgaW50ZWxf
YXRvbWljX3N0YXRlICpzdGF0ZSwKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYg
PSB0b19pOTE1KGNydGMtPmJhc2UuZGV2KTsKIAlzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0
Y19zdGF0ZSA9CiAJCWludGVsX2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUoc3RhdGUsIGNydGMp
OwotCWJvb2wgbW9kZV9jaGFuZ2VkID0gbmVlZHNfbW9kZXNldChjcnRjX3N0YXRlKTsKKwlib29s
IG1vZGVfY2hhbmdlZCA9IGludGVsX2NydGNfbmVlZHNfbW9kZXNldChjcnRjX3N0YXRlKTsKIAlp
bnQgcmV0OwogCiAJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPCA1ICYmICFJU19HNFgoZGV2X3By
aXYpICYmCkBAIC0xNDgxMiw3ICsxNDgwNiw3IEBAIGludGVsX21vZGVzZXRfdmVyaWZ5X2NydGMo
c3RydWN0IGludGVsX2NydGMgKmNydGMsCiAJCQkgIHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpv
bGRfY3J0Y19zdGF0ZSwKIAkJCSAgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKm5ld19jcnRjX3N0
YXRlKQogewotCWlmICghbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkgJiYgIW5ld19jcnRj
X3N0YXRlLT51cGRhdGVfcGlwZSkKKwlpZiAoIWludGVsX2NydGNfbmVlZHNfbW9kZXNldChuZXdf
Y3J0Y19zdGF0ZSkgJiYgIW5ld19jcnRjX3N0YXRlLT51cGRhdGVfcGlwZSkKIAkJcmV0dXJuOwog
CiAJdmVyaWZ5X3dtX3N0YXRlKGNydGMsIG5ld19jcnRjX3N0YXRlKTsKQEAgLTE0OTA3LDcgKzE0
OTAxLDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfbW9kZXNldF9jbGVhcl9wbGxzKHN0cnVjdCBpbnRl
bF9hdG9taWNfc3RhdGUgKnN0YXRlKQogCQlyZXR1cm47CiAKIAlmb3JfZWFjaF9uZXdfaW50ZWxf
Y3J0Y19pbl9zdGF0ZShzdGF0ZSwgY3J0YywgbmV3X2NydGNfc3RhdGUsIGkpIHsKLQkJaWYgKCFu
ZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSkKKwkJaWYgKCFpbnRlbF9jcnRjX25lZWRzX21v
ZGVzZXQobmV3X2NydGNfc3RhdGUpKQogCQkJY29udGludWU7CiAKIAkJaW50ZWxfcmVsZWFzZV9z
aGFyZWRfZHBsbHMoc3RhdGUsIGNydGMpOwpAQCAtMTQ5MzIsNyArMTQ5MjYsNyBAQCBzdGF0aWMg
aW50IGhzd19tb2RlX3NldF9wbGFuZXNfd29ya2Fyb3VuZChzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0
YXRlICpzdGF0ZSkKIAkvKiBsb29rIGF0IGFsbCBjcnRjJ3MgdGhhdCBhcmUgZ29pbmcgdG8gYmUg
ZW5hYmxlZCBpbiBkdXJpbmcgbW9kZXNldCAqLwogCWZvcl9lYWNoX25ld19pbnRlbF9jcnRjX2lu
X3N0YXRlKHN0YXRlLCBjcnRjLCBjcnRjX3N0YXRlLCBpKSB7CiAJCWlmICghY3J0Y19zdGF0ZS0+
aHcuYWN0aXZlIHx8Ci0JCSAgICAhbmVlZHNfbW9kZXNldChjcnRjX3N0YXRlKSkKKwkJICAgICFp
bnRlbF9jcnRjX25lZWRzX21vZGVzZXQoY3J0Y19zdGF0ZSkpCiAJCQljb250aW51ZTsKIAogCQlp
ZiAoZmlyc3RfY3J0Y19zdGF0ZSkgewpAQCAtMTQ5NTcsNyArMTQ5NTEsNyBAQCBzdGF0aWMgaW50
IGhzd19tb2RlX3NldF9wbGFuZXNfd29ya2Fyb3VuZChzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRl
ICpzdGF0ZSkKIAkJY3J0Y19zdGF0ZS0+aHN3X3dvcmthcm91bmRfcGlwZSA9IElOVkFMSURfUElQ
RTsKIAogCQlpZiAoIWNydGNfc3RhdGUtPmh3LmFjdGl2ZSB8fAotCQkgICAgbmVlZHNfbW9kZXNl
dChjcnRjX3N0YXRlKSkKKwkJICAgIGludGVsX2NydGNfbmVlZHNfbW9kZXNldChjcnRjX3N0YXRl
KSkKIAkJCWNvbnRpbnVlOwogCiAJCS8qIDIgb3IgbW9yZSBlbmFibGVkIGNydGNzIG1lYW5zIG5v
IG5lZWQgZm9yIHcvYSAqLwpAQCAtMTUyNzYsNyArMTUyNzAsNyBAQCBzdGF0aWMgYm9vbCBpbnRl
bF9jcHVfdHJhbnNjb2RlcnNfbmVlZF9tb2Rlc2V0KHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUg
KnN0YXRlLAogCWZvcl9lYWNoX25ld19pbnRlbF9jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBu
ZXdfY3J0Y19zdGF0ZSwgaSkgewogCQlpZiAobmV3X2NydGNfc3RhdGUtPmh3LmVuYWJsZSAmJgog
CQkgICAgdHJhbnNjb2RlcnMgJiBCSVQobmV3X2NydGNfc3RhdGUtPmNwdV90cmFuc2NvZGVyKSAm
JgotCQkgICAgbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkpCisJCSAgICBpbnRlbF9jcnRj
X25lZWRzX21vZGVzZXQobmV3X2NydGNfc3RhdGUpKQogCQkJcmV0dXJuIHRydWU7CiAJfQogCkBA
IC0xNTI5Nyw3ICsxNTI5MSw3IEBAIHN0YXRpYyBpbnQgaW50ZWxfYXRvbWljX2NoZWNrX2JpZ2pv
aW5lcihzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKIAkJc2xhdmUgPSBjcnRjOwog
CQltYXN0ZXIgPSBvbGRfY3J0Y19zdGF0ZS0+Ymlnam9pbmVyX2xpbmtlZF9jcnRjOwogCQltYXN0
ZXJfY3J0Y19zdGF0ZSA9IGludGVsX2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUoc3RhdGUsIG1h
c3Rlcik7Ci0JCWlmICghbWFzdGVyX2NydGNfc3RhdGUgfHwgIW5lZWRzX21vZGVzZXQobWFzdGVy
X2NydGNfc3RhdGUpKQorCQlpZiAoIW1hc3Rlcl9jcnRjX3N0YXRlIHx8ICFpbnRlbF9jcnRjX25l
ZWRzX21vZGVzZXQobWFzdGVyX2NydGNfc3RhdGUpKQogCQkJZ290byBjbGFpbWVkOwogCX0KIApA
QCAtMTUzNzYsNyArMTUzNzAsNyBAQCBzdGF0aWMgaW50IGludGVsX2F0b21pY19jaGVja19hc3lu
YyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIAogCWZvcl9lYWNoX29sZG5ld19p
bnRlbF9jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0ZSwKIAkJCQkJICAg
IG5ld19jcnRjX3N0YXRlLCBpKSB7Ci0JCWlmIChuZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRl
KSkgeworCQlpZiAoaW50ZWxfY3J0Y19uZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSkgewog
CQkJZHJtX2RiZ19rbXMoJmk5MTUtPmRybSwgIk1vZGVzZXQgUmVxdWlyZWQuIEFzeW5jIGZsaXAg
bm90IHN1cHBvcnRlZFxuIik7CiAJCQlyZXR1cm4gLUVJTlZBTDsKIAkJfQpAQCAtMTU0OTksNyAr
MTU0OTMsNyBAQCBzdGF0aWMgaW50IGludGVsX2JpZ2pvaW5lcl9hZGRfYWZmZWN0ZWRfY3J0Y3Mo
c3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpCiAJCWlmIChJU19FUlIobGlua2VkX2Ny
dGNfc3RhdGUpKQogCQkJcmV0dXJuIFBUUl9FUlIobGlua2VkX2NydGNfc3RhdGUpOwogCi0JCWlm
ICghbmVlZHNfbW9kZXNldChjcnRjX3N0YXRlKSkKKwkJaWYgKCFpbnRlbF9jcnRjX25lZWRzX21v
ZGVzZXQoY3J0Y19zdGF0ZSkpCiAJCQljb250aW51ZTsKIAogCQlsaW5rZWRfY3J0Y19zdGF0ZS0+
dWFwaS5tb2RlX2NoYW5nZWQgPSB0cnVlOwpAQCAtMTU1MTYsNyArMTU1MTAsNyBAQCBzdGF0aWMg
aW50IGludGVsX2JpZ2pvaW5lcl9hZGRfYWZmZWN0ZWRfY3J0Y3Moc3RydWN0IGludGVsX2F0b21p
Y19zdGF0ZSAqc3RhdGUpCiAKIAlmb3JfZWFjaF9uZXdfaW50ZWxfY3J0Y19pbl9zdGF0ZShzdGF0
ZSwgY3J0YywgY3J0Y19zdGF0ZSwgaSkgewogCQkvKiBLaWxsIG9sZCBiaWdqb2luZXIgbGluaywg
d2UgbWF5IHJlLWVzdGFibGlzaCBhZnRlcndhcmRzICovCi0JCWlmIChuZWVkc19tb2Rlc2V0KGNy
dGNfc3RhdGUpICYmCisJCWlmIChpbnRlbF9jcnRjX25lZWRzX21vZGVzZXQoY3J0Y19zdGF0ZSkg
JiYKIAkJICAgIGNydGNfc3RhdGUtPmJpZ2pvaW5lciAmJiAhY3J0Y19zdGF0ZS0+Ymlnam9pbmVy
X3NsYXZlKQogCQkJa2lsbF9iaWdqb2luZXJfc2xhdmUoc3RhdGUsIGNydGNfc3RhdGUpOwogCX0K
QEAgLTE1NTU1LDcgKzE1NTQ5LDcgQEAgc3RhdGljIGludCBpbnRlbF9hdG9taWNfY2hlY2soc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiwKIAogCWZvcl9lYWNoX29sZG5ld19pbnRlbF9jcnRjX2luX3N0
YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0ZSwKIAkJCQkJICAgIG5ld19jcnRjX3N0YXRl
LCBpKSB7Ci0JCWlmICghbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkpIHsKKwkJaWYgKCFp
bnRlbF9jcnRjX25lZWRzX21vZGVzZXQobmV3X2NydGNfc3RhdGUpKSB7CiAJCQkvKiBMaWdodCBj
b3B5ICovCiAJCQlpbnRlbF9jcnRjX2NvcHlfdWFwaV90b19od19zdGF0ZV9ub21vZGVzZXQoc3Rh
dGUsIG5ld19jcnRjX3N0YXRlKTsKIApAQCAtMTU1ODYsNyArMTU1ODAsNyBAQCBzdGF0aWMgaW50
IGludGVsX2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCiAJZm9yX2VhY2hf
b2xkbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsIG9sZF9jcnRjX3N0YXRlLAog
CQkJCQkgICAgbmV3X2NydGNfc3RhdGUsIGkpIHsKLQkJaWYgKCFuZWVkc19tb2Rlc2V0KG5ld19j
cnRjX3N0YXRlKSkKKwkJaWYgKCFpbnRlbF9jcnRjX25lZWRzX21vZGVzZXQobmV3X2NydGNfc3Rh
dGUpKQogCQkJY29udGludWU7CiAKIAkJcmV0ID0gaW50ZWxfbW9kZXNldF9waXBlX2NvbmZpZ19s
YXRlKG5ld19jcnRjX3N0YXRlKTsKQEAgLTE1NjA4LDcgKzE1NjAyLDcgQEAgc3RhdGljIGludCBp
bnRlbF9hdG9taWNfY2hlY2soc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkgKiBmb3JjZWQgYSBm
dWxsIG1vZGVzZXQuCiAJICovCiAJZm9yX2VhY2hfbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3Rh
dGUsIGNydGMsIG5ld19jcnRjX3N0YXRlLCBpKSB7Ci0JCWlmICghbmV3X2NydGNfc3RhdGUtPmh3
LmVuYWJsZSB8fCBuZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSkKKwkJaWYgKCFuZXdfY3J0
Y19zdGF0ZS0+aHcuZW5hYmxlIHx8IGludGVsX2NydGNfbmVlZHNfbW9kZXNldChuZXdfY3J0Y19z
dGF0ZSkpCiAJCQljb250aW51ZTsKIAogCQlpZiAoaW50ZWxfZHBfbXN0X2lzX3NsYXZlX3RyYW5z
KG5ld19jcnRjX3N0YXRlKSkgewpAQCAtMTU2MzYsNyArMTU2MzAsNyBAQCBzdGF0aWMgaW50IGlu
dGVsX2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJc3RydWN0IGludGVs
X2NydGNfc3RhdGUgKmxpbmtlZF9jcnRjX3N0YXRlID0KIAkJCQlpbnRlbF9hdG9taWNfZ2V0X25l
d19jcnRjX3N0YXRlKHN0YXRlLCBuZXdfY3J0Y19zdGF0ZS0+Ymlnam9pbmVyX2xpbmtlZF9jcnRj
KTsKIAotCQkJaWYgKG5lZWRzX21vZGVzZXQobGlua2VkX2NydGNfc3RhdGUpKSB7CisJCQlpZiAo
aW50ZWxfY3J0Y19uZWVkc19tb2Rlc2V0KGxpbmtlZF9jcnRjX3N0YXRlKSkgewogCQkJCW5ld19j
cnRjX3N0YXRlLT51YXBpLm1vZGVfY2hhbmdlZCA9IHRydWU7CiAJCQkJbmV3X2NydGNfc3RhdGUt
PnVwZGF0ZV9waXBlID0gZmFsc2U7CiAJCQl9CkBAIC0xNTY0NSw3ICsxNTYzOSw3IEBAIHN0YXRp
YyBpbnQgaW50ZWxfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAKIAlmb3Jf
ZWFjaF9vbGRuZXdfaW50ZWxfY3J0Y19pbl9zdGF0ZShzdGF0ZSwgY3J0Yywgb2xkX2NydGNfc3Rh
dGUsCiAJCQkJCSAgICBuZXdfY3J0Y19zdGF0ZSwgaSkgewotCQlpZiAobmVlZHNfbW9kZXNldChu
ZXdfY3J0Y19zdGF0ZSkpIHsKKwkJaWYgKGludGVsX2NydGNfbmVlZHNfbW9kZXNldChuZXdfY3J0
Y19zdGF0ZSkpIHsKIAkJCWFueV9tcyA9IHRydWU7CiAJCQljb250aW51ZTsKIAkJfQpAQCAtMTU3
MjIsMTIgKzE1NzE2LDEyIEBAIHN0YXRpYyBpbnQgaW50ZWxfYXRvbWljX2NoZWNrKHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsCiAJCQkJZ290byBmYWlsOwogCQl9CiAKLQkJaWYgKCFuZWVkc19tb2Rl
c2V0KG5ld19jcnRjX3N0YXRlKSAmJgorCQlpZiAoIWludGVsX2NydGNfbmVlZHNfbW9kZXNldChu
ZXdfY3J0Y19zdGF0ZSkgJiYKIAkJICAgICFuZXdfY3J0Y19zdGF0ZS0+dXBkYXRlX3BpcGUpCiAJ
CQljb250aW51ZTsKIAogCQlpbnRlbF9kdW1wX3BpcGVfY29uZmlnKG5ld19jcnRjX3N0YXRlLCBz
dGF0ZSwKLQkJCQkgICAgICAgbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkgPworCQkJCSAg
ICAgICBpbnRlbF9jcnRjX25lZWRzX21vZGVzZXQobmV3X2NydGNfc3RhdGUpID8KIAkJCQkgICAg
ICAgIlttb2Rlc2V0XSIgOiAiW2Zhc3RzZXRdIik7CiAJfQogCkBAIC0xNTc1OSw3ICsxNTc1Myw3
IEBAIHN0YXRpYyBpbnQgaW50ZWxfYXRvbWljX3ByZXBhcmVfY29tbWl0KHN0cnVjdCBpbnRlbF9h
dG9taWNfc3RhdGUgKnN0YXRlKQogCQlyZXR1cm4gcmV0OwogCiAJZm9yX2VhY2hfbmV3X2ludGVs
X2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsIGNydGNfc3RhdGUsIGkpIHsKLQkJYm9vbCBtb2Rl
X2NoYW5nZWQgPSBuZWVkc19tb2Rlc2V0KGNydGNfc3RhdGUpOworCQlib29sIG1vZGVfY2hhbmdl
ZCA9IGludGVsX2NydGNfbmVlZHNfbW9kZXNldChjcnRjX3N0YXRlKTsKIAogCQlpZiAobW9kZV9j
aGFuZ2VkIHx8IGNydGNfc3RhdGUtPnVwZGF0ZV9waXBlIHx8CiAJCSAgICBjcnRjX3N0YXRlLT51
YXBpLmNvbG9yX21nbXRfY2hhbmdlZCkgewpAQCAtMTU4NTAsNyArMTU4NDQsNyBAQCBzdGF0aWMg
dm9pZCBjb21taXRfcGlwZV9jb25maWcoc3RydWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUs
CiAJCWludGVsX2F0b21pY19nZXRfb2xkX2NydGNfc3RhdGUoc3RhdGUsIGNydGMpOwogCWNvbnN0
IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpuZXdfY3J0Y19zdGF0ZSA9CiAJCWludGVsX2F0b21p
Y19nZXRfbmV3X2NydGNfc3RhdGUoc3RhdGUsIGNydGMpOwotCWJvb2wgbW9kZXNldCA9IG5lZWRz
X21vZGVzZXQobmV3X2NydGNfc3RhdGUpOworCWJvb2wgbW9kZXNldCA9IGludGVsX2NydGNfbmVl
ZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSk7CiAKIAkvKgogCSAqIER1cmluZyBtb2Rlc2V0cyBw
aXBlIGNvbmZpZ3VyYXRpb24gd2FzIHByb2dyYW1tZWQgYXMgdGhlCkBAIC0xNTg4NCw3ICsxNTg3
OCw3IEBAIHN0YXRpYyB2b2lkIGludGVsX2VuYWJsZV9jcnRjKHN0cnVjdCBpbnRlbF9hdG9taWNf
c3RhdGUgKnN0YXRlLAogCWNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpuZXdfY3J0Y19z
dGF0ZSA9CiAJCWludGVsX2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUoc3RhdGUsIGNydGMpOwog
Ci0JaWYgKCFuZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSkKKwlpZiAoIWludGVsX2NydGNf
bmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkpCiAJCXJldHVybjsKIAogCWludGVsX2NydGNf
dXBkYXRlX2FjdGl2ZV90aW1pbmdzKG5ld19jcnRjX3N0YXRlKTsKQEAgLTE1OTA2LDcgKzE1OTAw
LDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfdXBkYXRlX2NydGMoc3RydWN0IGludGVsX2F0b21pY19z
dGF0ZSAqc3RhdGUsCiAJCWludGVsX2F0b21pY19nZXRfb2xkX2NydGNfc3RhdGUoc3RhdGUsIGNy
dGMpOwogCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpuZXdfY3J0Y19zdGF0ZSA9CiAJCWludGVs
X2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUoc3RhdGUsIGNydGMpOwotCWJvb2wgbW9kZXNldCA9
IG5lZWRzX21vZGVzZXQobmV3X2NydGNfc3RhdGUpOworCWJvb2wgbW9kZXNldCA9IGludGVsX2Ny
dGNfbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSk7CiAKIAlpZiAoIW1vZGVzZXQpIHsKIAkJ
aWYgKG5ld19jcnRjX3N0YXRlLT5wcmVsb2FkX2x1dHMgJiYKQEAgLTE1OTk4LDcgKzE1OTkyLDcg
QEAgc3RhdGljIHZvaWQgaW50ZWxfY29tbWl0X21vZGVzZXRfZGlzYWJsZXMoc3RydWN0IGludGVs
X2F0b21pY19zdGF0ZSAqc3RhdGUpCiAJLyogT25seSBkaXNhYmxlIHBvcnQgc3luYyBhbmQgTVNU
IHNsYXZlcyAqLwogCWZvcl9lYWNoX29sZG5ld19pbnRlbF9jcnRjX2luX3N0YXRlKHN0YXRlLCBj
cnRjLCBvbGRfY3J0Y19zdGF0ZSwKIAkJCQkJICAgIG5ld19jcnRjX3N0YXRlLCBpKSB7Ci0JCWlm
ICghbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkgfHwgb2xkX2NydGNfc3RhdGUtPmJpZ2pv
aW5lcikKKwkJaWYgKCFpbnRlbF9jcnRjX25lZWRzX21vZGVzZXQobmV3X2NydGNfc3RhdGUpIHx8
IG9sZF9jcnRjX3N0YXRlLT5iaWdqb2luZXIpCiAJCQljb250aW51ZTsKIAogCQlpZiAoIW9sZF9j
cnRjX3N0YXRlLT5ody5hY3RpdmUpCkBAIC0xNjAyMiw3ICsxNjAxNiw3IEBAIHN0YXRpYyB2b2lk
IGludGVsX2NvbW1pdF9tb2Rlc2V0X2Rpc2FibGVzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUg
KnN0YXRlKQogCS8qIERpc2FibGUgZXZlcnl0aGluZyBlbHNlIGxlZnQgb24gKi8KIAlmb3JfZWFj
aF9vbGRuZXdfaW50ZWxfY3J0Y19pbl9zdGF0ZShzdGF0ZSwgY3J0Yywgb2xkX2NydGNfc3RhdGUs
CiAJCQkJCSAgICBuZXdfY3J0Y19zdGF0ZSwgaSkgewotCQlpZiAoIW5lZWRzX21vZGVzZXQobmV3
X2NydGNfc3RhdGUpIHx8CisJCWlmICghaW50ZWxfY3J0Y19uZWVkc19tb2Rlc2V0KG5ld19jcnRj
X3N0YXRlKSB8fAogCQkgICAgKGhhbmRsZWQgJiBCSVQoY3J0Yy0+cGlwZSkpIHx8CiAJCSAgICBv
bGRfY3J0Y19zdGF0ZS0+Ymlnam9pbmVyX3NsYXZlKQogCQkJY29udGludWU7CkBAIC0xNjA3Miw3
ICsxNjA2Niw3IEBAIHN0YXRpYyB2b2lkIHNrbF9jb21taXRfbW9kZXNldF9lbmFibGVzKHN0cnVj
dCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQogCQkJY29udGludWU7CiAKIAkJLyogaWdub3Jl
IGFsbG9jYXRpb25zIGZvciBjcnRjJ3MgdGhhdCBoYXZlIGJlZW4gdHVybmVkIG9mZi4gKi8KLQkJ
aWYgKCFuZWVkc19tb2Rlc2V0KG5ld19jcnRjX3N0YXRlKSkgeworCQlpZiAoIWludGVsX2NydGNf
bmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkpIHsKIAkJCWVudHJpZXNbcGlwZV0gPSBvbGRf
Y3J0Y19zdGF0ZS0+d20uc2tsLmRkYjsKIAkJCXVwZGF0ZV9waXBlcyB8PSBCSVQocGlwZSk7CiAJ
CX0gZWxzZSB7CkBAIC0xNjI2Nyw3ICsxNjI2MSw3IEBAIHN0YXRpYyB2b2lkIGludGVsX2F0b21p
Y19jb21taXRfdGFpbChzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSkKIAogCWZvcl9l
YWNoX29sZG5ld19pbnRlbF9jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0
ZSwKIAkJCQkJICAgIG5ld19jcnRjX3N0YXRlLCBpKSB7Ci0JCWlmIChuZWVkc19tb2Rlc2V0KG5l
d19jcnRjX3N0YXRlKSB8fAorCQlpZiAoaW50ZWxfY3J0Y19uZWVkc19tb2Rlc2V0KG5ld19jcnRj
X3N0YXRlKSB8fAogCQkgICAgbmV3X2NydGNfc3RhdGUtPnVwZGF0ZV9waXBlKSB7CiAKIAkJCXB1
dF9kb21haW5zW2NydGMtPnBpcGVdID0KQEAgLTE2MjkzLDcgKzE2Mjg3LDcgQEAgc3RhdGljIHZv
aWQgaW50ZWxfYXRvbWljX2NvbW1pdF90YWlsKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0
YXRlKQogCiAJLyogQ29tcGxldGUgdGhlIGV2ZW50cyBmb3IgcGlwZXMgdGhhdCBoYXZlIG5vdyBi
ZWVuIGRpc2FibGVkICovCiAJZm9yX2VhY2hfbmV3X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUs
IGNydGMsIG5ld19jcnRjX3N0YXRlLCBpKSB7Ci0JCWJvb2wgbW9kZXNldCA9IG5lZWRzX21vZGVz
ZXQobmV3X2NydGNfc3RhdGUpOworCQlib29sIG1vZGVzZXQgPSBpbnRlbF9jcnRjX25lZWRzX21v
ZGVzZXQobmV3X2NydGNfc3RhdGUpOwogCiAJCS8qIENvbXBsZXRlIGV2ZW50cyBmb3Igbm93IGRp
c2FibGUgcGlwZXMgaGVyZS4gKi8KIAkJaWYgKG1vZGVzZXQgJiYgIW5ld19jcnRjX3N0YXRlLT5o
dy5hY3RpdmUgJiYgbmV3X2NydGNfc3RhdGUtPnVhcGkuZXZlbnQpIHsKQEAgLTE2MzQxLDcgKzE2
MzM1LDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfYXRvbWljX2NvbW1pdF90YWlsKHN0cnVjdCBpbnRl
bF9hdG9taWNfc3RhdGUgKnN0YXRlKQogCQkJc2tsX2Rpc2FibGVfZmxpcF9kb25lKGNydGMpOwog
CiAJCWlmIChuZXdfY3J0Y19zdGF0ZS0+aHcuYWN0aXZlICYmCi0JCSAgICAhbmVlZHNfbW9kZXNl
dChuZXdfY3J0Y19zdGF0ZSkgJiYKKwkJICAgICFpbnRlbF9jcnRjX25lZWRzX21vZGVzZXQobmV3
X2NydGNfc3RhdGUpICYmCiAJCSAgICAhbmV3X2NydGNfc3RhdGUtPnByZWxvYWRfbHV0cyAmJgog
CQkgICAgKG5ld19jcnRjX3N0YXRlLT51YXBpLmNvbG9yX21nbXRfY2hhbmdlZCB8fAogCQkgICAg
IG5ld19jcnRjX3N0YXRlLT51cGRhdGVfcGlwZSkpCkBAIC0xNjcxMiw3ICsxNjcwNiw3IEBAIGlu
dGVsX3ByZXBhcmVfcGxhbmVfZmIoc3RydWN0IGRybV9wbGFuZSAqX3BsYW5lLAogCQkgKiBUaGlz
IHNob3VsZCBvbmx5IGZhaWwgdXBvbiBhIGh1bmcgR1BVLCBpbiB3aGljaCBjYXNlIHdlCiAJCSAq
IGNhbiBzYWZlbHkgY29udGludWUuCiAJCSAqLwotCQlpZiAobmVlZHNfbW9kZXNldChjcnRjX3N0
YXRlKSkgeworCQlpZiAoaW50ZWxfY3J0Y19uZWVkc19tb2Rlc2V0KGNydGNfc3RhdGUpKSB7CiAJ
CQlyZXQgPSBpOTE1X3N3X2ZlbmNlX2F3YWl0X3Jlc2VydmF0aW9uKCZzdGF0ZS0+Y29tbWl0X3Jl
YWR5LAogCQkJCQkJCSAgICAgIG9sZF9vYmotPmJhc2UucmVzdiwgTlVMTCwKIAkJCQkJCQkgICAg
ICBmYWxzZSwgMCwKQEAgLTE2OTM3LDcgKzE2OTMxLDcgQEAgaW50ZWxfbGVnYWN5X2N1cnNvcl91
cGRhdGUoc3RydWN0IGRybV9wbGFuZSAqX3BsYW5lLAogCSAqCiAJICogRklYTUUgYmlnam9pbmVy
IGZhc3RwYXRoIHdvdWxkIGJlIGdvb2QKIAkgKi8KLQlpZiAoIWNydGNfc3RhdGUtPmh3LmFjdGl2
ZSB8fCBuZWVkc19tb2Rlc2V0KGNydGNfc3RhdGUpIHx8CisJaWYgKCFjcnRjX3N0YXRlLT5ody5h
Y3RpdmUgfHwgaW50ZWxfY3J0Y19uZWVkc19tb2Rlc2V0KGNydGNfc3RhdGUpIHx8CiAJICAgIGNy
dGNfc3RhdGUtPnVwZGF0ZV9waXBlIHx8IGNydGNfc3RhdGUtPmJpZ2pvaW5lcikKIAkJZ290byBz
bG93OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXlfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxh
eV90eXBlcy5oCmluZGV4IDViYzViZmJjNDU1MS4uYTJmNmI3YzE2MWE0IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAorKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaApAQCAtMTc3
Nyw2ICsxNzc3LDEyIEBAIGludGVsX2NydGNfaGFzX2RwX2VuY29kZXIoY29uc3Qgc3RydWN0IGlu
dGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCiAJCSAoMSA8PCBJTlRFTF9PVVRQVVRfRURQKSk7
CiB9CiAKK3N0YXRpYyBpbmxpbmUgYm9vbAoraW50ZWxfY3J0Y19uZWVkc19tb2Rlc2V0KGNvbnN0
IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQoreworCXJldHVybiBkcm1fYXRv
bWljX2NydGNfbmVlZHNfbW9kZXNldCgmY3J0Y19zdGF0ZS0+dWFwaSk7Cit9CisKIHN0YXRpYyBp
bmxpbmUgdm9pZAogaW50ZWxfd2FpdF9mb3JfdmJsYW5rKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdiwgZW51bSBwaXBlIHBpcGUpCiB7Ci0tIAoyLjI3LjAKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QK
SW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

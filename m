Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EF3EA25659
	for <lists+intel-gfx@lfdr.de>; Tue, 21 May 2019 19:08:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C2B7C89332;
	Tue, 21 May 2019 17:08:04 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EEA7389332
 for <intel-gfx@lists.freedesktop.org>; Tue, 21 May 2019 17:08:02 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 16631484-1500050 for multiple; Tue, 21 May 2019 18:08:00 +0100
MIME-Version: 1.0
From: Chris Wilson <chris@chris-wilson.co.uk>
User-Agent: alot/0.6
To: Lionel Landwerlin <lionel.g.landwerlin@intel.com>,
 intel-gfx@lists.freedesktop.org
References: <20190521140855.3957-1-lionel.g.landwerlin@intel.com>
 <20190521140855.3957-5-lionel.g.landwerlin@intel.com>
In-Reply-To: <20190521140855.3957-5-lionel.g.landwerlin@intel.com>
Message-ID: <155845847818.23981.11970035434652441216@skylake-alporthouse-com>
Date: Tue, 21 May 2019 18:07:58 +0100
Subject: Re: [Intel-gfx] [PATCH 4/5] drm/i915: add a new perf configuration
 execbuf parameter
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBMaW9uZWwgTGFuZHdlcmxpbiAoMjAxOS0wNS0yMSAxNTowODo1NCkKPiArICAgICAg
IGlmIChlYi0+b2FfY29uZmlnICYmCj4gKyAgICAgICAgICAgZWItPm9hX2NvbmZpZyAhPSBlYi0+
aTkxNS0+cGVyZi5vYS5leGNsdXNpdmVfc3RyZWFtLT5vYV9jb25maWcpIHsKCkJ1dCB0aGUgb2Ff
Y29uZmlnIGlzIG5vdCBvcmRlcmVkIHdpdGggcmVzcGVjdCB0byByZXF1ZXN0cywgYW5kIHRoZQpy
ZWdpc3RlcnMgY2hhbmdlZCBoZXJlIGFyZSBub3QgY29udGV4dCBzYXZlZCBhbmQgc28gbWF5IGJl
IGNoYW5nZWQgYnkgYQp0aGlyZCBwYXJ0eSBiZWZvcmUgZXhlY3V0aW9uLiBUaGUgZmlyc3QgcGFy
dHkgbXVzdCBwcmVzdW1hYmx5IGRyb3BwZWQKdGhlIHBlcmZfZmQgYmVmb3JlIHRoZW4sIHNvIG1h
eWJlIHlvdSBkb24ndCBjYXJlPyBIbW0sIGRvZXNuJ3QgZXZlbiB0YWtlCmEgdGhpcmQgcGFydHkg
YXMgdGhlIHBlcmZfZmQgb3duZXIgbWF5IGNoYW5nZSB0aGVpciBtaW5kIGZvciBkaWZmZXJlbnQK
Y29udGV4dHMgYW5kIGJlIHN1cnByaXNlZCB3aGVuIHRoZSB3cm9uZyBzZXQgaXMgdXNlZC4KCj4g
KyAgICAgICAgICAgICAgIHN0cnVjdCBpOTE1X3ZtYSAqb2Ffdm1hOwo+ICsKPiArICAgICAgICAg
ICAgICAgb2Ffdm1hID0gaTkxNV92bWFfaW5zdGFuY2UoZWItPm9hX2JvLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmZWItPmVuZ2luZS0+aTkxNS0+Z2d0
dC52bSwgTlVMTCk7Cj4gKyAgICAgICAgICAgICAgIGlmICh1bmxpa2VseShJU19FUlIob2Ffdm1h
KSkpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBQVFJfRVJSKG9hX3ZtYSk7Cj4g
KyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjsKPiArICAgICAgICAgICAgICAgfQo+
ICsKPiArICAgICAgICAgICAgICAgZXJyID0gaTkxNV92bWFfcGluKG9hX3ZtYSwgMCwgMCwgUElO
X0dMT0JBTCk7Cj4gKyAgICAgICAgICAgICAgIGlmIChlcnIpCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgcmV0dXJuIGVycjsKPiArCj4gKyAgICAgICAgICAgICAgIGVyciA9IGViLT5lbmdpbmUt
PmVtaXRfYmJfc3RhcnQoZWItPnJlcXVlc3QsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgb2Ffdm1hLT5ub2RlLnN0YXJ0LAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIEk5MTVfRElTUEFUQ0hfU0VDVVJF
KTsKPiArICAgICAgICAgICAgICAgaWYgKGVycikgewo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGk5MTVfdm1hX3VucGluKG9hX3ZtYSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu
IGVycjsKPiArICAgICAgICAgICAgICAgfQo+ICsKPiArICAgICAgICAgICAgICAgZXJyID0gaTkx
NV92bWFfbW92ZV90b19hY3RpdmUob2Ffdm1hLCBlYi0+cmVxdWVzdCwgMCk7CgpNb3ZlIHRvIGFj
dGl2ZSBmaXJzdCwgc28gdGhhdCB0aGUgdm1hIGlzIG5vdCBpbiB1c2UgaWYgdGhlIG1vdmUgZmFp
bHMuCgo+ICsgICAgICAgICAgICAgICBpZiAoZXJyKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgaTkxNV92bWFfdW5waW4ob2Ffdm1hKTsKPiArICAgICAgICAgICAgICAgICAgICAgICByZXR1
cm4gZXJyOwo+ICsgICAgICAgICAgICAgICB9Cj4gKwo+ICsKPiArICAgICAgICAgICAgICAgaTkx
NV92bWFfdW5waW4ob2Ffdm1hKTsKPiArCj4gKwo+ICsgICAgICAgICAgICAgICBzd2FwKGViLT5v
YV9jb25maWcsIGViLT5pOTE1LT5wZXJmLm9hLmV4Y2x1c2l2ZV9zdHJlYW0tPm9hX2NvbmZpZyk7
Cj4gKyAgICAgICB9Cj4gKwo+ICAgICAgICAgZXJyID0gZWItPmVuZ2luZS0+ZW1pdF9iYl9zdGFy
dChlYi0+cmVxdWVzdCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZWItPmJhdGNoLT5ub2RlLnN0YXJ0ICsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZWItPmJhdGNoX3N0YXJ0X29mZnNldCwKPiBAQCAtMjM0MSw2ICsyNDEwLDcgQEAg
aTkxNV9nZW1fZG9fZXhlY2J1ZmZlcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAgICAgICAg
ZWIuYnVmZmVyX2NvdW50ID0gYXJncy0+YnVmZmVyX2NvdW50Owo+ICAgICAgICAgZWIuYmF0Y2hf
c3RhcnRfb2Zmc2V0ID0gYXJncy0+YmF0Y2hfc3RhcnRfb2Zmc2V0Owo+ICAgICAgICAgZWIuYmF0
Y2hfbGVuID0gYXJncy0+YmF0Y2hfbGVuOwo+ICsgICAgICAgZWIub2FfY29uZmlnID0gTlVMTDsK
PiAgCj4gICAgICAgICBlYi5iYXRjaF9mbGFncyA9IDA7Cj4gICAgICAgICBpZiAoYXJncy0+Zmxh
Z3MgJiBJOTE1X0VYRUNfU0VDVVJFKSB7Cj4gQEAgLTIzODUsMTcgKzI0NTUsMjkgQEAgaTkxNV9n
ZW1fZG9fZXhlY2J1ZmZlcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAgICAgICAgICovCj4g
ICAgICAgICBpbnRlbF9ndF9wbV9nZXQoZWIuaTkxNSk7Cj4gIAo+IC0gICAgICAgZXJyID0gaTkx
NV9tdXRleF9sb2NrX2ludGVycnVwdGlibGUoZGV2KTsKPiAtICAgICAgIGlmIChlcnIpCj4gLSAg
ICAgICAgICAgICAgIGdvdG8gZXJyX3JwbTsKPiAtCj4gICAgICAgICBlcnIgPSBlYl9zZWxlY3Rf
ZW5naW5lKCZlYiwgZmlsZSwgYXJncyk7CgpMb3N0IHRoZSBsb2NrLgoKPiAgICAgICAgIGlmICh1
bmxpa2VseShlcnIpKQo+IC0gICAgICAgICAgICAgICBnb3RvIGVycl91bmxvY2s7Cj4gKyAgICAg
ICAgICAgICAgIGdvdG8gZXJyX3JwbTsKPiArCj4gKyAgICAgICBpZiAoYXJncy0+ZmxhZ3MgJiBJ
OTE1X0VYRUNfUEVSRl9DT05GSUcpIHsKPiArICAgICAgICAgICAgICAgaWYgKCFpbnRlbF9lbmdp
bmVfaGFzX29hKGViLmVuZ2luZSkpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSAt
RU5PREVWOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyX2VuZ2luZTsKPiArICAg
ICAgICAgICAgICAgfQo+ICsKPiArICAgICAgICAgICAgICAgZXJyID0gZ2V0X2V4ZWNidWZfb2Ff
Y29uZmlnKGViLmk5MTUsIGFyZ3MtPkRSMSwgYXJncy0+RFI0LAo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgJmViLm9hX2NvbmZpZywgJmViLm9hX2JvKTsKPiAr
ICAgICAgICAgICAgICAgaWYgKGVycikKPiArICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVy
cl9lbmdpbmU7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgZXJyID0gaTkxNV9tdXRleF9sb2Nr
X2ludGVycnVwdGlibGUoZGV2KTsKPiArICAgICAgIGlmIChlcnIpCj4gKyAgICAgICAgICAgICAg
IGdvdG8gZXJyX29hOwo+ICAKPiAgICAgICAgIGVyciA9IGViX3dhaXRfZm9yX3JpbmcoJmViKTsg
LyogbWF5IHRlbXBvcmFyaWx5IGRyb3Agc3RydWN0X211dGV4ICovCj4gICAgICAgICBpZiAodW5s
aWtlbHkoZXJyKSkKPiAtICAgICAgICAgICAgICAgZ290byBlcnJfZW5naW5lOwo+ICsgICAgICAg
ICAgICAgICBnb3RvIGVycl91bmxvY2s7Cj4gIAo+ICAgICAgICAgZXJyID0gZWJfcmVsb2NhdGUo
JmViKTsKPiAgICAgICAgIGlmIChlcnIpIHsKPiBAQCAtMjU0MSwxMCArMjYyMywxNSBAQCBpOTE1
X2dlbV9kb19leGVjYnVmZmVyKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gIGVycl92bWE6Cj4g
ICAgICAgICBpZiAoZWIuZXhlYykKPiAgICAgICAgICAgICAgICAgZWJfcmVsZWFzZV92bWFzKCZl
Yik7Cj4gLWVycl9lbmdpbmU6Cj4gLSAgICAgICBlYl91bnBpbl9jb250ZXh0KCZlYik7Cj4gIGVy
cl91bmxvY2s6Cj4gICAgICAgICBtdXRleF91bmxvY2soJmRldi0+c3RydWN0X211dGV4KTsKPiAr
ZXJyX29hOgo+ICsgICAgICAgaWYgKGViLm9hX2NvbmZpZykgewo+ICsgICAgICAgICAgICAgICBp
OTE1X2dlbV9vYmplY3RfcHV0KGViLm9hX2JvKTsKPiArICAgICAgICAgICAgICAgaTkxNV9vYV9j
b25maWdfcHV0KGViLm9hX2NvbmZpZyk7Cj4gKyAgICAgICB9Cj4gK2Vycl9lbmdpbmU6Cj4gKyAg
ICAgICBlYl91bnBpbl9jb250ZXh0KCZlYik7CgpMb3N0IHRoZSBsb2NrLgoKPiAgZXJyX3JwbToK
PiAgICAgICAgIGludGVsX2d0X3BtX3B1dChlYi5pOTE1KTsKPiAgICAgICAgIGk5MTVfZ2VtX2Nv
bnRleHRfcHV0KGViLmdlbV9jb250ZXh0KTsKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlz
dGluZm8vaW50ZWwtZ2Z4

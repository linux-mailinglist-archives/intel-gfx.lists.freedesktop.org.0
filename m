Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C146118C21A
	for <lists+intel-gfx@lfdr.de>; Thu, 19 Mar 2020 22:12:45 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 083596EA84;
	Thu, 19 Mar 2020 21:12:44 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9E4BE6EA84
 for <intel-gfx@lists.freedesktop.org>; Thu, 19 Mar 2020 21:12:42 +0000 (UTC)
IronPort-SDR: YBiEhcHEPLVqfHeJv1+vooagSib4NGtwIbfMg4LvmeTxnaBfgQe5kajGQUSU8uMMzRZ205ivKU
 IEE+VmC3Xx7Q==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by fmsmga107.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 19 Mar 2020 14:12:41 -0700
IronPort-SDR: CWdU2fBBNGfwlyHMFQGdnr6sou7etikbvSB1cUXjLT8l3XHoqGrHl+9e+KuWHoCZ7Y7jxldIDi
 nHQjRobjlIbQ==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,573,1574150400"; d="scan'208";a="248666805"
Received: from fmsmsx103.amr.corp.intel.com ([10.18.124.201])
 by orsmga006.jf.intel.com with ESMTP; 19 Mar 2020 14:12:41 -0700
Received: from fmsmsx116.amr.corp.intel.com ([169.254.2.62]) by
 FMSMSX103.amr.corp.intel.com ([169.254.2.250]) with mapi id 14.03.0439.000;
 Thu, 19 Mar 2020 14:12:41 -0700
From: "Souza, Jose" <jose.souza@intel.com>
To: "ville.syrjala@linux.intel.com" <ville.syrjala@linux.intel.com>
Thread-Topic: [PATCH v3 3/3] drm/i915/display/fbc: Make fences a
 nice-to-have for GEN9+
Thread-Index: AQHV5sXDYnk1ET1GK0G6lh0J3zoDtqgk3jYAgBaIvgCAE5O3AIACE7yA
Date: Thu, 19 Mar 2020 21:12:40 +0000
Message-ID: <332ae664de93e9eabf9e33afb2712f2ecb36c17e.camel@intel.com>
References: <20200219014230.145601-1-jose.souza@intel.com>
 <20200219014230.145601-3-jose.souza@intel.com>
 <20200220172602.GI13686@intel.com>
 <647f33f4e86eb4edecd856b08d505e248afca1b9.camel@intel.com>
 <20200318133048.GY13686@intel.com>
In-Reply-To: <20200318133048.GY13686@intel.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.24.15.8]
Content-ID: <D4EB868AA7075944B80038A9EFCA3F8A@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH v3 3/3] drm/i915/display/fbc: Make fences a
 nice-to-have for GEN9+
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: "Vetter, Daniel" <daniel.vetter@intel.com>,
 "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>, "Pandiyan,
 Dhinakaran" <dhinakaran.pandiyan@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gV2VkLCAyMDIwLTAzLTE4IGF0IDE1OjMwICswMjAwLCBWaWxsZSBTeXJqw6Rsw6Qgd3JvdGU6
DQo+IE9uIEZyaSwgTWFyIDA2LCAyMDIwIGF0IDAxOjMyOjEyQU0gKzAwMDAsIFNvdXphLCBKb3Nl
IHdyb3RlOg0KPiA+IE9uIFRodSwgMjAyMC0wMi0yMCBhdCAxOToyNiArMDIwMCwgVmlsbGUgU3ly
asOkbMOkIHdyb3RlOg0KPiA+ID4gT24gVHVlLCBGZWIgMTgsIDIwMjAgYXQgMDU6NDI6MzBQTSAt
MDgwMCwgSm9zw6kgUm9iZXJ0byBkZSBTb3V6YQ0KPiA+ID4gd3JvdGU6DQo+ID4gPiA+IGRHRlgg
aGF2ZSBsb2NhbCBtZW1vcnkgc28gaXQgZG8gbm90IGhhdmUgYXBlcnR1cmUgYW5kIGRvIG5vdA0K
PiA+ID4gPiBzdXBwb3J0DQo+ID4gPiA+IENQVSBmZW5jZXMgYnV0IGV2ZW4gZm9yIGlHRlggaXQg
aGF2ZSBhIHNtYWxsIG51bWJlciBvZiBmZW5jZXMuDQo+ID4gPiA+IA0KPiA+ID4gPiBBcyByZXBs
YWNlbWVudCBmb3IgZmVuY2VzIHRvIHRyYWNrIGZyb250YnVmZmVyIG1vZGlmaWNhdGlvbnMgYnkN
Cj4gPiA+ID4gQ1BVDQo+ID4gPiA+IHdlIGhhdmUgYSBzb2Z0d2FyZSB0cmFja2luZyB0aGF0IGlz
IGFscmVhZHkgaW4gdXNlZCBieSBGQkMgYW5kDQo+ID4gPiA+IFBTUi4NCj4gPiA+ID4gUFNSIGRv
bid0IHN1cHBvcnQgZmVuY2VzIHNvIGl0IHNob3dzIHRoYXQgdGhpcyB0cmFja2luZyBpcw0KPiA+
ID4gPiByZWxpYWJsZS4NCj4gPiA+ID4gDQo+ID4gPiA+IFNvIGxldHMgbWFrZSBmZW5jZXMgYSBu
aWNlLXRvLWhhdmUgdG8gYWN0aXZhdGUgRkJDIGZvciBHRU45KywNCj4gPiA+ID4gdGhpcw0KPiA+
ID4gPiB3aWxsIGFsbG93IHVzIHRvIGVuYWJsZSBGQkMgZm9yIGRHRlhzIGFuZCBpR0ZYcyBldmVu
IHdoZW4gdGhlcmUNCj4gPiA+ID4gaXMNCj4gPiA+ID4gbm8NCj4gPiA+ID4gYXZhaWxhYmxlIGZl
bmNlLg0KPiA+ID4gPiANCj4gPiA+ID4gV2UgZG8gbm90IHNldCBmZW5jZXMgdG8gcm90YXRlZCBw
bGFuZXMgYnV0IEZCQyBvbmx5IGhhdmUNCj4gPiA+ID4gcmVzdHJpY3Rpb25zDQo+ID4gPiA+IGFn
YWluc3QgMTZicHAsIHNvIGFkZGluZyBpdCBoZXJlLg0KPiA+ID4gPiANCj4gPiA+ID4gQWxzbyBh
ZGRpbmcgYSBuZXcgY2hlY2sgZm9yIHRoZSB0aWxpbmcgZm9ybWF0LCBmZW5jZXMgYXJlIG9ubHkN
Cj4gPiA+ID4gc2V0DQo+ID4gPiA+IHRvIFggYW5kIFkgdGlsZWQgcGxhbmVzIGJ1dCBhZ2FpbiBG
QkMgZG9uJ3QgaGF2ZSBhbnkNCj4gPiA+ID4gcmVzdHJpY3Rpb25zDQo+ID4gPiA+IGFnYWluc3Qg
dGlsaW5nIHNvIGFkZGluZyBsaW5lYXIgYXMgc3VwcG9ydGVkIGFzIHdlbGwsIG90aGVyDQo+ID4g
PiA+IGZvcm1hdHMNCj4gPiA+ID4gc2hvdWxkIGJlIGFkZGVkIGFmdGVyIHRlc3RlZCBidXQgSUdU
IG9ubHkgc3VwcG9ydHMgZHJhd2luZyBpbg0KPiA+ID4gPiB0aHNlDQo+ID4gPiA+IDMgZm9ybWF0
cy4NCj4gPiA+ID4gDQo+ID4gPiA+IGludGVsX2ZiY19od190cmFja2luZ19jb3ZlcnNfc2NyZWVu
KCkgbWF5YmUgY2FuIGFsc28gaGF2ZSB0aGUNCj4gPiA+ID4gc2FtZQ0KPiA+ID4gPiB0cmVhdG1l
bnQgYXMgZmVuY2VzIGJ1dCBCU3BlYyBpcyBub3QgY2xlYXIgaWYgdGhlIHNpemUNCj4gPiA+ID4g
bGltaXRhdGlvbg0KPiA+ID4gPiBpcw0KPiA+ID4gPiBmb3IgaGFyZHdhcmUgdHJhY2tpbmcgb3Ig
Z2VuZXJhbCB1c2Ugb2YgRkJDIGFuZCBJIGRvbid0IGhhdmUgYQ0KPiA+ID4gPiA1Sw0KPiA+ID4g
PiBkaXNwbGF5IHRvIHRlc3QgaXQsIHNvIGtlZXBpbmcgYXMgaXMgZm9yIHNhZmV0eS4NCj4gPiA+
ID4gDQo+ID4gPiA+IHYyOg0KPiA+ID4gPiAtIEFkZGVkIHRpbGluZyBhbmQgcGl4ZWwgZm9ybWF0
IHJvdGF0aW9uIGNoZWNrcw0KPiA+ID4gPiAtIENoYW5nZWQgdGhlIEdFTiB2ZXJzaW9uIG5vdCBy
ZXF1aXJpbmcgZmVuY2VzIHRvIDExIGZyb20gOSwNCj4gPiA+ID4gRERYDQo+ID4gPiA+IG5lZWRz
IHNvbWUgY2hhbmdlcyBidXQgaXQgZG9uJ3QgaGF2ZSBzdXBwb3J0IGZvciBHRU4xMSsNCj4gPiA+
ID4gDQo+ID4gPiA+IHYzOg0KPiA+ID4gPiAtIENoYW5nZWQgYmFjayB0byBHRU45Kw0KPiA+ID4g
PiAtIE1vdmVkIEdFTiB0ZXN0IHRvIGluc2lkZSBvZiB0aWxpbmdfaXNfdmFsaWQoKQ0KPiA+ID4g
PiANCj4gPiA+ID4gQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAaW50ZWwuY29tPg0K
PiA+ID4gPiBDYzogRGhpbmFrYXJhbiBQYW5kaXlhbiA8ZGhpbmFrYXJhbi5wYW5kaXlhbkBpbnRl
bC5jb20+DQo+ID4gPiA+IENjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXgu
aW50ZWwuY29tPg0KPiA+ID4gPiBTaWduZWQtb2ZmLWJ5OiBKb3PDqSBSb2JlcnRvIGRlIFNvdXph
IDxqb3NlLnNvdXphQGludGVsLmNvbT4NCj4gPiA+ID4gLS0tDQo+ID4gPiA+ICBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZiYy5jIHwgNDUNCj4gPiA+ID4gKysrKysrKysrKysr
KysrKysrKystLS0tDQo+ID4gPiA+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oICAg
ICAgICAgIHwgIDEgKw0KPiA+ID4gPiAgMiBmaWxlcyBjaGFuZ2VkLCAzOSBpbnNlcnRpb25zKCsp
LCA3IGRlbGV0aW9ucygtKQ0KPiA+ID4gPiANCj4gPiA+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZmJjLmMNCj4gPiA+ID4gYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2ZiYy5jDQo+ID4gPiA+IGluZGV4IDFkNzZlMzY0NmEyNS4u
YTBkMWQ2NjFhMDA2IDEwMDY0NA0KPiA+ID4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2ZiYy5jDQo+ID4gPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfZmJjLmMNCj4gPiA+ID4gQEAgLTU4NSw3ICs1ODUsNyBAQCBzdGF0aWMgYm9v
bCBzdHJpZGVfaXNfdmFsaWQoc3RydWN0DQo+ID4gPiA+IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LA0KPiA+ID4gPiAgfQ0KPiA+ID4gPiAgDQo+ID4gPiA+ICBzdGF0aWMgYm9vbCBwaXhlbF9m
b3JtYXRfaXNfdmFsaWQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUNCj4gPiA+ID4gKmRldl9wcml2
LA0KPiA+ID4gPiAtCQkJCSAgdTMyIHBpeGVsX2Zvcm1hdCkNCj4gPiA+ID4gKwkJCQkgIHUzMiBw
aXhlbF9mb3JtYXQsIHVuc2lnbmVkDQo+ID4gPiA+IGludA0KPiA+ID4gPiByb3RhdGlvbikNCj4g
PiA+ID4gIHsNCj4gPiA+ID4gIAlzd2l0Y2ggKHBpeGVsX2Zvcm1hdCkgew0KPiA+ID4gPiAgCWNh
c2UgRFJNX0ZPUk1BVF9YUkdCODg4ODoNCj4gPiA+ID4gQEAgLTU5OSw2ICs1OTksOSBAQCBzdGF0
aWMgYm9vbCBwaXhlbF9mb3JtYXRfaXNfdmFsaWQoc3RydWN0DQo+ID4gPiA+IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2LA0KPiA+ID4gPiAgCQkvKiBXYUZiY09ubHkxdG8xUmF0aW86Y3RnICov
DQo+ID4gPiA+ICAJCWlmIChJU19HNFgoZGV2X3ByaXYpKQ0KPiA+ID4gPiAgCQkJcmV0dXJuIGZh
bHNlOw0KPiA+ID4gPiArCQlpZiAoKHJvdGF0aW9uICYgKERSTV9NT0RFX1JPVEFURV85MCB8DQo+
ID4gPiA+IERSTV9NT0RFX1JPVEFURV8yNzApKSAmJg0KPiA+ID4gPiArCQkgICAgSU5URUxfR0VO
KGRldl9wcml2KSA+PSA5KQ0KPiA+ID4gPiArCQkJcmV0dXJuIGZhbHNlOw0KPiA+ID4gDQo+ID4g
PiBXb3VsZCBzdGlsbCB3b3VsZCBwcmVmZXIgYSByb3RhdGlvbnNfaXNfdmFsaWQoKSBvciBzb21l
IHN1Y2gNCj4gPiA+IHRoaW5nLg0KPiA+IA0KPiA+IExpa2UgdGhpcz8NCj4gPiANCj4gPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mYmMuYw0KPiA+IGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9mYmMuYw0KPiA+IGluZGV4IDVlMzVj
ODk0YmRmOS4uNjkyZWRkNDViNzY5IDEwMDY0NA0KPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZmJjLmMNCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2ZiYy5jDQo+ID4gQEAgLTYwMCwxNSArNjAwLDIxIEBAIHN0YXRpYyBib29s
IHBpeGVsX2Zvcm1hdF9pc192YWxpZChzdHJ1Y3QNCj4gPiBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdiwNCj4gPiAgICAgICAgICAgICAgICAgLyogV2FGYmNPbmx5MXRvMVJhdGlvOmN0ZyAqLw0K
PiA+ICAgICAgICAgICAgICAgICBpZiAoSVNfRzRYKGRldl9wcml2KSkNCj4gPiAgICAgICAgICAg
ICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQo+ID4gLSAgICAgICAgICAgICAgIGlmICgocm90
YXRpb24gJiAoRFJNX01PREVfUk9UQVRFXzkwIHwNCj4gPiBEUk1fTU9ERV9ST1RBVEVfMjcwKSkg
JiYNCj4gPiAtICAgICAgICAgICAgICAgICAgIElOVEVMX0dFTihkZXZfcHJpdikgPj0gOSkNCj4g
PiAtICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQo+ID4gICAgICAgICAgICAg
ICAgIHJldHVybiB0cnVlOw0KPiA+ICAgICAgICAgZGVmYXVsdDoNCj4gPiAgICAgICAgICAgICAg
ICAgcmV0dXJuIGZhbHNlOw0KPiA+ICAgICAgICAgfQ0KPiA+ICB9DQo+ID4gDQo+ID4gK3N0YXRp
YyBib29sIHJvdGF0aW9uc19pc192YWxpZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3By
aXYsDQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUzMiBwaXhlbF9mb3JtYXQs
IHVuc2lnbmVkIGludA0KPiA+IHJvdGF0aW9uKQ0KPiA+ICt7DQo+ID4gKyAgICAgICBpZiAoSU5U
RUxfR0VOKGRldl9wcml2KSA+PSA5ICYmIHBpeGVsX2Zvcm1hdCA9PQ0KPiA+IERSTV9GT1JNQVRf
UkdCNTY1ICYmDQo+ID4gKyAgICAgICAgICAgcm90YXRpb24gJiAoRFJNX01PREVfUk9UQVRFXzkw
IHwgRFJNX01PREVfUk9UQVRFXzI3MCkpDQo+IA0KPiBkcm1fcm90YXRpb25fOTBfb3JfMjcwKCkN
Cg0KRG9uZQ0KDQo+IA0KPiA+ICsgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQo+ID4gKyAg
ICAgICByZXR1cm4gdHJ1ZTsNCj4gPiArfQ0KPiA+ICsNCj4gPiAgLyoNCj4gPiAgICogRm9yIHNv
bWUgcmVhc29uLCB0aGUgaGFyZHdhcmUgdHJhY2tpbmcgc3RhcnRzIGxvb2tpbmcgYXQNCj4gPiB3
aGF0ZXZlcg0KPiA+IHdlDQo+ID4gICAqIHByb2dyYW1tZWQgYXMgdGhlIGRpc3BsYXkgcGxhbmUg
YmFzZSBhZGRyZXNzIHJlZ2lzdGVyLiBJdCBkb2VzDQo+ID4gbm90DQo+ID4gbG9vayBhdA0KPiA+
IEBAIC04MTAsNiArODE2LDEyIEBAIHN0YXRpYyBib29sIGludGVsX2ZiY19jYW5fYWN0aXZhdGUo
c3RydWN0DQo+ID4gaW50ZWxfY3J0YyAqY3J0YykNCj4gPiAgICAgICAgICAgICAgICAgcmV0dXJu
IGZhbHNlOw0KPiA+ICAgICAgICAgfQ0KPiA+IA0KPiA+ICsgICAgICAgaWYgKCFyb3RhdGlvbnNf
aXNfdmFsaWQoZGV2X3ByaXYsIGNhY2hlLT5mYi5mb3JtYXQtPmZvcm1hdCwNCj4gPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLT5wbGFuZS5yb3RhdGlvbikpIHsNCj4gPiAr
ICAgICAgICAgICAgICAgZmJjLT5ub19mYmNfcmVhc29uID0gInBsYW5lIHJvdGF0aW9uIGlzIGlu
dmFsaWQiOw0KPiA+ICsgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQo+ID4gKyAgICAgICB9
DQo+IA0KPiBzL3JvdGF0aW9ucy9yb3RhdGlvbi8gKyBJJ2QgbW92ZSB0aGUgcHJlLWc0eCByb3Rh
dGlvbiBjaGVjayBpbnRvDQo+IHRoYXQgZnVuY3Rpb24gYXMgd2VsbC4gV2l0aCB0aGF0DQoNCkRv
bmUgYW5kIGRvbmUNCg0KPiANCj4gUmV2aWV3ZWQtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUu
c3lyamFsYUBsaW51eC5pbnRlbC5jb20+DQoNClRoYW5rcw0KDQo+IA0KPiA+ICsNCj4gPiAgICAg
ICAgIGlmIChjYWNoZS0+cGxhbmUucGl4ZWxfYmxlbmRfbW9kZSAhPQ0KPiA+IERSTV9NT0RFX0JM
RU5EX1BJWEVMX05PTkUNCj4gPiAmJg0KPiA+ICAgICAgICAgICAgIGNhY2hlLT5mYi5mb3JtYXQt
Pmhhc19hbHBoYSkgew0KPiA+ICAgICAgICAgICAgICAgICBmYmMtPm5vX2ZiY19yZWFzb24gPSAi
cGVyLXBpeGVsIGFscGhhIGJsZW5kaW5nIGlzDQo+ID4gaW5jb21wYXRpYmxlIHdpdGggRkJDIjsN
Cj4gPiANCj4gPiANCj4gPiA+ID4gIAkJcmV0dXJuIHRydWU7DQo+ID4gPiA+ICAJZGVmYXVsdDoN
Cj4gPiA+ID4gIAkJcmV0dXJuIGZhbHNlOw0KPiA+ID4gPiBAQCAtNjM5LDYgKzY0MiwyMiBAQCBz
dGF0aWMgYm9vbA0KPiA+ID4gPiBpbnRlbF9mYmNfaHdfdHJhY2tpbmdfY292ZXJzX3NjcmVlbihz
dHJ1Y3QgaW50ZWxfY3J0YyAqY3J0YykNCj4gPiA+ID4gIAlyZXR1cm4gZWZmZWN0aXZlX3cgPD0g
bWF4X3cgJiYgZWZmZWN0aXZlX2ggPD0gbWF4X2g7DQo+ID4gPiA+ICB9DQo+ID4gPiA+ICANCj4g
PiA+ID4gK3N0YXRpYyBib29sIHRpbGluZ19pc192YWxpZChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsDQo+ID4gPiA+ICsJCQkgICAgdWludDY0X3QgbW9kaWZpZXIpDQo+ID4gPiA+
ICt7DQo+ID4gPiA+ICsJc3dpdGNoIChtb2RpZmllcikgew0KPiA+ID4gPiArCWNhc2UgRFJNX0ZP
Uk1BVF9NT0RfTElORUFSOg0KPiA+ID4gPiArCQlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSA5
KQ0KPiA+ID4gPiArCQkJcmV0dXJuIHRydWU7DQo+ID4gPiANCj4gPiA+IEhhdmUgd2UgY2hlY2tl
ZCB0aGF0IGVnLiBmYmNvbiBjdXJzb3Igc3RpbGwgYmxpbmtzIGNvcnJlY3RseQ0KPiA+ID4gd2l0
aCBGQkMgYWN0aXZlIGFuZCBhbGw/DQo+ID4gDQo+ID4gSHVtIG9uIGZiY29uIEZCQyBpcyBlbmFi
bGVkIGJ1dCBpdCBuZXZlciBjb21wcmVzcywgSUdUIHRlc3RzIHdpdGgNCj4gPiBmZW5jZXMgY29t
cGxldGUgZGlzYWJsZXMgYXJlIHdvcmtpbmcgZmluZSwgc2NyZWVuIGlzIHVwZGF0ZWQgd2hlbg0K
PiA+IHRlc3RzDQo+ID4gYXNrcyB0byB3aXRoIEZCQyBlbmFibGVkIGFuZCBjb21wcmVzc2luZy4N
Cj4gPiANCj4gPiBJIHdpbGwgZGVidWcgZmJjb24gYSBsaXR0bGUgbW9yZSB0byB1bmRlcnN0YW5k
IHdoeSBpdCBpcyBuZXZlcg0KPiA+IGNvbXByZXNzaW5nLiANCj4gPiANCj4gPiA+ID4gKwkJcmV0
dXJuIGZhbHNlOw0KPiA+ID4gPiArCWNhc2UgSTkxNV9GT1JNQVRfTU9EX1hfVElMRUQ6DQo+ID4g
PiA+ICsJY2FzZSBJOTE1X0ZPUk1BVF9NT0RfWV9USUxFRDoNCj4gPiA+ID4gKwkJcmV0dXJuIHRy
dWU7DQo+ID4gPiA+ICsJZGVmYXVsdDoNCj4gPiA+ID4gKwkJcmV0dXJuIGZhbHNlOw0KPiA+ID4g
PiArCX0NCj4gPiA+ID4gK30NCj4gPiA+ID4gKw0KPiA+ID4gPiAgc3RhdGljIHZvaWQgaW50ZWxf
ZmJjX3VwZGF0ZV9zdGF0ZV9jYWNoZShzdHJ1Y3QgaW50ZWxfY3J0Yw0KPiA+ID4gPiAqY3J0YywN
Cj4gPiA+ID4gIAkJCQkJIGNvbnN0IHN0cnVjdA0KPiA+ID4gPiBpbnRlbF9jcnRjX3N0YXRlDQo+
ID4gPiA+ICpjcnRjX3N0YXRlLA0KPiA+ID4gPiAgCQkJCQkgY29uc3Qgc3RydWN0DQo+ID4gPiA+
IGludGVsX3BsYW5lX3N0YXRlDQo+ID4gPiA+ICpwbGFuZV9zdGF0ZSkNCj4gPiA+ID4gQEAgLTY3
Miw2ICs2OTEsNyBAQCBzdGF0aWMgdm9pZA0KPiA+ID4gPiBpbnRlbF9mYmNfdXBkYXRlX3N0YXRl
X2NhY2hlKHN0cnVjdA0KPiA+ID4gPiBpbnRlbF9jcnRjICpjcnRjLA0KPiA+ID4gPiAgDQo+ID4g
PiA+ICAJY2FjaGUtPmZiLmZvcm1hdCA9IGZiLT5mb3JtYXQ7DQo+ID4gPiA+ICAJY2FjaGUtPmZi
LnN0cmlkZSA9IGZiLT5waXRjaGVzWzBdOw0KPiA+ID4gPiArCWNhY2hlLT5mYi5tb2RpZmllciA9
IGZiLT5tb2RpZmllcjsNCj4gPiA+ID4gIA0KPiA+ID4gPiAgCWRybV9XQVJOX09OKCZkZXZfcHJp
di0+ZHJtLCBwbGFuZV9zdGF0ZS0+ZmxhZ3MgJg0KPiA+ID4gPiBQTEFORV9IQVNfRkVOQ0UgJiYN
Cj4gPiA+ID4gIAkJICAgICFwbGFuZV9zdGF0ZS0+dm1hLT5mZW5jZSk7DQo+ID4gPiA+IEBAIC03
MjAsMjMgKzc0MCwzMyBAQCBzdGF0aWMgYm9vbCBpbnRlbF9mYmNfY2FuX2FjdGl2YXRlKHN0cnVj
dA0KPiA+ID4gPiBpbnRlbF9jcnRjICpjcnRjKQ0KPiA+ID4gPiAgCQlyZXR1cm4gZmFsc2U7DQo+
ID4gPiA+ICAJfQ0KPiA+ID4gPiAgDQo+ID4gPiA+IC0JLyogVGhlIHVzZSBvZiBhIENQVSBmZW5j
ZSBpcyBtYW5kYXRvcnkgaW4gb3JkZXIgdG8NCj4gPiA+ID4gZGV0ZWN0DQo+ID4gPiA+IHdyaXRl
cw0KPiA+ID4gPiAtCSAqIGJ5IHRoZSBDUFUgdG8gdGhlIHNjYW5vdXQgYW5kIHRyaWdnZXIgdXBk
YXRlcyB0byB0aGUNCj4gPiA+ID4gRkJDLg0KPiA+ID4gPiArCS8qIFRoZSB1c2Ugb2YgYSBDUFUg
ZmVuY2UgaXMgb25lIG9mIHR3byB3YXlzIHRvIGRldGVjdA0KPiA+ID4gPiB3cml0ZXMNCj4gPiA+
ID4gYnkgdGhlDQo+ID4gPiA+ICsJICogQ1BVIHRvIHRoZSBzY2Fub3V0IGFuZCB0cmlnZ2VyIHVw
ZGF0ZXMgdG8gdGhlIEZCQy4NCj4gPiA+ID4gKwkgKg0KPiA+ID4gPiArCSAqIFRoZSBvdGhlciBt
ZXRob2QgaXMgYnkgc29mdHdhcmUgdHJhY2tpbmcoc2VlDQo+ID4gPiA+ICsJICogaW50ZWxfZmJj
X2ludmFsaWRhdGUvZmx1c2goKSksIGl0IHdpbGwgbWFudWFsbHkNCj4gPiA+ID4gbm90aWZ5IEZC
Qw0KPiA+ID4gPiBhbmQgbnVrZQ0KPiA+ID4gPiArCSAqIHRoZSBjdXJyZW50IGNvbXByZXNzZWQg
YnVmZmVyIGFuZCByZWNvbXByZXNzIGl0Lg0KPiA+ID4gPiAgCSAqDQo+ID4gPiA+ICAJICogTm90
ZSB0aGF0IGlzIHBvc3NpYmxlIGZvciBhIHRpbGVkIHN1cmZhY2UgdG8gYmUNCj4gPiA+ID4gdW5t
YXBwYWJsZQ0KPiA+ID4gPiAoYW5kDQo+ID4gPiA+IC0JICogc28gaGF2ZSBubyBmZW5jZSBhc3Nv
Y2lhdGVkIHdpdGggaXQpIGR1ZSB0byBhcGVydHVyZQ0KPiA+ID4gPiBjb25zdGFpbnRzDQo+ID4g
PiA+ICsJICogc28gaGF2ZSBubyBmZW5jZSBhc3NvY2lhdGVkIHdpdGggaXQpIGR1ZSB0byBhcGVy
dHVyZQ0KPiA+ID4gPiBjb25zdHJhaW50cw0KPiA+ID4gPiAgCSAqIGF0IHRoZSB0aW1lIG9mIHBp
bm5pbmcuDQo+ID4gPiA+ICAJICoNCj4gPiA+ID4gIAkgKiBGSVhNRSB3aXRoIDkwLzI3MCBkZWdy
ZWUgcm90YXRpb24gd2Ugc2hvdWxkIHVzZSB0aGUNCj4gPiA+ID4gZmVuY2Ugb24NCj4gPiA+ID4g
IAkgKiB0aGUgbm9ybWFsIEdUVCB2aWV3ICh0aGUgcm90YXRlZCB2aWV3IGRvZXNuJ3QgZXZlbg0K
PiA+ID4gPiBoYXZlIGENCj4gPiA+ID4gIAkgKiBmZW5jZSkuIFdvdWxkIG5lZWQgY2hhbmdlcyB0
byB0aGUgRkJDIGZlbmNlIFkgb2Zmc2V0DQo+ID4gPiA+IGFzDQo+ID4gPiA+IHdlbGwuDQo+ID4g
PiA+IC0JICogRm9yIG5vdyB0aGlzIHdpbGwgZWZmZWNpdmVseSBkaXNhYmxlIEZCQyB3aXRoIDkw
LzI3MA0KPiA+ID4gPiBkZWdyZWUNCj4gPiA+ID4gKwkgKiBGb3Igbm93IHRoaXMgd2lsbCBlZmZl
Y3RpdmVseSBkaXNhYmxlIEZCQyB3aXRoDQo+ID4gPiA+IDkwLzI3MCBkZWdyZWUNCj4gPiA+ID4g
IAkgKiByb3RhdGlvbi4NCj4gPiA+ID4gIAkgKi8NCj4gPiA+ID4gLQlpZiAoY2FjaGUtPmZlbmNl
X2lkIDwgMCkgew0KPiA+ID4gPiArCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYpIDwgOSAmJiBjYWNo
ZS0+ZmVuY2VfaWQgPCAwKSB7DQo+ID4gPiA+ICAJCWZiYy0+bm9fZmJjX3JlYXNvbiA9ICJmcmFt
ZWJ1ZmZlciBub3QgdGlsZWQgb3INCj4gPiA+ID4gZmVuY2VkIjsNCj4gPiA+ID4gIAkJcmV0dXJu
IGZhbHNlOw0KPiA+ID4gPiAgCX0NCj4gPiA+ID4gKw0KPiA+ID4gPiArCWlmICghdGlsaW5nX2lz
X3ZhbGlkKGRldl9wcml2LCBjYWNoZS0+ZmIubW9kaWZpZXIpKSB7DQo+ID4gPiA+ICsJCWZiYy0+
bm9fZmJjX3JlYXNvbiA9ICJ0aWxpbmcgdW5zdXBwb3J0ZWQiOw0KPiA+ID4gPiArCQlyZXR1cm4g
ZmFsc2U7DQo+ID4gPiA+ICsJfQ0KPiA+ID4gPiArDQo+ID4gPiA+ICAJaWYgKElOVEVMX0dFTihk
ZXZfcHJpdikgPD0gNCAmJiAhSVNfRzRYKGRldl9wcml2KSAmJg0KPiA+ID4gPiAgCSAgICBjYWNo
ZS0+cGxhbmUucm90YXRpb24gIT0gRFJNX01PREVfUk9UQVRFXzApIHsNCj4gPiA+ID4gIAkJZmJj
LT5ub19mYmNfcmVhc29uID0gInJvdGF0aW9uIHVuc3VwcG9ydGVkIjsNCj4gPiA+ID4gQEAgLTc0
OCw3ICs3NzgsOCBAQCBzdGF0aWMgYm9vbCBpbnRlbF9mYmNfY2FuX2FjdGl2YXRlKHN0cnVjdA0K
PiA+ID4gPiBpbnRlbF9jcnRjICpjcnRjKQ0KPiA+ID4gPiAgCQlyZXR1cm4gZmFsc2U7DQo+ID4g
PiA+ICAJfQ0KPiA+ID4gPiAgDQo+ID4gPiA+IC0JaWYgKCFwaXhlbF9mb3JtYXRfaXNfdmFsaWQo
ZGV2X3ByaXYsIGNhY2hlLT5mYi5mb3JtYXQtDQo+ID4gPiA+ID5mb3JtYXQpKSANCj4gPiA+ID4g
ew0KPiA+ID4gPiArCWlmICghcGl4ZWxfZm9ybWF0X2lzX3ZhbGlkKGRldl9wcml2LCBjYWNoZS0+
ZmIuZm9ybWF0LQ0KPiA+ID4gPiA+Zm9ybWF0LA0KPiA+ID4gPiArCQkJCSAgIGNhY2hlLT5wbGFu
ZS5yb3RhdGlvbikpIHsNCj4gPiA+ID4gIAkJZmJjLT5ub19mYmNfcmVhc29uID0gInBpeGVsIGZv
cm1hdCBpcyBpbnZhbGlkIjsNCj4gPiA+ID4gIAkJcmV0dXJuIGZhbHNlOw0KPiA+ID4gPiAgCX0N
Cj4gPiA+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgNCj4g
PiA+ID4gYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oDQo+ID4gPiA+IGluZGV4IDMz
MzBiNTM4ZDM3OS4uYmY4ODY2M2Q4MjE3IDEwMDY0NA0KPiA+ID4gPiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2Rydi5oDQo+ID4gPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZHJ2LmgNCj4gPiA+ID4gQEAgLTQxMyw2ICs0MTMsNyBAQCBzdHJ1Y3QgaW50ZWxfZmJj
IHsNCj4gPiA+ID4gIAkJc3RydWN0IHsNCj4gPiA+ID4gIAkJCWNvbnN0IHN0cnVjdCBkcm1fZm9y
bWF0X2luZm8gKmZvcm1hdDsNCj4gPiA+ID4gIAkJCXVuc2lnbmVkIGludCBzdHJpZGU7DQo+ID4g
PiA+ICsJCQl1NjQgbW9kaWZpZXI7DQo+ID4gPiA+ICAJCX0gZmI7DQo+ID4gPiA+ICAJCXUxNiBn
ZW45X3dhX2NmYl9zdHJpZGU7DQo+ID4gPiA+ICAJCXM4IGZlbmNlX2lkOw0KPiA+ID4gPiAtLSAN
Cj4gPiA+ID4gMi4yNS4xDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpJbnRlbC1nZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRl
bC1nZngK

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C4C6A91078
	for <lists+intel-gfx@lfdr.de>; Sat, 17 Aug 2019 15:12:00 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1E7236E4DE;
	Sat, 17 Aug 2019 13:11:59 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DF1946E4DE
 for <intel-gfx@lists.freedesktop.org>; Sat, 17 Aug 2019 13:11:53 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 17 Aug 2019 06:11:53 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,397,1559545200"; d="scan'208";a="168307714"
Received: from irvmail001.ir.intel.com ([163.33.26.43])
 by orsmga007.jf.intel.com with ESMTP; 17 Aug 2019 06:11:50 -0700
Received: from mwajdecz-MOBL1.ger.corp.intel.com
 (mwajdecz-mobl1.ger.corp.intel.com [10.249.129.244])
 by irvmail001.ir.intel.com (8.14.3/8.13.6/MailSET/Hub) with ESMTP id
 x7HDBkfG023218; Sat, 17 Aug 2019 14:11:49 +0100
From: Michal Wajdeczko <michal.wajdeczko@intel.com>
To: intel-gfx@lists.freedesktop.org
Date: Sat, 17 Aug 2019 13:11:44 +0000
Message-Id: <20190817131144.26884-4-michal.wajdeczko@intel.com>
X-Mailer: git-send-email 2.21.0.windows.1
In-Reply-To: <20190817131144.26884-1-michal.wajdeczko@intel.com>
References: <20190817131144.26884-1-michal.wajdeczko@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH 3/3] drm/i915/uc: Never fail on uC preparation
 step
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

TGV0J3Mgd2FpdCB3aXRoIGRlY2lzaW9uIGFib3V0IGltcG9ydGFuY2Ugb2YgdUMgZmFpbHVyZSB0
bwpoYXJkd2FyZSBpbml0aWFsaXphdGlvbiBzdGVwLgoKU2lnbmVkLW9mZi1ieTogTWljaGFsIFdh
amRlY3prbyA8bWljaGFsLndhamRlY3prb0BpbnRlbC5jb20+CkNjOiBEYW5pZWxlIENlcmFvbG8g
U3B1cmlvIDxkYW5pZWxlLmNlcmFvbG9zcHVyaW9AaW50ZWwuY29tPgpDYzogQ2hyaXMgV2lsc29u
IDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
dWMvaW50ZWxfZ3VjLmMgfCAgMyArKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVs
X2h1Yy5jIHwgIDMgKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Yy5jICB8
IDE1ICsrKysrKystLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWMu
aCAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyAgICAgICAgfCAxMCAr
Ky0tLS0tLS0tCiA1IGZpbGVzIGNoYW5nZWQsIDE2IGluc2VydGlvbnMoKyksIDE3IGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfZ3VjLmMKaW5kZXggMTgwOTczZDc5
ZWYzLi4yNDljNzQ3ZTk3NTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3Vj
L2ludGVsX2d1Yy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX2d1Yy5j
CkBAIC0zMTAsNiArMzEwLDkgQEAgdm9pZCBpbnRlbF9ndWNfZmluaShzdHJ1Y3QgaW50ZWxfZ3Vj
ICpndWMpCiB7CiAJc3RydWN0IGludGVsX2d0ICpndCA9IGd1Y190b19ndChndWMpOwogCisJaWYg
KCFpbnRlbF91Y19md19pc19hdmFpbGFibGUoJmd1Yy0+ZncpKQorCQlyZXR1cm47CisKIAlpOTE1
X2dndHRfZGlzYWJsZV9ndWMoZ3QtPmdndHQpOwogCiAJaWYgKGludGVsX2d1Y19pc19zdWJtaXNz
aW9uX3N1cHBvcnRlZChndWMpKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
dWMvaW50ZWxfaHVjLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9odWMuYwpp
bmRleCA2ZjE0NzViYTA4NzEuLmFmNjFhZTg2NGFiOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvdWMvaW50ZWxfaHVjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
dWMvaW50ZWxfaHVjLmMKQEAgLTEwNSw2ICsxMDUsOSBAQCBpbnQgaW50ZWxfaHVjX2luaXQoc3Ry
dWN0IGludGVsX2h1YyAqaHVjKQogCiB2b2lkIGludGVsX2h1Y19maW5pKHN0cnVjdCBpbnRlbF9o
dWMgKmh1YykKIHsKKwlpZiAoIWludGVsX3VjX2Z3X2lzX2F2YWlsYWJsZSgmaHVjLT5mdykpCisJ
CXJldHVybjsKKwogCWludGVsX2h1Y19yc2FfZGF0YV9kZXN0cm95KGh1Yyk7CiAJaW50ZWxfdWNf
ZndfZmluaSgmaHVjLT5mdyk7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC91Yy9pbnRlbF91Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWMuYwpp
bmRleCBkOGU5YmUxZDdiMGUuLjZmMGI5ZTA1YTVmNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91
Yy9pbnRlbF91Yy5jCkBAIC0yODgsMjcgKzI4OCwyNiBAQCB2b2lkIGludGVsX3VjX2NsZWFudXBf
ZmlybXdhcmVzKHN0cnVjdCBpbnRlbF91YyAqdWMpCiAJaW50ZWxfdWNfZndfY2xlYW51cF9mZXRj
aCgmdWMtPmd1Yy5mdyk7CiB9CiAKLWludCBpbnRlbF91Y19pbml0KHN0cnVjdCBpbnRlbF91YyAq
dWMpCit2b2lkIGludGVsX3VjX2luaXQoc3RydWN0IGludGVsX3VjICp1YykKIHsKIAlzdHJ1Y3Qg
aW50ZWxfZ3VjICpndWMgPSAmdWMtPmd1YzsKIAlzdHJ1Y3QgaW50ZWxfaHVjICpodWMgPSAmdWMt
Pmh1YzsKIAlpbnQgcmV0OwogCiAJaWYgKCFpbnRlbF91Y191c2VzX2d1Yyh1YykpCi0JCXJldHVy
biAwOworCQlyZXR1cm47CiAKIAkvKiBYWFg6IEd1QyBzdWJtaXNzaW9uIGlzIHVuYXZhaWxhYmxl
IGZvciBub3cgKi8KIAlHRU1fQlVHX09OKGludGVsX3VjX3N1cHBvcnRzX2d1Y19zdWJtaXNzaW9u
KHVjKSk7CiAKIAlyZXQgPSBpbnRlbF9ndWNfaW5pdChndWMpOwotCWlmIChyZXQpCi0JCXJldHVy
biByZXQ7Ci0KLQlpZiAoaW50ZWxfdWNfdXNlc19odWModWMpKSB7Ci0JCWludGVsX2h1Y19pbml0
KGh1Yyk7CisJaWYgKHJldCkgeworCQlpbnRlbF91Y19md19jbGVhbnVwX2ZldGNoKCZodWMtPmZ3
KTsKKwkJcmV0dXJuOwogCX0KIAotCXJldHVybiAwOworCWlmIChpbnRlbF91Y191c2VzX2h1Yyh1
YykpCisJCWludGVsX2h1Y19pbml0KGh1Yyk7CiB9CiAKIHZvaWQgaW50ZWxfdWNfZmluaShzdHJ1
Y3QgaW50ZWxfdWMgKnVjKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMv
aW50ZWxfdWMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjLmgKaW5kZXgg
MWI5NDA0YTc1YWMwLi41Mjc5OTVjMjExOTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L3VjL2ludGVsX3VjLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50
ZWxfdWMuaApAQCAtMjQsOSArMjQsOSBAQCB2b2lkIGludGVsX3VjX2luaXRfbW1pbyhzdHJ1Y3Qg
aW50ZWxfdWMgKnVjKTsKIHZvaWQgaW50ZWxfdWNfZmV0Y2hfZmlybXdhcmVzKHN0cnVjdCBpbnRl
bF91YyAqdWMpOwogdm9pZCBpbnRlbF91Y19jbGVhbnVwX2Zpcm13YXJlcyhzdHJ1Y3QgaW50ZWxf
dWMgKnVjKTsKIHZvaWQgaW50ZWxfdWNfc2FuaXRpemUoc3RydWN0IGludGVsX3VjICp1Yyk7Cit2
b2lkIGludGVsX3VjX2luaXQoc3RydWN0IGludGVsX3VjICp1Yyk7CiBpbnQgaW50ZWxfdWNfaW5p
dF9odyhzdHJ1Y3QgaW50ZWxfdWMgKnVjKTsKIHZvaWQgaW50ZWxfdWNfZmluaV9odyhzdHJ1Y3Qg
aW50ZWxfdWMgKnVjKTsKLWludCBpbnRlbF91Y19pbml0KHN0cnVjdCBpbnRlbF91YyAqdWMpOwog
dm9pZCBpbnRlbF91Y19maW5pKHN0cnVjdCBpbnRlbF91YyAqdWMpOwogdm9pZCBpbnRlbF91Y19y
ZXNldF9wcmVwYXJlKHN0cnVjdCBpbnRlbF91YyAqdWMpOwogdm9pZCBpbnRlbF91Y19zdXNwZW5k
KHN0cnVjdCBpbnRlbF91YyAqdWMpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKaW5kZXggM2YwZDg4
Y2I0N2RkLi5jZGYyZGJmODRhYTMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2VtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwpAQCAtMTQ2NCwx
MSArMTQ2NCw3IEBAIGludCBpOTE1X2dlbV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdikKIAogCWludGVsX2luaXRfZ3RfcG93ZXJzYXZlKGRldl9wcml2KTsKIAotCXJldCA9
IGludGVsX3VjX2luaXQoJmRldl9wcml2LT5ndC51Yyk7Ci0JaWYgKHJldCkgewotCQlHRU1fQlVH
X09OKHJldCA9PSAtRUlPKTsKLQkJZ290byBlcnJfcG07Ci0JfQorCWludGVsX3VjX2luaXQoJmRl
dl9wcml2LT5ndC51Yyk7CiAKIAlyZXQgPSBpOTE1X2dlbV9pbml0X2h3KGRldl9wcml2KTsKIAlp
ZiAocmV0KQpAQCAtMTUzMCwxMCArMTUyNiw4IEBAIGludCBpOTE1X2dlbV9pbml0KHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIGVycl9pbml0X2h3OgogCWludGVsX3VjX2Zpbmlf
aHcoJmRldl9wcml2LT5ndC51Yyk7CiBlcnJfdWNfaW5pdDoKLQlpZiAocmV0ICE9IC1FSU8pCi0J
CWludGVsX3VjX2ZpbmkoJmRldl9wcml2LT5ndC51Yyk7Ci1lcnJfcG06CiAJaWYgKHJldCAhPSAt
RUlPKSB7CisJCWludGVsX3VjX2ZpbmkoJmRldl9wcml2LT5ndC51Yyk7CiAJCWludGVsX2NsZWFu
dXBfZ3RfcG93ZXJzYXZlKGRldl9wcml2KTsKIAkJaW50ZWxfZW5naW5lc19jbGVhbnVwKGRldl9w
cml2KTsKIAl9Ci0tIAoyLjE5LjIKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkludGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLWdmeA==

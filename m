Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6AD1010CC77
	for <lists+intel-gfx@lfdr.de>; Thu, 28 Nov 2019 17:06:46 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 649E96E84B;
	Thu, 28 Nov 2019 16:06:44 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 867BF6E84B
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Nov 2019 16:06:42 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19378764-1500050 
 for <intel-gfx@lists.freedesktop.org>; Thu, 28 Nov 2019 16:06:40 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu, 28 Nov 2019 16:06:39 +0000
Message-Id: <20191128160639.4137503-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
MIME-Version: 1.0
Subject: [Intel-gfx] [CI] drm/i915: Introduce DRM_I915_GEM_MMAP_OFFSET
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogQWJkaWVsIEphbnVsZ3VlIDxhYmRpZWwuamFudWxndWVAbGludXguaW50ZWwuY29tPgoK
VGhpcyBpcyByZWFsbHkganVzdCBhbiBhbGlhcyBvZiBtbWFwX2d0dC4gVGhlICdtbWFwIG9mZnNl
dCcgbm9tZW5jbGF0dXJlCmNvbWVzIGZyb20gdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoaXMgaW9j
dGwgd2hpY2ggaXMgdGhlIG9mZnNldCBpbnRvIHRoZQpkZXZpY2UgZmQgd2hpY2ggdXNlcnBhY2Ug
dXNlcyB3aXRoIG1tYXAoMikuCgptbWFwX2d0dCB3YXMgb3VyIGluaXRpYWwgbW1hcF9vZmZzZXQg
aW1wbGVtZW50YXRpb24sIHRoaXMgZXh0ZW5kcwpvdXIgQ1BVIG1tYXAgc3VwcG9ydCB0byBhbGxv
dyBhZGRpdGlvbmFsIGZhdWx0IGhhbmRsZXJzIHRoYXQgZGVwZW5kcyBvbgp0aGUgb2JqZWN0J3Mg
YmFja2luZyBwYWdlcy4KCk5vdGUgdGhhdCB3ZSBtdWx0aXBsZXggbW1hcF9ndHQgYW5kIG1tYXBf
b2Zmc2V0IHRocm91Z2ggdGhlIHNhbWUgaW9jdGwsCmFuZCB1c2UgdGhlIHplcm8gZXh0ZW5kaW5n
IGJlaGF2aW91ciBvZiBkcm0gdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuCnRoZW0sIHdoZW4gd2Ug
aW5zcGVjdCB0aGUgZmxhZ3MuCgpUbyBzdXBwb3J0IG11bHRpcGxlIG1tYXAgdHlwZXMgb24gYW4g
b2JqZWN0IHdlIG5lZWQgdG8gc3VwcG9ydCBtdWx0aXBsZQptbWFwX29mZnNldHMgZm9yIGFuIG9i
amVjdCAoZWFjaCBvZmZzZXQgaW4gdGhlIGdsb2JhbCBkZXZpY2UgYWRkcmVzcwpzcGFjZSBjb3Jy
ZXNwb25kaW5nIHRvIGEgdW5pcXVlIGluc3RhbmNlIG9mIHRoZSBvYmplY3QgZm9yIGEgZmlsZSAr
IG1tYXAKdHlwZSkuIEFzIHdlIGRyb3AgdGhlIHNpbXBsaWZpZWQgZHJtIGNvcmUgaWRlYSBvZiBh
IHNpbmdsZSBtbWFwX29mZnNldCwKd2UgbmVlZCB0byBwcm92aWRlIHJlcGxhY2VtZW50IGhvb2tz
IGZvciB0aGUgZHVtYiBtbWFwIGludGVyZmFjZSBhcwp3ZWxsLgoKTGluazogaHR0cHM6Ly9naXRs
YWIuZnJlZWRlc2t0b3Aub3JnL21lc2EvbWVzYS9tZXJnZV9yZXF1ZXN0cy8xNjc1ClRlc3RjYXNl
OiBpZ3QvZ2VtX21tYXBfb2Zmc2V0ClNpZ25lZC1vZmYtYnk6IEFiZGllbCBKYW51bGd1ZSA8YWJk
aWVsLmphbnVsZ3VlQGxpbnV4LmludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogTWF0dGhldyBBdWxk
IDxtYXR0aGV3LmF1bGRAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9kb21haW4uYyAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2lvY3Rscy5oICAgIHwgICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fbW1hbi5jICAgICAgfCA0MzcgKysrKysrKysrKysrKysrLS0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5oICAgICAgfCAgMzQgKysKIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYyAgICB8ICAxOCArCiBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmggICAgfCAgIDcgKy0KIC4uLi9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oICB8ICAyMiArCiBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fcGFnZXMuYyAgICAgfCAgIDMgKwogZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX3RpbGluZy5jICAgIHwgICAxICsKIC4uLi9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL2k5MTVfZ2VtX21tYW4uYyAgICB8ICA4NSArKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9pbnRlbF9yZXNldC5jICAgICAgICAgfCAgIDcgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZHJ2LmMgICAgICAgICAgICAgICB8ICAxNCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV9kcnYuaCAgICAgICAgICAgICAgIHwgICA0IC0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2VtLmMgICAgICAgICAgICAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9n
ZXRwYXJhbS5jICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1h
LmMgICAgICAgICAgICAgICB8ICAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEu
aCAgICAgICAgICAgICAgIHwgICAzICsKIGluY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaCAgICAg
ICAgICAgICAgICAgICB8ICAyNyArKwogMTggZmlsZXMgY2hhbmdlZCwgNTU3IGluc2VydGlvbnMo
KyksIDExOSBkZWxldGlvbnMoLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5oCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX2RvbWFpbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX2RvbWFpbi5jCmluZGV4IDlhZWJjZjI2MzE5MS4uYjA2YzE3MjVkNDQ1IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG9tYWluLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RvbWFpbi5jCkBAIC0xMyw2ICsxMyw3IEBACiAj
aW5jbHVkZSAiaTkxNV9nZW1fb2JqZWN0LmgiCiAjaW5jbHVkZSAiaTkxNV92bWEuaCIKICNpbmNs
dWRlICJpOTE1X2dlbV9sbWVtLmgiCisjaW5jbHVkZSAiaTkxNV9nZW1fbW1hbi5oIgogCiBzdGF0
aWMgdm9pZCBfX2k5MTVfZ2VtX29iamVjdF9mbHVzaF9mb3JfZGlzcGxheShzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqKQogewpAQCAtMjYzLDcgKzI2NCw3IEBAIGludCBpOTE1X2dlbV9v
YmplY3Rfc2V0X2NhY2hlX2xldmVsKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJ
CQl9CiAKIAkJCWlmIChvYmotPnVzZXJmYXVsdF9jb3VudCkKLQkJCQlfX2k5MTVfZ2VtX29iamVj
dF9yZWxlYXNlX21tYXAob2JqKTsKKwkJCQlfX2k5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXBf
Z3R0KG9iaik7CiAKIAkJCS8qCiAJCQkgKiBBcyB3ZSBubyBsb25nZXIgbmVlZCBhIGZlbmNlIGZv
ciBHVFQgYWNjZXNzLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX2lvY3Rscy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2lvY3Rscy5o
CmluZGV4IGRkYzdmMmE1MmIzZS4uODdkOGIyN2Y0MjZkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1faW9jdGxzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX2lvY3Rscy5oCkBAIC0yOCw4ICsyOCw4IEBAIGludCBpOTE1X2dlbV9t
YWR2aXNlX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJCQkgICBz
dHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpOwogaW50IGk5MTVfZ2VtX21tYXBfaW9jdGwoc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKIAkJCXN0cnVjdCBkcm1fZmlsZSAqZmlsZSk7Ci1p
bnQgaTkxNV9nZW1fbW1hcF9ndHRfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAq
ZGF0YSwKLQkJCSAgICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpOworaW50IGk5MTVfZ2VtX21tYXBf
b2Zmc2V0X2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCisJCQkgICAg
ICAgc3RydWN0IGRybV9maWxlICpmaWxlKTsKIGludCBpOTE1X2dlbV9wcmVhZF9pb2N0bChzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAogCQkJIHN0cnVjdCBkcm1fZmlsZSAqZmls
ZSk7CiBpbnQgaTkxNV9nZW1fcHdyaXRlX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZv
aWQgKmRhdGEsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
bW1hbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX21tYW4uYwppbmRleCBk
NjA5NzM2MDNjYzEuLmU0NTUyZTcwMzU5ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX21tYW4uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fbW1hbi5jCkBAIC01LDYgKzUsNyBAQAogICovCiAKICNpbmNsdWRlIDxsaW51eC9tbWFu
Lmg+CisjaW5jbHVkZSA8bGludXgvcGZuX3QuaD4KICNpbmNsdWRlIDxsaW51eC9zaXplcy5oPgog
CiAjaW5jbHVkZSAiZ3QvaW50ZWxfZ3QuaCIKQEAgLTE0LDYgKzE1LDcgQEAKICNpbmNsdWRlICJp
OTE1X2dlbV9ndHQuaCIKICNpbmNsdWRlICJpOTE1X2dlbV9pb2N0bHMuaCIKICNpbmNsdWRlICJp
OTE1X2dlbV9vYmplY3QuaCIKKyNpbmNsdWRlICJpOTE1X2dlbV9tbWFuLmgiCiAjaW5jbHVkZSAi
aTkxNV90cmFjZS5oIgogI2luY2x1ZGUgImk5MTVfdm1hLmgiCiAKQEAgLTE0NCw2ICsxNDYsOSBA
QCBzdGF0aWMgdW5zaWduZWQgaW50IHRpbGVfcm93X3BhZ2VzKGNvbnN0IHN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0ICpvYmopCiAgKiAzIC0gUmVtb3ZlIGltcGxpY2l0IHNldC1kb21haW4oR1RU
KSBhbmQgc3luY2hyb25pc2F0aW9uIG9uIGluaXRpYWwKICAqICAgICBwYWdlZmF1bHQ7IHN3YXBp
biByZW1haW5zIHRyYW5zcGFyZW50LgogICoKKyAqIDQgLSBTdXBwb3J0IG11bHRpcGxlIGZhdWx0
IGhhbmRsZXJzIHBlciBvYmplY3QgZGVwZW5kaW5nIG9uIG9iamVjdCdzCisgKiAgICAgYmFja2lu
ZyBzdG9yYWdlIChhLmsuYS4gTU1BUF9PRkZTRVQpLgorICoKICAqIFJlc3RyaWN0aW9uczoKICAq
CiAgKiAgKiBzbm9vcGFibGUgb2JqZWN0cyBjYW5ub3QgYmUgYWNjZXNzZWQgdmlhIHRoZSBHVFQu
IEl0IGNhbiBjYXVzZSBtYWNoaW5lCkBAIC0xNzEsNyArMTc2LDcgQEAgc3RhdGljIHVuc2lnbmVk
IGludCB0aWxlX3Jvd19wYWdlcyhjb25zdCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2Jq
KQogICovCiBpbnQgaTkxNV9nZW1fbW1hcF9ndHRfdmVyc2lvbih2b2lkKQogewotCXJldHVybiAz
OworCXJldHVybiA0OwogfQogCiBzdGF0aWMgaW5saW5lIHN0cnVjdCBpOTE1X2dndHRfdmlldwpA
QCAtMTk3LDYgKzIwMiw3MSBAQCBjb21wdXRlX3BhcnRpYWxfdmlldyhjb25zdCBzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCXJldHVybiB2aWV3OwogfQogCitzdGF0aWMgdm1fZmF1
bHRfdCBpOTE1X2Vycm9yX3RvX3ZtZl9mYXVsdChpbnQgZXJyKQoreworCXN3aXRjaCAoZXJyKSB7
CisJZGVmYXVsdDoKKwkJV0FSTl9PTkNFKGVyciwgInVuaGFuZGxlZCBlcnJvciBpbiAlczogJWlc
biIsIF9fZnVuY19fLCBlcnIpOworCQkvKiBmYWxsdGhyb3VnaCAqLworCWNhc2UgLUVJTzogLyog
c2htZW1mcyBmYWlsdXJlIGZyb20gc3dhcCBkZXZpY2UgKi8KKwljYXNlIC1FRkFVTFQ6IC8qIHB1
cmdlZCBvYmplY3QgKi8KKwljYXNlIC1FTk9ERVY6IC8qIGJhZCBvYmplY3QsIGhvdyBkaWQgeW91
IGdldCBoZXJlISAqLworCQlyZXR1cm4gVk1fRkFVTFRfU0lHQlVTOworCisJY2FzZSAtRU5PU1BD
OiAvKiBzaG1lbWZzIGFsbG9jYXRpb24gZmFpbHVyZSAqLworCWNhc2UgLUVOT01FTTogLyogb3Vy
IGFsbG9jYXRpb24gZmFpbHVyZSAqLworCQlyZXR1cm4gVk1fRkFVTFRfT09NOworCisJY2FzZSAw
OgorCWNhc2UgLUVBR0FJTjoKKwljYXNlIC1FUkVTVEFSVFNZUzoKKwljYXNlIC1FSU5UUjoKKwlj
YXNlIC1FQlVTWToKKwkJLyoKKwkJICogRUJVU1kgaXMgb2s6IHRoaXMganVzdCBtZWFucyB0aGF0
IGFub3RoZXIgdGhyZWFkCisJCSAqIGFscmVhZHkgZGlkIHRoZSBqb2IuCisJCSAqLworCQlyZXR1
cm4gVk1fRkFVTFRfTk9QQUdFOworCX0KK30KKworc3RhdGljIHZtX2ZhdWx0X3QgaTkxNV9nZW1f
ZmF1bHRfY3B1KHN0cnVjdCB2bV9mYXVsdCAqdm1mKQoreworCXN0cnVjdCB2bV9hcmVhX3N0cnVj
dCAqYXJlYSA9IHZtZi0+dm1hOworCXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICpwcml2ID0gYXJl
YS0+dm1fcHJpdmF0ZV9kYXRhOworCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmogPSBw
cml2LT5vYmo7CisJdW5zaWduZWQgbG9uZyBpLCBzaXplID0gYXJlYS0+dm1fZW5kIC0gYXJlYS0+
dm1fc3RhcnQ7CisJYm9vbCB3cml0ZSA9IGFyZWEtPnZtX2ZsYWdzICYgVk1fV1JJVEU7CisJdm1f
ZmF1bHRfdCByZXQ7CisJaW50IGVycjsKKworCWlmICghaTkxNV9nZW1fb2JqZWN0X2hhc19zdHJ1
Y3RfcGFnZShvYmopKQorCQlyZXR1cm4gVk1fRkFVTFRfU0lHQlVTOworCisJLyogU2FuaXR5IGNo
ZWNrIHRoYXQgd2UgYWxsb3cgd3JpdGluZyBpbnRvIHRoaXMgb2JqZWN0ICovCisJaWYgKGk5MTVf
Z2VtX29iamVjdF9pc19yZWFkb25seShvYmopICYmIHdyaXRlKQorCQlyZXR1cm4gVk1fRkFVTFRf
U0lHQlVTOworCisJZXJyID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9wYWdlcyhvYmopOworCWlmIChl
cnIpCisJCXJldHVybiBpOTE1X2Vycm9yX3RvX3ZtZl9mYXVsdChlcnIpOworCisJLyogUFRFcyBh
cmUgcmV2b2tlZCBpbiBvYmotPm9wcy0+cHV0X3BhZ2VzKCkgKi8KKwlmb3IgKGkgPSAwOyBpIDwg
c2l6ZSA+PiBQQUdFX1NISUZUOyBpKyspIHsKKwkJc3RydWN0IHBhZ2UgKnBhZ2UgPSBpOTE1X2dl
bV9vYmplY3RfZ2V0X3BhZ2Uob2JqLCBpKTsKKworCQlyZXQgPSB2bWZfaW5zZXJ0X3BmbihhcmVh
LAorCQkJCSAgICAgKHVuc2lnbmVkIGxvbmcpYXJlYS0+dm1fc3RhcnQgKyBpICogUEFHRV9TSVpF
LAorCQkJCSAgICAgcGFnZV90b19wZm4ocGFnZSkpOworCQlpZiAocmV0ICE9IFZNX0ZBVUxUX05P
UEFHRSkKKwkJCWJyZWFrOworCX0KKworCWk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdlcyhvYmop
OworCisJcmV0dXJuIHJldDsKK30KKwogLyoqCiAgKiBpOTE1X2dlbV9mYXVsdCAtIGZhdWx0IGEg
cGFnZSBpbnRvIHRoZSBHVFQKICAqIEB2bWY6IGZhdWx0IGluZm8KQEAgLTIxOSw3ICsyODksOCBA
QCB2bV9mYXVsdF90IGk5MTVfZ2VtX2ZhdWx0KHN0cnVjdCB2bV9mYXVsdCAqdm1mKQogewogI2Rl
ZmluZSBNSU5fQ0hVTktfUEFHRVMgKFNaXzFNID4+IFBBR0VfU0hJRlQpCiAJc3RydWN0IHZtX2Fy
ZWFfc3RydWN0ICphcmVhID0gdm1mLT52bWE7Ci0Jc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Qg
Km9iaiA9IHRvX2ludGVsX2JvKGFyZWEtPnZtX3ByaXZhdGVfZGF0YSk7CisJc3RydWN0IGk5MTVf
bW1hcF9vZmZzZXQgKnByaXYgPSBhcmVhLT52bV9wcml2YXRlX2RhdGE7CisJc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKm9iaiA9IHByaXYtPm9iajsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
ID0gb2JqLT5iYXNlLmRldjsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5
MTUoZGV2KTsKIAlzdHJ1Y3QgaW50ZWxfcnVudGltZV9wbSAqcnBtID0gJmk5MTUtPnJ1bnRpbWVf
cG07CkBAIC0zMTIsNiArMzgzLDkgQEAgdm1fZmF1bHRfdCBpOTE1X2dlbV9mYXVsdChzdHJ1Y3Qg
dm1fZmF1bHQgKnZtZikKIAkJbGlzdF9hZGQoJm9iai0+dXNlcmZhdWx0X2xpbmssICZpOTE1LT5n
Z3R0LnVzZXJmYXVsdF9saXN0KTsKIAltdXRleF91bmxvY2soJmk5MTUtPmdndHQudm0ubXV0ZXgp
OwogCisJLyogVHJhY2sgdGhlIG1tbyBhc3NvY2lhdGVkIHdpdGggdGhlIGZlbmNlZCB2bWEgKi8K
Kwl2bWEtPm1tbyA9IHByaXY7CisKIAlpZiAoSVNfQUNUSVZFKENPTkZJR19EUk1fSTkxNV9VU0VS
RkFVTFRfQVVUT1NVU1BFTkQpKQogCQlpbnRlbF93YWtlcmVmX2F1dG8oJmk5MTUtPmdndHQudXNl
cmZhdWx0X3dha2VyZWYsCiAJCQkJICAgbXNlY3NfdG9famlmZmllc190aW1lb3V0KENPTkZJR19E
Uk1fSTkxNV9VU0VSRkFVTFRfQVVUT1NVU1BFTkQpKTsKQEAgLTMzMiw1NCArNDA2LDIyIEBAIHZt
X2ZhdWx0X3QgaTkxNV9nZW1fZmF1bHQoc3RydWN0IHZtX2ZhdWx0ICp2bWYpCiAJaW50ZWxfcnVu
dGltZV9wbV9wdXQocnBtLCB3YWtlcmVmKTsKIAlpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMo
b2JqKTsKIGVycjoKLQlzd2l0Y2ggKHJldCkgewotCWRlZmF1bHQ6Ci0JCVdBUk5fT05DRShyZXQs
ICJ1bmhhbmRsZWQgZXJyb3IgaW4gJXM6ICVpXG4iLCBfX2Z1bmNfXywgcmV0KTsKLQkJLyogZmFs
bHRocm91Z2ggKi8KLQljYXNlIC1FSU86IC8qIHNobWVtZnMgZmFpbHVyZSBmcm9tIHN3YXAgZGV2
aWNlICovCi0JY2FzZSAtRUZBVUxUOiAvKiBwdXJnZWQgb2JqZWN0ICovCi0JY2FzZSAtRU5PREVW
OiAvKiBiYWQgb2JqZWN0LCBob3cgZGlkIHlvdSBnZXQgaGVyZSEgKi8KLQkJcmV0dXJuIFZNX0ZB
VUxUX1NJR0JVUzsKLQotCWNhc2UgLUVOT1NQQzogLyogc2htZW1mcyBhbGxvY2F0aW9uIGZhaWx1
cmUgKi8KLQljYXNlIC1FTk9NRU06IC8qIG91ciBhbGxvY2F0aW9uIGZhaWx1cmUgKi8KLQkJcmV0
dXJuIFZNX0ZBVUxUX09PTTsKLQotCWNhc2UgMDoKLQljYXNlIC1FQUdBSU46Ci0JY2FzZSAtRVJF
U1RBUlRTWVM6Ci0JY2FzZSAtRUlOVFI6Ci0JY2FzZSAtRUJVU1k6Ci0JCS8qCi0JCSAqIEVCVVNZ
IGlzIG9rOiB0aGlzIGp1c3QgbWVhbnMgdGhhdCBhbm90aGVyIHRocmVhZAotCQkgKiBhbHJlYWR5
IGRpZCB0aGUgam9iLgotCQkgKi8KLQkJcmV0dXJuIFZNX0ZBVUxUX05PUEFHRTsKLQl9CisJcmV0
dXJuIGk5MTVfZXJyb3JfdG9fdm1mX2ZhdWx0KHJldCk7CiB9CiAKLXZvaWQgX19pOTE1X2dlbV9v
YmplY3RfcmVsZWFzZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCit2b2lk
IF9faTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9ndHQoc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3QgKm9iaikKIHsKIAlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKIAogCUdFTV9CVUdfT04oIW9i
ai0+dXNlcmZhdWx0X2NvdW50KTsKIAotCW9iai0+dXNlcmZhdWx0X2NvdW50ID0gMDsKLQlsaXN0
X2RlbCgmb2JqLT51c2VyZmF1bHRfbGluayk7Ci0JZHJtX3ZtYV9ub2RlX3VubWFwKCZvYmotPmJh
c2Uudm1hX25vZGUsCi0JCQkgICBvYmotPmJhc2UuZGV2LT5hbm9uX2lub2RlLT5pX21hcHBpbmcp
OwotCiAJZm9yX2VhY2hfZ2d0dF92bWEodm1hLCBvYmopCi0JCWk5MTVfdm1hX3Vuc2V0X3VzZXJm
YXVsdCh2bWEpOworCQlpOTE1X3ZtYV9yZXZva2VfbW1hcCh2bWEpOworCisJR0VNX0JVR19PTihv
YmotPnVzZXJmYXVsdF9jb3VudCk7CiB9CiAKLS8qKgotICogaTkxNV9nZW1fb2JqZWN0X3JlbGVh
c2VfbW1hcCAtIHJlbW92ZSBwaHlzaWNhbCBwYWdlIG1hcHBpbmdzCi0gKiBAb2JqOiBvYmogaW4g
cXVlc3Rpb24KLSAqCi0gKiBQcmVzZXJ2ZSB0aGUgcmVzZXJ2YXRpb24gb2YgdGhlIG1tYXBwaW5n
IHdpdGggdGhlIERSTSBjb3JlIGNvZGUsIGJ1dAotICogcmVsaW5xdWlzaCBvd25lcnNoaXAgb2Yg
dGhlIHBhZ2VzIGJhY2sgdG8gdGhlIHN5c3RlbS4KLSAqCisvKgogICogSXQgaXMgdml0YWwgdGhh
dCB3ZSByZW1vdmUgdGhlIHBhZ2UgbWFwcGluZyBpZiB3ZSBoYXZlIG1hcHBlZCBhIHRpbGVkCiAg
KiBvYmplY3QgdGhyb3VnaCB0aGUgR1RUIGFuZCB0aGVuIGxvc2UgdGhlIGZlbmNlIHJlZ2lzdGVy
IGR1ZSB0bwogICogcmVzb3VyY2UgcHJlc3N1cmUuIFNpbWlsYXJseSBpZiB0aGUgb2JqZWN0IGhh
cyBiZWVuIG1vdmVkIG91dCBvZiB0aGUKQEAgLTM4NywxMiArNDI5LDEzIEBAIHZvaWQgX19pOTE1
X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmop
CiAgKiBtYXBwaW5nIHdpbGwgdGhlbiB0cmlnZ2VyIGEgcGFnZSBmYXVsdCBvbiB0aGUgbmV4dCB1
c2VyIGFjY2VzcywgYWxsb3dpbmcKICAqIGZpeHVwIGJ5IGk5MTVfZ2VtX2ZhdWx0KCkuCiAgKi8K
LXZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29i
amVjdCAqb2JqKQorc3RhdGljIHZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9ndHQo
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSA9IHRvX2k5MTUob2JqLT5iYXNlLmRldik7CiAJaW50ZWxfd2FrZXJlZl90IHdh
a2VyZWY7CiAKLQkvKiBTZXJpYWxpc2F0aW9uIGJldHdlZW4gdXNlciBHVFQgYWNjZXNzIGFuZCBv
dXIgY29kZSBkZXBlbmRzIHVwb24KKwkvKgorCSAqIFNlcmlhbGlzYXRpb24gYmV0d2VlbiB1c2Vy
IEdUVCBhY2Nlc3MgYW5kIG91ciBjb2RlIGRlcGVuZHMgdXBvbgogCSAqIHJldm9raW5nIHRoZSBD
UFUncyBQVEUgd2hpbHN0IHRoZSBtdXRleCBpcyBoZWxkLiBUaGUgbmV4dCB1c2VyCiAJICogcGFn
ZWZhdWx0IHRoZW4gaGFzIHRvIHdhaXQgdW50aWwgd2UgcmVsZWFzZSB0aGUgbXV0ZXguCiAJICoK
QEAgLTQwNiw5ICs0NDksMTAgQEAgdm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKHN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAJaWYgKCFvYmotPnVzZXJmYXVsdF9jb3Vu
dCkKIAkJZ290byBvdXQ7CiAKLQlfX2k5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXAob2JqKTsK
KwlfX2k5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXBfZ3R0KG9iaik7CiAKLQkvKiBFbnN1cmUg
dGhhdCB0aGUgQ1BVJ3MgUFRFIGFyZSByZXZva2VkIGFuZCB0aGVyZSBhcmUgbm90IG91dHN0YW5k
aW5nCisJLyoKKwkgKiBFbnN1cmUgdGhhdCB0aGUgQ1BVJ3MgUFRFIGFyZSByZXZva2VkIGFuZCB0
aGVyZSBhcmUgbm90IG91dHN0YW5kaW5nCiAJICogbWVtb3J5IHRyYW5zYWN0aW9ucyBmcm9tIHVz
ZXJzcGFjZSBiZWZvcmUgd2UgcmV0dXJuLiBUaGUgVExCCiAJICogZmx1c2hpbmcgaW1wbGllZCBh
Ym92ZSBieSBjaGFuZ2luZyB0aGUgUFRFIGFib3ZlICpzaG91bGQqIGJlCiAJICogc3VmZmljaWVu
dCwgYW4gZXh0cmEgYmFycmllciBoZXJlIGp1c3QgcHJvdmlkZXMgdXMgd2l0aCBhIGJpdApAQCAt
NDIyLDU3ICs0NjYsMTQ0IEBAIHZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogCWludGVsX3J1bnRpbWVfcG1fcHV0KCZpOTE1
LT5ydW50aW1lX3BtLCB3YWtlcmVmKTsKIH0KIAotc3RhdGljIGludCBjcmVhdGVfbW1hcF9vZmZz
ZXQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKK3ZvaWQgaTkxNV9nZW1fb2JqZWN0
X3JlbGVhc2VfbW1hcF9vZmZzZXQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKK3sK
KwlzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vOworCisJbXV0ZXhfbG9jaygmb2JqLT5tbW9f
bG9jayk7CisJbGlzdF9mb3JfZWFjaF9lbnRyeShtbW8sICZvYmotPm1tYXBfb2Zmc2V0cywgb2Zm
c2V0KSB7CisJCS8qCisJCSAqIHZtYV9ub2RlX3VubWFwIGZvciBHVFQgbW1hcHMgaGFuZGxlZCBh
bHJlYWR5IGluCisJCSAqIF9faTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9ndHQKKwkJICov
CisJCWlmIChtbW8tPm1tYXBfdHlwZSAhPSBJOTE1X01NQVBfVFlQRV9HVFQpCisJCQlkcm1fdm1h
X25vZGVfdW5tYXAoJm1tby0+dm1hX25vZGUsCisJCQkJCSAgIG9iai0+YmFzZS5kZXYtPmFub25f
aW5vZGUtPmlfbWFwcGluZyk7CisJfQorCW11dGV4X3VubG9jaygmb2JqLT5tbW9fbG9jayk7Cit9
CisKKy8qKgorICogaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcCAtIHJlbW92ZSBwaHlzaWNh
bCBwYWdlIG1hcHBpbmdzCisgKiBAb2JqOiBvYmogaW4gcXVlc3Rpb24KKyAqCisgKiBQcmVzZXJ2
ZSB0aGUgcmVzZXJ2YXRpb24gb2YgdGhlIG1tYXBwaW5nIHdpdGggdGhlIERSTSBjb3JlIGNvZGUs
IGJ1dAorICogcmVsaW5xdWlzaCBvd25lcnNoaXAgb2YgdGhlIHBhZ2VzIGJhY2sgdG8gdGhlIHN5
c3RlbS4KKyAqLwordm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwKHN0cnVjdCBkcm1f
aTkxNV9nZW1fb2JqZWN0ICpvYmopCit7CisJaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9n
dHQob2JqKTsKKwlpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFwX29mZnNldChvYmopOworfQor
CitzdGF0aWMgc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKgorbW1hcF9vZmZzZXRfY3JlYXRlKHN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCisJCSAgIGVudW0gaTkxNV9tbWFwX3R5cGUg
bW1hcF90eXBlLAorCQkgICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCiB7CiAJc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmk5MTUgPSB0b19pOTE1KG9iai0+YmFzZS5kZXYpOwotCXN0cnVjdCBpbnRl
bF9ndCAqZ3QgPSAmaTkxNS0+Z3Q7CisJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1tbzsKIAlp
bnQgZXJyOwogCi0JZXJyID0gZHJtX2dlbV9jcmVhdGVfbW1hcF9vZmZzZXQoJm9iai0+YmFzZSk7
CisJbW1vID0ga21hbGxvYyhzaXplb2YoKm1tbyksIEdGUF9LRVJORUwpOworCWlmICghbW1vKQor
CQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsKKworCW1tby0+b2JqID0gb2JqOworCW1tby0+ZGV2
ID0gb2JqLT5iYXNlLmRldjsKKwltbW8tPmZpbGUgPSBmaWxlOworCW1tby0+bW1hcF90eXBlID0g
bW1hcF90eXBlOworCWRybV92bWFfbm9kZV9yZXNldCgmbW1vLT52bWFfbm9kZSk7CisKKwllcnIg
PSBkcm1fdm1hX29mZnNldF9hZGQobW1vLT5kZXYtPnZtYV9vZmZzZXRfbWFuYWdlciwgJm1tby0+
dm1hX25vZGUsCisJCQkJIG9iai0+YmFzZS5zaXplIC8gUEFHRV9TSVpFKTsKIAlpZiAobGlrZWx5
KCFlcnIpKQotCQlyZXR1cm4gMDsKKwkJZ290byBvdXQ7CiAKIAkvKiBBdHRlbXB0IHRvIHJlYXAg
c29tZSBtbWFwIHNwYWNlIGZyb20gZGVhZCBvYmplY3RzICovCi0JZXJyID0gaW50ZWxfZ3RfcmV0
aXJlX3JlcXVlc3RzX3RpbWVvdXQoZ3QsIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsKKwllcnIgPSBp
bnRlbF9ndF9yZXRpcmVfcmVxdWVzdHNfdGltZW91dCgmaTkxNS0+Z3QsIE1BWF9TQ0hFRFVMRV9U
SU1FT1VUKTsKIAlpZiAoZXJyKQotCQlyZXR1cm4gZXJyOworCQlnb3RvIGVycjsKIAogCWk5MTVf
Z2VtX2RyYWluX2ZyZWVkX29iamVjdHMoaTkxNSk7Ci0JcmV0dXJuIGRybV9nZW1fY3JlYXRlX21t
YXBfb2Zmc2V0KCZvYmotPmJhc2UpOworCWVyciA9IGRybV92bWFfb2Zmc2V0X2FkZChtbW8tPmRl
di0+dm1hX29mZnNldF9tYW5hZ2VyLCAmbW1vLT52bWFfbm9kZSwKKwkJCQkgb2JqLT5iYXNlLnNp
emUgLyBQQUdFX1NJWkUpOworCWlmIChlcnIpCisJCWdvdG8gZXJyOworCitvdXQ6CisJbXV0ZXhf
bG9jaygmb2JqLT5tbW9fbG9jayk7CisJbGlzdF9hZGQoJm1tby0+b2Zmc2V0LCAmb2JqLT5tbWFw
X29mZnNldHMpOworCW11dGV4X3VubG9jaygmb2JqLT5tbW9fbG9jayk7CisKKwlpZiAoZmlsZSkK
KwkJZHJtX3ZtYV9ub2RlX2FsbG93KCZtbW8tPnZtYV9ub2RlLCBmaWxlKTsKKworCXJldHVybiBt
bW87CisKK2VycjoKKwlrZnJlZShtbW8pOworCXJldHVybiBFUlJfUFRSKGVycik7CiB9CiAKLWlu
dAotaTkxNV9nZW1fbW1hcF9ndHQoc3RydWN0IGRybV9maWxlICpmaWxlLAotCQkgIHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsCi0JCSAgdTMyIGhhbmRsZSwKLQkJICB1NjQgKm9mZnNldCkKK3N0YXRp
YyBpbnQKK19fYXNzaWduX2dlbV9vYmplY3RfbW1hcF9kYXRhKHN0cnVjdCBkcm1fZmlsZSAqZmls
ZSwKKwkJCSAgICAgIHUzMiBoYW5kbGUsCisJCQkgICAgICBlbnVtIGk5MTVfbW1hcF90eXBlIG1t
YXBfdHlwZSwKKwkJCSAgICAgIHU2NCAqb2Zmc2V0KQogewogCXN0cnVjdCBkcm1faTkxNV9nZW1f
b2JqZWN0ICpvYmo7Ci0JaW50IHJldDsKLQotCWlmICghaTkxNV9nZ3R0X2hhc19hcGVydHVyZSgm
dG9faTkxNShkZXYpLT5nZ3R0KSkKLQkJcmV0dXJuIC1FTk9ERVY7CisJc3RydWN0IGk5MTVfbW1h
cF9vZmZzZXQgKm1tbzsKKwlpbnQgZXJyOwogCiAJb2JqID0gaTkxNV9nZW1fb2JqZWN0X2xvb2t1
cChmaWxlLCBoYW5kbGUpOwogCWlmICghb2JqKQogCQlyZXR1cm4gLUVOT0VOVDsKIAotCWlmIChp
OTE1X2dlbV9vYmplY3RfbmV2ZXJfYmluZF9nZ3R0KG9iaikpIHsKLQkJcmV0ID0gLUVOT0RFVjsK
KwlpZiAobW1hcF90eXBlID09IEk5MTVfTU1BUF9UWVBFX0dUVCAmJgorCSAgICBpOTE1X2dlbV9v
YmplY3RfbmV2ZXJfYmluZF9nZ3R0KG9iaikpIHsKKwkJZXJyID0gLUVOT0RFVjsKIAkJZ290byBv
dXQ7CiAJfQogCi0JcmV0ID0gY3JlYXRlX21tYXBfb2Zmc2V0KG9iaik7Ci0JaWYgKHJldCA9PSAw
KQotCQkqb2Zmc2V0ID0gZHJtX3ZtYV9ub2RlX29mZnNldF9hZGRyKCZvYmotPmJhc2Uudm1hX25v
ZGUpOworCWlmIChtbWFwX3R5cGUgIT0gSTkxNV9NTUFQX1RZUEVfR1RUICYmCisJICAgICFpOTE1
X2dlbV9vYmplY3RfaGFzX3N0cnVjdF9wYWdlKG9iaikpIHsKKwkJZXJyID0gLUVOT0RFVjsKKwkJ
Z290byBvdXQ7CisJfQorCisJbW1vID0gbW1hcF9vZmZzZXRfY3JlYXRlKG9iaiwgbW1hcF90eXBl
LCBmaWxlKTsKKwlpZiAoSVNfRVJSKG1tbykpIHsKKwkJZXJyID0gUFRSX0VSUihtbW8pOworCQln
b3RvIG91dDsKKwl9CiAKKwkqb2Zmc2V0ID0gZHJtX3ZtYV9ub2RlX29mZnNldF9hZGRyKCZtbW8t
PnZtYV9ub2RlKTsKIG91dDoKIAlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7Ci0JcmV0dXJuIHJl
dDsKKwlyZXR1cm4gZXJyOworfQorCitpbnQKK2k5MTVfZ2VtX21tYXBfZHVtYihzdHJ1Y3QgZHJt
X2ZpbGUgKmZpbGUsCisJCSAgIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCisJCSAgIHUzMiBoYW5k
bGUsCisJCSAgIHU2NCAqb2Zmc2V0KQoreworCWVudW0gaTkxNV9tbWFwX3R5cGUgbW1hcF90eXBl
OworCisJaWYgKGJvb3RfY3B1X2hhcyhYODZfRkVBVFVSRV9QQVQpKQorCQltbWFwX3R5cGUgPSBJ
OTE1X01NQVBfVFlQRV9XQzsKKwllbHNlIGlmICghaTkxNV9nZ3R0X2hhc19hcGVydHVyZSgmdG9f
aTkxNShkZXYpLT5nZ3R0KSkKKwkJcmV0dXJuIC1FTk9ERVY7CisJZWxzZQorCQltbWFwX3R5cGUg
PSBJOTE1X01NQVBfVFlQRV9HVFQ7CisKKwlyZXR1cm4gX19hc3NpZ25fZ2VtX29iamVjdF9tbWFw
X2RhdGEoZmlsZSwgaGFuZGxlLCBtbWFwX3R5cGUsIG9mZnNldCk7CiB9CiAKIC8qKgotICogaTkx
NV9nZW1fbW1hcF9ndHRfaW9jdGwgLSBwcmVwYXJlIGFuIG9iamVjdCBmb3IgR1RUIG1tYXAnaW5n
CisgKiBpOTE1X2dlbV9tbWFwX29mZnNldF9pb2N0bCAtIHByZXBhcmUgYW4gb2JqZWN0IGZvciBH
VFQgbW1hcCdpbmcKICAqIEBkZXY6IERSTSBkZXZpY2UKICAqIEBkYXRhOiBHVFQgbWFwcGluZyBp
b2N0bCBkYXRhCiAgKiBAZmlsZTogR0VNIG9iamVjdCBpbmZvCkBAIC00ODcsMTIgKzYxOCwxNzYg
QEAgaTkxNV9nZW1fbW1hcF9ndHQoc3RydWN0IGRybV9maWxlICpmaWxlLAogICogdXNlcnNwYWNl
LgogICovCiBpbnQKLWk5MTVfZ2VtX21tYXBfZ3R0X2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYsIHZvaWQgKmRhdGEsCi0JCQlzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCitpOTE1X2dlbV9tbWFw
X29mZnNldF9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAorCQkJICAg
c3RydWN0IGRybV9maWxlICpmaWxlKQogewotCXN0cnVjdCBkcm1faTkxNV9nZW1fbW1hcF9ndHQg
KmFyZ3MgPSBkYXRhOworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdG9faTkxNShk
ZXYpOworCXN0cnVjdCBkcm1faTkxNV9nZW1fbW1hcF9vZmZzZXQgKmFyZ3MgPSBkYXRhOworCWVu
dW0gaTkxNV9tbWFwX3R5cGUgdHlwZTsKKworCXN3aXRjaCAoYXJncy0+ZmxhZ3MpIHsKKwljYXNl
IEk5MTVfTU1BUF9PRkZTRVRfR1RUOgorCQlpZiAoIWk5MTVfZ2d0dF9oYXNfYXBlcnR1cmUoJmk5
MTUtPmdndHQpKQorCQkJcmV0dXJuIC1FTk9ERVY7CisJCXR5cGUgPSBJOTE1X01NQVBfVFlQRV9H
VFQ7CisJCWJyZWFrOworCisJY2FzZSBJOTE1X01NQVBfT0ZGU0VUX1dDOgorCQlpZiAoIWJvb3Rf
Y3B1X2hhcyhYODZfRkVBVFVSRV9QQVQpKQorCQkJcmV0dXJuIC1FTk9ERVY7CisJCXR5cGUgPSBJ
OTE1X01NQVBfVFlQRV9XQzsKKwkJYnJlYWs7CisKKwljYXNlIEk5MTVfTU1BUF9PRkZTRVRfV0I6
CisJCXR5cGUgPSBJOTE1X01NQVBfVFlQRV9XQjsKKwkJYnJlYWs7CisKKwljYXNlIEk5MTVfTU1B
UF9PRkZTRVRfVUM6CisJCWlmICghYm9vdF9jcHVfaGFzKFg4Nl9GRUFUVVJFX1BBVCkpCisJCQly
ZXR1cm4gLUVOT0RFVjsKKwkJdHlwZSA9IEk5MTVfTU1BUF9UWVBFX1VDOworCQlicmVhazsKIAot
CXJldHVybiBpOTE1X2dlbV9tbWFwX2d0dChmaWxlLCBkZXYsIGFyZ3MtPmhhbmRsZSwgJmFyZ3Mt
Pm9mZnNldCk7CisJZGVmYXVsdDoKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCisJcmV0dXJuIF9f
YXNzaWduX2dlbV9vYmplY3RfbW1hcF9kYXRhKGZpbGUsIGFyZ3MtPmhhbmRsZSwgdHlwZSwKKwkJ
CQkJICAgICAmYXJncy0+b2Zmc2V0KTsKK30KKwordm9pZCBpOTE1X21tYXBfb2Zmc2V0X2Rlc3Ry
b3koc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1tbywgc3RydWN0IG11dGV4ICptdXRleCkKK3sK
Kwlkcm1fdm1hX29mZnNldF9yZW1vdmUobW1vLT5kZXYtPnZtYV9vZmZzZXRfbWFuYWdlciwgJm1t
by0+dm1hX25vZGUpOworCisJbXV0ZXhfbG9jayhtdXRleCk7CisJbGlzdF9kZWwoJm1tby0+b2Zm
c2V0KTsKKwltdXRleF91bmxvY2sobXV0ZXgpOworCisJa2ZyZWUobW1vKTsKK30KKworc3RhdGlj
IHZvaWQgaTkxNV9nZW1fdm1fb3BlbihzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSkKK3sKKwlz
dHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vID0gdm1hLT52bV9wcml2YXRlX2RhdGE7CisJc3Ry
dWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiA9IG1tby0+b2JqOworCisJR0VNX0JVR19PTigh
b2JqKTsKKwlpOTE1X2dlbV9vYmplY3RfZ2V0KG9iaik7Cit9CisKK3N0YXRpYyB2b2lkIGk5MTVf
Z2VtX3ZtX2Nsb3NlKHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hKQoreworCXN0cnVjdCBpOTE1
X21tYXBfb2Zmc2V0ICptbW8gPSB2bWEtPnZtX3ByaXZhdGVfZGF0YTsKKwlzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqID0gbW1vLT5vYmo7CisKKwlHRU1fQlVHX09OKCFvYmopOworCWk5
MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCB2bV9vcGVy
YXRpb25zX3N0cnVjdCBpOTE1X2dlbV9ndHRfdm1fb3BzID0geworCS5mYXVsdCA9IGk5MTVfZ2Vt
X2ZhdWx0LAorCS5vcGVuID0gaTkxNV9nZW1fdm1fb3BlbiwKKwkuY2xvc2UgPSBpOTE1X2dlbV92
bV9jbG9zZSwKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgdm1fb3BlcmF0aW9uc19zdHJ1Y3Qg
aTkxNV9nZW1fY3B1X3ZtX29wcyA9IHsKKwkuZmF1bHQgPSBpOTE1X2dlbV9mYXVsdF9jcHUsCisJ
Lm9wZW4gPSBpOTE1X2dlbV92bV9vcGVuLAorCS5jbG9zZSA9IGk5MTVfZ2VtX3ZtX2Nsb3NlLAor
fTsKKworLyoKKyAqIFRoaXMgb3ZlcmNvbWVzIHRoZSBsaW1pdGF0aW9uIGluIGRybV9nZW1fbW1h
cCdzIGFzc2lnbm1lbnQgb2YgYQorICogZHJtX2dlbV9vYmplY3QgYXMgdGhlIHZtYS0+dm1fcHJp
dmF0ZV9kYXRhLiBTaW5jZSB3ZSBuZWVkIHRvCisgKiBiZSBhYmxlIHRvIHJlc29sdmUgbXVsdGlw
bGUgbW1hcCBvZmZzZXRzIHdoaWNoIGNvdWxkIGJlIHRpZWQKKyAqIHRvIGEgc2luZ2xlIGdlbSBv
YmplY3QuCisgKi8KK2ludCBpOTE1X2dlbV9tbWFwKHN0cnVjdCBmaWxlICpmaWxwLCBzdHJ1Y3Qg
dm1fYXJlYV9zdHJ1Y3QgKnZtYSkKK3sKKwlzdHJ1Y3QgZHJtX3ZtYV9vZmZzZXRfbm9kZSAqbm9k
ZTsKKwlzdHJ1Y3QgZHJtX2ZpbGUgKnByaXYgPSBmaWxwLT5wcml2YXRlX2RhdGE7CisJc3RydWN0
IGRybV9kZXZpY2UgKmRldiA9IHByaXYtPm1pbm9yLT5kZXY7CisJc3RydWN0IGk5MTVfbW1hcF9v
ZmZzZXQgKm1tbyA9IE5VTEw7CisJc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmogPSBOVUxMOwor
CisJaWYgKGRybV9kZXZfaXNfdW5wbHVnZ2VkKGRldikpCisJCXJldHVybiAtRU5PREVWOworCisJ
ZHJtX3ZtYV9vZmZzZXRfbG9ja19sb29rdXAoZGV2LT52bWFfb2Zmc2V0X21hbmFnZXIpOworCW5v
ZGUgPSBkcm1fdm1hX29mZnNldF9leGFjdF9sb29rdXBfbG9ja2VkKGRldi0+dm1hX29mZnNldF9t
YW5hZ2VyLAorCQkJCQkJICB2bWEtPnZtX3Bnb2ZmLAorCQkJCQkJICB2bWFfcGFnZXModm1hKSk7
CisJaWYgKGxpa2VseShub2RlKSkgeworCQltbW8gPSBjb250YWluZXJfb2Yobm9kZSwgc3RydWN0
IGk5MTVfbW1hcF9vZmZzZXQsCisJCQkJICAgdm1hX25vZGUpOworCQkvKgorCQkgKiBJbiBvdXIg
ZGVwZW5kZW5jeSBjaGFpbiwgdGhlIGRybV92bWFfb2Zmc2V0X25vZGUKKwkJICogZGVwZW5kcyBv
biB0aGUgdmFsaWRpdHkgb2YgdGhlIG1tbywgd2hpY2ggZGVwZW5kcyBvbgorCQkgKiB0aGUgZ2Vt
IG9iamVjdC4gSG93ZXZlciB0aGUgb25seSByZWZlcmVuY2Ugd2UgaGF2ZQorCQkgKiBhdCB0aGlz
IHBvaW50IGlzIHRoZSBtbW8gKGFzIHRoZSBwYXJlbnQgb2YgdGhlIG5vZGUpLgorCQkgKiBUcnkg
dG8gY2hlY2sgaWYgdGhlIGdlbSBvYmplY3Qgd2FzIGF0IGxlYXN0IGNsZWFyZWQuCisJCSAqLwor
CQlpZiAoIW1tbyB8fCAhbW1vLT5vYmopIHsKKwkJCWRybV92bWFfb2Zmc2V0X3VubG9ja19sb29r
dXAoZGV2LT52bWFfb2Zmc2V0X21hbmFnZXIpOworCQkJcmV0dXJuIC1FSU5WQUw7CisJCX0KKwkJ
LyoKKwkJICogU2tpcCAwLXJlZmNudGVkIG9iamVjdHMgYXMgaXQgaXMgaW4gdGhlIHByb2Nlc3Mg
b2YgYmVpbmcKKwkJICogZGVzdHJveWVkIGFuZCB3aWxsIGJlIGludmFsaWQgd2hlbiB0aGUgdm1h
IG1hbmFnZXIgbG9jaworCQkgKiBpcyByZWxlYXNlZC4KKwkJICovCisJCW9iaiA9ICZtbW8tPm9i
ai0+YmFzZTsKKwkJaWYgKCFrcmVmX2dldF91bmxlc3NfemVybygmb2JqLT5yZWZjb3VudCkpCisJ
CQlvYmogPSBOVUxMOworCX0KKwlkcm1fdm1hX29mZnNldF91bmxvY2tfbG9va3VwKGRldi0+dm1h
X29mZnNldF9tYW5hZ2VyKTsKKwlpZiAoIW9iaikKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAo
IWRybV92bWFfbm9kZV9pc19hbGxvd2VkKG5vZGUsIHByaXYpKSB7CisJCWRybV9nZW1fb2JqZWN0
X3B1dF91bmxvY2tlZChvYmopOworCQlyZXR1cm4gLUVBQ0NFUzsKKwl9CisKKwlpZiAoaTkxNV9n
ZW1fb2JqZWN0X2lzX3JlYWRvbmx5KHRvX2ludGVsX2JvKG9iaikpKSB7CisJCWlmICh2bWEtPnZt
X2ZsYWdzICYgVk1fV1JJVEUpIHsKKwkJCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZChvYmop
OworCQkJcmV0dXJuIC1FSU5WQUw7CisJCX0KKwkJdm1hLT52bV9mbGFncyAmPSB+Vk1fTUFZV1JJ
VEU7CisJfQorCisJdm1hLT52bV9mbGFncyB8PSBWTV9QRk5NQVAgfCBWTV9ET05URVhQQU5EIHwg
Vk1fRE9OVERVTVA7CisJdm1hLT52bV9wcml2YXRlX2RhdGEgPSBtbW87CisKKwlzd2l0Y2ggKG1t
by0+bW1hcF90eXBlKSB7CisJY2FzZSBJOTE1X01NQVBfVFlQRV9XQzoKKwkJdm1hLT52bV9wYWdl
X3Byb3QgPQorCQkJcGdwcm90X3dyaXRlY29tYmluZSh2bV9nZXRfcGFnZV9wcm90KHZtYS0+dm1f
ZmxhZ3MpKTsKKwkJdm1hLT52bV9vcHMgPSAmaTkxNV9nZW1fY3B1X3ZtX29wczsKKwkJYnJlYWs7
CisKKwljYXNlIEk5MTVfTU1BUF9UWVBFX1dCOgorCQl2bWEtPnZtX3BhZ2VfcHJvdCA9IHZtX2dl
dF9wYWdlX3Byb3Qodm1hLT52bV9mbGFncyk7CisJCXZtYS0+dm1fb3BzID0gJmk5MTVfZ2VtX2Nw
dV92bV9vcHM7CisJCWJyZWFrOworCisJY2FzZSBJOTE1X01NQVBfVFlQRV9VQzoKKwkJdm1hLT52
bV9wYWdlX3Byb3QgPQorCQkJcGdwcm90X25vbmNhY2hlZCh2bV9nZXRfcGFnZV9wcm90KHZtYS0+
dm1fZmxhZ3MpKTsKKwkJdm1hLT52bV9vcHMgPSAmaTkxNV9nZW1fY3B1X3ZtX29wczsKKwkJYnJl
YWs7CisKKwljYXNlIEk5MTVfTU1BUF9UWVBFX0dUVDoKKwkJdm1hLT52bV9wYWdlX3Byb3QgPQor
CQkJcGdwcm90X3dyaXRlY29tYmluZSh2bV9nZXRfcGFnZV9wcm90KHZtYS0+dm1fZmxhZ3MpKTsK
KwkJdm1hLT52bV9vcHMgPSAmaTkxNV9nZW1fZ3R0X3ZtX29wczsKKwkJYnJlYWs7CisJfQorCXZt
YS0+dm1fcGFnZV9wcm90ID0gcGdwcm90X2RlY3J5cHRlZCh2bWEtPnZtX3BhZ2VfcHJvdCk7CisK
KwlyZXR1cm4gMDsKIH0KIAogI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9JOTE1X1NFTEZURVNU
KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX21tYW4uaCBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmgKbmV3IGZpbGUgbW9kZSAx
MDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi43ODcxM2UxNDkyNmEKLS0tIC9kZXYvbnVsbAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5oCkBAIC0wLDAgKzEsMzQg
QEAKKy8qCisgKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCisgKgorICogQ29weXJpZ2h0
IMKpIDIwMTkgSW50ZWwgQ29ycG9yYXRpb24KKyAqLworCisjaWZuZGVmIF9fSTkxNV9HRU1fTU1B
Tl9IX18KKyNkZWZpbmUgX19JOTE1X0dFTV9NTUFOX0hfXworCisjaW5jbHVkZSA8bGludXgvbW1f
dHlwZXMuaD4KKyNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgorCitzdHJ1Y3QgZHJtX2RldmljZTsK
K3N0cnVjdCBkcm1fZmlsZTsKK3N0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0Oworc3RydWN0IGZp
bGU7CitzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldDsKK3N0cnVjdCBtdXRleDsKKworaW50IGk5MTVf
Z2VtX21tYXBfZ3R0X3ZlcnNpb24odm9pZCk7CitpbnQgaTkxNV9nZW1fbW1hcChzdHJ1Y3QgZmls
ZSAqZmlscCwgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpOworaW50IGk5MTVfZ2VtX21tYXBf
ZHVtYihzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwgc3RydWN0IGRybV9kZXZpY2UgKmRldiwK
KwkJICAgICAgIHUzMiBoYW5kbGUsIHU2NCAqb2Zmc2V0KTsKKwordm1fZmF1bHRfdCBpOTE1X2dl
bV9mYXVsdChzdHJ1Y3Qgdm1fZmF1bHQgKnZtZik7CisKK3ZvaWQgX19pOTE1X2dlbV9vYmplY3Rf
cmVsZWFzZV9tbWFwX2d0dChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsKK3ZvaWQg
aTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAq
b2JqKTsKK3ZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcF9vZmZzZXQoc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iaik7CisKK3ZvaWQgaTkxNV9tbWFwX29mZnNldF9kZXN0cm95
KHN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICptbW8sCisJCQkgICAgICBzdHJ1Y3QgbXV0ZXggKm11
dGV4KTsKKworI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fb2JqZWN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0
LmMKaW5kZXggNDU4OTQ1ZTE4MjNlLi5mMWI4N2E4Mzk5MjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMKQEAgLTI5LDYgKzI5LDcgQEAKICNpbmNsdWRlICJp
OTE1X2Rydi5oIgogI2luY2x1ZGUgImk5MTVfZ2VtX2NsZmx1c2guaCIKICNpbmNsdWRlICJpOTE1
X2dlbV9jb250ZXh0LmgiCisjaW5jbHVkZSAiaTkxNV9nZW1fbW1hbi5oIgogI2luY2x1ZGUgImk5
MTVfZ2VtX29iamVjdC5oIgogI2luY2x1ZGUgImk5MTVfZ2xvYmFscy5oIgogI2luY2x1ZGUgImk5
MTVfdHJhY2UuaCIKQEAgLTYxLDYgKzYyLDkgQEAgdm9pZCBpOTE1X2dlbV9vYmplY3RfaW5pdChz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCiAJSU5JVF9MSVNUX0hFQUQoJm9iai0+
bHV0X2xpc3QpOwogCisJbXV0ZXhfaW5pdCgmb2JqLT5tbW9fbG9jayk7CisJSU5JVF9MSVNUX0hF
QUQoJm9iai0+bW1hcF9vZmZzZXRzKTsKKwogCWluaXRfcmN1X2hlYWQoJm9iai0+cmN1KTsKIAog
CW9iai0+b3BzID0gb3BzOwpAQCAtOTcsNiArMTAxLDcgQEAgdm9pZCBpOTE1X2dlbV9jbG9zZV9v
YmplY3Qoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpnZW0sIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkK
IAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0gdG9faW50ZWxfYm8oZ2VtKTsKIAlz
dHJ1Y3QgZHJtX2k5MTVfZmlsZV9wcml2YXRlICpmcHJpdiA9IGZpbGUtPmRyaXZlcl9wcml2Owog
CXN0cnVjdCBpOTE1X2x1dF9oYW5kbGUgKmx1dCwgKmxuOworCXN0cnVjdCBpOTE1X21tYXBfb2Zm
c2V0ICptbW8sICpvbjsKIAlMSVNUX0hFQUQoY2xvc2UpOwogCiAJaTkxNV9nZW1fb2JqZWN0X2xv
Y2sob2JqKTsKQEAgLTExMSw2ICsxMTYsOSBAQCB2b2lkIGk5MTVfZ2VtX2Nsb3NlX29iamVjdChz
dHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdlbSwgc3RydWN0IGRybV9maWxlICpmaWxlKQogCX0KIAlp
OTE1X2dlbV9vYmplY3RfdW5sb2NrKG9iaik7CiAKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUo
bW1vLCBvbiwgJm9iai0+bW1hcF9vZmZzZXRzLCBvZmZzZXQpCisJCWRybV92bWFfbm9kZV9yZXZv
a2UoJm1tby0+dm1hX25vZGUsIGZpbGUpOworCiAJbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKGx1
dCwgbG4sICZjbG9zZSwgb2JqX2xpbmspIHsKIAkJc3RydWN0IGk5MTVfZ2VtX2NvbnRleHQgKmN0
eCA9IGx1dC0+Y3R4OwogCQlzdHJ1Y3QgaTkxNV92bWEgKnZtYTsKQEAgLTE1OCw2ICsxNjYsOCBA
QCBzdGF0aWMgdm9pZCBfX2k5MTVfZ2VtX2ZyZWVfb2JqZWN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJp
dmF0ZSAqaTkxNSwKIAogCXdha2VyZWYgPSBpbnRlbF9ydW50aW1lX3BtX2dldCgmaTkxNS0+cnVu
dGltZV9wbSk7CiAJbGxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShvYmosIG9uLCBmcmVlZCwgZnJl
ZWQpIHsKKwkJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1tbywgKm1uOworCiAJCXRyYWNlX2k5
MTVfZ2VtX29iamVjdF9kZXN0cm95KG9iaik7CiAKIAkJaWYgKCFsaXN0X2VtcHR5KCZvYmotPnZt
YS5saXN0KSkgewpAQCAtMTgzLDYgKzE5MywxNCBAQCBzdGF0aWMgdm9pZCBfX2k5MTVfZ2VtX2Zy
ZWVfb2JqZWN0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKIAkJCXNwaW5fdW5sb2Nr
KCZvYmotPnZtYS5sb2NrKTsKIAkJfQogCisJCWk5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXAo
b2JqKTsKKworCQlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUobW1vLCBtbiwgJm9iai0+bW1hcF9v
ZmZzZXRzLCBvZmZzZXQpIHsKKwkJCW1tby0+b2JqID0gTlVMTDsKKwkJCWk5MTVfbW1hcF9vZmZz
ZXRfZGVzdHJveShtbW8sICZvYmotPm1tb19sb2NrKTsKKwkJfQorCisJCUdFTV9CVUdfT04oIWxp
c3RfZW1wdHkoJm9iai0+bW1hcF9vZmZzZXRzKSk7CiAJCUdFTV9CVUdfT04oYXRvbWljX3JlYWQo
Jm9iai0+YmluZF9jb3VudCkpOwogCQlHRU1fQlVHX09OKG9iai0+dXNlcmZhdWx0X2NvdW50KTsK
IAkJR0VNX0JVR19PTighbGlzdF9lbXB0eSgmb2JqLT5sdXRfbGlzdCkpOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oCmluZGV4IGU1NzUwZDUwNmNjOS4uYTFlYjdj
MGIyM2FjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2Jq
ZWN0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oCkBA
IC0xMzIsMTMgKzEzMiwxMyBAQCB2b2lkIGk5MTVfZ2VtX29iamVjdF91bmxvY2tfZmVuY2Uoc3Ry
dWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIHN0YXRpYyBpbmxpbmUgdm9pZAogaTkxNV9n
ZW1fb2JqZWN0X3NldF9yZWFkb25seShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQog
ewotCW9iai0+YmFzZS52bWFfbm9kZS5yZWFkb25seSA9IHRydWU7CisJb2JqLT5mbGFncyB8PSBJ
OTE1X0JPX1JFQURPTkxZOwogfQogCiBzdGF0aWMgaW5saW5lIGJvb2wKIGk5MTVfZ2VtX29iamVj
dF9pc19yZWFkb25seShjb25zdCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogewot
CXJldHVybiBvYmotPmJhc2Uudm1hX25vZGUucmVhZG9ubHk7CisJcmV0dXJuIG9iai0+ZmxhZ3Mg
JiBJOTE1X0JPX1JFQURPTkxZOwogfQogCiBzdGF0aWMgaW5saW5lIGJvb2wKQEAgLTM4Nyw5ICsz
ODcsNiBAQCBzdGF0aWMgaW5saW5lIHZvaWQgaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogCWk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdl
cyhvYmopOwogfQogCi12b2lkIF9faTkxNV9nZW1fb2JqZWN0X3JlbGVhc2VfbW1hcChzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsKLXZvaWQgaTkxNV9nZW1fb2JqZWN0X3JlbGVhc2Vf
bW1hcChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsKLQogdm9pZAogaTkxNV9nZW1f
b2JqZWN0X2ZsdXNoX3dyaXRlX2RvbWFpbihzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2Jq
LAogCQkJCSAgIHVuc2lnbmVkIGludCBmbHVzaF9kb21haW5zKTsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfdHlwZXMuaCBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3RfdHlwZXMuaAppbmRleCAxNWY4Mjk3ZGMzNGUu
LmMwYmViOTdiNTZkMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX29iamVjdF90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9vYmplY3RfdHlwZXMuaApAQCAtNjMsNiArNjMsMjMgQEAgc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3Rfb3BzIHsKIAl2b2lkICgqcmVsZWFzZSkoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Qg
Km9iaik7CiB9OwogCitlbnVtIGk5MTVfbW1hcF90eXBlIHsKKwlJOTE1X01NQVBfVFlQRV9HVFQg
PSAwLAorCUk5MTVfTU1BUF9UWVBFX1dDLAorCUk5MTVfTU1BUF9UWVBFX1dCLAorCUk5MTVfTU1B
UF9UWVBFX1VDLAorfTsKKworc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgeworCXN0cnVjdCBkcm1f
ZGV2aWNlICpkZXY7CisJc3RydWN0IGRybV92bWFfb2Zmc2V0X25vZGUgdm1hX25vZGU7CisJc3Ry
dWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKKwlzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGU7CisJ
ZW51bSBpOTE1X21tYXBfdHlwZSBtbWFwX3R5cGU7CisKKwlzdHJ1Y3QgbGlzdF9oZWFkIG9mZnNl
dDsKK307CisKIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0IHsKIAlzdHJ1Y3QgZHJtX2dlbV9v
YmplY3QgYmFzZTsKIApAQCAtMTE4LDEyICsxMzUsMTcgQEAgc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3QgewogCXVuc2lnbmVkIGludCB1c2VyZmF1bHRfY291bnQ7CiAJc3RydWN0IGxpc3RfaGVh
ZCB1c2VyZmF1bHRfbGluazsKIAorCS8qIFByb3RlY3RzIGFjY2VzcyB0byBtbWFwIG9mZnNldHMg
Ki8KKwlzdHJ1Y3QgbXV0ZXggbW1vX2xvY2s7CisJc3RydWN0IGxpc3RfaGVhZCBtbWFwX29mZnNl
dHM7CisKIAlJOTE1X1NFTEZURVNUX0RFQ0xBUkUoc3RydWN0IGxpc3RfaGVhZCBzdF9saW5rKTsK
IAogCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CiAjZGVmaW5lIEk5MTVfQk9fQUxMT0NfQ09OVElHVU9V
UyBCSVQoMCkKICNkZWZpbmUgSTkxNV9CT19BTExPQ19WT0xBVElMRSAgIEJJVCgxKQogI2RlZmlu
ZSBJOTE1X0JPX0FMTE9DX0ZMQUdTIChJOTE1X0JPX0FMTE9DX0NPTlRJR1VPVVMgfCBJOTE1X0JP
X0FMTE9DX1ZPTEFUSUxFKQorI2RlZmluZSBJOTE1X0JPX1JFQURPTkxZICAgICAgICAgQklUKDIp
CiAKIAkvKgogCSAqIElzIHRoZSBvYmplY3QgdG8gYmUgbWFwcGVkIGFzIHJlYWQtb25seSB0byB0
aGUgR1BVCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGFn
ZXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jCmluZGV4IGY0
MDJjMmM0MTVjMi4uNzUxOTdjYTY5NmE4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fcGFnZXMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fcGFnZXMuYwpAQCAtOCw2ICs4LDcgQEAKICNpbmNsdWRlICJpOTE1X2dlbV9vYmplY3Qu
aCIKICNpbmNsdWRlICJpOTE1X3NjYXR0ZXJsaXN0LmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1fbG1l
bS5oIgorI2luY2x1ZGUgImk5MTVfZ2VtX21tYW4uaCIKIAogdm9pZCBfX2k5MTVfZ2VtX29iamVj
dF9zZXRfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJCQkgc3RydWN0
IHNnX3RhYmxlICpwYWdlcywKQEAgLTIwNyw2ICsyMDgsOCBAQCBpbnQgX19pOTE1X2dlbV9vYmpl
Y3RfcHV0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAJCWdvdG8gdW5s
b2NrOwogCX0KIAorCWk5MTVfZ2VtX29iamVjdF9yZWxlYXNlX21tYXBfb2Zmc2V0KG9iaik7CisK
IAkvKgogCSAqIC0+cHV0X3BhZ2VzIG1pZ2h0IG5lZWQgdG8gYWxsb2NhdGUgbWVtb3J5IGZvciB0
aGUgYml0MTcgc3dpenpsZQogCSAqIGFycmF5LCBoZW5jZSBwcm90ZWN0IHRoZW0gZnJvbSBiZWlu
ZyByZWFwZWQgYnkgcmVtb3ZpbmcgdGhlbSBmcm9tIGd0dApkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3RpbGluZy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX3RpbGluZy5jCmluZGV4IDFmYTU5MmQ4MmFmNS4uNmM3ODI1YTJkYzJhIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdGlsaW5nLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3RpbGluZy5jCkBAIC0xMSw2ICsx
MSw3IEBACiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJpOTE1X2dlbS5oIgogI2lu
Y2x1ZGUgImk5MTVfZ2VtX2lvY3Rscy5oIgorI2luY2x1ZGUgImk5MTVfZ2VtX21tYW4uaCIKICNp
bmNsdWRlICJpOTE1X2dlbV9vYmplY3QuaCIKIAogLyoqCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1hbi5jCmluZGV4IDZjZTkxNjdmOGM5Zi4u
NWVkNTZkNzJlOTU5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL2k5MTVfZ2VtX21tYW4uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL2k5MTVfZ2VtX21tYW4uYwpAQCAtNTY1LDE2ICs1NjUsMTYgQEAgc3RhdGljIGJvb2wgYXNz
ZXJ0X21tYXBfb2Zmc2V0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCQkJICAgICAg
IGludCBleHBlY3RlZCkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwotCWlu
dCBlcnI7CisJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQgKm1tbzsKIAogCW9iaiA9IGk5MTVfZ2Vt
X29iamVjdF9jcmVhdGVfaW50ZXJuYWwoaTkxNSwgc2l6ZSk7CiAJaWYgKElTX0VSUihvYmopKQog
CQlyZXR1cm4gUFRSX0VSUihvYmopOwogCi0JZXJyID0gY3JlYXRlX21tYXBfb2Zmc2V0KG9iaik7
CisJbW1vID0gbW1hcF9vZmZzZXRfY3JlYXRlKG9iaiwgSTkxNV9NTUFQX09GRlNFVF9HVFQsIE5V
TEwpOwogCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKIAotCXJldHVybiBlcnIgPT0gZXhwZWN0
ZWQ7CisJcmV0dXJuIFBUUl9FUlJfT1JfWkVSTyhtbW8pID09IGV4cGVjdGVkOwogfQogCiBzdGF0
aWMgdm9pZCBkaXNhYmxlX3JldGlyZV93b3JrZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5
MTUpCkBAIC02MDksNiArNjA5LDggQEAgc3RhdGljIGludCBpZ3RfbW1hcF9vZmZzZXRfZXhoYXVz
dGlvbih2b2lkICphcmcpCiAJc3RydWN0IGRybV9tbSAqbW0gPSAmaTkxNS0+ZHJtLnZtYV9vZmZz
ZXRfbWFuYWdlci0+dm1fYWRkcl9zcGFjZV9tbTsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqOwogCXN0cnVjdCBkcm1fbW1fbm9kZSAqaG9sZSwgKm5leHQ7CisJLyogT3duZXJzaGlw
IHRyYW5zZmVycmVkIHRvIHBhcmVudCBnZW0gb2JqZWN0IGluIGNyZWF0ZV9tbWFwX29mZnNldCAq
LworCXN0cnVjdCBpOTE1X21tYXBfb2Zmc2V0ICptbW87CiAJaW50IGxvb3AsIGVycjsKIAogCS8q
IERpc2FibGUgYmFja2dyb3VuZCByZWFwZXIgKi8KQEAgLTY3Myw5ICs2NzUsMTAgQEAgc3RhdGlj
IGludCBpZ3RfbW1hcF9vZmZzZXRfZXhoYXVzdGlvbih2b2lkICphcmcpCiAJCWdvdG8gb3V0Owog
CX0KIAotCWVyciA9IGNyZWF0ZV9tbWFwX29mZnNldChvYmopOwotCWlmIChlcnIpIHsKKwltbW8g
PSBtbWFwX29mZnNldF9jcmVhdGUob2JqLCBJOTE1X01NQVBfT0ZGU0VUX0dUVCwgTlVMTCk7CisJ
aWYgKElTX0VSUihtbW8pKSB7CiAJCXByX2VycigiVW5hYmxlIHRvIGluc2VydCBvYmplY3QgaW50
byByZWNsYWltZWQgaG9sZVxuIik7CisJCWVyciA9IFBUUl9FUlIobW1vKTsKIAkJZ290byBlcnJf
b2JqOwogCX0KIApAQCAtNzI0LDEwICs3MjcsMTEgQEAgc3RhdGljIGludCBpZ3RfbW1hcF9vZmZz
ZXRfZXhoYXVzdGlvbih2b2lkICphcmcpCiB9CiAKICNkZWZpbmUgZXhwYW5kMzIoeCkgKCgoeCkg
PDwgMCkgfCAoKHgpIDw8IDgpIHwgKCh4KSA8PCAxNikgfCAoKHgpIDw8IDI0KSkKLXN0YXRpYyBp
bnQgaWd0X21tYXBfZ3R0KHZvaWQgKmFyZykKK3N0YXRpYyBpbnQgaWd0X21tYXAodm9pZCAqYXJn
LCBlbnVtIGk5MTVfbW1hcF90eXBlIHR5cGUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUgPSBhcmc7CiAJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKKwlzdHJ1Y3Qg
aTkxNV9tbWFwX29mZnNldCAqbW1vOwogCXN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqYXJlYTsKIAl1
bnNpZ25lZCBsb25nIGFkZHI7CiAJdm9pZCAqdmFkZHI7CkBAIC03NDksMTggKzc1MywxOSBAQCBz
dGF0aWMgaW50IGlndF9tbWFwX2d0dCh2b2lkICphcmcpCiAJaTkxNV9nZW1fb2JqZWN0X2ZsdXNo
X21hcChvYmopOwogCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAob2JqKTsKIAotCWVyciA9IGNy
ZWF0ZV9tbWFwX29mZnNldChvYmopOwotCWlmIChlcnIpCisJbW1vID0gbW1hcF9vZmZzZXRfY3Jl
YXRlKG9iaiwgdHlwZSwgTlVMTCk7CisJaWYgKElTX0VSUihtbW8pKSB7CisJCWVyciA9IFBUUl9F
UlIobW1vKTsKIAkJZ290byBvdXQ7CisJfQogCi0JYWRkciA9IGlndF9tbWFwX25vZGUoaTkxNSwg
Jm9iai0+YmFzZS52bWFfbm9kZSwKLQkJCSAgICAgMCwgUFJPVF9XUklURSwgTUFQX1NIQVJFRCk7
CisJYWRkciA9IGlndF9tbWFwX25vZGUoaTkxNSwgJm1tby0+dm1hX25vZGUsIDAsIFBST1RfV1JJ
VEUsIE1BUF9TSEFSRUQpOwogCWlmIChJU19FUlJfVkFMVUUoYWRkcikpIHsKIAkJZXJyID0gYWRk
cjsKIAkJZ290byBvdXQ7CiAJfQogCi0JcHJfZGVidWcoImlndF9tbWFwKG9iajpndHQpIEAgJWx4
XG4iLCBhZGRyKTsKKwlwcl9kZWJ1ZygiaWd0X21tYXAoKSBAICVseFxuIiwgYWRkcik7CiAKIAlh
cmVhID0gZmluZF92bWEoY3VycmVudC0+bW0sIGFkZHIpOwogCWlmICghYXJlYSkgewpAQCAtNzY5
LDggKzc3NCw4IEBAIHN0YXRpYyBpbnQgaWd0X21tYXBfZ3R0KHZvaWQgKmFyZykKIAkJZ290byBv
dXRfdW5tYXA7CiAJfQogCi0JaWYgKGFyZWEtPnZtX3ByaXZhdGVfZGF0YSAhPSBvYmopIHsKLQkJ
cHJfZXJyKCJ2bV9hcmVhX3N0cnVjdCBkaWQgbm90IHBvaW50IGJhY2sgdG8gb3VyIG9iamVjdCFc
biIpOworCWlmIChhcmVhLT52bV9wcml2YXRlX2RhdGEgIT0gbW1vKSB7CisJCXByX2Vycigidm1f
YXJlYV9zdHJ1Y3QgZGlkIG5vdCBwb2ludCBiYWNrIHRvIG91ciBtbWFwX29mZnNldCBvYmplY3Qh
XG4iKTsKIAkJZXJyID0gLUVJTlZBTDsKIAkJZ290byBvdXRfdW5tYXA7CiAJfQpAQCAtNzgwLDE0
ICs3ODUsMTQgQEAgc3RhdGljIGludCBpZ3RfbW1hcF9ndHQodm9pZCAqYXJnKQogCQl1MzIgeDsK
IAogCQlpZiAoZ2V0X3VzZXIoeCwgdXgpKSB7Ci0JCQlwcl9lcnIoIlVuYWJsZSB0byByZWFkIGZy
b20gR1RUIG1tYXAsIG9mZnNldDolemRcbiIsCisJCQlwcl9lcnIoIlVuYWJsZSB0byByZWFkIGZy
b20gbW1hcCwgb2Zmc2V0OiV6ZFxuIiwKIAkJCSAgICAgICBpICogc2l6ZW9mKHgpKTsKIAkJCWVy
ciA9IC1FRkFVTFQ7CiAJCQlicmVhazsKIAkJfQogCiAJCWlmICh4ICE9IGV4cGFuZDMyKFBPSVNP
Tl9JTlVTRSkpIHsKLQkJCXByX2VycigiUmVhZCBpbmNvcnJlY3QgdmFsdWUgZnJvbSBHVFQgbW1h
cCwgb2Zmc2V0OiV6ZCwgZm91bmQ6JXgsIGV4cGVjdGVkOiV4XG4iLAorCQkJcHJfZXJyKCJSZWFk
IGluY29ycmVjdCB2YWx1ZSBmcm9tIG1tYXAsIG9mZnNldDolemQsIGZvdW5kOiV4LCBleHBlY3Rl
ZDoleFxuIiwKIAkJCSAgICAgICBpICogc2l6ZW9mKHgpLCB4LCBleHBhbmQzMihQT0lTT05fSU5V
U0UpKTsKIAkJCWVyciA9IC1FSU5WQUw7CiAJCQlicmVhazsKQEAgLTc5NSw3ICs4MDAsNyBAQCBz
dGF0aWMgaW50IGlndF9tbWFwX2d0dCh2b2lkICphcmcpCiAKIAkJeCA9IGV4cGFuZDMyKFBPSVNP
Tl9GUkVFKTsKIAkJaWYgKHB1dF91c2VyKHgsIHV4KSkgewotCQkJcHJfZXJyKCJVbmFibGUgdG8g
d3JpdGUgdG8gR1RUIG1tYXAsIG9mZnNldDolemRcbiIsCisJCQlwcl9lcnIoIlVuYWJsZSB0byB3
cml0ZSB0byBtbWFwLCBvZmZzZXQ6JXpkXG4iLAogCQkJICAgICAgIGkgKiBzaXplb2YoeCkpOwog
CQkJZXJyID0gLUVGQVVMVDsKIAkJCWJyZWFrOwpAQCAtODExLDcgKzgxNiw3IEBAIHN0YXRpYyBp
bnQgaWd0X21tYXBfZ3R0KHZvaWQgKmFyZykKIAkJZ290byBvdXQ7CiAJfQogCWlmIChlcnIgPT0g
MCAmJiBtZW1jaHJfaW52KHZhZGRyLCBQT0lTT05fRlJFRSwgUEFHRV9TSVpFKSkgewotCQlwcl9l
cnIoIldyaXRlIHZpYSBHR1RUIG1tYXAgZGlkIG5vdCBsYW5kIGluIGJhY2tpbmcgc3RvcmVcbiIp
OworCQlwcl9lcnIoIldyaXRlIHZpYSBtbWFwIGRpZCBub3QgbGFuZCBpbiBiYWNraW5nIHN0b3Jl
XG4iKTsKIAkJZXJyID0gLUVJTlZBTDsKIAl9CiAJaTkxNV9nZW1fb2JqZWN0X3VucGluX21hcChv
YmopOwpAQCAtODIxLDYgKzgyNiwxNiBAQCBzdGF0aWMgaW50IGlndF9tbWFwX2d0dCh2b2lkICph
cmcpCiAJcmV0dXJuIGVycjsKIH0KIAorc3RhdGljIGludCBpZ3RfbW1hcF9ndHQodm9pZCAqYXJn
KQoreworCXJldHVybiBpZ3RfbW1hcChhcmcsIEk5MTVfTU1BUF9UWVBFX0dUVCk7Cit9CisKK3N0
YXRpYyBpbnQgaWd0X21tYXBfY3B1KHZvaWQgKmFyZykKK3sKKwlyZXR1cm4gaWd0X21tYXAoYXJn
LCBJOTE1X01NQVBfVFlQRV9XQyk7Cit9CisKIHN0YXRpYyBpbnQgY2hlY2tfcHJlc2VudF9wdGUo
cHRlX3QgKnB0ZSwgdW5zaWduZWQgbG9uZyBhZGRyLCB2b2lkICpkYXRhKQogewogCWlmICghcHRl
X3ByZXNlbnQoKnB0ZSkgfHwgcHRlX25vbmUoKnB0ZSkpIHsKQEAgLTg3MywxMCArODg4LDExIEBA
IHN0YXRpYyBpbnQgcHJlZmF1bHRfcmFuZ2UodTY0IHN0YXJ0LCB1NjQgbGVuKQogCXJldHVybiBf
X2dldF91c2VyKGMsIGVuZCAtIDEpOwogfQogCi1zdGF0aWMgaW50IGlndF9tbWFwX2d0dF9yZXZv
a2Uodm9pZCAqYXJnKQorc3RhdGljIGludCBpZ3RfbW1hcF9yZXZva2Uodm9pZCAqYXJnLCBlbnVt
IGk5MTVfbW1hcF90eXBlIHR5cGUpCiB7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUg
PSBhcmc7CiAJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKKwlzdHJ1Y3QgaTkxNV9t
bWFwX29mZnNldCAqbW1vOwogCXVuc2lnbmVkIGxvbmcgYWRkcjsKIAlpbnQgZXJyOwogCkBAIC04
ODcsMTIgKzkwMywxMyBAQCBzdGF0aWMgaW50IGlndF9tbWFwX2d0dF9yZXZva2Uodm9pZCAqYXJn
KQogCWlmIChJU19FUlIob2JqKSkKIAkJcmV0dXJuIFBUUl9FUlIob2JqKTsKIAotCWVyciA9IGNy
ZWF0ZV9tbWFwX29mZnNldChvYmopOwotCWlmIChlcnIpCisJbW1vID0gbW1hcF9vZmZzZXRfY3Jl
YXRlKG9iaiwgdHlwZSwgTlVMTCk7CisJaWYgKElTX0VSUihtbW8pKSB7CisJCWVyciA9IFBUUl9F
UlIobW1vKTsKIAkJZ290byBvdXQ7CisJfQogCi0JYWRkciA9IGlndF9tbWFwX25vZGUoaTkxNSwg
Jm9iai0+YmFzZS52bWFfbm9kZSwKLQkJCSAgICAgMCwgUFJPVF9XUklURSwgTUFQX1NIQVJFRCk7
CisJYWRkciA9IGlndF9tbWFwX25vZGUoaTkxNSwgJm1tby0+dm1hX25vZGUsIDAsIFBST1RfV1JJ
VEUsIE1BUF9TSEFSRUQpOwogCWlmIChJU19FUlJfVkFMVUUoYWRkcikpIHsKIAkJZXJyID0gYWRk
cjsKIAkJZ290byBvdXQ7CkBAIC05MDIsNyArOTE5LDggQEAgc3RhdGljIGludCBpZ3RfbW1hcF9n
dHRfcmV2b2tlKHZvaWQgKmFyZykKIAlpZiAoZXJyKQogCQlnb3RvIG91dF91bm1hcDsKIAotCUdF
TV9CVUdfT04oIWF0b21pY19yZWFkKCZvYmotPmJpbmRfY291bnQpKTsKKwlHRU1fQlVHX09OKG1t
by0+bW1hcF90eXBlID09IEk5MTVfTU1BUF9UWVBFX0dUVCAmJgorCQkgICAhYXRvbWljX3JlYWQo
Jm9iai0+YmluZF9jb3VudCkpOwogCiAJZXJyID0gY2hlY2tfcHJlc2VudChhZGRyLCBvYmotPmJh
c2Uuc2l6ZSk7CiAJaWYgKGVycikKQEAgLTkyMCw2ICs5MzgsMTUgQEAgc3RhdGljIGludCBpZ3Rf
bW1hcF9ndHRfcmV2b2tlKHZvaWQgKmFyZykKIAl9CiAJR0VNX0JVR19PTihhdG9taWNfcmVhZCgm
b2JqLT5iaW5kX2NvdW50KSk7CiAKKwlpZiAodHlwZSAhPSBJOTE1X01NQVBfVFlQRV9HVFQpIHsK
KwkJX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKG9iaik7CisJCWlmIChpOTE1X2dlbV9vYmpl
Y3RfaGFzX3BhZ2VzKG9iaikpIHsKKwkJCXByX2VycigiRmFpbGVkIHRvIHB1dC1wYWdlcyBvYmpl
Y3QhXG4iKTsKKwkJCWVyciA9IC1FSU5WQUw7CisJCQlnb3RvIG91dF91bm1hcDsKKwkJfQorCX0K
KwogCWVyciA9IGNoZWNrX2Fic2VudChhZGRyLCBvYmotPmJhc2Uuc2l6ZSk7CiAJaWYgKGVycikK
IAkJZ290byBvdXRfdW5tYXA7CkBAIC05MzEsNiArOTU4LDE2IEBAIHN0YXRpYyBpbnQgaWd0X21t
YXBfZ3R0X3Jldm9rZSh2b2lkICphcmcpCiAJcmV0dXJuIGVycjsKIH0KIAorc3RhdGljIGludCBp
Z3RfbW1hcF9ndHRfcmV2b2tlKHZvaWQgKmFyZykKK3sKKwlyZXR1cm4gaWd0X21tYXBfcmV2b2tl
KGFyZywgSTkxNV9NTUFQX1RZUEVfR1RUKTsKK30KKworc3RhdGljIGludCBpZ3RfbW1hcF9jcHVf
cmV2b2tlKHZvaWQgKmFyZykKK3sKKwlyZXR1cm4gaWd0X21tYXBfcmV2b2tlKGFyZywgSTkxNV9N
TUFQX1RZUEVfV0MpOworfQorCiBpbnQgaTkxNV9nZW1fbW1hbl9saXZlX3NlbGZ0ZXN0cyhzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsKIAlzdGF0aWMgY29uc3Qgc3RydWN0IGk5MTVf
c3VidGVzdCB0ZXN0c1tdID0gewpAQCAtOTM4LDcgKzk3NSw5IEBAIGludCBpOTE1X2dlbV9tbWFu
X2xpdmVfc2VsZnRlc3RzKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KQogCQlTVUJURVNU
KGlndF9zbW9rZV90aWxpbmcpLAogCQlTVUJURVNUKGlndF9tbWFwX29mZnNldF9leGhhdXN0aW9u
KSwKIAkJU1VCVEVTVChpZ3RfbW1hcF9ndHQpLAorCQlTVUJURVNUKGlndF9tbWFwX2NwdSksCiAJ
CVNVQlRFU1QoaWd0X21tYXBfZ3R0X3Jldm9rZSksCisJCVNVQlRFU1QoaWd0X21tYXBfY3B1X3Jl
dm9rZSksCiAJfTsKIAogCXJldHVybiBpOTE1X3N1YnRlc3RzKHRlc3RzLCBpOTE1KTsKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNldC5jCmluZGV4IDM2MTg5MjM4ZTEzYy4uMGU5NGI3MjBj
OTkzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yZXNldC5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jlc2V0LmMKQEAgLTY3OCw4ICs2Nzgs
MTMgQEAgc3RhdGljIHZvaWQgcmV2b2tlX21tYXBzKHN0cnVjdCBpbnRlbF9ndCAqZ3QpCiAJCQlj
b250aW51ZTsKIAogCQlHRU1fQlVHX09OKHZtYS0+ZmVuY2UgIT0gJmd0LT5nZ3R0LT5mZW5jZV9y
ZWdzW2ldKTsKLQkJbm9kZSA9ICZ2bWEtPm9iai0+YmFzZS52bWFfbm9kZTsKKworCQlpZiAoIXZt
YS0+bW1vKQorCQkJY29udGludWU7CisKKwkJbm9kZSA9ICZ2bWEtPm1tby0+dm1hX25vZGU7CiAJ
CXZtYV9vZmZzZXQgPSB2bWEtPmdndHRfdmlldy5wYXJ0aWFsLm9mZnNldCA8PCBQQUdFX1NISUZU
OworCiAJCXVubWFwX21hcHBpbmdfcmFuZ2UoZ3QtPmk5MTUtPmRybS5hbm9uX2lub2RlLT5pX21h
cHBpbmcsCiAJCQkJICAgIGRybV92bWFfbm9kZV9vZmZzZXRfYWRkcihub2RlKSArIHZtYV9vZmZz
ZXQsCiAJCQkJICAgIHZtYS0+c2l6ZSwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCmluZGV4IGY1MDlk
ODI2ZmNjNy4uYjI5Yzg4YjhmYTFmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKQEAgLTYxLDYg
KzYxLDcgQEAKIAogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9jb250ZXh0LmgiCiAjaW5jbHVkZSAi
Z2VtL2k5MTVfZ2VtX2lvY3Rscy5oIgorI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9tbWFuLmgiCiAj
aW5jbHVkZSAiZ3QvaW50ZWxfZ3QuaCIKICNpbmNsdWRlICJndC9pbnRlbF9ndF9wbS5oIgogI2lu
Y2x1ZGUgImd0L2ludGVsX3JjNi5oIgpAQCAtMjY2MiwxOCArMjY2MywxMiBAQCBjb25zdCBzdHJ1
Y3QgZGV2X3BtX29wcyBpOTE1X3BtX29wcyA9IHsKIAkucnVudGltZV9yZXN1bWUgPSBpbnRlbF9y
dW50aW1lX3Jlc3VtZSwKIH07CiAKLXN0YXRpYyBjb25zdCBzdHJ1Y3Qgdm1fb3BlcmF0aW9uc19z
dHJ1Y3QgaTkxNV9nZW1fdm1fb3BzID0gewotCS5mYXVsdCA9IGk5MTVfZ2VtX2ZhdWx0LAotCS5v
cGVuID0gZHJtX2dlbV92bV9vcGVuLAotCS5jbG9zZSA9IGRybV9nZW1fdm1fY2xvc2UsCi19Owot
CiBzdGF0aWMgY29uc3Qgc3RydWN0IGZpbGVfb3BlcmF0aW9ucyBpOTE1X2RyaXZlcl9mb3BzID0g
ewogCS5vd25lciA9IFRISVNfTU9EVUxFLAogCS5vcGVuID0gZHJtX29wZW4sCiAJLnJlbGVhc2Ug
PSBkcm1fcmVsZWFzZSwKIAkudW5sb2NrZWRfaW9jdGwgPSBkcm1faW9jdGwsCi0JLm1tYXAgPSBk
cm1fZ2VtX21tYXAsCisJLm1tYXAgPSBpOTE1X2dlbV9tbWFwLAogCS5wb2xsID0gZHJtX3BvbGws
CiAJLnJlYWQgPSBkcm1fcmVhZCwKIAkuY29tcGF0X2lvY3RsID0gaTkxNV9jb21wYXRfaW9jdGws
CkBAIC0yNzIwLDcgKzI3MTUsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9pb2N0bF9kZXNj
IGk5MTVfaW9jdGxzW10gPSB7CiAJRFJNX0lPQ1RMX0RFRl9EUlYoSTkxNV9HRU1fUFJFQUQsIGk5
MTVfZ2VtX3ByZWFkX2lvY3RsLCBEUk1fUkVOREVSX0FMTE9XKSwKIAlEUk1fSU9DVExfREVGX0RS
VihJOTE1X0dFTV9QV1JJVEUsIGk5MTVfZ2VtX3B3cml0ZV9pb2N0bCwgRFJNX1JFTkRFUl9BTExP
VyksCiAJRFJNX0lPQ1RMX0RFRl9EUlYoSTkxNV9HRU1fTU1BUCwgaTkxNV9nZW1fbW1hcF9pb2N0
bCwgRFJNX1JFTkRFUl9BTExPVyksCi0JRFJNX0lPQ1RMX0RFRl9EUlYoSTkxNV9HRU1fTU1BUF9H
VFQsIGk5MTVfZ2VtX21tYXBfZ3R0X2lvY3RsLCBEUk1fUkVOREVSX0FMTE9XKSwKKwlEUk1fSU9D
VExfREVGX0RSVihJOTE1X0dFTV9NTUFQX09GRlNFVCwgaTkxNV9nZW1fbW1hcF9vZmZzZXRfaW9j
dGwsIERSTV9SRU5ERVJfQUxMT1cpLAogCURSTV9JT0NUTF9ERUZfRFJWKEk5MTVfR0VNX1NFVF9E
T01BSU4sIGk5MTVfZ2VtX3NldF9kb21haW5faW9jdGwsIERSTV9SRU5ERVJfQUxMT1cpLAogCURS
TV9JT0NUTF9ERUZfRFJWKEk5MTVfR0VNX1NXX0ZJTklTSCwgaTkxNV9nZW1fc3dfZmluaXNoX2lv
Y3RsLCBEUk1fUkVOREVSX0FMTE9XKSwKIAlEUk1fSU9DVExfREVGX0RSVihJOTE1X0dFTV9TRVRf
VElMSU5HLCBpOTE1X2dlbV9zZXRfdGlsaW5nX2lvY3RsLCBEUk1fUkVOREVSX0FMTE9XKSwKQEAg
LTI3NjIsNyArMjc1Nyw2IEBAIHN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBkcml2ZXIgPSB7CiAK
IAkuZ2VtX2Nsb3NlX29iamVjdCA9IGk5MTVfZ2VtX2Nsb3NlX29iamVjdCwKIAkuZ2VtX2ZyZWVf
b2JqZWN0X3VubG9ja2VkID0gaTkxNV9nZW1fZnJlZV9vYmplY3QsCi0JLmdlbV92bV9vcHMgPSAm
aTkxNV9nZW1fdm1fb3BzLAogCiAJLnByaW1lX2hhbmRsZV90b19mZCA9IGRybV9nZW1fcHJpbWVf
aGFuZGxlX3RvX2ZkLAogCS5wcmltZV9mZF90b19oYW5kbGUgPSBkcm1fZ2VtX3ByaW1lX2ZkX3Rv
X2hhbmRsZSwKQEAgLTI3NzMsNyArMjc2Nyw3IEBAIHN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBk
cml2ZXIgPSB7CiAJLmdldF9zY2Fub3V0X3Bvc2l0aW9uID0gaTkxNV9nZXRfY3J0Y19zY2Fub3V0
cG9zLAogCiAJLmR1bWJfY3JlYXRlID0gaTkxNV9nZW1fZHVtYl9jcmVhdGUsCi0JLmR1bWJfbWFw
X29mZnNldCA9IGk5MTVfZ2VtX21tYXBfZ3R0LAorCS5kdW1iX21hcF9vZmZzZXQgPSBpOTE1X2dl
bV9tbWFwX2R1bWIsCiAJLmlvY3RscyA9IGk5MTVfaW9jdGxzLAogCS5udW1faW9jdGxzID0gQVJS
QVlfU0laRShpOTE1X2lvY3RscyksCiAJLmZvcHMgPSAmaTkxNV9kcml2ZXJfZm9wcywKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2Rydi5oCmluZGV4IDE0NzQ0YzExNDQ3NS4uMGQ0YWQxOGUxMGRkIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTE4NTcsOSArMTg1Nyw2IEBAIGk5MTVfbXV0ZXhfbG9ja19p
bnRlcnJ1cHRpYmxlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiBpbnQgaTkxNV9nZW1fZHVtYl9j
cmVhdGUoc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYsCiAJCQkgc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwKIAkJCSBzdHJ1Y3QgZHJtX21vZGVfY3JlYXRlX2R1bWIgKmFyZ3MpOwotaW50IGk5MTVf
Z2VtX21tYXBfZ3R0KHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2LCBzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZGV2LAotCQkgICAgICB1MzIgaGFuZGxlLCB1NjQgKm9mZnNldCk7Ci1pbnQgaTkxNV9nZW1f
bW1hcF9ndHRfdmVyc2lvbih2b2lkKTsKIAogaW50IF9fbXVzdF9jaGVjayBpOTE1X2dlbV9zZXRf
Z2xvYmFsX3NlcW5vKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHUzMiBzZXFubyk7CiAKQEAgLTE4
ODIsNyArMTg3OSw2IEBAIHZvaWQgaTkxNV9nZW1fZHJpdmVyX3JlbGVhc2Uoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIHZvaWQgaTkxNV9nZW1fc3VzcGVuZChzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBpOTE1X2dlbV9zdXNwZW5kX2xhdGUoc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIHZvaWQgaTkxNV9nZW1fcmVzdW1lKHN0
cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7Ci12bV9mYXVsdF90IGk5MTVfZ2VtX2Zh
dWx0KHN0cnVjdCB2bV9mYXVsdCAqdm1mKTsKIAogaW50IGk5MTVfZ2VtX29wZW4oc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUsIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSk7CiB2b2lkIGk5MTVf
Z2VtX3JlbGVhc2Uoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRybV9maWxlICpmaWxl
KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCmluZGV4IDYxMzk1YjAzNDQzZS4uNjc5ZmI0NmE3Y2Mz
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKQEAgLTQ0LDYgKzQ0LDcgQEAKICNpbmNsdWRlICJn
ZW0vaTkxNV9nZW1fY2xmbHVzaC5oIgogI2luY2x1ZGUgImdlbS9pOTE1X2dlbV9jb250ZXh0Lmgi
CiAjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX2lvY3Rscy5oIgorI2luY2x1ZGUgImdlbS9pOTE1X2dl
bV9tbWFuLmgiCiAjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX3BtLmgiCiAjaW5jbHVkZSAiZ3QvaW50
ZWxfY29udGV4dC5oIgogI2luY2x1ZGUgImd0L2ludGVsX2VuZ2luZV91c2VyLmgiCkBAIC04NTUs
NyArODU2LDcgQEAgdm9pZCBpOTE1X2dlbV9ydW50aW1lX3N1c3BlbmQoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmk5MTUpCiAKIAlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUob2JqLCBvbiwKIAkJ
CQkgJmk5MTUtPmdndHQudXNlcmZhdWx0X2xpc3QsIHVzZXJmYXVsdF9saW5rKQotCQlfX2k5MTVf
Z2VtX29iamVjdF9yZWxlYXNlX21tYXAob2JqKTsKKwkJX19pOTE1X2dlbV9vYmplY3RfcmVsZWFz
ZV9tbWFwX2d0dChvYmopOwogCiAJLyoKIAkgKiBUaGUgZmVuY2Ugd2lsbCBiZSBsb3N0IHdoZW4g
dGhlIGRldmljZSBwb3dlcnMgZG93bi4gSWYgYW55IHdlcmUKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfZ2V0cGFyYW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2V0cGFyYW0uYwppbmRleCBjZjhhOGMzZWYwNDcuLjU0ZmNlODFkNTcyNCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZXRwYXJhbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfZ2V0cGFyYW0uYwpAQCAtMiw2ICsyLDcgQEAKICAqIFNQRFgtTGljZW5zZS1J
ZGVudGlmaWVyOiBNSVQKICAqLwogCisjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX21tYW4uaCIKICNp
bmNsdWRlICJndC9pbnRlbF9lbmdpbmVfdXNlci5oIgogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmMgYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3ZtYS5jCmluZGV4IGU1NTEyZjI2ZTIwYS4uNTEwOGRjYjJlNWIxIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfdm1hLmMKQEAgLTEwNTQsNyArMTA1NCw3IEBAIHN0YXRpYyB2b2lk
IF9faTkxNV92bWFfaW91bm1hcChzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKIAogdm9pZCBpOTE1X3Zt
YV9yZXZva2VfbW1hcChzdHJ1Y3QgaTkxNV92bWEgKnZtYSkKIHsKLQlzdHJ1Y3QgZHJtX3ZtYV9v
ZmZzZXRfbm9kZSAqbm9kZSA9ICZ2bWEtPm9iai0+YmFzZS52bWFfbm9kZTsKKwlzdHJ1Y3QgZHJt
X3ZtYV9vZmZzZXRfbm9kZSAqbm9kZTsKIAl1NjQgdm1hX29mZnNldDsKIAogCWxvY2tkZXBfYXNz
ZXJ0X2hlbGQoJnZtYS0+dm0tPm11dGV4KTsKQEAgLTEwNjUsNiArMTA2NSw3IEBAIHZvaWQgaTkx
NV92bWFfcmV2b2tlX21tYXAoc3RydWN0IGk5MTVfdm1hICp2bWEpCiAJR0VNX0JVR19PTighaTkx
NV92bWFfaXNfbWFwX2FuZF9mZW5jZWFibGUodm1hKSk7CiAJR0VNX0JVR19PTighdm1hLT5vYmot
PnVzZXJmYXVsdF9jb3VudCk7CiAKKwlub2RlID0gJnZtYS0+bW1vLT52bWFfbm9kZTsKIAl2bWFf
b2Zmc2V0ID0gdm1hLT5nZ3R0X3ZpZXcucGFydGlhbC5vZmZzZXQgPDwgUEFHRV9TSElGVDsKIAl1
bm1hcF9tYXBwaW5nX3JhbmdlKHZtYS0+dm0tPmk5MTUtPmRybS5hbm9uX2lub2RlLT5pX21hcHBp
bmcsCiAJCQkgICAgZHJtX3ZtYV9ub2RlX29mZnNldF9hZGRyKG5vZGUpICsgdm1hX29mZnNldCwK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmggYi9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3ZtYS5oCmluZGV4IDQ2NTkzMjgxM2JjNS4uZjA5ZjRmNTEzYzQxIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5oCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfdm1hLmgKQEAgLTYzLDYgKzYzLDkgQEAgc3RydWN0IGk5MTVfdm1h
IHsKIAl1NjQgZGlzcGxheV9hbGlnbm1lbnQ7CiAJc3RydWN0IGk5MTVfcGFnZV9zaXplcyBwYWdl
X3NpemVzOwogCisJLyogbW1hcC1vZmZzZXQgYXNzb2NpYXRlZCB3aXRoIGZlbmNpbmcgZm9yIHRo
aXMgdm1hICovCisJc3RydWN0IGk5MTVfbW1hcF9vZmZzZXQJKm1tbzsKKwogCXUzMiBmZW5jZV9z
aXplOwogCXUzMiBmZW5jZV9hbGlnbm1lbnQ7CiAKZGlmZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9k
cm0vaTkxNV9kcm0uaCBiL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaAppbmRleCA1NDAwZDdl
MDU3ZjEuLmU4NDRjM2E4ZDE5NyAxMDA2NDQKLS0tIGEvaW5jbHVkZS91YXBpL2RybS9pOTE1X2Ry
bS5oCisrKyBiL2luY2x1ZGUvdWFwaS9kcm0vaTkxNV9kcm0uaApAQCAtMzk1LDYgKzM5NSw3IEBA
IHR5cGVkZWYgc3RydWN0IF9kcm1faTkxNV9zYXJlYSB7CiAjZGVmaW5lIERSTV9JT0NUTF9JOTE1
X0dFTV9QV1JJVEUJRFJNX0lPVyAoRFJNX0NPTU1BTkRfQkFTRSArIERSTV9JOTE1X0dFTV9QV1JJ
VEUsIHN0cnVjdCBkcm1faTkxNV9nZW1fcHdyaXRlKQogI2RlZmluZSBEUk1fSU9DVExfSTkxNV9H
RU1fTU1BUAkJRFJNX0lPV1IoRFJNX0NPTU1BTkRfQkFTRSArIERSTV9JOTE1X0dFTV9NTUFQLCBz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX21tYXApCiAjZGVmaW5lIERSTV9JT0NUTF9JOTE1X0dFTV9NTUFQ
X0dUVAlEUk1fSU9XUihEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX01NQVBfR1RULCBz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX21tYXBfZ3R0KQorI2RlZmluZSBEUk1fSU9DVExfSTkxNV9HRU1f
TU1BUF9PRkZTRVQJRFJNX0lPV1IoRFJNX0NPTU1BTkRfQkFTRSArIERSTV9JOTE1X0dFTV9NTUFQ
X0dUVCwgc3RydWN0IGRybV9pOTE1X2dlbV9tbWFwX29mZnNldCkKICNkZWZpbmUgRFJNX0lPQ1RM
X0k5MTVfR0VNX1NFVF9ET01BSU4JRFJNX0lPVyAoRFJNX0NPTU1BTkRfQkFTRSArIERSTV9JOTE1
X0dFTV9TRVRfRE9NQUlOLCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX3NldF9kb21haW4pCiAjZGVmaW5l
IERSTV9JT0NUTF9JOTE1X0dFTV9TV19GSU5JU0gJRFJNX0lPVyAoRFJNX0NPTU1BTkRfQkFTRSAr
IERSTV9JOTE1X0dFTV9TV19GSU5JU0gsIHN0cnVjdCBkcm1faTkxNV9nZW1fc3dfZmluaXNoKQog
I2RlZmluZSBEUk1fSU9DVExfSTkxNV9HRU1fU0VUX1RJTElORwlEUk1fSU9XUiAoRFJNX0NPTU1B
TkRfQkFTRSArIERSTV9JOTE1X0dFTV9TRVRfVElMSU5HLCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX3Nl
dF90aWxpbmcpCkBAIC03OTMsNiArNzk0LDMyIEBAIHN0cnVjdCBkcm1faTkxNV9nZW1fbW1hcF9n
dHQgewogCV9fdTY0IG9mZnNldDsKIH07CiAKK3N0cnVjdCBkcm1faTkxNV9nZW1fbW1hcF9vZmZz
ZXQgeworCS8qKiBIYW5kbGUgZm9yIHRoZSBvYmplY3QgYmVpbmcgbWFwcGVkLiAqLworCV9fdTMy
IGhhbmRsZTsKKwlfX3UzMiBwYWQ7CisJLyoqCisJICogRmFrZSBvZmZzZXQgdG8gdXNlIGZvciBz
dWJzZXF1ZW50IG1tYXAgY2FsbAorCSAqCisJICogVGhpcyBpcyBhIGZpeGVkLXNpemUgdHlwZSBm
b3IgMzIvNjQgY29tcGF0aWJpbGl0eS4KKwkgKi8KKwlfX3U2NCBvZmZzZXQ7CisKKwkvKioKKwkg
KiBGbGFncyBmb3IgZXh0ZW5kZWQgYmVoYXZpb3VyLgorCSAqCisJICogSXQgaXMgbWFuZGF0b3J5
IHRoYXQgZWl0aGVyIG9uZSBvZiB0aGUgTU1BUF9PRkZTRVQgZmxhZ3MKKwkgKiBzaG91bGQgYmUg
cGFzc2VkIGhlcmUuCisJICovCisJX191NjQgZmxhZ3M7CisjZGVmaW5lIEk5MTVfTU1BUF9PRkZT
RVRfR1RUIDAKKyNkZWZpbmUgSTkxNV9NTUFQX09GRlNFVF9XQyAgMQorI2RlZmluZSBJOTE1X01N
QVBfT0ZGU0VUX1dCICAyCisjZGVmaW5lIEk5MTVfTU1BUF9PRkZTRVRfVUMgIDMKKworCV9fdTY0
IGV4dGVuc2lvbnM7Cit9OworCiBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX3NldF9kb21haW4gewogCS8q
KiBIYW5kbGUgZm9yIHRoZSBvYmplY3QgKi8KIAlfX3UzMiBoYW5kbGU7Ci0tIAoyLjI0LjAKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdmeCBt
YWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

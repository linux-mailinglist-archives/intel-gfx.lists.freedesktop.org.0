Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4D511B67F2
	for <lists+intel-gfx@lfdr.de>; Wed, 18 Sep 2019 18:21:29 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 76AB36F40A;
	Wed, 18 Sep 2019 16:21:27 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6C6A76F59C
 for <intel-gfx@lists.freedesktop.org>; Wed, 18 Sep 2019 16:21:25 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 18535113-1500050 for multiple; Wed, 18 Sep 2019 17:21:18 +0100
MIME-Version: 1.0
To: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <156882302627.5729.14761907964387151217@skylake-alporthouse-com>
References: <20190916113808.30386-1-chris@chris-wilson.co.uk>
 <f9dd99e9-2a2b-0ccb-5bde-ddb3e2c52718@linux.intel.com>
 <156873347535.5729.10751385580169175179@skylake-alporthouse-com>
 <30887414-d268-ff26-13a1-36fb924abdd4@linux.intel.com>
 <156882302627.5729.14761907964387151217@skylake-alporthouse-com>
Message-ID: <156882367616.5729.14065498823669239175@skylake-alporthouse-com>
User-Agent: alot/0.6
Date: Wed, 18 Sep 2019 17:21:16 +0100
Subject: Re: [Intel-gfx] [PATCH] drm/i915: Verify the engine after acquiring
 the active.lock
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: Matthew Auld <matthew.auld@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBDaHJpcyBXaWxzb24gKDIwMTktMDktMTggMTc6MTA6MjYpCj4gUXVvdGluZyBUdnJ0
a28gVXJzdWxpbiAoMjAxOS0wOS0xOCAxNjo1NDozNikKPiA+IAo+ID4gT24gMTcvMDkvMjAxOSAx
NjoxNywgQ2hyaXMgV2lsc29uIHdyb3RlOgo+ID4gPiBRdW90aW5nIFR2cnRrbyBVcnN1bGluICgy
MDE5LTA5LTE3IDE1OjU5OjI1KQo+ID4gPj4KPiA+ID4+IE9uIDE2LzA5LzIwMTkgMTI6MzgsIENo
cmlzIFdpbHNvbiB3cm90ZToKPiA+ID4+PiBXaGVuIHVzaW5nIHZpcnR1YWwgZW5naW5lcywgdGhl
IHJxLT5lbmdpbmUgaXMgbm90IHN0YWJsZSB1bnRpbCB3ZSBob2xkCj4gPiA+Pj4gdGhlIGVuZ2lu
ZS0+YWN0aXZlLmxvY2sgKGFzIHRoZSB2aXJ0dWFsIGVuZ2luZSBtYXkgYmUgZXhjaGFuZ2VkIHdp
dGggdGhlCj4gPiA+Pj4gc2libGluZykuIFNpbmNlIGNvbW1pdCAyMmI3YTQyNmJiZTEgKCJkcm0v
aTkxNS9leGVjbGlzdHM6IFByZWVtcHQtdG8tYnVzeSIpCj4gPiA+Pj4gd2UgbWF5IHJldGlyZSBh
IHJlcXVlc3QgY29uY3VycmVudGx5IHdpdGggcmVzdWJtaXR0aW5nIGl0IHRvIEhXLCB3ZSBuZWVk
Cj4gPiA+Pj4gdG8gYmUgZXh0cmEgY2FyZWZ1bCB0byB2ZXJpZnkgd2UgYXJlIGhvbGRpbmcgdGhl
IGNvcnJlY3QgbG9jayBmb3IgdGhlCj4gPiA+Pj4gcmVxdWVzdCdzIGFjdGl2ZSBsaXN0LiBUaGlz
IGlzIHNpbWlsYXIgdG8gdGhlIGlzc3VlIHdlIHNhdyB3aXRoCj4gPiA+Pj4gcmVzY2hlZHVsaW5n
IHRoZSB2aXJ0dWFsIHJlcXVlc3RzLCBzZWUgc2NoZWRfbG9ja19lbmdpbmUoKS4KPiA+ID4+Pgo+
ID4gPj4+IE9yIGVsc2U6Cj4gPiA+Pj4KPiA+ID4+PiA8ND4gWzg3Ni43MzYxMjZdIGxpc3RfYWRk
IGNvcnJ1cHRpb24uIHByZXYtPm5leHQgc2hvdWxkIGJlIG5leHQgKGZmZmY4ODgzZjkzMWExZjgp
LCBidXQgd2FzIGRlYWQwMDAwMDAwMDAxMDAuIChwcmV2PWZmZmY4ODgzNjFmZmE2MTApLgo+IC4u
Lgo+ID4gPj4+IDw0PiBbODc2LjczNjQxNV0gbGlzdF9kZWwgY29ycnVwdGlvbi4gcHJldi0+bmV4
dCBzaG91bGQgYmUgZmZmZjg4ODM2MWZmY2ExMCwgYnV0IHdhcyBmZmZmODg4NDBhYzJjNzMwCj4g
Cj4gPiA+IFllcy4gU28gcHJlZW1wdC10by1idXN5IGludHJvZHVjZXMgYSB3aW5kb3cgd2hlcmUg
dGhlIHJlcXVlc3QgaXMgc3RpbGwKPiA+ID4gb24gSFcgYnV0IHdlIGhhdmUgcmV0dXJuZWQgaXQg
YmFjayB0byB0aGUgc3VibWlzc2lvbiBxdWV1ZS4gV2UgY2F0Y2ggdXAKPiA+ID4gd2l0aCB0aGUg
SFcgb24gdGhlIG5leHQgcHJvY2Vzc19jc2IsIGJ1dCBpdCBtYXkgaGF2ZSBjb21wbGV0ZWQgdGhl
Cj4gPiA+IHJlcXVlc3QgaW4gdGhlIG1lYW4gdGltZSAoaXQgaXMganVzdCBub3QgYWxsb3dlZCB0
byBhZHZhbmNlIGJleW9uZCB0aGUKPiA+ID4gc3Vic2VxdWVudCBicmVhZGNydW1iIGFuZCBzbyBw
cmV2ZW50ZWQgZnJvbSBvdmVydGFraW5nIG91ciBrbm93bGVkZ2Ugb2YKPiA+ID4gUklOR19UQUlM
IGFuZCBzbyB3ZSBhdm9pZCB0ZWxsaW5nIHRoZSBIVyB0byBnbyAiYmFja3dhcmRzIi4pLgo+ID4g
Cj4gPiBXb3VsZCBpdCBiZSBzdWZmaWNpZW50IHRvIGRvOgo+ID4gCj4gPiAgICBlbmdpbmUgPSBS
RUFEX09OQ0UocnEtPmVuZ2luZSk7Cj4gPiAgICBzcGluX2xvY2soLi4uKTsKPiA+ICAgIGxpc3Rf
ZGVsKC4uLik7Cj4gPiAgICBzcGluX3VubG9jayhlbmdpbmUtPmFjdGl2ZS5sb2NrKTsKPiA+IAo+
ID4gVG8gZW5zdXJlIHRoZSBzYW1lIGVuZ2luZSBpcyB1c2VkPyBBbHRob3VnaCB0aGUgb29wcyBp
cyBub3QgYWJvdXQgCj4gPiBzcGlubG9jayBidXQgbGlzdCBjb3JydXB0aW9uLiBIb3cgZG9lcyB0
aGUgbGlzdCBnZXQgY29ycnVwdCB0aG91Z2g/IAo+ID4gbGlzdF9kZWwgZG9lcyBub3QgY2FyZSBv
biB3aGljaCBsaXN0IHRoZSByZXF1ZXN0IGlzLi4gSWYgaXQgaXMgcmVhbGx5IAo+ID4ga2V5IHRv
IGhhdmUgdGhlIGNvcnJlY3QgbG9jaywgdGhlbiB3aHkgaXQgaXMgZW5vdWdoIHRvIHJlLWNoZWNr
IHRoZSAKPiA+IGVuZ2luZSBhZnRlciB0YWtpbmcgdGhlIGxvY2s/IFdoeSBycS0+ZW5naW5lIGNv
dWxkbid0IGNoYW5nZSB1bmRlciB0aGUgCj4gPiBsb2NrIGFnYWluPyBycS0+ZW5naW5lIGRvZXMg
Z2V0IHVwZGF0ZWQgdW5kZXIgdGhlIHZlcnkgbG9jaywgbm8/Cj4gCj4gRG9uJ3QgZm9yZ2V0IHRo
YXQgbGlzdF9kZWwgY2hhbmdlcyB0aGUgbGlzdCBhcm91bmQgaXQ6Cj4gbGlzdF9kZWwoKSB7Cj4g
ICAgICAgICBsaXN0LT5wcmV2LT5uZXh0ID0gbGlzdC0+bmV4dDsKPiAgICAgICAgIGxpc3QtPm5l
eHQtPnByZXYgPSBsaXN0LT5wcmV2Owo+IH0KPiAKPiBycS0+ZW5naW5lIGNhbid0IGNoYW5nZSB1
bmRlciB0aGUgcmVhbC0+YWN0aXZlLmxvY2ssIGFzIHRoZSBhc3NpZ25tZW50Cj4gdG8gcnEtPmVu
Z2luZSA9ICh2aXJ0dWFsLCByZWFsKSBpcyBtYWRlIHVuZGVyIHRoZSByZWFsLT5hY3RpdmUubG9j
ay4KPiAKPiBleGVjbGlzdHNfZGVxdWV1ZToKPiAgICAgICAgIHJlYWwtPmFjdGl2ZS5sb2NrCj4g
ICAgICAgICB2ZS0+YWN0aXZlLmxvY2sKPiAKPiBfX3Vud2luZF9pbmNvbXBsZXRlX3JlcXVlc3Rz
Ogo+ICAgICAgICAgcmVhbC0+YWN0aXZlLmxvY2sKPiAKPiBIbW0uIEkgdHJ1c3QgdGhlIHRyaWNr
IGVtcGxveWVkIGluIHRoZSBwYXRjaCBpcyB3ZWxsIHByb3ZlbiBieSB0aGlzCj4gcG9pbnQsIGJ1
dCBpZiB3ZSB0b29rIHRoZSBuZXN0ZWQgdmUgbG9jayBpbnNpZGUgX191bndpbmQsIGRvIHdlIG5l
ZWQgdG8KPiB3b3JyeS4gSG1tLgoKTm8uIFRha2UgYW4gZXh0cmVtZSBleGFtcGxlIHdoZXJlIHRo
ZSByZXF1ZXN0IGlzIHRha2VuIGZyb20gdGhlIHZpcnR1YWwKZW5naW5lIHN1Ym1pdHRlZCB0byBz
aWJsaW5nMCwgdGhlbiB0cmFuc2ZlcnJlZCB0byBzaWJsaW5nMSBhbGwgYmV0d2Vlbgp0aGUgb3Ro
ZXIgdGhyZWFkIGRvaW5nIGVuZ2luZSA9IFJFQURfT05DRShycS0+ZW5naW5lKTsgbG9jayhlbmdp
bmUpOwoKVGhlIGVuZ2luZSB0aGF0IHVzZWQgdG8gYmUgb24gdGhlIHJlcXVlc3Qgbm8gbG9uZ2Vy
IGNvcnJlbGF0ZXMgd2l0aCB0aGUKZW5naW5lIGxvY2tpbmcgdGhlIHNjaGVkLnJlcXVlc3RzLgot
Q2hyaXMKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50
ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtZ2Z4

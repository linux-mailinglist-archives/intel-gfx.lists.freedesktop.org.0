Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 95415E19E3
	for <lists+intel-gfx@lfdr.de>; Wed, 23 Oct 2019 14:22:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 046AE6EA79;
	Wed, 23 Oct 2019 12:22:07 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1207F6EA6E
 for <intel-gfx@lists.freedesktop.org>; Wed, 23 Oct 2019 12:22:01 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18936916-1500050 
 for <intel-gfx@lists.freedesktop.org>; Wed, 23 Oct 2019 13:21:59 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Wed, 23 Oct 2019 13:21:49 +0100
Message-Id: <20191023122151.5017-2-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0.rc0
In-Reply-To: <20191023122151.5017-1-chris@chris-wilson.co.uk>
References: <20191023122151.5017-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
Subject: [Intel-gfx] [CI 2/4] drm/i915/execlists: Force preemption
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

SWYgdGhlIHByZWVtcHRlZCBjb250ZXh0IHRha2VzIHRvbyBsb25nIHRvIHJlbGlucXVpc2ggY29u
dHJvbCwgZS5nLiBpdAppcyBzdHVjayBpbnNpZGUgYSBzaGFkZXIgd2l0aCBhcmJpdHJhdGlvbiBk
aXNhYmxlZCwgZXZpY3QgdGhhdCBjb250ZXh0CndpdGggYW4gZW5naW5lIHJlc2V0LiBUaGlzIGVu
c3VyZXMgdGhhdCBwcmVlbXB0aW9ucyBhcmUgcmVhc29uYWJseQpyZXNwb25zaXZlLCBwcm92aWRp
bmcgYSB0aWdodGVyIFFvUyBmb3IgdGhlIG1vcmUgaW1wb3J0YW50IGNvbnRleHQgYXQKdGhlIGNv
c3Qgb2YgZmxhZ2dpbmcgdW5yZXNwb25zaXZlIGNvbnRleHRzIG1vcmUgZnJlcXVlbnRseSAoaS5l
LiBpbnN0ZWFkCm9mIHVzaW5nIGFuIH4xMHMgaGFuZ2NoZWNrLCB3ZSBub3cgZXZpY3QgYXQgfjEw
MG1zKS4gIFRoZSBjaGFsbGVuZ2Ugb2YKbGllcyBpbiBwaWNraW5nIGEgdGltZW91dCB0aGF0IGNh
biBiZSByZWFzb25hYmx5IHNlcnZpY2VkIGJ5IEhXIGZvcgp0eXBpY2FsIHdvcmtsb2FkcywgYmFs
YW5jaW5nIHRoZSBleGlzdGluZyBjbGllbnRzIGFnYWluc3QgdGhlIG5lZWRzIGZvcgpyZXNwb25z
aXZlbmVzcy4KCk5vdGUgdGhhdCBjb3VwbGVkIHdpdGggdGltZXNsaWNpbmcsIHRoaXMgd2lsbCBs
ZWFkIHRvIHJhcGlkIEdQVSAiaGFuZyIKZGV0ZWN0aW9uIHdpdGggbXVsdGlwbGUgYWN0aXZlIGNv
bnRleHRzIHZ5aW5nIGZvciBHUFUgdGltZS4KClRoZSBmb3JjZWQgcHJlZW1wdGlvbiBtZWNoYW5p
c20gY2FuIGJlIGNvbXBpbGVkIG91dCB3aXRoCgoJLi9zY3JpcHRzL2NvbmZpZyAtLXNldC12YWwg
RFJNX0k5MTVfUFJFRU1QVF9USU1FT1VUIDAKClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8
Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogTWlrYSBLdW9wcGFsYSA8bWlrYS5rdW9wcGFs
YUBsaW51eC5pbnRlbC5jb20+CkNjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AaW50
ZWwuY29tPgpSZXZpZXdlZC1ieTogTWlrYSBLdW9wcGFsYSA8bWlrYS5rdW9wcGFsYUBsaW51eC5p
bnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvS2NvbmZpZy5wcm9maWxlICAgICAg
ICAgfCAgMTIgKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUuaCAgICAg
ICB8ICAgOSArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMgICAg
fCAgIDUgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV90eXBlcy5oIHwg
ICA2ICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9scmMuYyAgICAgICAgICB8ICA5
MyArKysrKysrKysrKysrKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qvc2VsZnRlc3RfbHJj
LmMgICAgICAgfCAxMDAgKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW0uaCAgICAgICAgICAgICAgfCAgMTQgLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3BhcmFtcy5oICAgICAgICAgICB8ICAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV91dGlscy5jICAgICAgICAgICAgfCAgMjkgKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3V0aWxzLmggICAgICAgICAgICB8ICAgOSArKwogMTAgZmlsZXMgY2hhbmdlZCwgMjU1IGlu
c2VydGlvbnMoKyksIDI0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L0tjb25maWcucHJvZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L0tjb25maWcucHJv
ZmlsZQppbmRleCA5N2YwMWJmZWRhNDEuLjNkNmIwYWQ0YjkyMCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvS2NvbmZpZy5wcm9maWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L0tjb25maWcucHJvZmlsZQpAQCAtMzYsMyArMzYsMTUgQEAgY29uZmlnIERSTV9JOTE1X1NUT1Bf
VElNRU9VVAogCSAgZGFtYWdlIGFzIHRoZSBzeXN0ZW0gaXMgcmVzZXQgaW4gb3JkZXIgdG8gcmVj
b3Zlci4gVGhlIGNvbG9yYXJ5IGlzCiAJICB0aGF0IHRoZSByZXNldCBpdHNlbGYgbWF5IHRha2Ug
bG9uZ2VyIGFuZCBzbyBiZSBtb3JlIGRpc3J1cHRpdmUgdG8KIAkgIGludGVyYWN0aXZlIG9yIGxv
dyBsYXRlbmN5IHdvcmtsb2Fkcy4KKworY29uZmlnIERSTV9JOTE1X1BSRUVNUFRfVElNRU9VVAor
CWludCAiUHJlZW1wdCB0aW1lb3V0IChtcywgamlmZnkgZ3JhbnVsYXJpdHkpIgorCWRlZmF1bHQg
MTAwICMgbWlsbGlzZWNvbmRzCisJaGVscAorCSAgSG93IGxvbmcgdG8gd2FpdCAoaW4gbWlsbGlz
ZWNvbmRzKSBmb3IgYSBwcmVlbXB0aW9uIGV2ZW50IHRvIG9jY3VyCisJICB3aGVuIHN1Ym1pdHRp
bmcgYSBuZXcgY29udGV4dCB2aWEgZXhlY2xpc3RzLiBJZiB0aGUgY3VycmVudCBjb250ZXh0CisJ
ICBkb2VzIG5vdCBoaXQgYW4gYXJiaXRyYXRpb24gcG9pbnQgYW5kIHlpZWxkIHRvIEhXIGJlZm9y
ZSB0aGUgdGltZXIKKwkgIGV4cGlyZXMsIHRoZSBIVyB3aWxsIGJlIHJlc2V0IHRvIGFsbG93IHRo
ZSBtb3JlIGltcG9ydGFudCBjb250ZXh0CisJICB0byBleGVjdXRlLgorCisJICBNYXkgYmUgMCB0
byBkaXNhYmxlIHRoZSB0aW1lb3V0LgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZW5naW5lLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUu
aAppbmRleCBjMmQ5ZDY3YzYzZDkuLjk0MDliNzg1NjI5OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZW5naW5lLmgKQEAgLTUyNyw0ICs1MjcsMTMgQEAgdm9pZCBpbnRlbF9lbmdpbmVf
aW5pdF9hY3RpdmUoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lLAogI2RlZmluZSBFTkdJ
TkVfTU9DSwkxCiAjZGVmaW5lIEVOR0lORV9WSVJUVUFMCTIKIAorc3RhdGljIGlubGluZSBib29s
CitpbnRlbF9lbmdpbmVfaGFzX3ByZWVtcHRfcmVzZXQoY29uc3Qgc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lKQoreworCWlmICghQ09ORklHX0RSTV9JOTE1X1BSRUVNUFRfVElNRU9VVCkK
KwkJcmV0dXJuIDA7CisKKwlyZXR1cm4gaW50ZWxfZW5naW5lX2hhc19wcmVlbXB0aW9uKGVuZ2lu
ZSk7Cit9CisKICNlbmRpZiAvKiBfSU5URUxfUklOR0JVRkZFUl9IXyAqLwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9lbmdpbmVfY3MuYwppbmRleCA0OTliNzc1ZjcyMzEuLmMwOGEyYzRh
MjE5ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2Nz
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMKQEAgLTMw
OCw2ICszMDgsOCBAQCBzdGF0aWMgaW50IGludGVsX2VuZ2luZV9zZXR1cChzdHJ1Y3QgaW50ZWxf
Z3QgKmd0LCBlbnVtIGludGVsX2VuZ2luZV9pZCBpZCkKIAllbmdpbmUtPmluc3RhbmNlID0gaW5m
by0+aW5zdGFuY2U7CiAJX19zcHJpbnRfZW5naW5lX25hbWUoZW5naW5lKTsKIAorCWVuZ2luZS0+
cHJvcHMucHJlZW1wdF90aW1lb3V0X21zID0KKwkJQ09ORklHX0RSTV9JOTE1X1BSRUVNUFRfVElN
RU9VVDsKIAllbmdpbmUtPnByb3BzLnN0b3BfdGltZW91dF9tcyA9CiAJCUNPTkZJR19EUk1fSTkx
NV9TVE9QX1RJTUVPVVQ7CiAKQEAgLTEzMzgsMTAgKzEzNDAsMTEgQEAgc3RhdGljIHZvaWQgaW50
ZWxfZW5naW5lX3ByaW50X3JlZ2lzdGVycyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUs
CiAJCXVuc2lnbmVkIGludCBpZHg7CiAJCXU4IHJlYWQsIHdyaXRlOwogCi0JCWRybV9wcmludGYo
bSwgIlx0RXhlY2xpc3QgdGFza2xldCBxdWV1ZWQ/ICVzICglcyksIHRpbWVzbGljZT8gJXNcbiIs
CisJCWRybV9wcmludGYobSwgIlx0RXhlY2xpc3QgdGFza2xldCBxdWV1ZWQ/ICVzICglcyksIHBy
ZWVtcHQ/ICVzLCB0aW1lc2xpY2U/ICVzXG4iLAogCQkJICAgeWVzbm8odGVzdF9iaXQoVEFTS0xF
VF9TVEFURV9TQ0hFRCwKIAkJCQkJICAmZW5naW5lLT5leGVjbGlzdHMudGFza2xldC5zdGF0ZSkp
LAogCQkJICAgZW5hYmxlZGRpc2FibGVkKCFhdG9taWNfcmVhZCgmZW5naW5lLT5leGVjbGlzdHMu
dGFza2xldC5jb3VudCkpLAorCQkJICAgcmVwcl90aW1lcigmZW5naW5lLT5leGVjbGlzdHMucHJl
ZW1wdCksCiAJCQkgICByZXByX3RpbWVyKCZlbmdpbmUtPmV4ZWNsaXN0cy50aW1lcikpOwogCiAJ
CXJlYWQgPSBleGVjbGlzdHMtPmNzYl9oZWFkOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9lbmdpbmVfdHlwZXMuaAppbmRleCA4N2Q1YzRlZjNhZTcuLjEyNTFkYWM5MWYzMSAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX3R5cGVzLmgKQEAgLTE3NCw2
ICsxNzQsMTEgQEAgc3RydWN0IGludGVsX2VuZ2luZV9leGVjbGlzdHMgewogCSAqLwogCXN0cnVj
dCB0aW1lcl9saXN0IHRpbWVyOwogCisJLyoqCisJICogQHByZWVtcHQ6IHJlc2V0IHRoZSBjdXJy
ZW50IGNvbnRleHQgaWYgaXQgZmFpbHMgdG8gZ2l2ZSB3YXkKKwkgKi8KKwlzdHJ1Y3QgdGltZXJf
bGlzdCBwcmVlbXB0OworCiAJLyoqCiAJICogQGRlZmF1bHRfcHJpb2xpc3Q6IHByaW9yaXR5IGxp
c3QgZm9yIEk5MTVfUFJJT1JJVFlfTk9STUFMCiAJICovCkBAIC01NDQsNiArNTQ5LDcgQEAgc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyB7CiAJfSBzdGF0czsKIAogCXN0cnVjdCB7CisJCXVuc2lnbmVk
IGxvbmcgcHJlZW1wdF90aW1lb3V0X21zOwogCQl1bnNpZ25lZCBsb25nIHN0b3BfdGltZW91dF9t
czsKIAl9IHByb3BzOwogfTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2lu
dGVsX2xyYy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfbHJjLmMKaW5kZXggZjlm
M2U5ODViYjc5Li5mZjBkZDI5N2U3ODIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L2ludGVsX2xyYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2xyYy5j
CkBAIC0xMzcyLDYgKzEzNzIsMjYgQEAgc3RhdGljIHZvaWQgcmVjb3JkX3ByZWVtcHRpb24oc3Ry
dWN0IGludGVsX2VuZ2luZV9leGVjbGlzdHMgKmV4ZWNsaXN0cykKIAkodm9pZClJOTE1X1NFTEZU
RVNUX09OTFkoZXhlY2xpc3RzLT5wcmVlbXB0X2hhbmcuY291bnQrKyk7CiB9CiAKK3N0YXRpYyB1
bnNpZ25lZCBsb25nIGFjdGl2ZV9wcmVlbXB0X3RpbWVvdXQoc3RydWN0IGludGVsX2VuZ2luZV9j
cyAqZW5naW5lKQoreworCXN0cnVjdCBpOTE1X3JlcXVlc3QgKnJxOworCisJcnEgPSBsYXN0X2Fj
dGl2ZSgmZW5naW5lLT5leGVjbGlzdHMpOworCWlmICghcnEpCisJCXJldHVybiAwOworCisJcmV0
dXJuIFJFQURfT05DRShlbmdpbmUtPnByb3BzLnByZWVtcHRfdGltZW91dF9tcyk7Cit9CisKK3N0
YXRpYyB2b2lkIHNldF9wcmVlbXB0X3RpbWVvdXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5n
aW5lKQoreworCWlmICghaW50ZWxfZW5naW5lX2hhc19wcmVlbXB0X3Jlc2V0KGVuZ2luZSkpCisJ
CXJldHVybjsKKworCXNldF90aW1lcl9tcygmZW5naW5lLT5leGVjbGlzdHMucHJlZW1wdCwKKwkJ
ICAgICBhY3RpdmVfcHJlZW1wdF90aW1lb3V0KGVuZ2luZSkpOworfQorCiBzdGF0aWMgdm9pZCBl
eGVjbGlzdHNfZGVxdWV1ZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiB7CiAJc3Ry
dWN0IGludGVsX2VuZ2luZV9leGVjbGlzdHMgKiBjb25zdCBleGVjbGlzdHMgPSAmZW5naW5lLT5l
eGVjbGlzdHM7CkBAIC0xNzQ3LDYgKzE3NjcsOCBAQCBzdGF0aWMgdm9pZCBleGVjbGlzdHNfZGVx
dWV1ZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAKIAkJbWVtc2V0KHBvcnQgKyAx
LCAwLCAobGFzdF9wb3J0IC0gcG9ydCkgKiBzaXplb2YoKnBvcnQpKTsKIAkJZXhlY2xpc3RzX3N1
Ym1pdF9wb3J0cyhlbmdpbmUpOworCisJCXNldF9wcmVlbXB0X3RpbWVvdXQoZW5naW5lKTsKIAl9
IGVsc2Ugewogc2tpcF9zdWJtaXQ6CiAJCXJpbmdfc2V0X3BhdXNlZChlbmdpbmUsIDApOwpAQCAt
MTk4Nyw2ICsyMDA5LDQzIEBAIHN0YXRpYyB2b2lkIF9fZXhlY2xpc3RzX3N1Ym1pc3Npb25fdGFz
a2xldChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpjb25zdCBlbmdpbmUpCiAJfQogfQogCitzdGF0
aWMgbm9pbmxpbmUgdm9pZCBwcmVlbXB0X3Jlc2V0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSkKK3sKKwljb25zdCB1bnNpZ25lZCBpbnQgYml0ID0gSTkxNV9SRVNFVF9FTkdJTkUgKyBl
bmdpbmUtPmlkOworCXVuc2lnbmVkIGxvbmcgKmxvY2sgPSAmZW5naW5lLT5ndC0+cmVzZXQuZmxh
Z3M7CisKKwlpZiAoaTkxNV9tb2RwYXJhbXMucmVzZXQgPCAzKQorCQlyZXR1cm47CisKKwlpZiAo
dGVzdF9hbmRfc2V0X2JpdChiaXQsIGxvY2spKQorCQlyZXR1cm47CisKKwkvKiBNYXJrIHRoaXMg
dGFza2xldCBhcyBkaXNhYmxlZCB0byBhdm9pZCB3YWl0aW5nIGZvciBpdCB0byBjb21wbGV0ZSAq
LworCXRhc2tsZXRfZGlzYWJsZV9ub3N5bmMoJmVuZ2luZS0+ZXhlY2xpc3RzLnRhc2tsZXQpOwor
CisJR0VNX1RSQUNFKCIlczogcHJlZW1wdCB0aW1lb3V0ICVsdSsldW1zXG4iLAorCQkgIGVuZ2lu
ZS0+bmFtZSwKKwkJICBSRUFEX09OQ0UoZW5naW5lLT5wcm9wcy5wcmVlbXB0X3RpbWVvdXRfbXMp
LAorCQkgIGppZmZpZXNfdG9fbXNlY3MoamlmZmllcyAtIGVuZ2luZS0+ZXhlY2xpc3RzLnByZWVt
cHQuZXhwaXJlcykpOworCWludGVsX2VuZ2luZV9yZXNldChlbmdpbmUsICJwcmVlbXB0aW9uIHRp
bWUgb3V0Iik7CisKKwl0YXNrbGV0X2VuYWJsZSgmZW5naW5lLT5leGVjbGlzdHMudGFza2xldCk7
CisJY2xlYXJfYW5kX3dha2VfdXBfYml0KGJpdCwgbG9jayk7Cit9CisKK3N0YXRpYyBib29sIHBy
ZWVtcHRfdGltZW91dChjb25zdCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpjb25zdCBlbmdpbmUp
Cit7CisJY29uc3Qgc3RydWN0IHRpbWVyX2xpc3QgKnQgPSAmZW5naW5lLT5leGVjbGlzdHMucHJl
ZW1wdDsKKworCWlmICghQ09ORklHX0RSTV9JOTE1X1BSRUVNUFRfVElNRU9VVCkKKwkJcmV0dXJu
IGZhbHNlOworCisJaWYgKCF0aW1lcl9leHBpcmVkKHQpKQorCQlyZXR1cm4gZmFsc2U7CisKKwly
ZXR1cm4gUkVBRF9PTkNFKGVuZ2luZS0+ZXhlY2xpc3RzLnBlbmRpbmdbMF0pOworfQorCiAvKgog
ICogQ2hlY2sgdGhlIHVucmVhZCBDb250ZXh0IFN0YXR1cyBCdWZmZXJzIGFuZCBtYW5hZ2UgdGhl
IHN1Ym1pc3Npb24gb2YgbmV3CiAgKiBjb250ZXh0cyB0byB0aGUgRUxTUCBhY2NvcmRpbmdseS4K
QEAgLTE5OTQsMjMgKzIwNTMsMzkgQEAgc3RhdGljIHZvaWQgX19leGVjbGlzdHNfc3VibWlzc2lv
bl90YXNrbGV0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmNvbnN0IGVuZ2luZSkKIHN0YXRpYyB2
b2lkIGV4ZWNsaXN0c19zdWJtaXNzaW9uX3Rhc2tsZXQodW5zaWduZWQgbG9uZyBkYXRhKQogewog
CXN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKiBjb25zdCBlbmdpbmUgPSAoc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqKWRhdGE7Ci0JdW5zaWduZWQgbG9uZyBmbGFnczsKKwlib29sIHRpbWVvdXQgPSBw
cmVlbXB0X3RpbWVvdXQoZW5naW5lKTsKIAogCXByb2Nlc3NfY3NiKGVuZ2luZSk7Ci0JaWYgKCFS
RUFEX09OQ0UoZW5naW5lLT5leGVjbGlzdHMucGVuZGluZ1swXSkpIHsKKwlpZiAoIVJFQURfT05D
RShlbmdpbmUtPmV4ZWNsaXN0cy5wZW5kaW5nWzBdKSB8fCB0aW1lb3V0KSB7CisJCXVuc2lnbmVk
IGxvbmcgZmxhZ3M7CisKIAkJc3Bpbl9sb2NrX2lycXNhdmUoJmVuZ2luZS0+YWN0aXZlLmxvY2ss
IGZsYWdzKTsKIAkJX19leGVjbGlzdHNfc3VibWlzc2lvbl90YXNrbGV0KGVuZ2luZSk7CiAJCXNw
aW5fdW5sb2NrX2lycXJlc3RvcmUoJmVuZ2luZS0+YWN0aXZlLmxvY2ssIGZsYWdzKTsKKworCQkv
KiBSZWNoZWNrIGFmdGVyIHNlcmlhbGlzaW5nIHdpdGggZGlyZWN0LXN1Ym1pc3Npb24gKi8KKwkJ
aWYgKHRpbWVvdXQgJiYgcHJlZW1wdF90aW1lb3V0KGVuZ2luZSkpCisJCQlwcmVlbXB0X3Jlc2V0
KGVuZ2luZSk7CiAJfQogfQogCi1zdGF0aWMgdm9pZCBleGVjbGlzdHNfc3VibWlzc2lvbl90aW1l
cihzdHJ1Y3QgdGltZXJfbGlzdCAqdGltZXIpCitzdGF0aWMgdm9pZCBfX2V4ZWNsaXN0c19raWNr
KHN0cnVjdCBpbnRlbF9lbmdpbmVfZXhlY2xpc3RzICpleGVjbGlzdHMpCiB7Ci0Jc3RydWN0IGlu
dGVsX2VuZ2luZV9jcyAqZW5naW5lID0KLQkJZnJvbV90aW1lcihlbmdpbmUsIHRpbWVyLCBleGVj
bGlzdHMudGltZXIpOwotCiAJLyogS2ljayB0aGUgdGFza2xldCBmb3Igc29tZSBpbnRlcnJ1cHQg
Y29hbGVzY2luZyBhbmQgcmVzZXQgaGFuZGxpbmcgKi8KLQl0YXNrbGV0X2hpX3NjaGVkdWxlKCZl
bmdpbmUtPmV4ZWNsaXN0cy50YXNrbGV0KTsKKwl0YXNrbGV0X2hpX3NjaGVkdWxlKCZleGVjbGlz
dHMtPnRhc2tsZXQpOworfQorCisjZGVmaW5lIGV4ZWNsaXN0c19raWNrKHQsIG1lbWJlcikgXAor
CV9fZXhlY2xpc3RzX2tpY2soY29udGFpbmVyX29mKHQsIHN0cnVjdCBpbnRlbF9lbmdpbmVfZXhl
Y2xpc3RzLCBtZW1iZXIpKQorCitzdGF0aWMgdm9pZCBleGVjbGlzdHNfdGltZXNsaWNlKHN0cnVj
dCB0aW1lcl9saXN0ICp0aW1lcikKK3sKKwlleGVjbGlzdHNfa2ljayh0aW1lciwgdGltZXIpOwor
fQorCitzdGF0aWMgdm9pZCBleGVjbGlzdHNfcHJlZW1wdChzdHJ1Y3QgdGltZXJfbGlzdCAqdGlt
ZXIpCit7CisJZXhlY2xpc3RzX2tpY2sodGltZXIsIHByZWVtcHQpOwogfQogCiBzdGF0aWMgdm9p
ZCBxdWV1ZV9yZXF1ZXN0KHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSwKQEAgLTM0NTUs
NiArMzUzMCw3IEBAIGdlbjEyX2VtaXRfZmluaV9icmVhZGNydW1iX3JjcyhzdHJ1Y3QgaTkxNV9y
ZXF1ZXN0ICpyZXF1ZXN0LCB1MzIgKmNzKQogc3RhdGljIHZvaWQgZXhlY2xpc3RzX3Bhcmsoc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogewogCWNhbmNlbF90aW1lcigmZW5naW5lLT5l
eGVjbGlzdHMudGltZXIpOworCWNhbmNlbF90aW1lcigmZW5naW5lLT5leGVjbGlzdHMucHJlZW1w
dCk7CiB9CiAKIHZvaWQgaW50ZWxfZXhlY2xpc3RzX3NldF9kZWZhdWx0X3N1Ym1pc3Npb24oc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQpAQCAtMzU3Miw3ICszNjQ4LDggQEAgaW50IGlu
dGVsX2V4ZWNsaXN0c19zdWJtaXNzaW9uX3NldHVwKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVu
Z2luZSkKIHsKIAl0YXNrbGV0X2luaXQoJmVuZ2luZS0+ZXhlY2xpc3RzLnRhc2tsZXQsCiAJCSAg
ICAgZXhlY2xpc3RzX3N1Ym1pc3Npb25fdGFza2xldCwgKHVuc2lnbmVkIGxvbmcpZW5naW5lKTsK
LQl0aW1lcl9zZXR1cCgmZW5naW5lLT5leGVjbGlzdHMudGltZXIsIGV4ZWNsaXN0c19zdWJtaXNz
aW9uX3RpbWVyLCAwKTsKKwl0aW1lcl9zZXR1cCgmZW5naW5lLT5leGVjbGlzdHMudGltZXIsIGV4
ZWNsaXN0c190aW1lc2xpY2UsIDApOworCXRpbWVyX3NldHVwKCZlbmdpbmUtPmV4ZWNsaXN0cy5w
cmVlbXB0LCBleGVjbGlzdHNfcHJlZW1wdCwgMCk7CiAKIAlsb2dpY2FsX3JpbmdfZGVmYXVsdF92
ZnVuY3MoZW5naW5lKTsKIAlsb2dpY2FsX3JpbmdfZGVmYXVsdF9pcnFzKGVuZ2luZSk7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L3NlbGZ0ZXN0X2xyYy5jCmluZGV4IDc1MTZkMWM5MDkyNS4uYjYzNTI2
NzFjNWEwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9scmMuYwpAQCAtMTY5Nyw2
ICsxNjk3LDEwNSBAQCBzdGF0aWMgaW50IGxpdmVfcHJlZW1wdF9oYW5nKHZvaWQgKmFyZykKIAly
ZXR1cm4gZXJyOwogfQogCitzdGF0aWMgaW50IGxpdmVfcHJlZW1wdF90aW1lb3V0KHZvaWQgKmFy
ZykKK3sKKwlzdHJ1Y3QgaW50ZWxfZ3QgKmd0ID0gYXJnOworCXN0cnVjdCBpOTE1X2dlbV9jb250
ZXh0ICpjdHhfaGksICpjdHhfbG87CisJc3RydWN0IGlndF9zcGlubmVyIHNwaW5fbG87CisJc3Ry
dWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lOworCWVudW0gaW50ZWxfZW5naW5lX2lkIGlkOwor
CWludCBlcnIgPSAtRU5PTUVNOworCisJLyoKKwkgKiBDaGVjayB0aGF0IHdlIGZvcmNlIHByZWVt
cHRpb24gdG8gb2NjdXIgYnkgY2FuY2VsbGluZyB0aGUgcHJldmlvdXMKKwkgKiBjb250ZXh0IGlm
IGl0IHJlZnVzZXMgdG8geWllbGQgdGhlIEdQVS4KKwkgKi8KKwlpZiAoIUNPTkZJR19EUk1fSTkx
NV9QUkVFTVBUX1RJTUVPVVQpCisJCXJldHVybiAwOworCisJaWYgKCFIQVNfTE9HSUNBTF9SSU5H
X1BSRUVNUFRJT04oZ3QtPmk5MTUpKQorCQlyZXR1cm4gMDsKKworCWlmICghaW50ZWxfaGFzX3Jl
c2V0X2VuZ2luZShndCkpCisJCXJldHVybiAwOworCisJaWYgKGlndF9zcGlubmVyX2luaXQoJnNw
aW5fbG8sIGd0KSkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwljdHhfaGkgPSBrZXJuZWxfY29udGV4
dChndC0+aTkxNSk7CisJaWYgKCFjdHhfaGkpCisJCWdvdG8gZXJyX3NwaW5fbG87CisJY3R4X2hp
LT5zY2hlZC5wcmlvcml0eSA9CisJCUk5MTVfVVNFUl9QUklPUklUWShJOTE1X0NPTlRFWFRfTUFY
X1VTRVJfUFJJT1JJVFkpOworCisJY3R4X2xvID0ga2VybmVsX2NvbnRleHQoZ3QtPmk5MTUpOwor
CWlmICghY3R4X2xvKQorCQlnb3RvIGVycl9jdHhfaGk7CisJY3R4X2xvLT5zY2hlZC5wcmlvcml0
eSA9CisJCUk5MTVfVVNFUl9QUklPUklUWShJOTE1X0NPTlRFWFRfTUlOX1VTRVJfUFJJT1JJVFkp
OworCisJZm9yX2VhY2hfZW5naW5lKGVuZ2luZSwgZ3QsIGlkKSB7CisJCXVuc2lnbmVkIGxvbmcg
c2F2ZWRfdGltZW91dDsKKwkJc3RydWN0IGk5MTVfcmVxdWVzdCAqcnE7CisKKwkJaWYgKCFpbnRl
bF9lbmdpbmVfaGFzX3ByZWVtcHRpb24oZW5naW5lKSkKKwkJCWNvbnRpbnVlOworCisJCXJxID0g
c3Bpbm5lcl9jcmVhdGVfcmVxdWVzdCgmc3Bpbl9sbywgY3R4X2xvLCBlbmdpbmUsCisJCQkJCSAg
ICBNSV9OT09QKTsgLyogcHJlZW1wdGlvbiBkaXNhYmxlZCAqLworCQlpZiAoSVNfRVJSKHJxKSkg
eworCQkJZXJyID0gUFRSX0VSUihycSk7CisJCQlnb3RvIGVycl9jdHhfbG87CisJCX0KKworCQlp
OTE1X3JlcXVlc3RfYWRkKHJxKTsKKwkJaWYgKCFpZ3Rfd2FpdF9mb3Jfc3Bpbm5lcigmc3Bpbl9s
bywgcnEpKSB7CisJCQlpbnRlbF9ndF9zZXRfd2VkZ2VkKGd0KTsKKwkJCWVyciA9IC1FSU87CisJ
CQlnb3RvIGVycl9jdHhfbG87CisJCX0KKworCQlycSA9IGlndF9yZXF1ZXN0X2FsbG9jKGN0eF9o
aSwgZW5naW5lKTsKKwkJaWYgKElTX0VSUihycSkpIHsKKwkJCWlndF9zcGlubmVyX2VuZCgmc3Bp
bl9sbyk7CisJCQllcnIgPSBQVFJfRVJSKHJxKTsKKwkJCWdvdG8gZXJyX2N0eF9sbzsKKwkJfQor
CisJCS8qIEZsdXNoIHRoZSBwcmV2aW91cyBDUyBhY2sgYmVmb3JlIGNoYW5naW5nIHRpbWVvdXRz
ICovCisJCXdoaWxlIChSRUFEX09OQ0UoZW5naW5lLT5leGVjbGlzdHMucGVuZGluZ1swXSkpCisJ
CQljcHVfcmVsYXgoKTsKKworCQlzYXZlZF90aW1lb3V0ID0gZW5naW5lLT5wcm9wcy5wcmVlbXB0
X3RpbWVvdXRfbXM7CisJCWVuZ2luZS0+cHJvcHMucHJlZW1wdF90aW1lb3V0X21zID0gMTsgLyog
aW4gbXMsIC0+IDEgamlmZmllICovCisKKwkJaTkxNV9yZXF1ZXN0X2dldChycSk7CisJCWk5MTVf
cmVxdWVzdF9hZGQocnEpOworCisJCWludGVsX2VuZ2luZV9mbHVzaF9zdWJtaXNzaW9uKGVuZ2lu
ZSk7CisJCWVuZ2luZS0+cHJvcHMucHJlZW1wdF90aW1lb3V0X21zID0gc2F2ZWRfdGltZW91dDsK
KworCQlpZiAoaTkxNV9yZXF1ZXN0X3dhaXQocnEsIDAsIEhaIC8gMTApIDwgMCkgeworCQkJaW50
ZWxfZ3Rfc2V0X3dlZGdlZChndCk7CisJCQlpOTE1X3JlcXVlc3RfcHV0KHJxKTsKKwkJCWVyciA9
IC1FVElNRTsKKwkJCWdvdG8gZXJyX2N0eF9sbzsKKwkJfQorCisJCWlndF9zcGlubmVyX2VuZCgm
c3Bpbl9sbyk7CisJCWk5MTVfcmVxdWVzdF9wdXQocnEpOworCX0KKworCWVyciA9IDA7CitlcnJf
Y3R4X2xvOgorCWtlcm5lbF9jb250ZXh0X2Nsb3NlKGN0eF9sbyk7CitlcnJfY3R4X2hpOgorCWtl
cm5lbF9jb250ZXh0X2Nsb3NlKGN0eF9oaSk7CitlcnJfc3Bpbl9sbzoKKwlpZ3Rfc3Bpbm5lcl9m
aW5pKCZzcGluX2xvKTsKKwlyZXR1cm4gZXJyOworfQorCiBzdGF0aWMgaW50IHJhbmRvbV9yYW5n
ZShzdHJ1Y3Qgcm5kX3N0YXRlICpybmQsIGludCBtaW4sIGludCBtYXgpCiB7CiAJcmV0dXJuIGk5
MTVfcHJhbmRvbV91MzJfbWF4X3N0YXRlKG1heCAtIG1pbiwgcm5kKSArIG1pbjsKQEAgLTI1OTgs
NiArMjY5Nyw3IEBAIGludCBpbnRlbF9leGVjbGlzdHNfbGl2ZV9zZWxmdGVzdHMoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUpCiAJCVNVQlRFU1QobGl2ZV9zdXBwcmVzc193YWl0X3ByZWVt
cHQpLAogCQlTVUJURVNUKGxpdmVfY2hhaW5fcHJlZW1wdCksCiAJCVNVQlRFU1QobGl2ZV9wcmVl
bXB0X2hhbmcpLAorCQlTVUJURVNUKGxpdmVfcHJlZW1wdF90aW1lb3V0KSwKIAkJU1VCVEVTVChs
aXZlX3ByZWVtcHRfc21va2UpLAogCQlTVUJURVNUKGxpdmVfdmlydHVhbF9lbmdpbmUpLAogCQlT
VUJURVNUKGxpdmVfdmlydHVhbF9tYXNrKSwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZ2VtLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5oCmluZGV4IDIw
MTFmOGU5YTlmMS4uZjZmOTY3NTg0OGI4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2dlbS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmgKQEAgLTEx
MiwxOCArMTEyLDQgQEAgc3RhdGljIGlubGluZSBib29sIF9fdGFza2xldF9pc19zY2hlZHVsZWQo
c3RydWN0IHRhc2tsZXRfc3RydWN0ICp0KQogCXJldHVybiB0ZXN0X2JpdChUQVNLTEVUX1NUQVRF
X1NDSEVELCAmdC0+c3RhdGUpOwogfQogCi1zdGF0aWMgaW5saW5lIHZvaWQgY2FuY2VsX3RpbWVy
KHN0cnVjdCB0aW1lcl9saXN0ICp0KQotewotCWlmICghUkVBRF9PTkNFKHQtPmV4cGlyZXMpKQot
CQlyZXR1cm47Ci0KLQlkZWxfdGltZXIodCk7Ci0JV1JJVEVfT05DRSh0LT5leHBpcmVzLCAwKTsK
LX0KLQotc3RhdGljIGlubGluZSBib29sIHRpbWVyX2V4cGlyZWQoY29uc3Qgc3RydWN0IHRpbWVy
X2xpc3QgKnQpCi17Ci0JcmV0dXJuIFJFQURfT05DRSh0LT5leHBpcmVzKSAmJiAhdGltZXJfcGVu
ZGluZyh0KTsKLX0KLQogI2VuZGlmIC8qIF9fSTkxNV9HRU1fSF9fICovCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3BhcmFtcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9wYXJhbXMuaAppbmRleCBkMjlhZGUzYjdkZTYuLjU2MDU4OTc4YmIyNyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wYXJhbXMuaAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X3BhcmFtcy5oCkBAIC02MSw3ICs2MSw3IEBAIHN0cnVjdCBkcm1fcHJpbnRl
cjsKIAlwYXJhbShjaGFyICosIGRtY19maXJtd2FyZV9wYXRoLCBOVUxMKSBcCiAJcGFyYW0oaW50
LCBtbWlvX2RlYnVnLCAtSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfREVCVUdfTU1JTykpIFwK
IAlwYXJhbShpbnQsIGVkcF92c3dpbmcsIDApIFwKLQlwYXJhbShpbnQsIHJlc2V0LCAyKSBcCisJ
cGFyYW0oaW50LCByZXNldCwgMykgXAogCXBhcmFtKHVuc2lnbmVkIGludCwgaW5qZWN0X2xvYWRf
ZmFpbHVyZSwgMCkgXAogCXBhcmFtKGludCwgZmFzdGJvb3QsIC0xKSBcCiAJcGFyYW0oaW50LCBl
bmFibGVfZHBjZF9iYWNrbGlnaHQsIDApIFwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfdXRpbHMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdXRpbHMuYwppbmRl
eCAxNmFjZGY3YmRiZTYuLjAyZTk2OWI2NDUwNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV91dGlscy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdXRpbHMu
YwpAQCAtNzYsMyArNzYsMzIgQEAgYm9vbCBpOTE1X2Vycm9yX2luamVjdGVkKHZvaWQpCiB9CiAK
ICNlbmRpZgorCit2b2lkIGNhbmNlbF90aW1lcihzdHJ1Y3QgdGltZXJfbGlzdCAqdCkKK3sKKwlp
ZiAoIVJFQURfT05DRSh0LT5leHBpcmVzKSkKKwkJcmV0dXJuOworCisJZGVsX3RpbWVyKHQpOwor
CVdSSVRFX09OQ0UodC0+ZXhwaXJlcywgMCk7Cit9CisKK3ZvaWQgc2V0X3RpbWVyX21zKHN0cnVj
dCB0aW1lcl9saXN0ICp0LCB1bnNpZ25lZCBsb25nIHRpbWVvdXQpCit7CisJaWYgKCF0aW1lb3V0
KSB7CisJCWNhbmNlbF90aW1lcih0KTsKKwkJcmV0dXJuOworCX0KKworCXRpbWVvdXQgPSBtc2Vj
c190b19qaWZmaWVzX3RpbWVvdXQodGltZW91dCk7CisKKwkvKgorCSAqIFBhcmFub2lhIHRvIG1h
a2Ugc3VyZSB0aGUgY29tcGlsZXIgY29tcHV0ZXMgdGhlIHRpbWVvdXQgYmVmb3JlCisJICogbG9h
ZGluZyAnamlmZmllcycgYXMgamlmZmllcyBpcyB2b2xhdGlsZSBhbmQgbWF5IGJlIHVwZGF0ZWQg
aW4KKwkgKiB0aGUgYmFja2dyb3VuZCBieSBhIHRpbWVyIHRpY2suIEFsbCB0byByZWR1Y2UgdGhl
IGNvbXBsZXhpdHkKKwkgKiBvZiB0aGUgYWRkaXRpb24gYW5kIHJlZHVjZSB0aGUgcmlzayBvZiBs
b3NpbmcgYSBqaWZmaWUuCisJICovCisJYmFycmllcigpOworCisJbW9kX3RpbWVyKHQsIGppZmZp
ZXMgKyB0aW1lb3V0KTsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
dXRpbHMuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdXRpbHMuaAppbmRleCA1NjJmNzU2
ZGE0MjEuLjk0ZjEzNmQ4YTVmZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkx
NV91dGlscy5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdXRpbHMuaApAQCAtMzIs
NiArMzIsNyBAQAogI2luY2x1ZGUgPGxpbnV4L3dvcmtxdWV1ZS5oPgogCiBzdHJ1Y3QgZHJtX2k5
MTVfcHJpdmF0ZTsKK3N0cnVjdCB0aW1lcl9saXN0OwogCiAjdW5kZWYgV0FSTl9PTgogLyogTWFu
eSBnY2Mgc2VlbSB0byBubyBzZWUgdGhyb3VnaCB0aGlzIGFuZCBmYWxsIG92ZXIgOiggKi8KQEAg
LTQyMSw0ICs0MjIsMTIgQEAgc3RhdGljIGlubGluZSB2b2lkIGFkZF90YWludF9mb3JfQ0kodW5z
aWduZWQgaW50IHRhaW50KQogCWFkZF90YWludCh0YWludCwgTE9DS0RFUF9TVElMTF9PSyk7CiB9
CiAKK3ZvaWQgY2FuY2VsX3RpbWVyKHN0cnVjdCB0aW1lcl9saXN0ICp0KTsKK3ZvaWQgc2V0X3Rp
bWVyX21zKHN0cnVjdCB0aW1lcl9saXN0ICp0LCB1bnNpZ25lZCBsb25nIHRpbWVvdXQpOworCitz
dGF0aWMgaW5saW5lIGJvb2wgdGltZXJfZXhwaXJlZChjb25zdCBzdHJ1Y3QgdGltZXJfbGlzdCAq
dCkKK3sKKwlyZXR1cm4gUkVBRF9PTkNFKHQtPmV4cGlyZXMpICYmICF0aW1lcl9wZW5kaW5nKHQp
OworfQorCiAjZW5kaWYgLyogIV9fSTkxNV9VVElMU19IICovCi0tIAoyLjI0LjAucmMwCgpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1nZnggbWFp
bGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZng=

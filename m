Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 17DD33C72C8
	for <lists+intel-gfx@lfdr.de>; Tue, 13 Jul 2021 17:06:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 007F889DC1;
	Tue, 13 Jul 2021 15:06:43 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mail-qt1-x833.google.com (mail-qt1-x833.google.com
 [IPv6:2607:f8b0:4864:20::833])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7F84E89E26;
 Tue, 13 Jul 2021 15:06:42 +0000 (UTC)
Received: by mail-qt1-x833.google.com with SMTP id z25so14105619qto.12;
 Tue, 13 Jul 2021 08:06:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=avcOBSneHtGwYvnS2J/3XZrWAcF6J73D9WvRA0UvBhU=;
 b=kuTtEgYVX+1RRPUPhHSNdmLfnpVf7kUntHscsvdQlI2As7RiJcwyid0Qv1NzIQrJgu
 NUcalAkEuHzbFXguYYmDxRjxWlOSSGiIYJugMse5ikVd9HnekJIZSrG9VOOrkaO6yC7D
 Yh+PABZm3/AmrLGB3ViQsjI+Hj9nWIit4nZd8SVgOc9BSs37Arf6n7RM2vdEyCB8D+3y
 fL+52/Ul+AbqdCguocOGKlmy4w1Vf1VvgrAaTxpHNlasx9O3feqCxK9ZzK+iJvLkGfO/
 5OKrImM9meLPE/hamrD+xEwYg5+nPOEVZm903arWqAaOpPOtofLQkuUJMslF9rzInbBF
 HsyQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=avcOBSneHtGwYvnS2J/3XZrWAcF6J73D9WvRA0UvBhU=;
 b=YdHGu7vrcDQ19I4y8OxcM2m7IsaAfFyRRcm0xHBqDY0wPjrZ6ESsxqn6tNSbgxqJb+
 8/pOuRQ3sNAqSbVvome3BI5AtQFqNhPlR/jwgMyEy+okUuFLkKLUQzDSJF8NcSItAOBW
 kfHlGToeI5G6H4Rc0IkhGCAv+a1VupO+dPVhohe0Fu8HdUoyct+RPfbV+y03gvaGiVHS
 aErPk95T/dsvNquKyNYM6OBpaSz6+alNyhE4q5xmZGpyH0jNcUPqVKiOkduQityGQhIp
 i7emEDMa+GL3wZ2SNh7U+sLB1/OJW34+Q2F4MMwvpTH0hsssKyKznhRizhJd+Z5DKKKR
 jXLw==
X-Gm-Message-State: AOAM531SvbIxv5EOK5L6UuL4eNnUANVAQ+qF00HlJtlzDbfDeaI4DJBP
 8bmjoYTz3vO8Z+CBuWosMT7H9rZn9DQsgjR29RE=
X-Google-Smtp-Source: ABdhPJzrMAQ7eStNSFHWPQorTQaxWIZWDONBkw6Hukt4kXVOpjj2O1k2bO6uX7IRZAKPxsgP0wUNXEylk3oZrbA7Q98=
X-Received: by 2002:a05:622a:448:: with SMTP id
 o8mr4483460qtx.341.1626188801707; 
 Tue, 13 Jul 2021 08:06:41 -0700 (PDT)
MIME-Version: 1.0
References: <20210712231234.1031975-1-jason@jlekstrand.net>
 <20210712231234.1031975-2-jason@jlekstrand.net>
 <YO2m36je6vf6Wgwu@phenom.ffwll.local>
In-Reply-To: <YO2m36je6vf6Wgwu@phenom.ffwll.local>
From: Matthew Auld <matthew.william.auld@gmail.com>
Date: Tue, 13 Jul 2021 16:06:13 +0100
Message-ID: <CAM0jSHP3WyNwwr3VJ6zxKd5NqqXGJ+m_gSXACrptWO6zHnTAWw@mail.gmail.com>
To: Daniel Vetter <daniel@ffwll.ch>
Subject: Re: [Intel-gfx] [PATCH 2/2] drm/i915/gem: Migrate to system at
 dma-buf attach time (v5)
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?Q?Thomas_Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 ML dri-devel <dri-devel@lists.freedesktop.org>,
 Matthew Auld <matthew.auld@intel.com>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gVHVlLCAxMyBKdWwgMjAyMSBhdCAxNTo0NCwgRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xs
LmNoPiB3cm90ZToKPgo+IE9uIE1vbiwgSnVsIDEyLCAyMDIxIGF0IDA2OjEyOjM0UE0gLTA1MDAs
IEphc29uIEVrc3RyYW5kIHdyb3RlOgo+ID4gRnJvbTogVGhvbWFzIEhlbGxzdHLDtm0gPHRob21h
cy5oZWxsc3Ryb21AbGludXguaW50ZWwuY29tPgo+ID4KPiA+IFVudGlsIHdlIHN1cHBvcnQgcDJw
IGRtYSBvciBhcyBhIGNvbXBsZW1lbnQgdG8gdGhhdCwgbWlncmF0ZSBkYXRhCj4gPiB0byBzeXN0
ZW0gbWVtb3J5IGF0IGRtYS1idWYgYXR0YWNoIHRpbWUgaWYgcG9zc2libGUuCj4gPgo+ID4gdjI6
Cj4gPiAtIFJlYmFzZSBvbiBkeW5hbWljIGV4cG9ydGVyLiBVcGRhdGUgdGhlIGlndF9kbWFidWZf
aW1wb3J0X3NhbWVfZHJpdmVyCj4gPiAgIHNlbGZ0ZXN0IHRvIG1pZ3JhdGUgaWYgd2UgYXJlIExN
RU0gY2FwYWJsZS4KPiA+IHYzOgo+ID4gLSBNaWdyYXRlIGFsc28gaW4gdGhlIHBpbigpIGNhbGxi
YWNrLgo+ID4gdjQ6Cj4gPiAtIE1pZ3JhdGUgaW4gYXR0YWNoCj4gPiB2NTogKGphc29uKQo+ID4g
LSBMb2NrIGFyb3VuZCB0aGUgbWlncmF0aW9uCj4gPgo+ID4gU2lnbmVkLW9mZi1ieTogVGhvbWFz
IEhlbGxzdHLDtm0gPHRob21hcy5oZWxsc3Ryb21AbGludXguaW50ZWwuY29tPgo+ID4gU2lnbmVk
LW9mZi1ieTogTWljaGFlbCBKLiBSdWhsIDxtaWNoYWVsLmoucnVobEBpbnRlbC5jb20+Cj4gPiBS
ZXBvcnRlZC1ieToga2VybmVsIHRlc3Qgcm9ib3QgPGxrcEBpbnRlbC5jb20+Cj4gPiBTaWduZWQt
b2ZmLWJ5OiBKYXNvbiBFa3N0cmFuZCA8amFzb25Aamxla3N0cmFuZC5uZXQ+Cj4gPiBSZXZpZXdl
ZC1ieTogSmFzb24gRWtzdHJhbmQgPGphc29uQGpsZWtzdHJhbmQubmV0Pgo+ID4gLS0tCj4gPiAg
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jICAgIHwgMjUgKysrKysr
KysrKysrKysrKysrLQo+ID4gIC4uLi9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2Rt
YWJ1Zi5jICB8ICA0ICsrLQo+ID4gIDIgZmlsZXMgY2hhbmdlZCwgMjcgaW5zZXJ0aW9ucygrKSwg
MiBkZWxldGlvbnMoLSkKPiA+Cj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X2RtYWJ1Zi5jCj4gPiBpbmRleCA5YTY1NWY2OWEwNjcxLi4zMTYzZjAwNTU0NDc2IDEwMDY0NAo+
ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jCj4gPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG1hYnVmLmMKPiA+IEBAIC0x
NzAsOCArMTcwLDMxIEBAIHN0YXRpYyBpbnQgaTkxNV9nZW1fZG1hYnVmX2F0dGFjaChzdHJ1Y3Qg
ZG1hX2J1ZiAqZG1hYnVmLAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1
Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gpCj4gPiAgewo+ID4gICAgICAgc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iaiA9IGRtYV9idWZfdG9fb2JqKGRtYWJ1Zik7Cj4gPiArICAg
ICBzdHJ1Y3QgaTkxNV9nZW1fd3dfY3R4IHd3Owo+ID4gKyAgICAgaW50IGVycjsKPiA+ICsKPiA+
ICsgICAgIGZvcl9pOTE1X2dlbV93dygmd3csIGVyciwgdHJ1ZSkgewo+ID4gKyAgICAgICAgICAg
ICBlcnIgPSBpOTE1X2dlbV9vYmplY3RfbG9jayhvYmosICZ3dyk7Cj4gPiArICAgICAgICAgICAg
IGlmIChlcnIpCj4gPiArICAgICAgICAgICAgICAgICAgICAgY29udGludWU7Cj4gPiArCj4gPiAr
ICAgICAgICAgICAgIGlmICghaTkxNV9nZW1fb2JqZWN0X2Nhbl9taWdyYXRlKG9iaiwgSU5URUxf
UkVHSU9OX1NNRU0pKSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgZXJyID0gLUVPUE5PVFNV
UFA7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgY29udGludWU7Cj4gPiArICAgICAgICAgICAg
IH0KPiA+ICsKPiA+ICsgICAgICAgICAgICAgZXJyID0gaTkxNV9nZW1fb2JqZWN0X21pZ3JhdGUo
b2JqLCAmd3csIElOVEVMX1JFR0lPTl9TTUVNKTsKPiA+ICsgICAgICAgICAgICAgaWYgKGVycikK
PiA+ICsgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPiA+Cj4gPiAtICAgICByZXR1cm4g
aTkxNV9nZW1fb2JqZWN0X3Bpbl9wYWdlc191bmxvY2tlZChvYmopOwo+ID4gKyAgICAgICAgICAg
ICBlcnIgPSBpOTE1X2dlbV9vYmplY3Rfd2FpdF9taWdyYXRpb24ob2JqLCAwKTsKPiA+ICsgICAg
ICAgICAgICAgaWYgKGVycikKPiA+ICsgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPiA+
ICsKPiA+ICsgICAgICAgICAgICAgZXJyID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9wYWdlcyhvYmop
Owo+ID4gKyAgICAgfQo+ID4gKwo+ID4gKyAgICAgcmV0dXJuIGVycjsKPiA+ICB9Cj4gPgo+ID4g
IHN0YXRpYyB2b2lkIGk5MTVfZ2VtX2RtYWJ1Zl9kZXRhY2goc3RydWN0IGRtYV9idWYgKmRtYWJ1
ZiwKPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5
MTVfZ2VtX2RtYWJ1Zi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1
X2dlbV9kbWFidWYuYwo+ID4gaW5kZXggM2RjMGY4YjNjZGFiMC4uNGY3ZTc3YjFjMDE1MiAxMDA2
NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1f
ZG1hYnVmLmMKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkx
NV9nZW1fZG1hYnVmLmMKPiA+IEBAIC0xMDYsNyArMTA2LDkgQEAgc3RhdGljIGludCBpZ3RfZG1h
YnVmX2ltcG9ydF9zYW1lX2RyaXZlcih2b2lkICphcmcpCj4gPiAgICAgICBpbnQgZXJyOwo+ID4K
PiA+ICAgICAgIGZvcmNlX2RpZmZlcmVudF9kZXZpY2VzID0gdHJ1ZTsKPiA+IC0gICAgIG9iaiA9
IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfc2htZW0oaTkxNSwgUEFHRV9TSVpFKTsKPiA+ICsgICAg
IG9iaiA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfbG1lbShpOTE1LCBQQUdFX1NJWkUsIDApOwo+
Cj4gSSdtIHdvbmRlcmluZyAoYW5kIGNvdWxkbid0IGFuc3dlcikgd2hldGhlciB0aGlzIGNyZWF0
ZXMgYW4gbG1lbStzbWVtCj4gYnVmZmVyLCBzaW5jZSBpZiB3ZSBjcmVhdGUgYW4gbG1lbS1vbmx5
IGJ1ZmZlciB0aGVuIHRoZSBtaWdyYXRpb24gYWJvdmUKPiBzaG91bGQgZmFpbC4KCkl0J3MgbG1l
bS1vbmx5LCBidXQgaXQncyBhbHNvIGEga2VybmVsIGludGVybmFsIG9iamVjdCwgc28gdGhlCm1p
Z3JhdGlvbiBwYXRoIHdpbGwgc3RpbGwgaGFwcGlseSBtaWdyYXRlIGl0IGlmIGFza2VkLiBPbiB0
aGUgb3RoZXIKaGFuZCBpZiBpdCdzIGEgdXNlcnNwYWNlIG9iamVjdCB0aGVuIHdlIGFsd2F5cyBo
YXZlIHRvIHJlc3BlY3QgdGhlCnBsYWNlbWVudHMuCgpJIHRoaW5rIGZvciBub3cgdGhlIG9ubHkg
dXNlY2FzZSBmb3IgdGhhdCBpcyBpbiB0aGUgc2VsZnRlc3RzLgoKPgo+IFdoaWNoIEknbSBhbHNv
IG5vdCBzdXJlIHdlIGhhdmUgYSB0ZXN0Y2FzZSBmb3IgdGhhdCB0ZXN0Y2FzZSBlaXRoZXIgLi4u
Cj4KPiBJIHRyaWVkIHRvIHJlYWQgc29tZSBjb2RlIGhlcmUsIGJ1dCBnb3QgYSBiaXQgbG9zdC4g
SWRlYXM/Cj4gLURhbmllbAo+Cj4gPiArICAgICBpZiAoSVNfRVJSKG9iaikpCj4gPiArICAgICAg
ICAgICAgIG9iaiA9IGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfc2htZW0oaTkxNSwgUEFHRV9TSVpF
KTsKPiA+ICAgICAgIGlmIChJU19FUlIob2JqKSkKPiA+ICAgICAgICAgICAgICAgZ290byBvdXRf
cmV0Owo+ID4KPiA+IC0tCj4gPiAyLjMxLjEKPiA+Cj4KPiAtLQo+IERhbmllbCBWZXR0ZXIKPiBT
b2Z0d2FyZSBFbmdpbmVlciwgSW50ZWwgQ29ycG9yYXRpb24KPiBodHRwOi8vYmxvZy5mZndsbC5j
aApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC1n
ZnggbWFpbGluZyBsaXN0CkludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC1nZngK

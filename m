Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1D4FB1BE6FD
	for <lists+intel-gfx@lfdr.de>; Wed, 29 Apr 2020 21:11:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 702C66EB0A;
	Wed, 29 Apr 2020 19:11:09 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5141C6EB0A
 for <intel-gfx@lists.freedesktop.org>; Wed, 29 Apr 2020 19:11:08 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 21062509-1500050 for multiple; Wed, 29 Apr 2020 20:11:05 +0100
MIME-Version: 1.0
In-Reply-To: <20200429185457.26235-3-ville.syrjala@linux.intel.com>
References: <20200429185457.26235-1-ville.syrjala@linux.intel.com>
 <20200429185457.26235-3-ville.syrjala@linux.intel.com>
To: Ville Syrjala <ville.syrjala@linux.intel.com>,
 intel-gfx@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
Message-ID: <158818746416.7361.9034229943717642889@build.alporthouse.com>
User-Agent: alot/0.8.1
Date: Wed, 29 Apr 2020 20:11:04 +0100
Subject: Re: [Intel-gfx] [PATCH 3/3] drm/i915: Streamline the artihmetic
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

UXVvdGluZyBWaWxsZSBTeXJqYWxhICgyMDIwLTA0LTI5IDE5OjU0OjU3KQo+IEZyb206IFZpbGxl
IFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+Cj4gCj4gQWxsIHRoZXNl
IFJPVU5ESU5EX0ZBQ1RPUnMgYW5kIHdoYXRub3QgYXJlIG1ha2luZyB0aGlzIHRoaW5nIGhhcmQg
dG8KPiByZWFkLiBHZXQgcmlkIG9mIHRoZW0uIEFuZCBsZXQncyBtYXNzYWdlIHNvbWUgb2YgdGhl
IGZyYWN0aW9ucyB0bwo+IGdpdmUgdXMgbGVzcyBxdWVzdGlvbmFibGUgaW50ZXJtZWRpYXRlIHJl
c3VsdHMgYW5kIHBlcmhhcHMgbGVzcwo+IGRpdmlzaW9ucy4KPiAKPiBBbHNvIGxvb2tzIGxpa2Ug
YSBnb29kIGhlbHBpbmcgb2YgNjRiaXQgbWF0aCBzdHVmZiBpcyBuZWVkZWQgdG8KPiBhdm9pZCBz
b21lIG9mIG92ZXJmbG93cyBwcmVzZW50IGluIHRoZSBjdXJyZW50IGNvZGUuIFRoZXJlCj4gbWln
aHQgc3RpbGwgYmUgYSBmZXcgb3ZlcmZsb3dzLCBuYW1lbHkgd2hlbiBjYWxjdWxhdGluZwo+IGxp
bmtfY2xrc19hdmFpbGFibGUvc2FtcGxlc19yb29tICh3b3VsZCByZXF1aXJlIGEgaHVnZSBoYmxh
bmsKPiB0aG91Z2gpLCBhbmQgcG90ZW50aWFsbHkgd2hlbiBjYWxjdWxhdGluZyBoYmxhbmtfcmlz
ZSAobm90IHN1cmUKPiBob3cgbGFyZ2UgbGlua19jbGtzX2FjdGl2ZSBjYW4gZ2V0KS4KPiAKPiBJ
dCBsb29rcyBsaWtlIHdlJ3JlIHN0aWxsIG5vdCBjYWxjdWxhdGluZyBleGFjdGx5IHdoYXQgdGhl
IHNwZWMgc2F5cwo+IHNpbmNlIHdlIHRydW5jYXRlIHR1X2RhdGEgYW5kIHR1X2xpbmUgZWFybHku
IEJ1dCBJJ20gdG9vIGxhenkgdG8KPiBmaWd1cmUgb3V0IGlmIHdlIGNvdWxkIGF2b2lkIHRoYXQu
Cj4gCj4gQ2M6IEFuc2h1bWFuIEd1cHRhIDxhbnNodW1hbi5ndXB0YUBpbnRlbC5jb20+Cj4gQ2M6
IFVtYSBTaGFua2FyIDx1bWEuc2hhbmthckBpbnRlbC5jb20+Cj4gU2lnbmVkLW9mZi1ieTogVmls
bGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KPiAtLS0KPiAgZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdWRpby5jIHwgNTQgKysrKysrKystLS0t
LS0tLS0tLS0tLQo+ICAxIGZpbGUgY2hhbmdlZCwgMTkgaW5zZXJ0aW9ucygrKSwgMzUgZGVsZXRp
b25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfYXVkaW8uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXVkaW8uYwo+
IGluZGV4IDAwZjdhM2NmOWEwNC4uMDVjYWI1MDhjNjI2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXVkaW8uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXVkaW8uYwo+IEBAIC01MTcsMTYgKzUxNywxNiBAQCBzdGF0
aWMgdm9pZCBoc3dfYXVkaW9fY29kZWNfZGlzYWJsZShzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5j
b2RlciwKPiAgLyogQWRkIGEgZmFjdG9yIHRvIHRha2UgY2FyZSBvZiByb3VuZGluZyBhbmQgdHJ1
bmNhdGlvbnMgKi8KPiAgI2RlZmluZSBST1VORElOR19GQUNUT1IgMTAwMDAKPiAgCj4gLXN0YXRp
YyB1bnNpZ25lZCBpbnQgZ2V0X2hibGFua19lYXJseV9lbmFibGVfY29uZmlnKHN0cnVjdCBpbnRl
bF9lbmNvZGVyICplbmNvZGVyLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
KQo+ICtzdGF0aWMgdW5zaWduZWQgaW50IGNhbGNfaGJsYW5rX2Vhcmx5X3Byb2coc3RydWN0IGlu
dGVsX2VuY29kZXIgKmVuY29kZXIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlKQo+ICB7
Cj4gICAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IHRvX2k5MTUoZW5jb2Rl
ci0+YmFzZS5kZXYpOwo+ICAgICAgICAgdW5zaWduZWQgaW50IGxpbmtfY2xrc19hdmFpbGFibGUs
IGxpbmtfY2xrc19yZXF1aXJlZDsKPiAgICAgICAgIHVuc2lnbmVkIGludCB0dV9kYXRhLCB0dV9s
aW5lLCBsaW5rX2Nsa3NfYWN0aXZlOwo+IC0gICAgICAgdW5zaWduZWQgaW50IGhibGFua19yaXNl
LCBoYmxhbmtfZWFybHlfcHJvZzsKPiAgICAgICAgIHVuc2lnbmVkIGludCBoX2FjdGl2ZSwgaF90
b3RhbCwgaGJsYW5rX2RlbHRhLCBwaXhlbF9jbGs7Cj4gICAgICAgICB1bnNpZ25lZCBpbnQgZmVj
X2NvZWZmLCBjZGNsaywgdmRzY19icHA7Cj4gICAgICAgICB1bnNpZ25lZCBpbnQgbGlua19jbGss
IGxhbmVzOwo+ICsgICAgICAgdW5zaWduZWQgaW50IGhibGFua19yaXNlOwo+ICAKPiAgICAgICAg
IGhfYWN0aXZlID0gY3J0Y19zdGF0ZS0+aHcuYWRqdXN0ZWRfbW9kZS5jcnRjX2hkaXNwbGF5Owo+
ICAgICAgICAgaF90b3RhbCA9IGNydGNfc3RhdGUtPmh3LmFkanVzdGVkX21vZGUuY3J0Y19odG90
YWw7Cj4gQEAgLTU0Miw0NCArNTQyLDMzIEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgZ2V0X2hibGFu
a19lYXJseV9lbmFibGVfY29uZmlnKHN0cnVjdCBpbnRlbF9lbmNvZGVyICplbmNvZGVyCj4gICAg
ICAgICAgICAgICAgICAgICAibGFuZXMgPSAldSB2ZHNjX2JwcCA9ICV1IGNkY2xrID0gJXVcbiIs
Cj4gICAgICAgICAgICAgICAgICAgICBoX2FjdGl2ZSwgbGlua19jbGssIGxhbmVzLCB2ZHNjX2Jw
cCwgY2RjbGspOwo+ICAKPiAtICAgICAgIGlmIChXQVJOX09OKCFsaW5rX2NsayB8fCAhbGFuZXMg
fHwgIXZkc2NfYnBwIHx8ICFjZGNsaykpCj4gKyAgICAgICBpZiAoV0FSTl9PTighbGlua19jbGsg
fHwgIXBpeGVsX2NsayB8fCAhbGFuZXMgfHwgIXZkc2NfYnBwIHx8ICFjZGNsaykpCj4gICAgICAg
ICAgICAgICAgIHJldHVybiAwOwo+ICAKPiAtICAgICAgIGxpbmtfY2xrc19hdmFpbGFibGUgPSAo
KCgoaF90b3RhbCAtIGhfYWN0aXZlKSAqCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICgobGlua19jbGsgKiBST1VORElOR19GQUNUT1IpIC8KPiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHBpeGVsX2NsaykpIC8gUk9VTkRJTkdfRkFDVE9SKSAtIDI4KTsKPiAtICAgICAg
IGxpbmtfY2xrc19yZXF1aXJlZCA9IERJVl9ST1VORF9VUCgxOTIwMDAsICgxMDAwICogcGl4ZWxf
Y2xrIC8gaF90b3RhbCkpICogKCg0OCAvCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgbGFuZXMpICsgMik7Cj4gKyAgICAgICBsaW5rX2Nsa3NfYXZhaWxhYmxlID0g
KGhfdG90YWwgLSBoX2FjdGl2ZSkgKiBsaW5rX2NsayAvIHBpeGVsX2NsayAtIDI4Owo+ICsgICAg
ICAgbGlua19jbGtzX3JlcXVpcmVkID0gRElWX1JPVU5EX1VQKDE5MjAwMCAqIGhfdG90YWwsIDEw
MDAgKiBwaXhlbF9jbGspICogKDQ4IC8gbGFuZXMgKyAyKTsKClRoYXQncyBhIHJlbGllZi4KCj4g
IAo+ICAgICAgICAgaWYgKGxpbmtfY2xrc19hdmFpbGFibGUgPiBsaW5rX2Nsa3NfcmVxdWlyZWQp
Cj4gICAgICAgICAgICAgICAgIGhibGFua19kZWx0YSA9IDMyOwo+ICAgICAgICAgZWxzZQo+IC0g
ICAgICAgICAgICAgICBoYmxhbmtfZGVsdGEgPSBESVZfUk9VTkRfVVAoKCgoKDUgKiBST1VORElO
R19GQUNUT1IpIC8KPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGxpbmtfY2xrKSArICgoNSAqCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBST1VORElOR19GQUNUT1IpIC8KPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGNkY2xrKSkgKiBwaXhlbF9jbGspLAo+IC0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgUk9VTkRJTkdfRkFDVE9SKTsKPiArICAgICAgICAg
ICAgICAgaGJsYW5rX2RlbHRhID0gRElWNjRfVTY0X1JPVU5EX1VQKG11bF91MzJfdTMyKDUgKiBs
aW5rX2NsayArIDUgKiBjZGNsaywgcGl4ZWxfY2xrKSwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11bF91MzJfdTMyKGxpbmtfY2xrLCBjZGNsaykp
OwoKNSAqIG11bF91MzJfdTMyKGxpbmtfY2xrLCBjZGNsaywgcGl4ZWxfY2xrKQoKPiAgCj4gLSAg
ICAgICB0dV9kYXRhID0gKHBpeGVsX2NsayAqIHZkc2NfYnBwICogOCkgLyAoKGxpbmtfY2xrICoK
PiAtICAgICAgICAgICAgICAgICAgbGFuZXMgKiBmZWNfY29lZmYpIC8gMTAwMDAwMCk7Cj4gLSAg
ICAgICB0dV9saW5lID0gKCgoaF9hY3RpdmUgKiBsaW5rX2NsayAqIGZlY19jb2VmZikgLwo+IC0g
ICAgICAgICAgICAgICAgICAxMDAwMDAwKSAvICg2NCAqIHBpeGVsX2NsaykpOwo+ICsgICAgICAg
dHVfZGF0YSA9IGRpdjY0X3U2NChtdWxfdTMyX3UzMihwaXhlbF9jbGsgKiB2ZHNjX2JwcCAqIDgs
IDEwMDAwMDApLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWxfdTMyX3UzMihsaW5r
X2NsayAqIGxhbmVzLCBmZWNfY29lZmYpKTsKClRoYXQgMTAwMDAwMCBpcyBmZWNfc2NhbGUuCgo+
ICsgICAgICAgdHVfbGluZSA9IGRpdjY0X3U2NChoX2FjdGl2ZSAqIG11bF91MzJfdTMyKGxpbmtf
Y2xrLCBmZWNfY29lZmYpLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWxfdTMyX3Uz
Mig2NCAqIHBpeGVsX2NsaywgMTAwMDAwMCkpOwo+ICAgICAgICAgbGlua19jbGtzX2FjdGl2ZSAg
PSAodHVfbGluZSAtIDEpICogNjQgKyB0dV9kYXRhOwoKVHJhbnNmb3JtYXRpb25zIGxvb2sgY29y
cmVjdC4KCj4gLSAgICAgICBoYmxhbmtfcmlzZSA9ICgobGlua19jbGtzX2FjdGl2ZSArIDYgKiBE
SVZfUk9VTkRfVVAobGlua19jbGtzX2FjdGl2ZSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAy
NTApICsgNCkgKiAoKHBpeGVsX2NsayAqIFJPVU5ESU5HX0ZBQ1RPUikgLwo+IC0gICAgICAgICAg
ICAgICAgICAgICAgIGxpbmtfY2xrKSkgLyBST1VORElOR19GQUNUT1I7Cj4gKyAgICAgICBoYmxh
bmtfcmlzZSA9IChsaW5rX2Nsa3NfYWN0aXZlICsgNiAqIERJVl9ST1VORF9VUChsaW5rX2Nsa3Nf
YWN0aXZlLCAyNTApICsgNCkgKiBwaXhlbF9jbGsgLyBsaW5rX2NsazsKPiAgCj4gLSAgICAgICBo
YmxhbmtfZWFybHlfcHJvZyA9IGhfYWN0aXZlIC0gaGJsYW5rX3Jpc2UgKyBoYmxhbmtfZGVsdGE7
Cj4gLQo+IC0gICAgICAgcmV0dXJuIGhibGFua19lYXJseV9wcm9nOwo+ICsgICAgICAgcmV0dXJu
IGhfYWN0aXZlIC0gaGJsYW5rX3Jpc2UgKyBoYmxhbmtfZGVsdGE7CgpST1VORElOR19GQUNUT1Ig
ZG9lc24ndCBzZWVtIHRvIGRvIGFueSByb3VuZGluZy4KCj4gIH0KPiAgCj4gLXN0YXRpYyB1bnNp
Z25lZCBpbnQgZ2V0X3NhbXBsZV9yb29tX3JlcV9jb25maWcoY29uc3Qgc3RydWN0IGludGVsX2Ny
dGNfc3RhdGUgKmNydGNfc3RhdGUpCj4gK3N0YXRpYyB1bnNpZ25lZCBpbnQgY2FsY19zYW1wbGVz
X3Jvb20oY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCj4gIHsKPiAg
ICAgICAgIHVuc2lnbmVkIGludCBoX2FjdGl2ZSwgaF90b3RhbCwgcGl4ZWxfY2xrOwo+ICAgICAg
ICAgdW5zaWduZWQgaW50IGxpbmtfY2xrLCBsYW5lczsKPiAtICAgICAgIHVuc2lnbmVkIGludCBz
YW1wbGVzX3Jvb207Cj4gIAo+ICAgICAgICAgaF9hY3RpdmUgPSBjcnRjX3N0YXRlLT5ody5hZGp1
c3RlZF9tb2RlLmhkaXNwbGF5Owo+ICAgICAgICAgaF90b3RhbCA9IGNydGNfc3RhdGUtPmh3LmFk
anVzdGVkX21vZGUuaHRvdGFsOwo+IEBAIC01ODcsMTIgKzU3Niw4IEBAIHN0YXRpYyB1bnNpZ25l
ZCBpbnQgZ2V0X3NhbXBsZV9yb29tX3JlcV9jb25maWcoY29uc3Qgc3RydWN0IGludGVsX2NydGNf
c3RhdGUgKmNyCj4gICAgICAgICBsaW5rX2NsayA9IGNydGNfc3RhdGUtPnBvcnRfY2xvY2s7Cj4g
ICAgICAgICBsYW5lcyA9IGNydGNfc3RhdGUtPmxhbmVfY291bnQ7Cj4gIAo+IC0gICAgICAgc2Ft
cGxlc19yb29tID0gKCgoKGhfdG90YWwgLSBoX2FjdGl2ZSkgKiAoKGxpbmtfY2xrICoKPiAtICAg
ICAgICAgICAgICAgICAgICAgICBST1VORElOR19GQUNUT1IpIC8gcGl4ZWxfY2xrKSkgLwo+IC0g
ICAgICAgICAgICAgICAgICAgICAgIFJPVU5ESU5HX0ZBQ1RPUikgLSAxMikgLyAoKDQ4IC8KPiAt
ICAgICAgICAgICAgICAgICAgICAgICBsYW5lcykgKyAyKTsKPiAtCj4gLSAgICAgICByZXR1cm4g
c2FtcGxlc19yb29tOwo+ICsgICAgICAgcmV0dXJuICgoaF90b3RhbCAtIGhfYWN0aXZlKSAqIGxp
bmtfY2xrIC0gMTIgKiBwaXhlbF9jbGspIC8KPiArICAgICAgICAgICAgICAgKHBpeGVsX2NsayAq
ICg0OCAvIGxhbmVzICsgMikpOwoKRXhwYW5zaW9uIG9mIGZyYWN0aW9ucyBsb29rcyBmaW5lLgoK
VGhlIG1hdGhzIGxvb2tzIHRvIGJlIHRoZSBzYW1lLCBzbwpSZXZpZXdlZC1ieTogQ2hyaXMgV2ls
c29uIDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+CgpEb24ndCBhc2sgbWUgYWJvdXQgdGhlIG1l
YW5pbmcgb2YgaXQgdGhvdWdoLgoKT25lIHF1ZXN0aW9uIG1pZ2h0IGJlIGlmIHRoZXJlIGFyZSBr
bm93biBpbnB1dHMvb3V0cHV0cyB3ZSBjYW4gYnVpbGQKaW50byBhIHVuaXQgdGVzdC4KLUNocmlz
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLWdm
eCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeAo=

Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5E4A6114504
	for <lists+intel-gfx@lfdr.de>; Thu,  5 Dec 2019 17:44:43 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A746A6E986;
	Thu,  5 Dec 2019 16:44:41 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 92D746E986
 for <intel-gfx@lists.freedesktop.org>; Thu,  5 Dec 2019 16:44:40 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 19473601-1500050 
 for multiple; Thu, 05 Dec 2019 16:44:24 +0000
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Date: Thu,  5 Dec 2019 16:44:22 +0000
Message-Id: <20191205164422.727968-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191205162428.1503-1-andi.shyti@intel.com>
References: <20191205162428.1503-1-andi.shyti@intel.com>
MIME-Version: 1.0
Subject: [Intel-gfx] [PATCH] drm/i915/gt: Replace I915_READ with
 intel_uncore_read
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

RnJvbTogQW5kaSBTaHl0aSA8YW5kaS5zaHl0aUBpbnRlbC5jb20+CgpHZXQgcmlkIG9mIHRoZSBs
YXN0IHJlbWFpbmluZyBJOTE1X1JFQUQgaW4gZ3QvIGFuZCBtYWtlIGd0LWxhbmQKdGhlIGZpcnN0
IEk5MTVfUkVBRC1mcmVlIGhhcHB5IGlzbGFuZC4KClN1Z2dlc3RlZC1ieTogQ2hyaXMgV2lsc29u
IDxjaHJpc0BjaHJpcy13aWxzb24uY28udWs+ClNpZ25lZC1vZmYtYnk6IEFuZGkgU2h5dGkgPGFu
ZGkuc2h5dGlAaW50ZWwuY29tPgotLS0KUGFzcyBpbiBpbnRlbF9ndCBmb3IgdGhlIGxvY2FsIGd0
LT51bmNvcmUgbGluay4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9lbmdpbmUu
aCAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lX2NzLmMg
IHwgMjQgKysrKysrKysrKystLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMv
aW50ZWxfZ3VjX2Fkcy5jIHwgIDMgKystCiAzIGZpbGVzIGNoYW5nZWQsIDE1IGluc2VydGlvbnMo
KyksIDE0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZS5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZW5naW5lLmgK
aW5kZXggMDE3NjVhN2VjMThmLi5jMjk0ZWE4MDYwNWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2ludGVsX2VuZ2luZS5oCkBAIC0yOTYsNyArMjk2LDcgQEAga3RpbWVfdCBpbnRlbF9lbmdpbmVf
Z2V0X2J1c3lfdGltZShzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpOwogc3RydWN0IGk5
MTVfcmVxdWVzdCAqCiBpbnRlbF9lbmdpbmVfZmluZF9hY3RpdmVfcmVxdWVzdChzdHJ1Y3QgaW50
ZWxfZW5naW5lX2NzICplbmdpbmUpOwogCi11MzIgaW50ZWxfZW5naW5lX2NvbnRleHRfc2l6ZShz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgdTggY2xhc3MpOwordTMyIGludGVsX2VuZ2lu
ZV9jb250ZXh0X3NpemUoc3RydWN0IGludGVsX2d0ICpndCwgdTggY2xhc3MpOwogCiAjaWYgSVNf
RU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VMRlRFU1QpCiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfZW5naW5lX2NzLmMKaW5kZXggZGYzMzY5YzNmMzMwLi40OTQ3M2MyNTkxNmMgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2VuZ2luZV9jcy5jCkBAIC0xNDEsNyArMTQx
LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBlbmdpbmVfaW5mbyBpbnRlbF9lbmdpbmVzW10gPSB7
CiAKIC8qKgogICogaW50ZWxfZW5naW5lX2NvbnRleHRfc2l6ZSgpIC0gcmV0dXJuIHRoZSBzaXpl
IG9mIHRoZSBjb250ZXh0IGZvciBhbiBlbmdpbmUKLSAqIEBkZXZfcHJpdjogaTkxNSBkZXZpY2Ug
cHJpdmF0ZQorICogQGd0OiB0aGUgZ3QKICAqIEBjbGFzczogZW5naW5lIGNsYXNzCiAgKgogICog
RWFjaCBlbmdpbmUgY2xhc3MgbWF5IHJlcXVpcmUgYSBkaWZmZXJlbnQgYW1vdW50IG9mIHNwYWNl
IGZvciBhIGNvbnRleHQKQEAgLTE1MywxNyArMTUzLDE4IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZW5naW5lX2luZm8gaW50ZWxfZW5naW5lc1tdID0gewogICogaW4gTFJDIG1vZGUsIGJ1dCBkb2Vz
IG5vdCBpbmNsdWRlIHRoZSAic2hhcmVkIGRhdGEgcGFnZSIgdXNlZCB3aXRoCiAgKiBHdUMgc3Vi
bWlzc2lvbi4gVGhlIGNhbGxlciBzaG91bGQgYWNjb3VudCBmb3IgdGhpcyBpZiB1c2luZyB0aGUg
R3VDLgogICovCi11MzIgaW50ZWxfZW5naW5lX2NvbnRleHRfc2l6ZShzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYsIHU4IGNsYXNzKQordTMyIGludGVsX2VuZ2luZV9jb250ZXh0X3Np
emUoc3RydWN0IGludGVsX2d0ICpndCwgdTggY2xhc3MpCiB7CisJc3RydWN0IGludGVsX3VuY29y
ZSAqdW5jb3JlID0gZ3QtPnVuY29yZTsKIAl1MzIgY3h0X3NpemU7CiAKIAlCVUlMRF9CVUdfT04o
STkxNV9HVFRfUEFHRV9TSVpFICE9IFBBR0VfU0laRSk7CiAKIAlzd2l0Y2ggKGNsYXNzKSB7CiAJ
Y2FzZSBSRU5ERVJfQ0xBU1M6Ci0JCXN3aXRjaCAoSU5URUxfR0VOKGRldl9wcml2KSkgeworCQlz
d2l0Y2ggKElOVEVMX0dFTihndC0+aTkxNSkpIHsKIAkJZGVmYXVsdDoKLQkJCU1JU1NJTkdfQ0FT
RShJTlRFTF9HRU4oZGV2X3ByaXYpKTsKKwkJCU1JU1NJTkdfQ0FTRShJTlRFTF9HRU4oZ3QtPmk5
MTUpKTsKIAkJCXJldHVybiBERUZBVUxUX0xSX0NPTlRFWFRfUkVOREVSX1NJWkU7CiAJCWNhc2Ug
MTI6CiAJCWNhc2UgMTE6CkBAIC0xNzUsMTQgKzE3NiwxNCBAQCB1MzIgaW50ZWxfZW5naW5lX2Nv
bnRleHRfc2l6ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsIHU4IGNsYXNzKQog
CQljYXNlIDg6CiAJCQlyZXR1cm4gR0VOOF9MUl9DT05URVhUX1JFTkRFUl9TSVpFOwogCQljYXNl
IDc6Ci0JCQlpZiAoSVNfSEFTV0VMTChkZXZfcHJpdikpCisJCQlpZiAoSVNfSEFTV0VMTChndC0+
aTkxNSkpCiAJCQkJcmV0dXJuIEhTV19DWFRfVE9UQUxfU0laRTsKIAotCQkJY3h0X3NpemUgPSBJ
OTE1X1JFQUQoR0VON19DWFRfU0laRSk7CisJCQljeHRfc2l6ZSA9IGludGVsX3VuY29yZV9yZWFk
KHVuY29yZSwgR0VON19DWFRfU0laRSk7CiAJCQlyZXR1cm4gcm91bmRfdXAoR0VON19DWFRfVE9U
QUxfU0laRShjeHRfc2l6ZSkgKiA2NCwKIAkJCQkJUEFHRV9TSVpFKTsKIAkJY2FzZSA2OgotCQkJ
Y3h0X3NpemUgPSBJOTE1X1JFQUQoQ1hUX1NJWkUpOworCQkJY3h0X3NpemUgPSBpbnRlbF91bmNv
cmVfcmVhZCh1bmNvcmUsIENYVF9TSVpFKTsKIAkJCXJldHVybiByb3VuZF91cChHRU42X0NYVF9U
T1RBTF9TSVpFKGN4dF9zaXplKSAqIDY0LAogCQkJCQlQQUdFX1NJWkUpOwogCQljYXNlIDU6CkBA
IC0xOTcsOSArMTk4LDkgQEAgdTMyIGludGVsX2VuZ2luZV9jb250ZXh0X3NpemUoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCB1OCBjbGFzcykKIAkJCSAqIG1pbmltdW0gYWxsb2Nh
dGlvbiBhbnl3YXkgc28gaXQgc2hvdWxkIGFsbCBjb21lCiAJCQkgKiBvdXQgaW4gdGhlIHdhc2gu
CiAJCQkgKi8KLQkJCWN4dF9zaXplID0gSTkxNV9SRUFEKENYVF9TSVpFKSArIDE7CisJCQljeHRf
c2l6ZSA9IGludGVsX3VuY29yZV9yZWFkKHVuY29yZSwgQ1hUX1NJWkUpICsgMTsKIAkJCURSTV9E
RUJVR19EUklWRVIoImdlbiVkIENYVF9TSVpFID0gJWQgYnl0ZXMgWzB4JTA4eF1cbiIsCi0JCQkJ
CSBJTlRFTF9HRU4oZGV2X3ByaXYpLAorCQkJCQkgSU5URUxfR0VOKGd0LT5pOTE1KSwKIAkJCQkJ
IGN4dF9zaXplICogNjQsCiAJCQkJCSBjeHRfc2l6ZSAtIDEpOwogCQkJcmV0dXJuIHJvdW5kX3Vw
KGN4dF9zaXplICogNjQsIFBBR0VfU0laRSk7CkBAIC0yMTYsNyArMjE3LDcgQEAgdTMyIGludGVs
X2VuZ2luZV9jb250ZXh0X3NpemUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LCB1
OCBjbGFzcykKIAljYXNlIFZJREVPX0RFQ09ERV9DTEFTUzoKIAljYXNlIFZJREVPX0VOSEFOQ0VN
RU5UX0NMQVNTOgogCWNhc2UgQ09QWV9FTkdJTkVfQ0xBU1M6Ci0JCWlmIChJTlRFTF9HRU4oZGV2
X3ByaXYpIDwgOCkKKwkJaWYgKElOVEVMX0dFTihndC0+aTkxNSkgPCA4KQogCQkJcmV0dXJuIDA7
CiAJCXJldHVybiBHRU44X0xSX0NPTlRFWFRfT1RIRVJfU0laRTsKIAl9CkBAIC0zMjQsOCArMzI1
LDcgQEAgc3RhdGljIGludCBpbnRlbF9lbmdpbmVfc2V0dXAoc3RydWN0IGludGVsX2d0ICpndCwg
ZW51bSBpbnRlbF9lbmdpbmVfaWQgaWQpCiAJICovCiAJZW5naW5lLT5kZXN0cm95ID0gKHR5cGVv
ZihlbmdpbmUtPmRlc3Ryb3kpKWtmcmVlOwogCi0JZW5naW5lLT5jb250ZXh0X3NpemUgPSBpbnRl
bF9lbmdpbmVfY29udGV4dF9zaXplKGd0LT5pOTE1LAotCQkJCQkJCSBlbmdpbmUtPmNsYXNzKTsK
KwllbmdpbmUtPmNvbnRleHRfc2l6ZSA9IGludGVsX2VuZ2luZV9jb250ZXh0X3NpemUoZ3QsIGVu
Z2luZS0+Y2xhc3MpOwogCWlmIChXQVJOX09OKGVuZ2luZS0+Y29udGV4dF9zaXplID4gQklUKDIw
KSkpCiAJCWVuZ2luZS0+Y29udGV4dF9zaXplID0gMDsKIAlpZiAoZW5naW5lLT5jb250ZXh0X3Np
emUpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfYWRz
LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF9ndWNfYWRzLmMKaW5kZXggY2E2
Njc0YjhlMDBjLi4wNWNhOTA0NTZhMmMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d0L3VjL2ludGVsX2d1Y19hZHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC91Yy9p
bnRlbF9ndWNfYWRzLmMKQEAgLTkzLDcgKzkzLDggQEAgc3RhdGljIHZvaWQgX19ndWNfYWRzX2lu
aXQoc3RydWN0IGludGVsX2d1YyAqZ3VjKQogCQkgKi8KIAkJYmxvYi0+YWRzLmdvbGRlbl9jb250
ZXh0X2xyY2FbZW5naW5lX2NsYXNzXSA9IDA7CiAJCWJsb2ItPmFkcy5lbmdfc3RhdGVfc2l6ZVtl
bmdpbmVfY2xhc3NdID0KLQkJCWludGVsX2VuZ2luZV9jb250ZXh0X3NpemUoZGV2X3ByaXYsIGVu
Z2luZV9jbGFzcykgLQorCQkJaW50ZWxfZW5naW5lX2NvbnRleHRfc2l6ZShndWNfdG9fZ3QoZ3Vj
KSwKKwkJCQkJCSAgZW5naW5lX2NsYXNzKSAtCiAJCQlza2lwcGVkX3NpemU7CiAJfQogCi0tIAoy
LjI0LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCklu
dGVsLWdmeCBtYWlsaW5nIGxpc3QKSW50ZWwtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLWdmeA==

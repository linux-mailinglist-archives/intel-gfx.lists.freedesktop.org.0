Return-Path: <intel-gfx-bounces@lists.freedesktop.org>
X-Original-To: lists+intel-gfx@lfdr.de
Delivered-To: lists+intel-gfx@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 62129D93D9
	for <lists+intel-gfx@lfdr.de>; Wed, 16 Oct 2019 16:28:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A02996E991;
	Wed, 16 Oct 2019 14:28:11 +0000 (UTC)
X-Original-To: intel-gfx@lists.freedesktop.org
Delivered-To: intel-gfx@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0DFF56E991
 for <intel-gfx@lists.freedesktop.org>; Wed, 16 Oct 2019 14:28:10 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 16 Oct 2019 07:28:09 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,304,1566889200"; d="scan'208";a="202084735"
Received: from irsmsx108.ger.corp.intel.com ([163.33.3.3])
 by FMSMGA003.fm.intel.com with ESMTP; 16 Oct 2019 07:28:08 -0700
Received: from irsmsx106.ger.corp.intel.com ([169.254.8.185]) by
 IRSMSX108.ger.corp.intel.com ([169.254.11.131]) with mapi id 14.03.0439.000;
 Wed, 16 Oct 2019 15:28:07 +0100
From: "Lisovskiy, Stanislav" <stanislav.lisovskiy@intel.com>
To: "ville.syrjala@linux.intel.com" <ville.syrjala@linux.intel.com>,
 "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>
Thread-Topic: [PATCH 3/8] drm/i915: Make dirty_pipes refer to pipes
Thread-Index: AQHVgG/h+Rwd5q5ZzU6uwm4/BSlAKqddSYCA
Date: Wed, 16 Oct 2019 14:28:06 +0000
Message-ID: <e7f6d64a50ec70eb20f188eba1054f5be62ea33d.camel@intel.com>
References: <20191011200949.7839-1-ville.syrjala@linux.intel.com>
 <20191011200949.7839-4-ville.syrjala@linux.intel.com>
In-Reply-To: <20191011200949.7839-4-ville.syrjala@linux.intel.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.237.72.89]
Content-ID: <33638922F7915C4B945DD5514248F44F@intel.com>
MIME-Version: 1.0
Subject: Re: [Intel-gfx] [PATCH 3/8] drm/i915: Make dirty_pipes refer to
 pipes
X-BeenThere: intel-gfx@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Intel graphics driver community testing & development
 <intel-gfx.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/intel-gfx>
List-Post: <mailto:intel-gfx@lists.freedesktop.org>
List-Help: <mailto:intel-gfx-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/intel-gfx>,
 <mailto:intel-gfx-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-gfx-bounces@lists.freedesktop.org
Sender: "Intel-gfx" <intel-gfx-bounces@lists.freedesktop.org>

T24gRnJpLCAyMDE5LTEwLTExIGF0IDIzOjA5ICswMzAwLCBWaWxsZSBTeXJqYWxhIHdyb3RlOg0K
PiBGcm9tOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPg0K
PiANCj4gRGVzcGl0ZSB0aGUgaXRzIG5hbWUgZGlydHlfcGlwZXMgcmVmZXJzIHRvIGNydGMgaW5k
ZXhlcy4gTGV0J3MNCj4gY2hhbmdlIGl0cyBiZWhhdmlvdXQgdG8gbWF0Y2ggdGhlIG5hbWUuDQo+
IA0KPiBTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXgu
aW50ZWwuY29tPg0KDQpSZXZpZXdlZC1ieTogU3RhbmlzbGF2IExpc292c2tpeSA8c3RhbmlzbGF2
Lmxpc292c2tpeUBpbnRlbC5jb20+DQo+IC0tLQ0KPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9kaXNwbGF5LmMgfCAgOSArKystLS0tLS0NCj4gIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2ludGVsX3BtLmMgICAgICAgICAgICAgIHwgMTMgKysrKysrLS0tLS0tLQ0KPiAgMiBmaWxl
cyBjaGFuZ2VkLCA5IGluc2VydGlvbnMoKyksIDEzIGRlbGV0aW9ucygtKQ0KPiANCj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jDQo+IGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMNCj4gaW5kZXggYTE0
NmVjMDJhMGMxLi5iOWI1MWJkMGM5NTYgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jDQo+IEBAIC0xMzg4Myw3ICsxMzg4Myw2IEBAIHN0YXRp
YyB2b2lkIHNrbF9jb21taXRfbW9kZXNldF9lbmFibGVzKHN0cnVjdA0KPiBpbnRlbF9hdG9taWNf
c3RhdGUgKnN0YXRlKQ0KPiAgCXN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0
ZSwgKm5ld19jcnRjX3N0YXRlOw0KPiAgCXVuc2lnbmVkIGludCB1cGRhdGVkID0gMDsNCj4gIAli
b29sIHByb2dyZXNzOw0KPiAtCWVudW0gcGlwZSBwaXBlOw0KPiAgCWludCBpOw0KPiAgCXU4IGh3
X2VuYWJsZWRfc2xpY2VzID0gZGV2X3ByaXYtPndtLnNrbF9ody5kZGIuZW5hYmxlZF9zbGljZXM7
DQo+ICAJdTggcmVxdWlyZWRfc2xpY2VzID0gc3RhdGUtPndtX3Jlc3VsdHMuZGRiLmVuYWJsZWRf
c2xpY2VzOw0KPiBAQCAtMTM5MDgsMTIgKzEzOTA3LDEwIEBAIHN0YXRpYyB2b2lkDQo+IHNrbF9j
b21taXRfbW9kZXNldF9lbmFibGVzKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQ0K
PiAgCQlwcm9ncmVzcyA9IGZhbHNlOw0KPiAgDQo+ICAJCWZvcl9lYWNoX29sZG5ld19pbnRlbF9j
cnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLA0KPiBvbGRfY3J0Y19zdGF0ZSwgbmV3X2NydGNfc3Rh
dGUsIGkpIHsNCj4gKwkJCWVudW0gcGlwZSBwaXBlID0gY3J0Yy0+cGlwZTsNCj4gIAkJCWJvb2wg
dmJsX3dhaXQgPSBmYWxzZTsNCj4gLQkJCXVuc2lnbmVkIGludCBjbWFzayA9IGRybV9jcnRjX21h
c2soJmNydGMtDQo+ID5iYXNlKTsNCj4gLQ0KPiAtCQkJcGlwZSA9IGNydGMtPnBpcGU7DQo+ICAN
Cj4gLQkJCWlmICh1cGRhdGVkICYgY21hc2sgfHwgIW5ld19jcnRjX3N0YXRlLQ0KPiA+YmFzZS5h
Y3RpdmUpDQo+ICsJCQlpZiAodXBkYXRlZCAmIEJJVChjcnRjLT5waXBlKSB8fA0KPiAhbmV3X2Ny
dGNfc3RhdGUtPmJhc2UuYWN0aXZlKQ0KPiAgCQkJCWNvbnRpbnVlOw0KPiAgDQo+ICAJCQlpZg0K
PiAoc2tsX2RkYl9hbGxvY2F0aW9uX292ZXJsYXBzKCZuZXdfY3J0Y19zdGF0ZS0+d20uc2tsLmRk
YiwNCj4gQEAgLTEzOTIxLDcgKzEzOTE4LDcgQEAgc3RhdGljIHZvaWQgc2tsX2NvbW1pdF9tb2Rl
c2V0X2VuYWJsZXMoc3RydWN0DQo+IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUpDQo+ICAJCQkJ
CQkJSU5URUxfTlVNX1BJUEVTDQo+IChkZXZfcHJpdiksIGkpKQ0KPiAgCQkJCWNvbnRpbnVlOw0K
PiAgDQo+IC0JCQl1cGRhdGVkIHw9IGNtYXNrOw0KPiArCQkJdXBkYXRlZCB8PSBCSVQocGlwZSk7
DQo+ICAJCQllbnRyaWVzW2ldID0gbmV3X2NydGNfc3RhdGUtPndtLnNrbC5kZGI7DQo+ICANCj4g
IAkJCS8qDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jDQo+
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfcG0uYw0KPiBpbmRleCAzNTM2YzJlOTc1ZTcu
LjJiNzFkNTJhNGVkZSAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxf
cG0uYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9wbS5jDQo+IEBAIC01NTc1
LDcgKzU1NzUsNyBAQCBza2xfY29tcHV0ZV93bShzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlDQo+
ICpzdGF0ZSkNCj4gIAkJaWYgKCFza2xfcGlwZV93bV9lcXVhbHMoY3J0YywNCj4gIAkJCQkJJm9s
ZF9jcnRjX3N0YXRlLQ0KPiA+d20uc2tsLm9wdGltYWwsDQo+ICAJCQkJCSZuZXdfY3J0Y19zdGF0
ZS0NCj4gPndtLnNrbC5vcHRpbWFsKSkNCj4gLQkJCXJlc3VsdHMtPmRpcnR5X3BpcGVzIHw9IGRy
bV9jcnRjX21hc2soJmNydGMtDQo+ID5iYXNlKTsNCj4gKwkJCXJlc3VsdHMtPmRpcnR5X3BpcGVz
IHw9IEJJVChjcnRjLT5waXBlKTsNCj4gIAl9DQo+ICANCj4gIAlyZXQgPSBza2xfY29tcHV0ZV9k
ZGIoc3RhdGUpOw0KPiBAQCAtNTU5NSw3ICs1NTk1LDcgQEAgc3RhdGljIHZvaWQgc2tsX2F0b21p
Y191cGRhdGVfY3J0Y193bShzdHJ1Y3QNCj4gaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwNCj4g
IAlzdHJ1Y3Qgc2tsX3BpcGVfd20gKnBpcGVfd20gPSAmY3J0Y19zdGF0ZS0+d20uc2tsLm9wdGlt
YWw7DQo+ICAJZW51bSBwaXBlIHBpcGUgPSBjcnRjLT5waXBlOw0KPiAgDQo+IC0JaWYgKCEoc3Rh
dGUtPndtX3Jlc3VsdHMuZGlydHlfcGlwZXMgJiBkcm1fY3J0Y19tYXNrKCZjcnRjLQ0KPiA+YmFz
ZSkpKQ0KPiArCWlmICgoc3RhdGUtPndtX3Jlc3VsdHMuZGlydHlfcGlwZXMgJiBCSVQoY3J0Yy0+
cGlwZSkpID09IDApDQo+ICAJCXJldHVybjsNCj4gIA0KPiAgCUk5MTVfV1JJVEUoUElQRV9XTV9M
SU5FVElNRShwaXBlKSwgcGlwZV93bS0+bGluZXRpbWUpOw0KPiBAQCAtNTYwNCwxMiArNTYwNCwx
MSBAQCBzdGF0aWMgdm9pZCBza2xfYXRvbWljX3VwZGF0ZV9jcnRjX3dtKHN0cnVjdA0KPiBpbnRl
bF9hdG9taWNfc3RhdGUgKnN0YXRlLA0KPiAgc3RhdGljIHZvaWQgc2tsX2luaXRpYWxfd20oc3Ry
dWN0IGludGVsX2F0b21pY19zdGF0ZSAqc3RhdGUsDQo+ICAJCQkgICBzdHJ1Y3QgaW50ZWxfY3J0
Y19zdGF0ZSAqY3J0Y19zdGF0ZSkNCj4gIHsNCj4gLQlzdHJ1Y3QgaW50ZWxfY3J0YyAqaW50ZWxf
Y3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0NCj4gPmJhc2UuY3J0Yyk7DQo+IC0Jc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiA9IGludGVsX2NydGMtPmJhc2UuZGV2Ow0KPiAtCXN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZGV2KTsNCj4gKwlzdHJ1Y3QgaW50
ZWxfY3J0YyAqY3J0YyA9IHRvX2ludGVsX2NydGMoY3J0Y19zdGF0ZS0+YmFzZS5jcnRjKTsNCj4g
KwlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGNydGMtPmJhc2Uu
ZGV2KTsNCj4gIAlzdHJ1Y3Qgc2tsX2RkYl92YWx1ZXMgKnJlc3VsdHMgPSAmc3RhdGUtPndtX3Jl
c3VsdHM7DQo+ICANCj4gLQlpZiAoKHJlc3VsdHMtPmRpcnR5X3BpcGVzICYgZHJtX2NydGNfbWFz
aygmaW50ZWxfY3J0Yy0+YmFzZSkpDQo+ID09IDApDQo+ICsJaWYgKChyZXN1bHRzLT5kaXJ0eV9w
aXBlcyAmIEJJVChjcnRjLT5waXBlKSkgPT0gMCkNCj4gIAkJcmV0dXJuOw0KPiAgDQo+ICAJbXV0
ZXhfbG9jaygmZGV2X3ByaXYtPndtLndtX211dGV4KTsNCj4gQEAgLTU3NTgsNyArNTc1Nyw3IEBA
IHZvaWQgc2tsX3dtX2dldF9od19zdGF0ZShzdHJ1Y3QNCj4gZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYpDQo+ICAJCXNrbF9waXBlX3dtX2dldF9od19zdGF0ZShjcnRjLCAmY3J0Y19zdGF0ZS0N
Cj4gPndtLnNrbC5vcHRpbWFsKTsNCj4gIA0KPiAgCQlpZiAoY3J0Yy0+YWN0aXZlKQ0KPiAtCQkJ
aHctPmRpcnR5X3BpcGVzIHw9IGRybV9jcnRjX21hc2soJmNydGMtPmJhc2UpOw0KPiArCQkJaHct
PmRpcnR5X3BpcGVzIHw9IEJJVChjcnRjLT5waXBlKTsNCj4gIAl9DQo+ICANCj4gIAlpZiAoZGV2
X3ByaXYtPmFjdGl2ZV9waXBlcykgew0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KSW50ZWwtZ2Z4IG1haWxpbmcgbGlzdApJbnRlbC1nZnhAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vaW50ZWwtZ2Z4
